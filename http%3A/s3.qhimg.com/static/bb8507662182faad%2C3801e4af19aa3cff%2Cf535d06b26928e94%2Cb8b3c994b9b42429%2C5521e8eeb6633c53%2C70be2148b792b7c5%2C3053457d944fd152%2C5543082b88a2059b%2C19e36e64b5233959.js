"use strict";(function(){var e={},t={Common:{},event:{on:function(t,n){e[t]?e[t].push(n):e[t]=[n]},emit:function(t,n){if(!e[t])return!1;for(var r=0;r<e[t].length;r++)e[t][r].apply(Object.create(null),n)}}},n={_getInfo:function(e){switch(e){case"mid":var t="";try{t=external.GetSpecialData(external.twGetSecurityID(window)).split(",")[3]}catch(n){}if(!t&&window.wdextcmd!==undefined)try{t=window.wdextcmd.GetMid()}catch(n){}if(!t&&window.external)try{external.GetSID!==undefined&&(t=external.GetMID(external.GetSID(window)))}catch(n){}return t;case"mvuid":var r=function(e){var t=1,n=0,r;if(e){t=0;for(r=e.length-1;r>=0;r--)n=e.charCodeAt(r),t=(t<<6&268435455)+n+(n<<14),n=t&266338304,t=n!=0?t^n>>21:t}return t},i=new Date-0,s=window.location.href,o=r(s),u=""+i+o+Math.random()+Math.random()+Math.random()+Math.random();return u=u.replace(/\./g,"").substring(0,32),u;default:return""}}};n.mid=n._getInfo("mid"),n.mvuid=n._getInfo("mvuid");var r=function(){var e=window.advertiseData?window.advertiseData.data:{},t={};for(var n in e){t[n]={};for(var r in e[n])t[n][r]=function(t,n){return function(){return e[t][n]}}(n,r)}return t};window.hao360=n,window.global=t,window.advertise=r()})();"use strict";(function(e,t,n){var r={random:function(e,t,n){var r=Math.random()*(t-e)+e;return n?Math.round(r):r},bind:function(e,t){return function(){e.apply(t,arguments)}},template:function(e,t,n){var r=/\{([^\{\}]*)\}/g,e=e.replace(r,function(e,r){if(!r)return"";try{var i=t,s=r.split(".");for(var u=0;u<s.length;u++)i=i[s[u]];return typeof i!="undefined"?n?n(i):i:""}catch(a){return e}});return e},getQuery:function(e){var t=[];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")},cookie:{get:function(e){return decodeURIComponent(n.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},set:function(e,t,r,i,s,o){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var u="";if(r)switch(r.constructor){case Number:u=r===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+r;break;case String:u="; expires="+r;break;case Date:u="; expires="+r.toUTCString()}return n.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+u+(s?"; domain="+s:"")+(i?"; path="+i:"")+(o?"; secure":""),!0},remove:function(e,t,r){return!e||!this.hasItem(e)?!1:(n.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(r?"; domain="+r:"")+(t?"; path="+t:""),!0)},has:function(e){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(n.cookie)},keys:function(){var e=n.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var t=0;t<e.length;t++)e[t]=decodeURIComponent(e[t]);return e}},genUid:function(e,t){var n="",r=e,i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];t&&(r=Math.round(Math.random()*(t-e))+e);for(var s=0;s<r;s++){var o=Math.round(Math.random()*(i.length-1));n+=i[o]}return n},base64decode:function(e){var t=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),n,r,i,s,o,u,a;u=e.length,o=0,a="";while(o<u){do n=t[e.charCodeAt(o++)&255];while(o<u&&n==-1);if(n==-1)break;do r=t[e.charCodeAt(o++)&255];while(o<u&&r==-1);if(r==-1)break;a+=String.fromCharCode(n<<2|(r&48)>>4);do{i=e.charCodeAt(o++)&255;if(i==61)return a;i=t[i]}while(o<u&&i==-1);if(i==-1)break;a+=String.fromCharCode((r&15)<<4|(i&60)>>2);do{s=e.charCodeAt(o++)&255;if(s==61)return a;s=t[s]}while(o<u&&s==-1);if(s==-1)break;a+=String.fromCharCode((i&3)<<6|s)}return a},logSender:function(e,n){setTimeout(function(){var n=+(new Date)+Math.random(),r="slog"+n,i=t[r]=new Image;i.src=e+"&_t="+n,i.onload=i.onerror=function(){t[r]=null}},n||0)},getSearchByKey:function(e){var n=t.location.search.match(new RegExp(e+"=[^&]*"));return n?decodeURIComponent(n[0].split("=")[1]):""},setFromToUrl:function(e){var t=r.getSearchByKey("from");return t===""?e:/^(.+[?].+)$/.test(e)?e+"&from="+t:/^(.+[?])$/.test(e)?e+"from="+t:e+"?from="+t}};Object.mix(e,{utils:r})})(global,window,document);"use strict";Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),String.prototype.stractuallen=function(e){if(!this.length||!e)return;var t=0,n="",r=!1;for(var i=0;i<this.length;i++){this.charCodeAt(i)>255?t+=2:t++;if(t>e){r=!0;break}n+=this.charAt(i)}return r&&(n+="..."),n},function(){var e=function(){return{originalColumnDesc:function(){var e=$(".original-column-list li");if(e.length<=0)return;e.each(function(){var e=$(this).find("a:eq(2)").html().replace("<i>.</i>",""),t=e.trim().stractuallen(72);$(this).find("a:eq(2)").html("<i>.</i>"+t)})}}}();e.originalColumnDesc()}(),function(){setTimeout(function(){$.map($(".mood"),function(e,t){$(e).css({animation:"mood-ball 0.5s "+t*.05+"s 1 alternate backwards"})}),setTimeout(function(){$(".mood").css({animation:""})},1e3)},500)}(),function(){if($("#Column").length<1)return;var e=function(){var e=$("#Column"),t=e.height();return{init:function(){this.windowEvent(),this.show()},windowEvent:function(){function t(){e.show()}var e=this;$(window).scroll(t),$(window).resize(t)},show:function(){var n=$(window).height();n<t?e.find(".hide").hide():e.find(".hide").show()}}}().init()}(),function(){if($("#Artwork").length<=0)return;var e=function(){var e=$("#Artwork"),t=$("#Thumbnail"),n=$("#curHighLight"),r=0,i,s=t.find("li").length;return{init:function(){this.hoverEvent(),this.autoEvent()},hoverEvent:function(){var e=this;t.find("li").hover(function(){var t=$(this).index();r=t,clearInterval(i),e.bigCut(),e.smallcut(),e.pos()},function(){e.autoEvent()})},autoEvent:function(){var e=this;i=setInterval(function(){r++,r===s&&(r=0),e.bigCut(),e.smallcut(),e.pos()},3e3)},bigCut:function(){var t=r||0;e.find("li").hide(),e.find("li").eq(t).show()},smallcut:function(){var e=r||0;t.find("li").removeClass("current"),t.find("li").eq(e).addClass("current")},pos:function(){var e=r||0,i=t.find("li").eq(e).position().top,o=e===0||e===s-1?"47px":"45px",u=e===0?i-2:i;n.css({display:"block",height:o,top:u})}}}().init()}(),function(){if($("#leisurePlace").length<1)return;var e=function(){var e=$("#leisurePlace");e.find(".tab_lp li").each(function(e){var t=$(this).find("img").attr("src"),n=$(this).find("img").attr("hover-src");$(this).find("img").attr("init-src",t),e===0&&($(this).addClass("active"),$(this).find("img").attr("src",n))}),e.find(".tab_lp li").hover(function(){e.find(".tab_lp li").removeClass("active"),$(this).addClass("active"),e.find(".tab_lp li").each(function(){$(this).find("img").attr("src",$(this).find("img").attr("init-src"))});var t=$(this).find("img").attr("hover-src");$(this).find("img").attr("src",t),$(this).index()===0?($(".life_clp").hide(),$(".moment_clp").show()):($(".life_clp").show(),$(".moment_clp").hide())})}()}(),function(){if($("#tonalityArea").length<1)return;var e=function(){var e=$("#tonalityArea");e.find("ul li").hover(function(){e.find("li").removeClass("active"),$(this).addClass("active")})}()}(),function(){if($("#highBusinessWord").length<1)return;var e=function(){function e(e){this.options=e||{},this.el=this.options.el,this.init(),this.times=null}e.prototype={init:function(){this._loading=this.loading(),this._monitor=this.monitorTrack(),this._loading.append(),this.request(),this.events()},loading:function(){var e=this,t='<p class="loading"><img src="http://p1.qhimg.com/t012844a3ec4f870d1c.gif" alt=""></p>';return{append:function(){e.el.append(t)},remove:function(){e.el.find(".loading").remove()}}},request:function(){var e=this,t={ls:"s039c45db9d",npg:12,gn:1,l:1,idx:0,sid:hao360.mvuid,haoid:hao360.mid};$.ajax({url:"http://api.so.lianmeng.360.cn/naviad",type:"get",data:t,dataType:"jsonp",jsonp:"_callback",success:function(t){if(t.errno===0){var n=e.render(t.guess);e._loading.remove(),e.el.append(n),e.setTimer(),e.ramHighLight(),e._monitor.show(t.asin)}}})},render:function(e){if(!e[0].sites)return;var e=e[0].sites,t="";for(var n=0,r=e.length;n<r;n++)t+='<li class="highlight"><a href="'+e[n].url+'" target="_blank" data-clk="'+e[n].clk+'"><span>'+e[n].name+"</span></a></li>";return'<ul class="clearfix">'+t+"</ul>"},events:function(){var e=this;e.el.delegate("a","click",function(){var t=$(this).attr("data-clk");e._monitor.clk(t)})},monitorTrack:function(){return{show:function(e){if(!e)return;this.send(e)},clk:function(e){if(!e)return;this.send(e)},send:function(e){var t=new Date,n="&_r="+t.getTime();e+=n,window.monitor&&monitor.sendLog(e)}}},setTimer:function(){var e=this;this.times=setInterval(function(){e.ramHighLight()},3e3)},ramHighLight:function(){var e=Math.round(Math.random()*11);this.el.find("li").removeClass("highlight"),e>=0&&e<=11&&this.el.find("li").eq(e).addClass("highlight")}},new e({el:$("#highBusinessWord")})}()}();"use strict";(function(e,t,n){var r={lazyLoadImages:function(){var e=n.getElementsByTagName("img"),t=function(){var t=n.documentElement.scrollTop||n.body.scrollTop,r=t+n.documentElement.clientHeight;for(var i=0;i<e.length;i++){if(e[i].getAttribute("src")||!e[i].getAttribute("_src"))continue;var s=$(e[i]).offset().top;r>=s&&(e[i].src=e[i].getAttribute("_src"))}};return t(),t},sliderPause:function(e){var t=function(){var t=n.documentElement.scrollTop||n.body.scrollTop,r=t+n.documentElement.clientHeight;for(var i=0;i<e.length;i++){var s=e[i];if(!s.ele||!s.api)continue;var o=$(s.ele).offset();o.bottom=o.top+s.ele.offsetHeight;if(s.api.paused&&(o.top>=r||o.bottom<=t))continue;if(!s.api.paused&&o.top<=r&&o.bottom>=t)continue;if(!s.api.pause&&!s.api.play)continue;o.top>=r||o.bottom<=t?s.api.pause():s.api.play()}};return t(),t}};Object.mix(e.Common,r)})(global,window,document);"use strict";function AdLoad(e){this.url=e.url,this.template=trim(e.template)||"",this.done=e.done||function(){},typeof e.render=="function"&&(this.render=e.render),this.init()}function sendLog(e){function t(e){if(!e)return;var t="log_"+ +(new Date),n=window[t]=new Image;n.onload=n.onerror=function(){window[t]=null},e=e+"&__monitor_t="+Math.random()+(new Date).getTime();var r=/(&turl=)/g;r.test(e)&&(e=e.replace(r,"")+"&turl="),n.src=e}return{pv:function(){var n="";for(var r in e.adspaces){var i=e.adspaces[r].ads.length;while(i--){n+="."+e.adspaces[r].ads[i].imparg;var s=e.adspaces[r].ads[i].imptk.length;while(s--)t(e.adspaces[r].ads[i].imptk[s])}}var o=e.impurl+n.substring(1);t(o)},click:function(n){function o(){for(var e=0;e<r.length;e++)t(r[e])}var r=e,i=n.firstChild.getElementsByTagName("a"),s=i.length;n.firstChild.tagName==="A"&&on(n.firstChild,"click",o);while(s--)on(i[s],"click",o)}}}function initStyle(){if(document.getElementById("pdb_style"))return;var e=document.createElement("style");e.type="text/css",e.id="pdb_style";var t='.flagv {position: relative;}.flagv:after {content: "";display: block;position: absolute;top: 0;left: 0;right: 0;bottom: 0;background: #f60;opacity: 0.3;z-index:999;pointer-events: none;}';e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)}function jsonp(e){e.cbName=e.cbName||"jsonp",e.data=e.data||{};var t="jsonp_"+Math.random();t=t.replace(".",""),e.data[e.cbName]=t;var n=[];for(var r in e.data)n.push(r+"="+e.data[r]);var i=n.join("&"),s=document.createElement("script");s.src=e.url+(e.url.indexOf("?")===-1?"?":"&")+i;var o=document.getElementsByTagName("head")[0];o.appendChild(s),window[t]=function(n){e.success&&e.success(n),window[t]=null,o.removeChild(s)}}function stringToFragment(e){var t=document.createDocumentFragment(),n=document.createElement("div");return n.innerHTML=e,t.appendChild(n.firstChild),t}function compile(e,t,n){var r=/\{\{([^\{\}]*)\}\}/g,e=e.replace(r,function(e,r){if(!r||!t[r])return"";try{var i=t[r];return typeof i!="undefined"?n?n(i):i:""}catch(s){return e}});return e}function on(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function trim(e){return e.replace(/^[\s\uFEFF\xa0\u3000]+|[\uFEFF\xa0\u3000\s]+$/g,"")}AdLoad.prototype.init=function(){this.request(),initStyle()},AdLoad.prototype.request=function(){var e=this;jsonp({url:e.url,success:function(t){var n={};if(e.template!=="")for(var r in t.adspaces){var i=t.adspaces[r].ads[0],s=stringToFragment(compile(e.template,i));sendLog(i.clktk).click(s),i.flagv&&(s.flagv=!0),n[r]=s}e.render(n,t,function(){e.done(),sendLog(t).pv()})}})},AdLoad.prototype.render=function(e,t,n){for(var r in e){var i=document.getElementById(r);if(i===null)continue;i.innerHTML="",e[r].flagv&&(i.className+=" flagv"),i.appendChild(e[r])}n()};(function(){"use strict";function t(){this.eventMap={"click:#ots-delete":"del","click:#ots-open":"open"},this.eles={wrapper:".wrapper",whole:"#whole",part:"#part",ots:"#open-top-screen",otsSecond:"#ots-second",otsDeleteBtn:"#ots-delete",topbar:".topbar"}}var e={bind:function(e,t){return function(){e.apply(t,arguments)}},getTodayTimeStr:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=e.getHours();return""+t+(n>=10?n:"0"+n)+(r>=10?r:"0"+r)+(i>=10?i:"0"+i)}};t.prototype={_initializeElements:function(t){for(var n in t)e.bind(function(e){Object.defineProperty(this,e,{get:function(){return $(t[e])}})},this)(n)},_scanEventsMap:function(t,n){var r=/^(.+):(.+)$/,i=n?e.bind(this._delegate,this):e.bind(this._undelegate,this);for(var s in t)if(t.hasOwnProperty(s)){var o=s.match(r);i(o[1],o[2],this[t[s]])}},_delegate:function(t,n,r){this.body.on(t,n,e.bind(r,this))},_undelegate:function(t,n,r){this.body.off(t,n,e.bind(r,this))},_initializeEvent:function(e){this._scanEventsMap(e,!0)},_destroyEvent:function(e){this._scanEventsMap(e)},initialization:function(){this._initializeElements(Object.assign(this.eles,{body:"body"})),this._initializeEvent(this.eventMap),this.startApplication()},destroy:function(){this._destroyEvent(this.eventMap)},getTemplate:function(){return['<div id="open-top-screen" data-mv-ad="true" bk="open-top-screen" style="position:relative;background-color:#{{color}};text-align:center;">','<div class="container" id="whole" style="text-align:center;position:relative;display:none;">','<a href="{{curl}}" target="_blank"><img src="{{limg}}" alt=""></a>','<div style="position:absolute;right:0;bottom:0;background:rgba(0,0,0,.6);color:#fff;padding:5px 26px 5px 5px;"><i>5\u79d2\u540e\u81ea\u52a8\u6536\u8d77</i> | <span style="font-size:15px;position: absolute;right: 5px;top: 3px;color:#ffde00;" id="ots-second">05</span></div>',"</div>",'<div class="container" id="part" style="position:relative;display:none;">','<a href="{{curl}}" target="_blank"><img src="{{img}}" width="{{imgw}}" height="{{imgh}}" alt=""></a>','<i style="display:block;position:absolute;width:100px;height:30px;right:0;bottom:0;cursor:pointer;" id="ots-open"></i>',"</div>",'<i class="close" id="ots-delete" style="width:13px;height:13px;top:3px;right:3px;cursor:pointer;background:url(http://p3.qhimg.com/t01d1453b20490672f0.png);display:block;position:absolute;"></i>','<i class="ad" style="display:block;position:absolute;right:0;bottom:0;background:url(http://p1.qhimg.com/t012f832ba095e36e6e.png);width:25px;height:15px;"></i>',"</div>"].join(" ")},startApplication:function(){var t=e.getTodayTimeStr(),n=t.substr(-2),r=global.utils.cookie.get("open-top-screen")||"",i=r.substr(-2);if(t.substring(0,8)===r.substring(0,8))if(i<12&&n<12||i>=12&&n>=12)return;this.insertHTML()},insertHTML:function(){var t=this;new AdLoad({url:"http://show.g.mediav.com/s?type=1&of=4&newf=2&showids=dIP9sR",template:this.getTemplate(),render:function(n,r,i){if(!r.adspaces)return global.event.emit("topbar-start");var s=global.utils.cookie.get("open-top-screen:open")||"",o=s?t.close:t.open;t.wrapper.prepend(n.dIP9sR),setTimeout(e.bind(o,t),30),i()}})},_delete:function(){this.ots.remove()},_close:function(){this.whole.slideUp(),this.part.slideDown()},_open:function(){this.whole.slideDown(),this.part.slideUp()},open:function(){this._open(),this.otsDeleteBtn.hide(),this.otsSecond.text("05"),this.timedTask(5,function(e){this.otsSecond.text("0"+(5-e)),e===5&&this.close()}),global.utils.cookie.set("open-top-screen:open",e.getTodayTimeStr(),21600,"/")},close:function(){this._close(),this.otsDeleteBtn.show()},del:function(){this._delete(),global.utils.cookie.set("open-top-screen",e.getTodayTimeStr(),43200,"/")},timedTask:function(t,n){var r=0,i=setInterval(e.bind(function(){++r===5&&clearInterval(i),n.call(this,r)},this),1e3)}},global.event.on("open-screen-bottom:offline",function(){(new t).initialization()})})();function MvAdsMonitor(e){this.options=e||{},this.mvAdsDom=".js-mv-ads-item",this.mvAdsCurl=".js-curl",this.replaceData={},this.impurlImparg={},this.init()}MvAdsMonitor.prototype.init=function(){this.destroyEvent(),this.listenScorllEvent(),this.listenClickEvent()},MvAdsMonitor.prototype.destroyEvent=function(){$(document).off()},MvAdsMonitor.prototype.trigger=function(){var e=this;if($(e.mvAdsDom).length<1)return;var t=function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.clientHeight,r=t+n,i=e.offset().top;return t<i&&r>i};$(e.mvAdsDom).each(function(){var n=$(this);t(n)&&(e.imptkUrlsMonitor(n),e.impargUrlsMonitor(n))}),e.sendImpargUrlsMonitor()},MvAdsMonitor.prototype.firstScreenImptkMonitor=function(){this.trigger()},MvAdsMonitor.prototype.listenScorllEvent=function(){var e=this;$(window).on("resize, scroll",function(){e.trigger()})},MvAdsMonitor.prototype.listenClickEvent=function(){var e=this;$(document).on("mousedown",this.mvAdsDom+" "+this.mvAdsCurl,function(t){var n=$(this),r=t||window.event;e.getCoordinate(r,n),e.replaceData.eventTS=e.getTimes()}).on("mouseup",this.mvAdsDom+" "+this.mvAdsCurl,function(){e.replaceData.eventTE=e.getTimes()}).on("click",this.mvAdsDom+" "+this.mvAdsCurl,function(){var t=$(this);e.clktksMonitor(t);var n=t.attr("href"),r=e.replaceUrl(n);t.attr("href",r),setTimeout(function(){t.attr("href",n)},0)})},MvAdsMonitor.prototype.getTimes=function(){return(new Date).getTime()},MvAdsMonitor.prototype.getCoordinate=function(e,t){function u(e){return parseInt(e<0?Math.abs(e):e)}var n=t.parents(this.mvAdsDom).offset(),r=n.left||0,i=n.top||0,s=e.pageX-r,o=e.pageY-i;this.replaceData.X=u(s),this.replaceData.Y=u(o)},MvAdsMonitor.prototype.imptkUrlsMonitor=function(e){var t=e.attr("data-imptks");if(t){var n=this.decodeUrl(t);while(n.length>0)this.sendLog(n[0]),n.shift();e.removeAttr("data-imptks")}},MvAdsMonitor.prototype.clktksMonitor=function(e){var t=e.parents(this.mvAdsDom).attr("data-clktks");if(t){var n=this.decodeUrl(t);while(n.length>0){var r=this.replaceUrl(n[0]);this.sendLog(r),n.shift()}}},MvAdsMonitor.prototype.impargUrlsMonitor=function(e){var t=e.attr("data-impurl"),n=e.attr("data-imparg"),r=e.parent();if(n&&t){var i=Math.random()+Math.random()+Math.random(),s=String.prototype.replace.call(i,".","");!r.attr("data-unique")&&r.attr("data-unique",s);var o=r.attr("data-unique");this.impurlImparg[o]||(this.impurlImparg[o]={});var u=this.impurlImparg[o].impurl||"";u===""&&(this.impurlImparg[o].impurl=t);var a=this.impurlImparg[o].impargs||[];a.push(n),this.impurlImparg[o].impargs=a,e.removeAttr("data-impurl"),e.removeAttr("data-imparg")}},MvAdsMonitor.prototype.sendImpargUrlsMonitor=function(){for(var e in this.impurlImparg){var t=this.impurlImparg[e],n=t.impurl+t.impargs.join(".");this.sendLog(n)}this.impurlImparg={}},MvAdsMonitor.prototype.replaceUrl=function(e){return e.replace("__EVENT_TIME_START__",this.replaceData.eventTS).replace("__EVENT_TIME_END__",this.replaceData.eventTE).replace("__OFFSET_X__",this.replaceData.X).replace("__OFFSET_Y__",this.replaceData.Y)},MvAdsMonitor.prototype.decodeUrl=function(e){var t=e.split("|"),n=[];for(var r=0;r<t.length;r++)n.push(decodeURIComponent(t[r]));return n},MvAdsMonitor.prototype.sendLog=function(e){if(!e)return;var t=new Date,n="&ts="+t.getTime(),r=/(&turl=)/g;r.test(e)&&(e=e.replace(r,n)+"&turl="),window.monitor&&window.monitor.sendLog(e)};function MvAdsLoad(e,t){this.root=e,this.options=t,this.mvuid=hao360.mvuid||"",this.mvCpcHostConfig={http:"http://show.g.mediav.com/s?type=1&of=4&newf=1&",https:"https://show-g.mediav.com/s?type=1&of=4&newf=1&scheme=https&"},this.mvChuChuanHostConfig={http:"http://show.3.mediav.com/s?type=1&of=4&newf=1&",https:"https://show-3.mediav.com/s?type=1&of=4&newf=1&scheme=https&"},this.hostType=this.options.hostType||"http",this.storeAdsData=[],this.insertAdsPos=0,this.reqtimes=1,this.isUseStep=!1,this.firstAdsFlag=!1,this.callbacks=[],this.adsType=this.options.adsType,this.showid=this.options.showId,this.itemEle=this.options.itemEle,this.template=this.options.template,this.step=this.check("step"),this.startPos=this.check("startpos"),this.adsNum=this.check("adsnum"),this.maxRequestTimes=this.adsType!=="chuchuang"?2:1,this.monitor=this.options.monitor,this.init()}MvAdsLoad.prototype.check=function(e){var t=this,n=/^\d+$/,r={step:function(){var e=t.options.step,r=[];return n.test(e)?r.push(parseInt(e)):Object.prototype.toString.call(e)==="[object Array]"?r=e:r.push(3),r},startpos:function(){var e=parseInt(t.options.startPos);return n.test(e)?e:null},adsnum:function(){var e=parseInt(t.options.adsNum);return n.test(e)?e:10}};return r[e]()},MvAdsLoad.prototype.init=function(){this.execute()},MvAdsLoad.prototype.updata=function(){this.maxRequestTimes=2,this.execute()},MvAdsLoad.prototype.execute=function(){if(this.maxRequestTimes>0&&this.storeAdsData.length<this.adsNum)this.requestData(),this.maxRequestTimes--;else if(this.callbacks.length<1)this.render();else for(var e=0;e<this.callbacks.length;e++)this.callbacks[e](this.storeAdsData);this.monitor.firstScreenImptkMonitor()},MvAdsLoad.prototype.requestData=function(){var e=this,t={uid:this.mvuid,showid:this.showid,impct:this.adsNum};this.adsType!=="chuchuang"&&(t.reqtimes=this.reqtimes);var n=this.adsType==="infoflow"?this.mvCpcHostConfig:this.mvChuChuanHostConfig,r=n[this.hostType]+$.param(t)+"&jsonp=?";$.getJSON(r,function(t){if(t){var n=t.ads||[];e.storeAdsData=e.storeAdsData.concat(e.handleAdsData(n,t.impurl)),e.reqtimes++,e.execute()}})},MvAdsLoad.prototype.handleAdsData=function(e,t){for(var n=0;n<e.length;n++){var r=this.encodeUrl(e[n].imptk).join("|"),i=this.encodeUrl(e[n].clktk).join("|");t&&(e[n].impurl=t),e[n].dataImptks=r,e[n].dataClktks=i}return e},MvAdsLoad.prototype.encodeUrl=function(e){var t=[];for(var n=0;n<e.length;n++)t.push(encodeURIComponent(e[n]));return t},MvAdsLoad.prototype.render=function(){var e=this,t=this.storeAdsData;for(var n=0;n<t.length;n++){var r=this.template===""?this.tmplFragment():this.template,i=$.tmpl(r,t[n]),s=this.insertAdsPos;if(!this.firstAdsFlag&&(this.startPos||this.startPos===0)){s=this.startPos;var o=this.root.find(this.itemEle).eq(s);if(o.length>0){o.before(i),this.firstAdsFlag=!0,this.storeAdsData=this.storeAdsData.slice(1),this.insertAdsPos=s;continue}break}var s=s+this.fetchStep(),o=this.root.find(this.itemEle).not(".js-mv-ads-item").eq(s-1);if(!(o.length>0))break;o.after(i),this.storeAdsData=this.storeAdsData.slice(1),this.insertAdsPos=s,this.isUseStep=!0}var u=window.location.search.split("?")[1],a=u&&u.split("=")[1];if(a==="1"){var f=this.root.find(this.itemEle);console.log(e.showid+": "),f.each(function(e){console.log(e,$(this).attr("class"))})}},MvAdsLoad.prototype.fetchStep=function(){this.isUseStep&&(this.step.push(this.step.shift()),this.isUseStep=!1);const e=this.step.slice(0,1);return parseInt(e)},MvAdsLoad.prototype.tmplFragment=function(){return['<li class="feed-item mv-ads-item js-mv-ads-item" data-imptks=${dataImptks} data-clktks=${dataClktks}>',"{{if type == 1}}",'<div class="single-img">','<div class="pic">','<a href="${curl}" target="_blank" class="js-curl">','<img src="${img}" alt="${desc}">',"</a>","</div>",'<div class="title">','<a href="${curl}" target="_blank" class="js-curl">${title}</a>',"</div>",'<div class="desc clearfix">','<span class="sourceicon"><img src="http://p9.qhimg.com/t013cddd2cd8e34be86.png" alt=""></span>','<span class="source">\u5e7f\u544a</span>','<a class="tags" href="${curl}" target="_blank" class="js-curl">#${src}#</a>',"</div>","</div>","{{else type == 2}}",'<div class="multiple-img">','<div class="title">','<a href="${curl}" target="_blank" class="js-curl">${title}</a>',"</div>",'<div class="pics">','<div class="pics-in clearfix">',"{{each(i, pic) assets}}","{{if i <= 3}}","{{if pic.imgw && pic.imgh && pic.imgw === pic.imgh}}",'<a class="pic-square js-curl" href="${curl}" target="_blank">','<img src="${pic.img}">',"<span>${pic.desc}</span>","</a>","{{else}}",'<a class="pic-rect js-curl" href="${curl}" target="_blank">','<img src="${pic.img}">',"</a>","{{/if}}","{{/if}}","{{/each}}","</div>","</div>",'<div class="desc clearfix">','<span class="sourceicon"><img src="http://p9.qhimg.com/t013cddd2cd8e34be86.png" alt=""></span>','<span class="source">\u5e7f\u544a</span>','<a class="tags js-curl" href="${curl}" target="_blank">${src}#</a>',"</div>","</div>","{{else type == 3}}",'<div class="big-img">','<div class="title">','<a href="${curl}" target="_blank" class="js-curl">${title}</a>',"</div>",'<div class="pic clearfix">','<a href="${curl}" target="_blank" class="js-curl"><img src="${img}" alt="" /></a>',"</div>",'<div class="desc clearfix">','<span class="source-icon"><img src="http://p9.qhimg.com/t013cddd2cd8e34be86.png" alt=""></span>','<span class="source">\u5e7f\u544a</span>','<a class="tags js-currl" href="${curl}" target="_blank">#${src}#</a>',"</div>","</div>","{{else type == 4}}",'<div class="single-video">',"</div>","{{/if}}","</li>"].join("")},MvAdsLoad.prototype.then=function(e){return typeof e=="function"&&Object.prototype.toString.call(e)==="[object Function]"&&this.callbacks.push(e),this};(function(e){try{var t=new MvAdsMonitor;e.fn.mvAdsLoad=function(n){var r=e(this),i={url:"http://show.g.mediav.com/s",showId:"",adsNum:10,step:3,startPos:"",template:"",itemEle:"li.feed-item",adsType:"infoflow",monitor:t},s=e.extend(i,n);return new MvAdsLoad(r,s)}}catch(n){throw n}})(jQuery);