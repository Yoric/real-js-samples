"use strict";(function(){var e=global.Common.lazyLoadImages();$(window).on("scroll",e),$(window).on("resize",e)})(),function(){var e="#doc-nav .more-nav .more-nav-list",t=$("#more_btn"),n=t.offset().left;$(e).css("right",0)}(),function(){var e="#doc-hd2 .more-nav",t=$(".navigation li.more"),n=t.offset().left;$(e).css("left",n-$(e).width()+t.innerWidth()+"px")}(),function(){function t(){e!==null&&(clearTimeout(e),e=null),$(".more-nav").addClass("on"),$("#more_btn").parent("li").addClass("on")}function n(){e=setTimeout(function(){$(".more-nav").removeClass("on"),$("#more_btn").parent("li").removeClass("on")},200)}$("#more_btn").parent("li").hover(t,n),$(".more-nav").hover(t,n);var e=null}(),function(){$("#right-bar").show(),$(window).on("scroll resize",function(e){var t=$("body").height(),n=$(window).height(),r=$(window).scrollTop(),i=t-r-n,s=$(".ft-info").height()+$(".doc-ft").height()+20;$("#right-bar").show(),i<=s?$("#right-bar").css("bottom",s-i):$("#right-bar").css("bottom","50px")}),$("#right-bar .erweima .duck-right").hover(function(){$("#right-bar .erweima .erweima-big").css("visibility","visible")},function(){$("#right-bar .erweima .erweima-big").css("visibility","hidden")}),$("#right-bar .top").on("click",function(){$("html,body").animate({scrollTop:"0px"},600)})}(),function(){var e=$("#so360_keyword").val();$("#so360_keyword").focus(function(){var t=$(this).val();t===e&&($(this).val(""),$(this).css("color","initial"))}).blur(function(){$(this).val()===""&&$(this).val(e).css("color","#a7a7a7")})}(),function(){function e(e){var t=".navigation .user-info .user-avatar",n=".navigation .user-info .user-avatar img",r=".navigation .user-info .user-name",i=".navigation .user-info",s=".navigation .sign-in";$(n).attr("src",e.img_url),$(t).attr("href",e.img_url),$(r).text(e.nickname||e.userName),$(i).removeClass("none"),$(s).addClass("none")}function t(){$(".navigation .user-info").addClass("none"),$(".navigation .sign-in").removeClass("none")}QHPass.init("pcw_yule"),QHPass.getUserInfo(e,t),$("#signin").click(function(){QHPass.signIn(e)}),$("#signup").on("click",function(){QHPass.setConfig("signUp.types",["email","mobile"]),QHPass.signUp()}),$("#logout").on("click",function(){QHPass.signOut(t)})}(),function(){function e(e){$("body>.wrapper").prepend(n(e)),$(".topbar").slideDown()}function t(){global.utils.cookie.set("topbar",r(),86400,"/"),$(".topbar").remove()}function n(e){function r(e){return e.map(function(e){return'<li><a href="'+e.href+'" target="_blank"><img src="'+e.img+'" alt=""></a></li>'}).join(" ")}var t="background: "+e.bgColor+" url("+e.bgImg+") center top no-repeat;height:"+e.height+";position:relative;display:none;",n=['<div class="topbar" style="'+t+'" bk="topbar">','<div class="container">',"<ul>",r(e.list),"</ul>","</div>",e.closeBtn?'<span class="close"><img src="http://p6.qhimg.com/t01890397a36d055b1f.png" alt=""></span>':"","</div>"].join(" ");return n}function r(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate();return""+t+(n>=10?n:"0"+n)+(r>=10?r:"0"+r)}global.event.on("topbar-start",function(){r()>global.utils.cookie.get("topbar")&&typeof topbarData=="object"&&e(topbarData)}),$("body").on("click",".topbar .close",t)}(),function(){function e(e){return['<div class="floor" bk="right_floor">','<div class="h"><a href="'+e.headUrl+'" target="_blank"><img src="'+e.headImg+'"></a></div>','<div class="b">',t(e.list),"</div>","</div>"].join(" ")}function t(e){return e.map(function(e){return e.show?'<a href="'+e.href+'" class="'+e.id+'" target="_blank">'+e.name+"</a>":""}).join(" ")}typeof rightFloorData=="object"&&$("#right-bar").prepend(e(rightFloorData))}(),function(){function t(e,t){var n=e.attr("href");e.attr("href",t)}var e=global.utils.setFromToUrl;$("body").on("mousedown","a",function(){var n=$(this).attr("href");if(!/^(\/)/img.test(n))return;t($(this),e(n))})}();(function(e){if(e("#todayRecommend").length<1)return!1;var t=window.global.MEDIAV_SHOWIDS,n=t&&t.todayRecommend,r=['<li class="fadeInDown mv-ads-item js-mv-ads-item" data-imptks="${dataImptks}" data-clktks="${dataClktks}" data-impurl="${impurl}" data-imparg="${imparg}">','<a href="${curl}" class="js-curl" target="_blank">','<span class="img-mtr">','<img src="${img}" alt="${desc}">','<span class="mask"></span>',"</span>",'<span class="text-mtr">${desc}</span>',"</a>","</li>"].join("");e("#todayRecommend").mvAdsLoad({showId:n,adsNum:6,adsType:"chuchuang"}).then(function(t){for(var n=0;n<t.length;n++){var i=e.tmpl(r,t[n]);e("#todayRecommend").find("li:eq("+n+")").addClass("fadeOutDown").replaceWith(i)}e("#todayRecommend").find("li").not(".js-mv-ads-item").addClass("fadeInDown")})})(jQuery),function(e){if(e("#bestRecommend").length<1)return!1;var t=window.global.MEDIAV_SHOWIDS,n=t&&t.bestrecommend,r=['<li class="fadeInDown mv-ads-item js-mv-ads-item item" data-imptks="${dataImptks}" data-clktks="${dataClktks}" data-impurl="${impurl}" data-imparg="${imparg}">','<a href="${curl}" target="_blank" class="js-curl">','<span class="pic">','<img src="${img}" alt="${desc}">','<span class="mask"></span>',"</span>",'<span class="tit">${desc}</span>',"</a>","</li>"].join("");e("#bestRecommend").mvAdsLoad({showId:n,adsNum:6,adsType:"chuchuang"}).then(function(t){for(var n=0;n<t.length;n++){var i=e.tmpl(r,t[n]);e("#bestRecommend").find("li:eq("+n+")").addClass("fadeOutDown").replaceWith(i)}e("#bestRecommend").find("li").not(".js-mv-ads-item").addClass("fadeInDown")})}(jQuery),function(e){if(e("#hotRecommend").length<1)return!1;var t=window.global.MEDIAV_SHOWIDS,n=t&&t.hotRecommend,r=Math.ceil(e("#hotRecommend").find("li").length/2),i=['<li class="mv-ads-item js-mv-ads-item clearfix" data-imptks="${dataImptks}" data-clktks="${dataClktks}">','<div class="g-pic">','<a href="${curl}" target="_blank" class="js-curl">','<img src="${img}" alt="${desc}">','<span class="mask"></span>','<i class="ad_mark"></i>',"</a>","</div>","<p>","<span>",'<a href="${curl}" target="_blank" class="js-curl">${desc}</a>',"</span>","</p>","</li>"].join("");e("#hotRecommend").mvAdsLoad({showId:n||"",adsNum:r||4,step:2,template:i,itemEle:"li"})}(jQuery),function(e){if(e("#todayHot").length<1)return!1;var t=window.global.MEDIAV_SHOWIDS,n=t&&t.todayhot,r=Math.ceil(e("#todayHot").find("li").length/2),i=['<li class="mv-ads-item js-mv-ads-item" data-imptks="${dataImptks}" data-clktks="${dataClktks}">','<a href="${curl}" target="_blank" class="js-curl"> ','<div class="pic_pcth">','<img src="${img}" alt="${desc}">','<em class="ad_mark"></em>',"</div>",'<div class="details_pcth">','<p class="title_dpcth">${desc}</p>',"</div>","</a>","</li>"].join("");e("#todayHot").mvAdsLoad({showId:n,adsNum:r||4,step:2,template:i,itemEle:"li"})}(jQuery),function(e){if(e("#photo-recommend-list").length<1)return!1;var t=window.global.MEDIAV_SHOWIDS,n=t&&t.photoRecommend,r=['<li class="mv-ads-item js-mv-ads-item" data-imptks="${dataImptks}" data-clktks="${dataClktks}">','<a href="${curl}" target="_blank" class="js-curl"> ','<em class="ad_mark"></em>','<span class="cover"><img src="${img}" alt="${desc}"></span>','<span class="text">${desc}</span>',"</a>","</li>"].join("");e("#photo-recommend-list").mvAdsLoad({showId:n,adsNum:4,step:2,template:r,itemEle:"li"})}(jQuery),function(e){if(e("#wonderful-recom").length<1)return!1;var t=window.global.MEDIAV_SHOWIDS,n=t&&t.jingcaituijian,r=['<li class="mv-ads-item js-mv-ads-item" data-imptks="${dataImptks}" data-clktks="${dataClktks}">','<a href="${curl}" target="_blank" class="js-curl">','<span class="cover"><img src="${img}" alt="${desc}"></span>','<span class="text">${desc}</span>',"</a>","</li>"].join("");e("#wonderful-recom").mvAdsLoad({showId:n,adsNum:4}).then(function(t){for(var n=0;n<t.length;n++){var i=e.tmpl(r,t[n]);e("#wonderful-recom ul").append(i)}e("#wonderful-recom .ad-mark").show()})}(jQuery);(function(e,t){function n(){this.data=t.OPEN_SCREEN_DATA||{},this.globalEvent=t.event,this.cookie=t.utils.cookie,this.tmpl=this.templete(),this.cookieTheme="open-screen-bottom:theme",this.theme=this.cookie.get(this.cookieTheme)||"false",this.openScreenDom=null,this.thumbDom=null,this.rightBarDom=e("#right-bar"),this.rightBarPos={},this.intervalTimer=null;if(e.isEmptyObject(this.data))throw"not open screen data";if(parseInt(this.data.online)===0)return this.globalEvent&&this.globalEvent.emit("open-screen-bottom:offline"),!1;this.theme==this.data.theme?(this.thumbDisplay(),this.globalEvent&&this.globalEvent.emit("open-screen-bottom:offline")):this.init()}n.prototype={init:function(){this.getRightBarPos(),this.destoryEvent(),this.bindEvent(),this.render()},bindEvent:function(){var t=this;e(window).on("scroll resize",function(){t.getRightBarPos()});if(!this.openScreenDom)return!1;this.openScreenDom.find(".open-screen-close").on("click",function(){t.close(),t.intervalTimer&&clearInterval(t.intervalTimer)})},destoryEvent:function(){if(!this.openScreenDom)return!1;this.openScreenDom.find(".open-screen-close").off("click")},getRightBarPos:function(){var e=this.rightBarDom[0],t=e.getBoundingClientRect();this.rightBarPos={left:t.left,top:t.top}},render:function(){e("body .wrapper").append(this.tmpl.openHTML()),this.openScreenDom=e("#openScreenBottom"),this.open(),this.destoryEvent(),this.bindEvent()},templete:function(){var e=this;return{openHTML:function(){var t=/^(http:|https:)/.test(e.data.background),n=t?"url("+e.data.background+") 0 0 repeat-x":e.data.background;return['<div class="open-screen-bottom" id="openScreenBottom" bk="open-screen-bottom" style="width: 100%; height: 300px; position: fixed; bottom: -300px; left: 0; right: 0; overflow: hidden; z-index: 999; background: '+n+'">','<div class="open-screen-tips" style="width: 97px; height: 25px; padding-right: 43px; border-radius: 15px; background:#000; background: rgba(0,0,0,0.35); position: absolute; top: 46px; left: 50%; margin-left: 460px; z-index: 1;">','<span class="open-screen-sec" style="font-size: 12px; line-height: 25px; color: #fff; padding-left: 10px;">','<b class="open-screen-count" style="color: #f11460; padding-right: 1px; font-weight: normal;">5</b>\u79d2\u540e\u81ea\u52a8\u6536\u8d77',"</span>",'<span class="open-screen-close" style="font-size: 12px; line-height: 25px; color: #fff; padding-left: 8px; cursor: pointer; position: absolute; right: 10px; top: 0; background: url(http://p8.qhimg.com/t014515afd6b15b4752.png) left center no-repeat;">\u6536\u8d77</span>',"</div>",'<a href="'+e.data.url+'" target="_blank" style="display: block; width: 100%; height: 100%;">','<div class="open-screen-content" style="width: 1200px; max-height: 300px; overflow: hidden; position: absolute; bottom: 0; left: 50%; margin-left: -600px;">','<img src="'+e.data.image+'" style="display: block;">',"</div>","</a>","</div>"].join("")},thumbHTML:function(){return['<div class="open-screen-bottom-thumb" bk="open-screen-bottom-thumb" style="margin-bottom: 5px; display: none;">','<a href="'+e.data.url+'" target="_blank">','<img src="'+e.data.thumb+'">',"</a>","</div>"].join("")}}},open:function(){var e=this;this.openScreenDom.stop().animate({bottom:0},1e3,function(){e.cookie.set(e.cookieTheme,e.data.theme,"","/"),e.countDown()})},close:function(){var e=this,t={width:0,height:0,top:e.rightBarPos.top-25,left:e.rightBarPos.left+25,opacity:0};e.openScreenDom.stop().animate(t,700,"swing",function(){e.thumbDisplay(),e.openScreenDom.remove()})},thumbDisplay:function(){this.rightBarDom.prepend(this.tmpl.thumbHTML()),e(".open-screen-bottom-thumb").fadeIn()},countDown:function(){var e=this,t=5;e.intervalTimer=setInterval(function(){e.openScreenDom.find(".open-screen-count").text(--t),t<=0&&(e.close(),clearInterval(e.intervalTimer))},1e3)}},new n})(jQuery,global);