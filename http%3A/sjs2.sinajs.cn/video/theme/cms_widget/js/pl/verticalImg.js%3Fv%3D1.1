SVK.register("kit.dom.builder",function(a){return function(b,c){var d=typeof b=="string",e=b;if(d){e=document.createElement("div");e.innerHTML=b}var f,g;g=a("[node-type]",e);f={};for(var h=0,i=g.length;h<i;h+=1){var j=g[h].getAttribute("node-type");f[j]||(f[j]=[]);f[j].push(g[h])}var k=b;if(d){k=document.createDocumentFragment();while(e.childNodes[0])k.appendChild(e.childNodes[0])}return{box:k,list:f}}});
SVK.register("common.layout.winResize",function(a){return{onResizeEnd:function(b){var c=this,d="normal",e=null,f=function(){e&&clearTimeout(e);e=setTimeout(function(){b&&b();d="normal"},50)};a(document).ready(function(){a(window).on("resize",function(){d="resizing";f()})})},onResizeStart:function(b){var c=this,d=!1;c.onResizeEnd(function(){d=!1});a(document).ready(function(){a(window).on("resize",function(){if(!d){b&&b();d=!0}})})}}});
SVK.register("widget.extra.dom.scaleImg",function(a){return function(b,c){if(!c||!c.ratio||!c.type||!c.wrapperDom||!a.isArray(b)){console.log("plz check the pramas");return!1}c.gapWidth=c.gapWidth||0;var d=c.ratio.split("_")[0]/c.ratio.split("_")[1];!d&&(d=4/3);c.ratio=d;c.type=c.type||1;var e=function(){var d=a(c.wrapperDom).width(),e=(d-c.gapWidth*(c.type-1))/c.type,f=e/c.ratio;f>750&&(f=750);!!c.beforeFn&&c.beforeFn({singleWidth:e,singleHeight:f,imgList:b});a.each(b,function(a,b){var c=Number(b.width),d=Number(b.height);b.parent.css("line-height",f-3+"px");if(c>e){d=d*e/c;c=e}if(d>f){c=c*f/d;d=f}b.dom.width(c);b.dom.height(d);if(!!b.dom.attr("_src")){b.dom.attr("src",b.src);b.dom.removeAttr("_src")}});!!c.afterFn&&c.afterFn({singleWidth:e,singleHeight:f,imgList:b})};e();a.common.layout.winResize.onResizeEnd(e)}});
SVK.register("pl.verticalImg",function(a){var b=a.kit.dom.builder,c={},d=20,e="CM-vertical250",f=250;c.init=function(c,g){var h=window._SINANEWSDATA[g.id];h.gapWidth=d;h.wrapperDom=c;var i=b(c).list,j=[];a.each(i.img,function(b,c){var d={},e=a.core.json.queryToJson(a(c).attr("action-data"));d.src=a(c).attr("_src");d.width=e.width;d.height=e.height;d.dom=a(c);d.parent=a(c).parentsUntil("[node-type=list]");j.push(d)});h.beforeFn=function(b){a.each(i.list,function(c,d){a(d).height(b.singleHeight);a(d).width(b.singleWidth);b.singleWidth<f?a(d).addClass(e):a(d).removeClass(e)})};a.widget.extra.dom.scaleImg(j,h)};return c});
