SVK.register("widget.extra.dom.textDefault",function(a){var b=function(){return"placeholder"in document.createElement("input")}(),c=function(b){var c=b.attr("placeholder")||"",d=b.attr("placeclass")||"";if(c=="")return;if(b.attr("type")=="password"){var e=a('<input type="text" class="'+b.attr("class")||'" style="'+b.attr("style")+'" />');e.insertAfter(b);e.val(c);e.addClass(d);b.hide();e.focus(function(){b.show();b.focus();e.hide()});b.blur(function(){if(!a.trim(b.val())){e.show();b.hide()}})}else{b.val(c);b.addClass(d);b.focus(function(){if(a.trim(b.val())==c){b.val("");b.removeClass(d)}});b.blur(function(){if(!a.trim(b.val())){b.val(c);b.addClass(d)}})}},d=function(b){b.bind("blur",function(){a.trim(b.val())||b.val("")})},e=function(a){b?d(a):c(a)};return function(b){if(!b||!b.get(0))return;b.find("[placeholder]").each(function(){e(a(this))})}});
SVK.register("widget.extra.verify.baseVerify",function(a){return{doverify:function(b){if(!b)return!1;b.val=b.val.toString();b.verifytype=b.verifytype||"string";if(b.val!="")switch(b.verifytype){case"num":b.numtype=b.numtype||1;if(b.numtype==3)var c=/^\d+$|^\d+\.\d+$/.test(b.val);else if(b.numtype==2)var c=/^\d+\.\d+$/.test(b.val);else var c=/^\d+$/.test(b.val);if(!c)return!1;b.val=parseFloat(b.val);if(typeof b.min!="undefined"&&b.min>b.val)return!1;if(typeof b.max!="undefined"&&b.max<b.val)return!1;break;case"string":var d=a.bLength(b.val);if(typeof b.min!="undefined"){b.min<0&&(b.min=0);if(d<b.min)return!1}if(typeof b.max!="undefined"){b.max<0&&(b.max=0);if(d>b.max)return!1}if(b.regular){if(b.pattern)var e=new RegExp(b.regular,b.pattern);else var e=new RegExp(b.regular);if(!e.test(b.val))return!1}}else if(b.require)return!1;return!0}}});
SVK.register("widget.extra.verify.verifydata",function(a){var b=a.widget.extra.verify.baseVerify;return function(c,d){var e=[],f=function(){if(!c||c.length==0)return;typeof d!="boolean"&&(d=!1);c.find("[verify]").each(function(){var b=a(this),c=a.queryToJson(b.attr("verify"));typeof c.min!="undefined"&&(c.min=parseInt(c.min));typeof c.max!="undefined"&&(c.max=parseInt(c.max));typeof c.require!="undefined"&&(c.require=Boolean(c.require));c.node=b;e.push(c)})};f();var g={verify:function(){var c=!0,f=[];for(var h=0,i=e.length;h<i;h++){var j=e[h],k={result:!0,node:j.node},l="";j.val=a.trim(j.node.val());j.val==j.node.attr("placeholder")&&(j.val="");k.result=b.doverify(j);k.result&&j.name&&g.otherVerify.fire(j.name,k);c=c&&k.result;if(!k.result){(l=j.node.attr("errormsg"))&&f.push(l);if(!d)break}}return{msg:f,result:c}},otherVerify:a.Callbacks()};return g}});
SVK.register("comp.search",function(a){function d(){var d=a("#pl_search"),e=d.find('[name="q"]');b(d);var f=c(d);d.on("submit",function(a){if(!f.verify().result){e.blur();return!1}});a("#pl_search_submit").on("click",function(a){d.submit()})}var b=a.widget.extra.dom.textDefault,c=a.widget.extra.verify.verifydata;d()});

