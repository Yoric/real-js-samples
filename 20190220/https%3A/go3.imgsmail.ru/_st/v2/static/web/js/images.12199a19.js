!function(){pxt.add("ptc",{args:["u","n","dev","view","pu","us"]}),pxt.add("pop",{args:["u","l","n"]}),pxt.add("ppar",{args:["t"]}),pxt.add("plf",{args:["u"]}),pxt.add("pge",{args:["u"]}),pxt.add("pmr",{base:"/showpxt"}),pxt.add("psf",{args:["u","mw"]}),pxt.add("pshare",{args:["t","u"]}),pxt.add("psp",{args:["u","t","mw"]}),pxt.add("php",{args:["u"]}),pxt.add("pfres",{}),pxt.add("pfsize",{args:["u","t"]}),pxt.add("pfcolor",{args:["u","t"]}),pxt.add("pftype",{args:["u","t"]}),pxt.add("pdup",{args:[]}),pxt.add("pfr",{args:["u","l","wo","ho","wi","hi"]}),pxt.add("imgv",{args:["u","n"]}),pxt.add("img_top",{args:["t","u"]}),pxt.add("cp",{base:"/img/c/f.gif",args:["v","z"]}),pxt.add("i1",{base:"/img/c/i1.gif",args:["u","p"]}),pxt.add("ialqs",{args:["u","p"]}),pxt.add("img_type",{args:["t","u"]}),pxt.add("img_size",{args:["t","u"]}),pxt.add("pals",{base:"/showpxt"}),pxt.add("palt",{args:["u","p"]}),pxt.add("pmw",{base:"/showpxt",args:["u"]})}(),function(a){function b(){c&&(f(b),a.fx.tick())}for(var c,d=0,e=["webkit","moz"],f=window.requestAnimationFrame,g=window.cancelAnimationFrame;d<e.length&&!f;d++)f=window[e[d]+"RequestAnimationFrame"],g=g||window[e[d]+"CancelAnimationFrame"]||window[e[d]+"CancelRequestAnimationFrame"];f?(window.requestAnimationFrame=f,window.cancelAnimationFrame=g,a.fx.timer=function(d){d()&&a.timers.push(d)&&!c&&(c=!0,b())},a.fx.stop=function(){c=!1}):(window.requestAnimationFrame=function(a,b){var c=(new Date).getTime(),e=Math.max(0,16-(c-d)),f=window.setTimeout(function(){a(c+e)},e);return d=c+e,f},window.cancelAnimationFrame=function(a){clearTimeout(a)})}(jQuery),function(a){"use strict";function b(b,e){this.disabled=!1,this.element=b,this.$element=a(b),this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.time={},this.elementHeight=null,this.elementWidth=null,this.multiplier=1,this.init()}var c="momentum",d={duration:1.5*window.innerHeight,speedLimit:1.2,handleY:!0,handleX:!0,moveThreshold:300,offsetThreshold:30,startThreshold:5,acceleration:.5,accelerationT:250};void 0===a.easing.hnlinertial&&(a.easing.hnlinertial=function(a,b,c,d,e){var f=(b/=e)*b,g=f*b;return c+d*(-1*f*f+4*g+-6*f+4*b)}),a.extend(b.prototype,{init:function(){this.checkScrollable();var a=this;return this.$element.on("touchstart",function(b){a.tap(b)}).on("touchmove",function(b){a.drag(b)}).on("touchend",function(b){a.release(b)}),this},reinit:function(){return!!this.disabled||(this.checkScrollable(),this)},enable:function(){return this.disabled=!1,this},disable:function(){return this.disabled=!0,this},checkScrollable:function(){this.elementHeight=this.$element.innerHeight(),this.elementWidth=this.$element.innerWidth(),this.scrollableY=Boolean(this.elementHeight<this.$element.prop("scrollHeight")&&this.settings.handleY),this.scrollableX=Boolean(this.elementWidth<this.$element.prop("scrollWidth")&&this.settings.handleX)},tap:function(b){return!!this.disabled||(this.time.touchstart=b.timeStamp,this.pageY=b.originalEvent.touches[0].pageY,this.pageX=b.originalEvent.touches[0].pageX,this.$element.is(":animated")&&this.time.touchstart-this.time.touchend<this.accelerationT?this.multiplier+=this.settings.acceleration:this.multiplier=1,this.$element.stop(!0,!1),this.scrollTop=a(this.element).scrollTop(),void(this.scrollLeft=a(this.element).scrollLeft()))},drag:function(a){return!!this.disabled||(a.preventDefault(),this.time.touchmove=a.timeStamp,this.go=Math.abs(this.pageX-a.originalEvent.touches[0].pageX)>this.settings.startThreshold||Math.abs(this.pageY-a.originalEvent.touches[0].pageY)>this.settings.startThreshold,void(this.go&&(this.animPar1={},this.vertical=Math.abs(this.pageX-a.originalEvent.touches[0].pageX)<Math.abs(this.pageY-a.originalEvent.touches[0].pageY),this.distance=this.vertical?this.pageY-a.originalEvent.touches[0].pageY:this.pageX-a.originalEvent.touches[0].pageX,this.acc=Math.abs(this.distance/(this.time.touchmove-this.time.touchstart)),this.animProp=null,this.vertical&&this.scrollableY?this.animProp="scrollTop":!this.vertical&&this.scrollableX&&(this.animProp="scrollLeft"),this.animProp&&(this.animPar1[this.animProp]=this[this.animProp]+this.distance),this.animPar2={duration:0},(this.scrollableY||this.scrollableX)&&this.animProp&&this.$element.stop(!0,!1).animate(this.animPar1,this.animPar2))))},release:function(a){return!!this.disabled||(this.time.touchend=a.timeStamp,void(this.go&&(this.animPar1={},this.touchTime=this.time.touchend-this.time.touchmove,this.maxOffset=(this.vertical?this.elementHeight:this.elementWidth)*this.settings.speedLimit,this.offset=Math.pow(this.acc,2)*(this.vertical?this.elementHeight:this.elementWidth),this.offset=this.offset>this.maxOffset?this.maxOffset:this.offset,this.offset=this.distance<0?-this.multiplier*this.offset:this.multiplier*this.offset,this.touchTime<this.settings.moveThreshold&&0!==this.offset&&Math.abs(this.offset)>this.settings.moveThreshold&&(this.animProp&&(this.animPar1[this.animProp]=this[this.animProp]+this.distance+this.offset),this.animPar2={duration:this.settings.duration,easing:"hnlinertial",complete:function(){this.multiplier=1}}),(this.scrollableY||this.scrollableX)&&this.animProp&&this.$element.stop(!0,!1).animate(this.animPar1,this.animPar2))))}}),a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery),function(){var a=function(a){return a<10?"0"+a:a},b=function(b){if(b&&0!==b){var c=new Date,d=new Date(1e3*b),e=c-d,f=parseInt(e/6e4),g=parseInt(f/1440),h=parseInt(g/7),i="";if(f<=1)i="сейчас";else if(f<60)i=f+"&nbsp;"+pluralFormat(f,"минуту","минуты","минут")+"&nbsp;назад";else if(f>=60&&f<120)i="час&nbsp;назад";else if(f>=120&&f<420){var j=parseInt(f/60);i=j+"&nbsp;"+pluralFormat(j,"час","часа","часов")+"&nbsp;назад"}else i=0===g?"сегодня":1===g?"вчера":g<7?g+"&nbsp;"+pluralFormat(g,"день","дня","дней")+"&nbsp;назад":h<4?h+"&nbsp;"+pluralFormat(h,"неделю","недели","недель")+"&nbsp;назад":a(d.getDate())+"."+a(d.getMonth()+1)+"."+d.getFullYear().toString().slice(-2);return i}},c=function(a){return a?a<1024?a+" байт":Math.ceil(a/1024)+" КБ":""};Handlebars.registerHelper("_humanTime",b),Handlebars.registerHelper("_formatFilesize",c)}();var grid=function(){var a,b,c,d,e,f,g=267,h=100,i=310,j=17,k=null,l=null,m=null,n=null,o=!1,p=[],q=[],r=function(c,d){a=d,STP.itemTemplate&&(l=Handlebars.compile(STP.itemTemplate),u(c)),STP.altImages&&(b=$(".js-alt-images"),k=b.find(".js-alt-images-list"),o=!0,A()),$(window).on("resize",v)},s=function(a){if(STP.experiments.srch42181_1||STP.experiments.srch42181_2){const b=$(this);b.addClass("hovered"),b.offset().left+340>window.outerWidth&&b.addClass("rightsided"),direct.renderRtb({id:"192658",hash:this.id,number:(+this.attributes["data-index"].value||0)/3,search_text:STP.experiments.srch42181_1?STP.qswap:b.find(".js-images-item__pic").data("content")})}a.stopPropagation()},t=function(a){$(this).removeClass("hovered").removeClass("rightsided"),a.stopPropagation()},u=function(b,c){var d=STP.results.items.length-b.items.length-1;n=c?d:null;var e=$(l(b).replace(/(\r\n|\n|\r| {2,})/gm,""));e.each(function(a,b){(a+1)%3||(b.addEventListener("mouseenter",s),b.addEventListener("mouseleave",t))}),a.append(e),v(d),$(document).trigger("appendedTemplate");for(var f=1;f<b.items.length;f++)"isMalware"in b.items[f]&&pxt("pmw",b.items[f].pageUrl);try{STP.pfmTmplEnd||(STP.pfmTmplEnd=performance.now(),performanceLogger())}catch(g){}},v=function(b){c=a.find(".js-images-item"),a.offsetHeight,d=a.width()-j,null===m&&(m=c.outerHeight(),e=parseInt(c.css("margin-left"))+parseInt(c.css("margin-right")),f=parseInt(c.css("margin-bottom")));var g,h,l,o,p,r,s=[],t=[],u=[],v=0,x=!0,y=!1,A=0,B=0,C=0;if(d>0)for(console.log("grid align");A<STP.results.items.length;)v<=d?(h=STP.results.items[A].tbWidth+e,v+=h,t.push(h),A===STP.results.items.length-1&&(s[B]=t,u[B]=v),A++):(s[B]=t,u[B]=v,t=[],v=0,B++);for(B=0;B<s.length;B++)for(o=d/u[B],v=0,y&&(x=!1),A=0;A<s[B].length;A++)!y&&n&&C>n&&(y=!0),h=s[B][A],l=STP.results.items[C].tbHeight,r=l<m?Math.ceil((m-l)/2):0,p=0,o<1?A===s[B].length-1?(g=d-v-1,p=-Math.ceil((h-g)/2)):(g=Math.floor(h*o),p=-Math.ceil((h-g)/2)):g=h,v+=g,q[C]={show:x,width:g-e,marginTop:r,marginLeft:p,tbUrl:STP.results.items[C].tbUrl,firstInRow:0===A},C++;var D,E;b&&b>0?(E=w(b),D=c.slice(E)):(E=0,D=c),D.each(function(a,c){var e=q[a+E],f=c.getElementsByTagName("a")[0],g=c.getElementsByTagName("img")[0];c.style.display=e.show?"block":"none",d<i?(g.style.marginLeft=0,f.style.width="auto",c.style.width="auto"):(g.style.marginLeft=e.marginLeft+"px",f.style.width=e.width+"px",c.style.width=e.width+"px"),"undefined"!=typeof b&&a+E>b&&e.marginTop>=0&&(f.style.marginTop=e.marginTop+"px")}),null!==k&&k.triggerHandler("scroll"),z()},w=function(a){for(;!q[a].firstInRow;)a--;return a},x=function(){c.each(function(a,b){var c=q[a];c.show||(c.show=!0,b.style.display="block")})},y=function(){var a="js-images-first";c.removeClass(a),c.each(function(b,c){var d=q[b];d.firstInRow&&$(c).addClass(a)})},z=function(){if(y(),!($(".preview").length>0)){var a=$(".js-images-first"),b=$(".js-yandex_ad"),c="R-A-192658-26",d="",e=0,f=0,g=5,h=Math.floor(a.length/g),i=b.length<p.length?b.length:p.length;if(h>i)for(var j=i;j<h&&(e=j*g+g,!(e>a.length-1))&&!a.eq(e).is(":hidden");j++)f=String(e)+String(Math.round(100*Math.random())),i<p.length?(d=p[j],a.eq(e).before(d)):(d='<div class="js-yandex_ad"><div id="yandex_rtb_'+c+"-"+f+'" class="yandex_ad__images"></div></div>',direct2.insert(f,c),a.eq(e).before(d),p=$(".js-yandex_ad")),i++}},A=function(){k.find(".alt-images__grid").each(function(a){for(var b,c,d=$(this),e=0,f=[],i=STP.altImages.items[a].results.length>2?2:0,j=0;j<STP.altImages.items[a].results.length-i&&(b=STP.altImages.items[a].results[j].thumb,c=calc_sizes(b.width,b.height,h,"h"),c.w=Math.round(c.w),!(e+a+c.w/2>=g));j++)f.push(c),e+=c.w;if(i>0){for(var k=[],l=g,m=h/2,n=0;n<i;n++)b=STP.altImages.items[a].results[j+n].thumb,c=calc_sizes(b.width,b.height,m--,"h"),c.w=Math.round(c.w),c.w<l&&(l=c.w),k.push(c);e+=l}var o,p,q,r,s=g/e;for(e=0,j=0;j<f.length;j++)o=new URI(STP.altImages.items[a].results[j].thumb.url),o.setSearch(f[j]),o.setSearch("q",100),p=$('<div class="alt-images__col"></div>'),q=$('<img class="alt-images__thumb" src="'+o.href()+'" width="'+f[j].w+'" height="'+f[j].h+'">'),s<1?(r=Math.round(f[j].w*s),q.css("margin-left",Math.floor((r-f[j].w)/2))):r=f[j].w,p.width(r),p.append(q),d.append(p),e+=r+1;if(i>0){var t=$('<div class="alt-images__vertical"></div>');for(s<1&&(l=g-e),t.width(l),n=0;n<k.length;n++)o=new URI(STP.altImages.items[a].results[j+n].thumb.url),o.setSearch(k[n]),o.setSearch("q",100),q=$('<img class="alt-images__vert-thumb" src="'+o.href()+'" width="'+k[n].w+'" height="'+k[n].h+'">'),k[n].w>l&&q.css("margin-left",Math.floor((l-k[n].w)/2)),t.append(q);d.append(t)}d.closest(".alt-images__item").width(d.width()+4)});var a=$(".js-alt-images-left"),c=$(".js-alt-images-right"),d=parseInt(k.find(".alt-images__item").css("margin-right"));k.on("scroll",function(){o&&(a.toggle(0!==k.scrollLeft()),c.toggle(k.scrollLeft()<k[0].scrollWidth-k.width()-d))}),a.on("click",function(){var a=k.scrollLeft()-600;a<100&&(a=0),k.stop().animate({scrollLeft:a},250,"swing")}),c.on("click",function(){var a=k.scrollLeft()+600;k.stop().animate({scrollLeft:a},250,"swing")}),b.addClass("alt-images_loaded"),k.triggerHandler("scroll")},B=function(a){null!==k&&(a?(o=!0,b.show(),k.triggerHandler("scroll")):(o=!1,b.hide()))};return{init:r,render:u,align:v,getFirstItemInRow:w,showAll:x,toggleAltImages:B,setDirect:z}}(),addData=function(){var a,b,c,d,e,f=40,g=5,h=STP.sf?STP.sf:f,i=!1,j=!1,k=!1,l=!1,m=function(){$(".js-media-responses").off("scroll",r),$(window).off("scroll",q)},n=function(f,g){a=t(STP.results.items),e=f,c=g?$("html"):$(".js-media-responses"),d=$("#preloader"),b=$("#moreResults"),b.on("click",function(){$(this).hide(),k=!1,grid.showAll(),grid.setDirect()}),$(document).on("appendedTemplate",function(){setTimeout(function(){var a=preview.getOrientation();("landscape"===a&&c.outerHeight()>=c.prop("scrollHeight")||"portrait"===a&&c.outerHeight()<=$(window).height())&&s(grid.align)},0)}),c.on("scroll",r),$(window).on("scroll",q)},o=function(){var a=$(this),b=$(document).height(),c=a.scrollTop(),d=a.height();c>=b-1.2*d&&(k||j||STP.antirobot&&STP.antirobot.blocked||i||(h/f%g===0&&(k=!0),s()))},p=function(){var a=$(this);if(this===window){if("landscape"===preview.getOrientation())return;itemsHeight=$(document).height()}else{if("portrait"===preview.getOrientation())return;itemsHeight=a[0].scrollHeight}var b=a.scrollTop(),c=a.height();b>=itemsHeight-1.2*c&&(k||j||STP.antirobot&&STP.antirobot.blocked||i||(h/f%g===0&&(k=!0),s()))},q=_.throttle(o,250),r=_.throttle(p,250),s=function(c){if(!STP.ppn&&!STP.debug){var d="/search_images",e=(new URI).search(!0),g={utf8in:1,num:f,ajax:1,rch:STP.rch,sf:h,cur_qid:STP.qid};$.extend(e,g),STP.antirobot&&STP.antirobot.blocked||i||j||(i=!0,u(),$.ajax({dataType:"json",url:d,data:e,cache:!1}).done(function(d){if(!d.ppn){if(d.antirobot&&d.antirobot.blocked)antirobot.showHandlebarsModal(d.antirobot,function(){k=!1,s()});else{if($.ajax({url:(STP.pxt_host?"//"+STP.pxt_host:"")+"/0c.gif?megarandom="+d.qid+"&h="+STP.rch,cache:!1}),d.items&&d.items.length>0){if(!l){var e=t(d.items),g=_.intersection(e,a);a=a.concat(e),g.length>0&&(pxt("pdup"),l=!0)}STP.results.items=STP.results.items.concat(d.items),grid.render(d,k),k&&b.show(),c&&c()}else j=!0;h+=f}i=!1,w()}}).always(function(){pxt("pmr"),v(),$(document).trigger("imagesItemsLoaded")}))}},t=function(a){return a.map(function(a){return a.hash})},u=function(){v(),e.append(d),d.css({display:"inline-block"})},v=function(){d.remove()},w=function(){var a=$(".sys__ajax__counters").map(function(){return this.innerHTML}).get().join(""),b=Math.random();a.replace(/<(noscript)>(?:\s|.)*?<\/\1>/gi,"").replace(/<img(?:\s+.*?)+src=['"]([^"']+)['"].*?>/gi,function(a,c){return c=new URI(c),c.setSearch("_",b),(new Image).src=c.href(),""}).replace(/<script(?:\s+.*?type=['"]text\/javascript['"])?>((?:.|\s)*?)<\/script>/gi,function(a,b){try{b&&$.globalEval(b)}catch(c){}return""})};return{init:n,disableScrollHandler:m,loadMore:s}}(),preview=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=17,I=.5,J=600,K=373,L=.6,M=560,N=458,O=50,P=15,Q=60,R=68,S=127,T=!1,U=!1,V={},W=!0,X=!1,Y={0:!0,180:!0},Z=null,_=!STP.is_porno_query,aa=!1,ba=null,ca=!1,da=!1,ea=!1,fa=1,ga={},ha=function(){$(window).off(U?"orientationchange":"resize",pa)},ia=function(){$(window).off("wheel",na)},ja=function(){j.off("scroll",oa)},ka=function(){a=$(document.documentElement),b=$("#layout"),c=$("#mediaHeader"),d=$("#portal-menu"),f=$("#go-headlinks"),g=$("#goTopBn"),h=$("#topMenuBlock"),i=$("#topmenu"),e=$("#spellchecker"),j=$(".js-media-responses"),k=$(".media-responses__list"),l=k.find(".js-images-item").eq(0),q=$("[name=viewport]"),s=$("#moreResults"),r=$("#filters"),t=$(".js-alt-images"),ca=!0},la=function(){da||Ja(),ca||ka(),x=Handlebars.compile($("#preview_tmpl").html()),k.on("click",".js-images-item__link",ra),D=Ma()},ma=function(c){if(ka(),ea=c,x=Handlebars.compile($("#preview_tmpl").html()),STP.debug&&a.css("overflow","visible"),w=a.hasClass("platform-TABLET"),U=navigator.userAgent.toLowerCase().indexOf("ipad")>=0){var d=window.innerWidth||$(window).width(),e=window.innerHeight||$(window).height(),f=50,g=d>e&&d-e>f,h=Y[window.orientation];(g&&h||!g&&!h)&&(Y={"-90":!0,90:!0})}Ja(),a.removeClass("landscape").addClass(u),D=Ma(),E=ea?D+112:D,b.css("top",D),w&&(La(),U&&"landscape"===u&&a.css("position","fixed"),j.momentum({handleX:!1}),j.data("plugin_momentum")&&"portrait"===u&&j.data("plugin_momentum").disable()),sa(),k.on("click",".js-images-item__link",ra);var i,m,n;k.on("mouseenter",".js-images-item__link",function(){var a=$(this);m=a.find("img"),n=Ea(m),clearTimeout(i),i=setTimeout(function(){n&&(pxt("imgv",n.imgBig,n.number),n.animated&&$("<img>").on("load",function(){m.attr("src",n.imgSmall+"&a=1")}).on("error",function(){pxt("pge",n.imgSmall+"&a=1")}).attr("src",n.imgSmall+"&a=1"))},500)}).on("mouseleave",".js-images-item__link",function(){clearTimeout(i),n.animated&&m.attr("src",n.imgSmall)}),$(document).on("kbnavi",function(){F=!0,G=!1}).on("kbnaviEnter",function(){G=!0}).on("mousenavi",function(){F=!1,G=!1}).on("keydown",function(a){switch(a.which){case 13:if(T){var b=l,c=decodeURIComponent(b.find("img").attr("data-url")),d=b.attr("href");b.attr({href:c,target:"_blank"}),setTimeout(function(){b.attr("href",d).removeAttr("target")},100)}break;case 27:T&&ua()}}),$(window).on("wheel",na).on(U?"orientationchange":"resize",pa),j.on("scroll",oa),"onhashchange"in window&&$(window).on("hashchange",function(){X||sa(),X=!1})},na=function(b){if("landscape"===u&&T&&!a.hasClass("modal-open")&&!STP.debug)if(b.preventDefault(),1===b.originalEvent.deltaMode){var c=j[0].scrollTop+40*b.originalEvent.deltaY;null!==Z&&(c+=Z-j[0].scrollTop),Z=c,j.stop().animate({scrollTop:c},250,"swing",function(){Z=null})}else j[0].scrollTop+=b.originalEvent.deltaY},oa=function(a,d){if("landscape"===u||"landscape"===v){var e=d||j.scrollTop();w?e<D?(c.show(),c.css("top",-e),__PM.getItems(function(a){a.toolbar.resize()}),E=D-e):(c.hide(),E=0):e<z+A?(f.show(),g.show(),c.css("top",-e),r.removeClass("filter_shadow"),E=D-e):(f.hide(),g.hide(),c.css("top",0),r.addClass("filter_shadow"),E=y+B),b.css("top",E),qa()}},pa=function(){$(".js-yandex_ad").remove();var a=w&&!U?screen.width:$(window).width(),b=w&&!U?screen.height:$(window).height(),c=Math.abs(a-b)>50;c&&(u=Ia(a,b)),u!==v&&c?Ka():(grid.align(),"portrait"===u&&T&&ta(l),qa()),w||Da()},qa=function(){T&&(Ca(),o.css({width:V.imageWidth,height:V.imageHeight}),p.css("top",V.imageTop),n.height(V.previewHeight))},ra=function(){X=!0,l=$(this),V=Ea(l.find("img"));var a=T?"tape":"matr",b=F?"kbd":"lbut";pxt("ptc",V.imgBig,V.number,b,a,V.normalUrl,V.urlsSign),ta(l)},sa=function(){var a=(new URI).search(!0).urlhash;if(a){var b=new URI;b.removeSearch("urlhash"),window.history&&"replaceState"in window.history&&window.history.replaceState({},null,b.href()),X=!0,Ga("#urlhash="+a)}var c,d=Fa();return!T||d&&"0"!==d?void(d&&"0"!==d?(c=k.find("#"+d),c.length?(V=Ea(c.find("img")),l=c.find("a"),ta(l)):$.ajax({dataType:"json",url:"/image_data",data:{urlhash:d,q:STP.qswap}}).done(function(a){a.item&&(V=Ea(a.item),ta(!1))})):STP.altImages&&!aa&&(pxt("pals"),aa=!0)):void ua()},ta=function(a){$(".js-yandex_ad").remove(),W&&(W=!1);var b=!1;if(T?(m.remove(),b=!0):(T=!0,grid.toggleAltImages(!1)),Oa(),a!==!1&&(a=a.closest(".js-images-item")),Ca(),m=$('<div class="preview"></div>'),m.html(x($.extend({},V,{id:a?a.attr("id"):Fa()}))),"landscape"===u?j.before(m):k.find(".js-images-item").eq(grid.getFirstItemInRow(parseInt(l.find("img").attr("data-number"))-1)).before(m),n=m.find(".preview__wrapper"),p=m.find(".preview__link-wrap"),o=m.find(".preview__link"),wa(a),Ba(a),a!==!1&&Da(),va(),pxt("pop",V.imgBig,V.normalUrl,V.number),_)if(STP.experiments.srch42181_3||STP.experiments.srch42181_4){ga[V.number]||(ga[V.number]=fa++);const c=STP.experiments.srch42181_3?{number:ga[V.number],search_text:STP.qswap}:{number:1,search_text:V.content};direct.renderRtb(c)}else direct.insert();else $("#yandex_ad").remove();b||setTimeout(grid.align,0)},ua=function(){$(".js-yandex_ad").remove(),T=!1,m.remove(),X=!0,Ga("#urlhash=0"),"landscape"===u&&Da(),Ba(!1),STP.altImages&&!aa&&(pxt("pals"),aa=!0),Na(),grid.toggleAltImages(!0),grid.align()},va=function(){var a=m.find(".preview__image"),b=m.find(".preview__loader");$("<img>").on("load",function(){parseInt(a.attr("data-number"))===V.number&&(a.attr("src",V.imgBig),b.fadeOut(200),parseInt(this.naturalWidth)!==parseInt(V.widthImgDef)&&parseInt(this.naturalHeight)!==parseInt(V.heightImgDef)&&pxt("pfr",V.imgBig,V.normalUrl,V.widthImgDef,V.heightImgDef,this.naturalWidth,this.naturalHeight))}).on("error",function(){pxt("plf",V.imgBig),b.fadeOut(200),m.find(".preview__info-right").hide(),STP.office_ip&&"console"in window&&console.log("Ошибка загрузки файла: ",V.imgBig)}).attr("src",V.imgBig)},wa=function(a){var b=m.find(".preview__arrow_prev"),c=m.find(".preview__arrow_next");a?(za(b,a)&&xa(b),Aa(c,a)&&ya(c)):(b.addClass("preview__arrow_hide"),c.addClass("preview__arrow_hide"));var d=m.find(".preview__close");d.on("click",ua).on("mousedown",function(){pxt("php",V.imgBig)}),w||d.on("mouseenter",function(){b.addClass("preview__arrow_hide-close"),c.addClass("preview__arrow_hide-close")}).on("mouseleave",function(){b.removeClass("preview__arrow_hide-close"),c.removeClass("preview__arrow_hide-close")}),m.find(".js-preview-open").on("mousedown",function(){$(this).attr("href",$(this).data("redir")),pxt("psf",V.imgBig,V.malware)}),m.find(".js-preview-domain").on("mousedown",function(){$(this).attr("href",$(this).data("redir")),pxt("psp",V.imgBig,"url",V.malware)}),o.on("mousedown",function(){$(this).attr("href",$(this).data("redir")),pxt("psp",V.imgBig,"img",V.malware)}),m.find(".preview__description").on("mousedown",function(){$(this).attr("href",$(this).data("redir")),pxt("psp",V.imgBig,"desc",V.malware)}),STP.detector_touch?(m.find(".preview__info-right").on("click",".js-share-open-btn",Pa),$(document).on("click",Ra)):m.find(".preview__info-right").on("mouseover",".js-share-block",Qa)},xa=function(a){a.on("click",function(){var a=l.parent().prev();"portrait"===u&&a.hasClass("preview")&&(a=a.prev()),l=a.find("a"),X=!0,V=Ea(l.find("img")),ta(l),Ga(l.attr("href"))}).on("mousedown",function(){pxt("ppar","prev")}),o.swipeDirection("swiperight",function(){a.triggerHandler("click")})},ya=function(a){a.on("click",function(){s.is(":visible")&&s.find(".more-results__btn").trigger("click");var a=l.parent().next();a.hasClass("preloader")||(l=a.find("a"),X=!0,V=Ea(l.find("img")),ta(l),Ga(l.attr("href")))}).on("mousedown",function(){pxt("ppar","next")}),o.swipeDirection("swipeleft",function(){a.triggerHandler("click")})},za=function(a,b){var c=b.prev();return"portrait"===u&&c.hasClass("preview")&&(c=c.prev()),!!c.hasClass("js-images-item")||(a.addClass("preview__arrow_hide"),!1)},Aa=function(a,b){var c=b.next();return!(!c.hasClass("js-images-item")&&!c.hasClass("preloader"))||(a.addClass("preview__arrow_hide"),addData.loadMore(function(){a.removeClass("preview__arrow_hide"),ya(a)}),!1)},Ba=function(a){var b=$(".images-item_active");a&&a.length?(b.removeClass("images-item_active"),a.addClass("images-item_active")):b.length&&b.removeClass("images-item_active")},Ca=function(){var a,b,c,d,e=window.innerWidth||$(window).width(),f=window.innerHeight||$(window).height();"landscape"===u?(a=Math.max(e*I-H,J),b=Math.max(f-E-2*H-O,K),d=a-2*Q,c=b-O-R,_&&(c-=S)):(a=Math.max(e-2*H,M),b=Math.max(f*L-P,N),d=a-2*Q,c=b-P-R,_&&(c-=S));var g;V.widthImgDef<=d&&V.heightImgDef<=c?g={w:V.widthImgDef,h:V.heightImgDef}:(g=calc_sizes(V.widthImgDef,V.heightImgDef,d,"w"),g.h>c&&(g=calc_sizes(V.widthImgDef,V.heightImgDef,c,"h"))),V.previewHeight=b,V.imageWidth=parseInt(g.w),V.imageHeight=parseInt(g.h),V.imageTop=parseInt((c-V.imageHeight)/2)},Da=function(b){var c=ea?a:j,d=$(".images-item_active");if(d.length&&(!F||G)){var e;"landscape"===u?(e=ea?d.position().top-141:d.position().top+c.scrollTop()-D,e!==c.scrollTop()&&(W||b?c.scrollTop(e):c.animate({scrollTop:e},200))):(e=m.offset().top-y-H,e!==$(document).scrollTop()&&(U&&!b?$("body, html").animate({scrollTop:e},200):setTimeout(function(){window.scrollTo(0,e)},0)))}},Ea=function(a){var b;return b=a.length?{prettyUrl:a.attr("data-pretty"),normalUrl:a.attr("data-url"),normalUrlRedir:a.attr("data-redirurl"),urlsSign:a.attr("data-urlsSign"),imgBig:a.attr("rel"),imgBigRedir:a.attr("data-redirimg"),imgSmall:a.attr("data-tburl"),widthImgDef:a.attr("data-width"),heightImgDef:a.attr("data-height"),size:a.attr("data-size"),ext:a.attr("data-ext"),animated:a.attr("data-animated")||!1,malware:a.attr("data-malware")||!1,content:a.attr("data-content"),number:parseInt(a.attr("data-number"))}:{prettyUrl:a.prettyUrl,normalUrl:a.pageUrl,normalUrlRedir:a.redirPageUrl,urlsSign:a.urlsSign,imgBig:a.imUrl,imgBigRedir:a.redirImUrl,imgSmall:a.tbUrl,widthImgDef:a.imWidth,heightImgDef:a.imHeight,size:a.imSize,ext:a.imExt,animated:a.isAnimated||!1,malware:a.isMalware||!1,content:a.content,number:a.number}},Fa=function(){return(new URI).fragment(!0).urlhash},Ga=function(a){window.location.hash=a},Ha=function(){return u},Ia=function(a,b){return U?Y[window.orientation]?"portrait":"landscape":a>b&&a?"landscape":"portrait"},Ja=function(){u=v=Ia($(window).width(),$(window).height()),da=!0},Ka=function(){w&&La(),b.css("opacity",0),a.removeClass(v).addClass(u),v=u,"landscape"===u?(T&&(ta(l),grid.align()),window.scrollTo(0,0),j.data("plugin_momentum")&&setTimeout(function(){j.data("plugin_momentum").enable().reinit(),Da(!0)},0)):(c.show(),f.show(),g.show(),h.show().css("top",0),c.css("top",0),b.css("top",141),j.data("plugin_momentum")&&j.data("plugin_momentum").disable(),w?setTimeout(function(){T?(m.remove(),grid.align(),ta(l)):grid.align()},30):T?(m.remove(),grid.align(),ta(l)):grid.align()),w&&setTimeout(function(){U&&a.css("position","landscape"===u?"fixed":"static"),__PM.getItems(function(a){a.toolbar.resize()}),grid.align()},20),setTimeout(function(){b.animate({opacity:1},500)},250)},La=function(){"landscape"===u?(U&&a.width(window.innerWidth),q.attr("content","user-scalable=0")):U?(a.width(""),q.attr("content","user-scalable=0")):q.attr("content","")},Ma=function(){y=d.height(),z=f.height(),A=g.height(),C=i.outerHeight(!0);var a=h.is(":hidden");a&&h.show(),B=h.height();var b=y+z+A+B;return a&&h.hide(),b},Na=function(){e.show()},Oa=function(){e.hide()},Pa=function(){var a=$(this).closest(".js-share-block"),b=a.hasClass("share_open");Ra(),b||(a.addClass("share_open"),ba=a,Sa(a))},Qa=function(){Sa($(this))},Ra=function(a){null===ba||a&&$(a.target).closest(".share_open").length||(ba.removeClass("share_open"),ba=null)},Sa=function(a){if(!a.data("plugin_share")){var b=Fa(),c=new URI("http://go.mail.ru/search_images");c.setSearch({urlhash:b,q:STP.query}),a.share({url:c.href(),image:$("#preview-image").attr("src").replace(/^\/\//,"https://"),pxtName:"pshare"})}};return{init:ma,disableResizeHandler:ha,disableWheelHandler:ia,disableResponsesScrollHandler:ja,scrollHandler:oa,getOrientation:Ha,liteInit:la,getHeaderHeight:Ma}}();direct=function(){var a=1,b=["R-A-192658-20","R-A-192658-21"],c=[190815,70915,80915,90915,100915],d=function(a){var c=a&&a.id||"134811",d=a&&a.hash||"",e=a&&a.number||1,f=a&&a.search_text.replace(/(<\/?b>)|(\.\.\.)/g,"")||"",g={renderTo:"yandex_direct_"+c+d,onRender:function(){h.is(":empty")&&h.hide()},horizontalAlign:!1,async:!0};a?STP.experiments.srch42181_1?(g.blockId="R-A-192658-41",g.searchText=f,g.pageNumber=e):STP.experiments.srch42181_2?(g.blockId="R-A-192658-42",g.searchText=f,g.pageNumber=1):STP.experiments.srch42181_3?(g.blockId="R-A-192658-43",g.searchText=f,g.pageNumber=e):STP.experiments.srch42181_4&&(g.blockId="R-A-192658-40",g.searchText=f,g.pageNumber=1):g.blockId=b[parseInt(STP.userType,16)%2];var h=$("#yandex_direct_134811");"R-A-192658-21"===g.blockId&&h.addClass("m_short-content"),function(a,b,c,d,e){a[c]=a[c]||[],a[c].push(function(){Ya.Context.AdvManager.render(g)}),e=b.getElementsByTagName("script")[0],d=b.createElement("script"),d.type="text/javascript",d.src="//an.yandex.ru/system/context.js",d.async=!0,e.parentNode.insertBefore(d,e)}(window,document,"yandexContextAsyncCallbacks")},e=function(){var b="yandex_context_callbacks";window[b]=window[b]||[],window[b].push(function(){Ya.Direct.insertInto(134811,"yandex_direct_134811",{stat_id:c[STP.user_split-1],ad_format:"direct",font_size:1,type:"vertical",limit:a,title_font_size:1,site_bg_color:"FFFFFF",title_color:"005FC5",url_color:"008C23",text_color:"666666",hover_color:"F26D00",header_bg_color:"",links_underline:!0,search_text:STP.qswap,search_page_number:1,no_sitelinks:!0,favicon:!1},d)});var e=document.getElementById("yaDirectContext");e&&e.parentNode.removeChild(e),e=document.createElement("script"),e.setAttribute("id","yaDirectContext"),e.src="//an.yandex.ru/system/context.js",e.type="text/javascript",e.async=!0;var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(e,f)};return{insert:e,renderRtb:d}}(),direct2=function(){var a=function(a,b){var c="yandexContextAsyncCallbacks";window[c]=window[c]||[],window[c].push(function(){Ya.Context.AdvManager.render({blockId:b,renderTo:"yandex_rtb_"+b+"-"+a,pageNumber:a,async:!0})});var d=document.getElementsByTagName("script")[0],e=document.createElement("script");e.type="text/javascript",e.src="//an.yandex.ru/system/context.js",e.async=!0,d.parentNode.insertBefore(e,d)};return{insert:a}}();var Filter={init:function(){var a=this,b=".js-selector",c=$("#js-filter-reset"),d=$(b),e=$(".js-selector__header"),f=$("#js-filter-size__custom"),g=$("#filter-size__block"),h=$(document),i=$(".filter-colors__current"),j=$("#portal-menu .js-link"),k="filter-reset_active",l="c-selector_closed";a.$form=$("#MSearch"),a.$q=$("#q"),a.$submitBtn=$("#js-filter-size__btn"),a.$sizeInputs=$(".filter-size__input"),a.$filters=$("#filters"),a.$customWidth=a.$filters.find('input[name="zvwidth"]'),a.$customHeight=a.$filters.find('input[name="zvheight"]'),a.fields={},0!=a.$filters.length&&(a.$sizeInputs.each(function(){a.fields[this.name]=this.value}),a.$sizeInputs.on("keydown",function(b){13==b.keyCode&&a.$form.submit()}),c.on("click",function(){if(!$(this).hasClass(k))return!1}),e.on("click",function(){var a=$(this);a.closest(b).toggleClass(l)}),i.on("click",function(){return!1}),f.on("click",function(){return g.toggle(),!1}),h.on("click",function(a){var c=$(a.target).closest(b);0==c.length&&d.addClass(l)}),a.$submitBtn.on("click",function(){return a.$form.submit(),!1}),j.on("click",function(b){a.toogle(b,this)}),a.$form.on("submit",function(){a.submitForm()}))},subminCostomSize:function(){var a=this;width=a.$customWidth.val().trim(),height=a.$customHeight.val().trim(),pattern=/^[0-9]+$/,a.fields.zvwidth=pattern.test(width)?width:"",a.fields.zvheight=pattern.test(height)?height:"",a.fields.is=""},submitForm:function(){var a=this;a.subminCostomSize(),a.prepareSend()},prepareSend:function(){var a=this,b=[];for(key in a.fields){var c=a.fields[key],d=a.$form.find('input[name="'+key+'"]');if(d.length>0)0==c.trim().length?d.remove():d.val(c);else if(c.trim().length>0){var e=document.createElement("input");e.type="hidden",e.name=key,e.value=c,b.push(e)}}b.length>0&&a.$form.prepend(b)},toogle:function(a,b){var c=this,d=($("el"),c.$filters),e=new URI,f=e.hasSearch("advsi")||e.hasSearch("zqcolors")||e.hasSearch("is")||e.hasSearch("zvwidth")||e.hasSearch("zvheight")||e.hasSearch("category")||e.hasSearch("is_demotivator")||e.hasSearch("is_animated"),g=d.is(":visible");if(!f){a.preventDefault();var h=c.$form.find('input[name="advsi"]');if(g)h.length>0&&h.remove();else if(0==h.length){var i=document.createElement("input");i.type="hidden",i.name="advsi",i.value="1",c.$form.prepend(i)}}d.toggle()}};try{rT.profile("jsinit")}catch(e){}var STP=STP||{};!function(){$(document).on("headerReady",function(){try{STP.pfmTmplStart=performance.now()}catch(a){}if(STP.experiments&&STP.experiments.srch44625||SearchFormSuggest.init(),FoundCount.init(),Header.init(),Filter.init(),STP.experiments&&STP.experiments.srch44625||window.hotKeyUsage(),STP.results){var b=$("#mediaResponsesList");STP.is_corp_user?(addData.init(b,!0),grid.init(STP.results,b),preview.init(!0)):(addData.init(b),grid.init(STP.results,b),preview.init())}else try{STP.pfmTmplEnd||(STP.pfmTmplEnd=performance.now(),performanceLogger())}catch(a){}$(document).trigger("gridReady"),PageReloader.initDeferred()}),$(window).on("load",function(){performanceLogger()})}();try{rT.profile("jsinit")}catch(e){}