/*!jssdk 2019-02-11*/!function(a,b){function c(a){return Object.prototype.toString.call(a)}function d(a){this.settings={element:null,type:"label-under",cols:3,rows:1,title:null,titlePosition:"left",adsByPosition:"right",mobileEnabled:!0,showLogoInfo:!1,styles:{}},this.render(a)}d.prototype={options:{JSONPLink:"//tsyndicate.com/do2/",JSONPLinkBackUp:"//cdn.tsyndicate.com/sdk/v1/backup.js",linkStyles:"//cdn.tsyndicate.com/sdk/v1/n.css",logoLink:"https://trafficstars.com"},settings:null,defaultThumbnail:{img:"//default.com",headline:"Undefined",brandname:"",link:"//google.com"},trackingList:[],settingsParamsList:["param1","param2","param3","subid","subid_1","subid_2","subid_3","subid_4","subid_5","xhid"],elementClassName:{thumb:"mn-thumb",label:"mn-thumb__label",container:"mn-related-container",headlineLink:"mn-thumb__label-title-link",brandnameLink:"mn-thumb__label-brand-link",image:"mn-thumb__aspect"},render:function(a){var c=this.settings,d=a&&a.element_id;return this._copySettings(a),!c.element&&d&&(c.element=b.getElementById(d)),c.element&&c.spot&&(this._insertStyles(),this._appendInlineStyles(),this._requestAds(),c.element.addEventListener("click",this._thumbClickHandler.bind(this))),this},_requestAds:function(){var a=this.options,b=a.JSONPLink,c=b+this._collectionParams();this._getData(c,this._responseSuccess.bind(this)).addEventListener("error",this._requestBackupAds.bind(this))},_requestBackupAds:function(a){var b=this.options,c=b.JSONPLinkBackUp,d=c+this._collectionParams(!0),e=a&&a.target,f=this._getData(d,this._responseSuccess.bind(this));e&&e.parentNode.removeChild(e),f.addEventListener("error",this._insertGrid.bind(this))},_insertGrid:function(){var a=this._createGrid();this.settings.element.innerHTML=a,setTimeout(this._trackingInit.bind(this),500)},_createGrid:function(){var a=this._createWrapper(),b=this._getWrapperClose(),c=this.data;if(c&&c instanceof Array)for(var d=0;d<c.length;d++)a+=this._generateThumb(c[d]);return a+=b},_getWrapperClose:function(){var a=["bottom-left","bottom-right"];return'</div></div><div class="mn-clear"></div>'+this._createAdsBy(a)+"</div>"},_createWrapper:function(){var a=["left","right"],b=this.settings,c=b.mobileEnabled?"":" mn-related-container_no-responsive";return'<div class="'+this.elementClassName.container+c+'"><div class="mn-container">'+this._crateTitle()+this._createAdsBy(a)+'<div class="mn-outer mn-thumbnails_col-'+b.cols+" mn-thumbnails_"+b.type+'">'},_getResponsiveStyles:function(){var a=this.settings,b=a.breakpoints,c=this.elementClassName.thumb,d=this.elementClassName.container;return b?b.sort(this._sortBreakpoints).reduce(this._getMedia.bind(null,c,d,a),""):""},_getMedia:function(a,b,c,d,e){return d+="@media screen and (max-width: "+e.width+"px) {#"+c.element_id+" ."+b+" ."+a+" { width: "+(100/e.cols-1)+"% }}"},_sortBreakpoints:function(a,b){return b.width-a.width},_crateTitle:function(){var a=this.settings,b=a.title,c="";return b&&(c='<div class="mn-container-title mn-container-title_position_'+a.titlePosition+' ">'+b+"</div>"),c},_createAdsBy:function(a){var b,c=this.settings,d=c.adsByPosition,e="";return-1!==a.indexOf(d)&&(b=c.showLogoInfo?this._getLogoInfo(d):this._getDefaultAdsBy(),e='<div class="mn-container-adsby mn-container-adsby_position_'+c.adsByPosition+'">'+b+"</div>"),e},_getLogoInfo:function(a){return'<a class="mn-container-adsby-info" href="'+this.options.logoLink+'" target="_blank"><span class="mn-container-adsby-info__icon"></span><span class="mn-container-adsby-info__msg mn-container-adsby-info__msg_'+a+'">Ads by TrafficStars</span></a>'},_getDefaultAdsBy:function(){return'<a class="mn-container-adsby__link" href="'+this.options.logoLink+'" target="_blank">Ads by <span class="mn-container-adsby__a">TrafficStars</span></a>'},_setItemId:function(a){var b=this._randomString(5);a.id=b},_generateThumb:function(a){var b=this.settings,c='<div class="'+this.elementClassName.thumb+'">';if(a&&"object"==typeof a){switch(this._setItemId(a),b.type){case"image":c+=this._createImgBlock(a);break;case"img-left":case"img-right":case"label-over":case"label-under":c+=this._createImgBlock(a),c+=this._createLabelBlock(a);break;case"text":c+=this._createLabelBlock(a)}c+=this._createTrackers(a)}return c+="</div>"},_createImgBlock:function(a){var b=a.real_link||a.link,c=this._getImageThumbnail(a.thumbs),d=c?"":"mn-thumb__img_no-img",e=c?'style="background-image: url('+c+'); "':"";return'<a target="_blank" href="'+b+'"><div class="mn-thumb__holder"><span data-id="'+a.id+'" class="mn-thumb__img '+d+'" '+e+' ></span><div class="'+this.elementClassName.image+'"></div></div></a>'},_getImageThumbnail:function(a){return this._getByWidthImageThumbnail(a)||this._getOriginalImageThumbnail(a)||this._getFirstImageThumbnail(a)},_getFirstImageThumbnail:function(a){var b;if(a instanceof Array)for(var c=0;c<a.length;c++)if(b=a[c],b.hasOwnProperty("src"))return b.src},_getOriginalImageThumbnail:function(a){var b;if(a instanceof Array)for(var c=0;c<a.length;c++)if(b=a[c],b.hasOwnProperty("src")&&!b.hasOwnProperty("w"))return b.src},_getByWidthImageThumbnail:function(b){var c={};if(b instanceof Array)for(var d,e,f,g=this.settings.element,h=g.offsetWidth,i=a.innerWidth<760?1:this.settings.cols,j=h/i*.9,k=0;k<b.length;k++)d=b[k],f="image"===d.type,(e=f&&d.w)&&e>=j&&(!c.w||c.w>e)&&(c=d);return c.src},_createLabelBlock:function(a){var b=this.elementClassName,c=this.defaultThumbnail,d=a.real_link||a.link;return'<span class="'+b.label+'"><span class="mn-thumb__label-title"><a data-id="'+a.id+'" class="'+b.headlineLink+'" target="_blank" href="'+d+'">'+(a.headline||c.headline)+'</a></span><span class="mn-thumb__label-brand"><a data-id="'+a.id+'" class="'+b.brandnameLink+'" target="_blank" href="'+d+'">'+(a.brandname||c.brandname)+"</a></span></span>"},_createTrackers:function(a){var b="",c="mn-thumb__tracker_"+a.id,d=a&&a.imgtrackers;return d instanceof Array&&d.length&&(b+='<div id="'+c+'" class="mn-thumb__tracker"></div>',this.trackingList.push({id:c,urls:d})),b},_prepareURL:function(a){return/^\/\//.test(a),a},_randomString:function(a){for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=a||5,e=0;e<d;e++)b+=c.charAt(Math.floor(Math.random()*c.length));return b},_responseSuccess:function(a){var b=this.data,d="[object Object]"===c(a)&&a.list;return"[object Null]"===c(a)?this._requestBackupAds():(b&&d?this.data=b.concat(d):d&&(this.data=d),this._hasDataDiff(this.data)?this._requestBackupAds():void this._insertGrid())},_hasDataDiff:function(a){var b=this._getDataDiff(a);return b&&(this.diffCountBackUp=b),!!b},_getDataDiff:function(a){return this._getAdCount()-a.length},_getData:function(a,c){var d=b.createElement("script"),e=this._getCallbackName();return this._setDataResponse(c,e,d),d.src=a+"&callback="+e,b.body.appendChild(d),d},_setDataResponse:function(b,c,d){a[c]=function(e){b(e),d.parentNode.removeChild(d),a[c]=void 0}},_getCallbackName:function(){return"callback_"+this._randomString()},_insertStyles:function(){var a=b.head,c=b.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=this.options.linkStyles,a&&a.appendChild(c)},_copySettings:function(a){if("object"==typeof a)for(var b in a)this.settings[b]=a[b]},_getAdCount:function(){var a=this.settings;return parseInt(a.cols*a.rows,10)},_collectionParams:function(a){var b,c=[],d=this._queriesParams;for(var e in d)(b=d[e].bind(this)())&&c.push(b);return a?(c.push("spot="+this.settings.spot),"?"+c.join("&")):this.settings.spot+"/dynamic?format=jsonp&"+c.join("&")},_queriesParams:{count:function(){var a=this.diffCountBackUp||this._getAdCount();return(!a||a<=0)&&(a=3),"count="+a},settingsParams:function(){var a,b,c=this.settingsParamsList,d=this.settings,e=[];if(c instanceof Array)for(b=0;b<c.length;b++)a=c[b],d.hasOwnProperty(a)&&e.push(a+"="+d[a]);return e.join("&")},screenSize:function(){var b=a.devicePixelRatio||1,c=a.screen||{},d=c.width,e=c.height;return d&&e?"w="+parseInt(d*b,10)+"&h="+parseInt(e*b,10):null},keywords:function(){var a=this.settings.keywords;return this._checkKeywords(a)||(a=this._collectionKeywords()),a?"keywords="+a.replace(/[\~\*(_)!\/\/\/\\<>:|@#?$%^&;.,`"'+=-\d+]/gi," ").replace(/(^\s+)|(\b(\w{1,2})\b(\s|$))/g,"").replace(/\s+/gi,","):null}},_checkKeywords:function(a){return!(a&&a.length<=15&&a.indexOf("keyword")>=0)&&!!a},_collectionKeywords:function(){var a,b=this._keywordsSources,c="";for(var d in b)(a=b[d].bind(this)())&&(c+=" "+a);return c.substring(0,1e3)},_keywordsSources:{getMetaTags:function(){for(var b,c,d=a.document.getElementsByTagName("meta"),e=Array.prototype.slice.call(d),f=["description","keywords"],g="",h=0;h<e.length;h++)b=e[h],c=b.getAttribute("name"),f.indexOf(c)>=0&&(g+=" "+b.getAttribute("content"));return g},getTitle:function(){return b.title},getFromPathname:function(){var b=a.location.pathname.split("/"),c=b&&b[b.length-1],d=c&&c.replace(/(x?html?)$/gi,"").match(/([a-zA-Z]+)/g);return d&&d.join(" ")}},_trackingInit:function(){this._initTrackingList(),this._initTrackingScroll(),this._trackingScrollHandler=this._initTrackingScroll.bind(this),a.addEventListener("scroll",this._trackingScrollHandler)},_initTrackingList:function(){for(var a=0;a<this.trackingList.length;a++)this.trackingList[a].element=b.getElementById(this.trackingList[a].id)},_initTrackingScroll:function(){var b,c,d=a.innerHeight,e=(a.pageYOffset,this.trackingList.slice());if(e.length){for(var f=0;f<e.length;f++)if(b=e[f].element){if((c=b.getBoundingClientRect().top)<=0)continue;c-=d,c<=0&&(this._setTracking(b,e[f].urls),this._excludeFromTrackingList(e[f].id))}}else this._destroyTrackingScroll()},_destroyTrackingScroll:function(){a.removeEventListener("scroll",this._trackingScrollHandler)},_excludeFromTrackingList:function(a){for(var b=this.trackingList,c=0;c<b.length;c++)b[c].id&&b[c].id===a&&b.splice(c,1)},_setTracking:function(a,c){var d,e;if(c instanceof Array&&a)for(var f=0;f<c.length;f++)e=c[f],d=b.createElement("img"),d.setAttribute("src",e),d.setAttribute("height","1px"),d.setAttribute("width","1px"),a.appendChild(d)},_thumbClickHandler:function(a){var b,c=this.data,d=a.target,e=d&&d.getAttribute("data-id");if(e)for(var f=0;f<c.length;f++)if(b=c[f],b.id===e)return a.preventDefault(),this._openTrackLink(b),this._setClickTrack(b),!1},_openTrackLink:function(b){var c=b.link;c&&a.open(c,"_blank")},_setClickTrack:function(a){var c,d=a.clicktrackers;d&&(c=b.getElementById("mn-thumb__tracker_"+a.id),this._setTracking(c,d))},_appendInlineStyles:function(){var a=b.createElement("style"),c=this._getInlineStyles();return c+=this._getResponsiveStyles(),a.rel="stylesheet",a.type="text/css",a.appendChild(b.createTextNode(c)),b.body.appendChild(a),a},_getInlineStyles:function(){var a,b=this.settings,d=b.styles,e=this.elementClassName,f="";if("[object Object]"===c(d))for(var g in d)a=d[g],e.hasOwnProperty(g)&&"[object Object]"===c(a)&&(f+=this._getBuildStyles("."+e[g],a));return f},_getBuildStyles:function(a,b){var d,e=this.settings,f="#"+e.element_id,g="} ",h="";for(var i in b)d=b[i],"[object Object]"===c(d)?g+=this._getBuildStyles(a+i,d):h+=i+": "+d+"; ";return f+" "+a+" { "+h+g}},a.NativeAd=function(a){if(!(this instanceof d))return new d(a)}}(window,document);