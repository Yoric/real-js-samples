(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"1f10":function(e,t,s){s("1029");var i=s("3451"),o=function(e,t){o.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(o,i,{name:"AwardsPerformerModel",_performerIdKey:"p_id",_performerNameKey:"performer_id",_pointsKey:"point",_isVotedKey:"is_voted",_isFavoriteKey:"is_favourite",addPoints:function(e){this.attributes[this._pointsKey]+=e},getIsVoted:function(){return this.attributes[this._isVotedKey]},setIsVoted:function(e){this.attributes[this._isVotedKey]=e}})},4388:function(e,t){var s="can_use_webp";!function(){if(window.localStorage&&"object"==typeof localStorage&&(!localStorage.getItem(s)||"available"!==localStorage.getItem(s)&&"disable"!==localStorage.getItem(s))){var e=document.createElement("img");e.onload=function(){try{localStorage.setItem(s,"available")}catch(e){}},e.onerror=function(){try{localStorage.setItem(s,"disable")}catch(e){}},e.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="}}(),e.exports=function(){return!!window.localStorage&&"available"===window.localStorage.getItem(s)}},4829:function(e,t,s){var a=s("1029"),n=s("5f9e"),o=s("d869"),r=s("7ab0"),l=s("e568"),d=s("0592").default,i=s("a9a1").store,c=function(e,t){c.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(c,a.Component,{name:"AwardsCarouselGalleryComponent",defaultNavValue:void 0,carouselBottomRightTextSel:".carousel_links",carouselBottomLeftTextSel:".details",settings:{},_settings:{_enabled:!0,infiniteScroll:!0,duration:.2,autoPlay:!0,autoPlayInterval:3e3,navPositionMod:5,distance:12,opacity:.3},pointsNumSel:".points .num",activePanelSel:".active",activePanelCls:"active",playBtnCls:"play",pauseBtnCls:"pause",carouselContainerWrapperId:"awards_top",carouselId:"awards_carousel",carouselContainerId:"awards_carousel",nextNavigationId:"carousel_next_nav",prevNavigationId:"carousel_prev_nav",carouselVoteButtonSel:".vote_btn",perflinkSel:".perf_link ",carouselPrivateStarterButtonSel:".first_button.private",carouselPerformerBoxSel:".performerBox",carouselPerformerNameDataName:"data-pid",panelPrefix:"panel_",preloadDataSel:".imageData",_nextNavigationEl:void 0,_prevNavigationEl:void 0,_activePanelEl:void 0,_carouselEl:void 0,_carouselSlideShowNavId:"carousel_slideshow_nav",_carouselSlideShowNavEl:void 0,nextRequestUrl:"Awards/CarouselNext",prevRequestUrl:"Awards/CarouselPrevious",_autoPlayTask:void 0,_firstRun:!0,_maxImageCount:void 0,_activePanelIndex:void 0,isWindowResized:!1,_listId:void 0,_panels:void 0,_textAnim:void 0,carouselFavoriteBtnId:"carousel_favorites",addFavBtnCls:"add",removeFavBtnCls:"remove",favoriteBtnSel:".favorite",isAllowedToNavByKeyboard:!0,_templates:{messageBigThankYou:".message_big_thank_you_template",messageOverlayBigNoMoreSteps:".message_overlay_big_nomoresteps_template",messageOverlayBigPrivate:".message_overlay_big_private_template",messageOverlayBigBuyCredits:".message_overlay_big_buycredits_template"},_voteMessageWrapperSel:".vote_message_wrapper",titleSel:".title",carouselPrivateBtnSel:".private",init:function(e,t){this._carouselEl=Ext.get(this.carouselId),this._carouselFavouriteBtnEl=Ext.get(this.carouselFavoriteBtnId),c.superclass.init.call(this,e,t),this._applySettings(),this.addEvents(o.AwardsCarouselGalleryComponent.CAROUSELGALLERY_NAV_NEXT_CLICK,o.AwardsCarouselGalleryComponent.CAROUSELGALLERY_NAV_PREV_CLICK,o.AwardsCarouselGalleryComponent.CAROUSELGALLERY_ACTIVE_THUMB_MOUSEOUT),this._prepareTemplates(),this._listId=this._carouselEl.dom.getAttribute("data-list-id"),this._nextNavigationEl=Ext.get(this.nextNavigationId),this._prevNavigationEl=Ext.get(this.prevNavigationId),this._playPauseButtonContainer=Ext.get(this._carouselSlideShowNavId),this._activePanelEl=Ext.get(this._carouselEl.select(this.activePanelSel)).item(0),this._carouselSlideShowNavEl=Ext.get(this._carouselSlideShowNavId),this._maxImageCount=this._carouselEl.select("li").elements.length-1,this._defaultImageUrl=this._carouselEl.dom.getAttribute("data-defaultimg"),this._settings.autoPlay&&0<this._maxImageCount&&this.autoPlay(),0==this._maxImageCount&&(this._playPauseButtonContainer.hide(),this._prevNavigationEl.hide(),this._nextNavigationEl.hide()),this._panels=this.getPanels(),this._setFavoriteBtnModelId(this._activePanelEl),this._toggleCarouselEventListeners(!0),this.firstImagePreloadCheck(),a.Cookie.remove("awardsActualSlide"),a.Cookie.set("awardsActualSlide",this.getActiveElementIndex(),6e4,"/");var s,i=this._carouselEl.select("li");for(s=0;s<i.getCount();s++)this._carouselEl.select("li").item(s).select(this.carouselPerformerBoxSel).item(0).data("performer-pid")},_reloadPageWithStartIndex:function(e){var t=this.getActiveElementIndex(),s=r.updateQueryStringParameter(window.location.href,"startIndex",t).replace(/#.*\?/,"?");e&&(s+=e),window.location.href=s},_reloadPage:function(){window.location.reload()},_prepareTemplates:function(){a.each(this._templates,function(e,t){this._templates[t]=new Ext.Template(Ext.select(e).item(0).dom.innerHTML)},this)},_applySettings:function(){Ext.apply(this._settings,this.settings)},onCarouselVoteBtnClick:function(e,t){if(e.preventDefault(),l.isLoggedIn()){var s=(t=Ext.get(t)).getAttribute("data-performer-id"),i=t.getAttribute("data-performer-nick");0===parseInt(t.getAttribute("data-is-voted"),10)&&(t.dom.setAttribute("data-is-voted",1),a.fireEvent(o.VoteController.GLOBALEVENT_VOTE_CLICK,{performerNick:i,performerId:s}))}else d.navigate("signup",{trigger:!0,replace:!0,preventNavigateBack:!0})},autoPlay:function(){this._autoPlayTask=Ext.TaskMgr.start({scope:this,run:function(){this._carouselSlideShowNavEl.removeClass(this.playBtnCls),this._carouselSlideShowNavEl.addClass(this.pauseBtnCls),this._firstRun?this._firstRun=!1:this.onNextNavigationElClick()},interval:this._settings.autoPlayInterval})},pauseSlideShow:function(){this._carouselSlideShowNavEl.removeClass(this.pauseBtnCls),this._carouselSlideShowNavEl.addClass(this.playBtnCls),this._autoPlayTask&&Ext.TaskMgr.stop(this._autoPlayTask)},getPanels:function(){if(1!=this._maxImageCount)return 0==this._maxImageCount?(this._settings._enabled=!1,{current:this._activePanelEl,next:this._activePanelEl,prev:this._activePanelEl}):{current:this._activePanelEl,next:this._activePanelEl.next(),prev:this._activePanelEl.prev()};var e=this._activePanelEl.prev()?this._activePanelEl.prev():this._activePanelEl.next(),t=this._activePanelEl.next()?this._activePanelEl.next():this._activePanelEl.prev();return{current:this._activePanelEl,next:t,prev:e}},getActiveElementIndex:function(){return this._activePanelEl?this._activePanelEl.dom.id.split("_")[1]:1},doCarouselAnimation:function(e){if(this._settings._enabled&&(this._panels=this.getPanels(),this._panels[e])){var t=this,s=e?this._panels[e]:this._panels.next,i=this._carouselEl.getWidth();this._settings._enabled=!1,this.checkIfPanelIsFavorite(s),"next"===e?(this._sendPerformerRequest(this.nextRequestUrl,this._listId,e),this._panels.current.setStyle({zIndex:151}),TweenLite.to(this._panels.current.dom,this._settings.duration,{left:-i}),TweenLite.fromTo(this._panels.next.dom,this._settings.duration,{opacity:0,left:0,zIndex:100},{margin:0,opacity:1,onComplete:function(){t._panels.current.setStyle("zIndex",100),t._panels.next.setStyle("zIndex",151),t._panels.current.removeClass(t.activePanelCls),t._panels.next.addClass(t.activePanelCls),t._activePanelEl=t._panels.next,t.animateSliderVoteClick(t._panels.next),a.Cookie.remove("awardsActualSlide"),a.Cookie.set("awardsActualSlide",t.getActiveElementIndex(),6e4,"/"),t._settings._enabled=!0}})):"prev"===e&&(this._sendPerformerRequest(this.prevRequestUrl,this._listId,e),this._panels.current.setStyle({zIndex:100}),this._panels.prev.addClass(this.activePanelCls),TweenLite.fromTo(this._panels.prev.dom,this._settings.duration,{margin:0,opacity:1,left:-i,zIndex:151},{left:0}),TweenLite.to(this._panels.current.dom,this._settings.duration,{opacity:0,onComplete:function(){t._panels.current.removeClass(t.activePanelCls),t._activePanelEl=t._panels.prev,t.animateSliderVoteClick(t._panels.prev),a.Cookie.remove("awardsActualSlide"),a.Cookie.set("awardsActualSlide",t.getActiveElementIndex(),6e4,"/"),t._settings._enabled=!0}})),this.onCarouselImageLoaded(!1,s.select("img").item(0).dom)}},checkIfPanelIsFavorite:function(e){this._setFavoriteBtnModelId(e),Ext.get(e).select(this.favoriteBtnSel).item(0).hasClass(this.addFavBtnCls)?this._carouselFavouriteBtnEl.select(this.favoriteBtnSel).item(0).addClass(this.addFavBtnCls).removeClass(this.removeFavBtnCls):this._carouselFavouriteBtnEl.select(this.favoriteBtnSel).item(0).addClass(this.removeFavBtnCls).removeClass(this.addFavBtnCls)},_setFavoriteBtnModelId:function(e){var t=e.select(this.favoriteBtnSel).item(0).getAttribute("data-model-id");this._carouselFavouriteBtnEl.select(this.favoriteBtnSel).item(0).dom.setAttribute("data-model-id",t)},onNextNavigationElClick:function(e){this._panels.next||(this._panels=this.getPanels()),e&&(e.preventDefault(),this.pauseSlideShow()),this.doCarouselAnimation("next")},onPrevNavigationElClick:function(e){this._panels.prev||(this._panels=this.getPanels()),e&&(this.pauseSlideShow(),e.preventDefault()),this.doCarouselAnimation("prev")},onActiveCarouselThumbMouseLeave:function(e,t){this.fireEvent(o.AwardsCarouselGalleryComponent.CAROUSELGALLERY_ACTIVE_THUMB_MOUSEOUT,{element:t,event:e,scope:this.scope||this})},onBodyKeyDown:function(e){if(0!=this.isAllowedToNavByKeyboard&&r.getScrollTop()<=Ext.get(this.carouselContainerWrapperId).getHeight())switch(e.keyCode){case 39:this.onNextNavigationElClick(e),this.pauseSlideShow();break;case 37:this.onPrevNavigationElClick(e),this.pauseSlideShow()}},onCarouselSlideShowNavClick:function(e){e.preventDefault(),this._carouselSlideShowNavEl.hasClass(this.playBtnCls)?this.autoPlay():this._carouselSlideShowNavEl.hasClass(this.pauseBtnCls)&&this.pauseSlideShow()},onCarouselImageLoaded:function(e,t){var s=Ext.decode(Ext.get(t).next(this.preloadDataSel).dom.innerHTML);if(this._isValidPreloadData(s)){var i=new Image;if(i.src=t.src,i.width<10){var o=s.fallbackProfilePictureUrl,a=new Image;a.src=o,Ext.get(a).on("load",function(){a.width<10&&(o=this._defaultImageUrl,t.src=o)},this),o&&(t.src=o)}}},_isValidPreloadData:function(e){return e!=o.AwardsCarouselGalleryComponent.API_RESPONSE_BANNED&&a.isObject(e)&&e.hasOwnProperty("fallbackProfilePictureUrl")},_sendPerformerRequest:function(e,t,s){if(1!=this._maxImageCount){var i={listId:t},o=this;n.request({type:"json",method:"post",url:a.getUrl(e,i,{},""),scope:this,params:i,success:function(e){o.performerRequestSuccessCallback(e,s)},error:function(e){console.error("Request failed.",e)}})}},performerRequestSuccessCallback:function(e,t){var s;if(this.newPerfTpl=new Ext.Template(e.json.data.content),this.newPerfTpl=this.newPerfTpl.applyTemplate(),this._panels[t]||(this._panels=this.getPanels()),"prev"==t){s=this._carouselEl.dom.children[2],this._carouselEl.dom.removeChild(s);var i=this._carouselEl.select("li").item(0);i?(Ext.DomHelper.insertBefore(i,this.newPerfTpl),this._carouselEl.select("li").item(0)):console.error("No first panel")}else{s=this._carouselEl.dom.children[0],this._carouselEl.dom.removeChild(s),Ext.DomHelper.append(this._carouselEl,this.newPerfTpl);var o=this._carouselEl.select("li");o.item(o.getCount()-1)}},firstImagePreloadCheck:function(){var e=[],t=0;for(this._panels=this.getPanels(),e.push(this._panels.prev.select("img").item(0)),e.push(this._panels.current.select("img").item(0)),e.push(this._panels.next.select("img").item(0));t<e.length;t++)this.onCarouselImageLoaded(0,e[t].dom)},playPauseButtonMouseEnter:function(){var e=Ext.get(this._carouselSlideShowNavId);TweenLite.to(e.dom,this.settings.duration,{autoAlpha:1})},playPauseButtonMouseLeave:function(){var e=Ext.get(this._carouselSlideShowNavId);TweenLite.to(e.dom,this._settings.duration,{autoAlpha:this._settings.opacity})},onOverlayOpen:function(){this.isAllowedToNavByKeyboard&&(this.isAllowedToNavByKeyboard=!1)},onOverlayClose:function(){this.isAllowedToNavByKeyboard||(this.isAllowedToNavByKeyboard=!0)},onVoteMouseOver:function(){this.pauseSlideShow()},openChatFromCarousel:function(e,t){if(!r.isModalOpenDenied()){e.preventDefault();var s=Ext.get(t).parent(this.carouselPerformerBoxSel).select(this.perflinkSel).item(0).getAttribute(this.carouselPerformerNameDataName);a.fireEvent(o.BasicController.GLOBALEVENT_THUMBNAIL_CLICK,s)}},_toggleCarouselEventListeners:function(e){var t=e?"on":"un";this._nextNavigationEl[t]("click",this.onNextNavigationElClick,this),this._prevNavigationEl[t]("click",this.onPrevNavigationElClick,this),this._playPauseButtonContainer[t]("mouseenter",this.playPauseButtonMouseEnter,this)[t]("mouseleave",this.playPauseButtonMouseLeave,this),this._carouselSlideShowNavEl[t]("click",this.onCarouselSlideShowNavClick,this),this._carouselEl[t]("click",this.onCarouselVoteBtnClick,this,{delegate:this.carouselVoteButtonSel})[t]("mouseover",this.onVoteMouseOver,this,{delegate:this.carouselVoteButtonSel})[t]("click",this.openChatFromCarousel,this,{delegate:this.perflinkSel})[t]("click",this.openChatFromCarousel,this,{delegate:this.carouselPrivateStarterButtonSel})},showBigMessageAfterVote:function(e,t){var s=this.getSlideByPerformerId(e.performerId);if(s){var i=s.select(".vote_btn").item(0),o=s.select(".message").item(0);(e.isOffline?this._templates.messageBigThankYou:"buyCredit"===e.nextStep?this._templates.messageOverlayBigBuyCredits:"alreadyVoted"===e.nextStep?this._templates.messageOverlayBigNoMoreSteps:this._templates.messageOverlayBigPrivate).insertAfter(i,{isSubscribed:e.isSubscribed?"isSubscribed":"",points:e.addedPoints,morePoints:e.nextAvailablePoints,plural:1<e.points?" plural":"",url:a.getUrl("Chat/Performer",{performerId:t},{})}),i.remove(),this.animateSliderVoteClick(s),o&&o.remove()}},increaseDisplayedPoints:function(e,t){var s=this.getSlideByPerformerId(e);if(s&&t.addedPoints){var i=s.select(this.pointsNumSel).item(0),o=t.points+t.addedPoints;i.dom.innerHTML=r.formatNumberWithComma(o)}},getSlideByPerformerId:function(e){return this._carouselEl.select("li .perf_"+e).item(0)},animateSliderVoteClick:function(e){if(e){var t=e.select(this._voteMessageWrapperSel).item(0);if(t){var s=e.select(this.titleSel).item(0),i=e.select(this.carouselPrivateBtnSel).item(0);t.setStyle("display","block"),s.addClass("visible"),i.addClass("visible")}}},getActivePerformerBox:function(){return this._activePanelEl.select(this.carouselPerformerBoxSel).item(0)},onCarouselFavoriteButtonClick:function(e){e.stopEvent();var t=this._activePanelEl.select(this.favoriteBtnSel).item(0);a.fireEvent(o.FavoritesComponent.GLOBALEVENT_FAVORITE_BUTTON_CLICK,t)},onFavoriteUpdateSuccess:function(){var e=this._carouselFavouriteBtnEl.select(this.favoriteBtnSel).item(0);e.hasClass(this.removeFavBtnCls)?e.addClass(this.removeFavBtnCls).removeClass(this.addFavBtnCls):e.addClass(this.addFavBtnCls).removeClass(this.removeFavBtnCls)},onFreeChatOpen:function(e){e.scope.name===o.ChatModalComponent.NAME&&(l.isLoggedIn()?a.Cookie.remove("awardsBeforeState"):(a.Cookie.remove("awardsBeforeState"),a.Cookie.set("awardsBeforeState","1")),this._openedModel=i.getState().performer.nick)},onLoggedIn:function(){var e=this._openedModel?"#!chat/"+this._openedModel:null;d.getActiveModal().name===o.ChatModalComponent.NAME?this._reloadPage():this._reloadPageWithStartIndex(e)},onModalClose:function(e){location.hash.replace("#!","").length||(this._openedModel=null),e.scope.name===o.FreeBonusModalComponent.NAME&&this._reloadPageWithStartIndex(),e.scope.name===o.PromoModalComponent.NAME&&this._reloadPageWithStartIndex("#!payment")},onAfterFreeChatClose:function(e){e.scope.name===o.ChatModalComponent.NAME&&(l.isLoggedIn()&&a.Cookie.get("awardsBeforeState")?(a.Cookie.remove("awardsBeforeState"),this._reloadPageWithStartIndex()):a.Cookie.remove("awardsBeforeState"))},bind:function(){c.superclass.bind.call(this),a.on([{element:a.Broadcaster,event:o.ModalComponent.GLOBALEVENT_MODAL_OPENED,handler:this.onOverlayOpen},{element:a.Broadcaster,event:o.ModalComponent.GLOBALEVENT_MODAL_CLOSED,handler:this.onOverlayClose},{element:this._carouselFavouriteBtnEl,event:"click",handler:this.onCarouselFavoriteButtonClick},{element:a.Broadcaster,event:o.FavoritesComponent.GLOBALEVENT_FAVORITE_UPDATE_SUCCESS,handler:this.onFavoriteUpdateSuccess},{element:this.element.select(this.carouselId+" li img"),event:"load",handler:this.onCarouselImageLoaded},{element:Ext.getBody(),event:"keydown",handler:this.onBodyKeyDown},{element:a.Broadcaster,event:o.BasicController.GLOBALEVENT_LOGGED_IN,handler:this.onLoggedIn},{element:a.Broadcaster,event:o.ModalComponent.GLOBALEVENT_MODAL_CLOSED,handler:this.onModalClose},{element:a.Broadcaster,event:o.ModalComponent.GLOBALEVENT_MODAL_CLOSED,handler:this.onAfterFreeChatClose},{element:a.Broadcaster,event:o.ModalComponent.GLOBALEVENT_MODAL_OPENED,handler:this.onFreeChatOpen}],this)},unbind:function(){c.superclass.unbind.call(this),this._toggleCarouselEventListeners(!1)}})},"5f7cc":function(e,t,s){var i=s("1029"),o=s("d869"),a=s("a7b6"),n=s("67bb"),r=function(e,t){r.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(r,a,{name:"AwardsListPageView",_templates:{messageOverlaySmallBuyCredits:".message_overlay_small_buycredits_template",messageOverlaySmallNoMoreSteps:".message_overlay_small_nomoresteps_template",messageOverlaySmallPrivate:".message_overlay_small_private_template",messageOverlaySmallPrivateOffline:".message_overlay_small_private_offline_template",messageOverlaySmallJoin:".message_overlay_small_join_template",pointsBubble:".added_points_template"},init:function(){r.superclass.init.apply(this,arguments),this._prepareTemplates()},_prepareTemplates:function(){i.each(this._templates,function(e,t){this._templates[t]=new Ext.Template(Ext.select(e).item(0).dom.innerHTML)},this)},_addPerformerViewToCollection:function(e,t){r.superclass._addPerformerViewToCollection.call(this,e,t),t.on(o.AwardsPerformerView.EVENT_VOTE_BUTTON_CLICK,this._onAwardsPerformerVoteClick,this),t.on(o.AwardsPerformerView.EVENT_VOTE_MESSAGE_ANIMATION_FINISHED,this._onVoteMessageAnimationFinished,this)},_onAwardsPerformerVoteClick:function(e){this.fireEvent(o.AwardsListPageView.EVENT_VOTE_BUTTON_CLICK,e)},_onVoteMessageAnimationFinished:function(){this.fireEvent(o.AwardsPerformerView.EVENT_VOTE_MESSAGE_ANIMATION_FINISHED)},_getViewClass:function(){return n},callOnPerformerViewIfExists:function(e,t){var s=this.getPerformerViewById(e);if(s&&s[t]){var i=Array.prototype.slice.call(arguments,2);s[t].apply(s,i)}},allowHoverOnPerformerView:function(e){this.callOnPerformerViewIfExists(e,"allowHover")},disallowHoverOnPerformerView:function(e){this.callOnPerformerViewIfExists(e,"disallowHover")},addPointsToPerformerView:function(e,t){this.callOnPerformerViewIfExists(e,"addPoints",this._templates.pointsBubble,t)},addVotedMessageToPerformerView:function(e,t,s){this.callOnPerformerViewIfExists(e,"appendMessage",this._templates[t],s)}})},"67bb":function(e,t,s){var i=s("88fa").default,o=s("d869"),l=s("7ab0"),a=function(e,t){a.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(a,i,{name:"AwardsPerformerView",allowHoverCls:"allow_hover",voteMessageSel:".vote_message_wrapper",voteMessageTextSel:".text",voteMessageTitleSel:".title",voteMessageLinkSel:"a",voteButtonSel:".vote_button",appendMessageDelay:2e3,pointsBeingAddedCls:"points_being_added",pointsNumSel:".points .num",addedPointsBubbleSel:".added_points_bubble",counterInterval:10,voteMessageAnimationDuration:.2,_selectElements:function(){a.superclass._selectElements.apply(this,arguments),this._voteButtonEl=this.select(this.voteButtonSel).item(0)},_bindElements:function(){this._voteButtonEl&&this._voteButtonEl.on("click",this.onVoteButtonClick,this),a.superclass._bindElements.apply(this,arguments)},_unbindElements:function(){this._voteButtonEl&&this._voteButtonEl.un("click",this.onVoteButtonClick,this),a.superclass._unbindElements.apply(this,arguments)},_onMouseEnter:function(){this.element.hasClass(this.allowHoverCls)&&a.superclass._onMouseEnter.apply(this,arguments)},onVoteButtonClick:function(e){e.stopEvent(),this.model.getIsVoted()||this.fireEvent(o.AwardsPerformerView.EVENT_VOTE_BUTTON_CLICK,this.model)},addPoints:function(e,t){var s=this.select(this.pointsNumSel).item(0),i=t.addedPoints<100?50:100;this.model.setIsVoted(!0),this.element.addClass(this.pointsBeingAddedCls),this.appendPointsBubble(e,s,t.addedPoints),this.addPointsAnimated(s,t,i),this.animatePointsBubbleOut(i),this.model.addPoints(t.addedPoints)},appendPointsBubble:function(e,t,s){e.append(t.parent(),{points:"+"+l.formatNumberWithComma(s)})},addPointsAnimated:function(e,t,s){var i=t.points-t.addedPoints,o=Math.floor(t.addedPoints/s),a=new Ext.util.TaskRunner,n=0,r={run:function(){i+=o,e.dom.innerHTML=l.formatNumberWithComma(i),s<=++n&&(i<t.points&&(e.dom.innerHTML=l.formatNumberWithComma(t.points)),a.stop(r))},scope:this,interval:this.counterInterval};a.start(r)},animatePointsBubbleOut:function(e){var t=this.select(this.addedPointsBubbleSel).item(0);TweenLite.to(t.dom,this.counterInterval*e/500,{css:{opacity:0,top:"-30px"},easeOut:Circ,onComplete:function(){t.remove(),this.element.removeClass(this.pointsBeingAddedCls)},onCompleteScope:this})},appendMessage:function(e,t){this._appendMessageTask=new Ext.util.DelayedTask(this._appendMessageTask,this,[e,t]),this._appendMessageTask.delay(this.appendMessageDelay)},_appendMessageTask:function(e,t){e.append(this.element,t),this.animateVoteMessage()},animateVoteMessage:function(){var e=this.select(this.voteMessageSel).item(0),t=e.select(this.voteMessageTextSel).item(0).dom,s=e.select(this.voteMessageTitleSel).item(0).dom,i=e.select(this.voteMessageLinkSel).item(0).dom;TweenLite.to(e.dom,this.voteMessageAnimationDuration,{css:{opacity:1},onComplete:function(){TweenLite.fromTo(t,this.voteMessageAnimationDuration,{css:{bottom:"-20px",opacity:0}},{delay:this.voteMessageAnimationDuration,css:{opacity:1,bottom:0}}),TweenLite.fromTo(s,this.voteMessageAnimationDuration,{css:{top:"-20px",opacity:0}},{css:{opacity:1,top:0}}),TweenLite.fromTo(i,2*this.voteMessageAnimationDuration,{css:{opacity:0}},{css:{opacity:1},onComplete:function(){this.fireEvent(o.AwardsPerformerView.EVENT_VOTE_MESSAGE_ANIMATION_FINISHED)},onCompleteScope:this})},onCompleteScope:this})},allowHover:function(){this.element.addClass(this.allowHoverCls)},disallowHover:function(){this.element.removeClass(this.allowHoverCls),this.fireEvent(o.PerformerView.EVENT_VIEW_MOUSEOUT,this)}})},"740c":function(e,t,s){var i=s("9b4c"),o=s("1825"),a=/[&<>"']/g,n=RegExp(a.source);e.exports=function(e){return(e=o(e))&&n.test(e)?e.replace(a,i):e}},"9a8b":function(e,t){e.exports=function(t){return function(e){return null==t?void 0:t[e]}}},"9b4c":function(e,t,s){var i=s("9a8b")({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=i},ac29:function(e,t,s){s("1029");var i=s("d869"),o=s("768e"),a=s("0592").default,n=s("e568"),r=s("7ab0"),l=function(e,t){l.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(l,o,{name:"AwardsListPageController",templateNames:{buyCredit:"messageOverlaySmallBuyCredits",alreadyVoted:"messageOverlaySmallNoMoreSteps",goPrivate:"messageOverlaySmallPrivate"},enableConcurrentVoting:!1,_isVotingInProgress:!1,setPerformerVoted:function(e){this.ListPageView.disallowHoverOnPerformerView(e.performerId),this.ListPageView.addPointsToPerformerView(e.performerId,e),this.addVotedMessage(e)},onVoteButtonClick:function(e){n.isLoggedIn()?this.isVotingEnabled(e)&&(e.setIsVoted(!0),this._isVotingInProgress=!0,this.fireEvent(i.AwardsListPageController.EVENT_VOTE_BUTTON_CLICK,{performerId:e.getId()})):a.navigate("signup",{trigger:!0,replace:!0,preventNavigateBack:!0})},isVotingEnabled:function(e){return!e.getIsVoted()&&(this.enableConcurrentVoting||!this._isVotingInProgress)},onVoteMessageAnimationFinished:function(){this._isVotingInProgress=!1},addVotedMessage:function(e){var t=e.performerId,s=this.templateNames[e.nextStep],i={points:e.addedPoints,icon:"<i>"+r.svgIconBlock("star")+"</i>",isSubscribed:e.isSubscribed?"isSubscribed":""};s||(s=this.templateNames.goPrivate,i.morePoints=e.nextAvailablePoints,i.plural=1<e.addedPoints?" plural":""),this.ListPageView.addVotedMessageToPerformerView(t,s,i)}})},bb82:function(e,t,s){var i=s("1029"),o=s("d869"),a=s("00a1"),n=s("ac29"),r=s("c82d"),l=s("5f7cc"),d=function(e,t){d.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(d,a,{name:"AwardsListPageComponent",awardsId:"awards_0",favoriteButtonSel:".favorite",awardsContainerId:"awards_container",controllerClassName:n,modelClassName:r,viewClassName:l,listPageControllerListeners:{ListPageView:{"vote-button-click":"onVoteButtonClick","event-vote-message-animation-finished":"onVoteMessageAnimationFinished"}},init:function(){this.addEvents(o.AwardsListPageComponent.GLOBALEVENT_VOTE_CLICK),d.superclass.init.apply(this,arguments)},setPerformerVoted:function(e){this.getController().setPerformerVoted(e)},onVoteButtonClick:function(e){i.fireEvent(o.VoteController.GLOBALEVENT_VOTE_CLICK,e)},_setController:function(){d.superclass._setController.apply(this,arguments),this._listPageController.on(o.AwardsListPageController.EVENT_VOTE_BUTTON_CLICK,this.onVoteButtonClick,this)}})},bd5a:function(e,t,s){var i=s("1029"),o=s("d869"),a=function(e,t){a.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(a,i.Controller,{name:"VoteController",init:function(e,t){a.superclass.init.call(this,e,t),i.addEvents(o.VoteController.GLOBALEVENT_VOTE_CLICK,o.VoteController.GLOBALEVENT_VOTE_SUCCESS,o.VoteController.GLOBALEVENT_VOTE_ERROR),i.on([{element:i.Broadcaster,event:o.VoteController.GLOBALEVENT_VOTE_CLICK,handler:this.onVoteClick}],this)},onVoteRequestSuccess:function(e){i.fireEvent(o.VoteController.GLOBALEVENT_VOTE_SUCCESS,{params:e.params,ev:e.ev})},onVoteRequestError:function(e){i.fireEvent(o.VoteController.GLOBALEVENT_VOTE_ERROR,{performerId:e.performerId,ev:e.ev})},onVoteClick:function(e){this.model.sendVoteRequest(e)}})},c82d:function(e,t,s){var i=s("1029"),o=s("b07d"),a=s("1f10"),n=function(e,t){n.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(n,o,{name:"AwardsListPageModel",showMoreRoute:"Awards/OnlineListMore",listPageIdMeta:"awardsListId",lastPageResponsePath:"json.data.content.is_last_page",_setIsLastPage:function(e){this._isLastPage=!0===e},_getNextPageUrl:function(){var e={listId:i.bind(function(){return i.getMeta(this.listPageIdMeta)},this)};return i.getUrl(this.showMoreRoute,e)},_getModelClass:function(){return a}})},d01c:function(e,t,s){var i=s("1029"),o=s("d869"),a=s("1e4a").default,n=s("4829"),r=s("d633"),l=s("bd5a"),d=s("fe05"),c=s("0592").default,h=s("e568"),u=s("bb82"),m=function(e,t){m.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(m,a,{name:"AwardsPage",listpageContainerId:"awards_container",listpageId:"awards_performers",listPageComponentName:u,countdownCtSel:"awards_countdown_container",countdownCtVisibleCls:"visible",countdownHolderId:"awards_countdown_title_text",countdownTemplate:"[{w}w ][{d}d ][{h}h ][{m}m ][{s}s ]",titleSel:".title",carouselPrivateBtnSel:".private",carouselContainerId:"awards_carousel_container",carouselId:"awards_carousel",_voteMessageWrapperSel:".vote_message_wrapper",myFavoriteCls:"myfavorite",loginErrorType:"login-required",dataPerformerIdName:"data-performer-id",dataPerformerPidName:"data-performer-pid",init:function(e,t){this._initCarousel(),this._showCountdownContainer(),this._initCountdownTimer(),this.setVoteController(),m.superclass.init.call(this,e,t)},_initCarousel:function(){var e=Ext.get(this.carouselId);e&&(this._carouselGalleryCmp=new n(e,{}))},_initCountdownTimer:function(){this._timerComponent=new r(Ext.get(this.countdownHolderId),{template:this.countdownTemplate})},setVoteController:function(){return this._voteController instanceof l||(this._voteController=new l({items:{model:{component:this.setVoteModel(),listeners:{"vote-success":"onVoteRequestSuccess","vote-error":"onVoteRequestError"}}}})),i.on([{element:i.Broadcaster,event:o.VoteController.GLOBALEVENT_VOTE_SUCCESS,handler:this.onVoteRequestSuccess},{element:i.Broadcaster,event:o.VoteController.GLOBALEVENT_VOTE_ERROR,handler:this.onVoteRequestError}],this),this._voteController},setVoteModel:function(){return this._voteModel instanceof d||(this._voteModel=new d),this._voteModel},_showCountdownContainer:function(){Ext.get(this.countdownCtSel).addClass(this.countdownCtVisibleCls)},onVoteRequestSuccess:function(e){var t=Ext.apply({},e.ev.json.data,{performerId:e.params.performerId});this._carouselGalleryCmp&&(this._carouselGalleryCmp.showBigMessageAfterVote(t,e.params.performerNick),this._carouselGalleryCmp.increaseDisplayedPoints(e.params.performerId,t)),this.listPage.setPerformerVoted(t)},onVoteRequestError:function(e){e.ev.json.data&&e.ev.json.data.errorType===this.loginErrorType&&(h.isLoggedIn()?window.location.reload():c.navigate("signup",{trigger:!0,replace:!0,preventNavigateBack:!1}))}})},d633:function(e,t,s){var i=s("1029"),o=s("d869"),a=function(e,t){a.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(a,i.Component,{name:"Countdown",timestamp:null,template:"[{y}] [{w}] [{d}] [{h}] [{m}] [{s}]",hideOnZero:["y","w"],dataSelector:"data-time",_timeObject:{y:0,w:0,d:0,h:0,m:0,s:0},_timePrevObject:void 0,_timerTask:void 0,_task:void 0,_targetElement:void 0,_tempstamp:null,_template:void 0,init:function(e,t){this.addEvents(o.Countdown.EVENT_START,o.Countdown.EVENT_END,o.Countdown.EVENT_STOP,o.Countdown.EVENT_SECOND,o.Countdown.EVENT_MINUTE,o.Countdown.EVENT_HOUR,o.Countdown.EVENT_DAY,o.Countdown.EVENT_WEEK,o.Countdown.EVENT_YEAR),this._targetElement=e,this.getTimestamp(),this.startTimer(),a.superclass.init.call(this,e,t)},startTimer:function(){this._timerTask=new Ext.util.TaskRunner,this._task={run:this.generate,interval:1e3,scope:this},this.start()},generate:function(){this._tempstamp=this.timestamp,0<=this.template.indexOf("{y}")&&(this._timeObject.y=Math.floor(this._tempstamp/31536e3),this._tempstamp-=31536e3*this._timeObject.y),0<=this.template.indexOf("{w}")&&(this._timeObject.w=Math.floor(this._tempstamp/604800),this._tempstamp-=604800*this._timeObject.w),0<=this.template.indexOf("{d}")&&(this._timeObject.d=Math.floor(this._tempstamp/86400),this._tempstamp-=86400*this._timeObject.d),this._timeObject.h=Math.floor(this.timestamp%86400/3600),this._timeObject.m=Math.floor(this.timestamp%86400%3600/60),this._timeObject.s=Math.floor(this.timestamp%86400%3600%60),this.callEvents(),this.draw(),this._timePrevObject=this._timeObject,this.timestamp--},getTimestamp:function(){this.timestamp=parseInt(this.timestamp||this._targetElement.getAttribute(this.dataSelector)||this._targetElement.dom.getAttribute(this.dataSelector))},draw:function(){for(var e=this.template,t=0;t<this.hideOnZero.length;t++)if(0===this._timeObject[this.hideOnZero[t]]){var s="{"+this.hideOnZero[t]+"}";e=this.template.replace(new RegExp("[[^[]*\\"+s+".*?]","gm"),"")}e=e.replace(/\]/g,"").replace(/\[/g,"").replace("{y}",this._timeObject.y.toString()).replace("{w}",this._timeObject.w.toString()).replace("{d}",this._timeObject.d.toString()).replace("{h}",this._timeObject.h.toString()).replace("{m}",this._timeObject.m.toString()).replace("{s}",this._timeObject.s.toString()),this._targetElement.dom.innerHTML=e},callEvents:function(){if(this._timePrevObject){var e={timestamp:this._tempstamp,currentTimes:this._timeObject,prevTimes:this._timeObject};this._timeObject.y!==this._timePrevObject.y&&this.fireEvent(o.Countdown.EVENT_YEAR,{data:e,scope:this.scope||this||window},o.Countdown.EVENT_YEAR),this._timeObject.w!==this._timePrevObject.w&&this.fireEvent(o.Countdown.EVENT_WEEK,{data:e,scope:this.scope||this||window},o.Countdown.EVENT_WEEK),this._timeObject.d!==this._timePrevObject.d&&this.fireEvent(o.Countdown.EVENT_DAY,{data:e,scope:this.scope||this||window},o.Countdown.EVENT_DAY),this._timeObject.h!==this._timePrevObject.h&&this.fireEvent(o.Countdown.EVENT_HOUR,{data:e,scope:this.scope||this||window},o.Countdown.EVENT_HOUR),this._timeObject.m!==this._timePrevObject.m&&this.fireEvent(o.Countdown.EVENT_MINUTE,{data:e,scope:this.scope||this||window},o.Countdown.EVENT_MINUTE),this._timeObject.s!==this._timePrevObject.s&&this.fireEvent(o.Countdown.EVENT_SECOND,{data:e,scope:this.scope||this||window},o.Countdown.EVENT_SECOND),0===this._timeObject.y&&0===this._timeObject.w&&0===this._timeObject.d&&0===this._timeObject.h&&0===this._timeObject.m&&0===this._timeObject.s&&(this._timerTask.stop(this._task),this.fireEvent(o.Countdown.EVENT_END,{data:e,scope:this.scope||this||window},o.Countdown.EVENT_END))}},start:function(){this._timerTask.start(this._task),this.fireEvent(o.Countdown.EVENT_START,{timestamp:this._tempstamp,scope:this.scope||this||window},o.Countdown.EVENT_START)},stop:function(){this._timerTask.stop(this._task),this.fireEvent(o.Countdown.EVENT_STOP,{timestamp:this._tempstamp,scope:this.scope||this||window},o.Countdown.EVENT_STOP)},inArray:function(e,t){for(var s=0;s<t.length;s++)if(t[s]==e)return!0;return!1}})},fe05:function(e,t,s){var i=s("1029"),o=s("d869"),a=s("5f9e"),n=s("7ab0"),r=function(e,t){r.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(r,i.Model,{name:"VoteModel",sendVoteRoute:"Awards/Vote",init:function(){this.addEvents(o.VoteModel.VOTE_SUCCESS),r.superclass.init.call(this)},sendVoteRequest:function(e){var t=e.performerId,s=i.getUrl(this.sendVoteRoute,{performerId:t});a.request({url:s,method:"POST",type:"json",success:i.bind(this.onVoteRequestSuccess,this,e),error:i.bind(this.onVoteRequestError,this,t),failure:i.bind(this.onVoteRequestError,this,t),scope:this,params:{session:n.getSessionId()}})},onVoteRequestSuccess:function(e,t){this.fireEvent(o.VoteModel.VOTE_SUCCESS,{params:e,ev:t})},onVoteRequestError:function(e,t){this.fireEvent(o.VoteModel.VOTE_SUCCESS,{performerId:e,ev:t})}})}}]);