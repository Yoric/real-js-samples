/* release date : 2015-11-09 */
nhn=window.nhn||{},nhn.search=nhn.search||{},nhn.search.video=nhn.search.video||{},function(a){var b={init:function(b){this._elBase=b.elBase;if(!this._elBase)return;this._fnBefore=b.fnBefore,this._fnProcess=b.fnProcess,this._fnDone=b.fnDone,this._oReportStep={before:{elBase:a.$$.getSingle("._elMsgReport",this._elBase),btn:a.$$.getSingle("._btnReport",this._elBase),done:a.$$.getSingle("._elMsgReportDone",this._elBase)},process:{elBase:a.$$.getSingle("._elMsgReportProcess",this._elBase),btn:{elBtnOk:a.$$.getSingle("._btnOkReport",this._elBase),elBtnCancel:a.$$.getSingle("._btnCancelReport",this._elBase)}},notSelect:{elBase:a.$$.getSingle("._elMsgNotSelect",this._elBase),btn:{elBtnClose:a.$$.getSingle("._btnClose",this._elBase)}}},this.showMsg=a.$Fn(this._showMsg,this).bind(),this.hideMsg=a.$Fn(this._hideMsg,this).bind(),this._attachEventHandler()},_showMsg:function(){a.$Element(this._oReportStep.notSelect.elBase).show("")},_hideMsg:function(){a.$Element(this._oReportStep.notSelect.elBase).hide()},_attachEventHandler:function(){a.$Fn(function(b){b.stop(a.$Event.CANCEL_DEFAULT),this._showStep("process"),this._fnBefore(),$$.getSingle("._report").focus()},this).attach(this._oReportStep.before.btn,"click"),a.$Fn(function(b){b.stop(a.$Event.CANCEL_DEFAULT),b.currentElement.blur();var c=this._fnProcess();c==1&&(this._showStep("done"),this._fnDone(),a.$$.getSingle("._btnReport",this._elBase).focus())},this).attach(this._oReportStep.process.btn.elBtnOk,"click"),a.$Fn(function(b){b.stop(a.$Event.CANCEL_DEFAULT),this._showStep("before"),this._fnDone();var d=$$("._report:checked",c._oConfig.video.elBase);for(var e=0;e<d.length;e++)d[e].checked=!1;a.$$.getSingle("._btnReport",this._elBase).focus()},this).attach(this._oReportStep.process.btn.elBtnCancel,"click"),a.$Fn(function(b){b.stop(a.$Event.CANCEL_DEFAULT),this._hideMsg(),$$.getSingle("._report").focus()},this).attach(this._oReportStep.notSelect.btn.elBtnClose,"click")},_showStep:function(b){for(var c in this._oReportStep)a.$Element(this._oReportStep[c].elBase).hide();typeof this._oReportStep[b]!="undefined"&&a.$Element(this._oReportStep[b].elBase).show("inline"),b=="done"&&(a.$Element(this._oReportStep.before.elBase).show("inline"),a.$Element(this._oReportStep.before.done).css("display","inline-block")),b=="before"&&a.$Element(this._oReportStep.before.done).css("display","none")}},c={init:function(b){this._tpl=new a.$Template("%3C%3Fxml+version%3D%221.0%22+encoding%3D%22UTF-8%22%3F%3E%3CReportBatchProcess%3E%3Cheader%3E%3CinterfaceId%3EReportProcessBatchReq%3C%2FinterfaceId%3E%3CtransferReqTime%3E20100607155059%3C%2FtransferReqTime%3E%3CtotalReportCnt%3E{=totalReportCnt}%3C%2FtotalReportCnt%3E%3C%2Fheader%3E%3Cbody%3E{for num:obj in oReport}%3Citem+index%3D%22{=num+1}%22%3E%3CschRsltCatDtlCd%3E{=obj.schRsltCatDtlCd}%3C%2FschRsltCatDtlCd%3E%3CschSvcCatDtlCd%3E{=obj.schSvcCatDtlCd}%3C%2FschSvcCatDtlCd%3E%3CsvcDtlCd%3E{=obj.svcDtlCd}%3C%2FsvcDtlCd%3E%3CorgncArtclId%3E{=obj.orgncArtclId}%3C%2ForgncArtclId%3E%3CcntsUrl%3E%3C%21%5BCDATA%5B{=obj.cntsUrl}%5D%5D%3E%3C%2FcntsUrl%3E%3CorgncSvcId%3E{=obj.orgncSvcId}%3C%2ForgncSvcId%3E%3CorgncSvcNm%3E{=obj.orgncSvcNm}%3C%2ForgncSvcNm%3E%3CreportKwdNm%3E%3C%21%5BCDATA%5B{=obj.reportKwdNm}%5D%5D%3E%3C%2FreportKwdNm%3E%3CartclTitle%3E%3C%21%5BCDATA%5B{=obj.artclTitle}%5D%5D%3E%3C%2FartclTitle%3E%3CartclSumryCont%3E{=obj.artclSumryCont}%3C%2FartclSumryCont%3E%3CartclRgstrId%3E{=obj.artclRgstrId}%3C%2FartclRgstrId%3E%3CcntsLstModYmdtc%3E{=obj.cntsLstModYmdtc}%3C%2FcntsLstModYmdtc%3E%3CcntsFstRgstYmdtc%3E{=obj.cntsFstRgstYmdtc}%3C%2FcntsFstRgstYmdtc%3E%3CthmnlImgPath%3E%3C%21%5BCDATA%5B{=obj.thmnlImgPath}%5D%5D%3E%3C%2FthmnlImgPath%3E%3C%2Fitem%3E{/for}%3C%2Fbody%3E%3C%2FReportBatchProcess%3E"),this._elForm=b.elForm,this._oConfig=b.oConfig;var c={list:"video_report",image:"nmov_report"};this._sResultClass=c[this._getVideoResultViewType()],this.report=a.$Fn(this._report,this).bind(),this.showCheckBox=a.$Fn(this._showCheckBox,this).bind(),this.hideCheckBox=a.$Fn(this._hideCheckBox,this).bind()},_getVideoResultViewType:function(){return typeof sVideoResultViewType!="undefined"?sVideoResultViewType:"list"},_showCheckBox:function(b){this._setCheckBox(b),a.$Element(this._oConfig[b].elBase).addClass(this._sResultClass),a.$A(this._oConfig[b].aElChkBox).forEach(function(b,c){a.$Element(b).show()})},_hideCheckBox:function(b){this._setCheckBox(b),a.$Element(this._oConfig[b].elBase).removeClass(this._sResultClass),a.$A(this._oConfig[b].aElChkBox).forEach(function(b,c){a.$Element(b).hide()})},_setCheckBox:function(a){typeof this._oConfig[a]["aElChkBox"]=="undefined"&&(this._oConfig[a].aElChkBox=cssquery("._report",this._oConfig[a].elBase))},_getReportDataIdx:function(b){var c=[];return this._setCheckBox(b),a.$A(this._oConfig[b].aElChkBox).forEach(function(a,b){a.checked&&(/[id]-(\w+)/.test(a.className),c.push(RegExp.$1))}),c},_getReportDataObject:function(a){var c=this._getReportDataIdx(a),d={totalReportCnt:0,oReport:[]};if(c.length==0)return b.showMsg(),null;for(var e=0;e<c.length;e++){var f=c[e],g=this._oConfig[a].reportData[f];typeof g!="undefined"&&d.oReport.push(g)}return d.totalReportCnt=d.oReport.length,d},_report:function(a){var b=this._getReportDataObject(a);if(b==null)return $$.getSingle("._btnClose",this._elBase).focus(),!1;if(b.oReport.length!=0){var c=this._tpl.process(b);this._elForm.sendData.value=c,this._elForm.submit()}return!0}};nhn.search.video.ReportVideo=a.$Class({$init:function(a){var d=a.elBase,e=a.elForm,f=a.oConfig;b.init({elBase:d,fnBefore:function(){c.showCheckBox("video")},fnProcess:function(){var a=c.report("video");return a},fnDone:function(){c.hideCheckBox("video")}}),c.init({elForm:e,oConfig:f})}})}(window.jindo)