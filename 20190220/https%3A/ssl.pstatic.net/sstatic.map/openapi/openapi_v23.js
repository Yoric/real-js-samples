/*! Naver maps - v2.4.2 - 2019-01-24 11:11:01
 * 
 * Copyright (c) 2009-2019 NAVER corp. Team mantle
 * 
 */
var tileVersion={host:"onetile.map.naver.net",onetile:"198",dv:"1901.003",panorama:"2.86",satellite:"1.46",bicycle:"1.63",overlay:"1.84",map:"2.81",land:"1.12",traffic:"2.81"},sPanoramaVersion="2.08";!function(jindo){function isUnCacheAgent(){var t=_ua.indexOf("iPad")>-1,e=_ua.indexOf("Android")>-1,n=!(_ua.indexOf("IEMobile")>-1)&&_ua.indexOf("Mobile")>-1||t&&_ua.indexOf("Safari")>-1;return n&&!t&&!e}if("undefined"==typeof window.nhn||"undefined"==typeof window.nhn.api||"undefined"==typeof window.nhn.api.map){"undefined"!=typeof jindo&&"$Jindo"in jindo&&(jindo={}),"undefined"!=typeof window&&"undefined"==typeof window.nhn&&(window.nhn={});var jindo;"undefined"!=typeof window&&(jindo||(jindo={})),jindo.$Jindo=function(){var t=arguments.callee,e=t._cached;return e?e:this instanceof t?(e||(t._cached=this),void(this.version="1.5.0")):new t},jindo.$Agent=function(){var t=arguments.callee,e=t._cached;return e?e:this instanceof t?(e||(t._cached=this),this._navigator=navigator,void(this._dm=document.documentMode)):new t},jindo.$Agent.prototype.navigator=function(){function t(t,e){return(e||"").indexOf(t)>-1}var e={},n=-1,i=-1,o=this._navigator.userAgent,a=this._navigator.vendor||"",s=this._dm;e.getName=function(){var t="";for(var n in e)"boolean"==typeof e[n]&&e[n]&&e.hasOwnProperty(n)&&(t=n);return t},e.webkit=t("WebKit",o),e.opera=void 0!==window.opera||t("Opera",o),e.ie=!e.opera&&(t("MSIE",o)||t("Trident",o)),e.chrome=e.webkit&&t("Chrome",o),e.safari=e.webkit&&!e.chrome&&t("Apple",a),e.firefox=t("Firefox",o),e.mozilla=t("Gecko",o)&&!e.safari&&!e.chrome&&!e.firefox&&!e.ie,e.camino=t("Camino",a),e.netscape=t("Netscape",o),e.omniweb=t("OmniWeb",o),e.icab=t("iCab",a),e.konqueror=t("KDE",a),e.mobile=(t("Mobile",o)||t("Android",o)||t("Nokia",o)||t("webOS",o)||t("Opera Mini",o)||t("BlackBerry",o)||t("Windows",o)&&t("PPC",o)||t("Smartphone",o)||t("IEMobile",o))&&!t("iPad",o),e.msafari=!t("IEMobile",o)&&t("Mobile",o)||t("iPad",o)&&t("Safari",o),e.mopera=t("Opera Mini",o),e.mie=t("PPC",o)||t("Smartphone",o)||t("IEMobile",o);try{if(e.ie)if(s>0)if(n=s,o.match(/(?:Trident)\/([0-9.]+)/)){var r=parseFloat(RegExp.$1,10);r>3&&(i=r+4)}else i=n;else i=n=o.match(/(?:MSIE) ([0-9.]+)/)[1];else e.safari||e.msafari?(n=parseFloat(o.match(/Safari\/([0-9.]+)/)[1]),n=100==n?1.1:o.match(/Version\/([0-9.]+)/)?RegExp.$1:[1,1.2,-1,1.3,2,3][Math.floor(n/100)]):e.mopera?n=o.match(/(?:Opera\sMini)\/([0-9.]+)/)[1]:e.firefox||e.opera||e.omniweb?n=o.match(/(?:Firefox|Opera|OmniWeb)\/([0-9.]+)/)[1]:e.mozilla?n=o.match(/rv:([0-9.]+)/)[1]:e.icab?n=o.match(/iCab[ \/]([0-9.]+)/)[1]:e.chrome&&(n=o.match(/Chrome[ \/]([0-9.]+)/)[1]);e.version=parseFloat(n),e.nativeVersion=parseFloat(i),isNaN(e.version)&&(e.version=-1)}catch(h){e.version=-1}return this.navigator=function(){return e},e},jindo.$Agent.prototype.os=function(){var t={};return u=this._navigator.userAgent,p=this._navigator.platform,f=function(t,e){return e.indexOf(t)>-1},aMatchResult=null,t.getName=function(){var e="";for(x in t)t[x]===!0&&t.hasOwnProperty(x)&&(e=x);return e},t.win=f("Win",p),t.mac=f("Mac",p),t.linux=f("Linux",p),t.win2000=t.win&&(f("NT 5.0",u)||f("Windows 2000",u)),t.winxp=t.win&&f("NT 5.1",u),t.xpsp2=t.winxp&&f("SV1",u),t.vista=t.win&&f("NT 6.0",u),t.win7=t.win&&f("NT 6.1",u),t.win8=t.win&&f("NT 6.2",u),t.ipad=f("iPad",u),t.iphone=f("iPhone",u)&&!t.ipad,t.android=f("Android",u),t.nokia=f("Nokia",u),t.webos=f("webOS",u),t.blackberry=f("BlackBerry",u),t.mwin=f("PPC",u)||f("Smartphone",u)||f("IEMobile",u)||f("Windows Phone",u),t.ios=t.ipad||t.iphone,t.symbianos=f("SymbianOS",u),t.version=null,t.win?(aMatchResult=u.match(/Windows NT ([\d|\.]+)/),null!=aMatchResult&&void 0!=aMatchResult[1]&&(t.version=aMatchResult[1])):t.mac?(aMatchResult=u.match(/Mac OS X ([\d|_]+)/),null!=aMatchResult&&void 0!=aMatchResult[1]&&(t.version=String(aMatchResult[1]).split("_").join("."))):t.linux||(t.android?(aMatchResult=u.match(/Android ([\d|\.]+)/),null!=aMatchResult&&void 0!=aMatchResult[1]&&(t.version=aMatchResult[1])):t.ios?(aMatchResult=u.match(/(iPhone )?OS ([\d|_]+)/),null!=aMatchResult&&void 0!=aMatchResult[2]&&(t.version=String(aMatchResult[2]).split("_").join("."))):t.blackberry?(aMatchResult=u.match(/Version\/([\d|\.]+)/),null==aMatchResult&&(aMatchResult=u.match(/BlackBerry\s?\d{4}\/([\d|\.]+)/)),null!=aMatchResult&&void 0!=aMatchResult[1]&&(t.version=aMatchResult[1])):t.symbianos?(aMatchResult=u.match(/SymbianOS\/(\d+.\w+)/),null!=aMatchResult&&void 0!=aMatchResult[1]&&(t.version=aMatchResult[1])):t.webos?(aMatchResult=u.match(/webOS\/([\d|\.]+)/),null!=aMatchResult&&void 0!=aMatchResult[1]&&(t.version=aMatchResult[1])):t.mwin&&(aMatchResult=u.match(/Windows CE ([\d|\.]+)/),null!=aMatchResult&&void 0!=aMatchResult[1]&&(t.version=aMatchResult[1]),!t.version&&(aMatchResult=u.match(/Windows Phone (OS )?([\d|\.]+)/))&&(t.version=aMatchResult[2]))),this.os=function(){return t},t},jindo.$Agent.prototype.flash=function(){var t=new Object,e=this._navigator.plugins,n=this._navigator.mimeTypes,i=null;if(t.installed=!1,t.version=-1,"undefined"!=typeof e&&e.length)i=e["Shockwave Flash"],i&&(t.installed=!0,i.description&&(t.version=parseFloat(i.description.match(/[0-9.]+/)[0]))),e["Shockwave Flash 2.0"]&&(t.installed=!0,t.version=2);else if("undefined"!=typeof n&&n.length)i=n["application/x-shockwave-flash"],t.installed=i&&i.enabledPlugin;else for(var o=10;o>1;o--)try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+o),t.installed=!0,t.version=o;break}catch(a){}return this.flash=function(){return t},this.info=this.flash,t},jindo.$Agent.prototype.silverlight=function(){var t=new Object,e=this._navigator.plugins,n=null;if(t.installed=!1,t.version=-1,"undefined"!=typeof e&&e.length)n=e["Silverlight Plug-In"],n&&(t.installed=!0,t.version=parseInt(n.description.split(".")[0]),"1.0.30226.2"==n.description&&(t.version=2));else try{n=new ActiveXObject("AgControl.AgControl"),t.installed=!0,n.isVersionSupported("3.0")?t.version=3:n.isVersionSupported("2.0")?t.version=2:n.isVersionSupported("1.0")&&(t.version=1)}catch(i){}return this.silverlight=function(){return t},t},jindo.$=function(t){var e=[],n=arguments,i=n.length,o=n[i-1],a=document,s=null,r=/^<([a-z]+|h[1-5])>$/i,h=/^<([a-z]+|h[1-5])(\s+[^>]+)?>/i;i>1&&"string"!=typeof o&&o.body&&(n=Array.prototype.slice.apply(n,[0,i-1]),a=o);for(var l=0;l<i;l++){if(s=n[l],"string"==typeof s)if(s=s.replace(/^\s+|\s+$/g,""),s.indexOf("<")>-1){if(r.test(s))s=a.createElement(RegExp.$1);else if(h.test(s)){for(var p={thead:"table",tbody:"table",tr:"tbody",td:"tr",dt:"dl",dd:"dl",li:"ul",legend:"fieldset",option:"select"},c=RegExp.$1.toLowerCase(),u=jindo._createEle(p[c],s,a),l=0,d=u.length;l<d;l++)e.push(u[l]);s=null}}else s=a.getElementById(s);s&&(e[e.length]=s)}return e.length>1?e:e[0]||null},jindo._createEle=function(t,e,n,i){var o="R"+(new Date).getTime()+parseInt(1e5*Math.random()),a=n.createElement("div");switch(t){case"select":case"table":case"dl":case"ul":case"fieldset":a.innerHTML="<"+t+' class="'+o+'">'+e+"</"+t+">";break;case"thead":case"tbody":a.innerHTML="<table><"+t+' class="'+o+'">'+e+"</"+t+"></table>";break;case"tr":a.innerHTML='<table><tbody><tr class="'+o+'">'+e+"</tr></tbody></table>";break;default:a.innerHTML='<div class="'+o+'">'+e+"</div>"}var s;for(s=a.firstChild;s&&s.className!=o;s=s.firstChild);return i?s:s.childNodes},jindo.$Class=function(oDef){function typeClass(){for(var t=this,a=[],superFunc=function(m,superClass,func){if("constructor"!=m&&func.toString().indexOf("$super")>-1){var funcArg=func.toString().replace(/function\s*\(([^\)]*)[\w\W]*/g,"$1").split(","),funcStr=func.toString().replace(/function[^{]*{/,"").replace(/(\w|\.?)(this\.\$super|this)/g,function(t,e,n){return e?t:n+".$super"});funcStr=funcStr.substr(0,funcStr.length-1),func=superClass[m]=eval("false||function("+funcArg.join(",")+"){"+funcStr+"}")}return function(){var t=this.$this[m],e=this.$this,n=(e[m]=func).apply(e,arguments);return e[m]=t,n}};"undefined"!=typeof t._$superClass;){t.$super=new Object,t.$super.$this=this;for(var x in t._$superClass.prototype)t._$superClass.prototype.hasOwnProperty(x)&&("undefined"==typeof this[x]&&"$init"!=x&&(this[x]=t._$superClass.prototype[x]),"constructor"!=x&&"_$superClass"!=x&&"function"==typeof t._$superClass.prototype[x]?t.$super[x]=superFunc(x,t._$superClass,t._$superClass.prototype[x]):t.$super[x]=t._$superClass.prototype[x]);"function"==typeof t.$super.$init&&(a[a.length]=t),t=t.$super}for(var i=a.length-1;i>-1;i--)a[i].$super.$init.apply(a[i].$super,arguments);"function"==typeof this.$init&&this.$init.apply(this,arguments)}if("undefined"!=typeof oDef.$static){var i=0,x;for(x in oDef)oDef.hasOwnProperty(x)&&("$static"==x||i++);for(x in oDef.$static)oDef.$static.hasOwnProperty(x)&&(typeClass[x]=oDef.$static[x]);if(!i)return oDef.$static;delete oDef.$static}return typeClass.prototype=oDef,typeClass.prototype.constructor=typeClass,typeClass.extend=jindo.$Class.extend,typeClass},jindo.$Class.extend=function(t){if("undefined"==typeof t||null===t||!t.extend)throw new Error("extend\uc2dc \uc288\ud37c \ud074\ub798\uc2a4\ub294 Class\uc5ec\uc57c \ud569\ub2c8\ub2e4.");this.prototype._$superClass=t;for(var e in t)if(t.hasOwnProperty(e)){if("prototype"==e)continue;this[e]=t[e]}return this},jindo.$$=jindo.cssquery=function(){function getElementsByClass(t,e,n){var o=new Array;null==e&&(e=document),null==n&&(n="*");var a=e.getElementsByTagName(n),s=a.length,r=new RegExp("(^|\\s)"+t+"(\\s|$)");for(i=0,j=0;i<s;i++)r.test(a[i].className)&&(o[j]=a[i],j++);return o}function _isNonStandardQueryButNotException(t){return/\[\s*(?:checked|selected|disabled)/.test(t)}function _commaRevise(t,e){return t.replace(/\,/gi,e)}var sVersion="3.0",debugOption={repeat:1},UID=1,cost=0,validUID={},bSupportByClassName=!!document.getElementsByClassName,safeHTML=!1,getUID4HTML=function(t){var e=safeHTML?t._cssquery_UID&&t._cssquery_UID[0]:t._cssquery_UID;return e&&validUID[e]==t?e:(e=UID++,t._cssquery_UID=safeHTML?[e]:e,validUID[e]=t,e)},getUID4XML=function(t){var e=t.getAttribute("_cssquery_UID"),n=safeHTML?e&&e[0]:e;return n||(n=UID++,t.setAttribute("_cssquery_UID",safeHTML?[n]:n)),n},getUID=getUID4HTML,uniqid=function(t){return(t||"")+(new Date).getTime()+parseInt(1e8*Math.random())},getChilds_dontShrink=function(t,e,n){return bSupportByClassName&&n?t.getElementsByClassName?t.getElementsByClassName(n):t.querySelectorAll?t.querySelectorAll(n):getElementsByClass(n,t,e):"*"==e?t.all||t.getElementsByTagName(e):t.getElementsByTagName(e)},clearKeys=function(){backupKeys._keys={}},oDocument_dontShrink=document,bXMLDocument=!1,backupKeys=function(t){var e=backupKeys._keys;t=t.replace(/'(\\'|[^'])*'/g,function(t){var n=uniqid("QUOT");return e[n]=t,n}),t=t.replace(/"(\\"|[^"])*"/g,function(t){var n=uniqid("QUOT");return e[n]=t,n}),t=t.replace(/\[(.*?)\]/g,function(t,n){if(0==n.indexOf("ATTR"))return t;var i="["+uniqid("ATTR")+"]";return e[i]=t,i});var n;do n=!1,t=t.replace(/\(((\\\)|[^)|^(])*)\)/g,function(t,i){if(0==i.indexOf("BRCE"))return t;var o="_"+uniqid("BRCE");return e[o]=t,n=!0,o});while(n);return t},restoreKeys=function(t,e){var n=backupKeys._keys,i,o=e?/(\[ATTR[0-9]+\])/g:/(QUOT[0-9]+|\[ATTR[0-9]+\])/g;do i=!1,t=t.replace(o,function(t){return n[t]?(i=!0,n[t]):t});while(i);return t=t.replace(/_BRCE[0-9]+/g,function(t){return n[t]?n[t]:t})},restoreString=function(sKey){var oKeys=backupKeys._keys,sOrg=oKeys[sKey];return sOrg?eval(sOrg):sKey},wrapQuot=function(t){return'"'+t.replace(/"/g,'\\"')+'"'},getStyleKey=function(t){return/^@/.test(t)?t.substr(1):null},getCSS=function(t,e){if(t.currentStyle)return"float"==e&&(e="styleFloat"),t.currentStyle[e]||t.style[e];if(window.getComputedStyle)return oDocument_dontShrink.defaultView.getComputedStyle(t,null).getPropertyValue(e.replace(/([A-Z])/g,"-$1").toLowerCase())||t.style[e];var n=jindo.$Agent().navigator().ie;return"float"==e&&n&&(e="styleFloat"),t.style[e]},oCamels={accesskey:"accessKey",cellspacing:"cellSpacing",cellpadding:"cellPadding","class":"className",colspan:"colSpan","for":"htmlFor",maxlength:"maxLength",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",valign:"vAlign"},getDefineCode=function(t){var e,n;if(bXMLDocument)e='oEl.getAttribute("'+t+'",2)';else if(n=getStyleKey(t))t="$$"+n,e='getCSS(oEl, "'+n+'")';else switch(t){case"checked":e='oEl.checked + ""';break;case"disabled":e='oEl.disabled + ""';break;case"enabled":e='!oEl.disabled + ""';break;case"readonly":e='oEl.readOnly + ""';break;case"selected":e='oEl.selected + ""';break;default:e=oCamels[t]?"oEl."+oCamels[t]:'oEl.getAttribute("'+t+'",2)'}return"_"+t+" = "+e},getReturnCode=function(t){var e=getStyleKey(t.key),n="_"+(e?"$$"+e:t.key),i=t.val?wrapQuot(t.val):"";switch(t.op){case"~=":return"("+n+' && (" " + '+n+' + " ").indexOf(" " + '+i+' + " ") > -1)';case"^=":return"("+n+" && "+n+".indexOf("+i+") == 0)";case"$=":return"("+n+" && "+n+".substr("+n+".length - "+t.val.length+") == "+i+")";case"*=":return"("+n+" && "+n+".indexOf("+i+") > -1)";case"!=":return"("+n+" != "+i+")";case"=":return"("+n+" == "+i+")"}return"("+n+")"},getNodeIndex=function(t){var e=getUID(t),n=oNodeIndexes[e]||0;if(0==n){for(var i=(t.parentNode||t._IE5_parentNode).firstChild;i;i=i.nextSibling)1==i.nodeType&&(n++,setNodeIndex(i,n));n=oNodeIndexes[e]}return n},oNodeIndexes={},setNodeIndex=function(t,e){var n=getUID(t);oNodeIndexes[n]=e},unsetNodeIndexes=function(){setTimeout(function(){oNodeIndexes={}},0)},oPseudoes_dontShrink={contains:function(t,e){return(t.innerText||t.textContent||"").indexOf(e)>-1},"last-child":function(t,e){for(t=t.nextSibling;t;t=t.nextSibling)if(1==t.nodeType)return!1;return!0},"first-child":function(t,e){for(t=t.previousSibling;t;t=t.previousSibling)if(1==t.nodeType)return!1;return!0},"only-child":function(t,e){for(var n=0,i=(t.parentNode||t._IE5_parentNode).firstChild;i;i=i.nextSibling)if(1==i.nodeType&&n++,n>1)return!1;return!!n},empty:function(t,e){return!t.firstChild},"nth-child":function(t,e,n){var i=getNodeIndex(t);return i%e==n},"nth-last-child":function(t,e,n){for(var i=(t.parentNode||t._IE5_parentNode).lastChild;i&&1!=i.nodeType;i=i.previousSibling);var o=getNodeIndex(i),a=getNodeIndex(t),s=o-a+1;return s%e==n},checked:function(t){return!!t.checked},selected:function(t){return!!t.selected},enabled:function(t){return!t.disabled},disabled:function(t){return!!t.disabled}},getExpression=function(t){var e={defines:"",returns:"true"},t=restoreKeys(t,!0),n=[],i=[],o=[],a,s,t=t.replace(/:([\w-]+)(\(([^)]*)\))?/g,function(t,n,i,a){switch(n){case"not":var s=getExpression(a),r=s.defines,h=s.returnsID+s.returnsTAG+s.returns;o.push("!(function() { "+r+" return "+h+" })()");break;case"nth-child":case"nth-last-child":a=restoreString(a),"even"==a?a="2n":"odd"==a&&(a="2n+1");var l,p,c=a.match(/([0-9]*)n([+-][0-9]+)*/);c?(l=c[1]||1,p=c[2]||0):(l=1/0,p=parseInt(a)),o.push("oPseudoes_dontShrink["+wrapQuot(n)+"](oEl, "+l+", "+p+")");break;case"first-of-type":case"last-of-type":n="first-of-type"==n?"nth-of-type":"nth-last-of-type",a=1;case"nth-of-type":case"nth-last-of-type":a=restoreString(a),"even"==a?a="2n":"odd"==a&&(a="2n+1");var l,p;/([0-9]*)n([+-][0-9]+)*/.test(a)?(l=parseInt(RegExp.$1)||1,p=parseInt(RegExp.$2)||0):(l=1/0,p=parseInt(a)),e.nth=[l,p,n];break;default:a=a?restoreString(a):"",o.push("oPseudoes_dontShrink["+wrapQuot(n)+"](oEl, "+wrapQuot(a)+")")}return""}),t=t.replace(/\[(@?[\w-]+)(([!^~$*]?=)([^\]]*))?\]/g,function(t,e,i,o,a){return e=restoreString(e),a=restoreString(a),"checked"!=e&&"disabled"!=e&&"enabled"!=e&&"readonly"!=e&&"selected"!=e||a||(o="=",a="true"),n.push({key:e,op:o,val:a}),""}),r=null,t=t.replace(/\.([\w-]+)/g,function(t,e){return n.push({key:"class",op:"~=",val:e}),r||(r=e),""}),t=t.replace(/#([\w-]+)/g,function(t,e){return bXMLDocument?n.push({key:"id",op:"=",val:e}):a=e,""});s="*"==t?"":t;for(var h={},l=0,p;p=n[l];l++){var c=p.key;h[c]||i.push(getDefineCode(c)),o.unshift(getReturnCode(p)),h[c]=!0}return i.length&&(e.defines="var "+i.join(",")+";"),o.length&&(e.returns=o.join("&&")),e.quotID=a?wrapQuot(a):"",e.quotTAG=s?wrapQuot(bXMLDocument?s:s.toUpperCase()):"",bSupportByClassName&&(e.quotCLASS=r?wrapQuot(r):""),e.returnsID=a?"oEl.id == "+e.quotID+" && ":"",e.returnsTAG=s&&"*"!=s?"oEl.tagName == "+e.quotTAG+" && ":"",e},splitToParts=function(t){var e=[],n=" ",i=t.replace(/(.*?)\s*(!?[+>~ ]|!)\s*/g,function(t,i,o){return i&&e.push({rel:n,body:i}),n=o.replace(/\s+$/g,"")||" ",""});return i&&e.push({rel:n,body:i}),e},isNth_dontShrink=function(t,e,n,i,o){for(var a=0,s=t;s;s=s[o])1!=s.nodeType||e&&e!=s.tagName||a++;return a%n==i},compileParts=function(aParts){for(var aPartExprs=[],i=0,oPart;oPart=aParts[i];i++)aPartExprs.push(getExpression(oPart.body));for(var sFunc="",sPushCode="aRet.push(oEl); if (oOptions.single) { bStop = true; }",i=aParts.length-1,oPart;oPart=aParts[i];i--){var oExpr=aPartExprs[i],sPush=(debugOption.callback?"cost++;":"")+oExpr.defines,sReturn="if (bStop) {"+(0==i?"return aRet;":"return;")+"}";sPush+="true"==oExpr.returns?(sFunc?sFunc+"(oEl);":sPushCode)+sReturn:"if ("+oExpr.returns+") {"+(sFunc?sFunc+"(oEl);":sPushCode)+sReturn+"}";var sCheckTag="oEl.nodeType != 1";oExpr.quotTAG&&(sCheckTag="oEl.tagName != "+oExpr.quotTAG);var sTmpFunc="(function(oBase"+(0==i?", oOptions) { var bStop = false; var aRet = [];":") {");switch(oExpr.nth&&(sPush="if (isNth_dontShrink(oEl, "+(oExpr.quotTAG?oExpr.quotTAG:"false")+","+oExpr.nth[0]+","+oExpr.nth[1]+',"'+("nth-of-type"==oExpr.nth[2]?"previousSibling":"nextSibling")+'")) {'+sPush+"}"),oPart.rel){case" ":sTmpFunc+=oExpr.quotID?"var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oCandi = oEl;for (; oCandi; oCandi = (oCandi.parentNode || oCandi._IE5_parentNode)) {if (oCandi == oBase) break;}if (!oCandi || "+sCheckTag+") return aRet;"+sPush:"var aCandi = getChilds_dontShrink(oBase, "+(oExpr.quotTAG||'"*"')+", "+(oExpr.quotCLASS||"null")+");for (var i = 0, oEl; oEl = aCandi[i]; i++) {"+(oExpr.quotCLASS?"if ("+sCheckTag+") continue;":"")+sPush+"}";break;case">":sTmpFunc+=oExpr.quotID?"var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");if ((oEl.parentNode || oEl._IE5_parentNode) != oBase || "+sCheckTag+") return aRet;"+sPush:"for (var oEl = oBase.firstChild; oEl; oEl = oEl.nextSibling) {if ("+sCheckTag+") { continue; }"+sPush+"}";break;case"+":sTmpFunc+=oExpr.quotID?"var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oPrev;for (oPrev = oEl.previousSibling; oPrev; oPrev = oPrev.previousSibling) { if (oPrev.nodeType == 1) break; }if (!oPrev || oPrev != oBase || "+sCheckTag+") return aRet;"+sPush:"for (var oEl = oBase.nextSibling; oEl; oEl = oEl.nextSibling) { if (oEl.nodeType == 1) break; }if (!oEl || "+sCheckTag+") { return aRet; }"+sPush;break;case"~":sTmpFunc+=oExpr.quotID?"var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oCandi = oEl;for (; oCandi; oCandi = oCandi.previousSibling) { if (oCandi == oBase) break; }if (!oCandi || "+sCheckTag+") return aRet;"+sPush:"for (var oEl = oBase.nextSibling; oEl; oEl = oEl.nextSibling) {if ("+sCheckTag+") { continue; }if (!markElement_dontShrink(oEl, "+i+")) { break; }"+sPush+"}";break;case"!":sTmpFunc+=oExpr.quotID?"var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");for (; oBase; oBase = (oBase.parentNode || oBase._IE5_parentNode)) { if (oBase == oEl) break; }if (!oBase || "+sCheckTag+") return aRet;"+sPush:"for (var oEl = (oBase.parentNode || oBase._IE5_parentNode); oEl; oEl = (oEl.parentNode || oEl._IE5_parentNode)) {if ("+sCheckTag+") { continue; }"+sPush+"}";break;case"!>":sTmpFunc+=oExpr.quotID?"var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oRel = (oBase.parentNode || oBase._IE5_parentNode);if (!oRel || oEl != oRel || ("+sCheckTag+")) return aRet;"+sPush:"var oEl = (oBase.parentNode || oBase._IE5_parentNode);if (!oEl || "+sCheckTag+") { return aRet; }"+sPush;break;case"!+":sTmpFunc+=oExpr.quotID?"var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oRel;for (oRel = oBase.previousSibling; oRel; oRel = oRel.previousSibling) { if (oRel.nodeType == 1) break; }if (!oRel || oEl != oRel || ("+sCheckTag+")) return aRet;"+sPush:"for (oEl = oBase.previousSibling; oEl; oEl = oEl.previousSibling) { if (oEl.nodeType == 1) break; }if (!oEl || "+sCheckTag+") { return aRet; }"+sPush;break;case"!~":sTmpFunc+=oExpr.quotID?"var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oRel;for (oRel = oBase.previousSibling; oRel; oRel = oRel.previousSibling) { if (oRel.nodeType != 1) { continue; }if (oRel == oEl) { break; }}if (!oRel || ("+sCheckTag+")) return aRet;"+sPush:"for (oEl = oBase.previousSibling; oEl; oEl = oEl.previousSibling) {if ("+sCheckTag+") { continue; }if (!markElement_dontShrink(oEl, "+i+")) { break; }"+sPush+"}"}sTmpFunc+=(0==i?"return aRet;":"")+"})",sFunc=sTmpFunc}return eval("var fpCompiled = "+sFunc+";"),fpCompiled},parseQuery=function(t){var e=t,n=arguments.callee,i=n._cache[e];if(!i){t=backupKeys(t);var o=splitToParts(t);i=n._cache[e]=compileParts(o),i.depth=o.length}return i};parseQuery._cache={};var parseTestQuery=function(sQuery){for(var fpSelf=arguments.callee,aSplitQuery=backupKeys(sQuery).split(/\s*,\s*/),aResult=[],nLen=aSplitQuery.length,aFunc=[],i=0;i<nLen;i++)aFunc.push(function(sQuery){var sCacheKey=sQuery,fpFunction=fpSelf._cache[sCacheKey];if(!fpFunction){sQuery=backupKeys(sQuery);var oExpr=getExpression(sQuery);eval("fpFunction = function(oEl) { "+oExpr.defines+"return ("+oExpr.returnsID+oExpr.returnsTAG+oExpr.returns+"); };")}return fpFunction}(restoreKeys(aSplitQuery[i])));return aFunc};parseTestQuery._cache={};var distinct=function(t){for(var e=[],n={},i=0,o;o=t[i];i++){var a=getUID(o);n[a]||(e.push(o),n[a]=!0)}return e},markElement_dontShrink=function(t,e){var n=getUID(t);return!cssquery._marked[e][n]&&(cssquery._marked[e][n]=!0,!0)},oResultCache=null,bUseResultCache=!1,bExtremeMode=!1,old_cssquery=function(t,e,n){if("object"==typeof t){var i={};for(var o in t)t.hasOwnProperty(o)&&(i[o]=arguments.callee(t[o],e,n));return i}cost=0;for(var a=(new Date).getTime(),s,r=0,h=debugOption.repeat;r<h;r++)s=function(t,e,n){if(n?n.oneTimeOffCache||(n.oneTimeOffCache=!1):n={oneTimeOffCache:!1},cssquery.safeHTML(n.oneTimeOffCache),e||(e=document),oDocument_dontShrink=e.ownerDocument||e.document||e,/\bMSIE\s([0-9]+(\.[0-9]+)*);/.test(navigator.userAgent)&&parseFloat(RegExp.$1)<6){try{oDocument_dontShrink.location}catch(i){oDocument_dontShrink=document}oDocument_dontShrink.firstChild=oDocument_dontShrink.getElementsByTagName("html")[0],oDocument_dontShrink.firstChild._IE5_parentNode=oDocument_dontShrink}bXMLDocument="undefined"!=typeof XMLDocument?oDocument_dontShrink.constructor===XMLDocument:!oDocument_dontShrink.location,getUID=bXMLDocument?getUID4XML:getUID4HTML,clearKeys();for(var o=backupKeys(t).split(/\s*,\s*/),a=[],s=o.length,r=0;r<s;r++)o[r]=restoreKeys(o[r]);for(var r=0;r<s;r++){var h=o[r],l=null,p=h+(n.single?"_single":""),c=bUseResultCache?oResultCache[p]:null;if(c)for(var u=0,d;d=c[u];u++)if(d.parent==e){l=d.result;break}if(!l){var f=parseQuery(h);cssquery._marked=[];for(var u=0,m=f.depth;u<m;u++)cssquery._marked.push({});l=distinct(f(e,n)),bUseResultCache&&!n.oneTimeOffCache&&(oResultCache[p]instanceof Array||(oResultCache[p]=[]),oResultCache[p].push({parent:e,result:l}))}a=a.concat(l)}return unsetNodeIndexes(),a}(t,e,n);return a=(new Date).getTime()-a,debugOption.callback&&debugOption.callback(t,cost,a),s},cssquery;if(document.querySelectorAll){var protoSlice=Array.prototype.slice,_toArray=function(t){return protoSlice.apply(t)};try{protoSlice.apply(document.documentElement.childNodes)}catch(e){_toArray=function(t){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}}cssquery=function(t,e,n){e=e||document;try{if(_isNonStandardQueryButNotException(t))throw Error("None Standard Query");var i=t,o=e;if(9!=e.nodeType){if(!bExtremeMode)throw Error("Parent Element has not ID.or It is not document.or None Extreme Mode.");e.id||(e.id="p"+(new Date).getTime()+parseInt(1e8*Math.random())),i=_commaRevise("#"+e.id+" "+t,", #"+e.id),o=e.ownerDocument||e.document||document}return n&&n.single?[o.querySelector(i)]:_toArray(o.querySelectorAll(i))}catch(a){return old_cssquery(t,e,n)}}}else cssquery=old_cssquery;return cssquery.test=function(t,e){clearKeys();for(var n=parseTestQuery(e),i=0,o=n.length;i<o;i++)if(n[i](t))return!0;return!1},cssquery.useCache=function(t){return"undefined"!=typeof t&&(bUseResultCache=t,cssquery.clearCache()),bUseResultCache},cssquery.clearCache=function(){oResultCache={}},cssquery.getSingle=function(t,e,n){return cssquery(t,e,{single:!0,oneTimeOffCache:!!n&&!!n.oneTimeOffCache})[0]||null},cssquery.xpath=function(t,e){var t=t.replace(/\/(\w+)(\[([0-9]+)\])?/g,function(t,e,n,i){return i=i||"1",">"+e+":nth-of-type("+i+")"});return old_cssquery(t,e)},cssquery.debug=function(t,e){debugOption.callback=t,debugOption.repeat=e||1},cssquery.safeHTML=function(t){var e=jindo.$Agent().navigator().ie;return arguments.length>0&&(safeHTML=t&&e),safeHTML||!e},cssquery.version=sVersion,cssquery.release=function(){var t=jindo.$Agent().navigator().ie;t&&(delete validUID,validUID={},bUseResultCache&&cssquery.clearCache())},cssquery._getCacheInfo=function(){return{uidCache:validUID,eleCache:oResultCache}},cssquery._resetUID=function(){UID=0},cssquery.extreme=function(t){0==arguments.length&&(t=!0),bExtremeMode=t},cssquery}(),jindo.$A=function(t){var e=arguments.callee;if("undefined"!=typeof t&&null!=t||(t=[]),t instanceof e)return t;if(!(this instanceof e))return new e(t);if(this._array=[],t.constructor!=String){this._array=[];for(var n=0;n<t.length;n++)this._array[this._array.length]=t[n]}},jindo.$A.prototype.toString=function(){return this._array.toString()},jindo.$A.prototype.get=function(t){return this._array[t]},jindo.$A.prototype.length=function(t,e){if("number"==typeof t){var n=this._array.length;if(this._array.length=t,"undefined"!=typeof e)for(var i=n;i<t;i++)this._array[i]=e;return this}return this._array.length},jindo.$A.prototype.has=function(t){return this.indexOf(t)>-1},jindo.$A.prototype.indexOf=function(t){return"undefined"!=typeof this._array.indexOf?jindo.$A.prototype.indexOf=function(t){return this._array.indexOf(t)}:jindo.$A.prototype.indexOf=function(t){for(var e=0;e<this._array.length;e++)if(this._array[e]==t)return e;return-1},this.indexOf(t)},jindo.$A.prototype.$value=function(){return this._array},jindo.$A.prototype.push=function(t){return this._array.push.apply(this._array,Array.prototype.slice.apply(arguments))},jindo.$A.prototype.pop=function(){return this._array.pop()},jindo.$A.prototype.shift=function(){return this._array.shift()},jindo.$A.prototype.unshift=function(t){return this._array.unshift.apply(this._array,Array.prototype.slice.apply(arguments)),this._array.length},jindo.$A.prototype.forEach=function(t,e){return"function"==typeof this._array.forEach?jindo.$A.prototype.forEach=function(t,e){function n(n,i,o){try{t.call(e,n,i,o)}catch(s){if(!(s instanceof a))throw s}}var i=this._array,o=this.constructor.Break,a=this.constructor.Continue;try{this._array.forEach(n)}catch(s){if(!(s instanceof o))throw s}return this}:jindo.$A.prototype.forEach=function(t,e){function n(n,i,o){try{t.call(e,n,i,o)}catch(s){if(!(s instanceof a))throw s}}for(var i=this._array,o=this.constructor.Break,a=this.constructor.Continue,s=0;s<i.length;s++)try{n(i[s],s,i)}catch(r){if(r instanceof o)break;throw r}return this},this.forEach(t,e)},jindo.$A.prototype.slice=function(t,e){var n=this._array.slice.call(this._array,t,e);return jindo.$A(n)},jindo.$A.prototype.splice=function(t,e){var n=this._array.splice.apply(this._array,Array.prototype.slice.apply(arguments));return jindo.$A(n)},jindo.$A.prototype.shuffle=function(){return this._array.sort(function(t,e){return Math.random()>Math.random()?1:-1}),this},jindo.$A.prototype.reverse=function(){return this._array.reverse(),this},jindo.$A.prototype.empty=function(){return this.length(0)},jindo.$A.Break=function(){if(!(this instanceof arguments.callee))throw new arguments.callee},jindo.$A.Continue=function(){if(!(this instanceof arguments.callee))throw new arguments.callee},jindo.$A.prototype.map=function(t,e){return"function"==typeof this._array.map?jindo.$A.prototype.map=function(t,e){function n(n,i,o){try{return t.call(e,n,i,o)}catch(s){if(s instanceof a)return n;throw s}}var i=this._array,o=this.constructor.Break,a=this.constructor.Continue;try{this._array=this._array.map(n)}catch(s){if(!(s instanceof o))throw s}return this}:jindo.$A.prototype.map=function(t,e){function n(n,i,o){try{return t.call(e,n,i,o)}catch(a){if(a instanceof s)return n;throw a}}for(var i=this._array,o=[],a=this.constructor.Break,s=this.constructor.Continue,r=0;r<this._array.length;r++)try{o[r]=n(i[r],r,i)}catch(h){if(h instanceof a)return this;throw h}return this._array=o,this},this.map(t,e)},jindo.$A.prototype.filter=function(t,e){return"undefined"!=typeof this._array.filter?jindo.$A.prototype.filter=function(t,e){return jindo.$A(this._array.filter(t,e))}:jindo.$A.prototype.filter=function(t,e){var n=[];return this.forEach(function(i,o,a){t.call(e,i,o,a)===!0&&(n[n.length]=i)}),jindo.$A(n)},this.filter(t,e)},jindo.$A.prototype.every=function(t,e){return"undefined"!=typeof this._array.every?jindo.$A.prototype.every=function(t,e){return this._array.every(t,e)}:jindo.$A.prototype.every=function(t,e){var n=!0;return this.forEach(function(i,o,a){t.call(e,i,o,a)===!1&&(n=!1,jindo.$A.Break())}),n},this.every(t,e)},jindo.$A.prototype.some=function(t,e){return"undefined"!=typeof this._array.some?jindo.$A.prototype.some=function(t,e){return this._array.some(t,e)}:jindo.$A.prototype.some=function(t,e){var n=!1;return this.forEach(function(i,o,a){t.call(e,i,o,a)===!0&&(n=!0,jindo.$A.Break())}),n},this.some(t,e)},jindo.$A.prototype.refuse=function(t){var e=jindo.$A(Array.prototype.slice.apply(arguments));return this.filter(function(t,n){return!e.has(t)})},jindo.$A.prototype.unique=function(){var t=this._array,e=[],n=t.length,i,o;for(i=0;i<n;i++){for(o=0;o<e.length&&t[i]!=e[o];o++);o>=e.length&&(e[o]=t[i])}return this._array=e,this},jindo.$Ajax=function(t,e){function n(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(ActiveXObject){try{return new ActiveXObject("MSXML2.XMLHTTP")}catch(t){return new ActiveXObject("Microsoft.XMLHTTP")}return null}}var i=arguments.callee;if(!(this instanceof i))return new i(t,e);var o=location.toString(),a="";try{a=o.match(/^https?:\/\/([a-z0-9_\-\.]+)/i)[1]}catch(s){}this._status=0,this._url=t,this._options=new Object,this._headers=new Object,this._options={type:"xhr",method:"post",proxy:"",timeout:0,onload:function(t){},onerror:null,ontimeout:function(t){},jsonp_charset:"utf-8",callbackid:"",callbackname:"",sendheader:!0,async:!0,decode:!0,postBody:!1},this.option(e),jindo.$Ajax.CONFIG&&this.option(jindo.$Ajax.CONFIG);var r=this._options;switch(r.type=r.type.toLowerCase(),r.method=r.method.toLowerCase(),"undefined"==typeof window.__jindo2_callback&&(window.__jindo2_callback=new Array),r.type){case"put":case"delete":case"get":case"post":r.method=r.type,r.type="xhr";case"xhr":this._request=n();break;case"flash":if(!jindo.$Ajax.SWFRequest)throw Error("Require jindo.$Ajax.SWFRequest");this._request=new jindo.$Ajax.SWFRequest(jindo.$Fn(this.option,this).bind());break;case"jsonp":if(!jindo.$Ajax.JSONPRequest)throw Error("Require jindo.$Ajax.JSONPRequest");r.method="get",this._request=new jindo.$Ajax.JSONPRequest(jindo.$Fn(this.option,this).bind());break;case"iframe":if(!jindo.$Ajax.FrameRequest)throw Error("Require jindo.$Ajax.FrameRequest");this._request=new jindo.$Ajax.FrameRequest(jindo.$Fn(this.option,this).bind())}},jindo.$Ajax.prototype._onload=function(t){return t?function(){var t=4==this._request.readyState&&200==this._request.status,e;if(4==this._request.readyState)try{200!=this._request.status&&"function"==typeof this._options.onerror?0==!this._request.status&&this._options.onerror(jindo.$Ajax.Response(this._request)):e=this._options.onload(jindo.$Ajax.Response(this._request))}finally{if("function"==typeof this._oncompleted&&this._oncompleted(t,e),
"jsonp"!=this._options.type){this.abort();try{delete this._request.onload}catch(n){this._request.onload=void 0}}delete this._request.onreadystatechange}}:function(){var t=4==this._request.readyState&&200==this._request.status,e;if(4==this._request.readyState)try{200!=this._request.status&&"function"==typeof this._options.onerror?this._options.onerror(jindo.$Ajax.Response(this._request)):e=this._options.onload(jindo.$Ajax.Response(this._request))}finally{this._status--,"function"==typeof this._oncompleted&&this._oncompleted(t,e)}}}(jindo.$Agent().navigator().ie),jindo.$Ajax.prototype.request=function(t){this._status++;var e=this,n=this._request,i=this._options,o,a,s=[],o="",r=null,h=this._url;if(this._is_abort=!1,i.postBody&&"XHR"==i.type.toUpperCase()&&"GET"!=i.method.toUpperCase())o="string"==typeof t?t:jindo.$Json(t).toString();else if("undefined"!=typeof t&&t){for(var l in t)t.hasOwnProperty(l)&&(a=t[l],"function"==typeof a&&(a=a()),a instanceof Array||a instanceof jindo.$A?jindo.$A(a).forEach(function(t,e,n){s[s.length]=l+"="+encodeURIComponent(t)}):s[s.length]=l+"="+encodeURIComponent(a));o=s.join("&")}else o=null;if(o&&"XHR"==i.type.toUpperCase()&&"GET"==i.method.toUpperCase()&&(h+=h.indexOf("?")==-1?"?":"&",h+=o,o=null),n.open(i.method.toUpperCase(),h,i.async),"XHR"==i.type.toUpperCase()&&"GET"==i.method.toUpperCase()&&/MSIE/.test(window.navigator.userAgent)&&n.setRequestHeader("If-Modified-Since","Thu, 1 Jan 1970 00:00:00 GMT"),i.sendheader){n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),n.setRequestHeader("charset","utf-8");for(var p in this._headers)if(this._headers.hasOwnProperty(p)){if("function"==typeof this._headers[p])continue;n.setRequestHeader(p,String(this._headers[p]))}}var c=navigator.userAgent;if(!n.addEventListener||c.indexOf("Opera")>-1||c.indexOf("MSIE")>-1)if("undefined"!=typeof n.onload)n.onload=function(t){4!=n.readyState||e._is_abort||(clearTimeout(r),e._onload(t))};else if(6==window.navigator.userAgent.match(/(?:MSIE) ([0-9.]+)/)[1]&&i.async){var u=function(t){4!=n.readyState||e._is_abort||(r&&clearTimeout(r),e._onload(t),clearInterval(e._interval))};this._interval=setInterval(u,300)}else n.onreadystatechange=function(t){4==n.readyState&&(clearTimeout(r),e._onload(t))};else this._loadFunc&&n.removeEventListener("load",this._loadFunc,!1),this._loadFunc=function(t){clearTimeout(r),e._onload(t)},n.addEventListener("load",this._loadFunc,!1);return i.timeout>0&&(r=setTimeout(function(){e._is_abort=!0,e._interval&&clearInterval(e._interval);try{n.abort()}catch(t){}i.ontimeout(n),"function"==typeof e._oncompleted&&e._oncompleted(!1)},1e3*i.timeout),this._interval=this._interval||r),this._test_url=h,n.send(o),this},jindo.$Ajax.prototype.isIdle=function(){return 0==this._status},jindo.$Ajax.prototype.abort=function(){try{this._interval&&clearInterval(this._interval),this._is_abort=!0,this._request.abort()}finally{this._status--}return this},jindo.$Ajax.prototype.option=function(t,e){if("undefined"==typeof t)return"";if("string"==typeof t)return"undefined"==typeof e?this._options[t]:(this._options[t]=e,this);try{for(var n in t)t.hasOwnProperty(n)&&(this._options[n]=t[n])}catch(i){}return this},jindo.$Ajax.prototype.header=function(t,e){if("undefined"==typeof t)return"";if("string"==typeof t)return"undefined"==typeof e?this._headers[t]:(this._headers[t]=e,this);try{for(var n in t)t.hasOwnProperty(n)&&(this._headers[n]=t[n])}catch(i){}return this},jindo.$Ajax.Response=function(t){return this===jindo.$Ajax?new jindo.$Ajax.Response(t):void(this._response=t)},jindo.$Ajax.Response.prototype.xml=function(){return this._response.responseXML},jindo.$Ajax.Response.prototype.text=function(){return this._response.responseText},jindo.$Ajax.Response.prototype.status=function(){return this._response.status},jindo.$Ajax.Response.prototype.readyState=function(){return this._response.readyState},jindo.$Ajax.Response.prototype.json=function(){if(this._response.responseJSON)return this._response.responseJSON;if(this._response.responseText)try{return eval("("+this._response.responseText+")")}catch(e){return{}}return{}},jindo.$Ajax.Response.prototype.header=function(t){return"string"==typeof t?this._response.getResponseHeader(t):this._response.getAllResponseHeaders()},jindo.$Ajax.RequestBase=jindo.$Class({_respHeaderString:"",callbackid:"",callbackname:"",responseXML:null,responseJSON:null,responseText:"",status:404,readyState:0,$init:function(t){},onload:function(){},abort:function(){},open:function(){},send:function(){},setRequestHeader:function(t,e){this._headers[t]=e},getResponseHeader:function(t){return this._respHeaders[t]||""},getAllResponseHeaders:function(){return this._respHeaderString},_getCallbackInfo:function(){var t="";if(""!=this.option("callbackid")){var e=0;do t="_"+this.option("callbackid")+"_"+e,e++;while(window.__jindo2_callback[t])}else do t="_"+Math.floor(1e4*Math.random());while(window.__jindo2_callback[t]);return""==this.option("callbackname")&&this.option("callbackname","_callback"),{callbackname:this.option("callbackname"),id:t,name:"window.__jindo2_callback."+t}}}),jindo.$Ajax.JSONPRequest=jindo.$Class({_headers:{},_respHeaders:{},_script:null,_onerror:null,$init:function(t){this.option=t},_callback:function(t){this._onerror&&(clearTimeout(this._onerror),this._onerror=null);var e=this;this.responseJSON=t,this.onload(this),setTimeout(function(){e.abort()},10)},abort:function(){if(this._script)try{this._script.parentNode.removeChild(this._script)}catch(t){}},open:function(t,e){this.responseJSON=null,this._url=e},send:function(t){var e=this,n=this._getCallbackInfo(),i=document.getElementsByTagName("head")[0];this._script=jindo.$("<script>"),this._script.type="text/javascript",this._script.charset=this.option("jsonp_charset"),i?i.appendChild(this._script):document.body&&document.body.appendChild(this._script),window.__jindo2_callback[n.id]=function(t){try{e.readyState=4,e.status=200,e._callback(t)}finally{delete window.__jindo2_callback[n.id]}};var o=jindo.$Agent(navigator);o.navigator().ie||o.navigator().opera?this._script.onreadystatechange=function(){"loaded"==this.readyState&&(e.responseJSON||(e.readyState=4,e.status=500,e._onerror=setTimeout(function(){e._callback(null)},200)),this.onreadystatechange=null)}:(this._script.onload=function(){e.responseJSON||(e.readyState=4,e.status=500,e._onerror=setTimeout(function(){e._callback(null)},200)),this.onload=null,this.onerror=null},this._script.onerror=function(){e.responseJSON||(e.readyState=4,e.status=404,e._onerror=setTimeout(function(){e._callback(null)},200)),this.onerror=null,this.onload=null});var a="&";this._url.indexOf("?")==-1&&(a="?"),t=t?"&"+t:"",this._test_url=this._url+a+n.callbackname+"="+n.name+t,this._script.src=this._url+a+n.callbackname+"="+n.name+t}}).extend(jindo.$Ajax.RequestBase),jindo.$Ajax.SWFRequest=jindo.$Class({$init:function(t){this.option=t},_headers:{},_respHeaders:{},_getFlashObj:function(){var t=jindo.$Agent(window.navigator).navigator(),e;return e=t.ie&&9==t.version?document.getElementById(jindo.$Ajax.SWFRequest._tmpId):window.document[jindo.$Ajax.SWFRequest._tmpId],(this._getFlashObj=function(){return e})()},_callback:function(t,e,n){if(this.readyState=4,"number"==(typeof t).toLowerCase()?this.status=t:1==t&&(this.status=200),200==this.status){if("string"==typeof e)try{this.responseText=this.option("decode")?decodeURIComponent(e):e,this.responseText&&""!=this.responseText||(this.responseText=e)}catch(i){"URIError"==i.name&&(this.responseText=e,this.responseText&&""!=this.responseText||(this.responseText=e))}"object"==typeof n&&(this._respHeaders=n)}this.onload(this)},open:function(t,e){var n=/https?:\/\/([a-z0-9_\-\.]+)/i;this._url=e,this._method=t},send:function(t){function e(t){switch(typeof t){case"string":return'"'+t.replace(/\"/g,'\\"')+'"';case"number":return t;case"object":var n="",i=[];if(t instanceof Array){for(var o=0;o<t.length;o++)i[o]=e(t[o]);n="["+i.join(",")+"]"}else{for(var a in t)t.hasOwnProperty(a)&&(i[i.length]=e(a)+":"+e(t[a]));n="{"+i.join(",")+"}"}return n;default:return'""'}}this.responseXML=!1,this.responseText="";var n=this,i={},o=this._getCallbackInfo(),a=this._getFlashObj();t=(t||"").split("&");for(var s=0;s<t.length;s++)pos=t[s].indexOf("="),key=t[s].substring(0,pos),val=t[s].substring(pos+1),i[key]=decodeURIComponent(val);window.__jindo2_callback[o.id]=function(t,e){try{n._callback(t,e)}finally{delete window.__jindo2_callback[o.id]}};var r={url:this._url,type:this._method,data:i,charset:"UTF-8",callback:o.name,header_json:this._headers};a.requestViaFlash(e(r))}}).extend(jindo.$Ajax.RequestBase),jindo.$Ajax.SWFRequest.write=function(t){"undefined"==typeof t&&(t="./ajax.swf"),jindo.$Ajax.SWFRequest._tmpId="tmpSwf"+(new Date).getMilliseconds()+Math.floor(1e5*Math.random());var e="jindo.$Ajax.SWFRequest.loaded";jindo.$Ajax._checkFlashLoad(),document.write('<div style="position:absolute;top:-1000px;left:-1000px"><object id="'+jindo.$Ajax.SWFRequest._tmpId+'" width="1" height="1" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"><param name="movie" value="'+t+'"><param name = "FlashVars" value = "activeCallback='+e+'" /><param name = "allowScriptAccess" value = "always" /><embed name="'+jindo.$Ajax.SWFRequest._tmpId+'" src="'+t+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" width="1" height="1" allowScriptAccess="always" swLiveConnect="true" FlashVars="activeCallback='+e+'"></embed></object></div>')},jindo.$Ajax._checkFlashLoad=function(){jindo.$Ajax._checkFlashKey=setTimeout(function(){alert("Check your flash file!. Unload flash on a page.")},5e3),jindo.$Ajax._checkFlashLoad=function(){}},jindo.$Ajax.SWFRequest.activeFlash=!1,jindo.$Ajax.SWFRequest.loaded=function(){clearTimeout(jindo.$Ajax._checkFlashKey),jindo.$Ajax.SWFRequest.activeFlash=!0},jindo.$Ajax.FrameRequest=jindo.$Class({_headers:{},_respHeaders:{},_frame:null,_domain:"",$init:function(t){this.option=t},_callback:function(t,e,n){var i=this;this.readyState=4,this.status=200,this.responseText=e,this._respHeaderString=n,n.replace(/^([\w\-]+)\s*:\s*(.+)$/m,function(t,e,n){i._respHeaders[e]=n}),this.onload(this),setTimeout(function(){i.abort()},10)},abort:function(){if(this._frame)try{this._frame.parentNode.removeChild(this._frame)}catch(t){}},open:function(t,e){var n=/https?:\/\/([a-z0-9_\-\.]+)/i,i=document.location.toString().match(n);this._method=t,this._url=e,this._remote=String(e).match(/(https?:\/\/[a-z0-9_\-\.]+)(:[0-9]+)?/i)[0],this._frame=null,this._domain=i[1]!=document.domain?document.domain:""},send:function(t){this.responseXML="",this.responseText="";var e=this,n=/https?:\/\/([a-z0-9_\-\.]+)/i,i=this._getCallbackInfo(),o,a=[];a.push(this._remote+"/ajax_remote_callback.html?method="+this._method);var s=new Array;window.__jindo2_callback[i.id]=function(t,n,o){try{e._callback(t,n,o)}finally{delete window.__jindo2_callback[i.id]}};for(var r in this._headers)this._headers.hasOwnProperty(r)&&(s[s.length]="'"+r+"':'"+this._headers[r]+"'");s="{"+s.join(",")+"}",a.push("&id="+i.id),a.push("&header="+encodeURIComponent(s)),a.push("&proxy="+encodeURIComponent(this.option("proxy"))),a.push("&domain="+this._domain),a.push("&url="+encodeURIComponent(this._url.replace(n,""))),a.push("#"+encodeURIComponent(t));var h=this._frame=jindo.$("<iframe>");h.style.position="absolute",h.style.visibility="hidden",h.style.width="1px",h.style.height="1px";var l=document.body||document.documentElement;l.firstChild?l.insertBefore(h,l.firstChild):l.appendChild(h),h.src=a.join("")}}).extend(jindo.$Ajax.RequestBase),jindo.$Ajax.Queue=function(t){var e=arguments.callee;return this instanceof e?(this._options={async:!1,useResultAsParam:!1,stopOnFailure:!1},this.option(t),void(this._queue=[])):new e(t)},jindo.$Ajax.Queue.prototype.option=function(t,e){if("undefined"==typeof t)return"";if("string"==typeof t)return"undefined"==typeof e?this._options[t]:(this._options[t]=e,this);try{for(var n in t)t.hasOwnProperty(n)&&(this._options[n]=t[n])}catch(i){}return this},jindo.$Ajax.Queue.prototype.add=function(t,e){this._queue.push({obj:t,param:e})},jindo.$Ajax.Queue.prototype.request=function(){this.option("async")?this._requestAsync():this._requestSync(0)},jindo.$Ajax.Queue.prototype._requestSync=function(t,e){var n=this;this._queue.length>t+1&&(this._queue[t].obj._oncompleted=function(e,i){n.option("stopOnFailure")&&!e||n._requestSync(t+1,i)});var i=this._queue[t].param||{};if(this.option("useResultAsParam")&&e)try{for(var o in e)"undefined"==typeof i[o]&&e.hasOwnProperty(o)&&(i[o]=e[o])}catch(a){}this._queue[t].obj.request(i)},jindo.$Ajax.Queue.prototype._requestAsync=function(){for(var t=0;t<this._queue.length;t++)this._queue[t].obj.request(this._queue[t].param)},jindo.$H=function(t){var e=arguments.callee;if("undefined"==typeof t&&(t=new Object),t instanceof e)return t;if(!(this instanceof e))return new e(t);this._table={};for(var n in t)if(t.hasOwnProperty(n)){if(this._table[n]==t[n])continue;this._table[n]=t[n]}},jindo.$H.prototype.$value=function(){return this._table},jindo.$H.prototype.$=function(t,e){return"undefined"==typeof e?this._table[t]:(this._table[t]=e,this)},jindo.$H.prototype.length=function(){var t=0;for(var e in this._table)if(this._table.hasOwnProperty(e)){if("undeifned"!=typeof Object.prototype[e]&&Object.prototype[e]===this._table[e])continue;t++}return t},jindo.$H.prototype.forEach=function(t,e){var n=this._table,i=this.constructor;for(var o in n)if(n.hasOwnProperty(o)){if(!n.propertyIsEnumerable(o))continue;try{t.call(e,n[o],o,n)}catch(a){if(a instanceof i.Break)break;if(a instanceof i.Continue)continue;throw a}}return this},jindo.$H.prototype.filter=function(t,e){var n=jindo.$H();return this.forEach(function(i,o,a){t.call(e,i,o,a)===!0&&n.add(o,i)}),n},jindo.$H.prototype.map=function(t,e){var n=this._table;return this.forEach(function(i,o,a){n[o]=t.call(e,i,o,a)}),this},jindo.$H.prototype.add=function(t,e){return this._table[t]=e,this},jindo.$H.prototype.remove=function(t){if("undefined"==typeof this._table[t])return null;var e=this._table[t];return delete this._table[t],e},jindo.$H.prototype.search=function(t){var e=!1;return this.forEach(function(n,i,o){n===t&&(e=i,jindo.$H.Break())}),e},jindo.$H.prototype.hasKey=function(t){var e=!1;return"undefined"!=typeof this._table[t]},jindo.$H.prototype.hasValue=function(t){return this.search(t)!==!1},jindo.$H.prototype.sort=function(){var t=new Object,e=this.values(),n=!1;e.sort();for(var i=0;i<e.length;i++)n=this.search(e[i]),t[n]=e[i],delete this._table[n];return this._table=t,this},jindo.$H.prototype.ksort=function(){var t=new Object,e=this.keys();e.sort();for(var n=0;n<e.length;n++)t[e[n]]=this._table[e[n]];return this._table=t,this},jindo.$H.prototype.keys=function(){var t=new Array;for(var e in this._table)this._table.hasOwnProperty(e)&&t.push(e);return t},jindo.$H.prototype.values=function(){var t=[];for(var e in this._table)this._table.hasOwnProperty(e)&&(t[t.length]=this._table[e]);return t},jindo.$H.prototype.toQueryString=function(){var t=[],e=null,n=0;for(var o in this._table)if(this._table.hasOwnProperty(o))if("object"==typeof(e=this._table[o])&&e.constructor==Array)for(i=0;i<e.length;i++)t[t.length]=encodeURIComponent(o)+"[]="+encodeURIComponent(e[i]+"");else t[t.length]=encodeURIComponent(o)+"="+encodeURIComponent(this._table[o]+"");return t.join("&")},jindo.$H.prototype.empty=function(){for(var t=this.keys(),e=0;e<t.length;e++)delete this._table[t[e]];return this},jindo.$H.Break=function(){if(!(this instanceof arguments.callee))throw new arguments.callee},jindo.$H.Continue=function(){if(!(this instanceof arguments.callee))throw new arguments.callee},jindo.$Json=function(t){var e=arguments.callee;return"undefined"==typeof t&&(t=new Object),t instanceof e?t:this instanceof e?void("string"==typeof t?this._object=jindo.$Json._oldMakeJSON(t):this._object=t):new e(t)},jindo.$Json._oldMakeJSON=function(sObject){try{sObject=/^(?:\s*)[\{\[]/.test(sObject)?eval("("+sObject+")"):sObject}catch(e){sObject={}}return sObject},jindo.$Json.fromXML=function(t){var e=new Object,n=/\s*<(\/?[\w:\-]+)((?:\s+[\w:\-]+\s*=\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'))*)\s*((?:\/>)|(?:><\/\1>|\s*))|\s*<!\[CDATA\[([\w\W]*?)\]\]>\s*|\s*>?([^<]*)/gi,i=/^[0-9]+(?:\.[0-9]+)?$/,o={"&amp;":"&","&nbsp;":" ","&quot;":'"',"&lt;":"<","&gt;":">"},a={tags:["/"],stack:[e]},s=function(t){return"undefined"==typeof t?"":t.replace(/&[a-z]+;/g,function(t){return"string"==typeof o[t]?o[t]:t})},r=function(t,e){t.replace(/([\w\:\-]+)\s*=\s*(?:"((?:\\"|[^"])*)"|'((?:\\'|[^'])*)')/g,function(t,n,i,o){e[n]=s((i?i.replace(/\\"/g,'"'):void 0)||(o?o.replace(/\\'/g,"'"):void 0))})},h=function(t){for(var e in t)if(t.hasOwnProperty(e)){if(Object.prototype[e])continue;return!1}return!0},l=function(t,e,n,o,l,p){var c,u="",d=a.stack.length-1;if("string"==typeof e&&e)if("/"!=e.substr(0,1)){var f="string"==typeof n&&n,m="string"==typeof o&&o,_=!f&&m?"":{};if(c=a.stack[d],"undefined"==typeof c[e])c[e]=_,c=a.stack[d+1]=c[e];else if(c[e]instanceof Array){var g=c[e].length;c[e][g]=_,c=a.stack[d+1]=c[e][g]}else c[e]=[c[e],_],c=a.stack[d+1]=c[e][1];f&&r(n,c),a.tags[d+1]=e,m&&(a.tags.length--,a.stack.length--)}else a.tags.length--,a.stack.length--;else"string"==typeof l&&l?u=l:"string"==typeof p&&p&&(u=s(p));if(u.replace(/^\s+/g,"").length>0){var v=a.stack[d-1],y=a.tags[d];if(i.test(u)?u=parseFloat(u):"true"!=u&&"false"!=u||(u=new Boolean(u)),"undefined"==typeof v)return;if(v[y]instanceof Array){var E=v[y];"object"!=typeof E[E.length-1]||h(E[E.length-1])?E[E.length-1]=u:(E[E.length-1].$cdata=u,E[E.length-1].toString=function(){return u})}else"object"!=typeof v[y]||h(v[y])?v[y]=u:(v[y].$cdata=u,v[y].toString=function(){return u})}};return t=t.replace(/<(\?|\!-)[^>]*>/g,""),t.replace(n,l),jindo.$Json(e)},jindo.$Json.prototype.get=function(t){for(var e=this._object,n=t.split("/"),i=/^([\w:\-]+)\[([0-9]+)\]$/,o=[[e]],a=o[0],s=n.length,r,h,l,p,c,u=0;u<s;u++)if("."!=n[u]&&""!=n[u]){if(".."==n[u])o.length--;else{if(l=[],h=-1,r=a.length,0==r)return[];for(i.test(n[u])&&(h=+RegExp.$2),p=0;p<r;p++)c=a[p][n[u]],"undefined"!=typeof c&&(c instanceof Array?h>-1?h<c.length&&(l[l.length]=c[h]):l=l.concat(c):h==-1&&(l[l.length]=c));o[o.length]=l}a=o[o.length-1]}return a},jindo.$Json.prototype.toString=function(){return window.JSON&&window.JSON.stringify?jindo.$Json.prototype.toString=function(){try{return window.JSON.stringify(this._object)}catch(t){return jindo.$Json._oldToString(this._object)}}:jindo.$Json.prototype.toString=function(){return jindo.$Json._oldToString(this._object)},this.toString()},jindo.$Json._oldToString=function(t){var e={$:function(t){return"object"==typeof t&&null==t?"null":"undefined"==typeof t?'""':"boolean"==typeof t?t?"true":"false":"string"==typeof t?this.s(t):"number"==typeof t?t:t instanceof Array?this.a(t):t instanceof Object?this.o(t):void 0},s:function(t){var e={'"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r","\t":"\\t"},n=function(t){return"undefined"!=typeof e[t]?e[t]:t};return'"'+t.replace(/[\\"'\n\r\t]/g,n)+'"'},a:function(t){for(var e="[",n="",i=t.length,o=0;o<i;o++)"function"!=typeof t[o]&&(e+=n+this.$(t[o]),n||(n=","));return e+"]"},o:function(t){t=jindo.$H(t).ksort().$value();var e="{",n="";for(var i in t)if(t.hasOwnProperty(i)){if("function"==typeof t[i])continue;e+=n+this.s(i)+":"+this.$(t[i]),n||(n=",")}return e+"}"}};return e.$(t)},jindo.$Json.prototype.toXML=function(){var t=function(e,n){var i=function(t,e){return"<"+n+(e||"")+">"+t+"</"+n+">"};switch(typeof e){case"undefined":case"null":return i("");case"number":return i(e);case"string":return i(e.indexOf("<")<0?e.replace(/&/g,"&amp;"):"<![CDATA["+e+"]]>");case"boolean":return i(String(e));case"object":var o="";if(e instanceof Array)for(var a=e.length,s=0;s<a;s++)o+=t(e[s],n);else{var r="";for(var h in e)if(e.hasOwnProperty(h)){if("$cdata"==h||"function"==typeof e[h])continue;o+=t(e[h],h)}n&&(o=i(o,r))}return o}};return t(this._object,"")},jindo.$Json.prototype.toObject=function(){return this._object},jindo.$Json.prototype.compare=function(t){return jindo.$Json._oldToString(this._object).toString()==jindo.$Json._oldToString(jindo.$Json(t).$value()).toString()},jindo.$Json.prototype.$value=jindo.$Json.prototype.toObject,jindo.$Cookie=function(){var t=arguments.callee,e=t._cached;return t._cached?t._cached:this instanceof t?void("undefined"==typeof t._cached&&(t._cached=this)):new t},jindo.$Cookie.prototype.keys=function(){for(var t=document.cookie.split(";"),e=/^\s+|\s+$/g,n=new Array,i=0;i<t.length;i++)n[n.length]=t[i].substr(0,t[i].indexOf("=")).replace(e,"");return n},jindo.$Cookie.prototype.get=function(t){for(var e=document.cookie.split(/\s*;\s*/),n=new RegExp("^(\\s*"+t+"\\s*=)"),i=0;i<e.length;i++)if(n.test(e[i]))return unescape(e[i].substr(RegExp.$1.length));return null},jindo.$Cookie.prototype.set=function(t,e,n,i,o){var a="";return"number"==typeof n&&(a=";expires="+new Date((new Date).getTime()+1e3*n*60*60*24).toGMTString()),"undefined"==typeof i&&(i=""),"undefined"==typeof o&&(o="/"),document.cookie=t+"="+escape(e)+a+"; path="+o+(i?"; domain="+i:""),this},jindo.$Cookie.prototype.remove=function(t,e,n){return null!=this.get(t)&&this.set(t,"",-1,e,n),this},jindo.$Element=function(t){var e=arguments.callee;if(t&&t instanceof e)return t;if(null===t||"undefined"==typeof t)return null;if(t=jindo.$(t),null===t)return null;if(!(this instanceof e))return new e(t);this._element="string"==typeof t?jindo.$(t):t;var n=this._element.tagName;this.tag="undefined"!=typeof n?n.toLowerCase():""};var _j_ag=navigator.userAgent,IS_IE=jindo.$Agent().navigator().ie,IS_FF=_j_ag.indexOf("Firefox")>-1,IS_OP=_j_ag.indexOf("Opera")>-1,IS_SF=_j_ag.indexOf("Apple")>-1,IS_CH=_j_ag.indexOf("Chrome")>-1;jindo.$Element.prototype.$value=function(){return this._element},jindo.$Element.prototype.visible=function(t,e){return"undefined"!=typeof t?(this[t?"show":"hide"](e),this):"none"!=this.css("display")},jindo.$Element.prototype.show=function(t){var e=this._element.style,n="block",i={p:n,div:n,form:n,h1:n,h2:n,h3:n,h4:n,ol:n,ul:n,fieldset:n,td:"table-cell",th:"table-cell",li:"list-item",table:"table",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",col:"table-column",colgroup:"table-column-group",caption:"table-caption",dl:n,dt:n,dd:n};try{if(t)e.display=t;else{var o=i[this.tag];e.display=o||"inline"}}catch(a){e.display="block"}return this},jindo.$Element.prototype.hide=function(){return this._element.style.display="none",this},jindo.$Element.prototype.toggle=function(t){return this[this.visible()?"hide":"show"](t),this},jindo.$Element.prototype.opacity=function(t){var e,n=this._element,i="none"!=this._getCss(n,"display");return t=parseFloat(t),n.style.zoom=1,isNaN(t)?("undefined"!=typeof n.filters?(e="undefined"==typeof n.filters.alpha?i?100:0:n.filters.alpha.opacity,e/=100):(e=parseFloat(n.style.opacity),isNaN(e)&&(e=i?1:0)),e):(t=Math.max(Math.min(t,1),0),"undefined"!=typeof n.filters?(t=Math.ceil(100*t),"unknown"!=typeof n.filters&&"undefined"!=typeof n.filters.alpha?n.filters.alpha.opacity=t:n.style.filter=n.style.filter+" alpha(opacity="+t+")"):n.style.opacity=t,t)},jindo.$Element.prototype.css=function(t,e){var n=this._element,i=typeof e;if("opacity"==t)return"undefined"==i?this.opacity():this.opacity(e);var o=typeof t;if("string"==o){var a;if("string"!=i&&"number"!=i){var s=this._getCss;if((IS_FF||IS_OP)&&("backgroundPositionX"==t||"backgroundPositionY"==t)){var r=s(n,"backgroundPosition").split(/\s+/);return"backgroundPositionX"==t?r[0]:r[1]}if(IS_IE&&"backgroundPosition"==t)return s(n,"backgroundPositionX")+" "+s(n,"backgroundPositionY");if((IS_FF||IS_SF||IS_CH)&&("padding"==t||"margin"==t)){var h=s(n,t+"Top"),l=s(n,t+"Right"),p=s(n,t+"Bottom"),c=s(n,t+"Left");return h==l&&p==c?h:h==p&&l==c?h+" "+l:h+" "+l+" "+p+" "+c}return s(n,t)}var u={};u[t]=e,t=u}var d=jindo.$H;if("undefined"!=typeof d&&t instanceof d&&(t=t._table),"object"==typeof t){var f,m;for(var _ in t)if(t.hasOwnProperty(_)){if(f=t[_],m=typeof f,"string"!=m&&"number"!=m)continue;if("opacity"==_){"undefined"==m?this.opacity():this.opacity(f);continue}if("cssFloat"==_&&IS_IE&&(_="styleFloat"),!IS_FF&&!IS_OP||"backgroundPositionX"!=_&&"backgroundPositionY"!=_)this._setCss(n,_,f);else{var r=this.css("backgroundPosition").split(/\s+/);f="backgroundPositionX"==_?f+" "+r[1]:r[0]+" "+f,this._setCss(n,"backgroundPosition",f)}}}return this},jindo.$Element.prototype._getCss=function(t,e){var n;return n=t.currentStyle?function(t,e){try{"cssFloat"==e&&(e="styleFloat");var n=t.style[e];if(n)return n;var i=t.currentStyle;return i?i[e]:n}catch(o){throw new Error((t.tagName||"document")+"\ub294 css\ub97c \uc0ac\uc6a9 \ud560\uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}}:window.getComputedStyle?function(t,e){try{"cssFloat"==e&&(e="float");var n=t.ownerDocument||t.document||document,i=t.style[e]||n.defaultView.getComputedStyle(t,null).getPropertyValue(e.replace(/([A-Z])/g,"-$1").toLowerCase());return"textDecoration"==e&&(i=i.replace(",","")),i}catch(o){throw new Error((t.tagName||"document")+"\ub294 css\ub97c \uc0ac\uc6a9 \ud560\uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}}:function(t,e){try{return"cssFloat"==e&&IS_IE&&(e="styleFloat"),t.style[e]}catch(n){throw new Error((t.tagName||"document")+"\ub294 css\ub97c \uc0ac\uc6a9 \ud560\uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}},jindo.$Element.prototype._getCss=n,n(t,e)},jindo.$Element.prototype._setCss=function(t,e,n){"#top#left#right#bottom#".indexOf(e+"#")>0&&("number"==typeof n||/\d$/.test(n))?t.style[e]=parseInt(n)+"px":t.style[e]=n},jindo.$Element.prototype.attr=function(t,e){var n=this._element;if("string"==typeof t){if("undefined"==typeof e)return"class"==t||"className"==t?n.className:"style"==t?n.style.cssText:"checked"==t||"disabled"==t?!!n[t]:"value"==t?n.value:n.getAttribute(t);var i={};i[t]=e,t=i}if("undefined"!=typeof jindo.$H&&t instanceof jindo.$H&&(t=t.$value()),"object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&("undefined"!=typeof e&&null===e?n.removeAttribute(o):"class"==o||"className"==o?n.className=t[o]:"style"==o?n.style.cssText=t[o]:"checked"==o||"disabled"==o?n[o]=t[o]:"value"==o?n.value=t[o]:n.setAttribute(o,t[o]));return this},jindo.$Element.prototype.width=function(t){if("number"==typeof t){var e=this._element;e.style.width=t+"px";var n=e.offsetWidth;if(n!=t){var i=2*t-n;i>0&&(e.style.width=i+"px")}return this}return this._element.offsetWidth},jindo.$Element.prototype.height=function(t){if("number"==typeof t){var e=this._element;e.style.height=t+"px";var n=e.offsetHeight;if(n!=t){var t=2*t-n;t>0&&(e.style.height=t+"px")}return this}return this._element.offsetHeight},jindo.$Element.prototype.className=function(t){var e=this._element;return"undefined"==typeof t?e.className:(e.className=t,this)},jindo.$Element.prototype.hasClass=function(t){return this._element.classList?this._element.classList.contains(t):(" "+this._element.className+" ").indexOf(" "+t+" ")>-1},jindo.$Element.prototype.addClass=function(t){if(this._element.classList){for(var e=t.split(/\s+/),n=this._element.classList,i=e.length;i--;)n.add(e[i]);return this}for(var o=this._element,e=t.split(/\s+/),a,i=e.length-1;i>=0;i--)a=e[i],this.hasClass(a)||(o.className=(o.className+" "+a).replace(/^\s+/,""));return this},jindo.$Element.prototype.removeClass=function(t){if(this._element.classList){for(var e=this._element.classList,n=t.split(" "),i=n.length;i--;)e.remove(n[i]);return this}for(var o=this._element,n=t.split(/\s+/),a,i=n.length-1;i>=0;i--)a=n[i],this.hasClass(a)&&(o.className=(" "+o.className.replace(/\s+$/,"").replace(/^\s+/,"")+" ").replace(" "+a+" "," ").replace(/\s+$/,"").replace(/^\s+/,""));return this},jindo.$Element.prototype.toggleClass=function(t,e){return this._element.classList?("undefined"==typeof e?this._element.classList.toggle(t):this.hasClass(t)?(this.removeClass(t),this.addClass(e)):(this.addClass(t),this.removeClass(e)),this):(e=e||"",this.hasClass(t)?(this.removeClass(t),e&&this.addClass(e)):(this.addClass(t),e&&this.removeClass(e)),this)},jindo.$Element.prototype.text=function(t){var e=this._element,n=this.tag,i="undefined"!=typeof e.textContent?"textContent":"innerText";"textarea"!=n&&"input"!=n||(i="value");var o=typeof t;if("undefined"!=o&&("string"==o||"number"==o||"boolean"==o)){t+="";try{e[i]=t}catch(a){return this.html(t.replace(/&/g,"&amp;").replace(/</g,"&lt;"))}return this}return e[i]},jindo.$Element.prototype.html=function(t){var e=IS_IE,n=IS_FF;return e?jindo.$Element.prototype.html=function(t){if("undefined"!=typeof t&&arguments.length){t+="",jindo.$$.release();for(var e=this._element;e.firstChild;)e.removeChild(e.firstChild);var n="R"+(new Date).getTime()+parseInt(1e5*Math.random()),i=e.ownerDocument||e.document||document,o,a=e.tagName.toLowerCase();switch(a){case"select":case"table":o=i.createElement("div"),o.innerHTML="<"+a+' class="'+n+'">'+t+"</"+a+">";break;case"tr":case"thead":case"tbody":o=i.createElement("div"),o.innerHTML="<table><"+a+' class="'+n+'">'+t+"</"+a+"></table>";break;default:e.innerHTML=t}if(o){var s;for(s=o.firstChild;s&&s.className!=n;s=s.firstChild);if(s){for(var r=!0,h;h=e.firstChild;)h.removeNode(!0);for(var h=s.firstChild;h;h=s.firstChild)if("select"==a){var l=h.cloneNode(!0);h.selected&&r&&(r=!1,l.selected=!0),e.appendChild(l),h.removeNode(!0)}else e.appendChild(h);o.removeNode&&o.removeNode(!0)}o=null}return this}return this._element.innerHTML}:n?jindo.$Element.prototype.html=function(t){if("undefined"!=typeof t&&arguments.length){t+="";var e=this._element;if(e.parentNode)e.innerHTML=t;else{var n="R"+(new Date).getTime()+parseInt(1e5*Math.random()),i=e.ownerDocument||e.document||document,o,a=e.tagName.toLowerCase();switch(a){case"select":case"table":o=i.createElement("div"),o.innerHTML="<"+a+' class="'+n+'">'+t+"</"+a+">";break;case"tr":case"thead":case"tbody":o=i.createElement("div"),o.innerHTML="<table><"+a+' class="'+n+'">'+t+"</"+a+"></table>";break;default:e.innerHTML=t}if(o){var s;for(s=o.firstChild;s&&s.className!=n;s=s.firstChild);if(s){for(var r;r=e.firstChild;)r.removeNode(!0);for(var r=s.firstChild;r;r=s.firstChild)e.appendChild(r);o.removeNode&&o.removeNode(!0)}o=null}}return this}return this._element.innerHTML}:jindo.$Element.prototype.html=function(t){if("undefined"!=typeof t&&arguments.length){t+="";var e=this._element;return e.innerHTML=t,this}return this._element.innerHTML},this.html(t)},jindo.$Element.prototype.outerHTML=function(){var t=this._element;if("undefined"!=typeof t.outerHTML)return t.outerHTML;var e=t.ownerDocument||t.document||document,n=e.createElement("div"),i=t.parentNode;if(!i)return t.innerHTML;i.insertBefore(n,t),n.style.display="none",n.appendChild(t);var o=n.innerHTML;return i.insertBefore(t,n),i.removeChild(n),o},jindo.$Element.prototype.toString=jindo.$Element.prototype.outerHTML,jindo.$Element._getTransition=function(){var t=!1,e="";return"undefined"!=typeof document.body.style.trasition?(t=!0,e="trasition"):"undefined"!=typeof document.body.style.webkitTransition?(t=!0,e="webkitTransition"):"undefined"!=typeof document.body.style.OTransition&&(t=!0,e="OTransition"),(jindo.$Element._getTransition=function(){return{hasTransition:t,name:e}})()},jindo.$Element.prototype.appear=function(t,e){var n=jindo.$Element._getTransition();return n.hasTransition?jindo.$Element.prototype.appear=function(t,e){t=t||.3,e=e||function(){};var i=function(){e(),this.show(),this.removeEventListener(n.name+"End",arguments.callee,!1)},o=this._element,a=this;return this.visible()||(o.style.opacity=o.style.opacity||0,a.show()),o.addEventListener(n.name+"End",i,!1),o.style[n.name+"Property"]="opacity",o.style[n.name+"Duration"]=t+"s",o.style[n.name+"TimingFunction"]="linear",setTimeout(function(){o.style.opacity="1"},1),this}:jindo.$Element.prototype.appear=function(t,e){var n=this,i=this.opacity();if(this.visible()||(i=0),1==i)return this;try{clearTimeout(this._fade_timer)}catch(o){}e=e||function(){};
var a=(1-i)/(100*(t||.3)),s=function(){i+=a,n.opacity(i),i>=1?e(n):n._fade_timer=setTimeout(s,10)};return this.show(),s(),this},this.appear(t,e)},jindo.$Element.prototype.disappear=function(t,e){var n=jindo.$Element._getTransition();return n.hasTransition?jindo.$Element.prototype.disappear=function(t,e){t=t||.3;var i=this;e=e||function(){};var o=function(){e(),this.removeEventListener(n.name+"End",arguments.callee,!1),i.hide()},a=this._element;return a.addEventListener(n.name+"End",o,!1),a.style[n.name+"Property"]="opacity",a.style[n.name+"Duration"]=t+"s",a.style[n.name+"TimingFunction"]="linear",setTimeout(function(){a.style.opacity="0"},1),this}:jindo.$Element.prototype.disappear=function(t,e){var n=this,i=this.opacity();if(0==i)return this;try{clearTimeout(this._fade_timer)}catch(o){}e=e||function(){};var a=i/(100*(t||.3)),s=function(){i-=a,n.opacity(i),i<=0?(n.hide(),n.opacity(1),e(n)):n._fade_timer=setTimeout(s,10)};return s(),this},this.disappear(t,e)},jindo.$Element.prototype.offset=function(t,e){var n=this._element,i=null;if("number"==typeof t&&"number"==typeof e){isNaN(parseInt())&&this.css("top",0),isNaN(parseInt(this.css("left")))&&this.css("left",0);var o=this.offset(),a={top:t-o.top,left:e-o.left};return n.style.top=parseInt(this.css("top"))+a.top+"px",n.style.left=parseInt(this.css("left"))+a.left+"px",this}var s=jindo.$Agent().navigator().ie,r=s?document.documentMode||jindo.$Agent().navigator().version:0,o={left:0,top:0},h=n.ownerDocument||n.document||document,l=h.documentElement,p=h.body;if(n.getBoundingClientRect){if(!i){var c=window==top;if(!c)try{c=window.frameElement&&1==window.frameElement.frameBorder}catch(u){}s&&r<8&&window.external&&c&&document.body.contains(n)?(i={left:2,top:2},oBase=null):i={left:0,top:0}}var d;try{d=n.getBoundingClientRect()}catch(u){d={left:0,top:0}}n!==l&&n!==p&&(o.left=d.left-i.left,o.top=d.top-i.top,o.left+=l.scrollLeft||p.scrollLeft,o.top+=l.scrollTop||p.scrollTop)}else if(h.getBoxObjectFor){var d=h.getBoxObjectFor(n),f=h.getBoxObjectFor(l||p);o.left=d.screenX-f.screenX,o.top=d.screenY-f.screenY}else{for(var m=n;m;m=m.offsetParent)o.left+=m.offsetLeft,o.top+=m.offsetTop;for(var m=n.parentNode;m&&"BODY"!=m.tagName;m=m.parentNode)"TR"==m.tagName&&(o.top+=2),o.left-=m.scrollLeft,o.top-=m.scrollTop}return o},jindo.$Element.prototype.evalScripts=function(sHTML){var aJS=[];return sHTML=sHTML.replace(new RegExp("<script(\\s[^>]+)*>(.*?)</script>","gi"),function(t,e,n){return aJS.push(n),""}),eval(aJS.join("\n")),this},jindo.$Element._append=function(t,e){return"string"==typeof e?e=jindo.$(e):e instanceof jindo.$Element&&(e=e.$value()),t._element.appendChild(e),t},jindo.$Element._prepend=function(t,e){"string"==typeof t?t=jindo.$(t):t instanceof jindo.$Element&&(t=t.$value());var n=t.childNodes;return n.length>0?t.insertBefore(e._element,n[0]):t.appendChild(e._element),e},jindo.$Element.prototype.append=function(t){return jindo.$Element._append(this,t)},jindo.$Element.prototype.prepend=function(t){return jindo.$Element._prepend(this._element,jindo.$Element(t))},jindo.$Element.prototype.replace=function(t){jindo.$$.release();var e=this._element,n=e.parentNode,i=jindo.$Element(t);if(n&&n.replaceChild)return n.replaceChild(i.$value(),e),i;var i=i.$value();return n.insertBefore(i,e),n.removeChild(e),i},jindo.$Element.prototype.appendTo=function(t){var e=jindo.$Element(t);return jindo.$Element._append(e,this._element),e},jindo.$Element.prototype.prependTo=function(t){return jindo.$Element._prepend(t,this),jindo.$Element(t)},jindo.$Element.prototype.before=function(t){var e=jindo.$Element(t),n=e.$value();return this._element.parentNode.insertBefore(n,this._element),e},jindo.$Element.prototype.after=function(t){var e=this.before(t);return e.before(this),e},jindo.$Element.prototype.parent=function(t,e){var n=this._element,i=[],o=null;if("undefined"==typeof t)return jindo.$Element(n.parentNode);for("undefined"!=typeof e&&0!=e||(e=-1);n.parentNode&&0!=e--&&(o=jindo.$Element(n.parentNode),n.parentNode!=document.documentElement);)(!t||t&&t(o))&&(i[i.length]=o),n=n.parentNode;return i},jindo.$Element.prototype.child=function(t,e){var n=this._element,i=[],o=null,a=null;return"undefined"==typeof t?jindo.$A(n.childNodes).filter(function(t){return 1==t.nodeType}).map(function(t){return jindo.$Element(t)}).$value():("undefined"!=typeof e&&0!=e||(e=-1),(a=function(e,n){for(var o=null,s=null,r=0;r<e.childNodes.length;r++)o=e.childNodes[r],1==o.nodeType&&(s=jindo.$Element(e.childNodes[r]),(!t||t&&t(s))&&(i[i.length]=s),0!=n&&a(e.childNodes[r],n-1))})(n,e-1),i)},jindo.$Element.prototype.prev=function(t){var e=this._element,n=[],i="undefined"==typeof t;if(!e)return i?jindo.$Element(null):n;do if(e=e.previousSibling,e&&1==e.nodeType){if(i)return jindo.$Element(e);t&&!t(e)||(n[n.length]=jindo.$Element(e))}while(e);return i?jindo.$Element(e):n},jindo.$Element.prototype.next=function(t){var e=this._element,n=[],i="undefined"==typeof t;if(!e)return i?jindo.$Element(null):n;do if(e=e.nextSibling,e&&1==e.nodeType){if(i)return jindo.$Element(e);t&&!t(e)||(n[n.length]=jindo.$Element(e))}while(e);return i?jindo.$Element(e):n},jindo.$Element.prototype.first=function(){var t=this._element.firstElementChild||this._element.firstChild;if(!t)return null;for(;t&&1!=t.nodeType;)t=t.nextSibling;return t?jindo.$Element(t):null},jindo.$Element.prototype.last=function(){var t=this._element.lastElementChild||this._element.lastChild;if(!t)return null;for(;t&&1!=t.nodeType;)t=t.previousSibling;return t?jindo.$Element(t):null},jindo.$Element.prototype.isChildOf=function(t){return jindo.$Element._contain(jindo.$Element(t).$value(),this._element)},jindo.$Element.prototype.isParentOf=function(t){return jindo.$Element._contain(this._element,jindo.$Element(t).$value())},jindo.$Element._contain=function(t,e){return document.compareDocumentPosition?jindo.$Element._contain=function(t,e){return!!(16&t.compareDocumentPosition(e))}:document.body.contains?jindo.$Element._contain=function(t,e){return t!==e&&(!t.contains||t.contains(e))}:jindo.$Element._contain=function(t,e){for(var n=t,i=e;n&&n.parentNode;)if(n=n.parentNode,n==i)return!0;return!1},jindo.$Element._contain(t,e)},jindo.$Element.prototype.isEqual=function(t){try{return this._element===jindo.$Element(t).$value()}catch(e){return!1}},jindo.$Element.prototype.fireEvent=function(t,e){function n(t,e){t=(t+"").toLowerCase();var n=document.createEventObject();if(e){for(k in e)e.hasOwnProperty(k)&&(n[k]=e[k]);n.button=(e.left?1:0)+(e.middle?4:0)+(e.right?2:0),n.relatedTarget=e.relatedElement||null}return this._element.fireEvent("on"+t,n),this}function i(t,e){var n="HTMLEvents";t=(t+"").toLowerCase(),"click"==t||0==t.indexOf("mouse")?(n="MouseEvent","mousewheel"==t&&(t="dommousescroll")):0==t.indexOf("key")&&(n="KeyboardEvent");var i;if(e)switch(e.button=0+(e.middle?1:0)+(e.right?2:0),e.ctrl=e.ctrl||!1,e.alt=e.alt||!1,e.shift=e.shift||!1,e.meta=e.meta||!1,n){case"MouseEvent":i=document.createEvent(n),i.initMouseEvent(t,!0,!0,null,e.detail||0,e.screenX||0,e.screenY||0,e.clientX||0,e.clientY||0,e.ctrl,e.alt,e.shift,e.meta,e.button,e.relatedElement||null);break;case"KeyboardEvent":if(window.KeyEvent)i=document.createEvent("KeyEvents"),i.initKeyEvent(t,!0,!0,window,e.ctrl,e.alt,e.shift,e.meta,e.keyCode,e.keyCode);else try{i=document.createEvent("Events")}catch(o){i=document.createEvent("UIEvents")}finally{i.initEvent(t,!0,!0),i.ctrlKey=e.ctrl,i.altKey=e.alt,i.shiftKey=e.shift,i.metaKey=e.meta,i.keyCode=e.keyCode,i.which=e.keyCode}break;default:i=document.createEvent(n),i.initEvent(t,!0,!0)}else i=document.createEvent(n),i.initEvent(t,!0,!0);return this._element.dispatchEvent(i),this}return jindo.$Element.prototype.fireEvent="undefined"!=typeof this._element.dispatchEvent?i:n,this.fireEvent(t,e)},jindo.$Element.prototype.empty=function(){return jindo.$$.release(),this.html(""),this},jindo.$Element.prototype.remove=function(t){return jindo.$$.release(),jindo.$Element(t).leave(),this},jindo.$Element.prototype.leave=function(){var t=this._element;return t.parentNode&&(jindo.$$.release(),t.parentNode.removeChild(t)),jindo.$Fn.freeElement(this._element),this},jindo.$Element.prototype.wrap=function(t){var e=this._element;return t=jindo.$Element(t).$value(),e.parentNode&&e.parentNode.insertBefore(t,e),t.appendChild(e),this},jindo.$Element.prototype.ellipsis=function(t){t=t||"...";var e=this.text(),n=e.length,i=parseInt(this.css("paddingTop"))+parseInt(this.css("paddingBottom")),o=this.height()-i,a=0,s=this.text("A").height()-i;if(o<1.5*s)return this.text(e);for(o=s;o<1.5*s;)a+=Math.max(Math.ceil((n-a)/2),1),o=this.text(e.substring(0,a)+t).height()-i;for(;o>1.5*s;)a--,o=this.text(e.substring(0,a)+t).height()-i},jindo.$Element.prototype.indexOf=function(t){try{for(var e=jindo.$Element(t).$value(),n=this._element.childNodes,i=0,o=n.length,a=0;a<o;a++)if(1==n[a].nodeType){if(n[a]===e)return i;i++}}catch(e){}return-1},jindo.$Element.prototype.queryAll=function(t){return jindo.$$(t,this._element)},jindo.$Element.prototype.query=function(t){return jindo.$$.getSingle(t,this._element)},jindo.$Element.prototype.test=function(t){return jindo.$$.test(this._element,t)},jindo.$Element.prototype.xpathAll=function(t){return jindo.$$.xpath(t,this._element)},jindo.$Element.insertAdjacentHTML=function(t,e,n,i,o){var a=t._element;if(a.insertAdjacentHTML&&!/^<(option|tr|td|th)>/.test(e.replace(/^(\s|\u3000)+|(\s|\u3000)+$/g,"").toLowerCase()))a.insertAdjacentHTML(n,e);else{var s=a.ownerDocument||a.document||document,r=s.createDocumentFragment(),h,l=e.replace(/^(\s|\u3000)+|(\s|\u3000)+$/g,""),p={option:"select",tr:"tbody",thead:"table",tbody:"table",td:"tr",th:"tr",div:"div"},c=/^\<(option|tr|thead|tbody|td|th)\>/i.exec(l),u=null===c?"div":c[1].toLowerCase(),d=p[u];h=jindo._createEle(d,l,s,!0);for(var f=h.getElementsByTagName("script"),m=0,_=f.length;m<_;m++)f[m].parentNode.removeChild(f[m]);for(;h[i];)r.appendChild(h[i]);o(r.cloneNode(!0))}return t},jindo.$Element.prototype.appendHTML=function(t){return jindo.$Element.insertAdjacentHTML(this,t,"beforeEnd","firstChild",jindo.$Fn(function(t){this.append(t)},this).bind())},jindo.$Element.prototype.prependHTML=function(t){return jindo.$Element.insertAdjacentHTML(this,t,"afterBegin","lastChild",jindo.$Fn(function(t){this.prepend(t)},this).bind())},jindo.$Element.prototype.beforeHTML=function(t){return jindo.$Element.insertAdjacentHTML(this,t,"beforeBegin","firstChild",jindo.$Fn(function(t){this.before(t)},this).bind())},jindo.$Element.prototype.afterHTML=function(t){return jindo.$Element.insertAdjacentHTML(this,t,"afterEnd","lastChild",jindo.$Fn(function(t){this._element.parentNode.insertBefore(t,this._element.nextSibling)},this).bind())},jindo.$Element.prototype.delegate=function(t,e,n){if(!this._element["_delegate_"+t]){this._element["_delegate_"+t]={};var i=jindo.$Fn(function(t,e){e=e||window.event,"undefined"==typeof e.currentTarget&&(e.currentTarget=this._element);var n=e.target||e.srcElement,i=this._element["_delegate_"+t],o,a,s,r;for(var h in i)if(o=i[h],r=o.checker(n),r[0]){a=o.func,s=jindo.$Event(e),s.element=r[1];for(var l=0,p=a.length;l<p;l++)a[l](s)}},this).bind(t);jindo.$Element._eventBind(this._element,t,i);var o=this._element;o["_delegate_"+t+"_func"]=i,this._element._delegate_events?this._element._delegate_events.push(t):this._element._delegate_events=[t],o=null}return this._bind(t,e,n),this},jindo.$Element._eventBind=function(t,e,n){if(t.addEventListener){var i=function(){var t=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t=!0}}))}catch(e){}return t}();jindo.$Element._eventBind=function(t,e,n){t.addEventListener(e,n,!!i&&{capture:!1,passive:!1})}}else jindo.$Element._eventBind=function(t,e,n){t.attachEvent("on"+e,n)};jindo.$Element._eventBind(t,e,n)},jindo.$Element.prototype.undelegate=function(t,e,n){return this._unbind(t,e,n),this},jindo.$Element.prototype._bind=function(t,e,n){var i=this._element["_delegate_"+t];if(i){var o;"string"==typeof e?o=jindo.$Fn(function(t,e){var n=e,i=jindo.$$.test(e,t);if(!i)for(var o=this._getParent(e),a=0,s=o.length;a<s;a++)if(n=o[a],jindo.$$.test(n,t)){i=!0;break}return[i,n]},this).bind(e):"function"==typeof e&&(o=jindo.$Fn(function(t,e){var n=e,i=t(this._element,e);if(!i)for(var o=this._getParent(e),a=0,s=o.length;a<s;a++)if(n=o[a],t(this._element,n)){i=!0;break}return[i,n]},this).bind(e)),this._element["_delegate_"+t]=jindo.$Element._addBind(i,e,n,o)}else alert("check your delegate event.")},jindo.$Element.prototype._getParent=function(t){for(var e=this._element,n=[],i=null;t.parentNode&&i!=e&&(i=t.parentNode,i!=document.documentElement);)n[n.length]=i,t=i;return n},jindo.$Element._addBind=function(t,e,n,i){var o=t[e];if(o){var a=o.func;a.push(n),o.func=a}else o={checker:i,func:[n]};return t[e]=o,t},jindo.$Element.prototype._unbind=function(t,e,n){var i=this._element;if(t&&e&&n){var o=i["_delegate_"+t];if(o&&o[e]){var a=o[e].func;a=o[e].func=jindo.$A(a).refuse(n).$value(),a.length||jindo.$Element._deleteFilter(i,t,e)}}else if(t&&e)jindo.$Element._deleteFilter(i,t,e);else if(t)jindo.$Element._deleteEvent(i,t,e);else{for(var s=i._delegate_events,r,h=0,l=s.length;h<l;h++)r=s[h],jindo.$Element._unEventBind(i,r,i["_delegate_"+r+"_func"]),jindo.$Element._delDelegateInfo(i,"_delegate_"+r),jindo.$Element._delDelegateInfo(i,"_delegate_"+r+"_func");jindo.$Element._delDelegateInfo(i,"_delegate_events")}return this},jindo.$Element._delDelegateInfo=function(t,e){try{t[e]=null,delete t[e]}catch(n){}return t},jindo.$Element._deleteFilter=function(t,e,n){var i=t["_delegate_"+e];i&&i[n]&&(1==jindo.$H(i).keys().length?jindo.$Element._deleteEvent(t,e,n):jindo.$Element._delDelegateInfo(i,n))},jindo.$Element._deleteEvent=function(t,e,n){var i=t._delegate_events;jindo.$Element._unEventBind(t,e,t["_delegate_"+e+"_func"]),jindo.$Element._delDelegateInfo(t,"_delegate_"+e),jindo.$Element._delDelegateInfo(t,"_delegate_"+e+"_func"),i=jindo.$A(i).refuse(e).$value(),i.length?t._delegate_events=jindo.$A(i).refuse(e).$value():jindo.$Element._delDelegateInfo(t,"_delegate_events")},jindo.$Element._unEventBind=function(t,e,n){t.removeEventListener?jindo.$Element._unEventBind=function(t,e,n){t.removeEventListener(e,n,!1)}:jindo.$Element._unEventBind=function(t,e,n){t.detachEvent("on"+e,n)},jindo.$Element._unEventBind(t,e,n)},jindo.$Fn=function(func,thisObject){var cl=arguments.callee;return func instanceof cl?func:this instanceof cl?(this._events=[],this._tmpElm=null,this._key=null,void("function"==typeof func?(this._func=func,this._this=thisObject):"string"==typeof func&&"string"==typeof thisObject&&(this._func=eval("false||function("+func+"){"+thisObject+"}")))):new cl(func,thisObject)};var _ua=navigator.userAgent;jindo.$Fn.prototype.$value=function(){return this._func},jindo.$Fn.prototype.bind=function(){var t=jindo.$A(arguments).$value(),e=this._func,n=this._this,i=function(){var i=jindo.$A(arguments).$value();return t.length&&(i=t.concat(i)),e.apply(n,i)};return i},jindo.$Fn.prototype.bindForEvent=function(){var t=arguments,e=this._func,n=this._this,i=this._tmpElm||null,o=function(o){var a=Array.prototype.slice.apply(t);"undefined"==typeof o&&(o=window.event),"undefined"==typeof o.currentTarget&&(o.currentTarget=i);var s=jindo.$Event(o);a.unshift(s);var r=e.apply(n,a);return"undefined"!=typeof r&&"beforeunload"==s.type&&(o.returnValue=r),r};return o},jindo.$Fn.prototype.attach=function(t,e,n){var i=null,o,a=e,s=t,r=_ua;if("undefined"==typeof n&&(n=!1),this._bUseCapture=n,s instanceof Array||jindo.$A&&s instanceof jindo.$A&&(s=s.$value())){for(var h=0;h<s.length;h++)this.attach(s[h],a,n);return this}if(!s||!a)return this;(s instanceof jindo.$Element||jindo.$Window&&s instanceof jindo.$Window)&&(s=s.$value()),s=jindo.$(s),a=a.toLowerCase(),this._tmpElm=s,i=this.bindForEvent(),this._tmpElm=null;var l=jindo.$Agent().navigator().ie;if("undefined"!=typeof s.addEventListener){if("domready"==a)a="DOMContentLoaded";else if("mousewheel"==a&&r.indexOf("WebKit")<0&&!/Opera/.test(r)&&!l)a="DOMMouseScroll";else if("mouseenter"!=a||l)if("mouseleave"!=a||l){if("transitionend"==a||"transitionstart"==a){var p,c=a.replace("transition","");c=c.substr(0,1).toUpperCase()+c.substr(1),"undefined"!=typeof document.body.style.WebkitTransition?p="webkit":"undefined"!=typeof document.body.style.OTransition?p="o":"undefined"!=typeof document.body.style.MsTransition&&(p="ms"),a=(p?p+"Transition":"transition")+c,this._for_test=a}else if("animationstart"==a||"animationend"==a||"animationiteration"==a){var p,c=a.replace("animation","");c=c.substr(0,1).toUpperCase()+c.substr(1),"undefined"!=typeof document.body.style.WebkitAnimationName?p="webkit":"undefined"!=typeof document.body.style.OAnimationName?p="o":"undefined"!=typeof document.body.style.MsTransitionName&&(p="ms"),a=(p?p+"Animation":"animation")+c,this._for_test=a}}else a="mouseout",i=jindo.$Fn._fireWhenElementBoundary(s,i);else a="mouseover",i=jindo.$Fn._fireWhenElementBoundary(s,i);var u=function(){var t=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t=!0}}))}catch(e){}return t}();s.addEventListener(a,i,u?{capture:!!n,passive:!1}:!!n)}else if("undefined"!=typeof s.attachEvent){if("domready"==a){if(window.top!=window)throw new Error("Domready Event doesn't work in the iframe.");return jindo.$Fn._domready(s,i),this}s.attachEvent("on"+a,i)}return this._key||(this._key="$"+jindo.$Fn.gc.count++,jindo.$Fn.gc.pool[this._key]=this),this._events[this._events.length]={element:s,event:e.toLowerCase(),func:i},this},jindo.$Fn.prototype.detach=function(t,e){var n=null,i,o=t,a=e,s=_ua;if(o instanceof Array||jindo.$A&&o instanceof jindo.$A&&(o=o.$value())){for(var r=0;r<o.length;r++)this.detach(o[r],a);return this}if(!o||!a)return this;jindo.$Element&&o instanceof jindo.$Element&&(o=o.$value()),o=jindo.$(o),a=a.toLowerCase();for(var h=this._events,r=0;r<h.length;r++)if(h[r].element===o&&h[r].event===a){n=h[r].func,this._events=jindo.$A(this._events).refuse(h[r]).$value();break}if("undefined"!=typeof o.removeEventListener)"domready"==a?a="DOMContentLoaded":"mousewheel"==a&&s.indexOf("WebKit")<0?a="DOMMouseScroll":"mouseenter"==a?a="mouseover":"mouseleave"==a&&(a="mouseout"),n&&o.removeEventListener(a,n,!1);else if("undefined"!=typeof o.detachEvent){if("domready"==a)return jindo.$Fn._domready.list=jindo.$Fn._domready.list.refuse(n),this;o.detachEvent("on"+a,n)}return this},jindo.$Fn.prototype.delay=function(t,e){return"undefined"==typeof e&&(e=[]),this._delayKey=setTimeout(this.bind.apply(this,e),1e3*t),this},jindo.$Fn.prototype.setInterval=function(t,e){return"undefined"==typeof e&&(e=[]),this._repeatKey=setInterval(this.bind.apply(this,e),1e3*t),this._repeatKey},jindo.$Fn.prototype.repeat=jindo.$Fn.prototype.setInterval,jindo.$Fn.prototype.stopDelay=function(){return"undefined"!=typeof this._delayKey&&(window.clearTimeout(this._delayKey),delete this._delayKey),this},jindo.$Fn.prototype.stopRepeat=function(){return"undefined"!=typeof this._repeatKey&&(window.clearInterval(this._repeatKey),delete this._repeatKey),this},jindo.$Fn.prototype.free=function(t){for(var e=this._events.length;e>0;){var n=this._events[--e].element,i=this._events[e].event;if(!t||n===t){this.detach(n,i);var o=!t;o&&window===n&&"unload"==i&&this.$value()(),delete this._events[e]}}if(0==this._events.length)try{delete jindo.$Fn.gc.pool[this._key]}catch(a){}},jindo.$Fn._domready=function(t,e){if("undefined"==typeof jindo.$Fn._domready.list){var n=null,i=jindo.$Fn._domready.list=jindo.$A([e]),o=!1,a=function(){if(!o){o=!0;for(var e={type:"domready",target:t,currentTarget:t};n=i.shift();)n(e)}};!function(){try{t.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,50)}a()}(),t.onreadystatechange=function(){"complete"==t.readyState&&(t.onreadystatechange=null,a())}}else jindo.$Fn._domready.list.push(e)},jindo.$Fn._fireWhenElementBoundary=function(t,e){return function(t){var n=jindo.$Event(t),i=jindo.$Element(n.relatedElement);i&&(i.isEqual(this)||i.isChildOf(this))||e.call(this,t)}},jindo.$Fn.gc=function(){var t=jindo.$Fn.gc.pool;for(var e in t)if(t.hasOwnProperty(e))try{t[e].free()}catch(n){}jindo.$Fn.gc.pool=t={}},jindo.$Fn.freeElement=function(t){var e=jindo.$Fn.gc.pool;for(var n in e)if(e.hasOwnProperty(n))try{e[n].free(t)}catch(i){}},jindo.$Fn.gc.count=0,jindo.$Fn.gc.pool={},"undefined"==typeof window||isUnCacheAgent()||jindo.$Fn(jindo.$Fn.gc).attach(window,"unload"),jindo.$Event=function(t){var e=arguments.callee;return t instanceof e?t:this instanceof e?("undefined"==typeof t&&(t=window.event),t===window.event&&document.createEventObject&&(t=document.createEventObject(t)),this._event=t,this._globalEvent=window.event,this.type=t.type.toLowerCase(),"dommousescroll"==this.type?this.type="mousewheel":"domcontentloaded"==this.type&&(this.type="domready"),this.canceled=!1,this.element=t.target||t.srcElement,this.currentElement=t.currentTarget,this.relatedElement=null,void("undefined"!=typeof t.relatedTarget?this.relatedElement=t.relatedTarget:t.fromElement&&t.toElement&&(this.relatedElement=t["mouseout"==this.type?"toElement":"fromElement"]))):new e(t)},jindo.$Event.prototype.mouse=function(){var t=this._event;t.type.indexOf("touch")>-1&&(t.which=!1,t.button=0,t.wheelDelta=120);var e=0,n=!1,i=!1,o=!1,n=t.which?0==t.button:!!(1&t.button),i=t.which?1==t.button:!!(4&t.button),o=t.which?2==t.button:!!(2&t.button),a={};return t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),a={delta:e,left:n,middle:i,right:o},this.mouse=function(){return a},a},jindo.$Event.prototype.key=function(){var t=this._event,e=t.keyCode||t.charCode,n={keyCode:e,alt:t.altKey,ctrl:t.ctrlKey,meta:t.metaKey,shift:t.shiftKey,up:38==e,down:40==e,left:37==e,right:39==e,enter:13==e,esc:27==e};return this.key=function(){return n},n},jindo.$Event.prototype.pos=function(t){var e=this._event,n=(this.element.ownerDocument||document).body,i=(this.element.ownerDocument||document).documentElement,o=[n.scrollLeft||i.scrollLeft,n.scrollTop||i.scrollTop],a={clientX:e.clientX,clientY:e.clientY,pageX:"pageX"in e?e.pageX:e.clientX+o[0]-n.clientLeft,pageY:"pageY"in e?e.pageY:e.clientY+o[1]-n.clientTop,layerX:"offsetX"in e?e.offsetX:e.layerX-1,layerY:"offsetY"in e?e.offsetY:e.layerY-1},s=e.touches?e.touches[0]:null;if(s||(s=e.changedTouches?e.changedTouches[0]:null),s&&(a.clientX=s.clientX,a.clientY=s.clientY,"pageX"in s&&(a.pageX=s.pageX),"pageY"in s&&(a.pageY=s.pageY),"layerX"in s&&(a.layerX=s.layerX),"layerY"in s&&(a.layerY=s.layerY)),t&&jindo.$Element){var r=jindo.$Element(this.element).offset();a.offsetX=a.pageX-r.left,a.offsetY=a.pageY-r.top}return a},jindo.$Event.prototype.stop=function(t){t=t||jindo.$Event.CANCEL_ALL;var e=window.event&&window.event==this._globalEvent?this._globalEvent:this._event,n=!!(t&jindo.$Event.CANCEL_BUBBLE),i=!!(t&jindo.$Event.CANCEL_DEFAULT);return this.canceled=!0,"undefined"!=typeof e.preventDefault&&i&&e.preventDefault(),"undefined"!=typeof e.stopPropagation&&n&&e.stopPropagation(),i&&(e.returnValue=!1),n&&(e.cancelBubble=!0),this},jindo.$Event.prototype.stopDefault=function(){return this.stop(jindo.$Event.CANCEL_DEFAULT)},jindo.$Event.prototype.stopBubble=function(){return this.stop(jindo.$Event.CANCEL_BUBBLE)},jindo.$Event.prototype.$value=function(){return this._event},jindo.$Event.CANCEL_BUBBLE=1,jindo.$Event.CANCEL_DEFAULT=2,jindo.$Event.CANCEL_ALL=3,jindo.$ElementList=function(t){var e=arguments.callee;return t instanceof e?t:this instanceof e?(t=t instanceof Array?jindo.$A(t):jindo.$A&&t instanceof jindo.$A?jindo.$A(t.$value()):"string"==typeof t&&jindo.cssquery?jindo.$A(jindo.cssquery(t)):jindo.$A(),void(this._elements=t.map(function(t,e,n){return jindo.$Element(t)}))):new e(t)},jindo.$ElementList.prototype.get=function(t){return this._elements.$value()[t]},jindo.$ElementList.prototype.getFirst=function(){return this.get(0)},jindo.$ElementList.prototype.length=function(t,e){return this._elements.length(t,e)},jindo.$ElementList.prototype.getLast=function(){return this.get(Math.max(this._elements.length()-1,0))},jindo.$ElementList.prototype.$value=function(){return this._elements.$value()},function(t){var e=["show","hide","toggle","addClass","removeClass","toggleClass","fireEvent","leave","empty","appear","disappear","className","width","height","text","html","css","attr"];jindo.$A(e).forEach(function(e){t[e]=function(){var t=jindo.$A(arguments).$value();return this._elements.forEach(function(n){n[e].apply(n,t)}),this}}),jindo.$A(["appear","disappear"]).forEach(function(e){t[e]=function(t,n){var i=this._elements.length,o=this;return this._elements.forEach(function(a,s){s==i-1?a[e](t,function(){n(o)}):a[e](t)}),this}})}(jindo.$ElementList.prototype),jindo.$S=function(t){var e=arguments.callee;return"undefined"==typeof t&&(t=""),t instanceof e?t:this instanceof e?void(this._str=t+""):new e(t)},jindo.$S.prototype.$value=function(){return this._str},jindo.$S.prototype.toString=jindo.$S.prototype.$value,jindo.$S.prototype.trim=function(){return"".trim?jindo.$S.prototype.trim=function(){return jindo.$S(this._str.trim())}:jindo.$S.prototype.trim=function(){return jindo.$S(this._str.replace(/^(\s|\u3000)+/g,"").replace(/(\s|\u3000)+$/g,""))},jindo.$S(this.trim())},jindo.$S.prototype.escapeHTML=function(){var t={'"':"quot","&":"amp","<":"lt",">":"gt","'":"#39"},e=this._str.replace(/[<>&"']/g,function(e){return t[e]?"&"+t[e]+";":e});return jindo.$S(e)},jindo.$S.prototype.stripTags=function(){return jindo.$S(this._str.replace(/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/gi,""))},jindo.$S.prototype.times=function(t){for(var e=[],n=0;n<t;n++)e[e.length]=this._str;return jindo.$S(e.join(""))},jindo.$S.prototype.unescapeHTML=function(){var t={quot:'"',amp:"&",lt:"<",gt:">","#39":"'"},e=this._str.replace(/&([a-z]+|#[0-9]+);/g,function(e,n){return t[n]?t[n]:e});return jindo.$S(e)},jindo.$S.prototype.escape=function(){var t=this._str.replace(/([\u0080-\uFFFF]+)|[\n\r\t"'\\]/g,function(t,e,n){return e?escape(e).replace(/%/g,"\\"):(n={"\n":"\\n","\r":"\\r","\t":"\\t"})[t]?n[t]:"\\"+t});return jindo.$S(t)},jindo.$S.prototype.bytes=function(t){var e=0,n=0,i=0,o=this._str.length,a=(document.charset||document.characterSet||document.defaultCharset)+"",s,r;if("undefined"==typeof t?s=!1:t.constructor==Number?(s=!0,r=t):t.constructor==Object?(a=t.charset||a,r=t.size||!1,s=!!r):s=!1,"utf-8"==a.toLowerCase()){for(i=0;i<o;i++)if(e=this._str.charCodeAt(i),n+=e<128?1:e<2048?2:e<65536?3:4,s&&n>r){this._str=this._str.substr(0,i);break}}else for(i=0;i<o;i++)if(n+=this._str.charCodeAt(i)>128?2:1,s&&n>r){this._str=this._str.substr(0,i);break}return s?this:n},jindo.$S.prototype.parseString=function(){for(var t=this._str.split(/&/g),e,n,i,o={},a=!1,s=0;s<t.length;s++){n=t[s].substring(0,e=t[s].indexOf("=")),a=!1;try{i=decodeURIComponent(t[s].substring(e+1))}catch(r){a=!0,i=decodeURIComponent(unescape(t[s].substring(e+1)))}"[]"==n.substr(n.length-2,2)?(n=n.substring(0,n.length-2),"undefined"==typeof o[n]&&(o[n]=[]),o[n][o[n].length]=a?escape(i):i):o[n]=a?escape(i):i}return o},jindo.$S.prototype.escapeRegex=function(){var t=this._str,e=/([\?\.\*\+\-\/\(\)\{\}\[\]\:\!\^\$\\\|])/g;return jindo.$S(t.replace(e,"\\$1"))},jindo.$S.prototype.format=function(){var t=arguments,e=0,n=this._str.replace(/%([ 0])?(-)?([1-9][0-9]*)?([bcdsoxX])/g,function(n,i,o,a,s){var r=t[e++],h="",l="";if(a=a?+a:0,"s"==s)h=r+"";else if(" bcdoxX".indexOf(s)>0){if("number"!=typeof r)return"";h="c"==s?String.fromCharCode(r):r.toString({b:2,d:10,o:8,x:16,X:16}[s])," X".indexOf(s)>0&&(h=h.toUpperCase())}return h.length<a&&(l=jindo.$S(i||" ").times(a-h.length).toString()),"-"==o?h+=l:h=l+h,h});return jindo.$S(n)},jindo.$Document=function(t){var e=arguments.callee;return t instanceof e?t:this instanceof e?(this._doc=t||document,void(this._docKey="Standards"==this.renderingMode()?"documentElement":"body")):new e(t)},jindo.$Document.prototype.$value=function(){return this._doc},jindo.$Document.prototype.scrollSize=function(){var t=navigator.userAgent.indexOf("WebKit")>-1,e=this._doc[t?"body":this._docKey];return{width:Math.max(e.scrollWidth,e.clientWidth),height:Math.max(e.scrollHeight,e.clientHeight)}},jindo.$Document.prototype.scrollPosition=function(){var t=navigator.userAgent.indexOf("WebKit")>-1,e=this._doc[t?"body":this._docKey];return{left:e.scrollLeft||window.pageXOffset||window.scrollX||0,top:e.scrollTop||window.pageYOffset||window.scrollY||0}},jindo.$Document.prototype.clientSize=function(){var t=navigator.userAgent,e=this._doc[this._docKey],n=t.indexOf("WebKit")>-1&&t.indexOf("Chrome")==-1;return n?{width:window.innerWidth,height:window.innerHeight}:{width:e.clientWidth,height:e.clientHeight}},jindo.$Document.prototype.renderingMode=function(){var t=navigator.userAgent,e=jindo.$Agent().navigator().ie,n=t.indexOf("WebKit")>-1&&t.indexOf("Chrome")<0&&navigator.vendor.indexOf("Apple")>-1,i;return i="compatMode"in this._doc?"CSS1Compat"==this._doc.compatMode?"Standards":e?"Quirks":"Almost":n?"Standards":"Quirks"},jindo.$Document.prototype.queryAll=function(t){return jindo.$$(t,this._doc)},jindo.$Document.prototype.query=function(t){return jindo.$$.getSingle(t,this._doc)},jindo.$Document.prototype.xpathAll=function(t){return jindo.$$.xpath(t,this._doc)},jindo.$Form=function(t){var e=arguments.callee;if(t instanceof e)return t;if(!(this instanceof e))return new e(t);if(t=jindo.$(t),!t.tagName||"FORM"!=t.tagName.toUpperCase())throw new Error("The element should be a FORM element");this._form=t},jindo.$Form.prototype.$value=function(){return this._form},jindo.$Form.prototype.serialize=function(){var t=this,e={},n=arguments.length,i=function(n){var i=t.value(n);"undefined"!=typeof i&&(e[n]=i)};if(0==n)jindo.$A(this.element()).forEach(function(t){t.name&&i(t.name)});else for(var o=0;o<n;o++)i(arguments[o]);return jindo.$H(e).toQueryString()},jindo.$Form.prototype.element=function(t){return arguments.length>0?this._form[t]:this._form.elements},jindo.$Form.prototype.enable=function(){var t=arguments[0];if("object"==typeof t){var e=this;return jindo.$H(t).forEach(function(t,n){e.enable(n,t)}),this}var n=this.element(t);if(!n)return this;if(n=1==n.nodeType?[n]:n,arguments.length<2){var i=!0;return jindo.$A(n).forEach(function(t){t.disabled&&(i=!1,jindo.$A.Break())}),i}var o=arguments[1];return jindo.$A(n).forEach(function(t){t.disabled=!o}),this},jindo.$Form.prototype.value=function(t){if("object"==typeof t){var e=this;return jindo.$H(t).forEach(function(t,n){e.value(n,t)}),this}var n=this.element(t);if(!n)throw new Error("The element is not exist");if(n=1==n.nodeType?[n]:n,arguments.length>1){var i=arguments[1];return jindo.$A(n).forEach(function(t){switch(t.type){case"radio":case"checkbox":t.checked=t.value==i;break;case"select-one":for(var e=-1,n=0,o=t.options.length;n<o;n++)t.options[n].value==i&&(e=n);t.selectedIndex=e;break;default:t.value=i}}),this}var o=[];return jindo.$A(n).forEach(function(t){switch(t.type){case"radio":case"checkbox":t.checked&&o.push(t.value);break;case"select-one":t.selectedIndex!=-1&&o.push(t.options[t.selectedIndex].value);break;default:o.push(t.value)}}),o.length>1?o:o[0]},jindo.$Form.prototype.submit=function(t,e){var n=null;return"string"==typeof t&&(n=this._form.target,this._form.target=t),"function"==typeof t&&(e=t),"undefined"==typeof e||e(this._form)?(this._form.submit(),null!==n&&(this._form.target=n),this):this},jindo.$Form.prototype.reset=function(t){return"undefined"==typeof t||t(this._form)?(this._form.reset(),this):this},jindo.$Template=function(t){var e=null,n="",i=arguments.callee;return t instanceof i?t:this instanceof i?("undefined"==typeof t?t="":(e=document.getElementById(t)||t)&&e.tagName&&(n=e.tagName.toUpperCase())&&("TEXTAREA"==n||"SCRIPT"==n&&"text/template"==e.getAttribute("type"))&&(t=(e.value||e.innerHTML).replace(/^\s+|\s+$/g,"")),void(this._str=t+"")):new i(t)},jindo.$Template.splitter=/(?!\\)[\{\}]/g,jindo.$Template.pattern=/^(?:if (.+)|elseif (.+)|for (?:(.+)\:)?(.+) in (.+)|(else)|\/(if|for)|=(.+)|js (.+)|set (.+))$/,jindo.$Template.prototype.process=function(data){
var key="\x01",leftBrace="\x02",rightBrace="\x03",tpl=(" "+this._str+" ").replace(/\\{/g,leftBrace).replace(/\\}/g,rightBrace).replace(/(?!\\)\}\{/g,"}"+key+"{").split(jindo.$Template.splitter),i=tpl.length,map={'"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r","\t":"\\t","\f":"\\f"},reg=[/(["'](?:(?:\\.)+|[^\\["']+)*["']|[a-zA-Z_][\w\.]*)/g,/[\n\r\t\f"\\]/g,/^\s+/,/\s+$/,/#/g],cb=[function(t){return'"'==t.substring(0,1)||"'"==t.substring(0,1)||"null"==t?t:"d."+t},function(t){return map[t]||t},"",""],stm=[],lev=0;if(tpl[0]=tpl[0].substr(1),tpl[i-1]=tpl[i-1].substr(0,tpl[i-1].length-1),i<2)return tpl[0];tpl=jindo.$A(tpl).reverse().$value();for(var delete_info;i--;)i%2?tpl[i]=tpl[i].replace(jindo.$Template.pattern,function(){var t=arguments;if(t[10])return t[10].replace(/(\w+)(?:\s*)=(?:\s*)(?:([a-zA-Z0-9_]+)|(.+))$/g,function(){var t=arguments,e="d."+t[1]+"=";return e+=t[2]?"d."+t[2]:t[3].replace(/(=(?:[a-zA-Z_][\w\.]*)+)/g,function(t){return"="==t.substring(0,1)?"d."+t.replace("=",""):t})})+";";if(t[9])return"s[i++]="+t[9].replace(/(=(?:[a-zA-Z_][\w\.]*)+)/g,function(t){return"="==t.substring(0,1)?"d."+t.replace("=",""):t})+";";if(t[8])return"s[i++]= d."+t[8]+";";if(t[1])return"if("+t[1].replace(reg[0],cb[0]).replace(/d\.(typeof) /,"$1 ").replace(/ d\.(instanceof) d\./," $1 ")+"){";if(t[2])return"}else if("+t[2].replace(reg[0],cb[0]).replace(/d\.(typeof) /,"$1 ").replace(/ d\.(instanceof) d\./," $1 ")+"){";if(t[5]){delete_info=t[4];var e=[];return e.push("var t#=d."+t[5]+"||{},p#=isArray(t#),i#=0;"),e.push("for(var x# in t#){"),e.push("if(!t#.hasOwnProperty(x#)){continue;}"),e.push("\tif( (p# && isNaN(i#=parseInt(x#))) || (!p# && !t#.propertyIsEnumerable(x#)) ) continue;"),e.push("\td."+t[4]+"=t#[x#];"),e.push(t[3]?"d."+t[3]+"=p#?i#:x#;":""),e.join("").replace(reg[4],lev++)}return t[6]?"}else{":t[7]?"for"==t[7]?"delete d."+delete_info+"; };":"};":t[0]}):tpl[i]==key?tpl[i]="":tpl[i]&&(tpl[i]='s[i++]="'+tpl[i].replace(reg[1],cb[1])+'";');tpl=jindo.$A(tpl).reverse().$value().join("").replace(new RegExp(leftBrace,"g"),"{").replace(new RegExp(rightBrace,"g"),"}");var _aStr=[];return _aStr.push("var s=[],i=0;"),_aStr.push('function isArray(o){ return Object.prototype.toString.call(o) == "[object Array]" };'),_aStr.push(tpl),_aStr.push('return s.join("");'),tpl=eval("false||function(d){"+_aStr.join("")+"}"),tpl=tpl(data)},jindo.$Date=function(t){var e=arguments,n="",i=arguments.callee;if(t&&t instanceof i)return t;if(!(this instanceof i))return new i(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);if("string"==(n=typeof t))if(/(\d\d\d\d)(?:-?(\d\d)(?:-?(\d\d)))/.test(t))try{this._date=new Date(t),this._date.toISOString?"Invalid Date"==this._date.toISOString()&&(this._date=jindo.$Date.makeISO(t)):this._date=jindo.$Date.makeISO(t)}catch(o){this._date=jindo.$Date.makeISO(t)}else this._date=i.parse(t);else if("number"==n)if("undefined"==typeof e[1])this._date=new Date(t);else{for(var a=0;a<7;a++)"number"!=typeof e[a]&&(e[a]=1);this._date=new Date(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}else"object"==n&&t.constructor==Date?((this._date=new Date).setTime(t.getTime()),this._date.setMilliseconds(t.getMilliseconds())):this._date=new Date;this._names={};for(var a in jindo.$Date.names)jindo.$Date.names.hasOwnProperty(a)&&(this._names[a]=jindo.$Date.names[a])},jindo.$Date.makeISO=function(t){var e=t.match(/(\d\d\d\d)(?:-?(\d\d)(?:-?(\d\d)(?:[T ](\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|(?:([-+])(\d\d)(?::?(\d\d))?)?)?)?)?)?/),n=parseInt(e[4]||0),i=parseInt(e[5]||0);return"Z"==e[8]?n+=jindo.$Date.utc:"+"!=e[9]&&"-"!=e[9]||(n+=jindo.$Date.utc-parseInt(e[9]+e[10]),i+=parseInt(e[9]+e[11])),new Date(e[1]||0,parseInt(e[2]||0)-1,e[3]||0,n,i,e[6]||0,e[7]||0)},jindo.$Date.names={month:["January","Febrary","March","April","May","June","July","August","September","October","Novermber","December"],s_month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s_day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampm:["AM","PM"]},jindo.$Date.utc=9,jindo.$Date.now=function(){return Date.now()},jindo.$Date.prototype.name=function(t){if(!arguments.length)return this._names;for(var e in t)t.hasOwnProperty(e)&&(this._names[e]=t[e])},jindo.$Date.parse=function(t){return new Date(Date.parse(t))},jindo.$Date.prototype.$value=function(){return this._date},jindo.$Date.prototype.format=function(t){var e={},n=this._date,i=this.name(),o=this;return(t||"").replace(/[a-z]/gi,function a(t){if("undefined"!=typeof e[t])return e[t];switch(t){case"d":case"j":return e.j=n.getDate(),e.d=(e.j>9?"":"0")+e.j,e[t];case"l":case"D":case"w":case"N":return e.w=n.getDay(),e.N=e.w?e.w:7,e.D=i.s_day[e.w],e.l=i.day[e.w],e[t];case"S":return(e.S=["st","nd","rd"][n.getDate()])?e.S:e.S="th";case"z":return e.z=Math.floor((n.getTime()-new Date(n.getFullYear(),0,1).getTime())/864e5),e.z;case"m":case"n":return e.n=n.getMonth()+1,e.m=(e.n>9?"":"0")+e.n,e[t];case"L":return e.L=o.isLeapYear(),e.L;case"o":case"Y":case"y":return e.o=e.Y=n.getFullYear(),e.y=(e.o+"").substr(2),e[t];case"a":case"A":case"g":case"G":case"h":case"H":return e.G=n.getHours(),e.g=(e.g=e.G%12)?e.g:12,e.A=e.G<12?i.ampm[0]:i.ampm[1],e.a=e.A.toLowerCase(),e.H=(e.G>9?"":"0")+e.G,e.h=(e.g>9?"":"0")+e.g,e[t];case"i":return e.i=((e.i=n.getMinutes())>9?"":"0")+e.i,e.i;case"s":return e.s=((e.s=n.getSeconds())>9?"":"0")+e.s,e.s;case"u":return e.u=n.getMilliseconds(),e.u;case"U":return e.U=o.time(),e.U;default:return t}})},jindo.$Date.prototype.time=function(t){return"number"==typeof t?(this._date.setTime(t),this):this._date.getTime()},jindo.$Date.prototype.year=function(t){return"number"==typeof t?(this._date.setFullYear(t),this):this._date.getFullYear()},jindo.$Date.prototype.month=function(t){return"number"==typeof t?(this._date.setMonth(t),this):this._date.getMonth()},jindo.$Date.prototype.date=function(t){return"number"==typeof t?(this._date.setDate(t),this):this._date.getDate()},jindo.$Date.prototype.day=function(){return this._date.getDay()},jindo.$Date.prototype.hours=function(t){return"number"==typeof t?(this._date.setHours(t),this):this._date.getHours()},jindo.$Date.prototype.minutes=function(t){return"number"==typeof t?(this._date.setMinutes(t),this):this._date.getMinutes()},jindo.$Date.prototype.seconds=function(t){return"number"==typeof t?(this._date.setSeconds(t),this):this._date.getSeconds()},jindo.$Date.prototype.isLeapYear=function(){var t=this._date.getFullYear();return!((t%4||!(t%100))&&t%400)},jindo.$Window=function(t){var e=arguments.callee;return t instanceof e?t:this instanceof e?void(this._win=t||window):new e(t)},jindo.$Window.prototype.$value=function(){return this._win},jindo.$Window.prototype.resizeTo=function(t,e){return this._win.resizeTo(t,e),this},jindo.$Window.prototype.resizeBy=function(t,e){return this._win.resizeBy(t,e),this},jindo.$Window.prototype.moveTo=function(t,e){return this._win.moveTo(t,e),this},jindo.$Window.prototype.moveBy=function(t,e){return this._win.moveBy(t,e),this},jindo.$Window.prototype.sizeToContent=function(t,e){if("function"==typeof this._win.sizeToContent)this._win.sizeToContent();else{if(2!=arguments.length){var n,i,o=this._win,a=this._win.document;o.innerHeight?(n=o.innerWidth,i=o.innerHeight):a.documentElement&&a.documentElement.clientHeight?(n=a.documentElement.clientWidth,i=a.documentElement.clientHeight):a.body&&(n=a.body.clientWidth,i=a.body.clientHeight);var s,r,h=a.body.scrollHeight,l=a.body.offsetHeight;h>l?(s=a.body.scrollWidth,r=a.body.scrollHeight):(s=a.body.offsetWidth,r=a.body.offsetHeight),t=s-n,e=r-i}this.resizeBy(t,e)}return this},"undefined"==typeof jindo&&(jindo={},jindo.$Class=$Class,jindo.$Event=$Event,jindo.$H=$H,jindo.$Fn=$Fn),nhn.Component=jindo.$Class({_eventHandlers:null,_options:null,$init:function(){var t=this.constructor._instances;"undefined"==typeof t&&(this.constructor._instances=t=[]),t[t.length]=this,this._eventHandlers={},this._options={},this._options._setters={}},option:function(t,e){var n=typeof t;if("undefined"==n)return this._options;if("string"==n)return"undefined"!=typeof e?(this._options[t]=e,"function"==typeof this._options._setters[t]&&this._options._setters[t](e),this):this._options[t];if("object"==n){try{for(var i in t)this._options[i]=t[i],"function"==typeof this._options._setters[i]&&this._options._setters[i](t[i])}catch(o){}return this}},optionSetter:function(t,e){var n=typeof t;if("undefined"==n)return this._options._setters;if("string"==n)return"undefined"!=typeof e?(this._options._setters[t]=jindo.$Fn(e,this).bind(),this):this._options._setters[t];if("object"==n){try{for(var i in t)this._options._setters[i]=jindo.$Fn(t[i],this).bind()}catch(o){}return this}},fireEvent:function(t,e){var e=e?e instanceof jindo.$Event?e._event:e:{},n=this["on"+t],i=this._eventHandlers[t],o="function"==typeof n,a="undefined"!=typeof i;if(!o&&!a)return!0;var s=function(t){try{if(t instanceof Event)return!0}catch(e){}try{if(t instanceof MouseEvent)return!0}catch(e){}try{if(t instanceof KeyEvent)return!0}catch(e){}try{if(("cancelBubble"in t||"preventBubble"in t)&&"type"in t)return!0}catch(e){}return!1}(e);if(!s)try{"undefined"==typeof e._extends&&(e._extends=[],e.stop=function(){this._extends[this._extends.length-1].canceled=!0}),e._extends.push({type:t,canceled:!1}),e.type=t}catch(r){s=!0}s&&(e=jindo.$Event(e));for(var h=[e],l=2,p=arguments.length;l<p;l++)h.push(arguments[l]);if(o&&n.apply(this,h),a)for(var l=0,c;c=i[l];l++)c.apply(this,h);if(s)return!e.canceled;var u=e._extends.pop();return!u.canceled},attach:function(t,e){if(1==arguments.length)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(t,e){this.attach(e,t)},this).bind()),this;var n=this._eventHandlers[t];return"undefined"==typeof n&&(n=this._eventHandlers[t]=[]),n.push(e),this},detach:function(t,e){if(1==arguments.length)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(t,e){this.detach(e,t)},this).bind()),this;var n=this._eventHandlers[t];if("undefined"==typeof n)return this;for(var i=0,o;o=n[i];i++)if(o===e){n=n.splice(i,1);break}return this},detachAll:function(t){var e=this._eventHandlers;if(arguments.length)return"undefined"==typeof e[t]?this:(delete e[t],this);for(var n in e)delete e[n];return this}}),nhn.Component.factory=function(t,e){var n=[];"undefined"==typeof e&&(e={});for(var i=0;i<t.length;i++)try{obj=new this(t[i],e),n[n.length]=obj}catch(o){}return n},"undefined"==typeof window.nhn&&(window.nhn={}),nhn.husky||(nhn.husky={}),nhn.husky.oMockDebugger={log_MessageStart:function(){},log_MessageEnd:function(){},log_MessageStepStart:function(){},log_MessageStepEnd:function(){},log_CallHandlerStart:function(){},log_CallHandlerEnd:function(){},handleException:function(){},setApp:function(){}},nhn.husky.HuskyCore=jindo.$Class({name:"HuskyCore",aCallerStack:null,$init:function(t){this.htOptions=t||{},this.htOptions.oDebugger&&(nhn.husky.HuskyCore._cores||(nhn.husky.HuskyCore._cores=[],nhn.husky.HuskyCore.getCore=function(){return nhn.husky.HuskyCore._cores}),nhn.husky.HuskyCore._cores.push(this),this.htOptions.oDebugger.setApp(this)),this.messageQueue=[],this.oMessageMap={},this.oDisabledMessage={},this.aPlugins=[],this.appStatus=nhn.husky.APP_STATUS.NOT_READY,this.aCallerStack=[],this._fnWaitForPluginReady=jindo.$Fn(this._waitForPluginReady,this).bind(),this.registerPlugin(this)},setDebugger:function(t){this.htOptions.oDebugger=t,t.setApp(this)},exec:function(t,e,n){return this.appStatus==nhn.husky.APP_STATUS.NOT_READY?(this.messageQueue[this.messageQueue.length]={msg:t,args:e,event:n},!0):(this.exec=this._exec,void this.exec(t,e,n))},delayedExec:function(t,e,n,i){var o=jindo.$Fn(this.exec,this).bind(t,e,i);setTimeout(o,n)},_exec:function(t,e,n){var i=!1;if(!this.oDisabledMessage[t]){var o=[];if(e&&e.length)for(var a=e.length,s=0;s<a;s++)o[s]=e[s];n&&(o[o.length]=n),i=this._execMsgHandler("BEFORE",t,o),i&&(i=this._execMsgHandler("ON",t,o)),i&&(i=this._execMsgHandler("AFTER",t,o))}return i},registerPlugin:function(t){if(!t)throw"An error occured in registerPlugin(): invalid plug-in";if(t.nIdx=this.aPlugins.length,t.oApp=this,this.aPlugins[t.nIdx]=t,t.status!=nhn.husky.PLUGIN_STATUS.NOT_READY&&(t.status=nhn.husky.PLUGIN_STATUS.READY),this.appStatus!=nhn.husky.APP_STATUS.NOT_READY)for(var e in t)e.match(/^\$(LOCAL|BEFORE|ON|AFTER)_/)&&this.addToMessageMap(e,t);return this.exec("MSG_PLUGIN_REGISTERED",[t]),t.nIdx},disableMessage:function(t,e){this.oDisabledMessage[t]=e},registerBrowserEvent:function(t,e,n,i,o){i=i||[];var a=o?jindo.$Fn(this.delayedExec,this).bind(n,i,o):jindo.$Fn(this.exec,this).bind(n,i);return jindo.$Fn(a,this).attach(t,e)},run:function(t){this.htRunOptions=t||{},this._changeAppStatus(nhn.husky.APP_STATUS.WAITING_FOR_PLUGINS_READY);for(var e=this.messageQueue.length,n=0;n<e;n++){var i=this.messageQueue[n];this.exec(i.msg,i.args,i.event)}this._fnWaitForPluginReady()},acceptLocalBeforeFirstAgain:function(t,e){t._husky_bRun=!e},createMessageMap:function(t){this.oMessageMap[t]=[];for(var e=this.aPlugins.length,n=0;n<e;n++)this._doAddToMessageMap(t,this.aPlugins[n])},addToMessageMap:function(t,e){this.oMessageMap[t]&&this._doAddToMessageMap(t,e)},_changeAppStatus:function(t){this.appStatus=t,this.appStatus==nhn.husky.APP_STATUS.READY&&this.exec("MSG_APP_READY")},_execMsgHandler:function(t,e,n){var i="$"+t+"_"+e,o;this.oMessageMap[i]||this.createMessageMap(i);var a=this.oMessageMap[i],s=a.length;if(0===s)return!0;var r=!0;if(i.match(/^\$(BEFORE|ON|AFTER)_MSG_APP_READY$/)){for(o=0;o<s;o++)if(this._execHandler(a[o],i,n)===!1){r=!1;break}}else for(o=0;o<s;o++)if((a[o]._husky_bRun||(a[o]._husky_bRun=!0,"function"!=typeof a[o].$LOCAL_BEFORE_FIRST||this._execHandler(a[o],"$LOCAL_BEFORE_FIRST",[i,n])!==!1))&&("function"!=typeof a[o].$LOCAL_BEFORE_ALL||this._execHandler(a[o],"$LOCAL_BEFORE_ALL",[i,n])!==!1)&&this._execHandler(a[o],i,n)===!1){r=!1;break}return r},_execHandler:function(t,e,n){this.aCallerStack.push(t);try{var i=t[e].apply(t,n)}catch(o){throw o}return this.aCallerStack.pop(),i},_doAddToMessageMap:function(t,e){if("function"==typeof e[t]){for(var n=this.oMessageMap[t],i=0,o=n.length;i<o;i++)if(this.oMessageMap[t][i]==e)return;this.oMessageMap[t][i]=e}},_waitForPluginReady:function(){for(var t=!0,e=0;e<this.aPlugins.length;e++)if(this.aPlugins[e].status==nhn.husky.PLUGIN_STATUS.NOT_READY){t=!1;break}t?this._changeAppStatus(nhn.husky.APP_STATUS.READY):setTimeout(this._fnWaitForPluginReady,100)}}),nhn.husky.APP_STATUS={NOT_READY:0,WAITING_FOR_PLUGINS_READY:1,READY:2},nhn.husky.PLUGIN_STATUS={NOT_READY:0,READY:1},nhn.Effect=function(t){if(this instanceof arguments.callee)throw new Error("You can't create a instance of this");var e=/^(\-?[0-9\.]+)(%|px|pt|em)?$/,n=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i,i=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,o=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i,a=function(t){var a;return"number"==typeof t?a="":e.test(t)?(t=parseFloat(t),a=RegExp.$2):n.test(t)?(t=[parseInt(RegExp.$1),parseInt(RegExp.$2),parseInt(RegExp.$3)],a="color"):i.test(t=t.replace(o,"#$1$1$2$2$3$3"))&&(t=[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)],a="color"),{value:t,unit:a}};return function(e,n){var i;if(arguments.length>1?(e=a(e),n=a(n),i=n.unit):(n=a(e),e=null,i=n.unit),e&&n&&e.unit!=n.unit)throw new Error("unit error");e=e&&e.value,n=n&&n.value;var o,s,r=function(o){var a=e,s=n,r=function(e,n){return(n-e)*t(o)+e+i};if("color"==i){var h=parseInt(r(a[0],s[0]))<<16;h|=parseInt(r(a[1],s[1]))<<8,h|=parseInt(r(a[2],s[2])),h=h.toString(16).toUpperCase();for(var l=0;6-h.length;l++)h="0"+h;return"#"+h}return r(a,s)};return null===e&&(r.setStart=function(t){if(isNaN(parseInt(t))&&(t=0+i),t=a(t),t.unit!=i)throw new Error("unit eror");e=t.value}),r}},nhn.Effect.linear=nhn.Effect(function(t){return t}),nhn.Effect.easeIn=nhn.Effect(function(t){return y=Math.sqrt(1-t*t),1-y}),nhn.Effect.easeOut=nhn.Effect(function(t){return y=Math.sqrt((2-t)*t),y}),nhn.Effect.overphase=nhn.Effect(function(t){return t/=.69643223,y=Math.sqrt((2-t)*t)+.1,y.toFixed(7)}),nhn.Effect.bounce=nhn.Effect(function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),nhn.Effect.easeInQuint=nhn.Effect(function(t){return Math.pow(t,5)}),nhn.Effect.easeOutQuint=nhn.Effect(function(t){return Math.pow(t-1,5)+1}),function(){var t=jindo.$Element.prototype.css;jindo.$Element.prototype.css=function(e,n){return"opacity"==e?"undefined"!=typeof n?this.opacity(parseFloat(n)):this.opacity():"undefined"!=n?t.call(this,e,n):t.call(this,e)}}(),nhn.husky.CorePlugin=jindo.$Class({name:"CorePlugin",htLazyLoadRequest_plugins:{},htLazyLoadRequest_allFiles:{},htHTMLLoaded:{},$AFTER_MSG_APP_READY:function(){this.oApp.exec("EXEC_ON_READY_FUNCTION",[])},$ON_ADD_APP_PROPERTY:function(t,e){this.oApp[t]=e},$ON_REGISTER_BROWSER_EVENT:function(t,e,n,i,o){this.oApp.registerBrowserEvent(t,e,n,i,o)},$ON_DISABLE_MESSAGE:function(t){this.oApp.disableMessage(t,!0)},$ON_ENABLE_MESSAGE:function(t){this.oApp.disableMessage(t,!1)},$ON_LOAD_FULL_PLUGIN:function(t,e,n,i,o){var a=i.$this||i,s=t[0];this.htLazyLoadRequest_plugins[s]||(this.htLazyLoadRequest_plugins[s]={nStatus:1,sContents:""}),2===this.htLazyLoadRequest_plugins[s].nStatus?this.oApp.exec("MSG_FULL_PLUGIN_LOADED",[s,e,n,i,o,!1]):this._loadFullPlugin(t,e,n,i,o,0)},_loadFullPlugin:function(t,e,n,i,o,a){jindo.LazyLoading.load(nhn.husky.SE2M_Configuration.LazyLoad.sJsBaseURI+"/"+t[a],jindo.$Fn(function(t,e,n,i,o,a){var s=t[a],r=t[0];return a==t.length-1?(this.htLazyLoadRequest_plugins[r].nStatus=2,void this.oApp.exec("MSG_FULL_PLUGIN_LOADED",[t,e,n,i,o])):void this._loadFullPlugin(t,e,n,i,o,a+1)},this).bind(t,e,n,i,o,a),"utf-8")},$ON_MSG_FULL_PLUGIN_LOADED:function(aFilenames,sClassName,sMsgName,oThisRef,oArguments,oRes){for(var oPluginRef=oThisRef.$this||oThisRef,sFilename=aFilenames,i=0,nLen=oThisRef._huskyFLT.length;i<nLen;i++){var sLoaderHandlerName="$BEFORE_"+oThisRef._huskyFLT[i],oRemoveFrom=oThisRef.$this&&oThisRef[sLoaderHandlerName]?oThisRef:oPluginRef;oRemoveFrom[sLoaderHandlerName]=null,this.oApp.createMessageMap(sLoaderHandlerName)}var oPlugin=eval(sClassName+".prototype"),bAcceptLocalBeforeFirstAgain=!1;"function"!=typeof oPluginRef.$LOCAL_BEFORE_FIRST&&this.oApp.acceptLocalBeforeFirstAgain(oPluginRef,!0);for(var x in oPlugin)oThisRef.$this&&(!oThisRef[x]||"function"==typeof oPlugin[x]&&"constructor"!=x)&&(oThisRef[x]=jindo.$Fn(oPlugin[x],oPluginRef).bind()),oPlugin[x]&&(!oPluginRef[x]||"function"==typeof oPlugin[x]&&"constructor"!=x)&&(oPluginRef[x]=oPlugin[x],x.match(/^\$(LOCAL|BEFORE|ON|AFTER)_/)&&this.oApp.addToMessageMap(x,oPluginRef));bAcceptLocalBeforeFirstAgain&&this.oApp.acceptLocalBeforeFirstAgain(oPluginRef,!0),oThisRef.$this||this.oApp.exec(sMsgName,oArguments)},$ON_LOAD_HTML:function(t){if(!this.htHTMLLoaded[t]){var e=jindo.$("_llh_"+t);if(e){this.htHTMLLoaded[t]=!0;var n=document.createElement("DIV");for(n.innerHTML=e.value;n.firstChild;)e.parentNode.insertBefore(n.firstChild,e)}}},$ON_EXEC_ON_READY_FUNCTION:function(){"function"==typeof this.oApp.htRunOptions.fnOnAppReady&&this.oApp.htRunOptions.fnOnAppReady()}}),nhn.Timer=jindo.$Class({_timer:null,_lastest:null,_remained:0,_delay:null,_callback:null,$init:function(){},start:function(t,e){var n=this;return this.abort(),this.fireEvent("wait"),this._lastest=(new Date).getTime(),this._remained=0,this._delay=e,this._callback=t,this.resume(),!0},_clearTimer:function(){var t=!1;return this._timer&&(clearInterval(this._timer),t=!0),this._timer=null,t},abort:function(){var t;return(t=this._clearTimer())&&this.fireEvent("abort"),t},pause:function(){var t=(new Date).getTime()-this._lastest;return this._remained=this._delay-t,this._remained<0&&(this._remained=0),this._clearTimer()},resume:function(){var t=this;if(!this._callback)return!1;var e=function(n,i){t._clearTimer(),t._timer=setInterval(function(){if(t._timer){t.fireEvent("run");var n=t._callback();if(t._lastest=(new Date).getTime(),!n)return clearInterval(t._timer),t._timer=null,void t.fireEvent("end");t.fireEvent("wait"),i&&e(t._delay,!1)}},n)};return this._remained?(e(this._remained,!0),this._remained=0):e(this._delay,!1),!0}}).extend(nhn.Component),nhn.Transition=jindo.$Class({_nFPS:15,_aQueue:null,_oTimer:null,_bIsWaiting:!0,_bIsPlaying:!1,$init:function(t){this._aQueue=[],this._oTimer=new nhn.Timer,this.option({effect:nhn.Effect.linear,correction:!1}),this.option(t||{})},fps:function(t){return arguments.length>0?(this._nFPS=t,this):this._nFPS},abort:function(){this._aQueue=[],this._oTimer.abort(),this._bIsPlaying&&this.fireEvent("abort"),this._bIsWaiting=!0,this._bIsPlaying=!1,this._oNow=null},start:function(){return this.abort(),this.precede.apply(this,arguments)},pause:function(){this._oTimer.abort()&&this.fireEvent("pause")},resume:function(){var t=this;this._oNow&&(0==this._bIsWaiting&&1==this._bIsPlaying&&this.fireEvent("resume"),this._goOn(),this._bIsWaiting=!1,this._bIsPlaying=!0,this._oTimer.start(function(){var e=!t._goOn();return e&&(t._bIsWaiting=!0,setTimeout(function(){t._try()},0)),!e},this._oNow.interval))},precede:function(t,e){if("function"==typeof t)this._aQueue.push(t);else{for(var n={duration:t,lists:[]},i=arguments,o=i.length,a=1;a<o-1;a+=2){var s=[];jindo.$H(i[a+1]).forEach(function(t,e){/^(@|style\.)(\w+)/i.test(e)?s.push(["csses",RegExp.$2,t]):s.push(["attrs",e,t])}),n.lists.push({element:"tagName"in i[a]?jindo.$Element(i[a]):i[a],values:s})}this._aQueue.push(n)}return this._try(),this},_dequeue:function(){var t=this._aQueue.shift();if(t){if("function"==typeof t)return t;for(var e=t.lists,n=0,i=e.length;n<i;n++)for(var o=e[n].element,a=0,s=e[n].values,r=s.length;a<r;a++){var h=s[a][0],l=s[a][2];if("function"!=typeof l&&(l=l instanceof Array?this.option("effect")(l[0],l[1]):this.option("effect")(l)),l.setStart)if(o instanceof jindo.$Element)switch(h){case"csses":l.setStart(o.css(s[a][1]));break;case"attrs":l.setStart(o.$value()[s[a][1]])}else l.setStart(o.getter(s[a][1]));s[a][2]=l}return t}},_try:function(){var t=this;if(!this._bIsWaiting)return!1;var e;do{if(e=this._dequeue(),!e)return this._bIsPlaying&&(this._bIsPlaying=!1,this.abort(),this.fireEvent("end")),!1;this._bIsPlaying||this.fireEvent("start"),"function"==typeof e&&(this._bIsPlaying=!0,e.call(this))}while("function"==typeof e);var n=1e3/this._nFPS;return this._oNow={lists:e.lists,ratio:0,interval:n,step:n/e.duration},this.resume(),!0},_goOn:function(){var t=this._oNow,e=t.ratio,n=t.lists,i={};e=parseFloat(e.toFixed(5)),e>1&&(e=1);for(var o=this.option("correction"),a=0,s=n.length;a<s;a++)for(var r=n[a].element,h=0,l=n[a].values,p=l.length;h<p;h++){if(r instanceof jindo.$Element){var c=l[h][1],u=l[h][2](e);if(o){var d=/[0-9]([^0-9]*)$/.test(u)&&RegExp.$1||"";if(d){var f=parseFloat(u),m,_=f;f+=i[c]||0,f=parseFloat(f.toFixed(5)),a==s-1?u=Math.round(f)+d:(m=parseFloat(/(\.[0-9]+)$/.test(f)&&RegExp.$1||0),u=parseInt(f)+d,i[c]=m)}}switch(l[h][0]){case"csses":"opacity"==c?r.opacity(u):r.css(c,u);break;case"attrs":r.$value()[c]=u}}else r.setter(l[h][1],l[h][2](e));this.fireEvent("playing",{element:r,sKey:c,sValue:u})}return t.ratio+=t.step,1!=e}}).extend(nhn.Component);var punycode=new function t(){function t(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:r}function e(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function n(t,e,n){var i;for(t=n?Math.floor(t/h):t>>1,t+=Math.floor(t/e),i=0;t>(r-l)*p>>1;i+=r)t=Math.floor(t/(r-l));return Math.floor(i+(r-l+1)*t/(t+c))}function i(t,e){return t-=(t-97<26)<<5,t+((!e&&t-65<26)<<5)}this.utf16={decode:function(t){for(var e=[],n=0,i=t.length,o,a;n<i;){if(o=t.charCodeAt(n++),55296===(63488&o)){if(a=t.charCodeAt(n++),55296!==(64512&o)||56320!==(64512&a))throw new RangeError("UTF-16(decode)- Illegal UTF-16 sequence");o=((1023&o)<<10)+(1023&a)+65536}e.push(o)}return e},encode:function(t){for(var e=[],n=0,i=t.length,o;n<i;){if(o=t[n++],55296===(63488&o))throw new RangeError("UTF-16(encode)- Illegal UTF-16 value");o>65535&&(o-=65536,e.push(String.fromCharCode(o>>>10&1023|55296)),o=56320|1023&o),e.push(String.fromCharCode(o))}return e.join("")}};var o=128,a=72,s="-",r=36,h=700,l=1,p=26,c=38,u=2147483647;this.decode=function(e,i){var h=[],c=[],d=e.length,f,m,_,g,v,y,E,T,M,b,O,S,P;for(f=o,_=0,g=a,v=e.lastIndexOf(s),v<0&&(v=0),y=0;y<v;++y){if(i&&(c[h.length]=e.charCodeAt(y)-65<26),e.charCodeAt(y)>=128)throw new RangeError("Illegal input >= 0x80");h.push(e.charCodeAt(y))}for(E=v>0?v+1:0;E<d;){for(T=_,M=1,b=r;;b+=r){if(E>=d)throw RangeError("punycode_bad_input(1)");if(O=t(e.charCodeAt(E++)),O>=r)throw RangeError("punycode_bad_input(2)");if(O>Math.floor((u-_)/M))throw RangeError("punycode_overflow(1)");if(_+=O*M,S=b<=g?l:b>=g+p?p:b-g,O<S)break;if(M>Math.floor(u/(r-S)))throw RangeError("punycode_overflow(2)");M*=r-S}if(m=h.length+1,g=n(_-T,m,0===T),Math.floor(_/m)>u-f)throw RangeError("punycode_overflow(3)");f+=Math.floor(_/m),_%=m,i&&c.splice(_,0,e.charCodeAt(E-1)-65<26),h.splice(_,0,f),_++}if(i)for(_=0,P=h.length;_<P;_++)c[_]&&(h[_]=String.fromCharCode(h[_]).toUpperCase().charCodeAt(0));return this.utf16.encode(h)},this.encode=function(t,h){var c,d,f,m,_,g,v,y,E,T,M,b;h&&(b=this.utf16.decode(t)),t=this.utf16.decode(t.toLowerCase());var O=t.length;if(h)for(g=0;g<O;g++)b[g]=t[g]!=b[g];var S=[];for(c=o,d=0,_=a,g=0;g<O;++g)t[g]<128&&S.push(String.fromCharCode(b?i(t[g],b[g]):t[g]));for(f=m=S.length,m>0&&S.push(s);f<O;){for(v=u,g=0;g<O;++g)M=t[g],M>=c&&M<v&&(v=M);if(v-c>Math.floor((u-d)/(f+1)))throw RangeError("punycode_overflow (1)");for(d+=(v-c)*(f+1),c=v,g=0;g<O;++g){if(M=t[g],M<c&&++d>u)return Error("punycode_overflow(2)");if(M==c){for(y=d,E=r;T=E<=_?l:E>=_+p?p:E-_,!(y<T);E+=r)S.push(String.fromCharCode(e(T+(y-T)%(r-T),0))),y=Math.floor((y-T)/(r-T));S.push(String.fromCharCode(e(y,h&&b[g]?1:0))),_=n(d,f+1,f==m),d=0,++f}}++d,++c}return S.join("")},this.ToASCII=function(t){for(var e=t.split("."),n=[],i=0;i<e.length;++i){var o=e[i];n.push(o.match(/[^A-Za-z0-9-]/)?"xn--"+punycode.encode(o):o)}return n.join(".")},this.ToUnicode=function(t){for(var e=t.split("."),n=[],i=0;i<e.length;++i){var o=e[i];n.push(o.match(/^xn--/)?punycode.decode(o.slice(4)):o)}return n.join(".")}};if(nhn.mapcore||(nhn.mapcore={}),nhn.mapservice||(nhn.mapservice={}),function(){var SSL=0===location.protocol.indexOf("https"),STATIC_IMG=SSL?"https://ssl.pstatic.net/static":"http://static.naver.net";nhn.mapcore.mapSpec={coordMode:0,minLevel:1,maxLevel:16,tileSize:256,minX:340901120,maxX:359494656,minY:141928960,maxY:157454848,_oScale:null,_oRowCount:null,_oColCount:null,SSL:SSL,STATIC_IMG:STATIC_IMG,emptyTileUrl:STATIC_IMG+"/maps/mapbg_sea.png",dotTileUrl:STATIC_IMG+"/maps/dot.gif",authentication:!0,isMobileMap:!1,pageURI:function(){var t=(window.location.host+"").split(":")[0],e=window.location.href+"",n=t;try{n=punycode.ToUnicode(t)}catch(i){}return t!==n&&(e=e.replace(t,n)),e}(),distancePerPixel:function(t){return!!this.isValidZoomLevel(t)&&Math.pow(2,12-t)},isValidZoomLevel:function(t){return!(void 0===t||t<this.minLevel||t>this.maxLevel)},getScale:function(t){return!!this.isValidZoomLevel(t)&&(this._oScale||this._initScale(),this._oScale[t])},refreshScale:function(){this._initScale(),this._initRowCount(),this._initColCount()},_initScale:function(){this._oScale={},this._oScale[1]=48828125e-12;for(var t=this.minLevel;t<this.maxLevel;t++)this._oScale[t+1]=2*this._oScale[t]},_initRowCount:function(){this._oRowCount={};for(var t=this.minLevel;t<=this.maxLevel;t++)this._oRowCount[t]=Math.ceil((this.maxX-this.minX)*this.getScale(t)/this.tileSize)},_initColCount:function(){this._oColCount={};for(var t=this.minLevel;t<=this.maxLevel;t++)this._oColCount[t]=Math.ceil((this.maxY-this.minY)*this.getScale(t)/this.tileSize)},getRowCount:function(t){return!!this.isValidZoomLevel(t)&&(this._oRowCount||this._initRowCount(),this._oRowCount[t])},getColCount:function(t){return!!this.isValidZoomLevel(t)&&(this._oColCount||this._initColCount(),this._oColCount[t])},getFolderName:function(t,e,n){var i=64,o=16,a="00000",s=n.toString(),r=Math.floor(t/i).toString(),h=Math.floor(e/i).toString(),l=Math.floor(r/o).toString(),p=Math.floor(h/o).toString(),c=t.toString(),u=e.toString();return a.substr(0,2-s.length)+s+"/"+a.substr(0,5-l.length)+l+"-"+a.substr(0,5-p.length)+p+"/"+a.substr(0,5-r.length)+r+"-"+a.substr(0,5-h.length)+h+"/"+a.substr(0,5-c.length)+c+"-"+a.substr(0,5-u.length)+u},checkHangul:function(t){for(var e="false",n=0;n<t.length;n++)if(t.charCodeAt(n)>=44032&&t.charCodeAt(n)<=55203){e="true";break}return"true"==e},getTileUrl:function(idX,idY,level,mapType,tileUrlRuleFn){var _location=eval(String.fromCharCode(100,111,99,117,109,101,110,116,46,108,111,99,97,116,105,111,110,46,104,114,101,102)),domainName=document.domain;if(this.checkHangul(domainName))if(domainName.indexOf(".")>-1){for(var domainSplitArray=domainName.split("."),k=0;k<domainSplitArray.length;k++)if(this.checkHangul(domainSplitArray[k])){var newSplitedDomainName=punycode.ToASCII(domainSplitArray[k]),newReplacedLocation=_location.replace(domainSplitArray[k],newSplitedDomainName);_location=newReplacedLocation}}else{var newDomainName=punycode.ToASCII(domainName),newReplacedLocation=_location.replace(domainName,newDomainName);_location=newReplacedLocation}var domain_check_routine1;if(_location.indexOf(String.fromCharCode(110,97,118,101,114,46,99,111,109))!=-1||_location.indexOf(String.fromCharCode(110,97,118,101,114,99,111,114,112,46,99,111,109))!=-1||_location.indexOf(String.fromCharCode(110,104,110,99,111,114,112,46,99,111,109))!=-1||_location.indexOf(String.fromCharCode(110,104,110,110,101,120,116,46,111,114,103))!=-1||_location.indexOf(String.fromCharCode(110,104,110,115,121,115,116,101,109,46,99,111,109))!=-1||_location.indexOf(String.fromCharCode(109,111,100,111,111,46,97,116))!=-1){var domain_check_routine2;if(!this.authentication||!this._checkValidRange(idX,idY,level,mapType))return this.emptyTileUrl;var url=tileUrlRuleFn(idX,idY,level);return url;var domain_check_routine3}var domain_check_routine4},_checkValidRange:function(t,e,n,i){return"undefined"!=typeof t&&"undefined"!=typeof e&&"undefined"!=typeof n&&"undefined"!=typeof i&&t>=0&&e>=0&&t<this.getRowCount(n)&&e<this.getColCount(n)},setMobileMap:function(t){1==t?this.isMobileMap=!0:this.isMobileMap=!1},getMobileMap:function(){return this.isTouchEnabled()},startTouch:function(){this._touchStarted=!0},endTouch:function(){delete this._touchStarted},isTouchStarted:function(){return this._touchStarted||!1},isTouchEnabled:function(){if(void 0!==this.touchEnabled)return this.touchEnabled;var t=!!("ontouchstart"in window);return this.touchEnabled=t,t}},nhn.mapcore.browser=jindo.$Agent().navigator(),nhn.mapcore.isSupportOpacity=nhn.mapcore.browser.ie&&nhn.mapcore.browser.version<7,nhn.mapcore.Image={createImage:function(t,e){var n=jindo.$("<img>");return nhn.mapcore.Util.disableSelection(n),n.src=t,n.galleryImg="no",n.style.cssText="position:absolute; border:0; margin:0; padding:0;max-width:none;max-height:none;min-width:none;min-height:none;",nhn.mapcore.isSupportOpacity&&/.png$/i.exec(t)&&nhn.mapcore.Image._handlePng(n,t),e&&jindo.$Element(n).css(e),n},changeSrc:nhn.mapcore.isSupportOpacity?function(t,e,n){n?this._handlePng(t,e):this._changeSrcOnly(t,e)}:function(t,e){this.changeSrc=this._changeSrcOnly,this.changeSrc(t,e)},_handlePng:function(t,e){t.style.visibility="hidden",t.clientWidth&&(t.style.width=t.clientWidth),t.clientHeight&&(t.style.height=t.clientHeight);var n=nhn.mapcore.mapSpec.dotTileUrl,i=function(){t.onerror=t.onload=null,t.src=n},o=function(){t.onerror=t.onload=null,t.style.visibility="visible",t.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"',sizingMethod='scale')",t.src=n};t.onerror=i,t.onload=o,t.src=e},_changeSrcOnly:function(t,e){t.src=e,t.onerror=function(){t.onerror=null,t.src=nhn.mapcore.mapSpec.dotTileUrl}},setEmptyTileUrl:function(t){nhn.mapcore.mapSpec.emptyTileUrl=t},setDotTileUrl:function(t){nhn.mapcore.mapSpec.dotTileUrl=t}}}(),nhn.mapcore.Util={emptyFunction:function(){},falseFunc:function(){
return!1},trueFunc:function(){return!0},extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&"undefined"==typeof t[n]&&(t[n]=e[n]);return t},bind:function(t,e){var n=t;return function(){return e.apply(n,arguments)}},disableSelection:function(t){var e=jindo.$Agent().navigator();if(e.ie||e.opera){t.unselectable="on",t.onselectstart=function(t){t=t||window.event,t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0};try{t.style.msUserSelect="none"}catch(n){}}else if(e.webkit)t.style.webkitUserSelect="none";else if(e.safari||e.chrome){try{t.style.KhtmlUserSelect="none"}catch(n){}t.style.webkitUserSelect="none"}else e.firefox&&(t.style.MozUserSelect="none")},enableSelection:function(t){var e=jindo.$Agent().navigator();if(e.ie||e.opera){t.unselectable="off",t.onselectstart=function(){};try{t.style.msUserSelect="auto"}catch(n){}}else if(e.webkit)t.style.webkitUserSelect="auto";else if(e.safari||e.chrome){try{t.style.KhtmlUserSelect="auto"}catch(n){}t.style.webkitUserSelect="auto"}else e.firefox&&(t.style.MozUserSelect="auto")},cssToNum:function(t){return 1*t.replace(/[^-|.|\d]/g,"")},fillOptions:function(t,e){var n={};for(var i in e)e.hasOwnProperty(i)&&"undefined"!=typeof i&&(t&&"undefined"!=typeof t[i]?n[i]=t[i]:n[i]=e[i]);return n},getCSSRule:function(t){var e=function(t){for(var e=document.styleSheets,n=e.length-1;n>=0;n--)try{for(var i=e[n],o=i.cssRules||i.rules,a=o.length-1;a>=0;a--){var s=o[a];if(s.selectorText.toLowerCase()==t.toLowerCase())return s.style||null}}catch(r){}return null},n=e(t);if(n)return n;var i=document.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=t+"{}":i.appendChild(document.createTextNode(t+"{}")),document.getElementsByTagName("head")[0].appendChild(i),e(t)},trim:function(t){var e=/^\s+|\s+$/g;return t.replace(e,"")},timeFormat:function(t){var e=Math.floor(t/60/60/24),n=Math.floor(t/60/60)%24,i=Math.floor(t/60)%60,o=Math.floor(t%60),a=[];return e&&a.push(e+"\uc77c"),n&&a.push(n+"\uc2dc\uac04"),(i||!e&&!n)&&a.push(i+"\ubd84"),a.join(" ")},setPNGImage:function(t){var e=t.src;if(/MSIE (5\.5|6)/.test(navigator.userAgent)&&/\.png$/i.test(e)){var n=nhn.mapcore.mapSpec.STATIC_IMG+"/maps/dot.gif",i="DXImageTransform.Microsoft.AlphaImageLoader";t.style.filter="progid:"+i+'(src="'+e+'", sizingMethod=scale)',t.src=n}},htmlSpecialCharsEncode:function(t){var e=jindo.$("<div>");e["textContent"in e?"textContent":"innerText"]=t;try{return e.innerHTML}finally{e=null}},htmlSpecialCharsDecode:function(t){var e=jindo.$("<div>");e.innerHTML=t;try{return e.textContent||e.innerText}finally{e=null}},mapSetClass:function(t,e,n){return this.mapGetClass(t,e)&&this.mapRemoveClass(t,e),t.className+=(t.className?" ":"")+e+(n instanceof Array?"("+n.join(",")+")":""),t},mapGetClass:function(t,e){var n=new RegExp("(^|\\s+)"+e+"(\\(([^)]*)\\))?(\\s+|$)","i"),i=n.test(t.className);return RegExp.$0=RegExp.$3,i?(RegExp.$3||"").split(","):null},mapRemoveClass:function(t,e){var n=new RegExp("(^|\\s+)"+e+"(\\(([^)]*)\\))?(\\s+|$)","i");return t.className=nhn.mapcore.Util.trim(t.className.replace(n,"$4")),t},mapGetParentByClass:function(t,e){var n=new RegExp("(^|\\s+)"+e+"(\\(([^)]*)\\))?(\\s+|$)","i"),i=!1;try{i="className"in t}catch(o){}for(;t&&i;t=t.parentNode)if(n.test(t.className))return RegExp.$0=RegExp.$3,t;return null},clientSize:function(){var t=new jindo.$Agent,e=t.navigator(),n=e.ie&&e.version<=6,i=e.ie&&e.version>6,o=e.firefox,a={};return n?(a.width=document.body.clientWidth,a.height=document.body.clientHeight):i?(a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight):(a.width=window.innerWidth,a.height=window.innerHeight),a}},function(){jindo.$Element.prototype.mapSetClass=function(t,e){return nhn.mapcore.Util.mapSetClass(this.$value(),t,e),this},jindo.$Element.prototype.mapGetClass=function(t){return nhn.mapcore.Util.mapGetClass(this.$value(),t)},jindo.$Element.prototype.mapRemoveClass=function(t){return nhn.mapcore.Util.mapRemoveClass(this.$value(),t),this},jindo.$Element.prototype.mapGetParentByClass=function(t){return jindo.$Element(nhn.mapcore.Util.mapGetParentByClass(this.$value(),t))}}(),nhn.mapcore.Util.Bubbler=jindo.$Class({$init:function(t){this._el=t,this._eventTypes={},this._fpEventHandler=jindo.$Fn(this._eventHandler,this)},attach:function(t,e){if("object"==typeof t){var n=arguments.callee;return jindo.$H(t).forEach(function(t,e){n.call(this,e,t)},this),this}var i=t.split(":"),o=i[0],a=i[1].toLowerCase(),s=a;"mouseenter"==s?s="mouseover":"mouseleave"==s&&(s="mouseout"),a in this._eventTypes||(this._eventTypes[a]=jindo.$H(),this._fpEventHandler.attach(this._el,s));var r=this._eventTypes[a];return r.hasKey(o)||r.$(o,jindo.$A()),r.$(o).push(e),this},detach:function(t,e){if("object"==typeof t){var n=arguments.callee;return jindo.$H(t).forEach(function(t,e){n.call(this,e,t)},this),this}var i=t.split(":"),o=i[0],a=i[1].toLowerCase(),s=this._eventTypes[a],r=s.$(o);if(r){var h=r.indexOf(e);h!=-1&&r.splice(h,1)}},_eventHandler:function(t){var e=t.type.toLowerCase(),n=null;"mouseover"==e?n="mouseenter":"mouseout"==e&&(n="mouseleave");var i=this._eventTypes[n||e];if(i){var o=t.element,a=t.relatedElement;i.forEach(function(e,i){var s=nhn.mapcore.Util.mapGetParentByClass(o,i);if(s||jindo.$H.Continue(),n){var r=nhn.mapcore.Util.mapGetParentByClass(a,i);s===r&&jindo.$H.Continue()}var h=nhn.mapcore.Util.mapGetClass(s,i);e.forEach(function(e){e(t,s,h)}),s=null},this)}t=null}}),function(){var t=parseInt(Math.random()*(new Date).getTime(),10);nhn.mapcore.Util.JSONP=jindo.$Class({$init:function(){var e=this,n="_JSONP_callbacks_"+t;this._uid="K"+parseInt(Math.random()*(new Date).getTime(),10),window[n][this._uid]=function(t){return function(n){return e._onResponse(n,t)}}},request:function(e,n){var i=parseInt(Math.random()*(new Date).getTime(),10),o=document.createElement("script");o.type="text/javascript",o.language="javascript",o.id=i,o.src=e+"?"+jindo.$H(n).toQueryString()+"&callback=_JSONP_callbacks_"+t+"."+this._uid+"("+i+")",document.body.insertBefore(o,document.body.firstChild)},_onResponse:function(t,e){var n=document.getElementById(e);n.parentNode.removeChild(n),this.fireEvent("load",{response:t})}}).extend(nhn.Component),window["_JSONP_callbacks_"+t]={}}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1}),Number.prototype.cutPoint=function(t){return parseFloat(this.toFixed(t))},function(){if(jindo.$Agent().navigator().ie){var t=jindo.$Element.prototype.html;jindo.$Element.prototype.html=function(e){if("string"==typeof e)for(var n=this.$value();n.firstChild;)n.removeChild(n.firstChild);return t.apply(this,arguments)},jindo.$Element=jindo.$Element}}(),nhn.mapcore.Util.fixEvent=function(){var t={_timer:null,_handlers:{},_defaultHandlers:{domready:function(){if(jindo.$Agent().navigator().ie){var t=this;this._size=this._getWindowSize(),this._timer=setInterval(function(){t._detectResize()},100),this._fire("resize")}},load:function(){this._timer&&(clearInterval(this._timer),this._timer=null)},resize:function(){}},_getWindowSize:function(){if(document.body)return document.body.clientWidth+"x"+document.body.clientHeight},_detectResize:function(){var t=this._getWindowSize();t!=this._size&&(this._fire("resize"),this._size=t)},_checkType:function(t){if(t=t.toLowerCase(),!/^(load|domready|resize)$/i.test(t))throw"Not supported event";return t},_fire:function(t){var e=this,n=this._handlers[t],i=this._defaultHandlers[t],o=function(){if(i.call(e),n)for(var t=0,o;o=n[t];t++)o()};"domready"==t?setTimeout(o,0):o()},attach:function(t,e){var t=this._checkType(t);this._handlers[t]||(this._handlers[t]=[]);var n=this._handlers[t];return n.push(e),this},detach:function(t,e){var t=this._checkType(t),n=this._handlers[t];if(!n)return this;var i=-1;if(n.indexOf)i=n.indexOf(e);else for(var o=0;fpItem=n[o];o++)if(fpItem===e){i=o;break}i!=-1&&n.splice(i,1)}},e=function(){var t=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t=!0}}))}catch(e){}return t}(),n=!!e&&{capture:!1,passive:!1},i=function(t,e,i){t.addEventListener?t.addEventListener(e,i,n):t.attachEvent?t.attachEvent("on"+e,i):el["on"+e]=i};if(/WebKit/i.test(navigator.userAgent))var o=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(o),t._fire("domready"))},10);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",function(){t._fire("domready")},!1);else if(document.attachEvent)var a=document.createElement("document:ready"),o=setInterval(function(){try{a.doScroll("left"),a=null,clearInterval(o),t._fire("domready")}catch(e){}},10);var s=null,r=jindo.$Agent().navigator().ie;return i(window,"resize",function(e){var n=r&&screen.deviceXDPI/screen.logicalXDPI>1;n?(window.clearTimeout(s),s=window.setTimeout(function(){t._fire("resize")},10)):t._fire("resize")}),i(window,"load",function(){t._fire("load")}),t}(),function(){var t=function(){var t=document.title;setTimeout(function(){document.title=t},0)};document.attachEvent&&(document.attachEvent("onmousedown",t),document.attachEvent("onkeydown",t))}(),jindo.$$.test&&!jindo.$$.test.overrided){var fpOrgTest=jindo.$$.test;jindo.$$.test=function(t,e){return!(!t.tagName||"shape"==t.tagName.toLowerCase())&&fpOrgTest.apply(jindo.$$,arguments)},jindo.$$.test.overrided=!0}!function(){var t={UTMK:{name:"UTMK",datum:"GRS80",lat0:38,lng0:127.5,a:6378137,b:6356752.314140356,falseNorthing:2e6,falseEasting:1e6,scaleFactor:.9996},TM128:{name:"TM128",datum:"Bessel",lat0:38,lng0:128,a:6377397.155,b:6356078.962818189,datum_params:[-145.907,505.034,685.756,-1.162,2.347,1.592,6.342],falseNorthing:6e5,falseEasting:4e5,scaleFactor:.9999},LatLng:{name:"LatLng",datum:"GRS80",a:6378137,b:6356752.314245179}},e={fromBesselToGRS80:{x0:-3159521.31,y0:4068151.32,z0:3748113.85},fromGRS80ToBessel:{x0:-3159666.86,y0:4068655.7,z0:3748799.65}},n=3.141592653589793,i=1.5707963267948966,o=6.283185307179586,a=180/n,s=n/180,r=1.0026,h=.3826834323650898,l=1e-10,p=6378137,c=484813681109536e-20,u=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},d=function(t){return.375*t*(1+.25*t*(1+.46875*t))},f=function(t){return.05859375*t*t*(1+.75*t)},m=function(t){return t*t*t*(35/3072)},_=function(t,e,n,i,o){return t*o-e*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)},g=function(t){return t<0?-1:1},v=function(t){return Math.abs(t)<n?t:t-g(t)*o},y=jindo.$Class({name:"nhn.mapcore.CoordConverter",$init:function(){this._setSystem(t.UTMK),this._setSystem(t.TM128),this._setSystem(t.LatLng)},inputFilter:function(t){return!!t&&this.toInner(t)},outputFilter:function(t){if(!t)return!1;switch(nhn.mapcore.mapSpec.coordMode){case 0:return this.toInner(t);case 1:return this.toUTMK(t);case 2:return this.toTM128(t);case 3:return this.toLatLng(t);default:return!1}},toInner:function(t){return!!t&&(t instanceof Array?this._toInnerBound(t):t instanceof Object&&"classname"in t&&this._toInnerPoint(t))},toUTMK:function(t){return!!t&&(t instanceof Array?this._toUTMKBound(t):t instanceof Object&&"classname"in t&&this._toUTMKPoint(t))},toTM128:function(t){return!!t&&(t instanceof Array?this._toTM128Bound(t):t instanceof Object&&"classname"in t&&this._toTM128Point(t))},toLatLng:function(t){return!!t&&(t instanceof Array?this._toLatLngBound(t):t instanceof Object&&"classname"in t&&this._toLatLngPoint(t))},fromInnerToUTMK:function(t){return!(!t||"Inner"!=t.classname)&&new nhn.mapcore.UTMK(parseFloat((t.x-34e7)/10),parseFloat((t.y-13e7)/10))},fromUTMKToInner:function(t){return!(!t||"UTMK"!=t.classname)&&new nhn.mapcore.Inner(parseInt(10*t.x+34e7),parseInt(10*t.y+13e7))},fromInnerToLatLng:function(t){if(!t||"Inner"!=t.classname)return!1;var e=this.fromInnerToUTMK(t);return this.fromUTMKToLatLng(e)},fromLatLngToInner:function(t){if(!t||"LatLng"!=t.classname)return!1;var e=this.fromLatLngToUTMK(t);return this.fromUTMKToInner(e)},fromInnerToTM128:function(t){if(!t||"Inner"!=t.classname)return!1;var e=this.fromInnerToUTMK(t);return this.fromUTMKToTM128(e)},fromTM128ToInner:function(t){if(!t||"TM128"!=t.classname)return!1;var e=this.fromTM128ToUTMK(t);return this.fromUTMKToInner(e)},fromTM128ToUTMK:function(e){if(!e||"TM128"!=e.classname)return!1;var n={x:e.x,y:e.y,z:0};return this._fromRectangularToGeodetic(t.TM128,n),this._transform(t.TM128,t.UTMK,n),this._fromGeodeticToRectangular(t.UTMK,n),new nhn.mapcore.UTMK(parseFloat(n.x.toFixed(1)),parseFloat(n.y.toFixed(1)))},fromTM128ToLatLng:function(e){if(!e||"TM128"!=e.classname)return!1;var n={x:e.x,y:e.y,z:0};return this._fromRectangularToGeodetic(t.TM128,n),this._transform(t.TM128,t.LatLng,n),this._fromGeodeticToLatLng(n),new nhn.mapcore.LatLng(parseFloat(n.y.toFixed(7)),parseFloat(n.x.toFixed(7)))},fromUTMKToTM128:function(e){if(!e||"UTMK"!=e.classname)return!1;var n={x:e.x,y:e.y,z:0};return this._fromRectangularToGeodetic(t.UTMK,n),this._transform(t.UTMK,t.TM128,n),this._fromGeodeticToRectangular(t.TM128,n),new nhn.mapcore.TM128(parseInt(n.x),parseInt(n.y))},fromUTMKToLatLng:function(e){if(!e||"UTMK"!=e.classname)return!1;var n={x:e.x,y:e.y,z:0};return this._fromRectangularToGeodetic(t.UTMK,n),this._fromGeodeticToLatLng(n),new nhn.mapcore.LatLng(parseFloat(n.y.toFixed(7)),parseFloat(n.x.toFixed(7)))},fromLatLngToTM128:function(e){if(!e||"LatLng"!=e.classname)return!1;var n={x:e.x,y:e.y,z:0};return this._fromLatLngToGeodetic(n),this._transform(t.LatLng,t.TM128,n),this._fromGeodeticToRectangular(t.TM128,n),new nhn.mapcore.TM128(parseInt(n.x),parseInt(n.y))},fromLatLngToUTMK:function(e){if(!e||"LatLng"!=e.classname)return!1;var n={x:e.x,y:e.y,z:0};return this._fromLatLngToGeodetic(n),this._transform(t.LatLng,t.UTMK,n),this._fromGeodeticToRectangular(t.UTMK,n),new nhn.mapcore.UTMK(parseFloat(n.x.toFixed(1)),parseFloat(n.y.toFixed(1)))},_toInnerPoint:function(t){if(!t)return!1;switch(this._getClassname(t)){case"Inner":return t;case"UTMK":return this.fromUTMKToInner(t);case"TM128":return this.fromTM128ToInner(t);case"LatLng":return this.fromLatLngToInner(t);default:return!1}},_toUTMKPoint:function(t){if(!t)return!1;switch(this._getClassname(t)){case"Inner":return this.fromInnerToUTMK(t);case"UTMK":return t;case"TM128":return this.fromTM128ToUTMK(t);case"LatLng":return this.fromLatLngToUTMK(t);default:return!1}},_toTM128Point:function(t){if(!t)return!1;switch(this._getClassname(t)){case"Inner":return this.fromInnerToTM128(t);case"UTMK":return this.fromUTMKToTM128(t);case"TM128":return t;case"LatLng":return this.fromLatLngToTM128(t);default:return!1}},_toLatLngPoint:function(t){if(!t)return!1;switch(this._getClassname(t)){case"Inner":return this.fromInnerToLatLng(t);case"UTMK":return this.fromUTMKToLatLng(t);case"TM128":return this.fromTM128ToLatLng(t);case"LatLng":return t;default:return!1}},_toInnerBound:function(t){if(!(t instanceof Array)||4!=t.length)return!1;var e,n;switch(this._getClassname(t)){case"Inner":return t;case"UTMK":e=this.fromUTMKToInner(new nhn.mapcore.UTMK(t[0],t[1])),n=this.fromUTMKToInner(new nhn.mapcore.UTMK(t[2],t[3]));break;case"TM128":e=this.fromTM128ToInner(new nhn.mapcore.TM128(t[0],t[1])),n=this.fromTM128ToInner(new nhn.mapcore.TM128(t[2],t[3]));break;case"LatLng":e=this.fromLatLngToInner(new nhn.mapcore.LatLng(t[1],t[0])),n=this.fromLatLngToInner(new nhn.mapcore.LatLng(t[3],t[2]));break;default:return!1}return new Array(e.x,e.y,n.x,n.y)},_toUTMKBound:function(t){if(!(t instanceof Array)||4!=t.length)return!1;var e,n;switch(this._getClassname(t)){case"Inner":e=this.fromInnerToUTMK(new nhn.mapcore.Inner(t[0],t[1])),n=this.fromInnerToUTMK(new nhn.mapcore.Inner(t[2],t[3]));break;case"UTMK":return t;case"TM128":e=this.fromTM128ToUTMK(new nhn.mapcore.TM128(t[0],t[1])),n=this.fromTM128ToUTMK(new nhn.mapcore.TM128(t[2],t[3]));break;case"LatLng":e=this.fromLatLngToUTMK(new nhn.mapcore.LatLng(t[1],t[0])),n=this.fromLatLngToUTMK(new nhn.mapcore.LatLng(t[3],t[2]));break;default:return!1}return new Array(e.x,e.y,n.x,n.y)},_toTM128Bound:function(t){if(!(t instanceof Array)||4!=t.length)return!1;var e,n;switch(this._getClassname(t)){case"Inner":e=this.fromInnerToTM128(new nhn.mapcore.Inner(t[0],t[1])),n=this.fromInnerToTM128(new nhn.mapcore.Inner(t[2],t[3]));break;case"UTMK":e=this.fromUTMKToTM128(new nhn.mapcore.UTMK(t[0],t[1])),n=this.fromUTMKToTM128(new nhn.mapcore.UTMK(t[2],t[3]));break;case"TM128":return t;case"LatLng":e=this.fromLatLngToTM128(new nhn.mapcore.LatLng(t[1],t[0])),n=this.fromLatLngToTM128(new nhn.mapcore.LatLng(t[3],t[2]));break;default:return!1}return new Array(e.x,e.y,n.x,n.y)},_toLatLngBound:function(t){if(!(t instanceof Array)||4!=t.length)return!1;var e,n;switch(this._getClassname(t)){case"Inner":e=this.fromInnerToLatLng(new nhn.mapcore.Inner(t[0],t[1])),n=this.fromInnerToLatLng(new nhn.mapcore.Inner(t[2],t[3]));break;case"UTMK":e=this.fromUTMKToLatLng(new nhn.mapcore.UTMK(t[0],t[1])),n=this.fromUTMKToLatLng(new nhn.mapcore.UTMK(t[2],t[3]));break;case"TM128":e=this.fromTM128ToLatLng(new nhn.mapcore.TM128(t[0],t[1])),n=this.fromTM128ToLatLng(new nhn.mapcore.TM128(t[2],t[3]));break;case"LatLng":return t;default:return!1}return new Array(e.x,e.y,n.x,n.y)},_getClassname:function(t){if(!t)return!1;var e;if(t instanceof Object&&"classname"in t)return t.classname;if(t instanceof Array)e=t[0];else if("number"==typeof t)e=t;else{if("string"!=typeof t)return!1;e=parseFloat(t)}return 0===e||e>=13e7?"Inner":e>0&&e<180&&e.toString().indexOf(".")>-1?"LatLng":e.toString().indexOf(".")==-1?"TM128":"UTMK"},_setSystem:function(t){return!!t&&(t.lat0*=s,t.lng0*=s,t.falseNorthing=void 0!=t.falseNorthing?parseFloat(t.falseNorthing):null,t.falseEasting=void 0!=t.falseEasting?parseFloat(t.falseEasting):null,t.scaleFactor=void 0!=t.scaleFactor?parseFloat(t.scaleFactor):null,t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.ep2=(t.a2-t.b2)/t.b2,t.datum_params&&t.datum_params.length>3&&(t.datum_params[3]*=c,t.datum_params[4]*=c,t.datum_params[5]*=c,t.datum_params[6]=t.datum_params[6]/1e6+1),"LatLng"!=t.name&&(t.e0=u(t.es),t.e1=d(t.es),t.e2=f(t.es),t.e3=m(t.es),t.ml0=t.a*_(t.e0,t.e1,t.e2,t.e3,t.lat0)),t)},_fromLatLngToGeodetic:function(t){t.x*=s,t.y*=s},_fromGeodeticToLatLng:function(t){t.x*=a,t.y*=a},_fromRectangularToGeodetic:function(t,e){var n,o,a,s,r=6,h,p;for(e.x-=t.falseEasting,e.y-=t.falseNorthing,n=(t.ml0+e.y/t.scaleFactor)/t.a,o=n,s=0;a=(n+t.e1*Math.sin(2*o)-t.e2*Math.sin(4*o)+t.e3*Math.sin(6*o))/t.e0-o,o+=a,!(Math.abs(a)<=l);s++)if(s>=r)return!1;if(Math.abs(o)<i){var c=Math.sin(o),u=Math.cos(o),d=Math.tan(o),f=t.ep2*Math.pow(u,2),m=Math.pow(f,2),_=Math.pow(d,2),y=Math.pow(_,2);n=1-t.es*Math.pow(c,2);var E=t.a/Math.sqrt(n),T=E*(1-t.es)/n,M=e.x/(E*t.scaleFactor),b=Math.pow(M,2);h=o-E*d*b/T*(.5-b/24*(5+3*_+10*f-4*m-9*t.ep2-b/30*(61+90*_+298*f+45*y-252*t.ep2-3*m))),p=v(t.lng0+M*(1-b/6*(1+2*_+f-b/20*(5-2*f+28*_-3*m+8*t.ep2+24*y)))/u)}else h=i*g(e.y),p=t.lng0;return e.x=p,e.y=h,!0},_fromGeodeticToRectangular:function(t,e){var n=v(e.x-t.lng0),i=Math.sin(e.y),o=Math.cos(e.y),a=o*n,s=Math.pow(a,2),r=t.ep2*Math.pow(o,2),h=Math.tan(e.y),l=Math.pow(h,2),p=1-t.es*Math.pow(i,2),c=t.a/Math.sqrt(p),u=t.a*_(t.e0,t.e1,t.e2,t.e3,e.y);return e.x=t.scaleFactor*c*a*(1+s/6*(1-l+r+s/20*(5-18*l+Math.pow(l,2)+72*r-58*t.ep2)))+t.falseEasting,e.y=t.scaleFactor*(u-t.ml0+c*h*(s*(.5+s/24*(5-l+9*r+4*Math.pow(r,2)+s/30*(61-58*l+Math.pow(l,2)+600*r-330*t.ep2)))))+t.falseNorthing,!0},_fromGeodeticToGeocentric:function(t,e){var o=e.x,a=e.y,s=e.z,r,h,l,p;if(a<-i&&a>-1.001*i)a=-i;else if(a>i&&a<1.001*i)a=i;else if(a<-i||a>i)return!1;return o>n&&(o-=2*n),h=Math.sin(a),p=Math.cos(a),l=h*h,r=t.a/Math.sqrt(1-t.es*l),e.x=(r+s)*p*Math.cos(o),e.y=(r+s)*p*Math.sin(o),e.z=(r*(1-t.es)+s)*h,!0},_fromGeocentricToGeodetic:function(t,e){var n=parseFloat(e.x),o=parseFloat(e.y),a=parseFloat(e.z),s,l,p,c,u,d,f,m,_,g,v,y,E,T,M,b,O=!1;if(0!=n)l=Math.atan2(o,n);else if(o>0)l=i;else if(o<0)l=-i;else if(O=!0,l=0,a>0)s=i;else{if(!(a<0))return s=i,p=-t.b,!1;s=-i}return u=n*n+o*o,c=Math.sqrt(u),d=a*r,m=Math.sqrt(d*d+u),g=d/m,y=c/m,v=g*g*g,f=a+t.b*t.ep2*v,b=c-t.a*t.es*y*y*y,_=Math.sqrt(f*f+b*b),E=f/_,T=b/_,M=t.a/Math.sqrt(1-t.es*E*E),p=T>=h?c/T-M:T<=-h?c/-T-M:a/E+M*(t.es-1),0==O&&(s=Math.atan(E/T)),e.x=l,e.y=s,e.z=p,!0},_transform:function(t,e,n){this._fromGeodeticToGeocentric(t,n),this._transDatum7(t,e,n),this._fromGeocentricToGeodetic(e,n)},_transDatum3:function(t,e,n){return t.datum==e.datum||("Bessel"==t.datum&&"GRS80"==e.datum?(n.x+=t.datum_params[0],n.y+=t.datum_params[1],n.z+=t.datum_params[2]):(n.x-=e.datum_params[0],n.y-=e.datum_params[1],n.z-=e.datum_params[2])),!0},_transDatum7:function(t,n,i){if(t.datum==n.datum)return!0;var o,a,s,r,h,l,p,c,u,d;return"Bessel"==t.datum&&"GRS80"==n.datum?(o=t.datum_params[0],a=t.datum_params[1],s=t.datum_params[2],r=t.datum_params[3],h=t.datum_params[4],l=t.datum_params[5],p=t.datum_params[6],c=i.x-e.fromBesselToGRS80.x0,u=i.y-e.fromBesselToGRS80.y0,d=i.z-e.fromBesselToGRS80.z0,i.x=p*(c+u*l-d*h)+e.fromBesselToGRS80.x0+o,i.y=p*(-c*l+u+d*r)+e.fromBesselToGRS80.y0+a,i.z=p*(c*h-u*r+d)+e.fromBesselToGRS80.z0+s):(o=n.datum_params[0],a=n.datum_params[1],s=n.datum_params[2],r=n.datum_params[3],h=n.datum_params[4],l=n.datum_params[5],p=Math.pow(n.datum_params[6],-1),c=i.x-e.fromGRS80ToBessel.x0-o,u=i.y-e.fromGRS80ToBessel.y0-a,d=i.z-e.fromGRS80ToBessel.z0-s,i.x=p*(c-u*l+d*h)+e.fromGRS80ToBessel.x0,i.y=p*(c*l+u-d*r)+e.fromGRS80ToBessel.y0,i.z=p*(-c*h+u*r+d)+e.fromGRS80ToBessel.z0),!0}});nhn.mapcore.CoordConverter=new y,nhn.mapcore.CoordSystem=t}();var noneCreationConv=function(){var t=nhn.mapcore.CoordConverter,e=nhn.mapcore.CoordSystem;return{fromLatLngToTM128:function(n){t._fromLatLngToGeodetic(n),t._transform(e.LatLng,e.TM128,n),t._fromGeodeticToRectangular(e.TM128,n),n.x=parseInt(n.x),n.y=parseInt(n.y)},fromInnerToUTMK:function(t){t.x=(t.x-34e7)/10,t.y=(t.y-13e7)/10},fromUTMKToTM128:function(n){t._fromRectangularToGeodetic(e.UTMK,n),t._transform(e.UTMK,e.TM128,n),t._fromGeodeticToRectangular(e.TM128,n),n.x=parseInt(n.x),n.y=parseInt(n.y)},fromUTMKToLatLng:function(n){t._fromRectangularToGeodetic(e.UTMK,n),t._fromGeodeticToLatLng(n),n.x=parseFloat(n.x.toFixed(7)),n.y=parseFloat(n.y.toFixed(7))},fromTM128ToLatLng:function(n){t._fromRectangularToGeodetic(e.TM128,n),t._transform(e.TM128,e.LatLng,n),t._fromGeodeticToLatLng(n),n.x=parseFloat(n.x.toFixed(7)),n.y=parseFloat(n.y.toFixed(7))},fromLatLngToUTMK:function(n){t._fromLatLngToGeodetic(n),t._transform(e.LatLng,e.UTMK,n),t._fromGeodeticToRectangular(e.UTMK,n),n.x=parseFloat(n.x.toFixed(1)),n.y=parseFloat(n.y.toFixed(1))},fromUTMKToInner:function(t){t.x=parseInt(10*t.x+34e7),t.y=parseInt(10*t.y+13e7)},fromTM128ToUTMK:function(n){t._fromRectangularToGeodetic(e.TM128,n),t._transform(e.TM128,e.UTMK,n),t._fromGeodeticToRectangular(e.UTMK,n),n.x=parseFloat(n.x.toFixed(1)),n.y=parseFloat(n.y.toFixed(1))},fromLatLngToInner:function(t){this.fromLatLngToUTMK(t),this.fromUTMKToInner(t)},fromInnerToLatLng:function(t){this.fromInnerToUTMK(t),this.fromUTMKToLatLng(t)},fromInnerToTM128:function(t){this.fromInnerToUTMK(t),this.fromUTMKToTM128(t)},fromTM128ToInner:function(t){this.fromTM128ToUTMK(t),this.fromUTMKToInner(t)}}}(),convertPointObject=function(t,e){var n=t.classname,i={x:t.x,y:t.y,z:0};if(n===e)return t;noneCreationConv["from"+n+"To"+e](i);var o=new nhn.mapcore[e];return o.set(i.x,i.y),o},oPointBase={getCoordMode:function(){return this.coordMode},set:function(t,e){this.setX(t),this.setY(e)},setX:function(t){this.x=t},setY:function(t){this.y=t},getX:function(){return this.x},getY:function(){return this.y},getDistanceFrom:function(t){if("undefined"==typeof t)return null;var e=this.toInner(),n=t.toInner(),i=Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y));return i/10},add:function(t,e){return this.set(this.x+t,this.y+e)},copy:function(t){if(t){var e=this["to"+t.classname]();return t.set(e.x,e.y),t}var n=new nhn.mapcore[this.classname];return n.set(this.x,this.y),n},equals:function(t){var e=t["to"+this.classname]();return this.x==e.x&&this.y==e.y},_toString:function(){return this.x+","+this.y},toLatLng:function(){return convertPointObject(this,"LatLng")},toInner:function(){return convertPointObject(this,"Inner")},toUTMK:function(){return convertPointObject(this,"UTMK")},toTM128:function(){return convertPointObject(this,"TM128")}},extendPointBase=function(t){return jindo.$H(oPointBase).forEach(function(e,n){"_toString"==n&&(n="toString"),t[n]=e}),t};nhn.mapcore.Point=function(t,e){switch(nhn.mapcore.mapSpec.coordMode){case 0:return new nhn.mapcore.Inner(t,e);case 1:return new nhn.mapcore.UTMK(t,e);case 2:return new nhn.mapcore.TM128(t,e);case 3:return new nhn.mapcore.LatLng(t,e);default:return new nhn.mapcore.Inner(t,e)}},nhn.mapcore.LatLng=jindo.$Class(extendPointBase({classname:"LatLng",coordMode:3,$init:function(t,e,n){this.x=e,this.y=t,this.z=n||0},lat:function(){return this.y},lng:function(){return this.x},getLat:function(){return this.y},getLng:function(){return this.x}})),nhn.mapcore.Inner=jindo.$Class(extendPointBase({classname:"Inner",coordMode:0,$init:function(t,e,n){this.x=t,this.y=e,this.z=n||0}})),nhn.mapcore.UTMK=jindo.$Class(extendPointBase({classname:"UTMK",coordMode:1,$init:function(t,e,n){this.x=t,this.y=e,this.z=n||0}})),nhn.mapcore.TM128=jindo.$Class(extendPointBase({classname:"TM128",coordMode:2,$init:function(t,e,n){this.x=t,this.y=e,this.z=n||0}}));var _npoint=nhn.mapcore.Point,_ninner=nhn.mapcore.Inner,_nutmk=nhn.mapcore.UTMK,_ntm128=nhn.mapcore.TM128,_nlatlng=nhn.mapcore.LatLng;nhn.mapcore.NMap=jindo.$Class({name:"NMap",_RESIZE_GAP:2,$init:function(t,e){e=e||{};var n=this;this._zooming=!1,this._zoomingDone=!0,t&&"string"==typeof t&&(t=jindo.$(t)),this.map=t,this.lastHeight=0,this.lastWidth=0,this.mapType=jindo.$A(),this._setStyle(e),this._ignoreMousedownClasses=jindo.$A(),this._ignoreClickClasses=jindo.$A(),this._ignoreDblClickClasses=jindo.$A(),this._ignoreContextMenuClasses=jindo.$A(),this._ignoreMousewheelClasses=jindo.$A(),this._supportedDragStart=!1,document.body.ondragstart=function(){n._supportedDragStart=!0},jindo.$Element(document.body).fireEvent("dragstart"),this._pinchZoomEnabled=!0,this._hdTileEnabled=!0},$BEFORE_MSG_APP_READY:function(){var t=new nhn.mapcore.Util.Bubbler(this.map);this.oApp.exec("ADD_APP_PROPERTY",["mapBubbler",jindo.$Fn(function(){return t},this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getMap",jindo.$Fn(this.getMap,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getMapSize",jindo.$Fn(this.getMapSize,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getActiveMapType",jindo.$Fn(this.getActiveMapType,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["isActiveMapType",jindo.$Fn(this.isActiveMapType,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["isZooming",jindo.$Fn(function(){return this._zooming},this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["isZoomingDone",jindo.$Fn(function(){return this._zoomingDone},this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["setGhostZooming",jindo.$Fn(function(t){this._zooming=!!t},this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["setGhostZoomingDone",jindo.$Fn(function(t){this._zoomingDone=!!t},this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["isWhileGesture",jindo.$Fn(function(){return!!this._whileGesture},this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["enablePinchZoom",jindo.$Fn(this.enablePinchZoom,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["enableHDTile",jindo.$Fn(this.enableHDTile,this).bind()]),this._supportedDragStart?jindo.$Fn(function(t){t.stop(jindo.$Event.CANCEL_DEFAULT)}).attach(this.map,"dragstart"):jindo.$Fn(function(t){var e=t.element;do{var n=e.tagName.toUpperCase();if("INPUT"==n||"A"==n||"BUTTON"==n||"TEXTAREA"==n)return}while((e=e.parentNode)&&1==e.nodeType);var i=t.pos(),o=jindo.$("<button>");o.style.cssText="position:absolute !important; top:"+i.pageY+"px !important; left:"+i.pageX+"px !important;",document.body.appendChild(o),o.focus(),o.blur(),document.body.removeChild(o),t.stop(jindo.$Event.CANCEL_DEFAULT)}).attach(this.map,"mousedown"),this.oApp.registerBrowserEvent(this.map,"mousemove","MOUSEMOVE_EVENT_DONE"),this.oApp.registerBrowserEvent(this.map,"mouseup","MOUSEUP_EVENT_DONE"),this.oApp.registerBrowserEvent(this.map,"mousedown","MOUSEDOWN_EVENT_DONE"),this.oApp.registerBrowserEvent(this.map,"mousewheel","MOUSEWHEEL_EVENT_DONE"),jindo.$Fn(function(t){this.oApp.exec("CONTEXTMENU_EVENT_DONE",[t])},this).attach(this.map,"contextmenu"),this.oApp.registerBrowserEvent(this.map,"touchmove","MOUSEMOVE_EVENT_DONE"),this.oApp.registerBrowserEvent(this.map,"touchend","MOUSEUP_EVENT_DONE"),this.oApp.registerBrowserEvent(this.map,"touchstart","MOUSEDOWN_EVENT_DONE"),nhn.mapcore.MapGesture&&this._pinchZoomEnabled&&(this.gesture=new nhn.mapcore.MapGesture(this.map,{change:jindo.$Fn(this._onGestureChange,this).bind(),end:jindo.$Fn(this._onGestureEnd,this).bind()})),1==nhn.mapcore.mapSpec.getMobileMap()&&(jindo.$Fn(function(t){this.oApp.exec("TOUCHSTART_EVENT_DONE",[t])},this).attach(this.map,"touchstart"),jindo.$Fn(function(t){this.oApp.exec("TOUCHMOVE_EVENT_DONE",[t])},this).attach(this.map,"touchmove"),jindo.$Fn(function(t){this.oApp.exec("TOUCHEND_EVENT_DONE",[t])},this).attach(this.map,"touchend"),jindo.$Fn(function(t){this.oApp.exec("GESTURESTART_EVENT_DONE",[t])},this).attach(this.map,"gesturestart"),jindo.$Fn(function(t){this.oApp.exec("GESTURECHANGE_EVENT_DONE",[t])},this).attach(this.map,"gesturechange"),jindo.$Fn(function(t){this.oApp.exec("GESTUREEND_EVENT_DONE",[t])},this).attach(this.map,"gestureend")),this.oApp.registerBrowserEvent(this.map,"click","CLICK_EVENT_DONE"),this.oApp.registerBrowserEvent(this.map,"dblclick","DBLCLICK_EVENT_DONE"),this.oApp.registerBrowserEvent(document,"mousedown","MOUSEDOWN_WINDOW_DONE"),nhn.mapcore.Util.fixEvent.attach("resize",nhn.mapcore.Util.bind(this,function(){var t=new jindo.$Agent,e=t.navigator();if(e.ie&&e.version<=6)this.oApp.exec("RESIZE_MAP_DONE");else if(this._isValidResizeEvent()){this.oApp.exec("RESIZE_MAP_DONE");var n=nhn.mapcore.Util.clientSize();this.lastHeight=n.height,this.lastWidth=n.width}}))},$ON_CONFIG_ZOOM_EFFECT:function(t,e){this._onConfigZoomEffect(t,e)},_onConfigZoomEffect:function(t,e){if("string"==typeof t)nhn.mapcore.ZoomEffectConfig[t]=e;else if("object"==typeof t)for(var n in t)t.hasOwnProperty(n)&&this._onConfigZoomEffect(n,t[n])},$ON_SET_MAP_BACKGROUND:function(t,e,n,i){var e=e||"no-repeat",n=n||0,i=i||0;this.map.style.background="url("+t+") "+e+" "+n+" "+i},$ON_SET_MAP_BACKGROUND_COLOR:function(t){var t=t||"transparent";this.map.style.backgroundColor=t},$ON_SET_EMPTY_TILE_URL:function(t){nhn.mapcore.Image.setEmptyTileUrl(t)},$ON_SET_DOT_TILE_URL:function(t){nhn.mapcore.Image.setDotTileUrl(t)},_isValidResizeEvent:function(){var t=new jindo.$Agent,e=t.navigator(),n=nhn.mapcore.Util.clientSize();return Math.abs(this.lastHeight-n.height)>this._RESIZE_GAP||Math.abs(this.lastWidth-n.width)>this._RESIZE_GAP},$ON_MOUSEWHEEL_EVENT_DONE:function(t){this.oApp.exec("MOUSEWHEEL_MAP_DONE",[t])},$ON_MOUSEDOWN_EVENT_DONE:function(t){var e=t.type.toLowerCase();nhn.mapcore.mapSpec.isTouchStarted()||(e.indexOf("touch")>-1&&nhn.mapcore.mapSpec.startTouch(),t.mouse().right||this.oApp.exec("MOUSEDOWN_MAP_DONE",[t]))},$AFTER_MOUSEUP_EVENT_DONE:function(t){nhn.mapcore.mapSpec.endTouch()},$ON_CLICK_EVENT_DONE:function(t){this.oApp.exec("CLICK_MAP_DONE",[t])},$ON_CONTEXTMENU_EVENT_DONE:function(t){this.oApp.exec("CONTEXTMENU_MAP_DONE",[t])},$ON_DBLCLICK_EVENT_DONE:function(t){this.oApp.exec("DBLCLICK_MAP_DONE",[t])},enablePinchZoom:function(t){void 0===t&&(t=!0),this._pinchZoomEnabled=t,!t&&this.gesture?(this.gesture.dispose(),delete this.gesture):this.gesture||(this.gesture=new nhn.mapcore.MapGesture(this.map,{change:jindo.$Fn(this._onGestureChange,this).bind(),end:jindo.$Fn(this._onGestureEnd,this).bind()}))},enableHDTile:function(t){void 0===t&&(t=!0),this._hdTileEnabled!==t&&(this._hdTileEnabled=t,this.oApp.exec("ENABLE_HD_TILE",[t]),this.oApp.exec("REFRESH_TILE"))},_getZoomingPoint:function(t,e){var n;return e?(n=this.oApp.getOffset({
x:e.x,y:e.y}),this.oApp.getOffsetToPoint(n)):"pageX"in t?(n=this.oApp.getOffset({x:t.pageX,y:t.pageY}),this.oApp.getOffsetToPoint(n)):this.oApp.getCenterPoint()},_onGestureChange:function(t,e){var n=t.scale,i=Math.round(1/n/-2),o=this.oApp.getZoomLevel(),a=o;return n>1&&(i=Math.round(n/2)),a+=i,!(a<1||a>14)&&(this._whileGesture||(this._whileGesture=!0,nhn.mapcore.mapSpec.dontDrag=!0,this.zoomPoint__=this._getZoomingPoint(t,e),this.oApp.exec("SHOW_GHOST",[this.zoomPoint__])),this.oApp.exec("FORCE_GHOST_ZOOM",[n]),void(nhn.mapcore.mapSpec.dontDrag=!0))},_onGestureEnd:function(t){if(!this._whileGesture)return!1;nhn.mapcore.mapSpec.dontDrag=!1;var e=t.scale,n=Math.round(1/e/-2),i=this.oApp.getZoomLevel(),o=i;e>1&&(n=Math.round(e/2)),o+=n,o=Math.max(o,1),o=Math.min(o,14),this.oApp.exec("ZOOM",[o,this.oApp.getCenterPoint(),{useEffect:!1,relativeLevel:!1,centerMark:!1}]),this.oApp.exec("HIDE_GHOST"),this._whileGesture=!1},$ON_TOUCHSTART_EVENT_DONE:function(t){var e=this,n=t.$value().touches||t.$value().changedTouches,i=+new Date,o=this._lastTouchTime||i+1,a=i-o,s=t.pos(),r=this._lastTouchPos,h=!1;if(r){var l=Math.abs(r.clientX-s.clientX),p=Math.abs(r.clientY-s.clientY);h=l<=20&&p<=20}if(1==n.length&&a<500&&a>0&&h){var c=this.oApp.getOffset({x:s.pageX,y:s.pageY}),u=this.oApp.getOffsetToPoint(c);this.oApp.exec("DELAY_ZOOM",[1,u,{moveCenter:!1,useEffect:!0,relativeLevel:!0}])}this._lastTouchTime=i,this._lastTouchPos=s},$ON_TOUCHMOVE_EVENT_DONE:function(t){if(this._lastTouchPos){var e=t.pos();this._lastTouchPos&&this._lastTouchPos.clientX!==e.clientX&&this._lastTouchPos.clientY!==e.clientY&&delete this._lastTouchPos}},_addIgnoreClass:function(t,e){t.indexOf(e)==-1&&t.push(e)},_removeIgnoreClass:function(t,e){var n=t.indexOf(e);n!=-1&&t.splice(n,1)},$ON_ADD_IGNORE_CLASS:function(t,e){e=(e||"").toUpperCase(),e&&"MOUSEDOWN"!=e||this._addIgnoreClass(this._ignoreMousedownClasses,t),e&&"CLICK"!=e||this._addIgnoreClass(this._ignoreClickClasses,t),e&&"DBLCLICK"!=e||this._addIgnoreClass(this._ignoreDblClickClasses,t),e&&"CONTEXTMENU"!=e||this._addIgnoreClass(this._ignoreContextMenuClasses,t),e&&"MOUSEWHEEL"!=e||this._addIgnoreClass(this._ignoreMousewheelClasses,t)},$ON_REMOVE_IGNORE_CLASS:function(t,e){e=(e||"").toUpperCase(),e&&"MOUSEDOWN"!=e||this._removeIgnoreClass(this._ignoreMousedownClasses,t),e&&"CLICK"!=e||this._removeIgnoreClass(this._ignoreClickClasses,t),e&&"DBLCLICK"!=e||this._removeIgnoreClass(this._ignoreDblClickClasses,t),e&&"CONTEXTMENU"!=e||this._removeIgnoreClass(this._ignoreContextMenuClasses,t),e&&"MOUSEWHEEL"!=e||this._removeIgnoreClass(this._ignoreMousewheelClasses,t)},_isIgnoreEvent:function(t,e){e&&"svg:svg"==e.tagName&&(e=e.parentNode.parentNode);var n=t.$value(),i=n.length;if(!i)return!1;var o="("+n.join("|")+")",a=new RegExp("(^|\\s+)"+o+"(\\(([^)]*)\\))?(\\s+|$)","i");do if(a.test(e.className))return!0;while(e=e.parentNode);return!1},$BEFORE_MOUSEWHEEL_MAP_DONE:function(t){if(this._isIgnoreEvent(this._ignoreMousewheelClasses,t.element))return!1},$BEFORE_MOUSEDOWN_MAP_DONE:function(t){if(this._isIgnoreEvent(this._ignoreMousedownClasses,t.element))return!1},$BEFORE_CLICK_MAP_DONE:function(t){if(this._isIgnoreEvent(this._ignoreClickClasses,t.element))return!1},$BEFORE_DBLCLICK_MAP_DONE:function(t){if(this._isIgnoreEvent(this._ignoreDblClickClasses,t.element))return!1},$BEFORE_CONTEXTMENU_MAP_DONE:function(t){if(this._isIgnoreEvent(this._ignoreContextMenuClasses,t.element))return t.stop(jindo.$Event.CANCEL_DEFAULT),!1},$ON_CONTEXTMENU_MAP_DONE:function(t){t.stop(jindo.$Event.CANCEL_DEFAULT)},$ON_PUT_MAP:function(t){this.map.appendChild(t)},$BEFORE_SET_MAP_SIZE:function(t,e){var n=this._mapSize,i=t==n.width&&e==n.height;return!i},$ON_SET_MAP_SIZE:function(t,e){var n=jindo.$Element(this.map);n.css({width:t+"px",height:e+"px"}),n=null,this._mapSize={width:t,height:e},this.oApp.exec("MAP_RELOAD")},getMap:function(){return this.map},getActiveMapType:function(){return this.mapType.$value()},isActiveMapType:function(t){return"string"==typeof t?this.mapType.has(t):jindo.$A(t).every(function(t){return this.mapType.has(t)},this)},$ON_REGISTER_MAP_TYPE:function(t){this.mapType.has(t)||(this.mapType.push(t),this.oApp.exec("REGISTER_MAP_TYPE_DONE",[t]))},$ON_UNREGISTER_MAP_TYPE:function(t){this.mapType=this.mapType.refuse(t),this.oApp.exec("UNREGISTER_MAP_TYPE_DONE",[t])},getMapSize:function(){return!!this.map&&this._mapSize},_setStyle:function(t){var e=jindo.$Element(this.map),n=e.css("position");"absoulte"!=n&&(n="relative"),t.width||(t.width=e.width()),t.height||(t.height=e.height()),e.css({position:n,width:t.width+"px",height:t.height+"px",overflow:"hidden"}),this._mapSize=t,e=null}}),nhn.mapcore.Container=jindo.$Class({name:"Container",$init:function(){},containers:[],$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["getMovableContainer",jindo.$Fn(this.getMovableContainer,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getStaticContainer",jindo.$Fn(this.getStaticContainer,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getMapPane",jindo.$Fn(this.getMapPane,this).bind()]),this.map=this.oApp.getMap(),this._createContainers()},getMovableContainer:function(){return this.containers.nmap_movable_container},getStaticContainer:function(){return this.containers.nmap_static_container},$ON_ADD_TO_MOVABLE_CONTAINER:function(t){var e=this.getMovableContainer();e.appendChild(t)},$ON_REMOVE_FROM_MOVABLE_CONTAINER:function(t){var e=this.getMovableContainer();e.removeChild(t)},$ON_ADD_TO_STATIC_CONTAINER:function(t){var e=this.getStaticContainer();e.appendChild(t)},getMapPane:function(t,e){var n=jindo.$$.getSingle("."+t,this.getMovableContainer());return n||(n=this._createPane({zIndex:e,className:t}),this.oApp.exec("ADD_TO_MOVABLE_CONTAINER",[n])),n},_createPane:function(t){var e=jindo.$("<div>");return jindo.$Element(e).css({position:"absolute",top:0,left:0,border:0,padding:0,margin:0,overflow:"visible",zIndex:t&&t.zIndex?t.zIndex:0}),t&&t.className&&(e.className=t.className),t&&t.className&&"nmap_info_pane"==t.className||nhn.mapcore.Util.disableSelection(e),e},_createContainers:function(){this.containers=[];var t=jindo.$$.getSingle(".nmap_movable_container",this.map);if(t)t.style.zIndex=0,t.style.position="absolute",this.containers.nmap_movable_container=t;else{var e={zIndex:0,className:"nmap_movable_container",position:"absolute"};this._makeContainer(e)}var n=jindo.$$.getSingle(".nmap_static_container",this.map);if(n)n.style.zIndex=10,n.style.position="relative",this.containers.nmap_static_container=n;else{var e={zIndex:10,className:"nmap_static_container",position:"relative"};this._makeContainer(e)}this.containers.nmap_static_container.style.width="100%"},_makeContainer:function(t){t||(t={zIndex:0});var e=jindo.$("<div>");jindo.$Element(e).css({position:t.position,zIndex:t.zIndex,border:0,padding:0,margin:0,overflow:"visible"}),t.className&&(e.className=t.className),this.containers[t.className]=e,this.oApp.exec("PUT_MAP",[e])}}),nhn.mapcore.MapConfig=jindo.$Class({name:"MapConfig",$init:function(t){var e=nhn.mapcore.MapZoomControl.prototype,n=e.MIN_ZOOM_LEVEL,i=e.MAX_ZOOM_LEVEL,o=t.zoomLevel||10;o<n?o=n:o>i&&(o=i),this.zoomLevel=o,this.point=t.point,this.dragOffset={x:0,y:0},this.mapIndex={x:0,y:0},this.tileOffset={x:0,y:0},this.tilePadding={x:0,y:0},this.boundOffset=[0,0,0,0],this.jumpGap={x:0,y:0},this.center={x:.5,y:.5},this.tileInfo=[]},$BEFORE_MSG_APP_READY:function(){if(this._container=this.oApp.getMovableContainer(),this._container){var t=this.oApp;t.exec("ADD_APP_PROPERTY",["getCenterPixel",jindo.$Fn(this.getCenterPixel,this).bind()]),t.exec("ADD_APP_PROPERTY",["getZoomLevel",jindo.$Fn(this.getZoomLevel,this).bind()]),t.exec("ADD_APP_PROPERTY",["getTileInfo",jindo.$Fn(this.getTileInfo,this).bind()]),t.exec("ADD_APP_PROPERTY",["getConfigData",jindo.$Fn(this.getConfigData,this).bind()]),t.exec("ADD_APP_PROPERTY",["getBoundPixel",jindo.$Fn(this.getBoundPixel,this).bind()]),t.exec("ADD_APP_PROPERTY",["getDragOffset",jindo.$Fn(this.getDragOffset,this).bind()]),t.exec("ADD_APP_PROPERTY",["getBoundOffset",jindo.$Fn(this.getBoundOffset,this).bind()]),t.exec("ADD_APP_PROPERTY",["getJumpGap",jindo.$Fn(this.getJumpGap,this).bind()]),t.exec("ADD_APP_PROPERTY",["getTileCount",jindo.$Fn(this.getTileCount,this).bind()]),t.exec("INIT_CONFIG"),t.exec("SET_ZOOM_LEVEL",[this.zoomLevel])}},$AFTER_MSG_APP_READY:function(){this.$ON_MOVE_MAP({x:0,y:0})},$BEFORE_INIT_CONFIG:function(){if(this.viewSize=this.oApp.getMapSize(),"auto"==this.viewSize.width)return!1},$ON_INIT_CONFIG:function(t){this._calculateTile(),t=t?t:this.point;var e=nhn.mapcore.CoordConverter.inputFilter(t),n=nhn.mapcore.TransPoint.fromPointToPixel(e,this.zoomLevel);this.oApp.exec("SET_CENTER_PIXEL",[n]),this.oApp.exec("SET_CENTER_POINT",[e]),this._tileInfoArray()},$ON_SET_CENTER_PIXEL:function(t){this.leftTop=this._getLeftTop(t),this.mapIndex=this._getMapIndex(),this.jumpGap=this.dragOffset,this.dragOffset=this._getMoveOffset(),this.tileOffset={x:0,y:0},this.dragOffset.x<-this.tilePadding.width/2?(this.mapIndex.x++,this.dragOffset.x+=nhn.mapcore.mapSpec.tileSize):this.dragOffset.x>this.tilePadding.width/2&&(this.mapIndex.x--,this.dragOffset.x-=nhn.mapcore.mapSpec.tileSize),this.dragOffset.y<-this.tilePadding.height/2?(this.mapIndex.y--,this.dragOffset.y+=nhn.mapcore.mapSpec.tileSize):this.dragOffset.y>this.tilePadding.height/2&&(this.mapIndex.y++,this.dragOffset.y-=nhn.mapcore.mapSpec.tileSize),this.jumpGap.x-=this.dragOffset.x,this.jumpGap.y-=this.dragOffset.y,this.leftTop={x:this.leftTop.x+this.dragOffset.x,y:this.leftTop.y-this.dragOffset.y}},getBoundPixel:function(){var t=this.mapIndex.x*nhn.mapcore.mapSpec.tileSize+this.tilePadding.width-this.dragOffset.x+this.boundOffset[0],e=this.mapIndex.x*nhn.mapcore.mapSpec.tileSize+this.tilePadding.width+this.viewSize.width-this.dragOffset.x+this.boundOffset[2],n=(this.mapIndex.y+1)*nhn.mapcore.mapSpec.tileSize-this.tilePadding.height+this.dragOffset.y-this.boundOffset[1],i=(this.mapIndex.y+1)*nhn.mapcore.mapSpec.tileSize-this.tilePadding.height-this.viewSize.height+this.dragOffset.y-this.boundOffset[3];return{left:t,top:n,right:e,bottom:i}},getBoundOffset:function(){return[].concat(this.boundOffset)},$ON_SET_BOUND_OFFSET:function(t,e,n,i){t instanceof Array?this.boundOffset=t:this.boundOffset=[t,e,n,i];var o=this.oApp.getPixelToPoint(this.oApp.getCenterPixel());this.oApp.exec("SET_CENTER_POINT",[o]),this.oApp.exec("REDRAW",[!1,!0,!0])},getJumpGap:function(){return this.oApp.isWheelZoomWorking()||this.oApp.isWhileGesture()?{x:0,y:0}:this.jumpGap},getZoomLevel:function(){return parseInt(this.zoomLevel)},getCenterPixel:function(){var t=this.leftTop.x+Math.round((this.boundOffset[0]-this.boundOffset[2])/2)+this.center.x*this.viewSize.width+this.tilePadding.width-this.dragOffset.x,e=this.leftTop.y-Math.round((this.boundOffset[1]-this.boundOffset[3])/2)-this.center.y*this.viewSize.height-this.tilePadding.height+this.dragOffset.y;return new nhn.mapcore.Inner(t,e)},getTileInfo:function(){return this.tileInfo},getDragOffset:function(){return this.dragOffset},getConfigData:function(){return{mapIndex:this.mapIndex,tileOffset:this.tileOffset,tilePadding:this.tilePadding}},$ON_SET_ZOOM_LEVEL:function(t){this.zoomLevel=t},$ON_SET_CENTER:function(t,e,n){"undefined"!=typeof e&&null!==e||(e=this.zoomLevel),t=nhn.mapcore.CoordConverter.inputFilter(t),e=parseInt(e);var i=nhn.mapcore.TransPoint.fromPointToPixel(t,e),o=this.oApp.getCenterPixel();return(o.x!=i.x||o.y!=i.y||e!=this.zoomLevel)&&(this.oApp.exec("SET_CENTER_PIXEL",[i]),this.oApp.exec("SET_CENTER_POINT",[t]),this.oApp.exec("SET_ZOOM_LEVEL",[e]),this.oApp.exec("MOVE_MAP",[{x:0,y:0}]),this.oApp.exec("DRAW_LEVEL_TILE",[e]),n||this.oApp.exec("REDRAW",[this.zoomLevel!=e,!0,!0]),void this.oApp.exec("SET_CENTER_DONE",[t,e,n]))},$ON_MAP_RELOAD:function(){var t=this.leftTop?nhn.mapcore.TransPoint.fromPixelToPoint(this.getCenterPixel(),this.zoomLevel):this.point;this.oApp.exec("INIT_CONFIG",[t]),this.oApp.exec("REFRESH_TILE"),this.oApp.exec("REDRAW",[!1,!1,!0]),this.oApp.exec("MOVE_MAP",[{x:0,y:0}])},$ON_GATHER_URL_QUERY:function(t,e){e.dlevel=this.getZoomLevel()},_tileInfoArray:function(){for(var t=this.countOfPaneTile,e=this.mapIndex,n=this.tileOffset,i=this.tileInfo=[],o=0;o<t.cols;o++)for(var a=0;a<t.rows;a++){var s=Math.min(o,t.cols-o-1),r=Math.min(a,t.rows-a-1),h={xPos:o,yPos:a,xCoord:e.x+o+n.x,yCoord:e.y+a+n.y,priority:0==s||0==r?0:s+r};i.push(h)}this.tileInfo=i.sort(function(t,e){return e.priority-t.priority})},_calculateTile:function(){var t=Math.ceil(this.viewSize.width/nhn.mapcore.mapSpec.tileSize),e=Math.ceil(this.viewSize.height/nhn.mapcore.mapSpec.tileSize);this.countOfPaneTile={cols:t*nhn.mapcore.mapSpec.tileSize-this.viewSize.width<nhn.mapcore.mapSpec.tileSize/3?t+2:t+1,rows:e*nhn.mapcore.mapSpec.tileSize-this.viewSize.height<nhn.mapcore.mapSpec.tileSize/3?e+2:e+1},this.tilePadding={width:Math.round((this.countOfPaneTile.cols*nhn.mapcore.mapSpec.tileSize-this.viewSize.width)/2),height:Math.round((this.countOfPaneTile.rows*nhn.mapcore.mapSpec.tileSize-this.viewSize.height)/2)}},getTileCount:function(){return{cols:this.countOfPaneTile.cols,rows:this.countOfPaneTile.rows}},_getLeftTop:function(t){return{x:t.x-Math.round((this.boundOffset[0]-this.boundOffset[2])/2)-this.center.x*this.viewSize.width-this.tilePadding.width,y:t.y+Math.round((this.boundOffset[1]-this.boundOffset[3])/2)+this.center.y*this.viewSize.height+this.tilePadding.height}},_getMapIndex:function(){return{x:Math.floor(this.leftTop.x/nhn.mapcore.mapSpec.tileSize),y:Math.floor(this.leftTop.y/nhn.mapcore.mapSpec.tileSize)}},_getMoveOffset:function(){return{x:this.mapIndex.x*nhn.mapcore.mapSpec.tileSize-this.leftTop.x,y:this.leftTop.y-(this.mapIndex.y+1)*nhn.mapcore.mapSpec.tileSize}},rotateTiles:function(t){var e;do{e=!1;var n={x:this.tileOffset.x*nhn.mapcore.mapSpec.tileSize+t.x,y:-this.tileOffset.y*nhn.mapcore.mapSpec.tileSize+t.y},i,o,a,s={width:(2*this.tilePadding.width-nhn.mapcore.mapSpec.tileSize)/2-this.tilePadding.width,height:(2*this.tilePadding.height-nhn.mapcore.mapSpec.tileSize)/2-this.tilePadding.height};n.x<s.width?(a="RIGHT",this.tileOffset.x++,i=0,o=this.countOfPaneTile.cols-1,this._rotateToUpdate(a,o,i),e=!0):n.x>-s.width&&(a="LEFT",this.tileOffset.x--,i=this.countOfPaneTile.cols-1,o=0,this._rotateToUpdate(a,o,i),e=!0),n.y<s.height?(a="DOWN",this.tileOffset.y--,i=0,o=this.countOfPaneTile.rows-1,this._rotateToUpdate(a,o,i),e=!0):n.y>-s.height&&(a="UP",this.tileOffset.y++,i=this.countOfPaneTile.rows-1,o=0,this._rotateToUpdate(a,o,i),e=!0)}while(e)},_rotateToUpdate:function(t,e,n){var i=jindo.$A(this.tileInfo);this.tileInfo=i.map(function(i,o){switch(t){case"RIGHT":i.xPos==n&&(i.xCoord=this.mapIndex.x+e+this.tileOffset.x),i.xPos=i.xPos==n?e:i.xPos-1;break;case"LEFT":i.xPos==n&&(i.xCoord=this.mapIndex.x+e+this.tileOffset.x),i.xPos=i.xPos==n?e:i.xPos+1;break;case"DOWN":i.yPos==n&&(i.yCoord=this.mapIndex.y+e+this.tileOffset.y),i.yPos=i.yPos==n?e:i.yPos-1;break;case"UP":i.yPos==n&&(i.yCoord=this.mapIndex.y+e+this.tileOffset.x),i.yPos=i.yPos==n?e:i.yPos+1}return i},this).$value(),i=null,this.oApp.exec("ROTATE_TILE",[t])},$ON_SET_ROTATE_TILE:function(t,e,n,i,o){var a=this.tileInfo,s,r,h,l,p;switch(t){case"RIGHT":r=this.countOfPaneTile.cols-1,l=0,s="x";break;case"LEFT":r=0,l=this.countOfPaneTile.cols-1,s="x";break;case"DOWN":h=this.countOfPaneTile.rows-1,p=0,s="y";break;case"UP":h=0,p=this.countOfPaneTile.rows-1,s="y"}var c=jindo.$A(e);c.forEach(function(t,e){var l=!1;if("x"==s&&a[e].xPos==r?(h=a[e].yPos,l=this.oApp.getTileUrl({xPos:r,yPos:h},n,o)):"y"==s&&a[e].yPos==h&&(r=a[e].xPos,l=this.oApp.getTileUrl({xPos:r,yPos:h},n,o)),l){if(nhn.mapcore.isSupportOpacity&&n.url.search("mashup.map.naver.net")!=-1&&(l+="?depth=32"),!nhn.mapcore.isSupportOpacity&&"rts"==n.name){var p="?depth=8";l+=p}"rts"==n.name&&(l+="&TS="+this.oApp.getTrafficLastVersion()),nhn.mapcore.Image.changeSrc(t,l,i),t.style.width=t.style.height=nhn.mapcore.mapSpec.tileSize+"px",t.style.left=(r+this.tileOffset.x)*nhn.mapcore.mapSpec.tileSize-this.tilePadding.width+"px",t.style.top=(h-this.tileOffset.y)*nhn.mapcore.mapSpec.tileSize-this.tilePadding.height+"px"}},this),c=null},$ON_MOVE_MAP:function(t){var e=this.dragOffset,n={x:e.x+t.x,y:e.y+t.y};this._container.style.left=parseInt(n.x,10)+"px",this._container.style.top=parseInt(n.y,10)+"px",this.dragOffset=n,this.rotateTiles(n)}}),nhn.mapcore.ZoomEffectConfig={zoomDuration:150,deepZoomDuration:400,zoomFps:48,easing:"linear",endDelay:100,tearDownDelay:150,dblClickEnabled:!0},nhn.mapcore.MapCoordConfig=jindo.$Class({name:"MapCoordConfig",$init:function(t){this.centerPoint=null},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["getBound",jindo.$Fn(this.getBound,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getBoundPoint",jindo.$Fn(this.getBoundPoint,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getEntireBound",jindo.$Fn(this.getEntireBound,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getOffset",jindo.$Fn(this.getOffset,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getMapOffset",jindo.$Fn(this.getMapOffset,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getOffsetToPoint",jindo.$Fn(this.getOffsetToPoint,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getOffsetToPixel",jindo.$Fn(this.getOffsetToPixel,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getPixelToOffset",jindo.$Fn(this.getPixelToOffset,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getPointToOffset",jindo.$Fn(this.getPointToOffset,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getPointToMapOffset",jindo.$Fn(this.getPointToMapOffset,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getPixelToPoint",jindo.$Fn(this.getPixelToPoint,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getPointToPixel",jindo.$Fn(this.getPointToPixel,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getMeterToPixel",jindo.$Fn(this.getMeterToPixel,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getCenter",jindo.$Fn(this.getCenter,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getCenterPoint",jindo.$Fn(this.getCenterPoint,this).bind()])},$AFTER_MSG_APP_READY:function(){},$BEFORE_SET_CENTER_POINT:function(t){if(this.centerPoint&&t.x==this.centerPoint.x&&t.y==this.centerPoint.y)return!1},$ON_SET_CENTER_POINT:function(t){var e=new nhn.mapcore.Inner(1*t.x,1*t.y);this.centerPoint=e},$ON_GATHER_URL_QUERY:function(t,e){var n=nhn.mapcore.CoordConverter.fromInnerToLatLng(this.getCenterPoint());e.lat=n.lat(),e.lng=n.lng()},$ON_SET_ZOOM_LEVEL:function(t){this.zoomLevel=t},getBoundPoint:function(){var t=nhn.mapcore.mapSpec.getScale(this.zoomLevel),e=this.oApp.getBoundPixel();return this._getBoundPoint(e,t)},_getBoundPoint:function(t,e){var n=nhn.mapcore.CoordConverter.toInner([Math.floor(t.left/e)+nhn.mapcore.mapSpec.minX,Math.floor(t.top/e)+nhn.mapcore.mapSpec.minY,Math.floor(t.right/e)+nhn.mapcore.mapSpec.minX,Math.floor(t.bottom/e)+nhn.mapcore.mapSpec.minY]);return n.left=n[0],n.top=n[1],n.right=n[2],n.bottom=n[3],n},getEntireBound:function(){var t=nhn.mapcore.mapSpec.getScale(this.zoomLevel),e=this.oApp.getBoundPixel(),n=this.oApp.getBoundOffset();return e.left-=n[0],e.top+=n[1],e.right-=n[2],e.bottom+=n[3],this._getBoundPoint(e,t)},getBound:function(){var t=nhn.mapcore.mapSpec.getScale(this.zoomLevel),e=this.oApp.getBoundPixel();return this._getBound(e,t)},_getBound:function(t,e){return nhn.mapcore.CoordConverter.outputFilter([Math.floor(t.left/e)+nhn.mapcore.mapSpec.minX,Math.floor(t.top/e)+nhn.mapcore.mapSpec.minY,Math.floor(t.right/e)+nhn.mapcore.mapSpec.minX,Math.floor(t.bottom/e)+nhn.mapcore.mapSpec.minY])},getCenter:function(){return nhn.mapcore.CoordConverter.outputFilter(this.getCenterPoint())},getCenterPoint:function(){return this.centerPoint},getPixelToPoint:function(t){var e=nhn.mapcore.TransPoint.fromPixelToPoint(t,this.zoomLevel);return nhn.mapcore.CoordConverter.toInner(e)},getPointToPixel:function(t){return nhn.mapcore.TransPoint.fromPointToPixel(t,this.zoomLevel)},getOffsetToPoint:function(t){return this.getPixelToPoint(this.getOffsetToPixel(t))},getOffsetToPixel:function(t){var e=this.getDiffFromCenter(t),n=this.oApp.getCenterPixel();return n.add(e.x,e.y),n},getMeterToPixel:function(t){return this._getMeterToPixel(t,this.zoomLevel)},_getMeterToPixel:function(t,e){return t*(1/Math.pow(2,12-e))},getOffset:function(t){var e=this.getMapOffset(t),n=this.oApp.getDragOffset();return{x:e.x-n.x,y:e.y-n.y}},getMapOffset:function(t){var e=jindo.$Element(this.oApp.getMap()).offset();return{x:t.x-e.left,y:t.y-e.top}},getDiffFromCenter:function(t){var e=this._fromOffsetToMapOffset(t),n=this.oApp.getMapSize(),i=this.oApp.getBoundOffset();return e.x-=Math.round((i[0]-i[2])/2),e.y-=Math.round((i[1]-i[3])/2),new nhn.mapcore.Inner(e.x-Math.floor(n.width/2),Math.floor(n.height/2)-e.y)},_fromOffsetToMapOffset:function(t){var e=this.oApp.getDragOffset();return{x:t.x+e.x,y:t.y+e.y}},getPointToOffset:function(t){var e=nhn.mapcore.TransPoint.fromPointToPixel(t,this.zoomLevel);return this.getPixelToOffset(e)},getPixelToOffset:function(t){var e=this.oApp.getConfigData();return{x:t.x-e.mapIndex.x*nhn.mapcore.mapSpec.tileSize-e.tilePadding.width,y:(e.mapIndex.y+1)*nhn.mapcore.mapSpec.tileSize-e.tilePadding.height-t.y}},getPointToMapOffset:function(t){var e=this.getPointToOffset(t),n=this.oApp.getDragOffset();return{x:e.x+n.x,y:e.y+n.y}}}),nhn.mapcore.TransPoint={fromPixelToPoint:function(t,e){return new nhn.mapcore.Inner(this.fromPixelUnitToPointUnit(t.x,e)+nhn.mapcore.mapSpec.minX,this.fromPixelUnitToPointUnit(t.y,e)+nhn.mapcore.mapSpec.minY)},fromPointToPixel:function(t,e){return new nhn.mapcore.Inner(this.fromPointUnitToPixelUnit(t.x-nhn.mapcore.mapSpec.minX,e),this.fromPointUnitToPixelUnit(t.y-nhn.mapcore.mapSpec.minY,e))},fromPixelUnitToPointUnit:function(t,e){return Math.round(t/nhn.mapcore.mapSpec.getScale(e))},fromPointUnitToPixelUnit:function(t,e){return Math.round(t*nhn.mapcore.mapSpec.getScale(e))}},nhn.mapcore.MapGesture=function(t,e){this.element=t,this.start_callback=this._getCallback(e,"start"),this.change_callback=this._getCallback(e,"change"),this.end_callback=this._getCallback(e,"end");var n=function(){var t=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t=!0}}))}catch(e){}return t}();this._passiveOptions=!!n&&{capture:!1,passive:!1},this._bindEvents()},nhn.mapcore.MapGesture.prototype={constructor:nhn.mapcore.MapGesture,scale:1,rotation:0,_startDistance:null,isGesturingByTouch__:!1,_bindEvents:function(){var t=this;this.gestureStart=this._bind(this.onGestureStart),this.gestureChange=this._bind(this.onGestureChange),this.gestureEnd=this._bind(this.onGestureEnd),this.touchStart=this._bind(this.onTouchStart),this.touchMove=this._bind(this.onTouchMove),this.touchEnd=this._bind(this.onTouchEnd),this._addEventListener("gesturestart",this.gestureStart),this._addEventListener("touchstart",this.touchStart)},onGestureStart:function(t){this._addEventListener("gesturechange",this.gestureChange),this._addEventListener("gestureend",this.gestureEnd),this.scale=t.scale,this.rotation=t.rotation,this.start_callback(t)},onGestureChange:function(t){this.scale=t.scale,this.rotation=t.rotation,this.change_callback(t)},onGestureEnd:function(t){this._removeEventListener("gesturechange",this.gestureChange),this._removeEventListener("gestureend",this.gestureEnd),this.scale=t.scale,this.rotation=t.rotation,this.end_callback(t),this.scale=1,this.rotation=0},onTouchStart:function(t){this.isGesturingByTouch__===!1&&t.touches.length>1&&(this._preventDefault(t),this._addEventListener("touchmove",this.touchMove),this._addEventListener("touchend",this.touchEnd),this.start_callback(this._refineEvent(t)),this.isGesturingByTouch__=!0)},onTouchMove:function(t){if(this.isGesturingByTouch__){this._preventDefault(t),t=this._refineEvent(t);var e=this._getCenter(t.touches);this.scale=t.scale,this.rotation=t.rotation,this.change_callback(t,e)}},onTouchEnd:function(t){this.isGesturingByTouch__&&(this._preventDefault(t),this._removeEventListener("touchmove",this.touchMove),this._removeEventListener("touchend",this.touchEnd),t.touches.length<2?(t.scale=this.scale,t.rotation=this.rotation):(t=this._refineEvent(t),this.scale=t.scale,this.rotation=t.rotation),this.end_callback(t),this.scale=1,this.rotation=0,this.isGesturingByTouch__=!1,this._startDistance=null)},dispose:function(){this._removeEventListener("gesturestart",this.gestureStart),this._removeEventListener("touchstart",this.touchStart);for(var t in this)this.hasOwnProperty(t)&&(this[t]=null)},_addEventListener:function(t,e){this.element.attachEvent?this.element.attachEvent(t,e):this.element.addEventListener(t,e,this._passiveOptions)},_removeEventListener:function(t,e){this.element.detachEvent?this.element.detachEvent(t,e):this.element.removeEventListener(t,e,!1)},_getCallback:function(t,e){return t&&t[e]?t[e]:nhn.mapcore.Util.emptyFunction},_bind:function(t){var e=this;return function(){return t.apply(e,arguments)}},_refineEvent:function(t){var e=this._getDistance(t);return null===this._startDistance?(this._startDistance=e,t.scale=1):t.scale=e/this._startDistance,t},_getDistance:function(t){var e=t.touches[0],n=t.touches[1];return Math.sqrt(Math.pow(e.pageX-n.pageX,2)+Math.pow(e.pageY-n.pageY,2))},_getCenter:function(t){var e,n=t.length,i=[],o=[];for(e=0;e<n;e++)i.push(t[e].pageX),o.push(t[e].pageY);var a=Math.min.apply(Math,i),s=Math.max.apply(Math,i),r=Math.min.apply(Math,o),h=Math.max.apply(Math,o);return{x:(a+s)/2,y:(r+h)/2}},_preventDefault:function(t){t=t?t:window.event,t.preventDefault?t.preventDefault():t.returnValue=!1}},nhn.mapcore.TileManager=jindo.$Class({name:"TileManager",isFirstLoading:!1,$init:function(){this.isFirstLoading=!0,this.timers={},this._callTileImages=jindo.$Fn(this._callTileImages,this).bind()},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["getTileUrl",jindo.$Fn(this.getTileUrl,this).bind()])},$ON_DRAW_NEW_TILES:function(t,e,n,i,o){var a=this._getBlankTiles(t);this.oApp.exec("SET_TILE_IMAGES",[a,e,n,i,o])},$ON_SET_TILE_IMAGES:function(t,e,n,i,o){if(1==nhn.mapcore.mapSpec.getMobileMap())return this._callTileImages(t,e,n,i,o),!1;if(1==this.isFirstLoading)return this._callTileImages(t,e,n,i,o),this.isFirstLoading=!1,!1;var a=this,s=this.timers[e.url];s||(s=this.timers[e.url]=new nhn.Timer),s.start(function(){a._callTileImages(t,e,n,i,o)},50)},_callTileImages:function(t,e,n,i,o){var a=this.oApp.getTileInfo(),s=this.oApp.getConfigData(),r=jindo.$A(t);r.forEach(function(t,i){var r=a[i],h=this.getTileUrl(r,e,o);nhn.mapcore.Image.changeSrc(t,h,n),t.style.width=t.style.height=nhn.mapcore.mapSpec.tileSize+"px",t.style.left=(r.xPos+s.tileOffset.x)*nhn.mapcore.mapSpec.tileSize-s.tilePadding.width+"px",t.style.top=(r.yPos-s.tileOffset.y)*nhn.mapcore.mapSpec.tileSize-s.tilePadding.height+"px",t.xCoord=s.mapIndex.x+r.xPos+s.tileOffset.x,t.yCoord=s.mapIndex.y-r.yPos+s.tileOffset.y},this),this.oApp.exec("SET_TILE_IMAGES_DONE",[i]),r=null},_getBlankTiles:function(t){var e=t.getElementsByTagName("img"),n=this.oApp.getTileInfo(),i=e.length,o=n.length;if(i==o)return e;if(i>o)for(var a=0;a<i-o;a++){var s=e.length-1;t.removeChild(e[s])}if(i<o)for(var r={width:nhn.mapcore.mapSpec.tileSize,height:nhn.mapcore.mapSpec.tileSize,left:0,top:0,zIndex:0},h,a=0,s=o-i;a<s;a++)h=nhn.mapcore.Image.createImage(nhn.mapcore.mapSpec.dotTileUrl,r),h.setAttribute("alt",""),t.appendChild(h);return t.getElementsByTagName("img")},getTileUrl:function(t,e,n){var i=this.oApp.getZoomLevel(),o=this.oApp.getConfigData();return nhn.mapcore.mapSpec.getTileUrl(o.mapIndex.x+t.xPos+o.tileOffset.x,o.mapIndex.y-t.yPos+o.tileOffset.y,i,e,n)}}),nhn.mapcore.MapDoubleClickManager=jindo.$Class({name:"MapDoubleClickManager",enableDblClickZoom:!0,$init:function(){},$ON_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["getEnableDblClickZoom",jindo.$Fn(this._getEnableDblClickZoom,this).bind()])},$ON_SET_ENABLE_DBLCLICK_ZOOM:function(t){this.enableDblClickZoom=t},_getEnableDblClickZoom:function(){return this.enableDblClickZoom},$ON_DBLCLICK_MAP_DONE:function(t){if(this._getEnableDblClickZoom()){var e=t.pos(),n=this.oApp.getOffset({x:e.pageX,y:e.pageY}),i=this.oApp.getOffsetToPoint(n);this.oApp.exec("DELAY_ZOOM",[1,i,{useEffect:!0,relativeLevel:!0,centerMark:!0}])}}}),nhn.mapcore.MapDragger=jindo.$Class({name:"MapDragger",threshold:3,moveEventThreshold:5,attached:!1,$init:function(){this.container=null,this.dragPoint={x:0,y:0},this.dragStartPos=null,this.enableDrag=!0},$BEFORE_MSG_APP_READY:function(){this.oApp.getMovableContainer()&&(this.container=this.oApp.getMovableContainer(),this.econtainer=this.container.setCapture?this.container:document,this.oApp.exec("ADD_APP_PROPERTY",["isDragPanEnabled",jindo.$Fn(this._isDragPanEnabled,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getLockedBound",jindo.$Fn(this._getLockedBound,this).bind()]))},$ON_ENABLE_DRAG:function(){this.enableDrag=!0},$ON_DISABLE_DRAG:function(){this.enableDrag=!1},_isDragPanEnabled:function(){return this.enableDrag},$ON_MOUSEDOWN_EVENT_DONE:function(t){this.dragStartPos=t.pos()},$ON_MOUSEDOWN_MAP_DONE:function(t){var e=t.pos();this.dragStartPos=e,this.dragPoint={x:e.pageX,y:e.pageY},this.oApp.exec("BEGIN_DRAG",[t])},$ON_BEGIN_DRAG:function(t){this.oApp.exec("BEGIN_DRAG_DONE",[t])},$BEFORE_BEGIN_DRAG_DONE:function(t){return!!this.enableDrag&&(!t.mouse().right&&void 0)},$ON_BEGIN_DRAG_DONE:function(t){this.attached||(nhn.mapcore.mapSpec.isTouchStarted()?(this.ontouchmove=jindo.$Fn(function(t){this.oApp.exec("DRAG",[t])},this).attach(this.econtainer,"touchmove"),this.ontouchend=jindo.$Fn(function(t){this.oApp.exec("END_DRAG",[t]),nhn.mapcore.mapSpec.endTouch()},this).attach(document,"touchend")):(this.onmousemove=jindo.$Fn(function(t){this.oApp.exec("DRAG",[t])},this).attach(this.econtainer,"mousemove"),this.onmouseup=jindo.$Fn(function(t){this.oApp.exec("END_DRAG",[t])},this).attach(document,"mouseup")),this.attached=!0)},$ON_SET_BOUND_LOCK:function(t){this._boundLock=t||this.oApp.getBoundPoint()},$ON_CLEAR_BOUND_LOCK:function(){delete this._boundLock},_getLockedBound:function(){return this._boundLock||null},_getBoundLockStatus:function(t){if(!this._boundLock)return!1;var e=this.oApp.getEntireBound(),n=this._boundLock,i=e[1]>n[1]||e[3]<n[3],o=e[0]<n[0]||e[2]>n[2],a=i&&o;return a?"ALL":i?"VERTICAL":!!o&&"HORIZONTAL"},_postProcessBoundLock:function(t){var e=this._getBoundLockStatus();if(e){var n=t;"VERTICAL"==e&&(n.y*=-1),"HORIZONTAL"==e&&(n.x*=-1),"ALL"==e&&(n.x*=-1,n.y*=-1),this.oApp.exec("MOVE_MAP",[n])}},$ON_DRAG:function(t){t.stopDefault(),nhn.mapcore.mapSpec.dontDrag||this._calcDragOffset(t)},_calcDragOffset:function(t){var e=t.pos(),n={x:e.pageX-this.dragPoint.x,y:e.pageY-this.dragPoint.y};this.dragPoint={x:e.pageX,y:e.pageY},this._getMouseMoveGap(e,this.dragStartPos)>=this.moveEventThreshold&&(this.oApp.exec("MOVE_MAP",[n]),this._postProcessBoundLock({x:n.x,y:n.y})),n=null,t.stop(jindo.$Event.CANCEL_DEFAULT)},$ON_END_DRAG:function(t){var e=this._getDragGap(t.pos());this.oApp.exec("END_DRAG_DONE",[t,e])},$ON_END_DRAG_DONE:function(t){this._detachEvent(),this.oApp.exec("SET_CENTER_POINT",[this.oApp.getPixelToPoint(this.oApp.getCenterPixel())])},_detachEvent:function(){this.onmousemove&&this.onmousemove.detach(this.econtainer,"mousemove"),this.onmouseup&&this.onmouseup.detach(document,"mouseup"),delete this.onmousemove,delete this.onmouseup,this.ontouchmove&&this.ontouchmove.detach(this.econtainer,"touchmove"),this.ontouchend&&this.ontouchend.detach(document,"touchend"),delete this.ontouchmove,delete this.ontouchend,this.attached=!1},$BEFORE_CLICK_EVENT_DONE:function(t){var e=this._getDragGap(t.pos())<=this.threshold;return this.dragStartPos=null,e},_getDragGap:function(t){if(this.dragStartPos){var e=Math.sqrt(Math.pow(t.pageX-this.dragStartPos.pageX,2)+Math.pow(t.pageY-this.dragStartPos.pageY,2));return e}return-1},_getMouseMoveGap:function(t,e){if(e){var n=Math.sqrt(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2));return n}return-1;
},setMoveEventThreshold:function(t){this.moveEventThreshold=t},getMoveEvventThreshold:function(){return this.moveEventThreshold}}),nhn.mapcore.MapZoomControl=jindo.$Class({name:"MapZoomControl",MIN_ZOOM_LEVEL:1,MAX_ZOOM_LEVEL:14,MAX_VECTOR_ZOOM_LEVEL:14,redrawArg:null,_wheelZoomDelta:0,_wheelTerm:100,customLevelRange:null,enableWheelZoom:!0,useEffectInWheelZoom:!0,useCenterMarkInWheelZoom:!0,$init:function(){this.redrawTimer=new nhn.Timer,this.redrawArg=[!1,!1],this.goalsTimer=new nhn.Timer,this.goals={},this.customLevelRange=[this.MIN_ZOOM_LEVEL,this.MAX_ZOOM_LEVEL],this._timeStamp=+new Date},$BEFORE_MSG_APP_READY:function(){this.map=this.oApp.getMap(),this.oApp.exec("ADD_APP_PROPERTY",["isWheelZoomWorking",jindo.$Fn(function(){return this._wheelZoomWorking},this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["setZoomBasePoint",jindo.$Fn(this._setZoomBasePoint,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["clearZoomBasePoint",jindo.$Fn(this._clearZoomBasePoint,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getZoomBasePoint",jindo.$Fn(this._getZoomBasePoint,this).bind()])},$ON_MSG_APP_READY:function(){this.mapSize=this.oApp.getMapSize(),this.zoomLevel=this.oApp.getZoomLevel(),this.goals.dlevel=this.zoomLevel,this.goals.point=this.oApp.getCenterPoint(),this.oApp.exec("ADD_APP_PROPERTY",["getMinMaxLevel",jindo.$Fn(this._getMinMaxLevel,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getMaxLimitLevel",jindo.$Fn(this._getMaxLimitLevel,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["isWheelZoomEnabled",jindo.$Fn(this._isWheelZoomEnabled,this).bind()])},$AFTER_MSG_APP_READY:function(){this._ghostEnabled=!!this.oApp.isGhostEnabled},$ON_SET_ENABLE_WHEEL_ZOOM:function(t){this.enableWheelZoom=t},_isWheelZoomEnabled:function(){return this.enableWheelZoom},$AFTER_SET_MAP_SIZE:function(){this.mapSize=this.oApp.getMapSize()},$ON_SET_ZOOM_LEVEL:function(t){this.goalsTimer.abort(),this.goals.dlevel=parseInt(t)},$AFTER_SET_ZOOM_LEVEL:function(t){this.zoomLevel=this.oApp.getZoomLevel()},$ON_SET_CENTER_POINT:function(t){this.goalsTimer.abort(),this.goals.point=t},$ON_SET_MIN_MAX_LEVEL:function(t,e){var n=this.oApp.getZoomLevel();this.customLevelRange=[t,e],nhn.mapcore.mapSpec.refreshScale(),t>n?this.oApp.exec("ZOOM",[t,null,{}]):e<n&&this.oApp.exec("ZOOM",[e,null,{}])},_getMinMaxLevel:function(){return[this.customLevelRange[0],this.customLevelRange[1]]},setUseEffectInWheelZoom:function(t){this.useEffectInWheelZoom=t},getUseEffectInWheelZoom:function(){return this.useEffectInWheelZoom},setUseCenterMarkInWheelZoom:function(t){this.useCenterMarkInWheelZoom=t},getUseCenterMarkInWheelZoom:function(){return this.useCenterMarkInWheelZoom},$BEFORE_LOAD_SATELLITE_PANE:function(){this.mapMode="satellite"},$BEFORE_LOAD_VECTOR_PANE:function(){this.mapMode="vector";var t=this._getMinMaxLevel()[1];this.zoomLevel===t&&this.oApp.exec("ZOOM",[t,null,{useEffect:!0,centerMark:!0,moveCenter:!0}])},_isAllowAddWheelZoom:function(){var t=+new Date;return!(this._timeStamp+this._wheelTerm>t)&&(this._timeStamp=t,!0)},$BEFORE_MOUSEWHEEL_MAP_DONE:function(t){if(!this._isWheelZoomEnabled())return!1},_setZoomBasePoint:function(t){t&&(this._zoomEffectBase=t.toInner())},_clearZoomBasePoint:function(){delete this._zoomEffectBase},_getZoomBasePoint:function(){return this._zoomEffectBase||null},$ON_MOUSEWHEEL_MAP_DONE:function(t){if(t.stop(),this._isAllowAddWheelZoom()){var e=this.oApp,n=e.getZoomLevel(),i=t.mouse(),o="delta"in i?i.delta/120:t._event.detail/3;0===o&&t._event.deltaY&&(o=t._event.deltaY/-3);var a=o>0?1:-1,s=n,r=this._getMinMaxLevel(),h=r[0],l=r[1],p,c,u,d;if(s+=a,p=n+this._wheelZoomDelta+a,this._wheelZoomWorking)this._ghostEnabled?p>=h&&p<=l&&o&&(this._wheelZoomDelta+=a,e.exec("ADD_ZOOM_EFFECT",[t,a])):this._doZoomByWheel(t,c,a);else{if(d=t.pos(),Math.abs(o)<25e-5||s<h||s>l)return this._wheelZoomDelta=0,void(this._wheelZoomWorking=!1);"pageX"in d&&(!this.mousePos||d.pageX!=this.mousePos.pageX||d.pageY!=this.mousePos.pageY)&&(u=e.getOffset({x:d.pageX,y:d.pageY}),c=e.getOffsetToPoint(u),this.mousePos=d,this.mousePoint=this._zoomEffectBase||c),c=this.mousePoint,this.useEffectInWheelZoom&&this._ghostEnabled?(this._startZoomLevel=n,this._wheelZoomWorking=!0,o&&(this._wheelZoomDelta+=a,e.exec("START_ZOOM_EFFECT",[t,c,a]))):this._doZoomByWheel(t,c,a)}}},_doZoomByWheel:function(t,e,n){var i={useEffect:!!this._ghostEnabled&&this.useEffectInWheelZoom,moveCenter:!0,clearTiles:!0,centerMark:this.useCenterMarkInWheelZoom,relativeLevel:!0};n&&this.oApp.exec("DELAY_ZOOM",[n,e,i])},$ON_END_ZOOM_EFFECT:function(t){var e=this._wheelZoomDelta||0,n=this.oApp.getZoomLevel(),i=n+e,o=this.oApp.getCenterPoint(),a=n+e,s=this.oApp,r=this,t=t||this.mousePoint||this.oApp.getCenterPoint();e&&s.exec("ZOOM",[e,t,{useEffect:!1,moveCenter:!1,centerMark:!1,relativeLevel:!0,fromEffect:!0}]),this._wheelZoomDelta=0,this._wheelZoomWorking=!1,this._zoomLock=!1,this._wheelTerm=100},_overideDefaultOptions:function(t){var t=t||{};return"useEffect"in t||(t.useEffect=!1),"moveCenter"in t||(t.moveCenter=!0),"centerMark"in t||(t.centerMark=!1),"clearTiles"in t||(t.clearTiles=!1),"fromEffect"in t||(t.fromEffect=!1),t},_getLevelFilter:function(t,e,n){n.relativeLevel?e=t+(parseInt(e,10)||0):null!==e&&e!==!1||(e=t);var i=this._getMinMaxLevel(),o=i[0],a=i[1];return a=Math.min(a,this._getMaxLimitLevel()),Math.max(o,Math.min(a,parseInt(e)))||a},$ON_DELAY_ZOOM:function(t,e,n){var i=!1,n=this._overideDefaultOptions(n),o=this.goals.dlevel,a=this._getLevelFilter(o,t,n),s=e;if(e||(e=this.goals.point?this.goals.point:this.oApp.getCenterPoint()),i|=o!=a,this.goals.dlevel=a,i|=e.x!=this.goals.point.x||e.y!=this.goals.point.y,this.goals.point=e,s&&(i|=this.goals.moveCenter!=n.moveCenter),this.goals.options={useEffect:n.useEffect,moveCenter:n.moveCenter,centerMark:n.centerMark,clearTiles:n.clearTiles},i){var r=this;this.oApp.exec("ZOOM",[this.goals.dlevel,this.goals.point,this.goals.options])}},$BEFORE_ZOOM:function(t,e,n){if(this.oApp.isZooming()&&n.useEffect&&n.relativeLevel){var i=t;return this._wheelZoomDelta+=i,this.oApp.exec("ADD_ZOOM_EFFECT",[null,i]),!1}var n=this._overideDefaultOptions(n),o=this.zoomLevel,t=this._getLevelFilter(o,t,n);this.goalsTimer.abort();var a=this.oApp.getCenterPoint(),s=null;if(this.panning=null,e){if(s=new nhn.mapcore.Inner(e.x,e.y),!n.moveCenter||n.useEffect){var r=Math.pow(2,o-t),h={x:parseInt((s.x-a.x)*r),y:parseInt((s.y-a.y)*r)},l={x:nhn.mapcore.TransPoint.fromPointUnitToPixelUnit(h.x,t),y:nhn.mapcore.TransPoint.fromPointUnitToPixelUnit(h.y,t)},p=n.moveCenter&&(Math.abs(l.x)>this.mapSize.height||Math.abs(l.y)>this.mapSize.width);p?n.useEffect=!1:(s.x-=h.x,s.y-=h.y,n.moveCenter&&n.useEffect&&(this.panning=l))}}else e=s=a,this.mousePoint=null;!n.useEffect&&n.fromEffect&&this.oApp.setGhostZoomingDone(!0),this.changed={dlevel:o!=t,center:a.x!=s.x||a.y!=s.y,panning:this.panning&&(this.panning.x||this.panning.y)},this.target={oldLevel:o,dlevel:t,center:s,point:e,ratio:Math.pow(2,t-o)}},$ON_ZOOM:function(t,e,n){if(!this.oApp.isZooming()){var i=this.target.center,t=this.target.dlevel,o=nhn.mapcore.TransPoint.fromPointToPixel(i,t);!n.useEffect&&n.clearTiles&&this.oApp.exec("DRAW_EMPTY_TILE"),n.useEffect&&!this.changed.dlevel||this.oApp.exec("SET_CENTER",[i,t,!0]),this.changed.dlevel&&(this.redrawArg[0]=!0),this.changed.center&&(this.redrawArg[1]=!0),this.goals.point=i,this.goals.dlevel=t,n.useEffect||(this._reqRedraw(0,!0),this.oApp.isZoomingDone()&&this.oApp.exec("ZOOM_MAP_END_DONE"))}},$AFTER_ZOOM:function(t,e,n){if(!this.oApp.isZooming()){var t=this.target.dlevel;if(n.centerMark&&(this.changed.center||this.changed.dlevel||this.changed.panning)&&this.target.oldLevel!=this.target.dlevel&&this.oApp.exec("SHOW_CENTERMARK",[this.target.ratio,this.target.point]),n.useEffect){if(this.changed.dlevel){var i=this.target.ratio>1?1:-1,o=this.target.point;this.oApp.exec("ZOOM_MAP_DONE",[this.target.ratio,this.target.point])}!this.changed.panning||this.changed.dlevel&&!nhn.mapcore.ZoomEffectConfig.dblClickEnabled||this.oApp.exec("PAN_MAP",[-this.panning.x,this.panning.y])}if(n.moveCenter&&(this.mousePos=null),!this.oApp.isZooming()&&n.useEffect){this.mousePoint=e,this._startZoomLevel=this.zoomLevel;var a=this.target.dlevel-this.target.oldLevel;a&&this.oApp.exec("START_ZOOM_EFFECT",[null,e||this.oApp.getCenter(),a])}}},_reqRedraw:function(t,e){var e=e||!1,n=this;if(this.redrawArg[0]||this.redrawArg[1]){"undefined"==typeof t&&(t=50);var i=[].concat(this.redrawArg);i.push(e),t?this.redrawTimer.start(function(){n.oApp.exec("REDRAW",i)},t):(this.redrawTimer.abort(),this.oApp.exec("REDRAW",i))}},$ON_REDRAW:function(){this.redrawArg[0]=this.redrawArg[1]=!1},$ON_ZOOM_MAP_END_DONE:function(){this._reqRedraw(0)},$ON_PAN_MAP_END_DONE:function(){this._reqRedraw()},_getMaxLimitLevel:function(){return this._getMinMaxLevel()[1]},$ON_BOUND_TO_CENTER:function(t,e,n){if(t&&t instanceof Array&&4==t.length){var i=new nhn.mapcore.Inner(Math.round((parseInt(t[0])+parseInt(t[2]))/2),Math.round((parseInt(t[1])+parseInt(t[3]))/2)),o=this._getMaxLimitLevel();o=e&&void 0!==e.maxLevel?e.maxLevel:o;var a=this.oApp.getBoundOffset();if(e&&e.offset)for(var s=0,r=e.offset.length;s<r;s++)a[s]+=e.offset[s];var h=this._findOptimaizedZoomLevel(this.mapSize,t,a,this.MIN_ZOOM_LEVEL,o);if(e&&e.offset){var l=e.offset[2]-e.offset[0],p=e.offset[3]-e.offset[1],c=48828125e-12*Math.pow(2,h)/2;i.x+=Math.round(l/c/2),i.y-=Math.round(p/c/2)}this.oApp.exec("ZOOM",[h,i,n||{}])}},_findOptimaizedZoomLevel:function(t,e,n,i,o){for(var a=parseInt(e[2])-parseInt(e[0]),s=parseInt(e[1])-parseInt(e[3]),r,h,l,p=o;p>=i;p--)if(r=nhn.mapcore.mapSpec.getScale(p),h=(t.width-(n[2]+n[0]))/r,l=(t.height-(n[3]+n[1]))/r,h>a&&l>s)return p;return-1},$ON_ZOOM_IN_TO_CENTER:function(t){this.oApp.exec("DELAY_ZOOM",[1,t,{useEffect:!0,centerMark:!0,relativeLevel:!0}])},$ON_ZOOM_OUT_TO_CENTER:function(t){this.oApp.exec("DELAY_ZOOM",[-1,t,{useEffect:!0,centerMark:!0,relativeLevel:!0}])}}),nhn.mapcore.MousePointer=jindo.$Class({name:"MousePointer",STATIC_URL:nhn.mapcore.mapSpec.STATIC_IMG+"/maps2/",defaultStyle:["default","auto","crosshair","pointer","move","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize","text","wait","help"],$init:function(){var t=(navigator.userAgent||"").toLowerCase();this._isWebkit=jindo.$Agent().navigator().webkit,this._isOpera=jindo.$Agent().navigator().opera,this._isWebkit&&t.indexOf("windows")>-1&&t.indexOf("edge/")>-1&&(this._isWebkit=!1)},$BEFORE_MSG_APP_READY:function(){this.container=this.oApp.getMap()},$ON_SET_CURSOR:function(t,e,n){this._setCursorStyle(t,e,n)},$ON_RESET_CURSOR:function(){this._setCursorStyle("default")},_setCursorStyle:function(t,e,n){t&&(this.isDefaultStyle(t)||(t=this._getCustomCursorStyle(t,e,n)),this.container.style.cursor=t)},_getCustomCursorStyle:function(t,e,n){var i=this.STATIC_URL+t+".cur";return 0===t.indexOf("http")&&(i=t),this._isWebkit&&"undefined"!=typeof e&&"undefined"!=typeof n?"url('"+i+"') "+e+" "+n+", default":this._isOpera?"default":"url('"+i+"'), default"},isDefaultStyle:function(t){return this.defaultStyle.indexOf(t)!=-1}}),nhn.mapcore.PanEffect=jindo.$Class({name:"PanEffect",$init:function(){var t=this;this.trans=new nhn.Transition({effect:nhn.Effect.easeOutQuint}).fps(nhn.mapcore.ZoomEffectConfig.zoomFps),this.trans.attach({start:function(){t.oApp.exec("PAN_MAP_START_DONE",[])},end:function(){t.oApp.exec("PAN_MAP_END_DONE",[])}})},$ON_MSG_APP_READY:function(){this.mapSize=this.oApp.getMapSize()},$AFTER_SET_MAP_SIZE:function(){this.mapSize=this.oApp.getMapSize()},$ON_BEGIN_DRAG_DONE:function(){var t=this.trans._bIsPlaying;this.trans.abort(),t&&this.oApp.exec("SET_CENTER_POINT",[this.oApp.getPixelToPoint(this.oApp.getCenterPixel())])},$ON_ZOOM:function(){this.trans.abort()},$BEFORE_PAN_MAP:function(t,e){if(t=Math.round(t),e=Math.round(e),0==t&&0==e)return this.oApp.exec("PAN_MAP_START_DONE",[]),this.oApp.exec("PAN_MAP_END_DONE",[!0]),!1;var n=Math.abs(t)>this.mapSize.height||Math.abs(e)>this.mapSize.width;if(n){var i=this.oApp.getCenterPoint(),o=this.oApp.getZoomLevel();return i.x-=nhn.mapcore.TransPoint.fromPixelUnitToPointUnit(t,o),i.y+=nhn.mapcore.TransPoint.fromPixelUnitToPointUnit(e,o),this.oApp.exec("PAN_MAP_START_DONE",[]),this.oApp.exec("SET_CENTER",[i,o,!1]),this.oApp.exec("PAN_MAP_END_DONE",[]),!1}},$ON_PAN_MAP:function(t,e){t=Math.round(t),e=Math.round(e);var n=this;this.lastX=this.lastY=0,this.trans.start(200,{setter:function(t,e){var i=Math.round(e);switch(t){case"x":n.bufferX=i-n.lastX,n.lastX=i;break;case"y":n.bufferY=i-n.lastY,n.lastY=i,n.oApp.exec("MOVE_MAP",[{x:n.bufferX,y:n.bufferY}])}}},{x:[0,t],y:[0,e]})},$ON_PAN_MAP_END_DONE:function(){var t=this.oApp.getCenterPixel();this.oApp.exec("SET_CENTER_POINT",[this.oApp.getPixelToPoint(t)])}}),nhn.mapcore.ChangeMapProxy=jindo.$Class({name:"ChangeMapProxy",$init:function(){this.latestBound=null},$ON_REDRAW:function(t,e){this._fireMessage("CHANGE_MAP_DONE",t,e)},$ON_END_DRAG_DONE:function(){this._fireMessage("CHANGE_MAP_DONE",!1,!0)},$ON_PAN_MAP_END_DONE:function(t){this._fireMessage("CHANGE_MAP_DONE",!1,!t)},_fireMessage:function(t,e,n){this.oApp.getBound&&(e||n)&&this.oApp.exec(t,[e,n,this.oApp.getBound()])}}),nhn.map||(nhn.map={}),nhn.map.shape||(nhn.map.shape={}),function(){var t=function(){this._drawingType="NONE",this.isSupportSVG()?this._drawingType="SVG":this.isSupportCanvas()?this._drawingType="CANVAS":this.isSupportVML()&&(this._drawingType="VML")};t.prototype.getDrawingType=function(){return this._drawingType},t.prototype.isSupportSVG=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},t.prototype.isSupportVML=function(){if("undefined"==typeof t.__isSupportVML){var e=document.createElement("div");e.innerHTML='<v:shape id="vml_flag1" adj="1" />';var n=e.firstChild;n.style.behavior="url(#default#VML)",t.__isSupportVML=!n||"object"==typeof n.adj}return t.__isSupportVML},t.prototype.isSupportCanvas=function(){if("undefined"==typeof t.__isSupportCanvas){var e=document.createElement("canvas");t.__isSupportCanvas=!(!e.getContext||!e.getContext("2d"))}return t.__isSupportCanvas},t.prototype.extend=function(t){var e,n,i,o;for(o=1;o<arguments.length;o++){e=arguments[o];for(var a in e)if(e.hasOwnProperty(a))switch(n=e[a],i=typeof n,i.toLowerCase()){case"object":n instanceof Array?t[a]=this.extend([],n):t[a]=this.extend({},n);break;case"undefined":break;default:t[a]=e[a]}}return t},t.prototype.noop=function(){},t.prototype.emptyObj={},t.prototype.isEmptyObject=function(t){var e,n;for(e in t)if(t.hasOwnProperty(e)&&t[e]!=this.emptyObj[e])return!1;return!0},nhn.map.shape.DrawingUtil=new t}(),nhn.map||(nhn.map={}),nhn.map.shape||(nhn.map.shape={}),nhn.map.shape.LineAlgorithm={CS:{INSIDE:0,LEFT:1,RIGHT:2,BOTTOM:4,TOP:8,INSDIE:!0},clipLine:function(t,e,n,i,o){n=this._replaceBounds(n);var a=o?this._latestCode:this._getOutcode(t,n),s=this._getOutcode(e,n);this._latestCode=s;for(var r,h,l;;){if(this._isInside(a,s))return[t,e];if(this._isOutside(a,s))return!1;r=a?a:s,h=this._getEdgeIntersection(t,e,r,n,i),l=this._getOutcode(h,n),r===a?(t=h,a=l):(e=h,s=l)}},_replaceBounds:function(t){if(t instanceof Array){var e={};return e.minX=Math.min(t[0],t[2]),e.maxX=Math.max(t[0],t[2]),e.minY=Math.min(t[1],t[3]),e.maxY=Math.max(t[1],t[3]),e}return t},_isInside:function(t,e){return!(t|e)},_isOutside:function(t,e){return t&e},_getOutcode:function(t,e){var n=this.CS.INSIDE;return t.x<e.minX?n|=this.CS.LEFT:t.x>e.maxX&&(n|=this.CS.RIGHT),t.y<e.minY?n|=this.CS.BOTTOM:t.y>e.maxY&&(n|=this.CS.TOP),n},_getEdgeIntersection:function(t,e,n,i,o){var a=parseInt(t.x,10),s=parseInt(t.y,10),r=parseInt(e.x,10),h=parseInt(e.y,10);return n&this.CS.TOP?(y=i.maxY,x=a+(r-a)*(y-s)/(h-s)):n&this.CS.BOTTOM?(y=i.minY,x=a+(r-a)*(y-s)/(h-s)):n&this.CS.RIGHT?(x=i.maxX,y=s+(h-s)*(x-a)/(r-a)):n&this.CS.LEFT&&(x=i.minX,y=s+(h-s)*(x-a)/(r-a)),new o(parseInt(x,10),parseInt(y,10))},_isClosestPoint:function(t,e,n){return this.getDistance(t,e)<=n},getDistance:function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i+i)}},function(){var t=function(t){this.set(t)};t.prototype.blankBound={minX:0,minY:0,maxX:0,maxY:0},t.prototype.get=function(t){return"undefined"==typeof t?this._points:this._points[t]},t.prototype.set=function(t){if(t)if("string"==typeof t){this._points=[];for(var e=t.split(","),n=e.length/2,i=0;i<n;i++)this._points.push([1*e[2*i],1*e[2*i+1]])}else t&&(this._points=t);else this._points=[];this._updateBound()},t.prototype.add=function(){switch(arguments.length){case 1:this._points.push(arguments[0]),this.bound=this._compareBound(this.bound,arguments[0]);break;case 2:this._points.splice(arguments[0],0,arguments[1]),this.bound=this._compareBound(this.bound,arguments[1])}},t.prototype.remove=function(){if(arguments.length<3){var t;switch(arguments.length){case 0:t=this._points.pop();break;case 1:t=this._points.splice(arguments[0],1)[0];break;case 2:t=this._points.splice(arguments[0],arguments[1]-arguments[0]+1)}return this._updateBound(),t}return null},t.prototype.count=function(){return this._points.length},t.prototype.toPointsString=function(){return this._points.join(",")},t.prototype.toPathString=function(){var t="",e;return 0==this._points.length?"":(this._points.length>1&&this._points.splice(1,0,"L"),this._points.splice(0,0,"M"),t=this._points.join(" "),t=t.replace(/\.\d+/gi,""),!nhn.map.shape.DrawingUtil.isSupportSVG()&&nhn.map.shape.DrawingUtil.isSupportVML()&&(t=t.replace(/z m/gi,"x m")),"L"==this._points[2]&&this._points.splice(2,1),this._points.splice(0,1),t)},t.prototype.move=function(t,e){for(var n,i=0,o=this._points.length;i<o;i++)this._points[i][0]=this._points[i][0]+t,this._points[i][1]=this._points[i][1]+e;this._updateBound()},t.prototype._updateBound=function(){for(var t,e=0,n=this._points.length;e<n;e++)t=this._compareBound(t,this._points[e]);this.bound=t?t:this.blankBound},t.prototype._compareBound=function(t,e){return"string"==typeof e?t:t&&t!=this.blankBound?(e[0]<t.minX?t.minX=e[0]:e[0]>t.maxX&&(t.maxX=e[0]),e[1]<t.minY?t.minY=e[1]:e[1]>t.maxY&&(t.maxY=e[1]),t):{minX:e[0],minY:e[1],maxX:e[0],maxY:e[1]}},nhn.mapcore.Vertexes=t}(),function(){nhn.mapcore.Draggable=function(t,e){this.isMoving=!1;var n,i,o,a,s,r=nhn.mapcore.Util;r.extend(e,{start:r.emptyFunction,update:r.emptyFunction,finish:r.emptyFunction});var h=function(t){this.isMoving=!0;var o=t.pos();n=o.pageX,i=o.pageY,a=jindo.$Fn(l,this).attach(document,"mousemove"),s=jindo.$Fn(p,this).attach(document,"mouseup"),e.start(t)};o=jindo.$Fn(h,this).attach(t,"mousedown");var l=function(t){if(this.isMoving){var o=t.pos();e.update(t,o.pageX-n,o.pageY-i)}},p=function(o){if(this.isMoving){var r=o.pos();e.finish(o,r.pageX-n,r.pageY-i),a.detach(t,"mousemove"),s.detach(t,"mouseup"),a=null,s=null,n=0,i=0,this.isMoving=!1}};this.clear=function(){o.detach(t,"mousemove"),a&&a.detach(t,"mousemove"),s&&s.detach(t,"mouseup"),t=null}}}(),function(){nhn.mapcore.hasSVG=!jindo.$Agent().navigator().ie,nhn.mapcore.SHAPE_TYPE={CIRCLE:0,RECT:1,PATH:2,CLOSED_PATH:3,LINE_MEASUREMENT:4,SURFACE_MEASUREMENT:5};var t=nhn.mapcore.Util,e={options:{},initCommon:function(t,e){this.element=this._createElement(t),this.holder=this._createHolder(),this.holder.css({position:"absolute",overflow:"visible",margin:0,padding:0,border:0}),this.holder.append(this.element);for(var n in e)e.hasOwnProperty(n)&&this.setStyle(n,e[n]);this.setPrimitiveStyle("fill-rule","evenodd")},dashes:{solid:"0",shortdash:"2,1",shortdot:"1,1",shortdashdot:"2,1,1,1",shortdashdotdot:"2,1,1,1,1,1",dot:"1,2",dash:"3,2",longdash:"7,2",dashdot:"3,2,1,2",longdashdot:"7,2,1,2",longdashdotdot:"7,2,1,2,1,2"},_handlerKeys:{},_createElement:nhn.mapcore.hasSVG?function(t){return jindo.$Element(document.createElementNS("http://www.w3.org/2000/svg",t))}:function(t){var e=jindo.$Element(document.createElement("v:shape"));return e.css({position:"absolute",width:"1px",height:"1px"}),e.attr({coordorigin:"0 0",coordsize:"1 1"}),this._fillElement=jindo.$Element(document.createElement("v:fill")),this._fillElement.attr("on",!1),e.append(this._fillElement),this._strokeElement=jindo.$Element(document.createElement("v:stroke")),this._strokeElement.attr("on",!1),e.append(this._strokeElement),e},_createHolder:nhn.mapcore.hasSVG?function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg:svg");return t.setAttribute("version","1.1"),t.setAttribute("width","10px"),t.setAttribute("height","10px"),t.setAttribute("viewBox","0 0 10 10"),t.setAttribute("overflow","visible"),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),jindo.$Element(t)}:function(){return jindo.$Element("<div></div>")},getHolder:function(){return this.holder.$value()},avoidIE8VMLProblem:nhn.mapcore.browser.ie&&8==document.documentMode?function(){var t=this.element.$value(),e=t.parentNode;e.innerHTML=e.innerHTML,this.element=jindo.$Element(e.getElementsByTagName("shape")[0]),this._fillElement=jindo.$Element(e.getElementsByTagName("fill")[0]),this._strokeElement=jindo.$Element(e.getElementsByTagName("stroke")[0])}:function(){},getStyle:function(t){return this.options[t]?this.options[t]:null},setStyle:function(){var t,e;if(1==arguments.length){var n=this;jindo.$H(arguments[0]).forEach(function(t,e){n.setDependantStyle(e,t)})}else 2==arguments.length&&this.setDependantStyle.apply(this,arguments)},setPrimitiveStyle:nhn.mapcore.hasSVG?function(t,e){if("stroke-width"==t)e+="px";else if("stroke-style"==t){var n=this.dashes[e];if(!n)return;var i=parseInt(this.getStyle("stroke-width"),10),o=n.replace(/([0-9]+)/g,function(t,e){var n=parseInt(e);return n*i+(n>1?i:0)});t="stroke-dasharray",e=o}this.element.attr(t,e),"stroke-width"==t&&this.setPrimitiveStyle("stroke-style",this.getStyle("stroke-style"))}:function(t,e){switch(t){case"fill":case"stroke":var n="fill"==t?this._fillElement:this._strokeElement;"none"==e?n.attr("on",!1):(n.attr("on",!0),n.attr("color",e));break;case"stroke-width":this._strokeElement.attr("weight",e+"px");break;case"fill-opacity":this._fillElement.attr("opacity",e);break;case"stroke-opacity":this._strokeElement.attr("opacity",e);break;case"stroke-style":this._strokeElement.attr("dashstyle",e);break;default:this.element.attr(t,e)}},setBound:nhn.mapcore.hasSVG?function(t,e,n,i,o){0==t&&0==e&&0==n&&0==i?(this.holder.css({left:"0px",top:"0px"}),this.holder.attr({width:"0px",height:"0px",viewBox:"0 0 0 0 "})):(t-=o,e-=o,n+=2*o,i+=2*o,this.holder.css({left:t+1+"px",top:e+1+"px"}),this.holder.attr({width:n+"px",height:i+"px",viewBox:[t,e,n,i].join(" ")}))}:function(t,e,n,i,o){this.holder.css({left:"0px",top:"0px"})},show:function(){this.element.show()},hide:function(){this.element.hide()},isEqual:function(t){return this.element.isEqual(t)},isCommonStyle:function(t){switch(t){case"stroke":case"fill":case"stroke-width":case"fill-opacity":case"stroke-opacity":case"stroke-style":return!0;default:return!1}},clear:function(){this.disable&&this.disable(),this.holder.remove(this.element.$value()),this.element=null,this.options=null}};nhn.mapcore.Shape=e}(),function(){var t=nhn.mapcore.Util,e=t.extend({type:nhn.mapcore.SHAPE_TYPE.CIRCLE,options:{stroke:"red",fill:"none","stroke-width":1,"fill-opacity":1,"stroke-opacity":1,cx:0,cy:0,r:0},$init:function(e){this.options=t.extend(t.extend({},e),this.options),this.initCommon("path",this.options)},setDependantStyle:function(t,e){if("undefined"!=typeof this.options[t]){var n=this.options;if(n[t]=e,!this.isCommonStyle(t)||"stroke-width"==t){var i=n["stroke-width"],o=n.r,a=n.cx-o,s=n.cy-o,r=2*o;this.makeShape(a,s,o),this.setBound(a,s,r,r,i)}this.isCommonStyle(t)&&this.setPrimitiveStyle(t,e)}},makeShape:nhn.mapcore.hasSVG?function(t,e,n){this.element.attr("d",["M",t,e+n,"A",n,n,0,1,0,t,e+n-1,"Z"].join(" "))}:function(t,e,n){var i=2*n;this.element.attr("path",["AR",t,e,t+i,e+i,"0 0 0 0 X E"].join(" "))}},nhn.mapcore.Shape);nhn.mapcore.Circle=jindo.$Class(e)}(),function(){var t=nhn.mapcore.Util,e=t.extend({type:nhn.mapcore.SHAPE_TYPE.RECT,options:{stroke:"red",fill:"none","stroke-width":1,"fill-opacity":1,"stroke-opacity":1,x:0,y:0,width:0,height:0},$init:function(e){this.options=t.extend(t.extend({},e),this.options),this.initCommon("path",this.options)},setDependantStyle:function(t,e){if("undefined"!=typeof this.options[t]){var n=this.options;if(n[t]=e,!this.isCommonStyle(t)||"stroke-width"==t){var i=n["stroke-width"];this.makeShape(n.x,n.y,n.width,n.height),this.setBound(n.x,n.y,n.width,n.height,i)}this.isCommonStyle(t)&&this.setPrimitiveStyle(t,e)}},makeShape:nhn.mapcore.hasSVG?function(t,e,n,i){this.element.attr("d",["M",t,e,"L",t+n,e,t+n,e+i,t,e+i,"Z"].join(" "))}:function(t,e,n,i){this.element.attr("path",["M",t,e,"L",t+n,e,t+n,e+i,t,e+i,"X E"].join(" "))}},nhn.mapcore.Shape);nhn.mapcore.Rect=jindo.$Class(e)}(),function(){var t=nhn.mapcore.Util,e=nhn.mapcore.Util.extend({type:nhn.mapcore.SHAPE_TYPE.PATH,options:{stroke:"#007EEA",fill:"none","stroke-width":3,"fill-opacity":1,"stroke-opacity":1,"stroke-style":"solid",d:""},$init:function(e){this.vertexes=new nhn.mapcore.Vertexes,this.options=t.extend(t.extend({},e),this.options),this.initCommon("path",this.options),nhn.mapcore.hasSVG?this.element.attr({"stroke-linejoin":"round"}):this._strokeElement.attr({joinstyle:"round"})},handleFillStyle:function(t,e){"fill"!=t&&(e.fill="none")},setDependantStyle:function(t,e){if(this.handleFillStyle(t,this.options),"undefined"!=typeof this.options[t]){var n=this.options;n[t]=e;var i="stroke-width"==t;if(!this.isCommonStyle(t)||i){var o=n["stroke-width"];i||this.vertexes.set(n.d),this.makeShape(this.vertexes.toPathString());var a=this.vertexes.bound;this.setBound(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY,o)}this.isCommonStyle(t)&&this.setPrimitiveStyle(t,e)}},makeShape:nhn.mapcore.hasSVG?function(t){t=t||"M 0,0",this.element.attr("d",t)}:function(t){this.element.attr("path",t+" E")},getPoint:function(t){return this.vertexes.get(t)},getPoints:function(){return this.vertexes.get()},countPoints:function(){return this.vertexes.count()},update:function(t){t&&this.vertexes.set(t),this.setDependantStyle("d",this.vertexes.get())}},nhn.mapcore.Shape),n=nhn.mapcore.Util.extend({type:nhn.mapcore.SHAPE_TYPE.CLOSED_PATH,options:{stroke:"#007EEA",fill:"#7EBEF4","stroke-width":3,"fill-opacity":1,"stroke-opacity":1,"stroke-style":"solid",d:""},handleFillStyle:function(t,e){},makeShape:nhn.mapcore.hasSVG?function(t){t=t||"M 0,0",this.element.attr("d",t+" Z")}:function(t){this.element.attr("path",t+" X E")}},e);nhn.mapcore.Path=jindo.$Class(e),nhn.mapcore.ClosedPath=jindo.$Class(n)}(),function(t){var e={enable:function(){var e=nhn.mapcore.Util.bind;this.draggable=new nhn.mapcore.Draggable(this.element,{start:e(this,this._dragStart),update:e(this,this._dragUpdate),finish:e(this,this._dragFinish)}),this._onOverHandler=jindo.$Fn(function(e){this.draggable.isMoving||t.onMouseOver(this.type,this)},this).attach(this.element,"mouseover"),this._onOutHandler=jindo.$Fn(function(e){this.draggable.isMoving||t.onMouseOutFromShape(e)},this).attach(this.element,"mouseout"),this.enabled=!0},disable:function(){this.enabled&&(this.draggable.clear(),this.draggable=null,this._onOverHandler.detach(this.element,"mouseover"),this._onOutHandler.detach(this.element,"mouseout"),this._onOverHandler=null,this._onOutHandler=null)},addPoint:function(){this.vertexes.add.apply(this.vertexes,arguments),this.update()},removePoint:function(){var t=this.vertexes.remove.apply(this.vertexes,arguments);return this.update(),t},clearPoints:function(){for(;this.vertexes.count()>0;)this.vertexes.remove();this.update()},_dragStart:function(){t.onMouseOut(),this._startLeft=nhn.mapcore.Util.cssToNum(this.holder.css("left")),this._startTop=nhn.mapcore.Util.cssToNum(this.holder.css("top"))},_dragUpdate:function(t,e,n){this.holder.css({left:this._startLeft+e+"px",top:this._startTop+n+"px"})},_dragFinish:function(e,n,i){this.element.hide(),this.vertexes.move(n,i),this.update(),this.element.show(),t.onMouseOver(this.type,this),this._startLeft=-10,this._startTop=-10},updateVertexes:function(t){this.update(t)},toPointsString:function(){return this.vertexes.toPointsString()}};nhn.mapcore.Util.extend(nhn.mapcore.Path.prototype,e),nhn.mapcore.Util.extend(nhn.mapcore.ClosedPath.prototype,e)}(nhn.mapcore.ModPointManager),nhn.mapcore.MOD_POINT={TYPE_VERTEX:0,TYPE_CENTER:1},nhn.mapcore.ModPoint=jindo.$Class({HALF_OF_WIDTH:4,OUT_OF_SCREEN:-20,styleOfCommon:{border:"1px solid rgb(0, 0, 0)",fontSize:"1%",display:"none",position:"absolute",width:"9px",height:"9px",backgroundColor:"white"},styleOfVertex:{opacity:1},styleOfCenter:{opacity:.5},$init:function(t,e,n,i){this.manager=t,this.type=i?i:nhn.mapcore.MOD_POINT.TYPE_VERTEX,e="undefined"!=typeof e?e:this.OUT_OF_SCREEN,n="undefined"!=typeof n?n:this.OUT_OF_SCREEN,this.element=jindo.$Element("<div></div>"),this.element.css(this.styleOfCommon),this.set(e,n,this.type),nhn.mapcore.Util.disableSelection(this.element.$value());var o=nhn.mapcore.Util.bind;this.draggable=new nhn.mapcore.Draggable(this.element,{start:o(this,this.dragStart),update:o(this,this.dragUpdate),finish:o(this,this.dragFinish)}),this.mouseouter=jindo.$Fn(this.mouseOut,this).attach(this.element,"mouseout")},set:function(t,e,n){this._set(t-this.HALF_OF_WIDTH,e-this.HALF_OF_WIDTH),this.setType(n)},_set:function(t,e){this.element.css({left:t+"px",top:e+"px"})},setType:function(t){switch(this.type="undefined"!=typeof t?t:this.type,t){case nhn.mapcore.MOD_POINT.TYPE_VERTEX:this.element.css(this.styleOfVertex);break;case nhn.mapcore.MOD_POINT.TYPE_CENTER:this.element.css(this.styleOfCenter)}},get:function(){return[nhn.mapcore.Util.cssToNum(this.element.css("left"))+this.HALF_OF_WIDTH,nhn.mapcore.Util.cssToNum(this.element.css("top"))+this.HALF_OF_WIDTH]},dragStart:function(t){this.originX=nhn.mapcore.Util.cssToNum(this.element.css("left")),this.originY=nhn.mapcore.Util.cssToNum(this.element.css("top")),this.manager.dragStart(this)},dragUpdate:function(t,e,n){this._set(this.originX+e,this.originY+n),this.manager.dragUpdate(this,e,n)},dragFinish:function(t,e,n){this._set(this.originX+e,this.originY+n),this.originX=-1,this.originY=-1,this.manager.dragFinish(this,e,n)},mouseOut:function(t){this.draggable.isMoving||this.manager.onMouseOutFromPoint(t)},show:function(){this.element.show()},hide:function(){this.element.hide()},reset:function(){this.set(this.OUT_OF_SCREEN,this.OUT_OF_SCREEN,nhn.mapcore.MOD_POINT.TYPE_VERTEX),this.hide()},clear:function(){this.draggable.clear(),this.mouseouter.detach(this.element,"mouseout"),this.manager=null,this.draggable=null,this.element=null},toString:function(){return""+this.get()},isEqual:function(t){return this.element.isEqual(t)}}),nhn.mapcore.ModGuidePath=jindo.$Class({$init:function(t){this.canvas=jindo.$Element(t),this.path=new nhn.mapcore.Path({stroke:"#007EEA","stroke-width":3,"stroke-style":"shortdash",d:[]}),nhn.mapcore.hasSVG||(this.path.holder.css("zIndex",10),this.canvas.append(this.path.holder),this.path.hide())},show:nhn.mapcore.hasSVG?function(){this.canvas.append(this.path.holder)}:function(){this.path.show()},hide:nhn.mapcore.hasSVG?function(){this.canvas.$value().removeChild(this.path.holder.$value())}:function(){this.path.hide()},dragStart:function(t){this.curPoints=t,this.path.setStyle("d",this.toPathString(this.curPoints)),this.show()},dragUpdate:function(t){var e=this.curPoints.indexOf(t);if(t.type==nhn.mapcore.MOD_POINT.TYPE_VERTEX){var n=this.curPoints[e-1];this._updateCenterPoint(n,e-1);var i=this.curPoints[e+1];this._updateCenterPoint(i,e+1)}this.path.setStyle("d",this.toPathString(this.curPoints))},dragFinish:function(){this.curPoints=null,this.path.setStyle("d",null),this.hide()},_updateCenterPoint:function(t,e){if(t&&t.type==nhn.mapcore.MOD_POINT.TYPE_CENTER){var n=this.curPoints[e-1].get(),i=this.curPoints[e+1].get();t.set((n[0]+i[0])/2,(n[1]+i[1])/2)}},toPathString:function(){for(var t=[],e=0;e<this.curPoints.length;e++)t.push(this.curPoints[e].toString());return t.join(",")}}),nhn.mapcore.ModPointManager=jindo.$Class({length:-1,
type:null,shape:null,points:[],$init:function(t){this.element=jindo.$Element(document.createElement("div")),this.element.css({position:"absolute",left:"0px",top:"0px",zIndex:20});for(var e=0;e<15;e++)this.points.push(this._addModPoint());t=jindo.$Element(t),t.append(this.element),this.guidePath=new nhn.mapcore.ModGuidePath(t)},_addModPoint:function(t,e,n){var i=new nhn.mapcore.ModPoint(this,t,e,n);return this.element.append(i.element),i},onMouseOver:function(t,e){this.onMouseOut(),this.type=t,this.shape=e;var n=e.vertexes,i=n.count();this.type==nhn.mapcore.SHAPE_TYPE.CLOSED_PATH?this.length=2*i:this.length=2*i-1;for(var o,a,s,r,h,t,l=0;l<this.length;l++)l%2==0?(o=l/2,s=n.get(o),r=s[0],h=s[1],t=nhn.mapcore.MOD_POINT.TYPE_VERTEX):(o=(l-1)/2,s=n.get(o),a=n.get(l==this.length-1?0:o+1),r=(s[0]+a[0])/2,h=(s[1]+a[1])/2,t=nhn.mapcore.MOD_POINT.TYPE_CENTER),this._setPoint(l,r,h,t)},onMouseOut:function(){if(!this.isDraggaing){for(var t=0;t<this.length;t++)this.points[t].reset(),this.points[t].hide();this.length=-1,this.type=null,this.shape=null}},onMouseOutFromShape:function(t){this.shape&&this.isOnModPoints(t.relatedElement)||this.onMouseOut()},onMouseOutFromPoint:function(t){this.shape&&this.shape.isEqual(t.relatedElement)||this.onMouseOut()},isOnModPoints:function(t){for(var e=0;e<this.length;e++)if(this.points[e].isEqual(t))return!0;return!1},dragStart:function(t){this.isDraggaing=!0,this.element.css("zIndex",21),this.index=this.points.indexOf(t);var e=[];this._fillPrevPoint(e),e.push(this.points[this.index]),this._fillNextPoint(e),this.guidePath.dragStart(e)},dragUpdate:function(t,e,n){this.index!=-1&&this.guidePath.dragUpdate(t)},dragFinish:function(t,e,n){if(this.isDraggaing=!1,this.element.css("zIndex",20),this.index!=-1){if(t.type==nhn.mapcore.MOD_POINT.TYPE_CENTER){t.setType(nhn.mapcore.MOD_POINT.TYPE_VERTEX),this._setPoint(this.length,-20,-20,nhn.mapcore.MOD_POINT.TYPE_CENTER),this._setPoint(this.length+1,-20,-20,nhn.mapcore.MOD_POINT.TYPE_CENTER),this.length=this.length+2;for(var i,o,a=this.length-1;a>=this.index;a--)switch(a){case this.index:i=this.points[a-1].get(),o=this.points[a+1].get(),this._setPoint(a,(i[0]+o[0])/2,(i[1]+o[1])/2,nhn.mapcore.MOD_POINT.TYPE_CENTER);break;case this.index+1:this._copyPoint(a-1,a);break;case this.index+2:i=this.points[a-2].get(),o=a+1>this.length-1?this.points[0].get():this.points[a+1].get(),this._setPoint(a,(i[0]+o[0])/2,(i[1]+o[1])/2,nhn.mapcore.MOD_POINT.TYPE_CENTER);break;default:this._copyPoint(a-2,a)}}for(var s,r=[],h=0;h<this.length;h++)s=this.points[h],s.type==nhn.mapcore.MOD_POINT.TYPE_VERTEX&&r.push(s.get());this.shape.updateVertexes(r),this.guidePath.dragFinish(),this.index=-1}},_setPoint:function(t,e,n,i){var o;t>=this.points.length?(o=this._addModPoint(e,n,i),this.points.push(o)):(o=this.points[t],o.set(e,n,i)),o.show()},_copyPoint:function(t,e){var n=this.points[t],i=n.get();this._setPoint(e,i[0],i[1],n.type)},_fillPrevPoint:function(t){if(this.index>0||0==this.index&&this.type==nhn.mapcore.SHAPE_TYPE.CLOSED_PATH){var e=0==this.index?this.length-1:this.index-1,n=this.points[e];n.type==nhn.mapcore.MOD_POINT.TYPE_CENTER&&t.push(this.points[e-1]),t.push(n)}},_fillNextPoint:function(t){var e=this.length-1;if(this.index<e||this.index==e&&this.type==nhn.mapcore.SHAPE_TYPE.CLOSED_PATH){var n=this.index==e?0:this.index+1,i=this.points[n];t.push(i),i.type==nhn.mapcore.MOD_POINT.TYPE_CENTER&&(n+=1,n==this.length?t.push(this.points[0]):t.push(this.points[n]))}}}),function(){var t=nhn.mapcore.Util,e=nhn.mapcore.Util.extend({type:nhn.mapcore.SHAPE_TYPE.PATH,options:{stroke:"#007EEA","stroke-width":3,"stroke-opacity":1,d:""},$init:function(e){this.vertexes=new nhn.mapcore.Vertexes,this.options=t.extend(t.extend({},e),this.options),this.initCommon("path",this.options)},initCommon:function(t,e){this.element=this._createElement(t),this.holder=this._createHolder(),this.context=this.element.$value().getContext("2d"),this.holder.css({position:"absolute",overflow:"visible",margin:0,padding:0,border:0}),this.element.css({position:"absolute",overflow:"visible",margin:0,padding:0,border:0}),this.holder.append(this.element)},_createElement:function(t){return jindo.$Element(document.createElement("canvas"))},_createHolder:function(){return jindo.$Element("<div></div>")},getStyle:function(t){return this.options[t]?this.options[t]:null},setStyle:function(){var t,e;if(1==arguments.length){var n=this;jindo.$H(arguments[0]).forEach(function(t,e){n.setDependantStyle(e,t)})}else 2==arguments.length&&this.setDependantStyle.apply(this,arguments)},handleFillStyle:function(t,e){this.context.lineJoin="miter"},setDependantStyle:function(t,e){if(this.handleFillStyle(t,this.options),"undefined"!=typeof this.options[t]){var n=this.options;n[t]=e;var i=n["stroke-width"];this.vertexes.set(n.d);var o=this.vertexes.bound;this.setBound(o.minX,o.minY,o.maxX-o.minX,o.maxY-o.minY,i),this.makeShape(n.d,n)}},setPrimitiveStyle:function(t,e){"stroke-width"==t?this.context.lineWidth=e:"stroke-opacity"==t?this.context.globalAlpha=e:"stroke"==t?this.context.strokeStyle=e:"fill"==t&&(this.context.fillStyle=e)},isCommonStyle:function(t){switch(t){case"stroke":case"fill":case"stroke-width":case"fill-opacity":case"stroke-opacity":case"stroke-style":return!0;default:return!1}},makeShape:function(t,e){var n=this.element.css("width"),i=this.element.css("height"),o=this.holder.css("left"),a=this.holder.css("top"),s=parseInt(n,10),r=parseInt(i,10);this.context.clearRect(0,0,s,r);var h=parseInt(a,10),l=parseInt(o,10);this.context.beginPath();for(var p in e)e.hasOwnProperty(p)&&this.setPrimitiveStyle(p,e[p]);if(0!=t.length){this.context.moveTo(t[0][0]-l,t[0][1]-h);for(var c=1;c<t.length;c++)this.context.lineTo(t[c][0]-l,t[c][1]-h)}this.context.stroke()},setBound:function(t,e,n,i,o){0==t&&0==e&&0==n&&0==i?(this.holder.css({left:"0px",top:"0px"}),this.holder.css({width:"0px",height:"0px",viewBox:"0 0 0 0 "})):(t-=o,e-=o,n+=2*o,i+=2*o,this.holder.css({left:t+1+"px",top:e+1+"px"}),this.holder.css({width:n+"px",height:i+"px"}),this.element.attr({width:n+"px",height:i+"px"}))},getPoint:function(t){return this.vertexes.get(t)},getPoints:function(){return this.vertexes.get()},countPoints:function(){return this.vertexes.count()},update:function(t){t&&this.vertexes.set(t),this.setDependantStyle("d",this.vertexes.get())}},nhn.mapcore.Shape),n=nhn.mapcore.Util.extend({type:nhn.mapcore.SHAPE_TYPE.CLOSED_PATH,options:{stroke:"#007EEA",fill:"none","stroke-width":3,"fill-opacity":1,"stroke-opacity":1,d:""},handleFillStyle:function(t,e){},makeShape:function(t,e){var n=this.element.css("width"),i=this.element.css("height"),o=this.holder.css("left"),a=this.holder.css("top"),s=parseInt(n,10),r=parseInt(i,10);this.context.clearRect(0,0,s,r);var h=parseInt(a,10),l=parseInt(o,10);this.context.beginPath();for(var p in e)e.hasOwnProperty(p)&&"d"!=p&&this.setPrimitiveStyle(p,e[p]);if(0!=t.length){this.context.moveTo(t[0][0]-l,t[0][1]-h);for(var c=1;c<t.length;c++)this.context.lineTo(t[c][0]-l,t[c][1]-h)}"none"!=e.fill&&(this.context.fill(),this.context.strokeStyle=e.stroke.value),this.context.closePath(),this.context.stroke()}},e);nhn.mapcore.Path_android=jindo.$Class(e),nhn.mapcore.ClosedPath_android=jindo.$Class(n)}(),function(){var t=nhn.mapcore.Util,e=nhn.mapcore.Util.extend({type:nhn.mapcore.SHAPE_TYPE.PATH,options:{stroke:"red",fill:"none","stroke-width":1,"fill-opacity":1,"stroke-opacity":1,cx:0,cy:0,r:0},$init:function(e){this.options=t.extend(t.extend({},e),this.options),this.initCommon("path",this.options)},initCommon:function(t,e){this.element=this._createElement(t),this.holder=this._createHolder(),this.context=this.element.$value().getContext("2d"),this.holder.css({position:"absolute",overflow:"visible",margin:0,padding:0,border:0}),this.element.css({position:"absolute",overflow:"visible",margin:0,padding:0,border:0}),this.holder.append(this.element)},_createElement:function(t){return jindo.$Element(document.createElement("canvas"))},_createHolder:function(){return jindo.$Element("<div></div>")},getStyle:function(t){return this.options[t]?this.options[t]:null},setStyle:function(){var t,e;if(1==arguments.length){var n=this;jindo.$H(arguments[0]).forEach(function(t,e){n.setDependantStyle(e,t)})}else 2==arguments.length&&this.setDependantStyle.apply(this,arguments)},handleFillStyle:function(t,e){this.context.lineJoin="miter"},setDependantStyle:function(t,e){if(this.handleFillStyle(t,this.options),"undefined"!=typeof this.options[t]){var n=this.options;n[t]=e;var i=n["stroke-width"],o=n.r,a=n.cx,s=n.cy,r=2*o;this.setBound(a,s,r,r,i),this.makeShape(a,s,o,n)}},setPrimitiveStyle:function(t,e){"stroke-width"==t?this.context.lineWidth=e:"stroke-opacity"==t?this.context.globalAlpha=e:"stroke"==t?this.context.strokeStyle=e:"fill"==t&&(this.context.fillStyle=e)},isCommonStyle:function(t){switch(t){case"stroke":case"fill":case"stroke-width":case"fill-opacity":case"stroke-opacity":case"stroke-style":return!0;default:return!1}},makeShape:function(t,e,n,i){var o=this.element.css("width"),a=this.element.css("height"),s=this.holder.css("left"),r=this.holder.css("top"),h=parseInt(o,10),l=parseInt(a,10);this.context.clearRect(0,0,h,l);var p=parseInt(r,10),c=parseInt(s,10);this.context.beginPath();for(var u in i)i.hasOwnProperty(u)&&("cx"==u&&"cy"==u&&"r"==u||this.setPrimitiveStyle(u,i[u]));var d=0,f=2*Math.PI,m=!1;this.context.arc(t-c,e-p,n,d,f,m),"none"!=i.fill&&(this.context.fill(),this.context.strokeStyle=i.stroke.value),this.context.closePath(),this.context.stroke()},setBound:function(t,e,n,i,o){if(0==t&&0==e&&0==n&&0==i)this.holder.css({left:"0px",top:"0px"}),this.holder.css({width:"0px",height:"0px",viewBox:"0 0 0 0 "});else{t-=o,e-=o,n+=2*o,i+=2*o;var a=(n-2*o)/2,s=(i-2*o)/2;this.holder.css({left:t-a+1+"px",top:e-s+1+"px"}),this.holder.css({width:n+"px",height:i+"px"}),this.element.attr({width:n+"px",height:i+"px"})}}},nhn.mapcore.Shape);nhn.mapcore.Circle_android=jindo.$Class(e)}(),function(){var t=nhn.mapcore.Util,e=nhn.mapcore.Util.extend({type:nhn.mapcore.SHAPE_TYPE.PATH,options:{stroke:"red",fill:"none","stroke-width":1,"fill-opacity":1,"stroke-opacity":1,x:0,y:0,width:0,height:0},$init:function(e){this.options=t.extend(t.extend({},e),this.options),this.initCommon("path",this.options)},initCommon:function(t,e){this.element=this._createElement(t),this.holder=this._createHolder(),this.context=this.element.$value().getContext("2d"),this.holder.css({position:"absolute",overflow:"visible",margin:0,padding:0,border:0}),this.element.css({position:"absolute",overflow:"visible",margin:0,padding:0,border:0}),this.holder.append(this.element)},_createElement:function(t){return jindo.$Element(document.createElement("canvas"))},_createHolder:function(){return jindo.$Element("<div></div>")},getStyle:function(t){return this.options[t]?this.options[t]:null},setStyle:function(){var t,e;if(1==arguments.length){var n=this;jindo.$H(arguments[0]).forEach(function(t,e){n.setDependantStyle(e,t)})}else 2==arguments.length&&this.setDependantStyle.apply(this,arguments)},handleFillStyle:function(t,e){this.context.lineJoin="miter"},setDependantStyle:function(t,e){if(this.handleFillStyle(t,this.options),"undefined"!=typeof this.options[t]){var n=this.options;n[t]=e;var i=n["stroke-width"],o=n.x,a=n.y,s=n.width,r=n.height;this.setBound(o,a,s,r,i),this.makeShape(o,a,s,r,n)}},setPrimitiveStyle:function(t,e){"stroke-width"==t?this.context.lineWidth=e:"stroke-opacity"==t?this.context.globalAlpha=e:"stroke"==t?this.context.strokeStyle=e:"fill"==t&&(this.context.fillStyle=e)},isCommonStyle:function(t){switch(t){case"stroke":case"fill":case"stroke-width":case"fill-opacity":case"stroke-opacity":case"stroke-style":return!0;default:return!1}},makeShape:function(t,e,n,i,o){var a=this.element.css("width"),s=this.element.css("height"),r=this.holder.css("left"),h=this.holder.css("top"),l=parseInt(a,10),p=parseInt(s,10);this.context.clearRect(0,0,l,p);var c=parseInt(h,10),u=parseInt(r,10);this.context.beginPath();for(var d in o)o.hasOwnProperty(d)&&("x"==d&&"y"==d&&"width"==d&&"height"==d||this.setPrimitiveStyle(d,o[d]));this.context.rect(t-u,e-c,n,i),"none"!=o.fill&&(this.context.fill(),this.context.strokeStyle=o.stroke.value),this.context.closePath(),this.context.stroke()},setBound:function(t,e,n,i,o){0==t&&0==e&&0==n&&0==i?(this.holder.css({left:"0px",top:"0px"}),this.holder.css({width:"0px",height:"0px",viewBox:"0 0 0 0 "})):(t-=o,e-=o,n+=2*o,i+=2*o,this.holder.css({left:t+1+"px",top:e+1+"px"}),this.holder.css({width:n+"px",height:i+"px"}),this.element.attr({width:n+"px",height:i+"px"}))}},nhn.mapcore.Shape);nhn.mapcore.Rect_android=jindo.$Class(e)}(),nhn.map.shape||(nhn.map.shape={}),function(){var t=function(t){this.options=nhn.map.shape.DrawingUtil.extend({},this.options,t),this.element=this._initShape(),this._updateShape(),this._updateStyle()};t.prototype.options={},t.prototype.setOptions=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,t),this.isShapeChanged(t)&&this._updateShape(),this.isStyleChanged(t)&&this._updateStyle()},t.prototype._initShape=function(){return null},t.prototype._updateShape=nhn.map.shape.DrawingUtil.noop,t.prototype._updateStyle=nhn.map.shape.DrawingUtil.noop,t.prototype.isShapeChanged=function(t){return!1},t.prototype.isStyleChanged=function(t){return!1},t.prototype._calcBounds=function(t,e,n,i,o){var a;return a=0===t&&0===e&&0===n&&0===i?{x:0,y:0,w:0,h:0}:{x:t-o,y:e-o,w:n+2*o,h:i+2*o}},t.prototype.getElement=function(){return this.element},nhn.map.shape.Shape=t}(),function(){var t={circle:{options:{stroke:"#007EEA","stroke-opacity":1,"stroke-width":1,"stroke-style":"solid",fill:"none","fill-opacity":1,cx:0,cy:0,r:0},isShapeChanged:function(t){return"undefined"!=typeof t.cx||"undefined"!=typeof t.cy||"undefined"!=typeof t.r}},rectangle:{options:{stroke:"#007EEA","stroke-opacity":1,"stroke-width":1,"stroke-style":"solid",fill:"none","fill-opacity":1,x:0,y:0,width:0,height:0},isShapeChanged:function(t){return"undefined"!=typeof t.x||"undefined"!=typeof t.y||"undefined"!=typeof t.width||"undefined"!=typeof t.height}},path:{options:{stroke:"#007EEA","stroke-opacity":1,"stroke-width":1,"stroke-style":"solid",fill:"none","fill-opacity":1,d:""},isShapeChanged:function(t){return"undefined"!=typeof t.d},isStyleChanged:function(t){return"undefined"!=typeof t.stroke||"undefined"!=typeof t["stroke-opacity"]||"undefined"!=typeof t["stroke-width"]||"undefined"!=typeof t["stroke-style"]}},closedPath:{options:{stroke:"#007EEA","stroke-opacity":1,"stroke-width":1,"stroke-style":"solid",fill:"#007EEA","fill-opacity":.3,d:""},isShapeChanged:function(t){return"undefined"!=typeof t.d}},isStyleChanged:function(t){return"undefined"!=typeof t.stroke||"undefined"!=typeof t["stroke-opacity"]||"undefined"!=typeof t["stroke-width"]||"undefined"!=typeof t["stroke-style"]||"undefined"!=typeof t.fill||"undefined"!=typeof t["fill-opacity"]}};if(t.circle.isStyleChanged=t.isStyleChanged,t.rectangle.isStyleChanged=t.isStyleChanged,t.closedPath.isStyleChanged=t.isStyleChanged,nhn.map.shape.CommonShape=t,"NONE"===nhn.map.shape.DrawingUtil.getDrawingType()){var e=nhn.map.shape.DrawingUtil.noop;nhn.map.shape.Circle=function(){},nhn.map.shape.Circle.prototype={setCenter:e,setRadius:e,setOptions:e},nhn.map.shape.Rectangle=function(){},nhn.map.shape.Rectangle.prototype={setBounds:e,setOptions:e},nhn.map.shape.Path=function(){},nhn.map.shape.Path.prototype={setPath:e,setOptions:e},nhn.map.shape.ClosedPath=function(){},nhn.map.shape.ClosedPath.prototype={setPath:e,setOptions:e}}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportSVG()){var t=jindo.$Agent().navigator(),e=function(t){nhn.map.shape.Shape.call(this,t),this._setBounds()};e.prototype=new nhn.map.shape.Shape,e.prototype._initShape=function(){var t=this._calcBoundsFromOptions(),e="svg:svg",n;return jindo.$Agent().navigator().ie&&(e="svg"),n=document.createElementNS("http://www.w3.org/2000/svg",e),n.setAttribute("version","1.1"),n.setAttribute("width",t.w+"px"),n.setAttribute("height",t.h+"px"),n.setAttribute("viewBox",""+t.x+" "+t.y+" "+t.w+" "+t.h),n.setAttribute("overflow","visible"),n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.setAttribute("style","position:absolute;overflow:visible;margin:0;padding:0;border:0;width:"+t.w+"px; height:"+t.h+"px;"),this._shapeElement=document.createElementNS("http://www.w3.org/2000/svg","path"),this._shapeElement.setAttribute("fill-rule","evenodd"),n.appendChild(this._shapeElement),n},e.prototype.setOptions=function(t){nhn.map.shape.Shape.prototype.setOptions.call(this,t),this._setBounds()},e.prototype._updateShape=function(){},e.prototype._updateStyle=function(){var t=this._getDefaultStyleString(this.options),e=this._shapeElement.parentNode.childNodes.length;if(e>1)for(var n=0;n<e;++n)this._shapeElement.parentNode.childNodes[n].setAttribute("style",t);else this._shapeElement.setAttribute("style",t)},e.prototype._setBounds=function(){var t=this._shapeElement.parentNode.childNodes.length;if(t>1)this.setMultiBounds();else{var e=this.getElement(),n=this._calcBoundsFromOptions();e.style.left=n.x+"px",e.style.top=n.y+"px",e.style.width=n.w+"px",e.style.height=n.h+"px",e.setAttribute("width",n.w+"px"),e.setAttribute("height",n.h+"px"),e.setAttribute("viewBox",""+n.x+" "+n.y+" "+n.w+" "+n.h)}},e.prototype._calcBoundsFromOptions=function(){return this._calcBounds(0,0,0,0,0)},e.prototype._getDefaultStyleString=function(t){if(nhn.map.shape.DrawingUtil.isEmptyObject(t))return"";var e=[];"none"!=t.stroke?(e.push("stroke:"+t.stroke,"stroke-width:"+t["stroke-width"]+"px","stroke-opacity:"+t["stroke-opacity"]),t["stroke-style"]&&e.push(this._dashStyleToArray(t["stroke-style"],t["stroke-width"]))):e.push("stroke:none"),"none"!=t.fill?e.push("fill:"+t.fill,"fill-opacity:"+t["fill-opacity"]):e.push("fill:none");var n=e.join(";");return n?n+";":""},e.prototype.DASH_STYLE={solid:"0",shortdash:"2,1",shortdot:"1,1",shortdashdot:"2,1,1,1",shortdashdotdot:"2,1,1,1,1,1",dot:"1,2",dash:"3,2",longdash:"7,2",dashdot:"3,2,1,2",longdashdot:"7,2,1,2",longdashdotdot:"7,2,1,2,1,2"},e.prototype._dashStyleToArray=function(t,e){var n=this.DASH_STYLE[t];n=n?n:this.DASH_STYLE.solid,e=parseInt(e,10);var i=n.replace(/([0-9]+)/g,function(t,n){return n=parseInt(n,10),n*e+(n>1?e:0)});return"0"===i?"":"stroke-dasharray:"+i},e.prototype.clear=function(){this.element.removeChild(this._shapeElement),this.element=this._shapeElement=null,this.options=null},nhn.map.shape.ShapeSVG=e}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportSVG()){var t=function(t){nhn.map.shape.ShapeSVG.call(this,t)};t.prototype=new nhn.map.shape.ShapeSVG,t.prototype=nhn.map.shape.DrawingUtil.extend(t.prototype,nhn.map.shape.CommonShape.circle),t.prototype.constructor=t,t.prototype.setCenter=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{cx:t.x,cy:t.y}),this._updateShape(),this._setBounds()},t.prototype.setRadius=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{r:t}),this._updateShape(),this._setBounds()},t.prototype._updateShape=function(){var t=this.options.r,e=this.options.cx-t,n=this.options.cy-t;this._shapeElement.setAttribute("d",["M",e,n+t,"A",t,t,0,1,0,e,n+t-1,"Z"].join(" "))},t.prototype._calcBoundsFromOptions=function(){var t=this.options.cx-this.options.r,e=this.options.cy-this.options.r,n=2*this.options.r,i=n,o=this.options["stroke-width"];return this._calcBounds(t,e,n,i,o)},nhn.map.shape.CircleSVG=t,"SVG"===nhn.map.shape.DrawingUtil.getDrawingType()&&(nhn.map.shape.Circle=t)}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportSVG()){var t=function(t){this.vertexes=new nhn.mapcore.Vertexes,nhn.map.shape.ShapeSVG.call(this,t),this._shapeElement.setAttribute("stroke-linejoin","round"),this.bound={}};t.prototype=new nhn.map.shape.ShapeSVG,t.prototype=nhn.map.shape.DrawingUtil.extend(t.prototype,nhn.map.shape.CommonShape.closedPath),t.prototype.constructor=t,t.prototype.setPath=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{d:t}),this._updateShape(),this._setBounds()},t.prototype.addPath=function(t){if(this.options=nhn.map.shape.DrawingUtil.extend(this.options,{d:t}),"M0 0 Z"!==this._shapeElement.getAttribute("d")){var e=this._shapeElement.cloneNode();this.getElement().appendChild(e),this._shapeElement=e}this._updateShape(),(!this.bound.minX||this.vertexes.bound.minX<this.bound.minX)&&(this.bound.minX=this.vertexes.bound.minX),(!this.bound.minY||this.vertexes.bound.minY<this.bound.minY)&&(this.bound.minY=this.vertexes.bound.minY),(!this.bound.maxX||this.vertexes.bound.maxX>this.bound.maxX)&&(this.bound.maxX=this.vertexes.bound.maxX),(!this.bound.maxY||this.vertexes.bound.maxY>this.bound.maxY)&&(this.bound.maxY=this.vertexes.bound.maxY)},t.prototype._updateShape=function(){this.vertexes.set(this.options.d);var t=this.vertexes.toPathString();t||(t="M0 0"),this._shapeElement.setAttribute("d",t+" Z")},t.prototype._calcBoundsFromOptions=function(){var t=this.vertexes.bound,e=t.minX,n=t.minY,i=t.maxX-t.minX,o=t.maxY-t.minY,a=this.options["stroke-width"];return this._calcBounds(e,n,i,o,a)},t.prototype.setMultiBounds=function(){var t=this.bound.minX,e=this.bound.minY,n=this.bound.maxX-this.bound.minX,i=this.bound.maxY-this.bound.minY,o=this.options["stroke-width"],a=this._calcBounds(t,e,n,i,o),s=this.getElement();s.style.left=a.x+"px",s.style.top=a.y+"px",s.style.width=a.w+"px",s.style.height=a.h+"px",s.setAttribute("width",a.w+"px"),s.setAttribute("height",a.h+"px"),s.setAttribute("viewBox",""+a.x+" "+a.y+" "+a.w+" "+a.h)},nhn.map.shape.ClosedPathSVG=t,"SVG"===nhn.map.shape.DrawingUtil.getDrawingType()&&(nhn.map.shape.ClosedPath=t)}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportSVG()){var t=function(t){this.vertexes=new nhn.mapcore.Vertexes,t&&t.fill&&(t.fill="none"),nhn.map.shape.ShapeSVG.call(this,t),this._shapeElement.setAttribute("stroke-linejoin","round")};t.prototype=new nhn.map.shape.ShapeSVG,t.prototype=nhn.map.shape.DrawingUtil.extend(t.prototype,nhn.map.shape.CommonShape.path),t.prototype.constructor=t,t.prototype.setPath=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{d:t}),this._updateShape(),this._setBounds()},t.prototype.setOptions=function(t){t.fill&&(t.fill="none"),nhn.map.shape.ShapeSVG.prototype.setOptions.call(this,t)},t.prototype._updateShape=function(){this.vertexes.set(this.options.d);var t=this.vertexes.toPathString();t||(t="M0 0"),this._shapeElement.setAttribute("d",t)},t.prototype._calcBoundsFromOptions=function(){var t=this.vertexes.bound,e=t.minX,n=t.minY,i=t.maxX-t.minX,o=t.maxY-t.minY,a=this.options["stroke-width"];return this._calcBounds(e,n,i,o,a)},nhn.map.shape.PathSVG=t,"SVG"===nhn.map.shape.DrawingUtil.getDrawingType()&&(nhn.map.shape.Path=t)}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportSVG()){var t=function(t){nhn.map.shape.ShapeSVG.call(this,t)};t.prototype=new nhn.map.shape.ShapeSVG,t.prototype=nhn.map.shape.DrawingUtil.extend(t.prototype,nhn.map.shape.CommonShape.rectangle),t.prototype.constructor=t,t.prototype.setBounds=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,t),this._updateShape(),this._setBounds()},t.prototype._updateShape=function(){var t=this.options.x,e=this.options.y,n=this.options.width,i=this.options.height;this._shapeElement.setAttribute("d",["M",t,e,"L",t+n,e,t+n,e+i,t,e+i,"Z"].join(" "))},t.prototype._calcBoundsFromOptions=function(){var t=this.options.x,e=this.options.y,n=this.options.width,i=this.options.height,o=this.options["stroke-width"];return this._calcBounds(t,e,n,i,o)},nhn.map.shape.RectangleSVG=t,"SVG"===nhn.map.shape.DrawingUtil.getDrawingType()&&(nhn.map.shape.Rectangle=t)}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportCanvas()){var t=function(t){nhn.map.shape.Shape.call(this,t)};t.prototype=new nhn.map.shape.Shape,t.prototype._initShape=function(){var t=this._calcBoundsFromOptions(),e=document.createElement("canvas");return e.setAttribute("width",t.w+"px"),e.setAttribute("height",t.h+"px"),e.setAttribute("style","position:absolute;overflow:visible;margin:0;padding:0;border:0;width:"+t.w+"px; height:"+t.h+"px;"),this.context=e.getContext("2d"),e},t.prototype.setOptions=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,t),this._updateShape()},t.prototype._updateShape=function(){nhn.map.shape.DrawingUtil.isEmptyObject(this.options)||(this.context.clearRect(0,0,parseInt(this.element.width,10),parseInt(this.element.height,10)),this._setBounds(),this.context.beginPath(),"none"!=this.options.fill&&(this.context.fillStyle=this.options.fill,this.context.globalAlpha=this.options["fill-opacity"],this._drawEachShape(this.context),this.context.fill(),this.context.globalAlpha=1),"none"!=this.options.stroke&&(this.context.strokeStyle=this.options.stroke,this.context.lineWidth=this.options["stroke-width"],this.context.globalAlpha=this.options["stroke-opacity"],this._drawEachShape(this.context),this.context.stroke(),this.context.globalAlpha=1),this.context.closePath())},t.prototype._updateStyle=nhn.map.shape.DrawingUtil.noop,t.prototype._drawEachShape=function(){},t.prototype._setBounds=function(){var t=this.getElement(),e=this._calcBoundsFromOptions();t.style.left=e.x+"px",t.style.top=e.y+"px",t.style.width=e.w+"px",t.style.height=e.h+"px",t.setAttribute("width",e.w+"px"),t.setAttribute("height",e.h+"px")},t.prototype._calcBoundsFromOptions=function(){return this._calcBounds(0,0,0,0,0)},t.prototype.clear=function(){this.element=null,this.options=null},nhn.map.shape.ShapeCanvas=t}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportCanvas()){var t=function(t){nhn.map.shape.ShapeCanvas.call(this,t)};t.prototype=new nhn.map.shape.ShapeCanvas,t.prototype=nhn.map.shape.DrawingUtil.extend(t.prototype,nhn.map.shape.CommonShape.circle),t.prototype.constructor=t,t.prototype.START_ANGLE=0,t.prototype.END_ANGLE=2*Math.PI,t.prototype.ANTICLOCKWISE_VALUE=!1,t.prototype.setCenter=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{cx:t.x,cy:t.y}),this._updateShape()},t.prototype.setRadius=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{r:t}),this._updateShape()},t.prototype._drawEachShape=function(t){var e=this.options.r,n=this.options.cx,i=this.options.cy,o=parseInt(this.element.style.left,10),a=parseInt(this.element.style.top,10);t.arc(n-o,i-a,e,this.START_ANGLE,this.END_ANGLE,this.ANTICLOCKWISE_VALUE)},t.prototype._calcBoundsFromOptions=function(){var t=this.options.cx-this.options.r,e=this.options.cy-this.options.r,n=2*this.options.r,i=n,o=this.options["stroke-width"];return this._calcBounds(t,e,n,i,o)},nhn.map.shape.CircleCanvas=t,"CANVAS"===nhn.map.shape.DrawingUtil.getDrawingType()&&(nhn.map.shape.Circle=t)}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportCanvas()){var t=function(t){nhn.map.shape.ShapeCanvas.call(this,t)};t.prototype=new nhn.map.shape.ShapeCanvas,t.prototype=nhn.map.shape.DrawingUtil.extend(t.prototype,nhn.map.shape.CommonShape.rectangle),t.prototype.constructor=t,t.prototype.setBounds=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,t),this._updateShape()},t.prototype._drawEachShape=function(t){var e=this.options.x,n=this.options.y,i=this.options.width,o=this.options.height,a=parseInt(this.element.style.left,10),s=parseInt(this.element.style.top,10);t.rect(e-a,n-s,i,o)},t.prototype._calcBoundsFromOptions=function(){var t=this.options.x,e=this.options.y,n=this.options.width,i=this.options.height,o=this.options["stroke-width"];return this._calcBounds(t,e,n,i,o)},nhn.map.shape.RectangleCanvas=t,"CANVAS"===nhn.map.shape.DrawingUtil.getDrawingType()&&(nhn.map.shape.Rectangle=t)}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportCanvas()){var t=function(t){this.vertexes=new nhn.mapcore.Vertexes,t&&t.fill&&(t.fill="none"),nhn.map.shape.ShapeCanvas.call(this,t)};t.prototype=new nhn.map.shape.ShapeCanvas,t.prototype=nhn.map.shape.DrawingUtil.extend(t.prototype,nhn.map.shape.CommonShape.path),t.prototype.constructor=t,t.prototype.setOptions=function(t){t.fill&&(t.fill="none"),nhn.map.shape.ShapeCanvas.prototype.setOptions.call(this,t)},t.prototype.setPath=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{d:t}),this._updateShape()},t.prototype._updateShape=function(){this.vertexes.set(this.options.d),nhn.map.shape.ShapeCanvas.prototype._updateShape.call(this)},t.prototype._drawEachShape=function(t){var e=parseInt(this.element.style.left,10),n=parseInt(this.element.style.top,10);t.lineJoin="round";for(var i,o,a=this.vertexes.count(),s=0;s<a;s++)i=this.vertexes.get(s),o=0===s?"moveTo":"lineTo",t[o](i[0]-e,i[1]-n)},t.prototype._calcBoundsFromOptions=function(){var t=this.vertexes.bound,e=t.minX,n=t.minY,i=t.maxX-t.minX,o=t.maxY-t.minY,a=this.options["stroke-width"];return this._calcBounds(e,n,i,o,a)},nhn.map.shape.PathCanvas=t,"CANVAS"===nhn.map.shape.DrawingUtil.getDrawingType()&&(nhn.map.shape.Path=t)}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportCanvas()){var t=function(t){this.vertexes=new nhn.mapcore.Vertexes,nhn.map.shape.ShapeCanvas.call(this,t)};t.prototype=new nhn.map.shape.ShapeCanvas,t.prototype=nhn.map.shape.DrawingUtil.extend(t.prototype,nhn.map.shape.CommonShape.closedPath),t.prototype.constructor=t,t.prototype.setPath=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{d:t}),this._updateShape()},t.prototype._updateShape=function(){this.vertexes.set(this.options.d),nhn.map.shape.ShapeCanvas.prototype._updateShape.call(this)},t.prototype._drawEachShape=function(t){var e=parseInt(this.element.style.left,10),n=parseInt(this.element.style.top,10);t.lineJoin="round";for(var i,o,a=this.vertexes.count(),s=a-1,r=0;r<a;r++)i=this.vertexes.get(r),o=0===r?"moveTo":"lineTo",t[o](i[0]-e,i[1]-n),r===s&&(i=this.vertexes.get(0),t.lineTo(i[0]-e,i[1]-n))},t.prototype._calcBoundsFromOptions=function(){var t=this.vertexes.bound,e=t.minX,n=t.minY,i=t.maxX-t.minX,o=t.maxY-t.minY,a=this.options["stroke-width"];return this._calcBounds(e,n,i,o,a)},nhn.map.shape.ClosedPathCanvas=t,"CANVAS"===nhn.map.shape.DrawingUtil.getDrawingType()&&(nhn.map.shape.ClosedPath=t)}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportVML()){try{document.namespaces.add("v","urn:schemas-microsoft-com:vml");var t=document.createElement("style"),e=document.getElementsByTagName("head")[0];e.insertBefore(t,e.firstChild.firstChild);var n=t.styleSheet;n.addRule("v\\:shape","behavior: url(#default#VML);"),n.addRule("v\\:path","behavior: url(#default#VML);"),n.addRule("v\\:fill","behavior: url(#default#VML);"),n.addRule("v\\:stroke","behavior: url(#default#VML);")}catch(i){}var o=function(t){nhn.map.shape.Shape.call(this,t),this._updateShape()};o.prototype=new nhn.map.shape.Shape,o.prototype._initShape=function(){this._shapeElement=document.createElement("v:shape"),this._shapeElement.style.cssText="position:absolute;width:1px;height:1px;margin:0;padding:0;border:0;",this._shapeElement.setAttribute("coordorigin","0 0"),this._shapeElement.setAttribute("coordsize","1 1"),this._pathElement=document.createElement("v:path"),this._shapeElement.appendChild(this._pathElement),this._fillElement=document.createElement("v:fill"),this._fillElement.setAttribute("on",!1),this._shapeElement.appendChild(this._fillElement),this._strokeElement=document.createElement("v:stroke"),this._strokeElement.setAttribute("on",!1),this._shapeElement.appendChild(this._strokeElement);var t=document.createElement("div");return t.appendChild(this._shapeElement),t.setAttribute("style","position:absolute;overflow:visible;margin:0;padding:0;border:0;top:0;left:0;"),t},o.prototype.setOptions=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,t),this._updateStyle(),this._updateShape()},o.prototype._updateShape=function(){},o.prototype._updateStyle=function(){if(!nhn.map.shape.DrawingUtil.isEmptyObject(this.options))for(var t=this.element.childNodes,e=0,n=t.length;e<n;++e){var i=t[e].getElementsByTagName("stroke")[0],o=t[e].getElementsByTagName("fill")[0];"none"==this.options.stroke?i.on=!1:(i.on=!0,i.color=this.options.stroke,
i.weight=this.options["stroke-width"]+"px",i.opacity=this.options["stroke-opacity"],this.options["stroke-style"]&&(i.dashstyle=this.options["stroke-style"])),"none"==this.options.fill?o.on=!1:(o.on=!0,o.color=this.options.fill,o.opacity=this.options["fill-opacity"])}},o.prototype.clear=function(){this._shapeElement.removeChild(this._pathElement),this._shapeElement.removeChild(this._fillElement),this._shapeElement.removeChild(this._strokeElement),this.element.removeChild(this._shapeElement),this.element=this._shapeElement=this._pathElement=this._fillElement=this._strokeElement=null,this.options=null},nhn.map.shape.ShapeVML=o}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportVML()){var t=function(t){nhn.map.shape.ShapeVML.call(this,t)};t.prototype=new nhn.map.shape.ShapeVML,t.prototype=nhn.map.shape.DrawingUtil.extend(t.prototype,nhn.map.shape.CommonShape.circle),t.prototype.constructor=t,t.prototype.setCenter=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{cx:t.x,cy:t.y}),this._updateStyle(),this._updateShape()},t.prototype.setRadius=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{r:t}),this._updateStyle(),this._updateShape()},t.prototype._updateShape=function(){var t=this.options.r,e=2*t,n=this.options.cx-t,i=this.options.cy-t;this._pathElement.v=["AR",n,i,n+e,i+e,"0 0 0 0 X E"].join(" ")},nhn.map.shape.CircleVML=t,"VML"===nhn.map.shape.DrawingUtil.getDrawingType()&&(nhn.map.shape.Circle=t)}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportVML()){var t=function(t){nhn.map.shape.ShapeVML.call(this,t)};t.prototype=new nhn.map.shape.ShapeVML,t.prototype=nhn.map.shape.DrawingUtil.extend(t.prototype,nhn.map.shape.CommonShape.rectangle),t.prototype.constructor=t,t.prototype.setBounds=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,t),this._updateShape()},t.prototype._updateShape=function(){var t=this.options.x,e=this.options.y,n=this.options.width,i=this.options.height;this._pathElement.v=["M",t,e,"L",t+n,e,t+n,e+i,t,e+i,"X E"].join(" ")},nhn.map.shape.RectangleVML=t,"VML"===nhn.map.shape.DrawingUtil.getDrawingType()&&(nhn.map.shape.Rectangle=t)}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportVML()){var t=function(t){this.vertexes=new nhn.mapcore.Vertexes,t&&t.fill&&(t.fill="none"),nhn.map.shape.ShapeVML.call(this,t)};t.prototype=new nhn.map.shape.ShapeVML,t.prototype=nhn.map.shape.DrawingUtil.extend(t.prototype,nhn.map.shape.CommonShape.path),t.prototype.constructor=t,t.prototype.setPath=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{d:t}),this._updateShape()},t.prototype.setOptions=function(t){t.fill&&(t.fill="none"),nhn.map.shape.ShapeVML.prototype.setOptions.call(this,t)},t.prototype._updateShape=function(){this.vertexes.set(this.options.d),this._shapeElement.style.display="none",this._pathElement.v=this.vertexes.toPathString()+" E",this._shapeElement.style.display=""},nhn.map.shape.PathVML=t,"VML"===nhn.map.shape.DrawingUtil.getDrawingType()&&(nhn.map.shape.Path=t)}}(),function(){if(nhn.map.shape.DrawingUtil.isSupportVML()){var t=function(t){this.vertexes=new nhn.mapcore.Vertexes,nhn.map.shape.ShapeVML.call(this,t)};t.prototype=new nhn.map.shape.ShapeVML,t.prototype=nhn.map.shape.DrawingUtil.extend(t.prototype,nhn.map.shape.CommonShape.closedPath),t.prototype.constructor=t,t.prototype.setPath=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{d:t}),this._updateShape()},t.prototype.addPath=function(t){this.options=nhn.map.shape.DrawingUtil.extend(this.options,{d:t}),this._shapeElement=document.createElement("v:shape"),this._shapeElement.style.cssText="position:absolute;width:1px;height:1px;margin:0;padding:0;border:0;",this._shapeElement.setAttribute("coordorigin","0 0"),this._shapeElement.setAttribute("coordsize","1 1"),this._pathElement=document.createElement("v:path"),this._shapeElement.appendChild(this._pathElement),this._fillElement=document.createElement("v:fill"),this._fillElement.setAttribute("on",!1),this._shapeElement.appendChild(this._fillElement),this._strokeElement=document.createElement("v:stroke"),this._strokeElement.setAttribute("on",!1),this._shapeElement.appendChild(this._strokeElement),this.getElement().appendChild(this._shapeElement),this._updateStyle(),this._updateShape()},t.prototype._updateShape=function(){this.vertexes.set(this.options.d),this._shapeElement.style.display="none",this._pathElement.v=this.vertexes.toPathString()+" X E",this._shapeElement.style.display=""},t.prototype.setMultiBounds=function(){var t=this.getElement();t.removeChild(t.firstChild)},nhn.map.shape.ClosedPathVML=t,"VML"===nhn.map.shape.DrawingUtil.getDrawingType()&&(nhn.map.shape.ClosedPath=t)}}(),nhn.mapcore.Polyline=jindo.$Class({matchedClass:"nmap_drawing_pane",pathType:"Path",_styleKeys:{strokeWidth:"stroke-width",strokeColor:"stroke",strokeOpacity:"stroke-opacity",strokeStyle:"stroke-style"},$init:function(t,e){this._oOptions=e||{},this.setPoints(t||[]),"Path"==this.pathType?this.path=new nhn.map.shape.Path:"ClosedPath"==this.pathType&&(this.path=new nhn.map.shape.ClosedPath),"SVG"==nhn.map.shape.DrawingUtil.getDrawingType()&&(this.wrap=jindo.$("<div>"),this.wrap.style.cssText="border:0; margin:0; padding:0",this.wrap.appendChild(this.path.getElement())),this.setStyle(e||{})},supports_canvas:function(){return!!document.createElement("canvas").getContext("2d")},setStyle:function(t,e){if(2==arguments.length){var n=this._styleKeys[t]||t,i={};return i[n]=e,void this.path.setOptions(i)}var o=t,a=arguments.callee,s=this;jindo.$H(o).forEach(function(t,e){a.call(s,e,t)})},getStyle:function(t){if(1==arguments.length){var e=this._styleKeys[t]||t;return this.path.options[e]}var n={},i=arguments.callee,o=this;return jindo.$H(this._styleKeys).forEach(function(t,e){n[e]=i.call(o,e)}),n},onadd:function(t){t&&(this.pane=t),this.setStyle(this.getStyle()),"Path"==this.pathType&&this.setStyle("fill","none"),nhn.api&&nhn.api.map&&nhn.api.map.Map._objectManager._registerMapObject(this),this.redraw()},onremove:function(){nhn.api&&nhn.api.map&&nhn.api.map.Map._objectManager._unregisterMapObject(this)},getElement:function(){return this.wrap?this.wrap:this.path.getElement()},_setInnerPoint:function(t){return this.innerPoints=t,this},setPoints:function(t){var e=[];if(t instanceof Array&&t[0]&&t[0]instanceof Array)for(var n=0,i;i=t[n];++n)e=e.concat(this._pushInnerPoints(i));else e=this._pushInnerPoints(t);this._setInnerPoint(e),this.redraw()},_pushInnerPoints:function(t){for(var e=[],n=0,i;i=t[n];n++){if("function"==typeof i.toInner){var o=i.toInner();i={x:o.x,y:o.y},0===n&&(i.start=!0)}e.push(i)}return e},getPoints:function(){for(var t=[],e=this.innerPoints,n="undefined"!=typeof fpOpenAPIDefaultConv?fpOpenAPIDefaultConv:function(t){return t},i=0,o;o=e[i];i++){var a=n(new nhn.mapcore.Inner(o.x,o.y));a.start=o.start,t.push(a)}return t},redraw:function(t){if(this.pane){var t=t||this.innerPoints,e="Path"==this.pathType?this.pane.trimPath(t,this._oOptions.clipTightly):t;t.visiblePath=e;for(var n,i,o=[],a=0,s;s=e[a];a++){n=this.pane.fromPointToOffset(s);var r=0!=a&&s.start,h=[n.x,n.y];r&&("Path"===this.pathType?o.push("M"):o.push("Z M"),o.push(h),o.push("L")),o.push(h),i=n}this.path.setPath(o)}},getLength:function(){for(var t=this.getPoints(),e=0,n=1,i=t.length;n<i+("ClosedPath"==this.pathType?1:0);n++){var o=t[(n-1)%i],a=t[n%i];e+=o.getDistanceFrom(a)}return e},destroy:function(){this.path.clear()}}),nhn.mapcore.Polygon=jindo.$Class(nhn.mapcore.Util.extend({pathType:"ClosedPath",_styleKeys:{strokeWidth:"stroke-width",strokeColor:"stroke",strokeOpacity:"stroke-opacity",strokeStyle:"stroke-style",fillColor:"fill",fillOpacity:"fill-opacity"},getSize:function(){var t=new Array,e=new Array,n,i=2,o,a=this.getPoints();if(n=parseInt(a.length),n>20)return void alert("Polygon\uc758 \uaf2d\uc9c0\uc810\uc774 20\uac1c \ubbf8\ub9cc\uc778 \uacbd\uc6b0\ub9cc \uba74\uc801 \uacc4\uc0b0\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.");for(k=0;k<n;k++)t[k]=parseFloat(a[k].toInner().x/10),e[k]=parseFloat(a[k].toInner().y/10);for(t[n]=a[0].toInner().x/10,e[n]=a[0].toInner().y/10,o=0,k=0;k<n;k++)xDiff=t[k+1]-t[k],yDiff=e[k+1]-e[k],o=o+t[k]*yDiff-e[k]*xDiff;return o=.5*Math.abs(o),o.toFixed(i)}},nhn.mapcore.Polyline.prototype)),nhn.mapcore.MultiPolygon=jindo.$Class(nhn.mapcore.Util.extend({$init:function(t,e){this._oOptions=e||{},this.setMultiPoints(t||[]),"Path"==this.pathType?this.path=new nhn.map.shape.Path:"ClosedPath"==this.pathType&&(this.path=new nhn.map.shape.ClosedPath),"SVG"==nhn.map.shape.DrawingUtil.getDrawingType()&&(this.wrap=jindo.$("<div>"),this.wrap.style.cssText="border:0; margin:0; padding:0",this.wrap.appendChild(this.path.getElement())),this.setStyle(e||{})},setMultiPoints:function(t){for(var e=[],n=0,i=t.length;n<i;++n)this.setPoints(t[n]),e.push(this.innerPoints);this._setInnerPoint(e),this.redraw()},getMultiPoints:function(){return this.getPoints()},redraw:function(){if(this.pane){this.path.bound={};var t=this.innerPoints;t.visiblePath=t;for(var e=this.path.element,n=e.firstChild;e.firstChild;)e.removeChild(e.firstChild);n.setAttribute("d","M0 0 Z"),e.appendChild(n),this.path._shapeElement=n;for(var i=0,o;o=t[i];++i){for(var a,s,r=[],h=0,l;l=o[h];h++){a=this.pane.fromPointToOffset(l);var p=0!=h&&l.start,c=[a.x,a.y];p&&(r.push("Z M"),r.push(c),r.push("L")),r.push(c),s=a}this.path.addPath(r)}this.path.setMultiBounds()}},getPoints:function(){for(var t=[],e="undefined"!=typeof fpOpenAPIDefaultConv?fpOpenAPIDefaultConv:function(t){return t},n=0,i=this.innerPoints.length;n<i;++n){t[n]=[];for(var o=0,a=this.innerPoints[n].length;o<a;++o)t[n][o]=e(new nhn.mapcore.Inner(this.innerPoints[n][o].x,this.innerPoints[n][o].y)),t[n][o].start=this.innerPoints[n][o].start}return t}},nhn.mapcore.Polygon.prototype)),nhn.mapcore.ControlManager=jindo.$Class({name:"nhn.mapcore.ControlManager",$init:function(t){this.dontUseCorner=t||!1,this.oCorner={},this.aControlTypes=new Array,this.$AFTER_MSG_APP_READY=this.update,this.$AFTER_SET_MAP_SIZE=this.update},$BEFORE_MSG_APP_READY:function(){if(this.elStaticContainer=this.oApp.getStaticContainer(),0==this.dontUseCorner){var t=jindo.$$.getSingle("._nmap_corner",this.elStaticContainer);if(!t){var e=['<div class="_nmap_corner">','<div class="corner corner_top"></div>','<div class="corner corner_bottom"></div>','<div class="corner corner_left"></div>','<div class="corner corner_right"></div>',"</div>"].join("");t=jindo.$(e),this.elStaticContainer.appendChild(t)}this.oCorner=this.getCorner(t)}this.update()},getCorner:function(t){var e=function(e){return jindo.$Element(jindo.$$.getSingle(e,t))};return{MARGIN:10,top:e("> .corner_top"),bottom:e("> .corner_bottom"),left:e("> .corner_left"),right:e("> .corner_right"),update:function(t){this.left.css({width:this.MARGIN+"px",height:t.height+"px",top:"0",left:"0",display:"block"}),this.right.css({width:this.MARGIN+"px",height:t.height+"px",top:"0",right:"0",display:"block"}),this.top.css({width:"100%",height:this.MARGIN+"px",top:"0",left:"0",display:"block"}),this.bottom.css({width:"100%",height:this.MARGIN+"px",top:t.height-this.MARGIN+"px",left:"0",display:"block"})}}},$ON_ADD_CONTROL:function(t,e){this.add(t,e)},add:function(t,e){e||(e=t.getPosition?t.getPosition():"top"),this.oCorner[e]&&0==this.dontUseCorner?this.oCorner[e].append(t.getElement(this.elStaticContainer)):this.elStaticContainer.appendChild(t.getElement(this.elStaticContainer)),this.aControlTypes.push([t,e])},$ON_REMOVE_CONTROL:function(t){this.remove(t)},remove:function(t){for(var e=-1,n=0;n<this.aControlTypes.length;n++)if(this.aControlTypes[n][0]==t){e=n;break}if(e>-1){var i=this.aControlTypes[e][1];0==this.dontUseCorner?this.oCorner[i].remove(t.getElement(this.elStaticContainer)):this.elStaticContainer.removeChild(t.getElement(this.elStaticContainer)),this.aControlTypes.splice(e,1)}},update:function(){if(this.oMapSize=this.oApp.getMapSize(),this.oCorner.left&&this.oMapSize){this.oCorner.update(this.oMapSize);for(var t=0;t<this.aControlTypes.length;t++)this.aControlTypes[t][0].update&&this.aControlTypes[t][0].update()}}}),nhn.mapcore.CenterMark=jindo.$Class({name:"CenterMark",tpl:'<div class="nmap_int_zoom" style="display:none"><span class="nmap_bx_lt"></span><span class="nmap_bx_rt"></span><span class="nmap_bx_lb"></span><span class="nmap_bx_rb"></span></div>',$init:function(){this.trans=new nhn.Transition({effect:nhn.Effect.linear})},$BEFORE_MSG_APP_READY:function(){var t=this.oApp.getPaneElement("nmap_overlay_pane"),e=jindo.$$.getSingle(".nmap_int_zoom",t);e?(this.welMark=jindo.$Element(e),this._initializeCenterMark()):this._appendTemplate(this.tpl)},_appendTemplate:function(t){var e=this.oApp.getPaneElement("nmap_overlay_pane");this.welMark=jindo.$Element(t),this._initializeCenterMark(),e.appendChild(this.welMark.$value())},_initializeCenterMark:function(){this.welMark.hide()},$ON_SHOW_CENTERMARK:function(t,e){if(this.welMark){var n=this.welMark,i=t>1;i?(nhn.mapcore.Util.mapRemoveClass(this.welMark.$value(),"nmap_int_zoomout"),nhn.mapcore.Util.mapSetClass(this.welMark.$value(),"nmap_int_zoomin")):(nhn.mapcore.Util.mapRemoveClass(this.welMark.$value(),"nmap_int_zoomin"),nhn.mapcore.Util.mapSetClass(this.welMark.$value(),"nmap_int_zoomout"));var o=this.oApp.getPointToOffset(e);n.css({left:o.x+"px",top:o.y+"px"});var a=i?33:66,s=i?66:33;1==t&&(a=s=33),this.trans.fps(1==t?1:10),this.trans.start(function(){n.css("display","block")}).precede(500,n.$value(),{"@width":[a+"px",s+"px"],"@height":[a+"px",s+"px"],"@marginLeft":[-(a/2)+"px",-(s/2)+"px"],"@marginTop":[-(a/2)+"px",-(s/2)+"px"]}).precede(function(){n.css("display","none")})}}}),nhn.mapcore.PaneManager=jindo.$Class({_nDummyIndex:0,THRESHOLD_LEVEL:10,THRESHOLD_PIXEL:10,$init:function(){this._oPanes={},this._oTimer=new nhn.Timer,this._initBuffer=[]},$BEFORE_MSG_APP_READY:function(){var t=this;this.oApp.exec("ADD_APP_PROPERTY",["getPane",nhn.mapcore.Util.bind(this,this.getPane)]),this.oApp.exec("ADD_APP_PROPERTY",["getPaneElement",nhn.mapcore.Util.bind(this,function(t){return this.getPane(t).getElement()})]),this.oApp.exec("ADD_APP_PROPERTY",["getInfoPane",nhn.mapcore.Util.bind(this,function(){return this.getPane("nmap_info_pane").getElement()})]),this.oApp.exec("ADD_APP_PROPERTY",["getInfoPaneBubbler",nhn.mapcore.Util.bind(this,function(){return this.getPane("nmap_info_pane").getBubbler()})]),this.oApp.exec("ADD_APP_PROPERTY",["getOverlayPane",nhn.mapcore.Util.bind(this,function(){return this.getPane("nmap_overlay_pane").getElement()})]),this.oApp.exec("ADD_APP_PROPERTY",["getOverlayablePaneLists",nhn.mapcore.Util.bind(this,this.getOverlayablePaneLists)]),this.oApp.exec("ADD_APP_PROPERTY",["trimPath",nhn.mapcore.Util.bind(this,this.trimPath)]),jindo.$A(this._initBuffer).forEach(function(e){t._initPane(e)}),this._initBuffer=null},$ON_ZOOM_MAP_START_DONE:function(){this._onZoomStart()},_onZoomStart:function(){this._oTimer.abort(),jindo.$H(this._oPanes).forEach(function(t,e){if("addOverlay"in t){var n=t.getElement();n&&(nhn.mapcore.Util.mapSetClass(n,"nmap_invisible_pane"),n.style.position="relative",n.style.zoom="1",setTimeout(function(){n.style.zoom="",n.style.position="absolute"},0))}})},$ON_END_ZOOM_EFFECT_DONE:function(){this._onZoomEnd()},$ON_REDRAW:function(){!this.oApp.isZooming()&&this.oApp.isZoomingDone()&&this._onZoomEnd()},_onZoomEnd:function(){var t=nhn.mapcore.browser.ie&&8==document.documentMode;t||this.redraw();var e=this,n=jindo.$Fn(function(){jindo.$H(this._oPanes).forEach(function(t,e){if("addOverlay"in t){var n=t.getElement();n&&(nhn.mapcore.Util.mapRemoveClass(n,"nmap_invisible_pane"),n.style.zoom=1,setTimeout(function(){n.style.zoom=""},0))}}),t&&this.redraw()},this).bind();n()},getPane:function(t){return this._oPanes[t]||null},getOverlayablePaneLists:function(){return this._oPanes},_initPane:function(oPane){var sClassName=oPane.className,nZIndex=oPane.zIndex,elMarkupPane=jindo.$$.getSingle("."+sClassName,this.oApp.getMovableContainer()),elPane=oPane.getElement();with(elMarkupPane&&(elPane=oPane.elPane=elMarkupPane),elPane.style.zIndex=nZIndex,elPane.style)position="absolute",overflow="visible",left=0,top=0,padding=0,margin=0,border=0;this.oApp.exec("ADD_TO_MOVABLE_CONTAINER",[elPane])},_hasPaneInterface:function(t){return t.redraw&&t.destroy&&t.getElement},addPane:function(t){if(!this._hasPaneInterface(t))throw new Error("Pane which appended to map has insufficient Pane interface.");var e=t.className||"PANE"+ ++this._nDummyIndex;this._oPanes[e]=t,this._initBuffer?this._initBuffer.push(t):this._initPane(t),t.onadd&&t.onadd(this)},$ON_ADD_PANE:function(t){this.addPane(t)},removePane:function(t){var e=this;if(jindo.$H(this._oPanes).forEach(function(n,i){n===t&&(delete e._oPanes[i],jindo.$H.Break())}),this._initBuffer){var n=this._initBuffer.indexOf(t);n!=-1&&this._initBuffer.splice(n,1)}this.oApp.exec("REMOVE_FROM_MOVABLE_CONTAINER",[t.getElement()]),t.onremove&&t.onremove(this)},$ON_REMOVE_PANE:function(t){this.removePane(t)},redraw:function(){jindo.$H(this._oPanes).forEach(function(t,e){t.redraw()}),this.oApp.exec("REDRAW_DONE")},$ON_END_DRAG_DONE:function(){this._oPanes.nmap_drawing_pane.redraw(!0)},$ON_PAN_MAP_END_DONE:function(){this._oPanes.nmap_drawing_pane.redraw(!0)},$ON_ADD_MASHUP:function(t){this.getPane("mashup_pane").addOverlay(t)},$ON_REMOVE_MASHUP:function(t){this.getPane("mashup_pane").removeOverlay(t)},$ON_REMOVE_ALL_MASHUP:function(){this.getPane("mashup_pane").clearOverlay()},$ON_ADD_NINFOWINDOW:function(t){this.getPane("nmap_info_pane").addOverlay(t)},$ON_REMOVE_NINFOWINDOW:function(t){this.getPane("nmap_info_pane").removeOverlay(t)},$ON_REMOVE_ALL_NINFOWINDOW:function(){this.getPane("nmap_info_pane").clearOverlay()},$ON_ADD_DRAWING:function(t){this.getPane("nmap_drawing_pane").addOverlay(t)},$ON_REMOVE_DRAWING:function(t){this.getPane("nmap_drawing_pane").removeOverlay(t)},$ON_REMOVE_ALL_DRAWING:function(t){this.getPane("nmap_drawing_pane").clearOverlay(t)},$ON_ADD_OVERLAY:function(t){this.getPane("nmap_overlay_pane").addOverlay(t)},$ON_REMOVE_OVERLAY:function(t){this.getPane("nmap_overlay_pane").removeOverlay(t)},$ON_REMOVE_ALL_OVERLAY:function(){this.getPane("nmap_overlay_pane").clearOverlay()},trimPath:function(t,e,n,i){if(t&&t.filtered)return t;var o="number"==typeof n?n:this.oApp.getZoomLevel(),a=i||this.oApp.getBoundPoint(),s=[],r=this.oApp.getCenterPoint(),h=nhn.mapcore.TransPoint.fromPixelUnitToPointUnit(1,o),l=Math.pow(h*this.THRESHOLD_PIXEL,2),p=null,c=(e?10:window.screen.availWidth)*h,u=(e?10:window.screen.availHeight)*h;a[0]-=c,a[2]+=c,a[1]+=u,a[3]-=u;var d=function(t,e){p&&p.x==t.x&&p.y==t.y||(e?t.start=!0:delete t.start,s.push(t),p=t)},f=d;o<this.THRESHOLD_LEVEL&&(f=function(t,e){(!p||Math.pow(p.x-t.x,2)+Math.pow(p.y-t.y,2)>=l)&&d(t,e)});for(var m=null,_=15,g=this.oApp.getBoundPoint(),v="CANVAS"===nhn.map.shape.DrawingUtil.getDrawingType(),y,E=function(t){var e=0;if(e|=t.x<a[0]?1:0,e|=a[2]<t.x?2:0,e|=t.y<a[3]?8:0,e|=a[1]<t.y?4:0,m){var n=!(e&_);n&&(v?(y=nhn.map.shape.LineAlgorithm.clipLine(m,t,g,nhn.mapcore.Inner),y&&(m=y[0],t=y[1],f(m,0!==_),f(t))):(f(m,0!==_),f(t)))}m=t,_=e},T=0,M=t.length,b;T<M;T++){if(b=t[T],m){var O=parseInt(m.x),S=parseInt(m.y),P=b.x-O,A=b.y-S,x=5e3*h,w=Math.max(Math.abs(P),Math.abs(A));if(w>x)for(var C=Math.ceil(w/x),$=0;$<C-1;$++){var L=$/C,j=Math.round(P*L+O),I=Math.round(A*L+S);E({x:j,y:I})}}E(b)}if(p=null,s.length>0&&!v){var D=t[0],N=t[t.length-1];a[0]<=D.x&&D.x<=a[2]&&a[3]<=D.y&&D.y<=a[1]&&(D.x!=s[0].x||D.y!=s[0].y)&&s.splice(0,0,D),D!=N&&a[0]<=N.x&&N.x<=a[2]&&a[3]<=N.y&&N.y<=a[1]&&(N.x!=s[s.length-1].x||N.y!=s[s.length-1].y)&&s.push(N)}return s.filtered=!0,s}}),nhn.mapcore.AbstractOverlayablePane=jindo.$Class({className:null,zIndex:null,_oParent:null,$init:function(t){this.aOverlays=[];var t=nhn.mapcore.Util.fillOptions(t,{zIndex:this.zIndex});this.elPane=jindo.$("<div>"),this.welPane=jindo.$Element(this.elPane),this.className?(this.elPane.className=this.className,"nmap_info_pane"!=this.className&&nhn.mapcore.Util.disableSelection(this.elPane)):nhn.mapcore.Util.disableSelection(this.elPane),t.zIndex&&this.setZIndex(t.zIndex)},setVisible:function(t){var e=this.getVisible(),t=!!t;this.welPane.visible(t),e!=t&&this.fireEvent&&this.fireEvent("changeVisible",{visible:t})},getVisible:function(){return this.welPane.visible()},setZIndex:function(t){this.zIndex=t,this.welPane.css("zIndex",t)},getZIndex:function(){return parseInt(this.welPane.css("zIndex"),10)||0},onadd:function(t){this._oParent=t,nhn.api&&nhn.api.map&&nhn.api.map.Map._objectManager._registerMapObject(this)},onremove:function(){nhn.api&&nhn.api.map&&nhn.api.map.Map._objectManager._unregisterMapObject(this)},fromPointToOffset:function(t){return this._oParent.oApp.getPointToOffset(t)},fromOffsetToPoint:function(t){return this._oParent.oApp.getOffsetToPoint(t)},trimPath:function(t,e,n,i){return this._oParent.oApp.trimPath(t,e,n,i)},addOverlay:function(t){if(!this._hasOverlayInterface(t))throw new Error("Overlay which appended to pane has insufficient Overlay interface.");this.aOverlays.push(t);var e=this.getElement(),n=t.getElement();if(n instanceof Array)for(var i=n,o=0;o<i.length;o++)e.appendChild(i[o]);else e.appendChild(n);t.onadd&&t.onadd(this)},_hasOverlayInterface:function(t){return t.redraw&&t.destroy&&t.getElement},_makeRangeVisible:function(t,e,n,i,o){var a=this._oParent.oApp,s=a.getPointToMapOffset(t.toInner());null==o||"undefined"==typeof o||isNaN(parseInt(o))?nMargin=10:nMargin=o;var r={left:e[0]||0,right:e[2]||0,top:e[1]||0,bottom:e[3]||0},h={left:n[0]||0,right:n[2]||0,top:n[1]||0,bottom:n[3]||0},l=a.getBoundOffset();h.left-=l[0]||0,h.top-=l[1]||0,h.right+=l[2]||0,h.bottom+=l[3]||0;var p={left:Math.min(s.x,s.x+r.left)-nMargin+h.left,right:Math.max(s.x,s.x+r.right)+nMargin+h.right,top:Math.min(s.y,s.y+r.top)-nMargin+h.top,bottom:Math.max(s.y,s.y+r.bottom)+nMargin+h.bottom},c=a.getMapSize(),u={x:0,y:0};if(p.left<0?u.x=p.left:p.right>c.width&&(u.x=p.right-c.width),p.top<0?u.y=p.top:p.bottom>c.height&&(u.y=p.bottom-c.height),i)return u;if(u.x||u.y){var t=a.getCenterPoint().toInner().copy(),d=a.getZoomLevel(),f=48828125e-12*Math.pow(2,d)/2;t.x+=Math.round(u.x/f),t.y-=Math.round(u.y/f),a.exec("ZOOM",[null,t,{useEffect:!0}])}},makeRangeVisible:function(t,e,n,i,o){return this._makeRangeVisible.apply(this,arguments)},removeOverlay:function(t){var e=this.aOverlays.indexOf(t);if(e!=-1||!t.onremove){this.aOverlays.splice(e,1);var n=this.getElement(),i=t.getElement();if(i instanceof Array)for(var o=i,a=0;a<o.length;a++)n.removeChild(o[a]);else n.removeChild(i);t.onremove&&t.onremove(this)}},clearOverlay:function(t){for(var e=this.aOverlays,n=e.length,i=n-1;i>=0;i--){var o=e[i];t&&!t(o)||this.removeOverlay(o)}},redraw:function(){var t,e;for(t=0;t<this.aOverlays.length;t++)e=this.aOverlays[t],e.redraw.apply(e,arguments)},getElement:function(){return this.elPane},closeOverlays:function(){for(var t=this.aOverlays.concat(),e=0,n=t.length;e<n;e++){var i=t[e];i.options.multiple||i.close()}},destroy:function(){this.clearOverlay()}}),nhn.mapcore.DrawingPane=jindo.$Class({name:"nhn.mapcore.DrawingPane",className:"nmap_drawing_pane",zIndex:60,$init:function(){},redraw:function(t){var e,n;for(e=0;e<this.aOverlays.length;e++)n=this.aOverlays[e],(!t||n instanceof nhn.mapcore.Polyline)&&n.redraw()}}).extend(nhn.mapcore.AbstractOverlayablePane),nhn.mapcore.OverlayPane=jindo.$Class({name:"nhn.mapcore.OverlayPane",className:"nmap_overlay_pane",zIndex:70,$init:function(){}}).extend(nhn.mapcore.AbstractOverlayablePane),nhn.mapcore.InfoPane=jindo.$Class({name:"nhn.mapcore.InfoPane",className:"nmap_info_pane",zIndex:80,$init:function(){this.oBubbler=new nhn.mapcore.Util.Bubbler(this.elPane)},getBubbler:function(){return this.oBubbler},closeOverlays:function(){nhn.mapcore.AbstractOverlayablePane.prototype.closeOverlays.call(this),this._oParent.oApp.exec("CLOSE_INFOWINDOW")}}).extend(nhn.mapcore.AbstractOverlayablePane),nhn.mapcore.AbstractTilePane=jindo.$Class({name:null,className:null,zIndex:null,imgInfo:null,isActive:!1,isOpacityTile:nhn.mapcore.isSupportOpacity,$init:function(){if(!this.name||!this.className||!this.zIndex)throw new Error("AbstractTilePane \uc0dd\uc131 \uc2dc \uc815\uc758\ud574\uc57c \ud558\ub294 name, className, imgInfo, zIndex \uac12\uc774 \ube60\uc838 \uc788\uc2b5\ub2c8\ub2e4.");this.sUpperName=this.name.toUpperCase(),this.load=this.refresh=this.forceRefresh=this.rotate=this.unload=this.empty=nhn.mapcore.Util.emptyFunction,this._tileUrlRule&&(this._tileUrlRule=jindo.$Fn(this._tileUrlRule,this).bind()),this.enableHDTile(!0)},BLANK_URL:nhn.mapcore.mapSpec.STATIC_IMG+"/maps2/blank.gif",enableHDTile:function(t){if(!t)return void(this.imgInfo.url=this.imgInfo.url.replace("/hd","/get"));var e=Math.floor(window.devicePixelRatio||1);e>1&&(this.imgInfo.url=this.imgInfo.url.replace("/get","/hd"))},$BEFORE_MSG_APP_READY:function(){this.elPane=this.oApp.getMapPane(this.className,this.zIndex),this.elPane&&(this.load=this._load,this.refresh=this._refresh,this.forceRefresh=this._forceRefresh,this.rotate=this._rotate,this.unload=this._unload,this.empty=this._empty),this.isActive&&this.oApp.exec("LOAD_"+this.sUpperName+"_PANE")},$ON_ENABLE_HD_TILE:function(t){this.enableHDTile(t),this.redrawTiles()},$ON_SET_TILE_IMAGES_DONE:function(t){t==this.name&&this.isActive&&(this.elPane.style.display="block")},_load:function(t){this.oApp.exec("REGISTER_MAP_TYPE",[t]),1==nhn.mapcore.mapSpec.getMobileMap()?(this.isActive=!0,this.forceRefresh()):(this.forceRefresh(),this.isActive=!0)},_unload:function(t){this.elPane.style.display="none",this.oApp.exec("UNREGISTER_MAP_TYPE",[t]),this.isActive=!1},_forceRefresh:function(){this._fillTiles(),this.oApp.exec("SET_TILE_IMAGES",[this._tiles,this.imgInfo,this.isOpacityTile,this.name,this._tileUrlRule])},_fillTiles:function(){var t=this._tiles=this.elPane.getElementsByTagName("img"),e=this.oApp.getTileInfo(),n=this._tiles.length,i=e.length;if(n!=i){if(n>i)for(var o=0;o<n-i;o++){var a=t.length-1;this.elPane.removeChild(t[a])}if(n<i)for(var s={width:nhn.mapcore.mapSpec.tileSize,height:nhn.mapcore.mapSpec.tileSize,left:0,top:0,zIndex:0},r,o=0,a=i-n;o<a;o++)r=nhn.mapcore.Image.createImage(nhn.mapcore.mapSpec.dotTileUrl,s),r.setAttribute("alt",""),this.elPane.appendChild(r);return this.elPane.getElementsByTagName("img")}},_refresh:function(){this._tiles.length>=1&&this.oApp.exec("SET_TILE_IMAGES",[this._tiles,this.imgInfo,this.isOpacityTile,this.name,this._tileUrlRule])},_rotate:function(t){this._tiles.length>=1&&(t=t.toUpperCase(),this.oApp.exec("SET_ROTATE_TILE",[t,this._tiles,this.imgInfo,this.isOpacityTile,this._tileUrlRule]))},_empty:function(){for(var t=this.elPane.getElementsByTagName("img"),e=0;e<t.length;e++)t[e].src=this.BLANK_URL},unloadIfActive:function(){return this.oApp.exec("UNLOAD_"+this.sUpperName+"_PANE"),!1},_isRelatedTileInfoChange:function(t,e){var n=!t||!e,i=!new RegExp("^"+this.name+"$").test(t);return!(n||i)},$ON_ROTATE_TILE:function(t){this.isActive&&this.rotate(t)},$ON_DRAW_LEVEL_TILE:function(){this.isActive&&this.refresh()},$ON_REFRESH_TILE:function(){this.isActive&&this.forceRefresh()},$ON_ZOOM_MAP_START_DONE:function(){nhn.mapcore.Util.mapSetClass(this.elPane,"nmap_invisible_pane")},$ON_END_ZOOM_EFFECT_DONE:function(){nhn.mapcore.Util.mapRemoveClass(this.elPane,"nmap_invisible_pane")},$AFTER_REDRAW:function(){!this.oApp.isZooming()&&this.oApp.isZoomingDone()&&nhn.mapcore.Util.mapRemoveClass(this.elPane,"nmap_invisible_pane")},$ON_SET_TILEINFO:function(t,e){this._isRelatedTileInfoChange(t,e)&&(this.imgInfo.url=e.url||this.imgInfo.url,this.imgInfo.imageType=void 0!==typeof e.imageType?e.imageType:this.imgInfo.imageType,this.isActive&&this.forceRefresh())},_tileUrlRule:function(t,e,n){var i=this._disperseDomain(this.imgInfo.url,t,e,4),o=nhn.mapcore.mapSpec.getFolderName(t,e,n);return i+o+this.imgInfo.imageType},_disperseDomain:function(t,e,n,i){var o=(e+n)%i+1,a=this.imgInfo;return a.url.replace("http://"+a.name,"http://"+a.name+o)},_fixIE6TransparentTile:function(t){if(nhn.mapcore.isSupportOpacity&&t&&t.indexOf("mashup.map.naver.net")<0){var e=t.substr(t.indexOf("/",7)),n="http://mashup.map.naver.net/mashupmap/tile";t=n+e+"?depth=32"}return t}}),function(){var t=window.tileVersion||tileVersion||{},e=t.host||"onetile.map.naver.net",n=e.split(".")[0],i=!/(test|dev)/i.test(n),o=t.onetile||"142";nhn.mapcore.RealTileUrlRule=jindo.$Class({HOST:"http://onetile.map.naver.net/get",DOMAIN_VARIETY:4,_SSL:nhn.mapcore.mapSpec.SSL,_version:o,_rules:null,_timestamp:0,_servers:[],$init:function(){if(nhn.mapcore.mapSpec.SSL&&(i?this.HOST="https://simg.pstatic.net/onetile/get":this.HOST="https://test-ssl.map.naver.com/test.onetile/get"),this.enableHDTile(!0),this._rules=jindo.$A(),this._servers.length!=this.DOMAIN_VARIETY)for(var t=0;t<this.DOMAIN_VARIETY;)this._servers[t]=++t},enableHDTile:function(t){if(!t)return void(this.HOST=this.HOST.replace("/hd","/get"));var e=Math.floor(window.devicePixelRatio||1);e>1&&(this.HOST=this.HOST.replace("/get","/hd"))},setVersion:function(t){this._version=t,this.refresh()},setTimestamp:function(t){this._timestamp=t,this.refresh()},add:function(t){this._rules.has(t)||(this._rules.push(t),this.refresh())},remove:function(t){this._rules=this._rules.refuse(t),this.refresh()},refresh:function(){var t=this._isUseTimeStamp()?this._timestamp:"0",e=this._makeLayerStr(),n="0";this._isJpegFormat()?n="1":nhn.mapcore.isSupportOpacity&&(n="2"),this._preparedStr=[this.HOST,this._version,t,n,"#LEVEL#","#X#","#Y#",e].join("/")},_isUseTimeStamp:function(){return this._rules.some(function(t){return t.useTimestamp})},_isHideLabel:function(){return this._rules.some(function(t){return t.hideLabel})},_isJpegFormat:function(){return this._rules.every(function(t){return"jpeg"===t.format})},_makeLayerStr:function(){var t,e;this._rules.forEach(function(n){"base"==n.tileType&&(t=n.tileName),n.indoorInfo&&(e=n.indoorInfo)}),t=t||"empty";var n=this._rules.filter(function(t){return"overlay"==t.tileType}).$value().sort(function(t,e){return t.zIndex-e.zIndex});n=jindo.$A(n);var i=n.map(function(t){return t.tileName}).$value().join("/"),o=[t,i];return e&&o.push(e),o.join("/").replace(/\/$/,"")},getUrl:function(t,e,n){if(this.isEmpty())throw new Error("No VirtualTilePane registered.");var i;return i=this._SSL?"https://"+this._preparedStr.replace("#LEVEL#",n).replace("#X#",t).replace("#Y#",e).replace(/^https:\/\//,"").replace(/[\/]+/g,"/"):"http://"+this._preparedStr.replace("#LEVEL#",n).replace("#X#",t).replace("#Y#",e).replace(/^http:\/\//,"").replace(/[\/]+/g,"/"),i=nhn.mapcore.mapSpec.getTileUrl(t,e,n,"anonymous",function(){return i}),this._SSL||(i=this._servers.length>0?this._disperseDomain(i,t,e,this._servers.length):i.replace("http://onetile","http://nc.onetile")),i},_disperseDomain:function(t,e,n,i){var o=this._servers[(e+n)%i];return this._SSL?t:t.replace("http://onetile","http://onetile"+o)},isEmpty:function(){return 0==this._rules.length()},isDeferred:function(){return this._rules.some(function(t){return t.deferTileRequest})}}),"onetile.map.naver.net"!==e&&(nhn.mapcore.RealTileUrlRule.prototype.HOST="http://"+e+"/get")}(),nhn.mapcore.AbstractRealTilePane=jindo.$Class({_paneEl:null,_className:"",isTransparentTile:!1,_urlRule:null,$init:function(){this._getTileUrl=jindo.$Fn(this._getTileUrl,this).bind(),this._urlRule=new nhn.mapcore.RealTileUrlRule,this._ontileerror=jindo.$Fn(this._onTileError,this).bind()},$ON_MSG_PLUGIN_REGISTERED:function(t){t.belongingRealPaneName==this._name&&(t._realPane=this)},$BEFORE_MSG_APP_READY:function(){var t=this.oApp.getMapPane(this._className,this._zIndex);this._paneEl=jindo.$Element(t),this._tiles=this._paneEl.$value().getElementsByTagName("img")},$ON_ENABLE_HD_TILE:function(t){this._urlRule.enableHDTile(t),this.redrawTiles()},_fillTiles:function(){var t=this._paneEl.$value().getElementsByTagName("img"),e=this.oApp.getTileInfo(),n=this._tiles.length,i=e.length;if(n!=i)if(n>i)for(var o=0;o<n-i;o++){var a=t.length-1;this._paneEl.$value().removeChild(t[a])}else n<i&&this._createImages(i-n)},_createImages:function(t){for(var e={
width:"256px",height:"256px"},n=0;n<t;n++){var i=nhn.mapcore.TileImage.createImage(nhn.mapcore.mapSpec.STATIC_IMG+"/maps/dot.gif",e);i.width=256,i.height=256,this._paneEl.append(i)}this._tiles=this._paneEl.$value().getElementsByTagName("img")},load:function(t,e){this._urlRule.isEmpty()&&this._paneEl.show(),this._urlRule.add(t),e||this.oApp.exec("REGISTER_MAP_TYPE",[t.name]),this._fillTiles(),this.redrawTiles()},unload:function(t,e){this._urlRule.remove(t),e||this.oApp.exec("UNREGISTER_MAP_TYPE",[t.name]),this._urlRule.isEmpty()?(this._clearAllTiles(),this._paneEl.hide()):this.redrawTiles()},_clearAllTiles:function(){for(var t=0,e=this._tiles.length;t<e;t++)this._tiles[t].src=nhn.mapcore.mapSpec.dotTileUrl},redrawTiles:function(){var t=this;this._lastTimerId&&clearTimeout(this._lastTimerId),this._lastTimerId=setTimeout(function(){if(!t._urlRule.isEmpty()&&!t._urlRule.isDeferred()){var e=t.oApp.getTileInfo(),n=t.oApp.getConfigData(),i=n.tileOffset,o=n.tilePadding,a=nhn.mapcore.mapSpec.tileSize;t._urlRule.refresh();for(var s=0,r=t._tiles.length;s<r;s++){var h=t._tiles[s],l=e[s],p=t._toTileUrlParams(l),c=t._getTileUrl.apply(t,p);h.onerror=h.onload=null,h.onerror=t._ontileerror,nhn.mapcore.TileImage.changeSrc(h,c,t.isTransparentTile),t._placeTileToPosition(h,l)}t._lastTimerId=null}},20)},_placeTileToPosition:function(t,e){var n=this.oApp.getConfigData(),i=n.tileOffset,o=n.mapIndex,a=n.tilePadding,s=nhn.mapcore.mapSpec.tileSize;t.style.left=(e.xPos+i.x)*s-a.width+"px",t.style.top=(e.yPos-i.y)*s-a.height+"px",t.xCoord=n.mapIndex.x+e.xPos+i.x,t.yCoord=n.mapIndex.y-e.yPos+i.y},_toTileUrlParams:function(t){var e=this.oApp.getConfigData(),n=e.mapIndex.x+t.xPos+e.tileOffset.x,i=e.mapIndex.y-t.yPos+e.tileOffset.y,o=this.oApp.getZoomLevel();return[n,i,o]},_getTileUrl:function(t,e,n){var i=this._urlRule.getUrl(t,e,n);return i},$ON_ROTATE_TILE:function(t){if(!this._urlRule.isEmpty()){var e={url:"",name:this._name};this.oApp.exec("SET_ROTATE_TILE",[t,this._tiles,e,this.isTransparentTile,this._getTileUrl])}},$ON_REFRESH_TILE:function(){this._urlRule.isEmpty()||(this._fillTiles(),this.redrawTiles())},$ON_DRAW_LEVEL_TILE:function(){this._urlRule.isEmpty()||this.redrawTiles()},$ON_ZOOM_MAP_START_DONE:function(){nhn.mapcore.Util.mapSetClass(this._paneEl.$value(),"nmap_invisible_pane")},$ON_END_ZOOM_EFFECT_DONE:function(){nhn.mapcore.Util.mapRemoveClass(this._paneEl.$value(),"nmap_invisible_pane")},$AFTER_REDRAW:function(){!this.oApp.isZooming()&&this.oApp.isZoomingDone()&&nhn.mapcore.Util.mapRemoveClass(this._paneEl.$value(),"nmap_invisible_pane")},updateTileTimestamp:function(t){this._urlRule.setTimestamp(t)},_onTileError:function(t){var e;if(!t)var t=window.event;t.target?e=t.target:t.srcElement&&(e=t.srcElement);var n=e.src,i=n.split(".")[0].split("onetile")[1],o=this._urlRule._servers,a=o.indexOf(parseInt(i,10));if(a!=-1)if(o.splice(a,1),o.length>0)if(n.indexOf("get")!=-1){var s=n.split("get")[1].split("/")[5],r=n.split("get")[1].split("/")[6],h=o[(s+r)%o.length];n=n.replace("http://onetile"+i,"http://onetile"+h)}else n=nhn.mapcore.mapSpec.emptyTileUrl;else"nc"!=n.split("://")[1].split(".")[0]?n=n.replace("http://onetile"+i,"http://nc.onetile"):(e.onload=e.onerror=null,n=nhn.mapcore.mapSpec.dotTileUrl);else e.onload=e.onerror=null,n=nhn.mapcore.mapSpec.emptyTileUrl;nhn.mapcore.TileImage.changeSrc(e,n,this.isTransparentTile)}}),nhn.mapcore.TileImage={createImage:function(t,e){var n=jindo.$("<img>");return nhn.mapcore.Util.disableSelection(n),n.src=t,n.galleryImg="no",n.setAttribute("alt",""),n.style.cssText="position:absolute; border:0; margin:0; padding:0;max-width:none;max-height:none;min-width:none;min-height:none;",nhn.mapcore.isSupportOpacity&&/.png$/i.exec(t)&&nhn.mapcore.TileImage._handlePng(n,t),e&&jindo.$Element(n).css(e),n},changeSrc:nhn.mapcore.isSupportOpacity?function(t,e,n){n?this._handlePng(t,e):this._changeSrcOnly(t,e)}:function(t,e){this.changeSrc=this._changeSrcOnly,this.changeSrc(t,e)},_handlePng:function(t,e){t.style.visibility="hidden",t.clientWidth&&(t.style.width=t.clientWidth),t.clientHeight&&(t.style.height=t.clientHeight);var n=nhn.mapcore.mapSpec.dotTileUrl,i=function(){t.onerror=t.onload=null,t.style.visibility="visible",t.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"',sizingMethod='scale')",t.src=n};t.onload=i,t.src=e},_changeSrcOnly:function(t,e){t.src=e},setEmptyTileUrl:function(t){nhn.mapcore.mapSpec.emptyTileUrl=t},setDotTileUrl:function(t){nhn.mapcore.mapSpec.dotTileUrl=t}},nhn.mapcore.AbstractVirtualTilePane=jindo.$Class({name:null,tileType:"base",tileName:"bl_vc_bg",format:"png",zIndex:99,isActive:!1,belongingRealPaneName:null,deferTileRequest:!1,_realPane:null,$BEFORE_MSG_APP_READY:function(){this.isActive&&this.oApp.exec("LOAD_"+this.name.toUpperCase()+"_PANE")},unloadIfActive:function(){return this.oApp.exec("UNLOAD_"+this.name.toUpperCase()+"_PANE"),!1},load:function(t){this.isActive=!0,this._realPane.load(this,t)},unload:function(t){this.isActive=!1,this._realPane.unload(this,t)},redrawTiles:function(){this._realPane.redrawTiles()},updateTileTimestamp:function(t){this._realPane.updateTileTimestamp(t)}}),nhn.mapcore.BaseRealTilePane=jindo.$Class({_name:"base",_className:"nmap_base_pane",_zIndex:10,_indoorLevel:null,$BEFORE_MSG_APP_READY:function(){this.$super.$BEFORE_MSG_APP_READY(),this.oApp.exec("ADD_APP_PROPERTY",["getFloor",jindo.$Fn(this.getFloor,this).bind()])},$BEFORE_SET_INDOOR_LEVEL:function(t){if(null!=this._indoorLevel&&this._indoorLevel==t)return!1},$ON_SET_INDOOR_LEVEL:function(t){this._indoorLevel=t},$BEFORE_CLEAR_INDOOR_LEVEL:function(){if(null==this._indoorLevel)return!1},$AFTER_CLEAR_INDOOR_LEVEL:function(){this._indoorLevel=null,this.redrawTiles()},getFloor:function(){return this._indoorLevel||null}}).extend(nhn.mapcore.AbstractRealTilePane),nhn.mapcore.HybridRealTilePane=jindo.$Class({_name:"hybrid",_className:"nmap_hybrid_pane",_zIndex:20,isTransparentTile:!0,$BEFORE_SET_INDOOR_LEVEL:function(t){if(null!=this._indoorLevel&&this._indoorLevel==t)return!1},$ON_SET_INDOOR_LEVEL:function(t){this._indoorLevel=t},$BEFORE_CLEAR_INDOOR_LEVEL:function(){if(null==this._indoorLevel)return!1},$AFTER_CLEAR_INDOOR_LEVEL:function(){this._indoorLevel=null,this.redrawTiles()}}).extend(nhn.mapcore.AbstractRealTilePane),nhn.mapcore.TrafficAndBicycleRealTilePane=jindo.$Class({_name:"traffic_bicycle",_className:"nmap_traffic_bicycle_pane",_zIndex:40,isTransparentTile:!0}).extend(nhn.mapcore.AbstractRealTilePane),nhn.mapcore.CadastralRealTilePane=jindo.$Class({_name:"cadastral",_className:"nmap_cadastral_pane",_zIndex:30,$init:function(){this.$super.$init()}}).extend(nhn.mapcore.AbstractRealTilePane),nhn.mapcore.BaseVirtualTilePane=jindo.$Class({TILE_NAMES:{vector:"bl_vc_bg",satellite:"bl_st_bg",chollian:"bl_ch_rc",terrain:"bl_tn_bg"},TILE_FORMATS:{vector:"png",satellite:"jpeg",chollian:"jpeg",terrain:"png"},SATELLITE_SUB_TYPE_MAX_LEVEL:{chollian:3},name:null,tileType:"base",indoorInfo:null,format:"png",tileName:"bl_vc_bg",isActive:!1,belongingRealPaneName:"base",$init:function(t,e){t="hybrid"==t?"satellite":t,this.name="undefined"==typeof t?"vector":t},$AFTER_MSG_APP_READY:function(){var t;switch(this.name){case"vector":t="LOAD_VECTOR_PANE";break;case"terrain":t="LOAD_TERRAIN_PANE";break;default:t="LOAD_SATELLITE_PANE"}this.oApp.exec(t)},$ON_LOAD_VECTOR_PANE:function(){this.load("vector"),this.oApp.isActiveMapType("hybrid")?this.oApp.exec("UNLOAD_HYBRID_PANE"):this.oApp.isActiveMapType("terrain")&&this.oApp.exec("UNLOAD_TERRAIN_PANE")},$ON_LOAD_SATELLITE_PANE:function(){this._loadSatellitePane()},$ON_LOAD_TERRAIN_PANE:function(){this.load("terrain"),this.oApp.isActiveMapType("hybrid")?this.oApp.exec("UNLOAD_HYBRID_PANE"):this.oApp.isActiveMapType("vector")&&this.oApp.exec("UNLOAD_VECTOR_PANE")},_loadSatellitePane:function(){var t=this.oApp.getZoomLevel(),e=this.SATELLITE_SUB_TYPE_MAX_LEVEL[this._subtype];t<=e?(this.load("satellite",this._subtype,this._timestamp),this.oApp.exec("LOAD_SATELLITE_SUBTYPE",[this._subtype,this._timestamp])):(this.load("satellite"),this.oApp.exec("UNLOAD_SATELLITE_SUBTYPE",[this._subtype,this._timestamp]))},$ON_SET_INDOOR_LEVEL:function(t){var e="ol_id_";t<0&&(t="b"+Math.abs(t)),this.indoorInfo=e+t,this.oApp.exec("LOAD_"+this.name.toUpperCase()+"_PANE")},$ON_CLEAR_INDOOR_LEVEL:function(){this.indoorInfo=null},$ON_SET_SATELLITE_SUBTYPE:function(t,e){this._setSubType(t,e),"satellite"==this.name&&this._loadSatellitePane()},$ON_UNSET_SATELLITE_SUBTYPE:function(){this._setSubType(null),"satellite"==this.name&&this._loadSatellitePane()},_setSubType:function(t,e){return t&&e?(this._subtype=t,void(this._timestamp=e)):(this._subtype=null,void(this._timestamp=null))},$BEFORE_ZOOM:function(){this._levelBeforeZoom=this.oApp.getZoomLevel()},$AFTER_ZOOM:function(){if("satellite"==this.name&&this._subtype){var t=this._levelBeforeZoom,e=this.oApp.getZoomLevel(),n=this.SATELLITE_SUB_TYPE_MAX_LEVEL[this._subtype];(t<=n&&e>n||t>n&&e<=n)&&this._loadSatellitePane()}},load:function(t,e,n){e&&n?(this.useTimestamp=!0,this.$super.updateTileTimestamp(n),this.tileName=this.TILE_NAMES[e],this.format=this.TILE_FORMATS[e]):(this.useTimestamp=!1,this.tileName=this.TILE_NAMES[t],this.format=this.TILE_FORMATS[t]),this.oApp.exec("UNREGISTER_MAP_TYPE",[this.name]),this.name=t,this.$super.load()}}).extend(nhn.mapcore.AbstractVirtualTilePane),nhn.mapcore.BaseLabelVirtualTilePane=jindo.$Class({name:"base_label",tileType:"overlay",zIndex:999,format:"png",tileName:"ol_vc_an",belongingRealPaneName:"base",$AFTER_MSG_APP_READY:function(){this.oApp.isActiveMapType("vector")&&this.load()},$ON_LOAD_VECTOR_PANE:function(){this._isVectorOn=!0,this.load()},$ON_UNLOAD_VECTOR_PANE:function(){this.unload(),this._isVectorOn=!1},$ON_LOAD_SATELLITE_PANE:function(){this.unload(!0)},$ON_UNLOAD_SATELLITE_PANE:function(){this._isVectorOn&&this.load(!0)},$ON_LOAD_TERRAIN_PANE:function(){this.unload(!0)}}).extend(nhn.mapcore.AbstractVirtualTilePane),nhn.mapcore.TerrainLabelVirtualTilePane=jindo.$Class({name:"terrain_label",tileType:"overlay",zIndex:999,format:"png",tileName:"ol_vc_bg/ol_vc_an",belongingRealPaneName:"base",$AFTER_MSG_APP_READY:function(){this.oApp.isActiveMapType("terrain")&&this.load()},$ON_LOAD_VECTOR_PANE:function(){this.unload(!0)},$ON_LOAD_TERRAIN_PANE:function(){this._isTerrainOn=!0,this.load()},$ON_UNLOAD_TERRAIN_PANE:function(){this.unload(),this._isTerrainOn=!1},$ON_LOAD_SATELLITE_PANE:function(){this.unload(!0),this._isTerrainOn=!1}}).extend(nhn.mapcore.AbstractVirtualTilePane),nhn.mapcore.StandaloneHybridVirtualTilePane=jindo.$Class({name:"hybrid",tileType:"overlay",zIndex:999,format:"png",tileName:"ol_st_rd/ol_st_an",belongingRealPaneName:"hybrid",$init:function(t){t&&(this._initMode=t)},$AFTER_MSG_APP_READY:function(){"hybrid"==this._initMode&&this.oApp.exec("LOAD_HYBRID_PANE")},$ON_LOAD_HYBRID_PANE:function(){this.load()},$ON_UNLOAD_HYBRID_PANE:function(){this.unload()},$ON_SET_INDOOR_LEVEL:function(t){var e="ol_id_";t<0&&(t="b"+Math.abs(t)),this.indoorInfo=e+t},$ON_CLEAR_INDOOR_LEVEL:function(){this.indoorInfo=null}}).extend(nhn.mapcore.AbstractVirtualTilePane),nhn.mapcore.OverlayLabelVirtualTilePane=jindo.$Class({TILE_NAMES:{vector:"ol_vc_an",satellite:"",hybrid:"ol_st_an"},name:"overlay_label",tileType:"overlay",zIndex:4,format:"png",tileName:"ol_vc_an",belongingRealPaneName:"traffic_bicycle",$ON_LOAD_VECTOR_PANE:function(){this._isVectorOn=!0,this._changeTileType("vector"),this.redrawTiles()},$ON_UNLOAD_VECTOR_PANE:function(){this._isVectorOn=!1,this._changeTileType("satellite"),this.redrawTiles()},$ON_LOAD_SATELLITE_PANE:function(){this._isVectorOn=!1;var t=this._isHybridOn?"hybrid":"satellite";this._changeTileType(t),this.redrawTiles()},$ON_UNLOAD_SATELLITE_PANE:function(){this._isVectorOn=!0},$ON_LOAD_HYBRID_PANE:function(){this._isHybridOn=!0,this._changeTileType("hybrid"),this.redrawTiles()},$ON_UNLOAD_HYBRID_PANE:function(){this._isHybridOn=!1,this._changeTileType("satellite"),this.redrawTiles()},$ON_LOAD_TRAFFIC_PANE:function(){this._isTrafficOn=!0,this._loadIfLabelRequired()},$ON_UNLOAD_TRAFFIC_PANE:function(){this._isTrafficOn=!1,this._unloadIfAllUnloaded()},_loadIfLabelRequired:function(){(this._isVectorOn||this._isHybridOn)&&this.load()},_unloadIfAllUnloaded:function(){this._isTrafficOn||this.unload()},_changeTileType:function(t){this.tileName=this.TILE_NAMES[t]}}).extend(nhn.mapcore.AbstractVirtualTilePane),nhn.mapcore.TrafficVirtualTilePane=jindo.$Class({TRAFFIC_VERSION_API:nhn.mapcore.mapSpec.SSL?"https://ssl.map.naver.com/rts/wmts?request=GetLastVersion":"http://rts1.map.naver.net/rts/wmts?request=GetLastVersion",name:"traffic",tileType:"overlay",format:"png",tileName:"ol_tr_rt",zIndex:3,useTimestamp:!1,belongingRealPaneName:"traffic_bicycle",deferTileRequest:!0,_requestArray:null,$init:function(){this._fGetTileVersion=jindo.$Fn(this._getTileVersion,this).bind(),this._fRefreshTile=jindo.$Fn(this._updateTileAtInterval,this).bind(),this._requestArray=[]},_getTileVersion:function(t){this.deferTileRequest=!0;var e=this,n=jindo.$Ajax(this.TRAFFIC_VERSION_API,{type:"jsonp",callbackname:"callbackname",onload:function(i){var o=i.json().version||0;e.deferTileRequest=!1,t(o),e._removeRequest(n),n=null},onerror:function(){n=null}});n.request(),this._storeRequest(n)},_updateTileAtInterval:function(){this.oApp.exec("REFRESH_TRAFFIC_PANE")},$ON_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["getTrafficLastVersion",jindo.$Fn(this._getLastVersion,this).bind()])},_getLastVersion:function(){return this._lastVersion},_setLastVersion:function(t){this._realPane.updateTileTimestamp(t),this._lastVersion=t},$BEFORE_LOAD_TRAFFIC_PANE:function(){if(this.isActive)return this.unloadIfActive()},$ON_LOAD_TRAFFIC_PANE:function(){this.load(),this._startRefreshAtInterval()},$ON_REFRESH_TRAFFIC_PANE:function(){if(this.isActive){var t=this;this._fGetTileVersion(function(e){t._setLastVersion(e),t.redrawTiles()}),this.oApp.exec("REFRESH_TRAFFIC_PANE_DONE")}},load:function(){this.oApp.exec("REGISTER_MAP_TYPE",[this.name]),this.$super.load(!0),this.isActive=!0;var t=this;this._fGetTileVersion(function(e){t._setLastVersion(e),t.useTimestamp=!0,t.$super.load()})},unload:function(){this.useTimestamp=!1,this.$super.unload()},$ON_UNLOAD_TRAFFIC_PANE:function(){this._endRefreshAtInterval(),this.unload(),this._abortAllRequest()},$ON_GATHER_URL_QUERY:function(t,e){this.isActive&&(e[this.name]="on")},INTERVAL:3e5,_startRefreshAtInterval:function(){this._timer&&window.clearInterval(this._timer),this._timer=window.setInterval(this._fRefreshTile,this.INTERVAL)},_endRefreshAtInterval:function(){this._timer&&(window.clearInterval(this._timer),this._timer=null)},_storeRequest:function(t){this._requestArray.push(t)},_removeRequest:function(t){for(var e=0,n,i=this._requestArray.length;e<i;e++)if(n=this._requestArray[e],t===n){this._requestArray.splice(e,1);break}},_abortAllRequest:function(){for(var t=this._requestArray.length-1,e;t>=0;t--)e=this._requestArray[t],e.abort(),this._requestArray.pop()},hasRequest:function(){return 0!==this._requestArray.length}}).extend(nhn.mapcore.AbstractVirtualTilePane),nhn.mapcore.BicycleVirtualTilePane=jindo.$Class({name:"bicycle",tileType:"overlay",format:"png",tileName:"ol_bc_hb",zIndex:5,belongingRealPaneName:"traffic_bicycle",$BEFORE_LOAD_BICYCLE_PANE:function(){if(this.isActive)return this.unloadIfActive()},$ON_LOAD_BICYCLE_PANE:function(){this.load()},$ON_REFRESH_BICYCLE_PANE:function(){this.isActive&&this.forceRefresh()},$ON_UNLOAD_BICYCLE_PANE:function(){this.unload()},$ON_GATHER_URL_QUERY:function(t,e){this.isActive&&(e[this.name]="on")}}).extend(nhn.mapcore.AbstractVirtualTilePane),nhn.mapcore.CadastralVirtualTilePane=jindo.$Class({name:"cadastral",tileType:"overlay",zIndex:1,format:"png",tileName:"ol_lp_cn",belongingRealPaneName:"cadastral",$BEFORE_LOAD_CADASTRAL_PANE:function(){if(this.isActive)return this.unloadIfActive()},$ON_LOAD_CADASTRAL_PANE:function(){this.load()},$ON_REFRESH_CADASTRAL_PANE:function(){this.isActive&&this.forceRefresh()},$ON_UNLOAD_CADASTRAL_PANE:function(){this.unload()},$ON_GATHER_URL_QUERY:function(t,e){this.isActive&&(e[this.name]="on")}}).extend(nhn.mapcore.AbstractVirtualTilePane),function(){var t=nhn.mapcore.ZoomEffectConfig;nhn.mapcore.GhostPane=jindo.$Class({name:"GhostPane",ratio:1,trans:null,$init:function(){this._navigator=jindo.$Agent().navigator(),this._zoomDuration=t.zoomDuration,this._zooming=!1,this._zoomingDone=!0,this._initZoomer()},_determineZoomStyle:function(){this._useZoomStyle="zoom"in this.pane.style,this._transformStyleName=this._navigator.webkit?"webkitTransform":this._navigator.firefox?"MozTransform":!!this._navigator.opera&&"oTransform",(document.documentMode&&document.documentMode>=8||this._transformStyleName)&&(this._useZoomStyle=!1),this._setZoom=this._useZoomStyle?this._setZoomUseZoomStyle:this._setZoomNotUseZoomStyle},$AFTER_MSG_APP_READY:function(){var t=this.oApp;this.pane=t.getMapPane("nmap_ghost_pane",9),this.wePane=jindo.$Element(this.pane),this.vectorPane=t.getMapPane("nmap_base_pane",10),this.weVectorPane=jindo.$Element(this.vectorPane),this.hybridPane=t.getMapPane("nmap_hybrid_pane",20),this.weHybridPane=jindo.$Element(this.hybridPane),this._movableContainer=t.getMovableContainer(),this._staticContainer=t.getMapPane("nmap_static_container"),this.oApp.exec("ADD_APP_PROPERTY",["isGhostEnabled",function(){return!0}]),this._determineZoomStyle()},_initZoomer:function(){this.zoomer=new nhn.Transition({effect:nhn.Effect.easeOut}).fps(t.zoomFps),this.zoomer.attach({start:jindo.$Fn(this._onStartZoomTrans,this).bind(),end:jindo.$Fn(this._onEndZoomTrans,this).bind(),abort:jindo.$Fn(this._onAbortZoomTrans,this).bind()}),this.zoomerObj={setter:jindo.$Fn(function(t,e){var n=parseFloat(e,10);this._currentRatio=n,this._setZoom(n)},this).bind()}},_onStartZoomTrans:function(){this.oApp.exec("START_ZOOM_TRANSITION")},_onEndZoomTrans:function(){this._clearEndTimer();var e=t.endDelay,n=jindo.$Fn(function(){this.oApp.exec("END_ZOOM_TRANSITION")},this).bind();this.oApp.isWheelZoomWorking()?this._endTimer=window.setTimeout(n,e):n()},_onAbortZoomTrans:function(){this.oApp.exec("ABORT_ZOOM_TRANSITION")},_clearEndTimer:function(){this._endTimer&&(window.clearTimeout(this._endTimer),delete this._endTimer)},_beforeStartEffect:function(t){var e=this.oApp,n=e.getZoomLevel(),i=e.getCenterPoint(),o=e.getBoundOffset(),a=this._movableContainer,s=e.getMap(),r=nhn.mapcore.TransPoint,t=t||i,h,l;o=new nhn.mapcore.Point(o[0]-o[2],o[1]-o[3]),h=r.fromPointUnitToPixelUnit(i.x-t.x,n)-o.x/2,l=r.fromPointUnitToPixelUnit(t.y-i.y,n)-o.y/2,this.gap=new nhn.mapcore.Point(h,l),this.info={paneXBase:parseFloat(a.style.left)-(s.clientWidth/2-h),paneYBase:parseFloat(a.style.top)-(s.clientHeight/2-l)}},_startEffect:function(t,e){this._beforeStartEffect(e),this._doEffect(t)},_doEffect:function(e){var n=this._zoomDuration,i=this._currentRatio||1,o=i/1,a;e*=o,a=t.easing,this._currentTargetRatio=e,this.zoomer.start(n,this.zoomerObj,{ratio:nhn.Effect[a]?nhn.Effect[a](i,e):nhn.Effect.linear(i,e)})},_hideMapPane:function(){nhn.mapcore.Util.mapSetClass(this.vectorPane,"nmap_invisible_pane"),nhn.mapcore.Util.mapSetClass(this.hybridPane,"nmap_invisible_pane")},_showMapPane:function(){nhn.mapcore.Util.mapRemoveClass(this.vectorPane,"nmap_invisible_pane"),nhn.mapcore.Util.mapRemoveClass(this.hybridPane,"nmap_invisible_pane")},_hideGhost:function(){nhn.mapcore.Util.mapSetClass(this.pane,"nmap_invisible_pane")},_showGhost:function(){nhn.mapcore.Util.mapRemoveClass(this.pane,"nmap_invisible_pane")},_abortAllTrans:function(){this.zoomer.abort()},_reviseGhostPosition:function(){var t=this.pane,e=this._movableContainer;this._movedGapX=parseInt(e.style.left,10)-this._zoomingLeft,this._movedGapY=parseInt(e.style.top,10)-this._zoomingTop,t.style.left=parseInt(t.style.left,10)-this._movedGapX+"px",t.style.top=parseInt(t.style.top,10)-this._movedGapY+"px"},$ON_END_ZOOM_TRANSITION:function(){var t=this.pane,e=this._movableContainer;this.oApp.exec("END_ZOOM_EFFECT",[this._effectPoint]),this._hideMapPane(),this._reviseGhostPosition(),this._tearDownEffect()},$ON_SHOW_GHOST:function(t){this.oApp.exec("ZOOM_MAP_START_DONE"),this.pane.innerHTML=this.vectorPane.innerHTML,this.pane.style.zIndex=10,this.vectorPane.style.zIndex=9,this._showGhost(),this._hideMapPane(),this._beforeStartEffect(t)},$ON_HIDE_GHOST:function(){this._reviseGhostPosition(),this._tearDownEffect()},$ON_FORCE_GHOST_ZOOM:function(t){this._setZoom(t)},$BEFORE_START_ZOOM_EFFECT:function(){this.oApp.exec("ZOOM_MAP_START_DONE")},$ON_START_ZOOM_EFFECT:function(e,n,i){this._zoomingDone=!1,this.oApp.setGhostZoomingDone(!1),this._zooming=!0,this.oApp.setGhostZooming(!0),delete this._zoomingLeft,delete this._zoomingTop,this.pane.innerHTML=this.vectorPane.innerHTML,this._setNaNStyleToZero(),this.pane.style.zIndex=10,this.vectorPane.style.zIndex=9,this._showGhost(),this._hideMapPane(),this._abortAllTrans(),this._effectPoint=n,this._currentRatio=1,i>0?ratio=Math.pow(2,i):i<0&&(ratio=1/Math.pow(2,-i)),ratio>2||ratio<.5?this._zoomDuration=t.deepZoomDuration:this._zoomDuration=t.zoomDuration,this._startEffect(ratio,n)},$ON_ADD_ZOOM_EFFECT:function(t,e){this._zoomAdded=!0,this._clearEndTimer(),this._abortAllTrans(),this._doEffect(e>0?2:.5)},$ON_END_ZOOM_EFFECT:function(){this._zooming=!1,this.oApp.setGhostZooming(!1)},_tearDownEffect:function(e){var n=this.pane,i=this.vectorPane,o;o=jindo.$Fn(function(){this._movedGapX&&(n.style.left=parseInt(n.style.left,10)+this._movedGapX+"px",n.style.top=parseInt(n.style.top,10)+this._movedGapY+"px"),delete this._movedGapX,delete this._movedGapY,delete this._zoomingLeft,delete this._zoomingTop,n.style.zIndex=9,i.style.zIndex=10,nhn.mapcore.Util.mapRemoveClass(this.vectorPane,"nmap_invisible_pane"),this._hideGhost(),n.innerHTML="",this.oApp.exec("END_ZOOM_EFFECT_DONE"),this.oApp.exec("ZOOM_MAP_END_DONE"),this._showMapPane(),this._zoomingDone=!0,this.oApp.setGhostZoomingDone(!0),this._zoomAdded=!1},this).bind(),e?o():window.setTimeout(o,t.tearDownDelay)},_setZoomingCoord:function(){if(!this._zoomingLeft){var t=this.oApp.getMovableContainer();this._zoomingLeft=parseInt(t.style.left,10),this._zoomingTop=parseInt(t.style.top,10)}},_setZoomUseZoomStyle:function(t){var e=this.oApp.getJumpGap(),n=this.pane;this._setZoomingCoord(),n.style.left=this.info.paneXBase*(t-1)+e.x*t+"px",n.style.top=this.info.paneYBase*(t-1)+e.y*t+"px",n.style.zoom=t},_setZoomNotUseZoomStyle:function(t){var e=this.oApp.getJumpGap(),n=this.pane;this._setZoomingCoord(),n.style.left=this.info.paneXBase*(t-1)+e.x*t+"px",n.style.top=this.info.paneYBase*(t-1)+e.y*t+"px";for(var i=n.getElementsByTagName("img"),o=0,a;a=i[o];o++){var s=/zoom_left_(-?[0-9\.]+)/.test(a.className)&&RegExp.$1,r=/zoom_top_(-?[0-9\.]+)/.test(a.className)&&RegExp.$1;s&&r?(s=parseFloat(s),r=parseFloat(r)):(s=parseFloat(a.style.left),r=parseFloat(a.style.top),a.className+=" zoom_left_"+s+" zoom_top_"+r),a.style.left=s*t+"px",a.style.top=r*t+"px",a.style.width=Math.ceil(256*t)+"px",a.style.height=Math.ceil(256*t)+"px"}},_setNaNStyleToZero:function(){if(document.documentMode&&8==document.documentMode)for(var t=this.pane.getElementsByTagName("img"),e=0,n=t.length;e<n;++e)parseFloat(t[e].style.left)||(t[e].style.left=0),parseFloat(t[e].style.top)||(t[e].style.top=0);this._setNaNStyleToZero=function(){return!1}}})}(),nhn.mapcore.Template={get:function(t){var e;if("function"==typeof t)e=t;else{var n=document.getElementById(t);n=n?n.innerHTML:t,e=this._toTemplate(n)}return this._getFnTemplate(e)},_getFnTemplate:function(t){return new function(t){this.process=function(e){return t(e?e:"")},this.processWithTrim=function(t){var e=jindo.$S(this.process(t));return e.trim().$value()}}(t)},_toTemplate:function(t){return t=t.replace(/({%)([^%}]*)({|})([^%}]*)(%})/g,"$1 $2 $3 $4 $5"),new Function("obj","var p=[];with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("{%").join("\t").replace(/((^|%})[^\t]*)'/g,"$1\r").replace(/'/g,"\r").replace(/\t=(.*?)%}/g,"',$1,'").split("\t").join("');").split("%}").join("p.push('").split("\r").join("\\'")+"');}return p.join('');")}},nhn.DragArea=jindo.$Class({_bIsActivating:!1,$init:function(t,e){this.option({className:"dragable",flowOut:!0,threshold:0}),this.option(e||{}),this._el=t,this.bIsIE=jindo.$Agent().navigator().ie,this._oDragInfo={prepare:!1},this._bIsDragging=!1,this._wfOnMouseDown=jindo.$Fn(this._onMouseDown,this),this._wfOnMouseMove=jindo.$Fn(this._onMouseMove,this),this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this),this._wfOnDragStart=jindo.$Fn(this._onDragStart,this),this._wfOnSelectStart=jindo.$Fn(this._onSelectStart,this),this.activate()},_findDraggableElement:function(t){if(jindo.$$.test(t,"input[type=text]")||"TEXTAREA"==t.tagName)return null;var e=this,n="."+this.option("className"),i=function(t){return null!=t&&(!e._el.tagName||e._el===t||jindo.$Element(e._el).isParentOf(t))},t=jindo.$$.test(t,n)?t:jindo.$$.getSingle("! "+n,t);return i(t)||(t=null),t},isDragging:function(){return this._bIsDragging&&!this._oDragInfo.prepare},_attachEvent:function(){this.isActivating()||(this._wfOnMouseDown.attach(this._el,"mousedown"),this.bIsIE&&(this._wfOnDragStart.attach(this._el,"dragstart"),this._wfOnSelectStart.attach(this._el,"selectstart")),this._bIsActivating=!0)},_detachEvent:function(){this.isActivating()&&(this._wfOnMouseDown.detach(this._el,"mousedown"),this.bIsIE&&(this._wfOnDragStart.detach(this._el,"dragstart"),this._wfOnSelectStart.detach(this._el,"selectstart")),this._bIsActivating=!1)},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},activate:function(){this._attachEvent()},deactivate:function(){this._detachEvent()},isEventAttached:function(){return this.isActivating()},isActivating:function(){return this._bIsActivating},_onMouseDown:function(t){if(!this._bIsDragging&&!this._oDragInfo.prepare&&!t.mouse().right){var e=this._findDraggableElement(t.element);if(e){if(this.bIsIE){var n=jindo.$Document();this._elSetCapture=this._el==document?document.body:e,this._elSetCapture.setCapture(!0)}var i=t.pos();this._oDragInfo={prepare:!0,button:t._event.button,handle:e,element:e,pageX:i.pageX,pageY:i.pageY},this.fireEvent("handledown",{handle:e,element:e,event:t}),this._wfOnMouseMove.attach(document,"mousemove"),this._wfOnMouseUp.attach(document,"mouseup"),this._wfOnMouseUp.attach(document,"contextmenu"),t.stop(jindo.$Event.CANCEL_DEFAULT)}}},_onMouseMove:function(t){this._bIsDragging=!0;var e=this._oDragInfo,n=t.pos();if(e.prepare){var i=this.option("threshold");if(i){var o={pageX:n.pageX-e.pageX,pageY:n.pageY-e.pageY},a=Math.sqrt(o.pageX*o.pageX+o.pageY*o.pageY);if(i>a)return}var s=this._findDraggableElement(t.element),r={area:this._el,handle:e.handle,element:e.element,event:t};if(!this.fireEvent("dragstart",r))return void(this._bIsDragging=!1);var h=jindo.$Element(r.element);e.prepare=!1,e.handle=r.handle,e.element=r.element,e.objectX=parseInt(h.css("left"))||0,e.objectY=parseInt(h.css("top"))||0}var l={x:n.pageX-e.pageX,y:n.pageY-e.pageY},r={area:this._el,handle:e.handle,element:e.element,event:t,x:e.objectX+l.x,y:e.objectY+l.y,gapX:l.x,gapY:l.y};if(this.fireEvent("beforedrag",r)){if(0==this.option("flowOut")){var p=r.element,c=jindo.$$.getSingle("! [@position!=static]",r.element),u=[p.offsetWidth,p.offsetHeight],d=c?{width:c.clientWidth,height:c.clientHeight}:jindo.$Document().clientSize();null!==r.x&&(r.x<0?r.x=0:r.x+u[0]>d.width&&(r.x=d.width-u[0])),null!==r.y&&(r.y<0?r.y=0:r.y+u[1]>d.height&&(r.y=d.height-u[1]))}var f=e.element;null!==r.x&&(f.style.left=r.x+"px"),null!==r.y&&(f.style.top=r.y+"px"),!this.fireEvent("drag",r)}},_onMouseUp:function(t){if("mouseup"!=t.type||!t.mouse().right){"contextmenu"==t.type&&(this._oDragInfo.prepare=!1,t.stop()),this._wfOnMouseMove.detach(document,"mousemove"),this._wfOnMouseUp.detach(document,"mouseup"),this._wfOnMouseUp.detach(document,"contextmenu");var e=this._oDragInfo;if(!e.prepare&&this._bIsDragging){var n=e.element,i=jindo.$Element(n);if(!this.fireEvent("dragend",{area:this._el,handle:e.handle,element:e.element,event:t,x:parseInt(i.css("left"))||0,y:parseInt(i.css("top"))||0}))return}this.bIsIE&&this._elSetCapture&&(this._elSetCapture.releaseCapture(),this._elSetCapture=null),this._bIsDragging=!1,this._oDragInfo.prepare=!1,this.fireEvent("handleup",{handle:e.handle,element:e.element,event:t})}},_onDragStart:function(t){t.stop(jindo.$Event.CANCEL_DEFAULT)},_onSelectStart:function(t){this._findDraggableElement(t.element)&&t.stop(jindo.$Event.CANCEL_DEFAULT)}}).extend(nhn.Component),nhn.mapcore.Slider=jindo.$Class({_elTrack:null,_oDragArea:null,_aThumbs:null,_aPoses:null,_oSwap:null,_bIsEventAttached:!1,$init:function(t,e){this.option({vertical:!1,jump:!0,classPrefix:"slider-",adjustValue:null,minValue:0,maxValue:1}),this.option(e||{}),this.option("vertical")?this._oSwap={y:"x",x:"y",clientX:"clientY",pageX:"pageY",offsetWidth:"offsetHeight",left:"top",extent:"height"}:this._oSwap={y:"y",x:"x",clientX:"clientX",pageX:"pageX",offsetWidth:"offsetWidth",left:"left",extent:"width"},this._sRand="S"+parseInt(1e8*Math.random()),this._elTrack=jindo.$(t),this._aThumbs=jindo.$$("."+this.option("classPrefix")+"thumb",this._elTrack);var n=jindo.$ElementList(this._aThumbs);n.addClass(this._sRand),this._aPoses=[],this._onTrackMouseDownFn=jindo.$Fn(this._onTrackMouseDown,this),this._initDragArea(),this.activate(),this._detectChange(),t=null},getTrack:function(){return this._elTrack},getThumb:function(t){return this._aThumbs[t]},_initDragArea:function(){var t=this,e=this._oSwap;this._oDragArea=new nhn.DragArea(this._elTrack,{className:this._sRand,flowOut:!1}).attach({beforedrag:function(n){var i=t._getThumbIndex(n.handle),o={index:i,pos:n[e.x],jump:!1};if(!t.fireEvent("beforechange",o))return!1;var a=t._getAdjustedPos(i,o.pos);return a===!1?n.stop():(n[e.x]=a,void(n[e.y]=null))},drag:function(e){var n=t._getThumbIndex(e.handle);t._fireChangeEvent(n)}})},getDragArea:function(){return this._oDragArea},_fireBeforeChangeEvent:function(t,e,n){},_fireChangeEvent:function(t){var e=this.option("adjustBy");if(this._detectChange()){var n=this._aPoses[t],i={index:t,pos:n,value:this._getValue(t,n)};this.fireEvent("change",i)}},_attachEvent:function(){this._bIsEventAttached||(this._onTrackMouseDownFn.attach(this._elTrack,"mousedown"),this._bIsEventAttached=!0)},_detachEvent:function(){this._bIsEventAttached&&(this._onTrackMouseDownFn.detach(this._elTrack,"mousedown"),this._bIsEventAttached=!1)},activate:function(){this.getDragArea().activate(),this._attachEvent()},deactivate:function(){this.getDragArea().deactivate(),this._detachEvent()},_onTrackMouseDown:function(t){var e=this;if(this.option("jump")){var n=0,i=this._oSwap,o=t.element,a="."+this.option("classPrefix")+"thumb",s=jindo.$$.test(o,a)||jindo.$$.getSingle("! "+a,o);if(!s){var r=t.pos()[i.pageX];r-=jindo.$Element(this._elTrack).offset()[i.left];for(var h=9999999,l=0,p;p=this._aThumbs[l];l++){var c=parseInt(jindo.$Element(p).css(i.left))||0;c+=parseInt(p[i.offsetWidth]/2);var u=Math.abs(r-c);u<h&&(h=u,n=l)}var p=this._aThumbs[n];r-=parseInt(p[i.offsetWidth]/2),t.stop(jindo.$Event.CANCEL_DEFAULT),this.positions(n,r)}}},_getTrackInfo:function(t){var e=this._oSwap,n=this._aThumbs[t],i=n[e.offsetWidth],o=this._elTrack[e.offsetWidth];i=this._getStyleValueFromElement(i,n,"left"),o=this._getStyleValueFromElement(o,this._elTrack,"extent");var a=o-i,s=this.option("maxValue"),r=this.option("minValue");return{maxPos:a,max:s,min:r}},_getStyleValueFromElement:function(t,e,n){return 0===t?(t=parseFloat(e.style[this._oSwap[n]]),isNaN(t)?0:t):t},_getValue:function(t,e){"undefined"==typeof e&&(e=this._aPoses[t]);var n=this._getTrackInfo(t),i=Math.min(Math.max(e*(n.max-n.min)/n.maxPos+n.min,n.min),n.max),o;return(o=this.option("adjustValue"))&&(i=o.call(this,i)),i},_getAdjustedPos:function(t,e){var n=e,i=this._getTrackInfo(t),o;if(o=this.option("adjustValue")){var a=Math.min(Math.max(n*(i.max-i.min)/i.maxPos+i.min,i.min),i.max),s=o.call(this,a);a!=s&&(n=i.maxPos*(s-i.min)/(i.max-i.min))}return n=Math.max(n,0),
n=Math.min(n,i.maxPos)},_detectChange:function(){for(var t=this.positions(),e=!1,n=0,i=t.length;n<i;n++)t[n]!==this._aPoses[n]&&(e=!0);return this._aPoses=t,e},_getThumbIndex:function(t){for(var e=0,n=this._aThumbs.length;e<n;e++)if(this._aThumbs[e]==t)return e;return-1},positions:function(t,e,n){"undefined"==typeof n&&(n=!0);var i=this._oSwap;switch(arguments.length){case 0:for(var o=[],a=0,s=this._aThumbs.length;a<s;a++)o[a]=this.positions(a);return o;case 1:return parseInt(jindo.$Element(this._aThumbs[t]).css(i.left));default:if(n){var r={index:t,pos:e,jump:!0};if(!this.fireEvent("beforechange",r))return!1;var h=this._getAdjustedPos(t,r.pos);return h===!1?this:(jindo.$Element(this._aThumbs[t]).css(i.left,h+"px"),this._fireChangeEvent(t),this)}var h=this._getAdjustedPos(t,e);return jindo.$Element(this._aThumbs[t]).css(i.left,h+"px"),this}},values:function(t,e,n){switch("undefined"==typeof n&&(n=!0),arguments.length){case 0:for(var i=[],o=0,a=this._aThumbs.length;o<a;o++)i[o]=this._getValue(o);return i;case 1:return this._getValue(t,this.positions(t));default:var s=this._getTrackInfo(t);return this.positions(t,(e-s.min)*s.maxPos/(s.max-s.min),n),this}}}).extend(nhn.Component),"undefined"==typeof nhn.api&&(nhn.api={}),"undefined"==typeof nhn.api.map&&(nhn.api.map={}),nhn.api.map.MapObject=jindo.$Class({attach:function(t,e){this._customHandlers||(this._customHandlers={}),this._customHandlers[t]||(this._customHandlers[t]=[]),this._customHandlers[t].push(e)},detach:function(t,e){var n=this._customHandlers;if(n&&n[t]){var i=n[t].indexOf(e);i!=-1&&(n[t].splice(i,1),0==n[t].length&&(n[t]=null))}},fireEvent:function(t,e){e=e||{},e.target=this;for(var n=this.getElement(),i;n&&(i=(n=nhn.mapcore.Util.mapGetParentByClass(n,"_nmap_uid"))&&RegExp.$0);){var o=nhn.api.map.Map._objectManager._getMapObjectByUID(i);if("function"==typeof o._launchHandlers&&o._launchHandlers(t,e),o.isBubblingEnabled&&o.isBubblingEnabled()===!1)break;n=n.parentNode}},_launchHandlers:function(t,e){var n=this._customHandlers&&this._customHandlers[t];if(n)for(var i=0,o=n.length;i<o;i++)e.currentTarget=this,n[i].call(this,e)},enableWheelZoom:function(t){var e=this.getElement();"boolean"==typeof t&&nhn.mapcore.Util[t?"mapRemoveClass":"mapSetClass"](e,"_nmap_diswheel")},isWheelZoomEnabled:function(){var t=this.getElement();return!nhn.mapcore.Util.mapGetClass(t,"_nmap_diswheel")},enableDragPan:function(t){var e=this.getElement();"boolean"==typeof t&&nhn.mapcore.Util[t?"mapRemoveClass":"mapSetClass"](e,"_nmap_disdrag")},isDragPanEnabled:function(){var t=this.getElement();return!nhn.mapcore.Util.mapGetClass(t,"_nmap_disdrag")},enableDblClickZoom:function(t){var e=this.getElement();"boolean"==typeof t&&nhn.mapcore.Util[t?"mapRemoveClass":"mapSetClass"](e,"_nmap_disdblclick")},isDblClickZoomEnabled:function(){var t=this.getElement();return!nhn.mapcore.Util.mapGetClass(t,"_nmap_disdblclick")},enableBubbling:function(t){var e=this.getElement();"boolean"==typeof t&&nhn.mapcore.Util[t?"mapRemoveClass":"mapSetClass"](e,"_nmap_disbubbling")},isBubblingEnabled:function(){var t=this.getElement();return!nhn.mapcore.Util.mapGetClass(t,"_nmap_disbubbling")}});var css_replaced;if(jindo.$Agent().navigator().ie)try{document.namespaces.add("v","urn:schemas-microsoft-com:vml")}catch(e){}var AUTH_replaced;nhn.api.map.Map=jindo.$Class({bDetectCoveredMarker:!0,useEffectInWheelZoom:!0,useCenterMarkInWheelZoom:!0,moveMapThresholdPixel:0,MASHUP_API_URL:"http://mapview.naver.com/view",MASHUP_MAP_SIZE:{img0:{width:400,height:300},img1:{width:480,height:220},img2:{width:240,height:460},img3:{width:250,height:188},news:{width:314,height:188}},$init:function(t,e){this._elWrap=jindo.$(t),this._elMap=jindo.$("<div>");var auth_code_to_be_replaced;e=e||{},this._oDupLayer=new MarkerDupLayer(this),this._createMap(e),this._simulatedMouseEnterLeave(),this.addOverlay(this._oDupLayer),this._bindEvents()},_falseFunc:function(){return!1},_trueFunc:function(){return!0},_createImg:function(t,e,n,i,o,a){var s;return s=document.createElement("img"),s.style.position="absolute",window.attachEvent&&!window.opera?(s.galleryImg="no",s.unselectable="on",s.onselectstart=this._falseFunc):s.style.MozUserSelect="none",s.oncontextmenu=this._falseFunc,a||(a=0),s.style.zIndex=a,t&&(s.src=t),s.style.width=e+"px",s.width=e,s.style.height=n+"px",s.height=n,s.style.left=i+"px",s.style.top=o+"px",s},_auth:function(){var t=new Date,e=nhn.mapcore.mapSpec.SSL?"https":"http",n=encodeURI(nhn.mapcore.mapSpec.pageURI),i=e+"://openapi.map.naver.com/common/valid.php?key="+this.userKey+"&uri="+n+"&time="+t.getTime();this.authObj=this._createImg(null,1,1,-1e4,-1e4,0);var o=this;nhn.api.map.Map._nevent.attachDom(this.authObj,"error",this,function(){o._failAuth()}),this.authObj.src=i},_failAuth:function(t){nhn.mapcore.mapSpec.authentication=!1;var e=t||this.userKey,n=this.getElement(),i=this;window.setTimeout(function(){n.innerHTML="";var o=Math.floor(window.devicePixelRatio||1)>1?2:1,a=nhn.mapcore.mapSpec.STATIC_IMG+"/maps/mantle/"+o+"x/auth_fail.png";n.style.backgroundImage='url("'+a+'")',n.style.backgroundPosition="center center";try{n.style.backgroundSize="256px 256px"}catch(s){}var r=nhn.mapcore.mapSpec.pageURI,h="\ub124\uc774\ubc84 \uc9c0\ub3c4 Open API \uc778\uc99d\uc774 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4!";t?h="\ub124\uc774\ubc84 \uc9c0\ub3c4 Open API \uc778\uc99d\uc774 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4!\nclientId\uc640 \uc6f9 \uc11c\ube44\uc2a4 url\uc744 \ud655\uc778\ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.":e&&(h="\ub124\uc774\ubc84 \uc9c0\ub3c4 Open API \uc778\uc99d\uc774 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4!\n\uc624\ud508 API key\uc640 \uc6f9 \uc11c\ube44\uc2a4 url\uc744 \ud655\uc778\ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."),i.__fMouseOverSimulator&&(i.__fMouseOverSimulator.detach(n,"mouseover"),i.__fMouseOutSimulator.detach(n,"mouseout")),window.nhn.mapcore&&(window.nhn.mapcore=null),window.nhn.api.map&&(window.nhn.api.map=null)},1e3)},_auth2:function(t){if(!nhn.mapcore.mapSpec.OPENAPI_AUTHENTICATED){var e=this,n=function(){nhn.mapcore.mapSpec.OPENAPI_AUTHENTICATED=!1,e._failAuth(t)},i=function(){nhn.mapcore.mapSpec.OPENAPI_AUTHENTICATED=!0},o=function(e,n){var i=[e,"  * Error Code / Error Message: "+n,"  * Client ID: "+t,"  * URI: "+encodeURI(nhn.mapcore.mapSpec.pageURI)].join("\n");try{jindo.$Agent().navigator().ie?console.info("NAVER Maps JavaScript API v2 "+i):console.info("%c NAVER Maps JavaScript API v2 %c\n\n "+i,"background: #FF0000; color: white; display: block;","background: none;")}catch(o){}};if(!t)return void n();var a=new Date,s=nhn.mapcore.mapSpec.SSL?"https":"http",r=nhn.mapcore.mapSpec.validateHost||"openapi.map.naver.com",h=encodeURIComponent(nhn.mapcore.mapSpec.pageURI.replace(/\s+/g,"")),l=s+"://"+r+"/v1/validatev2?clientId="+t+"&uri="+h+"&time="+a.getTime(),p=jindo.$Ajax(l,{type:"jsonp",onload:jindo.$Fn(function(t){var e=t.json();e&&e.result?i():(e.error.errorMessage&&o("\ub124\uc774\ubc84 \uc9c0\ub3c4 Open API \uc778\uc99d\uc774 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4. \ud074\ub77c\uc774\uc5b8\ud2b8 \uc544\uc774\ub514\uc640 \uc6f9 \uc11c\ube44\uc2a4 URL\uc744 \ud655\uc778\ud574 \uc8fc\uc138\uc694.",e.error.errorCode+" / "+e.error.errorMessage),n())},this).bind(),onerror:jindo.$Fn(function(){o("\uc7a0\uc2dc \ud6c4\uc5d0 \ub2e4\uc2dc \uc694\uccad\ud574 \uc8fc\uc138\uc694.","500 / Internal Server Error (\ub0b4\ubd80 \uc11c\ubc84 \uc624\ub958)"),n()},this).bind(),ontimeout:jindo.$Fn(function(){o("\uc7a0\uc2dc \ud6c4\uc5d0 \ub2e4\uc2dc \uc694\uccad\ud574 \uc8fc\uc138\uc694.","500 / Internal Server Error (\ub0b4\ubd80 \uc11c\ubc84 \uc624\ub958)"),n()},this).bind(),callbackname:"callback"});p.request()}},_simulatedMouseEnterLeave:function(){var t=this._elWrap,e=this._elMap,n=null,i=[],o=jindo.$Fn(function(e){if("svg:svg"!=e.element.tagName){e.relatedElement&&"svg:svg"==e.relatedElement.tagName&&(e.relatedElement=t);var n=nhn.mapcore.Util.mapGetParentByClass(e.relatedElement,"_nmap_uid"),i=nhn.mapcore.Util.mapGetParentByClass(e.element,"_nmap_uid");if(i&&(!n||n!==i&&!jindo.$Element(i).isParentOf(n))){var o=nhn.mapcore.Util.mapGetClass(i,"_nmap_uid")&&RegExp.$0,a=nhn.api.map.Map._objectManager._getMapObjectByUID(o);a.fireEvent("mouseenter",{})}}},this),a=jindo.$Fn(function(e){if("svg:svg"!=e.element.tagName){e.relatedElement&&"svg:svg"==e.relatedElement.tagName&&(e.relatedElement=t);var n=nhn.mapcore.Util.mapGetParentByClass(e.element,"_nmap_uid"),i=nhn.mapcore.Util.mapGetParentByClass(e.relatedElement,"_nmap_uid");if(n&&(!i||n!==i&&!jindo.$Element(n).isParentOf(i))){var o=nhn.mapcore.Util.mapGetClass(n,"_nmap_uid")&&RegExp.$0,a=nhn.api.map.Map._objectManager._getMapObjectByUID(o);a.fireEvent("mouseleave",{})}}},this);o.attach(t,"mouseover"),a.attach(t,"mouseout"),this.__fMouseOverSimulator=o,this.__fMouseOutSimulator=a},_bindEvents:function(){this.attach("mousedown",function(t){this._oDupLayer.hide(t)}),this.attach("mouseenter",function(t){if(t.target instanceof nhn.api.map.Marker){var e=t.target,n=e.getElement();nhn.mapcore.Util.mapGetClass(n,"nmap_marker_hover")||nhn.mapcore.Util.mapSetClass(n,"nmap_marker_hover")}}),this.attach("mouseleave",function(t){if(t.target instanceof nhn.api.map.Marker){var e=t.target,n=e.getElement();nhn.mapcore.Util.mapGetClass(n,"nmap_marker_hover")&&nhn.mapcore.Util.mapRemoveClass(n,"nmap_marker_hover")}})},initialMapBoundaryOptionProcess:function(t,e,n){for(var i=t[0].toInner(),o=[i.x,i.y,i.x,i.y],a=1,s=t.length;a<s;a++)i=t[a].toInner(),o[0]=Math.min(o[0],i.x),o[1]=Math.max(o[1],i.y),o[2]=Math.max(o[2],i.x),o[3]=Math.min(o[3],i.y);return this.initialBoundToCenter(o,e,n)},initialBoundToCenter:function(t,e,n){if(t&&t instanceof Array&&4==t.length){var i=new nhn.mapcore.Inner(Math.round((parseInt(t[0],10)+parseInt(t[2],10))/2),Math.round((parseInt(t[1],10)+parseInt(t[3],10))/2)),o=13,a=1;a=n&&void 0!==n.minMaxLevel[0]&&n.minMaxLevel[0]>0?n.minMaxLevel[0]:a,o=n&&void 0!==n.minMaxLevel[1]&&n.minMaxLevel[1]>0?n.minMaxLevel[1]:o;var s=this._findOptimaizedBoundaryLevel(n.size,t,e,a,o);if(e){var r=e[2]-e[0],h=e[3]-e[1],l=48828125e-12*Math.pow(2,s)/2;i.x+=Math.round(r/l/2),i.y-=Math.round(h/l/2)}return{point:i,level:s}}},_findOptimaizedBoundaryLevel:function(t,e,n,i,o){for(var a=parseInt(e[2],10)-parseInt(e[0],10),s=parseInt(e[1],10)-parseInt(e[3],10),r,h,l,p=o;p>=i;p--)if(r=nhn.mapcore.mapSpec.getScale(p),h=(t.width-(n[2]+n[0]))/r,l=(t.height-(n[3]+n[1]))/r,h>a&&l>s)return p;return i},_createMap:function(t){var e=nhn.mapcore,n=nhn.api.map,i="";jindo.$Agent().navigator().mie&&(i="-ms-touch-action:none;");var o=new e.LatLng(37.5675451,126.9773356),a;a="point"in t&&null!=t.point&&"undefined"!=typeof t.point?t.point.copy():o;var s;s="level"in t&&null!=t.level&&"undefined"!=typeof t.level?t.level:11,"zoom"in t&&null!=t.zoom&&"undefined"!=typeof t.zoom&&(s=t.zoom),"setMashup"in t&&(this.useMashup=t.setMashup);var r=this._elWrap,h=this._elMap;if(r.style.padding=0,h.className="nmap",h.style.cssText="margin:0; padding:0; border:0; width:100%; height:100%;"+i,r.appendChild(h),e.Util.mapSetClass(r,"_nmap_mapbox"),"boundary"in t){var l="boundaryOffset"in t?this._fromOffsetValuetoArray(t.boundaryOffset):[0,0,0,0],p=this.initialMapBoundaryOptionProcess(t.boundary,l,t);null!=p&&(a=p.point,s=p.level)}"size"in t&&(r=this._elWrap,h=this._elMap,h.style.width=r.style.width=t.size.width+"px",h.style.height=r.style.height=t.size.height+"px"),"setMobileEvent"in t&&t.setMobileEvent===!1&&(e.mapSpec.touchEnabled=!1);var c=this._oMap=new nhn.husky.HuskyCore({oDebugger:nhn.husky.HuskyMessageLogger?new nhn.husky.HuskyMessageLogger:null});c.registerPlugin(new nhn.husky.CorePlugin),c.registerPlugin(this._getEventConnector());var u={NMap:new e.NMap(h,t.size||{}),Container:new e.Container,MapConfig:new e.MapConfig({point:a.toInner(),zoomLevel:s}),MapCoordConfig:new e.MapCoordConfig,MousePointer:new e.MousePointer,TileManager:new e.TileManager,MapDragger:new e.MapDragger,GhostPane:new e.GhostPane,BaseRealTilePane:new e.BaseRealTilePane,HybridRealTilePane:new e.HybridRealTilePane,TrafficAndBicycleRealTilePane:new e.TrafficAndBicycleRealTilePane,BaseVirtualTilePane:new e.BaseVirtualTilePane,BaseLabelVirtualTilePane:new e.BaseLabelVirtualTilePane,TerrainLabelVirtualTilePane:new e.TerrainLabelVirtualTilePane,StandaloneHybridVirtualTilePane:new e.StandaloneHybridVirtualTilePane,OverlayLabelVirtualTilePane:new e.OverlayLabelVirtualTilePane,TrafficVirtualTilePane:new e.TrafficVirtualTilePane,BicycleVirtualTilePane:new e.BicycleVirtualTilePane,PaneManager:new e.PaneManager,PanEffect:new e.PanEffect,MapDoubleClickManager:new e.MapDoubleClickManager,MapZoomControl:new e.MapZoomControl,CenterMark:new e.CenterMark,ControlManager:new e.ControlManager((!0)),ChangeMapProxy:new e.ChangeMapProxy};if(e.CadastralRealTilePane&&(u.CadastralRealTilePane=new e.CadastralRealTilePane,u.CadastralVirtualTilePane=new e.CadastralVirtualTilePane),n.StreetTilePane&&(n.StreetRealTilePane&&(u.StreetRealTilePane=new n.StreetRealTilePane),u.StreetTilePane=new n.StreetTilePane),this._oPlugins=u,jindo.$H(u).forEach(function(t){c.registerPlugin(t)}),c.exec("ADD_PANE",[new e.DrawingPane]),c.exec("ADD_PANE",[new e.OverlayPane]),c.exec("ADD_PANE",[new e.InfoPane]),1==this.useMashup&&n.AttachedFilter&&n.MashUpPane&&(c.registerPlugin(new n.AttachedFilter),c.exec("ADD_PANE",[new n.MashUpPane])),n.NMapStreetPointer&&c.registerPlugin(new n.NMapStreetPointer),n.Map._objectManager._registerMapObject(this),c.run(),c.exec("ADD_IGNORE_CLASS",["_nmap_diswheel","MOUSEWHEEL"]),c.exec("ADD_IGNORE_CLASS",["_nmap_disdrag","MOUSEDOWN"]),c.exec("ADD_IGNORE_CLASS",["_nmap_disdblclick","DBLCLICK"]),c.exec("ADD_IGNORE_CLASS",["nmap_movable_container","CONTEXTMENU"]),n.PanoramaFacade){var d={map:this};"panoramaCallback"in t&&(d.panoramaCallback=t.panoramaCallback),this._oPanorama=new n.PanoramaFacade(d)}if(this._processOptions(t),n.Footer){var f=new n.Footer;this.addControl(f),f.afteradd()}"enablePinchZoom"in t&&c.enablePinchZoom(t.enablePinchZoom),"enableHDTile"in t&&c.enableHDTile(t.enableHDTile)},enablePinchZoom:function(t){this._oMap&&this._oMap.enablePinchZoom&&this._oMap.enablePinchZoom(t)},enableHDTile:function(t){this._oMap&&this._oMap.enableHDTile&&this._oMap.enableHDTile(t)},_processOptions:function(t){"enableWheelZoom"in t&&this.enableWheelZoom(t.enableWheelZoom),"enableDragPan"in t&&this.enableDragPan(t.enableDragPan),"enableDblClickZoom"in t&&this.enableDblClickZoom(t.enableDblClickZoom),"mapMode"in t&&this.setMapMode(t.mapMode),"activateTrafficMap"in t&&this.activateTrafficMap(t.activateTrafficMap),"activateBicycleMap"in t&&this.activateBicycleMap(t.activateBicycleMap),"activateStreetMap"in t&&this._oPanorama&&this._oPanorama.activateStreetView(),"activateFlightMap"in t&&this.activateFlightMap(),"activateCadastralMap"in t&&this.activateCadastralMap(t.activateCadastralMap),"minMaxLevel"in t&&this.setMinMaxLevel(t.minMaxLevel[0],t.minMaxLevel[1]),"center"in t&&this.setCenter(t.center),"detectCoveredMarker"in t&&(this.bDetectCoveredMarker=t.detectCoveredMarker)},_doZoom:function(t,e,n,i,o){n=this._processZoomOptions(n),n.moveCenter=i,n.relativeLevel=o,this._oMap.exec("ZOOM",[t,e?e.toInner():null,n])},_processZoomOptions:function(t){t=t||{};var e={useEffect:!1,centerMark:!1};return"useEffect"in t&&(e.useEffect=!!t.useEffect),"centerMark"in t&&(e.centerMark=!!t.centerMark),e},_getEventConnector:function(){var t=this,e=this._oMap;return{$BEFORE_CONTEXTMENU_EVENT_DONE:function(e){return t._fpFire(e,"contextmenu"),!1},$BEFORE_TOUCHSTART_EVENT_DONE:function(e){return 1==nhn.mapcore.mapSpec.getMobileMap()&&void t._fpFire(e,"touchstart")},$BEFORE_TOUCHMOVE_EVENT_DONE:function(e){return 1==nhn.mapcore.mapSpec.getMobileMap()&&void t._fpFire(e,"touchmove")},$BEFORE_TOUCHEND_EVENT_DONE:function(e){return 1==nhn.mapcore.mapSpec.getMobileMap()&&void t._fpFire(e,"touchend")},$BEFORE_GESTURESTART_EVENT_DONE:function(e){return 1==nhn.mapcore.mapSpec.getMobileMap()&&void t.fireEvent("gesturestart",e)},$BEFORE_GESTURECHANGE_EVENT_DONE:function(e){return 1==nhn.mapcore.mapSpec.getMobileMap()&&void t.fireEvent("gesturechange",e)},$BEFORE_GESTUREEND_EVENT_DONE:function(e){return 1==nhn.mapcore.mapSpec.getMobileMap()&&void t.fireEvent("gestureend",e)},$ON_MOUSEMOVE_EVENT_DONE:function(e){t._fpFire(e,"mousemove")},$ON_DBLCLICK_EVENT_DONE:function(e){t._fpFire(e,"dblclick")},$ON_CLICK_EVENT_DONE:function(e){t._fpFire(e,"click",function(e,n){if((e instanceof nhn.api.map.Marker||e instanceof nhn.api.map.SpriteMarker||nhn.api.map.FlightMarker&&e instanceof nhn.api.map.FlightMarker)&&t.bDetectCoveredMarker){var i=e.getCoveredMarkers();if(i.length>1){var o=t._oMap.getDragOffset(),a=t._oMap.getMapSize(),s={left:-o.x,top:-o.y};s.right=s.left+a.width,s.bottom=s.top+a.height,t._oDupLayer.setMarkers(i),t._oDupLayer.show(e,s),n.clickCoveredMarker=!0}}})},$ON_MOUSEWHEEL_EVENT_DONE:function(e){t._oPlugins.MapZoomControl.setUseEffectInWheelZoom(t.useEffectInWheelZoom),t._oPlugins.MapZoomControl.setUseCenterMarkInWheelZoom(t.useCenterMarkInWheelZoom),t._fpFire(e,"mousewheel")},$ON_MOUSEDOWN_EVENT_DONE:function(e){t._oPlugins.MapDragger.setMoveEventThreshold(t.moveMapThresholdPixel),t._fpFire(e,"mousedown")},$ON_MOUSEUP_EVENT_DONE:function(e){t._fpFire(e,"mouseup")},$ON_BEGIN_DRAG_DONE:function(e){t._fpFire(e,"dragstart")},$AFTER_END_DRAG_DONE:function(e,n){n>=t.moveMapThresholdPixel&&t._fpFire(e,"dragend")},$ON_ZOOM_MAP_END_DONE:function(){var e=t._zoomInfo;e&&t.fireEvent("zoom",{fromLevel:e.fromLevel,toLevel:e.toLevel,point:e.point.copy()})},$ON_SET_CENTER_POINT:function(e){t.fireEvent("move",{center:fpOpenAPIDefaultConv(e)})},$BEFORE_ZOOM:function(n,i,o){var a=t.getMinMaxLevel(),s=a[0],r=Math.min(a[1],this.oApp.getMaxLimitLevel()),h=e.getZoomLevel();n=n||h,o.relativeLevel&&(n=h+n),t._zoomInfo={fromLevel:Math.max(s,Math.min(r,h)),toLevel:Math.max(s,Math.min(r,n)),point:i||e.getCenterPoint()},t._oDupLayer.hide()},$ON_REGISTER_OPENAPI_MAPOBJECT:function(t){nhn.api.map.Map._objectManager._registerMapObject(t)},$ON_UNREGISTER_OPENAPI_MAPOBJECT:function(t){nhn.api.map.Map._objectManager._unregisterMapObject(t)},$BEFORE_BEGIN_DRAG_DONE:function(){return t.isDragPanEnabled()},$BEFORE_MOUSEWHEEL_MAP_DONE:function(){if(!t.isWheelZoomEnabled())return!1},$ON_LOAD_VECTOR_PANE:function(){nhn.mapcore.Util.mapRemoveClass(t._elWrap,"nmap_s_active")},$ON_LOAD_HYBRID_PANE:function(){nhn.mapcore.Util.mapSetClass(t._elWrap,"nmap_s_active")},$ON_LOAD_SATELLITE_PANE:function(){nhn.mapcore.Util.mapSetClass(t._elWrap,"nmap_s_active")},$ON_ADD_CONTROL:function(e){e.onadd(t)},$ON_REMOVE_CONTROL:function(t){t.onremove()}}},_fpFire:function(t,e,n){var i=t.element;if(!this._oDupLayer._isParentOf(i)){"svg:svg"==i.tagName&&(i=i.parentNode.parentNode);var o=this._getEventOccuredPoint(t),a=nhn.mapcore.Util.mapGetParentByClass(i,"_nmap_uid")&&RegExp.$0,s=a?nhn.api.map.Map._objectManager._getMapObjectByUID(a):this,r={event:t,point:o};"function"==typeof n&&n(s,r),s.fireEvent(e,r)}},_getEventOccuredPoint:function(t){var e=t.pos(),n=this._oMap,i=n.getOffset({x:e.pageX,y:e.pageY});return fpOpenAPIDefaultConv(n.getOffsetToPoint(i))},getElement:function(){return this._elWrap},getMapElement:function(){return this._elMap},setBound:function(t,e,n){for(var i=t[0].toInner(),o=[i.x,i.y,i.x,i.y],a=1,s=t.length;a<s;a++)i=t[a].toInner(),o[0]=Math.min(o[0],i.x),o[1]=Math.max(o[1],i.y),o[2]=Math.max(o[2],i.x),o[3]=Math.min(o[3],i.y);this._oMap.exec("BOUND_TO_CENTER",[o,{offset:this._fromOffsetValuetoArray(n)},e])},_fromOffsetValuetoArray:function(t){var e;if(t&&t.length){e=[];for(var n=0,i=t.length;n<i;n++)e.push(this._getNum(t[n]))}else{var o=this._getNum(t);e=[o,o,o,o]}return e},_getNum:function(t){return t=parseInt(t,10),isNaN(t)?0:t},getBound:function(){var t=this._oMap.getBoundPoint(),e=[fpOpenAPIDefaultConv(new nhn.api.map.Inner(t.left+1,t.top-1)),fpOpenAPIDefaultConv(new nhn.api.map.Inner(t.right-1,t.bottom+1))];return e},setCenter:function(t,e){this._doZoom(null,t,e,!0,!1)},setCenterBy:function(t,e,n){var i=this.getCenter().toInner().copy(),o=this.getLevel(),a=48828125e-12*Math.pow(2,o)/2;i.x+=Math.round(t/a),i.y-=Math.round(e/a),this.setCenter(i,n)},getCenter:function(){return fpOpenAPIDefaultConv(this._oMap.getCenterPoint().copy())},setLevel:function(t,e){nhn.mapcore.mapSpec.getMobileMap()&&(e=this.setMobileDefaultZoomOptions(e)),this._doZoom(t,null,e,!1,!1)},setLevelBy:function(t,e){nhn.mapcore.mapSpec.getMobileMap()&&(e=this.setMobileDefaultZoomOptions(e)),this._doZoom(t,null,e,!1,!0)},setMobileDefaultZoomOptions:function(t){var e=null;return e=null!=t&&"undefined"!=typeof t&&t!={}?t:{useEffect:!0,centerMark:!1}},setPointLevel:function(t,e,n){this._doZoom(e,t,n,!1,!1)},setPointLevelBy:function(t,e,n){this._doZoom(e,t,n,!1,!0)},setCenterAndLevel:function(t,e,n){this._doZoom(e,t,n,!0,!1)},setCenterAndLevelBy:function(t,e,n){this._doZoom(e,t,n,!0,!0)},getLevel:function(){return this._oMap.getZoomLevel()},setMapMode:function(t){var e=this.getMapMode(),n=["LOAD_VECTOR_PANE","LOAD_HYBRID_PANE","LOAD_SATELLITE_PANE","LOAD_TERRAIN_PANE"];if(1==t){if(this._oMap.exec(n[2]),this._oMap.isActiveMapType("hybrid"))return}else 2==t&&this._oMap.isActiveMapType("hybrid")&&this._oMap.exec("UNLOAD_HYBRID_PANE");this._oMap.exec(n[t]);var i=this.getMapMode();e!==i&&this.fireEvent("changeMapMode",{mode:i})},getMapMode:function(){return this._oMap.isActiveMapType("vector")?0:this._oMap.isActiveMapType("terrain")?3:this._oMap.isActiveMapType("hybrid")?1:2},activateTrafficMap:function(t){this.isTrafficMapActivated()^t&&(this._oMap.exec("LOAD_TRAFFIC_PANE"),this.fireEvent("changeThemeMap",{theme:"traffic",isActivated:this.isTrafficMapActivated()}))},isTrafficMapActivated:function(){return!!this._oMap.isActiveMapType("traffic")},activateBicycleMap:function(t){this.isBicycleMapActivated()^t&&(this._oMap.exec("LOAD_BICYCLE_PANE"),this.fireEvent("changeThemeMap",{theme:"bicycle",isActivated:this.isBicycleMapActivated()}))},isBicycleMapActivated:function(){return!!this._oMap.isActiveMapType("bicycle")},activateRealtyMap:function(t){},isRealtyMapActivated:function(){},activateCadastralMap:function(t){var e=location.hostname,n="naver.com";e.length>=n.length&&e.substr(e.length-n.length)==n&&this.isCadastralMapActivated()^t&&(this._oMap.exec("LOAD_CADASTRAL_PANE"),this.fireEvent("changeThemeMap",{theme:"cadastral",isActivated:this.isCadastralMapActivated()}))},isCadastralMapActivated:function(){var t=location.hostname;if(safeDomain="naver.com",t.length>=safeDomain.length&&t.substr(t.length-safeDomain.length)==safeDomain)return!!this._oMap.isActiveMapType("cadastral")},activateStreetMap:function(){this._oPanorama&&(this._oPanorama.activateStreetView(),this.fireEvent("activateStreetMap"))},deactivateStreetMap:function(){this._oPanorama&&(this._oPanorama.deactivateStreetView(),this.fireEvent("deactivateStreetMap"))},isStreetMapActivated:function(){return!!this._oPanorama&&this._oPanorama.isStreetViewActivated()},activateFlightMap:function(){this._oPanorama&&(this._oPanorama.activateFlightView(),this.fireEvent("activateFlightMap"))},deactivateFlightMap:function(){this._oPanorama&&(this._oPanorama.deactivateFlightView(),this.fireEvent("deactivateFlightMap"))},isFlightMapActivated:function(){return!!this._oPanorama&&this._oPanorama.isFlightViewActivated()},setPanoramaCallback:function(t){this._oPanorama&&this._oPanorama.option("panoramaCallback",t)},activateStreetMapPointer:function(t){t?this._oMap.exec("START_STREET_POINTER"):this._oMap.exec("END_STREET_POINTER")},loadAndUnloadStreetPane:function(t){var e=this._oMap.isActiveMapType("street");e^t&&(this._oMap.exec("LOAD_STREET_PANE"),this.fireEvent("changeThemeMap",{theme:"street",isActivated:e}),this.activateStreetMapPointer(t))},setMinMaxLevel:function(t,e){var n=this.getMinMaxLevel();this._oMap.exec("SET_MIN_MAX_LEVEL",[t,e]);var i=this.getMinMaxLevel();n.join("")!=i.join("")&&this.fireEvent("changeMinMaxLevel",{minLevel:i[0],maxLevel:i[1]})},getMinMaxLevel:function(){return this._oMap.getMinMaxLevel()},setSize:function(t){if(!(t instanceof nhn.api.map.Size))throw new Error("Should be a instance of nhn.api.map.Size");var e=this.getSize();if(e.width!=t.width||e.height!=t.height){var n=this._elWrap;n.style.width=t.width+"px",n.style.height=t.height+"px",this._oMap.exec("SET_MAP_SIZE",[t.width,t.height]),this.fireEvent("resize",{size:t})}},getSize:function(){var t=this._elMap;return new nhn.api.map.Size(parseFloat(t.style.width),parseFloat(t.style.height))},redraw:function(){for(var t=this._oPlugins,e=[t.DefaultTilePane,t.HybridTilePane,t.TrafficTilePane,t.PaneManager],n=0,i=e.length;n<i;n++)e[n]&&e[n].redraw&&e[n].redraw()},addOverlay:function(t){this._oMap.getPane(t.matchedClass||"nmap_overlay_pane").addOverlay(t)},removeOverlay:function(t){this._oMap.getPane(t.matchedClass||"nmap_overlay_pane").removeOverlay(t)},clearOverlay:function(){var t=this._oMap.getOverlayablePaneLists();jindo.$H(t).forEach(function(t,e){t.clearOverlay()})},addControl:function(t){this._oMap.exec("ADD_CONTROL",[t])},removeControl:function(t){this._oMap.exec("REMOVE_CONTROL",[t])},addPane:function(t){this._oMap.exec("ADD_PANE",[t])},removePane:function(t){this._oMap.exec("REMOVE_PANE",[t])},reloadTraffic:function(){this._oMap.exec("REFRESH_TRAFFIC_PANE"),this.fireEvent("reloadTraffic",{})},setUseEffectInWheelZoom:function(t){this.useEffectInWheelZoom=t},getUseEffectInWheelZoom:function(){return this.useEffectInWheelZoom},setUseCenterMarkInWheelZoom:function(t){this.useCenterMarkInWheelZoom=t},getUseCenterMarkInWheelZoom:function(){return this.useCenterMarkInWheelZoom},setMoveMapThresholdPixel:function(t){this.moveMapThresholdPixel=t},getMoveMapThresholdPixel:function(t){return this.moveMapThresholdPixel},setMashUpData:function(t,e,n){if(1!=this.useMashup)return void alert("mashup pane is not loaded. set setMashup option value true in Map Creation options");this.dontPanningInMashup=n;var i=jindo.$Ajax(this.MASHUP_API_URL,{type:"jsonp",onload:jindo.$Fn(function(t){if(this.oData=t.json(),this.oData&&0==this.oData.del){if(this.setMashUpDataToMap(this.oData,this.dontPanningInMashup),e){var n=document.getElementById(e);n.innerHTML=this.oData.address}}else alert("mashup error - json request fail")},this).bind(),onerror:jindo.$Fn(function(){alert("mashup error - json request error")},this).bind(),ontimeout:jindo.$Fn(function(){alert("mashup error - json timeout")},this).bind(),callbackid:"mashup",callbackname:"callback",jsonp_charset:"euc-kr"});i.request({mid:t,type:"json"})},setMashUpDataToMap:function(t,e){if(!e||0==e){var n=nhn.api.map.CompatibleCoordConverter.fromTM128ToInner(new nhn.mapcore.TM128(t.centerX,t.centerY));this.setCenterAndLevel(n,t.dzoomLevel,{useEffect:!0,useCenterMark:!1})}this._oMap.exec("LOAD_MASHUP_OBJS",[t])}}),nhn.api.map.Map._nevent={attachEvent:function(t,e,n,i){var o={IE:!(!window.attachEvent||window.opera),IE6:navigator.userAgent.match("MSIE 5.5|MSIE 6"),Opera:!!window.opera,FF:navigator.userAgent.indexOf("Firefox")>-1,Chrome:navigator.userAgent.indexOf("Chrome")>-1,Safari:navigator.userAgent.indexOf("Safari")>-1&&!this.Chrome};i=i||!1;var a=function(){var t=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t=!0}}))}catch(e){}return t}(),s=a?{capture:i,passive:!1}:i;o.FF?(e="mousewheel"==e?"DOMMouseScroll":e,t.addEventListener(e,n,s)):o.Chrome||o.Safari?t.addEventListener(e,n,s):o.IE||o.Opera?t.attachEvent("on"+e,n):t["on"+e]=n},createAdapter:function(t,e){return function(n){n||(n=window.event),n&&!n.target&&(n.target=n.srcElement),e.call(t,n)}},attachDom:function(t,e,n,i){var o;return o=nhn.api.map.Map._nevent.createAdapter(n,i),nhn.api.map.Map._nevent.attachEvent(t,e,o),o}},nhn.api.map.Map._objectManager={_registedObjects:{},_getMapUIDByElement:function(t){return nhn.mapcore.Util.mapGetClass(t,"_nmap_uid")&&RegExp.$0},_getMapObjectByElement:function(t){return this._getMapObjectByUID(this._getMapUIDByElement(t))},_getMapObjectByUID:function(t){return this._registedObjects[t]},_registerMapObject:function(t){var e=t.getElement();if(e instanceof Array)return t;var n=this._getMapUIDByElement(e);return n||(n="n"+parseInt(Math.random()*(new Date).getTime(),10),nhn.mapcore.Util.mapSetClass(e,"_nmap_uid",[n])),this._registedObjects[n]=t,t},_unregisterMapObject:function(t){var e=t.getElement(),n=this._getMapUIDByElement(e);n&&delete this._registedObjects[n]}},nhn.api.map.setEasyConvention=function(sPrefix){var aCodes=[];sPrefix=sPrefix||"N",jindo.$H(nhn.api.map).forEach(function(t,e){aCodes.push(sPrefix+e+" = nhn.api.map."+e+";")}),eval(aCodes.join("\n"))};var sOpenAPIDefaultPoint="toLatLng",fpOpenAPIDefaultConv=function(t){return t?t[sOpenAPIDefaultPoint]():null};nhn.api.map.setDefaultPoint=function(t){var e={LATLNG:"LatLng",INNER:"Inner",TM128:"TM128",UTMK:"UTMK"},n=(t||"LatLng").toUpperCase();sOpenAPIDefaultPoint="to"+(e[n]||"LatLng")},nhn.mapcore.Util.extend(nhn.api.map.Map.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.Inner=nhn.mapcore.Inner,nhn.api.map.UTMK=nhn.mapcore.UTMK,nhn.api.map.TM128=nhn.mapcore.TM128,nhn.api.map.LatLng=nhn.mapcore.LatLng,nhn.api.map.OverlayablePane=nhn.mapcore.AbstractOverlayablePane,nhn.mapcore.Util.extend(nhn.api.map.OverlayablePane.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.Size=function(t,e){this.width=t,this.height=e},nhn.api.map.Icon=function(t,e,n){this.src=t,this.size=e,n?this.offset=n:this.offset=new nhn.api.map.Size(e.width/2,e.height/2)},nhn.api.map.Marker=function(){"function"==typeof this.$init&&this.$init.apply(this,arguments)},nhn.api.map.Marker.prototype={matchedClass:"nmap_overlay_pane",$init:function(t,e){var n=nhn.mapcore.Util.fillOptions(e,{title:"",point:null,zIndex:null,smallSrc:null});this._elEl=document.createElement("img"),this._elEl.className="_nmap_marker nmap_png",this._elEl.style.cssText="position:absolute; cursor:pointer; _cursor:hand; overflow:hidden; margin:0; padding:0; border:0;max-width:none;max-height:none;"+(n.cssText||""),this._elEl.alt="",this._oPoint=null,this.setIcon(t),null!==n.point&&this.setPoint(n.point),null!==n.zIndex&&this.setZIndex(n.zIndex),null!==n.smallSrc&&this.setSmallSrc(n.smallSrc),this._sTitle=n.title},_setMarkerImage:function(){var t=this._elEl.style,e=this._oIcon;this._elEl.width=e.size.width,this._elEl.height=e.size.height,t.width=e.size.width+"px",t.height=e.size.height+"px",t.marginLeft=-e.offset.width+"px",t.marginTop=-e.offset.height+"px",this._setImageSrc(this._elEl,e.src)},_setImageSrc:function(t,e){t.src=e,nhn.mapcore.Util.setPNGImage(t)},setSmallSrc:function(t){this._smallSrc=t},getSmallSrc:function(){return this._smallSrc||null},setIcon:function(t){this._oIcon=t,this._setMarkerImage()},getIcon:function(){return this._oIcon},setTitle:function(t){this._sTitle=t},getTitle:function(){return this._sTitle},setPoint:function(t){return this._oPoint=t.copy(),this.redraw(),this},getPoint:function(){return fpOpenAPIDefaultConv(this._oPoint&&this._oPoint.copy())},setZIndex:function(t){return this._elEl.style.zIndex=t,this},getZIndex:function(){return 1*jindo.$Element(this._elEl).css("zIndex")||0},setVisible:function(t){var e=this.getVisible(),t=!!t;this._elEl.style.display=t?"":"none",e!=t&&this.fireEvent("changeVisible",{visible:t})},getVisible:function(){return"none"!==this._elEl.style.display},_getBound:function(t){t=t||this._elEl;var e={left:parseFloat(t.style.left)+parseFloat(t.style.marginLeft),top:parseFloat(t.style.top)+parseFloat(t.style.marginTop)};return e.right=e.left+t.clientWidth,e.bottom=e.top+t.clientHeight,e},_isCover:function(t){if("none"==t.style.display)return!1;var e=this._elEl,n=1;if(1*e.style.zIndex<1*t.style.zIndex)return!1;var i=this._getBound(),o=this._getBound(t);return i.left-n<=o.left&&i.top-n<=o.top&&o.right<=i.right+n&&o.bottom<=i.bottom+n},isMarker:function(){return!0},getCoveredMarkers:function(){for(var t=jindo.$$("! .nmap_movable_container ._nmap_marker",this._elEl),e=[],n=0,i;i=t[n];n++)this._isCover(i)&&e.push(nhn.api.map.Map._objectManager._getMapObjectByElement(i));return e},getElement:function(){
return this._elEl},onadd:function(t){this._oParent=t,nhn.api.map.Map._objectManager._registerMapObject(this),this.redraw()},onremove:function(){nhn.api.map.Map._objectManager._unregisterMapObject(this)},redraw:function(){if(this._oParent){var t=this.getPoint();if(t){var e=this._oParent.fromPointToOffset(t.toInner());this._elEl.style.top=e.y+"px",this._elEl.style.left=e.x+"px"}}},destroy:function(){this.onremove()}},nhn.mapcore.Util.extend(nhn.api.map.Marker.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.MarkerLabel=jindo.$Class({matchedClass:"nmap_info_pane",aSkins:['<div class="nmap_lay_htype1"><span class="nmap_lay_c"><span>{CONTENT}</span></span><span class="nmap_lay_r"></span></div>','<div><p class="nmap_lay_msg3">{CONTENT}</p></div>'],sDupMarkerTemplate:"<strong>{NUM}</strong>\uac1c\uc758 \uacb0\uacfc\uac00 \uc788\uc2b5\ub2c8\ub2e4.",nSkinNo:0,sText:"",verticalSpace:0,horizontalSpace:3,bDetectCoveredMarker:!0,$init:function(t){var t=t||{};this._createElement(),this.setSkin(0),"detectCoveredMarker"in t&&(this.bDetectCoveredMarker=t.detectCoveredMarker)},_createElement:function(){this._elWrap=jindo.$("<div>"),this._elWrap.style.cssText="position:absolute; left:0; top:0; visibility:hidden; display:none; border:0; margin:0; padding:0;"},setVisible:function(t){var e=this.getVisible(),t=!!t;if(t){var n=arguments[1];this.lastMarker=n;var i,o=!1;this.bDetectCoveredMarker&&(i=n.getCoveredMarkers(),o=i.length>1),o?this._setText(this.sDupMarkerTemplate.replace("{NUM}",i.length)):this._setText(n.getTitle());var a=o?"mapSetClass":"mapRemoveClass";nhn.mapcore.Util[a](jindo.$$.getSingle("> *",this._elWrap),"nmap_lay_duppin"),this._elWrap.style.visibility="hidden",this._elWrap.style.display="block",this.setPosition(!0),this._elWrap.style.visibility="visible"}else this._elWrap.style.display="none",this.lastMarker=null;e!=t&&this.fireEvent("changeVisible",{visible:t})},getVisible:function(){return"none"!=this._elWrap.style.display},setPosition:function(t,e,n){null==e||"undefined"==typeof e||isNaN(parseInt(e))?this.horizontalSpace=3:this.horizontalSpace=e,null==n||"undefined"==typeof n||isNaN(parseInt(n))?this.verticalSpace=0:this.verticalSpace=n;var i=this._oPane;if(i){var o=this.lastMarker;if(o){var a=[0,0],s=o.getIcon(),r=this.boxSize;if(t){var h=jindo.$$.getSingle("> *",this._elWrap);r=this.boxSize=[h.offsetWidth,h.offsetHeight]}s instanceof nhn.api.map.SpriteIcon?(a[0]+=s.width-s.getOffset().width+this.horizontalSpace,a[1]-=s.getOffset().height+this.verticalSpace):(a[0]+=s.size.width-s.offset.width+this.horizontalSpace,a[1]-=s.offset.height+this.verticalSpace);var l=i._makeRangeVisible(o.getPoint(),r,a,!0),p=i.fromPointToOffset(o.getPoint().toInner()),c=0;l.x>0&&(c=s instanceof nhn.api.map.SpriteIcon?-r[0]-s.width-2*this.horizontalSpace:-r[0]-s.size.width-2*this.horizontalSpace),this._elWrap.style.left=p.x+a[0]+c+"px",this._elWrap.style.top=p.y+a[1]+"px"}}},getPosition:function(){return{verticalSpace:this.verticalSpace,horizontalSpace:this.horizontalSpace}},_setText:function(t){this.sText=t,this._elWrap.innerHTML=this.aSkins[this.getSkin()].replace("{CONTENT}",t)},setSkin:function(t){var e=this.aSkins[t];e&&(this.nSkinNo=t,this._setText(this.sText)),this.setPosition(!0,this.horizontalSpace,this.verticalSpace)},getSkin:function(){return this.nSkinNo},onadd:function(t){this._oPane=t,nhn.api.map.Map._objectManager._registerMapObject(this)},onremove:function(){nhn.api.map.Map._objectManager._unregisterMapObject(this)},destroy:function(){this.onremove()},redraw:function(){this.setPosition(!1,this.horizontalSpace,this.verticalSpace)},getElement:function(){return this._elWrap}}),nhn.mapcore.Util.extend(nhn.api.map.MarkerLabel.prototype,nhn.api.map.MapObject.prototype);var MarkerDupLayer=jindo.$Class({matchedClass:"nmap_info_pane",_oOpenMap:null,$init:function(t){this._oOpenMap=t,this._oPoint=new nhn.api.map.Inner(0,0),this._elEl=jindo.$(['<div class="nmap_duplayer nmap_openapi_duplayer" style="padding:0; margin:0; position:absolute; z-index:999; display:none; visibility:hidden;">','<div class="nmap_lay_int_duppin" style="position:relative; display:block;">','<div class="nmap_int_duppin_content">','<div class="nmap_scroll">','<ul class="_nmap_group">',"</ul>","</div>","</div>","</div>","</div>"].join("\n")),this._elWrap=jindo.$$.getSingle(".nmap_lay_int_duppin",this._elEl),this._elGroup=jindo.$$.getSingle("._nmap_group",this._elEl),this._onClick=jindo.$Fn(function(t){var e=nhn.mapcore.Util.mapGetParentByClass(t.element,"_nmap_uid_dup")&&RegExp.$0;e&&(t.element=nhn.api.map.Map._objectManager._getMapObjectByUID(e).getElement(),this._oOpenMap._fpFire(t,"click"),this.hide(),t.stop(jindo.$Event.CANCEL_DEFAULT))},this),this.enableDragPan(!1),this.enableWheelZoom(!1),this.enableDblClickZoom(!1)},getElement:function(){return this._elEl},_isParentOf:function(t){return jindo.$Element(this._elEl).isParentOf(t)},show:function(t,e){var n=t.getIcon();this.setPoint(t.getPoint()),this._elEl.style.display="block";var i;i=t instanceof nhn.api.map.SpriteMarker?{left:parseInt(this._elEl.style.left)-n.getOffset().width+n.width,top:parseInt(this._elEl.style.top)-n.getOffset().height}:{left:parseInt(this._elEl.style.left)-n.offset.width+n.size.width,top:parseInt(this._elEl.style.top)-n.offset.height},i.right=i.left+this._elEl.offsetWidth,i.bottom=i.top+this._elEl.offsetHeight;var o={x:0,y:0};i.right>e.right&&(t instanceof nhn.api.map.SpriteMarker?o.x=-this._elEl.offsetWidth-n.width:o.x=-this._elEl.offsetWidth-n.size.width),i.bottom>e.bottom&&(o.y=-this._elEl.offsetHeight),this._elEl.style.left=i.left+o.x+"px",this._elEl.style.top=i.top+o.y+"px",this._elEl.style.visibility="visible",this._currentMarker=t},hide:function(t){if(t){var e=t.event.element,n=t.target,i=e===this._elEl||jindo.$Element(this._elEl).isParentOf(e);if(n===this._currentMarker||i)return}this._elEl.style.visibility="hidden",this._elEl.style.display="none",this._currentMarker=null},setMarkers:function(t){for(var e=[],n=this._elGroup,i=!1,o=0,a;a=t[o];o++){var s=a.getIcon(),r=a.getTitle()||"",h={x:16,y:16},l=null,p={x:0,y:0},c=s.src;i=!1,a.getSmallSrc()?(c=a.getSmallSrc(),i=!0):a instanceof nhn.api.map.SpriteMarker?(h.x=s.width,h.y=s.height,l={x:s.spriteWidth||h.x,y:s.spriteHeight||h.y},h.x>h.y?(h.y*=16/h.x,h.x=16,l.y*=16/l.x,l.x=16):(h.x*=16/h.y,h.y=16,l.x*=16/l.y,l.y=16),p.x=Math.round((16-h.x)/2),p.y=Math.round((16-h.y)/2)):(h.x=s.size.width,h.y=s.size.height,h.x>h.y?(h.y*=16/h.x,h.x=16):(h.x*=16/h.y,h.y=16),p.x=Math.round((16-h.x)/2),p.y=Math.round((16-h.y)/2),h.x=Math.round(h.x),h.y=Math.round(h.y));var u=nhn.api.map.Map._objectManager._getMapUIDByElement(a.getElement()),d=a.getSmallSrc();if(a instanceof nhn.api.map.SpriteMarker&&!i){var f=Math.ceil(h.x),m=Math.ceil(h.y),_=Math.round(-1*h.x*a.getIcon().imgOrder),g="";l&&(16===l.x?g='width="16"':16===l.y&&(g='height="16"')),e.push(['<li class="ellipsis">',"<div>",'<span class="nmap_sym_map3">','<div class="_nmap_marker nmap_png" style="position:absolute;overflow:hidden;width:'+f+"px;height:"+m+'px;cursor:pointer;">',"<img "+g+'" src="'+a.getIcon().url+'" alt="" style="position: absolute; left: '+_+'px; top: 0px;max-width:none;max-height:none;"/>',"</div>","</span>",'<a href="#" class="_nmap_uid_dup('+u+')">'+r+"</a>","</div>","</li>"].join(""))}else if(d&&a.getImageOrder){var v=a.getSmallSrc(),y=a.getImageOrder(),E=0,T=0,g="";"number"==typeof y?E=v.width*-1*y:(E=v.width*-1*y.x,T=v.height*-1*y.y),g=v.spriteWidth>v.spriteHeight?'height="'+v.spriteHeight+'"':'width="'+v.spriteWidth+'"',e.push(['<li class="ellipsis">',"<div>",'<span class="nmap_sym_map3">','<div class="_nmap_marker nmap_png" style="position:absolute;overflow:hidden;width:',Math.ceil(v.width),"px;height:",Math.ceil(v.height),'px;cursor:pointer;">',"<img "+g+' src="',v.url,'" style="position: absolute; left: ',Math.round(E),"px; top:",Math.round(T),'px;max-width:none;max-height:none;"/>',"</div>","</span>",'<a href="#" class="_nmap_uid_dup('+u+')">'+r+"</a>","</div>","</li>"].join(""))}else e.push(['<li class="ellipsis">',"<div>",'<span class="nmap_sym_map3">','<img class="nmap_png" src="'+c+'" alt="'+r+'" alt="'+r+'"',' style="left:0; margin-top:'+p.y+"px; margin-left:"+p.x+"px; width:"+h.x+"px; height : "+h.y+'px;max-width:none;max-height:none;" />',"</span>",'<a href="#" class="_nmap_uid_dup('+u+')">'+r+"</a>","</div>","</li>"].join("")),i=!1}nhn.mapcore.Util[t.length>=8?"mapSetClass":"mapRemoveClass"](this._elWrap,"nmap_lay_int_duppin_scroll"),n.innerHTML=e.join("");for(var M=jindo.$$("img.nmap_png",n),o=0,b;b=M[o];o++)nhn.mapcore.Util.setPNGImage(b)},setPoint:function(t){return this._oPoint=t,this.redraw(),this},getPoint:function(){return this._oPoint},onadd:function(t){this._oParent=t,this._onClick.attach(this._elEl,"click")},onremove:function(){this._onClick.detach(this._elEl,"click")},destroy:function(){this.onremove()},redraw:function(){var t=this._oParent.fromPointToOffset(this.getPoint().toInner());this._elEl.style.left=t.x+"px",this._elEl.style.top=t.y+"px"}});nhn.mapcore.Util.extend(MarkerDupLayer.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.AbstractCommonControl=jindo.$Class({getPosition:function(){return new Function("return {"+this.oOptions.hPosition+":"+this.oOptions.hMargin+","+this.oOptions.vPosition+":"+this.oOptions.vMargin+"}")()},setPosition:function(t){for(var e=["top","bottom","left","right"],n=0;n<e.length;n++){var i=e[n];if("undefined"!=typeof t[i])switch(i){case"top":case"bottom":this.oOptions.vPosition=i,this.oOptions.vMargin=t[i];break;case"left":case"right":this.oOptions.hPosition=i,this.oOptions.hMargin=t[i]}}this._updatePosition()},_updatePosition:function(){var t=this.getElement();t.style.top="top"===this.oOptions.vPosition?this.oOptions.vMargin+"px":"",t.style.bottom="bottom"===this.oOptions.vPosition?this.oOptions.vMargin+"px":"",t.style.left="left"===this.oOptions.hPosition?this.oOptions.hMargin+"px":"",t.style.right="right"===this.oOptions.hPosition?this.oOptions.hMargin+"px":""},_fillPosition:function(t){this.setPosition(t),this.setPosition(this.oOptions.position)}}),nhn.mapcore.Util.extend(nhn.api.map.AbstractCommonControl.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.ZoomControl=jindo.$Class({oTemplate:nhn.mapcore.Template.get(['<div class="nmap_scaler nmap_scaler_s13 nmap_scaler_re nmap_scaler_left" style="top: 10px; bottom: auto; left: 10px; right: auto; height: 189px; ">','<div class="nmap_ctr_zoom" style="height: 189px; left: 0px; ">','<div class="nmap_slider" style="height: 144px; ">','<div class="nmap_ctr_scale_on" style="height: 144px; "></div>',"<!-- nmap_ctr_scale_off height max \ub808\ubca8:9px, \uac04\uaca9 10px -->",'<div class="nmap_ctr_scale_off" style="height:9px;"></div>',"<!-- ctr_level top max \ub808\ubca8:9px, \uac04\uaca9 10px -->",'<div class="nmap_slider-thumb" style="top:9px;" title=""><img class="nmap_on" src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="18" height="15" alt=""></div>',"</div>",'<div class="nmap_ctr_plus"><a href="#"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="24" height="24" alt="\ud655\ub300">\ud655\ub300</a></div>',"<!-- \uc774\ubbf8\uc9c0 \uc0ac\uc774\uc988 \ubcc0\uacbd -->",'<div class="nmap_ctr_minus" style="top: 163px; "><a href="#"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="24" height="26" alt="\ucd95\uc18c">\ucd95\uc18c</a></div>',"</div>","<!--","\ub3d9\uc801\uc73c\ub85c \ubcc0\uacbd\ub418\ub294 class","nmap_scaler_m(1-13)\t\t\t\t\t\t\t: \uc124\uc815 \uac00\ub2a5\ud55c \ucd5c\ub300 \ub808\ubca8","-->",'<div class="nmap_ctr_legend nmap_scaler_m13" style="height: 135px; left: 22px; ">','<div class="nmap_ctr_legend1"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="36" height="15" alt="\ubd80\ub3d9\uc0b0"></div>','<div class="nmap_ctr_legend2"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="36" height="15" alt="\uac70\ub9ac"></div>','<div class="nmap_ctr_legend3"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="36" height="15" alt="\uc74d.\uba74.\ub3d9"></div>','<div class="nmap_ctr_legend4"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="36" height="15" alt="\uc2dc.\uad70.\uad6c"></div>','<div class="nmap_ctr_legend5"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="36" height="15" alt="\uc2dc.\ub3c4"></div>','<div class="nmap_ctr_legend6"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="36" height="15" alt="\uad6d\uac00"></div>',"</div>","</div>"].join("")),MIN_ZOOMLEVEL:1,MAX_ZOOMLEVEL:14,SLIDER_START_POS:9,SLIDER_END_POS:139,SLIDER_UNIT_SIZE:10,HIDE_14LAYER_TIME:3e3,oDefaultPosition:{top:10,right:8},useEffect:!0,useCenterMark:!0,$init:function(t){var e=this;this.oOptions=nhn.mapcore.Util.fillOptions(t,{position:this.oDefaultPosition,enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1,enableBubbling:!1}),this.elZoom=jindo.$(this.oTemplate.process(this.oOptions)),this.elScaleOff=jindo.$$.getSingle("div.nmap_ctr_scale_off",this.elZoom),this.elSlider=jindo.$$.getSingle("div.nmap_slider",this.elZoom),this.elLegend=jindo.$$.getSingle("div.nmap_ctr_legend",this.elZoom),this.elController=jindo.$$.getSingle("div.nmap_ctr_zoom",this.elZoom),this.elThumbImg=jindo.$$.getSingle("div.nmap_slider-thumb img",this.elZoom),this.oSlider=this._getSliderComponent(),this._bindDOMEvents(),this._fillPosition(this.oDefaultPosition)},onadd:function(t){this.oOpenMap&&this.onremove(),this.oOpenMap=t,this._bindMapEvents(),this._setInitValue(),nhn.api.map.Map._objectManager._registerMapObject(this)},setEffectOptions:function(t){this.useEffect=t},getEffectOptions:function(){return this.useEffect},setCenterMarkOptions:function(t){this.useCenterMark=t},getCenterMarkOptions:function(){return this.useCenterMark},_bindDOMEvents:function(){var t=function(t){t.stop()};this.oBubbler=new nhn.mapcore.Util.Bubbler(this.elZoom),this.oHandlersInBubbler={"nmap_scaler:dblclick":t,"nmap_scaler:mousedown":t,"nmap_ctr_zoom:mouseenter":jindo.$Fn(this._showLegend,this).bind(),"nmap_ctr_zoom:mouseleave":jindo.$Fn(this._hideLegend,this).bind(),"nmap_ctr_plus:click":this._updateZoomByButton(!0),"nmap_ctr_plus:mousemove":t,"nmap_ctr_minus:click":this._updateZoomByButton(!1),"nmap_ctr_minus:mousemove":t},this.oBubbler.attach(this.oHandlersInBubbler);var e=jindo.$$.getSingle("div.nmap_ctr_plus > a > img",this.elZoom),n=jindo.$$.getSingle("div.nmap_ctr_minus > a > img",this.elZoom),i=jindo.$$.getSingle("div.nmap_ctr_plus > a",this.elZoom),o=jindo.$$.getSingle("div.nmap_ctr_minus > a",this.elZoom);this._fnOverHandler=jindo.$Fn(function(t){var e=t.currentElement;"IMG"!==e.tagName&&(e=jindo.$$.getSingle("img",e)),e.className="nmap_on"}),this._fnOutHandler=jindo.$Fn(function(t){var e=t.currentElement;"IMG"!==e.tagName&&(e=jindo.$$.getSingle("img",e)),e.className=""}),this._fnOverHandler.attach(e,"mouseover").attach(n,"mouseover").attach(i,"focus").attach(o,"focus"),this._fnOutHandler.attach(e,"mouseout").attach(n,"mouseout").attach(i,"blur").attach(o,"blur"),this._fnShowLegend=jindo.$Fn(this._showLegend,this).attach(i,"focus").attach(o,"focus"),this._fnHideLegend=jindo.$Fn(this._hideLegend,this).attach(i,"blur").attach(o,"blur")},_bindMapEvents:function(){this._fnZoomHandler=jindo.$Fn(function(t){this._setZoomLevel(t.toLevel)},this).bind(),this.oOpenMap.attach("zoom",this._fnZoomHandler),this._fnChangeMinMaxHandler=jindo.$Fn(function(t){this._setZoomRange(t.minLevel,t.maxLevel)},this).bind(),this.oOpenMap.attach("changeMinMaxLevel",this._fnChangeMinMaxHandler),this._fnChangeMapMode=jindo.$Fn(function(t){this._setRealtyLegend(t.mode)},this).bind(),this.oOpenMap.attach("changeMapMode",this._fnChangeMapMode)},_setInitValue:function(){this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling);var t=this.oOpenMap.getMinMaxLevel();this._setZoomRange(t[0],t[1]),this._setZoomLevel(this.oOpenMap.getLevel()),this._setRealtyLegend(this.oOpenMap.getMapMode())},_updateZoomByButton:function(t){var e=this;return function(n){n.stopDefault();var i=e.oOpenMap.getLevel()+(t?1:-1);e._fireZoomChange(i,!0)}},_getSliderComponent:function(){var t=this,e=-1,n=new nhn.mapcore.Slider(this.elSlider,{vertical:!0,classPrefix:"nmap_slider-"}).attach({beforechange:function(n){n.pos<t.SLIDER_START_POS?n.pos=t.SLIDER_START_POS:n.pos>t.SLIDER_END_POS&&(n.pos=t.SLIDER_END_POS);var i=parseInt(n.pos/t.SLIDER_UNIT_SIZE,10);n.pos=i*t.SLIDER_UNIT_SIZE+t.SLIDER_START_POS;var o=t.oOpenMap.getMinMaxLevel(),a=o[0],s=o[1];e=s-a-i+a,t._fireZoomChange(e,!1),t._setZoomLevel(e)}}),i=n.getDragArea();return i.attach({handledown:function(e){e.event.stop(),t.fireEvent("handledown")},handleup:function(e){t.fireEvent("handleup")}}),n},_fireZoomChange:function(t,e){t=this._getValidLevel(t),t!==this.oOpenMap.getLevel()&&this.oOpenMap.setLevel(t,e?{useEffect:this.useEffect,centerMark:this.useCenterMark}:null)},_getValidLevel:function(t){var e=this.oOpenMap.getMinMaxLevel(),n=e[0],i=e[1];return t<=n?n:t>=i?i:t},_showLegend:function(t){var e=t.currentElement,n=t.element,i=e==n||function(){for(;n&&n.parentNode;)if(n=n.parentNode,e==n)return!0;return!1}();i&&(this.elLegend.style.display="block",this.elLegend.style.zoom=1,this.elLegend.style.zoom="")},_hideLegend:function(){this.elLegend.style.display="none",this.elLegend.style.zoom=1,this.elLegend.style.zoom=""},_setZoomLevel:function(t){var e=this.oOpenMap.getMinMaxLevel(),n=e[0],i=e[1];if(t>=n&&t<=i){var o=(i-t)*this.SLIDER_UNIT_SIZE+this.SLIDER_START_POS;this.elScaleOff.style.height=o+"px";var a=this;setTimeout(function(){a.oSlider&&a.oSlider.positions(0,o,!1)},0)}},_setZoomRange:function(t,e){if(t=parseInt(t,10),e=parseInt(e,10),t<this.MIN_ZOOMLEVEL||e>this.MAX_ZOOMLEVEL||e<t)throw new Error("\uc90c \ub808\ubca8 \uac12\uc758 \ubc94\uc704\uc124\uc815\uc774 \uc798\ubabb\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");var n=e-t+1;this.elZoom.className=this.elZoom.className.replace(/nmap_scaler_s(\d)+/,"nmap_scaler_s"+n),this.elLegend.className=this.elLegend.className.replace(/nmap_scaler_m(\d)+/,"nmap_scaler_m"+e);var i=this.SLIDER_UNIT_SIZE*n;this.elZoom.style.height=59+i+"px",this.elController.style.height=59+i+"px",this.elSlider.style.height=14+i+"px";var o=jindo.$$.getSingle("div.nmap_ctr_scale_on",this.elZoom);o.style.height=14+i+"px";var a=jindo.$$.getSingle("div.nmap_ctr_minus",this.elZoom);a.style.top=33+i+"px",this.elLegend.style.height=5+i+"px",this.SLIDER_END_POS=(e-t)*this.SLIDER_UNIT_SIZE+this.SLIDER_START_POS,this._setZoomLevel({toLevel:this.oOpenMap.getLevel()})},_setRealtyLegend:function(t){var e=0===t;e?nhn.mapcore.Util.mapSetClass(this.elZoom,"nmap_scaler_re"):nhn.mapcore.Util.mapRemoveClass(this.elZoom,"nmap_scaler_re")},getElement:function(){return this.elZoom},_updatePosition:function(){this.$super._updatePosition(),"right"===this.oOptions.hPosition?nhn.mapcore.Util.mapRemoveClass(this.elZoom,"nmap_scaler_left"):nhn.mapcore.Util.mapSetClass(this.elZoom,"nmap_scaler_left")},onremove:function(){this.oOpenMap&&(this.oOpenMap.detach("zoom",this._fnZoomHandler),this.oOpenMap.detach("changeMinMaxLevel",this._fnChangeMinMaxHandler),this.oOpenMap.detach("changeMapMode",this._fnChangeMapMode),nhn.api.map.Map._objectManager._unregisterMapObject(this),this.oOpenMap=null)},destroy:function(){var t=jindo.$$.getSingle("div.nmap_ctr_plus > img",this.elZoom),e=jindo.$$.getSingle("div.nmap_ctr_minus > img",this.elZoom),n=jindo.$$.getSingle("div.nmap_ctr_plus > a",this.elZoom),i=jindo.$$.getSingle("div.nmap_ctr_minus > a",this.elZoom);this._fnOverHandler.detach(t,"mouseover").detach(e,"mouseover").detach(n,"focus").detach(i,"focus"),this._fnOutHandler.detach(t,"mouseout").detach(e,"mouseout").detach(n,"blur").detach(i,"blur"),this._fnShowLegend.detach(n,"focus").detach(i,"focus"),this._fnHideLegend.detach(n,"blur").detach(i,"blur"),this.oSlider.deactivate(),this.oSlider=null,this.oBubbler.detach(this.oHandlersInBubbler),this.oBubbler=null,this._fnZoomHandler=null,this._fnChangeMinMaxHandler=null,this._fnChangeMapMode=null,this._fnOverHandler=null,this._fnOutHandler=null,this._fnShowLegend=null,this._fnHideLegend=null,this.onremove()}}).extend(nhn.api.map.AbstractCommonControl),nhn.api.map.InfoWindow=jindo.$Class({matchedClass:"nmap_info_pane",sFrameTemplate:['<div class="nmap_infowindow" ','style="',"position:absolute; top:0px; left:0px; z-index:999; display:none; border:0; margin:0; padding:0;","-moz-user-select: text; -webkit-user-select: text;",'"></div>'].join(""),aSkins:['<div class="nmap_infowindow_content"></div>','<button class="nmap_infowindow_content"></button>'],nSkinNo:0,$init:function(t){this.oOptions=nhn.mapcore.Util.fillOptions(t,{point:null,content:"",enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1,enableBubbling:!1}),this.oOptions.position=[],this.oOptions.margin=[],this.weFrame=jindo.$Element(this.sFrameTemplate),this.setSkin(0),this.setPoint(this.oOptions.point),this.setContent(this.oOptions.content),this.setPosition({right:0,bottom:0}),this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling)},setSkin:function(t){var e=this.aSkins[t];if(e){var n=this.weContent&&this.weContent.$value();this.weFrame.html(e);var i=this.weFrame.query(".nmap_infowindow_content");if(n)for(var o;o=n.firstChild;)i.appendChild(o);this.weContent=jindo.$Element(i),this.nSkinNo=t}},getSkin:function(){return this.nSkinNo},setContent:function(t){t&&(this.weContent.empty(),"string"==typeof t?this.weContent.html(t):this.weContent.append(t))},setVisible:function(t){var e=this.getVisible(),t=!!t;t?(this.weFrame.css("visibility","hidden"),this.weFrame.show(),this.redraw(this._oPane),this.weFrame.css("visibility","visible")):this.weFrame.hide(),e!=t&&this.fireEvent("changeVisible",{visible:t})},getVisible:function(){return this.weFrame.visible()},_getSize:function(){return{width:this.weContent.$value().offsetWidth,height:this.weContent.$value().offsetHeight}},setOpacity:function(t){this.weContent.opacity(t)},getOpacity:function(){return this.weContent.opacity()},getPoint:function(){return fpOpenAPIDefaultConv(this._point&&this._point.copy())},setPoint:function(t){t&&(this._point=t.copy(),this.redraw(this._oPane))},redraw:function(t){if(t=t||this._oPane,null!=t&&null!=this._point){var e=t.fromPointToOffset(this._point.toInner());this.weFrame.css({left:e.x+"px",top:e.y+"px"})}},setPosition:function(t){this.oOptions.position=[],this.oOptions.margin=[];var e=this;jindo.$H(t).forEach(function(t,n){switch(n){case"left":case"right":e.oOptions.position[0]=n,e.oOptions.margin[0]=parseInt(t,10)||0;break;case"top":case"bottom":e.oOptions.position[1]=n,e.oOptions.margin[1]=parseInt(t,10)||0}}),this._applyPosition()},getPosition:function(){var t=this.oOptions.position,e=this.oOptions.margin,n={};return n[t[0]]=e[0],n[t[1]]=e[1],n},_applyPosition:function(){var t=this.oOptions.position,e=this.oOptions.margin;"left"==t[0]?this.weContent.css({right:e[0]+"px",left:"auto"}):"right"==t[0]&&this.weContent.css({left:e[0]+"px",right:"auto"}),"top"==t[1]?this.weContent.css({bottom:e[1]+"px",top:"auto"}):"bottom"==t[1]&&this.weContent.css({top:e[1]+"px",bottom:"auto"})},autoPosition:function(t){var e=this._oPane;if(e){var n=this.oOptions.position,i=this.oOptions.margin,o=this._getSize(),a=[0,0,0,0],s=[0,0,0,0],r="left"==n[0],h="top"==n[1],l;l=r?0:2,this._fillRangeAndMargin(r,l,o.width,i[0],a,s),l=h?1:3,this._fillRangeAndMargin(h,l,o.height,i[1],a,s),e._makeRangeVisible(this.getPoint(),a,s,null,t)}},_fillRangeAndMargin:function(t,e,n,i,o,a){var s=t?-1:1,r=i*s;if(o[e]=n*s,a[e]=r,i<0){var h=2==e||3==e?-2:2;o[e+h]=r}},onadd:function(t){this._oPane=t,this.redraw(this._oPane),nhn.api.map.Map._objectManager._registerMapObject(this)},onremove:function(){nhn.api.map.Map._objectManager._unregisterMapObject(this)},destroy:function(){this.onremove()},getElement:function(){return this.weFrame.$value()}}),nhn.mapcore.Util.extend(nhn.api.map.InfoWindow.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.SpriteIcon=jindo.$Class({divHolder:null,$init:function(t,e,n,i,o){this.offset={},null!=o?(this.offset.width=o.width,this.offset.height=o.height):(this.offset.width=0,this.offset.height=0),this._eIcon=this._createElement(t,e,n,"_nmap_marker nmap_png"),this.url=t,this.width=e.width,this.height=e.height,this.spriteWidth=n.width,this.spriteHeight=n.height,this.className="_nmap_marker nmap_png",this._eIcon.className=this.className,this.setImageOrder(i)},_createElement:nhn.mapcore.isSupportOpacity?function(t,e,n,i){var o=document.createElement("div");return i&&(o.className=i),o.style.position="absolute",o.style.overflow="hidden",o.style.width=e.width+"px",o.style.height=e.height+"px",o.style.cursor="pointer",o.style.marginTop=-this.offset.height+"px",o.style.marginLeft=-this.offset.width+"px",o.unselectable="on",o.innerHTML='<img  src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps/dot.gif" width="'+n.width+'" height="'+n.height+"\" alt='' style=\"position: absolute; left: 0px; top: 0px;max-width:none;max-height:none;width:"+n.width+"px;height:"+n.height+"px;visibility:visible;filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"',sizingMethod='scale');\" />",this._insideImg=o.childNodes[0],this._insideImg.unselectable="on",o}:function(t,e,n,i){var o=document.createElement("div");o.innerHTML="<div "+(i?'class="'+i+'" ':"")+'style="position:absolute;overflow:hidden;width:'+e.width+"px;height:"+e.height+'px;cursor:pointer;"><img src="'+t+'" width="'+n.width+'" height="'+n.height+'" alt=\'\' style="position: absolute; left: 0px; top: 0px;max-width:none;max-height:none;"/></div>';var a=o.removeChild(o.firstChild);return nhn.mapcore.Util.disableSelection(a),this._insideImg=a.childNodes[0],nhn.mapcore.Util.disableSelection(this._insideImg),o.innerHTML="",this.divHolder=a,a.style.marginTop=-this.offset.height+"px",a.style.marginLeft=-this.offset.width+"px",a},getImageOrder:function(){return this.imgOrder},setImageOrder:function(t){if(this.imgOrder=t,"number"==typeof this.imgOrder)this.moveHorizontal(this.imgOrder);else{var e=this._insideImg.style;e.left=-1*this.width*this.imgOrder.x+"px",e.top=-1*this.height*this.imgOrder.y+"px"}},select:function(){this.hasOutlineStyle()&&this.moveVertical(-1)},unselect:function(){this.hasOutlineStyle()&&this.moveVertical(0)},getSpriteSize:function(){return{width:this.spriteWidth,height:this.spriteHeight}},moveHorizontal:function(t){this._insideImg.style.left=-1*this.width*t+"px"},moveVertical:function(t){this._insideImg.style.top=this.height*t+"px"},updateURL:nhn.mapcore.isSupportOpacity?function(t){nhn.mapcore.Image.changeSrc(this._insideImg,t,/.png$/i.exec(t))}:function(t){nhn.mapcore.Image.changeSrc(this._insideImg,t)},update:function(t,e,n,i,o){this.updateURL(t),this._eIcon.style.width=e.width+"px",this._eIcon.style.height=e.height+"px",this._eIcon.className=i,this._insideImg.width=n.width,this._insideImg.height=n.height,this._insideImg.style.width=n.width+"px",this._insideImg.style.height=n.height+"px",this.url=t,this.width=e.width,this.height=e.height,this.spriteWidth=n.width,this.spriteHeight=n.height,this.className=i,this.setImageOrder(o)},clear:function(){this._eIcon=null,this._insideImg=null},hasOutlineStyle:function(){return this.spriteHeight>this.height},setOffset:function(t){this.offset.width=t.width,this.offset.height=t.height},getOffset:function(){return{width:this.offset.width,height:this.offset.height}},getDivHolder:function(){return divHolder},_left:function(){return this._insideImg.style.left},_top:function(){return this._insideImg.style.top}}),nhn.api.map.SpriteMarker=function(){"function"==typeof this.$init&&this.$init.apply(this,arguments)},nhn.api.map.SpriteMarker.prototype={matchedClass:"nmap_overlay_pane",defaultIcon:{url:nhn.mapcore.mapSpec.STATIC_IMG+"/maps2/icons/path_m.png",size:{width:35,height:49},spriteSize:{width:735,height:98},imgOrder:0,offset:{width:18,height:49}},$init:function(t,e){var n=nhn.mapcore.Util.fillOptions(e,{title:"",point:null,zIndex:null,smallSrc:null}),i={width:t.width,height:t.height},o=t.getSpriteSize();this._elEl=t._eIcon,this._elEl.style.cssText="position:absolute; cursor:pointer; _cursor:hand; overflow:hidden; margin:0; padding:0; border:0;",this._elEl.style.marginTop=-t.getOffset().height+"px",this._elEl.style.marginLeft=-t.getOffset().width+"px",this._oPoint=null,this._oIcon=t;var a="_nmap_marker nmap_png",i={width:t.width,height:t.height};this._oIcon.update(t.url,i,t.getSpriteSize(),a,t.imgOrder),null!==n.point&&this.setPoint(n.point),null!==n.zIndex&&this.setZIndex(n.zIndex),null!==n.smallSrc&&this.setSmallSrc(n.smallSrc),this._sTitle=n.title},setIcon:function(t){console&&console.warn&&console.warn("SpriteMarker.setIcon()\uc740 \ub354 \uc774\uc0c1 \uc9c0\uc6d0\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\nSpriteMarker.setIcon()\uc73c\ub85c Icon\uc744 \ubcc0\uacbd\ud558\ub294 \ub300\uc2e0\uc5d0 SpriteMarker\ub97c \uc0c8\ub85c \uc0dd\uc131\ud574\uc8fc\uc138\uc694.")},setImageOrder:function(t){this._oIcon.setImageOrder(t)},getImageOrder:function(){return this._oIcon.getImageOrder()},getIcon:function(){return this._oIcon},setSmallSrc:function(t){this._smallSrc=t},getSmallSrc:function(){return this._smallSrc||null}},nhn.mapcore.Util.extend(nhn.api.map.SpriteMarker.prototype,nhn.api.map.Marker.prototype),nhn.mapcore.Util.extend(nhn.api.map.SpriteMarker.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.DraggableMarker=function(){"function"==typeof this.$init&&this.$init.apply(this,arguments)},nhn.api.map.DraggableMarker.prototype={matchedClass:"nmap_overlay_pane",_isSelecting:!1,defaultIcon:{url:nhn.mapcore.mapSpec.STATIC_IMG+"/maps2/icons/path_m.png",size:{width:35,height:49},spriteSize:{width:735,height:98},imgOrder:0,offset:{width:18,height:49}},$init:function(t,e){var n=nhn.mapcore.Util.fillOptions(e,{title:"",point:null,zIndex:null,smallSrc:null}),i={width:t.width,height:t.height},o=t.getSpriteSize();this._elEl=t._eIcon,this._elEl.style.cssText="position:absolute; cursor:pointer; _cursor:hand; overflow:hidden; margin:0; padding:0; border:0;",this._elEl.style.marginTop=-t.getOffset().height+"px",this._elEl.style.marginLeft=-t.getOffset().width+"px",this._oPoint=null,this._oIcon=t;var a="_nmap_marker nmap_png",i={width:t.width,height:t.height};this._oIcon.update(t.url,i,t.getSpriteSize(),a,t.imgOrder),null!==n.point&&this.setPoint(n.point),null!==n.zIndex&&this.setZIndex(n.zIndex),null!==n.smallSrc&&this.setSmallSrc(n.smallSrc),this._sTitle=n.title},_onAddProcess:function(){this.map=this._oParent._oParent.oApp.getMap(),this.welNMap=jindo.$Element(this.map);var t=this._oParent._oParent.oApp.getStaticContainer();this.pointer=this._getPointer(t,this._oParent._oParent.oApp,this.getIcon()),this._oParent._oParent.oApp.exec("ADD_IGNORE_CLASS",["_nmap_marker","MOUSEDOWN"]),this.moveHandler=jindo.$Fn(this.onMouseMove,this),this.dragStartHandler=jindo.$Fn(this.onDragStart,this),this.dragEndHandler=jindo.$Fn(this.onDragEnd,this),this.dragCancelHandler=jindo.$Fn(this.onDragCancel,this),this.showHandler=jindo.$Fn(this._onMouseMove,this),this.hideHandler=jindo.$Fn(function(){this.pointer.hide()},this),this.mouseDownHandler=jindo.$Fn(this._onMouseDown,this),this.isDragCancle=!1,this._bIE=jindo.$Agent().navigator().ie,this.pointer.toMarkerDrag(this),this.mouseDownHandler.attach(this.map,"mousedown")},setIcon:function(t){console&&console.warn&&console.warn("DraggableMarker.setIcon()\uc740 \ub354 \uc774\uc0c1 \uc9c0\uc6d0\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\nDraggableMarker.setIcon()\uc73c\ub85c Icon\uc744 \ubcc0\uacbd\ud558\ub294 \ub300\uc2e0\uc5d0 DraggableMarker\ub97c \uc0c8\ub85c \uc0dd\uc131\ud574\uc8fc\uc138\uc694.")},getIcon:function(){return this._oIcon},setSmallSrc:function(t){this._smallSrc=t},getSmallSrc:function(){return this._smallSrc||null},onadd:function(t){this._oParent=t,nhn.api.map.Map._objectManager._registerMapObject(this),
this._onAddProcess(),this.redraw()},_getPointer:function(t,e,n){return new function(){var i=jindo.$Agent().navigator().ie&&jindo.$Agent().navigator().version<8,o=n.url,a=n.width,s=n.height,r=Math.floor(a/2),h=s,l=jindo.$Element('<div style="overflow:hidden; position:absolute; margin:0; padding:0; z-index: 10;display:none;"></div>');l.css({width:a+"px",height:s+"px"});var p=jindo.$Element(nhn.mapcore.Image.createImage(o,{zIndex:999,width:a+"px",height:s+"px"}));p.css({left:"0px",position:"absolute"}),l.append(p.$value()),t.appendChild(l.$value()),this.show=function(){p.css({left:n._left(),top:n._top()}),l.show(),e.exec("SET_CURSOR",["pointer"])},this.hide=function(){l.hide(),e.exec("SET_CURSOR",["default"])},this.move=function(t,e){var n=i?2:0;l.css({left:t-r-n+"px",top:e-h-n+"px"})},this.toMarkerDrag=function(t){var e=t.getIcon().width,n=t.getIcon().height,i=t.getElement().getElementsByTagName("img")[0];p.css({left:i.style.left}),l.css({width:e+"px",height:n+"px"}),p.css({width:t.getIcon().spriteWidth+"px",height:t.getIcon().spriteHeight+"px"}),l.hide(),r=e/2,h=n}}},onMouseMove:function(t){if(t){var e=nhn.mapcore.Util.mapGetParentByClass(t.element,"_none_pointer");if(e)return void this.pointer.hide();this.pointer.show();var n=t.pos();this._oLastPos={x:n.pageX,y:n.pageY};var i=this._oParent._oParent.oApp.getMapOffset(this._oLastPos);this.pointer.move(i.x,i.y),this.dragElement&&t.stop()}},onDragStart:function(t){if(nhn.mapcore.isSupportOpacity?this.dragElement=this._oIcon._eIcon.getElementsByTagName("img")[0]:this.dragElement=this._oIcon.divHolder.getElementsByTagName("img")[0],this.dragElement==t.element&&1==this.isDragging){this._bIE&&(this._elSetCapture=t.element,this._elSetCapture&&this._elSetCapture.setCapture(!1));var e=t.pos();this.dragInfo={x:e.pageX,y:e.pageY},this.dragElement=jindo.$Element(t.element);var n=Math.pow(e.pageX-this.dragInfo.x,2)+Math.pow(e.pageY-this.dragInfo.y,2),i=this.dragElement.$value();this.dragStartHandler.detach(document,"mousemove"),this.dragCancelHandler.detach(this.map,"mouseup"),this.moveHandler.attach(this.map,"mousemove"),this.dragEndHandler.attach(document,"mouseup"),this.onMouseMove(t),this.dragElement.hide(),this.pointer.show(),this._oParent._oParent.oApp.exec("REMOVE_IGNORE_CLASS",["_nmap_marker","MOUSEDOWN"]),t.stop(jindo.$Event.CANCEL_DEFAULT)}else this.dragElement=null,this.dragStartHandler.detach(document,"mousemove"),this.dragCancelHandler.detach(this.map,"mouseup"),this.isDragging=!1;this._resetNMapBound()},onDragEnd:function(t,e){if(this.dragElement){this.moveHandler.detach(this.map,"mousemove"),this.dragEndHandler.detach(document,"mouseup"),this.dragCancelHandler.detach(this.map,"mouseup");var n=t.pos();if(this._isInBound(n.clientX,n.clientY)||(this.isDragCancle=!0),this._bIE&&this._elSetCapture&&(this._elSetCapture.releaseCapture(),this._elSetCapture=null),this.pointer.hide(),t.mouse().right||t.mouse().middle||this.isDragCancle)this.dragElement.show(),this.dragElement=null,this.isDragging=!1,t&&t.stop(),this._oParent._oParent.oApp.exec("ADD_IGNORE_CLASS",["_nmap_marker","MOUSEDOWN"]);else{this.oldPoint=this._oPoint;var i=this._oParent._oParent.oApp.getOffset(this._oLastPos),o=this._oParent._oParent.oApp.getOffsetToPoint(i);this.setPoint(o),this.dragElement.show(),this.dragElement=null,this.isDragging=!1,t&&t.stop(),this._oParent._oParent.oApp.exec("ADD_IGNORE_CLASS",["_nmap_marker","MOUSEDOWN"]),this.oldPoint!=this._oPoint&&this.fireEvent("changePosition",{oldPoint:fpOpenAPIDefaultConv(this.oldPoint),newPoint:fpOpenAPIDefaultConv(this._oPoint)})}}this.isDragCancle=!1},_onMouseMove:function(){this.pointer.show()},onDragCancel:function(t){this.dragStartHandler.detach(document,"mousemove"),this.dragCancelHandler.detach(this.map,"mouseup"),this.dragEndHandler.detach(document,"mouseup"),this.isDragCancle=!0,this.onDragEnd(t,!0)},_resetNMapBound:function(){var t=this.welNMap.offset(),e=this.welNMap.width(),n=this.welNMap.height(),i=jindo.$Document().scrollPosition();this._oBound={left:t.left-i.left,top:t.top-i.top,right:t.left+e-i.left,bottom:t.top+n-i.top}},_isInBound:function(t,e){return this._oBound.left<t&&t<this._oBound.right&&this._oBound.top<e&&e<this._oBound.bottom},_onMouseDown:function(t){t.mouse().left&&(this.dragStartHandler.attach(document,"mousemove"),this.dragCancelHandler.attach(this.map,"mouseup"),this.isDragging=!0)}},nhn.mapcore.Util.extend(nhn.api.map.DraggableMarker.prototype,nhn.api.map.SpriteMarker.prototype),nhn.mapcore.Util.extend(nhn.api.map.DraggableMarker.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.MapTypeBtn=jindo.$Class({sTemplate:['<div class="nmap_btn nmap_sel_basic">','<div class="nmap_sel_normal">','<a href="#" class="nmap_on"><span class="nmap_btn_wrap">\uc77c\ubc18</span></a>',"</div>",'<div class="nmap_sel_satellite">','<a href="#"><span class="nmap_btn_wrap">\uc704\uc131</span></a>','<div class="nmap_lay_default nmap_lay_satellite">','<div class="nmap_lay_body">',"<div>",'<input type="checkbox" class="nmap_ip_check" id="ip_check3" checked="checked"> ','<label for="ip_check3">\uacb9\uccd0\ubcf4\uae30</label>',"</div>","</div>","</div>","</div>","</div>"].join(""),oDefaultPosition:{top:10,left:100},$init:function(t){this.oOptions=nhn.mapcore.Util.fillOptions(t,{position:this.oDefaultPosition,hybridPosition:"right",enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1,enableBubbling:!1}),this.elButton=jindo.$(this.sTemplate),this.elSatelliteBtn=jindo.$$.getSingle("div.nmap_sel_satellite",this.getElement()),this.welNormalLink=jindo.$Element(jindo.$$.getSingle("div.nmap_sel_normal > a",this.getElement())),this.welSatelliteLink=jindo.$Element(jindo.$$.getSingle("a",this.elSatelliteBtn)),this.welOverlappedLayer=jindo.$Element(jindo.$$.getSingle("div.nmap_lay_default",this.getElement())),this.elOverlappedCBox=jindo.$$.getSingle("input[id=ip_check3]",this.welOverlappedLayer.$value()),this._fillPosition(this.oDefaultPosition),this._attachDOMEvent(),this._createFnOverlappedLayer(),this._fnChangeMapModeHandler=jindo.$Fn(function(t){this._update(t.mode)},this).bind()},_attachDOMEvent:function(){this._fnNormalHandler=jindo.$Fn(function(t){this._isNormalMapActivated()||(this.oOpenMap.setMapMode(0),this.welOverlappedLayer.hide()),t.stop(jindo.$Event.CANCEL_DEFAULT)},this).attach(this.welNormalLink.$value(),"click"),this._fnSatelliteHandler=jindo.$Fn(function(t){this._isSatelliteMapActivated()||(this.oOpenMap.setMapMode(this.isHybridOn?1:2),this.welOverlappedLayer.show()),t.stop(jindo.$Event.CANCEL_DEFAULT)},this).attach(this.welSatelliteLink.$value(),"click"),this._fnHybridHandler=jindo.$Fn(function(t){var e=this;setTimeout(function(){e.isHybridOn=e.elOverlappedCBox.checked,e.oOpenMap.setMapMode(e.isHybridOn?1:2)},0)},this).attach(this.elOverlappedCBox,"click")},_createFnOverlappedLayer:function(){var t=null;this._fnExtendOverlappedLayer=jindo.$Fn(function(){this._isSatelliteMapActivated()&&(t&&clearTimeout(t),this.welOverlappedLayer.show())},this),this._fnFoldOverlappedLayer=jindo.$Fn(function(){if(this._isSatelliteMapActivated()){var e=this;t=setTimeout(function(){e.welOverlappedLayer.hide(),t=null},0)}},this),this._fnExtendOverlappedLayer.attach(this.elSatelliteBtn,"mouseenter").attach(this.welSatelliteLink,"focus").attach(this.elOverlappedCBox,"focus"),this._fnFoldOverlappedLayer.attach(this.elSatelliteBtn,"mouseleave").attach(this.welSatelliteLink,"blur").attach(this.elOverlappedCBox,"blur")},onadd:function(t){this.oOpenMap&&this.onremove(),this.oOpenMap=t,this.isHybridOn=2!=this.oOpenMap.getMapMode(),this.oOpenMap.attach("changeMapMode",this._fnChangeMapModeHandler),this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling),this._update(this.oOpenMap.getMapMode()),this._updatePosition(),nhn.api.map.Map._objectManager._registerMapObject(this)},_update:function(t){var e=0===t,n=3===t;e?(this.welNormalLink.addClass("nmap_on"),this.welSatelliteLink.removeClass("nmap_on"),this.welOverlappedLayer.hide()):n?(this.welNormalLink.removeClass("nmap_on"),this.welSatelliteLink.removeClass("nmap_on"),this.welOverlappedLayer.hide()):(this.welSatelliteLink.addClass("nmap_on"),this.welNormalLink.removeClass("nmap_on"),this.elOverlappedCBox.checked=1==t)},_isNormalMapActivated:function(){return this.welNormalLink.hasClass("nmap_on")},_isSatelliteMapActivated:function(){return this.welSatelliteLink.hasClass("nmap_on")},getElement:function(){return this.elButton},_updatePosition:function(){this.$super._updatePosition(),"right"===this.oOptions.hPosition&&this.oOptions.hMargin<35?this.welOverlappedLayer.addClass("nmap_lay_satellite_r"):this.welOverlappedLayer.removeClass("nmap_lay_satellite_r"),"bottom"===this.oOptions.vPosition&&this.oOptions.vMargin<27?this.welOverlappedLayer.addClass("nmap_lay_satellite_t"):this.welOverlappedLayer.removeClass("nmap_lay_satellite_t"),"left"===this.oOptions.hybridPosition&&this.welOverlappedLayer.addClass("nmap_lay_satellite_r")},onremove:function(){this.oOpenMap&&(this.oOpenMap.detach("changeMapMode",this._fnChangeMapModeHandler),nhn.api.map.Map._objectManager._unregisterMapObject(this),this.oOpenMap=null)},destroy:function(){this._fnNormalHandler.detach(this.welNormalLink.$value(),"click"),this._fnSatelliteHandler.detach(this.welSatelliteLink.$value(),"click"),this._fnHybridHandler.detach(this.elOverlappedCBox,"click"),this._fnExtendOverlappedLayer.detach(this.elSatelliteBtn,"mouseenter").detach(this.welSatelliteLink,"focus").detach(this.elOverlappedCBox,"focus"),this._fnFoldOverlappedLayer.detach(this.elSatelliteBtn,"mouseleave").detach(this.welSatelliteLink,"blur").detach(this.elOverlappedCBox,"blur"),this._fnNormalHandler=null,this._fnSatelliteHandler=null,this._fnHybridHandler=null,this._fnExtendOverlappedLayer=null,this._fnFoldOverlappedLayer=null,this.onremove()}}).extend(nhn.api.map.AbstractCommonControl),nhn.api.map.ThemeMapBtn=jindo.$Class({sTemplate:['<div class="nmap_btn nmap_theme">','<a href="#" class="nmap_theme">','<span class="nmap_btn_wrap"><span>\uc8fc\uc81c\ubcc4</span> \uc9c0\ub3c4</span>',"</a>",'<div class="nmap_lay_default nmap_lay_theme_list">','<div class="nmap_lay_body">','<div><input type="checkbox" class="nmap_ip_check" id="ip_check2"> <label for="ip_check2">\uc790\uc804\uac70</label></div>',"</div>","</div>","</div>"].join(""),oDefaultPosition:{top:10,right:41},$init:function(t){this.oOptions=nhn.mapcore.Util.fillOptions(t,{position:this.oDefaultPosition,enableWheelZoom:!0,enableDragPan:!0,enableDblClickZoom:!0,enableBubbling:!1}),this.elButton=jindo.$(this.sTemplate),this.elTypeList=jindo.$$.getSingle("div.nmap_lay_default",this.getElement()),this.elRealtyCBox=jindo.$$.getSingle("input[id=ip_check1]",this.getElement()),this.elBicycleCBox=jindo.$$.getSingle("input[id=ip_check2]",this.getElement()),this.elLayer=jindo.$$.getSingle("a",this.getElement());var e=null;jindo.$Fn(function(t){t.stopDefault()}).attach(jindo.$$.getSingle("> .nmap_theme",this.elButton),"click"),this._fnExpandHandler=jindo.$Fn(function(){e&&clearTimeout(e),nhn.mapcore.Util.mapSetClass(this.elTypeList,"nmap_show")},this).attach(this.elButton,"mouseenter").attach(this.elLayer,"focus").attach(this.elRealtyCBox,"focus").attach(this.elBicycleCBox,"focus"),this._fnFoldHandler=jindo.$Fn(function(){var t=this;e=setTimeout(function(){nhn.mapcore.Util.mapRemoveClass(t.elTypeList,"nmap_show"),e=null},0)},this).attach(this.elButton,"mouseleave").attach(this.elLayer,"blur").attach(this.elRealtyCBox,"blur").attach(this.elBicycleCBox,"blur"),this._attachEventByButton(),this._fillPosition(this.oDefaultPosition)},_attachEventByButton:function(){var t=this,e=function(e,n){return function(){setTimeout(function(){t.oOpenMap[n](e.checked)},0)}};this._fnBicycleHandler=jindo.$Fn(e(this.elBicycleCBox,"activateBicycleMap")).attach(this.elBicycleCBox,"click")},onadd:function(t){this.oOpenMap&&this.onremove(),this.oOpenMap=t,this._attachEventByMap(),this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling),nhn.api.map.Map._objectManager._registerMapObject(this)},_attachEventByMap:function(){var t=jindo.$$.getSingle("a.nmap_theme",this.getElement()),e=this;this._fnUpdateCheckBox=function(n){switch(n.theme){case"bicycle":e.elBicycleCBox.checked=n.isActivated}var i=e.elBicycleCBox.checked;i?nhn.mapcore.Util.mapSetClass(t,"nmap_on"):nhn.mapcore.Util.mapRemoveClass(t,"nmap_on")},this.oOpenMap.attach("changeThemeMap",this._fnUpdateCheckBox)},_updatePosition:function(){this.$super._updatePosition(),"bottom"===this.oOptions.vPosition&&this.oOptions.vMargin<45?nhn.mapcore.Util.mapSetClass(this.elTypeList,"nmap_lay_theme_list_t"):nhn.mapcore.Util.mapRemoveClass(this.elTypeList,"nmap_lay_theme_list_t")},getElement:function(){return this.elButton},onremove:function(){this.oOpenMap&&(this.oOpenMap.detach("changeThemeMap",this._fnUpdateCheckBox),nhn.api.map.Map._objectManager._unregisterMapObject(this),this.oOpenMap=null)},destroy:function(){this._fnExpandHandler.detach(this.elButton,"mouseenter").detach(this.elLayer,"focus").detach(this.elRealtyCBox,"focus").detach(this.elBicycleCBox,"focus"),this._fnFoldHandler.detach(this.elButton,"mouseleave").detach(this.elLayer,"blur").detach(this.elRealtyCBox,"blur").detach(this.elBicycleCBox,"blur"),this._fnRealtyHandler.detach(this.elRealtyCBox,"click"),this._fnBicycleHandler.detach(this.elBicycleCBox,"click"),this._fnExpandHandler=null,this._fnFoldHandler=null,this._fnRealtyHandler=null,this._fnBicycleHandler=null,this.onremove()}}).extend(nhn.api.map.AbstractCommonControl),nhn.api.map.TrafficMapBtn=jindo.$Class({sTemplate:'<div class="nmap_btn nmap_realtime" style="top:30px; right:180px;"><a href="#"><span class="nmap_btn_wrap">\uc2e4\uc2dc\uac04\uad50\ud1b5</span></a></div>',oDefaultPosition:{top:30,right:180},$init:function(t){this.oOptions=nhn.mapcore.Util.fillOptions(t,{position:this.oDefaultPosition,enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1,enableBubbling:!1}),this.elButton=jindo.$(this.sTemplate),this.elLink=jindo.$$.getSingle("a",this.getElement()),this._fnClickHandler=jindo.$Fn(function(t){var e=!nhn.mapcore.Util.mapGetClass(this.elLink,"nmap_on");this.oOpenMap.activateTrafficMap(e),e&&this.oOpenMap.reloadTraffic(),t.stopDefault()},this).attach(this.elLink,"click"),this._fillPosition(this.oDefaultPosition)},onadd:function(t){this.oOpenMap&&this.onremove(),this.oOpenMap=t,this._fnTurnOnOff=jindo.$Fn(function(t){"traffic"===t.theme&&this.turnOnOrOff(t.isActivated)},this).bind(),this.oOpenMap.attach("changeThemeMap",this._fnTurnOnOff),this.oOpenMap.isTrafficMapActivated()&&this.turnOnOrOff(!0),this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling),nhn.api.map.Map._objectManager._registerMapObject(this)},turnOnOrOff:function(t){t?nhn.mapcore.Util.mapSetClass(this.elLink,"nmap_on"):nhn.mapcore.Util.mapRemoveClass(this.elLink,"nmap_on")},getElement:function(){return this.elButton},onremove:function(){this.oOpenMap&&(this.oOpenMap.detach("changeThemeMap",this._fnTurnOnOff),nhn.api.map.Map._objectManager._unregisterMapObject(this),this.oOpenMap=null)},destroy:function(){this._fnClickHandler.detach(this.elLink,"click"),this._fnClickHandler=null,this._fnTurnOnOff=null,this.onremove()}}).extend(nhn.api.map.AbstractCommonControl),nhn.api.map.ZoomControl_v2=jindo.$Class({slideTypeTemplate:nhn.mapcore.Template.get(['<div class="nmap_scaler_new nmap_scaler_new_s14 nmap_scaler_new_left" style="left:10px;right:0;top:10px;bottom:auto;height:180px">','<div class="nmap_ctr_zoom_new" style="height:180px">','<div class="nmap_slider_new" style="height:130px;">','<div class="nmap_ctr_scale_new_on" style="height:130px;"></div>','<div class="nmap_ctr_scale_new_off" style="height:13px;"></div><!-- \uc2dc\uc791:13px, \uac04\uaca9:8px -->','<div class="nmap_slider_new-thumb" style="top:13px;" title=""><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="20" height="14" alt="" class="nmap_on"></div><!-- \uc2dc\uc791:13px, \uac04\uaca9:8px -->',"</div>",'<div class="nmap_ctr_plus_new"><a href="#" title="\ud655\ub300">\ud655\ub300</a></div>','<div class="nmap_ctr_minus_new" style="top:154px;"><a href="#" title="\ucd95\uc18c">\ucd95\uc18c</a></div>',"</div>","<!-- 14\ub808\ubca8\uc77c\ub54c nmap_scaler_m14 \ucd94\uac00 -->",'<div class="nmap_ctr_legend_new nmap_scaler_new_m14" style="height:119px">','<div class="nmap_ctr_legend1_new"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="36" height="15" alt="\ubd80\ub3d9\uc0b0"></div>','<div class="nmap_ctr_legend2_new"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="36" height="15" alt="\uac70\ub9ac"></div>','<div class="nmap_ctr_legend3_new"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="36" height="15" alt="\uc74d.\uba74.\ub3d9"></div>','<div class="nmap_ctr_legend4_new"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="36" height="15" alt="\uc2dc.\uad70.\uad6c"></div>','<div class="nmap_ctr_legend5_new"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="36" height="15" alt="\uc2dc.\ub3c4"></div>','<div class="nmap_ctr_legend6_new"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="36" height="15" alt="\uad6d\uac00"></div>',"</div>","</div>"].join("")),btnTypeTemplate:nhn.mapcore.Template.get(['<div class="nmap_api_zoom" style="top:300px;right:5px">','<div class="nmap_api_zoom_plus"><a href="#">\ud655\ub300</a></div>','<div class="nmap_api_zoom_minus"><a href="#">\ucd95\uc18c</a></div>',"</div>"].join("")),MIN_ZOOMLEVEL:1,MAX_ZOOMLEVEL:14,SLIDER_START_POS:13,SLIDER_END_POS:117,SLIDER_UNIT_SIZE:8,DIMMED_CLASS:"nmap_dimmed",REALTY_LEGEND_CLASS:"nmap_scaler_new_re",oDefaultPosition:{top:10,right:8},sSlideTypeStyle:"slide",sBtnTypeStyle:"button",useEffect:!0,useCenterMark:!0,$init:function(t){var e=this,n=null;if(this.oOptions=nhn.mapcore.Util.fillOptions(t,{position:this.oDefaultPosition,zoomStyle:this.sSlideTypeStyle,enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1,enableBubbling:!1}),this._setZoomType(),this.isSlideType)n=jindo.$(this.slideTypeTemplate.process(this.oOptions)),this.elScaleOff=jindo.$$.getSingle("div.nmap_ctr_scale_new_off",n),this.elSlider=jindo.$$.getSingle("div.nmap_slider_new",n),this.elLegend=jindo.$$.getSingle("div.nmap_ctr_legend_new",n),this.elController=jindo.$$.getSingle("div.nmap_ctr_zoom_new",n),this.elThumbImg=jindo.$$.getSingle("div.nmap_slider_new-thumb img",n),this.oSlider=this._getSliderComponent();else{if(!this.isBtnType)throw new Error("\uc798\ubabb\ub41c \uc90c \ucee8\ud2b8\ub864 \uc2a4\ud0c0\uc77c\uc744 \uc9c0\uc815\ud588\uc2b5\ub2c8\ub2e4. \uc9c0\uc6d0\ud558\ub294 \uc90c \ucee8\ud2b8\ub864 \uc2a4\ud0c0\uc77c\uc740 \uc2ac\ub77c\uc774\ub4dc\ud615(slide)\uacfc \ubc84\ud2bc\ud615(button)\uc785\ub2c8\ub2e4. \uae30\ubcf8 \uac12\uc740 \uc2ac\ub77c\uc774\ub4dc\ud615\uc785\ub2c8\ub2e4.");n=jindo.$(this.btnTypeTemplate.process(this.oOptions))}this.elZoom=n,this._bindDOMEvents(),this._fillPosition(this.oDefaultPosition)},onadd:function(t){this.oOpenMap&&this.onremove(),this.oOpenMap=t,this._bindMapEvents(),this._setInitValue(),nhn.api.map.Map._objectManager._registerMapObject(this)},setEffectOptions:function(t){this.useEffect=t},getEffectOptions:function(){return this.useEffect},setCenterMarkOptions:function(t){this.useCenterMark=t},getCenterMarkOptions:function(){return this.useCenterMark},_bindDOMEvents:function(){var t=function(t){t.stopDefault()},e=null,n=null,i=null;if(this.isSlideType)e={"nmap_scaler_new:dblclick":t,"nmap_scaler_new:mousedown":t,"nmap_ctr_zoom_new:mouseenter":jindo.$Fn(this._showLegend,this).bind(),"nmap_ctr_zoom_new:mouseleave":jindo.$Fn(this._hideLegend,this).bind(),"nmap_ctr_plus_new:click":this._updateZoomByButton(!0),"nmap_ctr_plus_new:mousemove":t,"nmap_ctr_minus_new:click":this._updateZoomByButton(!1),"nmap_ctr_minus_new:mousemove":t},n=jindo.$$.getSingle("div.nmap_ctr_plus_new > a",this.elZoom),i=jindo.$$.getSingle("div.nmap_ctr_minus_new > a",this.elZoom),this._fnOverHandler=jindo.$Fn(function(t){nhn.mapcore.Util.mapSetClass(t.currentElement,"nmap_on")}),this._fnOutHandler=jindo.$Fn(function(t){nhn.mapcore.Util.mapRemoveClass(t.currentElement,"nmap_on")}),this._fnOverHandler.attach(n,"mouseover").attach(i,"mouseover").attach(n,"focus").attach(i,"focus"),this._fnOutHandler.attach(n,"mouseout").attach(i,"mouseout").attach(n,"blur").attach(i,"blur"),this._fnShowLegend=jindo.$Fn(this._showLegend,this).attach(n,"focus").attach(i,"focus"),this._fnHideLegend=jindo.$Fn(this._hideLegend,this).attach(n,"blur").attach(i,"blur");else{if(!this.isBtnType)throw new Error("\uc798\ubabb\ub41c \uc90c \ucee8\ud2b8\ub864 \uc2a4\ud0c0\uc77c\uc744 \uc9c0\uc815\ud588\uc2b5\ub2c8\ub2e4. \uc9c0\uc6d0\ud558\ub294 \uc90c \ucee8\ud2b8\ub864 \uc2a4\ud0c0\uc77c\uc740 \uc2ac\ub77c\uc774\ub4dc\ud615(slide)\uacfc \ubc84\ud2bc\ud615(button)\uc785\ub2c8\ub2e4. \uae30\ubcf8 \uac12\uc740 \uc2ac\ub77c\uc774\ub4dc\ud615\uc785\ub2c8\ub2e4.");e={"nmap_api_zoom_plus:click":this._updateZoomByButton(!0),"nmap_api_zoom_minus:click":this._updateZoomByButton(!1)},n=jindo.$$.getSingle("div.nmap_api_zoom_plus > a",this.elZoom),i=jindo.$$.getSingle("div.nmap_api_zoom_minus > a",this.elZoom)}this.elPlus=n,this.elMinus=i,this.oHandlersInBubbler=e,this.oBubbler=new nhn.mapcore.Util.Bubbler(this.elZoom),this.oBubbler.attach(this.oHandlersInBubbler)},_bindMapEvents:function(){this.isSlideType?(this._fnZoomHandler=jindo.$Fn(function(t){this._setZoomLevel(t.toLevel)},this).bind(),this.oOpenMap.attach("zoom",this._fnZoomHandler)):this.isBtnType&&(this._fnZoomHandler=jindo.$Fn(function(t){this._controlButtonDimmed()},this).bind(),this.oOpenMap.attach("zoom",this._fnZoomHandler)),this._fnChangeMapMode=jindo.$Fn(function(t){this.isSlideType&&this._setRealtyLegend(t.mode),this._controlButtonDimmed()},this).bind(),this.oOpenMap.attach("changeMapMode",this._fnChangeMapMode),this._fnChangeMinMaxHandler=jindo.$Fn(function(t){this._setZoomRange(t.minLevel,t.maxLevel)},this).bind(),this.oOpenMap.attach("changeMinMaxLevel",this._fnChangeMinMaxHandler)},_setInitValue:function(){this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling);var t=this.oOpenMap.getMinMaxLevel();this._setZoomRange(t[0],t[1]),this.isSlideType&&(this._setZoomLevel(this.oOpenMap.getLevel()),this._setRealtyLegend(this.oOpenMap.getMapMode()))},_updateZoomByButton:function(t){var e=this;return function(n){n.stopDefault();var i=e.oOpenMap.getLevel()+(t?1:-1);e._fireZoomChange(i,!0)}},_getSliderComponent:function(){var t=this,e=-1,n=new nhn.mapcore.Slider(this.elSlider,{vertical:!0,classPrefix:"nmap_slider_new-"}).attach({beforechange:function(n){n.pos<t.SLIDER_START_POS?n.pos=t.SLIDER_START_POS:n.pos>t.SLIDER_END_POS&&(n.pos=t.SLIDER_END_POS);var i=parseInt(n.pos/t.SLIDER_UNIT_SIZE,10)-1;n.pos=i*t.SLIDER_UNIT_SIZE+t.SLIDER_START_POS;var o=t.oOpenMap.getMinMaxLevel(),a=o[0],s=o[1];e=s-a-i+a,t._fireZoomChange(e,!1),t._setZoomLevel(e)}}),i=n.getDragArea();return i.attach({handledown:function(e){e.event.stop(),t.fireEvent("handledown")},handleup:function(e){t.fireEvent("handleup")}}),n},_fireZoomChange:function(t,e){t=this._getValidLevel(t),t!==this.oOpenMap.getLevel()&&(this.oOpenMap.setLevel(t,e?{useEffect:this.useEffect,centerMark:this.useCenterMark}:null),this._controlButtonDimmed())},_getValidLevel:function(t){var e=this.oOpenMap.getMinMaxLevel(),n=e[0],i=e[1];return t<=n?n:t>=i?i:t},_showLegend:function(t){var e=t.currentElement,n=t.element,i=e==n||function(){for(;n&&n.parentNode;)if(n=n.parentNode,e==n)return!0;return!1}();i&&(this.elLegend.style.display="block",this.elLegend.style.zoom=1,this.elLegend.style.zoom="")},_hideLegend:function(){this.elLegend.style.display="none",this.elLegend.style.zoom=1,this.elLegend.style.zoom=""},_setZoomLevel:function(t){var e=this.oOpenMap.getMinMaxLevel(),n=e[0],i=e[1];if(t>=n&&t<=i){var o=(i-t)*this.SLIDER_UNIT_SIZE+this.SLIDER_START_POS;this.elScaleOff.style.height=o+"px";var a=this;setTimeout(function(){a.oSlider&&a.oSlider.positions(0,o,!1)},0)}this._controlButtonDimmed()},_controlButtonDimmed:function(){var t=this.elPlus,e=this.elMinus,n=this.oOpenMap.getMinMaxLevel(),i=n[0],o=n[1],a=this.oOpenMap.getLevel();a==o?nhn.mapcore.Util.mapSetClass(t,this.DIMMED_CLASS):nhn.mapcore.Util.mapRemoveClass(t,this.DIMMED_CLASS),a==i?nhn.mapcore.Util.mapSetClass(e,this.DIMMED_CLASS):nhn.mapcore.Util.mapRemoveClass(e,this.DIMMED_CLASS)},_setZoomRange:function(t,e){if(t=parseInt(t,10),e=parseInt(e,10),t<this.MIN_ZOOMLEVEL||e>this.MAX_ZOOMLEVEL||e<t)throw new Error("\uc90c \ub808\ubca8 \uac12\uc758 \ubc94\uc704\uc124\uc815\uc774 \uc798\ubabb\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");if(this.isSlideType){var n=e-t+1;this.elZoom.className=this.elZoom.className.replace(/nmap_scaler_new_s(\d)+/,"nmap_scaler_new_s"+n),this.elLegend.className=this.elLegend.className.replace(/nmap_scaler_new_m(\d)+/,"nmap_scaler_new_m"+e);var i=this.SLIDER_UNIT_SIZE*n;this.elZoom.style.height=68+i+"px",this.elController.style.height=68+i+"px",this.elSlider.style.height=28+i+"px";var o=jindo.$$.getSingle("div.nmap_ctr_scale_new_on",this.elZoom);o.style.height=28+i+"px";var a=jindo.$$.getSingle("div.nmap_ctr_minus_new",this.elZoom);a.style.top=42+i+"px",this.elLegend.style.height=7+i+"px",this.SLIDER_END_POS=(e-t)*this.SLIDER_UNIT_SIZE+this.SLIDER_START_POS,this._setZoomLevel({toLevel:this.oOpenMap.getLevel()})}},_setRealtyLegend:function(t){var e=0===t;e?nhn.mapcore.Util.mapSetClass(this.elZoom,this.REALTY_LEGEND_CLASS):nhn.mapcore.Util.mapRemoveClass(this.elZoom,this.REALTY_LEGEND_CLASS)},_setZoomType:function(){this.isSlideType=this.oOptions.zoomStyle===this.sSlideTypeStyle,this.isBtnType=this.oOptions.zoomStyle===this.sBtnTypeStyle},getElement:function(){return this.elZoom},_updatePosition:function(){this.$super._updatePosition(),"right"===this.oOptions.hPosition?nhn.mapcore.Util.mapRemoveClass(this.elZoom,"nmap_scaler_new_left"):nhn.mapcore.Util.mapSetClass(this.elZoom,"nmap_scaler_new_left")},onremove:function(){this.oOpenMap&&((this.isSlideType||this.isBtnType)&&this.oOpenMap.detach("zoom",this._fnZoomHandler),this.oOpenMap.detach("changeMapMode",this._fnChangeMapMode),this.oOpenMap.detach("changeMinMaxLevel",this._fnChangeMinMaxHandler),nhn.api.map.Map._objectManager._unregisterMapObject(this),this.oOpenMap=null)},destroy:function(){this.isSlideType?(this._fnOverHandler.detach(elPlus,"mouseover").detach(elMinus,"mouseover").detach(elPlus,"focus").detach(elMinus,"focus"),this._fnOutHandler.detach(elPlus,"mouseout").detach(elMinus,"mouseout").detach(elPlus,"blur").detach(elMinus,"blur"),this._fnShowLegend.detach(elPlusLink,"focus").detach(elMinus,"focus"),this._fnHideLegend.detach(elPlusLink,"blur").detach(elMinus,"blur"),this.oSlider.deactivate(),this.oSlider=null,this._fnZoomHandler=null,this._fnOverHandler=null,this._fnOutHandler=null,this._fnShowLegend=null,this._fnHideLegend=null):this.isBtnType&&(this._fnZoomHandler=null),this.oBubbler.detach(this.oHandlersInBubbler),this.oBubbler=null,this._fnChangeMapMode=null,this._fnChangeMinMaxHandler=null,this.onremove()}}).extend(nhn.api.map.AbstractCommonControl),nhn.api.map.TrafficMapBtn_v2=jindo.$Class({sTemplate:['<div class="nmap_btn nmap_realtime_new" style="top:30px; right:180px;">','<a href="#"><span class="nmap_btn_wrap">\uad50\ud1b5\uc0c1\ud669</span></a>',"</div>"].join(""),oDefaultPosition:{top:30,right:180},$init:function(t){this.oOptions=nhn.mapcore.Util.fillOptions(t,{position:this.oDefaultPosition,enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1,enableBubbling:!1}),this.elButton=jindo.$(this.sTemplate),this.elLink=jindo.$$.getSingle("a",this.getElement()),this._fnClickHandler=jindo.$Fn(function(t){var e=!nhn.mapcore.Util.mapGetClass(this.elLink,"nmap_on");this.oOpenMap.activateTrafficMap(e),e&&this.oOpenMap.reloadTraffic(),t.stopDefault()},this).attach(this.elLink,"click"),this._fnMouseOverProcess=jindo.$Fn(function(t){var e=!nhn.mapcore.Util.mapGetClass(this.elLink,"nmap_over");e&&nhn.mapcore.Util.mapSetClass(this.elLink,"nmap_over")},this).attach(this.elLink,"mouseenter"),this._fnMouseOutProcess=jindo.$Fn(function(t){var e=nhn.mapcore.Util.mapGetClass(this.elLink,"nmap_over");e&&nhn.mapcore.Util.mapRemoveClass(this.elLink,"nmap_over")},this).attach(this.elLink,"mouseleave"),this._fillPosition(this.oDefaultPosition)},onadd:function(t){this.oOpenMap&&this.onremove(),this.oOpenMap=t,this._fnTurnOnOff=jindo.$Fn(function(t){"traffic"===t.theme&&this.turnOnOrOff(t.isActivated)},this).bind(),this.oOpenMap.attach("changeThemeMap",this._fnTurnOnOff),this.oOpenMap.isTrafficMapActivated()&&this.turnOnOrOff(!0),this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling),nhn.api.map.Map._objectManager._registerMapObject(this)},turnOnOrOff:function(t){t?nhn.mapcore.Util.mapSetClass(this.elLink,"nmap_on"):nhn.mapcore.Util.mapRemoveClass(this.elLink,"nmap_on")},getElement:function(){return this.elButton},onremove:function(){this.oOpenMap&&(this.oOpenMap.detach("changeThemeMap",this._fnTurnOnOff),nhn.api.map.Map._objectManager._unregisterMapObject(this),this.oOpenMap=null)},destroy:function(){this._fnClickHandler.detach(this.elLink,"click"),this._fnMouseOverProcess.detach(this.elLink,"mouseenter"),this._fnMouseOutProcess.detach(this.elLink,"mouseleave"),this._fnClickHandler=null,this._fnTurnOnOff=null,this._fnMouseOverProcess=null,this._fnMouseOutProcess=null,this.onremove()}}).extend(nhn.api.map.AbstractCommonControl),nhn.api.map.MapTypeBtn_v2=jindo.$Class({sTemplate:['<div class="nmap_btn nmap_sel_basic_new">','<div class="nmap_sel_normal">','<a href="#" class="nmap_on"><span class="nmap_btn_wrap">\uc77c\ubc18</span></a>',"</div>",'<div class="nmap_sel_satellite">','<a href="#"><span class="nmap_btn_wrap">\uc704\uc131</span></a>','<div class="nmap_lay_default nmap_lay_satellite">','<div class="nmap_lay_body">',"<div>",'<input type="checkbox" class="nmap_ip_check" id="ip_check3" checked="checked"> ','<label for="ip_check3">\uacb9\uccd0\ubcf4\uae30</label>',"</div>","</div>","</div>","</div>","</div>"].join(""),oDefaultPosition:{top:10,left:100},$init:function(t){this.oOptions=nhn.mapcore.Util.fillOptions(t,{position:this.oDefaultPosition,hybridPosition:"right",enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1,enableBubbling:!1}),this.elButton=jindo.$(this.sTemplate),this.elSatelliteBtn=jindo.$$.getSingle("div.nmap_sel_satellite",this.getElement()),this.welNormalLink=jindo.$Element(jindo.$$.getSingle("div.nmap_sel_normal > a",this.getElement())),this.welSatelliteLink=jindo.$Element(jindo.$$.getSingle("a",this.elSatelliteBtn)),this.welOverlappedLayer=jindo.$Element(jindo.$$.getSingle("div.nmap_lay_default",this.getElement())),this.elOverlappedCBox=jindo.$$.getSingle("input[id=ip_check3]",this.welOverlappedLayer.$value()),this._fillPosition(this.oDefaultPosition),this._attachDOMEvent(),this._createFnOverlappedLayer(),this._fnChangeMapModeHandler=jindo.$Fn(function(t){this._update(t.mode)},this).bind()},_attachDOMEvent:function(){this._fnNormalHandler=jindo.$Fn(function(t){this._isNormalMapActivated()||(this.oOpenMap.setMapMode(0),this.welOverlappedLayer.hide()),t.stop(jindo.$Event.CANCEL_DEFAULT)},this).attach(this.welNormalLink.$value(),"click"),this._fnSatelliteHandler=jindo.$Fn(function(t){this._isSatelliteMapActivated()||(this.oOpenMap.setMapMode(this.isHybridOn?1:2),this.welOverlappedLayer.show()),t.stop(jindo.$Event.CANCEL_DEFAULT)},this).attach(this.welSatelliteLink.$value(),"click"),
this._fnHybridHandler=jindo.$Fn(function(t){var e=this;setTimeout(function(){e.isHybridOn=e.elOverlappedCBox.checked,e.oOpenMap.setMapMode(e.isHybridOn?1:2)},0)},this).attach(this.elOverlappedCBox,"click"),this._fnMouseEnterInNormalHandler=jindo.$Fn(function(t){var e=!nhn.mapcore.Util.mapGetClass(this.welNormalLink.$value(),"nmap_over");e&&nhn.mapcore.Util.mapSetClass(this.welNormalLink.$value(),"nmap_over")},this).attach(this.welNormalLink.$value(),"mouseenter"),this._fnMouseEnterInSatelliteHandler=jindo.$Fn(function(t){var e=!nhn.mapcore.Util.mapGetClass(this.welSatelliteLink.$value(),"nmap_over");e&&nhn.mapcore.Util.mapSetClass(this.welSatelliteLink.$value(),"nmap_over")},this).attach(this.welSatelliteLink.$value(),"mouseenter"),this._fnMouseOutInNormalHandler=jindo.$Fn(function(t){var e=nhn.mapcore.Util.mapGetClass(this.welNormalLink.$value(),"nmap_over");e&&nhn.mapcore.Util.mapRemoveClass(this.welNormalLink.$value(),"nmap_over")},this).attach(this.welNormalLink.$value(),"mouseleave"),this._fnMouseOutInSatelliteHandler=jindo.$Fn(function(t){var e=nhn.mapcore.Util.mapGetClass(this.welSatelliteLink.$value(),"nmap_over");e&&nhn.mapcore.Util.mapRemoveClass(this.welSatelliteLink.$value(),"nmap_over")},this).attach(this.welSatelliteLink.$value(),"mouseleave")},_createFnOverlappedLayer:function(){var t=null;this._fnExtendOverlappedLayer=jindo.$Fn(function(){this._isSatelliteMapActivated()&&(t&&clearTimeout(t),this.welOverlappedLayer.show())},this),this._fnFoldOverlappedLayer=jindo.$Fn(function(){if(this._isSatelliteMapActivated()){var e=this;t=setTimeout(function(){e.welOverlappedLayer.hide(),t=null},0)}},this),this._fnExtendOverlappedLayer.attach(this.elSatelliteBtn,"mouseenter").attach(this.welSatelliteLink,"focus").attach(this.elOverlappedCBox,"focus"),this._fnFoldOverlappedLayer.attach(this.elSatelliteBtn,"mouseleave").attach(this.welSatelliteLink,"blur").attach(this.elOverlappedCBox,"blur")},onadd:function(t){this.oOpenMap&&this.onremove(),this.oOpenMap=t,this.isHybridOn=2!=this.oOpenMap.getMapMode(),this.oOpenMap.attach("changeMapMode",this._fnChangeMapModeHandler),this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling),this._update(this.oOpenMap.getMapMode()),this._updatePosition(),nhn.api.map.Map._objectManager._registerMapObject(this)},_update:function(t){var e=0===t;e?(this.welNormalLink.addClass("nmap_on"),this.welSatelliteLink.removeClass("nmap_on"),this.welOverlappedLayer.hide()):(this.welSatelliteLink.addClass("nmap_on"),this.welNormalLink.removeClass("nmap_on"),this.elOverlappedCBox.checked=1==t)},_isNormalMapActivated:function(){return this.welNormalLink.hasClass("nmap_on")},_isSatelliteMapActivated:function(){return this.welSatelliteLink.hasClass("nmap_on")},getElement:function(){return this.elButton},_updatePosition:function(){this.$super._updatePosition(),"right"===this.oOptions.hPosition&&this.oOptions.hMargin<35?this.welOverlappedLayer.addClass("nmap_lay_satellite_r"):this.welOverlappedLayer.removeClass("nmap_lay_satellite_r"),"bottom"===this.oOptions.vPosition&&this.oOptions.vMargin<27?this.welOverlappedLayer.addClass("nmap_lay_satellite_t"):this.welOverlappedLayer.removeClass("nmap_lay_satellite_t"),"left"===this.oOptions.hybridPosition&&this.welOverlappedLayer.addClass("nmap_lay_satellite_r")},onremove:function(){this.oOpenMap&&(this.oOpenMap.detach("changeMapMode",this._fnChangeMapModeHandler),nhn.api.map.Map._objectManager._unregisterMapObject(this),this.oOpenMap=null)},destroy:function(){this._fnNormalHandler.detach(this.welNormalLink.$value(),"click"),this._fnSatelliteHandler.detach(this.welSatelliteLink.$value(),"click"),this._fnHybridHandler.detach(this.elOverlappedCBox,"click"),this._fnExtendOverlappedLayer.detach(this.elSatelliteBtn,"mouseenter").detach(this.welSatelliteLink,"focus").detach(this.elOverlappedCBox,"focus"),this._fnFoldOverlappedLayer.detach(this.elSatelliteBtn,"mouseleave").detach(this.welSatelliteLink,"blur").detach(this.elOverlappedCBox,"blur"),this._fnNormalHandler=null,this._fnSatelliteHandler=null,this._fnHybridHandler=null,this._fnExtendOverlappedLayer=null,this._fnFoldOverlappedLayer=null,this.onremove()}}).extend(nhn.api.map.AbstractCommonControl),nhn.api.map.BicycleGuide=jindo.$Class({sTemplate:['<div class="nmap_legend_wrap" style="margin:0;">','<div class="nmap_lay_bicycle_legend nmap_lay_bicycle_legend_expand">','<div class="nmap_bg"></div>','<div class="nmap_lay_heading">\uc790\uc804\uac70 \uc9c0\ub3c4 \ubc94\ub840</div>','<div class="nmap_lay_action">','<a class="_nmap_layer_expand_or_fold" href="#" style="border:0;">','<img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="15" height="15" alt="\uc811\uae30" title="\uc811\uae30">',"</a>","</div>",'<div class="nmap_legend_type_wrap">','<ul class="nmap_legend_type">','<li class="nmap_legend_type1 nmap_on">','<a class="_nmap_layer_tab_click" href="#">\ub3c4\ub85c\uc548\ub0b4</a>',"<div>","<ul>",'<li class="nmap_col1">\uc790\uc804\uac70 \uc804\uc6a9\ub3c4\ub85c</li>','<li class="nmap_col2">\uc9c4\uc785\ubc29\uc9c0\ub300</li>','<li class="nmap_col3">\uacf5\uc0ac\uc911 \ud45c\uc2dc</li>','<li class="nmap_col1">\ubcf4\ud589\uc790 \uacb8\uc6a9\ub3c4\ub85c</li>','<li class="nmap_col2">\ubc29\uc9c0\ud131</li>','<li class="nmap_col3">\ud1b5\ud589\ubd88\uac00 \ub3c4\ub85c</li>',"</ul>","</div>","</li>",'<li class="nmap_legend_type2">','<a class="_nmap_layer_tab_click" href="#">\uc9c4\uc785\ub85c</a>',"<div>","<ul>",'<li class="nmap_col1">\uacc4\ub2e8</li>','<li class="nmap_col2">\uc5d8\ub9ac\ubca0\uc774\ud130</li>','<li class="nmap_col3">\uad50\ub7c9</li>','<li class="nmap_col1">\uacbd\uc0ac\ub85c&middot;\uc721\uad50</li>','<li class="nmap_col2">\uc778\ub3c4</li>','<li class="nmap_col3">\ub300\ud45c\uc9c4\uc785\ub85c</li>','<li class="nmap_col1">\ud1a0\ub07c\uad74&middot;\uc9c0\ud558\ub3c4</li>','<li class="nmap_col2 col2_1">\ucc28\ub3c4</li>',"</ul>","</div>","</li>",'<li class="nmap_legend_type3">','<a  class="_nmap_layer_tab_click" href="#">\ud3b8\uc758\uc2dc\uc124</a>',"<div>","<ul>",'<li class="nmap_col1">\ud654\uc7a5\uc2e4</li>','<li class="nmap_col2">\uc790\uc804\uac70 \ubcf4\uad00</li>','<li class="nmap_col3">\uacf5\uae30\uc8fc\uc785</li>','<li class="nmap_col1">\ub9e4\uc810</li>','<li class="nmap_col2">\uae09\uc218&middot;\uc0e4\uc6cc</li>','<li class="nmap_col3">\uc27c\ud130&middot;\ubca4\uce58&middot;\ud3c9\uc0c1</li>','<li class="nmap_col1">\uc790\uc804\uac70 \ub300\uc5ec</li>','<li class="nmap_col2">\ud734\uc9c0\ud1b5</li>','<li class="nmap_col3">\ud310\ub9e4 \uc218\ub9ac\uc810</li>',"</ul>","</div>","</li>","</ul>","</div>","</div>","</div>"].join(""),CLASS_FOR_EXPAND:"nmap_lay_bicycle_legend_expand",CLASS_FOR_TABOPEN:"nmap_on",CLASS_FOR_CLICK:"_nmap_layer_expand_or_fold",CLASS_FOR_TABCLICK:"_nmap_layer_tab_click",oDefaultPosition:{bottom:56,left:10},$init:function(t){this.oOptions=nhn.mapcore.Util.fillOptions(t,{position:this.oDefaultPosition,enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1,enableBubbling:!1}),this.welLayer=jindo.$Element(this.sTemplate),this.welLegend=jindo.$Element(jindo.$$.getSingle("div.nmap_lay_bicycle_legend",this.getElement())),this.aTabElements=jindo.$$("a._nmap_layer_tab_click",this.getElement()),this.aTabListElements=jindo.$$("ul.nmap_legend_type > li > div > ul",this.getElement()),this.fnBubblerHandlers={"_nmap_layer_expand_or_fold:click":jindo.$Fn(this._onClick,this).bind(),"_nmap_layer_tab_click:click":jindo.$Fn(this._onClickTab,this).bind()},this.oBubbler=new nhn.mapcore.Util.Bubbler(this.getElement()).attach(this.fnBubblerHandlers),this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling),this._fillPosition(this.oDefaultPosition)},onadd:function(t){this.oOpenMap&&this.onremove(),this.oOpenMap=t,nhn.api.map.Map._objectManager._registerMapObject(this)},_onClick:function(t){t.stop(jindo.$Event.CANCEL_DEFAULT),this._expandOrFold(!this._isLayerExpanded())},_expandOrFold:function(t){var e="";t?(this.welLegend.addClass(this.CLASS_FOR_EXPAND),this.welLegend.removeClass(this.CLASS_FOR_CLICK),e="\uc811\uae30"):(this.welLegend.removeClass(this.CLASS_FOR_EXPAND),this.welLegend.addClass(this.CLASS_FOR_CLICK),e="\ud3bc\uce58\uae30");var n=jindo.$$.getSingle("a."+this.CLASS_FOR_CLICK+" > IMG",this.welLayer.$value());n.title=n.alt=e},_onClickTab:function(t){t.stop(jindo.$Event.CANCEL_DEFAULT),this._changeTab(t.element)},_changeTab:function(t){for(var e,n=0;n<this.aTabElements.length;n++){e=this.aTabElements[n];var i=e==t;i?(nhn.mapcore.Util.mapSetClass(e,this.CLASS_FOR_TABOPEN),nhn.mapcore.Util.mapSetClass(e.parentNode,this.CLASS_FOR_TABOPEN),this.aTabListElements[n].style.display="block"):(nhn.mapcore.Util.mapRemoveClass(e,this.CLASS_FOR_TABOPEN),nhn.mapcore.Util.mapRemoveClass(e.parentNode,this.CLASS_FOR_TABOPEN),this.aTabListElements[n].style.display="none")}},_isLayerExpanded:function(){return this.welLegend.hasClass(this.CLASS_FOR_EXPAND)},setVisible:function(t){var e=this.getVisible(),t=!!t;t?(this._expandOrFold(!0),this._changeTab(this.aTabElements[0]),this.welLayer.show()):this.welLayer.hide(),e!=t&&this.fireEvent("changeVisible",{visible:t})},getVisible:function(){return this.welLayer.visible()},getElement:function(){return this.welLayer.$value()},onremove:function(){this.oOpenMap&&(nhn.api.map.Map._objectManager._unregisterMapObject(this),this.oOpenMap=null)},destroy:function(){this.oBubbler.detach(this.fnBubblerHandlers),this.oBubbler=null,this.onremove()}}).extend(nhn.api.map.AbstractCommonControl),nhn.api.map.TrafficGuide=jindo.$Class({sTemplate:['<div class="nmap_traffic_wrap">','<div class="nmap_traffic_legend_bg"></div>','<div class="nmap_traffic_legend">','<strong class="nmap_good">\uc6d0\ud65c</strong>','<ul class="nmap_traffic_status">',"<li>",'<img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="37" height="14" alt="\uc6d0\ud65c">','<div class="nmap_traffic_status_detail nmap_traffic_status_detail1">','<div class="nmap_traffic_detail_inner">','<span class="nmap_traffic_space">\uc77c\ubc18\ub3c4\ub85c</span> <span class="nmap_num">30km/h</span>\uc774\uc0c1<br>','<span class="nmap_traffic_space">\uad6d\ub3c4</span> <span class="nmap_num">50km/h</span>\uc774\uc0c1<br>','<span class="nmap_traffic_space">\ub3c4\uc2dc\uace0\uc18d</span> <span class="nmap_num">60km/h</span>\uc774\uc0c1<br>','<span class="nmap_traffic_space">\uace0\uc18d\ub3c4\ub85c</span> <span class="nmap_num">70km/h</span>\uc774\uc0c1',"</div>","</div>","</li>","<li>",'<img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="37" height="14" alt="\uc11c\ud589">','<div class="nmap_traffic_status_detail nmap_traffic_status_detail2">','<div class="nmap_traffic_detail_inner">','<span class="nmap_traffic_space">\uc77c\ubc18\ub3c4\ub85c</span> <span class="nmap_num">20~30km/h</span><br>','<span class="nmap_traffic_space">\uad6d\ub3c4</span> <span class="nmap_num">30~50km/h</span><br>','<span class="nmap_traffic_space">\ub3c4\uc2dc\uace0\uc18d</span> <span class="nmap_num">40~60km/h</span><br>','<span class="nmap_traffic_space">\uace0\uc18d\ub3c4\ub85c</span> <span class="nmap_num">50~70km/h</span>',"</div>","</div>","</li>","<li>",'<img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="37" height="14" alt="\uc9c0\uccb4">','<div class="nmap_traffic_status_detail nmap_traffic_status_detail3">','<div class="nmap_traffic_detail_inner">','<span class="nmap_traffic_space">\uc77c\ubc18\ub3c4\ub85c</span> <span class="nmap_num">10~20km/h</span><br>','<span class="nmap_traffic_space">\uad6d\ub3c4</span> <span class="nmap_num">20~30km/h</span><br>','<span class="nmap_traffic_space">\ub3c4\uc2dc\uace0\uc18d</span> <span class="nmap_num">30~40km/h</span><br>','<span class="nmap_traffic_space">\uace0\uc18d\ub3c4\ub85c</span> <span class="nmap_num">30~50km/h</span>',"</div>","</div>","</li>","<li>",'<img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="37" height="14" alt="\uc815\uccb4">','<div class="nmap_traffic_status_detail nmap_traffic_status_detail4">','<div class="nmap_traffic_detail_inner">','<span class="nmap_traffic_space">\uc77c\ubc18\ub3c4\ub85c</span> <span class="nmap_num">10km/h</span>\ubbf8\ub9cc<br>','<span class="nmap_traffic_space">\uad6d\ub3c4</span> <span class="nmap_num">20km/h</span>\ubbf8\ub9cc<br>','<span class="nmap_traffic_space">\ub3c4\uc2dc\uace0\uc18d</span> <span class="nmap_num">30km/h</span>\ubbf8\ub9cc<br>','<span class="nmap_traffic_space">\uace0\uc18d\ub3c4\ub85c</span> <span class="nmap_num">30km/h</span>\ubbf8\ub9cc',"</div>","</div>","</li>","</ul>",'<strong class="nmap_bad">\uc815\uccb4</strong>','<div class="nmap_action">','<span class="nmap_time">12:30 <span>\ud604\uc7ac</span></span>','<a href="#" class="nmap_refresh"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="19" height="17" alt="\uc0c8\ub85c \uace0\uce68"></a>','<a href="#" class="nmap_close"><img src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps2/blank.gif" width="19" height="17" alt="\ub808\uc774\uc5b4 \ub2eb\uae30"></a>',"</div>","</div>","</div>"].join(""),TRAFFIC_UPDATE_URL:nhn.mapcore.mapSpec.SSL?"https://ssl.map.naver.com/rts/wmts?request=GetLastVersion":"http://api2.map.naver.com/traffic/trafficUpdateTime.nhn",oDefaultPosition:{bottom:24,left:10},$init:function(t){this.oOptions=nhn.mapcore.Util.fillOptions(t,{position:this.oDefaultPosition,enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1,enableBubbling:!1});var e=this;this.oAjax=new nhn.mapcore.Util.JSONP,this.oAjax.attach("load",function(t){e._responseTrafficTime(t.response)}),this.weLayer=jindo.$Element(this.sTemplate),this.weTime=jindo.$Element(jindo.$$.getSingle("span.nmap_time",this.getElement())),this.fnBubblerHandlers={"nmap_close:click":jindo.$Fn(function(t){this.setVisible(!1),t.stopDefault()},this).bind(),"nmap_refresh:click":jindo.$Fn(function(t){this.oOpenMap.reloadTraffic(),t.stopDefault()},this).bind()},this.oBubbler=new nhn.mapcore.Util.Bubbler(this.getElement()).attach(this.fnBubblerHandlers),this._attachLegendHandler(),this._fillPosition(this.oDefaultPosition),this._wfpOnReloadTraffic=jindo.$Fn(function(t){this._refreshTrafficPaneByJSONP()},this).bind()},onadd:function(t){this.oOpenMap&&this.onremove(),this.oOpenMap=t,this._refreshTrafficPaneByJSONP(),this.oOpenMap.attach("reloadTraffic",this._wfpOnReloadTraffic),this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling),nhn.api.map.Map._objectManager._registerMapObject(this)},_attachLegendHandler:function(){var t=[];jindo.$A(jindo.$$("ul.nmap_traffic_status > li",this.weLayer.$value())).forEach(function(e,n){var i=jindo.$$.getSingle("div.nmap_traffic_status_detail",e);t.push(jindo.$Fn(function(){nhn.mapcore.Util.mapSetClass(i,"nmap_show")}).attach(e,"mouseover"),e,"mouseover"),t.push(jindo.$Fn(function(){nhn.mapcore.Util.mapRemoveClass(i,"nmap_show")}).attach(e,"mouseout"),e,"mouseout")}),this._fnHandlers=t},_refreshTrafficPaneByJSONP:function(t){t&&t.stop(jindo.$Event.CANCEL_DEFAULT),this.oAjax.request(this.TRAFFIC_UPDATE_URL,{caller:"map_openapi",output:"json",encoding:"UTF-8"})},_padNumWithZero:function(t,e){var n=""+t,i=e-n.length;if(i>0){var o=new Array(i+1);return o.join("0")+n}return n},_responseTrafficTime:function(t){if(t.trafficUpdateTime||t.updateDate){/^(.+)\s(.+)$/.test(t.trafficUpdateTime||t.updateDate);var e=RegExp.$1,n=RegExp.$2;/^([0-9]+):([0-9]+):([0-9]+)/.test(n);var i=parseInt(RegExp.$1,10),o=parseInt(RegExp.$2,10),a=this._padNumWithZero(i,2)+":"+this._padNumWithZero(o,2);this.weTime.html(a+" <span>\ud604\uc7ac</span>")}},setVisible:function(t){var e=this.getVisible(),t=!!t;t?this.weLayer.show():this.weLayer.hide(),e!=t&&this.fireEvent("changeVisible",{visible:t})},getVisible:function(){return this.weLayer.visible()},_updatePosition:function(){this.$super._updatePosition(),"top"===this.oOptions.vPosition&&this.oOptions.vMargin<61?this.weLayer.addClass("nmap_traffic_wrap_t"):this.weLayer.removeClass("nmap_traffic_wrap_t")},getElement:function(){return this.weLayer.$value()},onremove:function(){this.oOpenMap&&(this.oOpenMap.detach("reloadTraffic",this._wfpOnReloadTraffic),nhn.api.map.Map._objectManager._unregisterMapObject(this),this.oOpenMap=null)},destroy:function(){this.oBubbler.detach(this.fnBubblerHandlers),this.oBubbler=null,this.oAjax=null;for(var t,e,n,i=0;i<this._fnHandlers.legnth;i+=3)t=this._fnHandlers[i],e=this._fnHandlers[i+1],n=this._fnHandlers[i+2],t.detach(e,n);this.onremove()}}).extend(nhn.api.map.AbstractCommonControl),nhn.api.map.Polyline=nhn.mapcore.Polyline,nhn.api.map.Polygon=nhn.mapcore.Polygon,nhn.api.map.MultiPolygon=nhn.mapcore.MultiPolygon,nhn.mapcore.Util.extend(nhn.api.map.Polyline.prototype,nhn.api.map.MapObject.prototype),nhn.mapcore.Util.extend(nhn.api.map.Polygon.prototype,nhn.api.map.MapObject.prototype),nhn.mapcore.Util.extend(nhn.api.map.MultiPolygon.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.Circle=jindo.$Class({matchedClass:"nmap_drawing_pane",pathType:"ClosedPath",_styleKeys:{strokeWidth:"stroke-width",strokeColor:"stroke",strokeOpacity:"stroke-opacity",fillColor:"fill",fillOpacity:"fill-opacity"},_PiValue:3.14,$init:function(t){this._oOptions=t||{},this.circleElement=new nhn.map.shape.Circle,"SVG"==nhn.map.shape.DrawingUtil.getDrawingType()&&(this.wrap=jindo.$("<div>"),this.wrap.style.cssText="border:0; margin:0; padding:0",this.wrap.appendChild(this.circleElement.getElement())),this.setStyle(t||{})},setStyle:function(t,e){if(2==arguments.length){var n={};return n[this._styleKeys[t]||t]=e,this.circleElement.setOptions(n),"centerPoint"==t&&e.toInner&&this.setCenterPoint(e),void("radius"!=t||isNaN(e)||this.setRadius(e))}var i=t,o=arguments.callee,a=this;jindo.$H(i).forEach(function(t,e){o.call(a,e,t)})},getStyle:function(t){if(1==arguments.length){var e=this._styleKeys[t]||t;return this.circleElement.options[e]}var n={},i=arguments.callee,o=this;return jindo.$H(this._styleKeys).forEach(function(t,e){n[e]=i.call(o,e)}),n},onadd:function(t){t&&(this.pane=t),"Path"==this.pathType&&this.setStyle("fill","none"),nhn.api&&nhn.api.map&&nhn.api.map.Map._objectManager._registerMapObject(this),this.redraw()},onremove:function(){nhn.api&&nhn.api.map&&nhn.api.map.Map._objectManager._unregisterMapObject(this)},getElement:function(){return this.wrap?this.wrap:this.circleElement.getElement()},setRadius:function(t){isNaN(t)||(this._radius=t),this.redraw()},getRadius:function(){return this._radius},setCenterPoint:function(t){this._centerPointToInner=t.toInner(),this.redraw()},getCenterPoint:function(){return fpOpenAPIDefaultConv(this._centerPointToInner&&this._centerPointToInner.copy())},redraw:function(t,e){if(this.pane){t=t||this._centerPointToInner;var n=this.pane.fromPointToOffset(t),i=nhn.mapcore.mapSpec.distancePerPixel(this.pane._oParent.oApp.getZoomLevel());e=Math.round(this._radius/i),this.circleElement.setCenter(n),this.circleElement.setRadius(e)}},getArea:function(){return this._radius*this._radius*3.14},getLength:function(){return 2*this._radius*3.14},destroy:function(){this.circleElement.clear()}}),nhn.mapcore.Util.extend(nhn.api.map.Circle.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.GroupOverlay=jindo.$Class({matchedClass:"nmap_overlay_pane",$init:function(t){var e=nhn.mapcore.Util.fillOptions(t,{});this.aOverlays=[],this._elEl=jindo.$("<div>"),this._welEl=jindo.$Element(this._elEl),this._welEl.css({padding:0,margin:0,border:0,position:"static"})},fromPointToOffset:function(t){return this._oParent?this._oParent.fromPointToOffset(t):{x:0,y:0}},fromOffsetToPoint:function(t){return this._oParent?this._oParent.fromOffsetToPoint(t):{x:0,y:0}},setVisible:function(t){var e=this.getVisible(),t=!!t;this._welEl.visible(t),e!=t&&this.fireEvent("changeVisible",{visible:t})},getVisible:function(){return this._welEl.visible()},addOverlay:function(t){if(!this._hasOverlayInterface(t))throw new Error("Overlay which appended to pane has insufficient Overlay interface.");this.aOverlays.push(t);var e=this.getElement(),n=t.getElement();if(n instanceof Array)for(var i=n,o=0;o<i.length;o++)e.appendChild(i[o]);else e.appendChild(n);t.onadd&&t.onadd(this)},removeOverlay:function(t){var e=this.aOverlays.indexOf(t);if(e!=-1){this.aOverlays.splice(e,1);var n=this.getElement(),i=t.getElement();if(i instanceof Array)for(var o=i,a=0;a<o.length;a++)n.removeChild(o[a]);else n.removeChild(i);t.onremove&&t.onremove(this)}},_hasOverlayInterface:function(t){return t.redraw&&t.destroy&&t.getElement},clearOverlay:function(){for(var t=this.aOverlays,e=t.length,n=e-1;n>=0;n--){var i=t[n];this.removeOverlay(i)}},redraw:function(){var t,e;for(t=0;t<this.aOverlays.length;t++)e=this.aOverlays[t],e.redraw.apply(e,arguments)},onadd:function(t){this._oParent=t,nhn.api.map.Map._objectManager._registerMapObject(this)},onremove:function(){nhn.api.map.Map._objectManager._unregisterMapObject(this)},getElement:function(){return this._elEl},destroy:function(){this.clearOverlay(),this.onremove()}}),nhn.mapcore.Util.extend(nhn.api.map.GroupOverlay.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.BicycleButton=jindo.$Class({sTemplate:'<div class="nmap_btn nmap_bicycle" style="top:10px;right:10px"><a href="#"><span class="nmap_btn_wrap">\uc790\uc804\uac70</span></a></div>',oDefaultPosition:{top:6,right:166},$init:function(t){this.oOptions=nhn.mapcore.Util.fillOptions(t,{position:this.oDefaultPosition,enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1,enableBubbling:!1}),this.elButton=jindo.$(this.sTemplate),this.elLink=jindo.$$.getSingle("a",this.getElement()),this._fnClickHandler=jindo.$Fn(function(t){var e=!nhn.mapcore.Util.mapGetClass(this.elLink,"nmap_on");this.oOpenMap.activateBicycleMap(e),t.stopDefault()},this).attach(this.elLink,"click"),this._fnMouseOverProcess=jindo.$Fn(function(t){var e=!nhn.mapcore.Util.mapGetClass(this.elLink,"nmap_over");e&&nhn.mapcore.Util.mapSetClass(this.elLink,"nmap_over")},this).attach(this.elLink,"mouseenter"),this._fnMouseOutProcess=jindo.$Fn(function(t){var e=nhn.mapcore.Util.mapGetClass(this.elLink,"nmap_over");e&&nhn.mapcore.Util.mapRemoveClass(this.elLink,"nmap_over")},this).attach(this.elLink,"mouseleave"),this._fillPosition(this.oDefaultPosition)},onadd:function(t){this.oOpenMap&&this.onremove(),this.oOpenMap=t,this._fnTurnOnOff=jindo.$Fn(function(t){"bicycle"===t.theme&&this.turnOnOrOff(t.isActivated)},this).bind(),this.oOpenMap.attach("changeThemeMap",this._fnTurnOnOff),this.oOpenMap.isBicycleMapActivated()&&this.turnOnOrOff(!0),this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling),nhn.api.map.Map._objectManager._registerMapObject(this)},turnOnOrOff:function(t){t?nhn.mapcore.Util.mapSetClass(this.elLink,"nmap_on"):nhn.mapcore.Util.mapRemoveClass(this.elLink,"nmap_on")},getElement:function(){return this.elButton},onremove:function(){this.oOpenMap&&(this.oOpenMap.detach("changeThemeMap",this._fnTurnOnOff),nhn.api.map.Map._objectManager._unregisterMapObject(this),this.oOpenMap=null)},destroy:function(){this._fnClickHandler.detach(this.elLink,"click"),this._fnMouseOverProcess.detach(this.elLink,"mouseenter"),this._fnMouseOutProcess.detach(this.elLink,"mouseleave"),this._fnClickHandler=null,this._fnTurnOnOff=null,this._fnMouseOverProcess=null,this._fnMouseOutProcess=null,this.onremove()}}).extend(nhn.api.map.AbstractCommonControl),nhn.api.map.CustomControl=jindo.$Class({oDefaultPosition:{top:30,right:180},$init:function(){this._element=null,this.attachedEvent=new jindo.$H({}),this.oBubbler=null},getElement:function(){return this._element},setElement:function(t){null!=t&&"undefined"!=typeof t?(t instanceof Array?this._elementString=t.join(""):this._elementString=t,this._element=jindo.$(this._elementString)):this._elementString=null},createControl:function(t,e){this.oOptions=nhn.mapcore.Util.fillOptions(e,{position:this.oDefaultPosition,enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1,enableBubbling:!1}),null!=t&&"undefined"!=typeof t&&this.setElement(t),null!=this._element&&this._fillPosition(this.oDefaultPosition)},onadd:function(t){this.oOpenMap&&this.onremove(),this.oOpenMap=t,this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling),nhn.api.map.Map._objectManager._registerMapObject(this)},attachEvent:function(t,e,n){if(this.removeAllEvent(),"string"==typeof t&&"string"==typeof e){var i=t+":"+e;this.attachedEvent.$(i,jindo.$Fn(n,this).bind()),this.oBubbler=new nhn.mapcore.Util.Bubbler(this.getElement()).attach(this.attachedEvent)}},removeEvent:function(t,e,n){if("string"==typeof t&&"string"==typeof e){var i=t+":"+e;1==this.attachedEvent.hasKey(i)&&this.attachedEvent.remove(i),this.removeAllEvent(),this.oBubbler=new nhn.mapcore.Util.Bubbler(this.getElement()).attach(this.attachedEvent)}},removeAllEvent:function(){0!=this.attachedEvent.length()&&(this.oBubbler.detach(this.attachedEvent),this.oBubbler=null)},clearEvents:function(){this.removeAllEvent(),this.attachedEvent.empty()},onremove:function(){this.oOpenMap&&(nhn.api.map.Map._objectManager._unregisterMapObject(this),this.oOpenMap=null)},destroy:function(){this.removeAllEvent(),this.onremove()}}),nhn.mapcore.Util.extend(nhn.api.map.CustomControl.prototype,nhn.api.map.AbstractCommonControl.prototype),nhn.mapcore.Util.extend(nhn.api.map.CustomControl.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.CopyrightOrder={NAVER:0,OSM:1,SATELLITE:2,INCHEON:3,NGI:4,TRAFFIC:5,CADASTRAL:6,MORELAYER:7},nhn.api.map.Footer=jindo.$Class({$init:function(){this.oOptions=nhn.mapcore.Util.fillOptions(null,{vPosition:"bottom",vMargin:4,enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1}),this._fOpenMoreLayer=jindo.$Fn(function(t){this._moreLayer.toggle(),t.stop()},this),this._fStopDefaultEvent=jindo.$Fn(function(t){t.stopDefault()}),this._fCancelBubbleEvent=jindo.$Fn(function(t){t.stop(jindo.$Event.CANCEL_BUBBLE)}),this._copyrights=new nhn.api.map.FooterCopyrights(this.oOptions,this._fOpenMoreLayer,this._fStopDefaultEvent,this._fCancelBubbleEvent),this._moreLayer=new nhn.api.map.FooterMoreLayer(this._fCancelBubbleEvent),this._scale=new nhn.api.map.FooterScale(this._copyrights.getElement(),this._fStopDefaultEvent),this._state=new nhn.api.map.FooterState(this._copyrights,this._moreLayer,this._scale)},getPosition:function(){return{vPosition:this.oOptions.vPosition,hPosition:this.oOptions.hPosition}},onadd:function(t){this.map&&this.onremove(),this.map=t,this._state.setMap(this.map),nhn.api.map.Map._objectManager._registerMapObject(this)},afteradd:function(){this._state.initiate()},onremove:function(){this.map&&(this.map=null,this._state.setMap(this.map),nhn.api.map.Map._objectManager._unregisterMapObject(this))},destroy:function(){this.onremove()},getElement:function(){return this._copyrights.getElement()}}),nhn.mapcore.Util.extend(nhn.api.map.Footer.prototype,nhn.api.map.MapObject.prototype),nhn.api.map.FooterCopyrights=function(t,e,n,i){this.element_=jindo.$(this.getTemplate()),this.element_.style[t.vPosition]=t.vMargin+"px",this._findDOMreferences(this.element_),this.fOpenMoreLayer_=e,this.fStopDefaultEvent_=n,this.fCancelBubbleEvent_=i,this._applyTransparentLogo()};var P=nhn.api.map.FooterCopyrights.prototype;P.SHOW_CLASS="nmap_show",P._findDOMreferences=function(t){this.copyrightWrapper=jindo.$$.getSingle("div.nmap_copyright",t);var e=jindo.$$("span",this.copyrightWrapper);this.cpElements_={naver:e[nhn.api.map.CopyrightOrder.NAVER],osm:e[nhn.api.map.CopyrightOrder.OSM],satellite:e[nhn.api.map.CopyrightOrder.SATELLITE],incheon:e[nhn.api.map.CopyrightOrder.INCHEON],ngi:e[nhn.api.map.CopyrightOrder.NGI],traffic:e[nhn.api.map.CopyrightOrder.TRAFFIC],cadastral:e[nhn.api.map.CopyrightOrder.CADASTRAL],moreLayer:e[nhn.api.map.CopyrightOrder.MORELAYER]},this.osmLink_=jindo.$$.getSingle("a",this.cpElements_.osm),this.moreButton_=jindo.$$.getSingle("a",this.cpElements_.moreLayer)},P.setMap=function(t){t?(this.map_=t,this.attachEvent()):this.detachEvent()},P.initiate=function(){this._calcTitleWidth()},P._calcTitleWidth=function(){this.cpWidths_={naver:this.cpElements_.naver.offsetWidth,osm:this.cpElements_.osm.offsetWidth,satellite:this.cpElements_.satellite.offsetWidth,incheon:this.cpElements_.incheon.offsetWidth,ngi:this.cpElements_.ngi.offsetWidth,traffic:this.cpElements_.traffic.offsetWidth,cadastral:this.cpElements_.cadastral.offsetWidth},delete this.cpElements_.naver;for(var t in this.cpElements_)this.cpElements_.hasOwnProperty(t)&&nhn.mapcore.Util.mapRemoveClass(this.cpElements_[t],this.SHOW_CLASS)},P.getTitleWidths=function(){return this.cpWidths_},P.update=function(t){var e,n;for(e in t)t.hasOwnProperty(e)&&(n=this.cpElements_[e],t[e]?nhn.mapcore.Util.mapSetClass(n,this.SHOW_CLASS):nhn.mapcore.Util.mapRemoveClass(n,this.SHOW_CLASS))},P.attachEvent=function(){jindo.$Agent().navigator().mobile||this.fStopDefaultEvent_.attach(this.copyrightWrapper,"mousedown").attach(this.copyrightWrapper,"selectstart"),this.fCancelBubbleEvent_.attach(this.osmLink_,"mousedown").attach(this.osmLink_,"click").attach(this.osmLink_,"dblclick").attach(this.moreButton_,"dblclick"),this.fOpenMoreLayer_.attach(this.moreButton_,"click")},P.detachEvent=function(){jindo.$Agent().navigator().mobile||this.fStopDefaultEvent_.detach(this.copyrightWrapper,"mousedown").detach(this.copyrightWrapper,"selectstart"),this.fCancelBubbleEvent_.detach(this.osmLink_,"mousedown").detach(this.osmLink_,"click").detach(this.osmLink_,"dblclick").detach(this.moreButton_,"dblclick"),this.fOpenMoreLayer_.detach(this.moreButton_,"click")},P._applyTransparentLogo=function(){if(/MSIE (5\.5|6)/.test(navigator.userAgent)){var t=jindo.$$.getSingle("img.nmap_logo_map",this.getElement());nhn.mapcore.Util.setPNGImage(t)}},P.getElement=function(){return this.element_},P.getTemplate=function(){return['<div class="nmap_footer">','<div class="nmap_copyright">','<span class="nmap_show">&copy;&nbsp;NAVER Corp.</span>','<span class="nmap_show">/<a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a></span>','<span class="nmap_show">/SPOT</span>','<span class="nmap_show">/\uc778\ucc9c\uad11\uc5ed\uc2dc</span>','<span class="nmap_show">/\uad6d\ud1a0\uc9c0\ub9ac\uc815\ubcf4\uc6d0</span>','<span class="nmap_show">/\uad6d\ud1a0\uad50\ud1b5\ubd80/\uacbd\ucc30\uccad(UTIS)</span>','<span class="nmap_show">/\ub2e4\uc6b8\uc9c0\uc624\uc778\ud3ec</span>','<span class="nmap_cp_more">&nbsp;<a href="#">\ub354\ubcf4\uae30</a></span>',"</div>",'<div class="nmap_scale_base">','<a href="http://map.naver.com" target="_blank"><img class="nmap_logo_map" src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/maps/m/logo_naver.png" width="44" height="10" alt="NAVER" style="max-width:none;max-height:none;"></a>','<div class="nmap_scale_len"><span>50m</span></div>',"</div>","</div>"].join("")},nhn.api.map.FooterMoreLayer=function(t){this.control_=new nhn.api.map.CustomControl,this.control_.createControl(this.getTemplate()),this.$control_=jindo.$Element(this.control_.getElement()),this.$controlBody_=jindo.$Element(jindo.$$.getSingle(".nmap_copyright_layer_body",this.control_.getElement())),this._findDOMreferences(),this.fCancelBubbleEvent_=t,this.fHide_=jindo.$Fn(function(t){this.hide(),t.stop()},this)};var P=nhn.api.map.FooterMoreLayer.prototype;P.map_=null,P.SHOW_CLASS="nmap_show",P._findDOMreferences=function(){var t=jindo.$$("div.nmap_copyright_data > span",this.getElement());this.copyrights_={osm:t[nhn.api.map.CopyrightOrder.OSM],satellite:t[nhn.api.map.CopyrightOrder.SATELLITE],incheon:t[nhn.api.map.CopyrightOrder.INCHEON],
ngi:t[nhn.api.map.CopyrightOrder.NGI],traffic:t[nhn.api.map.CopyrightOrder.TRAFFIC],cadastral:t[nhn.api.map.CopyrightOrder.CADASTRAL]},this.closeButton_=jindo.$$.getSingle(".nmap_copyright_layer_close",this.getElement()),this.osmLink_=jindo.$$.getSingle(".nmap_copyright_data > span > a",this.getElement())},P.setMap=function(t){t?(this.map_=t,this.$control_.hide(),this.map_.addControl(this.control_),this.fHide_.attach(this.closeButton_,"click"),this.fCancelBubbleEvent_.detach(this.osmLink_,"mousedown").detach(this.osmLink_,"click")):(this.map_.removeControl(this.control_),this.fHide_.detach(this.closeButton_,"click"),this.fCancelBubbleEvent_.detach(this.osmLink_,"mousedown").detach(this.osmLink_,"click"))},P.show=function(){this.$control_.show(),this.control_.setPosition(this.getPosition()),this.closeButton_.focus()},P.hide=function(){this.$control_.hide()},P.toggle=function(){this.$control_.visible()?this.hide():this.show()},P.getPosition=function(){var t=this.map_.getSize(),e=t.width,n=t.height,i=this.$controlBody_.width(),o=this.$controlBody_.height();e-25<i&&this.$controlBody_.width(e-50);var a=(e-this.$controlBody_.width())/2,s=(n-this.$controlBody_.height())/2;return{left:a,top:s<20?20:s}},P.update=function(t){var e,n,i;for(e in t)t.hasOwnProperty(e)&&"moreLayer"!==e&&(i=this.copyrights_[e],t[e]?nhn.mapcore.Util.mapSetClass(i,this.SHOW_CLASS):nhn.mapcore.Util.mapRemoveClass(i,this.SHOW_CLASS));this.control_.setPosition(this.getPosition())},P.getElement=function(){return this.control_.getElement()},P.getTemplate=function(){return['<div class="nmap_copyright_layer">','<div class="nmap_copyright_layer_body">','<h5 class="nmap_copyright_tit"">\uc9c0\ub3c4 \ub370\uc774\ud130&nbsp;&nbsp;&nbsp;</h5>','<div class="nmap_copyright_data">','<span class="nmap_show" style="white-space:nowrap;">NAVER Corp.</span>','<span>/<a href="http://www.openstreetmap.org/copyright" target="_blank" style="font-family: nanumgothic,dotum,sans-serif !important">OpenStreetMap</a></span>',"<span>/SPOT</span>","<span>/\uc778\ucc9c\uad11\uc5ed\uc2dc</span>","<span>/\uad6d\ud1a0\uc9c0\ub9ac\uc815\ubcf4\uc6d0</span>","<span>/\uad6d\ud1a0\uad50\ud1b5\ubd80/\uacbd\ucc30\uccad(UTIS)</span>","<span>/\ub2e4\uc6b8\uc9c0\uc624\uc778\ud3ec</span>","</div>",'<a href="#" class="nmap_copyright_layer_close">\ub2eb\uae30</a>',"</div>","</div>"].join("")},nhn.api.map.FooterScale=function(t,e){this.scaleElement_=jindo.$$.getSingle(".nmap_scale_base",t),this.scaleText_=jindo.$$.getSingle("div.nmap_scale_len > span",this.scaleElement_),this.width_=0,this.fStopDefaultEvent_=e};var P=nhn.api.map.FooterScale.prototype;P.SCALE_SIZE=50,P.setMap=function(t){t?(this.attachEvent(),this.update(t.getLevel())):this.detachEvent()},P.initiate=function(){for(var t=this.scaleElement_.childNodes.length,e=0;e<t;e++)this.width_+=this.scaleElement_.childNodes[e].offsetWidth},P.attachEvent=function(){jindo.$Agent().navigator().mobile||this.fStopDefaultEvent_.attach(this.scaleElement_,"mousedown").attach(this.scaleElement_,"selectstart")},P.detachEvent=function(){jindo.$Agent().navigator().mobile||this.fStopDefaultEvent_.detach(this.scaleElement_,"mousedown").detach(this.scaleElement_,"selectstart")},P.update=function(t){var e=nhn.mapcore.mapSpec.distancePerPixel(t)*this.SCALE_SIZE,n;n=e>1e3?Math.round(e/10)/100+"km":Math.round(10*e)/10+"m",this.scaleText_.innerHTML=n},P.getWidth=function(){return this.width_},P.getElement=function(){return this.scaleElement_},nhn.api.map.FooterState=function(t,e,n){this.copyrights_=t,this.moreLayer_=e,this.scale_=n,this.states_={osm:!1,satellite:!1,incheon:!1,ngi:!1,traffic:!1,cadastral:!1,moreLayer:!1},this._createEventListeners()};var P=nhn.api.map.FooterState.prototype;P.INCHEON_BOUNDS={left:348404713,right:349423912,top:149668718,bottom:148799218},P.NORTH_KOREA_BOUNDS={left:347163095,right:352657999,top:155603536,bottom:149665494},P.SEOUL_KYOUNGKI_BOUNDS={left:349346105,right:350268225,top:150203980,bottom:148849240},P.JEJU_BOUNDS={left:348753880,right:349484695,top:145084330,bottom:144677860},P.JUNLA_BOUNDS={left:348772960,right:350374555,top:147956340,bottom:145892350},P.KANGWON_BOUNDS={left:349645770,right:351655140,top:150693650,bottom:148928890},P.KYOUNGSANG_BOUNDS={left:350067665,right:351880240,top:149069310,bottom:146410240},P.ULEUNG_BOUNDS={left:352794780,right:353155660,top:149721930,bottom:149252780},P.CHUNGCHONG_BOUNDS={left:348247685,right:351024950,top:149178340,bottom:147757220},P.EXTRA_MARGIN=5,P.map_=null,P.mapWidth_=null,P.scaleWidth_=null,P.titleWidths_=null,P.emptyObj_={},P.moreLayerState_={osm:!1,satellite:!1,incheon:!1,ngi:!1,traffic:!1,cadastral:!1,moreLayer:!0},P._createEventListeners=function(){this._fResize=jindo.$Fn(this._resize,this).bind(),this._fZoom=jindo.$Fn(this._zoom,this).bind(),this._fMapMode=jindo.$Fn(this._mapMode,this).bind(),this._fThemeMap=jindo.$Fn(this._themeMap,this).bind(),this._fMove=jindo.$Fn(this._move,this).bind()},P.setMap=function(t){t?(t.attach("resize",this._fResize),t.attach("zoom",this._fZoom),t.attach("changeMapMode",this._fMapMode),t.attach("changeThemeMap",this._fThemeMap),t.attach("move",this._fMove)):(this.map_.detach("resize",this._fResize),this.map_.detach("zoom",this._fZoom),this.map_.detach("changeMapMode",this._fMapMode),this.map_.detach("changeThemeMap",this._fThemeMap),this.map_.detach("move",this._fMove)),this.map_=t,this.copyrights_.setMap(this.map_),this.moreLayer_.setMap(this.map_),this.scale_.setMap(this.map_)},P.initiate=function(){this.copyrights_.initiate(),this.scale_.initiate(),this.mapWidth_=this.map_.getSize().width,this.scaleWidth_=this.scale_.getWidth(),this.titleWidths_=this.copyrights_.getTitleWidths(),this.states_=this._buildStates(),this._updateCopyrights(this.states_),this.moreLayer_.update(this.states_)},P._buildStates=function(){var t=this.map_.getMapMode(),e=this.map_.getBound(),n={osm:this._isOSMOn(t,e),satellite:this._isSatelliteOn(t),incheon:this._isIncheonOn(t,e),ngi:this._isNGIOn(t,e),traffic:this._isTrafficOn(),cadastral:this._isCadastralOn()};return n.moreLayer=this._isMoreLayerOn(n),n},P.getStates=function(){return this.states_},P._resize=function(t){this.mapWidth_=t.size.width,this._updateBySize()},P._zoom=function(t){this.scale_.update(t.toLevel),this._updateBySize()},P._mapMode=function(t){var e={},n=t.mode;this._setIfValueIsChanged("satellite",e,this._isSatelliteOn(n)),this._updateBySize(e,n)},P._move=function(){this._updateBySize()},P._updateBySize=function(t,e,n){t=t||{},e=this._getMapMode(e),n=this._getBounds(n),this._setIfValueIsChanged("incheon",t,this._isIncheonOn(e,n)),this._setIfValueIsChanged("ngi",t,this._isNGIOn(e,n)),this._setIfValueIsChanged("osm",t,this._isOSMOn(e,n)),this._setIfValueIsChanged("moreLayer",t,this._isMoreLayerOn(this.states_)),this._isEmpty(t)||(this._updateCopyrights(t),this.moreLayer_.update(t))},P._themeMap=function(t){var e={};switch(t.theme){case"traffic":this._setIfValueIsChanged("traffic",e,this._isTrafficOn(t.isActivated));break;case"cadastral":this._setIfValueIsChanged("cadastral",e,this._isCadastralOn(t.isActivated))}this._setIfValueIsChanged("moreLayer",e,this._isMoreLayerOn(this.states_)),this._isEmpty(e)||(this._updateCopyrights(e),this.moreLayer_.update(e))},P._setIfValueIsChanged=function(t,e,n){this.states_[t]!==n&&(this.states_[t]=e[t]=n),"moreLayer"===t&&n===!0&&(e[t]=n)},P._isVectorOn=function(t){return t=this._getMapMode(t),0===t||1===t},P._isSatelliteOn=function(t){return t=this._getMapMode(t),1===t||2===t},P._isTrafficOn=function(t){return"undefined"!=typeof t?t:this.map_.isTrafficMapActivated()},P._isCadastralOn=function(t){return!!this.map_.isCadastralMapActivated&&("undefined"!=typeof t?t:!!this.map_.isCadastralMapActivated())},P._isIncheonOn=function(t,e){return!!this._isSatelliteOn(t)&&this._intersectRect(this.INCHEON_BOUNDS,this._getBounds(e))},P._isOSMOn=function(t,e){return!!this._isVectorOn(t)&&this._intersectRect(this.NORTH_KOREA_BOUNDS,this._getBounds(e))},P._isNGIOn=function(t,e){if(!this._isSatelliteOn(t))return!1;for(var n=[this.SEOUL_KYOUNGKI_BOUNDS,this.JEJU_BOUNDS,this.JUNLA_BOUNDS,this.KANGWON_BOUNDS,this.KYOUNGSANG_BOUNDS,this.ULEUNG_BOUNDS,this.CHUNGCHONG_BOUNDS],e=this._getBounds(e),i=!1,o=0,a=n.length;o<a&&!(i=this._intersectRect(n[o],e));o++);return i},P._isMoreLayerOn=function(t){var e=this.titleWidths_.naver;for(var n in this.titleWidths_)this.titleWidths_.hasOwnProperty(n)&&(e+=t[n]?this.titleWidths_[n]:0);return this.mapWidth_<e+this.scaleWidth_+this.EXTRA_MARGIN},P._intersectRect=function(t,e){return!(e.left>t.right||e.right<t.left||e.top<t.bottom||e.bottom>t.top)},P._getMapMode=function(t){return"number"==typeof t?t:this.map_.getMapMode()},P._getBounds=function(t){if(t&&"undefined"!=typeof t.left)return t;t=this.map_.getBound();var e=t[0].toInner(),n=t[1].toInner();return{left:e.x,right:n.x,top:e.y,bottom:n.y}},P._isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e]!=this.emptyObj_[e])return!1;return!0},P._updateCopyrights=function(t){t.moreLayer===!0?this.copyrights_.update(this.moreLayerState_):t.moreLayer===!1?this.copyrights_.update(this.states_):this.copyrights_.update(t)},nhn.api.map.AttachedFilter=jindo.$Class({$init:function(){this.div=document.createElement("div")},$ON_LOAD_MASHUP_OBJS:function(t){this.load(t)},load:function(t){for(var e,n=t.object,i=n.length-1;i>=0;i--){e=n[i];var o;switch(e.sort){case"pin":o=new nhn.api.map.AttachedFilter.Pin(this.div,e);break;case"text":o=new nhn.api.map.AttachedFilter.Text(this.div,e);break;case"balloon":o=new nhn.api.map.AttachedFilter.SpeechBalloon(this.div,e);break;case"line":o=new nhn.api.map.AttachedFilter.Line(e);break;case"rect":o=new nhn.api.map.AttachedFilter.Rect(e);break;case"circle":o=new nhn.api.map.AttachedFilter.Circle(e);break;default:continue}this.oApp.exec("ADD_MASHUP",[o])}}}),nhn.api.map.AttachedFilter.FontTemplate=["{% if(obj.font) { %}",'{%=(font.face ? "font-family:"+font.face+";":"")%}','{%=(font.weight ? "font-weight:"+font.weight+";":"")%}','{%=(font.style ? "font-style:"+font.style+";":"")%}','{%=(font.deco ? "text-decoration:"+(font.deco=="normal"? "none":font.deco)+";":"")%}','{%=(font.size ? "font-size:"+font.size+"px;":"")%}','{%=(font.color ? "color:"+font.color+";":"")%}','{%=(font.align ? "text-align:"+font.align+";":"")%}',"{% } %}"].join(""),nhn.api.map.AttachedFilter.userAgent=navigator.userAgent.toLowerCase(),nhn.api.map.AttachedFilter.browser={ipod:/webkit/.test(nhn.api.map.AttachedFilter.userAgent)&&/\(ipod/.test(nhn.api.map.AttachedFilter.userAgent),iphone:/webkit/.test(nhn.api.map.AttachedFilter.userAgent)&&(/\(iphone/.test(nhn.api.map.AttachedFilter.userAgent)||/\(device/.test(nhn.api.map.AttachedFilter.userAgent)),android:/webkit/.test(nhn.api.map.AttachedFilter.userAgent)&&/android/.test(nhn.api.map.AttachedFilter.userAgent),ipad:/webkit/.test(nhn.api.map.AttachedFilter.userAgent)&&/\(ipad/.test(nhn.api.map.AttachedFilter.userAgent)},nhn.api.map.AttachedFilter.supports_canvas=function(){return!!document.createElement("canvas").getContext("2d")},nhn.api.map.AttachedFilter.Text=jindo.$Class({template:nhn.mapcore.Template.get(['<div style="position:absolute; width:{%=width%}px; height:{%=height%}px; z-index:{%=zdepth%};">','<table width="100%" height="100%"><tbody>',"<tr>",'<td align="center" style="padding:7px 7px 7px 6px;background-color:{%=bgColor%};">','<table cellpadding="0" cellspacing="0" class="_inner_table">','<tr><td style="',nhn.api.map.AttachedFilter.FontTemplate,'">',"{%=title%}","</td></tr>","</table>","</td>","</tr>","</tbody></table>","</div>"].join("")),$init:function(t,e,n){var i=this.template.process(e);t.innerHTML=i,this.element=t.removeChild(t.firstChild),this.point=nhn.api.map.CompatibleCoordConverter.fromTM128ToInner(new nhn.mapcore.TM128(e.mapX,e.mapY))},getElement:function(){return this.element},redraw:function(){var t=this.pane.fromPointToOffset(this.point);this.element.style.left=t.x+"px",this.element.style.top=t.y+"px"},onadd:function(t){this.pane=t,this.redraw()},destroy:function(){}}),nhn.api.map.AttachedFilter.Pin=jindo.$Class({HEIGHT_OF_PIN:20,HALFWIDTH_OF_PIN:14,template:nhn.mapcore.Template.get(['<div style="position:absolute; z-index:{%=zdepth%}; margin-right:-1000px; white-space:nowrap;">','<img width="26" height="26" style="width:26px; height:26px; cursor:pointer;" ','src="'+nhn.mapcore.mapSpec.STATIC_IMG+'/local/uploader/pin{%=(sortNum != 9? "0":"") +(sortNum+1)%}.gif"/>',"{% if( obj.txtOn ) { %}",'<span style="padding:0px; display:inline-block; vertical-align:top;">','<span class="pbox">','<span class="left" style="float:none; display:inline-block;',nhn.api.map.AttachedFilter.FontTemplate,'">{%=title%}',"</span>",'<span class="right" style="float:none; display:inline-block; padding-top:5px; vertical-align:top;"></span>',"</span>","</span>","{% } %}","</div>"].join("")),$init:function(t,e,n){var i=this.template.process(e);t.innerHTML=i,this.element=t.removeChild(t.firstChild),this.point=nhn.api.map.CompatibleCoordConverter.fromTM128ToInner(new nhn.mapcore.TM128(e.mapX,e.mapY))},getElement:function(){return this.element},redraw:function(){var t=this.pane.fromPointToOffset(this.point);this.element.style.left=t.x-this.HALFWIDTH_OF_PIN+"px",this.element.style.top=t.y-this.HEIGHT_OF_PIN+"px"},onadd:function(t){this.pane=t,this.redraw()},destroy:function(){}}),nhn.api.map.AttachedFilter.SpeechBalloon=jindo.$Class({template:nhn.mapcore.Template.get(["{% ","var colorType = {",'"#ffffff":"01","#FFF9A9":"02","#D3FFB4":"03","#C9F5FF":"04","#FFE1F7":"05","#E1E1E1":"06",','"#FF902E":"07","#FFDD02":"08","#69C700":"09","#2EAAE1":"10","#FA6795":"11","#4F4F4F":"12"',"};","var sortType = {RB:1,LB:2,LT:3,RT:4};",'var hasTopIndicator = (ballAlign.substr(1,1) == "T"); ','var isCircle = (shape == "circle");','var balloonClass ="tbl_talk" +colorType[bgColor] +"_" +sortType[ballAlign] +(isCircle ? "_r":""); ',"%}",'<div class="{%=balloonClass%}" ','style="padding:0px; position:absolute; z-index:{%=zdepth%}; width:{%=width%}px; height:{%=height%}px;">','<table border="0" cellpadding="0" cellspacing="0" style="width:{%=width%}px; height:{%=height%}px;">',"<tr>",'<td class="tl"></td>',"{% if( hasTopIndicator ) { %}",'<td class="t" height="{%=(isCircle? 24:13) %}">','<div class="point_area"><div class="point_img"></div></div>',"</td>","{% } else { %}",'<td class="t"></td>',"{% } %}",'<td class="tr"></td>',"</tr>","<tr>",'<td class="bgl" height="{%=height - (isCircle? 41:17) %}"></td>','<td class="txt" align=center>',"<table cellpadding=0 cellspacing=0>","<tr>",'<td style="',nhn.api.map.AttachedFilter.FontTemplate,'">{%=title%}</td>',"</tr>","</table>","</td>",'<td class="bgr"></td>',"</tr>","<tr>",'<td class="bl"></td>',"{% if( !hasTopIndicator ) { %}",'<td class="b" height="{%=(isCircle? 26:13) %}">','<div class="point_area"><div class="point_img"></div></div>',"</td>","{% } else { %}",'<td class="b"></td>',"{% } %}",'<td class="br"></td>',"</tr>","</table>","</div>"].join("")),$init:function(t,e,n){var i=this.template.process(e);switch(t.innerHTML=i,this.align=e.ballAlign,this.isCircle="circle"==e.shape,e.ballAlign){case"RB":this.horizontalGap=17-e.width,this.verticalGap=3-e.height;break;case"LB":this.isCircle?this.horizontalGap=-15:this.horizontalGap=-14,this.verticalGap=3-e.height;break;case"LT":this.isCircle?this.horizontalGap=-16:this.horizontalGap=-14,this.verticalGap=0;break;case"RT":this.horizontalGap=17-e.width,this.verticalGap=0}this.element=t.removeChild(t.firstChild),this.point=nhn.api.map.CompatibleCoordConverter.fromTM128ToInner(new nhn.mapcore.TM128(e.mapX,e.mapY)),this.isFirstCalled=!1},getElement:function(){return this.element},redraw:function(){var t=this.pane.fromPointToOffset(this.point);this.element.style.left=t.x+this.horizontalGap+"px",this.element.style.top=t.y+this.verticalGap+"px"},onadd:function(t){this.pane=t,this.redraw()},destroy:function(){}}),nhn.api.map.AttachedFilter.Circle=jindo.$Class({$init:function(t){this.leftTop=nhn.api.map.CompatibleCoordConverter.fromTM128ToInner(new nhn.mapcore.TM128(t.left,t.top)),this.rightBottom=nhn.api.map.CompatibleCoordConverter.fromTM128ToInner(new nhn.mapcore.TM128(t.right,t.bottom));var e=1.1-t.opacity/10;this.userAgent=navigator.userAgent.toLowerCase(),this.browser={ipod:/webkit/.test(this.userAgent)&&/\(ipod/.test(this.userAgent),iphone:/webkit/.test(this.userAgent)&&(/\(iphone/.test(this.userAgent)||/\(device/.test(this.userAgent)),android:/webkit/.test(this.userAgent)&&/android/.test(this.userAgent),ipad:/webkit/.test(this.userAgent)&&/\(ipad/.test(this.userAgent)},nhn.api.map.AttachedFilter.browser.android&&nhn.api.map.AttachedFilter.supports_canvas()?this.shape=new nhn.mapcore.Circle_android({cx:0,cy:0,r:10,stroke:t.color,"stroke-width":t.weight,"stroke-opacity":e}):this.shape=new nhn.mapcore.Circle({cx:0,cy:0,r:10,stroke:t.color,"stroke-width":t.weight,"stroke-opacity":e}),this.element=this.shape.getHolder(),this.element.style.zIndex=t.zdepth},getElement:function(){return this.element},redraw:function(){var t=this.pane.fromPointToOffset(this.leftTop),e=this.pane.fromPointToOffset(this.rightBottom),n=this._getCircleOptions(t.x,t.y,e.x,e.y);this.shape.setStyle(n)},_getCircleOptions:function(t,e,n,i){return{cx:t+Math.round((n-t)/2),cy:e+Math.round((i-e)/2),r:Math.round(Math.abs(i-e)/2)}},onadd:function(t){this.pane=t,this.redraw()},destroy:function(){}}),nhn.api.map.AttachedFilter.Rect=jindo.$Class({$init:function(t){this.leftTop=nhn.api.map.CompatibleCoordConverter.fromTM128ToInner(new nhn.mapcore.TM128(t.left,t.top)),this.rightBottom=nhn.api.map.CompatibleCoordConverter.fromTM128ToInner(new nhn.mapcore.TM128(t.right,t.bottom));var e=1.1-t.opacity/10;nhn.api.map.AttachedFilter.browser.android&&nhn.api.map.AttachedFilter.supports_canvas()?this.shape=new nhn.mapcore.Rect_android({x:0,y:0,width:10,height:10,stroke:t.color,"stroke-width":t.weight,"stroke-opacity":e}):this.shape=new nhn.mapcore.Rect({x:0,y:0,width:10,height:10,stroke:t.color,"stroke-width":t.weight,"stroke-opacity":e}),this.element=this.shape.getHolder(),this.element.style.zIndex=t.zdepth},getElement:function(){return this.element},redraw:function(){var t=this.pane.fromPointToOffset(this.leftTop),e=this.pane.fromPointToOffset(this.rightBottom),n=this._getRectOptions(t.x,t.y,e.x,e.y);this.shape.setStyle(n)},_getRectOptions:function(t,e,n,i){return{x:t,y:e,width:Math.abs(n-t),height:Math.abs(i-e)}},onadd:function(t){this.pane=t,this.redraw()},destroy:function(){}}),nhn.api.map.AttachedFilter.Line=jindo.$Class({$init:function(t){this.points=[];for(var e,n=0;n<t.point.length;n++)e=t.point[n],e=nhn.api.map.CompatibleCoordConverter.fromTM128ToInner(new nhn.mapcore.TM128(e.x,e.y)),this.points.push(e);this.weight=t.weight;var i=1.1-t.opacity/10;nhn.api.map.AttachedFilter.browser.android&&nhn.api.map.AttachedFilter.supports_canvas()?this.path=new nhn.mapcore.Path_android({stroke:t.color,"stroke-opacity":i,"stroke-width":t.weight,d:[[0,0],[1,1]]}):this.path=new nhn.mapcore.Path({stroke:t.color,"stroke-opacity":i,"stroke-width":t.weight,d:[[0,0],[1,1]]}),this.path.getHolder().style.zIndex=t.zdepth,this.shape=[this.path.getHolder()],t.arrow%2==1&&(this.startArrow=this._createArrow(t,i),this.shape.push(this.startArrow.getHolder())),t.arrow>1&&(this.endArrow=this._createArrow(t,i),this.shape.push(this.endArrow.getHolder()))},_createArrow:function(t,e){if(nhn.api.map.AttachedFilter.browser.android&&nhn.api.map.AttachedFilter.supports_canvas())var n=new nhn.mapcore.ClosedPath_android({fill:t.color,stroke:t.color,"fill-opacity":e,"stroke-opacity":e/3,"stroke-width":1,d:[[0,0],[1,1],[1,2]]});else var n=new nhn.mapcore.ClosedPath({fill:t.color,stroke:t.color,"fill-opacity":e,"stroke-opacity":e/3,"stroke-width":1,d:[[0,0],[1,1],[1,2]]});return n.getHolder().style.zIndex=t.zdepth,n},getElement:function(){return this.shape},redraw:function(){for(var t,e,n=[],i=0;i<this.points.length;i++)t=this.pane.fromPointToOffset(this.points[i]),(0==i||i>0&&n[i-1]&&(n[i-1][0]!=t.x||n[i-1][1]!=t.y))&&n.push([t.x,t.y]);n.length>=2&&(this.startArrow&&(e=this._drawArrow(n[0],n[1],this.weight),this.startArrow.update(e),n[0]=[e[2][0],e[2][1]]),this.endArrow&&(e=this._drawArrow(n[n.length-1],n[n.length-2],this.weight),this.endArrow.update(e),n[n.length-1]=[e[2][0],e[2][1]])),this.path.update(n)},_drawArrow:function(t,e,n){var i=2*(n+3),o=n+3,a=Math.pow(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2),.5);if(0==a)return null;var s=(e[0]-t[0])/a,r=(e[1]-t[1])/a,h=t[0]+Math.round(i*s+o*r),l=t[1]+Math.round(i*r-o*s),p=t[0]+Math.round(i*s-o*r),c=t[1]+Math.round(i*r+o*s);return[t,[h,l],[(h+p)/2,(l+c)/2],[p,c]]},onadd:function(t){this.pane=t,this.redraw()},destroy:function(){}}),function(t){var e={UTMK:{name:"UTMK",datum:"GRS80",lat0:38,lng0:127.5,a:6378137,b:6356752.314140356,falseNorthing:2e6,falseEasting:1e6,scaleFactor:.9996},TM128:{name:"TM128",datum:"Bessel",lat0:38,lng0:128,a:6377397.155,b:6356078.962818189,datum_params:[-146.43,507.89,681.46],falseNorthing:6e5,falseEasting:4e5,scaleFactor:.9999},LatLng:{name:"LatLng",datum:"GRS80",a:6378137,b:6356752.314658148}},n={fromBesselToGRS80:{x0:-3159521.31,y0:4068151.32,z0:3748113.85},fromGRS80ToBessel:{x0:-3159666.86,y0:4068655.7,z0:3748799.65}},i=3.141592653589793,o=1.5707963267948966,a=6.283185307179586,s=180/i,r=i/180,h=1.0026,l=.3826834323650898,p=1e-10,c=6378137,u=484813681109536e-20,d=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},f=function(t){return.375*t*(1+.25*t*(1+.46875*t))},m=function(t){return.05859375*t*t*(1+.75*t)},_=function(t){return t*t*t*(35/3072)},g=function(t,e,n,i,o){return t*o-e*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)},v=function(t){return t<0?-1:1},y=function(t){return Math.abs(t)<i?t:t-v(t)*a},E=jindo.$Class({$init:function(){this._setSystem(e.UTMK),this._setSystem(e.TM128),this._setSystem(e.LatLng)},inputFilter:function(t){return!!t&&this.toInner(t)},outputFilter:function(t){if(!t)return!1;switch(nhn.mapcore.mapSpec.coordMode){case 0:return this.toInner(t);case 1:return this.toUTMK(t);case 2:return this.toTM128(t);case 3:return this.toLatLng(t);default:return!1}},toInner:function(t){return!!t&&(t instanceof Array?this._toInnerBound(t):t instanceof Object&&"classname"in t&&this._toInnerPoint(t))},toUTMK:function(t){return!!t&&(t instanceof Array?this._toUTMKBound(t):t instanceof Object&&"classname"in t&&this._toUTMKPoint(t))},toTM128:function(t){return!!t&&(t instanceof Array?this._toTM128Bound(t):t instanceof Object&&"classname"in t&&this._toTM128Point(t))},toLatLng:function(t){return!!t&&(t instanceof Array?this._toLatLngBound(t):t instanceof Object&&"classname"in t&&this._toLatLngPoint(t))},fromInnerToUTMK:function(t){return!(!t||"Inner"!=t.classname)&&new nhn.mapcore.UTMK(parseFloat((t.x-34e7)/10),parseFloat((t.y-13e7)/10))},fromUTMKToInner:function(t){return!(!t||"UTMK"!=t.classname)&&new nhn.mapcore.Inner(parseInt(10*t.x+34e7),parseInt(10*t.y+13e7))},fromInnerToLatLng:function(t){if(!t||"Inner"!=t.classname)return!1;var e=this.fromInnerToUTMK(t);return this.fromUTMKToLatLng(e)},fromLatLngToInner:function(t){if(!t||"LatLng"!=t.classname)return!1;var e=this.fromLatLngToUTMK(t);return this.fromUTMKToInner(e)},fromInnerToTM128:function(t){if(!t||"Inner"!=t.classname)return!1;var e=this.fromInnerToUTMK(t);return this.fromUTMKToTM128(e)},fromTM128ToInner:function(t){if(!t||"TM128"!=t.classname)return!1;var e=this.fromTM128ToUTMK(t);return this.fromUTMKToInner(e)},fromTM128ToUTMK:function(t){if(!t||"TM128"!=t.classname)return!1;var n={x:t.x,y:t.y,z:0};return this._fromRectangularToGeodetic(e.TM128,n),this._transform(e.TM128,e.UTMK,n),this._fromGeodeticToRectangular(e.UTMK,n),new nhn.mapcore.UTMK(parseFloat(n.x.toFixed(1)),parseFloat(n.y.toFixed(1)))},fromTM128ToLatLng:function(t){if(!t||"TM128"!=t.classname)return!1;var n={x:t.x,y:t.y,z:0};return this._fromRectangularToGeodetic(e.TM128,n),this._transform(e.TM128,e.LatLng,n),this._fromGeodeticToLatLng(n),new nhn.mapcore.LatLng(parseFloat(n.y.toFixed(7)),parseFloat(n.x.toFixed(7)))},fromUTMKToTM128:function(t){if(!t||"UTMK"!=t.classname)return!1;var n={x:t.x,y:t.y,z:0};return this._fromRectangularToGeodetic(e.UTMK,n),this._transform(e.UTMK,e.TM128,n),this._fromGeodeticToRectangular(e.TM128,n),new nhn.mapcore.TM128(parseInt(n.x),parseInt(n.y))},fromUTMKToLatLng:function(t){if(!t||"UTMK"!=t.classname)return!1;var n={x:t.x,y:t.y,z:0};return this._fromRectangularToGeodetic(e.UTMK,n),this._fromGeodeticToLatLng(n),new nhn.mapcore.LatLng(parseFloat(n.y.toFixed(7)),parseFloat(n.x.toFixed(7)))},fromLatLngToTM128:function(t){if(!t||"LatLng"!=t.classname)return!1;var n={x:t.x,y:t.y,z:0};return this._fromLatLngToGeodetic(n),this._transform(e.LatLng,e.TM128,n),this._fromGeodeticToRectangular(e.TM128,n),new nhn.mapcore.TM128(parseInt(n.x),parseInt(n.y))},fromLatLngToUTMK:function(t){if(!t||"LatLng"!=t.classname)return!1;var n={x:t.x,y:t.y,z:0};return this._fromLatLngToGeodetic(n),this._transform(e.LatLng,e.UTMK,n),this._fromGeodeticToRectangular(e.UTMK,n),new nhn.mapcore.UTMK(parseFloat(n.x.toFixed(1)),parseFloat(n.y.toFixed(1)))},_toInnerPoint:function(t){if(!t)return!1;switch(this._getClassname(t)){case"Inner":return t;case"UTMK":return this.fromUTMKToInner(t);case"TM128":return this.fromTM128ToInner(t);case"LatLng":return this.fromLatLngToInner(t);default:return!1}},_toUTMKPoint:function(t){if(!t)return!1;switch(this._getClassname(t)){case"Inner":return this.fromInnerToUTMK(t);case"UTMK":return t;case"TM128":return this.fromTM128ToUTMK(t);case"LatLng":return this.fromLatLngToUTMK(t);default:return!1}},_toTM128Point:function(t){if(!t)return!1;switch(this._getClassname(t)){case"Inner":return this.fromInnerToTM128(t);case"UTMK":return this.fromUTMKToTM128(t);case"TM128":return t;case"LatLng":return this.fromLatLngToTM128(t);default:return!1}},_toLatLngPoint:function(t){if(!t)return!1;switch(this._getClassname(t)){case"Inner":return this.fromInnerToLatLng(t);case"UTMK":return this.fromUTMKToLatLng(t);case"TM128":return this.fromTM128ToLatLng(t);case"LatLng":return t;default:return!1}},_toInnerBound:function(t){if(!(t instanceof Array)||4!=t.length)return!1;var e,n;switch(this._getClassname(t)){case"Inner":return t;case"UTMK":e=this.fromUTMKToInner(new nhn.mapcore.UTMK(t[0],t[1])),n=this.fromUTMKToInner(new nhn.mapcore.UTMK(t[2],t[3]));break;case"TM128":e=this.fromTM128ToInner(new nhn.mapcore.TM128(t[0],t[1])),n=this.fromTM128ToInner(new nhn.mapcore.TM128(t[2],t[3]));break;case"LatLng":e=this.fromLatLngToInner(new nhn.mapcore.LatLng(t[1],t[0])),n=this.fromLatLngToInner(new nhn.mapcore.LatLng(t[3],t[2]));break;default:return!1}return new Array(e.x,e.y,n.x,n.y)},_toUTMKBound:function(t){if(!(t instanceof Array)||4!=t.length)return!1;var e,n;switch(this._getClassname(t)){case"Inner":e=this.fromInnerToUTMK(new nhn.mapcore.Inner(t[0],t[1])),n=this.fromInnerToUTMK(new nhn.mapcore.Inner(t[2],t[3]));break;case"UTMK":return t;case"TM128":e=this.fromTM128ToUTMK(new nhn.mapcore.TM128(t[0],t[1])),n=this.fromTM128ToUTMK(new nhn.mapcore.TM128(t[2],t[3]));break;case"LatLng":e=this.fromLatLngToUTMK(new nhn.mapcore.LatLng(t[1],t[0])),n=this.fromLatLngToUTMK(new nhn.mapcore.LatLng(t[3],t[2]));break;default:return!1}return new Array(e.x,e.y,n.x,n.y)},_toTM128Bound:function(t){if(!(t instanceof Array)||4!=t.length)return!1;var e,n;switch(this._getClassname(t)){case"Inner":e=this.fromInnerToTM128(new nhn.mapcore.Inner(t[0],t[1])),n=this.fromInnerToTM128(new nhn.mapcore.Inner(t[2],t[3]));break;case"UTMK":e=this.fromUTMKToTM128(new nhn.mapcore.UTMK(t[0],t[1])),n=this.fromUTMKToTM128(new nhn.mapcore.UTMK(t[2],t[3]));break;case"TM128":return t;case"LatLng":e=this.fromLatLngToTM128(new nhn.mapcore.LatLng(t[1],t[0])),n=this.fromLatLngToTM128(new nhn.mapcore.LatLng(t[3],t[2]));break;default:return!1}return new Array(e.x,e.y,n.x,n.y)},_toLatLngBound:function(t){if(!(t instanceof Array)||4!=t.length)return!1;var e,n;switch(this._getClassname(t)){case"Inner":e=this.fromInnerToLatLng(new nhn.mapcore.Inner(t[0],t[1])),n=this.fromInnerToLatLng(new nhn.mapcore.Inner(t[2],t[3]));break;case"UTMK":e=this.fromUTMKToLatLng(new nhn.mapcore.UTMK(t[0],t[1])),n=this.fromUTMKToLatLng(new nhn.mapcore.UTMK(t[2],t[3]));break;case"TM128":e=this.fromTM128ToLatLng(new nhn.mapcore.TM128(t[0],t[1])),n=this.fromTM128ToLatLng(new nhn.mapcore.TM128(t[2],t[3]));break;case"LatLng":return t;default:return!1}return new Array(e.x,e.y,n.x,n.y)},_getClassname:function(t){if(!t)return!1;var e;if(t instanceof Object&&"classname"in t)return t.classname;if(t instanceof Array)e=t[0];else if("number"==typeof t)e=t;else{if("string"!=typeof t)return!1;e=parseFloat(t)}return 0===e||e>=13e7?"Inner":e>0&&e<180&&e.toString().indexOf(".")>-1?"LatLng":e.toString().indexOf(".")==-1?"TM128":"UTMK"},_setSystem:function(t){return!!t&&(t.lat0*=r,t.lng0*=r,t.falseNorthing=void 0!=t.falseNorthing?parseFloat(t.falseNorthing):null,t.falseEasting=void 0!=t.falseEasting?parseFloat(t.falseEasting):null,t.scaleFactor=void 0!=t.scaleFactor?parseFloat(t.scaleFactor):null,t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.ep2=(t.a2-t.b2)/t.b2,t.datum_params&&t.datum_params.length>3&&(t.datum_params[3]*=u,t.datum_params[4]*=u,t.datum_params[5]*=u,t.datum_params[6]=t.datum_params[6]/1e6+1),"LatLng"!=t.name&&(t.e0=d(t.es),t.e1=f(t.es),t.e2=m(t.es),t.e3=_(t.es),t.ml0=t.a*g(t.e0,t.e1,t.e2,t.e3,t.lat0)),t)},_fromLatLngToGeodetic:function(t){t.x*=r,t.y*=r},_fromGeodeticToLatLng:function(t){t.x*=s,t.y*=s},_fromRectangularToGeodetic:function(t,e){var n,i,a,s,r=6,h,l;for(e.x-=t.falseEasting,e.y-=t.falseNorthing,n=(t.ml0+e.y/t.scaleFactor)/t.a,i=n,s=0;a=(n+t.e1*Math.sin(2*i)-t.e2*Math.sin(4*i)+t.e3*Math.sin(6*i))/t.e0-i,i+=a,!(Math.abs(a)<=p);s++)if(s>=r)return!1;if(Math.abs(i)<o){var c=Math.sin(i),u=Math.cos(i),d=Math.tan(i),f=t.ep2*Math.pow(u,2),m=Math.pow(f,2),_=Math.pow(d,2),g=Math.pow(_,2);n=1-t.es*Math.pow(c,2);var E=t.a/Math.sqrt(n),T=E*(1-t.es)/n,M=e.x/(E*t.scaleFactor),b=Math.pow(M,2);h=i-E*d*b/T*(.5-b/24*(5+3*_+10*f-4*m-9*t.ep2-b/30*(61+90*_+298*f+45*g-252*t.ep2-3*m))),l=y(t.lng0+M*(1-b/6*(1+2*_+f-b/20*(5-2*f+28*_-3*m+8*t.ep2+24*g)))/u)}else h=o*v(e.y),l=t.lng0;return e.x=l,e.y=h,!0},_fromGeodeticToRectangular:function(t,e){var n=y(e.x-t.lng0),i=Math.sin(e.y),o=Math.cos(e.y),a=o*n,s=Math.pow(a,2),r=t.ep2*Math.pow(o,2),h=Math.tan(e.y),l=Math.pow(h,2),p=1-t.es*Math.pow(i,2),c=t.a/Math.sqrt(p),u=t.a*g(t.e0,t.e1,t.e2,t.e3,e.y);return e.x=t.scaleFactor*c*a*(1+s/6*(1-l+r+s/20*(5-18*l+Math.pow(l,2)+72*r-58*t.ep2)))+t.falseEasting,e.y=t.scaleFactor*(u-t.ml0+c*h*(s*(.5+s/24*(5-l+9*r+4*Math.pow(r,2)+s/30*(61-58*l+Math.pow(l,2)+600*r-330*t.ep2)))))+t.falseNorthing,!0},_fromGeodeticToGeocentric:function(t,e){var n=e.x,a=e.y,s=e.z,r,h,l,p;if(a<-o&&a>-1.001*o)a=-o;else if(a>o&&a<1.001*o)a=o;else if(a<-o||a>o)return!1;return n>i&&(n-=2*i),h=Math.sin(a),p=Math.cos(a),l=h*h,r=t.a/Math.sqrt(1-t.es*l),e.x=(r+s)*p*Math.cos(n),e.y=(r+s)*p*Math.sin(n),e.z=(r*(1-t.es)+s)*h,!0},_fromGeocentricToGeodetic:function(t,e){var n=parseFloat(e.x),i=parseFloat(e.y),a=parseFloat(e.z),s,r,p,c,u,d,f,m,_,g,v,y,E,T,M,b,O=!1;if(0!=n)r=Math.atan2(i,n);else if(i>0)r=o;else if(i<0)r=-o;else if(O=!0,r=0,a>0)s=o;else{if(!(a<0))return s=o,p=-t.b,!1;s=-o}return u=n*n+i*i,c=Math.sqrt(u),d=a*h,m=Math.sqrt(d*d+u),g=d/m,y=c/m,v=g*g*g,f=a+t.b*t.ep2*v,b=c-t.a*t.es*y*y*y,_=Math.sqrt(f*f+b*b),E=f/_,T=b/_,M=t.a/Math.sqrt(1-t.es*E*E),p=T>=l?c/T-M:T<=-l?c/-T-M:a/E+M*(t.es-1),0==O&&(s=Math.atan(E/T)),e.x=r,e.y=s,e.z=p,!0},_transform:function(t,e,n){this._fromGeodeticToGeocentric(t,n),this._transDatum3(t,e,n),this._fromGeocentricToGeodetic(e,n)},_transDatum3:function(t,e,n){return t.datum==e.datum||("Bessel"==t.datum&&"GRS80"==e.datum?(n.x+=t.datum_params[0],n.y+=t.datum_params[1],n.z+=t.datum_params[2]):(n.x-=e.datum_params[0],n.y-=e.datum_params[1],n.z-=e.datum_params[2])),!0},_transDatum7:function(t,e,i){if(t.datum==e.datum)return!0;var o,a,s,r,h,l,p,c,u,d;return"Bessel"==t.datum&&"GRS80"==e.datum?(o=t.datum_params[0],a=t.datum_params[1],s=t.datum_params[2],r=t.datum_params[3],h=t.datum_params[4],l=t.datum_params[5],p=t.datum_params[6],c=i.x-n.fromBesselToGRS80.x0,
u=i.y-n.fromBesselToGRS80.y0,d=i.z-n.fromBesselToGRS80.z0,i.x=p*(c+u*l-d*h)+n.fromBesselToGRS80.x0+o,i.y=p*(-c*l+u+d*r)+n.fromBesselToGRS80.y0+a,i.z=p*(c*h-u*r+d)+n.fromBesselToGRS80.z0+s):(o=e.datum_params[0],a=e.datum_params[1],s=e.datum_params[2],r=e.datum_params[3],h=e.datum_params[4],l=e.datum_params[5],p=Math.pow(e.datum_params[6],-1),c=i.x-n.fromGRS80ToBessel.x0-o,u=i.y-n.fromGRS80ToBessel.y0-a,d=i.z-n.fromGRS80ToBessel.z0-s,i.x=p*(c-u*l+d*h)+n.fromGRS80ToBessel.x0,i.y=p*(c*l+u-d*r)+n.fromGRS80ToBessel.y0,i.z=p*(-c*h+u*r+d)+n.fromGRS80ToBessel.z0),!0}});t.CompatibleCoordConverter=new E,t.CompatibleCoordSystem=e}(nhn.api.map),nhn.api.map.MashUpPane=jindo.$Class({name:"nhn.api.map.MashUpPane",className:"mashup_pane",zIndex:25,$init:function(){},add:function(t){this.$super.add(t),t.redraw(this)},remove:function(t){this.$super.remove(t),t.redraw(this)}}).extend(nhn.mapcore.AbstractOverlayablePane),function(){var t=window.tileVersion||tileVersion||{},e=t.dv||"",n=e?"?dv="+e:"";nhn.api.map.StreetRealTilePane=jindo.$Class({_name:"street",_className:"street_pane",_zIndex:20,isTransparentTile:!0,$init:function(){this.$super.$init();var t=this;this._urlRule._makeLayerStr=function(){var e=t.oApp,i="";e.isActiveMapType("vector")||e.isActiveMapType("terrain")?i="ol_vc_an":e.isActiveMapType("hybrid")&&(i="ol_st_an"),e.isActiveMapType("cadastral")&&(i="");var o=nhn.mapcore.RealTileUrlRule.prototype._makeLayerStr.apply(this);return i&&(o+="/"+i),o+=n,t._currentLayerString=o,o}},getCurrentLayerStr:function(){return this._currentLayerString},makeLayerStr:function(){return this._urlRule._makeLayerStr()}}).extend(nhn.mapcore.AbstractRealTilePane),nhn.api.map.StreetTilePane=jindo.$Class({name:"street",tileType:"overlay",className:"street_pane",format:"png",tileName:"ol_pn_rd",zIndex:20,belongingRealPaneName:"street",$BEFORE_LOAD_STREET_PANE:function(){if(this.isActive)return this.unloadIfActive()},$ON_LOAD_STREET_PANE:function(){this.load(this.name),this._bLoaded=!0,this.oApp.exec("SET_CURSOR",["pointer"])},$ON_UNLOAD_STREET_PANE:function(){this.unload(this.name),this._bLoaded=!1,this.oApp.exec("SET_CURSOR",["openhand"])},$ON_REGISTER_MAP_TYPE:function(t){if(this._bLoaded&&("hybrid"===t||"vector"===t||"terrain"===t||"cadastral"===t)){var e=this._realPane,n=e.getCurrentLayerStr(),i=e.makeLayerStr();n!==i&&this.redrawTiles()}},$ON_UNREGISTER_MAP_TYPE:function(t){if(this._bLoaded&&("hybrid"===t||"vector"===t||"terrain"===t||"cadastral"===t)){var e=this._realPane,n=e.getCurrentLayerStr(),i=e.makeLayerStr();n!==i&&this.redrawTiles()}}}).extend(nhn.mapcore.AbstractVirtualTilePane)}(),nhn.api.map.StreetFlightViewButton=jindo.$Class({oTemplate:nhn.mapcore.Template.get(['<div class="nmap_btn nmap_road_air" style="top:10px;right:200px">','<div class="nmap_road">','<a href="#"><span class="nmap_btn_wrap">\uac70\ub9ac\ubdf0</span></a>',"</div>",'<div class="nmap_air">','<a href="#"><span class="nmap_btn_wrap">\ud56d\uacf5\ubdf0</span></a>',"</div>",'<div class="nmap_mes_road">',"<span>\ud604\uc7ac\uc704\uce58\uc758 <em>\uac70\ub9ac\ubdf0</em>\uac00<br>\uc900\ube44\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</span>","</div>",'<div class="nmap_mes_air">',"<span>\ud604\uc7ac\uc704\uce58\uc758 <em>\ud56d\uacf5\ubdf0</em>\uac00<br>\uc900\ube44\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</span>","</div>","</div>"].join("")),oDefaultPosition:{top:10,right:200},$init:function(t){this.oOptions=nhn.mapcore.Util.fillOptions(t,{position:this.oDefaultPosition,enableWheelZoom:!1,enableDragPan:!1,enableDblClickZoom:!1,enableBubbling:!1}),this.elButton=jindo.$(this.oTemplate.process(this.oOptions)),this.elStreetBtn=jindo.$$.getSingle("div.nmap_road",this.getElement()),this.elFilghtBtn=jindo.$$.getSingle("div.nmap_air",this.getElement()),this.welStreetLink=jindo.$Element(jindo.$$.getSingle("a",this.elStreetBtn)),this.welFilghtLink=jindo.$Element(jindo.$$.getSingle("a",this.elFilghtBtn)),this.welStreetMessageLayer=jindo.$Element(jindo.$$.getSingle("div.nmap_mes_road",this.getElement())),this.welFlightMessageLayer=jindo.$Element(jindo.$$.getSingle("div.nmap_mes_air",this.getElement())),this._fnPanoramaModeHandler=jindo.$Fn(function(t){this._update()},this).bind(),this._fillPosition(this.oDefaultPosition),this._attachDOMEvent()},_attachDOMEvent:function(){this._fnStreetClickHandler=jindo.$Fn(function(t){var e="";e=this.oOpenMap.isStreetMapActivated()?"deactivateStreetMap":"activateStreetMap",this.oOpenMap[e](),t.stop(jindo.$Event.CANCEL_DEFAULT)},this).attach(this.welStreetLink.$value(),"click"),this._fnFlightClickHandler=jindo.$Fn(function(t){var e="";e=this.oOpenMap.isFlightMapActivated()?"deactivateFlightMap":"activateFlightMap",this.oOpenMap[e](),t.stop(jindo.$Event.CANCEL_DEFAULT)},this).attach(this.welFilghtLink.$value(),"click"),this._fnStreetMouseOverHandler=jindo.$Fn(function(t){var e=!nhn.mapcore.Util.mapGetClass(this.welStreetLink,"nmap_over");e&&this.welStreetLink.addClass("nmap_over"),t.stop(jindo.$Event.CANCEL_DEFAULT)},this).attach(this.welStreetLink.$value(),"mouseenter"),this._fnFlightMouseOverHandler=jindo.$Fn(function(t){var e=!nhn.mapcore.Util.mapGetClass(this.welFilghtLink,"nmap_over");e&&this.welFilghtLink.addClass("nmap_over"),t.stop(jindo.$Event.CANCEL_DEFAULT)},this).attach(this.welFilghtLink.$value(),"mouseenter"),this._fnStreetMouseOutHandler=jindo.$Fn(function(t){var e=nhn.mapcore.Util.mapGetClass(this.welStreetLink,"nmap_over");null==e&&this.welStreetLink.removeClass("nmap_over"),t.stop(jindo.$Event.CANCEL_DEFAULT)},this).attach(this.welStreetLink.$value(),"mouseleave"),this._fnFlightMouseOutHandler=jindo.$Fn(function(t){var e=nhn.mapcore.Util.mapGetClass(this.welFilghtLink,"nmap_over");null==e&&this.welFilghtLink.removeClass("nmap_over"),t.stop(jindo.$Event.CANCEL_DEFAULT)},this).attach(this.welFilghtLink.$value(),"mouseleave")},_showStreetMessageLayer:function(){this.welStreetMessageLayer.addClass("nmap_mes_road_show")},_showFlightMessageLayer:function(){this.welFlightMessageLayer.addClass("nmap_mes_air_show")},_hideStreetMessageLayer:function(){this.welStreetMessageLayer.removeClass("nmap_mes_road_show")},_hideFlightMessageLayer:function(){this.welFlightMessageLayer.removeClass("nmap_mes_air_show")},_update:function(){this.oOpenMap.isStreetMapActivated()?this.welStreetLink.addClass("nmap_on"):this.welStreetLink.removeClass("nmap_on"),this.oOpenMap.isFlightMapActivated()?this.welFilghtLink.addClass("nmap_on"):this.welFilghtLink.removeClass("nmap_on")},onadd:function(t){this.oOpenMap&&this.onremove(),this.oOpenMap=t,this.oOpenMap.attach("activateStreetMap",this._fnPanoramaModeHandler),this.oOpenMap.attach("activateFlightMap",this._fnPanoramaModeHandler),this.oOpenMap.attach("deactivateStreetMap",this._fnPanoramaModeHandler),this.oOpenMap.attach("deactivateFlightMap",this._fnPanoramaModeHandler),this.enableWheelZoom(this.oOptions.enableWheelZoom),this.enableDragPan(this.oOptions.enableDragPan),this.enableDblClickZoom(this.oOptions.enableDblClickZoom),this.enableBubbling(this.oOptions.enableBubbling),this._update(),this._updatePosition(),nhn.api.map.Map._objectManager._registerMapObject(this)},getElement:function(){return this.elButton},_updatePosition:function(){this.$super._updatePosition()},onremove:function(){this.oOpenMap&&(this.oOpenMap.detach("activateStreetMap",this._fnPanoramaModeHandler),this.oOpenMap.detach("activateFlightMap",this._fnPanoramaModeHandler),this.oOpenMap.detach("deactivateStreetMap",this._fnPanoramaModeHandler),this.oOpenMap.detach("deactivateFlightMap",this._fnPanoramaModeHandler),nhn.api.map.Map._objectManager._unregisterMapObject(this),this.oOpenMap=null)},destroy:function(){this._fnStreetClickHandler.detach(this.welStreetLink.$value(),"click"),this._fnFlightClickHandler.detach(this.welFilghtLink.$value(),"click"),this._fnStreetMouseOverHandler.detach(this.welStreetLink.$value(),"mouseenter"),this._fnFlightMouseOverHandler.detach(this.welFilghtLink.$value(),"mouseenter"),this._fnStreetMouseOutHandler.detach(this.welStreetLink.$value(),"mouseleave"),this._fnFlightMouseOutHandler.detach(this.welFilghtLink.$value(),"mouseleave"),this._fnStreetClickHandler=null,this._fnFlightClickHandler=null,this._fnStreetMouseOverHandler=null,this._fnFlightMouseOverHandler=null,this._fnStreetMouseOutHandler=null,this._fnFlightMouseOutHandler=null,this.onremove()}}).extend(nhn.api.map.AbstractCommonControl),nhn.api.map.NMapStreetPointer=jindo.$Class({name:"NMapStreetPointer",$init:function(t){this._oLastPos={x:0,y:0},this._previewPos={pageX:0,pageY:0},this._bPointerEventAttached=!1,this._isMoving=!1},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["isStreetPointer",jindo.$Fn(this.isStreetPointer,this).bind()])},$ON_MSG_APP_READY:function(){this.map=this.oApp.getMap();var t=this.oApp.getStaticContainer();this._oPointer=this._getPointer(t,this.oApp),this._wfMoveHandler=jindo.$Fn(this._onMouseMove,this),this._wfHideHandler=jindo.$Fn(function(){this._isMoving&&this._oPointer.hide()},this)},$ON_BEGIN_DRAG_DONE:function(){this.oApp.exec("SET_CURSOR",["closedhand"])},$ON_END_DRAG_DONE:function(){this.oApp.isActiveMapType("street")?this.oApp.exec("SET_CURSOR",["pointer"]):this.oApp.exec("SET_CURSOR",["openhand"])},$ON_SHOW_PANORAMA_POINTER:function(){this._oPointer.show()},$ON_HIDE_PANORAMA_POINTER:function(){this._oPointer.hide()},$ON_START_STREET_POINTER:function(t){this.activeStreetPointer("on",t)},$ON_END_STREET_POINTER:function(){this.activeStreetPointer("off")},$ON_CHANGE_PANORAMA_POINTER:function(t){this._isMoving&&("number"==typeof t?this._oPointer.toPinChange(t):this._oPointer.toPinSelection(t))},isStreetPointer:function(){return this._isMoving},activeStreetPointer:function(t,e){this._isMoving&&"off"===t&&(this._bPointerEventAttached&&(this._wfMoveHandler.detach(this.map,"mousemove"),this._wfHideHandler.detach(this.map,"mouseleave"),this._bPointerEventAttached=!1),this._isMoving=!1,this._activePreview=!1,this._oPointer.hide(),this.oApp.exec("SET_CURSOR",["openhand"])),this._isMoving||"on"!==t||(this._bPointerEventAttached||(this._wfMoveHandler.attach(this.map,"mousemove"),this._wfHideHandler.attach(this.map,"mouseleave"),this._bPointerEventAttached=!0),this._isMoving=!0,this._oPointer.toPinSelection("move"),this._onMouseMove(e))},_getPointer:function(t,e){return new function(){var e=jindo.$Agent().navigator().ie&&jindo.$Agent().navigator().version<8,n=40,i=32,o=nhn.mapcore.mapSpec.STATIC_IMG+"/maps2/ico_pano_dir_final.png",a=900;imgHeight=400;var s=!1,r=Math.floor(n/2),h=jindo.$Element('<div class="nmap_pano_dir nmap_pano_dir_move" style="z-index:20;display:none;"></div>'),l=jindo.$Element('<div class="nmap_dir_icon" style="height:'+i+'px"></div>'),p=jindo.$Element('<img src="'+o+'" width="'+a+'" height="'+imgHeight+'" class="png" style="max-width:none;max-height:none;" alt="">');nhn.mapcore.isSupportOpacity&&nhn.mapcore.Util.setPNGImage(p.$value()),l.append(p.$value()),h.append(l.$value()),t.appendChild(h.$value()),this.setCursor=function(t){l.$value().style.cursor="url('"+nhn.mapcore.mapSpec.STATIC_IMG+"/maps2/"+t+".cur'),default"},this.resetCursor=function(){l.$value().style.cursor=""},this.show=function(){h.show(),s=!0},this.hide=function(){h.hide(),s=!1},this.isShowPointer=function(){return s},this.move=function(t,n){var o=e?2:0;h.css({left:t-r-o+"px",top:n-i-o+"px"})},this.toPinChange=function(t){h.$value().className="nmap_pano_dir",p.css({left:-(n*t)+"px"})},this.toPinSelection=function(t,e){var n=null;switch(e||(e=0),t){case"left":n="nmap_pano_dir nmap_pano_dir_move nmap_pano_dir_left";break;case"right":n="nmap_pano_dir nmap_pano_dir_move nmap_pano_dir_right";break;default:n="nmap_pano_dir nmap_pano_dir_move",p.css({left:"0px"})}"none"==t?l.addClass("nmap_pano_dir_none"):l.removeClass("nmap_pano_dir_none"),n&&(h.$value().className=n)}}},pointerMove:function(t,e){this._isMoving&&(t>e?this._oPointer.toPinSelection("left"):t<e?this._oPointer.toPinSelection("right"):this._oPointer.toPinSelection("move"))},_onMouseMove:function(t){if(!t)return void this._oPointer.hide();var e=nhn.mapcore.Util.mapGetParentByClass(t.element,"nmap_btn")||nhn.mapcore.Util.mapGetParentByClass(t.element,"nmap_slider");if(e)return void this._oPointer.hide();this._oPointer.show();var n=t.pos();this.pointerMove(this._oLastPos.x,n.pageX),this._oLastPos={x:n.pageX,y:n.pageY};var i=this.oApp.getMapOffset(this._oLastPos);this._oPointer.move(i.x,i.y)}}),nhn.api.map.PanoramaData=jindo.$Class({$init:function(){this._data={},this._dataForUrl={}},getData:function(){return this._data},getPosition:function(){return this._data.position},getTitle:function(){return this._data.title},getId:function(){return this._data.panoId},_generateBaseData:function(t,e,n){this._data={position:new nhn.api.map.LatLng(e[1],e[0]),panoId:t,title:n.road_nm||n.name}},_generateAdditionalData:function(t){this._data.panoType=this._convertPanoType(t.pano_type_cd),this._data.address=t.addr,this._data.photodate=t.snpst_ymdt,this._data.pov={pan:t.strt_pan_val,tilt:t.strt_tilt_val,zoom:1},this._dataForUrl.fov=t.fov_val},_convertPanoType:function(t){switch(t){case"1":return"AIR";case"3":return"STREET"}}}),nhn.api.map.StreetPanoramaData=jindo.$Class({$init:function(t){this.$super.$init(),this._generatePanoramaData(t)},_generatePanoramaData:function(t){var e=t.geometry.coordinates,n=t.properties;this._generateBaseData(t.id,e,n),this._generateAdditionalData(n)}}).extend(nhn.api.map.PanoramaData),nhn.api.map.FlightPanoramaData=jindo.$Class({BASE_URL:"http://map.naver.com/?menu=location&mapMode=0&fsky=on&fpoi=off&enc=b64",PREPARED_STR:["#BASE_URL#","flight=on&street=off","dlevel=#LEVEL#","lat=#LAT#","lng=#LNG#","flightid=#ID#","ffov=#FOV#","ftilt=#TILT#","fpan=#PAN#","flat=#TLAT#","flng=#TLNG#"].join("&"),$init:function(t){this.$super.$init(),this._isGroup=!1,t.properties.name&&(this._isGroup=!0),this._generatePanoramaData(t)},getUrlOfCurrentLevel:function(t){var e=this._data.position.getLat(),n=this._data.position.getLng(),i=this.PREPARED_STR.replace("#BASE_URL#",this.BASE_URL).replace("#LEVEL#",t).replace("#LAT#",e).replace("#LNG#",n).replace("#ID#",encodeURIComponent(this._data.panoId)).replace("#FOV#",this._dataForUrl.fov).replace("#TILT#",this._data.pov.tilt).replace("#PAN#",this._data.pov.pan).replace("#TLAT#",e).replace("#TLNG#",n);return i},isGroup:function(){return this._isGroup},_generatePanoramaData:function(t){var e=t.geometry.coordinates,n=t.properties;this._generateBaseData(t.id,e,n),this.isGroup()||this._generateAdditionalData(n)}}).extend(nhn.api.map.PanoramaData),nhn.api.map.PanoramaDAO=jindo.$Class({$init:function(){var t=nhn.mapcore.mapSpec.SSL?"https":"http";this.API={FLIGHT_DATA_SEARCH:t+"://pvxml.map.naver.com/api/panorama/sky/panoramas.jsonp?",STREET_DATA_SEARCH:t+"://pvxml.map.naver.com/api/panorama/panoramas.jsonp?"},this._cbSuccess=null,this._api=null,this._hSuccess=jindo.$Fn(this._onResponseSuccess,this).bind(),this._hError=jindo.$Fn(this._onResponseError,this).bind(),this._hTimeout=jindo.$Fn(this._onResponseTimeout,this).bind()},requestFlightSpotData:function(t,e,n){this._cbSuccess=n,this._api="FLIGHT_DATA_SEARCH";var i=t[0].x+","+t[0].y+","+t[1].x+","+t[1].y,o=jindo.$Ajax(this.API[this._api],{type:"jsonp",onload:this._hSuccess,onerror:this._hError,ontimeout:this._hTimeout,callbackid:"flightmarker",callbackname:"callback",jsonp_charset:"uft-8"});o.request({bbox:i,level:e})},requestStreetSpotData:function(t,e,n){this._cbSuccess=n,this._api="STREET_DATA_SEARCH";var i=11<e&&e<=14?"100":"300",o=jindo.$Ajax(this.API[this._api],{type:"jsonp",onload:this._hSuccess,onerror:this._hError,ontimeout:this._hTimeout,callbackid:"streetopen",callbackname:"callback",jsonp_charset:"uft-8"});o.request({nearby:t,radius:i,pano_type_cd:"3",limit:"1",version:sPanoramaVersion})},_onResponseSuccess:function(t){var e=t.json(),n=e.features;"STREET_DATA_SEARCH"===this._api&&(n=n[0]),this._cbSuccess(n)},_onResponseError:function(){throw new Error(this._api+" API Error - Json request error.")},_onResponseTimeout:function(){throw new Error(this._api+" API Error - Json request timeout.")}}),nhn.api.map.FlightMarker=function(){"function"==typeof this.$init&&this.$init.apply(this,arguments)},nhn.api.map.FlightMarker.prototype={URL:nhn.mapcore.mapSpec.STATIC_IMG+"/maps2/icons/panorama_icon_#imgType#_final.png",$init:function(t,e){var n=fpOpenAPIDefaultConv(t.getPosition()),i=t.isGroup()?"s2":"s1",o=this.URL.replace("#imgType#",i),a=this,s=new nhn.api.map.Icon(o,{width:28,height:22},{width:14,height:22});this._elEl=document.createElement("img"),this._elEl.className="_nmap_marker nmap_png",this._elEl.style.cssText="position:absolute; cursor:pointer; _cursor:hand; overflow:hidden; margin:0; padding:0; border:0;max-width:none;max-height:none;",this._oPoint=null,this._sTitle=t.getTitle(),this.setIcon(s),this.setSmallSrc(s),this.setPoint(n),this.setZIndex(1),this.isGroup=t.isGroup(),this.getPanoramaData=function(){return t},e.forEach(function(t,e){a.attach(e,t)})}},nhn.mapcore.Util.extend(nhn.api.map.FlightMarker.prototype,nhn.api.map.Marker.prototype),nhn.api.map.StreetPanoramaModel=jindo.$Class({URL:["http://map.naver.com/?menu=location&mapMode=0&fsky=on&fpoi=off&enc=b64","flight=off&street=on","dlevel=#LEVEL#","lat=#LAT#","lng=#LNG#","streetlat=#TLAT#","streetlng=#TLNG#"].join("&"),$init:function(t,e,n){this._dao=e,this._map=t,this._panoramaCallback=n,this._isActivated=!1,this._fResponseSuccess=jindo.$Fn(this._onResponseSuccess,this).bind()},activate:function(){this.isActivated()||(this._isActivated=!0,this.fireEvent("activate"))},deactivate:function(){this.isActivated()&&(this._isActivated=!1,this.fireEvent("deactivate"))},isActivated:function(){return this._isActivated},updatePanoramaCallback:function(t){this._panoramaCallback=t},_onResponseSuccess:function(t){if(t){var e=new nhn.api.map.StreetPanoramaData(t);this._panoramaCallback(e.getData())}},openPanoramaByPoint:function(t){var e=this._map.getLevel();if(this._panoramaCallback)this._dao.requestStreetSpotData(t,e,this._fResponseSuccess);else{var n=t.getY(),i=t.getX();url=this.URL.replace("#LEVEL#",e).replace("#LAT#",n).replace("#LNG#",i).replace("#TLAT#",n).replace("#TLNG#",i),window.open(url,"","",!1)}}}).extend(nhn.Component),nhn.api.map.FlightPanoramaModel=jindo.$Class({MAP_MOVEMENT_THRESHOLD:4,$init:function(t,e,n){this._dao=e,this._map=t,this._panoramaCallback=n,this._isActivated=!1,this._panoramaDataList=jindo.$H(),this._previousCenterPoint=null,this._fZoomChange=jindo.$Fn(this._requestSpotData,this).bind(),this._fDragStart=jindo.$Fn(this._onDragStart,this).bind(),this._fDragEnd=jindo.$Fn(this._onDragEnd,this).bind(),this._fResponseSuccess=jindo.$Fn(this._onResponseSuccess,this).bind()},activate:function(){this.isActivated()||(this._isActivated=!0,this.fireEvent("activate"),this._attachAndDetachMapEvent("attach"),this._requestSpotData())},deactivate:function(){this.isActivated()&&(this._attachAndDetachMapEvent("detach"),this._clearPanoramaDataList(),this._isActivated=!1,this.fireEvent("deactivate"))},isActivated:function(){return this._isActivated},updatePanoramaCallback:function(t){this._panoramaCallback=t},openPanorama:function(t){if(this._panoramaCallback)this._panoramaCallback(t.getData());else{var e=this._map.getLevel();window.open(t.getUrlOfCurrentLevel(e),"","",!1)}},_attachAndDetachMapEvent:function(t){this._map[t]("zoom",this._fZoomChange),this._map[t]("dragstart",this._fDragStart),this._map[t]("dragend",this._fDragEnd)},_onDragStart:function(){this._previousCenterPoint=this._map.getCenter()},_onDragEnd:function(){var t=this._map.getCenter(),e=t.getDistanceFrom(this._previousCenterPoint);e>this.MAP_MOVEMENT_THRESHOLD&&this._requestSpotData()},_requestSpotData:function(){var t=this._map.getBound(),e=this._map.getLevel();this._dao.requestFlightSpotData(t,e,this._fResponseSuccess)},_onResponseSuccess:function(t){for(var e=jindo.$H(),n=jindo.$H(),i=this,o=0,a=t.length;o<a;o++){var s=t[o],r=s.id,h=!this._panoramaDataList.hasKey(r),l;h?(l=new nhn.api.map.FlightPanoramaData(s),e.add(r,l)):(l=this._panoramaDataList.$(r),n.add(r,l))}this._panoramaDataList.forEach(function(t,e){n.hasKey(e)||i.fireEvent("removeSpot",i._panoramaDataList.remove(e))}),e.forEach(function(t,e){i._panoramaDataList.add(e,t),i.fireEvent("addSpot",t)})},_clearPanoramaDataList:function(){this._panoramaDataList.empty(),this.fireEvent("clearSpot")}}).extend(nhn.Component),nhn.api.map.StreetPanoramaView=jindo.$Class({$init:function(t,e){this._model=t,this._map=e,this._hRoadClick=jindo.$Fn(this._onRoadClick,this).bind(),this._model.attach("activate",jindo.$Fn(this._onActivate,this).bind("attach")),this._model.attach("deactivate",jindo.$Fn(this._onDeactivate,this).bind("detach"))},_onActivate:function(t){this._attachAndDetachMapEvent(t),this._loadStreetPane()},_onDeactivate:function(t){this._attachAndDetachMapEvent(t),this._unloadStreetPane()},_onRoadClick:function(t){var e=t.target,n=t.point;e.isMarker&&e.isMarker(e)||this.fireEvent("roadClick",n)},_attachAndDetachMapEvent:function(t){this._map[t]("click",this._hRoadClick)},_loadStreetPane:function(){this._map.loadAndUnloadStreetPane(!0)},_unloadStreetPane:function(){this._map.loadAndUnloadStreetPane(!1)}}).extend(nhn.Component),nhn.api.map.FlightPanoramaView=jindo.$Class({ZOOM_IN_THRESHOLD:8,$init:function(t,e){this._model=t,this._map=e,this._markerList=jindo.$H(),this._fAddSpot=jindo.$Fn(this._onMarkerAdd,this).bind(),this._fRemoveSpot=jindo.$Fn(this._onMarkerRemove,this).bind(),this._fClearSpot=jindo.$Fn(this._onMarkerListClear,this).bind(),this._markerListener=jindo.$H({click:jindo.$Fn(this._onMarkerClick,this).bind(),mouseenter:jindo.$Fn(this._onMouseEnterToMarker,this).bind(),mouseleave:jindo.$Fn(this._onMouseLeaveFromMarker,this).bind()}),this._label=new nhn.api.map.MarkerLabel,this._map.addOverlay(this._label),this._model.attach("activate",jindo.$Fn(this._onActivate,this).bind("attach")),this._model.attach("deactivate",jindo.$Fn(this._onDeactivate,this).bind("detach"))},_onActivate:function(t){this._attachAndDetachModelEvent(t)},_onDeactivate:function(t){this._attachAndDetachModelEvent(t)},_attachAndDetachModelEvent:function(t){this._model[t]("addSpot",this._fAddSpot),this._model[t]("removeSpot",this._fRemoveSpot),this._model[t]("clearSpot",this._fClearSpot)},_onMarkerClick:function(t){var e=t.target;e.isGroup?this._zoomInOnGroupMarker(e.getPoint()):this.fireEvent("markerClick",e.getPanoramaData())},_onMouseEnterToMarker:function(t){this._label.setVisible(!0,t.target)},_onMouseLeaveFromMarker:function(t){this._label.setVisible(!1,t.target)},_onMarkerAdd:function(t){var e=new nhn.api.map.FlightMarker(t,this._markerListener),n=t.getId();this._markerList.add(n,e),this._map.addOverlay(e)},_onMarkerRemove:function(t){var e=t.getId(),n=this._markerList.remove(e);this._map.removeOverlay(n)},_onMarkerListClear:function(){var t=this;this._markerList.forEach(function(e){t._map.removeOverlay(e)}),this._markerList.empty()},_zoomInOnGroupMarker:function(t){this._map.setCenter(t,{useEffect:!1,centerMark:!1}),this._map.setLevel(this.ZOOM_IN_THRESHOLD,{useEffect:!0,centerMark:!1})}}).extend(nhn.Component),nhn.api.map.StreetPanoramaController=jindo.$Class({$init:function(t,e){this._model=t,e.attach("roadClick",jindo.$Fn(this._onRoadClick,this).bind())},_onRoadClick:function(t){this._model.openPanoramaByPoint(t)}}).extend(nhn.Component),nhn.api.map.FlightPanoramaController=jindo.$Class({$init:function(t,e){this._model=t,e.attach("markerClick",jindo.$Fn(this._onMarkerClick,this).bind())},_onMarkerClick:function(t){this._model.openPanorama(t)}}).extend(nhn.Component),nhn.api.map.PanoramaFacade=jindo.$Class({$init:function(t){var e=nhn.api.map,n=t.map,i=t.panoramaCallback,o=new e.PanoramaDAO;this._fModel=new nhn.api.map.FlightPanoramaModel(n,o,i),this._sModel=new nhn.api.map.StreetPanoramaModel(n,o,i);var a=new nhn.api.map.FlightPanoramaView(this._fModel,n),s=new nhn.api.map.StreetPanoramaView(this._sModel,n);new nhn.api.map.FlightPanoramaController(this._fModel,a),new nhn.api.map.StreetPanoramaController(this._sModel,s),this.option(t),this.optionSetter("panoramaCallback",function(){this._fModel.updatePanoramaCallback(this.option("panoramaCallback")),this._sModel.updatePanoramaCallback(this.option("panoramaCallback"))})},getOptions:function(){return{map:this.option("map"),panoramaCallback:this.option("panoramaCallback")}},activateFlightView:function(){this._fModel.activate()},deactivateFlightView:function(){this._fModel.deactivate()},isFlightViewActivated:function(){return this._fModel.isActivated()},activateStreetView:function(){this._sModel.activate()},deactivateStreetView:function(){this._sModel.deactivate()},isStreetViewActivated:function(){return this._sModel.isActivated()}}).extend(nhn.Component),"undefined"==typeof window.nhn&&(window.nhn={}),"undefined"==typeof window.nhn.api&&(window.nhn.api={}),window.nhn.api.map=nhn.api.map,"undefined"==typeof window.nhn.husky&&(window.nhn.husky={}),window.nhn.husky=nhn.husky}}(window.jindo);