/*! SmartEditor3 - v1.0.0 - 2019-01-21
* Copyright (c) 2019 NAVER Corp; Licensed  */

(function(){var a={TABLE_VIEW_MIN_WIDTH:425,JUSTIFY_ALIGN_CLASSNAME:"se_align-justify",init:function(a,b,c){this._initVar(a,b,c);this._initPlayer(false)},_initVar:function(a,b,c){this._config=b||{};this._injectionData=c||{};this._videoId=a.vid;this._videoInKey=a.inkey;this._displayWidth=a.displayWidth;this._displayHeight=a.displayHeight;this._screenWidth=Number(a.width);this._screenHeight=Number(a.height);this._videoType=a.videoType;this._$elBase=$jq("#"+a.baseElId);this._isVerticalVideo=this._getIsVerticalVideo(this._screenWidth,this._screenHeight);this._isCardViewer=this._getIsCardViewer();this._isMobileView=this._isMobileView();this._isShowShareBtn=this._getIsAllowShareButton(this._injectionData,this._videoId);this._oPlayer=null;this._videoIframeTag=null;this._agent=seEg.agent();this._iFrameSize=null},_initPlayer:function(a){if(this._videoType==="iframe"){this._createVideoIframe(a)}else{this._createVideoPlayer()}},resetPlayer:function(){var a=true;this._initPlayer(a)},_createVideoPlayer:function(){var a=this._getVideoSize();this._oPlayer=ugcVideoPlayer(this._videoId,{value:this._videoInKey,outKeyMode:false},a.width,a.height);this._oPlayer.properties.sizeRatio=this._isVerticalVideo;this._oPlayer.properties.hasLink=this._isShowShareBtn;this._videoIframeTag=this._oPlayer.getVideoIframeTag();this._videoIframeTag=this._videoIframeTag.replace(/\?/i,"?wmode=opaque&");this._videoIframeTag=this._removeAllowFullScreen(this._videoIframeTag,this._agent);this._$elBase.html(this._videoIframeTag);this._setMaxWidth();this._$elBase.find("iframe").on("load",function(){se.module.loadCompProxy.loadComplate("video")});return this._$elBase},_removeAllowFullScreen:function(a,b){if(this._isCardViewer&&this._isNotAllowFullScreen(b)){return a.replace("allowfullscreen","")}return a},_createVideoIframe:function(a){var b=this._$elBase.find(".__se_video_frame");var c=b.find("iframe");var d=this._getVideoDisplayWidth();var e=this._getIframeVideoSize(d);this._iFrameSize=e;if(this._isCardViewer&&(a||!c.length)){this._setIFrameForCard(b.get(0).innerHTML,e)}if(!this._isCardViewer){this._attachLoadEvent(b,c);b.removeClass("is_invisible");c.attr("width",e.width);c.attr("height",e.height);c.css({width:e.width+"px",height:e.height+"px"});this._setMaxWidth();se.module.loadCompProxy.loadComplate("video")}b.show();return this._$elBase},_setMaxWidth:function(){var a=this._$elBase.closest(".se_sectionArea").hasClass(this.JUSTIFY_ALIGN_CLASSNAME);if(!this._isMobileView&&!a&&this._displayWidth){this._$elBase.closest(".se_viewArea").css("max-width",this._displayWidth+"px")}},_isMobileView:function(){return this._config.DEVICE_TYPE==="mobile"},_getVideoDisplayWidth:function(){if(this._isIgnoreIframePlayerDisplayWidth()){return this._$elBase.width()}else{return this._displayWidth}},_attachLoadEvent:function(a,b){var b=a.find("iframe");var c=this._iFrameSize;b.on("load",function(){se.module.loadCompProxy.loadComplate("video");a.removeClass("is_invisible");if(c){b.attr("width",c.width);b.attr("height",c.height);b.css({width:c.width+"px",height:c.height+"px"})}})},_setIFrameForCard:function(a,b){var c=this._$elBase.find(".__se_video_frame");var d=a;d=d.replace(/<!--<iframe/gi,"<iframe");d=d.replace(/<\/iframe>-->/gi,"</iframe>");d=d.replace(/[?&]width=([^&]*)?/,"&width="+b.width).replace(/[?&]height=([^&]*)?/,"&height="+b.height);d=this._removeAllowFullScreen(d,this._agent);c.get(0).innerHTML=d;var e=this._$elBase.find(".__se_video_frame").find("iframe");this._attachLoadEvent(c,e);e.attr("width",b.width);e.attr("height",b.height)},_getSrcURL:function(a){var b=/src="([^"]+)"/;var c=b.exec(a);return c[1]||""},_getIsAllowShareButton:function(a,b){var c;var d;if(!a.ALLOW_SHARE_BUTTONS&&!a.ALLOW_SHARE_BUTTON_ALL){return true}c=this._isAllowShareButtonBy(a.ALLOW_SHARE_BUTTONS,b);if(c!==null){return c}d=this._isAllowShareButtonAll(a.ALLOW_SHARE_BUTTON_ALL);if(d!==null){return d}},_isAllowShareButtonBy:function(a,b){var c=null;if(a instanceof Array){$jq.each(a,function(a,d){if(d.vid&&d.vid===b){c=d.hasLink}})}return c},_isAllowShareButtonAll:function(a){if(a){return a.hasLink}return null},_getIsCardViewer:function(){return this._config&&this._config.VIEWER_TYPE==="CARD"},_getVideoSize:function(){var a;if(this._isIgnoreUGCPlayerDisplayWidth()){a=this._getVideoWidth()}else{a=this._displayWidth}var b=a;var c=9/16;if(!this._isVerticalVideo){b=c*a}return{width:a,height:b}},_isIgnoreUGCPlayerDisplayWidth:function(){return this._isMobileView||this._isCardViewer||this._displayWidth===""||isNaN(this._displayWidth)},_isIgnoreIframePlayerDisplayWidth:function(){return this._isMobileView||isNaN(this._displayWidth)||this._displayWidth===""},_getVideoWidth:function(){if(this._isVerticalVideo&&this._isCardViewer){var a=this._$elBase.parents(".se_video");return Math.min(a.width(),a.height())}return this._$elBase.width()},_getIsVerticalVideo:function(a,b){if(a<=b){return true}return false},_isNotAllowFullScreen:function(a){return a.os.name==="android"&&a.browser.name!=="chrome"},_getIframeVideoSize:function(a){var b=9/16;var c=b*a;return{width:a,height:c}}};se.defineComponent("se.module.v1.Video",a);se.defineComponent("se.module.v1.m.Video",a)})();
//# sourceMappingURL=se.module.v1.Video.min.js.map