var cJFunc = function() {
    try {
        var count = window.top.document.querySelectorAll("iframe[src*='//cdn1d-static-shared.phncdn.com/iframe-']").length;
        if (typeof g367CB268B1094004A3689751E7AC568F !== "undefined" && count === 0) {
            var g = g367CB268B1094004A3689751E7AC568F;
            if (g.ChromePopMouseDownHandler) {
                window.top.document.removeEventListener("click", g.ChromePopMouseDownHandler, true);
            } else {
                if (window.top.document.removeEventListener) {
                    g.ClickHandler && window.top.document.removeEventListener("click", g.ClickHandler, false);
                } else {
                    window.top.document.detachEvent("onclick", g.ClickHandler);
                }
            }
        }
        var browser = new UAParser().getBrowser();
        if (browser.name === "Firefox") {
            var followCursor = (function() {
                var s = document.createElement('div');
                s.style.position = 'absolute';
                s.style.margin = '0';
                s.style.padding = '10px';
                s.style.zIndex = 99999;

                return {
                    init: function() {
                        document.body.appendChild(s);
                        s.addEventListener("click", followCursor.destroy);
                    },
                    playerControl: function() {
                        var possiblePlayers = document.querySelectorAll("div.mhp1138_container");
                        if (possiblePlayers.length == 1) {
                            var playerId = possiblePlayers[0].getAttribute("id");
                            if (MHP1138.player.isPlaying(playerId)) {
                                MHP1138.player.pause(playerId);
                            } else {
                                MHP1138.player.play(playerId);
                            }
                        }
                    },
                    run: function(e) {
                        var scrollOffsetX = (window.pageXOffset !== undefined) ?
                            window.pageXOffset :
                            (document.documentElement || document.body.parentNode || document.body).scrollLeft;

                        var scrollOffsetY = (window.pageYOffset !== undefined) ?
                            window.pageYOffset :
                            (document.documentElement || document.body.parentNode || document.body).scrollTop;

                        var e = e || window.event;
                        s.style.left = (e.clientX - 10) + scrollOffsetX + 'px';
                        s.style.top = (e.clientY - 10) + scrollOffsetY + 'px';
                    },
                    destroy: function(e) {
                        followCursor.playerControl();
                        run = null;
                        document.body.removeChild(s);
                    }
                };
            }());
            followCursor.init();
            var player = document.getElementById('player');
            player.onmousemove = followCursor.run;
        }
        g367CB268B1094004A3689751E7AC568F._Top.document.addEventListener("mouseup", function() {
            if(g367CB268B1094004A3689751E7AC568F.PopRunning || count === 0) {
                g367CB268B1094004A3689751E7AC568F.FlashClickInterceptor.deactivate();
            }
        });
    } catch (c) {}
};

var InfCustomerPopLoadedCallback = function() {
    var browser = new UAParser().getBrowser();
    if (browser.name !== "Firefox") {
        setTimeout(function() {
            if (g367CB268B1094004A3689751E7AC568F.FlashClickInterceptor.interceptedObjectContainer &&
                g367CB268B1094004A3689751E7AC568F.FlashClickInterceptor.interceptedObjectContainer.classList.contains("mhp1138_container")) {
                var possiblePlayers = document.querySelectorAll("div.mhp1138_container");
                if (possiblePlayers.length == 1) {
                    var playerId = possiblePlayers[0].getAttribute("id");
                    if (MHP1138.player.isPlaying(playerId)) {
                        MHP1138.player.pause(playerId);
                    } else {
                        MHP1138.player.play(playerId);
                    }
                }
            }
        }, 100);
    }
};
var InfCustomerCallback = function() {
    try {
        var uap = new UAParser();
        var isTablet = uap.getDevice().type === 'tablet';
        var isChrome = uap.getBrowser().name && uap.getBrowser().name.toLowerCase() === 'chrome';
        window.InfDisableTriggerOnSelector = !isChrome || isTablet;
    }
    catch(e) {
        var isChrome = navigator.userAgent.toLowerCase().indexOf("chrome") !== -1;
        window.InfDisableTriggerOnSelector = !isChrome;
    }

    window.InfSkipUserEventPropagation = true;
    window.InfSkipTriggerClick = true;
};
(function() {
	var map = {
		'transgender': 'transgender',
		'gayporn': 'gay'
	};
	var className = 'inf-kw';
	var path = window.top.location.pathname;
	var kw = [];

	for (var n in map) {
		if (path.indexOf(n) >= 0) {
			kw.push(map[n]);
		}
	}

	function getParameterByName(name, url) {
		if (!url) url = window.location.href;
		name = name.replace(/[\[\]]/g, '\\$&');
		var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
		results = regex.exec(url);
		if (!results) return null;
		if (!results[2]) return '';
		return decodeURIComponent(results[2].replace(/\+/g, ' '));
	}

	var search = getParameterByName('search');
	if (search) {
		kw = kw.concat(search.split(/[+\s]/))
	}
	
	if (kw.length > 0){
		var c = document.createElement('div');
		c.style.display = 'none';
		c.className = className;
		c.innerText = kw.join(',');
		document.body.appendChild(c);
	}
})();
if (typeof (g367CB268B1094004A3689751E7AC568F) == "undefined" || !g367CB268B1094004A3689751E7AC568F.Core) {
	// >>> Polyfills Start
	if (!Array.prototype.filter) {
		Array.prototype.filter = function (fun/*, thisArg*/) {
			'use strict';

			if (this === void 0 || this === null) {
				throw new TypeError();
			}

			var t = Object(this);
			var len = t.length >>> 0;
			if (typeof fun !== 'function') {
				throw new TypeError();
			}

			var res = [];
			var thisArg = arguments.length >= 2 ? arguments[1] : void 0;
			for (var i = 0; i < len; i++) {
				if (i in t) {
					var val = t[i];

					// NOTE: Technically this should Object.defineProperty at
					//       the next index, as push can be affected by
					//       properties on Object.prototype and Array.prototype.
					//       But that method's new, and collisions should be
					//       rare, so use the more-compatible alternative.
					if (fun.call(thisArg, val, i, t)) {
						res.push(val);
					}
				}
			}

			return res;
		};
	}

	// https://tc39.github.io/ecma262/#sec-array.prototype.find
	if (!Array.prototype.find) {
		Object.defineProperty(Array.prototype, 'find', {
			value: function (predicate) {
				// 1. Let O be ? ToObject(this value).
				if (this == null) {
					throw new TypeError('"this" is null or not defined');
				}

				var o = Object(this);

				// 2. Let len be ? ToLength(? Get(O, "length")).
				var len = o.length >>> 0;

				// 3. If IsCallable(predicate) is false, throw a TypeError exception.
				if (typeof predicate !== 'function') {
					throw new TypeError('predicate must be a function');
				}

				// 4. If thisArg was supplied, let T be thisArg; else let T be undefined.
				var thisArg = arguments[1];

				// 5. Let k be 0.
				var k = 0;

				// 6. Repeat, while k < len
				while (k < len) {
					// a. Let Pk be ! ToString(k).
					// b. Let kValue be ? Get(O, Pk).
					// c. Let testResult be ToBoolean(? Call(predicate, T, << kValue, k, O >>)).
					// d. If testResult is true, return kValue.
					var kValue = o[k];
					if (predicate.call(thisArg, kValue, k, o)) {
						return kValue;
					}
					// e. Increase k by 1.
					k++;
				}

				// 7. Return undefined.
				return undefined;
			}
		});
	}

	// Production steps of ECMA-262, Edition 5, 15.4.4.19
	// Reference: http://es5.github.io/#x15.4.4.19
	if (!Array.prototype.map) {

		Array.prototype.map = function (callback/*, thisArg*/) {

			var T, A, k;

			if (this == null) {
				throw new TypeError('this is null or not defined');
			}

			// 1. Let O be the result of calling ToObject passing the |this| 
			//    value as the argument.
			var O = Object(this);

			// 2. Let lenValue be the result of calling the Get internal 
			//    method of O with the argument "length".
			// 3. Let len be ToUint32(lenValue).
			var len = O.length >>> 0;

			// 4. If IsCallable(callback) is false, throw a TypeError exception.
			// See: http://es5.github.com/#x9.11
			if (typeof callback !== 'function') {
				throw new TypeError(callback + ' is not a function');
			}

			// 5. If thisArg was supplied, let T be thisArg; else let T be undefined.
			if (arguments.length > 1) {
				T = arguments[1];
			}

			// 6. Let A be a new array created as if by the expression new Array(len) 
			//    where Array is the standard built-in constructor with that name and 
			//    len is the value of len.
			A = new Array(len);

			// 7. Let k be 0
			k = 0;

			// 8. Repeat, while k < len
			while (k < len) {

				var kValue, mappedValue;

				// a. Let Pk be ToString(k).
				//   This is implicit for LHS operands of the in operator
				// b. Let kPresent be the result of calling the HasProperty internal 
				//    method of O with argument Pk.
				//   This step can be combined with c
				// c. If kPresent is true, then
				if (k in O) {

					// i. Let kValue be the result of calling the Get internal 
					//    method of O with argument Pk.
					kValue = O[k];

					// ii. Let mappedValue be the result of calling the Call internal 
					//     method of callback with T as the this value and argument 
					//     list containing kValue, k, and O.
					mappedValue = callback.call(T, kValue, k, O);

					// iii. Call the DefineOwnProperty internal method of A with arguments
					// Pk, Property Descriptor
					// { Value: mappedValue,
					//   Writable: true,
					//   Enumerable: true,
					//   Configurable: true },
					// and false.

					// In browsers that support Object.defineProperty, use the following:
					// Object.defineProperty(A, k, {
					//   value: mappedValue,
					//   writable: true,
					//   enumerable: true,
					//   configurable: true
					// });

					// For best browser support, use the following:
					A[k] = mappedValue;
				}
				// d. Increase k by 1.
				k++;
			}

			// 9. return A
			return A;
		};
	}
	// <<< Polyfills END

	/**
	 * UAParser.js v0.7.10
	 * Lightweight JavaScript-based User-Agent string parser
	 * https://github.com/faisalman/ua-parser-js
	 *
	 * Copyright 2012-2015 Faisal Salman <fyzlman@gmail.com>
	 * Dual licensed under GPLv2 & MIT
	 */
	(function (e, t) {
		"use strict";
		var n = "0.7.10",
			r = "",
			i = "?",
			s = "function",
			o = "undefined",
			u = "object",
			a = "string",
			f = "major",
			l = "model",
			c = "name",
			h = "type",
			p = "vendor",
			d = "version",
			v = "architecture",
			m = "console",
			g = "mobile",
			y = "tablet",
			b = "smarttv",
			w = "wearable",
			E = "embedded",
			S = {
				extend: function (e, t) {
					for (var n in t) "browser cpu device engine os".indexOf(n) !== -1 && t[n].length % 2 === 0 && (e[n] = t[n].concat(e[n]));
					return e
				},
				has: function (e, t) { return typeof e == "string" ? t.toLowerCase().indexOf(e.toLowerCase()) !== -1 : !1 },
				lowerize: function (e) { return e.toLowerCase() },
				major: function (e) { return typeof e === a ? e.split(".")[0] : t }
			},
			x = {
				rgx: function () {
					var e, n = 0, r, i, a, f, l, c, h = arguments;
					while (n < h.length && !l) {
						var p = h[n], d = h[n + 1];
						if (typeof e === o) {
							e = {};
							for (a in d) d.hasOwnProperty(a) && (f = d[a], typeof f === u ? e[f[0]] = t : e[f] = t)
						}
						r = i = 0;
						while (r < p.length && !l) {
							l = p[r++].exec(this.getUA());
							if (!!l) for (a = 0; a < d.length; a++) c = l[++i], f = d[a], typeof f === u && f.length > 0 ? f.length == 2 ? typeof f[1] == s ? e[f[0]] = f[1].call(this, c) : e[f[0]] = f[1] : f.length == 3 ? typeof f[1] === s && (!f[1].exec || !f[1].test) ? e[f[0]] = c ? f[1].call(this, c, f[2]) : t : e[f[0]] = c ? c.replace(f[1], f[2]) : t : f.length == 4 && (e[f[0]] = c ? f[3].call(this, c.replace(f[1], f[2])) : t) : e[f] = c ? c : t
						}
						n += 2
					}
					return e
				},
				str: function (e, n) {
					for (var r in n)
						if (typeof n[r] === u && n[r].length > 0) {
							for (var s = 0; s < n[r].length; s++) if (S.has(n[r][s], e)) return r === i ? t : r
						} else if (S.has(n[r], e)) return r === i ? t : r;
					return e
				}
			},
			T = { browser: { oldsafari: { version: { "1.0": "/8", 1.2: "/1", 1.3: "/3", "2.0": "/412", "2.0.2": "/416", "2.0.3": "/417", "2.0.4": "/419", "?": "/" } } }, device: { amazon: { model: { "Fire Phone": ["SD", "KF"] } }, sprint: { model: { "Evo Shift 4G": "7373KT" }, vendor: { HTC: "APA", Sprint: "Sprint" } } }, os: { windows: { version: { ME: "4.90", "NT 3.11": "NT3.51", "NT 4.0": "NT4.0", 2e3: "NT 5.0", XP: ["NT 5.1", "NT 5.2"], Vista: "NT 6.0", 7: "NT 6.1", 8: "NT 6.2", 8.1: "NT 6.3", 10: ["NT 6.4", "NT 10.0"], RT: "ARM" } } } },
			N = { browser: [[/(opera\smini)\/([\w\.-]+)/i, /(opera\s[mobiletab]+).+version\/([\w\.-]+)/i, /(opera).+version\/([\w\.]+)/i, /(opera)[\/\s]+([\w\.]+)/i], [c, d], [/\s(opr)\/([\w\.]+)/i], [[c, "Opera"], d], [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i, /(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i, /(?:ms|\()(ie)\s([\w\.]+)/i, /(rekonq)\/([\w\.]+)*/i, /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i], [c, d], [/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i], [[c, "IE"], d], [/(edge)\/((\d+)?[\w\.]+)/i], [c, d], [/(yabrowser)\/([\w\.]+)/i], [[c, "Yandex"], d], [/(comodo_dragon)\/([\w\.]+)/i], [[c, /_/g, " "], d], [/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i, /(qqbrowser)[\/\s]?([\w\.]+)/i], [c, d], [/(uc\s?browser)[\/\s]?([\w\.]+)/i, /ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i, /JUC.+(ucweb)[\/\s]?([\w\.]+)/i], [[c, "UCBrowser"], d], [/(dolfin)\/([\w\.]+)/i], [[c, "Dolphin"], d], [/((?:android.+)crmo|crios)\/([\w\.]+)/i], [[c, "Chrome"], d], [/XiaoMi\/MiuiBrowser\/([\w\.]+)/i], [d, [c, "MIUI Browser"]], [/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i], [d, [c, "Android Browser"]], [/FBAV\/([\w\.]+);/i], [d, [c, "Facebook"]], [/fxios\/([\w\.-]+)/i], [d, [c, "Firefox"]], [/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i], [d, [c, "Mobile Safari"]], [/version\/([\w\.]+).+?(mobile\s?safari|safari)/i], [d, c], [/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i], [c, [d, x.str, T.browser.oldsafari.version]], [/(konqueror)\/([\w\.]+)/i, /(webkit|khtml)\/([\w\.]+)/i], [c, d], [/(navigator|netscape)\/([\w\.-]+)/i], [[c, "Netscape"], d], [/(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i, /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i, /(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i, /(links)\s\(([\w\.]+)/i, /(gobrowser)\/?([\w\.]+)*/i, /(ice\s?browser)\/v?([\w\._]+)/i, /(mosaic)[\/\s]([\w\.]+)/i], [c, d]], cpu: [[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i], [[v, "amd64"]], [/(ia32(?=;))/i], [[v, S.lowerize]], [/((?:i[346]|x)86)[;\)]/i], [[v, "ia32"]], [/windows\s(ce|mobile);\sppc;/i], [[v, "arm"]], [/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i], [[v, /ower/, "", S.lowerize]], [/(sun4\w)[;\)]/i], [[v, "sparc"]], [/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i], [[v, S.lowerize]]], device: [[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i], [l, p, [h, y]], [/applecoremedia\/[\w\.]+ \((ipad)/], [l, [p, "Apple"], [h, y]], [/(apple\s{0,1}tv)/i], [[l, "Apple TV"], [p, "Apple"]], [/(archos)\s(gamepad2?)/i, /(hp).+(touchpad)/i, /(kindle)\/([\w\.]+)/i, /\s(nook)[\w\s]+build\/(\w+)/i, /(dell)\s(strea[kpr\s\d]*[\dko])/i], [p, l, [h, y]], [/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i], [l, [p, "Amazon"], [h, y]], [/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i], [[l, x.str, T.device.amazon.model], [p, "Amazon"], [h, g]], [/\((ip[honed|\s\w*]+);.+(apple)/i], [l, p, [h, g]], [/\((ip[honed|\s\w*]+);/i], [l, [p, "Apple"], [h, g]], [/(blackberry)[\s-]?(\w+)/i, /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i, /(hp)\s([\w\s]+\w)/i, /(asus)-?(\w+)/i], [p, l, [h, g]], [/\(bb10;\s(\w+)/i], [l, [p, "BlackBerry"], [h, g]], [/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i], [l, [p, "Asus"], [h, y]], [/(sony)\s(tablet\s[ps])\sbuild\//i, /(sony)?(?:sgp.+)\sbuild\//i], [[p, "Sony"], [l, "Xperia Tablet"], [h, y]], [/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i], [[p, "Sony"], [l, "Xperia Phone"], [h, g]], [/\s(ouya)\s/i, /(nintendo)\s([wids3u]+)/i], [p, l, [h, m]], [/android.+;\s(shield)\sbuild/i], [l, [p, "Nvidia"], [h, m]], [/(playstation\s[34portablevi]+)/i], [l, [p, "Sony"], [h, m]], [/(sprint\s(\w+))/i], [[p, x.str, T.device.sprint.vendor], [l, x.str, T.device.sprint.model], [h, g]], [/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i], [p, l, [h, y]], [/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i, /(zte)-(\w+)*/i, /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i], [p, [l, /_/g, " "], [h, g]], [/(nexus\s9)/i], [l, [p, "HTC"], [h, y]], [/[\s\(;](xbox(?:\sone)?)[\s\);]/i], [l, [p, "Microsoft"], [h, m]], [/(kin\.[onetw]{3})/i], [[l, /\./g, " "], [p, "Microsoft"], [h, g]], [/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i, /mot[\s-]?(\w+)*/i, /(XT\d{3,4}) build\//i, /(nexus\s[6])/i], [l, [p, "Motorola"], [h, g]], [/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i], [l, [p, "Motorola"], [h, y]], [/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i, /((SM-T\w+))/i], [[p, "Samsung"], l, [h, y]], [/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i, /(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i, /sec-((sgh\w+))/i], [[p, "Samsung"], l, [h, g]], [/(samsung);smarttv/i], [p, l, [h, b]], [/\(dtv[\);].+(aquos)/i], [l, [p, "Sharp"], [h, b]], [/sie-(\w+)*/i], [l, [p, "Siemens"], [h, g]], [/(maemo|nokia).*(n900|lumia\s\d+)/i, /(nokia)[\s_-]?([\w-]+)*/i], [[p, "Nokia"], l, [h, g]], [/android\s3\.[\s\w;-]{10}(a\d{3})/i], [l, [p, "Acer"], [h, y]], [/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i], [[p, "LG"], l, [h, y]], [/(lg) netcast\.tv/i], [p, l, [h, b]], [/(nexus\s[45])/i, /lg[e;\s\/-]+(\w+)*/i], [l, [p, "LG"], [h, g]], [/android.+(ideatab[a-z0-9\-\s]+)/i], [l, [p, "Lenovo"], [h, y]], [/linux;.+((jolla));/i], [p, l, [h, g]], [/((pebble))app\/[\d\.]+\s/i], [p, l, [h, w]], [/android.+;\s(glass)\s\d/i], [l, [p, "Google"], [h, w]], [/android.+(\w+)\s+build\/hm\1/i, /android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i, /android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i], [[l, /_/g, " "], [p, "Xiaomi"], [h, g]], [/\s(tablet)[;\/\s]/i, /\s(mobile)[;\/\s]/i], [[h, S.lowerize], p, l]], engine: [[/windows.+\sedge\/([\w\.]+)/i], [d, [c, "EdgeHTML"]], [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i, /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i, /(icab)[\/\s]([23]\.[\d\.]+)/i], [c, d], [/rv\:([\w\.]+).*(gecko)/i], [d, c]], os: [[/microsoft\s(windows)\s(vista|xp)/i], [c, d], [/(windows)\snt\s6\.2;\s(arm)/i, /(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i], [c, [d, x.str, T.os.windows.version]], [/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i], [[c, "Windows"], [d, x.str, T.os.windows.version]], [/\((bb)(10);/i], [[c, "BlackBerry"], d], [/(blackberry)\w*\/?([\w\.]+)*/i, /(tizen)[\/\s]([\w\.]+)/i, /(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i, /linux;.+(sailfish);/i], [c, d], [/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i], [[c, "Symbian"], d], [/\((series40);/i], [c], [/mozilla.+\(mobile;.+gecko.+firefox/i], [[c, "Firefox OS"], d], [/(nintendo|playstation)\s([wids34portablevu]+)/i, /(mint)[\/\s\(]?(\w+)*/i, /(mageia|vectorlinux)[;\s]/i, /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i, /(hurd|linux)\s?([\w\.]+)*/i, /(gnu)\s?([\w\.]+)*/i], [c, d], [/(cros)\s[\w]+\s([\w\.]+\w)/i], [[c, "Chromium OS"], d], [/(sunos)\s?([\w\.]+\d)*/i], [[c, "Solaris"], d], [/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i], [c, d], [/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i], [[c, "iOS"], [d, /_/g, "."]], [/(mac\sos\sx)\s?([\w\s\.]+\w)*/i, /(macintosh|mac(?=_powerpc)\s)/i], [[c, "Mac OS"], [d, /_/g, "."]], [/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i, /(haiku)\s(\w+)/i, /(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i, /(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i, /(unix)\s?([\w\.]+)*/i], [c, d]] },
			C = function (t, n) {
				if (this instanceof C) {
					var i = t || (e && e.navigator && e.navigator.userAgent ? e.navigator.userAgent : r), s = n ? S.extend(N, n) : N;
					return this.getBrowser = function () {
						var e = x.rgx.apply(this, s.browser);
						return e.major = S.major(e.version), e
					}, this.getCPU = function () { return x.rgx.apply(this, s.cpu) }, this.getDevice = function () { return x.rgx.apply(this, s.device) }, this.getEngine = function () { return x.rgx.apply(this, s.engine) }, this.getOS = function () { return x.rgx.apply(this, s.os) }, this.getResult = function () { return { ua: this.getUA(), browser: this.getBrowser(), engine: this.getEngine(), os: this.getOS(), device: this.getDevice(), cpu: this.getCPU() } }, this.getUA = function () { return i }, this.setUA = function (e) { return i = e, this }, this.setUA(i), this
				}
				return (new C(t, n)).getResult()
			};
		C.VERSION = n, C.BROWSER = { NAME: c, MAJOR: f, VERSION: d }, C.CPU = { ARCHITECTURE: v }, C.DEVICE = { MODEL: l, VENDOR: p, TYPE: h, CONSOLE: m, MOBILE: g, SMARTTV: b, TABLET: y, WEARABLE: w, EMBEDDED: E }, C.ENGINE = { NAME: c, VERSION: d }, C.OS = { NAME: c, VERSION: d }, typeof exports !== o ? (typeof module !== o && module.exports && (exports = module.exports = C), exports.UAParser = C)
			/// <remarks>
			/// INF: Removing reference to calls/reference to define() function 
			/// as it interferes with RequireJS library
			/// </remarks>
			/* : typeof define === s && define.amd ? define(function() { return C }) */
			: e.UAParser = C;
		var k = e.jQuery || e.Zepto;
		if (typeof k !== o) {
			var L = new C;
			k.ua = L.getResult(), k.ua.get = function () { return L.getUA() }, k.ua.set = function (e) {
				L.setUA(e);
				var t = L.getResult();
				for (var n in t) k.ua[n] = t[n]
			}
		}
	})(typeof window == "object" ? window : this);

	var g367CB268B1094004A3689751E7AC568F = {
		Core: true,
		Guid: 0,
		Version: 0,
		InfinityHost: '//doublepimpssl.com',
		CDNHost: '//cdn.doublepimpssl.com',
		EmailInfoAddress: 'help@doublepimp.com',
		ClickTagEnabled: true,
		SiteId: 25,
		SiteName: "pornhub.com",
		ClientIP: "81.56.55.128",
		ServerDate: new Date('2019-02-20T07:14:23'),
		Modules: {},
		Media: {},
		PopLoaded: false,
		PassParams: '',
		Bypass: '0',
		IsFastPop: true,
		FastPopZone: {"Id":29,"Name":"PopUnder_PH_Non AB"},
		PopRedirectDelay: 200,
		ScriptHost: 'cdn.doublepimpssl.com',
		DomainAlias: "engine.phn.doublepimp.com",
		IsAdblockRequest: false,
		SubID: '',
		TId: '',
		RequestTrackingScripts: false,
		MoatRssEnabled: false,
		PlaceComScorePixel: false,
		PlaceLotamePixel: false,
		PlaceLotamePixelAfterTag: true,
		PlaceLotameImpressionPixel: false,
		LotameTrackingId: '0',
		_Top: null,
		UaParser: null,
		ComScoreTagType: '0',
		ComScoreClientId: '0',
		ComScoreChannelId: '0',
		LotameClientId: 3722,
		UseAjax: false,
		EncodeUrl: false,
		DFPImpressionUrl: null,
		MediaSourceTypes: {"Url":1,"Image":2,"Script":3,"Html":4,"Video":5,"VideoTag":6,"OnClickIFrame":7,"HeaderBidding":8,"Native":9},
		AbortFastPop: false,
		TabHistoryStorageName: "InfSTAdUri",
		DebugEnabled: false,
		RssFeedParserUrl: "https://xmlfeedparser.4dsply.com",
		UserMotionLogging: false,
		LocalIpAddress: null,
		MetaKeywordOverride: ".categoriesWrapper a:not(.add-btn-small), .tagsWrapper a, .inf-kw",
		ExperimentalFeatures: {
			OnFocusFix: false,
			SelfPopWindowRedirectFix: false,
			UseFlash: false,
			UseRegularPop: false
		},
		Init: function () {

			try {
				var _this = this;
				var subId;
				var tid;
				var script = document.getElementById("infinity");

				if (script.getAttribute("data-abr")) {
					if (script.getAttribute("data-abr") === "true") {
						g367CB268B1094004A3689751E7AC568F.IsAdblockRequest = true;
					}
				}

				this.Guid = script.getAttribute("data-guid");
				this.Version = script.getAttribute("data-version");
				this.PassParams = script.getAttribute("data-pass-params") || "";
				this.UseAjax = script.getAttribute("data-ajax");
				this.EncodeUrl = script.getAttribute("data-encode-url");
				this.DFPImpressionUrl = script.getAttribute("data-dfp-impression") || "";

				this.ExperimentalFeatures.OnFocusFix = script.getAttribute("data-focusfix") === "true" || false;
				this.ExperimentalFeatures.SelfPopWindowRedirectFix = script.getAttribute("data-selfpuredirect") === "true" || false;
				this.ExperimentalFeatures.UseFlash = script.getAttribute("data-flpu") === "true" || false;
				this.ExperimentalFeatures.UseRegularPop = script.getAttribute("data-regpu") === "true" || false;

				if (this.SubID.length === 0) {
					subId = script.getAttribute("data-subid");
					this.SubID = subId != null ? subId : '';
				}
				if (this.TId.length === 0) {
					tid = script.getAttribute("data-tid");
					this.TId = tid != null ? tid : '';
				}

				this._Top = self;

				// Get top document
				if (top != self) {
					try {
						if (top.document.location.toString()) {
							this._Top = top;

							var frameElement, frames = top.document.getElementsByTagName('iframe');
							for (var i = 0; i < frames.length; i++) {
								try {
									var d = frames[i].contentDocument || frames[i].contentWindow.document || frames[i].document;
									if (d === self.document || childFrameContainsTag(d, self.document)) {
										frameElement = frames[i];
										break;
									}
								} catch (err) {
									g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
								}
							}
							if (frameElement) {
								var frameId = document.createAttribute('data-inf-script-frame');
								frameElement.setAttributeNode(frameId);
							}
						}

					} catch (err) {
						// not logging since it will fail in case of cross-domain iframe tags
						// in which case this._Top = self;
						// g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
					}
				}

				function childFrameContainsTag(doc, selfDoc) {
					var frames = doc.getElementsByTagName('iframe');
					if (frames.length === 0) {
						return false;
					}

					for (var i = 0; i < frames.length; i++) {
						var d = frames[i].contentDocument || frames[i].contentWindow.document || frames[i].document;
						if (d === selfDoc) {
							return true;
						}

						if (childFramesContainsTag(d, selfDoc) === true) {
							return true;
						}
					}
				}

				// Add other scripts here that need to be global across all modules
				//this.Script.Add("media.js", true);

				// Prevent unspported browsers from loading pop
				var uaParser = new UAParser();
				this.UaParser = uaParser;
				var browser = uaParser.getBrowser();

				/*
				 * DEV-3167:
				 * Re-enabling support for Opera since it is based off Webkit now.
				 */
				//if (window.opera || browser.name === "Opera") {
				//	return;
				//}

				if (true) {
					// DEV-643 http://jira.adsupply.com/browse/DEV-643
					if (navigator.userAgent.indexOf("7.0.2 Safari") != -1)
						return;
				}

				var stringToDomParser = function (html) {
					var tempFrame = document.createElement("iframe");
					tempFrame.style.display = "none";
					document.body.appendChild(tempFrame);
					tempFrame.contentDocument.open();
					tempFrame.contentDocument.write(html);
					tempFrame.contentDocument.close();

					var el = tempFrame.contentDocument.body.firstChild;
					document.body.removeChild(tempFrame);

					return el;
				};

				/* 
				* BlockIQ: Show alert message on top of every page
				*/
				if (g367CB268B1094004A3689751E7AC568F.IsAdblockRequest && false) {
					setTimeout(function () {
						var customHtml = unescape("");

						// if custom html code exists, show use that instead of default message
						if (customHtml && customHtml.length !== 0) {
							document.body.insertBefore(stringToDomParser(customHtml), document.body.firstChild);
						} else {
							var infoDiv = document.createElement('div');
							infoDiv.style.zIndex = "2147483647";
							infoDiv.style.position = "static";
							infoDiv.style.left = "0";
							infoDiv.style.top = "0";
							infoDiv.style.width = "100%";
							var img = "<span style='display:block;width:94px;height:37px;margin:0 auto;background:url(data:image/png;base64,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) no-repeat'></span>";
							infoDiv.innerHTML = "<style>body { margin: 0; padding: 0; }</style><div style='background-color: #e96656; color: #faf2f1; text-align: center; font-size: 18px; padding: 8px 0; width: 100%; z-index: 99999; font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol; overflow: auto;'><span style='padding-left: 1em; float: left;'>" + img + "</span><span style='padding-left: 1em;'>An ad blocker is turned on. Please consider turning it off while visiting our site, or whitelisting us. We depend on advertising to fund our expenses. To remove this alert, add or subscribe to the filter list for your adblock plugin by clicking the button below.</span><span style='display: block;padding-top: 0.5em;'><a href='abp:subscribe?location=" + ((g367CB268B1094004A3689751E7AC568F.CDNHost.startsWith("http:") || g367CB268B1094004A3689751E7AC568F.CDNHost.startsWith("https:")) ? g367CB268B1094004A3689751E7AC568F.CDNHost : "http%3A" + g367CB268B1094004A3689751E7AC568F.CDNHost) + "%2Fadblock-whitelist.txt&amp;title=EasyWhitelist' style='text-decoration:none;'><button style='padding: 0.4rem 0.7rem;border: none;text-align: center;font-size: 0.9rem;line-height: 1;color: #fff;background-color: rgb(236,122,109);cursor: pointer;box-shadow: 0 2px 8px 0 rgba(0,0,0,0.2), 0 2px 8px 0 rgba(0,0,0,0.19);border-radius: 3px;'>Remove Alert</button></a></span></div>";
							document.body.insertBefore(infoDiv, document.body.firstChild);
						}
					}, 1000);

					/*
					 * BlockIQ:
					 * - With adblock alert enabled and ad serve disabled, do not show ads for adblock users.
					 * - With passwall enabled, do now show ads for adblock users.
					 */
					if (!false) {
						return;
					}
				}

				/*
				 * BlockIQ: Show overlay on top of every page
				 */
				if (g367CB268B1094004A3689751E7AC568F.IsAdblockRequest && false) {
					var customHtml = unescape("");

					/*
					* Complete block will result in the webpage completely being
					* replaced by BlockIQ message
					*/
					if (false) {
						setTimeout(function () {
							if (customHtml && customHtml.length !== 0) {
								document.write(customHtml);
							} else {
								document.write("<html><head><meta charset='UTF-8'><style>*{margin:0;padding:0}html{background-color:#3f3f3f}p{background-color:#e96656;color:#faf2f1;text-align:center;font-size:20px;padding:8px 0;font-family:-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;overflow:auto}</style><body><div style='width:400px;margin:50px auto;padding:20px;background-color:#e96656;color:#faf2f1;-moz-box-shadow:0 0 20px #000;-webkit-box-shadow:0 0 20px #000;box-shadow:0 0 20px #000'><p><span style='display:block;width:189px;height:74px;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL0AAABKCAYAAADuQFWRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAsTSURBVHhe7Zw9iGVZEcfHdV0NFGZAQWEDZQw2EDFYwcBARJgNDAyEMTAwEHHAwEBBBoMBAx0MDAxcMDAwmMDAwMBAwcBAwcDAwMBgAwMDA0WFGT/H+p291a+6um6dOu/1bPd97/zhR/etj/Pux/+ee96d3r3x9OnTyRjvFdDnhAt50Zvl52vCL2xMeJPZfs5uT95YwmAGF0t4/lQv2pMnT94nP9Ga6d8iP73pp8GvEWEw4+bNm8xkYQ64wMK5me3I6M30z8nPc6afXC/CYMbjx49vyc93m9hLwvt1W/QOgdnurEe4KbwsvN3E4HkBE/n4O4UXXWyt9m0CY9Nj48Dn2n390BKzNfQRZ3wbt9j9XzW9SG92a3r2j/H9fnN8dt+UC8dppbHJ/oTBDg8ELuqnl5+q3wsvyXVhptNaDPUjwer7gl5QLvDfhe8t28pPBWRN8RECy0+NfUX4t6DCaLZH95UbU/f1ywI5TEe96rGgOYX9fCSo+KwfvP5raPoXlt/5rF8J3xYYV/UdQW8uxv2zwE1hx/mogLhRGPOciE0OIwx2wEiIC/spgVnwY8KfhN8KtpYLT5w8BqIek/9Y0JqfCNwwuo0JMAqG+MwSg68J9KppvihgQmqIfVL4nWDHZl8Zh/H5XWd66on9UmBW5UbR42JftR9j8hmfF3S21xslMr0+4fQG+6HADcfN/3UCIr2x+BzEObHjcGO08+FlaiYHEAY7qDn8MkHjzFRs8yRA/qJy0dEnBLYxL9LlDHFMw+zPU0H7mP3V0Jj2LwKm1DzoWDrb6z5hJFuHiZF9agBmw6j8jsGR7w2XNyL7Rob9/43mDMT/YLb5PJ6EtuaPAjcIY56TqZkcQBh0+LWyGsnGALMiDMU2ZsGYvo6bBTFzs833AaQm+qbAEoIZHJMQw+TM8piabWZsxPKGGVNhDKQ3nu6rPh0Uxsdcthd46qhZ9QZqywxDaPoHDx7YL+7sd/RFlhsK6f6w/zzVdLmnN1r7joRkXF0yTS4Ju7GmfwovmJlmzfRqBjUzM7Oa1oPsOp46jMjvLJEwPDM/Ylxdz7NUoIY8wrj0enQGX9tXDInZol6WPLaXz7e9oekdjBOZXsfUJxETii6f2P6G4JeIbxX+tTB1mNo5tSd3TX8TbN2akXSWYlnDdnWmB24AHvuaU1Pw+McQLIkwktbrTfCKoLGItX1lWdTWzQm6DCvN9I41039X4Illnwosb362/M454LzwWlhreCr8T2DymTpM7ZzriYdI/xX+Idg3MmtGwuTMWjozVtf0QA36rGDNyJgYFGPY9T03B+bRp8Maa/uq+/BhwecUvhgjTGhN+gEBjZqeL+h8qf+5YF/pcuNy3vStDU+4dwkfFN4jfFz4z8LUYWrnXE88WL2eXKTbC2okZicuFOvPrwpcOP+lr/L2BsjR/2uB2VDjGIKnBcsY+yYH1LjsD08GzMJTwZpxzfQYkJuLmVX3jZ+8YtSnDLD/fxW+IHAzcyOzL+ic6d15wvQcz7cElmQ8LVjuEXs5OKfUsy9taRVpqZuMY9VieXKRbi+okZgB7TtozOq/MK6+p1+GPpPEuODIPhkwo36G/0INXxK4iVTUsn+aP2d6K9nmJtF/D1Cxnm7LmaWGG4AvtirMyROKG7GZ3ortBeo4Tnvs9LyylNpa4FwibuSl4kLNZD+sWixPLtLtBWskTMla3r++9JCn7oLZ12R6K7DkAP8PPWdEWnLsG98RzmZ4L4lxg/APb9pzDlWUExiXG6lNCFZLHriBeAq8uKQuyNROxrBqsTxppDFhbcnQpaeo5wTgZmCpdbasW5PmJ0NYtViaBJWJ7W36U2FNro4nAP8WwBdelj7R8q2hinKTLlYtlibBaomx7nxtCaXSMa4b0b715OuVfSW9+rdLvBBg6XdhbLCK8pMuVi2WJpVnKf9Zh3DdlO2fz3kiRXWTLlYtliY9VlHec1mKxvZUtVZvx/Jkiuoz9lU01iWxZUXH47FqsTT5RnDZij7julFR1PeM2LKi4/FYtViavI6sKaqdlNiyouPxWLVYmpycBFtWdDweqxZLk5OTYMuKjsdj1WJpcnISbFnR8XisWixNTk6CLSs6Ho9Vi6XJyUmwZUXH47FqsTRZ4eHDhzLKjRK3bt16+uqrr0pbPFaEH8Pn9+HOnTvnxlzj9u3bUh6PsQbng+OMxrNQ8+gR/6lAPE6EH8Pn2V+bv3///oWagJ5G6618b49RRWN4rFosTVYYMb3ix8g4pDeianhl1Pi+v4fvz+j19vIr9DRar/J9VUYU9XusWixNVtjH9PT4cdbwvT4/ih+vgh9jjas8F/fu3TuX4+a2+YSeRutVvq/KiKJ+j1WLpckK0/Q7Rp8icFnnwi+pBpZOPY3Wq3xflRFF/R6rFkuTFbzpoxnG11wn0/s8ePP6/Bq+LzrOZ3EuMLiNcwNorkBPo/Uq3xf1VmoyRf0eqxZLkxX8RZym3/VFx/kszsXdu3fPxUfGFHoarVf5vqi3UpMp6vdYtViarOAv4jT9ri86zmdxLtbiRXoarVf5vqi3UpMp6vdYtViarOAv4jT9ri86zss+F7wCtjFmfa0v0tNovcr3Rb2VmkxRv8eqxdJkBX8Rp+l3fdFxXva58O/mtXaAnkbrVb4v6q3UZIr6PVYtliYr+Is4Tb/rGznOCnZs8LF9/jFN6Gm0XuX7ot5KTaao32PVYmmyQs/0Pg823+OQ3ojKeFsxvX83v+fn9TRar/J9UW+lJlPU77FqsTRZITJ1xlX/GUJlvK2Y3r+b9/VFehqtV/m+qLdSkynq91i1WJqsUDX94LvjM/w4Pj9KZbytmN7CrO/ri/Q0Wq/yfVFvpSZT1O+xarE0WWGafsdVmn70j9cMPY3Wq3xf1FupyRT1e6xaLE1WqJpeuey/LBylMt4WTb/Hq0qlp9F6le+Leis1maJ+j1WLpckK3vRceJtnDX/I2tP2jfZGVMbbounB1xfpabRe5fui3kpNpqjfY9ViabJCz/SKrRlZf9o+8PlRKuNtxfT+7c2e6/qeRutVvi/qrdRkivo9Vi2WJivsY/q1mgjbBz4/SmW8rZh+LTZIT6P1Kt9ne6OcMqKo32PVYmmywjT9jorp/fkauTFsHxC7hButp9F6le+zvVFOGVHU77FqsTRZYZp+x1WY/sA/K4aeRutVvs/2RjllRFG/x6rF0mSFafodV2F68H9/M/iGrKfRepXvs71RThlR1O+xarE0WWGafsdVmd6POfg3OD2N1qt8n++N8jCiqN9j1WJpssI0/Y6rMj3418IDs31Po/Uq3xf1RjVQVdTrsWqxNFnBX8QKh5h+jap5fF8FP8Ya3vQVLsv0/vXlwDnuabRe5ftGqSjq81i1WJqssI/pR/710PeucR1Mv8+5uCzTV/Ir9DRar/J9o1QU9XmsWixNVtjnQo980fK9a1TNMzobb+n/e+OPrTi59DRar/J9o1QU9XmsWixNVhg1ffH/unWG719jZMasGn+f/yiD/fDr6whqnsXfIVVqHD2N1lv53h7I/t6T7V3DqsXS5OQk2LKi4/FYtVianJwEW1Z0PB6rFkuTk5Ngy4qOx2PVYmlychJsWdHxeKxaLE1OToItKzoej1WLpcnJSbBlRcfjsWqxNDk5Cbas6Hg8Vi2WJieTI8CqxdLkZHIEWLVYmpxMjgCrFkuTk8kRYNViaXIyOQKsWixNTiZHgFWLpcnJ5AiwarE0OZkcAVYtliYnkyPAqsXWklNTx6hp+qmT0zT91Mnpguknk5MgDE4mx8vTG/8HQi1OjtBk4WMAAAAASUVORK5CYII=)'></span></p><p>An ad blocker is turned on. Please consider turning it off while visiting our site, or whitelisting us. We depend on advertising to fund our expenses.</p><!--<p style='padding-top:1em;'><a href='abp:subscribe?location=" + ((g367CB268B1094004A3689751E7AC568F.CDNHost.startsWith("http://") || g367CB268B1094004A3689751E7AC568F.CDNHost.startsWith("https://")) ? g367CB268B1094004A3689751E7AC568F.CDNHost : "http%3A%2F%2F" + g367CB268B1094004A3689751E7AC568F.CDNHost) + "%2Fadblock-whitelist.txt&amp;title=EasyWhitelist' style='text-decoration:none;'><button style='padding: 0.4rem 0.7rem;border: none;text-align: center;font-size: 0.9rem;line-height: 1;color: #fff;background-color: rgb(236,122,109);cursor: pointer;box-shadow: 0 2px 8px 0 rgba(0,0,0,0.2), 0 2px 8px 0 rgba(0,0,0,0.19);border-radius: 3px;'>Remove Alert</button></a></p>--></div>");
							}
						}, 1000);
					} else {
						setTimeout(function () {
							if (customHtml && customHtml.length !== 0) {
								document.body.insertBefore(stringToDomParser(customHtml), document.body.firstChild);
							} else {
								var infoDiv = document.createElement("div");
								infoDiv.style.position = "fixed";
								infoDiv.style.width = "500px";
								infoDiv.style.height = "300px";
								infoDiv.style.zIndex = "2147483647";
								infoDiv.style.margin = "-150px auto auto -250px";
								infoDiv.style.top = "50%";
								infoDiv.style.left = "50%";
								infoDiv.style.textAlign = "center";
								var img = "<span style='display:block;width:189px;height:74px;margin:0 auto;background:url(data:image/png;base64,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)'></span>";
								infoDiv.innerHTML = "<div style='background-color: #e96656; color: #faf2f1; font-size: 20px; font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol; overflow: auto;'><div style='padding: 1em;'>" + img + "</div><div style='padding: 1em 2em; line-height: normal;'>An ad blocker is turned on. Please consider turning it off while visiting our site, or whitelisting us. We depend on advertising to fund our expenses. To remove this alert, add or subscribe to the filter list for your adblock plugin by clicking the button below.</div><div style='padding-bottom: 1em;'><a href='abp:subscribe?location=" + ((g367CB268B1094004A3689751E7AC568F.CDNHost.startsWith("http:") || g367CB268B1094004A3689751E7AC568F.CDNHost.startsWith("https:")) ? g367CB268B1094004A3689751E7AC568F.CDNHost : "http%3A" + g367CB268B1094004A3689751E7AC568F.CDNHost) + "%2Fadblock-whitelist.txt&amp;title=EasyWhitelist' style='text-decoration:none;'><button style='padding: 0.4rem 0.7rem;border: none;text-align: center;font-size: 0.9rem;line-height: 1;color: #fff;background-color: rgb(236,122,109);cursor: pointer;box-shadow: 0 2px 8px 0 rgba(0,0,0,0.2), 0 2px 8px 0 rgba(0,0,0,0.19);border-radius: 3px;'>Remove Alert</button></a></div></div>";
								document.body.insertBefore(infoDiv, document.body.firstChild);

								var overlayDiv = document.createElement("div");
								overlayDiv.style.opacity = "0.8";
								overlayDiv.style.display = "block";
								overlayDiv.style.zIndex = "2147483646";
								overlayDiv.style.background = "#000";
								overlayDiv.style.position = "fixed";
								overlayDiv.style.width = "100%";
								overlayDiv.style.height = "100%";
								overlayDiv.style.top = "0px";
								overlayDiv.style.left = "0px";
								overlayDiv.style.textAlign = "center";
								document.body.insertBefore(overlayDiv, document.body.firstChild);
							}
						}, 1000);
					}

					// In case of BlockIQ paywall, do not continue with ad serving
					return;
				}

				g367CB268B1094004A3689751E7AC568F.TabHistoryManipulator(g367CB268B1094004A3689751E7AC568F.TabHistoryStorageName);

				if (this.IsFastPop) {
					this.InitFastPop();
				}
				if (!true && true) {
					subId = g367CB268B1094004A3689751E7AC568F.SubID;
					tid = g367CB268B1094004A3689751E7AC568F.TId;
					var testClickEvent = function () {
						g367CB268B1094004A3689751E7AC568F.Script.Load(
							g367CB268B1094004A3689751E7AC568F.InfinityHost + "/sitetestclickcount.engine?id=" + g367CB268B1094004A3689751E7AC568F.Guid
							+ "&rand=" + encodeURIComponent(Math.random()) + (subId.length > 0 ? "&subId=" + subId : "") + (tid.length > 0 ? "&tid=" + tid : ""), true);
					};
					_this.BindOnDocmentClick(testClickEvent);
				}

				function setupTracking() {
					if (!_this.PlaceLotamePixelAfterTag && !_this.Browser.isSafari() &&
						(_this.PlaceLotamePixel || _this.RequestTrackingScripts)) {
						var lotame = document.createElement('script');
						lotame.setAttribute('src',
							_this.RequestTrackingScripts
								// Load tracking scripts using separate requests if site guid is not defined
								// in the tag as query string parameter (i.e. old tag is used on a site)
								? _this.CDNHost + '/Scripts/ltm?id=' + _this.Guid
								// Create lotame script reference if needed, since we have all required data
								: '//tags.crwdcntrl.net/c/' + _this.LotameTrackingId + '/cc_af.js');
						lotame.async = true;
						// Append lotame script
						var lotameEntry = document.getElementsByTagName('script')[0];
						if (lotameEntry) {
							lotameEntry.parentNode.insertBefore(lotame, lotameEntry);
						}
					}
				}

				if (_this.PlaceComScorePixel || _this.RequestTrackingScripts) {
					// Create comscore script reference
					var comscore = document.createElement("script");
					comscore.setAttribute('src',
						_this.RequestTrackingScripts
							// Load tracking scripts using separate requests if site guid is not defined
							// in the tag as query string parameter (i.e. old tag is used on a site)
							? _this.CDNHost + '/Scripts/cms?id=' + _this.Guid
							// Create comscore script reference if needed, since we have all required data
							: (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js?" +
							"c1=" + _this.ComScoreTagType + "&" +
							"c2=" + _this.ComScoreClientId + "&" +
							"c3=" + _this.ComScoreChannelId +
							// Parameter required to detect mobile users. 
							// We are adding this parameter for mobile browsers only.
							(_this.IsMobile.any(_this._Top) ? '&ns_ap_it=b' : ''));
					comscore.async = true;
					// Append comscore script
					var comscoreEntry = document.getElementsByTagName('script')[0];
					if (comscoreEntry) {
						comscoreEntry.parentNode.insertBefore(comscore, comscoreEntry);
					}
				}

				/* jshint -W004 */
				var fingerPrint = 123; //new this.Fingerprint().get();
				var timeOffset = new Date().getTimezoneOffset();

				var referrerUrl = g367CB268B1094004A3689751E7AC568F.GetDfpTagReferrerUrl() || window.document.referrer;

				/* jshint +W004 */
				if (g367CB268B1094004A3689751E7AC568F.IsAdblockRequest) {
					var time = encodeURIComponent(timeOffset);
					var rand = encodeURIComponent(Math.floor(Math.random() * 100000 + 1));

					// var encodedReferrerUrl = "b32_" + g367CB268B1094004A3689751E7AC568F.b32encode(encodeURIComponent(referrerUrl));
					var subIdParam = (this.SubID.length > 0 ? this.SubID : "null");
					var tidParam = (this.TId.length > 0 ? this.TId : "null");

					this.Script.Add(this.InfinityHost
						+ "/" + (time ? time : "null") // time
						+ "/" + (this.Guid ? this.Guid : "null") // id
						+ "/" + (rand ? rand : "null") // rand
						+ "/" + (this.Version ? this.Version : "null") // ver
						+ "/" + "null" // (encodedReferrerUrl ? encodedReferrerUrl : "null") // referrerUrl
						+ "/" + (fingerPrint ? fingerPrint : "null") // fingerprint
						+ "/" + subIdParam // subId
						+ "/" + g367CB268B1094004A3689751E7AC568F.IsAdblockRequest // ABR
						+ "/" + this.GetStdTimezoneOffset() // stdTime
						+ "/" + g367CB268B1094004A3689751E7AC568F.GetSupportedVideo() // Flash enabled
						+ "/" + this.GetWindowWidth()   // bw: browser width
						+ "/" + this.GetWindowHeight()  // bh: browser height
						+ "/" + tidParam // tid,
						+ "/" + g367CB268B1094004A3689751E7AC568F.GetScreenWidth() + "x" + g367CB268B1094004A3689751E7AC568F.GetScreenHeight()
						+ "/" + encodeURIComponent(g367CB268B1094004A3689751E7AC568F.GetKeywords())
						+ "/" + "Tag.a1b", true);
				}
				else {

					var ancestorOrigins = g367CB268B1094004A3689751E7AC568F._Top.document.location.ancestorOrigins;


					var currentUrl = g367CB268B1094004A3689751E7AC568F.GetDfpTagReferrerUrl() ||
						top !== self
						? (ancestorOrigins !== undefined && ancestorOrigins.length > 1
							? ancestorOrigins[ancestorOrigins.length - 1]
							: g367CB268B1094004A3689751E7AC568F.GetTopFrameCurrentUrl())
						: g367CB268B1094004A3689751E7AC568F._Top.document.location.href;

					this.Script.Add(this.InfinityHost + "/Tag.engine?"
						+ "time=" + encodeURIComponent(timeOffset)
						+ "&id=" + this.Guid
						+ "&rand=" + encodeURIComponent(Math.floor(Math.random() * 100000 + 1))
						+ "&ver=" + this.Version
						+ "&referrerUrl=" + encodeURIComponent(referrerUrl)
						+ "&fingerPrint=" + fingerPrint
						+ (this.SubID.length > 0 ? "&subId=" + this.SubID : "")
						+ (this.TId.length > 0 ? "&tid=" + this.TId : "")
						+ "&abr=" + g367CB268B1094004A3689751E7AC568F.IsAdblockRequest
						+ "&stdTime=" + this.GetStdTimezoneOffset()
						+ "&fpe=" + g367CB268B1094004A3689751E7AC568F.GetSupportedVideo()
						+ "&bw=" + this.GetWindowWidth()
						+ "&bh=" + this.GetWindowHeight()
						+ "&res=" + g367CB268B1094004A3689751E7AC568F.GetScreenWidth() + "x" + g367CB268B1094004A3689751E7AC568F.GetScreenHeight()
						+ (currentUrl != null && currentUrl !== "" ? "&curl=" + encodeURIComponent(currentUrl) : "")
						+ "&kw=" + encodeURIComponent(g367CB268B1094004A3689751E7AC568F.GetKeywords()), true);
				}

				// Append lotame/comscore pixel scripts if required
				setupTracking();

				g367CB268B1094004A3689751E7AC568F.UserMotionLogging && g367CB268B1094004A3689751E7AC568F.SetupUserMotionLogging();

				this.Script.Load(function () {
					if (typeof _this.Media.Items == "undefined" || _this.Media.Items === undefined || _this.Media.Items === null)
						return;

					for (var i = 0; i < _this.Media.Items.length; i++) {
						var item = _this.Media.Items[i];
						var logFilter = _this.LogZoneFilter({ Id: item.ZoneId, Name: item.ZoneName });
						// For Pop zone we check client side filters right before opening pop
						if (item.MediaType === 'PopUnder' || _this.IsClientSideFiltersPassed(item.ClientSideFilters, logFilter)) {
							_this.Script.Add(_this.CDNHost + "/Scripts/MediaScripts/" + item.ScriptUri, true);
						}
					}

					_this.Script.Load(function () {
						for (var i = 0; i < _this.Media.Items.length; i++) {
							var item = _this.Media.Items[i];
							var mediaType = item.MediaType;
							var logFilter = _this.LogZoneFilter({ Id: item.ZoneId, Name: item.ZoneName });

							_this.ConsoleGroup("TagRB results for Zone " + item.ZoneName + "(" + item.ZoneId + ")");
							_this.ConsoleLog(item);
							_this.ConsoleGroupEnd();

							if (typeof _this.Modules[mediaType] != "undefined" &&
								// For Pop zone we check client side filters right before opening pop
								(mediaType === 'PopUnder' || _this.IsClientSideFiltersPassed(item.ClientSideFilters), logFilter)) {
								_this.Modules[mediaType](item, _this._Top);
							}
						}
					});

					g367CB268B1094004A3689751E7AC568F.Lotame.PlacePixel();
					g367CB268B1094004A3689751E7AC568F.Lotame.PlaceMappingPixel();
					g367CB268B1094004A3689751E7AC568F.Lotame.CallExtractionAPI();
					g367CB268B1094004A3689751E7AC568F.PubMatic.PlaceMappingPixel();
					g367CB268B1094004A3689751E7AC568F.Bidswitch.PlaceMappingPixel();
					g367CB268B1094004A3689751E7AC568F.Pizookie.PlacePixel();
				});
				if (typeof (InfCustomerCallback) === "function") {
					InfCustomerCallback();
				}
			} catch (err) {
				g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
			}
		},

		GetDfpTagCurrentUrl: function () {
			var currentUrl = null;

			try {
				if (g367CB268B1094004A3689751E7AC568F.IsDfpTag()) {
					// check if the dfp frame is in an another iframe.
					// if it is we just use the referrer url of that iframe to get the host page url
					// if it is not we can use the parent window location
					if (window.parent.frameElement != null && window.parent.document.referrer != "") {
						currentUrl = window.parent.document.referrer;
					}
					else {
						currentUrl = window.parent.document.location.href;
					}
				}
			}
			catch (e) {
				g367CB268B1094004A3689751E7AC568F.ConsoleLog(e);
			}

			return currentUrl;
		},

		GetDfpTagReferrerUrl: function () {
			var referrerUrl = null;

			try {
				if (g367CB268B1094004A3689751E7AC568F.IsDfpTag()) {
					// check if the dfp frame is in an another iframe.
					// if it is we should try to get the referrer of the parent of that iframe (this will not work for cross domain iframes)
					// if it is not we can use the parent window location
					if (window.parent.frameElement != null && window.parent.parent.document.referrer != "") {
						referrerUrl = window.parent.parent.document.referrer;
					}
					else {
						referrerUrl = window.parent.document.referrer;
					}
				}
			}
			catch (e) {
				g367CB268B1094004A3689751E7AC568F.ConsoleLog(e);
			}

			return referrerUrl;
		},

		GetTopFrameCurrentUrl: function () {
			var currentUrl = null;

			try {
				if (window.parent.frameElement != null && window.parent.document.referrer != "") {
					currentUrl = window.parent.document.referrer;
				}
				else {
					currentUrl = window.parent.document.location.href;
				}
			} catch (e) {
				g367CB268B1094004A3689751E7AC568F.ConsoleLog(e);
				currentUrl = document.referrer;
			}

			return currentUrl;
		},

		IsDfpTag: function () {
			// check if the script is loaded using the new dfp tag that are wrapped in an iframe
			return window.frameElement != null && window.frameElement.getAttribute("data-inf-dfp") === "true";
		},

		SetupUserMotionLogging: function () {

			try {
				g367CB268B1094004A3689751E7AC568F.TryGettingLocalIpAddress();
			} catch (e) {
				g367CB268B1094004A3689751E7AC568F.ConsoleLog(e);
			}
			var eventType = null;
			var captureFrequencyInMilliSeconds = 100;
			var captureMaxTimeInSeconds = 5;
			var captureQueue = [];

			var pageCoordX = Number.MAX_SAFE_INTEGER,
				pageCoordY = Number.MAX_SAFE_INTEGER;

			var hasAccelerometer = false,
				alpha = null,
				beta = null,
				gamma = null;

			var url = g367CB268B1094004A3689751E7AC568F.InfinityHost +
				"/uat.engine?" +
				"id=" +
				g367CB268B1094004A3689751E7AC568F.Guid;

			window.top.document.onmousemove = function (e) {
				var event = e || window.event;
				pageCoordX = event.clientX;
				pageCoordY = event.clientY;
			};

			if (window.DeviceOrientationEvent) {
				hasAccelerometer = true;
				window.addEventListener("deviceorientation",
					function (event) {
						alpha = event.alpha, beta = event.beta, gamma = event.gamma;
					},
					true);
			}

			var mouseMove = function () {
				eventType = "mouse";
				if (pageCoordX !== Number.MAX_SAFE_INTEGER && pageCoordY !== Number.MAX_SAFE_INTEGER) {
					if (captureQueue.length > 0 &&
						pageCoordX === captureQueue[captureQueue.length - 1].x &&
						pageCoordY === captureQueue[captureQueue.length - 1].y) {
						return;
					}

					if (captureQueue.length >= (1000 * captureMaxTimeInSeconds / captureFrequencyInMilliSeconds)) {
						captureQueue.shift();
					}
					var mousePos = {
						x: pageCoordX,
						y: pageCoordY,
						v: captureQueue.length > 1
							? Math.sqrt(Math.pow((pageCoordX - captureQueue[captureQueue.length - 1].x), 2) +
								Math.pow((pageCoordY - captureQueue[captureQueue.length - 1].y), 2)).toFixed(2)
							: 0
					}
					captureQueue.push(mousePos);
				}
			};

			var deviceMove = function () {
				eventType = "motion";
				var ialpha = alpha ? alpha.toFixed(2) : Number.MAX_SAFE_INTEGER;
				var ibeta = beta ? beta.toFixed(2) : Number.MAX_SAFE_INTEGER;
				var igamma = gamma ? gamma.toFixed(2) : Number.MAX_SAFE_INTEGER;

				if (captureQueue.length > 0 &&
					ialpha === captureQueue[captureQueue.length - 1].x &&
					ibeta === captureQueue[captureQueue.length - 1].y &&
					igamma === captureQueue[captureQueue.length - 1].v) {
					return;
				}

				if (captureQueue.length >= (1000 * captureMaxTimeInSeconds / captureFrequencyInMilliSeconds)) {
					captureQueue.shift();
				}

				var devicePos = {
					x: ialpha,
					y: ibeta,
					v: igamma
				};
				captureQueue.push(devicePos);
			};

			var pushPayload = function (triggerType) {
				try {
					clearInterval(trackerInterval);
					var payload = {
						EventType: eventType,
						TriggerType: triggerType,
						LocalIpAddress: g367CB268B1094004A3689751E7AC568F.LocalIpAddress,
						Positions: captureQueue
					};
					g367CB268B1094004A3689751E7AC568F.AjaxPost(url, JSON.stringify(payload));
				} catch (e) {
					g367CB268B1094004A3689751E7AC568F.ConsoleLog(e);
				}
			};

			var device = g367CB268B1094004A3689751E7AC568F.UaParser.getDevice();
			var useAccelerometer = hasAccelerometer && (device.type === "mobile" || device.type === "tablet");
			var trackerInterval = useAccelerometer
				? setInterval(deviceMove, captureFrequencyInMilliSeconds)
				: setInterval(mouseMove, captureFrequencyInMilliSeconds);

			window.onbeforeunload = function () {
				pushPayload("onbeforeunload");
			};
			g367CB268B1094004A3689751E7AC568F._Top.document.onclick = function () {
				pushPayload("onclick");
			};
			g367CB268B1094004A3689751E7AC568F._Top.document.addEventListener("touchstart", function () {
				pushPayload("touchstart");
			});
		},

		TryGettingLocalIpAddress: function () {
			//compatibility for firefox and chrome
			var myPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;
			var pc = new myPeerConnection({
				iceServers: []
			}),
				noop = function () { },
				localIPs = {},
				ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g,
				key;

			function iterateIP(ip) {
				if (!localIPs[ip]) g367CB268B1094004A3689751E7AC568F.LocalIpAddress = ip;
				localIPs[ip] = true;
			}

			//create a bogus data channel
			pc.createDataChannel("");

			// create offer and set local description
			pc.createOffer(function (sdp) {
				sdp.sdp.split('\n').forEach(function (line) {
					if (line.indexOf('candidate') < 0) return;
					line.match(ipRegex).forEach(iterateIP);
				});

				pc.setLocalDescription(sdp, noop, noop);
			},
				noop);

			//listen for candidate events
			pc.onicecandidate = function (ice) {
				if (!ice || !ice.candidate || !ice.candidate.candidate || !ice.candidate.candidate.match(ipRegex)) return;
				ice.candidate.candidate.match(ipRegex).forEach(iterateIP);
			};
		},

		InitFastPop: function () {
			window.console = window.console || { log: function (d) { } };
			g367CB268B1094004A3689751E7AC568F.ConsoleLog("INF_FPU: Initiated");

			g367CB268B1094004A3689751E7AC568F.PopSettings = {};
			g367CB268B1094004A3689751E7AC568F.PopSettings.Cap = 1;
			g367CB268B1094004A3689751E7AC568F.PopSettings.CapLength = 28800;
			g367CB268B1094004A3689751E7AC568F.PopSettings.Width = 0;
			g367CB268B1094004A3689751E7AC568F.PopSettings.Height = 0;
			g367CB268B1094004A3689751E7AC568F.PopSettings.IsPopunder = true;
			g367CB268B1094004A3689751E7AC568F.PopSettings.RespectTargetBlank = true;
			g367CB268B1094004A3689751E7AC568F.PopSettings.MobileHistory = true;
			g367CB268B1094004A3689751E7AC568F.PopSettings.PopUnderDontTriggerSelector = ".removeAdLink, iframe.main_top_right, iframe.TJVideo1AB, #hd-rightColVideoPage iframe, iframe[title='PornHub  Campaign bottom'], div.captcha-wrapper, #dmcaForm";
			g367CB268B1094004A3689751E7AC568F.PopSettings.PopUnderTriggerOnSelector = ".js-pop";
			g367CB268B1094004A3689751E7AC568F.PopSettings.PopUnderTriggerOnSelectorDepth = 4;
			g367CB268B1094004A3689751E7AC568F.PopSettings.IsTracking = false;

			g367CB268B1094004A3689751E7AC568F.PopSettings.SameTabAdSettings = {};
			g367CB268B1094004A3689751E7AC568F.PopSettings.SameTabAdSettings.AdblockOnly = true;
			g367CB268B1094004A3689751E7AC568F.PopSettings.SameTabAdSettings.Chrome = false;
			g367CB268B1094004A3689751E7AC568F.PopSettings.SameTabAdSettings.Edge = false;
			g367CB268B1094004A3689751E7AC568F.PopSettings.SameTabAdSettings.Firefox = false;
			g367CB268B1094004A3689751E7AC568F.PopSettings.SameTabAdSettings.IE = false;
			g367CB268B1094004A3689751E7AC568F.PopSettings.SameTabAdSettings.Opera = false;
			g367CB268B1094004A3689751E7AC568F.PopSettings.SameTabAdSettings.Safari = false;
			g367CB268B1094004A3689751E7AC568F.PopSettings.SameTabAdSettings.Windows = false;
			g367CB268B1094004A3689751E7AC568F.PopSettings.SameTabAdSettings.OSX = false;
			g367CB268B1094004A3689751E7AC568F.PopSettings.SameTabAdSettings.ClickAnywhere = false;

			g367CB268B1094004A3689751E7AC568F.PopSettings.UseRemoteMediaHost = "false";
			g367CB268B1094004A3689751E7AC568F.PopSettings.UsePopCustomHost = "false";
			g367CB268B1094004A3689751E7AC568F.PopSettings.PopCustomHostUrl = "";
			g367CB268B1094004A3689751E7AC568F.PopSettings.PublisherDomainAliasUrl = "engine.phn.doublepimp.com";
			g367CB268B1094004A3689751E7AC568F.PopSettings.ScriptHost = "cdn.doublepimpssl.com";

			g367CB268B1094004A3689751E7AC568F.PopSettings.SiteFrequencyCapFilters = [{ Cap: 1, CapLengthInSeconds: 28800 }];
			g367CB268B1094004A3689751E7AC568F.PopSettings.KeywordFilter = { Exclusive: true, IsRegex: false, Keywords: ["www.pornhub.com/upload"] };
			g367CB268B1094004A3689751E7AC568F.PopSettings.ClientSideFilters = [];
			g367CB268B1094004A3689751E7AC568F.PopSettings.UserAgentFilter = null;
			g367CB268B1094004A3689751E7AC568F.PopSettings.OffsetFilter = { Type: 'Any', Offset: 1 };
			g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter = null;
			g367CB268B1094004A3689751E7AC568F.PopSettings.DeviceFilter = null;
			g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter = null;
			g367CB268B1094004A3689751E7AC568F.PopSettings.ReferrerFilter = null;
			g367CB268B1094004A3689751E7AC568F.PopSettings.RequireToRunOnDomainFilter = null;
			g367CB268B1094004A3689751E7AC568F.PopSettings.ZoneAdblockOnly = true;
			g367CB268B1094004A3689751E7AC568F.PopSettings.ZoneAdblockExclusive = true;
			g367CB268B1094004A3689751E7AC568F.PopSettings.ZoneAdblockIgnoreFrontEnd = true;

			g367CB268B1094004A3689751E7AC568F.PopSettings.ChromePopApproach = 1;
			g367CB268B1094004A3689751E7AC568F.PopSettings.InterceptFlash = true;
			g367CB268B1094004A3689751E7AC568F.PopSettings.InterceptInlineFrames = false;
			g367CB268B1094004A3689751E7AC568F.PopSettings.HiddenPopunderWaitForParentWindowToClose = true;
			g367CB268B1094004A3689751E7AC568F.PopSettings.HiddenPopunderWaitForParentWindowToFocus = true;
			g367CB268B1094004A3689751E7AC568F.PopSettings.HiddenPopunderWaitSecondsToLoadMedia = 0;
			g367CB268B1094004A3689751E7AC568F.PopSettings.AllowMultiplePopsForTheSamePageView = false;

			g367CB268B1094004A3689751E7AC568F.PopSettings.UseSameTab = function (browser, os, isAdblockRequest) {
				var tabSettings = this.SameTabAdSettings;
				var useSameTab =
					g.PopSettings.IsPopunder &&
					tabSettings !== undefined &&
					tabSettings !== null &&
					(tabSettings.AdblockOnly == false || isAdblockRequest) &&
					((os.name.toUpperCase() === "WINDOWS" && tabSettings.Windows) ||
						(os.name.toUpperCase() === "MAC OS" && tabSettings.OSX)) &&
					(((browser.chrome || browser.name == "Chrome") && tabSettings.Chrome) ||
						((browser.firefox || browser.name == "Firefox") && tabSettings.Firefox) ||
						((browser.msie || browser.name == "IE") && tabSettings.IE) ||
						((browser.name == "Edge" && tabSettings.Edge)) ||
						((browser.opera || browser.name == "Opera") && tabSettings.Opera) ||
						((browser.safari || browser.name == "Safari") && tabSettings.Safari));
				return useSameTab;
			};

			var jsPopunder = function (sUrl, sConfig) {
				var _parent = g367CB268B1094004A3689751E7AC568F._Top; // (top != self && typeof (top.document.location.toString()) === 'string') ? top : self;
				var popunder = null;

				sConfig = (sConfig || {});

				// Converting to string because exist publisher site with scripts overwriting window.open and expecting win name to be a string (i.e. failing if it is a number)
				var sName = (sConfig.name || Math.floor((Math.random() * 1000) + 1)).toString();

				/* capping */
				/* cookie stuff */

				//var browser = function () {
				//	var n = navigator.userAgent.toLowerCase();
				//	var b = {
				//		webkit: /webkit/.test(n),
				//		mozilla: (/mozilla/.test(n)) && (!/(compatible|webkit)/.test(n)),
				//		chrome: /chrome/.test(n),
				//		msie: (/msie/.test(n)) && (!/opera/.test(n)),
				//		firefox: /firefox/.test(n),
				//		safari: (/safari/.test(n) && !(/chrome/.test(n))),
				//		opera: /opera/.test(n)
				//	};
				//	b.version = (b.safari) ? (n.match(/.+(?:ri)[\/: ]([\d.]+)/) || [])[1] : (n.match(/.+(?:ox|me|ra|ie)[\/: ]([\d.]+)/) || [])[1];
				//	return b;
				//}();

				var uaParser = g367CB268B1094004A3689751E7AC568F.UaParser;
				var os = uaParser.getOS();
				var device = uaParser.getDevice();
				var browser = uaParser.getBrowser();

				function isGenericStringListFilterPassed(obj) {
					if (!obj || !obj.Keywords) {
						return true;
					}

					var matches = false;
					var currentUrl = g367CB268B1094004A3689751E7AC568F.GetDfpTagCurrentUrl() || window.location.href.toLowerCase();

					for (var i = 0; i < obj.Keywords.length; i++) {
						var keyword = obj.Keywords[i].toLowerCase();
						matches = obj.IsRegex
							? new RegExp(keyword).test(currentUrl)
							: currentUrl.indexOf(keyword) !== -1;

						if (matches) {
							break;
						}
					}

					return matches !== obj.Exclusive;
				}

				function isUserAgentFilterPassed() {
					var filter = g367CB268B1094004A3689751E7AC568F.PopSettings.UserAgentFilter;
					if (!filter) {
						return true;
					}

					uaParser = g367CB268B1094004A3689751E7AC568F.UaParser;
					var matches = false;
					var searchString = uaParser.getUA();

					for (var i in filter.UserAgentStrings) {
						var userAgent = filter.UserAgentStrings[i];
						matches = filter.IsRegex
							? new RegExp(userAgent).test(searchString)
							: searchString.indexOf(userAgent) !== -1;

						if (matches) {
							break;
						}
					}

					return matches !== filter.Exclusive;
				}

				function logicalXOR(val1, val2) {
					return (val1 || val2) && !(val1 && val2);
				}

				function isZoneAdblockFilterPassed() {

					if (g367CB268B1094004A3689751E7AC568F.PopSettings.ZoneAdblockIgnoreFrontEnd) {
						return true;
					}

					if (g367CB268B1094004A3689751E7AC568F.PopSettings.ZoneAdblockOnly === undefined) {
						return true;
					}

					var matches = true;

					if (g367CB268B1094004A3689751E7AC568F.PopSettings.ZoneAdblockOnly && !g367CB268B1094004A3689751E7AC568F.IsAdblockRequest) {
						matches = false;
					}

					return logicalXOR(g367CB268B1094004A3689751E7AC568F.PopSettings.ZoneAdblockExclusive, matches);
				}

				function isOffsetFilterPassed() {
					if (!g367CB268B1094004A3689751E7AC568F.PopSettings.OffsetFilter) {
						return true;
					}

					var sessionRequestNumber = g367CB268B1094004A3689751E7AC568F.Storage.GetCookie("g36FastPopSessionRequestNumber");
					if (sessionRequestNumber == null || isNaN(sessionRequestNumber)) {
						sessionRequestNumber = 0;
					}

					sessionRequestNumber++;
					g367CB268B1094004A3689751E7AC568F.Storage.SetCookie("g36FastPopSessionRequestNumber", sessionRequestNumber);

					switch (g367CB268B1094004A3689751E7AC568F.PopSettings.OffsetFilter.Type) {
						case "Any":
							return true;
						case "OnlyOn":
							return sessionRequestNumber == g367CB268B1094004A3689751E7AC568F.PopSettings.OffsetFilter.Offset;
						case "Before":
							return sessionRequestNumber < g367CB268B1094004A3689751E7AC568F.PopSettings.OffsetFilter.Offset;
						case "After":
							return sessionRequestNumber > g367CB268B1094004A3689751E7AC568F.PopSettings.OffsetFilter.Offset;
					}
				}

				function isBrowserFilterPassed() {
					if (!g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter) {
						return true;
					}

					var uaParser = g367CB268B1094004A3689751E7AC568F.UaParser;
					var browser = uaParser.getBrowser();

					return (g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter.TargetChrome && browser.name == "Chrome")
						|| (g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter.TargetEdge && browser.name == "Edge")
						|| (g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter.TargetFirefox && browser.name == "Firefox")
						|| (g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter.TargetIe && browser.name == "IE" && InternetExplorerVersionMatch(browser))
						|| (g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter.TargetOpera && browser.name == "Opera")
						|| (g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter.TargetSafari && browser.name == "Safari")
						|| (browser.name != "Chrome"
							&& browser.name != "Edge"
							&& browser.name != "Firefox"
							&& browser.name != "IE"
							&& browser.name != "Opera"
							&& browser.name != "Safari"
							&& g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter.TargetOthers);
				}

				function InternetExplorerVersionMatch(browser) {
					return (browser.major === "9" && g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter.TargetIe9)
						|| (browser.major === "10" && g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter.TargetIe10)
						|| (browser.major === "11" && g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter.TargetIe11)
						|| (browser.major !== "9"
							&& browser.major !== "10"
							&& browser.major !== "11"
							&& g367CB268B1094004A3689751E7AC568F.PopSettings.BrowserFilter.TargetIeOthers);
				}

				function isDeviceFilterPassed() {
					if (!g367CB268B1094004A3689751E7AC568F.PopSettings.DeviceFilter) {
						return true;
					}

					var uaParser = g367CB268B1094004A3689751E7AC568F.UaParser;
					var device = uaParser.getDevice();

					return (g367CB268B1094004A3689751E7AC568F.PopSettings.DeviceFilter.TargetDesktop && (device.type == "console" || device.type == undefined))
						|| (g367CB268B1094004A3689751E7AC568F.PopSettings.DeviceFilter.TargetMobile && device.type == "mobile")
						|| (g367CB268B1094004A3689751E7AC568F.PopSettings.DeviceFilter.TargetTablet && device.type == "tablet");
				}

				function isOSFilterPassed() {
					if (!g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter) {
						return true;
					}

					var uaParser = g367CB268B1094004A3689751E7AC568F.UaParser;
					var os = uaParser.getOS();

					return (g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter.TargetAndroid && os.name == "Android")
						|| (g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter.TargetIOS && os.name == "iOS")
						|| (g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter.TargetOSX && os.name == "Mac OS")
						|| (g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter.TargetWindows && os.name == "Windows" && WindowsVersionMatch(os))
						|| (os.name != "Android"
							&& os.name != "Mac OS"
							&& os.name != "iOS"
							&& os.name != "Windows"
							&& g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter.TargetOthers);
				}

				function WindowsVersionMatch(os) {
					return (os.version == "Vista" && g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter.TargetWindowsVista)
						|| (os.version == "7" && g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter.TargetWindows7)
						|| (os.version == "8" && g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter.TargetWindows8)
						|| (os.version == "8.1" && g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter.TargetWindows81)
						|| (os.version == "10" && g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter.TargetWindows10)
						|| (os.version != "Vista"
							&& os.version != "7"
							&& os.version != "8"
							&& os.version != "8.1"
							&& os.version != "10"
							&& g367CB268B1094004A3689751E7AC568F.PopSettings.OSFilter.TargetOtherVersions);
				}

				function doPopunder(sUrl, sName, sWidth, sHeight, sPosX, sPosY) {
					var g = g367CB268B1094004A3689751E7AC568F;

					var sOptions = 'directories=0,toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=' + sWidth.toString() + ',height=' + sHeight.toString() + ',screenX=' + sPosX + ',screenY=' + sPosY + 'index=0,total=1';

					// We don't intercept flash clicks when same tab is ON because same tab pops only on link clicks.
					var useSameTab = g.PopSettings.UseSameTab(browser, os, g.IsAdblockRequest);
					if ((g367CB268B1094004A3689751E7AC568F.PopSettings.InterceptFlash || g367CB268B1094004A3689751E7AC568F.PopSettings.InterceptInlineFrames)
						&& !useSameTab
						&& !g.PopLoaded
						&& !g.IsFastPopCapped()) {
						// We must ignore clicks on flash elements if they match DontTriggerSelector or are ignored by RespectTargetBlank because no pop will be shown on such a click
						// This way we ensure that we won't end up displaying overlay on flash forever
						g.FlashClickInterceptor.ignoreElementPredicate = function (element) {
							if (g.PopSettings.RespectTargetBlank) {
								var randomParent = g.GetParentLink(element);
								if (randomParent.getAttribute("target") === "_blank" || randomParent.getAttribute("rel") === "nofollow") {
									return true;
								}
							}

							return g.IsDontTriggerForSelectorMatch(g.PopSettings.PopUnderDontTriggerSelector, element)
								|| (g.PopSettings.PopUnderTriggerOnSelector && !g.IsTriggerOnSelectorMatch(g.PopSettings.PopUnderTriggerOnSelector, element, g.PopSettings.PopUnderTriggerOnSelectorDepth));
						};

						// Even though chrome propagates mousedown/mouseup events on flash it propagates mouseup event not to the topmost flash element
						// but to the flash element where mousedown happened. This leads to chrome pop (when using flash solution) appear only on second click
						// Thats why we use flash click interceptor for chrome as well
						g.FlashClickInterceptor.activate(browser, g.IsMobile.any(g._Top), g367CB268B1094004A3689751E7AC568F.PopSettings.InterceptFlash ? g.IsFlashPluginEnabled() : true);
					}

					var isChromeTabOver = g.PopSettings.ChromePopApproach == g.Enums.chromePopApproach.tabOver;
					var isChromeMixed = (browser.chrome || browser.name === "Chrome")
						&& g.PopSettings.IsPopunder
						&& g.PopSettings.ChromePopApproach == g.Enums.chromePopApproach.mixed;

					try {
						if (g.PopSettings.IsPopunder &&
							g.ChromePopunder.supported() &&
							(browser.chrome || browser.name === "Chrome") &&
							!g.PopSettings.IsTracking &&
							!isChromeTabOver &&
							!isChromeMixed &&
							//  Disjunction
							(g.PopSettings.SameTabAdSettings === undefined ||
								(!(g.PopSettings.SameTabAdSettings.Windows && os.name.toUpperCase() === "WINDOWS") &&
									!(g.PopSettings.SameTabAdSettings.OSX && os.name.toUpperCase() === "MAC OS")) ||
								(g.PopSettings.SameTabAdSettings.AdblockOnly && !g.IsAdblockRequest) ||
								!g.PopSettings.SameTabAdSettings.Chrome)
						) {
							g.ChromePopunder.init(null, g367CB268B1094004A3689751E7AC568F.PopSettings.ChromePopApproach);
							return;
						} else if (g.PopSettings.IsPopunder &&
							!g.IsMobile.any(g._Top) &&
							(browser.chrome || browser.name === "Chrome") &&
							!g.PopSettings.IsTracking &&
							!isChromeTabOver &&
							!isChromeMixed &&
							//  Disjunction
							(g.PopSettings.SameTabAdSettings === undefined ||
								(!(g.PopSettings.SameTabAdSettings.Windows && os.name.toUpperCase() !== "WINDOWS") &&
									!(g.PopSettings.SameTabAdSettings.OSX && os.name.toUpperCase() !== "MAC OS")) ||
								(g.PopSettings.SameTabAdSettings.AdblockOnly && !g.IsAdblockRequest) ||
								!g.PopSettings.SameTabAdSettings.Chrome)
						) {
							g.PopSettings.SameTabAdSettings = g.PopSettings.SameTabAdSettings || {};
							g.PopSettings.SameTabAdSettings.AdblockOnly = false;
							g.PopSettings.SameTabAdSettings.Chrome = true;
							g.PopSettings.SameTabAdSettings.Windows = g.PopSettings.SameTabAdSettings.Windows || true;
							g.PopSettings.SameTabAdSettings.OSX = g.PopSettings.SameTabAdSettings.OSX || true;
							g.PopSettings.SameTabAdSettings.ClickAnywhere = g.PopSettings.SameTabAdSettings.ClickAnywhere || false;
						}
					} catch (err) {
						g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
					}

					try {
						if (g.EdgePopunder.supported(browser, os)) {
							g.EdgePopunder.init();
							return;
						}
					}
					catch (err) {
						g.ConsoleLog(err);
					}

					var doTrackingFastPop = function () {
						var iframe = g._Top.document.createElement("iframe");
						iframe.setAttribute("style", "display:none;");
						g._Top.document.body.appendChild(iframe);
						iframe.src = sUrl;
					}

					var listenerEvent = function (event) {
						/*  IF YOU MOVE THE POPRUNNING CODE I WILL KILL YOU! */

						if (g.PopRunning) {
							return;
						}
						g.PopRunning = true;

						/*
					 * SHARED Code -- This is the shared setup code for both mobile and desktop
					 */
						if (g.PopLoaded || g.IsFastPopCapped()) {
							g.PopRunning = false;
							return;
						}

						if (!g.IsClientSideFiltersPassed(g.PopSettings.ClientSideFilters, g.LogZoneFilter(g.FastPopZone))) {
							g.PopRunning = false;
							return;
						}

						try {
							window.console = window.console || {
								log: function (d) {
								}
							};
							g367CB268B1094004A3689751E7AC568F.ConsoleLog(event);
						} catch (e) {
						}

						var link = event.target || event.srcElement;
						g.EventObject = event;

						if (g.IsDontTriggerForSelectorMatch(g.PopSettings.PopUnderDontTriggerSelector, link)) {
							g.PopRunning = false;
							return;
						}

						if (g.PopSettings.PopUnderTriggerOnSelector && !g.IsTriggerOnSelectorMatch(g.PopSettings.PopUnderTriggerOnSelector, link, g.PopSettings.PopUnderTriggerOnSelectorDepth)) {
							g.PopRunning = false;
							return;
						}

						if (link.nodeName.toLowerCase() !== "a") {
							link = g.GetParentLink(link);
						}

						if (g.PopSettings.RespectTargetBlank
							&& link.getAttribute
							&& (link.getAttribute("target") === "_blank" || link.getAttribute("rel") === "nofollow")) {
							g.PopRunning = false;
							return;
						}

						if (g.IsIgnoreElement(link)) {
							g.PopRunning = false;
							return;
						}

						/*
					 * MOBILE Code starts here
					 */
						if (g.IsMobile.any(g._Top)) {
							// rewrite the href attribute for each <a> that doesn't
							// have target set to _blank or rel set to nofollow

							if (os.name == "iOS" && parseFloat(os.version) < parseFloat("6")) {
								return;
							}
							//if (device.vendor == "Samsung" && os.name == "Android") { // Turning off samsung due to galaxy tab....
							//	return;
							//}
							if (g.IsMobile.Windows(g._Top)) {
								return;
							}

							// disable same tab ad for facebook app users
							var uaParser = g367CB268B1094004A3689751E7AC568F.UaParser;
							var userAgent = uaParser.getUA();
							if (userAgent.indexOf("FBAN/FBIOS") > -1 ||
								userAgent.indexOf("FB_IAB/FB4A") > -1 ||
								userAgent.indexOf("FBAV") > -1) {
								return;
							}

							// Mobile pops are always same tab ad, so setting that as SelectedPopType
							sUrl = g.BasePopunder.buildUrl(sUrl, g.Enums.SelectedPopType.TabUnder);

							/**
							*  The mobile pageunder stops javascript from executing on the current page since it replaces the current page
							*  with the advertisement so we dont' want to open on # or javascript links.
							*/
							// InfCustomFPSTAMobileFunc is a callback function incase we want to override same tab ad methods
							// since some sites require custom implementation of that ad unit
							if (typeof window.InfCustomFPSTAMobileFunc === "function" && !g.PopSettings.IsTracking) {
								window.InfCustomFPSTAMobileFunc(event, os, browser, link, sUrl);
								return;
							} else {
								var w, targetUrl;

								if (link.nodeName.toLowerCase() === "a" &&
									link.getAttribute("href") != "#" &&
									link.getAttribute("href").indexOf("javascript:") == -1 &&
									!(g.PopSettings.RespectTargetBlank &&
										(link.getAttribute("target") === "_blank" || link.getAttribute("rel") === "nofollow"))) {
									targetUrl = link.getAttribute("href");
								} else {
									g367CB268B1094004A3689751E7AC568F.PopLoaded = false;
									g367CB268B1094004A3689751E7AC568F.PopRunning = false;
									return true;
								}

								g367CB268B1094004A3689751E7AC568F.OnFastPopLoaded();
								g.IncrementFastPopCap();
								g367CB268B1094004A3689751E7AC568F.PopRunning = false;

								if (g.PopSettings.IsTracking) { // Tracking zone enabled
									doTrackingFastPop();
								} else {

									var tabWinName = 'inftabwindow_' + Math.floor((Math.random() * 100000000) + 1).toString();

									if (g.IsMobile.iOS(g._Top) && g.IsMobile.Opera(g._Top)) {
										window.open(sUrl, tabWinName);
										g._Top.document.location = targetUrl;
									} else {
										if (os.name === "iOS" &&
											(browser.name === "Chrome" ||
												(browser.name === "Mobile Safari" && parseFloat(browser.version) < parseFloat("8")))) {
											window.open(targetUrl, tabWinName);
										} else {
											if (g367CB268B1094004A3689751E7AC568F.PopSettings.MobileHistory) {
												try {
													// var nw = window.open("about:blank");
													var nw = window.open(targetUrl, tabWinName);
													try {
														nw.history.replaceState({ previous: g367CB268B1094004A3689751E7AC568F._Top.location.href },
															null,
															g367CB268B1094004A3689751E7AC568F._Top.location.href);
													} catch (err) {
														g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
													}
													nw.addEventListener("popstate",
														function (e) {
															nw.location = e.state.previous;
														});
													// nw.location = link.getAttribute("href");
													// window.open(targetUrl, tabWinName);
												} catch (err) {
													g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
													window.open(targetUrl, tabWinName);
												}
											} else {
												window.open(targetUrl, tabWinName);
											}
										}

										if (os.name == "Android") { // doing this because android opens the clicked link in same tab too
											link.setAttribute("href", sUrl);
										}
										g367CB268B1094004A3689751E7AC568F._Top.document.location = sUrl;
									}
								}

								if (event.preventDefault !== undefined) {
									event.preventDefault();
								}
								return false;
							}
						}

						/*
						* DESKTOP CODE STARTS HERE
						*/

						var doSameTabAd = function () {
							var client = new g367CB268B1094004A3689751E7AC568F.Client();
							var sameTab = typeof window.InfCustomFPSTAFunc === "function" ?
								new g367CB268B1094004A3689751E7AC568F.ExternalSameTab(function (evt) {
									window.InfCustomFPSTAFunc(evt, link, sUrl);
								}) :
								new g367CB268B1094004A3689751E7AC568F.SameTab({
									clickAnywhere: g367CB268B1094004A3689751E7AC568F.PopSettings.SameTabAdSettings.ClickAnywhere
								});

							if (!sameTab.isSupported(client)) {
								g367CB268B1094004A3689751E7AC568F.PopLoaded = true;
								g367CB268B1094004A3689751E7AC568F.PopRunning = true;
								return true;
							}

							if (!sameTab.canShow(event)) {
								g367CB268B1094004A3689751E7AC568F.PopLoaded = false;
								g367CB268B1094004A3689751E7AC568F.PopRunning = false;
								return true;
							}

							sameTab.setUrl(sUrl + '&hosted=true');
							sameTab.setOnSuccessCallback(function () {
								g367CB268B1094004A3689751E7AC568F.OnFastPopLoaded();
								g367CB268B1094004A3689751E7AC568F.PopRunning = false;
								g367CB268B1094004A3689751E7AC568F.IncrementFastPopCap();
							});
							sameTab.show(event);
						};

						var doChromeTabunder = function () {
							var tabOver = new g367CB268B1094004A3689751E7AC568F.TabOver();
							showPop(tabOver);
						};

						var doChromePopunder = function () {
							if (g.PopSettings.UseRemoteMediaHost === "true" && g.IsAdblockRequest) {
								var prePopUrl; // We use a prepop url as another way to try and get around adblocks $popup filter
								// ..which instantly closes popups if they open on specific urls that are listed in easylist
								if (g.PopSettings.UsePopCustomHost === "true") {
									prePopUrl = g.PopSettings.PopCustomHostUrl;
								} else {
									prePopUrl = document.location.href;
								}
								var randW = window.open(prePopUrl, sName, sOptions);
								setTimeout(function () {
									randW.location.href = sUrl;
								}, g.PopRedirectDelay);
							} else { // regular popup
								window.open(sUrl, sName, sOptions);
							}

							g367CB268B1094004A3689751E7AC568F.IncrementFastPopCap();
							g367CB268B1094004A3689751E7AC568F.OnFastPopLoaded();
							g367CB268B1094004A3689751E7AC568F.PopRunning = false;
						};

						var doRegularPopunder = function () {
							sUrl = g.BasePopunder.buildUrl(sUrl, g.Enums.SelectedPopType.PopUnder);
							if (browser.firefox || browser.name.toUpperCase() === "FIREFOX" && browser.major < 53) {
								var foxPop = window.open("about:blank");
								popunder = foxPop.open(sUrl, sName, sOptions);
								setTimeout(function () {
									foxPop.focus();
									foxPop.close();
								}, 100);
							} else {
								popunder = window.open(sUrl, sName, sOptions);
							}

							if (popunder) {
								isRegularPop();
							}
						};

						var doFirefox65Popunder = function() {
							sUrl = g.BasePopunder.buildUrl(sUrl, g.Enums.SelectedPopType.PopUnder);
							setTimeout(function() {
								window.open(sUrl, sName, sOptions);
							}, 0);
							setTimeout(function() {
								var secondPop = window.open("", "_self", "");
								if (secondPop) {
									secondPop.focus();
								}
							}, 0);
							setTimeout(onPopLoaded, 1);
						}

						function isRegularPop() {
							if (!(browser.firefox && browser.name.toUpperCase() === "FIREFOX" && browser.major < 53)) {
								pop2under();
							}

							onPopLoaded();
						}

						function onPopLoaded() {
							g367CB268B1094004A3689751E7AC568F.OnFastPopLoaded();
							g367CB268B1094004A3689751E7AC568F.PopRunning = false;
							// cookie
							g367CB268B1094004A3689751E7AC568F.IncrementFastPopCap();
						}

						var doPopOver = function () {
							var popOver = new g367CB268B1094004A3689751E7AC568F.PopOver();
							showPop(popOver);
						};

						function showPop(pop) {
							if (pop.getRespectsSize()) {
								pop.setUrl(sUrl);
								pop.setLocation(sPosX, sPosY);
								pop.setSize(sWidth, sHeight);
							} else {
								pop.setUrl(sUrl + "&hosted=true");
							}
							pop.setOnSuccessCallback(function () {
								g367CB268B1094004A3689751E7AC568F.OnFastPopLoaded();
								g367CB268B1094004A3689751E7AC568F.PopRunning = false;
								g367CB268B1094004A3689751E7AC568F.IncrementFastPopCap();
							});
							pop.show(event);
						}

						var doChromeMixed = function () {
							var client = new g.Client();
							var candidates = [
								new g.TabOver(),
								new g.PopOver(),
								new g.SameTab({ clickAnywhere: true }),
								new g.DelayedPopUnder({
									waitSecondsToLoadMedia: 0,
									waitForParentToClose: true,
									waitForParentToFocus: true
								})
							].filter(function (win) { return win.isSupported(client); });

							var randomWindows = new g.RandomEnumerator(candidates);
							var choice = randomWindows.popNext();
							while (!choice.canShow(event)) {
								choice = randomWindows.popNext();
								if (choice === undefined) {
									return;
								}
							}

							showPop(choice);
						};

						if (g.PopSettings.IsTracking) {
							doTrackingFastPop();
							g367CB268B1094004A3689751E7AC568F.OnFastPopLoaded();
							g367CB268B1094004A3689751E7AC568F.PopRunning = false;
							g367CB268B1094004A3689751E7AC568F.IncrementFastPopCap();
							return true;
						}

						var useSameTab = g.PopSettings.UseSameTab(browser, os, g.IsAdblockRequest);
						if (useSameTab) {
							doSameTabAd();
						} else if (browser.opera || browser.name === "Opera") {
							doSameTabAd();
						} else if (!g.PopSettings.IsPopunder) {
							doPopOver();
						} else if (browser.chrome || browser.name == "Chrome") {
							if (isChromeTabOver || navigator.userAgent.indexOf("Chrome/33.0.1750.146") > -1) { // tabunder
								doChromeTabunder();
							} else if (isChromeMixed) {
								doChromeMixed();
							} else {
								doChromePopunder();
							}
						} else if ((browser.firefox || browser.name == "Firefox") && browser.major >= 65) {
							doFirefox65Popunder();
						}
						else {
							doRegularPopunder();
						}
					};

					g.BindOnDocmentClick(listenerEvent);
				}

				function pop2under() {
					try {
						if (browser.name === "Safari" && browser.major >= 11) {
							if (!window.name) {
								window.name = new Date().getTime();
							}
							popunder.open('', window.name);

							window.focus();
							document.body.focus();
							return;
						}

						popunder.blur();
						popunder.opener.window.focus();
						window.self.window.focus();
						window.focus();

						if ((browser.firefox || browser.name === "Firefox") || browser.safari || browser.name === "Safari") {
							openCloseWindow();
						} else if (browser.msie || browser.name == "IE") {
							g367CB268B1094004A3689751E7AC568F._Top.document.focus();
						} else if (browser.chrome || browser.name == "Chrome" || browser.opera || browser.name == "Opera") {
							var fakeLink = document.createElement('A');
							fakeLink.id = 'inffake';
							document.body.appendChild(fakeLink);

							fakeLink.webkitRequestFullscreen();

							var e = document.createEvent("MouseEvents");
							e.initMouseEvent("click", target ? true : false, true, window, 0, 0, 0, 0, 0, false, false, true, false, 0, null);

							MgPop.currentBlock.fakeLink.dispatchEvent(e);

							document.webkitCancelFullScreen();
							setTimeout(function () { window.getSelection().empty(); }, 250);
						}
					} /* jshint -W002 */ catch (err) /* jshint +W002 */ {
						g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
					}
				}

				function openCloseWindow() {
					var ghost = window.open('about:blank');
					ghost.focus();
					ghost.close();
				}

				function openCloseTab() {
					var nothing = '';
					var ghost = g367CB268B1094004A3689751E7AC568F._Top.window.document.createElement("a");
					ghost.href = "data:text/html,<scr" + nothing + "ipt>window.close();</scr" + nothing + "ipt>";
					document.getElementsByTagName("body")[0].appendChild(ghost);

					var clk = g367CB268B1094004A3689751E7AC568F._Top.window.document.createEvent("MouseEvents");
					clk.initMouseEvent("click", false, true, window, 0, 0, 0, 0, 0, true, false, false, true, 0, null);
					ghost.dispatchEvent(clk);

					ghost.parentNode.removeChild(ghost);
				}

				// abort?
				if (g.PopLoaded
					|| !g.PopSettings.AllowMultiplePopsForTheSamePageView && g.IsFastPopCapped()
					|| !isGenericStringListFilterPassed(g367CB268B1094004A3689751E7AC568F.PopSettings.RequireToRunOnDomainFilter)
					|| !isGenericStringListFilterPassed(g367CB268B1094004A3689751E7AC568F.PopSettings.ReferrerFilter)
					|| !isGenericStringListFilterPassed(g367CB268B1094004A3689751E7AC568F.PopSettings.KeywordFilter)
					|| !isUserAgentFilterPassed()
					|| !isOffsetFilterPassed()
					|| !isBrowserFilterPassed()
					|| !isDeviceFilterPassed()
					|| !isOSFilterPassed()
					|| !isZoneAdblockFilterPassed()) {
					g.AbortFastPop = true;
					return;
				} else {
					//1024 by 768
					var pxLeft = (g367CB268B1094004A3689751E7AC568F.GetWindowLeft() + (g367CB268B1094004A3689751E7AC568F.GetWindowWidth() / 2) - (1024 / 2));
					var pxTop = (g367CB268B1094004A3689751E7AC568F.GetWindowTop() + (g367CB268B1094004A3689751E7AC568F.GetWindowHeight() / 2) - (768 / 2));
					doPopunder(sUrl, sName, 1024, 768, pxLeft, pxTop);
				}
			};

			var g = g367CB268B1094004A3689751E7AC568F;

			var infinityHost = g.InfinityHost;

			var redirectUrl;
			var time = encodeURIComponent(new Date().getTimezoneOffset());
			// don't want to do this unless its adblock (also when you do this remember to decode it in cookie request context ....)
			//var referrerUrl = "b32_" + g367CB268B1094004A3689751E7AC568F.b32encode(encodeURIComponent(window.document.referrer));
			var referrerUrl = encodeURIComponent(window.document.referrer);
			var currentUrl = encodeURIComponent(this._Top.window.location.href);
			var rand = encodeURIComponent(Math.floor(Math.random() * 100000 + 1));

			var handler = g.IsAdblockRequest ? "/fp.rb?" : "/fp.engine?";

			redirectUrl = infinityHost + handler
				+ "id=" + g.Guid
				+ "&rand=" + rand
				+ "&ver=" + this.Version
				+ "&time=" + time
				+ "&referrerUrl=" + referrerUrl
				+ "&subId=" + (this.SubID.length > 0 ? this.SubID : "")
				+ "&tid=" + (this.TId.length > 0 ? this.TId : "")
				+ "&abr=" + g367CB268B1094004A3689751E7AC568F.IsAdblockRequest
				+ "&res=" + g.GetScreenWidth() + "x" + g.GetScreenHeight()
				+ "&stdTime=" + this.GetStdTimezoneOffset()
				+ "&fpe=" + g.GetSupportedVideo()
				+ "&curl=" + currentUrl
				+ "&kw=" + encodeURIComponent(g367CB268B1094004A3689751E7AC568F.GetKeywords());
			//}

			jsPopunder(redirectUrl);
		},

		OnFastPopLoaded: function () {
			// TODO: Implement auto hide on first click overlay over flash to ensure that if DontTriggerOnSelectorMatch excludes overlay we don't block flash forever

			var g = g367CB268B1094004A3689751E7AC568F;

			if (!g.PopSettings.AllowMultiplePopsForTheSamePageView) {
				g.PopLoaded = true;
			}

			g.FlashClickInterceptor.deactivate();
			if (typeof InfCustomerPopLoadedCallback === "function") {
				InfCustomerPopLoadedCallback();
			}
		},

		FirstOrNull: function (array, predicate) {
			for (var i = 0; i < array.length; i++) {
				if (predicate(array[i])) {
					return array[i];
				}
			}
			return null;
		},

		Map: function (array, mapFunc) {
			var result = [];
			for (var i = 0; i < array.length; i++) {
				result.push(mapFunc(array[i]));
			}
			return result;
		},

		GetOwnEnumerableProperties: function (obj) {
			if (Object.keys) {
				return Object.keys(obj);
			} else {
				var keys = [], property;
				for (property in obj) {
					if (Object.prototype.hasOwnProperty.call(obj, property)) {
						keys.push(property);
					}
				}
				return keys;
			}
		},

		ClientSideFilterHandlers: {
			// This name must be in sync with server side filter type name
			JsVariableFilter: function (filterData, logDetails) {
				var log = logDetails ? function (result, message) { logDetails('JsVariableFilter', result, message); } : function () { };
				if (!filterData) {
					log(true, 'Filter passed because no data is available');
					return true;
				}

				function getVariableNameValueString(variableName) {
					try {
						// Those are deperecated in chrome filter them out to prevent warning messages in console
						if (variableName === 'webkitIndexedDB' || variableName === 'webkitStorageInfo') {
							return null;
						}

						var serializedValue =
							typeof window[variableName] === "undefined" ? "undefined" :
								window[variableName] === null ? "null" :
									// Function and object type values will be represented as empty string.
									// It is important that this check is placed after null check as typeof null === object
									typeof window[variableName] === "function" || typeof window[variableName] === "object" ? '' :
										window[variableName].toString ? "'" + window[variableName].toString().replace(/'/g, "\\'") + "'" :
											// We cannot serialize value to string. Don't think this ever happens but we need to be prepared
											'';
						return variableName + '=' + serializedValue;
					} catch (e) {
						// Some window properties might be deperecated for access leading to error, need to ignore those
						return null;
					}
				}

				var properties = g367CB268B1094004A3689751E7AC568F.GetOwnEnumerableProperties(window);
				var variableStrings = g367CB268B1094004A3689751E7AC568F.Map(properties, getVariableNameValueString);

				function regexMatchPredicate(item) {
					try { // Use try catch as regexp might fail for invalid pattern string
						var regex = new RegExp(item);
						return g367CB268B1094004A3689751E7AC568F.FirstOrNull(variableStrings, function (nameValueString) {
							return nameValueString != null && regex.test(nameValueString);
						}) != null;
					} catch (e) {
						g367CB268B1094004A3689751E7AC568F.ConsoleLog(e);
						return false;
					}
				}

				function exactMatchPredicate(item) {
					return g367CB268B1094004A3689751E7AC568F.FirstOrNull(variableStrings, function (nameValueString) {
						return item === nameValueString;
					}) != null;
				}

				var matchPredicate = filterData.IsRegex ? regexMatchPredicate : exactMatchPredicate;
				var matchingItem = g367CB268B1094004A3689751E7AC568F.FirstOrNull(filterData.Items, matchPredicate);

				var matches = matchingItem != null;
				var result = matches !== filterData.Exclusive;
				var message = matchingItem == null ?
					'No match found in ' + (filterData.Exclusive ? 'exclusive' : 'inclusive') + (filterData.IsRegex ? ' regex ' : ' non-regex ') + ' variable list: ' + filterData.Items.join(', ') :
					'Item ' + matchingItem + ' from ' + (filterData.Exclusive ? 'exclusive' : 'inclusive') + (filterData.IsRegex ? ' regex ' : ' non-regex ') + ' variable list matches one or more page variables';
				log(result, message);
				return result;
			}
		},

		IsClientSideFiltersPassed: function (filters, logFilter) {
			if (!filters || filters.length === 0) {
				return true;
			}

			for (var i = 0; i < filters.length; i++) {
				var filterHandler = this.ClientSideFilterHandlers[filters[i].Type];
				if (filterHandler && filterHandler(filters[i], logFilter) === false) {
					return false;
				}
			}
			return true;
		},

		FindPublisherSiteFilterLogIndex: function () {
			var index = -1;

			for (var i = 0; i < this.Media.DecisionProfile.Log.Messages.length; i++) {
				if (this.Media.DecisionProfile.Log.Messages[i].Message == "Checking Filters") {
					index = i;
					break;
				}
			}
			return index;
		},

		IsPublisherSiteFrequencyCapPassed: function (filter, siteVisitHistory, loggingEnabled) {
			var numVisits = 0;
			for (var i in siteVisitHistory) {
				var visitDate = new Date(siteVisitHistory[i].D);
				var secondsPassed = (this.ServerDate - visitDate) / 1000;
				if (secondsPassed < filter.CapLengthInSeconds) {
					numVisits++;
				}
			}

			var result = { passed: numVisits < filter.Cap };

			if (loggingEnabled) {
				result.message = "User impressions of " + numVisits + " are " + (result.passed ? "under" : "over") + " publisher site frequency cap: " + filter.Cap;
			}

			return result;
		},

		// Gets Standard time offset from UTC in minutes
		GetStdTimezoneOffset: function () {
			var currentYear = new Date().getFullYear();

			var maxOffset = null;
			for (var i = 0; i < 12; i++) {
				var date = new Date(currentYear, i, 1);
				var offset = date.getTimezoneOffset();
				if (maxOffset == null) {
					maxOffset = offset;
				} else {
					maxOffset = Math.max(maxOffset, offset);
				}
			}

			return maxOffset * -1;
		},

		BuildMediaClickThroughUrl: function (media) {
			var infinityHost = g367CB268B1094004A3689751E7AC568F.InfinityHost;
			var parameters = [
				'MediaId=' + media.MediaId,
				'PId=' + media.PlacementId,
				'SiteId=' + media.SiteId,
				'rand=' + Math.floor(89999999 * Math.random() + 10000000),
				'ZoneId=' + media.ZoneId,
				// It would be better to return null VolumeMetricId from server instead of empty guid
				// When have time make it so
				'VolumeMetricId=' + (media.VolumeMetricId && media.VolumeMetricId !== '00000000-0000-0000-0000-000000000000' ? media.VolumeMetricId : ""),
				'dcid=' + (media.DataContextId ? media.DataContextId : "null"),
				'res=' + g367CB268B1094004A3689751E7AC568F.GetScreenWidth() + "x" + g367CB268B1094004A3689751E7AC568F.GetScreenHeight(),
				'dst=' + media.TimeZoneOffset,
				'tzo=' + media.IsDSTActive,
				'abr=' + g367CB268B1094004A3689751E7AC568F.IsAdblockRequest
			];
			return infinityHost + "/clicktag.engine?" + parameters.join('&');
		},

		FetchTrackingUrl: function (media, params) {
			var thisRef = g367CB268B1094004A3689751E7AC568F;
			if (media.TrackingUrlTransform) {
				var transforms = new thisRef.UrlTransforms(thisRef, thisRef.Lotame);
				if (typeof transforms[media.TrackingUrlTransform] === "function") {
					return transforms[media.TrackingUrlTransform](media.TrackingUrl, media, false, params);
				}
			}

			return media.TrackingUrl;
		},

		// Method returns schemaless tracking URL for the
		// supplied media and zone params.
		FetchSchemalessTrackingUrl: function (media, params) {
			return this.Utils.url.removeSchema(
				// Original tracking URL. 
				this.FetchTrackingUrl(media, params));
		},

		// Creates url that when loaded redirects to ad identified by @adItem or zoneResult.AdItems[0] if @adItem is not specified
		// This is a temporary solution to help migrate from RichMediaRequest to SiteTagZoneResult
		// Pre: adItem is in zoneResult.AdItems array
		CreateAdUrl: function (zoneResult, hosted, adItem) {
			function extend(obj, properties) {
				for (var property in properties) {
					if (properties.hasOwnProperty(property)) {
						obj[property] = properties[property];
					}
				}
				return obj;
			}
			// In RichMediaRequest we had all media and zone specific data included as properties of object passed
			// to FetchMediaUrl with SiteTagZoneResult we separated zone data from media data to allow multiple medias
			// for the cases where only single media can be selected we can just merge zone and media data to get 
			// object that looks like RichMediaRequest
			return this.FetchMediaUrl(extend(extend({}, zoneResult), adItem ? adItem : zoneResult.AdItems[0]), hosted);
		},

		FetchMediaUrl: function (media, hosted) {
			var thisRef = g367CB268B1094004A3689751E7AC568F;
			if (media.RedirectUrlTransform) {
				var transforms = new thisRef.UrlTransforms(thisRef, thisRef.Lotame);
				if (typeof transforms[media.RedirectUrlTransform] === "function") {
					return transforms[media.RedirectUrlTransform](media.RedirectUrl, media, hosted, null);
				}
			}

			return media.RedirectUrl;
		},

		// Method fetches click URL from the supplied 
		// media instance.
		FetchClickUrl: function (media) {
			return media.ClickUrl;
		},

		// Method adds img pixel to 
		// the page body.
		AppendImgPixel: function (url) {
			var pixel = document.createElement('img');
			// Make pixel invisible, so it doesn't
			// affect page layout.
			pixel.setAttribute('width', '1');
			pixel.setAttribute('height', '1');
			pixel.setAttribute('position', 'absolute');
			pixel.setAttribute('style', 'display: none;');
			pixel.setAttribute('src', url);
			// Insert pixel.
			var body = document.body;
			if (body) {
				body.insertBefore(pixel, body.firstChild);
			}
		},

		IsDontTriggerForSelectorMatch: function (selector, element) {
			var searchDepth = 5;
			return this.IsTriggerSelectorMatch(selector, element, searchDepth);
		},

		IsTriggerOnSelectorMatch: function (selector, element, depth) {
			if (this.IsFeatureDisabled("IsTriggerOnSelectorMatch")) {
				return true; // If feature is disabled, always return true as if the select matched
			}

			var searchDepth = depth > 0 ? depth : 1;
			return this.IsTriggerSelectorMatch(selector, element, searchDepth);
		},

		IsTriggerSelectorMatch: function (selector, element, depth) {
			var PARENT_LEVEL = depth;
			if (selector) {
				var selectorElements = g367CB268B1094004A3689751E7AC568F._Top.document.querySelectorAll(selector);

				for (var i = 0; i < selectorElements.length; i++) {
					var selectedElement = element;
					for (var j = 0; j < PARENT_LEVEL; j++) {
						if (selectorElements[i] === selectedElement) {
							return true;
						} else if (selectedElement && selectedElement.nodeName.toLowerCase() !== "html") {
							selectedElement = selectedElement.parentNode;
						}
					}
				}
			}
			return false;
		},

		IsFeatureDisabled: function (feature) {
			var disabled = false;
			switch (feature) {
				case "IsTriggerOnSelectorMatch":
					disabled = typeof InfDisableTriggerOnSelector !== "undefined" && InfDisableTriggerOnSelector;
					break;
			}

			return disabled;
		},

		IsFeatureEnabled: function (feature) {
			var enabled = false;
			switch (feature) {
				case "IsSkipUserEventPropagation":
					enabled = typeof InfSkipUserEventPropagation !== "undefined" && InfSkipUserEventPropagation;
					break;
				case "IsSkipTriggerClick":
					enabled = typeof InfSkipTriggerClick !== "undefined" && InfSkipTriggerClick;
					break;
				case "IsLookForContainerAnchorLink":
					enabled = typeof InfLookForContainerAnchorLink !== "undefined" && InfLookForContainerAnchorLink;
					break;
			}

			return enabled;
		},

		BindOnDocumentTouch: function (handler) {
			// trigger on document.click
			var topWindow = g367CB268B1094004A3689751E7AC568F._Top;

			//// Get top document
			//if (top != self) {
			//	try {
			//		if (top.document.location.toString())
			//			topWindow = top;
			//	} catch (err) {
			//		g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
			//	}
			//}

			if (topWindow.document.addEventListener) {
				topWindow.document.addEventListener("touchstart", function (e) {
					try {
						handler(e);
					} catch (err) {
						g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
					}
				}, false);
			} else {
				try {
					topWindow.document.attachEvent("touchstart", handler);
				} catch (err) {
					g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
				}
			}

		},

		BindOnDocmentClick: function (handler) {
			// trigger on document.click
			var topWindow = g367CB268B1094004A3689751E7AC568F._Top;

			//// Get top document
			//if (top != self) {
			//	try {
			//		if (top.document.location.toString())
			//			topWindow = top;
			//	} catch (err) {
			//		g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
			//	}
			//}

			/*
			*  Disabling mousedown handler for chrome to fix pop trigger on
			*  floating banner close button click
			*  DEV-844: http://jira.adsupply.com/browse/DEV-844
			*/
			/*
			 * Moving clickhandler function into addEventListener/attachEvent calls
			 * to address an unknown bug causing click handler function not to trigger
			 * on user clicks.
			 * DEV-5296: http://jira.adsupply.com/browse/DEV-5296
			 */
			if (topWindow.document.addEventListener) {
				topWindow.document.addEventListener("click",
					function (e) {
						try {
							g367CB268B1094004A3689751E7AC568F.ClickHandler = handler(e);
						} catch (err) {
							g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
						}
					},
					false);
			} else {
				topWindow.document.attachEvent("onclick",
					function (e) {
						try {
							g367CB268B1094004A3689751E7AC568F.ClickHandler = handler(e);
						} catch (err) {
							g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
						}
					});
			}
		},
		_contentLoaded: false,
		_contentLoadedListenersInstalled: false,
		_contentLoadedListeners: [],
		// Calls @listener function when top window DOM was loaded
		BindOnDOMReady: function (listener) {
			if (typeof (listener) !== 'function') {
				throw 'Listener must be a funciton';
			}

			var topWindow = g367CB268B1094004A3689751E7AC568F._Top;
			var topDoc = topWindow.document;
			if (this._contentLoaded) {
				// We call using timeout to achieve consistent event like behavior
				topWindow.setTimeout(function () { listener.apply(topWindow) }, 1);
				return;
			}

			this._contentLoadedListeners.push(listener);

			var isDomContentLoaded = function () {
				// IE 7-10 only safe when readyState is "complete", others safe when readyState is "interactive"
				return topDoc.readyState === "complete" || (!topDoc.attachEvent && topDoc.readyState === "interactive");
			};

			var thisRef = this;
			var domReadyHandler = function () {
				if (thisRef._contentLoaded) {
					return;
				}

				thisRef._contentLoaded = true;

				for (var i = 0; i < thisRef._contentLoadedListeners.length; i++) {
					try {
						thisRef._contentLoadedListeners[i].apply(topWindow);
					} catch (ex) {
						thisRef.ConsoleLog('Error calling DOMReady listener: ' + ex);
					}
				}
			};

			if (isDomContentLoaded()) {
				topWindow.setTimeout(domReadyHandler, 1);
			} else if (!this.readyEventHandlersInstalled) {
				// IE8 does not support DOMContentLoaded event so we use onreadystatechange to determine when DOM is loaded
				if (topDoc.addEventListener) {
					topDoc.addEventListener("DOMContentLoaded", domReadyHandler, false);
					// Use load as backup
					topWindow.addEventListener("load", domReadyHandler, false);
				} else {
					topDoc.attachEvent("onreadystatechange", function () {
						if (isDomContentLoaded()) {
							domReadyHandler();
						}
					});
					topWindow.attachEvent("onload", domReadyHandler);
				}
				this._contentLoadedListenersInstalled = true;
			}

		},
		Enums: {
			// Mirror of OnClickVideoAudioMode server side enum
			VideoAudioMode: {
				audio: 0,
				audioOnMouseOver: 1,
				muted: 2
			},

			TrackingEventType: {
				adFill: 1,
				adView: 2,
				infinityVolume: 3,
				partnerVolume: 4
			},

			AdFillCheckStatus: {
				skipped: 1,
				failed: 2,
				success: 3
			},

			// Mirror of server side ChromePopApproach enum
			chromePopApproach: {
				notification: 0,
				notificationEx: 1,
				tabUnder: 2,
				tabOver: 3,
				doublePop: 4,
				hidden: 5,
				mixed: 6
			},
			SelectedPopType:
			{
				PopUnder: 0,
				PopOver: 1,
				TabUnder: 2,
				TabOver: 3
			},
			PopUnderDisplayTargetingType:
			{
				Standard: 1,
				Tab: 2
			}
		},
		Utils: {
			objectToQueryString: function (obj) {
				var queryString = [];
				for (var propertyName in obj) {
					if (obj.hasOwnProperty(propertyName)) {
						queryString.push(encodeURIComponent(propertyName) + "=" + encodeURIComponent(obj[propertyName]));
					}
				}

				return queryString.join("&");
			},
			// Gets object containing all available URL
			// utils functions.
			url: {
				// Method removes URL schema from the
				// supplied URL string. 
				removeSchema: function (url) {
					var schemas = ['http:', 'https:'];
					// Remove schema or return a supplied URL as is if
					// URL schema can't be found.
					for (var i = 0; i < schemas.length; i++) {
						if (url.indexOf(schemas[i]) === 0) {
							return url.substring(schemas[i].length);
						}
					}
					return url;
				},
			},
			// Method returns document object for 
			// the iframe element.
			getFrameDocument: function (iFrame) {
				return iFrame.get(0).documentWindow || iFrame.get(0).contentWindow
			}
		},
		// Supported browsers: Edge, IE 8+, Chrome 30+, Firefox
		FlashClickInterceptor: {
			// Set to true to show border around flash elements affected
			enableDebugBorder: false,
			// Predicate that when given flash element can tell if it should be ignored by interceptor
			ignoreElementPredicate: null,
			// Helper to subscribe for events
			eventUtil: {
				addListener: function (element, event, handler) {
					if (element.addEventListener) {
						element.addEventListener(event, handler);
					} else {
						element.attachEvent('on' + event, handler);
					}
				},
				removeListener: function (element, event, handler) {
					if (element.removeEventListener) {
						element.removeEventListener(event, handler);
					} else {
						element.detachEvent('on' + event, handler);
					}
				}
			},
			overlay: null,
			activeObject: null,
			activePollingInterval: null,
			handleObjects: true,
			handleEmbeds: true,
			handleVideo: true,
			handleInlineFrames: true,
			interceptedObjectContainer: null,

			// Tells whether supplied event was a result of click on flash click interceptor element over flash
			hasTriggeredEvent: function (e) {
				if (this.overlay == null) {
					return false;
				}

				// On IE 6-8 srcElement represents target
				var target = e.target || e.srcElement;

				return typeof (e.type) === 'string'
					&& e.type.toLowerCase() === 'click'
					&& target === this.overlay;
			},

			activate: function (browser, mobile, flashEnabled) {

				if (mobile === true) {
					return;
				}

				// We do not include Safari because click event for OBJECT and EMBED elements is fired by browser 
				// All browsers fire mousedown event on OBJECT
				// All browsers except Firefox, IE8,9,10 fire mousedown event on EMBED
				var chrome31Plus = (browser.chrome || browser.name === "Chrome") && parseInt(browser.major) >= 31;
				var ie8Plus = (browser.msie || browser.name === "IE") && parseInt(browser.major) >= 8;
				var isFirefox = browser.firefox || browser.name === "Firefox";
				var isOpera = browser.opera || browser.name === "Opera";
				if (!chrome31Plus &&
					!ie8Plus &&
					browser.name !== "Edge" &&
					!isFirefox &&
					(g367CB268B1094004A3689751E7AC568F.PopSettings.InterceptFlash && (browser.name === "Safari" || isOpera))) {
					return;
				}

				// No need in handling objects in Firefox because it propagates clicks on OBJECT by default
				this.handleObjects = !isFirefox;

				// Since flash objects can be insterted dynamically we cannot get just bind to list of objects/embeds at this point.
				// So instead we listen for mouseover on document and when mouse enters flash object we render overlay
				this.overlay = this._insertOverlay();
				this.eventUtil.addListener(this.overlay, 'mouseleave', this._onOverlayMouseLeave);

				// Since flash objects might change their location or size dynamically we do 2 things:
				//	1. When overlay is rendered we start polling every N miliseconds and check if flash size/position changes
				//	2. We close overlay as soon as we leave it. That way we do polling/flash size monitoring only when not necessary 
				// 		and if flash position changes we ensure that overlay will not cover links etc.
				this.eventUtil.addListener(document, 'mouseover', this._onDocumentMouseEnter);
			},

			deactivate: function () {
				if (this.overlay === null) {
					return;
				}

				this.eventUtil.removeListener(this.overlay, 'mouseleave', this._onOverlayMouseLeave);
				this.eventUtil.removeListener(document, 'mouseover', this._onDocumentMouseEnter);
				this._closeOverlay();
				this.overlay.parentNode.removeChild(this.overlay);
				this.overlay = null;
			},

			// Injects transparent overlay to the body and returns it
			_insertOverlay: function () {
				var overlay = document.createElement('div');

				try {
					// Note we don't use 'transparent' value for a reason. Setting transparent will make click event not fire in IE10 and IE9
					overlay.style.backgroundColor = 'rgba(0,0,0,0)';
				} catch (e) {
					// In IE 8 when using transparent click event won't fire for overlay. Also cannot use rgba fix because it is not supported
					// So use opacity with known background. For details see: https://developer.mozilla.org/en-US/docs/Web/Events/click#Browser_compatibility
					overlay.style.backgroundColor = 'white';
					overlay.style.filter = 'alpha(opacity=0)';
				}

				if (this.enableDebugBorder === true) {
					overlay.style.border = '3px solid red';
				}
				overlay.style.position = 'absolute';
				overlay.style.zIndex = 10000;
				overlay.style.display = 'none';

				var bodyCheck = setInterval(function () {
					if (g367CB268B1094004A3689751E7AC568F._Top.document.body) {
						clearInterval(bodyCheck);
						g367CB268B1094004A3689751E7AC568F._Top.document.body.appendChild(overlay);
					}
				}, 10);

				return overlay;
			},

			_onDocumentMouseEnter: function (e) {
				// On IE 6-8 srcElement represents target
				var target = e.target || e.srcElement;
				var thisRef = g367CB268B1094004A3689751E7AC568F.FlashClickInterceptor;

				var isObject = target.tagName === 'object' || target.tagName === 'OBJECT';

				// Note: we do not need to do any special handling of embeds that are child of object because object children rendered only when object cannot be rendered
				// and if element is not rendered it will not participate in mouseover events
				var isEmbed = target.tagName === 'embed' || target.tagName === 'EMBED';

				var isInlineFrame = target.tagName === 'iframe' || target.tagName === 'IFRAME';

				if (((thisRef.handleObjects || g367CB268B1094004A3689751E7AC568F.PopSettings.InterceptFlash) && isObject)
					|| ((thisRef.handleEmbeds || g367CB268B1094004A3689751E7AC568F.PopSettings.InterceptFlash) && isEmbed)
					|| ((thisRef.handleInlineFrames || g367CB268B1094004A3689751E7AC568F.PopSettings.InterceptInlineFrames) && isInlineFrame)) {

					if ((isObject || isEmbed)
						&& g367CB268B1094004A3689751E7AC568F.PopSettings.InterceptFlash
						&& !g367CB268B1094004A3689751E7AC568F.IsFlashPluginEnabled()) {
						return;
					}

					if (typeof (thisRef.ignoreElementPredicate) === 'function' && thisRef.ignoreElementPredicate(target) === true) {
						return;
					}

					thisRef._onObjectMouseEnter(e);
				}
			},

			_onOverlayMouseLeave: function (e) {
				var thisRef = g367CB268B1094004A3689751E7AC568F.FlashClickInterceptor;
				thisRef.interceptedObjectContainer = null;
				thisRef._closeOverlay();
			},

			_closeOverlay: function () {
				this.overlay.style.display = 'none';
				this.activeObject = null;
				if (this.activePollingInterval !== null) {
					clearInterval(this.activePollingInterval);
					this.activePollingInterval = null;
				}
			},

			_onObjectMouseEnter: function (e) {
				var thisRef = g367CB268B1094004A3689751E7AC568F.FlashClickInterceptor;

				// Ensure that overlay is closed even if mouse is moved quickly between 2 flash objects 
				// and mouse leave is not fired before mouse enter (happens in IE)
				thisRef._closeOverlay();

				// On IE 6-8 srcElement represents target
				var objectElement = e.target || e.srcElement;
				thisRef.activeObject = objectElement;

				thisRef.interceptedObjectContainer = objectElement.parentElement;

				var overlay = thisRef.overlay;
				overlay.style.display = 'block';
				thisRef._syncOverlaySizeAndPosition(overlay, objectElement);

				var rectOnEnter = thisRef.activeObject.getBoundingClientRect();
				thisRef.activePollingInterval = setInterval(function () {
					// In case active object is reset but interval handler was already added to a queue we do not want to fail with error
					if (thisRef.activeObject === null) {
						return;
					}

					var currentRect = thisRef.activeObject.getBoundingClientRect();
					if (rectOnEnter.left !== currentRect.left ||
						rectOnEnter.top !== currentRect.top ||
						rectOnEnter.bottom !== currentRect.bottom ||
						rectOnEnter.right !== currentRect.right) {
						// IE doesn't fire mouse enter on flash if closing overlay ad mouse is on top of flash until mouse is moved
						// so we cannot use _closeOverlay here. Instead just recalculate positioning
						thisRef._syncOverlaySizeAndPosition(thisRef.overlay, thisRef.activeObject);
					}
				}, 200);
			},

			_syncOverlaySizeAndPosition: function (overlay, element) {
				// When using debug border need to account to its width to make sure overlay doesn't exceed object element area
				var border = overlay.style.borderWidth === null || overlay.style.borderWidth === '' ? 0 : parseFloat(overlay.style.borderWidth.replace('px', '')) * 2;
				if (overlay.style.width !== element.offsetWidth + 'px') {
					overlay.style.width = (element.offsetWidth - border) + 'px';
				}

				if (overlay.style.height !== element.offsetHeight + 'px') {
					overlay.style.height = (element.offsetHeight - border) + 'px';
				}

				// Since overlay may move need to adjust position
				var elementRect = element.getBoundingClientRect();
				var overlayRect = overlay.getBoundingClientRect();

				var scrollOffsetX = (window.pageXOffset !== undefined)
					? window.pageXOffset
					: (document.documentElement || document.body.parentNode || document.body).scrollLeft;

				var scrollOffsetY = (window.pageYOffset !== undefined)
					? window.pageYOffset
					: (document.documentElement || document.body.parentNode || document.body).scrollTop;

				var newLeftAsNumber = overlayRect.left - (overlayRect.left - elementRect.left) + scrollOffsetX;
				var newTopAsNumber = overlayRect.top - (overlayRect.top - elementRect.top) + scrollOffsetY;
				overlay.style.left = newLeftAsNumber + 'px';
				overlay.style.top = newTopAsNumber + 'px';
			}
		},

		GetExpiration: function (numSeconds) {
			var utcMilliSeconds = (new Date()).valueOf() + numSeconds * 1000;
			var expires = new Date();
			expires.setTime(utcMilliSeconds);
			return expires;
		},

		IsExpired: function (experationDate) {
			var current = new Date();
			var isExpired = current.valueOf() >= Date.parse(experationDate);
			return isExpired;
		},

		IsCapped: function (counterName, expirationName, cap, useSession) {
			useSession = !!useSession; // defaults to false
			var capCount = useSession ? this.Storage.GetSessionStorage(counterName) : this.Storage.GetLocalStorage(counterName);
			var capExpiration = useSession ? this.Storage.GetSessionStorage(expirationName) : this.Storage.GetLocalStorage(expirationName);

			if (capCount === undefined || capCount === 0 || capExpiration === undefined || capExpiration === "Invalid Date" || this.IsExpired(capExpiration) || isNaN(capCount)) {
				return false;
			}
			return cap !== undefined && capCount >= cap;
		},

		IncrementCap: function (counterName, expirationName, capLength, useSession) {
			useSession = !!useSession; // defaults to false
			var capCount = useSession ? this.Storage.GetSessionStorage(counterName) : this.Storage.GetLocalStorage(counterName);
			var capExpiration = useSession ? this.Storage.GetSessionStorage(expirationName) : this.Storage.GetLocalStorage(expirationName);

			if (capCount === undefined || capCount === 0 || capExpiration === undefined || capExpiration === "Invalid Date" || this.IsExpired(capExpiration) || isNaN(capCount)) {
				capCount = 0;
				capExpiration = this.GetExpiration(capLength);
			}

			useSession ? this.Storage.SetSessionStorage(counterName, ++capCount) : this.Storage.SetLocalStorage(counterName, ++capCount);
			useSession ? this.Storage.SetSessionStorage(expirationName, capExpiration) : this.Storage.SetLocalStorage(expirationName, capExpiration);
		},

		IsFastPopCapped: function () {
			//if (this.PopSettings.SiteFrequencyCapFilters != null)
			//{
			//	var siteVisitHistory = this.Storage.GetSiteVisitHistory(this.SiteId);

			//	for (var i in this.PopSettings.SiteFrequencyCapFilters)
			//	{
			//		var filter = this.PopSettings.SiteFrequencyCapFilters[i];
			//		var filterResult = this.IsPublisherSiteFrequencyCapPassed(filter, siteVisitHistory, false);

			//		if (!filterResult.passed)
			//		{
			//			return true;
			//		}
			//	}
			//}

			return this.IsCapped("g36NumFastPops", "g36NumFastPopsExpire", this.PopSettings.Cap);
		},

		IncrementFastPopCap: function () {
			this.IncrementCap("g36NumFastPops", "g36NumFastPopsExpire", this.PopSettings.CapLength);
		},

		GetKeywords: function () {

			var sign = function (number) {
				return number > 0 ? 1 : number < 0 ? -1 : 0;
			};

			function createLimitedKeywordList(keywords) {
				var keywordList = [];
				var charLength = 0;
				for (var i = 0; i < keywords.length; i++) {
					var keyword = keywords[i].trim().toLowerCase();
					if (keywordList.indexOf(keyword) < 0) {
						if (charLength > 255) {
							break;
						}
						keywordList.push(keyword);
						charLength += sign(charLength) + keyword.length; /*Math.sign(charLength)*/
					}
				}
				return keywordList.join(",");
			}

			if (this.MetaKeywordOverride && this.MetaKeywordOverride.length > 0) {
				var categories = document.querySelectorAll(this.MetaKeywordOverride);
				var keywordList = [];
				for (var i = 0; i < categories.length; i++) {
					var itemContent = categories[i].innerText;
					var categoryList = itemContent.split(",");
					keywordList = keywordList.concat(categoryList);
				}
				if (keywordList.length > 0) {
					return createLimitedKeywordList(keywordList);
				}
			}

			var metaElements = this._Top.document.getElementsByTagName('meta');

			var keywordElement = this.FirstOrNull(metaElements, function (element) {
				var name = element.getAttribute("name");
				return name != null && name.toLowerCase() === "keywords" && typeof (element.content) === "string";
			});

			if (keywordElement && keywordElement.content) {
				return createLimitedKeywordList(keywordElement.content.split(","));
			}

			return '';
		},

		GetWindowHeight: function () {

			var myHeight = 0;

			if (typeof (this._Top.window.innerHeight) == 'number') {
				//Non-IE
				myHeight = this._Top.window.innerHeight;
			} else if (this._Top.document.documentElement && this._Top.document.documentElement.clientHeight) {
				//IE 6+ in 'standards compliant mode'
				myHeight = this._Top.document.documentElement.clientHeight;
			} else if (this._Top.document.body && this._Top.document.body.clientHeight) {
				//IE 4 compatible
				myHeight = this._Top.document.body.clientHeight;
			}

			return myHeight;

		},
		GetWindowWidth: function () {

			var myWidth = 0;

			if (typeof (this._Top.window.innerWidth) == 'number') {
				//Non-IE
				myWidth = this._Top.window.innerWidth;
			} else if (this._Top.document.documentElement && this._Top.document.documentElement.clientWidth) {
				//IE 6+ in 'standards compliant mode'
				myWidth = this._Top.document.documentElement.clientWidth;
			} else if (this._Top.document.body && this._Top.document.body.clientWidth) {
				//IE 4 compatible
				myWidth = this._Top.document.body.clientWidth;
			}

			return myWidth;
		},
		GetScreenWidth: function () {
			return screen.width;
		},
		GetScreenHeight: function () {
			return screen.height;
		},
		GetWindowTop: function () {
			return (this._Top.window.screenTop !== undefined) ? this._Top.window.screenTop : this._Top.window.screenY;
		},
		GetWindowLeft: function () {
			return (this._Top.window.screenLeft !== undefined) ? this._Top.window.screenLeft : this._Top.window.screenX;
		},
		GetParentLink: function (srcElement) {
			var currentElement = srcElement;
			var found = false;
			if (currentElement.nodeName.toLowerCase() !== "a"
				&& currentElement.getAttribute("target") == null
				&& currentElement.getAttribute("rel") == null
				&& currentElement.nodeName.toLowerCase() != "html") {
				var parentCount = 0;
				while (currentElement.parentNode
					&& parentCount <= 4
					&& currentElement.nodeName.toLowerCase() != "html") {

					parentCount++;
					currentElement = currentElement.parentNode;

					if (currentElement.nodeName.toLowerCase() === "a" && currentElement.href !== "") {
						found = true;
						break;
					}
				}
			}

			return found ? currentElement : srcElement;
		},
		IsIgnoreElement: function (srcElement) {
			if (!srcElement) {
				return false;
			}

			var currentElement = srcElement;

			do {
				if (currentElement.getAttribute && currentElement.getAttribute("data-inf-ignore") === "true") {
					return true;
				}

				currentElement = currentElement.parentNode;
			} while (currentElement && currentElement.getAttribute);

			return false;
		},
		LoadWebFonts: function (documentObj, fontArray) {
			if (typeof documentObj === "undefined") {
				documentObj = document;
			}
			if (fontArray instanceof Array && fontArray.length > 0) {
				WebFontConfig = { google: { families: fontArray } };
				var wf = documentObj.createElement('script');
				wf.src = ('https:' == documentObj.location.protocol ? 'https' : 'http') + '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
				wf.type = 'text/javascript';
				wf.async = 'true';
				var s = documentObj.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(wf, s);
			}
		},
		Querystring: {
			Init: function () {

				var e;
				var a = /\+/g; // Regex for replacing addition symbol with a space
				var r = /([^&=]+)=?([^&]*)/g;
				var d = function (s) { return decodeURIComponent(s.replace(a, " ")); };
				var q = window.location.search.substring(1);
				/* jshint -W084 */
				while (e = r.exec(q))
					this.Params[d(e[1])] = d(e[2]);
				/* jshint +W084 */
			},

			Params: []
		},

		Script: {
			Items: [],

			Add: function (url, cache) {

				if (!this.Exists(url)) {
					this.Items.push({ "url": url, "cache": cache, "complete": false });
					return true;
				}
				return false;
			},

			Exists: function (url) {

				for (var i = 0; i < this.Items.length; i++) {
					if (this.Items[i].url == url)
						return true;
				}
				return false;
			},

			Complete: function (items) {

				for (var i = 0; i < items.length; i++) {
					if (!items[i].complete)
						return false;
				}
				return true;
			},

			Create: function (url, cache) {

				var script = document.createElement("script");
				script.setAttribute("type", "text/javascript");

				if (cache) {
					script.src = url;
				} else {
					var rand = Math.floor(89999999 * Math.random() + 10000000);
					script.src = (url.indexOf("?") > -1) ? url + "&" + rand : url + "?" + rand;
				}

				return script;
			},

			AppendToDom: function (items, index, callback) {

				var _this = this;
				var head = document.getElementsByTagName("head")[0];

				if (g367CB268B1094004A3689751E7AC568F.UseAjax !== undefined && g367CB268B1094004A3689751E7AC568F.UseAjax) {

					g367CB268B1094004A3689751E7AC568F.AjaxLoad(items[index].url, function (xhr) {
						var s = document.createElement("script");
						s.type = "text/javascript";
						s.innerHTML = xhr.responseText;

						var e = document.getElementsByTagName("script")[0];
						e.parentNode.insertBefore(s, e);

						items[index].complete = true;
						if (_this.Complete(items) && typeof callback == "function") {
							callback();
						}
					});

				} else {
					var thisUrl = items[index].url;
					if (g367CB268B1094004A3689751E7AC568F.EncodeUrl !== undefined && g367CB268B1094004A3689751E7AC568F.EncodeUrl) {
						thisUrl = "//" + window.getUri(thisUrl);
					}
					var script = this.Create(thisUrl, items[index].cache);

					script.onload = script.onreadystatechange = function (e) {
						if (!items[index].complete && (!this.readyState || this.readyState == "loaded" || this.readyState == "complete")) {

							items[index].complete = true;
							script.onload = script.onreadystatechange = null;

							if (_this.Complete(items) && typeof callback == "function") {
								callback();
							}
						}
					};

					head.appendChild(script);
				}
			},

			Load: function (arg1, arg2, arg3) {

				if (arguments.length === 0 || arguments.length === 1) {
					var items = this.Items;
					this.Items = [];

					for (var i = 0; i < items.length; i++) {
						this.AppendToDom(items, i, arg1);
					}
				} else {
					this.AppendToDom([{ "url": arg1, "cache": arg2, "complete": false }], 0, arg3);
				}
			}
		},

		Lotame: {
			PlacePixel: function () {
				if (g367CB268B1094004A3689751E7AC568F.Browser.isSafari() == false &&
					g367CB268B1094004A3689751E7AC568F.PlaceLotamePixelAfterTag &&
					g367CB268B1094004A3689751E7AC568F.LotamePixel.PlacePixel) {
					var lotame = document.createElement('script');
					lotame.setAttribute('src', '//tags.crwdcntrl.net/c/' + g367CB268B1094004A3689751E7AC568F.LotamePixel.LotameTrackingId + '/cc_af.js');
					lotame.async = true;
					// Append lotame script
					var lotameEntry = document.getElementsByTagName('script')[0];
					if (lotameEntry) {
						lotameEntry.parentNode.insertBefore(lotame, lotameEntry);
					}
				}
			},
			PlaceMappingPixel: function () {
				if (g367CB268B1094004A3689751E7AC568F.Browser.isSafari() == false &&
					g367CB268B1094004A3689751E7AC568F.MappingPixel.UserId &&
					g367CB268B1094004A3689751E7AC568F.MappingPixel.PlaceMappingPixel) {
					var lotameBcpImageTag = document.createElement('img');
					lotameBcpImageTag.setAttribute('width', '1');
					lotameBcpImageTag.setAttribute('height', '1');
					lotameBcpImageTag.setAttribute('style', 'display: none;');
					lotameBcpImageTag.setAttribute('src',
						'//bcp.crwdcntrl.net/map/c=' + g367CB268B1094004A3689751E7AC568F.LotameClientId +
						'/tp=ADSP/tpid=' + g367CB268B1094004A3689751E7AC568F.MappingPixel.UserId.replace(/-/g, ''));
					// Inster lotame mapping pixel
					var bodyTag = document.body;
					if (bodyTag) {
						bodyTag.insertBefore(lotameBcpImageTag, bodyTag.firstChild);
					}
				}
			},
			CallExtractionAPI: function () {
				if (g367CB268B1094004A3689751E7AC568F.Browser.isSafari() == false &&
					g367CB268B1094004A3689751E7AC568F.MappingPixel.CallExtractionAPI) {
					g367CB268B1094004A3689751E7AC568F.Script.Add('//ad.crwdcntrl.net/5/c=' + g367CB268B1094004A3689751E7AC568F.LotameClientId
						+ '/pe=y/callback=g367CB268B1094004A3689751E7AC568F.Lotame.CallExtractionAPICallback', false);
					g367CB268B1094004A3689751E7AC568F.Script.Load();
				}
			},
			CallExtractionAPICallback: function (audiencesObj) {
				if (g367CB268B1094004A3689751E7AC568F.Browser.isSafari() == false &&
					g367CB268B1094004A3689751E7AC568F.MappingPixel.CallExtractionAPI) {

					if (audiencesObj && audiencesObj.Profile && audiencesObj.Profile.Audiences) {
						var audienceIds = [];
						var parseAudienceIds = function (audiencesList) {
							for (var i = 0; i < audiencesList.length; i++) {
								if (audiencesList[i] && audiencesList[i].id) {
									audienceIds.push(audiencesList[i].id);
								}
							}
						};

						if (audiencesObj.Profile.Audiences.Audience) {
							parseAudienceIds(audiencesObj.Profile.Audiences.Audience);
						}

						if (audiencesObj.Profile.Audiences.ThirdPartyAudience) {
							parseAudienceIds(audiencesObj.Profile.Audiences.ThirdPartyAudience);
						}

						if (audienceIds.length > 0) {
							g367CB268B1094004A3689751E7AC568F.Script.Add(g367CB268B1094004A3689751E7AC568F.MappingPixel.ExtractionAPICallbackUrl + audienceIds.join(','), false);
							g367CB268B1094004A3689751E7AC568F.Script.Load();
						}
					}
				}
			},
			PlaceImpressionPixel: function (media) {
				if (g367CB268B1094004A3689751E7AC568F.Browser.isSafari() == false &&
					g367CB268B1094004A3689751E7AC568F.PlaceLotameImpressionPixel &&
					g367CB268B1094004A3689751E7AC568F.ImpressionPixel.PlaceImpressionTrackingPixel) {
					var lotameImpressionTrackingPixel = document.createElement('img');
					// Set pixel attributes
					lotameImpressionTrackingPixel.setAttribute('width', '1');
					lotameImpressionTrackingPixel.setAttribute('height', '1');
					lotameImpressionTrackingPixel.setAttribute('style', 'display: none;');
					lotameImpressionTrackingPixel.setAttribute('src',
						'//bcp.crwdcntrl.net/5/c=' + g367CB268B1094004A3689751E7AC568F.LotameClientId + '/ctax=Campaigns^Expose^Viewers^Placement ' + media.PlacementId + ' - Viewer');
					// Insert lotame impression tracking pixel
					var bodyTag = document.body;
					if (bodyTag) {
						bodyTag.insertBefore(lotameImpressionTrackingPixel, bodyTag.firstChild);
					}
				}
			}
		},

		PubMatic: {
			PlaceMappingPixel: function () {
				if (g367CB268B1094004A3689751E7AC568F.PubMaticMappingPixel.SyncUrl &&
					g367CB268B1094004A3689751E7AC568F.PubMaticMappingPixel.PlaceMappingPixel) {
					var srcUrl = '//ads.pubmatic.com/AdServer/js/user_sync.html?p=' + g367CB268B1094004A3689751E7AC568F.PubMaticMappingPixel.PublisherId + '&predirect=' + encodeURIComponent(g367CB268B1094004A3689751E7AC568F.PubMaticMappingPixel.SyncUrl);
					var pubMaticMappingPixelTag = document.createElement('iframe');
					pubMaticMappingPixelTag.setAttribute('src', srcUrl);

					pubMaticMappingPixelTag.setAttribute('frameborder', 0);
					pubMaticMappingPixelTag.setAttribute('allowtransparency', true);
					pubMaticMappingPixelTag.setAttribute('marginheight', 0);
					pubMaticMappingPixelTag.setAttribute('marginwidth', 0);
					pubMaticMappingPixelTag.setAttribute('scrolling', 'no');
					pubMaticMappingPixelTag.setAttribute('width', 0);
					pubMaticMappingPixelTag.setAttribute('hspace', 0);
					pubMaticMappingPixelTag.setAttribute('vspace', 0);
					pubMaticMappingPixelTag.setAttribute('height', 0);
					pubMaticMappingPixelTag.setAttribute('style', 'height:0px;width:0px;display:none;');
					// Append lotame script
					var bodyTag = document.body;
					if (bodyTag) {
						bodyTag.insertBefore(pubMaticMappingPixelTag, bodyTag.firstChild);
					}
				}
			}
		},

		Bidswitch: {
			PlaceMappingPixel: function () {
				if (g367CB268B1094004A3689751E7AC568F.BidswitchMappingPixel.MappingPixelUrl &&
					g367CB268B1094004A3689751E7AC568F.BidswitchMappingPixel.PlaceMappingPixel) {

					var bidswitchMappingPixelTag = document.createElement('img');
					// Set pixel attributes
					bidswitchMappingPixelTag.setAttribute('width', '1');
					bidswitchMappingPixelTag.setAttribute('height', '1');
					bidswitchMappingPixelTag.setAttribute('border', '0');
					bidswitchMappingPixelTag.setAttribute('style', 'display: none;');
					bidswitchMappingPixelTag.setAttribute('src', g367CB268B1094004A3689751E7AC568F.BidswitchMappingPixel.MappingPixelUrl);
					// Insert lotame impression tracking pixel
					var bodyTag = document.body;
					if (bodyTag) {
						bodyTag.insertBefore(bidswitchMappingPixelTag, bodyTag.firstChild);
					}
				}
			}
		},

		Pizookie: {
			PlacePixel: function () {
				if (g367CB268B1094004A3689751E7AC568F.PizookiePixel !== undefined &&
					g367CB268B1094004A3689751E7AC568F.PizookiePixel.PlacePixel) {

					var pixelTag = document.createElement('img');
					pixelTag.setAttribute('width', '1');
					pixelTag.setAttribute('height', '1');
					pixelTag.setAttribute('style', 'display: none;');
					pixelTag.setAttribute('src', g367CB268B1094004A3689751E7AC568F.PizookiePixel.PixelUrl);

					var bodyTag = document.body;
					if (bodyTag) {
						bodyTag.insertBefore(pixelTag, bodyTag.firstChild);
					}
				}
			}
		},

		GetSettingAsInt: function (settings, key, fallback, min, max) {
			if (fallback === null || fallback === undefined || isNaN(parseInt(fallback))) {
				fallback = 0;
			}
			if (min === null || min === undefined || isNaN(parseInt(min))) {
				min = false;
			}
			if (max === null || max === undefined || isNaN(parseInt(max))) {
				max = false;
			}
			var value = parseInt(fallback);
			if (settings.hasOwnProperty(key)) {
				value = parseInt(settings[key], 10);
				if (isNaN(value)) {
					value = parseInt(fallback);
				}
			}
			if (min !== false && value < min) {
				value = min;
			} else if (max !== false && value > max) {
				value = max;
			}
			return value;
		},
		GetSettingAsBool: function (Settings, key, fallback) {
			var value = false;
			if (fallback === true || fallback === "true" || fallback === 1 || fallback === "1") {
				value = true;
			}
			if (Settings.hasOwnProperty(key)) {
				value = Settings[key];
				if (value === true || value === "true" || value === 1 || value === "1") {
					value = true;
				} else {
					value = false;
				}
			}
			return value;
		},
		GetSettingAsStr: function (Settings, key, fallback, decodeBool) {
			if (fallback === null || fallback === undefined) {
				fallback = "";
			}
			if (decodeBool !== true) {
				decodeBool = false;
			}
			var value = fallback;
			if (Settings.hasOwnProperty(key)) {
				value = Settings[key];
				if (value === null || value === undefined) {
					value = fallback;
				}
			}
			if (decodeBool) {
				value = decodeURIComponent(value);
			}
			return value;
		},
		Storage: {
			GetLocalStorage: function (name) {
				var value;
				if (this.SupportsLocalStorage()) {
					value = localStorage[name];
				} else {
					value = this.GetCookie(name);
				}

				// Remove the ISSH prefix before returning the value.
				if (value) {
					var prefix = value.split("__")[0];
					if (prefix == this.GetCookie("ISSH") || prefix == "undefined") {
						value = value.split("__")[1];
					}
				}

				return value;
			},
			SetLocalStorage: function (name, value) {
				// We're not entirely sure why we're prefixing the value with
				// the ISSH cookie value.
				var prefixedValue = this.GetCookie("ISSH") + "__" + value;
				if (this.SupportsLocalStorage()) {
					try {
						localStorage[name] = prefixedValue;
					} catch (err) {
						this.FailedLocalStorage = true;
						// g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
						return;
					}
				} else {
					this.SetCookie(name, prefixedValue);
				}
			},
			DeleteLocalStorage: function (name) {
				if (this.SupportsLocalStorage()) {
					try {
						localStorage.removeItem(name);
					} catch (err) {
						this.FailedLocalStorage = true;
						return;
					}
				} else {
					this.DeleteCookie(name);
				}
			},
			SupportsLocalStorage: function () {
				try {
					sessionStorage.setItem('storageSupport', 1);
					sessionStorage.removeItem('storageSupport');
					return 'localStorage' in window && window['localStorage'] !== null;
				} catch (err) {
					if (typeof (DOMException) !== "undefined" && err.code === DOMException.QUOTA_EXCEEDED_ERR && sessionStorage.length === 0) {
						window.console = window.console || { log: function (d) { } };
						g367CB268B1094004A3689751E7AC568F.ConsoleLog("Safari private mode detected");
					}
					// g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
					return false;
				}
			},
			GetSessionStorage: function (name) {
				var value;
				if (this.SupportsSessionStorage()) {
					value = sessionStorage[name];
				} else {
					value = this.GetCookie(name);
				}

				// Remove the ISSH prefix before returning the value.
				if (value) {
					var prefix = value.split("__")[0];
					if (prefix == this.GetCookie("ISSH") || prefix == "undefined") {
						value = value.split("__")[1];
					}
				}

				return value;
			},
			SetSessionStorage: function (name, value) {
				// We're not entirely sure why we're prefixing the value with
				// the ISSH cookie value.
				var prefixedValue = this.GetCookie("ISSH") + "__" + value;
				if (this.SupportsSessionStorage()) {
					try {
						sessionStorage[name] = prefixedValue;
					} catch (err) {
						this.FailedSessionStorage = true;
						// g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
					}
				} else {
					this.SetCookie(name, prefixedValue);
				}
			},
			DeleteSessionStorage: function (name) {
				if (this.SupportsSessionStorage()) {
					try {
						sessionStorage.removeItem(name);
					} catch (err) {
						this.FailedSessionStorage = true;
						return;
					}
				} else {
					this.DeleteCookie(name);
				}
			},
			GetSiteVisitHistory: function (siteId) {
				try {
					var rawCookie = this.GetCookie("ISPH").substring(1);

					rawCookie = rawCookie.replace(/~1/g, "[{\"")
						.replace(/~E/g, "SId\":")
						.replace(/~4/g, "\"D\"")
						.replace(/~3/g, "\"SId\"")
						.replace(/~C/g, "\"2014-")
						.replace(/~D/g, "\"2015-")
						.replace(/~L/g, "\"2016-")
						.replace(/~M/g, "\"2017-")
						.replace(/~N/g, "\"2018-")
						.replace(/~O/g, "\"2019-")
						.replace(/~2/g, "\"}]");

					eval("var siteVisitHistory = " + rawCookie);
					return siteVisitHistory[siteId];
				} catch (err) {
					g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
					return null;
				}
			},

			SupportsSessionStorage: function () {
				try {
					sessionStorage.setItem('storageSupport', 1);
					sessionStorage.removeItem('storageSupport');
					return 'sessionStorage' in window && window['sessionStorage'] !== null;
				} catch (err) {
					if (typeof (DOMException) !== "undefined" && err.code === DOMException.QUOTA_EXCEEDED_ERR && sessionStorage.length === 0) {
						window.console = window.console || { log: function (d) { } };
						g367CB268B1094004A3689751E7AC568F.ConsoleLog("Safari private mode detected");
					}
					// g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
					return false;
				}
			},
			SetCookie: function (c_name, value, seconds) {
				var exdate = new Date();
				exdate.setSeconds(exdate.getSeconds() + seconds);
				var c_value = escape(value) + ((seconds == null) ? "" : "; expires=" + exdate.toUTCString());
				document.cookie = c_name + "=" + c_value;
			},
			GetCookie: function (c_name) {
				var i, x, y, ARRcookies = document.cookie.split(";");
				for (i = 0; i < ARRcookies.length; i++) {
					x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
					y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
					x = x.replace(/^\s+|\s+$/g, "");
					if (x == c_name) {
						return unescape(y);
					}
				}
			},
			DeleteCookie: function (c_name) {
				if (this.GetCookie(c_name)) {
					document.cookie = c_name + "=" + ";expires=Thu, 01 Jan 1970 00:00:01 GMT";
				}
			},
			FailedLocalStorage: false,
			FailedSessionStorage: false
		},

		TabHistoryManipulator: function (storageName, useSession) {
			useSession = !!useSession; // defaults to false
			var backUrl = useSession ? this.Storage.GetSessionStorage(storageName) : this.Storage.GetLocalStorage(storageName);
			if (!backUrl) {
				return;
			}
			try {
				this._Top.history.replaceState(null, this._Top.document.title, this._Top.location.href);
				this._Top.history.pushState(null, this._Top.document.title, this._Top.location.href);

				this._Top.addEventListener("popstate", function () {
					g367CB268B1094004A3689751E7AC568F._Top.history.replaceState(null, g367CB268B1094004A3689751E7AC568F._Top.document.title, g367CB268B1094004A3689751E7AC568F._Top.location.href);
					setTimeout(function () {
						g367CB268B1094004A3689751E7AC568F._Top.location.replace(backUrl);
					}, 0);

				}, false);
			} catch (err) {
			} finally {
				useSession ? this.Storage.DeleteSessionStorage(storageName) : this.Storage.DeleteLocalStorage(storageName);
			}
		},

		TabHistoryRecorder: function (currentUrl, storageName, useSession) {
			useSession = !!useSession; // defaults to false
			useSession ? this.Storage.SetSessionStorage(storageName, currentUrl) : this.Storage.SetLocalStorage(storageName, currentUrl);
		},

		StopEvent: function (e) {
			if (e.preventDefault) {
				e.preventDefault();
			}
			if (e.stopImmediatePropagation) {
				e.stopImmediatePropagation();
			}
			if (e.stopPropagation) {
				e.stopPropagation();
			}
		},

		IsASInstance: function () {
			result = false;
			var emailCheck = (g367CB268B1094004A3689751E7AC568F.EmailInfoAddress && (g367CB268B1094004A3689751E7AC568F.EmailInfoAddress.indexOf("adsupply") !== -1));
			var hostCheck = (g367CB268B1094004A3689751E7AC568F.InfinityHost && (g367CB268B1094004A3689751E7AC568F.InfinityHost.indexOf("trklnks") === -1));
			if (emailCheck && hostCheck) {
				result = true;
			}
			return result;
		},

		/* http://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/ */
		IsMobile: {
			Android: function (targetWindow) {
				return g367CB268B1094004A3689751E7AC568F.UaParser.getOS().name === "Android";
			},
			BlackBerry: function (targetWindow) {
				return g367CB268B1094004A3689751E7AC568F.UaParser.getOS().name === "BlackBerry";
			},
			iOS: function (targetWindow) {
				return g367CB268B1094004A3689751E7AC568F.UaParser.getOS().name === "iOS";
			},
			Opera: function (targetWindow) {
				return (g367CB268B1094004A3689751E7AC568F.UaParser.getDevice().type === "tablet"
					|| g367CB268B1094004A3689751E7AC568F.UaParser.getDevice().type === "mobile")
					&& (g367CB268B1094004A3689751E7AC568F.UaParser.getBrowser().name === "Opera"
						|| g367CB268B1094004A3689751E7AC568F.UaParser.getResult().ua.indexOf("OPiOS") > -1);
			},
			Windows: function (targetWindow) {
				return g367CB268B1094004A3689751E7AC568F.UaParser.getOS().name === "Windows Phone"
					|| g367CB268B1094004A3689751E7AC568F.UaParser.getOS().name === "Windows Phone OS";
			},
			any: function (targetWindow) {
				return this.Android(targetWindow)
					|| this.BlackBerry(targetWindow)
					|| this.iOS(targetWindow)
					|| this.Opera(targetWindow)
					|| this.Windows(targetWindow);
			}
		},

		IsTablet: function () {
			var ua = g367CB268B1094004A3689751E7AC568F.UaParser;
			return ua.getDevice().type === 'tablet';
		},

		Browser: new function () {
			var _browser = this;
			// Gets browser instance parsed using UAParser
			this.current = new UAParser().getBrowser();
			// Browsers
			this.isSafari = function () { return _browser.current.name === 'Safari' || _browser.current.name === "Mobile Safari"; };
			this.isChrome = function () { return _browser.current.name === 'Chrome'; };
			this.isOpera = function () { return _browser.current.name === 'Opera'; };
			this.isFirefox = function () { return _browser.current.name === 'Firefox'; };
			this.isIE = function () { return _browser.current.name === 'IE'; };

			return _browser;
		},

		GetSupportedVideo: function () {
			var result = 0;

			if (this.IsHtml5VideoSupported()) {
				result |= 1;
			}

			if (this.IsFlashPluginEnabled()) {
				result |= 2;
			}

			return result;
		},

		IsHtml5VideoSupported: function () {
			return !!document.createElement('video').canPlayType;
		},

		IsFlashPluginEnabled: function () {
			if (navigator && navigator.mimeTypes
				&& typeof navigator.mimeTypes['application/x-shockwave-flash'] != 'undefined'
				&& navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin) {
				return true;
			}

			try {
				var flashObject = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');
				if (flashObject) {
					return true;
				}
			} catch (e) {
			}

			return false;
		},

		b32encode: function (s) {
			/* encodes a string s to base32 and returns the encoded string */
			var alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";

			var parts = [];
			var quanta = Math.floor((s.length / 5));
			var leftover = s.length % 5;

			if (leftover != 0) {
				for (var i = 0; i < (5 - leftover); i++) {
					s += '\x00';
				}
				quanta += 1;
			}

			for (i = 0; i < quanta; i++) {
				parts.push(alphabet.charAt(s.charCodeAt(i * 5) >> 3));
				parts.push(alphabet.charAt(((s.charCodeAt(i * 5) & 0x07) << 2)
					| (s.charCodeAt(i * 5 + 1) >> 6)));
				parts.push(alphabet.charAt(((s.charCodeAt(i * 5 + 1) & 0x3F) >> 1)));
				parts.push(alphabet.charAt(((s.charCodeAt(i * 5 + 1) & 0x01) << 4)
					| (s.charCodeAt(i * 5 + 2) >> 4)));
				parts.push(alphabet.charAt(((s.charCodeAt(i * 5 + 2) & 0x0F) << 1)
					| (s.charCodeAt(i * 5 + 3) >> 7)));
				parts.push(alphabet.charAt(((s.charCodeAt(i * 5 + 3) & 0x7F) >> 2)));
				parts.push(alphabet.charAt(((s.charCodeAt(i * 5 + 3) & 0x03) << 3)
					| (s.charCodeAt(i * 5 + 4) >> 5)));
				parts.push(alphabet.charAt(((s.charCodeAt(i * 5 + 4) & 0x1F))));
			}

			var replace = 0;
			if (leftover == 1) replace = 6;
			else if (leftover == 2) replace = 4;
			else if (leftover == 3) replace = 3;
			else if (leftover == 4) replace = 1;

			for (i = 0; i < replace; i++) parts.pop();

			return parts.join("");
		},
		AjaxLoad: function (url, callback) {
			// the callback contains the xhr object from which the response text
			// can be retrieved using the responseText property
			var xhr;
			if (typeof XMLHttpRequest !== "undefined") {
				xhr = new XMLHttpRequest();
			} else {
				var versions = [
					"MSXML2.XmlHttp.5.0",
					"MSXML2.XmlHttp.4.0",
					"MSXML2.XmlHttp.3.0",
					"MSXML2.XmlHttp.2.0",
					"Microsoft.XmlHttp"
				];
				for (var i = 0, len = versions.length; i < len; i++) {
					try {
						xhr = new ActiveXObject(versions[i]);
						break;
					} catch (e) {
					}
				}
			}
			var ensureReadiness = function () {
				if (xhr.readyState < 4) {
					return;
				}
				if (xhr.status !== 200) {
					return;
				}
				if (xhr.readyState === 4) {
					callback(xhr);
				}
			};
			xhr.onreadystatechange = ensureReadiness;
			xhr.open("GET", url, true);
			xhr.send();
		},
		AjaxPost: function (url, payload, optionalHeaders, callback) {
			// the callback contains the xhr object from which the response text
			// can be retrieved using the responseText property
			var xhr;
			if (typeof XMLHttpRequest !== "undefined") {
				xhr = new XMLHttpRequest();
			} else {
				var versions = [
					"MSXML2.XmlHttp.5.0",
					"MSXML2.XmlHttp.4.0",
					"MSXML2.XmlHttp.3.0",
					"MSXML2.XmlHttp.2.0",
					"Microsoft.XmlHttp"
				];
				for (var i = 0, len = versions.length; i < len; i++) {
					try {
						xhr = new ActiveXObject(versions[i]);
						break;
					} catch (e) {
					}
				}
			}
			var ensureReadiness = function () {
				if (xhr.readyState < 4) {
					return;
				}
				if (xhr.status !== 202) {
					return;
				}
				if (xhr.readyState === 4) {
					typeof callback === "function" && callback(xhr);
				}
			};
			xhr.onreadystatechange = ensureReadiness;
			xhr.open("POST", url, true);
			if (optionalHeaders && optionalHeaders.length > 0) {
				for (var i = 0; i < optionalHeaders.length; i++) {
					xhr.setRequestHeader(optionalHeaders[i].header, optionalHeaders[i].value);
				}
			}
			xhr.send(payload);
		},
		ConsoleGroup: function (groupName) {
			if (g367CB268B1094004A3689751E7AC568F.DebugEnabled && window.console && window.console.group) {
				console.group(groupName);
			}
		},
		ConsoleGroupEnd: function () {
			if (g367CB268B1094004A3689751E7AC568F.DebugEnabled && window.console && window.console.groupEnd) {
				console.groupEnd();
			}
		},
		ConsoleLog: function (message) {
			if (g367CB268B1094004A3689751E7AC568F.DebugEnabled && window.console && window.console.log) {
				console.log(message);
			}
		},

		// an object to contain code common for all popunders (ChromePopunder, EdgePopunder)
		BasePopunder:
		{
			mouseDownHandler: function (event, media) {
				var g = g367CB268B1094004A3689751E7AC568F;

				if (event.type == "mousedown" && event.button != 0) {
					// We have a requirement to pop only on left mouse button
					return false;
				}

				if (event.type == "mousedown") {
					var viewportWidth = document.documentElement.clientWidth;
					var viewportHeight = document.documentElement.clientHeight;
					// Detect mousedown on vertical or horizontal scrollbars and ignore event.
					// Because it is typical for user not to release mouse button when using scroll and
					// currently if mouse down is not released we show tab under instead of pop under
					// When clicked on scroll target is set to HTML element. Also clientX or clientY will
					// be outside of document viewport
					if (event.target &&
						(event.target === document.documentElement || event.target === document) &&
						(event.clientX > viewportWidth || event.clientY > viewportHeight)) {
						return false;
					}
				}

				if (!this.shouldHandleEvent(media, true)) {
					return false;
				}

				g.PopRunning = true;

				if (!g367CB268B1094004A3689751E7AC568F.IsFeatureEnabled("IsSkipUserEventPropagation")) {
					event.preventDefault();
					event.stopImmediatePropagation();
					event.stopPropagation();
				}
				return true;
			},

			shouldHandleEvent: function (media, checkPopRunning) {
				var g = g367CB268B1094004A3689751E7AC568F;

				var clientFilters = g.IsFastPop && !g.AbortFastPop ? g.PopSettings.ClientSideFilters : media.ClientSideFilters;
				var zone = g.IsFastPop && !g.AbortFastPop ? g.FastPopZone : { Id: media.ZoneId, Name: media.ZoneName };

				return (!checkPopRunning || !g.PopRunning) && !g.PopLoaded && !(g.IsFastPop && !g.AbortFastPop && g.IsFastPopCapped()) && g.IsClientSideFiltersPassed(clientFilters, g.LogZoneFilter(zone));
			},

			execute: function (event, triggerEvent, isEdge, link) {
				var link = link || event.target || event.srcElement;
				var g = g367CB268B1094004A3689751E7AC568F;

				g.EventObject = event;

				if (g.IsFastPop && !g.AbortFastPop) {
					if (g.PopLoaded || g.IsFastPopCapped()) {
						if (g367CB268B1094004A3689751E7AC568F.IsFeatureEnabled("IsSkipTriggerClick")) {
							if (!link) {
								return false;
							}
							g.PopRunning = false;
						} else {
							this.triggerClick(link, triggerEvent);
						}
						return false;
					}

					if (g.IsDontTriggerForSelectorMatch(g.PopSettings.PopUnderDontTriggerSelector, link)) {
						if (g367CB268B1094004A3689751E7AC568F.IsFeatureEnabled("IsSkipTriggerClick")) {
							if (!link) {
								return false;
							}
							g.PopRunning = false;
						} else {
							this.triggerClick(link, triggerEvent);
						}
						return false;
					}

					if (g.PopSettings.PopUnderTriggerOnSelector
						&& !g.IsTriggerOnSelectorMatch(g.PopSettings.PopUnderTriggerOnSelector, link, g.PopSettings.PopUnderTriggerOnSelectorDepth)) {
						if (g367CB268B1094004A3689751E7AC568F.IsFeatureEnabled("IsSkipTriggerClick")) {
							if (!link) {
								return false;
							}
							g.PopRunning = false;
						} else {
							this.triggerClick(link, triggerEvent);
						}
						return false;
					}

					// "link" can be any element placed inside an actual anchor element (see Nested External Link on the tag test page).
					// here we try to get that link to later check its target, rel and other attributes.
					// the original element is returned if an A element is not found.
					// and for some reason we decided to do this for Edge only
					var actualLink = isEdge ? g.GetParentLink(link) : link;

					if (g.PopSettings.RespectTargetBlank
						// If link is a document element then getAttribute is not defined
						&& actualLink.getAttribute
						&& (actualLink.getAttribute("target") === "_blank"
							|| actualLink.getAttribute("rel") === "nofollow")) {
						this.triggerClick(link, triggerEvent);
						return false;
					}

					if (g.IsIgnoreElement(link)) {
						this.triggerClick(link, triggerEvent);
						return false;
					}
				}
				else {
					if (g.PopLoaded) {
						this.triggerClick(link, triggerEvent);
						return false;
					}

					if (g.IsCapped("InfNumPops" + g.PopMedia.ZoneId, "InfNumPopsExpire" + g.PopMedia.ZoneId, g.PopMedia.Settings.cap)) {
						this.triggerClick(link, triggerEvent);
						return false;
					}

					// "link" can be any element placed inside an actual anchor element (see Nested External Link on the tag test page).
					// here we try to get that link to later check its target, rel and other attributes.
					// the original element is returned if an A element is not found.
					// and for some reason we decided to do this for Edge only
					var actualLink = isEdge ? g.GetParentLink(link) : link;

					if (g.PopMedia.Settings.RespectTargetBlank
						// If link is a document element then getAttribute is not defined
						&& actualLink.getAttribute
						&& (actualLink.getAttribute("target") === "_blank"
							|| actualLink.getAttribute("rel") === "nofollow")) {
						this.triggerClick(link, triggerEvent);
						return false;
					}
					if (g.IsDontTriggerForSelectorMatch(g.PopMedia.Settings.PopUnderDontTriggerSelector, link)) {
						this.triggerClick(link, triggerEvent);
						return false;
					}
					if (g.PopMedia.Settings.PopUnderTriggerOnSelector
						&& !g.IsTriggerOnSelectorMatch(g.PopMedia.Settings.PopUnderTriggerOnSelector, link, g.PopMedia.Settings.PopUnderTriggerOnSelectorDepth)) {
						if (g367CB268B1094004A3689751E7AC568F.IsFeatureEnabled("IsSkipTriggerClick")) {
							if (!link) {
								return false;
							}
							g.PopRunning = false;
						} else {
							this.triggerClick(link, triggerEvent);
						}
						return false;
					}
					if (g.IsIgnoreElement(link)) {
						this.triggerClick(link, triggerEvent);
						return false;
					}

					g.IncrementCap("InfNumPops" + g.PopMedia.ZoneId, "InfNumPopsExpire" + g.PopMedia.ZoneId, g.PopMedia.Settings.capLength);
				}

				return true;
			},

			triggerClick: function (el, triggerEvent) {
				var g = g367CB268B1094004A3689751E7AC568F;

				try {
					if (!el) {
						return;
					}

					var userEvt = g.EventObject;
					var eventSequence = triggerEvent === "click" ? ["click"] : ["mousedown", "mouseup", "click"];
					for (var i = 0; i < eventSequence.length; i++) {
						var evt = g._Top.document.createEvent("MouseEvents");
						evt.initMouseEvent(eventSequence[i],
							true,
							true,
							window,
							1,
							userEvt ? userEvt.screenX : 0,
							userEvt ? userEvt.screenY : 0,
							userEvt ? userEvt.clientX : 0,
							userEvt ? userEvt.clientY : 0,
							false,
							false,
							false,
							false,
							0,
							null);
						el.dispatchEvent(evt);
					}
					g.PopRunning = false;
				} catch (err) {
					g.ConsoleLog(err);
				}
			},

			getWindowName: function () {
				return "win_" + new Date().getTime().toString();
			},

			postWindowPop: function () {
				var g = g367CB268B1094004A3689751E7AC568F;

				g.PopRunning = false;
				g.Storage.SetSessionStorage("InfChromePopEventAttached", false);
				if (g.IsFastPop) {
					g.IncrementFastPopCap();
					g.OnFastPopLoaded();
				}
				else {
					g.PopLoaded = true;

					if (typeof InfCustomerPopLoadedCallback === "function") {
						InfCustomerPopLoadedCallback();
					}
				}
			},

			buildUrl: function (baseUrl, popType) {
				if (baseUrl == null) {
					return null;
				}

				// we must always replace the selected pop type placeholder for adblock redirects even if the pop type is null
				if (g367CB268B1094004A3689751E7AC568F.IsAdblockRequest) {
					return baseUrl.replace("SelectedPopTypePlaceholder", popType == null ? "null" : popType);
				}

				if (popType == null) {
					return baseUrl;
				}

				if (baseUrl.indexOf("spt=") != -1) {
					return baseUrl;
				}

				var hasParameters = baseUrl.indexOf("?") != -1;
				return baseUrl + (hasParameters ? "&" : "?") + "spt=" + popType;
			},

			getFastPopUrl: function () {
				var g = g367CB268B1094004A3689751E7AC568F;
				var infinityHost = g.InfinityHost;
				var time = encodeURIComponent(new Date().getTimezoneOffset());
				var referrerUrl = encodeURIComponent(g._Top.document.referrer);
				var currentUrl = encodeURIComponent(g._Top.window.location.href);
				var rand = encodeURIComponent(this._randomString);

				return infinityHost + (g.IsAdblockRequest ? "/fp.rb?" : "/fp.engine?")
					+ "id=" + g.Guid
					+ "&rand=" + rand
					+ "&ver=" + g.Version
					+ "&time=" + time
					+ "&referrerUrl=" + referrerUrl
					+ "&subId=" + (g.SubID.length > 0 ? g.SubID : "")
					+ "&tid=" + (g.TId.length > 0 ? g.TId : "")
					+ "&abr=" + g.IsAdblockRequest
					+ "&stdTime=" + g.GetStdTimezoneOffset()
					+ "&res=" + g.GetScreenWidth() + "x" + g.GetScreenHeight()
					+ "&fpe=" + g.GetSupportedVideo()
					+ "&curl=" + currentUrl
					+ "&kw=" + encodeURIComponent(g.GetKeywords());
			}
		},

		ChromePopunder: {
			_guid: null,
			// Note we tried using hosted pdf file before but had to change to use base64. Reason is that there was a customer which had issue with hosted pdf file which was crashing his pdf plugin and leading to pop overs being displayed.
			_showPdf: "data:application/pdf;base64,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8JXNlw4XLN8J4Z8IoqYkUULQzi6nKz1vSLYkMJ97DvKA9GR+t3Q83GU1+I7Ab2Br6rPoCAD/BMgarnhL7WaBuN/0qf7acq/dU0raEprcK2TZIdla/fChLrOBFuc6jp0MBrknewEe73KH2+rYiwBPTJanbC6vYHzWN2fBQlE5in+nFlYQ9qnVTtMW190pyWrlM5VDFEpnSueI+ygA+jaTvpHcBM3AiHaAD5mPikqHQdPYJojBgB3fj9yzdGdyRBvV5YwH4UozSXtQXAasc+B6z5hHuROJHKGr5fQ9q+J+c8IiSbkBauupbtXTt5RDBVKdK7lxraBGVsfeekEX56Q/Xo8nvW/anAh0Zmki7TrdMylcyHsHwKSbogMxX7r/txtC63+gdAMbhZT2fu24HATEgUoN0DcaHCa1kzPjP4xZ3ktGI2Agy+szsSvbfwtmYn6EkfE0PQoD6FnH48is91eoDxayE8hJ/QrO/S4J7Meoqa122eEc44YiZI4Ym/ev8f+ARcDGylS6wqSkdVoiw1lyfJsNCmVuZHN0cmVhbQ1lbmRvYmoNNCAwIG9iag08PC9GaWx0ZXIvRmxhdGVEZWNvZGUvRmlyc3QgNS9MZW5ndGggODAvTiAxL1R5cGUvT2JqU3RtPj5zdHJlYW0NCoZByo5qIKTWkT0EsOrwTNaetewmRJyWO3WrqIJ6JkhapOIkOBXm6Kty1h1c0lkwtdUIuOP2IGwjcbmLOADc/lGUQDnAECeKk+ka8CInWOegDQplbmRzdHJlYW0NZW5kb2JqDTUgMCBvYmoNPDwvRmlsdGVyL0ZsYXRlRGVjb2RlL0ZpcnN0IDUvTGVuZ3RoIDE0NC9OIDEvVHlwZS9PYmpTdG0+PnN0cmVhbQ0K1wo+Snf8AlgtuOQBso4dq7qTBagU6Bcv2WCA3Bl1DJr7pSqmZ8tLmkruLIjVWgxvVgTmDP5BxV2741g5WfMw6Ooo82x1GyOpUks28fcb7ZvIDnUIy5q5nj5KtTYeHpzo6OMvfN2gMU/oHl6WWcl0XfExgmkozEnKTYtBZZWlNHXndkqJwN5JC3iw3JhZ4rJ3DQplbmRzdHJlYW0NZW5kb2JqDTYgMCBvYmoNPDwvRGVjb2RlUGFybXM8PC9Db2x1bW5zIDQvUHJlZGljdG9yIDEyPj4vRW5jcnlwdCAxNiAwIFIvRmlsdGVyL0ZsYXRlRGVjb2RlL0lEWzwxOEY1NTNGQ0I5ODZEQjQxOEYzMTFDQUEyMUU4NjhDNz48QUQ2Nzk1QzREQjMyRDk0N0FGQ0U5MzEyNzhGRTM4MjU+XS9JbmZvIDE0IDAgUi9MZW5ndGggNTQvUm9vdCAxNyAwIFIvU2l6ZSAxNS9UeXBlL1hSZWYvV1sxIDIgMV0+PnN0cmVhbQ0KaN5iYgACJka5+QxMDIzvgAQziOC9C+KuARIMb4GyFwRALAZGGMH4D4XLBOIyMgAEGABZSQgmDQplbmRzdHJlYW0NZW5kb2JqDXN0YXJ0eHJlZg0KMTE2DQolJUVPRg0K",
			_blankPdf: "data:application/pdf;base64,JVBERi0xLjANCjEgMCBvYmo8PC9QYWdlcyAyIDAgUj4+ZW5kb2JqIDIgMCBvYmo8PC9LaWRzWzMgMCBSXS9Db3VudCAxPj5lbmRvYmogMyAwIG9iajw8L01lZGlhQm94WzAgMCAzIDNdPj5lbmRvYmoNCnRyYWlsZXI8PC9Sb290IDEgMCBSPj4=",
			_randomString: Math.floor((Math.random() * 1e3) + 1).toString(),
			_postWindowPopCalled: false,
			_popWin: null,
			_handle: null,
			_minX: 1,
			_minY: 1,
			_maxLeft: 19999,
			_maxTop: 19999,
			// Holds value indicating which pop open mode should be given priority.
			// This value is managed on pop under zone settings level
			// Allowed values are:
			// 	1 - notification
			// 	2 - pdfAndFalseTab
			//  3 - tabUnder
			//  4 - doublePop
			_desiredMode: 1,
			_popOpenModes: {
				pdf: 0,
				notification: 1,
				pdfAndFalseTab: 2,
				tabUnder: 3,
				doublePop: 4,
				doublePdf: 5,
				doublePdfDoublePop: 6,
				hidden: 7,
				popOver: 8,
				postMessage: 9
			},
			_requirePdf: function () {
				var browser = g367CB268B1094004A3689751E7AC568F.UaParser.getBrowser();
				var os = g367CB268B1094004A3689751E7AC568F.UaParser.getOS();

				if (os.name === "Mac OS") {
					return browser.major <= 57;
				}

				// Since v60 focus via notification on Win is no longer working
				if (browser.major <= 57 || (browser.major >= 60 && browser.major < 64)) {
					return true;
				}

				return false;
			},
			// Pre: Can be called only after init
			_getPopOpenMode: function () {
				var browser = g367CB268B1094004A3689751E7AC568F.UaParser.getBrowser();
				var os = g367CB268B1094004A3689751E7AC568F.UaParser.getOS();

				if (browser.major >= 64 && this._desiredMode == this._popOpenModes.pdfAndFalseTab) {
					return this._popOpenModes.postMessage;
				}

				if (os.name === "Mac OS" && this._desiredMode != this._popOpenModes.hidden) {
					if (browser.major > 57) {
						// This shows pop over in mac but same does pdfAndFalseTab so we use notification
						// as it does not have dependency on pdf plugin
						return this._popOpenModes.notification;
					} else {
						return this._popOpenModes.pdf;
					}
				}

				if (!navigator.mimeTypes["application/pdf"]) {
					// If browser doesn't have pdf we can only show notification. So ignore any desired mode
					// settings and use notification
					if (browser.major > 57 && browser.major < 60) {
						return this._popOpenModes.notification;
					} else {
						// Note: This location is unreachable, this is guaranteed by _requirePdf which ensures
						// that pdf is present for browser.major <= 57 && browser.major >= 60 under Win
						throw 'Pop not supported for this browser';
					}
				}

				// At this location we know that OS is not Mac OS and that pdf is available

				if (this._desiredMode == this._popOpenModes.tabUnder) {
					// If tab under is desired check if we can do tab under
					// If cannot do tab under then fallback to pdf
					if (browser.major > 48) {
						return this._popOpenModes.tabUnder;
					} else {
						return this._popOpenModes.pdf;
					}
				}

				if (this._desiredMode == this._popOpenModes.doublePop) {
					// If double pop is desired check if we can do double pop
					// If cannot do double pop then fallback to pdf
					if (browser.major > 48 && browser.major < 61) {
						return this._popOpenModes.doublePop;
					} else if (browser.major >= 61) {
						return this._popOpenModes.doublePdfDoublePop;
					} else {
						return this._popOpenModes.pdf;
					}
				}

				if (this._desiredMode == this._popOpenModes.notification) {
					if (browser.major > 57) {
						return this._popOpenModes.notification;
					} else {
						return this._popOpenModes.pdf;
					}
				}

				if (this._desiredMode == this._popOpenModes.pdfAndFalseTab) {
					if (browser.major > 57 && browser.major < 60) {
						// Notes:
						// 1. 'Notification' approach supports Chrome Non Incognito. But since there is no good
						// way to detect Incognito (solution with using FileSystem leads to 10s delay in incognito mode)
						// it was decided to use 'PdfAndFalseTab' for both Incognito and non Incognito
						// 2. 'PdfAndFalseTab' approach supports both http and non https. But we use 'Notification' for https under Win > 7.
						// Reason for this is that notification approach was used before pdfAndFalseTab so is proven to be reliable but 
						// doesn't work in Win 7
						return window.location.protocol !== "https:" || (os.name === "Windows" && os.version === "7")
							? this._popOpenModes.pdfAndFalseTab
							: this._popOpenModes.notification;
					}

					if (browser.major == 60) {
						// Notification shows pop over in v60+ so use pdfAndFalseTab always if it is desired
						return this._popOpenModes.pdfAndFalseTab;
					}

					if (browser.major > 60) {
						return this._popOpenModes.doublePdf;
					}

					return this._popOpenModes.pdf;
				}

				if (this._desiredMode == this._popOpenModes.hidden) {
					return this._desiredMode;
				}

				throw 'Unsupported display mode';
			},
			_magicNumbers: function () {
				var browser = g367CB268B1094004A3689751E7AC568F.UaParser.getBrowser();
				var os = g367CB268B1094004A3689751E7AC568F.UaParser.getOS();
				if (os.name === "Mac OS") {
					if (browser.name === "Chrome") {
						return { x: 100, y: 71 };
					} else if (browser.name === "Opera") {
						return { x: 100, y: 86 };
					} else {
						return { x: 0, y: 0 };
					}
				} else if (os.name === "Windows") {
					if (browser.name === "Chrome") {
						if (browser.major === "56") {
							return { x: 122, y: 34 };
						} else {
							return { x: 120, y: 33 };
						}
					} else if (browser.name === "Opera") {
						return { x: 270, y: 129 };
					} else {
						return { x: 0, y: 0 };
					}
				} else {
					return { x: 0, y: 0 };
				}
			},
			_triggerClick: function (el) {
				this._guid.BasePopunder.triggerClick(el, this._getTriggerEvent());
			},
			_createObject: function (data) {
				var div = document.createElement("div");
				div.setAttribute("style", "visibility:hidden;width:0px;height:0px;opacity:0;position:absolute;top:100%;left:0;pointer-events:none;overflow:hidden;");
				div.setAttribute("inf", "inf");
				var object = document.createElement("object");
				object.setAttribute("data", this._showPdf);
				div.appendChild(object);
				this._guid._Top.document.body && this._guid._Top.document.body.appendChild(div);
				return object;
			},
			_getPopRect: function (noMagic) {
				var g = this._guid;
				var magicX = noMagic ? 0 : this._magicNumbers().x;
				var magicY = noMagic ? 0 : this._magicNumbers().y;

				return {
					x: (g.GetWindowLeft() + (g.GetWindowWidth() / 2) - (1024 / 2)),
					y: (g.GetWindowTop() + (g.GetWindowHeight() / 2) - (768 / 2)),
					width: this._popWidth - magicX,
					height: this._popHeight - magicY
				};
			},
			_postWindowPop: function (link) {
				var g = this._guid;
				var popRect = this._getPopRect();

				try {
					this._popWin.moveTo(popRect.x, popRect.y);
					this._popWin.resizeBy(popRect.width, popRect.height);
					this._popWin.location = g.BasePopunder.buildUrl(this._popMediaUrl, g.Enums.SelectedPopType.PopUnder);
				} catch (err) {
					g.ConsoleLog(err);
				}

				this._triggerClick(link);
				g.BasePopunder.postWindowPop();
			},
			_focusAchieved: function (link) {
				if (!this._postWindowPopCalled) {
					this._postWindowPopCalled = true;

					if (this._getPopOpenMode() === this._popOpenModes.pdf) {
						this._handle.setAttribute("data", this._blankPdf);
						var thisRef = this;
						setTimeout(function () { thisRef._handle.parentNode.parentNode.removeChild(thisRef._handle.parentNode); }, 20);
					}

					this._postWindowPop(link);
				}
			},
			_focusMainWindow: function (focusCallback) {
				if (this._getPopOpenMode() == this._popOpenModes.notification) {
					var frame = document.createElement('iframe');
					frame.width = 0;
					frame.height = 0;
					frame.style.width = '0';
					frame.style.height = '0';

					if (location.protocol === 'https:') {
						// Geo location notification works in both incognito and normal view mode but only for https
						frame.srcdoc = '<scr' + 'ipt>navigator.geolocation.getCurrentPosition(function(){});</scr' + 'ipt>';
					} else {
						// Notification API works only in normal (not incognito) mode but works for both http and https
						frame.srcdoc = '<scr' + 'ipt>Notification.requestPermission(function(){});</scr' + 'ipt>';
					}

					document.body.appendChild(frame);
					// You can play with timeout to control for how long we wait till notification will show. It might depend on client performance so don't set too low
					setTimeout(function () {
						frame.parentNode.removeChild(frame);
						focusCallback();
					}, 150);
				} else {
					this._handle = this._createObject(this._showPdf);

					g367CB268B1094004A3689751E7AC568F._Top.addEventListener("focus", focusCallback);
					setTimeout(focusCallback, 3e3);
				}
			},
			_createHiddenPdfFrame: function () {
				var pdfFrame = this._guid._Top.document.createElement("iframe");
				pdfFrame.name = new Date().getTime().toString();
				pdfFrame.id = pdfFrame.name;
				pdfFrame.type = "application/pdf";
				pdfFrame.src = this._showPdf;
				pdfFrame.setAttribute("style", "width:100px;height:100px;position:absolute;top:-1000px;left:1000px;");
				pdfFrame.reset = function () {
					pdfFrame.src = "about:blank";
				};
				pdfFrame.remove = function () {
				};
				return pdfFrame;
			},

			_createTabUnderContent: function (popUrl) {
				var funcDefinition = (function () {
					window.go = function () { window.location.replace(window["popUrl"]); }
				}).toString();

				var funcCall = "(" + funcDefinition + ")();";
				var htmlBuilder = new this.HtmlSourceBuilder();

				var scriptChunks = [];
				scriptChunks.push("var popUrl = '" + popUrl + "';");
				scriptChunks.push(funcCall);

				htmlBuilder.addScript(scriptChunks.join('\n'));
				return htmlBuilder.toString();
			},

			_createDoublePopTabContent: function (popUrl, popUrl2) {
				var g = g367CB268B1094004A3689751E7AC568F;
				popUrl = g.BasePopunder.buildUrl(popUrl, popUrl2 != null ? g.Enums.SelectedPopType.PopUnder : g.Enums.SelectedPopType.TabUnder);
				popUrl2 = g.BasePopunder.buildUrl(popUrl2, g.Enums.SelectedPopType.TabUnder);

				var funcDefinition = (function () {
					var pop = null;

					setTimeout(function () { window.close(); }, 10000);

					window.addEventListener("mouseup",
						function () {
							if (pop) {
								return;
							}

							pop = window.open("about:blank", "win_" + new Date().getTime().toString(), popOptions);
						});

					window.addEventListener("message",
						function (event) {
							if (event.data && event.data.indexOf('inf_pop_url::') === 0) {
								var url = event.data.substring('inf_pop_url::'.length);
								if (url === 'null' || url.length === 0) {
									window.close();
								} else {
									// We navigate async as doing it sync was causing window to close
									window.setTimeout(function () { window.location.replace(url); }, 1);
								}
							}
						}, false);

					window.go = function () {
						if (pop) {
							pop.moveTo(popRect.x, popRect.y);
							pop.resizeTo(popRect.width + (pop.outerWidth - pop.innerWidth), popRect.height + (pop.outerHeight - pop.innerHeight));
							pop.location.replace(window["popUrl"]);
							if (window["popUrl2"]) {
								window.setTimeout(function () { window.location.replace(window["popUrl2"]); }, 1);
							}
							return;
						}

						window.location.replace(window["popUrl"]);
					}
				}).toString();

				var funcCall = "(" + funcDefinition + ")();";
				var htmlBuilder = new this.HtmlSourceBuilder();

				var scriptChunks = [];
				scriptChunks.push("var popRect = " + JSON.stringify(this._getPopRect(true)) + ";");
				scriptChunks.push("var popUrl = '" + popUrl + "';");
				if (popUrl2) {
					scriptChunks.push("var popUrl2 = '" + popUrl2 + "';");
				}
				scriptChunks.push("var popOptions = '" + this._guid.PopMediaOptions + "';");
				scriptChunks.push(funcCall);

				htmlBuilder.addScript(scriptChunks.join('\n'));
				return htmlBuilder.toString();
			},

			HtmlSourceBuilder: function () {
				var scripts = [];
				this.addScript = function (script) {
					scripts.push(script);
				};

				this.toString = function () {
					var sourceChunks = [];
					sourceChunks.push("<!DOCTYPE HTML>");
					sourceChunks.push("<html>");
					sourceChunks.push('<head><title></title><meta name="Referrer" content="unsafe-url"/></head>');
					sourceChunks.push('<body>');
					for (var i = 0; i < scripts.length; i++) {
						sourceChunks.push("<" + "script".toString() + ">");
						sourceChunks.push(scripts[i]);
						sourceChunks.push("</" + "script".toString() + ">");
					}
					sourceChunks.push('</body>');
					sourceChunks.push('</html>');

					return sourceChunks.join('\n');
				};
			},

			_createDoublePdfDoublePopTabContent: function (popUrl, popUrl2) {
				var g = g367CB268B1094004A3689751E7AC568F;
				popUrl = g.BasePopunder.buildUrl(popUrl, popUrl2 != null ? g.Enums.SelectedPopType.PopUnder : g.Enums.SelectedPopType.TabUnder);
				popUrl2 = g.BasePopunder.buildUrl(popUrl2, g.Enums.SelectedPopType.TabUnder);

				var funcDefinition = (function () {
					setTimeout(function () { window.close(); }, 10000);

					function createPopContent() {
						var definition = (function () {
							window.addEventListener("message",
								function (event) {
									if (event.data && event.data.indexOf('inf_pop_resize') === 0) {
										var sizeArray = event.data.substring('inf_pop_resize::'.length).split('x');
										window.resizeBy(sizeArray[0], sizeArray[1]);
										return;
									}

									if (tab && event.data && event.data.indexOf('inf_pop_url::') === 0) {
										var url = event.data.substring('inf_pop_url::'.length);
										if (url === 'null' || url.length === 0) {
											tab.close();
										} else {
											tab.location.replace(url);
										}
									}
								}, false);

							var frame = document.createElement("iframe");
							frame.src = window['popUrl'];
							frame.setAttribute("style", "width:100%;height:100%");
							document.body.appendChild(frame);
						}).toString();

						var callString = "(" + definition + ")();";
						var sourceChunks = [];
						sourceChunks.push("<!DOCTYPE HTML>");
						sourceChunks.push("<html>");
						sourceChunks.push('<head><title></title><meta name="Referrer" content="unsafe-url"/></head>');
						sourceChunks.push('<body>');
						// To string is important to ensure that YUI compressor does not convert it into script tag
						sourceChunks.push("<" + "script".toString() + ">");
						sourceChunks.push("var popUrl = '" + window["popUrl"] + "';");
						sourceChunks.push(callString);
						sourceChunks.push("</" + "script".toString() + ">");
						sourceChunks.push('</body>');
						sourceChunks.push('</html>');

						return sourceChunks.join('\n');
					};

					window.go = function () {
						var pop = window["pop"];
						if (pop) {
							pop.moveTo(popRect.x, popRect.y);
							pop.resizeTo(
								popRect.width + (pop.outerWidth - pop.innerWidth),
								popRect.height + (pop.outerHeight - pop.innerHeight));

							if (window["popUrl2"]) {
								pop.location.replace(window["popUrl"]);
								window.setTimeout(function () { window.location.replace(window["popUrl2"]); }, 1);
							} else {
								var doc = pop.document;
								doc.write(createPopContent(window["popUrl"]));
								doc.close();
								pop["tab"] = window;
							}
							return;
						}

						window.location.replace(window["popUrl"]);
					};

					var pdfElement = document.createElement("iframe");
					pdfElement.type = "application/pdf";
					pdfElement.src = window['pdf'];
					pdfElement.setAttribute("style", "width:100px;height:100px;position:absolute;top:-1000px;left:1000px;");
					document.body.appendChild(pdfElement);

					window.clean = function () {
						document.body.removeChild(pdfElement);
					};
				}).toString();

				var funcCall = "(" + funcDefinition + ")();";
				var htmlBuilder = new this.HtmlSourceBuilder();

				var scriptChunks = [];
				scriptChunks.push("var popRect = " + JSON.stringify(this._getPopRect(true)) + ";");
				scriptChunks.push("var popUrl = '" + popUrl + "';");
				if (popUrl2) {
					scriptChunks.push("var popUrl2 = '" + popUrl2 + "';");
				}
				scriptChunks.push("var pdf = '" + this._showPdf + "';");
				scriptChunks.push(funcCall);

				htmlBuilder.addScript(scriptChunks.join('\n'));
				return htmlBuilder.toString();
			},

			_createDoublePdfPopContent: function (popUrl) {
				var g = g367CB268B1094004A3689751E7AC568F;
				popUrl = g.BasePopunder.buildUrl(popUrl, g.Enums.SelectedPopType.PopUnder);
				var funcDefinition = (function () {
					var timeout = setTimeout(function () { window.go(); }, 5000);
					var interval = setInterval(function () {
						if (!window.openerExists()) {
							window.go();
						}
					}, 500);

					window.openerExists = function () {
						// Try catch is important here as when opener no longer available
						// window.opener.location is still available but accessing href throws exception
						try {
							if (window.opener
								&& window.opener.location
								&& window.opener.location.href) {
								return true;
							}
						} catch (e) { return false; }

						return false;
					};

					window.go = function () {
						clearTimeout(timeout);
						clearInterval(interval);

						window.moveTo(popRect.x, popRect.y);
						window.resizeTo(popRect.width + (window.outerWidth - window.innerWidth),
							popRect.height + (window.outerHeight - window.innerHeight));
						window.location.replace(window["popUrl"]);
					};
				}).toString();

				var funcCall = "(" + funcDefinition + ")();";
				var htmlBuilder = new this.HtmlSourceBuilder();

				var scriptChunks = [];
				scriptChunks.push("var popRect = " + JSON.stringify(this._getPopRect(true)) + ";");
				scriptChunks.push("var popUrl = '" + popUrl + "';");
				scriptChunks.push(funcCall);

				htmlBuilder.addScript(scriptChunks.join('\n'));
				return htmlBuilder.toString();
			},

			_createDoublePdfTabContent: function (popUrl) {
				var g = g367CB268B1094004A3689751E7AC568F;
				popUrl = g.BasePopunder.buildUrl(popUrl, g.Enums.SelectedPopType.TabUnder);
				var funcDefinition = (function () {
					setTimeout(function () { window.close(); }, 5000);

					window.go = function () {
						var pop = window["pop"];
						if (pop) {
							setTimeout(function () {
								window.close();
							}, 0);
							return;
						}

						window.location.replace(window["popUrl"]);
					};

					var pdfElement = document.createElement("iframe");
					pdfElement.type = "application/pdf";
					pdfElement.src = window['pdf'];
					pdfElement.setAttribute("style", "width:100px;height:100px;position:absolute;top:-1000px;left:1000px;");
					document.body.appendChild(pdfElement);

					window.clean = function () {
						document.body.removeChild(pdfElement);
					};
				}).toString();

				var funcCall = "(" + funcDefinition + ")();";
				var htmlBuilder = new this.HtmlSourceBuilder();

				var scriptChunks = [];
				scriptChunks.push("var popRect = " + JSON.stringify(this._getPopRect(true)) + ";");
				scriptChunks.push("var popUrl = '" + popUrl + "';");
				scriptChunks.push("var pdf = '" + this._showPdf + "';");
				scriptChunks.push(funcCall);

				htmlBuilder.addScript(scriptChunks.join('\n'));
				return htmlBuilder.toString();
			},

			_createFalseTabContent: function (popUrl) {
				var funcDefinition = (function () {
					var pop = null;

					window.addEventListener("mouseup",
						function () {
							if (pop) {
								return;
							}

							pop = window.open("about:blank", "win_" + new Date().getTime().toString(), popOptions);
						});

					setTimeout(function () {
						if (pop) {
							pop.close();
						}

						window.close();
					}, 5000);

					window.go = function () {
						if (pop) {
							pop.moveTo(popRect.x, popRect.y);
							pop.resizeTo(popRect.width + (pop.outerWidth - pop.innerWidth), popRect.height + (pop.outerHeight - pop.innerHeight));
							pop.location.replace(window["popUrl"]);
							window.close();
							return;
						}

						window.location.replace(window["popUrl"]);
					}
				}).toString();

				var funcCall = "(" + funcDefinition + ")();";
				var htmlBuilder = new this.HtmlSourceBuilder();

				var scriptChunks = [];
				scriptChunks.push("var popRect = " + JSON.stringify(this._getPopRect(true)) + ";");
				scriptChunks.push("var popUrl = '" + popUrl + "';");
				scriptChunks.push("var popOptions = '" + this._guid.PopMediaOptions + "';");
				scriptChunks.push(funcCall);

				htmlBuilder.addScript(scriptChunks.join('\n'));
				return htmlBuilder.toString();
			},

			_openTabUnder: function (popUrl, link) {
				popUrl = this._guid.BasePopunder.buildUrl(popUrl, this._guid.Enums.SelectedPopType.TabUnder);
				var pdfFrame = this._createHiddenPdfFrame();
				this._guid._Top.document.body.appendChild(pdfFrame);

				var falseTab = null;

				var thisRef = this;
				function loadAdIntoPop() {
					thisRef._guid._Top.document.body.removeChild(pdfFrame);

					try {
						if (falseTab) {
							falseTab.go();
						}
					} catch (e) { }

					thisRef._triggerClick(link);

					thisRef._guid.PopLoaded = true;
					thisRef._guid.PopRunning = false;

					if (thisRef._guid.IsFastPop) {
						thisRef._guid.IncrementFastPopCap();
						thisRef._guid.OnFastPopLoaded();
					} else {
						if (typeof InfCustomerPopLoadedCallback === "function") {
							InfCustomerPopLoadedCallback();
						}
					}
				}

				var cancelFocusOutAndInCheck = this._onFocusOutAndIn(this._guid._Top, onFocus);
				var focusTimeoutTimer = null;
				var onFocusCalled = false;

				function onFocus() {
					if (onFocusCalled) {
						return;
					}
					onFocusCalled = true;

					thisRef._guid._Top.removeEventListener("focus", onFocus);
					cancelFocusOutAndInCheck();
					if (focusTimeoutTimer) {
						thisRef._guid._Top.clearTimeout(focusTimeoutTimer);
					}
					pdfFrame.reset();

					// setTimeout(loadAdIntoPop, 200);
					loadAdIntoPop();
				}

				this._guid._Top.addEventListener("focus", onFocus);
				focusTimeoutTimer = this._guid._Top.setTimeout(onFocus, 3000);

				falseTab = this._guid._Top.open("about:blank", "_blank");
				var doc = falseTab.document;
				doc.write(this._createTabUnderContent(popUrl));
				doc.close();
			},

			_openViaDoublePdf: function (link, tabContent, popContent) {
				var tab = this._guid._Top.open("about:blank", "_blank");
				var pop = null;

				var thisRef = this;
				var pdfFrame = null;

				function loadAdIntoPop() {
					if (thisRef._guid.PopLoaded) {
						return;
					}

					if (pdfFrame) {
						thisRef._guid._Top.document.body.removeChild(pdfFrame);
					}

					try {
						if (tab && tab.go) {
							tab.go();
						}

						if (pop && pop.go) {
							pop.go();
						}
					} catch (e) {
						console.log(e);
					}

					thisRef._triggerClick(link);

					thisRef._guid.PopLoaded = true;
					thisRef._guid.PopRunning = false;

					if (thisRef._guid.IsFastPop) {
						thisRef._guid.IncrementFastPopCap();
						thisRef._guid.OnFastPopLoaded();
					} else {
						if (typeof InfCustomerPopLoadedCallback === "function") {
							InfCustomerPopLoadedCallback();
						}
					}
				}

				function focusMainWindow(callback) {
					pdfFrame = thisRef._createHiddenPdfFrame();
					thisRef._guid._Top.document.body.appendChild(pdfFrame);

					var cancelFocusOutAndInCheck = thisRef._onFocusOutAndIn(thisRef._guid._Top, onFocus);
					var focusTimeoutTimer = null;
					var onFocusCalled = false;

					function onFocus() {
						if (onFocusCalled) {
							return;
						}
						onFocusCalled = true;

						thisRef._guid._Top.removeEventListener("focus", onFocus);
						cancelFocusOutAndInCheck();
						if (focusTimeoutTimer) {
							thisRef._guid._Top.clearTimeout(focusTimeoutTimer);
						}
						pdfFrame.reset();

						callback();
					}

					thisRef._guid._Top.addEventListener("focus", onFocus);
					focusTimeoutTimer = thisRef._guid._Top.setTimeout(onFocus, 3000);
				}

				var doc = tab.document;
				doc.write(tabContent);
				doc.close();

				// Need to handle situation when mouse button is pressed but then is not released in long time
				// In that case just do a tab under
				var cancelMouseUp = false;
				var mouseUpTimeout = setTimeout(function () {
					cancelMouseUp = true;
					tab["clean"]();
					focusMainWindow(loadAdIntoPop);
				}, 500);

				//// Under some circumstances the main window might get focus before focusMainWindows gets called,
				//// in which case call loadAdIntoPop directly if the main window hasFocus
				//var mainWindowHasFocusCheck = setInterval(function () {
				//	if (g367CB268B1094004A3689751E7AC568F._Top.document.hasFocus()) {
				//		clearInterval(mainWindowHasFocusCheck);
				//		loadAdIntoPop();
				//	}
				//}, 100);


				tab["addEventListener"]("mouseup",
					function () {
						if (tab["pop"] || cancelMouseUp) {
							return;
						}

						clearTimeout(mouseUpTimeout);

						// Theoretically it is possible that we will never receive focus
						// if mouse up happens after focus was gained due to PDF load
						// so handle this case by setting focus timeout and switching to tabunder
						var focusTimeout = setTimeout(function () {
							if (tab.closed) {
								// If tab was closed we cannot switch to tabunder
								return;
							}

							if (tab["pop"]) {
								try {
									tab["pop"].close();
								} catch (e) { }
								tab["pop"] = null;
							}

							tab["clean"]();
							focusMainWindow(loadAdIntoPop);
						}, 3000);

						tab["addEventListener"]("focus",
							function () {
								clearTimeout(focusTimeout);
								tab["clean"]();
								focusMainWindow(loadAdIntoPop);
							});

						pop = window.open("about:blank", "win_" + new Date().getTime().toString(), thisRef._guid.PopMediaOptions);
						tab["pop"] = pop;

						if (popContent) {
							var doc = pop.document;
							doc.write(popContent);
							doc.close();

							// Periodically check if tab is closed. Since tab stays visible for a long time it is possible that user
							// will close it.
							var checkInterval = setInterval(function () {
								if (tab.closed) {
									clearInterval(checkInterval);
									loadAdIntoPop();
								}
							}, 100);
						}
					});
			},

			_openViaPdfAndFalseTab: function (link, falseTabContent) {
				var pdfFrame = this._createHiddenPdfFrame();
				this._guid._Top.document.body.appendChild(pdfFrame);

				var falseTab = null;

				var thisRef = this;
				function loadAdIntoPop() {
					thisRef._guid._Top.document.body.removeChild(pdfFrame);

					try {
						if (falseTab) {
							falseTab.go();
						}
					} catch (e) { }

					thisRef._triggerClick(link);

					thisRef._guid.PopLoaded = true;
					thisRef._guid.PopRunning = false;

					if (thisRef._guid.IsFastPop) {
						thisRef._guid.IncrementFastPopCap();
						thisRef._guid.OnFastPopLoaded();
					} else {
						if (typeof InfCustomerPopLoadedCallback === "function") {
							InfCustomerPopLoadedCallback();
						}
					}
				}

				var cancelFocusOutAndInCheck = this._onFocusOutAndIn(this._guid._Top, onFocus);
				var focusTimeoutTimer = null;
				var onFocusCalled = false;

				function onFocus() {
					if (onFocusCalled) {
						return;
					}
					onFocusCalled = true;

					thisRef._guid._Top.removeEventListener("focus", onFocus);
					cancelFocusOutAndInCheck();
					if (focusTimeoutTimer) {
						thisRef._guid._Top.clearTimeout(focusTimeoutTimer);
					}
					pdfFrame.reset();

					setTimeout(loadAdIntoPop, 200);
				}

				this._guid._Top.addEventListener("focus", onFocus);
				focusTimeoutTimer = this._guid._Top.setTimeout(onFocus, 3000);

				falseTab = this._guid._Top.open("about:blank", "_blank");
				var doc = falseTab.document;
				doc.write(falseTabContent);
				doc.close();
			},

			_onPopDisplay: function (link) {
				this._triggerClick(link);

				this._guid.PopRunning = false;
				this._guid.Storage.SetSessionStorage("InfChromePopEventAttached", false);

				if (this._guid.IsFastPop) {
					this._guid.IncrementFastPopCap();
					this._guid.OnFastPopLoaded();
				}
				else {
					this._guid.PopLoaded = true;

					if (typeof InfCustomerPopLoadedCallback === "function") {
						InfCustomerPopLoadedCallback();
					}
				}
			},

			// Calls callback after @win looses focus and then gets it back
			// window should loose focus for at least 20 ms for this to work
			// returns cancelation function that can be used to cancel. In that case callback will not be called
			_onFocusOutAndIn: function (win, callback) {
				var currentInterval = null;

				function cancel() {
					if (currentInterval != null) {
						clearInterval(currentInterval);
					}
				}

				currentInterval = setInterval(function () {
					if (!win.document.hasFocus()) {
						clearInterval(currentInterval);

						currentInterval = setInterval(function () {
							if (win.document.hasFocus()) {
								clearInterval(currentInterval);
								currentInterval = null;

								callback();
								return;
							}
						}, 20);

						return;
					}
				}, 20);

				return cancel;

			},
			_execute: function (event) {
				var __this = this;
				var g = this._guid;
				var link = event.target || event.srcElement;

				if (g367CB268B1094004A3689751E7AC568F.IsFeatureEnabled("IsLookForContainerAnchorLink")) {
					try {
						if (link.tagName && link.tagName.toLowerCase() !== "a") {
							var position = link.getBoundingClientRect();
							var elements = g._Top.document.elementsFromPoint(position.left, position.top);
							for (var i = 0; i < elements.length; i++) {
								if (elements[i].tagName && elements[i].tagName.toLowerCase() === "a") {
									link = elements[i];
									break;
								}

							}
						}
					} catch (err) {
					}
				}

				g.EventObject = event;

				if (!g.BasePopunder.execute(event, this._getTriggerEvent(), false, link)) {
					return;
				}

				// TODO: Split each open mode into separate class as we have lot and its getting messy. See PopOver for reference

				var popOpenMode = this._getPopOpenMode();
				if (popOpenMode === this._popOpenModes.popOver) {
					var popRect = this._getPopRect(true);
					var popOver = new g.PopOver();
					popOver.setUrl(this._popMediaUrl);
					popOver.setLocation(popRect.x, popRect.y);
					popOver.setSize(popRect.width, popRect.height);
					popOver.setOnSuccessCallback(function () { __this._onPopDisplay(link); });
					popOver.show(event);
					return;
				}

				if (popOpenMode === this._popOpenModes.postMessage) {
					var popRect = this._getPopRect(true);
					var pop = new g.PopUnderViaPostMessage();
					pop.setUrl(this._popMediaUrl);
					pop.setLocation(popRect.x, popRect.y);
					pop.setSize(popRect.width, popRect.height);
					pop.setOnSuccessCallback(function () { __this._onPopDisplay(link); });
					pop.show(event);
					return;
				}

				if (popOpenMode === this._popOpenModes.doublePdf
					// If desired mode is double pop but we have only one url then fallback to single pop via pdfAndFalseTab
					// For Fast pop we use single url that when loaded loads ads into second window
					|| (popOpenMode === this._popOpenModes.doublePdfDoublePop && !this._popMediaUrl2 && !g.IsFastPop && !g.AbortFastPop)) {
					this._openViaDoublePdf(link,
						this._createDoublePdfTabContent(this._popMediaUrl),
						this._createDoublePdfPopContent(this._popMediaUrl));
					this._guid.Storage.SetSessionStorage("InfChromePopEventAttached", false);
					return;
				}

				if (popOpenMode === this._popOpenModes.doublePdfDoublePop) {
					this._openViaDoublePdf(link, this._createDoublePdfDoublePopTabContent(this._popMediaUrl, this._popMediaUrl2));
					this._guid.Storage.SetSessionStorage("InfChromePopEventAttached", false);
					return;
				}

				if (popOpenMode === this._popOpenModes.pdfAndFalseTab
					// If desired mode is double pop but we have only one url then fallback to single pop via pdfAndFalseTab
					// For Fast pop we use single url that when loaded loads ads into second window
					|| (popOpenMode === this._popOpenModes.doublePop && !this._popMediaUrl2 && !g.IsFastPop && !g.AbortFastPop)) {
					var falseTabContent = this._createFalseTabContent(this._popMediaUrl);
					this._openViaPdfAndFalseTab(link, falseTabContent);
					this._guid.Storage.SetSessionStorage("InfChromePopEventAttached", false);
					return;
				}

				if (popOpenMode === this._popOpenModes.doublePop) {
					var falseTabContent = this._createDoublePopTabContent(this._popMediaUrl, this._popMediaUrl2);
					this._openViaPdfAndFalseTab(link, falseTabContent);
					this._guid.Storage.SetSessionStorage("InfChromePopEventAttached", false);
					return;
				}

				if (popOpenMode == this._popOpenModes.tabUnder) {
					this._openTabUnder(this._popMediaUrl, link);
					this._guid.Storage.SetSessionStorage("InfChromePopEventAttached", false);
					return;
				}

				if (popOpenMode == this._popOpenModes.hidden) {
					var waitForParentWindowToClose = g.IsFastPop ?
						g.PopSettings.HiddenPopunderWaitForParentWindowToClose :
						g.PopMedia.Settings.HiddenPopunderWaitForParentWindowToClose;
					var waitForParentWindowToFocus = g.IsFastPop ?
						g.PopSettings.HiddenPopunderWaitForParentWindowToFocus :
						g.PopMedia.Settings.HiddenPopunderWaitForParentWindowToFocus;
					var waitSecondsToLoadMedia = g.IsFastPop ?
						g.PopSettings.HiddenPopunderWaitSecondsToLoadMedia :
						g.PopMedia.Settings.HiddenPopunderWaitSecondsToLoadMedia;

					var popOver = new g.DelayedPopUnder({
						waitSecondsToLoadMedia: waitSecondsToLoadMedia,
						waitForParentToClose: waitForParentWindowToClose,
						waitForParentToFocus: waitForParentWindowToFocus
					});
					popOver.setUrl(this._popMediaUrl);
					var popRect = this._getPopRect(true);
					popOver.setLocation(popRect.x, popRect.y);
					popOver.setSize(popRect.width, popRect.height);
					popOver.setOnSuccessCallback(function () { __this._onPopDisplay(link); });
					popOver.show(event);

					return;
				}

				var cancelFocusOutAndInCheck = null;
				var os = g.UaParser.getOS();
				if (os.name !== "Mac OS") {
					cancelFocusOutAndInCheck = this._onFocusOutAndIn(g._Top, function () { __this._focusAchieved(link); });
				}

				try {
					var popFrame = g._Top.document.createElement('iframe');
					popFrame.setAttribute('style', 'display:none');
					g._Top.document.body.appendChild(popFrame);

					var popFrameScript = popFrame.contentWindow.document.createElement('script');
					popFrameScript.innerHTML = '(' + function () {
						var frameWindow = eval('window');
						frameWindow.init = function (rnd, options) {
							return frameWindow.open("about:blank", rnd, options);
						}
					}.toString() + ')();';

					popFrame.contentWindow.document.body.appendChild(popFrameScript);
					this._popWin = popFrame.contentWindow.init(this._randomString, g.PopMediaOptions);

					g._Top.document.body.removeChild(popFrame);
					this._popWin.document.write("<html><head><script>window.a={};window.a.b=function(){window.resizeTo(1,0);window.moveTo(19999,19999);};window.a.b();</script></head><body></body></html>");

				} catch (err) {
					g.ConsoleLog(err);
				}

				this._focusMainWindow(function () {
					if (cancelFocusOutAndInCheck) {
						cancelFocusOutAndInCheck();
					}
					__this._focusAchieved(link);
				});
			},
			supported: function () {
				// The only unsupported conditions are when browser is mobile or there is no pdf plugin and we need to open via pdf
				return !g367CB268B1094004A3689751E7AC568F.IsMobile.any(g367CB268B1094004A3689751E7AC568F._Top) &&
					!(this._requirePdf() && !navigator.mimeTypes["application/pdf"]);
			},
			// @chromePopApproach is a number. Range and meaning is defined by ChromePopApproach enum
			init: function (media, chromePopApproach) {
				try {
					if (!this.supported()) {
						return;
					}

					var g = this._guid = g367CB268B1094004A3689751E7AC568F;

					this._desiredMode =
						chromePopApproach == g.Enums.chromePopApproach.notification ? this._popOpenModes.notification :
							chromePopApproach == g.Enums.chromePopApproach.notificationEx ? this._popOpenModes.pdfAndFalseTab :
								chromePopApproach == g.Enums.chromePopApproach.doublePop ? this._popOpenModes.doublePop :
									chromePopApproach == g.Enums.chromePopApproach.hidden ? this._popOpenModes.hidden :
										this._popOpenModes.tabUnder;

					var __this = this;

					var opensInTab = this._getPopOpenMode() === this._popOpenModes.tabUnder;
					if (g.IsFastPop && !g.AbortFastPop) {
						this._popMediaUrl = g.BasePopunder.getFastPopUrl();

						if (opensInTab) {
							this._popMediaUrl += '&hosted=true';
						}

						g.PopMediaOptions = 'directories=0,toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,'
							+ 'width=' + this._minX
							+ ',height=' + this._minY
							+ ',screenX=' + this._maxLeft
							+ ',screenY=' + this._maxTop;
						this._popWidth = 1024;
						this._popHeight = 768;
					} else {
						if (this._getPopOpenMode() === this._popOpenModes.doublePop
							|| this._getPopOpenMode() === this._popOpenModes.doublePdfDoublePop) {
							if (media.AdItems) {
								// For double pop we need two pop urls
								this._popMediaUrl = g.CreateAdUrl(media, false, media.AdItems[0]);
								this._popMediaUrl2 = media.AdItems.length > 1 ? g.CreateAdUrl(media, false, media.AdItems[1]) : null;
								this._popWidth = media.AdItems[0].MediaSettings.Width;
								this._popHeight = media.AdItems[0].MediaSettings.Height;
							} else {
								// If server returned single pop response but on client side we decided to use double pop
								// Make sure we at least show 1 pop
								this._popMediaUrl = g.FetchMediaUrl(media);
								this._popWidth = media.Settings.Width;
								this._popHeight = media.Settings.Height;
							}
						} else {
							if (media.AdItems) {
								// If server returned double pop response but on client side we decided to use single pop
								// then just use first pop url
								this._popMediaUrl = g.CreateAdUrl(media, opensInTab);
								this._popWidth = media.AdItems[0].MediaSettings.Width;
								this._popHeight = media.AdItems[0].MediaSettings.Height;
							} else {
								this._popMediaUrl = g.FetchMediaUrl(media, opensInTab);
								this._popWidth = media.Settings.Width;
								this._popHeight = media.Settings.Height;
							}
						}

						g.PopMediaOptions = 'directories=0,toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,'
							+ 'width=' + this._minX
							+ ',height=' + this._minY
							+ ',screenX=' + this._maxLeft
							+ ',screenY=' + this._maxTop;

						g.PopMedia = media;
					}

					if (g._Top.g367CB268B1094004A3689751E7AC568F === undefined) {
						g._Top.g367CB268B1094004A3689751E7AC568F = {};
					}

					g.ChromePopMouseDownHandler = function (event) {
						if (g.BasePopunder.mouseDownHandler(event, media)) {
							__this._execute(event);
						}
					};
					if (g.Storage.GetSessionStorage("InfChromePopEventAttached") !== "true") {
						g._Top.document.addEventListener(this._getTriggerEvent(), g.ChromePopMouseDownHandler, true);
						g.Storage.SetSessionStorage("InfChromePopEventAttached", true);
						g._Top.onbeforeunload = g._Top.onunload = function (e) {
							g.Storage.DeleteSessionStorage("InfChromePopEventAttached");
						}
					}
				} catch (err) {
					g367CB268B1094004A3689751E7AC568F.ConsoleLog(err);
				}
			},
			_getTriggerEvent: function () {
				var popOpenMode = this._getPopOpenMode();
				var mouseDownTriggerModes = [
					this._popOpenModes.pdfAndFalseTab,
					this._popOpenModes.doublePop,
					this._popOpenModes.doublePdf,
					this._popOpenModes.doublePdfDoublePop,
					this._popOpenModes.tabUnder,
					this._popOpenModes.postMessage
				];

				for (var i = 0; i < mouseDownTriggerModes.length; i++) {
					if (mouseDownTriggerModes[i] === popOpenMode) {
						return "mousedown";
					}
				}

				return "click";
			}
		},

		EdgePopunder:
		{
			_media: null,
			_popMediaUrl: null,
			_abortPop: false,

			supported: function (browser, os, media) {
				return browser.name === "Edge" && os.name === "Windows"
					&& this._isPopunder(media) && !this._isTracking(media) && !this._isSameTab(media);
			},

			_isPopunder: function (media) {
				var g = g367CB268B1094004A3689751E7AC568F;
				return g.IsFastPop && g.PopSettings.IsPopunder || !g.IsFastPop && media.Settings.PopType === 0;
			},

			_isTracking: function (media) {
				var g = g367CB268B1094004A3689751E7AC568F;
				return g.IsFastPop ? g.PopSettings.IsTracking : media.Settings.IsTracking;
			},

			_isSameTab: function (media) {
				var g = g367CB268B1094004A3689751E7AC568F;
				var sameTabAdSettings = g.IsFastPop ? g.PopSettings.SameTabAdSettings : media.Settings.SameTabAdSettings;
				return sameTabAdSettings != null
					&& sameTabAdSettings.Windows
					&& sameTabAdSettings.Edge
					&& (sameTabAdSettings.AdblockOnly == false || g.IsAdblockRequest);
			},

			init: function (media) {
				this._media = media;
				var g = g367CB268B1094004A3689751E7AC568F;
				g.PopMedia = media;

				var baseAdUrl = g.IsFastPop && !g.AbortFastPop ? g.BasePopunder.getFastPopUrl() : g.FetchMediaUrl(media);
				this._popMediaUrl = g.BasePopunder.buildUrl(baseAdUrl, g.Enums.SelectedPopType.PopUnder);

				var _this = this;

				// the current popunder code for edge works only for mousedown event
				g._Top.document.addEventListener("mousedown", function (event) { _this._mouseDownHandler(event); }, true);

				// we should cancel the click event and wait for the main window to focus (or to fail to focus) if the user clicks a link.
				// if we don't do this, the link would reload the page effectively canceling the interval function to focus the main window
				g._Top.document.addEventListener("click", function (event) { _this._clickHandler(event); }, true);
			},

			_mouseDownHandler: function (event) {
				if (g367CB268B1094004A3689751E7AC568F.BasePopunder.mouseDownHandler(event, this._media)) {
					this._execute(event);
				}

				return true;
			},

			_clickHandler: function (event) {
				// we should cancel the click event and wait for the main window to focus (or fail to focus) if the user clicks a link.
				// if we don't do this, the link would reload the page effectively canceling the interval function to focus the main window
				if (g367CB268B1094004A3689751E7AC568F.BasePopunder.shouldHandleEvent(this._media, false) && !this._abortPop) {
					event.preventDefault();
					event.stopImmediatePropagation();
					event.stopPropagation();
				}

				return true;
			},

			_execute: function (event) {
				var g = g367CB268B1094004A3689751E7AC568F;
				if (!g.BasePopunder.execute(event, "mousedown", true)) {
					this._abortPop = true;
					return;
				}

				// Place the window coordinates in the center of the active window
				var windowWidth = 1024;
				var windowHeight = 768;
				if (!g.IsFastPop || g.AbortFastPop) {
					// Edge has a minimum window size of 320x160. It will not change the window size at all if either width or height is lower than the limit
					windowWidth = this._media.Settings.Width < 320 ? 320 : this._media.Settings.Width;

					// edge will change the actual image height to -1px if we don't add 1px to the window height
					// so we can allow mediaHeight to be 159 or greater
					windowHeight = this._media.Settings.Height < 159 ? 160 : this._media.Settings.Height + 1;
				}

				var pxLeft = (g.GetWindowLeft() + (g.GetWindowWidth() / 2) - (windowWidth / 2));
				var pxTop = (g.GetWindowTop() + (g.GetWindowHeight() / 2) - (windowHeight / 2));

				var options = 'scrollbars=1,location=1,statusbar=1,menubar=0,resizable=1,top=' +
					pxTop +
					',left=' +
					pxLeft +
					',width=' +
					windowWidth +
					',height=' +
					windowHeight +
					',index=0,total=1';

				var popWindow = window.open("about:blank", g.BasePopunder.getWindowName(), options);

				var _this = this;
				var setFocusCounter = 0;
				var setFocusInterval = setInterval(function () {
					setFocusCounter++;
					if (setFocusCounter > 2 || g._Top.document.hasFocus()) {
						clearInterval(setFocusInterval);
						popWindow.location.href = _this._popMediaUrl;
						g.BasePopunder.postWindowPop();
						var link = event.target || event.srcElement;
						g.BasePopunder.triggerClick(link);
						return;
					}

					g._Top.focus();
				}, 400);
			}
		},

		LogZoneFilter: function (zone) {
			var thisRef = this;
			return function (filter, passed, message) {
				if (typeof zone === "undefined" || zone == null) {
					thisRef.ClientProfilingLog.WriteFilterLog({ id: '-1', name: 'UNKNOWN', type: 'Zone' }, filter, passed, message);
					return;
				}
				thisRef.ClientProfilingLog.WriteFilterLog({ id: zone.Id, name: zone.Name, type: 'Zone' }, filter, passed, message);
			};
		},
		ClientProfilingLog: {
			_logItems: [],
			// @filterTarget is object of form { id, name, type }
			WriteFilterLog: function (filterTarget, filterName, passed, message) {
				this._logItems.push({ type: 'filter', data: { message: message, passed: passed, name: filterName, target: filterTarget } });
			},
			// returns array of object of form { type: string, data: type_specific_object }
			GetItems: function () {
				return this._logItems;
			}
		},
		IsTagTest: function () {
			try {
				return window.top['__infinity_tag_test'] === true;
			} catch (err) { }

			return false;
		}
	};

	// Class definitions. Scoped to provide shortcut for global object
	// ns - stands for namespace
	(function (ns) {
		if (!Array.prototype.findIndexOfNth) {
    Object.defineProperty(Array.prototype, 'findIndexOfNth',
        {
            value: function(predicate, n) {
                if (n < 1) {
                    throw 'N must be greater than 0';
                }

                var idx = 0;
                while (idx < this.length) {
                    var val = this[idx];
                    if (predicate.call(window, val, idx, this)) {
                        n--;
                        if (n === 0) {
                            return idx;
                        }
                    }

                    idx++;
                }

                return -1;
            }
        });
}

// >>> Polyfills start

// Production steps of ECMA-262, Edition 5, 15.4.4.18
// Reference: http://es5.github.io/#x15.4.4.18
if (!Array.prototype.forEach) {

  Array.prototype.forEach = function(callback/*, thisArg*/) {

    var T, k;

    if (this == null) {
      throw new TypeError('this is null or not defined');
    }

    // 1. Let O be the result of calling toObject() passing the
    // |this| value as the argument.
    var O = Object(this);

    // 2. Let lenValue be the result of calling the Get() internal
    // method of O with the argument "length".
    // 3. Let len be toUint32(lenValue).
    var len = O.length >>> 0;

    // 4. If isCallable(callback) is false, throw a TypeError exception. 
    // See: http://es5.github.com/#x9.11
    if (typeof callback !== 'function') {
      throw new TypeError(callback + ' is not a function');
    }

    // 5. If thisArg was supplied, let T be thisArg; else let
    // T be undefined.
    if (arguments.length > 1) {
      T = arguments[1];
    }

    // 6. Let k be 0.
    k = 0;

    // 7. Repeat while k < len.
    while (k < len) {

      var kValue;

      // a. Let Pk be ToString(k).
      //    This is implicit for LHS operands of the in operator.
      // b. Let kPresent be the result of calling the HasProperty
      //    internal method of O with argument Pk.
      //    This step can be combined with c.
      // c. If kPresent is true, then
      if (k in O) {

        // i. Let kValue be the result of calling the Get internal
        // method of O with argument Pk.
        kValue = O[k];

        // ii. Call the Call internal method of callback with T as
        // the this value and argument list containing kValue, k, and O.
        callback.call(T, kValue, k, O);
      }
      // d. Increase k by 1.
      k++;
    }
    // 8. return undefined.
  };
}

if (!Array.prototype.filter) {
	Array.prototype.filter = function (fun/*, thisArg*/) {
		'use strict';

		if (this === void 0 || this === null) {
			throw new TypeError();
		}

		var t = Object(this);
		var len = t.length >>> 0;
		if (typeof fun !== 'function') {
			throw new TypeError();
		}

		var res = [];
		var thisArg = arguments.length >= 2 ? arguments[1] : void 0;
		for (var i = 0; i < len; i++) {
			if (i in t) {
				var val = t[i];

				// NOTE: Technically this should Object.defineProperty at
				//       the next index, as push can be affected by
				//       properties on Object.prototype and Array.prototype.
				//       But that method's new, and collisions should be
				//       rare, so use the more-compatible alternative.
				if (fun.call(thisArg, val, i, t)) {
					res.push(val);
				}
			}
		}

		return res;
	};
}

// https://tc39.github.io/ecma262/#sec-array.prototype.find
if (!Array.prototype.find) {
	Object.defineProperty(Array.prototype, 'find', {
		value: function (predicate) {
			// 1. Let O be ? ToObject(this value).
			if (this == null) {
				throw new TypeError('"this" is null or not defined');
			}

			var o = Object(this);

			// 2. Let len be ? ToLength(? Get(O, "length")).
			var len = o.length >>> 0;

			// 3. If IsCallable(predicate) is false, throw a TypeError exception.
			if (typeof predicate !== 'function') {
				throw new TypeError('predicate must be a function');
			}

			// 4. If thisArg was supplied, let T be thisArg; else let T be undefined.
			var thisArg = arguments[1];

			// 5. Let k be 0.
			var k = 0;

			// 6. Repeat, while k < len
			while (k < len) {
				var kValue = o[k];
				if (predicate.call(thisArg, kValue, k, o)) {
					return kValue;
				}
				// e. Increase k by 1.
				k++;
			}

			// 7. Return undefined.
			return undefined;
		}
	});
}

// Production steps of ECMA-262, Edition 5, 15.4.4.19
// Reference: http://es5.github.io/#x15.4.4.19
if (!Array.prototype.map) {

	Array.prototype.map = function (callback/*, thisArg*/) {

		var T, A, k;

		if (this == null) {
			throw new TypeError('this is null or not defined');
		}

		// 1. Let O be the result of calling ToObject passing the |this| 
		//    value as the argument.
		var O = Object(this);

		// 2. Let lenValue be the result of calling the Get internal 
		//    method of O with the argument "length".
		// 3. Let len be ToUint32(lenValue).
		var len = O.length >>> 0;

		// 4. If IsCallable(callback) is false, throw a TypeError exception.
		// See: http://es5.github.com/#x9.11
		if (typeof callback !== 'function') {
			throw new TypeError(callback + ' is not a function');
		}

		// 5. If thisArg was supplied, let T be thisArg; else let T be undefined.
		if (arguments.length > 1) {
			T = arguments[1];
		}

		// 6. Let A be a new array created as if by the expression new Array(len) 
		//    where Array is the standard built-in constructor with that name and 
		//    len is the value of len.
		A = new Array(len);

		// 7. Let k be 0
		k = 0;

		// 8. Repeat, while k < len
		while (k < len) {

			var kValue, mappedValue;

			// a. Let Pk be ToString(k).
			//   This is implicit for LHS operands of the in operator
			// b. Let kPresent be the result of calling the HasProperty internal 
			//    method of O with argument Pk.
			//   This step can be combined with c
			// c. If kPresent is true, then
			if (k in O) {

				// i. Let kValue be the result of calling the Get internal 
				//    method of O with argument Pk.
				kValue = O[k];

				// ii. Let mappedValue be the result of calling the Call internal 
				//     method of callback with T as the this value and argument 
				//     list containing kValue, k, and O.
				mappedValue = callback.call(T, kValue, k, O);

				// iii. Call the DefineOwnProperty internal method of A with arguments
				// Pk, Property Descriptor
				// { Value: mappedValue,
				//   Writable: true,
				//   Enumerable: true,
				//   Configurable: true },
				// and false.

				// In browsers that support Object.defineProperty, use the following:
				// Object.defineProperty(A, k, {
				//   value: mappedValue,
				//   writable: true,
				//   enumerable: true,
				//   configurable: true
				// });

				// For best browser support, use the following:
				A[k] = mappedValue;
			}
			// d. Increase k by 1.
			k++;
		}

		// 9. return A
		return A;
	};
}

if (!Array.prototype.findIndex) {
  Array.prototype.findIndex = function(predicate) {
    if (this == null) {
      throw new TypeError('Array.prototype.findIndex called on null or undefined');
    }
    if (typeof predicate !== 'function') {
      throw new TypeError('predicate must be a function');
    }
    var list = Object(this);
    var length = list.length >>> 0;
    var thisArg = arguments[1];
    var value;

    for (var i = 0; i < length; i++) {
      value = list[i];
      if (predicate.call(thisArg, value, i, list)) {
        return i;
      }
    }
    return -1;
  };
}

if (!Array.prototype.reduce) {
  Array.prototype.reduce = function(callback/*, initialValue*/) {
    'use strict';
    if (this == null) {
      throw new TypeError('Array.prototype.reduce called on null or undefined');
    }
    if (typeof callback !== 'function') {
      throw new TypeError(callback + ' is not a function');
    }
    var t = Object(this), len = t.length >>> 0, k = 0, value;
    if (arguments.length >= 2) {
      value = arguments[1];
    } else {
      while (k < len && ! (k in t)) {
        k++; 
      }
      if (k >= len) {
        throw new TypeError('Reduce of empty array with no initial value');
      }
      value = t[k++];
    }
    for (; k < len; k++) {
      if (k in t) {
        value = callback(value, t[k], k, t);
      }
    }
    return value;
  };
}

if (!Function.prototype.bind) {
	Function.prototype.bind = function(oThis) {
		if (typeof this !== 'function') {
			// closest thing possible to the ECMAScript 5
			// internal IsCallable function
			throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
		}

		var aArgs = Array.prototype.slice.call(arguments, 1),
			fToBind = this,
			fNOP = function() {},
			fBound = function() {
				return fToBind.apply(this instanceof fNOP
					? this
					: oThis,
					aArgs.concat(Array.prototype.slice.call(arguments)));
			};

		if (this.prototype) {
			// Function.prototype doesn't have a prototype property
			fNOP.prototype = this.prototype;
		}
		fBound.prototype = new fNOP();

		return fBound;
	};
}

// Production steps of ECMA-262, Edition 6, 22.1.2.1
if (!Array.from) {
  Array.from = (function () {
    var toStr = Object.prototype.toString;
    var isCallable = function (fn) {
      return typeof fn === 'function' || toStr.call(fn) === '[object Function]';
    };
    var toInteger = function (value) {
      var number = Number(value);
      if (isNaN(number)) { return 0; }
      if (number === 0 || !isFinite(number)) { return number; }
      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));
    };
    var maxSafeInteger = Math.pow(2, 53) - 1;
    var toLength = function (value) {
      var len = toInteger(value);
      return Math.min(Math.max(len, 0), maxSafeInteger);
    };

    // The length property of the from method is 1.
    return function from(arrayLike/*, mapFn, thisArg */) {
      // 1. Let C be the this value.
      var C = this;

      // 2. Let items be ToObject(arrayLike).
      var items = Object(arrayLike);

      // 3. ReturnIfAbrupt(items).
      if (arrayLike == null) {
        throw new TypeError('Array.from requires an array-like object - not null or undefined');
      }

      // 4. If mapfn is undefined, then let mapping be false.
      var mapFn = arguments.length > 1 ? arguments[1] : void undefined;
      var T;
      if (typeof mapFn !== 'undefined') {
        // 5. else
        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.
        if (!isCallable(mapFn)) {
          throw new TypeError('Array.from: when provided, the second argument must be a function');
        }

        // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.
        if (arguments.length > 2) {
          T = arguments[2];
        }
      }

      // 10. Let lenValue be Get(items, "length").
      // 11. Let len be ToLength(lenValue).
      var len = toLength(items.length);

      // 13. If IsConstructor(C) is true, then
      // 13. a. Let A be the result of calling the [[Construct]] internal method 
      // of C with an argument list containing the single item len.
      // 14. a. Else, Let A be ArrayCreate(len).
      var A = isCallable(C) ? Object(new C(len)) : new Array(len);

      // 16. Let k be 0.
      var k = 0;
      // 17. Repeat, while k < len… (also steps a - h)
      var kValue;
      while (k < len) {
        kValue = items[k];
        if (mapFn) {
          A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);
        } else {
          A[k] = kValue;
        }
        k += 1;
      }
      // 18. Let putStatus be Put(A, "length", len, true).
      A.length = len;
      // 20. Return A.
      return A;
    };
  }());
}

		var Enums = /** @class */ (function () {
    function Enums() {
    }
    // Mirror of OnClickVideoAudioMode server side enum
    Enums.VideoAudioMode = {
        audio: 0,
        audioOnMouseOver: 1,
        muted: 2
    };
    Enums.OnClickVideoAdUnitMode = {
        ReadMore: 0,
        Scroll: 1
    };
    Enums.ViewProgress = {
        firstQuartile: 1,
        midpoint: 2,
        thirdQuartile: 3,
        complete: 4
    };
    // Keep names in sync with MediaSourceTypeFlags
    // otherwise update onclickvideo.js
    Enums.MediaSourceType = {
        Url: 1,
        Image: 2,
        Script: 3,
        Html: 4,
        Video: 5,
        VideoTag: 6,
        OnClickIFrame: 7,
        HeaderBidding: 8,
        Native: 9
    };
    // Keep names in sync with MediaSourceType
    // otherwise update onclickvideo.js
    Enums.MediaSourceTypesFlags = {
        None: 0,
        Url: 1,
        Image: 2,
        Script: 4,
        Html: 8,
        Video: 16,
        VideoTag: 32,
        OnClickIFrame: 64,
        HeaderBidding: 128,
        Native: 256
    };
    Enums.TrackingEventType = {
        adFill: 1,
        adView: 2,
        infinityVolume: 3,
        partnerVolume: 4,
        headerBiddingVolume: 5,
        videoAdPlayError: 6
    };
    Enums.AdFillCheckStatus = {
        skipped: 1,
        failed: 2,
        success: 3
    };
    // Mirror of server side ChromePopApproach enum
    Enums.chromePopApproach = {
        notification: 0,
        notificationEx: 1,
        tabUnder: 2,
        tabOver: 3,
        doublePop: 4,
        hidden: 5,
        mixed: 6
    };
    Enums.RelativePlacementType = {
        Inside: 0,
        Before: 1,
        After: 2
    };
    Enums.CssTransitionTimingFunction = {
        Linear: 0,
        Ease: 1,
        EaseIn: 2,
        EaseOut: 3,
        EaseInOut: 4
    };
    Enums.VideoButtonDisplayMode = {
        /**
         * Indicates that button should be visible always
         */
        always: 0,
        /**
         * Indicates that button should be visible on hover.
         * Note: On mobile button will never be visible in this mode because there is no hover on mobile
         */
        onHover: 1,
        /**
         * Indicates that button should never be visible
         */
        never: 2
    };
    Enums.RelativeAlignment = {
        Left: 0,
        Right: 1,
        Over: 2
    };
    return Enums;
}());
/**
 * Custom event that allow to subscribe handlers to it and call them
 * @constructor
 */
var CustomEvt = /** @class */ (function () {
    function CustomEvt() {
        this._handlers = [];
        // Indicates if event was ever triggered
        this._triggered = false;
    }
    /**
     * @callback eventHandler
     * @param {object} eventArgs - object passed on a call to trigger event
     */
    /**
     * Registers handler with event which will be called when trigger is called
     *
     * @param {eventHandler} handler - function to be called on trigger
     * @param {object} callContext - will be used as 'this' on eventHandler call if null current object will be used
     */
    CustomEvt.prototype.addHandler = function (handler, callContext) {
        this._handlers.push({ handler: handler, callContext: callContext });
    };
    /**
     * Unregisters handler from current event
     * If handler is undefined removes all handlers added so far
     * @param {eventHandler} handler - function that was previously added via addHandler
     */
    CustomEvt.prototype.removeHandler = function (handler) {
        if (handler === undefined) {
            this.removeAllHandlers();
            return;
        }
        var toRemove = this._handlers.findIndex(function (existing) { return existing.handler === handler; });
        if (toRemove === -1) {
            return;
        }
        this._handlers.splice(toRemove, 1);
    };
    /**
     * Indicates if event was ever triggered
     * @returns {boolean}
     */
    CustomEvt.prototype.getTriggered = function () {
        return this._triggered;
    };
    /**
     * Unregisters all the handlers from current event
     */
    CustomEvt.prototype.removeAllHandlers = function () {
        this._handlers = [];
    };
    /**
     * Calls every handler subscribed to event
     *
     * @param {object} eventArgs - object to be passed to called functions
     */
    CustomEvt.prototype.trigger = function (eventArgs) {
        for (var i = 0; i < this._handlers.length; i++) {
            var callContext = this._handlers[i].callContext || this;
            this._handlers[i].handler.call(callContext, eventArgs);
        }
        this._triggered = true;
    };
    /**
     * Same as trigger. But does nothing if trigger or triggerOnce was already called on that instance before
     * @param {object} eventArgs
     */
    CustomEvt.prototype.triggerOnce = function (eventArgs) {
        if (this._triggered) {
            return;
        }
        this.trigger(eventArgs);
    };
    return CustomEvt;
}());
/**
 * Wrapper over function that is used as a callback.
 * Allows to transfer context back (i.e. set value of 'this') to specified object.
 *
 * @param {Object} context
 * @param {function()} func
 */
function Callback(context, func) {
    this._context = context;
    this._func = func;
    this._isOneTime = false;
    this._called = false;
    this._timeout = null;
    this._timeoutCallback = null;
    this._canceledByTimeout = false;
    this._disabled = false;
    this._callInterval = null;
    this._callGateOpen = true;
    var thisRef = this;
    // Define here to ensure that same instance is returned on calls to getValue
    this._value = function () {
        if (thisRef._timeout) {
            clearTimeout(thisRef._timeout);
            thisRef._timeout = null;
            thisRef._timeoutCallback = null;
        }
        if (thisRef._canceledByTimeout || thisRef._disabled) {
            return undefined;
        }
        if (thisRef._isOneTime && thisRef._called) {
            return undefined;
        }
        thisRef._called = true;
        if (thisRef._callInterval != null) {
            if (thisRef._callGateOpen) {
                thisRef._callGateOpen = false;
                setTimeout(function () { thisRef._callGateOpen = true; }, thisRef._callInterval);
                return thisRef._func.apply(thisRef._context, arguments);
            }
            return undefined;
        }
        return thisRef._func.apply(thisRef._context, arguments);
    };
}
Callback.prototype = {
    /**
     * Instructs callback that original func should be called only once even if
     * callback is called multipe times
     *
     * @param {boolean} isOneTime
     */
    setOneTime: function (isOneTime) {
        this._isOneTime = isOneTime;
    },
    /**
     * Instructs callback that original func should be called no more than oncer per interval
     * Set interval to null to disable throttle
     * @param {(number|null)} interval
     */
    setThrottle: function (interval) {
        this._callInterval = interval;
    },
    /**
     * Sets timeout function that will be called if callback is not called within
     * specified amount of time. If timeout is reached function registered with callback
     * will not be called in case callback is activated after timeout.
     * Note: you cannot set timeout twice
     * Note: timeout will be automatically canceled on first callback activation
     * @param {number} ms
     * @param {function} onTimeout
     */
    setTimeout: function (onTimeout, ms) {
        if (this._timeout != null) {
            throw "Timeout cannot be changed";
        }
        this._timeoutCallback = onTimeout;
        var thisRef = this;
        this._timeout = setTimeout(function () {
            thisRef._timeout = null;
            if (thisRef._timeoutCallback && thisRef._disabled === false) {
                thisRef._canceledByTimeout = true;
                thisRef._timeoutCallback.apply(thisRef._context);
                thisRef._timeoutCallback = null;
            }
        }, ms);
    },
    /**
     * Disables this callback which means that when callback is called underlying function
     * will not be invoked
     * @param {boolean} disabled
     */
    setDisabled: function (disabled) {
        this._disabled = disabled;
    },
    /**
     * Gets callback function that should be used in place of original func
     *
     * @returns {function()}
     */
    getValue: function () {
        return this._value;
    }
};
/**
 * Represents log.
 * @typedef Log.Options
 * @prop {boolean} enableSendToServer - whether to send messages to server
 * @prop {("Info"|"Error"|"None")} level - log level.
 * - None: suppress log output
 * - Info: output info and error messages
 * - Error: output only error messages
 *
 * @class
 * @param {string} name - name of the logger. Will be prepended to all log messages
 * @param {Log.Options} options -
 */
var Log = /** @class */ (function () {
    function Log(_name, options) {
        this._name = _name;
        this._enableSendToServer = options.enableSendToServer ? true : false;
        this._level = options.level || "Info";
    }
    Log.prototype.getName = function () { return this._name; };
    Log.prototype.getLevel = function () { return this._level; };
    /**
     * Write info to log
     * @param {string} message
     */
    Log.prototype.info = function (message) {
        if (this._level !== "Info") {
            return;
        }
        this._writeLog(this._name + " [INFO]: " + message);
    };
    Log.prototype.dump = function (message, obj) {
        var _this = this;
        if (this._level !== "Info") {
            return;
        }
        this.info(message);
        // Limit max length of value to 100
        function limitMaxValLength(k, v) {
            if (v && typeof v === "string" && v.length > 100) {
                return v.substr(0, 100) + "...";
            }
            return v;
        }
        this._groupOutput(function () {
            _this._writeLog(JSON.stringify(obj, limitMaxValLength, 4));
        });
    };
    /**
     * Writes error to log
     * @param {string} message - message to write
     */
    Log.prototype.error = function (message) {
        if (this._level !== "Info" && this._level !== "Error") {
            return;
        }
        this._writeError(this._name + " [ERROR]: " + message);
    };
    Log.prototype._groupOutput = function (outputProducingAction) {
        if (console.group) {
            console.group();
            outputProducingAction();
            console.groupEnd();
        }
        else {
            outputProducingAction();
        }
    };
    Log.prototype._writeError = function (message) {
        if (console.error) {
            console.error(message);
        }
        else {
            console.log(message);
            if (console.trace) {
                console.trace();
            }
        }
        if (this._enableSendToServer) {
            this._sendToServer(message);
        }
    };
    Log.prototype._writeLog = function (message) {
        console.log(message);
        if (this._enableSendToServer) {
            this._sendToServer(message);
        }
    };
    Log.prototype._sendToServer = function (message) {
        var baseUrl = "//infinity.pub.com/log.aspx?msg=";
        var request = new XMLHttpRequest();
        request.open("POST", baseUrl + encodeURIComponent(message));
        request.send("");
    };
    return Log;
}());
/**
 * Component that allows to organize waterfall invokation of async operations.
 * Where next operation is invoked only when previous async operation has failed.
 * Waterfall stops when at least one async opperation succeeds
 * @class
 */
var AsyncWaterfall = function () {
    this._actions = [];
    this._onActionFailedEvent = new CustomEvt();
    this._disposed = false;
    this._activePromiseReject = null;
};
AsyncWaterfall.prototype = {
    /**
     * Registers action to run on waterfall. Note: actions are invoked in order that
     * they were added
     * @param {function} action - function that when called returns promise
     */
    addAction: function (action) {
        this._actions.push(action);
    },
    /**
     * Invoked each time when async operation fails. Passed with result of rejection
     * from async operation
     * @param {function} handler
     */
    onActionFailed: function (handler) {
        this._onActionFailedEvent.addHandler(handler);
    },
    /**
    * Returns promise that is resolved when any of the actions registered
    * is resolved and rejected when all the actions fail or waterfall is aborted by call
    * to dispose. In later case rejection callback will be passed with "Aborted" string
    * @param {Promise[]} promises
    * @returns {Promise}
    */
    run: function () {
        if (this._disposed) {
            return Promise.reject("Aborted");
        }
        if (this._actions.length === 0) {
            return Promise.reject();
        }
        var thisRef = this;
        function createNext(idx) {
            return function (err) {
                if (thisRef._disposed) {
                    // Stop further actions from running by resolving
                    // current action
                    return Promise.resolve();
                }
                thisRef._onActionFailedEvent.trigger(err);
                return thisRef._actions[idx]();
            };
        }
        return new Promise(function (resolve, reject) {
            thisRef._activePromiseReject = reject;
            var prev = null;
            for (var i = 0; i < thisRef._actions.length; i++) {
                if (prev == null) {
                    prev = thisRef._actions[i]();
                }
                else {
                    // Since i is modifiable inside loop need to user wrapper
                    // to make a copy that is safe for closure
                    var next = createNext(i);
                    // Set to load ad if previous ad load fails
                    prev = prev.catch(next);
                }
            }
            prev.then(
            // If any of the ads were loaded
            function (arg) {
                thisRef._activePromiseReject = null;
                if (!thisRef._disposed) {
                    resolve(arg);
                }
            }, 
            // If all ads failed to load
            function (err) {
                thisRef._activePromiseReject = null;
                if (!thisRef._disposed) {
                    thisRef._onActionFailedEvent.trigger(err);
                    reject();
                }
            });
        });
    },
    /**
     * Disposes waterfall making it stop running next actions after
     * current action finishes. Also stops propagation of any events
     */
    dispose: function () {
        this._disposed = true;
        // Reject promises waiting for waterfall to run
        if (this._activePromiseReject) {
            this._activePromiseReject("Aborted");
            this._activePromiseReject = null;
        }
        this._onActionFailedEvent.removeAllHandlers();
    }
};
/**
 * Represents Uri component
 * @param {string} source
 */
var Uri = function (source) {
    this._source = source;
};
Uri.prototype = {
    toSchemaless: function () {
        if (this._source[0] === "/") {
            return this._source;
        }
        var start = this._source.indexOf("/");
        if (start === 0 || start === -1) {
            return this._source;
        }
        return this._source.substring(start);
    }
};
/**
 * Represents object built by merge of set of other objects
 * Objects to be merged into composite has to be be passed as
 * arguments to constructor. In case when two object have properties
 * with same name the last object passed is given priority
 */
var CompositeObject = function () {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
    }
    var thisRef = this;
    function copyProperties(properties) {
        for (var property in properties) {
            if (properties.hasOwnProperty(property)) {
                thisRef[property] = properties[property];
            }
        }
    }
    args.forEach(copyProperties);
};
/**
 * Wrapper over DOMElement that provides some not existing but commonly used functionality
 * and implements cross browser operatons
 */
var ElementEx = function (element) {
    this._element = element;
    this.raw = this._element;
};
ElementEx.prototype = {
    setAnimation: function (animation) {
        this._element.style["-webkit-transition"] = animation;
        this._element.style["-moz-transition"] = animation;
        this._element.style["-o-transition"] = animation;
        this._element.style["transition"] = animation;
    },
    _getTransitionEndEventName: function () {
        var transitionStyleToEventNameMap = {
            'transition': 'transitionend',
            '-webkit-transition': 'webkitTransitionEnd',
            '-moz-transition': 'transitionend',
            '-o-transition': 'otransitionend'
        };
        var element = document.createElement('iframe');
        for (var styleName in transitionStyleToEventNameMap) {
            if (typeof (element.style[styleName]) !== "undefined") {
                return transitionStyleToEventNameMap[styleName];
            }
        }
        return null;
    },
    /**
     * Awaits for property animation to finish. Timeout is provided to support cases
     * where browser does not support animation end reporting
     * @param {string} property
     * @param {number} timeout in ms
     * @param {function} callback
     */
    onceAnimationEnd: function (property, timeout, callback) {
        var eventName = this._getTransitionEndEventName();
        if (eventName == null) {
            // Browser does not support css transition end notification, fallback to less reliable wait for animation to complete
            setTimeout(callback, timeout);
        }
        else {
            var thisRef = this;
            var handler = function (evt) {
                // Since event is called for each property we need to notify only for the one we interested in
                if (evt.propertyName === property && evt.target == thisRef._element) {
                    callback();
                    thisRef.off(eventName, handler);
                }
            };
            this.on(eventName, handler);
        }
    },
    triggerClick: function () {
        var evt = document.createEvent("MouseEvents");
        evt.initMouseEvent("click", true, false, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);
        this._element.dispatchEvent(evt);
    },
    setLeftPx: function (left) {
        this._element.style.left = left + "px";
    },
    setTopPx: function (top) {
        this._element.style.top = top + "px";
    },
    setWidthPx: function (width) {
        this._element.style.width = width + 'px';
    },
    getLeftPx: function () {
        if (typeof (this._element.style.left) === "undefined" || this._element.style.left == null) {
            return null;
        }
        return this._element.style.left.replace("px", "");
    },
    getTopPx: function () {
        if (typeof (this._element.style.top) === "undefined" || this._element.style.top == null) {
            return null;
        }
        return this._element.style.top.replace("px", "");
    },
    getWidthPx: function () {
        if (typeof (this._element.style.width) === "undefined" || this._element.style.width == null) {
            return null;
        }
        return this._element.style.width.replace("px", "");
    },
    getHeightPx: function () {
        if (typeof (this._element.style.height) === "undefined" || this._element.style.height == null) {
            return null;
        }
        return this._element.style.height.replace("px", "");
    },
    setHeightPx: function (height) {
        this._element.style.height = height + 'px';
    },
    hide: function () {
        this._element.style.display = 'none';
    },
    on: function (event, handler, useCapture) {
        if (this._element.addEventListener) {
            this._element.addEventListener(event, handler, useCapture);
        }
        else if (this._element.attachEvent) {
            this._element.attachEvent("on" + event, handler);
        }
        else {
            throw 'Cannot add event. Browser is not supported';
        }
    },
    off: function (event, handler) {
        if (this._element.removeEventListener) {
            this._element.removeEventListener(event, handler);
        }
        else if (this._element.detachEvent) {
            this._element.detachEvent("on" + event, handler);
        }
        else {
            throw 'Cannot remove event. Browser is not supported';
        }
    }
};
/**
 * Wrapper DOMDocumentElement that provides some not existing but commonly used functionality
 * @param {any} document
 */
var DocumentEx = function (document) {
    this._document = document;
};
DocumentEx.prototype = {
    insertStyle: function (cssString) {
        var style = this._document.createElement('style');
        style.type = 'text/css';
        style.innerHTML = cssString;
        var head = this._document.querySelector('head');
        head.appendChild(style);
    }
};
/**
 * Value with a set of fallback values.
 * In case value is null or undefined first non null or undefined fallback
 * value is resolved
 */
var ValueWithFallback = /** @class */ (function () {
    function ValueWithFallback(_value) {
        var fallbackValues = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            fallbackValues[_i - 1] = arguments[_i];
        }
        this._value = _value;
        this._fallbackValues = [];
        if (fallbackValues != null) {
            this._fallbackValues = fallbackValues;
        }
    }
    ValueWithFallback.prototype.addFallback = function (fallback) {
        this._fallbackValues.push(fallback);
    };
    ValueWithFallback.prototype.resolve = function () {
        return this._value == null ? this._fallbackValues.find(function (v) { return v != null; }) : this._value;
    };
    return ValueWithFallback;
}());
/**
 * Extension functions for HTMLMediaElement
 */
var HTMLMediaElementEx = /** @class */ (function () {
    function HTMLMediaElementEx() {
    }
    HTMLMediaElementEx.isPlaying = function (el) {
        return el.currentTime > 0 && !el.paused && !el.ended;
    };
    return HTMLMediaElementEx;
}());
/**
 * Extension functions for HTMLElement
 */
var HTMLElementEx = /** @class */ (function () {
    function HTMLElementEx() {
    }
    HTMLElementEx.isChildOf = function (thisEl, otherEl) {
        var current = thisEl;
        while (current != null) {
            if (current === otherEl) {
                return true;
            }
            current = current.parentElement;
        }
        return false;
    };
    return HTMLElementEx;
}());
//# sourceMappingURL=hidden.common.js.map
		/**
 * Represents set of client side url transforms
 * @typedef UrlTransforms.Options
 * @prop {string} DFPImpressionUrl
 * @prop {string} InfinityHost
 * @prop {boolean} IsAdblockRequest
 * @prop {boolean} EncodeUrl
 * @prop {string} PassParams
 *
 * @param {UrlTransforms.Options} options
 * @param {any} lotame
 */
var UrlTransforms = function (options, lotame) {
	this._options = options;
	this._lotame = lotame;
};

UrlTransforms.prototype = {
	trackingResponseBuilderTransform: function (urlPath) {
		return this._options.DFPImpressionUrl + this._options.InfinityHost + urlPath;
	},

	redirectResponseBuilderTransform: function (rUrl, media, hosted) {
		var infinityHost = this._getRedirectHostUrl(media);
		if (media.Redirect == 1) {
			infinityHost = infinityHost.replace("http://", "https://");
		}

		var redirectUrl;
		var mediaSettings = typeof (media.MediaSettings) != "undefined" ? media.MediaSettings : media.Settings;
		if (this._options.IsAdblockRequest) {
			redirectUrl =
				"/" + (media.MediaSegmentId ? media.MediaSegmentId : "null") // MediaSegmentId, has to be passed in url, not stored in mongo
				+ "/" + (media.TempMediaId ? media.TempMediaId : "null") // TempMediaId
				+ "/" + (media.PassBackId ? media.PassBackId : "null") // PassBackId
				+ "/" + (media.DataContextId ? media.DataContextId : "null") // DataContextId
				+ "/" + (media.VolumeMetricId ? media.VolumeMetricId : "null") // Volume Metric Id
				+ "/" + (this._options.IsAdblockRequest)
				+ "/" + screen.width + "x" + screen.height
				+ "/" + (media.TimeZoneOffset ? media.TimeZoneOffset : "null") // TimeZone offset
				+ "/" + (typeof media.IsDSTActive != 'undefined' && media.IsDSTActive != null ? media.IsDSTActive : "null") // Is Daylight saving time active
				+ "/null" // tempmedia
				+ (media.MediaType == "PopUnder" ? "/SelectedPopTypePlaceholder" : "/null") // a placeholder for SelectedPopType that is added later in BasePopunder.buildUrl
				+ "/" + (encodeURIComponent(this._options.GetKeywords()) ? encodeURIComponent(this._options.GetKeywords()) : "null") // Meta keywords
				+ "/" + mediaSettings.Width
				+ "/" + mediaSettings.Height
				+ "/" + "Redirect.a2b";
		} else {
			redirectUrl = rUrl +
				"&abr=" + this._options.IsAdblockRequest +
				"&res=" + screen.width + "x" + screen.height;
		}

		if (hosted === true && mediaSettings.Width < 1024) {
			if (this._options.DFPImpressionUrl != undefined && this._options.DFPImpressionUrl != "") {
				var bridgeRedirect = "/Bridge/Index?width=" + mediaSettings.Width
					+ "&height=" + mediaSettings.Height
					+ "&url=" + encodeURIComponent(redirectUrl);
				return this._options.DFPImpressionUrl + infinityHost + bridgeRedirect;
			} else {
				var bridgeRedirect = "/Bridge/Index?width=" + mediaSettings.Width
					+ "&height=" + mediaSettings.Height
					+ "&url=" + encodeURIComponent(redirectUrl);
				return infinityHost + bridgeRedirect;
			}
		}

		if (media.MediaType === "Link"
			&& mediaSettings["PassParams"] === true
			&& this._options.PassParams.length > 0) {
			var newRedirectUrl = redirectUrl + "&" + this._options.PassParams;
			if (newRedirectUrl.length <= 2048)
				redirectUrl = newRedirectUrl;
			redirectUrl = this._options.DFPImpressionUrl + redirectUrl;
		}

		if (media.MediaType === "Link" && (media.MediaSourceType == Enums.MediaSourceType.Video || media.MediaSourceType == Enums.MediaSourceType.VideoTag)) {
			redirectUrl = "/Bridge/Index?width=" + mediaSettings.Width
				+ "&height=" + mediaSettings.Height
				+ "&url=" + encodeURIComponent(redirectUrl);
		}

		// Record impressions
		if (this._lotame) {
			this._lotame.PlaceImpressionPixel(media);
		}

		if (this._options.EncodeUrl !== undefined && this._options.EncodeUrl) {
			infinityHost = infinityHost.replace("https://", "").replace("http://", "").replace("//", "");
			return this._options.DFPImpressionUrl + "//" + window.getUri(infinityHost + redirectUrl);
		}
		return this._options.DFPImpressionUrl + infinityHost + redirectUrl;
	},

	_getRedirectHostUrl: function (media) {
		var redirectHostUrl = !this._options.IsAdblockRequest && media != null && media.RedirectHostUrl != null
			? media.RedirectHostUrl
			: this._options.InfinityHost;

		return redirectHostUrl;
	}
};
		var AdItemExtensions = function(zoneResult, urlTransforms, engineHost, clientInfo, createTestClickUrl) {
	this._zoneResult = zoneResult;
	this._urlTransforms = urlTransforms;
	this._engineHost = engineHost;
	this._clientInfo = clientInfo;
	this._createTestClickUrl = createTestClickUrl;

	var apply = this._apply.bind(this);
	zoneResult.AdItems.forEach(apply);
};

AdItemExtensions.prototype = {
	getAdUrl: function(adItem) {
		function extend(obj, properties) {
			for (var property in properties) {
				if (properties.hasOwnProperty(property)) {
					obj[property] = properties[property];
				}
			}
			return obj;
		}

		if (adItem.RedirectUrlTransform) {
			// In RichMediaRequest we had all media and zone specific data included as properties of object passed
			// to FetchMediaUrl with SiteTagZoneResult we separated zone data from media data to allow multiple medias
			// for the cases where only single media can be selected we can just merge zone and media data to get 
			// object that looks like RichMediaRequest
			var media = extend(extend({}, this._zoneResult), adItem);

			if (typeof this._urlTransforms[adItem.RedirectUrlTransform] === "function") {
				return this._urlTransforms[adItem.RedirectUrlTransform](adItem.RedirectUrl, media, false);
			}
		}

		return adItem.RedirectUrl;
	},

	getClickTrackingUrl: function(adItem) {
		if (this._createTestClickUrl) {
			return this._createTestClickUrl(adItem);
		}

		var parameters = [
			"rand=" + Math.floor(89999999 * Math.random() + 10000000),
			"res=" + this._clientInfo.getScreenWidth() + "x" + this._clientInfo.getScreenHeight(),
			"dcid=" + (this._zoneResult.DataContextId ? this._zoneResult.DataContextId : ""),
			"v=" + adItem.VolumeMetric 
		];
		return this._engineHost + "/clicktag.engine?" + parameters.join("&");
	},

	_apply: function(adItem) {
		var thisRef = this;
		for (var propName in AdItemExtensions.prototype) {
			if (propName === "apply") {
				continue;
			}

			if (typeof adItem[propName] !== "undefined") {
				throw "Cannot extend ad item as member named '" + propName + "' is already defined";
			}

			// Wrap in a function to make a copy of variable for closure
			(function(propNameCopy) {
				adItem[propNameCopy] = function() {
					// Insert ad item to be the first arg before the other arguments
					var args = [].slice.call(arguments);
					args.splice(0, 0, this);
					return thisRef[propNameCopy].apply(thisRef, args);
				}
			})(propName);
		}
	}
};

		ns.UrlTransforms = UrlTransforms;
		ns.AdItemExtensions = AdItemExtensions;

		function createObjectWithPrototype(proto) {
			if (typeof proto !== 'object' && typeof proto !== 'function') {
				throw new TypeError('Object prototype may only be an Object: ' + proto);
			}

			if (typeof Object.create !== "function") {
				function F() { }
				F.prototype = proto;
				return new F();
			}

			return Object.create(proto);
		}

		function inherit(child, parent) {
			child.prototype = createObjectWithPrototype(parent.prototype);
			child.prototype.constructor = child;
		}

		// Provides information about client browser, device, os etc.
		ns.Client = function () {
			var uaParser = g367CB268B1094004A3689751E7AC568F.UaParser;
			this._userAgent = uaParser.getUA();
			this._os = uaParser.getOS();
			this._browser = uaParser.getBrowser();
		};
		ns.Client.prototype = {
			isFacebookApp: function () {
				return this._userAgent.indexOf("FBAN/FBIOS") > -1 ||
					this._userAgent.indexOf("FB_IAB/FB4A") > -1 ||
					this._userAgent.indexOf("FBAV") > -1;
			},
			isMacOS: function () { return this._os.name === "Mac OS"; },
			/**
			 * True if client is using chrome
			 * @returns {boolean} 
			 */
			isChromeBrowser: function () { return _browser.current.name === 'Chrome'; },
			/**
			 * Gets major version of client browser
			 * @returns {number}
			 */
			getBrowserMajorVersion: function () { return parseInt(browser.major); }
		};

		ns.PopWindow = function () {
			this._url = 'about:blank';
			this._successCallback = null;
			this._x = 0;
			this._y = 0;
			this._width = 1;
			this._height = 1;
			this._topWin = g367CB268B1094004A3689751E7AC568F._Top;
			this._topDoc = this._topWin.document;
		};

		ns.PopWindow.prototype = {
			getEventType: function () {
				return 'click';
			},
			// Indicates if current window type respects size set via setSize
			// For example tab windows do not respect size
			getRespectsSize: function () {
				return true;
			},
			// Indicates if current window type supported for client
			isSupported: function (client) {
				return true;
			},
			// Indicates if window can be shown on @event
			canShow: function (event) {
				return true;
			},
			setOnSuccessCallback: function (callback) {
				this._successCallback = callback;
			},
			setUrl: function (url) {
				throw 'Call is not permitted on abstract PopWindow class';
			},
			setLocation: function (x, y) {
				this._x = x;
				this._y = y;
			},
			setSize: function (width, height) {
				this._width = width;
				this._height = height;
			},
			getCompatibleDisplayTargetingType: function () {
				return null;
			},
			show: function (event) {
				throw 'Call is not permitted on abstract PopWindow class';
			},
			getTypeName: function () {
				throw 'Call is not permitted on abstract PopWindow class';
			},
			_getRandomName: function () {
				// Converting to string because exist publisher site with scripts overwriting window.open 
				// and expecting win name to be a string (i.e.failing if it is a number)
				return (Math.floor((Math.random() * 1000) + 1)).toString();
			},
			_getWinOptions: function () {
				return 'directories=0,toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1' +
					',width=' + this._width +
					',height=' + this._height +
					',screenX=' + this._x +
					',screenY=' + this._y +
					'index=0,total=1';
			}
		};

		ns.PopUnderViaPostMessage = function () {
			ns.PopWindow.call(this);

			this._messageNamespace = Math.random().toString();
			this._initialized = false;
			try {
				var thisRef = this;
				window.addEventListener("message",
					function (arg) {
						thisRef._handleMessage(arg);
					});
				this._initialized = true;
			} catch (e) { }
		};
		inherit(ns.PopUnderViaPostMessage, ns.PopWindow);

		ns.PopUnderViaPostMessage.prototype.getEventType = function () {
			return 'mousedown';
		};

		ns.PopUnderViaPostMessage.prototype.isSupported = function (client) {
			return this._initialized && client.isChromeBrowser() && client.getBrowserMajorVersion() >= 64;
		};

		ns.PopUnderViaPostMessage.prototype.setUrl = function (url) {
			this._url = ns.BasePopunder.buildUrl(url, ns.Enums.SelectedPopType.PopUnder);
		};

		ns.PopUnderViaPostMessage.prototype.getCompatibleDisplayTargetingType = function () {
			return g367CB268B1094004A3689751E7AC568F.Enums.PopUnderDisplayTargetingType.Standard;
		};

		ns.PopUnderViaPostMessage.prototype.getTypeName = function () {
			return "PopUnderViaPostMessage";
		};

		ns.PopUnderViaPostMessage.prototype._handleMessage = function (evt) {
			if (evt.data.indexOf(this._messageNamespace) !== 0 || evt.origin !== window.location.origin) {
				return;
			}

			// +1 is for point between namespace name and operation name
			var operation = evt.data.substr(this._messageNamespace.length + 1);

			if (operation === 'pop') {
				this._openPop();
			}

			if (operation === 'stub') {
				this._openStub();
			}
		};

		ns.PopUnderViaPostMessage.prototype._openPop = function () {
			var name = this._getRandomName();
			var options = this._getWinOptions();
			window.open(this._url, name, options);

			if (this._successCallback) {
				this._successCallback();
			}
		};

		ns.PopUnderViaPostMessage.prototype._openStub = function () {
			var win = window.open('about:blank', '_blank', '');
			win.close();
		};

		ns.PopUnderViaPostMessage.prototype.show = function () {
			window.postMessage(this._messageNamespace + '.pop', window.location.origin);
			window.postMessage(this._messageNamespace + '.stub', window.location.origin);
		};

		ns.DelayedPopUnder = function (options) {
			ns.PopWindow.call(this);
			this._waitSecondsToLoadMedia = options.waitSecondsToLoadMedia;
			this._waitForParentToClose = options.waitForParentToClose != null ? options.waitForParentToClose : true;
			this._waitForParentToFocus = options.waitForParentToFocus != null ? options.waitForParentToFocus : true;
		};
		inherit(ns.DelayedPopUnder, ns.PopWindow);

		ns.DelayedPopUnder.prototype.setUrl = function (url) {
			this._url = ns.BasePopunder.buildUrl(url, ns.Enums.SelectedPopType.PopUnder);
		};

		ns.DelayedPopUnder.prototype.isSupported = function (client) {
			return true;
		},

			ns.DelayedPopUnder.prototype._getHiddenWindowOptions = function () {
				return 'directories=0,toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1' +
					',width=1,height=1,screenX=19999,screenY=19999';
			};
		ns.DelayedPopUnder.prototype._getHiddenPopHtml = function () {
			var client = new ns.Client();
			var heightAdjustment = client.isMacOS() ? -70 : 0;
			var showPopFunction =
				"function showUpPop(){" +
				"setTimeout(function(){" +
				"var popWidth = " + this._width + " + window.outerWidth - window.innerWidth;" +
				"var popHeight = " + this._height + " + window.outerHeight + " + heightAdjustment + ";" +
				"window.moveTo(" + this._x + ", " + this._y + ");" +
				"window.resizeTo(popWidth, popHeight);" +
				"document.location.replace('" + this._url + "');" +
				"}, " + this._waitSecondsToLoadMedia * 1000 + ");" +
				"}";

			var hiddenPopHtml =
				"<!DOCTYPE HTML>" +
				"<html>" +
				"<head>" +
				"<scri" + "pt> (function() { window.resizeTo(0, 0 ); window.moveTo(9999, 9999); })(); </scr" + "ipt>" +
				"<scr" + "ipt>" +
				"window.openerExists = function(){" +
				"return window.opener != null;" +
				"};" +
				"window.openerHasFocus = function(){" +
				"return window.opener " +
				"&& window.opener.document " +
				"&& window.opener.document.hasFocus " +
				"&& window.opener.document.hasFocus(); };" +
				"window.isExpanded = function() { return window.outerWidth > 200 && window.outerHeight > 100; }; " +
				showPopFunction +
				(this._waitForParentToClose || this._waitForParentToFocus ?
					"var poll = setInterval(function(){" +
					"if (window.isExpanded() || " + this._waitForParentToClose.toString() + " && !window.openerExists() || " + this._waitForParentToFocus.toString() + " && window.openerHasFocus()){" +
					"clearInterval(poll);" +
					"showUpPop();" +
					"}" +
					"}, 200);"
					: "showUpPop();") +
				"</scr" + "ipt>" +
				"</head>" +
				"<body></body>" +
				"</html>"
			return hiddenPopHtml;
		};
		ns.DelayedPopUnder.prototype.show = function (event) {
			g367CB268B1094004A3689751E7AC568F.WinUtil.openWithContent(
				this._getHiddenPopHtml(),
				this._getRandomName(),
				this._getHiddenWindowOptions());

			if (this._successCallback) {
				this._successCallback();
			}
		};

		ns.DelayedPopUnder.prototype.getCompatibleDisplayTargetingType = function () {
			return g367CB268B1094004A3689751E7AC568F.Enums.PopUnderDisplayTargetingType.Standard;
		};

		ns.DelayedPopUnder.prototype.getTypeName = function () {
			return "DelayedPopUnder";
		};

		ns.PopOver = function () {
			ns.PopWindow.call(this);
		};
		inherit(ns.PopOver, ns.PopWindow);

		ns.PopOver.prototype.setUrl = function (url) {
			this._url = ns.BasePopunder.buildUrl(url, ns.Enums.SelectedPopType.PopOver);
		};

		ns.PopOver.prototype.show = function () {
			var name = this._getRandomName();
			var options = this._getWinOptions();
			window.open(this._url, name, options);

			if (this._successCallback) {
				this._successCallback();
			}
		};

		ns.PopOver.prototype.getCompatibleDisplayTargetingType = function () {
			return g367CB268B1094004A3689751E7AC568F.Enums.PopUnderDisplayTargetingType.Standard;
		};

		ns.PopOver.prototype.getTypeName = function () {
			return "PopOver";
		};

		// Same Tab window which is to be opened by @externalShowFunc
		ns.ExternalSameTab = function (externalShowFunc) {
			if (typeof externalShowFunc !== "function") {
				throw 'Argument is invalid. Function expected';
			}

			ns.PopWindow.call(this);
			this._externalShowFunc = externalShowFunc;
		};
		inherit(ns.ExternalSameTab, ns.PopWindow);

		ns.ExternalSameTab.prototype.setUrl = function (url) {
			this._url = ns.BasePopunder.buildUrl(url, ns.Enums.SelectedPopType.TabUnder);
		},

			ns.ExternalSameTab.prototype.getRespectsSize = function () { return false; };
		ns.ExternalSameTab.prototype.isSupported = function (client) { return !client.isFacebookApp(); };
		ns.ExternalSameTab.prototype.show = function (event) {
			this._externalShowFunc(event);
			if (this._successCallback) {
				this._successCallback();
			}
		};

		ns.ExternalSameTab.prototype.getCompatibleDisplayTargetingType = function () {
			return g367CB268B1094004A3689751E7AC568F.Enums.PopUnderDisplayTargetingType.Tab;
		};

		ns.ExternalSameTab.prototype.getTypeName = function () {
			return "ExternalSameTab";
		};

		// Represents Same Tab window which in case of link click, open ad
		// in the same tab, and the clicked href in new tab with focus on it.
		// Also supports opening on click anywhere not just on link
		// Options:
		//  - clickAnywhere. If true canShow will be true for all cliks not just link clicks
		ns.SameTab = function (options) {
			ns.PopWindow.call(this);
			this._clickAnywhere = options.clickAnywhere;
		};
		inherit(ns.SameTab, ns.PopWindow);

		ns.SameTab.prototype.setUrl = function (url) {
			this._url = ns.BasePopunder.buildUrl(url, ns.Enums.SelectedPopType.TabUnder);
		},

			ns.SameTab.prototype.getRespectsSize = function () { return false; };
		ns.SameTab.prototype.isSupported = function (client) { return !client.isFacebookApp(); };

		ns.SameTab.prototype.canShow = function (event) {
			if (this._clickAnywhere) {
				return true;
			}
			var link = event.target || event.srcElement;
			if (link.tagName.toLowerCase() !== "a") {
				link = g367CB268B1094004A3689751E7AC568F.GetParentLink(link);
			}
			return link.tagName.toLowerCase() === "a" && this._extractUrl(link) != null;
		};

		ns.SameTab.prototype._extractUrl = function (linkElement) {
			var reg = /#$/;
			var href = linkElement.getAttribute("href");
			if (href.lastIndexOf("javascript:", 0) !== 0 && href !== "#") {
				var result = linkElement.href.replace(reg, "");
				if (result.length == 0) {
					return null;
				}

				return result;
			}

			return null;
		};

		ns.SameTab.prototype._targetBlankTriggered = function (useSession) {
			var storageName = "InfSTATargetBlank";
			useSession = !!useSession;
			return useSession
				? g367CB268B1094004A3689751E7AC568F.Storage.SetSessionStorage(storageName, "true")
				: g367CB268B1094004A3689751E7AC568F.Storage.SetLocalStorage(storageName, "true");
		};

		ns.SameTab.prototype._isTargetBlankTriggered = function (useSession) {
			var storageName = "InfSTATargetBlank";
			useSession = !!useSession;
			return useSession
				? g367CB268B1094004A3689751E7AC568F.Storage.GetSessionStorage(storageName)
				: g367CB268B1094004A3689751E7AC568F.Storage.GetLocalStorage(storageName);
		};

		ns.SameTab.prototype._resetTargetBlankTrigger = function (useSession) {
			var storageName = "InfSTATargetBlank";
			useSession = !!useSession;
			return useSession
				? g367CB268B1094004A3689751E7AC568F.Storage.DeleteSessionStorage(storageName)
				: g367CB268B1094004A3689751E7AC568F.Storage.DeleteLocalStorage(storageName);
		}

		ns.SameTab.prototype._getUrlToReOpen = function (clickedElement, currentUrl) {
			if (clickedElement.tagName.toLowerCase() === "a") {
				if (clickedElement.getAttribute("target") === "_blank" &&
					this._isTargetBlankTriggered() !== "true") {
					this._targetBlankTriggered();
					return currentUrl;
				} else {
					var url = this._extractUrl(clickedElement);
					this._resetTargetBlankTrigger();
					if (url == null) {
						return this._topDoc.location.href;
					}
					return url;
				}
			}

			return this._topDoc.location.href;
		};

		ns.SameTab.prototype.show = function (event) {
			if (!this.canShow(event)) {
				throw 'Attempt to show window that cannot be shown for current event';
			}

			event.preventDefault();

			var currentUrl = this._topDoc.location.href;
			g367CB268B1094004A3689751E7AC568F.TabHistoryRecorder(currentUrl,
				g367CB268B1094004A3689751E7AC568F.TabHistoryStorageName);

			var name = 'inftabwindow_' + this._getRandomName();
			var win;
			var link = event.target || event.srcElement;
			if (link.tagName.toLowerCase() !== "a") {
				link = g367CB268B1094004A3689751E7AC568F.GetParentLink(link);
			}
			var urlToReOpen = this._getUrlToReOpen(link, currentUrl);
			try {
				win = window.open(currentUrl, name);
				win.history.replaceState({ previous: currentUrl }, null, currentUrl);
				win.onpageshow = function (e) {
					if (e.persisted) {
						win.location.reload();
					}
				};
				win.addEventListener("popstate", function (e) { win.location = e.state.previous; });
				win.location = urlToReOpen;
			} catch (err) {
				win = window.open(urlToReOpen, name);
			}
			win.focus();
			link.setAttribute("data-tabunder", true);

			// Call success before loading ad because ad is loaded into current window
			if (this._successCallback) {
				this._successCallback();
			}
			this._topWin.location.href = this._url;
		};

		ns.SameTab.prototype.getCompatibleDisplayTargetingType = function () {
			return g367CB268B1094004A3689751E7AC568F.Enums.PopUnderDisplayTargetingType.Tab;
		};

		ns.SameTab.prototype.getTypeName = function () {
			return "SameTab";
		};

		ns.TabOver = function () {
			ns.PopWindow.call(this);
		};
		inherit(ns.TabOver, ns.PopWindow);

		ns.TabOver.prototype.setUrl = function (url) {
			this._url = ns.BasePopunder.buildUrl(url, ns.Enums.SelectedPopType.TabOver);
		},

			ns.TabOver.prototype.getRespectsSize = function () { return false; };

		ns.TabOver.prototype.show = function () {
			var link = this._topDoc.createElement('a');
			link.setAttribute("data-tabunder", true);
			link.href = this._url;
			link.target = 'inftabwindow_' + this._getRandomName();
			this._topDoc.body.appendChild(link);

			// We call success before click because since tab over is created 
			// on click we don't want to trigger another tab over creation
			// So yeah we have a hidden dependency here on how successCallback behaves
			// which we should get rid off when have time
			if (this._successCallback) {
				this._successCallback();
			}

			var clickEvent = this._topDoc.createEvent('MouseEvents');
			clickEvent.initMouseEvent('click', true, true, this._topWin, 0, 0, 0, 0, 0, true, false, false, true, 0, null);
			link.dispatchEvent(clickEvent);
		};

		ns.TabOver.prototype.getCompatibleDisplayTargetingType = function () {
			return g367CB268B1094004A3689751E7AC568F.Enums.PopUnderDisplayTargetingType.Tab;
		};

		ns.TabOver.prototype.getTypeName = function () {
			return "TabOver";
		};

		ns.RandomEnumerator = function (elements) {
			this._elements = elements.slice();
		};
		ns.RandomEnumerator.prototype = {
			popNext: function () {
				if (this._elements.length === 0) {
					return undefined;
				}

				var idx = this._elements.length === 1 ? 0 : this._getRandomInt(0, this._elements.length);
				var result = this._elements[idx];
				this._elements.splice(idx, 1);
				return result;
			},
			//The maximum is exclusive and the minimum is inclusive
			_getRandomInt: function (min, max) {
				min = Math.ceil(min);
				max = Math.floor(max);
				return Math.floor(Math.random() * (max - min)) + min;
			}
		};

		// Window utilities
		ns.WinUtil = {
			openWithContent: function (content, name, winConfig) {
				var win = window.open("about:blank", name, winConfig);
				if (win == null) {
					return null;
				}

				var doc = win.document;
				doc.open();
				doc.writeln(content);
				doc.close();
				return win;
			}
		};

	})(g367CB268B1094004A3689751E7AC568F);

	g367CB268B1094004A3689751E7AC568F._ocvIFrameId = 0;
	// TODO: Reporting component, VolumeTrackingEvent, AdFillTrackingEvent and TrackingResponseBuilderRequest components
	// are left for first time deployment. Remove after deploy to all instances
	g367CB268B1094004A3689751E7AC568F.Reporting = function (host, uaParser, isAdblockRequest, dataContext) {
		this._host = host;
		this._browser = uaParser.getBrowser();
		this._isAdblockRequest = isAdblockRequest;
		this._dataContext = dataContext;
	};

	g367CB268B1094004A3689751E7AC568F.Reporting.prototype = {
		Enums: g367CB268B1094004A3689751E7AC568F.Enums,

		// Asynchronously records vast tag loading statistic on server
		// Pre: @auctionResult is not null
		// 		is array of objects { adItem, tagLoadStats }
		// Pre: @auctionResult does not contain null elements
		// Pre: All @auctionResult.adItem have same dataContextId
		trackAuctionResult: function (auctionResult) {
			if (auctionResult == null || auctionResult.length === 0) {
				return;
			}

			var thisRef = this;
			var trackingEvents = auctionResult.map(function (adItemStats) {
				return thisRef._adItemToAdFillTrackingEvent(adItemStats.adItem, adItemStats.tagLoadStats);
			});
			var request = this._createTrackingResponseBuilderRequest(this.Enums.TrackingEventType.adFill);
			request.addTrackingEvents(trackingEvents);
			request.send();
		},

		_createTrackingResponseBuilderRequest: function (eventType) {
			var request = new g367CB268B1094004A3689751E7AC568F.TrackingResponseBuilderRequest(this._host,
				eventType,
				this._dataContext,
				this._browser,
				this._isAdblockRequest);
			return request;
		},

		_adItemToAdFillTrackingEvent: function (adItem, tagStats) {
			if (adItem == null || tagStats == null) {
				return null;
			}

			var fillCheckStatus =
				!tagStats.loaded ? this.Enums.AdFillCheckStatus.skipped :
					tagStats.success ? this.Enums.AdFillCheckStatus.success :
						this.Enums.AdFillCheckStatus.failed;
			// If check status is not success hasFill cannot be determined, hence null
			var hasFill = fillCheckStatus == this.Enums.AdFillCheckStatus.success ? !tagStats.empty : null;
			return new g367CB268B1094004A3689751E7AC568F.AdFillTrackingEvent(adItem.VolumeMetric, fillCheckStatus, hasFill);
		}
	};

	// @ad - not empty volume metric string.
	// @secondBid - volume metric of second bid. Can be null
	// @mediaSegment - id of media segment for infinity ads. Can be null
	g367CB268B1094004A3689751E7AC568F.VolumeTrackingEvent = function (ad, secondBid, mediaSegment) {
		this.v = ad;
		this.v2 = secondBid;
		this.ms = mediaSegment;
	}

	// @volumeMetric - not empty string.
	// @fillCheckStatus - status of ad fill check. Possible values are defined by Loader.Enums.AdFillCheckStatus object
	g367CB268B1094004A3689751E7AC568F.AdFillTrackingEvent = function (volumeMetric, fillCheckStatus, hasFill) {
		this.v = volumeMetric;
		this.s = fillCheckStatus;
		this.f = hasFill;
	};

	// @origin - not empty string. Origin hosting response builder
	// @eventType - type of event. Possible values are defined by Loader.Enums.TrackingEventType object
	// @dataContextId - not empty string. Id of current request data context
	// @browser - browser information
	// @useAdblockEndpoint - boolean indicating if request should be sent to adblock endpoint
	g367CB268B1094004A3689751E7AC568F.TrackingResponseBuilderRequest = function (origin, eventType, dataContextId, browser, useAdblockEndpoint) {
		var trackingEvents = [];

		function appendCacheBypassParam(url) {
			var rand = Math.floor(89999999 * Math.random() + 10000000);
			if (url.indexOf('?') == -1) {
				return url + '?_=' + rand;
			} else {
				return url + '&_=' + rand;
			}
		}

		function sendInGetRequest(trackingEvent) {
			var trackingPixel = document.createElement('img');
			// Set pixel attributes
			trackingPixel.setAttribute('width', '1');
			trackingPixel.setAttribute('height', '1');
			trackingPixel.setAttribute('position', 'absolute');
			trackingPixel.setAttribute('style', 'display: none;');
			trackingPixel.setAttribute('src', appendCacheBypassParam(createGetUrl(trackingEvent)));

			// Insert pixel
			var bodyTag = document.body;
			if (bodyTag) {
				bodyTag.insertBefore(trackingPixel, bodyTag.firstChild);
			}
		}

		function sendInPostRequest(trackingEvents) {
			var request = new XMLHttpRequest();
			request.open('POST', createPostUrl());
			request.setRequestHeader('Content-Type', 'application/json');
			request.onreadystatechange = function () {
				if (request.readyState === 4) {
					console.log('Tracking request ' + (request.status === 200 ? 'succeded' : 'failed'));
				}
			};
			request.send(JSON.stringify(trackingEvents));
		}

		function createGetUrl(trackingEvent) {
			// We do not support adblock endpoint for GET due to eventData being too big for one segment
			var eventData = encodeURIComponent(JSON.stringify(trackingEvent));
			return origin + "/track.eng" + '?evt=' + eventType + '&dcid=' + dataContextId + "&evtData=" + eventData;
		}

		function createPostUrl() {
			return useAdblockEndpoint ?
				origin + "/" + eventType + "/" + dataContextId + "/track.a2b" :
				origin + "/track.eng" + '?evt=' + eventType + '&dcid=' + dataContextId;
		}

		this.addTrackingEvents = function (trackingEvents) {
			if (trackingEvents == null) {
				throw 'Tracking events cannot be null';
			}

			for (var i = 0; i < trackingEvents.length; i++) {
				this.addTrackingEvent(trackingEvents[i]);
			}
		};
		this.addTrackingEvent = function (trackingEvent) {
			if (trackingEvent == null) {
				throw 'Tracking event cannot be null';
			}

			trackingEvents.push(trackingEvent);
		};
		this.send = function () {
			console.log('Sedning tracking requiest. Total events: ' + trackingEvents.length);

			if (trackingEvents.length === 0) {
				// Nothing to send
				return;
			}

			var isIEBelow10 = (browser.msie || browser.name === "IE") && parseInt(browser.major) < 10;

			// IE browsers up to IE10 don't support cross origin requests via XmlHttpRequest
			// They offer XDomainRequest, but it has issues that make it unfit.
			// Some of the issues are: not working in IE8 private mode, no cookies support, scheme restrictions.
			// So for IE < 10 we issue multiple GET requests instead
			// Also this means that we do not use adblock endpoint (even if specified) for IE versions < 10
			if (isIEBelow10 || typeof XMLHttpRequest === "undefined") {
				for (var i = 0; i < trackingEvents.length; i++) {
					sendInGetRequest(trackingEvents[i]);
				}
			} else if (trackingEvents.length == 1 && !useAdblockEndpoint && createGetUrl(trackingEvents[0]).length < 2048) {
				sendInGetRequest(trackingEvents[0]);
			} else {
				sendInPostRequest(trackingEvents);
			}
		}
	};

	(function (scope) {
		// We aren't uising any pizookie logic....

		//var Fingerprint = function(hasher) {
		//    var nativeForEach = Array.prototype.forEach;
		//    var nativeMap = Array.prototype.map;
		//    this.each = function(obj, iterator, context) {
		//        if (obj === null) return;
		//        if (nativeForEach && obj.forEach === nativeForEach) {
		//            obj.forEach(iterator, context);
		//        } else if (obj.length === +obj.length) {
		//            for (var i = 0, l = obj.length; i < l; i++) {
		//                if (iterator.call(context, obj[i], i, obj) === {}) return;
		//            }
		//        } else {
		//            for (var key in obj) {
		//                if (obj.hasOwnProperty(key)) {
		//                    if (iterator.call(context, obj[key], key, obj) === {}) return;
		//                }
		//            }
		//        }
		//    };
		//    this.map = function(obj, iterator, context) {
		//        var results = [];
		//        if (obj == null) return results;
		//        if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);
		//        this.each(obj, function(value, index, list) {
		//            results[results.length] = iterator.call(context, value, index, list);
		//        });
		//        return results;
		//    };

		//    if (hasher) {
		//        this.hasher = hasher;
		//    }
		//};
		//Fingerprint.prototype = {
		//    get: function() {
		//        var keys = [];
		//        keys.push(navigator.userAgent);
		//        keys.push(navigator.language);
		//        keys.push(screen.colorDepth);
		//        keys.push(new Date().getTimezoneOffset());
		//        keys.push(!!window.sessionStorage);
		//        keys.push(!!window.localStorage);
		//        var pluginsString = this.map(navigator.plugins, function(p) {
		//            var mimeTypes = this.map(p, function(mt) {
		//                return [mt.type, mt.suffixes].join('~');
		//            }).join(',');
		//            return [p.name, p.description, mimeTypes].join('::');
		//        }, this).join(';');
		//        keys.push(pluginsString);
		//        if (this.hasher) {
		//            return this.hasher(keys.join('###'), 31);
		//        } else {
		//            return this.murmurhash3_32_gc(keys.join('###'), 31);
		//        }
		//    },

		//    murmurhash3_32_gc: function(key, seed) {
		//        var remainder, bytes, h1, h1b, c1, c1b, c2, c2b, k1, i;

		//        remainder = key.length & 3; // key.length % 4
		//        bytes = key.length - remainder;
		//        h1 = seed;
		//        c1 = 0xcc9e2d51;
		//        c2 = 0x1b873593;
		//        i = 0;

		//        while (i < bytes) {
		//            k1 =
		//            ((key.charCodeAt(i) & 0xff)) |
		//                ((key.charCodeAt(++i) & 0xff) << 8) |
		//                ((key.charCodeAt(++i) & 0xff) << 16) |
		//                ((key.charCodeAt(++i) & 0xff) << 24);
		//            ++i;

		//            k1 = ((((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16))) & 0xffffffff;
		//            k1 = (k1 << 15) | (k1 >>> 17);
		//            k1 = ((((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16))) & 0xffffffff;

		//            h1 ^= k1;
		//            h1 = (h1 << 13) | (h1 >>> 19);
		//            h1b = ((((h1 & 0xffff) * 5) + ((((h1 >>> 16) * 5) & 0xffff) << 16))) & 0xffffffff;
		//            h1 = (((h1b & 0xffff) + 0x6b64) + ((((h1b >>> 16) + 0xe654) & 0xffff) << 16));
		//        }

		//        k1 = 0;
		//        /* jshint -W086 */
		//        switch (remainder) {
		//        case 3:
		//            k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;
		//        case 2:
		//            k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;
		//        case 1:
		//            k1 ^= (key.charCodeAt(i) & 0xff);

		//            k1 = (((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16)) & 0xffffffff;
		//            k1 = (k1 << 15) | (k1 >>> 17);
		//            k1 = (((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16)) & 0xffffffff;
		//            h1 ^= k1;
		//        }
		//        /* jshint +W086 */
		//        h1 ^= key.length;

		//        h1 ^= h1 >>> 16;
		//        h1 = (((h1 & 0xffff) * 0x85ebca6b) + ((((h1 >>> 16) * 0x85ebca6b) & 0xffff) << 16)) & 0xffffffff;
		//        h1 ^= h1 >>> 13;
		//        h1 = ((((h1 & 0xffff) * 0xc2b2ae35) + ((((h1 >>> 16) * 0xc2b2ae35) & 0xffff) << 16))) & 0xffffffff;
		//        h1 ^= h1 >>> 16;

		//        return h1 >>> 0;
		//    }
		//};
		scope.Fingerprint = 123; //Fingerprint;
	})(g367CB268B1094004A3689751E7AC568F);


	/* string format function taken from http://stackoverflow.com/a/4673436/318158 
	 * Used in various media scripts.
	 */
	if (!String.format) {
		String.format = function (format) {
			var args = Array.prototype.slice.call(arguments, 1);
			return format.replace(/{(\d+)}/g, function (match, number) {
				return typeof args[number] != 'undefined'
					? args[number]
					: match;
			});
		};
	}

	g367CB268B1094004A3689751E7AC568F.Init();
	if (g367CB268B1094004A3689751E7AC568F._Top.g367CB268B1094004A3689751E7AC568F === undefined) {
		g367CB268B1094004A3689751E7AC568F._Top.g367CB268B1094004A3689751E7AC568F = {};

	}
	if (g367CB268B1094004A3689751E7AC568F._Top.g367CB268B1094004A3689751E7AC568F.ExternalChromePop === undefined) {
		g367CB268B1094004A3689751E7AC568F._Top.g367CB268B1094004A3689751E7AC568F.ExternalChromePop = g367CB268B1094004A3689751E7AC568F.ExternalChromePop;
	}

	if (true) {
		if (typeof rAb == 'function') {
			if (!false || g367CB268B1094004A3689751E7AC568F.IsAdblockRequest) {
				rAb();
			}
		}
	}

	
}
