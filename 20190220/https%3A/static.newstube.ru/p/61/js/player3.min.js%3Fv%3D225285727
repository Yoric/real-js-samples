var __awaiter=this&&this.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},DocumentTouch,newstube,newstube2,newstube3;(function(n){function i(n,i){var r=n.resizeSensor=document.createElement("div"),u,s,e,o;r.className="ntp-resize-sensor";u="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";s="position: absolute; left: 0; top: 0; transition: 0s;";r.style.cssText=u;r.innerHTML='<div class="ntp-resize-sensor-expand" style="'+u+'"><div style="'+s+'"><\/div><\/div><div class="ntp-resize-sensor-shrink" style="'+u+'"><div style="'+s+' width: 200%; height: 200%"><\/div><\/div>';n.appendChild(n.resizeSensor);var f=r.childNodes[0],v=f.childNodes[0],h=r.childNodes[1],y=function(){v.style.width="100000px";v.style.height="100000px";f.scrollLeft=1e5;f.scrollTop=1e5;h.scrollLeft=1e5;h.scrollTop=1e5};y();var c=!1,l,a,p,w=0,b=function(){c&&(i(l,a),c=!1);t(b)};t(b);e=function(){((p=n.offsetWidth)!=l||(w=n.offsetHeight)!=a)&&(c=!0,l=p,a=w);y()};o=function(n,t,i){n.attachEvent?n.attachEvent("on"+t,i):n.addEventListener(t,i)};o(f,"scroll",e);o(h,"scroll",e);o(document,"fullscreenchange",e)}var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(n){return window.setTimeout(n,20)};n.resizeSensor=i})(newstube3||(newstube3={})),function(n){var i=function(){function n(){var n=this;this.gcounter=0;this.current=function(){return n.gcounter};this.inc=function(){return++n.gcounter};this.incEnv=function(){return new t(n,n.inc())}}return n.Create=function(t){var i=new n,r=t(i);return r.current=function(){return i.current()},r.inc=function(){return i.inc()},r},n}(),t;n.EnvCounter=i;t=function(){function n(n,t){this.parent=n;this.requestId=t;this.startTime=Date.now()}return n.prototype.exec=function(n,t,i){var r=this;return n.then(undefined,function(n){if(r.requestId===r.parent.current())return i?i(n):Promise.reject(n)}).then(function(n){if(r.requestId===r.parent.current())return t(n)})},n.prototype.loop=function(n,t,i){var u=this,r=function(){return u.exec(n,t,i).then(function(n){if(n)return r()})};return r(),null},n}();n.EnvCounterInstance=t}(newstube3||(newstube3={})),function(n){var t=function(){function t(t,i){this.player=t;this.codeplacement=i;this.enabled=!0;this.started=!1;this.mediaGuid=t.env.guid;n.diagnosticText(this.mediaGuid+" AdLinearContext.create "+i,2)}return t.prototype.abort=function(){if(n.diagnosticText(this.mediaGuid+" AdLinearContext.abort "+this.enabled,2),this.enabled){this.enabled=!1;this.started=!1;this.player.adLinearContext=null;var t=this.player.playerA;this.player=null;t.onStart=null;t.stop()}},t.prototype.start=function(){return n.diagnosticText(this.mediaGuid+" AdLinearContext.startPromise "+!!this.startPromise,2),this.startPromise||(this.startPromise=this.generateStartPromise()),this.startPromise},t.prototype.generateStartPromise=function(){return __awaiter(this,void 0,void 0,function(){var i,r,u,e,o,f,t=this;return __generator(this,function(){return n.diagnosticText(this.mediaGuid+" tryAd "+this.codeplacement+" s",2),i=Date.now(),r=function(){t.player.adLinearContext=null},u=function(){t.enabled=!1;t.codeplacement===n.PlayerAdState.PreRoll&&(t.player.env.prerollCalled=!0);t.onComplete&&t.onComplete()},e=function(){var f=t.enabled;t.enabled&&(r(),t.player.env.lastAd=!0,n.PlayerEvents.adSuccess(t.player.env,t.codeplacement,Math.round((Date.now()-i)/1e3)),u());n.diagnosticText(t.mediaGuid+" tryAd "+t.codeplacement+" e "+f+" success",2)},o=function(i){var f=t.enabled;t.enabled&&(r(),t.player.env.lastAd=!1,n.PlayerEvents.adError(t.player.env,t.codeplacement,i),u());n.diagnosticText(t.mediaGuid+" tryAd "+t.codeplacement+" e "+f+" error "+i,2)},f={},f.bar=this.codeplacement!==n.PlayerAdState.PauseRoll,this.player.playerA.onStart=function(){if(t.enabled){t.started=!0;var r=t.player.playerA;n.PlayerEvents.adStarted(t.player.env,t.codeplacement,Math.round((Date.now()-i)/1e3));t.onStart&&t.onStart()}},[2,this.player.playerA.processTagStart(this.player.env.getAdContext(),this.codeplacement,f).then(e,o)]})})},t}();n.AdLinearContext=t}(newstube3||(newstube3={})),function(n){var t;(function(n){function i(n){n.hasOwnProperty("remove")?n.remove():n.parentNode.removeChild(n)}function r(n,t){n.addEventListener?n.addEventListener("click",t):n.attachEvent&&n.attachEvent("onclick",t)}function u(n,t){var i=n.createElement("style"),r=n.createTextNode(t);i.appendChild(r);n.head.appendChild(i)}function f(n,t,i,r){n.addEventListener?n.addEventListener(t,i,r):n.attachEvent&&n.attachEvent("on"+t,i)}function e(n,t,i,r){n.removeEventListener?n.removeEventListener(t,i,r):n.detachEvent&&n.detachEvent("on"+t,i)}function o(n,t){if(typeof n.classList!="undefined")n.classList.add(t);else{var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");if(i.test(n.className))return;n.className=(n.className+" "+t).replace(/\s+/g," ").replace(/(^ | $)/g,"")}}function s(n,t){if(typeof n.classList!="undefined")n.classList.remove(t);else{var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");n.className=n.className.replace(i,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")}}function h(n,t){var i=new RegExp("\\b"+t+"\\b");return i.test(n.className)}function c(n,t){return n.getElementsByClassName?n.getElementsByClassName(t):n.querySelectorAll("."+t)}function l(n,t){return n.getElementsByClassName?n.getElementsByClassName(t)[0]:n.querySelector("."+t)}function a(n){return n?n.trim?n.trim():n.replace(/^\s+|\s+$/g,""):n}function v(n,t){n.textContent=n.text=n.innerText=t}function y(n){return n.textContent||n.text||n.innerText}function p(t){function f(){n.removeEventListener(e,i,f);t()}function u(){document[r]||(n.removeEventListener(e,i,u),t())}var r=null,i=null,e=document;if("hidden"in document)r="hidden",document.addEventListener(i="visibilitychange",u);else if("mozHidden"in document)r="mozHidden",document.addEventListener(i="mozvisibilitychange",u);else if("webkitHidden"in document)r="webkitHidden",document.addEventListener(i="webkitvisibilitychange",u);else if("msHidden"in document)r="msHidden",document.addEventListener(i="msvisibilitychange",u);else if(document.attachEvent)n.addEventListener(document,i="focusin",f);else if(window.addEventListener)e=window,window.addEventListener(i="pageshow",f);else return!1;return!0}function t(n){this.message=n}n.removeElement=i;n.addClickListener=r;n.addHeadStyle=u;n.addEventListener=f;n.removeEventListener=e;n.addClass=o;n.removeClass=s;n.checkClass=h;n.getElementsByClassName=c;n.getElementByClassName=l;n.trim=a;n.setTextContent=v;n.getTextContent=y;n.callbackOnVisibility=p;var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error;t.prototype.name="InvalidCharacterError";n.atob=window.atob?function(n){return window.atob(n)}:function(n){var f=String(n).replace(/=+$/,"");if(f.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var r=0,u,i,o=0,e="";i=f.charAt(o++);~i&&(u=r%4?u*64+i:i,r++%4)?e+=String.fromCharCode(255&u>>(-2*r&6)):0)i=w.indexOf(i);return e};Array.prototype.map||(Array.prototype.map=function(n,t){var e,u,i,r,f,o,s;if(this==null)throw new TypeError(" this is null or not defined");if(r=Object(this),f=r.length>>>0,typeof n!="function")throw new TypeError(n+" is not a function");for(arguments.length>1&&(e=t),u=new Array(f),i=0;i<f;)i in r&&(o=r[i],s=n.call(e,o,i,r),u[i]=s),i++;return u}),function(){if(document.createEvent)try{new CustomEvent("IE has CustomEvent, but doesn't support constructor")}catch(n){window.CustomEvent=function(n,t){var i;return t=t||{bubbles:!1,cancelable:!1,detail:undefined},i=document.createEvent("CustomEvent"),i.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),i};CustomEvent.prototype=Object.create(window.Event.prototype)}}()})(t=n.CH||(n.CH={}))}(newstube3||(newstube3={})),function(n){function t(t,i){var r,u;t!=null&&typeof t!==undefined&&(r=n.playerLogs||(n.playerLogs=[]),r.push({time:Date.now(),text:t.toString()}),r.length>1e3&&r.shift());n.parentElement&&(u=n.parentElement.diagnosticText,u&&typeof u=="function"&&u(t,i+1))}function i(i,r,u){function e(){switch(u){case 0:return"#000";case 1:return"yellow";case 2:return"red";case 3:return"green"}}if(r===void 0&&(r=0),u===void 0&&(u=0),i!=null&&typeof i!==undefined){var f=document.createElement("div");n.CH.setTextContent(f,i);t('<font color="'+e()+'">'+f.innerHTML+"<\/font>",r)}}n.diagnosticHtml=t;n.diagnosticText=i}(newstube3||(newstube3={})),function(n){var t,i,r;(function(n){n[n.init=0]="init";n[n.start=1]="start";n[n.play=2]="play";n[n.pause=3]="pause";n[n.postplay=4]="postplay";n[n.end=5]="end";n[n.error=6]="error";n[n.app=7]="app";n[n.a=8]="a";n[n.info=9]="info"})(t=n.PlayerState||(n.PlayerState={})),function(n){n[n.Init=0]="Init";n[n.SlideShow=1]="SlideShow";n[n.PreRoll=2]="PreRoll";n[n.PreRollEnd=3]="PreRollEnd";n[n.Play=4]="Play";n[n.Pause=5]="Pause";n[n.PauseRoll=6]="PauseRoll";n[n.PostRoll=7]="PostRoll";n[n.PostPlay=9]="PostPlay";n[n.End=8]="End";n[n.Error=10]="Error";n[n.Info=11]="Info";n[n.Replay=12]="Replay";n[n.PlayClick=13]="PlayClick";n[n.PlayStarting=14]="PlayStarting"}(i=n.PlayerStateDetail||(n.PlayerStateDetail={})),function(n){n[n.None=0]="None";n[n.PreRoll=1]="PreRoll";n[n.PostRoll=2]="PostRoll";n[n.PauseRoll=15]="PauseRoll"}(r=n.PlayerAdState||(n.PlayerAdState={}))}(newstube3||(newstube3={})),function(n){var t;(function(n){n.hlsjs="//static.newstube.ru/c/hls.js/0.12.2/hls.min.js";n.aesjs="//static.newstube.ru/c/cryptojs/3.1.2/aes.js";n.pbkdf2js="//static.newstube.ru/c/cryptojs/3.1.2/pbkdf2.js";n.adVastLoopTimeout=1e4;n.adLoadedTimeout=5e3;n.adStartedTimeout=5e3;n.adStopTimeout=3e3;n.adUrlLoadTimeout=5e3})(t=n.externals||(n.externals={}))}(newstube3||(newstube3={})),function(n){var t;(function(t){t.simpleMp4Audio="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=";t.html5Support=!1;t.h264=!1;t.h264High=!1;t.hls=!1;t.volumeEnable=!1,function(){var i=document.createElement("video"),r;try{t.html5Support=!!i.canPlayType;t.html5Support&&(t.h264=!!i.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.h264High=!!i.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.hls=!!i.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""),n.diagnosticText("html5 h264:"+t.h264+" h264High:"+t.h264High+" hls:"+t.hls))}catch(u){}try{t.volumeEnable=function(){var n=i.volume,t=n===1?.5:1;return i.volume=t,i.volume!==n}()}catch(u){}r=i.play();r&&r.then&&r.then(undefined,function(){});t.videoPromised=!!(r&&r.then)}();t.is_touch_device="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;t.isSriptPlay=!1;t.scriptPlay=t.html5Support?new Promise(function(i){function r(){var r=document.createElement("video"),u,f;if(r.src=t.simpleMp4Audio,r.volume=1,r.style.display="none",document.body.appendChild(r),u=r.play(),u){f=setTimeout(function(){n.diagnosticText("scriptPlayCheckPromise timeout");e(!1)},3e3);function e(t){f&&(clearTimeout(f),f=null);r&&(n.CH.removeElement(r),r=null);n.diagnosticText("scriptPlayCheckPromise resolve "+t);i(t)}u.then(function(){return e(!0)},function(){return e(!1)})}return n.diagnosticText("scriptPlayCheckPromise "+!!u),!!u}function u(){function f(){r.removeEventListener("play",e,!1)}function e(){clearTimeout(u);n.diagnosticText("scriptPlayCheckEvent true");i(!0);f()}function o(){n.diagnosticText("scriptPlayCheckEvent timeout");i(!1);f()}var r=document.createElement("video"),u;r.src=t.simpleMp4Audio;r.volume=1;r.addEventListener("play",e,!1);setTimeout(function(){r.play();u=setTimeout(o,200)},0)}r()||u()}).then(undefined,function(){return!1}).then(function(n){return t.isSriptPlay=n}):Promise.resolve(!0);t.Animation=function(){var n=document.createElement("div");return n.style.animationName!==undefined}();t.MSE=typeof MediaSource!="undefined";t.SvgAsImg=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1");t.InlineSvg=function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(typeof SVGRect!="undefined"&&n.firstChild&&n.firstChild.namespaceURI)=="http://www.w3.org/2000/svg"}();t.Svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;t.HlsJsLoaded=t.MSE?new Promise(function(t){return setTimeout(function(){return n.Utils.script(n.externals.hlsjs).then(function(){return t(!0)},function(){return t(!1)})},0)})["catch"](function(){return!1}):Promise.resolve(!1);t.HlsJsSupported=!1;t.HlsJsLoaded.then(function(i){t.HlsJsSupported=i&&Hls&&Hls.isSupported();t.HlsJsSupported&&n.diagnosticText("hls.js version "+Hls.version,3)});t.fullscreenSupport=document.exitFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen;t.iosSafari9feature=!!(typeof CSS!="undefined"&&CSS.supports);t.voidMedia="data:video/mp4;base64,IA==";t.ie8=function(){var n=document.createElement("div");return n.innerHTML="<!--[if lt IE 9]><i><\/i><![endif]-->",n.getElementsByTagName("i").length===1}()})(t=n.FeatureHelper||(n.FeatureHelper={}))}(newstube3||(newstube3={})),function(n){var t;(function(n){function i(n){var t=Math.floor(n/3600),i=t?t+":":"";return""+i+("0"+Math.floor(n/60)%60).slice(-2)+":"+("0"+Math.floor(n%60)).slice(-2)}function r(n){var i=new Date(n);return""+t(i.getFullYear(),4)+t(i.getMonth(),2)+t(i.getDate(),2)+"-"+t(i.getHours(),2)+t(i.getMinutes(),2)+t(i.getSeconds(),2)+"."+t(i.getMilliseconds(),3)}function u(n){var i=new Date(n);return""+t(i.getFullYear()-2e3,2)+t(i.getMonth(),2)+t(i.getDate(),2)+"-"+t(i.getHours(),2)+t(i.getMinutes(),2)+t(i.getSeconds(),2)+"."+t(i.getMilliseconds(),3)}function t(n,t){var i=t-n.toString().length+1;return Array(+(i>0&&i)).join("0")+n}n.getTimeFormated=i;n.getYYYYMMDD_HHMMSSMS=r;n.getYYMMDD_HHMMSSMS=u;n.zeroPad=t})(t=n.FormatHelper||(n.FormatHelper={}))}(newstube3||(newstube3={})),function(n){var t;(function(t){function i(n,t){if(n.paused&&n.currentTime==0&&!n.src){t&&t("uii.start");var i=void 0;(i=n.play())&&i.then&&i.then(function(){return t&&t("uii.play end")},function(n){t&&t("uii.play "+n.toString())});t&&t("uii.play promise "+!!i);n.load();n.pause();t&&t("uii.end")}else t&&t("uii.ignore "+n.played+" "+n.paused+" "+n.ended+" "+n.currentTime)}function r(n,t){function f(){t&&t("uii.onplay");n.removeEventListener("play",f);var i=n.pause();i&&i.then&&i.then(undefined,function(){});u=!0;r&&r();t&&t("uii.complete")}var u=!1,r=null,i;return n.addEventListener("play",f),i=n.play(),i&&i.then&&i.then(undefined,function(){}),t&&t("uii.play"),new Promise(function(n){r=n;u&&n()}).then(undefined,function(){})}function u(t){var i=document.createElement("iframe"),u,r;return i.frameBorder="0",i.width="100%",i.height="100%",i.allowFullscreen=!0,t.appendChild(i),u=i.contentWindow,r=u.document,r.open(),r.write(""),r.close(),n.CH.addHeadStyle(r,"html, body, video { overflow: hidden; width: 100%; heiht: 100%; margin: 0; padding: 0;display: block} *::-webkit-media-controls-panel {display: none!important;-webkit-appearance: none;}*::-webkit-media-controls-play-button {display: none!important;-webkit-appearance: none;}*::-webkit-media-controls-start-playback-button {display: none!important;-webkit-appearance: none;}"),i}function e(i,r){i===void 0&&(i=!1);r||(r=document);var u=r.createElement("video");return i&&(u.setAttribute("webkit-playsinline","webkit-playsinline"),u.setAttribute("playsinline","playsinline")),u.poster=f,u.preload="auto",n.FeatureHelper.volumeEnable&&(u.volume=t.defaultVolume),u}function o(i){for(i.src=n.FeatureHelper.voidMedia,i.controls=!1,i.removeAttribute("src"),i.removeAttribute("style"),i.removeAttribute("poster"),i.removeAttribute("controls");i.firstChild;)i.removeChild(i.firstChild);n.PlayerUtils.safeWebkitExitFullscreen(i);n.FeatureHelper.volumeEnable&&(i.volume=t.defaultVolume);i.load();i.pause()}function s(t,i){for(var u=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","interruptbegin","interruptend","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","volumechange","waiting","webkitbeginfullscreen","webkitendfullscreen","click"],f=i,r=0;r<u.length;r++)(function(i){t.addEventListener(i,function(){n.diagnosticText("v."+i,f)})})(u[r])}t.defaultVolume=.7;t.userInteractionInit=i;t.userInteractionInit3=r;t.createVideoIframe=u;var f="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";t.createVideo=e;t.clearVideo=o;t.debugEvents=s})(t=n.HtmlMediaElementHelper||(n.HtmlMediaElementHelper={}))}(newstube3||(newstube3={})),function(n){function u(n){function u(n){for(var r=t.document.getElementsByTagName("iframe"),i=0;i<r.length;i++)r[i].contentWindow.postMessage(n,"*")}var t=this,r=t.buffer||(t.buffer=[]),i;if(n.source===this.parent)t.ready?u(n.data):r.push(n.data);else for(t.ready=!0,t.buffer=[],i=0;i<r.length;i++)u(r[i])}function r(n){switch(n){case 0:return"";case 1:return"Данный браузер не поддерживает HTML5 Video, используйте более современный браузер.";case 2:return"Данный браузер не поддерживает воспроизведение видео с кодеком H264, попробуйте использовать другой браузер.";case 3:return"К сожалению видео доступно только с кодеком H264 профилем High и ваш браузер не поддерживает его, попробуйте использовать другой браузер.";case 4:return"К сожалению видео на текущий момент не доступно";case 5:return"Плеер не смог загрузить информацию о видео";case 6:return"Видео недоступно по требованию правообладателя.";case 7:return"Ролик не существует или удален.";case 8:return"Не удалось загрузить информация о ролике";default:return"Ошибка в работе плеера"}}var f=function(){function t(t,r){var f=this;this.guid=t;this.player=r;this.enabled=!0;this.active=!1;this.state=0;this.errorId=0;this.isViewed=!1;this.loaded=!1;this.mediaPlayError=!1;this.loadInfoAndStartLoadStreams=function(){return __awaiter(f,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return t=this.loadMediaCounters(),[4,this.loadInfo()];case 1:return i.sent(),n.diagnosticText(this.guid+" loadInfoComplete"),this.loadStreams(),[4,t];case 2:return i.sent(),this.mediaCountersSendMessage({action:0,media:this.mediaInfo}),n.diagnosticText(this.guid+" initMediaCounters"),n.diagnosticText(this.guid+" startReady"),[2]}})})};this.loadInfo=function(){return i.loadMediaInfo(f.guid,f.player.env).then(function(n){return f.mediaInfo=n,f.state=1,n==null?Promise.reject({errorId:7}):void 0},function(){return Promise.reject({errorId:8})}).then(undefined,function(t){return f.errorId=t&&t.errorId||100,n.PlayerEvents.errorCode(f.errorId),Promise.reject(t)})};this.loadMediaCounters=function(){return __awaiter(f,void 0,void 0,function(){var r,s,e,t,f,o,h;return __generator(this,function(c){switch(c.label){case 0:this.mediaCountersContainer=document.createElement("div");n.CH.addClass(this.mediaCountersContainer,"hplayer-media-counters");this.player.playerForm.appendChild(this.mediaCountersContainer);c.label=1;case 1:return c.trys.push([1,3,,4]),[4,i.getMediaCounters(this.guid)];case 2:if(r=c.sent(),r)for(s=0;s<r.length;s++)e=r[s],t=document.createElement("iframe"),t.width=t.height=t.frameBorder="0",this.mediaCountersContainer.appendChild(t),t.contentDocument.open(),t.contentDocument.write(""),t.contentDocument.close(),t.contentWindow.addEventListener("message",u),f=document.createElement("iframe"),f.width=f.height=f.frameBorder="0",t.contentDocument.body.appendChild(f),o=f.contentWindow.document,o.open(),e.Html&&o.write(e.Html),e.Url&&o.write('<script src="'+e.Url.replace("[host]",n.playerStaticHost)+'"><\/script>'),o.close();return n.diagnosticText("loadMediaCounters.complete "+(r&&r.length)),[3,4];case 3:return h=c.sent(),n.diagnosticText("loadMediaCounters.error "+h.message,0,2),[3,4];case 4:return[2]}})})};this.loadStreams=function(){if(f.loadStreamsPromise)return f.loadStreamsPromise;var n=function(n){return f.loadStreamsPromise=null,n};return f.mediaInfo.ViewStateId!==0?Promise.resolve(null):f.loadStreamsPromise=f.createLoadStreamPromise().then(n,n)};this.player.playerVideo.onPlaying=function(){f.videoPlaying()};this.player.playerVideo.onPause=function(){f.videoPause()}}return t.prototype.startReady=function(){return this.startReadyPromise||(this.startReadyPromise=this.loadInfoAndStartLoadStreams()),this.startReadyPromise},t.prototype.playReady=function(){var n=this;return this.playReadyPromise||(this.playReadyPromise=this.startReady().then(function(){if(!n.errorId&&n.mediaInfo.Source==null&&n.mediaInfo.ViewStateId!==1)return n.loadStreams()})),this.playReadyPromise},t.prototype.preload=function(){var t=this;return n.diagnosticText("preload promise="+!!this.preloadPromise),this.preloadPromise||(this.preloadPromise=this.playReady().then(function(){t.enabled&&t.mediaInfo&&t.mediaInfo.Source&&(t.setSrc(),t.preloadComplete=!0)})),this.preloadPromise},t.prototype.updateStartPageOrSetError=function(){var t=this;return this.startReady().then(function(){t.enabled&&(t.player,t.player.pageStart.setKeyFrame(t.mediaInfo.Keyframe),t.player.playerControls.setPosition(0),t.player.playerControls.setDuration(t.mediaInfo.Duration),n.diagnosticText(t.guid+" updateStartPageOrSetError complete"))},function(){if(t.enabled){var i=r(t.errorId);t.player.setError(i);n.diagnosticText(t.guid+" updateStartPageOrSetError setError",0,2)}})},t.prototype.displayStartPage=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.player.env.autoplay=!1,[4,this.startReady()];case 1:return t.sent(),this.enabled&&(this.player.pageProgress.clearWait(),this.mediaInfo.ViewStateId===1?this.displayBlocked():(this.player.setUIState(n.PlayerState.start),this.player.playerControls.show(),this.player.generateEventState(n.PlayerStateDetail.SlideShow))),[2]}})})},t.prototype.displayBlocked=function(){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(u){switch(u.label){case 0:return(n.PlayerEvents.errorCode(6),!(!this.player.env.init.location||this.player.env.init.location.toUpperCase()!=="RAMBLER"))?[3,2]:(this.player.pageProgress.setWait(),t=n.playerApp+"blocked",[4,n.Utils.getText(t,{guid:this.player.env.guid})]);case 1:return i=u.sent(),this.enabled&&(this.player.setError(i),this.player.playerControls.show()),[3,3];case 2:this.errorId=6;this.player.setError(r(this.errorId));u.label=3;case 3:return[2]}})})},t.prototype.setSrc=function(){if(!this.loaded){var n=this.mediaInfo.Source,t=this.player.playerVideo;this.mediaInfo.AlternativeSource?t.setAlternativeSrc(this.mediaInfo.AlternativeSource.Src,this.mediaInfo.AlternativeSource.Type):t.setAlternativeSrc(null,null);t.setSrc(n.Src,n.Type);t.setVideoSize(n.Width,n.Height)}},t.prototype.destoryMediaCountes=function(){var i,t,n;if(this.mediaCountersContainer){for(i=this.mediaCountersContainer.children,t=i.length-1;t>=0;t--)n=i[t],n.contentWindow.document.open(),n.contentWindow.document.write(""),n.contentWindow.document.close(),this.mediaCountersContainer.removeChild(n);this.player.playerForm.removeChild(this.mediaCountersContainer);this.mediaCountersContainer=null}},t.prototype.mediaCountersSendMessage=function(n){for(var i=this.mediaCountersContainer.childNodes,t=0;t<i.length;t++)i[t].contentWindow.postMessage(n,"*")},t.prototype.createLoadStreamPromise=function(){var t=this;return i.loadSources(this.guid,this.player.env).then(function(i){if(t.mediaInfo.Sources=i,i&&i.length)n.diagnosticText("sources.length "+i.length),t.mediaInfo.Source=i[0],i.length>1&&(t.mediaInfo.AlternativeSource=i[1]),t.state=2;else{var r;return r=n.FeatureHelper.html5Support?n.FeatureHelper.h264?n.FeatureHelper.h264High?3:4:2:1,Promise.reject({errorId:r})}},function(t){return n.diagnosticText("loadSources.error = "+(t||""),0,2),Promise.reject({errorId:5})}).then(undefined,function(i){return t.mediaPlayError=!0,t.errorId=i&&i.errorId||100,n.PlayerEvents.errorCode(t.errorId),Promise.reject(i)})},t.prototype.increaseViewCounter=function(){if(this.isViewed)return!1;var t="//p.newstube.ru/c/player.svc/CounterViewFlash?id="+this.guid+"&location="+this.player.env.init.location+"&state=&url="+encodeURIComponent(n.PlayerUtils.getHostUrl())+"&placement="+this.player.env.init.placement+"&block=[NT_SBLOCK]&rnd=[CACHEBUSTING]";return n.PlayerUtils.knocker(t),this.isViewed=!0,n.PlayerEvents.mediaCounterView(this.player.env,this.mediaInfo),n.diagnosticText(this.guid+" increaseViewCounter "+t),!0},t.prototype.abort=function(){this.enabled=!1;this.active=!1;this.player.playerVideo.abort();this.destoryMediaCountes();this.player.adLinearContext&&this.player.adLinearContext.abort()},t.prototype.displayTimeout=function(n){this.enabled&&this.player.pageStart.start(n)},t.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){var i,t;return __generator(this,function(u){switch(u.label){case 0:return[4,this.preload()];case 1:return u.sent(),this.mediaPlayError&&n.diagnosticText("mediaPlayError: "+this.mediaPlayError,0,2),this.enabled&&(this.mediaInfo.ViewStateId===1?this.displayBlocked():this.mediaPlayError?this.player.setError(r(this.errorId)):(this.preloadComplete||this.setSrc(),this.player.playerVideo.setForegroundImage(this.mediaInfo.VideoForegroundImage),i=this.player.enqPlayPauseCommand(),t=i!==2,t?this.player.playerVideo.play():this.player.pageProgress.clearWait(),this.mediaStart(t),this.player.playerControls.setSeekable(!0))),[2]}})})},t.prototype.play=function(){this.enabled?(this.player.setUIState(n.PlayerState.play),this.player.playerVideo.play(),this.mediaPlay()):n.diagnosticText("mediaContext disabled "+this.guid,1,1)},t.prototype.pause=function(){this.enabled?(this.player.setUIState(n.PlayerState.pause),this.player.playerVideo.pause(),this.mediaPause()):n.diagnosticText("mediaContext disabled "+this.guid,1,1)},t.prototype.replay=function(){this.enabled?(this.player.setUIState(n.PlayerState.play),this.player.playerControls.setPosition(0),this.player.playerVideo.play()):n.diagnosticText("mediaContext disabled "+this.guid,1,1)},t.prototype.setCurrentTime=function(t){this.enabled?this.player.playerVideo.setCurrentTime(t):n.diagnosticText("mediaContext disabled "+this.guid,1,1)},t.prototype.getVideoPostion=function(){return this.player.playerVideo.getCurrentTime()},t.prototype.mediaStart=function(n){this.mediaCountersSendMessage({action:1,position:this.getVideoPostion(),play:n})},t.prototype.mediaPlay=function(){this.mediaCountersSendMessage({action:2,position:this.getVideoPostion()})},t.prototype.mediaPlayed=function(){var t={action:3,position:this.getVideoPostion(),first:this.increaseViewCounter(),startPosition:this.player.env.mediaStartPosition};n.diagnosticText("mediaPlayed "+t.first+" "+t.position+" "+t.startPosition);this.mediaCountersSendMessage(t)},t.prototype.mediaPause=function(){this.mediaCountersSendMessage({action:4,position:this.getVideoPostion()})},t.prototype.mediaPaused=function(){this.mediaCountersSendMessage({action:5,position:this.getVideoPostion()})},t.prototype.mediaEnded=function(){this.enabled&&this.mediaCountersSendMessage({action:6,position:this.getVideoPostion()})},t.prototype.applyAutoPlay=function(t,i){var r=this;return n.diagnosticText("autoplay="+t+" scriptPlay = "+n.FeatureHelper.isSriptPlay+" userClick = "+this.player.env.autoplayEnable),t&&(this.player.env.autoplayEnable||n.FeatureHelper.isSriptPlay)?this.mediaPlayStart(i):t&&(this.player.env.autoplayEnable||n.FeatureHelper.isSriptPlay!==!1)?(n.diagnosticText("wait detect scriptPlay"),n.FeatureHelper.scriptPlay.then(function(t){return n.diagnosticText("autoplayEnable="+t),r.player.env.autoplayEnable=t,t?r.mediaPlayStart(i):r.displayStartPage()})):this.displayStartPage()},t.prototype.mediaPlayStart=function(t){return this.player.env.autoplay=t,t&&n.PlayerEvents.mediaAutoPlay(this.player.env,this.guid),this.v3StartToPlay()},t.prototype.v3StartToPlay=function(){return __awaiter(this,void 0,void 0,function(){var i,t;return __generator(this,function(r){switch(r.label){case 0:return this.enabled?(this.player.setWait(!0),this.player.generateEventState(n.PlayerStateDetail.PlayStarting),this.player.setUIState(n.PlayerState.play),this.player.playerControls.setPlayButtonView(n.PlayButtonView.Pause),this.player.playerControls.showOnFocus(),[4,this.preload()]):[2];case 1:r.sent();i=this.player.createAdContextForPreroll();r.label=2;case 2:return r.trys.push([2,4,,5]),[4,i.start()];case 3:return r.sent(),[3,5];case 4:return t=r.sent(),n.diagnosticText("adcontext.error "+(t&&t.toString()),0,2),[3,5];case 5:return this.enabled?(this.player.generateEventState(n.PlayerStateDetail.PreRollEnd),n.diagnosticText("mediaContext.start"),this.player.setWait(),this.player.setUIState(n.PlayerState.play),this.player.setBarTargetVideo(),this.player.playerControls.showOnFocus(),[4,this.start()]):[2];case 6:return r.sent(),[2]}})})},t.prototype.showPauseRoll=function(){return __awaiter(this,void 0,void 0,function(){var i,t;return __generator(this,function(r){switch(r.label){case 0:i=this.player.createAdContextForPauseRoll();r.label=1;case 1:return r.trys.push([1,3,,4]),[4,i.start()];case 2:return r.sent(),this.enabled&&(this.player.clearWait(),this.player.setBarTargetVideo(),this.player.setUIState(n.PlayerState.pause),this.player.playerControls.show()),[3,4];case 3:return t=r.sent(),n.diagnosticText("adcontext.error "+(t&&t.toString()),0,2),[3,4];case 4:return[2]}})})},t.prototype.videoPause=function(){this.enabled&&(this.onPause&&this.onPause(),this.mediaPaused(),this.showPauseRoll())},t.prototype.videoPlaying=function(){this.enabled&&(this.onPlaying&&this.onPlaying(),this.mediaPlayed())},t}(),t,i;n.MediaContext=f;t=null;setTimeout(function(){n.diagnosticText("cryptoJs startLoad",3);t=Promise.all([n.Utils.script(n.externals.aesjs),n.Utils.script(n.externals.pbkdf2js)]);t.then(function(){return n.diagnosticText("cryptoJs Complete",3)})},0);i=function(){function i(){}return i.loadMediaInfo=function(t,i){var r=n.playerHost+"api/player/getmediainfo",u={guid:t,location:i.init.location,placement:i.init.placement,signature:i.init.signature,url:n.PlayerUtils.getHostUrl()},f=function(t){return n.Utils.getData(t,u)};return f(r)},i.loadSources=function(i,r){var f=n.playerHost+"api/player/getsources2",u=0;return n.FeatureHelper.HlsJsLoaded.then(function(e){var o=e,h,c;try{o=o&&window.Hls&&window.Hls.isSupported()}catch(s){n.diagnosticText("featureFlag.error0 = "+(s||""),0,2)}try{u=(n.FeatureHelper.h264?1:0)+(n.FeatureHelper.h264High?2:0)+(n.FeatureHelper.hls?4:0)+(o?8:0)}catch(s){n.diagnosticText("featureFlag.error = "+(s||""),0,2)}return n.diagnosticText("featureFlag = "+u),h={guid:i,location:r.init.location,url:n.PlayerUtils.getHostUrl(),signature:r.init.signature,ff:u},c=function(t){return n.Utils.getTextByAny(t,h).then(function(t){if(!t)return null;var u=i.replace(/-/g,""),r=n.CH.atob(t),f=r.substr(0,16),e=r.substr(16,16),o=r.substr(32,r.length-32),s=CryptoJS.PBKDF2(u,CryptoJS.enc.Latin1.parse(f),{keySize:4,iterations:1});return JSON.parse(CryptoJS.AES.decrypt(CryptoJS.enc.Base64.stringify(CryptoJS.enc.Latin1.parse(o)),s,{keySize:16,iv:CryptoJS.enc.Latin1.parse(e),mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Latin1))})},t.then(function(){return c(f)})})},i.getMediaCounters=function(t){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(){return i=n.playerHost+"api/player/GetMediaCounters",[2,n.Utils.getData(i,{guid:t})]})})},i.loadTimeout=6e4,i}()}(newstube3||(newstube3={})),function(n){var t;(function(n){n[n.home=2]="home";n[n.embed=1]="embed";n[n.profile=4]="profile";n[n.theme=5]="theme"})(t=n.PlayerPlacement||(n.PlayerPlacement={}))}(newstube3||(newstube3={})),function(n){var t;(function(n){function t(n){return n===void 0&&(n=0),new Promise(function(t){n>0&&setTimeout(t,n)})}n.wait=t})(t=n.PromiseHelper||(n.PromiseHelper={}))}(newstube3||(newstube3={})),function(n){var t;(function(n){function s(t,i,r,s,h){return i===void 0&&(i=null),r===void 0&&(r=null),i&&(t=t+"?"+o(i)),n.supportWithCredentials?f(u,t,null,!1,{withCredentials:!1,contentType:r},s,h):e(u,t,null,null,s,h)}function h(i,u){var f,e;if(i&&i.match(/^\/\//)&&(i=n.scheme+i),n.supportWithCredentials)try{f=new XMLHttpRequest;f.open(t,i,!0);f.setRequestHeader("Content-Type",n.jsonContentType);f.send(u)}catch(o){}else n.supportXDomainRequest&&(e=r(t,i),setTimeout(function(){return e.send(u)},0))}function c(i,u){var f,e;if(i&&i.match(/^\/\//)&&(i=n.scheme+i),n.supportWithCredentials)try{f=new XMLHttpRequest;f.open(t,i,!0);f.send(u)}catch(o){}else n.supportXDomainRequest&&(e=r(t,i),setTimeout(function(){return e.send(u)},0))}function f(r,u,f,e,o,s,h){function v(){l=!1;clearTimeout(a);a=null}var c;e===void 0&&(e=!0);o===void 0&&(o=null);u&&u.match(/^\/\//)&&(u=n.scheme+u);c=new XMLHttpRequest;c.open(r,u,!0);var l=!0,y=(c.timeout=o&&o.timeout||i)+1e3,a=setTimeout(function(){l&&(a=null,l=!1,c.abort(),h&&h({status:0,statusText:"timeout"}))},y);c.ontimeout=function(){l&&(v(),h&&h({status:0,statusText:"timeout"}))};o&&o.withCredentials&&(c.withCredentials=o.withCredentials);c.onreadystatechange=function(){l&&c.readyState===4&&(v(),c.status===200?s&&s(e?c.responseXML:c.responseText):h&&h({status:c.status,statusText:c.statusText,responseText:c.responseText}))};c.setRequestHeader&&(r==t&&f&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o&&o.contentType&&c.setRequestHeader("Content-Type",o.contentType));c.send(f)}function r(n,t){var i=new XDomainRequest;return i.open(n,t,!0),i.onprogress=function(){},i}function e(n,t,u,f,e,o){function h(){clearTimeout(l)}function c(){o&&o({status:0,statusText:"timeout"})}function a(){h();c()}var s,l;u===void 0&&(u=null);f===void 0&&(f=null);s=r(n,t);l=setTimeout(c,f||i);s.timeout=f||i;s.onload=function(){h();try{e&&e(s.responseText)}catch(n){o&&o({status:0,statusText:n.toString()})}};s.ontimeout=a;s.onerror=function(){h();o&&o({status:0,statusText:"error",responseText:s.responseText})};setTimeout(function(){return s.send(u)},0)}function l(n){return typeof DOMParser!="undefined"?(new DOMParser).parseFromString(n,"application/xml"):a(n)}function a(n){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async=!1,t.loadXML(n),t}function v(n){y(n)}function y(n){var t=new Image;t.src=n}function b(t,r,u,f){function h(){e.onerror=null;c()}function c(){e.onload=e.onreadystatechange=null;o&&clearTimeout(o)}function l(){h();u()}var o,s,e;if(t.lastIndexOf("//",0)===0&&(t=""+n.scheme+t),n.scheme==="https:"&&t.lastIndexOf("http://",0)===0){f("mixed content");return}i&&(o=setTimeout(function(){o=null;f("timeout")},i));r||(r=document);e=r.createElement("script");e.type="text/javascript";e.async=!0;e.src=t;r.getElementsByTagName("head")[0].appendChild(e);e.onload=l;e.onerror=function(n){s&&clearTimeout(s);h();f(n)};e.onreadystatechange=function(){e.readyState=="complete"?l():e.readyState=="loaded"&&(c(),s=setTimeout(function(){e.onerror=null;u()},10))}}function k(n){var t=document.createElement("link"),i;t.type="text/css";t.href=n;t.rel="stylesheet";i=document.getElementsByTagName("head")[0];i.appendChild(t)}function d(){var n=(new Date).getTime();return window.performance&&typeof window.performance.now=="function"&&(n+=performance.now()),"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,function(){var t=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),t.toString(16)})}function o(n){var r=[],i,t;for(i in n)t=n[i],t!=null&&typeof t!="undefined"&&r.push(i+"="+encodeURIComponent(t));return r.join("&")}var u="GET",t="POST",i=6e4;n.supportWithCredentials=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest;n.supportXDomainRequest=typeof XDomainRequest!="undefined";n.jsonContentType="application/json; charset=utf-8";n.formContentType="application/x-www-form-urlencoded";n.getTextByAny0=s;n.postJson=h;n.post=c;n.xmlHttp0=f;n.xmlHttpIE90=e;n.textToXml=l;n.triggerGet=v;n.script0=b;n.stylesheet=k;n.generateUUID=d;n.toUrlArguments=o;n.scheme=location&&location.protocol==="https:"?"https:":"http:"})(t=n.Utils0||(n.Utils0={}))}(newstube3||(newstube3={})),function(n){var t;(function(t){function r(){for(var n=window;n.parent!=null&&n!=n.parent;)n=n.parent;return n}function i(){try{return r().document.location.href}catch(n){return document.referrer}}function u(n){function t(n){return+n==n&&(""+n).replace(/^\s+|\s+$/g,"").length>0}return t(n)?n.toString()+"px":n}function f(t){var r={url:i()};t&&(r.name=t.name,r.message=t.message,r.stack=t.stack);n.Utils0.post("//c0.newstube.ru/v4/n",JSON.stringify(r))}t.getHostUrl=i;t.toStyleValue=u;t.errorSend=f})(t=n.PlayerUtils0||(n.PlayerUtils0={}))}(newstube3||(newstube3={})),function(n){var t;(function(t){"use strict";function f(n,t,i,r){u(n,t,i,r)}function e(){for(var e,t,u,r,s=n.CH.getElementsByClassName(document,"newstube-player-attach"),f=0;f<s.length;f++)if(e=s[f],e.nodeType==1&&(t=e,!n.CH.checkClass(t,"newstube-player-attached")&&(n.CH.addClass(t,"newstube-player-attached"),u=t.getAttribute("data-guid"),u))){r=document.createElement("div");t.appendChild(r);r.id="p_"+u+"_"+n.Utils0.generateUUID();var h=t.getAttribute("data-width"),c=t.getAttribute("data-height"),o=null;h&&c||(t.style.position="relative",o={style:"width: 100%; height: 100%; position: absolute; top: 0; right: 0;"},r.style=o.style);var a=t.getAttribute("data-location")||"external",l=t.getAttribute("data-autoplay"),v=l==="true"||l=="1",y={guid:u,location:a,autoplay:v,placement:n.PlayerPlacement.embed};i(r.id,h,c,y,o)}}function u(n,t,r,u,f,e){i(n,t,r,u,f,e||function(){})}function i(t,i,u,f,e,s){var c,h,l,v,a;if(f!=null&&(c=document.getElementById(t),c)){h=document.createElement("iframe");h.width=h.height="100%";h.allowFullscreen=!0;h.frameBorder="0";h.setAttribute("allowfullscreen","");c.appendChild(h);var y={location:f.location,placement:f.placement,autoplay:f.autoplay?1:null,tv:f.hideControls?1:null},p=n.Utils0.toUrlArguments(y),w=""+r+f.guid+(p?"?":"")+p;if(n.Utils0.getTextByAny0(""+r+f.guid,y,null,function(n){var t=h.contentWindow.document;t.open();t.write(n);t.close();o(c,h);s&&s("ntp.iframe.body")},function(n){h.src=w;s&&s("ntp.iframe.src "+n.message)}),c.diagnosticText=s,l={},e&&typeof e=="object")for(v in e)l[v]=e[v];l.id=t;for(a in l)l[a]!=Object.prototype[a]&&c.setAttribute(a,l[a]);i&&(c.style.width=n.PlayerUtils0.toStyleValue(i));u&&(c.style.height=n.PlayerUtils0.toStyleValue(u))}}function o(n,t){var i=t.contentWindow.newstube3||(t.contentWindow.newstube3={});i.parentElement=n;setTimeout(function(){i.parentElement.diagnosticText(i.playerStaticHost)},1e3)}var r="//www.newstube.ru/embed/";t.setup=f;t.attach=e;t.createAuto=u;t.createIframe=i})(t=n.Player0||(n.Player0={}))}(newstube3||(newstube3={}));(newstube||(newstube={})).Player=(newstube2||(newstube2={})).Player=newstube3.Player=newstube3.Player0,function(){newstube3.Player0.attach()}(),function(n){var t;(function(n){function t(n){var t=document.createElement("textarea"),i,r;t.style.position="fixed";t.style.top="0";t.style.left="0";t.style.width="2em";t.style.height="2em";t.style.padding="0";t.style.border="none";t.style.outline="none";t.style.boxShadow="none";t.style.background="transparent";t.value=n;document.body.appendChild(t);t.select();try{i=document.execCommand("copy");r=i?"successful":"unsuccessful";console.log("Copying text command was "+r)}catch(u){console.log("Oops, unable to copy")}document.body.removeChild(t)}n.copyText=t})(t=n.ClipboardHelper||(n.ClipboardHelper={}))}(newstube3||(newstube3={})),function(n){var t,i,r;n.playerStaticHost||(n.playerStaticHost="//static.newstube.ru/p/30/");n.playerHost||(n.playerHost="//www.newstube.ru/embed/");window.onerror=function(t,i,r,u,f){n.diagnosticText(t+"\r\n"+i+" "+r+" "+u+"\r\n"+(f&&f.stack),3,2)};n.playerAppController="player";n.playerApp=""+n.playerHost+n.playerAppController+"/";t="hplayer-";i=function(){function i(){var t=this;this.stateUI=n.PlayerState.init;this.stateUIAd=n.PlayerAdState.None;this.playerControlsShowHold=!1;this.appRequest=0;this.pageAppIsActive=!1;this.controlShareClickHandler=function(){t.pageAppIsActive?t.appHide():(n.PlayerEvents.share(t.env),t.loadShareApp(t.env.guid,t.env.init.signature,!0))};this.videoPositionUpdate=function(){if(t.barTargetGetPosition){var i=t.barTargetGetPosition.getDuration(),r=t.barTargetGetPosition.getCurrentTime();t.playerControls.setDuration(i);t.playerControls.setPosition(r);t.playerControls.setBuffer(t.barTargetGetPosition.getBuffer());n.PlayerEvents.yandexTimeupdate(r,i)}};this.videoDurationChangeHandler=function(){var i=t.barTargetGetPosition?t.barTargetGetPosition.getDuration():0;t.playerControls.setDuration(i);t.barTargetGetPosition==t.playerVideo&&n.PlayerEvents.yandexTimeupdate(t.playerVideo.getCurrentTime(),t.playerVideo.getDuration())};this.videoVolumeChangeHandler=function(){t.barTargetCommon&&t.playerControls.setVolume(t.barTargetCommon.getVolume());t.volumeChangeHandlerInvoke()};this.videoEndedHandler=function(){function r(){return i.clearWait(),i.setUIState(n.PlayerState.end),i.setBarTargetVideo(),n.PlayerUtils.exitFullscreen(),i.playerControls.show(),i.playerControls.setDuration(i.mediaContext.mediaInfo.Duration),i.playerControls.setPosition(i.mediaContext.mediaInfo.Duration),i.playerControls.setPlayButtonView(n.PlayButtonView.Replay),i.showPostPlay().then(function(){},function(){})}var i=t;n.diagnosticText("videoEndedHandler");i.clearWait();i.setUIState(n.PlayerState.end);i.generateEventState(n.PlayerStateDetail.End);i.mediaContext.mediaEnded();i.showPostRoll().then(r)};this.videoPauseHandler=function(){n.diagnosticText("videoPauseHandler s state="+n.PlayerState[t.stateUI]);t.clearWait();t.setControlsPauseState();t.stateUI==n.PlayerState.a&&n.PlayerEvents.yandexPause(t.playerA.getCurrentTime());n.diagnosticText("videoPauseHandler e")};this.videoPlayHandler=function(){n.diagnosticText("videoPlayHandler s state="+n.PlayerState[t.stateUI]);t.clearWait();t.setControlsPlayBarState();t.setControlsPlayState();t.stateUI==n.PlayerState.a&&n.PlayerEvents.yandexStarted(t.playerA.getCurrentTime(),t.playerA.getDuration());n.diagnosticText("videoPlayHandler e")};this.loadInfoRequestId=0;this.playClickHandler=function(){n.diagnosticText("playClickHandler s");t.generateEventState(n.PlayerStateDetail.PlayClick);t.firstOnPlayInit();t.stopTimeout();t.env.autoplay=!1;var i=t.playerControls.getPlayButtonView();n.diagnosticText("PlayButtonView = "+n.PlayButtonView[i]);i==n.PlayButtonView.Play?t.play():i==n.PlayButtonView.Pause?t.pause():i==n.PlayButtonView.Replay&&t.replay();n.diagnosticText("playClickHandler e")};this.firstOnPlayReady=!1;this.firstOnPlayInit=function(){n.diagnosticText("firstOnPlayInit "+n.FeatureHelper.isSriptPlay+" "+n.FeatureHelper.videoPromised);t.playerA.userInteractionInit();t.playerVideo.userInteractionInit();t.env.autoplayEnable=t.firstOnPlayReady=!0;t.firstOnPlayInit=function(){}};this.resizeHandler=function(i,r){n.diagnosticText("resize: "+i+"x"+r);t.playerA.resize(i,r);t.playerVideo.resize&&t.playerVideo.resize(i,r);document.addEventListener||t.pageStart.resizeIE8(i,r)};this.startTimeout=function(n){return t.pageStart.start(n)};this.stopTimeout=function(){return t.pageStart.stop()};this.fullscreenClickHandler=function(){if(n.diagnosticText("fullscreenClickHandler document: "+n.PlayerUtils.isFullscreen()+" target: "+(t.barTargetCommon&&t.barTargetCommon.isFullscreen())),n.PlayerUtils.isFullscreen()||t.barTargetCommon&&t.barTargetCommon.isFullscreen())n.PlayerUtils.exitFullscreen(),t.barTargetCommon&&t.barTargetCommon.endFullscreen(),t.playerA.playerFullscreenState(!1);else{var i=n.PlayerUtils.requestFullscreen(t.playerForm);i&&t.playerA.playerFullscreenState(!0)}t.setUIStateViewMode()};this.fullscreenBeginBarTargetHandler=function(){n.diagnosticText("enter video fullscreen")};this.fullscreenEndBarTargetEndHandler=function(){n.diagnosticText("exit video fullscreen")};this.fullscreenHandler=function(){n.diagnosticText("fullscreen "+n.PlayerUtils.isFullscreen());t.setUIStateViewMode();n.PlayerUtils.isFullscreen()?n.diagnosticText("enter fullscreen"):n.diagnosticText("exit fullscreen")};this.volumeChangeHandler=function(){t.volumeChangeTimeout=null;var i=t.playerControls.getVolume();t.volumeCurrent!=i&&(t.volumeCurrent=i,n.PlayerEvents.yandexVolumechange(i,t.playerControls.getMuted()),t.onVolumeChange&&t.onVolumeChange(i))};this.videoSeekHandler=function(i,r){t.videoSeekTimeout=null;n.PlayerEvents.yandexRewound(i,r);t.onVideoSeek&&t.onVideoSeek(i,r)}}return i.prototype.init=function(t,i){return __awaiter(this,void 0,void 0,function(){var r=this;return __generator(this,function(){return n.diagnosticText("init"),this.rootElement=t,this.playerForm=n.CH.getElementByClassName(this.rootElement,"hplayer-form"),this.playerForm&&(this.initUI(),this.setWait(),this.env.setFlashvars(i),i.hideControls&&n.CH.addClass(this.playerForm,"hplayer-hidecontrols"),this.initEvents(),this.initControlValues()),n.diagnosticText("scriptPlayPromise "+!!n.FeatureHelper.scriptPlay),n.FeatureHelper.scriptPlay.then(function(){n.diagnosticText("init promise start");r.initInstance();r.generateStartEvent();r.env.init.guid&&r.env.init.guid!="00000000-0000-0000-0000-000000000000"?r.load(r.env.init.guid,r.env.init.autoplay,0,!0):r.clearWait()},function(){return n.diagnosticText("scriptPlayError {e}")}),n.diagnosticText("initEnd"),[2]})})},i.prototype.initMediaContext=function(t,i,r){return this.env.guid=t,this.mediaContext=new n.MediaContext(t,this),this.initPlayerControls(),this.playerControls.setSeekable(!1),this.generateEventState(n.PlayerStateDetail.Init),this.mediaContext.updateStartPageOrSetError(),this.mediaContext.applyAutoPlay(i,r)},i.prototype.initControlValues=function(){n.diagnosticText("initControlValues");var t=.7;this.playerVideo.setVolume(t);this.playerControls.setVolume(t);this.volumeChangeHandlerInvoke()},i.prototype.initLogToClipboard=function(){function f(){t.length==3&&t[0]==1&&t[1]==2&&t[2]==1&&n.ClipboardHelper.copyText(n.playerLogs.map(function(t){return n.FormatHelper.getYYMMDD_HHMMSSMS(t.time)+": "+t.text}).join("\r\n"))}var t=[],i,r,u;document.addEventListener&&(i=0,r=this.playerForm.getElementsByClassName("hplayer-bar-controls")[0],r&&(u=r.getElementsByClassName("hplayer-bar-share")[0],u&&(r.addEventListener("click",function(u){u.target===r&&(i?(t.push(i),i=0):(f(),n.diagnosticText("check: "+t.length),t=[]))}),u.addEventListener("click",function(){i++;n.diagnosticText("c: "+i)}))))},i.prototype.initUI=function(){n.diagnosticText("initUI");this.initUIClasses();this.pagePostPlay=n.CH.getElementByClassName(this.playerForm,"hplayer-page-postplay");this.pageApp=n.CH.getElementByClassName(this.playerForm,"hplayer-page-app");this.infoContainerElement=n.CH.getElementByClassName(this.playerForm,"hplayer-info-container");this.pageMessage=n.CH.getElementByClassName(this.playerForm,"hplayer-page-message");this.pageMessage&&(this.pageMessageP=this.pageMessage.getElementsByTagName("p")[0]);this.playerVideoWrap=n.CH.getElementByClassName(this.playerForm,"hplayer-video-wrap");this.playerVideoWrap&&(this.playerVideo=new n.PlayerVideoUniversal(this.playerVideoWrap,this),this.playerA=new n.PlayerAd(this.playerVideoWrap,this));this.env=new n.PlayerEnv(this);this.pageStart=new n.PlayerPageStart(n.CH.getElementByClassName(this.playerForm,"hplayer-page-start"),this);this.playerControls=new n.PlayerControls(n.CH.getElementByClassName(this.playerForm,"hplayer-controls"),this);this.playerControls.hide();this.pageProgress=new n.PlayerPageProgress(n.CH.getElementByClassName(this.playerForm,"hplayer-page-progress"),this)},i.prototype.initEvents=function(){var t=this;n.resizeSensor(this.playerForm,this.resizeHandler);n.UserFocus(this.playerForm);this.playerControls.onPlayClick=this.playerVideo.onClick=this.pageStart.onClick=this.playerControls.onScreenButtonClick=this.playClickHandler;this.playerControls.onPositionChange=function(n){t.barTargetPlaySetPosition&&t.barTargetPlaySetPosition.setCurrentTime(n)};this.playerControls.onVolumeChange=function(){t.barVolumeChange();t.volumeChangeHandlerInvoke()};this.playerControls.onFullscreen=this.fullscreenClickHandler;this.playerControls.onShareClick=this.controlShareClickHandler;n.FeatureHelper.fullscreenSupport&&(document.addEventListener("webkitfullscreenchange",this.fullscreenHandler),document.addEventListener("mozfullscreenchange",this.fullscreenHandler),document.addEventListener("MSFullscreenChange",this.fullscreenHandler),document.addEventListener("fullscreenchange",this.fullscreenHandler));this.playerVideo.onEnded=this.videoEndedHandler;this.playerVideo.onSeeked=function(n,i){t.videoSeekInvoke(n,i)}},i.prototype.initPlayerControls=function(){this.playerControls.setPosition(0);this.playerControls.setBuffer(null);this.playerControls.setPlayButtonView(n.PlayButtonView.Play)},i.prototype.clearActiveContext=function(){n.diagnosticText("clearActiveContext");this.barTargetPlaySetPosition=null;this.setBarEventPlay(null);this.setBarEventCommon(null);this.setBarTargetCommon(null);this.barTargetGetPosition=null;this.setBarEventPosition(null);this.setBarEventPosition(null)},i.prototype.setBarTargetVideo=function(){n.diagnosticText("setBarTargetVideo");this.setBarEventCommon(this.playerVideo);this.setBarTargetCommon(this.playerVideo);this.barTargetGetPosition=this.playerVideo;this.setBarEventPosition(this.playerVideo);this.setBarEventPlay(this.mediaContext);this.setBarTargetPlaySetPosition(this.mediaContext);this.playerControlsShowHold=!1;this.playerControls.setSeekable(!0);this.videoPositionUpdate()},i.prototype.setBarTargetA=function(t){n.diagnosticText("setBarTargetA "+t);this.setBarEventCommon(this.playerA);this.barTargetCommon=this.playerA;this.playerControlsShowHold=!1;t===n.PlayerAdState.PreRoll||t===n.PlayerAdState.PostRoll?(this.barTargetGetPosition=this.playerA,this.setBarEventPosition(this.playerA),this.setBarEventPlay(this.playerA),this.setBarTargetPlaySetPosition(this.playerA),this.playerControls.setSeekable(!1)):t===n.PlayerAdState.PauseRoll&&(this.barTargetGetPosition=this.playerVideo,this.setBarEventPosition(this.playerVideo),this.setBarEventPlay(this.mediaContext),this.setBarTargetPlaySetPosition(new n.AdPauseRollTarget(this,this.mediaContext)),this.playerControls.setSeekable(!0));this.videoPositionUpdate()},i.prototype.setBarTargetPlaySetPosition=function(n){this.barTargetPlaySetPosition=n},i.prototype.setBarTargetCommon=function(t){this.barTargetCommon=t;var i=!!t&&n.FeatureHelper.volumeEnable;this.playerControls.setVolumeVisible(i);i&&t.setVolume(this.playerControls.getVolume())},i.prototype.setBarEventCommon=function(n){this.barEventCommon&&(this.barEventCommon.onVolumeChange=null,this.barEventCommon.onBeginFullScreen=null,this.barEventCommon.onEndFullScreen=null);n&&(n.onVolumeChange=this.videoVolumeChangeHandler,n.onBeginFullScreen=this.fullscreenBeginBarTargetHandler,n.onEndFullScreen=this.fullscreenEndBarTargetEndHandler);this.barEventCommon=n},i.prototype.setBarEventPlay=function(n){this.barEventPlay&&(this.barEventPlay.onPlaying=null,this.barEventPlay.onPause=null);n&&(n.onPlaying=this.videoPlayHandler,n.onPause=this.videoPauseHandler);this.barEventPlay=n},i.prototype.setBarEventPosition=function(n){this.barEventPosition&&(this.barEventPosition.onCurrentTimeChange=null,this.barEventPosition.onDurationChange=null);n&&(n.onCurrentTimeChange=this.videoPositionUpdate,n.onDurationChange=this.videoDurationChangeHandler);this.barEventPosition=n},i.prototype.setElementStyle=function(){},i.prototype.initInstance=function(){var i=this,t,r;n.diagnosticText("initParentElement");t=this.rootElement;t.load=function(n,t,r,u){return u===void 0&&(u=!1),i.load(n,t,r,u)};t.firstClickInit=function(){return i.firstOnPlayInit()};t.loadWithState=function(n){return i.load(n,!0)};t.play=function(){return i.play()};t.pause=function(){return i.pause()};t.startTimeout=this.startTimeout;t.stopTimeout=this.stopTimeout;t.mute=function(){return i.setMuted(!0)};t.unmute=function(){return i.setMuted(!1)};t.getPlayPosition=function(){return i.playerVideo.getCurrentTime()};r=n.parentElement;r&&(r.load=t.load,r.firstClickInit=t.firstClickInit,r.loadWithState=t.loadWithState,r.play=t.play,r.pause=t.pause,r.notifyVisible=t.notifyVisible,r.startTimeout=t.startTimeout,r.stopTimeout=t.stopTimeout,r.mute=t.mute,r.unmute=t.unmute,r.getPlayPosition=t.getPlayPosition);window.onmessage=function(n){var t=n.data;if(t)switch(t.method){case"play":i.play();break;case"pause":i.pause();break;case"setVolume":t.volume!=null&&i.setVolume(parseFloat(t.volume));break;case"seek":t.time!=null&&i.seek(parseFloat(t.time));break;case"mute":i.setMuted(!0);break;case"unmute":i.setMuted(!1)}}},i.prototype.initCatchError=function(){},i.prototype.initUIClasses=function(){n.FeatureHelper.InlineSvg||n.CH.addClass(this.playerForm,"hplayer-no-inlinesvg");n.FeatureHelper.ie8&&n.CH.addClass(this.playerForm,"hplayer-ie8");this.setUIStateViewMode()},i.prototype.setUIStateViewMode=function(){(n.PlayerUtils.isFullscreen()?n.PlayerCHHelper.viewModeFullscreenSet:n.PlayerCHHelper.viewModeNormalSet)(this.playerForm)},i.prototype.loadApp=function(i,r,u){if(this.pageApp){this.appDoShow=u;this.activeApp&&(n.PlayerCHHelper.activeClear(this.activeApp),this.activeApp=null);var f=document.getElementById(i);f||(f=document.createElement("div"),f.id=i,this.pageApp.appendChild(f),f=document.getElementById(i),n.CH.addClass(f,t+"loading"),n.CH.addClass(f,t+"app"));f&&(this.activeApp=f,n.PlayerCHHelper.activeClear(this.activeApp),n.CH.checkClass(f,t+"loading")?r(i,++this.appRequest):this.appDoShow&&this.appShow())}},i.prototype.setAppCode=function(i,r,u){var s=this,f,o,e;if(this.appRequest===r){for(f=document.getElementById(i),n.CH.removeClass(f,t+"loading"),f.innerHTML=u,o=n.CH.getElementsByClassName(f,t+"app-close-button"),e=0;e<o.length;e++)n.CH.addClickListener(o[e],function(){return s.appHide()});this.appDoShow&&this.appShow()}},i.prototype.appShow=function(){this.pageAppIsActive=!0;n.PlayerCHHelper.active(this.activeApp);n.CH.addClass(this.playerForm,"hplayer-app");this.appDoShow=!1},i.prototype.appHide=function(){n.CH.removeClass(this.playerForm,"hplayer-app");this.pageAppIsActive=!1;this.activeApp&&(n.PlayerCHHelper.activeClear(this.activeApp),this.activeApp=null)},i.prototype.setMuted=function(n){this.playerControls.setMuted(n)},i.prototype.setVolume=function(n){this.playerControls.setVolume(n);this.barVolumeChange();this.volumeChangeHandlerInvoke()},i.prototype.loadShareApp=function(t,i,u){var f=this,e="hplayer-app-share-"+t;this.loadApp(e,function(i,u){r.getShareHtml(t).then(function(t){if(f.setAppCode(i,u,t),document.addEventListener){var r=document.getElementById(i);r&&r.addEventListener("copy",function(t){if(window.getSelection().toString()=="вместе с"){var i=n.playerLogs.map(function(t){return n.FormatHelper.getYYMMDD_HHMMSSMS(t.time)+": "+t.text}).join("\r\n");t.clipboardData?(t.clipboardData.setData("text/plain",i),console.log("copy 1")):window.clipboardData&&(window.clipboardData.setData("Text",i),console.log("copy 2"));t.preventDefault()}})}})},u)},i.prototype.setMessage=function(n){this.pageMessageP&&(this.pageMessageP.innerHTML=n)},i.prototype.setError=function(t){this.clearWait();this.setUIState(n.PlayerState.error);this.playerControls.show();this.setMessage(t);this.generateEventState(n.PlayerStateDetail.Error)},i.prototype.generateStartEvent=function(){var t,i;n.parentElement&&(t=window.parent||window,t.playerReady&&t.playerReady(),n.parentElement.dispatchEvent&&(i=new CustomEvent("NTPlayerReady"),n.parentElement.dispatchEvent(i)))},i.prototype.generateEventState=function(t){var i,r,u;n.parentElement&&(i=window.parent||window,t===n.PlayerStateDetail.PlayStarting&&(i.playerStart&&i.playerStart(),n.parentElement.dispatchEvent&&(r=new CustomEvent("NTPlayerStart"),n.parentElement.dispatchEvent(r))),i.playerState?(n.diagnosticText("playerState "+t),i.playerState(t,{lastAd:!!(this.env&&this.env.lastAd)})):n.diagnosticText("playerState "+t+" skip"),n.parentElement.dispatchEvent&&(u=new CustomEvent("NTPlayerStateChange",{detail:{state:t,lastAd:!!(this.env&&this.env.lastAd)}}),n.parentElement.dispatchEvent(u)))},i.prototype.showPostRoll=function(){this.setUIState(n.PlayerState.a);var t=this.createAdContextForPostroll();return t.start()},i.prototype.showPostPlay=function(){var t=this;return this.env.init.location&&this.env.init.location.toUpperCase()==="RAMBLER"?Promise.resolve(null):(this.playerControls.show(),this.loadPostPlay().then(function(){t.setUIState(n.PlayerState.postplay);t.generateEventState(n.PlayerStateDetail.PostPlay);n.PlayerEvents.postPlay(t.env)}))},i.prototype.videoErrorHandler=function(){n.diagnosticText("videoErrorHandler",0,2)},i.prototype.barVolumeChange=function(){this.barTargetCommon&&this.barTargetCommon.setVolume(this.playerControls.getVolume())},i.prototype.setControlsPauseState=function(){n.diagnosticText("setControlsPauseState");this.playerControls.setPlayButtonView(n.PlayButtonView.Play);this.playerControlsShowHold||this.playerControls.show()},i.prototype.setControlsPlayState=function(){this.playerControls.setPlayButtonView(n.PlayButtonView.Pause)},i.prototype.setControlsPlayBarState=function(){this.playerControlsShowHold||this.playerControls.showOnFocus()},i.prototype.loadInfo=function(t){var i=this,r;this.infoContainerElement&&(this.setUIState(n.PlayerState.info),this.infoContainerElement.innerHTML="",r=++this.loadInfoRequestId,n.PlayerUtils.GetText(n.playerApp+t,this.env).then(function(n){r===i.loadInfoRequestId&&(i.infoContainerElement.innerHTML=n)}))},i.prototype.loadPostPlay=function(){var t=this;return this.pagePostPlay.innerHTML="",n.PlayerUtils.GetText(n.playerApp+"postplay",this.env).then(function(n){t.pagePostPlay.innerHTML=n})},i.prototype.getTargetingContext=function(){return this.env.getAdContext()},i.prototype.createAdContextForPreroll=function(){return this.createAdContext(n.PlayerAdState.PreRoll)},i.prototype.createAdContextForPostroll=function(){return this.createAdContext(n.PlayerAdState.PostRoll)},i.prototype.createAdContextForPauseRoll=function(){return this.createAdContext(n.PlayerAdState.PauseRoll)},i.prototype.createAdContext=function(t){var i=this;return(t===n.PlayerAdState.PreRoll||t===n.PlayerAdState.PostRoll)&&this.setWait(!1),this.adLinearContext&&this.adLinearContext.abort(),this.adLinearContext=new n.AdLinearContext(this,t),this.adLinearContext.onStart=function(){i.pageProgress.clearWait();i.setUIState(n.PlayerState.a);i.setUIAdState(t);i.setBarTargetA(t);i.videoPositionUpdate();t===n.PlayerAdState.PreRoll?i.generateEventState(n.PlayerStateDetail.PreRoll):t===n.PlayerAdState.PostRoll?i.generateEventState(n.PlayerStateDetail.PostRoll):t===n.PlayerAdState.PauseRoll&&i.generateEventState(n.PlayerStateDetail.PauseRoll)},this.adLinearContext.onComplete=function(){i.clearActiveContext()},this.adLinearContext},i.prototype.setUIState=function(t){var u="hplayer-"+n.PlayerState[this.stateUI].toString(),r="hplayer-"+n.PlayerState[t].toString(),i=this.playerVideo.getDuration();!i&&this.mediaContext.mediaInfo&&(i=this.mediaContext.mediaInfo.Duration);t==n.PlayerState.a?n.PlayerEvents.setState(t,this.stateUI,null,null,this.playerA.getCurrentTime(),this.playerA.getDuration()):n.PlayerEvents.setState(t,this.stateUI,this.playerVideo.getCurrentTime(),i,null,null);this.stateUI=t;n.diagnosticText("state = "+r);n.CH.removeClass(this.playerForm,u);n.CH.addClass(this.playerForm,r);t!==n.PlayerState.a&&this.setUIAdState(n.PlayerAdState.None)},i.prototype.setUIAdState=function(t){var r=this.stateUIAd===n.PlayerAdState.None?null:"hplayer-a-e-"+n.PlayerAdState[this.stateUIAd].toString().toLowerCase(),i=t===n.PlayerAdState.None?null:"hplayer-a-e-"+n.PlayerAdState[t].toString().toLowerCase();this.stateUIAd=t;n.diagnosticText("state-ui-ad = "+i);r!=null&&n.CH.removeClass(this.playerForm,r);i!=null&&n.CH.addClass(this.playerForm,i)},i.prototype.play=function(){this.generateEventState(n.PlayerStateDetail.Play);n.PlayerEvents.mediaPlay(this.env);this.stateUI==n.PlayerState.start||this.stateUI==n.PlayerState.init?this.mediaContext.v3StartToPlay():(this.playPauseCommandSend(1),this.barTargetPlaySetPosition?this.playPauseCommandReceive():this.playerControls.setPlayButtonView(n.PlayButtonView.Pause))},i.prototype.pause=function(){this.generateEventState(n.PlayerStateDetail.Pause);n.PlayerEvents.mediaPause(this.env);this.playPauseCommandSend(2);this.barTargetPlaySetPosition?this.playPauseCommandReceive():this.playerControls.setPlayButtonView(n.PlayButtonView.Play)},i.prototype.replay=function(){this.generateEventState(n.PlayerStateDetail.Replay);n.PlayerEvents.mediaReplay(this.env);this.playPauseCommandSend(3);this.barTargetPlaySetPosition?this.playPauseCommandReceive():this.playerControls.setPlayButtonView(n.PlayButtonView.Pause)},i.prototype.playPauseCommandSend=function(n){this.playPauseCommand=n},i.prototype.playPauseCommandReceive=function(){if(this.barTargetPlaySetPosition){var n=this.enqPlayPauseCommand();switch(n){case 1:this.barTargetPlaySetPosition.play();break;case 2:this.barTargetPlaySetPosition.pause();break;case 3:this.barTargetPlaySetPosition.replay()}}},i.prototype.enqPlayPauseCommand=function(){var n=this.playPauseCommand;return this.playPauseCommand=null,n},i.prototype.setWait=function(n,t){n===void 0&&(n=!1);t===void 0&&(t=null);this.pageProgress.setWait(n,t)},i.prototype.clearWait=function(){this.pageProgress.clearWait()},i.prototype.load=function(t,i,r,u){return r===void 0&&(r=0),u===void 0&&(u=!1),__awaiter(this,void 0,void 0,function(){var f;return __generator(this,function(e){switch(e.label){case 0:if(this.env.guid===t)return[2];this.mediaContext&&this.mediaContext.abort();t?n.diagnosticText("load "+t+" "+i+" "+r+" "+u):n.diagnosticText("load ignore empty guid",0,2);e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.initMediaContext(t,i,u)];case 2:return e.sent(),!i&&r&&this.mediaContext.displayTimeout(r),[3,4];case 3:return f=e.sent(),n.diagnosticText("loadEnd error: "+(f&&f.toString()||"<null>"),0,2),[3,4];case 4:return n.diagnosticText("loadEnd guid:"+t+" play:"+i+" timeout:"+r+" autoplay:"+u),[2]}})})},i.prototype.loadWithState=function(n,t){this.env.oldState=t;this.load(n,!0)},i.prototype.volumeChangeHandlerInvoke=function(){this.volumeChangeTimeout||(this.volumeChangeTimeout=setTimeout(this.volumeChangeHandler,10))},i.prototype.seek=function(n){var t=this.playerVideo.getCurrentTime();this.playerVideo.setCurrentTime(n)},i.prototype.videoSeekInvoke=function(n,t){this.videoSeekHandler(n,t)},i}();n.Player=i;n.version="3.6.7";n.diagnosticText("player version: "+n.version,0,3);r=function(){function t(){}return t.getShareHtml=function(t){var i=n.playerApp+"share?guid="+t,r=function(t){return n.Utils.getTextByAny(t)};return r(i)},t}()}(newstube3||(newstube3={})),function(n){var t;(function(t){"use strict";function i(t,i,u,f,e){if(f!=null){var o=document.getElementById(t);o&&(f&&n.PlayerEvents.init(f.location),n.PlayerEvents.creating(f),r(t,i,u,f,e))}}function r(t,i,r,e,o){var s=document.getElementById(t),h,c;if(s){if(h={},o&&typeof o=="object")for(c in o)h[c]=o[c];h.id=t;f(e.template).then(function(t){s.innerHTML=t;for(var u in h)h[u]!=Object.prototype[u]&&s.setAttribute(u,h[u]);i&&(s.style.width=n.PlayerUtils0.toStyleValue(i));r&&(s.style.height=n.PlayerUtils0.toStyleValue(r))},function(){var t="ошибка чтения формы. "+n.PlayerUtils.getHostUrl();n.PlayerEvents.error(t);n.diagnosticText(t,0,2)}).then(function(){return u(s,e)},function(){return n.diagnosticText("ошибка инициализации плеера",0,2)})}}function u(n,i){var r=null;return n&&(r=n.newstubePlayerInstance,r||(r=n.newstubePlayerInstance=new t,r.init(n,i))),r}function f(t){t==null&&(t="default");var i=n.playerStaticHost+"template/"+t+"/form.htm?rnd="+n.Utils0.generateUUID(),r=function(t){return n.Utils.getTextByAny(t)};return r(i)}t.createInstance=i;setTimeout(function(){for(n.diagnosticText("playerStaticHost = "+n.playerStaticHost);n.pa&&n.pa.length;){var t=n.pa.pop();t&&t()}},0)})(t=n.Player||(n.Player={}))}(newstube3||(newstube3={})),function(n){var t,i;(function(n){n[n.Play=0]="Play";n[n.Pause=1]="Pause";n[n.Replay=2]="Replay"})(t=n.PlayButtonView||(n.PlayButtonView={}));i=function(){function i(n,t){this.controlsElement=n;this.player=t;this.volumeDefault=.7;this.buffer=0;this.isHide=!1;this.showState=0;this.rootElement=t.playerForm;this.init();this.initEvents()}return i.prototype.init=function(){this.controlsElement&&(this.screenButtonElement=n.CH.getElementByClassName(this.controlsElement,"hplayer-screenbutton"),this.barElement=n.CH.getElementByClassName(this.controlsElement,"hplayer-bar"),this.barElement&&(this.barControls=n.CH.getElementByClassName(this.barElement,"hplayer-bar-controls"),this.barControls&&(this.barPlayElement=n.CH.getElementByClassName(this.barControls,"hplayer-bar-play"),this.barProgressElement=n.CH.getElementByClassName(this.controlsElement,"hplayer-bar-progress"),this.barProgressElement&&(this.controlsProgress=n.Slider.create(this.barProgressElement,{level:"hplayer-value"}),this.controlsProgress&&this.controlsProgress.setValue(0),this.barProgressBgElement=n.CH.getElementByClassName(this.barProgressElement,"hplayer-bg"),this.barProgressBgElement&&(this.barProgressBallElement=this.barProgressBgElement.getElementsByTagName("b")[0],this.setSeekable(!0))),this.barDurationElement=n.CH.getElementsByClassName(this.barControls,"hplayer-bar-duration")[0],this.barDurationElement&&(this.barPositionElement=n.CH.getElementsByClassName(this.barDurationElement,"hplayer-position")[0],n.CH.setTextContent(this.barPositionElement,n.FormatHelper.getTimeFormated(0)),this.playerDurationElement=n.CH.getElementsByClassName(this.barDurationElement,"hplayer-duration")[0],this.setDuration(0)),this.barFullscreenElement=n.CH.getElementsByClassName(this.barControls,"hplayer-bar-fullscreen")[0],!n.FeatureHelper.fullscreenSupport&&this.barFullscreenElement&&(this.barFullscreenElement.style.display="none",this.barFullscreenElement=null),this.barShareElement=n.CH.getElementsByClassName(this.barControls,"hplayer-bar-share")[0],this.barVolumeLevelElement=n.CH.getElementsByClassName(this.barControls,"hplayer-bar-volume-level")[0],this.barVolumeLevelElement&&(this.controlsVolume=n.Slider.create(this.barControls,{container:"hplayer-bar-volume-level",level:"hplayer-value",offset:"hplayer-bg"}),this.volume=this.controlsVolume.getValue(),this.speakerUpdate()),this.barVolumeSpeakerElement=n.CH.getElementByClassName(this.barControls,"hplayer-bar-volume-speaker"),this.setPlayButtonView(t.Play))))},i.prototype.initEvents=function(){var t=this;this.screenButtonElement&&n.CH.addClickListener(this.screenButtonElement,function(n){return t.onScreenButtonClick&&t.onScreenButtonClick(n)});this.barVolumeSpeakerElement&&n.CH.addClickListener(this.barVolumeSpeakerElement,function(){return t.setMuted(!t.getMuted())});this.barPlayElement&&n.CH.addClickListener(this.barPlayElement,function(n){return t.onPlayClick&&t.onPlayClick(n)});this.barShareElement&&n.CH.addClickListener(this.barShareElement,function(n){return t.onShareClick&&t.onShareClick(n)});this.controlsVolume&&(this.controlsVolume.onSetValue=function(n){t.volume=n;t.speakerUpdate();t.onVolumeChange&&t.onVolumeChange(n)});this.barFullscreenElement&&n.CH.addClickListener(this.barFullscreenElement,function(){return t.onFullscreen&&t.onFullscreen()});this.controlsProgress&&(this.controlsProgress.onSetValue=function(n){t.position=n*t.duration;t.onPositionChange&&t.onPositionChange(t.position)})},i.prototype.setVolumeVisible=function(t){this.barVolumeLevelElement&&(t?n.CH.removeClass(this.barVolumeLevelElement,"hide"):n.CH.addClass(this.barVolumeLevelElement,"hide"))},i.prototype.setDuration=function(t){t<=1||t!=this.duration&&(this.duration=t,isNaN(t)||t<=0?n.PlayerCHHelper.hide(this.barDurationElement):this.playerDurationElement&&(n.PlayerCHHelper.hideClear(this.barDurationElement),n.CH.setTextContent(this.playerDurationElement,n.FormatHelper.getTimeFormated(t))))},i.prototype.setPosition=function(t){this.controlsProgress&&this.controlsProgress.setValue(t/this.duration);isNaN(t)||t<=0?n.PlayerCHHelper.hide(this.barDurationElement):this.barPositionElement&&(n.PlayerCHHelper.hideClear(this.barDurationElement),n.CH.setTextContent(this.barPositionElement,n.FormatHelper.getTimeFormated(t)))},i.prototype.setSeekable=function(n){this.controlsProgress&&this.controlsProgress.setUserInteractiveEnable(n)},i.prototype.setBuffer=function(t){var e,i,h,c;if(this.barProgressBgElement){var r=t&&this.duration>0?t.length:0,u=n.CH.getElementsByClassName(this.barProgressBgElement,"hplayer-buffer"),f=u?u.length:0;if(f>r)for(i=f-1;i>=r;i--)this.barProgressBgElement.removeChild(u[i]);else if(f<r)for(i=f;i<r;i++)e=document.createElement("div"),e.className="hplayer-buffer",this.barProgressBgElement.insertBefore(e,this.barProgressBgElement.firstChild);for(i=0;i<r;i++){var l=u[i],a=t.start(i),v=t.end(i),o=(v-a+.1)/this.duration*100,s=a/this.duration*100;s+o>100&&(o=100-s);h=o+"%";c=s+"%";try{l.style.width=h;l.style.left=c}catch(y){e.setAttribute("style","width:"+h+";left:"+c)}}}},i.prototype.setPlayButtonView=function(i){this.controlsElement&&(this.playButtonView!=null&&n.CH.removeClass(this.controlsElement,"hplayer-control-state-"+t[this.playButtonView].toLowerCase()),this.playButtonView=i,n.CH.addClass(this.controlsElement,"hplayer-control-state-"+t[i].toLowerCase()))},i.prototype.getPlayButtonView=function(){return this.playButtonView},i.prototype.getMuted=function(){return!this.volume},i.prototype.setMuted=function(n){this.getMuted()!==n&&(n?(this.volumeUnmute=this.volume,this.volume=0):(this.volume=this.volumeUnmute?this.volumeUnmute:this.volumeDefault,this.volumeUnmute=0));this.speakerUpdate();this.controlsVolume.setValue(this.volume);this.onVolumeChange&&this.onVolumeChange(this.volume)},i.prototype.getVolume=function(){return this.volume},i.prototype.setVolume=function(n){n>1?n=1:n<0&&(n=0);this.volume=n;this.speakerUpdate();this.controlsVolume&&this.controlsVolume.setValue(n)},i.prototype.speakerUpdate=function(){var t=i.getSpeakerClass(this.volume);t!=this.spearkerPrevClass&&n.CH.removeClass(this.controlsElement,this.spearkerPrevClass);n.CH.addClass(this.controlsElement,t);this.spearkerPrevClass=t},i.getSpeakerClass=function(n){return"hplayer-volumestate-"+i.getSpeakerIndex(n)},i.getSpeakerIndex=function(n){return Math.ceil(n*3)},i.getSpeakerVolume=function(n){return n?n/3:0},i.prototype.show=function(){n.PlayerCHHelper.hideClear(this.controlsElement);n.PlayerCHHelper.active(this.controlsElement);this.isHide=!1;this.showState=1},i.prototype.showOnFocus=function(){n.PlayerCHHelper.hideClear(this.controlsElement);n.PlayerCHHelper.activeClear(this.controlsElement);this.isHide=!1;this.showState=2},i.prototype.hide=function(){n.PlayerCHHelper.activeClear(this.controlsElement);n.PlayerCHHelper.hide(this.controlsElement);this.isHide=!0;this.showState=0},i.prototype.setShowState=function(n){this.showState=n;switch(n){case 0:this.hide();break;case 1:this.show();break;case 2:this.showOnFocus()}},i.prototype.hideScreenButton=function(){},i}();n.PlayerControls=i}(newstube3||(newstube3={})),function(n){var t=function(){function t(t){var i=this;this.context=t;this.getFullscreen=function(){return n.PlayerUtils.isFullscreen()||i.context.playerVideo.isFullscreen()};this.getSize=function(){return{width:i.context.playerForm.offsetWidth,height:i.context.playerForm.offsetHeight}};this.lastAd=!1;this.autoplayEnable=!1;this.mediaStartPosition=0}return t.prototype.getAdContext=function(){return this.fullscreen=this.getFullscreen(),this.size=this.getSize(),this.url=n.PlayerUtils.getHostUrl(),this},t.prototype.setFlashvars=function(t){t.autoplay=!!t.autoplay;t.placement=typeof t.placement=="undefined"?n.PlayerPlacement.embed:t.placement;typeof t.location=="undefined"&&(t.location="external");this.init=t;t.state=="CAM1"&&(this.lastAd=!0)},t}();n.PlayerEnv=t}(newstube3||(newstube3={})),function(n){var t;(function(t){function s(){var t=n.PlayerUtils.getHostUrl(),i=t&&t.match("^https?://(www|m).newstube.ru/")&&!t.match("^https?://www.newstube.ru/embed/");i&&(typeof ga=="undefined"&&(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},window.ga.l=+new Date,n.Utils.script("//www.google-analytics.com/analytics.js")),ga("create","UA-4654970-1","auto","ntp"),u=!0)}function i(n,t){u&&ga("ntp.send",{hitType:"event",eventCategory:"Player",eventAction:""+n,eventLabel:t})}function h(n){i("creating",n.guid);ct()}function c(n){i("createdFlash",n.guid)}function l(n,t){i("mediaStartPage",t.Guid)}function a(n,t){i("mediaAutoPlay",t)}function v(n,t){i("mediaCounterView",t.Guid)}function y(n){i("mediaPlay",n.guid)}function p(n){i("mediaPause",n.guid)}function w(n){i("mediaReplay",n.guid)}function b(n,t){var r=Math.floor(t/1e3).toString();t>=6e4?r="[60, )":t>=1e4?r="[10, 60)":t>=5e3?r="[5, 10)":t>=2e3&&(r="[2, 5)");i("contentLoadTime",r)}function k(t,r,u){i(n.PlayerAdState[r]+"Success-html5",u.toString())}function d(t,r,u){i(n.PlayerAdState[r]+"Starting-html5",u.toString())}function g(t,r,u){i(n.PlayerAdState[r]+"Started-html5",u.toString())}function nt(t,r,u){i(n.PlayerAdState[r]+"Error-html5",u&&u.toString())}function tt(n,t){if(u&&t!=303){var r=n.id||n.Inner&&n.Inner.Creatives&&n.Inner.Creatives.length&&n.Inner.Creatives[0].AdID||"",f=n.parent.parentAd?n.Inner&&n.Inner.AdSystem&&n.Inner.AdSystem.Value||"":"nt",e="Vast-"+f+"-"+r+"-"+t;ga("ntp.send","exception",{exDescription:e,exFatal:!1});i("VastError-"+f+"-"+r,t&&t.toString())}}function it(n){i("postPlay",n.guid)}function rt(n){i("share",n.guid)}function ut(n,t){i("hlsError",t)}function ft(n){i("error",n)}function et(){r(null,101)}function ot(){r(null,5)}function f(){r(null,0)}function st(n){switch(n){default:case 0:f();break;case 1:case 2:case 3:r(null,5);break;case 4:case 5:case 8:r(null,100);break;case 6:r(null,102);break;case 7:r(null,103)}}function ht(t,i,r,u,f,s){if((!r||r<0)&&(r=0),(!u||u<0)&&(u=0),(!f||f<0)&&(r=null),(!s||s<0)&&(s=0),t!=i)switch(t){case n.PlayerState.play:e(r,u);break;case n.PlayerState.pause:o(r);break;case n.PlayerState.end:lt(u);break;case n.PlayerState.a:at(f,s)}}function ct(){window&&window.parent&&window.parent.postMessage&&window.parent.postMessage({event:"inited"},"*")}function e(n,t){(!n||n<0)&&(n=0);window&&window.parent&&window.parent.postMessage&&window.parent.postMessage({event:"started",time:n,duration:t},"*")}function o(n){(!n||n<0)&&(n=0);window&&window.parent&&window.parent.postMessage&&window.parent.postMessage({event:"paused",time:n},"*")}function lt(n){(!n||n<0)&&(n=0);window&&window.parent&&window.parent.postMessage&&window.parent.postMessage({event:"ended",time:n},"*")}function r(n,t){(!n||n<0)&&(n=0);window&&window.parent&&window.parent.postMessage&&window.parent.postMessage({event:"error",time:n,code:t},"*")}function at(n,t){(!n||n<0)&&(n=0);window&&window.parent&&window.parent.postMessage&&window.parent.postMessage({event:"adShown",time:n,duration:t},"*")}function vt(n,t){window&&window.parent&&window.parent.postMessage&&window.parent.postMessage({event:"timeupdate",time:n,duration:t},"*")}function yt(n,t){if(window&&window.parent&&window.parent.postMessage){var i={event:"volumechange",volume:n,muted:t};window.parent.postMessage(i,"*")}}function pt(n,t){window&&window.parent&&window.parent.postMessage&&window.parent.postMessage({event:"rewound",time:n,previousTime:t},"*")}var u=!1;t.init=s;t.creating=h;t.createdFlash=c;t.startPage=l;t.mediaAutoPlay=a;t.mediaCounterView=v;t.mediaPlay=y;t.mediaPause=p;t.mediaReplay=w;t.contentLoadTime=b;t.adSuccess=k;t.adStarting=d;t.adStarted=g;t.adError=nt;t.VastError=tt;t.postPlay=it;t.share=rt;t.hlsError=ut;t.error=ft;t.errorMediaBlocked=et;t.errorPlayer=ot;t.errorUnknown=f;t.errorCode=st;t.setState=ht;t.yandexStarted=e;t.yandexPause=o;t.yandexTimeupdate=vt;t.yandexVolumechange=yt;t.yandexRewound=pt})(t=n.PlayerEvents||(n.PlayerEvents={}))}(newstube3||(newstube3={})),function(n){var t;(function(t){function h(t){n.CH.removeClass(t,i);n.CH.addClass(t,i)}function c(t){n.CH.removeClass(t,i)}function l(t){n.CH.addClass(t,f)}function a(t){n.CH.removeClass(t,f)}function v(i){n.CH.addClass(i,t.vpaidSlotClass)}function y(i){n.CH.removeClass(i,t.vpaidSlotClass)}function p(t){n.CH.addClass(t,e)}function w(t){n.CH.removeClass(t,e)}function b(t){n.CH.addClass(t,u)}function k(t){n.CH.removeClass(t,u)}function d(t){n.CH.addClass(t,r)}function g(t){n.CH.removeClass(t,r)}function nt(t){n.CH.removeClass(t,r)}function tt(t){n.CH.removeClass(t,o);n.CH.addClass(t,s)}function it(t){n.CH.removeClass(t,s);n.CH.addClass(t,o)}var i="hplayer-active",f="hplayer-hide",e="hplayer-wait",r="hplayer-wait-dark",o="hplayer-viewmode-normal",s="hplayer-viewmode-fullscreen",u;t.vpaidSlotClass="hplayer-vpaid-slot";u="hplayer-a-active";t.active=h;t.activeClear=c;t.hide=l;t.hideClear=a;t.vpaidSlot=v;t.vpaidSlotClear=y;t.wait=p;t.waitClear=w;t.aActive=b;t.aActiveClear=k;t.waitDark=d;t.waitDarkClear=g;t.setFullscreen=nt;t.viewModeFullscreenSet=tt;t.viewModeNormalSet=it})(t=n.PlayerCHHelper||(n.PlayerCHHelper={}))}(newstube3||(newstube3={})),function(n){var t=function(){function t(n,t){this.element=n;this.player=t;this.active=!1;this.init()}return t.prototype.init=function(){this.element&&(this.progressMessageElement=n.CH.getElementByClassName(this.element,"hplayer-progress-message"),n.diagnosticText("Spinner init",3))},t.prototype.start=function(){n.FeatureHelper.Animation&&(this.spinnerElement=document.createElement("div"),this.spinnerElement.className="hplayer-progress-spinner",this.element.appendChild(this.spinnerElement));n.diagnosticText("Spinner start",3)},t.prototype.stop=function(){n.diagnosticText("Spinner stop",3);this.spinnerElement&&(n.diagnosticText("Spinner stop2",3),n.CH.removeElement(this.spinnerElement),this.spinnerElement=null)},t.prototype.setWait=function(t,i){var r=this;t===void 0&&(t=!0);i===void 0&&(i=null);this.progressMessageElement&&n.CH.setTextContent(this.progressMessageElement,i);t&&n.PlayerCHHelper.waitDark(this.player.playerForm);this.setWaitTimeout||this.active?n.diagnosticText("setWait exists: "+(i||"")):(this.setWaitTimeout=setTimeout(function(){r.setWaitTimeout=null;r.active=!0;r.start();n.PlayerCHHelper.wait(r.player.playerForm);n.PlayerCHHelper.waitDark(r.player.playerForm);n.diagnosticText("setWait active: "+(i||""))},2e3),n.diagnosticText("setWait: "+(i||"")))},t.prototype.clearWait=function(){this.active=!1;this.setWaitTimeout&&(clearTimeout(this.setWaitTimeout),this.setWaitTimeout=null);this.progressMessageElement&&n.CH.setTextContent(this.progressMessageElement,"");n.PlayerCHHelper.waitClear(this.player.playerForm);n.PlayerCHHelper.waitDarkClear(this.player.playerForm);this.stop();n.diagnosticText("clearWait")},t}();n.PlayerPageProgress=t}(newstube3||(newstube3={})),function(n){var t=function(){function t(n,t){this.pageStart=n;this.context=t;this.init();this.initEvents()}return t.prototype.init=function(){this.pageStart&&(this.pageStartPlay=this.pageStart.getElementsByTagName("b")[0],this.initCanvas())},t.prototype.initCanvas=function(){this.pageStartPlay&&(this.pageStartCanvas=document.createElement("canvas"),this.pageStartPlay.appendChild(this.pageStartCanvas),this.pageStartCanvas.width=800,this.pageStartCanvas.height=800,this.pageStartCanvas.getContext&&(this.pageStartContext=this.pageStartCanvas.getContext("2d")))},t.prototype.initEvents=function(){var t=this;this.pageStart&&n.CH.addClickListener(this.pageStart,function(n){return t.onClick&&t.onClick(n)})},t.prototype.setKeyFrame=function(n){this.pageStart&&(this.pageStart.style.backgroundImage="url("+n+")")},t.prototype.stop=function(){this.pageStartContext&&(this.pageStartContext.clearRect(0,0,this.pageStartCanvas.width,this.pageStartCanvas.height),this.startTimeoutTimer&&(clearTimeout(this.startTimeoutTimer),this.startTimeoutTimer=null),this.startIntervalTimer&&(window.clearInterval(this.startIntervalTimer),this.startIntervalTimer=null))},t.prototype.start=function(n){function u(n){t.pageStartContext.beginPath();t.pageStartContext.strokeStyle="#0571b6";t.pageStartContext.lineWidth=48;t.pageStartContext.arc(400,400,376,0,n);t.pageStartContext.stroke();t.pageStartContext.imageSmoothingEnabled=!0}if(this.pageStartContext&&(this.stop(),n)){var i=0,r=50,f=2*Math.PI/n*r,t=this;this.startTimeoutTimer=window.setTimeout(function(){u(2*Math.PI);t.startTimeoutTimer=null;t.startIntervalTimer&&(window.clearInterval(t.startIntervalTimer),t.startIntervalTimer=null)},n);this.startIntervalTimer=window.setInterval(function(){i+=f;u(i)},r)}},t.prototype.resizeIE8=function(){},t}();n.PlayerPageStart=t}(newstube3||(newstube3={})),function(n){var t;(function(t){function f(n,t,u,f){return u===void 0&&(u=!0),f===void 0&&(f=null),t&&(n=n+"?"+i(t)),r("GET",n,null,!0,{withCredentials:u,timeout:f})}function e(n,t,r){return t&&(n=n+"?"+i(t)),o("GET",n,null,r).then(function(n){return s(n)})}function h(t,i,r){return r===void 0&&(r=!0),n.Utils0.supportWithCredentials?f(t,i,r):e(t,i)}function c(t,f,e){return f&&(t=t+"?"+i(f)),n.Utils0.supportWithCredentials?r(u,t,null,!1,{withCredentials:!1,contentType:e}):o(u,t,null)}function r(t,i,r,u,f){return u===void 0&&(u=!0),f===void 0&&(f=null),i&&document&&document.location&&document.location.protocol&&i.match(/^\/\//)&&(i=document.location.protocol+i),new Promise(function(e,o){return n.Utils0.xmlHttp0(t,i,r,u,f,e,o)})}function o(t,i,r,u){return new Promise(function(f,e){return n.Utils0.xmlHttpIE90(t,i,r,u,f,e)})}function s(n){return typeof DOMParser!="undefined"?(new DOMParser).parseFromString(n,"application/xml"):l(n)}function l(n){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async=!1,t.loadXML(n),t}function a(n,t,u){return t&&(n=n+"?"+i(t)),r("GET",n,null,!1,{withCredentials:!1,contentType:u})}function v(n,t){return r("POST",n,i(t))}function y(n,i){return t.getTextByAny(n,i,t.jsonContentType).then(function(n){return JSON.parse(n)})}function p(t,i){return new Promise(function(r,u){return n.Utils0.script0(t,i,r,u)})}function w(n,i){Promise.all(n.map(function(n){return t.script(n)})).then(function(){return i()})}function b(){var n=(new Date).getTime();return window.performance&&typeof window.performance.now=="function"&&(n+=performance.now()),"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,function(){var t=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),t.toString(16)})}function i(n){var r=[],i,t;for(i in n)t=n[i],t!=null&&typeof t!="undefined"&&r.push(i+"="+encodeURIComponent(t));return r.join("&")}var u="GET";t.jsonContentType="application/json; charset=utf-8";t.getXml=f;t.getXmlIE9=e;t.getXmlByAnyTryCredentials=h;t.getTextByAny=c;t.textToXml=s;t.getText=a;t.PostReturnText=v;t.getData=y;t.script=p;t.scripts=w;t.generateUUID=b;t.toUrlArguments=i})(t=n.Utils||(n.Utils={}))}(newstube3||(newstube3={})),function(n){var t;(function(t){function o(t,i){var r={guid:i.guid,location:i.init.location};return n.Utils.getText(t,r)}function s(n){return!!(document.fullscreenElement||document.fullScreen||document.mozFullScreen||document.msFullscreenElement||document.webkitIsFullScreen||document.webkitDisplayingFullscreen||n&&n.webkitDisplayingFullscreen)}function h(n){return n.requestFullscreen?document.fullscreenEnabled?(n.requestFullscreen(),!0):!1:n.mozRequestFullScreen?(n.mozRequestFullScreen(),!0):n.webkitRequestFullscreen?(n.webkitRequestFullscreen(),!0):n.msRequestFullscreen?(n.msRequestFullscreen(),!0):r(n)}function c(){document.exitFullscreen?document.fullscreenElement&&document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():i(document)}function i(n){n.webkitExitFullscreen?n.webkitExitFullscreen():n.webkitExitFullScreen&&n.webkitExitFullScreen()}function l(t){function i(n){return!!n.webkitDisplayingFullscreen}return!n.FeatureHelper.fullscreenSupport&&i(t)}function r(n){return n.webkitEnterFullscreen?(n.webkitEnterFullscreen(),!0):n.webkitEnterFullScreen?(n.webkitEnterFullScreen(),!0):!1}function a(t){function r(n){n.webkitDisplayingFullscreen&&i(n)}n.FeatureHelper.fullscreenSupport||r(t)}function v(){var t={},n,i=!1;return t.cancel=function(){n!=null?(n(),n=null):i=!0},t.setCancelAction=function(t){i?t():n=t},t}function y(t){t&&(t.lastIndexOf("//",0)===0&&(t=""+n.Utils0.scheme+t),t=t.replace("[CACHEBUSTING]",Math.floor(Math.random()*9e14).toString()).replace("[NT_SBLOCK]",n.adsloaded?"0":"1"),n.Utils0.triggerGet(t))}function u(){for(var n=window;n.parent!=null&&n!=n.parent;)n=n.parent;return n}function p(){try{return u().document.location.href}catch(n){return document.referrer}}function f(n,t){if(t===void 0&&(t=!1),t)e(n);else try{u().document.location.href=n}catch(i){e(n)}}function e(n){window.open(n,"_blank").focus()}function w(n,t){return t===void 0&&(t=!1),n&&n.href?(f(n.href,t),!1):void 0}t.GetText=o;t.isFullscreen=s;t.requestFullscreen=h;t.exitFullscreen=c;t.safeIsWebkitDisplayingFullscreen=l;t.webkitEnterFullscreen=r;t.safeWebkitExitFullscreen=a;t.getCancelCallback=v;t.knocker=y;t.getHostUrl=p;t.openlink=f;t.iframeClick=w})(t=n.PlayerUtils||(n.PlayerUtils={}))}(newstube3||(newstube3={})),function(n){var t=function(){function t(){}return t.create=function(t,i){return t?new n.PlayerVideoHtml5(t,i):null},t}();n.PlayerVideoFactory=t}(newstube3||(newstube3={})),function(n){var t=function(){function t(t,i){var r=this,u;this.volumeEnable=n.FeatureHelper.volumeEnable;this.canPreload=!0;this.initEventsExecuted=!1;this.isPause=!0;this.initEvents=function(){function f(n,t,i){n.addEventListener(t,i,!1);i()}function e(){t.isNativePlayer||t.video.currentTime===0||u()}function u(){t.onCurrentTimeChange&&t.onCurrentTimeChange(t.video.currentTime)}var t=r,i;n.diagnosticText("html5.initevents");r.video.addEventListener("contextmenu",function(n){n.preventDefault()});i=function(n){r.onClick&&r.onClick(n)};r.videoBackground.addEventListener("click",i,!0);r.video.addEventListener("click",i,!0);n.FeatureHelper.volumeEnable&&f(r.video,"volumechange",function(){return r.onVolumeChange&&r.onVolumeChange(r.video.volume)});f(r.video,"durationchange",function(){return r.onDurationChange&&r.onDurationChange(r.video.duration)});r.video.addEventListener("timeupdate",e);r.video.addEventListener("loaded",function(){n.diagnosticText("html5.loaded s",1,3);u();n.diagnosticText("html5.loaded e",2,3)});r.video.addEventListener("seeking",function(){});r.video.addEventListener("seeked",function(){n.diagnosticText("seeked",1,3);r.video.ended?(n.diagnosticText("seeked.ended",1,3),r.onEnded&&r.onEnded()):r.video.paused?n.diagnosticText("seeked.onpause",1,3):(n.diagnosticText("seeked.playing",1,3),r.onPlaying&&r.onPlaying());r.onSeeked&&r.onSeeked(r.video.currentTime,r.seekingTime);u()});r.video.addEventListener("canplay",function(){n.diagnosticText("html5.canplay s",1,3);r.onCanPlay&&r.onCanPlay();n.diagnosticText("html5.canplay e",1,3)});r.video.addEventListener("playing",function(){n.diagnosticText("html5.playing s",1,3);r.loadTime&&(n.PlayerEvents.contentLoadTime(r.context.env,Date.now()-r.loadTime),r.loadTime=null);r.onPlaying&&r.onPlaying();n.diagnosticText("html5.playing e",1,3)});r.video.addEventListener("play",function(){n.diagnosticText("html5.play",1,3)});r.video.addEventListener("pause",function(){n.diagnosticText("html5.pause s",1,3);r.video.ended?n.diagnosticText("html5.pause skip",1,3):r.onPause&&r.onPause();n.diagnosticText("html5.pause e",1,3)});r.video.addEventListener("ended",function(){n.diagnosticText("html5.ended "+r.video.ended+" "+r.video.paused,1,3);r.video.ended&&(n.PlayerUtils.safeWebkitExitFullscreen(r.video),r.onEnded&&r.onEnded())});r.video.addEventListener("webkitbeginfullscreen",r.videoWebkitBeginFullScreenHandler);r.video.addEventListener("webkitendfullscreen",r.videoWebkitEndFullScreenHandler);r.video.addEventListener("error",function(t){n.PlayerUtils0.errorSend(t);r.src&&r.src!=""&&(r.video.error&&(n.diagnosticText("html5.error message:"+r.video.error.message,1,3),r.video.error.code==4?n.diagnosticText("html5.error видео не поддерживается",1,3):n.diagnosticText("error "+r.video.error.toString()+" "+r.video.error.code,1,3)),r.onError&&r.onError(t),n.diagnosticText("html5.error e",1,3))});r.initEventsExecuted=!0};this.videoWebkitBeginFullScreenHandler=function(){n.diagnosticText("html5.fsb s",1,3);var t=!r.video.ended&&!r.video.paused&&r.video.currentTime==0;!r.isNativePlayer&&t&&r.nativePlayer();!r.isNativePlayer||r.video.paused||r.video.ended||(n.diagnosticText("iphone correct",1),r.play());r.onBeginFullScreen&&r.onBeginFullScreen();n.diagnosticText("html5.fsb e",1,3)};this.videoWebkitEndFullScreenHandler=function(){n.diagnosticText("html5.fse s",1,3);r.video.controls=!1;r.onEndFullScreen&&r.onEndFullScreen();n.diagnosticText("html5.fse e",1,3)};this.aspect=0;this.boxSize={width:0,height:0};this.userInteractionInit=function(){n.FeatureHelper.html5Support&&n.HtmlMediaElementHelper.userInteractionInit(r.video,function(t){n.diagnosticText("videohtml5."+t)});r.userInteractionInit=function(){}};this.videoWrap=t;this.context=i;this.videoBackground=document.createElement("div");this.videoBackground.className="hplayer-video-background";this.videoWrap.appendChild(this.videoBackground);this.videoAspect=document.createElement("div");this.videoAspect.className="hplayer-video-aspect";this.videoWrap.appendChild(this.videoAspect);u=this.video=n.HtmlMediaElementHelper.createVideo();u.className="hplayer-p-video";this.videoAspect.appendChild(u);n.HtmlMediaElementHelper.debugEvents(u,1)}return t.prototype.setActive=function(){n.CH.addClass(this.context.playerForm,"hplayer-video-active-html5")},t.prototype.clearActive=function(){n.CH.removeClass(this.context.playerForm,"hplayer-video-active-html5")},t.prototype.nativePlayer=function(){n.FeatureHelper.iosSafari9feature||(this.isNativePlayer=!0,n.diagnosticText("iphone ios 8",1,3),n.CH.addClass(this.context.playerForm,"hplayer-iphone"))},t.prototype.play=function(){var t=this.video.play();t&&t.then&&t.then(undefined,function(t){n.diagnosticText("video.play reject: "+t.name+"  "+t.message,1,1)});this.isPause=!1;n.diagnosticText("video.play",1)},t.prototype.pause=function(){this.video.pause();this.isPause=!0},t.prototype.getVolume=function(){return this.video.volume},t.prototype.setVolume=function(n){n!=undefined&&n!=null&&(this.video.volume=n)},t.prototype.getDuration=function(){return this.video.duration},t.prototype.getBuffer=function(){return this.video.buffered},t.prototype.getCurrentTime=function(){return this.video.currentTime},t.prototype.setCurrentTime=function(n){if(n!=null&&this.video.seekable&&this.video.seekable.length)try{this.seekingTime=this.video.currentTime;this.video.currentTime=n}catch(t){}},t.prototype.setAlternativeSrc=function(n){this.alternativeSrc=n},t.prototype.getSrc=function(){return this.src},t.prototype.setSrc=function(t,i){var r=this;if(this.initEventsExecuted||this.initEvents(),n.diagnosticText("html5.setsrc "+t,1),this.loadTime=(new Date).getTime(),this.src=t,this.hls!=null&&(this.hls.destroy(),this.hls=null),i=="application/vnd.apple.mpegURL"&&n.FeatureHelper.HlsJsSupported&&!n.FeatureHelper.hls){n.diagnosticText("use hls.js",1);this.hls=new Hls({maxMaxBufferLength:30,startFragPrefetch:!0,debug:!1});this.hls.loadSource(t);this.hls.attachMedia(this.video);this.hls.on(Hls.Events.ERROR,function(t,i){if(i.type==Hls.ErrorTypes.NETWORK_ERROR&&n.PlayerEvents.hlsError(r.context.env,i.details),i.fatal)switch(i.type){case Hls.ErrorTypes.NETWORK_ERROR:n.diagnosticText("hls.js: fatal network error encountered, try to recover",1,1);r.hls.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:n.diagnosticText("hls.js: fatal media error encountered, try to recover",1,1);r.hls.recoverMediaError();break;default:n.diagnosticText("hls.js: cannot recover",1,2);r.hls.destroy();r.video.src=r.alternativeSrc;r.isPause||r.video.play()}else n.diagnosticText("hls.js:error.details: "+i.details,1,1)});this.hls.on(Hls.Events.LEVEL_SWITCH,function(t,i){n.diagnosticText("hls.js:currentLevel "+i.level,1)});this.hls.on(Hls.Events.LEVEL_LOADING,function(t,i){n.diagnosticText("hls.js:currentLevel "+i.level+" "+i.url,1)});this.hls.on(Hls.Events.LEVEL_LOADED,function(t,i){n.diagnosticText("hls.js:currentLevel "+i.level+" "+i.details.url,1);n.diagnosticText("hls.js:currentLevel "+r.hls.currentLevel+" ",1);n.diagnosticText("hls.js:video "+r.video.paused+" ",1)})}else t!=""&&t!=null&&(this.video.src=t)},t.prototype.abort=function(){this.hls!=null&&(this.hls.destroy(),this.hls=null);this.video.src="";this.video.removeAttribute("src");n.diagnosticText("html5.load");this.video.load()},t.prototype.setVideoSize=function(n,t){this.aspect=n==0||t==0?0:n/t;this.resize(this.context.playerForm.offsetWidth,this.context.playerForm.offsetHeight)},t.prototype.resize=function(n,t){if(this.aspect==0)this.boxSize.width!=-1&&(this.videoAspect.style.width="100%",this.videoAspect.style.height="100%",this.boxSize.width=-1,this.boxSize.height=-1);else{var u=n/t,i=n,r=t;u>this.aspect?i=r*this.aspect:r=i/this.aspect;(i!==this.boxSize.width||r!==this.boxSize.height)&&(this.videoAspect.style.width=i+"px",this.videoAspect.style.height=r+"px",this.boxSize.width=i,this.boxSize.height=r)}},t.prototype.isFullscreen=function(){return n.PlayerUtils.safeIsWebkitDisplayingFullscreen(this.video)},t.prototype.endFullscreen=function(){n.PlayerUtils.safeWebkitExitFullscreen(this.video);this.video.controls=!1},t}();n.PlayerVideoHtml5=t}(newstube3||(newstube3={})),function(n){var t=function(){function n(n,t){this.container=n;this.context=t}return n}();n.PlayerVideoPladform=t}(newstube3||(newstube3={})),function(n){var t=function(){function t(t,i){var r=this;if(this.container=t,this.context=i,this.volumeEnable=n.FeatureHelper.volumeEnable,this.videoPlayers=[],this.userInteractionInit=function(){for(var n=0;n<r.videoPlayers.length;n++)r.videoPlayers[n].userInteractionInit();r.userInteractionInit=function(){}},!t)return null;this.videoPlayers.push(new n.PlayerVideoHtml5(t,i));this.current=this.videoPlayers[0];this.current.onClick=this.onClick;this.current.setActive();this.initVideoPlayer();this.playerVideoForeground=document.createElement("div");this.playerVideoForeground.className="hplayer-video-foreground";t.appendChild(this.playerVideoForeground);n.CH.addEventListener(this.playerVideoForeground,"click",function(n){return r.onClick&&r.onClick(n)})}return t.prototype.play=function(){this.current&&this.current.play()},t.prototype.pause=function(){this.current&&this.current.pause()},t.prototype.getVolume=function(){return this.volume},t.prototype.setVolume=function(n){this.volume=n;this.current&&this.current.setVolume(n)},t.prototype.getDuration=function(){return this.current?this.current.getDuration():null},t.prototype.getBuffer=function(){return this.current?this.current.getBuffer():null},t.prototype.getCurrentTime=function(){return this.current?this.current.getCurrentTime():this.seekTime},t.prototype.setCurrentTime=function(n){this.seekTime=n;this.current&&this.current.setCurrentTime(n)},t.prototype.setAlternativeSrc=function(n,t){this.current.setAlternativeSrc(n,t)},t.prototype.getSrc=function(){return this.src},t.prototype.setSrc=function(n,t){this.src=n;this.current.setSrc(n,t)},t.prototype.setForegroundImage=function(t){t?(this.playerVideoForeground.style.backgroundImage="url("+t+")",n.PlayerCHHelper.active(this.playerVideoForeground)):(this.playerVideoForeground.style.backgroundImage=null,n.PlayerCHHelper.activeClear(this.playerVideoForeground))},t.prototype.abort=function(){for(var n=0;n<this.videoPlayers.length;n++)this.videoPlayers[n].abort()},t.prototype.initVideoPlayer=function(){this.volume!=null&&this.current.setVolume(this.volume);this.seekTime!=null&&this.current.setCurrentTime(this.seekTime);this.initEvents()},t.prototype.initEvents=function(){var t=this;this.current.onVolumeChange=function(n){t.volume=n;t.onVolumeChange&&t.onVolumeChange(n)};this.current.onSeeked=function(n,i){t.onSeeked(n,i)};this.current.onCurrentTimeChange=function(n){t.onCurrentTimeChange&&t.onCurrentTimeChange(n)};this.current.onDurationChange=function(n){t.onDurationChange&&t.onDurationChange(n)};this.current.onCanPlay=function(){t.onCanPlay&&t.onCanPlay()};this.current.onBeginFullScreen=function(){t.onBeginFullScreen&&t.onBeginFullScreen()};this.current.onEndFullScreen=function(){t.onEndFullScreen&&t.onEndFullScreen()};this.current.onClick=function(n){t.onClick&&t.onClick(n)};this.current.onError=function(i){n.diagnosticText("error "+(i&&i.toString())+" "+(i&&i.message)+" "+(i&&i.networkState),0,2);t.onError&&t.onError(i)};this.current.onPlaying=function(){t.onPlaying&&t.onPlaying()};this.current.onEnded=function(){t.onEnded&&t.onEnded()};this.current.onPause=function(){t.onPause&&t.onPause()}},t.prototype.isFullscreen=function(){return this.current?this.current.isFullscreen():!1},t.prototype.endFullscreen=function(){return this.current&&this.current.endFullscreen()},t.prototype.setVideoSize=function(n,t){this.current&&this.current.setVideoSize&&this.current.setVideoSize(n,t)},t.prototype.resize=function(n,t){this.current&&this.current.resize&&this.current.resize(n,t)},t}();n.PlayerVideoUniversal=t}(newstube3||(newstube3={})),function(n){var t=function(){function t(n,t){var i=this;this.isMouseDown=!1;this.value=-1;this.mouseMoveHandler=function(n){return i.setValueEvent(n),n.preventDefault&&n.preventDefault(),!1};this.mouseUpFunction=function(n){return i.isMouseDown=!1,i.mouseMoveEnd(),n.preventDefault&&n.preventDefault(),!1};this.containerMouseDown=function(n){return i.isMouseDown=!0,i.mouseMoveInit(),i.setValueEvent(n),n.preventDefault&&n.preventDefault(),!1};this.init(n,t)}return t.prototype.init=function(t,i){this.instance=t;this.options=i;this.containerElement=this.options.container?n.CH.getElementByClassName(this.instance,this.options.container):this.instance;this.offsetElement=this.options.offset?n.CH.getElementByClassName(this.containerElement,this.options.offset):this.containerElement;this.setUserInteractiveEnable(!!this.containerElement);this.userInteractiveEnable&&(n.CH.addEventListener(this.containerElement,"mousedown",this.containerMouseDown,!0),this.level=n.CH.getElementsByClassName(this.containerElement,this.options.level)[0])},t.prototype.mouseMoveInit=function(){n.CH.addEventListener(document,"mousemove",this.mouseMoveHandler,!1);n.CH.addEventListener(document,"mouseup",this.mouseUpFunction,!0)},t.prototype.mouseMoveEnd=function(){n.CH.removeEventListener(document,"mousemove",this.mouseMoveHandler,!1);n.CH.removeEventListener(document,"mouseup",this.mouseUpFunction,!0)},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(n){if(isNaN(n)&&(n=0),n>1&&(n=1),this.value!=n){this.value=n;try{this.level.style.width=n*100+"%";this.level.style.minWidth=n*100+"%";this.level.style.maxWidth=n*100+"%"}catch(t){this.level.setAttribute("style","width:"+n*100+"%")}}},t.prototype.setValueEvent=function(n){var t,i;this.userInteractiveEnable&&(t=n.clientX-this.offsetElement.getBoundingClientRect().left,t<0&&(t=0),t>this.offsetElement.offsetWidth&&(t=this.offsetElement.offsetWidth),i=t/this.offsetElement.offsetWidth,this.value!=i&&(this.setValue(i),this.onSetValue&&this.onSetValue(i)))},t.prototype.setUserInteractiveEnable=function(t){this.instance&&(t?n.CH.removeClass(this.instance,"hplayer-disable-interact"):n.CH.addClass(this.instance,"hplayer-disable-interact"));this.userInteractiveEnable=t},t.create=function(n,i){return n?n.newstubeSlider?n.newstubeSlider:new t(n,i):null},t}();n.Slider=t}(newstube3||(newstube3={})),function(n){function r(r){function h(){f=null;e=!1;n.CH.removeClass(r,t);n.CH.addClass(r,i)}function o(n){n===void 0&&(n=3e3);f&&clearTimeout(f);f=setTimeout(h,n)}function u(){n.CH.removeClass(r,i);n.CH.addClass(r,t);e=!0;o()}function c(){o(100)}function s(t){if(n.CH.addEventListener(t,"mousemove",u),n.CH.addEventListener(t,"mousein",u),n.CH.addEventListener(t,"mousedown",u),n.CH.addEventListener(t,"mouseup",u),n.CH.addEventListener(t,"mouseout",c),t.addEventListener){function i(n){if(n.nodeName=="IFRAME")try{s(n.contentDocument.body)}catch(r){console.log(r)}else if(n.addEventListener("touchstart",u),n.children)for(var t=0;t<n.children.length;t++)i(n.children[t])}i(t)}}var f=null,e=!1;s(r)}var t="hplayer-user-focus",i="hplayer-user-nofocus";n.UserFocus=r}(newstube3||(newstube3={})),function(n){var t;(function(t){function i(t,i){if(t)for(var r=0;r<t.length;r++)n.PlayerUtils.knocker(t[r],i)}function r(t,i){if(t)for(var r=0;r<t.length;r++)n.Utils0.post(t[r],i)}function u(t,i){var u,r;if(t&&t.length)for(u=i(),r=0;r<t.length;r++)n.Utils0.post(t[r],u)}function f(n){var t=window.open(n,"_blank");t&&t.focus()}function e(t){if(t)t=t.replace(/(\{[Rr]andom\}|\[CACHEBUSTING\])/,Math.ceil(Math.random()*9e14).toString());else return Promise.reject(null);return n.Utils0.supportWithCredentials?n.Utils.getXml(t,null,!0,n.externals.adUrlLoadTimeout):n.Utils.getXmlIE9(t,null,n.externals.adUrlLoadTimeout)}function o(t,i){var r={};return r.codePlacementId=i,r.media=t.guid,r.lastAd=t.lastAd,r.location=t.init.location,r.placement=t.init.placement,r.flash=!1,r.html5=n.FeatureHelper.html5Support,r.fullscreen=t.fullscreen,r.width=t.size.width,r.height=t.size.height,r.autoplay=t.autoplay,r.url=t.url,r.flags=(n.FeatureHelper.fullscreenSupport?1:0)+(n.FeatureHelper.isSriptPlay?2:0)+(n.FeatureHelper.MSE?4:0)+(n.FeatureHelper.is_touch_device?8:0)+(n.FeatureHelper.html5Support?16:0)+(n.FeatureHelper.hls?64:0)+(n.FeatureHelper.h264?128:0)+(n.adsloaded?256:0),n.playerHost+"api/playera/getb?"+n.Utils.toUrlArguments(r)}t.invoke=i;t.post=r;t.post2=u;t.open=f;t.getXml=e;t.getRequestUrl=o})(t=n.AdHelper||(n.AdHelper={}))}(newstube3||(newstube3={})),function(n){function u(n){return t(n,function(){return null},function(n,t){return n.AdMail.controls==null?t:n.AdMail})}function f(n){return t(n,function(){return null},function(n,t){return n.AdMail.skipTime==null&&n.AdMail.skipTime2==null&&n.AdMail.linkTxt==null&&n.AdMail.isClickable==null?t:n.AdMail})}function e(n){return t(n,function(){return[]},function(n,t){return n.AdMail.skipAd&&t.push(n.AdMail.skipAd),t})}function o(n){return t(n,function(){return[]},function(n,t){return n.AdMail.addClick&&t.push(n.AdMail.addClick),t})}function t(t,i,r){return n.VastEventHelper.adLoop(t,i,function(n,t){var i=n.Inner.Extensions;return i&&i.AdMail&&(t=r(i,t)),t})}var i="hplayer-a-controls-skip",r="hplayer-a-controls-close",s=function(){function t(t,u){var f=this;this.adRootElement=t;this.context=u;this.adPosition=0;this.clickSkip=function(){n.AdHelper.invoke(e(f.vastAd));f.adHost.skipAd()};this.clickClose=function(){f.adHost.onAdUserClose&&f.adHost.onAdUserClose();f.adHost.stopAd()};this.clickLinkTxt=function(){n.AdHelper.invoke(o(f.vastAd));f.click()};this.click=function(){f.adHost.clickAd()};this.finish=function(){f.clear()};this.adControls=n.CH.getElementByClassName(this.adRootElement,"hplayer-a-controls");this.adControls&&(this.adControlLogo=n.CH.getElementByClassName(this.adControls,"hplayer-a-controls-logo"),this.adControlClick=n.CH.getElementByClassName(this.adControls,"hplayer-a-controls-click"),this.adControlClick&&n.CH.addClickListener(this.adControlClick,this.click),this.adControlLinkTxt=n.CH.getElementByClassName(this.adControls,"hplayer-a-controls-linkTxt"),this.adControlLinkTxt&&n.CH.addClickListener(this.adControlLinkTxt,this.clickLinkTxt),this.adControlSkip=n.CH.getElementByClassName(this.adControls,i),this.adControlSkip&&n.CH.addClickListener(this.adControlSkip,this.clickSkip),this.adControlClose=n.CH.getElementByClassName(this.adControls,r),this.adControlClose&&n.CH.addClickListener(this.adControlClose,this.clickClose))}return t.prototype.adInit=function(t,i,r){var e,h,o,s;this.clear();this.vastAd=t;this.extensions=t.Inner.Extensions;this.adHost=r;this.adControlSkipActive=!1;this.adControlCloseActive=!1;e=u(t);e&&(this.controls=e.controls);this.adHost.simple&&(this.controls=1,e||(e=f(t)));this.adControlLogo&&(h="Реклама",e&&e.Allowblock==1&&this.adHost.position>0&&(h="Рекламный блок №"+(this.adHost.position+1)),n.CH.setTextContent(this.adControlLogo,h));this.controls==1?(n.PlayerCHHelper.active(this.adControls),r.flags.bar||(this.context.playerControlsShowHold=!0)):(n.PlayerCHHelper.activeClear(this.adControls),this.context.playerControlsShowHold=!0,r.flags.bar&&this.context.playerControls.hide());this.skipTime=e&&e.skipTime;this.closeTime=e&&e.skipTime2;o=e&&e.linkTxt;s=e&&e.isClickable;n.diagnosticText("controls: "+this.controls+" skip: "+this.skipTime+" close: "+this.closeTime+" isClickable: "+(s&&s)+" linkTxt: "+(o&&o),2);this.controls==1&&o&&(s==null||s!=0)?(n.CH.setTextContent(this.adControlLinkTxt,o),n.PlayerCHHelper.active(this.adControlLinkTxt)):n.PlayerCHHelper.activeClear(this.adControlLinkTxt)},t.prototype.timeupdate=function(){function i(i,r){var u=r!=null&&i&&(t.adHost.getCurrentTime?t.adHost.getCurrentTime()*1e3:0)>=r;return u&&n.PlayerCHHelper.active(i),u}var t=this;t.controls!=0&&(t.skipTime!=null||t.closeTime!=null)&&(t.adControlSkipActive=t.adControlSkipActive||i(t.adControlSkip,t.skipTime),t.adControlCloseActive=t.adControlCloseActive||i(t.adControlClose,t.closeTime))},t.prototype.clear=function(){n.PlayerCHHelper.activeClear(this.adControls);n.PlayerCHHelper.activeClear(this.adControlSkip);n.PlayerCHHelper.activeClear(this.adControlClose);n.PlayerCHHelper.activeClear(this.adControlLinkTxt)},t}();n.AdMailExt=s}(newstube3||(newstube3={})),function(n){var t=function(){function t(n,t){this.player=n;this.mediaContext=t}return t.prototype.changeContext=function(){this.player.adLinearContext?(this.player.adLinearContext.codeplacement!==n.PlayerAdState.PauseRoll?n.diagnosticText("вызывается play когда реклама не PauseRoll",0,2):n.diagnosticText("заверешние PauseRoll"),this.player.adLinearContext.abort()):n.diagnosticText("AdPauseRollTarget.changeContext() вызван когда рекламы нет",0,2);this.player.setBarTargetVideo()},t.prototype.play=function(){this.mediaContext.enabled||n.diagnosticText("AdPauseRollTarget.play() вызов не предусматривался",0,2);this.changeContext();this.mediaContext.play()},t.prototype.pause=function(){this.mediaContext.enabled||n.diagnosticText("AdPauseRollTarget.pause() вызов не предусматривался",0,2);this.changeContext();this.mediaContext.pause()},t.prototype.replay=function(){this.mediaContext.enabled||n.diagnosticText("AdPauseRollTarget.replay() вызов не предусматривался",0,2);this.changeContext();this.mediaContext.replay()},t.prototype.setCurrentTime=function(t){this.mediaContext.enabled||n.diagnosticText("AdPauseRollTarget.setCurrentTime() вызов не предусматривался",0,2);this.changeContext();this.mediaContext.setCurrentTime(t)},t}();n.AdPauseRollTarget=t}(newstube3||(newstube3={})),function(n){function t(n){return n.handshakeVersion&&typeof n.handshakeVersion=="function"&&n.initAd&&typeof n.initAd=="function"&&n.startAd&&typeof n.startAd=="function"&&n.stopAd&&typeof n.stopAd=="function"&&n.skipAd&&typeof n.skipAd=="function"&&n.resizeAd&&typeof n.resizeAd=="function"&&n.pauseAd&&typeof n.pauseAd=="function"&&n.resumeAd&&typeof n.resumeAd=="function"&&n.expandAd&&typeof n.expandAd=="function"&&n.collapseAd&&typeof n.collapseAd=="function"&&n.subscribe&&typeof n.subscribe=="function"&&n.unsubscribe&&typeof n.unsubscribe=="function"}var i=function(){function i(n,t,i){this.elementSize=i;this.simple=!1;this.videoSlot=t;this.adContainers=n}return i.prototype.canPlayType=function(n,t){return t==="VPAID"&&n==="application/javascript"},i.prototype.iframeRemove=function(){var t=this.iframe,i;t&&(this.iframe=null,i=t.contentWindow.document,i.open(),i.write(""),i.close(),this.adContainers.removeChild(t),n.diagnosticText("vpaidjs iframeRemove "+t.src,2))},i.prototype.start=function(i,r){function u(n){r.onAdLog&&r.onAdLog({message:Date.now()-h+" "+n})}var h=Date.now(),f=this,o=this.iframe=document.createElement("iframe"),e,s;return o.frameBorder="0",o.width="100%",o.height="100%",f.adContainers.appendChild(o),e=o.contentDocument,e.open(),e.write(""),e.close(),s=e.createElement("div"),s.id="slot",e.body.appendChild(s),n.CH.addHeadStyle(e,"html, body { overflow: hidden; width: 100%; heiht: 100%; margin: 0; padding: 0}"),u("vpaidjs start "+i.Value),new Promise(function(h,c){function l(){var d,e,et;if(u("vpaidjs scriptLoaded "+i.Value),d=o.contentWindow.getVPAIDAd,!d||typeof d!="function"){u("getVPAIDAd not exists");c(n.VpaidDetailErrors.getVPAIDAdNotExists);return}if(u("vpaidjs fn()"),e=d(),u("vpaidjs vpaid "+!!e),!e||!t(e)){u("checkVPAIDInterface false");c(n.VpaidDetailErrors.InterfaceFalse);return}u("vpaidjs vpaid.handshakeVersion "+!!e.handshakeVersion);try{et=e.handshakeVersion("2.0");u("vpaidjs handshakeVersion "+et)}catch(tt){u("vpaidjs handshakeVersion.error "+tt.message);u(tt.stack);c(n.VpaidDetailErrors.HandshakeVersionCallError);return}var a=-2,p=-2,v=n.VpaidDetailErrors.Success,w=n.VpaidDetailErrors.Success,l=function(){n.diagnosticText("vpaidjs.unload",2);g();ut();rt();try{e.unsubscribe(ct,"AdStarted");e.unsubscribe(lt,"AdLoaded");e.unsubscribe(ft,"AdStopped");e.unsubscribe(st,"AdError");e.unsubscribe(ht,"AdSkipped");e.unsubscribe(at,"AdSkippableStateChange");e.unsubscribe(vt,"AdSizeChange");e.unsubscribe(yt,"AdLinearChange");e.unsubscribe(nt,"AdDurationChange");e.unsubscribe(nt,"AdRemainingTimeChange");e.unsubscribe(pt,"AdExpandedChange");e.unsubscribe(wt,"AdVolumeChange");e.unsubscribe(bt,"AdImpression");e.unsubscribe(kt,"AdVideoStart");e.unsubscribe(dt,"AdVideoFirstQuartile");e.unsubscribe(gt,"AdVideoMidpoint");e.unsubscribe(ni,"AdVideoThirdQuartile");e.unsubscribe(ti,"AdVideoComplete");e.unsubscribe(ii,"AdClickThru");e.unsubscribe(ri,"AdInteraction");e.unsubscribe(ui,"AdUserAcceptInvitation");e.unsubscribe(fi,"AdUserMinimize");e.unsubscribe(ei,"AdUserClose");e.unsubscribe(oi,"AdPaused");e.unsubscribe(si,"AdPlaying");e.unsubscribe(hi,"AdLog")}catch(t){n.diagnosticText("vpaidjs.unload.error "+t)}},y,it=function(n){y&&clearTimeout(y);y=setTimeout(function(){u("vpaidjs AdStop timeout");y=null;v=w;ft()},n);u("vpaidjs setAdStopTimer "+n)},rt=function(){y&&(clearTimeout(y),y=null,u("vpaidjs clearAdStopTimer"))},b,ci=function(t){b&&clearTimeout(b);b=setTimeout(function(){b=null;u("vpaidjs AdLoaded timeout");l();c(n.VpaidDetailErrors.AdLoadedTimeout)},t);u("vpaidjs setAdLoadedTimer "+t)},g=function(){b&&(clearTimeout(b),b=null,u("vpaidjs clearAdLoaderTimer"))},k,li=function(t){k&&clearTimeout(k);k=setTimeout(function(){u("vpaidjs AdStarted timeout");k=null;v=n.VpaidDetailErrors.AdStartedTimeout;w=n.VpaidDetailErrors.AdStartedTimeout;r.stopAd()},t);u("vpaidjs setAdStartedTimer "+t)},ut=function(){k&&(clearTimeout(k),k=null,u("vpaidjs clearAdStartedTimer"))},ot=function(){try{var n=e.getAdDuration();n>0&&n!=a&&(a=n)}catch(t){u("vpaidjs getAdDuration error "+t)}try{p=e.getAdRemainingTime();a<=0&&p>0&&(a=p)}catch(t){u("vpaidjs getAdRemainingTime error "+t)}try{u("vpaidjs "+a+" "+p+" "+e.getAdVolume()+" "+f.videoSlot.volume)}catch(t){u("vpaidjs getAdVolume error "+t)}},ft=function(){u("vpaidjs AdStopped");rt();l();v==n.VpaidDetailErrors.Success?h():c(v)},st=function(t){u("vpaidjs AdError "+t);r.onAdError&&r.onAdError(t);l();c(n.VpaidDetailErrors.AdError);u("vpaidjs AdError end")},ht=function(){u("vpaidjs AdSkipped");rt();r.onAdSkipped&&r.onAdSkipped();l();c(n.VpaidDetailErrors.AdSkipped)};f.unloadAndComplete=function(){u("vpaidjs unloadAndComplete");l();c(n.VpaidDetailErrors.UnloadAndComplete)};var ct=function(){u("vpaidjs AdStarted");g();ut();r.onAdCreativeView&&r.onAdCreativeView()},lt=function(){u("vpaidjs AdLoaded");g();r.onAdLoaded&&r.onAdLoaded();f.resize=function(t,i){e.resizeAd(t,i,n.PlayerUtils.isFullscreen()?"fullscreen":"normal")};li(n.externals.adStartedTimeout);try{e.startAd()}catch(t){u("vpaidjs startAd.error "+t);l();c(n.VpaidDetailErrors.StartAdCallError)}},at=function(){u("vpaidjs AdSkippableStateChange "+e.getAdSkippableState())},vt=function(){u("vpaidjs AdSizeChange")},yt=function(){u("vpaidjs AdLinearChange")},nt=function(){u("vpaidjs AdDurationChange");ot();r.onAdDurationChange&&r.onAdDurationChange()},pt=function(){u("vpaidjs AdExpandedChange")},wt=function(){u("vpaidjs AdVolumeChange");r.onAdVolumeChange&&r.onAdVolumeChange()},bt=function(){u("vpaidjs AdImpression");r.onAdImpression&&r.onAdImpression()},kt=function(){g();ut();u("vpaidjs AdVideoStart");r.onAdVideoStart&&r.onAdVideoStart()},dt=function(){u("vpaidjs AdVideoFirstQuartile");r.onAdVideoFirstQuartile&&r.onAdVideoFirstQuartile()},gt=function(){u("vpaidjs AdVideoMidpoint");r.onAdVideoMidpoint&&r.onAdVideoMidpoint()},ni=function(){u("vpaidjs AdVideoThirdQuartile");r.onAdVideoThirdQuartile&&r.onAdVideoThirdQuartile()},ti=function(){u("vpaidjs AdVideoComplete");r.onAdVideoComplete&&r.onAdVideoComplete();w==n.VpaidDetailErrors.Success&&(w=n.VpaidDetailErrors.AdStoppedTimeoutAfterComplete);it(n.externals.adStopTimeout)},ii=function(n,t,i){u("vpaidjs AdClickThru "+n+" "+t+" "+i);r.onAdClickThru&&r.onAdClickThru({url:n,id:t,playerHandles:i})},ri=function(){u("vpaidjs AdInteraction")},ui=function(){u("vpaidjs AdUserAcceptInvitation");r.onAdUserAcceptInvitation&&r.onAdUserAcceptInvitation()},fi=function(){u("vpaidjs AdUserMinimize");r.onAdUserMinimizee&&r.onAdUserMinimizee()},ei=function(){u("vpaidjs AdUserClose");r.onAdUserClose&&r.onAdUserClose()},oi=function(){u("vpaidjs AdPaused");r.onAdPaused&&r.onAdPaused()},si=function(){u("vpaidjs AdPlaying");r.onAdPlaying&&r.onAdPlaying()},hi=function(n){r.onAdLog&&r.onAdLog(n)};try{e.subscribe(ct,"AdStarted");e.subscribe(lt,"AdLoaded");e.subscribe(ft,"AdStopped");e.subscribe(st,"AdError");e.subscribe(ht,"AdSkipped");e.subscribe(at,"AdSkippableStateChange");e.subscribe(vt,"AdSizeChange");e.subscribe(yt,"AdLinearChange");e.subscribe(nt,"AdDurationChange");e.subscribe(nt,"AdRemainingTimeChange");e.subscribe(pt,"AdExpandedChange");e.subscribe(wt,"AdVolumeChange");e.subscribe(bt,"AdImpression");e.subscribe(kt,"AdVideoStart");e.subscribe(dt,"AdVideoFirstQuartile");e.subscribe(gt,"AdVideoMidpoint");e.subscribe(ni,"AdVideoThirdQuartile");e.subscribe(ti,"AdVideoComplete");e.subscribe(ii,"AdClickThru");e.subscribe(ri,"AdInteraction");e.subscribe(ui,"AdUserAcceptInvitation");e.subscribe(fi,"AdUserMinimize");e.subscribe(ei,"AdUserClose");e.subscribe(oi,"AdPaused");e.subscribe(si,"AdPlaying");e.subscribe(hi,"AdLog")}catch(tt){u("subscribe.error "+tt);l();c(n.VpaidDetailErrors.SubscribeCallError);return}r.getAdVolume=function(){return e.getAdVolume()};r.setAdVolume=function(n){try{e.setAdVolume(n);u("setAdVolume "+n)}catch(t){u("setAdVolume.error "+t)}ot()};r.pauseAd=function(){try{return e.pauseAd()}catch(t){u("pauseAd.error "+t);l();c(n.VpaidDetailErrors.PauseAdCallError)}};r.resumeAd=function(){try{return e.resumeAd()}catch(t){u("resumeAd.error "+t);l();c(n.VpaidDetailErrors.ResumeAdCallError)}};r.resizeAd=function(t,i,r){try{return e.resizeAd(t,i,r)}catch(f){u("resizeAd.error "+f);l();c(n.VpaidDetailErrors.ResizeCallError)}};r.skipAd=function(){u("vpaidjs skipAd()");y||(v==n.VpaidDetailErrors.Success&&(v=n.VpaidDetailErrors.AdSkipped),w=n.VpaidDetailErrors.AdSkippedTimeout,it(n.externals.adStopTimeout));try{return e.skipAd()}catch(t){u("skipAd.error "+t);l();c(n.VpaidDetailErrors.SkipAdCallError)}};r.stopAd=function(){u("vpaidjs stopAd()");it(n.externals.adStopTimeout);v==n.VpaidDetailErrors.Success&&(v=n.VpaidDetailErrors.AdStopped);w==n.VpaidDetailErrors.Success&&(w=n.VpaidDetailErrors.AdStoppedTimeout);try{return e.stopAd()}catch(t){u("vpaidjs stopAd.error {e}");l();c(n.VpaidDetailErrors.StopAdCallError)}};r.getAdDuration=function(){return a};r.getAdRemainingTime=function(){return p};r.getCurrentTime=function(){return a==-2||p==-2?0:a-p};ci(n.externals.adLoadedTimeout);n.PlayerCHHelper.aActive(f.videoSlot);n.PlayerCHHelper.aActive(o);var ai=f.elementSize.offsetWidth,vi=f.elementSize.offsetHeight,yi=n.PlayerUtils.isFullscreen()?"fullscreen":"normal",pi=i.bitrate||-1,wi={AdParameters:i.parent.AdParameters||""},bi={slot:s,videoSlot:f.videoSlot,videoSlotCanAutoPlay:!0};try{e.initAd(ai,vi,yi,pi,wi,bi)}catch(tt){l();c(n.VpaidDetailErrors.InitAdCallError)}}n.Utils.script(i.Value,e).then(l,function(t){u("vpaidjs scriptload.error "+t);c(n.VpaidDetailErrors.ScriptLoadError)})}).then(function(){f.videoIframeClear()},function(t){return u("vpaidjs error "+t),f.videoIframeClear(),typeof t!="number"&&(u("vpaidjs unknown error "+t),u(""+t.stack),t=n.VpaidDetailErrors.Unknown),Promise.reject(t)})},i.prototype.kill=function(){var t=this;n.diagnosticText("kill",2,2);t.unloadAndComplete&&(t.unloadAndComplete(),t.unloadAndComplete=null);t.videoIframeClear()},i.prototype.videoIframeClear=function(){var t=this;t.resize=null;t.iframe&&(n.PlayerCHHelper.aActiveClear(t.videoSlot),n.HtmlMediaElementHelper.clearVideo(t.videoSlot),t.adContainers.appendChild(t.videoSlot),t.iframeRemove(),t.unloadAndComplete=null)},i}();n.VpaidJSAdViewer=i}(newstube3||(newstube3={})),function(n){var t=function(){function t(t){this.vpaidJS=new n.VpaidJSAdViewer(t.adContainers,t.videoSlot,t.elementSize);this.videoHtmlAd=new n.VideoHtmlAdViewer(t.videoSlot)}return t.prototype.create=function(n){for(var i,r,u=n.MediaFiles,f=this,t=0;t<u.length;t++)if(i=u[t],r=this.getAdViewer(i),r!=null)return{code:0,mediaFile:i,viewer:r};return null},t.prototype.getAdViewer=function(n){switch(n.type){case"application/javascript":if(this.vpaidJS.canPlayType(n.type,n.apiFramework))return this.vpaidJS;break;case"video/mp4":case"video/x-mp4":if(this.videoHtmlAd.canPlayType(n.type,n.apiFramework))return this.videoHtmlAd}return null},t}();n.adViewerFactory=t}(newstube3||(newstube3={})),function(n){var t=function(){function t(t,i){var u=this,f,r;this.rootElement=t;this.context=i;this.played=!1;this.adViewer=null;this.userInteractionInit=function(){n.FeatureHelper.html5Support&&n.HtmlMediaElementHelper.userInteractionInit(u.video,function(t){n.diagnosticText(""+t,2)});u.userInteractionInit=function(){}};this.isNativePlayer=!1;this._fullscreen=!1;this.playingHandler=function(){u.onPlaying&&u.onPlaying()};this.pauseHandler=function(){u.onPause&&u.onPause()};this.adMailExt=new n.AdMailExt(this.context.playerForm,i);f=this.adContainers=document.createElement("div");f.className="hplayer-a-container";t.appendChild(f);r=this.video=n.HtmlMediaElementHelper.createVideo(!0);n.HtmlMediaElementHelper.debugEvents(r,2);r.controls=!0;this.volume=r.volume;setTimeout(function(){return r.controls=!1});r.className="hplayer-a-video";f.appendChild(r);this.factory=new n.adViewerFactory({adContainers:f,videoSlot:r,elementSize:this.context.playerForm,player:i})}return t.prototype.processTagStart=function(t,i,r){var u=this,s=0,f=!1,e,o;return n.FeatureHelper.volumeEnable&&(this.context.playerA.video.volume=this.context.playerControls.getVolume()),e=function(t,i,e){var o=u.factory.create(e),h;return o==null?(n.VastEventHelper.callErrorUrl(n.VastEventHelper.getError(t),403),Promise.reject(403)):(n.AdHelper.post(n.VastEventHelper.getCreativeInfo(t),JSON.stringify({mediaFile:o.mediaFile.Value,adParameters:e.AdParameters})),h=function(i){function l(){n.diagnosticText("ad.finish",2);u.played=!1;u.adMailExt.finish();u.adViewer=null}var c,a,h,o;return n.diagnosticText("mediafile: "+i.mediaFile.Value,2,3),u.played=!0,c=function(t){return JSON.stringify({flags:n.adsloaded?0:1,mediaFile:i.mediaFile.Value,adParameters:e.AdParameters,message:t!=null?t.toString():null})},a=u.adHost={},u.adHost.adVolume=u.volume,u.adHost.flags=r,u.adHost.simple=i.viewer.simple,u.adHost.impressionInvoked=f,h=function(){if(h=null,n.diagnosticText("ad.начало отображения",2),u.adHost.position=s++,u.adMailExt.adInit(t,e,u.adHost),n.FeatureHelper.volumeEnable){var i=u.context.playerControls.getVolume();u.setVolume(i)}u.onStart&&u.onStart()},u.adHost.onAdImpression=function(){n.diagnosticText("Impression",2,3);h&&h();n.AdHelper.invoke(n.VastEventHelper.getImpressions(t));f=u.adHost.impressionInvoked=!0},o=-2,u.processTagVolumeChangeHandler=function(){n.diagnosticText("volumeChangeHandler",2);var i=u.getVolume();i>=0&&(o<0?o=i:(i==0&&o>0&&(n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"mute")),n.diagnosticText("mute",2)),i>0&&o==0&&(n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"unmute")),n.diagnosticText("unmute",2)),o=i))},u.adHost.onAdVolumeChange=function(){n.diagnosticText("onAdVolumeChange",2,3);var t=u.getVolume();if(u.processTagVolumeChangeHandler&&u.processTagVolumeChangeHandler(),u.onVolumeChange&&t>=0)u.onVolumeChange(t)},u.processTagFullscreenChangeHandler=function(){n.diagnosticText("fullscreenChange",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,u._fullscreen?"fullscreen":"exitFullscreen"))},u.adHost.onAdBeginFullscreen=function(){n.diagnosticText("onAdBeginFullscreen",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"fullscreen"))},u.adHost.onAdEndFullscreen=function(){n.diagnosticText("onAdEndFullscreen",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"exitFullscreen"))},u.adHost.onAdDurationChange=function(){n.diagnosticText("onAdDurationChange",2,3);u.adMailExt.timeupdate();u.onCurrentTimeChange&&u.onCurrentTimeChange(u.getCurrentTime());u.onDurationChange&&u.onDurationChange(u.getDuration())},u.adHost.onAdCreativeView=function(){n.diagnosticText("onAdCreativeView",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"creativeView"));u.playingHandler()},u.adHost.onAdVideoStart=function(){n.diagnosticText("onAdVideoStart",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"start"))},u.adHost.onAdVideoFirstQuartile=function(){n.diagnosticText("onAdVideoFirstQuartile",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"firstQuartile"))},u.adHost.onAdVideoMidpoint=function(){n.diagnosticText("onAdVideoMidpoint",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"midpoint"))},u.adHost.onAdVideoThirdQuartile=function(){n.diagnosticText("onAdVideoThirdQuartile",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"thirdQuartile"))},u.adHost.onAdVideoComplete=function(){n.diagnosticText("onAdVideoComplete",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"complete"))},u.adHost.onAdRewind=function(){n.diagnosticText("onAdRewind",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"rewind"))},u.adHost.onAdPlaying=function(){n.diagnosticText("onAdPlaying",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"resume"));u.context.pageProgress.clearWait();u.played=!0;u.playingHandler()},u.adHost.onAdPaused=function(){n.diagnosticText("onAdPaused",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"pause"));u.played=!1;u.pauseHandler()},u.adHost.onAdUserAcceptInvitation=function(){n.diagnosticText("ad.onAdUserAcceptInvitation",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"acceptInvitation"))},u.adHost.onAdUserMinimizee=function(){n.diagnosticText("ad.onAdUserMinimizee",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"collapse"))},u.adHost.onAdUserClose=function(){n.diagnosticText("ad.onAdUserClose",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"closeLinear"));n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"close"))},u.adHost.onAdSkipped=function(){n.diagnosticText("ad.onAdSkipped",2,3);n.AdHelper.invoke(n.VastEventHelper.getTrackingLinear(e,t,"skip"))},u.adHost.clickAd=function(){n.diagnosticText("ad.clickAd",2);u.adHost.onAdClickThru({playerHandles:!0,url:null,id:null})},u.adHost.onAdClickThru=function(i){n.diagnosticText("ad.onAdClickThru",2,3);n.AdHelper.invoke(n.VastEventHelper.getClickTracking(t));i&&i.playerHandles&&n.AdHelper.open(i.url?i.url:e.VideoClicks.ClickThrough.uri);u.played&&(u.adHost.pauseAd(),setTimeout(function(){n.CH.callbackOnVisibility(function(){n.diagnosticText("visibilityResume",2);u.adHost.resumeAd()})},0))},u.adHost.onAdLoaded=function(){n.diagnosticText("ad.onAdLoaded",2);u.onLoaded&&u.onLoaded()},u.adHost.onAdLog=function(t){n.diagnosticText("log: "+(typeof t.id=="undefined"||t.id==null?"":t.id)+" "+t.message,2)},u.adHost.onAdError=function(i){n.AdHelper.post(n.VastEventHelper.getMessage(t),c(i));n.diagnosticText("ad.onAdError "+i,2,2)},u.adViewer=i.viewer,i.viewer.start(i.mediaFile,u.adHost).then(l,function(t){return n.diagnosticText("ad.finsh.error ["+t+"]",2,2),l(),f?Promise.resolve():Promise.reject(t)})},h(o))},o=u.vastContext={url:n.AdHelper.getRequestUrl(t,i),viewAd:e,cancel:!1},u.processTagStartPromise=n.processTagStart(o)},t.prototype.getVolume=function(){return this.adHost?this.volume=this.adHost.getAdVolume():this.volume},t.prototype.setVolume=function(t){this.volume=t;this.adHost?(this.adHost.setAdVolume(t),this.processTagVolumeChangeHandler&&this.processTagVolumeChangeHandler()):n.FeatureHelper.volumeEnable&&(this.video.volume=t)},t.prototype.getCurrentTime=function(){if(!this.adHost)return-1;var n=this.adHost.getAdDuration(),t=this.adHost.getAdRemainingTime();return n>=0&&t>=0?n-this.adHost.getAdRemainingTime():-1},t.prototype.setCurrentTime=function(){},t.prototype.getDuration=function(){return this.adHost?this.adHost.getAdDuration():-2},t.prototype.getBuffer=function(){return this.adHost&&this.adHost.getAdBuffered?this.adHost.getAdBuffered():null},t.prototype.play=function(){this.played?this.context.pageProgress.clearWait():this.adHost&&this.adHost.resumeAd()},t.prototype.pause=function(){this.played?this.adHost&&this.adHost.pauseAd():this.context.pageProgress.clearWait()},t.prototype.replay=function(){this.play()},t.prototype.stop=function(){this.vastContext&&(this.vastContext.cancel=!0,this.vastContext=null);this.adViewer&&this.adViewer.kill()},t.prototype.resize=function(n,t){this.adViewer&&this.adViewer.resize&&this.adViewer.resize(n,t)},t.prototype.videoWebkitBeginFullScreenHandler=function(){var t=!this.video.ended&&!this.video.paused&&this.video.currentTime==0;!this.isNativePlayer&&t&&this.nativePlayer();!this.isNativePlayer||this.video.paused||this.video.ended||(n.diagnosticText("iphone correct (ad)",2),this.video.play());this.onBeginFullScreen&&this.onBeginFullScreen()},t.prototype.videoWebkitEndFullScreenHandler=function(){this.video.controls=!1;this.onEndFullScreen&&this.onEndFullScreen()},t.prototype.nativePlayer=function(){n.FeatureHelper.iosSafari9feature||(this.isNativePlayer=!0,n.CH.addClass(this.context.playerForm,"hplayer-iphone"))},t.prototype.isFullscreen=function(){return!1},t.prototype.beginFullscreen=function(){return!1},t.prototype.endFullscreen=function(){},t.prototype.playerFullscreenState=function(n){this._fullscreen!==n&&(this._fullscreen=n,this.processTagFullscreenChangeHandler&&this.processTagFullscreenChangeHandler())},t}();n.PlayerAd=t}(newstube3||(newstube3={})),function(n){function r(t){return n.diagnosticText("vast.url="+t,2,3),n.AdHelper.getXml(t).then(function(n){var i=e(n);return i&&(i.url=t),i})}function f(i){return __awaiter(this,void 0,void 0,function(){function c(n){return n&&n.length?n.slice().sort(function(n,t){return n.sequence&&t.sequence?n.sequence-t.sequence:(n.sequence?0:1)-(t.sequence?0:1)}):null}function f(t,i){if(t){var r=i;i>=1e3&&(i=i>=9e3&&i<1e4?901:900);n.PlayerUtils.knocker(t.replace("[ERRORCODE]",i.toString()).replace("[ERRORCODE-DETAIL]",r.toString()))}}function l(t,i){var u=t,r=i.Inner;typeof t!="number"&&(n.PlayerUtils0.errorSend(t),u=t=900);t>=1e3&&(t=900);r&&(r.Error&&f(r.Error,u),r.Extensions&&r.Extensions.NT&&r.Extensions.NT.nt6_not_show&&f(r.Extensions.NT.nt6_not_show,u));n.PlayerEvents.VastError(i,u)}function a(n){var t,i;if(n.Creatives&&n.Creatives.length)for(t=0;t<n.Creatives.length;t++)if(i=n.Creatives[t],i.Liner&&h)return i;return null}function v(t,r){return __awaiter(this,void 0,void 0,function(){var u,f,e,o;return __generator(this,function(){return(u=a(r),u==null)?(n.VastEventHelper.callErrorUrl(n.VastEventHelper.getError(t),101),[2,Promise.reject(101)]):(f=u.Liner,f?(e=f.MediaFiles,!e||!e.length)?(n.VastEventHelper.callErrorUrl(n.VastEventHelper.getError(t),400),[2,Promise.reject(400)]):[2,i.viewAd(t,u,f,t.Inner.Extensions).then(undefined,function(i){return n.VastEventHelper.callErrorUrl(n.VastEventHelper.getCreativeError(t),i),Promise.reject(i)})]:(o=u.NonLinearAds,n.VastEventHelper.callErrorUrl(n.VastEventHelper.getError(t),500),[2,Promise.reject(500)]))})})}function y(i){return __awaiter(this,void 0,void 0,function(){function h(t){return __awaiter(this,void 0,void 0,function(){var u,f,e;return __generator(this,function(s){switch(s.label){case 0:u=i.path+"_";n.AdHelper.invoke(n.VastEventHelper.getCalling(i,t,u));s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r(t)];case 2:return f=s.sent(),n.AdHelper.invoke(n.VastEventHelper.getCalled(i,t,u)),[3,4];case 3:return e=s.sent(),n.VastEventHelper.callErrorUrl(n.VastEventHelper.getErrorUrl(i,t,u),301),[2,Promise.reject(301)];case 4:return[2,o(i,f)]}})})}var f,s,e,c,l;return __generator(this,function(r){switch(r.label){case 0:return(f=i.Inner,!f)?[3,13]:(s=!1,!(f.type===t.InLine))?[3,2]:(n.AdHelper.invoke(n.VastEventHelper.getInline(i)),[4,v(i,f)]);case 1:return r.sent(),s=!0,[3,4];case 2:return(f.type===t.Wrapper&&f.VASTAdTagURI)?(n.AdHelper.invoke(n.VastEventHelper.getWrapper(i)),[4,h(f.VASTAdTagURI)]):[3,4];case 3:r.sent();s=!0;r.label=4;case 4:if(!s)return[3,13];if(console.log("viewed {viewed}"),!(u&&u.Inner.Extensions&&u.Inner.Extensions.AdMail&&u.Inner.Extensions.AdMail.Allowblock==1))return[3,12];if(e=f.Extensions&&f.Extensions.NT,!e)return[3,12];if(!e.nt6_gpmd_allowblock_1)return[3,8];n.diagnosticText("vast.gpmd.block1",2);r.label=5;case 5:return r.trys.push([5,7,,8]),[4,h(e.nt6_gpmd_allowblock_1)];case 6:return r.sent(),n.diagnosticText("второй блок просмотрен."),[3,8];case 7:return c=r.sent(),n.diagnosticText("второй блок не показан."),[3,8];case 8:if(!e.nt6_gpmd_allowblock_2)return[3,12];n.diagnosticText("vast.gpmd.block2",2);r.label=9;case 9:return r.trys.push([9,11,,12]),[4,h(e.nt6_gpmd_allowblock_2)];case 10:return r.sent(),[3,12];case 11:return l=r.sent(),[3,12];case 12:return[2];case 13:return[2,Promise.reject(101)]}})})}function o(t,i){return __awaiter(this,void 0,void 0,function(){var o,a,h,v,e,p,r,w;return __generator(this,function(b){switch(b.label){case 0:if(!i)return[2,Promise.reject(303)];if(i.parentAd=t,i.path=(t?t.path:"")+"_",!(i.Ad&&i.Ad.length))return n.VastEventHelper.callErrorUrl(n.VastEventHelper.getErrorUrl(t,i.url,i.path),303),f(i.Error,303),[2,Promise.reject(303)];o=c(i.Ad);a=!1;e=0;b.label=1;case 1:if(!(e<o.length))return[3,7];p=e;r=o[p];r.path=i.path+p.toString();r.parent=i;n.diagnosticText("ad.id="+r.id+" "+r.path,2);b.label=2;case 2:return b.trys.push([2,4,,5]),[4,y(r)];case 3:return b.sent(),h=!0,u=r,[3,5];case 4:return w=b.sent(),h=!1,u=null,v=w,l(v,r),[3,5];case 5:if(a=a||h&&!!r.sequence,Date.now()>s+n.externals.adVastLoopTimeout||e+1===o.length||h&&!o[e+1].sequence)return[3,7];b.label=6;case 6:return e++,[3,1];case 7:return!a&&!h?[2,Promise.reject(v)]:[2]}})})}var s,e,h,p,u;return __generator(this,function(n){switch(n.label){case 0:return s=Date.now(),[4,r(i.url)];case 1:return(e=n.sent(),!e)?[2,Promise.reject(303)]:(h=!0,p=!1,u=null,[2,o(null,e)])}})})}function e(r){function g(n,t){switch(t.nodeName){case"Error":n.Error=e(t);break;case"Ad":var i=h(t);return(n.Ad||(n.Ad=[])).push(i),i.parent=n,u(t.childNodes,i,nt)}return!0}function nt(n,i){var r=i.nodeName,f=r==t[2]?2:r==t[1]?1:0;return u(i.childNodes,n.Inner={type:f},tt)}function tt(n,t){var r=t.nodeName,i;switch(r){case"AdSystem":n.AdSystem=p(t);break;case"AdTitle":case"Error":case"VASTAdTagURI":n[r]=e(t);break;case"Impression":i=a(t);i.uri&&(n.Impression||(n.Impression=[])).push(i);break;case"Creatives":return u(t.childNodes,n,et);case"Extensions":return u(t.childNodes,n.Extensions={},it)}return!0}function it(n,t){if(t.nodeName==="Extension"){var i=o(t,"type"),r=e(t);rt(n,i,r);ut(n,i,r)}return!0}function rt(n,t,i){function r(i){(n.AdMail||(n.AdMail={}))[t]=i}switch(t){case"startTime":case"skipTime":case"skipTime2":r(v(i));break;case"skipAd":case"addClick":r(i);break;case"isClickable":case"controls":case"Allowblock":r(f(i,0));break;case"linkTxt":r(ft(decodeURIComponent(i)))}}function ut(n,t,i){function r(i){(n.NT||(n.NT={}))[t]=i}t&&t.indexOf("nt6_",0)===0&&r(i)}function ft(n){return n?n.replace(/&#(\d+);/g,function(n,t){return t?String.fromCharCode(parseInt(t)):n}):n}function et(n,t){if(t.nodeName==="Creative"){var i=h(t);return(n.Creatives||(n.Creatives=[])).push(i),u(t.childNodes,i,ot)}return!0}function ot(n,t){switch(t.nodeName){case"Linear":return u(t.childNodes,n.Liner=h(t),ct);case"NonLinearAds":return u(t.childNodes,n.NonLinearAds={},st);default:return!0}}function st(n,t){switch(t.nodeName){case"TrackingEvents":return u(t.childNodes,n.TrackingEvents={},w);case"NonLinear":var i=n.NonLinear=h(t,d);return u(t.childNodes,i,ht);default:return!0}}function ht(n,t){var i=t.nodeName;switch(i){case"AdParameters":case"HTMLResource":return n[i]=b(t),!0;case"StaticResource":n.StaticResource=p(t);break;case"NonLinearClickTracking":case"NonLinearClickThrough":case"IFrameResource":n[i]=e(t);break;default:return!0}}function ct(n,t){switch(t.nodeName){case"AdParameters":n.AdParameters=b(t);case"Duration":return n.Duration=v(e(t)),!0;case"TrackingEvents":return u(t.childNodes,n.TrackingEvents={},w);case"MediaFiles":return u(t.childNodes,n,at);case"VideoClicks":return u(t.childNodes,n.VideoClicks={},lt);default:return!0}}function w(n,t){if(t.nodeName=="Tracking"){var i=o(t,"event"),r=e(t);i&&r&&(i==="progress"&&(r={offset:o(t,"offset"),uri:r}),(n[i]||(n[i]=[])).push(r))}return!0}function lt(n,t){var i;switch(t.nodeName){case"ClickTracking":i=a(t);i.uri&&(n.ClickTracking||(n.ClickTracking=[])).push(i);break;case"ClickThrough":i=a(t);i.uri&&(n.ClickThrough=i)}return!0}function at(n,t){if(t.nodeName=="MediaFile"){var i=p(t,k);i.parent=n;(n.MediaFiles||(n.MediaFiles=[])).push(i)}return!0}function a(n){return{uri:e(n),id:o(n,"id")}}function b(n){var t=e(n);return t&&yt(n,"xmlEncoded",!1)?vt(t):t}function vt(n){return n.replace("&amp;","&").replace("&gt;",">").replace("&lt;","<").replace("&quot;",'"').replace("&apos;","'")}function f(n,t){return n==null||n==""?t:parseInt(n)}function s(n,t){return n==null||n==""?t:n=="true"}function v(n,t){if(n!=null&&n!==""){var i=/(((\d+):)?(\d+):)?(\d+)(\.(\d+))?/.exec(n);if(i!==null)return(((i[3]?parseInt(i[3]):0)*60+(i[4]?parseInt(i[4]):0))*60+parseInt(i[5]))*1e3+(i[7]?parseInt(i[7]):0)}return t}function y(n,t,i){for(var u,r=0;r<t.length;r++){var e=t[r],o=e.name,f=e.value;i&&(u=i[o],u&&(f=u.method(f,u.defaultValue)));n[o]=f}}function p(n,t){var i={};return y(i,n.attributes,t),i.Value=e(n),i}function h(n,t){var i={};return y(i,n.attributes,t),i}function o(n,t){return n.hasAttribute&&!n.hasAttribute(t)?null:n.getAttribute(t)}function e(t){return n.CH.trim(n.CH.getTextContent(t))}function yt(n,t){return s(o(n,t))}function pt(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.nodeType===1&&(t==null||t===r.nodeName))return r}function u(n,t,i){for(var u,r=0;r<n.length;r++)if(u=n[r],u.nodeType===1&&!i(t,u))return!1;return!0}var k={bitrate:{method:f},minBitrate:{method:f},maxBitrate:{method:f},width:{method:f},height:{method:f},scalable:{method:s},maintainAspectRatio:{method:s},delivery:{method:function(n){return i[n]}}},d={width:{method:f},height:{method:f},expandedWidth:{method:f},expandedHeight:{method:f},scalable:{method:s},maintainAspectRatio:{method:s},minSuggestedDuration:{method:v}},c,l;return r?(c=pt(r.childNodes,"VAST"),c==null)?{}:(l=h(c),u(c.childNodes,l,g)?l:{}):{}}var i,t,u;(function(n){n[n.streaming=1]="streaming";n[n.progressive=2]="progressive"})(i=n.DeliveryEnum||(n.DeliveryEnum={})),function(n){n[n.InLine=1]="InLine";n[n.Wrapper=2]="Wrapper"}(t=n.AdInnerTypeEnum||(n.AdInnerTypeEnum={})),function(n){n[n.Error=0]="Error";n[n.Linear=1]="Linear";n[n.Nonlinear=2]="Nonlinear";n[n.Companion=3]="Companion";n[n.SkippableLinear=4]="SkippableLinear";n[n.AdPods=5]="AdPods"}(u=n.AdTypeEnum||(n.AdTypeEnum={}));n.processTagStart=f}(newstube3||(newstube3={})),function(n){var t;(function(t){function r(n,t){return u(n,t.parent.url,t.path)}function u(t,i,r){return t?t.replace("[NT_TAG]",encodeURIComponent(i)).replace("[NT_PATH]",r).replace("[NT_SBLOCK]",n.adsloaded?"0":"1"):t}function e(n){return i(n,function(){return[]},function(t,i){var u=t.Inner.Extensions;return u&&u.NT&&u.NT.nt6_creative_info&&i.push(r(u.NT.nt6_creative_info,n)),i})}function o(t,i){var u,r,f;if(t&&t.length)for(u=i,i>=1e3&&(i=i>=9e3&&i<1e4?901:900),r=0;r<t.length;r++)f=t[r],n.PlayerUtils.knocker(f.replace("[ERRORCODE]",i.toString()).replace("[ERRORCODE-DETAIL]",u.toString()))}function s(n,t,r){return i(n,function(){return[]},function(n,i){var f=n.Inner.Extensions;return f&&f.NT&&f.NT.nt6_calling&&i.push(u(f.NT.nt6_calling,t,r)),i})}function h(n,t,r){return i(n,function(){return[]},function(n,i){var f=n.Inner.Extensions;return f&&f.NT&&f.NT.nt6_called&&i.push(u(f.NT.nt6_called,t,r)),i})}function c(n){return i(n,function(){return[]},function(t,i){var u=t.Inner.Extensions;return u&&u.NT&&u.NT.nt6_wrapper&&i.push(r(u.NT.nt6_wrapper,n)),i})}function l(n){return i(n,function(){return[]},function(t,i){var u=t.Inner.Extensions;return u&&u.NT&&u.NT.nt6_inline&&i.push(r(u.NT.nt6_inline,n)),i})}function a(n){return i(n,function(){return[]},function(t,i){var u=t.Inner.Extensions;return u&&u.NT&&u.NT.nt6_creative_error&&i.push(r(u.NT.nt6_creative_error,n)),i})}function v(n){return i(n,function(){return[]},function(t,i){var u=t.Inner.Extensions;return u&&u.NT&&u.NT.nt6_error&&i.push(r(u.NT.nt6_error,n)),i})}function y(n,t,r){return i(n,function(){return[]},function(n,i){var f=n.Inner.Extensions;return f&&f.NT&&f.NT.nt6_error&&i.push(u(f.NT.nt6_error,t,r)),i})}function p(n){return i(n,function(){return[]},function(t,i){var u=t.Inner.Extensions;return u&&u.NT&&u.NT.nt6_message&&i.push(r(u.NT.nt6_message,n)),i})}function w(n){return i(n,function(){return[]},function(t,i){var f=t.Inner.Impression,u;if(f)for(u=0;u<f.length;u++)i.push(r(f[u].uri,n));return i})}function b(n){return i(n,function(){return[]},function(t,i){var s=f(t),o,u,e;if(s&&(o=s.Liner.VideoClicks,o&&(u=o.ClickTracking,u)))for(e=0;e<u.length;e++)i.push(r(u[e].uri,n));return i})}function f(n){var i=n.Inner.Creatives,t,r;if(i)for(t=0;t<i.length;t++)if(r=i[t],r.Liner!=null)return r;return null}function k(n,t,u){function s(n){var t=n.TrackingEvents;return t&&t[u]||[]}var h=s(n),e=i(t.parent.parentAd,function(){return h},function(n,t){var e=f(n),i,r;return e&&(i=e.Liner.TrackingEvents,i&&(r=i[u],r&&(t=t.concat(r)))),t}),o;if(e)for(o=0;o<e.length;o++)e[o]=r(e[o],t);return e}function i(n,t,i){for(var r=t();n;)r=i(n,r),n=n.parent.parentAd;return r}function d(n,t){while(n){var i=t(n);if(i!=null)return i;n=n.parent.parentAd}return null}t.getCreativeInfo=e;t.callErrorUrl=o;t.getCalling=s;t.getCalled=h;t.getWrapper=c;t.getInline=l;t.getCreativeError=a;t.getError=v;t.getErrorUrl=y;t.getMessage=p;t.getImpressions=w;t.getClickTracking=b;t.getTrackingLinear=k;t.adLoop=i;t.adFirst=d})(t=n.VastEventHelper||(n.VastEventHelper={}))}(newstube3||(newstube3={})),function(n){var t=function(){function t(n){this.simple=!0;this.video=n}return t.prototype.canPlayType=function(n){return this.video.canPlayType(n)!==""},t.prototype.start=function(t,i){var r=this;return r.cancelCallback=n.PlayerUtils.getCancelCallback(),new Promise(function(u,f){function e(){n.PlayerCHHelper.aActiveClear(r.video);r.video.removeEventListener("canplay",g);r.video.removeEventListener("play",nt);r.video.removeEventListener("playing",tt);r.video.removeEventListener("pause",rt);r.video.removeEventListener("ended",h);r.video.removeEventListener("error",o);r.video.removeEventListener("stalled",o);r.video.removeEventListener("timeupdate",ut);r.video.removeEventListener("seeking",it);r.video.removeEventListener("click",ft);r.video.removeEventListener("webkitbeginfullscreen",et);r.video.removeEventListener("webkitendfullscreen",ot);n.HtmlMediaElementHelper.clearVideo(r.video);r.cancelCallback=null}function d(n,t){n?setTimeout(function(){n();t()},0):t()}function st(){e();d(i.onAdSkipped,function(){u()})}function s(){e();u()}function ht(){return r.video.error&&r.video.error.code==MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,405}function ct(){e();var n=ht();i.onAdError?setTimeout(function(){i.onAdError(r.video.error?r.video.error.code.toString():null);f(n)},0):f(n)}function g(){a||(i.onAdLoaded&&i.onAdLoaded(),a=!0)}function nt(){v?i.onAdPlaying&&i.onAdPlaying():v=!0}function tt(){l||(l=!0,i.onAdImpression&&setTimeout(i.onAdImpression,0));c||(c=!0,i.onAdCreativeView&&setTimeout(i.onAdCreativeView,0));y||(y=!0,i.onAdVideoStart&&setTimeout(i.onAdVideoStart,0))}function it(){i.onAdRewind&&i.onAdRewind()}function rt(){i.onAdPaused&&i.onAdPaused()}function h(){lt();s()}function o(t){n.diagnosticText("html5ad: errorHandler "+t.toString(),2,1);ct()}function lt(){k||(k=!0,i.onAdVideoComplete&&i.onAdVideoComplete())}function ut(){at();!p&&r.video.currentTime/r.video.duration>=.25&&(p=!0,i.onAdVideoFirstQuartile&&i.onAdVideoFirstQuartile());!w&&r.video.currentTime/r.video.duration>=.5&&(w=!0,i.onAdVideoMidpoint&&i.onAdVideoMidpoint());!b&&r.video.currentTime/r.video.duration>=.75&&(b=!0,i.onAdVideoThirdQuartile&&i.onAdVideoThirdQuartile());r.video.currentTime===r.video.duration&&h()}function at(){i.onAdDurationChange&&i.onAdDurationChange()}function ft(){i.clickAd&&i.clickAd()}function et(){i.onAdBeginFullscreen&&i.onAdBeginFullscreen()}function ot(){i.onAdEndFullscreen&&i.onAdEndFullscreen()}var c=!1,l=!1,a=!1,v=!1,y=!1,p=!1,w=!1,b=!1,k=!1;r.video.src=t.Value;r.video.volume=i.adVolume;r.video.load();r.video.addEventListener("canplay",g);r.video.addEventListener("play",nt);r.video.addEventListener("playing",tt);r.video.addEventListener("pause",rt);r.video.addEventListener("ended",h);r.video.addEventListener("error",o);r.video.addEventListener("stalled",o);r.video.addEventListener("timeupdate",ut);r.video.addEventListener("seeking",it);r.video.addEventListener("click",ft);r.video.addEventListener("webkitbeginfullscreen",et);r.video.addEventListener("webkitendfullscreen",ot);r.cancelCallback.setCancelAction(s);i.pauseAd=function(){n.diagnosticText("video.pause()",2);r.video.pause()};i.resumeAd=function(){n.diagnosticText("video.play() resume",2);r.video.play()};i.stopAd=s;i.skipAd=st;i.setAdVolume=function(n){return r.video.volume=n};i.getAdVolume=function(){return n.FeatureHelper.volumeEnable?r.video.volume:-1};i.getAdDuration=function(){return r.video.duration};i.getAdRemainingTime=function(){return r.video.duration-r.video.currentTime};i.getAdBuffered=function(){return r.video.buffered};i.getCurrentTime=function(){return r.video.currentTime};n.PlayerCHHelper.aActive(r.video);n.diagnosticText("video.play() start",2);r.video.play()})},t.prototype.kill=function(){this.cancelCallback&&this.cancelCallback.cancel()},t}();n.VideoHtmlAdViewer=t}(newstube3||(newstube3={})),function(n){var t;(function(n){n[n.ScriptLoadError=9101]="ScriptLoadError";n[n.getVPAIDAdNotExists=9102]="getVPAIDAdNotExists";n[n.InterfaceFalse=9103]="InterfaceFalse";n[n.HandshakeVersionCallError=9104]="HandshakeVersionCallError";n[n.SubscribeCallError=9105]="SubscribeCallError";n[n.InitAdCallError=9106]="InitAdCallError";n[n.ResizeCallError=9107]="ResizeCallError";n[n.StartAdCallError=9108]="StartAdCallError";n[n.StopAdCallError=9109]="StopAdCallError";n[n.SkipAdCallError=9110]="SkipAdCallError";n[n.ResumeAdCallError=9111]="ResumeAdCallError";n[n.PauseAdCallError=9112]="PauseAdCallError";n[n.UnloadAndComplete=9113]="UnloadAndComplete";n[n.AdError=9114]="AdError";n[n.AdStartedTimeout=9115]="AdStartedTimeout";n[n.AdStoppedTimeout=9115]="AdStoppedTimeout";n[n.AdSkipped=9116]="AdSkipped";n[n.AdSkippedTimeout=9117]="AdSkippedTimeout";n[n.AdLoadedTimeout=9118]="AdLoadedTimeout";n[n.AdStoppedTimeoutAfterComplete=9119]="AdStoppedTimeoutAfterComplete";n[n.AdStopped=9120]="AdStopped";n[n.Unknown=9100]="Unknown";n[n.Success=0]="Success"})(t=n.VpaidDetailErrors||(n.VpaidDetailErrors={}))}(newstube3||(newstube3={}))