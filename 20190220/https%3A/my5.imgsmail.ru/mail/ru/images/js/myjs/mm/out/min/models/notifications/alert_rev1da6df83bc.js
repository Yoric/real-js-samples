define(["counters","base/model","util/helpers"],function(a,b,c){"use strict";var d=5e4;return b.extend({props:{func:"advice.get",funcSave:"advice.notify_action",funcRemove:"advice.delete",defaults:{action:"",category:"",type:"",id:""},defaultOptions:{counters:{timeout:{friend_suggest:820676,friendship_accept:820701,community_invite:820719,app_invite:820782,gift:823861,vip:823866,community_post_invite:823874,comment_micropost:823884,comment_photo:823888,comment_video:823892,comment_audio:823896,comment_share:823900,like_micropost:823904,like_photo:823908,like_video:823912,like_audio:823916,like_share:823920,photo_vote:823925}}}},public:{setTimeout:function(){var b=this.get("element");return this.timeout=setTimeout(function(){var b=this.options.counters.timeout[this.get("type")];this.removeElement(),b&&a.myrb(b)}.bind(this),d),b.on("mouseenter",this.onMouseEnter.bind(this)),b.on("mouseleave",this.onMouseLeave.bind(this)),this},removeElement:function(){return this.isRemovedFromDom=!0,this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.get("element").off().fadeOut(function(){this.remove()})}},protected:{onMouseEnter:function(){this.timeout&&(clearTimeout(this.timeout),delete this.timeout)},onMouseLeave:function(){this.timeout=setTimeout(this.removeElement.bind(this),d)},adapter:function(a){return{commonFriends:a.common_friends,playlist:a.playlist,sender:a.sender,user:a.user}},getFetchParams:function(){return{type:this.get("type"),id:this.get("id"),sender:this.get("senderId"),senderEmail:this.get("senderEmail")}},getSaveParams:function(){var a=this.get("id");return"friendship"===this.get("type")&&(a=this.get("eid")),c.isString(a)&&(a=a.split(":")[0]),{notify_type:this.get("type"),notify_id:a,action:this.get("action")}},getRemoveParams:function(){return{category:this.get("category"),type:this.get("type"),id:this.get("id")}}}})});