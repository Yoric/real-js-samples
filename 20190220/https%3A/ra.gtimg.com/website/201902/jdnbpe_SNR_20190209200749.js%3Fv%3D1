crystal.adbox_ADBOXCALLBACK=function(){var oid=0,props={res:[{resource_url:"http://b.gtimg.com/order/adbox/201902/adbox_1549714060_394.jpg",width:400,height:300,link_to:"",cover:!1},{resource_url:"http://b.gtimg.com/order/adbox/201902/adbox_1549714067_3805.jpg",width:20,height:100,link_to:"",cover:!1}],duration:8e3,lock:!1,freq:2},initOrder=function(config){oid=config.oid,each(props.res,function(o,k){o.link_to=config.fodder[0].link_to,o.cover=config.fodder[0].cover||o.cover
}),props.duration=config.display_config.duration||props.duration,props.lock=config.display_config.lock||props.lock,props.freq=config.display_config.freq||props.freq},getConfig=function(k){return props[k]},init=function(config,el,el_id,ping){initOrder(config),createMapElement("res",props.res),MapElement.init(mapData),ping()
},each=crystal.each,dom=crystal.dom,evt=crystal.evt,cookie=crystal.cookie,COOKIE_HEAD="ADBOX",isArray=function(o){return!!o&&"object"==typeof o&&"number"==typeof o.length},showAd=function(css){each(css,function(o){configElements[o.obj]&&dom.setStyle(configElements[o.obj],o.css)
})},stopAd=function(){each(arguments,function(o){configElements[o.obj]&&dom.setStyle(configElements[o.obj],o.css)})},showWithLock=function(css,autoPlay,callBack){if(0===mutex_lock())return showAd(css),callBack&&callBack(),!0;if(autoPlay){var args=arguments,fun=arguments.callee;
setTimeout(function(){fun.apply(null,args)},500)}return!1},closeWithLock=function(){stopAd.apply(null,arguments),mutex_unlock()},getFreq=function(){return parseInt(cookie.get(COOKIE_HEAD+oid))||0},setFreq=function(){var num=getFreq()+1;cookie.set(COOKIE_HEAD+oid,num,{expires:1,path:"/"})
},freqShow=function(fun1,fun2){props.freq>getFreq()?(fun1(),setFreq()):fun2()},configElements={body:document.body},createMapElement=function(type,data){switch(type){case"res":each(data,function(o,k){var _div=dom.createElement({},{});crystal.renderFodder(o,_div),configElements["res"+k]=_div
})}},MapElement={data:"",css:{},attr:{},events:{},html:"",tag:"",key:"",config:{},runTeam:{},execReg:function(reg,elment){var re=reg.exec(elment),index=arguments[2]||1;return re?re[index]:re},getData:function(mapStr){return this.data=this.execReg(/<([^>]*)>/g,mapStr)
},getTag:function(mapStr){return this.tag=this.execReg(/<(\w+)[#.+>]/g,mapStr)},getKey:function(mapStr){return this.key=this.execReg(/(\w+[#]*\w+)/gi,mapStr)},getCss:function(mapStr){var _css=this.execReg(/(\{[^\}]*\})/g,mapStr);eval("this.css="+_css)},getAttr:function(mapStr){var _attr=this.execReg(/\{[^\}]*\}(\{[^\}]*\})/g,mapStr);
return eval("this.attr="+_attr),this.attr},getEvents:function(mapStr){var _event=this.execReg(/E\(([^\>]*)\)/g,mapStr);_event&&eval("this.events={"+_event+"}")},getInnerHTML:function(mapStr){var _html=this.execReg(/AI\(([^\)]*)\)/g,mapStr);eval("this.html="+_html)
},init:function(mapData){for(var aid in mapData)aid.indexOf("$")>=0?(MapElement.config[aid.slice(1)]=mapData[aid],delete mapData[aid]):isArray(mapData[aid])?each(mapData[aid],function(o){MapElement.getMapStr(o)}):this.getMapStr(mapData[aid]);this.render(mapData),this.makeConfig()
},getMapStr:function(mapStr){if("events"!=arguments[1])this.setElement(mapStr);else if(mapStr.indexOf("F")<0){var mapStrs=mapStr.split(","),map=this;each(mapStrs,function(o){map.setElement(o,"events")})}else this.setElement(mapStr,"events")},setElement:function(mapStr){if(arguments[1]&&mapStr.indexOf("F")>=0)return eval("var _fun=function(){"+this.execReg(/F\[(.*)(\]\s*)$/g,mapStr)+"}()"),void _fun;
if(this.getKey(mapStr),this.key){this.getCss(mapStr),this.getAttr(mapStr),this.getEvents(mapStr),this.getInnerHTML(mapStr),configElements[this.key]?(this.css&&dom.setStyle(configElements[this.key],this.css),this.attr&&(this.attr["class"].indexOf("mobileBox")>=0&&this.attr["class"].indexOf("SC_ad_borbg")<0&&(this.attr["class"]+=" SC_ad_borbg"),dom.setAttribute(configElements[this.key],this.attr))):(this.getTag(mapStr),this.tag&&(configElements[this.key]=dom.createElement(this.css||{},this.attr||{},this.tag))),this.html&&(configElements[this.key].innerHTML+=this.html);
var map=this;this.events,each(this.events,function(o,k){"init"==k?map.getMapStr(o,"events"):evt.on(configElements[map.key],k,function(){map.getMapStr(o,"events")})}),this.events={}}},render:function(mapData){for(var aid in mapData)isArray(mapData[aid])?each(mapData[aid],function(o,k){MapElement.addMapElements(aid,o),"actionBlockRight"==aid&&mapData[aid].length>1&&k>0&&dom.setStyle(configElements[o],{"margin-left":"5px"})
}):this.addMapElements(aid,mapData[aid])},addMapElements:function(area,elment){if(area&&elment)if(elment.indexOf("+")>=0){var elments=elment.split("+");each(elments,function(o,k){0==k?MapElement.addMapElment(area,elments[k]):MapElement.addMapElment(elments[k-1],elments[k])
})}else this.addMapElment(area,elment)},addMapElment:function(area,elment){var ekey,akey=this.getKey(area);if(area&&elment&&configElements[akey]){if(elment.indexOf("|")>=0){var elments=elment.split("|");ekey=this.getKey(sns_msglist.length>0?elments[0]:elments[1])
}else ekey=this.getKey(elment);configElements[ekey]&&configElements[akey].appendChild(configElements[ekey])}},makeConfig:function(){var ctr=this.config.controler;ctr&&ctr.run&&each(ctr.run,function(e,state){switch(e.type){case"setTimeout":var _fun=function(){var t=setTimeout(function(){MapElement.gotoPlay(e.nextState)
},e.time());MapElement.runTeam[e.nextState]=function(){t&&clearTimeout(t)}};MapElement.runTeam[state]=_fun}}),each(this.config.view,function(o,e){each(o,function(target,event){evt.on(configElements[target],event,function(){MapElement.gotoPlay(e)})})}),this.gotoPlay("init")
},gotoPlay:function(state,from){var model=this.config.model||{},ctr=this.config.controler||{};switch(state){case"init":var fun1=function(){MapElement.gotoPlay("play","init")},fun2=function(){MapElement.gotoPlay("stop","init")};ctr.frequency()>0?freqShow(fun1,fun2):fun1();
break;case"play":if(ctr.playLock())return"init"==from?showWithLock(model.play,!0,this.runTeam[state]):showWithLock(model.play,!1,this.runTeam[state]);showAd(model.play);break;case"stop":ctr.playLock()&&"init"!=from?closeWithLock.apply(null,model.stop):stopAd.apply(null,model.stop);
break;case"close":stopAd.apply(null,model.close)}this.runTeam[state]&&this.runTeam[state]()}},setFixed=function(mapid,css,fixCss){if(configElements[mapid])if(crystal.FeatureDetector.cssPositionFixed)dom.setStyle(configElements[mapid],css);else{dom.setStyle(configElements[mapid],fixCss);
var _onscroll=window.onscroll;window.onscroll=function(){_onscroll&&_onscroll(),each(fixCss,function(o,k){var _css={};try{_css[k]=o(),dom.setStyle(configElements[mapid],_css)}catch(e){_css[k]=o,dom.setStyle(configElements[mapid],_css)}})}}},mapData={body:["<div#1{'right': '0px','z-index': '100', "+(crystal.FeatureDetector.cssPositionFixed?"'position':'fixed', 'bottom': '0px',":"'position':'absolute', 'top': '"+(document.documentElement.scrollTop+(document.documentElement.clientHeight-140)+"px")+"',")+" 'display': 'block'}			E('init':\"F[setFixed('div#1',{'position':'fixed','bottom':'0px'},{'position':'absolute','top':function(){return document.documentElement.scrollTop +  document.documentElement.clientHeight -140 +'px'}})]\")>","res0{'position': '"+(crystal.FeatureDetector.cssPositionFixed?"fixed":"absolute")+"','left': '50%','top':'"+(crystal.FeatureDetector.cssPositionFixed?"50%":document.documentElement.scrollTop+document.documentElement.clientHeight/2+"px")+"'			,'margin-left': '"+("-"+props.res[0].width/2+"px")+"','margin-top': '"+("-"+props.res[0].height/2+"px")+"','z-index': '999'}			E('init':\"F[setFixed('res0',{'position':'fixed','top':'50%'},{'position':'absolute','top':function(){return document.documentElement.scrollTop +  document.documentElement.clientHeight / 2 +'px'}})]\")"],res0:"<button#0{'position': 'absolute', 'top': '0px', 'right': '0px','width': '63px', 'height': '24px', 'border-width': '0px', 'z-index': '100', 'cursor': 'pointer', 'background-image': 'url(http://ra.gtimg.com/web/res/icon/righttop.png)'}>","div#1":["<button#1{'display': 'block','border-width': '0px', 'background-image': 'url(http://ra.gtimg.com/web/res/adbox_replay.png)', 'font-size': '12px', 'padding': '0px', 'margin': '0px', 'width': '20px', 'height': '20px','cursor': 'pointer'}>","res1","<button#2{'display': 'block', 'margin': '0px', 'padding': '0px', 'width': '20px', 'height': '20px', 'border-width': '0px', 'background-image': 'url(http://ra.gtimg.com/web/res/adbox_close.png)', 'background-color': 'rgb(238, 238, 238)', 'cursor': 'pointer', 'background-position': '50% 50%', 'background-repeat': 'no-repeat'}>"],$model:{play:[{obj:"res0",css:{display:"block"}},{obj:"div#1",css:{display:"none"}}],rePlay:this.play,stop:[{obj:"res0",css:{display:"none"}},{obj:"div#1",css:{display:"block"}}],close:[{obj:"res0",css:{display:"none"}},{obj:"div#1",css:{display:"none"}}]},$controler:{frequency:function(){return getConfig("freq")
},playLock:function(){return getConfig("lock")},run:{play:{nextState:"stop",type:"setTimeout",time:function(){return getConfig("duration")}}}},$view:{play:{click:"button#1"},stop:{click:"button#0"},close:{click:"button#2"}}};return function(config,el,el_id,ping){init(config,el,el_id,ping)
}}();/*2015-08-25 14:04:07*/