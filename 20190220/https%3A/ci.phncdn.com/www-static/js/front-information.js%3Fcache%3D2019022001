function langURL(){$j("#flagWrapper a").each(function(){-1==$j(this).attr("href").indexOf("?")&&$j(this).attr("href",$j(this).attr("href")+"?frag="+$j(location).attr("hash").slice(1))})}function switchFaqCategory(e){$j("#faqCategoryTitle_"+e).addClass("active").siblings(".faq-category-title").removeClass("active"),$j("#faqCategory_"+e).addClass("active").siblings(".faq-category").removeClass("active")}function faqRate(e,t,n,a){$j.ajax({type:"POST",url:"/front/rate?id="+e+"&value="+t+"&current="+n+"&token="+a,error:function(t){$j("#faqVoteResponse_"+e).addClass("error").html("There was an error sending the feedback.")},success:function(e){e&&LocalStorageManager.getInstance().push("faqRated",e)},complete:function(t){$j("#faqVoteFeedback_"+e).fadeOut(400,function(){$j("#faqVoteResponse_"+e).fadeIn()}),$j("#faqVoteUp_"+e).off("click").attr("onclick","return false;"),$j("#faqVoteDown_"+e).off("click").attr("onclick","return false;")}})}function processJson(e){"SUCCESS"==e.success&&($j("#trafficjunky-advertising").hide(),$j(".jSonContainer").hide(),$j(".successMsg").show()),"ERROR"==e.success&&($j(".jSonContainer").show(),$j("#jSonLabel").html(e.messages.captcha).css("color","red"),Recaptcha.reload())}function checkBoxvalidation(){var e=!0;return $j(".checkbox").each(function(){0==$j(this).find("input").prop("checked")&&(e=!1)}),e}function checkEmptyField(){var e=!0;return $j(".fieldRequired").each(function(){""==$j(this).val()&&(e=!1)}),e}function validateThisForm(){var e,t=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,n=/(?:^|\s)((https?:\/\/)?([\w-]+(?:\.[\w-]+)+)(:\d+)?(\/\S*)?)/,a=$j("#fname_dmca").val()+" "+$j("#lname_dmca").val(),r=document.querySelectorAll(".workDetails.selected .inputField.urlInput"),i=document.querySelectorAll(".workDetails.selected .descriptionSelect");if(recaptchaComplete)if(0==$j(".selected").find(".urlInput").val().length)e=WIDGET_DMCA.errorEmptyURL+".";else if(checkEmptyField())if(t.test($j("#email_dmca").val()))if(checkBoxvalidation()){if(0==$j("#signature_dmca").val().length)e=WIDGET_DMCA.errorSignatureEmpty+".";else if($j("#signature_dmca").val()!==a)e=WIDGET_DMCA.errorSignatureName+".";else if(r){for(var o=0;o<r.length;o++)n.test($j(r[o]).val())||(e=WIDGET_DMCA.errorURL+".");if(i)for(var s=0;s<i.length;s++)if(0===parseInt(i[s].value)&&(e=WIDGET_DMCA.errorDescription+"."),6===parseInt(i[s].value)){var l=$j(i[s]).closest(".fieldContainer").next().find('input[id*="workType"]').val();0===l.length&&(e=WIDGET_DMCA.errorWorkType+".")}}}else e=WIDGET_DMCA.errorTerms+".";else e=WIDGET_DMCA.errorEmail+".";else e=WIDGET_DMCA.errorEmptyField+".";else e=WIDGET_DMCA.errorCaptcha+".";if(void 0!==e){$j("#messageBack").html(e);var c=$j("#messageBack").offset().top;$j("html,body").animate({scrollTop:c-50},400)}else $j.ajax({type:"POST",url:"/front/dmca_form",data:$j("#dmcaForm").serialize(),success:function(e){$j(".dmcaFormWrapper").find("form").hide(),$j(".thankYouMessage").show(),$j("body").scrollTop(0)}})}var submitButton,dropdown,advertise,report,feedback,type,typeDropdown,mysite,interested,spot,screenshot,contentLink,email,comments,errorContainer,emailRegex,duration,open=0,sections;$j(".sign-up-button").click(function(){$j("html, body").animate({scrollTop:$j("#cppSignUpFormTitle").offset().top},800,"easeOutQuad")}),head.ready(document,function(e){var t=$j(location).attr("href").split("#")[1];void 0==t&&(t=location.search.substring(6)),$j(location).attr("href","#"+t),"/information"==$j(location).attr("pathname")&&langURL(),$j("div[class^='tabmenu-']").click(function(){refresh=!1}),$j("div[class^='tabmenu-']").on("mouseout",function(){refresh=!0}),window.addEventListener("hashchange",function(){!0===refresh&&window.location.reload(!0)}),sections=$j("div.section"),$j("div[class^='tabmenu-'] ul li, p.footer a, .logoFooterWrapper a, #footer a").click(function(){langURL()});var n=$j("#trafficjunky-advertising").data("url"),a={url:n,dataType:"json",success:processJson};submitButton=$j("#submit-form input"),dropdown=$j(".dropdown"),email=$j("input#email"),comments=$j("textarea#comments"),errorContainer=$j("#error-container").html(WIDGET_INFORMATION_ADVERTISING.errorMsg),advertise=$j("#advertise"),report=$j("#report"),feedback=$j("#feedback-option"),type=$j("#type-container"),typeDropdown=$j("#type-dropdown-container"),spot=$j("#spot-container"),screenshot=$j("#screenshot-container"),contentLink=$j("#content-link-container"),mysite=$j("#mysite-container"),interested=$j("#interested-container"),emailRegex=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,open=0,duration=200,$j("#subject-value").val($j("#subject-dropdown").find("p").html()),$j("#type-value").val($j("#type").html()),$j("#interested-value").val($j("#interested-in").find("p").html());advertise.click(function(){typeDropdown.slideUp(duration),spot.slideUp(duration),screenshot.slideUp(duration),contentLink.slideUp(duration),type.slideDown(duration),mysite.slideDown(duration),interested.slideDown(duration)}),report.click(function(){type.slideUp(duration),mysite.slideUp(duration),interested.slideUp(duration),typeDropdown.slideDown(duration),spot.slideDown(duration),screenshot.slideDown(duration),contentLink.slideDown(duration)}),feedback.click(function(){type.slideUp(duration),mysite.slideUp(duration),interested.slideUp(duration),typeDropdown.slideUp(duration),spot.slideUp(duration),screenshot.slideUp(duration),contentLink.slideUp(duration)}),$j("#subject-dropdown li").click(function(){var e=$j(this).html();$j(this).parent().parent().find("p").html(e),$j("#subject-value").val(e),$j("dropdown-menu").slideUp(duration)}),$j("#interested-in li").click(function(){var e=$j(this).html();$j(this).parent().parent().find("p").html(e),$j("#interested-value").val(e),$j("dropdown-menu").slideUp(duration)}),$j("#type li").click(function(){var e=$j(this).html();$j(this).parent().parent().find("p").html(e),$j("#type-value").val(e),$j("dropdown-menu").slideUp(duration)}),$j("#type-dropdown li").click(function(){var e=$j(this).html();$j(this).parent().parent().find("p").html(e),$j("#type-dropdown-value").val(e),$j("dropdown-menu").slideUp(duration)});var r=function(){email.hasClass("error")||comments.hasClass("error")?(submitButton.addClass("disabled").animate({opacity:"0.6"},500),errorContainer.fadeIn(500)):(submitButton.removeClass("disabled").animate({opacity:"1"},500),errorContainer.fadeOut(500))};email.on("keyup blur",function(){var e=$j("input#email").val();emailRegex.test(e)&&(email.removeClass("error"),r())}),comments.on("keyup blur",function(){comments.val().trim().length>9&&(comments.removeClass("error"),r())}),$j("#trafficjunky-advertising").on("submit",function(e){var t=$j("input#email").val();if(emailRegex.test(t)||(email.addClass("error").focus(),r()),comments.val().trim().length<10&&(comments.addClass("error"),r()),email.hasClass("error")?email.focus():comments.hasClass("error")&&comments.focus(),email.hasClass("error")||comments.hasClass("error"))return e.preventDefault(),!1;$j(this).ajaxSubmit(a),e.preventDefault()}),$j("#screenshot").change(function(){var e=$j("#screenshot");$j("#screenshot").val().match(/(?:gif|jpg|png|bmp)$/)||(alert("You must choose an image file to upload"),e.val("").replaceWith(e=e.clone(!0)))}),$j("a.tabLink").click(function(e){tabSwitch=$j(this).attr("data-switch"),$j("#mg_tab_list").children("li").removeClass("active"),$j("#mg_tab_list").children("#tabMenu_"+tabSwitch).addClass("active"),$j(".sectionWrapper").children(".tab-content").removeClass("active"),$j(".sectionWrapper").children("."+tabSwitch+"-content").addClass("active")}),function(){var e;dropdown.click(function(){0==open&&($j(this).parent().find(".dropdown-menu").slideDown(100),open=1)}),dropdown.stop(!0,!0).mouseenter(function(){clearTimeout(e)}),dropdown.stop(!0,!0).mouseleave(function(){e=setTimeout(function(){$j(".dropdown-menu").slideUp(100)},500),open=0}),$j(".dropdown-menu li").click(function(t){t.stopImmediatePropagation(),clearTimeout(e),$j(".dropdown-menu").slideUp(100),open=0})}(),$j("#mg_tab_list li").each(function(){$j(this).find("a").length&&$j(this).addClass("tabMenuLink")}),$j("#mg_tab_list a").on("click",function(e){e.stopImmediatePropagation()})});var Linked_select=function(){var e=this;e.init=function(t){e.params=t,e.params.selectElms=$j(e.params.selectElms),e.params.selectElms.length&&e.addEvents()},e.addEvents=function(){e.params.selectElms.change(function(){var t=$j(this),n=t.find("option:selected").data("target");$j('[data-id="'+t.data("items")+'"]').find(e.params.linkedElms).hide(),n&&$j($j('[data-id="'+n+'"]')).show()}),e.params.selectElms.change()}},linkedList;try{linkedList=new Linked_select,linkedList.init({selectElms:".js_linkedList",linkedElms:".js_linkedItem",linkedElmsWrapper:".js_linkedItems"})}catch(e){errorHandler("linkedList.init "+e.message)}var DMCA_form_validator=function(){var e=this;e.init=function(t){e.params=t,e.checkWorkItems(),e.addWorkItems()},e.checkWorkItems=function(){var t=e.params.formWrapper.find(".workDetails.selected"),n=e.params.workDetails.length;t.length<n&&e.params.addButton.show()},e.addWorkItems=function(){var t,n,a,r=e.params.workDetails.length;e.params.addButton.click(function(){return t=e.params.formWrapper.find(".workDetails.selected"),n=t.eq(t.length-1).find(".urlInput"),a=t.eq(t.length-1).find(".descriptionSelect"),""===$j.trim(n.val())?(n.focus(),$j(".messageError").html("Add a video first before choosing to add another."),!1):"0"===a.val()?(a.focus(),$j(".messageError").html("Add a video first before choosing to add another."),!1):("0"==a.val()&&""==$j.trim(n.val())||$j(".messageError").html(""),t.length===r-1&&e.params.addButton.hide(),void(t.length<r&&e.params.workDetails.eq(t.length).addClass("selected")))})}},myDMCAValidator=new DMCA_form_validator;myDMCAValidator.init({formWrapper:$j(".dmcaFormWrapper"),workDetails:$j(".dmcaFormWrapper").find(".workDetails"),addButton:$j(".dmcaFormWrapper").find(".orangeButton.add")}),$j(".informationLink").click(function(){return $($(this).data("trigger")).click(),!1});var actionModifierManager=function(){var e=this;e.isModern=void 0!==document.addEventListener,e.init=function(t){e.params=t,e.params.isLoggedIn||e.params.actionMod&&e.buildIDsList(e.params.actionMod)},e.buildIDsList=function(t){for(var n=t.toString(),a=document.getElementsByClassName(n),r=0,i=a.length,o="click";r<i;r++){var s=a[r].getAttribute("id");e.isModern?document.getElementById(s).addEventListener(o,e.saveIDandURL):document.getElementById(s).attachEvent("on"+o,e.saveIDandURL),page_params.actionModifierArr.push(s)}},e.saveIDandURL=function(){var e=localStorage,t=window.location.href;e.setItem("returnId",this.id),e.setItem("returnUrl",t)}},actionTrigger=new actionModifierManager;actionTrigger.init(page_params.actionModifierSetup),$j(".js-takeDownSend").click(function(e){validateThisForm(),e.preventDefault()}),function(){var e=[],t=function(e,t){if("createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}else{var n=document.createEventObject();n.eventType=t,e.fireEvent("on"+n.eventType,n)}},n=function(e,t){return t.filter(function(t){return t.textContent.toLowerCase().indexOf(e.toLowerCase())>-1})},a=function(t){e.push(t)},r=function(e){MG_Utils.addClass(e,"active")},i=function(e){MG_Utils.addClass(e.parentElement,"display-none")},o=function(e){MG_Utils.removeClass(e.parentElement,"display-none")},s=function(t){this.value.length>0?[].forEach.call(document.querySelectorAll(".faq-category"),r):document.querySelector(".faq-category-title.active").click(),[].forEach.call(document.querySelectorAll(".expandable-title"),i);var a=n(t.target.value,e),s=document.querySelector("#js-searchFAQNoResults");this.value.length>0&&!a.length?MG_Utils.removeClass(s,"display-none"):MG_Utils.addClass(s,"display-none"),[].forEach.call(a,o)},l=function(){var e=document.querySelector("#searchFAQ");e.value="",t(e,"keyup")};[].forEach.call(document.querySelectorAll(".expandable-title"),a),document.querySelector("#searchFAQ").addEventListener("keyup",s),document.querySelector("#js-searchFAQClear").addEventListener("click",l)}();