function cppSwitchTabs(a){if(!$j(a.target).hasClass("active")){$j(a.target).toggleClass("active").siblings().toggleClass("active"),$j(".tourSection > div").hide();var e=$j(a.target).data("tab");$j("."+e).show()}}function scrollToForm(a){var e=$j(".applicationForm").offset().top-60;$j("html,body").animate({scrollTop:e},700,"swing"),a&&($j("#cpp_viewshare").attr("checked",!0),console.log("checked"))}function validateForm(a){var e=!1,r=$j("#js-formError");if(recaptchaComplete&&""!=$j("#cpp_name").val()&&""!=$j("#cpp_email").val()&&0!=$j("#cpp_program").val()){e=!0;var p=$j("#cpp_email").val();0==new RegExp(/^([a-zA-Z0-9\.\-\_]*)(\@)([a-zA-Z0-9\.\-\_]*)+(\.)([a-zA-Z]{2,})$/).test(p)&&(e=!1,a||$j("#cpp_email").addClass("error"),error=PARTNERS_CPP.messages.invalidEmal)}else error=PARTNERS_CPP.messages.requiredFields,e=!1,recaptchaComplete||a||$j("#repcatchaError").addClass("error"),""!=$j("#cpp_name").val()||a||$j("#cpp_name").addClass("error"),""!=$j("#cpp_email").val()||a||$j("#cpp_email").addClass("error"),""!=$j("#cpp_program").val()||a||$j("#cpp_program").addClass("error");if(a)return e;e?$j.ajax({url:PARTNERS_CPP.uploadUrl,cache:!1,type:"post",data:{cppSignUpUsername:$j("#cpp_username").val(),cppSignUpName:$j("#cpp_name").val(),cppSignUpEmail:$j("#cpp_email").val(),cppSignUpProgramName:$j("#cpp_program").val(),cppSignUpSiteName:$j("#cpp_site").val(),cppSignUpOrientation:{straight:$j("#cpp_straight").is(":checked"),gay:$j("#cpp_gay").is(":checked"),transsexual:$j("#cpp_trans").is(":checked")},cppSignUpViewshare:$j("#cpp_viewshare").is(":checked"),cppSignUpHeardabout:$j("#cpp_heardabout").val(),cppSignUpSiteMessage:$j("#cpp_message").val()},success:function(a){0===a.success?(r.html(1==a.fields.length?a.fields[0].fieldError:PARTNERS_CPP.messages.requiredFields),$j(a.fields).each(function(){$j("#cpp_"+this.fieldName).addClass("error")})):($j("#applicationForm").slideUp(),$j("#formSuccess").slideDown())}}):r.html(error)}function replaceDropdown(){var a=$j("#cpp_heardabout"),e=$j("#cpp_heardabout option");a.parent().append('<div class="js-dropdownWrap styledDropdown"><div class="ddSelected"></div><ul class="ddList"></ul></div>');var r=$j(".ddSelected");r.text($j(e[0]).text());for(var p=1;p<e.length;p++){var i=e[p],t='<li data-val="'+$j(i).val()+'">'+$j(i).text()+"</li>";$j(".ddList").append(t),$j(".ddList li").on("click",function(){var e=$j(this).data("val");a.val(e),r.text(e),r.removeClass("ddOpen"),$j(".ddList").slideUp()})}$j(".ddSelected").on("click",function(){$j(".ddList").slideToggle(),$j(this).toggleClass("ddOpen")}),a.hide()}head.ready(function(){replaceDropdown(),$j(".tourSliderSwitch li").click(cppSwitchTabs),$j("a[href='#applicationForm']").click(function(a){a.preventDefault(),scrollToForm($j(a.target).data("viewshare"))}),$j("#applicationForm").on("submit",function(a){a.preventDefault(),$j("#js-formError").html(""),$j("input.error").removeClass("error"),$j("#repcatchaError").removeClass("error"),validateForm()}),$j("#applicationForm input, #applicationForm textarea").on("focus blur",function(a){var e=$j(this);$j("#applicationFormSubmitButton");e.val(e.val().replace(/[\<\>|\[\]|\{\}|\(\)|\$]/gi,""))})});