var MG_Modal=function(){"use strict";function t(){var t={autoOpen:!1,className:"generalMTubes",closeButton:!0,closeDocument:!0,closeKey:!1,content:"",maxWidth:"",minWidth:"",overlay:!0,position:"",pageScrolling:!1,timeMs:null};this.closeButton=null,this.container=null,this.modal=null,this.options=MG_Utils.extendDefaults(t,arguments[0]),this.options.autoOpen&&this.openModal()}function i(){var t,i=document.createElement("div"),n=document.createDocumentFragment();t="string"==typeof this.options.content?this.options.content:this.options.content.innerHTML.replace(/MHP1138-/gi,""),e.call(this),o.call(this),i.className="contentMTubes",i.innerHTML=t,this.modal.appendChild(i),this.container.appendChild(this.modal),s.call(this),n.appendChild(this.container),document.body.appendChild(n)}function e(){return this.container=document.createElement("div"),this.container.id="modalWrapMTubes",MG_Utils.isRbga?this.container.className=(MG_Utils.isRbga()?"":"noRbga ")+"fadeInMTubes containerMTubes "+this.options.className:this.container.className="fadeInMTubes containerMTubes "+this.options.className,this.container}function o(){return this.modal=document.createElement("div"),this.modal.className="modalMTubes "+this.options.className,this.modal.style.minWidth=this.options.minWidth,this.modal.style.maxWidth=this.options.maxWidth,this.modal}function n(){var t=this;if(this.closeButton){var i=function(){t.closeModal(),MG_Utils.removeEventHandler(t.closeButton,"click",i)};MG_Utils.addEventHandler(t.closeButton,"click",i)}if(this.container&&this.options.closeDocument){var e=function(i){"modalWrapMTubes"===(i.target&&i.target.id||i.srcElement&&i.srcElement.id)&&(t.closeModal(),MG_Utils.removeEventHandler(t.container,"click",e))};MG_Utils.addEventHandler(t.container,"click",e)}if(this.container&&this.options.closeKey){var o=function(i){i.keyCode?i.keyCode:i.charCode;27==i.keyCode&&(t.closeModal(),MG_Utils.removeEventHandler(document,"keyup",o))};MG_Utils.addEventHandler(document,"keyup",o)}}function s(){if(this.options.closeButton&&(this.closeButton=document.createElement("button"),this.closeButton.className="closeMTubes buttonMTubes",this.modal.appendChild(this.closeButton)),this.options.overlay&&MG_Utils.addClass(this.container,"isVisibleMTubes"),this.options.pageScrolling){var t=document.body;MG_Utils.addClassMultiple([this.container,t],"scrollMTubes"),t.style.height=MG_Utils.docHeight()+"px"}this.options.position&&(this.modal.style.marginTop=this.options.position)}function l(t){if("string"!=typeof t){var i=0,e=t.querySelectorAll("*"),o=e.length;for(i;i<o;i++)e[i].id&&!e[i].id.match(/MHP1138-/gi)&&(e[i].id="MHP1138-"+e[i].id)}}var a,c;return t.prototype={constructor:t,closeModal:function(t){if(a=!1,MG_Utils.removeClass(document.body,"isOpenMTubes"),this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.options.timeMs&&clearTimeout(c),this.options.pageScrolling){var i=document.body;MG_Utils.removeClass(i,"scrollMTubes"),i.style.height=""}t&&"function"==typeof t&&t(this.container,this.modal)},openModal:function(t){if(!a){if(i.call(this),n.call(this),MG_Utils.addClass(document.body,"isOpenMTubes"),MG_Utils.addClassMultiple([this.modal,this.container],"elOpenMTubes"),this.options.timeMs){var e=this;c=setTimeout(function(){e.closeModal()},this.options.timeMs)}t&&"function"==typeof t&&t(this.container,this.modal),l(this.options.content)}a=!0}},t}();