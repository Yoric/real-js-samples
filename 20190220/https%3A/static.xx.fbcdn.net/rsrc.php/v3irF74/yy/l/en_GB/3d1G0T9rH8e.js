if (self.CavalryLogger) { CavalryLogger.start_js(["SC1DX"]); }

__d("FourOhFourJSTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:FourOhFourJSLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:FourOhFourJSLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:FourOhFourJSLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setFbid=function(a){this.$1.fbid=a;return this};a.prototype.setOriginalURI=function(a){this.$1.original_uri=a;return this};a.prototype.setScriptPath=function(a){this.$1.script_path=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={fbid:!0,original_uri:!0,script_path:!0,time:!0,weight:!0};e.exports=a}),null);
__d("RealtimeRequestStreamWebClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RealtimeRequestStreamWebClientLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RealtimeRequestStreamWebClientLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RealtimeRequestStreamWebClientLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setClientSessionID=function(a){this.$1.client_session_id=a;return this};a.prototype.setClientTimeMs=function(a){this.$1.client_time_ms=a;return this};a.prototype.setMessage=function(a){this.$1.message=a;return this};a.prototype.setSeverity=function(a){this.$1.severity=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setUserFbid=function(a){this.$1.user_fbid=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={client_session_id:!0,client_time_ms:!0,message:!0,severity:!0,time:!0,user_fbid:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("FourOhFourJSLogger",["FourOhFourJSTypedLogger","ScriptPath"],(function(a,b,c,d,e,f){a={log:function(){window.onload=function(){var a=new(b("FourOhFourJSTypedLogger"))();a.setOriginalURI(window.location.href);a.setScriptPath(b("ScriptPath").getScriptPath());a.logVital()}}};e.exports=a}),null);
__d("XHPTemplate",["DataStore","DOM","HTML","XHPTemplateProcessor"],(function(a,b,c,d,e,f){__p&&__p();var g=b("XHPTemplateProcessor").processor;function h(a){"use strict";g instanceof Function&&(a=g(a)),this._model=a}h.prototype.render=function(){"use strict";b("HTML").isHTML(this._model)&&(this._model=b("DOM").setContent(document.createDocumentFragment(),this._model)[0]);return this._model.cloneNode(!0)};h.prototype.build=function(){"use strict";return new i(this.render())};h.getNode=function(a,b){"use strict";return h.getNodes(a)[b]};h.getNodes=function(a){"use strict";__p&&__p();var c=b("DataStore").get(a,"XHPTemplate:nodes");if(!c){c={};var d=b("DOM").scry(a,"[data-jsid]");d.push(a);var e=d.length;while(e--){var f=d[e];c[f.getAttribute("data-jsid")]=f;f.removeAttribute("data-jsid")}b("DataStore").set(a,"XHPTemplate:nodes",c)}return c};function i(a){"use strict";this._root=a,this._populateNodes()}i.prototype._populateNodes=function(){"use strict";this._nodes={};this._leaves={};var a=this._root.getElementsByTagName("*");for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d.getAttribute("data-jsid");e&&(d.removeAttribute("data-jsid"),this._nodes[e]=d,this._leaves[e]=!d.childNodes.length)}};i.prototype.getRoot=function(){"use strict";return this._root};i.prototype.getNode=function(a){"use strict";return this._nodes[a]};i.prototype.setNodeProperty=function(a,b,c){"use strict";this.getNode(a)[b]=c;return this};i.prototype.setNodeContent=function(a,c){"use strict";if(!this._leaves[a])throw new Error("Can't setContent on non-leaf node: "+a);b("DOM").setContent(this.getNode(a),c);return this};e.exports=h}),null);
__d("UFIReactionsDialogLayerImpl.react",["cx","csx","invariant","BrowserSupport","CSS","DataStore","DOM","DOMQuery","Focus","Layer","Locale","Parent","React","ReactDOM","ReactTransitionEvents","RTLKeys","Style","SubscriptionsHandler","TabbableElements","Vector","ViewportBounds","cancelAnimationFrame","clearTimeout","ge","getElementPosition","getOverlayZIndex","memoize","renderSubtreeIntoContainer_DO_NOT_USE","requestAnimationFrameAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k;c=b("React").PropTypes;var l="_1oxh",m="_2r6k",n="_2r6j",o=b("BrowserSupport").hasCSSAnimations(),p="_22uo",q="_6fqy",r=200,s={};j=babelHelpers.inherits(t,b("Layer"));j&&j.prototype;t.prototype.updatePosition=function(){"use strict";__p&&__p();var a=this.getInsertParent(),c=this.getCausalElement(),d=b("Vector").getElementPosition(c),e=b("Vector").getElementPosition(a);d=d.sub(e);e=b("Vector").getElementDimensions(a).x;b("Locale").isRTL()&&(d.x=e-d.x);e=b("Vector").getViewportDimensions().x;var f=b("Vector").getElementDimensions(this.getContentRoot()).x;d.x=Math.min(d.x,e-f);b("Locale").isRTL()?s.right=d.x+"px":s.left=d.x+"px";s.top=d.y+"px";s.zIndex=this._getZIndex(c,a);e=this.getRoot();e!=null||i(0,4781);b("Style").apply(e,s);return!0};t.prototype._getZIndex=function(a,c){"use strict";__p&&__p();a=b("getOverlayZIndex")(a,c);var d=b("Parent").byClass(c,"fbPhotoSnowliftContainer"),e=d&&b("DOMQuery").scry(d,".stageWrapper")[0];e&&(a=Math.max(a,b("getOverlayZIndex")(e,d)));e=b("ge")("pagelet_sidebar");if(e){d=b("DOMQuery").scry(e,".fbChatSidebar")[0];e=b("DOMQuery").scry(c,"._13pa")[0];d&&e==null&&(a=Math.max(a,parseInt(b("Style").get(d,"z-index"),10)+1))}return a};t.prototype.getContentRoot=function(){"use strict";return this.contentRoot};t.prototype._buildWrapper=function(a,c){"use strict";b("CSS").addClass(c,"_49v-");this.contentRoot=c;a=document.createElement("div");b("CSS").addClass(a,"_1oxj");a.appendChild(c);return a};function t(){"use strict";j.apply(this,arguments)}d=babelHelpers.inherits(a,b("React").Component);k=d&&d.prototype;function a(a,c){"use strict";__p&&__p();k.constructor.call(this,a,c),this.onTransitionHide=function(){b("ReactTransitionEvents").removeEndEventListener(this.layer.getContentRoot(),this.onTransitionHide),this.finishHide()}.bind(this),this.onTransitionShow=function(){var a=this.layer.getContentRoot();a!=null||i(0,4782);b("ReactTransitionEvents").removeEndEventListener(a,this.onTransitionShow);var c=b("requestAnimationFrameAcrossTransitions")(function(){b("CSS").removeClass(a,n)});this.handler.addSubscriptions({remove:function(){b("cancelAnimationFrame")(c)}})}.bind(this),this.onKeyDown=function(a){__p&&__p();var c=a.keyCode;if(this.props.isScreenReader)return;if(c===b("RTLKeys").ESC||c===b("RTLKeys").RETURN||c===b("RTLKeys").TAB){this.props.onLayerBlur&&this.props.onLayerBlur(a);var d=b("ReactDOM").findDOMNode(this.refs.root),e=b("TabbableElements").find(this.getContextualLayerParent()),f=null,g=[];c=c===b("RTLKeys").TAB&&a.shiftKey;for(var h=0;h<e.length;h++)if(e[h].tabIndex>-1){if(d.compareDocumentPosition(e[h])&4){f=e[h];break}c&&g.push(e[h])}g.length&&(f=g[g.length-1]);f&&(b("Focus").set(f),a.preventDefault(),a.stopPropagation())}}.bind(this),this.getGlobalContainer=b("memoize")(function(){return b("ge")("globalContainer")}),this.onParentLayerHide=this.finishHide.bind(this)}a.prototype.componentDidMount=function(){"use strict";var a=b("ReactDOM").findDOMNode(this.refs.root);this.layer=new t({causalElement:a,insertParent:a},document.createElement("div"));b("DOM").appendContent(a,this.layer.getRoot());this.handler=new(b("SubscriptionsHandler"))();this.props.onLayerBlur&&this.handler.addSubscriptions(this.layer.subscribe("blur",this.props.onLayerBlur));this.handler.addSubscriptions(this.layer.subscribe("beforeshow",this.beforeShow.bind(this)),this.layer.subscribe("aftershow",this.afterShow.bind(this)),this.layer.subscribe("starthide",this.startHide.bind(this)));this.isInDocument()&&this.renderLayer()};a.prototype.componentDidUpdate=function(a){"use strict";this.renderLayer()};a.prototype.componentWillUnmount=function(){"use strict";__p&&__p();if(this.layer){var a=this.layer.getContentRoot();b("ReactDOM").unmountComponentAtNode(this.layer.getContentRoot());b("ReactTransitionEvents").removeEndEventListener(a,this.onTransitionHide);b("ReactTransitionEvents").removeEndEventListener(a,this.onTransitionShow);this.handler.release();this.handler=null;this.layer.destroy();this.layer=null}};a.prototype.isInDocument=function(){"use strict";var a=b("ReactDOM").findDOMNode(this.refs.root);return a&&document.body.contains(a)};a.prototype.afterShow=function(){"use strict";__p&&__p();b("CSS").removeClass(this.refs.root,"accessible_elem");var a=this.layer.getContentRoot();a!=null||i(0,4783);var c=b("getElementPosition")(a).y,d=b("ViewportBounds").getTop();b("CSS").conditionClass(a,l,c&&c<d);if(o){b("ReactTransitionEvents").addEndEventListener(a,this.onTransitionShow);b("CSS").addClass(a,p);b("CSS").addClass(a,q);b("CSS").addClass(a,n);var e=b("setTimeoutAcrossTransitions")(function(){this.props.setAnimatingDock(!1),b("CSS").removeClass(a,q)}.bind(this),r);this.handler.addSubscriptions({remove:function(){b("clearTimeout")(e)}})}c=b("TabbableElements").find(a)[0];c&&c.focus()};a.prototype.beforeShow=function(){"use strict";o&&this.props.setAnimatingDock(!0);var a=this.getContextualLayerParent();this.props.isScreenReader?this.layer.setInsertParent(this.layer.getCausalElement()):a!==this.layer.getInsertParent()&&(this.layer.setInsertParent(a),this.setParentLayerSubscription(a))};a.prototype.setParentLayerSubscription=function(a){"use strict";__p&&__p();if(a!==this.getGlobalContainer()){this.parentLayerSubscription&&this.parentLayerSubscription.unsubscribe();this.parentLayer=null;return}a=a;var c=null;while(a!==null){c=b("DataStore").get(a,"layer");if(c)break;a=a.parentNode}if(c&&c!==this.parentLayer){this.parentLayerSubscription&&this.parentLayerSubscription.unsubscribe();a=c.subscribe("hide",this.onParentLayerHide);this.handler.addSubscriptions(a);this.parentLayerSubscription=a;this.parentLayer=c}};a.prototype.startHide=function(){"use strict";if(o&&this.isInDocument()){var a=this.layer.getContentRoot();a!=null||i(0,4784);b("ReactTransitionEvents").addEndEventListener(a,this.onTransitionHide);b("CSS").addClass(a,m)}else this.finishHide();return!1};a.prototype.finishHide=function(){"use strict";b("CSS").addClass(this.refs.root,"accessible_elem");var a=this.layer.getContentRoot();a!=null||i(0,4785);o&&(b("CSS").removeClass(a,l),b("CSS").removeClass(a,m),b("CSS").removeClass(a,p));this.layer.setInsertParent(this.layer.getCausalElement());this.layer.finishHide()};a.prototype.getContextualLayerParent=function(){"use strict";var a=b("ReactDOM").findDOMNode(this.refs.root);if(a instanceof Element){a=b("Parent").byClass(a,"uiContextualLayerParent");if(a instanceof HTMLElement)return a}return document.body};a.prototype.renderLayer=function(){"use strict";b("renderSubtreeIntoContainer_DO_NOT_USE")(this,b("React").createElement("div",babelHelpers["extends"]({},this.props,{className:"_1oxk",onKeyDown:this.onKeyDown}),this.props.children,b("React").createElement("div",{className:"_41nt"+(this.props.isDarkBackground?" _3_jc":"")+(this.props.semiTransparentBackground?" _6la8":"")+(this.props.noBackground?" hidden_elem":""),style:{height:this.props.height}})),this.layer.getContentRoot(),function(){this.layer&&this.layer.conditionShow(this.props.shown),this.props.onLayerRender&&this.props.onLayerRender()}.bind(this))};a.prototype.render=function(){"use strict";return b("React").createElement("div",{className:"_2r6l accessible_elem",ref:"root"})};a.propTypes={shown:c.bool,isScreenReader:c.bool,onLayerRender:c.func};e.exports=a}),null);
__d("UFIReactionsMenuImpl.react",["cx","fbt","Event","React","ReactDOM","RTLKeys","SubscriptionsHandler","UFIConfig","UFIReactionIconImpl.react","UFIReactionsDialogLayerImpl.react","UFIReactionTypes","addFocusEvents","getVendorPrefixedName","joinClasses","shallowCompare"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=8,k=96,l=48,m=44,n=39,o=b("UFIReactionTypes").reactions;b("getVendorPrefixedName")("transform");var p=h._("Reactions"),q=b("addFocusEvents")("span");c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(a,c){"use strict";__p&&__p();i.constructor.call(this);this.$2=function(){this.subscriptionsHandler!=null&&(this.subscriptionsHandler.release(),this.subscriptionsHandler=null)}.bind(this);this.focusSelected=function(){var a=b("ReactDOM").findDOMNode(this.refs[this.state.selectedIndex]);a&&a.focus()}.bind(this);this.onLayerRender=function(){this.state.hasKeyboardFocus&&this.focusSelected()}.bind(this);this.onKeyDown=function(a){switch(a.keyCode){case b("RTLKeys").RETURN:a.preventDefault();var c=this.state.supportedReactions[this.state.selectedIndex];this.props.initialReaction===c&&(c=b("UFIReactionTypes").NONE);c!==null&&c!==void 0&&this.props.onReactionClick&&this.props.onReactionClick(c,a);break;case b("RTLKeys").getLeft():case b("RTLKeys").getRight():a.preventDefault();this.setState({selectedIndex:Math.max(0,Math.min(this.state.selectedIndex+(a.keyCode===b("RTLKeys").getLeft()?-1:1),this.state.supportedReactions.length-1))},this.focusSelected);break}}.bind(this);this.setAnimatingDock=function(a){this.setState({isAnimatingDock:a})}.bind(this);c=a.supportedReactions.filter(function(a){return o[a]});var d=a.allowKeyboardFocus?Math.max(0,c.indexOf(a.initialReaction)):-1;this.state={hasKeyboardFocus:a.allowKeyboardFocus,isAnimatingDock:!1,prevPropsShown:a.shown,shouldRenderMenu:a.shown,selectedIndex:d,supportedReactions:c};this.hasAnimatedIcons=b("UFIConfig").reactionsHasAnimatedIcons;this.animatedIconsUsePackage=b("UFIConfig").reactionsAnimatedIconsUsePackage||!1}a.getDerivedStateFromProps=function(a,b){"use strict";if(!b.shouldRenderMenu&&a.shown)return{shouldRenderMenu:!0,prevPropsShown:a.shown,supportedReactions:a.supportedReactions.filter(function(a){return o[a]})};return!a.shown&&b.prevPropsShown?{hasKeyboardFocus:a.allowKeyboardFocus,selectedIndex:-1,prevPropsShown:a.shown,supportedReactions:a.supportedReactions.filter(function(a){return o[a]})}:{supportedReactions:a.supportedReactions.filter(function(a){return o[a]}),prevPropsShown:a.shown}};a.prototype.componentDidMount=function(){"use strict";this.props.allowKeyboardFocus&&this.focusSelected(),this.props.isLongPressing&&this.$1()};a.prototype.componentWillUnmount=function(){"use strict";this.$2()};a.prototype.componentDidUpdate=function(a,b){"use strict";this.props.allowKeyboardFocus&&!a.allowKeyboardFocus&&this.focusSelected(),this.props.isLongPressing&&!a.isLongPressing?this.$1():!this.props.isLongPressing&&a.isLongPressing&&this.$2()};a.prototype.$1=function(){"use strict";__p&&__p();var a;this.$2();this.subscriptionsHandler=new(b("SubscriptionsHandler"))();this.subscriptionsHandler.addSubscriptions(b("Event").listen(document.documentElement,"touchmove",function(b){b.preventDefault();var c=b.touches[0];c=document.elementFromPoint(c.clientX,c.clientY);!c.getAttribute("data-reaction")&&c.parentElement&&(c=c.parentElement);c=parseInt(c.getAttribute("data-reaction"),10)||null;c!==a&&(a&&this.onReactionMouseLeave(a,b),c&&this.onReactionMouseEnter(c,b),a=c)}.bind(this)),b("Event").listen(document.documentElement,"touchcancel",this.$2),b("Event").listen(document.documentElement,"touchend",function(b){this.$2(),a&&this.onReactionClick(a,b)}.bind(this)))};a.prototype.shouldComponentUpdate=function(a,c){"use strict";return b("shallowCompare")(this,a,c)};a.prototype.onDragStart=function(a){"use strict";a.preventDefault()};a.prototype.onKeyboardFocus=function(a,b){"use strict";this.setState({hasKeyboardFocus:!0,selectedIndex:a}),this.props.onFocus&&this.props.onFocus(b)};a.prototype.onReactionClick=function(a,b,c,d){c===void 0;d===void 0;b.preventDefault();if(!this.state.isAnimatingDock){var e;this.props.onReactionClick&&(e=this.props).onReactionClick.apply(e,arguments)}};a.prototype.onReactionMouseEnter=function(a,b){"use strict";this.setState({selectedIndex:this.props.supportedReactions.indexOf(a)}),this.props.onReactionMouseEnter&&this.props.onReactionMouseEnter(a)};a.prototype.onReactionMouseLeave=function(a,b){"use strict";this.setState({selectedIndex:-1}),this.props.onReactionMouseLeave&&this.props.onReactionMouseLeave(a)};a.prototype.render=function(){"use strict";__p&&__p();var a=this.state.supportedReactions.length;(a*l-k)/(a-1);var c=this.state.selectedIndex;a=this.state.supportedReactions.map(function(a,d){var e=o[a].display_name,f=this.onReactionClick.bind(this,a),g=Math.max(0,this.state.supportedReactions.indexOf(this.props.initialReaction))===d,h=this.props.icon,i=this.hasAnimatedIcons&&h&&h.supportsReaction&&h.supportsReaction(a);if(i){c===d;var j=this.props.allowAnimationPlayback&&this.props.shown;h=b("React").createElement(h,{animate:j,className:"_1ef0",selectedIndex:this.state.selectedIndex,maxSize:n,reactionID:a,usePackage:this.animatedIconsUsePackage})}else h=b("React").createElement(b("UFIReactionIconImpl.react"),{className:"_2jry",reaction:a,size:"48"});return b("React").createElement(q,{"aria-pressed":this.props.initialReaction===a,"aria-label":e,className:"_iuw"+(c===d?" _iuy":""),"data-testid":"reaction_"+(this.state.isAnimatingDock?"animating_":"")+a,href:"#",key:"reaction_"+a,onClick:f,onDragStart:this.onDragStart,onKeyboardFocus:this.onKeyboardFocus.bind(this,d),onMouseUp:this.props.onReactionMouseUp,onMouseDown:this.props.onReactionMouseDown,onMouseEnter:this.onReactionMouseEnter.bind(this,a),onMouseLeave:this.onReactionMouseLeave.bind(this,a),onTouchStart:this.onDragStart,onTouchEnd:f,ref:d,role:"button",tabIndex:g&&(!this.props.shown||c===d)?0:-1},b("React").createElement("div",{className:"_39m"+(i?" _1ef2":""),"data-reaction":a},b("React").createElement("div",{className:"_39n"},h,b("React").createElement("div",{className:"_d6l"},b("React").createElement("div",{className:"_4sm1"},e)))))}.bind(this));return!this.state.shouldRenderMenu?null:b("React").createElement(b("UFIReactionsDialogLayerImpl.react"),{height:m+j,setAnimatingDock:this.setAnimatingDock,isDarkBackground:this.props.isDarkBackground,isScreenReader:this.props.isScreenReader,onLayerBlur:this.props.onBlur,onLayerRender:this.onLayerRender,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,noBackground:this.props.noBackground,semiTransparentBackground:this.props.semiTransparentBackground,shown:this.props.shown},b("React").createElement("div",{className:b("joinClasses")("_iu-"+(this.state.hasKeyboardFocus?" _5wkt":"")+" _628b",this.props.className),"data-testid":"UFIReactionsMenu"+(this.state.isAnimatingDock?"_animating":""),onKeyDown:this.onKeyDown,"aria-label":p,ref:"root",role:"toolbar"},a))};e.exports=a}),null);
__d("UFI2BluePrimerDialog.react",["React"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){var c=a.Component;a=a.props;return b("React").createElement(c,a)}}),null);
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","nullthrows"],(function(a,b,c,d,e,f){__p&&__p();a.prototype.patchRequestHeaders=function(a){"use strict";var c={},d=b("RTISubscriptionManagerConfig").bladerunner_www_sandbox;if(d!=null){var e=b("nullthrows")(a.method);!e.startsWith("FBLQ:")&&!e.startsWith("FBGQLS:")&&(c["javascript-sandbox"]=d)}for(var f in a)c[f]=a[f];return c};function a(){"use strict"}c=new a();e.exports=c}),null);
__d("BladeRunnerLogger",["BanzaiODS","CurrentUser","FBLogger","RealtimeRequestStreamWebClientTypedLogger","gkx"],(function(a,b,c,d,e,f){__p&&__p();var g="bladerunner_js_client",h={info:"info",warning:"warning",exception:"exception"};function a(){"use strict";this.$1=this.$4(),this.setFBLoggerLevel(1)}a.prototype.info=function(a){"use strict";this.$3>=2&&b("FBLogger")(g).info(a),this.$5(h.info,a)};a.prototype.warn=function(a){"use strict";this.$3>=1&&b("FBLogger")(g).warn(a),this.$5(h.warning,a)};a.prototype.exception=function(a,c){c===void 0&&(c="");c=c+" "+a.toString();this.$3>=0&&b("FBLogger")(g).warn(c);this.$5(h.exception,c)};a.prototype.bumpCounter=function(a,c){c===void 0&&(c=1),b("BanzaiODS").bumpEntityKey("BladeRunnerClient",a,c)};a.prototype.setClientSessionId=function(a){"use strict";this.$2=a};a.prototype.setFBLoggerLevel=function(a){"use strict";this.$3=a};a.prototype.$5=function(a,c){"use strict";if(this.$1){a=new(b("RealtimeRequestStreamWebClientTypedLogger"))().setClientTimeMs(Date.now()).setSeverity(a).setMessage(c).setClientSessionID(this.$2).setUserFbid(b("CurrentUser").getID());a.log()}};a.prototype.$4=function(){"use strict";return b("gkx")("676834")};c=new a();e.exports=c}),null);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(a,b,c,d,e,f){__p&&__p();g.prototype.getHeaders=function(){"use strict";if(this.headers!=null)return this.headers;throw new Error("Expected headers")};g.readObject=function(a){"use strict";var b=new g();b.streamId=o(a.streamId);b.requestType=o(a.requestType);b.payload=r(a.payload);b.headers=u(a.headers);b.extraHeader=r(a.extraHeader);b.requestTarget=r(a.requestTarget);return b};function g(){"use strict"}h.readObject=function(a){"use strict";var b=new h();b.streamId=o(a.streamId);b.dataId=p(a.dataId);b.data=r(a.data);b.shouldAck=w(a.shouldAck);return b};h.prototype.decodeData=function(){"use strict";if(this.data==null)throw new Error("Expected data");return b("Base64").decode(this.data)};function h(){"use strict"}i.readObject=function(a){"use strict";var b=new i();b.streamId=o(a.streamId);b.dataId=o(a.dataId);b.success=v(a.success);b.message=r(a.message);b.code=p(a.code);return b};function i(){"use strict"}j.readObject=function(a){"use strict";var b=new j();b.streamId=p(a.streamId);b.message=r(a.message);return b};function j(){"use strict"}k.readObject=function(a){"use strict";var b=new k();b.streamId=o(a.streamId);b.status=o(a.status);b.message=r(a.message);b.code=p(a.code);b.shouldRetry=w(a.shouldRetry);b.retryDelayMs=p(a.retryDelayMs);return b};function k(){"use strict"}l.readObject=function(a){"use strict";var b=new l();b.streamId=o(a.streamId);b.newBody=r(a.newBody);b.newExtraHeader=r(a.newExtraHeader);b.patchExtraHeader=r(a.patchExtraHeader);b.killBody=w(a.killBody);b.temporary=w(a.temporary);return b};function l(){"use strict"}m.prototype.getRequest=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")};m.prototype.getData=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")};m.prototype.getDataAck=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")};m.prototype.getStatusUpdate=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")};m.prototype.getLog=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")};m.prototype.getRewriteRequest=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")};m.prototype.getStreamId=function(){"use strict";__p&&__p();if(this.type==b("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;throw new Error("Frame with unexpected type")};m.readObject=function(a){"use strict";__p&&__p();var c=new m();c.type=o(a.type);switch(c.type){case b("BladeRunnerTypes").StreamFrameType.REQUEST:c.request=g.readObject(s(a.request));break;case b("BladeRunnerTypes").StreamFrameType.DATA:c.data=h.readObject(s(a.data));break;case b("BladeRunnerTypes").StreamFrameType.DATA_ACK:c.dataAck=i.readObject(s(a.dataAck));break;case b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:c.statusUpdate=k.readObject(s(a.statusUpdate));break;case b("BladeRunnerTypes").StreamFrameType.LOG:c.log=j.readObject(s(a.log));break;case b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:c.rewriteRequest=l.readObject(s(a.rewriteRequest));break;default:b("BladeRunnerLogger").warn("Frame with unexpected type: "+c.type);return null}return c};m.newRequestFrame=function(a){"use strict";var c=new m();c.type=b("BladeRunnerTypes").StreamFrameType.REQUEST;c.request=a;return c};m.newDataFrame=function(a){"use strict";var c=new m();c.type=b("BladeRunnerTypes").StreamFrameType.DATA;c.data=a;return c};m.newDataAckFrame=function(a){"use strict";var c=new m();c.type=b("BladeRunnerTypes").StreamFrameType.DATA_ACK;c.dataAck=a;return c};m.newStatusUpdateFrame=function(a){"use strict";var c=new m();c.type=b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE;c.statusUpdate=a;return c};m.newLogFrame=function(a){"use strict";var c=new m();c.type=b("BladeRunnerTypes").StreamFrameType.LOG;c.log=a;return c};m.newRewriteRequestFrame=function(a){"use strict";var c=new m();c.type=b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST;c.rewriteRequest=a;return c};function m(){"use strict"}function n(a,b){"use strict";this.batchId=a,this.frames=b}n.prototype.getFrames=function(){"use strict";if(this.frames!=null)return this.frames;throw new Error("Expected frames")};n.prototype.write=function(){"use strict";return JSON.stringify(this)};n.read=function(a){"use strict";__p&&__p();a=JSON.parse(a);var b=a.batchId||0,c=[];for(var a=a.frames,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;f=m.readObject(f);f!=null&&c.push(f)}return new n(b,c)};function o(a){if(typeof a==="number")return a;throw new Error("Expected number")}function p(a){return a==null?null:o(a)}function q(a){if(typeof a==="string")return a;throw new Error("Expected string")}function r(a){return a==null?null:q(a)}function s(a){if(typeof a==="object"&&a!=null)return a;throw new Error("Expected object")}function t(a){if(typeof a==="object"&&a!=null){var b=a,c={};Object.keys(b).forEach(function(a){var d=b[a];typeof d==="string"&&d!=null&&(c[a]=d)});return c}throw new Error("Expected string map")}function u(a){return a==null?null:t(a)}function v(a){if(typeof a==="boolean"&&a!=null)return a;throw new Error("Expected boolean")}function w(a){return a==null?null:v(a)}e.exports={GatewayStreamBatch:n,GatewayStreamData:h,GatewayStreamDataAck:i,GatewayStreamFrame:m,GatewayStreamLog:j,GatewayStreamRequest:g,GatewayStreamRewriteRequest:l,GatewayStreamStatusUpdate:k}}),null);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerTypes","BladeRunnerTypesInternal","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g=1e3;function a(a,b,c){"use strict";this.$2=a,this.$1=b,this.$3=c}a.prototype.onProxyResponse=function(a){"use strict";__p&&__p();this.$4(a);var c=[];for(var d=a.getFrames(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;this.$2.witnessFrame(g)&&c.push(g)}c.length>0&&this.$5(new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(a.batchId,c))};a.prototype.onDisconnect=function(){"use strict";this.$2.resetErrors();var a=new(b("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();a.streamId=this.$2.getRequest().streamId;a.status=b("BladeRunnerTypes").StreamStatus.CLOSED;a.shouldRetry=!0;a.retryDelayMs=0;a=new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[b("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a)]);this.onProxyResponse(a)};a.prototype.$4=function(a){"use strict";__p&&__p();a=a.getFrames().filter(function(a){return a.type==b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.getStatusUpdate();if(e.status==b("BladeRunnerTypes").StreamStatus.CLOSED||e.status==b("BladeRunnerTypes").StreamStatus.REJECTED){this.$2.onError();var f=e.shouldRetry!=null&&e.shouldRetry,h=e.message!=null?e.message:"null";if(f&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){e.status=b("BladeRunnerTypes").StreamStatus.PAUSED;var i=g;e.retryDelayMs!=null&&(i=e.retryDelayMs);b("BladeRunnerLogger").info("Can retry: stream "+e.streamId+" closed with status "+e.status+", message "+h+". Error count: "+this.$2.getErrorCount()+", retryDelay "+i+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString());this.$2.getRetryRequestScheduled()?b("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(b("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),i>0?b("setTimeoutAcrossTransitions")(function(){return this.$6()}.bind(this),i):this.$6())}else b("BladeRunnerLogger").info("Will not retry: stream "+e.streamId+" closed with status "+e.status+", message "+h+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+f.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),f?b("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):b("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(e.streamId)}}};a.prototype.$6=function(){"use strict";this.$2.setRetryRequestScheduled(!1),this.$2.isAlive()&&this.$3.sendRetryStreamRequest(this.$2)};a.prototype.$5=function(a){"use strict";__p&&__p();b("BladeRunnerLogger").bumpCounter("send_to_handler");var c=[];this.$1.onBatch(a);for(var a=a.getFrames(),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;try{switch(f.type){case b("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(f.getData().decodeData());c.push(f.getData());break;case b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(f.getStatusUpdate().status);break;case b("BladeRunnerTypes").StreamFrameType.LOG:f=f.getLog().message;f!=null&&this.$1.onLog(f);break;default:throw new Error("Frame with unexpected type")}}catch(a){b("BladeRunnerLogger").bumpCounter("send_to_handler_error"),b("BladeRunnerLogger").exception(a,"Failed sending frame to stream handler")}}this.$7(c)};a.prototype.$7=function(a){"use strict";__p&&__p();var c=[];for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(f.shouldAck===!0&&f.dataId!=null){var g=new(b("BladeRunnerTypesInternal").GatewayStreamDataAck)();g.streamId=f.streamId;g.dataId=f.dataId;g.success=!0;c.push(g)}}this.$3.sendDataAcks(c)};e.exports=a}),null);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerTypes","BladeRunnerTypesInternal","FBMqttChannel","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="Connected",h="Disconnected",i=32*1024,j="/br_sr",k="/sr_res",l=null;function m(a){this.$1=[],this.$2=0,this.$3=null,this.$4=0,this.$5=new Map(),this.$6=a!=null?a:b("FBMqttChannel"),b("BladeRunnerLogger").setClientSessionId(b("uuid")()),this.$7()}m.get=function(){l==null&&(l=new m(b("FBMqttChannel")));return l};m.prototype.sendNewStreamRequest=function(a,c){c=new(b("BladeRunnerEventHandler"))(a,c,this);var d=a.getRequest();this.$5.set(d.streamId,c);this.getStreamCount()<=m.maxStreamCount?this.$8(d):(b("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),b("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(a.getRequest().getHeaders())),this.$9(c,d.streamId))};m.prototype.sendRetryStreamRequest=function(a){this.$8(a.getRequest())};m.prototype.sendCancel=function(a){b("BladeRunnerLogger").bumpCounter("socket_send_cancel");var c=new(b("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();c.streamId=a;c.status=b("BladeRunnerTypes").StreamStatus.CLOSED;this.$10(c);this.removeStream(a)};m.prototype.sendDataAcks=function(a){b("BladeRunnerLogger").bumpCounter("socket_send_data_ack",a.length),this.$11(a)};m.prototype.removeStream=function(a){this.$5["delete"](a)};m.prototype.getStreamCount=function(){return this.$5.size};m.prototype.getNextStreamId=function(){this.$4++;return this.$4};m.prototype.onMQTTStateChanged=function(a){this.$12();if(a!=h&&a!=g||this.$3==a)return;this.$3=a;b("BladeRunnerLogger").info("MQTTStateChanged: "+a);a==h?(b("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$13()):a==g&&b("BladeRunnerLogger").bumpCounter("mqtt_state_connected")};m.prototype.$8=function(a){b("BladeRunnerLogger").bumpCounter("socket_send_request"),this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(a)),this.$12()};m.prototype.$10=function(a){this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a)),this.$12()};m.prototype.$11=function(a){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(e))}this.$12()};m.prototype.$14=function(){this.$2++;return this.$2};m.prototype.$12=function(){if(this.$6.getConnectionState()===g&&this.$1.length>0){try{this.$15(this.$1)}finally{this.$1=[]}return!0}return!1};m.prototype.$15=function(a){__p&&__p();var c=new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(this.$14(),a);c=c.write();if(c.length>i){var d=Math.floor(a.length/2);if(d===0)throw new Error("Publish is too long: "+c.length);this.$15(a.slice(0,d));this.$15(a.slice(d,a.length))}else try{b("BladeRunnerLogger").info("send message to "+j+" "+c),this.$6.publish(j,c),b("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(a){b("BladeRunnerLogger").exception(a,"Failed publishing to MQTT");b("BladeRunnerLogger").bumpCounter("mqtt_publish_error");throw a}};m.prototype.$7=function(){b("BladeRunnerLogger").info("Starting socket with endpoint "+this.$6.getEndpoint()+" useragent "+navigator.userAgent),this.$16(),this.onMQTTStateChanged(this.$6.getConnectionState()),this.$6.subscribeChannelEvents({onMQTTStateChanged:function(a){this.onMQTTStateChanged(a)}.bind(this),onJSError:function(a){b("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof a=="object"&&a!=null?a.toString():"unknown error")+", "+JSON.stringify(a)),b("BladeRunnerLogger").bumpCounter("mqtt_channel_error")}}),this.$6.subscribe(j,function(a){throw new Error("Unexpected response: "+j+" "+a.toString())}),this.$6.subscribe(k,function(a){this.$17(a)}.bind(this))};m.prototype.$17=function(a){a=b("BladeRunnerTypesInternal").GatewayStreamBatch.read(a);this.processBatch(a)};m.prototype.processBatch=function(a){__p&&__p();try{b("BladeRunnerLogger").bumpCounter("socket_process_batch");b("BladeRunnerLogger").info("Received batch "+JSON.stringify(a));var c=null;for(var d=a.getFrames(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;g=g.getStreamId();c==null&&(c=g);if(g!=null&&c!=g)throw new Error("Received batch with frames for multiple streams")}if(c!=null){g=this.$5.get(c);g!=null?g.onProxyResponse(a):b("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+c)}else b("BladeRunnerLogger").info("Received batch with no frames")}catch(a){b("BladeRunnerLogger").exception(a,"Failed processing batch from MQTT");b("BladeRunnerLogger").bumpCounter("socket_process_batch_error");throw a}};m.prototype.$13=function(){this.$5.forEach(function(a,b,c){a.onDisconnect()})};m.prototype.$9=function(a,c){var d=new(b("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();d.streamId=c;d.status=b("BladeRunnerTypes").StreamStatus.REJECTED;d.shouldRetry=!1;d.retryDelayMs=0;c=new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[b("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(d)]);a.onProxyResponse(c)};m.prototype.$16=function(){"WebSocket"in window||(b("BladeRunnerLogger").warn("Browser does not support websocket"),b("BladeRunnerLogger").bumpCounter("websocket_not_supported"))};m.maxStreamCount=2e3;e.exports=m}),null);
__d("BladeRunnerStream",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a}a.prototype.getStreamHandler=function(){"use strict";return this.$1};a.prototype.cancel=function(){"use strict"};a.prototype.isAlive=function(){"use strict";return!1};a.prototype.getStatus=function(){"use strict";return null};a.prototype.getStreamId=function(){"use strict";return 0};e.exports=a}),null);
__d("BladeRunnerStreamState",["BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}a.prototype.getRequest=function(){"use strict";return this.$1};a.prototype.isAlive=function(){"use strict";return!(this.$2==b("BladeRunnerTypes").StreamStatus.CLOSED||this.$2==b("BladeRunnerTypes").StreamStatus.REJECTED)};a.prototype.getLastStatus=function(){"use strict";return this.$2};a.prototype.setLastStatus=function(a){"use strict";this.$2=a};a.prototype.onError=function(){"use strict";this.$3+=1};a.prototype.getErrorCount=function(){"use strict";return this.$3};a.prototype.resetErrors=function(){"use strict";this.$3=0};a.prototype.getRetryRequestScheduled=function(){"use strict";return this.$6};a.prototype.setRetryRequestScheduled=function(a){"use strict";this.$6=a};a.prototype.witnessFrame=function(a){"use strict";__p&&__p();switch(a.type){case b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var c=a.getStatusUpdate(),d=!0;switch(c.status){case b("BladeRunnerTypes").StreamStatus.ACCEPTED:d=!this.$4;this.$4||(this.$4=!0);break;case b("BladeRunnerTypes").StreamStatus.STARTED:d=this.getLastStatus()!=b("BladeRunnerTypes").StreamStatus.STARTED;break;case b("BladeRunnerTypes").StreamStatus.PAUSED:d=this.getLastStatus()==b("BladeRunnerTypes").StreamStatus.STARTED;break;case b("BladeRunnerTypes").StreamStatus.CLOSED:case b("BladeRunnerTypes").StreamStatus.REJECTED:default:d=!0}this.setLastStatus(c.status);return d;case b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:this.$7(a.getRewriteRequest());return!1;default:return!0}};a.prototype.setRetriesAllowed=function(a){"use strict";this.$5=a};a.prototype.getRetriesAllowed=function(){"use strict";return this.$5};a.prototype.$7=function(a){"use strict";if(a.patchExtraHeader!=null)return;a.temporary!=null||a.temporary==!0||(a.newBody!=null&&(this.$1.payload=a.newBody),a.newExtraHeader!=null&&(this.$1.extraHeader=a.newExtraHeader,this.$1.headers=JSON.parse(a.newExtraHeader)),a.killBody!=null&&a.killBody==!0&&(this.$1.payload=null))};e.exports=a}),null);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f){__p&&__p();var g,h=4;c=babelHelpers.inherits(a,b("BladeRunnerStream"));g=c&&c.prototype;function a(a,c,d){"use strict";g.constructor.call(this,a),this.$BladeRunnerSocketStream1=d,this.$BladeRunnerSocketStream2=new(b("BladeRunnerStreamState"))(c),this.$BladeRunnerSocketStream2.setRetriesAllowed(h)}a.prototype.send=function(){"use strict";this.$BladeRunnerSocketStream1.sendNewStreamRequest(this.$BladeRunnerSocketStream2,this.getStreamHandler())};a.prototype.cancel=function(){"use strict";this.isAlive()&&(this.$BladeRunnerSocketStream1.sendCancel(this.$BladeRunnerSocketStream2.getRequest().streamId),this.$BladeRunnerSocketStream2.setLastStatus(b("BladeRunnerTypes").StreamStatus.CLOSED))};a.prototype.isAlive=function(){"use strict";return this.$BladeRunnerSocketStream2.isAlive()};a.prototype.getStatus=function(){"use strict";return this.$BladeRunnerSocketStream2.getLastStatus()};a.prototype.getStreamId=function(){"use strict";return this.$BladeRunnerSocketStream2.getRequest().streamId};e.exports=a}),null);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a!=null?a:b("BladeRunnerSocket").get()}a.prototype.requestStream=function(a,c,d){"use strict";__p&&__p();var e=new(b("BladeRunnerTypesInternal").GatewayStreamRequest)();e.streamId=this.$1.getNextStreamId();e.requestType=b("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER;e.headers=b("BladeRunnerConfig").patchRequestHeaders(a);e.extraHeader=JSON.stringify(e.headers);e.payload=c!=null?b("Base64").encode(c):null;a=new(b("BladeRunnerSocketStream"))(d,e,this.$1);a.send();return a};a.prototype.logInfo=function(a){"use strict";b("BladeRunnerLogger").info(a)};a.prototype.bumpCounter=function(a){"use strict";b("BladeRunnerLogger").bumpCounter(a)};e.exports=a}),null);
__d("QuickLogConfigHelper",["QuickLogConfig"],(function(a,b,c,d,e,f){a.prototype.getEventDetails=function(a){"use strict";return b("QuickLogConfig").qpl_events[a]};function a(){"use strict"}e.exports=new a()}),null);
__d("QuickPerformanceLoggerBase",["Arbiter","Banzai","Bootloader","Env","PerfXSharedFields","QuickLogConfig","QuickLogConfigHelper","Random","gkx","performanceAbsoluteNow","performanceNavigationStart","requireCond","cr:682175"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("performanceAbsoluteNow")();function a(a){a===void 0&&(a={}),this.$1={},this.$2={},this.$3=100,this.loomProviderId="QPL",this.$4=a,b("cr:682175")&&b("cr:682175").addProvider(this)}a.prototype.$7=function(a,c){if(b("QuickLogConfig").killswitch)return null;a=this.$1[a];if(!a)return null;a=a[c];return!a?null:a};a.prototype.markerStart=function(a,c,d){__p&&__p();c===void 0&&(c=0);d===void 0&&(d=this.currentTimestamp());if(b("QuickLogConfig").killswitch)return;var e=b("QuickLogConfigHelper").getEventDetails(a);if(!e)return;if(b("cr:682175")&&!this.$5){var f=a+"_"+c,g=new Set(["QPL","AsyncProfiler"]);b("cr:682175").startTrace(f,"QPL",g)}this.$5&&this.$5.buffer.addEvent({type:"QPL_START",action:"START",markerId:a,instanceKey:c},d);f=this.$6===a?1:this.$2[a]||e.sampleRate||this.$3;g=b("Env").enable_qplinspector||b("Random").coinflip(f);e=this.$1[a];e||(this.$1[a]={});this.$1[a][c]={passesSampling:g,timestamp:d,sampleRate:f,points:{}};if(g){e=this.$4.onMarkerStart;e&&e(a,c,d)}};a.prototype.markerStartFromNavStart=function(a,c){c===void 0&&(c=0);var d=b("performanceNavigationStart")();this.markerStart(a,c,d);if(b("performanceNavigationStart").isPolyfilled){d=this.$7(a,c);d&&(d.timestampIsApproximate=!0)}};a.prototype.annotateMarkerString=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotations||{};f[b]=c;e.annotations=f};a.prototype.annotateMarkerStringArray=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsStringArray||{};f[b]=c;e.annotationsStringArray=f};a.prototype.annotateMarkerInt=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsInt||{};f[b]=c;e.annotationsInt=f};a.prototype.annotateMarkerIntArray=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsIntArray||{};f[b]=c;e.annotationsIntArray=f};a.prototype.annotateMarkerDouble=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsDouble||{};f[b]=c;e.annotationsDouble=f};a.prototype.annotateMarkerDoubleArray=function(a,b,c,d){d===void 0&&(d=0);var e=this.$7(a,d);if(!e)return;var f=this.$5;f&&f.buffer.addEvent({type:"QPL_ANNOTATION",markerId:a,instanceKey:d,annotationKey:b,annotationValue:c},e.timestamp);f=e.annotationsDoubleArray||{};f[b]=c;e.annotationsDoubleArray=f};a.prototype.markerPoint=function(a,b,c,d,e){d===void 0&&(d=0);e===void 0&&(e=this.currentTimestamp());var f=this.$7(a,d);if(!f)return;f.points[b]={data:c,timeSinceStart:e-f.timestamp};f=this.$5;f&&f.buffer.addEvent({type:"QPL_POINT",markerId:a,instanceKey:d,name:b,data:c},e)};a.prototype.markerEnd=function(a,c,d,e){__p&&__p();d===void 0&&(d=0);e===void 0&&(e=this.currentTimestamp());var f=Date.now(),h=b("QuickLogConfigHelper").getEventDetails(a);if(!h)return;var i=this.$5;if(i){i.buffer.addEvent({type:"QPL_END",action:c,markerId:a,instanceKey:d},e);var j=a+"_"+d;b("cr:682175")&&i.triggerId===j&&b("cr:682175").endTraceWithTimeout(j,3e4)}i=this.$7(a,d);if(!i)return;if(i.passesSampling){j=this.$4.onMarkerEnd;j&&j(a,d,e);j=e-i.timestamp;f=f-j;var k=i.points;this.$8({marker_id:a,event_is_intermediate_marker:"false",instance_id:d,quicklog_module:h.moduleName,quicklog_event:h.name,quicklog_action:c,sample_rate:i.sampleRate,method:"random_sampling",trace_tags:"",value:i.timestampIsApproximate?null:j,annotations:i.annotations,annotations_double:i.annotationsDouble,annotations_double_array:i.annotationsDoubleArray,annotations_int:i.annotationsInt,annotations_int_array:i.annotationsIntArray,annotations_string_array:i.annotationsStringArray,points:Object.keys(k).map(function(a){return{data:k[a].data,name:a,timeSinceStart:k[a].timeSinceStart}}),metadata:{application_analytics:{time_since_qpl_module_init:e-g}}},f);this.$6===a&&(console.timeStamp("QPLDebug MarkerEnd, "+this.currentTimestamp()+", "+f+", "+j),b("Arbiter").inform("qpl_debugger_finished"))}delete this.$1[a][d]};a.prototype.markerDrop=function(a,b){b===void 0&&(b=0);a=this.$1[a];a&&delete a[b]};a.prototype.dropAllMarkers=function(){this.$1={}};a.prototype.setAlwaysOnSampleRate=function(a,b){this.$2[a]=b};a.prototype.setSampleRateForInstance=function(a,b,c){c===void 0&&(c=0);a=this.$1[a][c];a&&(a.sampleRate=b)};a.prototype.currentTimestamp=function(){return b("performanceAbsoluteNow")()};a.prototype.$8=function(a,c){a=this.$9(a);var d=this.$10(a,c);b("Env").enable_qplinspector&&b("Bootloader").loadModules(["QPLInspector"],function(a){a.appendLog(d)},"QuickPerformanceLoggerBase");b("gkx")("708253")?b("Banzai").post("perf",d,b("Banzai").VITAL):b("Banzai").post("perf",d)};a.prototype.$9=function(a){var c=b("PerfXSharedFields").getCommonData();a.metadata=babelHelpers["extends"]({},a.metadata,{memory_stats:{total_mem:c.ram_gb?c.ram_gb*1073741824:null},network_stats:{downlink_megabits:c.downlink_megabits,network_subtype:c.effective_connection_type,rtt_ms:c.rtt_ms}});return a};a.prototype.$10=function(a,b){b=Math.floor(b/1e3);return{appversion:"0 (web)",clienttime:b,rawclienttime:b,deviceid:"0",extra:a}};a.prototype.loomTraceDidBegin=function(a){this.$5=a};a.prototype.loomTraceWillEnd=function(){this.$5=null};a.prototype.enableDebug=function(a){this.$6=parseInt(a,10)};a.prototype.disableDebug=function(){this.$6=null};e.exports=a}),null);
__d("QuickPerformanceLoggerImpl",["EventProfiler","QuickLogConfig","QuickPerformanceLoggerBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h={},i={onMarkerStart:function(a,c,d){var e=b("QuickLogConfig").qpl_to_interaction[a];if(e){a=a+" : "+c;h[a]=b("EventProfiler").markManualStart([e.name],e.eventType,d)}},onMarkerEnd:function(a,b,c){a=a+" : "+b;h[a]&&h[a].markManualEnd(c)}};c=babelHelpers.inherits(a,b("QuickPerformanceLoggerBase"));g=c&&c.prototype;function a(){g.constructor.call(this,i)}e.exports=new a()}),null);
__d("XRelayBootloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/relay/bootload/",{component:{type:"String",required:!0},params:{type:"String",required:!0},route:{type:"String",required:!0},uri:{type:"String",required:!0}})}),null);