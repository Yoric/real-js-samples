var VideoRichHoverHandler,VideoRichHover;(function(n){function oi(n,t,i,r){yt&&(!i||!i.bindInfos||i.bindInfos.length<1||(u[n]=i,t&&f(lt,si),pt=r,d(i)))}function si(n){var t,i;if(n)if(t=null,n.length>1&&(t=n[1]),!t||t.length<1)for(i in u)d(u[i]?u[i]:null);else d(u[t]?u[t]:null)}function d(n){var o,i,u,t,c,f,e,r;if(n!=null&&(o=n.bindInfos,i=bt(o),i!=null&&!(i.length<1))){for(u=0;u<i.length;u++)if(t=i[u],t!==null&&t.boundaryElements!==null&&t.targetInfo!==null)for(c=t.targetInfo,f=0;f<t.boundaryElements.length;f++)e=t.boundaryElements[f],r=kt(e,c),r&&!s(r,ut)&&(r.setAttribute(ut,null),h(r,"mousemove",wi,!1,!1),h(e,"mouseout",ni,!1,!1));h(_w,"focus",ci,!0);pt||h(_w,"blur",li,!0);n.enAutoPlayOnLoad&&sj_evt.bind("onP1",ir,!0)}}function hi(n){var t=Array(),l,i,e,r,c,f,s,h;for(l in u)i=u[l],i&&(n&&i.enAutoPlayOnLoad||i.enAutoPlayNext)&&(e=bt(i.bindInfos),e!=null&&e.length>0&&(t=t.concat(e)));if(t.length<1)return null;for(r=0;r<t.length;r++)if(c=t[r].targetInfo,f=t[r].boundaryElements,c!==null&&f!==null&&!(f.length<1))for(s=0;s<f.length;s++)if((h=kt(f[s],c,!0),h!==null)&&!o(h,ft))return h;return null}function bt(n){var r,i,f,t,e,u;if(!n||n.length<1)return null;for(r=[],i=0;i<n.length;i++)f=n[i].id,t=n[i].target,f&&t&&t.bcn&&t.tcn&&(e=_ge(f),e&&(u=b(t.bcn,e),u&&u.length>0&&r.push({targetInfo:t,boundaryElements:u})));return r.length>0?r:null}function kt(n,t,i){var u,f,r;return(i===void 0&&(i=!1),n&&t&&(u=tt(n,l),u))?(f=t.tcn===t.bcn?n:vt(t.tcn,n),i)?(r=rt(u),!r||!r.cid)?null:r.smturl&&r.smturl!=null&&r.smturl.length>0?f:null:f:null}function g(n){sj_evt.fire(n,VRHEnums.HoveredElementType.Adult);sj_evt.fire(n,VRHEnums.HoveredElementType.Algo)}function ci(){g(t.HoverEnableEvt)}function li(){_d.activeElement!=null&&(_d.activeElement!=sj_b?(y(),g(t.HoverDisableEvt)):g(t.HoverEnableEvt))}function nt(n){for(var t=n,i;t!=null;){if(i=tt(t,l),i)return i;if(a(t,et))return nt(r);t=t.parentNode&&t.parentNode!=t?t.parentNode:null}return null}function tt(n,t){var i,r;if(n){if(o(n,t)===!0)return n;if(n.children&&n.children.length>0)for(i=0;i<n.children.length;i++)if(r=tt(n.children[i],t),r)return r}return null}function ai(n,t,i){for(var r=n;r;){if(r.id==i)return null;if(a(r,t))return r;r=r.parentElement}return null}function vi(n,t){return it(n,t,VRHEnums.HoverTargetType.Boundary)}function yi(n,t){return it(n,t,VRHEnums.HoverTargetType.Target)}function it(n,t,i){var r,e,o,f,s;if(n&&t&&(r=u[t]?u[t].bindInfos:null,r&&r.length>0))for(e=0;e<r.length;e++){o=r[e];f=null;switch(i){case VRHEnums.HoverTargetType.Boundary:f=o.target.bcn;break;case VRHEnums.HoverTargetType.Target:f=o.target.tcn}if(f&&(s=ai(n,f,o.id),s))return s}return null}function pi(n){for(var t=n;t;){if(a(t,et))return!0;t=t.parentElement}return!1}function rt(n){var t=null,r=null,i=null,f=null,u=null;if(o(n,l)===!0&&(u=s(n,l)),u==null)return null;try{t=JSON.parse(u);i=t.capt;i&&(f={de:i.de,filterUrlFormat:null,pu:i.pu,puid:i.puid,pud:i.pud,r:i.r,s:i.s,sk:i.sk,t:t.vt,vc:i.vc,actkeylst:i.actkeylst,actpayload:i.actpayload,saved:i.saved});r={ma:!!(t.bv&2),at:!!(t.bv&4),capt:f,cc:t.cc,cid:t.cid,ct:t.ct,du:t.du,md5:t.md5,mid:t.mid,mmsturl:t.mmsturl,paid:!!(t.bv&1),purl:t.purl,smturl:t.smturl,thid:t.thid,vt:t.vt,bci:t.bci,murl:t.murl}}catch(e){r=null}return r}function wi(n){var t=sj_et(n);dt(t,VRHEnums.TriggerType.MouseTrigger);wt=!0}function dt(n,t){var h=nt(n),i,c,u,f,o,l;if(!h){r&&y();return}if((i=rt(h),i&&i.cid)&&(c=yi(n,i.cid),c!==r)&&(r=c,u=parseInt(s(h,"ht")),u||(u=0),!(u>=0)||!(u<e.length)||e[u]!==!1)&&(f=vi(n,i.cid),f)&&(o=f.getElementsByTagName("img"),o&&o.length>0)){var p=o[0].clientHeight,b=o[0].clientWidth,a=f.clientWidth,v=f.clientHeight;i.capt&&i.capt.sk&&(i.capt.sk=ki(f));l={containerId:i.cid,containerHeight:v,containerWidth:a,hoverType:u,thumbnailHeight:Math.min(v,p),thumbnailWidth:Math.min(a,b),videoRichHoverMetaData:i,instMetaData:null,hoveredElement:f,triggerType:t};k&&(w=k(h,u,i.cid),l.instMetaData=w);ei(ct,l,f,bi(i))}}function bi(n){if(!n)return null;var t=VRHEnums.ThumbnailType.ST;return n.mmsturl&&n.smturl&&n.cc>0?t=VRHEnums.ThumbnailType.MMMT:n.smturl&&(t=VRHEnums.ThumbnailType.MT),t}function ki(n){var t,u,f,e,i,r;if(!n)return null;if(t=b("rms_img",n),u=[],t&&t.length>0){for(f=0;f<t.length;f++)if(e=at(t[f]),i=e.split(" "),i)for(r=0;r<i.length;r++)i[r].match("rms_rmsanswers")&&u.push(i[r]);if(u.length>0)return u.join(" ")}return null}function gt(){r!==null&&(r=null,w=null)}function ni(n){if(r){var t=ti(sj_mo(n));t!==ti(r)&&r&&y()}}function ti(n){var i,f,t;return pi(n)&&(n=r),i=nt(n),f=null,i&&(t=rt(i),t&&(f=it(n,t.cid,u[t.cid].hmot))),f}function y(){v&&rr();sj_evt.fire(t.HoverCancelEvt);gt()}function di(n){n&&n.length>1&&ni(n[1])}function gi(n,t,i){for(var e="h",h="data-h",r,u,f,c;n!=null;){if((o(n,e)||o(n,h))&&(r=s(n,e)||s(n,h),r&&(u=r.match(/ID=[\w]+(\.[\d]+_[\d]+)*,[\d]+\.[\d]+/),u)))return f=u[0].substr(3).split(","),c={AppNS:f[0],K:f[1],HoverType:t,HoverContainerId:i},c;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return null}function nr(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<e.length&&t>=0&&(e[t]=!0)}}function tr(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<e.length&&t>=0&&(e[t]=!1)}}function ir(){ri(!0)}function ii(){ri(!1)}function ri(n){if(!wt&&!v){v=!0;sj_evt.unbind(t.AutoPlayNext,ii);var i=hi(n);dt(i,VRHEnums.TriggerType.AutoplayTrigger);f(t.AutoPlayNext,ii)}}function rr(){r!==null&&r.setAttribute(ft,null);v=!1}function ur(){i&&i.gebc&&i.ha&&i.ga&&i.hc&&i.guw&&ui&&t&&p&&p.bind&&(o=i.ha,b=i.gebc,s=i.ga,fi=i.guw,a=i.hc,at=i.gcn,vt=i.gfbc,h=p.bind,st=t.HoverDisableEvt,ot=t.HoverEnableEvt,ct=t.HoverMouseInEvt,ht=t.HoverStopEvt,k=gi,lt=t.HoverAsyncBindEvt,r=null,f(t.PlayerEndEvt,y),f(t.HoverCleanupEvt,gt),f(ht,di),f(ot,nr),f(st,tr),yt=!0)}var c="undefined",i=typeof pMMUtils!=c?pMMUtils:null,ui=typeof VideoRichHoverUtils!=c?VideoRichHoverUtils:null,p=typeof SmartEvent!=c?SmartEvent:null,t=typeof VRHConsts!=c?VRHConsts:null,ut="vrhatt",ft="apEnd",l="vrhm",et="vrhc",r=null,w=null,ot=null,st=null,ht=null,ct=null,lt=null,e=[!0,!0],o=null,s=null,b=null,a=null,at=null,fi=null,h=null,f=sj_evt.bind,ei=sj_evt.fire,vt=null,k,yt=!1,u={},pt=!1,wt=!1,v=!1;n.init=oi;ur()})(VideoRichHoverHandler||(VideoRichHoverHandler={})),function(n){function dt(){u&&i&&rt&&it&&!ut&&(k=it.bind,h=u.ga,et=u.gcn,y=u.sa,ft=u.sc,o=u.hc,ot=u.sp,g=u.goh,d=u.gow,st=u.go,kt=u.sh,ct=u.sw,ht=rt.showElement,ni(),ut=!0,sj_evt.fire(i.HoverReadyEvt))}function gt(n,t){!n||!t||t.length<1||!n.bindInfos||n.bindInfos.length<1||(a[t]||(a[t]=n),(n.enhoverhb||n.enmmstinst||n.enperfinst)&&typeof VideoRichHoverInst!="undefined"&&VideoRichHoverInst&&VideoRichHoverInst.init&&VideoRichHoverInst.init(t,n),typeof VideoRichHoverHandler!=r&&VideoRichHoverHandler.init&&VideoRichHoverHandler.init(t,n.isAsyncBind,n,n.bh))}function ni(){sj_evt.bind(i.HoverMouseInEvt,ci);sj_evt.bind(i.PlayerLoadEvt,ti);sj_evt.bind(i.PlayerStartEvt,ii);sj_evt.bind(i.PlayerEndEvt,at);sj_evt.bind(i.PlayerErrEvt,at);sj_evt.bind(i.HoverCancelEvt,oi)}function lt(n){return n&&n.length>2&&n[2]===tt}function ti(){}function ii(n){lt(n)&&sj_evt.fire(i.CaptionHideEvt,n[1])}function at(n){lt(n)&&(v(),b&&(b=null,yt()))}function ri(n,t){for(var i=n;i;){if(i.offsetParent===t)return t;i=i.offsetParent}return t?t.offsetParent:null}function vt(n){var t,i;if(n)for(t=0;t<n.length;t++)if(n[t]&&n[t].id&&(i=_ge(n[t].id),i))return i;return null}function ui(n){var v=n.containerId,s=a[v],u,g,st,lt,p,at,nt,b;if(s&&(s.chflturl&&n&&n.videoRichHoverMetaData&&n.videoRichHoverMetaData.capt&&(n.videoRichHoverMetaData.capt.filterUrlFormat=s.chflturl),s.tw&&(n.containerWidth=n.thumbnailWidth=s.tw),s.th&&(n.thumbnailHeight=s.th),e=_ge(v),e)){var d=s.isInline,w=d?n.containerWidth:n.thumbnailWidth,yt=d?n.containerHeight:n.thumbnailHeight,rt="data-tag",pt=h(e,rt),ut=et(e),ot=ut.replace(" hide",""),it=ei(fi(n.hoveredElement,s));if(t=sj_ce("div",null,ot),ft(t,ut),y(t,rt,pt),it?(t.appendChild(it),it.innerHTML=e.innerHTML):t.innerHTML=e.innerHTML,l=n.instMetaData,u=n.videoRichHoverMetaData,g=0,typeof CaptionContainer!=r&&CaptionContainer.init&&CaptionContainer.init(v,t,w,!0,u.capt,n.instMetaData,n.hoveredElement),st={containerWidth:w,thumbCnt:u.cc,mmstUrl:u.mmsturl,isAdultThumb:u.at},typeof MultiMotionStaticThumbnail!=r&&MultiMotionStaticThumbnail.init&&(MultiMotionStaticThumbnail.init(v,t,st,s,n.instMetaData),g=MultiMotionStaticThumbnail.clientHeight(v)),lt={videoUrl:u.purl,mediaUrl:u.murl,thid:u.thid,smtThumbUrl:u.smturl,videoHash:u.md5,thumbnailHeight:n.thumbnailHeight,thumbnailWidth:w,isMediaAdult:u.ma,isAdultThumb:u.at,isDebug:!0,isPaidContent:u.paid,expandable:!0,playClipsCount:a[v].mmstcnt,clipsCount:u.cc,clipsTimeline:hi(u.ct,u.cc),updatePlayProgress:!0,imageThumbUrl:null,videoTitle:u.vt,cookiePre:s.cookiePre,beginClipIndex:u.bci>0?u.bci:0,endClipIndex:s.pcc>0&&u.bci>0?u.bci+s.pcc-1:0},typeof ThumbnailPlayer!=r&&ThumbnailPlayer.init&&(ThumbnailPlayer.init(v,w,n.hoverType,s,t,tt,lt,n.instMetaData),g+=ThumbnailPlayer.clientHeight(v)),p=null,d?(p=f,at=Math.max(0,yt-g),sj_evt.fire(i.HoverCaptionHUpdateEvt,at)):(nt=vt(c.boundaryElIds),nt||(nt=_d.body),p=nt),p){if(b=p.firstChild,o(b,ot)&&(p.removeChild(b),b=p.firstElementChild),p.insertBefore(t,b),ct(t,w),ht(t,!0),!d&&!pi(f,t,s)){sj_evt.fire(i.HoverCancelEvt);return}sj_evt.fire("focusChange",t);k(t,"mouseout",li);s.ic&&k(t,"click",ai)}}}function fi(n,t){var u,f,e,i,r;if(!t||!n||!t.bindInfos||t.bindInfos.length<1)return null;for(u=0;u<t.bindInfos.length;u++)if(f=t.bindInfos[u],o(n,f.target.bcn)&&(e=f.target.tacn,i=pt(n),i&&i.length>0))for(r=0;r<i.length;r++)if(o(i[r],e))return i[r];return null}function ei(n){var t,i,r;return n&&n.href?(t=sj_ce("a",null,"hover-anchor"),t.href=n.href,n.target&&(t.target=n.target),i=h(n,"h"),i&&y(t,"h",i),r=h(n,"aria-label"),r&&y(t,"aria-label",r),t):null}function oi(){p===!0?s||(s=function(){sj_evt.fire(VRHConsts.StopPlayEvt,l);v();sj_evt.fire(VRHConsts.HoverCleanupEvt)}):(sj_evt.fire(VRHConsts.StopPlayEvt,l),v());sj_evt.fire(VRHConsts.HoverCleanupEvt)}function si(n){while(n){if(n.tagName=="a"||n.tagName=="A")return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function hi(n,t){if(typeof n!=r&&typeof t!=r&&typeof enableMockImages!==r&&enableMockImages()){var u=n.split(","),i=bt.split(",");return i.length=Math.min(u.length,t),i.join(",")}return n}function ci(n){var u,t,r;if(n&&n.length>2){if(u=n[2],t=n[1],!t||!t.containerHeight||!t.containerWidth||!t.videoRichHoverMetaData)return;if(p===!0)return;if(u&&u!==f)f!=null&&v(),f=u,w=t;else return;if(r=a[t.containerId],!r)return;c=r;p=!0;s=null;b=null;sb_st(function(){sj_evt.fire(i.HoverStartEvt,t.instMetaData);ui(t);s&&(s(),s=null);p=!1;t.triggerType==VRHEnums.TriggerType.AutoplayTrigger&&r.enAutoPlayNext&&(b=yt)},r.hoverdelayms)}}function yt(){sj_evt.fire(i.AutoPlayNext)}function li(n){nt(sj_mo(n))||sj_evt.fire(i.HoverStopEvt,n)}function ai(n){var s=sj_et(n),l,e,u,o;if(nt(s)&&!si(s)&&f&&t&&w&&((new Image).src=_G.gpUrl+"IG="+_G.IG+"&"+h(f,"h"),l=w.hoverType,e=!1,l===VRHEnums.HoveredElementType.Adult?(typeof AnsSSDlg!=r&&typeof AnsSSDlg.sw=="function"&&AnsSSDlg.sw(n,"vdo_ans_ss_dlg"),e=!0):n.ctrlKey||n.button==1||(u=yi(vi(f,c?c.bindInfos:null)),u&&(o=document.createEvent("MouseEvents"),o.initMouseEvent("click",!0,!0,_w,0,0,0,0,0,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,u),u.dispatchEvent(o),typeof si_ct=="function"&&si_ct(u)),e=!0),sj_evt.fire(i.HoverDisableEvt,VRHEnums.HoveredElementType.Algo),v(),e)){sj_pd(n);sj_sp(n);return}}function vi(n,t){var r;if(n&&t)for(r=0;r<t.length;r++){for(var u=t[r],f=u.target,i=n;i&&!o(i,f.bcn);)i=i.parentElement;if(i)return i}return null}function pt(n){return n?n.getElementsByTagName("a"):null}function yi(n){var i=pt(n),t;if(i)for(t=0;t<i.length;t++)if(!nt(i[t]))return i[t];return n}function nt(n){while(n!=null){if(o(n,wt))return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function v(){if(t!=null){var n=t.parentElement;n&&n.removeChild(t);t.innerHTML=null;t=null;sj_evt.fire(VRHConsts.HoverMouseOutEvt,l)}l=null;f=null;w=null}function pi(n,t,i){var r=wi(t,n,i);return r?(ot(t,r.l,r.t),!0):!1}function wi(n,t,i){var e,h,l;if(!i||!n||!t||(e=ri(t,vt(c.boundaryElIds)),!e))return null;var f=bi(e,i),a=st(t,!0,!1,e),r=a[0],u=a[1],o=d(t),s=g(t);if(f.l>r+o/2||f.t>u+s/2||f.r<r+o/2||f.b<u+s/2)return null;h=d(n);l=g(n);r-=(h-o)/2;r=Math.ceil(r);r=Math.min(r,f.r-h-2);r=Math.max(r,f.l);switch(i.va){case VRHEnums.HoverVerticalAlignType.Top:break;case VRHEnums.HoverVerticalAlignType.Middle:default:u-=(l-s)/2}return u=Math.floor(u),u=Math.min(u,f.b-l-2),u=Math.max(u,f.t),{l:r,t:u}}function bi(n){var t=n?0:sb_de.scrollLeft,i=n?0:sb_de.scrollTop,r=n.clientWidth,u=n.clientHeight;return{l:t,t:i,r:r,b:u}}var tt="VRTP",wt="vrhc",r="undefined",bt="0.000,60.000,120.000,180.000",u=typeof pMMUtils!=r?pMMUtils:null,it=typeof SmartEvent!=r?SmartEvent:null,rt=typeof VideoRichHoverUtils!=r?VideoRichHoverUtils:null,i=typeof VRHConsts!=r?VRHConsts:null,e=null,t=null,f=null,ut=!1,k=null,ft=null,h=null,y=null,et=null,ot=null,kt=null,d=null,g=null,st=null,o=null,ht=null,ct=null,p=!1,c=null,w,l=null,a={},s,b=null;n.init=gt;dt()}(VideoRichHover||(VideoRichHover={}))