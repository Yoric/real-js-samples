var MySaves;(function(n){function st(){sj_evt.bind("ClientLinkAction_Loaded",yt,!0);t&&(e.bind(t,y,function(){return h(f.Long)}),e.bind(t,ut,function(){return h(f.Short)}),e.bind(_d.body,y,ct),e.bind(_d.body,ft,lt));nt()&&ht()}function ht(){var n=i.gfbc("infact",_ge("vmc")),t,r;n&&n.firstChild&&(t=n.firstChild,r=t.getAttribute("data-tooltip"),r==rt&&t.setAttribute(a,"1"))}function ct(t){var r=sj_et(t),i=g(r);i&&(n.selectedElement=i,o==null&&s(i))}function lt(t){var f=t.keyCode,r,i,u;f===ot&&(r=sj_et(t),i=g(r),i?(n.selectedElement=i,s(i),vt(),d(t)):r==k&&(u=at(n.selectedElement),u&&(u.focus(),d(t))))}function at(n){var r,t,i;if(n&&(r=u(n,"infsec"),r&&(t=r.getElementsByTagName("A"),t&&t.length>1)))for(i=0;i<t.length;i++)if(t[i]==n.parentElement&&i<t.length-1)return t[i+1];return null}function d(n){sj_pd(n);sj_sp(n)}function vt(){var n,i;t&&(n=t.getElementsByTagName("A"),n&&n.length>1&&(i=n[0],i.focus(),k=n[1]))}function g(n){var r,i;if(n){if(r=u(n,"ms_ba_op"),r&&r.parentElement==t)return null;if(i=n.parentNode,i&&i.hash&&i.hash.indexOf(w)===0)return i;if(n.hash&&n.hash.indexOf(w)===0)return n}return null}function yt(n){if(n&&n[1]){var t=n[1];t.bind("Save",pt,!0);t.bind("Unsave",dt,!0);t.bind("OnMoveTo",wt,!0)}}function pt(t){var i=l(t);i&&(n.saveFunction(i,function(n){n&&n.IsSuccess||c(!1,t)}),n.selectedElement=t,(!_w.MySavesEdu||MySavesEdu.doneFiring)&&s(t),clearTimeout(o),o=setTimeout(function(){o=null},1500),c(!0,t));FavLog.l(FavLog.Type.Click,FavLog.Meta.Save,n.componentType)}function wt(t){n.abstractOnMoveTo(t)}function bt(){var n=parseQueryParams().q;return{title:n?decodeURI(n):null}}function s(n,u){var p,a,w;if(u===void 0&&(u="down"),t&&n&&!(it()&&n.id==="mb_fav")){r&&clearTimeout(r);var s=n.getBoundingClientRect(),v="Top",y=sj_go(n,v),c=sj_go(_ge("vm_c"),v),k=_w.innerHeight;(tt()||it()&&b)&&(c+=sj_go(b,"Top"));switch(u){case"up":i.sb(t,k-y+c);break;case"down":default:i.st(t,y+s.height-c)}var o="",e="",l=_d.body.offsetWidth;l-s.right>200?(p=5,e=Math.max(s.right-100+_w.pageXOffset,p-s.left),tt()&&(e-=et.getBoundingClientRect().left,e<0&&(e=0))):(o=l-s.right-60+_w.pageXOffset,e="",o<0&&(o=0),a=t.getBoundingClientRect(),w=a.width<250?250:a.width,w+o>l&&(o="",e=10));i.sr(t,o);i.sl(t,e);i.sdt(t,DisplayType.InlineBlock);r=setTimeout(function(){h(f.Short)},1)}}function nt(){var n=_w.location.href.toLowerCase();return n.indexOf("&testhooks=~1")>0&&n.indexOf("&vpt=1")>0}function kt(){var n=i.gebc("mystuff",_d)[0];n&&i.ac(n,a)}function h(u){r?clearTimeout(r):FavLog.l(FavLog.Type.Show,FavLog.Meta.ShowBalloon,n.componentType);i.ac(t,p);sj_evt.fire("MySavesBalloon.show");var f=function(){i.rc(t,p);sj_evt.fire("MySavesBalloon.hide");r=setTimeout(function(){t&&i.sdt(t,DisplayType.Default);n.selectedElement=null;r=null},500)};nt()||(kt(),r=setTimeout(f,u))}function dt(u){var f=l(u);f||(f=l(n.selectedElement),u=n.selectedElement);f&&(n.unsaveFunction(f,function(n){n&&n.IsSuccess||c(!0,u)}),c(!1,u),t&&(r&&clearTimeout(r),i.sdt(t,DisplayType.Default)));FavLog.l(FavLog.Type.Click,FavLog.Meta.Unsave,n.componentType)}function c(n,t){if(t){var r=u(t,"iuscp")||u(t,"iuscwrapper");r&&(n?i.ac(r,v):i.rc(r,v))}}function l(t){if(t){if(typeof MySavesMetadataProvider!="undefined")return MySavesMetadataProvider.getMetadata(t);if(t=u(t,"iuscp"),t)return JSON.parse(i.ga(t.querySelector(".iusc"),"m"))}else if(typeof n.contextMetadata!="undefined")return n.contextMetadata;return null}function u(n,t){while(n){if(i.hc(n,t))return n;n=n.parentElement}return null}function tt(){return typeof ImageDetailV2!="undefined"&&ImageDetailV2.isRightRailShown()}function it(){return typeof MobileImageDetail!="undefined"}var f;(function(n){n[n.Short=3e3]="Short";n[n.Long=99999]="Long"})(f=n.AnimationTimeout||(n.AnimationTimeout={}));var a="vptest",rt="Save this",v="saved",y="mouseover",ut="mouseout",ft="keydown",e=SmartEvent,i=pMMUtils,r,p="show",w="#CA!Unsave",b=_ge("insights"),et=_ge("insights_wrap"),o=null,t=_ge("ms_ba"),ot=9,k=null;n.init=st;n.abstractOnMoveTo=function(){return null};n.getSpecifier=bt;n.showBalloon=s;n.setBalloonVisible=h;n.getMetadata=l})(MySaves||(MySaves={}));MySaves.init()