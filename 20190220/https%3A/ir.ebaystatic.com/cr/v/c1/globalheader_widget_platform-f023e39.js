/* Global Widget Delivery Platform - GlobalHeaderFrontEnd$9.0.0 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("HttpClient",t()):e.HttpClient=t()}(this,function(){"use strict";function e(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),o=1;o<arguments.length;o++){var r=arguments[o];if(null!=r)for(var i=Object.keys(Object(r)),a=0,u=i.length;a<u;a++){var s=i[a],c=Object.getOwnPropertyDescriptor(r,s);void 0!==c&&c.enumerable&&(n[s]=r[s])}}return n}({assign:e,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:e})}}).polyfill();var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),l=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},r=function(){function r(e){c(this,r),this.win=e||window,this.initialize()}return t(r,[{key:"initialize",value:function(){var e,t=this;this.HOST_NAME=this.win.location.hostname,this.IS_LATEST=-1!==this.HOST_NAME.indexOf("latest"),this.IS_PARADISE=-1!==this.HOST_NAME.indexOf("paradise"),this.IS_DEV_MACHINE_HOST=5<this.win.location.origin.lastIndexOf(":")&&-1===t.HOST_NAME.indexOf("lvs")&&-1===t.HOST_NAME.indexOf("slc")&&-1===t.HOST_NAME.indexOf("phx"),this.ENV=(e=i(t.win.GH)!==r.TYPE_UNDEFINED&&i(t.win.GH.C)!==r.TYPE_UNDEFINED&&t.win.GH.C.env||r.ENV_ENUM.PRODUCTION,t.IS_DEV_MACHINE_HOST&&(e=r.ENV_ENUM.DEV),e),this.URL_QUERY_MAP=function(e){var n={},t=e.split("?");2===t.length&&t[1].split("&").forEach(function(e){var t=e.split("=");t&&2===t.length&&t[0]&&t[1]&&(n[t[0]]=t[1])});return n}(this.win.location.search)}},{key:"sanitizeRequestUrlByEnv",value:function(e){if(e){var t=this.win.location.origin;return this.ENV!==r.ENV_ENUM.STAGING&&this.ENV!==r.ENV_ENUM.FEATURE&&this.ENV!==r.ENV_ENUM.SANDBOX&&this.ENV!==r.ENV_ENUM.DEV||this.IS_PARADISE?this.ENV!==r.ENV_ENUM.PREPROD||this.IS_LATEST||(t=r.LATEST):t=r.QA,this.URL_QUERY_MAP._ghpool&&this.ENV!==r.ENV_ENUM.PRODUCTION&&(t=decodeURIComponent(this.URL_QUERY_MAP._ghpool)),this.ENV===r.ENV_ENUM.PRODUCTION&&r.DOMAIN_REGEX_CHECK.test(this.HOST_NAME)&&(t=this.getProductionEnvUrl()),t+=e}}},{key:"getProductionEnvUrl",value:function(){var e="",t="",n=this.HOST_NAME;n.match(r.DUAL_TLD_REGEX_CHECK)&&(n=n.replace(r.DUAL_TLD_REGEX_CHECK,function(e){return t=e,""}));var o=n.split(".");return(o=this.buildProductionUrl(o)).length?(0===o.indexOf("ebay")&&-1===o.indexOf("www")&&o.unshift("www"),o=o.join("."),""!==t.trim()&&(o+=t),e="https://"+o):(console.debug("Not a valid TLD"),e=""),console.debug("Updated xhrRequestURL = "+e),e}},{key:"buildProductionUrl",value:function(e){for(var t=[];e.length;){var n=e[0];-1===r.WHITELISTED_DOMAIN_PREFIXES.indexOf(n)&&-1===r.WHITELISTED_TLDS.indexOf(n)?e.shift():-1!==r.WHITELISTED_TLDS.indexOf(n)&&-1===t.indexOf("ebay")?e.shift():t.push(e.shift())}return t}},{key:"addQueryParam",value:function(e){var i=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=Object.assign({},this.URL_QUERY_MAP);return(a=Object.assign(a,t))._showdiag=a._showdiag&&"1"===a._showdiag?a._showdiag:void 0,(e=r.ALLOWED_QUERY_PARAMS.reduce(function(e,t){var n=t.name,o=a[n];if(o&&t.denied!==i.ENV){var r=-1<e.indexOf("?")?"&":"?";e=""+e+r+n+"="+encodeURIComponent(o)}return e},e)).replace(/[^=&]+=(&|$)/g,"").replace(/&$/,"").replace(/\?$/,"")}}],[{key:"TYPE_UNDEFINED",get:function(){return"undefined"}},{key:"ENV_ENUM",get:function(){return{PRODUCTION:"production",DEV:"dev",PREPROD:"preprod",STAGING:"staging",FEATURE:"feature",SANDBOX:"sandbox"}}},{key:"QA",get:function(){return"https://www.qa.ebay.com"}},{key:"LATEST",get:function(){return"https://www.latest.ebay.com"}},{key:"ROUTE_REGEX_CHECK",get:function(){return/(www\.)?(.*)\.ebay\.(com|com.au|at|be|ca|cn|fr|de|com.hk|in|ie|it|co.jp|com.my|nl|ph|pl|com.sg|es|se|ch|com.tw|co.th|co.uk|vn)/i}},{key:"DOMAIN_REGEX_CHECK",get:function(){return/(www\.)?(.*)\.ebay\.(com|com.au|at|be|ca|cn|fr|de|com.hk|in|ie|it|co.jp|com.my|nl|ph|pl|com.sg|es|se|ch|com.tw|co.th|co.uk|vn)$/i}},{key:"DUAL_TLD_REGEX_CHECK",get:function(){return/[\.]{1}(com.au|com.hk|co.jp|com.my|com.sg|com.tw|co.th|co.uk)$/i}},{key:"ALLOWED_QUERY_PARAMS",get:function(){return[{name:"_showdiag",denied:""},{name:"correlation",denied:""},{name:"mock",denied:r.ENV_ENUM.PRODUCTION},{name:"scenario",denied:r.ENV_ENUM.PRODUCTION},{name:"show_optin_banner",denied:""},{name:"behavior",denied:""},{name:"moduleType",denied:""},{name:"phone_number",denied:""},{name:"authentication_code",denied:""},{name:"country_code",denied:""},{name:"supportedUxComponentNames",denied:""},{name:"resend",denied:""}]}},{key:"WHITELISTED_DOMAIN_PREFIXES",get:function(){return["www","m","ebay","benl","befr","cafr"]}},{key:"WHITELISTED_TLDS",get:function(){return["com","com.au","at","be","ca","cn","fr","de","com.hk","in","ie","it","co.jp","com.my","nl","ph","pl","com.sg","es","se","ch","com.tw","co.th","co.uk","vn"]}}]),r}(),n=function(e){function s(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},i=arguments[5];c(this,s);var a=i||("undefined"!=typeof window?window:{});t=t.toUpperCase();var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,a));return u.ctx=a,u.shouldRetry=r.shouldRetry||!1,u.timeout=r.timeout||s.MAX_TIMEOUT,u.hasFullXhrUrl=r.hasFullXhrUrl||!1,u.queryParamObj=n,u.method=-1!==s.ALLOWED_METHODS.indexOf(t)?t:"GET",u.route=e,u.async=!0,"boolean"==typeof r.async&&!1===r.async&&(u.async=!1),u.hasFullXhrUrl?(u.baseUrl="",u.requestUrl=l(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"addQueryParam",u).call(u,u.route,u.queryParamObj)):(u.baseUrl=l(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"sanitizeRequestUrlByEnv",u).call(u,u.route),u.requestUrl=l(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"addQueryParam",u).call(u,u.baseUrl,u.queryParamObj)),u.payload=o,u.retries=0,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,r),t(s,[{key:"handlers",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.handlers=e,this}},{key:"delay",value:function(e,t){setTimeout(e.bind(this),t)}},{key:"maybeRetry",value:function(){var e=this;if(this.shouldRetry){if(this.retries>=s.MAX_RETRIES)return;this.retries++,this.delay(function(){e.initializeAndTrigger()},this.retryTimeout)}}},{key:"initializeAndTrigger",value:function(){var t,n=this;try{this.xhr=new XMLHttpRequest;var e=this.ctx.location&&this.ctx.location.hostname;(this.hasFullXhrUrl&&r.ROUTE_REGEX_CHECK.test(this.route)||!this.hasFullXhrUrl&&r.DOMAIN_REGEX_CHECK.test(e))&&(this.xhr.withCredentials=!0),this.xhr.open(this.method,this.requestUrl,this.async),this.async&&(this.xhr.timeout=this.timeout),this.xhr.setRequestHeader("Content-Type","text/plain");var o=this.shouldRetry?(t=this,function(e){e instanceof ProgressEvent&&t.maybeRetry(t)}):s.NOOP;s.DEFAULT_XHR_EVENTS.forEach(function(e){var t=-1!==s.DEFAULT_RETRY_EVENTS.indexOf(e);n.xhr[e]=n.handlers[e]||(t?o:s.NOOP)}),this.xhr.send(this.payload)}catch(e){console.debug("Global HTTPClient requests failing",e)}}},{key:"retryTimeout",get:function(){return Math.min(s.MAX_TIMEOUT,100*(2^this.retries))}}],[{key:"ALLOWED_METHODS",get:function(){return["GET","POST","HEAD"]}},{key:"NOOP",get:function(){return function(){}}},{key:"MAX_TIMEOUT",get:function(){return 5e3}},{key:"MAX_RETRIES",get:function(){return 1}},{key:"DEFAULT_XHR_EVENTS",get:function(){return["onload","onloadstart","onloadend","onprogress","onreadystatechange","onerror","onabort","ontimeout"]}},{key:"DEFAULT_RETRY_EVENTS",get:function(){return["onerror","onabort","ontimeout"]}}]),s}(),o=function(){var e=!1;return"serviceWorker"in navigator&&"Notification"in window&&(e="default"===Notification.permission),e},h={DATA_MISSING:"dataMissing",TYPE_MISMATCH:"typeMismatch"},E=void 0;function p(e){return Array.isArray(e)?"array":null===e?"null":void 0===e?"undefined":i(e)}function y(e){return"string"==typeof e&&(e=e.split(".").join(",").replace(/\[\d\]/g,function(e){return e=","+(e=e.replace(/[\[\]']+/g,""))}).split(",")),e}function _(e,t){return t.reduce(function(e,t){return e&&void 0!==e[t]?e[t]:void 0},e)}function a(e,t,n){var o,r,i,a,u,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"warn",c=void 0,l=_(e,t=y(t)),d=p(l),f=p(n);return"undefined"===f?(n="",f="string"):"object"===f&&(o=n,0===Object.entries(o).length)&&(n={__isEmpty:!0}),"undefined"!==d?d!==f&&(c=h.TYPE_MISMATCH,l=n):(c=h.DATA_MISSING,l=n),E&&s&&c&&(r=c,i=t,a=n,E[u=s]&&E[u]("event: %s, path: %s, default: %s",r,i,a)),l}var u={has:function(e,t){var n=_(e,t=y(t)),o=p(n);return n=!("undefined"===o||"null"===o)},get:function(e,t,n){return a(e,t,n)},need:function(e,t,n,o){return a(e,t,n,o)},setLogger:function(e){E=e}},s={EVENT_TYPES:h};u.privates=s;var d=u.has,f=u.get,m="X_EBAY_C_CORRELATION_SESSION",g="raptor.require",v="trkCorrelationSessionInfo.getTrackingCorrelationSessionInfo",w=function(){var e=function(){if(d(window,v))return f(window,v,function(){})()}(),t={},n=null;if(e)return e;try{n=function(){if(d(window,g))return f(window,g,function(){})("ebay.context.Context")}()}catch(e){n=null}var o,r=n&&n.pid;return r?(t[m]="operationId="+r,o=t,window.trkCorrelationSessionInfo={},window.trkCorrelationSessionInfo.getTrackingInfo=function(){return JSON.parse(JSON.stringify(o))},window.trkCorrelationSessionInfo.getTrackingCorrelationSessionInfo=function(){return o[m]},t[m]):null};!function(){var o=document.fonts,e="font-marketsans",r="https://ir.ebaystatic.com/cr/v/c1/vendor/fontfaceobserver.js";function i(){try{localStorage.setItem("ebay-font",e)}catch(e){}}function t(){var e,t,n;!function(){var e=o&&o.load;if(e&&/Apple/.test(window.navigator.vendor)){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);e=!(t&&parseInt(t[1],10)<603)}return e}()?(e=r,t=function(){var e=new FontFaceObserver("Market Sans"),t=new FontFaceObserver("Market Sans",{weight:"bold"});Promise.all([e.load(),t.load()]).then(i)},(n=document.createElement("script")).type="application/javascript",n.async=!0,n.onload=t,n.src=e,document.documentElement.firstChild.appendChild(n)):(o.load("1em Market Sans"),o.load("bold 1em Market Sans"),o.ready.then(i))}"fontDisplay"in document.documentElement.style||localStorage&&localStorage.getItem("ebay-font")===e||window.addEventListener("load",function(){requestAnimationFrame?requestAnimationFrame(t):t()})}();var T="gh_user",O="script",b=o,N=w,S=function(e){var t="",n="";window.widget_platform_renderedComponents=e.renderedComponents;var o=function(e){var t=document.getElementById(T),n=!1;t||((t=document.createElement("div")).id=T,n=!0),t.style.display="none",t.innerHTML=e.html||e.content,n&&document.body.appendChild(t);var o=document.querySelector("#widgets-placeholder");return o&&(o.style.display="block"),t}(e).querySelectorAll(O);if(o&&0<o.length){for(var r=o.length,i=0;i<r;i++){var a=o[i];"nb_script"===a.id?t+=" ; "+a.innerHTML:n+=" ; "+a.innerHTML}t+=n;var u=document.createTextNode(t),s=document.createElement(O);s.type="text/javascript",s.appendChild(u),document.body.appendChild(s)}};return new n(function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,n="undefined"!==i((e=t).GH)&&e.GH&&"function"==typeof e.GH.getWidgetDeliveryPlatform&&e.GH.getWidgetDeliveryPlatform(),o=n&&n.base_path,r=n&&n.new_buyer_acquistion;return o&&r?o+r:"/gh/useracquisition"}(),"GET",{correlation:N(),show_optin_banner:b()},{},{shouldRetry:!1,timeout:1e4},window).handlers({onload:function(e){if(e instanceof ProgressEvent){var t=e.target||e.currentTarget;if(t instanceof XMLHttpRequest){var n=t.responseText;if(n)try{var o=n&&JSON.parse(n);S(o)}catch(e){console.debug("Unable to parse Response")}}}},onerror:function(e){console.debug("useracquisition request has failed!",e)}}).initializeAndTrigger(),function(){if("undefined"!=typeof window&&"function"==typeof window.define&&window.define.amd)window.HttpClient=n}(),n});
/* Delivered by Global Header, ISPROD=true */
