/*! passport2- 2018-12-28 16:34:01 */
!function(){var a="",b=window.dispatchEvent,c={preventDefaultEvent:function(a){a=window.event||a,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},setCookie:function(a,b,c,d){var e=a+"="+escape(b);if(c){var f=new Date;f.setTime(f.getTime()+c),e+="; expires="+f.toGMTString()}d&&(e+="; domain="+d),document.cookie=e},getCookie:function(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return b=document.cookie.match(c),b?unescape(b[2]):""},deleteCookie:function(a){c.setCookie(a,1,-1e3)},getStringLen:function(a){var b=a.match(/[^\x00-\xff]/gi);return a.length+(null==b?0:b.length)},extend:function(){for(var a=arguments[0],b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d in c)a[d]=c[d]}return a},bind:function(a,b){return function(){return a.apply(b,arguments)}},objToQueryStr:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")},jsonpGet:function(a,b,d){if(d){var e="pprtjsonp"+c.guid();window[e]=d,b.callback=e}a=a+"?"+this.objToQueryStr(b);var f=document.createElement("script");f.src=a,c.getRcycleEl().appendChild(f)},trim:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},setData:function(a,b,c){var d,e=b.split(".");return b?(d=e.shift(),e.length>0?(a[d]=a[d]||{},this.setData(a[d],e.join("."),c)):(a[b]=c,a[b])):null},getData:function(a,b){var c,d=b.split(".");return b?(c=d.shift(),a[c]?d.length>0?this.getData(a[c],d.join(".")):a[b]:null):null},guid:function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},on:b?function(a,b,c,d){return a?(a.addEventListener(b,c,!!d),c):null}:function(a,b,c){function d(b){return c.call(a,b||window.event)}return a?(a.attachEvent&&a.attachEvent("on"+b,d),d):null},hasClass:function(a,b){return 1===a.nodeType?!!a.className&&(" "+a.className+" ").indexOf(" "+b+" ")>-1:void 0},addClass:function(a,b){return c.hasClass(a,b)===!1&&(a.className=c.trim(a.className+" "+b)),a},removeClass:function(a,b){if(c.hasClass(a,b)===!0){var d=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(d," ")}return a},getCss:function(a,b){if(a.style[b])return a.style[b];if(a.currentStyle)return a.currentStyle[b];if(document.defaultView&&document.defaultView.getComputedStyle){b=b.replace(/([A-Z])/g,"-$1"),b=b.toLowerCase();var c=document.defaultView.getComputedStyle(a,"");return c&&c.getPropertyValue(b)}},loadCss:function(a){var b=document.createElement("link"),c=document.getElementsByTagName("head")[0];b.rel="stylesheet",b.type="text/css",b.href=a,c.appendChild(b)},setAttr:function(a,b,c){a[b]=c},getAttr:function(a,b){return a[b]},getBodyHeight:function(){var a;return a="BackCompat"==document.compatMode?document.body.clientHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight?document.body.clientHeight:window.height},getBodyWidth:function(){var a;return a=document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth?document.body.clientWidth:window.width},getOffset:function(a){var b=0,c=0;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}else b=a.offsetLeft,c=a.offsetTop;return{left:b,top:c}},ArrDel:function(a,b){return 0>b?a:a.slice(0,b).concat(a.slice(b+1,a.length))},waitForBody:function(a){document.body?a():setTimeout(function(){c.waitForBody(a)},50)}},d=c.$=function(){function a(a){this.element=a}function b(a,c){for(var d=a.childNodes,e=0;e<d.length;e++){var f=d.item(e);if(1===f.nodeType){if(c.test(f.className))return f;var g=b(f,c);if(g)return g}}return!1}a.prototype.show=function(){if(this.element){var a=c.getAttr(this.element,"pprtDisplay");(void 0===a||null===a)&&(a=c.getCss(this.element,"display"),"none"===a&&(a="block"),c.setAttr(this.element,"pprtDisplay",a)),this.element.style.display=a}return this},a.prototype.hide=function(){if(this.element){var a=c.getCss(this.element,"display");"none"===a&&(a="block"),c.setAttr(this.element,"pprtDisplay",a),this.element.style.display="none"}return this},a.prototype.html=function(){var a=this.element;return arguments.length>0?(a&&(a.innerHTML=arguments[0]),this):a?a.innerHTML:null},a.prototype.attr=function(){var a=this.element;return arguments.length>1?(a&&a.setAttribute(arguments[0],arguments[1]),this):1===arguments.length?a?a.getAttribute(arguments[0]):null:void 0},a.prototype.on=function(a,b,d){function e(a){d=d?d:null;var e=b.apply(d,arguments);return e===!1&&c.preventDefaultEvent(a),e}var f=this.element;f&&(f.attachEvent?f.attachEvent("on"+a,e):f.addEventListener(a,e,!0))};var d=/^<(\w+)[\s>](.*)<\/\1>$/i,e=document.createElement("div");return function(c,f){var g;if(f&&!f.tagName&&(f=f.element),"object"==typeof c)g=c;else if("#"===c.charAt(0))g=document.getElementById(c.substr(1));else if("."===c.charAt(0))g=b(f?f:document,new RegExp("(^\\s*|\\s+)"+c.substr(1)+"(\\s+|\\s*$)"));else if(d.test(c)){if(e.innerHTML=c,1!==e.childNodes.length)throw"only 1 element is allowed: "+c;for(g=e.firstChild;e.firstChild;)e.removeChild(e.firstChild)}return new a(g)}}();c.getRcycleEl=function(){if(!c.rcycleEl){var a=d('<div style="display:none;"  id="ue-component-rcycle"></div>');document.body.appendChild(a.element),c.rcycleEl=a.element}return c.rcycleEl},c.hexMd5=function(){function a(a){return c(b(d(a)))}function b(a){return f(g(e(a),8*a.length))}function c(a){try{}catch(b){o=0}for(var c,d=o?"0123456789ABCDEF":"0123456789abcdef",e="",f=0;f<a.length;f++)c=a.charCodeAt(f),e+=d.charAt(c>>>4&15)+d.charAt(15&c);return e}function d(a){for(var b,c,d="",e=-1;++e<a.length;)b=a.charCodeAt(e),c=e+1<a.length?a.charCodeAt(e+1):0,b>=55296&&56319>=b&&c>=56320&&57343>=c&&(b=65536+((1023&b)<<10)+(1023&c),e++),127>=b?d+=String.fromCharCode(b):2047>=b?d+=String.fromCharCode(192|b>>>6&31,128|63&b):65535>=b?d+=String.fromCharCode(224|b>>>12&15,128|b>>>6&63,128|63&b):2097151>=b&&(d+=String.fromCharCode(240|b>>>18&7,128|b>>>12&63,128|b>>>6&63,128|63&b));return d}function e(a){for(var b=Array(a.length>>2),c=0;c<b.length;c++)b[c]=0;for(var c=0;c<8*a.length;c+=8)b[c>>5]|=(255&a.charCodeAt(c/8))<<c%32;return b}function f(a){for(var b="",c=0;c<32*a.length;c+=8)b+=String.fromCharCode(a[c>>5]>>>c%32&255);return b}function g(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,f=271733878,g=0;g<a.length;g+=16){var h=c,n=d,o=e,p=f;c=i(c,d,e,f,a[g+0],7,-680876936),f=i(f,c,d,e,a[g+1],12,-389564586),e=i(e,f,c,d,a[g+2],17,606105819),d=i(d,e,f,c,a[g+3],22,-1044525330),c=i(c,d,e,f,a[g+4],7,-176418897),f=i(f,c,d,e,a[g+5],12,1200080426),e=i(e,f,c,d,a[g+6],17,-1473231341),d=i(d,e,f,c,a[g+7],22,-45705983),c=i(c,d,e,f,a[g+8],7,1770035416),f=i(f,c,d,e,a[g+9],12,-1958414417),e=i(e,f,c,d,a[g+10],17,-42063),d=i(d,e,f,c,a[g+11],22,-1990404162),c=i(c,d,e,f,a[g+12],7,1804603682),f=i(f,c,d,e,a[g+13],12,-40341101),e=i(e,f,c,d,a[g+14],17,-1502002290),d=i(d,e,f,c,a[g+15],22,1236535329),c=j(c,d,e,f,a[g+1],5,-165796510),f=j(f,c,d,e,a[g+6],9,-1069501632),e=j(e,f,c,d,a[g+11],14,643717713),d=j(d,e,f,c,a[g+0],20,-373897302),c=j(c,d,e,f,a[g+5],5,-701558691),f=j(f,c,d,e,a[g+10],9,38016083),e=j(e,f,c,d,a[g+15],14,-660478335),d=j(d,e,f,c,a[g+4],20,-405537848),c=j(c,d,e,f,a[g+9],5,568446438),f=j(f,c,d,e,a[g+14],9,-1019803690),e=j(e,f,c,d,a[g+3],14,-187363961),d=j(d,e,f,c,a[g+8],20,1163531501),c=j(c,d,e,f,a[g+13],5,-1444681467),f=j(f,c,d,e,a[g+2],9,-51403784),e=j(e,f,c,d,a[g+7],14,1735328473),d=j(d,e,f,c,a[g+12],20,-1926607734),c=k(c,d,e,f,a[g+5],4,-378558),f=k(f,c,d,e,a[g+8],11,-2022574463),e=k(e,f,c,d,a[g+11],16,1839030562),d=k(d,e,f,c,a[g+14],23,-35309556),c=k(c,d,e,f,a[g+1],4,-1530992060),f=k(f,c,d,e,a[g+4],11,1272893353),e=k(e,f,c,d,a[g+7],16,-155497632),d=k(d,e,f,c,a[g+10],23,-1094730640),c=k(c,d,e,f,a[g+13],4,681279174),f=k(f,c,d,e,a[g+0],11,-358537222),e=k(e,f,c,d,a[g+3],16,-722521979),d=k(d,e,f,c,a[g+6],23,76029189),c=k(c,d,e,f,a[g+9],4,-640364487),f=k(f,c,d,e,a[g+12],11,-421815835),e=k(e,f,c,d,a[g+15],16,530742520),d=k(d,e,f,c,a[g+2],23,-995338651),c=l(c,d,e,f,a[g+0],6,-198630844),f=l(f,c,d,e,a[g+7],10,1126891415),e=l(e,f,c,d,a[g+14],15,-1416354905),d=l(d,e,f,c,a[g+5],21,-57434055),c=l(c,d,e,f,a[g+12],6,1700485571),f=l(f,c,d,e,a[g+3],10,-1894986606),e=l(e,f,c,d,a[g+10],15,-1051523),d=l(d,e,f,c,a[g+1],21,-2054922799),c=l(c,d,e,f,a[g+8],6,1873313359),f=l(f,c,d,e,a[g+15],10,-30611744),e=l(e,f,c,d,a[g+6],15,-1560198380),d=l(d,e,f,c,a[g+13],21,1309151649),c=l(c,d,e,f,a[g+4],6,-145523070),f=l(f,c,d,e,a[g+11],10,-1120210379),e=l(e,f,c,d,a[g+2],15,718787259),d=l(d,e,f,c,a[g+9],21,-343485551),c=m(c,h),d=m(d,n),e=m(e,o),f=m(f,p)}return Array(c,d,e,f)}function h(a,b,c,d,e,f){return m(n(m(m(b,a),m(d,f)),e),c)}function i(a,b,c,d,e,f,g){return h(b&c|~b&d,a,b,e,f,g)}function j(a,b,c,d,e,f,g){return h(b&d|c&~d,a,b,e,f,g)}function k(a,b,c,d,e,f,g){return h(b^c^d,a,b,e,f,g)}function l(a,b,c,d,e,f,g){return h(c^(b|~d),a,b,e,f,g)}function m(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function n(a,b){return a<<b|a>>>32-b}var o=0;return a}(),c.base64Decode=function(){function a(a){var b,d,e,f,g,h,i;for(h=a.length,g=0,i="";h>g;){do b=c[255&a.charCodeAt(g++)];while(h>g&&-1==b);if(-1==b)break;do d=c[255&a.charCodeAt(g++)];while(h>g&&-1==d);if(-1==d)break;i+=String.fromCharCode(b<<2|(48&d)>>4);do{if(e=255&a.charCodeAt(g++),61==e)return i;e=c[e]}while(h>g&&-1==e);if(-1==e)break;i+=String.fromCharCode((15&d)<<4|(60&e)>>2);do{if(f=255&a.charCodeAt(g++),61==f)return i;f=c[f]}while(h>g&&-1==f);if(-1==f)break;i+=String.fromCharCode((3&e)<<6|f)}return i}function b(a){var b,c,d,e,f,g;for(b="",d=a.length,c=0;d>c;)switch(e=a.charCodeAt(c++),e>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b+=a.charAt(c-1);break;case 12:case 13:f=a.charCodeAt(c++),b+=String.fromCharCode((31&e)<<6|63&f);break;case 14:f=a.charCodeAt(c++),g=a.charCodeAt(c++),b+=String.fromCharCode((15&e)<<12|(63&f)<<6|(63&g)<<0)}return b}var c=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);return function(c){return b(a(c))}}(),c.Class=function(){function a(){}var b=!1,c=/xyz/.test(function(){xyz})?/\bbase\b/:/.*/;return a.extend=function(a,d){var e=this.prototype;b=!0;var f=new this;b=!1;for(var g in a)f[g]="function"==typeof a[g]&&"function"==typeof e[g]&&c.test(a[g])?function(a,b){return function(){var c=this.base;this.base=e[a];var d=b.apply(this,arguments);return this.base=c,d}}(g,a[g]):a[g];var h=d||function(){!b&&this.init&&this.init.apply(this,arguments)};return h.prototype=f,h.prototype.constructor=h,h.extend=arguments.callee,h},a}();var e=!0,f="_17173ppinfocrosscookie",g=c.Class.extend({init:function(a){if(!e)throw new Error("core\u53ea\u5141\u8bb8\u5b9e\u4f8b\u5316\u4e00\u6b21");e=!1,this.events={ready:[],loginSuccess:[],logoutSuccess:[]},this._initing(a),this._inited()},_initing:function(a){var b=Passport.ENUM.CROSSDOMAINACTION,d=this;this.setData("status",Passport.ENUM.STATUS.initing),this.option=c.extend({},Passport.Core.defaultOption,a),this.option.domain=this.option.domain?this.option.domain:this.getDomain(),this.option.appid=this.option.appid?this.option.appid:this.getAppid(),this.option.currentUrl=this.option.currentUrl?encodeURIComponent(this.option.currentUrl):encodeURIComponent(location.href),this.setData("id",c.guid()),this.username="",this.password="",this.cookie=0,this.parseCookie(),this.isLogined&&2==c.getCookie(b.login+f)?c.waitForBody(function(){d.allCrossDomain(Passport.ENUM.CROSSDOMAINACTION.login)}):2==c.getCookie(b.logout+f)&&c.waitForBody(function(){d.allCrossDomain(Passport.ENUM.CROSSDOMAINACTION.logout)})},fireEvent:function(a,b,c){for(var d=this.events[a]||[],e=d.length,f=0;e>f;f++)(!c||c&&!d[f].beenFired)&&(d[f].call(this,b),d[f].beenFired=!0)},on:function(a,b,c){this.events[a]=this.events[a]||[],!!c&&(b._cantOff=!0),this.events[a].push(b)},off:function(a,b){var d,e=this.events[a];if(e)if(b){for(var f=0,g=e.length;g>f;f++)if(!b._cantOff&&e[f]===b){d=f;break}this.events[a]=c.ArrDel(this.events[a],d)}else for(var f=0,g=e.length;g>f;f++)e[f]._cantOff||(this.events[a]=c.ArrDel(this.events[a],f))},_inited:function(){this.setData("status",Passport.ENUM.STATUS.inited)},setData:function(a,b){c.setData(this,a,b),this._onSetData(a,b)},_onSetData:function(){},getData:function(a){return c.getData(this,a)},gotoHref:function(a){window.location=a},getAppid:function(){return"10086"},getDomain:function(){var a;a=document.domain.split(".");var b=a.length;return 2>=b?document.domain:a[b-2]+"."+a[b-1]},allCrossDomain:function(a){var b=this.loginMsg=this.option.protocol+"//"+this.option.crossDomainUrl+"?do="+a+"&domain="+this.option.domain,e=d('<iframe src="'+b+'" width="0" height="0" style="width:0;height:0;"></iframe>'),g=this;e.element.attachEvent?e.element.attachEvent("onload",function(){g._onCrossDomained.call(g,a)}):e.element.onload=function(){g._onCrossDomained.call(g,a)},c.setCookie(a+f,2,432e5,this.option.domain),c.getRcycleEl().appendChild(e.element)},_onCrossDomained:function(a){c.setCookie(a+f,1,432e5,this.option.domain),this.option.onCrossDomained&&this.option.onCrossDomained.call(this)},login:function(a){var b=this,d=Passport.ENUM.LOGINACTIONRESULT;a=c.extend({},{domain:b.option.domain,appid:b.option.appid,currentUrl:encodeURIComponent(decodeURIComponent(b.option.currentUrl))},a),this.username=c.trim(a.username),this.password=c.trim(a.password),this.saftPassword=c.trim(a.saftPassword),this.validcode=a.validcode,this.randStr=a.randStr,this.txAppId=a.txAppId,this._loginStart.call(this,a,function(e){if(e.status){this.setData("status",Passport.ENUM.STATUS.logining),this.fireEvent("loginStart");var f=Passport.Core.SERVERVERSION;if(this.option.client&&"web"!=this.option.client){var g={v:f,username:encodeURIComponent(a.username),password:c.hexMd5(a.password),validcode:a.validcode,randStr:a.randStr,txAppId:a.txAppId,rememberme:void 0===a.cookie?b.option.cookie:a.cookie};this.saftPassword&&(g.password="",g.mobile_verify_code=this.saftPassword,g.dynamic=1),c.jsonpGet(b.option.protocol+"//"+b.option.tokenUrl,g,function(a){if(b._logined.call(b,a),a.status==d.success){var c=a.data,e="";for(var f in c)e+=f+"="+c[f]+"&";b.setData("token",e),b._loginSuccess.call(b,a)}else b._loginFailure.call(b,a)})}else{var g={v:f,username:encodeURIComponent(a.username),password:c.hexMd5(a.password),validcode:a.validcode,randStr:a.randStr,domain:a.domain,txAppId:a.txAppId,currentUrl:a.currentUrl,isbase64:-1,autoreg:1,persistentcookie:void 0===a.cookie?b.option.cookie:a.cookie};this.saftPassword&&(g.password="",g.mobile_verify_code=this.saftPassword,g.dynamic=1),c.jsonpGet(b.option.protocol+"//"+b.option.loginUrl,g,function(a){b._logined.call(b,a),a.status==d.success?(b.parseCookie(),b.allCrossDomain(Passport.ENUM.CROSSDOMAINACTION.login),b._loginSuccess.call(b,a)):b._loginFailure.call(b,a)})}b._checkLoginTimeout()}})},clearTimeout:function(){clearTimeout(this.loginTimer),clearTimeout(this.logoutTimer)},loginTimer:null,validateLoginInfo:function(){var a;for(var b in Passport.VALIDATES)if(a=Passport.VALIDATES[b].call(this),!a.status)return this._loginFailure(a),a;return{status:!0,msg:"\u6210\u529f"}},_checkLoginTimeout:function(){var a=this,b=Passport.ENUM.LOGINACTIONRESULT;a.clearTimeout(),a.loginTimer=setTimeout(function(){a.status!==Passport.ENUM.STATUS.logined&&(a.status=Passport.ENUM.STATUS.logined,a._loginFailure.call(a,{status:b.timeout,msg:"\u767b\u5f55\u8d85\u65f6"}))},a.option.timeout)},_loginStart:function(a,b){var c=this.validateLoginInfo(),d=this;c.status?i.call(this,function(a){a.status||d._loginFailure(a),b&&b.call(d,a)}):b&&b.call(this,c)},_logined:function(){this.clearTimeout(),this.setData("status",Passport.ENUM.STATUS.logined)},getLastUid:function(){var a=c.getCookie("lastuser17173"),b="",d=a.split("|")[1];return d&&(b=c.base64Decode(decodeURIComponent(d)).split("|")[0]),b},getLastAccount:function(){var a=c.getCookie("lastdomain17173"),b="",d=a.split("|")[1];return d&&(b=c.base64Decode(decodeURIComponent(d)).split("|")[0]),b},parseCookie:function(){var a,b,d,e,f,g,h,i=c.getCookie("ppinf17173");if(this.setData("cookieUserInfo",{}),i&&~i.indexOf("|")){for(a=unescape(i).split("|"),g=a[3].replace(/-/g,"+"),g=g.replace(/_/g,"/"),h=g.length,g+="====".substr(h%4),b=c.base64Decode(g),d=b.split("|");d.length;)e=d.shift(),f=e.split(":"),2===f.length&&this.setData("cookieUserInfo."+decodeURIComponent(f[0]),decodeURIComponent(f[1]));this.setData("isLogined",!0)}else this.setData("isLogined",!1)},_loginSuccess:function(a){this.setData("username",""),this.setData("password",""),c.deleteCookie("lastnickname"),this.option.showwarn&&c.setCookie("pprt_showloginwarning",1),this.fireEvent("loginSuccess",a),this.option.loginRedirectUrl&&this.gotoHref(this.option.loginRedirectUrl)},_loginFailure:function(a){this.fireEvent("loginFailure",a)},logout:function(a,b){a&&c.preventDefaultEvent(a);var d=this,e=Passport.ENUM.LOGOUTACTIONRESULT;b=b||{},this._logoutStart()&&(this.setData("status",Passport.ENUM.STATUS.logouting),this.fireEvent("logoutStart"),c.jsonpGet(d.option.protocol+"//"+d.option.logoutUrl,{appid:b.appid||d.option.appid,domain:b.domain||d.option.domain},function(a){d._logouted.call(d,a),a.status==e.success?(d.allCrossDomain(Passport.ENUM.CROSSDOMAINACTION.logout),d._logoutSuccess.call(d,a)):d._logoutFailure.call(d,a)}),d._checkLogoutTimeout())},logoutTimer:null,_checkLogoutTimeout:function(){var a=this,b=Passport.ENUM.LOGOUTACTIONRESULT;a.clearTimeout(),a.logoutTimer=setTimeout(function(){a.status!==Passport.ENUM.STATUS.logouted&&(a.status=Passport.ENUM.STATUS.logouted,a._logoutFailure.call(a,{status:b.timeout,msg:""}))},a.option.timeout)},_logoutStart:function(){return!0},_logouted:function(){this.clearTimeout(),this.setData("status",Passport.ENUM.STATUS.logouted)},_logoutSuccess:function(a){this.cookieUserInfo={},this.setData("isLogined",!1),this.fireEvent("logoutSuccess",a),this.option.logoutRedirectUrl&&this.gotoHref(this.option.logoutRedirectUrl)},_logoutFailure:function(a){this.fireEvent("logoutFailure",a)},receiveMsg:function(a){var b=this;if(Passport.test)return null;if("openPlatformBind"==a){var c;b._logined.call(b),b.parseCookie(),b.isLogined?(c={status:!0,msg:"\u767b\u9646\u6210\u529f"},b.allCrossDomain(Passport.ENUM.CROSSDOMAINACTION.login),b._loginSuccess.call(b,c),Passport._openPlatformCrossDomain=!0):(c={status:!1,msg:"\u767b\u5f55\u5931\u8d25"},b._loginFailure.call(b,c))}else if("webClientLogin"==a){var c;b._logined.call(b);var d=function(){Passport.data("username")?(c={status:!0,msg:"\u767b\u9646\u6210\u529f"},b._loginSuccess.call(b,c)):setTimeout(d,600)};d()}else if("webClientLogout"==a)window.location.reload();else{var c=JSON.parse(a);b.fireEvent(c.ev,c)}return!1},data:function(a){return this.cookieUserInfo&&this.cookieUserInfo[a]?this.cookieUserInfo[a]:""},bindOpenPlatform:function(a,b){a==Passport.OPEN_PLATFORMS.weixin&&/MicroMessenger/i.test(navigator.userAgent)&&(a="mpweixin"),document.domain=this.option.domain,b=b||"\u5f00\u653e\u5e73\u53f0";var c=window.parentHref||encodeURIComponent(window.location),d=this.option.protocol+"//"+this.option.passportdomain+"/partner/authorize/name/"+a+"/domain/"+this.option.domain+"?referrer="+c+"&client="+this.option.client+"&callback="+encodeURIComponent(this.option.callback);this.option.client&&"web"!=this.option.client?window.location.href=d:window.open(d,b,"location=yes,left=200,top=100,width=750,height=500,resizable=yes,scrollbars=yes,scrollbars=1")},destory:function(){}});window.Passport=c.Class.extend({init:function(){}}),Passport.util=c,Passport.Core=g,Passport.getUserFace=function(b,d){d=d||0;for(var e,f=a+"//i.17173cdn.com",g="/avatar/YWxqaGBf",h="",i=c.hexMd5(b),j=0;3>j;j++)h+="/"+i.substr(2*j,2);return h+="/"+b,e="/"+(0===d?"small.jpg":1===d?"normal.jpg":"hd.jpg"),f+g+h+e},Passport.getUserPortrait=function(a,b){return a=a||Passport.data("uid"),Passport.getUserFace(a,b)};var h=null;Passport.getDomainList=function(b){h?b(h):c.jsonpGet(a+"//"+Passport.Core.defaultOption.passportdomain+"/site/getMailDomain",{},function(a){a&&1==a.status&&a.data?(h=a.data.slice(0,6),b(h)):b()})},Passport.VALIDATES={passworLength:function(){return this.password.length>20?{status:!1,msg:"\u5bc6\u7801\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e20\u4f4d"}:{status:!0,msg:""}},fieldEmpty:function(){return(c.trim(this.password)||c.trim(this.saftPassword))&&c.trim(this.username)?{status:!0,msg:""}:{status:!1,msg:"\u901a\u884c\u8bc1\u548c\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"}},usernameFormat:function(){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(this.username)||/^1\d{10}$/.test(this.username)?{status:!0,msg:""}:{status:!1,msg:"\u901a\u884c\u8bc1\u5fc5\u987b\u4e3a\u624b\u673a\u53f7/ \u90ae\u7bb1\u683c\u5f0f"}}};var i=function(a){var b,c=this;Passport.getDomainList(function(d){for(b=0;b<d.length;b++){var e=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;if(/^1\d{10}$/.test(c.username)||c.username&&e.test(c.username))return a({status:!0,msg:""})}return a({status:!1,msg:"\u6682\u4e0d\u652f\u6301\u6b64\u57df\uff0c\u8bf7\u5c1d\u8bd5\u4e00\u952e\u767b\u5f55"})})};Passport.Core.VERSION="6.6.0",Passport.Core.SERVERVERSION=2,Passport.Core.defaultOption={cookie:0,protocol:a,passportdomain:"passport.17173.com",loginUrl:"passport.17173.com/sso/login",tokenUrl:"passport.17173.com/sso/gettoken",logoutUrl:"passport.17173.com/sso/logout",crossDomainUrl:"passport.17173.com/sso/allcrossdomain",domain:null,appid:null,timeout:15e3,loginRedirectUrl:"",logoutRedirectUrl:"",client:"",callback:"",css:a+"//s.ue.17173cdn.com/a/lib/passport/v2/css/gb-passport-pop.css",showwarn:!0,domainList:["qq.com","sina.com","163.com","sohu.com","126.com","sina.cn","gmail.com","hotmail.com","vip.sina.com","139.com","17173.com"]},Passport.instances=[],Passport.ENUM={STATUS:{initing:1,inited:2,logining:3,logined:4,logouting:5,logouted:6},CROSSDOMAINACTION:{login:"login",logout:"logout"},LOGINACTIONRESULT:{success:1,paramError:2,userNameFormatError:3,serverError:4,passwordErrorTimes:5,userNameUnfind:6,userNameOrPassowrdWrong:7,AccountUnActivation:8,userNameEmpty:9,passwordEmpty:10,timeout:11},LOGOUTACTIONRESULT:{success:1,paramError:2,failure:3,timeout:4}}}(),function(){var isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),protocol="",EMPTY_FN=function(){},util=Passport.util,elements,$E=util.$;Passport.defaultOption={mobileBindOn:!0,registerParam:"",loginType:"pc"};var core=new Passport.Core(Passport.defaultOption);Passport.core=core;var appendTXCaptcha=function(a){if(window.TencentCaptcha)a();else{var b=document.createElement("script");b.type="text/javascript",b.async=!1,b.src="https://ssl.captcha.qq.com/TCaptcha.js",b.onload=b.onreadystatechange=function(){return b.ready?!1:void(b.readyState&&"loaded"!=b.readyState&&"complete"!=b.readyState||(b.onreadystatechange=null,b.ready=!0,a()))},document.getElementsByTagName("head")[0].appendChild(b)}};!function(){var a,b,c=$E('<div style="display:none"></div>').element,d=isMobile?"2080629978":"2070173641";globalFn=function(){};var e={},f=function(b){e.end=1*new Date,b.ticket&&b.randstr?(e.success=!0,a.validcode=b.ticket,a.randStr=b.randstr,a.txAppId=b.appid,globalFn(a.validcode,a.randStr,a.txAppId)):e.success=!1,Passport.log(e)};a=Passport.txValidater={validate:function(g){e={begin:null,end:null,type:"TXCaptcha",id:util.guid()},this.isValidated()?g(a.validcode,a.randStr,a.txAppId):(e.begin=1*new Date,Passport.log(e),globalFn=g,b?b.show():appendTXCaptcha(function(){b=new TencentCaptcha(c,d,f),b.show()}))},clear:function(){a.validcode=null,a.randStr=null,a.txAppId=null},isValidated:function(){return a.validcode&&a.randStr&&a.txAppId}}}(),Passport.UIBase=util.Class.extend({init:function(a){a=this.option=util.extend({},a),this._initing(a),this._inited()},_initing:function(a){if(a.element&&(this.element=$E(a.element).element),this.ui4={_css:EMPTY_FN,_html:EMPTY_FN,_initing:EMPTY_FN,_inited:EMPTY_FN,_show:EMPTY_FN,_hide:EMPTY_FN,_loginStart:EMPTY_FN,_loginSuccess:EMPTY_FN,_loginFailure:EMPTY_FN,_logoutStart:EMPTY_FN,_logoutSuccess:EMPTY_FN,_logoutFailure:EMPTY_FN},this.ui4._css=Passport.initCss,a.ui){var b=Passport.UI[a.ui];if(!b)throw'Passport UI "'+a.ui+'" not installed';window._hasUI=!0,util.extend(this.ui4,b)}for(this.ui4._initing.call(this),this.element.id="com-pprt",a.theme&&util.addClass(this.element,a.theme),elements=[];this.element.firstChild;){var c=this.element.firstChild;elements.push(c),this.element.removeChild(c)}this.initContainer()},initContainer:function(){this.element.innerHTML='<div style="display: none;"></div><div style="width: 100%;" ></div>',this.cElement=this.element.childNodes[1],this.ui4._css.call(this,elements),this.ui4._html.call(this,elements);for(var a;a=elements.shift();)this.cElement.appendChild(a);var b='<div class="gpp-drop-in ue-passport-select-wrap-in"><ul class="domain-list gpp-drop-list"></ul></div>';if(this.ppSelectWrapElement=$E(".ue-passport-select-wrap",this.element),!this.ppSelectWrapElement.element){var c=document.createElement("div");c.className="ue-passport-select-wrap",this.cElement.appendChild(c),this.ppSelectWrapElement=util.$(c)}this.ppSelectWrapElement.element.innerHTML=b},_inited:function(){var a=this.element,b=this;this.formElement=$E(".pprt-form-box",a),this.form=$E(".pprt-form",a),this.formElement.element||(this.formElement=this.form),this.waitElement=$E(".wait-box",a).hide(),this.infoElement=$E(".info-box",a).hide(),this.loginElement=$E(".login-btn",a),this.logoutElement=$E(".logout-btn",a),this.initValidcode(),$E(".register-url",this.element).attr("href",Passport.URL_REGISTER),$E(".recover-url",this.element).attr("href",Passport.URL_RECOVER),$E(".help-url",this.element).attr("href",Passport.URL_HELP),this.formElements={loginErr:$E(".login-err",this.element)},this.waitElements={loggingIn:$E(".logging-in",this.element),loggingOut:$E(".logging-out",this.element)},this.infoElements={logoutErr:$E(".logout-err",this.element),username:$E(".username",this.element),nickname:$E(".nickname",this.element),portrait:$E(".portrait",this.element),userlevel:$E(".userlevel",this.element)},this.form.attr("autocomplete","off"),this.form.on("submit",this.login,this),this.loginElement.on("click",this.login,this),this.logoutElement.on("click",this.logout,this),this.initOpenPlatformTool(),this.currentElement=this.formElement,this.currentElement.show();var c=this.cElement.getElementsByTagName("input");this.saftPaswordInput=$E(".mobile_verify_code",this.element).element;for(var d=0;d<c.length;d++)"email"==c[d].name&&(this.emailInput=c[d]),"password"==c[d].name&&(this.passwdInput=c[d]),"persistentcookie"==c[d].name&&(this.pcInput=c[d]);var e=function(){b.ppSelectWrapElement.element.style.width=b.emailInput.offsetWidth+"px"};e(),b.initSelector(),b.initSelector=function(){},this.loginMsg=this.$getElementByClassName("error"),this.ui4._inited.call(this),this.bindCoreEvents(),Passport.isLoggedIn()?b._loginSuccess():(b._logoutSuccess(),this.emailInput&&(this.emailInput.value=core.getLastAccount()))},initValidcode:function(){var a=this;this.tcValidater={validate:function(b){Passport.txValidater.validate(function(c,d,e){a.validcode=c,a.randStr=d,a.txAppId=e,b(a.validcode,a.randStr,a.txAppId)})},clear:function(){Passport.txValidater.clear(),a.validcode=null,a.randStr=null,a.txAppId=null},isValidated:function(){return a.validcode&&a.randStr&&a.txAppId}}},initOpenPlatformTool:function(){var a=this,b=a.element;this.openPlatformWeixin=$E(".open-platform-weixin",b),this.openPlatformCyou=$E(".open-platform-cyou",b),this.openPlatformSohu=$E(".open-platform-sohu",b),this.openPlatformww37=$E(".open-platform-ww37",b),this.openPlatformQQ=$E(".open-platform-qq",b),this.openPlatformQQ2=$E(".open-platform-qq2",b),this.openPlatformWebi=$E(".open-platform-weibo",b),this.openPlatformWebi2=$E(".open-platform-weibo2",b),this.openPlatformBaidu=$E(".open-platform-baidu",b),this.openPlatformRenren=$E(".open-platform-renren",b),this.openPlatformDouban=$E(".open-platform-douban",b),a.openPlatformWeixin.element&&this.openPlatformWeixin.on("click",function(){var b=a.openPlatformWeixin.element.title||"\u5fae\u4fe1\u5f00\u653e\u5e73\u53f0";core.bindOpenPlatform(Passport.OPEN_PLATFORMS.weixin,b)},this),a.openPlatformCyou.element&&this.openPlatformCyou.on("click",function(){var b=a.openPlatformCyou.element.title||"\u7545\u6e38\u5f00\u653e\u5e73\u53f0";core.bindOpenPlatform(Passport.OPEN_PLATFORMS.cyou,b)},this),a.openPlatformSohu.element&&this.openPlatformSohu.on("click",function(){var b=a.openPlatformSohu.element.title||"\u641c\u72d0\u5f00\u653e\u5e73\u53f0";core.bindOpenPlatform(Passport.OPEN_PLATFORMS.sohu,b)},this),this.openPlatformww37.element&&this.openPlatformww37.on("click",function(){var b=a.openPlatformww37.element.title||"\u641c\u72d0\u5f00\u653e\u5e73\u53f0";core.bindOpenPlatform(Passport.OPEN_PLATFORMS.ww37,b)},this),this.openPlatformQQ.element&&this.openPlatformQQ.on("click",function(){var b=a.openPlatformQQ.element.title||"QQ\u5f00\u653e\u5e73\u53f0";core.bindOpenPlatform(Passport.OPEN_PLATFORMS.qq,b)},this),this.openPlatformQQ2.element&&this.openPlatformQQ2.on("click",function(){var b=a.openPlatformQQ2.element.title||"QQ\u5f00\u653e\u5e73\u53f0";core.bindOpenPlatform(Passport.OPEN_PLATFORMS.qq,b)},this),this.openPlatformWebi.element&&this.openPlatformWebi.on("click",function(){var b=a.openPlatformWebi.element.title||"\u65b0\u6d6a\u5fae\u535a\u5f00\u653e\u5e73\u53f0";core.bindOpenPlatform(Passport.OPEN_PLATFORMS.weibo,b)},this),this.openPlatformWebi2.element&&this.openPlatformWebi2.on("click",function(){var b=a.openPlatformWebi2.element.title||"\u65b0\u6d6a\u5fae\u535a\u5f00\u653e\u5e73\u53f0";core.bindOpenPlatform(Passport.OPEN_PLATFORMS.weibo,b)},this),this.openPlatformBaidu.element&&this.openPlatformBaidu.on("click",function(){var b=a.openPlatformBaidu.element.title||"\u767e\u5ea6\u5f00\u653e\u5e73\u53f0";core.bindOpenPlatform(Passport.OPEN_PLATFORMS.baidu,b)},this),this.openPlatformRenren.element&&this.openPlatformRenren.on("click",function(){var b=a.openPlatformRenren.element.title||"\u4eba\u4eba\u5f00\u653e\u5e73\u53f0";core.bindOpenPlatform(Passport.OPEN_PLATFORMS.renren,b)},this),this.openPlatformDouban.element&&this.openPlatformDouban.on("click",function(){var b=a.openPlatformDouban.element.title||"\u8c46\u74e3\u5f00\u653e\u5e73\u53f0";core.bindOpenPlatform(Passport.OPEN_PLATFORMS.douban,b)},this)},bindCoreEvents:function(){var a=this,b=Passport.EVENTS;core.on(b.loginStart,function(){a._loginStart()},!0),core.on(b.loginSuccess,function(){a._loginSuccess()},!0),core.on(b.loginFailure,function(b){a._loginFailure(b)},!0),core.on(b.logoutStart,function(){a._logoutStart()},!0),core.on(b.logoutFailure,function(b){a._logoutFailure(b)},!0),core.on(b.logoutSuccess,function(){a._logoutSuccess()},!0)},initSelectList:function(a){var b=this;Passport.getDomainList(function(c){
if(c){var d="";Passport.set({domainList:c});for(var e=0;e<core.option.domainList.length;e++)d+='<li class="gpp-drop-item pprt-select-17173" data-domain="'+core.option.domainList[e]+'"></li>';$E(".gpp-drop-list",b.element).element.innerHTML=d,a.call(b)}})},initSelector:function(){if(this.ppSelectWrapElement.element){var a=this,b=function(){a.ppSelectWrapElement.element.style.width=a.emailInput.offsetWidth+"px"};this.initSelectList(function(){if(this.ppSelectElement=$E(".pprt-select-17173",this.element),this.ppSelectIndex=0,this.ppSelectItems=$E(".domain-list",this.element).element.children,this.ppSelectLength=this.ppSelectItems.length,this.emailInput&&this.ppSelectWrapElement.element){util.on(window,"resize",b);var c=function(b){var c=b.target||b.srcElement;"li"===c.tagName.toLowerCase()&&(util.removeClass($E(".ue-passport-selected",$E(".domain-list",a.element)).element,"ue-passport-selected"),util.addClass(c,"ue-passport-selected"),a.ppSelectElement.element=c)};util.on(this.ppSelectWrapElement.element,"mouseover",c),util.on(this.ppSelectWrapElement.element,"touchstart",c),util.on(this.emailInput,"keydown",function(b){38===b.keyCode?(util.preventDefaultEvent(b),a.ppSelectIndex-=1):40===b.keyCode&&(util.preventDefaultEvent(b),a.ppSelectIndex+=1)}),util.on(this.emailInput,"keypress",function(b){13===b.keyCode&&(util.preventDefaultEvent(b),a.passwdInput.focus())}),util.on(this.emailInput,"keyup",function(b){var c=a.ppSelectItems,d=a.ppSelectIndex,e=a.ppSelectLength,f=(d%e+e)%e;if(a.emailInput.value.indexOf("@")>-1){for(var g=e-1;g>=0;g--){var h=c[g],i=h.getAttribute("data-domain");h.innerHTML=util.trim(a.emailInput.value.split("@")[0]||"").replace(/(\d)/g,"<span>$1</span>")+"<span>@</span>"+i,util.removeClass(h,"ue-passport-selected"),a.emailInput.value.split("@")[1]&&0!==i.indexOf(a.emailInput.value.split("@")[1])?(h.style.display="none",e-=1):(h.style.display="block",38!==b.keyCode&&40!==b.keyCode&&(f=g))}for(;e&&c[f]&&"none"===c[f].style.display;)38===b.keyCode?(0===f&&(f=a.ppSelectLength),f--):40===b.keyCode&&(f===a.ppSelectLength-1&&(f=-1),f++);util.addClass(c[f],"ue-passport-selected"),a.ppSelectIndex=f,a.ppSelectElement.element=c[f],e&&util.trim(a.emailInput.value)?a.ppSelectWrapElement.show():a.ppSelectWrapElement.hide()}else a.ppSelectWrapElement.hide()}),util.on(this.emailInput,"focus",function(b){a.emailInput.oldValue=a.emailInput.value}),util.on(this.emailInput,"blur",function(b){if(a.emailInput.value&&"none"!=util.getCss(a.ppSelectWrapElement.element,"display")&&a.ppSelectElement.element.innerHTML){var c=a.ppSelectElement.element.innerHTML.replace(/<span>(\d|@)<\/span>/gi,"$1");setTimeout(function(){a.emailInput.value=c},0)}a.ppSelectWrapElement.hide(),a.emailInput.value&&util.jsonpGet(protocol+"//"+Passport.Core.defaultOption.passportdomain+"/sso/logincheck",{username:encodeURI(a.emailInput.value)},function(b){b.data.validcode&&a.emailInput.oldValue!==a.emailInput.value&&a._changeValidcode()})}),util.on(document,"click",function(){a.ppSelectWrapElement.hide()})}})}},$getElementByClassName:function(a){for(var b=this.cElement.getElementsByTagName("div"),c=0;c<b.length;c++)if(0==b[c].className.lastIndexOf(a))return b[c]},_syncElementHeight:function(){var a=this.formElement.element,b=""+a.style.position;a.style.position="absolute",this.formElement.show();var c=a.clientHeight+"px";this.formElement.hide(),a.style.position=b,this.infoElement.element&&(this.infoElement.element.style.height=c),this.waitElement.element&&(this.waitElement.element.style.height=c)},_changeValidcode:function(){this.tcValidater.clear()},login:function(a){var b=this;a&&util.preventDefaultEvent(a),this.username=this.emailInput.value,this.password=this.passwdInput.value,this.saftPaswordInput?this.saftPassword=this.saftPaswordInput.value:this.saftPassword="";var c=0;this.pcInput&&1==this.pcInput.checked&&(c=1);var d=function(){core.login({username:b.username,password:b.password,saftPassword:b.saftPassword,validcode:b.validcode,txAppId:b.txAppId,randStr:b.randStr,cookie:c})};b.saftPassword?d():this.tcValidater.validate(d)},_loginStart:function(){return this.ui4._loginStart.call(this),this._syncElementHeight(),this.currentElement.hide(),this.formElement.hide(),this.loginElement.hide(),this.waitElements.loggingIn.show(),this.waitElements.loggingOut.hide(),this.currentElement=this.waitElement,this.currentElement.show(),!0},_loginFailure:function(a){this.showError(a),this.currentElement.hide(),this.loginElement.show(),this.currentElement=this.formElement,this.currentElement.show(),7===a.status&&this.passwdInput&&(this.passwdInput.value=""),this._changeValidcode(),this.ui4._loginFailure.call(this,a)},_loginSuccess:function(){var a=this;this.tcValidater.clear(),this._syncElementHeight(),this.currentElement.hide(),this.loginElement.hide(),this.logoutElement.show();var b=core.data("username");this.infoElement.element&&(this.infoElements.logoutErr.hide(),this.infoElements.username.html(b),this.infoElements.nickname.html(core.data("nickname")),this.infoElements.portrait.html('<img src="'+Passport.getUserPortrait(core.data("uid"),0)+'" width="50" height="50" alt="'+b+'" />'),this.infoElements.userlevel.element&&Passport.getUserLevel(b,function(b){if(b){var c="http://i4.17173.itc.cn/2009/lv2/"+b+".gif";a.infoElements.userlevel.element.innerHTML='<img src="'+c+'" />'}})),this.currentElement=this.infoElement,this.currentElement.show(),a.ui4._loginSuccess.call(a)},logout:function(a){a&&util.preventDefaultEvent(a),this.ui4._logoutStart.call(this),this.tcValidater.clear(),core.logout()},_logoutStart:function(){return this._syncElementHeight(),this.currentElement.hide(),this.logoutElement.hide(),this.waitElements.loggingIn.hide(),this.waitElements.loggingOut.show(),this.currentElement=this.waitElement,this.currentElement.show(),!0},_logoutFailure:function(a){this.ui4._logoutFailure.call(this,a)},_logoutSuccess:function(){this.emailInput&&(this.emailInput.value=""),this.passwdInput&&(this.passwdInput.value=""),this._syncElementHeight(),this.formElements.loginErr.hide(),this.currentElement.hide(),this.logoutElement.hide(),this.loginElement.show(),this.infoElement.element&&(this.infoElements.username.html(""),this.infoElements.nickname.html(""),this.infoElements.portrait.html("")),this.currentElement=this.formElement,this.currentElement.show(),this.ui4._logoutSuccess.call(this)},showError:function(a){this.formElements.loginErr.element?(8==a.status&&(a.msg='\u5c1a\u672a\u6fc0\u6d3b\u90ae\u7bb1,<a href="'+Passport.URL_ACTIVE+"?username="+this.username+'" target="_blank">\u8bf7\u70b9\u51fb\u8fdb\u5165\u6fc0\u6d3b</a>'),util.trim(a.msg)&&this.formElements.loginErr.html(a.msg).show()):alert(a.msg)},hideError:function(){this.formElements.loginErr.html("").hide()},show:function(a){a=util.extend({},{modal:!0},a),this.tcValidater.clear(),$E(this.element).show(),this.waitElement&&this.waitElement.hide(),this.modalEl&&a.modal&&$E(this.modalEl).show(),this.formElements.loginErr.show(),this.formElements.loginErr.hide(),this.emailInput&&(this.emailInput.value=core.getLastAccount()),this.ui4._show.call(this,a),a.onHide&&(this.option.onHide=a.onHide)},hide:function(){3!==core.status&&($E(this.element).hide(),this.modalEl&&$E(this.modalEl).hide(),this.ui4._hide.call(this),this.formElements.loginErr.show(),this.formElements.loginErr.hide(),this.option.onHide&&this.option.onHide.call(this),this.option.onHide=null)},destory:function(){this.element.parentNode.removeChild(this.element),this.modalEl&&this.modalEl.parentNode.removeChild(this.modalEl)}}),Passport.sendMessage=function(a,b){core.receiveMsg(a,b)},Passport.getLastAccount=function(){return core.getLastAccount()},Passport.getLastUid=function(){return core.getLastUid()},Passport.getCssUrl=function(){return core.option.css},Passport.getDomain=function(){return core.option.domain},Passport.initCss=function(){var a,b="__PASSPORT_CSS__";if(window.__passportCssText__,document.createStyleSheet){for(var c=null,d=0,e=document.styleSheets;d<e.length;d++)if(e[d].ID===b){c=e[d];break}c||(c=document.createStyleSheet(""),c.ID=b,c.cssText=""),a=function(){window.__passportCssText__=window.__passportCssText__||"",c.cssText+=window.__passportCssText__}}else{var f=document.getElementById(b);if(!f){f=document.createElement("style"),f.id=b,f.type="text/css",f.textContent="";var g=document.head||document.getElementsByTagName("head")[0]||document.documentElement;g.appendChild(f)}a=function(){window.__passportCssText__=window.__passportCssText__||"",f.textContent+=window.__passportCssText__}}a()},"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var Messenger=function(){function a(a,b){var c="";if(arguments.length<2?c="target error - target and name are both requied":"object"!=typeof a?c="target error - target itself must be window object":"string"!=typeof b&&(c="target error - target name must be string type"),c)throw new Error(c);this.target=a,this.name=b}function b(a){this.targets={},this.name=a,this.listenFunc=[],this.initListen()}var c="[passport]",d="postMessage"in window;return d?a.prototype.send=function(a){this.target.postMessage(c+a,"*")}:a.prototype.send=function(a){var b=window.navigator[c+this.name];if("function"!=typeof b)throw new Error("target callback function is not defined");b(c+a,window)},b.prototype.addTarget=function(b,c){var d=new a(b,c);this.targets[c]=d},b.prototype.initListen=function(){var a=this,b=function(b){if("object"==typeof b&&b.data&&(b=b.data),b&&"string"==typeof b&&~b.indexOf(c)){b=b.slice(c.length);for(var d=0;d<a.listenFunc.length;d++)a.listenFunc[d](b)}};d?"addEventListener"in document?window.addEventListener("message",b,!1):"attachEvent"in document&&window.attachEvent("onmessage",b):window.navigator[c+this.name]=b},b.prototype.listen=function(a){this.listenFunc.push(a)},b.prototype.clear=function(){this.listenFunc=[]},b.prototype.send=function(a){var b,c=this.targets;for(b in c)c.hasOwnProperty(b)&&c[b].send(a)},b}(),messenger;window.self===window.parent?(messenger=new Messenger("parent"),messenger.listen(function(a){core.receiveMsg(a)})):(messenger=new Messenger("iframe"),messenger.addTarget(window.parent,"parent")),Passport.messenger=messenger,Passport.data=function(key){var lastNickname=util.getCookie("lastnickname"),cookieStr=util.getCookie("ppinf17173"),cookieArr,userInfoStr,userInfoArr,keyValueStr,keyValueArr,base64Value,base64Length;if("nickname"===key&&lastNickname)return lastNickname=eval("'"+lastNickname+"'");if(cookieStr&&~cookieStr.indexOf("|"))for(cookieArr=unescape(cookieStr).split("|"),base64Value=cookieArr[3].replace(/-/g,"+"),base64Value=base64Value.replace(/_/g,"/"),base64Length=base64Value.length,base64Value+="====".substr(base64Length%4),userInfoStr=util.base64Decode(base64Value),userInfoArr=userInfoStr.split("|");userInfoArr.length;)if(keyValueStr=userInfoArr.shift(),keyValueArr=keyValueStr.split(":"),2===keyValueArr.length&&decodeURIComponent(keyValueArr[0])==key)return decodeURIComponent(keyValueArr[1]);return"token"===key?core.token:""};var getUserLevelCallback=function(a){if(window.user_jifen&&1==window.user_jifen.flag){var b=window.user_jifen.jifen.split("|");a&&a(b[1])}else a&&a(null)};Passport.getUserLevel=function(a,b){if(a){var c="http://exp.my.17173.com/get_jf.php?userid="+a,d=document.createElement("script");d.type="text/javascript",d.charset="uft-8",d.src=c,d.addEventListener?d.addEventListener("load",function(){getUserLevelCallback(b)},!1):d.attachEvent&&d.attachEvent("onreadystatechange",function(){var a=window.event.srcElement;"loaded"==a.readyState&&getUserLevelCallback(b)}),document.getElementsByTagName("head")[0].appendChild(d)}},Passport.isLoggedIn=function(){return!!Passport.data("username")},Passport.on=function(a,b){core.on(a,b)},Passport.off=function(a,b){core.off(a,b)},Passport.logout=function(a){core.logout(a)},Passport.login=function(a,b){core.login(a,b)},Passport.getMobileStatus=function(a){Passport.isLoggedIn()?util.jsonpGet("https://"+Passport.Core.defaultOption.passportdomain+"/sso/isBindMobile",{username:encodeURI(Passport.data("username")),clear:1*new Date},function(b){a(4!==b.status)}):a(!1)},Passport.isAllowToUpdateName=function(a){Passport.isLoggedIn()?util.jsonpGet("https://"+Passport.Core.defaultOption.passportdomain+"/safe/topbar/updateNickname",{clear:1*new Date},function(b){a(1===b.status)}):a(!1)},Passport.uiExtend=function(a,b){var c=null;if(Passport[a])throw new Error("\u8be5\u540d\u79f0\u5df2\u7ecf\u5b58\u5728");b=util.extend({},b);var d=b.element;if(!d)throw new Error("\u81ea\u5b9a\u4e49ui\u5fc5\u987b\u6307\u5b9aelement\u53c2\u6570");if(!$E(".pprt-form",d).element||d.getElementsByTagName("input").length<2)throw new Error("element\u5bb9\u5668\u5185\u5fc5\u9009\u5143\u7d20\u7f3a\u5931");Passport[a]=Passport.UIBase.extend({init:function(a){return c?c:(a=this.option=util.extend({},a),a.ui="none",a.element=d,this._initing(a),void this._inited())}}),document.body&&(c=new Passport[a]),Passport[a].show=function(b){c||(c=new Passport[a]),b=util.extend({},{modal:!0},b),c.show(b.modal)},Passport[a].hide=function(){c&&c.hide()}},Passport.set=function(a){for(var b=0;b<Passport.editableOptionList.length;b++)for(var c in a)c==Passport.editableOptionList[b]&&(core.option[Passport.editableOptionList[b]]=a[c])},Passport.getOption=function(a){return core.option[a]},Passport.bindOpenPlatform=function(a,b){core.bindOpenPlatform(a,b)},Passport.log=function(a){var b=JSON.stringify(a);util.jsonpGet("//"+Passport.Core.defaultOption.passportdomain+"/api/default/CaptchaLog",{content:b},function(){})},Passport.URL_REGISTER=protocol+"//passport.17173.com/register",Passport.URL_RECOVER=protocol+"//passport.17173.com/password/forget",Passport.URL_EDIT_PORTRAIT="http://photos.17173.com/shine/facelist.php",Passport.URL_ACTIVE=protocol+"//passport.17173.com/register/reactivate",Passport.OPEN_PLATFORMS={cyou:"cyou",sohu:"sohu",ww37:"cy37wanwan",qq:"qq",weibo:"weibo",baidu:"baidu",douban:"douban",renren:"renren",weixin:"weixin"},Passport.EVENTS={loginStart:"loginStart",loginSuccess:"loginSuccess",loginFailure:"loginFailure",logoutStart:"logoutStart",logoutSuccess:"logoutSuccess",logoutFailure:"logoutFailure",mobileBindShow:"mobileBindShow",mobileBindSucess:"mobileBindSucess",mobileBindFailure:"mobileBindFailure",dialogClose:"dialogClose"},Passport.STATUS={logouted:"logouted",loginDialog:"loginDialog",logedin:"logedin",mobileBindDialog:"mobileBindDialog"},Passport.UI={none:{}},Passport.editableOptionList=["client","callback","css","showwarn","domainList","appid","currentUrl","registerParam"]}(),function(a,b){var c="",d=Passport.util,e=function(a,b){a.contentWindow.Passport&&a.contentWindow.Passport.Dialog&&Passport.Nut&&Passport.Nut.iframe&&Passport.Nut.iframe.contentWindow.initNut?b():setTimeout(function(){e(a,b)},50)},f=function(a){b.domain=Passport.getDomain();var f=b.createElement("iframe");f.id="nut";var g=function(a){for(var b="",c=0;c<a.length;c++)b+="<script src="+a[c]+"></script>";return b},h=function(a){for(var b="",c=0;c<a.length;c++)b+="<link href="+a[c]+"?"+Math.random()+" rel=stylesheet />";return b},i=g(a.js),j=h(a.css),k=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);f.allowTransparency="true",f.frameBorder=0,f.scrolling="no",b.body.appendChild(f),f.src='javascript:window.name="nut";document.open();document.write("	<!DOCTYPE html>	<html style=height:100%>	<meta http-equiv=X-UA-Compatible content=IE=Edge />	<script>		document.domain=\''+b.domain+"';window.parentHref='"+encodeURIComponent(window.location)+"';	</script>	<body style=height:100%;background:none>"+j+i+'");document.close();',f.style.cssText="margin: auto;position: fixed;top: 0;left: 0;right: 0;border: 0;width: 100%;height: 100%;z-index: 9999;background: url("+c+"//s.ue.17173cdn.com/a/lib/passport-2.0/default/images/loading.gif) no-repeat center;_position:absolute;_top:expression(0+((e=document.documentElement.scrollTop)?e:document.body.scrollTop)+'px');_left:expression(0+((e=document.documentElement.scrollLeft)?e:document.body.scrollLeft)+'px');_width:expression(0+((e=document.documentElement.clientWidth)?e:document.body.clientWidth)+'px');_height:expression(0+((e=document.documentElement.clientHeight)?e:document.body.clientHeight)+'px');";var l=navigator.userAgent,m=l.indexOf("Mozilla/5.0")>-1&&l.indexOf("Android ")>-1&&l.indexOf("AppleWebKit")>-1&&l.indexOf("Chrome")<0;if(m&&(f.style.position="absolute",d.on(window,"scroll",function(){var a=document.body.scrollTop||document.documentElement.scrollTop;f.style.top=2*a+"px"})),l.indexOf("iPad")>-1||k){f.style.position="absolute",f.style.width=document.documentElement.clientWidth+"px",f.style.height=document.documentElement.clientHeight+"px";var n=function(){var a=document.body.scrollTop||document.documentElement.scrollTop;f.style.top=a+"px"};d.on(window,"scroll",n),d.on(window,"resize",n),n()}return d.on(f,"load",function(){f.style.background="transparent"}),e(f,function(){f.style.background="transparent"}),f};Passport.Nut={},Passport.Nut.hide=function(){Passport.Nut.iframe&&(Passport.Nut.iframe.style.display="none")},Passport.Nut.show=function(a){if(a=a||{},a.mobileBindOn=a.mobileBindOn||Passport.defaultOption.mobileBindOn,a.registerParam=a.registerParam||Passport.defaultOption.registerParam,a.loginType=a.loginType||Passport.defaultOption.loginType,a.appid=a.appid||Passport.defaultOption.appid,a.currentUrl=a.currentUrl||Passport.defaultOption.currentUrl,Passport.Nut.iframe)Passport.Nut.iframe.contentWindow.initNut&&(Passport.Nut.iframe.contentWindow.initNut(a),Passport.Nut.iframe.style.display="block");else{var b=[c+"//s.ue.17173cdn.com/a/passport/v1/js/jquery-1.7.2.js",c+"//s.ue.17173cdn.com/a/lib/passport/v2/js/passport.js?201811228",c+"//s.ue.17173cdn.com/a/lib/passport/v2/js/default/script.js?20181228",c+"//s.ue.17173cdn.com/a/passport/v1/js/placeholder.js "],d=[];d.push(Passport.getCssUrl()),Passport.Nut.iframe=f({js:b,css:d}),e(Passport.Nut.iframe,function(){Passport.Nut.iframe.contentWindow.initNut(a)})}},Passport.Nut.showMobileBinder=function(){Passport.Dialog.show({type:"mobileBind"})},Passport.Nut.showNameUpdater=function(){Passport.Dialog.show({type:"nameEdit"})},Passport.Dialog=Passport.Nut;var g=function(){setTimeout(function(){d.getCookie("pprt_showloginwarning")&&"nut"!==window.name&&d.jsonpGet(c+"//passport.17173.com/sso/loginwarning",{},function(a){a.data&&1===a.status&&h(a.data.last_login_location+"&nbsp;"+a.data.last_login_time),d.deleteCookie("pprt_showloginwarning")})},3e3)},h=function(a){if(Passport.isLoggedIn()){var b="passportLoginError",c=document.getElementById(b);c||(c=document.createElement("link"),c.rel="stylesheet",c.href="//s.ue.17173cdn.com/a/lib/passport/v2/css/style-login.css",document.getElementsByTagName("head")[0].appendChild(c));var e='<div id="com-pprt" class="isolateX box-loginwarning">	<div class="safe-tip-box">		<div class="hd">			<div class="safe-tip-close"><a href="javascript:;">\xd7</a></div>			<div class="abnor-log">				<span class="abnor-log-hd"><i class="ico"></i><span class="c1">\u4e0a\u6b21\uff1a</span> </span>				<span class="abnor-log-bd">'+a+'</span>			</div>		</div>		<div class="bd">			<a href="//passport.17173.com/main" target="_blank" title="" class="abnor-log-c">\u767b\u5f55\u5f02\u5e38\uff01\u7acb\u5373\u524d\u5f80\u5b89\u5168\u4e2d\u5fc3\u5b8c\u5584\u5bc6\u4fdd&raquo;</a>		</div>	</div></div>',f=d.$(e);document.body.appendChild(f.element),d.$(".safe-tip-close").on("click",function(){f.element.parentNode.removeChild(f.element)})}};Passport.isLoggedIn()&&(g(),Passport.util.getCookie("ppinf17173").split("|")[1]<1479225601&&setTimeout(function(){Passport.logout()},500)),Passport.on(Passport.EVENTS.loginSuccess,g),Passport.Guide={},Passport.Guide.hide=function(){var a=Passport.Guide.iframe;a.parentNode.removeChild(a),Passport.Guide.iframe=null},Passport.Guide.show=function(){Passport.isLoggedIn()?Passport.Guide.iframe?Passport.Guide.iframe.style.display="block":Passport.Guide.iframe=f({js:[c+"//s.ue.17173cdn.com/a/passport/v1/js/jquery-1.7.2.js",c+"//s.ue.17173cdn.com/a/passport/v1/js/jquery.validate.js",c+"//s.ue.17173cdn.com/a/passport/v1/js/artDialog.min.js",c+"//s.ue.17173cdn.com/a/passport/v1/js/artDialog.plugins.js",c+"//s.ue.17173cdn.com/a/lib/passport-2.0/guide/script.js",c+"//s.ue.17173cdn.com/a/passport/v1/js/passport-script.js",c+"//s.ue.17173cdn.com/a/passport/v1/js/script.js"],css:[c+"//s.ue.17173cdn.com/a/passport/v1/css/passport-artdialog.css",c+"//s.ue.17173cdn.com/a/lib/passport-2.0/guide/style.css"]}):alert("\u8bf7\u767b\u5f55\u540e\u518d\u8bd5")}}(window,document);