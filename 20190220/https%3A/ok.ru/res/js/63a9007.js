var stringPrototype=String.prototype;document.createElement("template");(function(){var a=0;if(!window.requestAnimationFrame||!window.cancelAnimationFrame){window.requestAnimationFrame=function(f,c){var b=Date.now(),d=Math.max(0,16-(b-a)),e=window.setTimeout(function(){f(b+d);},d);a=b+d;return e;};window.cancelAnimationFrame=clearTimeout;}})();(function(){var b=document.createElement("_");b.classList.add("c1","c2");if(!b.classList.contains("c2")){var c=function(e){var d=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(h){var g,f=arguments.length;for(g=0;g<f;g++){h=arguments[g];d.call(this,h);}};};c("add");c("remove");}b.classList.toggle("c3",false);if(b.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(d,e){if(1 in arguments&&!this.contains(d)===!e){return e;}else{return a.call(this,d);}};}}());if(!window.getBoundingClientRect){window.getBoundingClientRect=function(){return{top:0,left:0,bottom:window.innerHeight||window.clientHeight,right:window.innerWidth||window.clientWidth};};}(function(){if("performance" in window==false){window.performance={};}if("now" in window.performance==false){var b=Date.now();if(performance.timing&&performance.timing.navigationStart){b=performance.timing.navigationStart;}window.performance.now=function a(){return Date.now()-b;};}})();(function(){if(typeof window.CustomEvent==="function"){return false;}function a(c,d){d=d||{bubbles:false,cancelable:false,detail:undefined};var b=document.createEvent("CustomEvent");b.initCustomEvent(c,d.bubbles,d.cancelable,d.detail);return b;}a.prototype=window.Event.prototype;window.CustomEvent=a;})();if(!Array.prototype.find){Array.prototype.find=function(a){if(this==null){throw new TypeError("Array.prototype.find called on null or undefined");}if(typeof a!=="function"){throw new TypeError("predicate must be a function");}var f=Object(this);var d=f.length>>>0;var b=arguments[1];var e;for(var c=0;c<d;c++){e=f[c];if(a.call(b,e,c,f)){return e;}}return undefined;};}if(!Array.prototype.findIndex){Array.prototype.findIndex=function(a){if(this==null){throw new TypeError("Array.prototype.findIndex called on null or undefined");}if(typeof a!=="function"){throw new TypeError("predicate must be a function");}var f=Object(this);var d=f.length>>>0;var b=arguments[1];var e;for(var c=0;c<d;c++){e=f[c];if(a.call(b,e,c,f)){return c;}}return -1;};}if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(b){var c=(this.document||this.ownerDocument).querySelectorAll(b),a=c.length;while(--a>=0&&c.item(a)!==this){}return a>-1;};}if(!Object.assign){Object.defineProperty(Object,"assign",{enumerable:false,configurable:true,writable:true,value:function(h,a){if(h===undefined||h===null){throw new TypeError("Cannot convert first argument to object");}var k=Object(h);for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e===undefined||e===null){continue;}var c=Object.keys(Object(e));for(var d=0,g=c.length;d<g;d++){var j=c[d];var f=Object.getOwnPropertyDescriptor(e,j);if(f!==undefined&&f.enumerable){k[j]=e[j];}}}return k;}});}if(!Object.values){Object.defineProperty(Object,"values",{enumerable:false,configurable:true,writable:true,value:function(a){return Object.keys(a).map(function(b){return a[b];});}});}if(!stringPrototype.endsWith){Object.defineProperty(stringPrototype,"endsWith",{value:function(c,b){var a=this.toString();if(b===undefined||b>a.length){b=a.length;}b-=c.length;var d=a.indexOf(c,b);return d!==-1&&d===b;}});}if(typeof stringPrototype.startsWith!=="function"){stringPrototype.startsWith=function(a,b){return this.indexOf(a,b=b||0)===b;};}if(!HTMLCanvasElement.prototype.toBlob){Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(d,b,c){var a=this;setTimeout(function(){var g=atob(a.toDataURL(b,c).split(",")[1]),f=g.length,e=new Uint8Array(f);for(var h=0;h<f;h++){e[h]=g.charCodeAt(h);}d(new Blob([e],{type:b||"image/png"}));});}});}(function(d){var l=d.Promise;var b=l&&"resolve" in l&&"reject" in l&&"all" in l&&"race" in l&&(function(){var q;new l(function(s){q=s;});return typeof q==="function";})();if(!b){var a=setTimeout;function o(){}var c=(typeof setImmediate==="function"&&setImmediate)||function(q){a(q,1);};var f=Array.isArray||function(q){return Object.prototype.toString.call(q)==="[object Array]";};function k(q){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new");}if(typeof q!=="function"){throw new TypeError("not a function");}this._state=0;this._value=undefined;this._deferreds=[];n(q,this);}function g(r,q){while(r._state===3){r=r._value;}if(r._state===0){r._deferreds.push(q);return;}c(function(){var s=r._state===1?q.onFulfilled:q.onRejected;if(s===null){(r._state===1?m:p)(q.promise,r._value);return;}var t;try{t=s(r._value);}catch(u){p(q.promise,u);return;}m(q.promise,t);});}function m(q,s){try{if(s===q){throw new TypeError("A promise cannot be resolved with itself.");}if(s&&(typeof s==="object"||typeof s==="function")){var t=s.then;if(s instanceof k){q._state=3;q._value=s;h(q);return;}else{if(typeof t==="function"){n(t.bind(s),q);return;}}}q._state=1;q._value=s;h(q);}catch(r){p(q,r);}}function p(q,r){q._state=2;q._value=r;h(q);}function h(r){for(var s=0,q=r._deferreds.length;s<q;s++){g(r,r._deferreds[s]);}r._deferreds=null;}function j(s,q,r){this.onFulfilled=typeof s==="function"?s:null;this.onRejected=typeof q==="function"?q:null;this.promise=r;}function n(t,r){var q=false;try{t(function(u){if(q){return;}q=true;m(r,u);},function(u){if(q){return;}q=true;p(r,u);});}catch(s){if(q){return;}q=true;p(r,s);}}k.prototype["catch"]=function(q){return this.then(null,q);};k.prototype.then=function(s,r){var q=new k(o);g(this,new j(s,r,q));return q;};k.all=function(){var q=Array.prototype.slice.call(arguments.length===1&&f(arguments[0])?arguments[0]:arguments);return new k(function(v,u){if(q.length===0){return v([]);}var t=q.length;function s(x,z){try{if(z&&(typeof z==="object"||typeof z==="function")){var y=z.then;if(typeof y==="function"){y.call(z,function(A){s(x,A);},u);return;}}q[x]=z;if(--t===0){v(q);}}catch(w){u(w);}}for(var r=0;r<q.length;r++){s(r,q[r]);}});};k.resolve=function(q){if(q&&typeof q==="object"&&q.constructor===k){return q;}return new k(function(r){r(q);});};k.reject=function(q){return new k(function(s,r){r(q);});};k.race=function(q){return new k(function(u,t){for(var s=0,r=q.length;s<r;s++){q[s].then(u,t);}});};k._setImmediateFn=function e(q){c=q;};if(typeof module!=="undefined"&&module.exports){module.exports=k;}else{if(!d.Promise){d.Promise=k;}}}})(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this);var OK=OK||{};OK.cnst={pageCtx:window.pageCtx,staticUrl:window.pageCtx.staticResourceUrl};OK.navigation={SPLITER:"<!--&-->",HEADER:"Rendered-Blocks",redirect:false};OK.fn=(function(){return{empty:function(){},isDebug:function(){return document.getElementById("__gwtd__m")!=null;},delegate:function(c,b,a){return function(){var d=Array.prototype.slice.call(arguments);var e=(b||[]).concat(d);return c.apply(a||this,e);};},deferred:function(b,c,a){var a=Array.prototype.slice.call(a);return function(){var d=b[c];return d.apply(b,a);};},logging:function(a,c){var b=c||OK.logging.currentLoggerFn||OK.fn.empty;return function(){try{return a.apply(this,arguments);}catch(d){b.call(window,d);}};}};})();OK.hookModel=OK.hookModel||{getHookById:OK.fn.empty,removeHookById:OK.fn.empty,getNearestBlockHookId:OK.fn.empty,setHookContent:function(a,d){if(a=="HeadMeta"){b(d);}else{var c=document.getElementById("hook_Block_"+a);if(c){c.innerHTML=d;require(["OK/capture"],function(e){e.activate(c);});}}function b(j){var h=document.getElementsByTagName("head")[0];var e=h.childNodes;var g=false;for(var f=0;f<e.length;){c=e[f];if(c.nodeType==8&&c.textContent.indexOf("META START")>-1){g=true;}if(g){h.removeChild(c);}else{f++;}if(c.nodeType==8&&c.textContent.indexOf("META END")>-1){break;}}if(g){h.insertAdjacentHTML("afterbegin",j);}}},captureBlockHook:OK.fn.empty,isHookEmpty:function(a){var b=this.getHookById(a);return !b||!b.element||!b.element.childNodes||!b.element.childNodes.length;}};OK.clickLog=OK.clickLog||{getCounter:OK.fn.empty,incCounter:OK.fn.empty,decCounter:OK.fn.empty};OK.logging=(function(){return{isSeleniumBot:false,currentLoggerFn:OK.fn.empty,setUp:function(a){OK.logging.currentLoggerFn=a;},tearDown:function(){OK.logging.currentLoggerFn=OK.fn.empty;},alert:function(a){if(OK.fn.isDebug()){alert(a);}},info:function(){if(OK.fn.isDebug()){try{console&&console.log.apply(console,arguments);}catch(a){}}},logger:{queue:[],replayQueue:function(){var a,b=this.queue;var c=b.length;for(a=0;a<c;a++){b[a].call();}this.queue=[];},error:function(b,a){this.queue.push(OK.fn.deferred(this,"error",arguments));},success:function(a,c,b){this.queue.push(OK.fn.deferred(this,"success",arguments));},force:function(a,c,b){this.queue.push(OK.fn.deferred(this,"force",arguments));},duration:function(a,c,d,b){this.queue.push(OK.fn.deferred(this,"duration",arguments));},clob:function(a,d,c,b){this.queue.push(OK.fn.deferred(this,"clob",arguments));},raw:function(a,b){this.queue.push(OK.fn.deferred(this,"raw",arguments));},errorEx:function(b,a,c){var d="Fatal JavaScript Error, please see log:\nexception ='"+b+"'\nstacktrace="+b.stack;this.clob("error",d,a,c);},durationScalar:function(b,d,c){if(c!=null&&c<10000){var a=1000;if(c<1000){a=100;}c=Math.round(c/a)*a;}else{c=10000;}this.success(b,d,""+c);}},repository:(function(){var g={},j=[];function c(n){return n&&Object.prototype.toString.call(n)==="[object Array]";}function m(n){return n&&Object.prototype.toString.call(n)==="[object Object]";}function h(n){return n!==undefined;}function b(p){var o=[];while(p){o[--p]=0;}return o;}function e(n){var o=JSON.stringify(n);if(!o||o.length<=2){return null;}return encodeURIComponent(o);}function f(){var n=e(g);g={};return n;}function d(){var n=e(j);j=[];return n;}function a(n,t,r,q,p,v,u){var s={o:n};t&&(s.p1=t);r&&(s.p2=r);q&&(s.d=q);p&&(s.i=p);v&&(s.c=v);u&&(s.r=u);j.push(s);}function k(n){l(g,n);}function l(p,o){var q=o.pop(),n=p;if(typeof q==="string"){n=!n?{}:!m(n)?{"n/a":n}:n;n[q]=l(n[q],o);}else{if(m(n)){n["n/a"]=l(n["n/a"],[q]);}else{if(c(n)){n.push(q?q:0);}else{if(q){n=b(n);n.push(q);}else{n=1+(n||0);}}}}return n;}return{addLog:function(o,r,q,u,t,s,p){if(q||u||t){a(o,s,p,r,q,u,t);}else{var n=[];h(r)&&n.push(r);h(p)&&n.push(""+p);h(s)&&n.push(""+s);n.push(""+o);k(n);}},getRequestData:function(){var o=f(),q=d(),n=[];o&&n.push("a="+o);q&&n.push("p="+q);return n.length>0?n.join("&"):null;}};}())};})();OK.logger=OK.logging.logger;OK.logger.repository=OK.logging.repository;define("OK/logger",OK.logger);OK.logctx=(function(){var b=[];var a=0;return{reset:function(c){b=c||[];a=b.length;},push:function(){b.push("");a=b.length;},pop:function(){b.pop();a=b.length;},step:function(c){b[a-1]=c;},last:function(c){return b.join(c||"_");}};})();OK.onload=(function(e){var a=[],d=true,c=function(g,j){if(j!=null&&j.length>0){var f=g;g=OK.fn.delegate(OK.loader.use,[f,j]);}if(d){a.push(g);}else{try{g.call(e);}catch(h){OK.logging.alert("Onload callback error after immidiate execute: "+h.message);}}},b=function(){d=false;for(var f=0;f<a.length;f++){var h=a[f];try{h.call(e);}catch(g){OK.logging.alert("Onload callback error after startup execute: "+g.message);}}a.length=0;};return{addCallback:c,fire:b};})(window);OK.loader=(function(){var t=null,m=null,f=null,e=null,p=null,q=null,c=null,r=null,l={},s=null,g=null,u=false,v={},o=function(){if(u){return;}u=true;t="string";m=",";f="complete";e="loaded";p=OK.cnst;q=p.staticUrl;c=q+"res/default/js/";r=p.pageCtx;s=document;g=s.getElementsByTagName("head")[0];OK.util.extend(l,{nativeHooks:{src:q+h("nativeHooksSrc")},OKCustomJs:{src:q+h("bottomJsSrc")},OKTextarea:{src:q+h("textareaJsSrc")},OKPhotos:{src:q+h("photosJsSrc")},OKPhotoLayer:{src:q+h("photoLayerJsSrc")},OKPhotoUploader:{src:h("photoUploaderJsSrc")},OKRegJs:{src:q+h("regJsSrc")},iScroll:{src:c+"iscroll.js"},cdnNode:{src:h("cdnNodeSrc")},OKPromo:{src:q+h("promoAppJsSrc")},OKGifts:{src:q+h("giftsJsSrc")},OKAppEdit:{src:q+h("appEditJsSrc")}});},h=function(d){if(r!=null&&d in r){return r[d];}return"";},n=function(d,x){var w=s.createElement("script");d.waiting=true;w.onload=w.onreadystatechange=function(){var y=w.readyState;if((y&&y!=f&&y!=e)){return;}w.onload=w.onreadystatechange=null;d.ok=true;try{x.call(this);}catch(z){OK.logging.alert("Loader callback error after script loaded: "+z.message);}};w.async=1;w.src=d.src;g.appendChild(w);},j=function(d){if(!d.ok&&!d.waiting){n(d,function(){for(var z in v){for(var y=0;y<v[z].length;y++){var A=v[z][y];if(A==null){continue;}var C=A.srcArr;var x=1;for(var w=0;w<C.length;w++){if(!l[C[w]].ok){x=0;}}if(x){try{v[z][y].clbk.call();}catch(B){OK.logging.alert("Loader queue callback error after all script loaded ["+C.join()+"]: "+B.message+"\n"+B.stack);}v[z][y]=null;}}}});}},k=function(y,C){o();var B=1,w=1,A=null;if(typeof y==t){y=y.split(m);}var d=Array.prototype.indexOf.call(y,"jQuery"),z=[];if(d>=0){y.splice(d,1);z.push("jquery");}var x=function(){for(var E=0;E<y.length;E++){var G=y[E];A=l[G];if(!A){B=0;w=0;break;}if(!A.ok){w=0;}}if(!B){return;}if(w){try{C.apply();}catch(F){OK.logging.alert("Loader callback error after immediate execute ["+y.join()+"]: "+F.message+"\n"+F.stack);}return;}var D=y.join(m);if(!v[D]){v[D]=[];}v[D].push({srcArr:y,clbk:C});for(E=0;E<y.length;E++){A=l[y[E]];j(A);}};if(z.length===0){x();}else{if(z.length===1&&require.defined(z[0])){x(require(z[0]));}else{require(z,x);}}},a=function(d,x,w){if(require.defined(d)){x(require(d));}else{require([d],x,w);}},b=function(d){OK.util.extend(l,d);};return{use:k,execRequire:a,register:b};})();OK.flash={musicFlashReady:false,musicFlashExist:false};OK.util=(function(a,b){var c=b.documentElement.classList;return{isGecko:function(){return c.contains("gecko");},isWebkit:function(){return c.contains("webkit");},isSafari:function(){return c.contains("mac-saf");},isIEMetro:function(){var d=false;if(a.navigator.msPointerEnabled){try{new ActiveXObject("htmlfile");}catch(f){d=(a.screenY===0&&(a.innerHeight+1)!==a.outerHeight);}}return d;},counterId:0,extend:function(f,e){f=f||{};for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d];}}return f;},clean:function(e){for(var d in e){if(e.hasOwnProperty(d)){e[d]=null;}}},keys:function(f){var e=[];for(var d in f){if(f.hasOwnProperty(d)){e.push(d);}}return e;},isHighDensity:function(){return((a.matchMedia&&(a.matchMedia("only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)").matches||a.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)").matches))||(a.devicePixelRatio&&a.devicePixelRatio>1.3));},setHighDensityCookie:function(e){var d=e+"=";if(OK.util.isHighDensity()){d+="h;max-age=31536000;path=/";}else{d+=";expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/";}b.cookie=d;},plurals:function(e){e=Math.abs(e)%100;if(e>10&&e<20){return 5;}var d=e%10;if(d>1&&d<5){return 2;}if(d==1){return 1;}return 5;},parseJSON:function(e){var g="<!--",d=g.length,f="-->".length;if(e){if(e.indexOf(g)===0){e=e.substring(d,e.length-f);}return JSON.parse(e);}},parseJsonCorrected:function(f){var h="<!--",e="-->",d=h.length,g=e.length;if(!f){return null;}if(f.indexOf(h)===0){f=f.substring(d,f.length-g).replace(/\\u0026#45;\\u0026#45;/g,"--");if(!f.length){return null;}}return JSON.parse(f);},nextId:function(){return this.counterId++;},getOffset:function(d){var e={left:0,top:0};do{e.left+=d.offsetLeft;e.top+=d.offsetTop;}while(d=d.offsetParent);return e;},is4ColumnActive:function(){return window.matchMedia("screen and (min-width: 1274px)").matches;}};}(window,document));OK.favicon=(function(){return{change:function(b){var a=document.getElementById("favicon");if(!a){return;}var c=a.cloneNode(true);c.setAttribute("href",b);a.parentNode.replaceChild(c,a);}};}());OK.css=(function(){var a=function(d,b){var c=(typeof d=="string")?document.getElementById(d):d;if(!c){return;}c.style.display=b?"block":"none";};return{display:function(c,b){a(c,b);},addClass:function(d,c){var b=document.getElementById(d);if(!b){return;}b.classList.add(c);},removeClass:function(d,c){var b=document.getElementById(d);if(!b){return;}b.classList.remove(c);}};}());OK.form=(function(){var b="form",c=function(e){var f=e.parentNode;while(f&&f.tagName&&f.tagName.toLowerCase()!=b){f=f.parentNode;}if(f&&f.submit){f.submit();}return false;},a=function(h,f){var g=h.form.elements;var e=g.length;for(i=0;i<e;i++){if(g[i].name.substr(0,f.length)==f){g[i].checked=h.checked;}}},d="input__active";return{submit:function(e){return c(e);},selectCBxs:function(f,e){a(f,e);},placeholder:function(e,f){require(["jquery"],function(){var j=f.parent();var h=function(){var l=e.attr("contentEditable")==="true"?e.html():e.val();var k=e.data("val")||"";if(l!==k){if(l!=""){j.addClass(d);}else{j.removeClass(d);}e.data("val",l);clearInterval(g);}};var g=setInterval(h,10);e.bind("blur",function(){clearInterval(g);});});}};}());OK.photoUpload=(function(a,b){return{init:function(c){var d=OK.photoUpload.init;require(["jquery","FileAPI"],function(f,e){OK.loader.use(["OKPhotoUploader"],function(){if(d!==OK.photoUpload.init){OK.photoUpload.init(c);}});});},createOnFileSelect:function(d,c){return function(e,f){c=OK.util.extend(c,{attachExif:f&&f.attachExif});OK.logging.logger.success("photo.upload","batch_file_select_init_0");require(["jquery","FileAPI"],function(h,g){OK.logging.logger.success("photo.upload","batch_file_select_init_1");OK.loader.use(["OKPhotoUploader"],function(){OK.logging.logger.success("photo.upload","batch_file_select_init_3");OK.photoUpload.init();var l=g.getFiles(e);if(l&&l.length&&l.length>0){var k=OK.photoUpload.controllers["create"+d];var j=f.taskId!=null?f.taskId:d;OK.photoUpload.addBatchToQueue(j,l,k.call(OK.photoUpload.controllers,f),c);g.reset(e.target||e.srcElement||e.currentTarget);}});});};},createOnFileDrop:function(d,c){return function(e,f){var g=e.dataTransfer.files;if(e.preventDefault){e.preventDefault();}c=OK.util.extend(c,{attachExif:f&&f.attachExif});OK.photoUpload.createOnFileList(d,g,c,f);require(["FileAPI"],function(h){if(g&&g.length&&g.length>0){h.reset(e.target||e.srcElement||e.currentTarget);}});};},createOnFileList:function(f,e,d,c){OK.logging.logger.success("photo.upload","batch_file_drop_init_0");OK.logging.logger.success("photo.upload","batch_file_drop_init_1");OK.loader.use(["OKPhotoUploader"],function(){OK.logging.logger.success("photo.upload","batch_file_drop_init_3");OK.photoUpload.init();if(e&&e.length&&e.length>0){var h=OK.photoUpload.controllers["create"+f];var g=c.taskId!=null?c.taskId:f;OK.photoUpload.addBatchToQueue(g,e,h.call(OK.photoUpload.controllers,c),d);}});},controllers:{}};})(window,document);OK.photoUploadFacade=OK.util.extend(OK.photoUploadFacade,{blocking:{onFileSelect:OK.photoUpload.createOnFileSelect("BlockingController",{abortCurrentRequest:true}),onDrop:OK.photoUpload.createOnFileDrop("BlockingController",{abortCurrentRequest:true})},posting_form:{onFileSelect:OK.photoUpload.createOnFileSelect("PostingFormController",{abortCurrentRequest:false}),onDrop:OK.photoUpload.createOnFileDrop("PostingFormController",{abortCurrentRequest:false})},group_poster:{onFileSelect:OK.photoUpload.createOnFileSelect("GroupPosterController",{abortCurrentRequest:true}),onDrop:OK.photoUpload.createOnFileDrop("GroupPosterController",{abortCurrentRequest:true})},avatar:{onFileSelect:OK.photoUpload.createOnFileSelect("AvatarUploadController",{abortCurrentRequest:true}),onDrop:OK.photoUpload.createOnFileDrop("AvatarUploadController",{abortCurrentRequest:true})},cover:{onFileSelect:OK.photoUpload.createOnFileSelect("CoverUploadController",{abortCurrentRequest:true}),onDrop:OK.photoUpload.createOnFileDrop("CoverUploadController",{abortCurrentRequest:true})},attach:{onFileSelect:function(a,b){require(["OK/AttachPhotoUpload"],function(){OK.attachPhotoUpload.previewOnFileSelect(a,b);});}},async:{onFileSelect:OK.photoUpload.createOnFileSelect("AsyncControllerV2",{abortCurrentRequest:false}),onDrop:OK.photoUpload.createOnFileDrop("AsyncControllerV2",{abortCurrentRequest:false})},asyncV2:{onFileSelect:OK.photoUpload.createOnFileSelect("AsyncControllerV2",{abortCurrentRequest:false}),onDrop:OK.photoUpload.createOnFileDrop("AsyncControllerV2",{abortCurrentRequest:false})},conversation_avatar:{onFileSelect:OK.photoUpload.createOnFileSelect("ConversationAvatarUploadController",{abortCurrentRequest:true}),onDrop:OK.photoUpload.createOnFileDrop("ConversationAvatarUploadController",{abortCurrentRequest:true})},posting_form_link_image:{onFileSelect:OK.photoUpload.createOnFileSelect("PostingFormLinkImageUploadController",{abortCurrentRequest:true}),onDrop:OK.photoUpload.createOnFileDrop("PostingFormLinkImageUploadController",{abortCurrentRequest:true})},motivator_image:{onFileSelect:OK.photoUpload.createOnFileSelect("MotivatorImageUploadController",{abortCurrentRequest:true}),onDrop:OK.photoUpload.createOnFileDrop("MotivatorImageUploadController",{abortCurrentRequest:true})},photowall:{onFileSelect:OK.photoUpload.createOnFileSelect("PhotoWallUploadController",{abortCurrentRequest:true}),onDrop:OK.photoUpload.createOnFileDrop("PhotoWallUploadController",{abortCurrentRequest:true})}});OK.photoLayer=(function(a,f){var c="photoLayerWrapper",e,b=function(d,g){if(g){g=parseInt(g,10);var k=e=Math.max(a.OK.photoLayer.minHeight,Math.min(Math.max(g,e||a.OK.photoLayer.minHeight),Math.min(window.innerHeight-(a.OK.photoLayer.commentsDelta||0),768)));if(d){d.style.height=k+"px";a.OK.logging.logger.durationScalar("photoLayer","availableSpace",parseInt(window.innerHeight-k,10));}var j=f.getElementById(c).querySelector(".plc");if(j){var l=Math.min(1024+j.offsetWidth,window.innerWidth);d.style.width=l+"px";return[l,k];}return[Math.min(1024,window.innerWidth),k];}};return{minHeight:480,loaderEnabled:true,hideElements:false,isFirst:true,isRotated:false,isGif:false,isLogTimeDiff:false,isLogPrematureClose:false,timeDiff:undefined,cancelPin:OK.fn.empty,cancelCrop:OK.fn.empty,isFullScreen:function(){return f.fullscreenElement||f.mozFullScreenElement||f.webkitFullscreenElement;},centerLayer:function(k,h,l,m){var j=OK.photoLayer.isGif,g=OK.photoLayer.isRotated,o=g?b(k,l):b(k,m);function d(p,s,u,r,q){if(p){var t=Math.max(1,Math.max(s/r,u/q));p.width=Math.round(s/t);p.height=Math.round(u/t);}}function n(){if(!g&&!j){h.style.maxWidth="";h.style.maxHeight="";h.style.marginTop="";return;}if(h.complete||j){var A=g?Math.min(l,o[1]):Math.min(m,o[1]),r=g?Math.min(m,o[0]):Math.min(l,o[0]),z=g?m/l:l/m,s=Math.min((1/z)*r,A),B=g?s:Math.round(s*z),C=g?Math.round(s*z):s,v=a.OK.photoLayer.isFullScreen(),D;var u,t;if(v){D=$(k).height();u=(g?Math.min(l,768):Math.min(l,1024));t=(g?Math.min(m,1024):Math.min(m,768));}else{u=B;t=C;}h.style.maxWidth=u+"px";h.style.maxHeight=t+"px";if(g&&C>B){if(v){h.style.marginTop="-"+((m-D)/2)+"px";}else{h.style.marginTop="-"+((C-o[1])/2)+"px";}}else{h.style.marginTop="";}if(j){var p=h;while(p){if(p.classList.contains("gif")){var y=parseInt(p.getAttribute("data-width"),10);var x=parseInt(p.getAttribute("data-height"),10);var w=p.getElementsByClassName("gif_preview")[0];var q=p.getElementsByClassName("gif_video")[0];d(w,y,x,u,t);d(q,y,x,u,t);break;}p=p.parentElement;}}return[h.style.maxWidth,h.style.maxHeight];}else{if(!j){a.setTimeout(n,10);}}}if(h&&!isNaN(l)&&!isNaN(m)){n();}},isShown:function(){var d=f.getElementById(c);if(d){return !d.classList.contains("invisible")&&!d.classList.contains("layer__disabled");}return false;},open:function(g,h){var d=f.getElementById(c);if(d){if(h){e=undefined;}a.OK.photoLayer.showLoader(500);a.OK.photoLayer.centerLayer(f.getElementById("pl_cw"),undefined,undefined,undefined);d.classList.remove("invisible","layer__disabled");d.classList.add("__active");a.OK.loader.use("jQuery",function(){$("#hook_Block_PhotoLayerFooterRB").show();a.OK.loader.use("OKPhotoLayer",function(){a.OK.photoLayer.init(d);});OK.loader.use(["OKCustomJs"],function(){if(h){OK.Layers.push(g);}else{OK.Layers.replace(g);}});});OK.VideoPlayer.pauseAll();}},close:function(){a.OK.photoLayer.isFirst=true;},showLoader:function(g,h){var d=f.getElementById(c);if(!this.loaderEnabled){return;}},hideLoader:function(d){if(d){a.OK.logger.error("photo.fs","load_error");}},toggleFullScreenButton:a.OK.fn.empty,hideFullScreenButton:a.OK.fn.empty,destroyFastNavigation:a.OK.fn.empty,showNextPhoto:a.OK.fn.empty};}(window,document));OK.tkn=(function(){var b="",c=function(d){this.token=d;},a=function(){return this.token;};return{set:c,get:a};}());OK.device=(function(){return{isTouch:("ontouchend" in window)};}());var flashVerForGWT=[0,0,0];var okFlashVersion=[0,0,0];var minimumFlashVersion=9;function displayFlashContainer(){var g=document;var l=g.getElementById("flashMainContainerDiv");if(l==null){return;}var k=l.style;var m=g.getElementById("flashOldFlashContainerDiv").style;var a=g.getElementById("flashNoFlashContainerDiv").style;c(k);c(m);c(a);try{var b=l.className.indexOf("apiNoFlashWarning")!=-1&&typeof window.postMessage!="undefined";if(!b&&okFlashVersion[0]<minimumFlashVersion){if(okFlashVersion[0]==0){h(a);}else{h(m);}}else{h(k);if(l.className.indexOf("apiNoHide")==-1){var j=document.getElementById("hook_PopLayer_popLayer");if(j!=null){k.visibility="hidden";}}}}catch(f){h(a);}function h(d){d.display="block";}function c(d){d.display="none";}}function from1x1(b,a){if("lcPlayerReady"===b){OK.flash.musicFlashReady=a;OK.flash.musicFlashExist=true;}}(function(k,b){try{var c=null,s="undefined",g="object",h="Shockwave Flash",a="ShockwaveFlash.ShockwaveFlash",o="application/x-shockwave-flash",q=[0,0,0],n=c,r=b.plugins,p=parseInt,f="$1";function j(){try{var v=a+".";for(var u=11;u>8;u--){try{var t=new ActiveXObject(v+u);var d=t.GetVariable("$version");return d;}catch(w){}}return c;}catch(w){return c;}}if(typeof r!=s&&typeof r[h]==g){n=r[h].description;var m=b.mimeTypes;if(n&&!(typeof m!=s&&m[o]&&!m[o].enabledPlugin)){n=n.replace(/^.*\s+(\S+\s+\S+$)/,f);q[0]=p(n.replace(/^(.*)\..*$/,f),10);q[1]=p(n.replace(/^.*\.(.*)\s.*$/,f),10);q[2]=/[a-zA-Z]/.test(n)?p(n.replace(/^.*[a-zA-Z]+(.*)$/,f),10):0;}}else{if(typeof k.ActiveXObject!=s){try{var n=j();if(n){n=n.split(" ")[1].split(",");q=[p(n[0],10),p(n[1],10),p(n[2],10)];}}catch(l){}}}k.okFlashVersion=q;k.flashVerForGWT=q;OK.onload.addCallback(function(){require(["OK/cookie"],function(d){d.setCookie("_flashVersion",q[0],30,"/");if(q[0]>0){d.setCookie("_flash7dVersion",q[0],7,"/");}});});}catch(l){}})(window,navigator);OK.il={handlers:{},ah:function(a){if(a&&a.handle&&a.id){var b=a.id;if(this.handlers[b]==null){this.handlers[b]=[];}this.handlers[b][this.handlers[b].length]=a;}},f:function(f,g,a){if(g&&this.handlers[g]){var e=this.handlers[g].length,b=this.handlers[g];for(var c=0;c<e;c++){var d=b[c];d.handle(f,a);}}},rh:function(c){if(c&&c.id){var g=c.id;if(this.handlers[g]==null||c.handlerId==null){return;}var d=this.handlers[g].length,a=this.handlers[g],e=c.handlerId,f=-1;for(var b=0;b<d;b++){var c=a[b];if(c.handlerId==e){f=b;break;}}if(f>-1){this.handlers[g].splice(f,1);}}}};OK.pf={};OK.toolbar={openMessaging:function(){OK.logging.logger.error("mt.e","openMessaging");},startVideoCall:function(){OK.logging.logger.success("mt.e","startVideoCall");}};(function(){var c,f,d,e,g,b;var a=function(h){if(f){f.removeClass("__selected");}d=h;f=$(c[d]);b=f.attr("id");f.addClass("__selected");};OK.ts={show:function(){f=null;d=null;c=$(".js-ts_it");if(b){prevIndex=c.index($("#"+b));if(prevIndex>=0){a(prevIndex);}}if(g){if(g.find(".layer_ovr").length==0){g.append('<div class="layer_ovr"></div>');}}},hide:function(){b=null;if(g){g.removeClass("__focus");g.find(".layer_ovr").remove();}},bind:function(h,k,j){OK.loader.use(["jQuery","OKCustomJs"],function(){var l=$("#field_query");var m=$("#toolbar_search_block");g=$("#toolbar_search");$("#topPanel").on("click.ts",function(n){if(!$.contains(m[0],n.target)){k();}});if(j){$(window).on("blur.ts",k);}l.keydown(function(o){switch(o.which){case 38:a(d==null?c.length-1:(d-1+c.length)%c.length);o.preventDefault();break;case 40:a(d==null?0:(d+1)%c.length);o.preventDefault();break;case 13:if(f){var n=f.find(".js-ts_link");if(n.length){n[0].click();o.preventDefault();OK.logging.logger.success("search.usage","ts_goto","result");}else{OK.logging.logger.success("search.usage","ts_goto","detailed");}}else{OK.logging.logger.success("search.usage","ts_goto","default");}break;}}).focus(function(n){g.addClass("__focus");g.append('<div class="layer_ovr"></div>');e=l.val().trim();if(OK.Layers.stack.length>0){OK.Layers.unregisterAll();}h(e);OK.logging.logger.success("search.usage","toolbarFocus",Math.min(e.length,4));}).keyup(function(o){var n=l.val().trim();if(e!=n){e=n;h(e);}o.stopPropagation();});m.delegate(".js-ts_it","mouseenter",function(o){var n=c.index($(o.currentTarget));if(n>=0){a(n);}}).delegate(".js-ts_it","mouseleave",function(n){if(f){f.removeClass("__selected");f=null;d=null;b="ts_def";}});});},unbind:function(){$("#topPanel").off(".ts");$(window).off(".ts");}};})();OK.scrollBar=function(){OK.scrollBar.width=document.getElementById("sc").offsetWidth-document.getElementById("sch").offsetWidth;};OK.setContentWidth=function(){var c=OK.scrollBar.width;var d=window.innerWidth-c;d=Math.max(1000,d);var b=document.getElementById("topPanel");var a=document.getElementById("hook_Block_BodySwitcher");if(a){a.style.width=d+"px";}if(b){b.style.width=d+"px";}};OK.scrollOnLoad=function(c){OK.scrollOnLoadHint=c;var b=parseInt(c,10);if(b){updateMinHeight(b);var a=("scrollRestoration" in history)&&("navigation" in performance)&&(performance.navigation.type===0);if(b===0||a){manualScroll(b);}require(["OK/utils/throttle"],function(d){window.addEventListener("resize",d(1000,function(){updateMinHeight(b);}));});}};function updateMinHeight(a){document.documentElement.style.minHeight=window.innerHeight+a+"px";}function manualScroll(a){history.scrollRestoration="manual";window.scroll(0,a);OK.onload.addCallback(function(){history.scrollRestoration="auto";});}OK.stop=function(a){a=a||window.event;if(a.type==="click"&&OK.clickLog.getCounter()>0){a["log-clicks"]=true;return false;}if(a.stopPropagation){a.stopPropagation();}else{a.cancelBubble=true;}return false;};OK.hardStopEvent=function(a){a=a||window.event;if(a.stopPropagation){a.stopPropagation();}else{a.cancelBubble=true;}return false;};OK.isStopped=function(a){a=a||window.event;return a&&a["log-clicks"];};OK.eventTarget=function(a){var a=a||window.event;var b;if(a.target){b=a.target;}else{if(a.srcElement){b=a.srcElement;}else{b=window.document;}}if(b.nodeType===3){b=b.parentNode;}return b;};OK.submit=function(b){var c=b;if(b.tagName.toLowerCase()!=="form"){c=b.parentNode;}if(document.createEvent){var a=document.createEvent("Event");a.initEvent("submit",true,true);c.dispatchEvent(a);}else{if(document.createEventObject){var a=document.createEventObject();c.fireEvent("onsubmit",a);}}};OK.userCache={_users:[],getFromUserCache:function(a){return this._users[a];},updateUserCache:function(b){for(var a in b){this._users[a]=b[a];}},getLinkOnUserAvatar:function(a){return"";}};OK.perf=(function(b){try{var d=[];var a=b.performance||b.msPerformance||b.webkitPerformance||b.mozPerformance;if(!a||!a.getEntriesByType){return{loggers:[],flush:OK.fn.empty};}function e(){var f=a.getEntriesByType("resource");for(var k=0;k<f.length;k++){var l=f[k];for(var g=0;g<d.length;g++){try{d[g](l);}catch(h){OK.logging.info(h);}}}(a.clearResourceTimings||a.webkitClearResourceTimings||OK.fn.empty).call(a);}if(a.clearResourceTimings||a.webkitClearResourceTimings){a.addEventListener&&a.addEventListener("webkitresourcetimingbufferfull",e);setInterval(e,5000);}setTimeout(e,1);return{loggers:d,flush:e};}catch(c){OK.onload(function(){OK.logging.logger.success("error.perf.bootstrap",typeof c,c.message);});}}(window));(function(c,e){try{var d=OK.logging.logger;var b=/http:\/\/([a-z0-9\.]+(?::\d+)?)\/getImage\?photoId=\d+&photoType=(\d+)/i;var a=/([a-zA-Z]+)\d*\.mycdn\.me/i;OK.perf.loggers.push(function(k){if(k.initiatorType==="img"&&k.name){var g=b.exec(k.name);if(g){var l=g[1];var h=g[2];var j=a.exec(l);if(j){l=j[1];}else{l="other";}d.duration("traceimg",k.domainLookupEnd-k.domainLookupStart,l,h+".dns");d.duration("traceimg",k.connectEnd-k.connectStart,l,h+".connect");d.duration("traceimg",k.responseStart-k.requestStart,l,h+".req");if(k.responseEnd>0){d.duration("traceimg",k.responseStart?(k.responseEnd-k.responseStart):0,l,h+".resp");d.duration("traceimg",k.responseEnd-k.startTime,l,h+".full");d.duration("traceimg",k.responseEnd-k.fetchStart,l,h+".fetch");}else{d.success("traceimg",l,h+".noresp");}}}});}catch(f){OK.onload(function(){OK.logging.logger.success("error.perf.traceimg-bootstrap",typeof f,f.message);});}}(window));(function(){try{var a={};OK.perf.loggers.push(function(c){if(c.initiatorType==="link"&&c.name&&~c.name.indexOf(".css")){a[c.name]=c;}});OK.perf.cssEntries=a;}catch(b){OK.onload(function(){OK.logging.logger.success("error.perf.css-bootstrap",typeof b,b.message);});}}(window));OK.showTopicInLayerOnClick=function(c,a,k,g,b,l,h,d){if(c){for(var j=OK.eventTarget(a);j&&j!=c;j=j.parentNode){if(j.tagName=="A"){return;}}}var f=document.getElementById("mtLayer");if(f){require(["OK/MediaLayer"],function(e){e.showTopicInLayer(k,g,b,false,"",null,null,false,l,h,false,d);});return OK.stop(a);}};OK.historyManager=OK.historyManager||{isHistorySupported:function(){return window.history&&window.history.pushState&&window.history.replaceState;},getState:function(){var a=location.pathname+location.search;if(!a){if(typeof __gwt_currentHistoryItem!="undefined"){a=__gwt_currentHistoryItem||"/";}else{a="/";}}return a;},replaceState:function(a){__gwt_currentHistoryItem=a;window.history.replaceState(a,document.title,a);},pushState:function(a){__gwt_currentHistoryItem=a;window.history.pushState(a,document.title,a);},_cache:{},putItemToCache:function(b,a){OK.historyManager._cache[b]=a;},back:function(){return window.history.back();}};OK.ntf={close:OK.fn.empty,lock:OK.fn.empty};OK.configurations=(function(){var a={};return{get:function(b){return new Promise(function(d){var c=a[b];if(c){d(c);}else{require(["OK/utils/utils"],function(e){e.ajax({url:"/web-api/pms",data:{name:b}}).done(function(g,f,h){a[b]=g;d(g);}).fail(function(){require(["OK/logger"],function(f){f.error("configurations.loading.error",b);});});});}});}};})();OK.VideoPlayer=OK.VideoPlayer||{};OK.VideoPlayer.likeVideoFromFlash=function(a){if(!window.navigateOnUrlFromJS){document.location.href="/";return;}require(["jquery"],function(c){var d=c(".controls-list .controls-list_lk[data-l-id="+a+"]:first"),b=c(".widget-list .controls-list_lk[data-id1="+a+"]:first");if(!b.length){b=c(".widget .controls-list_lk[data-id1="+a+"]:first");}b.length&&b.data("clickFromVideo",true);d.length&&d.click();b.length&&b.click();});};OK.VideoPlayer.toggleSubscriptionFromFlash=function(b,c,d,a){require(["OK/utils/utils"],function(e){e.ajax({url:"/dk",data:{cmd:"VideoSubscriptionBlock","st.vvs.action":c,"st.vvs.aid":b,"st._aid":a}}).done(e.updateBlockModelCallback).done(d);});};OK.VideoPlayer.answerOnPoll=function(b,a,c,d){require(["OK/utils/utils"],function(e){e.ajax({type:"POST",url:"/web-api/annotations/poll/answer",data:{movieId:b,questionId:a,answerId:c}}).done(d);});};OK.VideoPlayer.reshare=function(a,b){require(["OK/utils/utils"],function(c){c.ajax({type:"GET",url:"/web-api/video/reshare/"+a}).done(b);});};OK.VideoPlayer.joinGroup=function(a,b){require(["OK/utils/utils"],function(c){c.ajax({url:"/dk",data:{cmd:"videoCommand",a:"joinGroup",gid:a}}).done(b).fail(b);});};OK.VideoPlayer.subscribeProfile=function(a,b){require(["OK/utils/utils"],function(c){c.ajax({url:"/dk",data:{cmd:"videoCommand",a:"subscribeProfile",pid:a}}).done(b).fail(b);});};OK.VideoPlayer.OKVideoOpenUserUpload=function(){window.navigateOnUrlFromJS?window.navigateOnUrlFromJS("/video/myVideo"):document.location.href="/video/myVideo";};OK.VideoPlayer.addWatched=function(a){a=parseInt(a,10);OK.VideoPlayer.storage.addWatched(a);require(["OK/VideoVitrina"],function(b){b.colorMovieCard(a);});};OK.VideoPlayer.openProduct=function(a,b){require(["OK/utils/vanilla"],function(c){c.ajax({url:"/dk",data:{cmd:"PopLayer","st.cmd":"mall","st.layer.cmd":"PopLayerMallProduct","st.layer.productId":b.id,"st.layer.section":b.section,"st.layer.ePT":b.campaignId||"cn:shoppingtv"}}).then(function(d){c.updateBlockModelCallback(d);OK.VideoPromo.openMovieMini(a,"mallProduct");});});};OK.VideoPlayer.openLogin=function(){require(["OK/utils/vanilla"],function(a){a.ajax({url:"/dk",data:{cmd:"PopLayerLogin","st.cmd":"anonymMain","st.redirect":decodeURIComponent(OK.historyManager.getState())}}).then(a.updateBlockModelCallback);});};OK.VideoPlayer.storage=(function(){var q="_vp_",b=1000,c=500;var w=(function(){var B=new Date,y,A;try{(y=window.localStorage).setItem(B,B);A=y.getItem(B)==B;y.removeItem(B);return A&&y;}catch(z){}}());function k(y){try{return w&&JSON.parse(w.getItem(q+y));}catch(z){return null;}}function a(y,z){try{w&&w.setItem(q+y,JSON.stringify(z));}catch(A){}}function h(y){w&&w.removeItem(q+y);}function o(){return w&&w.length;}function f(A,y,z){A.push(z);while(A.length>y){A.shift();}return A;}var t=k("volume");var j=k("lastVideoQualityName");var n=k("cid");var g=k("lastSpeed");var u=k("lastVideoShowTime");var p=k("lastDayVideoShown");var l=k("lastDayAdvShown");var d=k("movielastPlayingTime")||[];var x=k("watchedMoviesCache")||[];var s=k("autoplayEnabled");var r=k("cinemaModeEnabled");var m=k("miniPlayerWidth");var e=k("miniPlayerTop");var v=k("miniPlayerLeft");return{getVolume:function(){return t;},setVolume:function(y){a("volume",t=y);},getLastVideoQualityName:function(){return j;},setLastVideoQualityName:function(y){a("lastVideoQualityName",j=y);},getCid:function(){return n;},setCid:function(y){a("cid",n=y);},getLastSpeed:function(){return g;},setLastSpeed:function(y){a("lastSpeed",g=y);},getLastVideoShowTime:function(){return u;},setLastVideoShowTime:function(y){a("lastVideoShowTime",u=y);},getLastDayVideoShown:function(){return p;},setLastDayVideoShown:function(y){a("lastDayVideoShown",p=y);},getLastDayAdvShown:function(){return l;},setLastDayAdvShown:function(y){a("lastDayAdvShown",l=y);},getMovieLastPlayingTime:function(z){d=Array.isArray(d)?d:[];z=parseInt(z,10);for(var A=0,y=d.length;A<y;A++){if(d[A].id===z){return d[A].time;}}return 0;},setMovieLastPlayingTime:function(z,C){d=Array.isArray(d)?d:[];z=parseInt(z,10);var B={id:z,time:C};for(var A=0,y=d.length;A<y;A++){if(d[A].id===z){d.splice(A,1);break;}}a("movielastPlayingTime",f(d,c,B));},isWatched:function(y){return x.indexOf(y)!=-1;},addWatched:function(y){a("watchedMoviesCache",f(x,b,y));},getAlreadySeenSimilar:function(y){return x.slice(-y);},isAutoplayEnabled:function(){return s!==false;},setAutoplayEnabled:function(y){a("autoplayEnabled",s=y);},isCinemaModeEnabled:function(){return !!r;},setCinemaModeEnabled:function(y){a("cinemaModeEnabled",r=y);},getMiniPlayerWidth:function(){return m;},setMiniPlayerWidth:function(y){a("miniPlayerWidth",m=y);},getMiniPlayerTop:function(){return e;},setMiniPlayerTop:function(y){a("miniPlayerTop",e=y);},getMiniPlayerLeft:function(){return v;},setMiniPlayerLeft:function(y){a("miniPlayerLeft",v=y);}};})();function likeVideoFromFlash(f){if(typeof navigateOnUrlFromJS!="function"){document.location.href="/";return;}var e=$("#"+f),d,a,c,b;for(;;){d=e.find(".klass_w");if(d.length>0){break;}e=e.parent();if(e.length==0){return;}}c=d.find("a.controls-list_lk")[0];if(c!=null){a=c.href;}else{c=d.find("span.controls-list_lk")[0];if(c!=null){a=c.getAttribute("data-href");b=c.getAttribute("data-l-p");if(b){a+="&st.v.cl="+b;}}}if(a){navigateOnUrlFromJS(a+"&st.v.ff=on");}}function OKVideoOpenUserUpload(){OK.VideoPlayer.OKVideoOpenUserUpload();}function runLinkedVideoCallbackFromJS(a){likeCallbackFromJs(a.callbackId+"Object",a.liked,a.likeCount);likeCallbackFromJs(a.callbackId+"E",a.liked,a.likeCount);likeCallbackFromJs("VideoPopup_player_"+a.callbackId+"Object",a.liked,a.likeCount);}function runLinkedVideoCallback(a){var b=document.getElementById("mc"+a.blockId);b.parentNode.removeChild(b);disableKlassByPlayerId(a.callbackId+"Object")||disableKlassByPlayerId(a.callbackId+"E")||disableKlassByPlayerId("VideoPopup_player_"+a.callbackId+"Object");}function runLinkedVideoCallbackU(a){var b=document.getElementById("mc"+a.blockId);b.parentNode.removeChild(b);runLinkedVideoCallbackFromJS(a);require(["jquery"],function(d){var c=d(".js-like-marker[data-l-id="+a.resourceId+"]");c.each(function(){var f=OK.hookModel.getNearestBlockHookId(this),e=d("#hook_Block_"+f);if(e.length){likeCallbackFromJs(e.data("playerId")+"E",a.liked,a.likeCount);}});});}function disableKlassByPlayerId(a){try{document.getElementById(a).disableKlassFromJs();}catch(b){}}function likeCallbackFromJs(b,c,a){try{document.getElementById(b).likeCallbackFromJs(c,a);}catch(d){}}OK.OpenVideoVitrina=function(a){a=a||"/dk?cmd=VideoVitrina&st.vv_ft=myVideo&st.vv_aux_page=1&st.vv_page=1&st.vv_how=on&st.cmd=userMain&st._aid=VAT_section_myVideo";(function b(){try{OK.hidePopLayerIfAny();var c=document.getElementById("hook_Block_VideoVitrina"),f=document.getElementById("vv-fast-template");if(c&&f){c.innerHTML=f.innerHTML;}navigateOnUrlFromJS(a);}catch(d){setTimeout(b,300);}})();};OK.VideoToolbarClick=function(e,a,f,d){a.onclick=null;if(f){var b=document.getElementById("hook_Block_PopLayerVideo"),c=document.getElementById("hook_Block_AutoplayLayerMovieRBlock");if(!b||!c||b.classList.contains("layer__disabled")){OK.restorePopLayerIfAny();}}else{a.className+=" toolbar_nav_a__video__active";OK.OpenVideoVitrina(d);}};OK.VVImageError=function(a){a.parentNode.removeChild(a);};OK.VVPromoImageError=function(a){var b=a.parentNode.parentNode;b.removeChild(a.parentNode);if(b.childNodes.length<3){b.parentNode.style.display="none";}};OK.VVImageOnLoad=function(b){var a=" vid-card__loading";for(var c=b;c&&typeof c.className!=="undefined";c=c.parentNode){if(c.className.indexOf(a)>=0){c.className=c.className.replace(a,"");break;}}};OK.VideoPlayer.playMovie=function(b,c,d,a){require(["OK/VideoAutoplayLayer"],function(e){e.playMovie(b,c,d,a);});};OK.VideoPlayer.openMovie=function(a,f,b,d,c,e,g){require(["OK/VideoAutoplayLayer"],function(j){var h={"st.vpl.id":a};if(f){h["st._aid"]=f;}if(e){h["st.cmd"]=e;}if(b){h["st.vpl.vs"]="album";h["st.vpl.albumId"]=b;}if(d){h["st.vpl.bu"]=d;}if(c){h["st.vpl.vs"]="collage";h["st.vpl.vp"]=c;}if(g){h["st.vpl.mini"]=true;}j.navigateToMovie("/dk?cmd=PopLayerVideo",h,a,true);});};OK.VideoPlayer.openShare=function(a,b){require(["OK/VideoAutoplayLayer"],function(d){var c={"st.vpl.sid":a};if(b){c["st._aid"]=b;}d.navigateToMovie("/dk?cmd=PopLayerVideo",c,a,true);});};OK.VideoPlayer.playNextMovie=function(c,d,e,b,f,a){require(["OK/VideoAutoplayLayer"],function(g){g.playNextMovie(c,d,e,b,f,a);});};OK.VideoPlayer.getNextMetadata=function(b,c,d,a,e){require(["OK/VideoAutoplayLayer"],function(f){f.getNextMetadata(b,c,d,a,false,e);});};OK.VideoPlayer.getNextMetadataSmall=function(b,c,d,a,e){require(["OK/VideoAutoplayLayer"],function(f){f.getNextMetadata(b,c,d,a,true,e);});};OK.VideoPlayer.toggleCinemaMode=function(a,c){if(!c&&a){c=a.slice(a.lastIndexOf("/")+1).replace(/(\?|&).*/,"");}if(!c){require(["OK/VideoAutoplayLayer"],function(d){OK.VideoPlayer.storage.setCinemaModeEnabled(d.toggleCinemaMode(true));});}else{var b="Open_Layer_From_Player";if(/^[0-9]+$/.test(c)){OK.VideoPlayer.openMovie(c,b);}else{OK.VideoPlayer.openShare(c,b);}}OK.VideoPlayer.closePopLayer();OK.logger.success("video.cinema",a?"middlesize":"toggle");};OK.VideoPlayer.pauseAll=function(){if(require.defined("OK/OKVideo")){require("OK/OKVideo").pause();}};OK.VideoPlayer.restart=function(b,a){if(require.defined("OK/OKVideo")){require("OK/OKVideo").retry(0,b,a);}};OK.VideoPlayer.stop=function(){if(require.defined("OK/OKVideo")){require("OK/OKVideo").stop();}};OK.VideoPlayer.changeAnnotations=function(a){if(require.defined("OK/OKVideo")){require("OK/OKVideo").changeAnnotations(a);}};OK.VideoPlayer.onPlay=function(e,b,c){if(window.require.defined("OK/music2/app")){var d=document.getElementById("music_layer");if(!e&&window.odklMusic&&d&&!OK.VideoPlayer._musicTrackId){OK.VideoPlayer._musicTrackId=window.odklMusic.playingTrack();if(OK.VideoPlayer._musicTrackId){d.pause();}}}else{if(window.require.defined("OK/music/player")){var a=window.require("OK/music/player");if(!e&&window.odklMusic&&a&&!OK.VideoPlayer._musicTrackId){OK.VideoPlayer._musicTrackId=window.odklMusic.playingTrack();if(OK.VideoPlayer._musicTrackId){a.pause();if(OK.VideoPlayer._volumeUpTimeout){clearTimeout(OK.VideoPlayer._volumeUpTimeout);OK.VideoPlayer._volumeUpTimeout=null;a.setVolume(Math.min(a.getVolume(),1));}}}}}};OK.VideoPlayer.onPause=function(a,g,f){if(window.require.defined("OK/music2/app")){var e=document.getElementById("music_layer");if(!a&&window.odklMusic&&e&&OK.VideoPlayer._musicTrackId){OK.VideoPlayer._musicTrackId=false;e.play();}}else{if(window.require.defined("OK/music/player")){var d=window.require("OK/music/player");if(!a&&d&&OK.VideoPlayer._musicTrackId&&!OK.VideoPlayer._volumeUpTimeout){var h=d.getVolume(),j=24,b=40;function c(k){var l=Math.min(h*Math.pow(k/j,2),1);OK.VideoPlayer._volumeUpTimeout=setTimeout(function(){d.setVolume(l);if(k<j){c(k+1);}else{OK.VideoPlayer._volumeUpTimeout=null;}},b);}OK.VideoPlayer._musicTrackId=false;d.setVolume(0);d.resume();c(1);}}}};OK.VideoPlayer.onEvent=function(a,b){require(["OK/utils/vanilla"],function(c){c.trigger(document,"__videoPlayerEvent",{name:a,data:b});});};OK.VideoPlayer.helpFeedback=function(a){require(["OK/utils/utils"],function(b){b.ajax({url:"/dk",data:{cmd:"PopLayer","st.layer.cmd":"PopLayerHelpFeedback","st.layer.categorynew":"SITE_SECTION","st.layer.subcategory":"VIDEO_AND_MUSIC","st.layer.categoryValue":"VIDEO","st.layer.origin":"VIDEO_LAYER","st.layer.badVideoLink":a||window.location.href}}).done(b.updateBlockModelCallback);});};OK.VideoPlayer.getRelated=function(d,c,a,b){require(["OK/utils/utils"],function(e){e.ajax({url:"/dk",data:{cmd:"videoCommand",a:"related",id:d,count:36,provider:c}}).done(a).fail(b);});};OK.VideoPlayer.yandexStat=function(a,d,c){var b={event:a};if(typeof d!=="undefined"){switch(a){case"volumechange":b.volume=d;break;default:b.time=d;}}if(typeof c!=="undefined"){switch(a){case"error":b.code=c;break;case"rewound":b.previousTime=c;break;case"adShown":case"started":case"timeupdate":b.duration=c;break;case"volumechange":b.muted=c;break;}}window.parent.postMessage(b,"*");};OK.VideoPlayer.watchLater=function(d,b,a,c){require(["OK/utils/utils"],function(e){e.ajax({url:"/dk",data:{cmd:"VideoWatchLaterBlock","st.vvwl.action":b?"watchLater":"removeWatchLater","st.vvwl.movieId":d}}).done(a).fail(c);});};OK.VideoPlayer.yandexError=function(b,c){var a=0;switch(b&&b.toLowerCase().replace(/_/g,"")){case"movienotready":case"uploading":case"creating":case"processing":case"offline":case"livenotstarted":case"liveended":case"onmoderation":a=100;break;case"moviedeleted":case"groupnotfound":case"usernotfound":a=101;break;case"blocked":case"censored":a=102;break;case"notfound":a=103;break;case"copyrightsrestricted":a=150;break;case"accessdenied":case"groupaccessdenied":case"closedprofile":case"limitedaccess":case"movienoaccess":case"weberrornoaccess":a=151;break;case"videoembeddisabled":case"videoembeddisabledpartner":a=152;break;case"videoembeddisabledcountry":case"movieunavailableforregion":a=153;break;case"player":a=5;break;default:a=0;break;}OK.VideoPlayer.yandexStat("error",c||0,a);};OK.VideoPlayer.closePopLayer=function(){OK.hookModel.setHookContent("PopLayer","");};OK.VideoPromo=OK.VideoPromo||{};OK.VideoPromo.MESSAGE_NAME="_okPromoMessage";OK.VideoPromo.sendMessage=function(b,d){if(d&&d.chatId){var a=document.getElementById(d.chatId);if(a&&a.api.isOnline()){if(b==="playVideo"){a.api.getChat().sendCall("ONLINE");}else{if(b==="closeVideo"){a.api.getChat().sendCall("OFFLINE");}}}}var c={type:b,data:d,_random:(Math.random()*100000000000).toFixed(0)};window.localStorage.setItem(OK.VideoPromo.MESSAGE_NAME,JSON.stringify(c));window.localStorage.removeItem(OK.VideoPromo.MESSAGE_NAME);};OK.VideoPromo.openMovieMini=function(a,b){OK.VideoPlayer.openMovie(a,b,null,null,null,null,true);};OK.VideoPromo.openMovieSameState=function(a,b){require(["OK/OKVideo"],function(c){OK.VideoPlayer.openMovie(a,b,null,null,null,null,c.hasMiniPlayer());});};