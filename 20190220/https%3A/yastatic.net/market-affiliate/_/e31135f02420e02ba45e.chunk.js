(window.affiliateWebpackJsonp=window.affiliateWebpackJsonp||[]).push([[48],{"5td8":function(e,t,n){"use strict";n.r(t),n.d(t,"addMetaToStats",function(){return f}),n.d(t,"getTTFBStartTimestampMs",function(){return w}),n.d(t,"getTTFBEndTimestampMs",function(){return y}),n.d(t,"getPageGaugeAsync",function(){return b}),n.d(t,"sendGaugeToMetrika",function(){return O});var r=n("1bIv"),s=n.n(r),i=n("PkvF"),a=n.n(i),o=n("9CEO"),c=n.n(o),u=n("EyQl"),d=n.n(u),h=n("JVNZ"),l=n.n(h),m=n("wD/d"),p=n("AJGt");const g=window.performance.timing,_=e=>a()(s()("portions"),(e=>d()(c()({meta:e})))(e)),f=(e,t)=>d()(_(e),t),w=()=>g.requestStart,y=()=>g.responseStart,b=e=>m.a.then(()=>{const t=new l.a;return t.addPortion(e,{name:"ttfb",timestamp:w(),duration:y()-w()}),t.addPortion(e,{name:"domContentLoaded",timestamp:g.domContentLoadedEventStart,duration:g.domContentLoadedEventEnd-g.domContentLoadedEventStart}),t.addPortion(e,{name:"loaded",timestamp:g.loadEventStart,duration:g.loadEventEnd-g.loadEventStart}),t}),O=(e,t={})=>Object(p.getWidgetsMetrikaChannelAsync)().then(n=>{n.emit("gaugeReachGoal",f(t,e.getStats()))})},AJGt:function(e,t,n){"use strict";n.r(t);var r=n("qD9R"),s=n.n(r),i=n("8HVD"),a=n.n(i),o=n("siwH"),c=(n("rGqo"),n("oqR8")),u=n.n(c),d=n("O4OM"),h=n.n(d),l=n("5b5N"),m=n.n(l),p=n("rOAg"),g=n.n(p),_=n("uhBA"),f=n.n(_),w=n("xGAd");const y="__ymarket_affiliate_iframe_radio_channels_registry__";function b(e){return e[y]||(e[y]=new Map),e[y]}class O{}function v(e){let t=[window.top,...function e(t){const n=[];for(let r=0;r<t.frames.length;r++)n.push(t.frames[r]),n.push(...e(t.frames[r]));return n}(window.top)];return e&&(t=u()(window,t)),t}function q(e,t){let n=null;return Promise.race([e,new Promise((e,r)=>{n=setTimeout(()=>{r(new O)},t)})]).then(e=>(clearTimeout(n),e)).catch(e=>{throw clearTimeout(n),e})}function M(e){return Object(w.c)(e)?e:()=>e}function E(e,t,n="*"){e.postMessage(Object(o.c)(t),n)}function j(e,t=!1){v(t).forEach(t=>{let n=!0;try{n=b(t).has(e.channelName)}catch(e){}n&&E(t,e)})}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}q.Error=O;const T="pong",S="request",C="response",k="event",G=window.location.origin;var R=class{constructor(e){P(this,"_processIncomingMessage",e=>{const t=this._getMessageFromEvent(e);t&&g()(t.type,[k,S])&&(t.type===k?this._processEventMessage(t):this._processRequestMessage(e,t))}),this._objId=Object(o.d)(),this._name=e,this._allowedOrigins=[],this._emitter=new f.a,this._requestsCount=0,this._requestsHandlers={},window.addEventListener("message",this._processIncomingMessage)}getName(){return this._name}setOrigins(...e){return this._allowedOrigins=m()(e),this}addOrigins(...e){return this._allowedOrigins=h()(this._allowedOrigins,m()(e)),this}removeOrigins(...e){return this._allowedOrigins=u()(m()(e),this._allowedOrigins),this}_createEventMessage(e,t){return{type:k,channelName:this._name,payload:{type:e,params:t}}}_createRequestMessage(e,t){return{type:S,channelName:this._name,payload:{id:this._createRequestId(),type:e,params:t}}}_createRequestId(){return`${this._objId}_req_${this._requestsCount++}`}_createResponseMessage(e,t){return{type:C,channelName:this._name,payload:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){P(e,t,n[t])})}return e}({requestId:e},t)}}_processEventMessage({payload:e}){this._emitter.emit(e.type,...e.params)}_processRequestMessage({source:e,origin:t},{payload:n}){const r=this._requestsHandlers[n.type];r&&Promise.resolve(r(...n.params)).then(e=>this._createResponseMessage(n.id,{result:e})).catch(e=>this._createResponseMessage(n.id,{error:e})).then(n=>{E(e,n,t===String(null)?"*":t)})}_isOriginAllowed(e){const t=this._allowedOrigins.concat(G);return g()(String(e),t)||g()("*",t)}_getMessageFromEvent(e){if(!this._isOriginAllowed(e.origin))return;let t;try{t=Object(o.b)(e.data)}catch(e){return}return Object(w.d)(t)&&this._name===t.channelName&&t.payload?t:void 0}on(e,t){return this._emitter.on(e,t),this}once(e,t){return this._emitter.once(e,t),this}off(e,t){return t?this._emitter.removeListener(e,t):e?this._emitter.removeAllListeners(e):this._emitter.removeAllListeners(),this}emit(e,...t){return j(this._createEventMessage(e,t)),this}broadcast(e,...t){return j(this._createEventMessage(e,t),!0),this}reply(e,t){return this._requestsHandlers[e]=M(t),this}replyOnce(e,t){return this._requestsHandlers[e]=((...n)=>(delete this._requestsHandlers[e],M(t)(...n))),this}stopReplying(e){return e?delete this._requestsHandlers[e]:this._requestsHandlers={},this}request(e,...t){return new Promise((n,r)=>{const s=this._createRequestMessage(e,t),i=e=>{const t=this._getMessageFromEvent(e);if(!t||t.type!==C)return;const{requestId:a,result:o,error:c}=t.payload;s.payload.id===a&&(c?r(c):n(o),window.removeEventListener("message",i))};window.addEventListener("message",i),j(s)})}ping({attempts:e=50,wait:t=100,message:n=T}){return this._ping({attempts:e,wait:t,message:n}).catch(r=>{if(r instanceof q.Error){const r={channel:this._name,message:n,attempts:e,wait:t};throw new Error(`ping not respond ${JSON.stringify(r)}`)}throw r})}_ping({attempts:e,wait:t,message:n}){return q(this.request(this._getPingRequestType(n)),t).catch(r=>{if(r instanceof q.Error&&e>0)return this._ping({attempts:e-1,wait:t,message:n});throw r})}_getPingRequestType(e){return`__ping__${e}`}pong(e=T){return this.reply(this._getPingRequestType(e),e)}};var A={channel(e,t){const n=b(window);let r=n.get(e);return r||(r=new R(e),n.set(e,r)),t&&r.setOrigins(t),r}},I=n("Y1bS"),L=n("Md8M");var N=n("SCIf"),H=n("RFTm");n.d(t,"initWidgetsMetrika",function(){return $}),n.d(t,"getWidgetsMetrikaChannel",function(){return J}),n.d(t,"getWidgetsMetrikaChannelAsync",function(){return D}),n.d(t,"getMetrikaCounterFacade",function(){return W});const F=window.performance.timing,$=()=>{const e=(({name:e,src:t})=>{const n=document.createElement("iframe");return n.name=e,n.src=Object(o.a)(t,{startTime:F.requestStart}),n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",n})({name:H.a,src:Object(N.a)("widgetsMetrikaUrl")});document.body.appendChild(e)},J=a()(()=>A.channel(H.a,Object(N.b)())),D=a()(()=>{const e=J();return e.ping(H.b).then(()=>e)}),W=s()(e=>new class extends L.a{constructor(e,t){super(t);const{ping:n,attempts:r,wait:s}=this._options;n?this._checkCounter(e,r,s):this._init(this._getCounter(e))}_checkCounter(e,t,n){if(0===t)return this._inited=!1,void Object(I.a)(`counter ${e} is not initialized!`);const r=this._getCounter(e);r?(this._init(r),this._flushQueue()):setTimeout(()=>this._checkCounter(e,t-1,n),n)}_getCounter(e){return window[`yaCounter${e}`]}_init(e){this._counter=e,this._inited=!0}_reachGoal(...e){this._counter.reachGoal(...e)}}(e))},Md8M:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n("rGqo");class r{constructor({ping:e=!0,attempts:t=60,wait:n=1e3}={}){this._inited=null,this._queue=[],this._options={ping:e,attempts:t,wait:n}}_flushQueue(){this._queue.forEach(e=>this._reachGoal(...e)),this._queue=[]}_reachGoal(e,t){throw new Error("You must implement this method!")}reachGoal(...e){!0===this._inited?this._reachGoal(...e):null===this._inited&&this._queue.push(e)}}},Y1bS:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return s});const r=e=>console.warn(e),s=e=>console.error(e)},eVUD:function(e,t,n){"use strict";n.r(t);n("rGqo");var r=n("JVNZ"),s=n.n(r),i=n("3uge"),a=n("5td8");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c={requestId:"dummyRequestId"},u=({type:e,params:t})=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e})({widgetType:e},Object(i.b)(e=>`widgetParam_${e}`,t)),d=async e=>{let t;try{t=await e}catch(e){return null}const n=new s.a,r=u(t.meta.params);for(const[e,s]of Object.entries(t.meta.timers)){const i={name:e,timestamp:s.begin,duration:s.end-s.begin,meta:{info:r}};n.addPortion("scriptApi",i),n.addPortion(`scriptApi_widgetType_${t.type}`,i)}return n};t.default=(({scriptApiInitTime:e,widgets:t})=>{(async()=>{const e=await Object(a.getPageGaugeAsync)("partnerPage");Object(a.sendGaugeToMetrika)(e,c)})(),(async e=>{const t=await Promise.all(e.map(d)).then(e=>e.filter(Boolean));Object(a.sendGaugeToMetrika)(s.a.merge(...t),c)})(t),(e=>{const t=new s.a,n=window.performance.timing.responseStart;t.addPortion("partnerPage",{name:"scriptApiInit",timestamp:n,duration:e-n}),Object(a.sendGaugeToMetrika)(t,c)})(e)})}}]);