var Gnb=jindo.$Class({_Jindo:null,_bIsMenuOpen:null,_sMenuCloseCookieKey:null,_welBody:null,_welAside:null,_welWarp:null,_welFooter:null,_welGnb:null,_welMenuButton:null,_welMenuScrollBox:null,_welMyArea:null,_oMenuScrollBox:null,_oMenuMorph:null,_htMenuElement:null,_MenuMode:null,_cookie:null,$init:function(){this._validate()&&(this._Jindo=jindo,this._cookie=this._Jindo.$Cookie(),this._htMenu={},this._sMenuCloseCookieKey="NTC_MenuClose",this._bIsMenuOpen=!this.getIsCurrentMenuClose(),this._welBody=this._Jindo.$Element(document.body),this._welAside=this._Jindo.$Element("aside"),this._welWarp=this._Jindo.$Element("wrap"),this._welGnb=this._Jindo.$Element("gnb"),this._welFooter=this._Jindo.$Element("footer"),this._welMenuButton=this._Jindo.$Element("menuButton"),this._welMenuScrollBox=this._Jindo.$Element("menuScrollBox"),this._welMyArea=this._Jindo.$Element("myArea"),this._oMenuMorph=new this._Jindo.Morph({bUseTransition:!1,fEffect:this._Jindo.Effect.linear}),this._MenuMode=new MenuMode,this._initAutoComplete(),this._loadGnbTemplate(),this._initWcs(),this._initLcs(),this._initMenu(),this._initEvent())},_validate:function(){try{if("undefined"==typeof jindo)throw new ReferenceError("jindo is not defined");return!0}catch(e){return alert(e.message),!1}},_initMenuVariable:function(){var welBase=this._welAside,welExclusiveMenu=(this._Jindo.$Element(this._Jindo.$$.getSingle("._categoryMenuFoldState",welBase)),this._Jindo.$Element(this._Jindo.$$.getSingle("._exclusiveMenu",welBase))),welExclusiveMenuFoldState=this._Jindo.$Element(this._Jindo.$$.getSingle("._exclusiveMenuFoldState",welBase));this._Jindo.$Element(this._Jindo.$$.getSingle("._smrBrandMenu",welBase));this._htMenu.category={},this._htMenu.category.sCookieKey="NTC_CMF",this._htMenu.exclusive={},this._htMenu.exclusive.welMenu=welExclusiveMenu,this._htMenu.exclusive.welMenuFoldState=welExclusiveMenuFoldState,this._htMenu.exclusive.sCookieKey="NTC_TMF",this._htMenu.smrBrand={},this._htMenu.smrBrand.sCookieKey="NTC_SMF"},_initAutoComplete:function(){this._Jindo.LazyLoading.load(ghtGnb.sAutoComplete,this._Jindo.$Fn(function(){new nhn.Autocomplete(new nhn.AcInputManager(jindo.$("searchQuery")),new nhn.AcDataManager(ghtGnb.sRequestUrl,"jsonp","get",{st:"111",frm:"tvcast",r_lt:"011"}),new tvcast.pc.AcViewManager(jindo.$("acView"),jindo.$("acButton"),{listMax:[10,10,10],strMax:100,buttonImg:{show:"https://ssl.pstatic.net/img.tvcast/pc/img/srch_arrow_up5.png",hide:"https://ssl.pstatic.net/img.tvcast/pc/img/srch_arrow_down5.png",unuse:"https://ssl.pstatic.net/img.tvcast/pc/img/srch_arrow_down5.png"},sAutoTemplateImageTag:ghtGnb.sAutoTemplateImageTag}),{formId:"searchForm",cookieName:"tvcast.autocomplete"})},this).bind())},_loadGnbTemplate:function(){var sGnbTemplateUrl="https://ssl.pstatic.net/static.gn/templates/gnb_utf8.nhn?"+this._getDate();this._Jindo.LazyLoading.load(sGnbTemplateUrl,this._Jindo.$Fn(this._initGnbTemplate,this).bind())},_getDate:function(){return Date.now=Date.now||function(){return+new Date},new this._Jindo.$Date(Date.now()).format("Ymd")},_initGnbTemplate:function(){var sLogoutUrl=encodeURIComponent(window.location.href);window.gnb_option={gnb_service:"tvcast",gnb_template:"gnb_utf8",gnb_logout:sLogoutUrl,gnb_one_naver:1,gnb_one_flat:1};try{window.getGNB()}catch(e){}},_initWcs:function(){this._Jindo.LazyLoading.load("https://ssl.pstatic.net/img.tvcast/pc/js/wcslog.js",function(){wcs_add||(window.wcs_add={}),window.wcs_add.wa="a05a5e9b5b3a48";try{window.wcs_do()}catch(ex){}})},_initLcs:function(){var etc={};"undefined"==typeof ghtEnv||"channel"!==ghtEnv.sPageName&&"clipEnd"!==ghtEnv.sPageName||!ghtEnv.sDisplayChannelId||(etc.chid=ghtEnv.sDisplayChannelId);try{lcs_do(etc)}catch(ex){}},_initMenu:function(){this._initMenuVariable(),this.respondMenu(),this._initStudio(),this._initMy(),this._initBrand(),this._initSmrBrand(),this._initFold(),this._initMenuScrollBox(),this._initMenuBanner()},_initEvent:function(){this._initWindowEvent(),this._initSearchEvent(),this._initMenuEvent(),this._initMouseOverEvent(),this._initScrollEvent()},respondMenu:function(){this._isExpandMode()?this.toggleMenu(!1):this._bIsMenuOpen&&this._MenuMode.getIsMenuMode()?this.toggleMenu(!0):this.toggleMenu(!1)},_isExpandMode:function(){return this._welBody.hasClass("end_cinema")},_initMenuScrollBox:function(){this._welMenuScrollBox&&(this._oMenuScrollBox=new this._Jindo.ScrollBox(this._welMenuScrollBox,{sClassPrefix:"scrollbar-",bAdjustThumbSize:!0,sOverflowX:"hidden",sOverflowY:"auto",nDelta:50}),this._setMenuScrollBoxHeight())},_initMenuBanner:function(){var welMenuBannerArea=this._Jindo.$Element(this._Jindo.$$.getSingle(".menu_da"));if(welMenuBannerArea){var awelMenuBanner=welMenuBannerArea.queryAll("a");if(0<awelMenuBanner.length)awelMenuBanner[Math.floor(Math.random()*awelMenuBanner.length)].show()}},_initSearchEvent:function(){this._Jindo.$Element("searchForm").attach("submit",this._Jindo.$Fn(this._searchEventHandler,this).bind()),this._Jindo.$Element("searchButton").attach("click",this._Jindo.$Fn(this._searchEventHandler,this).bind()),this._Jindo.$Element("searchButtonAll").attach("click",this._Jindo.$Fn(this._searchEventHandler,this).bind())},_searchEventHandler:function(oEvent){var sSearchQuery=this._getSearchQuery();if(sSearchQuery){var elSearchQuery=$Element(this._Jindo.$("searchQuery")),sSearchType=elSearchQuery.data("searchType"),sDisplayChannelId=elSearchQuery.data("displayChannelId"),sUrl="";"searchButtonAll"===this._Jindo.$Element(oEvent.element).attr("id")?(sUrl="/search?query="+sSearchQuery+"&page=1",window.clickcr(oEvent.element,"STA.sall","","",oEvent)):sSearchType&&"general"!==sSearchType?"channel"===sSearchType?(sUrl="/"+sDisplayChannelId,window.clickcr(oEvent.element,"STA.schannel","","",oEvent)):"tag"===sSearchType&&(sUrl="/search/clip?query="+sSearchQuery+"&page=1&isTag=true",window.clickcr(oEvent.element,"STA.stag","","",oEvent),window.TagAZ.tagClick(decodeURIComponent(sSearchQuery),"gnbSearch","")):(sUrl="/search?query="+sSearchQuery+"&page=1",window.clickcr(oEvent.element,"STA.search","","",oEvent)),location.href=sUrl}return this._Jindo.$Event(oEvent).stop(),!1},_getSearchQuery:function(){var elSearchQuery=this._Jindo.$("searchQuery"),sSearchQuery=this._Jindo.$S(elSearchQuery.value).trim().$value();return""===sSearchQuery?(alert("검색어를 입력해주세요."),elSearchQuery.focus(),!1):(100<sSearchQuery.length&&(alert("정확한 검색을 위해서 약 100자 이내의 검색 결과를 제공합니다."),sSearchQuery=sSearchQuery.substring(0,100)),encodeURIComponent(sSearchQuery))},_initWindowEvent:function(){var welWindow=this._Jindo.$Element(window);welWindow.attach("click",this._Jindo.$Fn(this._clickEventHandler,this).bind()),welWindow.attach("resize",this._Jindo.$Fn(this._resizeEventHandler,this).bind())},_clickEventHandler:function(oEvent){var welSource=this._Jindo.$Element(oEvent.element);try{welSource.isChildOf(this._welGnb)||window.gnbAllLayerClose()}catch(e){}},_resizeEventHandler:function(){this._setMenuScrollBoxHeight()},_setMenuScrollBoxHeight:function(){if(!window.ghtEnv||!window.ghtEnv.beginFullscreen){var oMenuScrollBox=this.getMenuScrollBox(),nMenuHeight=this._Jindo.$Element("aside").height()-this._Jindo.$Element("header").height();oMenuScrollBox.setSize(180,nMenuHeight)}},_initMenuEvent:function(){this._welAside.attach("click@._click",this._Jindo.$Fn(this._menuClickEventHandler,this).bind()),this._welMenuButton.attach("click",this._Jindo.$Fn(this._menuButtonClickEventHandler,this).bind()),this._welMenuButton.attach("mouseover",this._Jindo.$Fn(this._menuButtonMouseOverEventHandler,this).bind(!0)),this._welMenuButton.attach("mouseout",this._Jindo.$Fn(this._menuButtonMouseOverEventHandler,this).bind(!1))},_menuClickEventHandler:function(oEvent){var elSource=oEvent.element,sEventType=jindo.$Element(elSource).data("event");"foldCategoryMenu"===sEventType&&this._toggleFold(this._htMenu.category,sEventType,oEvent),"foldExclusiveMenu"===sEventType&&this._toggleFold(this._htMenu.exclusive,sEventType,oEvent),"foldSmrBrandMenu"===sEventType&&this._toggleFold(this._htMenu.smrBrand,sEventType,oEvent)},_toggleFold:function(htData,sEventType,oEvent){var bIsMenuOpen=this._isMenuOpen(htData);bIsMenuOpen?(this._unfoldMenu(htData),this._cookie.remove(htData.sCookieKey)):(this._foldMenu(htData),this._cookie.set(htData.sCookieKey,"ON",30)),this._sendFoldMenuClickCode(bIsMenuOpen,sEventType,oEvent),this._setMenuScrollBoxHeight()},_foldMenu:function(htData){htData.welMenuFoldState&&htData.welMenuFoldState.html("접기"),htData.welMenu&&htData.welMenu.addClass("open")},_unfoldMenu:function(htData){htData.welMenuFoldState&&htData.welMenuFoldState.html("펼침"),htData.welMenu&&htData.welMenu.removeClass("open")},_isMenuOpen:function(htData){return htData.welMenu.hasClass("open")},_sendFoldMenuClickCode:function(bIsOpen,sType,oEvent){var fClickcr=window.clickcr,elSource=oEvent.element;void 0!==fClickcr&&(bIsOpen?("foldCategoryMenu"===sType&&clickcr(elSource,"mnu.cfold","","",oEvent),"foldExclusiveMenu"===sType&&clickcr(elSource,"mnu.efold","","",oEvent)):("foldCategoryMenu"===sType&&clickcr(elSource,"mnu.copen","","",oEvent),"foldExclusiveMenu"===sType&&clickcr(elSource,"mnu.eopen","","",oEvent)),"foldSmrBrandMenu"===sType&&clickcr(elSource,"mnu.sfold","","",oEvent))},_initFold:function(){for(sKey in this._htMenu){var htData=this._htMenu[sKey];this._cookie.get(htData.sCookieKey)?this._foldMenu(htData):this._unfoldMenu(htData),htData.welMenu&&htData.welMenu.show()}},toggleMenu:function(bIsMenuOpen){var sLeft="",sPaddingLeft="",afterDisplay="",self=this;afterDisplay=bIsMenuOpen?(sLeft="0px",sPaddingLeft="180px","show"):(sLeft="-180px",sPaddingLeft="0px","hide"),this._oMenuMorph.clear(),this._welAside.visible()&&this._oMenuMorph.pushCall(function(){self._welMenuScrollBox.show()}).pushAnimate(150,[this._welAside,{"@left":sLeft},this._welWarp,{"@padding-left":sPaddingLeft},this._welFooter,{"@padding-left":sPaddingLeft}]).pushCall(function(){self._welMenuScrollBox[afterDisplay]()}),this._oMenuMorph.play(),this._toggleMenuButton(bIsMenuOpen),this._toggleMenuCookie(bIsMenuOpen)},_toggleMenuButton:function(bIsMenuOpen){bIsMenuOpen?(this._welMenuButton.removeClass("close"),this._welMenuButton.addClass("open")):(this._welMenuButton.removeClass("open"),this._welMenuButton.addClass("close"),$Cookie().get("NTC_MNBTN")||($Fn(function(){this._welMenuButton.addClass("over")},this).delay(.5),$Fn(function(){this._welMenuButton.removeClass("over")},this).delay(2.5))),this._welMenuButton.show()},_toggleMenuCookie:function(bIsOpen){bIsOpen?this._cookie.remove(this._sMenuCloseCookieKey):this._cookie.set(this._sMenuCloseCookieKey,"ON",30)},_menuButtonClickEventHandler:function(){var bIsCurrentMenuClose=this.getIsCurrentMenuClose();this.toggleMenu(bIsCurrentMenuClose),this.setIsMenuOpen(bIsCurrentMenuClose);var menuTxt=this._welMenuButton.query("._menu_txt");bIsCurrentMenuClose?(clickcr(this,"mnu.open","",""),menuTxt.html("메뉴 접기")):(clickcr(this,"mnu.close","",""),menuTxt.html("메뉴 열기")),$Cookie().set("NTC_MNBTN","true",365,".tv.naver.com")},getIsCurrentMenuClose:function(){return!!this._cookie.get(this._sMenuCloseCookieKey)},setIsMenuOpen:function(bIsMenuOpen){this._bIsMenuOpen=bIsMenuOpen},_menuButtonMouseOverEventHandler:function(bIsMouseOver){this.getIsCurrentMenuClose()&&(bIsMouseOver?this._welMenuButton.addClass("over"):this._welMenuButton.removeClass("over"))},_initMouseOverEvent:function(){var welScrollBar=this._Jindo.$Element(this._oMenuScrollBox.getScrollBarVertical().elThumb);this._welMenuScrollBox.attach("mouseover",this._Jindo.$Fn(this._mouseOverEventHandler,this).bind(welScrollBar)),this._welMenuScrollBox.attach("mouseleave",this._Jindo.$Fn(this._mouseLeaveEventHandler,this).bind(welScrollBar))},_mouseOverEventHandler:function(welScrollBar){this._oMenuScrollBox.isNeededScrollBarVertical()&&welScrollBar.addClass("visible")},_mouseLeaveEventHandler:function(welScrollBar){welScrollBar.removeClass("visible")},_initScrollEvent:function(){this._Jindo.$Element(window).attach("scroll",this._Jindo.$Fn(this._scrollEventHandler,this).bind())},_scrollEventHandler:function(){var scroll=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,welHeader=this._Jindo.$Element("header");scroll<28?welHeader.hasClass("transparent")&&welHeader.removeClass("transparent"):28<=scroll&&(welHeader.hasClass("transparent")||welHeader.addClass("transparent"))},_initStudio:function(){var sUrl="/api/menu/studio.json?"+this.getNow();0!=("true"==this._welMyArea.data("login"))&&this._Jindo.$Ajax(sUrl,{type:"xhr",method:"get",onload:this._Jindo.$Fn(function(res){var result=res.json();result&&result.header&&"success"===result.header.code&&this._Jindo.$Element("menuStudio").show()},this).bind()}).request()},_initMy:function(){if(1==("true"==this._welMyArea.data("login"))){this._loadMy(5)}},_loadMy:function(nCount){var sUrl="/fragment/menu/my?"+this.getNow(),wfMyEventHandler=this._Jindo.$Fn(this._loadMyEventHandler,this).bind();this._Jindo.$Ajax(sUrl,{type:"xhr",method:"get",onload:wfMyEventHandler}).request({count:nCount})},_loadMyEventHandler:function(res){this._welMyArea.html(res.text()),this.getMenuScrollBox().reset()},_initBrand:function(){var themeId="";"undefined"!=typeof ghtEnv&&(themeId=ghtEnv.themeId),void 0===themeId&&(themeId="");var sUrl="/fragment/menu/brand?themeId="+themeId,wfLoadBrandlEventHandler=this._Jindo.$Fn(this._loadBrandEventHandler,this).bind();this._Jindo.$Ajax(sUrl,{type:"xhr",method:"get",onload:wfLoadBrandlEventHandler,onerror:function(){}}).request()},_loadBrandEventHandler:function(res){var welBrand=this._Jindo.$Element("brandArea").query("._brand"),sHtml=this._Jindo.$S(res.text()).trim().$value();sHtml&&(welBrand.html(sHtml),this.getMenuScrollBox().reset())},_initSmrBrand:function(){var wfLoadSmrBrandlEventHandler=this._Jindo.$Fn(this._loadSmrBrandEventHandler,this).bind();this._Jindo.$Ajax("/fragment/menu/smrBrand",{type:"xhr",method:"get",onload:wfLoadSmrBrandlEventHandler,onerror:function(){}}).request()},_loadSmrBrandEventHandler:function(res){var welSmrBrand=this._Jindo.$Element("smrBrandArea").query("._smrBrand"),sHtml=this._Jindo.$S(res.text()).trim().$value();sHtml&&(welSmrBrand.html(sHtml),this.getMenuScrollBox().reset())},getMenuScrollBox:function(){return this._oMenuScrollBox},getNow:function(){return Date.now=Date.now||function(){return+new Date},Date.now()}}),MenuMode=jindo.$Class({_MENU_MODE_WIDTH:1376,_bIsMenuMode:!0,$init:function(){},isChangeToMenuMode:function(){return this.getCurrentWidth()>=this._MENU_MODE_WIDTH&&!this.getIsMenuMode()},isChangeToNormalMode:function(){return!!(this.getCurrentWidth()<this._MENU_MODE_WIDTH&&this.getIsMenuMode())},setIsMenuMode:function(bIsMenuMode){this._bIsMenuMode=bIsMenuMode},getIsMenuMode:function(){return this._bIsMenuMode},getCurrentWidth:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}});