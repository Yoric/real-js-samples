var kmap=new (function jsAnalyzXML(){var A=[],C=this,F=location.protocol.toLowerCase()==="https:",D="https://img.store.sogou.com/";var B;function E(){var G=$s.$("searchForm"),O=[];if(G){var K=G.getElementsByTagName("input"),M={dp:true,p:true,_ast:true,_asf:true};for(var I=0;I<K.length;I++){var N=K[I];if(N.type=="hidden"&&N.value&&N.name&&!M[N.name]){O.push(N.name+"="+N.value)}}}if(!O.length){var P=window.location.toString().split("?")[1].split("&"),L=["hdq","pid","w","mfp","lxea"],J=["duppid=1","duppid=1","dr=1"],I=0,H;O=["ie=utf8"];for(I=0;I<L.length;I++){for(H=0;H<P.length;H++){if(P[H].indexOf(L[I]+"=")==0){if(I==0){I++}O.push(P[H]);if(J[I]){O.push(J[I])}break}}}}O.push("p=71330100&dp=1&s_from=kmap");O[0]="?"+(O[0]||"");A=O}this.getUrlParam=function(){var I=window.location.toString().split("?")[1].split("&"),K=["hdq","pid","w","mfp","lxea"],L=["duppid=1","duppid=1","dr=1"],J=0,H;var G=[""];for(J=0;J<K.length;J++){for(H=0;H<I.length;H++){if(I[H].indexOf(K[J]+"=")==0){if(J==0){J++}G.push(I[H]);if(L[J]){G.push(L[J])}break}}}G.push("p=71330100&dp=1");B=G.join("&");return B};this.parseXML=function(H){var G;if(window.DOMParser){G=new DOMParser().parseFromString(H,"text/xml")}else{G=new ActiveXObject("Microsoft.XMLDOM");G.async="false";G.loadXML(H)}return G.documentElement};this.xml2json=function(I){var L,H;H=G(I);L=J(H,{});function G(N){var M;if(window.DOMParser){M=new window.DOMParser().parseFromString(N,"text/xml")}else{M=new ActiveXObject("Microsoft.XMLDOM");M.async="false";M.loadXML(N)}return(M.nodeType==9)?M.documentElement:M}function K(O,Q){var M,P,N;for(P=0,N=O.length;P<N;P++){M=O[P];if(M.nodeType===2){Q[M.nodeName]=M.value}}}function J(M,P){if(!M){return{}}P=P||{};var V=M.nodeType,W=M.nodeName,T=M.nodeValue;if(V==1){var Q,N,S=M.childNodes,U,O,R;K(M.attributes,P);for(Q=0,N=S.length;Q<N;Q++){U=S[Q];R=U.nodeName;O=J(U,{});if(typeof O==="string"){P._text=O}else{if(typeof O==="object"){if(P[R]){if(!(P[R] instanceof Array)){P[R]=[P[R]]}P[R].push(O)}else{P[R]=O}}}}return P}else{if(V===3||V===4){if(!(/^\s+$/.test(T))){return T}}}}return L};this.splicelink=function(L,I,H,G,J,N,K){if(!A.length){E()}var M=A.concat(["query="+encodeURIComponent(L)]);if(I){M.push("oriId="+I)}if(H){M.push("clickId="+H)}if(G){M.push("clickArea="+G)}if(J){M.push("kmaptype="+encodeURIComponent(J))}if(typeof (N)!="undefined"){M.push("pos="+N)}if(typeof (K)!="undefined"){M.push("songpos="+K)}return M.join("&")};this.first=function(H,G){if(H){return H.getElementsByTagName(G)[0]}return null};this.all=function(H,G){if(H){return H.getElementsByTagName(G)}return null};this.attr=function(I,H){if(!I){return""}var G=I.getAttribute(H);if(!G&&H.indexOf("id")>=0){G=I.getAttribute("sg2oids")}return G||""};this.tagtext=function(G){if(!G||G.firstChild==null){return""}return G.firstChild.nodeValue};this.tagtxt=function(I){if(!I||!I.firstChild){return""}for(var G=0;G<I.childNodes.length;G++){var H=I.childNodes[G];if(H.nodeType==4){return H.nodeValue}}return I.firstChild.nodeValue};this.pos=function(H){var G=H.offsetLeft,I=H.offsetTop;while(H=H.offsetParent){G+=H.offsetLeft;I+=H.offsetTop}return[G,I]};this.feedlink=function(L,M,I,H,K,J){var G=$s.$c("a",L,M);G.href="#";G.innerHTML=H||"¾À´í";G.setAttribute("hidefocus",true);G.style.outline="none";if(K){if(J){G.parentNode.style.display="none"}else{G.style.display="none"}}return G};this.hidefocus=function(G,I,H,J){G.href=H;G.innerHTML=I;G.setAttribute("hidefocus",true);G.style.outline="none";G.target="_blank";G.id=J};this.getImgLink=function(G){return typeof $s.httpsUtil=="undefined"?G:$s.httpsUtil.getCdnImgLink(G)};this.imghandle=function(K,L,J,G){L=this.getImgLink(L);var H="/images/kmap/default"+((G==90)?90:70)+".png";K.onerror=function(){K.src=H;K.style.visibility="visible";K.style.marginLeft="0px";K.style.marginTop="0px";return };K.src=L||H;K.onload=function(){K.style.visibility="hidden";I(K);K.style.visibility="visible"};function I(M){if(M.height==0){setTimeout(function(){I(M)},50);return }if(J!=M.width){var N=Math.floor((M.width-J)/2);K.style.marginLeft=(-N)+"px"}if(G!=M.height){var N=Math.floor((M.height-G)/2);K.style.marginTop=(-N)+"px"}}};this.imageHandle=function(L,M,I,G){if(!/^data:image/.test(M)){M=this.getImgLink(M)}var H="/images/kmap/default"+((G==90)?90:70)+".png";L.onerror=function(){L.src=H;L.style.visibility="visible";L.style.marginLeft="0px";L.style.marginTop="0px";L.width=I;return };L.onload=function(){L.style.visibility="hidden";K(L,I,G);L.style.visibility="visible"};L.src=M||H;function K(O,N,P){if(O.height==0){setTimeout(function(){K(O,N,P)},50);return }var Q=J(O.width,O.height,N,P);O.style.marginLeft=-Q.ml+"px";O.style.marginTop=-Q.mt+"px";if(Q.height){O.height=Q.height}if(Q.width){O.width=Q.width}}function J(O,R,N,Q){var T,P,S={};if(R*N<O*Q&&(R>Q||O>N)){O=O*Q/R;T=(O-N)/2;P=0;if(R!=Q){S.height=Q}}else{R=R*N/O;P=R-Q;if(P>R*0.16){P=R*0.08}else{P/=2}T=0;if(O!=N){S.width=N}}S.ml=parseInt(T);S.mt=parseInt(P);return S}};this.len=function(G){if(G){return G.replace(/<.*?>/g,"").replace(/[^\x00-\xff]/g,"rr").replace(/&nbsp;/g," ").length}return 0};this.cutLength=function(J,G,H,I){H=H||"..";I=I||2;if(this.len(J)>G){do{J=J.substring(0,J.length-1)}while(J&&(this.len(J)+I>G));if(J.lastIndexOf("</")!=J.lastIndexOf("<")){J=J.substring(0,J.lastIndexOf("<"))+J.substring(J.lastIndexOf(">")+1)}return J+H}return J};this.q2b=function(M){try{var H=[],I=0,G=M.length,K,J;for(;I<G;I++){K=M.charCodeAt(I);if(K>65280&&K<65375){H.push(String.fromCharCode(K-65248))}else{H.push(M.charAt(I))}}return H.join("")}catch(L){return M}};this.dommouseact=function(J,I,G,H){J.onmouseover=function(){H.className=G};J.onmouseout=function(){H.className=I}};this.tupudissatisfied=function(J,L,H,G,I){var K=$s.$(J);K.target="_blank";if($s.$(L)){K.scenehtml.value=$s.$(L).outerHTML}else{K.scenehtml.value=""}K.content.value=H;K.side.value=G||"";K.product.value=I||"";K.action="/complain/tupu/front/index.php";K.submit()};this.kmapPB=function(I,H){var G=[];G.push(location.protocol+"//pb.sogou.com/pv.gif?uigs_productid=kmap&type=",I,H);G.push("&sab=",sab,"&k_uuid=",uuid,"&gbkQuery=",encodeURIComponent(gbkQuery));if(typeof uigs_para!="undefined"){G.push("&scrnwi="+uigs_para.scrnwi+"&scrnhi="+uigs_para.scrnhi);if(I=="left"||I=="right"){G.push("&abtestid=",uigs_para.abtestid,"&query=",encodeURIComponent(uigs_para.query),"&loc=",uigs_para.loc,"&uigs_uuid=",uigs_para.uigs_uuid)}}(new Image()).src=G.join("")};this.speedStat=function(G){return };this.cutRankList=function(H){var I=$s.$("right"),G=$s.$("main"),K,J;if(!I||!G){return }K=I.scrollHeight;J=G.scrollHeight;if(K<J+45){return }if(H){H.style.display="none"}};this.cutAds=function(){var O=$s.$("right"),K=$s.$("main"),G,N,L,H=[],I,J;if(!O||!K){return }G=O.scrollHeight;N=K.scrollHeight;L=$s.$$(O,"div");for(var M=0;M<L.length;M++){if(((L[M].id=="bdfs0"&&L[M].className=="b_rb")||L[M].className=="bizr_rb")&&L[M].style.display!="none"){H.push(L[M])}}if(!H){return }I=Math.ceil((G-N)/90);J=(H.length-I<=0)?1:H.length-I;for(var M=J;M<H.length;M++){if(H[M]){H[M].style.display="none"}}};this.cutQueryList=function(O){if(!O){return }var P=$s.$("right"),K=$s.$("main"),G,N,H,L=[],M=[],J,I;if(!P||!K){return }G=P.scrollHeight;N=K.scrollHeight;if(G>N){O.style.display="none"}};this.cutRight=function(){var P=$s.$("kmap_entity_div");if(!P){return }var O=$s.$("right"),H=$s.$("main");if(!O||!H||!H.scrollHeight){return }var G=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(O.scrollHeight<G){return }if(O.scrollHeight>H.scrollHeight){var J=P.getElementsByTagName("ul");for(var L=J.length,K=L-1;K>=0;K--){var N=J[K];var M=N.previousSibling;while(M&&M.nodeType!=1){M=M.previousSibling}N.style.display="none";M&&(M.style.display="none");if(O.scrollHeight+50<H.scrollHeight){break}}if(K==0){P.style.display="none"}else{if(K<0){P.style.display="none";var I=$s.$("kmap_relation_div");I&&(I.style.display="none")}}}}})();