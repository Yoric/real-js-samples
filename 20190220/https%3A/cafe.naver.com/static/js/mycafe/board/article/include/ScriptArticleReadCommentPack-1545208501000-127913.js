if(typeof nhn=="undefined"){nhn={};}(function(){nhn.LineStickerLayer=function(a,b){b=b||{};b.sImgBaseUrl=b.sImgBaseUrl||"/";b.sPackListAPI=b.sPackListAPI||"/gfmarket_sticker/StickerPackListAsync.nhn";b.sStickerListAPI=b.sStickerListAPI||"/gfmarket_sticker/StickerListAsync.nhn";b.sStickerShopUrl=b.sStickerShopUrl||g_sGfmarketDomain+"/sticker/Home.nhn";b.sSmsAPI=b.sSmsAPI||"/Send.nhn";b.isExpandMode=b.isExpandMode||false;b.sSmsNum=b.sSmsNum||this._sSmsPlaceholder;if(b.isExpandMode){b.tabCount=24;}else{b.tabCount=16;}this.htOptions=b;this._assignHTMLObjects(a);return this;};nhn.LineStickerLayer.prototype={_sSmsPlaceholder:"휴대폰번호를 입력하세요",_rxSms:/^([0-9\-]+)$/,_assignHTMLObjects:function(a){this._elLayer=a||jindo.$$.getSingle("div.se2_line_layer");this._elPrevBtn=jindo.$$.getSingle(".se2_prev",this._elLayer)||jindo.$$.getSingle(".se2_prev_off",this._elLayer);this._elNextBtn=jindo.$$.getSingle(".se2_next",this._elLayer)||jindo.$$.getSingle(".se2_next_off",this._elLayer);},getLayer:function(){return this._elLayer;},show:function(){if(!this._htPack){this._requestPackList();}this._elLayer.style.display="block";},hide:function(){this._elLayer.style.display="none";},_requestPackList:function(){new jindo.$Ajax(this.htOptions.sPackListAPI,{method:"get",onload:jindo.$Fn(this._onLoadPackList,this).bind()}).request();},_onLoadPackList:function(f){var d=f.json();this._htPack={};this.tabOnName=d.info.tabOnName;this.tabOffName=d.info.tabOffName;this.previewName=d.info.previewName;for(var e=0,c=[],b;(b=d.list[e]);e++){c.push('<li><button class="_sticker_tab" type="button" data-value="',b.packCode,'"><img src="',this.htOptions.sImgBaseUrl,"/",b.packCode,"/",this.tabOffName,'"',' alt="',b.packCode,'"></button><div class="se2_linesticker_list" style="display:none"></div></li>');b.seq=e;this._htPack[b.packCode]=b;}c.push('<li><span class="line_icon_new"><span class="blind">New</span></span><button class="_btn_shop" type="button" data-value="shop" style="display: block;"><img src="https://ssl.pstatic.net/static/cafe//editor/linesticker/line_shop.png" alt="shop" width="34" height="29"></button><div class="se2_linesticker_list" style="display:none"></div></li>');this._elTabContainer=jindo.$$.getSingle("UL.se2_line_sticker_set",this._elLayer);this._elTabContainer.innerHTML=c.join("");this._aelTabBtn=jindo.$$("LI>BUTTON._sticker_tab",this._elTabContainer);this._aelTabContent=jindo.$$("LI>DIV",this._elTabContainer);for(var e=0,g;(g=this._aelTabBtn[e]);e++){jindo.$Fn(this._onClickTab,this).attach(g,"click");}var a=jindo.$$.getSingle("LI>BUTTON._btn_shop",this._elTabContainer);jindo.$Fn(this._onClickShopBtn,this).attach(a,"click");jindo.$Fn(this._onPrev,this).attach(this._elPrevBtn,"click");jindo.$Fn(this._onNext,this).attach(this._elNextBtn,"click");this._setTabView(0,this.htOptions.tabCount);this._onClickTab({element:this._aelTabBtn[0]});},_onClickShopBtn:function(a){window.open(this.htOptions.sStickerShopUrl,"_blank");if(typeof this.htOptions.onClickMoveShop==="function"){this.htOptions.onClickMoveShop.apply(this);}},_onPrev:function(a){var b=this._nCurrentStart-this.htOptions.tabCount;this._setTabView(b,this.htOptions.tabCount);},_onNext:function(a){var b=this._nCurrentStart+this.htOptions.tabCount;this._setTabView(b,this.htOptions.tabCount);},_setTabView:function(e,b){if(b<1){return;}if(e<1){e=0;this._elPrevBtn.disabled=true;this._elPrevBtn.className="se2_prev_off";}else{this._elPrevBtn.disabled=false;this._elPrevBtn.className="se2_prev";}this._nCurrentStart=e;var a=this._aelTabBtn,d=a.length,f=e+b;if(f>=d){this._elNextBtn.disabled=true;this._elNextBtn.className="se2_next_off";}else{this._elNextBtn.disabled=false;this._elNextBtn.className="se2_next";}for(var c=0;c<d;c++){a[c].style.display=(c<e||c>=f)?"none":"block";}},_onClickTab:function(c){var d=(c.element.tagName=="IMG")?c.element.parentNode:c.element,h=d.getAttribute("data-value"),a=this._htPack[h],e=a.seq;for(var b=0,g;(g=this._aelTabBtn[b]);b++){if(d===g){g.firstChild.src=g.firstChild.src.replace(this.tabOffName,this.tabOnName);g.parentNode.className="active";}else{if(g.firstChild.src.indexOf(this.tabOffName)==-1){g.firstChild.src=g.firstChild.src.replace(this.tabOnName,this.tabOffName);}g.parentNode.className="";}}for(var b=0,f;(f=this._aelTabContent[b]);b++){if(b===e){f.style.display="block";if(f.innerHTML===""){this._requestStickerList(h);}}else{f.style.display="none";}}},_requestStickerList:function(a){new jindo.$Ajax(this.htOptions.sStickerListAPI,{onload:jindo.$Fn(this._onLoadStickerList,this).bind(a,this._htPack[a].packUrl),method:"POST"}).request({packCode:a});},_onLoadStickerList:function(e,a,f){var d=f.json(),g=[],b,l=this._htPack[e];l.htSticker={};g.push("<ul>");for(var c=0,m,k,j,h;(m=d.list[c]);c++){k=-(m.seq-1)%3*108;j=-(Math.ceil(m.seq/3)-1)*100;h=(!k?"0 ":k+"px ")+(!j?"0":j+"px");g.push('<li><button type="button" data-value="',m.stickerCode,'" style="background:url(\'',this.htOptions.sImgBaseUrl+"/"+l.packCode+"/"+this.previewName,"') ",h,' no-repeat"><span>',m.stickerCode,"</span></button></li>");m.imageUrl=m.originalUrl;m.marketStickerId=m.stickerCode+"-"+m.imageWidth+"-"+m.imageHeight;l.htSticker[m.stickerCode]=m;}g.push("</ul>");b=this._aelTabContent[l.seq];b.innerHTML=g.join("");b.style.display="block";jindo.$Element(b).delegate("click","BUTTON",jindo.$Fn(this._onClickSticker,this).bind(e));},_onClickSticker:function(f,b){var c=b.element,e=c.getAttribute("data-value"),a=this._htPack[f],d=a.htSticker[e];if(typeof this.htOptions.onClickSticker==="function"){this.htOptions.onClickSticker.apply(this,[d]);}},_onFocusSmsInput:function(a){if(this._elSmsInput.value===this._sSmsPlaceholder){this._elSmsInput.value="";}},_onBlurSmsInput:function(a){if(!this._elSmsInput.value){this._elSmsInput.value=this._sSmsPlaceholder;}},_requestSms:function(a){a.stop();var b=this._elSmsInput.value;if(!b||b===this._sSmsPlaceholder){alert("받는 사람 번호를 입력해주세요.");return;}else{if(!this._rxSms.test(b)){alert("숫자만 입력 가능합니다.");return;}}b=b.replace(/-/g,"");new jindo.$Ajax(this.htOptions.sSmsAPI,{method:"post",onload:jindo.$Fn(this._onLoadSms,this).bind(),onerror:function(c){alert("문자 전송에 실패했습니다.\n다시 시도해 주세요.");}}).header("If-Modified-Since","Thu, 1 Jan 1970 00:00:00 GMT").request({RECV_PHONE:b});},_onLoadSms:function(b){var a=jindo.$Json.fromXML(b.text()).$value();a=a.RESULT||a;if(!a){alert("문자 전송에 실패했습니다.\n다시 시도해 주세요.");return;}switch(a.RESULT_CD){case"S":alert("전송에 성공하였습니다.\n휴대폰 문자 메시지함을 확인해 주세요.\n(남은 발송 가능 건 수 : "+a.LIMIT_CNT+"건)");break;case"B":alert("받는 사람 번호를 입력해주세요.");break;case"C":alert("휴대폰 번호 형식이 잘못 되었습니다.");break;case"E":alert("남은 발송 가능 건 수는 0건입니다.");break;case"I":alert("서비스별 문자 전송은 동일번호 일 3건까지 발송 가능합니다.");break;default:alert("문자 전송에 실패했습니다.\n다시 시도해 주세요.");break;}}};})();var CafePaginate=Class({elPage:null,_pageno:1,_pageSize:100,_pageGrpSize:10,_totalCnt:0,_tpl:null,_bChangePage:false,__init:function(a){this.elPage=cssquery.getSingle("> div.cc_paginate",a.elTarget||$("cmt_paginate"));this._tpl=CafeCommentTemplate.paginate;},action:function(c){var a=c.tagName.toLowerCase(),d=c.className.split(" "),b=d[d.length-1];switch(b){case"_goPage":this.goPage(parseInt(c.innerHTML,10));break;case"_goNext":this.goNextGrp();break;case"_goEnd":this.goLastPage();break;case"_goPrev":this.goPrevGrp();break;case"_goTop":this.goFirstPage();break;default:return false;}this.setChangePage(true);},setChangePage:function(a){this._bChangePage=a;},isChangePage:function(){return this._bChangePage;},page:function(){if(this._totalCnt<=this._pageSize){this._hidePaginate();}else{this.elPage.innerHTML=this.getPageHTHL();this._showPaginate();}},getPageNo:function(){return this._pageno;},setPageNo:function(a){this._pageno=a;},getTotalCnt:function(){return this._totalCnt;},setTotalCnt:function(a){this._totalCnt=a;},getPageSize:function(){return this._pageSize;},setPageSize:function(a){this._pageSize=a;},setPaging_tpl:function(a){this._tpl=a;},_hidePaginate:function(){if(this.elPage){Element.hide(this.elPage);}},_showPaginate:function(){if(this.elPage){Element.show(this.elPage);}},getCurrentPageNo:function(){return this._pageno;},_getCurrentGrpStartNo:function(){return((this._getCurrentGrpNo()-1)*this._pageGrpSize)+1;},_getCurrentGrpEndNo:function(){var a=this._getCurrentGrpStartNo()+this._pageGrpSize-1;if(a>this._getLastPageno()){a=this._getLastPageno();}return a;},_getCurrentGrpNo:function(){return Math.ceil(this._pageno/this._pageGrpSize);},_getLastPageno:function(){var a=this._totalCnt/this._pageSize;a=Math.floor(a);if(this._totalCnt%this._pageSize!=0){a++;}return a;},_hasPrevGrp:function(){return(this._getGroupFirstPageNo()>this._pageGrpSize)?true:false;},_hasNextGrp:function(){return(this._getGroupFirstPageNo()>(this._getLastPageno()-this._pageGrpSize))?false:true;},_getGroupFirstPageNo:function(){var a=(this._pageno%this._pageGrpSize==0)?(this._pageno/this._pageGrpSize)-1:(this._pageno/this._pageGrpSize);if(a<=0){a=0;}return Math.floor(a)*this._pageGrpSize+1;},goFirstPage:function(){this._pageno=1;},goLastPage:function(){this._pageno=this._getLastPageno();},goPrevPage:function(){this._pageno--;if(this._pageno<1){this._pageno=1;}},goNextPage:function(){this._pageno++;if(this._pageno>this._getLastPageno()){this._pageno=this._getLastPageno();}},goPrevGrp:function(){var a=((this._getCurrentGrpEndNo()%this._pageGrpSize)!=0)?(this._getCurrentGrpEndNo()%this._pageGrpSize):this._pageGrpSize;this._pageno=this._getCurrentGrpEndNo()-a;if(this._pageno<1){this._pageno=1;}},goNextGrp:function(){this._pageno=this._getCurrentGrpStartNo()+this._pageGrpSize;if(this._pageno>this._getLastPageno()){this._pageno=this._getLastPageno();}},goPage:function(a){this._pageno=a;},getPageHTHL:function(){var b=[];if(this._hasPrevGrp()){b.push(this._tpl.top);b.push(this._tpl.prev);}for(var c=this._getCurrentGrpStartNo();c<this._getCurrentGrpEndNo()+1;c++){var a=(this._getGroupFirstPageNo()==c)?"first":"page";var d=(this._pageno==c)?"select":"unselect";var e=a+"_"+d;b.push($T(this._tpl[e],{pageno:c}));}if(this._hasNextGrp()){b.push(this._tpl.next);b.push(this._tpl.end);}return b.join("");}});function $T(b,a){return b.replace(/{([^{}]*)}/g,function(d,c){return(typeof a[c]=="undefined")?"{"+c+"}":a[c];});}Function.prototype.bind=function(){var d=this,b=$A(arguments),c=b.shift();return function(){d.apply(c,b.concat($A(arguments)));};};var CafeCommentComponent=Class({option:function(c,b){if(!this._htOption){this._htEventHandler={};this._htOption={};this._htOption._htSetter={};}switch(typeof c){case"undefined":return this._htOption;case"string":if(typeof b!="undefined"){if(c=="htCustomEventHandler"){if(typeof this._htOption[c]=="undefined"){this.attach(b);}else{return this;}}this._htOption[c]=b;if(typeof this._htOption._htSetter[c]=="function"){this._htOption._htSetter[c](b);}}else{return this._htOption[c];}break;case"object":for(var a in c){if(a=="htCustomEventHandler"){if(typeof this._htOption[a]=="undefined"){this.attach(c[a]);}else{continue;}}this._htOption[a]=c[a];if(typeof this._htOption._htSetter[a]=="function"){this._htOption._htSetter[a](c[a]);}}break;}return this;},fireEvent:function(b,k){k=k||{};var d=this["on"+b],c=this._htEventHandler[b]||[],h=typeof d=="function",g=c.length>0;if(!h&&!g){return true;}c=c.concat();k.sType=b;if(typeof k._aExtend=="undefined"){k._aExtend=[];k.stop=function(){if(k._aExtend.length>0){k._aExtend[k._aExtend.length-1].bCanceled=true;}};}k._aExtend.push({sType:b,bCanceled:false});var f=[k],e,j;for(e=2,j=arguments.length;e<j;e++){f.push(arguments[e]);}if(h){d.apply(this,f);}if(g){var a;for(e=0,a;(a=c[e]);e++){a.apply(this,f);}}return !k._aExtend.pop().bCanceled;},attach:function(c,a){if(arguments.length==1){arguments[0].each(function(d,e){this.attach(e,d);}.bind(this));return this;}var b=this._htEventHandler[c];if(typeof b=="undefined"){b=this._htEventHandler[c]=[];}b.push(a);return this;},detach:function(e,b){if(arguments.length==1){arguments[0].each(function(f,g){this.detach(g,f);}.bind(this));return this;}var d=this._htEventHandler[e];if(d){for(var a=0,c;(c=d[a]);a++){if(c===b){d=d.splice(a,1);break;}}}return this;},detachAll:function(c){var b=this._htEventHandler;if(arguments.length){if(typeof b[c]=="undefined"){return this;}delete b[c];return this;}for(var a in b){delete b[a];}return this;}});var CafeComment=Class.extend(CafeCommentComponent,{_elComment:null,__init:function(a){if(typeof a!="undefined"){this.option(a);this.__initVar(a);this._setEvent();}this._bShowList=true;this._bindDarkSkinClass();this.oEntry.oCommentAttach.initializeForAttachImage("attachImageBtn",a.articleid);},__initVar:function(a){var b=$(a.targetId);this.option("elTarget",b);this.option("elMenu",$(a.cmtMenuId));this.option("elIframe",$(a.iframeId));this.option("elError",cssquery.getSingle("> div.reply_error",b));this.option("elList",cssquery.getSingle("> ul.cmlist",b));this.oLineStickerComment=null;this.oPage=new CafePaginate({elTarget:b});this.oMenu=new CafeCommentMenu(this);this.oInput=new CafeCommentInput({elTarget:b,elInput:cssquery.getSingle("table.cminput",b),activityStopMember:a.activityStopMember,acitivtyStopAlertMsg:a.acitivtyStopAlertMsg});this.oEntry=new CafeCommentEntry(this);this.oEntry.htOption=this.option();},_setEvent:function(){this._elComment=$("comment");if(this._elComment){Event.register(this._elComment,"click",this.clickComment.bindForEvent(this));}},_bindDarkSkinClass:function(){try{var b=parent.document.body.className.split(" ");if(b.has("skin_dark")){Element.addClass(document.body,"skin_dark");}}catch(a){}},clickComment:function(a){this.oMenu.enableComment();},update:function(){var oOptions=this.option(),sURL=$T(oOptions.listURL,{clubid:oOptions.clubid,menuid:oOptions.menuid,articleid:oOptions.articleid});if(this.oPage.isChangePage()){CafeCommentUtil.saveScrollTop(Element.realPos(oOptions.elTarget).top);}var ajax=new Ajax(sURL,{method:"POST",params:{"search.page":this.oPage.getPageNo(),"search.orderby":oOptions.sortMode},suspend:true,charset:"euc-kr",onLoad:function(res){try{if(typeof res==undefined||res==null||!res.responseText){JEagleEyeClient.raiseError(ex,this,{message:" Comment  response error. :"+res});}var oRes;if(typeof(JSON)=="object"&&typeof(JSON.parse)=="function"){oRes=JSON.parse(res.responseText);}else{oRes=eval("("+res.responseText+")");}if(oRes.isSuccess=="true"){this._process(oRes);}else{switch(oRes.errorMsg){case"failToGetCmt":this.showError();this.oInput.hide();break;default:break;}}}catch(ex){JEagleEyeClient.raiseError(ex,this,{message:"comment"+res.responseText});throw ex;}this._resizeCover();}.bind(this)});ajax.request();},_process:function(b){var a=b.result;this.oMenu.updateMenu(a.commentCount);this.fireEvent("beforelist");var d=this.option("elTarget"),c=this._getListStr(a.list,a.secret);this._setListStr(c);if(this._bShowList){Element.show(d);}this._bShowList=true;this.fireEvent("finishlist");this.oPage.setTotalCnt(a.totalCount);this.oPage.setPageSize(a.countPerPage);this.oPage.setPageNo(a.currentPage);this.oPage.page();if(this.oPage.isChangePage()){CafeCommentUtil.restoreScrollTop();}this.oPage.setChangePage(false);this._removeFontCSS();this._applyFontCSS(a.fontCSSURL);this.hideError();this.oInput.show();if(!this.option("bEvtSetted")){this._setInitEvt();this.option("bEvtSetted",true);}this.oInput.update();if(this.option("readOnlyStatus")=="true"){initRosEvent();}a=b=null;},_setListStr:function(b){var a=this.option("elList");if(a){a.innerHTML=b;}},_applyFontCSS:function(b){if($Agent().IE&&b){var a=document.getElementsByTagName("head")[0];var d=document.createDocumentFragment();var c=document.createElement("link");c.href=b;c.rel="stylesheet";c.type="text/css";c._webfont=true;d.appendChild(c);a.appendChild(d);}},_removeFontCSS:function(){if($Agent().IE){var a=document.getElementsByTagName("head")[0];var b=Element.query("link",a);b.each(function(c){if(c._webfont){a.removeChild(c);}});}},_getListStr:function(d,b){var a=[];var f=d.length;var e=this.option();for(i=0;i<f;i++){var h=d[i];var c=new CafeCommentEntry;c.htOption=e;var g=c.getString(h,b);if(g){a.push(g);a.push(CafeCommentTemplate.line);}h=g=c=null;}return a.join("");},show:function(){Element.show(this.option("elTarget"));this._resizeCover();},hide:function(){Element.hide(this.option("elTarget"));this._resizeCover();},showError:function(){var a=this.option("elError");if(a){Element.show(a);}},hideError:function(){var a=this.option("elError");if(a){Element.hide(a);}},_resizeCover:function(){try{CafeCommentUtil.reHeightIf(parent.document.getElementById("cafe_main"));this._resizePopup();}catch(a){JEagleEyeClient.raiseError(a,this,{message:"_resizeCover() "});}},_setInitEvt:function(){var a=this.option("elTarget");if(a){Event.register(a,"click",this._onClick.bindForEvent(this));}},_resizePopup:function(){var j=parent.document.getElementById("popup_div");if(j==null){return;}var d=this.option("elTarget");var n=792;var o=parseInt(d.clientHeight+270,10);if(o>682){o=682;}if($Agent().IE){var k=top.window.screenTop;var l=top.window.screenLeft;var p=top.window.screen.availWidth;var e=top.window.screen.availHeight;var c=($Agent().IE7)||($Agent().IE8);var g=c?28:0;var m=c?24:0;var a=c?24:0;var b=6;if(n>=p||(Number(o)+Number(g)+Number(m))>=e){parent.window.moveTo(l-3,0);}else{var h=((Number(l)+Number(n)+Number(b))>p&&l<p)?(Number(l)+Number(n))-Number(p):0;var f=((Number(k)+Number(o)+Number(a))>e)?(Number(k)+Number(o)+Number(a))-Number(e):0;if(h!=0||f!=0||l>p){parent.window.moveBy(-h,-f);}}if(c){n+=20;}}parent.window.resizeTo(n,o);},_onClick:function(l){var n=this.option(),b=l.element;b=(b.nodeType==3||b.tagName.toLowerCase()=="img")?b.parentNode:b;var j;if(this._isUseSelfClass(b)){j=b;}else{j=b.parentNode;}if(b.tagName=="TEXTAREA"){this.oInput.textArea=b;try{b.focus();}catch(g){}}if(!this.oEntry){this.oEntry=new CafeCommentEntry(this);this.oEntry.htOption=n;}var h=j.tagName.toLowerCase();if(!this._isClickableTag(j,h)){if(l){Event.stop(l);}return;}var m=j.className.split(" ");var a=this._bindProperClassName(m);switch(a){case"cc_paginate":this.oPage.action(b);this.option("bEvtSetted",true);this.update();break;case"dsc_comm":case"btn_edit":var d=cssquery.getSingle("! li input[name=writerid]",b);if(d){this.oEntry.htOption.writerId=d.value;}this.lineStickerClean();this.oEntry.action(b);this._resizeCover();break;case"_submitBtn":clickcr(this,"cmt.comment","","","");this.oEntry.htOption=n;this.oEntry.post(b);break;case"p-nick":if(n.readOnlyStatus=="true"){break;}var c=cssquery.getSingle("!> td ! li input[name=writerid]",b).value;ui(l,c,3,b.innerHTML,n.clubid,n.memberInfo,n.entireBoardStaff,n.memberLevelUse,n.clubUrl,n.activityStopExecutable,n.menuid);break;case"re-p-nick":if(n.readOnlyStatus=="true"){break;}var c=cssquery.getSingle("! li input[name=replytomemberid]",b).value;ui(l,c,3,b.innerHTML,n.clubid,n.memberInfo,n.entireBoardStaff,n.memberLevelUse,n.clubUrl,n.activityStopExecutable,n.menuid);break;case"_stickerBtn":var f=cssquery.getSingle("! table ! li",b);this.lineStickerLayerToggle(j.className,f);break;case"_image":case"_cropMark":var k=cssquery.getSingle("! div input[name=imageOriginUrl]",b).value;this._openImageView(mlayoutPhoto,k);break;case"_cancelAttach":this._cancelAttach(b);break;case"_imageBtn":return;default:return(b.tagName.toLowerCase()=="a")?true:false;}if(l){Event.stop(l);}},_cancelAttach:function(b){var d=cssquery.getSingle("! td.i2 ~ td.i3 a",b).className.split(" "),c=d[d.length-1],a=cssquery.getSingle("! td.i2 > div > div",b);if(c=="_submitCmt"){this.oEntry.oCommentAttach.resetAttachArea(a);}else{this.oEntry.oReplyOrModifyAttach.resetAttachArea(a);}clickcr(this,"cmt.viewdel","","","");},_openImageView:function(b,a){b.setAllowRightMouseClick(false);b.setGdid(null);b.doPlayer([a],0);},_isUseSelfClass:function(b){var a=b.className.split(" ");if(a.has("_cropMark")){return true;}if(a.has("_cancelAttach")){return true;}return false;},_bindProperClassName:function(a){if(a.has("pc2w")){if(a.has("i1")){return"i1";}}if(a.has("_image")){return"_image";}if(a.has("_cropMark")){return"_cropMark";}if(a.has("_submitBtn")){return"_submitBtn";}if(a.has("_imageBtn")){return"_imageBtn";}if(a.has("_cancelAttach")){return"_cancelAttach";}return a[0];},_isClickableTag:function(a,b){if(["td","p","div","span"].has(b)){return true;}return false;},lineStickerLayerToggle:function(k,h){var f=null,d=null,n=null,a=false,m=k.split(" ");if(!!h){f=h;a=true;}else{if(!!m[1]&&m[1]=="_sub_ref"){f=this.oInput._elReInput;a=true;}else{f=this.oInput._htOption.elInput;a=false;}}var c=cssquery("div.box-reply2",document);if(c!=null){for(var b=0;b<c.length;b++){if(Element.hasClass(c[b],"on_stck")){Element.removeClass(c[b],"on_stck");}}}if(this.oLineStickerComment!=null){var l=this.oLineStickerComment.elStickerArea;this.lineStickerLayerHide();if(f==l){return;}}d=cssquery.getSingle("div.se2_line_layer",f);n=cssquery.getSingle("div.line_stc_sec",f);if(a){d.innerHTML=CafeCommentTemplate.LineStickerLayer;}this.oLineStickerComment=new CafeCommentLineSticker({elStickerArea:f,oEntry:this.oEntry,onClickHideStickerLayer:this.lineStickerLayerHide.bind(this)});this.oLineStickerComment.onShow();Element.addClass(this.option("elTarget"),"on_stck");if(!!this.oMenu._elSortLayer){Element.hide(this.oMenu._elSortLayer);}try{if(typeof document.documentMode!=="undefined"&&document.documentMode<8&&document.documentMode>5&&borderBoxModel!=null){borderBoxModel(cssquery(".line_tooltip,.se2_line_sticker_set,.se2_naver_line_link_layer,.se2_naver_line_box1,.se2_naver_line_box2 input"),"border-box");}}catch(g){}},lineStickerLayerHide:function(){var b=this.oLineStickerComment.elStickerLayer||cssquery.getSingle("div.se2_line_layer",this.oLineStickerComment.elStickerArea);var a=cssquery.getSingle("div.line_stc_sec",this.oLineStickerComment.elStickerArea);if(b!=null&&Element.visible(b)){this.oLineStickerComment.onClose();}if(Element.hasClass(this.option("elTarget"),"on_stck")){Element.removeClass(this.option("elTarget"),"on_stck");}this.oLineStickerComment=b=a=null;},lineStickerClean:function(){if(!!this.oLineStickerComment){this.oLineStickerComment.onClose();this.oLineStickerComment=null;}},getCommentMenu:function(){return this.oMenu;}});var CafeCommentEntry=Class({$super:null,__init:function(a){if(typeof a!="undefined"){this.$super=a;this.oInput=a.oInput;this.oCommentAttach=new CommentAttach();this.oReplyOrModifyAttach=new CommentAttach();}this._preBtnInfo={refMd:null,md:null,re:null};},action:function(d){var f=cssquery.getSingle("! li",d);var a=cssquery.getSingle("input[name=cmtid]",f);var g=(f.className.indexOf("reply")>-1)?true:false;var b=d.tagName.toLowerCase();var e=d.className.split(" ");var c=e[e.length-1];switch(c){case"_btnEdit":clickcr(this,"cmt.edit","","","");this.modify(d);break;case"_btnEditCancel":this.cancelModify(d);break;case"_btnDelete":this.remove(g,a.value);break;case"_btnReply":clickcr(this,"cmt.reply","","","");this.reply(d);break;case"_btnReplyCancel":this.cancelReply(d);break;case"_btnNoti":this.notify(a.value);break;case"_btnStopAct":this.stopAct();break;default:return false;}},post:function(a){this._checkLogin("post",a);},attachSticker:function(f){var b=this.htOption.stickerId;var a=this.htOption.stickerUrl;if(b==null){return;}var c=cssquery.getSingle("td.i2 > div > div",f);var h=cssquery.getSingle("td.i3 a",f).className.split(" "),g=h[h.length-1];if(g=="_submitCmt"){this.oCommentAttach.attachSticker(c,b,a);}else{this.oReplyOrModifyAttach.attachSticker(c,b,a);}var e=cssquery("div.box-reply2",document);if(e!=null){for(var d=0;d<e.length;d++){if(Element.hasClass(e[d],"on_stck")){Element.removeClass(e[d],"on_stck");}}}if(!!this.$super.oLineStickerComment){this.$super.oLineStickerComment.onClose();this.$super.oLineStickerComment=null;}},_postExec:function(c){if(!c){return;}var g=c.tagName.toLowerCase(),u=c.className.split(" "),k=u[u.length-1],r="",o="",q="",j="",b="",m=null,d=cssquery.getSingle("!> td.i3 !~ td.i2 > div > textarea.textarea",c);if(!d){d=cssquery.getSingle("!> div !> td.i3 !~ td.i2 > div > textarea.textarea",c);}var s=d.value;if(this.htOption.activityStopMember=="true"){alert(this.htOption.acitivtyStopAlertMsg);return false;}var l,p;switch(k){case"_submitCmt":l=this.oCommentAttach;p="comment";r="write";break;case"_submitCmtRef":l=this.oReplyOrModifyAttach;p="reply";var a=cssquery.getSingle("! td.i3 ! li !~ li !~ li",c);var f=Element.hasClass(a,"reply");r=(f)?"replyToMember":"reply";q=cssquery.getSingle("input[name="+(f?"refcmtid":"cmtid")+"]",a).value;if(r=="replyToMember"){j=cssquery.getSingle("div.h > div.pers_nick_area a._nickUI",a).innerHTML;b=cssquery.getSingle("input[name=writerid]",a).value;}break;case"_submitCmtModify":l=this.oReplyOrModifyAttach;p="modify";r="modify";o=cssquery.getSingle("! li input[name=cmtid]",c).value;q=cssquery.getSingle("! li input[name=refcmtid]",c).value;b=cssquery.getSingle("! li input[name=replytomemberid]",c).value;j=cssquery.getSingle("! li input[name=replytonick]",c).value;break;default:return false;}if(CafeCommentUtil.isEmptyText(s,j)){if(CafeCommentUtil.isEmptyAttach(l)){alert(CafeCommentTemplate.MSG.BLANKALERTMSG);try{d.focus();}catch(t){}return false;}s="";}if(this._useCaptchaValidator(k)){if(!cafe.CommentCaptchaManager.isValidCaptcha(c)){return false;}}if(!CafeCommentUtil.isValidContentLength(s,6000)){alert(CafeCommentTemplate.MSG.LENGTHALERTMSG);return false;}if(!!this.$super.oLineStickerComment){this.$super.oLineStickerComment.onClose();this.$super.oLineStickerComment=null;}var w=this.htOption,n=w.elIframe,v=w.form;d.value="";n.style.display="";v.action=w.postURL;v.target=n.name;v.articleid.value=w.articleid;v.m.value=r;v.commentid.value=o;v.refcommentid.value=q;v.content.value=s;v.orderby.value=w.sortMode||"asc";v.replyToMemberId.value=(b)?b:"";v.replyToNick.value=(j)?j:"";v.stickerId.value=l.sStickerId;v.imagePath.value=l.sImagePath;v.imageFileName.value=l.sImageFileName;v.imageWidth.value=l.nImageWidth;v.imageHeight.value=l.nImageHeight;if(this._useCaptchaValidator(k)){v.csKey.value=cafe.CommentCaptchaManager.getCsKey();v.csValue.value=cafe.CommentCaptchaManager.getCsValue();cafe.CommentCaptchaManager.destroyInstance(c);}n.style.display="none";CafeCommentFactory.setTargetInst(this.$super);try{var h={};h.sti="cafe_comment";lcs_do(h);}catch(t){}v.submit();this._preBtnInfo.re=null;this._preBtnInfo.md=null;var x=cssquery.getSingle("! td.i3 !~ td.i2 > div > div",c);if(p=="comment"){this.oCommentAttach.resetAttachArea(x);this.oReplyOrModifyAttach.resetAttachArea(x);}else{this.oReplyOrModifyAttach.resetAttachArea(x);}},_useCaptchaValidator:function(a){if(a!="_submitCmt"&&a!="_submitCmtRef"){return false;}if(!window.cafe){return false;}if(!cafe.CommentCaptchaManager){return false;}return true;},remove:function(b,a){sDelMSG=b?"답글":"댓글";if(confirm($T(CafeCommentTemplate.MSG.DELMSG,{cmt:sDelMSG}))){this._checkLogin("remove",a);}},_removeExec:function(g){var b=this.htOption,c=b.form,f=b.elIframe;f.style.display="";c.action=b.delURL;c.target=f.name;c.articleid.value=b.articleid;c.m.value="execute";c.commentid.value=g;c.refcommentid.value="";c.content.value="";c.orderby.value=b.sortMode||"asc";f.style.display="none";CafeCommentFactory.setTargetInst(this.$super);try{var a={};a.sti="cafe_comment";lcs_do(a);}catch(d){}c.submit();},_checkLogin:function(b,d){var c=this.htOption;var a=this;new Ajax(c.loginCheckUrl,{onLoad:function(f){var e=f.responseText.trim();if(e=="LOGOUT"){parent.openLoginLayer();parent.checkFrame.location.replace("https://nid.naver.com/nidlogin.login?mode=form&svctype=40960&id="+c.naverid+"&url="+c.loginCheckOk+"&pmsg=아직 게시글이 등록되지 않았습니다");}else{parent.closeLoginLayer();switch(b){case"remove":case"delete":a._removeExec(d);break;case"post":case"create":a._postExec(d);break;}}},timeout:2000});},modify:function(f){var w=this.htOption;var u=CafeCommentTemplate.MSG;if(w.activityStopMember=="true"){alert(w.acitivtyStopAlertMsg);return false;}if(this._preBtnInfo.re!=null){this.cancelReply(this._preBtnInfo.re);}if(this._preBtnInfo.md!=null){this.cancelModify(this._preBtnInfo.md);}var a=cssquery.getSingle("! div.h ! div.comm_cont !>  li",f);var r=cssquery.getSingle("span.comm_body",a).innerHTML;r=CafeCommentUtil._makeCmtView(r);var s=cssquery.getSingle("a._nickUI",a).innerHTML,o=cssquery.getSingle("span.date",a).innerHTML,p=cssquery.getSingle("p.btn_edit",a).innerHTML,g=a.className||"",z=cssquery.getSingle("input[name=cmtid]",a).value,h=cssquery.getSingle("input[name=writerid]",a).value,j=cssquery.getSingle("input[name=refcmtid]",a).value,l=cssquery.getSingle("input[name=replytonick]",a).value,b=cssquery.getSingle("input[name=replytomemberid]",a).value,c=cssquery.getSingle("input[name=stickerId]",a).value,t=cssquery.getSingle("input[name=stickerOriginUrl]",a).value,q=cssquery.getSingle("input[name=imagePath]",a).value,k=cssquery.getSingle("input[name=imageFileName]",a).value,y=cssquery.getSingle("input[name=imageWidth]",a).value,m=cssquery.getSingle("input[name=imageHeight]",a).value,v=cssquery.getSingle("input[name=articleId]",a).value;var e=$T(CafeCommentTemplate.AttachBtnLayer,{attachBtnId:"modifyAttachImageBtn"+v});var x=this._getAttachAreaTpl(t,q,k);var n=this.oInput.getModify({writernick:s,writedt:o,cmtClass:g,content:r,subMenu:p,submitClass:"Modify",cmtid:z,writerid:h,refcmtid:j,replytonick:l,replytomemberid:b,attachBtnLayerTpl:e,attachAreaTpl:x,stickerId:c,imagePath:q,imageFileName:k,imageWidth:y,imageHeight:m,articleId:v});this.oInput._appendModify(w.elList,a,n);Element.hide(a);this._preBtnInfo.md=f;this._preBtnInfo.mdEl={elList:w.elList,elTarget:a,elInput:n};var d=cssquery.getSingle("textarea.textarea",n);this.oInput._setReEvt(d);var A=$C("TEXTAREA");A.innerHTML=r;A.id="_txtCmtOriginal";A.style.display="none";n.appendChild(A);var B=cssquery.getSingle("! div > div",d);this.oReplyOrModifyAttach.initializeForAttachImage("modifyAttachImageBtn",v);this.oReplyOrModifyAttach.setAttachInfo(c,q,k,y,m);this.oReplyOrModifyAttach.changeBtnOnOff(B,c,q,k);d.bModified=false;d.onblur=function(){var C=$("_txtCmtOriginal").innerHTML;this.bModified=!(this.value==C);};d.focus();return false;},_getAttachAreaTpl:function(a,c,b){if(a!=""){return $T(CafeCommentTemplate.AttachArea,{imageUrl:a+"?type=p75_75",stickerClass:"sticker"});}if(c!=""){return $T(CafeCommentTemplate.AttachArea,{imageUrl:g_sCafeThumbUrl+c+b+"?type=ff80_80",stickerClass:""});}return"";},cancelModify:function(d){if(!this._preBtnInfo.mdEl){return false;}var e=this.htOption;var a=CafeCommentTemplate.MSG;var b=this._preBtnInfo.mdEl.elInput,c=this._preBtnInfo.mdEl.elList,g=this._preBtnInfo.mdEl.elTarget;var f=cssquery.getSingle("textarea.textarea",b);if(f!=null&&f.value!=""&&f.bModified){if(!confirm(a.MODIFYCANCELMSG)){return false;}}if(CafeCommentUtil.isChild(c,b)){c.removeChild(b);}Element.show(g);this._preBtnInfo.md=this._preBtnInfo.mdEl=null;e=a=f=null;},reply:function(c){var l=this.htOption,d=CafeCommentTemplate.MSG;if(l.activityStopMember=="true"){alert(l.acitivtyStopAlertMsg);return false;}var m=cssquery.getSingle("! div.h ! div.comm_cont !>  li",c);if(this._preBtnInfo.md!=null){if(!m){m=this._preBtnInfo.mdEl.elTarget;c=cssquery.getSingle("._btnReply",this._preBtnInfo.mdEl.elTarget);}this.cancelModify(this._preBtnInfo.md);}if(this._preBtnInfo.re!=null){if(!this.cancelReply(this._preBtnInfo.re)){return false;}}var h=Element.hasClass(m,"reply"),j=cssquery.getSingle("input[name=articleId]",m).value;attachBtnLayerTpl=$T(CafeCommentTemplate.AttachBtnLayer,{attachBtnId:"replyAttachImageBtn"+j});elInput=this.oInput.getReply({submitClass:"Ref",attachBtnLayerTpl:attachBtnLayerTpl});this._elInput=elInput;var b=cssquery.getSingle("textarea.textarea",elInput);if(b!=null&&b.value!=""&&b.bModified){if(!confirm(d.ALERTMSG)){return false;}}if(this._preBtnInfo.re!=null){this.cancelReply(this._preBtnInfo.re);}var g=cssquery.getSingle("! ul.cmlist ",m);this.oInput._appendReply(g,m,elInput);this.oInput._setReEvt(b);var k=CafeCommentTemplate.SubMenuData;Element.removeClass(c,k.reply.actClass);Element.addClass(c,k.replyCancel.actClass);c.innerHTML=k.replyCancel.str;this._preBtnInfo.re=c;var e="";b.originalHTML=e;b.bModified=false;b.onfocus=function(){if(this.bModified==false){this.innerHTML="";}};b.onblur=function(){if(CafeCommentUtil.trim(this.innerHTML||this.value).length<1){this.innerHTML=this.originalHTML;}this.bModified=!((this.innerHTML||this.value)==this.originalHTML);};var a=(c.className.indexOf("reply")>-1)?true:false;if(a){var f=cssquery.getSingle("a._nickUI",m).innerHTML;e=$T(d.REPLYMSG,{name:f});b.innerHTML=b.originalHTML=e;}this.oReplyOrModifyAttach.setAttachInfo("","","","","");this.oReplyOrModifyAttach.initializeForAttachImage("replyAttachImageBtn",j);return false;},cancelReply:function(e){var g=this.htOption,a=CafeCommentTemplate.MSG,d=cssquery.getSingle("! div.h !> div.comm_cont !> li",e),f=cssquery.getSingle("! ul.cmlist ",d),c=this._elInput||this.oInput.getReply({submitClass:"Ref"}),h=cssquery.getSingle("textarea.textarea",c);if(h!=null&&h.value!=""&&h.bModified){if(!confirm(a.ALERTMSG)){return false;}}this.oInput._removeReply(f,c);this._elInput=null;var b=CafeCommentTemplate.SubMenuData;Element.removeClass(e,b.replyCancel.actClass);Element.addClass(e,b.reply.actClass);e.innerHTML=b.reply.str;var h=cssquery.getSingle("textarea.textarea",c);if(h){h.value="";}this._preBtnInfo.re=null;return true;},notify:function(b){var a=this.htOption;open_window("/BoardReportCommentView.nhn?clubid="+a.clubid+"&articleid="+a.articleid+"&commentid="+b+"&writerid="+a.writerId,"badReport",435,280,"toolbar=0,menubar=0,resizable=no,scrollbars=no");},stopAct:function(){var b=this.htOption;try{this.childWin=window.open("/ManageActivityStopPopupView.nhn?clubid="+b.clubid+"&memberids="+b.writerId+"&menuid="+b.menuid,"activityStopPopup","width=350,height=472,left=100,top=100");}catch(a){}if(this.childWin&&!this.childWin.closed){this.childWin.focus();}},getString:function(b,a){sComment=$T(CafeCommentTemplate.Comment,{cmtClass:b.refComment?"reply":"",infoClass:b.deleted?"h deleted":"h",writernick:b.writernick,writedt:b.writedt,cmtid:b.commentid,writerid:b.writerid,refcmtid:b.refcommentid,profileImageTpl:this._getProfileImageTpl(b),usingFontStyle:"",subMenu:this._getSubMenu(b.writerid,b.deleted,b.attachType),textContentTpl:this._getTextContentTpl(b,a),attachContentTpl:this._getAttachContentTpl(b,a),replytonick:escapeXssCharacters(b.replyToNick),replytomemberid:b.replyToMemberId,stickerId:b.attachType=="sticker"?b.stickerId:"",stickerOriginUrl:b.attachType=="sticker"?b.stickerOriginUrl:"",imagePath:b.attachType=="image"?b.imagePath:"",imageFileName:b.attachType=="image"?b.imageFileName:"",imageWidth:b.attachType=="image"?b.imageWidth:"",imageHeight:b.attachType=="image"?b.imageHeight:"",articleId:b.articleId,articleWriterTpl:b.articleWriter&&!this.htOption.cafeBookMenu?CafeCommentTemplate.articleWriter:""});return this._getReplyStr(b.writerid,sComment);},_getProfileImageTpl:function(b){var a="/CafeMemberNetworkView.nhn?m=view&clubid="+this.htOption.clubid+"&memberid="+b.writerid;return $T(CafeCommentTemplate.ProfileImage.Comment,{profileImageUrl:CafeCommentUtil.trim(b.profileImageUrl)!=""?b.profileImageUrl:b.defaultProfileImageUrl,defaultProfileImageUrl:b.defaultProfileImageUrl,memberProfilePageUrl:a});},_getTextContentTpl:function(b,a){return $T(CafeCommentTemplate.ViewContent.Text,{text:b.content?b.content:"",usingFontStyle:"",replyTo:b.replyToMemberId?$T(CafeCommentTemplate.replyTo,{name:b.replyToNick,id:b.replyToMemberId}):"",secretClass:a?"tbody_secret2":"comm"});},_getAttachContentTpl:function(c,a){var b=c.attachType;if(b=="sticker"){return $T(CafeCommentTemplate.ViewContent.Sticker,{stickerUrl:c.stickerUrl,stickerShopUrl:c.stickerShopUrl,stickerWidth:c.stickerWidth,stickerHeight:c.stickerHeight,secretClass:c.replyToMemberId?"comm":(a?"tbody_secret2":"comm")});}if(b=="image"){return $T(CafeCommentTemplate.ViewContent.Image,{imageOriginUrl:c.imageOriginUrl,imageThumbUrl:c.imageThumbUrl,imageThumbWidth:c.imageThumbWidth,imageThumbHeight:c.imageThumbHeight,cropMark:c.isImageCropped?$T(CafeCommentTemplate.CropMark):"",secretClass:c.replyToMemberId?"comm":(a?"tbody_secret2":"comm")});}return"";},_getReplyStr:function(b,d){var a=this._getAuth(b)||"";var c=this.htOption.writableComment;if((c&&c=="false")||!/(owner|staff|member)/.test(a)){d=d.replace(/<span class="dsc_comm">.*_btnReply">답글<\/a><\/span>/,"");}return d;},_getSubMenu:function(g,d,h){if(d){return"";}var b={etc:["noti"],owner:["edit","delete"],staff:["noti","delete","stopAct"],member:["noti"],readOnlyStatus:[]};var f=CafeCommentTemplate.SubMenuData;var a=this._getAuth(g);var c=this._excludeSubMenu(b[a],h);var e=[];var j=c.length;c.each(function(k){e.push($T(CafeCommentTemplate.subMenu.menu,{actClass:f[k].actClass,str:f[k].str}));e.push(CafeCommentTemplate.subMenu.bar);});e.pop();return e.join("");},_excludeSubMenu:function(b,a){var c=this.htOption.exSubmenu;c.each(function(d){b=b.refuse(d);});return b;},_getAuth:function(a){var d=this.htOption.readOnlyStatus,c=this.htOption.naverid,b=this.htOption.memberInfoForComment;if(d=="true"){return"readOnlyStatus";}if(a==c){return(!(b=="ma"||b=="st"||b=="me"))?"etc":"owner";}else{switch(b){case"ma":case"st":return"staff";case"me":return"member";default:return"etc";}}}});var CafeCommentInput=Class.extend(CafeCommentComponent,{__init:function(a){if(typeof a!="undefined"){this.option(a);}this._oTextAreaEx={newComment:null,refMd:null,modify:null,reply:null};},show:function(){var c=this.option("elTarget");var a=this.option("elInput");if(a!=null){Element.show(a);}if(null!=c){var b=this.elTextArea;if(null!=b&&this.option("activityStopMember")=="true"){b.value=this.option("acitivtyStopAlertMsg");}}},hide:function(){var a=this.option("elInput");if(a!=null){Element.hide(a);}},clear:function(){if(this.elTextArea==null){return;}if(this.option("activityStopMember")=="true"){this.elTextArea.value=this.option("acitivtyStopAlertMsg");}else{this.elTextArea.value="";}},_setInitEvt:function(b){var a=$("comment_text");if(a){this.mainCmtTextArea=a;this._oTextAreaEx.newComment=new nhn.TextAreaExpander(a,{nMaxByte:6000,sOverMessage:CafeCommentTemplate.MSG.LENGTHALERTMSG,onChangeHeight:function(){CafeCommentUtil.reHeightIf(parent.document.getElementById("cafe_main"));}});this._oTextAreaEx.newComment.startCheck();if(typeof bridgeToggleBlockDragInFF=="function"){Event.register(a,"mouseout",function(){bridgeToggleBlockDragInFF();});}if(typeof cancelBlockDragInFF=="function"){Event.register(a,"mouseover",function(){cancelBlockDragInFF();});}}this._bindAppInstall();},_bindAppInstall:function(){var a=$("appInstallBtn");if(a){Event.register(a,"click",function(){this._showAppInstallLayer();}.bind(this));}var d=$("confirmLayerBtn");if(d){Event.register(d,"click",function(){this._hideAppInstallLayer();}.bind(this));}var b=$("hideLayerBtn");if(b){Event.register(b,"click",function(){this._hideAppInstallLayer();}.bind(this));}var c=$("sendUrlBtn");if(c){Event.register(c,"click",function(){this._sendURL();}.bind(this));}},update:function(){var a=this.option("elTarget");this._setInitEvt(a);this.clear();},getReply:function(a){if(!this._elReInput){var b=$C("li");Element.addClass(b,"reply");this._elReInput=b;}if(a.submitClass=="Ref"){a.buttonText="답글";}else{a.buttonText="댓글";}this._elReInput.innerHTML=$T(CafeCommentTemplate.Input,a);return this._elReInput;},getModify:function(a){var b=$C("LI");b.innerHTML=$T(CafeCommentTemplate.Modify,{writernick:a.writernick,writedt:a.writedt,cmtClass:a.cmtClass,content:a.content,subMenu:a.subMenu,submitClass:a.submitClass,cmtid:a.cmtid,writerid:a.writerid,refcmtid:a.refcmtid,replytonick:a.replytonick,replytomemberid:a.replytomemberid,buttonText:a.cmtClass=="reply"?"답글":"댓글",buttonImage:"btn_cmt_cfm_v1.gif",attachBtnLayerTpl:a.attachBtnLayerTpl,attachAreaTpl:this._isTextOnly(a.stickerId,a.imagePath)?"":a.attachAreaTpl,displayStyle:this._isTextOnly(a.stickerId,a.imagePath)?"none":"block",articleId:a.articleId,articleWriterTpl:a.articleWriter&&!this.htOption.cafeBookMenu?CafeCommentTemplate.articleWriter:""});b.className=a.cmtClass;return b;},_isTextOnly:function(a,b){if(a!=""){return false;}if(b!=""){return false;}return true;},_getDashLine:function(){if(this._elDashLine==null){var a=$C("li");Element.addClass(a,"filter-30 board-box-line-dashed");this._elDashLine=a;}return this._elDashLine;},_appendReply:function(e,d,b){var f=cssquery.getSingle("~ li  ~ li",d);var g=[];g.push(b);g.push(this._getDashLine());for(var c=0,a=g.length;c<a;c++){if(f!=null){e.insertBefore(g[c],f);}else{e.appendChild(g[c]);}}},_appendModify:function(c,b,a){c.insertBefore(a,b);},_setReEvt:function(a){if(this._oTextAreaEx.reply){this._oTextAreaEx.reply.stopCheck();}this._oTextAreaEx.reply=new nhn.TextAreaExpander(a,{nMaxByte:6000,sOverMessage:CafeCommentTemplate.MSG.LENGTHALERTMSG,onChangeHeight:function(){CafeCommentUtil.reHeightIf(parent.document.getElementById("cafe_main"));}});if(typeof bridgeToggleBlockDragInFF=="function"){Event.register(a,"mouseout",function(){bridgeToggleBlockDragInFF();});}if(typeof cancelBlockDragInFF=="function"){Event.register(a,"mouseover",function(){cancelBlockDragInFF();});}this._oTextAreaEx.reply.startCheck();},_removeReply:function(d,b){var g=[];g.push(b);g.push(this._getDashLine());for(var c=0,a=g.length;c<a;c++){if(CafeCommentUtil.isChild(d,g[c])){try{d.removeChild(g[c]);}catch(f){}}}this._clearReEvt();},_clearReEvt:function(){if(this._oTextAreaEx.reply){this._oTextAreaEx.reply.stopCheck();this._oTextAreaEx.reply.setMinHeight();}},_showAppInstallLayer:function(){var a=$("appInstallLayer");if(a){CafeCommentUtil.sendAppInstallNoti();Element.show(a);}},_hideAppInstallLayer:function(){var a=$("appInstallLayer");if(a){Element.hide(a);}},_sendURL:function(){CafeCommentUtil.sendURL();}});var CafeCommentMenu=Class({$super:null,_elTotalCnt:null,_elCmtMenu:null,_elSortList:null,_elSortLayer:null,_aElSortMode:null,_aElSortText:null,_elLikeItMemberBtn:null,_elLikeItMemberList:null,__init:function(a){this.$super=a;this._elCmtMenu=this.getCmtMenu();this._elSortList=cssquery.getSingle("td._sortList",this._elCmtMenu);this._elSortLayer=cssquery.getSingle("td._sortList > div > div.perid-layer2",this._elCmtMenu);this._elTotalCnt=cssquery.getSingle("td.reply ._totalCnt",this._elCmtMenu);if(this._elTotalCnt==null){this._elTotalCnt=cssquery.getSingle("._totalCnt",this._elCmtMenu);}this._elLikeItMemberBtn=$("likeItMemberBtn");this._elLikeItMemberList=$("likeItMemberArea");if(this._elLikeItMemberBtn){this._elLikeItArrow=cssquery.getSingle("span#likeItArrow",this._elLikeItMemberBtn);}this._aElSortMode=cssquery("> div a.m-tcol-c > span",this._elSortList);this._aElSortMode.pop();this._aElSortText=cssquery("> div.sort",this._elSortList);if(!a.option("bEvtSetted")){this._setInitEvt();}},_setInitEvt:function(){if(this._elSortList){Event.register(this._elSortList,"click",this.clickSortList.bindForEvent(this));}if(this._elSortLayer){Event.register(this._elSortLayer,"click",this.clickSortLayer.bindForEvent(this));}if(this._elSortLayer){Event.register(document.body,"mousedown",this._hideSortLayer.bindForEvent(this));}},clickSortList:function(a){if(a){a.stop();}if(Element.visible(this._elSortLayer)){this._hideSortLayer(a);}else{this._showSortLayer();}},_showSortLayer:function(a){if(a){a.stop();}Element.show(this._elSortLayer);if(this._aElSortText[0]){Element.addClass(this._aElSortText[0],"on");}},_hideSortLayer:function(a){if(!cssquery.getSingle(" ! div.perid-layer2",a.element)){Element.hide(this._elSortLayer);if(this._aElSortText[0]){Element.removeClass(this._aElSortText[0],"on");}}},clickSortLayer:function(a){var d=a.element,c=cssquery.getSingle("! li",d);if(c){var e=c.className.split(" "),b=e[e.length-1];this[b=="asc"?"showAscMode":"showDescMode"]();this._listCmt(b);Element.hide(this._elSortLayer);if(this._aElSortText[0]){Element.removeClass(this._aElSortText[0],"on");}}this.enableComment();if(a){a.stop();}},showAscMode:function(){Element.show(this._aElSortMode[0]);Element.hide(this._aElSortMode[1]);},showDescMode:function(){Element.hide(this._aElSortMode[0]);Element.show(this._aElSortMode[1]);},getCmtMenu:function(){return this.$super.option("elMenu");},updateMenu:function(a){this._updateTotalCnt(a);},_updateTotalCnt:function(a){if(this._elTotalCnt!=null){this._elTotalCnt.innerHTML=this._elTotalCnt.innerHTML.replace(/\d+/,a);}},_listCmt:function(a){this.$super.option({sortMode:a,bEvtSetted:(this.$super.option("bEvtSetted")?true:false)});this.$super._bShowList=false;this.$super.update();},enableComment:function(){if(this._elLikeItMemberBtn){Element.removeClass(this._elLikeItMemberBtn,"m-tcol-p");if(this._elLikeItArrow){Element.removeClass(this._elLikeItArrow,"up-btn");Element.addClass(this._elLikeItArrow,"down-btn");}}if(this._elTotalCnt){Element.addClass(this._elTotalCnt,"m-tcol-p");}if(this._elLikeItMemberList){Element.hide(this._elLikeItMemberList);}this.$super._bShowList=true;this.$super.show();},enableLikeItMember:function(){if(this._elLikeItMemberBtn){Element.addClass(this._elLikeItMemberBtn,"m-tcol-p");if(this._elLikeItArrow){Element.addClass(this._elLikeItArrow,"up-btn");Element.removeClass(this._elLikeItArrow,"down-btn");}}if(this._elTotalCnt){Element.removeClass(this._elTotalCnt,"m-tcol-p");}if(this._elLikeItMemberList){Element.show(this._elLikeItMemberList);}this.$super._bShowList=false;this.$super.hide();}});var CafeCommentTemplate={Comment:'<li class="{cmtClass}">		<div class="comm_cont">			<div class="{infoClass}">				<div class="pers_nick_area">					<table role="presentation" cellspacing="0">						<tbody>						<tr>    						{profileImageTpl}							<td class="p-nick"><a href="#" class="m-tcol-c _rosRestrict _nickUI">{writernick}</a>{articleWriterTpl}</td>						</tr>						</tbody>					</table>				</div>				<span class="date m-tcol-c filter-50">{writedt}</span>				<span class="dsc_comm"><a href="#" class="m-tcol-c {cmtClass} _btnReply">답글</a></span>				<p class="btn_edit m-tcol-c">{subMenu}</p>			</div>			{textContentTpl}			{attachContentTpl}		<div>		<input type="hidden" name="cmtid" value="{cmtid}"/>		<input type="hidden" name="writerid" value="{writerid}"/>		<input type="hidden" name="refcmtid" value="{refcmtid}"/>		<input type="hidden" name="replytonick" value="{replytonick}"/>		<input type="hidden" name="replytomemberid" value="{replytomemberid}"/>		<input type="hidden" name="stickerId" value="{stickerId}"/>		<input type="hidden" name="stickerOriginUrl" value="{stickerOriginUrl}"/>		<input type="hidden" name="imagePath" value="{imagePath}"/>		<input type="hidden" name="imageFileName" value="{imageFileName}"/>		<input type="hidden" name="imageWidth" value="{imageWidth}"/>		<input type="hidden" name="imageHeight" value="{imageHeight}"/>		<input type="hidden" name="articleId" value="{articleId}"/>		</li>',ViewContent:{Text:'<p class="{secretClass} m-tcol-c" >{replyTo}					<span class="comm_body">{text}</span>			    </p>',Sticker:'<p class="{secretClass} comm_stck m-tcol-c">						<span class="comm_body">					   		<a href="{stickerShopUrl}" target="_blank"><img src="{stickerUrl}" width="{stickerWidth}" height="{stickerHeight}" alt="" /></a>				   		</span>				   </p>',Image:'<div class="{secretClass} u_cbox_image_section">					<div class="u_cbox_image_wrap _image">						<a href="#" class="u_cbox_image_link" onclick="clickcr(this,\'cmt.inimage\', \'\', \'\', event)" oncontextmenu="return false;">							<img src="{imageThumbUrl}" alt="썸네일이미지" width="{imageThumbWidth}" height="{imageThumbHeight}" class="u_cbox_comment_image" onerror="this.src=\'https://ssl.pstatic.net/static/cafe/cbox_error_load_fail.png\'; this.width=75; this.height=75;">							{cropMark}						</a>					</div>				 </div>				 <input type="hidden" name="imageOriginUrl" value="{imageOriginUrl}"/>'},ProfileImage:{Comment:'<td class="pc2w"><div class="box_profile"><a href="{memberProfilePageUrl}" class="link_profile"><img src="{profileImageUrl}" width="32" height="32" alt="프로필" onerror="this.onerror=\'\'; this.src=\'{defaultProfileImageUrl}\'"></a></div></td>',LikeIt:'<a href="{memberProfilePageUrl}" class="link_profile"><img src="{profileImageUrl}" width="24" height="24" alt="프로필" onerror="this.onerror=\'\'; this.src=\'{defaultProfileImageUrl}\'"></a>'},AttachArea:'<span class="u_cbox_upload_image_wrap {stickerClass}">							<a href="#" class="u_cbox_upload_thumb_link" ><img src="{imageUrl}" alt="첨부이미지" class="u_cbox_upload_thumb" width="80" height="80">								<span class="u_cbox_upload_thumb_mask"></span>								<span class="u_cbox_ico_delete_thumb _cancelAttach">사진 업로드 취소</span>							</a>						</span>					  </div>',LikeItMember:'<li class="{isOdd}">		{profileImageTpl}		<a href="#" class="_nickUI m-tcol-c">{nickName}</a>		<input type="hidden" name="writerid" value="{writerid}"/>		<span class="date m-tcol-c filter-50">{writeDate}</span>		</li>',Input:'<div class="comm_cont comm_cont_input">		<table role="presentation" cellspacing="0" class="cminput">		<tbody>		<tr>			<td class="i2">				<div class="comm_write_wrap border-sub skin-bgcolor">					<textarea maxlength="6000" class="textarea m-tcol-c" rows="2" cols="50" id="comment_text" style="overflow: hidden; line-height: 14px; height: 39px;" title="댓글입력"></textarea>					<div class="u_cbox_upload_image" style="display:none">					</div>				</div>			</td>			<td class="i3">				<div class="u_cbox_btn_upload _submitBtn">					<a href="#" class="u_cbox_txt_upload _submitCmt{submitClass}" alt="{buttonText}입력" name="">등록</a>				</div>			</td>		</tr>		{attachBtnLayerTpl}		</tbody>		</table></div>',Modify:'<div class="comm_cont comm_cont_edit">		<table role="presentation" cellspacing="0" class="cminput">			<tr>				<td class="i2">						<div class="pers_nick_area">							<table role="presentation" cellspacing="0">								<tbody>									<tr>										<td class="p-nick"><a class="m-tcol-c _rosRestrict _nickUI"  href="#">{writernick}</a>{articleWriterTpl}</td>									</tr>								</tbody>							</table>						</div>						<span class="date m-tcol-c filter-50">{writedt}</span>						<span class="dsc_comm"><a href="#" class="m-tcol-c {cmtClass} _btnReply">답글</a></span>					</div>					<div class="comm_write_wrap border-sub skin-bgcolor">						<textarea id="comment_text" cols="50" rows="2" class="textarea m-tcol-c" maxlength="6000" style="overflow: hidden; line-height: 14px; height: 39px;" title="댓글수정">{content}</textarea>						<div class="u_cbox_upload_image" style="display:{displayStyle}">						{attachAreaTpl}						</div>				</td>				<td class="i3">						<p class="btn_edit m-tcol-c"><a href="#" class="m-tcol-p _btnEditCancel">수정취소</a></p>						<div class="u_cbox_btn_upload _submitBtn">							<a href="#" class="u_cbox_txt_upload _submitCmt{submitClass}" alt="{buttonText}입력">수정</a>					</div>				</td>		</tr>		{attachBtnLayerTpl}		</table>		</div>		<input type="hidden" name="cmtid" value="{cmtid}"/>		<input type="hidden" name="writerid" value="{writerid}"/>		<input type="hidden" name="refcmtid" value="{refcmtid}"/>		<input type="hidden" name="replytonick" value="{replytonick}"/>		<input type="hidden" name="replytomemberid" value="{replytomemberid}"/>',AttachBtnLayer:'<tr>					<td colspan="3">						<ul class="u_cbox_addition">							<li>								<div class="_stickerBtn u_cbox_btn_upload_sticker">									<span class="u_cbox_ico_upload_sticker"></span>									<span class="m-tcol-c u_cbox_txt_upload_sticker">스티커</span>									<a href="#" class="u_cbox_link_wrap">스티커 레이어 팝업</a>								</div>								<div class="line_stc_sec">									<div class="se2_line_layer">										<div class="se2_in_layer">											<div class="se2_line_sticker">												<button type="button" title="이전" class="se2_prev" disabled=""><span>이전</span></button>												<ul class="se2_line_sticker_set">												</ul>												<button type="button" title="다음" class="se2_next"><span>다음</span></button>											</div>										</div>									</div>								</div>							</li>							<li>								<div class="u_cbox_btn_upload_photo">									<div class="_imageBtn u_cbox_btn_file"><label for="{attachBtnId}" onclick="clickcr(this,\'cmt.image\', \'\', \'\', event);">업로드</label><input type="file" id="{attachBtnId}" accept="image/*"></div>									<span class="u_cbox_ico_upload_photo"></span>									<span class="m-tcol-c u_cbox_txt_upload_photo">사진</span>								</div>							</li>						</ul>					</td>			</tr>',CaptchaArea:'<div class="captcha_bx"  id="captchaArea_comment">        <div class="filter-30 board-box-line-dashed" style="border-bottom-style:dotted"></div>        <div class="captcha_wrt">            <label class="item m-tcol-c" for="csValue_comment">보안확인</label>            <div class="post_captcha">                <div class="captcha_img_view">                    <img src="" id="captchaImg_comment" name="captchaImg" width="200" height="125" alt="캡차이미지">                    <span class="line filter-30 m-tcol-c"></span>                </div>                <div class="captcha_input_dsc">                    <p class="dsc m-tcol-c">프로그램을 이용한 자동 등록을 방지하기 위해, <br>보안절차를 거치고 있습니다. <br>왼쪽 이미지를 보이는 대로 입력해주세요.</p>					<input type="text" id="csValue_comment" name="csValue" value="자동입력 방지문자" title="그림문자 입력" maxlength="18" class="input_txt  __notnull _unvalid _keyup(CommentCaptchaValidator|ClearInitMessage) _click(CommentCaptchaValidator|ClearInitMessage)">                    <a id="reloadCaptcha_comment" href="#" class="txt filter-70 m-tcol-c _click(CommentCaptchaValidator|Recaptcha) _stopDefault">새로고침</a>					<p class="msg" id="captchaResult_comment"></p>					<input type="hidden" id="csKey_comment" name="csKey" value="" />                </div>            </div>        </div>    </div>',LineStickerLayer:'<div class="se2_in_layer">			<div class="se2_line_sticker">				<button type="button" title="이전" class="se2_prev"><span>이전</span></button>				<ul class="se2_line_sticker_set">				</ul>				<button type="button" title="다음" class="se2_next"><span>다음</span></button>			</div>    		<div class="se2_naver_line_dimmed"></div>			<div class="se2_naver_line_link_layer">				<div class="se2_naver_line_box1">					<p class="se2_naver_line_txt1"><span class="blind">지금 바로 라인을 설치하고, 다양한 스티커들을 이용하세요. 라인을 설치하고 네이버 아이디 등록하면 끝!</span></p>				</div>				<div class="se2_naver_line_box2">					<p class="se2_naver_line_txt2"><span class="blind">다운로드 url 문자받기(무료)</span></p>					<p class="se2_naver_line_send">						<input type="text" name="" value="휴대폰번호를 입력하세요">						<button onclick="" class="btn_send"><span>보내기</span></button>					</p>    				<p class="se2_naver_line_txt3"><a href="http://line.me/" target="_blank">LINE소개 &gt;</a></p>					<span class="se2_naver_line_qr"><a href="http://me2.do/xwy0KLq0" class="blind" target="_blank">앱스토어 연결</a></span>					<span class="img_sticker1"></span>				</div>				<div class="se2_naver_line_box3">    			<p class="se2_naver_line_txt4"><span class="blind">이미 설치했다면 라인앱 &gt; 설정 &gt; 계정 &gt; 네이버아이디를 등록해주세요!</span></p>				</div>				<a href="#" class="se2_clse"><span class="blind">팝업 닫기</span></a>			</div>		</div>',SubMenuData:{reply:{actClass:"m-tcol-c _btnReply",str:"답글"},replyCancel:{actClass:"m-tcol-p _btnReplyCancel",str:"답글 취소"},edit:{actClass:"m-tcol-c _btnEdit",str:"수정"},editCancel:{actClass:"m-tcol-p _btnEditCancel",str:"수정 취소"},"delete":{actClass:"m-tcol-c _btnDelete",str:"삭제"},noti:{actClass:"m-tcol-c _btnNoti",str:"신고"},stopAct:{actClass:"m-tcol-c _btnStopAct",str:"활동 정지"}},subMenu:{menu:'<a href="#" class="filter-70 {actClass}">{str}</a>',bar:'<span class="filter-30 m-tcol-c">|</span>'},line:'<li class="filter-30 board-box-line-dashed"></li>',replyTo:'<span class="re-p-nick"><a href="#" class="m-tcol-c filter-50 nick">{name}</a></span> ',CropMark:'<span class="u_cbox_image_icon_crop _cropMark">크롭 이미지</span>',paginate:{first_unselect:'<a href="#" class="m-tcol-c first-child _goPage">{pageno}</a>',first_select:'<strong class="m-tcol-p first-child">{pageno}</strong>',page_select:'<strong class="m-tcol-p">{pageno}</strong>',page_unselect:'<a href="#" class="m-tcol-c _goPage">{pageno}</a>',top:'<a href="#" class="pre_end m-tcol-c _goTop">처음</a>',prev:'<a href="#" class="pre m-tcol-c _goPrev">이전</a>',next:'<a href="#" class="next m-tcol-c _goNext">다음</a>',end:'<a href="#" class="next_end m-tcol-c _goEnd">끝</a>'},articleWriter:'<span class="author m-tcol-p">작성자</span>',MSG:{ALERTMSG:"이미 입력된 답글 내용을 취소 하겠습니까?",MODIFYCANCELMSG:"내용 입력을 취소하시겠습니까?",DELMSG:"{cmt}을 삭제하시겠습니까?",REPLYMSG:"{name}님께 답글쓰기",BLANKALERTMSG:"내용을 입력해주세요",LENGTHALERTMSG:"댓글 길이가 초과되었습니다.",EMPTYCAPTCHAMSG:"자동입력 방지문자를 입력해주세요.",INVALIDCAPTCHAMSG:"자동입력 방지문자를 잘못 입력하셨습니다."}};var CafeCommentFactory={oTargetInst:null,htInst:{},setTargetInst:function(a){this.oTargetInst=a;},getTargetInst:function(){return this.oTargetInst;},setInst:function(a,b){this.htInst[a]=b;},getInst:function(a){return this.htInst[a];}};var CafeCommentUtil={_scrollTop:0,_makeCmtView:function(d){var c="";var a=/<a href=".*?" target="?_blank"?>(.*?)<\/a>/gi;var b=/<b>(.*?)<\/b>/gi;c=d.replace(/<BR>/gi,"\r");c=c.replace(a,"$1");c=c.replace(b,"$1");c=c.replace(/&gt;/g,">");c=c.replace(/&lt;/g,"<");c=c.replace(/&amp;/g,"&");return c;},isValidContentLength:function(b,a){if(b==null||b==""||b.replace(/\s*/g,"")==""){return true;}if(b.bytes()<=a){return true;}return false;},isChild:function(a,b){return(b.parentNode==a);},reHeightIf:function(a,e){if(a==null){return;}try{var f=a.contentDocument||a.contentWindow.document;if(/MSIE/.test(navigator.userAgent)){var d=f.body.scrollHeight;}else{var c=f.body.appendChild(document.createElement("DIV"));c.style.clear="both";var d=c.offsetTop;c.parentNode.removeChild(c);}if(d<e){d=e;}a.style.height=d+"px";}catch(b){JEagleEyeClient.raiseError(b,this,{message:"reHeightIf() - Error "+navigator.userAgent});}},getCurScrollTop:function(){var a=parent.document;var b=(document.body.scrollTop==0)?a.documentElement.scrollTop:a.body.scrollTop;return b;},saveScrollTop:function(a){this._scrollTop=a;},restoreScrollTop:function(){var a=parent.document;if(document.body.scrollTop==0){a.documentElement.scrollTop=this._scrollTop;}else{a.body.scrollTop=this._scrollTop;}},trim:function(b){try{return b.replace(/^\s+|\s+$/g,"");}catch(a){return"";}},sendURL:function(){var a;try{var c="http://webmsg.naver.com/popup_send/send_url.php";oWnd=window.open(c+"?code=cafe&SMSID=ESW00017&MMSID=EMG00005","sendURL","toolbar=no,status=no,menubar=no,location=no,scrollbars=no,resizable=no,width=285,height=402,left=100,top=100");}catch(b){}if(a&&!a.closed){a.focus();}},sendAppInstallNoti:function(){var a=new Ajax("/CafeAppInstallPushAlim.nhn",{method:"POST",onLoad:function(b){}.bind(this)});},isEmptyAttach:function(c){var a=c.sStickerId,d=c.sImagePath,b=c.sImageFileName;if(a==""&&d==""&&b==""){return true;}return false;},isEmptyText:function(a,b){if(CafeCommentUtil.trim(a)==""||a==$T(CafeCommentTemplate.MSG.REPLYMSG,{name:b})){return true;}return false;}};var Ellipsis=Class({ellipsisPage:function(f){var d,e,g,a,c,b;f=$(f)||document.body;d=cssquery("._ellipsis",f);for(c=0,b=d.length;c<b;c++){e=d[c];g=this.getParam(e.className);a=this.safeText(e);if(this.ellipsis(e,g[1]||g[0])){e.title=a;}}d=e=g=a=null;},getParam:function(a){if(a){var c=/_param\((.*)\)/;var b=a.match(c);if(b&&b[0]&&b[1]){return b[1].split("|");}}return null;},safeText:function(d,b){var a=d.tagName.toLowerCase();var c=typeof d.innerText!="undefined"?"innerText":"textContent";if(a=="textarea"||a=="input"){c="value";}if(typeof b=="string"){try{d[c]=b;}catch(f){d.innerHTML=(b.replace(/&/g,"&").replace(/</g,"<"));return d;}return d;}return d[c];},ellipsis:function(b,g,k){var d,a,h,f,e,c,j;e=false;b=$(b);k=k||"...";g=parseInt(g,10)||50;d=this.safeText(b);this.safeText(b,k);a=b.offsetWidth;h=b.offsetHeight;g=g-a;this.safeText(b,d);if(b.offsetWidth>=g||b.offsetHeight>h){for(c=2,j=d.length;c<=j;c++){f=d.substring(0,c);this.safeText(b,f);if(b.offsetHeight>h||b.offsetWidth>=g){if(c!=j){this.safeText(b,d.substring(0,c-1)+k);e=true;break;}else{this.safeText(b,f);break;}}}}d=a=f=h=c=j=null;return e;}});var oEllipsis=new Ellipsis();if(typeof window.jindo=="undefined"&&JINDO){window.jindo={$:$,$$:Element.query,$Ajax:function(b,a){this._sUrl=b;this._htOptions=a;this._headers={};return this;},$Element:function(c){var b=arguments.callee;if(c&&c instanceof b){return c;}if(c===null||typeof c=="undefined"){return null;}else{c=jindo.$(c);if(c===null){return null;}}if(!(this instanceof b)){return new b(c);}this._element=(typeof c=="string")?jindo.$(c):c;var a=this._element.tagName;this.tag=(typeof a!="undefined")?a.toLowerCase():"";},$Fn:function(func,thisObject){var cl=arguments.callee;if(func instanceof cl){return func;}if(!(this instanceof cl)){return new cl(func,thisObject);}if(typeof func=="function"){this._func=func;this._this=thisObject;}else{if(typeof func=="string"&&typeof thisObject=="string"){this._func=eval("false||function("+func+"){"+thisObject+"}");}}},$Json:function(b){var a=arguments.callee;if(typeof b=="undefined"){b={};}if(b instanceof a){return b;}if(!(this instanceof a)){return new a(b);}if(typeof b=="string"){this._object=jindo.$Json._oldMakeJSON(b);}else{this._object=b;}}};jindo.$$.getSingle=function(b,a){return Element.query(b,a)[0];},jindo.$Ajax.prototype={header:function(b,c){if(typeof b=="undefined"){return"";}if(typeof b=="string"){if(typeof c=="undefined"){return this._headers[b];}this._headers[b]=c;return this;}try{for(var a in b){if(b.hasOwnProperty(a)){this._headers[a]=b[a];}}}catch(d){}return this;},request:function(b){var a=this._htOptions||{};a.onLoad=function(c){c.json=function(){return jindo.$Json._oldMakeJSON(this.responseText);};c.text=function(){return this.responseText;};a.onload.apply(a.onload,arguments);};a.onError=a.onerror;a.params=b;a.headers=this._headers;new Ajax(this._sUrl,a);}};jindo.$Element.prototype={delegate:function(d,b,c){var a=function(g){var f=g.target||g.srcElement;while(f){if(f.nodeName===b){c.apply(this,[{element:f,$value:function(){return g;}}]);return;}else{if(f===this._element){return;}}f=f.parentNode;}}.bind(this);Event.register(this._element,d,a);}};jindo.$Fn.prototype={attach:function(b,d){var c=this._func.bind(this._this);var a=function(f){c.apply(this,[{element:f.target||f.srcElement,$value:function(){return f;},stop:function(){Event.stop(f);}}]);}.bind(this);Event.register(b,d,a);},bind:function(){var d=Array.prototype.slice.call(arguments);var g=this._func;var e=this._this;var c=function(){var a=Array.prototype.slice.call(arguments);if(d.length){a=d.concat(a);}return g.apply(e,a);};return c;}};jindo.$Json.prototype={$value:function(){return this._object;}};jindo.$Json._oldMakeJSON=function(sObject){try{if(/^(?:\s*)[\{\[]/.test(sObject)){sObject=eval("("+sObject+")");}else{sObject=sObject;}}catch(e){sObject={};}return sObject;};jindo.$Json.fromXML=function(a){var b=JINDO.xml2obj(a);return jindo.$Json(b);};}var aCafeCommentLineStickerUse=[];var CafeCommentLineSticker=Class.extend(CafeCommentComponent,{name:"linesticker",_sImgTpl:'<img src="{=SRC}" alt="{=ALTMSG}">',_sImgBaseUrl:g_sGfmarketThumbnailDomain,elStickerLayer:null,oEntry:{},_domain:g_sCafeUrl,_onClickHideStickerLayer:function(){},__init:function(b){this.oEntry=b.oEntry;this._onClickHideStickerLayer=b.onClickHideStickerLayer;this.elStickerArea=b.elStickerArea;this.elStickerLayer=cssquery.getSingle("div.se2_line_layer",this.elStickerArea);this.elLineStickerButton=cssquery.getSingle("div.line_stc_sec",this.elStickerArea);if(typeof document.location!="undefined"&&document.location.host!=null){if(document.location.protocol.indexOf("https")>-1){this._domain="https://"+document.location.host;}else{this._domain="http://"+document.location.host;}}try{this._oLineSticker=new nhn.LineStickerLayer(this.elStickerLayer,{sImgBaseUrl:this._sImgBaseUrl,sPackListAPI:this._domain+"/gfmarket_sticker/StickerPackListAsync.nhn",sStickerListAPI:this._domain+"/gfmarket_sticker/StickerListAsync.nhn",sStickerShopUrl:g_sGfmarketDomain+"/sticker/Home.nhn",sSmsAPI:this._domain+"/Send.nhn",sSmsNum:"",isExpandMode:false,onClickSticker:this._onClickStickerHandler.bind(this),onClickMoveShop:this._onClickStickerShop.bind(this)});}catch(a){}},onInit:function(b,a){this.__init(b,a);},onShow:function(){Element.addClass(this.elLineStickerButton,"on");this._oLineSticker.show();try{if(typeof parentResizeIframe!="undefined"&&typeof parentResizeIframe=="function"){parentResizeIframe("cafe_main");}}catch(a){}},onClose:function(){Element.removeClass(this.elLineStickerButton,"on");this._oLineSticker.hide();try{if(typeof parentResizeIframe!="undefined"&&typeof parentResizeIframe=="function"){parentResizeIframe("cafe_main");}}catch(a){}},actClose:function(){this.close();},_onClickStickerShop:function(a){this._onClickHideStickerLayer();},_onClickStickerHandler:function(a){setTimeout(function(b){clickcr(this,"cmt.stickersend","","","");this.oEntry.htOption.stickerId=b.marketStickerId;this.oEntry.htOption.stickerUrl=b.imageUrl.replace(/^https?:\/\/[^\/]*([\/]?storep)?/i,g_sGfmarketThumbnailDomain);this.oEntry.attachSticker(this.elStickerArea);this.oEntry=null;this.onClose();}.bind(this,a),100);}});CommentAttach=Class({name:"CommentAttach",_elTargetInput:null,sStickerId:"",sImagePath:"",sImageFileName:"",nImageWidth:"",nImageHeight:"",initializeForAttachImage:function(a,b){if(CafeCommentUtil.trim(g_sUserId)==""){return;}this._elTargetInput=$(a+b);try{phup.config(this._elTargetInput,this._callBackAttachImage.bind(this),{domain:g_sPhotoInfraUploadDomain,getSessionKey:this._getSessionKey,userId:g_sUserId,resourcePath:"/ft/comment",allowedImageType:["png","jpg","jpeg","bmp","gif"],maxFileSize:10485760,timeout:{millisecond:60000,handler:this._uploadTimeout},sslEnabled:(document.location.protocol==="https:")});}catch(c){}},_getSessionKey:function(b){var a=new Ajax("/PhotoInfraSessionKey.nhn",{method:"POST",async:false,onLoad:function(d){var c=JSON.parse(d.responseText);b(c.message.result);}});a.request();},_uploadTimeout:function(a){alert("업로드 시간이 초과되었습니다.\n이미지를 다시 등록해 주세요.");},_callBackAttachImage:function(d){if(d==null){return;}var c=this._getErrorText(d.code);if(c!=""){alert(c);return;}var b=cssquery.getSingle("! table.cminput td.i2 > div > div",this._elTargetInput);if(b==null){return;}var a=$T(CafeCommentTemplate.AttachArea,{imageUrl:g_sCafeThumbUrl+d.url+"?type=ff80_80",stickerClass:""});b.innerHTML=a;b.style.display="block";this.setAttachInfo("",d.path+"/",d.fileName,d.width,d.height);this.changeBtnOnOff(b,this.sStickerId,this.sImagePath,this.sImageFileName);},attachSticker:function(d,c,b){if(d==null){return;}var a=$T(CafeCommentTemplate.AttachArea,{imageUrl:b+"?type=p75_75",stickerClass:"sticker"});d.innerHTML=a;d.style.display="block";this.setAttachInfo(c,"","","","");this.changeBtnOnOff(d,this.sStickerId,this.sImagePath,this.sImageFileName);},changeBtnOnOff:function(b,a,e,d){var h;if(a!=""){h="sticker";}else{if(e!=""&&d!=""){h="image";}else{return;}}var g=cssquery("!tr ~tr > td > ul > li",b);var f=cssquery.getSingle("div",g[0]);var c=cssquery.getSingle("div",g[1]);if(h=="sticker"){Element.addClass(f,"u_cbox_btn_upload_sticker_on");if(Element.hasClass(c,"u_cbox_btn_upload_photo_on")){Element.removeClass(c,"u_cbox_btn_upload_photo_on");}return;}if(h=="image"){Element.addClass(c,"u_cbox_btn_upload_photo_on");if(Element.hasClass(f,"u_cbox_btn_upload_sticker_on")){Element.removeClass(f,"u_cbox_btn_upload_sticker_on");}}},_resetBtnOnff:function(a){var d=cssquery("!tr ~tr > td > ul > li",a);var c=cssquery.getSingle("div",d[0]);var b=cssquery.getSingle("div",d[1]);if(Element.hasClass(c,"u_cbox_btn_upload_sticker_on")){Element.removeClass(c,"u_cbox_btn_upload_sticker_on");}if(Element.hasClass(b,"u_cbox_btn_upload_photo_on")){Element.removeClass(b,"u_cbox_btn_upload_photo_on");}},resetAttachArea:function(a){if(a==null){return;}a.innerHTML="";a.style.display="none";this._resetAttachInfo();this._resetAttachImageInputValue();this._resetBtnOnff(a);},setAttachInfo:function(a,e,c,b,d){this._setStickerInfo(a);this._setImageInfo(e,c,b,d);},_resetAttachInfo:function(){this.setAttachInfo("","","","","");},_resetAttachImageInputValue:function(){if(this._elTargetInput==null){return;}this._elTargetInput.value="";},_setStickerInfo:function(a){this.sStickerId=a;},_setImageInfo:function(d,b,a,c){this.sImagePath=d;this.sImageFileName=b;this.nImageWidth=a;this.nImageHeight=c;},_getErrorText:function(a){if(a=="IMAGE"){return"";}if(a=="UNSUPPORTED_EXTENSION"){return"지원되지 않는 파일입니다.\n파일 형식을 확인해주세요.";}if(a=="LIMITATION_BY_IMAGE"){return"최대 10MB까지 등록 가능합니다.\n선택하신 파일의 용량을 확인해주세요.";}return"일시적으로 이미지 등록에 실패했습니다.\n잠시 후에 다시 등록해주세요.";}});!function(){var a=function(){var m=function(){return(new Date).getMilliseconds()+Math.floor(100000*Math.random());},d=function(h,l){var p=document.createElement("iframe");return p.src=l,p.style.display="none",p.style.position="absolute",p.style.width="1px",p.style.height="1px",p.style.left="-100px",p.style.top="-100px",h.appendChild(p),p;},f=function(r){var s,u,h={},l=r.split("|");for(s=0;s<l.length;s+=1){u=l[s].split("="),"exif"===u[0]?h[u[0]]=u[1].replace(/&quot;/g,'"'):/^[0-9]+$/.test(u[1])===!0?h[u[0]]=parseInt(u[1]):h[u[0]]=u[1];}return h.index=0,h;},w=function(s,u){var y,l,r,h={};for(y=u.replace("<![CDATA[","").replace("]]>","").match(/<?[^>]*?>([\S\s]*)/)[1].match(/<([^>]*)>([^<]*)<\/([^>]*)>/g),l=0;l<y.length;l+=1){r=y[l].match(/<([^>]*)>([^<]*)<\/[^>]*>/),"exif"===r[1]&&(r[2]=r[2].replace(/&quot;/g,'"')),h[r[1]]=r[2];}return h.index=s,void 0===h.code?h.code="IMAGE":h={code:h.code},h;},c=function(h){return h?"https:":"http:";},j=function(){var h;try{if(window.XMLHttpRequest){h=new XMLHttpRequest;}else{if(window.ActiveXObject){try{h=new ActiveXObject("Msxml2.XMLHTTP");}catch(l){h=new ActiveXObject("Microsoft.XMLHTTP");}}}}finally{return h;}},q=function(l,p){var r,h=l.substring(l.lastIndexOf(".")+1).toLowerCase();for(r=0;r<p.length;r+=1){if(h===p[r]){return !0;}}return !1;},b=function(y,z,A,t,h){var s=j(),l=new window.FormData;l.append("image",z),s.onload=function(){A(200===s.status?w(y,s.responseText):{code:"CLIENT"});},s.open("POST",t,!0),h.millisecond>0&&(s.timeout=h.millisecond,s.ontimeout=function(){h.handler({filename:z.name});}),s.send(l);},v=function(z,A,B,s,p,h,y,l){return c(z)+"//"+A+"/"+B+"/simpleUpload/"+l+"?userId="+s+"&extractExif="+p+"&extractAnimatedCnt="+h+"&autorotate="+y;},x=function(){return/naver\.net$/.test(document.domain)||/naver\.com$/.test(document.domain)||/navercorp\.com$/.test(document.domain)||/arcadur\.com$/.test(document.domain)||/webtoons\.com$/.test(document.domain)||/linedict\.com$/.test(document.domain)||/pholar\.co$/.test(document.domain)||/vlive\.tv$/.test(document.domain)||/line\.me$/.test(document.domain);},g=[],k={};return k.getUploader=function(A,D,I){var C,B,G,J,M,N,L,F,K,O,o,e,H,u=document.getElementsByTagName("body")[0],z={BASE64:{upload:function(Q){var s,p,h=Q&&Q.base64image,r=Q&&Q.imageFileName,y="phup_callback_"+m();if(n(I),!(h&&"string"==typeof h&&h.length>0)){throw"[phup.js] usage : base64uploader.upload(param)\n[phup.js] error : param.base64image must be a not empty string";}if(!(r&&"string"==typeof r&&r.length>0)){throw"[phup.js] usage : base64uploader.upload(param)\n[phup.js] error : param.imageFileName must be a not empty string";}e(function(l){if(!l){return void D({code:"FAIL_TO_GET_SESSION_KEY"});}if(B=C.contentWindow.document.getElementById("phup_upload_form"),!B){return void D({code:"FAIL_TO_LOAD_IFRAME"});}if(q(r,o)===!1){return void D({code:"UNSUPPORTED_EXTENSION"});}for(window[y]=function(t){p=!0,D(f(t)),window[y]=null;},s=B.firstChild;null!=s;s=s.nextSibling){switch(s.id){case"phup_callback_func":s.value=y;break;case"imageFileName":s.value=r,s.disabled=null;break;case"base64image":s.value=h,s.disabled=null;}}B.action=v(N,J,l,M,L,F,K,0),B.submit(),H.millisecond>0&&setTimeout(function(){p||(window[y]=function(){window[y]=null;},H.handler({filename:r}));},H.millisecond),B.reset();});}}},P=z[A],n=function(h){if(G=h&&h.resourcePath||"",J=h&&h.domain,M=h&&h.userId,N=h&&(h.sslEnabled||!1),L=h&&(h.extractExif||!1),F=h&&(h.extractAnimatedCnt||!1),K=h&&(h.autorotate||!1),O=h&&(h.maxFileSize||10485760),o=h&&h.allowedImageType||["png","jpg","jpeg","bmp","gif"],e=h&&h.getSessionKey,H=h&&(h.timeout||{millisecond:0,handler:function(){}}),!(J&&"string"==typeof J&&J.length>0)){throw"[phup.js] usage : phup.getUploader(type, handler, options)\n[phup.js] error : options.domain must be a not empty string";}if(!(M&&"string"==typeof M&&M.length>0)){throw"[phup.js] usage : phup.getUploader(type, handler, options)\n[phup.js] error : options.userId must be a not empty string";}if(!e||"function"!=typeof e){throw"[phup.js] usage : phup.getUploader(type, handler, options)\n[phup.js] error : options.getSessionKey must be a function";}if("boolean"!=typeof N){throw"[phup.js] usage : phup.getUploader(type, handler, options)\n[phup.js] error : options.sslEnabled must be a boolean";}if("boolean"!=typeof L){throw"[phup.js] usage : phup.getUploader(type, handler, options)\n[phup.js] error : options.extractExif must be a boolean";}if("boolean"!=typeof F){throw"[phup.js] usage : phup.getUploader(el, handler, options)\n[phup.js] error : options.extractAnimatedCnt must be a boolean";}if("boolean"!=typeof K){throw"[phup.js] usage : phup.getUploader(type, handler, options)\n[phup.js] error : options.autorotate must be a boolean";}if("number"!=typeof O){throw"[phup.js] usage : phup.getUploader(type, handler, options)\n[phup.js] error : options.maxFileSize must be a number";}if(!(o instanceof Array&&o.length>0)){throw"[phup.js] usage : phup.getUploader(type, handler, options)\n[phup.js] error : options.allowedImageType must be a not empty string array";}if("number"!=typeof H.millisecond){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.timeout.millisecond must be a number";}if("function"!=typeof H.handler){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.timeout.handler must be a function";}C||(C=d(u,G+"/phup_frame.html"));};if(!P){throw"[phup.js] usage : phup.getUploader(type, handler, options)\n[phup.js] error : type must be one of following - BASE64";}if(!I){throw"[phup.js] usage : phup.getUploader(type, handler, options)\n[phup.js] error : options must be an object or a function";}return"function"!=typeof I&&n(I),P;},k.config=function(D,G,K){var P,Q,M,H,L,R,z,r,J,B,C,U,u,s,e=document.getElementsByTagName("body")[0],l=document.createElement("div"),F=D&&D.onclick,o=D&&D.onchange,n=(D&&D.multiple,function(h){if(H=h&&h.resourcePath||"",L=h&&h.domain,R=h&&h.userId,z=h&&(h.sslEnabled||!1),r=h&&(h.extractExif||!1),J=h&&(h.extractAnimatedCnt||!1),B=h&&(h.autorotate||!1),C=h&&(h.maxFileSize||10485760),U=h&&h.allowedImageType||["png","jpg","jpeg","bmp","gif"],u=h&&h.getSessionKey,s=h&&(h.timeout||{millisecond:0,handler:function(){}}),!(L&&"string"==typeof L&&L.length>0)){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.domain must be a not empty string";}if(!(R&&"string"==typeof R&&R.length>0)){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.userId must be a not empty string";}if(!u||"function"!=typeof u){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.getSessionKey must be a function";}if("boolean"!=typeof z){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.sslEnabled must be a boolean";}if("boolean"!=typeof r){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.extractExif must be a boolean";}if("boolean"!=typeof J){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.extractAnimatedCnt must be a boolean";}if("boolean"!=typeof B){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.autorotate must be a boolean";}if("number"!=typeof C){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.maxFileSize must be a number";}if(!(U instanceof Array&&U.length>0)){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.allowedImageType must be a not empty string array";}if("number"!=typeof s.millisecond){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.timeout.millisecond must be a number";}if("function"!=typeof s.handler){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options.timeout.handler must be a function";}Q||(Q=d(e,H+"/phup_frame.html"));});if(!D||!D.tagName||"INPUT"!==D.tagName){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : el must be an input tag";}if(-1!==g.indexOf(D)){throw"[phup.js] el is already bound with phup.js";}if(g.push(D),!G||"function"!=typeof G){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : handler must be a function";}if(!K){throw"[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : options must be an object or a function";}"function"!=typeof K&&n(K),D.onclick=function(h){F&&F(h),"function"==typeof K&&n(K()),u(function(p){P=p,M&&D.onupload(M);});},void 0!==j()&&void 0!==window.File&&x()?(D.onupload=function(){var h,p=D.files;if(o&&o(),""!==D.value){if(!P){return void G({code:"FAIL_TO_GET_SESSION_KEY"});}for(h=0;h<p.length;h+=1){q(p[h].name,U)===!1?G({code:"UNSUPPORTED_EXTENSION"}):p[h].size>C?G({code:"LIMITATION_BY_IMAGE"}):b(h,p[h],G,v(z,L,P,R,r,J,B,h),s);}}},D.onchange=function(h){P?D.onupload(h):M=h;}):(D.multiple=!1,D.onupload=function(O){var y,I,E=D.name,t=D.value.replace(/^C:\\fakepath\\/,""),A=D.parentNode,N=Q.contentWindow.document.getElementById("phup_upload_form"),p="phup_callback_"+m();if(o&&o(O),""!==D.value){if(!P){return void G({code:"FAIL_TO_GET_SESSION_KEY"});}if(!N){return void G({code:"FAIL_TO_LOAD_IFRAME"});}if(q(D.value,U)===!1){return void G({code:"UNSUPPORTED_EXTENSION"});}for(window[p]=function(h){I=!0,G(f(h)),D.onclick=F,window[p]=null;},D.name="image",D.onclick=function(h){h&&h.preventDefault&&h.preventDefault();},A.replaceChild(l,D),N.appendChild(D),y=N.firstChild;null!=y;y=y.nextSibling){switch(y.id){case"phup_callback_func":y.value=p;}}N.action=v(z,L,P,R,r,J,B,0),N.submit(),s.millisecond>0&&setTimeout(function(){I||(window[p]=function(){window[p]=null;},D.onclick=F,s.handler({filename:t}));},s.millisecond),N.reset(),D.name=E,A.replaceChild(D,l);}},D.onchange=function(h){P?D.onupload(h):M=h;});},k;};"undefined"==typeof define?window.phup=new a:define(function(){return new a;});}();if(typeof window.jsCompFileCheckSum=="undefined"){window.jsCompFileCheckSum={};}window.jsCompFileCheckSum.ScriptArticleReadCommentPack=true;