if(typeof window!="undefined"&&typeof window.cafe=="undefined"){window.cafe={};}cafe.LikeItMember=Class({name:"LikeItMember",_sUrl:null,_bEnable:false,_bIsProcessing:false,_elUpArticleMemberBtn:null,_elLikeItArea:null,_elMemberList:null,_elMemberEmptyList:null,_elList:null,_oCafeCommentMenu:null,_oOption:null,_oPage:null,__init:function(a){if(a){this._initVar(a);}if(this._bEnable){this._setEvent();}},_initVar:function(a){this._oOption=a;this._bEnable=a.bEnable;this._elUpArticleMemberBtn=a.elUpArticleMemberBtn;this._elLikeItArea=a.elLikeItArea;this._elMemberList=a.elMemberList;this._elMemberEmptyList=a.elMemberEmptyList;this._elList=$("memberList");this._oCafeCommentMenu=a.oCafeCommentMenu;this._oPage=new CafePaginate({elTarget:this._elMemberList});this._sUrl=a.listURL;},_setEvent:function(){if(this._elUpArticleMemberBtn){Event.register(this._elUpArticleMemberBtn,"click",this._onEvent.bindForEvent(this));}if(this._elMemberList){Event.register(this._elMemberList,"click",this._onClick.bindForEvent(this));}},_onEvent:function(a){if(oUtil.checkEvent(a)){oUtil.processEvent(a,this);}},_onClick:function(b){var c=b.element;if(Element.hasClass(c.parentNode,"link_profile")){return;}b.stop();if(Element.hasClass(c,"_nickUI")){var a=cssquery.getSingle("input[name=writerid]",c.parentNode).value;if(a){ui(b,a,3,c.innerHTML,this._oOption.clubId,this._oOption.memberInfo,this._oOption.entireBoardStaff,false,this._oOption.clubUrl,this._oOption.activityStopExecutable,this._oOption.menuid);}}else{if(Element.hasClass(c.parentNode,"cc_paginate")){this._oPage.action(c);this.update();}}},_clickLikeItMember:function(a,c,b){if(Element.visible(this._elLikeItArea)&&this._oCafeCommentMenu){this._oCafeCommentMenu.enableComment();return;}if(this._oCafeCommentMenu){this._oCafeCommentMenu.enableLikeItMember();}else{Element.addClass(a.element,"m-tcol-p");}Element.show(this._elLikeItArea);this.update();},update:function(){if(this._bIsProcessing){return;}this._bIsProcessing=true;var nPage=this._oPage.getPageNo();var sURL=$T(this._oOption.listURL,{clubid:this._oOption.clubId,articleid:this._oOption.articleId,page:nPage});var ajax=new Ajax(sURL,{method:"GET",suspend:true,charset:"euc-kr",onLoad:function(res){try{if(typeof res==undefined||res==null||!res.responseText){JEagleEyeClient.raiseError(ex,this,{message:" likeItMember  response error. :"+res});}var oRes=eval("("+res.responseText+")");this._process(oRes);this._bIsProcessing=false;}catch(ex){JEagleEyeClient.raiseError(ex,this,{message:"likeItMember"+res.responseText});this._bIsProcessing=false;throw ex;}}.bind(this)});ajax.request();},_process:function(a){var b=this._getListStr(a.memberList);if(b!=""){this._elList.innerHTML=b;Element.show(this._elMemberList);Element.hide(this._elMemberEmptyList);}else{Element.show(this._elMemberEmptyList);Element.hide(this._elMemberList);}this._oPage.setTotalCnt(a.totalCount);this._oPage.setPageSize(10);this._oPage.page();this._oPage.setChangePage(false);htResult=a=null;},_getListStr:function(c){var f=c.length;var h="";var b=null;var a=false;for(var d=0;d<f;d++){b=c[d];a=d%2;var e=this._getProfileImageTpl(b);var g=b.secedeMember;h+=$T(CafeCommentTemplate.LikeItMember,{isOdd:a?"odd":"",profileImageTpl:e,nickName:b.nickName,writeDate:b.writeDate,writerid:g?"":b.memberId});}return h;},_getProfileImageTpl:function(a){var b="/CafeMemberNetworkView.nhn?m=view&clubid="+this._oOption.clubId+"&memberid="+a.memberId;return $T(CafeCommentTemplate.ProfileImage.LikeIt,{profileImageUrl:a.profileImageUrl,memberProfilePageUrl:b,defaultProfileImageUrl:a.defaultProfileImageUrl});}});if(typeof window.jsCompFileCheckSum=="undefined"){window.jsCompFileCheckSum={};}window.jsCompFileCheckSum.ScriptArticleReadUpArticle=true;