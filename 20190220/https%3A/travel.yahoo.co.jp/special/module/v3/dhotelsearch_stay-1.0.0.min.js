/**
 * @file  dhotelsearch_stay-[version].js
 * @brief トラベル国内宿泊 宿泊日プルダウン制御 
 * @version $Id$
 */

/**
 * @brief DhotelsearchStay トラベル国内宿泊 都道府県・Lエリアプルダウン制御
 */
var DhotelsearchStay = function (form_id) {
    // IDを指定のない場合は終了
    if (!form_id) return;
    
    /**
     * 初期化
     */     
    var param_haku = "";
    var elm = document.getElementById(form_id);

    initStay(_myGetQuery('haku'));
    
    
    /**
     * @brief 初期化関数 onload時に実行
     * @praam[in] 泊数
     */
    function initStay(haku) {
        //パラメータがあればそれをグローバル変数に保存しておく
        param_haku = haku;
        //elm.length = 6;
        for (var i=0; i<6; i++ ){
            elm.haku.options[i] = new Option(i+1,i+1);
        }
        
        changeInStay();
        checkStay();
    }
    
    function changeInStay() {
        
        if (param_haku != null) {
            for(i=0; i<6; i++) {
                if (elm.haku.options[i].value == param_haku) {
                    elm.haku.options[i].selected = true;
                    param_haku = null;
                    break;
                }
            }
            
        }
        
    }

    /**
     * @brief URLから指定したパラメータを取得
     * @praam[in] パラメータのキー
     */
    function _myGetQuery(myKeyWord){
        myKeyWord = "&" + myKeyWord + "=";
        myValue = null;
        myStr = location.search;
        myLen = myStr.length;
        myStr = "&" + myStr.substring(1,myLen) + "&";
        myOfst = myStr.indexOf(myKeyWord);
        if (myOfst != -1){
            myStart = myOfst + myKeyWord.length;
            myEnd   = myStr.indexOf("&" , myStart);
            myValue = myStr.substring(myStart,myEnd);
            myValue = unescape(myValue);
        }
        return myValue;
    }
}
