(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"1txG":function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UsernameValidator_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"username"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isUsernameAvailable"},arguments:[{kind:"Argument",name:{kind:"Name",value:"username"},value:{kind:"Variable",name:{kind:"Name",value:"username"}}}],directives:[]}]}}],loc:{start:0,end:93}};r.loc.source={body:"query UsernameValidator_User($username: String!) {\nisUsernameAvailable(username: $username)\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=r},"4PHc":function(e,t,r){},"4uwt":function(e,t,r){"use strict";r.r(t);var n=r("mrSG"),o=r("q1tI"),a=r("oJmH"),s=r("/MKj"),i=r("/7QA"),c=r("yR8l"),u=r("geRD"),l=r("ZBeb"),p=r("Qdxp");var d,h=r("MgK0"),m=r("SFR8");!function(e){e[e.DeviceCookieThrottleReached=3009]="DeviceCookieThrottleReached",e[e.FailedToDecodeJSON=1002]="FailedToDecodeJSON",e[e.FailedToVerifyAuthyToken=3012]="FailedToVerifyAuthyToken",e[e.IncorrectCaptcha=1e3]="IncorrectCaptcha",e[e.InvalidAuthyToken=3013]="InvalidAuthyToken",e[e.InvalidPassword=2005]="InvalidPassword",e[e.InvalidUsername=2004]="InvalidUsername",e[e.MissingAuthyToken=3011]="MissingAuthyToken",e[e.MultipleAccountsLinkedToEmail=3004]="MultipleAccountsLinkedToEmail",e[e.NoAccountLinkedToEmail=3005]="NoAccountLinkedToEmail",e[e.PasswordMissing=3003]="PasswordMissing",e[e.SuspendedUser=3008]="SuspendedUser",e[e.UnexpectedError=3e3]="UnexpectedError",e[e.UserCredentialsIncorrect=3001]="UserCredentialsIncorrect",e[e.UserDoesNotExist=1014]="UserDoesNotExist",e[e.UserHasBeenDeleted=3007]="UserHasBeenDeleted",e[e.UserNeedsPasswordReset=3006]="UserNeedsPasswordReset",e[e.UsernameMissing=3002]="UsernameMissing"}(d||(d={}));var g,f="https://passport.twitch.tv/login",b="https://passport.internal.us-west-2.twitch.tv/login";!function(e){e[e.BlacklistedEmailDomain=2002]="BlacklistedEmailDomain",e[e.BlacklistedIP=2001]="BlacklistedIP",e[e.EmailThrottled=2013]="EmailThrottled",e[e.FailedToDecodeJSON=1002]="FailedToDecodeJSON",e[e.IPThrottled=2014]="IPThrottled",e[e.IncorrectCaptcha=1e3]="IncorrectCaptcha",e[e.InvalidBirthday=2003]="InvalidBirthday",e[e.InvalidPassword=2005]="InvalidPassword",e[e.InvalidUsername=2004]="InvalidUsername",e[e.MissingFields=2006]="MissingFields",e[e.MultiAccountDisabled=2015]="MultiAccountDisabled",e[e.PasswordMissing=3003]="PasswordMissing",e[e.TooManyUsersWithEmail=2007]="TooManyUsersWithEmail",e[e.UnexpectedIssue=2e3]="UnexpectedIssue",e[e.UserNameMissing=3002]="UserNameMissing",e[e.UserUnder13=2011]="UserUnder13",e[e.UsernameExists=2008]="UsernameExists"}(g||(g={}));var v,S="https://passport.twitch.tv/register";!function(e){e[e.FailedToDecodeJSON=1002]="FailedToDecodeJSON",e[e.FailedToVerifyAuthyToken=3012]="FailedToVerifyAuthyToken",e[e.InvalidAuthyToken=3013]="InvalidAuthyToken",e[e.MissingAuthyToken=3011]="MissingAuthyToken",e[e.NoConnectedTwitchUser=5004]="NoConnectedTwitchUser",e[e.SuspendedUser=3008]="SuspendedUser",e[e.UnableToVerifyIdentity=5003]="UnableToVerifyIdentity",e[e.UnexpectedError=3e3]="UnexpectedError"}(v||(v={}));var k,F="https://passport.twitch.tv/facebook/login";!function(e){e[e.BlacklistedIP=2001]="BlacklistedIP",e[e.EmailThrottled=2013]="EmailThrottled",e[e.FacebookAccountAlreadyLinked=5006]="FacebookAccountAlreadyLinked",e[e.FailedToDecodeJSON=1002]="FailedToDecodeJSON",e[e.IPThrottled=2014]="IPThrottled",e[e.InvalidPassword=2005]="InvalidPassword",e[e.InvalidUsername=2004]="InvalidUsername",e[e.TooManyUsers=2017]="TooManyUsers",e[e.UnableToVerifyIdentity=5003]="UnableToVerifyIdentity",e[e.UnexpectedFacebookIssue=5001]="UnexpectedFacebookIssue",e[e.UnexpectedSignupIssue=2e3]="UnexpectedSignupIssue",e[e.UsernameExists=2008]="UsernameExists"}(k||(k={}));var y,w="https://passport.twitch.tv/facebook/register";!function(e){e[e.DeviceCookieThrottleReached=3009]="DeviceCookieThrottleReached",e[e.FacebookAccountAlreadyLinked=5006]="FacebookAccountAlreadyLinked",e[e.FailedToDecodeJSON=1002]="FailedToDecodeJSON",e[e.FailedToVerifyAuthyToken=3012]="FailedToVerifyAuthyToken",e[e.IncorrectCaptcha=1e3]="IncorrectCaptcha",e[e.InvalidAuthyToken=3013]="InvalidAuthyToken",e[e.InvalidPassword=2005]="InvalidPassword",e[e.InvalidUsername=2004]="InvalidUsername",e[e.MissingAuthyToken=3011]="MissingAuthyToken",e[e.MultipleAccountsLinkedToEmail=3004]="MultipleAccountsLinkedToEmail",e[e.NoAccountLinkedToEmail=3005]="NoAccountLinkedToEmail",e[e.PasswordMissing=3003]="PasswordMissing",e[e.SuspendedUser=3008]="SuspendedUser",e[e.UnableToConnect=5005]="UnableToConnect",e[e.UnexpectedError=3e3]="UnexpectedError",e[e.UnexpectedFacebookIssue=5001]="UnexpectedFacebookIssue",e[e.UserCredentialsIncorrect=3001]="UserCredentialsIncorrect",e[e.UserDoesNotExist=1014]="UserDoesNotExist",e[e.UserHasBeenDeleted=3007]="UserHasBeenDeleted",e[e.UserNeedsPasswordReset=3006]="UserNeedsPasswordReset",e[e.UsernameMissing=3002]="UsernameMissing"}(y||(y={}));var E="https://passport.twitch.tv/facebook/connect";var C,T=r("kRBY"),O=r("ZqP/"),I=r("Ue10"),M=r("Urk9");!function(e){e.SubHeaderText="sub-header-text"}(C||(C={}));var j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,o.createElement(I.fb,{display:I.Da.Flex,alignItems:I.i.Center,justifyContent:I.eb.Center},o.createElement(I.fb,{margin:{right:.5},display:I.Da.InlineFlex},o.createElement(I.Cb,{asset:I.Db.LogoGlitch,width:40,height:40,type:I.Eb.Brand})),o.createElement(I.Ca,{fontSize:I.Ia.Size4,bold:!0},this.message)),this.renderUserInfo(),this.renderSubHeader())},Object.defineProperty(t.prototype,"message",{get:function(){switch(this.props.currentStep){case O.a.LoginCaptcha:case O.a.StartLogin:case O.a.FacebookLogin:return Object(i.d)("Log in to Twitch","AuthFormHeader");case O.a.FacebookSignup:return Object(i.d)("Sign up with Facebook","AuthFormHeader");case O.a.FacebookConnect:case O.a.FacebookConnectCaptcha:return Object(i.d)("Connect your Facebook Account","AuthFormHeader");case O.a.StartSignup:return Object(i.d)("Join Twitch today","AuthFormHeader");case O.a.FacebookLoginTwoFactor:return Object(i.d)("Welcome back!","AuthFormHeader");case O.a.LoginTwoFactor:case O.a.VerificationTwoFactor:case O.a.FacebookConnectTwoFactor:var e=void 0;if(e=this.props.currentStep===O.a.FacebookConnectTwoFactor?this.props.fbConnectUsername:this.props.loginUsername)return Object(i.d)("Welcome back, {name}!",{name:e},"AuthFormHeader");break;case O.a.StartVerification:case O.a.VerificationCaptcha:return Object(i.d)("Confirm your password","AuthFormHeader");default:return}},enumerable:!0,configurable:!0}),t.prototype.renderUserInfo=function(){if(this.props.currentStep!==O.a.StartVerification||!this.props.currentUserDisplayName&&!this.props.currentUserLogin)return null;var e=this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.profileImageURL||i.a.defaultAvatarURL;return o.createElement(I.fb,{display:I.Da.Flex,alignItems:I.i.Center,margin:{top:1}},o.createElement(I.fb,{margin:{right:1}},o.createElement(I.t,{size:40,alt:Object(i.d)("User avatar","AuthFormHeader"),src:e})),o.createElement(I.Ca,{type:I.gc.Strong},this.props.currentUserDisplayName||this.props.currentUserLogin))},t.prototype.renderSubHeader=function(){return this.props.currentStep!==O.a.StartVerification?null:o.createElement(I.fb,{margin:{top:1}},o.createElement(I.Ca,{"data-test-selector":C.SubHeaderText},Object(i.d)("For security, please enter your password to continue.","AuthFormHeader")))},t}(o.PureComponent),D=Object(c.a)(M,{skip:function(e){return!e.currentUserLogin}})(j),L=r("imBb"),_=(r("VcSt"),r("EQ2E")),V=r("tKDy"),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(e){Object(V.j)({screen:t.props.screen,target:t.props.target,action:V.a.Click}),t.props.onClick&&t.props.onClick(e)},t}return n.__extends(t,e),t.prototype.render=function(){return o.createElement(I.C,n.__assign({},this.props,{onClick:this.onClick}))},t}(o.Component),U=(r("pKR5"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onEnter=function(){t.props.disableContinueButton||(Object(V.j)({screen:V.f.Captcha,target:V.g.Submit,action:V.a.Enter}),t.continue())},t.continue=function(){return n.__awaiter(t,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return this.props.disableContinueButton?[3,2]:[4,this.props.onContinueClicked()];case 1:e.sent(),this.captchaInstance&&this.captchaInstance.reset(),e.label=2;case 2:return[2]}})})},t.onCaptchaRefDelegate=function(e){t.captchaInstance=e},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){L.bindGlobal("enter",this.onEnter),Object(V.i)(V.f.Captcha)},t.prototype.componentWillUnmount=function(){L.unbind("enter")},t.prototype.render=function(){return o.createElement(I.fb,null,o.createElement(I.Ca,{type:I.gc.Span,bold:!0},Object(i.d)("We need to make sure you're not a robot!","CaptchaForm")),"Â ",o.createElement(I.Ca,{type:I.gc.Span},Object(i.d)("Please complete the reCAPTCHA below.","CaptchaForm")),o.createElement(I.fb,{margin:2,display:I.Da.Flex,justifyContent:I.eb.Center,className:"captcha-form__captcha"},o.createElement(_.a,{showLoader:!0,screen:V.f.Captcha,refDelegate:this.onCaptchaRefDelegate,onChange:this.props.onCaptchaChanged})),o.createElement(P,{screen:V.f.Captcha,target:V.g.Submit,fullWidth:!0,onClick:this.continue,disabled:this.props.isLoading||this.props.disableContinueButton,state:this.props.isLoading?I.H.Loading:I.H.Default},Object(i.d)("Continue","CaptchaForm")))},t}(o.PureComponent)),x="facebook-jssdk";r("VLV5");var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={processing:!1},t.report=function(e){t.props.onFailure&&t.props.onFailure(e)},t.onClick=function(){return n.__awaiter(t,void 0,void 0,function(){var e,t,r,o,a=this;return n.__generator(this,function(s){switch(s.label){case 0:if(this.props.onClick&&this.props.onClick(),this.state.processing||this.props.disabled)return[2];this.setState({processing:!0}),s.label=1;case 1:return s.trys.push([1,,5,6]),[4,function(e){return n.__awaiter(this,void 0,Promise,function(){return n.__generator(this,function(t){return[2,new Promise(function(t,r){var n=window.FB;if(n)return t(n);window.fbAsyncInit=function(){var n=window.FB;if(!n)return r(new Error("could not init facebook sdk library"));n.init({xfbml:!1,cookie:!1,version:"v3.1",appId:e.applicationID}),t(n)},function(t,r,n){var o=t.getElementsByTagName(r)[0],a=o,s=o;t.getElementById(n)||((s=t.createElement(r)).id=n,s.src="https://connect.facebook.net/"+e.language+"/sdk.js",a.parentNode.insertBefore(s,a))}(document,"script",x)})]})})}({applicationID:this.props.applicationID,language:this.props.language})];case 2:return(e=s.sent())?(t=function(){return new Promise(function(t){return e.api("/me",{locale:a.props.language,fields:"name"},t)})},[4,function(){return new Promise(function(t){return e.login(t,{scope:"email,user_friends"})})}()]):[2,this.report(new Error("FacebookSDK.load resolve with falsy value."))];case 3:return(r=s.sent()).authResponse?[4,t()]:[2,this.report(new Error("user is not loggued in: "+r.status))];case 4:return(o=s.sent()).error?[2,this.report(new Error("could not get facebook user: "+o.error.toString()))]:(this.props.onSuccess({name:o.name,id:r.authResponse.userID,accessToken:r.authResponse.accessToken}),[3,6]);case 5:return this.setState({processing:!1}),[7];case 6:return[2]}})})},t}return n.__extends(t,e),t.prototype.render=function(){return o.createElement("button",{onClick:this.onClick,disabled:this.state.processing,className:"facebook-connect-button"},o.createElement(I.Cb,{width:30,height:30,type:I.Eb.Inherit,asset:I.Db.Facebook}),Object(i.d)("Connect with Facebook","FacebookConnectButton"))},t}(o.Component),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onFacebookLoginClicked=function(){Object(V.j)({screen:t.props.screen,target:V.g.FacebookFooter,action:V.a.Click})},t.handleCallback=function(e){e.id&&e.accessToken&&t.props.onFacebookConnected(n.__assign({},e))},t}return n.__extends(t,e),t.prototype.render=function(){return o.createElement(I.fb,{display:I.Da.Flex,flexDirection:I.Ga.Column,alignItems:I.i.Center,margin:{bottom:.5}},o.createElement(I.fb,{fullWidth:!0,display:I.Da.Flex,alignItems:I.i.Center,flexDirection:I.Ga.Row,margin:{bottom:2}},o.createElement(I.Ob,{borderBottom:!0,flexGrow:1,margin:{right:.5}}),o.createElement(I.Ca,{color:I.R.Alt2},Object(i.d)("or","FacebookConnectFooter")),o.createElement(I.Ob,{borderBottom:!0,flexGrow:1,margin:{left:.5}})),o.createElement(I.Ob,{color:I.R.Overlay,fontSize:I.Ia.Size6,"data-a-target":"facebook-button-div"},o.createElement(A,{onSuccess:this.handleCallback,applicationID:"161273083968709",language:this.props.facebookLocale,onClick:this.onFacebookLoginClicked})))},t}(o.PureComponent);var R,B=Object(s.connect)(function(e){return{facebookLocale:Object(T.d)(e).replace("-","_")}})(N),q=r("fvjX"),H=r("ZIMp"),Y=(r("QRgD"),function(e){return o.createElement(I.Ob,{className:"facebook-info-card",display:I.Da.Flex,flexDirection:I.Ga.Row,borderRadius:I.A.Medium,elevation:1,border:!0},o.createElement(I.fb,{className:"facebook-info-card__icon",display:I.Da.Flex},o.createElement(I.Cb,{asset:I.Db.Facebook,type:I.Eb.Inherit,height:50,width:50})),o.createElement(I.fb,{display:I.Da.Flex,flexDirection:I.Ga.Column,justifyContent:I.eb.Center,overflow:I.mb.Hidden,padding:{right:1}},o.createElement(I.Ca,{type:I.gc.Strong,color:I.R.Base,fontSize:I.Ia.Size6,ellipsis:!0},e.facebookName),o.createElement(I.Ca,{type:I.gc.Span,color:I.R.Alt2,fontSize:I.Ia.Size7,ellipsis:!0},Object(i.d)("On Facebook","FacebookInfoCard"))))}),G=r("FsIG"),z=(r("ykwd"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={inputMessageHeight:null},t.setMessageContainerRef=function(e){return t.messageContainerRef=e},t}return n.__extends(t,e),t.prototype.componentDidUpdate=function(e){if(e.hint!==this.props.hint||e.error!==this.props.error||e.hintMessage!==this.props.hintMessage||e.errorMessage!==this.props.errorMessage){var t=this.messageContainerRef&&this.messageContainerRef.getBoundingClientRect().height;t!==this.state.inputMessageHeight&&this.setState({inputMessageHeight:t})}},t.prototype.render=function(){var e=null,t=this.props.hintMessage&&!this.props.error,r=this.props.errorMessage;if(t?e=o.createElement(I.Ma,{hint:Object(G.b)(this.props.hintMessage)}):r&&(e=o.createElement(I.Ja,{errorMessage:Object(G.b)(this.props.errorMessage)})),e){var n=this.props.hint&&t||this.props.error&&r,a=this.props.skipGrowAnimation?void 0:"form-group-auth__animated-text",s=n&&this.state.inputMessageHeight?this.state.inputMessageHeight:void 0;e=o.createElement("div",{className:a,style:{height:s}},o.createElement(I.l,{type:I.q.FadeIn,duration:I.n.Long,delay:I.m.Short,enabled:!!n},o.createElement(I.fb,{refDelegate:this.setMessageContainerRef,padding:{top:.5}},e)))}return o.createElement(I.fb,null,o.createElement(I.fb,{margin:{bottom:.5},display:I.Da.Flex,alignItems:I.i.Center},o.createElement(I.Ob,{flexGrow:1},o.createElement(I.Na,{id:Object(G.b)(this.props.label),label:Object(G.b)(this.props.label)})),this.props.validationComponent),this.props.children,e)},t}(o.Component)),W=r("TSYQ");r("uVVX");!function(e){e.Invalid="invalid",e.Empty="empty",e.Weak="weak",e.Strong="strong"}(R||(R={}));var J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e={"password-indicator":!0,"password-indicator--invalid":this.props.indicatorStrength===R.Invalid,"password-indicator--empty":this.props.indicatorStrength===R.Empty,"password-indicator--weak":this.props.indicatorStrength===R.Weak,"password-indicator--strong":this.props.indicatorStrength===R.Strong};return o.createElement(I.Ob,{className:W(e),display:I.Da.Flex,alignItems:I.i.Center},this.renderIcon(),this.renderDescription(),o.createElement(I.fb,{className:"password-indicator__progress-bar"},o.createElement(I.wb,{inherit:!0,value:this.props.indicatorProgress,mask:!0,size:I.yb.Small})))},t.prototype.renderIcon=function(){var e;switch(this.props.indicatorStrength){case R.Invalid:e=o.createElement(I.Cb,{asset:I.Db.NotificationError,type:I.Eb.Alert});break;case R.Weak:e=o.createElement(I.Cb,{asset:I.Db.NotificationWarning,type:I.Eb.Inherit});break;case R.Strong:e=o.createElement(I.Cb,{asset:I.Db.NotificationSuccess,type:I.Eb.Success});break;case R.Empty:e=this.props.error?o.createElement(I.Cb,{asset:I.Db.NotificationError,type:I.Eb.Alert}):null;break;default:e=null}return e?o.createElement(I.fb,{margin:{right:.5},display:I.Da.InlineFlex},e):null},t.prototype.renderDescription=function(){var e;switch(this.props.indicatorStrength){case R.Weak:e=Object(i.d)("Weak","PasswordStrengthIndicator");break;case R.Strong:e=Object(i.d)("Strong","PasswordStrengthIndicator");break;default:e=null}return e?o.createElement(I.fb,{margin:{right:1},display:I.Da.InlineFlex},o.createElement(I.Ca,{color:I.R.Inherit,bold:!0},e)):null},t}(o.Component),Q=(r("T1dR"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onFocus=function(e){t.existingFocus=!0,t.trackAuthInteraction({isFocusing:!0}),t.props.onFocus&&t.props.onFocus(e)},t.onBlur=function(e){t.existingFocus&&(t.existingFocus=!1,t.trackAuthInteraction({isFocusing:!1})),t.props.onBlur&&t.props.onBlur(e)},t}return n.__extends(t,e),t.prototype.render=function(){return o.createElement(I.Za,n.__assign({},this.props,{onFocus:this.onFocus,onBlur:this.onBlur}))},t.prototype.componentWillUnmount=function(){this.existingFocus&&this.trackAuthInteraction({isFocusing:!1})},t.prototype.trackAuthInteraction=function(e){var t=e.isFocusing;Object(V.j)({screen:this.props.screen,target:this.props.target,action:t?V.a.Focus:V.a.Blur})},t}(o.Component)),K=function(e){return e.options.shouldShowLoading?o.createElement(I.hb,{size:I.Mb.Small}):e.options.shouldShowNone?null:e.options.shouldShowError?o.createElement(I.Cb,{asset:I.Db.NotificationError,type:I.Eb.Alert,width:18,height:18}):e.options.shouldShowValid?o.createElement(I.Cb,{asset:I.Db.NotificationSuccess,type:I.Eb.Success,width:18,height:18}):null},Z=r("yfE0"),$=8,X=71;function ee(e){return e.length>=$&&e.length<=X}function te(e){return e.length<$?Object(i.d)("Passwords must be at least 8 characters long.","PasswordValidator"):e.length>X?Object(i.d)("Passwords must be shorter than 72 characters.","PasswordValidator"):void 0}var re,ne=(Z.config({maxLength:X,minLength:$,minPhraseLength:20,allowPassphrases:!0}),function(e){if(!e||!e.length)return{strength:R.Empty,score:0};if(!ee(e))return{strength:R.Invalid,score:0};var t=Z.test(e);if(t.isPassphrase)return{strength:R.Strong,score:100};switch(t.optionalTestsPassed){case 1:return{strength:R.Weak,score:25};case 2:return{strength:R.Weak,score:50};case 3:return{strength:R.Strong,score:75};case 4:return{strength:R.Strong,score:100};default:return{strength:R.Invalid,score:0}}});r("E3CR");!function(e){e.CapsLockIndicator="password-input_caps-lock-indicator"}(re||(re={}));var oe,ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isFocused:!1,isPasswordVisible:!1},t.onPasswordInputChanged=function(e){var r=e.currentTarget.value;t.props.onChange(r)},t.onPasswordInputBlur=function(){t.setState({isFocused:!1})},t.onPasswordInputFocus=function(){t.setState({isFocused:!0})},t.toggleVisibility=function(e){e.nativeEvent.detail&&(e.preventDefault(),t.setState({isPasswordVisible:!t.state.isPasswordVisible}),t.inputRef&&t.inputRef.focus())},t.getInputRef=function(e){t.inputRef=e},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props.isCapsLockOn&&this.state.isFocused,t=ne(this.props.password),r=this.props.showPasswordStrengthIndicator?this.renderPasswordStrengthIndicator(t):this.renderValidIndicator(),a=!!this.props.showPasswordStrengthIndicator&&this.shouldDisplayPasswordHint(t),s=this.props.showPasswordStrengthIndicator?this.props.hintMessage:"";return o.createElement(z,{label:Object(i.d)("Password","AuthForm"),validationComponent:r,error:!!this.props.error,hint:a,hintMessage:s,errorMessage:this.props.errorMessage},o.createElement(I.fb,{position:I.tb.Relative,className:"password-input__container"},o.createElement(Q,n.__assign({autoComplete:"current-password",screen:this.props.screen,target:V.g.Password,refDelegate:this.getInputRef,type:this.state.isPasswordVisible?I.bb.Text:I.bb.Password,onChange:this.onPasswordInputChanged,onBlur:this.onPasswordInputBlur,onFocus:this.onPasswordInputFocus,value:Object(G.b)(this.props.password),error:this.props.error},Object(I.yc)(this.props))),o.createElement(I.Ob,{position:I.tb.Absolute,display:I.Da.Flex,alignItems:I.i.Center,color:I.R.OverlayAlt,attachRight:!0,attachTop:!0,attachBottom:!0},e&&o.createElement(I.Cb,{asset:I.Db.CapsLock,type:I.Eb.Inherit,"data-test-selector":re.CapsLockIndicator}),o.createElement(I.D,{icon:this.state.isPasswordVisible?I.Db.VisibilityHidden:I.Db.VisibilityShown,onClick:this.toggleVisibility,type:I.F.Secondary,size:I.E.Small,tabIndex:-1,ariaLabel:Object(i.d)("Toggle password visibility","PasswordInput")}))))},t.prototype.renderValidIndicator=function(){var e={shouldShowNone:void 0===this.props.error,shouldShowError:this.props.error};return o.createElement(K,{options:e})},t.prototype.renderPasswordStrengthIndicator=function(e){return o.createElement(J,{indicatorProgress:e.score,indicatorStrength:e.strength,error:!!this.props.error})},t.prototype.shouldDisplayPasswordHint=function(e){return this.state.isFocused&&e.strength!==R.Strong},t}(o.Component),se=r("GxR5"),ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onPasswordResetClicked=function(){Object(V.j)({screen:t.props.screen,target:V.g.TroubleLoggingIn,action:V.a.Click})},t}return n.__extends(t,e),t.prototype.render=function(){return o.createElement(I.fb,{className:"login-password-input"},o.createElement(ae,n.__assign({},this.props)),o.createElement(I.fb,{margin:{top:1}},o.createElement(I.Aa,{to:se.b,onClick:this.onPasswordResetClicked,targetBlank:!0},o.createElement(I.Ca,{fontSize:I.Ia.Size7},Object(i.d)("Trouble logging in?","LoginPasswordInput")))))},t}(o.Component),ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUsernameInputChanged=function(e){var r=e.currentTarget.value;t.props.onChange(r)},t}return n.__extends(t,e),t.prototype.render=function(){return o.createElement(z,{label:Object(i.d)("Username","LoginForm"),validationComponent:this.renderValidIndicator(),error:!!this.props.error,hint:!1},o.createElement(Q,n.__assign({autoComplete:"username",screen:this.props.screen,target:V.g.Username,type:I.bb.Text,onChange:this.onUsernameInputChanged,value:Object(G.b)(this.props.username),error:this.props.error,refDelegate:this.props.refDelegate,autoFocus:!0},Object(I.yc)(this.props))))},t.prototype.renderValidIndicator=function(){var e={shouldShowNone:void 0===this.props.error,shouldShowError:this.props.error};return o.createElement(K,{options:e})},t}(o.Component);!function(e){e.Valid="Valid",e.Invalid="Invalid"}(oe||(oe={}));var ue,le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isFocused:!1,isTyping:!1,skipGrowAnimation:t.props.autoFocus},t.onChange=function(e){t.setState({isTyping:!0}),t.inputTimer&&(clearTimeout(t.inputTimer),t.inputTimer=0),t.inputTimer=setTimeout(function(){return n.__awaiter(t,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return[4,this.props.onValidationRequested()];case 1:return e.sent(),this.setState({isTyping:!1}),this.inputTimer=0,[2]}})})},500),t.props.onUsernameChanged(e.currentTarget.value)},t.onUsernameBlur=function(){t.setState({isFocused:!1,skipGrowAnimation:!1})},t.onUsernameFocus=function(){t.setState({isFocused:!0})},t}return n.__extends(t,e),t.prototype.componentWillUnmount=function(){this.inputTimer&&clearTimeout(this.inputTimer)},t.prototype.render=function(){return o.createElement(z,{error:this.isInvalid,label:Object(i.d)("Username","SignupUsernameFormGroup"),validationComponent:this.renderValidIndicator(),errorMessage:this.props.errorMessage,hintMessage:Object(i.d)("This is the name people will know you by on Twitch. You can always change it later.","SignupUsernameFormGroup"),hint:this.state.isFocused,skipGrowAnimation:this.state.skipGrowAnimation},o.createElement(Q,n.__assign({screen:this.props.screen,target:V.g.Username,type:I.bb.Text,onChange:this.onChange,value:Object(G.b)(this.props.value),error:this.isInvalid,onFocus:this.onUsernameFocus,onBlur:this.onUsernameBlur,autoFocus:this.props.autoFocus,refDelegate:this.props.refDelegate},Object(I.yc)(this.props))))},t.prototype.renderValidIndicator=function(){var e={shouldShowLoading:this.state.isTyping,shouldShowNone:!this.props.validationState,shouldShowError:this.props.validationState===oe.Invalid,shouldShowValid:this.props.validationState===oe.Valid};return o.createElement(K,{options:e})},Object.defineProperty(t.prototype,"isInvalid",{get:function(){return this.props.validationState===oe.Invalid},enumerable:!0,configurable:!0}),t}(o.Component);!function(e){e.None="None",e.Passed="Passed",e.Proved=" Proved"}(ue||(ue={}));var pe=r("1txG"),de=new RegExp(/^[A-Za-z0-9][A-Za-z0-9_]*$/),he=4,me=25;function ge(e){return fe(e)&&be(e)}function fe(e){return e.length>=he&&e.length<=me}function be(e){return de.test(e)}function ve(e){return n.__awaiter(this,void 0,Promise,function(){var t;return n.__generator(this,function(r){switch(r.label){case 0:if(!e)return[2,!1];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,i.q.apollo.client.query({query:pe,variables:{username:e}})];case 2:return[2,(t=r.sent()).data&&!t.data.isUsernameAvailable];case 3:return r.sent(),[2,!1];case 4:return[2]}})})}function Se(e,t){return e&&fe(e)?be(e)?t?Object(i.d)("This username is unavailable.","SignupUsernameFormGroup"):"":Object(i.d)("Usernames must only contain alphanumeric characters.","SignupUsernameFormGroup"):Object(i.d)("Usernames must be between 4 and 25 characters.","SignupUsernameFormGroup")}function ke(e,t){return!t.usernameError&&!t.passwordError&&(!!e.username&&!!e.password)}function Fe(e){return!!e.id&&!!e.accessToken}function ye(e,t){return!t.passwordError&&!t.usernameError&&(!!e.username&&(!!e.password&&(e.usernameValidationState!==oe.Invalid&&(!!ge(e.username)&&!e.isPasswordInvalid))))}var we=r("2Ygb");function Ee(){return function(e){return function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.getRefDelegate=function(t){e.ref=t},e}return n.__extends(r,t),r.prototype.componentDidUpdate=function(e){e.isLoading&&!this.props.isLoading&&this.ref&&this.ref.focus()},r.prototype.render=function(){var t={refDelegate:this.getRefDelegate};return o.createElement(e,n.__assign({},this.props,t))},r.displayName=Object(we.a)(r.name,e),r}(o.Component)}}var Ce=r("GnwI"),Te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(e){e.preventDefault(),t.canLogin&&(Object(V.j)({screen:V.f.FacebookConnect,target:V.g.Connect,action:V.a.Enter}),t.login())},t.login=function(){t.canLogin&&t.props.onConnectRequested()},t.goToFacebookSignupForm=function(){t.props.onFacebookFormTypeChanged(H.AuthFormStep.FacebookSignup)},t.onUsernameInputChanged=function(e){t.props.onFacebookConnectFormValuesChanged({username:e})},t.onPasswordInputChanged=function(e){t.props.onFacebookConnectFormValuesChanged({password:e})},t}return n.__extends(t,e),t.prototype.render=function(){return o.createElement(I.Ob,{className:"facebook-connect-form",background:I.u.Base,flexDirection:I.Ga.Column,display:I.Da.Flex,fullWidth:!0},this.renderHeader(),this.renderCenterText(),o.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},this.renderUsername(),this.renderPassword(),this.renderCTA()),this.renderFooterLink())},t.prototype.renderHeader=function(){return o.createElement(I.fb,{margin:{top:1},display:I.Da.Flex,justifyContent:I.eb.Center},o.createElement(Y,{facebookName:this.props.facebookName}))},t.prototype.renderCenterText=function(){return o.createElement(I.fb,{margin:{top:2}},o.createElement(I.Ca,{fontSize:I.Ia.Size6},Object(i.d)("Please log into the Twitch account you want to connect with.","FacebookConnectForm")))},t.prototype.renderUsername=function(){return o.createElement(I.fb,{margin:{top:2}},o.createElement(ce,{screen:V.f.FacebookConnect,username:this.props.values.username,error:this.props.serverErrors.usernameError,onChange:this.onUsernameInputChanged,refDelegate:this.props.refDelegate}))},t.prototype.renderPassword=function(){return o.createElement(I.fb,{margin:{top:2}},o.createElement(ie,{screen:V.f.FacebookConnect,password:this.props.values.password,error:this.props.serverErrors.passwordError,onChange:this.onPasswordInputChanged,isCapsLockOn:this.props.isCapsLockOn}))},t.prototype.renderCTA=function(){return o.createElement(I.fb,{"data-test-selector":"facebook-signup-form__cta",margin:{top:2}},o.createElement(I.C,{disabled:this.props.isLoading||!ke(this.props.values,this.props.serverErrors),state:this.props.isLoading?I.H.Loading:I.H.Default,fullWidth:!0},Object(i.d)("Connect My Account","FacebookConnectForm")))},t.prototype.renderFooterLink=function(){return o.createElement(I.fb,{"data-test-selector":"facebook-signup-form__footer",textAlign:I.cc.Center,margin:{top:2}},o.createElement(P,{screen:V.f.FacebookConnect,target:V.g.CreateAccount,type:I.I.Text,onClick:this.goToFacebookSignupForm},Object(i.d)("Create a new Twitch account instead","FacebookConnectForm")))},Object.defineProperty(t.prototype,"canLogin",{get:function(){return ke(this.props.values,this.props.serverErrors)},enumerable:!0,configurable:!0}),t}(o.Component),Oe=Object(q.compose)(Object(Ce.withLatencyTracking)("FacebookConnectForm",{autoReportInteractive:!0}),Ee())(Te),Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return o.createElement(ae,{showPasswordStrengthIndicator:!0,"data-a-target":"signup-password-input",onChange:this.props.onChange,screen:this.props.screen,isCapsLockOn:this.props.isCapsLockOn,error:this.props.error,errorMessage:this.props.errorMessage,password:this.props.password,hintMessage:Object(i.d)("Strong passwords include a mix of lower case letters, upper case letters, and special characters.","SignupPasswordFormGroup")})},t}(o.PureComponent),Me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(e){e.preventDefault(),t.canSignup&&Object(V.j)({screen:V.f.FacebookSignup,target:V.g.Signup,action:V.a.Enter}),t.signup()},t.signup=function(){t.canSignup&&t.props.onSignupRequested()},t.goToFacebookConnectForm=function(){t.props.onFacebookFormTypeChanged(H.AuthFormStep.FacebookConnect)},t.onUsernameInputChanged=function(e){t.props.onFacebookSignupFormValuesChanged({username:e})},t.onUsernameValidationRequested=function(){return n.__awaiter(t,void 0,void 0,function(){var e,t,r,o;return n.__generator(this,function(n){switch(n.label){case 0:return[4,ve(e=this.props.values.username)];case 1:return t=n.sent(),r=Se(e,t),o=r?oe.Invalid:oe.Valid,this.props.onFacebookSignupFormValuesChanged({usernameValidationState:o,usernameErrorMessage:r}),[2]}})})},t.onPasswordInputChanged=function(e){var r=!ee(e),n=te(e);t.props.onFacebookSignupFormValuesChanged({password:e,isPasswordInvalid:r,passwordErrorMessage:n})},t}return n.__extends(t,e),t.prototype.render=function(){return o.createElement(I.Ob,{className:"facebook-signup-form",background:I.u.Base,flexDirection:I.Ga.Column,display:I.Da.Flex,fullWidth:!0},this.renderHeader(),this.renderCenterText(),o.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},this.renderUsername(),this.renderPassword(),this.renderCTA()),this.renderFooterLink())},t.prototype.renderHeader=function(){return o.createElement(I.fb,{margin:{top:1},display:I.Da.Flex,justifyContent:I.eb.Center},o.createElement(Y,{facebookName:this.props.facebookName}))},t.prototype.renderCenterText=function(){return o.createElement(I.fb,{margin:{top:2}},o.createElement(I.Ca,{fontSize:I.Ia.Size6},Object(i.d)("Create a new Twitch username and password to connect with this account. Your Twitch ID will be your future login and public identity across all of Twitch.","FacebookSignupForm")))},t.prototype.renderUsername=function(){return o.createElement(I.fb,{margin:{top:2}},o.createElement(le,{screen:V.f.FacebookSignup,onUsernameChanged:this.onUsernameInputChanged,onValidationRequested:this.onUsernameValidationRequested,value:this.props.values.username,errorMessage:this.props.values.usernameErrorMessage,validationState:this.props.serverErrors.usernameError?oe.Invalid:this.props.values.usernameValidationState,autoFocus:!0,refDelegate:this.props.refDelegate}))},t.prototype.renderPassword=function(){return o.createElement(I.fb,{margin:{top:2}},o.createElement(Ie,{screen:V.f.FacebookSignup,password:this.props.values.password,onChange:this.onPasswordInputChanged,error:this.props.values.isPasswordInvalid||this.props.serverErrors.passwordError,errorMessage:this.props.values.passwordErrorMessage,isCapsLockOn:this.props.isCapsLockOn}))},t.prototype.renderCTA=function(){return o.createElement(I.fb,{"data-test-selector":"facebook-signup-form__cta",margin:{top:2}},o.createElement(I.C,{disabled:this.props.isLoading||!ye(this.props.values,this.props.serverErrors),state:this.props.isLoading?I.H.Loading:I.H.Default,fullWidth:!0},Object(i.d)("Sign up","FacebookSignupForm")))},t.prototype.renderFooterLink=function(){return o.createElement(I.fb,{"data-test-selector":"facebook-signup-form__footer",textAlign:I.cc.Center,margin:{top:2}},o.createElement(P,{screen:V.f.FacebookSignup,target:V.g.LinkAccount,type:I.I.Text,onClick:this.goToFacebookConnectForm},Object(i.d)("Link an existing Twitch account instead","FacebookSignupForm")))},Object.defineProperty(t.prototype,"canSignup",{get:function(){return ye(this.props.values,this.props.serverErrors)},enumerable:!0,configurable:!0}),t}(o.Component),je=Object(q.compose)(Object(Ce.withLatencyTracking)("FacebookSignupForm",{autoReportInteractive:!0}),Ee())(Me);function De(e,t){return!t.usernameError&&!t.passwordError&&(!!e.username&&!!e.password)}var Le,_e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(e){e.preventDefault(),t.canLogin&&(Object(V.j)({screen:V.f.Login,target:V.g.Login,action:V.a.Enter}),t.props.onLoginRequested())},t.onUsernameInputChanged=function(e){t.props.onLoginFormValuesChanged({username:e})},t.onPasswordInputChanged=function(e){t.props.onLoginFormValuesChanged({password:e})},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){Object(V.i)(V.f.Login)},t.prototype.render=function(){return o.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},o.createElement(I.Ob,{background:I.u.Base,fullWidth:!0,flexDirection:I.Ga.Column,display:I.Da.Flex},this.renderUsername(),this.renderPassword(),o.createElement(I.fb,{margin:{top:2}},o.createElement(I.C,{disabled:this.props.isLoading||!De(this.props.values,this.props.serverErrors),state:this.props.isLoading?I.H.Loading:I.H.Default,fullWidth:!0,"data-a-target":"passport-login-button"},this.props.passwordOnly?Object(i.d)("Verify","LoginForm"):Object(i.d)("Log In","LoginForm")))))},t.prototype.renderUsername=function(){return this.props.passwordOnly?null:o.createElement(I.fb,{margin:{top:2}},o.createElement(ce,{screen:V.f.Login,username:this.props.values.username,error:this.props.serverErrors.usernameError,onChange:this.onUsernameInputChanged,refDelegate:this.props.refDelegate,"data-a-target":"login-username-input"}))},t.prototype.renderPassword=function(){return o.createElement(I.fb,{margin:{top:2}},o.createElement(ie,{screen:V.f.Login,password:this.props.values.password,error:this.props.serverErrors.passwordError,onChange:this.onPasswordInputChanged,"data-a-target":"login-password-input",isCapsLockOn:this.props.isCapsLockOn}))},Object.defineProperty(t.prototype,"canLogin",{get:function(){return De(this.props.values,this.props.serverErrors)},enumerable:!0,configurable:!0}),t}(o.Component),Ve=Object(q.compose)(Object(Ce.withLatencyTracking)("LoginForm",{autoReportInteractive:!0}),Ee())(_e),Pe=r("96Fe"),Ue=r("YVDj"),xe=Object.assign({},Ue,{default:Ue});!function(e){e.Day="D",e.Month="M",e.Year="Y"}(Le||(Le={}));r("qV8A");var Ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleMonthChange=function(e){Object(V.j)({screen:V.f.Signup,target:V.g.DateOfBirthMonth,action:V.a.Click}),t.props.onChanged(n.__assign({},t.props.date,{month:+e.target.value}))},t.handleDayChange=function(e){t.props.onChanged(n.__assign({},t.props.date,{day:+e.target.value}))},t.handleYearChange=function(e){t.props.onChanged(n.__assign({},t.props.date,{year:+e.target.value}))},t.onDayFocus=function(){t.props.onFocusChanged({day:!0})},t.onDayBlur=function(){t.props.onFocusChanged({day:!1})},t.onMonthFocus=function(){t.props.onFocusChanged({month:!0})},t.onMonthBlur=function(){t.props.onFocusChanged({month:!1})},t.onYearFocus=function(){t.props.onFocusChanged({year:!0})},t.onYearBlur=function(){t.props.onFocusChanged({year:!1})},t}return n.__extends(t,e),t.prototype.render=function(){var e=function(e){var t=xe[e.toLowerCase()];return e&&t?[t.substring(0,1),t.substring(1,2),t.substring(2,3)]:[Le.Month,Le.Day,Le.Year]}(this.props.locale);return o.createElement(I.fb,{display:I.Da.Flex,flexDirection:I.Ga.Row},this.renderBasedOnDateOrder(e[0]),o.createElement(I.Xa,{margin:{left:1}},this.renderBasedOnDateOrder(e[1])),o.createElement(I.Xa,{margin:{left:1}},this.renderBasedOnDateOrder(e[2])))},t.prototype.renderBasedOnDateOrder=function(e){switch(e){case Le.Day:return this.renderDayInput();case Le.Month:return this.renderMonthSelect();case Le.Year:return this.renderYearInput();default:return null}},t.prototype.renderDayInput=function(){return o.createElement(I.fb,{className:"birthday-picker__input"},o.createElement(Q,{screen:V.f.Signup,target:V.g.DateOfBirthDay,type:I.bb.Text,value:Object(G.a)(this.props.date&&this.props.date.day),placeholder:Object(i.d)("Day","BirthdayPicker"),onChange:this.handleDayChange,error:!this.props.isTyping&&this.props.dateValidation&&this.props.dateValidation.dayInvalid,maxLength:2,onFocus:this.onDayFocus,onBlur:this.onDayBlur,"data-a-target":"birthday-date-input"}))},t.prototype.renderYearInput=function(){return o.createElement(I.fb,{className:"birthday-picker__input"},o.createElement(Q,{screen:V.f.Signup,target:V.g.DateOfBirthYear,type:I.bb.Text,value:Object(G.a)(this.props.date&&this.props.date.year),placeholder:Object(i.d)("Year","BirthdayPicker"),onChange:this.handleYearChange,error:!this.props.isTyping&&this.props.dateValidation&&this.props.dateValidation.yearInvalid,maxLength:4,onFocus:this.onYearFocus,onBlur:this.onYearBlur,"data-a-target":"birthday-year-input"}))},t.prototype.renderMonthSelect=function(){return o.createElement(I.fb,{fullWidth:!0},o.createElement(I.Jb,{value:Object(G.a)(this.props.date&&this.props.date.month),onChange:this.handleMonthChange,error:!this.props.isTyping&&this.props.dateValidation&&this.props.dateValidation.monthInvalid,onFocus:this.onMonthFocus,onBlur:this.onMonthBlur,"data-a-target":"birthday-month-select"},o.createElement("option",{value:"",disabled:!0},Object(i.d)("Month","BirthdayPicker")),o.createElement("option",{value:1},Object(i.d)("January","BirthdayPicker")),o.createElement("option",{value:2},Object(i.d)("February","BirthdayPicker")),o.createElement("option",{value:3},Object(i.d)("March","BirthdayPicker")),o.createElement("option",{value:4},Object(i.d)("April","BirthdayPicker")),o.createElement("option",{value:5},Object(i.d)("May","BirthdayPicker")),o.createElement("option",{value:6},Object(i.d)("June","BirthdayPicker")),o.createElement("option",{value:7},Object(i.d)("July","BirthdayPicker")),o.createElement("option",{value:8},Object(i.d)("August","BirthdayPicker")),o.createElement("option",{value:9},Object(i.d)("September","BirthdayPicker")),o.createElement("option",{value:10},Object(i.d)("October","BirthdayPicker")),o.createElement("option",{value:11},Object(i.d)("November","BirthdayPicker")),o.createElement("option",{value:12},Object(i.d)("December","BirthdayPicker"))))},t}(o.Component);var Ne=Object(s.connect)(function(e){return{locale:Object(T.d)(e)}})(Ae),Re={1:31,2:28,3:31,4:30,5:31,6:30,7:31,8:31,9:30,10:31,11:30,12:31},Be=864e5;function qe(e){return!!e&&(e.monthInvalid||e.dayInvalid||e.yearInvalid)}var He,Ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isTyping:!1,birthdayPickerFocus:{day:!1,month:!1,year:!1}},t.onBirthdayPickerDateChanged=function(e){t.setState({isTyping:!0}),t.beginValidationTimer(),t.props.onBirthdayDateChange(e)},t.onBirthdayPickerFocusChanged=function(e){t.setState(function(t){return{birthdayPickerFocus:n.__assign({},t.birthdayPickerFocus,e)}},t.beginValidationTimer)},t.beginValidationTimer=function(){t.inputTimer&&(clearTimeout(t.inputTimer),t.inputTimer=0),t.inputTimer=setTimeout(function(){t.isBirthdayPickerFocused()&&t.isFullDateProvided()?t.props.onValidationRequested():!t.isBirthdayPickerFocused()&&t.props.date&&t.props.onValidationRequested(),t.setState({isTyping:!1}),t.inputTimer=0},500)},t.isBirthdayPickerFocused=function(){return t.state.birthdayPickerFocus.day||t.state.birthdayPickerFocus.month||t.state.birthdayPickerFocus.year},t.isFullDateProvided=function(){return t.props.date&&t.props.date.day&&t.props.date.month&&t.props.date.year},t}return n.__extends(t,e),t.prototype.render=function(){return o.createElement(z,{label:Object(i.d)("Date of Birth","BirthdayFormGroup"),error:qe(this.props.dateValidation)||this.props.serverError,errorMessage:Object(i.d)("Please enter a valid date.","BirthdayFormGroup"),validationComponent:this.renderValidIndicator(),hint:!1},o.createElement(Ne,{date:this.props.date,onChanged:this.onBirthdayPickerDateChanged,onFocusChanged:this.onBirthdayPickerFocusChanged,dateValidation:this.props.dateValidation,isTyping:this.state.isTyping}))},t.prototype.componentWillUnmount=function(){this.inputTimer&&clearTimeout(this.inputTimer)},t.prototype.renderValidIndicator=function(){var e=qe(this.props.dateValidation),t={showShowLoading:this.state.isTyping,shouldShowNone:void 0===this.props.dateValidation,shouldShowError:e,shouldShowValid:!e};return o.createElement(K,{options:t})},t}(o.Component);!function(e){e[e.Valid=1]="Valid",e[e.Invalid=2]="Invalid"}(He||(He={}));var Ge=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isTyping:!1,isFocused:!1},t.onChange=function(e){e.persist(),t.setState({isTyping:!0}),t.inputTimer&&(clearTimeout(t.inputTimer),t.inputTimer=0),t.inputTimer=setTimeout(function(){t.props.onValidationRequested(),t.setState({isTyping:!1}),t.inputTimer=0},500),t.props.onEmailChanged(e.currentTarget.value)},t.onEmailBlur=function(){t.setState({isFocused:!1})},t.onEmailFocus=function(){t.setState({isFocused:!0})},t}return n.__extends(t,e),t.prototype.render=function(){return o.createElement(z,{error:this.isInvalid,errorMessage:this.props.errorMessage,hint:this.state.isFocused,hintMessage:Object(i.d)("You'll need to verify that you own this email account.","SignupEmailFormGroup"),label:Object(i.d)("Email","SignupEmailFormGroup"),validationComponent:this.renderValidIndicator()},o.createElement(Q,{screen:V.f.Signup,target:V.g.Email,type:I.bb.Email,onChange:this.onChange,onFocus:this.onEmailFocus,onBlur:this.onEmailBlur,value:Object(G.b)(this.props.value),error:this.isInvalid,"data-a-target":"signup-email-input"}))},t.prototype.componentWillUnmount=function(){this.inputTimer&&clearTimeout(this.inputTimer)},t.prototype.renderValidIndicator=function(){var e={shouldShowLoading:this.state.isTyping,shouldShowNone:!this.props.validationState,shouldShowError:this.props.validationState===He.Invalid,shouldShowValid:this.props.validationState===He.Valid};return o.createElement(K,{options:e})},Object.defineProperty(t.prototype,"isInvalid",{get:function(){return this.props.validationState===He.Invalid},enumerable:!0,configurable:!0}),t}(o.Component),ze=r("rACw");function We(e,t){return!(t.passwordError||t.usernameError||t.birthdayError||t.emailError)&&(!!e.username&&(!!e.password&&(!!e.email&&(!!e.birthdayDate&&(!!e.birthdayDate.day&&(!!e.birthdayDate.month&&(!!e.birthdayDate.year&&(e.usernameValidationState!==oe.Invalid&&(!!ge(e.username)&&(!e.isPasswordInvalid&&(e.emailValidationState===He.Valid&&!(!e.birthdayValidation||qe(e.birthdayValidation)))))))))))))}var Je,Qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(e){e.preventDefault(),t.canSignup&&(!t.props.hasPassedCaptcha&&t.captchaInstance?t.captchaInstance.execute():t.submit())},t.onBirthdayDateChanged=function(e){t.props.onSignupFormValuesChanged({birthdayDate:e})},t.onBirthdayDateValidationChange=function(){var e=t.props.values.birthdayDate;e&&t.props.onSignupFormValuesChanged({birthdayValidation:function(e,t,r){if(!e||!t||!r)return{dayInvalid:!t,monthInvalid:!e,yearInvalid:!r};var n={dayInvalid:!1,monthInvalid:!1,yearInvalid:!1},o=Re[e.toString()];2===e&&function(e){return e%4==0&&e%100!=0||e%400==0}(r)&&(o=29);var a=new Date,s=new Date(r,e-1,t);return(!o||t>o)&&(n.monthInvalid=t<=31,n.dayInvalid=!0),r<a.getFullYear()-150&&(n.yearInvalid=!0),s.getTime()-a.getTime()>=-Be&&(n.yearInvalid=!0),n}(e.month,e.day,e.year)})},t.onUsernameInputChanged=function(e){t.props.onSignupFormValuesChanged({username:e})},t.onUsernameValidationRequested=function(){return n.__awaiter(t,void 0,void 0,function(){var e,t,r,o;return n.__generator(this,function(n){switch(n.label){case 0:return[4,ve(e=this.props.values.username)];case 1:return t=n.sent(),r=Se(e,t),o=r?oe.Invalid:oe.Valid,this.props.onSignupFormValuesChanged({usernameValidationState:o,usernameErrorMessage:r}),[2]}})})},t.onPasswordInputChanged=function(e){var r=te(e),n=!!r;t.props.onSignupFormValuesChanged({password:e,isPasswordInvalid:n,passwordErrorMessage:r})},t.onEmailInputChanged=function(e){t.props.onSignupFormValuesChanged({email:e})},t.onEmailValidationRequested=function(){var e=t.props.values.email,r=Object(ze.a)(e),n=r?He.Invalid:He.Valid;t.props.onSignupFormValuesChanged({emailErrorMessage:r,emailValidationState:n})},t.onCaptchaInputChanged=function(e){t.props.onSignupFormValuesChanged({captchaValue:e}),t.submit()},t.onCaptchaRefDelegate=function(e){t.captchaInstance=e},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){Object(V.i)(V.f.Signup)},t.prototype.render=function(){return o.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},o.createElement(I.Ob,{background:I.u.Base,fullWidth:!0,flexDirection:I.Ga.Column,display:I.Da.Flex},this.renderUsername(),this.renderPassword(),this.renderDateOfBirth(),this.renderEmail(),this.renderSignup(),this.renderCaptcha()))},t.prototype.renderUsername=function(){return o.createElement(I.fb,{margin:{top:2}},o.createElement(le,{screen:V.f.Signup,onUsernameChanged:this.onUsernameInputChanged,onValidationRequested:this.onUsernameValidationRequested,value:this.props.values.username,errorMessage:this.props.values.usernameErrorMessage,validationState:this.props.serverErrors.usernameError?oe.Invalid:this.props.values.usernameValidationState,autoFocus:!0,refDelegate:this.props.refDelegate,"data-a-target":"signup-username-input"}))},t.prototype.renderPassword=function(){return o.createElement(I.fb,{margin:{top:2}},o.createElement(Ie,{screen:V.f.Signup,password:this.props.values.password,onChange:this.onPasswordInputChanged,error:this.props.values.isPasswordInvalid||!!this.props.serverErrors.passwordError,errorMessage:this.props.values.passwordErrorMessage,isCapsLockOn:this.props.isCapsLockOn}))},t.prototype.renderDateOfBirth=function(){return o.createElement(I.fb,{margin:{top:2}},o.createElement(Ye,{date:this.props.values.birthdayDate,onBirthdayDateChange:this.onBirthdayDateChanged,onValidationRequested:this.onBirthdayDateValidationChange,dateValidation:this.props.values.birthdayValidation,serverError:!!this.props.serverErrors.birthdayError}))},t.prototype.renderEmail=function(){return o.createElement(I.fb,{margin:{top:2}},o.createElement(Ge,{onEmailChanged:this.onEmailInputChanged,onValidationRequested:this.onEmailValidationRequested,value:this.props.values.email,validationState:this.props.serverErrors.emailError?He.Invalid:this.props.values.emailValidationState,errorMessage:this.props.values.emailErrorMessage}))},t.prototype.renderCaptcha=function(){return o.createElement(_.a,{screen:V.f.Signup,refDelegate:this.onCaptchaRefDelegate,onChange:this.onCaptchaInputChanged,invisible:!0})},t.prototype.renderSignup=function(){return o.createElement(I.fb,{margin:{top:2}},o.createElement(I.fb,{margin:{bottom:2},textAlign:I.cc.Center},o.createElement(I.Ca,{fontSize:I.Ia.Size7,color:I.R.Alt2},Object(i.d)("By clicking Sign Up, you are indicating that you have read and agree to the <x:tos>Terms of Service</x:tos> and <x:pp>Privacy Policy</x:pp>.",{"x:tos":function(e){return o.createElement("a",{target:"_blank",rel:"noopener noreferrer",tabIndex:-1,href:"https://www.twitch.tv/p/legal/terms-of-service/"},e)},"x:pp":function(e){return o.createElement("a",{target:"_blank",rel:"noopener noreferrer",tabIndex:-1,href:"https://www.twitch.tv/p/legal/privacy-policy/"},e)}},"SignupForm"))),o.createElement(I.C,{disabled:this.props.isLoading||!We(this.props.values,this.props.serverErrors),state:this.props.isLoading?I.H.Loading:I.H.Default,fullWidth:!0,"data-a-target":"passport-signup-button"},Object(i.d)("Sign Up","SignupForm")))},Object.defineProperty(t.prototype,"canSignup",{get:function(){return We(this.props.values,this.props.serverErrors)},enumerable:!0,configurable:!0}),t.prototype.submit=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return this.canSignup?(Object(V.j)({screen:V.f.Signup,target:V.g.Signup,action:V.a.Enter}),[4,this.props.onSignupRequested()]):[3,2];case 1:e.sent(),this.captchaInstance&&this.captchaInstance.reset(),e.label=2;case 2:return[2]}})})},t}(o.Component),Ke=Object(q.compose)(Object(Ce.withLatencyTracking)("SignupForm",{autoReportInteractive:!0}),Ee())(Qe);!function(e){e.None="None",e.Loading="Loading",e.Success="Success"}(Je||(Je={}));var Ze=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isSMSSuccessVisible:!1},t.onEnter=function(){t.props.values.token&&(Object(V.j)({screen:V.f.TwoFactor,target:V.g.Submit,action:V.a.Enter}),t.submitToken())},t.onRememberMeToggled=function(e){Object(V.j)({screen:V.f.TwoFactor,target:V.g.RememberMe,action:V.a.Click}),t.props.onTwoFactorFormValuesChanged({rememberMe:e.currentTarget.checked})},t.submitToken=function(){t.props.values.token&&t.props.onTokenSubmitRequested()},t.onTokenInputChanged=function(e){var r=e.currentTarget.value;t.props.onTwoFactorFormValuesChanged({token:r})},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){L.bindGlobal("enter",this.onEnter),Object(V.i)(V.f.TwoFactor)},t.prototype.componentWillUnmount=function(){L.unbind("enter"),this.smsTimerHandle&&clearTimeout(this.smsTimerHandle)},t.prototype.componentDidUpdate=function(e){var t=this;e.smsRequestState===Je.Loading&&this.props.smsRequestState===Je.Success&&(this.smsTimerHandle&&clearTimeout(this.smsTimerHandle),this.setState({isSMSSuccessVisible:!0}),this.smsTimerHandle=setTimeout(function(){t.setState({isSMSSuccessVisible:!1})},1e3))},t.prototype.render=function(){return o.createElement(I.fb,null,o.createElement(I.Ca,{type:I.gc.Span,bold:!0},Object(i.d)("Enter the code sent to you by text message or found in the Authy app.","TwoFactorForm")),"Â ",o.createElement(I.Ca,{type:I.gc.Span},Object(i.d)("If you've lost your phone, please contact <x:ts>Twitch Support</x:ts>.",{"x:ts":function(e){return o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.twitch.tv/customer/en/portal/articles/2186271"},e)}},"TwoFactorForm")),o.createElement(I.fb,{margin:{top:2}},o.createElement(I.Ka,{label:Object(i.d)("Token","TwoFactorForm"),orientation:I.La.Vertical},o.createElement(Q,{screen:V.f.TwoFactor,target:V.g.Token,type:I.bb.Text,onChange:this.onTokenInputChanged,value:Object(G.b)(this.props.values.token),refDelegate:this.props.refDelegate,autoFocus:!0}),o.createElement(I.fb,{margin:{top:2}},o.createElement(I.Q,{checked:!!this.props.values.rememberMe,label:Object(i.d)("Remember this computer for 30 days","TwoFactorForm"),onChange:this.onRememberMeToggled})))),o.createElement(I.fb,{display:I.Da.Flex,justifyContent:I.eb.Center,margin:{top:2}},o.createElement(P,{screen:V.f.TwoFactor,target:V.g.Submit,onClick:this.submitToken,disabled:this.props.isLoading||!this.props.values.token,state:this.props.isLoading?I.H.Loading:I.H.Default},Object(i.d)("Submit","TwoFactorForm")),o.createElement(I.fb,{margin:{left:2}},o.createElement(P,{screen:V.f.TwoFactor,target:V.g.Sms,type:I.I.Hollow,onClick:this.props.onSMSRequested,disabled:this.props.smsRequestState===Je.Loading,state:this.smsButtonState},Object(i.d)("Request SMS","TwoFactorForm")))))},Object.defineProperty(t.prototype,"smsButtonState",{get:function(){switch(this.props.smsRequestState){case Je.Loading:return I.H.Loading;case Je.Success:return this.state.isSMSSuccessVisible?I.H.Success:I.H.Default;case Je.None:default:return I.H.Default}},enumerable:!0,configurable:!0}),t}(o.Component),$e=Ee()(Ze),Xe=6,et=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={enableResendCode:!0,verificationCode:""},t.handleChange=function(e){var r=e.target.value;isNaN(Number(r))||t.setState({verificationCode:r})},t.handleKeyDown=function(e){"Enter"!==e.key||t.isSubmitDisabled()||t.submit()},t.submit=function(){t.props.verifyCode(t.state.verificationCode)},t.renderMainMessage=function(){return t.props.email?Object(i.d)("We sent a 6-digit code to {email}. Confirm it belongs to you to help keep your account secure.",{email:o.createElement(I.Ca,{type:I.gc.Span,bold:!0},t.props.email)},"EmailVerificationCodeForm"):Object(i.d)("We sent a 6-digit code to the email address associated with your Facebook account. Confirm it belongs to you to help keep your account secure.","EmailVerificationCodeForm")},t.renderResendEmail=function(){return t.state.enableResendCode?o.createElement(I.Aa,{onClick:t.resendEmail},Object(i.d)("Resend email","EmailVerificationCodeForm")):o.createElement(I.Ca,{color:I.R.Link},Object(i.d)("Email sent!","EmailVerificationCodeForm"))},t.resendEmail=function(){},t.isSubmitDisabled=function(){return t.state.verificationCode.length!==Xe},t}return n.__extends(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,o.createElement(I.kb,{title:Object(i.d)("Verify your email address","EmailVerificationCodeForm")}),o.createElement(I.fb,{margin:2},o.createElement(I.Ca,{bold:!0,fontSize:I.Ia.Size3},Object(i.d)("Enter your verification code","EmailVerificationCodeForm")),o.createElement(I.fb,{margin:{y:1}},o.createElement(I.Ca,{fontSize:I.Ia.Size5},this.renderMainMessage())),o.createElement(I.Za,{type:I.bb.Text,maxLength:Xe,value:this.state.verificationCode,onChange:this.handleChange,onKeyDown:this.handleKeyDown,size:I.ab.Large,ariaLabel:Object(i.d)("Verification code input","EmailVerificationCodeForm"),autoFocus:!0}),o.createElement(I.fb,{margin:{y:1}},this.renderResendEmail()),o.createElement(I.Ob,{background:I.u.Alt,borderRadius:I.A.Small,padding:1},o.createElement(I.Ca,{color:I.R.Alt2,fontSize:I.Ia.Size7},Object(i.d)("You may also tap the link in the email we sent you.","EmailVerificationCodeForm")))),o.createElement(I.jb,{primaryButtonProps:{children:Object(i.d)("Submit","EmailVerificationCodeForm"),disabled:this.isSubmitDisabled(),onClick:this.submit,ariaLabel:Object(i.d)("Submit and verify email","EmailVerificationCodeForm")}}))},t}(o.PureComponent),tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return null},t}(o.PureComponent),rt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={verificationCodeSuccess:!1},t.verifyCode=function(e){""!==e&&t.setState({verificationCodeSuccess:!0})},t}return n.__extends(t,e),t.prototype.render=function(){return this.state.verificationCodeSuccess?o.createElement(tt,{username:this.props.username}):o.createElement(et,{email:this.props.email,verifyCode:this.verifyCode})},t}(o.PureComponent);function nt(e,t){return t?{type:ue.Proved,proof:t}:e.type===ue.Proved?e:{type:ue.None}}var ot=r("ugtu");function at(e,t,r,o,a,s,c){return n.__assign({},function(e,t,r,n){switch(n){case y.UsernameMissing:return{serverMessage:{message:Object(i.d)("The username field is required.","FacebookConnectError")},facebookConnectFormServerErrors:{usernameError:!0},currentStep:H.AuthFormStep.FacebookConnect};case y.PasswordMissing:return{serverMessage:{message:Object(i.d)("The password field is required.","FacebookConnectError")},facebookConnectFormServerErrors:{passwordError:!0},currentStep:H.AuthFormStep.FacebookConnect};case y.MultipleAccountsLinkedToEmail:return{serverMessage:{message:Object(i.d)("This email is linked to multiple accounts. Please log in with a username instead.","FacebookConnectError"),subMessage:Object(ot.e)()},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnect};case y.NoAccountLinkedToEmail:return{serverMessage:{message:Object(i.d)("This email is not linked to a Twitch account. Please log in with a username instead.","FacebookConnectError"),subMessage:Object(ot.e)()},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnect};case y.IncorrectCaptcha:return e===H.AuthFormStep.FacebookConnectCaptcha?{serverMessage:{message:Object(i.d)("That reCAPTCHA did not work.","FacebookConnectError")},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnectCaptcha}:{serverMessage:{},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnectCaptcha};case y.InvalidUsername:return{serverMessage:{message:Object(i.d)("We didn't recognize this username. Please try again.","FacebookConnectError"),subMessage:Object(ot.e)()},facebookConnectFormServerErrors:{usernameError:!0},currentStep:H.AuthFormStep.FacebookConnect};case y.InvalidPassword:return{serverMessage:{message:Object(i.d)("That password was incorrect. Please try again.","FacebookConnectError"),subMessage:Object(ot.d)()},facebookConnectFormServerErrors:{passwordError:!0},currentStep:H.AuthFormStep.FacebookConnect};case y.UserDoesNotExist:return{serverMessage:{message:Object(i.d)("This username is unavailable.","FacebookConnectError"),subMessage:Object(ot.c)(t)},facebookConnectFormServerErrors:{usernameError:!0},currentStep:H.AuthFormStep.FacebookConnect};case y.UserCredentialsIncorrect:return{serverMessage:{message:Object(i.d)("This username or password was incorrect.","FacebookConnectError")},facebookConnectFormServerErrors:{usernameError:!0,passwordError:!0},currentStep:H.AuthFormStep.FacebookConnect};case y.UserNeedsPasswordReset:return{serverMessage:{message:Object(i.d)("This account needs a password reset.","FacebookConnectError"),subMessage:Object(ot.i)()},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnect};case y.UserHasBeenDeleted:return{serverMessage:{message:Object(i.d)("This account has been deleted.","FacebookConnectError"),subMessage:Object(ot.b)()},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnect};case y.SuspendedUser:return{serverMessage:{message:Object(i.d)("This account has been suspended.","FacebookConnectError"),subMessage:Object(ot.j)()},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnect};case y.FacebookAccountAlreadyLinked:return{serverMessage:{message:Object(i.d)("This facebook account is already linked to a Twitch account.","FacebookConnectError"),subMessage:Object(ot.g)(r)},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnect};case y.DeviceCookieThrottleReached:return{serverMessage:{message:Object(i.d)("You have attempted to log in too many times on this device.","FacebookConnectError"),subMessage:Object(i.d)("Please try again later.","FacebookConnectError")},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnect};case y.MissingAuthyToken:return{serverMessage:{},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnectTwoFactor};case y.InvalidAuthyToken:return{serverMessage:{message:Object(i.d)("That code was incorrect.","FacebookConnectError")},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnectTwoFactor};case y.FailedToVerifyAuthyToken:return{serverMessage:{message:Object(i.d)("We were unable to verify your Authy code.","FacebookConnectError")},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnectTwoFactor};case y.UnexpectedFacebookIssue:case y.UnableToConnect:return{serverMessage:{message:Object(i.d)("Something went wrong while connecting your Facebook account.","FacebookConnectError")},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnect};case y.FailedToDecodeJSON:case y.UnexpectedError:default:return{serverMessage:{message:Object(i.d)("Something went wrong.","FacebookConnectError")},facebookConnectFormServerErrors:{},currentStep:H.AuthFormStep.FacebookConnect}}}(e,t,r,a),{captchaState:nt(o,s),isSubmitInTransit:!1,smsProof:c})}function st(e,t,r){return n.__assign({},function(e,t){switch(t){case v.NoConnectedTwitchUser:return{serverMessage:{message:Object(i.d)("You can now connect this Facebook account to an existing Twitch ID.","FacebookLoginError"),subMessage:Object(ot.h)(e),isSuccessMessage:!0},currentStep:H.AuthFormStep.FacebookConnect};case v.SuspendedUser:return{serverMessage:{message:Object(i.d)("This account has been suspended.","FacebookLoginError"),subMessage:Object(ot.j)()},currentStep:H.AuthFormStep.FacebookLogin};case v.MissingAuthyToken:return{serverMessage:{},currentStep:H.AuthFormStep.FacebookLoginTwoFactor};case v.InvalidAuthyToken:return{serverMessage:{message:Object(i.d)("That code was incorrect.","FacebookLoginError")},currentStep:H.AuthFormStep.FacebookLoginTwoFactor};case v.FailedToVerifyAuthyToken:return{serverMessage:{message:Object(i.d)("We were unable to verify your Authy code.","FacebookLoginError")},currentStep:H.AuthFormStep.FacebookLoginTwoFactor};case v.UnableToVerifyIdentity:return{serverMessage:{message:Object(i.d)("We were unable to verify your Facebook identity.","FacebookLoginError")},currentStep:H.AuthFormStep.FacebookLogin};case v.FailedToDecodeJSON:case v.UnexpectedError:default:return{serverMessage:{message:Object(i.d)("Something went wrong.","FacebookLoginError")},currentStep:H.AuthFormStep.FacebookLogin}}}(e,t),{isSubmitInTransit:!1,smsProof:r})}function it(e,t,r){return n.__assign({},function(e,t,r){switch(r){case k.BlacklistedIP:return{serverMessage:{message:Object(i.d)("We've noticed suspicious activity from this IP address.","FacebookSignupError"),subMessage:ct()},facebookSignupFormServerErrors:{}};case k.InvalidUsername:return{serverMessage:{message:Object(i.d)("This username submission is invalid.","FacebookSignupError")},facebookSignupFormServerErrors:{usernameError:!0}};case k.UsernameExists:return{serverMessage:{message:Object(i.d)("This username is already taken.","FacebookSignupError")},facebookSignupFormServerErrors:{usernameError:!0}};case k.InvalidPassword:return{serverMessage:{message:Object(i.d)("Passwords must be between 8 to 71 characters.","FacebookSignupError")},facebookSignupFormServerErrors:{passwordError:!0}};case k.FacebookAccountAlreadyLinked:return{serverMessage:{message:Object(i.d)("This facebook account is already linked to a Twitch account.","FacebookSignupError"),subMessage:Object(ot.g)(t)},facebookSignupFormServerErrors:{}};case k.EmailThrottled:return{serverMessage:{message:Object(i.d)("The email linked to your Facebook account has been used to create too many accounts in the last 24 hours.","FacebookSignupError"),subMessage:ut(e)},facebookSignupFormServerErrors:{}};case k.IPThrottled:return{serverMessage:{message:Object(i.d)("You are creating accounts too quickly.","FacebookSignupError"),subMessage:ct()},facebookSignupFormServerErrors:{}};case k.TooManyUsers:return{serverMessage:{message:Object(i.d)("The email linked to your Facebook account is associated with too many accounts.","FacebookSignupError"),subMessage:ut(e)},facebookSignupFormServerErrors:{}};case k.UnexpectedFacebookIssue:case k.UnableToVerifyIdentity:return{serverMessage:{message:Object(i.d)("You cannot sign up with this Facebook account right now.","FacebookSignupError"),subMessage:function(e){return Object(i.d)("Please <x:click>create an account here</x:click> instead.",{"x:click":function(t){return Object(ot.m)(t,e)}},"FacebookSignupError")}(e)},facebookSignupFormServerErrors:{}};case k.FailedToDecodeJSON:case k.UnexpectedSignupIssue:default:return{serverMessage:{message:Object(i.d)("Something went wrong.","FacebookSignupError")},facebookSignupFormServerErrors:{}}}}(e,t,r),{isSubmitInTransit:!1})}function ct(){return Object(i.d)("Please try again later.","FacebookSignupError")}function ut(e){return Object(i.d)("Want to <x:click>create a new account</x:click> with a different email instead?",{"x:click":function(t){return Object(ot.m)(t,e)}},"FacebookSignupError")}function lt(e,t,r,o,a,s,c){return n.__assign({},function(e,t,r,n){void 0===r&&(r=!1);var o=H.AuthFormStep.StartLogin,a=H.AuthFormStep.LoginTwoFactor;e!==H.AuthFormStep.VerificationCaptcha&&e!==H.AuthFormStep.StartVerification&&e!==H.AuthFormStep.VerificationTwoFactor||(o=H.AuthFormStep.StartVerification,a=H.AuthFormStep.VerificationTwoFactor);switch(n){case d.UsernameMissing:return{serverMessage:{message:Object(i.d)("The username field is required.","LoginError")},loginFormServerErrors:{usernameError:!0},currentStep:H.AuthFormStep.StartLogin};case d.PasswordMissing:return{serverMessage:{message:Object(i.d)("The password field is required.","LoginError")},loginFormServerErrors:{passwordError:!0},currentStep:o};case d.MultipleAccountsLinkedToEmail:return{serverMessage:{message:Object(i.d)("This email is linked to multiple accounts. Please log in with a username instead.","LoginError"),subMessage:Object(ot.e)()},loginFormServerErrors:{},currentStep:H.AuthFormStep.StartLogin};case d.NoAccountLinkedToEmail:return{serverMessage:{message:Object(i.d)("This email is not linked to a Twitch account. Please log in with a username instead.","LoginError"),subMessage:Object(ot.e)()},loginFormServerErrors:{},currentStep:H.AuthFormStep.StartLogin};case d.IncorrectCaptcha:return e===H.AuthFormStep.LoginCaptcha||e===H.AuthFormStep.VerificationCaptcha?{serverMessage:{message:Object(i.d)("That reCAPTCHA did not work.","LoginError")},loginFormServerErrors:{},currentStep:e}:{serverMessage:{},loginFormServerErrors:{},currentStep:e===H.AuthFormStep.StartVerification?H.AuthFormStep.VerificationCaptcha:H.AuthFormStep.LoginCaptcha};case d.InvalidUsername:return{serverMessage:{message:Object(i.d)("We didn't recognize this username. Please try again.","LoginError"),subMessage:Object(ot.e)()},loginFormServerErrors:{usernameError:!0},currentStep:H.AuthFormStep.StartLogin};case d.InvalidPassword:return{serverMessage:{message:Object(ot.f)(r),subMessage:Object(ot.d)()},loginFormServerErrors:{passwordError:!0},currentStep:o};case d.UserDoesNotExist:return{serverMessage:{message:Object(i.d)("This username does not exist.","LoginError"),subMessage:Object(ot.c)(t)},loginFormServerErrors:{usernameError:!0},currentStep:H.AuthFormStep.StartLogin};case d.UserCredentialsIncorrect:return{serverMessage:{message:Object(ot.f)(r),subMessage:Object(ot.d)()},loginFormServerErrors:{usernameError:!0,passwordError:!0},currentStep:o};case d.UserNeedsPasswordReset:return{serverMessage:{message:Object(i.d)("This account needs a password reset.","LoginError"),subMessage:Object(ot.i)()},loginFormServerErrors:{},currentStep:H.AuthFormStep.StartLogin};case d.UserHasBeenDeleted:return{serverMessage:{message:Object(i.d)("This account does not exist.","LoginError"),subMessage:Object(ot.b)()},loginFormServerErrors:{},currentStep:H.AuthFormStep.StartLogin};case d.SuspendedUser:return{serverMessage:{message:Object(i.d)("This account has been suspended.","LoginError"),subMessage:Object(ot.j)()},loginFormServerErrors:{},currentStep:H.AuthFormStep.StartLogin};case d.DeviceCookieThrottleReached:return{serverMessage:{message:Object(i.d)("You have attempted to log in too many times on this device.","LoginError"),subMessage:Object(i.d)("Please try again later.","LoginError")},loginFormServerErrors:{},currentStep:H.AuthFormStep.StartLogin};case d.MissingAuthyToken:return{serverMessage:{},loginFormServerErrors:{},currentStep:a};case d.InvalidAuthyToken:return{serverMessage:{message:Object(i.d)("That code was incorrect.","LoginError")},loginFormServerErrors:{},currentStep:a};case d.FailedToVerifyAuthyToken:return{serverMessage:{message:Object(i.d)("We were unable to verify your Authy code.","LoginError")},loginFormServerErrors:{},currentStep:a};case d.FailedToDecodeJSON:case d.UnexpectedError:default:return{serverMessage:{message:Object(i.d)("Something went wrong.","LoginError")},loginFormServerErrors:{},currentStep:H.AuthFormStep.StartLogin}}}(e,t,o,a),{captchaState:nt(r,s),isSubmitInTransit:!1,smsProof:c})}var pt=r("p46w"),dt=r("7M8a"),ht=new RegExp(/@(((([^.]+)\.)+)([a-zA-Z]{3,}|[a-zA-Z.]{5,}))/);var mt="under13";function gt(e,t){return n.__assign({},function(e,t){switch(t){case g.UserNameMissing:return{serverMessage:{message:Object(i.d)("The username field is required.","SignupError")},signupFormServerErrors:{usernameError:!0}};case g.PasswordMissing:return{serverMessage:{message:Object(i.d)("The password field is required.","SignupError")},signupFormServerErrors:{passwordError:!0}};case g.IncorrectCaptcha:return{serverMessage:{message:Object(i.d)("That reCAPTCHA did not work.","SignupError")},signupFormServerErrors:{}};case g.BlacklistedIP:return{serverMessage:{message:Object(i.d)("We've noticed suspicious activity from this IP address.","SignupError")},signupFormServerErrors:{}};case g.BlacklistedEmailDomain:return{serverMessage:{message:Object(i.d)('Emails using the domain "{domain}" are not allowed.',{domain:function(e){if(!e)return"";var t=ht.exec(e);return null===t?"":t[1]}(e)},"SignupError"),subMessage:Object(i.d)("Please try again with a different email address","SignupError")},signupFormServerErrors:{emailError:!0}};case g.InvalidBirthday:return{serverMessage:{message:Object(i.d)("That birthday doesnât seem right.","SignupError")},signupFormServerErrors:{birthdayError:!0}};case g.InvalidUsername:return{serverMessage:{message:Object(i.d)("This username submission is invalid.","SignupError")},signupFormServerErrors:{usernameError:!0}};case g.InvalidPassword:return{serverMessage:{message:Object(i.d)("Passwords must be between 8 and 71 characters.","SignupError")},signupFormServerErrors:{passwordError:!0}};case g.MissingFields:return{serverMessage:{message:Object(i.d)("Some fields were missing.","SignupError"),subMessage:Object(i.d)("Please complete all fields to continue.","SignupError")},signupFormServerErrors:{}};case g.UsernameExists:return{serverMessage:{message:Object(i.d)("This username is unavailable.","SignupError")},signupFormServerErrors:{usernameError:!0}};case g.UserUnder13:return pt.set(mt,"true"),{serverMessage:{message:Object(i.d)("Sorry, you must be at least 13 years old to create an account.","SignupError"),subMessage:Object(i.d)("Please read our <x:link>terms of service</x:link>.",{"x:link":function(e){return Object(ot.l)(e,se.d)}},"SignupError")},signupFormServerErrors:{}};case g.EmailThrottled:return{serverMessage:{message:Object(i.d)("This email has been used to create too many accounts in the last 24 hours.","SignupError"),subMessage:Object(i.d)("Please try again with a different email address or try again tomorrow.","SignupError")},signupFormServerErrors:{emailError:!0}};case g.IPThrottled:return{serverMessage:{message:Object(i.d)("You are creating accounts too quickly.","SignupError"),subMessage:Object(i.d)("Please try again later.","SignupError")},signupFormServerErrors:{}};case g.TooManyUsersWithEmail:return{serverMessage:{message:Object(i.d)("This email is associated with too many accounts.","SignupError"),subMessage:ft()},signupFormServerErrors:{emailError:!0}};case g.MultiAccountDisabled:return{serverMessage:{message:Object(i.d)("Unable to create account.","SignupError"),subMessage:ft()},signupFormServerErrors:{emailError:!0}};case g.FailedToDecodeJSON:case g.UnexpectedIssue:default:return{serverMessage:{message:Object(i.d)("Something went wrong.","SignupError")},signupFormServerErrors:{}}}}(e,t),{isSubmitInTransit:!1})}function ft(){return Object(i.d)("Please use a different email to continue. <x:link>Click here</x:link> for more details.",{"x:link":function(e){return Object(ot.l)(e,Object(dt.b)(dt.a.CreatingAccounts))}},"SignupError")}var bt,vt="https://passport.twitch.tv/twofactor/sms/new";!function(e){e[e.UnexpectedError=3014]="UnexpectedError",e[e.SMSThrottled=3015]="SMSThrottled"}(bt||(bt={}));var St,kt=r("D7An");function Ft(){return i.q.experiments.getAndTrackAssignment(kt.b.WatchVerifyEmail)===St.Treatment}!function(e){e.Control="control",e.Treatment="treatment"}(St||(St={}));var yt;r("IisL");(yt||(yt={})).AuthFormBack="auth-form-back";var wt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentStep:t.props.initialStep,rootStep:t.props.initialStep,loginFormValues:{username:t.props.initialStep===O.a.StartVerification?t.props.currentUserLogin:void 0},loginFormServerErrors:{},facebookSignupFormValues:{},facebookSignupFormServerErrors:{},facebookConnectFormValues:{},facebookConnectFormServerErrors:{},signupFormValues:{},signupFormServerErrors:{},twoFactorFormValues:{},facebookInfo:{},captchaState:{type:ue.None},serverMessage:{},isSubmitInTransit:!1,smsRequestState:Je.None,isCapsLockOn:!1,showEmailVerification:!1},t.onKeyPressed=function(e){var r=t.state.isCapsLockOn,n=function(e){return e.getModifierState&&e.getModifierState("CapsLock")}(e);n!==r&&t.setState({isCapsLockOn:n})},t.goBack=function(){t.state.isSubmitInTransit||(t.state.currentStep===O.a.FacebookConnectTwoFactor||t.state.currentStep===O.a.FacebookConnectCaptcha?t.changeFacebookFormType(O.a.FacebookConnect):t.state.rootStep===O.a.StartLogin?t.startLogin():t.state.rootStep===O.a.StartVerification?t.startVerification():t.startSignup())},t.isInitialStep=function(e){return void 0===e&&(e=t.state.currentStep),e===O.a.StartLogin||e===O.a.StartSignup||e===O.a.FacebookLogin||e===O.a.StartVerification},t.isLoginFlow=function(e){return void 0===e&&(e=t.state.currentStep),e===O.a.StartLogin||e===O.a.StartVerification||e===O.a.LoginTwoFactor||e===O.a.VerificationTwoFactor||e===O.a.LoginCaptcha||e===O.a.VerificationCaptcha||e===O.a.FacebookLogin||e===O.a.FacebookLoginTwoFactor},t.onLoginTabClicked=function(){t.state.isSubmitInTransit||t.state.currentStep===O.a.StartLogin||t.startLogin()},t.onSignupTabClicked=function(){t.state.isSubmitInTransit||t.state.currentStep===O.a.StartSignup||t.startSignup()},t.startLogin=function(){t.setState({rootStep:O.a.StartLogin,captchaState:{type:ue.None},twoFactorFormValues:{},serverMessage:{},currentStep:O.a.StartLogin})},t.startVerification=function(){t.setState({rootStep:O.a.StartVerification,captchaState:{type:ue.None},twoFactorFormValues:{},serverMessage:{},currentStep:O.a.StartVerification})},t.startSignup=function(){t.setState(function(e){return{rootStep:O.a.StartSignup,captchaState:{type:ue.None},signupFormValues:n.__assign({},e.signupFormValues,{captchaValue:void 0}),twoFactorFormValues:{},facebookSignupFormValues:{},serverMessage:{},currentStep:O.a.StartSignup}})},t.onLoginFormValuesChanged=function(e){t.setState(function(t){return{loginFormValues:n.__assign({},t.loginFormValues,e),loginFormServerErrors:{},serverMessage:{}}})},t.changeFacebookSignupFormValues=function(e){t.setState(function(t){return{facebookSignupFormValues:n.__assign({},t.facebookSignupFormValues,e),facebookSignupFormServerErrors:{},serverMessage:{}}})},t.changeFacebookConnectFormValues=function(e){t.setState(function(t){return{facebookConnectFormValues:n.__assign({},t.facebookConnectFormValues,e),facebookConnectFormServerErrors:{},serverMessage:{}}})},t.getCurrentCaptchaState=function(e,t,r){return r?{type:ue.None}:t?{type:ue.Passed,value:t}:e},t.onSignupFormValuesChanged=function(e){t.setState(function(r){return{signupFormValues:n.__assign({},r.signupFormValues,e),captchaState:t.getCurrentCaptchaState(r.captchaState,e.captchaValue,e.username),signupFormServerErrors:{},serverMessage:{}}})},t.onTwoFactorFormValuesChanged=function(e){t.setState(function(t){return{twoFactorFormValues:n.__assign({},t.twoFactorFormValues,e),serverMessage:{}}})},t.beginSMSRequest=function(){return t.state.smsRequestState!==Je.Loading&&(t.setState({smsRequestState:Je.Loading}),!0)},t.onSMSSubmit=function(){return n.__awaiter(t,void 0,void 0,function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return this.state.smsProof&&this.beginSMSRequest()?[4,function(e){return n.__awaiter(this,void 0,Promise,function(){var t,r,o,a,s;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),(t=new FormData).append("code",e),[4,fetch(vt,{method:"POST",credentials:"include",body:t})];case 1:return[4,(r=n.sent()).json()];case 2:return o=n.sent(),a=200===r.status,s=o&&!a?o.error_code:void 0,[2,{success:a,errorCode:s}];case 3:return n.sent(),[2,{errorCode:bt.UnexpectedError,success:!1}];case 4:return[2]}})})}(this.state.smsProof)]:[3,2];case 1:(e=t.sent()).success?this.setState({smsRequestState:Je.Success}):this.setState(n.__assign({},function(e){switch(e){case bt.SMSThrottled:return{serverMessage:{message:Object(i.d)("You have requested too many SMS messages.","SMSError"),subMessage:Object(i.d)("Try again later.","SMSError")}};case bt.UnexpectedError:default:return{serverMessage:{message:Object(i.d)("Error encountered when sending SMS.","SMSError")}}}}(e.errorCode),{smsRequestState:Je.None})),t.label=2;case 2:return[2]}})})},t.onAuthSubmit=function(){return n.__awaiter(t,void 0,void 0,function(){var e,t;return n.__generator(this,function(r){switch(r.label){case 0:switch(t=this.state.currentStep,t){case O.a.StartLogin:case O.a.StartVerification:case O.a.LoginCaptcha:case O.a.VerificationCaptcha:case O.a.LoginTwoFactor:case O.a.VerificationTwoFactor:return[3,1];case O.a.FacebookLogin:case O.a.FacebookLoginTwoFactor:return[3,3];case O.a.FacebookConnect:case O.a.FacebookConnectTwoFactor:case O.a.FacebookConnectCaptcha:return[3,5];case O.a.FacebookSignup:return[3,7];case O.a.StartSignup:return[3,9]}return[3,11];case 1:return[4,this.login()];case 2:return e=r.sent(),[3,12];case 3:return[4,this.facebookLogin()];case 4:return e=r.sent(),[3,12];case 5:return[4,this.facebookConnect()];case 6:return e=r.sent(),[3,12];case 7:return[4,this.facebookSignup()];case 8:return e=r.sent(),[3,12];case 9:return[4,this.signup()];case 10:return e=r.sent(),[3,12];case 11:return[2,void 0];case 12:return Object(V.l)({errorCode:e,step:t}),[2]}})})},t.beginSubmit=function(){return!t.state.isSubmitInTransit&&(t.setState({isSubmitInTransit:!0}),!0)},t.login=function(){return n.__awaiter(t,void 0,Promise,function(){var e,t;return n.__generator(this,function(r){switch(r.label){case 0:return De(this.state.loginFormValues,this.state.loginFormServerErrors)&&this.beginSubmit()?[4,function(e){var t=i.q.logger.withCategory("auth.login"),r={username:e.username,password:e.password,remember_me:e.rememberMe,client_id:i.q.config.authSettings.clientID};e.captchaProof?r.captcha={proof:e.captchaProof}:e.captchaValue&&(r.captcha={value:e.captchaValue,key:i.q.config.captchaKey}),e.authyToken&&(r.authy_token=e.authyToken);var n=Object(h.d)()?b:f;return Object(m.b)(n,r,{config:i.a,logger:t})}(function(e,t,r){var n={username:e.username,password:e.password};return t.token&&(n.authyToken=t.token),t.rememberMe&&(n.rememberMe=t.rememberMe),r.type===ue.Passed?n.captchaValue=r.value:r.type===ue.Proved&&(n.captchaProof=r.proof),n}(this.state.loginFormValues,this.state.twoFactorFormValues,this.state.captchaState))]:[3,5];case 1:return(e=r.sent()).complete?(t=this.props.postLoginAction?this.followUser:void 0,[4,e.complete({next:this.props.nextURL,onComplete:t,skipReloadAndRedirect:this.state.currentStep===O.a.StartVerification||this.state.currentStep===O.a.VerificationCaptcha||this.state.currentStep===O.a.VerificationTwoFactor})]):[3,3];case 2:return r.sent(),this.onLoginComplete(),[3,4];case 3:this.setState(lt(this.state.currentStep,this.startSignup,this.state.captchaState,this.state.isCapsLockOn,e.errorCode,e.captchaProof,e.smsProof)),r.label=4;case 4:return[2,e.errorCode];case 5:return[2]}})})},t.followUser=function(){return n.__awaiter(t,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return this.props.postLoginAction?[4,this.props.followUserMutation(this.props.postLoginAction.data.followData)]:[3,2];case 1:return[2,e.sent()];case 2:return[2]}})})},t.facebookLogin=function(){return n.__awaiter(t,void 0,Promise,function(){var e,t,r,o,a=this;return n.__generator(this,function(n){switch(n.label){case 0:return Fe(e=this.state.facebookInfo)&&this.beginSubmit()?(t={facebook:{userID:e.id,accessToken:e.accessToken}},this.state.twoFactorFormValues.token&&(t.authyToken=this.state.twoFactorFormValues.token),[4,function(e){var t=i.q.logger.withCategory("auth.facebook-login"),r={facebook:{access_token:e.facebook.accessToken,user_id:e.facebook.userID},client_id:i.q.config.authSettings.clientID};return e.authyToken&&(r.authy_token=e.authyToken),Object(m.b)(F,r,{config:i.a,logger:t})}(t)]):[3,5];case 1:return(r=n.sent()).complete?(o=this.props.postLoginAction?this.followUser:void 0,[4,r.complete({next:this.props.nextURL,onComplete:o})]):[3,3];case 2:return n.sent(),this.onLoginComplete(),[3,4];case 3:this.setState(st(function(){return a.changeFacebookFormType(O.a.FacebookSignup)},r.errorCode,r.smsProof)),n.label=4;case 4:return[2,r.errorCode];case 5:return[2]}})})},t.facebookSignup=function(){return n.__awaiter(t,void 0,Promise,function(){var e,t,r,o,a;return n.__generator(this,function(n){switch(n.label){case 0:return e=this.state.facebookInfo,t=this.state.facebookSignupFormValues,r=this.state.facebookSignupFormServerErrors,Fe(e)&&ye(t,r)&&this.beginSubmit()?[4,function(e){var t=i.q.logger.withCategory("auth.facebook-register"),r={username:e.username,password:e.password,facebook:{access_token:e.facebook.accessToken,user_id:e.facebook.userID},client_id:i.q.config.authSettings.clientID};return Object(m.b)(w,r,{config:i.a,logger:t})}(function(e,t){return{facebook:{userID:t.id,accessToken:t.accessToken},username:e.username,password:e.password}}(t,e))]:[3,5];case 1:return(o=n.sent()).complete?(a=this.props.postLoginAction?this.followUser:void 0,[4,o.complete({next:this.props.nextURL,onComplete:a})]):[3,3];case 2:return n.sent(),this.onSignupComplete(),[3,4];case 3:this.setState(it(this.startSignup,this.facebookLogin,o.errorCode)),n.label=4;case 4:return[2,o.errorCode];case 5:return[2]}})})},t.facebookConnect=function(){return n.__awaiter(t,void 0,Promise,function(){var e,t,r,o,a;return n.__generator(this,function(n){switch(n.label){case 0:return e=this.state.facebookInfo,t=this.state.facebookConnectFormServerErrors,ke(r=this.state.facebookConnectFormValues,t)&&Fe(e)&&this.beginSubmit()?[4,function(e){var t=i.q.logger.withCategory("auth.facebook-connect"),r={username:e.username,password:e.password,facebook:{access_token:e.facebook.accessToken,user_id:e.facebook.userID},client_id:i.q.config.authSettings.clientID};return e.authyToken&&(r.authy_token=e.authyToken),e.captchaValue?r.captcha={key:i.q.config.captchaKey,value:e.captchaValue}:e.captchaProof&&(r.captcha={proof:e.captchaProof}),Object(m.b)(E,r,{config:i.a,logger:t})}(function(e,t,r,n){var o={facebook:{userID:e.id,accessToken:e.accessToken},username:t.username,password:t.password};return r.token&&(o.authyToken=r.token),n.type===ue.Passed?o.captchaValue=n.value:n.type===ue.Proved&&(o.captchaProof=n.proof),o}(e,r,this.state.twoFactorFormValues,this.state.captchaState))]:[3,5];case 1:return(o=n.sent()).complete?(a=this.props.postLoginAction?this.followUser:void 0,[4,o.complete({next:this.props.nextURL,onComplete:a})]):[3,3];case 2:return n.sent(),this.onLoginComplete(),[3,4];case 3:this.setState(at(this.state.currentStep,this.startSignup,this.facebookLogin,this.state.captchaState,o.errorCode,o.captchaProof,o.smsProof)),n.label=4;case 4:return[2,o.errorCode];case 5:return[2]}})})},t.signup=function(){return n.__awaiter(t,void 0,Promise,function(){var e,t,r,o,a,s;return n.__generator(this,function(c){switch(c.label){case 0:return Ft()?(this.setState({showEmailVerification:!0}),[2]):this.isReadyToSubmitSignup(this.state.signupFormValues,this.state.signupFormServerErrors)&&this.beginSubmit()?[4,function(e){var t={value:e.captchaValue||"",key:i.q.config.invisibleCaptchaKey},r={proof:e.captchaProof||""},n={username:e.username,password:e.password,email:e.email,birthday:e.birthday,client_id:i.q.config.authSettings.clientID,captcha:e.captchaValue?t:r},o=i.q.logger.withCategory("auth.register");return Object(m.b)(S,n,{config:i.a,logger:o})}(function(e,t){var r={username:e.username,password:e.password,email:e.email,birthday:{day:e.birthdayDate.day,month:e.birthdayDate.month,year:e.birthdayDate.year}};return t.type===ue.Passed?r.captchaValue=t.value:t.type===ue.Proved&&(r.captchaProof=t.proof),r}(this.state.signupFormValues,this.state.captchaState))]:[3,5];case 1:return(e=c.sent()).complete?(t=this.props.postLoginAction?this.followUser:void 0,[4,e.complete({next:this.props.nextURL,onComplete:t})]):[3,3];case 2:return c.sent(),this.onSignupComplete(),[3,4];case 3:(r=e.captchaProof)||this.state.captchaState.type!==ue.Proved||(r=this.state.captchaState.proof),o=nt(this.state.captchaState,r&&e.errorCode!==g.IncorrectCaptcha?r:void 0),a=n.__assign({},this.state.signupFormValues,{captchaValue:void 0}),s=gt(this.state.signupFormValues.email,e.errorCode),this.setState(n.__assign({captchaState:o,signupFormValues:a},s)),c.label=4;case 4:return[2,e.errorCode];case 5:return[2]}})})},t.onLoginComplete=function(){Object(V.m)(),t.props.onAuthComplete&&t.props.onAuthComplete()},t.onSignupComplete=function(){Object(V.p)(),t.props.onAuthComplete&&t.props.onAuthComplete()},t.changeFacebookFormType=function(e){t.setState({facebookSignupFormValues:{},facebookConnectFormValues:{},serverMessage:{},currentStep:e})},t.onFacebookConnected=function(e){var r=t.isLoginFlow()?{}:{message:Object(i.d)("You can now connect this Facebook account to a new Twitch ID.","AuthForm"),subMessage:Object(ot.a)(function(){return t.changeFacebookFormType(O.a.FacebookConnect)}),isSuccessMessage:!0};t.setState({facebookInfo:e,serverMessage:r,currentStep:t.isLoginFlow()?O.a.FacebookLogin:O.a.FacebookSignup},t.facebookLoginCallback)},t.facebookLoginCallback=function(){t.isLoginFlow()&&t.onAuthSubmit()},t.onCaptchaChanged=function(e){e&&t.setState({captchaState:{type:ue.Passed,value:e},serverMessage:{}})},t}return n.__extends(t,e),t.prototype.componentWillMount=function(){document.addEventListener("keydown",this.onKeyPressed),document.addEventListener("keyup",this.onKeyPressed)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keyup",this.onKeyPressed),document.removeEventListener("keydown",this.onKeyPressed),Object(V.j)({screen:Object(V.h)(this.state.currentStep),target:V.g.Close,action:V.a.Click})},t.prototype.componentDidMount=function(){this.props.latencyTracking.reportCustomEvent(this.props.loadedLatencyEvent)},t.prototype.render=function(){return Ft()&&this.state.showEmailVerification&&this.state.signupFormValues.username?o.createElement(I.Ob,{background:I.u.Base},o.createElement(rt,{email:this.state.signupFormValues.email,username:this.state.signupFormValues.username})):o.createElement(I.Ob,{padding:{x:2,y:3},display:I.Da.Flex,flexDirection:I.Ga.Column,background:I.u.Base},this.renderBackButton(),this.renderHeader(),this.renderNavigation(),this.renderServerMessage(),this.renderForm(),this.renderFooter())},t.prototype.renderBackButton=function(){return this.isInitialStep()?null:o.createElement(I.fb,null,o.createElement(I.D,{ariaLabel:Object(i.d)("Back","AuthForm"),icon:I.Db.AngleLeft,onClick:this.goBack,"data-test-selector":yt.AuthFormBack}))},t.prototype.renderHeader=function(){return o.createElement(D,{currentStep:this.state.currentStep,fbConnectUsername:this.state.facebookConnectFormValues.username,loginUsername:this.state.loginFormValues.username,currentUserLogin:this.props.currentUserLogin,currentUserDisplayName:this.props.currentUserDisplayName})},t.prototype.renderNavigation=function(){if(!this.isInitialStep()||this.state.currentStep===O.a.StartVerification)return null;var e=this.isLoginFlow();return o.createElement(I.Ob,{fontSize:I.Ia.Size5,margin:{top:2},"data-a-target":"auth-form-tab-container"},o.createElement(I.Yb,{justifyContent:I.eb.Start,size:I.Qb.Default,activeTabIndex:e?0:1,tabs:[{onClick:this.onLoginTabClicked,label:Object(i.d)("Log In","AuthForm"),disabled:this.state.isSubmitInTransit&&!e},{onClick:this.onSignupTabClicked,label:Object(i.d)("Sign Up","AuthForm"),disabled:this.state.isSubmitInTransit&&e}]}))},t.prototype.renderServerMessage=function(){return o.createElement(Pe.a,n.__assign({},this.state.serverMessage))},t.prototype.renderForm=function(){switch(this.state.currentStep){case O.a.StartLogin:case O.a.StartVerification:case O.a.FacebookLogin:return o.createElement(Ve,{values:this.state.loginFormValues,serverErrors:this.state.loginFormServerErrors,onLoginFormValuesChanged:this.onLoginFormValuesChanged,onLoginRequested:this.onAuthSubmit,isLoading:this.state.isSubmitInTransit,passwordOnly:!(!this.props.currentUserLogin||this.props.initialStep!==O.a.StartVerification),isCapsLockOn:this.state.isCapsLockOn});case O.a.StartSignup:return o.createElement(Ke,{values:this.state.signupFormValues,serverErrors:this.state.signupFormServerErrors,onSignupFormValuesChanged:this.onSignupFormValuesChanged,onSignupRequested:this.onAuthSubmit,isLoading:this.state.isSubmitInTransit,isCapsLockOn:this.state.isCapsLockOn,hasPassedCaptcha:this.state.captchaState.type!==ue.None});case O.a.FacebookSignup:return o.createElement(je,{facebookName:this.state.facebookInfo.name,values:this.state.facebookSignupFormValues,serverErrors:this.state.facebookSignupFormServerErrors,onFacebookSignupFormValuesChanged:this.changeFacebookSignupFormValues,onFacebookFormTypeChanged:this.changeFacebookFormType,onSignupRequested:this.onAuthSubmit,isLoading:this.state.isSubmitInTransit,isCapsLockOn:this.state.isCapsLockOn});case O.a.FacebookConnect:return o.createElement(Oe,{facebookName:this.state.facebookInfo.name,values:this.state.facebookConnectFormValues,serverErrors:this.state.facebookConnectFormServerErrors,onFacebookConnectFormValuesChanged:this.changeFacebookConnectFormValues,onFacebookFormTypeChanged:this.changeFacebookFormType,onConnectRequested:this.onAuthSubmit,isLoading:this.state.isSubmitInTransit,isCapsLockOn:this.state.isCapsLockOn});case O.a.LoginTwoFactor:case O.a.VerificationTwoFactor:case O.a.FacebookLoginTwoFactor:case O.a.FacebookConnectTwoFactor:return o.createElement(I.fb,{margin:{top:2}},o.createElement($e,{values:this.state.twoFactorFormValues,onTwoFactorFormValuesChanged:this.onTwoFactorFormValuesChanged,onTokenSubmitRequested:this.onAuthSubmit,onSMSRequested:this.onSMSSubmit,isLoading:this.state.isSubmitInTransit,smsRequestState:this.state.smsRequestState}));case O.a.LoginCaptcha:case O.a.VerificationCaptcha:case O.a.FacebookConnectCaptcha:return o.createElement(I.fb,{margin:{top:2}},o.createElement(U,{onCaptchaChanged:this.onCaptchaChanged,disableContinueButton:this.state.captchaState.type!==ue.Passed,onContinueClicked:this.onAuthSubmit,isLoading:this.state.isSubmitInTransit}));default:return}},t.prototype.renderFooter=function(){return!this.isInitialStep()||this.state.currentStep===O.a.StartVerification||i.q.integrations.app?null:o.createElement(I.fb,{margin:{top:2}},o.createElement(B,{onFacebookConnected:this.onFacebookConnected,screen:Object(V.h)(this.state.currentStep),disableConnectButton:this.state.isSubmitInTransit}))},t.prototype.isReadyToSubmitSignup=function(e,t){return!(!We(e,t)||!Object(h.i)()&&!this.state.signupFormValues.captchaValue&&this.state.captchaState.type===ue.None)},t}(o.Component),Et=Object(a.compose)(Object(Ce.withLatencyTracking)("AuthForm",{autoReportInteractive:!0}),function(){var e=this;return Object(c.a)(l,{props:function(t){return{followUserMutation:function(r){return n.__awaiter(e,void 0,void 0,function(){var e,o,a,s;return n.__generator(this,function(n){switch(n.label){case 0:return e={followUser:{__typename:"FollowUserPayload",follow:{disableNotifications:!1,__typename:"Follow",user:{__typename:"User",id:r.user&&r.user.id,displayName:r.user&&r.user.displayName,login:r.user&&r.user.login,self:{__typename:"UserSelfConnection",follower:{__typename:"FollowerEdge",disableNotifications:!1}}}}}},o=Object(u.b)({disableNotifications:!1,targetID:r.user&&r.user.id},e),t.mutate&&r.user&&r.user.id?[4,t.mutate(o)]:[3,2];case 1:return(a=n.sent()).data.followUser&&a.data.followUser.follow&&(s=a.data.followUser.follow,Object(u.f)(p,{login:r.user.login},function(e){var t=e.user;return t&&t.self&&(t.self.follower?t.self.follower.disableNotifications=s.disableNotifications:t.self.follower={__typename:"FollowerEdge",disableNotifications:s.disableNotifications}),e})),[3,3];case 2:throw new Error("followUserMutation is not ready");case 3:return[2]}})})}}}})}(),Object(s.connect)(function(e){var t=Object(T.e)(e);return{currentUserLogin:t&&t.login,currentUserDisplayName:t&&t.displayName}}))(wt);r.d(t,"TestSelectors",function(){return yt}),r.d(t,"AuthFormPresentation",function(){return wt}),r.d(t,"AuthForm",function(){return Et})},"7M8a":function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return l});var n,o,a=r("/7QA"),s=r("kRBY"),i={da:"da",de:"de",en:"en","es-mx":"es",es:"es_es",fi:"fi",fr:"fr",it:"it",ja:"ja",ko:"ko",nl:"nl",no:"no",pl:"pl","pt-br":"pt_br",pt:"pt_br",ru:"ru",sv:"sv",th:"th",tr:"tr",vi:"en","zh-cn":"zh_cn","zh-tw":"zh_tw"},c=Object.keys(i);!function(e){e.CreatingAccounts="658863-creating-an-account",e.SmartNotifications="2944759"}(o||(o={}));var u=((n={})[o.CreatingAccounts]=["da","de","en","es-mx","es","fi","fr","it","ja","ko","nl","no","pt-br","ru","sv","th","zh-tw"],n[o.SmartNotifications]=c,n);function l(e){var t=Object(s.b)(a.q.store.getState())||"en",r="en",n=u[e];return n&&n.includes(t)&&(r=i[t]),"https://help.twitch.tv/customer/"+r+"/portal/articles/"+e}},"96Fe":function(e,t,r){"use strict";var n=r("TSYQ"),o=r("q1tI"),a=r("/7QA"),s=r("Ue10"),i=(r("4PHc"),function(e){if(!e.message)return null;var t=void 0===e.subMessage?Object(a.d)("Please try again.","ServerMessage"):e.subMessage;return o.createElement(s.Ob,{className:n({"server-message-success":e.isSuccessMessage,"server-message-alert":!e.isSuccessMessage}),background:s.u.Alt2,borderRadius:s.A.Large,display:s.Da.Flex,margin:{top:2,x:"auto"},padding:{y:1,left:1,right:2},position:s.tb.Relative,fullWidth:!0},o.createElement(s.fb,{className:n({"server-message-success__icon":e.isSuccessMessage,"server-message-alert__icon":!e.isSuccessMessage}),alignItems:s.i.Start,display:s.Da.Flex},o.createElement(s.Cb,{asset:e.isSuccessMessage?s.Db.NotificationSuccess:s.Db.NotificationError,height:30,width:30})),o.createElement(s.fb,{display:s.Da.Flex,flexDirection:s.Ga.Column,padding:{left:.5}},o.createElement(s.Ca,{fontSize:s.Ia.Size6,type:s.gc.Strong},e.message),o.createElement(s.fb,null,o.createElement(s.Ca,{fontSize:s.Ia.Size6,color:s.R.Alt2},t))))});r.d(t,"a",function(){return i})},E3CR:function(e,t,r){},EQ2E:function(e,t,r){"use strict";var n=r("/MKj"),o=r("kRBY"),a=r("mrSG"),s=r("TSYQ"),i=r("q1tI"),c=r("/7QA"),u=r("tKDy"),l=r("Ue10"),p=(r("g/Ny"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={widgetId:null},t.onChange=function(e){Object(u.j)({screen:t.props.screen,target:u.g.Captcha,action:u.a.Complete}),t.props.onChange(e)},t.onExpired=function(){t.props.onChange(null)},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;if(this.props.refDelegate&&this.props.refDelegate(this),window.onRecaptchaLoad=function(){e.initRecaptcha()},document.querySelector("#recaptcha-script"))this.initRecaptcha();else{var t=document.createElement("script");t.src="https://recaptcha.net/recaptcha/api.js?onload=onRecaptchaLoad&render=explicit&hl="+this.props.languageCode,t.async=!0,t.id="recaptcha-script",document.body.appendChild(t)}},t.prototype.componentWillUnmount=function(){window.onRecaptchaLoad=function(){}},t.prototype.render=function(){var e=this.props.showLoader&&null===this.state.widgetId,t=s({"g-recaptcha":this.props.invisible,"recaptcha--loading":e});return i.createElement(i.Fragment,null,e&&i.createElement(l.hb,{size:l.Mb.Large}),i.createElement("div",{id:"recaptcha-element-container",className:t}))},t.prototype.reset=function(){null!==this.state.widgetId&&window.grecaptcha&&window.grecaptcha.reset(this.state.widgetId)},t.prototype.execute=function(){null!==this.state.widgetId&&window.grecaptcha&&this.props.invisible&&window.grecaptcha.execute(this.state.widgetId)},t.prototype.initRecaptcha=function(){if(window.grecaptcha){var e=window.grecaptcha.render("recaptcha-element-container",{sitekey:this.props.invisible?c.q.config.invisibleCaptchaKey:c.q.config.captchaKey,callback:this.onChange,theme:"light",type:"image",size:this.props.invisible?"invisible":"normal",tabindex:0,hl:this.props.languageCode,badge:"bottomright","expired-callback":this.onExpired});this.setState({widgetId:e})}},t}(i.PureComponent));var d=Object(n.connect)(function(e){return{languageCode:Object(o.b)(e)}})(p);r.d(t,"a",function(){return d}),r.d(t,!1,function(){return p})},FsIG:function(e,t,r){"use strict";function n(e){return e||""}function o(e){return e?e.toString():""}r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o})},GxR5:function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"c",function(){return a}),r.d(t,"d",function(){return s});var n="/user/account-recovery",o="https://help.twitch.tv/customer/portal/emails/new",a="https://help.twitch.tv/customer/portal/articles/1727973-about-site-suspensions-channel-bans-and-dmca",s="https://www.twitch.tv/p/legal/terms-of-service/"},IisL:function(e,t,r){},QRgD:function(e,t,r){},Qdxp:function(e,t,r){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FollowButton_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"followButtonFragment"},directives:[]}]}}]}}],loc:{start:0,end:156}};n.loc.source={body:'#import "twilight/common/queries/follow-button-fragment.gql"\nquery FollowButton_User($login: String!) {\nuser(login: $login) {\nid\n...followButtonFragment\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var o={};n.definitions=n.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!o[t]&&(o[t]=!0,!0)})}(r("V94A").definitions)),e.exports=n},SFR8:function(e,t,r){"use strict";var n,o=r("mrSG"),a=r("zB42"),s=r("MgK0"),i=r("/7QA"),c=r("XWOp");r.d(t,"a",function(){return n}),r.d(t,"b",function(){return p}),r.d(t,"d",function(){return d}),r.d(t,"c",function(){return h}),function(e){e.Valid="valid",e.Invalid="invalid",e.Error="error"}(n||(n={}));var u=["canary.twitch.tv","clips.twitch.tv","dev.twitch.tv","glass.twitch.tv","rc.twitch.tv","release.twitch.tv","rivals.twitch.tv","www.twitch.tv"];function l(e,t,r){void 0===t&&(t={});var n=r.config,a=r.logger;return o.__awaiter(this,void 0,void 0,function(){var r,u,l,p;return o.__generator(this,function(h){switch(h.label){case 0:return t&&t.skipReloadAndRedirect?(a.debug("Skipping reload and redirect"),[2]):[4,function(e,t,r){var n=t.config,a=t.logger;return o.__awaiter(this,void 0,void 0,function(){var t,u,l,p;return o.__generator(this,function(o){switch(o.label){case 0:a.debug("Getting user data from GraphQL with new token"),t=i.q.apollo.authToken,o.label=1;case 1:return o.trys.push([1,5,6,7]),i.q.apollo.authToken=e,[4,i.q.apollo.client.query({fetchPolicy:"network-only",query:c})];case 2:return(u=o.sent()).data.currentUser?(l={authToken:e,displayName:u.data.currentUser.displayName,id:u.data.currentUser.id,login:u.data.currentUser.login,roles:{isStaff:!!u.data.currentUser.roles&&!!u.data.currentUser.roles.isStaff}},Object(s.n)(l,{config:n,logger:a}),r?[4,r()]:[3,4]):(a.error(new Error("Failed to get user data from GraphQL, but there was no client error."),"Failed to get user data from GraphQL, but there was no client error."),[2]);case 3:o.sent(),o.label=4;case 4:return[3,7];case 5:return p=o.sent(),a.error(p,"Failed to get user data from GraphQL."),[3,7];case 6:return i.q.apollo.authToken=t,[7];case 7:return[2,t]}})})}(e,{config:n,logger:a},t.onComplete)];case 1:return h.sent(),t&&t.next?(a.debug("Navigating to "+t.next),r=d(t.next,{config:n,logger:a}),u=r.nextURL,l=r.nextHostnameIsTrusted,p=l?u.href:"/",window.location.assign(p)):(a.debug("'next' is not provided, reloading page"),window.location.reload()),[2]}})})}function p(e,t,r){var n=r.config,a=r.logger;return o.__awaiter(this,void 0,Promise,function(){var r,i,c,u,p,d;return o.__generator(this,function(o){switch(o.label){case 0:Object(s.i)()&&(e+="?trusted_request=true"),r=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",credentials:"include",body:JSON.stringify(t)})];case 2:return r=o.sent(),[3,4];case 3:return i=o.sent(),a.warn("Request to "+e+" failed.",{err:i}),[2,{success:!1}];case 4:if(200!==r.status)return[3,9];o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return c=o.sent(),[3,8];case 7:return u=o.sent(),a.warn("Unable to parse response JSON",{err:u}),[2,{success:!1}];case 8:return a.debug("Received success response"),[2,{success:!0,complete:function(e){return l(c.access_token,e,{config:n,logger:a})}}];case 9:p=void 0,o.label=10;case 10:return o.trys.push([10,12,,13]),[4,r.json()];case 11:return p=o.sent(),[3,13];case 12:return d=o.sent(),a.warn("Unable to parse response JSON",{err:d}),[2,{success:!1}];case 13:return a.debug("Received error response",{response:p}),[2,{success:!1,errorCode:p.error_code,errorDescription:p.error_description,captchaProof:p.captcha_proof,smsProof:p.sms_proof}]}})})}function d(e,t){var r=t.config,n=t.logger,o=!1,s=document.createElement("a");s.href=e;var i=new URL(s.href);return r.buildType!==a.a.Production||"twitch.tv"===i.hostname||u.some(function(e){return i.hostname.endsWith(e)})?o=!0:n.error(new Error("Attempted to redirect away from site."),"Attempted to redirect from auth flow to "+e+"."),{nextURL:i,nextHostnameIsTrusted:o}}function h(e){return o.__awaiter(this,void 0,Promise,function(){var t,r;return o.__generator(this,function(o){switch(o.label){case 0:t="https://passport.twitch.tv/validate/sudo",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t,{body:JSON.stringify({user_id:e}),credentials:"include",method:"POST"})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,n.Error];case 4:return r&&204===r.status?[2,n.Valid]:[2,n.Invalid]}})})}},T1dR:function(e,t,r){},Urk9:function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AuthFormHeader"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}}]}}],loc:{start:0,end:70}};r.loc.source={body:"query AuthFormHeader {\ncurrentUser {\nid\nprofileImageURL(width: 50)\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=r},V94A:function(e,t){var r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"followButtonFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"follower"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disableNotifications"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:172}};r.loc.source={body:"# Queries the data necessary to render the FollowButton component.\nfragment followButtonFragment on User {\nid\ndisplayName\nlogin\nself {\nfollower {\ndisableNotifications\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=r},VLV5:function(e,t,r){},VcSt:function(e,t){!function(e){var t={},r=e.prototype.stopCallback;e.prototype.stopCallback=function(e,n,o,a){return!!this.paused||!t[o]&&!t[a]&&r.call(this,e,n,o)},e.prototype.bindGlobal=function(e,r,n){if(this.bind(e,r,n),e instanceof Array)for(var o=0;o<e.length;o++)t[e[o]]=!0;else t[e]=!0},e.init()}(Mousetrap)},XWOp:function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CoreAuthCurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:84}};r.loc.source={body:"query CoreAuthCurrentUser {\ncurrentUser {\ndisplayName\nid\nlogin\nroles {\nisStaff\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=r},YVDj:function(e){e.exports={"ar-sa":"DMY","bg-bg":"DMY","cs-cz":"DMY","da-dk":"DMY","de-de":"DMY","el-gr":"DMY","en-gb":"MDY","en-us":"MDY","es-es":"DMY","es-mx":"DMY","fi-fi":"DMY","fr-fr":"DMY","hi-in":"DMY","hu-hu":"YMD","it-it":"DMY","ja-jp":"YMD","ko-kr":"YMD","nl-nl":"DMY","no-no":"DMY","pl-pl":"DMY","pt-br":"DMY","pt-pt":"DMY","ro-ro":"DMY","ru-ru":"DMY","sk-sk":"DMY","sv-se":"YMD","th-th":"DMY","tr-tr":"DMY","vi-vn":"DMY","zh-tw":"YMD","zh-cn":"YMD"}},ZBeb:function(e,t,r){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FollowButton_FollowUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FollowUserInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"followUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"follow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disableNotifications"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"followButtonFragment"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:218}};n.loc.source={body:'#import "twilight/common/queries/follow-button-fragment.gql"\nmutation FollowButton_FollowUser($input: FollowUserInput!) {\nfollowUser(input: $input) {\nfollow {\ndisableNotifications\nuser {\n...followButtonFragment\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var o={};n.definitions=n.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!o[t]&&(o[t]=!0,!0)})}(r("V94A").definitions)),e.exports=n},"g/Ny":function(e,t,r){},pKR5:function(e,t,r){},qV8A:function(e,t,r){},rACw:function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"a",function(){return s});var n=r("/7QA"),o=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);function a(e){return!!e&&o.test(e)}function s(e){if(!a(e))return Object(n.d)("Please enter a valid email.","EmailValidator")}},uVVX:function(e,t,r){},ugtu:function(e,t,r){"use strict";r.d(t,"k",function(){return i}),r.d(t,"l",function(){return c}),r.d(t,"m",function(){return u}),r.d(t,"e",function(){return l}),r.d(t,"d",function(){return p}),r.d(t,"i",function(){return d}),r.d(t,"b",function(){return h}),r.d(t,"j",function(){return m}),r.d(t,"c",function(){return g}),r.d(t,"g",function(){return f}),r.d(t,"h",function(){return b}),r.d(t,"a",function(){return v}),r.d(t,"f",function(){return S});var n=r("q1tI"),o=r("/7QA"),a=r("GxR5"),s=r("Ue10");function i(e){return n.createElement(s.Ca,{type:s.gc.Strong},e)}function c(e,t){return n.createElement(s.Aa,{to:t,targetBlank:!0},e)}function u(e,t){return n.createElement(s.Aa,{onClick:t},e)}function l(){return Object(o.d)("<x:link>Forgot your username</x:link>?",{"x:link":function(e){return c(e,a.b)}},"ServerMessage")}function p(){return Object(o.d)("<x:link>Forgot your password</x:link>?",{"x:link":function(e){return c(e,a.b)}},"ServerMessage")}function d(){return Object(o.d)("Please <x:link>reset your password</x:link>.",{"x:link":function(e){return c(e,a.b)}},"ServerMessage")}function h(){return Object(o.d)("Please <x:link>contact support</x:link> for assistance.",{"x:link":function(e){return c(e,a.a)}},"ServerMessage")}function m(){return Object(o.d)("To learn more, please read <x:link>this article</x:link>.",{"x:link":function(e){return c(e,a.c)}},"ServerMessage")}function g(e){return Object(o.d)("Want to <x:click>create a new account</x:click>?",{"x:click":function(t){return u(t,e)}},"ServerMessage")}function f(e){return Object(o.d)("Want to <x:click>log in</x:click> instead?",{"x:click":function(t){return u(t,e)}},"ServerMessage")}function b(e){return Object(o.d)("If you need a Twitch account, you can <x:click>create one here</x:click>.",{"x:click":function(t){return u(t,e)}},"ServerMessage")}function v(e){return Object(o.d)("If you want to use an existing Twitch ID, you can <x:click>connect it here</x:click>.",{"x:click":function(t){return u(t,e)}},"ServerMessage")}function S(e){return e?Object(o.d)("That password was incorrect. Please try again. It looks like your caps lock was on.","ServerMessage"):Object(o.d)("That password was incorrect. Please try again.","ServerMessage")}},yR8l:function(e,t,r){"use strict";var n,o,a,s=r("mrSG"),i=r("oJmH");!function(e){e.Skip="skip",e.Include="include"}(n||(n={})),function(e){e.Field="Field",e.FragmentSpread="FragmentSpread"}(o||(o={})),function(e){e.Operation="OperationDefinition",e.Fragment="FragmentDefinition"}(a||(a={}));function c(e,t){var r=function e(t,r){if(t.kind===o.Field)return[t.alias?t.alias.value:t.name.value];if(t.kind===o.FragmentSpread){var n=t.name.value,s=r.definitions.find(function(e){return e.kind===a.Fragment&&e.name.value===n});if(!s)return;return s.selectionSet.selections.reduce(function(t,n){var o=e(n,r);if(o)return t.concat(o)},[])}}(e,t);if(!r||0===r.length)return{};var s={};if(e.directives)for(var i=0,c=e.directives;i<c.length;i++){var u=c[i],l=u.name.value;if((l===n.Include||l===n.Skip)&&u.arguments){var p=u.arguments[0];if("if"===p.name.value){var d=p.value.name.value;s[l]=d}}}for(var h={},m=0,g=r;m<g.length;m++){h[g[m]]=s}return h}function u(e,t){if(t&&t.options)return"function"==typeof t.options?t.options(e).fetchPolicy:t.options.fetchPolicy}function l(e,t,r){return 1===t.networkStatus&&function(e,t){return"cache-and-network"!==u(e,t)}(e,r)}function p(e,t){var r=t&&t.name||(function(e){return e.definitions.some(function(e){return e.kind===a.Operation&&"mutation"===e.operation})}(e)?"mutate":"data"),o=function(e){return e.definitions.reduce(function(t,r){if(r.kind!==a.Operation)return t;var n=r;if("query"!==n.operation)return t;for(var o=0,i=n.selectionSet.selections;o<i.length;o++){var u=c(i[o],e);u&&(t=s.__assign({},t,u))}return t},{})}(e),i={};return function(e,a){var c,p,d,h=e[r],m=((c={})[r]=h,c),g=function(r){if(t&&t.props){var n=s.__assign({},e,r);return t.props(n,a)}return r};if("object"!=typeof h)return g(m);if(l(e.ownProps,h,t)){for(var f=s.__assign({},h),b=0,v=Object.keys(o);b<v.length;b++){delete f[v[b]]}return g(((p={})[r]=f,p))}var S=function(e,t){for(var r={},n=0,o=Object.keys(e);n<o.length;n++){var a=o[n];t[a]&&(r[a]=e[a])}return r}(h,o);return function(e){for(var t=e.dataProps,r=e.error,o=e.loading,a=e.nextDataProps,s=e.queryFields,i=e.variables,c=!1,u=0,l=Object.keys(t);u<l.length;u++){var p=l[u];if(void 0!==t[p]&&void 0===a[p]&&!o&&!r){var d=s[p][n.Skip],h=s[p][n.Include];if(d&&void 0!==i[d]&&i[d])continue;if(h&&void 0!==i[h]&&!i[h])continue;c=!0}}return c}({dataProps:i,nextDataProps:S,loading:h.loading,error:!!h.error,variables:h.variables,queryFields:o})?("cache-only"!==u(e.ownProps,t)&&setTimeout(function(){return h.refetch(h.variables)}),(d={})[r]=s.__assign({},h,i),m=d):i=S,g(m)}}function d(e,t){var r=s.__assign({},t,{props:p(e,t)});return Object(i.graphql)(e,r)}r.d(t,"a",function(){return d})},yfE0:function(e,t,r){var n,o,a;o=[],void 0===(a="function"==typeof(n=function(){var e={configs:{allowPassphrases:!0,maxLength:128,minLength:10,minPhraseLength:20,minOptionalTestsToPass:4},config:function(e){for(var t in e)e.hasOwnProperty(t)&&this.configs.hasOwnProperty(t)&&(this.configs[t]=e[t])}};return e.tests={required:[function(t){if(t.length<e.configs.minLength)return"The password must be at least "+e.configs.minLength+" characters long."},function(t){if(t.length>e.configs.maxLength)return"The password must be fewer than "+e.configs.maxLength+" characters."},function(e){if(/(.)\1{2,}/.test(e))return"The password may not contain sequences of three or more repeated characters."}],optional:[function(e){if(!/[a-z]/.test(e))return"The password must contain at least one lowercase letter."},function(e){if(!/[A-Z]/.test(e))return"The password must contain at least one uppercase letter."},function(e){if(!/[0-9]/.test(e))return"The password must contain at least one number."},function(e){if(!/[^A-Za-z0-9]/.test(e))return"The password must contain at least one special character."}]},e.test=function(e){var t={errors:[],failedTests:[],passedTests:[],requiredTestErrors:[],optionalTestErrors:[],isPassphrase:!1,strong:!0,optionalTestsPassed:0},r=0;if(this.tests.required.forEach(function(n){var o=n(e);"string"==typeof o?(t.strong=!1,t.errors.push(o),t.requiredTestErrors.push(o),t.failedTests.push(r)):t.passedTests.push(r),r++}),!0===this.configs.allowPassphrases&&e.length>=this.configs.minPhraseLength&&(t.isPassphrase=!0),!t.isPassphrase){var n=this.tests.required.length;this.tests.optional.forEach(function(r){var o=r(e);"string"==typeof o?(t.errors.push(o),t.optionalTestErrors.push(o),t.failedTests.push(n)):(t.optionalTestsPassed++,t.passedTests.push(n)),n++})}return!t.isPassphrase&&t.optionalTestsPassed<this.configs.minOptionalTestsToPass&&(t.strong=!1),t},e})?n.apply(t,o):n)||(e.exports=a)},ykwd:function(e,t,r){}}]);