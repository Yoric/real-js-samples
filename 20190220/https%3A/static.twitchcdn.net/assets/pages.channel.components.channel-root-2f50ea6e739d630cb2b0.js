(window.webpackJsonp=window.webpackJsonp||[]).push([[37,39,145],{"+LJB":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("0Log"),r=n("/aPz"),a=n("0Lz3");function o(e,t,n,o){return{topic:n?Object(r.c)(n):"",type:i.PubsubMessageType.BitsLeaderboardEvent,mutator:function(e,t){if(!t||!n)return t;var i=e.top.map(function(e){return Object(a.b)(e,n.id)});if(t.user){if(t.user.tournament&&t.user.tournament.teamLeaderboard&&(t.user.tournament.teamLeaderboard.items.edges=i),t.user.tournament&&t.user.tournament.globalLeaderboard&&(t.user.tournament.globalLeaderboard.items.edges=i,o&&e.entry_context&&e.entry_context.entry.entry_key===o&&t.user.tournament.self&&t.user.tournament.self.globalLeaderboardItem)){var r=Object(a.b)(e.entry_context.entry,n.id);t.user.tournament.self.globalLeaderboardItem=r.node}if(t.user.cheer&&t.user.cheer.leaderboard&&(t.user.cheer.leaderboard.items.edges=i,o&&e.entry_context&&e.entry_context.entry.entry_key===o&&t.user.self&&t.user.self.bitsLeaderboardItem)){var s=Object(a.b)(e.entry_context.entry,n.id);t.user.self.bitsLeaderboardItem=s.node}}return t},skip:!n,query:e,variables:{channelID:t}}}},"+U0Y":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i="core.user-preferences.LANGUAGE_PREFERENCES_UPDATED";function r(e){return{type:i,languagePreferences:e}}},"+kC+":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatLine_SubsOnlyUpsell_UserSubscriptionProducts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:134}};n.loc.source={body:"query ChatLine_SubsOnlyUpsell_UserSubscriptionProducts($login: String!) {\nuser(login: $login) {\nid\nsubscriptionProducts {\nid\nurl\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"+pBb":function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"e",function(){return a}),n.d(t,"i",function(){return o}),n.d(t,"j",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"g",function(){return d}),n.d(t,"h",function(){return u}),n.d(t,"f",function(){return m}),n.d(t,"l",function(){return p}),n.d(t,"k",function(){return h}),n.d(t,"n",function(){return g}),n.d(t,"m",function(){return f}),n.d(t,"q",function(){return b}),n.d(t,"s",function(){return v}),n.d(t,"r",function(){return k}),n.d(t,"v",function(){return C}),n.d(t,"u",function(){return y}),n.d(t,"x",function(){return S}),n.d(t,"w",function(){return E}),n.d(t,"y",function(){return N}),n.d(t,"a",function(){return _}),n.d(t,"o",function(){return D}),n.d(t,"p",function(){return w}),n.d(t,"t",function(){return O}),n.d(t,"N",function(){return I}),n.d(t,"H",function(){return T}),n.d(t,"O",function(){return M}),n.d(t,"I",function(){return L}),n.d(t,"T",function(){return R}),n.d(t,"Q",function(){return x}),n.d(t,"L",function(){return F}),n.d(t,"F",function(){return A}),n.d(t,"M",function(){return j}),n.d(t,"G",function(){return U}),n.d(t,"K",function(){return B}),n.d(t,"E",function(){return P}),n.d(t,"P",function(){return V}),n.d(t,"J",function(){return H}),n.d(t,"B",function(){return G}),n.d(t,"A",function(){return W}),n.d(t,"D",function(){return q}),n.d(t,"R",function(){return z}),n.d(t,"C",function(){return Q}),n.d(t,"U",function(){return Y}),n.d(t,"z",function(){return K}),n.d(t,"S",function(){return $}),n.d(t,"W",function(){return X}),n.d(t,"V",function(){return J});var i=n("Tznh"),r="chat.CHAT_HIDDEN",a="chat.CHAT_SHOWN",o="chat.EMOTE_SETS_UPDATED",s="chat.FOLLOWER_MODE_DURATION_PREFERENCE_CHANGED",l="chat.AUTOMOD_ACTIONS_ENABLED",c="chat.AUTOMOD_ACTIONS_DISABLED",d="chat.EMOTE_PICKER_CLOSED",u="chat.EMOTE_PICKER_OPENED",m="chat.CLOSE_CHAT_RULES",p="chat.MODERATION_ACTIONS_ENABLED",h="chat.MODERATION_ACTIONS_DISABLED",g="chat.MOD_ICONS_ENABLED",f="chat.MOD_ICONS_DISABLED",b="chat.SHOW_CHAT_RULES",v="chat.TIMESTAMPS_ENABLED",k="chat.TIMESTAMPS_DISABLED",C="chat.USERNAME_CONTRAST_ENABLED",y="chat.USERNAME_CONTRAST_DISABLED",S="chat.VIEWER_CHAT_FILTER_ENABLED",E="chat.VIEWER_CHAT_FILTER_DISABLED",N="chat.VIEWER_CHAT_FILTER_SETTINGS_CHANGED",_="chat.ADD_COMMAND",D="chat.REMOVE_COMMAND",w="chat.RENDER_SENT_CHAT_MESSAGE",O="chat.UNHIDE_IGNORED_COMMAND";function I(){return{type:v}}function T(){return{type:k}}function M(){return{type:C}}function L(){return{type:y}}function R(){return{type:a}}function x(){return{type:r}}function F(){return{type:l}}function A(){return{type:c}}function j(){return{type:p}}function U(){return{type:h}}function B(){return{type:g}}function P(){return{type:f}}function V(e){return{type:S,source:e||i.c.Other}}function H(e){return{type:E,source:e||i.c.Other}}function G(e,t){return{type:N,settings:e,source:t||i.c.Other}}function W(e,t){return{type:s,channelLogin:e,duration:t}}function q(){return{type:d}}function z(){return{type:u}}function Q(){return{type:m}}function Y(){return{type:b}}function K(e,t,n){return{type:_,command:e.toLowerCase(),handler:t,channelLogin:n}}function $(e,t,n){return{type:D,command:e.toLowerCase(),handler:t,channelLogin:n}}function X(e){return{type:w,customEvent:e}}function J(e){return{type:O,userID:e}}},"/HY+":function(e,t,n){"use strict";var i=n("dAHa"),r=n("mrSG"),a=n("q1tI"),o=n("/MKj"),s=n("fvjX"),l=n("cZKs"),c=n("aCAx"),d=n("GnwI"),u=n("Ue10"),m=(n("Oy4H"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClose=function(e,n){t.props.closeModal(),t.props.onClose&&t.props.onClose(e,n)},t}return r.__extends(t,e),t.prototype.render=function(){return a.createElement(u.Ob,{className:"reporting-modal__container",background:u.u.Base,padding:{x:2,y:3}},a.createElement(i.b,{onClose:this.handleClose,reportContext:this.props.reportContext,title:this.props.title,defaultDescription:this.props.defaultDescription}),a.createElement(l.a,null))},t}(a.Component));var p=Object(s.compose)(Object(d.withLatencyTracking)("ReportUserModal"),Object(o.connect)(null,function(e){return Object(s.bindActionCreators)({closeModal:c.c},e)}))(m);n.d(t,!1,function(){}),n.d(t,!1,function(){return i.c}),n.d(t,!1,function(){return i.a}),n.d(t,!1,function(){}),n.d(t,!1,function(){return i.b}),n.d(t,!1,function(){return m}),n.d(t,"a",function(){return p})},"/gva":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CurrentUserBannedStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:135}};n.loc.source={body:"query CurrentUserBannedStatus($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\nself {\nbanStatus {\nisPermanent\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"/i69":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("oJmH"),o=n("/7QA"),s=n("gcd7"),l=n("QVaV"),c=n("iyGE"),d=n("a2UF"),u=n("vSeP"),m=n("WytW"),p=n("AREq"),h=n("Av0x"),g=n("Ue10"),f=600,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.banUser=function(e){var n=Object(m.k)("/ban "+e);if(n){var i=t.userLogin(n.banTarget),r=n.reason||void 0;if(i){var a=Object(o.d)("Unable to ban user.","BanCommandHandler");return{deferred:t.props.banUserMutation(i,void 0,r).then(function(e){var n=e.banUserFromChatRoom;return n?n.error?{notice:Object(p.a)({login:i,code:n.error.code})}:t.props.suppressLocalSuccessMessage?{}:{notice:Object(o.d)("{userLogin} is now banned from this channel.",{userLogin:i},"BanCommandHandler")}:{notice:a}}).catch(function(){return{notice:a}})}}return{deferred:Promise.resolve({notice:Object(o.d)("Please specify a user to ban.","BanCommandHandler")})}}return{deferred:Promise.resolve({notice:Object(o.d)("Usage: /ban [login] [reason]","BanCommandHandler")})}},t.unbanUser=function(e){if(e&&0!==e.length){var n=t.userLogin(e),i=Object(o.d)("Unable to unban user.","BanCommandHandler");return{deferred:t.props.unbanUserMutation(n).then(function(e){var r=e.unbanUserFromChatRoom;return r?r.error?{notice:Object(h.a)(n,r.error.code)}:t.props.suppressLocalSuccessMessage?{}:{notice:Object(o.d)("{bannedUserLogin} is no longer banned from this channel.",{bannedUserLogin:n},"BanCommandHandler")}:{notice:i}}).catch(function(){return{notice:i}})}}return{deferred:Promise.resolve({notice:Object(o.d)("Please specify a user to unban.","BanCommandHandler")})}},t.timeoutUser=function(e){var n=Object(m.o)("/timeout "+e);if(n){var i,r=t.userLogin(n.banTarget),a=n.reason||void 0,s=void 0;if(n.rawDuration&&n.durationSeconds?(i=n.durationSeconds,s=n.rawDuration===String(n.durationSeconds)?n.durationSeconds:n.rawDuration):n.rawDuration&&!n.validArguments?(s=n.rawDuration,i=f):(i=f,s=f),r){var l=Object(o.d)("Unable to timeout user.","BanCommandHandler");return{deferred:t.props.banUserMutation(r,s,a).then(function(e){var a=e.banUserFromChatRoom;if(!a)return{notice:l};if(a.error){var s=a.error.minTimeoutDurationSeconds,c=a.error.maxTimeoutDurationSeconds;return{notice:Object(p.a)({login:r,code:a.error.code,enteredDuration:n.rawDuration||void 0,isTimeout:!0,minTimeoutDuration:s||void 0,maxTimeoutDuration:c||void 0})}}return t.props.suppressLocalSuccessMessage?{}:{notice:Object(o.d)("{userLogin} has been timed out for {duration} seconds.",{userLogin:r,duration:i||f},"BanCommandHandler")}}).catch(function(){return{notice:l}})}}return{deferred:Promise.resolve({notice:Object(o.d)("Please specify a user to timeout.","BanCommandHandler")})}}return{deferred:Promise.resolve({notice:Object(o.d)("Usage: /timeout [login] [duration in seconds] [reason]","BanCommandHandler")})}},t.untimeoutUser=function(e){if(e){var n=t.userLogin(e),i=Object(o.d)("Unable to untimeout user.","BanCommandHandler");return{deferred:t.props.unbanUserMutation(n).then(function(e){var r=e.unbanUserFromChatRoom;return r?r.error?{notice:Object(h.a)(n,r.error.code,!0)}:t.props.suppressLocalSuccessMessage?{}:{notice:Object(o.d)("{login} is no longer timed out in this channel.",{login:n},"BanCommandHandler")}:{notice:i}}).catch(function(){return{notice:i}})}}return{deferred:Promise.resolve({notice:Object(o.d)("Please specify a user to untimeout.","BanCommandHandler")})}},t.userLogin=function(e){return Object(l.b)(e)?e:t.props.activeChattersAPI?t.props.activeChattersAPI.getActiveChatterLoginFromDisplayName(e)||e:t.props.displayNameToLogin&&t.props.displayNameToLogin(e)||e},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement(g.fb,{display:g.Da.Hide},r.createElement(s.a,{channelLogin:this.props.channelLogin,command:"ban",handler:this.banUser}),r.createElement(s.a,{channelLogin:this.props.channelLogin,command:"unban",handler:this.unbanUser}),r.createElement(s.a,{channelLogin:this.props.channelLogin,command:"timeout",handler:this.timeoutUser}),r.createElement(s.a,{channelLogin:this.props.channelLogin,command:"untimeout",handler:this.untimeoutUser}))},t}(r.Component),v=function(e){return{channelID:e.channelID}},k=Object(a.compose)(u.a,Object(d.a)(v),Object(c.a)(v))(b);n.d(t,"a",function(){return k})},"/nm5":function(e,t,n){},"003i":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("NAv5"),r=n("/7QA"),a=n("HGFl"),o="esport_s2_start_date",s="2230-08-24T16:00:00Z";function l(){return function(e){var t=r.b.get(e,s),n=Object(a.e)(t),o=Date.now();return Object(i.isEqual)(o,n)||Object(i.isAfter)(o,n)}(o)}},"04j6":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Core_Services_Spade_ChatEvent_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:116}};n.loc.source={body:"query Core_Services_Spade_ChatEvent_User($id: ID!) {\nuser(id: $id) {\nid\nisPartner\nstream {\nid\ngame {\nid\nname\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"08uX":function(e,t,n){"use strict";var i,r=n("mrSG"),a=n("q1tI"),o=n("fvjX"),s=n("x7UT"),l=n("0Log"),c=n("/aPz"),d=n("f00E"),u=n("5zXJ"),m=n("/7QA"),p=n("8SX2"),h=n("oK83"),g=n("Ue10");n("XUhy");!function(e){e.Container="notification-selector"}(i||(i={}));var f,b=function(e){var t=a.createElement(p.a,{contentID:"",login:e.data.userLogin,sourceType:h.b.mega_cheer_notification},e.data.displayName),n=Object(m.d)("{gifterButton} MegaCheered {bitsAmount} Bits and shared rewards to {giftedAmount} others in chat!",{gifterButton:t,bitsAmount:Object(m.f)(e.data.bitsAmount),giftedAmount:e.data.selectedCount},"MegaCheerNotificationCard");return a.createElement(g.Ob,{className:"mega-cheer-notification-card","data-test-selector":i.Container,background:g.u.Base,display:g.Da.Flex,alignItems:g.i.Center,flexDirection:g.Ga.Column},a.createElement(g.fb,{display:g.Da.Flex,flexDirection:g.Ga.Row,alignItems:g.i.Center,overflow:g.mb.Hidden},a.createElement(g.Xa,{className:"mega-cheer-notification__icon"},a.createElement("img",{src:e.iconURL})),a.createElement(g.Ca,{fontSize:g.Ia.Size7,color:g.R.Alt2,className:"mega-cheer-notification-card__text"},n)),a.createElement(g.wb,{animationDirection:g.xb.Down,size:g.yb.Small,animationDuration:e.progressDuration,onAnimationEnd:e.onProgressBarEnd}))},v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cards:[]},t.onCardClose=function(){t.popCard()},t}return r.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=[],n=e.pubsub.messages.megaNotificationEvent;if(n&&n!==this.props.pubsub.messages.megaNotificationEvent){var i=n.data;i.bitsAmount>=5e3?t.push(a.createElement(b,{data:i,iconURL:u.c+"/owl-2019/notifications/MegaCheer-04.png",progressDuration:10,onProgressBarEnd:this.onCardClose})):i.bitsAmount>=1e3&&t.push(a.createElement(b,{data:i,iconURL:u.c+"/owl-2019/notifications/MegaCheer-03.png",progressDuration:5,onProgressBarEnd:this.onCardClose})),t=t.map(function(e){return a.cloneElement(e,{key:Object(d.b)()})}),this.state.cards.length>=5&&this.popCard(),this.setState(function(e){return{cards:e.cards.concat(t)}})}},t}(n("Tvwe").a),k=Object(o.compose)(Object(s.a)([{topic:function(e){return Object(c.l)(e.channelID)},mapMessageTypesToProps:(f={},f[l.PubsubMessageType.CheerbombEvent]="megaNotificationEvent",f)}]))(v);n.d(t,"a",function(){return k})},"0EKw":function(e,t,n){"use strict";var i=n("q1tI"),r=n("SHn+"),a=n("kduP"),o=n("imSJ"),s=function(e){return i.createElement(r.a,{linkTo:{pathname:Object(a.c)(e.name),state:{content:"current_game",medium:"twitch_channel"}},label:Object(o.a)(),title:e.name,"data-a-target":"stream-game-link"})};n.d(t,"a",function(){return s})},"0FG4":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c});var i,r=n("RcPG"),a=n("a1OF");!function(e){e[e.Position=0]="Position",e[e.Token=1]="Token"}(i||(i={}));var o="0";function s(e,t,n){var o=n.type===i.Position?t:e,s=n.map[o];if(s){var l=function(e,t){return{images:{sources:{"1x":Object(a.d)(t,1),"2x":Object(a.d)(t,2),"4x":Object(a.d)(t,4)},themed:!1},alt:e,emoteID:t}}(e,s.id);return{type:r.a.Emote,content:l}}return null}var l={"\\:\\&gt\\;":[":>"],"\\&gt\\;\\(":[">("],"\\&lt\\;\\]":["<]"],"\\&lt\\;3":["<3"],":-?(?:7|L)":[":-7",":-L",":7",":L"],"[oO](_|\\.)[oO]":["o_o","O_O","o_O","O_o","o.o","O.O","o.O","O.o"],"\\;-?(p|P)":[";-p",";-P",";p",";P"],"\\;-?\\)":[";-)",";)"],"\\:-?(o|O)":[":-o",":-O",":o",":O"],"\\:-?(p|P)":[":-p",":-P",":p",":P"],"\\:-?(S|s)":[":-S",":-s",":s",":S"],"\\:-?[\\\\/]":[":-/",":-\\",":/",":\\"],"\\:-?[z|Z|\\|]":[":-|",":-Z",":-z",":|",":Z",":z"],"\\:-?\\(":[":-(",":("],"\\:-?\\)":[":-)",":)"],"\\:-?D":[":-D",":D"],"#-?[\\\\/]":["#-/","#-\\","#/","#\\"],"B-?\\)":["B-)","B)"],"R-?\\)":["R-)","R)"]};function c(e){for(var t={},n=0,i=e;n<i.length;n++){var r=i[n];if(r&&r.emotes)for(var a=0,s=r.emotes;a<s.length;a++){var c=s[a];if(c&&c.id&&c.token)for(var d=0,u=l[c.token]||[c.token];d<u.length;d++){var m=u[d];t[m]&&r.id===o||(t[m]={id:c.id,token:m})}}}return t}},"0Hf3":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return g}),n.d(t,"f",function(){return f});var i,r,a,o,s=n("mrSG"),l=n("/7QA"),c=n("DMoW"),d=n("2xye"),u=n("E/0f"),m=n("oK83");function p(e){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(n){return t={target_user_id:e.targetUserID,target_login:e.targetLogin,channel_id:e.channelID,channel_login:e.channelLogin,click_text:function(e){switch(e){case u.c.Messages:return i.Messages;case u.c.Timeouts:return i.Timeouts;case u.c.Bans:return i.Bans;case u.c.ModComments:return i.ModComments;default:return e}}(e.clickText),action:e.action},l.p.track(d.SpadeEventType.ChatProfileCardClick,t),[2]})})}function h(e){return s.__awaiter(this,void 0,void 0,function(){var t,n,i,r;return s.__generator(this,function(o){return t=e.data,n=t.channelUser,i=t.targetUser,r={target_user_id:i&&i.id||"",target_login:i&&i.login||e.targetLogin,channel_id:n&&n.id||e.channelID,channel_login:n&&n.login||e.channelLogin,profile_card_type:function(e){if(e.data.currentUser&&e.data.currentUser.id===e.data.channelUser.id)return a.Broadcaster;if(e.data.channelUser&&e.data.channelUser.self&&e.data.channelUser.self.isModerator)return e.data.channelUser.modLogsRoleAccess&&e.data.channelUser.modLogsRoleAccess.accessLevel!==c.Q.NONE?a.ModWithChatlogs:a.ModWithoutChatlogs;return a.RegularViewer}(e),ui_context:m.b[e.sourceType]},l.p.track(d.SpadeEventType.ChatProfileCardOpen,r),[2]})})}function g(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,i,r,a,c;return s.__generator(this,function(s){return n=e.data,i=n.channelUser,r=n.targetUser,a=e.isPopout,c={comment_uuid:t.id,ui_context:a?o.Popout:o.Card,target_user_id:r&&r.id,target_login:r&&r.login,channel_id:i&&i.id||e.channelID,channel_login:i&&i.login||e.channelLogin,from_user_id:t.author&&t.author.id,from_user_login:t.author&&t.author.login},l.p.track(d.SpadeEventType.ClientModCommentAdd,c),[2]})})}function f(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,i,r,a,c;return s.__generator(this,function(s){return n=e.data,i=n.channelUser,r=n.targetUser,a=e.isPopout,c={comment_uuid:t.id,ui_context:a?o.Popout:o.Card,target_user_id:r&&r.id,target_login:r&&r.login,channel_id:i&&i.id||e.channelID,channel_login:i&&i.login||e.channelLogin,from_user_id:t.author&&t.author.id,from_user_login:t.author&&t.author.login},l.p.track(d.SpadeEventType.ClientModCommentDelete,c),[2]})})}!function(e){e.Messages="messages",e.Timeouts="timeouts",e.Bans="bans",e.ModComments="mod_comments",e.PopOut="popout",e.Whisper="whisper"}(i||(i={})),function(e){e.Expand="expand",e.Collapse="collapse"}(r||(r={})),function(e){e.RegularViewer="regular_viewer",e.Broadcaster="broadcaster",e.ModWithChatlogs="mod_with_chatlogs",e.ModWithoutChatlogs="mod_without_chatlogs"}(a||(a={})),function(e){e.Card="chat_profile_card",e.Popout="chat_profile_card_popout"}(o||(o={}))},"0Rl0":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("q1tI"),r=n("Ue10"),a=function(){return i.createElement(r.J,null,i.createElement(r.r,{ratio:r.s.Aspect16x9},i.createElement(r.sb,null)),i.createElement(r.K,null,i.createElement(r.fb,{display:r.Da.Flex,margin:{bottom:1}},i.createElement(r.fb,{display:r.Da.InlineBlock,margin:{top:1,right:1}},i.createElement(r.sb,{width:40,height:56})),i.createElement(r.fb,{display:r.Da.InlineBlock,margin:{top:1}},i.createElement(r.Ca,null,i.createElement(r.sb,{width:150})),i.createElement(r.Ca,{fontSize:r.Ia.Size7},i.createElement(r.sb,{width:100}))))))}},"0WFu":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return s});var i=n("/7QA"),r=n("3Bft");function a(e){return[r.a.Prime,r.a.Custom].includes(e)?null:parseInt(e,10)/1e3}function o(e){var t=e instanceof Date?e:new Date(e);return Math.round((t.getTime()-Date.now())/864e5)}function s(e,t){var n=i.b.get(e,"off");return"on"===n||!("staff"!==n||!t)}},"0bws":function(e,t,n){"use strict";var i=n("/MKj"),r=n("mrSG"),a=n("1hWM"),o=function(e){function t(t){var n=e.call(this,t)||this;return n.updateContext({},t),n}return r.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.updateContext(this.props,e)},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){return null},t.prototype.updateContext=function(e,t){var n={};t.theme!==e.theme&&(n.theme=t.theme),t.game!==e.game&&(n.game=t.game),t.hostingInfo!==e.hostingInfo&&(n.hostingInfo=t.hostingInfo),Object.keys(n).length>0&&a.extensionService.postContext(n)},t}(n("q1tI").Component);function s(e){return{theme:e.ui.theme}}var l=Object(i.connect)(s)(o);n.d(t,!1,function(){return s}),n.d(t,"a",function(){return l})},"0hI/":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ReportUserModal_ReportUserData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"targetUser"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}},{kind:"Argument",name:{kind:"Name",value:"lookupType"},value:{kind:"EnumValue",value:"ALL"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:176}};n.loc.source={body:"query ReportUserModal_ReportUserData($targetUserID: ID!) {\ntargetUser: user(id: $targetUserID lookupType: ALL) {\nid\nlogin\ndisplayName\n}\ncurrentUser {\nid\nblockedUsers {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"0nav":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return m});var i,r,a,o=n("mrSG"),s=n("/7QA"),l=n("2xye");function c(e,t,n){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(r){return s.p.track(l.SpadeEventType.CampaignTabSwitch,{action:i.Click,module:"tab_selector",component_name:e,component_type:"tab",channel_id:t,user_id:n,device_id:s.q.session.deviceID}),[2]})})}function d(e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return s.p.track(l.SpadeEventType.MegaCheerChatNotificationImpression,{time:Date.now(),notification_type:e.notification_type,user_id:e.user_id,initiator_user_id:e.initiator_user_id,device_id:s.q.session.deviceID,platform:s.q.session.clientApp,channel:e.channel,channel_id:e.channel_id}),[2]})})}function u(e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return s.p.track(l.SpadeEventType.MegaCheerChatNotificationAction,{time:Date.now(),notification_type:e.notification_type,action:e.action,user_id:e.user_id,initiator_user_id:e.initiator_user_id,device_id:s.q.session.deviceID,platform:s.q.session.clientApp,channel:e.channel,channel_id:e.channel_id}),[2]})})}function m(e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return s.p.track(l.SpadeEventType.MegaCheerChatNotificationShare,{time:Date.now(),body:e.body,user_id:e.user_id,initiator_user_id:e.initiator_user_id,device_id:s.q.session.deviceID,platform:s.q.session.clientApp,channel:e.channel,channel_id:e.channel_id}),[2]})})}!function(e){e.Click="click",e.Hover="hover"}(i||(i={})),function(e){e.CheerAgain="cheer_again",e.Thank="thank",e.Share="share"}(r||(r={})),function(e){e.Click="click",e.Dismiss="dismiss"}(a||(a={}))},"16Gl":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"e",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return l});var i=n("kduP");function r(e,t){return Object(i.d)(e)+"/edit/"+t}function a(e,t){return Object(i.d)(e)+"/highlighter/"+t}function o(e,t){return Object(i.d)(e)+"/schedule/"+t}function s(e,t){return Object(i.d)(e)+"/publish/"+t}function l(e,t){return Object(i.d)(e)+"/appeal/"+t}},"1MDS":function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return h});var i=n("mrSG"),r=n("/7QA"),a=n("2xye"),o=n("oK83"),s=n("P5MF"),l=n("nR4f"),c=n("P6kH"),d={Unknown:"unknown",Chat:"chat",Room:"room",Whisper:"whisper",Vod:"vod"},u={Close:"close",ReportDropDown:"report_drop_down",Report:"report",Follow:"follow",Unfollow:"unfollow",Subscribe:"subscribe",ClickTryPrime:"click_try_prime",GoToChannel:"go_to_channel",Open:"open",ClickChannelName:"click_channel_name",CloseClickOtherEmote:"close_click_other_emote"},m={Available:"available",CreatorBanned:"creator_banned",LimitedTimeEmote:"limited_time_emote",GlobalEmote:"global_emote",Prime:"prime",Turbo:"turbo",OtherUnlockable:"other_unlockable"};function p(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,d,u,p,h,g,f,b,v,k,C,y,S,E;return i.__generator(this,function(i){switch(i.label){case 0:t={emoteID:e.emoticonID},n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.q.apollo.client.query({query:l,variables:t})];case 2:return n=i.sent(),[3,4];case 3:return o=i.sent(),r.k.warn(o,"Failed to make query for emote info in EmoteCard reporting.",{emoteID:e.emoticonID}),[3,4];case 4:d=n&&n.data&&n.data.emote||null,n&&!d&&r.k.warn("Query for emote info in EmoteCard reporting returned no data.",{emoteID:e.emoticonID}),u=n&&n.data?Object(c.d)(n.data):c.a.Unknown,p=d&&d.subscriptionProduct&&d.subscriptionProduct.owner&&d.subscriptionProduct.owner.displayName||"",h=d&&d.subscriptionProduct&&d.subscriptionProduct.owner&&d.subscriptionProduct.owner.id||"",u===c.a.OWL2019&&(p=c.b,h=c.c),g={channelID:h},f=null,i.label=5;case 5:return i.trys.push([5,7,,8]),[4,r.q.apollo.client.query({query:s,variables:g})];case 6:return f=i.sent(),[3,8];case 7:return b=i.sent(),r.k.warn(b,"Failed to make query for channel info in EmoteCard reporting.",{channelID:h}),[3,8];case 8:return v=f&&f.data&&f.data.user||null,f&&!v&&r.k.warn("Query for channel info in EmoteCard reporting returned no data.",{channelID:h}),k=!!v&&!!v.hasPrime,C=v&&v.self,y=!!C&&!!C.subscriptionBenefit,S=!!C&&!!C.canPrimeSubscribe,E={emote_location:e.emoteLocation,emoticon_id:e.emoticonID,chat_channel:e.chatChannel,chat_channel_id:e.chatChannelID,emote_channel:p,emote_channel_id:h,referrer_user_id:e.referrerUserID,action:e.action,is_subscribed:y,is_subscribed_tier:C&&C.subscriptionBenefit&&C.subscriptionBenefit.tier||"",emote_tier:d&&d.subscriptionProduct&&d.subscriptionProduct.tier||"",emote_status:function(e){switch(e){case c.a.Prime:return m.Prime;case c.a.Turbo:return m.Turbo;case c.a.OWL2019:case c.a.Subscription:return m.Available;case c.a.LimitedTime:return m.LimitedTimeEmote;case c.a.Unavailable:return m.CreatorBanned;case c.a.Global:return m.GlobalEmote;case c.a.Unknown:default:return m.OtherUnlockable}}(u),has_prime:k,can_subscribe:S,msg_id:e.msgID},r.p.track(a.SpadeEventType.EmoteCardInteraction,E),[2]}})})}function h(e){switch(e){case o.a.chat:return d.Chat;case o.a.whisper:return d.Whisper;case o.a.vod:return d.Vod;case o.a.room:return d.Room;case o.a.unknown:default:return d.Unknown}}},"1Rv/":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_UnbanUserFromChatRoom"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnbanUserFromChatRoomInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unbanUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ban"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bannedUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:170}};n.loc.source={body:"mutation Chat_UnbanUserFromChatRoom($input: UnbanUserFromChatRoomInput!) {\nunbanUserFromChatRoom(input: $input) {\nban {\nisPermanent\nbannedUser {\nid\n}\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"1VX3":function(e,t,n){"use strict";var i=n("W7Hf");n.d(t,"a",function(){return i.a})},"26nv":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_ChannelData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rules"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:155}};n.loc.source={body:"query Chat_ChannelData($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\nlogin\ndisplayName\nchatSettings {\nrules\n}\nself {\nisModerator\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"2C+f":function(e,t,n){},"2D+f":function(e,t,n){},"2Dht":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WhisperThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:347}};n.loc.source={body:"query WhisperThread($id: ID!) {\nwhisperThread(id: $id) {\nid\nuserLastMessageRead {\nid\nsentAt\n__typename\n}\nunreadMessagesCount\nmessages(first: 20) {\nedges {\ncursor\nnode {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n__typename\n}\n__typename\n}\nfrom {\nid\n}\nsentAt\neditedAt\ndeletedAt\n__typename\n}\n__typename\n}\n__typename\n}\n__typename\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"2EzP":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var i=n("XIZb"),r=Object(i.a)("MessageHandler"),a=(r.InnerProvider,r.withChatServiceProvider),o=(0,r.withContext)(function(e){return{messageHandlerAPI:e.serviceAPI,setMessageHandlerAPI:e.setServiceAPI}})},"2bi+":function(e,t,n){"use strict";n("DLhE");var i=n("fvjX"),r=n("/7QA"),a=n("mrSG"),o=n("V3Pk"),s=n("ZuiC"),l=function(e){return a.__assign({searchHits:[],videos:{}},e)};var c=n("sf7/"),d=n("DpwM"),u=n("g807"),m=n("RNNG"),p=n("Sfdh"),h=function(e){return a.__assign({comments:Object(u.c)(),currentVideoTime:0,cursor:{future:d.g,past:d.g},errorMessage:"",hasDismissedChatReplayError:!1,hasLoadedCurrentUserBlockedList:!1,hasLoadedData:!1,isPostCooldownActive:!1,isReplayFilterOn:!1,isScrollingSynced:!0,replyCursorMap:{},hideTimestamps:!1},e)},g=150;var f={apiToken:"",deviceId:""};var b={users:{}},v=function(e){return a.__assign({users:{}},e)};function k(e,t){var n=t.reduce(function(e,t){return e[t.id]=t,e},{});return a.__assign({},e,n)}var C=Object(i.combineReducers)({comments:function(e,t){var n;switch(void 0===e&&(e=h()),t.type){case s.l:var i=a.__assign({},t.comments[0],{highlight:!0,source:d.f});return a.__assign({},e,{comments:Object(u.d)(e.comments,[i]),isPostCooldownActive:!0});case s.m:return a.__assign({},e,{errorMessage:t.createError});case s.o:return a.__assign({},e,{errorMessage:t.errorMessage});case s.d:var r=t.comments[0].parentId,l=e.cursor,f=e.replyCursorMap,b=t.comments.slice();if(""===r)l=t.cursor;else if(f=a.__assign({},e.replyCursorMap,((n={})[r]=t.cursor.future,n)),t.cursor.future===d.g){var v=Object(u.b)(e.comments,r);if(v){var k=a.__assign({},v,{moreReplies:!1});b.push(k)}}var C=Object(u.d)(e.comments,b);return e.isScrollingSynced&&(C=Object(m.e)(C,g)),a.__assign({},e,{comments:C,cursor:l,hasLoadedData:!0,replyCursorMap:f});case s.e:return a.__assign({},e,{comments:Object(u.d)(Object(u.c)(),t.comments),hasLoadedData:!0,cursor:t.cursor,replyCursorMap:{}});case s.f:return a.__assign({},e,{hasLoadedData:!0});case o.c:return a.__assign({},e,{comments:Object(u.d)(Object(u.c)(),t.comments),cursor:t.cursor,hasLoadedData:!0,errorMessage:""});case o.b:return a.__assign({},h(),{hasLoadedData:!0,errorMessage:t.error});case c.b:return a.__assign({},e,{currentVideoTime:Math.floor(t.updatedTime)});case c.a:case s.c:return a.__assign({},h());case s.n:return a.__assign({},e,{comments:Object(m.d)(e.comments,t.comment)});case s.k:var y=e.errorMessage;return y===Object(p.a)().messageCreatedTooQuickError&&(y=""),a.__assign({},e,{isPostCooldownActive:!1,errorMessage:y});case s.h:return a.__assign({},e,{isScrollingSynced:!1});case s.i:return a.__assign({},e,{comments:Object(m.e)(e.comments,g),isScrollingSynced:!0});case o.a:return a.__assign({},e,{comments:Object(m.a)(e.comments,function(e){return e.commenter!==t.user})});case s.p:return a.__assign({},e,{comments:Object(u.d)(e.comments,t.comments)});case s.g:return a.__assign({},e,{isReplayFilterOn:t.isReplayFilterOn});case s.a:return a.__assign({},e,{hasDismissedChatReplayError:!0});case s.j:return a.__assign({},e,{hideTimestamps:t.hideTimestamps});case s.b:return a.__assign({},e,{isReplayFilterOn:t.isReplayFilterOn,hideTimestamps:t.hideTimestamps});default:return e}},config:function(e){return void 0===e&&(e=f),e},users:function(e,t){switch(void 0===e&&(e=b),t.type){case s.d:case s.e:case o.c:case s.l:return{users:k(e.users,t.users)};case s.c:return a.__assign({},v());default:return e}},moderation:function(e,t){switch(void 0===e&&(e=l()),t.type){case o.c:return a.__assign({},e,{videos:function(e,t){var n=t.reduce(function(e,t){return e[t.id]=t,e},{});return a.__assign({},e,n)}(e.videos,t.videos)});case o.d:return t.hits&&t.hits.results.length>0?a.__assign({},e,{searchHits:t.hits.results}):a.__assign({},e,{searchHits:[]});case s.c:return a.__assign({},l());default:return e}}});r.q.store.registerReducer("vodChat",C);n("WK0g"),n("ahza");var y=n("nxZp"),S=(function(){}(),n("pU2t"),n("l41m")),E=n("HjbF"),N=n("kVrx"),_=n("ZUUl"),D=n("82xK"),w=n("zClW"),O=(n("3Ps+"),n("GCGb")),I=n("Zkco"),T=n("KD05"),M=n("fCiU"),L=n("XXm5"),R=n("znm4"),x=(n("pwkZ"),n("4OCo")),F=n("GEnX");n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){return y.a}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,"A",function(){return S.d}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,"o",function(){return s.y}),n.d(t,"q",function(){return c.d}),n.d(t,"u",function(){return E.c}),n.d(t,"v",function(){return E.d}),n.d(t,"n",function(){return E.a}),n.d(t,"m",function(){return N.a}),n.d(t,"x",function(){return N.b}),n.d(t,"z",function(){return N.c}),n.d(t,"B",function(){return _.a}),n.d(t,"C",function(){return _.b}),n.d(t,"k",function(){return D.a}),n.d(t,"p",function(){return w.a}),n.d(t,"r",function(){return w.b}),n.d(t,"y",function(){return w.c}),n.d(t,"H",function(){return w.i}),n.d(t,"D",function(){return w.d}),n.d(t,"E",function(){return w.e}),n.d(t,"F",function(){return w.f}),n.d(t,"G",function(){return w.g}),n.d(t,!1,function(){}),n.d(t,"b",function(){return d.b}),n.d(t,"d",function(){return d.d}),n.d(t,"a",function(){return d.a}),n.d(t,"c",function(){return d.c}),n.d(t,!1,function(){}),n.d(t,"w",function(){return d.h}),n.d(t,"e",function(){return O.b}),n.d(t,!1,function(){}),n.d(t,"h",function(){return I.a}),n.d(t,"t",function(){return T.b}),n.d(t,"s",function(){return M.b}),n.d(t,"f",function(){return L.a}),n.d(t,"g",function(){return L.b}),n.d(t,"l",function(){return R.a}),n.d(t,!1,function(){}),n.d(t,"j",function(){return x.a}),n.d(t,"i",function(){return F.a})},"2e6W":function(e,t,n){},"34IA":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ViewerCardModLogsMessagesBySender"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"senderID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modLogs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"messagesBySender"},arguments:[{kind:"Argument",name:{kind:"Name",value:"senderID"},value:{kind:"Variable",name:{kind:"Name",value:"senderID"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}},{kind:"Argument",name:{kind:"Name",value:"order"},value:{kind:"EnumValue",value:"DESC"}},{kind:"Argument",name:{kind:"Name",value:"includeMessageCount"},value:{kind:"BooleanValue",value:!1}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"modLogsMessage"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"targetedModAction"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:561}};i.loc.source={body:'#import "twilight/features/chat/components/viewer-card/viewer-card-mod-logs/fragments/targeted-mod-action-fragment.gql"\n#import "twilight/features/chat/components/viewer-card/viewer-card-mod-logs/fragments/mod-logs-message-fragment.gql"\nquery ViewerCardModLogsMessagesBySender($senderID: ID! $channelLogin: String! $cursor: Cursor) {\nchannel: user(login: $channelLogin) {\nid\nmodLogs {\nmessagesBySender(senderID: $senderID first: 50 order: DESC includeMessageCount: false after: $cursor) {\nedges {\nnode {\n...modLogsMessage\n...targetedModAction\n}\ncursor\n}\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}i.definitions=i.definitions.concat(a(n("jCkG").definitions)),i.definitions=i.definitions.concat(a(n("MfJU").definitions)),e.exports=i},"35qb":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProductPriceInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PriceInfo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currency"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"exponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isTaxInclusive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tax"},arguments:[],directives:[]}]}}],loc:{start:0,end:118}};n.loc.source={body:"fragment subscriptionProductPriceInfo on PriceInfo {\ncurrency\nexponent\ntotal\ndescription\nprice\nisTaxInclusive\nid\ntax\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"3Bft":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={Prime:"prime",Tier1:"1000",Tier2:"2000",Tier3:"3000",Custom:"Custom"}},"3GF+":function(e,t,n){"use strict";var i=n("q1tI"),r=n("Ue10");n("jPLR");function a(e){e.stopPropagation()}var o=function(e){return i.createElement(r.Xa,{fullWidth:e.fullWidth,display:r.Da.InlineBlock,className:e.className},i.createElement("div",{className:"viewer-card-drag-cancel",onMouseDown:a},e.children))};n.d(t,"a",function(){return o})},"3HtZ":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Mods"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mods"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:107}};n.loc.source={body:"query Mods($login: String!) {\nuser(login: $login) {\nid\nmods(first: 100) {\nedges {\nnode {\nid\nlogin\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"3Ps+":function(e,t){},"3YIm":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendWhisper"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SendWhisperInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendWhisper"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receive"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:352}};n.loc.source={body:"mutation SendWhisper($input: SendWhisperInput!) {\nsendWhisper(input: $input) {\nmessage {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n__typename\n}\n__typename\n}\nfrom {\nid\n__typename\n}\nsentAt\neditedAt\ndeletedAt\nthread {\nid\nparticipants {\nid\nself {\nwhisperPermissions {\nreceive\n}\n}\n}\n}\n__typename\n}\nerror {\ncode\n__typename\n}\n__typename\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"3ag2":function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsLeaderboardEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsLeaderboardItemEdge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsLeaderboardEdgeNode"},directives:[]}]}}]}}],loc:{start:0,end:177}};i.loc.source={body:'#import "twilight/features/bits/models/bits-leaderboard-node-fragment.gql"\nfragment bitsLeaderboardEdge on BitsLeaderboardItemEdge {\ncursor\nnode {\n...bitsLeaderboardEdgeNode\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("xTLu").definitions)),e.exports=i},"4+Ji":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return c});var i=n("/7QA"),r="owl_season2_freetrial_end_date",a="twilight.multiview_owl_ftue_done",o="owl_channel_logins",s=new Date(Date.now()-31536e6).toString();function l(e){return i.b.get(o,[]).includes(e)}function c(){var e=i.b.get(r,s);return new Date(e)}},"41XU":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelBanner"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bannerImageURL"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"query ChannelBanner($login: String!) {\nuser(login: $login) {\nid\ndisplayName\nlogin\nbannerImageURL\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"4G6/":function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return b});var i=60,r=60*i,a=24*r,o=7*a,s=4*o+2*a,l=3,c=/([a-zA-Z])([0-9])/gi,d=/([0-9])([a-zA-Z])/gi,u=/^mo(nths?)?/,m=/^w(eeks?)?/,p=/^d(ays?)?/,h=/^h(ours?)?/,g=/^m(inutes?)?/;function f(e){if(!e)return"0s";var t=e,n="";if(t>s){var l=Math.floor(t/s);t-=l*s,n+=l+"mo"}if(t>o){var c=Math.floor(t/o);t-=c*o,n+=c+"w"}if(t>a){var d=Math.floor(t/a);t-=d*a,n+=d+"d"}if(t>r){var u=Math.floor(t/r);t-=u*r,n+=u+"h"}if(t>i){var m=Math.floor(t/i);t-=m*i,n+=m+"m"}return t>0&&(n+=t+"s"),n}function b(e){var t=0,n=e.replace(c,"$1 $2").replace(d,"$1 $2").split(/\W+/);if(n.length%2!=0)return null;for(var f=0;f<n.length;f+=2){var b=n[f],v=parseInt(b,10);if(Number.isNaN(v)||b.length>l)return null;var k=n[f+1];if(k.match(u))t+=v*s;else if(k.match(m))t+=v*o;else if(k.match(p))t+=v*a;else if(k.match(h))t+=v*r;else{if(!k.match(g))return null;t+=v*i}}return t}},"4HoE":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ModUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ModUserInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"modUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:119}};n.loc.source={body:"mutation ModUser($input: ModUserInput!){\nmodUser(input: $input) {\nchannel {\nid\n}\ntarget {\nid\nlogin\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"4IKE":function(e,t,n){},"4L7N":function(e,t,n){"use strict";var i=n("/MKj"),r=n("kRBY"),a=n("mrSG"),o=n("q1tI"),s=n("VwyG"),l=n("X7Ac"),c=n("yR8l"),d=n("MLDe"),u=n("v8tf"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.data.clip,n="";if(t&&t.videoQualities){var i=t.videoQualities[0];n=i.sourceURL}var r=this.props,a=r.broadcasterId,c=r.broadcasterLogin,u=r.forceShow;return o.createElement(s.a,{ownerLogin:this.props.broadcasterLogin,permittedRoles:{editor:!0,staff:!0}},function(i){var r=i.permitted;return n&&(r||u)?o.createElement(l.a,{type:l.b.Download,text:e.props.slug,url:n,onShareClick:t?Object(d.b)(t.id,t.game&&t.game.name,a,c,e.props.pageType):void 0}):null})},t}(o.Component),p=Object(c.a)(u)(m);var h=Object(i.connect)(function(e){var t=Object(r.e)(e);return{userLogin:t?t.login:""}})(p);n.d(t,"a",function(){return h})},"4OCo":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("mmRu"),s=n("cpJf"),l=n("Sfdh"),c=n("Tqc9"),d=n("Ue10"),u=(n("sbEw"),function(e){function t(t){var n=e.call(this,t)||this;return n.submitReply=function(){if(""!==n.state.newReplyText){if(n.props.isCreationCoolDownActive)return n.setState({showCoolDownState:!0}),void(n.props.onError&&n.props.onError(Object(l.a)().messageCreatedTooQuickError));n.props.onReplySubmit(n.state.newReplyText),n.setState({newReplyText:""})}},n.onChange=function(e){e.preventDefault(),n.setState({newReplyText:e.currentTarget.value})},n.onEmoticonClick=function(e){n.setState({newReplyText:n.state.newReplyText+" "+e})},n.onKeyDown=function(e){e.key===c.b&&(e.preventDefault(),n.submitReply()),n.props.onReplyFormClose&&e.key===c.c&&(e.preventDefault(),n.props.onReplyFormClose())},n.setTextareaRef=function(e){return n.textArea=e},n.state={newReplyText:t.replyToUserDisplayName?"@"+t.replyToUserDisplayName+" ":"",showCoolDownState:!1},n}return i.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.isCreationCoolDownActive||this.setState({showCoolDownState:!1}),e.replyToUserDisplayName&&e.replyToUserDisplayName!==this.props.replyToUserDisplayName&&this.setState({newReplyText:"@"+e.replyToUserDisplayName+" "})},t.prototype.render=function(){return r.createElement(d.fb,{className:this.props.classNames,position:d.tb.Relative},r.createElement(d.dc,{error:this.state.showCoolDownState,maxLength:512,noResize:!0,onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:Object(a.d)("Reply","ReplyForm"),refDelegate:this.setTextareaRef,value:this.state.newReplyText}),r.createElement(o.a,{attachRight:!0,attachTop:!0,channelOwnerID:this.props.videoOwnerID,emotePickerSource:s.a.VodChat,inputRef:this.textArea,onClickEmote:this.onEmoticonClick,position:d.tb.Absolute}))},t}(r.Component))},"4hz/":function(e,t,n){"use strict";var i=n("q1tI"),r=n("Ue10"),a=function(){return i.createElement(r.Ob,{margin:{y:1},background:r.u.Base,elevation:1},i.createElement(r.J,{row:!0},i.createElement(r.fb,{flexShrink:0,position:r.tb.Relative},i.createElement(r.fb,{padding:1,position:r.tb.Absolute},i.createElement(r.sb,{height:57,width:47})),i.createElement(r.sb,{height:180,width:320})),i.createElement(r.K,null,i.createElement(r.fb,{margin:{x:2}},i.createElement(r.Xa,{margin:{bottom:1}},i.createElement(r.Ca,{type:r.gc.H4},i.createElement(r.sb,{lineCount:1}))),i.createElement(r.Ca,{color:r.R.Alt2},i.createElement(r.sb,{lineCount:1})),i.createElement(r.Ca,{color:r.R.Alt2},i.createElement(r.sb,{lineCount:1})),i.createElement(r.fb,{display:r.Da.Flex,margin:{top:2}},i.createElement(r.fb,{margin:{right:1}},i.createElement(r.sb,{height:28,width:73})),i.createElement(r.fb,{margin:{right:1}},i.createElement(r.sb,{height:28,width:83})),i.createElement(r.sb,{height:28,width:28}))))))};n.d(t,"a",function(){return o});var o=function(){for(var e=[],t=0;t<10;t++)e.push(i.createElement(a,{key:t}));return i.createElement(i.Fragment,null,e)}},"4w0E":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_BanUserFromChatRoom"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BanUserFromChatRoomInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ban"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bannedUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"minTimeoutDurationSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"maxTimeoutDurationSeconds"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:216}};n.loc.source={body:"mutation Chat_BanUserFromChatRoom($input: BanUserFromChatRoomInput!) {\nbanUserFromChatRoom(input: $input) {\nban {\nisPermanent\nbannedUser {\nid\n}\n}\nerror {\ncode\nminTimeoutDurationSeconds\nmaxTimeoutDurationSeconds\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"4zGI":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_DenyRejectedCheerMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DenyRejectedCheerInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"denyRejectedCheer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:115}};n.loc.source={body:"mutation Chat_DenyRejectedCheerMessage($input: DenyRejectedCheerInput!) {\ndenyRejectedCheer(input: $input) {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"52dQ":function(e,t,n){},"5Ijs":function(e,t,n){"use strict";var i,r=n("mrSG"),a=n("oJmH"),o=n("/7QA"),s=n("q1tI"),l=n("eJ65"),c=n("EuPq"),d=n("KYAw"),u=n("Ue10"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=Object(d.a)(this.props.collection.id);return s.createElement("div",null,s.createElement(u.Ca,null,Object(o.d)("Collection Link","VideoShareBox")),s.createElement(c.a,{onClick:function(){e.props.onClick(t)},value:t}))},t}(s.Component),p=n("BQs+"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(e){var n={location:t.props.tracking.location,platform:p.a.Link,shareURL:e};Object(p.b)(t.props.collection,n,o.q.apollo.client)},t}return r.__extends(t,e),t.prototype.render=function(){return s.createElement(m,r.__assign({},this.props,{onClick:this.onClickHandler}))},t}(s.Component),g=n("EdhP"),f=n("2xye"),b=n("Addw");function v(e){switch(e.type){case i.Collection:return e.currentVideo||null;case i.Video:return e;default:return e}}!function(e){e[e.Collection=0]="Collection",e[e.Video=1]="Video"}(i||(i={}));var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.content,n=this.getEmbedPlayerContentURL(t);return s.createElement("div",null,s.createElement(u.Ca,null,Object(o.d)("Embed Video","VideoShareBox")),s.createElement(c.a,{onClick:function(){e.props.onClick(n)},value:this.getEmbedPlayerCode(t)}))},t.prototype.getEmbedPlayerCode=function(e){var t=function(e,t){var n={autoplay:!1};switch(e.type){case i.Collection:e.currentVideo?(n.video=e.currentVideo.id,n.t=t?Object(b.a)(t):void 0):n.collection=e.id;break;case i.Video:n.video=e.id,n.t=t?Object(b.a)(t):void 0}return n}(e,null!==this.props.selectedVideoStartTime?this.props.selectedVideoStartTime:void 0),n=e.owner.displayName,r=e.title,a=Object(o.d)("Watch {title} from {displayName} on www.twitch.tv",{displayName:n,title:r},"VideoShareBox");return Object(g.b)(t,{textLink:{url:this.getEmbedPlayerContentURL(e),text:a},allowScrolling:!1,allowFullscreen:!0})},t.prototype.getEmbedPlayerContentURL=function(e){switch(e.type){case i.Collection:return e.currentVideo?Object(d.b)(e.currentVideo.id,{tt_medium:f.PageviewMedium.VideoEmbed,tt_content:f.PageviewContent.TextLink,t:this.props.selectedVideoStartTime}):Object(d.a)(e.id,{tt_medium:f.PageviewMedium.VideoEmbed,tt_content:f.PageviewContent.TextLink});case i.Video:return Object(d.b)(e.id,{tt_medium:f.PageviewMedium.VideoEmbed,tt_content:f.PageviewContent.TextLink,t:this.props.selectedVideoStartTime});default:return e}},t}(s.Component),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(e){var n=t.props.content;switch(n.type){case i.Collection:n.currentVideo?t.trackVideoShare(e,n.currentVideo):t.trackCollectionShare(e,n);break;case i.Video:t.trackVideoShare(e,n);break;default:return n}},t}return r.__extends(t,e),t.prototype.render=function(){return s.createElement(k,r.__assign({},this.props,{onClick:this.onClickHandler}))},t.prototype.trackCollectionShare=function(e,t){var n={location:this.props.tracking.location,platform:p.a.Embed,shareURL:e};Object(p.b)(t,n,o.q.apollo.client)},t.prototype.trackVideoShare=function(e,t){var n={location:this.props.tracking.location,platform:p.a.Embed,shareURL:e};Object(p.c)(t,n,o.q.apollo.client)},t}(s.Component),y=n("X7Ac"),S=[{type:y.b.Twitter,selector:"twitter-button"},{type:y.b.Facebook,selector:"fb-button"},{type:y.b.VKontakte,selector:"vk-button"},{type:y.b.Reddit,selector:"reddit-button"},{type:y.b.Copy,selector:"copy-link-button"}],E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.content,n=this.getContentURL(t),i=this.getSocialShareContextTitle(t),r=S.map(function(t){return s.createElement(y.a,{"data-test-selector":t.selector,key:t.type,onShareClick:function(t){e.props.onClick(n,t)},text:i,type:t.type,url:n})});return s.createElement(u.fb,{display:u.Da.Flex,justifyContent:u.eb.Between},r)},t.prototype.getSocialShareContextTitle=function(e){return Object(o.d)("Check out {title} from {displayName} on www.twitch.tv",{displayName:e.owner.displayName,title:e.title},"VideoShareBox")},t.prototype.getContentURL=function(e){switch(e.type){case i.Collection:return e.currentVideo?Object(d.b)(e.currentVideo.id,{collection:e.id,t:this.props.selectedVideoStartTime}):Object(d.a)(e.id);case i.Video:return Object(d.b)(e.id,{t:this.props.selectedVideoStartTime});default:return e}},t}(s.Component),N=function(e){switch(e){case y.b.Twitter:return p.a.Twitter;case y.b.Reddit:return p.a.Reddit;case y.b.VKontakte:return p.a.VKontakte;case y.b.Facebook:return p.a.Facebook;case y.b.Copy:return p.a.Copy;case y.b.CopyInput:return p.a.Link;case y.b.Download:return p.a.Download;default:return e}},_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(e,n){var r=t.props.content;switch(r.type){case i.Collection:r.currentVideo?t.trackVideoShare(e,r.currentVideo,n,r.id):t.trackCollectionShare(e,r,n);break;case i.Video:t.trackVideoShare(e,r,n);break;default:return r}},t}return r.__extends(t,e),t.prototype.render=function(){return s.createElement(E,r.__assign({},this.props,{onClick:this.onClickHandler}))},t.prototype.trackCollectionShare=function(e,t,n){var i={location:this.props.tracking.location,platform:N(n),shareURL:e};Object(p.b)(t,i,o.q.apollo.client)},t.prototype.trackVideoShare=function(e,t,n,i){var r={collectionID:i,location:this.props.tracking.location,platform:N(n),shareURL:e};Object(p.c)(t,r,o.q.apollo.client)},t}(s.Component),D=n("hyVY"),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onShareTimestampClick=function(e){void 0!==t.props.currentVideoTime&&t.props.onVideoStartTimeChange(e.currentTarget.checked?t.props.currentVideoTime:void 0)},t}return r.__extends(t,e),t.prototype.render=function(){var e=this,t={};this.props.collectionID&&(t.collection=this.props.collectionID),this.props.selectedVideoStartTime&&(t.t=this.props.selectedVideoStartTime);var n=Object(d.b)(this.props.video.id,t);return s.createElement("div",null,s.createElement(u.Ca,null,Object(o.d)("Video Link","VideoShareBox")),s.createElement(c.a,{onClick:function(){e.props.onInputClick(n)},value:n}),this.renderCurrentVideoOffsetLinkOption())},t.prototype.renderCurrentVideoOffsetLinkOption=function(){if(void 0===this.props.currentVideoTime)return null;var e=this.props.selectedVideoStartTime||this.props.currentVideoTime,t=Object(D.b)(e);return s.createElement(u.fb,{padding:{top:.5}},s.createElement(u.Q,{id:"video-share-timestamp-toggle",label:Object(o.d)("Skip to {deeplinkTimestamp}",{deeplinkTimestamp:t},"VideoShareBox"),"data-a-target":"video-share-timestamp-toggle","data-a-value":void 0!==this.props.selectedVideoStartTime,checked:!!this.props.selectedVideoStartTime,onChange:this.onShareTimestampClick}))},t}(s.Component),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(e,n){var i={collectionID:n,location:t.props.tracking.location,platform:p.a.Link,shareURL:e};Object(p.c)(t.props.video,i,o.q.apollo.client)},t}return r.__extends(t,e),t.prototype.render=function(){return s.createElement(w,r.__assign({},this.props,{onInputClick:this.onClickHandler}))},t}(s.Component),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.toggleTimer=function(e){t.props.getCurrentVideoTime&&!e&&(t.updateCurrentTime(),t.getTimeTimer=setInterval(t.updateCurrentTime,1e3))},t.updateCurrentTime=function(){if(t.props.getCurrentVideoTime){var e=t.props.getCurrentVideoTime();t.setState({currentTime:e})}},t.onVideoStartTimeChangeHandler=function(e){t.setState({selectedVideoStartTime:e})},t}return r.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.currentVideoTime===this.state.currentTime||e.getCurrentVideoTime||this.setState({currentTime:e.currentVideoTime})},t.prototype.componentWillUnmount=function(){this.getTimeTimer&&clearTimeout(this.getTimeTimer)},t.prototype.render=function(){var e=null;return this.props.content&&(e=this.shareBalloonContent(this.props.content)),s.createElement(l.a,{onToggle:this.toggleTimer},s.createElement(u.C,{disabled:!this.props.content,icon:u.Db.Share,type:this.props.buttonType},Object(o.d)("Share","VideoShareBox")),s.createElement(u.x,{direction:this.props.balloonDirection,size:u.z.Small},e))},t.prototype.shareBalloonContent=function(e){return s.createElement(u.fb,{padding:1},s.createElement(_,{content:e,selectedVideoStartTime:this.state.selectedVideoStartTime,tracking:this.props.tracking}),this.renderCollectionShareInput(e),this.renderVideoShareInput(e),this.renderEmbedPlayerInput(e))},t.prototype.renderCollectionShareInput=function(e){return e.type!==i.Collection?null:s.createElement(u.fb,{padding:{top:1}},s.createElement(h,{collection:e,tracking:this.props.tracking}))},t.prototype.renderVideoShareInput=function(e){var t,n;if(e.type===i.Collection){if(!e.currentVideo)return null;n=e.id,t=e.currentVideo}else t=e;return s.createElement(u.fb,{padding:{top:1}},s.createElement(O,{collectionID:n,currentVideoTime:this.state.currentTime,onVideoStartTimeChange:this.onVideoStartTimeChangeHandler,selectedVideoStartTime:this.state.selectedVideoStartTime,tracking:this.props.tracking,video:t}))},t.prototype.renderEmbedPlayerInput=function(e){return s.createElement(u.fb,{padding:{top:1}},s.createElement(C,{content:e,selectedVideoStartTime:this.state.selectedVideoStartTime,tracking:this.props.tracking}))},t}(s.Component),T=n("gFHd");function M(e){return e.owner&&e.title?{type:i.Video,id:e.id,owner:{id:e.owner.id,displayName:e.owner.displayName},title:e.title}:null}var L=Object(a.compose)(Object(a.graphql)(T,{options:function(e){var t=e.content;return t?{variables:{collectionID:t.collectionID||"",hasCollection:!!t.collectionID,hasVideo:!!t.videoID,videoID:t.videoID||""}}:{variables:{collectionID:"",hasCollection:!1,hasVideo:!1,videoID:""}}},props:function(e){var t=r.__assign({},e,{content:void 0}),n=e.data;return n.loading?t:n.error?(o.k.error(n.error,"VideoShareBoxContainer"),t):(n.collection?t.content=function(e,t){var n;if(t){var r=M(t);if(!r)return null;n=r}return e.owner&&e.title?{type:i.Collection,id:e.id,owner:{id:e.owner.id,displayName:e.owner.displayName},title:e.title,currentVideo:n}:null}(n.collection,n.video)||void 0:n.video&&(t.content=M(n.video)||void 0),t)}}))(I);n.d(t,"a",function(){return L}),n.d(t,!1,function(){return i}),n.d(t,!1,function(){return v})},"5Siz":function(e,t,n){"use strict";var i;n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),function(e){e.PopoutChat="popout_chat",e.Chat="chat",e.LiveDashButton="live_dashboard_button",e.LiveDashHotkey="live_dashboard_hotkey",e.LiveDashChat="live_dashboard_chat"}(i||(i={}));var r=140},"5a1p":function(e,t,n){},"5goO":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("SHn+"),s=n("Ue10"),l=function(e){return r.createElement(o.a,i.__assign({linkTo:"/team/"+e.name,title:e.displayName,label:Object(a.d)("Team:","TeamLinkLabel")},Object(s.yc)(e)))};n.d(t,"a",function(){return l})},"5in9":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_ChannelInfoBar"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primaryTeam"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"profileViewCount"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:133}};n.loc.source={body:"query ChannelRoot_ChannelInfoBar($login: String!) {\nuser(login: $login) {\nid\nprimaryTeam {\nid\ndisplayName\nname\n}\nprofileViewCount\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"5xw2":function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d});var i=n("mrSG"),r=n("/7QA"),a=n("HSqT"),o=n("+U0Y"),s="languageDirectoryFilters";function l(e,t){var n=this;return function(a){return i.__awaiter(n,void 0,void 0,function(){var n,l;return i.__generator(this,function(i){return n=new Set(d()),t?n.add(e):n.delete(e),l=Array.from(n),r.n.set(s,l),a(Object(o.b)(l)),[2]})})}}function c(){var e=this;return function(t){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){return r.n.set(s,[]),t(Object(o.b)([])),[2]})})}}function d(){return r.n.get(s,[]).filter(function(e){return a.a.has(e)})}},"5zf8":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return l});var i,r,a=n("/7QA");function o(e,t){switch(e){case i.Second:return Object(a.d)("{secondCount, plural, one {# second} other {# seconds}}",{secondCount:t},"formatDuration");case i.Minute:return Object(a.d)("{minuteCount, plural, one {# minute} other {# minutes}}",{minuteCount:t},"formatDuration");case i.Hour:return Object(a.d)("{hourCount, plural, one {# hour} other {# hours}}",{hourCount:t},"formatDuration");case i.Day:return Object(a.d)("{dayCount, plural, one {# day} other {# days}}",{dayCount:t},"formatDuration");case i.Week:return Object(a.d)("{weekCount, plural, one {# week} other {# weeks}}",{weekCount:t},"formatDuration");case i.Month:return Object(a.d)("{monthCount, plural, one {# month} other {# months}}",{monthCount:t},"formatDuration");default:return""}}function s(e,t){switch(e){case i.Second:return Object(a.d)("{secondCount}s",{secondCount:t},"formatDuration");case i.Minute:return Object(a.d)("{minuteCount}m",{minuteCount:t},"formatDuration");case i.Hour:return Object(a.d)("{hourCount}h",{hourCount:t},"formatDuration");case i.Day:return Object(a.d)("{dayCount}d",{dayCount:t},"formatDuration");case i.Week:return Object(a.d)("{weekCount}w",{weekCount:t},"formatDuration");case i.Month:return Object(a.d)("{monthCount}mo",{monthCount:t},"formatDuration");default:return""}}function l(e,t){var n;switch(void 0===t&&(t=r.Humanized),t===r.ClockAuto&&(t=e>=3600?r.ClockHMS:r.ClockMS),t){case r.ClockHM:case r.ClockHMS:n=i.Hour;break;case r.ClockMS:n=i.Minute}var l=2;t===r.ClockHMS&&(l=3);var d=function(e,t){void 0===t&&(t=i.Month);var n={};return n.seconds=e,e<60||t===i.Second?n:(n.minutes=Math.floor(e/60),n.seconds=e%60,n.minutes<60||t===i.Minute?n:(n.hours=Math.floor(n.minutes/60),n.minutes=n.minutes%60,n.hours<24||t===i.Hour?n:(n.days=Math.floor(n.hours/24),n.hours=n.hours%24,n.days<7||t===i.Day?n:n.days<=26||t===i.Week?(n.weeks=Math.floor(n.days/7),n.days=n.days%7,n):(n.months=Math.round((n.days+3)/30),n))))}(e,n),u=Object.keys(d);if(u.forEach(function(e,n){t!==r.Humanized&&t!==r.HumanizedShort||d[e]||delete d[e],n<u.length-l&&delete d[e]}),t===r.Humanized)return function(e){return e.months?o(i.Month,e.months):e.weeks&&e.days?o(i.Week,e.weeks)+" "+o(i.Day,e.days):e.weeks?o(i.Week,e.weeks):e.days&&e.hours?o(i.Day,e.days)+" "+o(i.Hour,e.hours):e.days?o(i.Day,e.days):e.hours&&e.minutes?o(i.Hour,e.hours)+" "+o(i.Minute,e.minutes):e.hours?o(i.Hour,e.hours):e.minutes&&e.seconds?o(i.Minute,e.minutes)+" "+o(i.Second,e.seconds):e.minutes?o(i.Minute,e.minutes):o(i.Second,e.seconds||0)}(d);if(t===r.HumanizedShort)return function(e){return e.months?s(i.Month,e.months):e.weeks&&e.days?""+s(i.Week,e.weeks)+s(i.Day,e.days):e.weeks?s(i.Week,e.weeks):e.days&&e.hours?""+s(i.Day,e.days)+s(i.Hour,e.hours):e.days?s(i.Day,e.days):e.hours&&e.minutes?""+s(i.Hour,e.hours)+s(i.Minute,e.minutes):e.hours?s(i.Hour,e.hours):e.minutes&&e.seconds?""+s(i.Minute,e.minutes)+s(i.Second,e.seconds):e.minutes?s(i.Minute,e.minutes):s(i.Second,e.seconds||0)}(d);var m=":",p=!1;switch(a.q.intl.getLanguageCode()){case"cy":case"da":case"fi":case"id":case"nb":case"si":m=".";break;case"af":case"fr":case"lt":p=!0}var h=d.seconds||0,g=d.minutes||0,f=d.hours||0;switch(t){case r.ClockHM:case r.ClockHMS:var b=(p?c(f,2):f)+m+c(g,2);return t===r.ClockHMS&&(b+=m+c(h,2)),b;case r.ClockMS:return(p?c(g,2):g)+m+c(h,2)}}function c(e,t){var n=e.toString();return n.length<t?"0".repeat(t-n.length)+n:n}!function(e){e[e.Second=0]="Second",e[e.Minute=1]="Minute",e[e.Hour=2]="Hour",e[e.Day=3]="Day",e[e.Week=4]="Week",e[e.Month=5]="Month"}(i||(i={})),function(e){e[e.Humanized=0]="Humanized",e[e.HumanizedShort=1]="HumanizedShort",e[e.ClockAuto=2]="ClockAuto",e[e.ClockHM=3]="ClockHM",e[e.ClockMS=4]="ClockMS",e[e.ClockHMS=5]="ClockHMS"}(r||(r={}))},"60o1":function(e,t,n){"use strict";function i(e,t){var n=e,i=!1;return n?function(e){return e.split("").map(function(e){return e.charCodeAt(0)>127}).reduce(function(e,t){return e||t})}(n)&&(i=!0):n=t,{userDisplayName:n,isIntl:i}}n.d(t,"a",function(){return i})},"68Fl":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("wUQP"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){return Object(a.a)(this.props.name)?this.props.children:null},t}(r.Component);n.d(t,"a",function(){return o})},"6MRn":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsPinnedCheerV2_LeaderboardEntry"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"profileImageWidth"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"userID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"Variable",name:{kind:"Name",value:"profileImageWidth"}}}],directives:[]}]}}]}}],loc:{start:0,end:168}};n.loc.source={body:"query BitsPinnedCheerV2_LeaderboardEntry($userID: ID! $profileImageWidth: Int!) {\nuser(id: $userID) {\nid\ndisplayName\nlogin\nprofileImageURL(width:$profileImageWidth)\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"6ZXE":function(e,t,n){},"6j5V":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("RcPG");function r(e){return{type:i.a.Text,content:e}}},"7JxC":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("q1tI"),r=n("Ue10"),a=function(){for(var e=[],t=0;t<9;t++){var n=i.createElement(r.fb,{padding:{bottom:2},key:t},i.createElement(r.sb,{height:320,width:320}));e.push(n)}return i.createElement(r.mc,{center:!0,noGrow:!0,childWidth:r.nc.Large,gutterSize:r.oc.Small,placeholderItems:9},e)}},"7NxT":function(e,t,n){"use strict";n("DLhE")},"7SjK":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("TSYQ"),o=n("/7QA"),s=n("GnwI"),l=n("Ue10"),c=(n("GOKC"),r.createElement(l.Ob,{alignItems:l.i.Center,background:l.u.Overlay,borderRadius:l.A.Small,className:"emote-button__lock",color:l.R.Overlay,"data-test-selector":"emote-button-lock",display:l.Da.InlineFlex,justifyContent:l.eb.Center,position:l.tb.Absolute,zIndex:l.xc.Above},r.createElement(l.Cb,{asset:l.Db.Lock,height:10,width:10}))),d=function(e){var t=a("emote-button__link",{"emote-button__link--locked":!e.onClick}),n=e.emote,i=n.displayName,d=n.srcSet;if(!d)return null;var u=r.createElement("img",{className:"emote-picker__image",srcSet:d,alt:i});if(e.isCriticalImage){for(var m=d.split(" ")[0],p={},h=0,g=d.split(",");h<g.length;h++){var f=g[h].trim().split(" "),b=f[1],v=f[0];p[b]=v}u=r.createElement(s.CriticalImage,{className:"emote-picker__emote-image",src:m,srcSet:p,alt:i||""})}return r.createElement("div",{className:"emote-button"},r.createElement(l.jc,{label:i||Object(o.d)("Emote","EmoteButton"),direction:l.lc.Bottom},r.createElement(l.Xa,{display:l.Da.Flex,alignItems:l.i.Center,justifyContent:l.eb.Center},r.createElement("button",{"data-test-selector":"emote-button-clickable",className:t,"aria-label":i,name:i,onClick:e.onClick?e.onClick.bind(null,e.emote):void 0,"data-a-target":i},r.createElement("figure",null,e.locked?c:null,u)))))},u=(n("VrOd"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClickEmote=function(e){t.props.onClickEmote&&t.props.onClickEmote(e,t.props.context)},t}return i.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.emotes.map(function(t,n){return r.createElement(l.fb,{key:"emote-button-padder-"+t.id+"--"+t.setID,padding:{left:e.props.spaced?.5:0}},r.createElement(d,{key:"emote-button-"+t.id+"--"+t.setID,emote:t,isCriticalImage:0===n,locked:e.props.locked||t.isLocked,onClick:e.props.locked?void 0:e.handleClickEmote}))});return r.createElement(l.fb,{display:l.Da.Flex,flexWrap:l.Ha.Wrap,justifyContent:l.eb.Center},t)},t}(r.Component));n.d(t,"a",function(){return u})},"7TkE":function(e,t,n){e.exports=n.p+"assets/gift-open-ba127d9c110a18648ca1.png"},"82xK":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("q1tI"),r=n("/7QA"),a=n("Ue10"),o=function(e){return i.createElement(a.C,{type:a.I.Text,onClick:e.onClick},Object(r.d)("Show more replies...","chomments.moderation.showMoreRepliesAction"))}},"8BsE":function(e,t,n){},"8EUQ":function(e,t,n){"use strict";var i={};n.d(i,"SUB_CHECKOUT__PRODUCT_KEY",function(){return o}),n.d(i,"SUB_CHECKOUT__RECIPIENT_KEY",function(){return s}),n.d(i,"SUB_CHECKOUT__MYSTERY_GIFT_COUNT",function(){return l}),n.d(i,"SUB_CHECKOUT__GIFTING_ANONYMOUSLY",function(){return c}),n.d(i,"SUB_CHECKOUT__IS_ONE_TIME_PURCHASE",function(){return d}),n.d(i,"clearSubscriptionCheckoutKeys",function(){return m}),n.d(i,"showLoginModalWithCheckoutDispatch",function(){return p});var r=n("/7QA"),a=n("y5D0"),o="SUB_CHECKOUT__PRODUCT",s="SUB_CHECKOUT__RECIPIENT",l="SUB_CHECKOUT__MYSTERY_GIFT_COUNT",c="SUB_CHECKOUT__GIFTING_ANONYMOUSLY",d="SUB_CHECKOUT__IS_ONE_TIME_PURCHASE",u=[o,s,l,c,d];function m(){u.forEach(function(e){return r.o.remove(e)})}function p(e){return function(){return Object(a.e)(e,{onClose:m})}}n.d(t,"a",function(){return i})},"8SX2":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("8Ad5"),o=n("fezU"),s=n("Ue10"),l=(n("rVcM"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openViewerCard=function(e){t.isKeyboardEvent(e)&&e.keyCode!==a.a.Space&&e.keyCode!==a.a.Enter||t.props.onUsernameClick(t.props.login,t.props.sourceType,t.props.contentID,e.currentTarget.getBoundingClientRect().bottom)},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement("span",{className:"chatter-name",onClick:this.openViewerCard,onKeyDown:this.openViewerCard,role:"button",tabIndex:0},r.createElement(s.Ca,{bold:!0,color:s.R.Base,type:s.gc.Span},this.props.children))},t.prototype.isKeyboardEvent=function(e){return void 0!==e.keyCode},t}(r.Component));var c=Object(o.b)(function(e){return{onUsernameClick:e.onShowViewerCard}})(l);n.d(t,!1,function(){return l}),n.d(t,"a",function(){return c})},"8in3":function(e,t,n){"use strict";var i=n("fezU"),r=n("mrSG"),a=n("TSYQ"),o=n("q1tI"),s=n("ZS2+"),l=n("uy8m"),c=n("4rCz"),d=n("1MDS"),u=n("0Hf3"),m=n("o8Ti"),p=n("3GF+"),h=n("oK83"),g=n("Ue10"),f=(n("2D+f"),function(e){function t(t){var i=e.call(this,t)||this;return i.ViewerCard=s.a.wrap(function(){return n.e(230).then(n.bind(null,"q3Qz"))},"ViewerCard",{placeholder:o.createElement(g.Ob,{background:g.u.Base,fullHeight:!0,fullWidth:!0,padding:2},o.createElement(g.hb,{fillContent:!0})),onRendered:function(){return i.setState({viewerCardComponentLoaded:!0})}}),i.ExtensionMessageCard=s.a.wrap(function(){return n.e(229).then(n.bind(null,"n3tJ"))},"ExtensionMessageCard",{placeholder:o.createElement(g.Ob,{background:g.u.Base,fullHeight:!0,fullWidth:!0,padding:2},o.createElement(g.hb,{fillContent:!0})),onRendered:function(){return i.setState({viewerCardComponentLoaded:!0})}}),i.EmoteCard=s.a.wrap(function(){return n.e(228).then(n.bind(null,"unmP"))},"EmoteCard",{placeholder:o.createElement(g.Ob,{fullHeight:!0,fullWidth:!0,padding:2},o.createElement(g.hb,{fillContent:!0})),onRendered:function(){return i.setState({viewerCardComponentLoaded:!0})}}),i.onDragStart=function(e){i.cardContainerRef&&i.layerRef&&e.button===l.a.Left&&(window.addEventListener("mousemove",i.onDrag),window.addEventListener("mouseup",i.onDragEnd),window.addEventListener("selectstart",i.cancelSelection),i.setState({dragging:!0}),i.initCardX=i.cardContainerRef.offsetLeft,i.initCardY=i.cardContainerRef.offsetTop,i.initMouseX=e.clientX,i.initMouseY=e.clientY)},i.onDrag=function(e){i.nextTop=i.initCardY+e.clientY-i.initMouseY,i.nextLeft=i.initCardX+e.clientX-i.initMouseX,i.rafHandle||(i.rafHandle=requestAnimationFrame(function(){i.rafHandle=0,i.cardContainerRef&&(i.cardContainerRef.style.top=i.nextTop+"px",i.cardContainerRef.style.left=i.nextLeft+"px")}))},i.openPopout=function(){if(i.props.viewerCardOptions){var e=i.props.viewerCardOptions.targetID,t=window.open("/popout/"+i.props.channelLogin+"/viewercard/"+e+"?popout=","_blank","right=50,top=50,width=340,height=520,resizable=no,scrollbars=no,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no");Object(u.c)({targetLogin:e,targetUserID:null,channelID:i.props.channelID,channelLogin:i.props.channelLogin,clickText:u.b.PopOut}),t&&(t.focus(),i.props.hideViewerCard())}},i.onDragEnd=function(){i.removeDragListeners(),i.setState({dragging:!1})},i.removeDragListeners=function(){window.removeEventListener("mousemove",i.onDrag),window.removeEventListener("mouseup",i.onDragEnd),window.removeEventListener("selectstart",i.cancelSelection)},i.cancelSelection=function(e){e.preventDefault()},i.hideEmoteCard=function(){i.props.viewerCardOptions&&i.props.viewerCardOptions.viewerCardType===h.c.Emote&&Object(d.c)({emoteLocation:Object(d.b)(i.props.viewerCardOptions.emoteSourceType),emoticonID:i.props.viewerCardOptions.emoteID,chatChannel:i.props.channelLogin,chatChannelID:i.props.channelID?i.props.channelID:"",referrerUserID:i.props.viewerCardOptions.targetID,action:d.a.Close,msgID:i.props.viewerCardOptions.sourceID}),i.props.hideViewerCard()},i.state={dragging:!1,viewerCardComponentLoaded:!1,modLogsEnabled:!1},i}return r.__extends(t,e),t.prototype.componentWillUnmount=function(){this.props.hideViewerCard(),this.rafHandle&&cancelAnimationFrame(this.rafHandle),this.removeDragListeners()},t.prototype.componentWillReceiveProps=function(e){this.setState({modLogsEnabled:Object(m.a)(e.channelID)}),this.props.viewerCardOptions&&e.viewerCardOptions&&(e.viewerCardOptions.targetID===this.props.viewerCardOptions.targetID&&e.viewerCardOptions.initialTopOffset===this.props.viewerCardOptions.initialTopOffset||this.cardContainerRef&&(this.cardContainerRef.style.left="0px"))},t.prototype.render=function(){var e=this,t={"viewer-card-layer":!0,"viewer-card-layer--dragging":this.state.dragging},n={"viewer-card-layer__draggable":!0,"viewer-card-layer__draggable--dragging":this.state.dragging},i=null,r={};if(this.props.viewerCardOptions){if(this.layerRef){var s=this.layerRef.getBoundingClientRect(),l=Math.min(this.props.viewerCardOptions.initialTopOffset-s.top,s.height-240);r={top:Math.max(l,0)+"px"}}switch(this.props.viewerCardOptions.viewerCardType){case h.c.Extension:i=o.createElement(this.ExtensionMessageCard,{channelID:this.props.channelID,extensionID:this.props.viewerCardOptions.targetID,extensionVersion:this.props.viewerCardOptions.extensionVersion,hideMessageCard:this.props.hideViewerCard});break;case h.c.Viewer:i=o.createElement(this.ViewerCard,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,isPopout:this.props.isPopout,isEmbedded:this.props.isEmbedded,targetLogin:this.props.viewerCardOptions.targetID,sourceType:this.props.viewerCardOptions.sourceType,sourceID:this.props.viewerCardOptions.sourceID,confirmModerationAction:this.props.confirmModerationAction,hideViewerCard:this.props.hideViewerCard,sendMessageToTMI:this.props.onSendMessage});break;case h.c.Emote:i=o.createElement(this.EmoteCard,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,referrerID:this.props.viewerCardOptions.targetID,sourceType:this.props.viewerCardOptions.emoteSourceType,sourceID:this.props.viewerCardOptions.sourceID,emoteID:this.props.viewerCardOptions.emoteID,emoteCode:this.props.viewerCardOptions.emoteCode,hideViewerCard:this.hideEmoteCard});break;default:i=null}}var d=null;if(i){var u=Object(c.d)("Hide","ViewerCard"),m=o.createElement(g.D,{icon:g.Db.Close,onClick:this.props.hideViewerCard,ariaLabel:u,overlay:this.state.viewerCardComponentLoaded,"data-test-selector":"close-viewer-card"}),f=this.state.modLogsEnabled&&(this.props.isModerator||this.props.isOwner),b=Object(c.d)("Popout","ViewerCard"),v=f?o.createElement(g.jc,{label:Object(c.d)("Open in popout","ViewerCard"),"data-test-selector":"popout-viewer-card"},o.createElement(g.D,{icon:g.Db.Popout,onClick:this.openPopout,ariaLabel:b,overlay:this.state.viewerCardComponentLoaded})):null;d=o.createElement(g.Ya,{background:g.u.Base,className:a(n),position:g.tb.Absolute},o.createElement("div",{onMouseDown:this.onDragStart,ref:function(t){e.cardContainerRef=t},style:r,"data-a-target":"viewer-card-positioner"},i,o.createElement(g.fb,{position:g.tb.Absolute,attachRight:!0,attachTop:!0,margin:{top:.5,right:.5},"data-a-target":"viewer-card-close-button"},o.createElement(p.a,null,v,m)))),this.props.viewerCardOptions.viewerCardType===h.c.Emote&&(m=o.createElement(g.D,{icon:g.Db.Close,onClick:this.hideEmoteCard,ariaLabel:u,overlay:this.state.viewerCardComponentLoaded,type:g.F.Secondary,"data-test-selector":"close-viewer-card"}),d=o.createElement(g.Ya,{className:a(n),position:g.tb.Absolute,borderRadius:g.A.Large},o.createElement("div",{onMouseDown:this.onDragStart,ref:function(t){e.cardContainerRef=t},style:r,"data-a-target":"viewer-card-positioner"},i,o.createElement(g.fb,{position:g.tb.Absolute,attachRight:!0,attachTop:!0,margin:{top:.5,right:.5},"data-a-target":"viewer-card-close-button"},o.createElement(p.a,null,m)))))}return o.createElement(g.Xa,{className:a(t),fullHeight:!0,fullWidth:!0,position:g.tb.Relative,zIndex:g.xc.Above},o.createElement("div",{onMouseUp:this.onDragEnd,ref:function(t){e.layerRef=t}},d))},t}(o.Component));var b=Object(i.b)(function(e){return{viewerCardOptions:e.viewerCardOptions,hideViewerCard:e.hideViewerCard}})(f);n.d(t,"a",function(){return b})},"8jSG":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"blockedUsers"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:56}};n.loc.source={body:"fragment blockedUsers on User {\nid\nblockedUsers {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"8uuy":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatVideoTrackingContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:117}};n.loc.source={body:"query VideoChatVideoTrackingContext($videoID: ID) {\nvideo(id: $videoID) {\nid\nbroadcastType\ntitle\ngame {\nid\nname\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"94Uw":function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.ProfileImage="profile_image",e.ProfileBanner="profile_banner",e.ChannelOfflineImage="channel_offline_image"}(i||(i={}))},"986b":function(e,t,n){},"9KaG":function(e,t,n){},"9P+5":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_UserData"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isGlobalMod"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:95}};n.loc.source={body:"query Chat_UserData {\nuser {\nid\ndisplayName\nlogin\nroles {\nisGlobalMod\nisSiteAdmin\nisStaff\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"9RDd":function(e,t,n){},"9Rmp":function(e,t,n){},"9sGC":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("uIkQ"),s=n("cys1"),l=n("oK83"),c=n("QVaV"),d=(n("HWU2"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleUsernameClick=function(e){t.props.onUsernameClick&&t.props.onUsernameClick(e)},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.sender,t=[r.createElement("span",{key:"username-display",className:"message-author__display-name","data-test-selector":"message-username",style:{color:e.chatColor||void 0}},e.displayName)];e.displayName&&!Object(c.b)(e.displayName)&&t.push(r.createElement("span",{key:"username-login",style:{color:e.chatColor||void 0},className:"message-author__intl-login","data-test-selector":"message-username-canonical"}," ("+e.login+")"));var n=this.props.onUsernameClick?"message-author__username--clickable":"message-author__username";return r.createElement("span",{onClick:this.handleUsernameClick,className:n},t)},t}(r.Component)),u=n("Ue10"),m=(n("qQpj"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onBanUser=function(){t.props.message.sender&&t.props.sendMessage("/ban "+t.props.message.sender.login)},t.onTimeoutUser=function(){t.props.message.sender&&t.props.sendMessage("/timeout "+t.props.message.sender.login)},t.onUnbanUser=function(){t.props.message.sender&&t.props.sendMessage("/unban "+t.props.message.sender.login)},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.message.deletedAt,t=this.onBanUser,n=u.Db.Ban,i=Object(a.d)("Ban","ModIcons");return e&&(t=this.onUnbanUser,n=u.Db.FollowCheck,i=Object(a.d)("Unban","ModIcons")),r.createElement(u.fb,{display:u.Da.InlineFlex,margin:{right:.5},className:"message-mod-icons"},r.createElement(u.Ya,{color:u.R.Alt2,display:u.Da.InlineFlex},r.createElement("button",{className:"message-mod-icons__mod-icon","data-test-selector":"default-action-button",onClick:t},r.createElement(u.jc,{label:i},r.createElement(u.Cb,{width:20,height:20,type:u.Eb.Inherit,asset:n})))),r.createElement(u.Ya,{color:u.R.Alt2,display:u.Da.InlineFlex},r.createElement("button",{className:"message-mod-icons__mod-icon","data-test-selector":"timeout-action-button",onClick:this.onTimeoutUser},r.createElement(u.jc,{label:Object(a.d)("Timeout","ModIcons")},r.createElement(u.Cb,{width:20,height:20,type:u.Eb.Inherit,asset:u.Db.Timeout})))))},t}(r.Component)),p=n("fxMP");n("QfRJ");n.d(t,"b",function(){return h}),n.d(t,"a",function(){return g});var h="message-timestamp",g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={shouldShowDeletedBody:!1},t.showDeleted=function(e){e&&e.preventDefault(),t.setState({shouldShowDeletedBody:!0})},t}return i.__extends(t,e),t.prototype.shouldComponentUpdate=function(e,t){return e.showModerationIcons!==this.props.showModerationIcons||(e.showTimestamps!==this.props.showTimestamps||(t.shouldShowDeletedBody!==this.state.shouldShowDeletedBody||(e.hasModPermissions!==this.props.hasModPermissions||e.message.deletedAt!==this.props.message.deletedAt)))},t.prototype.render=function(){if(!this.props.message.sender||!this.props.message.id)return r.createElement(u.fb,{padding:{x:2,y:.5}},Object(a.d)("unable to properly render message","Message"));var e=this.props.message.sender.displayBadges,t={},n=": ";return this.props.message.content.text.startsWith(p.a)&&(t={color:this.props.message.sender.chatColor||void 0},n=" "),r.createElement(u.fb,{padding:this.props.padding||{x:2,y:.5}},r.createElement("div",{id:this.props.message.id,className:"message",style:t},this.renderTimestamp(),this.renderModerationIcons(),r.createElement(o.b,{badgeSets:this.props.badgeSets,badgesToRender:e}),r.createElement(d,{messageID:this.props.message.id,sender:this.props.message.sender,onUsernameClick:this.props.onUsernameClick}),r.createElement("span",{key:"separator"},n),this.renderMessageBody()))},t.prototype.renderMessageBody=function(){if(!this.props.message.deletedAt||this.state.shouldShowDeletedBody){var e={forceClipsNetworkRequest:!0,messageAuthorID:this.props.message.sender.id,messageSourceID:this.props.message.id,emoteSourceType:l.a.room};return Object(s.f)(Object(p.e)(this.props.message,this.props.bitsConfig,this.props.currentUserLogin),e)}var t=Object(a.d)("message deleted","Message"),n=this.props.hasModPermissions?r.createElement(u.Aa,{onClick:this.showDeleted,"data-test-selector":"show-deleted"},"<"+t+">"):"<"+t+">";return r.createElement("span",{key:"deleted",className:"message--deleted","data-test-selector":"deleted-message"},n)},t.prototype.renderTimestamp=function(){return this.props.showTimestamps?r.createElement("span",{key:"timestamp",className:"message__timestamp","data-test-selector":h},Object(s.a)(new Date(this.props.message.sentAt))):null},t.prototype.renderModerationIcons=function(){return this.props.showModerationIcons&&this.props.hasModPermissions&&this.props.sendMessage?r.createElement(m,{message:this.props.message,sendMessage:this.props.sendMessage}):null},t}(r.Component)},"9yes":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_AllowRejectedChatMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AllowRejectedChatMessageInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowRejectedChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:141}};n.loc.source={body:"mutation Chat_AllowRejectedChatMessage($input: AllowRejectedChatMessageInput!) {\nallowRejectedChatMessage(input: $input) {\nmessage {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},AKV8:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var i,r=n("mrSG"),a=n("yR8l"),o=n("4HoE");function s(e){var t=this;return Object(a.a)(o,{props:function(n){return{modUserMutation:function(i){return r.__awaiter(t,void 0,void 0,function(){var t;return r.__generator(this,function(r){if(t=e(n.ownProps).channelID,n.mutate&&t)return[2,n.mutate({variables:{input:{channelID:t,targetLogin:i}}}).then(function(e){return e.data})];throw new Error("modUser mutation is not ready")})})}}}})}!function(e){e.ChannelNotFound="CHANNEL_NOT_FOUND",e.Forbidden="FORBIDDEN",e.UserAlreadyModded="TARGET_ALREADY_MOD",e.UserBanned="TARGET_IS_CHAT_BANNED",e.UserNotFound="TARGET_NOT_FOUND"}(i||(i={}))},AREq:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("/7QA"),r=n("DMoW"),a=n("4G6/");function o(e){var t=e.login,n=e.code,o=e.enteredDuration,s=e.minTimeoutDuration,l=e.maxTimeoutDuration,c=e.isTimeout;if(void 0===c&&(c=!1),c)switch(n){case r.d.FORBIDDEN:return Object(i.d)("You don't have permissions to timeout {login}.",{login:t},"BanUserErrorCode");case r.d.TARGET_IS_ADMIN:return Object(i.d)("You cannot timeout admin {login}. Please email support@twitch.tv if an admin is being abusive.",{login:t},"BanUserErrorCode");case r.d.TARGET_ALREADY_BANNED:return Object(i.d)("{login} is already banned in this channel.",{login:t},"BanUserErrorCode");case r.d.TARGET_IS_ANONYMOUS:return Object(i.d)("You cannot timeout anonymous users.","BanUserErrorCode");case r.d.TARGET_IS_BROADCASTER:return Object(i.d)("You cannot timeout the broadcaster.","BanUserErrorCode");case r.d.TARGET_IS_GLOBAL_MOD:return Object(i.d)("You cannot timeout global moderator {login}. Please email support@twitch.tv if a global moderator is being abusive.",{login:t},"BanUserErrorCode");case r.d.TARGET_IS_MOD:return Object(i.d)("You cannot timeout moderator {login} unless you are the owner of this channel.",{login:t},"BanUserErrorCode");case r.d.TARGET_IS_SELF:return Object(i.d)("You cannot timeout yourself.","BanUserErrorCode");case r.d.TARGET_IS_STAFF:return Object(i.d)("You cannot timeout staff {login}. Please email support@twitch.tv if a staff member is being abusive.",{login:t},"BanUserErrorCode");case r.d.TARGET_NOT_FOUND:return Object(i.d)("The user you are trying to timeout doesn't exist.","BanUserErrorCode");case r.d.DURATION_INVALID:var d=Object(i.d)("Invalid timeout duration: {userInput}. Usage: /timeout [user] [duration] [reason]",{userInput:o||""},"BanUserErrorCode"),u=Object(i.d)("Timeout duration must be between {minTimeoutDuration} and {maxTimeoutDuration} seconds.",{minTimeoutDuration:s||0,maxTimeoutDuration:l||0},"BanUserErrorCode"),m=Object(i.d)("Invalid timeout duration. Usage: /timeout [user] [duration] [reason]","BanUserErrorCode");if(o){if(void 0!==s&&void 0!==l){var p=Object(a.b)(o);if(!p||Number.isNaN(p))return d;if(p<s||p>l)return u}return d}return m;default:throw new Error("Unrecognized operation result.")}else switch(n){case r.d.FORBIDDEN:return Object(i.d)("You don't have permissions to ban {login}.",{login:t},"BanUserErrorCode");case r.d.TARGET_IS_ADMIN:return Object(i.d)("You cannot ban admin {login}. Please email support@twitch.tv if an admin is being abusive.",{login:t},"BanUserErrorCode");case r.d.TARGET_ALREADY_BANNED:return Object(i.d)("{login} is currently banned in this channel.",{login:t},"BanUserErrorCode");case r.d.TARGET_IS_ANONYMOUS:return Object(i.d)("You cannot ban anonymous users.","BanUserErrorCode");case r.d.TARGET_IS_BROADCASTER:return Object(i.d)("You cannot ban the broadcaster.","BanUserErrorCode");case r.d.TARGET_IS_GLOBAL_MOD:return Object(i.d)("You cannot ban global moderator {login}. Please email support@twitch.tv if a global moderator is being abusive.",{login:t},"BanUserErrorCode");case r.d.TARGET_IS_MOD:return Object(i.d)("You cannot ban moderator {login} unless you are the owner of this channel.",{login:t},"BanUserErrorCode");case r.d.TARGET_IS_SELF:return Object(i.d)("You cannot ban yourself.","BanUserErrorCode");case r.d.TARGET_IS_STAFF:return Object(i.d)("You cannot ban staff {login}. Please email support@twitch.tv if a staff member is being abusive.",{login:t},"BanUserErrorCode");case r.d.TARGET_NOT_FOUND:return Object(i.d)("The user you are trying to ban doesn't exist.","BanUserErrorCode");default:throw new Error("Unrecognized operation result.")}}},"Aa/l":function(e,t,n){},AcdH:function(e,t,n){},Av0x:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("/7QA"),r=n("DMoW");function a(e,t,n){if(void 0===n&&(n=!1),n)switch(t){case r.fb.FORBIDDEN:return Object(i.d)("You don't have permissions to untimeout {login}.",{login:e},"UnbanUserErrorCode");case r.fb.TARGET_NOT_FOUND:return Object(i.d)("The user you are trying to untimeout doesn't exist.","UnbanUserErrorCode");case r.fb.TARGET_NOT_BANNED:return Object(i.d)("{login} is not currently timed out from this channel.",{login:e},"UnbanUserErrorCode");default:throw new Error("Unrecognized operation result")}else switch(t){case r.fb.FORBIDDEN:return Object(i.d)("You don't have permissions to unban {login}.",{login:e},"UnbanUserErrorCode");case r.fb.TARGET_NOT_FOUND:return Object(i.d)("The user you are trying to unban doesn't exist.","UnbanUserErrorCode");case r.fb.TARGET_NOT_BANNED:return Object(i.d)("{login} is not currently banned from this channel.",{login:e},"UnbanUserErrorCode");default:throw new Error("Unrecognized operation result")}}},BJwa:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("9C/b"),o=n("fvjX"),s=n("/7QA"),l=n("ZS2+"),c=n("yR8l"),d=n("eDVu"),u=n("0Log"),m=n("/0dD"),p=n("6j5V"),h=n("/aPz"),g=n("DMoW"),f=n("uIkQ"),b=n("ZVTe"),v=n("cys1"),k=n("Ue10"),C=function(e){return r.createElement(k.Ob,{padding:{top:1,bottom:.5},margin:{x:2},borderTop:!0,display:k.Da.Block,flexDirection:k.Ga.Column},r.createElement(k.fb,{padding:{bottom:.5}},r.createElement(k.Ca,{color:k.R.Alt2},Object(s.d)("<x:strong>Anonymous Cheering</x:strong> only supports Cheermotes. All custom text will be removed and your Cheer will appear as shown below.",{"x:strong":function(e){return r.createElement(k.Ca,{type:k.gc.Span,color:k.R.Link,bold:!0},e)}},"InvalidAnonymousCheerPrompt")),r.createElement(k.fb,{margin:{y:1}},r.createElement(f.b,{badgeSets:e.badgeSets,badgesToRender:{"anonymous-cheerer":"1"}}),r.createElement(b.a,{userData:{isIntl:!1,userDisplayName:"AnAnonymousCheerer",userID:"automod",userLogin:"ananonymouscheerer",userType:"global_mod"}}),": ",Object(v.f)(e.messageParts))),r.createElement(k.fb,{display:k.Da.Flex,flexDirection:k.Ga.Row},r.createElement(k.C,{onClick:e.onCheerAnyway},Object(s.d)("Continue","InvalidAnonymousCheerPrompt")),r.createElement(k.fb,{padding:{left:.5}},r.createElement(k.C,{onClick:e.onEditCheer,type:k.I.Hollow},Object(s.d)("Edit","InvalidAnonymousCheerPrompt")))))},y=n("4rCz"),S=(n("e7rh"),function(e){return r.createElement(k.Ob,{padding:{top:1,bottom:.5},margin:{x:2},borderTop:!0,display:k.Da.Block,flexDirection:k.Ga.Column},r.createElement(k.fb,{padding:{bottom:.5}},r.createElement(f.b,{badgeSets:e.badgeSets,badgesToRender:{twitchbot:"1"}}),r.createElement(b.a,{userData:{color:"#6441A5",isIntl:!1,userDisplayName:"AutoMod",userID:"automod",userLogin:"automod",userType:"global_mod"}}),r.createElement(k.Ca,{type:k.gc.Span,color:k.R.Alt2},Object(y.d)(": Your text may be removed by moderation. Bits will still be sent to the streamer. Review the highlighted text or continue below.","BitsAutoModOffenderPrompt"))),r.createElement(k.fb,{display:k.Da.Flex,flexDirection:k.Ga.Row},r.createElement(k.fb,{padding:{right:.5}},r.createElement(k.C,{onClick:e.onEditCheer},r.createElement(k.fb,{padding:{x:2}},Object(y.d)("Edit","BitsAutoModOffender")))),r.createElement(k.C,{onClick:e.onCheerAnyway,type:k.I.Hollow},Object(y.d)("Cheer Anyway","BitsAutoModOffender")),r.createElement(k.fb,{className:"bits-auto-mod-offender-prompt__notification-icon",display:k.Da.Flex,flexDirection:k.Ga.Column,justifyContent:k.eb.End,alignSelf:k.j.End,margin:{left:"auto",right:.5}},r.createElement(k.Cb,{asset:k.Db.NotificationWarning}))))}),E=n("qnat"),N=n("H31v"),_=n("oJmH"),D=n("/MKj"),w=n("u5aL"),O=n("8Ad5"),I=n("5zf8"),T=n("oe5X"),M=n("1/iK"),L=n("f00E"),R=n("y5D0"),x=n("kz7j"),F=n("kRBY"),A=n("9o5F"),j=n("tKDy"),U=n("okS7"),B=n("ry0r"),P=n("17x9"),V=n("uu1w"),H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=V.a.Hashtag,t.canBeTriggeredByTab=!1,t.getMatches=function(e){return e.startsWith("#")&&null!==t.props.hashTags.edges?t.props.hashTags.edges.filter(function(t){return t.node.id.includes(e)}).map(function(n){return{current:e,replacement:n.node.id,element:t.genearateHashtagDisplay(n.node.id)}}):null},t.genearateHashtagDisplay=function(e){return r.createElement(k.fb,{padding:{right:.5},key:"hashtag:"+e},r.createElement(k.Ca,null,e))},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.unregister=this.context.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t.contextTypes={registerAutocompleteProvider:P.func},t}(r.Component),G=n("5zXJ"),W=n("XmgI"),q=n("ebRM"),z=n("RiD7"),Q=n("i4un"),Y=n("tFCv"),K=n("+pBb"),$=n("QVaV"),X=n("vSeP"),J=5,Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=V.a.Mention,t.canBeTriggeredByTab=!0,t.getMatches=function(e,n){return n||e.startsWith("@")?t.getMentions(e,n):null},t.getMentions=function(e,n){if(!t.props.activeChattersAPI)return[];var i=n?e:e.substring(1);return t.props.activeChattersAPI.getActiveChatters(i,J).map(function(i){return{current:e,replacement:(n?"":"@")+(i.displayName||i.login),element:t.renderMention(i)}})},t.renderMention=function(e){return r.createElement("span",null,Object($.a)(e.login,e.displayName||null))},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.unregister=this.context.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t.contextTypes={registerAutocompleteProvider:P.func},t}(r.Component),ee=Object(X.a)(Z),te=n("jBwP"),ne=n("knbN"),ie=n("2xye");var re,ae=n("dIU+"),oe=n("QjI3");!function(e){e.ChatRestrictedHeader="chat-restricted-header"}(re||(re={}));var se=function(e){function t(t){var n=e.call(this,t)||this;return n.renderBalloon=function(e,t){if(!n.props.showBalloon)return null;var i=null;return t&&(i=r.createElement(k.fb,{display:k.Da.Flex,margin:{top:1}},t,r.createElement(k.fb,null))),r.createElement(w.a,{onClickOut:n.handleBalloonClickOut},r.createElement(k.x,{direction:k.y.TopLeft,offsetY:"-0.5rem",size:k.z.Medium,show:n.props.showBalloon,tailOffset:50},r.createElement(k.Ob,{color:k.R.Base,padding:1},e,i)))},n.onRestrictionsUpdate=function(){if(n.props.chatRestrictionsAPI){var e=n.props.chatRestrictionsAPI.getRestrictions();if(e&&0!==e.length){var t=e[0],i=null;t===g.t.FOLLOWERS_ONLY&&(i=n.props.chatRestrictionsAPI.getRemainingFollowSeconds()),n.setState({reason:t,followSecondsRemaining:i})}else n.setState({reason:null})}else n.setState({reason:null})},n.handleBalloonClickOut=function(e){n.rootRef&&n.rootRef.contains(e.target)&&e.stopPropagation(),n.props.closeBalloon()},n.handleActionClick=function(){null!==n.state.reason&&function(e){var t;switch(e.restriction){case g.t.SUBSCRIBERS_ONLY:t="subscribe";break;case g.t.VERIFIED_ONLY:t="go_to_settings";break;case g.t.FOLLOWERS_ONLY:t="follow";break;default:return}var n={action_type:t,channel:e.channelLogin,channel_id:e.channelID};s.p.track(ie.SpadeEventType.ChatInputRestrictedAction,n)}({channelID:n.props.channelID||"",channelLogin:n.props.channelLogin,restriction:n.state.reason})},n.setRootRef=function(e){return n.rootRef=e},n.state={reason:null,followSecondsRemaining:null},n}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.showBalloon&&this.trackImpression(),this.props.chatRestrictionsAPI&&(this.props.chatRestrictionsAPI.addUpdateHandler(this.onRestrictionsUpdate),this.onRestrictionsUpdate())},t.prototype.componentWillUnmount=function(){this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.removeUpdateHandler(this.onRestrictionsUpdate)},t.prototype.componentWillReceiveProps=function(e){e.showBalloon&&!this.props.showBalloon&&this.trackImpression(),this.props.chatRestrictionsAPI!==e.chatRestrictionsAPI&&(this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.removeUpdateHandler(this.onRestrictionsUpdate),e.chatRestrictionsAPI&&(e.chatRestrictionsAPI.addUpdateHandler(this.onRestrictionsUpdate),this.onRestrictionsUpdate()))},t.prototype.render=function(){var e="",t=null,n=null;switch(this.state.reason){case g.t.SUBSCRIBERS_ONLY:e=Object(s.d)("Subscribers-Only Chat","ChatModeHeader"),t=Object(s.d)("Only {streamer}'s subscribers can chat right now. Subscribe and join in!",{streamer:this.props.channelDisplayName||this.props.channelLogin},"ChatModeHeader"),n=r.createElement("div",{onClick:this.handleActionClick},r.createElement(oe.SubscribeButton,{balloonDirection:k.y.TopRight,channelLogin:this.props.channelLogin}));break;case g.t.VERIFIED_ONLY:e=Object(s.d)("Verified Accounts Only Chat","ChatModeHeader"),t=Object(s.d)("Verify your account in Settings to chat!","ChatModeHeader"),n=r.createElement(k.C,{onClick:this.handleActionClick,linkTo:"/settings/security",targetBlank:!0},Object(s.d)("Go to Settings","ChatModeHeader"));break;case g.t.FOLLOWERS_ONLY:if(e=Object(s.d)("Followers-Only Chat","ChatModeHeader"),this.props.followerDurationSeconds>0&&null!==this.state.followSecondsRemaining){var i=Object(I.b)(this.props.followerDurationSeconds),a=Object(I.b)(this.state.followSecondsRemaining);t=Object(s.d)("You need to be a follower for {timeRequired} to chat, and you have {timeRemaining} left.",{timeRequired:i,timeRemaining:a},"ChatModeHeader")}else t=Object(s.d)("You need to be a follower of {streamer} to chat.",{streamer:this.props.channelDisplayName||this.props.channelLogin},"ChatModeHeader"),n=r.createElement(ae.a,{channelLogin:this.props.channelLogin,onFollow:this.handleActionClick,onUnfollow:this.handleActionClick,followUIType:ae.b.IconAndText,unfollowUIType:ae.b.IconAndText,balloonDirection:k.y.TopRight,hideDropdownWhenFollowing:!0});break;case g.t.SLOW_MODE:default:return null}return r.createElement("div",{ref:this.setRootRef},r.createElement(k.Ob,{borderTop:!0,color:k.R.Alt2,display:k.Da.Flex,fontSize:k.Ia.Size6,padding:{y:.5},position:k.tb.Relative,"data-test-selector":re.ChatRestrictedHeader},r.createElement(k.Aa,{hoverColorInherit:!0,hoverUnderlineNone:!0,onClick:this.props.openBalloon,type:k.Ba.Inherit},r.createElement(k.Ca,{bold:!0},e)),r.createElement(k.fb,{margin:{left:.5}},r.createElement(k.D,{icon:k.Db.NotificationInfo,onClick:this.props.openBalloon,type:k.F.Secondary})),this.renderBalloon(t,n)))},t.prototype.trackImpression=function(){this.state.reason&&function(e){var t;switch(e.restriction){case g.t.SUBSCRIBERS_ONLY:t="subscriber_mode";break;case g.t.VERIFIED_ONLY:t="verified_mode";break;case g.t.FOLLOWERS_ONLY:t=e.requiredDuration?"follow_mode_timer":"follow_mode";break;default:return}var n={channel:e.channelLogin,channel_id:e.channelID,impression_type:t};s.p.track(ie.SpadeEventType.ChatInputRestrictedImpression,n)}({channelID:this.props.channelID||"",channelLogin:this.props.channelLogin,restriction:this.state.reason,requiredDuration:this.props.followerDurationSeconds})},t}(r.Component);Object(o.compose)(se);var le,ce=Object(o.compose)(Object(te.b)(function(e){return{followerDurationSeconds:60*e.followerDuration,followerMode:e.followerMode}}),ne.a)(se),de=function(){return r.createElement(k.x,{direction:k.y.TopLeft,offsetY:"11px",show:!0},r.createElement(k.fb,{padding:1,"data-test-selector":"manage-moderation-settings-tooltip"},Object(s.d)("Mods can now update AutoMod levels as well as Blocked and Permitted Terms.","ManageModerationSettingsChat")))},ue=n("9MrB"),me=n("TSYQ");n("ZuCe");!function(e){e.AUTOMOD="automod",e.ANONYMOUS_CHEERING="anonymous-cheering",e.UNKNOWN="unknown"}(le||(le={}));var pe,he=function(e){var t=e.moderatedReason,n=void 0===t?le.UNKNOWN:t,i=e.moderatedMessageParts,a=me("moderated-message-fake-input__container",n);return r.createElement(k.Ob,{position:k.tb.Relative,borderRadius:k.A.Medium,className:a},r.createElement(k.Ob,{className:"moderated-message-fake-input__content",display:k.Da.Block,overflow:k.mb.Auto,color:k.R.Alt,background:k.u.Alt,fullWidth:!0},r.createElement(k.Ya,{padding:{y:.5,left:1},fullHeight:!0},r.createElement("div",{style:{paddingRight:"6rem"}},Object(v.f)(i)))),r.createElement(k.Ob,{position:k.tb.Absolute,display:k.Da.Flex,flexDirection:k.Ga.Row,attachRight:!0,attachTop:!0},r.createElement(k.fb,{display:k.Da.InlineFlex,alignItems:k.i.Center,className:"moderated-message-fake-input__icon",padding:.5},r.createElement(k.Cb,{asset:k.Db.Bits,type:k.Eb.Inherit})),r.createElement(k.fb,{display:k.Da.InlineFlex,alignItems:k.i.Center,className:"moderated-message-fake-input__icon",padding:.5},r.createElement(k.Cb,{asset:k.Db.Emoticons,type:k.Eb.Inherit}))))},ge=n("ilCE");n("MVDO");function fe(e,t){var n=t.action?{action:t.action}:{},r=i.__assign({raid_upsell_source_id:Number(t.sourceChannelID),raid_upsell_target_id:Number(t.targetChannelID)},n);s.p.track(e,r)}!function(e){e.Host="host",e.Raid="raid",e.Dismiss="dismiss"}(pe||(pe={}));var be=n("D7An"),ve="raid-now-upsell";var ke,Ce={"data-test-selector":"dismiss"},ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDismissUpsell=function(){!function(e){fe(ie.SpadeEventType.RaidUpsellClick,i.__assign({},e,{action:pe.Dismiss}))}({sourceChannelID:t.props.data.sourceChannel.id,targetChannelID:t.props.data.targetChannel.id}),t.props.closeRaidUpsell()},t.handleSendHostMsgFromUpsell=function(){!function(e){fe(ie.SpadeEventType.RaidUpsellClick,i.__assign({},e,{action:pe.Host}))}({sourceChannelID:t.props.data.sourceChannel.id,targetChannelID:t.props.data.targetChannel.id}),t.handleSendHostMsg()},t.handleSendHostMsg=function(){t.props.send("/host "+t.props.targetChannelLogin),t.props.closeRaidUpsell()},t.handleSendRaidMsg=function(){!function(e){fe(ie.SpadeEventType.RaidUpsellClick,i.__assign({},e,{action:pe.Raid}))}({sourceChannelID:t.props.data.sourceChannel.id,targetChannelID:t.props.data.targetChannel.id}),t.props.send("/raid "+t.props.targetChannelLogin),t.props.closeRaidUpsell()},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.data.refetch()},t.prototype.componentDidUpdate=function(e){if(e.data.loading!==this.props.data.loading&&!this.props.data.loading){if(!this.channelDisplayName||!this.isViewersCountWithinRange||this.isAttemptingToHostSelf)return this.handleSendHostMsg();!function(e){fe(ie.SpadeEventType.RaidUpsellImpression,e)}({sourceChannelID:this.props.data.sourceChannel.id,targetChannelID:this.props.data.targetChannel.id}),s.n.set(ve,!0)}},t.prototype.render=function(){var e=this.props.data.loading,t=this.channelDisplayName;return e||!t||!this.isViewersCountWithinRange||this.isAttemptingToHostSelf?null:r.createElement(k.fb,{className:"raid-upsell-prompt",padding:1,margin:{x:2}},r.createElement(k.fb,{display:k.Da.Flex,justifyContent:k.eb.Between},r.createElement(k.fb,{display:k.Da.Flex},r.createElement(k.fb,{className:"raid-upsell-prompt__notification",margin:{top:.5}},r.createElement(k.Cb,{asset:k.Db.NotificationInfo})),r.createElement(k.fb,{margin:{x:1}},r.createElement(k.Ca,{type:k.gc.H6,bold:!0},Object(s.d)("How about raiding {channelDisplayName}?",{channelDisplayName:t},"RaidUpsellPrompt")),r.createElement(k.Ca,{type:k.gc.P,color:k.R.Alt2},Object(s.d)("Now you can raid whenever you want instead of waiting 30 seconds.","RaidUpsellPrompt")))),r.createElement(k.Ob,{color:k.R.OverlayAlt},r.createElement(k.D,i.__assign({},Ce,{icon:k.Db.Close,size:k.E.Small,ariaLabel:Object(s.d)("Dismiss","RaidUpsellPrompt"),onClick:this.handleDismissUpsell})))),r.createElement(Se,{onSendHostMsg:this.handleSendHostMsgFromUpsell,onSendRaidMsg:this.handleSendRaidMsg}))},Object.defineProperty(t.prototype,"channelDisplayName",{get:function(){var e=this.props.data.targetChannel;return e&&e.displayName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isViewersCountWithinRange",{get:function(){var e=this.props.data.sourceChannel,t=e&&e.stream&&e.stream.viewersCount;return t&&t>=3&&t<1e5},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAttemptingToHostSelf",{get:function(){return this.props.targetChannelLogin===this.props.sourceChannelLogin},enumerable:!0,configurable:!0}),t}(r.Component),Se=function(e){return r.createElement(k.fb,{display:k.Da.Flex,justifyContent:k.eb.End,margin:{top:1}},r.createElement(k.fb,{margin:{right:1}},r.createElement(k.C,{type:k.I.Hollow,size:k.G.Small,onClick:e.onSendHostMsg},r.createElement(k.fb,{padding:{x:2}},Object(s.d)("Host","RaidUpsellPrompt")))),r.createElement(k.fb,null,r.createElement(k.C,{size:k.G.Small,onClick:e.onSendRaidMsg},r.createElement(k.fb,{padding:{x:2}},Object(s.d)("Raid","RaidUpsellPrompt")))))},Ee=Object(c.a)(ge,{options:function(e){return{variables:{targetChannelLogin:e.targetChannelLogin,sourceChannelLogin:e.sourceChannelLogin}}}})(ye),Ne=n("gTu3"),_e=n("RcPG"),De=n("YXxK"),we=n("WytW"),Oe=n("lNGo"),Ie=n("ySk3"),Te=n("x0gr"),Me=n("mmRu"),Le=n("cpJf"),Re=n("GzyO"),xe=n("GnwI"),Fe=n("EOIh"),Ae=n("FS60"),je=/\S/;!function(e){e[e.Bits=0]="Bits",e[e.ChatRestriction=1]="ChatRestriction",e[e.Emotes=2]="Emotes",e[e.None=3]="None"}(ke||(ke={}));var Ue=function(e){function t(t){var n=e.call(this,t)||this;return n.cancelDelayedSend=null,n.confirmDelayedSend=null,n.hasConfirmedInEmbed=!1,n.hasSeenConfirmationPrompt=!1,n.renderSlowModeProgressBar=function(){if(n.state.chatRestrictedReason===g.t.SLOW_MODE){var e=n.state.slowModeSecondsRemaining/n.props.slowModeDuration*100;return r.createElement(k.fb,{position:k.tb.Absolute,attachBottom:!0,fullWidth:!0},r.createElement(k.wb,{borderRadius:k.A.Small,size:k.yb.Small,value:e,mask:!0}))}return null},n.incrementAndHideAutomodTooltipCounter=function(){var e=s.n.get("automodChatCogTooltipSeenNumTimes",0)+1;s.n.set("automodChatCogTooltipSeenNumTimes",e),n.setState({showAutomodSettingsTooltip:!1})},n.setChatInputRef=function(e){return n.chatInputRef=e},n.setAutocompleteInputRef=function(e){return n.autocompleteInputRef=e},n.onCheerInvalid=function(e){n.state.bitsCardError!==e&&(n.setState({bitsCardError:e}),e&&n.trackBitsCardInteraction(z.c.UserViewingCheerError,{bitsCardError:e}))},n.onSendCheerWhenSendDisabled=function(){n.trackBitsCardInteraction(z.c.SendInvalidCheerAttemptButtonDisabled,{bitsCardError:n.state.bitsCardError})},n.onAnonymousCheerToggle=function(e){n.setState({isAnonymousCheer:e})},n.onChatSettingsToggle=function(e){n.handleModerationSettingsToggle(e),e||Object(Te.b)({channelLogin:n.props.channelLogin,isHostMode:n.props.isHostMode})},n.handleModerationSettingsToggle=function(e){if(!e){var t=s.n.get("autoModToolTipSeen",0)+1;n.setState({showAutomodSettingsTooltip:!1}),s.n.set("autoModToolTipSeen",t)}},n.onKeyDown=function(e){var t=e.charCode||e.keyCode;switch(n.props.onKeyDown&&t!==O.a.Enter&&n.props.onKeyDown(e),n.props.bitsSendHasError&&n.props.clearBitsSendError(),t){case O.a.Enter:return void(e.shiftKey||(e.preventDefault(),n.onMessageSend()));case O.a.Esc:return void(n.state.showCard===ke.Bits&&n.setState({showCard:ke.None}));default:return}},n.onMessageValueUpdate=function(e){n.setState({value:e})},n.onInputFocus=function(){n.props.onInputFocus&&n.props.onInputFocus(),n.state.hasInteractedOrPageload||n.setState({hasInteractedOrPageload:!0})},n.onMouseEnterInput=function(){n.state.hasInteractedOrPageload||n.setState({hasInteractedOrPageload:!0})},n.onChatCommand=function(e){n.props.onChatCommand(e),n.trackChatEvent(n.props.emotePickerSessionID)},n.confirmEmbedAction=function(e,t,i){var r=n,a=r.hasConfirmedInEmbed;if(r.hasSeenConfirmationPrompt)return a;var o=window.confirm(n.confirmationMessage(e,t,i));return n.hasSeenConfirmationPrompt=!0,n.hasConfirmedInEmbed=o,n.setState({hasSeenAndRejectedEmbedPrompt:!o}),o},n.confirmationMessage=function(e,t,n){return Object(s.d)('Hi {displayName}. You are attempting to send "{message}" in {channelLogin}\'s chat via an embedded version of Twitch Chat. Are you sure you want to do this? This setting will persist until you refresh the page',{displayName:e,message:t,channelLogin:n},"ChatInput")},n.onMessageSend=function(){return i.__awaiter(n,void 0,void 0,function(){var e,t,n,r,a,o,l,c=this;return i.__generator(this,function(i){switch(i.label){case 0:return e=this.state.chatRestrictedReason,this.isTypingCommand()||this.isTypingCheer()||null===e?this.props.authToken?this.props.channelID?(t=je.test(this.state.value))?this.state.isSendingBits?(s.k.debug("[ChatInput] Supressing chat message send. Bits spending is still in progress."),[2]):this.props.isEmbedded&&(this.props.isCurrentUserModerator||this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.isPartner)&&this.props.sessionUser&&!this.confirmEmbedAction(this.props.sessionUser.displayName,this.state.value||"",this.props.channelLogin)?(s.k.debug("[ChatInput] Embed Confirmation check failed. Not sending message"),[2]):(this.resetAndUpdateRenderSentChatMessageEvent(),this.state.value.split(/\s+/).forEach(function(e){var t=c.props.emoteMap&&c.props.emoteMap[e];t&&Object(Re.a)(t)}),this.props.data&&this.props.data.currentUser?(n=Object(q.a)(this.state.messageCheers),r=Object(L.a)(),0===n.total?(this.sendRegularMessage(),this.state.messageCheers&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,De.c.ZeroBits),[2]):this.props.data.channel?this.props.data.channel.cheer?this.props.data.channel.cheer.settings?this.props.bitsConfig?(this.state.bitsCardError&&(this.onSendCheerWhenSendDisabled(),this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,De.c.BitsCardDisabled)),(a=Object(q.f)({messageBits:n,balance:this.props.data.currentUser.bitsBalance,cheerMinimumBits:this.props.data.channel.cheer.settings.cheerMinimumBits,emoteMinimumBits:this.props.data.channel.cheer.settings.emoteMinimumBits,inputValue:this.state.value,bitsConfig:this.props.bitsConfig})).canSpend?this.props.sendCheer?(this.setState({isSendingBits:!0}),n.total>=G.l?[4,new Promise(function(e){var t=setTimeout(e,G.q.UNDO_PROMPT_DURATION),n=function(n){void 0===n&&(n=!1),clearTimeout(t),c.cancelDelayedSend=null,c.confirmDelayedSend=null,e(n)};c.cancelDelayedSend=function(){return n(!0)},c.confirmDelayedSend=function(){return n(!1)}})]:[3,2]):(s.k.warn("[Chat Input] No GraphQL mutation for sending cheers attached."),[2]):(s.k.warn("[Chat Input] Spending bits forbidden.",a),a.cheerAboveMaxBitsPerEmote&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,De.c.AboveMaxEmote),a.totalAboveBalance&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,De.c.BitsUnavailable),a.totalBelowCheerMinimum&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,De.c.BelowMin),a.totalBelowEmoteMinimum&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,De.c.BelowMinEmote),a.inputLongerThanMaxBitsMessage&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,De.c.InputAboveMaxLength),a.inputStartsWithCommand&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,De.c.InputCommandStart),a.cheerContainsInvalidDisplayOnlyCheermotes&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,De.c.InvalidBitsMessage),[2])):(s.k.warn("[Chat Input] Bits Config is undefined"),this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,De.c.MissingBitsConfig),[2]):(s.k.warn("[Chat Input] Cheer Settings are undefined."),[2]):(s.k.warn("[Chat Input] Cheer is null."),[2]):(s.k.warn("[Chat Input] User is null."),[2])):(this.sendRegularMessage(),[2])):(s.k.debug("[ChatInput] Supressing chat message send. Input failed to pass validation.",{hasSendableInput:t,value:this.state.value}),[2]):(s.k.warn("[ChatInput] Attempt to send a message before channel ID"),[2]):(this.handleLogin(),[2]):(this.setState({showCard:ke.ChatRestriction}),[2]);case 1:if(i.sent())return this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,De.c.Canceled),this.setState({isSendingBits:!1}),this.chatInputRef.focus(),[2];i.label=2;case 2:return i.trys.push([2,4,,5]),o={id:r,targetID:this.props.channelID,bits:n.total,content:this.state.value,isAutoModEnabled:!0,shouldCheerAnyway:this.props.forceSendCheer,isAnonymous:this.state.isAnonymousCheer},this.props.clearBitsSendError(),[4,this.props.sendCheer({variables:{input:o}})];case 3:return(l=i.sent()).data.sendCheer&&l.data.sendCheer.validationError?(this.props.onSendCheerError&&this.props.onSendCheerError(l.data.sendCheer.validationError),this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,Object(Oe.a)(l.data.sendCheer.validationError.code)),this.setState({isSendingBits:!1,showCard:ke.None,bitsCardError:l.data.sendCheer.validationError.code}),this.chatInputRef&&this.chatInputRef.focus(),[2]):[3,5];case 4:return i.sent(),this.props.onSendCheerError&&this.props.onSendCheerError({code:g.Na.UNKNOWN}),this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer,De.c.Unknown),this.setState({isSendingBits:!1,bitsCardError:g.Na.UNKNOWN}),this.chatInputRef&&this.chatInputRef.focus(),[2];case 5:return this.props.onSendCheerSuccess(),this.trackCheerEvent(this.props.emotePickerSessionID,n.total,this.state.value,r,this.state.isAnonymousCheer),this.setState({isSendingBits:!1,bitsCardError:void 0,showCard:ke.None,value:""}),this.chatInputRef&&this.chatInputRef.focus(),this.autocompleteInputRef&&this.autocompleteInputRef.setValue(""),[2]}})})},n.handleAuthContextBalloonClose=function(){n.setState({showAuthContextBalloon:!1}),Object(j.n)({page:j.e.Bubble,source:M.a.Chat,target:j.d.Exit,action:j.c.Click})},n.onEmotePickerToggle=function(){n.setState(function(e){return e.messageCheers.length?e:{showCard:e.showCard===ke.Emotes?ke.None:ke.Emotes}})},n.onClickOut=function(){n.setState(function(e){return e.showCard===ke.Emotes?{showCard:ke.None}:e})},n.onBitsIconClick=function(){n.state.showCard===ke.Bits?n.trackBitsCardInteraction(z.c.CloseCard):n.trackBitsCardInteraction(z.c.OpenCard),n.setState({showCard:n.state.showCard===ke.Bits?ke.None:ke.Bits})},n.onShowViewersList=function(){n.state.showCard!==ke.None&&n.setState({showCard:ke.None}),n.props.showViewersList()},n.onBitsClose=function(){n.state.showCard===ke.Bits&&n.setState({showCard:ke.None}),n.trackBitsCardInteraction(z.c.CloseCard)},n.onChatRestrictionBalloonClose=function(){n.state.showCard===ke.ChatRestriction&&n.setState({showCard:ke.None})},n.onChatRestrictionBalloonOpen=function(){n.setState({showCard:ke.ChatRestriction})},n.onClickEmote=function(e){var t=n.state.value;n.state.value&&n.state.value.length>0&&!n.state.value.endsWith(" ")&&(t+=" "),t+=e+" ",n.autocompleteInputRef&&n.autocompleteInputRef.setValue(t)},n.onEmotePickerDataLoaded=function(e){e&&n.setState({showEmotePickerButton:!0})},n.trackCheerEvent=function(e,t,i,r,a){Object(Oe.d)({channelID:n.props.channelID||"",channelLogin:n.props.channelLogin,emotePickerSessionID:e,isAnonymousCheer:a,isHostMode:n.props.isHostMode,player:n.props.isPopout?De.a.Embed:De.a.Web,subOnlyMode:n.props.subsOnlyMode,viewerContext:n.props.viewerContext,bitsValue:t,cheermote:i,transactionID:r})},n.trackCheerErrorEvent=function(e,t,i,r,a,o){Object(Oe.c)({channelID:n.props.channelID||"",channelLogin:n.props.channelLogin,emotePickerSessionID:e,isHostMode:n.props.isHostMode,isAnonymousCheer:a,player:n.props.isPopout?De.a.Embed:De.a.Web,subOnlyMode:n.props.subsOnlyMode,viewerContext:n.props.viewerContext,bitsValue:t,cheermote:i,transactionID:r,errorType:o})},n.trackBitsCardInteraction=function(e,t){var i={actionName:e,actionType:t&&t.actionType,emoteType:t&&t.emoteType,emoteLevel:t&&t.emoteLevel,location:t&&t.location,displayedBalance:n.props.data&&n.props.data.currentUser&&n.props.data.currentUser.bitsBalance||0,bitsCardError:t&&t.bitsCardError};Object(z.k)(i)},n.resetAndUpdateRenderSentChatMessageEvent=function(){n.props.latencyTracking.resetCustomEvents(x.a.Chat);var e=n.props.latencyTracking.registerCustomEvent({benchmark:400,group:x.a.Chat,key:x.b.ChatRenderSent,label:x.c.RenderSent,start:x.d.Registration});n.props.updateRenderSentChatMessageEvent(e)},n.isCurrentUserBanned=function(){if(n.props.data&&!n.props.data.loading&&!n.props.data.error&&n.props.data.channel){var e=n.props.data.channel.self;if(e&&e.banStatus&&e.banStatus.isPermanent)return!0}return!1},n.onRestrictionsUpdate=function(){var e=null,t=0;if(n.props.chatRestrictionsAPI){var i=n.props.chatRestrictionsAPI.getRestrictions();i&&i.length>0&&(e=i[0],t=n.props.chatRestrictionsAPI.getRemainingSlowModeSeconds())}n.setState({chatRestrictedReason:e,slowModeSecondsRemaining:t})},n.isTypingCommand=function(){return"/"===n.state.value.substr(0,1)&&"/me"!==n.state.value.substr(0,3)},n.isTypingCheer=function(){return n.state.messageCheers.length>0},n.state={hasInteractedOrPageload:t.firstPageLoaded,hasSeenAndRejectedEmbedPrompt:!1,isSendingBits:!1,messageCheers:[],showAuthContextBalloon:!1,showBuyBits:!1,showCard:ke.None,showEmotePickerButton:!!t.authToken,showAutomodSettingsTooltip:!1,value:"",chatRestrictedReason:null,slowModeSecondsRemaining:0,isAnonymousCheer:!1},n}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.getPendingMessage()&&this.restorePendingMessage(),this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.addUpdateHandler(this.onRestrictionsUpdate)},t.prototype.componentWillUpdate=function(e,t){if(t.value!==this.state.value&&this.props.bitsConfig){var n=[];Object(W.f)(t.value,this.props.bitsConfig,!1).forEach(function(e){e.type===_e.a.Emote&&n.push(e.content)}),n.length&&t.showCard===ke.Emotes&&this.setState({showCard:ke.None}),this.setState({messageCheers:Object(W.b)(n,this.props.bitsConfig)})}},t.prototype.componentWillReceiveProps=function(e){var t=this;this.props.chatRestrictionsAPI!==e.chatRestrictionsAPI&&(this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.removeUpdateHandler(this.onRestrictionsUpdate),e.chatRestrictionsAPI&&e.chatRestrictionsAPI.addUpdateHandler(this.onRestrictionsUpdate)),!this.props.firstPageLoaded&&e.firstPageLoaded&&(this.setState({hasInteractedOrPageload:!0}),this.props.isCurrentUserModerator&&s.n.get("automodChatCogTooltipSeenNumTimes",0)<3&&this.setState({showAutomodSettingsTooltip:!0},function(){setTimeout(t.incrementAndHideAutomodTooltipCounter,15e3)}))},t.prototype.componentDidUpdate=function(){this.props.forceSendCheer&&this.onMessageSend()},t.prototype.componentWillUnmount=function(){this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.removeUpdateHandler(this.onRestrictionsUpdate)},t.prototype.render=function(){var e=this.isCurrentUserBanned(),t=Object(s.d)("Send a message","ChatInput");if(e)return r.createElement(k.fb,{padding:{bottom:2,x:2}},r.createElement(k.Ob,{padding:{bottom:1,x:2},borderTop:!0}),r.createElement(k.fb,{textAlign:k.cc.Center},r.createElement(k.Ca,{color:k.R.Alt,"data-test-selector":"current-user-banned-text",bold:!0},Object(s.d)("You are currently banned from this channel.","ChatInput"))),this.renderButtonContainer(!0,null));if(this.state.hasSeenAndRejectedEmbedPrompt)return r.createElement(k.fb,{className:"chat-input",display:this.props.hidden?k.Da.Hide:k.Da.Block,padding:{x:2,bottom:2}},r.createElement(k.Ca,{"data-test-selector":"chat-embed-denied-text"},Object(s.d)("You rejected the prompt to send messages in this embedded version of Twitch Chat. If this was done in error, please refresh the page.","ChatInput")),this.renderButtonContainer(!0,null));var n=[];this.props.bitsConfig&&n.push(r.createElement(k.D,{key:"bits",icon:k.Db.Bits,ariaLabel:Object(s.d)("Bits","ChatInput"),type:k.F.Secondary,onClick:this.onBitsIconClick,"data-a-target":"bits-button"})),this.state.showEmotePickerButton&&n.push(r.createElement(Me.b,{key:"emote-picker",onClick:this.onEmotePickerToggle,isActive:this.state.showCard===ke.Emotes}));var i=null;this.state.hasInteractedOrPageload&&(i=r.createElement(Me.c,{channelOwnerID:this.props.channelID,emotePickerSource:Le.a.Chat,onClickEmote:this.onClickEmote,onLoad:this.onEmotePickerDataLoaded,toggleVisibility:this.onEmotePickerToggle,visible:this.state.showCard===ke.Emotes}));var a=null;this.state.hasInteractedOrPageload&&this.props.bitsConfig&&(a=r.createElement(B.a,{bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,channelLogin:this.props.channelLogin,currentCheers:this.state.messageCheers,isSending:this.state.isSendingBits,isStaff:this.props.isStaff,isAnonymous:this.state.isAnonymousCheer,onCancelSend:this.cancelDelayedSend,onClickCheermote:this.onClickEmote,onConfirmSend:this.confirmDelayedSend,onUserClose:this.onBitsClose,trackBitsCardInteraction:this.trackBitsCardInteraction,visible:this.state.showCard===ke.Bits,cheerMessageAutoModded:this.props.isTextInputDisabled,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,chatMessage:this.state.value,onCheerInvalid:this.onCheerInvalid,onAnonymousToggle:this.onAnonymousCheerToggle}));var o=null;this.props.data&&this.props.data.channel&&this.props.data.channel.cheer&&this.props.data.channel.cheer.hashtags&&this.state.messageCheers.length>0&&(o=r.createElement(H,{hashTags:this.props.data.channel.cheer.hashtags}));var l=null;this.props.moderatedMessageParts&&this.props.moderatedMessageParts.length>0&&(l=r.createElement(he,{moderatedReason:this.props.moderatedReason,moderatedMessageParts:this.props.moderatedMessageParts}));var c=this.state.chatRestrictedReason,d=null;if(this.props.slowMode&&(t=Object(s.d)("Send a message (chat is in slow mode)","ChatInput")),c===g.t.SLOW_MODE){var u=Object(I.b)(this.state.slowModeSecondsRemaining,I.a.HumanizedShort);d=Object(s.d)("You can chat in {duration}",{duration:u},"ChatInput")}var m=!(this.isTypingCommand()||this.isTypingCheer())&&null!==c,p=null;return this.state.showAuthContextBalloon&&(p=r.createElement(k.x,{show:this.state.showAuthContextBalloon,direction:k.y.TopLeft,size:k.z.Medium},r.createElement(w.a,{onClickOut:this.handleAuthContextBalloonClose},r.createElement(A.a,{source:M.a.Chat,targetUserDisplayName:this.props.channelDisplayName,onCloseModal:this.clearPendingMessage,onCloseBalloon:this.handleAuthContextBalloonClose})))),r.createElement(k.fb,{className:"chat-input",display:this.props.hidden?k.Da.Hide:k.Da.Block,padding:{x:2,bottom:2}},l,r.createElement(ce,{channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,closeBalloon:this.onChatRestrictionBalloonClose,openBalloon:this.onChatRestrictionBalloonOpen,showBalloon:this.state.showCard===ke.ChatRestriction}),r.createElement(w.a,{onClickOut:this.onClickOut},r.createElement(k.Ya,{display:this.props.moderatedMessageParts?k.Da.Hide:k.Da.Block,position:k.tb.Relative,zIndex:k.xc.Default},r.createElement("div",{onMouseEnter:this.onMouseEnterInput},i,a,p,r.createElement(U.b,{componentType:U.a.TextArea,suggestionSource:U.c.Chat,onValueUpdate:this.onMessageValueUpdate,onFocus:this.onInputFocus,onKeyDown:this.onKeyDown,componentRefDelegate:this.setChatInputRef,refDelegate:this.setAutocompleteInputRef,paddingRight:30*n.length,placeholder:t,noResize:!0,"data-a-target":"chat-input","data-test-selector":"chat-input",disabled:this.state.isSendingBits||this.props.isTextInputDisabled,containerElement:this.props.containerElement},r.createElement(U.d,{emotes:this.props.emotes}),r.createElement(ee,null),o),this.renderSlowModeProgressBar(),r.createElement(k.fb,{position:k.tb.Absolute,attachRight:!0,attachTop:!0},n))),this.renderButtonContainer(m,d)))},t.prototype.renderButtonContainer=function(e,t){return void 0===e&&(e=!1),r.createElement(k.fb,{className:"chat-input__buttons-container",display:k.Da.Flex,justifyContent:k.eb.Between,margin:{top:1}},r.createElement(k.fb,{display:k.Da.Flex,flexDirection:k.Ga.Row},r.createElement(k.fb,{position:k.tb.Relative},r.createElement(Y.a,{onToggle:this.onChatSettingsToggle,onShowChatRules:this.props.onShowChatRules,channelLogin:this.props.channelLogin,isHostMode:this.props.isHostMode,authToken:this.props.authToken,isCurrentUserModerator:this.props.isCurrentUserModerator,onChatCommand:this.onChatCommand,isPopout:this.props.isPopout,isEmbedded:this.props.isEmbedded,channelID:this.props.channelID,containerElement:this.props.containerElement}),this.renderChatCogTooltips()),r.createElement(k.D,{ariaLabel:Object(s.d)("Users in Chat","ChatInput"),"data-a-target":"chat-viewer-list","data-test-selector":"chat-viewer-list",icon:k.Db.ViewerList,onClick:this.onShowViewersList})),r.createElement(k.fb,{display:k.Da.Flex,alignItems:k.i.Center,alignContent:k.h.Center,flexDirection:k.Ga.Row},r.createElement(k.fb,{margin:{right:1}},r.createElement(k.Ca,{color:k.R.Alt2},t)),this.renderSendButton(e)))},t.prototype.renderSendButton=function(e){var t;return void 0===e&&(e=!1),t=this.state.value&&null!==Object(we.p)(this.state.value)?Object(s.d)("Whisper","ChatInput"):Object(s.d)("Chat","ChatInput"),r.createElement(k.C,{onClick:this.onMessageSend,"data-a-target":"chat-send-button","data-test-selector":"chat-send-button",disabled:this.state.isSendingBits||this.props.isTextInputDisabled||e},t)},t.prototype.renderChatCogTooltips=function(){return this.state.showAutomodSettingsTooltip?r.createElement(de,null):null},t.prototype.sendRegularMessage=function(){var e=this;if(this.props.onSendMessage){var t=Object(we.m)(this.state.value);if(t&&function(){var e="test"===s.q.experiments.getAndTrackAssignment(be.b.RaidUpsell),t=s.n.get(ve,!1);return e&&!t}())return this.setState({showCard:ke.None},function(){e.trackChatEvent(e.props.emotePickerSessionID),e.autocompleteInputRef&&e.autocompleteInputRef.setValue(""),e.props.openRaidUpsellFromHost(t.recipientLogin)});this.props.onSendMessage(this.state.value)&&(this.trackChatEvent(this.props.emotePickerSessionID),this.trackMentions(),this.autocompleteInputRef&&this.autocompleteInputRef.setValue(""),this.setState({showCard:ke.None}))}},t.prototype.handleLogin=function(){var e=Object(Q.b)(),t={onClose:this.clearPendingMessage,targetChannel:this.props.channelDisplayName};e!==Q.a.Balloon?(e===Q.a.TwoStep?t.modalType=j.e.TwoStep:e===Q.a.Split&&(t.modalType=j.e.Combined),this.login(t)):this.state.showAuthContextBalloon||(this.storePendingMessage(this.state.value),this.setState({showAuthContextBalloon:!0}),Object(j.o)({page:j.e.Bubble,source:M.a.Chat}))},t.prototype.login=function(e){Object(Q.b)()!==Q.a.Control&&this.storePendingMessage(this.state.value),this.props.login(e)},t.prototype.trackChatEvent=function(e){Object(Oe.b)({channelID:this.props.channelID||"",channelLogin:this.props.channelLogin,emotePickerSessionID:e,isHostMode:this.props.isHostMode,player:this.props.isPopout?De.a.Embed:De.a.Web,subOnlyMode:this.props.subsOnlyMode,viewerContext:this.props.viewerContext})},t.prototype.trackMentions=function(){if(this.state.value&&this.props.sessionUser)for(var e=0,t=Object(T.a)(this.state.value,{mentions:{senderLogin:this.props.sessionUser.login,sessionUser:this.props.sessionUser}});e<t.length;e++){var n=t[e];n.type===_e.a.Mention&&n.content.currentUserMentionRelation!==Ne.a.Recipient&&Object(Ie.a)({channelLogin:this.props.channelLogin,isHostMode:this.props.isHostMode,mentionedUserDisplayName:n.content.recipient,userLogin:this.props.sessionUser.login})}else s.k.warn("[ChatInput] trackMentions was called in a nonsensical state.")},t.prototype.storePendingMessage=function(e){s.n.set("pending_chat_message",e)},t.prototype.getPendingMessage=function(){return s.n.get("pending_chat_message","")},t.prototype.clearPendingMessage=function(){s.n.set("pending_chat_message","")},t.prototype.restorePendingMessage=function(){var e=this.getPendingMessage();e&&this.autocompleteInputRef&&(this.autocompleteInputRef.setValue(e),this.clearPendingMessage())},t}(r.Component);var Be,Pe=Object(_.compose)(Object(c.a)(Ae,{name:"sendCheer"}),Object(c.a)(Fe,{skip:function(e){return!e.firstPageLoaded}}),ne.a,Object(xe.withLatencyTracking)("ChatInput",{autoReportInteractive:!0}),Object(D.connect)(function(e){return{emotePickerSessionID:e.chat.emotePickerSessionID,sessionUser:Object(F.e)(e)}},function(e){return Object(o.bindActionCreators)({login:function(e){return Object(R.e)(M.a.Chat,e)},updateRenderSentChatMessageEvent:K.W},e)}),Object(te.b)(function(e){return{slowMode:e.slowMode,slowModeDuration:e.slowModeDuration,subsOnlyMode:e.subsOnlyMode}}),Object(ue.b)(function(e){return e}))(Ue),Ve=n("r2XO"),He=(n("9Rmp"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickConfirm=function(){t.markRoomSeen(),t.props.onCloseChatRules()},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement(k.fb,{className:"chat-rules",position:k.tb.Relative},r.createElement(k.Ob,{border:!0,background:k.u.Base,margin:{bottom:1}},r.createElement(k.fb,{padding:1},r.createElement(k.fb,{margin:{bottom:1}},r.createElement(k.Ca,{type:k.gc.H6},Object(s.d)("Chat Rules:","ChatRules"))),r.createElement(k.fb,null,r.createElement("ul",null,this.props.chatRules.map(function(e,t){return r.createElement("li",{key:t},e)}))),r.createElement(k.fb,{margin:{top:1},display:k.Da.Flex,justifyContent:k.eb.Center},r.createElement(k.C,{size:k.G.Small,onClick:this.onClickConfirm},Object(s.d)("Ok, got it!","ChatRules"))))))},t.prototype.markRoomSeen=function(){var e=s.n.get("chat_rules_shown",{});e[this.props.channelLogin]=!0,s.n.set("chat_rules_shown",e)},t}(r.Component)),Ge=n("8in3"),We=n("Tznh"),qe="chatFilterOnboardingDismissed";!function(e){e.CloseButton="filter_onboarding_close",e.SettingsLink="filter_onboarding_settings"}(Be||(Be={}));var ze=function(e){function t(t){var n=e.call(this,t)||this;return n.hasTrackedImpression=!1,n.onClose=function(){n.dismiss(),n.trackInteraction("Cancel")},n.onLinkClick=function(){n.props.showChatFilterSettings(We.c.Onboarding),n.dismiss(),n.trackInteraction("Filter Messages")},n.state={dismissed:s.n.get(qe,!1)},n}return i.__extends(t,e),t.prototype.render=function(){return this.props.chatFilterExperimentMembership!==We.b.OptIn?null:this.state.dismissed||this.props.viewerChatFilterEnabled?null:(this.hasTrackedImpression||this.trackImpression(),r.createElement(k.Ob,{background:k.u.Base,borderRadius:k.A.Medium,elevation:3,margin:{x:2,bottom:1},padding:1,position:k.tb.Relative},r.createElement(k.fb,{attachRight:!0,attachTop:!0,margin:.5,position:k.tb.Absolute},r.createElement(k.D,{icon:k.Db.Close,onClick:this.onClose,"data-test-selector":Be.CloseButton})),r.createElement(k.Ca,{bold:!0,fontSize:k.Ia.Size4,type:k.gc.Span},Object(s.d)("NSFW Chat Filters","ViewerChatFilterOnboarding")),r.createElement(k.Ob,{display:k.Da.InlineBlock,fontSize:k.Ia.Size5,margin:{left:.5}},r.createElement(k.qb,{label:Object(s.d)("NEW","ViewerChatFilterOnboarding"),type:k.rb.Brand})),r.createElement(k.Ca,{color:k.R.Alt2,fontSize:k.Ia.Size5},Object(s.d)("Automagically hide words and phrases in chat you don't want to see.","ViewerChatFilterOnboarding")),r.createElement(k.fb,{margin:{right:2},textAlign:k.cc.Right},r.createElement(k.Aa,{onClick:this.onLinkClick,"data-test-selector":Be.SettingsLink},Object(s.d)("Get Started","ViewerChatFilterOnboarding")))))},t.prototype.dismiss=function(){this.setState({dismissed:!0}),s.n.set(qe,!0)},t.prototype.trackImpression=function(){s.p.track(ie.SpadeEventType.ChatFilterOnboardingImpression,{channel_id:this.props.channelID||"",channel:this.props.channelLogin}),this.hasTrackedImpression=!0},t.prototype.trackInteraction=function(e){s.p.track(ie.SpadeEventType.ChatFilterOnboardingInteraction,{action:e,channel_id:this.props.channelID||"",channel:this.props.channelLogin})},t}(r.Component);var Qe=Object(o.compose)(Object(D.connect)(function(e){return{viewerChatFilterEnabled:e.chat.viewerChatFilterEnabled}}),Object(We.d)(function(e){return e}))(ze),Ye=n("Y3y8"),Ke=(n("7NxT"),n("fxMP")),$e={AUTOMOD:"AutoMod",EMOTE:"Emote",MENTION:"User",CHEERMOTE:"CheermoteToken"},Xe=n("j+2s");n("kPCN");n.d(t,"a",function(){return Je}),n.d(t,"b",function(){return rt});var Je="chat-room-header-label",Ze="chat_rules_shown",et=s.k.withCategory("chat-room"),tt=l.a.wrap(function(){return n.e(227).then(n.bind(null,"A39y"))},"ChatViewers"),nt=l.a.wrap(function(){return n.e(226).then(n.bind(null,"Y9qK"))},"NewChatterRitual",{failSilently:!0,placeholder:null}),it=function(e){function t(t){var n=e.call(this,t)||this;n.hasAcceptedModerationConfirmation=!1,n.closeViewersList=function(){n.setState({showViewersList:!1})},n.showViewersList=function(){n.props.closeRoomPicker&&n.props.closeRoomPicker(),n.setState({showViewersList:!0})},n.confirmModerationAction=function(){return!(n.props.isEmbedded&&!n.hasAcceptedModerationConfirmation)||(n.hasAcceptedModerationConfirmation=window.confirm(Object(s.d)("Do you want to enable the ability to timeout and ban on embedded version of Twitch Chat? This setting will persist until you refresh the page.","ChatRoom")),n.hasAcceptedModerationConfirmation)},n.onChatInputFocus=function(){var e=s.n.get(Ze,{});n.props.chatRules&&n.props.chatRules.length>0&&!e[n.props.channelLogin]&&n.onShowChatRules()},n.onShowChatRules=function(){n.props.authToken&&n.props.onShowChatRules()},n.setChatListElement=function(e){n.setState({chatListElement:e})},n.shouldHideChatInput=function(){return n.state.showViewersList},n.openRaidUpsellFromHost=function(e){return n.closeRaidUpsell(function(){n.setState({raidUpsellTarget:e})})},n.closeRaidUpsell=function(e){return n.setState({raidUpsellTarget:null},function(){e&&e()})},n.onSendCheerError=function(e){switch(e.code){case g.Na.AUTO_MOD_MESSAGE:n.setState({moderatedReason:le.AUTOMOD,forceSendCheer:!1,moderatedMessageParts:Object(Ke.g)(e.messageContent.fragments,!1)});break;case g.Na.INVALID_ANONYMOUS_MESSAGE:var t=e.messageContent.fragments.filter(function(e){return e.content&&e.content.__typename===$e.CHEERMOTE}),i=Object(Ke.g)(t,!1,n.props.currentUserLogin,n.props.bitsConfig);n.setState({moderatedReason:le.ANONYMOUS_CHEERING,forceSendCheer:!1,anonymousCheerMessageParts:i,moderatedMessageParts:[Object(p.a)(e.messageContent.text)]});break;default:n.setState({bitsSendErrorCode:e.code,bitsSendHasError:!0})}},n.clearBitsSendError=function(){n.setState({bitsSendErrorCode:g.Na.UNKNOWN,bitsSendHasError:!1})},n.clearCheerErrorPrompts=function(){n.setState({forceSendCheer:!1,moderatedReason:null,moderatedMessageParts:null,anonymousCheerMessageParts:null})},n.onBitsAutoModCheerAnyway=function(){n.setState({moderatedReason:null,forceSendCheer:!0})},n.onInvalidAnonymousCheerPromptCheerAnyway=function(){n.setState({moderatedReason:null,forceSendCheer:!0})};var i=new f.c([],[],n.props.channelLogin);return n.state={showViewersList:!1,raidUpsellTarget:null,badgeSets:i,forceSendCheer:!1,bitsSendErrorCode:g.Na.UNKNOWN,bitsSendHasError:!1,moderatedMessageParts:null,anonymousCheerMessageParts:null},n}return i.__extends(t,e),t.prototype.componentDidUpdate=function(e){this.props.channelLogin!==e.channelLogin&&this.props.onCloseChatRules()},t.prototype.componentWillUnmount=function(){this.props.onCloseChatRules()},t.prototype.render=function(){if(this.props.isBackground)return null;if(this.props.isHidden&&!this.props.isPopout)return r.createElement(k.Ob,{alignItems:k.i.Center,borderLeft:!0,display:k.Da.Flex,flexDirection:k.Ga.Column,fullHeight:!0,fullWidth:!0,justifyContent:k.eb.Center,color:k.R.Base,position:k.tb.Relative},r.createElement(k.fb,{margin:{bottom:1}},r.createElement(k.Ca,{fontSize:k.Ia.Size5},Object(s.d)("Chat is hidden.","ChatRoom"))),r.createElement(k.C,{onClick:this.props.onChatUnhide,"data-a-target":"show-chat-button","data-test-selector":"show-chat-button"},Object(s.d)("Show Chat","ChatRoom")));var e=this.props.bitsConfig&&this.props.firstPageLoaded&&this.props.channelID&&r.createElement(E.a,{bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,userID:this.props.userID}),t=this.state.showViewersList&&r.createElement(k.Ob,{attachBottom:!0,attachLeft:!0,attachRight:!0,attachTop:!0,background:k.u.Alt2,position:k.tb.Absolute,zIndex:k.xc.Default},r.createElement(k.fb,{padding:{y:1}},r.createElement(k.fb,{position:k.tb.Absolute,attachLeft:!0,margin:{left:1}},r.createElement(k.D,{icon:k.Db.Close,ariaLabel:Object(s.d)("Close","ChatRoom"),onClick:this.closeViewersList,"data-test-selector":"close-viewer-list"}))),r.createElement(tt,{channelLogin:this.props.channelLogin,closeViewersList:this.closeViewersList,isCurrentUserBanned:this.props.currentUserBannedStatusData&&this.props.currentUserBannedStatusData.channel&&this.props.currentUserBannedStatusData.channel.self&&this.props.currentUserBannedStatusData.channel.self.banStatus&&this.props.currentUserBannedStatusData.channel.self.banStatus.isPermanent||!1,"data-test-selector":"chat-viewers"})),n=!!this.props.authToken&&!this.props.isEmbedded,i=null;return this.props.isChatRulesOpen&&this.props.chatRules&&this.props.chatRules.length&&(i=r.createElement(k.fb,{padding:{x:2}},r.createElement(He,{chatRules:this.props.chatRules,channelLogin:this.props.channelLogin,onCloseChatRules:this.props.onCloseChatRules}))),r.createElement(k.Xa,{"data-test-selector":"chat-room-component-layout","data-a-target":this.props.theme===m.a.Dark?"chat-theme-dark":"chat-theme-light",flexShrink:1,flexGrow:1,display:k.Da.Flex,flexDirection:k.Ga.Column,fullWidth:!0},r.createElement("section",{className:"chat-room",role:"complementary","aria-labelledby":Je},r.createElement(k.Ob,{borderLeft:!this.props.isEmbedded,display:k.Da.Flex,flexDirection:k.Ga.Column,flexWrap:k.Ha.NoWrap,position:k.tb.Relative,flexGrow:1,fullHeight:!0,color:k.R.Base,className:"chat-room__content"},this.props.chatRoomHeader,e,r.createElement(Ve.a,{badgeSets:this.state.badgeSets,channelID:this.props.channelID,channelLogin:this.props.channelLogin,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isEmbedded:this.props.isEmbedded,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isStaff,onPushMessage:this.props.onPushMessage,containerRef:this.setChatListElement,confirmModerationAction:this.confirmModerationAction,theme:this.props.theme}),r.createElement(k.fb,{className:"chat-room__notifications",position:k.tb.Absolute,zIndex:k.xc.Default,fullWidth:!0},this.props.children),i,t,this.state.raidUpsellTarget&&r.createElement(Ee,{send:this.props.onSendMessage,targetChannelLogin:this.state.raidUpsellTarget,sourceChannelLogin:this.props.channelLogin,closeRaidUpsell:this.closeRaidUpsell}),this.props.firstPageLoaded&&r.createElement(Qe,{channelID:this.props.channelID,channelLogin:this.props.channelLogin}),this.props.firstPageLoaded&&this.props.channelID&&r.createElement(nt,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,isEmbedded:this.props.isEmbedded,isHostMode:this.props.isHostMode,isPopout:this.props.isPopout,onPushMessage:this.props.onPushMessage,onSendMessage:this.props.onSendMessage}),this.state.moderatedReason===le.AUTOMOD&&r.createElement(S,{badgeSets:this.state.badgeSets,onEditCheer:this.clearCheerErrorPrompts,onCheerAnyway:this.onBitsAutoModCheerAnyway}),this.state.moderatedReason===le.ANONYMOUS_CHEERING&&r.createElement(C,{messageParts:this.state.anonymousCheerMessageParts||[],badgeSets:this.state.badgeSets,onEditCheer:this.clearCheerErrorPrompts,onCheerAnyway:this.onInvalidAnonymousCheerPromptCheerAnyway}),r.createElement(Pe,{authToken:this.props.authToken,bitsConfig:n?this.props.bitsConfig:void 0,channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,emotes:this.props.emotes,emoteMap:this.props.emoteMap,firstPageLoaded:this.props.firstPageLoaded,hidden:this.shouldHideChatInput(),isCurrentUserModerator:this.props.isCurrentUserModerator,isEmbedded:this.props.isEmbedded,isHostMode:this.props.isHostMode,isPopout:this.props.isPopout,isStaff:this.props.isStaff,onChatCommand:this.props.onSendMessage,onShowChatRules:this.props.authToken&&this.props.chatRules&&this.props.chatRules.length?this.onShowChatRules:void 0,userBadges:this.props.userBadges,showViewersList:this.showViewersList,onSendMessage:this.props.onSendMessage,onInputFocus:this.onChatInputFocus,containerElement:this.state.chatListElement,openRaidUpsellFromHost:this.openRaidUpsellFromHost,onSendCheerError:this.onSendCheerError,onSendCheerSuccess:this.clearCheerErrorPrompts,isTextInputDisabled:!!this.state.moderatedReason,forceSendCheer:this.state.forceSendCheer,moderatedReason:this.state.moderatedReason,moderatedMessageParts:this.state.moderatedMessageParts,bitsSendErrorCode:this.state.bitsSendErrorCode,bitsSendHasError:this.state.bitsSendHasError,clearBitsSendError:this.clearBitsSendError}),r.createElement(k.fb,{className:"chat-room__viewer-card",fullHeight:!0,fullWidth:!0,position:k.tb.Absolute,"data-a-target":"chat-user-card"},r.createElement(Ge.a,{isPopout:this.props.isPopout,isEmbedded:this.props.isEmbedded,confirmModerationAction:this.confirmModerationAction,onSendMessage:this.props.onSendMessage,channelID:this.props.channelID,channelLogin:this.props.channelLogin,isModerator:!!this.props.isCurrentUserModerator&&this.props.isCurrentUserModerator,isOwner:this.props.isOwnChannel})))))},t.prototype.componentWillReceiveProps=function(e){if(e.data&&e.data.badges&&e.data.user&&e.data.user.broadcastBadges&&this.setState({badgeSets:new f.c(e.data.badges,e.data.user.broadcastBadges,e.channelLogin)}),e.data&&e.data.user&&e.data.user.self&&e.data.user.self.displayBadges){var t={};e.data.user.self.displayBadges.forEach(function(e){t[e.setID]=e.version}),s.q.tmi.client.updateChannelBadges(e.channelLogin,t)}},t}(r.Component),rt=Object(o.compose)(Object(c.a)(Xe,{skip:function(e){return!e.firstPageLoaded},options:function(e){return{name:"data",variables:{channelLogin:e.channelLogin}}}}),Object(Ye.a)(),Object(d.a)(function(e){return{query:Xe,variables:{channelLogin:e.channelLogin},topic:Object(h.E)(e.userID),type:u.PubsubMessageType.UserBitsBadgeUpdate,skip:!e.firstPageLoaded||!e.userID,mutator:function(t,n){if(et.debug("Received bits-user-update-v1 pubsub update",{data:n,event:t}),!n.badges||t.message_type===N.b.Balance||null===t.data.newest_version||t.data.channel_id!==e.channelID)return n;var i=n.badges.find(function(e){return e.setID===t.data.set_id&&e.version===t.data.newest_version});return void 0!==i&&n.user.self&&n.user.self.displayBadges&&(n.user.self.displayBadges=n.user.self.displayBadges.map(function(e){return e.setID===i.setID&&e.version!==i.version?i:e}),(!n.user.self.selectedBadge||i.setID===N.a.Bits&&n.user.self.selectedBadge.setID===N.a.Bits)&&(n.user.self.selectedBadge=i),n.user.self.selectedBadge&&(i.setID!==N.a.Leaderboard||n.user.self.selectedBadge.setID!==N.a.Bits&&n.user.self.selectedBadge.setID!==N.a.Leaderboard)||(n.user.self.selectedBadge=i)),n}}}),a.a)(it)},BKFw:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var i="BROADCAST_TYPE_ALL",r="broadcaster_id",a="BROADCAST_LENGTH_ANY"},BOil:function(e,t,n){},"BQs+":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return u});var i,r=n("mrSG"),a=n("/7QA"),o=n("2xye"),s=n("I6K6"),l=n("bTcf"),c=n("L7EG");function d(e,t,n){return r.__awaiter(this,void 0,void 0,function(){var i,l,u,m;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,n.query({query:c,variables:{videoID:e.id}})];case 1:return i=r.sent().data,l=function(e,t){return{id:e.id,owner:t.owner,broadcastType:t.broadcastType,game:t.game}}(e,i.video),u={channel:l.owner?l.owner.login:null,channel_id:Number(e.owner.id),game:l.game?l.game.name:null,partner:!!l.owner&&l.owner.roles.isPartner,location:t.location,share_context:t.collectionID?o.ShareItemContext.Collection:null,share_platform:t.platform,shared_item_id:t.collectionID?t.collectionID:l.id,shared_item_type:t.collectionID?o.ShareItemType.Collection:Object(s.a)(l.broadcastType),shared_item_url:t.shareURL,source_item_id:l.id,source_item_type:Object(s.a)(l.broadcastType)},a.q.tracking.track(o.SpadeEventType.ShareItem,u),[3,3];case 2:return m=r.sent(),a.k.error(m.toString(),d.name),[3,3];case 3:return[2]}})})}function u(e,t,n){return r.__awaiter(this,void 0,void 0,function(){var i,s,c;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,n.query({query:l,variables:{creatorID:e.owner.id}})];case 1:return i=r.sent().data,s={channel:i.user?i.user.login:null,channel_id:Number(e.owner.id),game:null,partner:!!i.user&&i.user.roles.isPartner,location:t.location,share_context:null,share_platform:t.platform,shared_item_id:e.id,shared_item_type:o.ShareItemType.Collection,shared_item_url:t.shareURL,source_item_id:e.id,source_item_type:o.SourceItemType.Collection},a.q.tracking.track(o.SpadeEventType.ShareItem,s),[3,3];case 2:return c=r.sent(),a.k.error(c.toString(),u.name),[3,3];case 3:return[2]}})})}!function(e){e.Copy="link",e.Embed="option_embed",e.Facebook="fb",e.Link="option_link",e.Reddit="reddit",e.Twitter="twitter",e.Unknown="",e.VKontakte="vk",e.Download="download"}(i||(i={}))},BRlh:function(e,t,n){},BZOq:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var i=n("H/lO"),r=n("BKFw");function a(e){return e.map(function(e){return{title:e.title||"",thumbnail:e.thumbnail||"",thumbnailAltText:e.thumbnailAltText||"",linkTo:e.linkTo||"",login:e.login||"",name:e.name||"",createdAt:e.createdAt||0,length:e.length||0,id:e.id||""}})}function o(e){var t={},n=[];return"broadcastType"in e&&e.broadcastType!==r.c&&void 0!==e.broadcastType&&n.push(e.broadcastType),"broadcasterId"in e&&n.push(r.a+":"+e.broadcasterId),t.facetFilters=function(e){return e.join(",")}(n),"broadcastLength"in e&&e.broadcastLength!==r.b&&void 0!==e.broadcastLength&&(t.numericFilters=[e.broadcastLength]),{typeID:i.a.Videos,params:t}}},BbLt:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"campaignProperties"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"domains"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"85"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"113"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewersCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"lastBroadcast"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"85"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"113"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"follower"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chanlets"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelChanlet"},directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"hostingChannel"},directives:[]}]}}],loc:{start:0,end:613}};i.loc.source={body:'#import "twilight/features/channel/queries/hosting-channel.gql"\n#import "twilight/features/channel/queries/channel-chanlet.gql"\nfragment channel on User {\nid\nbroadcastSettings {\nid\nlanguage\ngame {\nid\nname\n}\ntitle\n}\ncampaignProperties {\ndomains\n}\ndisplayName\nlogin\nprofileImageURL(width: 50)\nstream {\nid\ngame {\nid\nname\nboxArtURL(width: 85 height: 113)\n}\ntitle\ntype\nviewersCount\n}\nlastBroadcast {\nid\ngame {\nid\nname\nboxArtURL(width: 85 height: 113)\n}\ntitle\n}\nself {\nfollower {\nnode {\nid\n}\n}\nsubscriptionBenefit {\nid\n}\n}\nchannel {\nid\nchanlets @include(if: $includeChanlets) {\n...channelChanlet\n}\n}\n...hostingChannel\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}i.definitions=i.definitions.concat(a(n("GvwK").definitions)),i.definitions=i.definitions.concat(a(n("ZGqV").definitions)),e.exports=i},BhFH:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("mrSG"),r=n("yR8l"),a=n("8jSG"),o=n("cMjZ"),s=n("kSkr");function l(){var e=this;return Object(r.a)(s,{props:function(t){return{blockUserMutation:function(n,r,s,l){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return t.mutate?[4,t.mutate({variables:{input:{targetUserID:n,sourceContext:s,reason:r}},optimisticResponse:{blockUser:{__typename:"BlockUserPayload",targetUser:{__typename:"User",id:n}}},update:function(e){var t=e.readFragment({id:Object(o.a)(l),fragment:a});t&&(t.blockedUsers.push({id:n,__typename:"User"}),e.writeFragment({id:Object(o.a)(l),fragment:a,data:t}))}})]:[3,2];case 1:return e.sent(),[3,3];case 2:throw new Error("blockUserMutation is not ready");case 3:return[2]}})})}}}})}},CA5B:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VIPs"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"vips"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:107}};n.loc.source={body:"query VIPs($login: String!) {\nuser(login: $login) {\nid\nvips(first: 100) {\nedges {\nnode {\nid\nlogin\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"CFw/":function(e,t,n){e.exports=n.p+"assets/notification_upsell_arrow-c9d4ff7c87444b45d813.png"},CJLt:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChat_TrackingContext_VideoAndCurrentUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:197}};n.loc.source={body:"query VideoChat_TrackingContext_VideoAndCurrentUser($videoID: ID) {\nvideo(id: $videoID) {\nid\nbroadcastType\ntitle\ngame {\nid\nname\n}\nowner {\nid\nlogin\nroles {\nisPartner\n}\n}\n}\ncurrentUser {\nid\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},CK1f:function(e,t,n){},CYfc:function(e,t,n){"use strict";var i=n("vhpE");n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b})},CbHG:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatFilterContextProvider_User"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:69}};n.loc.source={body:"query ChatFilterContextProvider_User {\ncurrentUser {\nid\ncreatedAt\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"CpU+":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),r=n("yR8l"),a=n("JiJH");function o(){var e=this;return Object(r.a)(a,{props:function(t){return{unVIPUserMutation:function(n){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return t.mutate&&t.ownProps.channelID?[4,t.mutate({variables:{input:{channelID:t.ownProps.channelID,revokeeLogin:n}}})]:[2];case 1:return[2,e.sent().data]}})})}}}})}},D91L:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("oJmH"),o=n("/MKj"),s=n("/7QA"),l=n("gcd7"),c=n("BhFH"),d=n("iS14"),u=n("DMoW"),m=n("TvOw"),p=n("kRBY"),h=n("NNSq"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getInvalidUserMessage=function(){return Object(s.d)("No user matching that login.","IgnoreCommandHandler")},t.blockUser=function(e){return e?e===t.props.currentUserLogin?{deferred:Promise.resolve({notice:Object(s.d)("You cannot ignore yourself.","IgnoreCommandHandler")})}:{deferred:Object(h.a)(e).then(function(e){if(!e)return{notice:t.getInvalidUserMessage()};try{t.props.blockUserMutation(e,m.a.Other,u.k.CHAT,t.props.user)}catch(e){return{notice:Object(s.d)("Unable to ignore user","IgnoreCommandHandler")}}return{notice:Object(s.d)("User successfully ignored","IgnoreCommandHandler")}})}:{deferred:Promise.resolve({notice:Object(s.d)("Please specify a user to ignore","IgnoreCommandHandler")})}},t.unblockUser=function(e){return e?e===t.props.currentUserLogin?{deferred:Promise.resolve({notice:Object(s.d)("You cannot unignore yourself.","IgnoreCommandHandler")})}:{deferred:Object(h.a)(e).then(function(e){if(!e)return{notice:t.getInvalidUserMessage()};try{t.props.unblockUserMutation(e,t.props.user)}catch(e){return{notice:Object(s.d)("Unable to unignore user","IgnoreCommandHandler")}}return{notice:Object(s.d)("User successfully unignored","IgnoreCommandHandler")}})}:{deferred:Promise.resolve({notice:Object(s.d)("Please specify a user to unignore","IgnoreCommandHandler")})}},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement("span",{style:{display:"none"}},r.createElement(l.a,{command:"ignore",handler:this.blockUser,channelLogin:this.props.channelLogin}),r.createElement(l.a,{command:"unignore",handler:this.unblockUser,channelLogin:this.props.channelLogin}))},t}(r.Component);var f=Object(a.compose)(Object(o.connect)(function(e){return{user:Object(p.e)(e)}}),Object(d.a)(),Object(c.a)())(g);n.d(t,"a",function(){return f})},"DB+C":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmotePicker_EmotePicker_UserSubscriptionProducts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelOwnerID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelOwnerID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"campaignProperties"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"domains"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"28"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"platform"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:393}};n.loc.source={body:"query EmotePicker_EmotePicker_UserSubscriptionProducts($channelOwnerID: ID!) {\nuser(id: $channelOwnerID) {\nid\nlogin\ncampaignProperties {\ndomains\n}\ndisplayName\nprofileImageURL(width: 28)\nsubscriptionProducts {\nid\nname\ntier\nurl\nemotes {\nid\nsetID\ntoken\n}\nprice\nemoteSetID\n}\nself {\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\nmonths\n}\nsubscriptionBenefit {\nid\nplatform\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},DJtx:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Clips_ModalDelete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"curator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"thumbnailURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:143}};n.loc.source={body:"query Clips_ModalDelete($slug: ID!) {\nclip(slug: $slug) {\nid\nbroadcaster {\nid\n}\ncurator {\nid\nlogin\n}\nthumbnailURL\ncreatedAt\nviewCount\ntitle\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},DLhE:function(e,t,n){"use strict";var i=n("mrSG"),r=n("G1cX"),a=n("/7QA"),o=n("f00E"),s=n("+pBb"),l=n("F6GT"),c=n("2xye"),d=n("VJH5");function u(e,t){a.p.track(c.SpadeEventType.ChatFilterSettingsChanged,{chat_filter_is_active:e.viewerChatFilterEnabled,from_menu:t,toggle_aggressive_language:e.viewerChatFilterSettings[d.a.Aggressive],toggle_explicit_language:e.viewerChatFilterSettings[d.a.Sexual],toggle_identity_language:e.viewerChatFilterSettings[d.a.Identity],toggle_profane_language:e.viewerChatFilterSettings[d.a.Profanity]})}function m(e){return e.chat.renderSent}function p(e,t){var n=[];if(e.chat&&e.chat.commandHandlers)for(var i in e.chat.commandHandlers[t])e.chat.commandHandlers[t][i]&&n.push(i);return n}function h(e){return-1===Object.values(e).indexOf(!0)}function g(e){Object(l.b)("viewerChatFilterEnabled",e.viewerChatFilterEnabled),Object(l.b)("viewerChatFilterSettings",e.viewerChatFilterSettings)}n.d(t,"b",function(){return m}),n.d(t,"a",function(){return p}),a.q.store.registerReducer("chat",function(e,t){var n,a;switch(void 0===e&&(e=function(){var e=Object(l.a)();return i.__assign({},e,{commandHandlers:{},emoteSets:[],emotePickerSessionID:null,isChatRulesOpen:!1,isHidden:!1,renderSent:null,unhideIgnoredUsers:[]})}()),t.type){case s.d:return i.__assign({},e,{isHidden:!0});case s.e:return i.__assign({},e,{isHidden:!1});case s.f:return i.__assign({},e,{isChatRulesOpen:!1});case s.i:return i.__assign({},e,{emoteSets:t.emoteSets});case s.g:return i.__assign({},e,{emotePickerSessionID:null});case s.h:return i.__assign({},e,{emotePickerSessionID:Object(o.b)()});case s.j:return i.__assign({},e,{lastUsedFollowerDurations:i.__assign({},e.lastUsedFollowerDurations,(n={},n[t.channelLogin]=t.duration,n))});case s.q:return i.__assign({},e,{isChatRulesOpen:!0});case s.b:return i.__assign({},e,{showAutoModActions:!1});case s.c:return i.__assign({},e,{showAutoModActions:!0});case s.k:return i.__assign({},e,{showModerationActions:!1});case s.l:return i.__assign({},e,{showModerationActions:!0});case s.m:return i.__assign({},e,{showModIcons:!1});case s.n:return i.__assign({},e,{showModIcons:!0});case s.r:return i.__assign({},e,{showTimestamps:!1});case s.s:return i.__assign({},e,{showTimestamps:!0});case s.u:return i.__assign({},e,{useHighContrastColors:!1});case s.v:return i.__assign({},e,{useHighContrastColors:!0});case s.w:var c=i.__assign({},e,{viewerChatFilterEnabled:!1});return g(c),u(c,t.source),c;case s.x:return g(c=h(e.viewerChatFilterSettings)?i.__assign({},e,{viewerChatFilterEnabled:!0,viewerChatFilterSettings:(a={},a[d.a.Aggressive]=!0,a[d.a.Identity]=!0,a[d.a.Profanity]=!0,a[d.a.Sexual]=!0,a)}):i.__assign({},e,{viewerChatFilterEnabled:!0})),u(c,t.source),c;case s.y:return g(c=i.__assign({},e,{viewerChatFilterEnabled:!h(t.settings),viewerChatFilterSettings:i.__assign({},e.viewerChatFilterSettings,t.settings)})),u(c,t.source),c;case s.a:return r(e,function(e){return e.commandHandlers},function(e){return e[t.channelLogin]?t.command in e[t.channelLogin]?e[t.channelLogin][t.command].push(t.handler):e[t.channelLogin][t.command]=[t.handler]:(e[t.channelLogin]={},e[t.channelLogin][t.command]=[t.handler]),e});case s.o:return r(e,function(e){return e.commandHandlers},function(e){if(!e[t.channelLogin])return e;if(!(t.command in e[t.channelLogin]))return e;var n=e[t.channelLogin][t.command].indexOf(t.handler);return e[t.channelLogin][t.command].splice(n,1),0===e[t.channelLogin][t.command].length&&delete e[t.channelLogin][t.command],0===Object.keys(e[t.channelLogin]).length&&delete e[t.channelLogin],e});case s.p:return i.__assign({},e,{renderSent:t.customEvent});case s.t:return i.__assign({},e,{unhideIgnoredUsers:e.unhideIgnoredUsers.concat([t.userID])});default:return e}})},DOLr:function(e,t,n){"use strict";n.r(t);var i,r=n("oJmH"),a=n("/MKj"),o=n("fvjX"),s=n("1/iK"),l=n("y5D0"),c=n("kRBY"),d=n("mrSG"),u=n("q1tI"),m=n("/7QA"),p=n("0Log"),h=n("cMjZ"),g=n("geRD"),f=n("/aPz"),b=n("2xye"),v=n("1rIY"),k="esport_insider_pass_secondary_channel",C=function(e){return"esport_insider_pass_toggle_state_"+e.toLowerCase()};function y(e){return m.n.get(C(e),!1)}function S(e){return m.b.get(k,"")}!function(e){e.LIVE="LIVE",e.VIDEO="VIDEO",e.COLLECTION="COLLECTION",e.CLIP="CLIP",e.NONE="NONE"}(i||(i={}));var E=n("vRsq"),N=n("cr+I"),_=n("oB8h"),D=n("UWbL"),w=n("+GjP"),O=n("DMoW"),I=n("Hz5m");function T(e,t,n,i){var r=e&&e.login;return d.__assign({channel:r,login:r,channel_id:e&&e.id||null,game:function(e){return e&&e.stream&&e.stream.game&&e.stream.game.name}(e)||function(e){return e&&e.game&&e.game.name}(t)||function(e){var t=F(e);return t&&t.game&&t.game.name}(n)||function(e){return e&&e.lastBroadcast&&e.lastBroadcast.game&&e.lastBroadcast.game.name}(e),hosted_game:function(e){return e&&e.hosting&&e.hosting.stream&&e.hosting.stream.game&&e.hosting.stream.game.name}(e),is_following:!(!e||!e.self||null===e.self.follower||null===e.self.follower.node),is_live:!!(e&&e.stream&&e.stream.id&&e.stream.id.length>0),language:function(e){return e&&e.hosting&&e.hosting.broadcastSettings&&e.hosting.broadcastSettings.language}(e)||function(e){return e&&e.broadcastSettings&&e.broadcastSettings.language}(e)||function(e){return e&&e.language}(t)||function(e){var t=F(e);return t&&t.language}(n)},function(e,t){var n=e&&e.id,i=t&&t.id;if(!n&&!i)return null;var r=null,a=null;e?r=e.broadcastType:i&&(a=b.SpadeVideoBroadcastType.Clip);a||(a=r?function(e){switch(e){case O.p.ARCHIVE:return b.SpadeVideoBroadcastType.Archive;case O.p.HIGHLIGHT:return b.SpadeVideoBroadcastType.Highlight;case O.p.UPLOAD:return b.SpadeVideoBroadcastType.Upload;case O.p.PAST_PREMIERE:return b.SpadeVideoBroadcastType.PastPremiere;case O.p.PREMIERE_UPLOAD:return b.SpadeVideoBroadcastType.PremiereUpload;default:return e}}(r):null);return{vod_type:a,vod_id:n||i}}(t,i))}function M(e){return e.match.params.contentType===E.g.Clip&&e.match.params.contentID||null}function L(e){return e.match.params.videoID||e.match.params.contentType===E.g.Video&&e.match.params.contentID||null}function R(e){return e.match.params.contentType!==I.a.Video&&e.match.params.contentType!==I.a.Clip&&e.match.params.contentType!==I.a.Collection&&e.match.params.page!==I.c.Videos?null:Object(w.a)(e.location.search,"filter")}function x(e){return e.match.params.collectionID?e.match.params.collectionID:e.match.params.contentType===E.g.Collection&&e.match.params.contentID?e.match.params.contentID:Object(w.a)(e.location.search,"collection")||void 0}function F(e){return e&&e.items&&e.items.edges&&e.items.edges[0]&&e.items.edges[0].node&&e.items.edges[0].node.id?e.items.edges[0].node:null}var A=-1;function j(e){if(e&&e.stream&&e.stream.id&&e.stream.type)return e.stream.type}function U(e){var t=Object(w.a)(e.location.search,"t");return t?Object(D.a)(t):A}function B(e,t){e&&e.owner?m.q.setPageTitle(e.owner.displayName+" - "+e.title):t&&t.broadcaster&&m.q.setPageTitle(t.broadcaster.displayName+" - "+t.title)}function P(e,t){return t&&(!function(e){return e&&""!==e.id&&e.creationState&&e.creationState===O.y.CREATED}(t)||function(e,t){return!!e&&t&&t.broadcaster&&t.broadcaster.login&&t.broadcaster.login.toLowerCase()!==e.toLowerCase()}(e,t))}function V(e){var t=e.login||"",n=i.LIVE,r="/"+t,a=S(),o=y(t)&&a?a:t,s=null,l=!(!e.self||!e.self.subscriptionBenefit)||!1,c=function(e){return j(e)===_.a.Live}(e);return l&&c||function(e){m.n.remove(C(e))}(o=(s=G(e))?s.login||"":t||""),{clipSlug:"",collectionID:"",contentCanonicalUrl:r,contentType:n,hostedChannel:s,isSecondaryStreamPlaying:o===a,videoID:"",videoPlayerSource:o}}function H(e,t){var n=e.owner?e.owner.login:"",r=i.VIDEO,a=Object(E.i)(n,e.id);return{clipSlug:"",collectionID:t?t.id:"",contentCanonicalUrl:a,contentType:r,hostedChannel:null,isSecondaryStreamPlaying:!1,videoID:e.id,videoPlayerSource:""}}function G(e){if(e&&e.hosting&&e.hosting.id&&e.hosting.login){var t=e.hosting;return{id:t.id,login:t.login,displayName:t.displayName||"",profileImageURL:t.profileImageURL}}return null}var W,q=n("VKOn"),z=n("kmJV"),Q=n("xyN1"),Y=n("csJo"),K=n("mGiD"),$=n("BbLt"),X=n("MAph"),J=(W=Object(v.a)("ChannelContext",{loading:!1,error:!1,channel:null,channelLogin:"",clip:null,clipSlug:"",collection:null,collectionID:"",contentCanonicalUrl:"",contentType:i.NONE,currentUser:null,hostedChannel:null,isSecondaryStreamPlaying:!1,live:!1,page:I.c.About,video:null,videoID:"",videoPlayerSource:"",viewerCount:null,clearData:function(){},toggleInsiderChannel:function(){}})).InnerProvider,Z=W.withContext,ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!1,error:!1,channelLogin:"",channel:null,clipSlug:"",clip:null,videoID:"",video:null,collectionID:"",collection:null,contentCanonicalUrl:"",contentType:i.NONE,currentUser:null,live:!1,hostedChannel:null,videoPlayerSource:"",isSecondaryStreamPlaying:!1,page:I.c.About,viewerCount:null,toggleInsiderChannel:function(){t.toggleInsiderChannel()},clearData:function(){t.clearResetOfflineTimer()}},t.logger=m.k.withCategory("ChannelContext"),t.nextHostTarget="",t.updateRoute=function(e){t.setState({page:t.getPageType(e)});var n=(e.match.params.channelLogin||"").toLowerCase();n&&n===t.state.channelLogin||(t.resetPrivateVariables(),t.setState({viewerCount:null})),t.setState(t.updateVideoSource({route:e}));var i=L(e),r=M(e),a=x(e);t.setState({channelLogin:n}),i?t.fetchVideo(i,a):r?t.fetchClip(r):a?t.fetchCollection(a):n?(t.fetchChannel(n),t.setupPubsub("",n)):t.logger.warn("Channel Root had no content to load",e.match)},t.onResetOffline=function(){t.resetOfflineTimer=void 0,t.setState({live:!1})},t}return d.__extends(t,e),t.prototype.componentWillMount=function(){this.updateRoute(this.props)},t.prototype.componentWillReceiveProps=function(e){e.match.url!==this.props.match.url&&this.updateRoute(e)},t.prototype.render=function(){return u.createElement(J,{value:this.state},this.props.children)},t.prototype.componentDidUpdate=function(e,t){t.channel&&this.state.channel&&t.channel.id===this.state.channel.id&&(t.hostedChannel!==this.state.hostedChannel||t.hostedChannel&&this.state.hostedChannel&&t.hostedChannel.id!==this.state.hostedChannel.id)&&m.p.track(b.SpadeEventType.HostModeDebug,{log_type:"state_change",channel:this.state.channel.login,host_channel:this.state.hostedChannel&&this.state.hostedChannel.login})},t.prototype.resetPrivateVariables=function(){this.pubsubHostTargetChange&&this.pubsubHostTargetChange.unsubscribe(),this.pubsubHostTargetChange=void 0,this.pubsubViewCountUpdate&&this.pubsubViewCountUpdate.unsubscribe(),this.pubsubViewCountUpdate=void 0,this.pubsubBroadcastSettings&&this.pubsubBroadcastSettings.unsubscribe(),this.pubsubBroadcastSettings=void 0,this.gqlChannelObservable=void 0,this.gqlChannelSubscription&&this.gqlChannelSubscription.unsubscribe(),this.gqlChannelSubscription=void 0,this.nextHostTarget="",this.clearResetOfflineTimer()},t.prototype.fetchChannel=function(e){var t=this;if(this.setState({loading:!0}),this.gqlChannelObservable)this.gqlChannelObservable.refetch();else{var n=m.q.apollo.client.watchQuery({query:z,variables:{currentChannelLogin:e,includeChanlets:!Object(q.a)()}}),i=n.subscribe({next:function(e){t.setState(d.__assign({error:!1,loading:!1},t.updateCurrentUser(e.data.currentUser),t.updateChannel(e.data.user),t.updateVideoSource({live:e.data.user})))},error:function(n){t.logger.error(n,"failed to fetch channel root data",{channelLogin:e}),t.setState({error:!0,loading:!1})}});this.gqlChannelObservable=n,this.gqlChannelSubscription=i}},t.prototype.fetchVideo=function(e,t){var n=this;this.setState({loading:!0});var i=m.q.apollo.client.watchQuery({query:K,variables:{videoID:e,collectionID:t,includeCollection:!!t,includeChanlets:!1}}).subscribe({next:function(e){i.unsubscribe(),n.setState(d.__assign({error:!1,loading:!1},n.updateCurrentUser(e.data.currentUser),n.updateVideo(e.data.video),n.updateChannel(e.data.video&&e.data.video.owner),n.updateVideoSource({video:e.data.video})))},error:function(r){i&&i.unsubscribe(),n.setState({error:!0,loading:!1}),n.logger.error(r,"failed to fetch channel root data for video",{videoID:e,collectionID:t})}})},t.prototype.fetchCollection=function(e){var t=this;this.setState({loading:!0});var n=m.q.apollo.client.watchQuery({query:Y,variables:{collectionID:e,includeChanlets:!1}}).subscribe({next:function(e){n.unsubscribe();var i=F(e.data.collection);t.setState(d.__assign({error:!1,loading:!1},t.updateCurrentUser(e.data.currentUser),t.updateCollection(e.data.collection),t.updateVideo(i),t.updateChannel(e.data.collection&&e.data.collection.owner),t.updateVideoSource({video:i,collection:e.data.collection})))},error:function(i){n&&n.unsubscribe(),t.setState({error:!0,loading:!1}),t.logger.error(i,"failed to fetch channel root data for collection",{collectionID:e})}})},t.prototype.fetchClip=function(e){var t=this;this.setState({loading:!0});var n=m.q.apollo.client.watchQuery({query:Q,variables:{currentChannelLogin:"",includeChannel:!1,videoID:"",includeVideo:!1,collectionID:"",includeCollection:!1,slugID:e,includeClip:!0,includeChanlets:!1}}).subscribe({next:function(e){n.unsubscribe(),t.setState(d.__assign({error:!1,loading:!1},t.updateCurrentUser(e.data.currentUser),t.updateClip(e.data.clip),t.updateChannel(e.data.clip&&e.data.clip.broadcaster),t.updateVideoSource({clip:e.data.clip})))},error:function(i){n&&n.unsubscribe(),t.setState({error:!0,loading:!1}),t.logger.error(i,"failed to fetch channel root data for video",{clipSlug:e})}})},t.prototype.updateCurrentUser=function(e){return{currentUser:e}},t.prototype.updateCollection=function(e){return{collection:e}},t.prototype.updateVideo=function(e){return{video:e}},t.prototype.updateClip=function(e){return{clip:e}},t.prototype.updateChannel=function(e){var t=e&&e.login||"",n=!!j(e),i=G(e),r=function(e){return e&&e.stream?e.stream.viewersCount:null}(e);return this.setupPubsub(e&&e.id||"",t),this.clearResetOfflineTimer(),n&&(this.resetOfflineTimer=setTimeout(this.onResetOffline,6e4)),{channel:e,channelLogin:t,live:n,hostedChannel:i,viewerCount:r}},t.prototype.updateVideoSource=function(e){var t;if(e.route)t=function(e,t){var n=M(t)||"",r=L(t)||"",a=x(t)||"",o="",s=i.NONE,l="",c=!1;if(""!==n)s=i.CLIP,o=Object(E.h)(e,n);else if(r||a)s=a?i.COLLECTION:i.VIDEO,o=Object(E.i)(e,r,a);else{s=i.LIVE,o="/"+e;var d=S();c=(l=y(e)&&d?d:e)===d}return{clipSlug:n,collectionID:a,contentCanonicalUrl:o,contentType:s,hostedChannel:null,isSecondaryStreamPlaying:c,videoID:r,videoPlayerSource:l}}(e.route.match.params.channelLogin||"",e.route);else if(e.live){t=V(e.live)}else e.clip?t=function(e){var t=e.broadcaster&&e.broadcaster.login,n=i.CLIP,r=Object(E.h)(t||"",e.slug);return{clipSlug:e.slug,collectionID:"",contentCanonicalUrl:r,contentType:n,hostedChannel:null,isSecondaryStreamPlaying:!1,videoID:"",videoPlayerSource:""}}(e.clip):e.collection?t=function(e){var t=F(e);return t?H(t,e):{clipSlug:"",collectionID:e.id,contentCanonicalUrl:"",contentType:i.COLLECTION,hostedChannel:null,isSecondaryStreamPlaying:!1,videoID:"",videoPlayerSource:""}}(e.collection):e.video&&(t=H(e.video));return t||(this.logger.warn("Unable to set context.",e),{})},t.prototype.getPageType=function(e){if(e.match.params.standaloneType){if(e.match.params.standaloneType===I.e.Videos)return I.c.Videos;if(e.match.params.standaloneType===I.e.Collections)return I.c.Videos}if(void 0===e.match.params.page){if(e.match.params.contentType){if(e.match.params.contentType===I.a.Video)return I.c.Videos;if(e.match.params.contentType===I.a.Clip)return I.c.Clips;if(e.match.params.contentType===I.a.Collection)return I.c.Videos}return I.c.About}return e.match.params.page&&I.d.has(e.match.params.page)?e.match.params.page:(m.k.error(new Error,"Unknown Page Type: '"+e.match.params.page+"' in route: "+e.match.url),I.c.About)},t.prototype.setupPubsub=function(e,t){var n=this;if(!this.pubsubHostTargetChange||this.pubsubHostTargetChange.channelLogin!==t)if(this.pubsubHostTargetChange&&this.pubsubHostTargetChange.unsubscribe(),e){var i=m.q.pubsub.subscribe({topic:Object(f.A)(e),onMessage:function(i){i.type===p.PubsubMessageType.StreamChatRoomHostTargetChange&&n.handleStreamChatRoomHostTargetChange(i,t,e)}});this.pubsubHostTargetChange={channelLogin:t,unsubscribe:i}}else this.pubsubHostTargetChange=void 0;if(!this.pubsubViewCountUpdate||this.pubsubViewCountUpdate.channelLogin!==t)if(this.pubsubViewCountUpdate&&this.pubsubViewCountUpdate.unsubscribe(),t){i=m.q.pubsub.subscribe({topic:Object(f.J)(t),onMessage:function(e){e.type===p.PubsubMessageType.ViewCount&&n.handleViewCount(e)}});this.pubsubViewCountUpdate={channelLogin:t,unsubscribe:i}}else this.pubsubViewCountUpdate=void 0;if(!this.pubsubBroadcastSettings||this.pubsubBroadcastSettings.channelLogin!==t)if(this.pubsubBroadcastSettings&&this.pubsubBroadcastSettings.unsubscribe(),e){i=m.q.pubsub.subscribe({topic:Object(f.e)(e),onMessage:function(e){e.type===p.PubsubMessageType.BroadcastSettingsUpdate&&n.handleBroadcastSettingsUpdate(e)}});this.pubsubBroadcastSettings={channelLogin:t,unsubscribe:i}}else this.pubsubBroadcastSettings=void 0},t.prototype.handleStreamChatRoomHostTargetChange=function(e,t,n){if(e.data.channel_id===n){m.p.track(b.SpadeEventType.HostModeDebug,{log_type:"pubsub_msg_v2",channel:t,data_channel_id:e.data.channel_id,data_target_channel_id:e.data.target_channel_id,data_target_channel_login:e.data.target_channel_login});var i=e.data.channel_login,r=e.data.target_channel_id,a=(e.data.target_channel_login||"").toLowerCase();if(t!==i)return;r&&a?(this.setState({videoPlayerSource:a,hostedChannel:{id:r,login:a,displayName:a,profileImageURL:null}}),this.fetchPubsubHostedChannel(a)):this.setState({videoPlayerSource:t,hostedChannel:null})}},t.prototype.fetchPubsubHostedChannel=function(e){return d.__awaiter(this,void 0,void 0,function(){var t,n,i;return d.__generator(this,function(r){switch(r.label){case 0:this.nextHostTarget=e,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,m.q.apollo.client.query({query:X,variables:{hostedChannelLogin:e}})];case 2:return(t=r.sent()).data.user&&this.nextHostTarget===e&&(n=t.data.user,this.setState({hostedChannel:{id:n.id||"",login:n.login||"",displayName:n.displayName||"",profileImageURL:n.profileImageURL}})),[3,4];case 3:return i=r.sent(),this.logger.error(i,"failed to fetch hosted channel data",{hostedChannelLogin:e}),[3,4];case 4:return[2]}})})},t.prototype.handleViewCount=function(e){e.viewers!==this.state.viewerCount&&this.setState({live:!0,viewerCount:e.viewers}),this.clearResetOfflineTimer(),this.resetOfflineTimer=setTimeout(this.onResetOffline,6e4)},t.prototype.handleBroadcastSettingsUpdate=function(e){if(this.state.channel){var t=this.state.channel;Object(g.e)({fragment:$,fragmentName:"channel",id:Object(h.a)(t),mutator:function(t){var n=d.__assign({},t);return null!==e.status&&(n.stream&&(n.stream.title=e.status),n.lastBroadcast&&(n.lastBroadcast.title=e.status)),n}})}},t.prototype.clearResetOfflineTimer=function(){this.resetOfflineTimer&&(clearTimeout(this.resetOfflineTimer),this.resetOfflineTimer=void 0)},t.prototype.toggleInsiderChannel=function(){var e=this.state.channelLogin,t=S(),n=this.state.videoPlayerSource===e,i=n&&t?t:e;this.setState({videoPlayerSource:i}),function(e,t){m.n.set(C(e),t)}(e,n)},t}(u.Component);var te=n("2bi+"),ne=n("17x9"),ie=n("ZS2+"),re=n("ua1/"),ae=n("daa2"),oe=n("d0ua"),se=n("D7An");function le(){return m.q.experiments.getAndTrackAssignment(se.b.TheatreFullscreen)||"control"}function ce(e){return"theatre"===e}function de(e){ce(le())&&(e?m.q.store.dispatch(Object(oe.D)()):m.q.store.dispatch(Object(oe.A)()))}var ue=n("003i"),me=n("zxEZ"),pe=n("yR8l"),he=n("eDVu"),ge=n("GnwI"),fe=n("Ue10");var be,ve=n("fOWB"),ke=(n("boOy"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.componentDidUpdate=function(){this.props.triggerPlayerReposition()},t.prototype.render=function(){var e=this.props.data&&this.props.data.user&&this.props.data.user.liveEvent;if(!e)return null;var t=e.id;if(!t)return null;var n=e.title;return e.parent&&e.parent.title&&(n=e.parent.title),n?u.createElement(fe.l,{type:fe.q.SlideInBottom,delay:fe.m.Medium,duration:fe.n.Medium,enabled:!0},u.createElement(fe.Ob,{className:"live-event-banner-ui__header",display:fe.Da.Flex,background:fe.u.AccentAlt2,alignItems:fe.i.Center,flexWrap:fe.Ha.NoWrap,padding:{x:1}},u.createElement(fe.Ob,{display:fe.Da.Flex,flexShrink:0,margin:{right:1},color:fe.R.Overlay},u.createElement(fe.Cb,{asset:fe.Db.Events})),u.createElement(fe.Aa,{to:{pathname:"/events/"+t,state:{medium:b.PageviewMedium.Channel,content:b.PageviewContent.EventLive,noRedirect:!0}}},u.createElement(fe.Ca,{type:fe.gc.Span,color:fe.R.Overlay,fontSize:fe.Ia.Size5,lines:1},Object(m.d)("Event: ","LiveEventBannerComponent"),n)))):null},t}(u.Component)),Ce=Object(o.compose)(Object(pe.a)(ve,{options:function(e){return{variables:{login:e.channelName}}}}),Object(he.a)(function(e){return{query:ve,variables:{login:e.channelName},topic:Object(f.f)(e.channelID),type:p.PubsubMessageType.LiveEvent,mutator:function(e,t){return t.user&&(t.user.liveEvent=function(e){if(!e||!e.current_event)return null;var t=e.current_event,n=null;t.parent&&(n={__typename:"EventCollection",id:t.parent.event_id,title:t.parent.title});return{__typename:"EventLeaf",id:t.event_id,title:t.title,parent:n}}(e)),t}}}),Object(ge.withLatencyTracking)("LiveEventBanner",{autoReportInteractive:!0}))(ke),ye=n("0bws"),Se=0,Ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trackLongtask=function(e){if(t.shouldTrackLongtask()){var n=e.attribution.find(function(e){return"script"===e.name});m.p.track(b.SpadeEventType.UserLongtask,{container_id:n&&n.containerId,container_name:n&&n.containerName,container_src:n&&n.containerSrc,container_type:n&&n.containerType,longtask_duration:e.duration,longtask_name:e.name})}},t}return d.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;if(++Se>1){var t="Multiple LongtaskTrackers mounted (one maximum allowed).";m.k.error(new Error(t),t)}else window.PerformanceObserver&&window.PerformanceLongTaskTiming&&(this.performanceObserver=new window.PerformanceObserver(function(t){t.getEntries().forEach(e.trackLongtask)}),this.performanceObserver.observe({entryTypes:["longtask"]}))},t.prototype.componentWillUnmount=function(){Se--,this.performanceObserver&&this.performanceObserver.disconnect()},t.prototype.render=function(){return null},t.prototype.shouldTrackLongtask=function(){return m.b.get("longtask_tracking_sample_rate",1)>Math.random()},t}(u.Component),Ne=n("4+Ji"),_e=n("8ssJ"),De=n("x7UT"),we=n("f00E"),Oe=n("VJHF");!function(e){e.Title="campaign-notification-card-title-selector",e.Footer="campaign-notification-card-footer-selector"}(be||(be={}));var Ie,Te=function(e){return u.createElement(fe.fb,{fullWidth:!0},u.createElement(fe.Ob,{position:fe.tb.Relative,background:fe.u.Accent,color:fe.R.Overlay,padding:1,fullWidth:!0},e.title&&u.createElement(fe.fb,{textAlign:fe.cc.Center},u.createElement(fe.Ca,{fontSize:fe.Ia.Size5,"data-test-selector":be.Title},e.title)),u.createElement(fe.fb,{position:fe.tb.Absolute,margin:{right:1},attachTop:!0,attachRight:!0,fullHeight:!0,display:fe.Da.Flex,alignItems:fe.i.Center,justifyContent:fe.eb.Center},u.createElement(fe.D,{ariaLabel:Object(m.d)("Close Button","CampaignNotificationCard"),icon:fe.Db.Close,onClick:e.onClose,overlay:!0}))),u.createElement(fe.Ob,{background:fe.u.Alt,padding:e.fullWidthChild?0:1,fullWidth:!0},e.children),e.footer&&u.createElement(fe.Ob,{background:fe.u.Alt2,padding:1,"data-test-selector":be.Footer,borderTop:!0,fullWidth:!0},e.footer),u.createElement(fe.wb,{animationDirection:fe.xb.Down,size:fe.yb.Small,animationDuration:10,onAnimationEnd:e.onProgressBarEnd}))};n("mXgU");!function(e){e.BenefactorMessage="benefactor-message",e.RecipientMessage="recipient-message",e.CheerbombReward="cheerbomb-reward"}(Ie||(Ie={}));var Me,Le=function(e){var t,n,i=[];if(e.receiver===Oe.a.Benefactor){i=(a=e.rewardEvent).data.contents,n=Re(i);var r=a.data.nextMilestone?a.data.nextMilestone.amount:7;t=u.createElement(fe.Ca,{"data-test-selector":Ie.BenefactorMessage},Object(m.d)("{numRewards, plural, one {Your cheer unlocked # common loot chest and shared {numShared} with random people in Chat!} other {Your cheer unlocked # common loot chests and shared {numShared} with random people in Chat!}}",{numRewards:n,numShared:r},"HGCCheerbomNotificationCard"))}else{var a;i=(a=e.rewardEvent).data.contents,n=Re(i);var o=u.createElement(fe.Ca,{type:fe.gc.Span,color:fe.R.Link,bold:!0},a.data.benefactor);t=u.createElement(fe.Ca,{"data-test-selector":Ie.RecipientMessage},Object(m.d)("{numRewards, plural, one {Thanks to {benefactor}'s Cheer, you got # Heroes of the Storm common loot chest!} other {Thanks to {benefactor}'s Cheer, you got # Heroes of the Storm common loot chests!}}",{benefactor:o,numRewards:n},"HGCCheerbomNotificationCard"))}var s=Object(m.d)("{numRewards, plural, one {You got # loot chest!} other {You got # loot chests!}}",{numRewards:n},"HGCCheerbombNotificationCard"),l=[];i.forEach(function(e){var t,n=e.imageURL||"https://d3aqoihi2n8ty8.cloudfront.net/hgc2018/trigger-rewards/CommonChest.png",i=e.quantity||1;for(t=0;t<i;t++)l.push(u.createElement(fe.Ya,{key:"HGCCheerbombNotificationCard-"+e.id+"-"+t,margin:{x:1,y:2},display:fe.Da.InlineFlex},u.createElement(fe.Y,{src:n,srcSet:{"112w":n},sizes:[{size:"35px"}],alt:e.text,"data-test-selector":Ie.CheerbombReward})))});var c=u.createElement(fe.fb,{className:"hgc-cheerbomb-notification-card__background",textAlign:fe.cc.Center},u.createElement(fe.Xa,{padding:1,textAlign:fe.cc.Left},t),u.createElement(fe.fb,{className:"hgc-cheerbomb-notification-card__loot-background"},u.createElement(fe.Ob,{margin:{y:1},display:fe.Da.InlineFlex,justifyContent:fe.eb.Center,flexWrap:fe.Ha.Wrap},l))),p=u.createElement(fe.Ob,{display:fe.Da.InlineFlex},u.createElement(fe.C,{type:fe.I.Text,onClick:e.onDontShowAgainClick},Object(m.d)("Don't show again","HGCCheerbombNotificationCard")));return u.createElement(Te,d.__assign({},e,{title:s,footer:p,fullWidthChild:!0,className:"hgc-cheerbomb-notification-card"}),c)},Re=function(e){return e.map(function(e){return e.quantity||1}).reduce(function(e,t){return e+t},0)};n("5a1p");!function(e){e.RegularEmote="regular-emote",e.LargeEmote="large-emote",e.SpaceBackground="space-background"}(Me||(Me={}));var xe,Fe=function(e){var t=1===e.emotes.length,n=Object(m.d)("You got an emote set!","HGCEmoteNotificationCard");t&&(n=Object(m.d)("You got an emote!","HGCEmoteNotificationCard"));var i=null;if(t)i=u.createElement(fe.Ob,{display:fe.Da.Flex,justifyContent:fe.eb.Center,flexWrap:fe.Ha.Wrap,padding:{x:1,y:2},className:"hgc-emote-notification-card__space-bg","data-test-selector":Me.SpaceBackground},u.createElement("img",{src:e.emotes[0].imageURL,alt:e.emotes[0].text,"data-test-selector":Me.LargeEmote}));else{var r=e.emotes.map(function(e){return u.createElement(fe.fb,{key:"HGCEmoteNotificationCard-"+e.id,padding:.5},u.createElement("img",{className:"hgc-emote-notification-card__small-emote",src:e.imageURL,alt:e.text,"data-test-selector":Me.RegularEmote}))});i=u.createElement(fe.Ob,{border:!0,borderRadius:fe.A.Small,display:fe.Da.Flex,background:fe.u.Base,justifyContent:fe.eb.Center,flexWrap:fe.Ha.Wrap},r)}var a=u.createElement(fe.Ob,{display:fe.Da.InlineFlex},u.createElement(fe.C,{onClick:e.onCheerClick},Object(m.d)("Cheer Again","HGCEmoteNotificationCard")),u.createElement(fe.C,{type:fe.I.Text,onClick:e.onDontShowAgainClick},Object(m.d)("Don't show again","HGCEmoteNotificationCard")));return u.createElement(Te,d.__assign({},e,{title:n,footer:a,fullWidthChild:t,className:"hgc-emote-notification-card"}),i)};n("Madu");(xe||(xe={})).RegularEmote="regular-emote";var Ae=function(e){var t=Object(m.d)("You got an emote!","EsportsNotificationCard"),n=e.giftEvent.data.contents[0],i=n.imageURL||"",r=u.createElement(fe.fb,{className:"owl-cheerbomb-recipient-notification-card__background",padding:1,textAlign:fe.cc.Center},u.createElement(fe.Ca,null,Object(m.d)("Thanks to {benefactor}'s Cheer, you got an emote!",{benefactor:u.createElement(fe.Ca,{type:fe.gc.Span,color:fe.R.Link,bold:!0},e.giftEvent.data.benefactor)},"EsportsNotificationCard")),u.createElement(fe.Ob,{margin:{y:1},padding:.5,border:!0,borderRadius:fe.A.Medium,background:fe.u.Base,display:fe.Da.InlineFlex},u.createElement(fe.Y,{src:i,srcSet:{"112w":i},sizes:[{size:"40px"}],alt:n.text,"data-test-selector":xe.RegularEmote})),u.createElement(fe.Ca,null,e.giftEvent.data.contents[0].text)),a=u.createElement(fe.Ob,{display:fe.Da.InlineFlex},u.createElement(fe.C,{type:fe.I.Text,onClick:e.onDontShowAgainClick},Object(m.d)("Don't show again","OWLCheerbombRecipientNotificationCard")));return u.createElement(Te,d.__assign({},e,{title:t,footer:a,fullWidthChild:!0,className:"owl-cheerbomb-recipient-notification-card"}),r)},je={backgroundColor:"#ff8902"},Ue={788301:{backgroundColor:"#004A9C",backgroundImage:"https://d3aqoihi2n8ty8.cloudfront.net/owl-2017/team-logos/BOS.svg",displayName:"Boston Uprising"},788304:{backgroundColor:"#0072CE",backgroundImage:"https://d3aqoihi2n8ty8.cloudfront.net/owl-2017/team-logos/DAL.svg",displayName:"Dallas Fuel"},788337:{backgroundColor:"#AF272F",backgroundImage:"https://d3aqoihi2n8ty8.cloudfront.net/owl-2017/team-logos/FLA.svg",displayName:"Florida Mayhem"},788336:{backgroundColor:"#381460",backgroundImage:"https://d3aqoihi2n8ty8.cloudfront.net/owl-2017/team-logos/GLA.svg",displayName:"LA Gladiators"},788324:{backgroundColor:"#96CA4F",backgroundImage:"https://d3aqoihi2n8ty8.cloudfront.net/owl-2017/team-logos/HOU.svg",displayName:"Houston Outlaws"},788299:{backgroundColor:"#59CBE8",backgroundImage:"https://d3aqoihi2n8ty8.cloudfront.net/owl-2017/team-logos/LDN.svg",displayName:"London Spitfire"},788309:{backgroundColor:"#093692",backgroundImage:"https://d3aqoihi2n8ty8.cloudfront.net/owl-2017/team-logos/NYE.svg",displayName:"New York Excelsior"},788334:{backgroundColor:"#F99D2A",backgroundImage:"https://d3aqoihi2n8ty8.cloudfront.net/owl-2017/team-logos/PHI.svg",displayName:"Philidelphia Fusion"},788332:{backgroundColor:"#000000",backgroundImage:"https://d3aqoihi2n8ty8.cloudfront.net/owl-2017/team-logos/SEO.svg",displayName:"Seoul Dynasty"},788320:{backgroundColor:"#FC4C02",backgroundImage:"https://d3aqoihi2n8ty8.cloudfront.net/owl-2017/team-logos/SFS.svg",displayName:"San Francisco Shock"},788329:{backgroundColor:"#D22630ß",backgroundImage:"https://d3aqoihi2n8ty8.cloudfront.net/owl-2017/team-logos/SHD.svg",displayName:"Shanghai Dragons"},788314:{backgroundColor:"#E5D456",backgroundImage:"https://d3aqoihi2n8ty8.cloudfront.net/owl-2017/team-logos/VAL.svg",displayName:"LA Valiant"}};var Be;n("DnH4");!function(e){e.SingleEmote="single-emote",e.MultipleEmote="multiple-emote"}(Be||(Be={}));var Pe,Ve,He=function(e){var t=e.rewardEvent.data.contents,n=1===t.length,i=Object(m.d)("You got an emote set!","OWLEmoteNotificationCard");n&&(i=Object(m.d)("You got an emote!","OWLEmoteNotificationCard"));var r=null;if(n){var a=function(e){return Ue[e]?Ue[e]:je}(t[0].id);r=u.createElement(u.Fragment,null,u.createElement(fe.Xa,{display:fe.Da.Block},u.createElement("svg",{viewBox:"0 0 100 100",height:"100",width:"100%",style:{background:a.backgroundColor},"data-test-selector":Be.SingleEmote},u.createElement("circle",{className:"owl-emote-notification-card__circle",cx:"50",cy:"50",r:"60"}),u.createElement("image",{xlinkHref:t[0].imageURL,x:"50",y:"50",transform:"translate(-40 -40)",height:"80",width:"80"}))),u.createElement(fe.Xa,{textAlign:fe.cc.Center,padding:1},u.createElement(fe.Ca,null,t[0].text)))}else{var o=e.rewardEvent.data,s=o.nextMilestone,l=s&&s.amount>0||!1,c=Object(m.d)("Your Cheer unlocked a Twitch emote set! Cheer 500 Bits to unlock another set and share emotes with Chat!","OWLEmoteNotificationCard");s&&l&&(c=o.contents.length>0?Object(m.d)("Your Cheer unlocked a Twitch emote set and shared emotes with Chat!","OWLEmoteNotificationCard"):Object(m.d)("Your Cheer shared emotes with Chat!","OWLEmoteNotificationCard"));var p=t.map(function(e){var t=e.imageURL||"";return u.createElement(fe.Xa,{key:"OWLEmoteNotificationCard-"+e.id,padding:.5},u.createElement(fe.Y,{src:t,srcSet:{"112w":t},sizes:[{size:"40px"}],alt:e.text,"data-test-selector":Be.MultipleEmote}))});r=u.createElement(fe.fb,{className:"owl-emote-notification-card__background",padding:1},u.createElement(fe.Xa,{margin:{bottom:1}},u.createElement(fe.Ca,null,c)),u.createElement(fe.Ob,{border:!0,borderRadius:fe.A.Small,display:fe.Da.Flex,background:fe.u.Base,justifyContent:fe.eb.Center,flexWrap:fe.Ha.Wrap},p))}var h=u.createElement(fe.Ob,{display:fe.Da.InlineFlex},u.createElement(fe.C,{onClick:e.onCheerClick},Object(m.d)("Cheer Again","OWLEmoteNotificationCard")),u.createElement(fe.C,{type:fe.I.Text,onClick:e.onDontShowAgainClick},Object(m.d)("Don't show again","OWLEmoteNotificationCard")));return u.createElement(Te,d.__assign({},e,{title:i,footer:h,fullWidthChild:!0,className:"owl-emote-notification-card"}),r)};n("kXEd");(Ve||(Ve={})).Container="notification-container-selector";var Ge="disabled-campaign-notifications",We=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cards:[],sessionGiftedEmoteIDs:[]},t.popCard=function(){t.setState(function(e){return{cards:e.cards.slice(1).slice()}})},t.onCardClose=function(){t.popCard()},t.onCheerClick=function(){t.popCard();var e=document.querySelector('[data-a-target="bits-button"]');e&&e.click()},t.isDomainNotificationTypeDisabled=function(e){var n=m.n.get(Ge,[]),i=t.getKeyFromPubsubMessage(e);return n.includes(i)},t.disableDomainNotificationType=function(){var e=t.props.pubsub.messages.userNotificationEvent;if(e){var n=m.n.get(Ge,[]),i=t.getKeyFromPubsubMessage(e);n.push(i),m.n.set(Ge,n)}t.popCard()},t.getKeyFromPubsubMessage=function(e){return e.data.domain+"-"+e.type+"-message"},t.onWorldCupGiftCheerClick=function(){t.popCard();var e=document.querySelector('[data-a-target="bits-button"]');e&&e.click()},t.getHgcCheererNotificationCard=function(e,n){return t.isHgcCheerbombEvent(e)?u.createElement(Le,{rewardEvent:e,receiver:n,onCheerClick:t.onCheerClick,onDontShowAgainClick:t.disableDomainNotificationType}):u.createElement(Fe,{emotes:e.data.contents,onCheerClick:t.onCheerClick,onDontShowAgainClick:t.disableDomainNotificationType})},t.isHgcCheerbombEvent=function(e){return e.data.domain===Oe.b&&e.data.nextMilestone},t}return d.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this,n=[],i=e.pubsub.messages.userNotificationEvent;if(i&&i!==this.props.pubsub.messages.userNotificationEvent&&!this.isDomainNotificationTypeDisabled(i)){if(i.type===p.PubsubMessageType.UserCampaignRewardEvent){var r=i;r.data.domain===Oe.b?n.push(this.getHgcCheererNotificationCard(r,Oe.a.Benefactor)):r.data.domain===Oe.e&&n.push(u.createElement(He,{rewardEvent:r,onCheerClick:this.onCheerClick,onDontShowAgainClick:this.disableDomainNotificationType}))}if(i.type===p.PubsubMessageType.UserGiftEvent){var a=i;a.data.domain===Oe.e?n.push(u.createElement(Ae,{giftEvent:a,onCheerClick:this.onCheerClick,onDontShowAgainClick:this.disableDomainNotificationType})):a.data.domain===Oe.b&&n.push(u.createElement(Le,{rewardEvent:a,receiver:Oe.a.Recipient,onCheerClick:this.onWorldCupGiftCheerClick,onDontShowAgainClick:this.disableDomainNotificationType}))}n=n.map(function(e){return u.cloneElement(e,{key:Object(we.b)(),onClose:t.onCardClose,onProgressBarEnd:t.onCardClose})}),this.setState(function(e){return{cards:e.cards.concat(n)}})}},t.prototype.render=function(){var e=this.state.cards[0];return e?u.createElement(fe.Ob,{className:"campaign-notification",position:fe.tb.Absolute,zIndex:fe.xc.Above,borderRadius:fe.A.Large,elevation:3,"data-test-selector":Ve.Container},e):null},t}(u.Component),qe=Object(o.compose)(Object(De.a)([{topic:function(e){return Object(f.F)(e.user&&e.user.id||"")},mapMessageTypesToProps:(Pe={},Pe[p.PubsubMessageType.UserGiftEvent]="userNotificationEvent",Pe[p.PubsubMessageType.UserCampaignRewardEvent]="userNotificationEvent",Pe),skip:function(e){return!e.user||!e.user.id}}]))(We);var ze,Qe=Object(a.connect)(function(e){return{user:Object(c.e)(e)}})(qe),Ye=n("VAW9"),Ke=n("cnlr"),$e=n("znm4"),Xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onPlayerSeekRequest=function(e){t.props.onPlayerSeekRequestHandler(e-t.getSourceVideoClipStartOffset())},t}return d.__extends(t,e),t.prototype.render=function(){var e=this.props.clip,t={},n=null;e&&(t={messageWindow:{offset:e.videoOffsetSeconds,duration:e.durationSeconds}},e.video&&e.video.id&&(n=e.video.id));var i=this.getSourceVideoClipStartOffset();return u.createElement($e.a,d.__assign({onPlayerSeekRequest:this.onPlayerSeekRequest,onShowLogin:this.props.onShowLogin,videoID:n,startInReplayMode:!0,disableChatForVideo:!n},t,{highlightTimestamp:i}))},t.prototype.getSourceVideoClipStartOffset=function(){var e=this.props.clip;return e&&e.videoOffsetSeconds?e.videoOffsetSeconds:Kr},t}(u.Component),Je=n("eFQ3"),Ze=n("eJ65"),et=n("dIU+"),tt=n("RQ6e"),nt=n("QjI3");n("axcf");!function(e){e.ChannelName="hosting-ui__channel-name",e.Footer="hosting-ui__footer",e.Header="hosting-ui__header",e.MoreButton="hosting-ui__more-button",e.ReportButton="hosting-ui__report-button"}(ze||(ze={}));var it=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleReportHosterClick=function(){t.props.isLoggedIn?t.props.showReportUserModal({onClose:t.handleReportModalClose,reportContext:{contentType:O.Fa.USER_REPORT,targetUserID:t.props.hostChannelID},title:Object(m.d)("Report {channelDisplayName}",{channelDisplayName:t.props.hostChannelDisplayName},"VideoPlayerHostingUI")}):t.props.login()},t.handleReportModalClose=function(e){(e===tt.a.MutationError||e===tt.a.Success)&&t.props.history.push("/")},t}return d.__extends(t,e),t.prototype.componentDidUpdate=function(e){this.isVisible(this.props)!==this.isVisible(e)&&this.props.triggerPlayerReposition&&this.props.triggerPlayerReposition()},t.prototype.render=function(){var e=this.isVisible(this.props);return u.createElement(fe.Ob,{className:"video-player-hosting-ui__container"},e&&this.renderHeader(),u.createElement("span",{key:"video-player"},this.props.children),u.createElement(fe.fb,{display:e?fe.Da.Block:fe.Da.Hide,position:fe.tb.Relative,zIndex:fe.xc.Above},e&&this.renderFooter()))},t.prototype.isVisible=function(e){return!!e.hostedChannelDisplayName},t.prototype.renderHeader=function(){return u.createElement(fe.l,{type:fe.q.SlideInBottom,delay:fe.m.Medium,duration:fe.n.Medium,enabled:!0},u.createElement(fe.Aa,{key:"hosting-ui-header",className:"video-player-hosting-ui__link",to:{pathname:"/"+this.props.hostedChannelLogin,state:{medium:b.PageviewMedium.Channel,content:b.PageviewContent.Host}},"data-a-target":"hosting-ui-link","data-test-selector":ze.Header},u.createElement(fe.Ob,{className:"video-player-hosting-ui__header",display:fe.Da.Flex,background:fe.u.AccentAlt2,color:fe.R.Overlay,alignItems:fe.i.Center,padding:{x:1,y:.5},"data-a-target":"hosting-ui-header",borderRadius:{topLeft:fe.A.Medium,topRight:fe.A.Medium}},u.createElement(fe.fb,{className:"video-player-hosting-ui__avatar-container"},u.createElement(fe.t,{src:this.props.hostedChannelProfileImageURL||m.a.defaultAvatarURL,size:30,alt:Object(m.d)("Hosted Channel {hostedChannelDisplayName}'s Avatar",{hostedChannelDisplayName:this.props.hostedChannelDisplayName||""},"VideoPlayerHostingUI")})),u.createElement(fe.Ob,{margin:{left:1},fontSize:fe.Ia.Size5},Object(m.d)("Hosting","VideoPlayerHostingUI")," ",u.createElement(fe.Ca,{type:fe.gc.Span,className:"video-player-hosting-ui__channel-name",color:fe.R.OverlayAlt,"data-a-target":"hosting-ui-channel-name","data-test-selector":ze.ChannelName},this.props.hostedChannelDisplayName)))))},t.prototype.renderFooter=function(){return u.createElement(fe.l,{type:fe.q.SlideInTop,enabled:!0,delay:fe.m.Medium,duration:fe.n.Medium},u.createElement(fe.Ob,{key:"hosting-ui-footer",background:fe.u.AccentAlt2,className:"video-player-hosting-ui__footer",display:fe.Da.Block,padding:1,"data-test-selector":ze.Footer,"data-a-target":"hosting-ui-footer",borderRadius:{bottomLeft:fe.A.Medium,bottomRight:fe.A.Medium}},this.props.firstPageLoaded&&u.createElement(fe.fb,{padding:{y:.5},display:fe.Da.Flex,justifyContent:fe.eb.Between},u.createElement(fe.fb,{display:fe.Da.Flex},u.createElement(fe.fb,{margin:{right:1}},u.createElement(et.a,{"data-a-target":"hosting-ui-follow-button",channelName:this.props.hostedChannelLogin||"",channelLogin:this.props.hostedChannelLogin,hostChannelLogin:this.props.hostChannelLogin,hostChannelID:this.props.hostChannelID,isHostedFollow:!0,balloonDirection:fe.y.BottomLeft,followUIType:et.b.IconAndText,unfollowUIType:et.b.IconOnly})),u.createElement(fe.fb,null,u.createElement(nt.SubscribeButton,{channelLogin:this.props.hostedChannelLogin,hostChannelID:this.props.hostChannelID,hostChannelLogin:this.props.hostChannelLogin,"data-a-target":"hosting-ui-subscribe-button"}))),u.createElement(Ze.a,null,u.createElement(fe.D,{ariaLabel:Object(m.d)("More options","HostingUI"),overlay:!0,icon:fe.Db.More,onClick:this.handleReportHosterClick,"data-a-target":"hosting-ui-more-button","data-test-selector":ze.MoreButton}),u.createElement(fe.x,{direction:fe.y.TopRight,"data-a-target":"hosting-ui-more-balloon"},u.createElement(fe.fb,{padding:{y:1}},u.createElement(fe.cb,{onClick:this.handleReportHosterClick,"data-a-target":"hosting-ui-report-button","data-test-selector":ze.ReportButton},u.createElement(fe.fb,{padding:{x:1,y:.5}},Object(m.d)("Report {hostChannelDisplayName}",{hostChannelDisplayName:this.props.hostChannelDisplayName},"VideoPlayerHostingUI")))))))))},t}(u.Component),rt=Object(o.compose)(Object(ge.withLatencyTracking)("HostingUI",{autoReportInteractive:!0}))(it),at=n("wIs1"),ot=n("aCAx"),st=n("/HY+");var lt=Object(a.connect)(function(e){return{isLoggedIn:Object(c.f)(e),firstPageLoaded:e.session.firstPageLoaded}},function(e){return Object(o.bindActionCreators)({login:function(){return Object(l.e)(s.a.ReportHoster)},showReportUserModal:function(e){var t=d.__rest(e,[]);return Object(ot.d)(st.a,t)}},e)})(Object(at.a)(rt));var ct=Z(function(e){var t=e.hostedChannel;return{hostChannelID:e.channel&&e.channel.id||"",hostedChannelDisplayName:t?t.displayName:null,hostedChannelLogin:t?t.login:null,hostedChannelProfileImageURL:t?t.profileImageURL:null}})(lt),dt=n("kxrW"),ut=n("wxwP"),mt=n("gOYK"),pt=n("d2C5"),ht=n("jSzL"),gt=n("Ahlu"),ft=n("mSxK"),bt=n("ZLqn"),vt=n("ybym"),kt=n("eAAt"),Ct=n("0EKw"),yt=n("5goO"),St=n("i4un"),Et=n("T7Bf");n("uYye");var Nt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleLoginClick=function(){t.props.login()},t}return d.__extends(t,e),t.prototype.render=function(){var e=this.renderCampaignMessage();return e?u.createElement(fe.Ca,{"data-test-selector":"drops-campaign-details"},e):null},t.prototype.renderCampaignMessage=function(){var e=this,t=function(e){if(e&&e.user&&e.user.id){var t=e.user.id,n=e.user.stream;if(!n||"live"!==n.type||!n.game||!n.game.activeDropCampaigns)return null;var i=!!n.isStreamDropsEnabled,r=!!n.game.self&&!!n.game.self.isDropsLinked,a="",o=n.game.activeDropCampaigns;return o.some(function(e){return a=e.connectionURL,!!e.applicableChannels&&0===e.applicableChannels.length})?{isGlobal:!0,campaignURL:a,isChannelLinked:i,isUserLinked:r}:o.some(function(e){return!!e.applicableChannels&&e.applicableChannels.some(function(e){return e.id===t})})?{isGlobal:!1,campaignURL:a,isChannelLinked:i,isUserLinked:r}:null}}(this.props.dropsData);return t?t.isChannelLinked?this.props.isLoggedIn?t.isUserLinked?Object(m.d)("<x:green>Drops enabled!</x:green> Watch for a chance to earn loot.",{"x:green":function(e){return u.createElement(fe.Ca,{type:fe.gc.Span,bold:!0,className:"drops-campaign-details__drops-success"},e)}},"DropsCampaignDetails"):Object(m.d)("Enable in-game Drops with <x:link>Account Link.</x:link>",{"x:link":function(e){return u.createElement(fe.Aa,{to:t.campaignURL,targetBlank:!0},e)}},"DropsCampaignDetails"):Object(m.d)("Enable in-game Drops with <x:link>Twitch Account.</x:link>",{"x:link":function(t){return u.createElement(fe.Aa,{onClick:e.handleLoginClick},t)}},"DropsCampaignDetails"):Object(m.d)("Broadcaster has not enabled in-game Drops. <x:link>Learn More</x:link>",{"x:link":function(e){return u.createElement(fe.Aa,{to:"https://help.twitch.tv/customer/en/portal/articles/2754380-how-to-earn-drops",targetBlank:!0},e)}},"DropsCampaignDetails"):null},t}(u.Component),_t=Object(o.compose)(Object(pe.a)(Et,{name:"dropsData",options:function(e){return{variables:{login:e.channelLogin,isLoggedIn:e.isLoggedIn}}}}),Object(ge.withLatencyTracking)("DropsCampaignDetails",{autoReportInteractive:!0}))(Nt);var Dt,wt=Object(a.connect)(function(e){return{isLoggedIn:Object(c.f)(e)}},function(e){return Object(o.bindActionCreators)({login:function(){return Object(l.e)(s.a.DropsLoginButton)}},e)})(_t),Ot=n("vlTn"),It=n("djOf");(Dt||(Dt={})).EditButton="channel-info-bar-edit-button";var Tt,Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){if(!(this.props.isLoggedIn&&this.props.firstPageLoaded&&this.props.channelLogin&&this.props.data&&this.props.data.currentUser))return null;var e=this.props.data.currentUser;return e.login===this.props.channelLogin||e.roles&&(e.roles.isStaff||e.roles.isSiteAdmin||e.roles.isGlobalMod)?u.createElement(fe.fb,{margin:{left:1}},u.createElement(fe.C,{type:fe.I.Text,icon:fe.Db.Edit,onClick:this.props.onClick,"data-test-selector":Dt.EditButton},Object(m.d)("Edit","ChannelInfoBar"))):null},t}(u.Component),Lt=Object(pe.a)(It,{skip:function(e){return!e.firstPageLoaded||!e.isLoggedIn}})(Mt),Rt=(n("rhXE"),n("5in9")),xt=ie.a.wrap(function(){return Promise.resolve().then(n.bind(null,"QjI3"))},"SubscribeButton"),Ft=ie.a.wrap(function(){return n.e(124).then(n.bind(null,"Cjzi"))},"RealtimeStreamTagList",{placeholder:u.createElement(Ot.a,null)});!function(e){e.ReportButton="channel-info-bar-report-button",e.MoreButton="channel-info-bar-more-button",e.MoreBalloon="channel-info-bar-more-balloon",e.TeamName="channel-info-bar-team-name",e.TitleText="channel-info-bar-title-text",e.ChannelInfoBarWrapper="channel-info-bar-wrapper"}(Tt||(Tt={}));var At=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getGame=function(){var e=t.props.channel;if(e)return e.stream&&e.stream.id?e.stream.game||void 0:e.lastBroadcast&&e.lastBroadcast.game&&e.lastBroadcast.game.id?e.lastBroadcast.game:void 0},t.getTitle=function(){var e=t.props.channel;return e&&e.stream&&e.stream.title?e.stream.title:e&&e.lastBroadcast&&e.lastBroadcast.title?e.lastBroadcast.title:""},t.renderGame=function(){var e=t.getGame();return e&&e.name?u.createElement(Ct.a,{name:e.name}):null},t.renderGameBoxArt=function(){var e=t.getGame(),n=e&&e.name?e.name:"",i=e&&e.boxArtURL?e.boxArtURL:"";return e&&n&&i?u.createElement(fe.fb,{display:fe.Da.Flex,margin:{top:.5}},u.createElement(kt.a,{name:n,boxArtURL:i,size:fe.M.Size6})):null},t.renderTeam=function(){var e=t.props.userData&&t.props.userData.user;return e&&e.primaryTeam?u.createElement(yt.a,{"data-test-selector":Tt.TeamName,name:e.primaryTeam.name,displayName:e.primaryTeam.displayName}):null},t.handleReportChannelClick=function(){if(t.props.isLoggedIn){if(!t.props.channel||!t.props.channel.id)return;t.props.showReportUserModal({onClose:t.handleReportModalClose,reportContext:{contentType:O.Fa.USER_REPORT,targetUserID:t.props.channel.id},title:Object(m.d)("Report {channelLogin}",{channelLogin:t.props.channelLogin},"ReportUserModal")})}else t.props.login()},t.handleEditButtonClicked=function(){t.props.showEditBroadcastModal({channelLogin:t.props.channelLogin})},t.handleReportModalClose=function(e){(e===tt.a.MutationError||e===tt.a.Success)&&t.props.history.push("/")},t.maybeShowBrowserNotificationsUpsell=function(){return d.__awaiter(t,void 0,void 0,function(){return d.__generator(this,function(e){switch(e.label){case 0:return!m.n.get(ft.b,!1)&&Object(pt.a)()&&Object(ht.c)()&&m.q.experiments.getAndTrackAssignment(se.b.BrowserNotificationsUpsell)===ft.a?[4,mt.a.hasPushSubscription()]:[3,3];case 1:return e.sent()?[3,3]:(m.n.set(ft.b,!0),this.props.showBrowserNotificationsUpsellModal(),[4,mt.a.userSubscribe(gt.a.Channel)]);case 2:e.sent(),this.props.closeBrowserNotificationsUpsellModal(),e.label=3;case 3:return[2]}})})},t}return d.__extends(t,e),t.prototype.componentDidUpdate=function(){this.maybeReportInteractive()},t.prototype.componentDidMount=function(){this.maybeReportInteractive()},t.prototype.render=function(){if(this.props.channelIsHosting)return null;var e=this.getTitle(),t=this.props.userData&&this.props.userData.user,n=t&&t.profileViewCount?t.profileViewCount:0,i=Object(St.e)(),r=null;i&&this.props.firstPageLoaded&&(r=u.createElement(fe.fb,{display:fe.Da.Flex,flexWrap:fe.Ha.NoWrap,justifyContent:fe.eb.Between},u.createElement(fe.fb,null,u.createElement(et.a,{channelLogin:this.props.channelLogin,onFollow:this.maybeShowBrowserNotificationsUpsell,followUIType:et.b.IconAndText,unfollowUIType:et.b.IconOnly,balloonDirection:fe.y.TopRight,useContextualModals:!0})),u.createElement(fe.fb,{className:"channel-info-bar__sub-button-wrapper"},u.createElement(xt,{channelLogin:this.props.channelLogin,balloonDirection:fe.y.TopRight,"data-test-selector":"channel-info-bar__subscribe-button"}))));var a=this.getGame(),o=this.renderGame(),s=this.renderTeam();return u.createElement(fe.Ob,{className:"channel-info-bar","data-test-selector":Tt.ChannelInfoBarWrapper,display:fe.Da.Flex,flexWrap:fe.Ha.Wrap,flexDirection:i?fe.Ga.Column:void 0,justifyContent:fe.eb.Between,padding:1,border:!0,borderRadius:{bottomLeft:fe.A.Large,bottomRight:fe.A.Large},borderBottom:!0,breakpointLarge:{padding:{x:1,top:1,bottom:0}}},u.createElement(fe.fb,{className:"channel-info-bar__content-container",display:fe.Da.Flex,justifyContent:fe.eb.Between,margin:{bottom:1},fullWidth:!0},u.createElement(fe.fb,{fullWidth:!0},u.createElement(fe.fb,{display:fe.Da.Flex},this.renderGameBoxArt(),u.createElement(fe.fb,{className:"channel-info-bar__content-right",fullWidth:!0},u.createElement(fe.fb,{display:fe.Da.Flex,justifyContent:fe.eb.Between},u.createElement(fe.fb,{margin:{bottom:.5,right:2},ellipsis:!0},u.createElement(fe.Ca,{type:fe.gc.Span,fontSize:fe.Ia.Size4,"data-a-target":"stream-title","data-test-selector":Tt.TitleText,title:e},e)),u.createElement(fe.fb,null,r)),u.createElement(fe.fb,{display:fe.Da.Flex,flexWrap:fe.Ha.Wrap},o,o&&s&&u.createElement(fe.fb,{margin:{right:1}},u.createElement(fe.Ca,{bold:!0,color:fe.R.Alt2,fontSize:fe.Ia.Size5},"•")),s),u.createElement(fe.fb,{margin:{top:.5},display:fe.Da.Flex,alignItems:fe.i.Start,justifyContent:fe.eb.Between,flexWrap:fe.Ha.Wrap},u.createElement(fe.fb,{display:fe.Da.Flex,flexWrap:fe.Ha.Wrap,padding:{top:.5}},this.props.firstPageLoaded?u.createElement(Ft,{channelLogin:this.props.channelLogin,gameID:a&&a.id}):u.createElement(Ot.a,null)),u.createElement(fe.fb,{display:fe.Da.Flex},u.createElement(fe.Ob,{display:fe.Da.Flex,color:fe.R.Alt2,fontSize:fe.Ia.Size5},u.createElement(fe.Ob,{className:"channel-info-bar__viewers-wrapper",color:fe.R.Live,display:fe.Da.InlineFlex},u.createElement(vt.a,{login:this.props.channelLogin})),u.createElement(fe.Ob,{display:fe.Da.InlineFlex,alignItems:fe.i.Center},u.createElement(fe.Nb,{value:Object(m.d)("{count, number}",{count:n},"ChannelInfoBar"),label:Object(m.d)("Total Views","ChannelInfoBar"),icon:fe.Db.GlyphViews,"data-a-target":"total-views-count"}))),u.createElement(fe.fb,{display:fe.Da.Flex},this.props.firstPageLoaded&&u.createElement(Lt,{channelLogin:this.props.channelLogin,isLoggedIn:this.props.isLoggedIn,firstPageLoaded:this.props.firstPageLoaded,onClick:this.handleEditButtonClicked}),u.createElement(fe.fb,{margin:{x:1}},this.renderChannelShareButton()),u.createElement(Ze.a,null,u.createElement(fe.D,{ariaLabel:Object(m.d)("More options","ChannelInfoBar"),icon:fe.Db.More,"data-a-target":Tt.MoreButton}),u.createElement(fe.x,{direction:fe.y.TopRight,"data-a-target":Tt.MoreBalloon},u.createElement(fe.fb,{padding:{y:1}},u.createElement(fe.cb,{onClick:this.handleReportChannelClick,"data-a-target":Tt.ReportButton},u.createElement(fe.fb,{padding:{x:1,y:.5}},Object(m.d)("Report {channelLogin}",{channelLogin:this.props.channelLogin},"ChannelInfoBar"))))))))),this.props.firstPageLoaded&&u.createElement(wt,{channelLogin:this.props.channelLogin}))))))},t.prototype.renderChannelShareButton=function(){return this.props.channel&&this.props.channel.login?u.createElement(bt.a,{login:this.props.channel.login,displayName:this.props.channel.displayName||this.props.channel.login,title:this.getTitle()}):null},t.prototype.maybeReportInteractive=function(){this.props.contextLoading||this.props.latencyTracking.reportInteractive()},t}(u.Component);var jt=Object(r.compose)(at.a,Z(function(e){return{channel:e.channel,contextError:e.error,contextLoading:e.loading}}),Object(pe.a)(Rt,{name:"userData",skip:function(e){return!e.firstPageLoaded},options:function(e){return{variables:{login:e.channelLogin}}}}),Object(ge.withLatencyTracking)("ChannelInfoBar"))(At),Ut=ie.a.wrap(function(){return n.e(123).then(n.bind(null,"bDGO"))},"EditBroadcastModal");var Bt=Object(a.connect)(function(e){return{isLoggedIn:Object(c.f)(e),firstPageLoaded:e.session.firstPageLoaded}},function(e){return Object(o.bindActionCreators)({login:function(){return Object(l.e)(s.a.ReportChannel)},showEditBroadcastModal:function(e){var t=d.__rest(e,[]);return Object(ot.d)(Ut,t)},showBrowserNotificationsUpsellModal:function(){return Object(ot.d)(ut.a,{})},closeBrowserNotificationsUpsellModal:ot.c,showReportUserModal:function(e){var t=d.__rest(e,[]);return Object(ot.d)(st.a,t)}},e)})(jt),Pt=n("WOQ1"),Vt=n("LA8z"),Ht=n("NvVO"),Gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(Vt.a,null)},t}(u.PureComponent),Wt=Object(ge.withPageTracking)("ChannelPage",{autoReportInteractive:!0,destination:Ht.a.ChannelIndex,location:b.PageviewLocation.Channel})(Gt),qt=n("CxVm"),zt=n("4p7I"),Qt=n("9C/b"),Yt=n("mLw1"),Kt=n("yoKv"),$t=n("9MrB"),Xt=n("YXxK"),Jt=n("7JxC"),Zt=(n("WrC7"),ie.a.wrap(function(){return Promise.all([n.e(0),n.e(128)]).then(n.bind(null,"/s/o"))},"CampaignsTabs",{placeholder:u.createElement(Jt.a,null)})),en=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){return this.props.firstPageLoaded&&this.props.channel&&this.props.channel.id?u.createElement(Zt,{channelID:this.props.channel.id,channelLogin:this.props.channel.login||this.props.channelLogin,isLive:this.props.isLive,showInsiderChannel:this.props.showInsiderChannel,onChannelChange:this.props.onChannelChange}):null},t.prototype.componentDidMount=function(){this.setPageTitle(),this.props.updateChatTrackingContext({viewerContext:Xt.b.ChannelPage})},t.prototype.componentDidUpdate=function(e){(this.props.channel&&e.channel&&this.props.channel.displayName!==e.channel.displayName||this.props.channelLogin!==e.channelLogin)&&this.setPageTitle()},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName?this.props.channel.displayName:this.props.channelLogin;m.q.setPageTitle(e)},t}(u.Component);var tn=Object(o.compose)(Z(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:T(e.channel,e.video,e.collection,e.clip),isLive:e.live,showInsiderChannel:e.videoPlayerSource!==e.channelLogin,onChannelChange:e.toggleInsiderChannel}}),Object($t.b)(function(e){return d.__assign({},e)}),Object(ge.withPageTracking)("ChannelPage",{autoReportInteractive:!0,destination:Ht.a.ChannelIndex,location:b.PageviewLocation.Channel,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(en);var nn=Object(r.compose)(Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(tn),rn=n("4rCz"),an=n("4hz/"),on=function(){return u.createElement(u.Fragment,null,u.createElement(fe.fb,{display:fe.Da.Flex,justifyContent:fe.eb.Start},u.createElement(fe.fb,null,u.createElement(fe.sb,{height:32,width:96})),u.createElement(fe.fb,null,u.createElement(fe.sb,{height:32,width:84,overlay:!0}))),u.createElement(an.a,null))},sn=ie.a.wrap(function(){return n.e(129).then(n.bind(null,"r93r"))},"ChannelEventsContent",{placeholder:u.createElement(on,null)}),ln=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onEventToggle=function(e){t.props.history.replace(d.__assign({},t.props.location,{search:e}))},t}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(sn,{channelLogin:this.props.channelLogin,searchQuery:this.props.location.search,onEventToggle:this.onEventToggle})},t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(1),this.setPageTitle(),this.props.updateChatTrackingContext({viewerContext:Xt.b.ChannelEventsPage})},t.prototype.componentDidUpdate=function(){this.setPageTitle()},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;rn.r.setPageTitle(Object(m.d)("{channelName}'s Events",{channelName:e},"ChannelRootEventsPage"))},t}(u.Component);var cn=Object(r.compose)(Z(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:T(e.channel,e.video,e.collection,e.clip)}}),Object($t.b)(function(e){return d.__assign({},e)}),Object(ge.withPageTracking)("EventCollectionsPage",{destination:Ht.a.ChannelEvents,location:b.PageviewLocation.ChannelEvents,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(ln);var dn=Object(r.compose)(Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(cn),un=n("bdHe"),mn=ie.a.wrap(function(){return n.e(130).then(n.bind(null,"EJeP"))},"ChannelFollowersContent",{placeholder:u.createElement(un.a,null)}),pn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(mn,{channelLogin:this.props.channelLogin})},t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(1),this.setPageTitle(),this.props.updateChatTrackingContext({viewerContext:Xt.b.ChannelFollowersPage})},t.prototype.componentDidUpdate=function(e){(this.props.channel&&e.channel&&this.props.channel.displayName!==e.channel.displayName||this.props.channelLogin!==e.channelLogin)&&this.setPageTitle()},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;rn.r.setPageTitle(Object(m.d)("{channelName}'s Followers",{channelName:e},"ChannelRootFollowersPage"))},t}(u.Component);var hn=Object(r.compose)(Z(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:T(e.channel,e.video,e.collection,e.clip)}}),Object($t.b)(function(e){return d.__assign({},e)}),Object(ge.withPageTracking)("ChannelFollowersPage",{destination:Ht.a.ChannelFollowers,location:b.PageviewLocation.Followers,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(pn);var gn=Object(r.compose)(Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(hn),fn=ie.a.wrap(function(){return n.e(131).then(n.bind(null,"bpxw"))},"ChannelFollowingContent",{placeholder:u.createElement(un.a,null)}),bn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(fn,{channelLogin:this.props.channelLogin})},t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(1),this.setPageTitle(),this.props.updateChatTrackingContext({viewerContext:Xt.b.ChannelFollowingPage})},t.prototype.componentDidUpdate=function(e){this.props.channelLogin!==e.channelLogin&&this.setPageTitle()},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;rn.r.setPageTitle(Object(m.d)("{channelName}'s Follows",{channelName:e},"ChannelRootFollowingPage"))},t}(u.Component);var vn=Object(r.compose)(Z(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:T(e.channel,e.video,e.collection,e.clip)}}),Object($t.b)(function(e){return d.__assign({},e)}),Object(ge.withPageTracking)("ChannelFollowingPage",{destination:Ht.a.ChannelFollows,location:b.PageviewLocation.Follows,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(bn);var kn=Object(r.compose)(Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(vn),Cn=(n("4IKE"),ie.a.wrap(function(){return Promise.all([n.e(0),n.e(132)]).then(n.bind(null,"EuHz"))},"ChannelPanels",{placeholder:u.createElement(Jt.a,null)})),yn="panel-container",Sn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(fe.fb,{display:fe.Da.Flex,flexDirection:fe.Ga.ColumnReverse,breakpointMedium:{flexDirection:fe.Ga.Row},flexWrap:fe.Ha.NoWrap,margin:{x:"auto"},padding:{bottom:3},flexShrink:1},u.createElement(fe.fb,{className:"channel-page__panel-container","data-test-selector":yn,flexGrow:1,flexShrink:1},this.props.firstPageLoaded&&this.props.channel&&this.props.channel.id&&u.createElement(Cn,{channelID:this.props.channel.id,channelLogin:this.props.channelLogin})))},t.prototype.componentDidMount=function(){this.setPageTitle(),this.props.updateChatTrackingContext({viewerContext:Xt.b.ChannelPage})},t.prototype.componentDidUpdate=function(e){(!e.channel&&this.props.channel||this.props.channel&&e.channel&&this.props.channel.displayName!==e.channel.displayName||this.props.channelLogin!==e.channelLogin)&&this.setPageTitle()},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName?this.props.channel.displayName:this.props.channelLogin;m.q.setPageTitle(e)},t}(u.Component);var En=Object(o.compose)(Z(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:T(e.channel,e.video,e.collection,e.clip)}}),Object($t.b)(function(e){return d.__assign({},e)}),Object(ge.withPageTracking)("ChannelPage",{autoReportInteractive:!0,destination:Ht.a.ChannelIndex,location:b.PageviewLocation.Channel,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(Sn);var Nn,_n=Object(r.compose)(Qt.a,Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(En),Dn=n("H1ft"),wn=n("QzU5"),On=n("L4bB"),In=n("XKWF"),Tn=n("VwyG"),Mn=function(e){return u.createElement(Tn.a,{ownerLogin:e.channelLogin,permittedRoles:{owner:!0,editor:!0,staff:!0}},function(t){return t.permitted?u.createElement(fe.C,{type:fe.I.Hollow,linkTo:"/"+e.channelLogin+"/manager/collections"},Object(m.d)("Manage your collections","collection-page")):null})},Ln=n("kyTI"),Rn=n("QdeI"),xn=n("cERj");function Fn(e){var t=N.parse(e)[E.d];if("string"!=typeof t)return null;switch(t.toUpperCase()){case E.f.Newest.toUpperCase():return E.f.Newest;case E.f.Popular.toUpperCase():return E.f.Popular;default:return null}}!function(e){e.ButtonText="button-text",e.SortText="sort-text"}(Nn||(Nn={}));var An,jn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderSort=function(e){return u.createElement(fe.cb,{"data-test-selector":function(e){return"sort-interactable-"+e.searchValue}(e),onClick:function(){t.handleSortClick(e)},key:e.label,selected:!!e.selected},u.createElement(fe.fb,{padding:{x:1,y:.5},"data-test-selector":Nn.SortText},e.label))},t.handleSortClick=function(e){t.props.history.push(t.generateLocationWithSort(t.props.location,e.searchValue))},t}return d.__extends(t,e),t.prototype.componentWillMount=function(){this.checkSortValue(this.props.location)},t.prototype.render=function(){var e=this.getSorts(),t=e.find(function(e){return!!e.selected});return u.createElement("div",null,u.createElement(fe.fb,{padding:{bottom:.5}},u.createElement(fe.Ca,{bold:!0},Object(m.d)("Sorted by","VideoSort"))),u.createElement(Ze.a,{hideBalloonOnInsideClick:!0},u.createElement(fe.C,{type:fe.I.Hollow,dropdown:!0,"data-test-selector":Nn.ButtonText},t?t.label:e[0].label),u.createElement(fe.x,{noTail:!0},e.map(this.renderSort))))},t.prototype.getSorts=function(){var e=[{label:Object(m.d)("Date","VideoSort"),searchValue:E.f.Newest},{label:Object(m.d)("Popular","VideoSort"),searchValue:E.f.Popular}],t=Fn(this.props.location.search),n=e.find(function(e){return null!==t&&e.searchValue===t});return n&&(n.selected=!0),e},t.prototype.checkSortValue=function(e){Fn(e.search)||this.props.history.replace(this.generateLocationWithSort(e,E.f.Newest))},t.prototype.generateLocationWithSort=function(e,t){var n;return Object(w.d)(e,((n={})[E.d]=t,n))},t}(u.Component),Un=Object(Qt.a)(jn),Bn=ie.a.wrap(function(){return n.e(137).then(n.bind(null,"gcyA"))},"ChannelVideosOverviewContent",{placeholder:u.createElement(Rn.a,null)}),Pn=ie.a.wrap(function(){return n.e(136).then(n.bind(null,"6mes"))},"ChannelClipsContent",{placeholder:u.createElement(Rn.a,null)}),Vn=ie.a.wrap(function(){return n.e(135).then(n.bind(null,"WfYB"))},"ChannelCollectionsContent",{placeholder:u.createElement(Rn.a,null)}),Hn=ie.a.wrap(function(){return n.e(134).then(n.bind(null,"TCEa"))},"FilterableVideoTower",{placeholder:u.createElement(Rn.a,null)});!function(e){e.Content="content",e.Sort="sort"}(An||(An={}));var Gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){var e=Object(E.v)(this.props.location.search),t=this.getComponentsForFilter(e);return u.createElement("div",null,e&&this.renderVideoOptions(t.sort),u.createElement("div",{"data-test-selector":An.Content},t.content))},t.prototype.componentDidMount=function(){var e=this.props.critical?1:0;this.props.latencyTracking.reportInteractive(e)},t.prototype.renderVideoOptions=function(e){return u.createElement(fe.fb,{"data-test-selector":An.Sort,display:fe.Da.Flex,flexDirection:fe.Ga.Row,padding:{bottom:1}},u.createElement(fe.fb,{padding:{right:1}},u.createElement(xn.a,{channelLogin:this.props.channelLogin})),e)},t.prototype.getComponentsForFilter=function(e){var t=this.props.channelLogin,n=Object(E.o)(this.props),i=Object(E.w)(this.props.location.search)||E.f.Newest,r=Object(E.u)(this.props.location.search),a=r||void 0;if(!e)return{content:u.createElement(Bn,{channelLogin:t,collectionID:n})};switch(e){case E.e.Highlights:case E.e.PastPremieres:case E.e.PastBroadcasts:case E.e.Uploads:return{content:this.getFilterableVideoTower(e,a),sort:u.createElement(Un,null)};case E.e.Clips:return{content:u.createElement(Pn,{channelName:t,videoBrowseOptions:{filter:e,sort:i,range:a}}),sort:u.createElement(On.a,{hideLanguageFilter:!0})};case E.e.Collections:return{content:u.createElement(Vn,{channelLogin:t,videoBrowseOptions:{filter:e,sort:i,range:a}}),sort:u.createElement(fe.fb,{alignItems:fe.i.End,display:fe.Da.Flex,fullWidth:!0,justifyContent:fe.eb.End},u.createElement(fe.fb,{flexGrow:0},u.createElement(Mn,{channelLogin:t})))};case E.e.All:return{content:this.getFilterableVideoTower(e),sort:u.createElement(Un,null)};case E.e.Featured:return{content:this.getFilterableVideoTower(e),sort:u.createElement(fe.fb,{flexGrow:1,flexShrink:1,display:fe.Da.Flex,justifyContent:fe.eb.End,alignItems:fe.i.End},u.createElement(Ln.a,{channelLogin:this.props.channelLogin}))};default:return e}},t.prototype.getFilterableVideoTower=function(e,t){var n=void 0;switch(e){case E.e.Highlights:n=wn.a.Highlight;break;case E.e.PastBroadcasts:n=wn.a.Archive;break;case E.e.PastPremieres:n=wn.a.PastPremiere;break;case E.e.Uploads:n=wn.a.Upload;break;case E.e.Featured:case E.e.All:break;default:return e}var i=Object(E.w)(this.props.location.search)||E.f.Newest;return u.createElement(Hn,{channelLogin:this.props.channelLogin,filter:n,sort:Object(In.c)(i),videoBrowseOptions:{filter:e,sort:i,range:t},multipleVideoGameMarkersType:Object(Dn.b)()})},t}(u.Component);var Wn=Object(r.compose)(Qt.a,Z(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:T(e.channel,e.video,e.collection,e.clip)}}),Object(ge.withLatencyTracking)("ChannelVideosContent"))(Gn),qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.componentDidMount=function(){this.setPageTitle(),this.setClipsFilter()},t.prototype.componentDidUpdate=function(){this.setPageTitle(),this.setClipsFilter()},t.prototype.render=function(){return Object(E.v)(m.q.history.location.search)?u.createElement(Wn,{critical:!0}):null},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;m.q.setPageTitle(Object(m.d)("{channelName}'s Clips",{channelName:e},"ChannelVideosClipsPage"))},t.prototype.setClipsFilter=function(){Object(E.v)(m.q.history.location.search)||m.q.history.replace({search:"?filter="+E.e.Clips})},t}(u.Component);var zn=Object(r.compose)(Z(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:T(e.channel,e.video,e.collection,e.clip)}}),Object(ge.withPageTracking)("ClipsChannelPage",{destination:Ht.a.ChannelClips,autoReportInteractive:!0,location:b.PageviewLocation.ChannelClips,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(qn),Qn=n("sQmm"),Yn=function(){return u.createElement(u.Fragment,null,u.createElement(fe.fb,{display:fe.Da.Flex,flexDirection:fe.Ga.Row,alignItems:fe.i.End,justifyContent:fe.eb.End,padding:.5},u.createElement(fe.fb,{margin:{right:1}},u.createElement(fe.sb,{height:25,width:80})),u.createElement(fe.fb,null,u.createElement(fe.sb,{height:25,width:80}))),u.createElement(fe.Ob,{border:!0,padding:2,display:fe.Da.Flex,alignItems:fe.i.Center,justifyContent:fe.eb.Center,margin:{top:1,bottom:1}},u.createElement(fe.fb,null,u.createElement(fe.sb,{height:25,width:80}))),u.createElement(Qn.a,null))},Kn=n("UNiU"),$n=ie.a.wrap(function(){return Promise.all([n.e(0),n.e(133)]).then(n.bind(null,"k7UE"))},"ChannelVideosEditPageComponent",{placeholder:u.createElement(Yn,null)}),Xn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){var e=this;return Object(Kn.a)()?u.createElement(Tn.a,{ownerLogin:this.props.channelLogin,permittedRoles:{owner:!0,editor:!0,staff:!1}},function(t){var n=t.loading,i=t.permitted,r=t.error;return n?u.createElement(Yn,null):!i||r?e.redirectToVideosBrowse():u.createElement($n,{channelLogin:e.props.channelLogin})}):this.redirectToVideosBrowse()},t.prototype.redirectToVideosBrowse=function(){return u.createElement(Yt.a,{to:Object(E.k)(this.props.channelLogin)})},t}(u.Component);var Jn=Object(r.compose)(Z(function(e){return{channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:T(e.channel,e.video,e.collection,e.clip)}}),Object(ge.withPageTracking)("ChannelVideosEditPage",{destination:Ht.a.VideosEditPage,autoReportInteractive:!0,location:b.PageviewLocation.ChannelVideosEdit,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(Xn),Zn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.componentDidMount=function(){this.setPageTitle()},t.prototype.componentDidUpdate=function(){this.setPageTitle()},t.prototype.render=function(){return u.createElement(Wn,{critical:!0})},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;m.q.setPageTitle(Object(m.d)("{channelName}'s Videos",{channelName:e},"ChannelRootVideosPage"))},t}(u.Component);var ei=Object(r.compose)(Z(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:T(e.channel,e.video,e.collection,e.clip)}}),Object(ge.withPageTracking)("ChannelVideosPage",{destination:Ht.a.VideosPage,autoReportInteractive:!0,location:b.PageviewLocation.ChannelVideos,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(Zn),ti=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(u.Fragment,null,this.props.firstPageLoaded&&this.props.channel&&this.props.channel.id&&u.createElement(Wn,null))},t}(u.Component);var ni=Object(r.compose)(Z(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:T(e.channel,e.video,e.collection,e.clip)}}),Object(ge.withPageTracking)("VideoWatchPage",{autoReportInteractive:!0,destination:Ht.a.VideoWatchPage,location:b.PageviewLocation.VideoWatchPage,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}),Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(ti),ii=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderPanelArea=function(){return t.props.channel&&t.props.channel.id?function(e){return!(!e||!e.id)&&!!e.campaignProperties&&!!e.campaignProperties.domains&&e.campaignProperties.domains.length>0}(t.props.channel)?u.createElement(nn,null):u.createElement(_n,null):null},t.renderVideosArea=function(){return u.createElement(ni,null)},t.renderEventsPage=function(){return t.props.channel&&t.props.channel.id?u.createElement(dn,null):null},t.renderFollowersPage=function(){return t.props.channel&&t.props.channel.id?u.createElement(gn,null):null},t.renderFollowingPage=function(){return t.props.channel&&t.props.channel.id?u.createElement(kn,null):null},t.renderVideosPage=function(){return t.props.channel&&t.props.channel.id?u.createElement(ei,null):null},t.renderVideosEditPage=function(){return t.props.channel&&t.props.channel.id?u.createElement(Jn,null):null},t.renderClipsPage=function(){return t.props.channel&&t.props.channel.id?u.createElement(zn,null):null},t.redirectLegacyChannelCollections=function(){var e=Object(E.k)(t.props.match.params.channelLogin,{filter:E.e.Collections});return u.createElement(Yt.a,{to:e})},t.redirectLegacyVideoFilters=function(e){var n,i=t.props.match.params.channelLogin,r=Object(E.s)(e),a=Object(E.w)(e.location.search)||void 0,o=d.__assign({},e.location.state);return n=r?Object(E.k)(i,{filter:Object(E.x)(r)||void 0,sort:a}):Object(E.k)(i),u.createElement(Yt.a,{to:{pathname:n,state:o}})},t}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(Kt.a,null,u.createElement(zt.a,{path:"/collections/:collectionID",render:this.renderVideosArea}),u.createElement(zt.a,{path:"/videos/:videoID",render:this.renderVideosArea}),u.createElement(zt.a,{path:"/videos/v:videoID",render:this.renderVideosArea}),u.createElement(zt.a,{path:"/:channelLogin",exact:!0,render:this.renderPanelArea}),u.createElement(zt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/about",render:this.renderPanelArea}),u.createElement(zt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/events",render:this.renderEventsPage}),u.createElement(zt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/followers",render:this.renderFollowersPage}),u.createElement(zt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/following",render:this.renderFollowingPage}),u.createElement(zt.a,{path:"/:channelLogin/p/:entityID",render:this.renderPanelArea}),u.createElement(zt.a,{path:"/:channelLogin/rooms/:roomName",render:this.renderPanelArea}),u.createElement(zt.a,{path:"/:channelLogin/videos/edit",exact:!0,render:this.renderVideosEditPage}),u.createElement(zt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/videos",exact:!0,render:this.renderVideosPage}),u.createElement(zt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/videos/:filter(all|archive|upload|highlight|past_premiere)",render:this.redirectLegacyVideoFilters}),u.createElement(zt.a,{path:"/:channelLogin/clips",render:this.renderClipsPage}),u.createElement(zt.a,{path:"/:channelLogin/collections",render:this.redirectLegacyChannelCollections}),u.createElement(zt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?",render:this.renderVideosArea}))},t}(u.Component);var ri,ai=Object(o.compose)(Qt.a,Z(function(e){return{channel:e.channel}}))(ii),oi=n("KOTp"),si=n("kduP");!function(e){e.Title="title",e.Date="date"}(ri||(ri={}));var li,ci=/\S/,di=function(e){var t=e.clip,n="";return t.title&&""!==t.title&&ci.test(t.title)&&t.title&&(n=t.title),u.createElement(fe.Ob,null,u.createElement(fe.fb,{display:fe.Da.Flex},u.createElement(fe.Ca,{ellipsis:!0,bold:!0,title:n,fontSize:fe.Ia.Size5,type:fe.gc.Span,"data-test-selector":ri.Title},n),u.createElement(fe.Ca,{bold:!0,fontSize:fe.Ia.Size5,type:fe.gc.Span,color:fe.R.Alt2,"data-test-selector":ri.Date}," • ",Object(m.c)(new Date(t.createdAt),"medium"))))};!function(e){e.InfoPlaceholder="info-placeholder",e.SubText="sub-text",e.SubTextGame="sub-text-game",e.SubTextCurator="sub-text-curator",e.SubTextViews="sub-text-views"}(li||(li={}));var ui=Object(ge.withLatencyTracking)("ClipInfo",{autoReportInteractive:!0})(function(e){var t,n=e.clip,i=n&&n.broadcaster&&u.createElement(fe.Aa,{to:"/"+n.broadcaster.login},n.broadcaster.login);t=n&&n.game&&i?Object(m.d)("{broadcaster} playing {game}",{broadcaster:i,game:u.createElement(fe.Aa,{to:""+Object(si.c)(n.game.name)},n.game.name)},"ClipInfo"):i;var r,a=n&&n.game?u.createElement("span",{"data-test-selector":li.SubTextGame},t):null,o=n&&n.curator?u.createElement("span",{"data-test-selector":li.SubTextCurator},n&&n.game&&!!n.curator&&u.createElement("span",null," • "),n&&n.curator&&Object(m.d)("Clipped by {curator}",{curator:u.createElement(fe.Aa,{to:"/"+n.curator.login},n.curator.login)},"ClipInfo")):null,s=u.createElement("span",{"data-test-selector":li.SubTextViews},n&&n.curator&&u.createElement("span",null," • "),n&&Object(m.d)("{viewCount, plural, one {# view} other {# views}}",{viewCount:n.viewCount||0},"ClipInfo"));return r=null===n?u.createElement(fe.fb,{"data-test-selector":li.InfoPlaceholder,display:fe.Da.Flex,flexDirection:fe.Ga.Column},u.createElement(fe.sb,{lineCount:1,width:320}),u.createElement(fe.sb,{lineCount:1,width:240})):u.createElement("div",null,u.createElement(di,{clip:n}),u.createElement(fe.Ob,{"data-test-selector":li.SubText,color:fe.R.Alt2},a,o,s)),u.createElement(fe.J,{row:!0},u.createElement(fe.K,{overflow:fe.mb.Hidden},r))}),mi=ie.a.wrap(function(){return Promise.resolve().then(n.bind(null,"QjI3"))},"SubscribeButton"),pi=function(e){return Object(St.e)()&&e.firstPageLoaded?u.createElement(fe.fb,{display:fe.Da.Flex,flexWrap:fe.Ha.NoWrap,justifyContent:fe.eb.Between},u.createElement(fe.fb,null,u.createElement(et.a,{channelLogin:e.login,followUIType:et.b.IconAndText,unfollowUIType:et.b.IconOnly,balloonDirection:fe.y.TopRight})),u.createElement(fe.fb,{margin:{left:1}},u.createElement(mi,{channelLogin:e.login,balloonDirection:fe.y.TopRight,"data-test-selector":"social-buttons-group__subscribe-button"}))):null};pi.displayName="SocialButtonsGroup";var hi,gi=Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}})(pi),fi=n("jsEL"),bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){return u.createElement("li",null,u.createElement(fe.cb,d.__assign({"data-test-selector":this.props.testSelector},this.props.interactableProps),u.createElement(fe.fb,{padding:{x:1,y:.5}},this.props.children)))},t=d.__decorate([Object(ge.withLatencyTracking)("InteractableOption",{autoReportInteractive:!0})],t)}(u.Component),vi=n("y8iI");!function(e){e.ClipOptionsButton="clip-options-button",e.ClipOptionsContainer="clip-options-container",e.ReportButton="report",e.DeleteAllButton="delete-all",e.DeleteButton="delete",e.BanUserButton="ban-user",e.TimeOutButton="timeout-user"}(hi||(hi={}));var ki=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleReportModalClose=function(e){(e===tt.a.MutationError||e===tt.a.Success)&&t.props.history.push("/")},t}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(Ze.a,null,u.createElement(fe.D,{"data-test-selector":hi.ClipOptionsButton,type:fe.F.Hollow,icon:fe.Db.More,ariaLabel:Object(rn.d)("Clip Options","ClipOptions"),disabled:!this.props.clip}),this.props.clip?u.createElement(fe.x,{direction:fe.y.TopRight},u.createElement(fe.Ob,{padding:{y:1},color:fe.R.Link},u.createElement("ul",{"data-test-selector":hi.ClipOptionsContainer},this.renderReportOption(this.props.clip),this.renderDeleteOption(this.props.clip),this.renderDeleteAllOption(this.props.clip),this.renderBanUserOption(this.props.clip),this.renderTimeOutUserOption(this.props.clip)))):u.createElement(fe.x,null))},t.prototype.renderDeleteOption=function(e){var t=this;if(this.isCurator(e)||this.isBroadcaster(e)||this.isStafforSiteAdmin()){var n={onClick:function(){t.props.onDeleteClipClick({slug:e.slug,onClose:t.props.onCloseModal})},type:fe.db.Alert};return u.createElement(bi,{key:"delete-option",interactableProps:n,testSelector:hi.DeleteButton},Object(rn.d)("Delete","ClipOptions"))}},t.prototype.renderDeleteAllOption=function(e){var t=this;if(this.isBroadcaster(e)||this.isStafforSiteAdmin()){var n={type:fe.db.Alert,onClick:function(){t.props.onDeleteAllClipsClick({slug:e.slug,onClose:t.props.onCloseModal})}};return u.createElement(bi,{key:"delete-all-option",interactableProps:n,testSelector:hi.DeleteAllButton},Object(rn.d)("Delete All Clips from Video","ClipOptions"))}},t.prototype.renderReportOption=function(e){var t=this,n={onClick:function(){t.props.data.currentUser?t.props.onReportClick({onClose:t.handleReportModalClose,reportContext:{contentType:O.Fa.CLIP_REPORT,contentID:e.slug,targetUserID:t.getBroadcasterID(e),additionalTrackingID:t.getcuratorID(e)},title:Object(rn.d)("Report this Clip","ClipsOptions")}):t.props.onShowLogin()}};return u.createElement(bi,{key:"report-option",interactableProps:n,testSelector:hi.ReportButton},Object(rn.d)("Report","ClipOptions"))},t.prototype.renderBanUserOption=function(e){var t=this;if(this.isBroadcaster(e)||this.isStafforSiteAdmin()){var n={login:"",displayName:""};e.curator&&e.curator.login&&e.curator.displayName&&(n={login:e.curator.login,displayName:e.curator.displayName});var i={onClick:function(){t.props.onBanClick({targetUser:n,broadcasterID:t.getBroadcasterID(e),onClose:t.props.onCloseModal})},type:fe.db.Alert};return u.createElement(bi,{key:"ban-option",interactableProps:i,testSelector:hi.BanUserButton},Object(rn.d)("Ban User","ClipOptions"))}},t.prototype.renderTimeOutUserOption=function(e){var t=this;if(this.isBroadcaster(e)||this.isStafforSiteAdmin()){var n={login:"",displayName:""};e.curator&&e.curator.login&&e.curator.displayName&&(n={login:e.curator.login,displayName:e.curator.displayName});var i={onClick:function(){t.props.onTimeOutClick({targetUser:n,broadcasterID:t.getBroadcasterID(e),onClose:t.props.onCloseModal})},type:fe.db.Alert};return u.createElement(bi,{key:"timeout-option",interactableProps:i,testSelector:hi.TimeOutButton},Object(rn.d)("Timeout User (24 hr)","ClipOptions"))}},t.prototype.isCurator=function(e){return!(!this.props.data||this.props.data.loading||this.props.data.error||!this.props.data.currentUser)&&this.props.data.currentUser.id===this.getcuratorID(e)},t.prototype.isBroadcaster=function(e){return!(!this.props.data||this.props.data.loading||this.props.data.error||!this.props.data.currentUser)&&this.props.data.currentUser.id===this.getBroadcasterID(e)},t.prototype.isStafforSiteAdmin=function(){return!(!this.props.data||this.props.data.loading||this.props.data.error||!this.props.data.currentUser||!this.props.data.currentUser.roles)&&(this.props.data.currentUser.roles.isStaff||this.props.data.currentUser.roles.isSiteAdmin)},t.prototype.getBroadcasterID=function(e){return e.broadcaster&&e.broadcaster.id?e.broadcaster.id:""},t.prototype.getcuratorID=function(e){return e.curator&&e.curator.id?e.curator.id:""},t}(u.Component),Ci=Object(r.compose)(Object(pe.a)(vi,{skip:function(e){return null===e.clip}}),Object(ge.withLatencyTracking)("ClipsOptions",{autoReportInteractive:!0}))(ki);var yi,Si=Object(a.connect)(null,function(e){return Object(o.bindActionCreators)({onShowLogin:function(){return Object(l.e)(s.a.ClipsOptions)},onDeleteClipClick:function(e){return Object(ot.d)(fi.d,{slug:e.slug,onClose:e.onClose})},onDeleteAllClipsClick:function(e){return Object(ot.d)(fi.e,{slug:e.slug,onClose:e.onClose})},onReportClick:function(e){var t=d.__rest(e,[]);return Object(ot.d)(st.a,t)},onBanClick:function(e){return Object(ot.d)(fi.b,{targetUser:e.targetUser,broadcasterID:e.broadcasterID,isTemporary:!1,onClose:e.onClose})},onTimeOutClick:function(e){return Object(ot.d)(fi.b,{targetUser:e.targetUser,broadcasterID:e.broadcasterID,isTemporary:!0,onClose:e.onClose})},onCloseModal:ot.c},e)})(Object(Qt.a)(Ci)),Ei=n("EuPq"),Ni=n("CYfc"),_i=n("MLDe"),Di=n("McYG");(yi||(yi={})).ClipLink="clip-link";var wi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){var e=null;return this.props.clip&&(e=this.shareBalloonContent(this.props.clip)),u.createElement(Ze.a,null,u.createElement(fe.C,{disabled:!this.props.clip,icon:fe.Db.Share,type:this.props.buttonType},Object(m.d)("Share","ClipShareBox")),u.createElement(fe.x,{direction:this.props.balloonDirection,size:fe.z.Small},e))},t.prototype.shareBalloonContent=function(e){var t=e.game?d.__assign({},e.game,{__typename:"Game"}):null,n=e.curator?{id:e.curator.id,displayName:e.curator.displayName,login:e.curator.login,__typename:"User"}:null,i=e.broadcaster?{id:e.broadcaster.id,displayName:e.broadcaster.displayName,login:e.broadcaster.login,profileImageURL:null,__typename:"User"}:null,r={id:e.id,slug:e.slug,url:e.url,embedURL:"",title:e.title,viewCount:e.viewCount,language:e.language,curator:n,game:t,broadcaster:i,thumbnailURL:"",createdAt:e.createdAt,durationSeconds:e.durationSeconds,champBadge:null,__typename:"Clip"};return u.createElement(fe.fb,{padding:1},u.createElement(Ni.a,{clip:r,pageType:b.PageviewLocation.ClipsWatchPage,asBalloon:!0}),this.renderClipShareInput(e))},t.prototype.renderClipShareInput=function(e){var t=e.broadcaster&&e.broadcaster.login?e.broadcaster.login:"";return u.createElement(fe.fb,{"data-test-selector":yi.ClipLink,padding:{top:1}},u.createElement(fe.Ca,null,Object(m.d)("Clip Link","ClipShareBox")),u.createElement(Ei.a,{onClick:Object(_i.c)(e.id,e.game&&e.game.name,e.broadcaster?e.broadcaster.id:"",t,b.PageviewLocation.ClipsWatchPage,Object(Di.a)(e.slug,t)),value:Object(Di.a)(e.slug,t)}))},t}(u.Component),Oi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){var e=this.props.clip,t=e&&e.video;return u.createElement(fe.Ob,{background:fe.u.Base,elevation:1},u.createElement(fe.Ob,{alignItems:fe.i.Center,breakpointMedium:{flexDirection:fe.Ga.Row},display:fe.Da.Flex,flexWrap:fe.Ha.NoWrap,flexDirection:fe.Ga.Column,justifyContent:fe.eb.Start},u.createElement(fe.Ob,{flexGrow:1,fullWidth:!0,fullHeight:!0,overflow:fe.mb.Hidden,padding:{x:2,y:1}},u.createElement(ui,{clip:this.props.clip})),u.createElement(fe.Ob,{alignItems:fe.i.Center,className:"video-info-bar__action-container",display:fe.Da.Flex,flexDirection:fe.Ga.Row,flexShrink:0,fullHeight:!0,padding:1},u.createElement(fe.fb,{display:fe.Da.Flex,flexGrow:0},e&&t&&u.createElement(oi.a,{tt_medium:b.PageviewMedium.ClipsWatchPage,tt_content:b.PageviewContent.FullVODButton,video:{id:t.id,offsetSeconds:e.videoOffsetSeconds}}),e&&u.createElement(fe.fb,{display:fe.Da.Flex,padding:{x:1}},u.createElement(gi,{login:this.props.clip&&this.props.clip.broadcaster&&this.props.clip.broadcaster.login}),u.createElement(wi,{clip:e,balloonDirection:fe.y.TopRight,buttonType:fe.I.Hollow})),u.createElement(Si,{clip:this.props.clip})))))},t}(u.Component),Ii=Object(ge.withLatencyTracking)("ClipDescription",{autoReportInteractive:!0})(Oi),Ti=n("cZKs"),Mi=n("HGFl"),Li=n("qyxT"),Ri=n("jh7r"),xi=n("ZbA5"),Fi=n("N0BP"),Ai=n("hyVY"),ji=n("MXoD"),Ui=(n("FRDP"),function(e){var t=.5,n=null;return"number"==typeof e.progressBarPercent&&e.progressBarPercent>0&&(n=u.createElement(fe.fb,{position:fe.tb.Absolute,attachBottom:!0,fullWidth:!0},u.createElement(fe.wb,{borderRadius:fe.A.None,size:fe.yb.Small,value:e.progressBarPercent,mask:!0})),t=1),u.createElement(fe.fb,{position:fe.tb.Absolute,attachTop:!0,attachLeft:!0,fullWidth:!0,fullHeight:!0,className:"thud-preview-card-overlay"},n,u.createElement(fe.fb,{position:fe.tb.Absolute,attachTop:!0,attachLeft:!0,margin:1,"data-test-selector":"top-left-selector"},e.topLeft),u.createElement(fe.fb,{position:fe.tb.Absolute,attachTop:!0,attachRight:!0,margin:1,"data-test-selector":"top-right-selector"},e.topRight),u.createElement(fe.fb,{position:fe.tb.Absolute,attachBottom:!0,attachLeft:!0,padding:{x:.5,y:t},fullWidth:!0,"data-test-selector":"bottom-left-selector"},e.bottomLeft),u.createElement(fe.fb,{position:fe.tb.Absolute,attachBottom:!0,attachRight:!0,padding:{x:.5,y:t},"data-test-selector":"bottom-right-selector"},e.bottomRight))}),Bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(fe.Ob,{display:fe.Da.Flex,background:fe.u.Alt2,overflow:fe.mb.Hidden},u.createElement(fe.Xa,{fullWidth:!0},u.createElement(fe.Y,d.__assign({},this.props.staticImageProps))))},t}(u.Component);var Pi,Vi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getTrackingContext=function(e){var n=t.props.trackingContext;return{content:n&&n.content?n.content:e,medium:n&&n.medium}},t}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(fe.Ob,d.__assign({display:fe.Da.Flex,position:fe.tb.Relative,borderRadius:fe.A.Medium},Object(Fi.a)(this.props)),u.createElement(fe.Aa,{to:Object(ji.a)(this.getTrackingContext(b.PageviewContent.VideoThumbnail),this.props.linkTo),onClick:this.props.onClick,"data-a-target":"video-card-image-link"},u.createElement(Bi,{staticImageProps:this.props.thumbnailImageProps}),this.renderOverlay()))},t.prototype.renderOverlay=function(){if(function(e){return void 0!==e.streamType}(this.props)){var e=Object(m.d)("{viewerCount, plural, one {# viewer} other {# viewers}}",{viewerCount:this.props.currentViewerCount},"ThudVideoCard");return u.createElement(Ui,{topLeft:u.createElement(xi.a,{type:this.props.streamType,hosting:!1}),bottomLeft:this.renderBottomSection(e)})}if(function(e){return void 0!==e.datePublished}(this.props))return u.createElement(Ui,{topLeft:void 0!==this.props.durationInSeconds&&u.createElement(Ri.a,{value:Object(Ai.b)(this.props.durationInSeconds),icon:fe.Db.Play,withBackground:Ri.b.Overlay}),bottomLeft:this.renderBottomSection(this.props.datePublished?Object(m.i)(new Date(this.props.datePublished)):"")})},t.prototype.renderBottomSection=function(e){return u.createElement(fe.Ob,{display:fe.Da.Flex,color:fe.R.Overlay,margin:{left:1}},u.createElement(fe.fb,{display:fe.Da.Flex,flexShrink:0},u.createElement(fe.t,{size:36,src:this.props.profileImageURL,alt:this.props.channelDisplayName})),u.createElement(fe.fb,{padding:{left:1},overflow:fe.mb.Hidden},u.createElement(fe.Ca,{ellipsis:!0,color:fe.R.Overlay},this.props.title),e?u.createElement(fe.Ca,null,e):null))},t}(u.Component),Hi=Object(ge.withLatencyTracking)("ThudVideoCard",{autoReportInteractive:!0})(Vi);n("grjI");!function(e){e.TITLE="thud-modal.title",e.CONTINUE_BUTTON="thud-modal.continue",e.VOD_CARD="thud-modal.vod-card",e.LIVE_CARD="thud-modal.live-card"}(Pi||(Pi={}));var Gi=2592e6;function Wi(e){return!!e&&Date.now()-Gi<Object(Mi.e)(e).getDate()}var qi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeModal=function(){t.props.onClose(),t.props.closeModal()},t}return d.__extends(t,e),t.prototype.render=function(){var e=this.getOptions(),t=this.props.channel.displayName||this.props.channel.login||"";return e&&t?u.createElement(fe.Ob,{className:"thud-modal__container",background:fe.u.Base,borderRadius:fe.A.Large,display:fe.Da.Flex,flexDirection:fe.Ga.Row},u.createElement(fe.fb,{"data-test-selector":Pi.TITLE,display:fe.Da.Flex,flexDirection:fe.Ga.Column,flexGrow:1,padding:2},u.createElement(fe.fb,{display:fe.Da.Flex,justifyContent:fe.eb.Center,flexDirection:fe.Ga.Column,flexGrow:2},u.createElement(fe.fb,{margin:{bottom:2}},u.createElement(fe.t,{alt:t,size:50,src:this.props.channel.profileImageURL||""})),u.createElement(fe.fb,{margin:{bottom:2}},u.createElement(fe.Ca,{type:fe.gc.H2},Object(m.d)("{channelName} isn’t streaming right now",{channelName:t},"ThudModal"))),u.createElement(fe.fb,{margin:{bottom:2}},u.createElement(fe.Ca,{type:fe.gc.H4},e.bothLive?Object(m.d)("Do you want to {optionOne}?",{optionOne:e.one.text},"ThudModal"):Object(m.d)("Do you want to {optionOne} or {optionTwo}?",{optionOne:e.one.text,optionTwo:e.two.text},"ThudModal"))),u.createElement(fe.fb,{margin:{bottom:2}},e.one.cta),u.createElement("div",null,!e.bothLive&&e.two.cta)),u.createElement("div",null,u.createElement(fe.C,{type:fe.I.Text,onClick:this.closeModal,"data-test-selector":Pi.CONTINUE_BUTTON},Object(m.d)("Continue to {channelName}'s channel",{channelName:t},"ThudModal")))),u.createElement(fe.Ob,{display:fe.Da.Flex,flexDirection:fe.Ga.Column,flexShrink:0},u.createElement(fe.fb,{display:fe.Da.Flex,flexGrow:1},e.one.card),u.createElement(fe.fb,{display:fe.Da.Flex,flexGrow:1},e.two.card)),u.createElement(Ti.a,{onClose:this.props.onClose,closeOnBackdropClick:!0,closeOnPageNavigation:!0})):(this.props.closeModal(),null)},t.prototype.getOptions=function(){var e=this.renderVod(),t=this.renderOnlineRecommendations(e?1:2);if(t&&t.length){if(e)return{one:e,two:t[0],bothLive:!1};if(2===t.length)return{one:t[0],two:t[1],bothLive:!0}}return null},t.prototype.renderVod=function(){var e={medium:b.PageviewMedium.OfflineChannel,content:b.PageviewContent.RecommendedVOD,content_index:0},t=this.props.channel.displayName||this.props.channel.login||"",n=null,i=this.props.thudData.offlineHighlight,r=this.props.thudData.offlinePremiere,a=this.props.thudData.offlineArchive;if(i&&Wi(i.publishedAt)?n=i:r&&Wi(r.publishedAt)?n=r:a&&Wi(a.publishedAt)?n=a:i?n=i:r?n=r:a&&(n=a),!n)return null;var o=null,s="",l={pathname:"/videos/"+n.id,state:e},c=n.owner&&n.owner.login||"",d=n.owner&&n.owner.displayName||c,p=n.owner&&n.owner.profileImageURL||m.a.defaultAvatarURL,h=u.createElement(Hi,{title:n.title||Object(m.d)("Untitled Video","ThudModal"),thumbnailImageProps:{src:n.previewThumbnailURL||m.a.defaultStreamPreviewURL,alt:n.title||""},linkTo:l,onClick:this.closeModal,channelLogin:c,channelDisplayName:d,profileImageURL:p,datePublished:n.publishedAt,durationInSeconds:n.lengthSeconds||0,"data-test-selector":Pi.VOD_CARD});switch(n){case i:o=u.createElement(fe.C,{type:fe.I.Default,linkTo:l},Object(m.d)("Watch {channelName}'s Latest Highlight",{channelName:t},"ThudModal")),s=Object(m.d)("watch {channelName}'s latest highlight",{channelName:t},"ThudModal");break;case r:o=u.createElement(fe.C,{type:fe.I.Default,linkTo:l},Object(m.d)("Watch {channelName}'s Latest Premiere",{channelName:t},"ThudModal")),s=Object(m.d)("watch {channelName}'s latest premiere",{channelName:t},"ThudModal");break;case a:o=u.createElement(fe.C,{type:fe.I.Default,linkTo:l},Object(m.d)("Watch {channelName}'s Latest Broadcast",{channelName:t},"ThudModal")),s=Object(m.d)("watch {channelName}'s latest broadcast",{channelName:t},"ThudModal")}return h&&o&&s?{card:h,cta:o,text:s}:null},t.prototype.renderOnlineRecommendations=function(e){var t=Object(Li.a)(this.props.thudData.liveRecommendations.slice(0));if(!t||t.length<e)return null;for(var n=[],i=0;i<e;i++){var r=t[i];if(!r.broadcaster||!r.game)break;var a={medium:b.PageviewMedium.OfflineChannel,content:b.PageviewContent.RecommendedLive,content_index:1===e?1:i},o=r.broadcaster.displayName||"",s=r.game.name,l={pathname:Object(si.c)(s),state:a},c=u.createElement(Hi,{title:r.title||Object(m.d)("Untitled Broadcast","ThudModal"),thumbnailImageProps:{src:r.previewImageURL||m.a.defaultStreamPreviewURL,alt:r.title||""},linkTo:l,onClick:this.closeModal,channelLogin:r.broadcaster.login||"",channelDisplayName:o,profileImageURL:r.broadcaster.profileImageURL||m.a.defaultAvatarURL,streamType:r.type,currentViewerCount:r.viewersCount||0,"data-test-selector":Pi.LIVE_CARD}),d=u.createElement(fe.C,{type:fe.I.Hollow,linkTo:l,onClick:this.closeModal},Object(m.d)("Watch a live {gameName} stream",{gameName:s},"ThudModal")),p=Object(m.d)("watch a live {gameName} stream",{gameName:s},"ThudModal");n.push({card:c,cta:d,text:p})}return n},t}(u.Component);var zi=Object(a.connect)(null,function(e){return Object(o.bindActionCreators)({closeModal:ot.c},e)})(qi),Qi=n("lh1U");function Yi(e){return"WATCH__THUD_DISMISSED__"+e}var Ki=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={channelLogin:"",wasEverHosting:!1,wasEverLive:!1},t.onThudModalClosed=function(){m.o.set(Yi(t.props.channelLogin),!0)},t}return d.__extends(t,e),t.getDerivedStateFromProps=function(e,t){var n={};return e.channelLogin!==t.channelLogin&&(n.wasEverHosting=!!e.hostedChannel,n.wasEverLive=e.live,n.channelLogin=e.channelLogin),e.live&&(n.wasEverLive=!0),e.hostedChannel&&(n.wasEverHosting=!0),Object.keys(n).length>0?n:null},t.prototype.render=function(){if(this.showThud()&&this.props.data&&this.props.channel){var e=d.__assign({},function(e){if(e.user&&e.user.broadcastSettings&&e.user.broadcastSettings.game&&e.user.broadcastSettings.game.streams&&e.user.broadcastSettings.game.streams.edges&&e.user.broadcastSettings.game.streams.edges.length)return{liveRecommendations:e.user.broadcastSettings.game.streams.edges.filter(function(e){return e&&e.node&&e.node.id}).map(function(e){return e.node})};return{liveRecommendations:[]}}(this.props.data),function(e){var t=null,n=null,i=null;e.user&&e.user.offlineHighlight&&e.user.offlineHighlight.edges&&e.user.offlineHighlight.edges.length&&(t=e.user.offlineHighlight.edges[0]?e.user.offlineHighlight.edges[0].node:null);e.user&&e.user.offlinePremiere&&e.user.offlinePremiere.edges&&e.user.offlinePremiere.edges.length&&(n=e.user.offlinePremiere.edges[0]?e.user.offlinePremiere.edges[0].node:null);e.user&&e.user.offlineArchive&&e.user.offlineArchive.edges&&e.user.offlineArchive.edges.length&&(i=e.user.offlineArchive.edges[0]?e.user.offlineArchive.edges[0].node:null);return{offlineHighlight:t,offlinePremiere:n,offlineArchive:i}}(this.props.data));this.props.showThudModal({channel:this.props.channel,thudData:e,onClose:this.onThudModalClosed})}return null},t.prototype.showThud=function(){var e=m.o.get(Yi(this.props.channelLogin),!1);return this.props.data&&!this.props.contextLoading&&!this.props.data.loading&&!e&&(!this.props.isLoggedIn||this.props.currentUserIsStaff)&&Object(St.c)()&&!this.state.wasEverHosting&&!this.state.wasEverLive&&this.props.page===I.c.About&&this.props.contentType===i.LIVE&&this.props.playerOffline},t}(u.PureComponent);var $i=Object(o.compose)(Object(a.connect)(function(e){var t=Object(c.e)(e);return{isLoggedIn:Object(c.f)(e),currentUserIsStaff:!!(t&&t.roles&&t.roles.isStaff)}},function(e){return Object(o.bindActionCreators)({showThudModal:function(e){var t=d.__rest(e,[]);return Object(ot.d)(zi,t)}},e)}),Z(function(e){return{channel:e.channel,channelLogin:e.channelLogin,contentType:e.contentType,hostedChannel:e.hostedChannel,live:e.live,page:e.page,contextLoading:e.loading}}),Object(pe.a)(Qi,{options:function(e){return{variables:{currentChannelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin}}))(Ki),Xi=n("yVY3"),Ji=n("5Ijs");function Zi(e){return"curator"in e}function er(){return Object(rn.d)("Highlight","VideoOptions")}var tr=n("OTul"),nr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props.trackingContext;m.p.trackItemSectionLoad({carousel_content:e.carouselContent,location:e.location,section_type:e.sectionType,item_type:e.itemType})},t.prototype.render=function(){var e=this.props,t=e.trackingContext,n=e.channelLogin,i=e.videoID;return u.createElement(fe.C,{type:fe.I.Hollow,icon:fe.Db.Highlighter,linkTo:Object(ji.a)(t,Object(tr.g)(n,i)),targetBlank:!0},er())},t}(u.Component),ir="variant1";function rr(){return m.q.experiments.getAndTrackAssignment(se.b.VODHighGround)===ir}var ar,or=n("6x+I"),sr={skipHtml:!0,softBreak:"br",allowedTypes:["Emph","Strong","Paragraph","Heading","Item","List","Text","Link","Softbreak","Hardbreak"]};!function(e){e.MoreInfoBox="more-info-box",e.ToggleExpandButton="toggle-expand-button",e.DescriptionContainer="description-container"}(ar||(ar={}));var lr,cr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isExpanded:!1},t.renderDescription=function(){if(t.props.description&&t.state.isExpanded){var e=function(e){return e?e.split(/ {2}\n|\n(?!\d+\.)(?!\*|- )|^\n/gm):[]}(t.props.description).map(function(e,n){if(0===e.length)return u.createElement("br",{key:"desc-line"+n});var i={Link:t.renderMarkdownProtectedLink};return u.createElement(fe.fb,{padding:{x:2},key:"desc-line"+n},u.createElement(or,d.__assign({source:e,renderers:i},sr)))});return u.createElement(fe.tc,{"data-test-selector":ar.DescriptionContainer},e)}},t.toggleExpand=function(){t.setState(function(e){return{isExpanded:!e.isExpanded}})},t}return d.__extends(t,e),t.prototype.render=function(){return this.props.description?u.createElement(fe.Ob,{background:fe.u.Base,"data-test-selector":ar.MoreInfoBox},this.renderDescription(),u.createElement(fe.Ob,{display:fe.Da.Flex,padding:{x:2,bottom:1}},u.createElement(fe.Aa,{"data-test-selector":ar.ToggleExpandButton,type:fe.Ba.Default,onClick:this.toggleExpand},this.state.isExpanded?Object(rn.d)("Show Less","ChannelRootMoreInfoBox"):Object(rn.d)("Show More","ChannelRootMoreInfoBox")))):null},t.prototype.renderMarkdownProtectedLink=function(e){return u.createElement(fe.Aa,{linkTo:e.href,rel:function(e){try{return!Object(w.b)(new URL(e))}catch(e){return!0}}(e.href)?"nofollow noreferrer noopener":void 0},e.children)},t}(u.Component),dr=Object(o.compose)(Object(ge.withLatencyTracking)("MoreInfoBox",{autoReportInteractive:!0}))(cr),ur=n("SHn+"),mr=n("imSJ");!function(e){e[e.ClipCurator=0]="ClipCurator",e[e.ClipCuratorDot=1]="ClipCuratorDot",e[e.ClipCuratorName=2]="ClipCuratorName"}(lr||(lr={}));var pr,hr=function(e){var t=e.login,n=e.includesSeparator,i=Object(m.d)("Clipped by {curator}",{curator:u.createElement(fe.Aa,{to:{pathname:"/"+t,state:{medium:b.PageviewMedium.ClipsWatchPage,content:b.PageviewContent.ClipCuratorName}}},t)},"ChannelVideoClipCurator"),r=null;if(n){r=u.createElement(fe.fb,{"data-test-selector":lr.ClipCuratorDot,margin:{right:1}},u.createElement(fe.Ca,{fontSize:fe.Ia.Size5,type:fe.gc.Span},"·"))}return u.createElement(fe.fb,{display:fe.Da.Flex},r,u.createElement(fe.Ca,{fontSize:fe.Ia.Size5,type:fe.gc.Span,"data-test-selector":lr.ClipCurator},i))};!function(e){e[e.GameImagePlaceholder=0]="GameImagePlaceholder"}(pr||(pr={}));var gr,fr=function(e){var t=e.boxArtURL,n=e.name;return n?u.createElement(fe.Aa,{to:Object(si.c)(n),"data-a-target":"video-info-game-boxart-link"},u.createElement(fe.L,{src:t||m.a.defaultBoxArtURL,alt:n,aspect:fe.s.BoxArt,size:fe.M.Size4})):u.createElement(fe.sb,{"data-test-selector":pr.GameImagePlaceholder,height:55,width:40})};(gr||(gr={})).Title="title";var br,vr=/\S/,kr=function(e){var t=e.title,n=e.dateString,i=t&&""!==t&&vr.test(t),r=i&&t?t:"",a="";return n&&(a=Object(m.i)(new Date(n))),a&&(r=i?r+" · "+a:a),u.createElement(fe.Ob,{margin:{bottom:.5}},u.createElement(fe.Ca,{ellipsis:!0,title:r,fontSize:fe.Ia.Size4,"data-test-selector":gr.Title},r))};n("GEha");!function(e){e[e.InfoPlaceholder=0]="InfoPlaceholder"}(br||(br={}));var Cr=Object(ge.withLatencyTracking)("VideoInfo",{autoReportInteractive:!0})(function(e){var t=e.video;if(null===t)return u.createElement(fe.J,{row:!0},u.createElement(fe.fb,{className:"video-info__container"},u.createElement(fe.fb,{"data-test-selector":br.InfoPlaceholder,display:fe.Da.Flex,flexDirection:fe.Ga.Column},u.createElement(fe.sb,{lineCount:1,width:320}),u.createElement(fe.sb,{lineCount:1,width:240}))));var n=null,i=null;if(t.game&&(n=u.createElement(fe.fb,{flexShrink:0,margin:{right:1}},u.createElement(fr,{boxArtURL:t.game.boxArtURL,name:t.game.name})),i=u.createElement(ur.a,{linkTo:{pathname:Object(si.c)(t.game.name),state:{content:b.PageviewContent.Game,medium:b.PageviewMedium.VideoWatchPage}},label:Object(mr.a)(),title:t.game.name,"data-a-target":"video-info-game-link"})),!Zi(t)){var r=null;return t.scope===O.ib.PRIVATE&&(r=u.createElement(fe.Ob,{fontSize:fe.Ia.Size4},u.createElement(fe.qb,{label:Object(m.d)("Private","ChannelVideoInfo")}))),u.createElement(fe.J,{row:!0},n,u.createElement(fe.fb,{className:"video-info__container"},r,u.createElement(kr,{dateString:t.publishedAt,title:t.title}),u.createElement(fe.fb,{display:fe.Da.InlineFlex},i)))}if(Zi(t)){var a=t.curator?t.curator.login:"",o=null;if(a){var s=!(!t||!t.game);o=u.createElement(hr,{login:a,includesSeparator:s})}return u.createElement(fe.J,{row:!0},n,u.createElement(fe.fb,{className:"video-info__container"},u.createElement(kr,{dateString:t.createdAt,title:t.title}),u.createElement(fe.fb,{display:fe.Da.InlineFlex},i,o)))}return null}),yr=n("b6Yk");function Sr(e,t){var n=this;return function(){return d.__awaiter(n,void 0,void 0,function(){var n,i;return d.__generator(this,function(r){switch(r.label){case 0:return n="kraken/videos/"+e,[4,yr.a.delete(n)];case 1:if(200!==(i=r.sent()).status){if(i&&i.error)throw new Error(JSON.stringify(i.error));if(i&&i.requestError)throw i.requestError;throw new Error("Could not delete video. Request returned "+i.status)}return rn.r.history.push(Object(si.d)(t)),[2]}})})}}n("ESOY");var Er=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={requestInProgress:!1,errorMessage:""},t.onClickCancel=function(){return t.props.onClose()},t.onClickDelete=function(){t.setState({errorMessage:"",requestInProgress:!0},function(){return d.__awaiter(t,void 0,void 0,function(){var e;return d.__generator(this,function(t){switch(t.label){case 0:if(!this.props.video.owner||!this.props.video.owner.login)return this.setState({errorMessage:Object(rn.d)("This video is temporarily unable to be deleted.","VideoDeleteModal"),requestInProgress:!1}),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.props.onDeleteRequest(this.props.video.id,this.props.video.owner.login)];case 2:return t.sent(),this.props.onClose(),[3,4];case 3:return(e=t.sent())&&e.status&&401===e.status?(this.setState({errorMessage:Object(rn.d)("You are not authorized to delete this video.","VideoDeleteModal"),requestInProgress:!1}),[2]):(this.setState({errorMessage:Object(rn.d)("Unexpected error, please try again.","VideoDeleteModal"),requestInProgress:!1}),rn.l.withCategory("video delete modal").error(e,"Attempted to delete video."),[3,4]);case 4:return[2]}})})})},t}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(fe.Ob,{background:fe.u.Base,"data-test-selector":"qa-video-delete-modal",className:"video-delete-modal",padding:3},u.createElement(fe.fb,null,u.createElement(fe.fb,{margin:{bottom:1}},u.createElement(fe.Ca,{type:fe.gc.H4},Object(rn.d)("Delete Video","VideoDeleteModal"))),this.renderErrorMessage(),u.createElement(fe.Ca,{type:fe.gc.P,color:fe.R.Alt2},Object(rn.d)("Are you sure you want to delete this video?","VideoDeleteModal"),u.createElement("br",null),Object(rn.d)("This action cannot be undone.","VideoDeleteModal"))),u.createElement(fe.Ob,{padding:{y:2},margin:{y:2},borderTop:!0,borderBottom:!0},u.createElement(fe.J,{row:!0},u.createElement("img",{alt:this.props.video.title||Object(rn.d)("Video Thumbnail","VideoDeleteModal"),src:this.props.video.previewThumbnailURL,className:"video-delete-modal__thumb"}),u.createElement(fe.K,{overflow:fe.mb.Hidden},u.createElement(fe.fb,{margin:{left:1}},u.createElement(fe.fb,{ellipsis:!0},this.props.video.title),u.createElement(fe.Ob,{ellipsis:!0,color:fe.R.Alt2},Object(rn.d)("{created, date, medium}",{created:new Date(this.props.video.publishedAt)},"VideoDeleteModal")," · ",Object(Ai.b)(this.props.video.lengthSeconds)),u.createElement(fe.Ob,{ellipsis:!0,color:fe.R.Alt2},Object(rn.d)("{viewCount, plural, one {# View} other {# Views}}",{viewCount:this.props.video.viewCount},"VideoDeleteModal")))))),u.createElement(fe.fb,{display:fe.Da.Flex,justifyContent:fe.eb.Center},u.createElement(fe.fb,{display:fe.Da.InlineBlock,margin:{x:1}},u.createElement(fe.C,{type:fe.I.Text,onClick:this.onClickCancel,"data-test-selector":"qa-video-delete-modal-cancel-button"},Object(rn.d)("Cancel","VideoDeleteModal"))),u.createElement(fe.fb,{display:fe.Da.InlineBlock,margin:{x:1}},u.createElement(fe.C,{type:fe.I.Alert,onClick:this.onClickDelete,disabled:this.state.requestInProgress,"data-test-selector":"qa-video-delete-modal-delete-button"},Object(rn.d)("Delete","VideoDeleteModal")))),u.createElement(Ti.a,{closeOnBackdropClick:!0}))},t.prototype.renderErrorMessage=function(){return this.state.errorMessage?u.createElement(fe.Ob,{className:"video-delete-modal__error-container",fullWidth:!0,"data-test-selector":"qa-video-delete-modal-error-container",margin:{bottom:1},padding:1},u.createElement(fe.Ca,{color:fe.R.Error},this.state.errorMessage)):null},t}(u.Component);var Nr,_r=Object(a.connect)(null,function(e){return Object(o.bindActionCreators)({onClose:ot.c,onDeleteRequest:Sr},e)})(Er),Dr=n("DfWg"),wr=n("16Gl");!function(e){e.VideoOptionsButtonSelector="video-options-button",e.VideoOptionsContainerSelector="video-options-container",e.ReportButtonSelector="video-report-button",e.HighlightButtonSelector="video-highlight-button",e.EditButtonSelector="video-edit-button",e.DeleteButtonSelector="video-delete-button"}(Nr||(Nr={}));var Or=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleReportModalClose=function(e){(e===tt.a.MutationError||e===tt.a.Success)&&t.props.history.push("/")},t}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(Ze.a,null,u.createElement(fe.D,{"data-test-selector":Nr.VideoOptionsButtonSelector,type:fe.F.Hollow,icon:fe.Db.More,ariaLabel:Object(rn.d)("Video Options","VideoOptions"),disabled:!this.props.video}),this.props.video?u.createElement(fe.x,{direction:fe.y.TopRight},u.createElement(fe.Ob,{padding:{y:1},color:fe.R.Link},u.createElement("ul",{"data-test-selector":Nr.VideoOptionsContainerSelector},this.renderReportOption(this.props.video,this.props.currentUser),this.renderHighlightOption(this.props.video,this.props.currentUser),this.renderEditOption(this.props.video,this.props.currentUser),this.renderDeleteOption(this.props.video,this.props.currentUser)))):u.createElement(fe.x,null))},t.prototype.renderDeleteOption=function(e,t){var n=this;if(this.isVODOwner(e,t)||this.isEditor()){var i={type:fe.db.Alert,onClick:function(){n.props.onShowDeleteVideoModal({video:e})}};return u.createElement(bi,{key:"delete-option",interactableProps:i,testSelector:Nr.DeleteButtonSelector},Object(rn.d)("Delete","VideoOptions"))}},t.prototype.renderReportOption=function(e,t){var n=this;if(!this.isVODOwner(e,t)){var i={onClick:function(){if(t){var i=void 0;i=e.owner&&e.owner.displayName?Object(rn.d)("Report {ownerDisplayName}",{ownerDisplayName:e.owner.displayName},"ReportVideoModal"):Object(rn.d)("Report this video","ReportVideoModal"),n.props.onShowReportUserModal({onClose:n.handleReportModalClose,reportContext:{contentType:O.Fa.VOD_REPORT,contentID:e.id,targetUserID:e.owner&&e.owner.id?e.owner.id:"",extra:n.getVideoReportExtraField()},title:i})}else n.props.onShowLogin()}};return u.createElement(bi,{key:"report-option",interactableProps:i,testSelector:Nr.ReportButtonSelector},Object(rn.d)("Report","VideoOptions"))}},t.prototype.renderHighlightOption=function(e,t){if(e.owner&&e.owner.login&&(this.isVODOwner(e,t)||this.isEditor())){var n={medium:b.PageviewMedium.ChannelVideos,content:b.PageviewContent.ChannelInfoBarOverflowBalloon};return e.broadcastType===O.p.ARCHIVE&&!rr()&&u.createElement(bi,{key:"highlight-option",interactableProps:{linkTo:Object(ji.a)(n,Object(tr.g)(e.owner.login,e.id))},testSelector:Nr.HighlightButtonSelector},er())}},t.prototype.renderEditOption=function(e,t){if(e.owner&&e.owner.login&&(this.isVODOwner(e,t)||this.isEditor()))return rr()&&u.createElement(bi,{key:"edit-option",interactableProps:{linkTo:Object(wr.b)(e.owner.login,e.id)},testSelector:Nr.EditButtonSelector},Object(rn.d)("Edit","VideoOptions"))},t.prototype.isVODOwner=function(e,t){return t&&e.owner&&t.id===e.owner.id},t.prototype.isEditor=function(){return!(!this.props.data||this.props.data.loading||this.props.data.error||!this.props.data.user||!this.props.data.user.self)&&this.props.data.user.self.isEditor},t.prototype.getVideoReportExtraField=function(){var e=Object(E.n)(this.props),t=0;this.props.getCurrentVideoTime?t=this.props.getCurrentVideoTime():this.props.lastVideoOffset&&(t=this.props.lastVideoOffset);var n={timestamp:Object(Ai.b)(t,{zeroPadAll:!0})};return e&&(n.collection=e),JSON.stringify(n)},t}(u.Component),Ir=Object(r.compose)(Object(pe.a)(Dr,{options:function(e){return{variables:{contentOwnerID:e.video.owner.id}}},skip:function(e){return null===e.currentUser||null===e.video||null===e.video.owner}}),Object(ge.withLatencyTracking)("VideoOptions",{autoReportInteractive:!0}))(Or);var Tr,Mr=Object(a.connect)(null,function(e){return Object(o.bindActionCreators)({onShowLogin:function(){return Object(l.e)(s.a.VODOptions)},onShowDeleteVideoModal:function(e){var t=d.__rest(e,[]);return Object(ot.d)(_r,t)},onShowReportUserModal:function(e){var t=d.__rest(e,[]);return Object(ot.d)(st.a,t)}},e)})(Object(Qt.a)(Ir));n("GXBl");!function(e){e[e.VideoDescription=0]="VideoDescription",e[e.TotalViews=1]="TotalViews"}(Tr||(Tr={}));var Lr,Rr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){var e=null,t=null;if(this.props.video){var n=this.props.video,i=n.description,r=n.viewCount;i&&(e=u.createElement(fe.Ob,{"data-test-selector":Tr.VideoDescription},u.createElement(dr,{description:i}))),t=u.createElement(fe.Ob,{alignItems:fe.i.Center,"data-test-selector":Tr.TotalViews,display:fe.Da.Flex,color:fe.R.Alt2,flexGrow:1,fontSize:fe.Ia.Size5},u.createElement(fe.Nb,{value:Object(m.f)(r||0),label:Object(m.d)("Total Views","VideoDescription"),icon:fe.Db.GlyphViews}))}return u.createElement(fe.Ob,{background:fe.u.Base,elevation:1},u.createElement(fe.Ob,{alignItems:fe.i.Center,breakpointMedium:{flexDirection:fe.Ga.Row},display:fe.Da.Flex,flexWrap:fe.Ha.NoWrap,flexDirection:fe.Ga.Column,justifyContent:fe.eb.Start},u.createElement(fe.Ob,{className:"video-description__info-container",flexGrow:1,fullWidth:!0,fullHeight:!0,padding:{x:1,y:1}},u.createElement(Cr,{video:this.props.video})),u.createElement(fe.Ob,{alignItems:fe.i.Center,display:fe.Da.Flex,flexDirection:fe.Ga.Row,flexShrink:0,fullHeight:!0,padding:1},u.createElement(fe.fb,{display:fe.Da.Flex,flexGrow:0},t,u.createElement(fe.fb,{display:fe.Da.Flex,padding:{x:1}},u.createElement(fe.fb,{margin:{right:1}},u.createElement(gi,{login:this.props.video&&this.props.video.owner&&this.props.video.owner.login})),this.renderTrackedHighlightButton(),u.createElement(Ji.a,{balloonDirection:fe.y.TopRight,buttonType:fe.I.Hollow,content:{collectionID:this.props.collectionID||void 0,videoID:this.props.video?this.props.video.id:void 0},getCurrentVideoTime:this.props.getLastVideoOffset,tracking:{location:b.PageviewLocation.VideoWatchPage}})),u.createElement(Mr,{currentUser:this.props.currentUser,video:this.props.video,getCurrentVideoTime:this.props.getLastVideoOffset})))),e)},t.prototype.renderTrackedHighlightButton=function(){var e=this;return this.props.video&&this.props.video.owner&&this.props.video.owner.login&&this.props.video.broadcastType===O.p.ARCHIVE&&rr()&&u.createElement(fe.fb,{margin:{right:1}},u.createElement(Tn.a,{ownerLogin:this.props.video.owner.login,permittedRoles:{owner:!0,editor:!0,staff:!1}},function(t){return t.permitted&&e.props.video&&e.props.video.owner&&e.props.video.owner.login&&u.createElement(nr,{channelLogin:e.props.video.owner.login,videoID:e.props.video.id,trackingContext:{carouselContent:b.PageviewContent.Video,location:b.PageviewLocation.VideoWatchPage,medium:b.PageviewMedium.ChannelVideos,content:b.PageviewContent.ChannelInfoBar,sectionType:Xi.b.ChannelInfoBar,itemType:Xi.a.HighlightButton}})}))},t}(u.Component),xr=Object(ge.withLatencyTracking)("VideoDescription",{autoReportInteractive:!0})(Rr),Fr=n("J6gT"),Ar=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkIfVodcast=function(e){switch(e){case _.a.WatchParty:case _.a.Premiere:case _.a.Rerun:return!0;default:return!1}},t.getVODPath=function(e){return"videos/"+encodeURIComponent(e)},t}return d.__extends(t,e),t.prototype.componentDidUpdate=function(){this.props.data.user&&this.props.latencyTracking.reportInteractive()},t.prototype.componentDidMount=function(){this.props.data.user&&this.props.latencyTracking.reportInteractive()},t.prototype.componentWillUnmount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){if(void 0===this.props.data||void 0===this.props.data.user)return null;var e=this.props.data.user;if(!e||!e.stream||null===e.stream.type)return null;if(!this.checkIfVodcast(e.stream.type))return null;var t=null,n=null,i="",r="";this.props.pubsub&&this.props.pubsub.messages&&this.props.pubsub.messages.vodcast&&(i=this.props.pubsub.messages.vodcast.vod.vod_id,r=this.props.pubsub.messages.vodcast.vod.title);var a=e.displayName||"";return e.stream.type===_.a.Rerun?(t=u.createElement(fe.Cb,{asset:fe.Db.VideoRerun,height:16,width:16}),n=i&&r?Object(m.d)("Rerun of video from {channelName}: {videoLink}",{channelName:a,videoLink:u.createElement(fe.Aa,{to:{pathname:this.getVODPath(i),state:{location:b.PageviewLocation.Channel,medium:b.PageviewMedium.Channel}}},u.createElement(fe.Ca,{type:fe.gc.Span,color:fe.R.OverlayAlt},r))},"ChannelVodcastTopbar"):Object(m.d)("Rerun of video from {channelName}",{channelName:a},"ChannelVodcastTopbar")):e.stream.type===_.a.Premiere&&(t=u.createElement(fe.Cb,{asset:fe.Db.VideoPremiere,type:fe.Eb.Live,height:16,width:16}),n=Object(m.d)("Premiere of video from {channelName}",{channelName:a},"ChannelVodcastTopbar")),u.createElement(fe.Ob,{background:fe.u.AccentAlt2,color:fe.R.Overlay,padding:1,alignItems:fe.i.Center,display:fe.Da.Flex,flexWrap:fe.Ha.NoWrap,overflow:fe.mb.Hidden},t,u.createElement(fe.fb,{display:fe.Da.Inline,padding:{left:.5},ellipsis:!0},u.createElement(fe.Ca,{fontSize:fe.Ia.Size5,ellipsis:!0,"data-test-selector":"channel-vodcast-topbar",title:r},n)))},t=d.__decorate([Object(pe.a)(Fr,{options:function(e){return{pollInterval:12e4,fetchPolicy:"network",variables:{channelLogin:e.channelLogin}}}}),Object(De.a)([{skip:function(e){return e.data.loading||!e.data.user||!e.data.user.id},topic:function(e){return e.data.user&&e.data.user.id?Object(f.I)(e.data.user.id):""},mapMessageTypesToProps:(Lr={},Lr[p.PubsubMessageType.Vodcast]="vodcast",Lr)}]),Object(ge.withLatencyTracking)("ChannelVodcastTopbar")],t)}(u.Component),jr=(n("H4/V"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isRendered:!1,isClosed:!1},t.onClickClose=function(){t.setState({isClosed:!0})},t}return d.__extends(t,e),t.prototype.componentDidMount=function(){this.checkForCompanion(this.props)},t.prototype.componentWillReceiveProps=function(e){this.checkForCompanion(e)},t.prototype.renderIframe=function(){return this.state.bufferedCompanion?u.createElement("iframe",{className:"companion-ad-div",srcDoc:this.state.bufferedCompanion.content,height:this.state.bufferedCompanion.height,width:this.state.bufferedCompanion.width,sandbox:"allow-forms allow-same-origin allow-scripts allow-popups",allowTransparency:!0,scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0}):null},t.prototype.render=function(){return u.createElement(fe.fb,{flexGrow:0,flexShrink:0,alignItems:fe.i.Center,className:"companion-ad",display:this.state.isClosed||!this.state.isRendered?fe.Da.Hide:fe.Da.Flex,flexWrap:fe.Ha.Wrap,fullWidth:!0,justifyContent:fe.eb.Center,padding:{top:2,bottom:1},"data-test-selector":"companion-ad"},this.renderIframe(),u.createElement(fe.fb,{padding:{top:1,left:2},fullWidth:!0},u.createElement("button",{onClick:this.onClickClose,className:"companion-ad__close","data-test-selector":"companion-ad-close"},u.createElement(fe.fb,{display:fe.Da.Flex,flexDirection:fe.Ga.Row,alignItems:fe.i.Center},u.createElement(fe.fb,{margin:{right:.5},display:fe.Da.Flex},u.createElement(fe.Cb,{asset:fe.Db.Close})),u.createElement(fe.Ca,{transform:fe.fc.Uppercase},Object(m.d)("Close Ad","CompanionAd"))))))},t.prototype.checkForCompanion=function(e){var t=e.bufferedCompanion,n=e.onCompanionAdConsumed;if(t&&n){var i=!t.isEmpty,r=!!t.isEmpty;this.setState({isRendered:i,isClosed:r,bufferedCompanion:t}),n()}},t}(u.Component)),Ur=n("TSYQ"),Br=n("2aBk"),Pr=(n("BRlh"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.componentDidMount=function(){Br.b&&Br.b.destroyPlayer()},t.prototype.render=function(){var e=Ur("channel-page__video-player",{"channel-page__video-player--theatre-mode":this.props.theatreModeEnabled||!1});return u.createElement(fe.fb,{className:e,display:fe.Da.Flex,alignItems:fe.i.Center,justifyContent:fe.eb.Center,flexWrap:fe.Ha.NoWrap,fullHeight:this.props.theatreModeEnabled,fullWidth:this.props.rightColumnExpanded,position:this.props.theatreModeEnabled?fe.tb.Fixed:fe.tb.Relative},u.createElement(fe.r,{ratio:fe.s.Aspect16x9},u.createElement(fe.fb,{className:"require-login-video-player__player",display:fe.Da.Flex,flexDirection:fe.Ga.Column,alignItems:fe.i.Center,justifyContent:fe.eb.Center,fullHeight:!0,fullWidth:!0},this.renderLiveIndicator())),u.createElement(fe.fb,{className:"require-login-video-player__content",textAlign:fe.cc.Center,position:fe.tb.Absolute},u.createElement(fe.J,{background:fe.u.Base,borderRadius:fe.A.Large,elevation:3,border:!0},u.createElement(fe.fb,{padding:2},this.props.title&&u.createElement(u.Fragment,null,u.createElement(fe.fb,{margin:{top:2}},u.createElement(fe.Ca,{fontSize:fe.Ia.Size4,bold:!0,lines:2,ellipsis:!0},this.props.title))),u.createElement(fe.fb,{margin:{top:2}},u.createElement(fe.Ca,{fontSize:fe.Ia.Size5},Object(m.d)("You need a Twitch Account to watch this stream.","NflRequireLoginPlayer"))),u.createElement(fe.fb,{margin:{top:2}},u.createElement(fe.C,{onClick:this.props.signup},u.createElement(fe.fb,{padding:{x:2}},Object(m.d)("Create a Free Account","NflRequireLoginPlayer")))),u.createElement(fe.fb,{margin:{top:1}},u.createElement(fe.C,{type:fe.I.Text,onClick:this.props.login},u.createElement(fe.fb,{padding:{x:2}},Object(m.d)("Log In","NflRequireLoginPlayer"))))))))},t.prototype.renderLiveIndicator=function(){if(void 0===this.props.live)return null;var e=null;this.props.live&&(e=u.createElement(fe.fb,{margin:{right:.5}},u.createElement(fe.N,{status:fe.P.Live,size:fe.O.Medium,pulse:!0})));var t=this.props.live?Object(m.d)("LIVE","NflRequireLoginPlayer"):Object(m.d)("OFFLINE","NflRequireLoginPlayer");return u.createElement(u.Fragment,null,e,u.createElement(fe.Ca,{color:fe.R.Overlay,fontSize:fe.Ia.Size5},t))},t}(u.PureComponent));var Vr=Object(a.connect)(function(e){return{rightColumnExpanded:e.ui.rightColumnExpanded,theatreModeEnabled:e.ui.theatreModeEnabled}},function(e){return Object(o.bindActionCreators)({login:function(){return Object(l.e)(s.a.NflRequireLoginPlayer)},signup:function(){return Object(l.g)(s.a.NflRequireLoginPlayer)}},e)})(Pr),Hr=null;var Gr,Wr=n("bRMw"),qr=(n("je0y"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d.__extends(t,e),t.prototype.render=function(){return u.createElement(fe.fb,{"data-test-selector":"private-video-banner-layout"},this.renderHeader())},t.prototype.renderHeader=function(){var e=this;return u.createElement(fe.l,{type:fe.q.SlideInBottom,delay:fe.m.Medium,duration:fe.n.Medium,enabled:!0},u.createElement(fe.Ob,{className:"private-video-banner__header",display:fe.Da.Flex,background:fe.u.AccentAlt2,color:fe.R.Overlay,alignItems:fe.i.Center,padding:{x:1,y:.5},fontSize:fe.Ia.Size6,"data-test-selector":"private-video-banner-header"},u.createElement(fe.fb,{display:fe.Da.Flex,alignItems:fe.i.Center,justifyContent:fe.eb.Center},u.createElement(fe.Cb,{asset:fe.Db.Lock,width:20,height:20})),u.createElement(fe.Ca,null,Object(m.d)("This video is private. To Premiere or edit your video, visit your <x:link>video manager</x:link>",{"x:link":function(t){return u.createElement(fe.Aa,{"data-test-selector":"private-video-banner-header-link",to:{pathname:"/"+e.props.ownerLogin+"/manager",state:{medium:b.PageviewMedium.VideoWatchPage,content:b.PageviewContent.Video}}},u.createElement(fe.Ca,{type:fe.gc.Span,color:fe.R.OverlayAlt},t))}},"PrivateVideoBanner"))))},t}(u.Component)),zr=ie.a.wrap(function(){return n.e(140).then(n.bind(null,"KGyh"))},"SquadStreamBanner"),Qr=ie.a.wrap(function(){return n.e(139).then(n.bind(null,"5k+0"))},"MultiviewBanner"),Yr=ie.a.wrap(function(){return n.e(138).then(n.bind(null,"/G4D"))},"MultiviewInfoBalloon");!function(e){e.SquadStreamBanner="channel_root_squad_stream_banner",e.MultiviewBanner="channel_page_multiview_banner",e.MultiviewInfoBalloon="channel_root_multiview_info_balloon"}(Gr||(Gr={}));var Kr=0,$r=1,Xr=function(e){function t(t){var n=e.call(this,t)||this;return n.currentWatchingActivity={userID:null,isWatching:!1},n.lastVideoOffset=A,n.renderHeader=function(){return u.createElement(me.a,{currentPage:n.getCurrentPage(n.props),channelLogin:n.props.channelLogin,channelIsHosting:n.channelIsHosting()})},n.renderSideNav=function(){return u.createElement(Ke.a,{channelLogin:n.props.channelLogin})},n.renderRightColumn=function(){var e=n.props.channel,t=n.props.contentType===i.LIVE;return u.createElement(u.Fragment,null,n.renderChat(t,n.props.video),n.props.isLoggedIn&&e&&e.id&&!Object(ue.a)()&&u.createElement(Qe,{channelID:e.id}))},n.renderVideoPlayer=function(){if(n.props.contentType===i.LIVE&&n.props.page!==I.c.About||n.props.contentType===i.VIDEO&&n.props.page!==I.c.Videos||n.props.contentType===i.CLIP&&n.props.page!==I.c.Clips||n.props.contentType===i.COLLECTION&&n.props.page!==I.c.Videos)return null;var e=n.props.channelLogin,t=n.props.channel,r=n.props.collectionID,a=n.props.clipSlug,o=n.props.videoID,s=!o&&!r&&!a,l=n.props.video,c=Object(q.b)(t),p=Object(Wr.b)(e)&&s&&n.props.firstPageLoaded&&!n.channelIsHosting()&&c.length>0,h=j(t)===_.a.Live,g=!!(t&&t.self&&t.self.subscriptionBenefit),f=g&&!n.state.multiviewFTUEDone;if(s&&function(e){return Hr||(Hr={},m.b.get("nfl_channels",[]).forEach(function(e){Hr&&(Hr[e]=!0)})),Hr.hasOwnProperty(e.toLowerCase())}(e)&&!n.props.isLoggedIn){var b=void 0;if(t&&t.login===n.props.channelLogin&&(b=t.broadcastSettings&&t.broadcastSettings.game?t.broadcastSettings.game.id:null),void 0===b)return u.createElement(Pt.a,null);if(function(e){return!!e&&e===m.b.get("nfl_game_id","")}(b))return u.createElement(Vr,{channelLogin:e,live:n.props.live,title:function(e){return e&&e.broadcastSettings&&e.broadcastSettings.title?e.broadcastSettings.title:""}(n.props.channel)})}var v={};s?(v.channelLogin=n.props.videoPlayerSource,v.hostChannel=n.channelIsHosting()?n.props.match.params.channelLogin:void 0,v.showChannelInfoOnHover=!1,p&&(v.multiviewOptions={buttonText:Object(m.d)("Enter Command Center","ChannelRootPlayerUI"),parentChannelLogin:n.props.match.params.channelLogin,isFTUE:f},v.onEnterMultiview=n.onEnterMultiview)):(n.state.requestedVideoOffset!==A&&(v.nextVideoOffset=n.state.requestedVideoOffset),r&&(v.collectionID=r),o&&(v.vodID=o),a&&(v.clipSlug=a,v.playerTypeOverride=Je.a.ClipsWatchPage));var k=!n.props.live&&!n.channelIsHosting()&&!l||!!a,C=null;s&&n.props.firstPageLoaded&&!n.channelIsHosting()&&t&&t.id&&(C=u.createElement(zr,{channelID:t.id,channelLogin:e,channelDisplayName:t.displayName,triggerPlayerReposition:n.triggerPlayerReposition,"data-test-selector":Gr.SquadStreamBanner}));var y=null;p&&t&&t.id&&h&&(y=u.createElement(Qr,{channelID:t.id,channelLogin:e,chanlets:c,triggerPlayerReposition:n.triggerPlayerReposition,hasInsiderPass:g,"data-test-selector":Gr.MultiviewBanner}));var S=null;p&&f&&(S=u.createElement(Yr,{channelLogin:e,"data-test-selector":Gr.MultiviewInfoBalloon}));var E=null;s&&!n.channelIsHosting()&&n.props.firstPageLoaded&&t&&t.id&&(E=u.createElement(Ce,{channelName:e,channelID:t.id,triggerPlayerReposition:n.triggerPlayerReposition}));var N=null;l&&l.scope===O.ib.PRIVATE&&l.owner&&l.owner.login&&(N=u.createElement(qr,{ownerLogin:e}));var D=s&&!n.channelIsHosting()&&(function(e){switch(j(e)){case _.a.WatchParty:case _.a.Premiere:case _.a.Rerun:return!0;default:return!1}}(t)||n.props.firstPageLoaded)&&u.createElement(Ar,{channelLogin:e});return u.createElement(u.Fragment,null,u.createElement(fe.fb,{className:"channel-root__player-container",padding:{bottom:2}},E,C,y,N,D,u.createElement(ct,{triggerPlayerReposition:n.triggerPlayerReposition},u.createElement(Pt.a,null,u.createElement(_e.a,{repositionPlayerRef:n.setRepositionPlayer,playerProps:d.__assign({onCompanionAdBuffered:n.onCompanionAdBuffered,onStreamStatusChange:n.onStreamStatusChange,onNavigationRequest:n.onPlayerNavigationEvent,attachToWindow:!0,fullscreenRef:function(e){return ce(e)?document.body:void 0}(n.state.theatreFullscreenGroup),onFullscreenChange:de,onSeek:n.onVideoTimeChange,onVideoTimeChange:n.onVideoTimeChange},v),miniPlayerTitle:n.getMiniPlayerTitle(),miniPlayerContentRoute:n.props.contentCanonicalUrl,disablePersistenceOnUnmount:k,disablePersistenceOnScroll:k}))),S,n.renderDescription()))},n.onCompanionAdBuffered=function(e){n.setState({bufferedCompanion:e})},n.onCompanionAdConsumed=function(){n.setState({bufferedCompanion:void 0})},n.onStreamStatusChange=function(e){e===dt.a.Offline&&n.setState({playerOffline:!0})},n.onChatHostingChange=function(e){m.p.track(b.SpadeEventType.HostModeDebug,{log_type:"chat_msg",channel:n.props.channelLogin,data_target_channel_login:e})},n.onPlayerNavigationEvent=function(e){var t=n.props.video,i=t?t.id:"",r=n.props.collection&&n.props.collection.id||void 0;Object(Je.c)(e,n.props.history,{currentCollectionID:r,currentVideoID:i})},n.triggerPlayerReposition=function(){n.repositionPlayer&&n.repositionPlayer()},n.onVideoTimeChange=function(e){var t=Math.floor(e);if(t!==n.lastVideoOffset)if(n.lastVideoOffset=t,n.props.clip){var i=t+n.getSourceVideoClipStartOffset()-$r;n.props.onVideoTimeChange(i)}else n.props.onVideoTimeChange(t);else n.state.requestedVideoOffset===t&&n.setState({requestedVideoOffset:A})},n.onPlayerSeekRequest=function(e){n.setState({requestedVideoOffset:e})},n.getMiniPlayerTitle=function(){if(n.props.contentType===i.VIDEO||n.props.contentType===i.COLLECTION)return n.props.video&&n.props.video.title||Object(m.d)("Watching video","ChannelRoot");if(n.props.contentType===i.CLIP)return n.props.clip&&n.props.clip.title||Object(m.d)("Watching clip","ChannelRoot");var e;if(n.props.hostedChannel)return e=n.props.hostedChannel.displayName||n.props.hostedChannel.login,Object(m.d)("Hosting {channel}",{channel:e},"ChannelRoot");var t=n.props.channel;return e=t&&t.displayName||n.props.channelLogin,Object(m.d)("Watching {channelName}",{channelName:e},"ChannelRoot")},n.setRepositionPlayer=function(e){n.repositionPlayer=e},n.getLastVideoOffset=function(){return n.lastVideoOffset},n.onEnterMultiview=function(){n.props.history.push("/"+n.props.match.params.channelLogin+"/commandcenter"),n.endMultiviewFTUE()},n.endMultiviewFTUE=function(){n.state.multiviewFTUEDone||(m.q.storage.set(Ne.a,!0),n.setState({multiviewFTUEDone:!0}))},n.state={requestedVideoOffset:U(t),theatreFullscreenGroup:le(),multiviewFTUEDone:m.q.storage.get(Ne.a,!1),playerOffline:t.playerOffline},n}return d.__extends(t,e),t.prototype.componentDidMount=function(){this.onRender(),this.updateWatchingActivity(this.props)},t.prototype.componentWillReceiveProps=function(e){var t=this.props.channelLogin,n=e.channel&&e.channel.login;U(this.props)!==U(e)&&this.setState({requestedVideoOffset:U(e)}),t===n&&this.props.videoID===e.videoID&&this.props.collectionID===e.collectionID&&this.props.clipSlug===e.clipSlug&&this.getCurrentPage(this.props)===this.getCurrentPage(e)&&R(this.props)===R(e)||this.context.scrollToTop(),this.updateWatchingActivity(e)},t.prototype.componentDidUpdate=function(){this.onRender()},t.prototype.componentWillUnmount=function(){clearTimeout(this.refetchTimer),this.props.clearData(),Object(ae.a)()},t.prototype.render=function(){var e=this.props.channelLogin,t=this.props.channel,n=t&&t.stream&&t.stream.game?t.stream.game.name:void 0;return(this.props.loading||this.props.error||!(!this.props.match.params.contentType&&this.props.match.params.contentID||this.props.contentType===i.LIVE&&(!t||t&&!t.id)||this.props.contentType===i.CLIP&&P(e,this.props.clip)||this.props.contentType===i.VIDEO&&function(e,t){return!!(e&&t&&t.owner&&t.owner.login&&t.owner.login.toLowerCase()!==e.toLowerCase())}(e,this.props.video)))&&(this.props.loading||!this.props.error||this.props.contentType!==i.VIDEO&&this.props.contentType!==i.CLIP)?u.createElement(qt.a,{theatreModeEnabled:this.props.theatreModeEnabled,persistentPlayerIsPersisting:this.props.persistentPlayerIsPersisting,renderHeader:this.renderHeader(),renderVideoPlayer:this.renderVideoPlayer(),renderSideNav:this.renderSideNav(),renderRightColumn:this.renderRightColumn()},u.createElement(ye.a,{game:n,hostingInfo:this.getHostingContext()}),u.createElement($i,{playerOffline:this.state.playerOffline}),u.createElement(Ee,null),u.createElement(ai,null)):u.createElement(Wt,null)},t.prototype.getCurrentPage=function(e){switch(e.page){case I.c.About:return me.b.Channel;case I.c.Collections:case I.c.Videos:return me.b.Videos;case I.c.Clips:return me.b.Clips;case I.c.Events:return me.b.Events;case I.c.Followers:return me.b.Followers;case I.c.Following:return me.b.Following;case I.c.EsportsLoot:case I.c.EsportsProgress:case I.c.EsportsPass:default:return me.b.Channel}},t.prototype.renderDescription=function(){var e=this.props,t=e.contentType;switch(t){case i.LIVE:return u.createElement(Bt,{channelLogin:e.channelLogin,channelIsHosting:!!e.hostedChannel});case i.COLLECTION:case i.VIDEO:return u.createElement(xr,{collectionID:e.collection&&e.collection.id,currentUser:e.currentUser,video:e.video,getLastVideoOffset:this.getLastVideoOffset});case i.CLIP:return u.createElement(Ii,{clip:e.clip});case i.NONE:return null;default:return t}},t.prototype.renderChat=function(e,t){var n=null,i=this.props.channelLogin,r=this.props.collectionID,a=this.props.hostedChannel,o=!this.props.loading&&r&&this.props.collection&&0===this.props.collection.items.totalCount;return e?n=u.createElement(u.Fragment,null,u.createElement(jr,{bufferedCompanion:this.state.bufferedCompanion,onCompanionAdConsumed:this.onCompanionAdConsumed}),u.createElement(Ye.a,{channelLogin:i,hostedChannelDisplayName:a&&a.displayName?a.displayName:void 0,routedRoomName:this.props.match.params.roomName,onHostingChange:this.onChatHostingChange})):this.props.clip?n=u.createElement(fe.fb,{flexGrow:1,fullHeight:!0},u.createElement(Xe,{clip:this.props.clip,onPlayerSeekRequestHandler:this.onPlayerSeekRequest,onShowLogin:this.props.videoChatLogin})):o||(n=u.createElement(fe.fb,{flexGrow:1,fullHeight:!0},u.createElement(te.l,d.__assign({onPlayerSeekRequest:this.onPlayerSeekRequest,onShowLogin:this.props.videoChatLogin,videoID:L(this.props)||t&&t.id||""},function(e){var t={},n=N.parse(e.location.search),i=U(e);return i!==A&&(t.highlightTimestamp=i),n.comment&&(t.highlightedMessageID=n.comment),t}(this.props))))),n},t.prototype.updateWatchingActivity=function(e){if(e.match.params.channelLogin&&!e.loading&&!e.error&&e.channel&&e.firstPageLoaded&&e.initialUserAvailabilityIsSet){var t=e.channel.id,n=!!j(e.channel)||function(e){return!!e&&!(!e.hosting||!e.hosting.id)}(e.channel);this.currentWatchingActivity.userID===t&&this.currentWatchingActivity.isWatching===n||(this.currentWatchingActivity={userID:t,isWatching:n},n?Object(ae.f)({type:re.a.Watching,userID:t,gameID:null}):Object(ae.a)())}},t.prototype.channelIsHosting=function(){return!!this.props.hostedChannel},t.prototype.getHostingContext=function(){if(this.props.hostedChannel&&this.props.channel&&this.props.channel.id)return{hostingChannelId:this.props.channel.id,hostedChannelId:this.props.hostedChannel.id}},t.prototype.onRender=function(){this.props.loading||(this.props.latencyTracking.reportInteractive(),this.props.clipSlug?B(null,this.props.clip):this.props.videoID&&B(this.props.video,null))},t.prototype.getSourceVideoClipStartOffset=function(){return this.props.clip&&this.props.clip.videoOffsetSeconds?this.props.clip.videoOffsetSeconds:Kr},t.contextTypes={scrollToTop:ne.func},t}(u.PureComponent);var Jr=Object(r.compose)(Z(function(e){return{contentType:e.contentType,channelLogin:e.channelLogin,videoID:e.videoID,collectionID:e.collectionID,clipSlug:e.clipSlug,loading:e.loading,error:e.error,channel:e.channel,video:e.video,collection:e.collection,clip:e.clip,contentCanonicalUrl:e.contentCanonicalUrl,live:e.live,videoPlayerSource:e.videoPlayerSource,currentUser:e.currentUser,page:e.page,hostedChannel:e.hostedChannel,clearData:e.clearData}}),Object(ge.withLatencyTracking)("ChannelRoot"))(Xr);var Zr=Object(r.compose)(function(e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return d.__extends(n,t),n.prototype.render=function(){return u.createElement(ee,d.__assign({},this.props),u.createElement(e,d.__assign({},this.props)))},n}(u.Component)},Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded,isLoggedIn:Object(c.f)(e),initialUserAvailabilityIsSet:!!e.session.initialUserAvailabilityIsSet,theatreModeEnabled:e.ui.theatreModeEnabled,persistentPlayerIsPersisting:e.ui.persistentPlayerIsPersisting,sessionUser:Object(c.e)(e)}},function(e){return Object(o.bindActionCreators)({onVideoTimeChange:te.q,videoChatLogin:function(){return Object(l.e)(s.a.VODComment)}},e)}))(Jr);n.d(t,"ChannelRoot",function(){return Zr})},DOvc:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage__ChannelViewersCount"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewersCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:113}};n.loc.source={body:"query ChannelPage__ChannelViewersCount($login: String!) {\nuser(login: $login) {\nid\nstream {\nid\nviewersCount\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},DfWg:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoOptions_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentOwnerID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentOwnerID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEditor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"query VideoOptions_User($contentOwnerID: ID!) {\nuser(id: $contentOwnerID) {\nid\nself {\nisEditor\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},DnH4:function(e,t,n){},DnOo:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("oJmH"),o=n("/7QA"),s=n("SDEh"),l=n("tIid"),c=n("8EUQ"),d=n("GnwI"),u=n("br9A"),m=n("Ue10"),p="subscribe-button__subscribe-tier-button",h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.openCheckout(),t.props.handleSubAction({action:u.a.ClickCheckout,checkoutButtonTier:t.props.tierPrice})},t.openCheckout=function(){t.props.isMobileCheckout||o.o.set(c.a.SUB_CHECKOUT__PRODUCT_KEY,t.props.productName)},t}return i.__extends(t,e),t.prototype.render=function(){if(this.props.isSubbedToTier){var e=Object(o.d)("Subscribed","SubTierButton");return r.createElement(m.C,{ariaLabel:e,"data-test-selector":p,disabled:!0,icon:m.Db.Star},e)}var t;return t=this.props.isEsportChannel?Object(l.c)(this.props.productName)?Object(o.d)("Get the 2019 All-Access Pass Now","SubTierButton"):Object(o.d)("Get the All-Access Pass","SubTierButton"):this.props.customSubscribeNowMessage?this.props.customSubscribeNowMessage:Object(o.d)("Subscribe","SubTierButton"),r.createElement(m.C,i.__assign({ariaLabel:t+" "+this.props.tierPrice,"data-test-selector":p,linkTo:this.props.isMobileCheckout?this.props.url:void 0,onClick:this.handleClick,purchase:this.props.tierPrice},Object(m.yc)(this.props),{fullWidth:this.props.fullWidth,targetBlank:!!Object(s.b)()||void 0}),t)},t}(r.Component),g=Object(a.compose)(Object(d.withLatencyTracking)("SubTierButton",{autoReportInteractive:!0}))(h);n.d(t,!1,function(){return p}),n.d(t,"a",function(){return g})},DpwM:function(e,t,n){"use strict";n.d(t,"e",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"h",function(){return d});var i="video",r="published",a="unpublished",o="pending_review",s="pending_review_spam",l="current",c="",d=function(e){return""!==e.parentId}},"E/0f":function(e,t,n){"use strict";var i,r=n("mrSG"),a=n("q1tI"),o=n("DMoW"),s=n("0Hf3"),l=n("/7QA"),c=n("Ue10"),d=function(){return a.createElement(c.fb,{flexGrow:1,padding:{x:1,y:2}},a.createElement(c.fb,{alignItems:c.i.Center,display:c.Da.Flex,justifyContent:c.eb.Center,textAlign:c.cc.Center,flexDirection:c.Ga.Column},a.createElement(c.fb,null,a.createElement(c.Cb,{asset:c.Db.DeadGlitch,width:36,height:36})),a.createElement(c.fb,{padding:{x:3,y:0},margin:{x:3,y:0}},a.createElement(c.Ca,{color:c.R.Alt2,fontSize:c.Ia.Size5},Object(l.d)("There was an unexpected error while loading. Please try again later.","ViewerCardModLogsFeature")))))},u=n("5zf8"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getLabel=function(){if(!t.props.banStatus)return"";if(t.props.banStatus.isPermanent)return Object(l.d)("Banned","ViewerCardModLogsFeature");if(t.props.banStatus.expiresAt){var e=new Date(t.props.banStatus.createdAt).valueOf(),n=new Date(t.props.banStatus.expiresAt).valueOf(),i=Object(u.b)((n-e)/1e3,u.a.Humanized);return Object(l.d)("Timeout {duration}",{duration:i},"ViewerCardModLogsFeature")}return Object(l.d)("Unknown","ViewerCardModLogsFeature")},t}return r.__extends(t,e),t.prototype.render=function(){if(!this.props.banStatus)return null;var e=a.createElement(c.Ca,{bold:!0,type:c.gc.Span},this.props.channelName);return a.createElement(c.Ob,{fullWidth:!0,background:c.u.Alt,borderTop:!0,padding:{y:.5,x:1},alignItems:c.i.Baseline},a.createElement(c.Ca,{fontSize:c.Ia.Size4,type:c.gc.Span},a.createElement(c.qb,{type:c.rb.Alert,label:this.getLabel()})),a.createElement(c.Ca,{type:c.gc.Span},Object(l.d)(" in {channelName}",{channelName:e},"ViewerCardModLogsFeature")),a.createElement(c.Ca,{color:c.R.Alt2,type:c.gc.Span},this.modActionLabel))},Object.defineProperty(t.prototype,"modActionLabel",{get:function(){if(!this.props.banStatus||!this.props.banStatus.moderator)return"";var e=a.createElement(c.Ca,{bold:!0,type:c.gc.Span},this.props.banStatus.moderator.displayName),t=new Date(this.props.banStatus.createdAt),n=t&&(Date.now()-t.getTime())/36e5,i=Object(l.d)(" {timestamp, date, short} at {timestamp, time, short} ",{timestamp:t},"ViewerCardModLogsFeature"),r=i;if(n&&n<12){var o=Object(l.h)(t,{style:"best fit"});r=a.createElement(c.jc,{label:i},o)}return Object(l.d)(" {spacer} by {modDisplay} {spacer} {timeElement}",{spacer:"•",modDisplay:e,timeElement:r},"ViewerCardModLogsFeature")},enumerable:!0,configurable:!0}),t}(a.Component),p=n("TSYQ"),h=n("fvjX"),g=n("GnwI"),f=(n("fGoN"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(e){e.preventDefault(),t.props.onClick(t.props.value)},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=p("viewer-card-mod-drawer-tab",{"viewer-card-mod-drawer-tab--active":this.props.isActive});return a.createElement(c.fb,{"data-test-selector":"viewer-card-mod-drawer-tab",className:e,display:c.Da.Flex,flexGrow:2,flexShrink:1},a.createElement(c.Xa,{flexGrow:1,flexDirection:c.Ga.Column,textAlign:c.cc.Left},a.createElement(c.cb,{blurAfterClick:!0,replace:!0,type:c.db.Alpha,"data-action":this.props.value,onClick:this.onClick,linkTo:"not-a-location"},a.createElement(c.fb,{className:"viewer-card-mod-drawer-tab__title",padding:.5},this.props.loading?a.createElement(c.sb,null):a.createElement(c.Ca,{bold:!0,color:c.R.Link,fontSize:c.Ia.Size5},this.props.count),a.createElement(c.Ca,{fontSize:this.props.fontSize},this.props.label)))))},t}(a.Component)),b=Object(h.compose)(Object(g.withLatencyTracking)("ViewerCardModDrawerTab"))(f),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=c.Ia.Size6,t=Object(l.d)("Messages","ViewerCardModLogsFeature"),n=Object(l.d)("Timeouts","ViewerCardModLogsFeature"),i=Object(l.d)("Bans","ViewerCardModLogsFeature"),r=Object(l.d)("Mod Comments","ViewerCardModLogsFeature");[t,n,i,r].every(function(t){return!("string"==typeof t&&t.length>=24)||(e=c.Ia.Size7,!1)});var o=this.props.data&&this.props.data.loading;return a.createElement(c.Ob,{fullWidth:!0,display:c.Da.Flex,padding:{top:.5},className:"viewer-card-mod-drawer-tabs"},a.createElement(b,{count:this.getMessageCountString(),label:t,fontSize:e,isActive:this.props.currentPage===re.Messages,onClick:this.props.changeTab,value:re.Messages,loading:o}),a.createElement(b,{count:this.getTimeoutCount(),label:n,fontSize:e,isActive:this.props.currentPage===re.Timeouts,onClick:this.props.changeTab,value:re.Timeouts,loading:o}),a.createElement(b,{count:this.getChannelBanCount(),label:i,fontSize:e,isActive:this.props.currentPage===re.Bans,onClick:this.props.changeTab,value:re.Bans,loading:o}),a.createElement(b,{count:this.getCommentsCountString(),label:r,fontSize:e,isActive:this.props.currentPage===re.ModComments,onClick:this.props.changeTab,value:re.ModComments,loading:o}))},t.prototype.getTimeoutCount=function(){var e=this.props.data&&this.props.data.channelUser&&this.props.data.channelUser.modLogs,t=e&&e.timeouts&&e.timeouts.actionCount||0,n=e&&e.timeouts&&e.timeouts.pageInfo&&e.timeouts.pageInfo.hasNextPage;return t>=99&&n?"99+":""+t},t.prototype.getChannelBanCount=function(){var e=this.props.data&&this.props.data.channelUser&&this.props.data.channelUser.modLogs,t=e&&e.bans&&e.bans.actionCount||0,n=e&&e.bans&&e.bans.pageInfo&&e.bans.pageInfo.hasNextPage;return t>=99&&n?"99+":""+t},t.prototype.getCommentsCountString=function(){var e=this.props.data&&this.props.data.channelUser&&this.props.data.channelUser.modLogs,t=e&&e.comments&&e.comments.edges||[],n=e&&e.comments&&e.comments.pageInfo&&e.comments.pageInfo.hasNextPage;return t.length>=99&&n?"99+":""+t.length},t.prototype.getMessageCountString=function(){var e=this.props.data&&this.props.data.channelUser&&this.props.data.channelUser.modLogs,t=e&&e.messages&&e.messages.messageCount||0;return t>=999?"999+":""+t},t}(a.Component),k=n("r538"),C=n("/MKj"),y=n("XDQu"),S=n("kY/a"),E=n("8/mp"),N=n("HAa/"),_=n("a1OF"),D=2,w=500,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={error:!1,commentText:"",sendingComment:!1},t.onInputChange=function(e){t.setState({commentText:e.currentTarget.value})},t.handleKeyPress=function(e){if("Enter"===e.key)return t.onSend()},t.onSend=function(){var e=t.state.commentText;if(!(t.state.sendingComment||t.state.commentText.length<D||t.state.commentText.length>w))return t.setState({sendingComment:!0}),t.props.onCreateComment(e).then(function(){t.setState({commentText:"",error:!1,sendingComment:!1})}).catch(function(){t.setState({error:!0,sendingComment:!1})})},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=w-this.state.commentText.length,t=!!this.state.commentText&&e<=20;return a.createElement(c.Ob,{padding:{x:1,bottom:1,top:.5},className:"viewer-card-mod-logs-comment-input"},this.state.error&&a.createElement(c.Ca,{color:c.R.Error},Object(l.d)("Sorry, something went wrong. Please try again later.","ViewerCardModLogsFeature")),t&&a.createElement(c.Ob,{display:c.Da.Flex,borderTop:!0},e<0?a.createElement(c.Cb,{asset:c.Db.NotificationError,width:20,type:c.Eb.Alert}):a.createElement(c.Cb,{asset:c.Db.Warning,width:20,type:c.Eb.Warn}),a.createElement(c.fb,{padding:.5},a.createElement(c.Ca,{"data-test-selector":"viewer-card-mod-logs-comment-input-chars-remaining",color:e>=0?c.R.Alt2:c.R.Error},Object(l.d)("{charsRemaining} characters remaining",{charsRemaining:e},"ViewerCardModLogsFeature")))),a.createElement(c.fb,{display:c.Da.Flex,alignItems:c.i.Start},a.createElement(c.fb,{flexGrow:1,padding:{right:.5},position:c.tb.Relative},a.createElement(c.Za,{"data-test-selector":"viewer-card-mod-logs-comment-text-input",error:this.state.error,icon:c.Db.Whisper,type:c.bb.Text,value:this.state.commentText,placeholder:Object(l.d)("Add a comment","ViewerCardModLogsFeature"),onChange:this.onInputChange,onKeyDown:this.handleKeyPress})),a.createElement(c.C,{"data-test-selector":"viewer-card-mod-logs-comment-input-button",onClick:this.onSend,disabled:e<0||this.state.sendingComment},Object(l.d)("Add","ViewerCardModLogsFeature"))))},t}(a.Component),I=Object(h.compose)(Object(g.withLatencyTracking)("ViewerCardModLogsCommentInput"))(O),T=n("oe5X"),M=n("cys1"),L=n("EE1E"),R=(n("6ZXE"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onDeleteComment=function(){if(t.props.comment)return t.props.onDeleteComment(t.props.comment.id)},t.onMouseEnter=function(){t.props.showDelete&&t.setState({hover:!0})},t.onMouseOut=function(){t.props.showDelete&&t.setState({hover:!1})},t}return r.__extends(t,e),t.prototype.render=function(){if(!this.props.comment||!this.props.comment.details||!this.props.comment.details.text)return null;var e,t=new Date(this.props.comment.timestamp),n=(Date.now()-t.getTime())/36e5,i=Object(l.j)(t,{year:"numeric",month:"numeric",day:"numeric"}),r=Object(l.h)(t,{style:"best fit"});e=n&&n<24?a.createElement(c.jc,{label:i,"data-test-selector":"viewer-card-mod-comment-timestamp-tooltip"},r):a.createElement(a.Fragment,null,i);var o=this.renderCommentParts(this.props.comment.details.text),s=this.props.comment&&this.props.comment.author&&this.props.comment.author.chatColor;s&&this.props.useHighContrastColors&&(s="#"+Object(L.a)(s,this.props.theme));var d=p("viewer-card-mod-logs-comment-line",{"viewer-card-mod-logs-comment-line-deleteable":this.props.showDelete});return a.createElement(c.Xa,{"data-test-selector":"viewer-card-mod-comment",position:c.tb.Relative,display:c.Da.Flex,alignItems:c.i.Start,padding:{x:1,y:.5},className:d},a.createElement("div",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseOut},a.createElement(c.Cb,{asset:c.Db.NavMessages,type:c.Eb.Alt2}),a.createElement(c.Ob,{padding:{left:1}},a.createElement(c.Ca,{color:c.R.Base,wordBreak:c.wc.BreakWord,"data-test-selector":"viewer-card-mod-comment-text"},o),a.createElement(c.Ob,{color:c.R.Alt2,display:c.Da.Flex,alignItems:c.i.Center},a.createElement(c.Aa,{blurAfterClick:!0,hoverUnderlineNone:!0,targetBlank:!0,type:c.Ba.Inherit,"data-test-selector":"viewer-card-mod-comment-author",to:"/"+(this.props.comment&&this.props.comment.author&&this.props.comment.author.login)},a.createElement(c.Ca,{fontSize:c.Ia.Size7},a.createElement("span",{style:s?{color:s}:void 0},this.props.comment&&this.props.comment.author&&this.props.comment.author.displayName))),a.createElement(c.fb,{padding:{x:.5}},"•"),a.createElement(c.Ob,{"data-test-selector":"viewer-card-mod-comment-timestamp",fontSize:c.Ia.Size7},e))),this.state.hover&&a.createElement(c.Ob,{position:c.tb.Absolute,padding:{x:1,bottom:.5},className:"viewer-card-mod-logs-comment-line-delete"},a.createElement(c.D,{blurAfterClick:!0,"data-test-selector":"viewer-card-mod-comment-delete",icon:c.Db.Trash,size:c.E.Small,type:c.F.Alert,onClick:this.onDeleteComment}))))},t.prototype.renderCommentParts=function(e){return Object(M.f)(Object(T.a)(e))},t}(a.Component));!function(e){e.NoComments="no-comments",e.Loading="loading",e.Error="error",e.CommentList="comment-list"}(i||(i={}));var x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={comments:[],cursor:null,hasMoreLeft:!0,loading:!1},t.initialLoad=null,t.saveScrollRef=function(e){return t.scroll=e},t.loadMore=function(){return r.__awaiter(t,void 0,void 0,function(){var e=this;return r.__generator(this,function(t){return!this.state.loading&&this.state.hasMoreLeft?[2,new Promise(function(t){e.setState({loading:!0},t)}).then(function(){return e.props.loadMore({channelID:e.props.channelID,targetID:e.props.targetID,cursor:e.state.cursor})}).then(function(t){return new Promise(function(n){e.setState({cursor:t.cursor,comments:e.state.comments.concat(t.comments),loading:!1,hasMoreLeft:!(!t.cursor||t.cursor===e.state.cursor)},n)})}).catch(function(){return new Promise(function(t){e.setState({error:!0},t)})}).then(function(){return Promise.resolve()})]:[2,Promise.resolve()]})})},t.onCreateComment=function(e){return t.props.onCreateComment(e).then(function(e){e&&t.setState(r.__assign({},t.state,{comments:[e].concat(t.state.comments)}))})},t.onDeleteComment=function(e){return t.props.onDeleteComment(e).then(function(){t.setState(r.__assign({},t.state,{comments:t.state.comments.filter(function(t){return t.id!==e})}))})},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.initialLoad?(this.props.latencyTracking.reportInteractive(),this.scrollToBottom()):this.initialLoad=this.loadMore()},t.prototype.getSnapshotBeforeUpdate=function(){return this.scroll&&this.scroll.scrollContent&&this.scroll.scrollContent.scrollHeight&&(this.prevScrollHeight=this.scroll.scrollContent.scrollHeight),null},t.prototype.componentDidUpdate=function(e,t){if(this.initialLoad){if(this.state.comments&&t.comments&&this.state.comments.length>t.comments.length){var n=this.state.comments[0]&&this.state.comments[0],i=t.comments[0]&&t.comments[0];if(n&&i&&n.id===i.id){if(this.scroll&&this.scroll.scrollContent&&this.prevScrollHeight&&this.prevScrollHeight!==this.scroll.scrollContent.scrollHeight){var r=this.scroll.scrollContent.scrollHeight-this.prevScrollHeight;this.scroll.scrollContent.scrollTop=r}}else this.scrollToBottom()}}else this.initialLoad=this.loadMore()},t.prototype.render=function(){var e=this;if(this.state.error)return a.createElement(c.fb,{fullHeight:!0,fullWidth:!0,"data-test-selector":i.Error},a.createElement(d,null));if(!this.initialLoad||this.state.loading&&0===this.state.comments.length)return a.createElement(c.fb,{padding:{x:1,y:2}},a.createElement(c.hb,{delay:0,fillContent:!0,size:c.Mb.Large,"data-test-selector":i.Loading}));var t=this.props.currentUser&&this.props.currentUser.id,n=this.state.comments.map(function(n){var i=n.channel&&n.channel.id;return a.createElement(R,{key:n.id,comment:n,theme:e.props.theme,showDelete:!!t&&!!i&&i===t,useHighContrastColors:e.props.useHighContrastColors,onDeleteComment:e.onDeleteComment})}).reverse(),r=!!this.state.hasMoreLeft&&!this.state.loading;return a.createElement(c.fb,{display:c.Da.Flex,flexDirection:c.Ga.Column,flexGrow:1,flexShrink:1,className:"mod-logs-entry-list"},a.createElement(c.Xa,{flexGrow:1,flexShrink:1},n.length?a.createElement(E.b,{suppressScrollX:!0,scrollRef:this.saveScrollRef},a.createElement(c.fb,null,a.createElement(E.a,{loadMore:this.loadMore,enabled:r,orientation:N.b.Down,contentLength:n.length,pixelThreshold:200}),a.createElement(c.fb,{key:"comments-list-start",padding:.5}),n,a.createElement(c.fb,{key:"comments-list-end",padding:.5}))):this.renderEmptyState()),a.createElement(I,{onCreateComment:this.onCreateComment}))},t.prototype.renderEmptyState=function(){return a.createElement(c.fb,{flexGrow:1,"data-test-selector":i.NoComments,padding:{x:1,y:2}},a.createElement(c.fb,{alignItems:c.i.Center,display:c.Da.Flex,justifyContent:c.eb.Center,textAlign:c.cc.Center,flexDirection:c.Ga.Column},a.createElement(c.fb,null,a.createElement(c.Y,{src:Object(_.d)(ae.id,2),alt:ae.alt})),a.createElement(c.fb,{padding:{x:4,y:0},margin:{x:4,y:0}},a.createElement(c.Ca,{color:c.R.Alt2,fontSize:c.Ia.Size5},Object(l.d)("There are no mod comments for this user.","ViewerCardModLogsFeature")))))},t.prototype.scrollToBottom=function(){this.scroll&&this.scroll.scrollToBottom()},t}(a.Component),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadMore=function(e){return Object(k.e)(Object(k.c)(l.q.apollo.client.link,{query:S,variables:e})).then(function(e){var t=e.data&&e.data.channelUser&&e.data.channelUser.modLogs&&e.data.channelUser.modLogs.comments,n=null,i=t&&t.edges&&t.edges.map(function(e){return n=e.cursor,e.node})||[];return{cursor:n,comments:i}})},t}return r.__extends(t,e),t.prototype.render=function(){return a.createElement(x,r.__assign({},this.props,{loadMore:this.loadMore}))},t}(a.Component);var A,j=Object(h.compose)(Object(C.connect)(function(e){return{useHighContrastColors:e.chat.useHighContrastColors,theme:Object(y.a)(e)}}),Object(g.withLatencyTracking)("ViewerCardModLogsCommentsList"))(F),U=n("yR8l"),B=n("uIkQ"),P=n("w4P5"),V=n("XmgI"),H=function(e){var t=new Date(e.dateString);return"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime())?null:a.createElement(c.fb,{display:c.Da.Flex,alignItems:c.i.Center},a.createElement(c.Ob,{margin:{right:1,left:1},flexGrow:1,borderBottom:!0}),a.createElement(c.Ca,{color:c.R.Alt2},Object(l.c)(t)),a.createElement(c.Ob,{margin:{right:1,left:1},flexGrow:1,borderBottom:!0}))},G=function(e){return e.entryDetails&&e.entryDetails.reason?a.createElement(c.fb,{className:"targeted-mod-action__reason",padding:{x:1,y:0}},a.createElement(c.Ca,{italic:!0,type:c.gc.Span},e.entryDetails.reason)):null},W=n("9sGC"),q=(n("k7qK"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e,t=this.props.entry,n=new Date(t.timestamp).valueOf(),i=this.renderTimestamp(n),r=t.user&&t.user.login||"unknown",s=t.target&&t.target.login||"unknown",d=t.details&&t.details.durationSeconds||"unknown";switch(t.action){case o.R.BAN_USER:e=Object(l.d)("{modLogin} banned {target}.",{modLogin:a.createElement(c.Ca,{bold:!0,type:c.gc.Span},r),target:s},"ViewerCardModLogsFeature");break;case o.R.TIMEOUT_USER:e=Object(l.d)("{modLogin} timed out {target} for {duration} seconds.",{modLogin:a.createElement(c.Ca,{bold:!0,type:c.gc.Span},r),target:s,duration:d},"ViewerCardModLogsFeature");break;case o.R.UNBAN_USER:e=Object(l.d)("{modLogin} unbanned {target}.",{modLogin:a.createElement(c.Ca,{bold:!0,type:c.gc.Span},r),target:s},"ViewerCardModLogsFeature");break;case o.R.UNTIMEOUT_USER:e=Object(l.d)("{modLogin} removed timeout on {target}.",{modLogin:a.createElement(c.Ca,{bold:!0,type:c.gc.Span},r),target:s},"ViewerCardModLogsFeature");break;default:return null}return a.createElement(c.fb,{className:"targeted-mod-action",padding:{x:1,y:.5}},i,a.createElement(c.Ca,{type:c.gc.Span},e),a.createElement(G,{entryDetails:t.details}))},t.prototype.renderTimestamp=function(e){return a.createElement("span",{key:"timestamp",className:"message__timestamp","data-test-selector":W.b},Object(M.a)(new Date(e),!0))},t}(a.Component)),z=n("1VX3"),Q=(n("lXDb"),["scroll","wheel","mousewheel","DOMMouseScroll","keyup","mousedown"]),Y=10,K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={disableInfiniteTrigger:!0,isAutoScrolling:!0},t.saveScrollRef=function(e){return t.scroll=e},t.handleScrollEvent=function(e){if(t.scroll&&t.scroll.scrollContent&&(e.which>0||"mousedown"===e.type||"mousewheel"===e.type||"wheel"===e.type)){var n=t.scroll.scrollContent.scrollHeight-t.scroll.scrollContent.scrollTop-t.scroll.scrollContent.offsetHeight;n<=Y&&!t.state.isAutoScrolling?t.setState({isAutoScrolling:!0}):n>Y&&t.state.isAutoScrolling&&t.setState({isAutoScrolling:!1})}},t.handleClickMoreMessages=function(){t.setState({isAutoScrolling:!0},t.scrollToBottom)},t.loadMore=function(){return t.isLoadingMore=!0,t.props.loadMore()},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.setState({disableInfiniteTrigger:!1}),this.scroll&&this.scroll.scrollContent&&(this.scrollToBottom(),Q.forEach(function(t){e.scroll.scrollContent&&e.scroll.scrollContent.addEventListener(t,e.handleScrollEvent)}))},t.prototype.componentWillUnmount=function(){var e=this;Q.forEach(function(t){e.scroll&&e.scroll.scrollContent&&e.scroll.scrollContent.removeEventListener(t,e.handleScrollEvent)})},t.prototype.componentWillReceiveProps=function(e){if(e.isBulkLoad&&this.isLoadingMore&&this.scroll&&this.scroll.scrollContent&&(this.prevScrollTop=this.scroll.scrollContent.scrollTop),e.isBulkLoad&&!this.isLoadingMore&&this.scroll&&this.scroll.scrollContent){var t=this.props.messages[this.props.messages.length-1]&&this.props.messages[this.props.messages.length-1].id;if(t&&document.getElementById(t)){var n=document.getElementById(t).offsetTop;this.prevScrollTop=this.scroll.scrollContent.scrollTop-n}else this.prevScrollTop=this.scroll.scrollContent.scrollTop}},t.prototype.componentDidUpdate=function(e){if(e.messages!==this.props.messages&&(this.state.isAutoScrolling&&this.scrollToBottom(),this.props.isBulkLoad&&e.messages&&this.props.messages))if(this.isLoadingMore){var t=e.messages[0]&&e.messages[0].id,n=this.props.messages[0]&&this.props.messages[0].id;if(t&&n&&t!==n){var i=document.getElementById(t);if(i&&this.scroll&&this.scroll.scrollContent){var r=i.offsetTop;this.scroll.scrollContent.scrollTop=this.prevScrollTop+r}}}else{var a=e.messages[e.messages.length-1]&&e.messages[e.messages.length-1].id,o=this.props.messages[this.props.messages.length-1]&&this.props.messages[this.props.messages.length-1].id;if(a&&o&&a!==o){var s=document.getElementById(a);if(s&&this.scroll&&this.scroll.scrollContent){r=s.offsetTop;this.scroll.scrollContent.scrollTop=this.prevScrollTop+r}}}},t.prototype.render=function(){var e=this.renderLines();return a.createElement(c.fb,{className:"message-list mod-logs-entry-list",display:c.Da.Flex,flexDirection:c.Ga.Column,flexWrap:c.Ha.NoWrap,overflow:c.mb.Hidden,flexGrow:1},a.createElement(E.b,{className:"message-list__lines",scrollRef:this.saveScrollRef},a.createElement(c.fb,{flexGrow:1,fullHeight:!0,overflow:c.mb.Hidden},a.createElement(E.a,{"data-test-selector":"backward-infinite-scroll",enabled:!this.state.disableInfiniteTrigger,loadMore:this.loadMore,pixelThreshold:400,orientation:N.b.Down,contentLength:e.length,forceLoadMoreContent:this.props.hasMoreLeft,requestCap:2}),a.createElement(c.fb,{key:"message-list-start",padding:.5}),e,a.createElement(c.fb,{key:"message-list-end",padding:.5}))),a.createElement(c.fb,{position:c.tb.Relative,margin:{x:2}},this.moreMessages()))},t.prototype.moreMessages=function(){return this.state.isAutoScrolling?null:a.createElement(c.Ob,{alignItems:c.i.Center,attachBottom:!0,display:c.Da.Flex,fullWidth:!0,background:c.u.Overlay,justifyContent:c.eb.Center,position:c.tb.Absolute,borderRadius:c.A.Medium,margin:{bottom:1}},a.createElement(c.C,{onClick:this.handleClickMoreMessages,overlay:!0,type:c.I.Text,fullWidth:!0},Object(l.d)("More messages below.","ViewerCardModLogsFeature")))},t.prototype.scrollToBottom=function(){this.scroll.scrollToBottom()},t.prototype.renderLines=function(){var e=this;return this.props.messages.slice().reduce(function(t,n,i){var r=i>0&&e.props.messages[i-1],o="Message"===n.__typename&&new Date(n.sentAt).toLocaleDateString()||"ModLogsTargetedModActionsEntry"===n.__typename&&new Date(n.timestamp).toLocaleDateString(),s=r&&"Message"===r.__typename&&new Date(r.sentAt).toLocaleDateString()||r&&"ModLogsTargetedModActionsEntry"===r.__typename&&new Date(r.timestamp).toLocaleDateString();return 0===i&&o&&t.push(a.createElement(H,{key:i+"-"+o,dateString:o})),s&&o&&s!==o&&t.push(a.createElement(H,{key:i+"-"+o,dateString:o})),"Message"===n.__typename?t.push(a.createElement(z.a,{key:n.id,badgeSets:e.props.badgeSets,bitsConfig:e.props.bitsConfig,hasModPermissions:!1,message:n,showTimestamps:!0,showModerationIcons:!1,onUsernameClick:null,padding:{x:1,y:.5}})):"ModLogsTargetedModActionsEntry"===n.__typename&&t.push(a.createElement(q,{key:n.id,entry:n})),t},[])},t}(a.Component);!function(e){e.NoMessages="no-messages",e.Loading="loading",e.Error="error",e.MessageList="message-list"}(A||(A={}));var $,X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cursor:null,messages:[],loading:!1,hasMoreLeft:!0,error:!1},t.initialLoad=null,t.loadMore=function(){return!t.state.loading&&t.state.hasMoreLeft?new Promise(function(e){t.setState({loading:!0},e)}).then(function(){return t.props.loadMore({senderID:t.props.senderID,channelLogin:t.props.channelLogin,cursor:t.state.cursor})}).then(function(e){return new Promise(function(n){t.setState({messages:e.messages.concat(t.state.messages),cursor:e.cursor,error:e.error,loading:!1,hasMoreLeft:!(!e.cursor||e.cursor===t.state.cursor)},n)})}).catch(function(){return new Promise(function(e){t.setState({error:!0},e)})}).then(function(){return Promise.resolve()}):Promise.resolve()},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.initialLoad||(this.initialLoad=this.loadMore())},t.prototype.componentDidUpdate=function(e){this.initialLoad||(this.initialLoad=this.loadMore())},t.prototype.render=function(){return this.state.error?a.createElement(c.fb,{fullHeight:!0,fullWidth:!0,"data-test-selector":A.Error},a.createElement(d,null)):!this.initialLoad||this.state.loading&&0===this.state.messages.length?a.createElement(c.fb,{padding:{x:1,y:2}},a.createElement(c.hb,{delay:0,fillContent:!0,size:c.Mb.Large,"data-test-selector":A.Loading})):0===this.state.messages.length?a.createElement(c.fb,{display:c.Da.Flex,flexDirection:c.Ga.Column,flexGrow:1,flexShrink:1,padding:{x:1,y:2},"data-test-selector":A.NoMessages},a.createElement(c.fb,{display:c.Da.Flex,alignItems:c.i.Center,justifyContent:c.eb.Center,textAlign:c.cc.Center,flexDirection:c.Ga.Column},a.createElement(c.fb,null,a.createElement(c.Y,{src:Object(_.d)(ae.id,2),alt:ae.alt})),a.createElement(c.fb,{padding:{x:4,y:0},margin:{x:4,y:0}},a.createElement(c.Ca,{color:c.R.Alt2,fontSize:c.Ia.Size5},Object(l.d)("This user hasn't chatted in the channel.","ViewerCardModLogsFeature"))))):a.createElement(c.Ob,{background:c.u.Base,className:"mod-logs-entry-list",fullWidth:!0,"data-test-selector":A.MessageList,display:c.Da.Flex,flexDirection:c.Ga.Column,flexGrow:1,flexShrink:1},a.createElement(K,{badgeSets:this.props.badgeSets,bitsConfig:V.a,isBulkLoad:!0,hasMoreLeft:this.state.hasMoreLeft,messages:this.state.messages,loadMore:this.loadMore}))},t}(a.Component),J=n("34IA"),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadMore=function(e){return Object(k.e)(Object(k.c)(l.q.apollo.client.link,{query:J,variables:e})).then(function(e){var t=e.data&&e.data.channel&&e.data.channel.modLogs&&e.data.channel.modLogs.messagesBySender,n=null,i=[];return t&&t.edges&&t.edges.forEach(function(e){if(!e||!e.node)return null;"ModLogsMessage"===e.node.__typename?i.unshift(r.__assign({},e.node,{__typename:"Message"})):"ModLogsTargetedModActionsEntry"===e.node.__typename&&i.unshift(e.node),n=e.cursor||n}),{cursor:n,messages:i}})},t}return r.__extends(t,e),t.prototype.render=function(){return a.createElement(X,r.__assign({},this.props,{loadMore:this.loadMore}))},t}(a.Component),ee=Object(h.compose)(Object(U.a)(P,{options:function(e){return{variables:r.__assign({},e)}},props:function(e){var t=new B.c([]);if(e.data){var n=e.data,i=n.badges,r=n.channel;i&&r&&r.broadcastBadges&&r.login&&(t=new B.c(i,r.broadcastBadges,r.login))}return{badgeSets:t}}}))(Z);!function(e){e.DateSeparator="viewer-card-mod-logs-date-separator",e.EmptyState="viewer-card-mod-logs-mod-actions-empty-state",e.OutOfSyncState="viewer-card-mod-logs-mod-actions-out-of-sync-state",e.RefetchButtonIcon="viewer-card-mod-logs-mod-actions-out-of-sync-state"}($||($={}));var te="64138",ne="SeemsGood",ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!1},t.sprinkleDateSeparators=function(e){return e&&e.edges&&e.edges.reduce(function(e,t,n,i){if(!t.node)return e;var r=new Date(t.node.timestamp).toLocaleDateString(),o=i[n+1],s="";return o&&o.node&&(s=new Date(o.node.timestamp).toLocaleDateString()),e.push(a.createElement(q,{key:t.node.action+"."+t.node.timestamp,entry:t.node})),s&&r!==s&&e.push(a.createElement(H,{key:""+r,"data-test-selector":$.DateSeparator,dateString:r})),n===i.length-1&&e.push(a.createElement(H,{key:""+r,"data-test-selector":$.DateSeparator,dateString:r})),e},[])},t.iconClick=function(){return r.__awaiter(t,void 0,void 0,function(){var e=this;return r.__generator(this,function(t){switch(t.label){case 0:return this.setState({loading:!0}),[4,this.props.refetch().then(function(){e.setState({loading:!1})},function(){e.setState({loading:!1})})];case 1:return t.sent(),[2]}})})},t.saveScrollRef=function(e){return t.scroll=e},t.scrollToBottom=function(){t.scroll&&t.scroll.scrollToBottom()},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.scrollToBottom()},t.prototype.componentDidUpdate=function(){this.scrollToBottom()},t.prototype.render=function(){if(this.state.loading)return a.createElement(c.hb,{delay:0,fillContent:!0,size:c.Mb.Large});var e=this.props.modActions,t=this.sprinkleDateSeparators(e);return a.createElement(c.fb,{className:"mod-logs-entry-list",flexGrow:1,flexShrink:1,display:c.Da.Flex,flexDirection:c.Ga.Column},t&&t.length>0?a.createElement(E.b,{suppressScrollX:!0,scrollRef:this.saveScrollRef},a.createElement(c.fb,null,a.createElement(c.fb,{key:"targeted-mod-actions-list-start",padding:.5}),t.reverse(),a.createElement(c.fb,{key:"targeted-mod-actions-list-end",padding:.5}))):this.renderEmptyState())},t.prototype.renderEmptyState=function(){var e,t,n;switch(this.props.page){case re.Bans:e=Object(l.d)("This user has not been banned in the channel.","ViewerCardModLogsFeature"),t=Object(l.d)("Bans are currently out of sync. See the current status below or refresh.","ViewerCardModLogsBans"),n=Boolean(this.props.banStatus&&this.props.banStatus.isPermanent);break;case re.Timeouts:e=Object(l.d)("This user has not been timed out in the channel.","ViewerCardModLogsFeature"),t=Object(l.d)("Timeouts are currently out of sync. See the current status below or refresh.","ViewerCardModLogsTimeouts"),n=Boolean(this.props.banStatus&&this.props.banStatus.expiresAt);break;default:e="",t="",n=!1}var i=n?t:e,r=a.createElement(c.fb,{padding:{x:1,y:0},margin:{x:1,y:0}},a.createElement(c.Ca,{color:c.R.Alt2,fontSize:c.Ia.Size5},i)),o=a.createElement(c.fb,{padding:{top:1}},a.createElement(c.C,{type:c.I.Hollow,blurAfterClick:!0,icon:c.Db.Refresh,onClick:this.iconClick,ariaLabel:Object(l.d)("Refresh Chat Logs","ViewerCardModLogs"),"data-test-selector":$.RefetchButtonIcon})),s=a.createElement(c.fb,null,a.createElement(c.Y,{src:Object(_.d)(te,2),alt:ne})),d=r;return n&&(s=r,d=o),a.createElement(c.fb,{padding:{x:n?1:3,y:3},"data-test-selector":n?$.OutOfSyncState:$.EmptyState},a.createElement(c.fb,{alignItems:c.i.Center,display:c.Da.Flex,justifyContent:c.eb.Center,textAlign:c.cc.Center,flexDirection:c.Ga.Column},s,d))},t}(a.Component);n("NWfm"),n("OxSk");n.d(t,"a",function(){return ae}),n.d(t,"c",function(){return re}),n.d(t,"b",function(){return oe});var re,ae={id:"114836",alt:"Jebaited"};!function(e){e[e.Messages=0]="Messages",e[e.Timeouts=1]="Timeouts",e[e.Bans=2]="Bans",e[e.ModComments=3]="ModComments"}(re||(re={}));var oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentPage:null},t.refetchTargetedModActions=function(){return r.__awaiter(t,void 0,void 0,function(){return r.__generator(this,function(e){switch(e.label){case 0:return this.props&&this.props.data?[4,this.props.data.refetch()]:[3,2];case 1:return[2,e.sent()];case 2:return[2]}})})},t.onTabClick=function(e){var n=s.a.Expand,i=e;e===t.state.currentPage&&(i=t.props.isPopoutCard?i:null,n=t.props.isPopoutCard?null:s.a.Collapse),t.props.data&&t.props.data.targetUser&&t.props.permissionsData.channel&&Object(s.c)({targetUserID:t.props.data.targetUser.id,targetLogin:t.props.data.targetUser.login,channelID:t.props.permissionsData.channel.id,channelLogin:t.props.permissionsData.channel.login,clickText:e,action:n}),t.onTabChange(i)},t.onTabChange=function(e){t.setState({currentPage:e})},t.onCreateComment=function(e){return t.props.createModComment({variables:{input:{channelID:t.props.channelID,targetID:t.props.targetID,text:e}}}).then(function(e){var n=e&&e.data.createModeratorComment&&e.data.createModeratorComment.comment;return n&&Object(s.e)(t.props,n),Promise.resolve(n)}).catch(function(){return Promise.reject()})},t.onDeleteComment=function(e){return t.props.deleteModComment({variables:{input:{ID:e}}}).then(function(e){var n=e.data.deleteModeratorComment&&e.data.deleteModeratorComment.comment;return n?(Object(s.f)(t.props,n),Promise.resolve()):Promise.reject()}).catch(function(){return Promise.reject()})},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(),this.props.isPopoutCard&&this.onTabChange(re.Messages)},t.prototype.render=function(){var e=this.props.permissionsData.channel&&this.props.permissionsData.channel.modLogsRoleAccess&&this.props.permissionsData.channel.modLogsRoleAccess.accessLevel===o.Q.WRITE,t=this.props.permissionsData.channel&&this.props.permissionsData.currentUser&&this.props.permissionsData.channel.id===this.props.permissionsData.currentUser.id;return e||t?a.createElement(c.fb,{className:"viewer-card-mod-logs","data-test-selector":"viewer-card-mod-drawer",display:c.Da.Flex,flexDirection:c.Ga.Column,flexGrow:1,flexShrink:1},a.createElement(c.Ob,{borderTop:!0,margin:{x:1},flexGrow:0},a.createElement(v,{data:this.props.data,currentPage:this.state.currentPage,changeTab:this.onTabClick,"data-test-selector":"viewer-card-mod-drawer-tab-bar"})),this.renderPage(),a.createElement(c.Ob,{flexGrow:0},a.createElement(m,{banStatus:this.props.banStatusData.chatRoomBanStatus,channelName:this.props.channelLogin}))):null},t.prototype.renderPage=function(){var e=this.props.data&&this.props.data.targetUser&&this.props.data.targetUser.id;if(!e)return null;if(this.props.data.error)return a.createElement(c.fb,{fullHeight:!0,fullWidth:!0},a.createElement(d,null));if(this.props.data.loading)return a.createElement(c.hb,{delay:0,fillContent:!0,size:c.Mb.Large});var t=this.props.data.channelUser&&this.props.data.channelUser.modLogs;if(!t)return null;var n=null;switch(this.state.currentPage){case re.Messages:n=a.createElement(ee,{key:e,channelLogin:this.props.channelLogin,senderID:e});break;case re.ModComments:n=a.createElement(j,{channelID:this.props.channelID,targetID:e,currentUser:this.props.permissionsData.currentUser,onCreateComment:this.onCreateComment,onDeleteComment:this.onDeleteComment});break;case re.Bans:n=a.createElement(ie,{modActions:t.bans,page:re.Bans,banStatus:this.props.banStatusData.chatRoomBanStatus,refetch:this.refetchTargetedModActions});break;case re.Timeouts:n=a.createElement(ie,{modActions:t.timeouts,page:re.Timeouts,banStatus:this.props.banStatusData.chatRoomBanStatus,refetch:this.refetchTargetedModActions});break;default:return null}return a.createElement(c.Ob,{className:this.props.isPopoutCard?"viewer-card-mod-logs-page viewer-card-mod-logs-page--popout":"viewer-card-mod-logs-page","data-test-selector":"viewer-card-mod-drawer-page",background:c.u.Base,display:c.Da.Flex,flexDirection:c.Ga.Column,flexGrow:1,flexShrink:1},n)},t}(a.Component)},E78O:function(e,t,n){},ECxT:function(e,t,n){},EE1E:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n("EN5X"),r=n("G7cy"),a=n("m7BI"),o=n("E8D/"),s=n("DtRd"),l=n("R4sh"),c=n("/0dD"),d=n("76Lv"),u=4.5,m=[250,249,250],p=[15,14,17],h=.1,g=50,f="7A7A7A",b=36,v={};function k(e,t){var n=s(e),k=C(r(n));if(void 0===t&&(t=Object(d.d)()),k in v[t])return v[t][k];if(t===c.a.Dark&&n.every(function(e){return e<b}))return f;var y=t===c.a.Light?m:p,S=Object(l.a)(n,y);if(S>u)return k;for(var E=[n[0],n[1],n[2]],N=g;N>=0&&S<u;N--){var _=a(E);t===c.a.Light?_[0]-=_[0]*h:_[0]+=_[0]*h,E=o(i(_)),S=Object(l.a)(E,y)}var D=C(r(E));return v[t][k]=D,D}function C(e){return"#"===e[0]?e.substr(1):e}v[c.a.Dark]={},v[c.a.Light]={}},EOIh:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatInput"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isEmbedded"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isEmbedded"}}}]}]}]}},{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hashtags"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:318}};n.loc.source={body:"query ChatInput($channelLogin: String! $isEmbedded: Boolean!) {\ncurrentUser {\nid\nbitsBalance\nisPartner @include(if: $isEmbedded)\n}\nchannel: user(login: $channelLogin) {\nid\nself {\nbanStatus {\nisPermanent\n}\n}\ncheer {\nid\nhashtags {\nedges {\ncursor\nnode {\nid\n}\n}\n}\nsettings {\nemoteMinimumBits\ncheerMinimumBits\nevent\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},ESOY:function(e,t,n){},EdhP:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c});var i=n("mrSG"),r=n("cr+I"),a=n("/7QA"),o=n("vRsq"),s={height:378,width:620,allowScrolling:!0,allowFullscreen:!0};function l(e,t){return c(function(e){e.video&&(e.video=Object(o.p)(e.video));var t=r.stringify(e);return a.q.config.playerBaseURL+"/?"+t}(e),t)}function c(e,t){void 0===t&&(t=s);var n=i.__assign({},s,t),r='<iframe src="'+e+'" frameborder="0" '+(n.allowFullscreen?'allowfullscreen="true" ':"")+(n.allowScrolling?"":'scrolling="no" ')+'height="'+n.height+'" width="'+n.width+'"></iframe>';return n.textLink&&(r+=function(e,t){return'<a href="'+e+'" style="padding:2px 0px 4px; display:block; width:345px; font-weight:normal; font-size:10px; text-decoration:underline;">'+t+"</a>"}(n.textLink.url,n.textLink.text)),r}},Epr8:function(e,t,n){},EuPq:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("Ue10"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClickHandler=function(e){t.props.onClick&&t.props.onClick(),e.currentTarget.select()},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement(a.Za,{readOnly:!0,type:a.bb.Text,value:this.props.value,onClick:this.handleClickHandler})},t}(r.Component);n.d(t,"a",function(){return o})},F6GT:function(e,t,n){"use strict";var i=n("mrSG"),r=n("/7QA"),a="control",o=n("VJH5");n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return d});var s="chatSettings";function l(){var e,t=r.n.get(s,{});return i.__assign({lastUsedFollowerDurations:{},showAutoModActions:!0,showMessageFlags:!0,showModerationActions:!0,showModIcons:!1,showTimestamps:!1,useHighContrastColors:!1,viewerChatFilterSettings:(e={},e[o.a.Aggressive]=!0,e[o.a.Identity]=!0,e[o.a.Profanity]=!0,e[o.a.Sexual]=!0,e),zachModeStatus:a},t)}function c(e,t){var n=l();n[e]=t,r.n.set(s,n)}function d(e,t){var n=l();n.lastUsedFollowerDurations[e]=t,r.n.set(s,n)}},FAYk:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnmodUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmodUserInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unmodUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:119}};n.loc.source={body:"mutation UnmodUser($input: UnmodUserInput!){\nunmodUser(input: $input) {\nchannel {\nid\n}\ntarget {\nid\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},FRDP:function(e,t,n){},FS60:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ChatInput_SendCheer"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SendCheerInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendCheer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"validationError"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messageContent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fragments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AutoMod"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"weight"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheermoteToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsAmount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"prefix"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"emoteID"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:377}};n.loc.source={body:"mutation ChatInput_SendCheer($input: SendCheerInput!) {\nsendCheer(input: $input) {\nid\ncurrentUser {\nid\nbitsBalance\n}\nvalidationError {\ncode\nmessage\nmessageContent {\ntext\nfragments {\ntext\ncontent {\n... on AutoMod {\ntopics {\ntype\nweight\n}\n}\n... on CheermoteToken {\nbitsAmount\nprefix\ntier\n}\n... on Emote {\nemoteID: id\nsetID\ntoken\n}\n... on User {\nid\nlogin\ndisplayName\n}\n}\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Ff8q:function(e,t,n){"use strict";function i(e){var t={};return e.forEach(function(e){t[e.from]={startIndex:e.from,id:e.emoteID}}),t}function r(e){return e.startsWith("@")?e.slice(1):e}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r})},GCGb:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return d});var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("cZKs"),s=n("Ue10"),l=(n("gPTj"),"confirm-button"),c="deny-button",d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){return r.createElement(s.Ob,{className:"twp-modal",background:s.u.Base,color:s.R.Alt,padding:3},r.createElement("h3",null,this.props.title),r.createElement(s.fb,{className:"twp-modal__message",margin:{bottom:2}},this.props.children),r.createElement(s.fb,{display:s.Da.Flex,justifyContent:s.eb.End},r.createElement(s.fb,{margin:{right:1}},r.createElement(s.C,{onClick:this.props.onDenyClick,type:s.I.Hollow,"data-test-selector":c},Object(a.d)("Cancel","ConfirmationModal"))),r.createElement(s.C,{onClick:this.props.onConfirmClick,type:s.I.Alert,disabled:this.props.isConfirmDisabled,"data-test-selector":l},Object(a.d)("Ok","ConfirmationModal"))),r.createElement(o.a,{closeOnBackdropClick:!0}))},t}(r.Component)},GEha:function(e,t,n){},GEnX:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("XXm5"),s=n("Ue10"),l=n("fCiU"),c=(n("sPFP"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onReplyClickHandler=function(){t.props.replyCommentContext?t.props.onReplyClick(Object(l.b)(t.props.replyCommentContext.author)):t.props.onReplyClick()},t}return i.__extends(t,e),t.prototype.render=function(){var e=Object(a.d)("Reply","DashboardModerationReplyButton");return this.props.context===o.c?r.createElement("button",{className:"video-chat-reply-button",onClick:this.onReplyClickHandler,"data-test-selector":"parent-reply-button"},r.createElement(s.fb,{display:s.Da.Flex},r.createElement(s.fb,{className:"video-chat-reply-button__icon",display:s.Da.Flex,padding:{right:.5}},r.createElement(s.Cb,{width:13,height:13,asset:s.Db.Conversations,type:s.Eb.Inherit})),r.createElement(s.Ca,{align:s.uc.Middle,type:s.gc.Span},e))):this.props.context===o.a?r.createElement(s.D,{ariaLabel:e,type:s.F.Hollow,icon:s.Db.Conversations,onClick:this.onReplyClickHandler,"data-test-selector":"moderation-reply-button","data-a-selector":"qa-vod-chat-reply-button"}):r.createElement(s.Ob,{color:s.R.Link,display:s.Da.Inline,margin:{left:1}},r.createElement("button",{onClick:this.onReplyClickHandler,"data-test-selector":"reply-reply-button"},r.createElement(s.Ca,{type:s.gc.Span},e)))},t}(r.Component))},GLn2:function(e,t,n){},GOKC:function(e,t,n){},GPTu:function(e,t,n){},GXBl:function(e,t,n){},Gcqi:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsCard_Bits"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsUserState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsUserSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsUserSettings"},directives:[]}]}}]}}]}}],loc:{start:0,end:187}};i.loc.source={body:'#import "twilight/features/bits/models/bits-user-settings-fragment.gql"\nquery BitsCard_Bits {\ncurrentUser {\nid\nbitsBalance\nlogin\nbitsUserState\nbitsUserSettings {\n...bitsUserSettings\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("5Czc").definitions)),e.exports=i},GvwK:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"hostingChannel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hosting"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:160}};n.loc.source={body:"fragment hostingChannel on User {\nhosting {\nid\nlogin\ndisplayName\nprofileImageURL(width: 70)\nbroadcastSettings {\nid\nlanguage\n}\nstream {\nid\ngame {\nid\nname\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},GxR5:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o});var i="/user/account-recovery",r="https://help.twitch.tv/customer/portal/emails/new",a="https://help.twitch.tv/customer/portal/articles/1727973-about-site-suspensions-channel-bans-and-dmca",o="https://www.twitch.tv/p/legal/terms-of-service/"},GzyO:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"d",function(){return m}),n.d(t,"e",function(){return p});var i=n("mrSG"),r=n("/7QA"),a=n("OpME"),o="twilight.emote_picker_history",s=24,l=[{id:"64138",token:"SeemsGood"},{id:"41",token:"Kreygasm"},{id:"245",token:"ResidentSleeper"},{id:"28087",token:"WutFace"},{id:"86",token:"BibleThump"},{id:"9",token:"<3"},{id:"58765",token:"NotLikeThis"},{id:"81274",token:"VoHiYo"},{id:"88",token:"PogChamp"},{id:"425618",token:"LUL"},{id:"25",token:"Kappa"},{id:"30259",token:"HeyGuys"}];function c(e){var t=r.n.get(o,{}),n=t[e.id];n?(n.uses++,n.lastUpdatedAt=Date.now()):t[e.id]={emote:e,lastUpdatedAt:Date.now(),uses:1},r.n.set(o,t)}function d(){var e=r.n.get(o,{});if(!(Object.keys(e).length>=s)){for(var t={},n=0;n<l.length;n++){var a=l[n];e[a.id]||(t[a.id]={emote:a,lastUpdatedAt:n,uses:0})}var c=i.__assign({},t,e);r.n.set(o,c)}}function u(){return Object(a.b)(l)}function m(e){var t=r.n.get(o,{})||{},n=[],i=!1;return Object.keys(t).forEach(function(r){var a=t[r];if(void 0!==a&&void 0!==e[a.emote.token]){var o=e[a.emote.token].id;o!==r&&(a.emote.id=o,t[o]=a,delete t[o],i=!0),n.push(a)}}),i&&r.n.set(o,t),n.sort(function(e,t){return e.uses>t.uses?-1:t.uses>e.uses?1:e.lastUpdatedAt>t.lastUpdatedAt?-1:t.lastUpdatedAt>e.lastUpdatedAt?1:0}),Object(a.b)(n.slice(0,24).map(function(e){return e.emote}))}function p(){var e=r.n.get(o,{})||{},t={};return Object.keys(e).forEach(function(n){void 0!==e[n]&&(t[e[n].emote.token]={count:e[n].uses})}),t}},H0r1:function(e,t,n){},H1ft:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var i,r=n("/7QA"),a=n("D7An");!function(e){e.None="None",e.Inline="Inline",e.Balloon="moments_with_images"}(i||(i={}));var o=function(){switch(r.q.experiments.getAndTrackAssignment(a.b.Archer)){case"moments_with_images":return i.Balloon;case"inline":return i.Inline;case"control":default:return i.None}}},H31v:function(e,t,n){"use strict";var i,r;n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r}),function(e){e.Bits="bits",e.Leaderboard="bits-leader"}(i||(i={})),function(e){e.Badge="badge_update",e.Balance="balance_update",e.FirstPurchase="first_bits_purchase",e.BadgeNotification="badge_update_notification"}(r||(r={}))},"H4/V":function(e,t,n){},HGFl:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"d",function(){return c});var i=n("NAv5"),r={RFC3399:"YYYY-MM-DDTHH:mm:ssZ",timeString:"h:mma"};function a(e,t){return Object(i.format)(e,t)}function o(e,t){var n=new Date;return n.setHours(e.hours),n.setMinutes(e.minutes),n.setSeconds(0),a(n,t)}function s(e){return Object(i.parse)(e)}function l(e){var t=e.split(":");if(2!==t.length)throw new Error("invalid time string: "+e);var n=parseInt(t[0],10),i=parseInt(t[1].substring(0,2),10),r=t[1].substring(t[1].length-2);if(12===n&&"am"===r&&(n=0),"pm"===r&&n<12&&(n+=12),isNaN(n)||n<0||n>23||isNaN(i)||i<0||i>59)throw new Error("invalid time string: "+e);return{hours:n,minutes:i}}function c(e){return e.hours>-1&&e.hours<24&&e.minutes>-1&&e.minutes<60&&(!e.seconds||e.seconds>-1&&e.seconds<60)}},HSqT:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var i=n("/7QA"),r=[{code:"ar",label:"العربية"},{code:"bg",label:"Български"},{code:"cs",label:"Čeština"},{code:"da",label:"Dansk"},{code:"de",label:"Deutsch"},{code:"el",label:"Ελληνικά"},{code:"en",label:"English"},{code:"es",label:"Español"},{code:"fi",label:"Suomi"},{code:"fr",label:"Français"},{code:"hu",label:"Magyar"},{code:"it",label:"Italiano"},{code:"ja",label:"日本語"},{code:"ko",label:"한국어"},{code:"nl",label:"Nederlands"},{code:"no",label:"Norsk"},{code:"pl",label:"Polski"},{code:"pt",label:"Português"},{code:"ro",label:"Română"},{code:"ru",label:"Русский"},{code:"sk",label:"Slovenčina"},{code:"sv",label:"Svenska"},{code:"th",label:"ภาษาไทย"},{code:"tr",label:"Türkçe"},{code:"vi",label:"Tiếng Việt"},{code:"zh-hk",label:"中文(粵語)"},{code:"zh",label:"中文"}];function a(e){return void 0===e&&(e=!1),[{code:"asl",label:"American Sign Language"},{code:"other",label:e?Object(i.d)("Other","broadcaster-languages"):"Other"}]}var o=new Set(r.concat(a()).map(function(e){return e.code}));function s(){var e=i.q.intl.getLanguageCode(),t=function(t){return"en"===t.code?0:e&&e.startsWith(t.code)?1:2};return r.slice().sort(function(e,n){var i=t(e),r=t(n);return i!==r?i-r:i+":"+e.label<r+":"+n.label?-1:1}).concat(a(!0))}},HWU2:function(e,t,n){},HXcb:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_ChannelHeader"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"videos"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"followers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"follows"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"followButtonFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:375}};i.loc.source={body:'#import "twilight/common/queries/follow-button-fragment.gql"\nquery ChannelPage_ChannelHeader($login: String!) {\nuser(login: $login) {\nid\nlogin\ndisplayName\nprofileImageURL(width: 70)\nroles {\nisPartner\n}\nstream {\nid\n}\nvideos {\ntotalCount\n}\nfollowers {\ntotalCount\n}\nfollows {\ntotalCount\n}\ncheer {\nid\n}\n...followButtonFragment\n}\ncurrentUser {\nid\nroles {\nisStaff\nisSiteAdmin\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("V94A").definitions)),e.exports=i},HfAM:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subProduct"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionProduct"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"priceInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPriceInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interval"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"benefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:463}};i.loc.source={body:'#import "twilight/features/subscribe-button/models/subscription-product-price-info.gql"\nfragment subProduct on SubscriptionProduct {\nid\nurl\nprice\npriceInfo {\n...subscriptionProductPriceInfo\n}\nname\ntier\ninterval {\nunit\n}\nstate\nemotes {\nid\ntoken\n}\nself {\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\nmonths\n}\nbenefit {\nid\ntier\n}\n}\nowner {\nid\ndisplayName\nlogin\nsubscriptionProducts {\nid\ntier\nurl\nprice\nemotes {\nid\ntoken\n}\n}\nstream {\nid\ntype\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("35qb").definitions)),e.exports=i},HiyX:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"tenure"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionTenure"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"daysRemaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}}],loc:{start:0,end:62}};n.loc.source={body:"fragment tenure on SubscriptionTenure {\ndaysRemaining\nmonths\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},HjUq:function(e,t,n){},HjbF:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"e",function(){return a}),n.d(t,"f",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return c});var i=n("DpwM");function r(e,t,n,i){return e in t?{bitsConfig:i,commentID:e,cursor:t[e]}:{bitsConfig:i,commentID:e,videoID:n}}function a(e){var t=e.currentVideoTime<e.offsetRange.beginSec,n=e.currentVideoTime>e.offsetRange.endSec;return t&&l(e.cursor)||n&&s(e.cursor)}function o(e){return s(e.cursor)&&function(e){var t=e.offsetEndTime-e.offsetThreshold;return e.currentVideoTime>=t&&e.currentVideoTime<=e.offsetEndTime}({currentVideoTime:e.currentVideoTime,offsetEndTime:e.offsetEndTime,offsetThreshold:e.offsetThreshold})}function s(e){return e.future!==i.g}function l(e){return e.past!==i.g}function c(e,t){if(!e)return!1;var n=!!t&&null!==t.id&&e.id===t.id,i=e.roles&&(e.roles.isGlobalMod||e.roles.isSiteAdmin||e.roles.isStaff)||!1;return!(!t||!t.self)&&!!t.self.isModerator||i||n}},HzXE:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatRoomBanStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatRoomBanStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelID"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}},{kind:"Argument",name:{kind:"Name",value:"userID"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:142}};n.loc.source={body:"query ChatRoomBanStatus($targetUserID: ID! $channelID: ID!) {\nchatRoomBanStatus(channelID: $channelID userID: $targetUserID) {\nisPermanent\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},I8wU:function(e,t,n){},IIop:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var i=n("XIZb"),r=Object(i.a)("ChatConnection"),a=r.withChatServiceProvider,o=(0,r.withContext)(function(e){return{chatConnectionAPI:e.serviceAPI,setChatConnectionAPI:e.setServiceAPI}})},IKE4:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"badge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Badge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image1x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"NORMAL"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image2x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"DOUBLE"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image4x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"QUADRUPLE"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickAction"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickURL"},arguments:[],directives:[]}]}}],loc:{start:0,end:170}};n.loc.source={body:"fragment badge on Badge {\nid\nsetID\nversion\ntitle\nimage1x: imageURL(size: NORMAL)\nimage2x: imageURL(size: DOUBLE)\nimage4x: imageURL(size: QUADRUPLE)\nclickAction\nclickURL\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},IRJ5:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("oJmH"),o=n("/MKj"),s=n("/7QA"),l=n("gcd7"),c=n("yR8l"),d=n("5zf8"),u=n("DMoW"),m=n("2xye"),p=n("eAdp"),h=n("gMwc"),g=n("5Siz"),f=n("Y5lD");function b(){return Object(s.d)("An unexpected error occurred. Try again.","BookmarkCommandHandler")}function v(){return Object(s.d)("You can only add stream markers during live streams. Try again when the channel is live streaming.","BookmarkCommandHandler")}var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bookmark=function(e){if(void 0===e&&(e=""),t.props.markersData)return{deferred:t.props.markersData.refetch().then(function(){var n=t.props.markersData,i=n.user&&n.user.stream&&n.user.stream.id,r=n.user&&n.user.stream&&n.user.stream.createdAt;return i?t.createBookmarkHelper(i,e,r):Promise.resolve({notice:v()})})}},t.createBookmarkHelper=function(e,n,i){var r=n.substring(0,g.a).trim();return t.props.createVideoBookmark({variables:{input:{broadcastID:e,description:r,medium:t.props.isPopout?"popout_chat":"chat",platform:m.SpadePlatform.Web}}}).then(function(e){var t=e.data&&e.data.createVideoBookmark;if(t&&t.error&&t.error.code)switch(t.error.code){case u.D.ARCHIVES_DISABLED:return{notice:Object(s.d)("Past Broadcast storage must be enabled in order to add stream markers. Enable via Channel Settings and try again.","BookmarkCommandHandler")};case u.D.BROADCAST_FORMAT_INVALID_PREMIERE:case u.D.BROADCAST_FORMAT_INVALID_RERUN:return{notice:Object(s.d)("You can only add stream markers during live streams. Try again when the channel is live streaming and not running a Premiere or Rerun.","BookmarkCommandHandler")};case u.D.BROADCASTER_NOT_LIVE:return{notice:v()};case u.D.USER_UNAUTHORIZED:return{notice:Object(s.d)("You don't have permission to create stream markers for this channel.","BookmarkCommandHandler")};case u.D.INTERNAL_SERVER_ERROR:case u.D.VOD_NOT_READY:default:return{notice:b()}}var n=null===i?null:Object(d.b)(Object(f.a)(i),d.a.ClockHMS),a=""!==r;return{notice:n&&a?Object(s.d)('Successfully added a stream marker at {time}: "{description}"',{description:r,time:n},"BookmarkCommandHandler"):n?Object(s.d)("Successfully added a stream marker at {time}",{time:n},"BookmarkCommandHandler"):a?Object(s.d)('Successfully added a stream marker: "{description}"',{description:r},"BookmarkCommandHandler"):Object(s.d)("Successfully added a stream marker","BookmarkCommandHandler")}}).catch(function(){return{notice:b()}})},t}return i.__extends(t,e),t.prototype.render=function(){return this.props.markersData?r.createElement(l.a,{channelLogin:this.props.channelLogin,command:"marker",handler:this.bookmark}):null},t}(r.Component);var C=Object(a.compose)(Object(o.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}),Object(c.a)(p,{name:"createVideoBookmark"}),Object(c.a)(h,{name:"markersData",skip:function(e){return!e.firstPageLoaded}}))(k);n.d(t,"a",function(){return C})},J6gT:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_StreamType_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:126}};n.loc.source={body:"query ChannelPage_StreamType_User($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\ndisplayName\nstream {\nid\ntype\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},JGCS:function(e,t,n){},JiJH:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnVIPUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RevokeVIPInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"revokeVIP"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"revokee"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:126}};n.loc.source={body:"mutation UnVIPUser($input: RevokeVIPInput!){\nrevokeVIP(input: $input) {\nchannel {\nid\n}\nrevokee {\nid\nlogin\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"Jxh/":function(e,t,n){"use strict";function i(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.fontSize="12pt",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();var n=!0;try{n=document.execCommand("copy")}catch(e){n=!1}return document.body.removeChild(t),n}n.d(t,"a",function(){return i})},JzSO:function(e,t,n){},KD05:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i=function(e){return"v"+e},r=function(e){return e+"s"}},KGti:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"j",function(){return u}),n.d(t,"c",function(){return m}),n.d(t,"i",function(){return p}),n.d(t,"e",function(){return h}),n.d(t,"g",function(){return g}),n.d(t,"h",function(){return f}),n.d(t,"f",function(){return b}),n.d(t,"b",function(){return v}),n.d(t,"d",function(){return k}),n.d(t,"k",function(){return C}),n.d(t,"m",function(){return y}),n.d(t,"l",function(){return S});var i,r=n("mrSG"),a=n("XmgI"),o=n("p52R"),s=n("ZtEv"),l=n("a1OF"),c=n("aF6k");function d(e){return e+"-automod-rejected"}function u(e,t,n,i){var c={badges:null,bits:0,color:"",displayName:"",id:"",userID:n,username:n,userType:o.a.User,emotes:{}},u=Object(l.a)(t,c,a.a);return{type:s.b.AutoMod,autoModType:s.a.MessageRejectedPrompt,id:d(e),category:i,rejectedMessage:r.__assign({},u,{type:s.b.Message,messageType:s.c.Post,id:e})}}function m(e,t,n,i,c){var u={badges:null,bits:0,color:"",displayName:"",id:"",userID:n,username:n,userType:o.a.User,emotes:{}},m=Object(l.a)(t,u,a.a);return{type:s.b.AutoMod,autoModType:s.a.CheerMessageRejectedPrompt,id:d(e),messageID:e,category:i,targetUserID:c,originalMessage:t,rejectedMessage:r.__assign({},m,{type:s.b.Message,messageType:s.c.Post,id:e})}}function p(){return{id:Object(c.a)("automod-message-rejected"),type:s.b.AutoMod,autoModType:s.a.MessageRejected}}function h(){return{id:Object(c.a)("automod-message-allowed"),type:s.b.AutoMod,autoModType:s.a.MessageAllowed}}function g(e){return{id:Object(c.a)("automod-message-denied"),msg_id:e.data.msg_id,type:s.b.AutoMod,autoModType:s.a.MessageModApproved}}function f(e){return{id:Object(c.a)("automod-message-denied"),msg_id:e.data.msg_id,type:s.b.AutoMod,autoModType:s.a.MessageModDenied}}function b(){return{id:Object(c.a)("automod-message-denied"),type:s.b.AutoMod,autoModType:s.a.MessageDenied}}function v(){return{id:Object(c.a)("automod-cheer-message-denied"),type:s.b.AutoMod,autoModType:s.a.CheerMessageDenied}}function k(){return{id:Object(c.a)("automod-cheer-message-timeout"),type:s.b.AutoMod,autoModType:s.a.CheerMessageTimeout}}function C(e,t,n,r){return{id:Object(c.a)("channel-moderation-action"),type:s.b.ModerationAction,moderationActionType:e,level:i.Channel,createdByLogin:t,createdByUserID:n,args:r}}function y(e,t,n,r,a,o,l,d){return{id:Object(c.a)("channel-moderation-action"),type:s.b.ModerationAction,moderationActionType:e,level:i.User,createdByLogin:t,createdByUserID:n,targetUserLogin:r,duration:a,reason:o,messageBody:l,messageID:d}}function S(e,t,n,i){return{id:Object(c.a)("channel-moderation-action"),type:s.b.TargetedModerationAction,targetedModerationActionType:e,targetUserID:t,messageBody:n,targetMessageID:i}}!function(e){e[e.Channel=0]="Channel",e[e.User=1]="User"}(i||(i={}))},KO0n:function(e,t,n){},KOTp:function(e,t,n){"use strict";var i,r=n("q1tI"),a=n("/7QA"),o=n("yWUM"),s=n("OTul"),l=n("Ue10");!function(e){e.ClipWatchFullButton="clips-watch-full-button"}(i||(i={}));var c=function(e){var t=e.buttonType||l.I.Default;return e.video?r.createElement(l.C,{type:t,targetBlank:e.targetBlank,"data-test-selector":i.ClipWatchFullButton,linkTo:Object(s.i)(e.video.id,{tt_medium:e.tt_medium,tt_content:e.tt_content,t:Object(o.a)(e.video.offsetSeconds)})},Object(a.d)("Watch Full Video","ClipsFullVideoButton")):r.createElement(l.C,{type:t,disabled:!0},Object(a.d)("Full Video Unavailable","ClipsFullVideoButton"))};n.d(t,!1,function(){return i}),n.d(t,"a",function(){return c})},KYAw:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var i=n("mrSG"),r=n("cr+I"),a=n("Addw");function o(e,t){var n=new URL("https://www.twitch.tv/collections/"+e);return t&&(n.search=r.stringify(t)),n.toString()}function s(e,t){var n=new URL("https://www.twitch.tv/videos/"+e);return t&&(n.search=r.stringify(i.__assign({},t,{t:"number"==typeof t.t?Object(a.a)(t.t):void 0}))),n.toString()}},KriR:function(e,t,n){"use strict";n.d(t,"h",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"d",function(){return m}),n.d(t,"f",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return u});var i,r=n("/7QA"),a=n("2xye");function o(e){var t={channel:e.channelLogin,channel_id:e.channelId,payment_type:e.paymentType,payment_flow:e.paymentFlow,quantity:e.quantity,action:e.action,action_detail:e.actionDetail,product_id:e.productId,ticket_price:e.ticketPrice,currency:e.currency,saved_payment:e.savedPayment,is_anonymous:e.isAnonymous,checkout_source:e.trackingContext.source};e.trackingContext.detail&&(t.checkout_source_detail=e.trackingContext.detail),r.p.track(a.SpadeEventType.PaymentFormInteraction,t)}!function(e){e.SPM="spm",e.RecurlyCreditCard="recurlyCreditCard"}(i||(i={}));var s,l,c,d,u,m=function(){function e(e){this.store={savedPaymentAvailable:null,savedPaymentDisplayed:null,recurlyCreditCardAvailable:null,details:null},this.counter=0,this.config={allowDuplicateEvents:!(!e||!e.allowDuplicateEvents)},this.readyFields={spm:!1,recurlyCreditCard:!1}}return e.prototype.get=function(e){return this.store[e]},e.prototype.set=function(e){this.store=Object.assign(this.store,e)},e.prototype.setReady=function(e){this.readyFields[e]=!0},e.prototype.reportEvent=function(){this.allFieldsReady&&(0===this.counter||this.config.allowDuplicateEvents)&&(this.counter++,function(e){var t={saved_payment_available:e.savedPaymentAvailable,saved_payment_displayed:e.savedPaymentDisplayed,recurly_credit_card_available:e.recurlyCreditCardAvailable,details:e.details||""};r.p.track(a.SpadeEventType.PaymentFormDisplay,t)}(this.store))},Object.defineProperty(e.prototype,"allFieldsReady",{get:function(){return Object.values(this.readyFields).reduce(function(e,t){return e&&t})},enumerable:!0,configurable:!0}),e}();!function(e){e.Failed="failed",e.Pending="pending",e.Success="success"}(s||(s={})),function(e){e.MysteryGifting="mystery_gifting",e.Gifting="gifting",e.Personal="personal"}(l||(l={})),function(e){e.RecurlyCreditCard="recurly_credit_card",e.RecurlyPaypal="recurly_paypal",e.RecurlyPayWithAmazon="recurly_pay_with_amazon",e.ZuoraCreditCard="zuora_credit_card",e.Xsolla="xsolla"}(c||(c={})),function(e){e.VendorLoginClick="vendor_login_click",e.CompletePurchaseClick="complete_purchase_click",e.PaypalTokenError="paypal_token_error",e.RadioButtonClick="radio_button_click",e.TokenError="token_error",e.PriceChangeAlert="price_change_alert",e.UnsupportedCountryAlert="unsupported_country_alert"}(d||(d={})),function(e){e.ChannelSubscribeButton="channel_subscribe_button_click",e.Direct="direct_url_link",e.EmotePicker="emote_picker_click",e.Extension="extension_click",e.SubscriptionsManagement="subscriptions_management",e.TurboSubscribeButton="turbo_subscribe_button_click",e.ViewerCard="viewer_card_click"}(u||(u={}))},KwB3:function(e,t,n){"use strict";n("7NxT");var i=n("oJmH"),r=n("/MKj"),a=n("yR8l"),o=n("kRBY"),s=n("vSeP"),l=n("IIop"),c=n("knbN"),d=n("nInp"),u=n("2EzP"),m=n("GnwI"),p=n("26nv"),h=n("mrSG"),g=n("q1tI"),f=n("fvjX"),b=n("ZS2+"),v=n("/0dD"),k=n("Mj6i"),C=n("jZLd"),y=n("XDQu"),S=n("003i"),E=n("/i69"),N=n("IRJ5"),_=n("bhOa"),D=n("D91L"),w=n("PtXu"),O=n("gcd7"),I=n("+pBb"),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showChatRules=function(){t.props.showChatRules()},t}return h.__extends(t,e),t.prototype.render=function(){return g.createElement(O.a,{command:"rules",handler:this.showChatRules,channelLogin:this.props.channelLogin})},t}(g.Component);var M,L,R=Object(r.connect)(null,function(e){return Object(f.bindActionCreators)({showChatRules:function(){return I.U()}},e)})(T),x=n("bfuM"),F=n("/7QA"),A=n("CpU+"),j=n("fKMw"),U=n("DMoW"),B=n("Ue10"),P=n("CA5B");!function(e){e.QUERY_ERROR="QUERY_ERROR"}(M||(M={})),function(e){e.UnVIP="vip-command-handler_unvip",e.VIP="vip-command-handler_vip",e.VIPs="vip-command-handler_vips"}(L||(L={}));var V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.vips=function(){return{deferred:F.q.apollo.client.query({query:P,fetchPolicy:"network-only",variables:{login:t.props.channelLogin}}).then(function(e){var n=e.data;if(!n||!n.user||!n.user.vips)return{notice:t.getVIPsErrorMessage()};var i=n.user.vips.edges.filter(function(e){return e.node&&e.node.login});if(0===i.length)return{notice:Object(F.d)("This channel does not have any VIPs.","VIPCommandHandler")};var r=i.map(function(e){return e.node&&e.node.login}).join(", ");return{notice:Object(F.d)("VIPs for this channel are: {vips}.",{vips:r},"VIPCommandHandler")}}).catch(function(){return{notice:t.getVIPsErrorMessage()}})}},t.unVIPUser=function(e){var n=e.trim().split(/\s+/),i=t.getLogin(e);return 1===n.length&&i&&0!==i.length?{deferred:t.props.unVIPUserMutation(i).then(function(e){var n=e.revokeVIP;if(!n||!n.revokee||!n.revokee.login)return{notice:t.getUnVIPErrorMessage(M.QUERY_ERROR)};var r=n.error,a=r&&r.code;return a?{notice:t.getUnVIPErrorMessage(a,i)}:{notice:Object(F.d)("You have removed {login} as a VIP of this channel.",{login:i},"VIPCommandHandler")}}).catch(function(){return{notice:t.getUnVIPErrorMessage(M.QUERY_ERROR)}})}:{deferred:Promise.resolve({notice:Object(F.d)('Usage: "/unvip [login]" - Revoke VIP status to a user. Use "vips" to list the VIPs of this channel.',"VIPCommandHandler")})}},t.vipUser=function(e){var n=t.getLogin(e);return 1===e.trim().split(/\s+/).length&&n&&0!==n.length?{deferred:t.props.vipUserMutation(n).then(function(e){var i=e.grantVIP;if(!i||!i.grantee||!i.grantee.login)return{notice:t.getVIPErrorMessage(M.QUERY_ERROR)};var r=i.error,a=r&&r.code;return a?{notice:t.getVIPErrorMessage(a,n)}:{notice:Object(F.d)("You have added {login} as a VIP of this channel.",{login:n},"VIPCommandHandler")}}).catch(function(){return{notice:t.getVIPErrorMessage(M.QUERY_ERROR)}})}:{deferred:Promise.resolve({notice:Object(F.d)('Usage: "/vip [login]" - Grant VIP status to a user. Use "vips" to list the VIPs of this channel.',"VIPCommandHandler")})}},t}return h.__extends(t,e),t.prototype.render=function(){return g.createElement(B.fb,{display:B.Da.Hide},g.createElement(O.a,{"data-test-selector":L.UnVIP,command:"unvip",channelLogin:this.props.channelLogin,handler:this.unVIPUser}),g.createElement(O.a,{"data-test-selector":L.VIP,command:"vip",channelLogin:this.props.channelLogin,handler:this.vipUser}),g.createElement(O.a,{"data-test-selector":L.VIPs,command:"vips",channelLogin:this.props.channelLogin,handler:this.vips}))},t.prototype.getLogin=function(e){var t=this.props.activeChattersAPI;return t&&t.getActiveChatterLoginFromDisplayName(e)||e},t.prototype.getCommonErrorMessage=function(e,t){switch(e){default:return"";case U.O.GRANTEE_NOT_FOUND:case U.Ia.REVOKEE_NOT_FOUND:return Object(F.d)("Invalid username: {login}.",{login:t},"VIPCommandHandler");case U.O.FORBIDDEN:case U.Ia.FORBIDDEN:return Object(F.d)("You don't have permission to perform that action.","VIPCommandHandler")}},t.prototype.getVIPErrorMessage=function(e,t){switch(void 0===t&&(t=""),e){case U.O.FORBIDDEN:case U.O.GRANTEE_NOT_FOUND:return this.getCommonErrorMessage(e,t);case U.O.GRANTEE_ALREADY_VIP:return Object(F.d)("{login} is already a VIP of this channel.",{login:t},"VIPCommandHandler");case U.O.GRANTEE_CHAT_BANNED:return Object(F.d)("{login} is banned in this channel. You must unban this user before granting VIP status.",{login:t},"VIPCommandHandler");case U.O.MAX_VIPS_REACHED:return Object(F.d)("Unable to add VIP. Visit the Achievements page on your dashboard to learn how to unlock additional VIP slots.","VIPCommandHandler");case U.O.VIP_ACHIEVEMENT_INCOMPLETE:return Object(F.d)("Unable to add VIP. Visit the Achievements page on your dashboard to learn how to unlock this feature.","VIPCommandHandler");case M.QUERY_ERROR:case U.O.CHANNEL_NOT_FOUND:default:return Object(F.d)("Unable to add VIP.","VIPCommandHandler")}},t.prototype.getUnVIPErrorMessage=function(e,t){switch(void 0===t&&(t=""),e){case U.Ia.FORBIDDEN:case U.Ia.REVOKEE_NOT_FOUND:return this.getCommonErrorMessage(e,t);case U.Ia.REVOKEE_NOT_VIP:return Object(F.d)("{login} is not a VIP of this channel.",{login:t},"VIPCommandHandler");case M.QUERY_ERROR:case U.Ia.CHANNEL_NOT_FOUND:default:return Object(F.d)("Unable to remove VIP.","VIPCommandHandler")}},t.prototype.getVIPsErrorMessage=function(){return Object(F.d)("There was a problem fetching the list of VIPs. Please try again.","VIPCommandHandler")},t}(g.Component),H=Object(f.compose)(Object(A.a)(),Object(j.a)(),s.a)(V),G=n("vKai"),W=n("08uX"),q=n("Qii+"),z=function(e){return g.createElement(B.fb,{attachTop:!0,attachLeft:!0,attachRight:!0,display:B.Da.Flex,position:B.tb.Absolute,flexDirection:B.Ga.Column,fullWidth:!0},g.createElement(q.a,{onSendMessage:e.onSendMessage,channelID:e.channelID,channelLogin:e.channelLogin}),g.createElement(W.a,{channelID:e.channelID,channelLogin:e.channelLogin}))},Q=n("Tznh"),Y=n("jBwP"),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={show:!0},t.dismiss=function(){t.setState({show:!1})},t}return h.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.hostedChannelDisplayName!==this.props.hostedChannelDisplayName&&this.setState({show:!0})},t.prototype.render=function(){return this.state.show?g.createElement(B.Ob,{attachTop:!0,attachLeft:!0,attachRight:!0,background:B.u.AccentAlt2,color:B.R.Overlay,position:B.tb.Absolute,className:"hosting-notification",padding:{y:.5,left:.5},"data-a-target":"hosting-notification-container"},g.createElement(B.fb,{display:B.Da.Flex,padding:1,justifyContent:B.eb.Between,alignItems:B.i.Center,flexWrap:B.Ha.NoWrap},g.createElement(B.fb,{display:B.Da.Flex,flexWrap:B.Ha.NoWrap},g.createElement(B.fb,{margin:{right:.5},flexShrink:0},g.createElement(B.Ca,null,Object(F.d)("Hosting","ChatHostingNotification"))),g.createElement(B.fb,{ellipsis:!0,flexShrink:1,margin:{right:.5}},g.createElement(B.Ca,{type:B.gc.Strong,"data-test-selector":"hosting-notification__text","data-a-target":"hosting-notification-channel-name"},""+this.props.hostedChannelDisplayName))),g.createElement(B.fb,{display:B.Da.Flex,flexWrap:B.Ha.NoWrap,flexShrink:0},g.createElement(B.fb,{display:B.Da.Inline,padding:{right:.5}},g.createElement(B.C,{overlay:!0,type:B.I.Hollow,linkTo:{pathname:"/"+this.props.hostedChannelLogin,state:{content:"host_channel",medium:"chat_bar_notification"}},size:B.G.Small,"data-a-target":"hosting-notification-gotochannel-button"},Object(F.d)("Go to Channel","ChatHostingNotification"))),g.createElement(B.D,{onClick:this.dismiss,ariaLabel:Object(F.d)("Close","HostingNotification"),size:B.E.Small,overlay:!0,icon:B.Db.Close,"data-a-target":"hosting-notification-close-button"})))):null},t}(g.Component),$=n("fezU"),X=n("ZtEv"),J=n("aF6k");var Z=n("lZdE"),ee=function(e){function t(t){var n=e.call(this,t)||this;return n.getActiveChatters=function(e,t){if(void 0===e&&(e=""),void 0===t&&(t=1/0),n.isDirty&&n.sortChatters(),!e)return n.sortedChatters.slice(0,t);var i=new RegExp("^"+Object(Z.a)(e),"i");return n.sortedChatters.filter(function(e){return i.test(e.login)||e.displayName&&i.test(e.displayName)}).slice(0,t)},n.handleMessage=function(e){n.getUsersFromEvent(e).forEach(function(e){n.handleActiveChatter(e)})},n.getActiveChatterLoginFromDisplayName=function(e){return Object.keys(n.activeChatters).find(function(t){return n.activeChatters[t]&&n.activeChatters[t].displayName===e})||null},n.reset(),n}return h.__extends(t,e),t.prototype.componentDidMount=function(){this.props.setActiveChattersAPI({getActiveChatters:this.getActiveChatters,getActiveChatterLoginFromDisplayName:this.getActiveChatterLoginFromDisplayName}),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.handleMessage)},t.prototype.componentWillUnmount=function(){this.props.setActiveChattersAPI(),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.handleMessage)},t.prototype.render=function(){return null},t.prototype.componentWillReceiveProps=function(e){e.channelLogin!==this.props.channelLogin&&this.reset(),e.currentUserLogin&&e.currentUserLogin!==this.props.currentUserLogin&&this.activeChatterLogins.has(e.currentUserLogin)&&(this.isDirty=!0,this.removeActiveChatter(e.currentUserLogin)),this.props.messageHandlerAPI!==e.messageHandlerAPI&&(this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.handleMessage),e.messageHandlerAPI&&e.messageHandlerAPI.addMessageHandler(this.handleMessage))},t.prototype.reset=function(){this.activeChatterLogins=new Set,this.activeChatters={},this.isDirty=!0,this.sortedChatters=[]},t.prototype.getUsersFromEvent=function(e){switch(e.type){case X.b.Message:return[{login:e.user.userLogin,displayName:e.user.userDisplayName}];case X.b.Ritual:return[{login:e.message.user.userLogin,displayName:e.message.user.userDisplayName}];case X.b.Raid:return[{login:e.params.login,displayName:e.params.displayName}];case X.b.Resubscription:case X.b.Subscription:return[{login:e.user.username,displayName:e.user.displayName}];case X.b.SubGift:return[{login:e.user.username,displayName:e.user.displayName},{displayName:e.recipientDisplayName,login:e.recipientLogin}];default:return[]}},t.prototype.handleActiveChatter=function(e){e.login!==this.props.channelLogin&&e.login!==this.props.currentUserLogin&&(this.activeChatterLogins.has(e.login)?(this.activeChatterLogins.delete(e.login),this.addActiveChatter(e)):(this.addActiveChatter(e),this.trimActiveChatters(),this.isDirty=!0))},t.prototype.addActiveChatter=function(e){this.activeChatterLogins.add(e.login),this.activeChatters[e.login]=e},t.prototype.removeActiveChatter=function(e){this.activeChatterLogins.delete(e),delete this.activeChatters[e]},t.prototype.trimActiveChatters=function(){if(!(this.activeChatterLogins.size<=300))for(var e=this.activeChatterLogins.size-300,t=this.activeChatterLogins.values(),n=0;n<e;n++){var i=t.next().value;this.removeActiveChatter(i)}},t.prototype.sortChatters=function(){var e=this,t=[{displayName:this.props.channelDisplayName||void 0,login:this.props.channelLogin}],n=Object.keys(this.activeChatters).map(function(t){return e.activeChatters[t]});n.sort(function(e,t){return e.login<t.login?-1:e.login>t.login?1:0}),this.sortedChatters=t.concat(n),this.isDirty=!1},t}(g.Component);var te=Object(f.compose)(Object(r.connect)(function(e){var t=Object(o.e)(e);return{currentUserLogin:t&&t.login}}),s.a,u.a)(ee),ne=n("kz7j"),ie=n("XmgI");var re=n("TApp");var ae=n("a1OF");function oe(e,t,n,i,r,a,o){return void 0===a&&(a=!1),void 0===o&&(o=!1),h.__assign({},Object(ae.a)(t,n,i,r,a,o),{type:X.b.Message,messageType:e,id:n.id||Object(J.a)(n.username)})}var se=n("sblI");var le=n("oK83");var ce=n("WytW"),de=n("oi4T"),ue=n("OpME"),me=function(e){function t(t){var n=e.call(this,t)||this;return n.hasConnected=!1,n.sendMessage=function(e){var t=Object(ce.i)(e,n.props.channelLogin);return t.handled?t.result&&t.result.deferred&&t.result.deferred.then(function(e){var t=e.notice;t&&n.addMessage(Object(re.a)(t))}):n.client.sendCommand(n.props.channelLogin,e).catch(function(e){F.k.warn("Failed to send message, or message timeout",e)}),t.result},n.onJoinedEvent=function(e){n.logger.debug("Connected",n.props.channelLogin),n.props.latencyTracking.reportInteractive(),n.hasConnected||(Object(de.c)({channelLogin:n.props.channelLogin,isHostMode:n.props.isHostMode}),n.hasConnected=!0),n.chatConnected&&n.props.latencyTracking.reportCustomEvent(n.chatConnected),n.postMessageToCurrentChannel(e,{type:X.b.Connected,id:Object(J.a)("connected")})},n.onDisconnectedEvent=function(e){n.props.latencyTracking.reportInteractive(),n.addMessage(function(e){return{type:X.b.Disconnected,id:Object(J.a)("disconnected"),reason:e}}(e.reason))},n.onReconnectingEvent=function(e){return n.addMessage({type:X.b.Reconnect,id:Object(J.a)("reconnect")})},n.onHostedEvent=function(e){return n.postMessageToCurrentChannel(e,function(e,t,n){return{type:X.b.Hosted,id:Object(J.a)("hosted-"+e),hostingChannel:e,isAutohost:t,viewerCount:n}}(e.from,e.isAuto,e.viewers))},n.onHostingEvent=function(e){return n.postMessageToCurrentChannel(e,function(e){return{type:X.b.Hosting,id:Object(J.a)("hosting"),hostedChannel:e}}(e.target))},n.onUnhostEvent=function(e){return n.postMessageToCurrentChannel(e,function(e){return{type:X.b.Unhost,id:Object(J.a)("unhost-"+e)}}(e.channel))},n.onChatMessageEvent=function(e){n.postMessageToCurrentChannel(e,n.convertMessage(e))},n.onChatActionEvent=function(e){var t=n.props.bitsConfig||ie.a,i=oe(X.c.Action,e.action,e.message.user,t,n.getFilterFlagOptions(e.message.flags));n.postMessageToCurrentChannel(e,i)},n.onChatNoticeEvent=function(e){if("msg_rejected"!==e.msgid){var t=function(e,t,n){return{type:X.b.Notice,id:Object(J.a)("notice"),channel:e,msgid:t,message:n}}(e.channel,e.msgid,e.body);n.postMessageToCurrentChannel(e,t)}},n.onTimeoutEvent=function(e){n.onModerationEvent(X.e.Timeout,e)},n.onBanEvent=function(e){n.onModerationEvent(X.e.Ban,e)},n.onClearMsgEvent=function(e){n.postMessageToCurrentChannel(e,function(e,t,n){return{type:X.b.Moderation,moderationType:X.e.Delete,id:Object(J.a)(e+"-mod"),userLogin:e,targetMessageID:t,body:n}}(e.userLogin,e.targetMessageID,e.body))},n.onModerationEvent=function(e,t){n.postMessageToCurrentChannel(t,Object(se.a)(e,t.userLogin,t.reason,t.duration))},n.onSubscriptionEvent=function(e){n.postMessageToCurrentChannel(e,function(e){return{type:X.b.Subscription,id:Object(J.a)(e.user.username+"-sub"),channel:e.channel.slice(1),user:e.user,methods:e.methods}}({channel:e.channel,user:e.user,methods:e.methods}))},n.onSubscriptionGiftEvent=function(e){n.postMessageToCurrentChannel(e,function(e){return{type:X.b.SubGift,id:Object(J.a)(e.user.username+"-sub"),channel:e.channel.slice(1),user:e.user,methods:e.methods,recipientDisplayName:e.recipientDisplayName,recipientID:e.recipientID,recipientLogin:e.recipientLogin,senderCount:e.senderCount}}({channel:e.channel,user:e.user,methods:e.methods,recipientDisplayName:e.recipientName,recipientID:e.recipientID,recipientLogin:e.recipientLogin,senderCount:e.senderCount}))},n.onAnonSubscriptionGiftEvent=function(e){n.postMessageToCurrentChannel(e,function(e){return{type:X.b.AnonSubGift,id:Object(J.a)(e.recipientDisplayName+"-sub"),channel:e.channel.slice(1),methods:e.methods,recipientDisplayName:e.recipientDisplayName,recipientID:e.recipientID,recipientLogin:e.recipientLogin}}({channel:e.channel,methods:e.methods,recipientDisplayName:e.recipientName,recipientID:e.recipientID,recipientLogin:e.recipientLogin}))},n.onSubscriptionMysteryGiftEvent=function(e){n.postMessageToCurrentChannel(e,function(e){return{type:X.b.SubMysteryGift,id:Object(J.a)(e.user.username+"-sub"),channel:e.channel.slice(1),user:e.user,plan:e.plan,massGiftCount:e.massGiftCount,senderCount:e.senderCount}}({channel:e.channel,user:e.user,plan:e.plan,massGiftCount:e.massGiftCount,senderCount:e.senderCount}))},n.onAnonSubscriptionMysteryGiftEvent=function(e){n.postMessageToCurrentChannel(e,function(e){return{type:X.b.AnonSubMysteryGift,id:Object(J.a)(e.massGiftCount+"-sub"),channel:e.channel.slice(1),plan:e.plan,massGiftCount:e.massGiftCount}}({channel:e.channel,plan:e.plan,massGiftCount:e.massGiftCount}))},n.onBitsCharityEvent=function(e){n.postMessageToCurrentChannel(e,function(e,t,n,i,r,a){return{type:X.b.BitsCharity,id:Object(J.a)("charity"),total:e,charityName:t,daysLeft:n,hoursLeft:i,hashtag:r,learnMore:a}}(e.total,e.charityName,e.daysLeft,e.hoursLeft,e.hashtag,e.learnMore))},n.onResubscriptionEvent=function(e){n.postMessageToCurrentChannel(e,function(e){var t=void 0;return e.messageBody&&(t=oe(X.c.Post,e.messageBody,e.user,ie.a,null)),{type:X.b.Resubscription,id:Object(J.a)(e.user.username+"-sub"),channel:e.channel.slice(1),user:e.user,methods:e.methods,message:t,months:e.months,cumulativeMonths:e.cumulativeMonths,shouldShareStreakTenure:e.shouldShareStreakTenure,streakMonths:e.streakMonths}}({channel:e.channel,user:e.user,methods:e.methods,months:e.months,messageBody:e.body,cumulativeMonths:e.cumulativeMonths,shouldShareStreakTenure:e.shouldShareStreakTenure,streakMonths:e.streakMonths}))},n.onGiftPaidUpgradeEvent=function(e){n.postMessageToCurrentChannel(e,function(e){return{type:X.b.GiftPaidUpgrade,id:Object(J.a)(e.user.username+"-sub"),channel:e.channel.slice(1),promoGiftTotal:e.promoGiftTotal,promoName:e.promoName,senderLogin:e.senderLogin,senderName:e.senderName,user:e.user}}({channel:e.channel,promoGiftTotal:e.promoGiftTotal,promoName:e.promoName,senderLogin:e.senderLogin,senderName:e.senderName,user:e.user}))},n.onAnonGiftPaidUpgradeEvent=function(e){n.postMessageToCurrentChannel(e,function(e){return{type:X.b.AnonGiftPaidUpgrade,id:Object(J.a)(e.user.username+"-sub"),channel:e.channel.slice(1),promoGiftTotal:e.promoGiftTotal,promoName:e.promoName,user:e.user}}({channel:e.channel,promoGiftTotal:e.promoGiftTotal,promoName:e.promoName,user:e.user}))},n.onRoomModsEvent=function(e){return n.postMessageToCurrentChannel(e,function(e){return{type:X.b.RoomMods,id:Object(J.a)("roommods"),moderatorLogins:e}}(e.usernames))},n.onRoomStateEvent=function(e){n.postMessageToCurrentChannel(e,function(e){return{type:X.b.RoomState,id:Object(J.a)("roomstate"),state:e}}(e.state))},n.onEmoteOnlyModeEvent=function(e){return n.postMessageToCurrentChannel(e,function(e){return{type:X.b.EmoteOnlyMode,id:Object(J.a)("emoteonlymode"),enabled:e}}(e.enabled))},n.onSubscriberOnlyModeEvent=function(e){return n.postMessageToCurrentChannel(e,function(e){return{type:X.b.SubscriberOnlyMode,id:Object(J.a)("subscriber-only"),enabled:e}}(e.enabled))},n.onR9KModeEvent=function(e){return n.postMessageToCurrentChannel(e,function(e){return{type:X.b.R9KMode,id:Object(J.a)("r9kmode"),enabled:e}}(e.enabled))},n.onClearChatEvent=function(e){return n.postMessageToCurrentChannel(e,{type:X.b.Clear,id:Object(J.a)("clear")})},n.onRaidEvent=function(e){return n.postMessageToCurrentChannel(e,function(e,t,n){return{type:X.b.Raid,id:Object(J.a)("raid"),channel:e,userLogin:t,params:n}}(e.channel,e.userLogin,e.params))},n.onUnraidEvent=function(e){return n.postMessageToCurrentChannel(e,function(e,t,n){return{type:X.b.Unraid,id:Object(J.a)("unraid"),channel:e,userLogin:t,message:n}}(e.channel,e.userLogin,e.message))},n.onRitualEvent=function(e){n.postMessageToCurrentChannel(e,function(e,t){return{type:X.b.Ritual,id:Object(J.a)(t.user.userLogin+"-"+e+"-ritual"),ritualType:e,message:t}}(e.type,n.convertMessage(e)))},n.onFirstCheerEvent=function(e){n.postMessageToCurrentChannel(e,function(e){var t=e.message;return{type:X.b.FirstCheerMessage,id:Object(J.a)(t.user.userLogin+"-firstcheer"),message:t}}({message:n.convertMessage(e)}))},n.onBitsBadgeTierEvent=function(e){n.postMessageToCurrentChannel(e,function(e,t,n){return{type:X.b.BitsBadgeTierMessage,id:Object(J.a)("bits-badge-tier"),message:e,threshold:t,user:n}}(n.convertMessage(e),e.threshold,e.message.user))},n.onBadgesUpdatedEvent=function(e){return n.addMessage(function(e,t){return{type:X.b.BadgesUpdated,id:Object(J.a)("updateBadges"),userName:e,badges:t}}(e.username,e.badges))},n.onPurchaseEvent=function(e){var t=n.props.bitsConfig||ie.a;n.postMessageToCurrentChannel(e,function(e,t,n,i){return{bitsConfig:i,message:t,purchase:e,timestamp:n,id:Object(J.a)(t.user.userLogin+"-purchase"),type:X.b.Purchase}}(e.purchase,n.convertMessage(e),e.timestamp,t))},n.onCrateEvent=function(e){n.postMessageToCurrentChannel(e,function(e,t){return{type:X.b.CrateGift,id:Object(J.a)("crate"),message:e,selectedCount:t}}(n.convertMessage(e),e.selectedCount))},n.onRewardGiftEvent=function(e){n.postMessageToCurrentChannel(e,function(e,t,n,i,r){return{type:X.b.RewardGift,id:Object(J.a)("rewardGift"),selectedCount:t,bitsAmount:n,minCheerAmount:i,messageID:e?e.id:null,userID:e?e.userID:null,userLogin:e?e.username:null,displayName:e?e.displayName:null,domain:r,sourceType:le.b.chat_message}}(e.user,e.selectedCount,e.bitsAmount,e.minCheerAmount,e.domain))},n.convertMessage=function(e){var t=n.props.bitsConfig||ie.a;return oe(X.c.Post,e.message.body,e.message.user,t,n.getFilterFlagOptions(e.message.flags))},n.logger=F.k.withCategory("chat-service"),n.logger.debug("Created"),n.service=F.q.tmi,n.client=F.q.tmi.client,n.disabled=F.q.tmi.disabled,n.registerCustomLatencyEvents(),n}return h.__extends(t,e),t.prototype.render=function(){return null},t.prototype.componentDidMount=function(){this.props.setChatConnectionAPI({sendMessage:this.sendMessage}),this.shouldConnectOnMount()?this.join(this.props.channelLogin):this.props.latencyTracking.reportInteractive(),this.props.emoteSets&&this.client.updateEmoteMap(Object(ue.c)(this.props.emoteSets)),null===this.props.channelID&&this.skipLatencyMeasurements()},t.prototype.componentWillUnmount=function(){this.props.setChatConnectionAPI(),this.disconnect(this.props.channelLogin)},t.prototype.componentWillReceiveProps=function(e){(null===e.channelID&&e.channelID!==this.props.channelID&&this.skipLatencyMeasurements(),e.emoteSets&&e.emoteSets!==this.props.emoteSets&&this.client.updateEmoteMap(Object(ue.c)(e.emoteSets)),!e.shouldConnect&&this.props.shouldConnect)?this.disconnect(this.props.channelLogin):(e.authToken!==this.props.authToken||e.channelLogin!==this.props.channelLogin||e.currentUserLogin!==this.props.currentUserLogin||e.shouldConnect&&!this.props.shouldConnect)&&(this.logger.debug("Reconnecting..."),this.registerCustomLatencyEvents(),this.join(e.channelLogin))},t.prototype.join=function(e){this.logger.debug("Joining channel and binding all event listeners",this.props.channelLogin),this.hasConnected=!1,this.joinedChannel&&this.joinedChannel!==e&&this.service.part(this.props.channelLogin),this.joinedChannel=e,this.connectHandlers(),this.service.join(e)},t.prototype.disconnect=function(e){this.logger.debug("Parting channel and unbinding all event listeners",e),this.disconnectHandlers(),this.service.part(e)},t.prototype.getFilterFlagOptions=function(e){return e&&0!==e.length?this.props.chatFilterExperimentMembership===Q.b.Excluded||!this.props.viewerChatFilterEnabled||this.props.isCurrentUserModerator?null:{list:e,preferences:this.props.viewerChatFilterSettings}:null},t.prototype.connectHandlers=function(){this.disconnectHandlers(),this.client.events.joined(this.onJoinedEvent),this.client.events.disconnected(this.onDisconnectedEvent),this.client.events.reconnecting(this.onReconnectingEvent),this.client.events.chat(this.onChatMessageEvent),this.client.events.usernotice(this.onChatMessageEvent),this.client.events.notice(this.onChatNoticeEvent),this.client.events.action(this.onChatActionEvent),this.client.events.badgesupdated(this.onBadgesUpdatedEvent),this.client.events.hosted(this.onHostedEvent),this.client.events.hosting(this.onHostingEvent),this.client.events.unhost(this.onUnhostEvent),this.client.events.purchase(this.onPurchaseEvent),this.client.events.crate(this.onCrateEvent),this.client.events.rewardgift(this.onRewardGiftEvent),this.client.events.ritual(this.onRitualEvent),this.client.events.firstcheer(this.onFirstCheerEvent),this.client.events.bitsbadgetier(this.onBitsBadgeTierEvent),this.client.events.subscription(this.onSubscriptionEvent),this.client.events.resub(this.onResubscriptionEvent),this.client.events.giftpaidupgrade(this.onGiftPaidUpgradeEvent),this.client.events.anongiftpaidupgrade(this.onAnonGiftPaidUpgradeEvent),this.client.events.subgift(this.onSubscriptionGiftEvent),this.client.events.anonsubgift(this.onAnonSubscriptionGiftEvent),this.client.events.submysterygift(this.onSubscriptionMysteryGiftEvent),this.client.events.anonsubmysterygift(this.onAnonSubscriptionMysteryGiftEvent),this.client.events.timeout(this.onTimeoutEvent),this.client.events.ban(this.onBanEvent),this.client.events.clearchat(this.onClearChatEvent),this.client.events.clearmsg(this.onClearMsgEvent),this.client.events.raid(this.onRaidEvent),this.client.events.unraid(this.onUnraidEvent),this.client.events.mods(this.onRoomModsEvent),this.client.events.roomstate(this.onRoomStateEvent),this.client.events.subscribers(this.onSubscriberOnlyModeEvent),this.client.events.emoteonlymode(this.onEmoteOnlyModeEvent),this.client.events.r9kmode(this.onR9KModeEvent),this.client.events.charity(this.onBitsCharityEvent)},t.prototype.disconnectHandlers=function(){this.client.events.remove("joined",this.onJoinedEvent),this.client.events.remove("disconnected",this.onDisconnectedEvent),this.client.events.remove("reconnecting",this.onReconnectingEvent),this.client.events.remove("chat",this.onChatMessageEvent),this.client.events.remove("usernotice",this.onChatMessageEvent),this.client.events.remove("notice",this.onChatNoticeEvent),this.client.events.remove("action",this.onChatActionEvent),this.client.events.remove("badgesupdated",this.onBadgesUpdatedEvent),this.client.events.remove("hosted",this.onHostedEvent),this.client.events.remove("hosting",this.onHostingEvent),this.client.events.remove("unhost",this.onUnhostEvent),this.client.events.remove("purchase",this.onPurchaseEvent),this.client.events.remove("crate",this.onCrateEvent),this.client.events.remove("rewardgift",this.onRewardGiftEvent),this.client.events.remove("ritual",this.onRitualEvent),this.client.events.remove("firstcheer",this.onFirstCheerEvent),this.client.events.remove("bitsbadgetier",this.onBitsBadgeTierEvent),this.client.events.remove("subscription",this.onSubscriptionEvent),this.client.events.remove("resub",this.onResubscriptionEvent),this.client.events.remove("subgift",this.onSubscriptionGiftEvent),this.client.events.remove("submysterygift",this.onSubscriptionMysteryGiftEvent),this.client.events.remove("timeout",this.onTimeoutEvent),this.client.events.remove("ban",this.onBanEvent),this.client.events.remove("clearchat",this.onClearChatEvent),this.client.events.remove("raid",this.onRaidEvent),this.client.events.remove("unraid",this.onUnraidEvent),this.client.events.remove("mods",this.onRoomModsEvent),this.client.events.remove("roomstate",this.onRoomStateEvent),this.client.events.remove("subscribers",this.onSubscriberOnlyModeEvent),this.client.events.remove("emoteonlymode",this.onEmoteOnlyModeEvent),this.client.events.remove("r9kmode",this.onR9KModeEvent),this.client.events.remove("charity",this.onBitsCharityEvent)},t.prototype.postMessageToCurrentChannel=function(e,t){e.channel.toLowerCase().replace("#","")===this.props.channelLogin.toLowerCase()&&this.addMessage(t)},t.prototype.addMessage=function(e){this.props.messageHandlerAPI&&this.props.messageHandlerAPI.handleMessage(e)},t.prototype.shouldConnectOnMount=function(){return this.props.shouldConnect&&!this.disabled},t.prototype.registerCustomLatencyEvents=function(){this.logger.debug("Registering custom latency events"),this.props.latencyTracking.resetCustomEvents(ne.a.Chat),this.chatInitialized=this.registerInitEvent(),this.props.latencyTracking.reportCustomEvent(this.chatInitialized),this.shouldConnectOnMount()&&(this.chatConnected=this.registerConnectedEvent())},t.prototype.registerInitEvent=function(){return this.props.latencyTracking.registerCustomEvent({benchmark:3e3,group:ne.a.Chat,key:ne.b.ChatInit,label:ne.c.Init})},t.prototype.registerConnectedEvent=function(){return this.props.latencyTracking.registerCustomEvent({benchmark:4e3,group:ne.a.Chat,key:ne.b.ChatConnected,label:ne.c.Connected})},t.prototype.skipLatencyMeasurements=function(){this.props.latencyTracking.resetCustomEvents(ne.a.Chat),this.props.latencyTracking.reportInteractive()},t}(g.Component);var pe=Object(f.compose)(Object(r.connect)(function(e){var t=Object(o.e)(e);return{authToken:Object(o.a)(e),currentUserLogin:t&&t.login,viewerChatFilterEnabled:e.chat.viewerChatFilterEnabled,viewerChatFilterSettings:e.chat.viewerChatFilterSettings}}),Object(m.withLatencyTracking)("ChatConnectionService"),l.a,u.a,Object(Q.d)(function(e){return e}))(me),he=n("x7UT"),ge=n("eDVu"),fe=n("0Log"),be=n("/aPz");var ve,ke=n("olXY"),Ce=n("HGFl"),ye=n("NAv5");function Se(e,t){var n=Object(ye.addSeconds)(e,t);return Math.max(0,Object(ye.differenceInSeconds)(n,new Date))}!function(e){e.Banned="msg_banned",e.Timedout="msg_timedout",e.Ratelimit="msg_ratelimit",e.Duplicate="msg_duplicate",e.Subsonly="msg_subsonly",e.EmoteOnly="msg_emoteonly",e.VerifiedEmail="msg_verified_email",e.Slowmode="msg_slowmode",e.Facebook="msg_facebook",e.BlizzardConnect="msg_blizzard",e.R9k="msg_r9k",e.Followers="msg_followersonly",e.FollowersZero="msg_followersonly_zero",e.FollowersFollowed="msg_followersonly_followed",e.ChannelSuspended="msg_channel_suspended",e.Suspended="msg_suspended",e.BadCharacters="msg_bad_characters"}(ve||(ve={}));var Ee,Ne=n("nIRf"),_e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reasons=[],t.updateHandlers=[],t.followTimerRunning=!1,t.slowModeTimerRunning=!1,t.followSecondsRemaining=0,t.slowSecondsRemaining=0,t.lastMessageSentAt=new Date(0),t.getRestrictions=function(){return 0===t.reasons.length?null:t.reasons},t.updateRestrictionState=function(){var e;if(!t.props.data||!t.props.data.channel)return!1;var n=((e={})[U.t.SUBSCRIBERS_ONLY]=t.shouldEnforceSubsOnly(),e[U.t.VERIFIED_ONLY]=t.shouldEnforceVerifiedOnly(),e[U.t.FOLLOWERS_ONLY]=t.shouldEnforceFollowersOnly(),e[U.t.SLOW_MODE]=t.shouldEnforceSlowMode(),e),i=[],r=t.extractReasons(t.props);if(r)for(var a=0,o=r;a<o.length;a++){var s=o[a];if(n[s])if(s===U.t.VERIFIED_ONLY)t.props.data.currentUser&&t.props.data.currentUser.isEmailVerified||i.push(s);else if(s===U.t.FOLLOWERS_ONLY){if(null!==t.getFollowedTime()){if(0===t.props.followerDurationSeconds)continue;if(t.props.followerDurationSeconds>0&&t.followSecondsRemaining<=0)continue}i.push(s)}else s===U.t.SLOW_MODE?t.slowSecondsRemaining>0&&i.push(s):i.push(s)}return t.reasons=i,!0},t.getRemainingFollowSeconds=function(){return!!t.getFollowedTime()?Math.min(t.followSecondsRemaining,t.props.followerDurationSeconds):null},t.getRemainingSlowModeSeconds=function(){return t.slowSecondsRemaining},t.addUpdateHandler=function(e){-1===t.updateHandlers.indexOf(e)&&(t.updateHandlers=t.updateHandlers.concat(e))},t.removeUpdateHandler=function(e){t.updateHandlers=t.updateHandlers.filter(function(t){return t!==e})},t.updateState=function(){var e=t.updateSlowState();return e=t.updateFollowState()||e,(e=t.updateRestrictionState()||e)&&t.notifyHandlers(),e},t.updateFollowState=function(){var e=t.getFollowedTime(),n=t.followSecondsRemaining,i=n;return e&&(i=Se(e,t.props.followerDurationSeconds),t.followSecondsRemaining=i),t.followTimerRunning&&(null===e||t.followSecondsRemaining<=0||!t.props.followerMode)?(t.stopFollowTimer(),!0):!t.followTimerRunning&&t.props.followerMode&&t.props.followerDuration>0&&e&&0!==e.getTime()?(t.startFollowTimer(),!0):i!==n},t.updateSlowState=function(){if(t.props.data&&t.props.data.channel&&t.props.data.channel.self&&t.props.data.channel.self.lastRecentChatMessageAt){var e=Object(Ce.e)(t.props.data.channel.self.lastRecentChatMessageAt);e>t.lastMessageSentAt&&(t.lastMessageSentAt=e)}var n=(new Date).getTime()/1e3,i=t.lastMessageSentAt.getTime()/1e3+t.props.slowModeDuration,r=t.slowSecondsRemaining;return t.slowSecondsRemaining=Math.round(Math.max(i-n,0)),t.slowModeTimerRunning&&(t.slowSecondsRemaining<=0||!t.props.slowMode||!t.shouldEnforceSlowMode())?(t.stopSlowTimer(),!0):t.slowSecondsRemaining>0&&r<=0?(t.startSlowTimer(),!0):t.slowSecondsRemaining!==r},t.notifyHandlers=function(){t.updateHandlers.forEach(function(e){return e()})},t.onChatEvent=function(e){var n=new Date(0);switch(e.type){case X.b.Message:e.user.userID===t.props.currentUserID&&(n=new Date(e.timestamp));break;case X.b.Notice:Object.values(ve).includes(e.msgid)&&(t.stopSlowTimer(),t.updateRestrictionState(),t.notifyHandlers())}n>t.lastMessageSentAt&&(t.lastMessageSentAt=n,t.updateSlowState()&&(t.updateRestrictionState(),t.notifyHandlers()))},t.startFollowTimer=function(){var e=t.getFollowedTime(),n=t.props.followerDurationSeconds;null===e||n<=0||!t.shouldEnforceFollowersOnly()||(t.followSecondsRemaining=Se(e,n),t.followTimerRunning=!0,t.countdownTimer.start())},t.stopFollowTimer=function(){t.followTimerRunning=!1,t.followSecondsRemaining=0,t.slowModeTimerRunning||t.countdownTimer.stop()},t.startSlowTimer=function(){t.shouldEnforceSlowMode()&&(t.slowModeTimerRunning=!0,t.countdownTimer.start())},t.stopSlowTimer=function(){t.slowModeTimerRunning=!1,t.slowSecondsRemaining=0,t.lastMessageSentAt=new Date(0),t.followTimerRunning||t.countdownTimer.stop()},t.tick=function(){t.updateState()},t.getFollowedTime=function(){return t.props.data&&t.props.data.channel&&t.props.data.channel.self&&t.props.data.channel.self.follower&&t.props.data.channel.self.follower.followedAt?Object(Ce.e)(t.props.data.channel.self.follower.followedAt):null},t.extractReasons=function(e){return e.data&&e.data.channel&&e.data.channel.self&&e.data.channel.self.chatRestrictedReasons?e.data.channel.self.chatRestrictedReasons:null},t.extractRequireVerified=function(e){return!!(e.data&&e.data.channel&&e.data.channel.chatSettings)&&e.data.channel.chatSettings.requireVerifiedAccount},t.restrictionIncluded=function(e){var n=t.extractReasons(t.props);return!!n&&-1!==n.indexOf(e)},t.shouldEnforceSubsOnly=function(){return t.props.subsOnlyMode&&t.restrictionIncluded(U.t.SUBSCRIBERS_ONLY)},t.shouldEnforceVerifiedOnly=function(){return!(!t.extractRequireVerified(t.props)||!t.restrictionIncluded(U.t.VERIFIED_ONLY))},t.shouldEnforceFollowersOnly=function(){return t.props.followerMode&&t.restrictionIncluded(U.t.FOLLOWERS_ONLY)},t.shouldEnforceSlowMode=function(){return t.props.slowMode&&t.restrictionIncluded(U.t.SLOW_MODE)},t}return h.__extends(t,e),t.prototype.componentDidMount=function(){var e=!1;this.props.setChatRestrictionsAPI({addUpdateHandler:this.addUpdateHandler,removeUpdateHandler:this.removeUpdateHandler,getRestrictions:this.getRestrictions,getRemainingFollowSeconds:this.getRemainingFollowSeconds,getRemainingSlowModeSeconds:this.getRemainingSlowModeSeconds}),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.onChatEvent),this.countdownTimer=new Ne.a({onInterval:this.tick,intervalMillis:1e3}),this.shouldEnforceFollowersOnly()&&(this.props.followerDuration>0&&this.startFollowTimer(),e=!0),(this.shouldEnforceSubsOnly()||this.shouldEnforceVerifiedOnly())&&(e=!0),this.props.data&&this.props.data.channel&&this.props.data.channel.self&&this.props.data.channel.self.lastRecentChatMessageAt&&(this.lastMessageSentAt=Object(Ce.e)(this.props.data.channel.self.lastRecentChatMessageAt)),this.shouldEnforceSlowMode()&&(e=this.updateSlowState()||e),e&&this.updateState()},t.prototype.render=function(){return null},t.prototype.componentWillUnmount=function(){this.stopFollowTimer(),this.stopSlowTimer(),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.onChatEvent),this.props.setChatRestrictionsAPI()},t.prototype.componentWillReceiveProps=function(e){this.props.messageHandlerAPI!==e.messageHandlerAPI&&(this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.onChatEvent),e.messageHandlerAPI&&e.messageHandlerAPI.addMessageHandler(this.onChatEvent))},t.prototype.componentDidUpdate=function(e){var t=!1,n=!1;n=this.needsStateUpdate(e)||n,n=this.updateSlowState()||n,n=this.updateFollowState()||n,this.slowModeTimerRunning&&e.slowModeDuration!==this.props.slowModeDuration&&(this.stopSlowTimer(),n=!0),e.pubsub.messages.subscriptionInfo!==this.props.pubsub.messages.subscriptionInfo&&(n=!0,t=!0),e.pubsub.messages.moderatorActions&&e.pubsub.messages.moderatorActions!==this.props.pubsub.messages.moderatorActions&&(t=!0),t&&this.props.data&&this.props.data.refetch(),n&&(this.updateRestrictionState(),this.notifyHandlers())},t.prototype.needsStateUpdate=function(e){if((!e.data||e.data.loading)&&this.props.data&&!this.props.data.loading)return!0;var t=this.extractReasons(e),n=this.extractReasons(this.props);if(!t&&n||t&&!n)return!0;if(t&&n&&(t.length!==n.length||t.every(function(e,t){return e===n[t]})))return!0;if(e.subsOnlyMode!==this.props.subsOnlyMode||e.followerMode!==this.props.followerMode)return!0;if(e.followerDuration!==this.props.followerDuration)return!0;if(this.extractRequireVerified(e)!==this.extractRequireVerified(this.props))return!0;if(e.data&&this.props.data){var i=e.data,r=this.props.data;if(i.currentUser&&r.currentUser&&i.currentUser.isEmailVerified!==r.currentUser.isEmailVerified)return!0;if(r.channel&&r.channel.self){var a=r.channel.self,o=new Date(0),s=!1,l=!(!a.follower||!a.follower.followedAt);if(i.channel&&i.channel.self&&i.channel.self.follower&&i.channel.self.follower.followedAt&&(o=Object(Ce.e)(i.channel.self.follower.followedAt),s=!0),s&&!l)return!0;if(l){var c=new Date(0);if(a.follower&&a.follower.followedAt&&(c=Object(Ce.e)(a.follower.followedAt)),o.getTime()!==c.getTime())return!0}}}return!1},t}(g.Component);function De(e){return!e.data||e.data.loading||!e.data.channel||!e.data.channel.id||!e.currentUserID}var we=Object(f.compose)(Object(r.connect)(function(e){var t=Object(o.e)(e);return{currentUserID:t&&t.id,isStaff:!!(t&&t.roles&&t.roles.isStaff)}}),c.a,u.a,Object(a.a)(ke,{options:function(e){return{variables:{channelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(he.a)([{topic:function(e){return Object(be.H)(e.currentUserID||"")},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:De},{topic:function(e){return Object(be.q)(e.currentUserID||"",e.data&&e.data.channel&&e.data.channel.id||"")},mapMessageTypesToProps:(Ee={},Ee[fe.PubsubMessageType.ModeratorAdded]="moderatorActions",Ee[fe.PubsubMessageType.ModeratorRemoved]="moderatorActions",Ee),skip:De,skipMessage:function(e,t){var n=e;return!t.data.currentUser||n.data.target_user_id!==t.data.currentUser.id}}]),Object(ge.a)(function(e){return{query:ke,variables:{channelLogin:e.channelLogin},topic:Object(be.G)(e.currentUserID||""),type:fe.PubsubMessageType.UserPropertiesUpdate,skip:De(e),mutator:function(e,t){return t&&t.currentUser?void 0===e.changed.email_verified?t:(t.currentUser.isEmailVerified=e.changed.email_verified,t):t}}}),Object(ge.a)(function(e){return{query:ke,variables:{channelLogin:e.channelLogin},topic:Object(be.m)(e.currentUserID||""),types:[fe.PubsubMessageType.UserFollowedEvent,fe.PubsubMessageType.UserUnfollowedEvent],skip:De(e),mutator:function(e,t){if(!t||!t.channel||!t.channel.self)return t;if(function(e){return e.type===fe.PubsubMessageType.UserFollowedEvent}(e)){if(e.target_user_id!==t.channel.id)return t;t.channel.self.follower?t.channel.self.follower.followedAt=e.timestamp:t.channel.self.follower={__typename:"FollowerEdge",followedAt:e.timestamp}}else if(function(e){return e.type===fe.PubsubMessageType.UserUnfollowedEvent}(e)){if(e.target_user_id!==t.channel.id)return t;t.channel.self.follower&&(t.channel.self.follower.followedAt=null)}return t}}}),Object(Y.b)(function(e){return{followerDuration:e.followerDuration,followerDurationSeconds:60*e.followerDuration,followerMode:e.followerMode,slowMode:e.slowMode,slowModeDuration:e.slowModeDuration,subsOnlyMode:e.subsOnlyMode}}))(_e),Oe=n("lw3P"),Ie=n("nkgB"),Te=n("RcPG"),Me=1e3,Le=1e3,Re=200,xe=function(e){function t(t){var n=e.call(this,t)||this;return n.delayedMessageBuffer=[],n.updateHandlers=[],n.handleMessage=function(e){var t=!1;switch(e.type){case X.b.Message:if(n.uncountedMessages++,e.user.userID&&n.blockedUsers.has(e.user.userID)){if(!n.props.shouldSeeBlockedAndDeletedMessages)return;e.hidden=!n.unhideUsers.has(e.user.userID)}var i=e.messageParts[0];if(i&&i.type===Te.a.Text&&i.content.startsWith(":act "))return;t=!n.isOwnMessage(e);break;case X.b.Resubscription:t=!!e.message&&!n.isOwnMessage(e.message);break;case X.b.Moderation:var r=e.moderationType,a=e.userLogin;if(n.moderatedUsers.has(a))return;var o=[n.buffer,n.delayedMessageBuffer.map(function(e){return e.event})];if(r===X.e.Delete){var s=e.targetMessageID;o.forEach(function(e){e.some(function(e){switch(e.type){case X.b.Message:if(e.id===s)return e.deleted=!0,!0;break;case X.b.Resubscription:case X.b.Ritual:if(e.message&&e.id===s)return e.message.deleted=!0,!0}return!1})})}else o.forEach(function(e){e.forEach(function(e){switch(e.type){case X.b.Message:e.user&&a===e.user.userLogin&&e.messageParts&&!e.deleted&&(e.deleted=!0,e.banned=!0);break;case X.b.Resubscription:case X.b.Ritual:e.message&&a===e.message.user.userLogin&&!e.message.deleted&&(e.message.deleted=!0,e.message.banned=!0)}})}),n.moderatedUsers.add(a),setTimeout(n.unmoderateUser(a),Me);break;case X.b.Disconnected:return;case X.b.Reconnect:if(n.buffer.find(function(t){return t.id===e.id})||n.delayedMessageBuffer.find(function(t){return t.event.id===e.id}))return;break;case X.b.Clear:n.clear();break;case X.b.AutoMod:switch(e.autoModType){case X.a.MessageModApproved:case X.a.MessageModDenied:return void[n.buffer,n.delayedMessageBuffer.map(function(e){return e.event})].forEach(function(t){t.some(function(t){return!(t.type!==X.b.AutoMod||t.autoModType!==X.a.MessageRejectedPrompt||!t.rejectedMessage||t.rejectedMessage.id!==e.msg_id)&&(t.rejectedMessage.deleted=!0,!0)})})}}n.delayedMessageBuffer.push({event:e,time:Date.now(),shouldDelay:t})},n.getMessages=function(){return n.buffer},n.unmoderateUser=function(e){return function(){n.moderatedUsers.delete(e)}},n.isOwnMessage=function(e){var t=e.user;return!(!n.props.currentUserLogin||!t||t.userLogin!==n.props.currentUserLogin)},n.addUpdateHandler=function(e){-1===n.updateHandlers.indexOf(e)&&(n.updateHandlers=n.updateHandlers.concat(e))},n.removeUpdateHandler=function(e){n.updateHandlers=n.updateHandlers.filter(function(t){return t!==e})},n.delayedMessageBuffer=[],n.buffer=[],n.moderatedUsers=new Set,n.blockedUsers=new Set(n.props.blockedUsers),n.unhideUsers=new Set,n.flushInterval=setInterval(function(){return n.flushRawMessages()},Re),n.uncountedMessages=0,n.chatRateMeasurements=[],n.chatRateMeasurementInterval=setInterval(function(){return n.measureChatRate()},Le),n}return h.__extends(t,e),t.prototype.componentDidMount=function(){this.props.setMessageBufferAPI({addUpdateHandler:this.addUpdateHandler,removeUpdateHandler:this.removeUpdateHandler,getMessages:this.getMessages}),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.handleMessage)},t.prototype.componentWillUnmount=function(){this.props.setMessageBufferAPI(),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.handleMessage),clearInterval(this.flushInterval),clearInterval(this.chatRateMeasurementInterval)},t.prototype.render=function(){return null},t.prototype.componentWillReceiveProps=function(e){this.props.messageHandlerAPI!==e.messageHandlerAPI&&(this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.handleMessage),e.messageHandlerAPI&&e.messageHandlerAPI.addMessageHandler(this.handleMessage)),e.blockedUsers!==this.props.blockedUsers&&(this.blockedUsers=new Set(e.blockedUsers)),e.unhideIgnoredUsers!==this.props.unhideIgnoredUsers&&(this.unhideUsers=new Set(e.unhideIgnoredUsers)),this.props.isBackground&&!e.isBackground&&(this.chatRate>5&&this.clear(20),this.notifySubscribers())},t.prototype.clear=function(e){if(void 0===e&&(e=0),e<=0)return this.buffer=[],void(this.delayedMessageBuffer=[]);this.buffer=this.buffer.slice(-e)},t.prototype.isDeletable=function(e){return void 0!==e.deleted},t.prototype.flushRawMessages=function(){var e=this,t=[],n=Date.now(),i=!1;this.delayedMessageBuffer.forEach(function(r){var a=r.event,o=r.time,s=r.shouldDelay;o<=n-e.delayDuration||!s?!e.props.shouldSeeBlockedAndDeletedMessages&&e.isDeletable(a)&&a.deleted||(e.buffer.push(a),i=!0):t.push({event:a,time:o,shouldDelay:s})}),this.delayedMessageBuffer=t,i&&(this.clear(150),this.props.isBackground||this.notifySubscribers())},t.prototype.measureChatRate=function(){3===this.chatRateMeasurements.length&&this.chatRateMeasurements.shift(),this.chatRateMeasurements.push(this.uncountedMessages),this.uncountedMessages=0},Object.defineProperty(t.prototype,"chatRate",{get:function(){return 0===this.chatRateMeasurements.length?0:this.chatRateMeasurements.reduce(function(e,t){return e+t})/this.chatRateMeasurements.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delayDuration",{get:function(){return this.props.isCurrentUserModerator?0:this.props.data.user&&this.props.data.user.chatSettings&&this.props.data.user.chatSettings.chatDelayMs||0},enumerable:!0,configurable:!0}),t.prototype.notifySubscribers=function(){this.updateHandlers.forEach(function(e){return e()})},t}(g.Component);var Fe=Object(f.compose)(Object(r.connect)(function(e){var t=Object(o.e)(e);return{authToken:Object(o.a)(e),currentUserLogin:t&&t.login,isLoggedIn:Object(o.f)(e)}}),Object(a.a)(Ie,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(Oe.a)(),d.a,u.a)(xe),Ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageHandlers=[],t.addMessageHandler=function(e){-1===t.messageHandlers.indexOf(e)&&(t.messageHandlers=t.messageHandlers.concat(e))},t.removeMessageHandler=function(e){t.messageHandlers=t.messageHandlers.filter(function(t){return t!==e})},t.handleMessage=function(e){for(var n=t.messageHandlers.length,i=0;i<n;i++)t.messageHandlers[i](e)},t}return h.__extends(t,e),t.prototype.componentDidMount=function(){this.props.setMessageHandlerAPI({addMessageHandler:this.addMessageHandler,removeMessageHandler:this.removeMessageHandler,handleMessage:this.handleMessage})},t.prototype.render=function(){return null},t.prototype.componentWillUnmount=function(){this.props.setMessageHandlerAPI()},t}(g.Component),je=Object(f.compose)(u.a)(Ae),Ue=n("KGti"),Be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.subscribe=function(e){t.unsubscribe(),e.channelID&&e.currentUserID&&(t.unsubscriber=F.m.subscribe({topic:Object(be.q)(e.currentUserID,e.channelID),onMessage:t.handleMessage}))},t.unsubscribe=function(){t.unsubscriber&&(t.unsubscriber(),t.unsubscriber=null)},t.handleMessage=function(e){switch(e.data.moderation_action){case fe.ModerationActions.AutoModRejected:var n=Object(Ue.j)(e.data.msg_id,e.data.args[1],e.data.args[0],e.data.args[2]);t.addMessage(n);break;case fe.ModerationActions.AutoModCheerRejected:var i=Object(Ue.c)(e.data.msg_id,e.data.args[1],e.data.args[0],e.data.args[2],e.data.target_user_id);t.addMessage(i);break;case fe.ModerationActions.ApprovedAutoModMessage:t.addMessage(Object(Ue.g)(e));break;case fe.ModerationActions.DeniedAutoModMessage:t.addMessage(Object(Ue.h)(e));break;case fe.TargetedModerationActions.AutoModMessageRejected:t.addMessage(Object(Ue.i)());break;case fe.TargetedModerationActions.AutoModMessageApproved:t.addMessage(Object(Ue.e)());break;case fe.TargetedModerationActions.AutoModMessageDenied:t.addMessage(Object(Ue.f)());break;case fe.TargetedModerationActions.AutoModCheerDenied:t.addMessage(Object(Ue.b)());break;case fe.TargetedModerationActions.AutoModCheerTimeout:t.addMessage(Object(Ue.d)());break;case fe.ModerationActions.Ban:t.addMessage(Object(Ue.m)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.args[0],void 0,e.data.args[1]));break;case fe.ModerationActions.Delete:t.addMessage(Object(Ue.m)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.args[0],void 0,void 0,e.data.args[1],e.data.args[2]));break;case fe.TargetedModerationActions.DeleteNotification:t.addMessage(Object(Ue.l)(fe.TargetedModerationActions.DeleteNotification,e.data.target_user_id,e.data.args[0],e.data.msg_id));break;case fe.ModerationActions.Unban:case fe.ModerationActions.Timeout:case fe.ModerationActions.Untimeout:case fe.ModerationActions.Mod:case fe.ModerationActions.Unmod:t.addMessage(Object(Ue.m)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.args[0],e.data.args[1],e.data.args[2]));break;case fe.ModerationActions.AutoModEnabled:case fe.ModerationActions.Clear:case fe.ModerationActions.EmoteOnly:case fe.ModerationActions.EmoteOnlyOff:case fe.ModerationActions.FollowersOnly:case fe.ModerationActions.FollowersOnlyOff:case fe.ModerationActions.Host:case fe.ModerationActions.R9kBeta:case fe.ModerationActions.R9kBetaOff:case fe.ModerationActions.Raid:case fe.ModerationActions.Slow:case fe.ModerationActions.SlowOff:case fe.ModerationActions.SubsBeta:case fe.ModerationActions.SubscribersOnly:case fe.ModerationActions.SubscribersOnlyOff:case fe.ModerationActions.Unhost:case fe.ModerationActions.AddBlockedTerm:case fe.ModerationActions.AddPermittedTerm:case fe.ModerationActions.DeleteBlockedTerm:case fe.ModerationActions.DeletePermittedTerm:case fe.ModerationActions.ModifiedAutoModProperties:case fe.ModerationActions.Unraid:t.addMessage(Object(Ue.k)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.args));break;default:F.k.warn("Unknown moderation action type",e.data.moderation_action)}},t}return h.__extends(t,e),t.prototype.componentDidMount=function(){this.subscribe(this.props)},t.prototype.componentWillReceiveProps=function(e){e.channelID===this.props.channelID&&e.currentUserID===this.props.currentUserID||this.subscribe(e)},t.prototype.componentWillUnmount=function(){this.unsubscribe()},t.prototype.render=function(){return null},t.prototype.addMessage=function(e){this.props.messageHandlerAPI?this.props.messageHandlerAPI.handleMessage(e):F.k.warn("ModerationActionService received an event before the MessageHandlerAPI was available.")},t}(g.Component);var Pe=Object(f.compose)(Object(r.connect)(function(e){var t=Object(o.e)(e);return{currentUserID:t&&t.id}}),u.a)(Be),Ve=n("BJwa"),He="(?:\\W|^)",Ge="(?:$|\\W)",We="PowerUpL DarkMode PowerUpR",qe={failSilently:!0,placeholder:null},ze=b.a.wrap(function(){return n.e(223).then(n.bind(null,"Gnts"))},"MysteryGiftChatBannerQueue",qe),Qe=b.a.wrap(function(){return n.e(222).then(n.bind(null,"KSjr"))},"NativeBroadcastNotification",qe),Ye=b.a.wrap(function(){return n.e(221).then(n.bind(null,"T3fw"))},"Orbis",qe),Ke=b.a.wrap(function(){return n.e(220).then(n.bind(null,"7htX"))},"RaidNotification",qe),$e=b.a.wrap(function(){return n.e(219).then(n.bind(null,"rg60"))},"RitualsOnboardingSticky",qe),Xe=b.a.wrap(function(){return n.e(218).then(n.bind(null,"miqE"))},"ShareToChat",qe),Je=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasReceivedInitialRoomState:!1,hostedChannelLogin:null,userBadges:null},n.sendMessage=function(e){if(!e||0===e.length||!n.props.authToken)return!1;if(!n.props.chatConnectionAPI)return!1;var t=n.props.chatConnectionAPI.sendMessage(e);return(!t||!t.preserveInput)&&(n.parseOutgoingMessage(e),!0)},n.pushMessage=function(e){n.props.messageHandlerAPI&&n.props.messageHandlerAPI.handleMessage(e)},n.onChatEvent=function(e){switch(e.type){case X.b.Hosting:n.hostingHandler(e.hostedChannel);break;case X.b.Unhost:n.hostingHandler(null);break;case X.b.RoomState:n.onRoomStateUpdated(e.state);break;case X.b.BadgesUpdated:n.onBadgesUpdated(e)}},n.hostingHandler=function(e){n.setState({hostedChannelLogin:e}),n.props.onHostingChange&&n.props.onHostingChange(e)},n.createOutgoingTokenMatchers=function(e){n.outgoingTokenMatchers=e.map(function(e){return{token:e,regex:new RegExp(""+He+e+Ge)}})},n.parseOutgoingMessage=function(e){n.outgoingTokenMatchers.forEach(function(t){t.regex.test(e)&&n.onOutgoingTokenMatch(t.token,e)})},n.onOutgoingTokenMatch=function(e,t){switch(e){case We:var i=n.props.theme===v.a.Light?v.a.Dark:v.a.Light;n.props.onThemeChange(i);break;default:return}},n.onBadgesUpdated=function(e){n.setState({userBadges:e.badges})},n.onRoomStateUpdated=function(e){n.props.onRoomStateUpdate(e),n.setState({hasReceivedInitialRoomState:!0})},n.createOutgoingTokenMatchers([We]),n}return h.__extends(t,e),t.prototype.componentDidMount=function(){this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.onChatEvent)},t.prototype.componentWillUnmount=function(){this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.onChatEvent)},t.prototype.componentWillReceiveProps=function(e){e.channelLogin!==this.props.channelLogin&&this.setState({hostedChannelLogin:null}),this.state.hasReceivedInitialRoomState&&(this.props.followerModeDuration===e.followerModeDuration&&this.props.followerModeEnabled===e.followerModeEnabled||this.pushMessage(function(e,t){return{type:X.b.FollowerOnlyMode,id:Object(J.a)("follower-only"),enabled:e,length:t}}(e.followerModeEnabled,e.followerModeDuration)),this.props.slowModeEnabled===e.slowModeEnabled&&this.props.slowModeDuration===e.slowModeDuration||this.pushMessage(function(e,t){return{type:X.b.SlowMode,id:Object(J.a)("slowmode"),enabled:e,length:t}}(e.slowModeEnabled,e.slowModeDuration))),this.props.messageHandlerAPI!==e.messageHandlerAPI&&(this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.onChatEvent),e.messageHandlerAPI&&e.messageHandlerAPI.addMessageHandler(this.onChatEvent))},t.prototype.render=function(){var e,t=this.props.emoteSetsData&&this.props.emoteSetsData.emoteSets||[],n=this.props.isHidden||!this.props.rightColumnExpanded&&!this.props.inlineRightColumnExpanded,i=!(!this.props.isEmbedded&&!this.props.isPopout&&n&&!this.props.shouldConnectChat);return this.props.firstPageLoaded&&(e=g.createElement(Ye,{channelLogin:this.props.channelLogin,sendMessage:this.sendMessage})),g.createElement(g.Fragment,null,g.createElement(Ve.b,{authToken:this.props.authToken,bitsConfig:this.props.bitsConfig,channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,chatRoomHeader:e,chatRules:this.props.chatRules,closeRoomPicker:this.props.closeRoomPicker,currentUserDisplayName:this.props.userDisplayName,currentUserLogin:this.props.userLogin,emotes:t,emoteMap:this.props.emoteSetsData&&this.props.emoteSetsData.emoteMap||{},firstPageLoaded:this.props.firstPageLoaded,hostedChannelLogin:this.state.hostedChannelLogin,isBackground:this.props.isBackground,isChatRulesOpen:this.props.isChatRulesOpen,isCurrentUserModerator:this.props.isCurrentUserModerator,isEmbedded:this.props.isEmbedded,isHidden:this.props.isHidden,isHostMode:!!this.state.hostedChannelLogin,isOwnChannel:this.isOwnChannel,isPopout:this.props.isPopout,isStaff:this.props.isStaff,onChatUnhide:this.props.onChatUnhide,onCloseChatRules:this.props.onCloseChatRules,onPushMessage:this.pushMessage,onSendMessage:this.sendMessage,onShowChatRules:this.props.onShowChatRules,theme:this.props.theme,userBadges:this.state.userBadges,userID:this.props.userID},this.props.firstPageLoaded&&this.props.authToken&&!this.props.isEmbedded&&g.createElement(Xe,{authToken:this.props.authToken,channelDisplayName:this.props.channelDisplayName,channelLogin:this.props.channelLogin,bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,"data-test-selector":"share-to-chat"}),this.props.hostedChannelDisplayName&&!this.props.isPopout&&g.createElement(K,{hostedChannelDisplayName:this.props.hostedChannelDisplayName||"",hostedChannelLogin:this.state.hostedChannelLogin||""}),this.props.firstPageLoaded&&!this.props.isEmbedded&&this.props.channelID&&g.createElement(Ke,{channelID:this.props.channelID,"data-test-selector":"raid-notification"}),this.props.firstPageLoaded&&!this.props.isEmbedded&&this.props.channelID&&g.createElement(ze,{channelID:this.props.channelID,channelLogin:this.props.channelLogin}),this.props.firstPageLoaded&&!this.props.isEmbedded&&!this.props.isPopout&&g.createElement(Qe,{channelLogin:this.props.channelLogin}),this.props.firstPageLoaded&&!this.props.isEmbedded&&!this.props.isPopout&&this.props.channelID&&g.createElement($e,{channelID:this.props.channelID,channelLogin:this.props.channelLogin}),this.props.firstPageLoaded&&!this.props.isEmbedded&&!this.props.isPopout&&this.props.channelID&&Object(S.a)()&&g.createElement(z,{channelLogin:this.props.channelLogin,onSendMessage:this.sendMessage,channelID:this.props.channelID})),this.renderCommandHandlers(),g.createElement(te,{channelDisplayName:this.props.channelDisplayName,channelLogin:this.props.channelLogin}),g.createElement(we,{channelLogin:this.props.channelLogin}),g.createElement(pe,{bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,channelLogin:this.props.channelLogin,emoteSets:this.props.emoteSetsData&&this.props.emoteSetsData.emoteSets||[],isCurrentUserModerator:this.props.isCurrentUserModerator,isHostMode:!!this.state.hostedChannelLogin,shouldConnect:i}),g.createElement(Fe,{channelLogin:this.props.channelLogin,shouldSeeBlockedAndDeletedMessages:this.props.shouldSeeBlockedAndDeletedMessages,isBackground:!!this.props.isBackground,isCurrentUserModerator:this.props.isCurrentUserModerator,unhideIgnoredUsers:this.props.unhideIgnoredUsers}),g.createElement(je,null),g.createElement(Pe,{channelID:this.props.channelID}))},t.prototype.renderCommandHandlers=function(){if(this.props.passThroughCommands||this.props.isBackground)return null;var e=this.props.emoteSetsData&&this.props.emoteSetsData.emoteMap||{},t=this.props,n=t.channelID,i=t.isPopout,r=t.userLogin;return g.createElement(g.Fragment,null,g.createElement(G.a,{channelLogin:this.props.channelLogin,isEmbedded:this.props.isEmbedded,isPopout:i,userLogin:r,userID:this.props.userID,emoteMap:e}),g.createElement(x.a,{channelLogin:this.props.channelLogin,userLogin:r,userID:this.props.userID,isEmbedded:this.props.isEmbedded,isPopout:i}),g.createElement(E.a,{channelLogin:this.props.channelLogin,channelID:this.props.channelID,suppressLocalSuccessMessage:!0}),g.createElement(N.a,{channelLogin:this.props.channelLogin,isPopout:i}),g.createElement(_.a,{channelLogin:this.props.channelLogin}),g.createElement(w.a,{channelID:n,channelLogin:this.props.channelLogin}),g.createElement(H,{channelID:n,channelLogin:this.props.channelLogin}),g.createElement(D.a,{currentUserLogin:r,channelLogin:this.props.channelLogin}),this.props.chatRules&&!!this.props.chatRules.length&&g.createElement(R,{channelLogin:this.props.channelLogin}))},Object.defineProperty(t.prototype,"isOwnChannel",{get:function(){return this.props.userID===this.props.channelID},enumerable:!0,configurable:!0}),t}(g.Component);var Ze=Object(Y.b)(function(e){return{followerModeDuration:e.followerDuration,followerModeEnabled:e.followerMode,slowModeDuration:e.slowModeDuration,slowModeEnabled:e.slowMode,onRoomStateUpdate:function(t){return e.updateRoomState(t)}}})(Je),et=Object(f.compose)(Object(r.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded,isChatRulesOpen:e.chat.isChatRulesOpen,isHidden:e.chat.isHidden,isLoggedIn:Object(o.f)(e),rightColumnExpanded:e.ui.rightColumnExpanded,inlineRightColumnExpanded:e.ui.inlineRightColumnExpanded,theme:Object(y.a)(e),unhideIgnoredUsers:e.chat.unhideIgnoredUsers}},function(e){return Object(f.bindActionCreators)({onCloseChatRules:function(){return I.C()},onShowChatRules:function(){return I.U()},onChatUnhide:function(){return I.T()},onThemeChange:function(e){return Object(C.b)(e,C.a.TypedCommand)}},e)}),Object(m.withLatencyTracking)("ChatRoom",{autoReportInteractive:!0}),Object(k.a)(),l.a,u.a)(function(e){return g.createElement(Y.a,null,g.createElement($.a,null,g.createElement(Q.a,null,g.createElement(Ze,h.__assign({},e)))))}),tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.componentDidUpdate=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=this.props.channelData.channel,t=this.props.userData&&this.props.userData.user,n=!1,i=!1,r=!1;if(t&&e&&e.self){var a=t.login===e.login,o=t.roles&&t.roles.isGlobalMod||!1,s=t.roles&&t.roles.isSiteAdmin||!1;i=t.roles&&t.roles.isStaff||!1,r=e.self.isModerator||a||o,n=e.self.isModerator||a||o||s}var l=void 0;return e&&e.chatSettings&&e.chatSettings.rules&&e.chatSettings.rules.filter(function(e){return e.trim().length}).length&&(l=e.chatSettings.rules),g.createElement(et,{key:this.props.channelLogin,authToken:this.props.sessionUser&&this.props.sessionUser.authToken,bitsConfig:this.props.bitsConfig,channelDisplayName:e&&e.displayName,channelID:e&&e.id,channelLogin:this.props.channelLogin,chatRules:l,clientID:this.props.clientID,isBackground:this.props.isBackground,isCurrentUserModerator:n,isEmbedded:!!this.props.isEmbedded,isPopout:!!this.props.isPopout,hostedChannelDisplayName:this.props.hostedChannelDisplayName,closeRoomPicker:this.props.closeRoomPicker,onHostingChange:this.props.onHostingChange,userDisplayName:this.props.sessionUser&&this.props.sessionUser.displayName,userID:this.props.sessionUser&&this.props.sessionUser.id.toString(),userLogin:this.props.sessionUser&&this.props.sessionUser.login,isStaff:i,shouldSeeBlockedAndDeletedMessages:r,passThroughCommands:this.props.passThroughCommands,shouldConnectChat:this.props.shouldConnectChat})},t}(g.Component),nt=n("9P+5");var it=Object(i.compose)(Object(r.connect)(function(e){return{sessionUser:Object(o.e)(e)}}),Object(a.a)(p,{name:"channelData",options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(a.a)(nt,{name:"userData",skip:function(e){return!e.sessionUser}}),Object(m.withLatencyTracking)("Chat"))(tt),rt=Object(i.compose)(s.b,l.b,d.b,u.b,c.b)(it);n.d(t,!1,function(){return tt}),n.d(t,"b",function(){return it}),n.d(t,"a",function(){return rt})},L4bB:function(e,t,n){"use strict";var i,r=n("mrSG"),a=n("q1tI"),o=n("/7QA"),s=n("sLlB"),l=n("9C/b"),c=n("vSJR"),d=n("eJ65"),u=n("+GjP"),m=n("vRsq"),p=n("Ue10");!function(e){e[e.FilterText=0]="FilterText"}(i||(i={}));var h=m.b.Week,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.filterOptions=[{label:Object(o.d)("Trending","TopClipsTimeFilter"),filter:m.b.Trending},{label:Object(o.d)("24h","TopClipsTimeFilter"),filter:m.b.Day},{label:Object(o.d)("7d","TopClipsTimeFilter"),filter:m.b.Week},{label:Object(o.d)("30d","TopClipsTimeFilter"),filter:m.b.Month},{label:Object(o.d)("all","TopClipsTimeFilter"),filter:m.b.All}],t.renderFilterText=function(e){return e.filter===m.b.Trending?a.createElement("span",{"data-test-selector":i.FilterText},e.label):a.createElement(p.fb,{display:p.Da.Flex},Object(o.d)("Top","TopClipsTimeFilter"),a.createElement(p.fb,{margin:{left:.5}},a.createElement(p.qb,{"data-test-selector":i.FilterText,type:p.rb.Brand,label:e.label})))},t.renderBalloonOption=function(e){var n,i=((n={})[m.a]=e.filter,n),r=Object(u.d)(t.props.location,i),o=e.selected?a.createElement(p.fb,{attachRight:!0,position:p.tb.Absolute,margin:{right:1}},a.createElement(p.Cb,{asset:p.Db.Check,height:18,width:18})):null;return a.createElement(p.cb,{"data-a-target":"time-filter-option-"+e.filter,key:e.filter,linkTo:r,selected:!t.props.showTagExperimentStyles&&e.selected},a.createElement(p.fb,{display:p.Da.Flex,padding:{x:1,y:.5}},t.renderFilterText(e),t.props.showTagExperimentStyles&&o))},t}return r.__extends(t,e),t.prototype.componentWillMount=function(){this.ensureFilterPresent()},t.prototype.componentWillUpdate=function(){this.ensureFilterPresent()},t.prototype.render=function(){var e=this.filterOptions,t=Object(m.u)(this.props.location.search);t||(t=h),e.forEach(function(e){e.selected=e.filter===t});var n=e.find(function(e){return!!e.selected})||e[0];return this.props.showTagExperimentStyles?a.createElement(c.a,{buttonLabel:this.renderFilterText(n),hideDropdownOnInsideClick:!0},e.map(this.renderBalloonOption)):a.createElement(p.fb,{className:"top-clips-time-filter"},a.createElement(d.a,{hideBalloonOnInsideClick:!0},a.createElement(p.C,{dropdown:!0,type:p.I.Hollow,"data-a-target":"time-filter-selection"},this.renderFilterText(n)),a.createElement(p.x,{direction:p.y.BottomLeft,noTail:!0},e.map(this.renderBalloonOption))))},t.prototype.ensureFilterPresent=function(){var e;if(!Object(m.u)(this.props.location.search)){var t=((e={})[m.a]=h,e),n=Object(u.d)(this.props.location,t);this.props.history.replace(n)}},t}(a.Component),f=Object(l.a)(g);n.d(t,"a",function(){return b});var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return a.createElement(p.fb,{alignItems:p.i.End,display:p.Da.Flex,flexDirection:p.Ga.Row,fullWidth:!0,justifyContent:p.eb.Between},a.createElement(p.fb,{alignItems:p.i.End,display:p.Da.Flex,flexDirection:p.Ga.Row},this.renderLanguageFilter(),a.createElement(f,{showTagExperimentStyles:this.props.showTagExperimentStyles})),a.createElement(p.fb,{padding:{y:this.props.showTagExperimentStyles?.5:0}},a.createElement(p.C,{"data-a-target":"manage-clips-button",linkTo:"/manager/clips",size:this.props.showTagExperimentStyles?p.G.Large:p.G.Default,targetBlank:!0,type:p.I.Hollow},Object(o.d)("Manage my clips","TopClips"))))},t.prototype.renderLanguageFilter=function(){return this.props.hideLanguageFilter?null:a.createElement(p.fb,{margin:{right:this.props.showTagExperimentStyles?0:1}},a.createElement(s.a,null))},t}(a.Component)},L5dg:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("q1tI"),r=n("0Rl0"),a=function(e){for(var t=[],n=void 0===e.placeholderCount?20:e.placeholderCount,a=0;a<n;a++)t.push(i.createElement(r.a,{key:a}));return i.createElement(i.Fragment,null,t)}},L6L7:function(e,t,n){},L7EG:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoShareBox_TrackingVideoContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:156}};n.loc.source={body:"query VideoShareBox_TrackingVideoContext($videoID: ID!) {\nvideo(id: $videoID) {\nid\nbroadcastType\nowner {\nid\nlogin\nroles {\nisPartner\n}\n}\ngame {\nid\nname\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Lmqf:function(e,t,n){e.exports=n.p+"assets/upsell-center-dark-6c092df86238db84cff1.png"},MAph:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelContext_HostedChannel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hostedChannelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"hostedChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"hostedChannel"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"hostedChannel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]}]}}],loc:{start:0,end:205}};n.loc.source={body:"query ChannelContext_HostedChannel($hostedChannelLogin: String!) {\nuser(login: $hostedChannelLogin) {\n...hostedChannel\n}\n}\nfragment hostedChannel on User {\nid\nlogin\ndisplayName\nprofileImageURL(width: 70)\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},MBj5:function(e,t,n){},MIhh:function(e,t,n){},MJbm:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=(n("efEE"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.logger=a.q.logger.withCategory("resize-detector"),t.onScroll=function(){var e=t.container,n=e.offsetWidth,i=e.offsetHeight,r=e.offsetLeft,a=e.offsetTop;t.logger.debug("Resize Detector -- onScroll"),n===t.width&&i===t.height&&a===t.top&&r===t.left||(t.width=n,t.height=i,t.props.onResize(n,i,a,r)),t.reset()},t.setGrowDivRef=function(e){return t.growDiv=e},t.setGrowChildDivRef=function(e){return t.growChildDiv=e},t.setShrinkDivRef=function(e){return t.shrinkDiv=e},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{className:"resize-detector"},r.createElement("div",{className:"resize-detector",ref:this.setGrowDivRef},r.createElement("div",{className:"resize-detector__grow",ref:this.setGrowChildDivRef})),r.createElement("div",{className:"resize-detector",ref:this.setShrinkDivRef},r.createElement("div",{className:"resize-detector__shrink"})))},t.prototype.componentDidMount=function(){if(this.growDiv){this.growDiv.parentElement||this.logger.warn("growDiv.parentElement is undefined!"),this.container=this.growDiv.parentElement.parentElement;var e=this.container.style.position;if("relative"!==e&&"absolute"!==e&&"fixed"!==e){var t=window.getComputedStyle(this.container);t&&"static"===t.getPropertyValue("position")&&(this.container.style.position="relative")}this.onScroll(),this.growDiv.addEventListener("scroll",this.onScroll),this.shrinkDiv.addEventListener("scroll",this.onScroll)}else this.logger.warn("growDiv is undefined!")},t.prototype.componentWillUnmount=function(){this.growDiv.removeEventListener("scroll",this.onScroll),this.shrinkDiv.removeEventListener("scroll",this.onScroll)},t.prototype.reset=function(){var e=this.growDiv,t=this.shrinkDiv,n=this.growChildDiv.style;n.width="100000px",n.height="100000px",e.scrollLeft=1e5,e.scrollTop=1e5,t.scrollLeft=1e5,t.scrollTop=1e5},t}(r.Component));n.d(t,"a",function(){return o})},MLDe:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return p});var i,r,a=n("/7QA"),o=n("wbMx"),s=n("2xye"),l=n("BQs+"),c=((i={})[o.b.Twitter]="twitter",i[o.b.Reddit]="reddit",i[o.b.VKontakte]="vkontakte",i[o.b.Facebook]="facebook",i[o.b.Copy]="link",i[o.b.CopyInput]="option_link",i[o.b.Download]="download",i),d={MyClips:"MyClips",ClipsOfMyChannel:"ClipsOfMyChannel"},u=((r={MyClips:s.PageviewLocation.MyClipsManager,ClipsOfMyChannel:s.PageviewLocation.ChannelClipsManager,TopClipsGame:s.PageviewLocation.ClipsGame,TopClipsChannel:s.PageviewLocation.ChannelClips})[s.PageviewLocation.ClipsEditing]=s.PageviewLocation.ClipsEditing,r[s.PageviewLocation.ClipsViewing]=s.PageviewLocation.ClipsViewing,r[s.PageviewLocation.ClipsWatchPage]=s.PageviewLocation.ClipsWatchPage,r),m=function(e,t,n,i,r){return function(o){a.q.tracking.track(s.SpadeEventType.VideoShare,{vod_id:e,vod_type:s.SpadeVideoBroadcastType.Clip,share_platform:c[o],location:u[r],game:t,channel_id:Number(n||0),channel:i,live:null})}},p=function(e,t,n,i,r,o){return function(){a.q.tracking.track(s.SpadeEventType.VideoShare,{vod_id:e,vod_type:s.SpadeVideoBroadcastType.Clip,share_platform:l.a.Link,location:u[r],game:t,channel_id:Number(n||0),channel:i,live:null,shared_item_url:o})}}},MPK0:function(e,t,n){},MVDO:function(e,t,n){},Madu:function(e,t,n){},McYG:function(e,t,n){"use strict";function i(e,t){return"https://www.twitch.tv/"+t+"/clip/"+e}n.d(t,"a",function(){return i})},MfJU:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"modLogsMessage"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModLogsMessage"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fragments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"emoteID"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelLogin"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:323}};n.loc.source={body:"# fragment for mod logs message\nfragment modLogsMessage on ModLogsMessage {\nid\nsentAt\ncontent {\ntext\nfragments {\ntext\ncontent {\n... on Emote {\nemoteID: id\nsetID\ntoken\n}\n__typename\n}\n}\n__typename\n}\nsender {\nid\nlogin\nchatColor\ndisplayName\ndisplayBadges(channelLogin: $channelLogin) {\nsetID\nversion\n}\n__typename\n}\n__typename\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Mj6i:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),r=n("yR8l"),a=n("0FG4"),o=n("S4w9");function s(){return Object(r.a)(o,{options:function(e){return{variables:{withOwner:!0}}},props:function(e){if(e.data){var t=e.data.currentUser&&e.data.currentUser.emoteSets||[],n=t&&Object(a.b)(t);return{emoteSetsData:i.__assign({},e.data,{currentUser:e.data.currentUser||null,emoteMap:n,emoteSets:t})}}return{}},skip:function(e){return!e.isLoggedIn}})}},NJiF:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelCurrentUser"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}],loc:{start:0,end:54}};n.loc.source={body:"fragment channelCurrentUser on User {\nid\ndisplayName\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},NNSq:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),r=n("/7QA"),a=n("sAMt");function o(e){return i.__awaiter(this,void 0,Promise,function(){var t,n;return i.__generator(this,function(i){switch(i.label){case 0:t=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.q.apollo.client.query({query:a,variables:{login:e}})];case 2:return t=i.sent(),[3,4];case 3:return n=i.sent(),r.k.warn(n,"Failed to fetch user targeted by chat command.",{userLogin:e}),[3,4];case 4:return t&&t.data.user.id?[2,t.data.user.id]:[2,null]}})})}},NWfm:function(e,t,n){},Nimz:function(e,t,n){},O3Y9:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var i,r=n("/7QA"),a=n("2xye");function o(e){r.q.tracking.track(a.SpadeEventType.WhisperIgnoreUser,{ui_context:e.context,from_login:e.currentUserLogin,ignored_login:e.targetUserLogin})}!function(e){e.ViewerCard="chat_card",e.ReportWizard="report_wizard"}(i||(i={}))},OCTF:function(e,t,n){},OTul:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"j",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"f",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"g",function(){return p}),n.d(t,"i",function(){return h}),n.d(t,"e",function(){return g}),n.d(t,"d",function(){return f}),n.d(t,"h",function(){return b});var i=n("+GjP"),r=n("rwoo"),a=n("QK1T"),o="https://static-cdn.jtvnw.net/emoticons/v1/",s="manager";function l(e){return void 0===e&&(e=""),"https://www.twitch.tv/"+e}function c(e){return void 0===e&&(e=""),"https://clips.twitch.tv/"+e}function d(e,t){return void 0===e&&(e=null),void 0===t&&(t={}),Object(i.e)(u(e)+"/clips",t)}function u(e,t){return void 0===e&&(e=null),void 0===t&&(t={}),e?Object(i.e)(l(e+"/"+s),t):Object(i.e)(l(s),t)}function m(e,t){return void 0===t&&(t={}),Object(i.e)(l(""+e),t)}function p(e,t,n){return void 0===n&&(n={}),Object(i.e)(u(e)+"/highlighter/"+t,n)}function h(e,t){return void 0===t&&(t={}),Object(i.e)(l("videos/"+e),t)}function g(e,t){return void 0===t&&(t={}),Object(i.e)(function(e){return l("directory/game/"+e)}(e)+"/clips",t)}function f(e,t){void 0===t&&(t={});var n=Object(i.e)(m(e)+"/clips",t);return Object(a.a)(window.navigator.userAgent)?function(e,t){return"intent://stream/"+e+"#Intent;scheme=twitch;package=tv.twitch.android.app;S.browser_fallback_url="+t+";end"}(e,n):n}function b(e){return void 0===e&&(e=r.a.Default),"/clips/"+e}},OXQr:function(e,t,n){},OhOW:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),r=n("/7QA"),a=n("+U0Y"),o=n("5xw2");function s(e){return e.userPreferences.languagePreferences}r.q.store.registerReducer("userPreferences",function(e,t){switch(void 0===e&&(e={languagePreferences:Object(o.b)()}),t.type){case a.a:return i.__assign({},e,{languagePreferences:t.languagePreferences});default:return e}})},OpME:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return m}),n.d(t,"e",function(){return p}),n.d(t,"d",function(){return h});var i=n("mrSG"),r=n("lZdE"),a=n("cpJf"),o={"B-?\\)":"B)","\\:-?[z|Z|\\|]":":|","\\:-?\\)":":)","\\:-?\\(":":(","\\:-?(p|P)":":P","\\;-?(p|P)":";P","\\:-?[\\\\/]":":/","\\;-?\\)":";)","R-?\\)":"R)",":>":":>","\\:\\&gt\\;":":>","[oO](_|\\.)[oO]":"O_o","\\:-?D":":D","\\:-?(o|O)":":O",">\\\\(":">(",":-?(?:7|L)":":7","\\:-?(S|s)":":S","#-?[\\\\/]":"#/","<\\]":"<]","<3":"<3","\\&lt\\;3":"<3","\\&lt\\;\\]":"<]","\\&gt\\;\\(":">("},s=["1.0","2.0","3.0"],l=new Set([457,33,42,0]);function c(e){for(var t=[],n=function(e){if(!e||!e.id||!e.token)return"continue";var n=o[e.token]||e.token,r=s.reduce(function(t,n){var i=t;return i&&(i=i.concat(", ")),i.concat("https://static-cdn.jtvnw.net/emoticons/v1/"+e.id+"/"+n+" "+n+"x")},"");t.push(i.__assign({displayName:n,srcSet:r},e))},r=0,a=e;r<a.length;r++){n(a[r])}return t}function d(e){return e.filter(function(e){return!!e&&!!e.id&&!!e.token}).sort(function(e,t){return parseInt(e.id,10)-parseInt(t.id,10)})}function u(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];if(r&&r.id&&r.emotes){for(var a={id:r.id,emotes:[]},o=0,s=r.emotes;o<s.length;o++){var l=s[o];l&&l.id&&l.token&&a.emotes.push(l)}t.push(a)}}return t}function m(e){for(var t=[],n=[],i=0,r=e;i<r.length;i++){var a=r[i];if(a&&a.id&&a.emotes){var o={id:a.id,emotes:c(d(a.emotes))};a.owner&&(o.owner=a.owner),l.has(parseInt(a.id,10))?t.push(o):n.push(o)}}return n.concat(t)}var p=function(e,t,n){var i=n||a.c,o=[],s=[],l=[],c=new RegExp("^"+Object(r.a)(t),"i");return e.forEach(function(e){i[e.token]?l.push(e):e.token.match(c)?o.push(e):s.push(e)}),o.sort(function(e,t){return e.token<t.token?-1:e.token>t.token?1:0}),s.sort(function(e,t){return e.token<t.token?-1:e.token>t.token?1:0}),l.sort(function(e,t){return i[t.token].count-i[e.token].count}),l.concat(o).concat(s)},h=function(e){var t={};return e.filter(function(e){return!t.hasOwnProperty(e.token)&&(t[e.token]=!0)})}},OvAg:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IncomingRaidLine_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}}]}}],loc:{start:0,end:140}};n.loc.source={body:"query IncomingRaidLine_Channel($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\ndisplayName\nprofileImageURL(width: 50)\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},OxSk:function(e,t,n){},Oy4H:function(e,t,n){},P5MF:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Core_Services_Spade_EmoteCard_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasPrime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:176}};n.loc.source={body:"query Core_Services_Spade_EmoteCard_User($channelID: ID!) {\nuser(id: $channelID) {\nid\nhasPrime\nself {\ncanPrimeSubscribe\nsubscriptionBenefit {\nid\ntier\npurchasedWithPrime\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},P6kH:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return c});var i,r=n("/7QA"),a=n("DMoW"),o="owl2019_emote_ids",s="OverwatchLeague",l="137512364";function c(e){return e.emote.subscriptionProduct?"12658"===e.emote.subscriptionProduct.id?i.Prime:"324"===e.emote.subscriptionProduct.id?i.Turbo:function(e){return r.b.get(o,[]).includes(e)}(e.emote.id)?i.OWL2019:e.emote.subscriptionProduct.owner&&e.emote.subscriptionProduct.owner.id?"139075904"===e.emote.subscriptionProduct.owner.id||e.emote.subscriptionProduct.state===a.Za.INACTIVE?i.LimitedTime:i.Subscription:i.Unavailable:i.Global}!function(e){e[e.Unknown=0]="Unknown",e[e.Prime=1]="Prime",e[e.Turbo=2]="Turbo",e[e.OWL2019=3]="OWL2019",e[e.LimitedTime=4]="LimitedTime",e[e.Unavailable=5]="Unavailable",e[e.Subscription=6]="Subscription",e[e.Global=7]="Global"}(i||(i={}))},PrJw:function(e,t,n){"use strict";var i=n("vGFN");n.d(t,"a",function(){return i.b}),n.d(t,"b",function(){return i.c}),n.d(t,"c",function(){return i.d}),n.d(t,"d",function(){return i.e}),n.d(t,"e",function(){return i.f}),n.d(t,"f",function(){return i.g}),n.d(t,"g",function(){return i.h}),n.d(t,"h",function(){return i.i}),n.d(t,"i",function(){return i.j}),n.d(t,"j",function(){return i.k}),n.d(t,"k",function(){return i.m}),n.d(t,"l",function(){return i.p}),n.d(t,"m",function(){return i.q})},PtXu:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("oJmH"),o=n("/7QA"),s=n("gcd7"),l=n("AKV8"),c=n("yzwe"),d=n("3HtZ"),u=n("QVaV"),m=n("vSeP"),p=n("Ff8q"),h=n("Ue10"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modUser=function(e){var n=e.trim().split(/\s+/),i=t.userLogin(n[0]);return 1===n.length&&i&&0!==i.length?{deferred:t.props.modUserMutation(i).then(function(e){if(e.modUser.error)switch(e.modUser.error.code){case l.a.Forbidden:return{notice:b()};case l.a.UserAlreadyModded:return{notice:Object(o.d)("{login} is already a moderator of this channel.",{login:i},"ModCommandHandler")};case l.a.UserBanned:return{notice:Object(o.d)("{login} is banned in this channel. You must unban this user before granting mod status.",{login:i},"ModCommandHandler")};case l.a.UserNotFound:return{notice:f(i)};default:return{notice:v()}}return{notice:Object(o.d)("You have added {login} as a moderator of this channel.",{login:i},"ModCommandHandler")}}).catch(function(){return{notice:v()}})}:{deferred:Promise.resolve({notice:Object(o.d)('Usage: "/mod [login]" - Grant mod status to a user. Use "mods" to list the moderators of this channel.',"ModCommandHandler")})}},t.mods=function(e){return{deferred:o.q.apollo.client.query({query:d,fetchPolicy:"network-only",variables:{login:t.props.channelLogin}}).then(function(e){if(!e.data.user||!e.data.user.mods)return{notice:k()};var t=e.data.user.mods.edges.filter(function(e){return e.node.login});if(0===t.length)return{notice:Object(o.d)("There are no moderators of this channel.","ModCommandHandler")};var n=t.map(function(e){return e.node.login}).join(", ");return{notice:Object(o.d)("The moderators of this channel are: {mods}.",{mods:n},"ModCommandHandler")}}).catch(function(){return{notice:k()}})}},t.unmodUser=function(e){var n=e.trim().split(/\s+/),i=t.userLogin(n[0]);return 1===n.length&&i&&0!==i.length?{deferred:t.props.unmodUserMutation(i).then(function(e){if(e.unmodUser.error)switch(e.unmodUser.error.code){case c.a.Forbidden:return{notice:b()};case c.a.UserNotFound:return{notice:f(i)};case c.a.UserNotMod:return{notice:Object(o.d)("{login} is currently not a moderator of this channel.",{login:i},"ModCommandHandler")};default:return{notice:C()}}return{notice:Object(o.d)("You have removed {login} as a moderator of this channel.",{login:i},"ModCommandHandler")}}).catch(function(){return{notice:C()}})}:{deferred:Promise.resolve({notice:Object(o.d)('Usage: "/unmod [login]" - Revoke mod status from a user. Use "mods" to list the moderators of this channel.',"ModCommandHandler")})}},t.userLogin=function(e){return e=Object(p.b)(e),Object(u.b)(e)?e:t.props.activeChattersAPI?t.props.activeChattersAPI.getActiveChatterLoginFromDisplayName(e)||e:t.props.displayNameToLogin&&t.props.displayNameToLogin(e)||e},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement(h.fb,{display:h.Da.Hide},r.createElement(s.a,{command:"mod",handler:this.modUser,channelLogin:this.props.channelLogin}),r.createElement(s.a,{command:"mods",handler:this.mods,channelLogin:this.props.channelLogin}),r.createElement(s.a,{command:"unmod",handler:this.unmodUser,channelLogin:this.props.channelLogin}))},t}(r.Component);function f(e){return Object(o.d)("Invalid username: {login}",{login:e},"ModCommandHandler")}function b(){return Object(o.d)("You don't have permission to perform that action.","ModCommandHandler")}function v(){return Object(o.d)("Unable to add moderator.","ModCommandHandler")}function k(){return Object(o.d)("There was a problem fetching the list of mods.","ModCommandHandler")}function C(){return Object(o.d)("Unable to remove moderator.","ModCommandHandler")}var y=function(e){return{channelID:e.channelID}},S=Object(a.compose)(m.a,Object(c.b)(y),Object(l.b)(y))(g);n.d(t,"a",function(){return S})},"Pub/":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("HzXE");function r(e,t,n){try{return e.readQuery({query:i,variables:{channelID:t,targetUserID:n}})}catch(e){}}},QdeI:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("q1tI"),r=n("L5dg"),a=n("Ue10"),o=function(){return i.createElement(i.Fragment,null,i.createElement(a.mc,{gutterSize:a.oc.Small,childWidth:a.nc.Large,placeholderItems:20},i.createElement(r.a,null)))}},Qdho:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RoomSelector"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"channelRooms"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topic"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPreviewable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"minimumAllowedRole"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isArchived"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isMuted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isUnread"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unreadMentionCount"},arguments:[],directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"cheer"},directives:[]},{kind:"Field",name:{kind:"Name",value:"hosting"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isChannelMember"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:395}};i.loc.source={body:'#import "twilight/features/chat/models/cheer-fragment.gql"\nquery RoomSelector ($login: String!) {\nchannel: user(login: $login) {\nid\ndisplayName\nchannelRooms {\nname\nid\ntopic\nisPreviewable\nminimumAllowedRole\nself {\nisArchived\nisMuted\nisUnread\nunreadMentionCount\n}\n}\n...cheer\nhosting {\nid\n}\nself {\nbanStatus {\nisPermanent\n}\nisChannelMember\nisModerator\nsubscriptionBenefit {\nid\n}\n}\nstream {\nid\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("F9eG").definitions)),e.exports=i},QfRJ:function(e,t,n){},"Qii+":function(e,t,n){"use strict";var i,r=n("/MKj"),a=n("kRBY"),o=n("mrSG"),s=n("q1tI"),l=n("fvjX"),c=n("x7UT"),d=n("0Log"),u=n("/aPz"),m=n("f00E"),p=n("T1g+"),h=n("Tvwe"),g=n("/7QA"),f=n("0nav"),b=n("Ue10"),v=function(e){return s.createElement(b.Ob,{background:b.u.AccentAlt2,color:b.R.Overlay,className:"mega-cheer-reward-notification"},s.createElement(b.fb,{display:b.Da.Flex,justifyContent:b.eb.Between,flexWrap:b.Ha.NoWrap},s.createElement(b.fb,{padding:{left:1,top:.5,bottom:.5}},e.children),s.createElement(b.fb,{display:b.Da.Flex,alignItems:b.i.Center},s.createElement(b.fb,{margin:{right:.5}},s.createElement(b.C,{onClick:e.secondaryAction},s.createElement(b.Ca,{fontSize:b.Ia.Size7},e.secondaryActionText))),s.createElement(b.D,{onClick:e.onClose,ariaLabel:Object(g.d)("Close","MegaCheerRewardNotificationCard"),size:b.E.Default,overlay:!0,icon:b.Db.Close}))),s.createElement(b.wb,{animationDirection:b.xb.Down,size:b.yb.Small,animationDuration:10,onAnimationEnd:e.onProgressBarEnd}))};!function(e){e.Emotes="emotes"}(i||(i={}));var k,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCardClose=function(){t.props.closeCard&&(t.props.closeCard(),Object(f.e)({notification_type:f.b.CheerAgain,action:f.a.Dismiss,user_id:t.props.userID,initiator_user_id:t.props.rewardEvent.data.benefactor,channel:t.props.channelID,channel_id:t.props.channelID}))},t.onCheerClick=function(){t.props.cheerClick(),Object(f.e)({notification_type:f.b.CheerAgain,action:f.a.Click,user_id:t.props.userID,initiator_user_id:t.props.rewardEvent.data.benefactor,channel:t.props.channelID,channel_id:t.props.channelID})},t}return o.__extends(t,e),t.prototype.render=function(){var e,t=this.props.rewardEvent.data.contents,n=1===t.length,r=Object(g.d)("Your MegaCheer unlocked emotes!","MegaGifterNotificationCard");n&&(r=Object(g.d)("Your MegaCheer unlocked an emote!","MegaGifterNotificationCard")),Object(f.d)({notification_type:f.b.CheerAgain,user_id:this.props.userID,initiator_user_id:this.props.rewardEvent.data.benefactor,channel:this.props.channelID,channel_id:this.props.channelLogin});var a=t.map(function(e){var t=e.imageURL||"";return s.createElement(b.Xa,{key:"MegaGifterNotificationCard-"+e.id,padding:.5},s.createElement(b.Y,{src:t,srcSet:{"112w":t},sizes:[{size:"20px"}],alt:e.text,"data-test-selector":i.Emotes}))});return e=s.createElement(b.fb,null,s.createElement(b.Ca,null,r),s.createElement(b.Ob,{display:b.Da.Flex,overflow:b.mb.Hidden},a)),s.createElement(v,o.__assign({},this.props,{onClose:this.onCardClose,className:"mega-gifter-notification-card",secondaryActionText:Object(g.d)("Cheer Again","MegaGifterNotificationCard"),secondaryAction:this.onCheerClick}),e)},t}(s.Component),y=(n("GPTu"),n("8Ad5")),S=255,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={formInputValue:t.props.message,sharing:!1,isMessageTooLong:!1},t.hasUnmounted=!1,t.handleThankClick=function(){return o.__awaiter(t,void 0,void 0,function(){return o.__generator(this,function(e){return this.setState({sharing:!0}),this.props.onThank(this.state.formInputValue),Object(f.f)({body:this.state.formInputValue,user_id:this.props.userID,initiator_user_id:this.props.benefactor,channel:this.props.channelID,channel_id:this.props.channelLogin}),this.hasUnmounted||this.setState({sharing:!1}),[2]})})},t.onInputChange=function(e){var n=e.currentTarget.value.length>S;t.setState({formInputValue:e.currentTarget.value,isMessageTooLong:n})},t.onKeyDown=function(e){switch(e.charCode||e.keyCode){case y.a.Enter:return void t.handleThankClick();default:return}},t}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.hasUnmounted=!1},t.prototype.componentWillUnmount=function(){this.hasUnmounted=!0},t.prototype.render=function(){var e=this.state.isMessageTooLong?"-"+(this.state.formInputValue.length-S):Object(g.d)("Thank","ThankInput"),t=Object(g.d)("Close","ThankInput"),n=this.state.sharing?b.H.Loading:b.H.Default;return Object(f.d)({notification_type:f.b.Share,user_id:this.props.userID,initiator_user_id:this.props.benefactor,channel:this.props.channelID,channel_id:this.props.channelLogin}),s.createElement(b.fb,{className:"thank-input",padding:1,attachTop:!0,attachLeft:!0,attachRight:!0,position:b.tb.Absolute},s.createElement(b.Ob,{className:"thank-input__container",position:b.tb.Relative,border:!0,background:b.u.Base,padding:1},s.createElement(b.fb,{position:b.tb.Absolute,attachTop:!0,attachRight:!0},s.createElement(b.D,{ariaLabel:t,onClick:this.props.onClose,type:b.F.Secondary,icon:b.Db.Close})),s.createElement(b.fb,{textAlign:b.cc.Center,padding:{top:1,bottom:2}},this.props.children),s.createElement(b.fb,{display:b.Da.Flex,flexWrap:b.Ha.NoWrap},s.createElement(b.fb,{fullWidth:!0},s.createElement(b.Za,{autoFocus:!0,type:b.bb.Text,value:this.state.formInputValue,onChange:this.onInputChange,onKeyDown:this.onKeyDown})),s.createElement(b.C,{disabled:this.state.isMessageTooLong,onClick:this.handleThankClick,state:n},e))))},t}(s.Component);(k||(k={})).RegularEmote="regular-emote";var N,_,D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showMessageInput:!1},t.toggleContentShown=function(){t.setState(function(e){return{showMessageInput:!e.showMessageInput}}),Object(f.e)({notification_type:f.b.Thank,action:f.a.Click,user_id:t.props.userID,initiator_user_id:t.props.giftEvent.data.benefactor,channel:t.props.channelID,channel_id:t.props.channelID})},t.onCardClose=function(){t.props.closeCard&&(t.props.closeCard(),Object(f.e)({notification_type:f.b.Thank,action:f.a.Dismiss,user_id:t.props.userID,initiator_user_id:t.props.giftEvent.data.benefactor,channel:t.props.channelID,channel_id:t.props.channelID}))},t.shareThanks=function(e){t.props.onSendMessage(e)&&t.props.onMessageSent()},t}return o.__extends(t,e),t.prototype.render=function(){var e=this.props.giftEvent.data.contents[0],t=e.imageURL||"",n=Object(g.d)("Thanks for the {emote} @{user}",{emote:e.text,user:this.props.giftEvent.data.benefactor},"MegaRecipientNotificationCard");if(Object(f.d)({notification_type:f.b.Thank,user_id:this.props.userID,initiator_user_id:this.props.giftEvent.data.benefactor,channel:this.props.channelID,channel_id:this.props.channelLogin}),this.state.showMessageInput)return s.createElement(b.fb,null,s.createElement(E,{onThank:this.shareThanks,onClose:this.props.onMessageSent,message:n,benefactor:this.props.giftEvent.data.benefactor,channelID:this.props.channelID,channelLogin:this.props.channelLogin,userID:this.props.userID},s.createElement(b.Y,{className:"mega-recipient-notification-card__emote",src:t,srcSet:{"112w":t},sizes:[{size:"20px"}],alt:e.text,"data-test-selector":k.RegularEmote}),s.createElement(b.Ca,null,Object(g.d)("Add a message to thank {user} for your gift!",{user:s.createElement("strong",null,this.props.giftEvent.data.benefactor)},"MegaRecipientNotificationCard"))));var i=s.createElement(b.fb,{textAlign:b.cc.Left},s.createElement(b.Ca,{fontSize:b.Ia.Size7},Object(g.d)("You got an emote thanks to {benefactor}'s MegaCheer!",{benefactor:s.createElement(b.Ca,{type:b.gc.Span,bold:!0},this.props.giftEvent.data.benefactor)},"MegaRecipientNotificationCard")),s.createElement(b.Ob,{margin:{y:.5},display:b.Da.Flex,alignItems:b.i.Center},s.createElement(b.Y,{className:"mega-recipient-notification-card__emote",src:t,srcSet:{"112w":t},sizes:[{size:"20px"}],alt:e.text,"data-test-selector":k.RegularEmote}),s.createElement(b.Ca,{fontSize:b.Ia.Size7,className:"mega-recipient-notification-card__emote-text"},e.text)));return s.createElement(v,o.__assign({},this.props,{onClose:this.onCardClose,className:"mega-recipient-notification-card",secondaryActionText:Object(g.d)("Thank","MegaRecipientNotificationCard"),secondaryAction:this.toggleContentShown}),i)},t}(s.Component);(_||(_={})).Container="mega-cheer-reward-notification-container-selector";var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cards:[]},t.onCardClose=function(){t.popCard()},t.onCheerClick=function(){t.popCard(),Object(p.a)()},t}return o.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this,n=[],i=e.pubsub.messages.userNotificationEvent;if(i&&i!==this.props.pubsub.messages.userNotificationEvent){if(i.type===d.PubsubMessageType.UserCampaignMegaCheerRewardEvent){var r=i;r.data.channelID&&r.data.channelID===this.props.channelID&&n.push(s.createElement(C,{rewardEvent:r,cheerClick:this.onCheerClick,channelID:this.props.channelID,channelLogin:this.props.channelLogin,userID:this.props.user&&this.props.user.id||""}))}if(i.type===d.PubsubMessageType.UserGiftEvent){var a=i;a.data.channelID&&a.data.channelID===this.props.channelID&&n.push(s.createElement(D,{giftEvent:a,onSendMessage:this.props.onSendMessage,onMessageSent:this.onCardClose,channelID:this.props.channelID,channelLogin:this.props.channelLogin,userID:this.props.user&&this.props.user.id||""}))}n=n.map(function(e){return s.cloneElement(e,{key:Object(m.b)(),closeCard:t.onCardClose,onProgressBarEnd:t.onCardClose})}),this.setState(function(e){return{cards:e.cards.concat(n)}})}},t}(h.a),O=Object(l.compose)(Object(c.a)([{topic:function(e){return Object(u.F)(e.user&&e.user.id||"")},mapMessageTypesToProps:(N={},N[d.PubsubMessageType.UserGiftEvent]="userNotificationEvent",N[d.PubsubMessageType.UserCampaignMegaCheerRewardEvent]="userNotificationEvent",N),skip:function(e){return!e.user||!e.user.id}}]))(w);var I=Object(r.connect)(function(e){return{user:Object(a.e)(e)}})(O);n.d(t,"a",function(){return I})},Qime:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsPinnedCheerV2_Leaderboards"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"leaderboard"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"bitsLeaderboard"},directives:[]},{kind:"Field",name:{kind:"Name",value:"secondsRemaining"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"leaderboard"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timePeriodType"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsLeaderboardItem"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rank"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"entryKey"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:345}};i.loc.source={body:'#import "twilight/features/bits/models/bits-leaderboard-fragment.gql"\nquery BitsPinnedCheerV2_Leaderboards($channelID: ID!) {\nuser(id: $channelID) {\nid\ncheer {\nid\nleaderboard (first: 10) {\nid\n...bitsLeaderboard\nsecondsRemaining\n}\nsettings {\nleaderboard {\nisEnabled\ntimePeriodType\n}\n}\n}\nself {\nbitsLeaderboardItem {\nid\nrank\nscore\nentryKey\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("jrTF").definitions)),e.exports=i},QjI3:function(e,t,n){"use strict";n.r(t);var i=n("mrSG"),r=n("q1tI"),a=n("/MKj"),o=n("fvjX"),s=n("1/iK"),l=n("aCAx"),c=n("kz7j"),d=n("kRBY"),u=n("w1PT"),m=n("8EUQ"),p=n("GnwI"),h=n("d0xR"),g=n("oJmH"),f=n("/7QA"),b=n("2+sX"),v=n("u5aL"),k=n("ZS2+"),C=n("eJ65"),y=n("yR8l"),S=n("x7UT"),E=n("3Bft"),N=n("tIid"),_=n("ht6z"),D=n("/aPz"),w=n("KriR"),O=n("D7An"),I=n("4rCz"),T=n("0WFu"),M="All-Access Pass",L="Continue Sub",R="Continue Sub - Ends Today",x=function(e){return"Continue Sub - "+e+" Days Remaining"},F="Get the All-Access Pass",A="Gift A Sub",j="Resubscribe",U="Subscribe",B="Subscribed",P="Subscribed to <hosted channel>",V="Subscribe to <hosted channel>";var H,G=n("br9A"),W=n("Ue10"),q=(n("a7aT"),n("z+dA"));!function(e){e.SubButton="subscribe-button__dropdown",e.BalloonLayerButton="subscribe-button__balloon-layer-btn",e.DefaultButton="subscribe-button__default-btn",e.SubscribeBalloon="subscribe-button__subscribe-balloon"}(H||(H={}));var z=k.a.wrap(function(){return Promise.all([n.e(0),n.e(225)]).then(n.bind(null,"f+qK"))},"SubscribeBalloon"),Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modalLevel="top_page",t.renderBalloonContentForBalloonLayer=function(){return r.createElement(v.a,{onClickOut:t.handleBalloonClickOut},r.createElement(W.fb,{"data-a-target":"sub-balloon",refDelegate:t.setBalloonContentRefDelegate},t.balloonWrapperContent))},t.handleButtonClick=function(){t.balloonContentRef||(t.props.useModal&&t.props.channelLogin?(t.props.showSubscriptionModal({channelLogin:t.props.channelLogin,onClose:t.handleModalClose}),t.handleSubMenuAction({action:G.a.OpenSubMenu})):(t.props.balloonLayer.show({direction:t.getBalloonDirection(),ref:t.containerRef,content:t.renderBalloonContentForBalloonLayer(),contentHeight:0,closeOnScroll:!0}),t.handleMenuToggle(!1)))},t.handleBalloonClickOut=function(){t.handleMenuToggle(!0),t.props.balloonLayer.hide({force:!0})},t.handleModalClose=function(){t.handleSubMenuAction({action:G.a.CloseSubMenu})},t.setBalloonWrapperContent=function(e){t.balloonWrapperContent=e},t.handleSubMenuAction=function(e){new Set([G.a.ClickCheckout,G.a.BuyGiftSub,G.a.BuyMysteryGift,G.a.BuyCustomMysteryGift,G.a.BuyGiftToPaidUpgrade,G.a.BuyPaidUpgrade,G.a.BuyContinueSub]).has(e.action)&&t.checkAndDisplaySubscriptionCheckout();var n=t.props.data,i=n.user,r=null,a=null;i&&(r=i.self),r&&r.cumulativeTenure&&(a=r.cumulativeTenure.months);var o=!(!r||!r.subscriptionBenefit),s=n.requestInfo&&Object(_.a)(n.requestInfo.countryCode);Object(G.b)({action:e.action||"",buttonCTA:t.buttonTrackingCTA,channelLogin:t.props.channelLogin||"",channelID:i&&i.id||"",checkoutButtonTier:e.checkoutButtonTier,cumulativeTenureMonths:a,hasSubCredit:r&&r.canPrimeSubscribe,hostChannelID:t.props.hostChannelID,hostChannelLogin:t.props.hostChannelLogin,isAnonymous:e.isAnonymous,isMenuOpen:e.action!==G.a.OpenSubMenu,isSingleMonth:e.isSingleMonth,mysteryGiftCount:e.mysteryGiftCount,sub_location:"channel_page",modal:!o,modalLevel:o?"":t.modalLevel.slice(),showPrimeContent:s,giftRecipient:e.giftRecipient||null}),!e.modalLevel||e.action!==G.a.ClickMoreSubOptions&&e.action!==G.a.ClickBack||(t.modalLevel=e.modalLevel)},t.handleMenuToggle=function(e){t.handleSubMenuAction({action:e?G.a.CloseSubMenu:G.a.OpenSubMenu})},t.getBalloonDirection=function(){var e=t.props.balloonDirection||W.y.BottomRight;return t.props.hostChannelID&&(e=W.y.TopLeft),e},t.setContainerRefDelegate=function(e){t.containerRef=e},t.setBalloonContentRefDelegate=function(e){t.balloonContentRef=e},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.trackLatencyIfComponentFinished(this.props),this.checkAndDisplaySubscriptionCheckout()},t.prototype.componentDidUpdate=function(e){this.props.channelLogin&&!this.isUserDataReady(this.props)||!this.props.updateContainerWidth||this.props.updateContainerWidth(),this.trackLatencyIfComponentFinished(this.props),!this.isUserDataReady(e)&&this.isUserDataReady(this.props)&&this.checkAndDisplaySubscriptionCheckout()},t.prototype.componentWillReceiveProps=function(e){this.isUserDataReady(e)&&e.pubsub.messages.subscriptionInfo!==this.props.pubsub.messages.subscriptionInfo&&this.props.data.refetch()},t.prototype.componentWillUnmount=function(){m.a.clearSubscriptionCheckoutKeys()},t.prototype.render=function(){var e=this.props.data;if(!e||e.loading||e.error)return null;var t=e.requestInfo,n=e.user;if(!n)return null;var i=n.self,a=n.subscriptionProducts;if(!a)return null;var o=a.filter(function(e){return e});if(0===o.length)return null;if(this.props.hideEsportsSubscription&&Object(N.a)(n.id||"",this.props.sessionUser))return null;var s=1===o.length;o.some(function(e){return!e.emoteSetID})&&(s=!0);var l=Object(N.a)(n.id||"",this.props.sessionUser),c=null,d=!1,u=!1,m=!1,p=!1,h=null;if(i){if(i.cumulativeTenure)m=i.cumulativeTenure.months>0;if(i.subscriptionBenefit){var g=i.subscriptionBenefit;c=g.endsAt,d=g.isDNRd,u=!!g.pendingSubscription,p=!0,h=g.purchasedWithPrime?E.a.Prime:g.tier,this.modalLevel=""}}var f=function(e){var t=I.r.experiments.getAndTrackAssignment(O.b.SubsReanimator);if(e.isSubscribed){if(e.hasInsiderPass)return e.subscriptionProducts.length>0&&Object(N.c)(e.subscriptionProducts[0].name)?{text:Object(I.d)("2019 All-Access Pass","SubscribeButton"),cta:M}:{text:Object(I.d)("All-Access Pass","SubscribeButton"),cta:M};if(e.isNonStandardSub)return{text:Object(I.d)("Subscribed","SubscribeButton"),cta:B};if(e.hostedDisplayName)return{text:Object(I.d)("Subscribed to {username}",{username:e.hostedDisplayName},"SubscribeButton"),cta:P};if("control"!==t&&e.benefitIsDNRd&&e.benefitEndsAt&&!e.hasPendingSub){var n=Object(T.a)(e.benefitEndsAt);if(n<=15&&n>7)return{text:Object(I.d)("Continue Sub","SubscribeButton"),cta:L};if(n<=7&&0!==n)return{text:Object(I.d)("{daysRemaining, plural, one {Continue Sub - {daysRemaining} Day Remaining} other {Continue Sub - {daysRemaining} Days Remaining}}",{daysRemaining:n},"SubscribeButton"),cta:x(n)};if(0===n)return{text:Object(I.d)("Continue Sub - Ends Today","SubscribeButton"),cta:R}}return{text:Object(I.d)("Gift a Sub","SubscribeButton"),cta:A}}return e.hasInsiderPass?e.subscriptionProducts.length>0&&Object(N.c)(e.subscriptionProducts[0].name)?{text:Object(I.d)("Get the 2019 All-Access Pass","SubscribeButton"),cta:F}:{text:Object(I.d)("Get the All-Access Pass","SubscribeButton"),cta:F}:e.hostedDisplayName?{text:Object(I.d)("Subscribe to {username}",{username:e.hostedDisplayName},"SubscribeButton"),cta:V}:e.hasTenure?{text:Object(I.d)("Resubscribe","SubscribeButton"),cta:j}:{text:Object(I.d)("Subscribe","SubscribeButton"),cta:U}}({benefitEndsAt:c,benefitIsDNRd:d,hasInsiderPass:l,hasPendingSub:u,hasTenure:m,hostedDisplayName:this.props.hostChannelID?n.displayName||"":void 0,isNonStandardSub:s,isSubscribed:p,subscriptionProducts:o});this.buttonTrackingCTA=f.cta;var b=f.text;if(p&&s&&!l)return r.createElement(W.C,{disabled:!0,ariaLabel:b,icon:W.Db.Star},b);var v=r.createElement(W.C,{ariaLabel:b,"data-a-target":p?"subscribed-button":"subscribe-button","data-test-selector":H.SubButton,dropdown:!this.props.hideDropdownArrow,fullWidth:!0,icon:this.getButtonIcon(p,h),onClick:this.props.renderBalloonInBalloonLayer||this.props.useModal?this.handleButtonClick:void 0,type:this.getButtonType(p)},b);if(this.props.useModal)return v;var k=o[0];return this.setBalloonWrapperContent(r.createElement(z,{authToken:this.props.authToken,channelLogin:this.props.channelLogin||"","data-test-selector":H.SubscribeBalloon,handleSubMenuAction:this.handleSubMenuAction,inPrimeRegion:!!t&&Object(_.a)(t.countryCode),isEsportChannel:l,isNonStandardSub:s,isStaff:!(!this.props.sessionUser||!this.props.sessionUser.roles)&&this.props.sessionUser.roles.isStaff,isSubscribed:p,productId:k?k.id:"",subbedTier:h||E.a.Prime,userHasPrime:!1})),this.props.renderBalloonInBalloonLayer?r.createElement(W.fb,{"data-test-selector":H.BalloonLayerButton,refDelegate:this.setContainerRefDelegate},v):r.createElement(W.fb,null,r.createElement(C.a,{"data-test-selector":H.DefaultButton,onToggle:this.handleMenuToggle},v,r.createElement(W.x,{"data-a-target":"sub-balloon",direction:this.getBalloonDirection(),size:W.z.Large},this.balloonWrapperContent)))},t.prototype.getButtonType=function(e){W.I.Default;return e&&void 0!==this.props.subscribedButtonType?this.props.subscribedButtonType:e?W.I.Success:this.props.unsubscribedButtonType||W.I.Default},t.prototype.getButtonIcon=function(e,t){var n=void 0;return e?n=t===E.a.Prime?W.Db.Crown:W.Db.Star:this.props.forceIcon&&(n=W.Db.StarHollow),n},t.prototype.isUserDataReady=function(e){return e.data&&e.data.user&&!e.data.loading&&!e.data.error},t.prototype.trackLatencyIfComponentFinished=function(e){e.data&&!e.data.loading&&(e.reportInteractive&&e.reportInteractive(),e.reportCustomLatency&&e.reportCustomLatency())},t.prototype.checkAndDisplaySubscriptionCheckout=function(){var e=f.o.get(m.a.SUB_CHECKOUT__PRODUCT_KEY,"");if(e){var t=this.props.data.user;if(t&&t.subscriptionProducts)t.subscriptionProducts.filter(function(e){return e}).map(function(e){return e.name}).includes(e)||this.props.extraSubscriptionProducts&&this.props.extraSubscriptionProducts.includes(e)?this.props.sessionUser?this.props.showSubscriptionCheckout({isAnonymous:f.o.get(m.a.SUB_CHECKOUT__GIFTING_ANONYMOUSLY,!1),isOneTimePurchase:f.o.get(m.a.SUB_CHECKOUT__IS_ONE_TIME_PURCHASE,!1),mysteryGiftCount:Number(f.o.get(m.a.SUB_CHECKOUT__MYSTERY_GIFT_COUNT,"")),productName:e,recipientLogin:f.o.get(m.a.SUB_CHECKOUT__RECIPIENT_KEY,""),trackingContext:{source:w.c.ChannelSubscribeButton}}):this.props.showLoginModal():m.a.clearSubscriptionCheckoutKeys()}},t}(r.Component),Y=Object(g.compose)(Object(y.a)(q,{options:function(e){return{variables:{login:e.channelLogin,withTenure:Object(T.c)("cumulative_tenure",!(!e.sessionUser||!e.sessionUser.roles)&&e.sessionUser.roles.isStaff)}}},skip:function(e){return!e.channelLogin}}),Object(S.a)([{topic:function(e){return Object(D.H)(e.data.currentUser&&e.data.currentUser.id||"")},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:function(e){return!(e.data&&!e.data.loading&&!e.data.error&&e.data.currentUser)}}]),Object(b.e)())(Q),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadedLatencyEvent=t.props.latencyTracking.registerCustomEvent({benchmark:500,group:c.a.Subscriptions,label:c.c.Loaded,start:c.d.Registration,key:c.b.SubscriptionButtonLoaded}),t.reportCustomLatencyTracking=function(){t.props.latencyTracking.reportCustomEvent(t.loadedLatencyEvent)},t.reportInteractive=function(){t.props.latencyTracking.reportInteractive()},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement(Y,{authToken:this.props.authToken,balloonDirection:this.props.balloonDirection,channelLogin:this.props.channelLogin,extraSubscriptionProducts:this.props.extraSubscriptionProducts,forceIcon:this.props.forceIcon,hideEsportsSubscription:this.props.hideEsportsSubscription,hideDropdownArrow:this.props.hideDropdownArrow,hostChannelID:this.props.hostChannelID,hostChannelLogin:this.props.hostChannelLogin,renderBalloonInBalloonLayer:this.props.renderBalloonInBalloonLayer,reportCustomLatency:this.reportCustomLatencyTracking,reportInteractive:this.reportInteractive,sessionUser:this.props.sessionUser,showLoginModal:this.props.showLoginModal,showSubscriptionCheckout:this.props.showSubscriptionCheckout,showSubscriptionModal:this.props.showSubscriptionModal,subscribedButtonType:this.props.subscribedButtonType,unsubscribedButtonType:this.props.unsubscribedButtonType,updateContainerWidth:this.props.updateContainerWidth,useModal:this.props.useModal})},t=i.__decorate([Object(p.withLatencyTracking)("SubscribeButton")],t)}(r.Component);var $=Object(a.connect)(function(e){return{authToken:Object(d.a)(e),sessionUser:Object(d.e)(e)}},function(e){return Object(o.bindActionCreators)({showLoginModal:m.a.showLoginModalWithCheckoutDispatch(s.a.ChannelSubscriptionButton),showSubscriptionModal:function(e){var t=i.__rest(e,[]);return Object(l.d)(h.SubscribeModal,t)},showSubscriptionCheckout:u.a},e)})(K);n.d(t,"SubscribeButtonContainer",function(){return K}),n.d(t,"SubscribeButton",function(){return $}),n.d(t,"TestSelectors",function(){return H}),n.d(t,"SubscribeButtonPresentation",function(){return Q}),n.d(t,"SubscribeButtonComponent",function(){return Y})},R2Ti:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_AllowRejectedCheerMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AllowRejectedCheerInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowRejectedCheer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:118}};n.loc.source={body:"mutation Chat_AllowRejectedCheerMessage($input: AllowRejectedCheerInput!) {\nallowRejectedCheer(input: $input) {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},R4sh:function(e,t,n){"use strict";function i(e){var t=[e[0],e[1],e[2]].map(function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)});return.2126*t[0]+.7152*t[1]+.0722*t[2]}function r(e,t){var n=i(e)+.05,r=i(t)+.05;return n>r?n/r:r/n}n.d(t,"a",function(){return r})},RNNG:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return u}),n.d(t,"a",function(){return m});var i=n("mrSG"),r=n("DpwM"),a=Number.MAX_VALUE,o=Number.MIN_VALUE,s=function(e){return i.__assign({commentCount:0,maxOffset:o,minOffset:a,parentComments:{},offsets:{},replies:{}},e)},l=function(e,t){var n=h(e);return t.forEach(function(e){var t,r=e.id,a=e.contentOffset,o=e.parentId;if(""===o){n.minOffset=Math.min(n.minOffset,a),n.maxOffset=Math.max(n.maxOffset,a),n.parentComments=i.__assign({},n.parentComments,((t={})[r]=e,t));var s=n.offsets[a];Array.isArray(s)?s.includes(r)||(n.offsets[a]=s.concat(r),n.commentCount++):(n.offsets[a]=[r],n.commentCount++)}else{var l=n.replies[o];if(Array.isArray(l)){var c=l.findIndex(function(t){return t.id===e.id});-1!==c?l[c]=e:(n.replies[o]=l.concat(e),n.commentCount++)}else n.replies[o]=[e],n.commentCount++}}),n},c=function(e,t){if(t in e.parentComments)return e.parentComments[t]},d=function(e,t){var n=h(e);return Object(r.h)(t)?b(n,t.parentId,t.id):f(n,t.id)},u=function(e,t){if(e.commentCount<t||p(e))return e;for(var n=e;n.commentCount>t&&!p(e);)n=v(n,n.minOffset);return n},m=function(e,t){var n=h(e);return Object.keys(e.parentComments).forEach(function(i){var r=e.parentComments[i];t(r)||(n=f(n,r.id))}),Object.keys(e.replies).forEach(function(i){e.replies[i].forEach(function(e){t(e)||(n=b(n,e.id,e.parentId))})}),n},p=function(e){return e.minOffset===e.maxOffset},h=function(e){return{commentCount:e.commentCount,maxOffset:e.maxOffset,minOffset:e.minOffset,offsets:g(e.offsets),parentComments:i.__assign({},e.parentComments),replies:i.__assign({},e.replies)}},g=function(e){return Object.keys(e).reduce(function(t,n){return t[Number(n)]=e[Number(n)].slice(),t},{})},f=function(e,t){if(!(t in e.parentComments))return e;var n=e.parentComments[t].contentOffset,i=e.offsets[n],r=[];if(i&&(r=i.filter(function(e){return e!==t})),e.offsets[n]=r,delete e.parentComments[t],e.commentCount--,t in e.replies){var a=e.replies[t].length;delete e.replies[t],e.commentCount-=a}return e},b=function(e,t,n){if(!(t in e.replies))return e;var i=e.replies[t].length,r=e.replies[t].filter(function(e){if(e.id!==n)return e});e.replies[t]=r,0===r.length&&delete e.replies[t];var a=i-r.length;return e.commentCount-=a,e},v=function(e,t){return t>=e.minOffset&&t<=e.maxOffset&&!p(e)?(t in e.offsets&&e.offsets[t].forEach(function(t){e=f(e,t)}),delete e.offsets[t],e.maxOffset===t?e.maxOffset--:e.minOffset===t&&e.minOffset++,e):e}},RQ6e:function(e,t,n){"use strict";var i=n("mrSG"),r=n("TSYQ"),a=n("q1tI"),o=n("/7QA"),s=n("fvjX"),l=n("yR8l"),c=n("GnwI");var d=n("Ue10"),u=n("gIsd"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){t.props.onChange&&t.props.onChange(e.target.value)},t}return i.__extends(t,e),t.prototype.componentDidUpdate=function(){this.props.data.loading&&!this.props.data.error||this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=null,t=Object(o.d)("Select One...","ReportUserModal");this.props.data.loading?e=[a.createElement("option",{key:"Loading"},Object(o.d)("Loading...","ReportReasonsSelect"))]:e=(this.props.data.reportReasons||[{id:"other",text:Object(o.d)("Other Terms of Service Violation","ReportUserModal")}]).map(function(e){return a.createElement("option",{key:e.id,value:e.id},e.text)});return a.createElement(d.fb,{margin:{bottom:2}},a.createElement(d.Ka,{id:"reporting-modal__select",label:Object(o.d)("Select Reason (required)","ReportUserModal")},a.createElement(d.Jb,{id:"reporting-modal__select","data-test-selector":"reporting-modal.select",disabled:this.props.data.loading||!!this.props.data.error,onChange:this.handleChange,defaultValue:t},a.createElement("option",{disabled:!0,key:"default"},t),e)))},t}(a.Component),p=Object(s.compose)(Object(l.a)(u,{options:function(e){return{variables:{content:e.reportContentType}}}}),Object(c.withLatencyTracking)("ReportReasonSelect"))(m);n("y4Ne");n.d(t,"a",function(){return h}),n.d(t,"b",function(){return g});var h;!function(e){e[e.Unsubmitted=0]="Unsubmitted",e[e.Success=1]="Success",e[e.FormError=2]="FormError",e[e.MutationError=3]="MutationError",e[e.UserError=4]="UserError"}(h||(h={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={description:"",reason:null},t.headerMessage=Object(o.d)("Tell us your concern about this content so that we can review it to determine whether there has been a violation of the {tosLink}. {br} (Abuse of this feature is a violation of the terms of service)",{br:a.createElement("br",null),tosLink:a.createElement("a",{href:"https://www.twitch.tv/p/terms-of-service",target:"_blank",rel:"noopener noreferrer"},Object(o.d)("terms of service","ReportUser"))},"ReportUser"),t.handleSubmit=function(e){e.preventDefault(),t.state.reason&&t.state.description.length>0?t.props.onSubmit(t.state.reason||"",t.state.description):t.props.onError(h.FormError)},t.handleTextAreaChange=function(e){t.setState({description:e.target.value})},t.handleReasonChange=function(e){t.setState({reason:e})},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement(d.fb,{display:d.Da.Flex,flexDirection:d.Ga.Column,alignItems:d.i.Center,justifyContent:d.eb.Center},this.renderStatusMessage(),this.renderBody())},t.prototype.renderBody=function(){return this.props.submitStatus===h.Success?a.createElement("div",null,a.createElement(d.C,{onClick:this.props.onClose},a.createElement(d.fb,{padding:{x:2}},Object(o.d)("Close","ReportUser")))):a.createElement("div",null,a.createElement(d.fb,{"data-test-selector":"reporting.title",margin:{bottom:1},"data-a-target":"reporting-channel-name"},a.createElement(d.Ca,{type:d.gc.H4},this.props.title),a.createElement(d.Ob,{color:d.R.Alt2,margin:{top:1}},this.headerMessage)),a.createElement("form",null,a.createElement(d.Ob,{borderTop:!0,borderBottom:!0,margin:{y:2},padding:{y:2}},a.createElement(p,{reportContentType:this.props.reportContentType,onChange:this.handleReasonChange}),a.createElement(d.Ka,{id:"reporting__text-area",label:Object(o.d)("Description (required)","ReportUser")},a.createElement(d.dc,{defaultValue:this.props.defaultDescription,onChange:this.handleTextAreaChange}))),a.createElement(d.Ob,{display:d.Da.Flex,justifyContent:d.eb.Center},a.createElement(d.C,{onClick:this.handleSubmit},a.createElement(d.fb,{padding:{x:2}},Object(o.d)("Send","ReportUser"))))))},t.prototype.renderStatusMessage=function(){var e=null;switch(this.props.submitStatus){case h.FormError:e=Object(o.d)("Reason and Description are required.","ReportUser");break;case h.MutationError:e=Object(o.d)("Sorry, a network error occurred when submitting your report. Please try again later.","ReportUser");break;case h.Success:e=Object(o.d)("Thank you for your report.","ReportUser");break;case h.UserError:e=Object(o.d)("This account could not be reported. It may have already been suspended, or the owner may have deleted it.","ReportUser");break;default:return null}var t=r({"reporting__error-container":this.props.submitStatus!==h.Success,"reporting__success-container":this.props.submitStatus===h.Success});return a.createElement(d.Ob,{className:t,fullWidth:this.props.submitStatus!==h.Success,"data-test-selector":"reporting.error",margin:{bottom:2},padding:1},e)},t}(a.Component)},RTtf:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelVideo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lengthSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scope"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewThumbnailURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"126"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"71"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"138"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"190"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]}]}}],loc:{start:0,end:291}};i.loc.source={body:'#import "twilight/features/channel/queries/channel.gql"\nfragment channelVideo on Video {\nid\nbroadcastType\ntitle\ndescription\nlengthSeconds\npublishedAt\nviewCount\nscope\npreviewThumbnailURL(width: 126 height: 71)\ngame {\nid\nboxArtURL(width: 138 height: 190)\nname\n}\nowner {\n...channel\n}\nlanguage\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("BbLt").definitions)),e.exports=i},RuiO:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Core_Services_Spade_SubEvent_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withVideo"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withVideo"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:266}};n.loc.source={body:"query Core_Services_Spade_SubEvent_User($channelID: ID! $withVideo: Boolean! $videoID: ID) {\nuser(id: $channelID) {\nid\nself {\ncanPrimeSubscribe\nsubscriptionBenefit {\nid\ntier\npurchasedWithPrime\n}\n}\n}\nvideo(id: $videoID) @include(if: $withVideo) {\nid\nbroadcastType\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},S4w9:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserEmotes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withOwner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withOwner"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"28"}}],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:188}};n.loc.source={body:"query UserEmotes ($withOwner: Boolean!) {\ncurrentUser {\nid\nemoteSets {\nid\nemotes {\nid\nsetID\ntoken\n}\nowner @include(if: $withOwner) {\nid\nlogin\ndisplayName\nprofileImageURL(width: 28)\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},S58p:function(e,t,n){},"SHn+":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("Ue10"),o=function(e){return r.createElement(a.fb,{margin:{right:1},display:a.Da.Flex,alignItems:a.i.Center},r.createElement(a.fb,{margin:{right:.5}},r.createElement(a.Ob,{display:a.Da.Flex,alignItems:a.i.Center},r.createElement(a.Ca,{fontSize:a.Ia.Size5,"data-test-selector":"labeled-text-label"},e.label))),r.createElement(a.Ca,{fontSize:a.Ia.Size5,ellipsis:!0},r.createElement(a.Aa,i.__assign({to:e.linkTo},Object(a.yc)(e),{targetBlank:e.targetBlank,"data-test-selector":"labeled-link-title"}),e.title)))};n.d(t,"a",function(){return o})},SceP:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsChatCard_Clip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnailURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"curator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:151}};n.loc.source={body:"query ClipsChatCard_Clip($slug: ID!) {\nclip(slug: $slug) {\nid\nthumbnailURL\ntitle\nslug\nurl\ncurator {\nid\ndisplayName\n}\nbroadcaster {\nid\ndisplayName\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Sfdh:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("4rCz");function r(){return{messageCreatedTooQuickError:Object(i.d)("Your message was not sent because you are sending messages too quickly.","format-error-messages"),chatReplayFilterError:Object(i.d)("Your message has been posted. However, other messages posted after the live stream are hidden.","format-error-messages")}}},"T1g+":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){var e=document.querySelector('[data-a-target="bits-button"]');e&&e.click()}},T7Bf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Drops_ChannelDrops_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isDropsLinked"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"activeDropCampaigns"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"connectionURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"applicableChannels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isStreamDropsEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:281}};n.loc.source={body:"query Drops_ChannelDrops_User($login: String! $isLoggedIn: Boolean!) {\nuser(login: $login) {\nid\nlogin\ndisplayName\nstream {\nid\ngame {\nid\nself @include(if: $isLoggedIn) {\nisDropsLinked\n}\nactiveDropCampaigns{\nconnectionURL\napplicableChannels {\nid\n}\n}\n}\nisStreamDropsEnabled\ntype\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},TApp:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("ZtEv"),r=n("aF6k");function a(e){return{type:i.b.Info,id:Object(r.a)("info"),message:e}}},TOso:function(e,t,n){"use strict";var i=n("mrSG"),r=n("/7QA"),a=n("cMjZ"),o=n("geRD"),s=n("f00E"),l=n("DMoW"),c=n("U1yz"),d=n("xXlL"),u=n("a1OF");var m,p=n("3YIm"),h=n("NMMG"),g=n("Vl9+");function f(e){var t=e.currentUserID,n=e.emotes,m=e.message,f=e.recipientUserID;if(""===t||""===m||""===f)return Promise.reject(new Error("Tried to send a whisper with nonsensical parameters."));var b=Object(s.b)(),v=i.__assign({mutation:p},Object(o.a)({message:m,nonce:b,recipientUserID:f})),k=Object(h.a)(t,f),C=Object(c.a)(r.q.apollo.client.cache,k,!0);if(C&&C.messages){var y=function(e,t){for(var n=[],i=/\S+/g,r=i.exec(e);r;){var a=r[0],o=t[a];if(o){var s=Object(u.c)(e.slice(0,r.index)),l=s?s.length:r.index;n.push({id:o.id,start:l,end:l+a.length-1})}r=i.exec(e)}return n}(m,n).map(d.a);v.optimisticResponse={sendWhisper:{__typename:"SendWhisperPayload",message:{content:{content:m,emotes:y,__typename:"MessageBody"},from:{id:t,__typename:"User"},id:b,nonce:b,sentAt:(new Date).toISOString(),deletedAt:null,editedAt:null,thread:{id:k,__typename:"WhisperThread",participants:[{id:t,__typename:"User",self:{__typename:"UserSelfConnection",whisperPermissions:{receive:l.kb.NOT_PERMITTED,__typename:"WhisperPermissions"}}},{id:f,__typename:"User",self:{__typename:"UserSelfConnection",whisperPermissions:{receive:l.kb.PERMITTED,__typename:"WhisperPermissions"}}}]},__typename:"WhisperMessage"},error:null}},v.update=function(e,t){if(t.data){var n=t.data;if(n.sendWhisper.message&&!n.sendWhisper.error){var r=n.sendWhisper.message,o=Object(c.a)(e,k);if(o&&o.messages){var s=o.messages.edges.findIndex(function(e){return e.node.id===b||e.node.nonce===b||e.node.id===r.id});if(s<0){var l={cursor:(1+C.messages.edges.reduce(function(e,t){return Math.max(parseInt(t.cursor,10),e)},0)).toString(),node:r,__typename:"WhisperMessageEdge"};o.messages.edges.unshift(l)}else o.messages.edges[s].node=r;o.userLastMessageRead&&(o.userLastMessageRead.sentAt=r.sentAt),o.unreadMessagesCount=0,e.writeFragment({id:Object(a.a)(o),fragment:g,data:i.__assign({},o)})}}}}}return r.q.apollo.client.mutate(v)}n.d(t,"a",function(){return m}),n.d(t,"b",function(){return f}),function(e){e.TargetBanned="TARGET_BANNED",e.BodyEmpty="BODY_EMPTY",e.RestrictedRecipient="TARGET_RESTRICTED",e.NotDelivered="NOT_DELIVERED"}(m||(m={}))},TTKc:function(e,t,n){},Tqc9:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o});var i="@",r="Enter",a="Escape",o=" "},TvOw:function(e,t,n){"use strict";var i,r;n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r}),function(e){e.Spam="Spam",e.Harassment="Harassment"}(i||(i={})),function(e){e.Spam="spam",e.Harassment="harassment",e.Other="other"}(r||(r={}))},Tvwe:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i,r=n("mrSG"),a=n("q1tI"),o=n("Ue10");!function(e){e.Container="mega-notification-container-selector"}(i||(i={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cards:[]},t.popCard=function(){t.setState(function(e){return{cards:e.cards.slice(1).slice()}})},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.state.cards[0];return e?a.createElement(o.Ob,{className:"mega-cheer-notification","data-test-selector":i.Container},e):null},t}(a.Component)},Tznh:function(e,t,n){"use strict";var i,r,a,o=n("mrSG"),s=n("q1tI"),l=n("/MKj"),c=n("fvjX"),d=n("/7QA"),u=n("yR8l"),m=n("D7An"),p=n("kRBY"),h=n("1rIY"),g=n("+pBb"),f=n("CbHG");!function(e){e.Excluded="control",e.OptIn="opt-in",e.OptOut="opt-out"}(r||(r={})),function(e){e.FilteredMessage="chat_filter_message",e.Onboarding="onboarding",e.Other="other"}(a||(a={}));var b=(i=Object(h.a)("ChatFilterContext",{chatFilterExperimentMembership:r.Excluded,chatFilterSettingsSource:a.Other,isShowingChatFilterSettings:!1,hideChatFilterSettings:function(){return null},showChatFilterSettings:function(){return null}})).InnerProvider,v=i.withContext,k=function(e){function t(t){var n=e.call(this,t)||this;return n.hideChatFilterSettings=function(){n.setState({isShowingChatFilterSettings:!1})},n.showChatFilterSettings=function(e){n.setState({chatFilterSettingsSource:e||a.Other,isShowingChatFilterSettings:!0})},n.state={chatFilterExperimentMembership:r.Excluded,chatFilterSettingsSource:a.Other,isShowingChatFilterSettings:!1,hideChatFilterSettings:n.hideChatFilterSettings,showChatFilterSettings:n.showChatFilterSettings},n}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.updateStateWithProps(this.props)},t.prototype.componentWillReceiveProps=function(e){this.updateStateWithProps(e)},t.prototype.render=function(){return s.createElement(b,{value:this.state},this.props.children)},t.prototype.updateStateWithProps=function(e){switch(this.getExperimentMembership(e)){case r.OptIn:this.setOptInState(e);break;case r.OptOut:this.setOptOutState(e);break;case r.Excluded:default:this.setExcludedState()}},t.prototype.getExperimentMembership=function(e){if("off"===d.b.get("chat_filter_enabled","off"))return r.Excluded;if(!e.isLoggedIn||"en"!==e.languageCode)return r.Excluded;if(e.data&&e.data.currentUser&&e.data.currentUser.createdAt){var t=d.b.get("chat_filter_start","3000-01-01"),n=new Date(e.data.currentUser.createdAt)>=new Date(t)?m.b.ChatFiltersNewUsers:m.b.ChatFiltersExistingUsers,i=d.q.experiments.getAndTrackAssignment(n);switch(i){case r.Excluded:case r.OptIn:case r.OptOut:return i;default:return r.Excluded}}return r.Excluded},t.prototype.setExcludedState=function(){this.setState({chatFilterExperimentMembership:r.Excluded})},t.prototype.setOptInState=function(e){this.setState({chatFilterExperimentMembership:r.OptIn}),void 0===e.viewerChatFilterEnabled&&this.props.disableViewerChatFilter(a.Other)},t.prototype.setOptOutState=function(e){this.setState({chatFilterExperimentMembership:r.OptOut}),void 0===e.viewerChatFilterEnabled&&this.props.enableViewerChatFilter(a.Other)},t}(s.Component);var C=Object(c.compose)(Object(l.connect)(function(e){return{isLoggedIn:Object(p.f)(e),languageCode:Object(p.b)(e),viewerChatFilterEnabled:e.chat.viewerChatFilterEnabled}},function(e){return Object(c.bindActionCreators)({disableViewerChatFilter:g.J,enableViewerChatFilter:g.P},e)}),Object(u.a)(f,{skip:function(e){return!e.isLoggedIn||"en"!==e.languageCode}}))(k);n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,!1,function(){return b}),n.d(t,"d",function(){return v}),n.d(t,!1,function(){return k}),n.d(t,"a",function(){return C})},U1yz:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("2Dht");function r(e,t,n){try{var r=e.readQuery({query:i,variables:{id:t}},n);return r?r.whisperThread:null}catch(e){return null}}},U80U:function(e,t,n){},UNiU:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("/7QA"),r=n("D7An"),a="on";function o(){return i.q.experiments.getAndTrackAssignment(r.b.VODThirtyStacks)===a}},UUau:function(e,t,n){},UWbL:function(e,t,n){"use strict";function i(e){var t=/^((\d+)[Hh])?((\d+)[Mm])?((\d+)[Ss])?$/.exec(e||"");return t?3600*(parseInt(t[2],10)||0)+60*(parseInt(t[4],10)||0)+(parseInt(t[6],10)||0):0}n.d(t,"a",function(){return i})},UZgS:function(e,t,n){},UajW:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsCard_MainCard"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withCheerBombEventEnabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCheerBombEventEnabled"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withCheerBombEventEnabled"}}}]}]}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsBadge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nextBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"current"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tournament"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"teams"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:469}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nquery BitsCard_MainCard($name: ID! $withCheerBombEventEnabled: Boolean!) {\ncurrentUser {\nid\nbitsBalance\nlogin\n}\nuser(id: $name) {\nid\ndisplayName\ncheer {\nid\nsettings {\nemoteMinimumBits\ncheerMinimumBits\nevent\nisCheerBombEventEnabled @include(if: $withCheerBombEventEnabled)\n}\n}\nself {\nbitsBadge {\nid\ntotalBits\nnextBits\nprogress\ncurrent {\n...badge\n}\nnext {\n...badge\n}\n}\n}\ntournament {\nid\nteams {\nid\nname\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("IKE4").definitions)),e.exports=i},V3Pk:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"h",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"g",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"f",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"i",function(){return m});var i=n("mrSG"),r="vodChat.channel-moderation-comments.RESULTS_RECEIVED",a=function(e,t){return i.__assign({type:r},e,{bitsConfig:t})},o="vodChat.channel-moderation-comments.RESULTS_FAILED",s=function(e){return{type:o,error:e}},l=function(e){return{type:"vodChat.channel-moderation-comments.BAN_FAILED",error:e}},c="vodChat.channel-moderation-comments.BAN_SUCCESS",d=function(e){return{type:c,user:e}},u="vodChat.channel-moderation-comments.SEARCH_SUCCESS",m=function(e){return{type:u,hits:e}}},VAW9:function(e,t,n){"use strict";var i=n("oJmH"),r=n("/MKj"),a=n("fvjX"),o=n("yR8l"),s=n("eDVu"),l=n("0Log"),c=n("/aPz"),d=n("kRBY"),u=n("DMoW");function m(e){var t={__typename:"Cheermote",id:"",prefix:e.prefix,type:function(e){var t=u.w.UNKNOWN;switch(e){case"channel_custom":t=u.w.CUSTOM;break;case"global_first_party":t=u.w.FIRST_PARTY;break;case"global_third_party":t=u.w.THIRD_PARTY;break;case"sponsored":t=u.w.SPONSORED;break;default:t=u.w.UNKNOWN}return t}(e.type),campaign:null,tiers:[]},n=e.tiers.map(function(e){var t=[];return p(e.images).forEach(function(e,n){p(e).forEach(function(e,i){p(e).forEach(function(e,r){t.push({__typename:"CheermoteImage",id:"",url:e,theme:n.toUpperCase(),dpiScale:parseFloat(r),isAnimated:"animated"===i})})})}),{__typename:"CheermoteTier",id:e.id,bits:e.min_bits,canCheer:e.can_cheer,canShowInBitsCard:e.show_in_bits_card,color:e.color,images:t}});return t.tiers=n,e.campaign&&(t.campaign=function(e){var t={__typename:"CheermoteCampaign",id:e.id,brandName:e.brand_name,brandImageURL:e.brand_image_url,minimumBitsAmount:e.min_bits_to_be_sponsored,bitsTotal:e.total_bits,bitsUsed:e.used_bits,bitsPercentageRemaining:e.used_bits/e.total_bits,userLimit:e.user_limit,thresholds:[],self:null};return p(e.sponsored_amount_thresholds).forEach(function(e,n){t.thresholds.push({__typename:"CheermoteCampaignThreshold",id:"",minimumBits:n,matchedPercent:e})}),t}(e.campaign)),t}var p=function(e){return Object.keys(e).reduce(function(t,n){return t.set(n,e[n])},new Map)},h=n("0Lz3"),g=n("+pBb"),f=n("Y3y8"),b=n("GnwI");var v=n("mrSG"),k=n("q1tI"),C=n("/7QA"),y=n("w0yC"),S=n("ZS2+"),E=n("KwB3"),N=n("BJwa"),_=n("Ue10"),D=(n("zWFo"),"Stream Chat"),w=S.a.wrap(function(){return n.e(235).then(n.bind(null,"+k6+"))},"ActiveRoomButton"),O=S.a.wrap(function(){return n.e(234).then(n.bind(null,"Xf1I"))},"Room"),I=S.a.wrap(function(){return n.e(233).then(n.bind(null,"cs/o"))},"RoomPicker"),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activeRoomID:D,activeRoomName:D,isActiveRoomDeleted:!1,shouldAutoOpenRoomPicker:!0,showRoomPicker:!1},t.isChannelLive=function(e){return!(e.error||!e.channel)&&!!(e.channel.stream&&e.channel.stream.id||e.channel.hosting&&e.channel.hosting.id)},t.checkRoomPickerAutoOpen=function(e){if(t.state.shouldAutoOpenRoomPicker&&e.firstPageLoaded&&e.data&&e.data.channel&&e.data.channel.channelRooms){var n=t.isChannelLive(e.data),i=0!==e.data.channel.channelRooms.length,r=!n&&i&&!e.isEmbedded;t.setState({shouldAutoOpenRoomPicker:!1,showRoomPicker:r})}},t.headerClick=function(){t.setState(function(e){return{shouldAutoOpenRoomPicker:!1,showRoomPicker:!e.showRoomPicker}})},t.handleRoomSelect=function(e,n){t.setState({activeRoomID:e,activeRoomName:n,isActiveRoomDeleted:!1,showRoomPicker:!1})},t.onActiveRoomDelete=function(){t.state.activeRoomID!==D&&t.setState({isActiveRoomDeleted:!0})},t.goToStreamChat=function(){t.handleRoomSelect(D,D)},t.closeRoomPicker=function(){t.setState({showRoomPicker:!1})},t}return v.__extends(t,e),t.prototype.componentWillMount=function(){this.checkRoomPickerAutoOpen(this.props)},t.prototype.componentWillReceiveProps=function(e){var t=this;if(e.channelLogin!==this.props.channelLogin&&this.setState({shouldAutoOpenRoomPicker:!0}),this.checkRoomPickerAutoOpen(e),this.props.data&&e.data&&this.props.data.channel&&e.data.channel&&this.props.data.channel.self&&e.data.channel.self&&!e.data.channel.self.isChannelMember&&this.props.data.channel.self.isChannelMember!==e.data.channel.self.isChannelMember&&this.goToStreamChat(),e.data&&e.data.channel&&e.data.channel.self){var n=e.data.channel.self;(!n.isChannelMember||n.banStatus&&n.banStatus.isPermanent)&&this.state.activeRoomID!==D&&this.goToStreamChat()}if(this.props.sessionUser&&this.props.routedRoomName&&this.props.data&&this.props.data.loading&&!this.props.data.channel&&e.data&&!e.data.loading&&e.data.channel&&e.data.channel.channelRooms&&e.data.channel.self&&e.data.channel.self.isChannelMember){var i=e.data.channel.channelRooms.find(function(e){return null!==e&&e.name===t.props.routedRoomName});i&&this.setState({activeRoomID:i.id,activeRoomName:i.name})}else this.props.channelLogin!==e.channelLogin&&this.state.activeRoomID!==D&&this.goToStreamChat()},t.prototype.render=function(){return k.createElement(_.fb,{className:"room-selector",fullWidth:!0,fullHeight:!0,display:_.Da.Flex,flexDirection:_.Ga.Column,flexGrow:1,flexWrap:_.Ha.NoWrap,position:_.tb.Relative},this.renderHeader(),this.renderRoomPicker(),this.renderHiddenState(),this.renderChat(),this.renderCurrentRoom())},t.prototype.renderChat=function(){if(this.props.isHidden&&!this.props.isPopout)return null;var e=this.props.isBackground||this.state.activeRoomID!==D,t=this.props.bitsConfig&&this.props.bitsConfig.orderedActions.length>0;return k.createElement(E.a,{bitsConfig:t?this.props.bitsConfig:void 0,channelLogin:this.props.channelLogin,clientID:C.a.authSettings.clientID,isBackground:e,isEmbedded:this.props.isEmbedded,isPopout:this.props.isPopout,closeRoomPicker:this.closeRoomPicker,onHostingChange:this.props.onHostingChange,hostedChannelDisplayName:this.props.hostedChannelDisplayName,passThroughCommands:this.props.passThroughCommands,shouldConnectChat:this.props.shouldConnectChat})},t.prototype.renderCurrentRoom=function(){return(!this.props.isHidden||this.props.isPopout)&&this.props.data&&this.props.data.channel&&this.props.data.channel.id&&this.state.activeRoomID!==D?k.createElement(O,{bitsConfig:this.props.bitsConfig,isDeleted:this.state.isActiveRoomDeleted,isPopout:this.props.isPopout,channelLogin:this.props.channelLogin,channelID:this.props.data.channel.id,roomID:this.state.activeRoomID,closeRoomPicker:this.closeRoomPicker,handleStreamChatClick:this.goToStreamChat,onDelete:this.onActiveRoomDelete,isHostMode:!!this.props.hostedChannelDisplayName,passThroughCommands:this.props.passThroughCommands}):null},t.prototype.renderHeader=function(){var e=k.createElement(_.fb,{display:_.Da.Flex,alignItems:_.i.Center},!this.state.showRoomPicker&&Object(C.d)("Rooms","RoomSelector"),k.createElement(_.fb,{display:_.Da.Flex,alignItems:_.i.Center},this.renderTotalUnreadMentionCount(),!this.state.showRoomPicker&&k.createElement(_.fb,{padding:{left:.5},display:_.Da.Flex},k.createElement(_.Cb,{asset:_.Db.RoomList})),this.state.showRoomPicker&&k.createElement(_.D,{ariaLabel:"RoomListOpen",icon:_.Db.RoomListOpen,"data-test-selector":"close-room-picker-button",onClick:this.headerClick,blurAfterClick:!0})));this.state.showRoomPicker||(e=k.createElement(_.fb,{position:_.tb.Relative},k.createElement(_.C,{"data-a-target":"room-selector-button","data-test-selector":"open-room-picker-button",onClick:this.headerClick,type:_.I.Text},e))),this.props.isEmbedded&&(e=k.createElement(_.fb,null));var t=k.createElement(_.Ob,{className:"room-selector__header",background:_.u.Alt,borderLeft:!this.props.isEmbedded,borderRight:!this.props.isEmbedded,borderBottom:!0,display:_.Da.Flex,fullWidth:!0,justifyContent:_.eb.Between,alignItems:_.i.Center,flexShrink:0,padding:{left:2,right:1}},k.createElement("div",{id:N.a},this.renderActiveRoomName()),e);return this.state.showRoomPicker&&(t=k.createElement(_.fb,{className:"room-selector__open-header-wrapper"},t)),t},t.prototype.renderRoomPicker=function(){if(this.state.showRoomPicker&&this.props.data&&this.props.data.channel&&this.props.data.channel.id)return k.createElement(y.a,{onClickOut:this.closeRoomPicker},k.createElement(_.Ob,{attachLeft:!0,attachRight:!0,background:_.u.Alt,borderBottom:!0,borderLeft:!0,borderRight:!0,elevation:2,position:_.tb.Absolute,zIndex:_.xc.Above},k.createElement(I,{channelID:this.props.data.channel.id,handleRoomSelect:this.handleRoomSelect,isChannelLive:this.isChannelLive(this.props.data),renderChannelName:this.props.renderChannelName,activeRoomID:this.state.activeRoomID,"data-test-selector":"room-picker"})))},t.prototype.renderActiveRoomName=function(){return this.state.showRoomPicker?k.createElement(_.Ca,{color:_.R.Alt,"data-test-selector":N.a},Object(C.d)("Rooms","RoomSelectorOpened")):this.state.activeRoomName===D?this.props.renderChannelName&&this.props.data&&this.props.data.channel&&this.props.data.channel.displayName?k.createElement(_.Ca,{color:_.R.Alt,"data-test-selector":N.a},Object(C.d)("<x:bold>{displayName}</x:bold>'s Chat",{displayName:this.props.data.channel.displayName,"x:bold":function(e){return k.createElement(_.Ca,{type:_.gc.Span,bold:!0},e)}},"RoomSelectorOpened")):k.createElement(_.Ca,{color:_.R.Alt,"data-test-selector":N.a},Object(C.d)("Stream Chat","RoomSelectorOpened")):this.state.isActiveRoomDeleted?k.createElement(_.Ca,{color:_.R.Alt,"data-test-selector":N.a},this.state.activeRoomName):k.createElement(w,{roomID:this.state.activeRoomID,roomName:this.state.activeRoomName})},t.prototype.renderTotalUnreadMentionCount=function(){var e=this,t=this.props.data;if(!t||t.error||!t.channel||!t.channel.self||!t.channel.self.isChannelMember||!t.channel.channelRooms)return null;var n=t.channel.channelRooms.reduce(function(t,n){return n&&n.self&&!n.self.isMuted&&n.id!==e.state.activeRoomID?t+n.self.unreadMentionCount:t},0);return n>0?k.createElement(_.fb,{display:_.Da.InlineBlock,padding:{left:.5},position:_.tb.Relative},k.createElement(_.qb,{label:n.toString(),type:_.rb.Alert})):void 0},t.prototype.renderHiddenState=function(){return!this.props.isHidden||this.props.isPopout?null:k.createElement(_.Ob,{alignItems:_.i.Center,borderLeft:!0,"data-test-selector":"room-selector-hidden-state",display:_.Da.Flex,flexDirection:_.Ga.Column,fullHeight:!0,fullWidth:!0,justifyContent:_.eb.Center,color:_.R.Base,position:_.tb.Relative},k.createElement(_.fb,{margin:{bottom:1}},k.createElement(_.Ca,{fontSize:_.Ia.Size5},Object(C.d)("Chat is hidden.","RoomSelector"))),k.createElement(_.C,{onClick:this.props.onChatUnhide,"data-a-target":"show-chat-button"},Object(C.d)("Show Chat","RoomSelector")))},t}(k.Component),M=n("Qdho");var L=Object(i.compose)(Object(r.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded,isHidden:e.chat.isHidden,sessionUser:Object(d.e)(e)}},function(e){return Object(a.bindActionCreators)({onChatUnhide:function(){return g.T()}},e)}),Object(o.a)(M,{skip:function(e){return!e.firstPageLoaded},props:function(e){return{data:e.data,bitsConfig:Object(h.a)(e.data&&e.data.channel&&e.data.channel.cheer&&e.data.channel.cheer.emotes||[]),channelID:e.data&&e.data.channel&&e.data.channel.id}},options:function(e){return{variables:{login:e.channelLogin}}}}),Object(s.a)(function(e){return{query:M,skip:!e.firstPageLoaded||!e.data||!e.data.channel,variables:{login:e.channelLogin},topic:Object(c.j)(""+(e.data&&e.data.channel&&e.data.channel.id)),types:[l.PubsubMessageType.ChatRoomCreated,l.PubsubMessageType.ChatRoomDeleted],mutator:function(e,t){if(e.type===l.PubsubMessageType.ChatRoomDeleted&&t.channel&&t.channel.channelRooms)return t.channel.channelRooms=t.channel.channelRooms.filter(function(t){return null!==t&&t.id!==e.data.room.room_id}),t;if(e.type===l.PubsubMessageType.ChatRoomCreated&&t.channel&&t.channel.channelRooms){var n=function(e){return{id:e.data.room.room_id,minimumAllowedRole:e.data.room.minimum_allowed_role,name:e.data.room.name,topic:e.data.room.topic,isPreviewable:e.data.room.is_previewable,self:{isArchived:!1,isMuted:!1,isUnread:!1,unreadMentionCount:0,__typename:"RoomView"},__typename:"Room"}}(e);return t.channel.channelRooms.push(n),t}}}}),Object(s.a)(function(e){return{query:M,skip:!(e.firstPageLoaded&&e.sessionUser&&e.data&&e.data.channel),variables:{login:e.channelLogin},topic:Object(c.k)(""+(e.sessionUser&&e.sessionUser.id)),types:[l.PubsubMessageType.UserMention,l.PubsubMessageType.ChatRoomsRoomViewUpdated],mutator:function(e,t){switch(e.type){case l.PubsubMessageType.UserMention:if(e=e,!t.channel||!t.channel.channelRooms||t.channel.id!==e.data.channel_id)break;var n=e.data.room_id;t.channel.channelRooms=t.channel.channelRooms.filter(function(e){return e&&e.self}).map(function(e){return e.id===n&&e.self&&(e.self.unreadMentionCount+=1),e});break;case l.PubsubMessageType.ChatRoomsRoomViewUpdated:if(e=e,!t.channel||t.channel.id!==e.data.room_view.room.owner_id||!t.channel.self)break;t.channel.self.isModerator=e.data.room_view.permissions.moderate}return t}}}),Object(s.a)(function(e){return{query:M,skip:!(e.firstPageLoaded&&e.sessionUser&&e.data&&e.data.channel),variables:{login:e.channelLogin},topic:Object(c.b)(),types:[l.PubsubMessageType.BitsCampaignTotalUpdate,l.PubsubMessageType.BitsCampaignComplete],mutator:function(e,t){if(t.channel&&t.channel.cheer&&t.channel.cheer.emotes)if(e.type===l.PubsubMessageType.BitsCampaignTotalUpdate){var n=e;t.channel.cheer.emotes=t.channel.cheer.emotes.map(function(e){return e&&e.campaign?(e.campaign&&e.campaign.id===n.campaign_id&&(e.campaign.bitsUsed=n.used_amount),e):e})}else if(e.type===l.PubsubMessageType.BitsCampaignComplete){var i=e;t.channel.cheer.emotes=t.channel.cheer.emotes.filter(function(e){return!e||!e.campaign||e.campaign.id!==i.campaign_id})}return t}}}),Object(s.a)(function(e){return{query:M,skip:!(e.firstPageLoaded&&e.sessionUser&&e.data&&e.data.channel),variables:{login:e.channelLogin},topic:Object(c.a)(""+(e.data&&e.data.channel&&e.data.channel.id)),types:[l.PubsubMessageType.BitsCampaignAddCheermoteEvent,l.PubsubMessageType.BitsCampaignRemoveCheermoteEvent],mutator:function(e,t){if(t.channel&&t.channel.cheer&&t.channel.cheer.emotes)if(e.type===l.PubsubMessageType.BitsCampaignAddCheermoteEvent){var n=m(e.action);t.channel.cheer.emotes.unshift(n)}else if(e.type===l.PubsubMessageType.BitsCampaignRemoveCheermoteEvent){var i=e;t.channel.cheer.emotes=t.channel.cheer.emotes.filter(function(e){return!e||!e.campaign||e.campaign.id!==i.campaign_id})}return t}}}),Object(f.b)(),Object(b.withLatencyTracking)("RoomSelector",{autoReportInteractive:!0}))(T);n.d(t,"a",function(){return L})},VJHF:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"e",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return i});var i,r="hgc2018",a="owl2018",o="hearthstone2018",s="hearthstone2018-test";!function(e){e.Benefactor="benefactor",e.Recipient="recipient"}(i||(i={}))},VKOn:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"a",function(){return d});var i=n("/7QA"),r=n("DMoW"),a="disable_multiview_load";function o(e){if(e&&e.channel&&e.channel.id&&e.channel.chanlets){var t=e.channel,n=t.chanlets,i=t.id;return n.filter(function(e){return i!==e.id})}return[]}function s(e){return e.every(function(e){var t=e.restriction;if(!t)return!0;var n=new Date(Date.now());return!!t.exemptions&&t.exemptions.filter(function(e){return e.type===r.Ga.ALL&&(!e.startsAt||new Date(e.startsAt)<=n)&&(!e.endsAt||new Date(e.endsAt)>=n)}).length>=1})}function l(e){return e.every(function(e){return!!e.restriction})}function c(e){return e.some(function(e){return!!e.self&&e.self.isAuthorized})}function d(){return i.b.get(a,!1)}},VN3V:function(e,t,n){},Ve5Q:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UpsellCenter_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:162}};n.loc.source={body:"query UpsellCenter_Channel($login: String!) {\nuser(login: $login) {\nid\ndisplayName\nprofileImageURL(width: 70)\nbroadcastSettings {\nid\ngame {\nid\ndisplayName\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"Vl9+":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"thread"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WhisperThread"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:240}};n.loc.source={body:"fragment thread on WhisperThread {\nmessages(first: 20) {\nedges {\ncursor\nnode {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n}\n}\ndeletedAt\neditedAt\nsentAt\nfrom {\nid\n}\n}\n}\n}\nunreadMessagesCount\nuserLastMessageRead {\nsentAt\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},VrOd:function(e,t,n){},Vsf8:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsModalDeleteAll_Clip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"broadcast"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:101}};n.loc.source={body:"query ClipsModalDeleteAll_Clip($slug: ID!) {\nclip(slug: $slug) {\nid\nvideo {\nid\n}\nbroadcast {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},VwyG:function(e,t,n){"use strict";var i=n("/MKj"),r=n("kRBY"),a=n("mrSG"),o=n("q1tI"),s=n("oJmH"),l=n("/7QA"),c=n("yR8l"),d=n("GnwI"),u=n("nt5g"),m=function(e){function t(t){var n=e.call(this,t)||this;return n.logger=l.k.withCategory("role-restricted"),n.state={loading:t.isLoggedIn,permitted:!1,roles:{staff:!1,editor:!1,owner:!1},error:null},n}return a.__extends(t,e),t.prototype.componentDidUpdate=function(e){var t=e.data&&e.data.loading,n=this.props.data&&this.props.data.loading;(!this.props.isLoggedIn||t&&!n)&&this.props.latencyTracking.reportInteractive()},t.prototype.componentWillReceiveProps=function(e){this.maybeSetRoleState(e)},t.prototype.componentDidMount=function(){(!this.props.isLoggedIn||this.props.data&&!this.props.data.loading)&&this.props.latencyTracking.reportInteractive(),this.maybeSetRoleState(this.props)},t.prototype.render=function(){return this.props.children(this.state)},t.prototype.maybeSetRoleState=function(e){if(e.isLoggedIn&&e.data){var t=function(e){var t=e.data,n={staff:!1,editor:!1,owner:!1};t&&!t.error&&!t.loading&&t.user&&t.currentUser&&(n.staff=!(!t.currentUser.roles||!t.currentUser.roles.isStaff),n.editor=!(!t.user.self||!t.user.self.isEditor),n.owner=t.user.id===t.currentUser.id);return n}(e),n={loading:e.data.loading,permitted:function(e,t){if(e.owner)return!0;if(e.staff&&t.staff)return!0;if(e.editor&&t.editor)return!0;return!1}(t,e.permittedRoles),roles:t,error:null};e.data.error?(n.error=new Error(e.data.error.toString()),this.logger.warn("Unable to retrieve data from GraphQL.",{err:n.error})):e.data.loading||e.data.user&&e.data.currentUser||(n.error=new Error("Failed to fetch user information"),this.logger.warn("Failed to fetch user information.",{err:n.error})),this.setState(n)}},t}(o.Component);var p=Object(s.compose)(Object(c.a)(u,{options:function(e){return{variables:{contentOwnerLogin:e.ownerLogin}}},skip:function(e){return!e.isLoggedIn}}),Object(d.withLatencyTracking)("RoleRestricted"))(m);var h=Object(i.connect)(function(e){return{isLoggedIn:Object(r.f)(e)}})(p);n.d(t,"a",function(){return h})},"W/3w":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return s});var i=n("/7QA"),r=30,a=[0,10,30,60,1440,10080,43200,129600];function o(e){switch(e){case 0:return Object(i.d)("0 minutes (Any followers)","FollowersOnlyLabel");case 10:return Object(i.d)("10 minutes (Most used)","FollowersOnlyLabel");case 30:return Object(i.d)("30 minutes","FollowersOnlyLabel");case 60:return Object(i.d)("1 hour","FollowersOnlyLabel");case 1440:return Object(i.d)("1 day","FollowersOnlyLabel");case 10080:return Object(i.d)("1 week","FollowersOnlyLabel");case 43200:return Object(i.d)("1 month","FollowersOnlyLabel");case 129600:return Object(i.d)("3 months","FollowersOnlyLabel");default:return i.k.warn("[FollowersOnlyLabel] Tried to generate a label for a non-preset.",e),""}}function s(e){switch(e){case 0:return Object(i.d)("0 min","FollowersOnlyShorthand");case 10:return Object(i.d)("10 min","FollowersOnlyShorthand");case 30:return Object(i.d)("30 min","FollowersOnlyShorthand");case 60:return Object(i.d)("1 hr","FollowersOnlyShorthand");case 1440:return Object(i.d)("1 day","FollowersOnlyShorthand");case 10080:return Object(i.d)("1 wk","FollowersOnlyShorthand");case 43200:return Object(i.d)("1 mo","FollowersOnlyShorthand");case 129600:return Object(i.d)("3 mo","FollowersOnlyShorthand");default:return Object(i.d)("custom","FollowersOnlyShorthand")}}},W7Hf:function(e,t,n){"use strict";var i=n("9sGC");n.d(t,"a",function(){return i.a})},WK0g:function(e,t,n){"use strict";var i=n("cr+I"),r=n("b6Yk"),a=n("ahza"),o=n("mrSG"),s=n("pU2t"),l=n("XeJ1"),c=function(e,t){var n=Object(s.d)(e,t),i=e.comments.reduce(function(e,t){return void 0===t.video?e:e.concat([d(t.video)])},[]);return Array.isArray(e.parents)&&e.parents.forEach(function(e){n.comments.push(s.a.normalizeRecord(e,t)),n.users.push(l.a.normalizeRecord(e.commenter))}),o.__assign({},n,{videos:i})},d=function(e){return{id:e._id,title:e.title,preview:e.preview}};n.d(t,"b",function(){return g}),n.d(t,"a",function(){return f});var u="channel_id",m="limit",p="video_id",h=50;function g(e){var t;return t=function(e){return"userId"in e}(e)?function(e){var t={};return t[m]=h.toString(),t[u]=e.userId,void 0!==e.cursor&&(t[a.a]=e.cursor),"/v5/videos/comments?"+i.stringify(t)}(e):function(e){var t={};return t[m]=h.toString(),t[p]=e.videoId,void 0!==e.cursor&&(t[a.a]=e.cursor),"/v5/videos/comments?"+i.stringify(t)}(e),r.a.getOrThrow(t).then(function(t){return c(t.body,e.bitsConfig)})}function f(e){var t=function(e){return"/v5/videos/channels/"+e.targetChannel+"/bans"}(e),n={body:{commenter_id:e.bannedUser}};return r.a.postOrThrow(t,n)}},WrC7:function(e,t,n){},WytW:function(e,t,n){"use strict";n.d(t,"g",function(){return s}),n.d(t,"h",function(){return l}),n.d(t,"j",function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return m}),n.d(t,"e",function(){return p}),n.d(t,"f",function(){return h}),n.d(t,"a",function(){return g}),n.d(t,"p",function(){return b}),n.d(t,"m",function(){return k}),n.d(t,"k",function(){return y}),n.d(t,"o",function(){return E}),n.d(t,"n",function(){return _}),n.d(t,"l",function(){return O}),n.d(t,"i",function(){return T});var i=n("/7QA"),r=n("4G6/"),a=n("Ff8q"),o=i.q.logger.withCategory("chat-commands");function s(e){return"/mod "+e}function l(e){return"/unmod "+e}function c(e){return/^[\/]/.test(e)}function d(){return"/clear"}function u(){return"/followersoff"}function m(){return"/slowoff"}function p(e){return"/followers "+e}function h(){return"/slow"}function g(e){return"/color "+e}var f=/^\/w(?:$|\s+)(\S+)?\s*(.+)?/i;function b(e){var t=e.trim().match(f);return t?{recipientLogin:t[1]&&Object(a.b)(t[1])||null,body:t[2]||null}:null}var v=/^\/host\s+(\S+)$/i;function k(e){var t=e.trim().match(v);return t?{recipientLogin:Object(a.b)(t[1])}:null}var C=/^\/ban\s+(\S+)(?:\s+(.+))?$/;function y(e){var t=e.trim().match(C);return t&&t[1]?{banTarget:Object(a.b)(t[1]),reason:t[2]||null}:null}var S=/^\/timeout\s+(\S+)(?:\s+(\S+))?(?:\s+(.+))?$/;function E(e){var t=!0,n=e.trim().match(S);if(!n||!n[1])return null;var i=Object(a.b)(n[1]),o=n[2]||null,s=n[3]||null,l=null;if(null!==o){var c=Number(o);if(Number.isNaN(c)){var d=Object(r.b)(o||"");!d||Number.isNaN(d)?t=!1:l=d}else l=c}return{validArguments:t,banTarget:i,rawDuration:o,durationSeconds:l,reason:s}}var N=/^\/slow(?:\s+(\d+)?)?$/;function _(e){var t=e.trim().match(N);return t?{duration:t[1]&&Number(t[1])||null}:null}var D=["blue","blueviolet","cadetblue","chocolate","coral","dodgerblue","firebrick","goldenrod","green","hotpink","orangered","red","seagreen","springgreen","yellowgreen"],w=/^\/color\s+(#[A-Fa-f0-9]{6}|[A-Za-z]+)$/;function O(e){var t=e.trim().match(w);if(!t)return null;var n=t[1];return n.startsWith("#")||-1!==D.indexOf(n.toLowerCase())?{color:n}:null}var I=/^[/.]([a-z0-9]+)(.+)?$/i;function T(e,t){var n=e.match(I);if(!n)return{handled:!1};var r=n[1],a=i.q.store.getState().chat.commandHandlers[t][r.toLowerCase()];if(!a)return{command:r,handled:!1};if(1!==a.length)return o.error(new Error("Failed to run comand "+r),"Multiple command handlers defined for '"+r+"'",{command:r}),{command:r,handled:!1};var s=(n[2]||"").trim(),l={channelLogin:t},c=a[0];try{return{command:r,handled:!0,result:c(s,l)}}catch(e){return o.warn("Exception thrown from chat command handler",{command:r,err:e}),{handled:!1}}}},X7Ac:function(e,t,n){"use strict";var i=n("wbMx");n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b})},XIZb:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),r=n("q1tI"),a=n("4rCz"),o=n("1rIY");function s(e){var t=Object(o.a)(e,{setServiceAPI:function(){a.l.warn("The "+e+" chat service attempted to register its API without a provider.")}}),n=t.InnerProvider,s=t.withContext;return{InnerProvider:n,withChatServiceProvider:function(e){return function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={},e.setServiceAPI=function(t){e.setState({serviceAPI:t})},e}return i.__extends(a,t),a.prototype.render=function(){return r.createElement(n,{value:{serviceAPI:this.state.serviceAPI,setServiceAPI:this.setServiceAPI}},r.createElement(e,i.__assign({},this.props)))},a}(r.Component)},withContext:s}}},XQnt:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmotePicker_SubUpsell_PriceInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"priceInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currency"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"exponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isTaxInclusive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tax"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oldPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountValue"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"paidUpgradePromotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oldPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountValue"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:393}};n.loc.source={body:"query EmotePicker_SubUpsell_PriceInfo($channelID: ID!) {\nuser(id: $channelID) {\nid\nsubscriptionProducts {\nid\ndisplayName\nname\ntier\nurl\nemotes {\nid\ntoken\n}\nprice\npriceInfo {\ncurrency\nexponent\ntotal\ndescription\nprice\nisTaxInclusive\nid\ntax\n}\nemoteSetID\nself {\npromotion {\nnewPrice\noldPrice\ndiscountType\ndiscountValue\n}\npaidUpgradePromotion {\nnewPrice\noldPrice\ndiscountType\ndiscountValue\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},XUhy:function(e,t,n){},XXm5:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var i="vod-message",r="mod-dashboard",a="mod-comment"},XeJ1:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("nxZp"),r=n("ehEd"),a={normalizeRecord:function(e){return new i.a({id:e._id,name:e.name,logo:new URL(e.logo||r.a),bio:e.bio,createdAt:new Date(e.created_at),displayName:e.display_name,type:e.type,updatedAt:new Date(e.updated_at)})},serializeRecord:function(e){return{_id:e.id,name:e.name,logo:e.logo.toString(),bio:e.bio,created_at:e.createdAt.toISOString(),display_name:e.displayName,type:e.type,updated_at:e.updatedAt.toISOString()}}}},Y3y8:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var i=n("yR8l"),r=n("eDVu"),a=n("0Log"),o=n("/aPz"),s=n("/gva");function l(){return Object(i.a)(s,{name:"currentUserBannedStatusData",options:function(e){return{variables:{channelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin||!e.firstPageLoaded}})}function c(){return Object(r.a)(function(e){return{variables:{channelLogin:e.channelLogin},query:s,skip:!e.sessionUser||!e.channelID||!e.firstPageLoaded,topic:e.sessionUser&&e.channelID?Object(o.k)(""+(e.sessionUser&&e.sessionUser.id)):"",type:a.PubsubMessageType.ChatRoomsUserModAction,mutator:function(t,n){return e.sessionUser&&e.channelID&&n.channel&&n.channel.self&&t.data.target_id===e.sessionUser.id&&t.data.channel_id===e.channelID&&("ban"===t.data.action?n.channel.self.banStatus={isPermanent:!0,__typename:"ChatRoomBanStatus"}:"unban"===t.data.action&&(n.channel.self.banStatus={isPermanent:!1,__typename:"ChatRoomBanStatus"})),n}}})}},Y5lD:function(e,t,n){"use strict";function i(e){return Math.floor((Date.now()-new Date(e).getTime())/1e3)}n.d(t,"a",function(){return i})},YXxK:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r});var i=n("B/KH");n.d(t,"b",function(){return i.a});var r,a={Embed:"embed",Web:"web"};!function(e){e.ZeroBits="zero_bits",e.CheeringDisabled="cheering_disabled",e.BitsUnavailable="bits_unavailable",e.BitsCardDisabled="bits_card_disabled",e.AboveMaxEmote="above_max_emote",e.AboveMaxCheer="above_max_cheer",e.BelowMin="below_min",e.BelowMinEmote="below_min_emote",e.InputAboveMaxLength="input_above_max_length",e.InputCommandStart="input_command_start",e.InvalidBitsMessage="invalid_bits_message",e.Canceled="canceled",e.UserBanned="user_banned",e.AutoModMessage="auto_mod_message",e.AutoModPending="auto_mod_pending",e.ChannelBlockedTerms="channel_blocked_terms",e.ChannelIneligible="channel_ineligible",e.InvalidAnonymousMessage="invalid_anonymous_message",e.InvalidEventId="invalid_event_id",e.RequestThrottled="request_throttled",e.Unknown="unknown",e.UserIneligible="user_ineligible",e.UserSuspended="user_suspended",e.ZalgoMessage="zalgo_message",e.DuplicateEventId="duplicate_event_id",e.MissingBitsConfig="missing_bits_config"}(r||(r={}))},Yr1V:function(e,t,n){},ZEQw:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"e",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var i="subscribe_to_channel",r="turbo",a="visit_url",o="none",s="broadcaster"},ZGqV:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelChanlet"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Channel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuthorized"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"restriction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"exemptions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:120}};n.loc.source={body:"fragment channelChanlet on Channel {\nid\nself {\nisAuthorized\n}\nrestriction {\ntype\nexemptions {\nstartsAt\nendsAt\ntype\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},ZLqn:function(e,t,n){"use strict";var i=n("q1tI"),r=n("/7QA"),a=n("EuPq"),o=n("X7Ac"),s=n("eJ65"),l=n("EdhP"),c=n("+GjP"),d=n("Ue10"),u=function(e){var t=Object(c.e)("https://www.twitch.tv/"+e.login,{tt_medium:"live_embed",tt_content:"text_link"}),n=Object(r.d)("Watch live video from {displayName} on www.twitch.tv",{displayName:e.displayName||e.login},"ChannelShareButton"),u=Object(l.b)({channel:e.login},{textLink:{url:t,text:n},allowScrolling:!1,allowFullscreen:!0}),m="https://www.twitch.tv/embed/"+e.login+"/chat",p=Object(l.a)(m,{height:500,width:350,allowFullscreen:!1,allowScrolling:!1});return i.createElement(s.a,null,i.createElement(d.C,{type:d.I.Text,"data-a-target":"share-button",icon:d.Db.Share},Object(r.d)("Share","ChannelShareButton")),i.createElement(d.x,{direction:d.y.TopRight,size:d.z.Small,"data-a-target":"share-balloon"},i.createElement(d.fb,{padding:1},i.createElement(d.fb,{padding:{top:1,bottom:1},display:d.Da.Flex,justifyContent:d.eb.Between},i.createElement(o.a,{type:o.b.Twitter,text:e.title,"data-a-target":"twitter-share-button"}),i.createElement(o.a,{type:o.b.Facebook,"data-a-target":"facebook-share-button"}),i.createElement(o.a,{type:o.b.VKontakte,"data-a-target":"vkontakte-share-button"}),i.createElement(o.a,{type:o.b.Reddit,text:e.title,"data-a-target":"reddit-share-button"}),i.createElement(o.a,{type:o.b.Copy,"data-a-target":"copy-link-share-button"})),i.createElement(d.fb,null,i.createElement(d.fb,{padding:{top:1}},i.createElement(d.Ca,null,Object(r.d)("Embed Channel","ChannelShareButton")),i.createElement(a.a,{value:u})),i.createElement(d.fb,{padding:{top:1}},i.createElement(d.Ca,null,Object(r.d)("Embed Chat","ChannelShareButton")),i.createElement(a.a,{value:p}))))))};n.d(t,"a",function(){return u})},ZUUl:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var i=n("4rCz");function r(e,t){return function(n,r){e({dispatch:n,getState:r},t,i.r.apollo.client)}}function a(e,t){return function(n,r){e({dispatch:n,getState:r},t,i.r.apollo.client,i.q)}}},ZVTe:function(e,t,n){"use strict";var i=n("TSYQ"),r=n("q1tI"),a=n("EE1E"),o=(n("2e6W"),function(e){var t,n=e.userData.color;e.highContrastUsernameColor&&n&&(n="#"+Object(a.a)(n,e.theme));var o=[r.createElement("span",{key:"username-display",className:"chat-author__display-name","data-a-target":"chat-message-username","data-a-user":e.userData.userLogin,"data-test-selector":"message-username",style:{color:n}},e.userData.userDisplayName)];if(e.userData.isIntl){var s=i(((t={})["chat-author__intl-login"]=!e.highlighted,t["chat-author__intl-login--highlighted"]=e.highlighted,t));o.push(r.createElement("span",{key:"username-login",style:{color:n},className:s,"data-test-selector":"message-username-canonical"}," ("+e.userData.userLogin+")"))}return r.createElement("span",{key:e.userData.userID+"-authorlabel"},o)});n.d(t,!1,function(){return"message-username"}),n.d(t,!1,function(){return"message-username-canonical"}),n.d(t,!1,function(){return"chat-author__display-name"}),n.d(t,!1,function(){return"chat-author__intl-login"}),n.d(t,!1,function(){return"chat-author__intl-login--highlighted"}),n.d(t,"a",function(){return o})},ZbA5:function(e,t,n){"use strict";var i,r,a,o,s=n("mrSG"),l=n("TSYQ"),c=n("q1tI"),d=n("/7QA"),u=n("oB8h"),m=n("Ue10");n("kVMo");!function(e){e.HostingDot="stream-type-indicator__hosting-dot"}(o||(o={}));var p=((i={})[u.a.Live]="stream-type-indicator--live",i[u.a.Premiere]="stream-type-indicator--premiere",i[u.a.Rerun]="stream-type-indicator--rerun",i[u.a.WatchParty]="stream-type-indicator--rerun",i),h=((r={})[u.a.Premiere]=m.Db.VideoPremiere,r[u.a.Rerun]=m.Db.VideoRerun,r[u.a.WatchParty]=m.Db.VideoRerun,r),g=((a={})[u.a.Premiere]=m.Eb.Live,a[u.a.Rerun]=m.Eb.Inherit,a[u.a.WatchParty]=m.Eb.Inherit,a),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.render=function(){return c.createElement(m.Ob,{className:this.getClassNames(),color:m.R.Overlay,background:m.u.Overlay,padding:{x:.5},borderRadius:m.A.Small,display:m.Da.Flex},c.createElement(m.fb,{display:m.Da.Flex,alignItems:m.i.Center,margin:{right:.5}},this.getIcon()),c.createElement(m.Ca,{type:m.gc.Span},this.getLabel()))},t.prototype.getClassNames=function(){var e={"stream-type-indicator":!0};return e[p[this.props.type]]=!0,l(e)},t.prototype.getIcon=function(){return this.props.hosting?c.createElement(m.Ob,{borderRadius:m.A.Rounded,className:"stream-type-indicator__hosting-dot","data-test-selector":o.HostingDot}):this.props.type===u.a.Live?c.createElement(m.fb,{className:"stream-type-indicator__live-wrapper",display:m.Da.Flex,alignItems:m.i.Center},c.createElement(m.N,{status:m.P.Live,size:m.O.Small})):c.createElement(m.Cb,{asset:h[this.props.type],type:g[this.props.type],width:14,height:14})},t.prototype.getLabel=function(){if(this.props.hosting)return Object(d.d)("Hosting","StreamTypeIndicator");switch(this.props.type){case u.a.Live:return Object(d.d)("LIVE","StreamTypeIndicator");case u.a.Premiere:return Object(d.d)("Premiere","StreamTypeIndicator");case u.a.Rerun:case u.a.WatchParty:return Object(d.d)("Rerun","StreamTypeIndicator");default:return""}},t}(c.Component);n.d(t,!1,function(){return o}),n.d(t,"a",function(){return f})},ZfCj:function(e,t,n){},Zkco:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("q1tI"),r=n("cys1"),a=n("oK83"),o=function(e){var t=e.message,n={disableLinks:!0,forceClipsNetworkRequest:!0,messageAuthorID:e.author.id,messageSourceID:t.id,emoteSourceType:a.a.vod};return i.createElement("span",{key:t.id,style:{color:e.allowActionTextColors&&t.isAction?t.userColor:""}},Object(r.f)(t.tokens,n,!0))}},ZtEv:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"e",function(){return a}),n.d(t,"a",function(){return o});var i,r,a,o,s=n("0Log");n.d(t,"d",function(){return s.ModerationActions}),function(e){e[e.Message=0]="Message",e[e.ExtensionMessage=1]="ExtensionMessage",e[e.Moderation=2]="Moderation",e[e.ModerationAction=3]="ModerationAction",e[e.TargetedModerationAction=4]="TargetedModerationAction",e[e.AutoMod=5]="AutoMod",e[e.SubscriberOnlyMode=6]="SubscriberOnlyMode",e[e.FollowerOnlyMode=7]="FollowerOnlyMode",e[e.SlowMode=8]="SlowMode",e[e.EmoteOnlyMode=9]="EmoteOnlyMode",e[e.R9KMode=10]="R9KMode",e[e.Connected=11]="Connected",e[e.Disconnected=12]="Disconnected",e[e.Reconnect=13]="Reconnect",e[e.Hosting=14]="Hosting",e[e.Unhost=15]="Unhost",e[e.Hosted=16]="Hosted",e[e.Subscription=17]="Subscription",e[e.Resubscription=18]="Resubscription",e[e.GiftPaidUpgrade=19]="GiftPaidUpgrade",e[e.AnonGiftPaidUpgrade=20]="AnonGiftPaidUpgrade",e[e.SubGift=21]="SubGift",e[e.AnonSubGift=22]="AnonSubGift",e[e.Clear=23]="Clear",e[e.RoomMods=24]="RoomMods",e[e.RoomState=25]="RoomState",e[e.Raid=26]="Raid",e[e.Unraid=27]="Unraid",e[e.Ritual=28]="Ritual",e[e.Notice=29]="Notice",e[e.Info=30]="Info",e[e.BadgesUpdated=31]="BadgesUpdated",e[e.Purchase=32]="Purchase",e[e.BitsCharity=33]="BitsCharity",e[e.CrateGift=34]="CrateGift",e[e.RewardGift=35]="RewardGift",e[e.SubMysteryGift=36]="SubMysteryGift",e[e.AnonSubMysteryGift=37]="AnonSubMysteryGift",e[e.FirstCheerMessage=38]="FirstCheerMessage",e[e.BitsBadgeTierMessage=39]="BitsBadgeTierMessage"}(i||(i={})),function(e){e[e.Post=0]="Post",e[e.Action=1]="Action",e[e.PostWithMention=2]="PostWithMention"}(r||(r={})),function(e){e[e.Ban=0]="Ban",e[e.Timeout=1]="Timeout",e[e.Delete=2]="Delete"}(a||(a={})),function(e){e[e.MessageRejectedPrompt=0]="MessageRejectedPrompt",e[e.CheerMessageRejectedPrompt=1]="CheerMessageRejectedPrompt",e[e.MessageRejected=2]="MessageRejected",e[e.MessageAllowed=3]="MessageAllowed",e[e.MessageDenied=4]="MessageDenied",e[e.CheerMessageDenied=5]="CheerMessageDenied",e[e.CheerMessageTimeout=6]="CheerMessageTimeout",e[e.MessageModApproved=7]="MessageModApproved",e[e.MessageModDenied=8]="MessageModDenied"}(o||(o={}))},ZuCe:function(e,t,n){},ZuiC:function(e,t,n){"use strict";n.d(t,"n",function(){return a}),n.d(t,"t",function(){return o}),n.d(t,"l",function(){return s}),n.d(t,"s",function(){return l}),n.d(t,"m",function(){return c}),n.d(t,"r",function(){return d}),n.d(t,"o",function(){return u}),n.d(t,"u",function(){return m}),n.d(t,"p",function(){return p}),n.d(t,"v",function(){return h}),n.d(t,"d",function(){return g}),n.d(t,"z",function(){return f}),n.d(t,"e",function(){return b}),n.d(t,"A",function(){return v}),n.d(t,"f",function(){return k}),n.d(t,"B",function(){return C}),n.d(t,"c",function(){return y}),n.d(t,"y",function(){return S}),n.d(t,"k",function(){return E}),n.d(t,"q",function(){return N}),n.d(t,"i",function(){return _}),n.d(t,"E",function(){return D}),n.d(t,"h",function(){return w}),n.d(t,"D",function(){return O}),n.d(t,"g",function(){return I}),n.d(t,"C",function(){return T}),n.d(t,"a",function(){return M}),n.d(t,"w",function(){return L}),n.d(t,"j",function(){return R}),n.d(t,"F",function(){return x}),n.d(t,"b",function(){return F}),n.d(t,"x",function(){return A});var i=n("mrSG"),r=n("/7QA"),a="vodChat.comments.DELETED_SUCCESS",o=function(e){return i.__assign({type:a},e)},s="vodChat.comments.CREATED_SUCCESS",l=function(e){return i.__assign({type:s},e)},c="vodChat.comments.CREATE_FAILED",d=function(e){return{type:c,createError:e}},u="vodChat.comments.DISPLAY_ERROR",m=function(e){return{type:u,errorMessage:e}},p="vodChat.comments.UPDATED_SUCCESS",h=function(e){return i.__assign({type:p},e)},g="vodChat.comments.CURSOR_RECEIVED",f=function(e){return i.__assign({type:g},e)},b="vodChat.comments.OFFSET_RECEIVED",v=function(e){return i.__assign({type:b},e)},k="vodChat.comments.QUERY_FAILED",C=function(){return{type:k}},y="vodChat.comments.CLEARED",S=function(){return{type:y}},E="vodChat.comments.COOLDOWN_ENDED",N=function(){return{type:E}},_="vodChat.comments.SYNC_ENABLED",D=function(){return{type:_}},w="vodChat.comments.SYNC_DISABLED",O=function(){return{type:w}},I="vodChat.comments.REPLAY_FILTER_CHANGED",T=function(e){return r.n.set("videoChat.is_replay_mode",e),{type:I,isReplayFilterOn:e}},M="vodChat.comments.CHAT_REPLAY_ERROR_HIDE",L=function(){return{type:M}},R="vodChat.comments.TIMESTAMP_MODE_CHANGED",x=function(e){return r.n.set("videoChat.hide_timestamps",e),{type:R,hideTimestamps:e}},F="vodChat.comments.REQUEST_CHAT_SETTINGS",A=function(){return{type:F,isReplayFilterOn:r.n.get("videoChat.is_replay_mode",!1),hideTimestamps:r.n.get("videoChat.hide_timestamps",!1)}}},a1OF:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return m}),n.d(t,"e",function(){return p}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return g});var i=n("mrSG"),r=n("/7QA"),a=n("oe5X"),o=n("0FG4"),s=n("kRBY"),l=n("60o1"),c=["#FF0000","#0000FF","#008000","#B22222","#FF7F50","#9ACD32","#FF4500","#2E8B57","#DAA520","#D2691E","#5F9EA0","#1E90FF","#FF69B4","#8A2BE2","#00FF7F"],d={};function u(e,t,n,r,a,o,s){void 0===r&&(r=null),void 0===a&&(a=!1),void 0===o&&(o=!1),void 0===s&&(s=!1);var c=Object(l.a)(t.displayName,t.username);return{badges:t.badges||{},bits:t.bits,user:i.__assign({},c,{userLogin:t.username,userID:t.userID,userType:t.userType,color:t.color||m(t.userID)}),messageParts:p(e,t.emotes||{},t.bits,n,t.username,r||void 0),deleted:a,banned:s,hidden:o,timestamp:Date.now()}}function m(e,t){return void 0===t&&(t=15),"number"!=typeof d[e]&&(d[e]=Math.floor(Math.random()*t)),c[d[e]]}function p(e,t,n,i,l,c){var d=Object(s.e)(r.q.store.getState()),u={cheers:n?i:void 0,emotes:{type:o.a.Position,map:t},links:{parseClips:!0,parseVods:!0},mentions:{senderLogin:l,sessionUser:d},flags:c};return Object(a.a)(e,u)}function h(e){return e.match(/[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF]/g)}function g(e,t){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/"+Math.min(Math.ceil(t),3)+".0"}},a2UF:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("mrSG"),r=n("yR8l"),a=n("Pub/"),o=n("HzXE"),s=n("1Rv/");function l(e){var t=this;return Object(r.a)(s,{props:function(n){return{unbanUserMutation:function(r){return i.__awaiter(t,void 0,void 0,function(){var t;return i.__generator(this,function(s){switch(s.label){case 0:if(t=e(n.ownProps).channelID,!n.mutate||!t)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.mutate({variables:{input:{channelID:t,bannedUserLogin:r}},update:function(e,n){return function(e,t,n){if(t&&t.data&&t.data.unbanUserFromChatRoom&&t.data.unbanUserFromChatRoom.ban&&t.data.unbanUserFromChatRoom.ban.bannedUser&&t.data.unbanUserFromChatRoom.ban.bannedUser.id){var r=Object(a.a)(e,n,t.data.unbanUserFromChatRoom.ban.bannedUser.id);if(!r)return;e.writeQuery({query:o,variables:{targetUserID:t.data.unbanUserFromChatRoom.ban.bannedUser.id,channelID:n},data:i.__assign({},r,{chatRoomBanStatus:null})})}}(e,n,t)}})];case 2:return[2,s.sent().data];case 3:throw s.sent(),new Error("Unable to unban user");case 4:return[3,6];case 5:throw new Error("Unban user mutation is not ready");case 6:return[2]}})})}}}})}},a5fV:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var i=n("/7QA");function r(e,t){return e/Math.pow(10,t)}function a(e,t){return Object(i.f)(e,{style:"currency",currency:t})}},a7aT:function(e,t,n){},aF6k:function(e,t,n){"use strict";function i(e){var t=Math.random().toString(36).substring(2,6);return e+"-"+Date.now()+"-"+t}n.d(t,"a",function(){return i})},ahza:function(e,t,n){"use strict";var i=n("cr+I"),r=n("b6Yk");var a=n("pU2t");n.d(t,"a",function(){return s}),n.d(t,"b",function(){return m}),n.d(t,"g",function(){return p}),n.d(t,"h",function(){return h}),n.d(t,"c",function(){return g}),n.d(t,"e",function(){return f}),n.d(t,"d",function(){return b}),n.d(t,"f",function(){return v});var o="content_offset_seconds",s="cursor",l="comment_id";function c(e){return function(e){return"/v5/videos/"+e}(e)+"/comments"}function d(e){return u(e).toString()+"/replies"}function u(e){return"/v5/videos/comments/"+e}function m(e){var t;t=f(e)?d(e.parentId):c(e.contentId);var n={body:Object(a.g)(e)};return r.a.post(t,n)}function p(e){try{if(function(e){return"commentID"in e}(e))return function(e){var t={};void 0!==e.cursor&&(t[s]=e.cursor);var n=d(e.commentID)+"?"+i.stringify(t);return r.a.getOrThrow(n).then(function(e){return Object(a.e)(e.body)})}(e);var t={};b(e)?t[s]=e.cursor:v(e)&&(t[o]=""+e.offset,void 0!==e.highlightedMessageID&&(t[l]=e.highlightedMessageID));var n=c(e.videoID)+"?"+i.stringify(t);return r.a.getOrThrow(n).then(function(t){return Object(a.d)(t.body,e.bitsConfig)})}catch(e){return Promise.reject(e)}}function h(e){var t=u(e.comment.id),n={body:{state:e.state}};return r.a.putOrThrow(t,n).then(function(t){return Object(a.f)(t.body,e.comment)})}function g(e){var t=u(e.id);return r.a.delete(t)}function f(e){return"parentId"in e}function b(e){return"cursor"in e}function v(e){return"offset"in e}},axcf:function(e,t,n){},b5C3:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("q1tI"),r=n("vHGB"),a=function(e){var t=e.badgesToRender,n=e.badgeSets;if(!t)return null;var a=[];!function(e){return Array.isArray(e)}(t)?function(e){return!Array.isArray(e)}(t)&&(a=Object.keys(t).map(function(a){var o=t[a],s=n.getBadge(a,o);return null===s?null:e.usesSchemaBadges?i.createElement(r.a,{key:s.setID+"/"+s.version,schemaBadge:s}):i.createElement(r.a,{key:s.setID+"/"+s.version,badge:s})})):a=t.map(function(t){var a=n.getBadge(t.setID,t.version);return null===a?null:e.usesSchemaBadges?i.createElement(r.a,{key:a.setID+"/"+a.version,schemaBadge:a}):i.createElement(r.a,{key:a.setID+"/"+a.version,badge:a})});var o=a.filter(function(e){return null!==e});return i.createElement("span",null,o)};a.displayName="BadgeList"},b6Yk:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),r=n("/7QA"),a=n("kRBY"),o=function(){function e(){}return e.get=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(r){switch(r.label){case 0:return[4,this.request(e,i.__assign({},t,{method:"GET"}),n)];case 1:return[2,r.sent()]}})})},e.getOrThrow=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(r){switch(r.label){case 0:return[4,this.requestOrThrow(e,i.__assign({},t,{method:"GET"}),n)];case 1:return[2,r.sent()]}})})},e.put=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(r){switch(r.label){case 0:return[4,this.request(e,i.__assign({},t,{method:"PUT"}),n)];case 1:return[2,r.sent()]}})})},e.putOrThrow=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(r){switch(r.label){case 0:return[4,this.requestOrThrow(e,i.__assign({},t,{method:"PUT"}),n)];case 1:return[2,r.sent()]}})})},e.post=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(r){switch(r.label){case 0:return[4,this.request(e,i.__assign({},t,{method:"POST"}),n)];case 1:return[2,r.sent()]}})})},e.postOrThrow=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(r){switch(r.label){case 0:return[4,this.requestOrThrow(e,i.__assign({},t,{method:"POST"}),n)];case 1:return[2,r.sent()]}})})},e.delete=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(r){switch(r.label){case 0:return[4,this.request(e,i.__assign({},t,{method:"DELETE"}),n)];case 1:return[2,r.sent()]}})})},e.deleteOrThrow=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(r){switch(r.label){case 0:return[4,this.requestOrThrow(e,i.__assign({},t,{method:"DELETE"}),n)];case 1:return[2,r.sent()]}})})},e.request=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){var r,a,o,s;return i.__generator(this,function(l){switch(l.label){case 0:return t=this.constructOptions(t,n),r=t.headers?t.headers["Content-Type"]:void 0,a=this.serialize(t.body,r),o=i.__assign({},t,{body:a}),[4,this._fetch(e,o)];case 1:return s=l.sent(),[4,this.constructLegacyAPIResponse(s)];case 2:return[2,l.sent()]}})})},e.requestOrThrow=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){var r;return i.__generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.request(e,t,n)];case 1:if((r=a.sent()).requestError)throw r.requestError;if(r.error)throw new Error("Error while sending legacy-api request: "+r.error.status+" - "+r.error.message);return[2,i.__assign({},r,{body:r.body})];case 2:throw a.sent();case 3:return[2]}})})},e.getAPIURL=function(e){return new URL(e,r.q.config.apiBaseURL)},e.constructLegacyAPIResponse=function(e){return i.__awaiter(this,void 0,Promise,function(){var t,n,r,a;return i.__generator(this,function(i){switch(i.label){case 0:t={status:e.status},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.json()];case 2:return n=i.sent(),e.ok?t.body=n:t.error=n,[3,4];case 3:return r=i.sent(),e.headers&&e.headers.get&&(a=e.headers.get("Content-Type"))&&-1!==a.indexOf("application/json")&&(t.requestError=r),[3,4];case 4:return[2,t]}})})},e._fetch=function(e,t){return void 0===t&&(t={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(n){switch(n.label){case 0:return[4,fetch(this.getAPIURL(e).toString(),t)];case 1:return[2,n.sent()]}})})},e.constructOptions=function(e,t){return e=Object.assign({},e,{headers:i.__assign({},this.getDefaultHeaders(e,t),e.headers)})},e.serialize=function(e,t){return"application/json; charset=UTF-8"===t?JSON.stringify(e):"string"==typeof e?e:e&&FormData.prototype.isPrototypeOf(e)?e:e?(this.logger.error(new Error("Could not serialize this request body for the content-type provided."),"attempting to serialize object with a non-JSON content-type",{contentType:t}),null):null},e.getDefaultHeaders=function(e,t){var n=r.q.store.getState(),i={Accept:"application/vnd.twitchtv.v"+(t.version||5)+"+json; charset=UTF-8","Accept-Language":"en-us","Client-ID":r.q.config.legacyClientID,"X-Requested-With":"XMLHttpRequest"};e.body&&FormData.prototype.isPrototypeOf(e.body)||(i["Content-Type"]="application/json; charset=UTF-8");var o=Object(a.e)(n);return o&&(i.Authorization="OAuth "+o.authToken,o.legacyCSRFToken&&(i["Twitch-Api-Token"]=o.legacyCSRFToken)),t.excludeHeaders&&t.excludeHeaders.forEach(function(e){i[e]&&delete i[e]}),i},e.logger=r.q.logger.withCategory("legacy-api"),e}()},bRMw:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return s});var i=n("/7QA"),r=n("kRBY"),a="cc_v2_whitelist";function o(e,t){var n=i.b.get(e,[]),a=i.q.store.getState();return n.includes(t)||n.includes(t+"-staff")&&Object(r.g)(a)||!!(n.includes(t+"-staff")&&a.session&&a.session.user&&a.session.user.login===t)}function s(e){return o(a,e)}},bTcf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoShareBox_CollectionTrackingMeta"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"creatorID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"creatorID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:117}};n.loc.source={body:"query VideoShareBox_CollectionTrackingMeta($creatorID: ID!) {\nuser(id: $creatorID) {\nid\nlogin\nroles {\nisPartner\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},bdHe:function(e,t,n){"use strict";var i=n("q1tI"),r=n("Ue10"),a=function(){return i.createElement(r.J,null,i.createElement(r.r,{ratio:r.s.Aspect16x9},i.createElement(r.sb,null)),i.createElement(r.fb,{alignItems:r.i.Center,justifyContent:r.eb.Center,display:r.Da.Flex,flexDirection:r.Ga.Column,fullHeight:!0,fullWidth:!0,position:r.tb.Absolute},i.createElement(r.K,null,i.createElement(r.fb,{alignItems:r.i.Center,justifyContent:r.eb.Center,display:r.Da.Flex,flexDirection:r.Ga.Column},i.createElement(r.fb,{display:r.Da.InlineBlock,margin:{bottom:1}},i.createElement(r.sb,{height:50,width:50,overlay:!0})),i.createElement(r.Ca,null,i.createElement(r.sb,{lineCount:1,width:75,overlay:!0})),i.createElement(r.Ca,null,i.createElement(r.sb,{lineCount:1,width:150,overlay:!0}))))))};n.d(t,"a",function(){return o});var o=function(){for(var e=[],t=0;t<20;t++)e.push(i.createElement(r.fb,{margin:{bottom:2},key:t},i.createElement(a,null)));return i.createElement(r.fb,{display:r.Da.Flex,flexGrow:1,fullHeight:!0},i.createElement(r.mc,{placeholderItems:10,center:!0,gutterSize:r.oc.Small,childWidth:r.nc.Large},e))}},bfuM:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("gcd7"),s=n("fezU"),l=n("oK83"),c=n("NNSq"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleUserCardCommand=function(e){return t.openUserCard(e)},t.openUserCard=function(e){return{deferred:new Promise(function(n,r){return i.__awaiter(t,void 0,void 0,function(){return i.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Object(c.a)(e)];case 1:return t.sent()?(this.props.onUserCommand(e,l.b.user_command,""),[3,3]):[2,n({notice:Object(a.d)("No user matching that login.","UserCardCommandHandler")})];case 2:return t.sent(),[2,r({})];case 3:return[2,n({})]}})})})}},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement(o.a,{channelLogin:this.props.channelLogin,command:"user",handler:this.handleUserCardCommand})},t}(r.Component);var u=Object(s.b)(function(e){return{onUserCommand:e.onShowViewerCard}})(d);n.d(t,!1,function(){return d}),n.d(t,"a",function(){return u})},bhOa:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("gcd7"),s=n("ygQa"),l=n("WytW"),c=n("Ue10"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updateChatColor=function(e){var n=Object(l.l)("/color "+e);if(n&&n.color){var i=n.color;return{deferred:t.props.updateChatColorMutation(i).then(function(){return{notice:Object(a.d)("Your color has been changed.","ColorCommandHandler")}}).catch(function(){return{notice:Object(a.d)("Unable to change your color.","ColorCommandHandler")}})}}return{deferred:Promise.resolve({notice:Object(a.d)('Usage: "/color [color]" - Change your username color. Color must be in hex (#000000) or one of the following: Blue, BlueViolet, CadetBlue, Chocolate, Coral, DodgerBlue, Firebrick, GoldenRod, Green, HotPink, OrangeRed, Red, SeaGreen, SpringGreen, YellowGreen.',"ColorCommandHandler")})}},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement(c.fb,{display:c.Da.Hide},r.createElement(o.a,{channelLogin:this.props.channelLogin,command:"color",handler:this.updateChatColor}))},t}(r.Component),u=Object(s.a)()(d);n.d(t,"a",function(){return u})},boOy:function(e,t,n){},br9A:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var i=n("mrSG"),r=n("/7QA"),a=n("2xye"),o=n("I6K6"),s=n("RuiO"),l={BuyContinueSub:"buy_continue_sub",BuyCustomMysteryGift:"buy_custom_mystery_gift",BuyGiftSub:"buy_gift_sub",BuyGiftToPaidUpgrade:"buy_gift_to_paid_upgrade",BuyMysteryGift:"buy_mystery_gift",BuyPaidUpgrade:"buy_paid_upgrade",ChangeTier:"change_tier",ClickAnonymousGiftCheckbox:"anonymous_gift_click",ClickBack:"back_top_level",ClickCancelAndRefund:"click_cancel_and_refund",ClickCancelPaidUpgrade:"click_cancel_paid_upgrade",ClickChangePaymentMethod:"click_change_payment_method",ClickChangeSubTier:"click_change_sub_tier",ClickCheckout:"click_checkout_button",ClickDisableGift:"click_disable_gift_button",ClickDNRSub:"click_dnr_sub_button",ClickGiftSubOptions:"gift_options_click",ClickMoreSubOptions:"more_options_click",ClickPaidUpgrade:"click_paid_upgrade",ClickPrimeFAQ:"click_prime_faq",ClickResubscribe:"click_resubscribe",ClickSignupForPrime:"click_signup_for_prime",CloseSubMenu:"close_subscribe_menu",GiftASub:"gift_a_sub",OpenSubMenu:"open_subscribe_menu",SubWithPrime:"samus_spend_credit"};function c(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,l,c,d,u,m,p,h,g,f,b,v;return i.__generator(this,function(i){switch(i.label){case 0:t=r.p.getVideoPlayerTrackingData().vodID,n=!!t,l={channelID:e.channelID,withVideo:!1},n&&(l.withVideo=!0,l.videoID=t),c=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.q.apollo.client.query({query:s,variables:l})];case 2:return c=i.sent(),[3,4];case 3:return d=i.sent(),r.k.warn(d,"Failed to make query for channel info in FollowEvent reporting.",{channelID:e.channelID}),[3,4];case 4:return u=c&&c.data&&c.data.user||null,c&&!u&&r.k.warn("Query for channel info in SubEvent reporting returned no data.",{channelID:e.channelID}),m=null,c&&n&&((p=c&&c.data&&c.data.video)?m=Object(o.a)(p.broadcastType):r.k.warn("Query for video info in SubEvent reporting returned no data.",{currentVideoID:t})),h=u&&u.self,g=h?!!h.subscriptionBenefit:null,f=h&&h.subscriptionBenefit&&h.subscriptionBenefit.purchasedWithPrime||!1,b=h?h.canPrimeSubscribe:null,v={action:e.action,button_cta:e.buttonCTA,can_subscribe:b,channel:e.channelLogin,channel_id:e.channelID,checkout_button_tier:e.checkoutButtonTier,cumulative_tenure_months:e.cumulativeTenureMonths,days_to_next_tenure_anniversary:e.daysToNextTenureAnniversary||null,has_sub_credit:e.hasSubCredit||null,host_channel:e.hostChannelLogin,host_channel_id:e.hostChannelID,is_anonymous:e.isAnonymous,is_menu_open:e.isMenuOpen||null,is_single_month:e.isSingleMonth,is_subscribed:g,is_subscribed_current_tier:h&&h.subscriptionBenefit&&h.subscriptionBenefit.tier,mystery_gift_count:e.mysteryGiftCount||null,sub_location:e.sub_location,sub_recipient:e.giftRecipient||null,modal:e.modal,modal_level:e.modalLevel||"",show_prime_content:e.showPrimeContent||!1,show_resub:u?b&&f:null,streak_number:e.streakNumber||null,vod_id:t,vod_type:m,viewport_height:window.innerHeight,viewport_width:window.innerWidth},r.p.track(a.SpadeEventType.Subscription,v),[2]}})})}},"c+1r":function(e,t,n){},cERj:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i,r=n("mrSG"),a=n("q1tI"),o=n("9C/b"),s=n("/7QA"),l=n("eJ65"),c=n("+GjP"),d=n("vRsq"),u=n("UNiU"),m=n("Ue10");!function(e){e.ButtonText="button-text",e.FilterText="filter-text"}(i||(i={}));var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.getFilters(),t=e.find(function(e){return!!e.selected});return a.createElement(m.fb,{padding:{right:1}},a.createElement(m.fb,{padding:{bottom:.5}},a.createElement(m.Ca,{bold:!0},Object(s.d)("Showing","VideoFilter"))),a.createElement(l.a,{hideBalloonOnInsideClick:!0},a.createElement(m.C,{dropdown:!0,type:m.I.Hollow,"data-test-selector":i.ButtonText,"data-a-target":"video-type-filter-dropdown"},t?t.label:e[0].label),a.createElement(m.x,{noTail:!0,direction:m.y.Bottom},this.renderFilterList())))},t.prototype.renderFilterList=function(){return this.getFilters().map(this.renderFilter.bind(this))},t.prototype.renderFilter=function(e){var t=!!e.selected;return a.createElement(m.cb,{key:e.label,linkTo:t?this.props.location:this.filterLink(e.filter),selected:t,"data-a-target":"video-type-filter-"+e.filter},a.createElement(m.fb,{padding:{x:1,y:.5},"data-test-selector":i.FilterText},e.label))},t.prototype.getFilters=function(){var e=[{label:Object(s.d)("All Videos","VideoFilter2"),filter:d.e.All},{label:Object(s.d)("Past Broadcasts","VideoFilter2"),filter:d.e.PastBroadcasts},{label:Object(s.d)("Highlights","VideoFilter2"),filter:d.e.Highlights},{label:Object(s.d)("Clips","VideoFilter2"),filter:d.e.Clips},{label:Object(s.d)("Uploads","VideoFilter2"),filter:d.e.Uploads},{label:Object(s.d)("Past Premieres","VideoFilter2"),filter:d.e.PastPremieres},{label:Object(s.d)("Collections","VideoFilter2"),filter:d.e.Collections}],t=Object(u.a)();t&&e.unshift({label:Object(s.d)("Featured","CustomShelves"),filter:d.e.Featured});var n;return n=Object(d.v)(this.props.location.search),e.forEach(function(e){!n&&t&&e.filter===d.e.Featured?e.selected=!0:n||t||e.filter!==d.e.All?n&&n===e.filter&&(e.selected=!0):e.selected=!0}),e},t.prototype.filterLink=function(e){var t;return e?Object(d.j)(this.props.channelLogin,this.props,((t={})[d.c]=e,t)):Object(c.c)(this.props.location,d.c)},t}(a.Component),h=Object(o.a)(p)},cMjZ:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("o4DC");function r(e){return e&&Object(i.c)(e)||""}},cnlr:function(e,t,n){"use strict";var i,r=n("mrSG"),a=n("q1tI"),o=n("/MKj"),s=n("fvjX"),l=n("/7QA"),c=n("Lmqf"),d=n.n(c),u=n("yR8l"),m=n("1/iK"),p=n("y5D0"),h=n("ugtu"),g=n("D7An");!function(e){e.Learn="learn",e.Support="support",e.LiveUp="liveup",e.Recommendation="rec",e.Bullet="bullet"}(i||(i={}));var f,b,v=n("Ue10"),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={upsellCenterChannelsAssignment:t.props.showDefault?null:function(){var e=l.q.experiments.getAndTrackAssignment(g.b.WebSideNavUpsellCenterChannels);return e===i.Learn||e===i.Support||e===i.LiveUp||e===i.Recommendation||e===i.Bullet?e:null}()},t}return r.__extends(t,e),t.prototype.render=function(){return a.createElement(v.fb,{margin:{y:1}},this.renderText())},t.prototype.renderText=function(){if(!this.props.data||this.props.showDefault||!this.state.upsellCenterChannelsAssignment)return this.renderDefault();switch(this.state.upsellCenterChannelsAssignment){case i.Learn:return this.renderTextContent(Object(l.d)("Want to master <x:bold>{game}</x:bold>?",{game:this.props.data.game,"x:bold":h.k},"UpsellCenterText"),Object(l.d)("Sign up to learn from the best.","UpsellCenterText"));case i.Support:return this.renderTextContent(Object(l.d)("Sign up and follow to support <x:bold>{name}</x:bold> and all your favorite streamers!",{name:this.props.data.channelDisplayName,"x:bold":h.k},"UpsellCenterText"));case i.LiveUp:return this.renderTextContent(Object(l.d)("Late to the show?","UpsellCenterText"),Object(l.d)("Sign up and get notifications next time <x:bold>{name}</x:bold> goes live.",{name:this.props.data.channelDisplayName,"x:bold":h.k},"UpsellCenterText"));case i.Recommendation:return this.renderTextContent(Object(l.d)("Discover more streamers like <x:bold>{name}</x:bold>!",{name:this.props.data.channelDisplayName,"x:bold":h.k},"UpsellCenterText"),Object(l.d)("Sign up to see which channels we've picked just for you.","UpsellCenterText"));case i.Bullet:return this.renderBulletPoints(Object(l.d)("Sign up to experience the best of <x:bold>{name}</x:bold>:",{name:this.props.data.channelDisplayName,"x:bold":h.k},"UpsellCenterText"),[Object(l.d)("Chat with other fans","UpsellCenterText"),Object(l.d)("Capture your favorite moments","UpsellCenterText"),Object(l.d)("Watch in Dark Mode!","UpsellCenterText")]);default:return this.renderDefault()}},t.prototype.renderDefault=function(){return this.renderTextContent(Object(l.d)("Join the Twitch community!","UpsellCenterText"),Object(l.d)("Discover the best live streams anywhere.","UpsellCenterText"))},t.prototype.renderTextContent=function(e,t){return a.createElement(a.Fragment,null,a.createElement(v.Ca,{color:v.R.Base,fontSize:v.Ia.Size4},e),a.createElement(v.Ca,{color:v.R.Alt2,fontSize:v.Ia.Size5},t))},t.prototype.renderBulletPoints=function(e,t){var n=t.map(function(e,t){return a.createElement(v.fb,{key:"upsell-center-text-"+t,display:v.Da.Flex,flexDirection:v.Ga.Row,alignItems:v.i.Start},a.createElement(v.Cb,{type:v.Eb.Alt2,asset:v.Db.Check}),a.createElement(v.fb,{margin:{left:1},textAlign:v.cc.Left},a.createElement(v.Ca,{color:v.R.Alt2,fontSize:v.Ia.Size6},e)))});return a.createElement(a.Fragment,null,a.createElement(v.Ca,{color:v.R.Base,fontSize:v.Ia.Size4},e),a.createElement(v.fb,{margin:{top:1}},n))},t}(a.Component),C=n("2xye");!function(e){e.SideNav="sidenav"}(f||(f={})),function(e){e.Upsell="upsell"}(b||(b={}));var y=n("Ve5Q"),S=(n("wqI2"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.impressionEventFired=!1,t.signup=function(){!function(e){var t=r.__assign({section:f.SideNav,click_subsection:b.Upsell},e);l.p.track(C.SpadeEventType.ItemClick,t)}(),t.props.signup()},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.trackImpression()},t.prototype.componentDidUpdate=function(){this.trackImpression()},t.prototype.render=function(){return a.createElement(v.Ob,{background:v.u.AccentAlt2,display:v.Da.Flex,flexDirection:v.Ga.Column,padding:{y:2,x:1},margin:1,borderRadius:v.A.Large},this.renderImage(),a.createElement(v.fb,{textAlign:v.cc.Center},this.renderText(),a.createElement(v.C,{onClick:this.signup,size:v.G.Large},a.createElement(v.fb,{padding:{x:1}},a.createElement(v.Ca,{color:v.R.Base},Object(l.d)("Sign up","UpsellCenter"))))))},t.prototype.renderText=function(){if(!this.props.channelLogin)return a.createElement(k,{showDefault:!0});if(this.props.data&&this.props.data.user){var e={game:this.props.data.user.broadcastSettings&&this.props.data.user.broadcastSettings.game&&this.props.data.user.broadcastSettings.game.displayName||"",channelDisplayName:this.props.data.user.displayName||""};return a.createElement(k,{data:e})}},t.prototype.renderImage=function(){var e=a.createElement(v.Y,{alt:Object(l.d)("Upsell Center","UpsellCenter"),src:d.a});return this.props.channelLogin&&this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL?a.createElement(v.fb,{position:v.tb.Relative},a.createElement(v.fb,{className:"upsell-center__avatar",position:v.tb.Absolute,zIndex:v.xc.Above},a.createElement(v.t,{src:this.props.data.user.profileImageURL,alt:Object(l.d)("{displayName}'s Profile Image",{displayName:this.props.data.user.displayName||""},"UpsellCenter"),borderRadius:v.A.Large,size:40})),e):e},t.prototype.trackImpression=function(){this.impressionEventFired||(!function(e){var t=r.__assign({section:f.SideNav},e);l.p.track(C.SpadeEventType.ItemDisplay,t)}(),this.impressionEventFired=!0)},t}(a.PureComponent));var E=Object(s.compose)(Object(u.a)(y,{options:function(e){return{variables:{login:e.channelLogin||""}}},skip:function(e){return!e.channelLogin}}),Object(o.connect)(null,function(e){return Object(s.bindActionCreators)({signup:function(){return Object(p.g)(m.a.SideNavUpsellCenter)}},e)}))(S),N=n("kRBY"),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return this.props.isLoggedIn||this.props.collapsed?null:a.createElement(E,r.__assign({},this.props))},t}(a.PureComponent);var D=Object(o.connect)(function(e){return{collapsed:!e.ui.sideNavExpanded,isLoggedIn:Object(N.f)(e)}})(_);n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){return S}),n.d(t,!1,function(){return _}),n.d(t,"a",function(){return D})},cpJf:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return o}),function(e){e.Chat="stream_chat",e.Feeds="feeds",e.Room="chatroom",e.Whisper="whisper",e.VodChat="vod-chat"}(i||(i={}));var r,a={TriHard:{count:196568036},Kappa:{count:192158118},"4Head":{count:155758710},PogChamp:{count:151485090},cmonBruh:{count:146352878},BibleThump:{count:56472964},WutFace:{count:45069031},Kreygasm:{count:41387580},DansGame:{count:38097659},hi5F:{count:34986404},SMOrc:{count:34734484},KappaPride:{count:34262839},VoHiYo:{count:27886434},SwiftRage:{count:24561900},ResidentSleeper:{count:24438298},EleGiggle:{count:19891526},FailFish:{count:19118343},NotLikeThis:{count:18802905},Keepo:{count:18351415},BabyRage:{count:18220906},MingLee:{count:18026207},pbfSSH:{count:16911241},forsenE:{count:14960299},HeyGuys:{count:14851569},ANELE:{count:14648986},PJSalt:{count:14438861}},o=["354","49106","4339","48","25","55338","70433","1902","68856","81103","76171","27509"];!function(e){e.Web="WEB",e.IOS="IOS",e.Android="ANDROID"}(r||(r={}))},cr2a:function(e,t,n){},csJo:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_Collection"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCurrentUser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"collectionID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCollection"},directives:[]}]}}]}}],loc:{start:0,end:310}};i.loc.source={body:'#import "twilight/features/channel/queries/channel-current-user.gql"\n#import "twilight/features/channel/queries/channel-collection.gql"\nquery ChannelRoot_Collection(\n$collectionID: ID!\n$includeChanlets: Boolean!\n) {\ncurrentUser {\n...channelCurrentUser\n}\ncollection(id: $collectionID) {\n...channelCollection\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}i.definitions=i.definitions.concat(a(n("NJiF").definitions)),i.definitions=i.definitions.concat(a(n("vtET").definitions)),e.exports=i},cw0r:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("wUQP"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){return Object(a.c)(this.props.name)?this.props.children:null},t}(r.Component);n.d(t,"a",function(){return o})},cys1:function(e,t,n){"use strict";var i=n("q1tI"),r=n("/7QA"),a=n("gvGA"),o=n("5zf8"),s=n("4rCz"),l=n("x0+1"),c=n("oJmH"),d=n("/MKj"),u=n("kRBY"),m=n("fezU"),p=n("mrSG"),h=n("D7An"),g=n("j0ar"),f="emote_card",b="emote_card_whitelist";var v=n("oK83"),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emoteClickHandler=function(e){t.props.emote.emoteID&&t.props.onEmoteClick({channelID:t.props.channelID||"",channelLogin:t.props.channelLogin||"",emoteID:t.props.emote.emoteID,emoteCode:t.props.emote.alt||"",sourceID:t.props.sourceID||"",emoteSourceType:t.props.sourceType?t.props.sourceType:v.a.unknown,referrerID:t.props.referrerID||"",initialTopOffset:e.currentTarget.getBoundingClientRect().bottom})},t}return p.__extends(t,e),t.prototype.render=function(){var e,t,n=this.props.emote.alt||"";return this.props.emote.cheerAmount&&(n+=" "+this.props.emote.cheerAmount.toString(),e=i.createElement("strong",{className:"chat-line__message--cheer-amount",style:{color:this.props.emote.cheerColor}},this.props.emote.cheerAmount)),t=i.createElement(g.a,{alt:n,cheerText:e,className:"chat-line__message--emote",srcKey:"1x",srcSet:this.props.emote.images}),this.props.emote.cheerAmount||this.props.disableCard||!function(e){var t=r.b.get(f,"off");if("on"===t)return!0;if("staff"===t&&e&&e.roles&&e.roles.isStaff)return!0;var n=r.b.get(b,[]);return!!("whitelist"===t&&e&&e.id&&n.includes(e.id))}(this.props.user)||"treatment"!==r.q.experiments.getAndTrackAssignment(h.b.EmoteCard)?t:i.createElement("div",{onClick:this.emoteClickHandler,className:"chat-line__message--emote-button","data-test-selector":"emote-button"},t)},t}(i.Component);var C=Object(c.compose)(Object(d.connect)(function(e){return{user:Object(u.e)(e)}}),Object(m.b)(function(e){return{onEmoteClick:e.onShowEmoteCard}}))(k);C.displayName="Emote";var y,S=function(e){var t=e.displayText,n=e.url;return i.createElement("a",{className:"link-fragment",href:n,target:"_blank",rel:"noreferrer noopener"},t)},E=n("TSYQ"),N=n("RcPG"),_=(n("VN3V"),function(e){var t,n=e.content,r=e.highlightType,a=E("text-fragment",((t={})["text-fragment--moderated-highlight"]=r===N.a.ModeratedText,t));return i.createElement("span",{className:a,"data-a-target":"chat-message-text"},n)}),D=n("+GjP"),w=n("2xye"),O=n("Ue10"),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasImageLoadingError:!1},t.handleImageError=function(){t.setState({hasImageLoadingError:!0})},t}return p.__extends(t,e),t.prototype.componentWillReceiveProps=function(){this.setState({hasImageLoadingError:!1})},t.prototype.render=function(){var e=r.a.defaultStreamPreviewURL;return!this.state.hasImageLoadingError&&this.props.imageURL&&(e=this.props.imageURL),i.createElement(O.L,{aspect:O.s.Aspect16x9,alt:this.props.altText,src:e,onError:this.handleImageError})},t}(i.Component),T=(n("Epr8"),"https://static-cdn.jtvnw.net/emoticons/v1/58765/2.0"),M={ERROR:"chat-card-error",TITLE:"chat-card-title",DESCRIPTION:"chat-card-description"},L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderErrorCard=function(){var e=i.createElement("img",{"data-test-selector":M.ERROR,src:T,className:"chat-card__error-img"});return t.renderCardContent(e,t.props.error)},t.renderCardContent=function(e,t){var n,r;return t?(n=i.createElement(O.Ca,{type:O.gc.Span,fontSize:O.Ia.Size5,"data-test-selector":M.TITLE,title:t.title},t.title),r=i.createElement(O.Ca,{type:O.gc.Span,fontSize:O.Ia.Size6,color:O.R.Alt2,"data-test-selector":M.DESCRIPTION},t.description)):(e=i.createElement(O.sb,{overlay:!0}),n=i.createElement(O.sb,{width:180}),r=i.createElement(O.sb,{width:120})),i.createElement(O.Ob,{background:O.u.Base,display:O.Da.Flex,flexWrap:O.Ha.NoWrap,padding:.5},i.createElement(O.Ob,{className:"chat-card__preview-img",background:O.u.Alt2,display:O.Da.Flex,alignItems:O.i.Center,justifyContent:O.eb.Center,flexShrink:0},e),i.createElement(O.fb,{display:O.Da.Flex,alignItems:O.i.Center,overflow:O.mb.Hidden},i.createElement(O.fb,{padding:{left:1},fullWidth:!0},i.createElement(O.fb,{className:"chat-card__title",ellipsis:!0},n),i.createElement(O.fb,{ellipsis:!0},r))))},t}return p.__extends(t,e),t.prototype.render=function(){var e;if(this.props.error)e=this.renderErrorCard();else if(this.props.data){var t=Object(D.e)(this.props.data.contentURL,{tt_medium:w.PageviewMedium.Chat,tt_content:w.PageviewContent.ChatCard}),n=i.createElement(I,{altText:this.props.data.title,imageURL:this.props.data.previewImageURL});e=i.createElement(O.Aa,{className:"chat-card__link",to:t,targetBlank:!0},this.renderCardContent(n,{title:this.props.data.title,description:this.props.data.description}))}else e=this.renderCardContent();return i.createElement(O.Ob,{elevation:1,margin:{top:.5}},e)},t}(i.Component),R=n("SceP"),x={isTimedOut:!1},F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=x,t.timeoutID=null,t}return p.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.data.clip||(this.timeoutID=setTimeout(function(){e.setState({isTimedOut:!0})},5e3))},t.prototype.componentWillReceiveProps=function(e){!this.props.data.clip&&e.data.clip&&(this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null),this.setState({isTimedOut:!1}))},t.prototype.render=function(){var e=this.props.data,t=e.clip,n=e.error,a=e.loading;return n||this.state.isTimedOut?i.createElement(L,{error:{title:Object(r.d)("Something went wrong","ClipsChatCard"),description:Object(r.d)("We couldn't find that Clip","ClipsChatCard")}}):a||!t?i.createElement(L,null):i.createElement(L,{data:{title:t.title||(t.broadcaster&&t.broadcaster.displayName?Object(r.d)("Clip of {broadcaster}",{broadcaster:t.broadcaster.displayName},"ClipsChatCard"):""),description:t.curator&&t.curator.displayName?Object(r.d)("Clipped by {curator}",{curator:t.curator.displayName},"ClipsChatCard"):"",previewImageURL:t.thumbnailURL,contentURL:t.url}})},t}(i.Component),A=Object(c.graphql)(R,{options:function(e){return{variables:{slug:e.slug},notifyOnNetworkStatusChange:!0,fetchPolicy:e.forceNetworkRequest?"cache-first":"cache-only"}}})(F),j=n("gTu3"),U=(n("lpj/"),(y={})[j.a.Default]="",y[j.a.Recipient]="mention-fragment--recipient",y[j.a.Sender]="mention-fragment--sender",y),B=function(e){var t=e.isAtMention?"@":"",n=E("mention-fragment",U[e.currentUserMentionRelation]);return i.createElement("span",{className:n,"data-a-target":"chat-message-mention"},""+t+e.recipient)};B.displayName="MentionFragment";var P,V=n("yR8l"),H=n("QVaV"),G=n("sU0Q"),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p.__extends(t,e),t.prototype.render=function(){var e=this.props.data,t=e.video,n=e.error;if(e.loading||!t)return i.createElement(L,null);if(n||!t.owner||!t.owner.login||!t.publishedAt||!t.title)return i.createElement(L,{error:{title:Object(r.d)("Something went wrong","VideoChatCard"),description:Object(r.d)("We couldn't find that video","VideoChatCard")}});var a=i.createElement(O.Ca,null,Object(r.c)(new Date(t.publishedAt),"medium"),i.createElement("span",null," · "),Object(H.a)(t.owner.login,t.owner.displayName));return i.createElement(L,{data:{title:t.title,description:a,previewImageURL:t.previewThumbnailURL,contentURL:this.props.url}})},t}(i.Component),q=Object(V.a)(G,{options:function(e){return{variables:{videoID:e.id},notifyOnNetworkStatusChange:!0,fetchPolicy:"cache-first"}}})(W),z=n("ZtEv"),Q=n("u5aL"),Y=n("fvjX"),K=n("Tznh"),$=n("VJH5");!function(e){e.CancelButton="flagged-fragment-cancel",e.ConfirmButton="flagged-fragment-confirm",e.FeedbackButton="flagged-fragment-feedback",e.FeedbackNo="flagged-fragment-no",e.FeedbackYes="flagged-fragment-yes",e.SettingsLink="flagged-fragment-settings",e.Title="flagged-fragment-title"}(P||(P={}));var X,J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={feedbackSelection:null,textShown:!1},t.hasTrackedImpression=!1,t.showSettings=function(){t.props.showChatFilterSettings(K.c.FilteredMessage)},t.showText=function(){t.props.onShowText(),t.setState({textShown:!0}),r.p.track(w.SpadeEventType.ChatFilterMessageInteraction,t.getCommonTrackingProps())},t.onAffirmativeFeedbackSelected=function(){t.setState({feedbackSelection:!0})},t.onNegativeFeedbackSelected=function(){t.setState({feedbackSelection:!1})},t.onSubmit=function(){t.props.onDismissBalloon(),r.p.track(w.SpadeEventType.ChatFilterFeedbackInteraction,p.__assign({},t.getCommonTrackingProps(),{value:t.state.feedbackSelection?t.getAffirmativeText():t.getNegativeText()}))},t}return p.__extends(t,e),t.prototype.render=function(){var e=this,t=Object(r.d)("Cancel","FlaggedFragmentBalloonContent");return this.state.textShown?i.createElement(O.fb,{padding:1},i.createElement(O.Ka,{label:Object(r.d)("Help improve our filters. Was this message correctly hidden?","FlaggedFragmentBalloonContent")},i.createElement(O.zb,{label:this.getAffirmativeText(),name:"flagged-fragment-feedback",onChange:this.onAffirmativeFeedbackSelected,"data-test-selector":P.FeedbackYes}),i.createElement(O.zb,{label:this.getNegativeText(),name:"flagged-fragment-feedback",onChange:this.onNegativeFeedbackSelected,"data-test-selector":P.FeedbackNo})),i.createElement(O.fb,{display:O.Da.Flex,justifyContent:O.eb.End},i.createElement(O.fb,{margin:{right:1}},i.createElement(O.C,{onClick:this.props.onDismissBalloon,type:O.I.Hollow,"data-test-selector":P.CancelButton},t)),i.createElement(O.C,{disabled:null===this.state.feedbackSelection,onClick:this.onSubmit,"data-test-selector":P.FeedbackButton},Object(r.d)("Submit","FlaggedFragmentBalloonContent")))):(this.hasTrackedImpression||(r.p.track(w.SpadeEventType.ChatFilterMessageImpression,this.getCommonTrackingProps()),this.hasTrackedImpression=!0),i.createElement(O.fb,{padding:1},i.createElement(O.Ca,{bold:!0,type:O.gc.H6,"data-test-selector":P.Title},this.getCategoryTitle()),Object(r.d)("Would you like to see this message? It has been hidden for you based on your <x:link>NSFW Chat Filter settings</x:link>.",{"x:link":function(t){return i.createElement(O.Aa,{onClick:e.showSettings,"data-test-selector":P.SettingsLink},t)}},"FlaggedFragmentBalloonContent"),i.createElement(O.fb,{display:O.Da.Flex,justifyContent:O.eb.End},i.createElement(O.fb,{margin:{right:1}},i.createElement(O.C,{onClick:this.props.onDismissBalloon,type:O.I.Hollow,"data-test-selector":P.CancelButton},t)),i.createElement(O.C,{onClick:this.showText,"data-test-selector":P.ConfirmButton},Object(r.d)("Show Message","FlaggedFragmentBalloonContent")))))},t.prototype.getCategoryTitle=function(){var e=this.props.messagePart.categories;return 1!==Object.values(e).filter(function(e){return!!e}).length?Object(r.d)("Message Blocked","FlaggedFragmentBalloonContent"):e[$.a.Aggressive]?Object(r.d)("Hostile Message Blocked","FlaggedFragmentBalloonContent"):e[$.a.Identity]?Object(r.d)("Discriminatory Message Blocked","FlaggedFragmentBalloonContent"):e[$.a.Sexual]?Object(r.d)("Sexually Explicit Message Blocked","FlaggedFragmentBalloonContent"):Object(r.d)("Profanity Blocked","FlaggedFragmentBalloonContent")},t.prototype.getAffirmativeText=function(){return Object(r.d)("Yes","FlaggedFragmentBalloonContent")},t.prototype.getNegativeText=function(){return Object(r.d)("No","FlaggedFragmentBalloonContent")},t.prototype.getCommonTrackingProps=function(){var e=this.props.messagePart;return{channel_id:this.props.channelID||"",channel:this.props.channelLogin||"",msg_uuid:this.props.messageID||"",word:e.originalText,aggressive_language_detected:!!e.categories[$.a.Aggressive],explicit_language_detected:!!e.categories[$.a.Sexual],identity_language_detected:!!e.categories[$.a.Identity],profane_language_detected:!!e.categories[$.a.Profanity]}},t}(i.Component),Z=Object(Y.compose)(Object(K.d)(function(e){return e}))(J);n("UUau");!function(e){e.Balloon="flagged-fragment-balloon",e.Container="flagged-fragment-container",e.Target="flagged-fragment-span"}(X||(X={}));var ee=function(e){function t(t){var n=e.call(this,t)||this;return n.state={active:!1,balloonDirection:O.y.TopCenter,balloonTailOffset:0,balloonXOffset:0,displayed:!1},n.setTopRef=function(e){n.topRef=e},n.setBalloonContentRef=function(e){n.balloonContentRef=e,n.state.active&&n.setState(p.__assign({},n.getBalloonState()))},n.onClickOut=function(){n.setState({active:!1})},n.onClick=function(){n.setState({active:!0})},n.onShowText=function(){n.setState({displayed:!0},function(){n.setState(p.__assign({},n.getBalloonState()))})},n.onDismissBalloon=function(){n.setState({active:!1})},n.placeholder=new Array(t.messagePart.length+1).join("*"),n}return p.__extends(t,e),t.prototype.render=function(){return this.state.active?i.createElement("span",{ref:this.setTopRef,"data-test-selector":X.Container},i.createElement(O.Xa,{display:O.Da.Inline,position:O.tb.Relative},i.createElement(Q.a,{onClickOut:this.onClickOut},this.renderContent(),i.createElement(O.x,{direction:this.state.balloonDirection,offsetX:this.state.balloonXOffset+"px",show:!0,size:O.z.Medium,tailOffset:this.state.balloonTailOffset},i.createElement("span",{ref:this.setBalloonContentRef,"data-test-selector":X.Balloon}),i.createElement(Z,p.__assign({},this.props,{onDismissBalloon:this.onDismissBalloon,onShowText:this.onShowText})))))):i.createElement("span",{ref:this.setTopRef,"data-test-selector":X.Container},this.renderContent())},t.prototype.renderContent=function(){var e={"flagged-fragment":!(this.state.displayed&&!this.state.active),"flagged-fragment--active":this.state.active};return this.state.displayed?i.createElement("span",{className:E(e),"data-test-selector":X.Target},ne(this.props.messagePart.content)):i.createElement("span",{className:E(e),onClick:this.onClick,"data-test-selector":X.Target},i.createElement(_,{content:this.placeholder}))},t.prototype.getBalloonState=function(){if(this.balloonContentRef&&this.topRef&&this.topRef.offsetParent){var e=this.topRef.offsetParent.getBoundingClientRect(),t=this.balloonContentRef.getBoundingClientRect(),n=this.state.balloonDirection;t.top<e.top&&(n=O.y.BottomCenter);var i=e.left+20,r=t.left,a=this.state.balloonXOffset-(r-i);return{balloonDirection:n,balloonTailOffset:e.width/2-a-20,balloonXOffset:a}}return{balloonDirection:O.y.TopCenter,balloonTailOffset:0,balloonXOffset:0}},t}(i.Component);function te(e,t,n){void 0===n&&(n=!1);var r=t.content,a=r.displayText,o=r.url;return n?i.createElement(_,{key:"message-span-"+e,content:a}):i.createElement(S,{key:e+"-link",displayText:a,url:o})}function ne(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!1);var r=null,o=e.reduce(function(o,s,l){var c=[];switch(l>0&&e[l-1].type!==N.a.Text&&s.type!==N.a.Text&&c.push(" "),s.type){case N.a.Text:case N.a.ModeratedText:var d=s.content,u=s.type;c.push(i.createElement(_,{key:l,content:d,highlightType:u}));break;case N.a.FlaggedSegment:c.push(i.createElement(ee,{key:l,channelID:t.chatChannelID,channelLogin:t.chatChannelLogin,messageID:t.messageSourceID,messagePart:s}));break;case N.a.CurrentUserHighlight:c.push(i.createElement(B,{isAtMention:!1,currentUserMentionRelation:j.a.Recipient,recipient:s.content,key:l}));break;case N.a.Mention:c.push(i.createElement(B,{isAtMention:!0,currentUserMentionRelation:s.content.currentUserMentionRelation,recipient:s.content.recipient,key:l}));break;case N.a.Emote:c.push(i.createElement(C,{key:l,emote:s.content,channelID:t.chatChannelID,channelLogin:t.chatChannelLogin,sourceID:t.messageSourceID,sourceType:t.emoteSourceType,referrerID:t.messageAuthorID,disableCard:n}));break;case N.a.Link:c.push(te(l,s,t.disableLinks));break;case N.a.ClipLink:r||(r=i.createElement(a.a,{key:l+"-ErrorBoundary"},i.createElement(A,{slug:s.content.slug,forceNetworkRequest:t.forceClipsNetworkRequest}))),c.push(te(l,s,t.disableLinks));break;case N.a.VideoLink:r||(r=i.createElement(q,{key:l,id:s.content.id,url:s.content.url})),c.push(te(l,s,t.disableLinks))}return o.concat(c)},[]);return r&&(o=o.concat(r)),o}function ie(e){if(e.moderationType===z.e.Delete){var t=e,n=t.userLogin,a=t.body;return i.createElement(l.a,{targetLogin:n,messageBody:a})}if((e=e).moderationType===z.e.Ban)return e.reason?i.createElement("span",{className:"chat-line__moderation--ban-with-reason"},Object(r.d)("{userLogin} has been banned. Reason: {reason}",{userLogin:e.userLogin,reason:e.reason},"ChatLine")):i.createElement("span",{className:"chat-line__moderation--ban"},Object(r.d)("{userLogin} is now banned from this channel.",{userLogin:e.userLogin},"ChatLine"));if(e.reason&&e.duration){var o=Object(r.d)("{userLogin} has been timed out for {duration} seconds. Reason: {reason}",{duration:e.duration,reason:e.reason,userLogin:e.userLogin},"ChatLine");return i.createElement("span",{className:"chat-line__moderation--timeout-with-reason"},o)}return e.duration?i.createElement("span",{className:"chat-line__moderation--timeout"},Object(r.d)("{userLogin} has been timed out for {duration} seconds.",{userLogin:e.userLogin,duration:e.duration},"ChatLine")):void 0}function re(e){var t=e.daysLeft;0===t&&(t=e.hoursLeft);var n={bitsTotal:i.createElement("strong",null,Object(s.f)(e.total,{style:"currency",currency:"USD"})),charityName:i.createElement("strong",null,e.charityName),learnMoreURL:i.createElement("a",{href:e.learnMore,target:"_blank",rel:"noopener noreferrer"},e.learnMore),hashtag:i.createElement("strong",null,e.hashtag),timeRemaining:Object(s.f)(t)};return i.createElement("span",null,0===e.daysLeft?function(e){return Object(r.d)("{bitsTotal} total raised so far for {charityName}! {timeRemaining} more hours to show support. Cheer and include {hashtag}. Learn More at {learnMoreURL}",{bitsTotal:e.bitsTotal,charityName:e.charityName,timeRemaining:e.timeRemaining,hashtag:e.hashtag,learnMoreURL:e.learnMoreURL},"ChatLine")}(n):function(e){return Object(r.d)("{bitsTotal} total raised so far for {charityName}! {timeRemaining} more days to show support. Cheer and include {hashtag}. Learn More at {learnMoreURL}",{bitsTotal:e.bitsTotal,charityName:e.charityName,timeRemaining:e.timeRemaining,hashtag:e.hashtag,learnMoreURL:e.learnMoreURL},"ChatLine")}(n))}function ae(e){var t=e.enabled?Object(r.d)("This room is now in slow mode. You may send messages every {length} seconds.",{length:e.length},"ChatLine"):Object(r.d)("This room is no longer in slow mode.","ChatLine");return i.createElement("span",null,t)}function oe(e){var t;if(e.length>0){var n=e.join(", ");t=Object(r.d)("The moderators of this channel are: {moderatorList}",{moderatorList:n},"ChatLine")}else t=Object(r.d)("There are no moderators of this channel.","ChatLine");return i.createElement("span",null,t)}function se(e){if(e.enabled){var t=0===e.length?Object(r.d)("This room is in followers-only mode.","ChatLine"):Object(r.d)("This room is now in {length} followers-only mode.",{length:Object(o.b)(60*e.length)},"ChatLine");return i.createElement("span",null,t)}return i.createElement("span",null,Object(r.d)("This room is no longer in followers-only mode.","ChatLine"))}function le(e){return e.enabled?i.createElement("span",null,Object(r.d)("This room is now in emote-only mode.","ChatLine")):i.createElement("span",null,Object(r.d)("This room is no longer in emote-only mode.","ChatLine"))}function ce(e){var t=e.enabled?Object(r.d)("This room is now in subscriber-only mode.","ChatLine"):Object(r.d)("This room is no longer in subscriber-only mode.","ChatLine");return i.createElement("span",null,t)}function de(e){return e.enabled?i.createElement("span",null,Object(r.d)("r9k mode has been enabled for this room.","ChatLine")):i.createElement("span",null,Object(r.d)("r9k mode has been disabled for this room.","ChatLine"))}function ue(e){return e.isAutohost?Object(r.d)("{host} is now auto hosting you for up to {viewerCount, number} viewers.",{host:e.hostingChannel,viewerCount:e.viewerCount},"ChatLine"):e.viewerCount<=2?Object(r.d)("{host} is now hosting you.",{host:e.hostingChannel},"ChatLine"):Object(r.d)("{host} is now hosting you for up to {viewerCount, number} viewers.",{host:e.hostingChannel,viewerCount:e.viewerCount},"ChatLine")}function me(e,t){void 0===t&&(t=!1);var n=t?e.getHours():e.getHours()%12;t||0!==n||(n=12);var i=n.toString(),r=e.getMinutes(),a=r.toString();return r<10&&(a="0"+a),t&&n<10&&(i="0"+i),i+":"+a}function pe(e,t){return void 0===t&&(t=!1),i.createElement("span",{key:"timestamp",className:"chat-line__timestamp","data-a-target":"chat-timestamp","data-test-selector":"chat-timestamp"},me(new Date(e),t))}function he(e){return i.createElement("span",{key:"timestamp",className:"chat-line__timestamp","data-a-target":"chat-timestamp","data-test-selector":"chat-timestamp"},function(e,t){void 0===t&&(t={});var n=r.q.intl.getLanguageCode()||"en";return Intl.DateTimeFormat(n,t).format(e)}(new Date(e),{hour:"numeric",minute:"numeric"}))}n.d(t,"f",function(){return ne}),n.d(t,"g",function(){return ie}),n.d(t,"b",function(){return re}),n.d(t,"j",function(){return ae}),n.d(t,"i",function(){return oe}),n.d(t,"d",function(){return se}),n.d(t,"c",function(){return le}),n.d(t,"k",function(){return ce}),n.d(t,"h",function(){return de}),n.d(t,"e",function(){return ue}),n.d(t,"a",function(){return me}),n.d(t,"l",function(){return pe}),n.d(t,"m",function(){return he})},d0xR:function(e,t,n){"use strict";n.r(t);var i,r=n("mrSG"),a=n("q1tI"),o=n("/MKj"),s=n("fvjX"),l=n("cZKs"),c=n("1/iK"),d=n("aCAx"),u=n("kRBY"),m=n("w1PT"),p=n("8EUQ"),h=n("Ue10"),g=n("/7QA"),f=n("ZS2+"),b=n("yR8l"),v=n("3Bft"),k=n("tIid"),C=n("ht6z"),y=n("KriR"),S=n("br9A"),E=(n("y2dA"),n("eaNi"));!function(e){e.SubButton="subscribe-button__dropdown",e.BalloonLayerButton="subscribe-button__balloon-layer-btn",e.DefaultButton="subscribe-button__default-btn",e.SubscribeBalloon="subscribe-button__subscribe-balloon"}(i||(i={}));var N=f.a.wrap(function(){return Promise.all([n.e(0),n.e(225)]).then(n.bind(null,"f+qK"))},"SubscribeBalloon"),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modalLevel="top_page",t.handleSubMenuAction=function(e){new Set([S.a.ClickCheckout,S.a.BuyGiftSub,S.a.BuyMysteryGift,S.a.BuyCustomMysteryGift,S.a.BuyGiftToPaidUpgrade,S.a.BuyPaidUpgrade]).has(e.action)&&t.checkAndDisplaySubscriptionCheckout();var n=t.props.data,i=n.user,r=null;i&&i.self&&i.self.cumulativeTenure&&(r=i.self.cumulativeTenure.months);var a=!!(i&&i.self&&i.self.subscriptionBenefit),o=n.requestInfo&&Object(C.a)(n.requestInfo.countryCode);Object(S.b)({action:e.action||"",channelLogin:t.props.channelLogin||"",channelID:i&&i.id||"",checkoutButtonTier:e.checkoutButtonTier,cumulativeTenureMonths:r,hasSubCredit:i&&i.self&&i.self.canPrimeSubscribe,hostChannelID:t.props.data.user&&t.props.data.user.id||"",hostChannelLogin:t.props.channelLogin,isMenuOpen:e.action!==S.a.OpenSubMenu,mysteryGiftCount:e.mysteryGiftCount,sub_location:t.props.subLocation||"squad_page",modal:!a,modalLevel:a?"":t.modalLevel.slice(),showPrimeContent:o,giftRecipient:e.giftRecipient||null}),!e.modalLevel||e.action!==S.a.ClickMoreSubOptions&&e.action!==S.a.ClickBack||(t.modalLevel=e.modalLevel)},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.checkAndDisplaySubscriptionCheckout()},t.prototype.componentDidUpdate=function(e){!this.isUserDataReady(e)&&this.isUserDataReady(this.props)&&this.checkAndDisplaySubscriptionCheckout()},t.prototype.render=function(){if(!(this.props.data&&this.props.data.user&&this.props.data.user.id&&this.props.data.user.subscriptionProducts&&this.props.data.requestInfo))return null;var e=this.props.data.user,t=e.self,n=e.subscriptionProducts.filter(function(e){return e});if(0===n.length)return null;if(this.props.hideEsportsSubscription&&Object(k.a)(this.props.data.user.id||"",this.props.sessionUser))return null;var i=Object(C.a)(this.props.data.requestInfo.countryCode),r=!(!t||!t.subscriptionBenefit),o=Object(k.a)(this.props.data.user.id||"",this.props.sessionUser),s=1===n.length;n.some(function(e){return!e.emoteSetID})&&(s=!0);var l=null;t&&t.subscriptionBenefit&&(l=t.subscriptionBenefit.purchasedWithPrime?v.a.Prime:t.subscriptionBenefit.tier,this.modalLevel="");var c=this.props.data.user.displayName||this.props.channelLogin,d=n[0];return a.createElement(a.Fragment,null,a.createElement(h.Ob,{overflow:h.mb.Hidden,fullWidth:!0,className:"subscribe-modal__banner"},this.props.data.user.bannerImageURL&&a.createElement(h.Y,{src:this.props.data.user.bannerImageURL,alt:Object(g.d)("{channelName}'s banner image",{channelName:c},"SubscribeModal")})),this.props.data.user.profileImageURL&&a.createElement(h.Ob,{className:"subscribe-modal__avatar",background:h.u.Alt,position:h.tb.Absolute,borderRadius:h.A.Small,overflow:h.mb.Hidden},a.createElement(h.t,{size:80,src:this.props.data.user.profileImageURL,alt:Object(g.d)("{channelName}'s profile image",{channelName:c},"SubscribeModal")})),a.createElement(h.fb,{padding:{x:2},margin:{top:3}},a.createElement(h.Ca,{fontSize:h.Ia.Size3},Object(g.d)("Subscribe to {channelName}",{channelName:c},"SubscribeModal"))),a.createElement(N,{authToken:this.props.authToken,channelLogin:this.props.channelLogin,inPrimeRegion:i,isEsportChannel:o,isNonStandardSub:s,isStaff:!(!this.props.sessionUser||!this.props.sessionUser.roles)&&this.props.sessionUser.roles.isStaff,isSubscribed:r,userHasPrime:!1,productId:d?d.id:"",subbedTier:l||v.a.Prime,handleSubMenuAction:this.handleSubMenuAction}))},t.prototype.isUserDataReady=function(e){return e.data&&e.data.user&&!e.data.loading&&!e.data.error},t.prototype.checkAndDisplaySubscriptionCheckout=function(){var e=g.o.get(p.a.SUB_CHECKOUT__PRODUCT_KEY,"");if(e){var t=this.props.data.user;if(t&&t.subscriptionProducts)if(this.props.showSubscriptionCheckout&&this.props.showLoginModal)t.subscriptionProducts.filter(function(e){return e}).map(function(e){return e.name}).includes(e)?this.props.sessionUser?this.props.showSubscriptionCheckout({isAnonymous:g.o.get(p.a.SUB_CHECKOUT__GIFTING_ANONYMOUSLY,!1),mysteryGiftCount:Number(g.o.get(p.a.SUB_CHECKOUT__MYSTERY_GIFT_COUNT,"")),productName:e,recipientLogin:g.o.get(p.a.SUB_CHECKOUT__RECIPIENT_KEY,""),trackingContext:{source:y.c.ChannelSubscribeButton}}):(g.o.set("subscription-target-login",this.props.channelLogin),this.props.showLoginModal()):p.a.clearSubscriptionCheckoutKeys()}},t}(a.Component),D=Object(b.a)(E,{options:function(e){return{variables:{login:e.channelLogin}}}})(_);var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClose=function(){t.props.closeModal()},t}return r.__extends(t,e),t.prototype.componentWillUnmount=function(){this.props.onClose&&this.props.onClose()},t.prototype.render=function(){return a.createElement(h.Ob,{className:"subscribe-modal",background:h.u.Base},a.createElement(D,{authToken:this.props.authToken,sessionUser:this.props.sessionUser,onClose:this.handleClose,channelLogin:this.props.channelLogin,showLoginModal:this.props.showLoginModal,showSubscriptionCheckout:this.props.showSubscriptionCheckout,subLocation:this.props.subLocation}),a.createElement(l.a,{closeOnBackdropClick:!0,closeOnPageNavigation:!0}))},t}(a.Component);var O=Object(o.connect)(function(e){return{authToken:Object(u.a)(e),sessionUser:Object(u.e)(e)}},function(e){return Object(s.bindActionCreators)({closeModal:d.c,showLoginModal:p.a.showLoginModalWithCheckoutDispatch(c.a.ChannelSubscriptionButton),showSubscriptionCheckout:m.a},e)})(w);n.d(t,"SubscribeModalContainer",function(){return w}),n.d(t,"SubscribeModal",function(){return O}),n.d(t,"SUBSCRIPTION_TARGET_LOGIN",function(){return"subscription-target-login"}),n.d(t,"TestSelectors",function(){return i}),n.d(t,"SubscribeModalComponentPresentation",function(){return _}),n.d(t,"SubscribeModalComponent",function(){return D})},dAHa:function(e,t,n){"use strict";var i,r,a=n("mrSG"),o=n("q1tI"),s=n("/MKj"),l=n("fvjX"),c=n("/7QA"),d=n("yR8l"),u=n("BhFH"),m=n("iS14"),p=n("geRD"),h=n("O3Y9"),g=n("f00E"),f=n("D7An"),b=n("DMoW"),v=n("2xye"),k=n("GnwI"),C=n("QVaV"),y=n("Ue10"),S=(n("MPK0"),"report-wizard-block"),E="report-wizard-unblock",N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={userBlocked:t.props.userBlocked||!1},t.renderBlock=function(){return o.createElement(y.Aa,{hoverUnderlineNone:!0,onClick:t.handleBlock,"data-test-selector":S},o.createElement(y.fb,{display:y.Da.Flex,alignItems:y.i.Center},o.createElement(y.Cb,{type:y.Eb.Brand,asset:y.Db.Ban}),o.createElement(y.fb,{margin:{left:.5}},Object(c.d)("Block {user}",{user:t.displayName()},"ReportWizardBlockActions"))))},t.renderUnblock=function(){return o.createElement(y.fb,{className:"reporting-wizard__block-actions",display:y.Da.Flex,alignItems:y.i.Center},o.createElement(y.Cb,{type:y.Eb.Success,asset:y.Db.FollowCheck}),o.createElement(y.fb,{margin:{right:1}},o.createElement(y.Ca,{className:"block-user__success",type:y.gc.Span},Object(c.d)("{user} blocked",{user:t.displayName()},"ReportWizardBlockActions"))),o.createElement(y.Aa,{hoverUnderlineNone:!0,onClick:t.handleUnblock,"data-test-selector":E},o.createElement(y.fb,{margin:{left:.5}},Object(c.d)("Unblock","ReportWizardBlockActions"))))},t.handleBlock=function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(e){return this.props.onBlock(),this.setState({userBlocked:!0}),[2]})})},t.handleUnblock=function(){t.props.onUnblock(),t.setState({userBlocked:!1})},t.displayName=function(){var e=t.props.targetUser.displayName,n=t.props.targetUser.login;return e||(n||"")},t}return a.__extends(t,e),t.prototype.render=function(){var e=this.state.userBlocked?this.renderUnblock():this.renderBlock(),t=Object(C.a)(this.props.targetUser.login,this.props.targetUser.displayName,!0);return o.createElement(y.Ob,{borderTop:!0,padding:{y:1},margin:{top:1}},o.createElement(y.fb,null,Object(c.d)("Would you like to block {user}?",{user:t},"ReportWizardBlockActions")),o.createElement(y.Ob,{color:y.R.Alt2,margin:{y:1}},o.createElement(y.tc,{baseFontSize:y.Ia.Size6},o.createElement("p",null,Object(c.d)("Blocking {user} will:",{user:t},"ReportWizardBlockActions")),o.createElement("ul",null,o.createElement("li",null,Object(c.d)("Prevent them from sending you whispers","ReportWizardBlockActions")),o.createElement("li",null,Object(c.d)("Prevent them from hosting you","ReportWizardBlockActions")),o.createElement("li",null,Object(c.d)("Prevent them from adding you as a friend","ReportWizardBlockActions")),o.createElement("li",null,Object(c.d)("Filter their messages out of chats you don’t moderate","ReportWizardBlockActions"))))),o.createElement(y.fb,{margin:{top:1}},e))},t}(o.Component);!function(e){e.BitsViolation="bits_violation",e.ChatBanEvasion="chat_ban_evasion",e.Cheating="cheating",e.Gore="gore",e.Harassment="harassment",e.Harm="harm",e.HatefulConduct="hateful_conduct",e.Impersonation="impersonation",e.Miscategorized="miscategorized",e.OffensiveUsername="offensive_username",e.Other="other",e.Porn="porn",e.Prohibited="prohibited",e.SelfHarm="selfharm",e.SexualContent="sexual_content",e.SexualViolence="sexual_violence",e.Spam="spam",e.TosBanEvasion="tos_ban_evasion",e.Underaged="underaged"}(i||(i={})),function(e){e.Link="link",e.MultipleChoice="multiple choice",e.Text="text",e.Textarea="textarea"}(r||(r={}));var _,D={generalFilter:function(){return Object(c.d)("I don't think their content or behavior is allowed on Twitch","ReportModalWizard")},me:function(){return Object(c.d)("Me","ReportModalWizard")},someoneElse:function(){return Object(c.d)("Someone else","ReportModalWizard")},abusiveViolence:function(){return Object(c.d)("Threatening violence or physical harm","ReportModalWizard")},commitingViolence:function(){return Object(c.d)("Committing acts of violence or physical harm","ReportModalWizard")},threatening:function(){return Object(c.d)("Threatening, harming, or endangering someone","ReportModalWizard")},abusive:function(){return Object(c.d)("Being hateful, harassing, or abusive","ReportModalWizard")},harassment:function(){return Object(c.d)("Hate speech, harassment, or abuse","ReportModalWizard")},moreOptions:function(){return Object(c.d)("Give me more options...","ReportModalWizard")},scam:function(){return Object(c.d)("Attempts to scam other community members","ReportModalWizard")}},w={input_description:{getTitle:function(){return Object(c.d)("Could you provide more detail about this issue? You may include links to videos, clips, and content outside Twitch.","ReportModalWizard")},value:"description",type:r.Textarea,required:!0},input_link:{getTitle:function(){return Object(c.d)("If possible, please provide a link to show us where the issue occurred. Links that do not lead to the original source of the content may not be usable as evidence.","ReportModalWizard")},rows:2,value:"external links",type:r.Textarea},input_usernames:{getTitle:function(){return Object(c.d)("If you know the usernames of any other Twitch accounts that may be owned by this person, please list them in this space.","ReportModalWizard")},value:"other usernames",rows:2,type:r.Textarea},input_connection:{getTitle:function(){return Object(c.d)("Please describe how you connected the offsite content to this Twitch account.","ReportModalWizard")},value:"offsite content connection",type:r.Textarea},input_comments:{getTitle:function(){return Object(c.d)("If you have any other comments you would like to add, please do so here.","ReportModalWizard")},value:"comments",type:r.Textarea},input_identifyOwner:{getTitle:function(){return Object(c.d)("Please describe how you identified this person as the owner of this Twitch account.","ReportModalWizard")},rows:2,value:"connect account owner",type:r.Textarea},input_emotes:{getTitle:function(){return Object(c.d)("Please provide more detail about the emote in question.","ReportModalWizard")},value:"emote report context",type:r.Textarea},endBlurb_socialmedia:{getTitle:function(){return Object(c.d)("Please submit a report on the site or service where the incident occurred as well if you have not already done so.","ReportModalWizard")},type:r.Text},endBlurb_threat:{getTitle:function(){return Object(c.d)("If you feel you are in immediate danger, please contact your local law enforcement. To protect yourself on Twitch, you may also block the user.","ReportModalWizard")},type:r.Text},endLink_selfharm:{getTitle:function(){return Object(c.d)("Learn more about mental health support","ReportModalWizard")},value:"https://help.twitch.tv/customer/en/portal/articles/2904486-twitch-cares-mental-health-support-information",type:r.Link},endLink_DMCA:{getTitle:function(){return Object(c.d)("View our DMCA Notification Guidelines","ReportModalWizard")},value:"https://www.twitch.tv/p/legal/dmca-guidelines/",type:r.Link},endLink_trademark:{getTitle:function(){return Object(c.d)("View our Trademark Policy","ReportModalWizard")},value:"https://www.twitch.tv/p/legal/trademark-policy/",type:r.Link},endLink_devAgreement:{getTitle:function(){return Object(c.d)("View our Developer Agreement","ReportModalWizard")},value:"https://www.twitch.tv/p/legal/developer-agreement/",type:r.Link},endLink_eventCoC:{getTitle:function(){return Object(c.d)("View our Events Code of Conduct","ReportModalWizard")},value:"https://www.twitch.tv/p/legal/events-code-of-conduct",type:r.Link},messaging_general:{getTitle:D.generalFilter,value:"general_messaging",omitFromDescription:!0},profile_general:{getTitle:D.generalFilter,value:"general_profile",omitFromDescription:!0},maliciousRaid:{getTitle:function(){return Object(c.d)("Participating in a malicious raid","ReportModalWizard")},value:"malicious raid",reportReason:i.Harassment},automod:{getTitle:function(){return Object(c.d)("It's being used to bypass AutoMod","ReportModalWizard")},value:"bypass automod",reportReason:i.Other},violence:{getTitle:function(){return Object(c.d)("Threats, harm, or endangerment of someone","ReportModalWizard")},value:"violence/threats",reportReason:i.Harm},report_username:{getTitle:function(){return Object(c.d)("The username is inappropriate","ReportModalWizard")},value:"inappropriate username",reportReason:i.OffensiveUsername},report_emotes:{getTitle:function(){return Object(c.d)("The emotes or badges","ReportModalWizard")},value:"inappropriate emotes",reportReason:i.Other},emotes_break_guidelines:{getTitle:function(){return Object(c.d)("The emotes break Twitch's guidelines","ReportModalWizard")},value:"emotes break guidelines",reportReason:i.Other},abusive:{getTitle:D.harassment,value:"abusive"},scam:{getTitle:D.scam,value:"scam",reportReason:i.Spam},emptyStream:{getTitle:function(){return Object(c.d)("There's nobody on the stream","ReportModalWizard")},value:"empty stream"},impersonation:{getTitle:function(){return Object(c.d)("They're impersonating someone","ReportModalWizard")},value:"impersonation",reportReason:i.Impersonation},impersonating:{getTitle:function(){return Object(c.d)("Impersonating someone","ReportModalWizard")},value:"impersonation",reportReason:i.Impersonation},underage:{getTitle:function(){return Object(c.d)("They're underage (12 or younger)","ReportModalWizard")},value:"underage",reportReason:i.Underaged},report_ip:{getTitle:function(){return Object(c.d)("I think they're using copyrighted content, trademarks, or other intellectual property that's not theirs","ReportModalWizard")},value:"intellectual property"},itsInappropriateContent:{getTitle:function(){return Object(c.d)("It's inappropriate or obscene","ReportModalWizard")},value:"inappropriate content"},inappropriateContent:{getTitle:function(){return Object(c.d)("Inappropriate or obscene content","ReportModalWizard")},value:"inappropriate content"},violateDevAgreement:{getTitle:function(){return Object(c.d)("They're breaking Twitch's Developer Agreement","ReportModalWizard")},value:"violating developer agreement"},revealPersonalInfo:{getTitle:function(){return Object(c.d)("Revealing someone's personal information","ReportModalWizard")},value:"revealing personal info",reportReason:i.Other},inappropriateBadge:{getTitle:function(){return Object(c.d)("Their emote or subscriber badge violates Twitch's Guidelines","ReportModalWizard")},value:"emote/subscriber badge",reportReason:i.Other},noModeration:{getTitle:function(){return Object(c.d)("They're not moderating their chat appropriately","ReportModalWizard")},value:"not moderating chat",reportReason:i.Other},inappropriateExtension:{getTitle:function(){return Object(c.d)("The extensions are inappropriate or malicious","ReportModalWizard")},value:"inappropriate extension",reportReason:i.Other},cheating:{getTitle:function(){return Object(c.d)("Cheating in an online game","ReportModalWizard")},value:"cheating",reportReason:i.Cheating},bitsViolation:{getTitle:function(){return Object(c.d)("They're breaking Twitch's Bits Policy","ReportModalWizard")},value:"bits violation",reportReason:i.BitsViolation},compromisedAccount:{getTitle:function(){return Object(c.d)("The account is stolen or compromised","ReportModalWizard")},value:"account compromised",reportReason:i.Other},video_labeling:{getTitle:function(){return Object(c.d)("Their content is misclassified (wrong category or tags)","ReportModalWizard")},value:"incorrect label",reportReason:i.Miscategorized},video_inactive:{getTitle:function(){return Object(c.d)("There's no streamer, or the streamer is inactive","ReportModalWizard")},value:"inactive stream",reportReason:i.Miscategorized},video_general:{getTitle:D.generalFilter,value:"general_video",omitFromDescription:!0},hateSpeechSymbols:{getTitle:function(){return Object(c.d)("It contains hate speech or hate symbols","ReportModalWizard")},value:"hate speech symbols",reportReason:i.HatefulConduct},hateSpeech:{getTitle:function(){return Object(c.d)("Hate speech, hateful symbols, or other hateful conduct","ReportModalWizard")},value:"hate speech",reportReason:i.HatefulConduct},harassing:{getTitle:function(){return Object(c.d)("It's harassing or bullying someone","ReportModalWizard")},value:"harassment",reportReason:i.Harassment},harassment:{getTitle:function(){return Object(c.d)("Harassing or bullying someone","ReportModalWizard")},value:"harassment",reportReason:i.Harassment},abusiveViolence:{getTitle:D.abusiveViolence,value:"threatening violence",reportReason:i.Harm},commitingViolence:{getTitle:D.commitingViolence,value:"committing violence",reportReason:i.Harm},swatting:{getTitle:function(){return Object(c.d)("Involvement in swatting or DDOS attacks","ReportModalWizard")},value:"swatting/ddosing",reportReason:i.Harassment},personalInfo:{getTitle:function(){return Object(c.d)("Doxxing (purposely revealing personal information)","ReportModalWizard")},value:"revealing personal info",reportReason:i.Harassment},threat_me:{getTitle:function(){return Object(c.d)("At me","ReportModalWizard")},value:"against me",reportReason:i.Harm},threat_person:{getTitle:function(){return Object(c.d)("At someone else","ReportModalWizard")},value:"against another person",reportReason:i.Harm},threat_group:{getTitle:function(){return Object(c.d)("At a group of people","ReportModalWizard")},value:"against group of people",reportReason:i.Harm},threat_selfharm:{getTitle:function(){return Object(c.d)("They're threatening self-harm","ReportModalWizard")},value:"selfharm"},inappropriate_game:{getTitle:function(){return Object(c.d)("The game isn't allowed on Twitch","ReportModalWizard")},value:"prohibited game",reportReason:i.Prohibited},sexuallyViolentChildAnimal:{getTitle:function(){return Object(c.d)("Sexual conduct involving violence, children, or animals","ReportModalWizard")},value:"sexual conduct: violent, child, or animal",reportReason:i.SexualViolence},pornographic:{getTitle:function(){return Object(c.d)("Sexually explicit or pornographic content","ReportModalWizard")},value:"pornographic",reportReason:i.SexualContent},gory:{getTitle:function(){return Object(c.d)("Extreme violence or gore","ReportModalWizard")},value:"gory",reportReason:i.Gore},suggestive:{getTitle:function(){return Object(c.d)("Sexually suggestive content","ReportModalWizard")},value:"sexually suggestive",reportReason:i.SexualContent},nudity:{getTitle:function(){return Object(c.d)("Full or partial nudity","ReportModalWizard")},value:"nudity",reportReason:i.SexualContent},other:{getTitle:function(){return Object(c.d)("There's something else wrong with it...","ReportModalWizard")},value:"other",reportReason:i.Other},evasion:{getTitle:function(){return Object(c.d)("Evading a block, ban, or suspension","ReportModalWizard")},value:"ban evasion"},evasion_sitewide:{getTitle:function(){return Object(c.d)("A sitewide ban from Twitch","ReportModalWizard")},value:"sitewide ban",reportReason:i.TosBanEvasion},evasion_chat:{getTitle:function(){return Object(c.d)("A chat ban from one or more channels","ReportModalWizard")},value:"chat ban",reportReason:i.ChatBanEvasion},evasion_messaging:{getTitle:function(){return Object(c.d)("A block from messaging me","ReportModalWizard")},value:"messaging block",reportReason:i.ChatBanEvasion},impersonation_me:{getTitle:D.me,value:"impersonating me",reportReason:i.Impersonation},impersonation_brand:{getTitle:function(){return Object(c.d)("Someone I represent, or a company I work for","ReportModalWizard")},value:"impersonating brand",reportReason:i.Impersonation},impersonation_other:{getTitle:D.someoneElse,value:"Impersonating someone else",reportReason:i.Impersonation},selfharm:{getTitle:function(){return Object(c.d)("I'm concerned for their wellbeing","ReportModalWizard")},value:"selfharm",reportReason:i.SelfHarm},video:{getTitle:function(){return Object(c.d)("In a live stream, video, or clip","ReportModalWizard")},value:"video"},video_more_options:{getTitle:D.moreOptions,value:"video more options"},whisper:{getTitle:function(){return Object(c.d)("In a whisper (private message)","ReportModalWizard")},value:"whisper",reportContext:b.Fa.WHISPER_REPORT},whisper_more_options:{getTitle:D.moreOptions,value:"whisper more options"},chat:{getTitle:function(){return Object(c.d)("In a chat message or room","ReportModalWizard")},value:"chat"},chat_more_options:{getTitle:D.moreOptions,value:"chat more options"},moderating:{getTitle:function(e){return Object(c.d)("{username} isn't moderating their chat",{username:e},"ReportModalWizard")},value:"moderating",reportReason:i.Other},otherContent:{getTitle:function(e){return Object(c.d)("In {username}'s other content (profile, emotes, etc.)",{username:e},"ReportModalWizard")},value:"other content"},profile:{getTitle:function(){return Object(c.d)("The profile content (avatar, panels, etc.)","ReportModalWizard")},value:"profile"},profile_more_options:{getTitle:D.moreOptions,value:"profile more options"},report_other:{getTitle:function(){return Object(c.d)("Somewhere else...","ReportModalWizard")},value:"somewhere else",omitFromDescription:!0},video_streamer:{getTitle:function(){return Object(c.d)("The streamer or channel owner","ReportModalWizard")},value:"streamer"},video_someoneElse:{getTitle:function(){return Object(c.d)("Someone else in the video","ReportModalWizard")},value:"someone else in video"},video_chatSomeone:{getTitle:function(){return Object(c.d)("Someone in chat","ReportModalWizard")},value:"someone in chat",differentTarget:!0},report_channelOwner:{getTitle:function(){return Object(c.d)("The channel owner","ReportModalWizard")},value:"channel owner"},report_member:{getTitle:function(){return Object(c.d)("Another community member","ReportModalWizard")},value:"community member",differentTarget:!0},location_onTwitch:{getTitle:function(){return Object(c.d)("On Twitch","ReportModalWizard")},value:"on twitch"},location_anotherSite:{getTitle:function(){return Object(c.d)("On another site or service","RpoertModalWizard")},value:"another site"},location_TwitchEvent:{getTitle:function(){return Object(c.d)("In person, at a Twitch event","ReportModalWizard")},value:"twitch event"},external_incitingRaids:{getTitle:function(){return Object(c.d)("Inciting brigading or malicious raids","ReportModalWizard")},reportReason:i.Harassment,value:"brigading/raids"},external_threatening:{getTitle:D.threatening,value:"threatening"},external_harassment:{getTitle:D.harassment,value:"hateful/harassing"},external_abusiveViolence:{getTitle:D.abusiveViolence,value:"external site; threatening violence",reportReason:i.Harm},external_commitingViolence:{getTitle:D.commitingViolence,value:"external site; committing violence",reportReason:i.Harm},conduct_impersonation:{getTitle:function(){return Object(c.d)("impersonating someone","ReportModalWizard")},value:"impersonation",reportReason:i.Impersonation},spam:{getTitle:function(){return Object(c.d)("Spam, malicious links, or bot accounts","ReportModalWizard")},value:"spam",reportReason:i.Spam},spam_bot:{getTitle:function(){return Object(c.d)("I think this is a bot account","ReportModalWizard")},value:"bot"},spam_links:{getTitle:function(){return Object(c.d)("Sending malicious links","ReportModalWizard")},value:"malicious links"},spam_scam:{getTitle:D.scam,value:"scam"},spam_repeated:{getTitle:function(){return Object(c.d)("Sending repeated messages (spam)","ReportModalWizard")},value:"repeat messages"}},O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){var n=e.target,i=n.name,r=n.value;t.props.onChangeText(i,r)},t.onSelect=function(e){if(t.props.currentCard.items&&e.currentTarget.parentElement){var n=Number(e.currentTarget.parentElement.getAttribute("data-a-index")),i=t.props.currentCard.items[n];t.props.onChangeRadio(i)}},t}return a.__extends(t,e),t.prototype.render=function(){var e=this.props.currentCard.getDescription?o.createElement(y.fb,{padding:{bottom:1}},this.props.currentCard.getDescription()):null;return o.createElement(y.fb,{className:"reporting-wizard-card"},e,o.createElement(y.Ka,{label:this.props.currentCard.getLabel?this.props.currentCard.getLabel():""},this.renderCardItems()))},t.prototype.renderCardItems=function(){var e=this,t=this.props.currentCard,n=[];return t.items&&t.type&&(n=t.items.filter(function(e){return!!e}).map(function(t,n){switch(t.type){case r.Text:return o.createElement(y.fb,{key:n,padding:{bottom:1}},t.getTitle());case r.Link:return o.createElement(y.fb,{key:n,padding:{bottom:1}},o.createElement(y.Aa,{to:t.value,targetBlank:!0},o.createElement(y.fb,{display:y.Da.Flex},o.createElement(y.fb,{display:y.Da.Inline,padding:{right:.5}},o.createElement(y.Cb,{asset:y.Db.Document})),t.getTitle())));case r.Textarea:var i=t.value?e.props.userTextInputs[t.value]:void 0,a=t.required&&(!i||!!i&&0===i.trim().length);return o.createElement(y.fb,{key:n,padding:{bottom:1}},o.createElement(y.Ka,{label:t.getTitle(),labelOptional:t.required?"":Object(c.d)("Optional","ReportModalWizardCard")},o.createElement(y.dc,{onChange:e.onChange,rows:t.rows||3,name:t.value,error:e.props.error&&a,value:i,"data-test-selector":"report-wizard-textarea"})));case r.MultipleChoice:default:return o.createElement(y.fb,{key:n,padding:{y:.5}},o.createElement(y.zb,{checked:!!e.props.currentSelection&&e.props.currentSelection.value===t.value,onChange:e.onSelect,label:t.getTitle(e.props.targetUser.displayName),"data-a-index":n,name:"card",value:t.value}))}})),n},t}(o.Component),I=n("RQ6e");!function(e){e.Confirm="Confirm",e.MultipleChoice="MultipleChoice",e.Info="End Card"}(_||(_={}));var T,M,L,R={contentGeneral:function(){return Object(c.d)("What would you like to report?","ReportModalWizard")},content:function(){return Object(c.d)("What's wrong with this content?","ReportModalWizard")},identifyUser:function(){return Object(c.d)("Who do you want to report?","ReportModalWizard")},thisPersonIs:function(){return Object(c.d)("This person is...","ReportModalWizard")},relevantStatements:function(){return Object(c.d)("What would you like to report? (Please choose the most relevant statement that applies.)","ReportModalWizard")}},x={report:function(e){return Object(c.d)("Report {username}",{username:e},"ReportModalWizard")},reportVideo:function(e){return Object(c.d)("Report {username}'s Video",{username:e},"ReportModalWizard")},reportMessage:function(e){return Object(c.d)("Report {username}'s Message",{username:e},"ReportModalWizard")},reportWhisper:function(e){return Object(c.d)("Report {username}'s Whisper",{username:e},"ReportModalWizard")},reportProfileOrOtherContent:function(e){return Object(c.d)("Report {username}'s Profile Or Other Content",{username:e},"ReportModalWizard")},reportProfile:function(e){return Object(c.d)("Report {username}'s Profile Content",{username:e},"ReportModalWizard")},reportEmotesBadges:function(e){return Object(c.d)("Report {username}'s Emotes or Badges",{username:e},"ReportModalWizard")},reportAbusive:function(e){return Object(c.d)("Report {username} for Abusive Conduct",{username:e},"ReportModalWizard")},tellUsMore:function(){return Object(c.d)("Tell Us More","ReportModalWizard")},thanks:function(){return Object(c.d)("Thanks for letting us know","ReportModalWizard")},thanksConcern:function(){return Object(c.d)("Thank you for your concern","ReportModalWizard")}},F={getDescription:function(){return Object(c.d)("Reports are reviewed by Twitch Staff 24 hours a day. We will issue penalties, such as account suspension and/or content removal, once we verify that a violation of our policies has occurred.","ReportModalWizard")},blockPrompt:!0,getTitle:x.thanks,type:_.Info,value:"end card"},A={socialMedia:a.__assign({},F,{items:[w.endBlurb_socialmedia]}),violence:a.__assign({},F,{items:[w.endBlurb_threat]}),legal:{getTitle:x.thanksConcern,getDescription:function(){return Object(c.d)("To submit a claim or report a violation of this type, you will need to follow the steps listed on the relevant page below.","ReportModalWizard")},items:[w.endLink_DMCA,w.endLink_trademark,w.endLink_devAgreement],type:_.Info,value:"ip end"},selfharm:{getTitle:x.thanksConcern,getDescription:function(){return Object(c.d)("If you know the user personally, and you believe them to be in danger, please contact their local authorities immediately. The link below contains some general information that may be of use.","ReportModalWizard")},items:[w.endLink_selfharm],type:_.Info,value:"selfharm end"},twitchEvent:{getTitle:x.thanksConcern,getDescription:function(){return Object(c.d)("Please bring this concern to the attention of staff or security at the event if you have not already done so. More information is available at the link below.","ReportModalWizard")},items:[w.endLink_eventCoC],value:"twitch event end",type:_.Info}},j={getTitle:x.report,getLabel:function(){return Object(c.d)("Where is the problem?","ReportModalWizard")},items:[w.video,w.whisper,w.chat,w.moderating,w.otherContent,w.report_username,w.report_other],type:_.MultipleChoice,value:"content type"},U={identifyUser:{getTitle:x.reportVideo,getLabel:R.identifyUser,items:[w.video_streamer,w.video_someoneElse,w.video_chatSomeone],type:_.MultipleChoice,value:"video identify user"},content:{getTitle:x.reportVideo,getLabel:R.contentGeneral,items:[w.violence,w.abusive,w.video_inactive,w.video_labeling,w.inappropriateContent,w.selfharm,w.video_more_options],type:_.MultipleChoice,value:"video report reason"},moreOptions:{getTitle:x.reportVideo,getLabel:R.contentGeneral,items:[w.revealPersonalInfo,w.cheating,w.impersonating,w.underage,w.bitsViolation,w.report_ip,w.other],type:_.MultipleChoice,value:"video general report reason"}},B={content:{getTitle:x.reportMessage,getLabel:R.contentGeneral,items:[w.report_username,w.violence,w.abusive,w.evasion,w.spam,w.selfharm,w.chat_more_options],type:_.MultipleChoice,value:"message report reason"},moreOptions:{getTitle:x.reportMessage,getLabel:R.contentGeneral,items:[w.emotes_break_guidelines,w.inappropriateContent,w.revealPersonalInfo,w.maliciousRaid,w.underage,w.bitsViolation,w.other],type:_.MultipleChoice,value:"message general report reason"}},P={general:{getTitle:x.reportWhisper,getLabel:R.contentGeneral,items:[w.report_username,w.violence,w.abusive,w.spam,w.selfharm,w.whisper_more_options],type:_.MultipleChoice,value:"whisper report reason",getDescription:function(){return Object(c.d)("Please note that we may review additional messages in this conversation to determine the context of your report.","ReportModalWizard")}},moreOptions:{getTitle:x.reportWhisper,getLabel:R.contentGeneral,items:[w.emotes_break_guidelines,w.evasion,w.inappropriateContent,w.revealPersonalInfo,w.underage,w.other],type:_.MultipleChoice,value:"whisper general report reason"}},V={profile:{getTitle:x.reportProfile,getLabel:R.contentGeneral,items:[w.revealPersonalInfo,w.violence,w.abusive,w.inappropriateContent,w.selfharm,w.profile_more_options],type:_.MultipleChoice,value:"profile report reason"},profileMoreOptions:{getTitle:x.reportProfile,getLabel:R.contentGeneral,items:[w.scam,w.evasion,w.impersonation,w.underage,w.report_ip,w.other],type:_.MultipleChoice,value:"profile general report reason"},emotes:{getTitle:x.reportEmotesBadges,getLabel:R.content,items:[w.hateSpeechSymbols,w.harassing,w.itsInappropriateContent,w.automod,w.report_ip,w.other],type:_.MultipleChoice,value:"emote report reason"},general:{getTitle:x.reportProfileOrOtherContent,getLabel:R.content,items:[w.report_username,w.profile,w.report_emotes,w.inappropriateExtension,w.compromisedAccount,w.violateDevAgreement],type:_.MultipleChoice,value:"profile content location"}},H={getTitle:function(e){return Object(c.d)("Report {username}'s Room",{username:e},"ReportModalWizard")},getLabel:R.identifyUser,items:[w.report_channelOwner,w.report_member],value:"room report user",type:_.MultipleChoice},G={getTitle:x.tellUsMore,items:[w.input_description],type:_.Confirm,value:"tell us more"},W={getTitle:function(e){return Object(c.d)("Report {username}'s Emote",{username:e},"ReportModalWizard")},items:[w.input_emotes],type:_.Confirm,value:"Emote report context"},q={banEvasion:a.__assign({},G,{items:[w.input_usernames,w.input_description],value:"ban evasion tell us more"}),socialMedia:a.__assign({},G,{items:[w.input_link,w.input_connection,w.input_description],nextCard:A.socialMedia,value:"social media tell us more"})},z={content:{getTitle:x.reportAbusive,getLabel:R.relevantStatements,items:[w.hateSpeech,w.harassment,w.abusiveViolence,w.commitingViolence,w.swatting,w.personalInfo],type:_.MultipleChoice,value:"abuse type"}},Q={identifyLocation:{getTitle:function(e){return Object(c.d)("Report {username} for something else...",{username:e},"ReportModalWizard")},getLabel:function(){return Object(c.d)("Where did the problem happen?","ReportModalWizard")},items:[w.location_onTwitch,w.location_anotherSite,w.location_TwitchEvent],type:_.MultipleChoice,value:"off-site conduct location"},externalSite:{getTitle:function(e){return Object(c.d)("Report {username}'s Conduct on Another Site or Service",{username:e},"ReportModalWizard")},getLabel:R.contentGeneral,getDescription:function(){return Object(c.d)("Please note that incidents reported through this form must involve Twitch community members. If possible, please submit a report to the site or service where the incident occurred as well.","ReportModalWizard")},items:[w.external_incitingRaids,w.external_threatening,w.external_harassment],type:_.MultipleChoice,nextCard:q.socialMedia,value:"external site conduct"},external_abusive:a.__assign({},z.content,{items:[w.hateSpeech,w.harassment,w.external_abusiveViolence,w.external_commitingViolence,w.swatting,w.personalInfo],nextCard:q.socialMedia})},Y={getTitle:function(e){return Object(c.d)("Report {username}'s Spam or Malicious Links",{username:e},"ReportModalWizard")},getLabel:R.contentGeneral,items:[w.spam_bot,w.spam_scam,w.spam_links,w.spam_repeated],type:_.MultipleChoice,value:"spam type"},K={getTitle:function(e){return Object(c.d)("Report {username} for Inappropriate Content",{username:e},"ReportModalWizard")},getLabel:R.relevantStatements,items:[w.inappropriate_game,w.gory,w.sexuallyViolentChildAnimal,w.pornographic,w.suggestive,w.nudity,w.other],type:_.MultipleChoice,value:"inappropriate content type"},$={getTitle:function(e){return Object(c.d)("Report {username} for Evading a Ban",{username:e},"ReportModalWizard")},getLabel:function(){return Object(c.d)("What kind of ban are they evading?","ReportModalWizard")},value:"ban type",items:[w.evasion_chat,w.evasion_sitewide,w.evasion_messaging],type:_.MultipleChoice,nextCard:q.banEvasion},X={getTitle:function(e){return Object(c.d)("Report {username} for Impersonation",{username:e},"ReportModalWizard")},getLabel:function(){return Object(c.d)("Who is being impersonated?","ReportModalWizard")},getDescription:function(){return Object(c.d)("Please note that parody, cosplay, and other portrayals without the intent to deceive or defraud are allowed under Twitch's Community Guidelines. If you would still like to submit a report, please continue.","ReportModalWizard")},items:[w.impersonation_me,w.impersonation_brand,w.impersonation_other],type:_.MultipleChoice,value:"impersonation type"},J=j,Z=G,ee=F,te={video:U.content,"video more options":U.moreOptions,whisper:P.general,"whisper more options":P.moreOptions,chat:B.content,"chat more options":B.moreOptions,"other content":V.general,profile:V.profile,"profile more options":V.profileMoreOptions,room:H,"somewhere else":Q.identifyLocation,streamer:U.content,"someone else in video":U.content,"someone in chat":B.content,general_video:U.moreOptions,general_messaging:B.content,general_profile:V.profile,"channel owner":V.general,"community member":B.content,"on twitch":V.general,"another site":Q.externalSite,"twitch event":A.twitchEvent,"brigading/raids":q.socialMedia,"hateful/harassing":Q.external_abusive,"external site; scam":q.socialMedia,"ban evasion":$,spam:Y,hateful:z.content,impersonation:X,abusive:z.content,"inappropriate content":K,"inappropriate emotes":V.emotes,"intellectual property":A.legal,"violating developer agreement":A.legal},ne={selfharm:A.selfharm,harm:A.violence,other:ee},ie={CHANNEL_FEED_POST_REPORT:V.general,COMMUNITY_REPORT:V.general,CHAT_REPORT:B.content,CLIP_REPORT:U.content,EMOTE_REPORT:W,EVENT_REPORT:V.general,EXTENSION_REPORT:V.general,LIVE_UP_REPORT:V.general,ROOM_REPORT:H,WHISPER_REPORT:P.general,VOD_COMMENT_REPORT:B.content},re="report-wizard-back",ae="report-wizard-close",oe="report-wizard-next",se="report-wizard-submit",le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentCard:t.props.currentCard||ie[t.props.reportContentType]||J,prevCards:[],currentSelection:null,prevSelections:[],displacedSelections:[],userTextInput:{},error:"",reportReason:t.props.reportReason||"",modalCloseTracked:!1,targetUnknown:!1,reportContext:t.props.reportContentType},t.renderPrimer=function(){return o.createElement(y.fb,{margin:{top:1}},o.createElement(y.Ca,null,Object(c.d)("We are going to ask you a few questions to help us investigate your report quickly and accurately.","ReportModalWizard")))},t.renderButtons=function(){var e=Object(c.d)("Close","ReportModalWizard"),n=t.handleClose,i=ae,r=!1,a=t.state.prevCards.length?t.renderBack():null;switch(t.state.currentCard.type){case _.MultipleChoice:e=Object(c.d)("Next","ReportModalWizard"),n=t.handleNext,i=oe,r=!t.state.currentSelection;break;case _.Confirm:e=Object(c.d)("Submit Report","ReportModalWizard"),n=t.handleSubmit,r=!t.state.userTextInput,i=se}return o.createElement(y.fb,null,a,o.createElement(y.C,{onClick:n,disabled:r,"data-test-selector":i},o.createElement(y.fb,{padding:{x:1}},e)))},t.renderBack=function(){return o.createElement(y.fb,{margin:{right:1},display:y.Da.InlineBlock},o.createElement(y.C,{type:y.I.Hollow,onClick:t.handleBack,"data-test-selector":re},o.createElement(y.fb,{padding:{x:1}},Object(c.d)("Back","ReportModalWizard"))))},t.getTitle=function(){return t.state.currentCard.getTitle&&t.props.targetUser.displayName&&t.props.targetUser.id?t.state.targetUnknown?t.state.currentCard.getTitle(Object(c.d)("Another User","ReportModalWizard")):t.state.currentCard.getTitle(t.props.targetUser.displayName):t.state.targetUnknown?Object(c.d)("Report User","ReportModalWizard"):t.props.title},t.handleClose=function(){t.setState({modalCloseTracked:!0},function(){return t.props.trackClose(L.Finish,t.state.currentCard.value,t.getChoiceIndex())}),t.props.onClose()},t.getChoiceIndex=function(){var e=0;return t.state.currentCard&&t.state.currentCard.items&&(e=t.state.currentCard.items.findIndex(function(e){return t.state.currentSelection===e})+1),e>=1?e:void 0},t.handleNext=function(){if(t.state.currentSelection&&t.state.currentSelection.value){var e=t.state.currentCard,n=t.state.prevCards.concat(e),i=t.state.prevSelections.concat(t.state.currentSelection),r=t.state.displacedSelections[t.state.displacedSelections.length-1],a=t.state.currentSelection.differentTarget||t.state.targetUnknown,o=t.state.currentSelection.reportContext||t.state.reportContext,s=t.getChoiceIndex(),l=e.nextCard||Z;te[t.state.currentSelection.value]&&(l=te[t.state.currentSelection.value]);var c=t.state.currentSelection.reportReason||t.state.reportReason,d=l.type===_.Info;t.setState({currentCard:l,reportReason:c,prevCards:d?[]:n,prevSelections:i,targetUnknown:a,currentSelection:r||null,displacedSelections:t.state.displacedSelections.slice(0,-1),reportContext:o},function(){return t.trackNavigation(M.Next,e.value,s)})}},t.createReportDescription=function(){return""+(t.state.reportContext!==t.props.reportContentType?"report context: "+t.props.reportContentType+"\n\n":"")+t.state.prevSelections.map(function(e){if(!e.omitFromDescription)return e.value}).filter(function(e){return!!e}).join(" > ")+"\n\n"+Object.keys(t.state.userTextInput).map(function(e){return e+": "+t.state.userTextInput[e]}).join("\n")},t.requiredInputsNonEmpty=function(){if(t.state.currentCard.items)return 0===t.state.currentCard.items.filter(function(e){if(e.type!==r.Textarea||!e.required)return!1;var n=t.state.userTextInput[e.value],i=n&&0===n.trim().length;return!n||i}).length},t.handleSubmit=function(){return a.__awaiter(t,void 0,void 0,function(){var e,t,n,i,r,o=this;return a.__generator(this,function(a){switch(a.label){case 0:return e=Object(c.d)("Additional information is required.","ReportModalWizard"),this.requiredInputsNonEmpty()?(t=this.state.reportReason||"other",n=this.createReportDescription(),[4,this.props.onSubmit(t,n,this.state.reportContext)]):[3,2];case 1:switch(a.sent(),this.props.submitStatus){case I.a.FormError:this.setState({error:e});break;case I.a.Success:i=ee,ne[t]&&(i=ne[t]),this.state.currentCard.nextCard&&(i=this.state.currentCard.nextCard),r=this.getChoiceIndex(),this.setState({currentCard:i,prevCards:[],prevSelections:[],currentSelection:null,displacedSelections:[],userTextInput:{},error:""},function(){return o.trackNavigation(M.Submit,void 0,r)});break;case I.a.UserError:this.setState({error:Object(c.d)("This account could not be reported. It may have already been suspended, or the owner may have deleted it.","ReportModalWizard")});break;case I.a.MutationError:default:this.setState({error:Object(c.d)("Sorry, a network error occurred when submitting your report. Please try again later.","ReportModalWizard")})}return[3,3];case 2:this.props.onError(I.a.FormError),this.setState({error:e}),a.label=3;case 3:return[2]}})})},t.handleBack=function(){return a.__awaiter(t,void 0,void 0,function(){var e,t,n,i,r,o,s=this;return a.__generator(this,function(a){return e=this.state.currentCard,t=this.state.prevCards[this.state.prevCards.length-1],n=this.state.prevSelections[this.state.prevSelections.length-1],i=!n.differentTarget&&this.state.targetUnknown,r=this.getChoiceIndex(),o=this.state.displacedSelections,this.state.currentSelection&&(o=o.concat(this.state.currentSelection)),t&&n&&this.setState({currentCard:t,currentSelection:n,displacedSelections:o,prevCards:this.state.prevCards.slice(0,-1),prevSelections:this.state.prevSelections.slice(0,-1),error:"",targetUnknown:i},function(){return s.trackNavigation(M.Back,e.value,r)}),[2]})})},t.handleTextInput=function(e,n){var i=t.state.userTextInput;i[e]=n,t.setState({userTextInput:i})},t.handleSelection=function(e){if(t.state.currentCard.items&&e!==t.state.currentSelection){var n=t.state.targetUnknown;if(n)n=0===t.state.displacedSelections.filter(function(e){return e.differentTarget}).length;var i=t.state.reportContext;(t.state.displacedSelections.filter(function(e){return e.reportContext}).length||t.state.currentSelection&&t.state.currentSelection.reportContext)&&(i=t.props.reportContentType),t.setState({currentSelection:e,displacedSelections:[],userTextInput:{},targetUnknown:n,reportContext:i})}},t.trackNavigation=function(e,n,i){t.props.trackAction(e,n,t.state.currentCard.value,i)},t}return a.__extends(t,e),t.prototype.componentWillUnmount=function(){this.state.modalCloseTracked||this.props.trackClose(L.Close,this.state.currentCard.value,this.getChoiceIndex())},t.prototype.render=function(){var e=this.state.currentCard.type===_.Info&&this.state.currentCard.blockPrompt?o.createElement(N,{targetUser:this.props.targetUser,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,userBlocked:this.props.userBlocked}):null,t=this.state.error?o.createElement(y.Ob,{fullWidth:!0,margin:{bottom:1},padding:1,className:"reporting__error-container"},this.state.error):null,n=this.state.prevCards.length||this.state.currentCard.type===_.Info?null:this.renderPrimer();return o.createElement(y.Ob,{className:"reporting-wizard",display:y.Da.Flex,margin:{x:1},flexDirection:y.Ga.Column,fullHeight:!0,"data-test-card-value":this.state.currentCard.value},t,o.createElement(y.Ca,{bold:!0,fontSize:y.Ia.Size4},this.getTitle()),n,o.createElement(y.fb,{margin:{y:1}},o.createElement(O,{currentCard:this.state.currentCard,currentSelection:this.state.currentSelection,targetUser:this.props.targetUser,targetUserID:this.props.targetUser.id,onChangeRadio:this.handleSelection,onChangeText:this.handleTextInput,userTextInputs:this.state.userTextInput,error:this.props.submitStatus===I.a.FormError&&!!this.state.error}),e),this.renderButtons())},t}(o.Component),ce=n("s8Ou"),de=n("0hI/");n.d(t,"c",function(){return M}),n.d(t,"a",function(){return L}),n.d(t,"b",function(){return me}),function(e){e.Close="close",e.Open="open",e.Submit="submit_report",e.ToggleSettings="modal_settings"}(T||(T={})),function(e){e.Back="back",e.Close="close",e.Open="open",e.Next="next",e.Submit="submit_report",e.ToggleSettings="modal_settings"}(M||(M={})),function(e){e.Close="close",e.Finish="finish"}(L||(L={}));var ue=function(e){function t(t){var n=e.call(this,t)||this;n.handleSubmit=function(e,t,i){return a.__awaiter(n,void 0,void 0,function(){var n,r,o,s,l=this;return a.__generator(this,function(a){switch(a.label){case 0:if(n=i===b.Fa.WHISPER_REPORT?i:this.props.reportContext.contentType,r=b.Fa[n],null===(o={description:t,reason:e,content:r,contentID:this.props.reportContext.contentID,extra:this.props.reportContext.extra,targetID:this.props.data.targetUser.id}).targetID)return this.setState({submitStatus:I.a.UserError}),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.props.reportUser(Object(p.a)(o))];case 2:return a.sent(),this.setState({submitStatus:I.a.Success},function(){l.state.showWizard||l.trackAction(T.Submit)}),[3,4];case 3:return s=a.sent(),c.k.error(s,"ReportUser Mutation failed."),this.setState({submitStatus:I.a.MutationError}),[3,4];case 4:return[2]}})})},n.handleChildError=function(e){return n.setState({submitStatus:e})},n.handleClose=function(){n.props.onClose&&n.props.onClose(n.state.submitStatus,n.state.userBlocked)},n.onBlock=function(){n.props.blockUserMutation(n.props.data.targetUser.id,void 0,void 0,a.__assign({},n.props.sessionUser,{__typename:"User"})),n.setState({userBlocked:!0}),n.props.sessionUser&&n.props.sessionUser.login&&n.props.data.targetUser&&n.props.data.targetUser.login&&Object(h.b)({context:h.a.ReportWizard,targetUserLogin:n.props.data.targetUser.login,currentUserLogin:n.props.sessionUser.login})},n.onUnblock=function(){n.props.unblockUserMutation(n.props.data.targetUser.id,a.__assign({},n.props.sessionUser,{__typename:"User"})),n.setState({userBlocked:!1})},n.trackOpen=function(e){n.state.openEventSent||(n.state.showWizard?n.trackWizardAction(M.Open,void 0,e):n.trackAction(T.Open),n.setState({openEventSent:!0}))},n.trackClose=function(e,t,i){n.state.closeEventSent||(n.state.showWizard?n.trackWizardAction(M.Close,t,void 0,i,e):n.trackAction(T.Close),n.setState({closeEventSent:!0}))},n.trackWizardAction=function(e,t,i,r,a){c.q.tracking.track(v.SpadeEventType.ReportWizardFlowAction,{ui_context:n.props.reportContext.contentType,target_user_id:n.props.reportContext.targetUserID,report_sent:n.state.submitStatus===I.a.Success,modal_type:"wizard_v2",extra_user_id:n.props.reportContext.additionalTrackingID,action:e,close_type:a,report_session_id:n.reportID,current_step:t,navigated_to:i,choice_index:r})},n.trackAction=function(e){c.q.tracking.track(v.SpadeEventType.ReportFlowAction,{ui_context:n.props.reportContext.contentType,target_user_id:n.props.reportContext.targetUserID,report_sent:n.state.submitStatus===I.a.Success,extra_user_id:n.props.reportContext.additionalTrackingID,action:e,report_session_id:n.reportID})},n.reportID=Object(g.a)();var i=c.q.experiments.getAndTrackAssignment(f.b.NewReportingWizard);return n.state={submitStatus:I.a.Unsubmitted,showWizard:"yes"===i,openEventSent:!1,closeEventSent:!1,userBlocked:!1},n}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.trackOpen()},t.prototype.componentWillUnmount=function(){this.handleClose(),this.state.showWizard||this.trackClose()},t.prototype.render=function(){if(this.props.data.error)return o.createElement(y.fb,{margin:{bottom:1}},o.createElement(y.Ca,{fontSize:y.Ia.Size5},Object(c.d)("There was an unexpected error. Please refresh the page and try again","ReportUser")));if(this.props.data.loading)return o.createElement(y.sb,{lineCount:3});if(this.props.data.targetUser){var e={onClose:this.handleClose,onError:this.handleChildError,onSubmit:this.handleSubmit,reportContentType:this.props.reportContext.contentType,submitStatus:this.state.submitStatus,title:this.props.title,defaultDescription:this.props.defaultDescription};return this.state.showWizard?this.props.data.loading?o.createElement(y.hb,null):o.createElement(le,a.__assign({},e,{user:this.props.sessionUser,onBlock:this.onBlock,onUnblock:this.onUnblock,targetUser:this.props.data.targetUser,trackAction:this.trackWizardAction,trackClose:this.trackClose,userBlocked:this.userBlocked})):o.createElement(I.b,a.__assign({},e,{targetUser:this.props.data.targetUser}))}return o.createElement(y.fb,{margin:{bottom:1}},o.createElement(y.Ca,{fontSize:y.Ia.Size5},Object(c.d)("The user you are trying to report does not exist","ReportUser")))},Object.defineProperty(t.prototype,"userBlocked",{get:function(){var e=this;return!!(this.props.data.currentUser&&this.props.data.currentUser.blockedUsers&&this.props.data.currentUser.blockedUsers.find(function(t){return!!t&&t.id===e.props.reportContext.targetUserID}))},enumerable:!0,configurable:!0}),t}(o.Component);var me=Object(l.compose)(Object(d.a)(ce,{name:"reportUser"}),Object(d.a)(de,{options:function(e){return{variables:{targetUserID:e.reportContext.targetUserID}}}}),Object(k.withLatencyTracking)("ReportUser",{autoReportInteractive:!0}),Object(u.a)(),Object(m.a)(),Object(s.connect)(function(e){return{sessionUser:e.session.user}},null))(ue)},djOf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_ChannelInfoBar_EditButton"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGlobalMod"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:114}};n.loc.source={body:"query ChannelPage_ChannelInfoBar_EditButton {\ncurrentUser {\nid\nlogin\nroles {\nisStaff\nisGlobalMod\nisSiteAdmin\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},e7rh:function(e,t,n){},eAAt:function(e,t,n){"use strict";var i=n("q1tI"),r=n("kduP"),a=n("Ue10"),o=function(e){return i.createElement(a.Xa,{margin:{right:1},overflow:a.mb.Hidden,flexShrink:0},i.createElement(a.Aa,{to:{pathname:Object(r.c)(e.name),state:{content:"current_game",medium:"twitch_channel"}},"data-a-target":"stream-box-art-link"},i.createElement(a.L,{src:e.boxArtURL,alt:e.name,aspect:a.s.Aspect3x4,size:e.size})))};n.d(t,"a",function(){return o})},eAdp:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateVideoBookmark"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateVideoBookmarkInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createVideoBookmark"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"videoBookmark"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:140}};n.loc.source={body:"mutation CreateVideoBookmark($input: CreateVideoBookmarkInput!) {\ncreateVideoBookmark(input: $input){\nvideoBookmark{\nid\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},eaNi:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MultiStream_SubscribeModal_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bannerImageURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"300"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paidUpgradePromotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pendingSubscription"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startsAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"gift"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isGift"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"requestInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:492}};n.loc.source={body:"query MultiStream_SubscribeModal_User($login: String!) {\nuser(login: $login) {\nid\ndisplayName\nbannerImageURL\nprofileImageURL(width:300)\nsubscriptionProducts {\nid\nemoteSetID\nname\nself {\npaidUpgradePromotion {\nnewPrice\n}\n}\n}\nself {\ncanPrimeSubscribe\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\nmonths\n}\nsubscriptionBenefit {\nid\npurchasedWithPrime\ntier\npendingSubscription {\nstartsAt\n}\ngift {\nisGift\n}\n}\n}\n}\ncurrentUser {\nid\nroles {\nisStaff\n}\n}\nrequestInfo {\ncountryCode\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},ecb7:function(e,t,n){},efEE:function(e,t,n){},ehEd:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a});var i="https://static-cdn.jtvnw.net/jtv_user_pictures/xarth/404_user_150x150.png",r=function(e){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/1.0"},a=function(e){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/2.0 2x"}},fCiU:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var i=n("p52R"),r=/^[\x00-\x7F]*$/,a=function(e){return!r.test(e)},o=function(e){return a(e.displayName)?e.displayName+" ("+e.name+")":e.displayName},s=function(e,t){return{userID:e.id,userDisplayName:e.displayName,userType:i.a.User,isIntl:a(e.displayName),userLogin:e.name,color:t}}},fGoN:function(e,t,n){},fI4C:function(e,t,n){"use strict";n.d(t,"c",function(){return p}),n.d(t,"d",function(){return h}),n.d(t,"b",function(){return g}),n.d(t,"a",function(){return f}),n.d(t,"m",function(){return b}),n.d(t,"l",function(){return v}),n.d(t,"f",function(){return k}),n.d(t,"g",function(){return C}),n.d(t,"e",function(){return y}),n.d(t,"i",function(){return S}),n.d(t,"h",function(){return E}),n.d(t,"j",function(){return N}),n.d(t,"k",function(){return _});var i=n("mrSG"),r=n("/7QA"),a=n("vRsq"),o=n("2xye"),s=n("L9xt"),l=n("I6K6"),c=n("ahza"),d=n("DpwM"),u=n("BQs+"),m=n("CJLt"),p="replay_mode",h="timestamp_mode",g="on",f="off",b=function(e){r.p.track(s.SpadeEventType.VideoChatSettingChanged,e)},v=function(e,t){return i.__awaiter(void 0,void 0,void 0,function(){var n,c,d,p;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,r.q.apollo.client.query({query:m,variables:{videoCreatorID:e.channelId,videoID:e.contentId}})];case 1:return n=i.sent().data,c={channel:n.video.owner.login,channel_id:Number(e.channelId),game:n.video.game?n.video.game.name:null,location:o.PageviewLocation.VideoWatchPage,share_platform:u.a.Link,share_context:o.ShareItemContext.Chomment,shared_item_id:Object(a.p)(e.contentId),shared_item_type:Object(l.a)(n.video.broadcastType),shared_item_url:t.toString(),partner:n.video.owner.roles.isPartner,source_item_id:e.id,source_item_type:o.SourceItemType.Chomment},d=D(e,n,u.a.Link),r.p.track(s.SpadeEventType.ChommentUIAction,d),r.p.track(s.SpadeEventType.ShareItem,c),[3,3];case 2:return p=i.sent(),r.k.error(p.toString(),v.name),[3,3];case 3:return[2]}})})},k=function(e,t){var n=e.users[0],i=e.comments[0];return{channel:t.user.login,channel_id:Number(i.channelId),comment_id:i.id,comment_state:i.state,event_source:"frontend",game:t.video.game?t.video.game.name:null,login:n.name,play_session_id:r.p.getVideoPlayerTrackingData().playSessionID,reply_to_comment_id:Object(d.h)(i)?i.parentId:null,user_id:Number(n.id),vod_id:Number(i.contentId),vod_title:t.video.title,vod_ts:i.contentOffset,vod_type:Object(l.a)(t.video.broadcastType)}},C=function(e,t,n){return{author_id:Number(e.comment.commenter),author_login:n.users[1].login,channel:n.users[0].login,channel_id:Number(e.comment.channelId),comment_id:e.comment.id,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,user_id:Number(t.session.user.id),vod_id:Number(e.comment.contentId),vod_title:n.video.title,vod_type:Object(l.a)(n.video.broadcastType),vod_ts:e.comment.contentOffset}},y=function(e,t,n){return{action:"ban_user",author_id:Number(e.bannedUser),channel_id:Number(e.targetChannel),event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,target_user_id:Number(e.bannedUser),user_id:Number(t.session.user.id),vod_id:Number(n.video.id),vod_title:n.video.title,vod_type:Object(l.a)(n.video.broadcastType),vod_ts:e.comment.contentOffset}},S=function(e,t,n){return{action:"delete",author_id:Number(e.commenter),author_login:n.users[1].login,channel:n.users[0].login,channel_id:Number(e.channelId),comment_id:e.id,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,reply_to_comment_id:e.parentId?e.parentId:null,user_id:Number(t.session.user.id),vod_id:Number(e.contentId),vod_title:n.video.title,vod_type:Object(l.a)(n.video.broadcastType),vod_ts:e.contentOffset}},E=function(e,t,n){var i=null,r=Object.keys(t.vodChat.comments.comments.parentComments);if(r.length>0){var a=r[0];i=t.vodChat.comments.comments.parentComments[a].channelId}return{action:"create",channel_id:i?Number(i):null,comment_body:e.message,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user?t.session.user.login:null,reply_to_comment_id:Object(c.e)(e)?e.parentId:null,user_id:t.session.user?Number(t.session.user.id):null,vod_id:Number(n.video.id),vod_title:n.video.title,vod_ts:Object(c.e)(e)?null:Number(e.contentOffsetSeconds),vod_type:Object(l.a)(n.video.broadcastType)}},N=function(e,t,n){var i=e.comment.id,r=e.comment.channelId;return{action:e.state===d.c?"publish":"unpublish",channel_id:Number(r),comment_id:i,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,user_id:Number(t.session.user.id),vod_id:Number(n.video.id),vod_title:n.video.title,vod_ts:e.comment.contentOffset,vod_type:Object(l.a)(n.video.broadcastType)}},_=function(e,t,n){return{action:"sync_vod_to_time",author_id:Number(e.commenter),channel:n.user.login,channel_id:Number(e.channelId),comment_id:e.id,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user?t.session.user.login:null,user_id:t.session.user?Number(t.session.user.id):null,vod_id:Number(e.contentId),vod_title:n.video.title,vod_ts:e.contentOffset,vod_type:Object(l.a)(n.video.broadcastType)}},D=function(e,t,n){return{action:"share",author_id:Number(e.commenter),channel:t.video.owner.login,channel_id:Number(e.channelId),comment_id:e.id,event_source:"frontend",game:t.video.game?t.video.game.name:null,login:t.currentUser?t.currentUser.login:null,user_id:t.currentUser?Number(t.currentUser.id):null,vod_id:Number(e.contentId),vod_title:t.video.title,vod_ts:e.contentOffset,vod_type:Object(l.a)(t.video.broadcastType),share_platform:n}}},fIj0:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatChannelAndVideoTrackingContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:186}};n.loc.source={body:"query VideoChatChannelAndVideoTrackingContext($videoCreatorID: ID $videoID: ID) {\nvideo(id: $videoID) {\nid\nbroadcastType\ntitle\ngame {\nid\nname\n}\n}\nuser(id: $videoCreatorID) {\nid\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},fKMw:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),r=n("yR8l"),a=n("sMoq");function o(){var e=this;return Object(r.a)(a,{props:function(t){return{vipUserMutation:function(n){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return t.mutate&&t.ownProps.channelID?[4,t.mutate({variables:{input:{channelID:t.ownProps.channelID,granteeLogin:n}}})]:[2];case 1:return[2,e.sent().data]}})})}}}})}},fOWB:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"LiveEventBanner_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"liveEvent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"LiveEventBanner_EventLeaf"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"LiveEventBanner_EventLeaf"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EventLeaf"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:198}};n.loc.source={body:"query LiveEventBanner_User($login: String!) {\nuser(login: $login) {\nid\nliveEvent {\n...LiveEventBanner_EventLeaf\n}\n}\n}\nfragment LiveEventBanner_EventLeaf on EventLeaf {\nid\ntitle\nparent {\nid\ntitle\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},fQWD:function(e,t,n){"use strict";var i=n("vHGB");n.d(t,"a",function(){return i.a})},fezU:function(e,t,n){"use strict";var i,r=n("mrSG"),a=n("q1tI"),o=n("1rIY"),s=n("1MDS"),l=n("oK83"),c=(i=Object(o.a)("ViewerCardContext",{viewerCardOptions:null,onShowViewerCard:function(){return null},onShowExtensionMessageCard:function(){return null},onShowEmoteCard:function(){return null},hideViewerCard:function(){return null}})).InnerProvider,d=i.withContext,u=function(e){function t(t){var n=e.call(this,t)||this;return n.onShowViewerCard=function(e,t,i,r){n.setState(function(n){var a=n.viewerCardOptions;return a&&a.targetID===e?{viewerCardOptions:null}:{viewerCardOptions:{viewerCardType:l.c.Viewer,initialTopOffset:r,sourceID:i,sourceType:t,targetID:e}}})},n.onShowExtensionMessageCard=function(e,t,i,r){n.setState(function(n){var a=n.viewerCardOptions;return a&&a.viewerCardType===l.c.Extension&&a.targetID===e?{viewerCardOptions:null}:{viewerCardOptions:{viewerCardType:l.c.Extension,initialTopOffset:r,sourceID:i,targetID:e,extensionVersion:t}}})},n.onShowEmoteCard=function(e){n.setState(function(t){var n=t.viewerCardOptions;return n&&n.viewerCardType===l.c.Emote&&n.emoteID===e.emoteID?{viewerCardOptions:null}:{viewerCardOptions:{viewerCardType:l.c.Emote,initialTopOffset:e.initialTopOffset||0,sourceID:e.sourceID,emoteSourceType:e.emoteSourceType,targetID:e.referrerID,emoteID:e.emoteID,emoteCode:e.emoteCode}}}),Object(s.c)({emoteLocation:Object(s.b)(e.emoteSourceType),emoticonID:e.emoteID,chatChannel:e.channelLogin,chatChannelID:e.channelID?e.channelID:"",referrerUserID:e.referrerID,action:s.a.Open,msgID:e.sourceID})},n.hideViewerCard=function(){n.setState({viewerCardOptions:null})},n.state={viewerCardOptions:null,onShowViewerCard:n.onShowViewerCard,onShowExtensionMessageCard:n.onShowExtensionMessageCard,onShowEmoteCard:n.onShowEmoteCard,hideViewerCard:n.hideViewerCard},n}return r.__extends(t,e),t.prototype.render=function(){return a.createElement(c,{value:this.state},this.props.children)},t}(a.Component);n.d(t,!1,function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"a",function(){return u})},frkH:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_DenyRejectedChatMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DenyRejectedChatMessageInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"denyRejectedChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:138}};n.loc.source={body:"mutation Chat_DenyRejectedChatMessage($input: DenyRejectedChatMessageInput!) {\ndenyRejectedChatMessage(input: $input) {\nmessage {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},fxMP:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return m}),n.d(t,"g",function(){return p}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return g}),n.d(t,"b",function(){return f});var i=n("i6WW"),r=n("6j5V"),a=n("XmgI"),o=n("4h+t"),s=n("gTu3"),l=n("RcPG"),c=n("a1OF"),d="/me ";function u(e,t,n){var i=e.content.text.startsWith(d);return p(e.content.fragments,i,n,t||Object(o.a)(),e.sender&&e.sender.login||void 0)}function m(e,t){return p(e.content.fragments,!1,t)}function p(e,t,n,o,u){var m=[];return e.forEach(function(e,p){if(null!==e){var h=e.content||{__typename:"Text"};switch(h.__typename){case"Emote":if(!h.emoteID)return;m.push({type:l.a.Emote,content:{alt:e.text,emoteID:h.emoteID,images:{themed:!1,sources:{"1x":Object(c.d)(h.emoteID,1),"2x":Object(c.d)(h.emoteID,2),"4x":Object(c.d)(h.emoteID,4)}}}});break;case"CheermoteToken":if(!o)return;var g=h.prefix,f=h.bitsAmount,b=h.tier,v=o.indexedActions[g],k=v&&v.indexedTiers.get(b);k?m.push({type:l.a.Emote,content:{alt:g,images:Object(a.d)(k),cheerAmount:f,cheerColor:k.color}}):m.push(Object(r.a)(e.text));break;case"User":var C=s.a.Default;n&&h.login===n?C=s.a.Recipient:n&&u&&u===n&&(C=s.a.Sender),m.push({type:l.a.Mention,content:{recipient:e.text.slice(1),currentUserMentionRelation:C}});break;case"AutoMod":m.push({type:l.a.ModeratedText,content:e.text});break;default:var y=Object(i.a)(e.text,{parseClips:!0,parseVods:!0});if(y)m.push(y);else{var S=e.text;t&&0===p&&S.startsWith(d)&&(S=S.substr(3)),m.push(Object(r.a)(S))}}}}),m}function h(e){var t=e.data,n=t.message,i=t.cursor,r=g(n.content.fragments),a=f(n.sender.badges);return{cursor:""+i,node:{id:n.id,deletedAt:null,sentAt:n.sent_at,content:{text:n.content.text,fragments:r,__typename:"RoomMessageContent"},sender:{id:n.sender.user_id,login:n.sender.login,chatColor:n.sender.chat_color,displayName:n.sender.display_name,displayBadges:a,__typename:"User"},__typename:"RoomMessage"},__typename:"RoomMessageEdge"}}function g(e){return e.map(function(e){var t={text:e.text,content:null,__typename:"RoomMessageFragment"},n=e.cheermote,i=e.emoticon,r=e.mention,a=e.text;return n?t.content={bitsAmount:n.bits_amount,prefix:n.prefix,tier:n.tier,__typename:"CheermoteToken"}:i?t.content={emoteID:i.id,setID:i.set_id,token:a,__typename:"Emote"}:r&&(t.content={id:r.user_id,login:r.login,displayName:r.display_name,__typename:"User"}),t})}function f(e){return e.map(function(e){return{setID:e.id,version:e.version,__typename:"Badge"}})}},g17B:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_ChannelCheermotes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"prefix"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tiers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"images"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"theme"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isAnimated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dpiScale"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"canCheer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"canShowInBitsCard"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:220}};n.loc.source={body:"query Chat_ChannelCheermotes($channelLogin: String) {\nuser(login: $channelLogin) {\nid\ncheer {\nid\nemotes {\nprefix\ntiers {\nid\nbits\ncolor\nimages {\nid\nurl\ntheme\nisAnimated\ndpiScale\n}\ncanCheer\ncanShowInBitsCard\n}\ntype\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},g807:function(e,t,n){"use strict";var i=n("RNNG"),r=function(){function e(e){this.videoComments=e,this.currentOffset=e.minOffset}return e.prototype[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.videoComments.offsets[e.currentOffset]||[],n={done:e.currentOffset>e.videoComments.maxOffset,value:{offset:e.currentOffset,comments:t}};return e.currentOffset++,n}}},e}();n.d(t,"b",function(){return i.b}),n.d(t,"c",function(){return i.c}),n.d(t,!1,function(){return i.d}),n.d(t,!1,function(){return i.e}),n.d(t,"d",function(){return i.f}),n.d(t,!1,function(){}),n.d(t,"a",function(){return r})},gDzh:function(e,t,n){},gFHd:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ShareVideo_Content"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hasVideo"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hasCollection"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"includePrivate"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"hasVideo"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"collectionID"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"hasCollection"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:451}};n.loc.source={body:"query ShareVideo_Content($videoID: ID! $collectionID: ID! $hasVideo: Boolean! $hasCollection: Boolean!) {\n# If the page specifies a video ID query it directly.\nvideo(id: $videoID options: { includePrivate: true }) @include(if: $hasVideo) {\nid\nowner {\nid\ndisplayName\n}\ntitle\n}\n# If the page is a collection page grab the first video from the collection.\ncollection(id: $collectionID) @include(if: $hasCollection) {\nid\nowner {\nid\ndisplayName\n}\ntitle\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},gIsd:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ReportUserModal_ReportReasons"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportContentType"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportReasons"},arguments:[{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:114}};n.loc.source={body:"query ReportUserModal_ReportReasons($content: ReportContentType!) {\nreportReasons(content: $content) {\nid\ntext\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},gMwc:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoMarkersChatCommand"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:115}};n.loc.source={body:"query VideoMarkersChatCommand($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\nstream {\nid\ncreatedAt\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},gO1k:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_DeleteChatMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeleteChatMessageInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"responseCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:182}};n.loc.source={body:"mutation Chat_DeleteChatMessage($input: DeleteChatMessageInput!) {\ndeleteChatMessage(input: $input) {\nresponseCode\nmessage {\nid\nsender {\nid\nlogin\ndisplayName\n}\ncontent {\ntext\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},gPTj:function(e,t,n){},gTu3:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.Default=0]="Default",e[e.Recipient=1]="Recipient",e[e.Sender=2]="Sender"}(i||(i={}))},gcd7:function(e,t,n){"use strict";var i=n("/MKj"),r=n("fvjX"),a=n("+pBb"),o=n("mrSG"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.componentWillMount=function(){this.props.addCommand(this.props.command,this.props.handler,this.props.channelLogin)},t.prototype.componentWillReceiveProps=function(e){this.props.command===e.command&&this.props.handler===e.handler&&this.props.channelLogin===e.channelLogin||(this.props.removeCommand(this.props.command,this.props.handler,this.props.channelLogin),this.props.addCommand(e.command,e.handler,e.channelLogin))},t.prototype.componentWillUnmount=function(){this.props.removeCommand(this.props.command,this.props.handler,this.props.channelLogin)},t.prototype.render=function(){return null},t}(n("q1tI").PureComponent);var l=Object(i.connect)(null,function(e){return Object(r.bindActionCreators)({addCommand:a.z,removeCommand:a.S},e)})(s);n.d(t,"a",function(){return l})},grjI:function(e,t,n){},i6WW:function(e,t,n){"use strict";var i=n("RcPG"),r=new RegExp("(?:^|\\s)(?:https?://)?clips.twitch.tv/(\\w+)(?:/)?(\\w+)?(?:/edit)?(?:$|\\s)?"),a=new RegExp("(?:^|\\s)(?:https?:\\/\\/)?(?:www\\.)?twitch\\.tv\\/(\\w+)\\/clip\\/(\\w+)(?:$|\\s)?");var o=new RegExp("(?:^|\\s)(?:https?://)?(?:(?:www|go).)?twitch.tv/videos/(\\d+)(?:$|\\s)?");n.d(t,"a",function(){return l});var s=/^(?:(https?:\/\/)?((?:[\w#%\-+=:~]+\.)+[a-z]{2,8}(?:\/[\w./#%&()\-+=:?~]*)?))$/;function l(e,t){void 0===t&&(t={});var n=e.match(s);if(!n)return null;var l=n[1],c=n[2],d=""+(l||"https://")+c;if(t.parseClips&&function(e){void 0===e&&(e="");var t=r.test(e)&&!e.includes("clips.twitch.tv/2017/"),n=a.test(e);return t||n}(d)){var u=function(e){void 0===e&&(e="");var t=e.match(r);if(t&&t.length>0&&void 0!==t.index)return t[1];var n=e.match(a);return n&&n.length>0&&void 0!==n.index?n[2]:""}(d);if("create"!==u)return{type:i.a.ClipLink,content:{slug:u,url:d,displayText:e}}}if(t.parseVods&&function(e){return void 0===e&&(e=""),o.test(e)}(d)){var m=function(e){void 0===e&&(e="");var t=e.match(o);return null===t?"":t&&t.length>0&&void 0!==t.index?t[1]:""}(d);return{type:i.a.VideoLink,content:{id:m,url:d,displayText:e}}}return{type:i.a.Link,content:{displayText:e,url:d}}}},iS14:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("mrSG"),r=n("yR8l"),a=n("8jSG"),o=n("cMjZ"),s=n("zixI");function l(){var e=this;return Object(r.a)(s,{props:function(t){return{unblockUserMutation:function(n,r){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return t.mutate?[4,t.mutate({variables:{input:{targetUserID:n}},optimisticResponse:{unblockUser:{__typename:"UnblockUserPayload",targetUser:{__typename:"User",id:n}}},update:function(e){var t=e.readFragment({id:Object(o.a)(r),fragment:a});t&&(t.blockedUsers=t.blockedUsers.filter(function(e){return null!==e&&e.id!==n}),e.writeFragment({id:Object(o.a)(r),fragment:a,data:t}))}})]:[3,2];case 1:return e.sent(),[3,3];case 2:throw new Error("unblockUserMutation is not ready");case 3:return[2]}})})}}}})}},ifPV:function(e,t,n){},ilCE:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RaidUpsell_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetChannelLogin"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sourceChannelLogin"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"targetChannel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"targetChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"sourceChannel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"sourceChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewersCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:240}};n.loc.source={body:"query RaidUpsell_Channel($targetChannelLogin: String $sourceChannelLogin: String) {\ntargetChannel: user(login: $targetChannelLogin) {\nid\nlogin\ndisplayName\n}\nsourceChannel: user(login: $sourceChannelLogin) {\nid\nstream {\nid\nviewersCount\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},iyGE:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("mrSG"),r=n("yR8l"),a=n("Pub/"),o=n("HzXE"),s=n("4G6/"),l=n("4w0E");function c(e){var t=this;return Object(r.a)(l,{props:function(n){return{banUserMutation:function(r,l,c){return void 0===l&&(l=null),void 0===c&&(c=null),i.__awaiter(t,void 0,void 0,function(){var t,d;return i.__generator(this,function(u){switch(u.label){case 0:if(t=e(n.ownProps).channelID,!n.mutate||!t)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),d=null,"number"==typeof l?d=Object(s.a)(l):"string"==typeof l&&(d=l),[4,n.mutate({variables:{input:{channelID:t,bannedUserLogin:r,expiresIn:d,reason:c}},update:function(e,n){return function(e,t,n){if(t&&t.data&&t.data.banUserFromChatRoom&&t.data.banUserFromChatRoom.ban&&t.data.banUserFromChatRoom.ban.bannedUser&&t.data.banUserFromChatRoom.ban.bannedUser.id){var r=Object(a.a)(e,n,t.data.banUserFromChatRoom.ban.bannedUser.id);if(!r)return;e.writeQuery({query:o,variables:{targetUserID:t.data.banUserFromChatRoom.ban.bannedUser.id,channelID:n},data:i.__assign({},r,{chatRoomBanStatus:{isPermanent:t.data.banUserFromChatRoom.ban.isPermanent,__typename:"ChatRoomBanStatus"}})})}}(e,n,t)}})];case 2:return[2,u.sent().data];case 3:throw u.sent(),new Error("Unable to ban user");case 4:return[3,6];case 5:throw new Error("Ban user mutation is not ready");case 6:return[2]}})})}}}})}},"j+2s":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatList_Badges"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"selectedBadge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:256}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nquery ChatList_Badges($channelLogin: String!) {\nbadges {\n...badge\n}\nuser(login: $channelLogin) {\nid\nbroadcastBadges {\n...badge\n}\nself {\nselectedBadge {\n...badge\n}\ndisplayBadges {\n...badge\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("IKE4").definitions)),e.exports=i},j0ar:function(e,t,n){"use strict";var i=n("mrSG"),r=n("TSYQ"),a=n("q1tI"),o=n("x1M1"),s=n("Ue10"),l=(n("9KaG"),function(e){function t(t){var n=e.call(this,t)||this;return n.onImageLoad=function(){n.setState({imageLoaded:!0})},n.onMouseOver=function(){n.setState({isHovering:!0})},n.onMouseOut=function(){n.setState({isHovering:!1})},n.renderImage=function(){var e=null,t=r("chat-image",{"chat-image__animated":!!n.props.cheerText&&n.state.imageLoaded},n.props.className);if(n.props.srcSet.themed)e=a.createElement(s.Xa,{display:n.state.imageLoaded?s.Da.InlineBlock:s.Da.Hide},a.createElement(o.a,{alt:n.props.alt,className:t,defaultRes:n.props.srcKey,onLoad:n.onImageLoad,onMouseOver:n.onMouseOver,onMouseOut:n.onMouseOut,sources:n.props.srcSet}));else{for(var i=[],l=0,c=Object.keys(n.props.srcSet.sources);l<c.length;l++){var d=c[l];i.push(n.props.srcSet.sources[d]+" "+d)}e=a.createElement(s.Xa,{display:n.state.imageLoaded?s.Da.InlineBlock:s.Da.Hide},a.createElement("img",{className:t,onLoad:n.onImageLoad,onMouseOver:n.onMouseOver,onMouseOut:n.onMouseOut,src:n.props.srcSet.sources[n.props.srcKey],srcSet:i.join(","),alt:n.props.alt}))}return e},n.renderPlaceholder=function(){return n.state.imageLoaded?null:a.createElement(s.Xa,{display:s.Da.InlineBlock},a.createElement(s.Ca,{type:s.gc.Span,className:"chat-image__placeholder",align:s.uc.Top},a.createElement(s.sb,{height:28,width:28})))},n.state={imageLoaded:!1,isHovering:!1},n}return i.__extends(t,e),t.prototype.render=function(){var e;return e=this.state.isHovering&&this.state.imageLoaded?a.createElement(s.jc,{direction:this.props.tooltipDirection||s.lc.Top,label:this.props.alt,display:s.Da.Inline,offsetY:"0.9rem","data-a-target":"emote-name"},this.renderPlaceholder(),this.renderImage(),this.props.cheerText):a.createElement("span",{"data-a-target":"emote-name"},this.renderPlaceholder(),this.renderImage(),this.props.cheerText),this.props.cheerText?a.createElement(s.Ca,{type:s.gc.Span,noWrap:!0},e):e},t}(a.Component));n.d(t,"a",function(){return l})},jBwP:function(e,t,n){"use strict";var i,r=n("mrSG"),a=n("q1tI"),o=n("1rIY"),s=n("W/3w"),l=(i=Object(o.a)("ChatRoomStateContext",{followerDuration:s.a,followerMode:!1,slowMode:!1,slowModeDuration:120,subsOnlyMode:!1,updateRoomState:function(e){return null}})).InnerProvider,c=i.withContext,d=function(e){function t(t){var n=e.call(this,t)||this;return n.updateRoomState=function(e){n.setState(function(t){return{followerMode:void 0!==e.followersOnly?e.followersOnly:t.followerMode,followerDuration:void 0!==e.followersOnlyRequirement?e.followersOnlyRequirement:t.followerDuration,slowMode:void 0!==e.slowMode?e.slowMode:t.slowMode,slowModeDuration:e.slowModeDuration||t.slowModeDuration,subsOnlyMode:void 0!==e.subsOnly?e.subsOnly:t.subsOnlyMode}})},n.state={followerDuration:s.a,followerMode:!1,slowMode:!1,slowModeDuration:120,subsOnlyMode:!1,updateRoomState:n.updateRoomState},n}return r.__extends(t,e),t.prototype.render=function(){return a.createElement(l,{value:this.state},this.props.children)},t}(a.Component),u=d;n.d(t,!1,function(){return l}),n.d(t,"b",function(){return c}),n.d(t,!1,function(){return d}),n.d(t,"a",function(){return u})},jCkG:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"targetedModAction"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModLogsTargetedModActionsEntry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timestamp"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"targetedModActionDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"targetedModActionDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TargetedModActionDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bannedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"durationSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason"},arguments:[],directives:[]}]}}],loc:{start:0,end:361}};n.loc.source={body:"# fragments for targeted mod actions on the mod logs query\nfragment targetedModAction on ModLogsTargetedModActionsEntry {\nid\naction\ntimestamp\nchannel {\nid\nlogin\n}\ntarget {\nid\nlogin\n}\nuser {\nid\nlogin\n}\ndetails {\n...targetedModActionDetails\n}\n__typename\n}\nfragment targetedModActionDetails on TargetedModActionDetails {\nbannedAt\ndurationSeconds\nexpiresAt\nreason\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},jPLR:function(e,t,n){},je0y:function(e,t,n){},jeZI:function(e,t,n){},jh7r:function(e,t,n){"use strict";var i,r=n("TSYQ"),a=n("q1tI"),o=n("Ue10");n("kF1+");!function(e){e[e.Live=1]="Live",e[e.Overlay=2]="Overlay"}(i||(i={}));var s=function(e){var t=e.icon&&a.createElement(o.fb,{display:o.Da.Flex,margin:{right:.5}},a.createElement(o.Cb,{asset:e.icon,width:10,height:10}));if(e.withBackground){var n=r("preview-card-stat",{"preview-card-stat--live":e.withBackground===i.Live});return a.createElement(o.Ob,{alignItems:o.i.Center,background:e.withBackground===i.Overlay?o.u.Overlay:void 0,borderRadius:o.A.Small,className:n,color:o.R.Overlay,display:o.Da.Flex,fontSize:o.Ia.Size6,justifyContent:o.eb.Center},t,a.createElement(o.Ca,null,e.value))}return a.createElement(o.Ob,{className:"preview-card-stat",color:o.R.Overlay,display:o.Da.Flex,padding:{x:.5}},t,a.createElement(o.Ca,null,e.value))};n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s})},jrTF:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsLeaderboard"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsLeaderboard"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsLeaderboardEdge"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"secondsRemaining"},arguments:[],directives:[]}]}}],loc:{start:0,end:185}};i.loc.source={body:'#import "twilight/features/bits/models/bits-leaderboard-edge-fragment.gql"\nfragment bitsLeaderboard on BitsLeaderboard {\nid\nitems {\nedges { ...bitsLeaderboardEdge }\n}\nsecondsRemaining\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("3ag2").definitions)),e.exports=i},jsEL:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("u5aL"),s=n("Ue10"),l=(n("wC0O"),{TITLE:"clips-modal-title",MAIN_BODY:"clips-modal-main-body",SUCCESS_BODY:"clips-modal-success-body",ERROR_BODY:"clips-modal-error-body",SUBMIT_BUTTON:"clips-modal-submit-button",CANCEL_BUTTON:"clips-modal-cancel-button"}),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderSuccess=function(){return t.props.successContent?r.createElement(s.Ob,{"data-test-selector":l.SUCCESS_BODY,padding:{x:2,y:1},margin:{bottom:1},borderMarked:!0,background:s.u.Alt,fullWidth:!0},r.createElement(s.Ca,{type:s.gc.Strong},t.props.successContent)):null},t.renderError=function(){return t.props.errorContent?r.createElement(s.Ob,{"data-test-selector":l.ERROR_BODY,padding:{x:1,y:.5},margin:{bottom:1},borderMarked:!0,background:s.u.Alt,fullWidth:!0},r.createElement(s.Ca,{type:s.gc.Strong,color:s.R.Error},t.props.errorContent)):null},t.onSubmit=function(){t.props.onSubmit()},t}return i.__extends(t,e),t.prototype.render=function(){return this.props.successContent?r.createElement(o.a,{onClickOut:this.props.onClose},r.createElement(s.Ob,{padding:2,background:s.u.Base,className:"clip-modal"},this.renderSuccess(),r.createElement(s.fb,{display:s.Da.Flex,justifyContent:s.eb.Center},r.createElement(s.fb,{margin:{x:1}},r.createElement(s.C,{"data-test-selector":l.CANCEL_BUTTON,onClick:this.props.onClose},Object(a.d)("Close","ClipsModal")))))):r.createElement(o.a,{onClickOut:this.props.onClose},r.createElement(s.Ob,{padding:2,background:s.u.Base,className:"clip-modal"},r.createElement(s.Ob,{"data-test-selector":l.TITLE,borderBottom:!0,margin:{bottom:2},padding:{bottom:1}},this.props.title),r.createElement(s.Ob,{"data-test-selector":l.MAIN_BODY,borderBottom:!0,margin:{bottom:2},padding:{bottom:2}},this.renderError(),this.props.body),r.createElement(s.fb,{display:s.Da.Flex,justifyContent:s.eb.Center},r.createElement(s.fb,{margin:{x:1}},r.createElement(s.C,{"data-test-selector":l.CANCEL_BUTTON,type:s.I.Text,onClick:this.props.onClose},Object(a.d)("Cancel","ClipsModal"))),r.createElement(s.fb,{margin:{x:1}},r.createElement(s.C,{"data-test-selector":l.SUBMIT_BUTTON,type:this.props.buttonType?this.props.buttonType:s.I.Default,onClick:this.onSubmit,disabled:this.props.submitDisabled},this.props.buttonContent),this.props.isLoading&&r.createElement(s.hb,{delay:0})))))},t}(r.Component),d=n("iyGE"),u=n("GnwI"),m=86400,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isLoading:!1,hasErrored:!1,hasSucceeded:!1},t.renderTitle=function(){return t.props.isTemporary?r.createElement(s.Ca,{type:s.gc.H5,ellipsis:!0},Object(a.d)("Timeout this Clip Creator for 24 hours from Your Channel","ClipsModalBanUser")):r.createElement(s.Ca,{type:s.gc.H5,ellipsis:!0},Object(a.d)("Ban this Clip Creator from Your Channel","ClipsModalBanUser"))},t.renderBodyText=function(){return t.props.isTemporary?r.createElement(s.Ca,null,Object(a.d)("{clipCreator} will temporarily be timed out from creating clips and chatting in your channel for 24 hours.",{clipCreator:t.props.targetUser.displayName},"ClipsModalBanUser")):r.createElement(s.Ca,null,Object(a.d)("{clipCreator} will be permanently banned from creating clips and chatting in your channel.",{clipCreator:t.props.targetUser.displayName},"ClipsModalBanUser"))},t.renderButtonText=function(){return t.props.isTemporary?Object(a.d)("Timeout User","ClipsModalBanUser"):Object(a.d)("Ban User","ClipsModalBanUser")},t.renderSuccess=function(){return t.state.hasSucceeded?Object(a.d)("Success!","ClipsModalBanUser"):null},t.renderFailure=function(){return t.state.hasErrored?t.props.isTemporary?Object(a.d)("There was a problem timing out this clip creator","ClipsModalBanUser"):Object(a.d)("There was a problem banning this clip creator","ClipsModalBanUser"):null},t.banUser=function(){return i.__awaiter(t,void 0,void 0,function(){var e,t,n;return i.__generator(this,function(i){switch(i.label){case 0:this.setState({isLoading:!0,hasSucceeded:!1,hasErrored:!1}),e=this.props.targetUser.login,t=this.props.isTemporary?this.props.banUserMutation(e,m):this.props.banUserMutation(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t];case 2:return!(n=i.sent().banUserFromChatRoom)||n.error?this.setState({hasErrored:!0,isLoading:!1}):this.setState({hasSucceeded:!0,isLoading:!1}),[3,4];case 3:return i.sent(),this.setState({hasErrored:!0,isLoading:!1}),[3,4];case 4:return[2]}})})},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return r.createElement(c,{onSubmit:this.banUser,onClose:this.props.onClose,title:this.renderTitle(),body:this.renderBodyText(),buttonContent:this.renderButtonText(),buttonType:s.I.Alert,submitDisabled:this.state.isLoading||this.state.hasSucceeded,successContent:this.renderSuccess(),errorContent:this.renderFailure(),isLoading:this.state.isLoading})},t}(r.Component),h=Object(u.withLatencyTracking)("ClipsModalBanUser")(Object(d.a)(function(e){return{channelID:e.broadcasterID}})(p)),g=n("yR8l"),f=n("vUXZ");function b(e){return Object(g.a)(f,e)}var v=n("DJtx"),k=(n("n9Ey"),{isLoading:!1,hasErrored:!1,hasSucceeded:!1}),C=function(e){function t(t){var n=e.call(this,t)||this;return n.onDeleteClick=function(){return i.__awaiter(n,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:this.setState({isLoading:!0,hasSucceeded:!1,hasErrored:!1}),e.label=1;case 1:return e.trys.push([1,3,,4]),this.props.data.clip?[4,this.props.deleteClip(this.props.slug)]:[2];case 2:return e.sent(),this.setState({isLoading:!1,hasSucceeded:!0}),[3,4];case 3:return e.sent(),this.setState({isLoading:!1,hasErrored:!0}),[3,4];case 4:return[2]}})})},n.state=k,n}return i.__extends(t,e),t.prototype.render=function(){var e=[r.createElement(s.Ca,{key:"title",type:s.gc.H4},Object(a.d)("Delete This Clip","ClipsModalDelete")),r.createElement(s.fb,{key:"message",margin:{top:1}},r.createElement(s.Ca,{type:s.gc.P,color:s.R.Alt2},Object(a.d)("This clip will be permanently deleted.","ClipsModalDelete")))];if(!this.props.data.clip)return null;var t=null;this.props.data.clip.curator&&this.props.data.clip.curator.login&&(t=r.createElement("span",null," • ",Object(a.d)("Clipped by {curator}",{curator:this.props.data.clip.curator.login},"ClipsModalDelete")));var n=r.createElement(s.Ob,{display:s.Da.Flex,flexWrap:s.Ha.NoWrap},r.createElement(s.fb,{className:"clips-modal-delete__thumb",margin:{right:1}},r.createElement(s.r,{ratio:s.s.Aspect16x9},r.createElement("img",{src:this.props.data.clip.thumbnailURL}))),r.createElement(s.fb,null,r.createElement(s.Ca,{type:s.gc.H5},this.props.data.clip.title),r.createElement(s.Ca,{color:s.R.Alt2},Object(a.d)("{created, date, medium}",{created:new Date(this.props.data.clip.createdAt)},"ClipsModalDelete"),t),r.createElement(s.Ca,{color:s.R.Alt2},Object(a.d)("{viewCount, number} views",{viewCount:this.props.data.clip.viewCount},"ClipsModalDelete"))));return r.createElement(c,{onSubmit:this.onDeleteClick,onClose:this.props.onClose,title:e,body:n,buttonContent:Object(a.d)("Delete","ClipsModalDelete"),buttonType:s.I.Alert,submitDisabled:this.state.hasSucceeded||this.state.isLoading,successContent:this.state.hasSucceeded?Object(a.d)("Success!","ClipsModalDelete"):null,errorContent:this.state.hasErrored?Object(a.d)("There was a problem deleting this clip.","ClipsModalDelete"):null,isLoading:this.state.isLoading})},t}(r.Component),y=Object(g.a)(v)(b({props:function(e){return{deleteClip:function(t){return i.__awaiter(void 0,void 0,void 0,function(){var n;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e.mutate({variables:{input:{slugs:[t]}}})];case 1:return i.sent(),e.ownProps.onDelete&&e.ownProps.onDelete(t),[3,3];case 2:throw n=i.sent(),a.k.error(n,"Failed to delete clip"),n;case 3:return[2]}})})}}}})(C)),S=n("oJmH"),E=n("Vsf8"),N={isLoading:!1,hasErrored:!1,hasSucceeded:!1},_=function(e){function t(t){var n=e.call(this,t)||this;return n.deleteAll=function(){return i.__awaiter(n,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:this.setState({isLoading:!0,hasSucceeded:!1,hasErrored:!1}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.props.deleteAllClips(this.props.broadcastID,this.props.videoID)];case 2:return e.sent(),this.setState({isLoading:!1,hasSucceeded:!0}),[3,4];case 3:return e.sent(),this.setState({isLoading:!1,hasErrored:!0}),[3,4];case 4:return[2]}})})},n.renderSuccess=function(){return n.state.hasSucceeded?Object(a.d)("A request has been made to delete the clip. Please wait a few minutes for this to take effect.","ClipsModalDeleteAll"):null},n.renderFailure=function(){return n.state.hasErrored?Object(a.d)("There was a problem deleting this clip.","ClipsModalDeleteAll"):null},n.state=N,n}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=r.createElement(s.Ca,{type:s.gc.P},Object(a.d)("This clip and all other clips created from the same video will be permanently deleted.","ClipsModalDeleteAll"));return r.createElement(c,{onSubmit:this.deleteAll,onClose:this.props.onClose,title:r.createElement(s.Ca,{type:s.gc.H4},Object(a.d)("Delete All Clips from Related Video","ClipsModalDeleteAll")),body:e,buttonContent:Object(a.d)("Delete","ClipsModalDeleteAll"),buttonType:s.I.Alert,submitDisabled:this.state.isLoading||this.state.hasSucceeded||""===this.props.broadcastID,isLoading:this.state.isLoading,successContent:this.renderSuccess(),errorContent:this.renderFailure()})},t}(r.Component),D=Object(S.compose)(Object(u.withLatencyTracking)("ClipsModalDeleteAll"),b({props:function(e){return{deleteAllClips:function(t,n){return i.__awaiter(void 0,void 0,void 0,function(){var r,o,s;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),r=void 0,n?[4,e.mutate({variables:{input:{videoID:n}}})]:[3,2];case 1:return o=i.sent(),r=o.data,[3,5];case 2:return t?[4,e.mutate({variables:{input:{broadcastID:t}}})]:[3,4];case 3:return o=i.sent(),r=o.data,[3,5];case 4:throw new Error("Invalid broadcastID specified for deleteAllClips");case 5:return e.ownProps.onDeleteAll&&r.deleteClips&&r.deleteClips.clips&&e.ownProps.onDeleteAll(r.deleteClips.clips),[3,7];case 6:throw s=i.sent(),a.k.error(s,"Failed to delete clips from VOD"),s;case 7:return[2]}})})}}}}),Object(g.a)(E,{props:function(e){var t=e.data.clip;return t?{videoID:t.video?t.video.id:null,broadcastID:t.broadcast&&t.broadcast.id||""}:{videoID:null,broadcastID:""}},options:function(e){return{variables:{slug:e.slug}}}}))(_),w={isLoading:!1,hasErrored:!1,hasSucceeded:!1},O=function(e){function t(t){var n=e.call(this,t)||this;return n.renderSuccess=function(){return n.state.hasSucceeded?Object(a.d)("Clips successfully deleted.","ClipsModalBatchDelete"):null},n.renderError=function(){return n.state.hasErrored?Object(a.d)("There was a problem deleting this clip.","ClipsModalBatchDelete"):null},n.onDeleteClick=function(){return i.__awaiter(n,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:this.setState({isLoading:!0,hasSucceeded:!1,hasErrored:!1}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.props.deleteClips()];case 2:return e.sent(),this.setState({hasSucceeded:!0,isLoading:!1}),[3,4];case 3:return e.sent(),this.setState({hasErrored:!0,isLoading:!1}),[3,4];case 4:return[2]}})})},n.state=w,n}return i.__extends(t,e),t.prototype.render=function(){var e=r.createElement(s.Ca,{type:s.gc.H4},Object(a.d)("Delete these clips?","ClipsModalBatchDelete")),t=r.createElement(s.Ca,{type:s.gc.P},Object(a.d)("These clips will be permanently deleted. Are you sure?","ClipsModalBatchDelete"));return r.createElement(c,{onSubmit:this.onDeleteClick,onClose:this.props.onClose,title:e,body:t,buttonContent:Object(a.d)("Delete","ClipsModalBatchDelete"),buttonType:s.I.Alert,submitDisabled:this.state.hasSucceeded||this.state.isLoading,isLoading:this.state.isLoading,successContent:this.renderSuccess(),errorContent:this.renderError()})},t}(r.Component),I=b({props:function(e){return{deleteClips:function(){return i.__awaiter(void 0,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.mutate({variables:{input:{slugs:e.ownProps.clipSlugs}}})];case 1:return n.sent(),e.ownProps.onBatchDelete&&e.ownProps.onBatchDelete(),[3,3];case 2:throw t=n.sent(),a.k.error(t,"Failed to delete clips"),t;case 3:return[2]}})})}}}})(O);n.d(t,"a",function(){return c}),n.d(t,"b",function(){return h}),n.d(t,"d",function(){return y}),n.d(t,"e",function(){return D}),n.d(t,"c",function(){return I})},jy35:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"message"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Message"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"messageContent"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"messageSender"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"messageContent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MessageContent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fragments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"messageParticle"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"messageSender"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelID"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"messageParticle"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MessageFragment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheermoteToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"cheermoteFragment"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emoteFragment"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mentionFragment"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AutoMod"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"automodFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"cheermoteFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheermoteToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsAmount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"prefix"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"emoteFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"emoteID"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mentionFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"automodFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AutoMod"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"weight"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:907}};n.loc.source={body:"fragment message on Message {\nid\ndeletedAt\nsentAt\ncontent {\n...messageContent\n}\nsender {\n...messageSender\n}\n__typename\n}\nfragment messageContent on MessageContent {\ntext\nfragments {\n...messageParticle\n}\n__typename\n}\nfragment messageSender on User {\nid\nlogin\nchatColor\ndisplayName\ndisplayBadges(channelID: $channelID) {\nsetID\nversion\n__typename\n}\n__typename\n}\nfragment messageParticle on MessageFragment {\ntext\ncontent {\n... on CheermoteToken {\n...cheermoteFragment\n}\n... on Emote {\n...emoteFragment\n}\n... on User {\n...mentionFragment\n}\n... on AutoMod {\n...automodFragment\n}\n__typename\n}\n__typename\n}\nfragment cheermoteFragment on CheermoteToken {\nbitsAmount\nprefix\ntier\n__typename\n}\nfragment emoteFragment on Emote {\nemoteID: id\nsetID\ntoken\n__typename\n}\nfragment mentionFragment on User {\nid\nlogin\ndisplayName\n__typename\n}\nfragment automodFragment on AutoMod {\ntopics {\ntype\nweight\n__typename\n}\n__typename\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},k7qK:function(e,t,n){},"kF1+":function(e,t,n){},kPBf:function(e,t){},kPCN:function(e,t,n){},kSkr:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"BlockUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BlockUserInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"blockUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"targetUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:94}};n.loc.source={body:"mutation BlockUser($input: BlockUserInput!) {\nblockUser(input: $input) {\ntargetUser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},kVMo:function(e,t,n){},kVrx:function(e,t,n){"use strict";n.d(t,"b",function(){return m}),n.d(t,"a",function(){return p}),n.d(t,"c",function(){return h});var i=n("/7QA"),r=n("f00E"),a=n("4rCz"),o=n("BKFw"),s=n("NZDK"),l=n("9kXc"),c=n("BZOq"),d=n("V3Pk"),u=n("WK0g"),m=function(e,t){return Object(u.b)(t).then(function(n){e.dispatch(Object(d.h)(n,t.bitsConfig))},function(){e.dispatch(Object(d.g)(Object(a.d)("Unable to retrieve messages, please try again.","routines-moderation")))})},p=function(e,t){return Object(u.a)(t).then(function(){e.dispatch(Object(d.f)(t.bannedUser))}).catch(function(t){return e.dispatch(Object(d.e)(t))})},h=function(e,t){var n=new s.a({appId:i.a.algoliaApplicationID,apiKey:i.a.algoliaAPIKey,apolloClient:i.q.apollo.client,logger:i.k,config:i.a,stats:i.q.stats}),a=r.a(),u=Object(c.b)({broadcastType:o.c,broadcasterId:t.creatorId}),m=u.typeID,p=u.params;return n.queryForType(m,t.searchTerm,a,p).then(function(t){var n=Object(l.b)({searchResults:t});n.currentVideoResults&&e.dispatch(Object(d.i)(n.currentVideoResults))}).catch(function(){})}},kXEd:function(e,t,n){},"kY/a":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ViewerCardModComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channelUser"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modLogs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetID"},value:{kind:"Variable",name:{kind:"Name",value:"targetID"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"moderatorComments"},directives:[]}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"moderatorComments"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModLogsCommentConnection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"moderatorComment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasPreviousPage"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"moderatorComment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModLogsComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timestamp"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:494}};n.loc.source={body:"query ViewerCardModComments($channelID: ID! $targetID: ID! $cursor: Cursor) {\nchannelUser: user(id: $channelID) {\nid\nmodLogs {\ncomments(targetID: $targetID first: 100 after: $cursor) {\n...moderatorComments\n}\n}\n}\n}\nfragment moderatorComments on ModLogsCommentConnection {\nedges {\ncursor\nnode {\n...moderatorComment\n}\n}\npageInfo {\nhasNextPage\nhasPreviousPage\n}\n}\nfragment moderatorComment on ModLogsComment {\nid\ntimestamp\nchannel {\nid\n}\nauthor {\nid\nlogin\ndisplayName\nchatColor\n}\ndetails {\ntext\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},kmJV:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"currentChannelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCurrentUser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"currentChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}}]}}],loc:{start:0,end:301}};i.loc.source={body:'#import "twilight/features/channel/queries/channel.gql"\n#import "twilight/features/channel/queries/channel-current-user.gql"\nquery ChannelRoot_Channel(\n$currentChannelLogin: String!\n$includeChanlets: Boolean!\n) {\ncurrentUser {\n...channelCurrentUser\n}\nuser(login: $currentChannelLogin) {\n...channel\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}i.definitions=i.definitions.concat(a(n("BbLt").definitions)),i.definitions=i.definitions.concat(a(n("NJiF").definitions)),e.exports=i},knbN:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var i=n("XIZb"),r=Object(i.a)("ChatRestrictions"),a=(r.InnerProvider,r.withChatServiceProvider),o=(0,r.withContext)(function(e){return{chatRestrictionsAPI:e.serviceAPI,setChatRestrictionsAPI:e.setServiceAPI}})},"ky+Y":function(e,t,n){},kyTI:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("VwyG"),s=n("vRsq"),l=n("GnwI"),c=n("Ue10"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this;return r.createElement(o.a,{ownerLogin:this.props.channelLogin,permittedRoles:{owner:!0,editor:!0,staff:!1}},function(t){return t.permitted?r.createElement(c.fb,{display:c.Da.InlineFlex},r.createElement(c.C,{blurAfterClick:!0,linkTo:Object(s.l)(e.props.channelLogin)},Object(a.d)("Customize Layout","CustomShelvesEditing"))):null})},t}(r.Component),u=Object(l.withLatencyTracking)("RoleRestrictedCustomizeButton",{autoReportInteractive:!0})(d)},l41m:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return k});var i=n("mrSG"),r=n("DMoW"),a=n("DpwM"),o=n("g807"),s=n("RNNG"),l=n("pU2t"),c=n("KD05"),d={beginSec:Number.MIN_VALUE,endSec:Number.MAX_VALUE},u=function(e,t){return t.commenter in e},m=function(e,t,n,i){var r=e.vodChat.comments,a=r.currentVideoTime,c=r.comments;return 0===c.commentCount?[]:Array.from(new o.a(c)).reduce(function(r,o){return o.offset>a?r:(o.comments.forEach(function(a){var o=Object(s.b)(c,a);if(void 0!==o&&(n||!u(i,o)))return o.source===l.b&&C(e.vodChat.comments.isReplayFilterOn,t)?r:r.push(f(o,e,n,i,t||void 0))}),r)},[]).sort(h)},p=function(e){var t=function(e){return e.vodChat.comments.comments}(e);return Object.keys(t.parentComments).map(function(n){return v(t.parentComments[n],e)}).filter(function(e){return void 0!==e.video}).sort(g)},h=function(e,t){return e.comment.contentOffset===t.comment.contentOffset?e.comment.createdAt.getTime()-t.comment.createdAt.getTime():e.comment.contentOffset-t.comment.contentOffset},g=function(e,t){return e.comment.createdAt.getTime()===t.comment.createdAt.getTime()?t.comment.contentOffset-e.comment.contentOffset:t.lastUpdated.getTime()-e.lastUpdated.getTime()},f=function(e,t,n,i,r){var o=new Array,s=new Array,l=t.vodChat.comments.comments.replies[e.id],c=e.createdAt;return Array.isArray(l)&&l.forEach(function(e){!n&&u(i,e)||(e.source===a.f&&C(t.vodChat.comments.isReplayFilterOn,r)?(s.push(f(e,t,n,i)),c=y(c,e.createdAt)):(o.push(f(e,t,n,i)),c=y(c,e.createdAt)))}),C(t.vodChat.comments.isReplayFilterOn,r)?{author:t.vodChat.users.users[e.commenter],comment:e,lastUpdated:c,replies:s.sort(h)}:{author:t.vodChat.users.users[e.commenter],comment:e,lastUpdated:c,replies:o.sort(h)}},b=function(e,t){var n=new Array,i=t.vodChat.comments.comments.replies[e.id],r=e.createdAt;return Array.isArray(i)&&i.forEach(function(e){n.push(b(e,t)),r=y(r,e.createdAt)}),{author:t.vodChat.users.users[e.commenter],comment:e,lastUpdated:r,replies:n.sort(h)}},v=function(e,t){var n=b(e,t);return i.__assign({},n,{video:t.vodChat.moderation.videos[Object(c.a)(e.contentId)]})},k=function(e){return 0===e.commentCount?d:{beginSec:e.minOffset,endSec:e.maxOffset}},C=function(e,t){return!!t&&(e&&(t===r.p.ARCHIVE||t===r.p.HIGHLIGHT))},y=function(e,t){return e.getTime()>t.getTime()?e:t}},lNGo:function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return m}),n.d(t,"a",function(){return p});var i=n("mrSG"),r=n("/7QA"),a=n("DMoW"),o=n("2xye"),s=n("YXxK"),l=n("04j6"),c=n("oi4T"),d=function(e){return i.__awaiter(void 0,void 0,void 0,function(){var t,n,a,s;return i.__generator(this,function(d){switch(d.label){case 0:t=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,r.q.apollo.client.query({query:l,variables:{id:e.channelID}})];case 2:return t=d.sent(),[3,4];case 3:return n=d.sent(),r.k.error(n,"ChatEvent query failed."),[3,4];case 4:return t&&t.data||r.k.warn("ChatEvent query failed; Chat tracking data sent may be incomplete."),a=t&&t.data&&t.data.user||null,s=i.__assign({},Object(c.b)(e),{viewer_context:e.viewerContext,broadcast_id:r.p.getVideoPlayerTrackingData().broadcastID,channel_id:e.channelID,emote_picker_sid:e.emotePickerSessionID,game:a&&a.stream&&a.stream.game&&a.stream.game.name,live:!!(a&&a.stream&&a.stream.id.length>0),partner:a&&a.isPartner||!1,play_session_id:r.p.getVideoPlayerTrackingData().playSessionID,player:e.player,ritual_nca:e.fromNewChatterRitual||!1,sub_only_mode:e.subOnlyMode}),r.p.track(o.SpadeEventType.Chat,s),[2]}})})},u=function(e){return i.__awaiter(void 0,void 0,void 0,function(){var t,n,a,s;return i.__generator(this,function(d){switch(d.label){case 0:t=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,r.q.apollo.client.query({query:l,variables:{id:e.channelID}})];case 2:return t=d.sent(),[3,4];case 3:return n=d.sent(),r.k.error(n,"ChatEvent query failed for CheerEvent."),[3,4];case 4:return t&&t.data||r.k.warn("ChatEvent query failed; Cheer tracking data sent may be incomplete."),a=t&&t.data&&t.data.user||null,s=i.__assign({},Object(c.a)(e),{broadcast_id:r.p.getVideoPlayerTrackingData().broadcastID,bits_value:e.bitsValue,cheermote:e.cheermote,channel_id:e.channelID,emote_picker_sid:e.emotePickerSessionID,game:a&&a.stream&&a.stream.game&&a.stream.game.name,is_anonymous_cheer:e.isAnonymousCheer,live:!!(a&&a.stream&&a.stream.id.length>0),partner:a&&a.isPartner||!1,play_session_id:r.p.getVideoPlayerTrackingData().playSessionID,player:e.player,ritual_nca:e.fromNewChatterRitual||!1,sub_only_mode:e.subOnlyMode,transaction_id:e.transactionID,viewer_context:e.viewerContext}),r.p.track(o.SpadeEventType.ChatClientCheer,s),[2]}})})},m=function(e){return i.__awaiter(void 0,void 0,void 0,function(){var t,n,a,s;return i.__generator(this,function(d){switch(d.label){case 0:t=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,r.q.apollo.client.query({query:l,variables:{id:e.channelID}})];case 2:return t=d.sent(),[3,4];case 3:return n=d.sent(),r.k.error(n,"ChatEvent query failed for CheerEvent."),[3,4];case 4:return t&&t.data||r.k.warn("ChatEvent query failed; Cheer tracking data sent may be incomplete."),a=t&&t.data&&t.data.user||null,s=i.__assign({},Object(c.a)(e),{broadcast_id:r.p.getVideoPlayerTrackingData().broadcastID,bits_value:e.bitsValue,cheermote:e.cheermote,channel_id:e.channelID,emote_picker_sid:e.emotePickerSessionID,error_type:e.errorType,game:a&&a.stream&&a.stream.game&&a.stream.game.name,is_anonymous_cheer:e.isAnonymousCheer,live:!!(a&&a.stream&&a.stream.id.length>0),partner:a&&a.isPartner||!1,play_session_id:r.p.getVideoPlayerTrackingData().playSessionID,player:e.player,ritual_nca:e.fromNewChatterRitual||!1,sub_only_mode:e.subOnlyMode,viewer_context:e.viewerContext}),r.p.track(o.SpadeEventType.ChatClientCheerError,s),[2]}})})},p=function(e){switch(e){case a.Na.AMOUNT_BELOW_MIN_BITS:return s.c.BelowMin;case a.Na.AUTO_MOD_MESSAGE:return s.c.AutoModMessage;case a.Na.AUTO_MOD_PENDING:return s.c.AutoModPending;case a.Na.CHANNEL_BLOCKED_TERMS:return s.c.ChannelBlockedTerms;case a.Na.CHANNEL_INELIGIBLE:return s.c.ChannelIneligible;case a.Na.EMOTE_AMOUNT_BELOW_MIN_BITS:return s.c.BelowMinEmote;case a.Na.INSUFFICIENT_BALANCE:return s.c.BitsUnavailable;case a.Na.INVALID_ANONYMOUS_MESSAGE:return s.c.InvalidAnonymousMessage;case a.Na.INVALID_BITS_AMOUNT:case a.Na.INVALID_BITS_MESSAGE:return s.c.InvalidBitsMessage;case a.Na.INVALID_EVENT_ID:return s.c.InvalidEventId;case a.Na.MESSAGE_LENGTH_EXCEEDED:return s.c.InputAboveMaxLength;case a.Na.REQUEST_THROTTLED:return s.c.RequestThrottled;case a.Na.TOO_LARGE_BITS_EMOTE:return s.c.AboveMaxEmote;case a.Na.TOO_LARGE_CHEER:return s.c.AboveMaxCheer;case a.Na.USER_BANNED:return s.c.UserBanned;case a.Na.USER_INELIGIBLE:return s.c.UserIneligible;case a.Na.USER_SUSPENDED:return s.c.UserSuspended;case a.Na.ZALGO_MESSAGE:return s.c.ZalgoMessage;default:return s.c.Unknown}}},lRNp:function(e,t,n){},lXDb:function(e,t,n){},lZdE:function(e,t,n){"use strict";function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}n.d(t,"a",function(){return i})},lh1U:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Thud_Recommendations"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"currentChannelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"currentChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ThudLiveStreams"},directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"offlineHighlight"},name:{kind:"Name",value:"videos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"HIGHLIGHT"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ThudVideoEdge"},directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"offlinePremiere"},name:{kind:"Name",value:"videos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"PAST_PREMIERE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ThudVideoEdge"},directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"offlineArchive"},name:{kind:"Name",value:"videos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"ARCHIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ThudVideoEdge"},directives:[]}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ThudLiveStreams"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Game"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"streams"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"sort"},value:{kind:"EnumValue",value:"VIEWER_COUNT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ThudLiveStream"},directives:[]}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ThudLiveStream"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Stream"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"285"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"380"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"viewersCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"375"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"211"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ThudVideoEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoEdge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ThudCardVideo"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ThudCardVideo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lengthSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"previewThumbnailURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"375"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"211"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}],loc:{start:0,end:988}};n.loc.source={body:"query Thud_Recommendations(\n$currentChannelLogin: String!\n) {\nuser(login: $currentChannelLogin) {\nid\nbroadcastSettings {\nid\ngame {\nid\n...ThudLiveStreams\n}\n}\nofflineHighlight: videos(first:1 type:HIGHLIGHT){\nedges{\n...ThudVideoEdge\n}\n}\nofflinePremiere: videos(first:1 type:PAST_PREMIERE){\nedges{\n...ThudVideoEdge\n}\n}\nofflineArchive: videos(first:1 type:ARCHIVE){\nedges{\n...ThudVideoEdge\n}\n}\n}\n}\nfragment ThudLiveStreams on Game {\nstreams(first: 10 options: { sort: VIEWER_COUNT }) {\nedges {\nnode {\n...ThudLiveStream\n}\n}\n}\n}\nfragment ThudLiveStream on Stream {\nid\ngame {\nid\nname\nboxArtURL(width: 285 height: 380)\n}\nviewersCount\ntitle\ntype\npreviewImageURL(width: 375 height: 211)\nbroadcaster {\nid\nlogin\ndisplayName\nprofileImageURL(width: 50)\n}\n}\nfragment ThudVideoEdge on VideoEdge {\ncursor\nnode {\n...ThudCardVideo\n}\n}\nfragment ThudCardVideo on Video {\nid\nlengthSeconds\nowner {\ndisplayName\nid\nlogin\nprofileImageURL(width: 50)\n}\npreviewThumbnailURL(width: 375 height: 211)\npublishedAt\ntitle\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"lpj/":function(e,t,n){},lw3P:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("yR8l"),r=n("ru7j");function a(){return Object(i.a)(r,{props:function(e){return e.data&&!e.data.loading&&!e.data.error&&e.data.currentUser&&e.data.currentUser.blockedUsers?{blockedUsers:e.data.currentUser.blockedUsers.reduce(function(e,t){return t&&t.id&&e.push(t.id),e},[])}:{blockedUsers:[]}},skip:function(e){return!(e.isLoggedIn||e.authToken)}})}},mBWp:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Tracking_CurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasTurbo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:86}};n.loc.source={body:"query Whispers_Tracking_CurrentUser {\ncurrentUser {\nid\nhasTurbo\navailability\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},mGiD:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_Video"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeCollection"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCurrentUser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"includePrivate"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelVideo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"collectionID"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"includeCollection"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCollection"},directives:[]}]}}]}}],loc:{start:0,end:517}};i.loc.source={body:'#import "twilight/features/channel/queries/channel-current-user.gql"\n#import "twilight/features/channel/queries/channel-video.gql"\n#import "twilight/features/channel/queries/channel-collection.gql"\nquery ChannelRoot_Video(\n$videoID: ID!\n$collectionID: ID!\n$includeCollection: Boolean!\n$includeChanlets: Boolean!\n) {\ncurrentUser {\n...channelCurrentUser\n}\nvideo(id: $videoID options: { includePrivate: true }) {\n...channelVideo\n}\ncollection(id: $collectionID) @include(if: $includeCollection) {\n...channelCollection\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}i.definitions=i.definitions.concat(a(n("NJiF").definitions)),i.definitions=i.definitions.concat(a(n("RTtf").definitions)),i.definitions=i.definitions.concat(a(n("vtET").definitions)),e.exports=i},mSxK:function(e,t,n){"use strict";var i=n("mrSG"),r=n("TSYQ"),a=n("q1tI"),o=n("oJmH"),s=n("/7QA"),l=n("ZS2+"),c=n("MJbm"),d=n("eJ65"),u=n("yR8l"),m=n("x7UT"),p=n("0Log"),h=n("/aPz"),g=n("D7An"),f=n("gOYK"),b=n("d2C5"),v=n("jSzL"),k=n("Ahlu"),C=n("/MKj"),y=n("fvjX"),S=n("aCAx"),E=n("7CzK"),N=n("94Uw"),_=n("Ue10"),D=(n("/nm5"),n("41XU")),w=l.a.wrap(function(){return n.e(144).then(n.bind(null,"7lJP"))},"UserImageUploader"),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openModal=function(){var e=t.props.data&&t.props.data.user;e&&e.id&&e.login&&t.props.showModal(w,{userID:e.id,login:e.login,displayName:e.displayName||e.login,imageType:N.a.ProfileBanner,showCloser:!0,successCallback:t.imageUploaded})},t.imageUploaded=function(){t.props.data&&t.props.data.refetch()},t}return i.__extends(t,e),t.prototype.render=function(){var e,t,n="channel-banner__image-default",i="channel-banner__header-type",o={"channel-banner--open":!this.props.collapsed,"channel-banner--side-nav":this.props.isSideNavBanner},l={"channel-banner__image--side-nav":this.props.isSideNavBanner},c={"channel-banner__edit-overlay-button--side-nav":this.props.isSideNavBanner},d=this.props.data;d&&!d.loading&&this.props.firstPageLoaded&&d.user&&d.user.bannerImageURL?(n="channel-banner__image-loaded",t={backgroundImage:"url("+d.user.bannerImageURL+")"}):(l["channel-banner__image--default"]=!0,t={backgroundImage:"url("+E+")"}),this.props.isSideNavBanner&&(i="channel-banner__side-nav-type");var u=null;if(this.props.canEdit){var m=this.props.isSideNavBanner?a.createElement(_.fb,{display:_.Da.Flex,padding:{x:3},justifyContent:_.eb.Between,fullWidth:!0},a.createElement(_.Cb,{asset:_.Db.Edit}),a.createElement(_.Ca,null,Object(s.d)("Edit","ChannelBanner"))):a.createElement(_.fb,null,a.createElement(_.fb,null,a.createElement(_.Cb,{asset:_.Db.Edit})),Object(s.d)("Update Profile Banner","ChannelBanner"));u=a.createElement(_.Ob,{className:r("channel-banner__edit-overlay",c),background:_.u.Overlay,position:_.tb.Absolute,attachTop:!0,attachLeft:!0,fullWidth:!0},a.createElement("button",{className:"channel-banner__edit-overlay-button","data-test-selector":"channel-banner__edit-overlay-interactable",onClick:this.openModal},a.createElement(_.fb,{display:_.Da.Flex,alignItems:_.i.Center,flexDirection:_.Ga.Column,justifyContent:_.eb.Center},m)))}return e=a.createElement("div",{className:r("channel-banner__image",l),"data-test-selector":n,style:t},u),a.createElement("div",{className:r("channel-banner",o),"data-test-selector":i,onTransitionEnd:this.props.onTransitionEnd},a.createElement(_.Xa,{fullWidth:!0,fullHeight:!0},e))},t.prototype.componentWillUnmount=function(){this.props.closeModal()},t}(a.Component),I=Object(u.a)(D,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin||!e.firstPageLoaded}})(O);var T,M,L=Object(C.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}},function(e){return Object(y.bindActionCreators)({closeModal:S.c,showModal:S.d},e)})(I),R=n("i4un"),x=n("dIU+"),F=n("GnwI"),A=n("Ba7Q"),j=(n("BOil"),n("HXcb")),U=l.a.wrap(function(){return n.e(146).then(n.bind(null,"g9Rq"))},"EditProfileOverlay"),B=l.a.wrap(function(){return n.e(145).then(n.bind(null,"QjI3"))},"SubscribeButton");!function(e){e.SocialButtonsDefault="channel-header__social-buttons-default",e.SocialButtonsVariantB="channel-header__social-buttons-variant-b"}(M||(M={}));var P,V="channel-header__edit-profile-overlay",H="channel-header__verified-badge",G="channel-header__live-indicator",W="yes",q="browser-notifications-upsell-seen";!function(e){e[e.Channel=1]="Channel",e[e.Clips=2]="Clips",e[e.Events=3]="Events",e[e.Success=4]="Success",e[e.Followers=5]="Followers",e[e.Following=6]="Following",e[e.Videos=7]="Videos"}(P||(P={}));var z=function(e){function t(t){var n=e.call(this,t)||this;return n.verifiedBadgeElement=a.createElement(_.jc,{label:Object(s.d)("Verified User","ChannelHeader"),direction:_.lc.Right},a.createElement(_.fb,{className:"channel-header__verified","data-target":H,display:_.Da.Flex,alignItems:_.i.Center,margin:{left:1}},a.createElement(_.Cb,{asset:_.Db.Verified}))),n.ChannelStatusIndicatorElement=a.createElement(_.fb,{margin:{left:1},"data-target":G},a.createElement(_.jc,{label:Object(s.d)("Live Now","ChannelHeader"),direction:_.lc.Right},a.createElement(_.N,{status:_.P.Live,pulse:!0}))),n.onResetOffline=function(){n.resetOfflineTimer=void 0,n.setState({live:!1})},n.renderAvatarEditButton=function(){return n.props.data&&n.props.data.user&&n.props.data.user.id&&n.props.data.user.login&&n.isChannelEditor()?a.createElement(_.Ob,{className:V,background:_.u.Overlay,position:_.tb.Absolute,attachTop:!0,attachLeft:!0,fullHeight:!0,fullWidth:!0,display:_.Da.InlineFlex,alignItems:_.i.Center,justifyContent:_.eb.Center},a.createElement(U,{userID:n.props.data.user.id,login:n.props.data.user.login,displayName:n.props.data.user.displayName||n.props.data.user.login})):null},n.toggleChannelBanner=function(){n.setState(function(e){var t=!e.bannerSlideIn;return t?{bannerHidden:!e.bannerHidden,bannerSlideIn:t}:{bannerSlideIn:t}})},n.completedBannerAnimation=function(){n.setState(function(e){return e.bannerSlideIn?e:{bannerHidden:!0}})},n.onUpdateDebounce=function(){if(n.resizeAnimationFrame&&(clearTimeout(n.resizeAnimationFrame),n.resizeAnimationFrame=null),n.channelHeader){var e=n.channelHeader.querySelector('[data-target="channel-header-left"]');n.updateWidth(n.getWidth(e).width),n.resizeAnimationFrame=setTimeout(n.handleWindowResize,0)}},n.handleWindowResize=function(){n.resizeAnimationFrame=null,n.getChannelHeaderSize()},n.maybeShowBrowserNotificationsUpsell=function(){return i.__awaiter(n,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return!s.n.get(q,!1)&&Object(b.a)()&&Object(v.c)()&&s.q.experiments.getAndTrackAssignment(g.b.BrowserNotificationsUpsell)===W?[4,f.a.hasPushSubscription()]:[3,3];case 1:return e.sent()?[3,3]:(s.n.set(q,!0),this.props.showBrowserNotificationsUpsellModal(),[4,f.a.userSubscribe(k.a.Channel)]);case 2:e.sent(),this.props.closeBrowserNotificationsUpsellModal(),e.label=3;case 3:return[2]}})})},n.saveChannelHeaderRef=function(e){return n.channelHeader=e},n.toggleLiveNotificationsBtnShown=function(e){n.setState({showLiveNotificationsButton:e})},n.state={live:!1,bannerHidden:!0,bannerSlideIn:!1},n}return i.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({live:this.isLiveGraphQL(this.props)})},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.onUpdateDebounce),!this.props.data||this.props.data.loading||this.props.data.error||this.getChannelHeaderSize(),this.reportInteractive()},t.prototype.componentWillReceiveProps=function(e){var t=this.props,n=e.pubsub.messages.viewCount,i=t.pubsub.messages.viewCount;e.channelLogin!==t.channelLogin?(this.clearResetOfflineTimer(),this.setState({live:this.isLiveGraphQL(e),showLiveNotificationsButton:void 0})):n&&n!==i?(this.clearResetOfflineTimer(),this.resetOfflineTimer=setTimeout(this.onResetOffline,6e4),this.setState({live:!0})):this.isLiveGraphQL(e)!==this.isLiveGraphQL(t)&&(this.clearResetOfflineTimer(),this.setState({live:this.isLiveGraphQL(e)})),e.data&&!e.data.loading&&void 0===this.state.showLiveNotificationsButton&&this.setState({showLiveNotificationsButton:this.getFollowingState(e)})},t.prototype.componentDidUpdate=function(){this.channelHeader&&this.updateWidth(this.getWidth(this.channelHeader.querySelector('[data-target="channel-header-left"]')).width),this.onUpdateDebounce(),this.reportInteractive()},t.prototype.componentWillUnmount=function(){this.clearResetOfflineTimer(),this.resizeAnimationFrame&&cancelAnimationFrame(this.resizeAnimationFrame),window.removeEventListener("resize",this.onUpdateDebounce)},t.prototype.updateWidth=function(e){var t=e!==this.width||this.width!==this.prevWidth;void 0!==this.width&&(this.prevWidth=this.width),this.width!==e&&(this.width=e),t&&(this.resizeAnimationFrame&&(clearTimeout(this.resizeAnimationFrame),this.resizeAnimationFrame=null),this.onUpdateDebounce())},t.prototype.render=function(){var e,t,n=0,i=0,o=0,l=s.a.defaultAvatarURL;this.props.data&&this.props.data.user&&!this.props.data.loading&&!this.props.data.error&&(n=this.props.data.user.videos&&this.props.data.user.videos.totalCount||0,i=this.props.data.user.followers&&this.props.data.user.followers.totalCount||0,o=this.props.data.user.follows&&this.props.data.user.follows.totalCount||0,l=this.props.data.user.profileImageURL||s.a.defaultAvatarURL,e=this.props.data.user.displayName,t=this.props.data.user.roles&&this.props.data.user.roles.isPartner);var u,m=this.state.live&&!this.isActiveTab(P.Channel),p=this.createChannelLinks(n,i,o),h={"channel-header__user":!0,"channel-header__user--selected":this.isActiveTab(P.Channel)},g=a.createElement(_.fb,{display:_.Da.Flex,flexWrap:_.Ha.NoWrap,alignItems:_.i.Center,flexShrink:0},a.createElement(_.fb,{className:"channel-header__user-avatar channel-header__user-avatar--active",margin:{right:1},display:_.Da.Flex,flexShrink:0,alignItems:_.i.Stretch},a.createElement(_.fb,{position:_.tb.Relative},a.createElement(_.t,{size:36,src:l,alt:e||""}),this.renderAvatarEditButton())),e?a.createElement(_.Ca,{type:_.gc.H5},e):a.createElement(_.fb,{alignItems:_.i.Center},a.createElement(_.sb,{lineCount:1,width:120})),m&&this.ChannelStatusIndicatorElement,t&&this.verifiedBadgeElement);u=this.isActiveTab(P.Channel)?a.createElement("div",{className:"channel-header__banner-toggle",onClick:this.toggleChannelBanner,"data-target":"channel-header__channel-link","data-a-target":"user-channel-header-item"},g):this.props.channelLogin?a.createElement(_.Aa,{to:"/"+this.props.channelLogin||"#","data-target":"channel-header__channel-link","data-a-target":"user-channel-header-item",hoverUnderlineNone:!0},g):g;var f=this.state.bannerHidden?_.Da.HideAccessible:_.Da.Block,b=null,v=this.renderSocialButtons();return this.isActiveTab(P.Channel)&&(b=a.createElement(_.fb,{display:f},a.createElement(L,{channelLogin:this.props.channelLogin,canEdit:this.isChannelEditor(),collapsed:!this.state.bannerSlideIn,onTransitionEnd:this.completedBannerAnimation}))),a.createElement(_.fb,{className:"channel-header",flexShrink:0},b,a.createElement(_.fb,{display:_.Da.Flex,justifyContent:_.eb.Between,flexWrap:_.Ha.NoWrap,fullHeight:!0,refDelegate:this.saveChannelHeaderRef,margin:{x:3}},a.createElement(_.fb,{display:_.Da.Flex,alignItems:_.i.Stretch,flexShrink:0,flexWrap:_.Ha.NoWrap,"data-target":"channel-header-left"},a.createElement(_.Xa,{className:r(h),padding:{y:.5,right:2},display:_.Da.Flex,flexWrap:_.Ha.NoWrap,alignItems:_.i.Center,flexShrink:0},u),this.renderTabs(p),a.createElement(_.fb,{className:"channel-header__item channel-header__item--no-underline",padding:{x:1},flexShrink:0,alignSelf:_.j.Center,"data-target":"channel-header-button"},a.createElement(d.a,{alwaysMountBalloonContent:!0},a.createElement(_.D,{icon:_.Db.NavMore,ariaLabel:Object(s.d)("More","ChannelHeader")}),a.createElement(_.x,{direction:_.y.Bottom,noTail:!0},a.createElement(_.fb,{padding:{y:1}},this.renderDropdown(p)))))),v),a.createElement(c.a,{onResize:this.onUpdateDebounce}))},t.prototype.isLiveGraphQL=function(e){if(e.data&&e.data.user)return!!e.data.user.stream&&""!==e.data.user.stream.id},t.prototype.clearResetOfflineTimer=function(){this.resetOfflineTimer&&(clearTimeout(this.resetOfflineTimer),this.resetOfflineTimer=void 0)},t.prototype.generateUserLink=function(e){void 0===e&&(e="");var t=this.props.channelLogin;return t?"/"+t+"/"+e:"#"},t.prototype.renderTabs=function(e){var t=this;return e.map(function(e){var n=e.count?a.createElement(_.fb,{className:"channel-header__item-count",display:_.Da.Flex,margin:{left:.5}},a.createElement(_.Ca,{type:_.gc.Span,fontSize:_.Ia.Size5},e.count)):null,i=t.generateUserLink(e.pathSuffix),r=e.label.toLowerCase()+"-channel-header-item";return a.createElement(_.Xa,{key:"channel-header__item--"+e.label,alignItems:_.i.Center,flexShrink:0},a.createElement(_.Aa,{className:"channel-header__item channel-header__item--hide "+(e.isSelected?"channel-header__item--selected":""),to:i,"data-target":"channel-header-item","data-a-target":r,"data-test-selector":r,hoverUnderlineNone:!0},a.createElement(_.fb,{padding:{x:2,y:.5},display:_.Da.Flex},a.createElement(_.Ca,{type:_.gc.Span,fontSize:_.Ia.Size5},e.label),n)))})},t.prototype.renderDropdown=function(e){var t=this;return e.map(function(e){var n=e.count?a.createElement(_.fb,{className:"channel-header__item-count",display:_.Da.Flex,margin:{left:.5}},a.createElement(_.Ca,{type:_.gc.Span},e.count)):null,i=t.generateUserLink(e.pathSuffix);return a.createElement(_.fb,{key:"channel-header__dropdown-item--"+e.label,"data-target":"channel-header-dropdown-item"},a.createElement(_.cb,{linkTo:i,disabled:"#"===i},a.createElement(_.fb,{className:"channel-header__dropdown-hover-target",padding:{y:.5,x:1},display:_.Da.Flex},a.createElement(_.Ca,{type:_.gc.Span},e.label),n)))})},t.prototype.createChannelLinks=function(e,t,n){return[{label:Object(s.d)("Videos","ChannelHeader"),count:Object(s.f)(e),pathSuffix:"videos",isSelected:this.isActiveTab(P.Videos)},{label:Object(s.d)("Clips","ChannelHeader"),pathSuffix:"clips",isSelected:this.isActiveTab(P.Clips)}].concat([{label:Object(s.d)("Events","ChannelHeader"),pathSuffix:"events",isSelected:this.isActiveTab(P.Events)},{label:Object(s.d)("Followers","ChannelHeader"),count:Object(s.f)(t),pathSuffix:"followers",isSelected:this.isActiveTab(P.Followers)},{label:Object(s.d)("Following","ChannelHeader"),count:Object(s.f)(n),pathSuffix:"following",isSelected:this.isActiveTab(P.Following)}])},t.prototype.isActiveTab=function(e){return P[this.props.currentPage]===P[e]},t.prototype.isChannelEditor=function(){return!!(this.props.data&&this.props.data.currentUser&&this.props.data.user&&this.props.data.currentUser.roles&&(this.props.data.currentUser.id===this.props.data.user.id||this.props.data.currentUser.roles.isStaff||this.props.data.currentUser.roles.isSiteAdmin))},t.prototype.getChannelHeaderSize=function(){if(this.channelHeader){var e=this.channelHeader.querySelector('[data-target="channel-header-left"]'),t=this.channelHeader.querySelector('[data-target="channel-header-right"]'),n=this.channelHeader.querySelectorAll('[data-target="channel-header-item"]'),i=this.channelHeader.querySelectorAll('[data-target="channel-header-dropdown-item"]');if(n.length){for(var r=0;r<n.length;r++){var a=n[r];a.classList.contains("channel-header__item--hide")&&(a.classList.remove("channel-header__item--hide"),i[r].classList.add("channel-header__item--hide"))}var o=this.getWidth(this.channelHeader).width,s=this.getWidth(e).width+this.getWidth(t).width+20-o,l=[];if(s>0){var c=function(e){var t=n[e];if(!t.classList.contains("channel-header__item--hide")){var r=d.getWidth(t);if(l.push(function(){t.classList.add("channel-header__item--hide"),i[e].classList.remove("channel-header__item--hide")}),(s-=r.width)<=0)return"break"}},d=this;for(r=n.length-1;r>=0;r--){if("break"===c(r))break}}l.forEach(function(e){return e()});var u=this.channelHeader.querySelector('[data-target="channel-header-button"]');if(u){var m=!this.channelHeader.querySelectorAll('[data-target="channel-header-item"].channel-header__item--hide').length;u.classList.toggle("channel-header__item--hide",m)}}}},t.prototype.getWidth=function(e){return e?{width:e.clientWidth}:{width:0}},t.prototype.reportInteractive=function(){!this.props.data||this.props.data.loading&&!this.props.data.error||this.props.latencyTracking.reportInteractive()},t.prototype.renderSocialButtons=function(){var e=this.getFollowingState(),t=this.props.data&&this.props.data.user&&this.props.data.user.displayName||void 0,n=null,i=M.SocialButtonsDefault;if(Object(R.d)()){var o=r("channel-header__follow-btn",{"channel-header__follow-btn--following":!!this.state.showLiveNotificationsButton}),s=r("channel-header__notification-toggle-container",{"channel-header__notification-toggle-container--visible":!!this.state.showLiveNotificationsButton});i=M.SocialButtonsVariantB,n=a.createElement(a.Fragment,null,a.createElement(_.fb,{className:"channel-header__follow-btn-container",display:_.Da.Flex,overflow:_.mb.Hidden,alignItems:_.i.Center,padding:{x:1},fullHeight:!0},a.createElement(_.fb,{display:_.Da.Flex,justifyContent:_.eb.Center,flexDirection:_.Ga.Column,margin:{right:1}},a.createElement(_.fb,{display:_.Da.InlineFlex,justifyContent:_.eb.Center},a.createElement("div",{className:o},a.createElement(x.a,{updateContainerWidth:this.onUpdateDebounce,channelLogin:this.props.channelLogin,onFollow:this.maybeShowBrowserNotificationsUpsell,followUIType:x.b.IconAndText,unfollowUIType:x.b.IconOnly,onToggleAnimationComplete:this.toggleLiveNotificationsBtnShown,channelName:t,hideDropdownWhenFollowing:!0,fullWidthButton:!0,hollowIcons:!0,animatedButton:!0,useContextualModals:!0})))),a.createElement("div",{className:s},a.createElement(A.a,{channelLogin:this.props.channelLogin,toggleType:A.b.Button,tabIndex:this.state.showLiveNotificationsButton?0:-1,followData:this.getFollowData(),showTooltips:!0}))),a.createElement(_.fb,null,a.createElement(B,{updateContainerWidth:this.onUpdateDebounce,channelLogin:this.props.channelLogin,hideEsportsSubscription:this.props.hideEsportsSubscription,subscribedButtonType:_.I.Default,unsubscribedButtonType:e?_.I.Default:_.I.Hollow,forceIcon:!0})))}else(this.props.channelIsHosting||Object(R.f)())&&(i=M.SocialButtonsDefault,n=a.createElement(a.Fragment,null,a.createElement(_.fb,{display:_.Da.Flex,alignItems:_.i.Stretch,margin:{left:1}},a.createElement(x.a,{updateContainerWidth:this.onUpdateDebounce,channelLogin:this.props.channelLogin,onFollow:this.maybeShowBrowserNotificationsUpsell,followUIType:x.b.IconAndText,unfollowUIType:x.b.IconOnly,channelName:t,useContextualModals:!0})),a.createElement(_.fb,{margin:{left:1}},a.createElement(B,{updateContainerWidth:this.onUpdateDebounce,channelLogin:this.props.channelLogin,hideEsportsSubscription:this.props.hideEsportsSubscription}))));return a.createElement(_.fb,{display:_.Da.Flex,flexWrap:_.Ha.NoWrap,flexShrink:0,alignItems:_.i.Center,className:"channel-header__right","data-test-selector":i,"data-target":"channel-header-right"},this.props.firstPageLoaded&&n)},t.prototype.getFollowingState=function(e){return void 0===e&&(e=this.props),!!(e.data&&e.data.user&&e.data.user.self&&e.data.user.self.follower)&&null!==e.data.user.self.follower.disableNotifications},t.prototype.getFollowData=function(){if(this.props.data&&this.props.data.user&&this.props.data.user.id)return this.props.data.user},t}(a.Component),Q=Object(o.compose)(Object(u.a)(j,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(m.a)([{topic:function(e){return e.channelLogin?Object(h.J)(e.channelLogin):""},skip:function(e){return!e.channelLogin||!e.firstPageLoaded},mapMessageTypesToProps:(T={},T[p.PubsubMessageType.ViewCount]="viewCount",T)}]),Object(F.withLatencyTracking)("ChannelHeader"))(z),Y=n("wxwP");var K=Object(C.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}},function(e){return Object(y.bindActionCreators)({showBrowserNotificationsUpsellModal:function(){return Object(S.d)(Y.a,{})},closeBrowserNotificationsUpsellModal:S.c},e)})(Q);n.d(t,"d",function(){return P}),n.d(t,!1,function(){}),n.d(t,"a",function(){return W}),n.d(t,"b",function(){return q}),n.d(t,"c",function(){return K})},mXgU:function(e,t,n){},mmRu:function(e,t,n){"use strict";var i,r=n("/MKj"),a=n("mrSG"),o=n("q1tI"),s=n("u5aL"),l=n("/7QA"),c=n("Ue10"),d=function(e){return o.createElement(c.D,{icon:c.Db.Emoticons,ariaLabel:Object(l.d)("Emote picker","EmotePickerButton"),type:e.isActive?c.F.Default:c.F.Secondary,onClick:e.onClick,"data-a-target":"emote-picker-button"})},u=n("fvjX"),m=n("yR8l"),p=n("x7UT"),h=n("Mj6i"),g=n("1/iK"),f=n("kRBY"),b=n("+pBb"),v=n("w1PT"),k=n("8EUQ"),C=n("KriR"),y=n("GzyO"),S=n("OpME"),E=function(e,t){return t.map(function(t){return t.emotes&&t.emoteSetID&&!e.has(parseInt(t.emoteSetID,10))?a.__assign({},t,{emotes:t.emotes.map(function(e){return a.__assign({},e,{isLocked:!0})})}):t}).map(function(e){return a.__assign({},e,{emotes:Object(S.b)(e.emotes)})})},N=function(e){return e.tier&&!isNaN(parseInt(e.tier,10))?parseInt(e.tier,10)/1e3:1},_=n("GnwI"),D=n("br9A"),w=n("8/mp"),O=n("2xye"),I=n("7SjK"),T=(n("zyUW"),function(e){var t=null;return e.imgSrc&&(t=o.createElement(o.Fragment,null,o.createElement(c.Y,{className:"emote-grid-section__header-image",src:e.imgSrc,alt:e.label}),o.createElement(c.fb,{padding:{right:.5}}))),o.createElement(c.fb,{position:c.tb.Relative,padding:1,className:"emote-grid-section"},o.createElement(c.Ob,{alignItems:c.i.Center,display:c.Da.Flex,padding:{x:1,bottom:.5}},t,o.createElement(c.Ca,{align:c.uc.Middle,bold:!0,color:c.R.Alt},e.label)),o.createElement(I.a,{context:e.context,emotes:e.emotes,onClickEmote:e.onClickEmote,spaced:!0}))}),M=n("17x9"),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkVisible=function(e,n){t.props.checkVisible(e,n)},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.unregister=this.context.registerReceiver(this)},t.prototype.componentWillUnmount=function(){this.unregister&&this.unregister()},t.prototype.render=function(){return o.createElement(o.Fragment,null,this.props.children)},t.contextTypes={registerReceiver:M.func},t}(o.Component),R=(n("cr2a"),function(e){return o.createElement(c.fb,{className:"emote-picker-tab-item "+(e.isActive?"emote-picker-tab-item--active":""),position:c.tb.Relative},o.createElement(c.cb,{"data-a-target":e.label,onClick:e.onClick,blurAfterClick:!0},o.createElement(c.fb,{padding:1,display:c.Da.InlineFlex},o.createElement(c.Cb,{asset:e.icon}))))}),x=n("oJmH"),F=n("DnOo"),A=n("a5fV"),j=(n("GLn2"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.channelSubscriptionProducts.find(function(t){return!!t.emotes.find(function(t){return e.props.subUpsellClickedEmote.id===t.id})}),n=this.props.channelSubscriptionProducts.filter(function(e){return!e.emotes.find(function(e){return!e.isLocked})}).sort(function(e,t){var n=N(e);return N(t)-n});if(t&&this.props.subUpsellClickedEmote.srcSet&&this.props.channelDisplayName){var i=N(t),r=Object(l.d)("Subscribe at Tier {tierNumber}",{tierNumber:i},"EmotePickerCard"),s=[],d=[];n.forEach(function(e){if(N(e)<=i){var t=e.emotes.map(function(e){return a.__assign({},e,{isLocked:!1})});d.push.apply(d,t)}else s.push.apply(s,e.emotes)});var u=s.concat(d),m=t.price.toString()||"";if(t.priceInfo){var p=t.priceInfo;m=Object(A.a)(Object(A.b)(p.total,p.exponent),p.currency)}return o.createElement(c.fb,{className:"emote-sub-upsell"},o.createElement(c.Ob,{padding:{top:.5}},o.createElement(c.C,{type:c.I.Text,icon:c.Db.AngleLeft,onClick:this.props.onBackClick,size:c.G.Small},Object(l.d)("Back","EmotePickerCard"))),o.createElement(c.Ob,{display:c.Da.Flex,padding:{x:2,bottom:1}},o.createElement(c.fb,{flexGrow:0,flexShrink:0,padding:{top:.5}},o.createElement(c.Y,{src:this.getBigImageSrc(this.props.subUpsellClickedEmote.srcSet),alt:this.props.subUpsellClickedEmote.displayName||""})),o.createElement(c.fb,{flexGrow:1,flexShrink:1,padding:{left:1}},o.createElement(c.Ca,{bold:!0},this.renderCopyHeader(i.toString())),o.createElement(c.Ca,null,this.renderCopyBody(i.toString(),d.length)))),o.createElement(c.fb,{display:c.Da.Flex,alignItems:c.i.Center,justifyContent:c.eb.Center,padding:{x:2}},o.createElement(F.a,{customSubscribeNowMessage:r,isSubbedToTier:!1,fullWidth:!0,tierPrice:m,handleSubAction:this.props.handleSubAction,productName:t.name,url:t.url,isEsportChannel:this.props.isEsportChannel})),o.createElement(c.tc,null,o.createElement("hr",{className:"emote-sub-upsell__divider"})),o.createElement(w.b,{className:"emote-sub-upsell__content"},o.createElement(c.fb,null,o.createElement(c.fb,{padding:{x:2}},o.createElement(c.Ca,{bold:!0},Object(l.d)("{numUnlocked} Emotes Included",{numUnlocked:d.length},"EmotePickerCard"))),o.createElement(c.fb,{padding:{x:1,top:.5,bottom:3}},o.createElement(I.a,{emotes:u,spaced:!0,onClickEmote:this.props.onClickEmote})))))}return null},t.prototype.renderCopyHeader=function(e){return Object(l.d)("{channelDisplayName} - Tier {tierNumber} Subscription",{tierNumber:e,channelDisplayName:this.props.channelDisplayName},"EmotePickerCard")},t.prototype.renderCopyBody=function(e,t){return 1===t?Object(l.d)("To unlock 1 emote and more subscriber benefits, subscribe at Tier {tierNumber}",{tierNumber:e},"EmotePickerCard"):Object(l.d)("To unlock {numEmotes} emotes and more subscriber benefits, subscribe at Tier {tierNumber}.",{tierNumber:e,numEmotes:t},"EmotePickercard")},t.prototype.getBigImageSrc=function(e){var t=e.split(" ");return 6===t.length?t[2]:t[0]},t}(o.Component)),U=n("XQnt"),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.channelID||this.props.latencyTracking.reportInteractive()},t.prototype.componentDidUpdate=function(e){this.props.data&&!this.props.data.loading&&e.data&&e.data.loading&&this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return null===this.props.subUpsellClickedEmote?null:o.createElement(j,{channelDisplayName:this.props.channelDisplayName,channelSubscriptionProducts:this.subscriptionProducts,handleSubAction:this.props.handleSubAction,isEsportChannel:this.props.isEsportChannel,onBackClick:this.props.onBackClick,onClickEmote:this.props.onClickEmote,subUpsellClickedEmote:this.props.subUpsellClickedEmote})},Object.defineProperty(t.prototype,"subscriptionProducts",{get:function(){if(this.props.data&&this.props.data.user&&this.props.data.user.subscriptionProducts){var e=this.props.data.user.subscriptionProducts.filter(function(e){return e});return E(this.props.ownedSetIDs,e)}return this.props.channelSubscriptionProducts},enumerable:!0,configurable:!0}),t}(o.Component),P=Object(x.compose)(Object(m.a)(U,{options:function(e){return{variables:{channelID:e.channelID}}},skip:function(e){return!e.channelID}}),Object(_.withLatencyTracking)("EmoteSubUpsell"))(B);!function(e){e.FrequentlyUsed="frequently_used",e.CurrentChannel="current_channel",e.OtherChannel="other_subbed_channel",e.Unlocked="unlocked",e.Global="global"}(i||(i={}));var V;n("JGCS");!function(e){e.FrequentlyUsedEmotes="FREQUENTLY_USED_EMOTES",e.ChannelEmotes="CHANNEL_EMOTES",e.AllEmotes="ALL_EMOTES"}(V||(V={}));var H=function(e){function t(t){var n=e.call(this,t)||this;return n.onTabNavClick=function(e){if(n.scroll&&n.scroll.scrollContent&&e.currentTarget.getAttribute("data-a-target")){var t=e.currentTarget.getAttribute("data-a-target"),i=V.FrequentlyUsedEmotes;switch(t){case V.FrequentlyUsedEmotes:n.frequentlyUsedEmotesRef&&(n.frequentlyUsedEmotesRef.scrollIntoView(),i=V.FrequentlyUsedEmotes);break;case V.ChannelEmotes:n.channelEmotesRef&&(n.channelEmotesRef.scrollIntoView(),i=V.ChannelEmotes);break;case V.AllEmotes:n.allEmotesRef&&(n.allEmotesRef.scrollIntoView(),i=V.AllEmotes)}n.setState({selectedNavTab:i})}},n.onClickEmote=function(e,t){if(n.props.onClickEmote&&!e.isLocked){n.props.onClickEmote(e.displayName||e.token,e.id);var i={channel_id:n.props.channelID||void 0,chatroom_id:n.props.roomID,context:t,emote_picker_sid:n.props.emotePickerSessionID,emote_id:e.id,emoticon_set_id:e.setID,generated_by:n.props.emotePickerSource};l.p.track(O.SpadeEventType.EmotePickerClickthrough,i)}else e.isLocked&&n.onClickLockedEmote(e)},n.saveScrollRef=function(e){return n.scroll=e},n.saveAllEmotesRef=function(e){return n.allEmotesRef=e},n.saveChannelEmotesRef=function(e){return n.channelEmotesRef=e},n.saveFrequentlyUsedEmotesRef=function(e){return n.frequentlyUsedEmotesRef=e},n.checkVisible=function(e,t){if(t){n.state.hasUserInteracted||n.setState({hasUserInteracted:!0});var i=n.state.selectedNavTab,r=n.allEmotesRef&&t.offset>=n.allEmotesRef.offsetTop;i=n.channelEmotesRef&&t.offset>=n.channelEmotesRef.offsetTop&&!r?V.ChannelEmotes:r?V.AllEmotes:V.FrequentlyUsedEmotes,n.state.selectedNavTab!==i&&n.setState({selectedNavTab:i})}},n.onClickLockedEmote=function(e){n.setState({subUpsellClickedEmote:e})},n.onBackClick=function(){n.setState({subUpsellClickedEmote:null,selectedNavTab:V.FrequentlyUsedEmotes})},n.handleFilterChange=function(e){var t=e.target.value,i=t.toLowerCase();n.setState({filter:i,inputValue:t,filteredEmotes:n.filterEmoteSets(n.props.allEmoteSets,i),selectedNavTab:V.FrequentlyUsedEmotes})},n.filterEmoteSets=function(e,t){var n=[];e.forEach(function(e){e.emotes.filter(function(e){return!(!e.displayName||!e.displayName.toLowerCase().includes(t))||e.token.toLowerCase().includes(t)}).forEach(function(t){t.setID=e.id,n.push(t)})});var i=Object(y.e)(),r=0===Object.keys(i).length?void 0:i,a=Object(S.e)(n,t,r);return Object(S.d)(a)},n.updateChannelEmotes=function(e){var t=e.channelSubscriptionProducts.reduce(function(e,t){return e.concat(t.emotes)},[]);if(0===t.length||!e.channelDisplayName)return null;var i=[],r=[];t.forEach(function(e){e.isLocked?i.push(e):r.push(e)});var a=r.concat(i);n.setState({sortedChannelEmotes:a})},n.state={filter:"",filteredEmotes:[],hasUserInteracted:!1,inputValue:"",selectedNavTab:V.FrequentlyUsedEmotes,sortedChannelEmotes:[],subUpsellClickedEmote:null},n}return a.__extends(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.emotePickerSessionID===e.emotePickerSessionID||this.props.channelSubscriptionProducts!==e.channelSubscriptionProducts||this.props.globalEmotes!==e.globalEmotes||this.props.frequentlyUsedEmotes!==e.frequentlyUsedEmotes||this.props.otherChannelEmoteSets!==e.otherChannelEmoteSets||this.props.unlockedEmotes!==e.unlockedEmotes},t.prototype.componentDidMount=function(){if(this.props.channelID&&this.updateChannelEmotes(this.props),this.props.emotePickerSessionID&&this.props.channelID){var e={channel_id:this.props.channelID,emote_picker_sid:this.props.emotePickerSessionID,generated_by:this.props.emotePickerSource,chatroom_id:this.props.roomID};l.p.track(O.SpadeEventType.ViewedEmotePicker,e)}},t.prototype.componentWillReceiveProps=function(e){if(this.props.channelID===e.channelID&&this.props.channelSubscriptionProducts===e.channelSubscriptionProducts||this.updateChannelEmotes(e),e.channelID&&e.emotePickerSessionID&&!this.props.emotePickerSessionID){var t={channel_id:e.channelID,emote_picker_sid:e.emotePickerSessionID,generated_by:e.emotePickerSource,chatroom_id:e.roomID};l.p.track(O.SpadeEventType.ViewedEmotePicker,t)}},t.prototype.render=function(){return o.createElement(c.x,{"data-a-target":"emote-picker",direction:this.props.direction?this.props.direction:c.y.TopRight,size:this.props.size?this.props.size:c.z.Medium,noTail:!0,show:!0},o.createElement(c.fb,{className:"emote-picker"},this.renderView()))},t.prototype.renderView=function(){var e=null;return null===this.state.subUpsellClickedEmote&&(e=o.createElement(o.Fragment,null,o.createElement(c.Ob,{padding:{top:2,x:2}},o.createElement(c.Fb,{autoFocus:!0,onChange:this.handleFilterChange,placeholder:Object(l.d)("Search for Emotes","EmotePickerCard"),value:this.state.inputValue})),this.renderTabContent())),o.createElement(o.Fragment,null,o.createElement(P,{channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelSubscriptionProducts:this.props.channelSubscriptionProducts,isEsportChannel:this.props.isEsportChannel||!1,handleSubAction:this.props.handleSubAction,onBackClick:this.onBackClick,onClickEmote:this.onClickLockedEmote,ownedSetIDs:this.props.ownedSetIDs,subUpsellClickedEmote:this.state.subUpsellClickedEmote}),e)},t.prototype.renderTabContent=function(){return this.props.gqlError?o.createElement(c.fb,null,o.createElement(c.Ca,{"data-test-selector":"emote-picker-menu-error-text",color:c.R.Error},Object(l.d)("Unable to load available emotes.","EmotePickerCard"))):this.props.loading?o.createElement(c.fb,{alignItems:c.i.Center,display:c.Da.Flex,fullHeight:!0,fullWidth:!0,justifyContent:c.eb.Center,padding:1},o.createElement(c.hb,null)):""!==this.state.filter?this.renderSearchContent():o.createElement(o.Fragment,null,o.createElement(w.b,{scrollRef:this.saveScrollRef,className:"emote-picker__tab-content"},o.createElement(c.fb,{padding:{bottom:2}},o.createElement(L,{checkVisible:this.checkVisible},this.getFrequentlyUsedEmoteGrid(),this.getCurrentChannelEmoteGrid(),this.getOtherSubEmoteGrids(),this.getResidualEmoteGrids()))),this.renderTabNav())},t.prototype.getFrequentlyUsedEmoteGrid=function(){return 0===this.props.frequentlyUsedEmotes.length?null:o.createElement(c.fb,{className:"emote-picker__content-block",refDelegate:this.saveFrequentlyUsedEmotesRef},o.createElement(T,{context:i.FrequentlyUsed,emotes:this.props.frequentlyUsedEmotes,label:Object(l.d)("Frequently Used","EmotePickerCard"),onClickEmote:this.onClickEmote}))},t.prototype.getCurrentChannelEmoteGrid=function(){var e=this.props.channelCampaignEmotes.concat(this.state.sortedChannelEmotes);return 0!==e.length&&this.props.channelDisplayName?o.createElement(c.fb,{className:this.props.isLoggedIn?"emote-picker__content-block":void 0,refDelegate:this.saveChannelEmotesRef},o.createElement(T,{context:i.CurrentChannel,emotes:e,imgSrc:this.props.channelProfileImageURL,label:this.props.channelDisplayName,onClickEmote:this.onClickEmote})):null},t.prototype.getOtherSubEmoteGrids=function(){var e=this;if(!this.props.isLoggedIn)return null;var t=[];return this.props.otherChannelEmoteSets.forEach(function(n){n.owner&&n.owner.displayName&&t.push(o.createElement(c.fb,{key:"emote-grid--"+n.id+"-emotes",className:"emote-picker__content-block"},o.createElement(T,{context:i.OtherChannel,emotes:n.emotes,imgSrc:n.owner.profileImageURL||void 0,label:n.owner.displayName,onClickEmote:e.onClickEmote})))}),this.state.hasUserInteracted||(t=t.slice(0,4)),o.createElement(o.Fragment,null,t)},t.prototype.getResidualEmoteGrids=function(){if(!this.props.isLoggedIn)return null;var e=[];return this.props.unlockedEmotes.length>0&&this.props.isLoggedIn&&e.push(o.createElement(c.fb,{key:"emote-grid--unlocked-emotes",className:"emote-picker__content-block"},o.createElement(T,{context:i.Unlocked,emotes:this.props.unlockedEmotes,label:Object(l.d)("Unlocked","EmotePickerCard"),onClickEmote:this.onClickEmote}))),this.props.globalEmotes.length>0&&e.push(o.createElement(c.fb,{key:"emote-grid--global-emotes"},o.createElement(T,{context:i.Global,emotes:this.props.globalEmotes,label:Object(l.d)("Global","EmotePickerCard"),onClickEmote:this.onClickEmote}))),o.createElement(c.fb,{refDelegate:this.saveAllEmotesRef},e)},t.prototype.renderSearchContent=function(){var e=Object(l.d)('No Search Results for "{inputValue}"',{inputValue:this.state.inputValue},"EmotePickerCard");return this.state.filteredEmotes.length>0&&(e=Object(l.d)('Search Results for "{inputValue}"',{inputValue:this.state.inputValue},"EmotePickerCard")),o.createElement(w.b,{className:"emote-picker__tab-content"},o.createElement(c.fb,{position:c.tb.Relative,padding:{x:1,top:1,bottom:3},className:"emote-picker__content-block"},o.createElement(c.Ob,{padding:{x:1}},o.createElement(c.Ca,{bold:!0},e)),o.createElement(I.a,{emotes:this.state.filteredEmotes,onClickEmote:this.onClickEmote,spaced:!0})))},t.prototype.renderTabNav=function(){var e=null;this.state.sortedChannelEmotes.length>0&&(e=o.createElement(R,{isActive:this.state.selectedNavTab===V.ChannelEmotes,label:V.ChannelEmotes,icon:c.Db.NavChannels,onClick:this.onTabNavClick}));var t=null;return this.props.isLoggedIn&&(t=o.createElement(R,{isActive:this.state.selectedNavTab===V.AllEmotes,label:V.AllEmotes,icon:c.Db.EmoticonsAll,onClick:this.onTabNavClick})),e||t?o.createElement(c.Ob,{background:c.u.Alt,display:c.Da.Flex,className:"emote-picker__tab-nav-container"},o.createElement(R,{isActive:this.state.selectedNavTab===V.FrequentlyUsedEmotes,label:V.FrequentlyUsedEmotes,icon:c.Db.GlyphLength,onClick:this.onTabNavClick}),e,t):null},t}(o.Component),G=n("DB+C"),W=function(e){function t(t){var n=e.call(this,t)||this;n.handleSubEvent=function(e){e.action===D.a.ClickCheckout&&n.checkAndDisplaySubscriptionCheckout();var t=n.props.channelData,i=null;if(t){var r=t.user;r&&r.self&&r.self.cumulativeTenure&&(i=r.self.cumulativeTenure.months)}Object(D.b)(a.__assign({},e,{action:D.a.ClickCheckout,channelID:t&&t.user&&t.user.id||"",channelLogin:t&&t.user&&t.user.displayName||"",cumulativeTenureMonths:i,isMenuOpen:null,hasSubCredit:null,sub_location:"emote_picker",modal:!1,showPrimeContent:!0,giftRecipient:null}))};var i={allEmoteSets:[],channelCampaignEmotes:[],channelSubscriptionProducts:[],channelDisplayName:void 0,frequentlyUsedEmotes:t.isLoggedIn?[]:Object(y.b)(),globalEmotes:[],gqlError:t.emoteSetsData&&!!t.emoteSetsData.error||t.channelData&&!!t.channelData.error||!1,gqlLoading:t.emoteSetsData&&!!t.emoteSetsData.loading||t.channelData&&!!t.channelData.loading||!1,otherChannelEmoteSets:[],ownedSetIDs:new Set([]),unlockedEmotes:[]};return i=n.applyDataPropsToState(t,i),n.state=a.__assign({},i),n}return a.__extends(t,e),t.prototype.componentDidMount=function(){Object(y.c)(),this.checkDataLoaded(this.props)&&(this.props.onLoad&&this.props.onLoad(this.checkForContent(this.props)),this.props.latencyTracking.reportInteractive())},t.prototype.componentWillReceiveProps=function(e){if(e.emoteSetsData&&e.emoteSetsData.error||e.channelData&&e.channelData.error)this.setState({gqlError:!0});else{var t=this.applyDataPropsToState(e,this.state);this.props.pubsub.messages.subscriptionInfo!==e.pubsub.messages.subscriptionInfo&&(this.props.channelData&&this.props.channelData.refetch(),this.props.emoteSetsData&&this.props.emoteSetsData.refetch()),this.checkDataLoaded(e)&&(e.latencyTracking.reportInteractive(),e.onLoad&&e.onLoad(this.checkForContent(e)),t.gqlLoading=!1),this.setState(a.__assign({},t,{gqlError:!1}))}if(e.visible&&!this.props.visible){if(this.props.openEmotePicker(),e.emoteSetsData&&e.emoteSetsData.emoteMap){var n=Object(y.d)(e.emoteSetsData.emoteMap);this.setState({frequentlyUsedEmotes:n})}}else this.props.visible&&!e.visible&&this.props.closeEmotePicker()},t.prototype.componentWillUnmount=function(){this.props.closeEmotePicker()},t.prototype.render=function(){var e=this.props.channelData;if(!this.props.visible)return null;var t=e&&e.user&&e.user.campaignProperties&&e.user.campaignProperties.domains&&e.user.campaignProperties.domains.length>0||!1,n=e&&e.user&&e.user.displayName?e.user.displayName:void 0,i=e&&e.user&&e.user.profileImageURL?e.user.profileImageURL:void 0;return o.createElement(H,{allEmoteSets:this.state.allEmoteSets,channelCampaignEmotes:this.state.channelCampaignEmotes,channelDisplayName:n,channelID:this.props.channelOwnerID,channelProfileImageURL:i,channelSubscriptionProducts:this.state.channelSubscriptionProducts,direction:this.props.direction,emotePickerSessionID:this.props.emotePickerSessionID,emotePickerSource:this.props.emotePickerSource,frequentlyUsedEmotes:this.state.frequentlyUsedEmotes,globalEmotes:this.state.globalEmotes,gqlError:this.state.gqlError,handleSubAction:this.handleSubEvent,isEsportChannel:t,isLoggedIn:this.props.isLoggedIn,loading:this.state.gqlLoading,onClickEmote:this.props.onClickEmote,ownedSetIDs:this.state.ownedSetIDs,otherChannelEmoteSets:this.state.otherChannelEmoteSets,roomID:this.props.roomID,size:this.props.size,toggleVisibility:this.props.toggleVisibility,unlockedEmotes:this.state.unlockedEmotes})},t.prototype.checkDataLoaded=function(e){var t=!e.channelOwnerID||e.channelData&&!e.channelData.loading,n=!e.isLoggedIn||e.emoteSetsData&&!e.emoteSetsData.loading;return t&&n},t.prototype.checkForContent=function(e){var t=e.emoteSetsData&&e.emoteSetsData.emoteSets&&e.emoteSetsData.emoteSets.length>0||!1,n=e.channelData&&e.channelData.user&&e.channelData.user.subscriptionProducts.filter(this.subscriptionProductHasEmotes).length>0||!1;return t||n},t.prototype.applyDataPropsToState=function(e,t){var n=a.__assign({},t);if(e.emoteSetsData&&e.emoteSetsData.emoteSets&&e.emoteSetsData.emoteSets.length>0){n.ownedSetIDs=new Set;for(var i=0,r=e.emoteSetsData.emoteSets;i<r.length;i++){var o=r[i];o&&o.id&&n.ownedSetIDs.add(parseInt(o.id,10))}var s=new Set;if(e.channelData&&e.channelData.user&&e.channelData.user.subscriptionProducts)for(var l=0,c=e.channelData.user.subscriptionProducts;l<c.length;l++){var d=c[l];d&&void 0!==d.emoteSetID&&null!==d.emoteSetID&&s.add(d.emoteSetID)}n.allEmoteSets=Object(S.a)(e.emoteSetsData.emoteSets);var u=[],m=[],p=[],h=[];n.allEmoteSets.forEach(function(t){t.owner||"0"!==t.id?t.owner&&""!==t.owner.id?e.channelData&&e.channelData.user&&e.channelData.user.id===t.owner.id?e.channelData.user.id!==t.owner.id||s.has(t.owner.id)||m.push.apply(m,t.emotes):u.push(t):h.push.apply(h,t.emotes):p.push.apply(p,t.emotes)}),n.channelCampaignEmotes=m,n.otherChannelEmoteSets=function(e){var t={};e.forEach(function(e){var n;e.owner&&e.owner.id&&(t[e.owner.id]?(n=t[e.owner.id].emotes).push.apply(n,e.emotes):t[e.owner.id]=a.__assign({},e))});var n=[];return Object.keys(t).forEach(function(e){n.push(t[e])}),n}(u),n.globalEmotes=p,n.unlockedEmotes=h}return e.channelData&&e.channelData.user&&(n.channelDisplayName=e.channelData.user.displayName,n.channelProfileImageURL=e.channelData.user.profileImageURL,n.channelSubscriptionProducts=E(n.ownedSetIDs,e.channelData.user.subscriptionProducts)),n},t.prototype.subscriptionProductHasEmotes=function(e){return void 0!==e.emoteSetID&&!!e.emotes&&e.emotes.length>0},t.prototype.checkAndDisplaySubscriptionCheckout=function(){var e=l.o.get(k.a.SUB_CHECKOUT__PRODUCT_KEY,""),t=l.o.get(k.a.SUB_CHECKOUT__RECIPIENT_KEY,""),n=l.o.get(k.a.SUB_CHECKOUT__MYSTERY_GIFT_COUNT,""),i=Number(n);e&&(this.props.channelData&&this.props.channelData.user&&this.props.channelData.user.subscriptionProducts.map(function(e){return e.name}).includes(e)?this.props.sessionUser?this.props.showSubscriptionCheckout({recipientLogin:t,productName:e,mysteryGiftCount:i,trackingContext:{source:C.c.EmotePicker}}):this.props.showLoginModal():k.a.clearSubscriptionCheckoutKeys())},t}(o.Component);var q=Object(u.compose)(Object(r.connect)(function(e){return{currentUserID:e.session.user&&e.session.user.id,emotePickerSessionID:e.chat&&e.chat.emotePickerSessionID||null,sessionUser:e.session.user,isLoggedIn:Object(f.f)(e)}},function(e){return Object(u.bindActionCreators)({closeEmotePicker:b.D,openEmotePicker:b.R,showLoginModal:k.a.showLoginModalWithCheckoutDispatch(g.a.EmotePickerSubscriptionButton),showSubscriptionCheckout:v.a},e)}),Object(m.a)(G,{name:"channelData",skip:function(e){return!e.channelOwnerID},options:function(e){return{variables:{channelOwnerID:e.channelOwnerID}}}}),Object(p.a)([{topic:function(e){return"user-subscribe-events-v1."+e.currentUserID},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:function(e){return!e.currentUserID}}]),Object(_.withLatencyTracking)("EmotePicker"),Object(h.a)())(W),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasInteracted:!1,isEmotePickerMenuVisible:!1,isEmotePickerButtonVisible:!1},t.onClickOut=function(){t.setState({isEmotePickerMenuVisible:!1})},t.onClickEmote=function(e,n){t.props.onClickEmote&&t.props.onClickEmote(e,n)},t.toggleEmotePicker=function(){t.setState(function(e){return{isEmotePickerMenuVisible:!e.isEmotePickerMenuVisible}})},t.onEmotePickerDataLoaded=function(e){e&&t.setState({isEmotePickerButtonVisible:!0})},t.onInteraction=function(){return t.setState({hasInteracted:!0})},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(),this.props.inputRef&&(this.props.inputRef.addEventListener("mouseenter",this.onInteraction),this.props.inputRef.addEventListener("focus",this.onInteraction))},t.prototype.componentWillUnmount=function(){this.props.inputRef&&(this.props.inputRef.removeEventListener("mouseenter",this.onInteraction),this.props.inputRef.removeEventListener("focus",this.onInteraction))},t.prototype.render=function(){var e=null;this.state.isEmotePickerButtonVisible&&(e=o.createElement(d,{onClick:this.toggleEmotePicker,isActive:this.state.isEmotePickerMenuVisible}));var t=null;this.hasInteractedOrPageload&&(t=o.createElement(q,{channelOwnerID:this.props.channelOwnerID,emotePickerSource:this.props.emotePickerSource,onClickEmote:this.onClickEmote,onLoad:this.onEmotePickerDataLoaded,toggleVisibility:this.toggleEmotePicker,visible:this.state.isEmotePickerMenuVisible,direction:this.props.direction}));var n=o.createElement(c.fb,a.__assign({className:"emote-picker-and-button"},this.layoutProps),e,t);return this.props.shouldCloseOnClickOut?o.createElement(s.a,{onClickOut:this.onClickOut},n):n},Object.defineProperty(t.prototype,"hasInteractedOrPageload",{get:function(){return!(!this.props.firstPageLoaded&&!this.state.hasInteracted)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutProps",{get:function(){var e={attachTop:!!this.props.attachTop,attachRight:!!this.props.attachRight,attachBottom:!!this.props.attachBottom,attachLeft:!!this.props.attachLeft,padding:this.props.padding};return this.props.position&&(e.position=this.props.position),e},enumerable:!0,configurable:!0}),t}(o.Component),Q=Object(_.withLatencyTracking)("EmotePicker")(z);var Y=Object(r.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}})(Q),K=n("cpJf");n.d(t,"a",function(){return Y}),n.d(t,"c",function(){return q}),n.d(t,!1,function(){return K.a}),n.d(t,!1,function(){return K.c}),n.d(t,!1,function(){return K.b}),n.d(t,!1,function(){}),n.d(t,"b",function(){return d})},"n+IG":function(e,t,n){},n9Ey:function(e,t,n){},nIRf:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){return function(e){var t=this;this.timerId=null,this.start=function(){t.timerId&&t.stop(),t.timerId=setInterval(t.onInterval,t.intervalMillis)},this.stop=function(){t.timerId&&(clearInterval(t.timerId),t.timerId=null)},this.restart=function(e){void 0===e&&(e=0),t.stop(),t.timerId=setTimeout(function(){t.onInterval(),t.start()},e)},this.onInterval=e.onInterval,this.intervalMillis=e.intervalMillis}}()},nInp:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var i=n("XIZb"),r=Object(i.a)("MessageBuffer"),a=r.withChatServiceProvider,o=(0,r.withContext)(function(e){return{messageBufferAPI:e.serviceAPI,setMessageBufferAPI:e.setServiceAPI}})},nR4f:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmoteCard"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"emoteID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"emoteID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProduct"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subProduct"},directives:[]}]}}]}}]}}],loc:{start:0,end:192}};i.loc.source={body:'#import "twilight/features/chat/components/emote-card/emote-subscription-product.gql"\nquery EmoteCard ($emoteID: ID!) {\nemote(id: $emoteID) {\nid\ntoken\nsubscriptionProduct {\n...subProduct\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("HfAM").definitions)),e.exports=i},nkgB:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MessageBuffer_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatDelayMs"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:118}};n.loc.source={body:"query MessageBuffer_Channel($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\nchatSettings {\nchatDelayMs\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},nt5g:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RoleRestricted"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentOwnerLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"contentOwnerLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEditor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:147}};n.loc.source={body:"query RoleRestricted($contentOwnerLogin: String!) {\ncurrentUser {\nid\nroles {\nisStaff\n}\n}\nuser(login: $contentOwnerLogin) {\nid\nself {\nisEditor\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},nxZp:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){return function(e){this.bio=e.bio,this.createdAt=e.createdAt,this.displayName=e.displayName,this.id=e.id,this.logo=e.logo,this.name=e.name,this.type=e.type,this.updatedAt=e.updatedAt}}()},o8Ti:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("/7QA"),r="viewer_card_mod_logs",a="viewer_card_mod_logs_user_whitelist";function o(e){var t=i.b.get(r,!1),n=i.b.get(a,[]);return t||!(!e||!n.includes(e))}},oK83:function(e,t,n){"use strict";var i,r,a;n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),function(e){e[e.unknown=0]="unknown",e[e.chat=1]="chat",e[e.room=2]="room",e[e.whisper=3]="whisper",e[e.vod=4]="vod"}(i||(i={})),function(e){e[e.chat_message=0]="chat_message",e[e.extension_message=1]="extension_message",e[e.member_list=2]="member_list",e[e.recent_raids=3]="recent_raids",e[e.room_message=4]="room_message",e[e.test=5]="test",e[e.user_command=6]="user_command",e[e.viewer_list=7]="viewer_list",e[e.viewer_list_mod_section=8]="viewer_list_mod_section",e[e.mega_cheer_notification=9]="mega_cheer_notification",e[e.bits_leaderboard=10]="bits_leaderboard",e[e.popout_button=11]="popout_button"}(r||(r={})),function(e){e[e.Viewer=0]="Viewer",e[e.Extension=1]="Extension",e[e.Emote=2]="Emote"}(a||(a={}))},"oc+d":function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelClip"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Clip"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"138"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"190"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"curator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"creationState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"videoOffsetSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"durationSeconds"},arguments:[],directives:[]}]}}],loc:{start:0,end:298}};i.loc.source={body:'#import "twilight/features/channel/queries/channel.gql"\nfragment channelClip on Clip {\nid\nbroadcaster {\n...channel\n}\ngame {\nid\nboxArtURL(width: 138 height: 190)\nname\n}\nlanguage\ntitle\nslug\nviewCount\ncurator {\n...channel\n}\ncreatedAt\ncreationState\nurl\nvideoOffsetSeconds\nvideo {\nid\n}\ndurationSeconds\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("BbLt").definitions)),e.exports=i},oe5X:function(e,t,n){"use strict";var i=n("XmgI"),r=n("RcPG"),a=n("0FG4"),o=n("mrSG"),s=n("VJH5");var l=n("i6WW"),c=n("gTu3"),d=n("6j5V"),u=/^(['"*([{</]*)(@?)((?:[^\u0000-\u007F]|[\w-])+)/;function m(e,t){if(!t)return!1;var n=t.displayName,i=t.login;return e===n||e.toLowerCase()===i}function p(e,t){void 0===t&&(t={});for(var n=f(e),i=function(e){if(!e)return[];var t=e.list.filter(function(t){return t.categories[s.a.Aggressive]&&e.preferences[s.a.Aggressive]||t.categories[s.a.Identity]&&e.preferences[s.a.Identity]||t.categories[s.a.Profanity]&&e.preferences[s.a.Profanity]||t.categories[s.a.Sexual]&&e.preferences[s.a.Sexual]});return 0===t.length?t:(t.sort(function(e,t){return e.startIndex-t.startIndex}),t.reduce(function(e,t,n){if(0===n)return e.push(t),e;var i=e[e.length-1];return t.startIndex<=i.endIndex+1?(i.endIndex=Math.max(t.endIndex,i.endIndex),i.categories=o.__assign({},i.categories,t.categories)):e.push(t),e},[]))}(t.flags),a=0,l=[];a<n.length;){var c=i&&i.shift();c?(l.push.apply(l,h(n.slice(a,c.startIndex),a,t)),l.push({type:r.a.FlaggedSegment,categories:c.categories,content:g(h(n.slice(c.startIndex,c.endIndex+1),c.startIndex,t)),length:c.endIndex-c.startIndex+1,originalText:n.slice(c.startIndex,c.endIndex+1).join("")}),a=c.endIndex+1):(l.push.apply(l,h(n.slice(a),a,t)),a=n.length)}return g(l)}function h(e,t,n){void 0===n&&(n={});var o=n.cheers,s=n.emotes,p=n.links,h=n.mentions,g="",f=0;return e.reduce(function(n,v,k){if(b(v))return g="",n;if(0===g.length&&(f=t+k),g+=v,k!==e.length-1&&!b(e[k+1]))return n;var C=s&&Object(a.c)(g,f,s);if(C)return n.concat(C);var y=o&&Object(i.e)(g,o);if(y)return n.concat(y);var S=p&&Object(l.a)(g,p);if(S)return n.concat(S);var E=h&&function(e,t){var n=e.match(u);if(!n)return null;var i=[],a=n[1],o=Boolean(n[2].length),s=n[3],l=e.slice(n[0].length);if(a.length&&i.push(Object(d.a)(a)),o){var p=c.a.Default;m(s,t.sessionUser)?p=c.a.Recipient:t.sessionUser&&t.sessionUser.login===t.senderLogin&&(p=c.a.Sender),i.push({type:r.a.Mention,content:{recipient:s,currentUserMentionRelation:p}})}else{if(!m(s,t.sessionUser))return null;i.push({type:r.a.CurrentUserHighlight,content:s})}return l.length&&i.push(Object(d.a)(l)),i}(g,h);return E?n.concat([E]):n.concat(Object(d.a)(g))},[])}function g(e){return e.reduce(function(e,t,n){return 0===n?[].concat.call(e,t):[].concat.call(e,Object(d.a)(" "),t)},[]).reduce(function(e,t,n){if(0===n)return e.concat(t);var i=e[e.length-1];return t.type===r.a.Text&&i.type===r.a.Text?(i.content=""+i.content+t.content,e):e.concat(t)},[])}function f(e){return e.match(/[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF]/g)||[]}function b(e){return/\s/.test(e)}n.d(t,"a",function(){return p}),n.d(t,!1,function(){return g}),n.d(t,!1,function(){return f})},oi4T:function(e,t,n){"use strict";var i,r=n("mrSG"),a=n("/7QA"),o=n("DMoW"),s=n("2xye");!function(e){e.Everyone="everyone",e.ModsOnly="mod",e.StreamChat="twitch_chat",e.SubsOnly="sub"}(i||(i={})),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return u});var l=function(e){var t;switch(e.roomMinimumRole){case o.Ma.EVERYONE:t=i.Everyone;break;case o.Ma.MODERATOR:t=i.ModsOnly;break;case o.Ma.SUBSCRIBER:t=i.SubsOnly;break;default:t=i.StreamChat}var n={channel:e.channelLogin,chatroom_type:t,is_host_mode:e.isHostMode,is_using_web_sockets:!0};return e.roomID&&(n.chatroom_id=e.roomID),n},c=function(e){var t;switch(e.roomMinimumRole){case o.Ma.EVERYONE:t=i.Everyone;break;case o.Ma.MODERATOR:t=i.ModsOnly;break;case o.Ma.SUBSCRIBER:t=i.SubsOnly;break;default:t=i.StreamChat}var n={channel:e.channelLogin,room_type:t,is_host_mode:e.isHostMode,is_using_web_sockets:!0};return e.roomID&&(n.room_id=e.roomID),e.room&&(n.room=e.room),n},d=function(e){a.p.track(s.SpadeEventType.ChatRoomJoined,l(e))},u=function(e){a.p.track(s.SpadeEventType.ChatRoomWatched,r.__assign({},l(e),{channel_id:e.channelID}))}},okS7:function(e,t,n){"use strict";n("kPBf");var i,r=n("mrSG"),a=n("17x9"),o=n("q1tI"),s=n("8Ad5"),l=n("TSYQ"),c=n("/7QA"),d=n("u5aL"),u=n("8/mp"),m=n("Ue10"),p=(n("JzSO"),"autocomplete-balloon-matches"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.resizeAnimationFrame=0,t.messages={noMatches:Object(c.d)("No matches.","AutocompleteBalloon")},t.logger=c.k.withCategory("AutocompleteBalloon"),t.renderMatches=function(){return t.props.matches.map(function(e,n){var i=t.state.selectedMatch,r=i&&i.replacement===e.replacement,a=l("autocomplete-balloon__item",{"autocomplete-balloon__item--selected":r});return o.createElement(m.fb,{key:"autocomplete-match-"+n,refDelegate:r?t.focusOnOption:void 0,"data-test-selector":p},o.createElement(m.Xa,{display:m.Da.Block,fullWidth:!0},o.createElement("button",{onMouseEnter:t.handleMatchMouseEnter,className:a,"data-a-target":e.replacement,"data-click-index":n,onClick:t.onMatchClick},o.createElement(m.fb,{padding:{x:.5},display:m.Da.Flex,alignItems:m.i.Center},e.element))))})},t.handleMatchMouseEnter=function(e){var n=t.getMatchFromEvent(e);n&&t.setState({selectedMatch:n})},t.onMatchClick=function(e){var n=t.getMatchFromEvent(e);n&&t.props.onMatchSelect(n)},t.getMatchFromEvent=function(e){var n=t.props.matches,i=e.currentTarget.getAttribute("data-click-index");return!i||+i>=n.length?(t.logger.error(new Error,"The index received from the UI element was not found in props.matches."),null):n[+i]},t.handleKeydown=function(e){var n=e.charCode||e.keyCode,i=function(){e.preventDefault(),e.stopPropagation()};switch(n){case s.a.Tab:case s.a.Enter:i(),t.props.matches.length&&t.state.selectedMatch?t.props.onMatchSelect(t.state.selectedMatch):t.props.onDismiss();break;case s.a.Up:case s.a.Down:if(!t.state.selectedMatch||!t.props.matches.length)return;var r=t.props.matches.indexOf(t.state.selectedMatch);if(-1===r)return void t.logger.error(new Error,"The selected match was not found in props.matches.");i();var a=n===s.a.Up?-1:1,o=t.getIndexWithinLength(r+a,t.props.matches.length),l=t.props.matches[o];t.setState({selectedMatch:l})}},t.getIndexWithinLength=function(e,t){var n=e%t;return n<0?n+t:n},t.onResize=function(){t.resizeAnimationFrame||(t.resizeAnimationFrame=requestAnimationFrame(t.setContainerHeight))},t.setContainerHeight=function(){var e=t.props.containerElement&&t.props.containerElement.clientHeight||1080;t.setState({containerHeight:e}),t.resizeAnimationFrame=0},t.focusOnOption=function(e){if(e&&t.autocompleteBalloonElement){var n=e.getBoundingClientRect(),i=t.autocompleteBalloonElement.getBoundingClientRect();(n.bottom>i.bottom||n.top<i.top)&&e.scrollIntoView()}},t.setAutocompleteBalloonElement=function(e){t.autocompleteBalloonElement=e},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){window.addEventListener("keydown",this.handleKeydown,!0),window.addEventListener("resize",this.onResize,!0),this.setContainerHeight(),this.props.matches.length>0&&this.setState({selectedMatch:this.props.matches[0]})},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize,!0),window.removeEventListener("keydown",this.handleKeydown,!0),this.resizeAnimationFrame&&cancelAnimationFrame(this.resizeAnimationFrame)},t.prototype.componentWillReceiveProps=function(e){var t=this,n=e.matches.reduce(function(e,n,i){return t.state.selectedMatch?n.replacement===t.state.selectedMatch.replacement?i:e:0},0);this.setState({selectedMatch:e.matches[n]})},t.prototype.render=function(){var e;return e=0===this.props.matches.length?o.createElement(m.fb,{padding:{x:.5},"data-test-selector":"autocomplete-balloon-no-matches"},o.createElement(m.Ca,{type:m.gc.Span,color:m.R.Alt2},this.messages.noMatches)):this.renderMatches(),o.createElement(m.fb,{position:m.tb.Relative},o.createElement(d.a,{onClickOut:this.props.onDismiss},o.createElement(m.x,{direction:m.y.TopLeft,"data-a-target":"autocomplete-balloon","data-test-selector":"autocomplete-balloon",show:!0},o.createElement(m.Xa,{"data-test-selector":"autocomplete-matches-container",className:"autocomplete-balloon",overflow:m.mb.Hidden,display:m.Da.Flex,flexDirection:m.Ga.Column},o.createElement("div",{style:{maxHeight:this.state.containerHeight},ref:this.setAutocompleteBalloonElement},o.createElement(u.b,null,o.createElement(m.fb,{padding:{y:1}},e)))))))},t}(o.Component),g=n("uu1w"),f=n("2xye"),b={Chat:"chat",Feed:"feed",Whisper:"whisper"},v=":",k="#",C="@",y=function(e){switch(e){case g.a.Emote:return v;case g.a.Hashtag:return k;case g.a.Mention:return C;default:return void c.k.warn("Chat Suggestions tracking was passed an unknown autocomplete type.")}},S=function(e){var t=y(e.autocompleteType);if(t){var n={channel:e.channelLogin,completed_text:e.completedText,source:e.source,start_character:t};c.p.track(f.SpadeEventType.ChatSuggestionComplete,n)}};!function(e){e.Input="input",e.TextArea="textarea"}(i||(i={}));var E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={autocompleteType:g.a.None,matchedCursorPosition:0,matches:null,value:""},t.providers=[],t.onChange=function(e){t.setState({value:e.target.value},function(){t.getMatches()}),t.props.onChange&&t.props.onChange(e)},t.onKeyDown=function(e){var n=function(){t.props.onKeyDown&&t.props.onKeyDown(e)},i=function(){e.preventDefault(),e.stopPropagation()},r=e.charCode||e.keyCode;if(r!==s.a.Enter){switch(r){case s.a.Tab:if(!t.state.matches)t.getMatches(!0)&&i();break;case s.a.Esc:t.state.matches&&(i(),t.resetDisplayState())}n()}else n()},t.setComponentRefDelegate=function(e){t.componentRef=e,t.props.componentRefDelegate&&t.props.componentRefDelegate(e)},t.getMatches=function(e){var n=t.state.value;if(0===t.providers.length||0===n.length)return t.resetDisplayState(),!1;var i=t.getCurrentCursorPosition();if(i>n.length);else for(;i<n.length&&!/\s/.test(n.charAt(i));)i++;var r=n.substring(0,i);if(0===r.length||/\s/.test(r.substring(r.length-1)))return t.resetDisplayState(),!1;for(var a=r.split(/\s/),o=a[a.length-1],s=0,l=t.providers;s<l.length;s++){var c=l[s];if(!e||c.canBeTriggeredByTab){var d=c.getMatches(o,e);if(d)return t.setState({autocompleteType:c.autocompleteType,matchedCursorPosition:i,matches:d}),!0}}return t.resetDisplayState(),!1},t.resetDisplayState=function(e,n){var i=r.__assign({},t.state,{autocompleteType:g.a.None,matches:null},e||{});t.setState(i,n)},t.insertReplacement=function(e){var n=t.state.value,i=t.state.matchedCursorPosition,a=n.substring(0,i),o=a.lastIndexOf(e.current);if(-1===o)a=a.concat(e.replacement+" "),i=a.length;else{var s=a.substring(0,o),l=n.length>o+e.current.length?n.substring(o+e.current.length):"",c=l.startsWith(" ")?e.replacement:e.replacement+" ";a=""+s+c+l,i=s.length+c.length}S(r.__assign({},t.props.trackingParams||{},{autocompleteType:t.state.autocompleteType,completedText:e.replacement,source:t.props.suggestionSource})),t.resetDisplayState({value:a},function(){t.setCursorPosition(i)})},t.getCurrentCursorPosition=function(){return t.componentRef.selectionStart||0},t.setCursorPosition=function(e){t.componentRef&&(t.componentRef.setSelectionRange(e,e),t.componentRef.focus())},t.registerAutocompleteProvider=function(e){return t.providers.push(e),function(){var n=t.providers.indexOf(e);t.providers.splice(n,1)}},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.refDelegate&&this.props.refDelegate(this)},t.prototype.getChildContext=function(){return{registerAutocompleteProvider:this.registerAutocompleteProvider}},t.prototype.componentWillUpdate=function(e,t){!this.state.matches&&t.matches&&function(e){var t=y(e.autocompleteType);if(t){var n={source:e.source,start_character:t};c.p.track(f.SpadeEventType.ChatSuggestion,n)}}({autocompleteType:t.autocompleteType,source:e.suggestionSource})},t.prototype.componentDidUpdate=function(e,t){t.value!==this.state.value&&this.props.onValueUpdate&&this.props.onValueUpdate(this.state.value)},t.prototype.render=function(){var e=r.__assign({},this.props,{onChange:this.onChange,onKeyDown:this.onKeyDown,refDelegate:this.setComponentRefDelegate,value:this.state.value});return o.createElement(m.fb,null,this.state.matches&&o.createElement(h,{matches:this.state.matches,onMatchSelect:this.insertReplacement,onDismiss:this.resetDisplayState,containerElement:this.props.containerElement}),this.props.componentType===i.Input?o.createElement(m.Za,r.__assign({},e,{type:e.type||m.bb.Text})):o.createElement(m.dc,r.__assign({},e)),this.props.children)},t.prototype.getValue=function(){return this.state.value},t.prototype.setValue=function(e){this.resetDisplayState({value:e})},t.childContextTypes={registerAutocompleteProvider:a.func},t}(o.Component),N=n("lZdE"),_=n("OpME"),D=(n("gDzh"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=g.a.Emote,t.canBeTriggeredByTab=!1,t.getMatches=function(e){return e.startsWith(":")?e.length<3?null:t.getMatchedEmotes(e):null},t.getMatchedEmotes=function(e){var n=t.state.hydratedEmotes;if(!n||0===n.length)return null;var i=e.substring(1),r=n.reduce(function(e,n){var r=n.emotes.filter(function(e){if(e.token)return t.doesEmoteMatchTerm(e,i)});return e.concat([r])},[]).filter(function(e){return e.length>0}).reduce(function(e,t){return e.concat(t)},[]);return r=Object(_.d)(r),(r=Object(_.e)(r,i)).map(function(e){return{current:":"+i,replacement:e.token,element:t.renderEmoteSuggestion(e)}})},t.doesEmoteMatchTerm=function(e,t){var n=new RegExp("^"+Object(N.a)(t),"i");if(e.token.match(n))return!0;var i=new RegExp(""+Object(N.a)(t.charAt(0)).toUpperCase()),r=new RegExp("^"+Object(N.a)(t.slice(1)),"i"),a=e.token.match(i);return!!(a&&a.index&&e.token.slice(a.index+1).match(r))},t.renderEmoteSuggestion=function(e){return[o.createElement(m.fb,{padding:{right:.5},flexShrink:0,key:"emote-img-"+e.id},o.createElement("img",{className:"emote-autocomplete-provider__image",srcSet:e.srcSet})),o.createElement(m.Ca,{type:m.gc.Span,key:"emote-text-"+e.id,ellipsis:!0},e.token)]},t.hydrateEmotes=function(e){for(var n=[],i=0,r=e;i<r.length;i++){var a=r[i];a&&a.id&&a.emotes&&n.push({id:a.id,emotes:Object(_.b)(a.emotes)})}t.setState({hydratedEmotes:n})},t}return r.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.emotes&&this.props.emotes!==e.emotes&&this.hydrateEmotes(e.emotes)},t.prototype.componentWillMount=function(){this.hydrateEmotes(this.props.emotes)},t.prototype.componentDidMount=function(){this.unregister=this.context.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t.contextTypes={registerAutocompleteProvider:a.func},t}(o.Component));n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,"b",function(){return E}),n.d(t,"a",function(){return i}),n.d(t,!1,function(){}),n.d(t,"d",function(){return D}),n.d(t,"c",function(){return b})},olXY:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatRestrictions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatRestrictedReasons"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastRecentChatMessageAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"follower"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"followedAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"chatSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"requireVerifiedAccount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEmailVerified"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:247}};n.loc.source={body:"query ChatRestrictions($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\nself {\nchatRestrictedReasons\nlastRecentChatMessageAt\nfollower {\nfollowedAt\n}\n}\nchatSettings {\nrequireVerifiedAccount\n}\n}\ncurrentUser {\nid\nisEmailVerified\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},p52R:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.Admin="admin",e.GlobalMod="global_mod",e.Moderator="mod",e.Owner="owner",e.Staff="staff",e.Subscriber="subscriber",e.User=""}(i||(i={}))},pU2t:function(e,t,n){"use strict";var i=n("mrSG"),r=n("XmgI"),a=n("ahza"),o=n("DpwM"),s=n("a1OF"),l=function(e,t,n){var i=e.body,r=function(e){void 0===e&&(e=[]);return e.reduce(function(e,t){return e[t.begin]={id:t._id,startIndex:t.begin},e},{})}(e.emoticons),a=Object(s.e)(i,r,e.bits_spent||0,n,t);return{id:"1",isAction:e.is_action,tokens:a,userColor:e.user_color?e.user_color:Object(s.b)(t)}};var c=n("XeJ1");n.d(t,"b",function(){return d}),n.d(t,"g",function(){return u}),n.d(t,"c",function(){return m}),n.d(t,"f",function(){return p}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return g}),n.d(t,"a",function(){return b});var d="comment";function u(e){return Object(a.e)(e)?{message:e.message,parent_id:e.parentId}:{content_id:e.contentId,content_offset_seconds:e.contentOffsetSeconds,content_type:e.contentType,message:e.message}}var m=function(e){return{comments:[b.normalizeRecord(e,r.a)],users:[c.a.normalizeRecord(e.commenter)]}},p=function(e,t){var n=i.__assign({},e,{more_replies:t.moreReplies});return{comments:[b.normalizeRecord(n,r.a)],users:[c.a.normalizeRecord(e.commenter)]}},h=function(e,t){var n=e.comments.map(function(e){return c.a.normalizeRecord(e.commenter)}),i={past:o.g,future:o.g};return void 0!==e._next&&(i.future=e._next),void 0!==e._prev&&(i.past=e._prev),{comments:e.comments.reduce(function(e,i){return i.replies&&i.replies.map(function(e){n.push(c.a.normalizeRecord(e.commenter))}),e.concat(b.normalizeRecords(i,t))},[]),cursor:i,users:n}},g=function(e){var t=e.comments.map(function(e){return c.a.normalizeRecord(e.commenter)});return{comments:e.comments.map(function(e){return b.normalizeRecord(e,r.a)}),cursor:{future:e._next||o.g},users:t}};function f(e){return e.reduce(function(e,t){return e[t._id]=t.version,e},{})}var b={normalizeRecords:function(e,t){var n=[b.normalizeRecord(e,t)];return Array.isArray(e.replies)&&e.replies.forEach(function(e){n.push(v.normalizeRecord(e,t))}),n},normalizeRecord:function(e,t){return{channelId:e.channel_id,commenter:e.commenter._id,contentId:e.content_id,contentOffset:Math.floor(e.content_offset_seconds),contentType:e.content_type,createdAt:new Date(e.created_at),id:e._id,message:l(e.message,e.commenter._id,t),moreReplies:e.more_replies||!1,parentId:void 0!==e.parent_id?e.parent_id:"",state:e.state,source:e.source,userBadges:f(e.message.user_badges||[])}}},v={normalizeRecord:function(e,t){return{channelId:e.channel_id,commenter:e.commenter._id,contentId:e.content_id,contentOffset:Math.floor(e.content_offset_seconds),contentType:e.content_type,createdAt:new Date(e.created_at),id:e._id,message:l(e.message,e.commenter._id,t),moreReplies:!1,parentId:void 0!==e.parent_id?e.parent_id:"",state:e.state,source:e.source,userBadges:f(e.message.user_badges||[])}}}},"pq/L":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hasVideoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGlobalMod"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"emoteSets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"includePrivate"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"hasVideoID"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"cheer"},directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:497}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\n#import "twilight/features/chat/models/cheer-fragment.gql"\nquery VideoComments($videoID: ID! $hasVideoID: Boolean!) {\nbadges {\n...badge\n}\ncurrentUser {\nid\nroles {\nisStaff\nisSiteAdmin\nisGlobalMod\n}\nblockedUsers {\nid\n}\nemoteSets {\nid\nemotes {\nid\ntoken\n}\n}\n}\nvideo(id: $videoID options: { includePrivate: true }) @include(if: $hasVideoID) {\nid\nbroadcastType\nowner {\nid\nlogin\nbroadcastBadges {\n...badge\n}\n...cheer\nself {\nisModerator\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}i.definitions=i.definitions.concat(a(n("IKE4").definitions)),i.definitions=i.definitions.concat(a(n("F9eG").definitions)),e.exports=i},pwkZ:function(e,t,n){"use strict";var i=n("mrSG"),r=n("TSYQ"),a=n("q1tI"),o=n("DMoW"),s=n("4rCz"),l=n("uIkQ"),c=n("0Lz3"),d=n("GnwI"),u=n("Sfdh"),m=n("Ue10"),p=15e3,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autoDismissErrorTimeoutId=0,t.clearDismissTimeout=function(){window.clearTimeout(t.autoDismissErrorTimeoutId)},t.onManualErrorDismissClickHandler=function(){t.props.onErrorDismissed(!0)},t.setAutoDismissTimeout=function(){t.autoDismissErrorTimeoutId=window.setTimeout(function(){t.props.onErrorDismissed()},p)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.setAutoDismissTimeout()},t.prototype.componentWillUpdate=function(e){this.props.message!==e.message&&(this.clearDismissTimeout(),this.setAutoDismissTimeout())},t.prototype.componentWillUnmount=function(){this.clearDismissTimeout()},t.prototype.render=function(){var e=null;return this.props.message===Object(u.a)().chatReplayFilterError&&(e=a.createElement(m.Ca,{type:m.gc.Span}," ",a.createElement(m.Ca,{type:m.gc.Span,decoration:m.ec.Underline},a.createElement("a",{onClick:this.props.onMessageClick},Object(s.d)("Click here to show all messages.","CommentError"))))),a.createElement(m.Ob,{alignItems:m.i.Center,background:m.u.Base,className:"anim-swoop",color:m.R.Error,"data-test-selector":"vod-chat-error",display:m.Da.Flex,flexWrap:m.Ha.NoWrap,fullWidth:!0,padding:{y:1,x:2},position:m.tb.Absolute,zIndex:m.xc.Above},a.createElement(m.Ca,{type:m.gc.Span},this.props.message,e),a.createElement(m.fb,{alignSelf:m.j.Start},a.createElement(m.D,{ariaLabel:Object(s.d)("Close","CommentErrorComponent"),icon:m.Db.Close,onClick:this.onManualErrorDismissClickHandler})))},t}(a.Component),g=n("/7QA"),f=n("hyVY"),b=n("0FG4"),v=n("okS7"),k=n("tFCv"),C=n("mmRu"),y=n("cpJf"),S=n("OpME"),E=n("/MKj"),N=n("ZuiC"),_=n("fI4C"),D=(n("UZgS"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buildModerationDashboardURL=function(){return"/"+t.props.videoOwnerLogin+"/dashboard/moderation"},t.buildModerationPrefsURL=function(){return"/"+t.props.videoOwnerLogin+"/dashboard/settings/moderation"},t.onReplayModeChange=function(e){t.props.onReplayModeChange(e.currentTarget.checked)},t.onTimestampModeChange=function(e){t.props.onTimestampModeChange(e.currentTarget.checked)},t}return i.__extends(t,e),t.prototype.render=function(){var e=null;this.props.isUpload||(e=a.createElement(m.fb,{display:m.Da.Flex,flexWrap:m.Ha.NoWrap,justifyContent:m.eb.Between,key:"viewerReplayOption",padding:{bottom:1}},a.createElement(m.fb,null,Object(g.d)("Show me only messages posted during the live broadcast","VideoChatSettings")),a.createElement(m.fb,{flexShrink:0},a.createElement(m.ic,{checked:this.props.isReplayFilterOn,"data-test-selector":"reply-mode",onChange:this.onReplayModeChange}))));var t=[a.createElement(m.Ca,{key:"moderationHeader",bold:!0},Object(g.d)("Mod Tools","VideoChatSettings"))];return this.props.canSessionEditModerationSettings&&t.push(a.createElement(m.Xa,{key:"moderationPrefs",display:m.Da.InlineBlock},a.createElement(m.Aa,{to:this.buildModerationPrefsURL(),"data-test-selector":"video_chat_settings_mod_prefs"},Object(g.d)("Change moderation preferences","VideoChatSettings")))),this.props.canSessionModerateMessages&&t.push(a.createElement(m.Xa,{key:"moderationDashboard",display:m.Da.InlineBlock},a.createElement(m.Aa,{to:this.buildModerationDashboardURL(),"data-test-selector":"video_chat_settings_mod_dashboard"},Object(g.d)("Moderate messages","VideoChatSettings")))),a.createElement(m.fb,{className:"video-chat__settings",padding:{x:2,y:2}},a.createElement(m.Ca,{bold:!0},Object(g.d)("Viewer Settings","VideoChatSettings")),e,a.createElement(m.fb,{display:m.Da.Flex,justifyContent:m.eb.Between,padding:{bottom:1}},a.createElement(m.fb,null,Object(g.d)("Hide timestamps","VideoChatSettings")),a.createElement(m.fb,{flexShrink:0},a.createElement(m.ic,{"data-test-selector":"timestamp-mode",checked:this.props.hideTimestamps,onChange:this.onTimestampModeChange}))),t.length>1?t:null)},t}(a.Component)),w=Object(d.withLatencyTracking)("ChatSettings")(D);var O,I=Object(E.connect)(function(e){return{isReplayFilterOn:e.vodChat.comments.isReplayFilterOn,hideTimestamps:e.vodChat.comments.hideTimestamps}},function(e){return{onReplayModeChange:function(t){Object(_.m)({setting:_.c,value:t?_.b:_.a}),e(Object(N.C)(t))},onTimestampModeChange:function(t){Object(_.m)({setting:_.d,value:t?_.b:_.a}),e(Object(N.F)(t))}}})(w),T=n("Tqc9");!function(e){e.CurrentTime="current-time"}(O||(O={}));var M=function(e){function t(t){var n=e.call(this,t)||this;n.onKeyDown=function(e){switch(e.key){case T.b:e.preventDefault(),n.createComment();break;case T.d:n.maybeUnpauseScrolling();break;case T.a:n.setState({isMentionPaused:!n.state.isMentionPaused&&n.props.isScrollingSynced||n.state.isMentionPaused}),n.props.onScrollPause()}},n.createComment=function(){if(""!==n.state.newMessageText){if(n.props.isPostCooldownActive)return n.setState({showCoolDownState:!0}),void n.props.onError(Object(u.a)().messageCreatedTooQuickError);n.props.onCreateComment(n.state.newMessageText),n.setState({newMessageText:""}),n.autocompleteInputRef.setValue(""),n.maybeUnpauseScrolling()}},n.setTextareaRef=function(e){n.textArea=e},n.setAutocompleteInputRef=function(e){n.autocompleteInputRef=e},n.maybeUnpauseScrolling=function(){n.state.isMentionPaused&&(n.setState({isMentionPaused:!1}),n.props.onScrollResume())},n.onChange=function(e){n.setState({newMessageText:e})},n.onEmoticonClick=function(e){n.autocompleteInputRef.setValue(n.state.newMessageText+" "+e),n.setState({newMessageText:n.state.newMessageText+" "+e}),n.maybeUnpauseScrolling()},n.getSessionSpecificEmotes=function(){if(!n.props.currentUser||!n.props.currentUser.emoteSets)return[];var e=Object(b.b)(n.props.currentUser.emoteSets);return Object.keys(e).map(function(t){return{id:t,emotes:Object(S.b)([e[t]])}})};var i=null!==n.props.currentUser&&(n.props.currentUser.id===n.props.videoOwnerID||!!n.props.currentUser.roles&&!!n.props.currentUser.roles.isStaff),r=null!==n.props.currentUser&&(n.props.isModerator||n.props.currentUser.roles&&n.props.currentUser.roles.isSiteAdmin||i);return n.state={isMentionPaused:!1,canSessionModerateMessages:r,canSessionEditModerationSettings:i,newMessageText:"",showCoolDownState:!1},n}return i.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.isPostCooldownActive||this.setState({showCoolDownState:!1})},t.prototype.render=function(){var e=null;(!this.props.isUpload||this.state.canSessionModerateMessages||this.state.canSessionEditModerationSettings)&&(e=a.createElement(k.b,null,a.createElement(I,{canSessionEditModerationSettings:this.state.canSessionEditModerationSettings,canSessionModerateMessages:this.state.canSessionModerateMessages,videoOwnerLogin:this.props.videoOwnerLogin,isUpload:this.props.isUpload})));var t=null;return this.props.currentUser&&(t=a.createElement(v.d,{emotes:this.getSessionSpecificEmotes()})),a.createElement("div",null,a.createElement(m.fb,{position:m.tb.Relative},a.createElement(v.b,{componentType:v.a.TextArea,suggestionSource:v.c.Chat,onValueUpdate:this.onChange,onKeyDown:this.onKeyDown,componentRefDelegate:this.setTextareaRef,refDelegate:this.setAutocompleteInputRef,paddingRight:30,placeholder:Object(g.d)("Post a message","VideoChatInput"),noResize:!0,"data-a-target":"video-chat-input",disabled:this.state.showCoolDownState},t),a.createElement(C.a,{channelOwnerID:this.props.videoOwnerID,emotePickerSource:y.a.VodChat,inputRef:this.textArea,onClickEmote:this.onEmoticonClick,attachTop:!0,attachRight:!0,position:m.tb.Absolute})),a.createElement(m.fb,{margin:{top:1},justifyContent:m.eb.Between,display:m.Da.Flex},e,a.createElement("span",null)," ",a.createElement(m.C,{onClick:this.createComment,disabled:this.state.showCoolDownState,"data-a-target":"video-chat-submit-button"},a.createElement(m.fb,{display:m.Da.Flex},a.createElement("span",null,Object(g.d)("Post at ","CommentInput")),a.createElement(m.fb,{margin:{x:.5},display:m.Da.Flex},a.createElement(m.Cb,{asset:m.Db.GlyphLength})),a.createElement("span",{"data-test-selector":O.CurrentTime},Object(f.b)(this.props.currentVideoTime))))))},t}(a.Component);var L,R=Object(d.withLatencyTracking)("MessageInput",{autoReportInteractive:!0})(M),x=function(e){var t=e.offset,n=e.onClick;return a.createElement(m.fb,{margin:{right:.5}},a.createElement(m.jc,{align:m.kc.Left,direction:m.lc.Top,label:Object(g.d)("Jump to video","TimeStamp")},a.createElement(m.cb,{onClick:n,blurAfterClick:!0},a.createElement(m.fb,{padding:{x:.5}},a.createElement(m.Ca,{fontSize:m.Ia.Size7},Object(f.b)(t))))))},F=n("ZEQw"),A=n("ZVTe"),j=n("Zkco"),U=n("u5aL"),B=n("Jxh/"),P=n("GCGb"),V=n("fCiU"),H=n("cr+I"),G=function(e,t){var n=new URL("https://www.twitch.tv/videos/"+e);if(t){var i=H.stringify(t);n.search=i}return n},W=n("Addw"),q="ban-user",z="delete-comment-button",Q="reply-button",Y="relative-time-title",K="share-button",$="share-button-clicked",X=3e3,J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={confirmationAction:null,isMenuOpen:!1,isLinkCopied:!1},t.dismissTimeoutID=0,t.onToggleMenu=function(){t.state.isMenuOpen?t.closeMenu():(t.setState({isMenuOpen:!0}),t.props.onOpen())},t.getContent=function(){if("function"==typeof t.state.confirmationAction)return a.createElement(m.fb,{padding:{y:1}},a.createElement(m.Ob,{display:m.Da.Flex,margin:{x:1},padding:{bottom:.5}},a.createElement(m.Ca,{type:m.gc.Span},Object(g.d)("Are you sure you want to perform this action?","chomments.moderation.confirmAction"))),a.createElement(m.fb,{display:m.Da.Flex,justifyContent:m.eb.Center,alignItems:m.i.Center},a.createElement(m.fb,{display:m.Da.Inline,padding:{right:1}},a.createElement(m.C,{type:m.I.Alert,onClick:t.onContinueClickHandler,"data-test-selector":P.a},Object(g.d)("Yes","MessageOptionsMenu"))),a.createElement(m.C,{type:m.I.Hollow,onClick:t.onCancelClickHandler,"data-test-selector":P.c},Object(g.d)("No","MessageOptionsMenu"))));var e=[];t.props.isExpandedLayout||e.push(a.createElement(m.Ob,{key:t.props.context.comment.id,color:m.R.Alt2,display:m.Da.Flex,"data-test-selector":Y},a.createElement(m.Ob,{margin:{x:1},padding:{bottom:.5},fullWidth:!0,borderBottom:!0},a.createElement(m.Ca,{type:m.gc.Span},Object(g.d)("Posted ","MessageOptionsMenu"),Object(g.i)(t.props.context.comment.createdAt)))),a.createElement(m.Ob,{key:t.props.context.comment.id+"2",display:m.Da.Flex,color:m.R.Link},a.createElement(m.cb,{onClick:t.onReplyClickHandler,"data-test-selector":Q},a.createElement(m.fb,{padding:{y:.5,x:1}},Object(g.d)("Reply to {userName}",{userName:Object(V.b)(t.props.context.author)},"MessageOptionsMenu")))));var n=[];t.props.isCurrentUserModerator&&n.push(a.createElement(m.fb,{key:t.props.context.comment.id,display:m.Da.Flex},a.createElement(m.cb,{type:m.db.Alert,onClick:t.onDeleteButtonClickHandler,"data-test-selector":z},a.createElement(m.Ob,{margin:{x:1},padding:{y:.5},borderBottom:!0},Object(g.d)("Delete","MessageOptionsMenu")))),a.createElement(m.fb,{key:t.props.context.comment.id+"2",display:m.Da.Flex},a.createElement(m.cb,{type:m.db.Alert,onClick:t.onBanUserClickHandler,"data-test-selector":q},a.createElement(m.fb,{padding:{y:.5,x:1}},Object(g.d)("Ban User","MessageOptionsMenu")))));var i=a.createElement(m.cb,{onClick:t.onShareClick,"data-test-selector":K},a.createElement(m.fb,{padding:{y:.5,x:1}},Object(g.d)("Copy Link","MessageOptionsMenu")));t.state.isLinkCopied&&(i=a.createElement(m.C,{fullWidth:!0,icon:m.Db.Check,type:m.I.Success,"data-test-selector":$},a.createElement(m.fb,{display:m.Da.Flex,alignItems:m.i.Center,justifyContent:m.eb.Start},Object(g.d)("Copied to clipboard","MessageOptionsMenu"))));var r=a.createElement(m.Ob,{display:m.Da.Flex,fullWidth:!0,key:t.props.context.comment.id+"-share",color:m.R.Link},i);return a.createElement(m.fb,{padding:{y:1}},e,r,n)},t.closeMenu=function(){t.setState({isMenuOpen:!1,confirmationAction:null,isLinkCopied:!1}),t.props.onClose()},t.onShareClick=function(){var e=t.props.context.comment,n=e.contentId,i=G(n,{tt_medium:"video_chat",tt_content:"message_share_link",t:Object(W.a)(e.contentOffset),comment:e.id});return Object(B.a)(i.toString()),t.setState({isLinkCopied:!0},function(){return t.dismissTimeoutID=setTimeout(function(){t.setState({isLinkCopied:!1})},X)}),Object(_.l)(e,i)},t.onReplyClickHandler=function(){t.props.onReplyClick(Object(V.b)(t.props.context.author)),t.closeMenu()},t.onBanUserClickHandler=function(){t.setState(function(e){return i.__assign({},e,{confirmationAction:t.props.onBanUserClick})})},t.onDeleteButtonClickHandler=function(){t.setState(function(e){return i.__assign({},e,{confirmationAction:t.props.onDeleteCommentClick})})},t.onContinueClickHandler=function(){t.state.confirmationAction&&t.state.confirmationAction(),t.closeMenu()},t.onCancelClickHandler=function(){t.setState(function(e){return i.__assign({},e,{confirmationAction:null})})},t}return i.__extends(t,e),t.prototype.componentWillUnmount=function(){clearTimeout(this.dismissTimeoutID)},t.prototype.render=function(){return a.createElement(m.fb,{position:m.tb.Relative},a.createElement(U.a,{onClickOut:this.closeMenu},a.createElement(m.D,{ariaLabel:Object(g.d)("Message Actions Menu","VideoCommentsMenu"),size:m.E.Small,type:m.F.Secondary,"data-test-selector":"menu-button",icon:m.Db.More,onClick:this.onToggleMenu}),a.createElement(m.x,{direction:m.y.BottomRight,show:this.state.isMenuOpen,size:m.z.Small,offsetX:"0.5rem"},this.getContent())))},t}(a.Component),Z=(n("Nimz"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={forceMenuVisibility:!1},t.onBanUserClickHandler=function(){t.props.onBanUserClick({bannedUser:t.props.context.comment.commenter,targetChannel:t.props.context.comment.channelId,comment:t.props.context.comment})},t.onDeleteCommentClickHandler=function(){t.props.onDeleteCommentClick(t.props.context.comment)},t.onMenuOpenHandler=function(){t.props.onDisableSync(),t.setState({forceMenuVisibility:!0})},t.onMenuCloseHandler=function(){t.setState({forceMenuVisibility:!1})},t}return i.__extends(t,e),t.prototype.render=function(){var e,t=this.props,n=t.context,i=t.badgeSets,o=t.currentUser,s=!!o&&n.comment.commenter===o.id,c=void 0!==n.comment.userBadges[F.a],d=r("video-chat__message-menu",{"video-chat__message-menu--force-visible":this.state.forceMenuVisibility}),u=a.createElement(m.fb,{className:d,"data-test-selector":"menu-options-wrapper",flexShrink:0},a.createElement(J,{context:n,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,onBanUserClick:this.onBanUserClickHandler,onClose:this.onMenuCloseHandler,onDeleteCommentClick:this.onDeleteCommentClickHandler,onOpen:this.onMenuOpenHandler,onReplyClick:this.props.onReplyClick})),p=r("video-chat__message-author",((e={})["video-chat__message-author--me"]=s,e["video-chat__message-author--creator"]=c,e)),h=s||c?"":n.comment.message.userColor,g=a.createElement(m.Xa,{padding:{right:.5}},a.createElement("span",null,":"));return n.comment.message.isAction&&(g=a.createElement(m.Xa,{padding:{right:.5}},a.createElement("span",null))),a.createElement(m.fb,{alignItems:m.i.Start,display:m.Da.Flex,flexWrap:m.Ha.NoWrap},a.createElement(m.fb,{flexGrow:1},a.createElement(l.b,{badgesToRender:n.comment.userBadges,badgeSets:i,usesSchemaBadges:!0}),a.createElement("a",{className:p,"data-test-selector":"comment-author-selector","data-tt_content":"tab_videos","data-tt_medium":"video-message-author",href:"/"+n.author.name,target:"_blank",rel:"noopener noreferrer"},a.createElement(A.a,{userData:Object(V.a)(n.author,h),highlighted:s||c})),a.createElement(m.fb,{display:m.Da.Inline,className:"video-chat__message","data-test-selector":"comment-message-selector"},g,a.createElement(j.a,{message:n.comment.message,allowActionTextColors:!0,author:n.author}))),u)},t}(a.Component)),ee=n("GEnX"),te=n("4OCo"),ne=function(e){return a.createElement(m.fb,{padding:{y:.5,left:1}},a.createElement(m.fb,{className:"vod-message__content"},a.createElement(Z,{badgeSets:e.badgeSets,context:e.context,currentUser:e.currentUser,isCurrentUserModerator:e.isCurrentUserModerator,isExpandedLayout:e.isExpandedLayout,onBanUserClick:e.onBanUserClick,onDeleteCommentClick:e.onDeleteCommentClick,onDisableSync:e.onDisableSync,onReplyClick:e.onReplyClick})))},ie="vod-message-reply",re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.makeReplyButtonAndRelativeTime=function(e){return a.createElement(m.fb,{display:m.Da.Flex,alignItems:m.i.Center},a.createElement(ee.a,{context:ie,onReplyClick:t.props.onReplyClick,replyCommentContext:e}),a.createElement(m.Xa,{margin:{left:.5}},a.createElement(m.Ca,{color:m.R.Alt2,fontSize:m.Ia.Size7,type:m.gc.Span}," • "+Object(g.i)(e.comment.createdAt))))},t.makeReply=function(e){var n=null;return t.props.isExpandedLayout&&(n=t.makeReplyButtonAndRelativeTime(e)),a.createElement("li",{key:e.comment.id},a.createElement(ne,{badgeSets:t.props.badgeSets,context:e,currentUser:t.props.currentUser,isCurrentUserModerator:t.props.isCurrentUserModerator,isExpandedLayout:t.props.isExpandedLayout,onBanUserClick:t.props.onBanUserClick,onDeleteCommentClick:t.props.onDeleteCommentClick,onDisableSync:t.props.onDisableSync,onReplyClick:t.props.onReplyClick}),n)},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.replies.map(this.makeReply.bind(this));return a.createElement("ul",null,e)},t}(a.Component),ae=n("82xK"),oe=(n("lRNp"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=null;!this.props.parentMessage.comment.moreReplies||this.props.isReplayFilterOn&&!this.props.isExpandedLayout||(e=a.createElement(m.fb,{display:m.Da.InlineBlock,className:"vod-message__show-more-replies"},a.createElement(ae.a,{onClick:this.props.onLoadMoreRepliesClick})));var t=null;this.props.showReplyForm&&(t=a.createElement(m.fb,{margin:{top:.5,bottom:1,x:1}},a.createElement(te.a,{isCreationCoolDownActive:this.props.isCreationCoolDownActive||!1,onError:this.props.onError,onReplyFormClose:this.props.onReplyFormClose,onReplySubmit:this.props.onReplySubmit,replyToUserDisplayName:this.props.replyToUserDisplayName,videoOwnerID:this.props.parentMessage.comment.channelId})));var n=null;return this.props.isExpandedLayout&&(n=a.createElement(m.fb,{alignItems:m.i.Center,display:m.Da.Flex},a.createElement(ee.a,{context:"vod-message",onReplyClick:this.props.onReplyClick,replyCommentContext:this.props.parentMessage}),a.createElement(m.Xa,{margin:{left:.5}},a.createElement(m.Ca,{color:m.R.Alt2,fontSize:m.Ia.Size7,type:m.gc.Span}," • "+Object(g.i)(this.props.parentMessage.comment.createdAt))))),a.createElement(m.fb,null,n,a.createElement(m.fb,{margin:{y:.5,left:.5},className:r("vod-message__reply","qa-vod-chat-reply")},e,a.createElement(re,{badgeSets:this.props.badgeSets,currentUser:this.props.currentUser,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,onBanUserClick:this.props.onBanUserClick,onDeleteCommentClick:this.props.onDeleteCommentClick,onDisableSync:this.props.onDisableSync,onReplyClick:this.props.onReplyClick,replies:this.props.parentMessage.replies}),t))},t}(a.Component)),se=(n("ya7N"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showReplyForm:!1,replyToUserDisplayName:""},t.onReplyClickHandler=function(e){t.setState({showReplyForm:!0,replyToUserDisplayName:e},t.props.onDisableSync)},t.onReplyFormCloseHandler=function(){t.setState({showReplyForm:!1,replyToUserDisplayName:""})},t.onReplySubmitHandler=function(e){t.props.onCreateReply(e,t.props.messageContext.comment.id),t.setState({showReplyForm:!1,replyToUserDisplayName:""})},t.onTimestampClickHandler=function(){t.props.onTimeStampClick(t.props.messageContext.comment.contentOffset,t.props.messageContext.comment)},t.onLoadMoreRepliesClickHandler=function(){t.props.onLoadMoreRepliesClick(t.props.messageContext.comment.id,t.props.messageContext.comment.contentId)},t.refHandler=function(e){t.shouldFocusMessage()&&t.props.onFocus(e)},t}return i.__extends(t,e),t.prototype.render=function(){var e,t=null;(this.props.isExpandedLayout||this.props.messageContext.replies.length>0||this.state.showReplyForm)&&(t=a.createElement(oe,{badgeSets:this.props.badgeSets,currentUser:this.props.currentUser,isCreationCoolDownActive:this.props.isCreationCoolDownActive,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,isReplayFilterOn:this.props.isReplayFilterOn,onBanUserClick:this.props.onBanUserClick,onDeleteCommentClick:this.props.onDeleteCommentClick,onDisableSync:this.props.onDisableSync,onError:this.props.onError,onLoadMoreRepliesClick:this.onLoadMoreRepliesClickHandler,onReplyClick:this.onReplyClickHandler,onReplyFormClose:this.onReplyFormCloseHandler,onReplySubmit:this.onReplySubmitHandler,parentMessage:this.props.messageContext,replyToUserDisplayName:this.state.replyToUserDisplayName,showReplyForm:this.state.showReplyForm}));var n=null;this.props.hideTimestamp||(n=a.createElement(m.fb,{className:"vod-message__header","data-test-selector":"message-timestamp",display:m.Da.Flex,flexShrink:0,textAlign:m.cc.Right},a.createElement(x,{offset:this.props.timeStampOffset,onClick:this.onTimestampClickHandler})));var i=r("vod-message",((e={})["vod-message--focused"]=this.shouldFocusMessage(),e)),o=this.props.messageContext.comment.highlight||!1;return a.createElement(m.l,{duration:m.n.Medium,enabled:o,type:m.q.FadeIn},a.createElement(m.fb,{alignItems:m.i.Start,className:i,"data-test-selector":"message-layout",display:m.Da.Flex,flexWrap:m.Ha.NoWrap,fullWidth:!0,padding:{y:.5,left:this.props.hideTimestamp?2:.5},refDelegate:this.refHandler},n,a.createElement(m.fb,{fullWidth:!0},a.createElement(Z,{badgeSets:this.props.badgeSets,context:this.props.messageContext,currentUser:this.props.currentUser,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,onBanUserClick:this.props.onBanUserClick,onDeleteCommentClick:this.props.onDeleteCommentClick,onDisableSync:this.props.onDisableSync,onReplyClick:this.onReplyClickHandler}),t)))},t.prototype.shouldComponentUpdate=function(e,t){return e.focus!==this.props.focus||e.isReplayFilterOn!==this.props.isReplayFilterOn||e.hideTimestamp!==this.props.hideTimestamp||t.showReplyForm!==this.state.showReplyForm||e.messageContext.replies.length!==this.props.messageContext.replies.length||t.replyToUserDisplayName!==this.state.replyToUserDisplayName},t.prototype.shouldFocusMessage=function(){return this.props.focus},t}(a.Component)),le=(n("52dQ"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={firstScroll:!0},t.componentInitiatedScroll=!1,t.mouseDragging=!1,t.preventScrolling=!1,t.allowScrolling=function(){t.preventScrolling=!1},t.atBottom=function(){var e=t.commentListRef.scrollTop,n=t.commentListRef.scrollHeight;return e+t.commentListRef.clientHeight===n},t.bindCommentListRef=function(e){t.commentListRef=e},t.onMouseDown=function(){t.preventScrolling=!1,t.mouseDragging=!0},t.onMouseUp=function(){t.mouseDragging=!1},t.onScroll=function(){t.shouldFireOnScroll()&&(t.componentInitiatedScroll||(t.atBottom()?t.props.onScrollBottom():t.props.onScrollOffBottom()),t.componentInitiatedScroll=!1,t.preventScrolling=!0)},t.syncButtonClick=function(){t.preventScrolling=!1,t.props.onSyncScrollClick()},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onMount()},t.prototype.componentDidUpdate=function(){this.preventScrolling=!0,this.props.isScrollingSynced&&(this.preventScrolling=!1,this.componentInitiatedScroll=!0,this.commentListRef.scrollTop=this.commentListRef.scrollHeight)},t.prototype.render=function(){var e,t=r("video-chat__message-list-wrapper",((e={})["video-chat__message-list-wrapper--unsynced"]=!this.props.isScrollingSynced,e)),n=null;return!1===this.props.isScrollingSynced&&(n=a.createElement(m.Xa,{className:"video-chat__sync-button",padding:{x:1},position:m.tb.Absolute,attachBottom:!0},a.createElement("button",{onClick:this.syncButtonClick},Object(s.d)("Resume auto scroll","MessageScrollArea")))),a.createElement(m.Ob,{fullHeight:!0,overflow:m.mb.Hidden,position:m.tb.Relative},a.createElement("div",{className:t,onKeyDown:this.allowScrolling,onMouseMove:this.allowScrolling,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onScroll:this.onScroll,onWheel:this.allowScrolling,ref:this.bindCommentListRef,tabIndex:-1,"data-test-selector":"video-chat-message-list-wrapper"},this.props.children),n)},t.prototype.shouldFireOnScroll=function(){return!this.mouseDragging&&this.preventScrolling?(this.componentInitiatedScroll=!1,!1):!(this.state.firstScroll&&!this.props.startSynced)||(this.setState({firstScroll:!1}),!1)},t}(a.Component)),ce=n("DpwM"),de=n("l41m"),ue=n("ehEd"),me=function(e,t){return!!e&&(t>=e.offset&&e.offset+e.duration>=t)};n("n+IG");n.d(t,"a",function(){return ge}),function(e){e.MessageInputPlaceholder="message-input-placeholder",e.ChatContentPlaceholder="message-content-placeholder",e.VideoChatError="video-chat-error",e.NoCommentCTA="no-comments-cta"}(L||(L={}));var pe=5e3;var he=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={commentAlreadyFocused:!1},t.badgeSets=new l.c([],[],""),t.createComment=function(e){if(t.props.videoID){var n={contentId:t.props.videoID,contentOffsetSeconds:t.props.currentVideoTime,contentType:ce.e,message:e};t.onCreate(n)}},t.createReply=function(e,n){var i={message:e,parentId:n};t.onCreate(i)},t.onErrorDismissedHandler=function(e){t.props.onError("");var n=t.props.errorMessage===Object(u.a)().chatReplayFilterError;e&&t.props.shouldSendReplayFilterError&&n&&t.props.onErrorDismissClick()},t.onErrorMessageClickHandler=function(){t.props.onError(""),t.props.onTurnOffReplayFilter()},t.onMessageScrollAreaMount=function(){t.props.highlightedMessageID&&""!==t.props.highlightedMessageID&&t.props.onDisableSync()},t.onError=function(e){t.props.onError(e)},t.onLoadMoreRepliesHandler=function(e,n){var i=t.props.data.video,r=i&&i.owner&&i.owner.cheer&&i.owner.cheer.emotes||[];t.props.onLoadMoreReplies(e,t.props.replyCursorMap,n,Object(c.a)(r))},t.focusedCommentCallback=function(e){t.setState({commentToFocus:e})},t.startUnfocusTimeout=function(){t.focusTimer=setTimeout(function(){t.setState({commentAlreadyFocused:!0})},pe)},t}return i.__extends(t,e),t.prototype.componentWillMount=function(){this.props.onWillMount()},t.prototype.componentDidMount=function(){this.props.startInReplayMode&&this.props.onDidMount(this.props.startInReplayMode)},t.prototype.componentWillReceiveProps=function(e){void 0!==e.highlightedMessageID&&this.props.highlightedMessageID!==e.highlightedMessageID&&(this.props.onPlayerSeekRequest(e.highlightTimestamp),this.props.onDisableSync(),this.setState({commentAlreadyFocused:!1})),function(e,t){if(!t.data.loading&&!t.data.error){var n=t.data.video!==e.data.video,i=t.data.badges!==e.data.badges;return n||i}return!1}(this.props,e)&&(this.badgeSets=new l.c([],[],""),!e.data.loading&&!e.data.error&&e.data.video&&e.data.video.owner&&e.data.badges&&(this.badgeSets=new l.c(e.data.badges,e.data.video.owner.broadcastBadges||void 0,e.data.video.owner.login||void 0))),this.props.onUpdateBegan(e,this.props)},t.prototype.componentDidUpdate=function(){(this.props.data.loading||this.props.data.error||!this.props.hasFetchedComments||this.props.latencyTracking.reportInteractive(),this.props.data.loading||this.props.data.error||!this.props.disableChatForVideo||this.props.latencyTracking.reportInteractive(),this.state.commentToFocus)&&((this.state.commentToFocus.nextElementSibling||this.state.commentToFocus).scrollIntoView(!0),this.setState({commentToFocus:void 0}),this.startUnfocusTimeout())},t.prototype.componentWillUnmount=function(){clearTimeout(this.focusTimer),this.props.latencyTracking.reportInteractive(),this.props.onUnmount()},t.prototype.render=function(){var e,t=this,n=this.props,i=n.comments,l=n.highlightedMessageID,c=n.data,d=c.video;if(this.props.disableChatForVideo)e=a.createElement("div",{"data-test-selector":L.ChatContentPlaceholder});else if(!d||c.loading)e=a.createElement(m.hb,{fillContent:!0});else if(c.error)e=a.createElement(m.fb,{alignItems:m.i.Center,"data-test-selector":L.VideoChatError,fullHeight:!0,justifyContent:m.eb.Center},a.createElement(m.Ca,{italic:!0},Object(s.d)("Video Chat is currently unavailable.","VideoChat")));else{var u=void 0;if(this.props.hasFetchedComments&&this.props.offsetRange===de.a)u=a.createElement(m.Xa,{display:m.Da.Flex,margin:{x:1,top:2,bottom:1},alignItems:m.i.Center},a.createElement("li",{"data-test-selector":L.NoCommentCTA},a.createElement(m.Xa,{margin:{right:1}},a.createElement("img",{src:Object(ue.b)(65),srcSet:Object(ue.c)(65)})),Object(s.d)("Join the chat while watching the video!","VideoChatComponent")));else{u=(this.props.messageWindow?i.filter(function(e){return me(t.props.messageWindow,e.comment.contentOffset)}):i).map(function(e,n){var i=!t.state.commentAlreadyFocused&&e.comment.id===l,r=n+1===t.props.comments.length,s=!t.props.isScrollingSynced&&r,u=e.comment.contentOffset;return t.props.messageWindow&&me(t.props.messageWindow,e.comment.contentOffset)&&(u=e.comment.contentOffset-t.props.messageWindow.offset),a.createElement(m.Xa,{padding:s?{bottom:4}:{},key:e.comment.id,fullWidth:!0},a.createElement("li",null,a.createElement(se,{badgeSets:t.badgeSets,currentUser:c.currentUser,focus:i,isCreationCoolDownActive:t.props.isCreationCoolDownActive,isCurrentUserModerator:t.props.isCurrentUserModerator,isExpandedLayout:d.broadcastType===o.p.UPLOAD,isReplayFilterOn:t.props.isReplayFilterOn,messageContext:e,onBanUserClick:t.props.onBanUser,onCreateReply:t.createReply,onDeleteCommentClick:t.props.onDeleteComment,onDisableSync:t.props.onDisableSync,onError:t.onError,onFocus:t.focusedCommentCallback,onLoadMoreRepliesClick:t.onLoadMoreRepliesHandler,onTimeStampClick:t.props.onPlayerSeekRequest,hideTimestamp:t.props.hideTimestamps,timeStampOffset:u})))})}e=a.createElement("ul",{style:{minHeight:0}},u)}var p,g=void 0===this.props.highlightedMessageID,f=null;if(""!==this.props.errorMessage&&(f=a.createElement(h,{message:this.props.errorMessage,onErrorDismissed:this.onErrorDismissedHandler,onMessageClick:this.onErrorMessageClickHandler})),!d||!d.owner||c.loading||c.error||this.props.disableChatForVideo)p=a.createElement(m.sb,{"data-test-selector":L.MessageInputPlaceholder,height:90,width:340});else{var b=this.props.currentVideoTime;this.props.messageWindow&&me(this.props.messageWindow,this.props.currentVideoTime)&&(b=this.props.currentVideoTime-this.props.messageWindow.offset),p=a.createElement(R,{currentUser:c.currentUser,currentVideoTime:b,onError:this.onError,isModerator:!(!d.owner.self||null===d.owner.self.isModerator)&&d.owner.self.isModerator,isReplayMode:this.props.isReplayFilterOn,isScrollingSynced:this.props.isScrollingSynced,isPostCooldownActive:this.props.isCreationCoolDownActive,isUpload:d.broadcastType===o.p.UPLOAD,onCreateComment:this.createComment,onScrollPause:this.props.onDisableSync,onScrollResume:this.props.onEnableSync,videoOwnerID:d.owner.id||"",videoOwnerLogin:d.owner.login||""})}return a.createElement(m.Ob,{className:r("video-chat","qa-vod-chat"),display:m.Da.Flex,borderLeft:!0,color:m.R.Alt,flexDirection:m.Ga.Column,flexShrink:0,flexWrap:m.Ha.NoWrap,fullHeight:!0,fullWidth:!0,position:m.tb.Relative},a.createElement(m.Ob,{alignItems:m.i.Center,background:m.u.Alt,className:"video-chat__header",display:m.Da.Flex,flexShrink:0,justifyContent:m.eb.Center},a.createElement(m.Ca,{type:m.gc.Span},Object(s.d)("Chat on Videos","VideoChatPresentation"))),f,a.createElement(le,{startSynced:g,isScrollingSynced:this.props.isScrollingSynced,onScrollOffBottom:this.props.onDisableSync,onScrollBottom:this.props.onEnableSync,onMount:this.onMessageScrollAreaMount,onSyncScrollClick:this.props.onEnableSync},a.createElement(m.fb,{display:m.Da.Flex,flexDirection:m.Ga.Column,fullHeight:!0,justifyContent:m.eb.End},a.createElement(m.Xa,{display:m.Da.Flex,flexWrap:m.Ha.Wrap,alignItems:m.i.End,fullWidth:!0},e))),a.createElement(m.fb,{className:"video-chat__input",padding:{top:1,bottom:2,x:2},flexShrink:0,fullWidth:!0},p))},t.prototype.onCreate=function(e){this.props.isLoggedIn?this.props.onCreate(e):this.props.onShowLogin()},t}(a.Component),ge=Object(d.withLatencyTracking)("VideoChat")(he)},qKeE:function(e,t,n){},qQpj:function(e,t,n){},qnat:function(e,t,n){"use strict";var i,r,a=n("mrSG"),o=n("q1tI"),s=n("fvjX"),l=n("yR8l"),c=n("eDVu"),d=n("0Log"),u=n("/aPz"),m=n("DMoW"),p=n("TSYQ"),h=n("/7QA"),g=n("8/mp"),f=n("Ue10");n("CK1f");!function(e){e[e.Gold=0]="Gold",e[e.Silver=1]="Silver",e[e.Bronze=2]="Bronze",e[e.Default=3]="Default"}(i||(i={})),function(e){e[e.Big=0]="Big",e[e.Small=1]="Small"}(r||(r={}));var b,v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.renderMedalSVG(this.props.medal,this.props.size),t=p("bits-leaderboard-medal__profile-image",{"bits-leaderboard-medal__profile-image--big":this.props.size===r.Big},{"bits-leaderboard-medal__profile-image--small":this.props.size===r.Small}),n=null;return this.props.profileImageUrl&&(n=o.createElement(f.Xa,{position:f.tb.Absolute},o.createElement("img",{className:t,src:this.props.profileImageUrl}))),o.createElement(f.fb,{className:"bits-leaderboard-medal",display:f.Da.Flex,position:f.tb.Relative},e,n)},t.prototype.renderMedalSVG=function(e,t){var n=t===r.Big?"bits-leaderboard-medal__big":"bits-leaderboard-medal__small",a=null;switch(e){case i.Gold:a=o.createElement(y,null);break;case i.Silver:a=o.createElement(S,null);break;case i.Bronze:a=o.createElement(k,null);break;default:a=o.createElement(C,null)}return o.createElement(f.Xa,{className:n},a)},t}(o.Component),k=function(e){return o.createElement("svg",{className:e.className,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.createElement("defs",null,o.createElement("linearGradient",{x1:"14.834%",y1:"10.25%",x2:"82.068%",y2:"89.469%",id:"bits-leaderboard-bronze-linearGradient-1"},o.createElement("stop",{stopColor:"#DF904C",offset:"0%"}),o.createElement("stop",{stopColor:"#A65611",offset:"100%"})),o.createElement("path",{id:"bits-leaderboard-bronze-path-2",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),o.createElement("linearGradient",{x1:"19.142%",y1:"10.021%",x2:"79.509%",y2:"86.458%",id:"bits-leaderboard-bronze-linearGradient-3"},o.createElement("stop",{offset:"0%"}),o.createElement("stop",{stopColor:"#494949",offset:"9.355%"}),o.createElement("stop",{stopColor:"#BCBCBC",offset:"13.369%"}),o.createElement("stop",{stopColor:"#FFF",offset:"20.419%"}),o.createElement("stop",{stopColor:"#818181",offset:"25.723%"}),o.createElement("stop",{stopColor:"#5D5D5D",offset:"39.965%"}),o.createElement("stop",{stopColor:"#EFEFEF",offset:"45.279%"}),o.createElement("stop",{stopColor:"#7A7A7A",offset:"50.012%"}),o.createElement("stop",{stopColor:"#717171",offset:"57.677%"}),o.createElement("stop",{stopColor:"#B5B5B5",offset:"63.526%"}),o.createElement("stop",{stopColor:"#888",offset:"69.88%"}),o.createElement("stop",{stopColor:"#F1F1F1",offset:"75.215%"}),o.createElement("stop",{stopColor:"#B9B9B9",offset:"79.325%"}),o.createElement("stop",{stopColor:"#545454",offset:"92.875%"}),o.createElement("stop",{offset:"100%"})),o.createElement("linearGradient",{x1:"19.604%",y1:"10.043%",x2:"84.81%",y2:"89.074%",id:"bits-leaderboard-bronze-linearGradient-4"},o.createElement("stop",{stopColor:"#F2C6A5",offset:"0%"}),o.createElement("stop",{stopColor:"#864223",offset:"100%"})),o.createElement("circle",{id:"bits-leaderboard-bronze-path-5",cx:"16",cy:"16",r:"11"})),o.createElement("g",{id:"bits-leaderboard-bronze-Symbols",fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"bits-leaderboard-bronze-Medal-3-bronze-lg"},o.createElement("g",{id:"bits-leaderboard-bronze-Star-Copy-2B"},o.createElement("use",{fill:"#DE9572",xlinkHref:"#bits-leaderboard-bronze-path-2"}),o.createElement("path",{stroke:"url(#bits-leaderboard-bronze-linearGradient-1)",d:"M16 29.53l-2.59 1.988-1.803-2.72-3.095 1.039-.823-3.16-3.264-.021.248-3.256-3.08-1.08 1.29-2.998-2.562-2.023 2.195-2.416-1.768-2.745 2.861-1.573-.78-3.17 3.216-.559.292-3.252L9.56 4.1l1.332-2.98 2.881 1.534L16 .267l2.227 2.387 2.881-1.535L22.44 4.1l3.223-.516.292 3.252 3.216.559-.78 3.17 2.86 1.573-1.767 2.745 2.195 2.416-2.563 2.023 1.292 2.998-3.08 1.08.247 3.256-3.264.021-.823 3.16-3.095-1.04-1.803 2.721L16 29.53z"})),o.createElement("path",{id:"bits-leaderboard-bronze-Star-Copy-3B",fill:"url(#bits-leaderboard-bronze-linearGradient-3)",opacity:".4",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),o.createElement("g",{id:"bits-leaderboard-bronze-Oval-Copy-B"},o.createElement("use",{fill:"#A96643",xlinkHref:"#bits-leaderboard-bronze-path-5"}),o.createElement("circle",{stroke:"url(#bits-leaderboard-bronze-linearGradient-4)",cx:"16",cy:"16",r:"11.5"})))))},C=function(e){return o.createElement("svg",{className:e.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.createElement("defs",null,o.createElement("path",{id:"bits-leaderboard-default-path-1",d:"M10 16.88l-1.31676 1.01089-.91717-1.38367-1.57365.52857-.4182-1.6065-1.66001-.01104.12608-1.65525-1.56648-.54944.65672-1.52462-1.3032-1.0283L3.1435 9.43184l-.8987-1.39573 1.45468-.79978-.39681-1.61193 1.63555-.2841.14808-1.65343 1.63918.26234.67692-1.51576 1.46519.78037L10 2l1.13241 1.21383 1.46519-.78037.67692 1.51576 1.63918-.26234.14808 1.65342 1.63555.28411-.3968 1.61193 1.45467.79978-.8987 1.39573 1.11618 1.22878-1.3032 1.02831.6567 1.52462-1.56647.54944.12608 1.65525-1.66.01104-.41821 1.6065-1.57365-.52857-.91717 1.38367z"})),o.createElement("g",{id:"bits-leaderboard-default-Symbols",fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"bits-leaderboard-default-bitbadge/blank"},o.createElement("g",{id:"bits-leaderboard-default-Star"},o.createElement("use",{fill:"#D7CCEB",xlinkHref:"#bits-leaderboard-default-path-1"}),o.createElement("path",{stroke:"#D7CCEB",d:"M10 17.51035l-1.4374 1.10351-1.0012-1.51044-1.71783.577-.45652-1.7537-1.8121-.01204.13763-1.8069-1.71-.59979.71688-1.6643-1.4226-1.12253L2.5153 9.3798l-.98104-1.52362 1.58796-.87305-.43317-1.75961 1.7854-.31014.16165-1.80492 1.78937.28638.73894-1.65463 1.59943.85187L10 1.26703l1.23616 1.32505 1.59943-.85187.73894 1.65463 1.78937-.28638.16165 1.80492 1.7854.31014-.43317 1.7596 1.58796.87306-.98104 1.52362 1.21844 1.34136-1.4226 1.12252.71688 1.66431-1.71.59978.13763 1.8069-1.8121.01205-.45652 1.7537-1.71782-.577-1.00121 1.51044L10 17.51036z"})),o.createElement("circle",{id:"bits-leaderboard-default-Oval-2",fill:"#EEE9F6",cx:"10",cy:"10",r:"6"}))))},y=function(e){return o.createElement("svg",{className:e.className,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.createElement("defs",null,o.createElement("linearGradient",{x1:"15.783%",y1:"9.653%",x2:"82.407%",y2:"91.627%",id:"bits-leaderboard-gold-linearGradient-1"},o.createElement("stop",{stopColor:"#D8B258",offset:"0%"}),o.createElement("stop",{stopColor:"#A4770E",offset:"100%"})),o.createElement("path",{id:"bits-leaderboard-gold-path-2",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),o.createElement("linearGradient",{x1:"17.025%",y1:"7.356%",x2:"84.092%",y2:"91.769%",id:"bits-leaderboard-gold-linearGradient-3"},o.createElement("stop",{stopColor:"#E5B561",offset:"0%"}),o.createElement("stop",{stopColor:"#EEC05F",offset:"12.638%"}),o.createElement("stop",{stopColor:"#FFECB9",offset:"20.419%"}),o.createElement("stop",{stopColor:"#DCB35E",offset:"30.58%"}),o.createElement("stop",{stopColor:"#E0B55B",offset:"45.279%"}),o.createElement("stop",{stopColor:"#CDA148",offset:"62.771%"}),o.createElement("stop",{stopColor:"#E9CC8F",offset:"76.584%"}),o.createElement("stop",{stopColor:"#ECBE5D",offset:"83.038%"}),o.createElement("stop",{stopColor:"#C09A4C",offset:"100%"})),o.createElement("linearGradient",{x1:"83.2%",y1:"89.733%",x2:"12.813%",y2:"3.179%",id:"bits-leaderboard-gold-linearGradient-4"},o.createElement("stop",{stopColor:"#9A790A",offset:"0%"}),o.createElement("stop",{stopColor:"#FFEFB9",offset:"87.642%"}),o.createElement("stop",{stopColor:"#FFF",offset:"100%"})),o.createElement("circle",{id:"bits-leaderboard-gold-path-5",cx:"16",cy:"16",r:"11"})),o.createElement("g",{id:"bits-leaderboard-gold-Symbols",fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"bits-leaderboard-gold-Medal-1-gold-lg"},o.createElement("g",{id:"bits-leaderboard-gold-Star"},o.createElement("use",{fill:"#D6A94C",xlinkHref:"#bits-leaderboard-gold-path-2"}),o.createElement("path",{stroke:"url(#bits-leaderboard-gold-linearGradient-1)",d:"M16 29.53l-2.59 1.988-1.803-2.72-3.095 1.039-.823-3.16-3.264-.021.248-3.256-3.08-1.08 1.29-2.998-2.562-2.023 2.195-2.416-1.768-2.745 2.861-1.573-.78-3.17 3.216-.559.292-3.252L9.56 4.1l1.332-2.98 2.881 1.534L16 .267l2.227 2.387 2.881-1.535L22.44 4.1l3.223-.516.292 3.252 3.216.559-.78 3.17 2.86 1.573-1.767 2.745 2.195 2.416-2.563 2.023 1.292 2.998-3.08 1.08.247 3.256-3.264.021-.823 3.16-3.095-1.04-1.803 2.721L16 29.53z"})),o.createElement("path",{id:"bits-leaderboard-gold-Star",fill:"url(#bits-leaderboard-gold-linearGradient-3)",d:"M16 28.58l-2.469 2.215-1.615-2.897-3.055 1.294-.587-3.265-3.31.232.505-3.279-3.206-.855 1.543-2.937-2.755-1.85 2.413-2.277-2.005-2.643 3.021-1.371-1.037-3.151 3.302-.316.042-3.317 3.226.774 1.117-3.124 2.8 1.78L16 1l2.07 2.592 2.8-1.78 1.117 3.125 3.226-.774.042 3.317 3.302.316-1.037 3.151 3.021 1.37-2.005 2.644 2.413 2.278-2.755 1.849 1.543 2.937-3.206.855.505 3.28-3.31-.233-.587 3.265-3.055-1.294-1.615 2.897z"}),o.createElement("g",{id:"bits-leaderboard-gold-Oval"},o.createElement("use",{fill:"#BE912A",xlinkHref:"#bits-leaderboard-gold-path-5"}),o.createElement("circle",{stroke:"url(#bits-leaderboard-gold-linearGradient-4)",cx:"16",cy:"16",r:"11.5"})))))},S=function(e){return o.createElement("svg",{className:e.className,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.createElement("defs",null,o.createElement("linearGradient",{x1:"18.738%",y1:"20.297%",x2:"79.716%",y2:"88.714%",id:"bits-leaderboard-silver-linearGradient-1"},o.createElement("stop",{stopColor:"#D0D8DB",offset:"0%"}),o.createElement("stop",{stopColor:"#7E848A",offset:"100%"})),o.createElement("path",{id:"bits-leaderboard-silver-path-2",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),o.createElement("linearGradient",{x1:"19.638%",y1:"10.855%",x2:"81.99%",y2:"89.124%",id:"bits-leaderboard-silver-linearGradient-3"},o.createElement("stop",{stopColor:"#202020",offset:"0%"}),o.createElement("stop",{stopColor:"#BCBCBC",offset:"13.369%"}),o.createElement("stop",{stopColor:"#FFF",offset:"20.779%"}),o.createElement("stop",{stopColor:"#313131",offset:"30.58%"}),o.createElement("stop",{stopColor:"#EFEFEF",offset:"45.279%"}),o.createElement("stop",{stopColor:"#B5B5B5",offset:"61.521%"}),o.createElement("stop",{stopColor:"#FFF",offset:"74.572%"}),o.createElement("stop",{stopColor:"#656565",offset:"87.343%"}),o.createElement("stop",{stopColor:"#C4C4C4",offset:"100%"})),o.createElement("linearGradient",{x1:"0%",y1:"0%",x2:"99.438%",y2:"96.312%",id:"bits-leaderboard-silver-linearGradient-4"},o.createElement("stop",{stopColor:"#FFF",offset:"3.677%"}),o.createElement("stop",{offset:"100%"})),o.createElement("linearGradient",{x1:"8.437%",y1:"13.448%",x2:"86.525%",y2:"83.33%",id:"bits-leaderboard-silver-linearGradient-5"},o.createElement("stop",{stopColor:"#FFF",offset:"0%"}),o.createElement("stop",{stopColor:"#EAEEF2",offset:"9.632%"}),o.createElement("stop",{stopColor:"#686C71",offset:"100%"})),o.createElement("circle",{id:"bits-leaderboard-silver-path-6",cx:"16",cy:"16",r:"11"})),o.createElement("g",{id:"bits-leaderboard-silver-Symbols",fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"bits-leaderboard-silver-Medal-2-silver-lg"},o.createElement("g",{id:"bits-leaderboard-silver-Star-Copy-2"},o.createElement("use",{fill:"#CBC8D0",xlinkHref:"#bits-leaderboard-silver-path-2"}),o.createElement("path",{stroke:"url(#bits-leaderboard-silver-linearGradient-1)",d:"M16 29.53l-2.59 1.988-1.803-2.72-3.095 1.039-.823-3.16-3.264-.021.248-3.256-3.08-1.08 1.29-2.998-2.562-2.023 2.195-2.416-1.768-2.745 2.861-1.573-.78-3.17 3.216-.559.292-3.252L9.56 4.1l1.332-2.98 2.881 1.534L16 .267l2.227 2.387 2.881-1.535L22.44 4.1l3.223-.516.292 3.252 3.216.559-.78 3.17 2.86 1.573-1.767 2.745 2.195 2.416-2.563 2.023 1.292 2.998-3.08 1.08.247 3.256-3.264.021-.823 3.16-3.095-1.04-1.803 2.721L16 29.53z"})),o.createElement("path",{id:"bits-leaderboard-silver-Star-Copy-3",fill:"url(#bits-leaderboard-silver-linearGradient-3)",opacity:".6",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),o.createElement("path",{id:"bits-leaderboard-silver-Star-Copy-4-grad",fill:"url(#bits-leaderboard-silver-linearGradient-4)",opacity:".6",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),o.createElement("g",{id:"bits-leaderboard-silver-Oval-Copy"},o.createElement("use",{fill:"#A3A7AA",xlinkHref:"#bits-leaderboard-silver-path-6"}),o.createElement("circle",{stroke:"url(#bits-leaderboard-silver-linearGradient-5)",cx:"16",cy:"16",r:"11.5"})))))},E=n("3CMh"),N=n("6MRn"),_=n("4h+t"),D=n("8SX2"),w=n("oK83"),O=(n("ky+Y"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){if(this.props.data&&(this.props.data.loading||this.props.data.error))return o.createElement(f.fb,{className:"bits-leaderboard-expanded-leaderboard-entry",display:f.Da.Block,alignItems:f.i.Center},o.createElement(f.fb,{overflow:f.mb.Hidden,display:f.Da.InlineFlex,flexGrow:1,fullWidth:!0,alignItems:f.i.Center},o.createElement(f.fb,{className:"bits-leaderboard-expanded-leaderboard-entry__rank"},o.createElement(f.sb,{width:8,height:2})),o.createElement(f.fb,{className:"bits-leaderboard-expanded-leaderboard-entry__avatar"},o.createElement(f.sb,{height:15})),o.createElement(f.fb,{ellipsis:!0,className:"bits-leaderboard-expanded-leaderboard-entry__username",margin:{x:1}},o.createElement(f.sb,{width:100,height:2})),o.createElement(f.fb,{className:"bits-leaderboard-expanded-leaderboard-entry__score",margin:{left:"auto"}},o.createElement(f.sb,{width:75,height:2}))));var e=this.props.bitsConfig?this.props.bitsConfig:Object(_.a)(),t=null,n="";if(this.props.data&&this.props.data.user&&this.props.data.user.login){n=this.props.data.user.displayName||this.props.data.user.login;var i=o.createElement(f.Ca,{ellipsis:!0},n);this.props.selfId&&this.props.selfId===this.props.id&&(i=o.createElement(f.Ca,{ellipsis:!0,color:f.R.Link,bold:!0},n)),t=o.createElement(f.fb,{ellipsis:!0,className:"bits-leaderboard-expanded-leaderboard-entry__username",margin:{x:1},display:f.Da.InlineBlock},o.createElement(D.a,{contentID:"",login:this.props.data.user.login,sourceType:w.b.bits_leaderboard},i))}var r,a=null;a=this.props.selfId&&this.props.selfId===this.props.value?o.createElement(f.qb,{label:this.props.rank.toString(),type:f.rb.Brand}):o.createElement(f.Ca,{color:f.R.Link,bold:!0},this.props.rank);var s=this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL||h.a.defaultAvatarURL;return r=o.createElement(f.fb,{overflow:f.mb.Hidden,display:f.Da.InlineFlex,flexGrow:1,fullWidth:!0,alignItems:f.i.Center},o.createElement(f.fb,{className:"bits-leaderboard-expanded-leaderboard-entry__rank",padding:{right:.5}},a),o.createElement("img",{src:s,className:"bits-leaderboard-expanded-leaderboard-entry__avatar"}),t,o.createElement(f.fb,{flexShrink:0,className:"bits-leaderboard-expanded-leaderboard-entry__score",margin:{left:"auto"},display:f.Da.InlineBlock},o.createElement(E.a,{animated:!1,showImage:!0,showAmount:!0,prefix:"Cheer",bitsConfig:e,size:E.b.ExtremelySmall,display:f.Da.InlineFlex,amount:this.props.score,formattedNumber:!0,alignItems:f.i.Center}))),o.createElement(f.fb,{className:"bits-leaderboard-expanded-leaderboard-entry",display:f.Da.Block,alignItems:f.i.Center},r)},t}(o.Component)),I=Object(s.compose)(Object(l.a)(N,{name:"data",skip:function(e){return!e.id},options:function(e){return{variables:{userID:e.value,profileImageWidth:50}}}}))(O),T=(n("U80U"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){if(this.props.data&&(this.props.data.loading||this.props.data.error))return o.createElement(f.fb,{display:f.Da.InlineFlex,alignItems:f.i.Center,flexGrow:1});var e=this.props.bitsConfig?this.props.bitsConfig:Object(_.a)(),t=null,n="";if(this.props.data&&this.props.data.user&&this.props.data.user.login){n=this.props.data.user.displayName||this.props.data.user.login;var i=o.createElement(f.Ca,{ellipsis:!0,bold:!0},n);this.props.selfId&&this.props.selfId===this.props.value&&(i=o.createElement(f.Ca,{ellipsis:!0,color:f.R.Link,bold:!0},n)),t=o.createElement(f.fb,{ellipsis:!0,className:"bits-leaderboard-expanded-top-three-entry__username",margin:{x:.5},display:f.Da.InlineBlock},o.createElement(D.a,{contentID:"",login:this.props.data.user.login,sourceType:w.b.bits_leaderboard},i))}var a,s=null;s=this.props.selfId&&this.props.selfId===this.props.value?o.createElement(f.qb,{label:this.props.rank.toString(),type:f.rb.Brand}):o.createElement(f.Ca,{color:f.R.Link,bold:!0},this.props.rank);var l=this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL||h.a.defaultAvatarURL;return a=o.createElement(f.fb,{overflow:f.mb.Hidden,display:f.Da.InlineFlex,flexGrow:1,fullWidth:!0,alignItems:f.i.Center},o.createElement(f.fb,{className:"bits-leaderboard-expanded-top-three-entry__rank"},s),o.createElement(v,{size:r.Big,medal:this.props.medal,profileImageUrl:l}),t,o.createElement(f.fb,{flexShrink:0,className:"bits-leaderboard-expanded-top-three-entry__score",margin:{left:"auto"},display:f.Da.InlineBlock},o.createElement(E.a,{animated:!1,showImage:!0,showAmount:!0,prefix:"Cheer",bitsConfig:e,size:E.b.ExtremelySmall,display:f.Da.InlineFlex,amount:this.props.score,formattedNumber:!0,alignItems:f.i.Center}))),o.createElement(f.fb,{className:"bits-leaderboard-expanded-top-three-entry",display:f.Da.Block},a)},t}(o.Component)),M=Object(s.compose)(Object(l.a)(N,{name:"data",skip:function(e){return!e.id},options:function(e){return{variables:{userID:e.value,profileImageWidth:50}}}}))(T);n("2C+f");!function(e){e.UserPlaceEntry="user-place-entry"}(b||(b={}));var L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderExpandArrow=function(){return o.createElement(f.fb,{position:f.tb.Absolute,attachRight:!0,attachTop:!0,className:"bits-leaderboard-expanded__arrow",display:f.Da.Flex,alignItems:f.i.Stretch},o.createElement(f.C,{size:f.G.Small,fullWidth:!0,type:f.I.Text,onClick:t.props.toggleExpand},o.createElement(f.Cb,{asset:f.Db.AngleUp,height:20,width:20})))},t}return a.__extends(t,e),t.prototype.render=function(){var e=this.shouldRenderBottomContent(),t=this.renderTopThreeEntries(),n=this.renderTopTenEntries(),i=this.renderExpandArrow(),r=this.renderTopSection(),a=null,s=null;e&&((a=this.renderUserPlaceEntry())||(s=this.renderBottomSection()));var l={"bits-leaderboard-expanded__top-three-break":!!this.props.topEdges&&this.props.topEdges.length>3},c={"bits-leaderboard-expanded__top-ten-break":!!this.props.topEdges&&this.props.topEdges.length>0};return o.createElement(f.Ob,{background:f.u.Base,padding:{top:1},position:f.tb.Relative},r,o.createElement(g.b,{className:"bits-leaderboard-expanded__scrollable",suppressScrollX:!0},o.createElement(f.fb,null,o.createElement("ul",null,t,o.createElement(f.fb,{className:p(l)}),n,o.createElement(f.fb,{className:p(c)}),a),s)),i)},t.prototype.renderTopThreeEntries=function(){var e=this.props.topEdges;if(!e)return null;var t=[];return t.push(this.renderTopThreeEntry(e[0],i.Gold)),t.push(this.renderTopThreeEntry(e[1],i.Silver)),t.push(this.renderTopThreeEntry(e[2],i.Bronze)),t},t.prototype.renderTopSection=function(){var e=Object(h.d)("Weekly Top Cheerers","Bits--PinnedCheerV2"),t=this.props.secondsRemaining?this.props.secondsRemaining:0,n=Math.floor(t/86400),i=o.createElement(f.Ca,{type:f.gc.Span},Object(h.d)("{time, plural, one {Resets in {time} day} other {Resets in {time} days}}",{time:n},"Bits--PinnedCheerV2"));return n<1&&(i=o.createElement(f.Ca,{type:f.gc.Span},Object(h.d)("Resets in less than a day","Bits--PinnedCheerV2"))),this.props.leaderboardMode===m.P.ALLTIME?(e=Object(h.d)("All-time Top Cheerers","Bits--PinnedCheerV2"),i=null):this.props.leaderboardMode===m.P.MONTH&&(e=Object(h.d)("Monthly Top Cheerers","Bits--PinnedCheerV2")),o.createElement(f.fb,{display:f.Da.Flex,alignItems:f.i.Center,flexDirection:f.Ga.Column},o.createElement(f.fb,{display:f.Da.Flex},o.createElement(f.Ca,{type:f.gc.H5,bold:!0},e)," ",o.createElement(f.fb,{alignSelf:f.j.Start},o.createElement(f.jc,{label:Object(h.d)("List of users ordered by total amount of Bits used for a given time period. Users with the highest Bits are at the top.","Bits--PinnedCheerV2"),width:150,direction:f.lc.Bottom},o.createElement(f.Cb,{asset:f.Db.NotificationInfo,height:16,width:16})))),i,o.createElement(f.fb,{className:"bits-leaderboard-expanded__section-break",margin:{y:1}}))},t.prototype.renderBottomSection=function(){var e=!!this.props.topEdges&&this.props.topEdges.length>0;return o.createElement(f.fb,{padding:{bottom:1}},o.createElement(f.Ob,{borderTop:e},o.createElement(f.fb,{display:f.Da.Flex,flexDirection:f.Ga.Column,alignItems:f.i.Center,margin:{top:1}},o.createElement(f.Cb,{asset:f.Db.Bits,type:f.Eb.Brand}),o.createElement(f.Ca,{type:f.gc.Span,bold:!0},Object(h.d)("Cheer your way to the top!","Bits--PinnedCheersV2")))))},t.prototype.renderTopThreeEntry=function(e,t){return e&&e.node?o.createElement(f.fb,{key:e.node.id,padding:{x:1,top:.5}},o.createElement(M,{id:e.node.id,value:e.node.entryKey,score:e.node.score,bitsConfig:this.props.bitsConfig,medal:t,selfId:this.props.selfId,rank:e.node.rank})):null},t.prototype.renderTopTenEntries=function(){var e=this;return this.props.topEdges?this.props.topEdges.slice(3,10).reduce(function(t,n){return n&&n.node&&t.push(e.renderTopTenEntry(n.node)),t},[]):null},t.prototype.renderTopTenEntry=function(e){return o.createElement(f.fb,{key:e.id,padding:{x:1,top:.5}},o.createElement(I,{id:e.id,value:e.entryKey,score:e.score,bitsConfig:this.props.bitsConfig,selfId:this.props.selfId,rank:e.rank}))},t.prototype.shouldRenderBottomContent=function(){var e=this;if(!this.props.topEdges)return!1;var t=!0;return this.props.topEdges.forEach(function(n){n&&n.node&&n.node.entryKey===e.props.selfId&&(t=!1)}),t},t.prototype.renderUserPlaceEntry=function(){if(!this.props.userPlaceEdge)return null;var e=this.renderTopTenEntry(this.props.userPlaceEdge);return o.createElement(f.fb,{padding:{top:.5},"data-test-selector":b.UserPlaceEntry},o.createElement(f.Ob,{borderTop:!0},o.createElement(f.fb,{padding:{y:.5}},e)))},t}(o.Component);function R(e){switch(e){case 1:return Object(h.d)("Cheer now to be #1!","Bits--PinnedCheerV2");case 2:return Object(h.d)("Cheer to take #2!","Bits--PinnedCheerV2");case 3:return Object(h.d)("Cheer to take #3!","Bits--PinnedCheerV2");default:return Object(h.d)("...","Bits--PinnedCheerV2")}}n("986b");var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){if(this.props.data&&(this.props.data.loading||this.props.data.error))return o.createElement(f.fb,{className:"bits-leaderboard-header-first-entry",flexShrink:0},o.createElement(f.fb,{className:"bits-leaderboard-header-first-entry__container",overflow:f.mb.Hidden,display:f.Da.InlineFlex,alignItems:f.i.Center,flexGrow:1},o.createElement(f.fb,{className:"bits-leaderboard-medal__profile-image--big"},o.createElement(f.sb,{width:22,height:22})),o.createElement(f.fb,{ellipsis:!0,className:"bits-leaderboard-header-first-entry__text",margin:{left:.5}},o.createElement(f.fb,{ellipsis:!0,className:"bits-leaderboard-header-first-entry__username"},o.createElement(f.sb,{width:50,height:2})),o.createElement(f.fb,{className:"bits-leaderboard-header-first-entry__score",padding:{y:.5}},o.createElement(f.sb,{width:30,height:2})))));var e,t=this.props.bitsConfig?this.props.bitsConfig:Object(_.a)(),n=null,a="";if(this.props.data&&this.props.data.user&&this.props.data.user.login){a=this.props.data.user.displayName||this.props.data.user.login;var s=o.createElement(f.Ca,{ellipsis:!0,bold:!0},a);this.props.selfId&&this.props.selfId===this.props.entryKey&&(s=o.createElement(f.qb,{label:a,type:f.rb.Brand})),n=o.createElement(f.fb,{ellipsis:!0,className:"bits-leaderboard-header-first-entry__username"},o.createElement(D.a,{contentID:"",login:this.props.data.user.login,sourceType:w.b.bits_leaderboard},s))}if(this.props.isEmpty||this.props.data&&!this.props.data.user){var l=R(1);e=o.createElement(f.fb,{className:"bits-leaderboard-header-first-entry__container",overflow:f.mb.Hidden,display:f.Da.InlineFlex,alignItems:f.i.Center,flexGrow:1},o.createElement(f.fb,{flexShrink:0},o.createElement(v,{size:r.Big,medal:i.Default})),o.createElement(f.fb,{className:"bits-leaderboard-header-first-entry__text",margin:{left:.5}},o.createElement(f.Ca,{color:f.R.Link,bold:!0},l)))}else{var c=this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL||h.a.defaultAvatarURL;e=o.createElement(f.fb,{className:"bits-leaderboard-header-first-entry__container",overflow:f.mb.Hidden,display:f.Da.InlineFlex,alignItems:f.i.Center,flexGrow:1},o.createElement(f.fb,{flexShrink:0},o.createElement(v,{size:r.Big,medal:i.Gold,profileImageUrl:c})),o.createElement(f.fb,{className:"bits-leaderboard-header-first-entry__text",margin:{left:.5}},n,o.createElement(f.fb,{className:"bits-leaderboard-header-first-entry__score"},o.createElement(E.a,{animated:!1,showImage:!0,showAmount:!0,prefix:"Cheer",bitsConfig:t,size:E.b.ExtremelySmall,display:f.Da.InlineFlex,amount:this.props.score,formattedNumber:!0,alignItems:f.i.Center}))))}this.props.isEmpty||(e=o.createElement(f.jc,{label:a,direction:f.lc.Bottom},e));var d={"bits-leaderboard-header-first-entry":!0,"bits-leaderboard-header-first-entry__empty":this.props.isEmpty};return o.createElement(f.fb,{className:p(d),flexShrink:0},e)},t}(o.Component),F=Object(s.compose)(Object(l.a)(N,{name:"data",skip:function(e){return!e.id||!e.entryKey},options:function(e){return{variables:{userID:e.entryKey,profileImageWidth:50}}}}))(x),A=(n("ifPV"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){if(this.props.data&&(this.props.data.loading||this.props.data.error))return o.createElement(f.fb,{className:"bits-leaderboard-header-runner-up-entry",display:f.Da.Flex,alignItems:f.i.Center},o.createElement(f.fb,{overflow:f.mb.Hidden,display:f.Da.Flex,alignItems:f.i.Center,flexGrow:0,fullWidth:!0},o.createElement(f.fb,{flexShrink:0},o.createElement(f.fb,{className:"bits-leaderboard-medal__profile-image--small"},o.createElement(f.sb,{width:10,height:10}))),o.createElement(f.fb,{ellipsis:!0,className:"bits-leaderboard-header-runner-up-entry__username",flexShrink:1,margin:{x:.5}},o.createElement(f.sb,{width:80,height:2})),o.createElement(f.fb,{className:"bits-leaderboard-header-runner-up-entry__score",display:f.Da.InlineFlex,margin:{left:"auto",y:.5},flexShrink:0},o.createElement(f.sb,{width:40,height:2}))));var e,t=this.props.bitsConfig?this.props.bitsConfig:Object(_.a)(),n=null,a="";if(this.props.data&&this.props.data.user&&this.props.data.user.login){a=this.props.data.user.displayName||this.props.data.user.login;var s=o.createElement(f.Ca,{ellipsis:!0,bold:!0},a);this.props.selfId&&this.props.selfId===this.props.entryKey&&(s=o.createElement(f.qb,{label:a,type:f.rb.Brand})),n=o.createElement(f.fb,{ellipsis:!0,className:"bits-leaderboard-header-runner-up-entry__username",flexShrink:1,margin:{x:.5}},o.createElement(D.a,{contentID:"",login:this.props.data.user.login,sourceType:w.b.bits_leaderboard},s))}if(this.props.isEmpty||this.props.data&&!this.props.data.user){var l=R(this.props.rank?this.props.rank:0);e=o.createElement(f.fb,{overflow:f.mb.Hidden,display:f.Da.Flex,alignItems:f.i.Center,flexGrow:0,fullWidth:!0},o.createElement(f.fb,{flexShrink:0},o.createElement(v,{size:r.Small,medal:i.Default})),o.createElement(f.fb,{ellipsis:!0,className:"bits-leaderboard-header-runner-up-entry__username",flexShrink:1,margin:{x:.5}},o.createElement(f.Ca,{color:f.R.Link,bold:!0},l)))}else{var c=this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL||h.a.defaultAvatarURL;e=o.createElement(f.fb,{overflow:f.mb.Hidden,display:f.Da.Flex,alignItems:f.i.Center,flexGrow:0,fullWidth:!0},o.createElement(f.fb,{flexShrink:0},o.createElement(v,{size:r.Small,medal:this.props.medal,profileImageUrl:c})),n,o.createElement(f.fb,{flexShrink:0,className:"bits-leaderboard-header-runner-up-entry__score",margin:{left:"auto"}},o.createElement(E.a,{animated:!1,showImage:!0,showAmount:!0,prefix:"Cheer",bitsConfig:t,size:E.b.ExtremelySmall,display:f.Da.InlineFlex,amount:this.props.score,formattedNumber:!0,alignItems:f.i.Center})))}return this.props.isEmpty||(e=o.createElement(f.jc,{label:a,direction:f.lc.Bottom},e)),o.createElement(f.fb,{className:"bits-leaderboard-header-runner-up-entry",display:f.Da.Flex,alignItems:f.i.Center},e)},t}(o.Component)),j=Object(s.compose)(Object(l.a)(N,{name:"data",skip:function(e){return!e.id||!e.entryKey},options:function(e){return{variables:{userID:e.entryKey,profileImageWidth:50}}}}))(A),U=(n("MBj5"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderFirstPlaceEntry=function(){var e,n=null;return t.props.topEdges&&t.props.topEdges[0]&&(n=t.props.topEdges[0]),e=n&&n.node?o.createElement(F,{selfId:t.props.selfId,id:n.node.id,entryKey:n.node.entryKey,score:n.node.score,bitsConfig:t.props.bitsConfig}):o.createElement(F,{isEmpty:!0}),o.createElement(f.Xa,{key:1},e)},t.renderExpandArrow=function(){return o.createElement(f.fb,{className:"pinned-cheer-v2-header--arrow",alignItems:f.i.Stretch,fullHeight:!0,display:f.Da.InlineFlex,attachTop:!0,position:f.tb.Absolute},o.createElement(f.C,{size:f.G.Small,fullWidth:!0,type:f.I.Text,onClick:t.props.toggleExpand},o.createElement(f.Cb,{asset:f.Db.AngleDown,height:20,width:20})))},t}return a.__extends(t,e),t.prototype.render=function(){var e=this.renderFirstPlaceEntry(),t=null,n=null,r=this.renderExpandArrow();if(this.props.topEdges&&this.props.topEdges[0]){t=this.renderRunnerUpEntry(2,i.Silver);var a=this.props.topEdges[1]?3:0;n=this.renderRunnerUpEntry(a,i.Bronze)}return o.createElement(f.Ob,{className:"pinned-cheer-v2-header",background:f.u.Base,position:f.tb.Relative},o.createElement(f.fb,{className:"pinned-cheer-v2-header__users",display:f.Da.InlineFlex,flexWrap:f.Ha.NoWrap,justifyContent:f.eb.Between,fullHeight:!0},e,o.createElement(f.fb,{className:"pinned-cheer-v2-header__runner-up-entries",display:f.Da.Flex,flexShrink:1,flexWrap:f.Ha.NoWrap,justifyContent:f.eb.Between,flexDirection:f.Ga.Column},t,n)),r)},t.prototype.renderRunnerUpEntry=function(e,t){var n,r=null;return e>0&&this.props.topEdges&&this.props.topEdges[e-1]&&(r=this.props.topEdges[e-1]),n=r&&r.node?o.createElement(j,{selfId:this.props.selfId,id:r.node.id,entryKey:r.node.entryKey,score:r.node.score,medal:t,bitsConfig:this.props.bitsConfig}):o.createElement(j,{isEmpty:!0,medal:i.Default,rank:e}),o.createElement(f.Xa,{key:e},n)},t}(o.Component)),B=n("+LJB"),P=n("RiD7"),V=n("Qime"),H=(n("MIhh"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isExpanded:!1},t.toggleIsExpanded=function(){t.setState(function(e){return{isExpanded:!e.isExpanded}},function(){t.state.isExpanded&&t.onExpandClick()})},t.onExpandClick=function(){var e=t.props,n=e.channelID,i=e.userID,r=e.data.user;if(r&&r.cheer&&r.cheer.leaderboard&&r.cheer.settings&&r.cheer.settings.leaderboard&&r.cheer.settings.leaderboard.isEnabled){var a=r.cheer.settings.leaderboard.timePeriodType,o=r.cheer.leaderboard.items.edges&&r.cheer.leaderboard.items.edges.slice(0,10),s=!1;i&&o&&(s=o.findIndex(function(e){return!!e&&!!e.node&&e.node.entryKey===i})>=0),Object(P.l)({leaderboardSize:o?o.length:0,leaderboardMode:a||m.P.ALLTIME,userPresentInLeaderboard:s,userID:i,channelID:n})}},t}return a.__extends(t,e),t.prototype.render=function(){var e;return e=this.renderLeaderboard(),o.createElement(f.fb,{zIndex:f.xc.Default},e)},t.prototype.renderLeaderboard=function(){if(this.props.data.error||!(this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.leaderboard))return null;if(!this.props.data.user.cheer.settings||!this.props.data.user.cheer.settings.leaderboard||!this.props.data.user.cheer.settings.leaderboard.isEnabled)return null;var e=this.props.data.user.cheer.leaderboard.items.edges&&this.props.data.user.cheer.leaderboard.items.edges.slice(0,10),t=null,n=this.props.data.user.cheer.settings.leaderboard.timePeriodType||m.P.ALLTIME;this.props.data.user.self&&this.props.data.user.self.bitsLeaderboardItem&&(t=this.props.data.user.self.bitsLeaderboardItem);var i=null;this.state.isExpanded&&(i=o.createElement(L,{topEdges:e,userPlaceEdge:t,toggleExpand:this.toggleIsExpanded,selfId:this.props.userID,bitsConfig:this.props.bitsConfig,leaderboardMode:n,secondsRemaining:this.props.data.user.cheer.leaderboard.secondsRemaining}));var r=null;return this.state.isExpanded||(r=o.createElement(U,{topEdges:e,toggleExpand:this.toggleIsExpanded,selfId:this.props.userID,bitsConfig:this.props.bitsConfig})),o.createElement(f.fb,{className:"pinned-cheer-v2",zIndex:f.xc.Default},o.createElement(f.Ob,{borderBottom:!0},r,i))},t}(o.Component)),G=Object(s.compose)(Object(l.a)(V,{name:"data",options:function(e){return{variables:{channelID:e.channelID}}}}),Object(c.a)(function(e){return{query:V,variables:{channelID:e.channelID},topic:Object(u.d)(e.channelID),type:d.PubsubMessageType.BitsChannelSettingsEvent,mutator:function(e,t){if(t)return t&&t.user&&null!==t.user.cheer&&null!==t.user.cheer.leaderboard&&null!==t.user.cheer.settings.leaderboard&&void 0!==e.updates.leaderboard_enabled&&(t.user.cheer.settings.leaderboard.isEnabled=e.updates.leaderboard_enabled),t}}}),Object(c.a)(function(e){return Object(B.a)(V,e.channelID,e.data.user&&e.data.user.cheer&&e.data.user.cheer.leaderboard,e.userID)}))(H),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cheerIsTall:!1,recentCheerID:null,recentCheerExpireTime:null,pcheersV2Enabled:!1},t}return a.__extends(t,e),t.prototype.render=function(){return o.createElement(G,{channelID:this.props.channelID,userID:this.props.userID,bitsConfig:this.props.bitsConfig,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin})},t}(o.Component),q=n("/MKj"),z=n("kRBY");var Q=Object(q.connect)(function(e){var t=Object(z.e)(e);return{isStaff:t&&t.roles&&t.roles.isStaff}})(W);n.d(t,!1,function(){return W}),n.d(t,"a",function(){return Q})},qyxT:function(e,t,n){"use strict";function i(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}return e}n.d(t,"a",function(){return i})},"r/lI":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FirstCheerBuilder"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:145}};n.loc.source={body:"query FirstCheerBuilder($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\ncheer {\nid\nsettings {\nemoteMinimumBits\ncheerMinimumBits\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},r2XO:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/MKj"),o=n("fvjX"),s=n("/7QA"),l=n("x7UT"),c=n("0Log"),d=n("/aPz"),u=n("SceP"),m=n("ZtEv"),p=n("fxMP");var h=n("nInp"),g=n("DLhE"),f=n("MJbm"),b=n("8/mp"),v=n("TSYQ"),k=n("oJmH"),C=n("yR8l"),y=n("geRD"),S=n("b5C3"),E=n("XmgI"),N=n("4h+t"),_=n("0Lz3"),D=n("8Ad5"),w=n("uIkQ"),O=n("+pBb"),I=n("ZVTe"),T=n("DMoW"),M=n("kRBY"),L=n("TApp"),R=n("KGti"),x=n("sblI"),F=n("iyGE"),A=n("gO1k");var j=n("a2UF"),U=n("AREq");var B=n("Av0x"),P=n("68Fl"),V=n("Ue10"),H=(n("L6L7"),function(e){var t=e.onBanUser,n=V.Db.Ban,i=Object(s.d)("Ban {login}",{login:e.senderLogin},"ModerationIcons"),a="chat-ban-button",o=null,l=e.renderNewVersion?V.Da.Flex:V.Da.Inline,c=e.renderNewVersion?V.kc.Center:V.kc.Left,d=e.renderNewVersion?V.lc.Bottom:V.lc.Top,u=e.renderNewVersion?V.R.Link:V.R.Alt2,m=e.renderNewVersion?{right:.5}:{right:0};return e.isMessageBanned&&(t=e.onUnbanUser,n=V.Db.FollowCheck,i=Object(s.d)("Unban {login}",{login:e.senderLogin},"ModerationIcons"),a="chat-unban-button"),!e.isMessageDeleted&&e.canDelete&&(o=r.createElement(P.a,{name:"single_message_delete"},r.createElement(V.Ob,{display:V.Da.InlineFlex,margin:m,verticalAlign:V.uc.Bottom},r.createElement(V.jc,{align:c,direction:d,label:Object(s.d)("Delete message","ModerationIcons")},r.createElement("button",{className:"mod-icon",onClick:e.onDelete,"data-test-selector":"chat-delete-button"},r.createElement(V.Cb,{width:16,height:16,type:V.Eb.Inherit,asset:V.Db.Trash})))))),r.createElement(V.Ob,{color:u,display:l,margin:{right:.5}},r.createElement(V.Ob,{display:V.Da.InlineFlex,margin:m,verticalAlign:V.uc.Bottom},r.createElement(V.jc,{align:c,direction:d,label:i},r.createElement("button",{className:"mod-icon",onClick:t,"data-test-selector":a},r.createElement(V.Cb,{width:16,height:16,type:V.Eb.Inherit,asset:n})))),r.createElement(V.Ob,{display:V.Da.InlineFlex,margin:m,verticalAlign:V.uc.Bottom},r.createElement(V.jc,{align:c,direction:d,label:Object(s.d)("Timeout {login}",{login:e.senderLogin},"ModerationIcons")},r.createElement("button",{className:"mod-icon",onClick:e.onTimeoutUser,"data-test-selector":"chat-timeout-button"},r.createElement(V.Cb,{width:16,height:16,type:V.Eb.Inherit,asset:V.Db.Timeout})))),o)}),G=600,W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onBanUser=function(){return i.__awaiter(t,void 0,void 0,function(){var e,t;return i.__generator(this,function(n){switch(n.label){case 0:if(this.props.confirmModerationAction&&!this.props.confirmModerationAction())return[3,4];e=Object(L.a)(Object(s.d)("Unable to ban user.","ModerationIcons")),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.props.banUserMutation(this.props.senderLogin)];case 2:return(t=n.sent().banUserFromChatRoom)?t.error?this.pushMessage(Object(L.a)(Object(U.a)({login:this.props.senderLogin,code:t.error.code}))):this.pushMessage(Object(x.a)(m.e.Ban,this.props.senderLogin,null,null)):this.pushMessage(e),[3,4];case 3:return n.sent(),this.pushMessage(e),[3,4];case 4:return[2]}})})},t.onTimeoutUser=function(){return i.__awaiter(t,void 0,void 0,function(){var e,t,n,r;return i.__generator(this,function(i){switch(i.label){case 0:if(this.props.confirmModerationAction&&!this.props.confirmModerationAction())return[3,4];e=Object(L.a)(Object(s.d)("Unable to timeout user.","ModerationIcons")),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.props.banUserMutation(this.props.senderLogin,G)];case 2:return(t=i.sent().banUserFromChatRoom)?t.error?(n=t.error.minTimeoutDurationSeconds,r=t.error.maxTimeoutDurationSeconds,this.pushMessage(Object(L.a)(Object(U.a)({login:this.props.senderLogin,code:t.error.code,enteredDuration:String(G),isTimeout:!0,minTimeoutDuration:n||void 0,maxTimeoutDuration:r||void 0})))):this.pushMessage(Object(x.a)(m.e.Timeout,this.props.senderLogin,null,G)):this.pushMessage(e),[3,4];case 3:return i.sent(),this.pushMessage(e),[3,4];case 4:return[2]}})})},t.onUnbanUser=function(){return i.__awaiter(t,void 0,void 0,function(){var e,t,n;return i.__generator(this,function(i){switch(i.label){case 0:if(this.props.confirmModerationAction&&!this.props.confirmModerationAction())return[3,4];e=Object(L.a)(Object(s.d)("Unable to unban user.","ModerationIcons")),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.props.unbanUserMutation(this.props.senderLogin)];case 2:return(t=i.sent().unbanUserFromChatRoom)?t.error?this.pushMessage(Object(L.a)(Object(B.a)(this.props.senderLogin,t.error.code))):this.props.sessionUser&&(n=Object(R.m)(c.ModerationActions.Unban,this.props.sessionUser.login,this.props.sessionUser.id,this.props.senderLogin,void 0,void 0),this.pushMessage(n)):this.pushMessage(e),[3,4];case 3:return i.sent(),this.pushMessage(e),[3,4];case 4:return[2]}})})},t.onDelete=function(){return i.__awaiter(t,void 0,void 0,function(){var e,t,n,r,a;return i.__generator(this,function(i){switch(i.label){case 0:if(this.props.confirmModerationAction&&!this.props.confirmModerationAction())return[3,4];if(e=Object(L.a)(Object(s.d)("Unable to delete message.","ModerationIcons")),!this.props.channelID)return this.pushMessage(e),[2];i.label=1;case 1:return i.trys.push([1,3,,4]),t={channelID:this.props.channelID,messageID:this.props.messageID},[4,this.props.deleteChatMessageMutation(Object(y.a)(t))];case 2:return(n=i.sent().data.deleteChatMessage)&&n.responseCode!==T.F.SUCCESS&&(r=n.message&&n.message.sender&&n.message.sender.displayName||this.props.senderLogin,a=Object(L.a)(function(e,t){switch(e){case T.F.FORBIDDEN:return Object(s.d)("You don't have permission to delete messages.","DeleteChatMessageErrorCode");case T.F.TARGET_IS_BROADCASTER:return Object(s.d)("You cannot delete the broadcaster's messages.","DeleteChatMessageErrorCode");case T.F.TARGET_IS_MODERATOR:return Object(s.d)("You cannot delete messages from moderator {senderDisplayName}",{senderDisplayName:t},"DeleteChatMessageErrorCode");case T.F.SUCCESS_STAFF:return Object(s.d)("You deleted a message from staff {senderDisplayName}. Please email support@twitch.tv if a staff member is being abusive.",{senderDisplayName:t},"DeleteChatMessageErrorCode");default:throw new Error("Unrecognized operation result")}}(n.responseCode,r)),this.pushMessage(a)),[3,4];case 3:return i.sent(),this.pushMessage(e),[3,4];case 4:return[2]}})})},t.pushMessage=function(e){t.props.onPushMessage&&t.props.onPushMessage(e)},t}return i.__extends(t,e),t.prototype.render=function(){return this.props.sessionUser&&this.props.sessionUser.id===this.props.targetUserID?null:r.createElement(H,{isMessageDeleted:this.props.isMessageDeleted,isMessageBanned:this.props.isMessageBanned,canDelete:!!this.props.messageID,onBanUser:this.onBanUser,onTimeoutUser:this.onTimeoutUser,onUnbanUser:this.onUnbanUser,onDelete:this.onDelete,senderLogin:this.props.senderLogin,renderNewVersion:this.props.renderNewVersion})},t}(r.Component),q=function(e){return{channelID:e.channelID}};var z=Object(o.compose)(Object(F.a)(q),Object(j.a)(q),function(){var e=this;return Object(C.a)(A,{props:function(t){return{deleteChatMessageMutation:function(n){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:if(!t.mutate)return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.mutate(n)];case 2:return[2,{data:e.sent().data}];case 3:throw e.sent(),new Error("Unable to delete message");case 4:return[3,6];case 5:throw new Error("Delete chat message mutation is not ready");case 6:return[2]}})})}}}})}(),Object(a.connect)(function(e){return{sessionUser:Object(M.e)(e)}}))(W),Q=n("cys1"),Y=n("EE1E"),K=n("fezU"),$=n("oK83"),X=(n("uYvD"),"chat-deleted-message-placeholder"),J="chat-hidden-message-placeholder",Z="chat-hidden-username-placeholder",ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={alwaysShowMessage:!1},t.renderModerationIcons=function(){return t.props.isCurrentUserModerator&&t.props.showModerationIcons?r.createElement(z,{targetUserID:t.props.message.user.userID,confirmModerationAction:t.props.confirmModerationAction,channelID:t.props.channelID,isMessageDeleted:t.props.message.deleted,isMessageBanned:t.props.message.banned,senderLogin:t.props.message.user.userLogin,messageID:t.props.message.id,onPushMessage:t.props.onPushMessage}):null},t.renderMessageBody=function(){if(t.props.isHidden&&!t.state.alwaysShowMessage&&t.props.isCurrentUserModerator){var e=Object(s.d)("message hidden from blocked user","ChatLine");return r.createElement("span",{key:"hidden_message",className:"chat-line__message--hidden","data-a-target":J},r.createElement("a",{href:"",onClick:t.hiddenMessageClickHandler},"<"+e+">"))}if(t.props.isDeleted&&!t.state.alwaysShowMessage){var n=Object(s.d)("message deleted","ChatLine");return t.props.isCurrentUserModerator||t.props.isCurrentUserStaff?r.createElement("span",{key:"deleted",className:"chat-line__message--deleted","data-a-target":X},r.createElement("a",{href:"",onClick:t.alwaysShowMessage},"<"+n+">")):r.createElement("span",{key:"deleted",className:"chat-line__message--deleted","data-a-target":X},"<"+n+">")}var i={chatChannelID:t.props.channelID||"",chatChannelLogin:t.props.channelLogin||"",messageAuthorID:t.props.message.user.userID||"",messageSourceID:t.props.message.id,emoteSourceType:$.a.chat};return Object(Q.f)(t.props.message.messageParts,i)},t.renderMessageAuthor=function(){var e=t.props,n=e.badgeSets,i=e.message,a=e.theme,o=e.useHighContrastColors;return t.props.isHidden&&!t.state.alwaysShowMessage&&t.props.isCurrentUserModerator?r.createElement("span",{key:"hidden_username",className:"chat-line__username--hidden","data-a-target":Z},r.createElement("a",{href:"",onClick:t.hiddenMessageClickHandler},Object(s.d)("User Hidden","ChatLine"))):r.createElement(r.Fragment,null,t.renderModerationIcons(),r.createElement(w.b,{badgeSets:n,badgesToRender:i.badges}),r.createElement("span",{className:"chat-line__username",onClick:t.openViewerCard,onKeyDown:t.openViewerCard,role:"button",tabIndex:0},r.createElement(I.a,{userData:i.user,highContrastUsernameColor:o,theme:a})))},t.alwaysShowMessage=function(e){e&&e.preventDefault(),t.setState({alwaysShowMessage:!0})},t.hiddenMessageClickHandler=function(e){t.alwaysShowMessage(e),t.props.message.user.userID&&t.props.onHiddenMessageClick(t.props.message.user.userID)},t.openViewerCard=function(e){t.isKeyboardEvent(e)&&e.keyCode!==D.a.Space&&e.keyCode!==D.a.Enter||t.props.onUsernameClick(t.props.message.user.userLogin,$.b.chat_message,t.props.message.id,e.currentTarget.getBoundingClientRect().bottom)},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.message,i=e.showTimestamps,a=e.theme,o=e.useHighContrastColors,s={},l=": ";if(n.messageType===m.c.Action){var c=n.user.color;o&&c&&(c="#"+Object(Y.a)(c,a)),s={color:c},l=" "}var d=null;return i&&(d=Object(Q.l)(n.timestamp)),r.createElement("div",{className:v(t,"chat-line__message"),style:s,"data-a-target":"chat-line-message"},d,this.renderMessageAuthor(),r.createElement("span",{key:"separator","aria-hidden":"true"},l),this.renderMessageBody())},t.prototype.isKeyboardEvent=function(e){return void 0!==e.keyCode},t}(r.Component);var te=Object(k.compose)(Object(a.connect)(void 0,function(e){return Object(o.bindActionCreators)({onHiddenMessageClick:O.V},e)}),Object(K.b)(function(e){return{onUsernameClick:e.onShowViewerCard,onEmoteClick:e.onShowEmoteCard}}))(ee),ne=n("p52R"),ie=n("a1OF"),re=n("1VX3"),ae=n("9yes"),oe=n("R2Ti"),se=n("g17B"),le=n("frkH"),ce=n("4zGI"),de=n("tX9j"),ue={badges:{twitchbot:"1"},bits:0,color:"#6441A5",displayName:"AutoMod",id:"automod",userID:"automod",username:"automod",userType:ne.a.GlobalMod,emotes:{}};function me(e){var t;switch(e){case"aggressive":t=Object(s.d)("aggressive","AutoModLine");break;case"sexual":t=Object(s.d)("sexual","AutoModLine");break;case"profanity":t=Object(s.d)("profanity","AutoModLine");break;case"identity":t=Object(s.d)("identity","AutoModLine");break;default:return Object(s.d)("Message is being held for review. Allow will post it to chat.","AutoModLine")}return Object(s.d)("Held a message for reason: {category}. Allow will post it to chat.",{category:t},"AutoModLine")}var pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isResolved:!1},t.getAllowMessageCallback=function(e){return e!==m.a.CheerMessageRejectedPrompt?t.allowAutoModRejectedMessage:t.allowAutoModRejectedCheerMessage},t.getDenyMessageCallback=function(e){return e!==m.a.CheerMessageRejectedPrompt?t.denyAutoModRejectedMessage:t.denyAutoModRejectedCheerMessage},t.allowAutoModRejectedMessage=function(){t.setState({isResolved:!0});var e=t.props.message;e.autoModType===m.a.MessageRejectedPrompt&&t.props.allowRejectedChatMessage&&t.props.allowRejectedChatMessage(Object(y.a)({id:e.rejectedMessage.id}))},t.denyAutoModRejectedMessage=function(){t.setState({isResolved:!0});var e=t.props.message;e.autoModType===m.a.MessageRejectedPrompt&&t.props.denyRejectedChatMessage&&t.props.denyRejectedChatMessage(Object(y.a)({id:e.rejectedMessage.id}))},t.allowAutoModRejectedCheerMessage=function(){t.setState({isResolved:!0});var e=t.props,n=e.message,i=e.allowRejectedCheer;if(n.autoModType===m.a.CheerMessageRejectedPrompt&&i){var r={id:n.rejectedMessage.id,targetUserID:n.targetUserID};i(Object(y.a)(r))}},t.denyAutoModRejectedCheerMessage=function(){t.setState({isResolved:!0});var e=t.props,n=e.message,i=e.denyRejectedCheer;if(n.autoModType===m.a.CheerMessageRejectedPrompt&&i){var r={id:n.rejectedMessage.id,targetUserID:n.targetUserID};i(Object(y.a)(r))}},t}return i.__extends(t,e),t.prototype.render=function(){var e,t=this.props.message,n=i.__assign({},ue);switch(t.autoModType){case m.a.MessageRejectedPrompt:e=me(t.category);break;case m.a.CheerMessageRejectedPrompt:e=me(t.category);var a={emotes:[]};this.props.data&&this.props.data.user&&this.props.data.user.cheer&&(a=this.props.data.user.cheer);var o=Object(E.f)(t.originalMessage,Object(_.a)(a.emotes||[]));t.rejectedMessage=i.__assign({},t.rejectedMessage,{messageParts:o});break;case m.a.MessageRejected:e=Object(s.d)("Hey! Your message is being checked by mods and has not been sent.","AutoModLine");break;case m.a.MessageAllowed:e=Object(s.d)("Mods have allowed your message. Happy chatting!","AutoModLine");var l=(e+=" VoHiYo").match("VoHiYo");l&&void 0!==l.index&&(n.emotes[""+l.index]={startIndex:l.index,id:"81274"});break;case m.a.MessageDenied:e=Object(s.d)("Mods have removed your message.","AutoModLine");break;case m.a.CheerMessageDenied:e=Object(s.d)("Mods have removed your text message. Your Cheermote was sent.","AutoModLine");break;case m.a.CheerMessageTimeout:e=Object(s.d)("Mods did not approve your message in time.  Your Cheermote was sent without the text.","AutoModLine");break;case m.a.MessageModApproved:case m.a.MessageModDenied:return null;default:throw new Error("Invalid message type")}var c=Object(ie.a)(e,n,E.a);switch(t.autoModType){case m.a.MessageRejectedPrompt:case m.a.CheerMessageRejectedPrompt:if(!(t.autoModType!==m.a.CheerMessageRejectedPrompt||this.props.data&&this.props.data.user&&this.props.data.user.cheer))return null;if(t.autoModType===m.a.MessageRejectedPrompt&&(!this.props.extractedMessage||this.props.extractedMessage.loading))return null;if(t.rejectedMessage.deleted)return null;if(this.state.isResolved)return r.createElement(V.fb,{className:"chat-line__status"},Object(s.d)("Thank you for your feedback!","ChatLine"));var d=["chat-line__message--alert","chat-line__message--special","chat-line__message--clearfix"],u=r.createElement(V.sb,{lineCount:2});if(this.props.extractedMessage&&this.props.extractedMessage.message){var p=function(){};u=r.createElement(V.fb,{className:v(d)},r.createElement(re.a,{badgeSets:this.props.badgeSets,bitsConfig:Object(N.a)(),message:this.props.extractedMessage.message,hasModPermissions:!1,showModerationIcons:!1,showTimestamps:!1,currentUserLogin:this.props.channelLogin,sendMessage:p,onUsernameClick:p}))}else this.props.extractedMessage&&!this.props.extractedMessage.error||(u=r.createElement(te,i.__assign({},this.props,{isCurrentUserStaff:!1,isDeleted:!1,isHidden:!1,showTimestamps:!1,className:v(d),message:t.rejectedMessage})));return r.createElement(V.fb,{className:"chat-line__message"},r.createElement(S.a,{badgeSets:this.props.badgeSets,badgesToRender:c.badges}),r.createElement(I.a,{userData:c.user}),r.createElement("span",{key:"separator"},": "),Object(Q.f)(c.messageParts),r.createElement(V.fb,{key:"automod-prompt",className:"chat-line__nested-component--float-right"},r.createElement(V.C,{size:V.G.Small,onClick:this.getAllowMessageCallback(t.autoModType),type:V.I.Text},Object(s.d)("Allow","AutoModLine")),r.createElement(V.Ca,{type:V.gc.Span},"•"),r.createElement(V.C,{size:V.G.Small,onClick:this.getDenyMessageCallback(t.autoModType),type:V.I.Text},Object(s.d)("Deny","AutoModLine"))),u);case m.a.MessageRejected:case m.a.MessageAllowed:case m.a.MessageDenied:case m.a.CheerMessageDenied:case m.a.CheerMessageTimeout:return r.createElement(V.fb,{className:v(["chat-line__message","chat-line__message--special","chat-line__message--alert"])},r.createElement(S.a,{badgeSets:this.props.badgeSets,badgesToRender:c.badges}),r.createElement(I.a,{userData:c.user}),r.createElement("span",{key:"separator"},": "),Object(Q.f)(c.messageParts));default:throw new Error("Invalid message type")}},t}(r.Component),he=Object(k.compose)(Object(C.a)(ae,{name:"allowRejectedChatMessage",options:{}}),Object(C.a)(le,{name:"denyRejectedChatMessage",options:{}}),Object(C.a)(oe,{name:"allowRejectedCheer"}),Object(C.a)(ce,{name:"denyRejectedCheer"}),Object(C.a)(se,{name:"data",options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(C.a)(de,{options:function(e){return{variables:{msgID:e.message.rejectedMessage.id,channelID:e.channelID}}},props:function(e){return{extractedMessage:{message:e.data&&e.data.rejectedChatMessage&&e.data.rejectedChatMessage.message||null,loading:!(!e.data||!e.data.loading),error:!(!e.data||!e.data.error)}}},skip:function(e){return!e.channelID||e.message.autoModType!==m.a.MessageRejectedPrompt}}))(pe),ge=n("QVaV"),fe=n("8SX2"),be=function(e){var t=e.event,n=t.promoGiftTotal,i=t.promoName,a=t.user,o=r.createElement(fe.a,{contentID:a.id,login:a.username,sourceType:$.b.chat_message},Object(ge.a)(a.username,a.displayName)),l=i&&n?Object(s.d)("{recipientButton} is continuing the Gift Sub they got from an anonymous gifter!        They're one of {promoGiftTotal} gift subs to continue this {promoName}.",{promoGiftTotal:n,promoName:i,recipientButton:o},"AnonGiftPaidUpgradeNoticeLine"):Object(s.d)("{recipientButton} is continuing the Gift Sub they got from an anonymous gifter!",{recipientButton:o},"AnonGiftPaidUpgradeNoticeLine");return r.createElement(V.fb,{alignItems:V.i.Start,display:V.Da.Flex},r.createElement(V.Ob,{color:V.R.Alt2,display:V.Da.Flex,flexDirection:V.Ga.Column,flexShrink:0,margin:{right:.5}},r.createElement(V.Cb,{asset:V.Db.Ghost})),r.createElement(V.Ca,{color:V.R.Alt2,type:V.gc.Span},l))};be.displayName="AnonGiftPaidUpgradeNoticeLine";var ve=n("4+Ji"),ke=n("0WFu"),Ce=function(e){var t=e.event,n=r.createElement(fe.a,{contentID:t.recipientID,login:t.recipientLogin,sourceType:$.b.chat_message},Object(ge.a)(t.recipientLogin,t.recipientDisplayName));return r.createElement(V.fb,{alignItems:V.i.Start,display:V.Da.Flex},r.createElement(V.Ob,{color:V.R.Alt2,display:V.Da.Flex,flexDirection:V.Ga.Column,flexShrink:0,margin:{right:.5}},r.createElement(V.Cb,{asset:V.Db.Ghost})),r.createElement(V.Ca,{color:V.R.Alt2,type:V.gc.Span},function(e,t,n){return Object(ve.c)(n)?Object(s.d)("An anonymous gifter gave {recipientButton} a 2019 All-Access Pass!",{recipientButton:t},"AnonSubGiftNoticeLine"):"custom"===e.plan?Object(s.d)("An anonymous gifter gave {recipientButton} a Sub!",{recipientButton:t},"AnonSubGiftNoticeLine"):Object(s.d)("An anonymous gifter gave {recipientButton} a Tier {tierNumber} Sub!",{recipientButton:t,tierNumber:Object(ke.b)(e.plan)||1},"AnonSubGiftNoticeLine")}(t.methods,n,t.channel)))};Ce.displayName="AnonSubGiftNoticeLine";var ye=function(e){var t=e.event,n=t.channel,i=t.massGiftCount,a=t.plan,o=Object(ve.c)(n)?Object(s.d)("{massGiftCount, plural,        one {An anonymous gifter is gifting {massGiftCount} 2019 All-Access Pass to {channel}'s community!}        other {An anonymous gifter is gifting {massGiftCount} 2019 All-Access Passes to {channel}'s community!}}",{channel:n,massGiftCount:i},"AnonSubMysteryGiftNoticeLine"):"custom"===a?Object(s.d)("{massGiftCount, plural,        one {An anonymous gifter is gifting {massGiftCount} Sub to {channel}'s community!}        other {An anonymous gifter is gifting {massGiftCount} Subs to {channel}'s community!}}",{channel:n,massGiftCount:i},"AnonSubMysteryGiftNoticeLine"):Object(s.d)("{massGiftCount, plural,        one {An anonymous gifter is gifting {massGiftCount} Tier {tierNumber} Sub to {channel}'s community!}        other {An anonymous gifter is gifting {massGiftCount} Tier {tierNumber} Subs to {channel}'s community!}}",{channel:n,massGiftCount:i,tierNumber:Object(ke.b)(a)||1},"AnonSubMysteryGiftNoticeLine");return r.createElement(V.fb,{alignItems:V.i.Start,display:V.Da.Flex},r.createElement(V.Ob,{color:V.R.Alt2,display:V.Da.Flex,flexDirection:V.Ga.Column,flexShrink:0,margin:{right:.5}},r.createElement(V.Cb,{asset:V.Db.Ghost})),r.createElement(V.Ca,{color:V.R.Alt2,type:V.gc.Span},o))};ye.displayName="AnonSubMysteryGiftNoticeLine";var Se=function(e){return r.createElement(V.fb,{display:V.Da.Flex},r.createElement(V.Cb,{height:20,width:20,asset:V.Db.Bits,type:V.Eb.Alt2}),r.createElement(V.Ob,{color:V.R.Alt2,padding:{left:.5},display:V.Da.Inline},Object(s.d)("{userLogin} just earned a new <x:bold>{boldedBadgeText}</x:bold>",{userLogin:r.createElement(fe.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:$.b.chat_message},Object(ge.a)(e.event.user.userID,e.event.user.displayName)),boldedBadgeText:Object(s.d)("{threshold} Bits badge!",{threshold:Object(s.f)(e.event.threshold)},"BitsBadgeTierNotification"),"x:bold":function(e){return r.createElement(V.Ca,{color:V.R.Base,bold:!0,type:V.gc.Span},e)}},"BitsBadgeTierNotification")))};Se.displayName="BitsBadgeTierNoticeLine";var Ee=function(e){return r.createElement(V.Ob,{color:V.R.Alt2,display:V.Da.Inline},Object(s.d)("{userLogin} just made their first cheer!",{userLogin:r.createElement(fe.a,{contentID:e.event.message.id,login:e.event.message.user.userLogin,sourceType:$.b.chat_message},Object(ge.a)(e.event.message.user.userLogin,e.event.message.user.userDisplayName))},"FirstCheerNoticeLine"))};Ee.displayName="FirstCheerNoticeLine";var Ne=function(e){var t=e.event,n=r.createElement(fe.a,{contentID:t.user.id,login:t.user.username,sourceType:$.b.chat_message},Object(ge.a)(t.user.username,t.user.displayName)),i=r.createElement(fe.a,{contentID:t.user.id,login:t.senderLogin,sourceType:$.b.chat_message},Object(ge.a)(t.senderLogin,t.senderName));return r.createElement(V.Ca,{color:V.R.Alt2,type:V.gc.Span},t.promoName&&t.promoGiftTotal?Object(s.d)("{recipientButton} is continuing the Gift Sub they got from {gifterButton}!            They're one of {promoGiftTotal} gift subs to continue this {promoName}.",{gifterButton:i,promoGiftTotal:t.promoGiftTotal,promoName:t.promoName,recipientButton:n},"GiftPaidUpgradeNoticeLine"):Object(s.d)("{recipientButton} is continuing the Gift Sub they got from {gifterButton}!",{gifterButton:i,recipientButton:n},"GiftPaidUpgradeNoticeLine"))};Ne.displayName="GiftPaidUpgradeNoticeLine";n("xDdc");var _e=function(e){return r.createElement(V.fb,{className:"user-notice-line",margin:{y:.5},padding:{right:2,y:.5}},e.children)};_e.displayName="UserNoticeLine";var De=n("OvAg"),we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.message.params,t=this.props.data,n=t.channel,i=t.loading,a=t.error;if(i||a||!n||!n.displayName)return null;var o=Object(s.d)("{displayName} is raiding with a party of {viewerCount}.",{displayName:r.createElement("strong",null,n.displayName),viewerCount:r.createElement("strong",null,e.viewerCount)},"RaidIncomingMessage");return r.createElement(_e,{"data-test-selector":"incoming-raid"},r.createElement(V.fb,{display:V.Da.Flex,alignItems:V.i.Center},r.createElement(V.t,{alt:n.displayName,src:n.profileImageURL,size:30}),r.createElement(V.Ob,{color:V.R.Base,margin:{left:1}},o)))},t}(r.Component),Oe=Object(C.a)(De,{options:function(e){return{variables:{channelLogin:e.message.params.login}}}})(we),Ie=n("5zf8"),Te=n("x0+1"),Me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.moderationActionEvent,t=e.createdByLogin,n=null;if(e.moderationActionType===m.d.AutoModEnabled)n=Object(s.d)("AutoMod has been enabled for this channel.","ModerationActionLine");else if(e.level===R.a.Channel)switch(e.moderationActionType){case m.d.Clear:n=Object(s.d)("{user} cleared chat for this room.",{user:t},"ModerationActionLine");break;case m.d.EmoteOnly:n=Object(s.d)("{user} enabled emote-only mode for this room.",{user:t},"ModerationActionLine");break;case m.d.EmoteOnlyOff:n=Object(s.d)("{user} disabled emote-only for this room.",{user:t},"ModerationActionLine");break;case m.d.FollowersOnly:var i=(e.args||[""]).join(" ").trim(),a=parseInt(i,10);n=a?Object(s.d)("{user} enabled {length} followers-only mode for this room.",{user:t,length:Object(Ie.b)(60*a)},"ModerationActionLine"):Object(s.d)("{user} enabled followers-only mode for this room.",{user:t},"ModerationActionLine");break;case m.d.FollowersOnlyOff:n=Object(s.d)("{user} disabled followers-only mode for this room.",{user:t},"ModerationActionLine");break;case m.d.R9kBeta:n=Object(s.d)("{user} enabled r9k mode for this room.",{user:t},"ModerationActionLine");break;case m.d.R9kBetaOff:n=Object(s.d)("{user} disabled r9k mode for this room.",{user:t},"ModerationActionLine");break;case m.d.Slow:var o=(e.args||["120"]).join(" ").trim(),l=parseInt(o,10);n=Object(s.d)("{user} enabled {slowTime}-second slow mode for this room.",{user:t,slowTime:l},"ModerationActionLine");break;case m.d.SlowOff:n=Object(s.d)("{user} disabled slow mode for this room.",{user:t},"ModerationActionLine");break;case m.d.SubscribersOnly:n=Object(s.d)("{user} enabled subscribers-only mode for this room.",{user:t},"ModerationActionLine");break;case m.d.SubscribersOnlyOff:n=Object(s.d)("{user} disabled subscribers-only mode for this room.",{user:t},"ModerationActionLine");break;default:var c=e.args&&e.args.join(" ").trim(),d=c&&c.length>0?"/"+e.moderationActionType+" "+c:""+e.moderationActionType;n=Object(s.d)("{user} used: {command}.",{user:e.createdByLogin,command:d},"ModerationActionLine")}else{var u=e.targetUserLogin,p=e.duration,h=e.reason,g=e.messageBody;switch(e.moderationActionType){case m.d.Timeout:n=p&&h?Object(s.d)("{user} timed out {target} for {duration} seconds. Reason: {reason}.",{user:t,target:u,duration:p,reason:h},"ModerationActionLine"):p?Object(s.d)("{user} timed out {target} for {duration} seconds.",{user:t,target:u,duration:p},"ModerationActionLine"):Object(s.d)("{user} timed out {target}.",{user:t,target:u},"ModerationActionLine");break;case m.d.Ban:n=h?Object(s.d)("{user} banned {target}. Reason: {reason}.",{user:t,target:u,reason:h},"ModerationActionLine"):Object(s.d)("{user} banned {target}.",{user:t,target:u},"ModerationActionLine");break;case m.d.Untimeout:n=Object(s.d)("{user} removed time out on {target}.",{user:t,target:u},"ModerationActionLine");break;case m.d.Unban:n=Object(s.d)("{user} removed ban on {target}.",{user:t,target:u},"ModerationActionLine");break;case m.d.Mod:n=Object(s.d)("{user} granted moderator privileges to {target}.",{user:t,target:u},"ModerationActionLine");break;case m.d.Unmod:n=Object(s.d)("{user} removed moderator privileges for {target}.",{user:t,target:u},"ModerationActionLine");break;case m.d.Delete:var f=g||"";n=r.createElement(Te.a,{targetLogin:u,moderatorLogin:t,messageBody:f});break;default:return null}}return n?r.createElement(V.fb,{className:"chat-line__status"},r.createElement(V.Ca,{type:V.gc.Span},n)):null},t}(r.Component);function Le(){return{raid_error_self:Object(s.d)("You cannot raid your own channel.","RaidErrorSelfMessage"),raid_error_forbidden:Object(s.d)("You cannot raid this channel.","RaidErrorAlreadyRaidingMessage"),raid_error_already_raiding:Object(s.d)("You already have a raid in progress.","RaidErrorForbiddenMessage"),raid_error_too_many_viewers_to_raid:Object(s.d)("Sorry, raids can only support up to 20,000 viewers right now.","RaidErrorTooManyViewersMessage"),raid_error_unexpected:Object(s.d)("There was a problem starting the raid. Please try again in a minute.","RaidErrorUnexpectedMessage"),unraid_error_unexpected:Object(s.d)("There was a problem stopping the raid. Please try again in a minute.","UnraidErrorUnexpectedMessage"),unraid_error_no_active_raid:Object(s.d)("You do not have an active raid.","UnraidErrorNoActiveRaidMessage"),raid_notice_restricted_chat:Object(s.d)("This channel has follower or subscriber only chat.","RaidNoticeRestrictedChatMessage"),raid_notice_mature:Object(s.d)("This channel is intended for mature audiences.","RaidNoticeMatureMessage"),raid_notice_owner:Object(s.d)("This channel has started a raid, type {unraidCommand} if you want to cancel.",{unraidCommand:"/unraid"},"RaidNoticeOwnerMessage")}}var Re=function(e){return r.createElement("span",null,Le()[e.message.msgid])};Re.displayName="RaidNoticeLine";var xe=n("+GjP"),Fe=function(e){var t=r.createElement(fe.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:$.b.chat_message},Object(ge.a)(e.event.user.username,e.event.user.displayName)),n=null;return n=e.event.methods.prime?Object(s.d)("{userLogin} just subscribed with {service}!",{userLogin:t,service:function(e){var t=Object(xe.e)("https://twitch.amazon.com/prime",{ref:"subscriptionMessage",channel:e});return r.createElement("a",{className:"chat-line__message--link",href:t,target:"_blank",rel:"noopener noreferrer"},Object(s.d)("Twitch Prime","SubNoticeLine"))}(e.event.channel)},"SubNoticeLine"):Object(s.d)("{userLogin} just subscribed with a Tier {tierNumber} Sub!",{userLogin:t,tierNumber:Object(ke.b)(e.event.methods.plan)||1},"SubNoticeLine"),r.createElement(V.Ca,{color:V.R.Alt2,type:V.gc.Span},n)};Fe.displayName="SubNoticeLine";var Ae=function(e){return r.createElement(V.Ob,{color:V.R.Alt2,display:V.Da.Inline},r.createElement(Fe,{event:e.event}),r.createElement("span",null," "),Object(s.d)("{userLogin} subscribed for {months} months in a row!",{userLogin:r.createElement(fe.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:$.b.chat_message},Object(ge.a)(e.event.user.username,e.event.user.displayName)),months:e.event.months},"ResubNoticeLine"))};Ae.displayName="ResubNoticeLine";var je=n("3Bft"),Ue=function(e){var t=e.channel,n=e.reference,i=e.text,a=Object(xe.e)("https://twitch.amazon.com/prime",{reference:n,channel:t});return r.createElement(V.Aa,{className:"chat-line__message--link",linkTo:a,targetBlank:!0,rel:"noopener"},i)},Be=function(e){var t=r.createElement(V.Ob,{display:V.Da.Block},r.createElement(fe.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:$.b.chat_message},r.createElement(V.Ca,{color:V.R.Link},Object(ge.a)(e.event.user.username,e.event.user.displayName)))),n=null;return n=e.event.methods.prime?e.event.cumulativeMonths<2?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> with <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link>",{userLogin:t,"x:strong":function(e){return r.createElement(V.Ca,{bold:!0,type:V.gc.Span},e)},"x:twitch-prime-link":function(t){return Pe(e.event.channel,"resubscription",t)}},"ResubNoticeV2Line"):e.event.shouldShareStreakTenure&&void 0!==e.event.streakMonths&&e.event.streakMonths>0?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> with <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link>. They've subscribed for <x:strong>{cumulative} months</x:strong>, currently on a {streak} month streak!",{cumulative:e.event.cumulativeMonths,streak:e.event.streakMonths||0,userLogin:t,"x:strong":function(e){return r.createElement(V.Ca,{bold:!0,type:V.gc.Span},e)},"x:twitch-prime-link":function(t){return Pe(e.event.channel,"resubscription",t)}},"ResubNoticeV2Line"):Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> with <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link>. They've subscribed for <x:strong>{cumulative} months</x:strong>!",{cumulative:e.event.cumulativeMonths,userLogin:t,"x:strong":function(e){return r.createElement(V.Ca,{bold:!0,type:V.gc.Span},e)},"x:twitch-prime-link":function(t){return Pe(e.event.channel,"resubscription",t)}},"ResubNoticeV2Line"):e.event.methods.plan!==je.a.Custom?e.event.cumulativeMonths<2?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> at Tier {tierNumber}.",{tierNumber:Object(ke.b)(e.event.methods.plan)||1,userLogin:t,"x:strong":function(e){return r.createElement(V.Ca,{bold:!0,type:V.gc.Span},e)}},"ResubNoticeV2Line"):e.event.shouldShareStreakTenure&&void 0!==e.event.streakMonths&&e.event.streakMonths>0?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> at Tier {tierNumber}. They've subscribed for <x:strong>{cumulative} months</x:strong>, currently on a {streak} month streak!",{cumulative:e.event.cumulativeMonths,streak:e.event.streakMonths||0,tierNumber:Object(ke.b)(e.event.methods.plan)||1,userLogin:t,"x:strong":function(e){return r.createElement(V.Ca,{bold:!0,type:V.gc.Span},e)}},"ResubNoticeV2Line"):Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> at Tier {tierNumber}. They've subscribed for <x:strong>{cumulative} months</x:strong>!",{cumulative:e.event.cumulativeMonths,tierNumber:Object(ke.b)(e.event.methods.plan)||1,userLogin:t,"x:strong":function(e){return r.createElement(V.Ca,{bold:!0,type:V.gc.Span},e)}},"ResubNoticeV2Line"):e.event.cumulativeMonths<2?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong>.",{userLogin:t,"x:strong":function(e){return r.createElement(V.Ca,{bold:!0,type:V.gc.Span},e)}},"ResubNoticeV2Line"):e.event.shouldShareStreakTenure&&void 0!==e.event.streakMonths&&e.event.streakMonths>0?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> for <x:strong>{cumulative} months</x:strong>, currently on a {streak} month streak!",{cumulative:e.event.cumulativeMonths,streak:e.event.streakMonths||0,userLogin:t,"x:strong":function(e){return r.createElement(V.Ca,{bold:!0,type:V.gc.Span},e)}},"ResubNoticeV2Line"):Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> for <x:strong>{cumulative} months</x:strong>!",{cumulative:e.event.cumulativeMonths,userLogin:t,"x:strong":function(e){return r.createElement(V.Ca,{bold:!0,type:V.gc.Span},e)}},"ResubNoticeV2Line"),r.createElement(V.fb,{display:V.Da.Flex},r.createElement(V.Ob,{color:V.R.Alt2},r.createElement(V.Cb,{asset:e.event.methods.prime?V.Db.Crown:V.Db.Star})),r.createElement(V.Xa,{margin:{left:.5}},r.createElement(V.Ca,null,n)))},Pe=function(e,t,n){return r.createElement(Ue,{channel:e,reference:t,text:n})};Be.displayName="ResubNoticeV2Line";var Ve=n("yZCp"),He=function(e){var t=e.event.message,n=t.user.isIntl?t.user.userDisplayName+" ("+t.user.userLogin+")":t.user.userDisplayName,i=Object(s.d)("{user} is new here. Say hello!",{user:r.createElement(fe.a,{contentID:t.id,login:t.user.userLogin,sourceType:$.b.chat_message},"@",n)},"NewChatterRitual");return r.createElement(V.Ob,{color:V.R.Alt2},i)};He.displayName="RitualNoticeLine";var Ge=function(e){var t=e.event,n=r.createElement(fe.a,{contentID:t.user.id,login:t.user.username,sourceType:$.b.chat_message},Object(ge.a)(t.user.username,t.user.displayName)),i=r.createElement(fe.a,{contentID:t.user.id,login:t.recipientLogin,sourceType:$.b.chat_message},Object(ge.a)(t.recipientLogin,t.recipientDisplayName)),a=null;return a=Object(ve.c)(t.channel)?function(e,t){return Object(s.d)("{gifterButton} just gifted a 2019 All-Access Pass to {recipientButton}!",{gifterButton:e,recipientButton:t},"SubGiftNoticeLine")}(n,i):"custom"===t.methods.plan?function(e,t,n){return 1===n?Object(s.d)("{gifterButton} gifted a Sub to {recipientButton}! It's their first time gifting a Sub in the channel!",{gifterButton:e,recipientButton:t},"SubGiftNoticeLine"):n>1?Object(s.d)("{gifterButton} gifted a Sub to {recipientButton}! They've gifted {senderCount} Subs in the channel!",{gifterButton:e,recipientButton:t,senderCount:n},"SubGiftNoticeLine"):Object(s.d)("{gifterButton} gifted a subscription to {recipientButton}!",{gifterButton:e,recipientButton:t},"SubGiftNoticeLine")}(n,i,t.senderCount):function(e,t,n,i){return 1===n?Object(s.d)("{gifterButton} gifted a Tier {tierNumber} Sub to {recipientButton}! It's their first Gift Sub in the channel!",{gifterButton:e,recipientButton:t,tierNumber:i},"SubGiftNoticeLine"):n>1?Object(s.d)("{gifterButton} gifted a Tier {tierNumber} Sub to {recipientButton}! They've given {senderCount} Gift Subs in the channel!",{gifterButton:e,recipientButton:t,senderCount:n,tierNumber:i},"SubGiftNoticeLine"):Object(s.d)("{gifterButton} gifted a Tier {tierNumber} Sub to {recipientButton}!",{gifterButton:e,recipientButton:t,tierNumber:i},"SubGiftNoticeLine")}(n,i,t.senderCount,Object(ke.b)(t.methods.plan)||1),r.createElement(V.Ca,{color:V.R.Alt2,type:V.gc.Span},a)};Ge.displayName="SubGiftNoticeLine";var We=function(e){var t=e.event,n=r.createElement(fe.a,{contentID:t.user.id,login:t.user.username,sourceType:$.b.chat_message},Object(ge.a)(t.user.username,t.user.displayName)),i=null;return i=Object(ve.c)(t.channel)?function(e,t,n){return Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} 2019 All-Access Pass to {channel}'s community!} other {{gifterButton} is gifting {massGiftCount} 2019 All-Access Passes to {channel}'s community!}}",{channel:t,gifterButton:e,massGiftCount:n},"SubMysteryGiftNoticeLine")}(n,t.channel,t.massGiftCount):"custom"===t.plan?function(e,t,n,i){return 1===i?Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Sub to {channel}'s community. It's their first Gift Sub in the channel!} other {{gifterButton} is gifting {massGiftCount} Subs to {channel}'s community. It's their first Gift Sub in the channel!}}",{channel:t,gifterButton:e,massGiftCount:n},"SubMysteryGiftNoticeLine"):i>1?Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Sub to {channel}'s community. They've gifted a total of {senderCount} in the channel!} other {{gifterButton} is gifting {massGiftCount} Subs to {channel}'s community. They've gifted a total of {senderCount} in the channel!}}",{channel:t,gifterButton:e,massGiftCount:n,senderCount:i},"SubMysteryGiftNoticeLine"):Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Sub to {channel}'s community!} other {{gifterButton} is gifting {massGiftCount} Subs to {channel}'s community!}}",{channel:t,gifterButton:e,massGiftCount:n},"SubMysteryGiftNoticeLine")}(n,t.channel,t.massGiftCount,t.senderCount):function(e,t,n,i,r){return 1===i?Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Sub to {channel}'s community. It's their first Gift Sub in the channel!} other {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Subs to {channel}'s community. It's their first Gift Sub in the channel!}}",{channel:t,gifterButton:e,massGiftCount:n,tierNumber:r},"SubMysteryGiftNoticeLine"):i>1?Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Sub to {channel}'s community. They've gifted a total of {senderCount} in the channel!} other {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Subs to {channel}'s community. They've gifted a total of {senderCount} in the channel!}}",{channel:t,gifterButton:e,massGiftCount:n,senderCount:i,tierNumber:r},"SubMysteryGiftNoticeLine"):Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Sub to {channel}'s community!} other {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Subs to {channel}'s community!}}",{channel:t,gifterButton:e,massGiftCount:n,tierNumber:r},"SubMysteryGiftNoticeLine")}(n,t.channel,t.massGiftCount,t.senderCount,Object(ke.b)(t.plan)||1),r.createElement(V.Ca,{color:V.R.Alt2,type:V.gc.Span},i)};We.displayName="SubMysteryGiftNoticeLine";var qe=function(e){var t=r.createElement(V.Ob,{display:V.Da.Block},r.createElement(fe.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:$.b.chat_message},r.createElement(V.Ca,{color:V.R.Link},Object(ge.a)(e.event.user.username,e.event.user.displayName)))),n=null;return n=e.event.methods.prime?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> with <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link>",{userLogin:t,"x:strong":function(e){return r.createElement(V.Ca,{bold:!0,type:V.gc.Span},e)},"x:twitch-prime-link":function(t){return ze(e.event.channel,"subscription",t)}},"SubNoticeV2Line"):e.event.methods.plan===je.a.Custom?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong>",{userLogin:t,"x:strong":function(e){return r.createElement(V.Ca,{bold:!0,type:V.gc.Span},e)}},"SubNoticeV2Line"):Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> at Tier {tierNumber}",{tierNumber:Object(ke.b)(e.event.methods.plan)||1,userLogin:t,"x:strong":function(e){return r.createElement(V.Ca,{bold:!0,type:V.gc.Span},e)}},"SubNoticeV2Line"),r.createElement(V.fb,{display:V.Da.Flex},r.createElement(V.Ob,{color:V.R.Alt2},r.createElement(V.Cb,{asset:V.Db.Star})),r.createElement(V.Xa,{margin:{left:.5}},r.createElement(V.Ca,null,n)))},ze=function(e,t,n){return r.createElement(Ue,{channel:e,reference:t,text:n})};qe.displayName="SubNoticeV2Line";var Qe,Ye=n("+kC+"),Ke=n("cr+I"),$e=Object(k.compose)(Object(C.a)(Ye,{options:function(e){return{variables:{login:e.channelLogin}}}}))(function(e){var t=e.data;if(t.loading)return null;var n=null;if(!t.error&&t.user&&t.user.subscriptionProducts&&t.user.subscriptionProducts.length>0){var i=t.user.subscriptionProducts.find(function(e){return!!e&&!!e.url});i&&(n=i.url)}if(!n)return r.createElement(V.fb,null,Object(s.d)("This room is in subscribers only mode.","SubsOnlyUpsellLine"));var a=r.createElement(V.Aa,{targetBlank:!0,to:n+"?"+Ke.stringify({ref:"subscriber_only_mode_chat"})},n);return r.createElement(V.fb,null,Object(s.d)("This room is in subscribers only mode. To talk, purchase a channel subscription at {productLink}",{productLink:a},"SubsOnlyUpsellLine"))}),Xe=n("k8pZ");!function(e){e.Timestamp="extension-message-timestamp",e.ExtensionName="extension-message-name"}(Qe||(Qe={}));var Je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onExtensionNameClick=function(e){var n=t.props.message;t.props.onExtensionNameClick(n.extension.clientID,n.extension.version,n.id,e.currentTarget.getBoundingClientRect().bottom)},t}return i.__extends(t,e),t.prototype.render=function(){if(!this.props.installedExtensions)return null;var e=this.props.message;if(!this.props.installedExtensions.some(function(t){var n=t.extension;return n.clientId===e.extension.clientID&&n.version===e.extension.version}))return null;var t=this.props.message.extension.displayBadges;return r.createElement(V.fb,{padding:{x:2,y:.5}},r.createElement("div",{id:this.props.message.id,className:"room-message"},this.renderTimestamp(),r.createElement(w.b,{badgeSets:this.props.badgeSets,badgesToRender:t}),this.renderMessageAuthor(this.props.message.extension),r.createElement("span",null,": "),this.renderMessageBody()))},t.prototype.renderTimestamp=function(){return this.props.showTimestamps?r.createElement("span",{key:"timestamp",className:"room-message__timestamp","data-test-selector":Qe.Timestamp},Object(Q.a)(new Date(this.props.message.sentAt))):null},t.prototype.renderMessageBody=function(){var e=Object(p.f)(this.props.message);return Object(Q.f)(e,{forceClipsNetworkRequest:!0})},t.prototype.renderMessageAuthor=function(e){return r.createElement("button",{onClick:this.onExtensionNameClick,"data-test-selector":Qe.ExtensionName},r.createElement("span",{key:e.clientID+"-"+e.version+"-messageauthor"},r.createElement("span",{key:"username-display",style:{color:e.chatColor}},r.createElement(V.Ca,{bold:!0},e.displayName))))},t}(r.Component);var Ze,et=Object(k.compose)(Object(a.connect)(function(e,t){return{installedExtensions:t.channelID?Object(Xe.a)(e,t.channelID):null}}),Object(K.b)(function(e){return{onExtensionNameClick:e.onShowExtensionMessageCard}}))(Je),tt="https://www.twitch.tv/settings/connections";!function(e){e.Kickback="msg_blizzard",e.Enabled="blizzard_connect_on",e.Disabled="blizzard_connect_off",e.AlreadyEnabled="already_blizzard_mode_on",e.AlreadyDisabled="already_blizzard_mode_off"}(Ze||(Ze={}));var nt=function(e){var t=null;switch(e.type){case Ze.Kickback:var n=r.createElement(V.Aa,{targetBlank:!0,to:tt},tt);t=Object(s.d)("You must connect your Blizzard account to send messages in this room. You can connect your Blizzard account in your Twitch settings at {settingsLink}",{settingsLink:n},"BlizzardConnectModeNoticeLine");break;case Ze.Enabled:t=Object(s.d)("This room now requires a Blizzard account connection to chat.","BlizzardConnectModeNoticeLine");break;case Ze.Disabled:t=Object(s.d)("This room no longer requires a Blizzard account connection to chat.","BlizzardConnectModeNoticeLine");break;case Ze.AlreadyEnabled:t=Object(s.d)("This room already requires a Blizzard account connection to chat.","BlizzardConnectModeNoticeLine");break;case Ze.AlreadyDisabled:t=Object(s.d)("This room does not require a Blizzard account connection to chat.","BlizzardConnectModeNoticeLine");break;default:return null}return r.createElement(V.fb,null,t)};nt.displayName="BlizzardConnectNoticeLine";var it,rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.targetedModerationActionEvent,t=null;switch(e.targetedModerationActionType){case c.TargetedModerationActions.DeleteNotification:var n=e.messageBody||"";t=r.createElement(Te.a,{messageBody:n,targetIsCurrentUser:!0})}return t?r.createElement(V.fb,{className:"chat-line__status"},r.createElement(V.Ca,{type:V.gc.Span},t)):null},t}(r.Component),at=(n("NWfm"),"timeout_success"),ot="untimeout_success",st="ban_success",lt="unban_success",ct="delete_message_success",dt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isCumulativeTenureEnabled=Object(ke.c)("cumulative_tenure",t.props.isCurrentUserStaff),t}return i.__extends(t,e),t.prototype.shouldComponentUpdate=function(e){if(!e.doesNotUpdate)return!0;if(e.isCurrentUserModerator!==this.props.isCurrentUserModerator)return!0;if(e.showModerationIcons!==this.props.showModerationIcons)return!0;if(e.showTimestamps!==this.props.showTimestamps)return!0;if(e.useHighContrastColors!==this.props.useHighContrastColors)return!0;if(e.theme!==this.props.theme)return!0;switch(e.message.type){case m.b.Message:if(e.message.deleted)return!0;break;case m.b.Resubscription:case m.b.Ritual:if(e.message.message&&e.message.message.deleted)return!0;break;case m.b.AutoMod:if(e.message.autoModType===m.a.MessageRejectedPrompt&&(e.showAutoModActions!==this.props.showAutoModActions||e.message.rejectedMessage.deleted))return!0;break;case m.b.Hosting:case m.b.Unhost:case m.b.SlowMode:case m.b.SubscriberOnlyMode:case m.b.FollowerOnlyMode:case m.b.EmoteOnlyMode:case m.b.R9KMode:case m.b.Clear:case m.b.Unraid:case m.b.Notice:case m.b.Moderation:case m.b.ModerationAction:if(e.showModerationActions!==this.props.showModerationActions)return!0}return!1},t.prototype.render=function(){var e=this.props.message,t=null;if(this.props.isCurrentUserModerator){if(this.props.showModerationActions)switch(e.type){case m.b.Hosting:case m.b.Unhost:case m.b.SlowMode:case m.b.SubscriberOnlyMode:case m.b.FollowerOnlyMode:case m.b.EmoteOnlyMode:case m.b.R9KMode:case m.b.Clear:case m.b.Unraid:return null}if(this.props.showModerationIcons)switch(e.type){case m.b.Subscription:case m.b.SubGift:case m.b.SubMysteryGift:case m.b.Resubscription:case m.b.GiftPaidUpgrade:case m.b.AnonGiftPaidUpgrade:t=r.createElement(z,{channelID:this.props.channelID,onPushMessage:this.props.onPushMessage,renderNewVersion:this.isCumulativeTenureEnabled,senderLogin:e.user.username,targetUserID:e.user.userID})}}switch(e.type){case m.b.AutoMod:return e.autoModType!==m.a.MessageRejectedPrompt||this.props.isCurrentUserModerator&&this.props.showAutoModActions?r.createElement(he,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,message:e,badgeSets:this.props.badgeSets,currentUserDisplayName:this.props.currentUserDisplayName,isCurrentUserModerator:this.props.isCurrentUserModerator,showModerationIcons:this.props.showModerationIcons,currentUserLogin:this.props.currentUserLogin,confirmModerationAction:this.props.confirmModerationAction}):null;case m.b.ModerationAction:return this.props.isCurrentUserModerator&&this.props.showModerationActions?r.createElement(Me,{moderationActionEvent:e}):null;case m.b.TargetedModerationAction:return this.props.isCurrentUserModerator?null:r.createElement(rt,{targetedModerationActionEvent:e});case m.b.Connected:return r.createElement(V.fb,{className:"chat-line__status","data-a-target":"chat-welcome-message"},r.createElement(V.Ca,{type:V.gc.Span},Object(s.d)("Welcome to the chat room!","ChatLine")));case m.b.Disconnected:return e.reason?r.createElement(V.fb,{className:"chat-line__status"},r.createElement(V.Ca,{type:V.gc.Span},Object(s.d)("You have been disconnected from chat for the following reason: {reason}",{reason:e.reason},"ChatLine"))):r.createElement(V.fb,{className:"chat-line__status"},r.createElement(V.Ca,{type:V.gc.Span},Object(s.d)("Sorry, we were unable to connect to chat. Attempting to reconnect...","ChatLine")));case m.b.Hosted:return r.createElement(V.fb,{className:"chat-line__status"},r.createElement(V.Ca,{type:V.gc.Span},Object(Q.e)(e)));case m.b.Hosting:return r.createElement(V.fb,{className:"chat-line__status"},r.createElement(V.Ca,{type:V.gc.Span},Object(s.d)("Now hosting {channel}",{channel:e.hostedChannel},"ChatLine")));case m.b.Unhost:return r.createElement(V.fb,{className:"chat-line__status"},r.createElement(V.Ca,{type:V.gc.Span},Object(s.d)("No longer hosting.","ChatLine")));case m.b.Message:return this.props.onRenderReportChatSent&&e.user.userLogin===this.props.currentUserLogin&&this.props.onRenderReportChatSent(),r.createElement(te,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,badgeSets:this.props.badgeSets,message:e,isDeleted:e.deleted,isHidden:e.hidden,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,confirmModerationAction:this.props.confirmModerationAction,onPushMessage:this.props.onPushMessage,theme:this.props.theme});case m.b.FirstCheerMessage:return r.createElement(_e,null,r.createElement(Ee,{event:e}),r.createElement(V.fb,null,r.createElement(te,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,className:"chat-line--inline",currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,onPushMessage:this.props.onPushMessage,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors})));case m.b.BitsBadgeTierMessage:var n=void 0;return e.message.messageParts&&e.message.messageParts.length>0&&(n=r.createElement(V.fb,{padding:{top:.5}},r.createElement(te,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,className:"chat-line--inline",currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,onPushMessage:this.props.onPushMessage,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors}))),r.createElement(_e,null,r.createElement(Se,{event:e}),n);case m.b.Moderation:return this.props.isCurrentUserModerator&&!this.props.showModerationActions?r.createElement(V.fb,{className:"chat-line__moderation"},Object(Q.g)(e)):null;case m.b.Subscription:return this.isCumulativeTenureEnabled?r.createElement(_e,null,r.createElement(V.fb,{display:V.Da.Flex,justifyContent:V.eb.Between},r.createElement(V.fb,{alignItems:V.i.Start},r.createElement(qe,{event:e})),r.createElement(V.fb,{alignItems:V.i.End},t))):r.createElement(_e,null,t,r.createElement(Fe,{event:e}));case m.b.SubGift:if("274598607"===e.user.userID){var i={type:m.b.AnonSubGift,id:e.id,channel:e.channel,methods:e.methods,recipientDisplayName:e.recipientDisplayName,recipientID:e.recipientID,recipientLogin:e.recipientLogin};return r.createElement(_e,null,r.createElement(Ce,{event:i}))}return r.createElement(_e,null,t,r.createElement(Ge,{event:e}));case m.b.AnonSubGift:return r.createElement(_e,null,r.createElement(Ce,{event:e}));case m.b.SubMysteryGift:if("274598607"===e.user.userID){i={type:m.b.AnonSubMysteryGift,id:e.id,channel:e.channel,plan:e.plan,massGiftCount:e.massGiftCount};return r.createElement(_e,null,r.createElement(ye,{event:i}))}return r.createElement(_e,null,t,r.createElement(We,{event:e}));case m.b.AnonSubMysteryGift:return r.createElement(_e,null,r.createElement(ye,{event:e}));case m.b.RewardGift:return r.createElement(Ve.a,{event:e});case m.b.BitsCharity:return r.createElement(V.fb,{className:"chat-line__bits-charity",padding:{right:2,y:.5}},Object(Q.b)(e));case m.b.Resubscription:var a=null;return e.message&&(a=r.createElement(te,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,className:"chat-line--inline",currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,onPushMessage:this.props.onPushMessage,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors})),this.isCumulativeTenureEnabled?r.createElement(_e,null,r.createElement(V.fb,{display:V.Da.Flex,justifyContent:V.eb.Between},r.createElement(Be,{event:e}),!a&&r.createElement(V.fb,{alignItems:V.i.End},t)),a&&r.createElement(V.fb,{margin:{top:.5}},a)):r.createElement(_e,null,!a&&t,r.createElement(Ae,{event:e}),r.createElement(V.fb,null,a));case m.b.GiftPaidUpgrade:return r.createElement(_e,null,t,r.createElement(Ne,{event:e}));case m.b.AnonGiftPaidUpgrade:return r.createElement(_e,null,t,r.createElement(be,{event:e}));case m.b.RoomMods:return r.createElement(V.fb,{className:"chat-line__status"},Object(Q.i)(e.moderatorLogins));case m.b.SlowMode:return r.createElement(V.fb,{className:"chat-line__status"},Object(Q.j)(e));case m.b.SubscriberOnlyMode:return r.createElement(V.fb,{className:"chat-line__status"},Object(Q.k)(e));case m.b.FollowerOnlyMode:return r.createElement(V.fb,{className:"chat-line__status"},Object(Q.d)(e));case m.b.EmoteOnlyMode:return r.createElement(V.fb,{className:"chat-line__status"},Object(Q.c)(e));case m.b.R9KMode:return r.createElement(V.fb,{className:"chat-line__status"},Object(Q.h)(e));case m.b.Clear:return r.createElement(V.fb,{className:"chat-line__status"},Object(s.d)("Chat was cleared by a moderator","ChatLine"));case m.b.Notice:if(function(e){return e.msgid in Le()}(e))return r.createElement(V.fb,{className:"chat-line__status"},r.createElement(Re,{message:e}));switch(e.msgid){case"msg_subsonly":return r.createElement(V.fb,{className:"chat-line__status"},r.createElement($e,{channelLogin:this.props.channelLogin}));case Ze.Kickback:case Ze.Enabled:case Ze.Disabled:case Ze.AlreadyEnabled:case Ze.AlreadyDisabled:return r.createElement(V.fb,{className:"chat-line__status"},r.createElement(nt,{type:e.msgid}))}if(this.props.isCurrentUserModerator)switch(e.msgid){case ct:case at:case st:return null;case ot:case lt:if(this.props.showModerationActions)return null}return r.createElement(V.fb,{className:"chat-line__status"},e.message);case m.b.Info:return r.createElement(V.fb,{className:"chat-line__status"},e.message);case m.b.Raid:return r.createElement(Oe,{message:e});case m.b.Unraid:return r.createElement(_e,null,r.createElement(V.Ca,{color:V.R.Alt2},Object(s.d)("The raid has been cancelled.","RaidCancelMessage")));case m.b.Ritual:return r.createElement(_e,null,r.createElement(He,{event:e}),r.createElement(te,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,className:"chat-line--inline",currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,onPushMessage:this.props.onPushMessage,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors}));case m.b.ExtensionMessage:return r.createElement(et,{badgeSets:this.props.badgeSets,channelID:this.props.channelID,currentUserLogin:this.props.currentUserLogin,message:e,showTimestamps:this.props.showTimestamps});default:return null}},t}(r.Component),ut=n("GnwI"),mt=(n("HjUq"),["scroll","wheel","mousewheel","DOMMouseScroll","keyup","mousedown"]),pt=10,ht=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isAutoScrolling:!0},t.shouldUpdateMessages=!1,t.saveScrollRef=function(e){return t.scroll=e},t.handleScrollEvent=function(e){t.scroll&&t.scroll.scrollContent&&(e.which>0||"mousedown"===e.type||"mousewheel"===e.type||"wheel"===e.type)&&(t.scroll.scrollContent.scrollHeight-t.scroll.scrollContent.scrollTop-t.scroll.scrollContent.offsetHeight<=pt?t.setState({isAutoScrolling:!0}):t.setState({isAutoScrolling:!1}))},t.handleResize=function(){t.state.isAutoScrolling&&t.scrollToBottom()},t.handleClickMoreMessages=function(){t.setState({isAutoScrolling:!0},t.scrollToBottom)},t.scrollToBottom=function(){t.scroll&&t.scroll.scrollContent&&(t.scroll.scrollContent.scrollTop=t.scroll.scrollContent.scrollHeight)},t.reportChatRenderSent=function(){t.props.chatRenderSentEvent&&t.props.latencyTracking.reportCustomEvent(t.props.chatRenderSentEvent)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;mt.forEach(function(t){e.scroll&&e.scroll.scrollContent&&e.scroll.scrollContent.addEventListener(t,e.handleScrollEvent)})},t.prototype.componentWillUnmount=function(){var e=this;mt.forEach(function(t){e.scroll&&e.scroll.scrollContent&&e.scroll.scrollContent.removeEventListener(t,e.handleScrollEvent)})},t.prototype.componentWillReceiveProps=function(e){0===this.props.badgeSets.count&&e.badgeSets.count>0&&(this.shouldUpdateMessages=!0)},t.prototype.componentDidUpdate=function(e){this.shouldUpdateMessages=!1,this.state.isAutoScrolling&&this.props.messages!==e.messages&&this.scrollToBottom()},t.prototype.render=function(){var e=this,t=this.props.messages.map(function(t){return r.createElement(dt,{badgeSets:e.props.badgeSets,channelID:e.props.channelID,channelLogin:e.props.channelLogin,isCurrentUserModerator:e.props.isCurrentUserModerator,isCurrentUserStaff:e.props.isCurrentUserStaff,message:t,key:t.id,showAutoModActions:e.props.showAutoModActions,showModerationActions:e.props.showModerationActions,showModerationIcons:e.props.showModerationIcons,showTimestamps:e.props.showTimestamps,useHighContrastColors:e.props.useHighContrastColors,currentUserDisplayName:e.props.currentUserDisplayName,currentUserLogin:e.props.currentUserLogin,confirmModerationAction:e.props.confirmModerationAction,onPushMessage:e.props.onPushMessage,doesNotUpdate:!e.shouldUpdateMessages,theme:e.props.theme,onRenderReportChatSent:e.reportChatRenderSent})});return r.createElement(V.fb,{refDelegate:this.props.containerRef,className:"chat-list",display:V.Da.Flex,flexDirection:V.Ga.Column,flexWrap:V.Ha.NoWrap,overflow:V.mb.Hidden,flexGrow:1},r.createElement(f.a,{onResize:this.handleResize}),r.createElement(V.Xa,{flexGrow:1},r.createElement(b.b,{className:"chat-list__lines",scrollRef:this.saveScrollRef,"data-a-target":"chat-scroller"},r.createElement(V.Xa,{flexGrow:1,fullHeight:!0,padding:{bottom:1}},r.createElement("div",{role:"log"},t)))),r.createElement(V.fb,{className:"chat-list__more-messages-placeholder",position:V.tb.Relative,margin:{x:2}},this.moreMessages()))},t.prototype.moreMessages=function(){return this.state.isAutoScrolling?null:r.createElement(V.Xa,{display:V.Da.Flex,justifyContent:V.eb.Center,alignItems:V.i.Center,position:V.tb.Absolute,padding:.5,attachBottom:!0,fullWidth:!0},r.createElement(V.Ob,{className:"chat-list__more-messages",borderRadius:V.A.Medium},r.createElement("div",{onClick:this.handleClickMoreMessages},Object(s.d)("More messages below.","ChatList"))))},t}(r.Component),gt=Object(ut.withLatencyTracking)("ChatListPresentation",{autoReportInteractive:!0})(ht),ft=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={messages:[]},t.onBufferUpdate=function(){t.syncBufferHandle||(t.syncBufferHandle=setTimeout(t.syncBufferedMessages,0))},t.syncBufferedMessages=function(){t.props.messageBufferAPI&&t.setState({messages:t.props.messageBufferAPI.getMessages()}),t.clearBufferHandle()},t.clearBufferHandle=function(){t.syncBufferHandle&&(clearTimeout(t.syncBufferHandle),t.syncBufferHandle=0)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.messageBufferAPI&&(this.props.messageBufferAPI.addUpdateHandler(this.onBufferUpdate),this.setState({messages:this.props.messageBufferAPI.getMessages()}))},t.prototype.componentWillReceiveProps=function(e){var t=e.pubsub.messages.chatRichEmbedInfo,n=e.pubsub.messages.extensionMessage;t&&this.props.pubsub.messages.chatRichEmbedInfo!==t&&s.q.apollo.client.writeQuery({query:u,variables:{slug:t.data.twitch_metadata.clip_metadata.slug},data:function(e){var t=e.data.twitch_metadata.clip_metadata;return{clip:t.id?{__typename:"Clip",slug:t.slug,id:t.id,url:e.data.request_url,title:e.data.title,thumbnailURL:e.data.thumbnail_url,curator:t.curator_id?{displayName:e.data.author_name,id:t.curator_id,__typename:"User"}:null,broadcaster:t.channel_display_name?{displayName:t.channel_display_name,id:t.broadcaster_id,__typename:"User"}:null}:null}}(t)}),this.props.messageBufferAPI!==e.messageBufferAPI&&(this.props.messageBufferAPI&&this.props.messageBufferAPI.removeUpdateHandler(this.onBufferUpdate),e.messageBufferAPI&&(e.messageBufferAPI.addUpdateHandler(this.onBufferUpdate),this.setState({messages:e.messageBufferAPI.getMessages()}))),n&&this.props.pubsub.messages.extensionMessage!==n&&this.props.onPushMessage(function(e){var t=e.data;return{type:m.b.ExtensionMessage,id:t.id,sentAt:t.sent_at,extension:{clientID:t.sender.extension_client_id,version:t.sender.extension_version,displayName:t.sender.display_name,displayBadges:Object(p.b)(t.sender.badges),chatColor:t.sender.chat_color},content:{text:t.content.text,fragments:Object(p.c)(t.content.fragments)}}}(n))},t.prototype.componentWillUnmount=function(){this.props.messageBufferAPI&&this.props.messageBufferAPI.removeUpdateHandler(this.onBufferUpdate),this.clearBufferHandle()},t.prototype.render=function(){return r.createElement(gt,{channelID:this.props.channelID,badgeSets:this.props.badgeSets,currentUserDisplayName:this.props.currentUserDisplayName,channelLogin:this.props.channelLogin,onPushMessage:this.props.onPushMessage,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isEmbedded:this.props.isEmbedded,messages:this.state.messages,showAutoModActions:this.props.showAutoModActions,showModerationActions:this.props.showModerationActions,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,theme:this.props.theme,useHighContrastColors:this.props.useHighContrastColors,currentUserLogin:this.props.currentUserLogin,containerRef:this.props.containerRef,chatRenderSentEvent:this.props.chatRenderSentEvent,confirmModerationAction:this.props.confirmModerationAction})},t}(r.Component);var bt=Object(o.compose)(Object(a.connect)(function(e){return{chatRenderSentEvent:Object(g.b)(e),showAutoModActions:e.chat.showAutoModActions,showModerationActions:e.chat.showModerationActions,showModerationIcons:e.chat.showModIcons,showTimestamps:e.chat.showTimestamps,useHighContrastColors:e.chat.useHighContrastColors}}),Object(l.a)([{skip:function(e){return!e.channelID},topic:function(e){return e.channelID?Object(d.A)(e.channelID):""},mapMessageTypesToProps:(it={},it[c.PubsubMessageType.StreamChatRoomChatRichEmbed]="chatRichEmbedInfo",it[c.PubsubMessageType.StreamChatRoomExtensionMessage]="extensionMessage",it)}]),h.a)(ft);n.d(t,!1,function(){return ft}),n.d(t,"a",function(){return bt})},r2Xj:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={DarkMode:"darkMode",FollowerDuration:"followerDuration",FollowerMode:"followerMode",HideChat:"hideChat",ShowMessageFlags:"showMessageFlags",ShowAutoModActions:"showAutoModActions",ShowModActions:"showModerationActions",ShowModIcons:"showModIcons",ShowTimestamps:"showTimestamps",UseHighContrastColors:"useHighContrastColors",SlowMode:"slowMode"}},r62z:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return u});var i=n("+GjP"),r="https://www.facebook.com/sharer/sharer.php",a="https://www.twitter.com/share",o="https://www.reddit.com/submit",s="https://vk.com/share.php";function l(e){return Object(i.e)(r,{u:e})}function c(e,t){return Object(i.e)(a,{url:e,text:t})}function d(e,t){return Object(i.e)(o,{url:e,title:t})}function u(e){return Object(i.e)(s,{url:e})}},rVcM:function(e,t,n){},rhXE:function(e,t,n){},ru7j:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BlockedUsers"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:61}};n.loc.source={body:"query BlockedUsers {\ncurrentUser {\nid\nblockedUsers {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},rwoo:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.ChannelNotLive="channel_not_live",e.UserBanned="user_banned",e.UserTimedOut="user_timed_out",e.ChannelBanned="channel_banned",e.ChannelNotClippable="channel_not_clippable",e.NotLoggedIn="not_logged_in",e.VideoNotAvailable="video_not_available",e.SubOnlyVod="video_subonly",e.ClipMissing="clip_missing",e.ClipMaintenance="maintenance",e.Default="500"}(i||(i={}))},ry0r:function(e,t,n){"use strict";var i,r=n("/MKj"),a=n("kRBY"),o=n("mrSG"),s=n("q1tI"),l=n("oJmH"),c=n("/7QA"),d=n("yR8l"),u=n("eDVu"),m=n("0Log"),p=n("geRD"),h=n("/aPz"),g=n("DMoW"),f=n("TSYQ"),b=n("4rCz"),v=n("Ue10");n("OCTF");!function(e){e.CloseButton="bits-card-wrapper-close-button-selector",e.OuterWrapper="bits-card-wrapper-outer-selector",e.InnerWrapper="bits-card-wrapper-inner-selector"}(i||(i={}));var k,C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.onUserClose,n=e.children,r=e.className,a=e.dataATarget,o=e.closeDataATarget,l=t?s.createElement(v.fb,{position:v.tb.Absolute,padding:{top:.5,right:.5},attachRight:!0,attachTop:!0,zIndex:v.xc.Above},s.createElement(v.D,{ariaLabel:Object(b.d)("close bits card","BitsCard"),"data-a-target":o,"data-test-selector":i.CloseButton,onClick:t,icon:v.Db.Close,type:v.F.Secondary,size:v.E.Small})):null;return s.createElement(v.Ob,{"data-test-selector":i.OuterWrapper,className:f("bits-card-wrapper",r),"data-a-target":a,display:v.Da.Flex,flexDirection:v.Ga.Column,position:v.tb.Absolute,background:v.u.Base,elevation:3,zIndex:v.xc.Above,fullWidth:!0,border:!0},l,s.createElement(v.fb,{"data-test-selector":i.InnerWrapper,display:v.Da.Flex,flexDirection:v.Ga.Column,alignItems:v.i.Center,justifyContent:v.eb.Center,flexGrow:1,fullWidth:!0},n))},t.defaultProps={dataATarget:"bits-card",closeDataATarget:"bits-card-close-button"},t}(s.PureComponent),y=n("zrSb"),S=function(){return s.createElement(v.fb,{textAlign:v.cc.Center,padding:1},s.createElement(v.Ca,{italic:!0},Object(c.d)("Have no fear, your Bits inventory is safe! The ability to Cheer will return shortly.","BitsCard")))},E=n("VeT4"),N=n("/0dD"),_=n("XDQu");n("ZfCj");(k||(k={})).Placeholder="placeholder";var D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave&&t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick&&t.props.onClick(n)},t}return o.__extends(t,e),t.prototype.render=function(){return this.props.cheermote&&this.props.cheermote.key?s.createElement("li",{className:f("cheermote-button",this.props.className)},s.createElement("button",{className:"cheermote-button__button","data-key":this.props.cheermote.key,onMouseEnter:this.handleCheermoteHover,onMouseLeave:this.handleCheermoteUnhover,onClick:this.handleCheermoteClick,"data-a-target":"cheermote-"+this.props.cheermote.key.replace(":","")},s.createElement("img",{alt:this.props.cheermote.key,src:this.props.darkModeEnabled?this.props.cheermote.imgSrcDark:this.props.cheermote.imgSrc})),this.props.children):s.createElement("li",{"data-test-selector":k.Placeholder},s.createElement("button",{className:"cheermote-button__button",disabled:!0},s.createElement("div",{className:"cheermote-button__placeholder"})))},t}(s.PureComponent);var w,O=Object(r.connect)(function(e){return{darkModeEnabled:Object(_.a)(e)===N.a.Dark}})(D),I=n("5zXJ");(w||(w={})).MinBitsAmountDisclaimer="min-bits-amount-disclaimer";var T,M=["cheer","shamrock","frankerz","party"],L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.makeCheermoteButtons=function(e){var n=t.props.bitsConfig.indexedActions[e];return t.makeCheermoteButton(n)},t.makeCheermoteButton=function(e){if(e){var n=e.indexedTiers.get(I.g);if(n){var i={key:e.prefix,imgSrc:n.indexedImages.LIGHT.static.get(2),imgSrcDark:n.indexedImages.DARK.static.get(2)};return s.createElement(O,{key:i.key,cheermote:i,onClick:t.props.onCheermoteClick})}}},t}return o.__extends(t,e),t.prototype.render=function(){var e=this,t=M.map(this.makeCheermoteButtons),n=this.props.bitsConfig.orderedActions.find(function(e){return e.type===g.w.CUSTOM});return n&&(t[1]=this.makeCheermoteButton(n)),s.createElement(v.fb,{className:"first-cheer-builder",display:v.Da.Flex,flexDirection:v.Ga.Column,padding:{top:3},justifyContent:v.eb.Between},s.createElement(v.fb,{display:v.Da.Flex,flexDirection:v.Ga.Column,textAlign:v.cc.Center},s.createElement(v.Ca,{bold:!0,type:v.gc.H4},Object(c.d)("Support your streamer with Bits","FirstCheerPrefixSelector")),s.createElement(v.fb,{padding:{x:4,top:.5},textAlign:v.cc.Left},s.createElement(v.Ca,{type:v.gc.Span},Object(c.d)("Twitch rewards streamers when you use Bits. Send {channelName} some love! First select a cheermote.",{channelName:this.props.channelName},"FirstCheerPrefixSelector"))),!this.props.canCheerInChannel&&s.createElement(v.fb,{padding:{top:1}},s.createElement(v.Ca,{"data-test-selector":w.MinBitsAmountDisclaimer,type:v.gc.Span,italic:!0},Object(c.d)("{channelName} requires <x:bitsAmount></x:bitsAmount> to cheer in this channel",{channelName:this.props.channelName,"x:bitsAmount":function(){return s.createElement(E.a,{count:e.props.minCheerAmount,bitsConfig:e.props.bitsConfig,withImage:!1,withText:!0})}},"FirstCheerPrefixSelector")))),s.createElement(v.Xa,{display:v.Da.Flex,flexDirection:v.Ga.Row,justifyContent:v.eb.Center},s.createElement("ol",null,t)),s.createElement(v.fb,{padding:{x:2,bottom:.5},fullWidth:!0},s.createElement(v.C,{"data-a-target":"bits-card-back-button",type:v.I.Text,fullWidth:!0,onClick:this.props.onShowAllCheermotes},Object(c.d)("Show All Cheermotes","FirstCheerPrefixSelector"))))},t}(s.PureComponent),R=n("8/mp"),x=n("3CMh"),F=function(e){var t=e.headline||e.prefix+(e.tier||"");if(e.tournament&&e.tier<=0){var n=e.tournament.teams.find(function(t){return t.id===e.prefix});n&&(t=n.name+" - "+e.prefix)}return s.createElement(v.fb,{display:v.Da.Flex,flexDirection:v.Ga.Column,alignItems:v.i.Center,padding:1},!e.hideHeadline&&s.createElement(v.Ca,{type:v.gc.H4,bold:!0},t),s.createElement(x.a,{prefix:e.prefix,amount:e.tier,bitsConfig:e.bitsConfig,showImage:!0,showAmount:e.tier>0}))},A=(n("ecb7"),function(e){var t=e.prefixes.map(function(t,n){if(t.alt&&t.cheerAmount)return s.createElement(v.Xa,{className:"pending-cheer-list__list-item",key:n,padding:{x:1}},s.createElement("li",null,s.createElement(x.a,{prefix:t.alt,amount:t.cheerAmount>I.j?I.j:t.cheerAmount,bitsConfig:e.bitsConfig,size:x.b.Small,showAmount:!0,showImage:!0})))});return s.createElement(v.fb,{display:v.Da.Flex,flexDirection:v.Ga.Row,alignItems:v.i.End,justifyContent:v.eb.Center,flexWrap:v.Ha.Wrap,margin:{top:1},className:"pending-cheer-list"},t)});!function(e){e.MinCheer="sponsored-campaign-minimum-cheer",e.OverBitsTotal="sponsored-campaign-over-total",e.CannotBeSponsored="sponsored-campaign-cannot-be-sponsored",e.OverUserLimit="sponsored-campaign-over-user-limit"}(T||(T={}));var j,U,B=function(e){var t=0;if(e.prefixes.forEach(function(n){n.alt===e.sponsoredCampaignPrefix&&n.cheerAmount&&(t+=n.cheerAmount)}),t<=0)return null;if(t<e.sponsoredCampaign.minimumBitsAmount){var n=Object(c.d)("This Cheermote has a minimum of {minBits} Bits for {brand} to add extra Bits.",{minBits:e.sponsoredCampaign.minimumBitsAmount,brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return s.createElement(v.Ca,{"data-test-selector":T.MinCheer,color:v.R.Error},n)}if(!e.sponsoredCampaign.bitsUsed||!e.sponsoredCampaign.bitsTotal||e.sponsoredBitsBonus+e.sponsoredCampaign.bitsUsed>e.sponsoredCampaign.bitsTotal){n=Object(c.d)("Not enough bits from the sponsored pool to support your cheer with the {brand} Cheermote.",{brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return s.createElement(v.Ca,{"data-test-selector":T.OverBitsTotal,color:v.R.Error},n)}if(e.sponsoredCampaign.self){if(!e.sponsoredCampaign.self.canBeSponsored){n=Object(c.d)("You are not eligible to use the {brand} Cheermote.",{brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return s.createElement(v.Ca,{"data-test-selector":T.CannotBeSponsored,color:v.R.Error},n)}if(e.sponsoredCampaign.self.bitsUsed+e.sponsoredBitsBonus>e.sponsoredCampaign.userLimit){n=Object(c.d)("You have reached the user limit for use of the {brand} Cheermote.",{brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return s.createElement(v.Ca,{"data-test-selector":T.OverUserLimit,color:v.R.Error},n)}}return null},P=n("XmgI");!function(e){e.DisplayOnlyCheermote="display-only-cheermote-selector",e.ZeroBalance="zero-balance-selector",e.PurchaseMore="purchase-more-selector",e.LargestCheermote="largest-cheermote-selector",e.MinimumCheerSelector="minimum-cheer-selector",e.MinimumCheermoteSelector="minimum-cheermote-selector",e.MessageLengthExceeded="message-length-exceeded-selector",e.UserBanned="user-banned-selector",e.UserIneligible="user-ineligible-selector",e.UserSuspended="user-suspended-selector",e.ChannelIneligible="channel-ineligible-selector",e.ZalgoMessage="zalgo-message-selector",e.ChannelBlockedTerms="channel-blocked-terms-selector",e.InvalidEventID="invalid-event-id-selector",e.RequestThrottled="request-throttled-selector",e.Unknown="unknown-selector"}(U||(U={}));var V=((j={})[g.Na.USER_BANNED]=U.UserBanned,j[g.Na.USER_INELIGIBLE]=U.UserIneligible,j[g.Na.USER_SUSPENDED]=U.UserSuspended,j[g.Na.CHANNEL_INELIGIBLE]=U.ChannelIneligible,j[g.Na.ZALGO_MESSAGE]=U.ZalgoMessage,j[g.Na.CHANNEL_BLOCKED_TERMS]=U.ChannelBlockedTerms,j[g.Na.INVALID_EVENT_ID]=U.InvalidEventID,j[g.Na.REQUEST_THROTTLED]=U.RequestThrottled,j[g.Na.UNKNOWN]=U.Unknown,j),H=function(e){if(e.smallestCheermote<e.minPerEmote||e.bitsSendHasError&&e.bitsSendErrorCode===g.Na.EMOTE_AMOUNT_BELOW_MIN_BITS){var t=Object(c.d)("This channel has set a minimum of {minPerEmote} Bits to use a Cheer emote in chat.",{minPerEmote:e.minPerEmote},"Bits--PendingCheer");return e.onValidationError(g.Na.EMOTE_AMOUNT_BELOW_MIN_BITS),s.createElement(v.Ca,{"data-test-selector":U.MinimumCheermoteSelector,color:v.R.Error,italic:!0,"data-a-target":"min-emote-bits-error"},t)}if(e.chatMessage&&e.chatMessage.length>I.i||e.bitsSendHasError&&e.bitsSendErrorCode===g.Na.MESSAGE_LENGTH_EXCEEDED){var n=Object(c.d)("You have exceeded the maximum number of characters you can use in your cheer.","Bits--PendingCheer");return e.onValidationError(g.Na.MESSAGE_LENGTH_EXCEEDED),s.createElement(v.Ca,{"data-test-selector":U.MessageLengthExceeded,color:v.R.Error,italic:!0},n)}if(e.bitsSendHasError){var i=V[e.bitsSendErrorCode]||V[g.Na.UNKNOWN],r=void 0;switch(e.bitsSendErrorCode){case g.Na.ZALGO_MESSAGE:r=Object(c.d)("You have unsupported characters in your message, please remove them and try again.","Bits--PendingCheer");break;case g.Na.USER_BANNED:case g.Na.USER_INELIGIBLE:case g.Na.USER_SUSPENDED:case g.Na.CHANNEL_INELIGIBLE:r=Object(c.d)("Sorry, you are unable to send bits in this channel at this time.","Bits--PendingCheer");break;case g.Na.CHANNEL_BLOCKED_TERMS:r=Object(c.d)("You have blocked words in your message, please remove them and try again.","Bits--PendingCheer");break;case g.Na.INVALID_EVENT_ID:case g.Na.REQUEST_THROTTLED:case g.Na.UNKNOWN:default:r=Object(c.d)("Something went wrong when processing your cheer, please try again later.","Bits--PendingCheer")}return e.onValidationError(e.bitsSendErrorCode),s.createElement(v.Ca,{"data-test-selector":i,color:v.R.Error,italic:!0},r)}return null},G=function(e){if(e.largestCheermote>I.j||e.bitsSendHasError&&e.bitsSendErrorCode===g.Na.TOO_LARGE_BITS_EMOTE){var t=Object(c.d)("{maximumCheerSize} is the largest Cheer emote, add another emote to Cheer louder!",{maximumCheerSize:I.j},"Bits--PendingCheer");return e.onValidationError(g.Na.TOO_LARGE_BITS_EMOTE),s.createElement(v.Ca,{"data-test-selector":U.LargestCheermote,"data-a-target":"max-cheer-bits-error"},t)}if(0===e.bitsBalance)return e.onValidationError(g.Na.INSUFFICIENT_BALANCE),s.createElement(v.Ca,{"data-test-selector":U.ZeroBalance,"data-a-target":"zero-bits-error"},Object(c.d)("Please get Bits. You have 0 Bits and cannot send a Cheer","Bits--PendingCheer"));if(e.bitsBalance&&e.amount>e.bitsBalance)return e.onValidationError(g.Na.INSUFFICIENT_BALANCE),s.createElement(v.Ca,{"data-test-selector":U.PurchaseMore,"data-a-target":"need-more-bits-error"},Object(c.d)("Please purchase {neededBits} more Bits to Cheer",{neededBits:e.amount-e.bitsBalance},"Bits--PendingCheer"));if(e.amount<e.minToCheer||e.bitsSendHasError&&e.bitsSendErrorCode===g.Na.AMOUNT_BELOW_MIN_BITS){e.onValidationError(g.Na.AMOUNT_BELOW_MIN_BITS);var n=Object(c.d)("Add {moreBitsAmount} more Bits to reach this channel's minimum Cheer.",{moreBitsAmount:e.minToCheer-e.amount},"Bits--PendingCheer");return s.createElement(v.Ca,{"data-test-selector":U.MinimumCheerSelector,"data-a-target":"min-cheer-bits-error"},n)}if(e.amount>I.k||e.bitsSendHasError&&e.bitsSendErrorCode===g.Na.TOO_LARGE_CHEER){e.onValidationError(g.Na.TOO_LARGE_CHEER);var i=Object(c.d)("{maximumCheerSize} is the maximum amount of Bits you can send in one message, send multiple messages if you want to Cheer more!",{maximumCheerSize:I.k},"Bits--PendingCheer");return s.createElement(v.Ca,{"data-test-selector":U.MinimumCheerSelector,"data-a-target":"max-message-bits-error"},i)}if(e.chatMessage&&Object(P.c)(e.chatMessage,e.bitsConfig)){e.onValidationError(g.Na.INVALID_BITS_MESSAGE);var r=Object(c.d)("message contains at least one display only Cheermote.","Bits--PendingCheer");return s.createElement(v.Ca,{"data-test-selector":U.DisplayOnlyCheermote,"data-a-target":"display-only-bits-error"},r)}return null},W=(n("ECxT"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick(n)},t}return o.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.bitsConfig.indexedActions[this.props.chosenCheermote.toLowerCase()],n=t.orderedTiers.filter(function(e){return e.canCheer&&e.canShowInBitsCard}).map(function(e){return{imgSrc:e.indexedImages.LIGHT.static.get(2),imgSrcDark:e.indexedImages.DARK.static.get(2),key:t.prefix+":"+e.bits}}).reverse().map(function(t,n){return t&&t.key?s.createElement("li",{key:t.key,className:"cheermote-tier-selector__cheermote"},s.createElement("button",{className:"cheermote-tier-selector__item-button","data-key":t.key,onMouseEnter:e.handleCheermoteHover,onMouseLeave:e.handleCheermoteUnhover,onClick:e.handleCheermoteClick,"data-a-target":"cheermote-"+t.key.replace(":","")},s.createElement("img",{alt:t.key,src:e.props.darkModeEnabled?t.imgSrcDark:t.imgSrc})),s.createElement(x.a,{bitsConfig:e.props.bitsConfig,prefix:"",amount:+t.key.split(":")[1],showImage:!1,showAmount:!0,size:x.b.Small})):s.createElement("li",{key:"null-cheermote-"+n},s.createElement("button",{className:"cheermote-tier-selector__item-button",disabled:!0},s.createElement("div",{className:"cheermote-tier-selector__placeholder"})))}),i=s.createElement(v.fb,{padding:{right:2},fullWidth:!0,className:"cheermote-tier-selector__back-button"},s.createElement(v.C,{"data-a-target":"bits-card-back-button",type:v.I.Text,fullWidth:!0,onClick:this.props.onClose},Object(c.d)("Show All Cheermotes","CheermoteCarousel"))),r=s.createElement(v.Xa,{className:"cheermote-tier-selector__cheermotes",display:v.Da.Flex,flexWrap:v.Ha.Wrap,flexDirection:v.Ga.Row,justifyContent:v.eb.Between,alignItems:v.i.End,padding:{bottom:1}},s.createElement("ul",null,n,i));return s.createElement(v.fb,{flexGrow:1,overflow:v.mb.Hidden,className:"cheermote-tier-selector"},r)},t}(s.PureComponent));var q,z=Object(r.connect)(function(e){return{darkModeEnabled:Object(_.a)(e)===N.a.Dark}})(W),Q=n("ebRM");n("8BsE");!function(e){e.MinBitsChannelDisclaimer="min-bits-channel-disclaimer",e.BitsAmountCheering="bits-amount-cheering"}(q||(q={}));var Y,K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.unhoverTimeout=0,t.onClickTier=function(e){t.props.onClickCheermote(e.split(":").join(""))},t.onHover=function(e){clearTimeout(t.unhoverTimeout);var n=e.split(":");n.length<2||t.setState({hoveredTier:parseInt(n[1],10),hoveredCheermote:n[0]})},t.onHoverLeave=function(){t.unhoverTimeout=setTimeout(t.clearHovered,500)},t.clearHovered=function(){t.setState({hoveredTier:void 0,hoveredCheermote:void 0})},t}return o.__extends(t,e),t.prototype.render=function(){var e=this,t=Object(Q.a)(this.props.currentCheers),n=t.total,i=t.bonus,r=t.smallestCheermote,a=t.largestCheermote,o=null;if(this.props.currentCheers&&1===this.props.currentCheers.length){var l=this.props.currentCheers[0].alt;l&&(o=s.createElement(v.fb,{padding:{top:1}},s.createElement(x.a,{prefix:l,amount:n>I.j?I.j:n,bitsConfig:this.props.bitsConfig,showImage:!0,showAmount:!0})))}else this.props.currentCheers&&(o=s.createElement(v.fb,{margin:{y:1}},s.createElement(R.b,{className:"first-cheer-tier-selector__scroll-container"},s.createElement(A,{prefixes:this.props.currentCheers,bitsConfig:this.props.bitsConfig}))));var d=Object(c.d)("Back","FirstCheerTierSelector"),u=!(!this.state.hoveredCheermote||!this.state.hoveredTier),m=this.props.canCheerInChannel&&this.props.currentCheers.length>0,p=null;this.props.currentCheers&&this.props.sponsoredCampaign&&this.props.sponsoredCampaignPrefix&&(p=s.createElement(B,{prefixes:this.props.currentCheers,sponsoredCampaign:this.props.sponsoredCampaign,sponsoredCampaignPrefix:this.props.sponsoredCampaignPrefix,sponsoredBitsBonus:i}));var h=H({smallestCheermote:r,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,minPerEmote:this.props.minPerEmote,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid}),g=G({largestCheermote:a,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,amount:n,minToCheer:this.props.minCheerAmount,bitsConfig:this.props.bitsConfig,bitsBalance:this.props.bitsBalance,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid});return h||g||this.props.onCheerInvalid(void 0),s.createElement(v.fb,{display:v.Da.Flex,flexDirection:v.Ga.Column,justifyContent:v.eb.Between},s.createElement(v.Ob,{padding:{top:3},display:v.Da.Flex,flexDirection:v.Ga.Column,textAlign:v.cc.Center,borderBottom:!0},s.createElement(v.fb,{position:v.tb.Absolute,attachLeft:!0,attachTop:!0,padding:{top:.5}},s.createElement(v.C,{ariaLabel:d,onClick:this.props.onBack,type:v.I.Text,icon:v.Db.AngleLeft},d)),s.createElement(v.Ca,{type:v.gc.H4,bold:!0},Object(c.d)("Pick cheermote tier","FirstCheerTierSelector")),s.createElement(v.fb,{padding:{x:4,top:.5},textAlign:v.cc.Left},s.createElement(v.Ca,null,Object(c.d)("Now, select how many Bits to use and send your message in chat.","FirstCheerTierSelector"))),u&&s.createElement(F,{hideHeadline:!0,bitsConfig:this.props.bitsConfig,prefix:this.state.hoveredCheermote,tier:this.state.hoveredTier,event:null}),!u&&s.createElement(s.Fragment,null,m&&!h&&s.createElement(s.Fragment,null,o,s.createElement(v.fb,{padding:{bottom:.5}},s.createElement(v.Ca,{"data-test-selector":q.BitsAmountCheering},Object(c.d)("You're cheering <x:bitsAmount></x:bitsAmount>",{"x:bitsAmount":function(){return s.createElement(E.a,{count:n,bitsConfig:e.props.bitsConfig,withImage:!1,withText:!0})}},"FirstCheerTierSelector")))),m&&!g&&p&&s.createElement(v.fb,{padding:{top:1}},p),m&&g&&s.createElement(v.Ob,{padding:{top:1},color:v.R.Error},g),m&&h&&s.createElement(v.fb,{padding:{top:3,x:3}},h),!m&&s.createElement(v.fb,{padding:{y:3}},s.createElement(v.Ca,{"data-test-selector":q.MinBitsChannelDisclaimer,type:v.gc.Span,italic:!0},Object(c.d)("{channelName} requires <x:bitsAmount></x:bitsAmount> to cheer in this channel",{channelName:this.props.channelName,"x:bitsAmount":function(){return s.createElement(E.a,{count:e.props.minCheerAmount,bitsConfig:e.props.bitsConfig,withImage:!1,withText:!0})}},"FirstCheerTierSelector"))))),s.createElement(z,{bitsConfig:this.props.bitsConfig,chosenCheermote:this.props.chosenCheermote,onClose:this.props.onClose,onClick:this.onClickTier,onHover:this.onHover,onHoverLeave:this.onHoverLeave}))},t}(s.PureComponent),$=(n("wtKP"),function(e){var t=void 0!==e.progress,n=s.createElement("img",{className:"cheer-badge__image",src:e.badge.image1x,alt:e.badge.title,srcSet:e.badge.image1x+" 1x, "+e.badge.image2x+" 2x, "+e.badge.image4x+" 4x"});if(!t)return n;var i=e.progress?Math.max(Math.round(18*(1-e.progress)),1):18;return s.createElement("div",{className:"cheer-badge__progress-container"},n,s.createElement("div",{className:"cheer-badge__progress-overlay",style:{width:i+"px"},"data-test-selector":"cheer-progress"}))}),X=function(e){var t;e.selfBitsBadge&&(e.selfBitsBadge.current||e.selfBitsBadge.next)&&(t=s.createElement(v.fb,{padding:{bottom:.5}},e.selfBitsBadge.current&&s.createElement(v.fb,{display:v.Da.Inline,margin:{right:.5}},s.createElement($,{badge:e.selfBitsBadge.current})),e.selfBitsBadge.next&&s.createElement($,{badge:e.selfBitsBadge.next,progress:e.selfBitsBadge.progress}),e.selfBitsBadge.nextBits&&Object(c.d)("Next badge unlocks in {bitsToNextBadge} Bits!",{bitsToNextBadge:e.selfBitsBadge.nextBits-e.selfBitsBadge.totalBits},"Bits--BalanceFooter")));var n=Object(c.d)("{bitsGem} Log in to see your Bits balance",{bitsGem:s.createElement(E.a,{count:100,withImage:!0,bitsConfig:e.bitsConfig,themeOverride:N.a.Dark})},"Bits--BalanceFooter");return void 0!==e.balance&&null!==e.balance&&(n=Object(c.d)("You have {currentBits}",{currentBits:s.createElement(E.a,{count:e.balance,withImage:!0,withText:!0,bitsConfig:e.bitsConfig,themeOverride:N.a.Dark})},"Bits--BalanceFooter")),s.createElement(v.fb,{flexGrow:1,padding:1,className:"bits-balance-footer"},t,s.createElement(v.fb,{display:v.Da.Flex,flexGrow:1,alignItems:v.i.Center,justifyContent:v.eb.Between},s.createElement("div",null,n),(void 0===e.showBuyButton||void 0!==e.showBuyButton&&e.showBuyButton)&&s.createElement(v.C,{disabled:void 0===e.balance||void 0!==e.balance&&e.balance>I.h,onClick:e.onClickGetBits,"data-test-selector":"get-bits-button","data-a-target":"get-bits-button"},Object(c.d)("Get Bits","Bits--BalanceFooter"))))},J=n("jv9u"),Z=n("wUQP"),ee=function(e){return s.createElement(v.fb,{display:v.Da.Flex,flexGrow:1,flexDirection:v.Ga.Column,justifyContent:v.eb.Center,alignItems:v.i.Center,padding:1},s.createElement(v.fb,{padding:{top:1}},s.createElement(v.Ca,{type:v.gc.H4,color:v.R.Link,bold:!0},Object(c.d)("Cheer to support Direct Relief","Bits--CharityCheerIntro"))),s.createElement(v.Ca,null,Object(c.d)("Cheer with the Charity Cheermote or #charity and we'll donate $0.20 for every 100 Bits to Direct Relief, PLUS you'll unlock a custom charity chat badge. Available December 12 - 27.","Bits--CharityCheerIntro")),s.createElement(v.Ca,null,Object(c.d)("<x:link>Learn more</x:link>",{"x:link":function(e){return s.createElement(v.Aa,{targetBlank:!0,linkTo:"https://link.twitch.tv/blizzardofbits"},e)}},"Bits--CharityCheerIntro")),s.createElement(v.fb,{padding:{top:1,bottom:1}},s.createElement("a",{href:"#",onClick:e.onClickHelp,"data-test-selector":"help-link"},Object(c.d)("How do I cheer?","Bits--CharityCheerIntro"))))},te=n("dx/T"),ne=function(e){return s.createElement(v.fb,{display:v.Da.Flex,flexGrow:1,flexDirection:v.Ga.Column,justifyContent:v.eb.Center,alignItems:v.i.Center,padding:1},s.createElement(v.fb,{padding:{top:2,bottom:2}},s.createElement(v.Ca,{type:v.gc.H5,color:v.R.Link,bold:!0},Object(c.d)("Cheering Supports Your Streamer!","Bits--CheermoteIntro"))),s.createElement(v.Ca,null,Object(c.d)("Select a Cheermote to start your Cheer","Bits--CheermoteIntro")),s.createElement(v.fb,{padding:{top:2,bottom:1}},s.createElement("a",{href:"#",onClick:e.onClickHelp,"data-test-selector":"help-link"},Object(c.d)("How do I cheer?","Bits--CheermoteIntro"))))},ie=(n("Aa/l"),function(e){var t=null;return e.minToCheer>1&&(t=s.createElement(v.Ca,{"data-test-selector":"min-to-cheer-selector",color:v.R.Alt2,italic:!0},Object(c.d)("This channel has a Cheer minimum of {minToCheer} Bits",{minToCheer:e.minToCheer},"Bits--CheermoteTierIntro"))),s.createElement(v.fb,{display:v.Da.Flex,flexGrow:1,flexDirection:v.Ga.Column,alignItems:v.i.Center,justifyContent:v.eb.Center,padding:1,className:"cheermote-tier-intro"},s.createElement(v.fb,{padding:{x:4},margin:{bottom:1}},s.createElement(v.Ca,{color:v.R.Alt2},Object(c.d)("Cheermotes have multiple tiers, rollover below to see each one!","Bits--CheermoteTierIntro"))),t)}),re=n("4VQm"),ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return this.props.event,null},t}(s.Component);n("H0r1");!function(e){e.DefaultPendingCheerMessage="default-pending-cheer-message-selector",e.EventReminder="event-reminder-selector",e.InlineError="inline-error",e.FullError="full-error",e.GhostIcon="ghost-icon"}(Y||(Y={}));var oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={inlineError:!1,fullError:!1},t}return o.__extends(t,e),t.prototype.render=function(){var e;if(this.props.prefixes&&1===this.props.prefixes.length){var t=this.props.prefixes[0].alt;t&&(e=s.createElement(v.fb,{padding:{top:2}},s.createElement(x.a,{prefix:t,amount:this.props.amount>I.j?I.j:this.props.amount,bitsConfig:this.props.bitsConfig,showImage:!0,showAmount:!0})))}else if(this.props.prefixes)e=s.createElement(v.fb,{margin:{top:1}},s.createElement(re.b,{className:"pending-cheer__scroll-container"},s.createElement(A,{prefixes:this.props.prefixes,bitsConfig:this.props.bitsConfig})));else{var n=Object(c.d)("You are using a total of {totalBits} Bits to cheer in {channelName}!",{totalBits:s.createElement("strong",null,this.props.amount),channelName:this.props.channelDisplayName},"Bits--PendingCheer");e=s.createElement(v.fb,{"data-test-selector":Y.DefaultPendingCheerMessage,padding:{top:2,x:5}},s.createElement(v.Ca,{color:v.R.Alt2,"data-a-target":"total-bits-message"},n))}var i=null;this.props.prefixes&&this.props.sponsoredCampaign&&this.props.sponsoredCampaignPrefix&&(i=s.createElement(B,{prefixes:this.props.prefixes,sponsoredCampaign:this.props.sponsoredCampaign,sponsoredCampaignPrefix:this.props.sponsoredCampaignPrefix,sponsoredBitsBonus:this.props.sponsoredBitsBonus}));var r=H({minPerEmote:this.props.minPerEmote,smallestCheermote:this.props.smallestCheermote,bitsSendHasError:this.props.bitsSendHasError,bitsSendErrorCode:this.props.bitsSendErrorCode,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid}),a=G({minToCheer:this.props.minToCheer,largestCheermote:this.props.largestCheermote,bitsSendHasError:this.props.bitsSendHasError,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsConfig:this.props.bitsConfig,bitsBalance:this.props.bitsBalance,amount:this.props.amount,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid});r||a||this.props.onCheerInvalid(void 0);var o=s.createElement(x.a,{amount:this.props.amount+this.props.bonusBits,prefix:I.f,bitsConfig:this.props.bitsConfig,display:v.Da.Inline,showImage:!1,showAmount:!0,size:x.b.Medium}),l=[s.createElement(v.Ob,{key:"cheering-total-bits",background:v.u.Base},s.createElement(v.Ca,{fontSize:v.Ia.Size4,bold:!0},Object(c.d)("Cheering {totalBits} Bits",{totalBits:o},"Bits--PendingCheer")))];this.props.isAnonymous&&(l=[s.createElement(v.Ob,{key:"ghost-icon",display:v.Da.Flex,alignItems:v.i.Center,margin:{right:.5}},s.createElement(v.Cb,{"data-test-selector":Y.GhostIcon,asset:v.Db.Ghost}))].concat(l));return s.createElement(v.fb,null,s.createElement(v.fb,{display:v.Da.Flex,flexDirection:v.Ga.Column,alignItems:v.i.Center,padding:1,className:"pending-cheer"},s.createElement(v.Xa,{display:v.Da.Flex,alignItems:v.i.Center},s.createElement(v.rc,{transitionType:v.sc.Fade},l)),!r&&e,!r&&!a&&i&&s.createElement(v.fb,{padding:{top:1}},i),!r&&a&&s.createElement(v.Ob,{"data-test-selector":Y.InlineError,padding:{top:1},color:v.R.Error},a),r&&s.createElement(v.fb,{"data-test-selector":Y.FullError,padding:{top:3,x:3}},r)),!r&&!a&&s.createElement(ae,{event:this.props.event,amount:this.props.amount,"data-test-selector":Y.EventReminder}))},t}(s.PureComponent),se=n("x1M1"),le=(n("zmH+"),{themed:!0,dark:{"1x":I.b+"/dark/animated/promo/intro.gif"},light:{"1x":I.b+"/light/animated/promo/intro.gif"}}),ce=function(){return s.createElement(v.fb,{display:v.Da.Flex,flexDirection:v.Ga.Column,alignItems:v.i.Center,justifyContent:v.eb.Center,flexGrow:1,className:"bits-sending"},s.createElement(v.fb,{padding:{bottom:1}},s.createElement(se.a,{sources:le})),s.createElement(v.Ca,{italic:!0},Object(c.d)("Your Cheer is currently processing.","Bits--SendingBits")))};function de(e){var t={maximumFractionDigits:1};return e<1e4?Object(c.f)(e,t):e<1e5?Object(c.g)(100*Math.floor(e/100),t):e<1e6?Object(c.g)(1e3*Math.floor(e/1e3),t):Object(c.g)(1e5*Math.floor(e/1e5),t)}n("Yr1V");var ue,me=function(e){var t=de(e.sponsorCampaign.bitsUsed||0),n=de(e.sponsorCampaign.bitsTotal||0),i=e.sponsorCampaign.bitsUsed&&e.sponsorCampaign.bitsTotal?e.sponsorCampaign.bitsUsed/e.sponsorCampaign.bitsTotal*100:0;return s.createElement(v.Ob,{background:v.u.AccentAlt2,color:v.R.Overlay,display:v.Da.Flex,flexGrow:1,flexDirection:v.Ga.Column,position:v.tb.Relative,justifyContent:v.eb.Center,alignItems:v.i.Center,padding:1},s.createElement(v.fb,{padding:{top:1,bottom:1}},s.createElement(v.Ca,{type:v.gc.H5,bold:!0},Object(c.d)("Give more Bits to this streamer!","Bits--SponsorIntro"))),s.createElement(v.fb,{display:v.Da.Flex,flexDirection:v.Ga.Row,fullWidth:!0,padding:{bottom:1}},s.createElement(v.Xa,{padding:{right:1}},s.createElement(v.Y,{src:e.sponsorCampaign.brandImageURL,alt:e.sponsorCampaign.brandName})),s.createElement(v.fb,{display:v.Da.Flex,flexDirection:v.Ga.Column,flexGrow:1},s.createElement(v.Xa,{alignSelf:v.j.Baseline},s.createElement(v.Ca,null,Object(c.d)("{brandName} Bits",{brandName:e.sponsorCampaign.brandName},"Bits--SponsorIntro"))),s.createElement(v.wb,{value:i,mask:!0}),s.createElement(v.fb,{display:v.Da.Flex,flexDirection:v.Ga.Row,justifyContent:v.eb.Between},s.createElement(v.Ca,{fontSize:v.Ia.Size7},Object(c.d)("{bitsUsed} Used",{bitsUsed:t},"Bits--SponsorIntro")),s.createElement(v.Ca,{fontSize:v.Ia.Size7},Object(c.d)("{totalBits}",{totalBits:n},"Bits--SponsorIntro"))))),s.createElement(v.Ca,{fontSize:v.Ia.Size7},Object(c.d)("The {brandName} Cheermote gives {sponsorPercentage}% bonus Bits when you Cheer {minimumSponsorBits} or more!",{minimumSponsorBits:e.sponsorCampaign.thresholds[0].minimumBits,brandName:e.sponsorCampaign.brandName,sponsorPercentage:100*e.sponsorCampaign.thresholds[0].matchedPercent},"Bits--SponsorIntro")),s.createElement(v.Ob,{background:v.u.AccentAlt2,position:v.tb.Absolute,className:"sponsored-cheermote__tail"}))},pe=(n("u0cu"),function(e){var t=Object(c.d)("You are using {totalBits} Bits to cheer in {channelName}'s chat.",{totalBits:e.totalBits,channelName:e.channelDisplayName},"Bits--UndoPrompt"),n=null;if(e.prefixes&&e.prefixes.length>1)n=s.createElement(re.b,{className:"bits-undo-prompt__scroll-container"},s.createElement(v.fb,{margin:{top:1}},s.createElement(A,{prefixes:e.prefixes,bitsConfig:e.bitsConfig})));else{var i=e.prefixes[0].alt;i&&(n=s.createElement(v.fb,{padding:{bottom:1}},s.createElement(x.a,{prefix:i,amount:e.totalBits,bitsConfig:e.bitsConfig,showAmount:!0,showImage:!0})))}return s.createElement(v.fb,{display:v.Da.Flex,flexDirection:v.Ga.Column,alignItems:v.i.Center,justifyContent:v.eb.Center,flexGrow:1,padding:1,className:"bits-undo-prompt"},n,s.createElement(v.Ca,null,t))}),he=function(){return s.createElement(v.fb,{className:"hgg-2018-introduction"},s.createElement(v.fb,{padding:{top:1}},s.createElement(v.Ca,{fontSize:v.Ia.Size5,bold:!0},Object(c.d)("Cheer with Bits and unlock loot!","HGG2018Introduction"))),s.createElement(v.fb,{fullWidth:!0,display:v.Da.Flex,flexDirection:v.Ga.Column,alignContent:v.h.Stretch},s.createElement(v.Y,{className:"hgg-2018-introduction__banner-image",src:I.c+"/hearthstone2018/marketing/bitscardbanner.png",srcSet:{"2x":I.c+"/hearthstone2018/marketing/bitscardbanner.png"},alt:Object(c.d)("Hearthstone Global Games","HGG2018Introduction")})),s.createElement(v.fb,{padding:{x:2,top:1,bottom:.5}},s.createElement(v.Ca,null,Object(c.d)("Unlock in-game loot and Twitch emotes when you Cheer with Bits to support your favorite team.","HGG2018Introduction"))),s.createElement(v.fb,{padding:{bottom:1}},s.createElement(v.Aa,{to:"https://watch.twitch.tv/HGGCheer",targetBlank:!0,hoverUnderlineNone:!1},Object(c.d)("Details","HGG2018Introduction"))))},ge=(n("qKeE"),function(){return s.createElement(v.fb,{className:"hgc-2018-introduction"},s.createElement(v.fb,{padding:{top:2,bottom:1}},s.createElement(v.Ca,{fontSize:v.Ia.Size5,bold:!0},Object(c.d)("Cheer with Bits and unlock loot!","HGC2018Introduction"))),s.createElement(v.fb,{className:"hgc-2018-introduction__banner-background",padding:{top:1}},s.createElement(v.Xa,{position:v.tb.Absolute,attachRight:!0,attachLeft:!0,margin:"auto"},s.createElement(v.Y,{className:"hgc-2018-introduction__banner-image",src:I.c+"/hgc2018/hgc-logo/1x.png",srcSet:{"2x":I.c+"/hgc2018/hgc-logo/2x.png"},alt:Object(c.d)("Heroes of the Storm Global Championship","HGC2018Introduction")}))),s.createElement(v.fb,{padding:{x:2,top:1,bottom:.5}},s.createElement(v.Ca,null,Object(c.d)("Unlock in-game loot and Twitch emotes when you Cheer with Bits to support your favorite team.","HGC2018Introduction"))),s.createElement(v.fb,{padding:{bottom:1}},s.createElement(v.Aa,{to:"https://link.twitch.tv/hgccheer2018",targetBlank:!0,hoverUnderlineNone:!1},Object(c.d)("Details","HGC2018Introduction"))))}),fe=(n("TTKc"),function(){return s.createElement(v.fb,{className:"owl-2018-introduction"},s.createElement(v.fb,{padding:{top:2,bottom:1}},s.createElement(v.Ca,{fontSize:v.Ia.Size5,bold:!0},Object(c.d)("Cheer with Bits and unlock loot!","OWL2018Introduction"))),s.createElement(v.fb,{className:"owl-2018-introduction__banner-background",padding:{top:1}},s.createElement("img",{className:"owl-2018-introduction__banner-image",src:I.c+"/owl-2017/overwatch-wide.png"})),s.createElement(v.fb,{padding:{x:2,top:1,bottom:.5}},s.createElement(v.Ca,null,Object(c.d)("Unlock an emote set by cheering 250 Bits or more! Cheer 500 Bits or more and you’ll unlock a second set and share emotes with Chat!","OWL2018Introduction"))),s.createElement(v.fb,{padding:{bottom:1}},s.createElement(v.Aa,{to:"http://link.twitch.tv/owl-drops-onsite-bitscard-blogus",targetBlank:!0,hoverUnderlineNone:!1},Object(c.d)("Details","OWL2018Introduction"))))});n("I8wU");!function(e){e.Container="lazy-carousel-container",e.Prev="lazy-carousel-prev-button",e.Next="lazy-carousel-next-button",e.NavDot="lazy-carousel-nav-dot",e.NavDotContainer="lazy-carousel-nav-dot-container",e.Animation="lazy-carousel-animation-container"}(ue||(ue={}));var be,ve=[{bitsAmount:300,gifts:10,level:1},{bitsAmount:500,gifts:20,level:2},{bitsAmount:1e3,gifts:50,level:3},{bitsAmount:5e3,gifts:300,level:4}],ke=[{src:"https://static-cdn.jtvnw.net/emoticons/v1/1862838/3.0",emoteString:"OWL2019vinyl"},{src:"https://static-cdn.jtvnw.net/emoticons/v1/1862840/3.0",emoteString:"OWL2019eyes"},{src:"https://static-cdn.jtvnw.net/emoticons/v1/1862827/3.0",emoteString:"OWL2019punch"},{src:"https://static-cdn.jtvnw.net/emoticons/v1/1862837/3.0",emoteString:"OWL2019hungry"},{src:"https://static-cdn.jtvnw.net/emoticons/v1/1862830/3.0",emoteString:"OWL2019snowball"}],Ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currIndex:0},t.renderMegaCheerLevels=ve.map(function(e){return s.createElement(v.fb,{key:"MegaGifterNotificationCard-"+e.level,padding:.5,display:v.Da.Flex,flexDirection:v.Ga.Column,alignItems:v.i.Center},s.createElement(v.fb,{className:"owl-2019-introduction__icon",padding:{bottom:.5}},t.renderLevelIcon(e.level)),s.createElement(v.Ca,{bold:!0,color:v.R.Link},Object(c.d)("{gifts} Gifts",{gifts:e.gifts},"OWL2019BitsIntroduction")),s.createElement(v.fb,{display:v.Da.Flex,alignItems:v.i.Center,justifyContent:v.eb.Center,padding:{top:.5}},s.createElement(v.Cb,{asset:v.Db.Bits,width:14,height:14}),s.createElement(v.Ca,{type:v.gc.Span},Object(c.f)(e.bitsAmount))))}),t.renderOwlEmotes=ke.map(function(e){return s.createElement(v.Y,{key:e.emoteString,className:"owl-2019-introduction__emote",src:e.src,srcSet:{"112w":e.src},sizes:[{size:"28px"}],alt:e.emoteString})}),t}return o.__extends(t,e),t.prototype.render=function(){return s.createElement(v.fb,null,s.createElement(v.fb,{className:"owl-2019-introduction__info",padding:{top:1}},s.createElement(v.Ca,{fontSize:v.Ia.Size5,bold:!0,color:v.R.Link},Object(c.d)("Introducing: MegaCheer","OWL2019BitsIntroduction")),s.createElement(v.fb,{padding:{x:1,top:.5,bottom:1}},s.createElement(v.Ca,null,Object(c.d)("Cheer Bits in the amounts below to initiate a MegaCheer. Each MegaCheer gets you 2 exclusive emotes (35+ available) and gifts 1 randomly to multiple viewers in Chat.","OWL2019BitsIntroduction")))),s.createElement(v.fb,{display:v.Da.Flex,justifyContent:v.eb.Center,flexDirection:v.Ga.Row,padding:{bottom:1}},this.renderOwlEmotes),s.createElement(v.fb,{padding:{bottom:.5},display:v.Da.Flex,flexDirection:v.Ga.Row,justifyContent:v.eb.Around},this.renderMegaCheerLevels))},t.prototype.renderLevelIcon=function(e){return s.createElement("img",{src:I.c+"/owl-2019/bits-card/MegaCheer-icon-0"+e+".png",alt:Object(c.d)("MegaCheer level {level}",{level:e},"OWL2019BitsIntroduction")})},t}(s.Component);!function(e){e.CratesChristmas="CratesChristmas",e.OWL2018="owl2018",e.HGC2018="hgc2018",e.WORLDCUP2018="worldcup2018",e.HGG2018="hearthstone2018",e.HGG2018TEST="hearthstone2018-test",e.OWL2019TEST="owl2019-test",e.OWL2019="owl2019"}(be||(be={}));var ye=function(e){switch(e.event){case be.HGC2018:return s.createElement(ge,null);case be.OWL2018:return s.createElement(fe,null);case be.HGG2018:case be.HGG2018TEST:return s.createElement(he,null);case be.OWL2019TEST:case be.OWL2019:return s.createElement(Ce,null);default:return s.createElement(ne,{onClickHelp:e.onClickHelp})}},Se=function(e){if(e.isSending)return e.totalBits<I.l?s.createElement(ce,null):s.createElement(pe,{bitsConfig:e.bitsConfig,channelDisplayName:e.displayName,prefixes:e.currentCheers,totalBits:e.totalBits});if(e.hoveredCheermote)return s.createElement(F,{event:e.event,tournament:e.tournament,bitsConfig:e.bitsConfig,prefix:e.hoveredCheermote,tier:e.hoveredTier});var t=Ee(e.bitsConfig),n=Ne(e.bitsConfig),i=c.b.get(I.o,Z.b.Off);if(e.totalBits)return s.createElement(oe,{bitsConfig:e.bitsConfig,prefixes:e.currentCheers,amount:e.totalBits,bonusBits:e.bonusBits,channelDisplayName:e.displayName,bitsBalance:e.bitsBalance,largestCheermote:e.largestCheermote,smallestCheermote:e.smallestCheermote,minPerEmote:e.emoteMinimumBits,minToCheer:e.cheerMinimumBits,event:e.event,sponsoredCampaign:t,sponsoredCampaignPrefix:n,sponsoredBitsBonus:e.bonusBits,bitsSendErrorCode:e.bitsSendErrorCode,bitsSendHasError:e.bitsSendHasError,chatMessage:e.chatMessage,onCheerInvalid:e.onCheerInvalid,isAnonymous:e.isAnonymous});if(e.helpRequested)return s.createElement(te.a,null);var r=c.b.get(I.d,Z.b.Off);if(!e.event||e.event!==be.OWL2019TEST&&e.event!==be.OWL2019){if(e.chosenCheermote){var a=e.cheerMinimumBits;return s.createElement(ie,{minToCheer:a})}return e.event?s.createElement(ye,{event:e.event,onClickHelp:e.showHelp}):t&&(i===Z.b.On||i===Z.b.StaffOnly&&e.isStaff)?s.createElement(me,{sponsorCampaign:t}):r===Z.b.On?s.createElement(ee,{onClickHelp:e.showHelp}):s.createElement(ne,{onClickHelp:e.showHelp})}return s.createElement(ye,{event:e.event,onClickHelp:e.showHelp})};function Ee(e){var t=null;return e.orderedActions.forEach(function(e){e.campaign&&(t=e.campaign)}),t}function Ne(e){var t="";return e.orderedActions.forEach(function(e){e.campaign&&(t=e.prefix)}),t}var _e=n("r/lI"),De=(n("KO0n"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onTierSelectionExit=function(){t.setState({selectedCheermote:void 0})},t.onCheermoteClick=function(e){t.setState({selectedCheermote:e})},t}return o.__extends(t,e),t.prototype.render=function(){if(this.props.data.loading&&!this.props.data.error)return s.createElement(J.a,null);if(this.props.data.error)return s.createElement(S,null);var e=this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.settings.cheerMinimumBits,t=this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.settings.emoteMinimumBits,n=!!(this.props.bitsBalance&&null!==e&&this.props.bitsBalance>=e),i=Ee(this.props.bitsConfig),r=Ne(this.props.bitsConfig);return s.createElement(C,{onUserClose:this.props.handleExit},this.state.selectedCheermote&&s.createElement(K,{chosenCheermote:this.state.selectedCheermote,bitsConfig:this.props.bitsConfig,canCheerInChannel:n,minCheerAmount:e||1,minPerEmote:t||1,channelName:this.props.channelLogin,onClose:this.props.handleExit,currentCheers:this.props.currentCheers,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,chatMessage:this.props.chatMessage,sponsoredCampaign:i,sponsoredCampaignPrefix:r,bitsBalance:this.props.bitsBalance||0,onClickCheermote:this.props.onClickCheermote,onBack:this.onTierSelectionExit,onCheerInvalid:this.props.onCheerInvalid}),!this.state.selectedCheermote&&s.createElement(L,{bitsConfig:this.props.bitsConfig,canCheerInChannel:n,minCheerAmount:e||1,channelName:this.props.channelLogin,onCheermoteClick:this.onCheermoteClick,onShowAllCheermotes:this.props.handleExit}),s.createElement(v.fb,{fullWidth:!0,className:"first-cheer-builder__footer"},s.createElement(X,{bitsConfig:this.props.bitsConfig,balance:this.props.bitsBalance||0,showBuyButton:!n,onClickGetBits:this.props.handleClickBuy})))},t}(s.PureComponent)),we=Object(l.compose)(Object(d.a)(_e,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}}))(De),Oe=function(e){return s.createElement(v.fb,{flexGrow:1},s.createElement(v.fb,{className:"undo-prompt__footer",padding:1,display:v.Da.Flex,justifyContent:v.eb.Between},s.createElement(v.C,{onClick:e.onCancel||void 0,type:v.I.Hollow,overlay:!0,"data-test-selector":"cancel-button"},Object(c.d)("Cancel","Bits--UndoPrompt")),s.createElement(v.C,{onClick:e.onConfirm||void 0,"data-test-selector":"confirm-button"},Object(c.d)("Send","Bits--UndoPrompt"))),s.createElement(v.wb,{animationDirection:v.xb.Down,size:v.yb.ExtraSmall,animationDuration:I.q.UNDO_PROMPT_DURATION/1e3}))},Ie=function(e){return e.event,s.createElement(X,{bitsConfig:e.bitsConfig,onClickGetBits:e.onClickGetBits,balance:e.balance,selfBitsBadge:e.selfBitsBadge})},Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return this.props.isSending?this.props.totalBits>=I.l?s.createElement(Oe,{onCancel:this.props.onCancelSend,onConfirm:this.props.onConfirmSend}):null:this.props.event?s.createElement(Ie,{event:this.props.event,selfBitsBadge:this.props.userSelfBitsBadge,bitsConfig:this.props.bitsConfig,onClickGetBits:this.props.handleClickBuy,balance:this.props.bitsBalance}):s.createElement(X,{selfBitsBadge:this.props.userSelfBitsBadge,bitsConfig:this.props.bitsConfig,onClickGetBits:this.props.handleClickBuy,balance:this.props.bitsBalance})},t}(s.PureComponent),Me=n("cw0r"),Le=(n("AcdH"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick(n)},t}return o.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.bitsConfig.orderedActions.filter(function(e){return e.type!==g.w.THIRD_PARTY&&e.type!==g.w.DISPLAY_ONLY}).map(function(e){var t=e.indexedTiers.get(I.g);return t?{imgSrc:t.indexedImages.LIGHT.static.get(2),imgSrcDark:t.indexedImages.DARK.static.get(2),key:e.prefix}:null}).map(function(t,n){return t&&t.key?s.createElement(v.Xa,{key:t.key,margin:{bottom:1}},s.createElement("li",{className:"cheermote-prefix-selector__cheermote"},s.createElement("button",{className:"cheermote-prefix-selector__item-button","data-key":t.key,onMouseEnter:e.handleCheermoteHover,onMouseLeave:e.handleCheermoteUnhover,onClick:e.handleCheermoteClick,"data-a-target":"cheermote-"+t.key.replace(":","")},s.createElement("img",{alt:t.key,src:e.props.darkModeEnabled?t.imgSrcDark:t.imgSrc})))):s.createElement("li",{key:"null-cheermote-"+n},s.createElement("button",{className:"cheermote-prefix-selector__item-button",disabled:!0},s.createElement("div",{className:"cheermote-prefix-selector__placeholder"})))}),n=s.createElement(v.Xa,{className:"cheermote-prefix-selector__cheermotes",display:v.Da.Flex,flexWrap:v.Ha.Wrap,flexDirection:v.Ga.Row,justifyContent:v.eb.Start,alignItems:v.i.End,padding:{bottom:1}},s.createElement("ul",null,t));return s.createElement(v.fb,{flexGrow:1,overflow:v.mb.Hidden,className:"cheermote-prefix-selector"},s.createElement(R.b,null,n))},t}(s.PureComponent));var Re=Object(r.connect)(function(e){return{darkModeEnabled:Object(_.a)(e)===N.a.Dark}})(Le),xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAnonymousCheckBoxChange=function(e){t.props.handleAnonymousToggle(e.currentTarget.checked)},t}return o.__extends(t,e),t.prototype.render=function(){if(this.props.helpRequested&&!this.props.currentCheers.length)return null;var e=null;return e=this.props.chosenCheermote?s.createElement(z,{bitsConfig:this.props.bitsConfig,chosenCheermote:this.props.chosenCheermote,onHover:this.props.handleTierHover,onHoverLeave:this.props.handleUnhover,onClick:this.props.handleTierClick,onClose:this.props.clearChosenCheermote}):s.createElement(Re,{bitsConfig:this.props.bitsConfig,onHover:this.props.handleCheermoteHover,onHoverLeave:this.props.handleUnhover,onClick:this.props.handleCheermoteClick}),s.createElement(v.fb,null,!this.props.event&&s.createElement(Me.a,{name:"bits_project_marley"},s.createElement(v.fb,{padding:{left:1,top:1}},s.createElement(v.jc,{label:Object(c.d)("Your name will appear as AnAnonymousCheerer and custom Cheer messaging will be turned off.","CheermotePrefixSelector"),direction:v.lc.Bottom,align:v.kc.Left,width:275},s.createElement(v.Q,{label:Object(c.d)("Cheer Anonymously","CheermotePrefixSelector"),checked:this.props.isAnonymous,onChange:this.onAnonymousCheckBoxChange})))),e)},t}(s.PureComponent),Fe=n("RiD7"),Ae=n("UajW"),je=(n("c+1r"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={chosenCheermote:null,hoveredCheermote:null,hoveredTier:0,totalBits:0,bonusBits:0,largestCheermote:0,smallestCheermote:0},t.unhoverTimeout=0,t.handleTierHover=function(e){clearTimeout(t.unhoverTimeout);var n=e.split(":");n.length<2||(t.setState({hoveredTier:+n[1],hoveredCheermote:n[0]}),t.props.trackBitsCardInteraction(Fe.c.PreviewEmote,{actionType:Fe.a.Hover,emoteType:n[0],emoteLevel:+n[1]}))},t.handleUnhover=function(){t.unhoverTimeout=setTimeout(t.clearHovered,500)},t.clearHovered=function(){t.setState({hoveredTier:0,hoveredCheermote:null})},t.handleTierClick=function(e){t.props.onClickCheermote(e.split(":").join(""))},t.handleCheermoteHover=function(e){clearTimeout(t.unhoverTimeout),t.setState({hoveredCheermote:e,hoveredTier:0}),t.props.trackBitsCardInteraction(Fe.c.PreviewEmote,{actionType:Fe.a.Hover,emoteType:e,emoteLevel:100})},t.handleCheermoteClick=function(e){t.setState({chosenCheermote:e,hoveredCheermote:null,hoveredTier:0})},t.clearChosenCheermote=function(){t.setState({chosenCheermote:null,hoveredCheermote:null,hoveredTier:0})},t}return o.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this.props.visible||!!this.props.currentCheers.length,n=e.visible||!!e.currentCheers.length;if(t&&!n&&this.setState({chosenCheermote:null,hoveredCheermote:null,hoveredTier:0}),this.props.currentCheers!==e.currentCheers){var i=Object(Q.a)(e.currentCheers),r=i.total,a=i.bonus,o=i.largestCheermote,s=i.smallestCheermote;this.setState({totalBits:r,bonusBits:a,largestCheermote:o,smallestCheermote:s})}},t.prototype.componentDidMount=function(){var e=Object(Q.a)(this.props.currentCheers),t=e.total,n=e.bonus,i=e.largestCheermote,r=e.smallestCheermote;this.setState({totalBits:t,bonusBits:n,largestCheermote:i,smallestCheermote:r}),this.props.onMount&&this.props.onMount()},t.prototype.render=function(){var e=this.props,t=e.cheerMessageAutoModded,n=e.visible,i=e.currentCheers,r=e.data,a=e.bitsConfig,o=e.isSending,l=e.helpRequested,d=e.channelID,u=e.showHelp,m=e.isStaff,p=e.bitsSendErrorCode,h=e.bitsSendHasError,g=e.handleClickBuy,f=e.onCancelSend,b=e.onConfirmSend,k=e.chatMessage;if(t||!n&&!i.length)return null;if(!r||r.loading)return s.createElement(J.a,null);if(r.error||!a)return s.createElement(S,null);var C,y=this.props.helpRequested&&!this.props.currentCheers.length,E=null;return r.user.cheer.settings.event&&(E=r.user.cheer.settings.event.toLowerCase().replace("_","-")),y&&(C=s.createElement(v.fb,{position:v.tb.Absolute,padding:{left:.5,top:.5},attachLeft:!0,attachTop:!0},s.createElement(v.C,{onClick:this.props.closeHelp,"data-a-target":"bits-card-back-button",icon:v.Db.ChatSettingsBack,type:v.I.Text,size:v.G.Small},Object(c.d)("Back","BitsCard")))),s.createElement(s.Fragment,null,!o&&C,s.createElement(v.Ob,{className:"t-bits-card__contents",display:v.Da.Flex,flexGrow:0,flexDirection:v.Ga.Column,alignContent:v.h.Stretch,textAlign:v.cc.Center,borderBottom:!o,fullWidth:!0},s.createElement(Se,{bitsBalance:r.currentUser&&r.currentUser.bitsBalance,bitsConfig:a,cheerMinimumBits:r.user.cheer.settings.cheerMinimumBits,chosenCheermote:this.state.chosenCheermote,currentCheers:i,displayName:r.user.displayName,emoteMinimumBits:r.user.cheer.settings.emoteMinimumBits,event:E,helpRequested:l,hoveredCheermote:this.state.hoveredCheermote,hoveredTier:this.state.hoveredTier,isSending:o,largestCheermote:this.state.largestCheermote,smallestCheermote:this.state.smallestCheermote,totalBits:this.state.totalBits,bonusBits:this.state.bonusBits,tournament:r.user.tournament,channelID:d,showHelp:u,isStaff:m,isAnonymous:this.props.isAnonymous,bitsSendErrorCode:p,bitsSendHasError:h,chatMessage:k,onCheerInvalid:this.props.onCheerInvalid})),!o&&s.createElement(xe,{bitsConfig:a,chosenCheermote:this.state.chosenCheermote,currentCheers:i,event:E,helpRequested:l,isAnonymous:this.props.isAnonymous,handleCheermoteClick:this.handleCheermoteClick,handleCheermoteHover:this.handleCheermoteHover,handleTierClick:this.handleTierClick,handleTierHover:this.handleTierHover,handleUnhover:this.handleUnhover,handleAnonymousToggle:this.props.onAnonymousToggle,clearChosenCheermote:this.clearChosenCheermote}),s.createElement(v.fb,{className:"t-bits-card__footer",fullWidth:!0,display:v.Da.Flex},s.createElement(Te,{bitsBalance:r.currentUser&&r.currentUser.bitsBalance,bitsConfig:a,event:E,isSending:o,totalBits:this.state.totalBits,userSelfBitsBadge:r.user.self&&r.user.self.bitsBadge,handleClickBuy:g,onCancelSend:f,onConfirmSend:b})))},t}(s.Component)),Ue=Object(l.compose)(Object(u.a)(function(e){return{query:Ae,variables:{name:e.channelID},topic:Object(h.d)(e.channelID||""),type:m.PubsubMessageType.BitsChannelSettingsEvent,mutator:function(e,t){if(t)return void 0!==e.updates.minimum_bits&&(t.user.cheer.settings.cheerMinimumBits=e.updates.minimum_bits),void 0!==e.updates.minimum_bits_emote&&(t.user.cheer.settings.emoteMinimumBits=e.updates.minimum_bits_emote),t},skip:!e.channelID}}),Object(d.a)(Ae,{name:"data",skip:function(e){return!e.channelID},options:function(e){return{variables:{name:e.channelID||"",withCheerBombEventEnabled:!1},fetchPolicy:"cache-and-network"}}}))(je),Be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return s.createElement(v.fb,{padding:1,textAlign:v.cc.Center},s.createElement(v.Ca,{color:v.R.Error,italic:!0},Object(c.d)("You cannot Cheer in your own channel.","BitsCard")))},t}(s.PureComponent),Pe=n("opIq"),Ve=n("bYOw"),He=n("H31v"),Ge=n("8nkl"),We=n("ao1a"),qe=n("Gcqi"),ze=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={helpRequested:!1,buyingBits:!1,backTargetsIntro:!1},t.lastRefetchTime=0,t.showHelp=function(e){e.preventDefault(),t.setState({helpRequested:!0}),t.props.trackBitsCardInteraction(Fe.c.NewUserHelpRequested)},t.closeHelp=function(){return t.setState({helpRequested:!1})},t.handleClickBuy=function(){t.setState({buyingBits:!0}),t.props.trackBitsCardInteraction(Fe.c.BuyMain)},t.handleCloseBuy=function(){return t.setState({buyingBits:!1})},t.handleSkip=function(){t.closeHelp(),t.mutateFirstCheerTutorialState({hasAbandoned:!1,hasSkipped:!0}),t.props.trackBitsCardInteraction(Fe.c.NewUserSkipTutorial)},t.handleCloseIntro=function(){t.closeHelp(),t.props.currentCheers.length?t.mutateFirstCheerTutorialState({hasAbandoned:!1,hasSkipped:!0}):t.props.onUserClose(),t.props.trackBitsCardInteraction(Fe.c.NewUserCloseTutorial)},t.handleClickFirstTimePurchaseDiscount=function(){t.setState({buyingBits:!0,helpRequested:!1,backTargetsIntro:!0}),t.mutateFirstCheerTutorialState({hasAbandoned:!0,hasSkipped:!1}),t.props.trackBitsCardInteraction(Fe.c.NewUserFirstTimePurchaseDiscountClick)},t.handleBackFromBuy=function(){t.setState({helpRequested:t.state.backTargetsIntro,buyingBits:!1})},t.onMountBitsCardMain=function(){t.setState({backTargetsIntro:!1})},t.mutateFirstCheerTutorialState=function(e){return o.__awaiter(t,void 0,void 0,function(){var t,n,i,r,a,s,l;return o.__generator(this,function(d){switch(d.label){case 0:if(!(t=this.props.data&&this.props.data.currentUser))return[3,4];n=t.bitsUserSettings,i=t.id,r=n&&n.firstCheerTutorial||{hasAbandoned:!1,hasSkipped:!1},a={hasAbandoned:e.hasAbandoned,hasSkipped:e.hasSkipped},s={setBitsUserSettings:{__typename:"SetBitsUserSettingsPayload",currentUser:{__typename:"User",id:i||null,bitsUserSettings:{__typename:"BitsUserSettings",firstCheerTutorial:o.__assign({__typename:"FirstCheerTutorial"},r,a)}}}},d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.props.setBitsUserSettings(Object(p.b)({abandonedFirstCheerTutorial:e.hasAbandoned,skippedFirstCheerTutorial:e.hasSkipped},s))];case 2:return d.sent(),[3,4];case 3:return l=d.sent(),c.k.error(l,"Failed to set bits user settings."),[3,4];case 4:return[2]}})})},t}return o.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this.props.visible||!!this.props.currentCheers.length,n=e.visible||!!e.currentCheers.length;if(!t&&n){var i=Date.now();i-this.lastRefetchTime>1e3&&this.props.data&&e.data&&!e.data.loading&&(this.lastRefetchTime=i,e.data.refetch())}t&&!n&&this.setState({buyingBits:!1})},t.prototype.render=function(){if(this.props.cheerMessageAutoModded||!this.props.visible&&!this.props.currentCheers.length)return null;if(!this.props.data||this.props.data.loading)return s.createElement(C,{onUserClose:this.props.onUserClose},s.createElement(J.a,null));if(this.props.data.error||!this.props.bitsConfig)return s.createElement(C,{onUserClose:this.props.onUserClose},s.createElement(S,null));if(this.props.data.currentUser&&this.props.data.currentUser.login===this.props.channelLogin)return s.createElement(C,{onUserClose:this.props.onUserClose},s.createElement(Be,null));var e=this.props.data&&this.props.data.currentUser,t=e&&e.bitsUserState,n=e&&e.bitsUserSettings;if(Object(We.a)(t)){if(this.state.buyingBits)return s.createElement(C,{onUserClose:this.handleCloseBuy,closeDataATarget:"bits-buy-card-close-button"},s.createElement(Pe.a,{bitsConfig:this.props.bitsConfig,channelLogin:this.props.channelLogin,closeAllBits:this.props.onUserClose,onClose:this.handleCloseBuy,onBack:this.handleBackFromBuy,trackBitsCardInteraction:this.props.trackBitsCardInteraction,location:Fe.d.ChatTooltip,shouldShowNewUserCheerUX:!0}));if(Object(We.d)(t,n)||Object(We.a)(t)&&this.state.helpRequested)return s.createElement(C,{onUserClose:this.handleCloseIntro,closeDataATarget:"bits-intro-close-button"},s.createElement(v.fb,{padding:1},s.createElement(y.a,{onUserSkip:this.handleSkip,onUserClickFirstTimePurchaseDiscount:this.handleClickFirstTimePurchaseDiscount,trackBitsCardInteraction:this.props.trackBitsCardInteraction})))}return this.state.buyingBits?s.createElement(C,{onUserClose:this.handleCloseBuy,closeDataATarget:"bits-buy-card-close-button"},s.createElement(Pe.a,{bitsConfig:this.props.bitsConfig,channelLogin:this.props.channelLogin,closeAllBits:this.props.onUserClose,onClose:this.handleCloseBuy,trackBitsCardInteraction:this.props.trackBitsCardInteraction,location:Fe.d.ChatTooltip,size:Ve.b.Scrollview})):Object(We.b)(this.props.isStaff,t,n)?s.createElement(we,{bitsConfig:this.props.bitsConfig,channelLogin:this.props.channelLogin,currentCheers:this.props.currentCheers,bitsSendHasError:this.props.bitsSendHasError,bitsSendErrorCode:this.props.bitsSendErrorCode,chatMessage:this.props.chatMessage,onClickCheermote:this.props.onClickCheermote,bitsBalance:e&&e.bitsBalance,handleClickBuy:this.handleClickBuy,handleExit:this.handleSkip,onCheerInvalid:this.props.onCheerInvalid}):s.createElement(C,{onUserClose:this.props.currentCheers.length?void 0:this.props.onUserClose},s.createElement(Ue,{onMount:this.onMountBitsCardMain,bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,channelLogin:this.props.channelLogin,cheerMessageAutoModded:this.props.cheerMessageAutoModded,visible:this.props.visible,currentCheers:this.props.currentCheers,isSending:this.props.isSending,isStaff:this.props.isStaff,isAnonymous:this.props.isAnonymous,onClickCheermote:this.props.onClickCheermote,onCancelSend:this.props.onCancelSend,onConfirmSend:this.props.onConfirmSend,trackBitsCardInteraction:this.props.trackBitsCardInteraction,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,helpRequested:this.state.helpRequested,showHelp:this.showHelp,closeHelp:this.closeHelp,handleClickBuy:this.handleClickBuy,chatMessage:this.props.chatMessage,onCheerInvalid:this.props.onCheerInvalid,onAnonymousToggle:this.props.onAnonymousToggle}))},t}(s.Component),Qe=Object(l.compose)(Object(d.a)(qe,{name:"data",skip:function(e){return!e.channelID}}),Object(d.a)(Ge,{name:"setBitsUserSettings"}),Object(u.a)(function(e){return{query:qe,topic:e.user?Object(h.E)(e.user.id):"",type:m.PubsubMessageType.UserBitsFirstPurchase,skip:!e.user,mutator:function(t,n){return!n.currentUser||t.message_type!==He.b.FirstPurchase||e.user&&t.data.user_id!==e.user.id?n:(n.currentUser.bitsUserState===g.j.NEW_USER&&(n.currentUser.bitsUserState=g.j.ACQUIRED),n)}}}))(ze);var Ye=Object(r.connect)(function(e){return{user:Object(a.e)(e),isStaff:Object(a.g)(e)}})(Qe);n.d(t,"a",function(){return Ye})},s8Ou:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReportUserModal_ReportUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportContentInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportContent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentID"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:111}};n.loc.source={body:"mutation ReportUserModal_ReportUser($input: ReportContentInput!) {\nreportContent(input: $input) {\ncontentID\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},sAMt:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:62}};n.loc.source={body:"query ChatUser($login: String!) {\nuser(login: $login) {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},sLlB:function(e,t,n){"use strict";var i,r=n("/MKj"),a=n("fvjX"),o=n("5xw2"),s=n("OhOW"),l=n("mrSG"),c=n("q1tI"),d=n("wIs1"),u=n("/7QA"),m=n("vSJR"),p=n("8/mp"),h=n("HSqT"),g=n("2xye"),f=n("GnwI"),b=n("Ue10");n("S58p");!function(e){e.ClearAllButton="language-select-menu__clear-all-button"}(i||(i={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleLanguageChange=function(e){var n=e.currentTarget,i=n.parentElement&&n.parentElement.getAttribute("data-language-code");i&&(t.props.updateLanguagePreferences(i,n.checked),t.trackLanguageChange(i,n.checked))},t.renderDropdownContent=function(){return c.createElement(c.Fragment,null,c.createElement("div",{className:"language-select-menu__balloon"},c.createElement(p.b,null,c.createElement(b.fb,{padding:.5},Object(h.b)().map(t.renderLanguageOption)))),c.createElement(b.Ob,{background:b.u.Alt,borderTop:!0,className:"language-select-menu__footer"},c.createElement(b.C,{type:b.I.Text,onClick:t.props.clearLanguagePreferences,"data-a-target":"language-clear-all","data-test-selector":i.ClearAllButton},Object(u.d)("Clear all","LanguageSelectMenu"))))},t.renderLanguageOption=function(e){return c.createElement(b.fb,{padding:{x:1,y:.5},key:e.code},c.createElement(b.Q,{label:e.label,checked:t.props.languagePreferences.includes(e.code),"data-language-code":e.code,"data-a-target":"language-filter-"+e.code+"-checkbox",onChange:t.handleLanguageChange}))},t.renderButtonContent=function(){var e=t.props.languagePreferences.length,n=Object(u.d)("Language","LanguageSelectMenu");return c.createElement(b.fb,{display:b.Da.Flex},n,c.createElement(b.fb,{margin:{left:.5}},0!==e&&c.createElement(b.qb,{type:b.rb.Brand,label:e.toString()})))},t.trackLanguageChange=function(e,n){var i="";t.props.match&&t.props.match.params&&(i=decodeURIComponent(t.props.match.params.encodedCommunityName).toLowerCase()),u.q.tracking.track(g.SpadeEventType.LanguageFilterChange,{item_name:"language",item_value:e,item_action:n?"select":"deselect",game:i||null,open_click:!0})},t}return l.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return c.createElement(b.fb,{className:"language-select-menu"},c.createElement(m.a,{"data-a-target":"language-filter-dropdown",buttonLabel:this.renderButtonContent()},this.renderDropdownContent()))},t}(c.Component),k=Object(a.compose)(d.a,Object(f.withLatencyTracking)("LanguageSelectMenu"))(v);var C=Object(r.connect)(function(e){return{languagePreferences:Object(s.a)(e)}},function(e){return Object(a.bindActionCreators)({updateLanguagePreferences:o.c,clearLanguagePreferences:o.a},e)})(k);n.d(t,"a",function(){return C})},sMoq:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"VIPUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"GrantVIPInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"grantVIP"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"grantee"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:122}};n.loc.source={body:"mutation VIPUser($input: GrantVIPInput!){\ngrantVIP(input: $input) {\nchannel {\nid\n}\ngrantee {\nid\nlogin\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},sPFP:function(e,t,n){},sQmm:function(e,t,n){"use strict";var i=n("q1tI"),r=n("Ue10"),a=function(){return i.createElement(r.Ob,{display:r.Da.Flex,flexDirection:r.Ga.Row,border:!0,elevation:2,borderRadius:r.A.Medium,overflow:r.mb.Hidden},i.createElement(r.fb,{flexGrow:0,flexShrink:0},i.createElement(r.sb,{height:300,width:20})),i.createElement(r.fb,{flexGrow:1,flexShrink:1,display:r.Da.Flex,flexDirection:r.Ga.Column,padding:{left:1}},i.createElement(r.fb,{flexGrow:0,flexShrink:0,padding:{top:1}},i.createElement(r.sb,{height:20,width:500})),i.createElement(r.fb,{flexGrow:1,flexShrink:1,display:r.Da.Flex,flexDirection:r.Ga.Row},i.createElement(r.fb,{padding:{top:1,right:1,bottom:1}},i.createElement(r.sb,{height:200,width:300})),i.createElement(r.fb,{padding:1},i.createElement(r.sb,{height:200,width:300})),i.createElement(r.fb,{padding:1},i.createElement(r.sb,{height:200,width:300})),i.createElement(r.fb,{padding:1},i.createElement(r.sb,{height:200,width:300})),i.createElement(r.fb,{padding:1},i.createElement(r.sb,{height:200,width:300})),i.createElement(r.fb,{padding:1},i.createElement(r.sb,{height:200,width:300})))))};n.d(t,"a",function(){return o});var o=function(){return i.createElement(r.fb,null,i.createElement(r.fb,{padding:{bottom:1}},i.createElement(a,{key:1})),i.createElement(r.fb,{padding:{bottom:1}},i.createElement(a,{key:2})),i.createElement(r.fb,{padding:{bottom:1}},i.createElement(a,{key:3})),i.createElement(r.fb,{padding:{bottom:1}},i.createElement(a,{key:4})))}},sU0Q:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatCard_Video"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewThumbnailURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"90"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"51"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:162}};n.loc.source={body:"query VideoChatCard_Video($videoID: ID!) {\nvideo(id: $videoID) {\nid\ntitle\npreviewThumbnailURL(width: 90 height: 51)\npublishedAt\nowner {\nid\nlogin\ndisplayName\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},sbEw:function(e,t,n){},sblI:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("0Log"),r=n("ZtEv"),a=n("aF6k");i.ModerationActions.Ban,i.ModerationActions.Timeout,i.ModerationActions.Unban,i.ModerationActions.Untimeout;function o(e,t,n,i){return{type:r.b.Moderation,moderationType:e,id:Object(a.a)(t+"-mod"),userLogin:t,reason:n,duration:i}}},"sf7/":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o});var i="vodChat.video.CURRENT_VIDEO_CHANGED",r="vodChat.video.CURRENT_VIDEO_TIME_CHANGED",a=function(e){return{type:i,id:e}},o=function(e){return{type:r,updatedTime:e}}},tFCv:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("oJmH"),o=n("/MKj"),s=n("9C/b"),l=n("fvjX"),c=n("ZS2+"),d=n("/0dD"),u=n("SDEh"),m=n("edgk"),p=n("1/iK"),h=n("y5D0"),g=n("jZLd"),f=n("kRBY"),b=n("XDQu"),v=n("+pBb"),k=n("Tznh"),C=n("fezU"),y=n("r2Xj"),S=n("WytW"),E=n("F6GT"),N=n("x0gr"),_=c.a.wrap(function(){return Promise.all([n.e(0),n.e(224)]).then(n.bind(null,"8MX0"))},"ChatSettingsComponent"),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={editAppearance:!1,shouldMountChild:!1},t.handleSettingsToggle=function(e){t.setState({shouldMountChild:!0}),t.props.onToggle&&t.props.onToggle(e),t.state.editAppearance&&t.setState({editAppearance:!1}),e&&t.props.hideChatFilterSettings()},t.onEdit=function(){t.setState({editAppearance:!0})},t.onLeaveEdit=function(){t.setState({editAppearance:!1})},t.onDarkModeToggle=function(){var e=t.props.darkModeEnabled?d.a.Light:d.a.Dark;t.props.onThemeChanged(e,!t.props.isPopout),Object(N.a)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.darkModeEnabled,settingName:y.a.DarkMode})},t.onTimestampToggle=function(){Object(E.b)("showTimestamps",!t.props.showTimestamps),t.props.showTimestamps?t.props.onTimestampsDisable():t.props.onTimestampsEnable(),Object(N.a)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.showTimestamps,settingName:y.a.ShowTimestamps})},t.onHighContrastColorsToggle=function(){Object(E.b)("useHighContrastColors",!t.props.useHighContrastColors),t.props.useHighContrastColors?t.props.onUseHighContrastColorsDisable():t.props.onUseHighContrastColorsEnable(),Object(N.a)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.useHighContrastColors,settingName:y.a.UseHighContrastColors})},t.onChatHide=function(){t.props.onChatHide(),Object(N.a)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!0,settingName:y.a.HideChat})},t.onChatPopout=function(){t.props.isPopout||t.props.onChatHide();var e=window.open("/popout/"+t.props.channelLogin+"/chat?popout=","_blank","right=50,top=50,width=400,height=600,resizable=yes,scrollbars=no,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no");e&&!Object(u.a)()&&(e.focus(),Object(m.a)(e,function(){t.props.onChatUnhide()}))},t.onColorSelected=function(e){t.props.isLoggedIn?t.props.onChatCommand(Object(S.a)(e)):t.props.login()},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement(r.Fragment,null,r.createElement(_.Preload,null),r.createElement(R,{isShowingChatFilterSettings:this.props.isShowingChatFilterSettings,onToggle:this.handleSettingsToggle},this.state.shouldMountChild&&r.createElement(_,{authToken:this.props.authToken,darkModeEnabled:this.props.darkModeEnabled,editAppearance:this.state.editAppearance,isShowingChatFilterSettings:this.props.isShowingChatFilterSettings,showChatFilterSettings:this.props.showChatFilterSettings,hideChatFilterSettings:this.props.hideChatFilterSettings,isCurrentUserModerator:this.props.isCurrentUserModerator,isHostMode:this.props.isHostMode,isPopout:this.props.isPopout,isEmbedded:this.props.isEmbedded,onChatCommand:this.props.onChatCommand,onChatHide:this.onChatHide,onChatPopout:this.onChatPopout,onShowChatRules:this.props.onShowChatRules,onDarkModeToggle:this.onDarkModeToggle,onTimestampToggle:this.onTimestampToggle,onHighContrastColorsToggle:this.onHighContrastColorsToggle,showTimestamps:this.props.showTimestamps,useHighContrastColors:this.props.useHighContrastColors,theatreModeEnabled:this.props.theatreModeEnabled,onColorSelected:this.onColorSelected,channelLogin:this.props.channelLogin,channelID:this.props.channelID,isLoggedIn:this.props.isLoggedIn,onClickEditAppearance:this.onEdit,onLeaveEditAppearance:this.onLeaveEdit,onShowViewerCard:this.props.onShowViewerCard,containerElement:this.props.containerElement,"data-test-selector":"chat-settings-component"})))},t}(r.Component);var w=Object(o.connect)(function(e){return{isLoggedIn:Object(f.f)(e),darkModeEnabled:Object(b.a)(e)===d.a.Dark,showTimestamps:e.chat.showTimestamps,useHighContrastColors:e.chat.useHighContrastColors,theatreModeEnabled:e.ui.theatreModeEnabled}},function(e){return Object(l.bindActionCreators)({login:function(){return Object(h.e)(p.a.Chat)},onChatHide:function(){return v.Q()},onChatUnhide:function(){return v.T()},onThemeChanged:function(e){return Object(g.b)(e,void 0,!1)},onTimestampsDisable:function(){return v.H()},onTimestampsEnable:function(){return v.N()},onUseHighContrastColorsDisable:function(){return v.I()},onUseHighContrastColorsEnable:function(){return v.O()}},e)})(D),O=Object(a.compose)(s.a,Object(C.b)(function(e){return{onShowViewerCard:e.onShowViewerCard}}),Object(k.d)(function(e){return e}))(w),I=n("/7QA"),T=n("eJ65"),M=n("Ue10"),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setToggleBalloonRef=function(e){return t.toggleBalloonRef=e},t}return i.__extends(t,e),t.prototype.componentDidUpdate=function(e){this.props.onToggle&&this.props.isChatRulesOpen&&!e.isChatRulesOpen?this.toggleBalloonRef.toggleBalloon(!1):this.props.isShowingChatFilterSettings&&!e.isShowingChatFilterSettings&&(this.toggleBalloonRef.toggleBalloon(!0),this.props.onToggle&&this.props.onToggle(!1))},t.prototype.render=function(){return r.createElement(T.a,{onToggle:this.props.onToggle,ref:this.setToggleBalloonRef},r.createElement(M.D,{icon:M.Db.Gear,ariaLabel:Object(I.d)("Chat settings","ChatInput"),"data-a-target":"chat-settings",disabled:!!this.props.disabled}),r.createElement(M.x,{direction:M.y.Top,noTail:!0,offsetY:"11px","data-a-target":"chat-settings-balloon"},this.props.children))},t}(r.Component);var R=Object(o.connect)(function(e){return{isChatRulesOpen:e.chat.isChatRulesOpen}})(L);n.d(t,"a",function(){return O}),n.d(t,"b",function(){return R})},tIid:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c});var i=n("/7QA"),r="esport_insider_pass_whitelist",a="esports_room_cheering_whitelist",o="owlallaccess2019";function s(e,t,n){return void 0===n&&(n=!1),d(r,e,t,n)}function l(e,t){return d(a,e,t)}function c(e){return e===o}function d(e,t,n,r){void 0===r&&(r=!1);var a=i.b.get(e,[]),o=n&&n.roles&&n.roles.isStaff||r;return a.includes(t)||a.includes(t+"-staff")&&o}},tX9j:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AutoModRejectedChatMessagePrompt"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"msgID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rejectedChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"msgID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"message"},directives:[]}]}}]}}]}}],loc:{start:0,end:200}};i.loc.source={body:'#import "twilight/features/message/fragments/message-fragment.gql"\nquery AutoModRejectedChatMessagePrompt($msgID: ID! $channelID: ID!) {\nrejectedChatMessage(id: $msgID) {\nid\nmessage {\n...message\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("jy35").definitions)),e.exports=i},u0cu:function(e,t,n){},uIkQ:function(e,t,n){"use strict";var i=n("b5C3"),r=n("fQWD"),a=n("ZEQw"),o=(n("yzyL"),n("mrSG")),s=function(){function e(e,t,n){this.count=0,this.globalsBySet=new Map,this.channelsBySet=new Map,this.count=e.length+(t?t.length:0),this.indexBadges(e,this.globalsBySet,n),Array.isArray(t)&&this.indexBadges(t,this.channelsBySet,n)}return e.prototype.getBadge=function(e,t){var n=this.channelsBySet.get(e);return n&&n.has(t)?n.get(t)||null:void 0!==(n=this.globalsBySet.get(e))&&n.get(t)||null},e.prototype.indexBadges=function(e,t,n){e.forEach(function(e){n&&e.clickAction===a.c&&(e=o.__assign({},e,{channelName:n}));var i=t.get(e.setID);i||(i=new Map,t.set(e.setID,i)),i.set(e.version,e)})},e}(),l=(new s([],[],""),n("DMoW")),c=function(){function e(e,t,n){this.count=0,this.globalsBySet=new Map,this.channelsBySet=new Map;var i=e.filter(function(e){return!!e}),r=t?t.filter(function(e){return!!e}):[];this.count=i.length+(t?r.length:0),this.indexBadges(i,this.globalsBySet,n),Array.isArray(t)&&this.indexBadges(r,this.channelsBySet,n)}return e.prototype.getBadge=function(e,t){var n=this.channelsBySet.get(e);return n&&n.has(t)?n.get(t)||null:void 0!==(n=this.globalsBySet.get(e))&&n.get(t)||null},e.prototype.indexBadges=function(e,t,n){e.forEach(function(e){n&&e.clickAction&&e.clickAction===l.c.SUBSCRIBE&&(e=o.__assign({},e,{channelName:n}));var i=t.get(e.setID);i||(i=new Map,t.set(e.setID,i)),i.set(e.version,e)})},e}();new c([],[],"");n.d(t,"b",function(){return i.a}),n.d(t,"a",function(){return r.a}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){return s}),n.d(t,"c",function(){return c})},uYvD:function(e,t,n){},uYye:function(e,t,n){},ugtu:function(e,t,n){"use strict";n.d(t,"k",function(){return s}),n.d(t,"l",function(){return l}),n.d(t,"m",function(){return c}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"i",function(){return m}),n.d(t,"b",function(){return p}),n.d(t,"j",function(){return h}),n.d(t,"c",function(){return g}),n.d(t,"g",function(){return f}),n.d(t,"h",function(){return b}),n.d(t,"a",function(){return v}),n.d(t,"f",function(){return k});var i=n("q1tI"),r=n("/7QA"),a=n("GxR5"),o=n("Ue10");function s(e){return i.createElement(o.Ca,{type:o.gc.Strong},e)}function l(e,t){return i.createElement(o.Aa,{to:t,targetBlank:!0},e)}function c(e,t){return i.createElement(o.Aa,{onClick:t},e)}function d(){return Object(r.d)("<x:link>Forgot your username</x:link>?",{"x:link":function(e){return l(e,a.b)}},"ServerMessage")}function u(){return Object(r.d)("<x:link>Forgot your password</x:link>?",{"x:link":function(e){return l(e,a.b)}},"ServerMessage")}function m(){return Object(r.d)("Please <x:link>reset your password</x:link>.",{"x:link":function(e){return l(e,a.b)}},"ServerMessage")}function p(){return Object(r.d)("Please <x:link>contact support</x:link> for assistance.",{"x:link":function(e){return l(e,a.a)}},"ServerMessage")}function h(){return Object(r.d)("To learn more, please read <x:link>this article</x:link>.",{"x:link":function(e){return l(e,a.c)}},"ServerMessage")}function g(e){return Object(r.d)("Want to <x:click>create a new account</x:click>?",{"x:click":function(t){return c(t,e)}},"ServerMessage")}function f(e){return Object(r.d)("Want to <x:click>log in</x:click> instead?",{"x:click":function(t){return c(t,e)}},"ServerMessage")}function b(e){return Object(r.d)("If you need a Twitch account, you can <x:click>create one here</x:click>.",{"x:click":function(t){return c(t,e)}},"ServerMessage")}function v(e){return Object(r.d)("If you want to use an existing Twitch ID, you can <x:click>connect it here</x:click>.",{"x:click":function(t){return c(t,e)}},"ServerMessage")}function k(e){return e?Object(r.d)("That password was incorrect. Please try again. It looks like your caps lock was on.","ServerMessage"):Object(r.d)("That password was incorrect. Please try again.","ServerMessage")}},uu1w:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.Emote="emote",e.Mention="mention",e.Hashtag="hashtag",e.None="none"}(i||(i={}))},uy8m:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward"}(i||(i={}))},v8tf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsDownloadButton"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"videoQualities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sourceURL"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:131}};n.loc.source={body:"query ClipsDownloadButton($slug: ID!) {\nclip(slug: $slug) {\nid\nbroadcaster {\nid\n}\ngame {\nid\nname\n}\nvideoQualities {\nsourceURL\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},vGFN:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"j",function(){return b}),n.d(t,"h",function(){return v}),n.d(t,"g",function(){return k}),n.d(t,"l",function(){return C}),n.d(t,"o",function(){return y}),n.d(t,"n",function(){return S}),n.d(t,"k",function(){return E}),n.d(t,"m",function(){return N}),n.d(t,"i",function(){return _}),n.d(t,"e",function(){return D}),n.d(t,"d",function(){return w}),n.d(t,"b",function(){return O}),n.d(t,"f",function(){return I}),n.d(t,"c",function(){return T}),n.d(t,"q",function(){return L}),n.d(t,"p",function(){return R});var i,r,a,o,s,l,c=n("mrSG"),d=n("/7QA"),u=n("2xye"),m=n("mBWp");function p(e){d.q.tracking.track(u.SpadeEventType.WhisperThreadMod,{conversation_id:e.threadID,action:e.action})}function h(e){return c.__awaiter(this,void 0,void 0,function(){var t;return c.__generator(this,function(n){switch(n.label){case 0:return[4,M()];case 1:return t=n.sent(),d.q.tracking.track(u.SpadeEventType.WhisperIgnoreUser,{ui_context:e.context,from_login:t&&t.login,ignored_login:e.targetUserLogin,reason:e.reason||i.Other,source:e.source}),[2]}})})}function g(e,t){return c.__awaiter(this,void 0,void 0,function(){var n;return c.__generator(this,function(i){switch(i.label){case 0:return[4,M()];case 1:return n=i.sent(),d.q.tracking.track(u.SpadeEventType.WhisperThreadMod,{conversation_id:e,action:t,login:n&&n.login}),[2]}})})}function f(e){d.q.tracking.track(u.SpadeEventType.WhisperAllThreadsMod,{action:e})}function b(){f(r.MarkAllRead)}function v(){f(r.EnableDoNotDisturb)}function k(){f(r.DisableDoNotDisturb)}function C(e,t){h({context:t,targetUserLogin:e,reason:i.Spam,source:"conversations_button"})}function y(e){g(e,s.MarkNotSpam)}function S(e){g(e,s.Archive)}function E(e){p({threadID:e,action:a.Mute})}function N(e){p({threadID:e,action:a.Unmute})}function _(e){p({threadID:e,action:a.Expand})}function D(e){p({threadID:e,action:a.Collapse})}function w(e){p({threadID:e,action:a.Close})}function O(e){p({threadID:e,action:a.Archive})}function I(e){d.q.tracking.track(u.SpadeEventType.WhisperThreadCreate,{conversation_id:e.threadID,target_login:e.targetUserlogin,source:"search_target_result",search_result_rank:e.searchResultRank})}function T(e){d.q.tracking.track(u.SpadeEventType.WhisperSearchClick,{query:e.searchQuery,source:"conversation_list",rank:e.searchResultRank,is_conversation:e.isConversation})}function M(){var e=this;return new Promise(function(t){setTimeout(function(){return c.__awaiter(e,void 0,void 0,function(){var e,n,i;return c.__generator(this,function(r){switch(r.label){case 0:e=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,d.q.apollo.client.query({query:m})];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),d.k.error(n,"Failed to make query for current user info in WhisperSent reporting"),[3,4];case 4:return i=e&&e.data&&e.data.currentUser,t(i),[2]}})})})})}function L(e){return c.__awaiter(this,void 0,void 0,function(){var t;return c.__generator(this,function(n){switch(n.label){case 0:return[4,M()];case 1:return t=n.sent(),d.q.tracking.track(u.SpadeEventType.WhisperSent,{to:e.targetUserLogin,from:t&&t.login,player:"web",is_turbo:t&&t.hasTurbo,conversation_id:e.threadID,availability:t&&t.availability,room_type:e.inChannelChat?l.Channel:l.Conversation}),[2]}})})}function R(e){return c.__awaiter(this,void 0,void 0,function(){var t;return c.__generator(this,function(n){switch(n.label){case 0:return[4,M()];case 1:return t=n.sent(),d.q.tracking.track(u.SpadeEventType.WhisperReceived,{to:t&&t.login,from:e.targetUserLogin,player:"web",is_turbo:t&&t.hasTurbo,conversation_id:e.threadID}),[2]}})})}!function(e){e.Harassment="Harassment",e.Spam="Spam",e.Other="Other"}(i||(i={})),function(e){e.MarkAllRead="mark_all_read",e.EnableDoNotDisturb="do_not_disturb_on",e.DisableDoNotDisturb="do_not_disturb_off"}(r||(r={})),function(e){e.Mute="mute",e.Unmute="unmute",e.Expand="maximize",e.Collapse="minimize",e.Close="close",e.Archive="archive",e.Open="open"}(a||(a={})),function(e){e.Dock="dock",e.SpamPropmt="dock_spam_cta"}(o||(o={})),function(e){e.Archive="archive",e.MarkNotSpam="mark_not_spam"}(s||(s={})),function(e){e.Channel="channel",e.Conversation="conversation"}(l||(l={}))},vHGB:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("DMoW"),o=n("ZEQw"),s=n("Ue10"),l=(n("E78O"),n("/7QA")),c=n("2xye"),d=function(e){e.badge_type=e.badge_type.toLowerCase().replace(/( |\s)/g,"_"),l.q.tracking.track(c.SpadeEventType.ChatBadgeClick,e)};n.d(t,"a",function(){return m});var u="https://www.twitch.tv/products/turbo?ref=chat_badge",m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isHovering:!1},t.onMouseOver=function(){t.setState({isHovering:!0})},t.onMouseOut=function(){t.setState({isHovering:!1})},t.onBadgeClickHandler=function(){d({badge_type:t.props.badge&&t.props.badge.title||t.props.schemaBadge&&t.props.schemaBadge.title||"",badge_url_target:t.targetURL})},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.schemaBadge?this.props.schemaBadge.title:this.props.badge&&this.props.badge.title||"",t=this.props.schemaBadge?this.props.schemaBadge.image1x:this.props.badge&&this.props.badge.image1x||"",n=this.props.schemaBadge?this.props.schemaBadge.image2x:this.props.badge&&this.props.badge.image2x||"",i=this.props.schemaBadge?this.props.schemaBadge.image4x:this.props.badge&&this.props.badge.image4x||"",a=this.props.large,o=this.props.hideTooltip,c=a?n:t,d=a?n+" 1x, "+i+" 2x":t+" 1x, "+n+" 2x, "+i+" 4x",u=r.createElement("img",{alt:e,"aria-label":Object(l.d)("{badgeTitle} badge",{badgeTitle:e},"Badge"),className:"chat-badge",src:c,srcSet:d,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut});return this.targetURL=this.getTargetURL(),""!==this.targetURL&&(u=r.createElement("a",{href:this.targetURL,onClick:this.onBadgeClickHandler,target:"_blank",rel:"noopener noreferrer","data-a-target":"chat-badge"},u)),!o&&this.state.isHovering?r.createElement(s.jc,{align:s.kc.Left,"data-a-target":"chat-badge",display:s.Da.Inline,key:t,label:e,offsetY:"0.9rem"},u):u},t.prototype.getTargetURL=function(){if(this.props.badge)switch(this.props.badge.clickAction){case o.e:return this.props.badge.clickURL;case o.c:return this.props.badge.channelName?this.getSubscriberLink(this.props.badge.channelName):"";case o.d:return u;default:return""}else if(this.props.schemaBadge)switch(this.props.schemaBadge.clickAction){case a.c.VISIT_URL:return this.props.schemaBadge.clickURL||"";case a.c.SUBSCRIBE:return this.props.schemaBadge.channelName?this.getSubscriberLink(this.props.schemaBadge.channelName):"";case a.c.GET_TURBO:return u;default:return""}return""},t.prototype.getSubscriberLink=function(e){return"https://www.twitch.tv/"+e+"/subscribe?ref=in_chat_subscriber_link"},t}(r.Component)},vKai:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/MKj"),o=n("fvjX"),s=n("/7QA"),l=n("gcd7"),c=n("WytW"),d=n("NNSq"),u=n("CzFK"),m=n("TOso"),p=n("NMMG"),h=n("l1Uh"),g=n("PrJw"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleWhisperCommand=function(e){var n=Object(c.p)("/w "+e);if(!n||!n.recipientLogin||!n.body)return{preserveInput:!0,deferred:Promise.resolve({notice:Object(s.d)('Usage: "/w [login] [message]"',"WhisperCommandHandler")})};var i=n.recipientLogin,r=n.body;return t.props.isEmbedded||t.props.isPopout?{deferred:Promise.resolve({notice:Object(s.d)("Please use the whisper window for whispers.","WhisperCommandHandler")})}:i.toLowerCase()===t.props.userLogin?{deferred:Promise.resolve({notice:Object(s.d)("You cannot whisper to yourself.","WhisperCommandHandler")})}:t.props.userID?t.initiateWhisper(i,r):void 0},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement(l.a,{channelLogin:this.props.channelLogin,command:"w",handler:this.handleWhisperCommand})},t.prototype.initiateWhisper=function(e,t){var n=this;return{deferred:new Promise(function(r,a){return i.__awaiter(n,void 0,void 0,function(){var n,o,l,c;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(d.a)(e)];case 1:return n=i.sent(),[3,3];case 2:return o=i.sent(),s.k.warn(o,"Failed to fetch user targeted by whisper command.",{recipientLogin:e}),[2,a(o)];case 3:return n?[3,4]:[2,r({notice:Object(s.d)("No user matching that login.","WhisperCommandHandler")})];case 4:l=Object(p.a)(this.props.userID,n),i.label=5;case 5:return i.trys.push([5,7,,8]),Object(g.m)({threadID:l,targetUserLogin:e,inChannelChat:!0}),[4,Object(m.b)({currentUserID:this.props.userID,emotes:this.props.emoteMap||{},message:t,recipientUserID:n})];case 6:return i.sent(),[3,8];case 7:return c=i.sent(),s.k.error(c,"Failed to send whisper using whisper command.",{currentUserID:this.props.userID,recipientUserID:n}),[2,r({notice:Object(s.d)("Unable to send Whisper at this moment.","WhisperCommandHandler")})];case 8:return this.props.openThread(l),[2,r({})]}})})})}},t}(r.Component);var b=Object(a.connect)(null,function(e){return Object(o.bindActionCreators)({openThread:function(e){return Object(u.l)({threadID:e,collapsed:!0},Object(h.a)())}},e)})(f);n.d(t,"a",function(){return b})},vSJR:function(e,t,n){"use strict";var i,r=n("mrSG"),a=n("q1tI"),o=n("u5aL"),s=n("N0BP"),l=n("Ue10");!function(e){e.DropdownInsideClickDetector="dropdown-inside-click-detector",e.DropdownWrapper="dropdown-wrapper"}(i||(i={}));var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isOpen:!!t.props.openByDefault},t.handleOnClickOut=function(){t.hideDropdown()},t.handleButtonClick=function(){t.setState(function(e){return{isOpen:!e.isOpen,hasInteracted:!0}},function(){t.props.onToggle&&t.props.onToggle(!t.state.isOpen)})},t.hideDropdown=function(){t.setState({isOpen:!1},function(){t.props.onToggle&&t.props.onToggle(!0)})},t.handleInsideDropdownClick=function(){t.hideDropdown()},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.children;return this.props.hideDropdownOnInsideClick&&(e=a.createElement("div",{"data-test-selector":i.DropdownInsideClickDetector,onClick:this.handleInsideDropdownClick},e)),a.createElement(o.a,{onClickOut:this.handleOnClickOut},a.createElement(l.Ob,r.__assign({background:this.state.isOpen?l.u.Base:void 0,borderRadius:l.A.Large,className:"inline-dropdown",elevation:this.state.isOpen?3:void 0,padding:.5,position:l.tb.Relative},Object(s.a)(this.props)),a.createElement("div",{className:"inline-dropdown__button-wrapper"},a.createElement(l.C,{blurAfterClick:!0,dropdown:!0,onClick:this.handleButtonClick,size:l.G.Large,type:l.I.Hollow},this.props.buttonLabel)),a.createElement(l.Ob,{attachLeft:!0,background:l.u.Base,borderRadius:{bottomLeft:l.A.Large,bottomRight:l.A.Large},"data-test-selector":i.DropdownWrapper,display:this.state.isOpen?l.Da.Block:l.Da.Hide,elevation:3,fullWidth:!0,padding:{y:1},position:l.tb.Absolute,zIndex:l.xc.Above},e)))},t.prototype.toggleDropdown=function(e){void 0===e&&(e=!this.state.isOpen),this.setState({isOpen:e})},t}(a.Component);n.d(t,"a",function(){return c})},vSeP:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var i=n("XIZb"),r=Object(i.a)("ActiveChatters"),a=r.withChatServiceProvider,o=(0,r.withContext)(function(e){return{activeChattersAPI:e.serviceAPI,setActiveChattersAPI:e.setServiceAPI}})},vUXZ:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Clips_DeleteClips"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeleteClipsInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteClips"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clips"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:106}};n.loc.source={body:"mutation Clips_DeleteClips($input: DeleteClipsInput!) {\ndeleteClips(input: $input) {\nclips {\nid\nslug\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},vhpE:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return h});var i,r=n("mrSG"),a=n("q1tI"),o=n("wbMx"),s=n("+GjP"),l=n("2xye"),c=n("MLDe"),d=n("McYG"),u=n("4L7N"),m=n("Ue10"),p=[{type:o.b.Twitter,params:{tt_medium:"twtr"}},{type:o.b.Facebook,params:{tt_medium:"fb"}},{type:o.b.Reddit,params:{tt_medium:"redt"}},{type:o.b.Copy}];!function(e){e.MainContainer="main-container",e.DownloadButtonContainer="download-button-container",e.ShareButtonTwitter="share-button-twitter",e.ShareButtonFacebook="share-button-facebook",e.ShareButtonReddit="share-button-reddit",e.ShareButtonCopy="share-button-copy"}(i||(i={}));var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e={margin:{right:1}},t={};return this.props.asBalloon&&(t={justifyContent:m.eb.Between},e={}),a.createElement(m.fb,r.__assign({className:"clips-social-share",display:m.Da.Flex,flexWrap:m.Ha.NoWrap},t,{"data-test-selector":i.MainContainer}),a.createElement(m.fb,r.__assign({display:m.Da.InlineBlock},e,{"data-test-selector":i.DownloadButtonContainer}),a.createElement(u.a,{broadcasterLogin:this.props.clip.broadcaster&&this.props.clip.broadcaster.login||"",broadcasterId:this.props.clip.broadcaster&&this.props.clip.broadcaster.id||"",slug:this.props.clip.slug,pageType:this.props.pageType})),this.renderSocialButton(e,i.ShareButtonTwitter,o.b.Twitter,{tt_medium:"twtr"}),this.renderSocialButton(e,i.ShareButtonFacebook,o.b.Facebook,{tt_medium:"fb"}),this.renderSocialButton(e,i.ShareButtonReddit,o.b.Reddit,{tt_medium:"redt"}),this.renderSocialButton(e,i.ShareButtonCopy,o.b.Copy))},t.prototype.renderSocialButton=function(e,t,n,i){var u=Object(s.e)(this.props.clip.url,i);return this.props.pageType===l.PageviewLocation.ClipsWatchPage&&this.props.clip.broadcaster&&this.props.clip.broadcaster.login&&(u=Object(s.e)(Object(d.a)(this.props.clip.slug,this.props.clip.broadcaster.login),i)),a.createElement(m.fb,r.__assign({key:n},e,{"data-test-selector":t}),a.createElement(o.a,{key:n,type:n,text:this.props.clip.title,url:u,onShareClick:Object(c.b)(this.props.clip.id,this.props.clip.game&&this.props.clip.game.name,this.props.clip.broadcaster&&this.props.clip.broadcaster.id,this.props.clip.broadcaster&&this.props.clip.broadcaster.login,this.props.pageType)}))},t}(a.Component)},vlTn:function(e,t,n){"use strict";var i=n("q1tI"),r=n("Ue10"),a=function(){return i.createElement(r.fb,{display:r.Da.Flex,margin:{bottom:.5}},i.createElement(r.fb,{margin:{right:.5}},i.createElement(r.sb,{height:20,width:70})))};n.d(t,"a",function(){return a})},vtET:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelCollection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelVideo"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}}]}}],loc:{start:0,end:269}};i.loc.source={body:'#import "twilight/features/channel/queries/channel-video.gql"\n#import "twilight/features/channel/queries/channel.gql"\nfragment channelCollection on Collection {\nid\nitems(first: 1) {\ntotalCount\nedges {\nnode {\n... on Video {\n...channelVideo\n}\n}\n}\n}\nowner {\n...channel\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}i.definitions=i.definitions.concat(a(n("RTtf").definitions)),i.definitions=i.definitions.concat(a(n("BbLt").definitions)),e.exports=i},w1PT:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("/7QA"),r=n("ZS2+"),a=n("SDEh"),o=n("aCAx"),s=n("8EUQ"),l="core.ui.CHECKOUT_SHOWN";function c(e){if(Object(a.b)()){try{s.a.clearSubscriptionCheckoutKeys(),function(e){if(!e.productName)return void i.k.warn("No productName provided");var t=new URL("https://www.twitch.tv/products/"+e.productName);e.recipientLogin?t.searchParams.append("recipient",e.recipientLogin):e.mysteryGiftCount&&t.searchParams.append("gift_count",e.mysteryGiftCount.toString());e.isAnonymous&&t.searchParams.append("is_anonymous",e.isAnonymous.toString());e.isOneTimePurchase&&t.searchParams.append("is_one_time_purchase",e.isOneTimePurchase.toString());window.open(t.toString(),"_blank")}(e)}catch(e){i.k.error(e,"Failed to open subscription checkout externally")}return function(e){e({type:l})}}return function(t){t(Object(o.d)(r.a,{component:"CheckoutModal",loader:function(){return Promise.all([n.e(0),n.e(232)]).then(n.bind(null,"KJv/"))},componentProps:e}))}}},w4P5:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelBadgeSets"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}]}}],loc:{start:0,end:209}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nquery ChannelBadgeSets($channelLogin: String!) {\nbadges {\n...badge\n}\nchannel: user(login: $channelLogin) {\nid\nlogin\nbroadcastBadges {\n...badge\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("IKE4").definitions)),e.exports=i},wC0O:function(e,t,n){},wbMx:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return d});var i,r=n("mrSG"),a=n("q1tI"),o=n("/7QA"),s=n("Jxh/"),l=n("r62z"),c=n("Ue10");n("jeZI");!function(e){e[e.Twitter=0]="Twitter",e[e.Reddit=1]="Reddit",e[e.VKontakte=2]="VKontakte",e[e.Facebook=3]="Facebook",e[e.Copy=4]="Copy",e[e.CopyInput=5]="CopyInput",e[e.Download=6]="Download"}(i||(i={}));var d=function(e){function t(t){var n=e.call(this,t)||this;return n.renderLink=function(){var e="social-button__link "+n.addSocialClassModifier("social-button__link");return n.props.type===i.Download?a.createElement("a",r.__assign({href:n.props.url,target:"_blank",rel:"noopener noreferrer",className:e,onClick:n.onShareClickHandler},Object(c.yc)(n.props),{download:n.props.text}),n.renderIcon()):n.isLink()?a.createElement("a",r.__assign({href:n.getLinkTarget(),target:"_blank",rel:"noopener noreferrer",className:e,onClick:n.onShareClickHandler},Object(c.yc)(n.props)),n.renderIcon()):a.createElement("button",r.__assign({onClick:n.copyPageUrl,onMouseLeave:n.clearIsCopiedStatus,className:e},Object(c.yc)(n.props)),n.renderIcon())},n.onShareClickHandler=function(){n.props.onShareClick&&n.props.onShareClick(n.props.type)},n.clearIsCopiedStatus=function(){n.setState({isCopied:!1})},n.getUrl=function(){return n.props.url||window.location.href},n.copyPageUrl=function(e){e&&e.preventDefault(),n.props.onShareClick&&n.props.onShareClick(n.props.type),Object(s.a)(n.getUrl()),n.setState({isCopied:!0})},n.renderIcon=function(){var e=n.getAssetFromType();return a.createElement(c.fb,{className:"social-button__icon "+n.addSocialClassModifier("social-button__icon"),display:c.Da.Flex,alignItems:c.i.Center,justifyContent:c.eb.Center},a.createElement(c.Cb,{asset:e}))},n.isLink=function(){return n.props.type!==i.Copy},n.getTooltipFromType=function(){switch(n.props.type){case i.Twitter:return"Twitter";case i.Reddit:return"Reddit";case i.Facebook:return"Facebook";case i.VKontakte:return"VKontakte";case i.Download:return Object(o.d)("Download","SocialButton");case i.Copy:return n.state.isCopied?Object(o.d)("Copied","SocialButton"):Object(o.d)("Copy to clipboard","SocialButton");default:return""}},n.getAssetFromType=function(){switch(n.props.type){case i.Twitter:return c.Db.Twitter;case i.Facebook:return c.Db.Facebook;case i.VKontakte:return c.Db.VKontakte;case i.Reddit:return c.Db.Reddit;case i.Download:return c.Db.Download;case i.Copy:default:return c.Db.Copy}},n.addSocialClassModifier=function(e){switch(n.props.type){case i.Twitter:return e+"--twitter";case i.Reddit:return e+"--reddit";case i.Facebook:return e+"--facebook";case i.VKontakte:return e+"--vkontakte";case i.Download:return e+"--download";case i.Copy:return e+"--copy";default:return""}},n.getLinkTarget=function(){var e=n.props,t=e.text,r=e.type,a=n.getUrl(),o=t||"";switch(r){case i.Reddit:return Object(l.b)(a,o);case i.VKontakte:return Object(l.d)(a);case i.Facebook:return Object(l.a)(a);case i.Twitter:return Object(l.c)(a,o);default:return""}},n.state={isCopied:!1},n}return r.__extends(t,e),t.prototype.render=function(){return a.createElement(c.fb,{className:"social-button"},a.createElement(c.jc,{label:this.getTooltipFromType(),direction:c.lc.Bottom},this.renderLink()))},t}(a.Component)},wqI2:function(e,t,n){},wtKP:function(e,t,n){},wxwP:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/MKj"),o=n("fvjX"),s=n("/7QA"),l=n("CFw/"),c=n.n(l),d=n("aCAx"),u=n("Ue10"),m=(n("9RDd"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{onClick:this.props.closeModal},r.createElement(u.l,{type:u.q.FadeIn,duration:u.n.Long,timing:u.p.EaseInOut,enabled:!0},r.createElement(u.Ob,{className:"browser-push-notifications-upsell",alignItems:u.i.Center,justifyContent:u.eb.Center,position:u.tb.Fixed,display:u.Da.Flex,background:u.u.Overlay,fullHeight:!0,fullWidth:!0,attachTop:!0,attachLeft:!0},r.createElement(u.fb,{className:"browser-push-notifications-upsell__container",display:u.Da.Flex,textAlign:u.cc.Center,padding:{x:1},position:u.tb.Relative},r.createElement(u.l,{type:u.q.SlideInBottom,duration:u.n.Long,timing:u.p.EaseInOut,enabled:!0},r.createElement(u.Ca,{type:u.gc.H3,fontSize:u.Ia.Size3,lineHeight:u.gb.Body},Object(s.d)("Don't miss out when your favorite streamers go live!","BrowserNotificationsUpsellModal")),r.createElement(u.fb,{margin:{top:1}},r.createElement(u.Ca,{type:u.gc.H4,fontSize:u.Ia.Size4,color:u.R.OverlayAlt,lineHeight:u.gb.Body},Object(s.d)("Turn on Browser Notifications to get updates even when your browser window is minimized","BrowserNotificationsUpsellModal")))),r.createElement(u.fb,{className:"browser-push-notifications-upsell__arrow",position:u.tb.Absolute,attachTop:!0,attachLeft:!0},r.createElement(u.l,{type:u.q.SlideInBottom,delay:u.m.Short,duration:u.n.Long,timing:u.p.EaseInOut,enabled:!0},r.createElement("img",{src:c.a})))))))},t}(r.Component));var p=Object(a.connect)(null,function(e){return Object(o.bindActionCreators)({closeModal:d.c},e)})(m);n.d(t,!1,function(){return m}),n.d(t,"a",function(){return p})},"x0+1":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={alwaysShowMessage:!1},t.renderBody=function(){return t.state.alwaysShowMessage?t.props.messageBody:r.createElement("span",{key:"deleted",className:"chat-line__message--deleted"},r.createElement("a",{href:"",onClick:t.alwaysShowMessage},"<"+Object(a.d)("click to show","MessageDeletedLine")+">"))},t.alwaysShowMessage=function(e){e&&e.preventDefault(),t.setState({alwaysShowMessage:!0})},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.moderatorLogin,n=e.targetIsCurrentUser,i=this.props.targetLogin;return n?Object(a.d)("A moderator deleted your message: {body}",{body:this.renderBody()},"MessageDeletedLine"):t?Object(a.d)("{moderatorLogin} deleted {targetLogin}'s message: {body}",{moderatorLogin:t,targetLogin:i,body:this.renderBody()},"MessageDeletedLine"):Object(a.d)("A moderator deleted {targetLogin}'s message: {body}",{targetLogin:i,body:this.renderBody()},"MessageDeletedLine")},t}(r.Component);n.d(t,"a",function(){return o})},x0gr:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return d});var i=n("mrSG"),r=n("/7QA"),a=n("2xye"),o=n("r2Xj"),s=n("oi4T"),l=function(e){r.p.track(a.SpadeEventType.ChatSettingsOpened,Object(s.b)(e))},c=function(e){var t=i.__assign({},Object(s.b)(e),{setting_name:e.settingName,new_value:e.newValue.toString()});r.p.track(a.SpadeEventType.ChatSettingsChanged,t)},d=function(e){var t=i.__assign({},Object(s.b)(e),{setting_name:o.a.FollowerDuration,new_value:e.newValue.toString(),follower_mode_on:e.followerModeOn});r.p.track(a.SpadeEventType.ChatSettingsChanged,t)}},xDdc:function(e,t,n){},xM4F:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatChannelAndCommentCreatorAndVideoTrackingContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commentCreator"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}},{kind:"Variable",name:{kind:"Name",value:"commentCreator"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:245}};n.loc.source={body:"query VideoChatChannelAndCommentCreatorAndVideoTrackingContext($videoCreatorID: ID! $commentCreator: ID! $videoID: ID) {\nusers(ids: [$videoCreatorID $commentCreator]) {\nid\nlogin\n}\nvideo(id: $videoID) {\nid\nbroadcastType\ntitle\ngame {\nid\nname\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},xTLu:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsLeaderboardEdgeNode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsLeaderboardItem"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"entryKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rank"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]}]}}],loc:{start:0,end:82}};n.loc.source={body:"fragment bitsLeaderboardEdgeNode on BitsLeaderboardItem {\nid\nentryKey\nrank\nscore\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},xXlL:function(e,t,n){"use strict";function i(e){return{id:""+e.id,start:e.start,end:e.end}}function r(e){return{__typename:"WhisperMessageEdge",cursor:""+e.data_object.id,node:{__typename:"WhisperMessage",id:e.data_object.message_id,nonce:e.data_object.nonce,sentAt:new Date(1e3*e.data_object.sent_ts).toISOString(),editedAt:null,deletedAt:null,content:{__typename:"MessageBody",content:e.data_object.body,emotes:e.data_object.tags.emotes.map(function(e){return o(i(e))})},from:{__typename:"User",id:""+e.data_object.from_id}}}}function a(e){return e.map(function(e){return o(i(e))})}function o(e){return{from:e.start,to:e.end,emoteID:e.id,id:e.id+";"+e.start+";"+e.end,setID:"0",__typename:"EmbeddedEmote"}}n.d(t,"c",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o})},xyN1:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_Clip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slugID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCurrentUser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slugID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelClip"},directives:[]}]}}]}}],loc:{start:0,end:276}};i.loc.source={body:'#import "twilight/features/channel/queries/channel-current-user.gql"\n#import "twilight/features/channel/queries/channel-clip.gql"\nquery ChannelRoot_Clip(\n$slugID: ID!\n$includeChanlets: Boolean!\n) {\ncurrentUser {\n...channelCurrentUser\n}\nclip(slug: $slugID) {\n...channelClip\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}i.definitions=i.definitions.concat(a(n("NJiF").definitions)),i.definitions=i.definitions.concat(a(n("oc+d").definitions)),e.exports=i},y2dA:function(e,t,n){},y4Ne:function(e,t,n){},y8iI:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsOptions_User"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:76}};n.loc.source={body:"query ClipsOptions_User {\ncurrentUser {\nid\nroles {\nisStaff\nisSiteAdmin\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},ySk3:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),r=n("/7QA"),a=n("2xye"),o=n("oi4T"),s=function(e){var t=i.__assign({},Object(o.b)(e),{mentioned_user_display_name:e.mentionedUserDisplayName,user:e.userLogin});r.p.track(a.SpadeEventType.ChatMentionUsed,t)}},yWUM:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i="0h0m1s";function r(e){if(0===e)return i;if(!e||e<0)return"";var t=e,n=Math.floor(t/3600);return t%=3600,n+"h"+Math.floor(t/60)+"m"+(t%=60)+"s"}},yXtP:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_UpdateChatColor"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateChatColorInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateChatColor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:120}};n.loc.source={body:"mutation Chat_UpdateChatColor($input: UpdateChatColorInput!){\nupdateChatColor(input: $input) {\nuser {\nid\nchatColor\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},yZCp:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("q1tI"),r=n("/7QA"),a=n("7TkE"),o=n.n(a),s=n("8SX2"),l=n("Ue10"),c=(n("OXQr"),function(e){if(!(e.event.messageID&&e.event.userLogin&&e.event.displayName))return null;var t=i.createElement(s.a,{contentID:e.event.messageID,login:e.event.userLogin,sourceType:e.event.sourceType},e.event.displayName),n=Object(r.d)("{gifterButton}'s Cheer shared rewards to {selectedCount} others in chat.",{gifterButton:t,selectedCount:e.event.selectedCount},"RewardGiftNoticeLine"),a=o.a;return i.createElement(l.fb,{className:"reward-gift-user-notice",margin:{y:.5}},i.createElement(l.fb,{display:l.Da.Flex,alignItems:l.i.Center,padding:{x:1,y:.5}},i.createElement(l.Xa,{margin:{right:1}},i.createElement("img",{className:"reward-gift-user-notice__icon",src:a})),i.createElement(l.Ca,{color:l.R.Alt2},n)))})},ya7N:function(e,t,n){},ybym:function(e,t,n){"use strict";var i,r=n("mrSG"),a=n("q1tI"),o=n("fvjX"),s=n("/7QA"),l=n("yR8l"),c=n("x7UT"),d=n("0Log"),u=n("/aPz"),m=n("GnwI"),p=n("Ue10"),h=n("DOvc"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){if(this.props.data.loading||this.props.data.error||!this.props.data.user||!this.props.data.user.stream||!this.props.data.user.stream.id)return null;var e=this.props.pubsub.messages.viewCount&&this.props.pubsub.messages.viewCount.viewers||this.props.data.user.stream.viewersCount||0;return a.createElement(p.Nb,{value:Object(s.f)(e),label:Object(s.d)("Watching Now","ChannelViewersCount"),icon:p.Db.GlyphLive,"data-a-target":"channel-viewers-count"})},t}(a.Component),f=Object(o.compose)(Object(l.a)(h),Object(c.a)([{topic:function(e){return e.data.user&&e.data.user.id?Object(u.I)(e.data.user.id):""},skip:function(e){return e.data.loading||!e.data.user||!e.data.user.id},mapMessageTypesToProps:(i={},i[d.PubsubMessageType.ViewCount]="viewCount",i)}]),Object(m.withLatencyTracking)("ChannelViewersCount"))(g),b=function(e){return a.createElement(f,r.__assign({key:e.login},e))};n.d(t,!1,function(){return g}),n.d(t,"a",function(){return b})},ygQa:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),r=n("yR8l"),a=n("yXtP");function o(){var e=this;return Object(r.a)(a,{props:function(t){return{updateChatColorMutation:function(n){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return t.mutate?[4,t.mutate({variables:{input:{color:n}}})]:[3,2];case 1:return[2,e.sent().data];case 2:throw new Error("Update chat color mutation is not ready")}})})}}}})}},yzwe:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var i,r=n("mrSG"),a=n("yR8l"),o=n("FAYk");function s(e){var t=this;return Object(a.a)(o,{props:function(n){return{unmodUserMutation:function(i){return r.__awaiter(t,void 0,void 0,function(){var t;return r.__generator(this,function(r){if(t=e(n.ownProps).channelID,n.mutate&&t)return[2,n.mutate({variables:{input:{channelID:t,targetLogin:i}}}).then(function(e){return e.data})];throw new Error("unmodUser mutation is not ready")})})}}}})}!function(e){e.ChannelNotFound="CHANNEL_NOT_FOUND",e.Forbidden="FORBIDDEN",e.UserNotFound="TARGET_NOT_FOUND",e.UserNotMod="TARGET_NOT_MOD"}(i||(i={}))},yzyL:function(e,t){},"z+dA":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_SubscribeButton_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withTenure"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withTenure"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"tenure"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDNRd"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"platform"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pendingSubscription"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"gift"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isGift"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"requestInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:568}};i.loc.source={body:'#import "twilight/pages/subscriptions-management/models/cumulative-tenure-fragment.gql"\nquery ChannelPage_SubscribeButton_User($login: String! $withTenure: Boolean!) {\nuser(login: $login) {\nid\ndisplayName\nsubscriptionProducts {\nid\nemoteSetID\nname\n}\nself {\ncanPrimeSubscribe\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) @include(if: $withTenure) {\n...tenure\n}\nsubscriptionBenefit {\nid\npurchasedWithPrime\ntier\nendsAt\nisDNRd\nplatform\npendingSubscription {\nprice\nstartsAt\ntier\ntype\n}\ngift {\nisGift\n}\n}\n}\n}\ncurrentUser {\nid\n}\nrequestInfo {\ncountryCode\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n("HiyX").definitions)),e.exports=i},zClW:function(e,t,n){"use strict";n.d(t,"c",function(){return v}),n.d(t,"a",function(){return k}),n.d(t,"b",function(){return C}),n.d(t,"i",function(){return y}),n.d(t,"d",function(){return N}),n.d(t,"f",function(){return _}),n.d(t,"e",function(){return D}),n.d(t,"g",function(){return w}),n.d(t,"h",function(){return O});var i=n("mrSG"),r=n("/7QA"),a=n("2xye"),o=n("ZuiC"),s=n("ahza"),l=n("pU2t"),c=n("ZUUl"),d=n("fI4C"),u=n("fIj0"),m=n("xM4F"),p=n("8uuy");var h=function(e){if(e.includes("FollowersOnlyError"))return function(e){return Object(r.d)("This room is in {duration} followers-only mode. Follow this channel to join the community",{duration:e},"routines-comments")}(function(e){var t=e.split(" "),n=t[t.length-1].match(/((\d+)h)?(\d+)m(\d+)s/);if(!Array.isArray(n))return"";return{600:"10 Minutes",1800:"30 Minutes",3600:"1 Hour",86400:"1 Day",604800:"1 Week",2592000:"1 Month",7776000:"3 Months"}[60*parseInt(n[2]||"0",10)*60+60*parseInt(n[3],10)+parseInt(n[4],10)]}(e));var t={CommenterBannedError:Object(r.d)("You are banned from sending messages in this channel","routines-comments"),CommentingDisabledError:Object(r.d)("Sending messages in this channel is disabled","routines-comments"),UserNotVerifiedError:Object(r.d)("Account email verification required to send a message","routines-comments"),MaxChildCommentsError:Object(r.d)("The reply limit for this message has been reached","routines-comments"),MessageLikelySpamError:Object(r.d)("Your message was blocked by the spam filter","routines-comments"),MessageContainsBannedWordsError:Object(r.d)("Your message wasn't posted due to conflicts with the channel's moderation settings","routines-comments")},n=Object.keys(t).find(function(t){return e.includes(t)});return n?t[n]:Object(r.d)("Unable to send a new message at this time","routines-comments")},g="",f=-1,b=!1,v=function(e,t){return i.__awaiter(void 0,void 0,void 0,function(){return i.__generator(this,function(n){if(b)return[2,Promise.resolve()];if(Object(s.f)(t)){if(t.offset===f)return[2,Promise.resolve()];f=t.offset}if(Object(s.d)(t)){if(t.cursor===g)return[2,Promise.resolve()];g=t.cursor}return b=!0,[2,Object(s.g)(t).then(function(n){b=!1,Object(s.f)(t)&&t.offset===f?e.dispatch(Object(o.A)(n)):e.dispatch(Object(o.z)(n))},function(t){b=!1,r.k.warn("VideoChat: unable to fetch messages",{error:t}),e.dispatch(Object(o.B)())})]})})},k=function(e,t){return i.__awaiter(void 0,void 0,void 0,function(){var n,a,d;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(s.b)(t)];case 1:return(n=i.sent()).requestError?(r.k.error(n.requestError,k.name),e.dispatch(Object(o.r)(h(""))),[2]):n.error?(r.k.error(new Error(n.error.error),k.name),e.dispatch(Object(o.r)(h(n.error.message))),[2]):void 0===n.body?(e.dispatch(Object(o.r)(h(""))),[2]):(a=Object(l.c)(n.body),e.dispatch(Object(o.s)(a)),e.dispatch(Object(c.b)(S,a)),setTimeout(function(){e.dispatch(Object(o.q)())},5e3),[3,3]);case 2:return d=i.sent(),r.k.error(d,k.name),e.dispatch(Object(o.r)(h(""))),[3,3];case 3:return[2]}})})},C=function(e,t){return i.__awaiter(void 0,void 0,void 0,function(){var n;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(s.c)(t)];case 1:return i.sent(),e.dispatch(Object(o.t)({comment:t})),e.dispatch(Object(c.b)(E,{comment:t})),[3,3];case 2:return n=i.sent(),r.k.error(n,C.name),[3,3];case 3:return[2]}})})},y=function(e,t){return i.__awaiter(void 0,void 0,void 0,function(){var n,a;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(s.h)(t)];case 1:return n=i.sent(),e.dispatch(Object(o.v)(n)),[3,3];case 2:return a=i.sent(),r.k.error(a,y.name),[3,3];case 3:return[2]}})})},S=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var e,s;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:u,variables:{videoCreatorID:t.comments[0].channelId,videoID:t.comments[0].contentId}})];case 1:return e=i.sent().data,o.track(a.SpadeEventType.ChommentCreated,Object(d.f)(t,e)),[3,3];case 2:return s=i.sent(),r.k.error(s,S.name),[3,3];case 3:return[2]}})})},E=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var s,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:m,variables:{videoCreatorID:t.comment.channelId,commentCreator:t.comment.commenter,videoID:t.comment.contentId}})];case 1:return s=i.sent().data,o.track(a.SpadeEventType.ChommentDeleted,Object(d.g)(t,e.getState(),s)),[3,3];case 2:return l=i.sent(),r.k.error(l,E.name),[3,3];case 3:return[2]}})})},N=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var s,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:p,variables:{videoID:t.comment.contentId}})];case 1:return s=i.sent().data,o.track(a.SpadeEventType.ChommentUIAction,Object(d.e)(t,e.getState(),s)),[3,3];case 2:return l=i.sent(),r.k.error(l,N.name),[3,3];case 3:return[2]}})})},_=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var s,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:m,variables:{videoCreatorID:t.channelId,commentCreator:t.commenter,videoID:t.contentId}})];case 1:return s=i.sent().data,o.track(a.SpadeEventType.ChommentUIAction,Object(d.i)(t,e.getState(),s)),[3,3];case 2:return l=i.sent(),r.k.error(l,_.name),[3,3];case 3:return[2]}})})},D=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var l,c,u,m;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),l=e.getState(),c=Object(s.e)(t)?l.vodChat.comments.comments.parentComments[t.parentId].contentId:t.contentId,[4,n.query({query:p,variables:{videoID:c}})];case 1:return u=i.sent().data,o.track(a.SpadeEventType.ChommentUIAction,Object(d.h)(t,e.getState(),u)),[3,3];case 2:return m=i.sent(),r.k.error(m,D.name),[3,3];case 3:return[2]}})})},w=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var s,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:p,variables:{videoID:t.comment.contentId}})];case 1:return s=i.sent().data,o.track(a.SpadeEventType.ChommentUIAction,Object(d.j)(t,e.getState(),s)),[3,3];case 2:return l=i.sent(),r.k.error(l,w.name),[3,3];case 3:return[2]}})})},O=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var s,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:u,variables:{videoCreatorID:t.channelId,videoID:t.contentId}})];case 1:return s=i.sent().data,o.track(a.SpadeEventType.ChommentUIAction,Object(d.k)(t,e.getState(),s)),[3,3];case 2:return l=i.sent(),r.k.error(l,O.name),[3,3];case 3:return[2]}})})}},zWFo:function(e,t,n){},zixI:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnblockUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnblockUserInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unblockUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"targetUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"mutation UnblockUser($input: UnblockUserInput!) {\nunblockUser(input: $input) {\ntargetUser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"zmH+":function(e,t,n){},znm4:function(e,t,n){"use strict";var i=n("mrSG"),r=n("/MKj"),a=n("yR8l"),o=n("DMoW"),s=n("kRBY"),l=n("4rCz"),c=n("0Lz3"),d=n("WytW"),u=n("ZuiC"),m=n("sf7/"),p=n("HjbF"),h=n("kVrx"),g=n("zClW"),f=n("l41m"),b=function(e,t,n){return e&&t&&!n},v=n("Sfdh"),k=n("ZUUl"),C=n("pwkZ"),y=n("pq/L");n.d(t,"a",function(){return N});var S=2;var E=Object(r.connect)(function(e,t){var n={comments:[],currentVideoTime:e.vodChat.comments.currentVideoTime,cursor:e.vodChat.comments.cursor,errorMessage:e.vodChat.comments.errorMessage,hasFetchedComments:e.vodChat.comments.hasLoadedData,hasRequestedCurrentUserBlockList:e.vodChat.comments.hasLoadedCurrentUserBlockedList,isCreationCoolDownActive:e.vodChat.comments.isPostCooldownActive,isCurrentUserModerator:!1,isLoggedIn:Object(s.f)(e),isReplayFilterOn:e.vodChat.comments.isReplayFilterOn,isScrollingSynced:e.vodChat.comments.isScrollingSynced,offsetRange:Object(f.b)(e.vodChat.comments.comments),replyCursorMap:e.vodChat.comments.replyCursorMap,shouldSendReplayFilterError:!1,hideTimestamps:e.vodChat.comments.hideTimestamps};if(!t.data.loading&&!t.data.error&&t.data.video){var i=t.data,r=i.currentUser,a=i.video;null!==r&&r.roles&&(n.isCurrentUserModerator=Object(p.b)(r,a.owner)),n.comments=Object(f.c)(e,t.data.video.broadcastType,n.isCurrentUserModerator,t.blockedUsers),n.shouldSendReplayFilterError=b(e.vodChat.comments.isReplayFilterOn,t.data.video.broadcastType!==o.p.UPLOAD,e.vodChat.comments.hasDismissedChatReplayError)}return n},function(e,t){return{onUpdateBegan:function(n,i){if(n.videoID)if(i.videoID===n.videoID){if(!n.hasFetchedComments){var r={bitsConfig:t.bitsConfig,offset:n.currentVideoTime,videoID:n.videoID};if(n.highlightTimestamp&&n.currentVideoTime!==n.highlightTimestamp)return;return n.highlightedMessageID&&(r.highlightedMessageID=n.highlightedMessageID),void e(Object(k.a)(g.c,r))}if(n.offsetRange!==f.a){if(Object(p.f)({cursor:n.cursor,currentVideoTime:n.currentVideoTime,offsetEndTime:n.offsetRange.endSec,offsetThreshold:S}))return void e(Object(k.a)(g.c,{bitsConfig:t.bitsConfig,cursor:n.cursor.future,videoID:n.videoID}));if(Object(p.e)(n))return void e(Object(k.a)(g.c,{bitsConfig:t.bitsConfig,offset:n.currentVideoTime,videoID:n.videoID}))}}else e(Object(m.c)(n.videoID))},onCreate:function(t){if(Object(d.j)(t.message)){var n=Object(l.d)("Sorry, commands are not supported in Chat on Videos yet.","VideoChatPresentation");e(Object(u.u)(n))}else e(Object(k.a)(g.a,t)),e(Object(k.b)(g.e,t))},onError:function(t){e(Object(u.u)(t))},onErrorDismissClick:function(){e(Object(u.w)())},onUnmount:function(){e(Object(u.y)())},onLoadMoreReplies:function(t,n,i,r){e(Object(k.a)(g.c,Object(p.a)(t,n,i,r)))},onDisableSync:function(){e(Object(u.D)())},onEnableSync:function(){e(Object(u.E)())},onBanUser:function(t){e(Object(k.a)(h.a,t)),e(Object(k.b)(g.d,t))},onDeleteComment:function(t){e(Object(k.a)(g.b,t)),e(Object(k.b)(g.f,t))},onPlayerSeekRequest:function(n,i){t.onPlayerSeekRequest(n),void 0!==i&&e(Object(k.b)(g.h,i))},onTurnOffReplayFilter:function(){e(Object(u.C)(!1))},onWillMount:function(){e(Object(u.x)())},onDidMount:function(t){e(Object(u.C)(t))}}},function(e,t,n){var r=t.onDisableSync;e.isScrollingSynced||(r=function(){});var a=t.onCreate;return e.shouldSendReplayFilterError&&(a=function(e){t.onError(Object(v.a)().chatReplayFilterError),t.onCreate(e)}),i.__assign({},e,t,n,{onDisableSync:r,onCreate:a,data:n.data})})(C.a),N=Object(a.a)(y,{options:function(e){return{variables:{videoID:e.videoID,hasVideoID:!!e.videoID}}},props:function(e){var t=e.ownProps,n=e.data,r=n&&n.video&&n.video.owner&&n.video.owner.cheer&&n.video.owner.cheer.emotes||[],a=Object(c.a)(r),o={};return n&&!n.loading&&!n.error&&n.currentUser&&n.currentUser.blockedUsers&&(o=n.currentUser.blockedUsers.reduce(function(e,t){return t&&t.id&&(e[t.id]=!0),e},{})),i.__assign({},t,{data:n,bitsConfig:a,blockedUsers:o})}})(E)},zxEZ:function(e,t,n){"use strict";var i=n("mSxK");n.d(t,"a",function(){return i.c}),n.d(t,"b",function(){return i.d})},zyUW:function(e,t,n){}}]);