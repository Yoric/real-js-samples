if(typeof YAHOO==="undefined"){YAHOO={}}if(typeof YAHOO.JP==="undefined"){YAHOO.JP={}}if(typeof YAHOO.JP.News==="undefined"){YAHOO.JP.News={}}(function($){YAHOO.JP.News.globalNav={state:{},init:function(setting){var _this=this,_setting=setting||{};this.searchObj=$("#headerSearch");this.txtObj=$(".searchInput",this.searchObj);this.baloonObj=$(".searchSelect",this.searchObj);this.bubbleObj=$(".bubble",this.searchObj);this.currentObj=$(".currentSearch",this.searchObj);this.mainNavObj=$("#gnPri");this.state.currentSearchType=_setting.defaultSearchType||"searchNews";var supportsInputAttribute=function(attr){var input=document.createElement("input");return attr in input};if(!supportsInputAttribute("placeholder")){this.textEdited=false;this.addEventPlaceholder()}else{this.textEdited=true}this.addEventBaloon();$("a",this.baloonObj).on("click touchstart",function(e){e.preventDefault();_this.selectCategory($(this).parent().attr("id"))})},addEventPlaceholder:function(){var _this=this;this.txtObj.each(function(i){var placeholder=$(this).attr("placeholder"),_thisObj=$(this);_this.showPlaceholder(placeholder,_thisObj);_thisObj.on("click.clearTxt focus.clearTxt",function(e){e.preventDefault();_this.hidePlaceholder(placeholder,$(this));$(this).on("blur",function(){e.preventDefault();_this.showPlaceholder(placeholder,$(this))})});$(".searchButton input",_this.searchObj).on("click.clearTxt touchend.clearTxt",function(e){_this.hidePlaceholder(placeholder,_thisObj)});_thisObj.on("change",function(){_this.textEdited=true})})},showPlaceholder:function(_placehodler,e){if(e.val()===""){e.val(_placehodler);e.css("color","#B7B7B7");this.textEdited=false}},hidePlaceholder:function(_placehodler,e){if(e.val()==_placehodler&&!this.textEdited){e.val("");e.css("color","#333333")}},addEventBaloon:function(){var _this=this;this.currentObj.on("click.show",function(e){e.preventDefault();if(_this.baloonObj.css("display")=="none"){var _currentNum;$("form",_this.searchObj).each(function(i){if($(this).hasClass("current")){currentNum=i}});_this.showBaloon(_this.currentObj.index(this),currentNum)}else{_this.hideBaloon()}})},showBaloon:function(_clicked,_currentNum){var _this=this;this.baloonObj.removeClass("hide");this.bubbleObj.removeClass("hide");$("a",this.mainNavObj).css("-webkit-tap-highlight-color","rgba(0,0,0,0)");$("a",this.baloonObj).on("click.sync",function(){var inputVal=_this.txtObj.eq(_currentNum).val();_this.txtObj.each(function(){if(_this.textEdited==true){$(this).val(inputVal).css("color","#333333")}else{$(this).val($(this).attr("placeholder")).css("color","#B7B7B7")}})});$(document).on("click.hide touchstart.hide",function(e){e.stopPropagation();e.preventDefault();if(e.target&&(!$.contains(_this.baloonObj.get(0),e.target)&&!$.contains(_this.bubbleObj.get(0),e.target))){if(!$.contains(_this.currentObj.get(_clicked),e.target)){e.stopPropagation();e.preventDefault();_this.hideBaloon();$(document).off("click.hide touchstart.hide")}}})},hideBaloon:function(){this.baloonObj.addClass("hide");this.bubbleObj.addClass("hide");$("a",this.mainNavObj).css("-webkit-tap-highlight-color","rgba(102,204,255,0.5)");$("a",this.baloonObj).off("click.sync")},selectCategory:function(id){$("a","#"+this.state.currentSearchType).removeClass("current");$("a","#"+id).addClass("current");$("#"+this.state.currentSearchType+"Form").removeClass("current");$("#"+id+"Form").addClass("current");this.state.currentSearchType=id;this.hideBaloon();$(document).off("click.hide touchstart.hide")}}})(jQuery);