/* commentloader-6.2.0.min.js 2018-08-07 17:04:14 */
!function(t){t("util",[],function(){"use strict";var t={extend:function(t){for(var e=[].slice.call(arguments,1),n=0;n<e.length;n++)for(var r in e[n])t[r]=e[n][r];return t}};return t.extend(t,{reduce:function(t,e,n){for(var r=n,o=0;o<t.length;o++)r=e(r,t[o],o,t);return r},map:function(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r,t));return n},range:function(e,n){t.isUndefined(n)&&(n=e,e=0);for(var r=[],o=e;n>o;o++)r.push(o);return r},keys:function(t){var e=[];for(var n in t)e.push(n);return e},isArray:function(t){return t instanceof Array},isUndefined:function(t){return"undefined"==typeof t},isObject:function(t){return"object"==typeof t},each:function(t,e){for(var n=0;n<t.length;n++)e(t[n],n,t)},filter:function(t,e){for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n},trim:function(t){return t.replace(/^\s+|\s+$/g,"")},makeNameSpace:function(e,n){var r=t.isArray(n)?n:n.split(".");return t.reduce(r,function(t,e){return t[e]||(t[e]={}),t[e]},e)},buildQuery:function(e){return t.map(t.keys(e),function(t){return t+"="+encodeURIComponent(e[t])}).join("&")},parseGetParam:function(e){var n={},r=e?e.split("&"):[];return t.each(r,function(e){var r=e.split("="),o=t.trim(r[0]),a=t.isUndefined(r[1])?"":t.trim(decodeURIComponent(r[1]));n[o]=a}),function(e,r,o){switch(arguments.length){case 3:return!t.isUndefined(n[e])&&r.test(n[e])?n[e]:o;case 1:return n[e];default:throw"Invalid argument"}}},getOrigin:function(t){return t.split("/").slice(0,3).join("/")}}),t}),t("global",[],function(){"use strict";return Function("return this")()}),t("jquery",["global"],function(t){"use strict";return t.jQuery}),t("location",[],function(){"use strict";return location}),t("eventemitter",["util"],function(t){"use strict";var e="*",n=function(t,e,n,r){var o=t.__events||(t.__events=[]);o.push({type:e,listener:n,options:r||{}})};return{on:function(e,r,o){if(t.isObject(arguments[0])){var a=arguments[0],i=this;t.each(t.keys(a),function(t){n(i,t,a[t],{})})}else n(this,e,r,o)},once:function(e,r){var o={once:!0};if(t.isObject(arguments[0])){var a=arguments[0],i=this;t.each(t.keys(a),function(t){n(i,t,a[t],o)})}else n(this,e,r,o)},trigger:function(n,r){var o=this.__events||(this.__events=[]),a=t.filter(o,function(t){var r=!t.options.once||t.options.once&&!t.executed;return(t.type===e||t.type===n)&&r}),i=this;t.each(a,function(t){t.type===e?t.listener.call(i,n,r):t.listener.call(i,r),t.executed=!0})}}}),t("iframecommunicator_parent",["global","jquery","location","util","eventemitter"],function(t,e,n,r,o){"use strict";function a(n){var a=r.extend({iframe:null,childOrigin:"*",forceIframe:!1,messageFilter:function(){return!0},messageParser:function(t){return{event:"message",data:t}},messageMaker:function(t){return t}},n),i=e(a.iframe),s=r.extend({},o);if(0===i.length)throw"No iframe";var f=i.get(0).contentWindow,p=function(){return!a.forceIframe&&c?function(t){f.postMessage(t,a.childOrigin)}:function(t){var e=u(i.attr("src"),t);i.attr("src",e)}}(),d=function(t){var e=a.messageParser(t);a.messageFilter(e)&&s.trigger(e.event,e.data)};return l(a.callback,d),e(t).on("message",function(t){a.childOrigin===t.originalEvent.origin&&d(t.originalEvent.data)}),{send:function(){p(a.messageMaker.apply(null,arguments))},receiver:s}}function i(e){var o=n.hash.slice(1),a=r.reduce(e.callback.split("."),function(t,e){return t[e]},t.parent.parent);a(o)}var c=!!t.postMessage,u=function(t,e){return t.split("#")[0]+"#"+e},s=function(t){return t&&t.trigger&&t.on},l=function(e,n){e=r.isArray(e)?e:e.split(".");var a=e.slice(-1)[0],i=r.makeNameSpace(t,e.slice(0,-1));s(i[a])||(i[a]=r.extend(function(t){i[a].trigger("*",t)},o)),i[a].on("*",function(t,e){n(e)})};return{Parent:a,GrandChild:i}}),t("navigator_util",["global","util"],function(t,e){"use strict";function n(t){var n=t.toLowerCase(),r=function(t){return-1!==n.indexOf(t)},o={msie:!r("opera")&&(r("msie")||r("trident")),android:r("android"),chrome:r("safari")&&r("chrome"),safari:r("safari")&&!r("chrome")&&!r("android"),firefox:r("firefox"),opera:r("opera")};return o.currentBrowser=e.reduce(e.keys(o),function(t,e){return t||o[e]&&e},null),o}function r(t,e){var n=function(t,e){return function(n){var r=n.match(t);return r&&r[e]||null}},r={msie:n(/(msie\s|rv:)([\d+\.\d+]+)/,2),firefox:n(/firefox\/(\d+\.\d+)/,1),chrome:n(/chrome\/(\d+\.\d+)/,1),safari:n(/version\/(\d+\.\d+)/,1),opera:function(t){var e=-1!==t.indexOf("version/"),r=-1===t.indexOf("opera/");return e?n(/version\/(\d+\.\d+)/,1)(t):r?n(/opera (\d+\.\d+)/,1)(t):n(/opera\/(\d+\.\d+)/,1)(t)},android:n(/android (\d+\.\d+)/,1)}[t];return r?parseFloat(r(e.toLowerCase())):0}return function(t){var o=n(t),a=r(o.currentBrowser,t),i=function(t){return t>=a};return e.extend({version:a,upto:i},o)}}),t("elm-visibility",["util","navigator_util"],function(t,e){"use strict";function n(t,e){return!t.parentNode||t.parentNode===document.documentElement&&t!==e?!1:t===e||n(t.parentNode,e)}function r(){var t="CSS1Compat"===document.compatMode;return{width:t&&document.documentElement.clientWidth||document.body.clientWidth,height:t&&document.documentElement.clientHeight||document.body.clientHeight}}function o(t,e,n){return e>0&&n>0&&t.width>e&&t.height>n}function a(t){return Math.min(Math.max(t,0),1)}function i(t,e){return e.top<0?1:a(1-(e.top-t.height)/e.top)}function c(t,e){var n=e.bottom-e.top,r=(t.height-e.top)/n;return a(r)}function u(t){return t.left+Math.round((t.right-t.left)/2)}function s(t,e){for(var n=10,r=u(e),a=(e.bottom-e.top)/n,i=0,c=e.top;n>i;i++,c+=a)if(o(t,r,c))return c;return!1}function l(t){var e=t.getBoundingClientRect(),o=r(),a=s(o,e),l=p(u(e),a+1),f=a!==!1&&l&&n(l,t);return{isVisible:f,scrollDegree:i(o,e),visiblePartRate:c(o,e)}}var f=window.navigator.userAgent,p=function(){var t=e(f),n=t.opera&&t.upto(10.1)||t.safari&&t.upto(4),r=function(t,e){return{left:t,top:e}},o=function(t,e){return r(t+document.body.scrollLeft,e+document.body.scrollTop)},a=n?o:r;return function(t,e){var n=a(t,e);return document.elementFromPoint(n.left,n.top)}}();return{getVisibility:l}}),t("interval",[],function(){"use strict";var t=function(t,e){var n=setInterval(t,e);return function(){clearInterval(n)}};return t}),t("timeout",[],function(){"use strict";var t=function(t,e){var n=setTimeout(t,e);return function(){clearTimeout(n)}};return t}),t("watcher",["util","interval","timeout"],function(t,e,n){"use strict";return function(r){var o,a=t.extend({interval:50,watch:function(){},onChange:function(){},compare:function(t,e){return t===e},startDelay:0,autoStart:!0},r),i=t.isUndefined(a.initialValue)?a.watch():a.initialValue,c=function(){var t=a.watch();a.compare(i,t)||(a.onChange(i,t),i=t)},u=function(){o&&o()},s=function(){u(),o=e(c,a.interval)};return a.autoStart&&n(s,a.startDelay),{stop:u,start:s}}}),t("../commentloader",["global","jquery","location","util","iframecommunicator_parent","elm-visibility","watcher","timeout","eventemitter"],function(t,e,n,r,o,a,i,c,u){var s="YAHOO.JP.News.comment",l=s+".callback",f="https://news.yahoo.co.jp/comment/plugin/v1/full/",p="https://news.yahoo.co.jp/comment/plugin/v1/short/",d=r.getOrigin(n.href),m=1e4,h=".news-comment-plugin",v="news-comment-plguin-iframe",g={pc:"pc",smartphone:"smartphone"},y={full:"full","short":"short"},w={sort:"s",order:"o",page:"p",type:"t"},b={sort:"lost_points",order:"desc",page:1,type:""},_=r.parseGetParam(n.search.slice(1)),k=function(){var n=function(t,n){var r=e(e("body").scrollTop()>=e("html").scrollTop()?"body":"html");r.animate({scrollTop:t.offset().top+n},"slow","swing")},c=function(t,n,r){return e("<iframe>").addClass(v).css({width:"100%",height:0,border:"none"}).attr({scrolling:"no",frameborder:0,src:n+"?"+e.param(r)}).appendTo(t)},s=function(t){var n="コメントを取得出来ませんでした<br>しばらく時間をおいてからもう一度お試しください。",r='"メイリオ", "ヒラギノ角ゴ Pro W3", "MS PGothic", "MS UI Gothic", Helvetica, Arial, sans-serif',o=e(t).empty();e("<div>").css({textAlign:"center",padding:"30px",lineHeight:"2em",fontFamily:r}).html(n).appendTo(o)},h=function(t){e("> *",t).not("."+v).remove()},k=function(t){return{sort:_(t.sort,/^[a-z_]+$/,b.sort),order:_(t.order,/^(desc|asc)$/,b.order),page:_(t.page,/^[0-9]+$/,b.page),type:_(t.type,/^[a-z_]+$/,w.type)}};return function(b,x){var j=x.deviceType===g.smartphone,O=b===y.full,A=O?f:p,I=O?k(x.page_keys||w):{},P=r.isUndefined(_("expand_form"))?{}:{expand_form:""},C=e.extend({origin:d},I,x.params,P);O||(C.device=x.deviceType),C.ua=navigator.userAgent;var M=c(x.target,A,C),R=new o.Parent({iframe:"."+v,callback:l,childOrigin:r.getOrigin(A),messageParser:function(t){t="#"===t.charAt(0)?t.substr(1):t;var e=t.split("-");return{event:e[0],data:e[1]}}}),N=t.setTimeout(function(){s(x.target)},m),E=!1;R.receiver.on({dispform:function(t){n(M,~~t)},postcomment:function(r){r=j?r-1*e(t).height()/3:.9*r,n(M,r)},adjustheight:function(t){e(M).is(":visible")&&(0==E?setTimeout(function(){E=!0},10):M.height(t))},init:function(e){t.clearTimeout(N),h(x.target),R.receiver.trigger("adjustheight",~~e)}}),x.onload&&R.receiver.once("init",x.onload),x.onOpenModule&&R.receiver.on("openmodule",x.onOpenModule),x.onCloseModule&&R.receiver.on("closemodule",x.onCloseModule);var S=r.extend({},u);S.once({top:function(){R.send("view-top")},bottom:function(){R.send("view-bottom")}});var T=new i({interval:50,autoStart:!1,watch:function(){return a.getVisibility(M.get(0))},compare:function(t,e){return e.isVisible?t.visiblePartRate===e.visiblePartRate?!0:!1:!0},onChange:function(t,e){e.visiblePartRate>0&&S.trigger("top"),1===e.visiblePartRate&&S.trigger("bottom")}});R.receiver.once("init",function(){T.start()})}}(),x=function(){var t=new e.Deferred,n=new e.Deferred,o=function(n){var r=e(n.target),o=new i({initialValue:!1,watch:function(){var t=a.getVisibility(r.get(0));return t.isVisible||t.scrollDegree>n.autoload_on},onChange:function(){t.resolve(),o.stop()}})},c=function(e,a){var i=r.extend({autoload:!0,autoload_on:.7},a);t.then(function(){k(e,i)}),n.then(function(){i.autoload?o(i):t.resolve()})};return e(function(){var t=e(h);if(t.length){var o="full"===t.attr("data-page-type"),a="pc"===t.attr("data-device-type"),i=!r.isUndefined(t.attr("data-defer")),u=!!r.isUndefined(t.attr("data-autoload")),s={deviceType:a?g.pc:g.smartphone,target:h,params:{keys:t.attr("data-keys"),full_page_url:t.attr("data-full-page-url"),comment_num:t.attr("data-comment-num"),iframe_path:t.attr("data-iframe-path"),ref:t.attr("data-ref")||"",bkt:t.attr("data-bkt")||"",flt:t.attr("data-flt")||"",grp:t.attr("data-grp")||"",opttype:t.attr("data-opttype")||"",disable_total_count:t.attr("data-disable-total-count")||"",compact:t.attr("data-compact")||"",compact_initial_view:t.attr("data-compact-initial-view")||"",display_author_banner:t.attr("data-display-author-banner")||"off"}};i&&(s.defer=i),u&&(s.autoload=u),c(o?y.full:y.short,s),!s.defer&&n.resolve()}}),{show:function(){n.resolve()},showFull:function(t){c(y.full,t),!t.defer&&n.resolve()},showShort:function(t){c(y.short,t),!t.defer&&n.resolve()}}}(),j=r.makeNameSpace(t,s);r.extend(j,x)}),t("../commentcount",["global","jquery","location","util"],function(t,e,n,r){var o="YAHOO.JP.News.comment",a="https://news.yahoo.co.jp/comment/plugin/v1/count/",i=["YJApp-IOS jp.co.yahoo.yjtrend01","YJApp-IOS jp.co.yahoo.news.tablet","YJApp-ANDROID jp.co.yahoo.android.news","YJNewsApp"],c=["YJApp-IOS jp.co.yahoo.ipn.appli","YJApp-ANDROID jp.co.yahoo.android.yjtop"],u=["YJApp-IOS jp.co.yahoo.yjtrend01\\/([0-9]+(.[0-9]+)*)","YJApp-IOS jp.co.yahoo.news.tablet\\/([0-9]+(.[0-9]+)*)","YJApp-ANDROID jp.co.yahoo.android.news\\/([0-9]+(.[0-9]+)*)","YJApp-ANDROID jp.co.yahoo.android.news.tablet\\/([0-9]+(.[0-9]+)*)","YJNewsApp\\/([0-9]+(.[0-9]+)*)"],s="^(Mozilla\\/5.0 \\(iPhone;|Mozilla\\/5.0 \\(iPad;|Mozilla\\/5.0 \\(iPod)",l="^Mozilla\\/5.0 \\(Linux;.* Android ([0-9\\.]+)",f="OS ([0-9]+_[0-9]+_[0-9]+|[0-9]+_[0-9]+)",p="^Mozilla\\/5.0 \\(Linux;.* Android ([0-9\\.]+)",d="(iphone|ipod|android|mobile)",m="(ipad|android)",h="Chrome\\/([0-9.]+)",v="10",g="4.4",y="40",w="5.9.0",b="1.16.0",_="yjnews://cmt/dtl/",k="https://approach.yahoo.co.jp/r/OMLQSP?src=",x=navigator.userAgent,j=function(){var t=function(t){var n="design"in t?"?type="+t.design:"",r=a+t.property_id+"/"+t.topic_id+"/"+n,o=new Image;o.onload=function(){e(t.placeholder).html(o)},o.src=r,"height"in t&&(o.style.height=t.height),A(t)},n=function(t){var n=a+t.property_id+"/"+t.topic_id+"/?output=json&callback=?";e.ajax({url:n,type:"GET",dataType:"jsonp",cache:!0,jsonpCallback:"commentcount",timeout:1e3}).done(function(e){var n=parseInt(e.count,"10");isNaN(n)&&(n=0),t.count=n,r(t),A(t)}).fail(function(){t.count=0,r(t),A(t)})},r=function(t){var n=0===t.count?0:t.count,r="href"in t?t.href:"javascript:void(0);",o='<a href="'+r+'"><span class="count">'+n+"</span></a>";e(t.placeholder).children().animate({opacity:0},function(){e("a",t.placeholder).remove(),e(t.placeholder).append(o)}),t.count>=1500&&e(t.placeholder).addClass("ycCountBtn-large")},o=function(t){var n="https://s.yimg.jp/images/jpnews/cre/common/all/images/loading24_w_2x.gif";e(t.placeholder).html('<a href="javascript:void(0);"><span><img src="'+n+'" style="width:24px;height:24px;">').addClass("ycCountBtn")},j=function(t){var e="cmtmod_count",n="cid"in t?{cid:t.cid,rpdprop:"news"}:{rpdprop:"news"};"bkt"in t&&(n.vtestid=t.bkt),"flt"in t&&(n.v_pkjp=t.flt),n.count=0===t.count?0:"Num";var r="pos"in t?[{mod:{name:e},links:[{params:{sec:e,slk:t.slk,pos:t.pos}}]}]:[{mod:{name:e},links:[{params:{sec:e,slk:t.slk}}]}];return{pageParam:n,linkParam:r,sid:t.space_id,params:r[0].links[0].params}},O=function(t){return YAHOO.i13n.Beaconer({beacon_server:"ybx.yahoo.co.jp",https:!0,keys:t.pageParam,link_data:t.linkParam,spaceid:t.sid})},A=function(t){var n=j(t),r=O(n);r.doViewBeacon(0),e(t.placeholder).on("click",function(){r.doClickBeacon(n.params)})},I=function(t){"scroll_to"in t&&e(t.placeholder).on("click",function(){var n=e(t.scroll_to).offset().top;e("body,html").animate({scrollTop:n},300,"swing")})},P=function(){var t=!1;return u.forEach(function(e){var n=new RegExp(e),r=x.match(n);return null!==r?void(t=r[1]):void 0}),t},C=function(){var t=new RegExp(d,"i"),e=new RegExp(m,"i");return null!==x.match(t)?"sp":null!==x.match(e)?"tab":"pc"},M=function(){var t=!1;return i.forEach(function(e){return null!==x.match(e)?void(t=!0):void 0}),t},R=function(){var t=new RegExp(s,"i");return null!==x.match(t)?!0:!1},N=function(){if(!M())return!1;if("sp"!==C())return!1;var t=P(),e=R()?w:b;return t&&E(t,e,">=")},E=function(t,e,n){for(var r=t.split("."),o=e.split("."),a=Math.max(r.length,o.length),i=0,c=0;a>c;c++){if(r[c]&&!o[c]&&parseInt(r[c])>0||parseInt(r[c])>parseInt(o[c])){i=1;break}if(o[c]&&!r[c]&&parseInt(o[c])>0||parseInt(r[c])<parseInt(o[c])){i=-1;break}}switch(n){case">":return i>0;case">=":return i>=0;case"<=":return 0>=i;case"===":case"==":return 0===i;case"<>":case"!==":case"!=":return 0!==i;case"<":return 0>i;default:return!1}},S=function(t){if("sp"!==C())return!1;var e="pay_flag"in t?t.pay_flag:!1;if(e===!1||1===parseInt(e))return!1;if(T())return!1;if(M())return!1;if(null!==x.match(/; wv\)/))return!1;if(null!==x.match(/\sNP[0-9]{3}/))return!1;var n=Y();if(n)return E(n,v,">=");var r=J();if(r){var o=U();return o!==!1&&E(o,y,"<")?!1:E(r,g,">=")}return!1},T=function(){var t=!1;return c.forEach(function(e){return null!==x.match(e)?void(t=!0):void 0}),t},D=function(){var t=new RegExp(l,"i");return null!==x.match(t)?!0:!1},Y=function(){if(!R())return!1;var t=new RegExp(f,"i"),e=x.match(t);return null!==e?e[1].replace("_","."):!1},J=function(){if(!D())return!1;var t=new RegExp(p,"i"),e=x.match(t);return null!==e?e[1]:!1},U=function(){var t=new RegExp(h),e=x.match(t);return null!==e?e[1]:!1};return{showCommentCount:function(r){if(r.property_id&&r.topic_id){var a="html",i={html:"html",img:"img"};if(!("type"in r&&r.type in i==!1)){if(r=e.extend({type:r.type||a,slk:i[r.type||a]},r),"to_app_flag"in r&&1===parseInt(r.to_app_flag))if(N())r.href=_+r.property_id+"/"+r.topic_id+"/";else if(S(r)){var c=r.full_page_url,u=document.createElement("a");u.href=r.full_page_url;var s=u.search.substr(1),l=s.split("&"),f={};if(l.forEach(function(t){var e;e=t.split("=");var n=e[0];f[n]=e[1]}),f.d){var p=f.d.match(/([0-9]+\-[0-9]+\-[0-9a-z_]+).*/);c=r.full_page_url+"&topic_id="+p[1]}r.href=k+encodeURIComponent(c)}else r.href=r.full_page_url;else I(r);"html"===r.type?(o(r),e(function(){n(r)})):"img"===r.type&&e(function(){t(r)})}}}}}(),O=r.makeNameSpace(t,o);r.extend(O,j)}),t("../index",["util","../commentloader","../commentcount"],function(t){var e=[].slice.call(arguments,1),n={};return t.each(e,function(e){t.extend(n,e)}),n})}(function(){var t={},e=function(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=e(t[r]);return n};return function(n,r,o){switch(arguments.length){case 3:r=arguments[1],o=arguments[2];break;case 2:r=[],o=arguments[1];break;default:throw"Unknown style of define function"}t[n]=function(){return"object"==typeof o?o:o.apply(null,e(r,function(e){return t[e]}))}()}}());