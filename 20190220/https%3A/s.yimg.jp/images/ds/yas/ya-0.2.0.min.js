!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ya=t():e.ya=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){!function(t,n){e.exports=n()}("undefined"!=typeof self&&self,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function r(e){return Object.prototype.toString.call(e).slice(8,-1)}function i(e,t){return void 0!==t&&null!==t&&r(t)===e}function o(e){return i("Object",e)}function u(e){return i("Array",e)}function a(e){return i("String",e)}function l(e){return Math.abs(e)===1/0}function f(e){return i("Number",e)&&!v(e)&&!l(e)}function s(e){return i("Boolean",e)}function c(e){return i("Function",e)}function d(e){return i("Map",e)}function p(e){return null===e}function g(e){return void 0===e}function y(e){return f(e)||a(e)||s(e)}function v(e){return!("object"!==(void 0===e?"undefined":P(e))||!i("Number",e)||!isNaN(e))||i("Number",e)&&e!==e}function h(e,t){return i("Object",e)&&e.hasOwnProperty(t)}function m(e){if(!a(e))return!1;var t=/^[\da-fA-F]{8}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{12}$/;return null!==e.match(t)}function b(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.length,i={},o=0;o<r;o++)!function(e){var n=t[e];Object.keys(n).forEach(function(e){i[e]=n[e]})}(o);return i}function _(e){return JSON.parse(JSON.stringify(e))}function O(){return(new Date).getTime()}function k(e){return""+e}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e=Number(e),f(e)?e:t}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e=C(e,t),e===t?e:parseInt(e)}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e=w(e,t),e===t?e:e>=0?e:t}function L(e){return!!(p(e)||g(e)||v(e))||(a(e)?""===e:f(e)||l(e)?0===e:o(e)?0===Object.keys(e).length:u(e)?0===e.length:!!d(e)&&0===e.size)}function j(e){return e=k(e).replace(/_+([a-z])/g,function(e,t){return t.toUpperCase()}),e.charAt(0).toLowerCase()+e.slice(1)}function T(e){var t="";return o(e)&&(t=Object.keys(e).map(function(t){return[t,e[t]].map(k).map(encodeURIComponent).join("=")}).join("&")),t}Object.defineProperty(t,"__esModule",{value:!0});var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default={getType:r,is:i,isObject:o,isArray:u,isString:a,isNumber:f,isBoolean:s,isMap:d,isPrimitive:y,isFunction:c,isNull:p,isNaN:v,isUndefined:g,findKey:h,isUUID:m,deepCopy:_,merge:b,getTime:O,normalizeToString:k,normalizeToNumber:C,normalizeToInt:w,normalizeToUnsignedInt:U,isEmpty:L,snakeToLCC:j,urlQueryBuild:T}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=t.Util=t.CLog=void 0;var i=n(2),o=r(i),u=n(0),a=r(u),l=n(3),f=r(l);t.CLog=o.default,t.Util=a.default,t.Browser=f.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return["Object","Console"].indexOf(a.default.getType(console))>=0?console:{}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(){function e(){r(this,e)}return o(e,null,[{key:"debug",value:function(){var t=i();if(this.logLevel>=e.DEBUG){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];a.default.isFunction(t.debug)?this.printLog(t.debug,r):a.default.isFunction(t.log,r)&&(r.unshift("[DEBUG]"),this.printLog(t.log,r))}}},{key:"info",value:function(){var t=i();if(this.logLevel>=e.INFO){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];a.default.isFunction(t.info)?this.printLog(t.info,r):a.default.isFunction(t.log,r)&&(r.unshift("[INFO]"),this.printLog(t.log,r))}}},{key:"warning",value:function(){var t=i();if(this.logLevel>=e.WARNING){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];a.default.isFunction(t.warn)?this.printLog(t.warn,r):a.default.isFunction(t.log,r)&&(r.unshift("[WARN]"),this.printLog(t.log,r))}}},{key:"error",value:function(){var t=i();if(this.logLevel>=e.CRITICAL){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];a.default.isFunction(t.error)?this.printLog(t.error,r):a.default.isFunction(t.log,r)&&(r.unshift("[ERROR]"),this.printLog(t.log,r))}}},{key:"printLog",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=new Date;i.unshift("["+o.toLocaleTimeString()+"."+o.getUTCMilliseconds()+"]"),a.default.isEmpty(this._prefix)||i.unshift(this._prefix),r.apply(console,i)}},{key:"NONE",get:function(){return 0}},{key:"CRITICAL",get:function(){return 1}},{key:"WARNING",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"prefix",set:function(e){this._prefix=e}},{key:"defaultLogLevel",get:function(){return this.CRITICAL}},{key:"logLevel",get:function(){return a.default.isNumber(this._logLevel)?this._logLevel:this.defaultLogLevel},set:function(e){a.default.isNumber(e)&&[0,1,2,3,4].indexOf(e)>=0&&(this._logLevel=e)}}]),e}();t.default=l},function(e,t,n){"use strict";(function(e){function r(t,n){if("object"!==(void 0===t?"undefined":o(t)))return null;var r={},i=t.line||t.lineNumber,u=t.column||t.columnNumber;return r.ts=a.default.getTime(),t.name&&(r.name=t.name),t.message&&(r.message=t.message),t.stack&&(r.stack=t.stack),i&&(r.line=i),u&&(r.col=u),"object"===o(e.performance)&&"object"===o(e.performance.timing)&&a.default.isNumber(e.performance.timing.navigationStart)&&(r.progress_time=r.ts-e.performance.timing.navigationStart),r.ex_base="",void 0!==e.location&&void 0!==e.location.href&&(r.url=e.location.href),a.default.isString(n)&&(r.label=n),r}function i(e,t){var n=document.createElement("img");a.default.isFunction(t)&&(n.onload=t),n.src=e}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(u);t.default={generateMetrics:r,createImageTag:i}}).call(t,n(4))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n}])})},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(15),a=r(u),l=n(16),f=r(l),s=n(0),c=function(){function t(){i(this,t)}return o(t,null,[{key:"formatParameters",value:function(e){var t={};return s.Util.isObject(e)?(Object.keys(e).forEach(function(n){var r=s.Util.snakeToLCC(n);t[r]=e[n]}),t):t}},{key:"buildWritableCommonData",value:function(){f.default.document=e.document;var t={nonInteraction:!this.defaultInteraction,dataSource:f.default.dataSource,location:f.default.location,referrer:f.default.referrer,title:f.default.title,language:f.default.language,screenColors:f.default.screenColors,screenResolution:f.default.screenResolution,orientation:f.default.orientation,viewportSize:f.default.viewportSize};return Object.keys(t).forEach(function(e){s.Util.isNull(t[e])&&delete t[e]}),t}},{key:"buildNonWritableCommonData",value:function(){return{property:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,sdkName:f.default.sdkName,sdkVersion:f.default.sdkVersion,hitType:this.hitType||null,timestamp:s.Util.getTime()}}},{key:"run",value:function(e,t,n,r,i){if(!s.Util.isString(this.schemaName)||s.Util.isEmpty(this.schemaName))return null;if(!s.Util.isObject(this.rule))return null;if(this.validator.addRule(this.schemaName,this.rule),s.CLog.debug("[BaseBuilder#run] hit schema = "+this.schemaName+", rule =",this.rule),!s.Util.isString(e)||s.Util.isEmpty(e))return null;var o=this.buildWritableCommonData(),u=this.formatParameters(t),a=this.formatParameters(n),l=this.formatParameters(r),f=this.formatParameters(i),c=this.buildNonWritableCommonData(e);c.hitSequence=l.hitSequence,c.pvid=a.pvid,s.CLog.debug("[BaseBuilder#run] common =",o,"builder =",u,"base =",a,"tracker =",l,"hit =",f,"non_writable =",c);var d=s.Util.merge(o,u,a,l,f,c);return this.validator.run(this.schemaName,d).data}},{key:"validator",get:function(){return s.Util.isUndefined(this._validator)&&(this._validator=new a.default),this._validator}}]),t}();t.default=c}).call(t,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={hitType:{short:"t",type:"string"},property:{short:"tid",type:"string"},timestamp:{short:"ts",type:"number"},sdkName:{short:"sdk",type:"string"},sdkVersion:{short:"sdkv",type:"string"},nonInteraction:{short:"ni",type:"boolean"},location:{short:"dl",type:"string"},referrer:{short:"dr",type:"string"},title:{short:"dt",type:"string"},contentGroup:{short:"cg",type:"string",numbered:!0,min:1,max:5},language:{short:"ul",type:"string"},dataSource:{short:"ds",type:"string"},screenResolution:{short:"sr",type:"string"},viewportSize:{short:"vp",type:"string"},screenColors:{short:"sd",type:"number"},orientation:{short:"ori",type:"string"},hitSequence:{short:"hs",type:"number"},pvid:{short:"pvid",type:"string"}};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return c.Util.isUndefined(e)||c.Util.isNull(e)?"":c.Util.isPrimitive(e)?c.Util.normalizeToString(e):""}function u(e){if(c.Util.isUndefined(e)||c.Util.isNull(e))return v;if(c.Util.isPrimitive(e)){var t=c.Util.normalizeToString(e);return""!==t?t:v}return""}function a(e){return""!==e}function l(e,t){return!c.Util.isUndefined(e[t])&&e[t]instanceof p.default?e[t].getParameters():null}function f(e,t,n){if(!c.Util.isUndefined(n[t]))return n;var r=l(e,t);return c.Util.isNull(r)||(n[t]=r),n}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),d=n(9),p=r(d),g=n(10),y=r(g),v="default",h=function(){function e(){i(this,e),this.trackers={},this.tokens={},this.groups={default:[]},this.baseParameters={},this.pvid=(0,y.default)(),c.CLog.debug("[YAConfigurator#constructor] pvid = "+this.pvid)}return s(e,null,[{key:"getInstance",value:function(){return m}}]),s(e,[{key:"registerTracker",value:function(e,t,n){var r=o(e);if(""===r)return c.CLog.error("[YAConfigurator#registerTracker] 不正なトラッキングID",e),null;if(c.Util.isUndefined(t))return c.CLog.error("[YAConfigurator#registerTracker] TOKENが見つからない"),null;var i=u(n);if(""===i)return c.CLog.error("[YAConfigurator#registerTracker] 不正なグループ名"),null;if(!c.Util.isUndefined(this.trackers[r]))return c.CLog.debug("[YAConfigurator#registerTracker] Already created tracker, ["+r+"]"),this.trackers[r];var a=new p.default(r,i);return this.trackers[r]=a,this.tokens[r]=t,c.Util.isUndefined(this.groups[i])?(c.CLog.debug("[YAConfigurator#registerTracker] new group, ["+i+"]"),this.groups[i]=[r]):this.groups[i].push(r),c.CLog.info("[YAConfigurator#registerTracker] トラッカーを作成しました\nTrackingID="+r+", Group="+i+", Token="+t),a}},{key:"updateTracker",value:function(e,t){var n=o(e);if(""===n)return c.CLog.error("[YAConfigurator#updateTracker] 不正なトラッキングID",e),!1;var r=this.trackers[n];return c.Util.isUndefined(r)?(c.CLog.error("[YAConfigurator#updateTracker] トラッカー未作成のトラッキングID",e),!1):c.Util.isObject(t)?(Object.keys(t).forEach(function(e){r.setParameter(e,t[e])}),c.CLog.info("[YAConfigurator#updateTracker] トラッカーに値を設定完了",r.parameters),!0):(c.CLog.error("[YAConfigurator#updateTracker] 期待しないデータ型",t),!1)}},{key:"setBaseParameters",value:function(e){return c.Util.isObject(e)?(this.baseParameters=c.Util.merge(this.baseParameters,e),c.CLog.info("[YAConfigurator#baseParameters] ベースパラメータ設定完了",this.baseParameters),!0):(c.CLog.error("[YAConfigurator#setBaseParameters] オブジェクト形式ではありません",e),!1)}},{key:"getBaseParameters",value:function(){return c.Util.merge(this.baseParameters,{pvid:this.pvid})}},{key:"getTrackerParameters",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],r={};if(!c.Util.isString(t)&&c.Util.isPrimitive(t)||!c.Util.isEmpty(t))if(c.Util.isArray(t))n=c.Util.deepCopy(t);else{if(!c.Util.isPrimitive(t))return c.CLog.error("[YAConfigurator#getTrackerParameters] 不正なターゲット指定"),r;n=[t]}else n=[v];return n.map(o).filter(a).forEach(function(t){r=f(e.trackers,t,r)}),n.map(u).filter(a).filter(function(t){return c.Util.isArray(e.groups[t])}).forEach(function(t){e.groups[t].map(o).filter(a).forEach(function(t){r=f(e.trackers,t,r)})}),c.Util.deepCopy(r)}}]),e}(),m=new h;t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=n(13),l=r(a),f=n(14),s=r(f),c=n(18),d=r(c),p=n(20),g=r(p),y=n(22),v=r(y),h=n(4),m=r(h),b=m.default.getInstance(),_={page_view:s.default,timing_complete:g.default,web_performance:d.default},O={base:""},k=function(){function e(){i(this,e)}return o(e,null,[{key:"getHitBuilder",value:function(e){return!u.Util.isString(e)||u.Util.isEmpty(e)?(u.CLog.error("[EventCommander#getHitBuilder] 不正なイベント名",e),null):u.Util.isUndefined(_[e])?(u.CLog.debug("[EventCommander#getHitBuilder] use general builder"),v.default):(u.CLog.debug("[EventCommander#getHitBuilder] use designated builder"),_[e])}},{key:"run",value:function(e,t){t=u.Util.isObject(t)?t:{};var n=this.getHitBuilder(e);if(null!==n){n===v.default&&(t.event_action=t.event_action||e);var r=b.getBaseParameters(),i=b.getTrackerParameters(t.send_to);u.CLog.debug("[EventCommander#run] Fire "+e+", TrackingIDs are ["+Object.keys(i)+"]"),Object.keys(i).forEach(function(o){var a=n.run(o,r,i[o],t);if(u.Util.isNull(a))return void u.CLog.error("[EventCommander#run] ログ生成失敗\nTrackingID="+o+", EventName="+e+", options="+t);l.default.send({token:b.tokens[o],project:"ya",dataset:o,data:a,ex:O}),u.CLog.info("[EventCommander#run] ログ登録完了",a)}),Object.keys(i).length>0&&!0!==t.non_flush&&(l.default.flush(t.event_callback),u.CLog.info("[EventCommander#run] フラッシュ完了"))}}}]),e}();t.default=k},function(e,t,n){"use strict";(function(e){function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}/* @license
The MIT License (MIT)
Copyright (c) 2010-2016 Robert Kieffer and other contributors
https://github.com/kelektiv/node-uuid/blob/8fe6271b1f3fa39861513d058f76c6b6344784ba/LICENSE.md
*/
Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(0);if(t.default=o.default,u.CLog.prefix="[YA]",u.Util.is("Window",e)&&u.Util.isString(e.location.href)){var a=location.href.match(/yadebug=(\d)/);u.Util.isNull(a)||(u.CLog.logLevel=u.Util.normalizeToNumber(a[1]))}u.Util.isArray(e.yacmds)&&e.yacmds.forEach(function(e){e=Array.prototype.slice.call(e),u.CLog.debug("ya() called from command queue.",e),o.default.apply(void 0,r(e))})}).call(t,n(1))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return void o.CLog.warning("[ya] コマンドが指定されてません");var r=t[0],u=t.slice(1);if(!o.Util.findKey(v,r)||!o.Util.isFunction(v[r].run))return void o.CLog.warning("[ya] 指定されたコマンドが見つかりません",r);try{var a;(a=v[r]).run.apply(a,i(u))}catch(e){var l=o.Util.merge(o.Browser.generateMetrics(e,r),{tk:y.default.errMetrics.tk,p:y.default.errMetrics.pj,d:y.default.errMetrics.ds}),f=o.Util.urlQueryBuild(l);o.Browser.createImageTag("https://dsb.yahoo.co.jp/v1/clear.gif?"+f)}};var o=n(0),u=n(8),a=r(u),l=n(24),f=r(l),s=n(5),c=r(s),d=n(25),p=r(d),g=n(26),y=r(g),v={config:a.default,set:f.default,event:c.default,debug:p.default}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=n(4),l=r(a),f=n(5),s=r(f),c={page_title:"title",page_location:"location"},d=function(){function t(){i(this,t)}return o(t,null,[{key:"run",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=l.default.getInstance();if(!u.Util.isPrimitive(t))return void u.CLog.error("[ConfigCommander#run] トラッキングIDは文字列を期待します",t);r=u.Util.isObject(r)?r:{},Object.keys(r).forEach(function(e){u.Util.findKey(c,e)&&(r[c[e]]=r[e])}),u.Util.findKey(r,"groups")?(u.CLog.debug("[ConfigCommander#run] found options.groups",r.groups),i.registerTracker(t,n,r.groups)):(u.CLog.debug("[ConfigCommander#run] not found options.groups"),i.registerTracker(t,n)),i.updateTracker(t,r),!1!==r.send_page_view&&(u.CLog.debug("[ConfigCommander#run] send_page_view = true"),s.default.run("page_view",{send_to:t,non_flush:!1!==r.send_web_performance})),!1!==r.send_web_performance&&("complete"!==e.document.readyState?e.window.addEventListener("load",function(){u.CLog.debug("[ConfigCommander#run] send_web_performance = true"),s.default.run("web_performance",{send_to:t})},!1):(u.CLog.debug("[ConfigCommander#run] send_web_performance = true"),s.default.run("web_performance",{send_to:t})))}}]),t}();t.default=d}).call(t,n(1))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return a.Util.isPrimitive(e)?a.Util.normalizeToString(e):""}function o(e){return a.Util.isUndefined(e)?"":e}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=function(){function e(t,n){r(this,e),this.name=a.Util.isString(t)?t:"",this.group=a.Util.isString(n)?n:"",this.parameters={},this.hitSequence=0}return u(e,[{key:"setParameter",value:function(e,t){var n=i(e);""!==n&&(this.parameters[n]=o(t))}},{key:"setParameters",value:function(e){var t=this;if(!a.Util.isObject(e))return void a.CLog.warning("[Tracker#setParameters] 期待しないデータ型",e);Object.keys(e).forEach(function(n){t.setParameter(n,e[n])})}},{key:"getParameters",value:function(){var e={hitSequence:++this.hitSequence};return a.Util.merge(this.parameters,e)}}]),e}();t.default=l},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var u=e.random||(e.rng||i)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t)for(var a=0;a<16;++a)t[r+a]=u[a];return t||o(u)}var i=n(11),o=n(12);e.exports=r},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t,n){!function(t,n){e.exports=n()}("undefined"!=typeof self&&self,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){!function(t,n){e.exports=function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function r(e){return Object.prototype.toString.call(e).slice(8,-1)}function i(e,t){return void 0!==t&&null!==t&&r(t)===e}function o(e){return i("Object",e)}function u(e){return i("Array",e)}function a(e){return i("String",e)}function l(e){return Math.abs(e)===1/0}function f(e){return i("Number",e)&&!v(e)&&!l(e)}function s(e){return i("Boolean",e)}function c(e){return i("Function",e)}function d(e){return i("Map",e)}function p(e){return null===e}function g(e){return void 0===e}function y(e){return f(e)||a(e)||s(e)}function v(e){return!("object"!==(void 0===e?"undefined":P(e))||!i("Number",e)||!isNaN(e))||i("Number",e)&&e!==e}function h(e,t){return i("Object",e)&&e.hasOwnProperty(t)}function m(e){if(!a(e))return!1;var t=/^[\da-fA-F]{8}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{12}$/;return null!==e.match(t)}function b(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.length,i={},o=0;o<r;o++)!function(e){var n=t[e];Object.keys(n).forEach(function(e){i[e]=n[e]})}(o);return i}function _(e){return JSON.parse(JSON.stringify(e))}function O(){return(new Date).getTime()}function k(e){return""+e}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e=Number(e),f(e)?e:t}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e=C(e,t),e===t?e:parseInt(e)}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e=w(e,t),e===t?e:e>=0?e:t}function L(e){return!!(p(e)||g(e)||v(e))||(a(e)?""===e:f(e)||l(e)?0===e:o(e)?0===Object.keys(e).length:u(e)?0===e.length:!!d(e)&&0===e.size)}function j(e){return e=k(e).replace(/_+([a-z])/g,function(e,t){return t.toUpperCase()}),e.charAt(0).toLowerCase()+e.slice(1)}function T(e){var t="";return o(e)&&(t=Object.keys(e).map(function(t){return[t,e[t]].map(k).map(encodeURIComponent).join("=")}).join("&")),t}Object.defineProperty(t,"__esModule",{value:!0});var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default={getType:r,is:i,isObject:o,isArray:u,isString:a,isNumber:f,isBoolean:s,isMap:d,isPrimitive:y,isFunction:c,isNull:p,isNaN:v,isUndefined:g,findKey:h,isUUID:m,deepCopy:_,merge:b,getTime:O,normalizeToString:k,normalizeToNumber:C,normalizeToInt:w,normalizeToUnsignedInt:U,isEmpty:L,snakeToLCC:j,urlQueryBuild:T}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=t.Util=t.CLog=void 0;var i=n(2),o=r(i),u=n(0),a=r(u),l=n(3),f=r(l);t.CLog=o.default,t.Util=a.default,t.Browser=f.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return["Object","Console"].indexOf(a.default.getType(console))>=0?console:{}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(){function e(){r(this,e)}return o(e,null,[{key:"debug",value:function(){var t=i();if(this.logLevel>=e.DEBUG){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];a.default.isFunction(t.debug)?this.printLog(t.debug,r):a.default.isFunction(t.log,r)&&(r.unshift("[DEBUG]"),this.printLog(t.log,r))}}},{key:"info",value:function(){var t=i();if(this.logLevel>=e.INFO){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];a.default.isFunction(t.info)?this.printLog(t.info,r):a.default.isFunction(t.log,r)&&(r.unshift("[INFO]"),this.printLog(t.log,r))}}},{key:"warning",value:function(){var t=i();if(this.logLevel>=e.WARNING){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];a.default.isFunction(t.warn)?this.printLog(t.warn,r):a.default.isFunction(t.log,r)&&(r.unshift("[WARN]"),this.printLog(t.log,r))}}},{key:"error",value:function(){var t=i();if(this.logLevel>=e.CRITICAL){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];a.default.isFunction(t.error)?this.printLog(t.error,r):a.default.isFunction(t.log,r)&&(r.unshift("[ERROR]"),this.printLog(t.log,r))}}},{key:"printLog",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=new Date;i.unshift("["+o.toLocaleTimeString()+"."+o.getUTCMilliseconds()+"]"),a.default.isEmpty(this._prefix)||i.unshift(this._prefix),r.apply(console,i)}},{key:"NONE",get:function(){return 0}},{key:"CRITICAL",get:function(){return 1}},{key:"WARNING",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"prefix",set:function(e){this._prefix=e}},{key:"defaultLogLevel",get:function(){return this.CRITICAL}},{key:"logLevel",get:function(){return a.default.isNumber(this._logLevel)?this._logLevel:this.defaultLogLevel},set:function(e){a.default.isNumber(e)&&[0,1,2,3,4].indexOf(e)>=0&&(this._logLevel=e)}}]),e}();t.default=l},function(e,t,n){"use strict";(function(e){function r(t,n){if("object"!==(void 0===t?"undefined":o(t)))return null;var r={},i=t.line||t.lineNumber,u=t.column||t.columnNumber;return r.ts=a.default.getTime(),t.name&&(r.name=t.name),t.message&&(r.message=t.message),t.stack&&(r.stack=t.stack),i&&(r.line=i),u&&(r.col=u),"object"===o(e.performance)&&"object"===o(e.performance.timing)&&a.default.isNumber(e.performance.timing.navigationStart)&&(r.progress_time=r.ts-e.performance.timing.navigationStart),r.ex_base="",void 0!==e.location&&void 0!==e.location.href&&(r.url=e.location.href),a.default.isString(n)&&(r.label=n),r}function i(e,t){var n=document.createElement("img");a.default.isFunction(t)&&(n.onload=t),n.src=e}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(u);t.default={generateMetrics:r,createImageTag:i}}).call(t,n(4))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n}])}()}("undefined"!=typeof self&&self)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i={},o={get:function(e){return i[e]||null},set:function(e,t){i[e]=t}};o.set("apiScheme","https://"),o.set("apiHost","dsb.yahoo.co.jp"),o.set("apiPath","/api/v1/stream"),o.set("apiPathSendBeacon","/api/v1/stream_nct"),o.set("ajaxTimeout",5e3),o.set("clientIdSize","'token':'01234567-0123-0123-0123-0123456789AB',".length),o.set("wrapJsonSize","{'r':[]}".length),o.set("maxRequestRecordsLength",65536-4*(o.get("clientIdSize")-o.get("wrapJsonSize"))),o.set("shortTimerInterval",1e3),o.set("longTimerInterval",5e3),r.CLog.debug("[config]",o),t.default=o},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(0);if(void 0===e.YAHOO&&(e.YAHOO={}),YAHOO.i13n=YAHOO.i13n||{},YAHOO.i13n.JP=YAHOO.i13n.JP||{},o.Util.isUndefined(YAHOO.i13n.JP.Core))YAHOO.i13n.JP.Core=i.default;else if(o.Util.isNumber(YAHOO.i13n.JP.Core.compatNumber)&&YAHOO.i13n.JP.Core.compatNumber<i.default.compatNumber){var u=YAHOO.i13n.JP.Core.getBuffer();u.forEach(function(e){i.default.send(e.tk,e.p,e.d.r.data)}),i.default.setConsoleLogLevel(YAHOO.i13n.JP.Core.getConsoleLogLevel()),YAHOO.i13n.JP.Core.destroy(),YAHOO.i13n.JP.Core=i.default}else i.default.destroy();t.default=YAHOO.i13n.JP.Core}).call(t,n(2))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=n(5),l=r(a),f=n(8),s=r(f),c=n(1),d=r(c),p=new l.default,g=new s.default(p);u.CLog.prefix="[YAHOO.i13n.JP.Core]";var y=function(){function e(){i(this,e)}return o(e,null,[{key:"setConsoleLogLevel",value:function(e){u.CLog.logLevel=e}},{key:"getConsoleLogLevel",value:function(){return u.CLog.logLevel}},{key:"setBeaconServer",value:function(e){u.Util.isString(e)&&(d.default.set("apiHost",e),u.CLog.info("[送信先変更]",e))}},{key:"enableSecureTransport",value:function(e){!0===e?d.default.set("apiScheme","https://"):!1===e&&(d.default.set("apiScheme","http://"),u.CLog.warning("通信にHTTPを利用します"))}},{key:"send",value:function(e){if(!u.Util.isObject(e))return void u.CLog.error("引数の型が不正");p.push(e.token,e.project,e.dataset,e.data,e.ex),u.Util.isUndefined(e.flush)||u.Util.isBoolean(e.flush)||u.CLog.warning("flushオプションが期待するのはboolean型です"),u.Util.isUndefined(e.async)||u.Util.isBoolean(e.async)||u.CLog.warning("asyncオプションが期待するのはboolean型です"),!0===e.flush?this.flush(e.callback,e.async):g.setTimer()}},{key:"flush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u.Util.isFunction(e)?p.send(e,t):(u.Util.isNull(e)||u.CLog.warning("callbackには関数を指定してください"),p.send())}},{key:"getBuffer",value:function(){return u.CLog.debug("Called getBuffer returned -> ",p.queue),p.queue}},{key:"destroy",value:function(){u.CLog.debug("[バッファ削除]",p.queue),g.destroy(),p.queue=[],p.queueSize=0}},{key:"compatNumber",get:function(){return 1}}]),e}();t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=n(6),l=r(a),f=n(7),s=r(f),c=n(1),d=r(c),p=function(){function e(){i(this,e),this.queue=[],this.queueSize=0,this.sizeArray=[],this.online=!0}return o(e,[{key:"push",value:function(e,t,n,r,i){var o=s.default.recordsBuild(e,t,n,r,i),a=JSON.stringify(o).length;if(!(o.length<1)){if(a>=d.default.get("maxRequestRecordsLength"))return void u.CLog.error("データのサイズが大きすぎます "+a+"/"+d.default.get("maxRequestRecordsLength"),o);if(this.queueSize+a<d.default.get("maxRequestRecordsLength"))this.sizeArray.push(a),this.queue=this.queue.concat(o),this.queueSize+=a;else if(this.online)this.send(),this.sizeArray.push(a),this.queueSize+=a,this.queue=this.queue.concat(o);else{this.sizeArray.push(a),this.queue=this.queue.concat(o),this.queueSize+=a;for(var l=this.sizeArray.length-1,f=0;l>=0;l--)if((f+=this.sizeArray[l])>=d.default.get("maxRequestRecordsLength")){for(var c=0;c<=l;c++)u.CLog.warning("データ容量超過のため削除",this.queue[0]),this.queueSize-=this.sizeArray[0],this.queue.shift(),this.sizeArray.shift();break}}}}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.queue.length>0&&this.online){var n=s.default.requestBodyBuild(this.queue);this.queue=[],this.queueSize=0,this.sizeArray=[],l.default.send(n,e,t)}}}]),e}();t.default=p},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=null;if("undefined"==typeof XMLHttpRequest)return null;try{if(!("withCredentials"in(e=new XMLHttpRequest)))return null;if("undefined"!=typeof XDomainRequest)return null}catch(e){return a.CLog.error("XMLHttpRequestオブジェクトの作成に失敗",e),null}return e}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=n(1),f=function(e){return e&&e.__esModule?e:{default:e}}(l),s=function(){function t(){r(this,t)}return u(t,null,[{key:"send",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a.Util.isNull(n)&&r&&"object"===o(e.navigator)&&a.Util.isFunction(e.navigator.sendBeacon)?this.sendBeacon(t):this.sendAjax(t,n,r)}},{key:"sendAjax",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=i(),o=""+f.default.get("apiScheme")+f.default.get("apiHost")+f.default.get("apiPath");a.Util.isNull(r)||(r.open("POST",o,n),r.withCredentials=!0,r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.timeout=f.default.get("ajaxTimeout"),a.Util.isFunction(t)&&(r.onload=r.ontimeout=r.onerror=r.onabort=function(){t()}),r.send(e),a.CLog.info("[送信]",o,e))}},{key:"sendBeacon",value:function(e){var t=""+f.default.get("apiScheme")+f.default.get("apiHost")+f.default.get("apiPathSendBeacon"),n=new Blob(["q="+encodeURIComponent(e)],{type:"application/x-www-form-urlencoded",host:f.default.get("apiHost")});navigator.sendBeacon(t,n),a.CLog.info("[送信]",t,e)}}]),t}();t.default=s}).call(t,n(2))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=function(){function e(){r(this,e)}return i(e,null,[{key:"recordBuild",value:function(e,t,n,r,i){if(!o.Util.isString(e)||!o.Util.isUUID(e))return o.CLog.error("tokenが不正な値:",e),null;if(!o.Util.isString(t)||t.length<1)return o.CLog.error("projectが不正な値:",t),null;if(!o.Util.isString(n)||n.length<1)return o.CLog.error("datasetが不正な値:",n),null;if(!o.Util.isObject(r))return o.CLog.error("dataが不正な値:",r),null;if(!o.Util.isUndefined(i)&&!o.Util.isObject(i))return o.CLog.error("exが不正な値:",i),null;var u={tk:e,p:t,d:n,data:r};return o.Util.isObject(i)&&(u=o.Util.merge(u,{ex:i})),o.CLog.info("[レコード生成]",u),u}},{key:"recordsBuild",value:function(e,t,n,r,i){var u=this,a=[];if(o.Util.isObject(r)){var l=this.recordBuild(e,t,n,r,i);o.Util.isNull(l)||a.push(l)}else o.Util.isArray(r)&&r.forEach(function(r){var l=u.recordBuild(e,t,n,r,i);o.Util.isNull(l)||a.push(l)});return a}},{key:"requestBodyBuild",value:function(e){return JSON.stringify({r:e})}}]),e}();t.default=u},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(){function t(n){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,t),this.buffer=n,this.shortInterval=a||l.default.get("shortTimerInterval"),this.longInterval=o||l.default.get("longTimerInterval"),this.shortTimer=null,this.longTimer=null,this.leaveCallback=function(e){u.CLog.debug("fire inactive event. type = "+e.type),i.buffer.queue.length>0&&(i.buffer.send(),i.clearAllTimer())},this.destroy=function(){u.Util.isFunction(e.removeEventListener)&&(t.INACTIVE_EVENTS.forEach(function(t){e.removeEventListener(t,i.leaveCallback,!1)}),e.removeEventListener("online",i.onlineHandler,!1),e.removeEventListener("offline",i.offlineHandler,!1))},u.Util.is("Window",e)&&u.Util.isFunction(e.addEventListener)?t.INACTIVE_EVENTS.forEach(function(t){e.addEventListener(t,i.leaveCallback,!1)}):u.CLog.warning("not hook a leave event."),this.createNetWorkStateHandler(),this.setInitialNetWork(),this.setNetWorkWatcher()}return o(t,null,[{key:"INACTIVE_EVENTS",get:function(){return["blur","pagehide","visibilitychange-hidden","beforeunload","unload"]}}]),o(t,[{key:"createNetWorkStateHandler",value:function(){var e=this;this.onlineHandler=function(){e.buffer.online=!0,e.buffer.queue.length>0&&e.buffer.send()},this.offlineHandler=function(){e.buffer.online=!1}}},{key:"setInitialNetWork",value:function(){u.Util.is("Window",e)&&"object"===i(e.navigator)&&u.Util.isBoolean(e.navigator.onLine)?this.buffer.online=e.navigator.onLine:this.buffer.online=!0}},{key:"setNetWorkWatcher",value:function(){u.Util.isFunction(e.addEventListener)&&(e.addEventListener("online",this.onlineHandler,!1),e.addEventListener("offline",this.offlineHandler,!1))}},{key:"setTimer",value:function(){var e=this;u.Util.isNull(this.shortTimer)||(clearTimeout(this.shortTimer),this.shortTimer=null),this.shortTimer=setTimeout(function(){e.buffer.send(),e.clearAllTimer(),u.CLog.debug("Called: short timer fire.")},this.shortInterval),u.Util.isNull(this.longTimer)&&(this.longTimer=setTimeout(function(){e.buffer.send(),e.clearAllTimer(),u.CLog.debug("Called: long timer fire.")},this.longInterval))}},{key:"clearAllTimer",value:function(){clearTimeout(this.shortTimer),clearTimeout(this.longTimer),this.shortTimer=null,this.longTimer=null}}]),t}();t.default=f}).call(t,n(2))}])})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)},f=n(0),s=n(2),c=r(s),d=n(3),p=r(d),g=f.Util.deepCopy(p.default),y=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,null,[{key:"run",value:function(e,n,r,i){return l(t.__proto__||Object.getPrototypeOf(t),"run",this).call(this,e,{},n,r,i)}},{key:"hitType",get:function(){return"pageview"}},{key:"schemaName",get:function(){return"pageview"}},{key:"rule",get:function(){return g}},{key:"defaultInteraction",get:function(){return!0}}]),t}(c.default);t.default=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return u.Util.isUndefined(t)||u.Util.isNull(t)?null:"string"===e?u.Util.normalizeToString(t):"number"===e?u.Util.normalizeToNumber(t,null):Boolean(t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=["string","number","boolean"],l=new RegExp("^(.+?)([0-9]+)$"),f=function(){function e(){r(this,e),this.ruleset={}}return o(e,[{key:"addRule",value:function(e,t){if(!u.Util.isString(e)||u.Util.isEmpty(e))return void u.CLog.error("[YAValidator#addRule] 不正なスキーマ",e);if(!u.Util.isObject(t)||u.Util.isNull(t))return void u.CLog.error("[YAValidator#addRule] 不正なルール",t);var n={};Object.keys(t).forEach(function(e){var r=t[e];return!u.Util.isString(r.short)||u.Util.isEmpty(r.short)?void u.CLog.error("[YAValidator#addRule] 不正な短縮キー",t):!u.Util.isString(r.type)||u.Util.isEmpty(r.type)?void u.CLog.error("[YAValidator#addRule] 不正なデータ型定義（未定義か空文字列）",t):a.indexOf(r.type)<0?void u.CLog.error("[YAValidator#addRule] 不正なデータ型定義（許可されていない型名）",t):(n[e]={short:r.short,type:r.type,numbered:!!u.Util.isBoolean(r.numbered)&&r.numbered},void(n[e].numbered&&(u.Util.isNumber(r.max)&&(n[e].max=r.max),u.Util.isNumber(r.min)&&(n[e].min=r.min))))}),this.ruleset[e]=n}},{key:"run",value:function(e,t){var n={data:{},error:null};if(!u.Util.isString(e)||u.Util.isEmpty(e))return u.CLog.error("[YAValidator#run] 不正なスキーマ名",e),n.error={message:"schemaNameは空でない文字列を指定してください."},n;if(!u.Util.isObject(this.ruleset[e]))return u.CLog.error("[YAValidator#run] 不正なルールセット",this.ruleset[e]),n.error={message:"指定したschemaName用のルールを設定してください."},n;if(!u.Util.isObject(t))return u.CLog.error("[YAValidator#run] 不正な形式のデータ",t),n.error={message:"バリデーション対象のデータはObject型の値を指定してください."},n;var r=this.ruleset[e],o=Object.keys(r).filter(function(e){return!r[e].numbered}),a=Object.keys(r).filter(function(e){return r[e].numbered}),f={};return Object.keys(t).filter(function(e){if(-1!==o.indexOf(e))return!0;var t=l.exec(e);if(null!==t&&-1!==a.indexOf(t[1])){var n=r[t[1]],i=u.Util.normalizeToNumber(t[2]);return!(u.Util.findKey(n,"min")&&i<n.min)&&(!(u.Util.findKey(n,"max")&&i>n.max)&&(r[e]={short:""+n.short+i,type:n.type},!0))}return!1}).forEach(function(e){var n=r[e],o=n.short,a=n.type,l=i(a,t[e]);null!==l?f[o]=l:u.CLog.warning("[YAValidator#run] "+e+"に"+a+"型以外の値("+t[e]+")が指定されています")}),n.data=f,n}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t.slice(1),o=r,a=!0;return u.Util.isArray(i)&&i.length>0?i.forEach(function(e){o&&!u.Util.isUndefined(o[e])?o=o[e]:a=!1}):a=!1,a?o:null}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=n(17),l=function(){function e(){r(this,e)}return o(e,null,[{key:"getVal",value:function(){return i.apply(void 0,arguments)}},{key:"document",set:function(e){this._document=e}},{key:"location",get:function(){return i(this._document,"location","href")}},{key:"referrer",get:function(){var e=i(this._document,"referrer");return u.Util.isString(e)&&!u.Util.isEmpty(e)?e:null}},{key:"title",get:function(){return i(this._document,"title")}},{key:"language",get:function(){return i(this._document,"defaultView","navigator","language")||i(this._document,"defaultView","navigator","browserLanguage")}},{key:"dataSource",get:function(){return"web"}},{key:"sdkName",get:function(){return"sdk-js"}},{key:"sdkVersion",get:function(){return u.Util.isString(a.version)?a.version:""}},{key:"screenResolution",get:function(){var e=i(this._document,"defaultView","screen","width"),t=i(this._document,"defaultView","screen","height");return u.Util.isNull(e)||u.Util.isNull(t)?null:e+"x"+t}},{key:"viewportSize",get:function(){var e=i(this._document,"documentElement","clientWidth"),t=i(this._document,"documentElement","clientHeight"),n=i(this._document,"body","clientWidth"),r=i(this._document,"body","clientHeight"),o=i(this._document,"compatMode");return!e||!t||"CSS1Compat"!==o&&n&&r?n&&r?n+"x"+r:null:e+"x"+t}},{key:"screenColors",get:function(){return i(this._document,"defaultView","screen","colorDepth")}},{key:"orientation",get:function(){var e=i(this._document,"defaultView","screen","orientation","type")||i(this._document,"defaultView","screen","mozOrientation","type")||i(this._document,"defaultView","screen","msOrientation","type"),t=i(this._document,"defaultView","orientation");if(u.Util.isString(e)){var n=e.match(/^(landscape|portrait)-(primary|secondary)$/);if(u.Util.isArray(n))return n[1]}else if(u.Util.isNumber(t))return 90===Math.abs(t)?"landscape":"portrait";return null}}]),e}();t.default=l},function(e,t){e.exports={version:"0.2.0"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)},s=n(0),c=n(2),d=r(c),p=n(3),g=r(p),y=n(19),v=r(y),h=s.Util.merge(g.default,v.default),m=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return u(n,t),l(n,null,[{key:"run",value:function(t,r,i,o){if("object"!==a(e.window)||s.Util.isNull(e.window))return null;var u=e.window.performance||e.window.webkitPerformance;if(!u||!u.timing)return null;var l=u.timing,c=l.navigationStart,d={serverResponseTime:l.responseStart-l.requestStart,tcpConnectionTime:l.connectEnd-l.connectStart,dnsLookupTime:l.domainLookupEnd-l.domainLookupStart,pageDownloadTime:l.responseEnd-l.responseStart,domInteractiveTime:l.domInteractive-c,contentLoadTime:l.domContentLoadedEventStart-c,redirectResponseTime:l.fetchStart-c,pageLoadTime:l.loadEventStart-c};return f(n.__proto__||Object.getPrototypeOf(n),"run",this).call(this,t,d,r,i,o)}},{key:"hitType",get:function(){return"timing"}},{key:"schemaName",get:function(){return"webPerformance"}},{key:"rule",get:function(){return h}},{key:"defaultInteraction",get:function(){return!1}}]),n}(d.default);t.default=m}).call(t,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={pageLoadTime:{short:"plt",type:"number"},dnsLookupTime:{short:"dns",type:"number"},pageDownloadTime:{short:"pdt",type:"number"},redirectResponseTime:{short:"rrt",type:"number"},tcpConnectionTime:{short:"tcp",type:"number"},serverResponseTime:{short:"srt",type:"number"},domInteractiveTime:{short:"dit",type:"number"},contentLoadTime:{short:"clt",type:"number"}};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)},f=n(0),s=n(2),c=r(s),d=n(3),p=r(d),g=n(21),y=r(g),v=f.Util.merge(p.default,y.default),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,null,[{key:"run",value:function(e,n,r,i){return l(t.__proto__||Object.getPrototypeOf(t),"run",this).call(this,e,{},n,r,i)}},{key:"hitType",get:function(){return"timing"}},{key:"schemaName",get:function(){return"timing"}},{key:"rule",get:function(){return v}},{key:"defaultInteraction",get:function(){return!1}}]),t}(c.default);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i={name:{short:"utv",type:"string"},value:{short:"utt",type:"number"},eventCategory:{short:"utc",type:"string"},eventLabel:{short:"utl",type:"string"}};i=r.Util.merge(i,{timingVar:i.name,timingValue:i.value,timingCategory:i.eventCategory,timingLabel:i.eventLabel}),t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)},f=n(0),s=n(2),c=r(s),d=n(3),p=r(d),g=n(23),y=r(g),v=f.Util.merge(p.default,y.default),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,null,[{key:"run",value:function(e,n,r,i){return l(t.__proto__||Object.getPrototypeOf(t),"run",this).call(this,e,{},n,r,i)}},{key:"hitType",get:function(){return"event"}},{key:"schemaName",get:function(){return"event"}},{key:"rule",get:function(){return v}},{key:"defaultInteraction",get:function(){return!0}}]),t}(c.default);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i={eventAction:{short:"ea",type:"string"},eventCategory:{short:"ec",type:"string"},eventLabel:{short:"el",type:"string"},value:{short:"ev",type:"number"}};i=r.Util.merge(i,{eventValue:i.value}),t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(){function e(){r(this,e)}return i(e,null,[{key:"run",value:function(){for(var e={},t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];o.Util.isObject(n[0])?e=n[0]:n.length>=2&&o.Util.isString(n[0])&&(e[n[0]]=n[1]),a.default.getInstance().setBaseParameters(e)}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=function(){function e(){r(this,e)}return i(e,null,[{key:"run",value:function(){for(var e={},t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];if(o.Util.isObject(n[0])?e=n[0]:n.length>=2&&o.Util.isString(n[0])&&(e[n[0]]=n[1]),o.Util.findKey(e,"log_level")){var i=e.log_level;"debug"===i||4===i?o.CLog.logLevel=4:"info"===i||3===i?o.CLog.logLevel=3:"warning"===i||2===i?o.CLog.logLevel=2:"critical"===i||1===i?o.CLog.logLevel=1:"none"!==i&&0!==i||(o.CLog.logLevel=0)}}}]),e}();t.default=u},function(e,t){e.exports={errMetrics:{tk:"9225bd01-1ff0-4e57-9c92-6e831c45253a",pj:"ds_logger",ds:"ya_web_error"}}}]).default});