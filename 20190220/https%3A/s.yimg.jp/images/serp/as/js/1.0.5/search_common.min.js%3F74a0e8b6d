/*
search_common.min.js
Copyright (C) 2017 Yahoo Japan Corporation. All Rights Reserved.
version 1.0.5
*/
var SUG_TIMEOUT=100,KEY_CD={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,INSERT:45,H_F:229},PROP={WEB:"srch",IMG:"isrch",VIDEO:"vsrch",DIC:"dic",CHIE:"chie",MAP:"map",WS:"rt",NEWS:"news",SHP:"shp",AUC:"auc",TLNT:"tlnt",DIR:"dir",RECIPE:"recipe",LOCO:"loco",SERV:"serv"},BASE_ELEM={SBX:"SaC",SP:"yschsp",TAB:"SaC-tg",HIDEMENU:"vmMenu",HIDELINK:"vmLink",HIDEMENUOPEN:"menuLink jsOn open",HIDEMENUCLOSE:"menuLink jsOn",FORM:"sbn",BOLDTAB:"yschon"},URL_MAP_ID={srch:"http://search.yahoo.co.jp/",isrch:"http://image.search.yahoo.co.jp/",vsrch:"http://video.search.yahoo.co.jp/",dic:"http://dic.yahoo.co.jp/",chie:"http://chiebukuro.search.yahoo.co.jp/",map:"http://map.search.yahoo.co.jp/",rt:"http://realtime.search.yahoo.co.jp/",news:"http://news.search.yahoo.co.jp/",shp:"http://search.shopping.yahoo.co.jp/",auc:"http://auctions.search.yahoo.co.jp/",tlnt:"http://talent.search.yahoo.co.jp/",app:"http://app.search.yahoo.co.jp/",dir:"http://dir.yahoo.co.jp/",recipe:"http://recipe.search.yahoo.co.jp/",loco:"http://loco.search.yahoo.co.jp/",serv:"http://services.yahoo.co.jp/"},TOP_URL_MAP_ID={srch:"http://search.yahoo.co.jp/",isrch:"http://search.yahoo.co.jp/image",vsrch:"http://search.yahoo.co.jp/video",dic:"http://dic.yahoo.co.jp/",chie:"http://chiebukuro.yahoo.co.jp/",map:"http://map.yahoo.co.jp/",rt:"http://search.yahoo.co.jp/realtime",news:"http://headlines.yahoo.co.jp/hl",shp:"http://shopping.yahoo.co.jp/",auc:"http://auctions.yahoo.co.jp/jp/",tlnt:"http://search.yahoo.co.jp/talent",app:"http://search.yahoo.co.jp/app",dir:"http://dir.yahoo.co.jp/",recipe:"http://search.yahoo.co.jp/recipe",loco:"http://loco.yahoo.co.jp/",serv:"http://services.yahoo.co.jp/"},SUG_API={OUTPUT:"json",N:"10",B:"1",CALLBACK:"getJsonpData",SRC:"web"},SUG_ELEM={SUG:"Sb_2",SUG_CHD:"srchAssistBd",SUG_CLS:"srchAssistClose",SUG_RES:"sugres",RD_JSONP:"readJsonp",RE_JSONP:"jsonRet"};"undefined"==typeof YAHOO&&(YAHOO={}),function(e,t){for(var s=e.split("."),r=0,a=s.length;r<a;r++)t=t[s[r]]=t[s[r]]||{}}("YAHOO.JP.srch.core.p",this);var sugSecure="https:"==location.protocol?"true":"",SERV_INFO={NAME:PROP.AUC,B_WIDTH:950,S_WIDTH:0,sugApiConf:{host:"suggest.auctions.yahooapis.jp",path:"/AuctionWebService/V1/suggester",eappid:js_param.sug_api_eappid,secure:sugSecure,max:10}},C=function(){};C.d_geEId=function(e){return e?document.getElementById(e):document.getElementById},C.d_creElm=function(e){return document.createElement(e)},C.d_geETa=function(e){return e?document.getElementsByTagName(e):document.getElementsByTagName},C.addClickFinishEvent=function(e,t){var s=0;t&&jQuery("#"+t).click(function(){s=1}),jQuery(document).click(function(){0===s&&e(),s=0})},C.checkAll=function(e,t,s){jQuery("."+e+' input[type="'+t+'"]').prop("checked",s)},C.disableAll=function(e,t,s){jQuery("."+e+' input[type="'+t+'"]').prop("disabled",s)},C.autoSubmit=function(e){document.getElementsByName(e).item(0)&&document.getElementsByName(e).item(0).submit()},C.setAutoSubmit=function(e){jQuery(e).change(function(){jQuery(this).parents().filter("form").get(0).submit()})},C.setAutoSubmitWithDef=function(e,t){jQuery(e).click(function(){t!==jQuery(this).val()&&jQuery(this).parents().filter("form").get(0).submit()})},function(e){"YAHOO"in e||(e.YAHOO={}),e.YAHOO.JP=e.YAHOO.JP||{},e.YAHOO.JP.srch=e.YAHOO.JP.srch||{},e.YAHOO.JP.srch.core=e.YAHOO.JP.srch.core||{},e.YAHOO.JP.srch.core.extend=function(t,s,r){var a=e.YAHOO.JP.srch.core[t];if(!a)throw"Undefined Module";return a.prototype[s]=r(a),this}}(this),function(e){var t=e.YAHOO;if(!t)throw"YAHOO Undefined";t.JP.srch.core.Suggest=function(e){e=e||{},this.callJsonp=e.request||null,this.SUG_TIMEOUT=e.timeout||0,this.ELEM_MAP=e.ELEM||null,this.ELEM={},this.selected=-1,this.enabled=!1,this.last_req="",this.last_input="",this.base_uri="",this.open_button_flag=!1,this._timer=null,this.init.apply(this,arguments)},t.JP.srch.core.Suggest.prototype={init:function(t){var s=this,r=t.config||{};s.enabled=!(!r.sug_on||"false"===r.sug_on);var a=t.info||{},i="";i="sug_src"in r&&r.sug_src?r.sug_src:a.NAME?a.NAME:e.PROP.WEB||"";var o=t.apiConf||{};return a.sugApiConf&&(o=jQuery.extend(o,a.sugApiConf)),s.base_uri=(o.secure?"https":"http")+"://"+o.host+(o.port?":"+o.port:"")+(o.path?o.path:"/SuggestSearchService/V3/webassistSearch")+"?"+(o.eappid?"eappid="+o.eappid:"appid="+o.appid)+"&output="+o.output+"&callback="+o.callback+"&start="+o.offset+"&results="+o.max+"&.src="+i,this}}}(this),function(e){"use strict";var t=e.YAHOO;if(!t)throw"YAHOO Undefined";t.JP.srch.core.Suggest.prototype.timer=function(){var e=this;return e._timer?e._timer:(e._timer={id:null,set:function(){e._timer.id=setInterval(function(){e.request()},e.SUG_TIMEOUT)},clear:function(){e._timer.id&&(clearInterval(e._timer.id),e._timer.id=null)}},e._timer)}}(this),function(e){var t=e.YAHOO;if(!t)throw"YAHOO Undefined";t.JP.srch.core.Suggest.prototype.getMaxStrLen=function(e){for(var t,s=0,r=0,a=0;a<e.length;a++)if(t=e.charCodeAt(a),t>=0&&t<129||63728===t||t>=65377&&t<65440||t>=63729&&t<63732?(s+=1,r++):(12288!==t&&(s+=2),r++),s>39)return r;return 40},t.JP.srch.core.Suggest.prototype.boldQuery=function(e,t,s){var r=this,a=e.length,i=t,o=e,c=0,n=0,u="",l="",p="";return a>t&&(i=r.getMaxStrLen(e)),a>i&&(o=e.slice(0,i)+"..."),u=o.toLowerCase(),l=s.toLowerCase(),c=u.indexOf(l,0),c!==-1&&(n=c+s.length,p+=o.slice(0,c),p+="<em>"+o.slice(c,n)+"</em>"),p+=o.slice(n)}}(this),function(e){var t=e.YAHOO;if(!t)throw"YAHOO Undefined";t.JP.srch.core.Suggest.prototype._getSP=function(){var e=this;return e.ELEM_MAP&&e.ELEM_MAP.SP?(e.ELEM.SP||(e.ELEM.SP=jQuery("#"+e.ELEM_MAP.SP).click(function(e){e.stopPropagation()})),e.ELEM.SP):null},t.JP.srch.core.Suggest.prototype._getCloser=function(){var e=this;return e.ELEM_MAP&&e.ELEM_MAP.CLS?(e.ELEM.CLS||(e.ELEM.CLS=jQuery("#"+e.ELEM_MAP.CLS)),e.ELEM.CLS):null},t.JP.srch.core.Suggest.prototype._getChild=function(){var e=this;return e.ELEM_MAP&&e.ELEM_MAP.CHD?(e.ELEM.CHD||(e.ELEM.CHD=jQuery("#"+e.ELEM_MAP.CHD)),e.ELEM.CHD):null},t.JP.srch.core.Suggest.prototype.query=function(e){var t=this._getSP();return t&&t.length?"string"==typeof e?t.val(e):t.val():""},t.JP.srch.core.Suggest.prototype.start=function(){var e,t=this,s=t._getSP();return window.js_param.fp_as_on&&(e=new Image,e.src=window.js_param.fp_as_on),t.enabled=!0,s&&s.length&&s.attr("autocomplete","off"),t.timer().set(),!1},t.JP.srch.core.Suggest.prototype.stop=function(){var e,t=this,s=t._getSP();return window.js_param.fp_as_off&&(e=new Image,e.src=window.js_param.fp_as_off),t.enabled=!1,t.selected=-1,t.last_req="",jQuery("#aq").val(-1),jQuery("#oq").val(""),s&&s.length&&s.attr("autocomplete","on"),t.timer().clear(),!1},t.JP.srch.core.Suggest.prototype.open=function(e){var t=this,s=t._getCloser(),r=t._getChild();return s.hasClass("off")&&(r.css("display","block"),s.removeClass().addClass("on").attr("title","キーワード入力補助を閉じる")),e&&s.hasClass("on")&&(t._getSP().focus(),r.empty().prepend(e)),!1},t.JP.srch.core.Suggest.prototype.close=function(){var e=this,t=e._getCloser(),s=e._getChild();return t.hasClass("on")&&(s.css("display","none"),t.removeClass().addClass("off").attr("title","キーワード入力補助を開く")),t.hasClass("off")&&s.empty(),e.open_button_flag=!1,!1}}(this),function(e){var t=e.YAHOO;if(!t)throw"YAHOO Undefined";t.JP.srch.core.Suggest.prototype.buildParams=function(e){var t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(s+"="+(e[s]||""));return t},t.JP.srch.core.Suggest.prototype.request=function(e){var t,s,r,a=this;a.enabled&&(e=e||0,t=a.query(),1!==e&&a.last_input===t||(1!==e&&a.query().match(/[^ａ-ｚＡ-Ｚ][ａ-ｚＡ-Ｚ]$/g)||(s=a.base_uri+"&"+a.buildParams({query:encodeURIComponent(t)}).join("&"),jQuery("#"+a.ELEM_MAP.RD_JSONP).empty(),r=jQuery("<script></script>",{type:"text/javascript",charset:"UTF-8",src:s,id:a.ELEM_MAP.RE_JSONP}),jQuery("#"+a.ELEM_MAP.RD_JSONP).append(r)),""===t&&jQuery("#oq").val(""),a.last_input=t))},t.JP.srch.core.Suggest.prototype.parseResult=function(e,t){var s=this,r="",a=1,i="",o="";for(i=t.shift(),a=1;i&&a<11;)o=s.boldQuery(i,20,e),i=i.replace(/"/g,"&quot;"),r+='<li id="'+s.ELEM_MAP.RES+a+'" class="suggest" alt="'+i+'">'+o+"</li>",i=t.shift(),a+=1;return r},t.JP.srch.core.Suggest.prototype.render=function(e){var t=this,s=t._getCloser(),r=t._getChild(),a="",i=e;return i.length<2||!i[1].length?(t.open_button_flag===!0&&""!==t.query()?(a='<p id="srchAssistTxt">入力したキーワードに一致する候補はありません。</p><dl id="srchAssistOnOff"><dt>キーワード入力補助</dt><dd class="first">ON</dd><dd><a href="javascript void(0);" onclick="sugOff(); return false;">OFF</a></dd></dl>',t.open(a),t.open_button_flag=!1):t.close(),!1):(r.css("display","block").empty(),s.removeClass().addClass("on").attr("title","キーワード入力補助を閉じる"),(a=t.parseResult(i[0],i[1]))?(a="<ul id="+t.ELEM_MAP.RES+">"+a+'</ul><dl id="srchAssistOnOff"><dt>キーワード入力補助</dt><dd class="first">ON</dd><dd><a href="javascript void(0);" onclick="sugOff(); return false;">OFF</a></dd></dl>',t.open(a),jQuery("#srchAssistBd > ul > li").hover(jQuery.proxy(t.overQuery,t),jQuery.proxy(t.outQuery,t)).click(jQuery.proxy(t.submitQuery,t)),""===t.query()&&t.close(),t.last_req=i[0],t.selected=-1,jQuery("#aq").val(-1),!0):(t.open_button_flag===!0&&""!==t.query()?(a='<p id="srchAssistTxt">入力したキーワードに一致する候補はありません。</p><dl id="srchAssistOnOff"><dt>キーワード入力補助</dt><dd class="first">ON</dd><dd><a href="javascript void(0);" onclick="sugOff(); return false;">OFF</a></dd></dl>',t.open(a),t.open_button_flag=!1):t.close(),!1))}}(this),function(e){var t=e.YAHOO;if(!t)throw"YAHOO Undefined";t.JP.srch.core.Suggest.prototype.toggleList=function(e){var t=e.currentTarget,s=this;if(jQuery(t).hasClass("on"))s.close();else{var r="";s.enabled?""===s.query()?(r+='<p id="srchAssistTxt">キーワードが入力されていません。</p><dl id="srchAssistOnOff"><dt>キーワード入力補助</dt><dd class="first">ON</dd><dd><a href="javascript void(0);" onclick="sugOff(); return false;">OFF</a></dd></dl>',s.open(r)):(s.open_button_flag=!0,s.request(1)):(r+='<p id="srchAssistTxt">キーワード入力補助がOFFになっています。</p><dl id="srchAssistOnOff"><dt>キーワード入力補助</dt><dd class="first"><a href="javascript void(0);" onclick="sugOn(); return false;">ON</a></dd><dd>OFF</dd></dl>',s.open(r))}},t.JP.srch.core.Suggest.prototype.updateCursor=function(t){var s=this,r=e.KEY_CD;if(s.enabled){var a,i=jQuery("#srchAssistBd > ul > li").length;if(0===i){if(t.which===r.DOWN)return s.request(1);if(t.which===r.UP)return}if(t.which===r.RETURN)return void(s.selected!==-1&&(a=jQuery("#srchAssistBd > ul > li:eq("+s.selected+")"),a.trigger("click")));t.which===r.DOWN?(s.open(),jQuery("#srchAssistBd > ul > li").removeClass("active"),s.selected+=1,s.selected===i?(s.selected=-1,s.last_input=s.last_req,s.query(s.last_input)):(a=jQuery("#srchAssistBd > ul > li:eq("+s.selected+")"),a.addClass("active"),a.attr("alt")?s.last_input=jQuery("#srchAssistBd > ul > li:eq("+s.selected+")").attr("alt"):s.last_input=s.last_req,s.query(s.last_input)),jQuery("#aq").val(s.selected)):t.which===r.UP&&(jQuery("#srchAssistBd > ul > li").removeClass("active"),s.selected-=1,s.selected===-1?(s.last_input=s.last_req,s.query(s.last_input)):(s.selected<-1&&(s.selected=i-1),a=jQuery("#srchAssistBd > ul > li:eq("+s.selected+")"),a.addClass("active"),a.attr("alt")?s.last_input=jQuery("#srchAssistBd > ul > li:eq("+s.selected+")").attr("alt"):s.last_input=s.last_req,s.query(s.last_input)),jQuery("#aq").val(s.selected),setTimeout(function(){var e=s._getSP().val();s._getSP().val(e)},0))}},t.JP.srch.core.Suggest.prototype.submitQuery=function(e){var t=this,s=e.currentTarget;t.selected=jQuery("#srchAssistBd > ul > li").index(s),jQuery("#aq").val(t.selected),jQuery("#oq").val(t.last_req),t.enabled=!1,t.query(jQuery(s).attr("alt")),document.sbn.submit()},t.JP.srch.core.Suggest.prototype.overQuery=function(e){var t=this,s=e.currentTarget;t.selected=jQuery("#srchAssistBd > ul > li").index(s),jQuery("#srchAssistBd > ul > li").removeClass("active"),jQuery(s).addClass("active")},t.JP.srch.core.Suggest.prototype.outQuery=function(e){var t=e.currentTarget;jQuery(t).removeClass("active")}}(this);var getJsonpData,sugOn,sugOff;!function(e){var t=e.YAHOO;if(!t)throw"YAHOO Undefined";t.JP.srch.core.Suggest.prototype.main=function(){var e=this,t='<div title="キーワード入力補助を開く" id="srchAssistClose" class="off"><div id="srchacb"><span>キーワード入力補助を開く</span></div></div>',s=(jQuery("#"+e.ELEM_MAP.SUG).removeClass().addClass("srchAssistON"),e._getChild().after(t),e._getCloser());C.addClickFinishEvent(jQuery.proxy(e.close,e),e.ELEM_MAP.CLS),s.click(jQuery.proxy(e.toggleList,e)),e._getSP().keydown(jQuery.proxy(e.updateCursor,e)),e.last_input=e.query(),e.enabled&&(e.timer().set(),e._getSP().attr("autocomplete","off"))},jQuery(function(){"js_param"in window||(js_param={},js_param.fp_as_off="#",js_param.sug_on=!0,js_param.sug_api_host="suggest.search.yahooapis.jp");var e=new t.JP.srch.core.Suggest({timeout:SUG_TIMEOUT,ELEM:{SP:BASE_ELEM.SP,RD_JSONP:SUG_ELEM.RD_JSONP,RE_JSONP:SUG_ELEM.RE_JSONP,CLS:SUG_ELEM.SUG_CLS,CHD:SUG_ELEM.SUG_CHD,RES:SUG_ELEM.SUG_RES,SUG:SUG_ELEM.SUG},config:js_param,info:SERV_INFO,apiConf:{host:js_param.sug_api_host,appid:js_param.sug_api_appid,output:SUG_API.OUTPUT,callback:SUG_API.CALLBACK,max:SUG_API.N,offset:SUG_API.B}});sugOn=e.start?jQuery.proxy(e.start,e):jQuery.noop,sugOff=e.stop?jQuery.proxy(e.stop,e):jQuery.noop,getJsonpData=e.render?jQuery.proxy(e.render,e):jQuery.noop,e.main()})}(this),YAHOO.JP.srch.core.Suggest.prototype.parseResult=function(e,t){var s,r,a,i,o,c,n,u,l,p,h=this,d="",_="",y="",g=1;for(c=0,l=t.length;c<l;c++)for(u in t[c])if(t[c].hasOwnProperty(u))if("keyword"===u)for(n=0,p=t[c][u].length;n<p;n++)r=t[c][u][n],a=h.boldQuery(r,20,e),r=r.replace(/"/g,"&quot;"),d+='<li id="'+h.ELEM_MAP.RES+g+'" class="sugrest sugunit" alt="'+r+'">'+a+"</li>",g+=1;else if("category"===u)for(n=0,p=t[c][u].length;n<p;n++)s=t[c][u][n],r=s.suggest||"",i=s.cid||"",o=s.cat||"",r&&o&&(a=h.boldQuery(r,20,e),r=r.replace(/"/g,"&quot;"),_+='<li id="'+h.ELEM_MAP.RES+g+'" class="sugrest sugcategory" alt="'+r+'" data-type="category" data-cid="'+i+'">'+a+"<span>カテゴリ："+o+"</span></li>",g+=1);else if("direct"===u)for(n=0,p=t[c][u].length;n<p;n++)s=t[c][u][n],r=s.suggest||"",res_title=s.title||"",res_url=s.url||"",res_icon=s.icon||"",res_image=s.image||"",res_type=s.type||"",i=s.cid||"",res_title&&res_url&&("store"===res_type&&(y+='<li id="'+h.ELEM_MAP.RES+g+'"',y+=res_image?' class="sugrest sugdirect"':' class="sugrest sugdirect is-noStoreImage"',y+=' alt="'+r+'" data-type="'+res_type+'" data-link="'+res_url+'">',y+=res_image?'<img class="storeImage" src="'+res_image+'" alt="">':"",y+='<em class="storeName">'+res_title+'</em><span class="storeLabel">ヤフオク!ストア</span></li>'),g+=1);return _+d+y},YAHOO.JP.srch.core.Suggest.prototype.submitQuery=function(e){var t,s,r,a=this,i=e.currentTarget,o=jQuery(i),c="",n=jQuery(document.sbn);location.host;if(a.selected=jQuery("#srchAssistBd > ul > li").index(i),jQuery("#aq").val(a.selected),jQuery("#oq").val(a.last_req),"store"===(c=o.attr("data-type"))&&(link=o.attr("data-link"),link.length>0)){n.find("[type=hidden]").remove(),n.find("[name=p]").remove(),n.find("[name=fixed]").remove(),sc_i_store="auc_sug_store",jQuery('<input type="hidden" name="sc_i" value="'+sc_i_store+'">').appendTo(n);var u=link+(link.match(/(\?|%3f)/)?"&":"?")+"#localnavi";return document.sbn.action=u,n.submit(),!1}"category"===c?(n.find("[name=sc_i]").length&&n.find("[name=sc_i]").remove(),s="auc_sug_cat",jQuery('<input type="hidden" name="sc_i" value="'+s+'">').appendTo(n),t=o.attr("data-cid"),t.length>0?n.find("[name=auccat]").attr("value",t):n.find("[name=auccat]").remove()):(n.find("[name=sc_i]").length&&n.find("[name=sc_i]").remove(),r="auc_sug",jQuery('<input type="hidden" name="sc_i" value="'+r+'">').appendTo(n));var l=jQuery("input[name=fixed]:checked").val();void 0!=l&&jQuery('<input type="hidden" name="fixed" value="'+l+'">').appendTo(n),a.query(o.attr("alt")),n.submit()},YAHOO.JP.srch.core.Suggest.prototype.buildParams=function(e){var t=[],s=js_param.o_bucketid;for(var r in e)e.hasOwnProperty(r)&&("query"===r?t.push("p="+(e[r]||"")):t.push(r+"="+(e[r]||"")));return t.push("prod=0"),s&&t.push("bucket_id="+s),t.push("device=pc"),t.push("da=1"),t},YAHOO.JP.srch.core.Suggest.prototype.updateCursor=function(e){var t=this,s=(location.host,window.KEY_CD);if(t.enabled){var r,a=jQuery("#srchAssistBd > ul > li").length;if(0===a){if(e.which===s.DOWN)return t.request(1);if(e.which===s.UP)return}if(e.which===s.RETURN)return void(t.selected!==-1&&(r=jQuery("#srchAssistBd > ul > li:eq("+t.selected+")"),r.trigger("click")));e.which===s.DOWN?(t.open(),jQuery("#srchAssistBd > ul > li").removeClass("active"),t.selected+=1,t.selected===a?(t.selected=-1,t.last_input=t.last_req,t.query(t.last_input)):(r=jQuery("#srchAssistBd > ul > li:eq("+t.selected+")"),r.addClass("active"),r.attr("alt")?t.last_input=jQuery("#srchAssistBd > ul > li:eq("+t.selected+")").attr("alt"):t.last_input=t.last_req,t.query(t.last_input)),jQuery("#aq").val(t.selected)):e.which===s.UP&&(jQuery("#srchAssistBd > ul > li").removeClass("active"),t.selected-=1,t.selected===-1?(t.last_input=t.last_req,t.query(t.last_input)):(t.selected<-1&&(t.selected=a-1),r=jQuery("#srchAssistBd > ul > li:eq("+t.selected+")"),r.addClass("active"),r.attr("alt")?t.last_input=jQuery("#srchAssistBd > ul > li:eq("+t.selected+")").attr("alt"):t.last_input=t.last_req,t.query(t.last_input)),jQuery("#aq").val(t.selected))}};