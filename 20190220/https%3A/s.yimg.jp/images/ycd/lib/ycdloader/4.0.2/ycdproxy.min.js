/* 2017-12-04 15:01:15 */"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){function r(){var e=this;o.extend(this,a);var n;this.on({"change-height":function(n){e.sendMessage({type:"change-height",iframeHeight:n})},"create-modules":function(t){e.logger.debug("add modules",t.dirName,t.modules),n=n||l({dirName:t.dirName,useYcdn:t.useYcdn,article:t.article,currentURL:t.currentURL,referrer:t.referrer}),o.each(t.modules,function(t){var r=u("<div>").attr("id",t.container).appendTo("body");e.logger.debug("creating container ",t.container),n.addModule({container:t.container,target_type:t.target_type||"mix",mode:t.mode,placement:t.placement,sponsored_contents:t.sponsored_contents||!1,onrender:function(){var n=u(".videoCube",r).length;e.logger.debug(t.container,"is rendered. it has ",n,"articles"),e.sendMessage({type:"module-loaded",articleLength:n,container:t.container})},onclick:function(n){e.logger.debug(t.container,"article is clicked",n),e.sendMessage({type:"click-article",container:t.container,article:n})},onclickLogo:function(n){e.logger.debug(t.container,"logo is clicked",n),e.sendMessage({type:"open-link",container:t.container,blank:!0,url:n})}})})}})}var o=t(2),i=t(18),a=t(8),c=t(11),u=t(3),s=t(14),l=t(13),d=(t(19),t(4));if(window.parent===window.self)throw"This page must be displayed in iframe.";var f=c.parse(window.location.search.substr(1)),p=f.placeholder;u.extend(r.prototype,{init:function(){var e=this;this.logger=t(16).getLogger("ycdproxy:"+p,d.logLevel),this.parentWin=new i.Child({parentOrigin:f.origin,emitTo:this,grandChildPath:f.iframe_path||d.defaults.grandChildPath,messageParser:function(n){JSON||e.logger.error("JSON object is not defined");var t=JSON.parse(n);return{placeholder:t.placeholder,event:t.type,data:t}},messageMaker:function(n){if(!n.type)throw"Message type is not specified.";return n.placeholder=p,e.logger.debug("send message to parent: ",n),JSON.stringify(n)}}),this.startAutoHeightAdjust()},startAutoHeightAdjust:function(){var e=this;new s({watch:function(){return u("body").height()},onChange:function(n,t){e.trigger("change-height",t),e.logger.debug("height changed to ",t)}})}}),u(function(){var e=new r;e.init(),e.sendMessage({type:"placeholder-ready"})})},function(e,n,t){var r;r=function(){return Function("return this")()}.call(n,t,n,e),!(void 0!==r&&(e.exports=r))},function(e,n,t){var r;r=function(){var e={extend:function(e){for(var n=[].slice.call(arguments,1),t=0;t<n.length;t++)for(var r in n[t])e[r]=n[t][r];return e}};return e.extend(e,{reduce:function(e,n,t){for(var r=t,o=0;o<e.length;o++)r=n(r,e[o],o,e);return r},map:function(e,n){for(var t=[],r=0;r<e.length;r++)t.push(n(e[r],r,e));return t},range:function(n,t){e.isUndefined(t)&&(t=n,n=0);for(var r=[],o=n;t>o;o++)r.push(o);return r},keys:function n(e){var n=[];for(var t in e)n.push(t);return n},isArray:function(e){return e instanceof Array},isUndefined:function(e){return"undefined"==typeof e},isObject:function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))},each:function(e,n){for(var t=0;t<e.length;t++)n(e[t],t,e)},filter:function(e,n){for(var t=[],r=0;r<e.length;r++)n(e[r],r,e)&&t.push(e[r]);return t},find:function(e,n){for(var t=0;t<e.length;t++)if(n(e[t],t,e))return e[t];return-1},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},makeNameSpace:function(n,t){var r=e.isArray(t)?t:t.split(".");return e.reduce(r,function(e,n){return e[n]||(e[n]={}),e[n]},n)},buildQuery:function(n){return e.map(e.keys(n),function(e){return e+"="+encodeURIComponent(n[e])}).join("&")},parseGetParam:function(n){var t={},r=n?n.split("&"):[];return e.each(r,function(n){var r=n.split("="),o=e.trim(r[0]),i=e.isUndefined(r[1])?"":e.trim(decodeURIComponent(r[1]));t[o]=i}),function(n,r,o){switch(arguments.length){case 3:return!e.isUndefined(t[n])&&r.test(t[n])?t[n]:o;case 1:return t[n];case 0:return t;default:throw"Invalid argument"}}},getOrigin:function(e){return e.split("/").slice(0,3).join("/")},template:function(n){var t=e.map(n.match(/\{:.*?\}/g),function(e){return e.substr(2,e.length-3)});return function(r){return e.reduce(t,function(e,n){var t="{:"+n+"}",o=r[n]||t;return e.split(t).join(o)},n)}}}),e}.call(n,t,n,e),!(void 0!==r&&(e.exports=r))},function(e){e.exports=$},function(e,n,t){var r;r=function(){var e="4.0.2",n=location.protocol+"//s.yimg.jp/images/ycd/lib/ycdloader/"+e,t=-1!==location.search.indexOf("ycd_log_debug")?"debug":"disable";return{logLevel:t,namespace:{parent:"YAHOO.JP.Ycd.recommend.loader",child:"YAHOO.JP.Ycd.recommend.child"},defaults:{grandChildPath:"/ycd/communicate",proxyURL:n+"/ycdproxy.html",timeout:1e4},taboolaLoader:{cdn:{taboola:"cdn-yjp.taboola.com",yj:"cdn-ycd.c.yimg.jp"},template:"//{:domain}/libtrc/{:dir_name}/loader.js",stub:n+"/taboola_loader_stub.min.js"}}}.call(n,t,n,e),!(void 0!==r&&(e.exports=r))},,,,function(e,n,t){var r,o;r=[t(2)],o=function(e){var n="*",t=function(e,n,t,r){var o=e.__events||(e.__events=[]);o.push({type:n,listener:t,options:r||{}})};return{on:function(n,r,o){if(e.isObject(arguments[0])){var i=arguments[0],a=this;e.each(e.keys(i),function(e){t(a,e,i[e],{})})}else t(this,n,r,o)},once:function(n,r){var o={once:!0};if(e.isObject(arguments[0])){var i=arguments[0],a=this;e.each(e.keys(i),function(e){t(a,e,i[e],o)})}else t(this,n,r,o)},trigger:function(t,r){var o=this.__events||(this.__events=[]),i=e.filter(o,function(e){var r=!e.options.once||e.options.once&&!e.executed;return(e.type===n||e.type===t)&&r}),a=this;e.each(i,function(e){e.type===n?e.listener.call(a,t,r):e.listener.call(a,r),e.executed=!0})}}}.apply(n,r),!(void 0!==o&&(e.exports=o))},,,function(e){function n(e){var n=[];for(var t in e)n.push(t);return n}function t(e,n){for(var t=0;t<e.length;t++)n(e[t])}function r(e,n){for(var t=[],r=0;r<e.length;r++)t.push(n(e[r]));return t}function o(e){var n={},r=e?e.split("&"):[];return t(r,function(e){var t=e.split("="),r=t[0],o="undefined"!=typeof t[1]?decodeURIComponent(t[1]):"";n[r]=o}),n}function i(e){return r(n(e),function(n){return n+"="+encodeURIComponent(e[n])}).join("&")}e.exports={parse:o,stringify:i}},function(e,n,t){var r;r=function(){var e=function(e,n){var t=setTimeout(e,n);return function(){clearTimeout(t)}};return e}.call(n,t,n,e),!(void 0!==r&&(e.exports=r))},function(e,n,t){function r(e){if(!e.dirName)throw"No dirName parameter";var n=u.template(l.taboolaLoader.template)({dir_name:e.dirName,domain:e.useYcdn?l.taboolaLoader.cdn.yj:l.taboolaLoader.cdn.taboola}),t=s.ajaxSettings.cache||!1;s.ajaxSetup({cache:!0}),s("<script>").attr({src:n,async:!0}).insertAfter("script:first"),s.ajaxSetup({cache:t})}function o(e){var n=s("#"+e.container);n.on("click",".videoCube",function(){var t=s("a:first",this).attr("href");e.onclick({itemIndex:s(".videoCube",n).index(this),url:t,logger_url:t})})}function i(e){var n=s("#"+e.container);n.on("click",".logoDiv a",function(n){n.preventDefault(),e.onclickLogo&&e.onclickLogo(s(this).attr("href"))})}function a(e){var n=s("#"+e.container),t=e.onrender,r=f({initialValue:0,watch:function(){return s(".videoCube",n).length},onChange:function(){r.stop(),t()}})}function c(e){r(e);var n={article:e.article||"auto"};return e.currentURL&&(n.url=e.currentURL),e.referrer&&(n.referrer=e.referrer),window._taboola=window._taboola||[],window._taboola.push(n),{addModule:function(e){p.debug("AddModule: ",e),e.onrender&&(a(e),e.onrender=function(){}),window._taboola.push(e),e.sponsored_contents&&e.onclick&&(p.debug("add click event hander to ",e.container),o(e)),i(e)},flush:function(){window._taboola.push({flush:!0})}}}var u=t(2),s=t(3),l=t(4),d={urlTemplate:l.taboolaLoader.template,dirName:null,cdnDomain:l.taboolaLoader.cdn.taboola,currentURL:null},f=t(14),p=t(16).getLogger("taboola-module:",l.logLevel);e.exports=function(e){var n=u.extend(d,e);return c(n)}},function(e,n,t){var r,o;r=[t(2),t(15),t(12)],o=function(e,n,t){return function(r){var o,i=e.extend({interval:50,watch:function(){},onChange:function(){},compare:function(e,n){return e===n},startDelay:0,autoStart:!0},r),a=e.isUndefined(i.initialValue)?i.watch():i.initialValue,c=function(){var e=i.watch();i.compare(a,e)||(i.onChange(a,e),a=e)},u=function(){o&&o()},s=function(){u(),o=n(c,i.interval)};return i.autoStart&&t(s,i.startDelay),{stop:u,start:s}}}.apply(n,r),!(void 0!==o&&(e.exports=o))},function(e,n,t){var r;r=function(){var e=function(e,n){var t=setInterval(e,n);return function(){clearInterval(t)}};return e}.call(n,t,n,e),!(void 0!==r&&(e.exports=r))},function(e){function n(e,t){this.name=e,this.logLevel=t||n.logLevels.disable,this.handlers=[],this.handlers.push(function(e){var n=[].slice.call(arguments,1),t=["["+this.name+"]["+e+"]"].concat(n);console.log.apply(console,t)})}n.logLevels={debug:100,info:200,warn:300,error:400,critical:500,disable:1e3},n.prototype.addHandler=function(e){this.handlers.push(e)},n.prototype.log=function(e,t){var r=[e].concat([].slice.call(t,0)),o=n.logLevels[e];if(!(this.logLevel>o))for(var i=0;i<this.handlers.length;i++)this.handlers[i].apply(this,r)},n.prototype.debug=function(){this.log.call(this,"debug",arguments)},n.prototype.info=function(){this.log.call(this,"info",arguments)},n.prototype.warn=function(){this.log.call(this,"warn",arguments)},n.prototype.error=function(){this.log.call(this,"error",arguments)},n.prototype.critical=function(){this.log.call(this,"critical",arguments)},n.getLogger=function(e,t){return new n(e,n.logLevels[t])},e.exports=n},,function(e,n,t){var r,o;r=[t(1),t(2),t(14),t(3),t(8)],o=function(e,n,t,r,o){function i(i){var u=n.extend({parentOrigin:null,emitTo:{},grandChildPath:null,forceIframe:!1,messageParser:function(e){return{event:"message",data:e}},messageMaker:function(){return arguments[0]}},i),s=n.extend(u.emitTo,o),l=u.emitTo.sendMessage=function(){return!u.forceIframe&&a?function(n){var t=e.parent;t.postMessage(u.messageMaker(n),u.parentOrigin)}:function(e){var n=c(u.parentOrigin+u.grandChildPath,u.messageMaker(e)),t=r("<iframe>").attr({width:0,height:0}).css({width:0,height:0}).attr("src",n).appendTo("body");t.on("load",function(){setTimeout(function(){t.remove()},1e3)})}}(),d=function(e){var n=u.messageParser(e);s.trigger(n.event,n.data)};return new t({interval:50,watch:function(){return e.location.hash.substr(1)},onChange:function(e,n){d(n)}}),r(e).on("message",function(e){(u.parentOrigin===e.originalEvent.origin||"*"===u.parentOrigin)&&d(e.originalEvent.data)}),{send:l,receiver:s}}var a=!!e.postMessage,c=function(e,n){return e.split("#")[0]+"#"+n};return{Child:i}}.apply(n,r),!(void 0!==o&&(e.exports=o))},function(e,n,t){function r(e){a("<script>").attr({src:e.stubUrl,async:!0}).insertAfter("script:first")}function o(e){r(e);var n={article:"auto"};return e.currentURL&&(n.url=e.currentURL),window._taboola=window._taboola||[],window._taboola.push(n),{addModule:function(e){window._taboola.push(e)},flush:function(){window._taboola.push({flush:!0})}}}var i=t(2),a=t(3),c=t(4),u={stubUrl:c.taboolaLoader.stub};e.exports=function(e){var n=i.extend(u,e);return o(n)}}]);