KISSY.add("mui/iconfont/fontloader",function(t,e,n,i,o){var a="J_MuiTempleSpan";function r(e){this.cfg=t.merge(r.defaultConfig,e);this._init()}r.defaultConfig={fontFamily:"mui-iconfont",textContent:"&#13402",timeout:3e3,CLASS_TRIGGER:"J_MuiFont",container:i.one("body"),loadingCallback:function(){},successCallback:function(){},errorCallback:function(){}};t.extend(r,e);t.augment(r,{_init:function(){var t=this;t.cfg.loadingCallback();t._judgeBrowser();t._getDom();t._changeFontFamily();t._detect()},_judgeBrowser:function(){var e=this,n=e._getUserBrowser();if(n==="ie"&&t.inArray(t.UA.ie,[6,7,8])){e.set("modernBrowser",false)}else{e.set("modernBrowser",true)}},_getDom:function(){var t=this,e=t.get("modernBrowser");if(!e){t._lowDomHelper()}else{t._domHelper()}},startup:function(){var t=(new Date).getTime();return function(){return t}}(),_getUniqueId:function(){return a+this.startup()},_lowDomHelper:function(){var t=document.createElement("span");t.innerHTML=this.cfg.textContent;t.style.cssText="display:inline-block;font-size:42px;position:absolute;visibility:hidden;top:0;left:0;width:auto;height:auto;margin:0;padding:0;font-variant:normal;";t.id=this._getUniqueId();document.body.appendChild(t);this.set("ruler",t);this.set("rulerInitValue",t.offsetHeight)},_domHelper:function(){var t=document.createElement("span");t.textContent=this.cfg.textContent;t.style.cssText="display:block;font-size:42px;position:absolute;top:0;left:0;visibility:hidden;width:auto;height:auto;margin:0;padding:0;font-variant:normal;";t.id=this._getUniqueId();document.body.appendChild(t);this.set("ruler",t);this.set("rulerInitValue",t.clientWidth)},_changeFontFamily:function(){var t=this,e=t.get("ruler");o.css(e,{"font-family":t.cfg.fontFamily})},_detect:function(){var t=this,e=this.get("modernBrowser"),n=this.get("ruler"),i=t.get("rulerInitValue");setTimeout(function(){var o=!e?n.offsetHeight:n.clientWidth,a=t.cfg.timeout-parseInt(t.timestamp());if(o==i&&a>=0){t.log("fontloader hard working ...");t._detect()}if(o==i&&a<0){t._handleCallback();t.log(t.cfg.fontFamily+"\uff1afailed;");t.cfg.errorCallback()}if(o!=i){t._handleCallback();t.log(t.cfg.fontFamily+"\uff1aloaded, "+t.timestamp());t.cfg.successCallback()}},200)},timestamp:function(){return(new Date).getTime()-this.startup()},_handleCallback:function(){var t=this;i.one("#"+t._getUniqueId()).remove();if(i.one("."+t.cfg.CLASS_TRIGGER,t.cfg.container)){i.all("."+t.cfg.CLASS_TRIGGER,t.cfg.container).css({visibility:"visible"})}},_getUserBrowser:function(){return t.UA.shell},log:function(t){if(location.href.indexOf("!@#debug")>-1&&window.console&&window.console.log){console.log(t)}}});return r},{requires:["base","ua","node","dom"]});