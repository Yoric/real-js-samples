define("mui/datalazyload/index",["mui/zepto/zepto","mui/zepto/event"],function(t,e,n){function o(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function a(t){return 1===t.nodeType||9===t.nodeType}function i(t){return"function"==typeof t.getDOMNodes&&(t=t.getDOMNodes()),t=o(t)?t:[t],t.reduce(function(t,e){return e?o(e)?t.concat(i(e)):a(e)?t.concat(e):!e.tagName&&e.length&&"object"==typeof e?t.concat(i(Array.prototype.slice.call(e))):"string"==typeof e?t.concat(s(e)):"function"==typeof e.get?(e=e.get(),t.concat(e?i(e):void 0)):t:t},[])}function r(t){var e=document.createElement("style");document.head.appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(x.createTextNode(t))}function c(t,e){var n,o="";try{(n=document.defaultView.getComputedStyle(t,null))&&(o=n.getPropertyValue(e)||n[e])}catch(a){}try{""===o&&(o=t.currentStyle[e])}catch(a){}return""===o&&(o=t.style[e]),o}function d(t,e,n){T(t).on(e,n)}function l(t,e,n){T(t).off(e,n)}function f(t,e){return s(t,e)[0]}function s(t,e){return"string"!=typeof t?t=i(t):D(e||document).find(t).get()}function u(t,e,n){return D(t).html(e)}function g(){var t=window,e=t.document;t.pageXOffset;return 1*(t.pageYOffset||0)+1*(e.documentElement.scrollLeft||0)+1*(e.body.scrollLeft||0)}function m(){var t=window,e=t.document;return 1*(t.pageXOffset||0)+1*(e.documentElement.scrollTop||0)+1*(e.body.scrollTop||0)}function h(){var t=window,e=t.document,n=e.body,o=e.documentElement;return t.innerWidth||"CSS1Compat"===e.compatMode&&o.clientWidth||n&&n.clientWidth||o.clientWidth}function p(){var t=window,e=t.document,n=e.body,o=e.documentElement;return t.innerHeight||"CSS1Compat"===e.compatMode&&o.clientHeight||n&&n.clientHeight||o.clientHeight}function v(t){if(9==t.nodeType)return Math.max(document.document.documentElement.scrollWidth||0,document.body.documentElement.scrollWidth||0,h());var e=t.offsetWidth;return e>0?e:(e=c(t,"width"),(null==e||Number(e)<0)&&(e=t.style.width||0),e=parseFloat(e)||0,e+=parseFloat(c(t,"paddingLeft"))||0,e+=parseFloat(c(t,"borderLeftWidth"))||0,e+=parseFloat(c(t,"paddingRight"))||0,e+=parseFloat(c(t,"borderRightWidth"))||0)}function y(t){if(9==t.nodeType)return Math.max(document.document.documentElement.scrollHeight||0,document.body.documentElement.scrollHeight||0,p());var e=t.offsetHeight;return e>0?e:(e=c(t,"height"),(null==e||Number(e)<0)&&(e=t.style.height||0),e=parseFloat(e)||0,e+=parseFloat(c(t,"paddingTop"))||0,e+=parseFloat(c(t,"borderTopHeight"))||0,e+=parseFloat(c(t,"paddingBottom"))||0,e+=parseFloat(c(t,"borderBottomHeight"))||0)}function b(t){var e=g(),n=m();if(t.getBoundingClientRect){var o=t.getBoundingClientRect(),a=document,i=a.body,r=a&&a.documentElement,c=window.getComputedStyle&&window.getComputedStyle(t).zoom||1;e+=o.left*c-(r.clientLeft||i.clientLeft||0),n+=o.top*c-(r.clientTop||i.clientTop||0)}return{"left":e,"top":n}}function _(t){var e,n,o,a=[];return function(i,r){return 0===r||r||(r=1),1&r&&!n&&(n=!0,t(function(t){for(e=t;o=a.shift();)try{o&&o.apply(null,[e])}catch(n){setTimeout(function(){throw n},0)}})),e?(i&&i.apply(null,[e]),e):(2&r||i&&a.push(i),e)}}function w(t,e,n){function o(){i&&(i.cancel(),i=0),r=+new Date,t.apply(n||this,arguments),c=+new Date}function a(t,e){var n=setTimeout(t,e);return{"cancel":function(){clearTimeout(n)}}}var i,r=0,c=0,e=e||150,d=function(){var t=arguments;!r||c>=r&&+new Date-c>e||c<r&&+new Date-r>8*e?o():(i&&i.cancel(),i=a(function(){o.apply(null,t)},e))};return d.stop=function(){i&&(i.cancel(),i=0)},d}function A(t,e,n){function o(){a?t[--a].call(null,e,o):n(e)}var a=t.length;o()}function k(t,e,n){if(!t.offsetWidth&&!t.offsetHeight)return!1;var o,a=b(t),i=window.getComputedStyle&&window.getComputedStyle(t).zoom||1,r=!0,c=a.left,d=a.top,l={"left":c,"top":d,"right":c+v(t)*i,"bottom":d+y(t)*i};return o=F(e,l),o&&n&&(r=F(n,l)),r&&o}function S(t){return/^(loaded|complete)$/.test(document.readyState)?t():window.addEventListener?window.addEventListener("load",t,!1):window.attachEvent?window.attachEvent("onload",t):void 0}function C(t){for(var e=["webkit",""],n=x.createElement("div"),o=e.length,o=0,a=e.length;o<a;o++)if(e[o]||(t=t.toLowerCase()),void 0!==n.style[e[o]+t])return!0;return!1}function H(t,e){var n=this;if(!(n instanceof H))return new H(t,e);var a=t;(!t||t.nodeType||"string"==typeof t||"function"==typeof t.get||t.getDOMNode)&&(a=e||{},t&&(a.container=t)),n.set("diff",z),n.set("placeholder",window.ActiveXObject&&!document.documentMode?"//g.alicdn.com/s.gif":"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="),n.set("execScript",!0),n.set("fade",!1),n.set("diff",z),n.set("autoDestroy",!0);for(var i in a)a.hasOwnProperty(i)&&n.set(i,a[i]);n.get("container")||n.set("container",document.body),n._diffRatio=0,n._callbacks={},n._startLis=[],n._containerIsNotDocument=9!=n.get("container").nodeType&&n.get("container")!==document.body&&n.get("container").nodeType,n._fade=C("Animation")&&!(/Android (\d+\.\d+)/i.test(I.navigator.userAgent)&&parseFloat(RegExp.$1)<4.3),o(a.container)&&(n._backCompact=1),n._initLoadEvent(),a.container&&n.addElements(a.container),n.resume(),d(document,"DOMContentLoaded",n._loadFn),S(function(){n._diffRatio=Math.max(X?2:1,n._diffRatio),n._loadFn()}),n._inited=!0}function F(t,e){var n={};return n.top=Math.max(t.top,e.top),n.bottom=Math.min(t.bottom,e.bottom),n.left=Math.max(t.left,e.left),n.right=Math.min(t.right,e.right),n.bottom>=n.top&&n.right>=n.left}function E(t,e,n,a){"img-src"===e&&(e="img"),o(t)||(t=[f(t)]);var i=new H(x,{});i.set("imgFlag",n||M+W),i.set("areaFlag",n||L+W),i.set("onStart",a),i.set("force",!0),i.addElements(t,e)}var R,D=t("mui/zepto/zepto"),T=t("mui/zepto/event"),I=window,x=I.document,M="data-ks-lazyload",L="ks-datalazyload",W="-custom",z="default",O="none",N="scroll",B="touchmove",P="resize",V=100,j=0,X=navigator.userAgent.match(/iPad|iPod|iPhone/);H.prototype={"get":function(t){return this["ATTR_"+t]},"set":function(t,e){this["ATTR_"+t]=e},"addStartListener":function(t){var e=this._startLis;if(t){for(var n=e.length-1;n>=0;n--)if(e[n]==t)return;e.push(t)}},"_initLoadEvent":function(){var e=this;e.addStartListener(function(t,n){var o=e.get("onStart");if(o){var a=o.apply(this,arguments);a!==!0&&a!==!1||(t.returnValue=a)}n()}),e.addStartListener(function(n,o){if("img"!=n.type)return void o();var a=e.get("webpReplacer");"function"==typeof a?t(["mui/datalazyload/webp"],function(t){t.isSupport(function(t){t&&(n.src=a(n.src)),o()})}):o()}),e.imgHandle=function(){var t=this,n=e.get("imgFlag")||M,o=t.getAttribute(n);o&&A(e._startLis,{"type":"img","elem":t,"src":o},function(o){function a(){l(t,"load",a),D(t).removeClass(r),D(t).addClass(i),e.refresh()}if(o.returnValue!==!1){if(o.src&&t.src!=o.src){if(e.isFade){var i="img-ks-lazyload",r="img-ks-beforeload";D(t).addClass(r),d(t,"load",a)}t.src=o.src}t.removeAttribute(n)}})},e.bgimgHandle=function(){var t=this,n=(e.get("imgFlag")||M)+"-bg",o=t.getAttribute(n);o&&A(e._startLis,{"type":"bgimg","elem":t,"bgimgSrc":o},function(e){function o(t,e){var n=new Image;n.style.position="absolute",n.style.visibility="visible",n.onload=n.onerror=function(){e(n),document.body.removeChild(n),n=null},document.body.appendChild(n),n.src=t}if(e.returnValue!==!1){if(e.bgimgSrc){var a,i,r=t&&t.filters;try{a=r&&r.item("DXImageTransform.Microsoft.AlphaImageLoader"),i=r&&r.item("DXImageTransform.Microsoft.Matrix")}catch(c){}if(a){if(a.src=e.bgimgSrc,a.enabled=!0,!i||!t.offsetWidth||!t.offsetHeight)return;o(e.bgimgSrc,function(e){if(e.offsetWidth&&e.offsetHeight){var n="cover"==t.currentStyle["background-size"]?"cover":"contain";e.offsetHeight/e.offsetWidth>t.offsetHeight/t.offsetWidth==("contain"==n)?(i.M11=t.offsetHeight*e.offsetWidth/(t.offsetWidth*e.offsetHeight),i.M22=1,i.Dx=t.offsetWidth*(1-i.M11)/2,i.Dy=0):(i.M11=1,i.M22=t.offsetWidth*e.offsetHeight/(t.offsetHeight*e.offsetWidth),i.Dx=0,i.Dy=t.offsetHeight*(1-i.M22)/2),i.enabled=!0}})}else t.style.backgroundImage="url("+e.bgimgSrc+")"}t.removeAttribute(n)}})},e.textareaHandle=function(){var t=this;t.style.display=O,t.className="";var n=document.createElement("div");t.parentNode.insertBefore(n,t),A(e._startLis,{"type":"textarea","elem":t,"value":t.value},function(t){t.returnValue!==!1&&(u(n,t.value,e.get("execScript")),e.addElements(n),e.refresh())})},e._loadFn=w(function(){if(e._inited&&e._started&&e.get("autoDestroy")){var t=e._callbacks,n=!0;for(var o in t)if(t.hasOwnProperty(o)&&void 0!==t[o]){n=!1;break}n&&e.destroy()}e._started&&e._loadItems()},V,e),e._onScroll=function(t){e._diffRatio=Math.max(X?4:2,e._diffRatio),e._loadFn()}},"refresh":function(){this._loadFn()},"_loadItems":function(){var t=this,e=t.get("container"),n=t._callbacks;if(!t._containerIsNotDocument||e.offsetWidth){t._windowRegion=t._getBoundingRect(),!t._backCompact&&t._containerIsNotDocument&&(t._containerRegion=t._getBoundingRect(t.get("container")));for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];a&&t._loadItem(o,a)}}},"_loadItem":function(t,e){var n=this,e=e||n._callbacks[t];if(!e)return!0;n._lastDiff!=n.get("diff")&&(n._windowRegion=n._getBoundingRect(),!n._backCompact&&n._containerIsNotDocument&&(n._containerRegion=n._getBoundingRect(n.get("container"))),n._lastDiff=n.get("diff"));var o=e.el,a=!1,i=e.fn;if(n.get("force")||k(o,n._windowRegion,n._containerRegion))try{a=i.call(o)}catch(r){setTimeout(function(){throw r},0)}return a!==!1&&delete n._callbacks[t],a},"addCallback":function(t,e){t=f(t);var n=this,o=n._callbacks,a={"el":t||document,"fn":e||function(){}},i=++j;return o[i]=a,n._windowRegion?n._loadItem(i,a):n.refresh(),i},"removeCallback":function(t,e){t=f(t);var n=this._callbacks;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];a.el==t&&(e?a.fn==e:1)&&delete n[o]}},"getElements":function(){var t=this,e=[],n=[],o=t._callbacks;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];i.fn==t.imgHandle&&e.push(i.el),i.fn==t.textareaHandle&&n.push(i.el)}return{"images":this._images,"textareas":this._textareas}},"addElements":function(t,e){function n(t){return function(e){t.src||(t.src=e)}}function o(t){return function(){setTimeout(function(){a._loadItem(t)},0)}}t=i(t);var a=this;a._addStyle();for(var r=0;r<t.length;r++){var c=t[r];if(!c)return;if(!e||"img"===e)for(var d=[c].concat(s("img",c)),l=0;l<d.length;l++){var f=d[l];if(f.getAttribute&&f.getAttribute(a.get("imgFlag")||M)){var u=a.addCallback(f,a.imgHandle);f.offsetWidth||(f.onload=f.onerror=o(u),f.src||(a.onPlaceHolder=_(function(t){var e=a._phImg=new Image,n=a.get("placeholder");e.onload=e.onerror=function(){t(n)},e.src=n}),a.onPlaceHolder(n(f))))}}if(!e||"bgimg"===e)for(var g=(a.get("imgFlag")||M)+"-bg",d=[c].concat(s("["+g+" ]",c)),l=0;l<d.length;l++){var f=d[l];f.getAttribute&&f.getAttribute(g)&&a.addCallback(f,a.bgimgHandle)}if(!e||"textarea"===e){var m=s("textarea."+(a.get("areaFlag")||L),c);for(var u in m)a.addCallback(m[u],a.textareaHandle)}}},"removeElements":function(t){t=i(t);var e=this,n=e._callbacks;for(var o in n)if(n.hasOwnProperty(o)){for(var a=n[o].el,r=!1,c=t.length-1;c>=0;c--)if(t[c]==a){delete n[o],r=!0;break}if(r)break}},"_getBoundingRect":function(t){var e,n,o,a;if(void 0!==t){e=y(t),n=v(t);var i=b(t);o=i.left,a=i.top}else e=p(),n=h(),o=g(),a=m();var r=this.get("diff"),c=this._diffRatio;return r===z?r={"left":0,"top":0,"right":n*c,"bottom":e*c}:"object"!=typeof r&&(r={"left":r,"top":r,"right":r,"bottom":r}),{"left":o-(r.left||0),"top":a-(r.top||0),"right":o+n+(r.right||0),"bottom":a+e+(r.bottom||0)}},"pause":function(){var t=this,e=t._onScroll,n=t._loadFn;if(!t._destroyed&&t._started){if(l(I,N,e),l(I,B,e),l(I,P,n),n.stop(),t._containerIsNotDocument){var o=t.get("container");l(o,N,e),l(o,B,e)}t._started=!1}},"resume":function(){var t=this,e=t._onScroll,n=t._loadFn;if(!t._destroyed&&!t._started){if(d(I,N,e),d(I,B,e),d(I,P,n),t._containerIsNotDocument){var o=t.get("container");d(o,N,e),d(o,B,e)}t._started=!0,t._loadFn()}},"destroy":function(){var t=this;t.pause(),t._callbacks={},t._destroyed=1},"_addStyle":function(){var t=this;t._fade&&(t.isFade=t.get("fade"),t.isFade&&!R&&(R=!0,r("@-webkit-keyframes ks-fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes ks-fadeIn{0%{opacity:0}100%{opacity:1}}.img-ks-lazyload{-webkit-animation:ks-fadeIn 350ms linear 0ms 1 normal both;animation:ks-fadeIn 350ms linear 0ms 1 normal both;opacity:1}.img-ks-beforeload{opacity:0}")))}},H.loadCustomLazyData=E;var $;H.instance=function(){return $||($=new H(null,{"autoDestroy":!1}))},n.exports=H});define("mui/zepto/event",["mui/zepto/zepto"],function(e,n,t){"use strict";var r=e("mui/zepto/zepto");!function(e){function n(e){return e._zid||(e._zid=l++)}function t(e,t,o,u){if(t=r(t),t.ns)var a=i(t.ns);return(g[n(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||a.test(e.ns))&&(!o||n(e.fn)===n(o))&&(!u||e.sel==u)})}function r(e){var n=(""+e).split(".");return{"e":n[0],"ns":n.slice(1).sort().join(" ")}}function i(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function o(e,n){return e.del&&!y&&e.e in E||!!n}function u(e){return P[e]||y&&E[e]||e}function a(t,i,a,f,c,l,d){var v=n(t),h=g[v]||(g[v]=[]);i.split(/\s/).forEach(function(n){if("ready"==n)return e(document).ready(a);var i=r(n);i.fn=a,i.sel=c,i.e in P&&(a=function(n){var t=n.relatedTarget;if(!t||t!==this&&!e.contains(this,t))return i.fn.apply(this,arguments)}),i.del=l;var v=l||a;i.proxy=function(e){if(e=s(e),!e.isImmediatePropagationStopped()){e.data=f;var n=v.apply(t,e._args==p?[e]:[e].concat(e._args));return n===!1&&(e.preventDefault(),e.stopPropagation()),n}},i.i=h.length,h.push(i),"addEventListener"in t&&t.addEventListener(u(i.e),i.proxy,o(i,d))})}function f(e,r,i,a,f){var s=n(e);(r||"").split(/\s/).forEach(function(n){t(e,n,i,a).forEach(function(n){delete g[s][n.i],"removeEventListener"in e&&e.removeEventListener(u(n.e),n.proxy,o(n,f))})})}function s(n,t){return!t&&n.isDefaultPrevented||(t||(t=n),e.each(w,function(e,r){var i=t[e];n[e]=function(){return this[r]=b,i&&i.apply(t,arguments)},n[r]=x}),(t.defaultPrevented!==p?t.defaultPrevented:"returnValue"in t?t.returnValue===!1:t.getPreventDefault&&t.getPreventDefault())&&(n.isDefaultPrevented=b)),n}function c(e){var n,t={"originalEvent":e};for(n in e)z.test(n)||e[n]===p||(t[n]=e[n]);return s(t,e)}var p,l=1,d=Array.prototype.slice,v=e.isFunction,h=function(e){return"string"==typeof e},g={},m={},y="onfocusin"in window,E={"focus":"focusin","blur":"focusout"},P={"mouseenter":"mouseover","mouseleave":"mouseout"};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents",e.event={"add":a,"remove":f},e.proxy=function(t,r){var i=2 in arguments&&d.call(arguments,2);if(v(t)){var o=function(){return t.apply(r,i?i.concat(d.call(arguments)):arguments)};return o._zid=n(t),o}if(h(r))return i?(i.unshift(t[r],t),e.proxy.apply(null,i)):e.proxy(t[r],t);throw new TypeError("expected function")},e.fn.bind=function(e,n,t){return this.on(e,n,t)},e.fn.unbind=function(e,n){return this.off(e,n)},e.fn.one=function(e,n,t,r){return this.on(e,n,t,r,1)};var b=function(){return!0},x=function(){return!1},z=/^([A-Z]|returnValue$|layer[XY]$)/,w={"preventDefault":"isDefaultPrevented","stopImmediatePropagation":"isImmediatePropagationStopped","stopPropagation":"isPropagationStopped"};e.fn.delegate=function(e,n,t){return this.on(n,e,t)},e.fn.undelegate=function(e,n,t){return this.off(n,e,t)},e.fn.live=function(n,t){return e(document.body).delegate(this.selector,n,t),this},e.fn.die=function(n,t){return e(document.body).undelegate(this.selector,n,t),this},e.fn.on=function(n,t,r,i,o){var u,s,l=this;return n&&!h(n)?(e.each(n,function(e,n){l.on(e,t,r,n,o)}),l):(h(t)||v(i)||i===!1||(i=r,r=t,t=p),i!==p&&r!==!1||(i=r,r=p),i===!1&&(i=x),l.each(function(p,l){o&&(u=function(e){return f(l,e.type,i),i.apply(this,arguments)}),t&&(s=function(n){var r,o=e(n.target).closest(t,l).get(0);if(o&&o!==l)return r=e.extend(c(n),{"currentTarget":o,"liveFired":l}),(u||i).apply(o,[r].concat(d.call(arguments,1)))}),a(l,n,i,r,t,s||u)}))},e.fn.off=function(n,t,r){var i=this;return n&&!h(n)?(e.each(n,function(e,n){i.off(e,t,n)}),i):(h(t)||v(r)||r===!1||(r=t,t=p),r===!1&&(r=x),i.each(function(){f(this,n,r,t)}))},e.fn.trigger=function(n,t){return n=h(n)||e.isPlainObject(n)?e.Event(n):s(n),n._args=t,this.each(function(){n.type in E&&"function"==typeof this[n.type]?this[n.type]():"dispatchEvent"in this?this.dispatchEvent(n):e(this).triggerHandler(n,t)})},e.fn.triggerHandler=function(n,r){var i,o;return this.each(function(u,a){i=c(h(n)?e.Event(n):n),i._args=r,i.target=a,e.each(t(a,n.type||n),function(e,n){if(o=n.proxy(i),i.isImmediatePropagationStopped())return!1})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(n){e.fn[n]=function(e){return 0 in arguments?this.bind(n,e):this.trigger(n)}}),e.Event=function(e,n){h(e)||(n=e,e=n.type);var t=document.createEvent(m[e]||"Events"),r=!0;if(n)for(var i in n)"bubbles"==i?r=!!n[i]:t[i]=n[i];return t.initEvent(e,r,!0),s(t)}}(r),t.exports=r});KISSY.add("mui/category-menu/index",function(n,e,t,a,i){function r(e,t){var a=this;if(!e)return;a.container=n.one(e);a.config=n.merge(r.Config,t);a._init()}r.Config={triggerType:"mousemove",triggerDelay:600,autoPlay:false,hoverStop:true,navContaienrClass:"mui-menu-nav-container",navClass:"mui-menu-nav",selectedClass:"mui-menu-nav-selected",pannelClass:"mui-menu-pannel",timeout:3,currentNav:-1,forceSelect:false};n.augment(r,e.Target,{_init:function(){var e=this;e.navContainer=e.container.one("."+e.config.navContainerClass);e.navs=e.navContainer.all("."+e.config.navClass);e.pannels=e.container.all("."+e.config.pannelClass);e.forceSelect=e.config.forceSelect;e.minNavIdx=e.forceSelect?0:-1;e.currentNav=e.config.currentNav>=e.minNavIdx&&e.config.currentNav<e.navs.length?e.config.currentNav:e.minNavIdx;e.autoPlay=e.config.forceSelect&&e.config.autoPlay;e.countDown=a.register("Slide"+n.guid());e._initStatus();e._bindEvent()},_initStatus:function(){var n=this;n.navs.each(function(e){e.removeClass(n.config.selectedClass)});n.pannels.each(function(n){n.hide()});if(n.forceSelect){n.navs.item(n.currentNav).addClass(n.config.selectedClass);n.pannels.item(n.currentNav).show()}i.init(n.navContainer,n.navs);n.countDown.pause();if(n.autoPlay){var e=n.navs.item(n.currentNav).attr("data-count")||n.pannels.item(n.currentNav).attr("data-count")||n.config.timeout;n.countDown.set(e);n.countDown.end(function(){n.next()});n.countDown.resume();n.countDown.start()}},_switchTo:function(n){var e=this;e.navs.item(e.currentNav).removeClass(e.config.selectedClass);e.navs.item(n).addClass(e.config.selectedClass);e.pannels.item(e.currentNav).hide();e.pannels.item(n).show();e.currentNav=n},_bindEvent:function(){var e=this;e.navs.each(function(t){t.on(e.config.triggerType,function(t){var a=n.one(t.currentTarget);var r=e._indexOf(a,e.navs);if(t.type=="mousemove"){if(e.currentNav==-1||!i.isInTriangle(t)){e.switchTo(r)}}else if(t.type=="click"||t.type=="tap"){e.switchTo(r)}});if(~e.config.triggerType.indexOf("mousemove")){t.on("mouseenter",function(t){var a=n.one(t.currentTarget);var i=e._indexOf(a,e.navs);var r=n.later(function(){e.switchTo(i)},e.config.triggerDelay);e.navs.data("data-delayTimer",r)});t.on("mouseleave",function(){var n=e.navs.data("data-delayTimer");n&&n.cancel()})}});if(!e.forceSelect){e.container.on("mouseleave",function(n){e.switchTo(-1)});n.one(document).on("tap",function(n){if(!e.container.contains(n.target)){e.switchTo(-1)}})}if(!e.autoPlay)return;e.on("beforeSwitch",function(n){var t=n.nav;var a=n.pannel;var i=t.attr("data-count")||a.attr("data-count")||e.config.timeout;e.countDown.set(i)});e.container.on("mousemove mouseleave",function(n){if(n.type=="mousemove"){e.countDown.pause()}else if(n.type=="mouseleave"){e.countDown.resume()}})},switchTo:function(n){var e=this;if(n<e.minNavIdx&&n>=e.navs.length||n==e.currentNav)return;var t=e.currentNav;var a={oldIndex:t,index:n,oldNav:e.navs.item(t),nav:e.navs.item(n),oldPannel:e.pannels.item(t),pannel:e.pannels.item(n)};e.fire("beforeSwitch",a);e._switchTo(n);e.fire("afterSwitch",a)},next:function(){var n=this;var e=(n.currentNav+1)%n.navs.length;n.switchTo(e)},prev:function(){var n=this;var e=(n.currentNav-1+n.navs.length)%n.navs.length;n.switchTo(e)},_indexOf:function(n,e){for(var t=0;t<e.length;t++){if(e.item(t).getDOMNode()==n.getDOMNode())return t}return-1}});return r},{requires:["event","node","mui/category-menu/count-down","mui/category-menu/triangle"]});KISSY.add("mui/category-menu/count-down",function(e,r){var t={registerTimers:[]};var n={init:function(r){var n=this;n.config=e.merge(t,r);n.registerTimers=n.config.registerTimers},register:function(e,r){var t=this;t.set(e,r);return{start:function(){n.start()},set:function(r){t.set(e,r)},resume:function(){t.resume(e)},pause:function(){t.pause(e)},end:function(r){t.on(e+"End",r)}}},set:function(e,r){var t=this;var n=t._find(e);if(!n){t.registerTimers.push({name:e,pause:false,count:r>0?r:-1})}else{n.count=r}return n},resume:function(e){var r=this;var t=r._find(e);if(!t)return;t.pause=false},pause:function(e){var r=this;var t=r._find(e);if(!t)return;t.pause=true},start:function(){var r=this;r.stop();r.counter=e.later(function(){for(var e=0;e<r.registerTimers.length;e++){var t=r.registerTimers[e];if(!t.pause){if(t.count==0){r.fire(t["name"]+"End")}t.count--}}},1e3,true)},stop:function(){var e=this;e.counter&&e.counter.cancel()},_find:function(e){var r=this;for(var t=0;t<r.registerTimers.length;t++){if(r.registerTimers[t]["name"]===e){return r.registerTimers[t]}}return undefined}};e.mix(n,r.Target);n.init();return n},{requires:["event"]});KISSY.add("mui/category-menu/triangle",function(e,n){var t={init:function(n,t){var i=this;i.container=e.one(n);if(typeof t==="string"){i.navs=i.container.all(t)}else{i.navs=e.all(t)}i.containerOffset=i.container.offset();i.containerBox={width:n.width(),height:n.height()};i.triangle={m:{x:i.containerBox.width,y:i.containerBox.height},n:{x:i.containerBox.width,y:0},p:{x:0,y:i.containerBox.height}};i.navs.each(function(e){e.on("mouseenter",function(e){i.triangle.p=i._getVirtualCoordinate(e)})})},isInTriangle:function(e){var n=this;var t=n._getVirtualCoordinate(e);return t.x>n.triangle.m.x||t.x>=n.triangle.p.x&&(t.y>=n.triangle.p.y&&(n.triangle.m.y-t.y)/(n.triangle.m.x-t.x)>=(n.triangle.m.y-n.triangle.p.y)/(n.triangle.m.x-n.triangle.p.x)||t.y<n.triangle.p.y&&(n.triangle.n.y-t.y)/(n.triangle.n.x-t.x)<(n.triangle.n.y-n.triangle.p.y)/(n.triangle.n.x-n.triangle.p.x))},_getVirtualCoordinate:function(e){var n=this;return{x:e.pageX-n.containerOffset.left,y:n.containerBox.height-(e.pageY-n.containerOffset.top)}}};return t},{requires:["node"]});KISSY.add("mui/lib/tps",function(e){var t=/(alicdn|taobaocdn|wimg\.taobao)\.(com|net)/,n=/_(?:(sum|m|b|\d+x\d+)(xz|xc)?)?(c[xy]\d+i\d+)?(co0)?([qQ]\d{2})?(g)?(s\d{3})?\.jpg/,r=/_\.(webp)/,i=[[16],[20],[24],[30],[32],[36],[40],[48],[50],[60,90],[60],[64],[70],[70,1e3],[72],[75],[75,100],[80],[80,1e3],[80,60],[81,65],[88],[90],[90,135],[90,45],[90,60],[96,54],[100,150],[100,1e3],[100,50],[100],[110,1e4],[110],[110,90],[115,100],[120,60],[120,90],[120],[120,160],[121,75],[125],[128],[130],[140],[140,100],[140,70],[142],[145],[150],[150,200],[150,1e4],[160,80],[160,180],[160,240],[160,90],[160],[165,5e3],[170],[170,1e4],[170,120],[180],[180,230],[180,90],[190],[190,43],[196],[200,100],[200],[210,140],[210],[210,1e3],[220,330],[220,5e3],[220,1e4],[220],[230,87],[230],[234],[240,5e3],[240],[240,1e4],[250,225],[250],[264,100],[270,180],[270],[270,450],[280,410],[284],[288,480],[290,1e4],[290],[292],[294,430],[300],[300,1e3],[310],[315],[320,480],[320],[320,5e3],[336],[350,1e3],[350],[360],[400,152],[400],[420,280],[430],[440],[450,600],[450,5e3],[450,1e4],[460],[468],[480,420],[480],[485,175],[490,330],[490],[500,1e3],[500,450],[540],[560,370],[560],[560,840],[570,1e4],[570],[580,1e4],[580],[600],[620,1e4],[640,480],[640],[660,440],[670],[720],[728],[760],[790,420],[790,1e4],[960],[970],[1080,1800],[1152,1920],[1200],[2200],[1e4,220],[1e4,340],[1e4,170],[1e4,500]],a=i.length;function o(e){if(!t.test(e)){return e}return e.replace(n,"").replace(r,"")}function s(e,i){if(!i&&!t.test(e)){return}var a,o=n.exec(e);a=o?{size:o[1],crop:o[2],cut:o[3],circle:o[4],quality:o[5],rotate:o[6],sharpen:o[7]}:{};o=r.exec(e);if(o){a.format=o[1]}return a}function c(e){var t=/-(\d+)-(\d+)\./.exec(o(e));return t?[parseInt(t[1],10),parseInt(t[2],10)]:null}function u(t,n){var r=o(t),i=n.clean?{}:s(t);if(!r){return t}n=e.mix(i,n||{});var a="",c="";if(n.size){a+=n.size;if(n.crop){a+=n.crop}}if(n.cut){a+=n.cut}if(n.circle){a+=n.circle}if(n.quality){a+=n.quality}if(n.rotate){a+=n.rotate}if(n.sharpen){a+=n.sharpen}if(a){a="_"+a+".jpg"}if(n.format){c="_."+n.format}return r+a+c}var l;function f(){if(l===undefined){var e;try{e=window.localStorage&&window.localStorage.getItem("webpsupport")}catch(t){}if(e){l=e==="true"}else{var n=new Image;n.onload=n.onerror=function(){l=n.width===2&&n.height===2;try{window.localStorage&&window.localStorage.setItem("webpsupport",l)}catch(e){}};n.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}}return!!l}function m(e,t){t=t||{};if(t.enableAutoSize!==false&&!t.size){var n=t.srcSize||c(e),r=t.srcRatio||(n?n[0]/n[1]:0),o=document.documentElement.getBoundingClientRect().width,s=window.devicePixelRatio>1?Math.max(1,screen.width*window.devicePixelRatio/o):1,l=t.displayWidth||document.documentElement&&document.documentElement.getBoundingClientRect().width||0,m=t.displayHeight||0,d="";if(n&&(l&&l*s>=n[0]||m&&m*s>=n[1])){}else if(!r){var v=Number.MAX_VALUE;for(var p=0;p<a;p++){var h=i[p][0],g=i[p][1]||h;if(n&&h>=n[0]){break}if(false||h>0&&h<1e4&&(l&&l>h||!l)||g>0&&g<1e4&&(m&&m>g||!m)||n&&g>=n[1]){continue}var y=Math.min(h>0&&h<1e4&&l?h/l:Number.MAX_VALUE,g>0&&g<1e4&&m?g/m:Number.MAX_VALUE),P=Math.abs(Math.log(y/s));if(P<v){v=P;d=h+"x"+g}}}else{var b=Number.MAX_VALUE,v=Number.MAX_VALUE;if(l){b=Math.min(b,l)}if(m){b=Math.min(b,Math.round(m*r))}for(var p=0;p<a;p++){var h=i[p][0],g=i[p][1]||h,_=Math.min(h,Math.round(g*r)),P=Math.abs(Math.log(_/l/s));if(_<b||n&&g>=n[1]&&h>=n[0]){continue}if(P<v){v=P;d=h+"x"+g}}}d&&(t.size=d)}if(t.enableAutoQuality!==false&&!t.quality){var d=t.size&&t.size.split("x")||t.srcSize||c(e);if(d){var l=t.displayWidth||document.documentElement&&document.documentElement.getBoundingClientRect().width||0,m=t.displayHeight||0,y=Math.min(l?d[0]/l:1e4,m?d[1]/m:1e4);t.quality="Q"+Math.max(Math.min(Math.round(7-3*y)*25,90),30)}else{t.quality="Q90"}}if(t.enableAutoFormat!==false&&!t.format){f()&&(t.format="webp")}return u(e,t)}return{lazyListener:function(t,n,r){return function(i,a){var o;if(!i||i.type!="img"||!i.src||!(o=i.elem)){a();return}e.use("dom",function(e,c){if(!c.test(i.elem,t,n)&&i.elem!=n){a();return}var u=o.getAttribute("data-tps")||"";i.src=m(i.src,e.mix(e.mix({},r),s(u,true)));a()})}},getSourceUrl:o,getParams:s,getSize:c,getUrl:u,getFitUrl:m}});KISSY.add("mui/dlp/index",function(e){function a(a,t,l){return(a.replace(/#.+/,"")+(t?"&"+e.param(t):"")).replace(/\W+/g,"_").substr(-l)}function t(e){var a=e.key,t=e.storage||sessionStorage;if(a){return{get:function(e){var l;try{return(l=t.getItem(a+"_"+e))&&JSON.parse(l)}catch(s){}return null},set:function(e,l){try{var s=[];for(var c in t){if(c.indexOf(a+"_")===0){s.push(c)}}if(s.length>16){s.sort(function(e,a){return(JSON.parse(t.getItem(a)).timestamp||0)-(JSON.parse(t.getItem(e)).timestamp||0)});for(var r=s.length-1;r>=8;r--){t.removeItem(s[r])}}}catch(i){}try{if(!l){t.removeItem(a+"_"+e)}else{t.setItem(a+"_"+e,JSON.stringify(l))}}catch(i){}}}}}var l={get:function(l){var s=this,c=null,r=window,i=+new Date,u=null,n=l.cacheExpiryTime||7*24*60*60*1e3,o=l.cacheValidTime||0;switch(l.localCacheType){case"sessionStorage":if(r.sessionStorage){c=t({key:"_DLP_v1",storage:r.sessionStorage})}break;case"localStorage":if(r.localStorage){c=t({key:"_DLP_v1",storage:r.localStorage})}break}var p=a(l.url,l.data,1024);var f=c&&c.get(p);if(f&&f.timestamp<=i-n){f=null}function m(a){if(!u||l.multipleCallback&&u.level<5){var t={type:"cache",status:a,level:5,last:u};u=t;e.log(["[dlp]callback:",t]);l.success&&l.success(f.data,"success",t);l.complete&&l.complete(f.data,"success",t)}}if(f){if(f.timestamp>i-o){return m("init")}setTimeout(function(){m("loading")},l.cacheDelayTime)}var d={error:null,success:null,complete:function(a,t){var s;if(t=="success"&&(s=!l.dataVerify||l.dataVerify(a))){c&&(!l.localCacheVerify||l.localCacheVerify(a))&&c.set(p,{timestamp:+new Date,data:a});if(!u||l.multipleCallback&&u.level<8){var r={type:"regular",status:"success",level:8,last:u};u=r;e.log(["[dlp]callback:",r]);l.success&&l.success(a,t,r);l.complete&&l.complete(a,t,r)}}else{if(!u||l.multipleCallback&&u.level<2){if(f){m("error")}else{if(l.backup&&l.backup.url){e.use("io",function(e,c){c(e.mix({cache:true,complete:function(c,r){if(!u||l.multipleCallback&&u.level<2){if(r=="success"&&(!l.dataVerify||l.dataVerify(c))){var i={type:"backup",status:"backupsuccess",level:2,last:u};u=i;e.log(["[dlp]callback:",i]);l.success&&l.success(c,r,i);l.complete&&l.complete(c,r,i)}else{var i={type:"error",status:"backuperror",level:2,last:u};u=i;e.log(["[dlp]callback:",i]);if(s===false){l.success&&l.success(a,t,i)}else{l.error&&l.error(c,r,i)}l.complete&&l.complete(c,r,i)}}}},l.backup,false))})}else{if(!u||l.multipleCallback&&u.level<8){var r={type:"error",status:"error",level:8,last:u};u=r;e.log(["[dlp]callback:",r]);if(s===false){l.success&&l.success(a,t,r)}else{l.error&&l.error(a,t,r)}l.complete&&l.complete(a,t,r)}}}}}}};if(l.cache!==false){d.cache=true;if(l.dataType==="jsonp"&&!l.jsonpCallback){d.jsonpCallback="_DLP_"+parseInt(+new Date/n)+"_"+a(l.url,l.data,32)}}e.use("io",function(e,a){a(e.mix(e.mix({},l,undefined,undefined,true),d,undefined,undefined,true))})},jsonp:function(a){return this.get(e.mix({dataType:"jsonp"},a,false,undefined,true))},ald:function(a){return this.get(e.mix({dataType:"jsonp",backup:{dataType:"jsonp"}},a,false,undefined,true))}};return l});KISSY.add("mui/zebra-fushi-first-screen/fassion-dialog",function(e,t,a,r,i,n,s,o){var l=[{id:1,name:"\u846b\u82a6\u578b",img:"//img.alicdn.com/tps/i4/TB1ksoTFVXXXXclXpXXjBQB4VXX-120-164.png",desc:"\u846b\u82a6\u5f62\u8eab\u6750\u5c31\u662fX\u5f62\u8eab\u6750\uff0c\u53ea\u8981\u4f60\u7565\u52a0\u4fee\u9970\uff0c\u9a6c\u4e0a\u53ef\u4ee5\u53d8\u6210\u524d\u51f8\u540e\u7fd8\u50b2\u89c6\u65c1\u4eba\u7684S\u5f62\u7f8e\u5973\uff01"},{id:2,name:"\u82f7\u8517\u578b",img:"//img.alicdn.com/tps/i3/TB1lhAqFVXXXXX5XpXXjBQB4VXX-120-164.png",desc:"\u8349\u8393\u5f62\u8eab\u6750\u4e5f\u53ebY\u5f62\u8eab\u6750\uff0c\u4e0a\u8eab\u4e30\u6ee1\u7684\u8349\u8393\u5f62MM\u53ea\u8981\u5b66\u4f1a\u907f\u91cd\u642d\u914d\u5927\u6cd5\uff0c\u80fd\u8f7b\u677e\u53d8S\u5f62\uff01"},{id:3,name:"\u82f9\u679c\u578b",img:"//img.alicdn.com/tps/i2/TB1ah.rFVXXXXaeXpXXjBQB4VXX-120-164.png",desc:"\u82f9\u679c\u5f62\u8eab\u6750\u4e5f\u53ebO\u5f62\u8eab\u6750\uff0c\u5373\u4f7f\u4f53\u91cd\u4e0d\u5927\u4e5f\u5bb9\u6613\u663e\u5f97\u81c3\u80bf\uff0c\u5c24\u5176\u662f\u4e0a\u534a\u8eab\uff0c\u56e0\u6b64\u8981\u5c3d\u91cf\u7a7f\u6b3e\u5f0f\u7b80\u5355\u7684\u4e0a\u8863\u548c\u80fd\u7a81\u51fa\u8eab\u6750\u4f18\u52bf\u7684\u88e4\u5b50\u3002"},{id:4,name:"\u68a8\u5b50\u578b",img:"//img.alicdn.com/tps/i2/TB1RCUqFVXXXXbCXpXXjBQB4VXX-120-164.png",desc:"\u68a8\u5f62\u8eab\u6750\u4e5f\u53ebA\u5f62\u8eab\u6750\uff0cA\u5f62\u4f53\u5f62\u7684\u4eba\u6bd4\u8f83\u6709\u5973\u4eba\u5473\uff0c\u7a7f\u88d9\u88c5\u6bd4\u7a7f\u88e4\u88c5\u66f4\u80fd\u4f53\u73b0\u4f53\u5f62\u548c\u6c14\u8d28\u7684\u4f18\u52bf\uff0c\u9002\u5408\u5178\u96c5\u98ce\u683c\u7684\u6253\u626e\u3002"},{id:5,name:"\u8349\u8393\u578b",img:"//img.alicdn.com/tps/i2/TB1x1krFVXXXXX5XpXXjBQB4VXX-120-164.png",desc:"\u8349\u8393\u5f62\u8eab\u6750\u4e5f\u53ebY\u5f62\u8eab\u6750\uff0c\u4f53\u5f62\u4e0a\u5bbd\u4e0b\u7a84\u50cf\u5012\u4e09\u89d2\u5f62\uff0c\u80a9\u5bbd\u3001\u80f8\u90e8\u4e30\u6ee1\uff0c\u81c0\u90e8\u3001\u817f\u90e8\u8f83\u7626\uff0c\u4fd7\u79f0\u8fd0\u52a8\u5458\u4f53\u5f62\u3002\u4e0a\u8eab\u4e30\u6ee1\u7684\u8349\u8393\u5f62MM\u53ea\u8981\u5b66\u4f1a\u907f\u91cd\u642d\u914d\u5927\u6cd5\uff0c\u80fd\u8f7b\u677e\u53d8S\u5f62\uff01"}];$=t.all;var f=function(e,t){return Math.floor(Math.random()*(t-e)+e)};var d=function(e){var t=s({content:e,time:1.5}).show()};var u=function(e){var t=function(e,a){var r=true;if(!e||!a)return false;for(var i in e){if(!a[i])return false;if(typeof e[i]==="object"){r=t(e[i],a[i])}else{if(e[i]!==a[i])return false}}return r};var a=[],r={};for(var i=0,n=e.length;i<n;i++){if(!t(r[typeof e[i]+e[i]],e[i])){a.push(e[i]);r[typeof e[i]+e[i]]=e[i]}}return a};function c(i,s){e.use("mui/slider/index",function(e,i){var s=e.one("#fixed-tab");var o=false;var c=[];var p=new i("J_tab_fassiontest",{effect:"hSlide",speed:400,eventType:"click",triggerDelay:100,defaultTab:window.location.href.indexOf("result=true")>-1?8:1,touchmove:false});var h={Domain:"fs.tmall.com"};var g=function(e){if(!e)return false;var t="//"+h.Domain+"/fashionadviser/queryUserFashionData.jsonp";new r({type:"get",url:t,data:"",dataType:"jsonp",success:function(t){if(t&&t.success){e.success(t.model)}else{e.fail()}},error:function(t){e.fail()}})};var w=function(e){if(!e)return false;var t={type:e.type};t.age_area=x.data.ageArea;var a="//"+h.Domain+"/fashionadviser/queryFashionPreferData.jsonp";new r({type:"get",url:a,data:t,dataType:"jsonp",success:function(t){if(t&&t.success){e.success(t.model.details)}else{e.fail()}},error:function(t){e.fail()}})};var m=function(e){if(!e)return false;var t={};t.size=JSON.stringify(x.data.size);var a="//"+h.Domain+"/fashionadviser/calculateStyle.jsonp";new r({type:"get",url:a,data:t,dataType:"jsonp",success:function(t){if(t&&t.success){e.success(t)}else{e.fail()}},error:function(t){e.fail()}})};t.all(".next-step span").on("click",function(e){e.halt();var a=t.one(".next-step").attr("data-step").split(",");var r=parseInt(a[0]);var i=a[1];var n=function(e){var a=e+","+T.pageViewNames[e];t.one(".next-step").attr("data-step",a);T.renderPage(e);p.go(e)};var s=t.one(this);if(s.hasClass("pre")){r--;if(x.data.size.sg!=0&&x.data.size.sg!=""&&r==2){r--}if(s.html()=="\u91cd\u65b0\u6d4b\u8bd5"){r=0}}else if(s.hasClass("next")){if(s.html()=="\u901b\u901b\u60a8\u7684\u4e13\u5c5e\u7f8e\u8863"){window.location.href="//www.tmall.com/go/market/fushi/fashion-index.php";return false}var o=T.validate(i);if(!o.isValid){d(o.msg);return false}if(o.caculate){var l={success:function(e){if(e.success&&e.model!=0){x.data.figure=e.model;r+=2;n(r);return false}else{d("\u6ca1\u80fd\u5339\u914d\u60a8\u7684\u4f53\u578b\uff0c\u8bf7\u68c0\u67e5\u91cd\u586b\u3002");return false}},fail:function(){d("\u6ca1\u80fd\u5339\u914d\u60a8\u7684\u4f53\u578b\uff0c\u8bf7\u68c0\u67e5\u91cd\u586b\u3002");return false}};m(l);return false}r++}n(r)});var x={url:"//"+h.Domain+"/fashionadviser/submitUserFashionData.jsonp",userId:"",data:{ageArea:"",constellation:"",figure:"",hasSize:false,size:{sg:"",tz:"",xw:"",jk:"",tw:"",yw:""},prefer:{style_work:[],style_daily:[],style_brand:[]}},submit:function(t){var a=e.clone(x);var i=e.JSON.stringify(a.data.size);var n=a.data;n.size=i;n.prefer=e.JSON.stringify(a.data.prefer);var s=0;new r({type:"get",url:this.url,data:n,dataType:"jsonp",success:function(e){if(e&&e.success){t.success(e.model)}else{t.fail()}},error:function(e){t.fail()}})}};function y(){function r(r){this.setting=r||{viewName:"step-age"};this.viewNode=t.one("."+this.setting.viewName);this.viewTpl=new n(this.viewNode.one(".tpl").html());this.isViewRendered=false;this.render=function(e){this.renderation[this.setting.viewName](e);this.isViewRendered=true;var t=this.viewNode;setTimeout(function(){KISSY.one(".tab-content").css({height:t.height()})},300)};this.setView=function(a){var r={preTxt:"<\u4e0a\u4e00\u9879",showPreBtn:false,nextTxt:"\u4e0b\u4e00\u9879>",showNextBtn:true,stepTxt:"1/7",flagleft:"262px"};if(a){r=e.mix(r,a)}t.one(".triangle-up").css({left:r.flagleft});if(r.showPreBtn){t.one(".next-step .pre").html(r.preTxt).show()}else{t.one(".next-step .pre").html(r.preTxt).hide()}if(r.showNextBtn){t.one(".next-step .next").html(r.nextTxt).show()}else{t.one(".next-step .next").html(r.nextTxt).hide()}if(r.nextTxt=="\u901b\u901b\u60a8\u7684\u4e13\u5c5e\u7f8e\u8863"){t.one(".next-step .next").addClass("to_beauty")}else{t.one(".next-step .next").removeClass("to_beauty")}t.one(".next-step b").html(r.stepTxt)};var i=function(e){var a=[];var r=[];var i=t.all(".basebody input");for(var n=0;n<i.length;n++){var s=t.one(i[n]);var o=s.attr("data-post-key");var l=x.data.size[o];s.val(l);if(l!=""&&l!="0"){a.push(l)}else{}}if(e){if(a.length>0){e.setView({showPreBtn:true,showNextBtn:true,nextTxt:"\u4e0b\u4e00\u9879>",stepTxt:"2/7",flagleft:"359px"})}else{e.setView({showPreBtn:true,showNextBtn:true,nextTxt:"\u8df3\u8fc7",stepTxt:"2/7",flagleft:"359px"})}}return a};var s=this;this.renderation={"step-age":function(){s.setView({showPreBtn:false,showNextBtn:true,nextTxt:"\u4e0b\u4e00\u9879>",stepTxt:"1/7",flagleft:"262px"});if(!s.isViewRendered){var e=s.viewTpl.render();s.viewNode.one(".tpl").before(e);s.selectBind(".item")}if(x.data.ageArea!=""){t.all(".age .item").removeClass("selected");var a=t.one("#ageArea"+x.data.ageArea);if(a){a.addClass("selected")}}},"step-basebody":function(){if(!s.isViewRendered){var e=s.viewTpl.render();s.viewNode.one(".tpl").before(e);s.viewNode.all("input").on("change",function(e){var r=t.one(e.currentTarget);a(r)});var a=function(e){var t=e.attr("data-post-key");if(!isNaN(e.val())||e.val()==""){if(e.val()!==""&&parseInt(e.val())>300){d("\u4eb2\uff0c\u586b\u5f97\u6709\u70b9\u5938\u5f20\u4e86\u3002");e.val(x.data["size"][t])}x.data["size"][t]=e.val();i(s)}else{d("\u4eb2\uff0c\u8981\u586b\u5199\u6b63\u6574\u6570\u54af");e.val(x.data["size"][t])}};v({inputCheck:a})}i(s)},"step-bodytype":function(){s.setView({showPreBtn:true,showNextBtn:true,nextTxt:"\u4e0b\u4e00\u9879>",stepTxt:"3/7",flagleft:"359px"});if(!s.isViewRendered){var e=s.viewTpl.render(l);s.viewNode.one(".tpl").before(e);if(x.data.figure!=""){var t=s.viewNode.one(".id_"+x.data.figure);if(t){t.addClass("selected")}}}s.selectBind(".box-item")},"step-workware":function(){s.setView({showPreBtn:true,showNextBtn:true,nextTxt:"\u4e0b\u4e00\u9879>",stepTxt:"4/7",flagleft:"455px"});if(!s.isViewRendered){var e={type:"style_work",success:function(e){console.log(e);var a=function(){var t="style_work";var a=[];for(var r=0;r<x.data.prefer[t].length;r++){for(var i=0;i<e.length;i++){if(e[i].id==x.data.prefer[t][r]){a.push(x.data.prefer[t][r])}}}a=u(a);x.data.prefer[t]=a};a();var r=3;var i=5;s.checkTipMsg=function(){var e=x.data.prefer.style_work;var t=s.viewNode.one("h2 b");if(e&&e.length==0){t.html("\u81f3\u5c11\u9009"+r+"\u9879\u54e6")}if(e&&e.length>0){var a=r-e.length;if(a>0){t.html("\u8fd8\u5dee"+a+"\u9879\u54e6")}else{t.html("")}}for(var i=0;i<e.length;i++){var n=s.viewNode.one(".id_"+e[i]);if(n){n.addClass("selected")}}};var n=function(){var t=x.data.prefer.style_work;var a=t.join(",");var r=[];var n=[];for(var s=0;s<e.length;s++){a.indexOf(e[s].id)>-1?r.push(e[s]):n.push(e[s])}var o=i-r.length;if(o<=0){o=0}var l=[];var d=-1;for(var s=0;s<n.length;s++){if(l.length==o)break;var u=f(0,n.length-1);if(d!=u){l.push(n[u])}d=u}var c=[];var v=r.concat(l);for(var p=0;p<i;p++){if(v[p]){v[p].index=p;c.push(v[p])}}return c};var o=s.viewTpl.render(n());s.viewNode.one(".tpl").before(o);s.checkTipMsg();s.viewNode.one(".box-item:last-child").css({"margin-right":0});s.selectBind(".box-item",3);s.viewNode.one(".refresh").on("click",function(){var e=s.viewTpl.render(n());var a=t.one(t.all(e)[2]).one(".choose-list");s.viewNode.one(".choose-list").html(a.html());s.checkTipMsg();s.viewNode.one(".box-item:last-child").css({"margin-right":0})})},fail:function(){}};w(e)}},"step-loveware":function(){s.setView({showPreBtn:true,showNextBtn:true,nextTxt:"\u4e0b\u4e00\u9879>",stepTxt:"5/7",flagleft:"455px"});if(!s.isViewRendered){var e={type:"style_daily",success:function(e){var a=function(){var t="style_daily";var a=[];for(var r=0;r<x.data.prefer[t].length;r++){for(var i=0;i<e.length;i++){if(e[i].id==x.data.prefer[t][r]){a.push(x.data.prefer[t][r])}}}a=u(a);x.data.prefer[t]=a};a();var r=3;var i=5;s.checkTipMsg=function(){var e=x.data.prefer.style_daily;var t=s.viewNode.one("h2 b");if(e&&e.length==0){t.html("\u81f3\u5c11\u9009"+r+"\u9879\u54e6")}if(e&&e.length>0){var a=r-e.length;if(a>0){t.html("\u8fd8\u5dee"+a+"\u9879\u54e6")}else{t.html("")}}for(var i=0;i<e.length;i++){var n=s.viewNode.one(".id_"+e[i]);if(n){n.addClass("selected")}}};var n=function(){var t=x.data.prefer.style_daily;var a=t.join(",");var r=[];var n=[];for(var s=0;s<e.length;s++){a.indexOf(e[s].id)>-1?r.push(e[s]):n.push(e[s])}var o=i-r.length;if(o<=0){o=0}var l=[];var d=-1;for(var s=0;s<n.length;s++){if(l.length==o)break;var u=f(0,n.length-1);if(d!=u){l.push(n[u])}d=u}var c=[];var v=r.concat(l);for(var p=0;p<i;p++){if(v[p]){v[p].index=p;c.push(v[p])}}return c};var o=s.viewTpl.render(n());s.viewNode.one(".tpl").before(o);s.viewNode.one(".box-item:last-child").css({"margin-right":0});s.selectBind(".box-item",3);s.checkTipMsg();s.viewNode.one(".refresh").on("click",function(){var e=s.viewTpl.render(n());var a=t.one(t.all(e)[2]).one(".choose-list");s.viewNode.one(".choose-list").html(a.html());s.viewNode.one(".box-item:last-child").css({"margin-right":0});s.checkTipMsg()})},fail:function(){}};w(e)}},"step-brand":function(){s.setView({showPreBtn:true,showNextBtn:true,nextTxt:"\u4e0b\u4e00\u9879>",stepTxt:"6/7",flagleft:"455px"});if(!s.isViewRendered){var e={type:"style_brand",success:function(e){var a=function(){var t="style_brand";var a=[];for(var r=0;r<x.data.prefer[t].length;r++){for(var i=0;i<e.length;i++){if(e[i].id==x.data.prefer[t][r]){a.push(x.data.prefer[t][r])}}}a=u(a);x.data.prefer[t]=a};a();var r=5;var i=15;s.checkTipMsg=function(){var e=x.data.prefer.style_brand;var t=s.viewNode.one("h2 b");if(e&&e.length==0){t.html("\u81f3\u5c11\u9009"+r+"\u9879\u54e6")}if(e&&e.length>0){var a=r-e.length;if(a>0){t.html("\u8fd8\u5dee"+a+"\u9879\u54e6")}else{t.html("")}}for(var i=0;i<e.length;i++){var n=s.viewNode.one(".id_"+e[i]);if(n){n.addClass("selected")}}};var n=function(){var t=x.data.prefer.style_brand;var a=t.join(",");var r=[];var n=[];for(var s=0;s<e.length;s++){a.indexOf(e[s].id)>-1?r.push(e[s]):n.push(e[s])}var o=i-r.length;if(o<=0){o=0}var l=[];var d=-1;for(var s=0;s<n.length;s++){if(l.length==o)break;var u=f(0,n.length-1);if(d!=u){l.push(n[u])}d=u}var c=[];var v=r.concat(l);for(var p=0;p<i;p++){if(v[p]){v[p].index=p;c.push(v[p])}}return c};var o=s.viewTpl.render(n());s.viewNode.one(".tpl").before(o);s.checkTipMsg();s.selectBind(".box-item",5);s.viewNode.one(".refresh").on("click",function(){var e=s.viewTpl.render(n());var a=t.one(t.all(e)[2]).one(".choose-list");s.viewNode.one(".choose-list").html(a.html());s.checkTipMsg()})},fail:function(){}};w(e)}},"step-horoscope":function(){s.setView({showPreBtn:true,showNextBtn:true,nextTxt:"\u5b8c\u6210",stepTxt:"7/7",flagleft:"455px"});if(!s.isViewRendered){var e=s.viewTpl.render();s.viewNode.one(".tpl").before(e);s.selectBind(".box-item");var t=s.viewNode.one(".id_"+x.data.constellation);if(t){t.addClass("selected")}}},"step-result":function(e){s.setView({showPreBtn:true,showNextBtn:true,preTxt:"\u91cd\u65b0\u6d4b\u8bd5",nextTxt:"\u901b\u901b\u60a8\u7684\u4e13\u5c5e\u7f8e\u8863",stepTxt:"",flagleft:"564px"});var t=function(e){var t=e;var a=t.result_figure.extInfo.split(",");t.result_figure.tags=[];for(var r=0;r<l.length;r++){if(l[r].id==t.result_figure.id){t.result_figure.bodyimg=l[r].img;break}}for(var r=0;r<a.length;r++){var i=(r+1)%3==0?"<br>":'<i class="dot"></i>';t.result_figure.tags.push({name:a[r],dot:i})}a=t.result_style.extInfo.split(",");t.result_style.tags=[];for(var r=0;r<a.length;r++){var i=(r+1)%3==0?"<br>":'<i class="dot"></i>';t.result_style.tags.push({name:a[r],dot:i})}return t};if(e){var a=t(e);var r=s.viewTpl.render(a);s.viewNode.one(".step-con").html(r);return false}var i={success:function(e){var a=t(e);var r=s.viewTpl.render(a);s.viewNode.one(".step-con").html(r)},fail:function(){d("\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");T.renderPage(6);p.go(6)}};x.submit(i)}};this.Validation={"step-age":function(){var e={isValid:true,msg:""};if(x.data.ageArea==""){e.isValid=false;e.msg="\u8bf7\u9009\u62e9\u60a8\u7684\u5e74\u9f84"}return e},"step-basebody":function(){var e={isValid:true,msg:""};var t=i();if(t.length>0){if(x.data.size.sg==0||x.data.size.sg==""){e.isValid=false;e.msg="\u8bf7\u586b\u5199\u8eab\u9ad8";return e}if(x.data.size.tz==0||x.data.size.tz==""){e.isValid=false;e.msg="\u8bf7\u586b\u5199\u4f53\u91cd";return e}if(x.data.size.xw==0||x.data.size.xw==""){e.isValid=false;e.msg="\u8bf7\u586b\u5199\u80f8\u56f4";return e}if(x.data.size.yw==0||x.data.size.yw==""){e.isValid=false;e.msg="\u8bf7\u586b\u5199\u8170\u56f4";return e}if(x.data.size.tw==0||x.data.size.tw==""){e.isValid=false;e.msg="\u8bf7\u586b\u5199\u81c0\u56f4";return e}e.isValid=true;e.caculate=true}return e},"step-bodytype":function(){var e={isValid:true,msg:""};if(x.data.figure==""){e.isValid=false;e.msg="\u8bf7\u9009\u62e9\u60a8\u7684\u4f53\u578b"}return e},"step-workware":function(){var e={isValid:true,msg:""};if(x.data.prefer.style_work.length<3){e.isValid=false;e.msg="\u81f3\u5c11\u90093\u9879\u54e6"}return e},"step-loveware":function(){var e={isValid:true,msg:""};if(x.data.prefer.style_daily.length<3){e.isValid=false;e.msg="\u81f3\u5c11\u90093\u9879\u54e6"}return e},"step-brand":function(){var e={isValid:true,msg:""};if(x.data.prefer.style_brand.length<5){e.isValid=false;e.msg="\u81f3\u5c11\u90095\u9879\u54e6"}return e},"step-horoscope":function(){var e={isValid:true,msg:""};if(x.data.constellation==""){e.isValid=false;e.msg="\u8bf7\u9009\u62e9\u60a8\u7684\u661f\u5ea7"}return e},"step-result":function(){var e={isValid:true,msg:""};return e}};this.selectBind=function(e,r){a.delegate(s.viewNode,"click",e,function(a){var i=t.one(a.currentTarget);var n=i.attr("data-post-key");var o=i.attr("data-value");var l=r||1;if(i.hasClass("selected")){i.removeClass("selected");if(l==1){x.data[n]=""}else{var f=[];for(var d=0;d<x.data.prefer[n].length;d++){if(x.data.prefer[n][d]!==o){f.push(x.data.prefer[n][d])}}x.data.prefer[n]=f}if(typeof s.checkTipMsg!="undefined"){s.checkTipMsg()}return false}if(l==1){s.viewNode.all(e).removeClass("selected");x.data[n]=o}else{x.data.prefer[n].push(o)}i.addClass("selected");if(typeof s.checkTipMsg!="undefined"){s.checkTipMsg()}})};this.validate=this.Validation[this.setting.viewName]}this.pageViewNames=["step-age","step-basebody","step-bodytype","step-workware","step-loveware","step-brand","step-horoscope","step-result"];this.pageViews={};this.renderPage=function(e,t){if(this.pageViews[this.pageViewNames[e]]==null){var a=new r({viewName:this.pageViewNames[e]});this.pageViews[this.pageViewNames[e]]=a}this.pageViews[this.pageViewNames[e]].render(t)};this.validate=function(e){if(this.pageViews[e]!==null){return this.pageViews[e].validate()}}}var T=new y;var b={success:function(e){if(e.ageArea&&e.ageArea!=""){x.data.ageArea=e.ageArea;x.data.constellation=e.constellation;if(e.figure.figure){x.data.figure=e.figure.figure}x.data.hasSize=e.figure.hasSize;if(x.data.hasSize){x.data.size=e.figure.size}if(e.preferences){var t=e.preferences.style_daily;if(t){for(var a=0;a<t.length;a++){x.data.prefer.style_daily.push(t[a].id)}}t=e.preferences.style_work;if(t){for(var a=0;a<t.length;a++){x.data.prefer.style_work.push(t[a].id)}}t=e.preferences.style_brand;if(t){for(var a=0;a<t.length;a++){x.data.prefer.style_brand.push(t[a].id)}}}}if(e.testResult&&window.location.href.indexOf("result=true")>-1){T.renderPage(7,e.testResult)}else{T.renderPage(0)}},fail:function(){T.renderPage(0)}};if(typeof TB!="undefined"){TB.Global.memberInfoReady(function(e){if(e.isLogin){g(b)}else{}})}function V(t){if(t.changedTouches[0].pageY>e.one(".tb-property").offset().top){return true}}function N(t){if(t.changedTouches[0].pageY>e.one(".tb-desc-content").offset().top){return true}}function k(t){if(t.changedTouches[0].pageY>e.one(".tb-rev-content").offset().top){return true}}var X=$(".fassion-test-dialog");var B=function(){if($(".overlay-mask-layer").length>0)return false;$("body").append('<div class="overlay-mask-layer"></div>');var e=KISSY.one(window).scrollTop()+(KISSY.DOM.viewportHeight()-439)/2;X.show();X.animate({top:e},{duration:.7,easing:"swing",complete:function(){}})};var _=function(){var e=-1500;X.animate({top:e},{duration:.5,easing:"swing",complete:function(){X.removeClass("show");if($(".overlay-mask-layer").length>0)$(".overlay-mask-layer").remove()}})};var z=function(){};var C=function(e){if(e){z=e.callback}M()};var S=false;var M=function(){KISSY.use("mui/minilogin",function(e,t){t.show(function(){if(!S){g(b);S=true}B();z()},{check:true,needRedirect:false})})};$(".fassion-container i.close").on("click",function(){_();z()});window.FASSION_TEST={show:C,hide:_}})}var v=function(e){require(["dd","node","dd/plugin/constrain"],function(t,a,r){var i=a.all;var n={instance:[],inputCheck:e.inputCheck,init:function(e){var t=a.all(e);if(!t){d("\u53c2\u6570\u4f20\u5165#id\u6216.class selector ");return false}var r=this;t.each(function(e){r.instance.push(new r.DragInput(e))})},DragInput:function(e){var a=e;var i=new r({constrain:a});var s=new t.Draggable({node:a.one(".drag-handler"),move:1,plugins:[i]});var o=a.one(".drag-handler");var l=a.one(".drag-input");var f=l.val();var u=parseInt(l.attr("data-min"));var c=parseInt(l.attr("data-max"));var v=function(e){if(e){o.css({left:e+"px"});l.val(e);l.css({left:e+"px"})}else{var e=parseInt(o.css("left"));l.val(e);l.css({left:e+"px"})}f=l.val()};l.on("change",function(e){var t=l.val();if(isNaN(t)){d("\u8bf7\u8f93\u5165\u6570\u5b57")}else{var a=parseInt(t);if(u>a){d("\u8bf7\u8f93\u5165\u5927\u4e8e"+u+"\u6570\u5b57");l.val(f);return false}if(c<a){d("\u8bf7\u8f93\u5165\u5c0f\u4e8e"+c+"\u6570\u5b57");l.val(f);return false}v(a)}});s.on("dragstart",function(e){a.addClass("draging")});s.on("drag",function(e){v()});s.on("dragend",function(e){var t=parseInt(l.val());if(u>t){d("\u8bf7\u586b\u5199\u5927\u4e8e"+u+"\u6570\u5b57");v(u);return false}if(c<t){d("\u8bf7\u586b\u5199\u5c0f\u4e8e"+c+"\u6570\u5b57");v(c);return false}v();a.removeClass("draging");if(n.inputCheck){n.inputCheck(l)}});v(l.val())}};n.init(".draginput-box")})};return c},{requires:["node","event","io","anim","xtemplate","mui/popbox/toast","mui/zebra-fushi-first-screen/fassion-dialog.css"]});KISSY.add("mui/popbox/toast",function(o,e){function a(a,t){a=o.mix({showCloseBtn:false,type:"toast",autoDestroy:true,content:"",hideIcon:true},a);var i=e(a,t);var n=a.time||2;setTimeout(function(){i.hide()},n*1e3);return i}e.Toast=a;return a},{requires:["mui/popbox/index"]});KISSY.add("mui/popbox/index",function(o,a,e){a.addStyleSheet(".ui-dialog-hidden{display:none!important}.ui-dialog-wrapper{opacity:0;display:none;position:fixed;width:260px;border-radius:4px;-webkit-box-shadow:0 5px 8px rgba(0,0,0,.4);-ms-box-shadow:0 5px 8px rgba(0,0,0,.4);box-shadow:0 5px 8px rgba(0,0,0,.4);font-size:14px;padding:0 10px;background-color:rgba(0,0,0,.8);color:#EEE;word-break:break-all;word-wrap:break-word}.ui-dialog-container{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:box}.ui-dialog-container li{padding:5px}.ui-dialog-close{display:none}.ui-show-close-btn .ui-dialog-close{position:absolute;right:-10px;top:-10px;width:19px;height:19px;cursor:pointer;-webkit-border-radius:10PX;border-radius:13px;display:block;background:#000;border:2px solid #DDD;-webkit-box-shadow:-1px 5px 10px #333;-moz-box-shadow:-1px 5px 10px #333;box-shadow:-1px 5px 10px #333}.ui-show-close-btn .ui-dialog-close:after{position:absolute;font:400 13px/1 arial;content:'X';color:#ddd;top:3px;left:5px}.ui-dialog-container .ui-dialog-icon{}.ui-dialog-container .ui-dialog-icon .ui-icon-content{font:400 40px/28px mbIcon,sans-serif}.ui-dialog-container .ui-dialog-content{padding:10px;-webkit-box-flex:1;-moz-box-flex:1;-ms-flex:1;box-flex:1}.ui-dialog-container .ui-dialog-footer{text-align:center}.ui-dialog-container .ui-dialog-footer .ui-button{margin:0 10px}.ui-dialog-overlay{background-color:rgba(0,0,0,.7);height:100%;left:0;opacity:.7;position:fixed;top:0;width:100%}.ui-button-container{margin-top:10px;text-align:center}.ui-dialog-container .ui-button{-webkit-user-select:none;display:inline-block;white-space:nowrap;background-color:#ccc;background-image:-webkit-gradient(linear,left top,left bottom,from(#9C9A9A),to(#696464));background-image:-webkit-linear-gradient(top,#9C9A9A,#696464);background-image:-moz-linear-gradient(top,#9C9A9A,#696464);background-image:-ms-linear-gradient(top,#9C9A9A,#696464);background-image:linear-gradient(top,#9C9A9A,#696464);border:1px solid #777;padding:0 1.5em;font:700 1em/2em Arial,Helvetica;text-decoration:none;color:#EEE;text-shadow:0 1px 0 rgba(0,0,0,.8);border-radius:.4em;box-shadow:0 0 1px 1px rgba(126,126,126,.8) inset,0 1px 0 rgba(0,0,0,.3)}.ui-dialog-container .ui-button:hover{background-color:#eee;background-image:-webkit-gradient(linear,left top,left bottom,from(#575757),to(#6D6D6D));background-image:-webkit-linear-gradient(top,#575757,#6D6D6D);background-image:-moz-linear-gradient(top,#575757,#6D6D6D);background-image:-ms-linear-gradient(top,#575757,#6D6D6D);background-image:linear-gradient(top,#575757,#6D6D6D)}.ui-dialog-container .ui-button:active{-webkit-box-shadow:0 0 4px 2px rgba(0,0,0,.3) inset;-moz-box-shadow:0 0 4px 2px rgba(0,0,0,.3) inset;-ms-box-shadow:0 0 4px 2px rgba(0,0,0,.3) inset;box-shadow:0 0 4px 2px rgba(0,0,0,.3) inset;position:relative;top:1px}.ui-dialog-container .ui-alert-btn{margin:0 auto}.ui-dialog-container .ui-confirm-cancel{float:right}.ui-dialog-container .ui-confirm-ok{float:left}.ui-effect-zoomout-normal{-webkit-animation:m-key-zoomOut-normal 200ms ease both;-webkit-animation-play-state:paused;-moz-animation:m-key-zoomOut-normal 200ms ease both;-moz-animation-play-state:paused;-ms-animation:m-key-zoomOut-normal 200ms ease both;-ms-animation-play-state:paused;animation:m-key-zoomOut-normal 200ms ease both;animation-play-state:paused;opacity:0}@-webkit-keyframes m-key-zoomOut-normal{0%{opacity:0;-webkit-transform:scale(.6)}100%{opacity:1;-webkit-transform:scale(1)}}@-moz-keyframes m-key-zoomOut-normal{0%{opacity:0;-moz-transform:scale(.6)}100%{opacity:1;-moz-transform:scale(1)}}@-ms-keyframes m-key-zoomOut-normal{0%{opacity:0;-ms-transform:scale(.6)}100%{opacity:1;-ms-transform:scale(1)}}@keyframes m-key-zoomOut-normal{0%{opacity:0;transform:scale(.6)}100%{opacity:1;transform:scale(1)}}.ui-effect-zoomout-reverse{-webkit-animation:m-key-zoomOut-reverse 200ms ease both;-webkit-animation-play-state:paused;-moz-animation:m-key-zoomOut-reverse 200ms ease both;-moz-animation-play-state:paused;-ms-animation:m-key-zoomOut-reverse 200ms ease both;-ms-animation-play-state:paused;animation:m-key-zoomOut-reverse 200ms ease both;animation-play-state:paused;opacity:0}@-webkit-keyframes m-key-zoomOut-reverse{0%{opacity:1;-webkit-transform:scale(1)}100%{opacity:0;-webkit-transform:scale(.6)}}@-moz-keyframes m-key-zoomOut-reverse{0%{opacity:1;-moz-transform:scale(1)}100%{opacity:0;-moz-transform:scale(.6)}}@-ms-keyframes m-key-zoomOut-reverse{0%{opacity:1;-ms-transform:scale(1)}100%{opacity:0;-ms-transform:scale(.6)}}@keyframes m-key-zoomOut-reverse{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.6)}}.ui-effect-bouncein-normal{opacity:0;-webkit-animation:m-key-bounceIn-normal 400ms ease both;-moz-animation:m-key-bounceIn-normal 400ms ease both;-ms-animation:m-key-bounceIn-normal 400ms ease both;animation:m-key-bounceIn-normal 400ms ease both;-webkit-animation-play-state:paused;-moz-animation-play-state:paused;-ms-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes m-key-bounceIn-normal{0%{opacity:0;-webkit-transform:scale(.3)}50%{-webkit-transform:scale(1.05)}70%{-webkit-transform:scale(.9)}100%{opacity:1;-webkit-transform:scale(1)}}@-moz-keyframes m-key-bounceIn-normal{0%{opacity:0;-moz-transform:scale(.3)}50%{-moz-transform:scale(1.05)}70%{-moz-transform:scale(.9)}100%{opacity:1;-moz-transform:scale(1)}}@-ms-keyframes m-key-bounceIn-normal{0%{opacity:0;-ms-transform:scale(.3)}50%{-ms-transform:scale(1.05)}70%{-ms-transform:scale(.9)}100%{opacity:1;-ms-transform:scale(1)}}@keyframes m-key-bounceIn-normal{0%{opacity:0;transform:scale(.3)}50%{transform:scale(1.05)}70%{transform:scale(.9)}100%{opacity:1;transform:scale(1)}}.ui-effect-bouncein-reverse{opacity:0;-webkit-animation:m-key-bounceIn-reverse 400ms ease both;-moz-animation:m-key-bounceIn-reverse 400ms ease both;-ms-animation:m-key-bounceIn-reverse 400ms ease both;animation:m-key-bounceIn-reverse 400ms ease both;-webkit-animation-play-state:paused;-moz-animation:m-key-bounceIn-reverse 400ms ease both;-ms-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes m-key-bounceIn-reverse{100%{opacity:0;-webkit-transform:scale(.3)}50%{-webkit-transform:scale(1.05)}30%{-webkit-transform:scale(.9)}0%{opacity:1;-webkit-transform:scale(1)}}@-moz-keyframes m-key-bounceIn-reverse{100%{opacity:0;-moz-transform:scale(.3)}50%{-moz-transform:scale(1.05)}30%{-moz-transform:scale(.9)}0%{opacity:1;-moz-transform:scale(1)}}@-ms-keyframes m-key-bounceIn-reverse{100%{opacity:0;-ms-transform:scale(.3)}50%{-ms-transform:scale(1.05)}30%{-ms-transform:scale(.9)}0%{opacity:1;-ms-transform:scale(1)}}@keyframes m-key-bounceIn-reverse{100%{opacity:0;transform:scale(.3)}50%{transform:scale(1.05)}30%{transform:scale(.9)}0%{opacity:1;transform:scale(1)}}@font-face{font-family:mbIcon;src:url(//g.alicdn.com/mui/popbox/1.0.5/mbIcon.eot);src:url(//g.alicdn.com/mui/popbox/1.0.5/mbIcon.eot-iefix) format('embedded-opentype'),url(//g.alicdn.com/mui/popbox/1.0.5/mbIcon.woff) format('woff'),url(//g.alicdn.com/mui/popbox/1.0.5/mbIcon.ttf) format('truetype'),url(//g.alicdn.com/mui/popbox/1.0.5/mbIcon.svg) format('svg');font-weight:400;font-style:normal}");function t(a,e){if(!(this instanceof t)){return new t(a,e)}this.config=o.merge(t.config,a);this.animations=o.merge(t.animations,e);this._init()}t.animations={zoomOut:["ui-effect-zoomout-normal","ui-effect-zoomout-reverse",200],bounceIn:["ui-effect-bouncein-normal","ui-effect-bouncein-reverse",400]};t.config={autoCenter:true,autoDestroy:false,root:null,content:null,showCloseBtn:false,hideIcon:false,icon:"M",width:200,zIndex:99,mask:false,className:"",animation:"zoomOut"};o.augment(t,e.Target,{_init:function(){this.container=this._render();if(!this.animations[this.config.animation]){this.config.animation=null}this._bindEvents();return this},_render:function(){var o=this.config;var e=o.type||"";var t=o.className;var i=o.showCloseBtn?"ui-show-close-btn":"";var n="";n+='<div class="ui-dialog-wrapper '+i+" "+t+'">'+'<div class="ui-dialog-container">'+'<a class="ui-dialog-close" href="javascript: void(0);"></a>';if(!o.hideIcon){n+='<div class="ui-dialog-icon">'+'<div class="ui-icon-content">'+o.icon+"</div>"+"</div>"}n+='<div class="ui-dialog-content">'+o.content+"</div>";n+="</div>";var s=a.create(n);var r=o.root||a.get("body");a.append(s,r);a.css(s,{width:parseFloat(o.width)+"px","z-index":o.zIndex});var m=a.get("a.ui-dialog-close",s);a.css(m,{"z-index":o.zIndex+1});return s},_bindEvents:function(){var o=this;var t=this.config;var i=a.get("a.ui-dialog-close",this.container);e.on(i,"tap",function(){o.hide()});if(t.autoCenter){window.onresize=function(){o.center()}}},show:function(){this.fire("showDialogStart");var o=this.container;var e=this.config;this.center();if(e.animation){var t=this.animations[e.animation];i(o,t);a.addClass(o,t[0]);a.css(o,{display:"block","-webkit-animation-play-state":"running","-moz-animation-play-state":"running","-ms-animation-play-state":"running","animation-play-state":"running"});setTimeout(function(){a.css(o,{opacity:1})},t[2])}else{a.css(o,{opacity:1,display:"block"})}if(e.mask){var n=a.get(".ui-dialog-overlay");if(n){a.css(n,{display:"block","z-index":e.zIndex-1})}else{var n=a.create('<div class="ui-dialog-overlay"></div>');a.append(n,a.get("body"));a.css(n,{display:"block","z-index":e.zIndex-1})}}this.fire("showDialogEnd");return this},hide:function(){this.fire("hideDialogStart");var o=this.config;var e=this.container;var t=this;if(o.animation){var i=this.animations[o.animation];a.addClass(e,i[1]);a.css(e,{display:"block","-webkit-animation-play-state":"running","-moz-animation-play-state":"running","-ms-animation-play-state":"running","animation-play-state":"running"});setTimeout(function(){a.css(e,{opacity:0,display:"none"});if(o.autoDestroy){t.destroy()}},i[2])}else{a.css(e,{opacity:0,display:"none"});if(o.autoDestroy){t.destroy()}}var n=a.get(".ui-dialog-overlay");if(n){a.css(n,{display:"none"})}this.fire("hideDialogEnd")},destroy:function(){a.remove(this.container);this.fire("destroyDialogEnd")},center:function(){var o=parseFloat(a.css(this.container,"width"))/2+10;var e=parseFloat(a.css(this.container,"height"))/2+10;var t=a.viewportWidth()/2;var i=a.viewportHeight()/2;if(i<e){i=0;e=0}a.css(this.container,{left:t+"px",top:i+"px","margin-top":-1*e+"px","margin-left":-1*o+"px"});this.fire("setCenterEnd")}});function i(o,e){a.removeClass(o,e[0]);a.removeClass(o,e[1]);a.css(o,{display:"",opacity:""})}return t},{requires:["dom","event"]});