KISSY.add("node/base",["dom","event/dom"],function(e,t){var n=t("dom");var r=t("event/dom");var i=Array.prototype,o=i.slice,a=n.NodeType,s=i.push,u=e.makeArray,l=n.isDomNodeList;function c(t,r,i){var o=this,f;if(!(o instanceof c)){return new c(t,r,i)}if(!t){return o}else{if(typeof t==="string"){f=n.create(t,r,i);if(f.nodeType===a.DOCUMENT_FRAGMENT_NODE){s.apply(this,u(f.childNodes));return o}}else{if(e.isArray(t)||l(t)){s.apply(o,u(t));return o}else{f=t}}}o[0]=f;o.length=1;return o}c.prototype={constructor:c,isNodeList:true,length:0,item:function(e){var t=this;if(typeof e==="number"){if(e>=t.length){return null}else{return new c(t[e])}}else{return new c(e)}},add:function(e,t,n){if(typeof t==="number"){n=t;t=undefined}var r=c.all(e,t).getDOMNodes(),o=new c(this);if(n===undefined){s.apply(o,r)}else{var a=[n,0];a.push.apply(a,r);i.splice.apply(o,a)}return o},slice:function(){return new c(o.apply(this,arguments))},getDOMNodes:function(){return o.call(this)},each:function(t,n){var r=this;e.each(r,function(e,i){e=new c(e);return t.call(n||e,e,i,r)});return r},getDOMNode:function(){return this[0]},end:function(){var e=this;return e.__parent||e},filter:function(e){return new c(n.filter(this,e))},all:function(e){var t,n=this;if(n.length>0){t=c.all(e,n)}else{t=new c}t.__parent=n;return t},one:function(e){var t=this,n=t.all(e),r=n.length?n.slice(0,1):null;if(r){r.__parent=t}return r}};e.mix(c,{all:function(t,r){if(typeof t==="string"&&(t=e.trim(t))&&t.length>=3&&e.startsWith(t,"<")&&e.endsWith(t,">")){if(r){if(r.getDOMNode){r=r[0]}r=r.ownerDocument||r}return new c(t,undefined,r)}return new c(n.query(t,r))},one:function(e,t){var n=c.all(e,t);return n.length?n.slice(0,1):null}});c.NodeType=a;c.KeyCode=r.KeyCode;c.Gesture=r.Gesture;c.REPLACE_HISTORY=r.REPLACE_HISTORY;return c});KISSY.add("node/attach",["dom","event/dom","./base"],function(e,t){var n=t("dom");var r=t("event/dom");var i=t("./base");var o=i.prototype,a=e.makeArray,s=["nodeName","isCustomDomain","getEmptyIframeSrc","equals","contains","index","scrollTop","scrollLeft","height","width","innerHeight","innerWidth","outerHeight","outerWidth","addStyleSheet","appendTo","prependTo","insertBefore","before","after","insertAfter","test","hasClass","addClass","removeClass","replaceClass","toggleClass","removeAttr","hasAttr","hasProp","scrollIntoView","remove","empty","removeData","hasData","unselectable","wrap","wrapAll","replaceWith","wrapInner","unwrap"],u=["getWindow","getDocument","filter","first","last","parent","closest","next","prev","clone","siblings","contents","children"],l={attr:1,text:0,css:1,style:1,val:0,prop:1,offset:0,html:0,outerHTML:0,outerHtml:0,data:1},c=["on","detach","delegate","undelegate"],f=["fire","fireHandler"];i.KeyCode=r.KeyCode;function d(e,t,r){r.unshift(t);var i=n[e].apply(n,r);if(i===undefined){return t}return i}function p(e,t,r){r.unshift(t);var o=n[e].apply(n,r);if(o===undefined){return t}else{if(o===null){return null}}return new i(o)}function h(t,r,i,o){if(o[i]===undefined&&!e.isObject(o[0])){o.unshift(r);return n[t].apply(n,o)}return d(t,r,o)}e.each(s,function(e){o[e]=function(){var t=a(arguments);return d(e,this,t)}});e.each(u,function(e){o[e]=function(){var t=a(arguments);return p(e,this,t)}});e.each(l,function(e,t){o[t]=function(){var n=a(arguments);return h(t,this,e,n)}});e.each(c,function(e){o[e]=function(){var t=this,n=a(arguments);n.unshift(t);r[e].apply(r,n);return t}});e.each(f,function(e){o[e]=function(){var t=this,n=a(arguments);n.unshift(t);return r[e].apply(r,n)}})});KISSY.add("node/override",["dom","./base","./attach"],function(e,t){var n=t("dom");var r=t("./base");t("./attach");var i=r.prototype;e.each(["append","prepend","before","after"],function(e){i[e]=function(t){var r=t,i=this;if(typeof r!=="object"){r=n.create(r+"")}if(r){n[e](r,i)}return i}});e.each(["wrap","wrapAll","replaceWith","wrapInner"],function(e){var t=i[e];i[e]=function(e){var n=this;if(typeof e==="string"){e=r.all(e,n[0].ownerDocument)}return t.call(n,e)}})});KISSY.add("node/anim",["./base","dom","anim"],function(e,t){var n=t("./base");var r=t("dom");var i=t("anim");var o=[["height","margin-top","margin-bottom","padding-top","padding-bottom"],["width","margin-left","margin-right","padding-left","padding-right"],["opacity"]];function a(e,t,n){var r=[],i={};for(var a=n||0;a<t;a++){r.push.apply(r,o[a])}for(a=0;a<r.length;a++){i[r[a]]=e}return i}e.augment(n,{animate:function(){var t=this,n=e.makeArray(arguments);e.each(t,function(t){var r=e.clone(n),o=r[0];if(o.to){o.node=t;new i(o).run()}else{i.apply(undefined,[t].concat(r)).run()}});return t},stop:function(t,n,r){var o=this;e.each(o,function(e){i.stop(e,t,n,r)});return o},pause:function(t,n){var r=this;e.each(r,function(e){i.pause(e,n)});return r},resume:function(t,n){var r=this;e.each(r,function(e){i.resume(e,n)});return r},isRunning:function(){var e=this;for(var t=0;t<e.length;t++){if(i.isRunning(e[t])){return true}}return false},isPaused:function(){var e=this;for(var t=0;t<e.length;t++){if(i.isPaused(e[t])){return true}}return false}});e.each({show:a("show",3),hide:a("hide",3),toggle:a("toggle",3),fadeIn:a("show",3,2),fadeOut:a("hide",3,2),fadeToggle:a("toggle",3,2),slideDown:a("show",1),slideUp:a("hide",1),slideToggle:a("toggle",1)},function(t,o){n.prototype[o]=function(n,a,s){var u=this;if(r[o]&&!n){r[o](u)}else{e.each(u,function(e){new i(e,t,n,s,a).run()})}return u}})});KISSY.add("node",["node/base","node/attach","node/override","node/anim"],function(e,t){var n=t("node/base");t("node/attach");t("node/override");t("node/anim");e.mix(e,{Node:n,NodeList:n,one:n.one,all:n.all});return n});KISSY.add("dom/base/api",[],function(e){var t=e.Env.host||{},n=t.document,r=e.UA,i=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,a={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},o={isCustomDomain:function(e){e=e||t;e=o.get(e);var n=e.document.domain,r=e.location.hostname;return n!==r&&n!=="["+r+"]"},getEmptyIframeSrc:function(e){e=e||t;e=o.get(e);if(r.ie&&o.isCustomDomain(e)){return"javascript:void(function(){"+encodeURIComponent("document.open();"+'document.domain="'+e.document.domain+'";'+"document.close();")+"}())"}return""},NodeType:a,getWindow:function(n){if(!n){return t}n=o.get(n);if(e.isWindow(n)){return n}var r=n;if(r.nodeType!==a.DOCUMENT_NODE){r=n.ownerDocument}return r.defaultView||r.parentWindow},getDocument:function(t){if(!t){return n}t=o.get(t);return e.isWindow(t)?t.document:t.nodeType===a.DOCUMENT_NODE?t:t.ownerDocument},isDomNodeList:function(e){return e&&!e.nodeType&&e.item&&!e.setTimeout},nodeName:function(e){var t=o.get(e),n=t.nodeName.toLowerCase();if(r.ie){var i=t.scopeName;if(i&&i!=="HTML"){n=i.toLowerCase()+":"+n}}return n},_RE_NUM_NO_PX:new RegExp("^("+i+")(?!px)[a-z%]+$","i")};e.mix(o,a);return o});KISSY.add("dom/base/attr",["./api"],function(e,t){var n=t("./api");var r=e.Env.host.document,i=n.NodeType,a=r&&r.documentElement,o="",s=n.nodeName,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,l=/^(?:button|input|object|select|textarea)$/i,c=/^a(?:rea)?$/i,f=/:|^on/,d=/\r/g,h={},p={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1,scrollTop:1,scrollLeft:1},v={tabindex:{get:function(e){var t=e.getAttributeNode("tabindex");return t&&t.specified?parseInt(t.value,10):l.test(e.nodeName)||c.test(e.nodeName)&&e.href?0:undefined}}},m={hidefocus:"hideFocus",tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},g={get:function(e,t){return n.prop(e,t)?t.toLowerCase():undefined},set:function(e,t,r){var i;if(t===false){n.removeAttr(e,r)}else{i=m[r]||r;if(i in e){e[i]=true}e.setAttribute(r,r.toLowerCase())}return r}},b={},y={},T={select:{get:function(e){var t=e.selectedIndex,r=e.options,i,a,o,s=String(e.type)==="select-one";if(t<0){return null}else{if(s){return n.val(r[t])}}i=[];a=0;o=r.length;for(;a<o;++a){if(r[a].selected){i.push(n.val(r[a]))}}return i},set:function(t,r){var i=e.makeArray(r),a=t.options;e.each(a,function(t){t.selected=e.inArray(n.val(t),i)});if(!i.length){t.selectedIndex=-1}return i}}};e.each(["radio","checkbox"],function(t){T[t]={get:function(e){return e.getAttribute("value")===null?"on":e.value},set:function(t,r){if(e.isArray(r)){t.checked=e.inArray(n.val(t),r);return 1}return undefined}}});v.style={get:function(e){return e.style.cssText}};function S(e){return e==null?"":e+""}function C(e,t){t=m[t]||t;var n=b[t];if(n&&n.get){return n.get(e,t)}else{return e[t]}}e.mix(n,{_valHooks:T,_propFix:m,_attrHooks:v,_propHooks:b,_attrNodeHook:y,_attrFix:h,prop:function(t,r,i){var a=n.query(t),o,s,u;if(e.isPlainObject(r)){e.each(r,function(e,t){n.prop(a,t,e)});return undefined}r=m[r]||r;u=b[r];if(i!==undefined){for(o=a.length-1;o>=0;o--){s=a[o];if(u&&u.set){u.set(s,i,r)}else{s[r]=i}}}else{if(a.length){return C(a[0],r)}}return undefined},hasProp:function(e,t){var r=n.query(e),i,a=r.length,o;for(i=0;i<a;i++){o=r[i];if(C(o,t)!==undefined){return true}}return false},removeProp:function(e,t){t=m[t]||t;var r=n.query(e),i,a;for(i=r.length-1;i>=0;i--){a=r[i];try{a[t]=undefined;delete a[t]}catch(o){}}},attr:function(t,r,a,l){var c=n.query(t),d,m,b=c[0],T;if(e.isPlainObject(r)){l=a;for(var S in r){n.attr(c,S,r[S],l)}return undefined}if(l&&p[r]){return n[r](t,a)}r=r.toLowerCase();if(l&&p[r]){return n[r](t,a)}r=h[r]||r;if(u.test(r)){d=g}else{if(f.test(r)){d=y}else{d=v[r]}}if(a===undefined){if(b&&b.nodeType===i.ELEMENT_NODE){if(s(b)==="form"){d=y}if(d&&d.get){return d.get(b,r)}T=b.getAttribute(r);if(T===""){var C=b.getAttributeNode(r);if(!C||!C.specified){return undefined}}return T===null?undefined:T}}else{for(m=c.length-1;m>=0;m--){b=c[m];if(b&&b.nodeType===i.ELEMENT_NODE){if(s(b)==="form"){d=y}if(d&&d.set){d.set(b,a,r)}else{b.setAttribute(r,o+a)}}}}return undefined},removeAttr:function(e,t){t=t.toLowerCase();t=h[t]||t;var r=n.query(e),a,o,s;for(s=r.length-1;s>=0;s--){o=r[s];if(o.nodeType===i.ELEMENT_NODE){o.removeAttribute(t);if(u.test(t)&&(a=m[t]||t)in o){o[a]=false}}}},hasAttr:a&&!a.hasAttribute?function(e,t){t=t.toLowerCase();var r=n.query(e),i,a,o;for(i=0;i<r.length;i++){a=r[i];o=a.getAttributeNode(t);if(o&&o.specified){return true}}return false}:function(e,t){var r=n.query(e),i,a=r.length;for(i=0;i<a;i++){if(r[i].hasAttribute(t)){return true}}return false},val:function(t,r){var i,a,o,u,l,c;if(r===undefined){o=n.get(t);if(o){i=T[s(o)]||T[o.type];if(i&&"get"in i&&(a=i.get(o,"value"))!==undefined){return a}a=o.value;return typeof a==="string"?a.replace(d,""):a==null?"":a}return undefined}u=n.query(t);for(l=u.length-1;l>=0;l--){o=u[l];if(o.nodeType!==1){return undefined}c=r;if(c==null){c=""}else{if(typeof c==="number"){c+=""}else{if(e.isArray(c)){c=e.map(c,S)}}}i=T[s(o)]||T[o.type];if(!i||!("set"in i)||i.set(o,c,"value")===undefined){o.value=c}}return undefined},text:function(e,t){var r,a,o,s;if(t===undefined){r=n.get(e);return n._getText(r)}else{a=n.query(e);for(o=a.length-1;o>=0;o--){r=a[o];s=r.nodeType;if(s===i.ELEMENT_NODE){n.cleanData(r.getElementsByTagName("*"));if("textContent"in r){r.textContent=t}else{r.innerText=t}}else{if(s===i.TEXT_NODE||s===i.CDATA_SECTION_NODE){r.nodeValue=t}}}}return undefined},_getText:function(e){return e.textContent}});return n});KISSY.add("dom/base/class",["./api"],function(e,t){var n=t("./api");var r=[].slice,i=n.NodeType,a=/[\.\s]\s*\.?/;function o(t){t=e.trim(t||"");var n=t.split(a),r=[],i,o=n.length,s=0;for(;s<o;s++){if(i=n[s]){r.push(i)}}return r}function s(e){return function(t,n){var i,a,o,s=t.classList,u=r.call(arguments,2);for(i=0,a=n.length;i<a;i++){if(o=n[i]){s[e].apply(s,[o].concat(u))}}}}function u(e){return function(t,a){var s=o(a),u=r.call(arguments,2);n.query(t).each(function(t){if(t.nodeType===i.ELEMENT_NODE){n[e].apply(n,[t,s].concat(u))}})}}e.mix(n,{_hasClass:function(e,t){var n,r,i,a=e.classList;if(a.length){for(n=0,r=t.length;n<r;n++){i=t[n];if(i&&!a.contains(i)){return false}}return true}return false},_addClass:s("add"),_removeClass:s("remove"),_toggleClass:s("toggle"),hasClass:function(e,t){var r=false;t=o(t);n.query(e).each(function(e){if(e.nodeType===i.ELEMENT_NODE&&n._hasClass(e,t)){r=true;return false}return undefined});return r},replaceClass:function(e,t,r){n.removeClass(e,t);n.addClass(e,r)},addClass:u("_addClass"),removeClass:u("_removeClass"),toggleClass:u("_toggleClass")});return n});KISSY.add("dom/base/create",["./api"],function(e,t){var n=t("./api");var r=e.getLogger("s/dom");var i=e.Env.host.document,a=n.NodeType,o=e.UA,s=o.ieMode,u="div",l="parentNode",c=i&&i.createElement(u),f=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,d=/<([\w:]+)/,h=/^\s+/,p=/\s+$/,v=!!(s&&s<9),m=v,g=/<|&#?\w+;/,b=i&&"outerHTML"in i.documentElement,y=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;function T(e,t){return e.getElementsByTagName(t)}function S(e){var t=e&&e!==i?e.createElement(u):c;if(t===c){t.innerHTML=""}return t}function C(e,t){var n=S(t);n.innerHTML="m<div>"+e+"<"+"/div>";return n.lastChild}function x(e){try{e.innerHTML="";return}catch(t){}for(var n;n=e.lastChild;){E(n,e)}}function E(e,t){if(t){if(v&&t.canHaveChildren&&"removeNode"in e){if(e.firstChild){x(e)}e.removeNode(false)}else{t.removeChild(e)}}}e.mix(n,{create:function(t,r,a,o){var s=null;if(!t){return s}if(t.nodeType){return n.clone(t)}if(typeof t!=="string"){return s}if(o===undefined){o=true}if(o){t=e.trim(t)}var c=n._creators,v,b,T=a||i,S,x=u,E,_;if(!g.test(t)){s=T.createTextNode(t)}else{if(S=y.exec(t)){s=T.createElement(S[1])}else{t=t.replace(f,"<$1><"+"/$2>");if((S=d.exec(t))&&(E=S[1])){x=E.toLowerCase()}v=(c[x]||C)(t,T);if(m&&(b=t.match(h))){v.insertBefore(T.createTextNode(b[0]),v.firstChild)}if(m&&/\S/.test(t)&&(b=t.match(p))){v.appendChild(T.createTextNode(b[0]))}_=v.childNodes;if(_.length===1){s=_[0][l].removeChild(_[0])}else{if(_.length){s=I(_)}else{e.error(t+" : create node error")}}}}return k(s,r)},_fixCloneAttributes:function(e,t){if(n.nodeName(e)==="textarea"){t.defaultValue=e.defaultValue;t.value=e.value}},_creators:{div:C},_defaultCreator:C,html:function(e,t,r){var i=n.query(e),o=i[0],s=false,u,l,c;if(!o){return null}if(t===undefined){if(o.nodeType===a.ELEMENT_NODE){return o.innerHTML}else{if(o.nodeType===a.DOCUMENT_FRAGMENT_NODE){var f=S(o.ownerDocument);f.appendChild(o);return f.innerHTML}else{return null}}}else{t+="";if(!t.match(/<(?:script|style|link)/i)&&(!m||!t.match(h))&&!D[(t.match(d)||["",""])[1].toLowerCase()]){try{for(l=i.length-1;l>=0;l--){c=i[l];if(c.nodeType===a.ELEMENT_NODE){n.cleanData(T(c,"*"));c.innerHTML=t}}s=true}catch(p){}}if(!s){u=n.create(t,0,o.ownerDocument,0);n.empty(i);n.append(u,i,r)}}return undefined},outerHtml:function(e,t,r){var i=n.query(e),o,s,u,l=i.length,c=i[0];if(!c){return null}if(t===undefined){if(b&&c.nodeType!==n.DOCUMENT_FRAGMENT_NODE){return c.outerHTML}else{o=S(c.ownerDocument);o.appendChild(n.clone(c,true));return o.innerHTML}}else{t+="";if(!t.match(/<(?:script|style|link)/i)&&b){for(s=l-1;s>=0;s--){c=i[s];if(c.nodeType===a.ELEMENT_NODE){n.cleanData(c,1);c.outerHTML=t}}}else{u=n.create(t,0,c.ownerDocument,0);n.insertBefore(u,i,r);n.remove(i)}}return undefined},remove:function(t,r){var i,o=n.query(t),s,u=e.Env.mods["event/dom/base"],l;u=u&&u.exports;for(l=o.length-1;l>=0;l--){i=o[l];if(!r&&i.nodeType===a.ELEMENT_NODE){s=e.makeArray(T(i,"*"));s.push(i);n.removeData(s);if(u&&u.detach){u.detach(s)}}E(i,i.parentNode)}},clone:function(e,t,r,i){if(typeof t==="object"){i=t.deepWithDataAndEvent;r=t.withDataAndEvent;t=t.deep}var o=n.get(e),s,u=n._fixCloneAttributes,l;if(!o){return null}l=o.nodeType;s=o.cloneNode(t);if(l===a.ELEMENT_NODE||l===a.DOCUMENT_FRAGMENT_NODE){if(u&&l===a.ELEMENT_NODE){u(o,s)}if(t&&u){_(u,o,s)}}if(r){N(o,s);if(t&&i){_(N,o,s)}}return s},empty:function(e){var t=n.query(e),r,i;for(i=t.length-1;i>=0;i--){r=t[i];n.remove(r.childNodes)}},_nodeListToFragment:I});n.outerHTML=n.outerHtml;function _(e,t,n){var r=t.nodeType;if(r===a.DOCUMENT_FRAGMENT_NODE){var i=t.childNodes,o=n.childNodes,s=0;while(i[s]){if(o[s]){_(e,i[s],o[s])}s++}}else{if(r===a.ELEMENT_NODE){var u=T(t,"*"),l=T(n,"*"),c=0;while(u[c]){if(l[c]){e(u[c],l[c])}c++}}}}function N(t,r){var i=e.Env.mods["event/dom/base"],o,s;i=i&&i.exports;if(r.nodeType===a.ELEMENT_NODE&&!n.hasData(t)){return}o=n.data(t);for(s in o){n.data(r,s,o[s])}if(i&&i.clone){i.clone(t,r)}}function k(t,r){if(e.isPlainObject(r)){if(t.nodeType===a.ELEMENT_NODE){n.attr(t,r,true)}else{if(t.nodeType===a.DOCUMENT_FRAGMENT_NODE){n.attr(t.childNodes,r,true)}}}return t}function I(t){var n=null,i,a,o;if(t&&(t.push||t.item)&&t[0]){a=t[0].ownerDocument;n=a.createDocumentFragment();t=e.makeArray(t);for(i=0,o=t.length;i<o;i++){n.appendChild(t[i])}}else{r.error("Unable to convert "+t+" to fragment.")}return n}var w=n._creators,O=n.create,D={area:"map",thead:"table",td:"tr",th:"tr",tr:"tbody",tbody:"table",tfoot:"table",caption:"table",colgroup:"table",col:"colgroup",legend:"fieldset"},A;for(A in D){(function(e){w[A]=function(t,n){return O("<"+e+">"+t+"<"+"/"+e+">",undefined,n)}})(D[A])}w.option=w.optgroup=function(e,t){return O('<select multiple="multiple">'+e+"</select>",undefined,t)};D.option=D.optgroup=1;return n});KISSY.add("dom/base/data",["./api"],function(e,t){var n=t("./api");var r=e.Env.host,i="_ks_data_"+e.now(),a={},o={},s={applet:1,object:1,embed:1};var u={hasData:function(t,n){if(t){if(n!==undefined){if(n in t){return true}}else{if(!e.isEmptyObject(t)){return true}}}return false}};var l={hasData:function(e,t){if(e==r){return l.hasData(o,t)}var n=e[i];return u.hasData(n,t)},data:function(e,t,n){if(e==r){return l.data(o,t,n)}var a=e[i];if(n!==undefined){a=e[i]=e[i]||{};a[t]=n}else{if(t!==undefined){return a&&a[t]}else{a=e[i]=e[i]||{};return a}}},removeData:function(t,n){if(t==r){return l.removeData(o,n)}var a=t[i];if(n!==undefined){delete a[n];if(e.isEmptyObject(a)){l.removeData(t)}}else{try{delete t[i]}catch(s){t[i]=undefined}}}};var c={hasData:function(e,t){var n=e[i];if(!n){return false}var r=a[n];return u.hasData(r,t)},data:function(t,n,r){if(s[t.nodeName.toLowerCase()]){return undefined}var o=t[i],u;if(!o){if(n!==undefined&&r===undefined){return undefined}o=t[i]=e.guid()}u=a[o];if(r!==undefined){u=a[o]=a[o]||{};u[n]=r}else{if(n!==undefined){return u&&u[n]}else{u=a[o]=a[o]||{};return u}}},removeData:function(t,n){var r=t[i],o;if(!r){return}o=a[r];if(n!==undefined){delete o[n];if(e.isEmptyObject(o)){c.removeData(t)}}else{delete a[r];try{delete t[i]}catch(s){t[i]=undefined}if(t.removeAttribute){t.removeAttribute(i)}}}};e.mix(n,{__EXPANDO:i,hasData:function(e,t){var r=false,i=n.query(e);for(var a=0;a<i.length;a++){var o=i[a];if(o.nodeType){r=c.hasData(o,t)}else{r=l.hasData(o,t)}if(r){return r}}return r},data:function(t,r,i){var a=n.query(t),o=a[0];if(e.isPlainObject(r)){for(var s in r){n.data(a,s,r[s])}return undefined}if(i===undefined){if(o){if(o.nodeType){return c.data(o,r)}else{return l.data(o,r)}}}else{for(var u=a.length-1;u>=0;u--){o=a[u];if(o.nodeType){c.data(o,r,i)}else{l.data(o,r,i)}}}return undefined},removeData:function(e,t){var r=n.query(e),i,a;for(a=r.length-1;a>=0;a--){i=r[a];if(i.nodeType){c.removeData(i,t)}else{l.removeData(i,t)}}},cleanData:function(t,r){var i=n.query(t),a,o;var s=e.Env.mods["event/dom/base"];s=s&&s.exports;for(o=i.length-1;o>=0;o--){a=i[o];if(a.nodeType){var u=r&&e.makeArray(a.getElementsByTagName("*"))||[];u.push(a);for(var f=0,d=u.length;f<d;f++){c.removeData(u[f])}if(s&&s.detach){s.detach(u)}}else{l.removeData(a)}}}});return n});KISSY.add("dom/base/insertion",["./api"],function(e,t){var n=t("./api");var r="parentNode",i=n.NodeType,a=/^(?:button|input|object|select|textarea)$/i,o=n.nodeName,s=e.makeArray,u=[].splice,l="nextSibling",c=/\/(java|ecma)script/i;function f(e){return!e.type||c.test(e.type)}function d(e,t){var n=[],r,l,c;for(r=0;e[r];r++){l=e[r];c=o(l);if(l.nodeType===i.DOCUMENT_FRAGMENT_NODE){n.push.apply(n,d(s(l.childNodes),t))}else{if(c==="script"&&f(l)){if(l.parentNode){l.parentNode.removeChild(l)}if(t){t.push(l)}}else{if(l.nodeType===i.ELEMENT_NODE&&!a.test(c)){var h=[],p,v,m=l.getElementsByTagName("script");for(v=0;v<m.length;v++){p=m[v];if(f(p)){h.push(p)}}u.apply(e,[r+1,0].concat(h))}n.push(l)}}}return n}function h(t){if(t.src){e.getScript(t.src)}else{var n=e.trim(t.text||t.textContent||t.innerHTML||"");if(n){e.globalEval(n)}}}function p(t,r,i,a){t=n.query(t);if(a){a=[]}t=d(t,a);if(n._fixInsertionChecked){n._fixInsertionChecked(t)}r=n.query(r);var o=t.length,s,u,l,c,f,p=r.length;if(!o&&(!a||!a.length)||!p){return}s=n._nodeListToFragment(t);if(p>1){f=n.clone(s,true);r=e.makeArray(r)}for(u=0;u<p;u++){l=r[u];if(s){c=u>0?n.clone(f,true):s;i(c,l)}if(a&&a.length){e.each(a,h)}}}e.mix(n,{_fixInsertionChecked:null,insertBefore:function(e,t,n){p(e,t,function(e,t){if(t[r]){t[r].insertBefore(e,t)}},n)},insertAfter:function(e,t,n){p(e,t,function(e,t){if(t[r]){t[r].insertBefore(e,t[l])}},n)},appendTo:function(e,t,n){p(e,t,function(e,t){t.appendChild(e)},n)},prependTo:function(e,t,n){p(e,t,function(e,t){t.insertBefore(e,t.firstChild)},n)},wrapAll:function(e,t){t=n.clone(n.get(t),true);e=n.query(e);if(e[0].parentNode){n.insertBefore(t,e[0])}var r;while((r=t.firstChild)&&r.nodeType===1){t=r}n.appendTo(e,t)},wrap:function(t,r){t=n.query(t);r=n.get(r);e.each(t,function(e){n.wrapAll(e,r)})},wrapInner:function(t,r){t=n.query(t);r=n.get(r);e.each(t,function(e){var t=e.childNodes;if(t.length){n.wrapAll(t,r)}else{e.appendChild(r)}})},unwrap:function(t){t=n.query(t);e.each(t,function(e){var t=e.parentNode;n.replaceWith(t,t.childNodes)})},replaceWith:function(e,t){var r=n.query(e);t=n.query(t);n.remove(t,true);n.insertBefore(t,r);n.remove(r)}});e.each({prepend:"prependTo",append:"appendTo",before:"insertBefore",after:"insertAfter"},function(e,t){n[t]=n[e]});return n});KISSY.add("dom/base/offset",["./api"],function(e,t){var n=t("./api");var r=e.Env.host,i=e.UA,a=r.document,o=n.NodeType,s=a&&a.documentElement,u=n.getWindow,l="CSS1Compat",c="compatMode",f=Math.max,d="position",h="relative",p="document",v="body",m="documentElement",g="viewport",b="scroll",y="client",T="left",S="top",C=b+"Left",x=b+"Top";e.mix(n,{offset:function(e,t,r){var i;if(t===undefined){i=n.get(e);var a;if(i){a=N(i,r)}return a}var o=n.query(e),s;for(s=o.length-1;s>=0;s--){i=o[s];k(i,t)}return undefined},scrollIntoView:function(t,r,i,a){var s,l;if(!(s=n.get(t))){return}if(r){r=n.get(r)}if(!r){r=s.ownerDocument}if(r.nodeType===o.DOCUMENT_NODE){r=u(r)}if(e.isPlainObject(i)){a=i.allowHorizontalScroll;l=i.onlyScrollIfNeeded;i=i.alignWithTop}a=a===undefined?true:a;var c=e.isWindow(r),f=n.offset(s),d=n.outerHeight(s),h=n.outerWidth(s),p,v,m,g,b,y,C,x,E,_;if(c){C=r;_=n.height(C);E=n.width(C);x={left:n.scrollLeft(C),top:n.scrollTop(C)};b={left:f[T]-x[T],top:f[S]-x[S]};y={left:f[T]+h-(x[T]+E),top:f[S]+d-(x[S]+_)};g=x}else{p=n.offset(r);v=r.clientHeight;m=r.clientWidth;g={left:n.scrollLeft(r),top:n.scrollTop(r)};b={left:f[T]-(p[T]+(parseFloat(n.css(r,"borderLeftWidth"))||0)),top:f[S]-(p[S]+(parseFloat(n.css(r,"borderTopWidth"))||0))};y={left:f[T]+h-(p[T]+m+(parseFloat(n.css(r,"borderRightWidth"))||0)),top:f[S]+d-(p[S]+v+(parseFloat(n.css(r,"borderBottomWidth"))||0))}}if(l){if(b.top<0||y.top>0){if(i===true){n.scrollTop(r,g.top+b.top)}else{if(i===false){n.scrollTop(r,g.top+y.top)}else{if(b.top<0){n.scrollTop(r,g.top+b.top)}else{n.scrollTop(r,g.top+y.top)}}}}}else{i=i===undefined?true:!!i;if(i){n.scrollTop(r,g.top+b.top)}else{n.scrollTop(r,g.top+y.top)}}if(a){if(l){if(b.left<0||y.left>0){if(i===true){n.scrollLeft(r,g.left+b.left)}else{if(i===false){n.scrollLeft(r,g.left+y.left)}else{if(b.left<0){n.scrollLeft(r,g.left+b.left)}else{n.scrollLeft(r,g.left+y.left)}}}}}else{i=i===undefined?true:!!i;if(i){n.scrollLeft(r,g.left+b.left)}else{n.scrollLeft(r,g.left+y.left)}}}},docWidth:0,docHeight:0,viewportHeight:0,viewportWidth:0,scrollTop:0,scrollLeft:0});e.each(["Left","Top"],function(e,t){var i=b+e;n[i]=function(a,s){if(typeof a==="number"){return arguments.callee(r,a)}a=n.get(a);var l,c,f,d,h;if(a&&a.nodeType===o.ELEMENT_NODE){if(s!==undefined){a[i]=parseFloat(s)}else{l=a[i]}}else{d=u(a);if(s!==undefined){s=parseFloat(s);c=e==="Left"?s:n.scrollLeft(d);f=e==="Top"?s:n.scrollTop(d);d.scrollTo(c,f)}else{l=d["page"+(t?"Y":"X")+"Offset"];if(typeof l!=="number"){h=d[p];l=h[m][i];if(typeof l!=="number"){l=h[v][i]}}}}return l}});e.each(["Width","Height"],function(e){n["doc"+e]=function(t){t=n.get(t);var r=n.getDocument(t);return f(r[m][b+e],r[v][b+e],n[g+e](r))};n[g+e]=function(t){t=n.get(t);var r=u(t);var a=r["inner"+e];if(i.mobile&&a){return a}var o=y+e,s=r[p],f=s[v],d=s[m],h=d[o];return s[c]===l&&h||f&&f[o]||h}});function E(e){var t,n,r,i=e.ownerDocument,a=i.body;if(!e.getBoundingClientRect){return{left:0,top:0}}t=e.getBoundingClientRect();n=t[T];r=t[S];n-=s.clientLeft||a.clientLeft||0;r-=s.clientTop||a.clientTop||0;return{left:n,top:r}}function _(e){var t=E(e),r=u(e);t.left+=n[C](r);t.top+=n[x](r);return t}function N(e,t){var n={left:0,top:0},r=u(e),i,a=e;t=t||r;do{i=r==t?_(a):E(a);n.left+=i.left;n.top+=i.top}while(r&&r!=t&&(a=r.frameElement)&&(r=r.parent));return n}function k(e,t){if(n.css(e,d)==="static"){e.style[d]=h}var r=N(e),i={},a,o;for(o in t){a=parseFloat(n.css(e,o))||0;i[o]=a+t[o]-r[o]}n.css(e,i)}return n});KISSY.add("dom/base/style",["./api","ua"],function(e,t){var n=/-([a-z])/gi;function r(){return arguments[1].toUpperCase()}function i(e){return e.replace(n,r)}function a(e){if(e.indexOf("-")!==-1){e=e.replace(n,r)}if(e in c){return c[e]}if(!v||e in v){c[e]={propertyName:e,propertyNamePrefix:""}}else{var t=e.charAt(0).toUpperCase()+e.slice(1),i;for(var a=0;a<d;a++){var o=f[a];i=o+t;if(i in v){c[e]={propertyName:i,propertyNamePrefix:o}}}c[e]=c[e]||null}return c[e]}var o=e;var s=e.getLogger("s/dom");var u=t("./api");var l=e.Env.host,c={},f=["Webkit","Moz","O","ms"],d=f.length,h=l.document||{},p=h&&h.documentElement,v=p.style,m=t("ua"),g=["margin","border","padding"],b=-1,y=2,T=1,S=0,C=u.nodeName,x=/^margin/,E="width",_="height",N="display",k=N+o.now(),I="none",w={fillOpacity:1,fontWeight:1,lineHeight:1,opacity:1,orphans:1,widows:1,zIndex:1,zoom:1},O="",D="px",A=/\d(?!px)[a-z%]+$/i,M={},R={},L={},B=a("userSelect"),P=B&&B.propertyName;R["float"]="cssFloat";function Y(e){if(R[e]){return R[e]}var t=a(e);return t&&t.propertyName||e}function q(e){var t,n=L[e],r;if(!L[e]){t=h.body||h.documentElement;r=h.createElement(e);u.prepend(r,t);n=u.css(r,"display");t.removeChild(r);L[e]=n}return n}o.mix(u,{_cssHooks:M,_cssProps:R,_getComputedStyle:function(e,t,n){var r="",i,a,o,s,l=e.ownerDocument;t=Y(t);if(n=n||l.defaultView.getComputedStyle(e,null)){r=n.getPropertyValue(t)||n[t]}if(r===""&&!u.contains(l,e)){r=e.style[t]}if(u._RE_NUM_NO_PX.test(r)&&x.test(t)){s=e.style;i=s.width;a=s.minWidth;o=s.maxWidth;s.minWidth=s.maxWidth=s.width=r;r=n.width;s.width=i;s.minWidth=a;s.maxWidth=o}return r},style:function(e,t,n){var r=u.query(e),i,a,s=r[0],l;if(o.isPlainObject(t)){for(i in t){for(l=r.length-1;l>=0;l--){H(r[l],i,t[i])}}return undefined}if(n===undefined){a="";if(s){a=H(s,t,n)}return a}else{for(l=r.length-1;l>=0;l--){H(r[l],t,n)}}return undefined},css:function(e,t,n){var r=u.query(e),a=r[0],s,l,c,f;if(o.isPlainObject(t)){for(s in t){for(f=r.length-1;f>=0;f--){H(r[f],s,t[s])}}return undefined}t=i(t);l=M[t];if(n===undefined){c="";if(a){if(!(l&&"get"in l&&(c=l.get(a,true))!==undefined)){c=u._getComputedStyle(a,t)}}return typeof c==="undefined"?"":c}else{for(f=r.length-1;f>=0;f--){H(r[f],t,n)}}return undefined},show:function(e){var t=u.query(e),n,r,i,a;for(a=t.length-1;a>=0;a--){i=t[a];i.style[N]=u.data(i,k)||O;if(u.css(i,N)===I){n=i.tagName.toLowerCase();r=q(n);u.data(i,k,r);i.style[N]=r}}},hide:function(e){var t=u.query(e),n,r;for(r=t.length-1;r>=0;r--){n=t[r];var i=n.style,a=i[N];if(a!==I){if(a){u.data(n,k,a)}i[N]=I}}},toggle:function(e){var t=u.query(e),n,r;for(r=t.length-1;r>=0;r--){n=t[r];if(u.css(n,N)===I){u.show(n)}else{u.hide(n)}}},addStyleSheet:function(e,t,n){if(typeof e==="string"){n=t;t=e;e=l}var r=u.getDocument(e),i;if(n&&(n=n.replace("#",O))){i=u.get("#"+n,r)}if(i){return}i=u.create("<style>",{id:n},r);u.get("head",r).appendChild(i);if(i.styleSheet){i.styleSheet.cssText=t}else{i.appendChild(r.createTextNode(t))}},unselectable:!P?function(e){var t=u.query(e),n,r,i,a=0,s,l,c;for(r=t.length-1;r>=0;r--){n=t[r];l=n.style;c=n.getElementsByTagName("*");n.setAttribute("unselectable","on");s=["iframe","textarea","input","select"];while(i=c[a++]){if(!o.inArray(C(i),s)){i.setAttribute("unselectable","on")}}}}:function(e){var t=u.query(e);for(var n=t.length-1;n>=0;n--){t[n].style[P]="none"}},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,width:0,height:0});o.each([E,_],function(e){u["inner"+o.ucfirst(e)]=function(t){var n=u.get(t);return n&&U(n,e,y)};u["outer"+o.ucfirst(e)]=function(t,n){var r=u.get(t);return r&&U(r,e,n?S:T)};var t=e===E?["Left","Right"]:["Top","Bottom"];u[e]=function(n,r){var i=u.get(n);if(r!==undefined){if(i){var a=$(i);var o=W(i,a);if(o){r+=j(i,["padding","border"],t,a)}return u.css(i,e,r)}return undefined}return i&&U(i,e,b)};M[e]={get:function(t,n){var r;if(n){r=U(t,e)+"px"}return r}}});var F={position:"absolute",visibility:"hidden",display:"block"};o.each(["left","top"],function(e){M[e]={get:function(t,n){var r,i,a;if(n){a=u.css(t,"position");if(a==="static"){return"auto"}r=u._getComputedStyle(t,e);i=r==="auto";if(i&&a==="relative"){return"0px"}if(i||A.test(r)){r=V(t)[e]+"px"}}return r}}});function K(e,t,n){var r={},i=e.style,a;for(a in t){r[a]=i[a];i[a]=t[a]}n.call(e);for(a in t){i[a]=r[a]}}function H(e,t,n){var r,a,o;if(e.nodeType===3||e.nodeType===8||!(r=e.style)){return undefined}t=i(t);o=M[t];t=Y(t);if(n!==undefined){if(n===null||n===O){n=O}else{if(!isNaN(Number(n))&&!w[t]){n+=D}}if(o&&o.set){n=o.set(e,n)}if(n!==undefined){try{r[t]=n}catch(u){s.warn("css set error:"+u)}if(n===O&&r.removeAttribute){r.removeAttribute(t)}}if(!r.cssText){if(m.webkit){r=e.outerHTML}e.removeAttribute("style")}return undefined}else{if(!(o&&"get"in o&&(a=o.get(e,false))!==undefined)){a=r[t]}return a===undefined?"":a}}function U(e){var t,n=arguments;if(e.offsetWidth!==0){t=X.apply(undefined,n)}else{K(e,F,function(){t=X.apply(undefined,n)})}return t}function j(e,t,n,r){var i=0,a,o,s;for(o=0;o<t.length;o++){a=t[o];if(a){for(s=0;s<n.length;s++){var l;if(a==="border"){l=a+n[s]+"Width"}else{l=a+n[s]}i+=parseFloat(u._getComputedStyle(e,l,r))||0}}}return i}function W(e,t){return u._getComputedStyle(e,"boxSizing",t)==="border-box"}function $(e){var t=e.ownerDocument,n;if(t.defaultView){n=t.defaultView.getComputedStyle(e,null)}return n}function X(e,t,n){if(o.isWindow(e)){return t===E?u.viewportWidth(e):u.viewportHeight(e)}else{if(e.nodeType===9){return t===E?u.docWidth(e):u.docHeight(e)}}var r=t===E?["Left","Right"]:["Top","Bottom"],i=t===E?e.offsetWidth:e.offsetHeight;var a=$(e);var s=W(e,a);var l=0;if(i==null||i<=0){i=undefined;l=u._getComputedStyle(e,t,a);if(l==null||Number(l)<0){l=e.style[t]||0}l=parseFloat(l)||0}if(n===undefined){n=s?T:b}var c=i!==undefined||s;var f=i||l;if(n===b){if(c){return f-j(e,["border","padding"],r,a)}else{return l}}else{if(c){return f+(n===T?0:n===y?-j(e,["border"],r,a):j(e,["margin"],r,a))}else{return l+j(e,g.slice(n),r,a)}}}var z=/^(?:body|html)$/i;function V(e){var t,n,r={top:0,left:0};if(u.css(e,"position")==="fixed"){n=e.getBoundingClientRect()}else{t=G(e);n=u.offset(e);r=u.offset(t);r.top+=parseFloat(u.css(t,"borderTopWidth"))||0;r.left+=parseFloat(u.css(t,"borderLeftWidth"))||0}n.top-=parseFloat(u.css(e,"marginTop"))||0;n.left-=parseFloat(u.css(e,"marginLeft"))||0;return{top:n.top-r.top,left:n.left-r.left}}function G(e){var t=e.offsetParent||(e.ownerDocument||h).body;while(t&&!z.test(t.nodeName)&&u.css(t,"position")==="static"){t=t.offsetParent}return t}return u});KISSY.add("dom/base/selector",["./api"],function(e,t){var n=t("./api");var r=e.Env.host.document,i=r.documentElement,a=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector||i.msMatchesSelector,o="getElementsByClassName"in r,s,u=e.isArray,l=e.makeArray,c=n.isDomNodeList,f=" ",d=Array.prototype.push,h=/^\.([\w-]+)$/,p=/^#([\w-]+)$/,v=/^([\w-])+$/,m=/^([\w-]+)#([\w-]+)$/,g=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/,b=e.trim;if(!o){s=function(e,t){var n=[],r=e.getElementsByTagName("*"),i,a;t=" "+t+" ";for(i=0;i<r.length;i++){a=r[i];if((" "+(a.className||a.getAttribute("class"))+" ").indexOf(t)>-1){n.push(a)}}return n}}else{s=function(e,t){return e.getElementsByClassName(t)}}function y(e){var t=this,n=t.length,r;for(r=0;r<n;r++){if(e(t[r],r)===false){break}}}function T(e){var t=e.substr(1);if(!t){throw new Error("An invalid or illegal string was specified for selector.")}return t}function S(e){var t=e.charAt(0);if(t==="#"){return C(T(e))}else{if(t==="."){return x(T(e))}else{return E(e)}}}function C(e){return function(t){var i=n._getElementById(e,r);return i&&n._contains(t,i)?[i]:[]}}function x(e){return function(t){return s(t,e)}}function E(e){return function(t){return t.getElementsByTagName(e)}}function _(e){var t=/,|\+|=|~|\[|\]|:|>|\||\$|\^|\*|\(|\)|[\w-]+\.[\w-]+|[\w-]+#[\w-]+/;return!e.match(t)}function N(t,i){var a,o,f,g,T=typeof t==="string",C=i!==undefined?N(i):(g=1)&&[r],x=C.length;if(!t){a=[]}else{if(T){t=b(t);if(g){if(t==="body"){a=[r.body]}else{if(h.test(t)){a=l(s(r,RegExp.$1))}else{if(m.test(t)){f=n._getElementById(RegExp.$2,r);a=f&&f.nodeName.toLowerCase()===RegExp.$1?[f]:[]}else{if(p.test(t)){f=n._getElementById(t.substr(1),r);a=f?[f]:[]}else{if(v.test(t)){a=l(r.getElementsByTagName(t))}else{if(_(t)){var E=t.split(/\s+/),k,I=C,w,O;for(o=0,k=E.length;o<k;o++){E[o]=S(E[o])}for(o=0,k=E.length;o<k;o++){var D=E[o],A=[],M;for(w=0,O=I.length;w<O;w++){M=D(I[w]);A.push.apply(A,l(M))}I=A;if(!I.length){break}}a=I&&I.length>1?n.unique(I):I}}}}}}}if(!a){a=[];for(o=0;o<x;o++){d.apply(a,n._selectInternal(t,C[o]))}if(a.length>1&&x>1){n.unique(a)}}}else{if(t.nodeType||e.isWindow(t)){a=[t]}else{if(t.getDOMNodes){a=t.getDOMNodes()}else{if(u(t)){a=t}else{if(c(t)){a=l(t)}else{a=[t]}}}}if(!g){var R=a,L,B=R.length;a=[];for(o=0;o<B;o++){for(L=0;L<x;L++){if(n._contains(C[L],R[o])){a.push(R[o]);break}}}}}}a.each=y;return a}function k(e,t){var n=e&&I(e,"class");return n&&(n=n.replace(/[\r\t\n]/g,f))&&(f+n+f).indexOf(f+t+f)>-1}function I(e,t){var n=e&&e.getAttributeNode(t);if(n&&n.specified){return n.nodeValue}return undefined}function w(e,t){return t==="*"||e.nodeName.toLowerCase()===t.toLowerCase()}e.mix(n,{_compareNodeOrder:function(e,t){if(!e.compareDocumentPosition||!t.compareDocumentPosition){return e.compareDocumentPosition?-1:1}var n=e.compareDocumentPosition(t)&4;return n?-1:1},_getElementsByTagName:function(e,t){return l(t.querySelectorAll(e))},_getElementById:function(e,t){return t.getElementById(e)},_getSimpleAttr:I,_isTag:w,_hasSingleClass:k,_matchesInternal:function(e,t){var n=[],r=0,i,o=t.length;for(;r<o;r++){i=t[r];if(a.call(i,e)){n.push(i)}}return n},_selectInternal:function(e,t){return l(t.querySelectorAll(e))},query:N,get:function(e,t){return N(e,t)[0]||null},unique:function(){var e,t=true;[0,0].sort(function(){t=false;return 0});function r(t,r){if(t===r){e=true;return 0}return n._compareNodeOrder(t,r)}return function(n){e=t;n.sort(r);if(e){var i=1,a=n.length;while(i<a){if(n[i]===n[i-1]){n.splice(i,1);--a}else{i++}}}return n}}(),filter:function(t,r,i){var a=N(t,i),o,s,u,l,c=[];if(typeof r==="string"&&(r=b(r))&&(u=g.exec(r))){o=u[1];s=u[2];l=u[3];if(!o){r=function(e){var t=true,n=true;if(s){t=w(e,s)}if(l){n=k(e,l)}return n&&t}}else{if(o&&!s&&!l){r=function(e){return I(e,"id")===o}}}}if(typeof r==="function"){c=e.filter(a,r)}else{c=n._matchesInternal(r,a)}return c},test:function(e,t,r){var i=N(e,r);return i.length&&n.filter(i,t,r).length===i.length}});return n});KISSY.add("dom/base/traversal",["./api"],function(e,t){var n=t("./api");var r=n.NodeType,i=16;e.mix(n,{_contains:function(e,t){return!!(e.compareDocumentPosition(t)&i)},closest:function(e,t,n,i){return a(e,t,"parentNode",function(e){return e.nodeType!==r.DOCUMENT_FRAGMENT_NODE},n,true,i)},parent:function(e,t,n){return a(e,t,"parentNode",function(e){return e.nodeType!==r.DOCUMENT_FRAGMENT_NODE},n,undefined)},first:function(e,t,r){var i=n.get(e);return a(i&&i.firstChild,t,"nextSibling",undefined,undefined,true,r)},last:function(e,t,r){var i=n.get(e);return a(i&&i.lastChild,t,"previousSibling",undefined,undefined,true,r)},next:function(e,t,n){return a(e,t,"nextSibling",undefined,undefined,undefined,n)},prev:function(e,t,n){return a(e,t,"previousSibling",undefined,undefined,undefined,n)},siblings:function(e,t,n){return s(e,t,true,n)},children:function(e,t){return s(e,t,undefined)},contents:function(e,t){return s(e,t,undefined,1)},contains:function(e,t){e=n.get(e);t=n.get(t);if(e&&t){return n._contains(e,t)}return false},index:function(t,i){var a=n.query(t),o,s=0,u,l,c=a[0];if(!i){u=c&&c.parentNode;if(!u){return-1}o=c;while(o=o.previousSibling){if(o.nodeType===r.ELEMENT_NODE){s++}}return s}l=n.query(i);if(typeof i==="string"){return e.indexOf(c,l)}return e.indexOf(l[0],a)},equals:function(e,t){e=n.query(e);t=n.query(t);if(e.length!==t.length){return false}for(var r=e.length;r>=0;r--){if(e[r]!==t[r]){return false}}return true}});function a(t,i,a,s,u,l,c){if(!(t=n.get(t))){return null}if(i===0){return t}if(!l){t=t[a]}if(!t){return null}u=u&&n.get(u)||null;if(i===undefined){i=1}var f=[],d=e.isArray(i),h,p;if(typeof i==="number"){h=0;p=i;i=function(){return++h===p;
}}while(t&&t!==u){if((t.nodeType===r.ELEMENT_NODE||t.nodeType===r.TEXT_NODE&&c)&&o(t,i)&&(!s||s(t))){f.push(t);if(!d){break}}t=t[a]}return d?f:f[0]||null}function o(t,r){if(!r){return true}if(e.isArray(r)){var i,a=r.length;if(!a){return true}for(i=0;i<a;i++){if(n.test(t,r[i])){return true}}}else{if(n.test(t,r)){return true}}return false}function s(t,i,a,o){var s=[],u,l,c,f=n.get(t),d=f;if(f&&a){d=f.parentNode}if(d){u=e.makeArray(d.childNodes);for(l=0;l<u.length;l++){c=u[l];if(!o&&c.nodeType!==r.ELEMENT_NODE){continue}if(c===f){continue}s.push(c)}if(i){s=n.filter(s,i)}}return s}return n});KISSY.add("dom/base",["./base/api","./base/attr","./base/class","./base/create","./base/data","./base/insertion","./base/offset","./base/style","./base/selector","./base/traversal"],function(e,t){var n=t("./base/api");t("./base/attr");t("./base/class");t("./base/create");t("./base/data");t("./base/insertion");t("./base/offset");t("./base/style");t("./base/selector");t("./base/traversal");e.mix(e,{DOM:n,get:n.get,query:n.query});return n});KISSY.add("event/dom/base/utils",["dom"],function(e,t){var n=t("dom");var r="ksEventTargetId_"+e.now(),i=e.Env.host.document,a=i&&i.addEventListener?function(e,t,n,r){if(e.addEventListener){e.addEventListener(t,n,!!r)}}:function(e,t,n){if(e.attachEvent){e.attachEvent("on"+t,n)}},o=i&&i.removeEventListener?function(e,t,n,r){if(e.removeEventListener){e.removeEventListener(t,n,!!r)}}:function(e,t,n){if(e.detachEvent){e.detachEvent("on"+t,n)}};return{simpleAdd:a,simpleRemove:o,data:function(e,t){return n.data(e,r,t)},removeData:function(e){return n.removeData(e,r)}}});KISSY.add("event/dom/base/special",[],function(){return{}});KISSY.add("event/dom/base/observer",["event/base","./special"],function(e,t){var n=t("event/base");var r=t("./special");function i(e){i.superclass.constructor.call(this,e)}e.extend(i,n.Observer,{keys:["fn","filter","data","context","originalType","groups","last"],notifyInternal:function(e,t){var n=this,i,a,o,s=e.type,u;if(u=n.originalType){e.type=u}else{u=s}if((i=r[u])&&i.handle){a=i.handle(e,n,t);if(a&&a.length>0){o=a[0]}}else{o=n.simpleNotify(e,t)}if(o===false){e.halt()}e.type=s;return o}});return i});KISSY.add("event/dom/base/object",["event/base"],function(e,t){var n=t("event/base");var r=e.Env.host.document,i=true,a=false,o=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"],s=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){if(e.which==null){e.which=t.charCode!=null?t.charCode:t.keyCode}if(e.metaKey===undefined){e.metaKey=e.ctrlKey}}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n,r,i,a=t.wheelDelta,o=t.axis,s=t.wheelDeltaY,u=t.wheelDeltaX,l=t.detail;if(a){i=a/120}if(l){i=-(l%3===0?l/3:l)}if(o!==undefined){if(o===e.HORIZONTAL_AXIS){r=0;n=-1*i}else{if(o===e.VERTICAL_AXIS){n=0;r=i}}}if(s!==undefined){r=s/120}if(u!==undefined){n=-1*u/120}if(!n&&!r){r=i}if(n!==undefined){e.deltaX=n}if(r!==undefined){e.deltaY=r}if(i!==undefined){e.delta=i}}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n,i,a,o=e.target,s=t.button;if(e.pageX==null&&t.clientX!=null){n=o.ownerDocument||r;i=n.documentElement;a=n.body;e.pageX=t.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0);e.pageY=t.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)}if(!e.which&&s!==undefined){e.which=s&1?1:s&2?3:s&4?2:0}if(!e.relatedTarget&&e.fromElement){e.relatedTarget=e.fromElement===o?e.toElement:e.fromElement}return e}}];function u(){return i}function l(){return a}function f(t){var n=this,i=t.type;f.superclass.constructor.call(n);n.originalEvent=t;var c=l;if("defaultPrevented"in t){c=t.defaultPrevented?u:l}else{if("getPreventDefault"in t){c=t.getPreventDefault()?u:l}else{if("returnValue"in t){c=t.returnValue===a?u:l}}}n.isDefaultPrevented=c;var d=[],p,h,v,m=o.concat();e.each(s,function(e){if(i.match(e.reg)){m=m.concat(e.props);if(e.fix){d.push(e.fix)}}return undefined});h=m.length;while(h){v=m[--h];n[v]=t[v]}if(!n.target){n.target=t.srcElement||r}if(n.target.nodeType===3){n.target=n.target.parentNode}h=d.length;while(h){p=d[--h];p(n,t)}}e.extend(f,n.Object,{constructor:f,preventDefault:function(){var e=this,t=e.originalEvent;if(t.preventDefault){t.preventDefault()}else{t.returnValue=a}f.superclass.preventDefault.call(e)},stopPropagation:function(){var e=this,t=e.originalEvent;if(t.stopPropagation){t.stopPropagation()}else{t.cancelBubble=i}f.superclass.stopPropagation.call(e)}});return f});KISSY.add("event/dom/base/observable",["event/base","dom","./special","./utils","./observer","./object"],function(e,t){var n=t("event/base");var r=t("dom");var i=t("./special");var a=t("./utils");var o=t("./observer");var s=t("./object");var u=n.Utils;var l=e.getLogger("s/event");function f(t){var n=this;e.mix(n,t);n.reset()}e.extend(f,n.Observable,{setup:function(){var e=this,t=e.type,n=i[t]||{},r=e.currentTarget,o=a.data(r),s=o.handle;if(!n.setup||n.setup.call(r,t)===false){a.simpleAdd(r,t,s)}},constructor:f,reset:function(){var e=this;f.superclass.reset.call(e);e.delegateCount=0;e.lastCount=0},notify:function(e){var t=e.target,n=e.type,i=this,a=i.currentTarget,o=i.observers,s,u=[],l,f,c,d,p,h=i.delegateCount||0,v,m,g,b;if(h&&t.nodeType){while(t!==a){if(t.disabled!==true||n!=="click"){var y={},S,x,T;m=[];for(d=0;d<h;d++){b=o[d];T=b.filter;x=T+"";S=y[x];if(S===undefined){S=y[x]=r.test(t,T)}if(S){m.push(b)}}if(m.length){u.push({currentTarget:t,currentTargetObservers:m})}}t=t.parentNode||a}}if(h<o.length){u.push({currentTarget:a,currentTargetObservers:o.slice(h)})}for(d=0,v=u.length;!e.isPropagationStopped()&&d<v;++d){c=u[d];m=c.currentTargetObservers;s=c.currentTarget;e.currentTarget=s;for(p=0;!e.isImmediatePropagationStopped()&&p<m.length;p++){g=m[p];l=g.notify(e,i);if(f!==false&&l!==undefined){f=l}}}return f},fire:function(t,n){t=t||{};var a=this,o=String(a.type),u,c,d=i[o]||{},p=d.bubbles!==false,h=a.currentTarget;if(d.fire&&d.fire.call(h,n)===false){return}if(!(t instanceof s)){c=t;t=new s({currentTarget:h,type:o,target:h});e.mix(t,c)}if(d.preFire&&d.preFire.call(h,t,n)===false){return}var v=h,m=r.getWindow(v),g=m.document,b=[],y,S,x="on"+o,T=0;do{b.push(v);v=v.parentNode||v.ownerDocument||v===g&&m}while(!n&&v&&p);v=b[T];do{t.currentTarget=v;u=f.getDomEventObservable(v,o);if(u){S=u.notify(t);if(S!==undefined&&y!==false){y=S}}if(v[x]&&v[x].call(v)===false){t.preventDefault()}v=b[++T]}while(!n&&v&&!t.isPropagationStopped());if(!n&&!t.isDefaultPrevented()){try{if(h[o]&&!e.isWindow(h)){f.triggeredEvent=o;h[o]()}}catch(C){l.debug("trigger action error: "+C)}f.triggeredEvent=""}return y},on:function(t){var n=this,r=n.observers,a=i[n.type]||{},s=t instanceof o?t:new o(t);if(e.Config.debug){if(!s.fn){e.error("lack event handler for "+n.type)}}if(n.findObserver(s)===-1){if(s.filter){r.splice(n.delegateCount,0,s);n.delegateCount++}else{if(s.last){r.push(s);n.lastCount++}else{r.splice(r.length-n.lastCount,0,s)}}if(a.add){a.add.call(n.currentTarget,s)}}},detach:function(e){var t,n=this,r=i[n.type]||{},a="filter"in e,o=e.filter,s=e.context,l=e.fn,f=n.currentTarget,c=n.observers,d=e.groups;if(!c.length){return}if(d){t=u.getGroupsRe(d)}var p,h,v,m,g,b=c.length;if(l||a||t){s=s||f;for(p=0,h=0,v=[];p<b;++p){m=c[p];g=m.context||f;if(s!==g||l&&l!==m.fn||a&&(o&&o!==m.filter||!o&&!m.filter)||t&&!m.groups.match(t)){v[h++]=m}else{if(m.filter&&n.delegateCount){n.delegateCount--}if(m.last&&n.lastCount){n.lastCount--}if(r.remove){r.remove.call(f,m)}}}n.observers=v}else{n.reset()}n.checkMemory()},checkMemory:function(){var t=this,n=t.type,r,o,s=i[n]||{},u=t.currentTarget,l=a.data(u);if(l){r=l.observables;if(!t.hasObserver()){o=l.handle;if(!s.tearDown||s.tearDown.call(u,n)===false){a.simpleRemove(u,n,o)}delete r[n]}if(e.isEmptyObject(r)){l.handle=null;a.removeData(u)}}}});f.triggeredEvent="";f.getDomEventObservable=function(e,t){var n=a.data(e),r;if(n){r=n.observables}if(r){return r[t]}return null};f.getDomEventObservablesHolder=function(e,t){var n=a.data(e);if(!n&&t){a.data(e,n={})}return n};return f});KISSY.add("event/dom/base/dom-event",["event/base","./utils","dom","./special","./observable","./object"],function(e,t){var n=t("event/base");var r=t("./utils");var i=t("dom");var a=t("./special");var o=t("./observable");var s=t("./object");var u=n.Utils;function l(e,t){var n=a[t]||{},r;if(!e.originalType&&(r=n.typeFix)){e.originalType=t;t=r}return t}function f(t,n,r){var i,a,u,f;r=e.merge(r);n=l(r,n);i=o.getDomEventObservablesHolder(t,1);if(!(f=i.handle)){f=i.handle=function(e){var t=e.type,n,r=f.currentTarget;if(o.triggeredEvent===t||typeof KISSY==="undefined"){return undefined}n=o.getDomEventObservable(r,t);if(n){e.currentTarget=r;e=new s(e);return n.notify(e)}return undefined};f.currentTarget=t}if(!(u=i.observables)){u=i.observables={}}a=u[n];if(!a){a=u[n]=new o({type:n,currentTarget:t});a.setup()}a.on(r);t=null}function c(t,n,r){r=e.merge(r);var i;n=l(r,n);var a=o.getDomEventObservablesHolder(t),s=(a||{}).observables;if(!a||!s){return}if(!n){for(n in s){s[n].detach(r)}return}i=s[n];if(i){i.detach(r)}}var d={on:function(e,t,n,r){e=i.query(e);u.batchForType(function(e,t,n,r){var i=u.normalizeParam(t,n,r),a,o;t=i.type;for(a=e.length-1;a>=0;a--){o=e[a];f(o,t,i)}},1,e,t,n,r);return e},detach:function(e,t,n,r){e=i.query(e);u.batchForType(function(e,t,n,r){var i=u.normalizeParam(t,n,r),a,o,s,l;t=i.type;for(a=e.length-1;a>=0;a--){l=e[a];c(l,t,i);if(i.deep&&l.getElementsByTagName){s=l.getElementsByTagName("*");for(o=s.length-1;o>=0;o--){c(s[o],t,i)}}}},1,e,t,n,r);return e},delegate:function(e,t,n,r,i){return d.on(e,t,{fn:r,context:i,filter:n})},undelegate:function(e,t,n,r,i){return d.detach(e,t,{fn:r,context:i,filter:n})},fire:function(e,t,n,r){var s;n=n||{};n.synthetic=1;u.splitAndRun(t,function(t){var l,f,c,d;u.fillGroupsForEvent(t,n);t=n.type;var p=a[t];var h=t;if(p&&p.typeFix){h=p.typeFix}e=i.query(e);for(f=e.length-1;f>=0;f--){c=e[f];d=o.getDomEventObservable(c,h);if(!r&&!d){d=new o({type:h,currentTarget:c})}if(d){l=d.fire(n,r);if(s!==false&&l!==undefined){s=l}}}});return s},fireHandler:function(e,t,n){return d.fire(e,t,n,1)},clone:function(t,n){var i,a;if(!(i=o.getDomEventObservablesHolder(t))){return}var s=r.data(t);if(s&&s===r.data(n)){r.removeData(n)}a=i.observables;e.each(a,function(t,r){e.each(t.observers,function(e){f(n,r,e)})})}};return d});KISSY.add("event/dom/base/key-codes",[],function(e){var t=e.UA,n={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229};n.isTextModifyingKeyEvent=function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=n.F1&&t<=n.F12){return false}switch(t){case n.ALT:;case n.CAPS_LOCK:;case n.CONTEXT_MENU:;case n.CTRL:;case n.DOWN:;case n.END:;case n.ESC:;case n.HOME:;case n.INSERT:;case n.LEFT:;case n.MAC_FF_META:;case n.META:;case n.NUMLOCK:;case n.NUM_CENTER:;case n.PAGE_DOWN:;case n.PAGE_UP:;case n.PAUSE:;case n.PRINT_SCREEN:;case n.RIGHT:;case n.SHIFT:;case n.UP:;case n.WIN_KEY:;case n.WIN_KEY_RIGHT:return false;default:return true}};n.isCharacterKey=function(e){if(e>=n.ZERO&&e<=n.NINE){return true}if(e>=n.NUM_ZERO&&e<=n.NUM_MULTIPLY){return true}if(e>=n.A&&e<=n.Z){return true}if(t.webkit&&e===0){return true}switch(e){case n.SPACE:;case n.QUESTION_MARK:;case n.NUM_PLUS:;case n.NUM_MINUS:;case n.NUM_PERIOD:;case n.NUM_DIVISION:;case n.SEMICOLON:;case n.DASH:;case n.EQUALS:;case n.COMMA:;case n.PERIOD:;case n.SLASH:;case n.APOSTROPHE:;case n.SINGLE_QUOTE:;case n.OPEN_SQUARE_BRACKET:;case n.BACKSLASH:;case n.CLOSE_SQUARE_BRACKET:return true;default:return false}};return n});KISSY.add("event/dom/base/gesture",[],function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",singleTap:"click",doubleTap:"dblclick"}});KISSY.add("event/dom/base/special-events",["./dom-event","./special"],function(e,t){var n=t("./dom-event");var r=t("./special");var i=e.UA,a=i.gecko?"DOMMouseScroll":"mousewheel";return e.mix(r,{mousewheel:{typeFix:a},load:{bubbles:false},click:{fire:function(e){var t=this;if(!e&&String(t.type)==="checkbox"&&t.click&&t.nodeName.toLowerCase()==="input"){t.click();return false}return undefined}},focus:{bubbles:false,preFire:function(e,t){if(!t){return n.fire(this,"focusin")}},fire:function(e){var t=this;if(!e&&t.ownerDocument){if(t!==t.ownerDocument.activeElement&&t.focus){t.focus();return false}}return undefined}},blur:{bubbles:false,preFire:function(e,t){if(!t){return n.fire(this,"focusout")}},fire:function(e){var t=this;if(!e&&t.ownerDocument){if(t===t.ownerDocument.activeElement&&t.blur){t.blur();return false}}return undefined}}})});KISSY.add("event/dom/base/mouseenter",["dom","./special"],function(e,t){var n=t("dom");var r=t("./special");e.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(e){r[e.name]={typeFix:e.fix,handle:function(e,t,r){var i=e.currentTarget,a=e.relatedTarget;if(!a||a!==i&&!n.contains(i,a)){return[t.simpleNotify(e,r)]}}}})});KISSY.add("event/dom/base/valuechange",["dom","./dom-event","./special"],function(e,t){var n=t("dom");var r=t("./dom-event");var i=t("./special");var a="valuechange",o=n.nodeName,s="event/valuechange",u=s+"/history",l=s+"/poll",f=50;function c(e){if(n.hasData(e,l)){var t=n.data(e,l);clearTimeout(t);n.removeData(e,l)}}function d(e){n.removeData(e,u);c(e)}function p(e){c(e.target)}function h(e){var t=e.value,i=n.data(e,u);if(t!==i){r.fireHandler(e,a,{prevVal:i,newVal:t});n.data(e,u,t)}}function v(e){if(n.hasData(e,l)){return}n.data(e,l,setTimeout(function t(){h(e);n.data(e,l,setTimeout(t,f))},f))}function m(e){var t=e.target;if(e.type==="focus"){n.data(t,u,t.value)}v(t)}function g(e){h(e.target)}function b(e){y(e);r.on(e,"blur",p);r.on(e,"webkitspeechchange",g);r.on(e,"mousedown keyup keydown focus",m)}function y(e){d(e);r.detach(e,"blur",p);r.detach(e,"webkitspeechchange",g);r.detach(e,"mousedown keyup keydown focus",m)}i[a]={setup:function(){var e=this,t=o(e);if(t==="input"||t==="textarea"){b(e)}},tearDown:function(){var e=this;y(e)}};return r});KISSY.add("event/dom/base",["./base/dom-event","./base/object","./base/key-codes","./base/gesture","./base/special-events","./base/mouseenter","./base/valuechange"],function(e,t){var n=t("./base/dom-event");var r=t("./base/object");var i=t("./base/key-codes");var a=t("./base/gesture");var o=t("./base/special-events");t("./base/mouseenter");t("./base/valuechange");return e.merge({add:n.on,remove:n.detach,KeyCode:i,Gesture:a,Special:o,Object:r},n)});KISSY.add("event/base/utils",[],function(e){var t,n;function r(e){if(e.indexOf(".")<0){return[e,""]}var t=e.match(/([^.]+)?(\..+)?$/),n=t[1],r=[n],i=t[2];if(i){i=i.split(".").sort();r.push(i.join("."))}else{r.push("")}return r}return{splitAndRun:t=function(t,n){if(e.isArray(t)){e.each(t,n);return}t=e.trim(t);if(t.indexOf(" ")===-1){n(t)}else{e.each(t.split(/\s+/),n)}},normalizeParam:function(t,n,i){var a=n||{};if(typeof n==="function"){a={fn:n,context:i}}else{a=e.merge(a)}var o=r(t);t=o[0];a.groups=o[1];a.type=t;return a},batchForType:function(n,r){var i=e.makeArray(arguments),a=i[2+r];if(a&&typeof a==="object"){e.each(a,function(e,t){var a=[].concat(i);a.splice(0,2);a[r]=t;a[r+1]=e;n.apply(null,a)})}else{t(a,function(e){var t=[].concat(i);t.splice(0,2);t[r]=e;n.apply(null,t)})}},fillGroupsForEvent:function(e,t){var i=r(e),a=i[1];if(a){a=n(a);t._ksGroups=a}t.type=i[0]},getGroupsRe:n=function(e){return new RegExp(e.split(".").join(".*\\.")+"(?:\\.|$)")}}});KISSY.add("event/base/object",[],function(e){var t=function(){return false},n=function(){return true};function r(){var t=this;t.timeStamp=e.now();t.target=undefined;t.currentTarget=undefined}r.prototype={constructor:r,isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t,preventDefault:function(){this.isDefaultPrevented=n},stopPropagation:function(){this.isPropagationStopped=n},stopImmediatePropagation:function(){var e=this;e.isImmediatePropagationStopped=n;e.stopPropagation()},halt:function(e){var t=this;if(e){t.stopImmediatePropagation()}else{t.stopPropagation()}t.preventDefault()}};return r});KISSY.add("event/base/observer",[],function(e){function t(t){e.mix(this,t)}t.prototype={constructor:t,equals:function(t){var n=this;return!!e.reduce(n.keys,function(e,r){return e&&n[r]===t[r]},1)},simpleNotify:function(e,t){var n,r=this;n=r.fn.call(r.context||t.currentTarget,e,r.data);if(r.once){t.removeObserver(r)}return n},notifyInternal:function(e,t){var n=this.simpleNotify(e,t);if(n===false){e.halt()}return n},notify:function(e,t){var n=this,r=e._ksGroups;if(r&&(!n.groups||!n.groups.match(r))){return undefined}return n.notifyInternal(e,t)}};return t});KISSY.add("event/base/observable",[],function(e){function t(t){var n=this;n.currentTarget=null;e.mix(n,t);n.reset()}t.prototype={constructor:t,hasObserver:function(){return!!this.observers.length},reset:function(){var e=this;e.observers=[]},removeObserver:function(e){var t=this,n,r=t.observers,i=r.length;for(n=0;n<i;n++){if(r[n]===e){r.splice(n,1);break}}t.checkMemory()},checkMemory:function(){},findObserver:function(e){var t=this.observers,n;for(n=t.length-1;n>=0;--n){if(e.equals(t[n])){return n}}return-1}};return t});KISSY.add("event/base",["./base/utils","./base/object","./base/observer","./base/observable"],function(e,t){var n=t("./base/utils");var r=t("./base/object");var i=t("./base/observer");var a=t("./base/observable");return{Utils:n,Object:r,Observer:i,Observable:a}});KISSY.add("event/dom/shake",["event/dom/base"],function(e,t){var n=t("event/dom/base");var r=n.Special,i=5,a=20,o=0,s,u,l,f=Math.max,c=Math.abs,d=e.Env.host,h="devicemotion",p=e.buffer(function(){if(o){n.fireHandler(d,"shake",{accelerationIncludingGravity:{x:s,y:u,z:l}});v()}},250);r.shake={setup:function(){if(this!==d){return}d.addEventListener(h,m,false)},tearDown:function(){if(this!==d){return}p.stop();v();d.removeEventListener(h,m,false)}};function v(){s=undefined;o=0}function m(e){var t=e.accelerationIncludingGravity,n=t.x,r=t.y,d=t.z,h;if(s!==undefined){h=f(c(n-s),c(r-u),c(d-l));if(h>i){p()}if(h>a){o=1}}s=n;u=r;l=d}});KISSY.add("event/dom/focusin",["event/dom/base"],function(e,t){var n=t("event/dom/base");var r=n.Special;e.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(t){var i=e.guid("attaches_"+e.now()+"_");r[t.name]={setup:function(){var e=this.ownerDocument||this;if(!(i in e)){e[i]=0}e[i]+=1;if(e[i]===1){e.addEventListener(t.fix,a,true)}},tearDown:function(){var e=this.ownerDocument||this;e[i]-=1;if(e[i]===0){e.removeEventListener(t.fix,a,true)}}};function a(e){var r=e.target;return n.fire(r,t.name)}});return n});KISSY.add("anim",["anim/base","anim/timer","anim/transition?"],function(n,i){var e=i("anim/base"),a=i("anim/timer");var s=i("anim/transition?");var r=n.getLogger("s/anim");var t=e.Utils,u={duration:1,easing:"linear"};function o(i,e,t,o,m){var f;if(i.node){f=i}else{if(typeof e==="string"){e=n.unparam(String(e),";",":");n.each(e,function(i,a){var s=n.trim(a);if(s){e[s]=n.trim(i)}if(!s||s!==a){delete e[a]}})}else{e=n.clone(e)}if(n.isPlainObject(t)){f=n.clone(t)}else{f={complete:m};if(t){f.duration=t}if(o){f.easing=o}}f.node=i;f.to=e}f=n.merge(u,f,{useTransition:n.config("anim/useTransition")});if(f.useTransition&&s){r.info("use transition anim");return new s(f)}else{r.info("use js timer anim");return new a(f)}}n.each(["pause","resume"],function(n){o[n]=function(i,e){if(e===null||typeof e==="string"||e===false){return t.pauseOrResumeQueue(i,e,n)}return t.pauseOrResumeQueue(i,undefined,n)}});o.isRunning=t.isElRunning;o.isPaused=t.isElPaused;o.stop=t.stopEl;o.Easing=a.Easing;n.Anim=o;o.Q=e.Q;return o});KISSY.add("anim/base/queue",["dom"],function(e,t){var n=t("dom");var r=e.guid("ks-queue-"+e.now()+"-"),i=e.guid("ks-queue-"+e.now()+"-"),o;function a(e,t,o){t=t||i;var a,s=n.data(e,r);if(!s&&!o){n.data(e,r,s={})}if(s){a=s[t];if(!a&&!o){a=s[t]=[]}}return a}o={queueCollectionKey:r,queue:function(e,t,n){var r=a(e,t);r.push(n);return r},remove:function(t,n,r){var i=a(t,n,1),s;if(i){s=e.indexOf(r,i);if(s>-1){i.splice(s,1)}}if(i&&!i.length){o.clearQueue(t,n)}return i},clearQueues:function(e){n.removeData(e,r)},clearQueue:function s(t,o){o=o||i;var a=n.data(t,r);if(a){delete a[o]}if(e.isEmptyObject(a)){n.removeData(t,r)}},dequeue:function(e,t){var n=a(e,t,1);if(n){n.shift();if(!n.length){o.clearQueue(e,t)}}return n}};return o});KISSY.add("anim/base/utils",["./queue","dom"],function(e,t){var n=t("./queue"),r=t("dom");var i=e.guid("ks-anim-unqueued-"+e.now()+"-");function o(t){var n=t.node,o=r.data(n,i);if(!o){r.data(n,i,o={})}o[e.stamp(t)]=t}function a(t){var n=t.node,o=r.data(n,i);if(o){delete o[e.stamp(t)];if(e.isEmptyObject(o)){r.removeData(n,i)}}}function s(t){var n=t.node,o=r.data(n,i);if(o){return!!o[e.stamp(t)]}return 0}var u=e.guid("ks-anim-paused-"+e.now()+"-");function l(t){var n=t.node,i=r.data(n,u);if(!i){r.data(n,u,i={})}i[e.stamp(t)]=t}function c(t){var n=t.node,i=r.data(n,u);if(i){delete i[e.stamp(t)];if(e.isEmptyObject(i)){r.removeData(n,u)}}}function f(t){var n=t.node,i=r.data(n,u);if(i){return!!i[e.stamp(t)]}return 0}function d(t,n,o){var a=r.data(t,o==="resume"?u:i),s=e.merge(a);e.each(s,function(e){if(n===undefined||e.config.queue===n){e[o]()}})}return{saveRunningAnim:o,removeRunningAnim:a,isAnimPaused:f,removePausedAnim:c,savePausedAnim:l,isAnimRunning:s,isElPaused:function(t){var n=r.data(t,u);return n&&!e.isEmptyObject(n)},isElRunning:function(t){var n=r.data(t,i);return n&&!e.isEmptyObject(n)},pauseOrResumeQueue:d,stopEl:function(t,o,a,s){if(a){if(s===undefined){n.clearQueues(t)}else{if(s!==false){n.clearQueue(t,s)}}}var u=r.data(t,i),l=e.merge(u);e.each(l,function(e){if(s===undefined||e.config.queue===s){e.stop(o)}})}}});KISSY.add("anim/base",["dom","./base/utils","./base/queue","promise"],function(e,t){var n=t("dom"),r=t("./base/utils"),i=t("./base/queue"),o=t("promise");var a=e.getLogger("s/anim");var s=n.NodeType,u=e.noop,l={toggle:1,hide:1,show:1};function c(t){var r=this;c.superclass.constructor.call(r);o.Defer(r);r.config=t;var i=t.node;if(!e.isPlainObject(i)){i=n.get(t.node)}r.node=r.el=i;r._backupProps={};r._propsData={}}function f(t){var r,i=t.config.complete;if(!e.isEmptyObject(r=t._backupProps)){n.css(t.node,r)}if(i){i.call(t)}}e.extend(c,o,{on:function(e,t){var n=this;a.warn("please use promise api of anim instead");if(e==="complete"){n.then(t)}else{if(e==="end"){n.fin(t)}else{if(e==="step"){n.progress(t)}else{a.error("not supported event for anim: "+e)}}}return n},prepareFx:u,runInternal:function(){var t=this,i=t.config,o=t.node,a,u=t._backupProps,c=t._propsData,f=i.to,d=i.delay||0,h=i.duration;r.saveRunningAnim(t);e.each(f,function(t,n){if(!e.isPlainObject(t)){t={value:t}}c[n]=e.mix({delay:d,easing:i.easing,frame:i.frame,duration:h},t)});if(o.nodeType===s.ELEMENT_NODE){if(f.width||f.height){var p=o.style;e.mix(u,{overflow:p.overflow,"overflow-x":p.overflowX,"overflow-y":p.overflowY});p.overflow="hidden";if(n.css(o,"display")==="inline"&&n.css(o,"float")==="none"){if(e.UA.ieMode<10){p.zoom=1}else{p.display="inline-block"}}}var m,g;g=n.css(o,"display")==="none";e.each(c,function(e,r){a=e.value;if(l[a]){if(a==="hide"&&g||a==="show"&&!g){t.stop(true);m=false;return m}u[r]=n.style(o,r);if(a==="toggle"){a=g?"show":"hide"}if(a==="hide"){e.value=0;u.display="none"}else{e.value=n.css(o,r);n.css(o,r,0);n.show(o)}}return undefined});if(m===false){return}}t.startTime=e.now();if(e.isEmptyObject(c)){t.__totalTime=h*1e3;t.__waitTimeout=setTimeout(function(){t.stop(true)},t.__totalTime)}else{t.prepareFx();t.doStart()}},isRunning:function(){return r.isAnimRunning(this)},isPaused:function(){return r.isAnimPaused(this)},pause:function(){var t=this;if(t.isRunning()){t._runTime=e.now()-t.startTime;t.__totalTime-=t._runTime;r.removeRunningAnim(t);r.savePausedAnim(t);if(t.__waitTimeout){clearTimeout(t.__waitTimeout)}else{t.doStop()}}return t},doStop:u,doStart:u,resume:function(){var t=this;if(t.isPaused()){t.startTime=e.now()-t._runTime;r.removePausedAnim(t);r.saveRunningAnim(t);if(t.__waitTimeout){t.__waitTimeout=setTimeout(function(){t.stop(true)},t.__totalTime)}else{t.beforeResume();t.doStart()}}return t},beforeResume:u,run:function(){var e=this,t,n=e.config.queue;if(n===false){e.runInternal()}else{t=i.queue(e.node,n,e);if(t.length===1){e.runInternal()}}return e},stop:function(e){var t=this,n=t.node,o,a=t.config.queue;if(t.isResolved()||t.isRejected()){return t}if(t.__waitTimeout){clearTimeout(t.__waitTimeout);t.__waitTimeout=0}if(!t.isRunning()&&!t.isPaused()){if(a!==false){i.remove(n,a,t)}return t}t.doStop(e);r.removeRunningAnim(t);r.removePausedAnim(t);var s=t.defer;if(e){f(t);s.resolve([t])}else{s.reject([t])}if(a!==false){o=i.dequeue(n,a);if(o&&o[0]){o[0].runInternal()}}return t}});c.Utils=r;c.Q=i;return c});KISSY.add("promise",[],function(e){var t=e.getLogger("s/promise");var n="__promise_value",r=e.setImmediate,i="__promise_progress_listeners",o="__promise_pendings";function a(e){if(typeof console!=="undefined"&&console.error){console.error(e)}}function s(e,t,i){if(e instanceof f){r(function(){i.call(e,e[n])})}else{var a=e[n],u=e[o];if(u){u.push([t,i])}else{if(l(a)){s(a,t,i)}else{if(t){r(function(){t.call(e,a)})}}}}}function u(e){var t=this;if(!(t instanceof u)){return new u(e)}t.promise=e||new c;t.promise.defer=t}u.prototype={constructor:u,resolve:function(t){var r=this.promise,a;if(!(a=r[o])){return null}r[n]=t;a=[].concat(a);r[o]=undefined;r[i]=undefined;e.each(a,function(e){s(r,e[0],e[1])});return t},reject:function(e){return this.resolve(new f(e))},notify:function(t){e.each(this.promise[i],function(e){r(function(){e(t)})})}};function l(e){return e&&e instanceof c}function c(e){var t=this;t[n]=e;if(e===undefined){t[o]=[];t[i]=[]}}c.prototype={constructor:c,then:function(e,t,n){if(n){this.progress(n)}return d(this,e,t)},progress:function(e){if(this[i]){this[i].push(e)}return this},fail:function(e){return d(this,0,e)},fin:function(e){return d(this,function(t){return e(t,true)},function(t){return e(t,false)})},done:function(t,n){var r=this,i=function(t){e.log(t.stack||t,"error");setTimeout(function(){throw t},0)},o=t||n?r.then(t,n):r;o.fail(i)},isResolved:function(){return p(this)},isRejected:function(){return h(this)}};function f(e){if(e instanceof f){return e}var r=this;c.apply(r,arguments);if(r[n]instanceof c){t.error("assert.not(this.__promise_value instanceof promise) in Reject constructor")}return r}e.extend(f,c);function d(e,n,r){var i=new u,o=0;function l(e){try{return n?n.call(this,e):e}catch(t){a(t.stack||t);return new f(t)}}function d(e){try{return r?r.call(this,e):new f(e)}catch(t){a(t.stack||t);return new f(t)}}function p(e){if(o){t.error("already done at fulfilled");return}if(e instanceof c){t.error("assert.not(value instanceof Promise) in when");return}o=1;i.resolve(l.call(this,e))}if(e instanceof c){s(e,p,function(e){if(o){t.error("already done at rejected");return}o=1;i.resolve(d.call(this,e))})}else{p(e)}return i.promise}function p(e){return!h(e)&&l(e)&&e[o]===undefined&&(!l(e[n])||p(e[n]))}function h(e){return l(e)&&e[o]===undefined&&e[n]instanceof f}KISSY.Defer=u;KISSY.Promise=c;c.Defer=u;e.mix(c,{when:d,isPromise:l,isResolved:p,isRejected:h,all:function(e){var t=e.length;if(!t){return null}var n=new u;for(var r=0;r<e.length;r++){(function(r,i){d(r,function(r){e[i]=r;if(--t===0){n.resolve(e)}},function(e){n.reject(e)})})(e[r],r)}return n.promise},async:function(e){return function(){var t=e.apply(this,arguments);function n(e,n){var o;try{o=t[e](n)}catch(a){return new f(a)}if(o.done){return o.value}return d(o.value,r,i)}function r(e){return n("next",e)}function i(e){return n("throw",e)}return r()}}});return c});KISSY.add("anim/timer/easing",[],function(){var e=Math.PI,t=Math.pow,n=Math.sin,r=parseFloat,i=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,o=1.70158;function a(e){return e}var s={swing:function(t){return-Math.cos(t*e)/2+.5},easeNone:a,linear:a,easeIn:function(e){return e*e},ease:c(.25,.1,.25,1),"ease-in":c(.42,0,1,1),"ease-out":c(0,0,.58,1),"ease-in-out":c(.42,0,.58,1),"ease-out-in":c(0,.42,1,.58),toFn:function(e){var t;if(t=e.match(i)){return c(r(t[1]),r(t[2]),r(t[3]),r(t[4]))}return s[e]||a},easeOut:function(e){return(2-e)*e},easeBoth:function(e){return(e*=2)<1?.5*e*e:.5*(1- --e*(e-2))},easeInStrong:function(e){return e*e*e*e},easeOutStrong:function(e){return 1- --e*e*e*e},easeBothStrong:function(e){return(e*=2)<1?.5*e*e*e*e:.5*(2-(e-=2)*e*e*e)},elasticIn:function(r){var i=.3,o=i/4;if(r===0||r===1){return r}return-(t(2,10*(r-=1))*n((r-o)*2*e/i))},elasticOut:function(r){var i=.3,o=i/4;if(r===0||r===1){return r}return t(2,-10*r)*n((r-o)*2*e/i)+1},elasticBoth:function(r){var i=.45,o=i/4;if(r===0||(r*=2)===2){return r}if(r<1){return-.5*t(2,10*(r-=1))*n((r-o)*2*e/i)}return t(2,-10*(r-=1))*n((r-o)*2*e/i)*.5+1},backIn:function(e){if(e===1){e-=.001}return e*e*((o+1)*e-o)},backOut:function(e){return(e-=1)*e*((o+1)*e+o)+1},backBoth:function(e){var t=o;var n=(t*=1.525)+1;if((e*=2)<1){return.5*e*e*(n*e-t)}return.5*((e-=2)*e*(n*e+t)+2)},bounceIn:function(e){return 1-s.bounceOut(1-e)},bounceOut:function(e){var t=7.5625,n;if(e<1/2.75){n=t*e*e}else{if(e<2/2.75){n=t*(e-=1.5/2.75)*e+.75}else{if(e<2.5/2.75){n=t*(e-=2.25/2.75)*e+.9375}else{n=t*(e-=2.625/2.75)*e+.984375}}}return n},bounceBoth:function(e){if(e<.5){return s.bounceIn(e*2)*.5}return s.bounceOut(e*2-1)*.5+.5}};var u=1e-6,l=Math.abs;function c(e,t,n,r){var i=3*e-3*n+1,o=3*n-6*e,a=3*e;var s=3*t-3*r+1,c=3*r-6*t,f=3*t;function d(e){return(3*i*e+2*o)*e+a}function h(e){return((i*e+o)*e+a)*e}function p(e){return((s*e+c)*e+f)*e}function m(e){var t=e,n,r;for(var i=0;i<8;i++){r=h(t)-e;if(l(r)<u){return t}n=d(t);if(l(n)<u){break}t-=r/n}var o=1,a=0;t=e;while(o>a){r=h(t)-e;if(l(r)<u){return t}if(r>0){o=t}else{a=t}t=(o+a)/2}return t}function g(e){return p(m(e))}return g}return s});KISSY.add("anim/timer/manager",[],function(e){var t=e.stamp,n=e.Env.host,r=15,i,o;if(0){i=n.requestAnimationFrame;o=n.cancelAnimationFrame;var a=["ms","moz","webkit","o"];for(var s=0;s<a.length&&!i;++s){i=n[a[s]+"RequestAnimationFrame"];o=n[a[s]+"CancelAnimationFrame"]||n[a[s]+"CancelRequestAnimationFrame"]}}else{i=function(e){return setTimeout(e,r)};o=function(e){clearTimeout(e)}}return{runnings:{},timer:null,start:function(e){var n=this,r=t(e);if(n.runnings[r]){return}n.runnings[r]=e;n.startTimer()},stop:function(e){this.notRun(e)},notRun:function(n){var r=this,i=t(n);delete r.runnings[i];if(e.isEmptyObject(r.runnings)){r.stopTimer()}},pause:function(e){this.notRun(e)},resume:function(e){this.start(e)},startTimer:function(){var e=this;if(!e.timer){e.timer=i(function t(){if(e.runFrames()){e.stopTimer()}else{e.timer=i(t)}})}},stopTimer:function(){var e=this,t=e.timer;if(t){o(t);e.timer=0}},runFrames:function(){var e=this,t,n,r=e.runnings;for(t in r){r[t].frame()}for(t in r){n=0;break}return n===undefined}}});KISSY.add("anim/timer/fx",["dom"],function(e,t){var n=e.getLogger("s/aim/timer/fx");var r=t("dom");function i(t,n){e.mix(t,n);t.pos=0;t.unit=t.unit||""}function o(e){i(this,e)}o.prototype={isCustomFx:0,constructor:o,load:function(e){i(this,e)},frame:function(e){if(this.pos===1){return}var t=this,i=t.anim,o=t.prop,a=i.node,u=t.from,l=t.propData,c=t.to;if(e===undefined){e=s(i,l)}t.pos=e;if(u===c||e===0){return}var f=t.interpolate(u,c,t.pos);t.val=f;if(l.frame){l.frame.call(t,i,t)}else{if(!t.isCustomFx){if(f===undefined){t.pos=1;f=c;n.warn(o+" update directly ! : "+f+" : "+u+" : "+c)}else{f+=t.unit}t.val=f;if(t.type==="attr"){r.attr(a,o,f,1)}else{r.css(a,o,f)}}}},interpolate:function(e,t,n){if(typeof e==="number"&&typeof t==="number"){return Math.round((e+(t-e)*n)*1e5)/1e5}else{return undefined}},cur:function(){var e=this,t=e.prop,n,i,o,s=e.anim.node;if(e.isCustomFx){return s[t]||0}if(!(n=e.type)){n=e.type=a(s,t)?"attr":"css"}if(n==="attr"){o=r.attr(s,t,undefined,1)}else{o=r.css(s,t)}return isNaN(i=parseFloat(o))?!o||o==="auto"?0:o:i}};function a(e,t){if((!e.style||e.style[t]==null)&&r.attr(e,t,undefined,1)!=null){return 1}return 0}function s(t,n){var r=e.now(),i,o=t.startTime,a=n.delay,s=n.duration;i=r-o-a;if(i<=0){return 0}else{if(i>=s){return 1}else{return n.easing(i/s)}}}o.Factories={};o.FxTypes={};o.getFx=function(e){var t=o,n,r;if(n=e.fxType){t=o.FxTypes[n]}else{if(!e.isCustomFx&&(r=o.Factories[e.prop])){t=r}}return new t(e)};return o});KISSY.add("anim/timer/short-hand",[],function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});KISSY.add("anim/timer/color",["./fx","./short-hand"],function(e,t){var n=t("./fx");var r=t("./short-hand");var i=e.getLogger("s/anim/timer/color");var o=16,a=Math.floor,s={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},u=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,l=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,c=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i,f=["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"];r.background.push("backgroundColor");r.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];r.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");r.borderBottom.push("borderBottomColor");r.borderLeft.push("borderLeftColor");r.borderRight.push("borderRightColor");r.borderTop.push("borderTopColor");function d(e){e=e+"";var t;if(t=e.match(u)){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}else{if(t=e.match(l)){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4])]}else{if(t=e.match(c)){for(var n=1;n<t.length;n++){if(t[n].length<2){t[n]+=t[n]}}return[parseInt(t[1],o),parseInt(t[2],o),parseInt(t[3],o)]}}}if(s[e=e.toLowerCase()]){return s[e]}i.warn("only allow rgb or hex color string : "+e);return[255,255,255]}function h(){h.superclass.constructor.apply(this,arguments)}e.extend(h,n,{load:function(){var e=this;h.superclass.load.apply(e,arguments);if(e.from){e.from=d(e.from)}if(e.to){e.to=d(e.to)}},interpolate:function(e,t,n){var r=h.superclass.interpolate;if(e.length===3&&t.length===3){return"rgb("+[a(r(e[0],t[0],n)),a(r(e[1],t[1],n)),a(r(e[2],t[2],n))].join(", ")+")"}else{if(e.length===4||t.length===4){return"rgba("+[a(r(e[0],t[0],n)),a(r(e[1],t[1],n)),a(r(e[2],t[2],n)),a(r(e[3]||1,t[3]||1,n))].join(", ")+")"}else{i.warn("unknown value : "+e);return undefined}}}});e.each(f,function(e){n.Factories[e]=h});n.FxTypes.color=h;return h});KISSY.add("anim/timer/transform",["dom","./fx"],function(e,t){var n=t("dom");var r=t("./fx");var i=e.Features.isTransform3dSupported()?"translate3d({translateX}px,{translateY}px,0)":"translate({translateX}px,{translateY}px)";function o(t){t=t.split(/,/);t=e.map(t,function(e){return u(e)});return t}function a(e){e=o(e);var t,n,r,i=e[0],a=e[1],s=e[2],l=e[3];if(i*l-a*s){t=Math.sqrt(i*i+a*a);r=(i*s+a*l)/(i*l-s*a);n=(i*l-a*s)/t;if(i*l<a*s){r=-r;t=-t}}else{t=n=r=0}return{translateX:u(e[4]),translateY:u(e[5]),rotate:u(Math.atan2(a,i)*180/Math.PI),skewX:u(Math.atan(r)*180/Math.PI),skewY:0,scaleX:u(t),scaleY:u(n)}}function s(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function u(e){return Math.round(parseFloat(e)*1e5)/1e5}function l(t){t=t.split(")");var n=e.trim,r=-1,i=t.length-1,o,l,c,f=s();while(++r<i){o=t[r].split("(");l=n(o[0]);c=o[1];switch(l){case"translateX":;case"translateY":;case"scaleX":;case"scaleY":f[l]=u(c);break;case"rotate":;case"skewX":;case"skewY":var d=u(c);if(!e.endsWith(c,"deg")){d=d*180/Math.PI}f[l]=d;break;case"translate":;case"translate3d":c=c.split(",");f.translateX=u(c[0]);f.translateY=u(c[1]||0);break;case"scale":c=c.split(",");f.scaleX=u(c[0]);f.scaleY=u(c[1]||c[0]);break;case"matrix":return a(c)}}return f}function c(){c.superclass.constructor.apply(this,arguments)}e.extend(c,r,{load:function(){var e=this;c.superclass.load.apply(e,arguments);e.from=n.style(e.anim.node,"transform")||e.from;if(e.from&&e.from!=="none"){e.from=l(e.from)}else{e.from=s()}if(e.to){e.to=l(e.to)}else{e.to=s()}},interpolate:function(t,n,r){var o=c.superclass.interpolate;var a={};a.translateX=o(t.translateX,n.translateX,r);a.translateY=o(t.translateY,n.translateY,r);a.rotate=o(t.rotate,n.rotate,r);a.skewX=o(t.skewX,n.skewX,r);a.skewY=o(t.skewY,n.skewY,r);a.scaleX=o(t.scaleX,n.scaleX,r);a.scaleY=o(t.scaleY,n.scaleY,r);return e.substitute(i+" "+"rotate({rotate}deg) "+"skewX({skewX}deg) "+"skewY({skewY}deg) "+"scale({scaleX},{scaleY})",a)}});r.Factories.transform=c;return c});KISSY.add("anim/timer",["dom","./base","./timer/easing","./timer/manager","./timer/fx","./timer/short-hand","./timer/color","./timer/transform"],function(e,t){var n=t("dom");var r=t("./base");var i=t("./timer/easing");var o=t("./timer/manager");var a=t("./timer/fx");var s=t("./timer/short-hand");t("./timer/color");t("./timer/transform");var u=n._camelCase,l=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;function c(){var t=this,n;c.superclass.constructor.apply(t,arguments);e.each(n=t.to,function(e,t){var r=u(t);if(t!==r){n[r]=n[t];delete n[t]}})}e.extend(c,r,{prepareFx:function(){var t=this,r=t.node,o=t._propsData;e.each(o,function(e){e.duration*=1e3;e.delay*=1e3;if(typeof e.easing==="string"){e.easing=i.toFn(e.easing)}});e.each(s,function(t,i){var a,s=o[i],u;if(s){u=s.value;a={};e.each(t,function(e){a[e]=n.css(r,e)});n.css(r,i,u);e.each(a,function(t,i){if(!(i in o)){o[i]=e.merge(s,{value:n.css(r,i)})}n.css(r,i,t)});delete o[i]}});var u,c,f,d,h,p,m,g=0,v,b;if(e.isPlainObject(r)){g=1}for(u in o){c=o[u];f=c.value;p={isCustomFx:g,prop:u,anim:t,fxType:c.fxType,type:c.type,propData:c};m=a.getFx(p);d=f;h=m.cur();f+="";v="";b=f.match(l);if(b){d=parseFloat(b[2]);v=b[3];if(v&&v!=="px"&&h){var y=0,S=d;do{++S;n.css(r,u,S+v);y=m.cur()}while(y===0);h=S/y*h;n.css(r,u,h+v)}if(b[1]){d=(b[1]==="-="?-1:1)*d+h}}p.from=h;p.to=d;p.unit=v;m.load(p);c.fx=m}},frame:function(){var t=this,n,r=1,i,o,a=t._propsData;for(n in a){o=a[n];i=o.fx;i.frame();if(t.isRejected()||t.isResolved()){return}r&=i.pos===1}var s=e.now(),u=t.config.duration*1e3,l=Math.max(0,t.startTime+u-s),c=l/u||0,f=1-c;t.defer.notify([t,f,l]);if(r){t.stop(r)}},doStop:function(e){var t=this,n,r,i,a=t._propsData;o.stop(t);if(e){for(n in a){i=a[n];r=i.fx;if(r){r.frame(1)}}}},doStart:function(){o.start(this)}});c.Easing=i;c.Fx=a;return c});KISSY.add("anim/transition",["dom","./base"],function(e,t,n,r){function i(){return arguments[1].toUpperCase()}var o=/-([a-z])/gi;var a=["Webkit","Moz","O","ms"],s=a.length;var u={};var l=document.documentElement.style;function c(e){if(e.indexOf("-")!==-1){e=e.replace(o,i)}if(e in u){return u[e]}if(!l||e in l){u[e]={propertyName:e,propertyNamePrefix:""}}else{var t=e.charAt(0).toUpperCase()+e.slice(1),n;for(var r=0;r<s;r++){var c=a[r];n=c+t;if(n in l){u[e]={propertyName:n,propertyNamePrefix:c}}}u[e]=u[e]||null}return u[e]}var f=e;var d=t("dom");var h=t("./base");var p=c("transition");var m=p.propertyName;var g="linear";var v={ease:1,linear:1,"ease-in":1,"ease-out":1,"ease-in-out":1};function b(e){var t="";f.each(e,function(e,n){if(t){t+=","}t+=n+" "+e.duration+"s "+e.easing+" "+e.delay+"s"});return t}function y(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}function T(e,t,n,r,i){var o=this;if(!(o instanceof T)){return new T(e,t,n,r,i)}T.superclass.constructor.apply(o,arguments)}f.extend(T,h,{prepareFx:function(){var t=this,n=t._propsData;var r={};var i;var o;for(var a in n){i=n[a];if(typeof i.easing==="string"){if(!f.startsWith(i.easing,"cubic-bezier")&&!v[i.easing]){i.easing=g}}else{i.easing=g}o=c(a);if(!o){e.log("unsupported css property for transition anim: "+a,"error");continue}r[y(o.propertyName)]=n[a]}t._propsData=r},doStart:function(){var e=this,t=e.node,n=t.style,r=e._propsData,i=n[m],o=0,a={};f.each(r,function(e,n){var r=e.value;d.css(t,n,d.css(t,n));a[n]=r;o=Math.max(e.duration+e.delay,o)});if(i.indexOf("none")!==-1){i=""}else{if(i){i+=","}}n[m]=i+b(r);setTimeout(function(){d.css(t,a)},0);e._transitionEndTimer=setTimeout(function(){e.stop(true)},o*1e3)},beforeResume:function(){var e=this,t=e._propsData,n=f.merge(t),r=e._runTime/1e3;f.each(n,function(e,n){var i=r;if(e.delay>=i){e.delay-=i}else{i-=e.delay;e.delay=0;if(e.duration>=i){e.duration-=i}else{delete t[n]}}})},doStop:function(e){var t=this,n=t.node,r=n.style,i=t._propsData,o=[],a,s={};if(t._transitionEndTimer){clearTimeout(t._transitionEndTimer);t._transitionEndTimer=null}f.each(i,function(t,r){if(!e){s[r]=d.css(n,r)}o.push(r)});a=f.trim(r[m].replace(new RegExp("(^|,)"+"\\s*(?:"+o.join("|")+")\\s+[^,]+","gi"),"$1")).replace(/^,|,,|,$/g,"")||"none";r[m]=a;d.css(n,s)}});f.mix(T,h.Statics);r.exports=T});KISSY.add("event",["event/dom","event/custom"],function(e,t){var n=t("event/dom");var r=t("event/custom");var i=e.Event=e.merge(n,{DomEvent:n,CustomEvent:r});i.global=r.global;e.EventTarget=i.Target=r.Target;return i});KISSY.add("event/custom/observer",["event/base"],function(e,t){var n=t("event/base");function r(){r.superclass.constructor.apply(this,arguments)}e.extend(r,n.Observer,{keys:["fn","context","groups"]});return r});KISSY.add("event/custom/object",["event/base"],function(e,t){var n=t("event/base");function r(t){r.superclass.constructor.call(this);e.mix(this,t)}e.extend(r,n.Object);return r});KISSY.add("event/custom/observable",["event/base","./observer","./object"],function(e,t){var n=t("event/base");var r=t("./observer");var i=t("./object");var a=n.Utils;function o(){var e=this;o.superclass.constructor.apply(e,arguments);e.defaultFn=null;e.defaultTargetOnly=false;e.bubbles=true}e.extend(o,n.Observable,{on:function(t){var n=new r(t);if(e.Config.debug){if(!n.fn){e.error("lack event handler for "+this.type)}}if(this.findObserver(n)===-1){this.observers.push(n)}},fire:function(e){e=e||{};var t=this,n=t.bubbles,r=t.currentTarget,a,o,s=t.type,u=t.defaultFn,l,c=e,f,d;e.type=s;if(!(c instanceof i)){c.target=r;c=new i(c)}c.currentTarget=r;d=t.notify(c);if(f!==false&&d!==undefined){f=d}if(n&&!c.isPropagationStopped()){a=r.getTargets();o=a&&a.length||0;for(l=0;l<o&&!c.isPropagationStopped();l++){d=a[l].fire(s,c);if(f!==false&&d!==undefined){f=d}}}if(u&&!c.isDefaultPrevented()){var h=c.target,p=h.getCustomEventObservable(c.type);if(!t.defaultTargetOnly&&!p.defaultTargetOnly||r===h){f=u.call(r,c)}}return f},notify:function(e){var t=[].concat(this.observers),n,r,i=t.length,a;for(a=0;a<i&&!e.isImmediatePropagationStopped();a++){n=t[a].notify(e,this);if(r!==false&&n!==undefined){r=n}}return r},detach:function(e){var t,n=this,r=e.fn,i=e.context,o=n.currentTarget,s=n.observers,u=e.groups;if(!s.length){return}if(u){t=a.getGroupsRe(u)}var l,c,f,d,h,p=s.length;if(r||t){i=i||o;for(l=0,c=0,f=[];l<p;++l){d=s[l];h=d.context||o;if(i!==h||r&&r!==d.fn||t&&!d.groups.match(t)){f[c++]=d}}n.observers=f}else{n.reset()}}});return o});KISSY.add("event/custom/target",["event/base","./observable"],function(e,t){var n=t("event/base");var r=t("./observable");var i=n.Utils,a=i.splitAndRun,o="__~ks_bubble_targets";var s="__~ks_custom_events";return{isTarget:1,getCustomEventObservable:function(e,t){var n=this,i,a=n.getCustomEvents();i=a&&a[e];if(!i&&t){i=a[e]=new r({currentTarget:n,type:e})}return i},fire:function(e,t){var n=this,o,s=n.getTargets(),u=s&&s.length;t=t||{};a(e,function(e){var a,s;i.fillGroupsForEvent(e,t);e=t.type;s=n.getCustomEventObservable(e);if(!s&&!u){return}if(s){if(!s.hasObserver()&&!s.defaultFn){if(s.bubbles&&!u||!s.bubbles){return}}}else{s=new r({currentTarget:n,type:e})}a=s.fire(t);if(o!==false&&a!==undefined){o=a}});return o},publish:function(t,n){var r,i=this;a(t,function(t){r=i.getCustomEventObservable(t,true);e.mix(r,n)});return i},addTarget:function(t){var n=this,r=n.getTargets();if(!e.inArray(t,r)){r.push(t)}return n},removeTarget:function(t){var n=this,r=n.getTargets(),i=e.indexOf(t,r);if(i!==-1){r.splice(i,1)}return n},getTargets:function(){return this[o]||(this[o]=[])},getCustomEvents:function(){return this[s]||(this[s]={})},on:function(e,t,n){var r=this;i.batchForType(function(e,t,n){var a=i.normalizeParam(e,t,n),o;e=a.type;o=r.getCustomEventObservable(e,true);if(o){o.on(a)}},0,e,t,n);return r},detach:function(t,n,r){var a=this;i.batchForType(function(t,n,r){var o=i.normalizeParam(t,n,r),s,u;t=o.type;if(t){u=a.getCustomEventObservable(t,true);if(u){u.detach(o)}}else{s=a.getCustomEvents();e.each(s,function(e){e.detach(o)})}},0,t,n,r);return a}}});KISSY.add("event/custom",["./custom/target"],function(e,t){var n=t("./custom/target");return{Target:n,global:e.mix({},n)}});