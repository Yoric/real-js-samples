define("mui/view-port-listen/index",function(e,t,o){var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,o,n){if(o)e(t.prototype,o);if(n)e(t,n);return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=e("mui/zepto/touch"),s=window;var r=function a(e,t,o){var n=undefined,i=undefined;return function(){if(n&&Date.now()-n<t){if(i){clearTimeout(i)}i=setTimeout(function(){e.call(o);n=Date.now()},t);return}e.call(o);n=Date.now()}};var f=function(){function e(t){i(this,e);var o=this;o.options=Object.assign({},{listenItems:[],listenCallback:function n(){},diff:0,bufferTime:200},t);o.scrollEvent=false;o.destroyed=false;o.scrollBuffer=r(o.__listenScroll,o.options.bufferTime,o);if(o.options.listenItems){if(!o.options.listenItems.length){o.options.listenItems=[].concat(o.options.listenItems)}else if(!o.options.listenItems.slice){o.options.listenItems=[].slice.call(o.options.listenItems)}o.__listenScroll()}else{o.options.listenItems=[]}}n(e,[{key:"__listenScroll",value:function t(){var e=this,t=e.options.listenItems,o=e.options.listenCallback,n=e._getViewPortHeight(),i=t.length,r=undefined;if(t.getDOMNodes){t=t.getDOMNodes()}e.destroyed=true;while(i--){r=l(t[i]);var f=e._getElementViewTop(r);if(f){e.destroyed=false;if(e.isInViewPortHeight(f,n)){delete t[i];o&&o.call(r)}}}if(e.scrollEvent&&e.destroyed){l(s).off("scroll",e.scrollBuffer);e.scrollEvent=false}else if(!e.scrollEvent&&!e.destroyed){l(s).on("scroll",e.scrollBuffer);e.scrollEvent=true}}},{key:"addItems",value:function o(e){var t=this;t.options.listenItems=t.options.listenItems.concat(e);t.__listenScroll()}},{key:"isInViewPortHeight",value:function f(e,t){var o=this,n=o.options.diff,i={top:0,bottom:0};if(typeof n==="number"){i.bottom=n}else{i.top=n.top&&typeof n.top==="number"?n.top:0;i.bottom=n.bottom&&typeof n.bottom==="number"?n.bottom:0}return e.min>=-i.top&&e.min<=t+i.bottom||e.max>=-i.top&&e.max<=t+i.bottom||e.min>=-i.top&&e.max<=t+i.bottom||e.min<=-i.top&&e.max>=t+i.bottom}},{key:"_getElementViewTop",value:function a(e){if(e&&e.length){var t=l(e).get(0).getBoundingClientRect().top,o=e.height();return{min:t,max:t+o}}else{return false}}},{key:"_getViewPortHeight",value:function u(){return l(s).height()}}]);return e}();o.exports=f});define("mui/zepto/touch",["mui/zepto/zepto","mui/zepto/event"],function(e,t,n){var i=e("mui/zepto/zepto");e("mui/zepto/event");!function(e){function t(e,t,n,i){return Math.abs(e-t)>=Math.abs(n-i)?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function n(){f=null,l.last&&(l.el.trigger("longTap"),l={})}function i(){f&&clearTimeout(f),f=null}function o(){s&&clearTimeout(s),a&&clearTimeout(a),c&&clearTimeout(c),f&&clearTimeout(f),s=a=c=f=null,l={}}function r(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function u(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var s,a,c,f,p,l={},d=750;e(document).ready(function(){var h,m,g,v,y=0,z=0;"MSGesture"in window&&(p=new MSGesture,p.target=document.body),e(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(l.el.trigger("swipe"),l.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(t){(v=u(t,"down"))&&!r(t)||(g=v?t:t.touches[0],t.touches&&1===t.touches.length&&l.x2&&(l.x2=void 0,l.y2=void 0),h=Date.now(),m=h-(l.last||h),l.el=e("tagName"in g.target?g.target:g.target.parentNode),s&&clearTimeout(s),l.x1=g.pageX,l.y1=g.pageY,m>0&&m<=250&&(l.isDoubleTap=!0),l.last=h,f=setTimeout(n,d),p&&v&&p.addPointer(t.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(v=u(e,"move"))&&!r(e)||(g=v?e:e.touches[0],i(),l.x2=g.pageX,l.y2=g.pageY,y+=Math.abs(l.x1-l.x2),z+=Math.abs(l.y1-l.y2))}).on("touchend MSPointerUp pointerup",function(n){(v=u(n,"up"))&&!r(n)||(i(),l.x2&&Math.abs(l.x1-l.x2)>30||l.y2&&Math.abs(l.y1-l.y2)>30?c=setTimeout(function(){l.el&&(l.el.trigger("swipe"),l.el.trigger("swipe"+t(l.x1,l.x2,l.y1,l.y2))),l={}},0):"last"in l&&(y<30&&z<30?a=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=o,l.el&&l.el.trigger(t),l.isDoubleTap?(l.el&&l.el.trigger("doubleTap"),l={}):s=setTimeout(function(){s=null,l.el&&l.el.trigger("singleTap"),l={}},250)},0):l={}),y=z=0)}).on("touchcancel MSPointerCancel pointercancel",o),e(window).on("scroll",o)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(i),n.exports=i});