KISSY.add("jbc/jupopup/1.0.7/index",function(t){var e=t.DOM,o=t.Event,n=function(t,e){var o=Array.prototype.slice.call(arguments);return"function"==typeof t?t.apply(e||this,o.slice(2)):void 0},s='<div class="ju-popup-mask"></div><div class="ju-popup"><div class="hd"><h3>{title}</h3></div><div class="bd J_bd">{content}</div><div class="ft"><div class="buttons"></div><a href="#" title="关闭此窗口" class="btn-close">&times;</a></div></div></div>',c={title:"提示",type:"",content:"",useAnim:!1,autoShow:!0,wrapId:"",width:400,hideMask:!1,keepShow:!1,buttons:[{style:"",text:"确定",func:function(){this.hide()}}]},u=function(e,o){this.context=o||document.body,this.config=t.merge(c,e||{}),this.popup="",this.init()};return t.augment(u,{init:function(){{var t=this,o=document.createElement("div"),i=t.config;t.context}""!==i.wrapId&&(o.id=i.wrapId),t.wrapDiv=o,e.hide(o),t.fillContext(o,i),t.setPopStyle(o,i),t.setBottomMenu(o,i),t.setCloseMenu(o,i),t.ieHack(o),e.append(o,document.body),t.isAutoShow(o,i)},fillContext:function(o,i){o.innerHTML="string"==typeof i.content?t.substitute(s,i):t.substitute(s,t.merge(i,{content:""})),i.hideMask&&e.addClass(o,"ju-popup-hidemask"),e.addClass(o,"ju-popup-wrapper"),this.popup=e.get(".ju-popup",o),this.bd=e.get(".J_bd",o)},setPopStyle:function(t,o){var i=e.get(".ju-popup",t);o.width&&e.css(i,"width",o.width),o.type&&e.addClass(i,o.type)},setBottomMenu:function(t,n){var s=e.get(".buttons",t),c=n.buttons,u=c.length,d="";if(u)for(i=0;i<u;i++)commMenu=document.createElement("button"),d="<span>"+c[i].text+"</span>",e.addClass(commMenu,"bottom-btn"),e.attr(commMenu,"href","#"),c[i].style&&e.addClass(commMenu,c[i].style),e.html(commMenu,d),o.on(commMenu,"click",function(t){t.preventDefault()}),o.on(commMenu,"click",c[i].func,this,!0),e.append(commMenu,s);else e.hide(s)},setCloseMenu:function(t,i){var n=this,s=e.get(".btn-close",t);i.keepShow&&e.hide(s),o.on(document,"keydown",function(t){27==t.keyCode&&n.hide()}),o.on(s,"click",function(t){t.preventDefault(),n.hide()})},isAutoShow:function(t,e){var o=this;e.autoShow&&o.show(t)},ieHack:function(i){if(t.UA.ie&&6==t.UA.ie){var n=document.documentElement,s=n.scrollTop||document.body.scrollTop,c=n.scrollLeft||document.body.scrollLeft;e.css(i,"overflow","hidden"),e.css(i,"position","absolute"),e.css(i,"z-index","999999"),e.css(i,"top",s+"px"),e.css(i,"left",c+"px");var u=document.createElement("iframe");u.setAttribute("frameborder","0"),u.setAttribute("scrolling","no"),u.src="about:blank",u.style.cssText="filter:alpha(opacity=0); position:absolute; top: 0px; left: 0px; z-index: -1;",e.css(u,"width",(n.clientWidth||document.body.clientWidth)-20+"px"),e.css(u,"height",(n.clientHeight||document.body.clientHeight)+"px"),e.css(i,"height",(n.clientHeight||document.body.clientHeight)+"px"),i.appendChild(u);var d,p=e.get(".ju-popup-mask",i),l=function(){var t=function(){p&&(e.css(p,"width",e.viewportWidth()+"px"),e.css(p,"height",e.viewportHeight()+"px"));var t=n.scrollTop||document.body.scrollTop,o=n.scrollLeft||document.body.scrollLeft,s=n.scrollHeight||document.body.scrollHeight;t+(n.clientHeight||document.body.clientHeight)>s||(e.css(i,"top",t+"px"),e.css(i,"left",o+"px"),e.css(i,"zoom","1.2"),e.css(i,"zoom",""))};d&&clearTimeout(d),d=setTimeout(t,10)};o.on(window,"scroll",l,this,!0),o.on(window,"resize",l,this,!0),l()}},show:function(o){{var i=this,o=o||i.wrapDiv,s=i.config,c=e.get(".ju-popup",o);e.get(".group-outbg",o)}if(s.onShow&&n(s.onShow,this),e.css(o,{display:""}),s.useAnim)if("BackCompat"==document.compatMode){e.css(c,{opacity:"0"});var u=t.Anim(c,{opacity:"1"},.5);u.run()}else e.css(c,{opacity:"1"})},hide:function(){var t=this,o=t.wrapDiv,i=t.config;i.useAnim&&t.animate&&t.animate.stop(),e.hide(o),i.onHide&&n(i.onHide,t)}}),u},{requires:["./box.css"]}),KISSY.config("modules",{"jbc/jupopup/1.0.7/index":{requires:["./box.css"]}});