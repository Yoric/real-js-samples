KISSY.add("shop/head/main/index",function(e,t,a){return{"initView":function(e,a,n,i){var r=this;_CTKa87f(31,"head.main.init","codetrack.init"),a=a||{};var s=t.get("#mallSearch");s&&n.addElement(s,"shop/head/search/",a);var o=t.get("#shop-info");if(o&&n.addElement(o,"shop/head/shopinfo/",{"isInitDialog":a.isInitDialog,"onLogin":a.onLogin,"onToken":a.onToken,"onData":a.onShopData}),a.showQrcode!==!1&&(a.wtId||a.shopId||a.sellerId)){var l=t.create('<div class="shopwt"></div>'),d=t.get("#shopExtra")||t.get("#mallLogo")||t.get(".tbsSiteInfo");d&&(t.insertAfter(l,d),n.addElement(l,"shop/head/qrcode/",{"shopId":a.shopId,"sellerId":a.sellerId,"wtId":a.wtId}))}i(r)}}},{"requires":["dom","event","shop/head/search/","shop/head/shopinfo/","shop/head/qrcode/","shop/head/main/index.css"]});
KISSY.add("shop/head/search/index",function(e,t,a,n,i){var r,o,s,l;return{"init":function(e){var a,n=this;_CTKa87f(31,"head.search.init","codetrack.init"),l=e,r=l.el,o=t.get("#mq",r),s=o.form,(l.suggestControl||function(e){e()})(function(){(a=n.getNID())&&i.build({"node":"#mq","inShopAction":n.getShopUrl()||"","inShopBtn":"#J_CurrShopBtn","autoFocus":!0,"nid":a,"time":e.time})})},"getShopUrl":function(){return l.shopUrl||t.get("#J_ShopSearchUrl")&&t.get("#J_ShopSearchUrl").value},"getNID":function(){return l.itemId?l.itemId:l.shop_config&&l.shop_config.isvStat?l.shop_config.isvStat.userId:""},"initView":function(t,a,n,i){var r=this;r.init(e.mix({"el":t},a)),i(r)}}},{"requires":["dom","event","ajax","mui/searchbar/instance/detail"]});
KISSY.add("shop/head/shopinfo/index",function(e,t,a,n,i,r){function o(t){var n="SM_368_dsr-"+a.val("#dsr-userid");e.io({"url":a.val("#dsr-url"),"dataType":"jsonp","data":{"keys":n},"cache":"false","complete":function(e){t(e&&e[n])}})}var s,l=e.version.indexOf("1.3")==-1,d=function(t,n){var r=document;return function(){var o=t.get("#popupPanel"),d=location.hostname.indexOf("tmall.com")!==-1||location.hostname.indexOf("tmall.net")!==-1;o||(o=t.create('<div id="popupPanel"></div>'),l&&(a.addClass(o,"ks-dialog-focused"),a.addClass(o,"ks-overlay-focused"),o.innerHTML='<div class="ks-dialog-content"><div class="ks-dialog-header" style="display: none"></div><div class="ks-dialog-body"></div></div></div>'),r.body.appendChild(o));var c=t.get(".J_TDialogTrigger",s),p=c.getAttribute("data-width"),u=c.getAttribute("data-height"),m=new i.Dialog({"srcNode":o,"width":p,"height":u,"closable":!1,"elStyle":{"display":"block","visibility":"hidden","position":"absolute","left":"-9999px","top":"-9999px"},"zIndex":1e8});n.on(c,"click",function(e){e.preventDefault(),a.show(o),m.hide(),m.show(),a.show(o)}),m.on("show",function(){var i=this,r=c.href+(d?"&isTmall=1":"")+"&t="+ +new Date,s='<a class="close-btn" href="javascript:void(0)"style="position: absolute; top: 5px; right: 4px; outline: none;display: block; width: 15px; height: 15px; background: url(//assets.alicdn.com/app/tc/img/close_btn.png) no-repeat; text-decoration: none; text-indent: -99999px">X</a><iframe src="'+r+'" width="'+p+'" height="'+u+'" name="popupIframe" frameborder="0" scrolling="no"></iframe>';i.set("width",p),i.set("height",u),e.version.indexOf("1.3")==-1?i.set("bodyContent",s):o.innerHTML=s,m.center(),n.on(t.get(".close-btn",o),"click",function(){a.hide(o),m.hide()}),t.hasClass(c,"collection")&&((new Image).src="//www.atpanel.com/jsclick?cache="+ +new Date+"&auc_detail=b_collect_item"),t.removeClass("#shop-info","expanded")})}}(a,n);return{"onData":o,"init":function(r){function l(e){return r.isTwView?e(null):void(r.onData||o)(function(t){return null===t&&r.onData!=o?o(e):void e(t)})}function c(e){var t=a.get("textarea.ks-datalazyload",s);return t?void p.onDatalazyload(function(a){a.textareaHandle.apply(t),e()}):e()}var p=this;_CTKa87f(31,"head.shopinfo.init","codetrack.init"),r=r||{},s=r.isTwView?a.get("#J_HdShopInfo"):a.get("#shop-info");var u,m=function(n){var r=a.get(".extra-info",s);if(e.version.indexOf("1.3")==-1){var o=a.create('<div class="ks-popup-content"></div>'),l=[];e.each(r.childNodes,function(e){l.push(e)}),e.each(l,function(e){o.appendChild(e)}),r.appendChild(o)}var d=a.get("#shopExtra"),c=a.get("#j_ExtraInfoHd",r)?430:a.width(d),p=new i.Popup({"srcNode":r,"trigger":d,"triggerType":"mouse","width":c,"zIndex":1e5,"align":{"node":d,"points":["bc","tc"],"offset":[0,1]}});p.show(),a.css(r,{"width":c,"zIndex":1e5});var u=a.get("#J_DrugCert");if(!u)return n(null);var m=a.attr(u,"data-url");t({"url":m,"type":"get","dataType":"jsonp","success":function(e){return e?(e.hasDrugSupply&&a.show(a.get(".J_DrugSupply",u)),e.hasDrugQualityManage&&a.show(a.get(".J_DrugQualityManage",u)),e.hasDrugInfoService&&a.show(a.get(".J_DrugInfoService",u)),a.show(u),void n(null)):n(null)}})},v=p.createLoader(function(t){c(function(){var n=a.get(".j_CollectBrand",s);n&&(_CTKa87f(31,"head.shopinfo.brandshow","head.shopinfo.init"),KISSY.config({"packages":{"mui/brandbar":{"debug":!0,"ignorePackageNameInUri":!0,"version":"3.0.7","path":"//g.alicdn.com/mui/brandbar/3.0.7/"},"mui/tbuser":{"debug":!0,"ignorePackageNameInUri":!0,"version":"3.0.4","path":"//g.alicdn.com/mui/tbuser/3.0.4/"}}}),e.use("mui/brandbar/brandbar",function(e,t){t.bindEl(".tm-collectBtn",{"onLogin":r.onLogin,"onToken":r.onToken,"success":function(){_CTKa87f(31,"head.shopinfo.brandsuccess","head.shopinfo.brandclick")},"error":function(){_CTKa87f(31,"head.shopinfo.branderror","head.shopinfo.brandclick")}})})),window.Light&&window.Light.light(s),l(function(n){return n&&e.isObject(n)?(e.use("shop/head/shopinfo/index.tpl,shop/head/shopinfo/dsr.tpl",function(e,t,i){var r=[{"rate":(Math.floor(10*n.m)/10).toFixed(1),"rate_title":n.m,"rate_UFB":n.m_UFB,"rate_g":n.m_g},{"rate":(Math.floor(10*n.s)/10).toFixed(1),"rate_title":n.s,"rate_UFB":n.s_UFB,"rate_g":n.s_g},{"rate":(Math.floor(10*n.c)/10).toFixed(1),"rate_title":n.c,"rate_UFB":n.c_UFB,"rate_g":n.c_g}];_CTKa87f(31,"head.shopinfo.tpl","head.shopinfo.init"),a.html(a.get(".main-info",s),t({"rates":r})),a.html(a.get(".shop-rate",s),i({"rate_link":a.val("#dsr-ratelink"),"rates":r,"isInternational":window.g_config.isInternational}))}),m(t)):m(t)})})});n.on(s,"mouseenter",function(){u&&clearTimeout(u),u=setTimeout(function(){v(function(){a.addClass(s,"expanded")})},100)}),n.on(s,"mouseleave",function(){u&&clearTimeout(u),u=setTimeout(function(){v(function(){a.removeClass(s,"expanded")},0)},100)}),r.isInitDialog!==!1&&v(function(){d()},0)},"initView":function(t,a,n,i){var r=this;r.createLoader=n.createLoader,r.onDatalazyload=n.onDatalazyload,r.init(e.mix({"el":t},a)),i(r)}}},{"requires":["io","dom","event","overlay","shop/head/shopinfo/index.css","shop/head/shopinfo/index.tpl","shop/head/shopinfo/dsr.tpl"]});
KISSY.add("shop/head/qrcode/index",function(e,t,a,n){return{"init":function(e){_CTKa87f(31,"head.qrcode.init","codetrack.init");var i,r=e.el,s=e.shopId,o=!1;if(s&&r){t.html(r,n());var l=r,d=t.get(".tm-qrcode-hpic",r);a.on(l,"mouseover",function(){i&&clearTimeout(i),i=setTimeout(function(){if(t.show(d),t.addClass(r,"expanded"),!o){o=!0;var e=encodeURIComponent("http://m.laiwang.com/market/laiwang/tmall/app-download.php?&type=shop&biz=tmall&iframe=1&mmstat=shop_head&key="+s),a="//gcodex.alicdn.com/qrcode.do?biz_code=tmallpc&content="+e+"&size=175&margin=0&logo_url="+encodeURIComponent("http://img.alicdn.com/tfs/TB1prMSRXXXXXcCXFXXXXXXXXXX-198-198.png")+"&channel_id=2703";t.get("img",d).src=a,_CTKa87f(31,"head.qrcode.load","codetrack.init")}},100)}),a.on(l,"mouseout",function(){i&&clearTimeout(i),i=setTimeout(function(){t.hide(d),t.removeClass(r,"expanded")},100)})}},"initView":function(t,a,n,i){var r=this;r.init(e.mix({"el":t},a)),i(r)}}},{"requires":["dom","event","shop/head/qrcode/index.tpl","shop/head/qrcode/index.css"]});
KISSY.add("shop/head/qrcode/index.tpl",function(a,e){var n,t=function(a){var e=this,n=e.root,t=e.buffer,l=e.scope,i=(e.runtime,e.name,e.pos,l.data,l.affix,n.nativeCommands),s=n.utils;s.callFn,s.callDataFn,s.callCommand,i.range,i.foreach,i.forin,i.each,i["with"],i["if"],i.set,i.include,i.parse,i.extend,i.block,i.macro,i["debugger"];return t.data+='<div class="shopwt-desc">\n    <div class="shopwt-title">\u624b\u673a\u901b</div>\n    <i class="shopwt-qr">&#xe602;</i>\n</div>\n<a class="slogo-triangle">\n    <i class="icon-triangle"></i>\n</a>\n<div class="tm-qrcode-hpic">\n    <img width="140"/>\n    <p class="J_QrcodeHeadText">\u626b\u4e00\u626b\uff0c\u624b\u673a\u901b\u8d77\u6765</p>\n</div>',t};return function(a){return n=n||new e(t),n&&n.render(a)||""}},{"requires":["kg/xtemplate/4.1.4/runtime"]});
KISSY.add("shop/head/shopinfo/index.tpl",function(a,e){var n,t=function(a){function e(a,e,n){a.data,a.affix;return e.data+="\u63cf \u8ff0",e}function n(a,e,n){a.data,a.affix;return e.data+="\u670d \u52a1",e}function t(a,e,n){a.data,a.affix;return e.data+="\u7269 \u6d41",e}function i(a,e,i){var r=a.data,s=a.affix;e.data+="";var l=(f=s.xindex)!==i?f:(f=r.xindex)!==i?f:a.resolveLooseUp(["xindex"]),o=l;return o=1===l,e=E.call(m,a,{"params":[o],"fn":n,"inverse":t},e),e.data+="",e}function r(a,e,n){a.data,a.affix;return e.data+="shopdsr-score-up-ctrl",e}function s(a,e,n){a.data,a.affix;return e.data+="shopdsr-score-down-ctrl",e}function l(a,e,n){a.data,a.affix;return e.data+="shopdsr-score-equal-ctrl",e}function o(a,e,n){var t=a.data,i=a.affix;e.data+="";var r=(f=i.rate_UFB)!==n?f:(f=t.rate_UFB)!==n?f:a.resolveLooseUp(["rate_UFB"]),o=r;return o=2===r,e=E.call(m,a,{"params":[o],"fn":s,"inverse":l},e),e.data+="",e}function d(a,e,n){a.data,a.affix;return e.data+='<s class="shopdsr-score-up"></s>',e}function c(a,e,n){a.data,a.affix;return e.data+='<s class="shopdsr-score-down"></s>',e}function p(a,e,n){a.data,a.affix;return e.data+='<s class="shopdsr-score-equal"></s>',e}function v(a,e,n){var t=a.data,i=a.affix;e.data+="";var r=(f=i.rate_UFB)!==n?f:(f=t.rate_UFB)!==n?f:a.resolveLooseUp(["rate_UFB"]),s=r;return s=2===r,e=E.call(m,a,{"params":[s],"fn":c,"inverse":p},e),e.data+="",e}function u(a,n,t){var s=a.data,l=a.affix;n.data+='\n    <div class="shopdsr-item">\n\n        <div class="shopdsr-title">\n\n            ',b.line=6;var c=(f=l.xindex)!==t?f:(f=s.xindex)!==t?f:a.resolveLooseUp(["xindex"]),p=c;p=0===c,n=E.call(m,a,{"params":[p],"fn":e,"inverse":i},n),n.data+='\n        </div>\n        <div class="shopdsr-score ',b.line=8;var u=(f=l.rate_UFB)!==t?f:(f=s.rate_UFB)!==t?f:a.resolveLooseUp(["rate_UFB"]),h=u;h=0===u,n=E.call(m,a,{"params":[h],"fn":r,"inverse":o},n),n.data+='">\n            <span class="shopdsr-score-con">',b.line=9;var g=(f=l.rate)!==t?f:(f=s.rate)!==t?f:a.resolveLooseUp(["rate"]);n=n.writeEscaped(g),n.data+="</span>\n            ",b.line=10;var x=(f=l.rate_UFB)!==t?f:(f=s.rate_UFB)!==t?f:a.resolveLooseUp(["rate_UFB"]),w=x;return w=0===x,n=E.call(m,a,{"params":[w],"fn":d,"inverse":v},n),n.data+="\n        </div>\n    </div>\n",n}var f,m=this,h=m.root,g=m.buffer,x=m.scope,b=(m.runtime,m.name,m.pos),w=x.data,U=x.affix,L=h.nativeCommands,y=h.utils,_=(y.callFn,y.callDataFn,y.callCommand,L.range,L.foreach,L.forin,L.each),E=(L["with"],L["if"]);L.set,L.include,L.parse,L.extend,L.block,L.macro,L["debugger"];g.data+="",b.line=1,b.line=1;var k=(f=U.rates)!==a?f:(f=w.rates)!==a?f:x.resolveLooseUp(["rates"]);return g=_.call(m,x,{"params":[k],"fn":u},g),g.data+='\n<a class="slogo-triangle"><i class="icon-triangle"></i></a>',g};return function(a){return n=n||new e(t),n&&n.render(a)||""}},{"requires":["kg/xtemplate/4.1.4/runtime"]});
KISSY.add("shop/head/shopinfo/dsr.tpl",function(a,e){var n,t=function(a){function e(a,e,n){a.data,a.affix;return e.data+="\u63cf\u8ff0\u76f8\u7b26\uff1a",e}function n(a,e,n){a.data,a.affix;return e.data+="\u670d\u52a1\u6001\u5ea6\uff1a",e}function t(a,e,n){a.data,a.affix;return e.data+="\u7269\u6d41\u670d\u52a1\uff1a",e}function i(a,e,n){var t=a.data,i=a.affix,l=(f=i.isInternational)!==n?f:(f=t.isInternational)!==n?f:a.resolveLooseUp(["isInternational"]);return l}function l(a,e,n){a.data,a.affix;return e.data+="\u8de8\u5883\u7269\u6d41\uff1a",e}function s(a,e,s){var r=a.data,o=a.affix;e.data+="";var d=(f=o.xindex)!==s?f:(f=r.xindex)!==s?f:a.resolveLooseUp(["xindex"]),c=d;return c=1===d,e=k.call(m,a,{"params":[c],"fn":n,"inverse":t,"elseIfs":[{"test":i,"fn":l}]},e),e.data+="",e}function r(a,e,n){a.data,a.affix;return e.data+='\n                <span class="no-rate" title="\u5c1a\u672a\u6536\u5230\u8bc4\u4ef7">--</span>\n            ',e}function o(a,e,n){var t=a.data,i=a.affix;e.data+='\n                    <span class="rateinfo" title="\u8ba1\u7b97\u89c4\u5219:(\u5e97\u94fa\u5f97\u5206-\u540c\u884c\u4e1a\u5e73\u5747\u5206)/(\u540c\u884c\u4e1a\u5e97\u94fa\u6700\u9ad8\u5f97\u5206-\u540c\u884c\u4e1a\u5e73\u5747\u5206)">\n                        <b></b>\n                        <i>\u9ad8\u4e8e</i>\n                        <em>',b.line=16;var l=(f=i.rate_g)!==n?f:(f=t.rate_g)!==n?f:a.resolveLooseUp(["rate_g"]);return e=e.writeEscaped(l),e.data+="%</em>\n                    </span>\n                ",e}function d(a,e,n){var t=a.data,i=a.affix;e.data+='\n                        <span class="rateinfo" title="\u8ba1\u7b97\u89c4\u5219:(\u540c\u884c\u4e1a\u5e73\u5747\u5206-\u5e97\u94fa\u5f97\u5206)/(\u540c\u884c\u4e1a\u5e73\u5747\u5206-\u540c\u884c\u4e1a\u5e97\u94fa\u6700\u4f4e\u5f97\u5206)">\n                            <b class="lower"></b>\n                            <i>\u4f4e\u4e8e</i>\n                            <em class="lower">',b.line=23;var l=(f=i.rate_g)!==n?f:(f=t.rate_g)!==n?f:a.resolveLooseUp(["rate_g"]);return e=e.writeEscaped(l),e.data+="%</em>\n                        </span>\n                    ",e}function c(a,e,n){a.data,a.affix;return e.data+='\n                        <span class="rateinfo">\n                            <b class="fair"></b>\n                            <i>\u6301\u5e73</i>\n                            <em>--------</em>\n                        </span>\n                    ',e}function p(a,e,n){var t=a.data,i=a.affix;e.data+="\n                    ",b.line=19,b.line=19;var l=(f=i.rate_UFB)!==n?f:(f=t.rate_UFB)!==n?f:a.resolveLooseUp(["rate_UFB"]),s=l;return s=2===l,e=k.call(m,a,{"params":[s],"fn":d,"inverse":c},e),e.data+="\n                ",e}function v(a,e,n){var t=a.data,i=a.affix;e.data+='\n                <em class="count" title="',b.line=11;var l=(f=i.rate_title)!==n?f:(f=t.rate_title)!==n?f:a.resolveLooseUp(["rate_title"]);e=e.writeEscaped(l),e.data+='">';var s=(f=i.rate)!==n?f:(f=t.rate)!==n?f:a.resolveLooseUp(["rate"]);e=e.writeEscaped(s),e.data+="</em>\n                ",b.line=12,b.line=12;var r=(f=i.rate_UFB)!==n?f:(f=t.rate_UFB)!==n?f:a.resolveLooseUp(["rate_UFB"]),d=r;return d=0===r,e=k.call(m,a,{"params":[d],"fn":o,"inverse":p},e),e.data+="\n            ",e}function u(a,n,t){var i=a.data,l=a.affix;n.data+="\n    <li>\n   \n        ",b.line=6;var o=(f=l.xindex)!==t?f:(f=i.xindex)!==t?f:a.resolveLooseUp(["xindex"]),d=o;d=0===o,n=k.call(m,a,{"params":[d],"fn":e,"inverse":s},n),n.data+='\n        <a target="_blank" href="',b.line=7;var c=a.resolveLoose(["rate_link"],1);n=n.writeEscaped(c),n.data+='">\n            ',b.line=8,b.line=8;var p=(f=l.rate)!==t?f:(f=i.rate)!==t?f:a.resolveLooseUp(["rate"]),u=p;return u=0===p,n=k.call(m,a,{"params":[u],"fn":r,"inverse":v},n),n.data+="\n        </a>\n    </li>\n",n}var f,m=this,h=m.root,g=m.buffer,x=m.scope,b=(m.runtime,m.name,m.pos),w=x.data,L=x.affix,U=h.nativeCommands,y=h.utils,E=(y.callFn,y.callDataFn,y.callCommand,U.range,U.foreach,U.forin,U.each),k=(U["with"],U["if"]);U.set,U.include,U.parse,U.extend,U.block,U.macro,U["debugger"];g.data+='<h4>\u5e97\u94fa\u52a8\u6001\u8bc4\u5206<span class="compare">\u4e0e\u540c\u884c\u4e1a\u76f8\u6bd4</span></h4>\n<ul class="render-byjs">\n',b.line=3;var _=(f=L.rates)!==a?f:(f=w.rates)!==a?f:x.resolveLooseUp(["rates"]);return g=E.call(m,x,{"params":[_],"fn":u},g),g.data+="\n</ul>",g};return function(a){return n=n||new e(t),n&&n.render(a)||""}},{"requires":["kg/xtemplate/4.1.4/runtime"]});