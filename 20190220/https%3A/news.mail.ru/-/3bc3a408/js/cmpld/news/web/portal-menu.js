!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/js/cmpld/",t(t.s=457)}({457:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(458);n.n(r)},458:function(e,t){!function(e,t,n){function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d";e&&(Array.isArray(e)?(new Image).src="//rs.mail.ru/bulkstat/?type="+t+"&banner_ids="+e.join(",")+"&_="+Math.random():(new Image).src="//rs.mail.ru/"+t+e+".gif?r="+Math.random())}function o(e){e&&(s=[].concat(s,[e]))}function a(){var e=[];return t.weatherNow&&(e.push({type:"button",iconCls:"portal-icon portal-icon_teaser_pogoda",text:t.weatherNow+"°",href:"//pogoda.mail.ru",attrs:{name:"clb"+i.weather}}),o(i.weather)),t.toolbarRate&&t.toolbarRate.items.map(function(t){var n=t.currency.toLowerCase();e.push({type:"button",iconCls:"portal-icon portal-icon_teaser_"+n,text:t.rate,href:t.link,attrs:{name:"clb"+i.rate[n]}}),o(i.rate[n])}),e.length&&e.push({type:"separator",alwaysVisible:!1}),e.length?{type:"group",collapsible:!1,name:"mainBlock",items:e}:null}function l(){var e=(t.toolbarAnnounce||{}).items||[];return e.length?{type:"group",collapsible:!0,name:"announceBlock",items:e.map(function(e,t){return o(i.announces[t]),{type:"button",iconCls:"portal-icon portal-icon_teaser_"+e.head_icon,text:e.head_text,href:e.head_link,attrs:i.announces[t]?{name:"clb"+i.announces[t]}:null}})}:null}function u(){var e=[t.toolbarAvatar];return e.length?{type:"group",name:"avatarBlock",items:e}:null}function c(e){return{name:"searchGroup",type:"group",collapsible:!1,items:[{type:"search",formName:"searchNews",placeholder:"Поиск материалов",name:"portalSearch",inputName:"q",autocomplete:"off",searchUrl:"/search/",method:"get",suggests:!1,inputs:t.searchInputs,width:200,expandable:e.expandable,flexible:!0,flex:1}]}}var i={weather:"17284889",rate:{usd:"17284908",eur:"17284917"},announces:["17284921","17284922","17284923"],logo:"5484965",search:"5484970",newHeader:"5488640"},s=[],p={logo:{attrs:{name:"clb"+i.logo},image:t.logoImage||"/img/logo/news/news_web.png",image_x2:t.logoImageX2||"/img/logo/news/news_web@2x.png",width:t.logoImageWidth||152,title:t.projectName,href:t.domain},toolbar:{items:function(){var n,r=a(),o=l(),i=u(),s={type:"group",name:"bannersBlock",items:[{type:"banner",slot:[e.getElementById("spring_6032").value]},{type:"banner",slot:[e.getElementById("spring_6029").value]}]},p=[];return"1"===t.countryId&&(r&&(p=p.concat(r)),o&&(p=p.concat(o),p.push({type:"spacer",alwaysVisible:!1}))),p.length?(n=c({expandable:!!o}),p=p.concat(s,i,n)):(n=c({expandable:!1}),p=p.concat(s,i,n)),p}()},submenu:{items:[{type:"group",collapsible:!0,items:function(e,n){function r(e,r){return r&&"region"===e.name?(e&&e.checked&&n.id==t.userRegion&&(r.checked=1),r.counter=e.counter,l=r):l=e,a(l)}function a(e){return o(e.counter.replace("clb","")),{name:"index"==e.name?"pic_otd":null,text:e.title,href:e.url,attrs:e.counter?{name:e.counter}:null,current:e.checked}}var l=null;return e&&e.length&&e.map(function(e){return r(e,n)})}(t.submenuItems,t.submenuRegion)},{type:"spacer",flex:1},{type:"banner",slot:[e.getElementById("spring_6030").value]}]}};n.draw(p,function(e){var a=((e||{}).toolbar||{}).itemsByName,l=(((a||{}).searchGroup||{}).itemsByName||{}).portalSearch;o(i.logo),o(i.newHeader),l&&(o(i.search),l.on("submit",function(){var e=((this.input||{}).el||{}).value,n=t.searchMaxLength;e&&(e.length>n&&(this.input.el.value=e.slice(0,n)),r(i.search,"sb"))})),n.getItems(function(){a.avatarBlock.hide()}),r(s,"imp")})}(window.document,window.portalMenu||{},window.__PM)}})});
//# sourceMappingURL=portal-menu.js.map