webpackJsonp(["loader.Typeahead"],{"/SMD":function(e,t,n){"use strict";var r=n("IfHf"),a=n("R6lU");t.__esModule=!0,t.default=void 0,n("SU+a");var o=a(n("86MP")),i=a(n("fKPv")),s=a(n("Mpbj")),c=a(n("/Btz")),u=a(n("thTC")),l=a(n("B4q1")),d=a(n("0Ynt")),p=a(n("fQFk")),f=a(n("jYKd")),h=(n("wV7v"),r(n("GiK3"))),m=a(n("MjES")),y=(a(n("5nt5")),function(e){function t(){return e.apply(this,arguments)||this}(0,o.default)(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.compact,n=e.onClick,r=e.selected,a=e.style,o=e.text,i=this._renderIcon(),c=[_.root,t&&_.compact,r&&_.selected,a],u=d.default.generate({backgroundColor:r?f.default.theme.colors.blue:"transparent",color:f.default.theme.colors[r?"white":"blue"]});return h.default.createElement(p.default,{interactiveStyles:u,onPress:n,style:c},h.default.createElement(m.default,{style:_.content},h.default.createElement(s.default,{color:r?"white":"blue",selectable:!1},o),i))},n._renderIcon=function(){var e=this.props,t=e.mode,n=e.selected,r=[_.icon,n&&_.iconSelected];switch(t){case"remove":return h.default.createElement(u.default,{style:r});case"expand":return h.default.createElement(l.default,{style:r});case"active":return h.default.createElement(c.default,{style:r});default:return null}},t}(h.PureComponent));(0,i.default)(y,"defaultProps",{compact:!1,selected:!1}),y.propTypes={};var _=f.default.create(function(e){return{root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.blue,borderRadius:e.borderRadii.infinite,borderStyle:"solid",borderWidth:"1px",minHeight:e.spaces.xLarge,paddingHorizontal:e.spaces.medium},content:{alignItems:"center",flexDirection:"row",flexGrow:1,flexWrap:"nowrap"},compact:{minHeight:e.spaces.large,paddingHorizontal:e.spaces.small},selected:{backgroundColor:e.colors.blue},icon:{color:e.colors.textBlue,marginLeft:e.spaces.xxSmall},iconSelected:{color:e.colors.white}}}),v=y;t.default=v},"2rH5":function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return l});var r=n("Dd8w"),a=n.n(r),o=n("gRE1"),i=n.n(o),s=(n("klNu"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return i()(e).reduce(function(e,n){var r=n.user_id,o=t[r]||{id_str:r};return e[r]=a()({},n,{user:o}),e},{})}),c=function(e,t){var n=t.entries;return(t.entryIdsByConversationId[e]||[]).map(function(e){return n[e]&&n[e].data}).filter(function(e){return!!e})},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=e.conversation_id,o=e.participants;return a()({},e,{entries:t.entryIdsByConversationId[r]||[],participants:s(o,n)})},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=e.conversation_id,o=e.participants;return a()({},e,{entries:c(r,t),participants:s(o,n)})}},"7c4V":function(e,t,n){"use strict";function r(e,t){var n=void 0,r=p.b.scoper.find(function(r){if(-1!==r.srcInputs.indexOf(t))return n=e.match(r.regexp)}),a=void 0;return n&&(a=n&&(1===n.length?n[0]:n[1])),r?d()({},u()(r.scope,{src:t})||{},{q:a}):null}function a(e,t){var n=t.slice(0,e),r=t.slice(e,t.length),a=n.search(p.b.WordEnd),o=a>=0?n.slice(a):"",i=r.slice(0,r.search(p.b.WordBoundary)),s=o+i;return s.trim()?{start:a,word:s}:{leftBoundary:e,rightBoundary:e,word:""}}function o(e,t,n){var r="_on"+(n||t),a="on"+t,o=function(){return e[r].apply(e,arguments)},i=function(){return(e.props.children.props[a]||function(){}).apply(void 0,arguments)};return function(){o.apply(void 0,arguments)&&i.apply(void 0,arguments)}}function i(){return"typeaheadFocus-"+Math.random()}function s(e){var t=e.altKey,n=e.ctrlKey,r=e.metaKey;return!(t||n||r)}t.c=r,t.b=a,t.e=o,t.a=i,t.d=s;var c=n("woOf"),u=n.n(c),l=n("Dd8w"),d=n.n(l),p=n("905J")},"905J":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var r=n("BC0Q"),a=n.n(r),o=500,i={scoper:[{type:"dmUserSearch",regexp:/^[@＠]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@＠](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:a.a,srcInputs:["compose"],scope:{result_type:"hashtags",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"topics,users"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-.\/:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-.\/:;<=>?[\]^{|}~\s]+$/}},"98Tz":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Dd8w"),a=n.n(r),o=n("Zx67"),i=n.n(o),s=n("Zrlr"),c=n.n(s),u=n("wxAW"),l=n.n(u),d=n("zwoO"),p=n.n(d),f=n("Pf15"),h=n.n(f),m=n("GiK3"),y=n("Ooal"),_=n("4n+p"),v=n("7t5w"),g={addQuery:y.a,scribeAction:v.d},b=Object(_.connect)(null,g),S=n("bgPG"),I=n("plj8"),w=n.n(I),E=n("XMIr"),x=n("zEXV"),R=n("C3D3"),D=n("WgQH"),C=n("DTUu"),O=n.n(C),k=n("9w+k"),T=n("sLaq"),A=n("bndy"),N=n("zAiL"),F=n("RqKo"),P=n.n(F),j=n("Dica"),U=n("d39v"),M=Object(A.createSelector)(y.g,j.b.selectFetchStatuses,function(e,t){var n=e.map(function(e){return e.user}).filter(Boolean).map(function(e){return e.id});return P()(n.map(function(e){return{id:e,fetchStatus:t[e]}}),function(e){return e.fetchStatus})}),L=function(e){return Object(U.c)(e,U.a.GenericUserNotFound)||Object(U.c)(e,U.a.OtherUserSuspended)||Object(U.c)(e,U.a.AddressBookLookupNotFound)},q=Object(A.createSelector)(M,function(e){return(e[N.a.FAILED]||[]).map(function(e){return e.id})}),G=Object(A.createSelector)(M,j.b.selectErrors,function(e,t){return(e[N.a.FAILED]||[]).filter(function(e){var n=e.id;return L(t[n]||{})}).map(function(e){return e.id})}),B=Object(A.createSelector)(M,j.b.selectErrors,function(e,t){var n=(e[N.a.FAILED]||[]).filter(function(e){var n=e.id;return!L(t[n]||{})});return(e[N.a.LOADING]||[]).length>0?N.a.LOADING:(e[N.a.LOADED]||[]).length>0?N.a.LOADED:n.length>0?N.a.FAILED:N.a.NONE}),W={clearAll:y.b,createLocalApiErrorHandler:Object(T.b)("RECENT_SEARCH_ONE_CLICK"),fetchRecentSearchesIfNeeded:y.c,fetchUsersIfNeeded:j.b.fetchManyIfNeeded,removeQuery:y.d,scribeAction:v.d},H=Object(A.createSelector)(y.e,y.g,B,G,q,function(e,t,n,r,a){var o=!t.filter(function(e){var t=e.user;return t&&r.indexOf(t.id)<0}).length,i=n!==N.a.LOADING&&e&&o?N.a.LOADED:n;return{failedUserIds:a,invalidUserIds:r,isLoaded:e,items:t,fetchStatus:i}}),K=Object(_.connect)(H,W),V=n("Y2tT"),Q=n("Z7Ww"),z=n("O27J"),Y=n.n(z),Z=n("thTC"),X=n.n(Z),J=n("OCMv"),$=n.n(J),ee=n("kOX1"),te=n("2fO2"),ne=n("MjES"),re=n.n(ne),ae=n("Mpbj"),oe=n.n(ae),ie=n("fF1d"),se=n.n(ie),ce=n("jYKd"),ue=n.n(ce),le=n("4dTx"),de=n.n(le),pe=m.createElement(X.a,null),fe=function(e){function t(){return c()(this,t),p()(this,(t.__proto__||i()(t)).apply(this,arguments))}return h()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.query,n=e.onRemove;return m.createElement(Q.a,{style:he.root,withGutter:!0},m.createElement(re.a,{style:he.avatarColumn},m.createElement($.a,{style:{color:de.a.colors.deepGray}})),m.createElement(re.a,{style:he.bodyColumn},m.createElement(oe.a,{numberOfLines:1},m.createElement(te.a,{allowHashflags:!0,text:t}))),m.createElement(se.a,{icon:pe,onPress:n,size:"small",type:"text"}))}},{key:"recentSearchData",get:function(){return{query:this.props.query,type:ee.a.Keyword}}}]),t}(m.Component),he=ue.a.create(function(e){return{root:{alignItems:"center"},avatarColumn:{flexGrow:1,justifyContent:"flex-start",minWidth:32,maxWidth:e.spaces.xxLarge},bodyColumn:{flexGrow:7,justifyContent:"center"}}}),me=fe,ye=function(e,t){return j.b.select(e,t.id)},_e=Object(A.createSelector)(ye,function(e){return{user:e}}),ve=Object(_.connect)(_e,null),ge=n("LUfA"),be=n("GWs/"),Se=n("X+aW"),Ie=n.n(Se),we=m.createElement(X.a,null),Ee=function(e){function t(){return c()(this,t),p()(this,(t.__proto__||i()(t)).apply(this,arguments))}return h()(t,e),l()(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.onRef;e&&e(this)}},{key:"componentWillUnmount",value:function(){var e=this.props.onRef;e&&e(void 0)}},{key:"componentDidUpdate",value:function(e){var t=this.props.onRef;e.onRef&&e.onRef!==t&&e.onRef(void 0),t&&t!==e.onRef&&t(this)}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.onRemove;if(!t)return null;var r=t.name&&!Object(ge.a)(t.name);return m.createElement(Q.a,{style:xe.root,withGutter:!0},m.createElement(re.a,{style:xe.avatarColumn},m.createElement(be.default,{importantForAccessibility:"no-hide-descendants",style:xe.avatar,uri:t.profile_image_url_https,userName:t.name})),m.createElement(re.a,{style:xe.bodyColumn},m.createElement(re.a,{style:xe.body},m.createElement(re.a,{style:xe.userNames},m.createElement(re.a,{style:xe.name},m.createElement(oe.a,{numberOfLines:1,style:xe.displayName,weight:"bold"},r?m.createElement(te.a,{text:t.name}):"@"+t.screen_name),m.createElement(re.a,{style:xe.userBadges},m.createElement(Ie.a,{isProtected:t.protected,isVerified:t.verified}))),m.createElement(re.a,{style:xe.screenNameContainer},m.createElement(oe.a,{color:"deepGray",dir:"ltr",style:xe.screenName},"@"+t.screen_name))))),m.createElement(se.a,{icon:we,onPress:n,size:"small",type:"text"}))}},{key:"recentSearchData",get:function(){return this.props.user?{link:this.props.user.screen_name,query:this.props.id,type:ee.a.User}:null}}]),t}(m.Component),xe=ue.a.create(function(e){return{root:{alignItems:"center"},avatarColumn:{flexGrow:1,justifyContent:"flex-start",minWidth:32,maxWidth:e.spaces.xxLarge},bodyColumn:{flexGrow:7,justifyContent:"center"},closeIcon:{alignItems:"flex-end",flexGrow:1,justifyContent:"center"},avatar:{display:"block",width:"100%"},body:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},userNames:{display:"inline",direction:"ltr",flexShrink:1,maxWidth:"100%"},name:{flexDirection:"row",maxWidth:"100%"},displayName:{whiteSpace:"nowrap"},screenNameContainer:{flexDirection:"row",alignItems:"center",flexShrink:1},screenName:{flexDirection:"row"},userBadges:{flexDirection:"row",flexShrink:0}}}),Re=ve(Ee),De=function(e){function t(){var e,n,r,a;c()(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return n=r=p()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(s))),r._renderSearchItem=function(){var e=r.props.item;return e.keyword?m.createElement(me,{onRemove:r._handleOnRemove,query:e.keyword.query,ref:r._handleItemRef}):e.user?m.createElement(Re,{id:e.user.id||"",onRef:r._handleItemRef,onRemove:r._handleOnRemove}):null},r._handleItemRef=function(e){r._itemRef=e},r._handleOnRemove=function(e){var t=r.props;(0,t.onRemoveQuery)(t.item,t.index),e.stopPropagation()},r._handleOnClick=function(){var e=r.props,t=e.onItemClick,n=e.index;r.recentSearchData&&t(r.recentSearchData,n)},r._handleMouseOver=function(){var e=r.props,t=e.index;(0,e.onMouseOver)(t)},a=n,p()(r,a)}return h()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.props.onRef&&this.props.onRef(this)}},{key:"componentWillUnmount",value:function(){this.props.onRef&&this.props.onRef(void 0)}},{key:"componentDidUpdate",value:function(e){var t=this.props.onRef;t&&t!==e.onRef&&t(this)}},{key:"render",value:function(){var e=this.props.domId;return m.createElement(re.a,{accessibilityRole:"option",accessible:!0,"aria-selected":!!e,nativeID:e,onClick:this._handleOnClick,onMouseOver:this._handleMouseOver,style:[Ce.root,e&&Ce.focused]},this._renderSearchItem())}},{key:"recentSearchData",get:function(){return this._itemRef&&this._itemRef.recentSearchData}}]),t}(m.Component),Ce=ue.a.create(function(e){return{root:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:1,cursor:"pointer",paddingHorizontal:e.spaces.xSmall,paddingVertical:e.spaces.small},disabled:{backgroundColor:e.colors.faintGray},focused:{backgroundColor:e.colors.faintGray}}}),Oe=De,ke=n("o5RB"),Te=w.a.fb55413d,Ae=w.a.a280e2df,Ne=w.a.h0c3f102,Fe=15,Pe=w.a.f7f1f584,je={element:"recent"},Ue=function(e){return e.map(function(e){return e.user}).filter(Boolean).map(function(e){return e.id})},Me=function(e){function t(e){c()(this,t);var n=p()(this,(t.__proto__||i()(t)).call(this,e));return n._getDisplayItems=function(){var e=n.props,t=e.failedUserIds,r=e.items,a=r.filter(function(e){var n=e.user;return!n||t.indexOf(n.id)<0});return a.length>Fe?a.slice(0,Fe):a},n._render=function(){var e=n.props.domId,t=n._getDisplayItems();return 0===t.length?m.createElement(re.a,{style:[Le.emptyState]},m.createElement(oe.a,{align:"center",color:"deepGray"},Te)):m.createElement(re.a,null,m.createElement(re.a,{style:Le.header},m.createElement(Q.a,{style:Le.headerGrid,withGutter:!0},m.createElement(re.a,{style:Le.bodyColumn},m.createElement(oe.a,{numberOfLines:1,size:"large",weight:"bold"},Ae)),m.createElement(re.a,{style:Le.clearColumn},m.createElement(se.a,{onPress:n._handleOnClick,size:"small",type:"text"},m.createElement(oe.a,{numberOfLines:1},Ne))))),m.createElement(re.a,{accessibilityRole:"listbox",nativeID:e},t.map(function(e,t){return n._renderRecentSearchItem(e,t)})))},n._handleUsersRetry=function(){n._fetchUsersIfNeeded()},n._handleOnClick=function(){n.setState({shouldShowConfirmationSheet:!0})},n._handleRemoveQuery=function(e,t){var r=n.props,o=r.removeQuery,i=r.scribeAction,s=r.scribeNamespace;o(e),n._resetFocus();var c=D.a.forRecentSearchResult(e,t),u=e.user?"clear_user":"clear_topic";c&&i(a()({},s,{action:u}),{items:[c]})},n._handleOnConfirm=function(){var e=n.props,t=e.scribeAction,r=e.scribeNamespace;n.props.clearAll(),t(a()({},r,{action:"clear_all"})),n.setState({shouldShowConfirmationSheet:!1})},n._handleOnCancel=function(){n.setState({shouldShowConfirmationSheet:!1})},n._renderRecentSearchItem=function(e,t){var r=n.props.ariaDescendantId,a=n.state.focusIndex===t,o=e.keyword?"keyword_"+e.keyword.query:e.user?"user_"+e.user.id:""+t;return m.createElement(Oe,{domId:a?r:void 0,index:t,item:e,key:o,onItemClick:n._handleOnItemClick,onMouseOver:n._handleItemHover,onRemoveQuery:n._handleRemoveQuery,ref:a?n._setFocusedItemRef:void 0})},n._handleOnItemClick=function(e,t){var r=n.props,a=r.onDismiss;(0,r.onItemClick)(e,t),n._scribeClick(e,t),a&&a()},n._setFocusedItemRef=function(e){n._focusedItemRef=e,n._shouldScrollToFocusedItem&&(Object(ke.c)(n._getScrollParent(),n._getFocusedItem()),n._shouldScrollToFocusedItem=!1)},n.hasFocusedItem=function(){return n._getDisplayItems().length>0},n.selectFocusedItem=function(){if(n.hasFocusedItem()){var e=n._focusedItemRef&&n._focusedItemRef.recentSearchData;e&&n._handleOnItemClick(e,n.state.focusIndex)}},n._scribeResults=function(){var e=n.props,t=e.items,r=e.scribeAction,o=e.scribeNamespace,i=O()(t.map(function(e,t){return D.a.forRecentSearchResult(e,t)}));r(a()({},o,{action:"results"}),{items:i})},n._scribeClick=function(e,t){var r=n.props,o=r.scribeAction,i=r.scribeNamespace,s=void 0,c=void 0;switch(e.type){case ee.a.User:s={user:{type:ee.a.User,id:e.query}},c="profile_click";break;case ee.a.Keyword:s={keyword:{type:ee.a.Keyword,query:e.query}},c="search"}var u=s&&D.a.forRecentSearchResult(s,t);u&&o(a()({},i,{action:c}),{items:[u]})},n._setFocusIndex=function(e,t){var r=n.props.onItemFocusChanged;n._shouldScrollToFocusedItem=t,n.setState({focusIndex:e}),r&&r()},n._handleItemHover=function(e){n._setFocusIndex(e)},n._resetFocus=function(){n._setFocusIndex(0)},n.focusNext=function(){var e=n.state.focusIndex,t=n.props.items,r=t.length;if(0!==r){var a=e+1>=r?0:e+1;n._setFocusIndex(a,!0)}},n.focusPrevious=function(){var e=n.state.focusIndex,t=n.props.items,r=t.length;if(0!==r){var a=e-1<0?r-1:e-1;n._setFocusIndex(a,!0)}},n._fetchUsersIfNeeded=function(){var e=n.props,t=e.fetchUsersIfNeeded,r=e.createLocalApiErrorHandler,a=e.items,o=e.invalidUserIds;t(Ue(a).filter(function(e){return o.indexOf(e)<0})).catch(function(){r()})},n.state={focusIndex:0,shouldShowConfirmationSheet:!1},n}return h()(t,e),l()(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.fetchRecentSearchesIfNeeded,n=e.onRef;n&&n(this),t(),this._fetchUsersIfNeeded()}},{key:"componentDidMount",value:function(){var e=this.props.items;e&&e.length&&(this._scribeResults(),this._resetFocus())}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.items,r=t.onRef;e.items!==n&&(this._fetchUsersIfNeeded(),this._resetFocus(),n&&n.length&&this._scribeResults()),e.onRef&&e.onRef!==r&&e.onRef(void 0),r&&r!==e.onRef&&r(this)}},{key:"componentWillUnmount",value:function(){this.props.onRef&&this.props.onRef(void 0)}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.fetchStatus;return m.createElement(re.a,{style:t},m.createElement(V.a,{fetchStatus:n,onRequestRetry:this._handleUsersRetry,render:this._render}),this.state.shouldShowConfirmationSheet?m.createElement(k.a,{onCancel:this._handleOnCancel,onConfirm:this._handleOnConfirm,text:Pe}):null)}},{key:"_getScrollParent",value:function(){if(!this._scrollParent){var e=Object(ke.a)(Y.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}},{key:"_getFocusedItem",value:function(){var e=this._focusedItemRef&&Y.a.findDOMNode(this._focusedItemRef);return e instanceof Element?e:null}}]),t}(m.Component),Le=ue.a.create(function(e){return{emptyState:{padding:e.spaces.xSmall,paddingTop:e.spaces.medium},bodyColumn:{flexGrow:7,justifyContent:"center"},clearColumn:{alignItems:"flex-end"},header:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:1,padding:e.spaces.xSmall,paddingTop:e.spaces.medium}}}),qe=Object(S.b)(je)(K(Me)),Ge={searchBox:"searchBox"},Be=n("R8Av"),We=n("F8kA"),He=n("6PFH");n.d(t,"SearchBoxContainer",function(){return Je});var Ke=w.a.f2b908ed,Ve=w.a.ad7f8447,Qe=w.a.j7de856a,ze={component:"search_box"},Ye=/^(\w+)$/,Ze=[He.a.Events,He.a.Users,He.a.Topics],Xe=function(e){return"@"===e[0]?e.substring(1):e},Je=function(e){function t(e,n){c()(this,t);var r=p()(this,(t.__proto__||i()(t)).call(this,e,n));return $e.call(r),r.state={query:e.initialValue,querySubmitted:!0},r}return h()(t,e),l()(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.location,n=e.shouldHandleSearchShortcut,r=t.state||{},a=r.searchFocused;this._autoFocus=!!a,n&&(this._unregisterSearchShortcutHandler=E.a.registerSearchShortcutHandler(this._handleSearchShortcut))}},{key:"componentWillUnmount",value:function(){this._unregisterSearchShortcutHandler&&this._unregisterSearchShortcutHandler()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.initialValue!==e.initialValue&&this.setState({query:e.initialValue,querySubmitted:!0})}},{key:"UNSAFE_componentWillUpdate",value:function(){var e=this.props,t=e.history,n=e.initialValue,r=t.location,a=r.state||{},o=a.searchFocused,i=this.state,s=i.query,c=i.querySubmitted;o||s===n||c||this.setState({query:n,querySubmitted:!0})}},{key:"render",value:function(){var e=this.props,t=e.withTypeahead,n=e.location,r=e.placeholder,a=this.state.query,o=n.state||{},i=o.searchPrefill,s=this.props.initialValue||i;return m.createElement(re.a,{style:et.root},m.createElement(Be.default,{filter:Ze,getTopicExactMatch:t&&a?this._getTopicExactMatch:void 0,getUserExactMatch:t&&a?this._getUserExactMatch:void 0,initialValue:s,inputStyle:et.input,onDismiss:this._handleOnDismiss,onFocus:this._handleOnFocus,onItemClick:this._handleItemClick,onQueryChange:this._handleChange,onSubmit:this._handleTypeaheadSubmit,placeholder:r,ref:this._setInputRef,renderEmptyState:this._renderSearchBoxEmptyState,rounded:!0,shouldAutoFocus:this._autoFocus,shouldClearOnSelect:!0,shouldDeferPrefetch:!0,source:He.c.SearchBox,testID:Ge.searchBox,withFixedPositioning:!0,withFocusStyling:!0,withTypeahead:t}))}}]),t}(m.Component);Je.defaultProps={initialValue:"",placeholder:Ke,searchRoute:"/search",withRecentSearch:!0,withTypeahead:!0};var $e=function(){var e=this;this._renderSearchBoxEmptyState=function(t){return m.createElement(qe,a()({},t,{onItemClick:e._handleRecentSearchItemClick}))},this._handleRecentSearchItemClick=function(t){var n=t.link,r=t.query,a=t.type,o=e.props.addQuery;a===ee.a.Keyword?e._submitQuery({query:r,shouldAddToRecentSearch:!0,src:R.a.RecentSearchClick}):n&&(e._routeTransition({pathname:"/"+n}),o({user:{id:r,type:ee.a.User}}))},this._handleSearchShortcut=function(t){var n=e._inputRef;n&&(t&&n.setQuery(t),n.focus())},this._getTopicExactMatch=function(e){var t=e.query,n=e.hasResults,r=e.isLoaded;return n||!r?void 0:{id:t+"_no_result_topic",type:He.b.NoResult,data:{text:Ve({query:t}),type:"topic"}}},this._getUserExactMatch=function(e){var t=e.query,n=(e.hasResults,e.isLoaded,Xe(t));if(n.match(Ye))return{id:t+"_no_result_user",type:He.b.NoResult,data:{text:Qe({screenName:n}),type:"user"}}},this._handleOnDismiss=function(){var t=e.props.history,n=t.location,r=n.state||{};if(r.searchFocused){var o=a()({},n,{state:a()({},r,{lockScroll:!1,searchFocused:!1})});t.replace(o)}},this._handleOnFocus=function(){var t=e.props.history,n=t.location,r=n.state||{};if(!r.searchFocused){var o=a()({},n,{state:a()({},r,{searchFocused:!0,lockScroll:!0})});t.push(o)}},this._handleChange=function(t){e.setState({query:t,querySubmitted:!1})},this._handleTypeaheadSubmit=function(t){var n=e.state.query;/^\s*$/.test(n)||e._submitQuery({query:n,shouldAddToRecentSearch:!0})},this._handleItemClick=function(t,n){var r=e.props,o=r.addQuery,i=r.scribeAction,s=r.scribeNamespace,c=r.withRecentSearch,u=e.state.query;switch(t.type){case He.b.User:if(t.data.id_str&&c){o({user:{id:t.data.id_str,type:ee.a.User}})}e._routeTransition({pathname:"/"+t.data.screen_name}),i(a()({},s,{element:"typeahead",action:"profile_click"}),{items:[D.a.forTypeaheadResult(t,n,u)]});break;case He.b.Topic:case He.b.Hashtag:e._submitQuery({query:t.data.topic,shouldAddToRecentSearch:!0,src:R.a.TypeaheadClick}),i(a()({},s,{element:"typeahead",action:"search"}),{items:[D.a.forTypeaheadResult(t,n,u)]});break;case He.b.Event:t.data&&t.data.url?(e._routeTransition({pathname:x.b.parseInternalUrl(t.data.url)}),i(a()({},s,{element:"typeahead",action:"event_click"}),{items:[D.a.forTypeaheadResult(t,n,u)]})):(e._submitQuery({query:t.data.topic,src:R.a.TypeaheadClick}),i(a()({},s,{element:"typeahead",action:"search"}),{items:[D.a.forTypeaheadResult(t,n,u)]}));break;case He.b.NoResult:var l=t.data.type;"user"===l?e._routeTransition({pathname:"/"+Xe(u)}):"topic"===l&&e._submitQuery({query:u,shouldAddToRecentSearch:!0,src:R.a.TypeaheadClick})}},this._routeTransition=function(t){var n=t.pathname,r=t.query,o=t.params,i=t.src,s=e.props,c=s.history,u=s.location,l=a()({},u,{pathname:n,search:"",query:o||(r?{q:r,src:i}:{}),state:a()({},u.state,{searchFocused:!1,lockScroll:!1})});c.replace(l)},this._submitQuery=function(t){var n=t.query,r=t.shouldAddToRecentSearch,a=void 0!==r&&r,o=t.src,i=void 0===o?R.a.Typed:o,s=e.props,c=s.addQuery,u=s.filter,l=s.qualityFilter,d=s.onSubmit,p=s.searchRoute,f=s.withRecentSearch;if(d&&d(n,i),a&&f){c({keyword:{query:n,type:ee.a.Keyword}})}var h=Object(ee.d)({query:n,querySrc:i,filter:u,qualityFilter:l});e._routeTransition({pathname:p,params:h,src:i}),e.setState({querySubmitted:!0})},this._setInputRef=function(t){e._inputRef=t}},et=ue.a.create(function(e){return{root:{alignItems:"stretch",flexBasis:0,flexDirection:"row",flexGrow:1},input:{flexShrink:1}}});t.default=Object(We.withRouter)(Object(S.b)(ze)(b(Je)))},ADUO:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return o});var r={ONE_TO_ONE:"ONE_TO_ONE",GROUP:"GROUP_DM"},a={AT_END:"AT_END",HAS_MORE:"HAS_MORE"},o={CONVERSATION_AVATAR_UPDATE:"conversation_avatar_update",CONVERSATION_NAME_UPDATE:"conversation_name_update",CONVERSATION_READ:"conversation_read",DISABLE_NOTIFICATIONS:"disable_notifications",ENABLE_NOTIFICATIONS:"enable_notifications",JOIN_CONVERSATION:"join_conversation",MARK_ALL_AS_READ:"mark_all_as_read",MENTION_NOTIFICATIONS_UPDATE:"mention_notifications_setting_update",MESSAGE:"message",MESSAGE_DELETE:"message_delete",MESSAGE_MARK_AS_NOT_SPAM:"message_unmark_as_spam",MESSAGE_MARK_AS_SPAM:"message_mark_as_spam",PARTICIPANTS_JOIN:"participants_join",PARTICIPANTS_LEAVE:"participants_leave",REMOVE_CONVERSATION:"remove_conversation",TRUST_CONVERSATION:"trust_conversation",WELCOME_MESSAGE:"welcome_message_create"}},B4q1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=void 0,n("n12u");var a=r(n("x5lS")),o=r(n("GiK3")),i=r(n("sT3W")),s=function(e){return void 0===e&&(e={}),(0,a.default)("svg",Object.assign({},e,{style:[i.default.root,e.style],viewBox:"0 0 24 24"}),o.default.createElement("g",null,o.default.createElement("path",{d:"M19.75 11H13V4.25a1 1 0 1 0-2 0V11H4.25a1 1 0 1 0 0 2H11v6.75a1 1 0 1 0 2 0V13h6.75a1 1 0 1 0 0-2z"})))};s.metadata={height:24,width:24};var c=s;t.default=c},BNgD:function(e,t,n){"use strict";var r=n("7nRM"),a=n.n(r),o=n("fZjL"),i=n.n(o),s=n("ADUO"),c=n("sqR6"),u=n("plj8"),l=n.n(u),d=s.a.GROUP,p=l.a.f99851d2,f=l.a.d41c718e,h=l.a.cab8984c,m=l.a.a559663d;t.a=function(e,t){var n=e.type,r=e.name,a=e.participants,o=void 0===a?{}:a;if(n===d&&r)return r;if(!i()(o).length)return null;var s=Object(c.a)(e,t);return y(s,t,n)};var y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d,r=e.map(function(e){return e.user}),o=r.filter(function(e){return e.id_str!==t}),i=a()(o),s=i[0],c=i.slice(1);switch(o.length){case 0:return p;case 1:return n===d?f({name:s.name}):s.name;case 2:return h({name1:s.name,name2:c[0].name});default:return m({name:s.name,count:c.length})}}},DHBN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"GenericTypeaheadComposeWrapper",function(){return F});var r=n("Dd8w"),a=n.n(r),o=n("Zx67"),i=n.n(o),s=n("Zrlr"),c=n.n(s),u=n("wxAW"),l=n.n(u),d=n("zwoO"),p=n.n(d),f=n("Pf15"),h=n.n(f),m=n("GiK3"),y=(n.n(m),n("7c4V")),_=n("KSGD"),v=(n.n(_),n("slmD")),g=n("O27J"),b=n.n(g),S=n("cxKw"),I=n("MjES"),w=n.n(I),E=n("5Izc"),x=n.n(E),R=n("Y+mP"),D=n.n(R),C=n("jYKd"),O=n.n(C),k=n("6PFH"),T=[k.a.Users],A=[k.a.Topics],N=50,F=function(e){function t(e,n){c()(this,t);var r=p()(this,(t.__proto__||i()(t)).call(this,e,n));return r._typeaheadActive=!1,r._renderTypeaheadDropdown=function(e){var t=r.props.onSelectItem,n=r.context.isModal,a=m.createElement(S.a,{ariaDescendantId:r.state.ariaDescendantId,filter:r._getFilter(e.resultType),maxTopics:8,onItemClick:t,onItemFocusChanged:r._handleItemFocusChanged,onRef:r._handleTypeaheadRef,query:e.word,source:k.c.Compose,style:r._calcStyle(),withItemAlwaysSelected:!0});return n?m.createElement(D.a.HalfSheet,null,m.createElement(m.Fragment,null,m.createElement(w.a,{onClick:r._handleDismiss,style:P.mask}),a)):m.createElement(m.Fragment,null,m.createElement(w.a,{onClick:r._handleDismiss,style:P.mask}),a)},r.render=function(){var e=r.props,t=e.children,n=e.query,a=m.cloneElement(t,{onChange:y.e(r,"Change","InputChange"),ref:function(e){r._textInputNode=b.a.findDOMNode(e),r._textInputRef=e;var n=t.ref;n&&n(e)}});return m.createElement(w.a,{style:P.inputContainer},m.createElement(x.a,{onKeyDown:r._handleKeyDown},a,r._textInputNode&&n?r._renderTypeaheadDropdown(n):null))},r._getFilter=function(e){return"users"===e?T:A},r._calcStyle=function(){var e=r.context.isModal,t=r._textInputNode,n=window.innerHeight;if(t instanceof window.HTMLElement){var a=t.getBoundingClientRect();return e?[r._getDropdownPositioningStyle(n,a.top,a.bottom,a.left),P.dropdownStyle]:[r._getInlinePositioningStyle(a.height),P.inlineStyle]}return[r._getDropdownPositioningStyle(n,0,0,0),P.dropdownStyle]},r._handleKeyDown=function(e){var t=r.state.selectedItem,n=r.props,a=n.onSelectItem,o=n.query,i=e.key;y.d(e)&&o&&("ArrowDown"===i?(r._typeaheadRef&&r._typeaheadRef.focusNext(),e.preventDefault()):"ArrowUp"===i?(r._typeaheadRef&&r._typeaheadRef.focusPrevious(),e.preventDefault()):"Enter"===i||"Tab"===i?t&&(a(t),e.preventDefault()):"Escape"===i&&(r._handleDismiss(),e.preventDefault()))},r._handleItemFocusChanged=function(e){return r.setState({ariaDescendantId:y.a(),selectedItem:e})},r._handleTypeaheadRef=function(e){r._typeaheadRef=e},r._handleDismiss=function(){r._textInputRef&&r._textInputRef.focus(),r.props.onDismiss()},r._onInputChange=function(e){return r.setState({selectedItem:void 0}),r.props.onInputChange(e)},r._getDropdownHeight=Object(v.a)(function(e,t){var n=e*N/100;return n>t?t:n}),r._getDropdownPositioningStyle=Object(v.a)(function(e,t,n,a){var o=e-n,i=t,s=i>o,c=o/e<N/100;return c&&s?{bottom:(e-t||0)+"px",left:(a||0)+"px",maxHeight:r._getDropdownHeight(e,i-10)+"px"}:{top:(n||0)+"px",left:(a||0)+"px",maxHeight:r._getDropdownHeight(e,o-10)+"px"}}),r._getInlinePositioningStyle=Object(v.a)(function(e){return{position:"absolute",top:(e||0)+"px",overflowX:"hidden",overflowY:"auto"}}),r.state={ariaDescendantId:y.a()},r}return h()(t,e),l()(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.onTypeaheadStateChange,n=e.query,r=!(!this._textInputNode||!n);r!==this._typeaheadActive&&(this._typeaheadActive=r,t&&t(r))}}]),t}(m.Component);F.contextTypes={isModal:_.bool};var P=O.a.create(function(e){return{dropdownStyle:{backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.medium,boxShadow:e.boxShadows.medium,minHeight:100,minWidth:"300px",position:"fixed",overflowX:"hidden",overflowY:"auto"},mask:a()({},O.a.absoluteFillObject,{position:"fixed"}),inlineStyle:{backgroundColor:e.colors.cellBackground,right:0,left:0,borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:"1px",marginTop:e.spaces.xSmall,minHeight:100},inputContainer:{flexGrow:1,position:"static",width:"100%",zIndex:1}}});t.default=F},L0dd:function(e,t,n){"use strict";var r=n("d7EF"),a=n.n(r),o=n("Mpbj"),i=n.n(o),s=n("ADUO"),c=n("BNgD"),u=n("sqR6"),l=n("GiK3"),d=n.n(l),p=n("2fO2"),f=(n("uwYN"),n("hUoQ")),h=n("KSGD"),m=(n.n(h),function(e){var t=e.conversation,n=e.perspective,r=e.titleWeight,o=void 0===r?"bold":r,l=e.withScreenName;if(t.type===s.a.ONE_TO_ONE){var h=Object(u.a)(t,n).map(function(e){return e.user}),m=a()(h,1),y=m[0];return d.a.createElement(f.a,{badgeContext:"content",isProtected:y.protected,isVerified:y.verified,name:y.name,screenName:y.screen_name,translatorType:y.translator_type,weight:o,withLink:!1,withScreenName:l})}return d.a.createElement(i.a,{numberOfLines:1,weight:o},d.a.createElement(p.a,{text:Object(c.a)(t,n)}))});m.defaultProps={withScreenName:!0},t.a=m},OCMv:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=void 0,n("n12u");var a=r(n("x5lS")),o=r(n("GiK3")),i=r(n("sT3W")),s=function(e){return void 0===e&&(e={}),(0,a.default)("svg",Object.assign({},e,{style:[i.default.root,e.style],viewBox:"0 0 20.5 20.5"}),o.default.createElement("g",null,o.default.createElement("path",{d:"M20.03 18.72l-3.66-3.66a8.98 8.98 0 0 0 2.13-5.81 9 9 0 1 0-9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66a.746.746 0 0 0 1.06 0 .747.747 0 0 0 .002-1.06zM2 9.25c0-4.135 3.365-7.5 7.5-7.5S17 5.115 17 9.25s-3.365 7.5-7.5 7.5S2 13.385 2 9.25z"})))};s.metadata={height:20.5,width:20.5};var c=s;t.default=c},Ooal:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1];switch(t.type){case E:var n=t.payload,r=n?f(n,e.recentSearches):[];return r.length>49&&r.splice(49,1),n&&r.unshift(n),s()({},e,{recentSearches:r});case b:var a=t.payload,o=a?f(a,e.recentSearches):[];return s()({},e,{recentSearches:o});case I:return{fetched:!0,recentSearches:[]};case v:return s()({},e,t.payload,{fetched:!0});default:return e}}n.d(t,"g",function(){return m}),n.d(t,"f",function(){return y}),n.d(t,"e",function(){return _}),n.d(t,"d",function(){return S}),n.d(t,"b",function(){return w}),n.d(t,"a",function(){return x}),n.d(t,"c",function(){return D});var a=n("bOdI"),o=n.n(a),i=n("Dd8w"),s=n.n(i),c=n("//Fk"),u=n.n(c),l=(n("kOX1"),n("ipg4")),d=n("y7g/"),p=function(e){return function(t,n,r){return r.persistence.set("rweb.recentSearches",{recentSearches:e}).catch(function(){u.a.resolve()})}},f=function(e,t){var n=[];if(e&&e.user){var r=e.user;n=t.filter(function(e){return e.keyword||e.user&&e.user.id!==r.id})}else if(e&&e.keyword){var a=e.keyword;n=t.filter(function(e){return e.keyword&&e.keyword.query!==a.query||e.user})}return n},h={fetched:!1,recentSearches:[]};l.a.register(o()({},"recentSearches",r));var m=function(e){return e.recentSearches.recentSearches},y=function(e){return m(e)[0]||null},_=function(e){return e.recentSearches.fetched},v="rweb/recentSearches/INIT_FROM_CACHE",g=function(e){return{type:v,payload:e}},b="rweb/recentSearches/REMOVE_QUERY",S=function(e){return function(t,n,r){r.persistence;t({payload:e,type:b});var a=n().recentSearches;return Object(d.f)(n())?t(p(a.recentSearches)):u.a.resolve()}},I="rweb/recentSearches/CLEAR_ALL",w=function(){return function(e,t,n){n.persistence;e({type:I});var r=t().recentSearches;return Object(d.f)(t())?e(p(r.recentSearches)):u.a.resolve()}},E="rweb/recentSearches/ADD_QUERY",x=function(e){return function(t,n,r){r.persistence;t({payload:e,type:E});var a=n().recentSearches;return Object(d.f)(n())?t(p(a.recentSearches)):u.a.resolve()}},R=function(){return function(e,t,n){var r=n.persistence,a=t();return Object(d.f)(a)?r.get("rweb.recentSearches").then(function(t){e(g(t))}).catch(function(){e(g())}):(e(g()),u.a.resolve())}},D=function(){return function(e,t,n){n.persistence;return t().recentSearches.fetched?u.a.resolve():e(R())}}},R8Av:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Zx67"),a=n.n(r),o=n("Zrlr"),i=n.n(o),s=n("wxAW"),c=n.n(s),u=n("zwoO"),l=n.n(u),d=n("Pf15"),p=n.n(d),f=n("Dd8w"),h=n.n(f),m=n("YybX"),y=n("MqZR"),_=n("plj8"),v=n.n(_),g=n("/YPJ"),b=n.n(g),S=n("slmD"),I=n("KDL1"),w=n("GiK3"),E=n.n(w),x=n("O27J"),R=n.n(x),D=(n("uwYN"),n("cxKw")),C=n("jYKd"),O=n.n(C),k=O.a.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexDirection:"column",margin:0,padding:0,position:"relative",zIndex:0,minHeight:0,minWidth:0}}),T=(n("KSGD"),n("x5lS")),A=n.n(T),N=n("MjES"),F=n.n(N),P=(n("5nt5"),n("7c4V")),j=n("5Izc"),U=n.n(j),M=n("VPn4"),L=n.n(M),q=n("Xwuh"),G=n.n(q),B=n("6PFH");n.d(t,"TypeaheadInput",function(){return Q}),n.d(t,"styles",function(){return z});var W=v.a.hca7cf48,H=Object(S.a)(function(e){return{bottom:0,position:"fixed",top:e+"px",transform:[{translate3d:"0,0,0"}]}}),K=function(e){return A()("form",h()({},e,{action:"#",style:[k.initial,z.wrapper]}))},V=1,Q=function(e){function t(e,n){i()(this,t);var r=l()(this,(t.__proto__||a()(t)).call(this,e));return r._render=function(e){var t=e.windowWidth,n=r.props,a=n.alwaysOpen,o=n.disableClearButton,i=n.inputStyle,s=n.placeholder,c=n.rounded,u=n.shouldAutoFocus,l=n.shouldFocusOnClear,d=n.style,p=n.testID,f=n.withTypeahead,h=(r.state.showTypeaheadDropdown||a)&&f;return E.a.createElement(F.a,{onLayout:r._handleLayout,ref:r._setRootContainerNode,style:[z.root,d]},E.a.createElement(U.a,{onKeyDown:r._handleKeyDown,style:z.keydownInputListener},E.a.createElement(K,{accessibilityRole:"search",onSubmit:r._handleFormSubmit},E.a.createElement(F.a,{ref:r._setInputContainerNode,style:i},E.a.createElement(y.a,{Icon:b.a,appText:{size:"normal"},ariaActiveDescendant:r.state.ariaDescendantId,ariaAutocomplete:"list",ariaExpanded:h,ariaLabel:W,ariaOwns:r._dropdownDomId,ariaRole:"combobox",autoComplete:"off",autoFocus:u,backgroundColor:"fadedGray",border:c?"transparent":"none",borderRadius:c?"infinite":"none",focusOnClear:l,onChange:r._handleInputChange,onClear:r._handleInputClear,onFocus:r._handleInputFocus,onLayout:r._handleInputLayoutChanged,placeholder:s,ref:r._setInputRef,testID:p,value:r.state.query,withClearButton:!o&&r.state.showTypeaheadDropdown})),E.a.createElement(F.a,{style:z.typeaheadContainer},h?r._renderDropdown(t):null))))},r._renderDropdown=function(e){var t=r.props,n=t.filter,a=t.getItemDisabledMessage,o=t.getItemIsDisabled,i=t.getTopicExactMatch,s=t.getUserExactMatch,c=t.injectedItems,u=t.isModal,l=t.maxEvents,d=t.maxTopics,p=t.renderEmptyState,f=t.selectedItems,h=t.shouldDeferPrefetch,m=t.source,y=t.withFixedPositioning,_=t.withSectionDivider,v=e>=O.a.theme.breakpoints.medium,g=r.state,b=g.dropdownOffset,S=g.query,I=u?z.modalDropdown:[z.dropdown,!v&&y&&b?H(b):null,v&&z.wideModeDropdown],w={ariaDescendantId:r.state.ariaDescendantId,domId:r._dropdownDomId,onDismiss:r._handleOnEmptyStateDismiss,onItemFocusChanged:r._handleItemFocusChanged,onRef:r._handleEmptyStateRef,style:I};return p&&!S?p(w):E.a.createElement(D.a,{ariaDescendantId:r.state.ariaDescendantId,domId:r._dropdownDomId,filter:n,getItemDisabledMessage:a,getItemIsDisabled:o,getTopicExactMatch:i,getUserExactMatch:s,injectedItems:c,maxEvents:l,maxTopics:d,onItemClick:r._handleItemClick,onItemFocusChanged:r._handleItemFocusChanged,onRef:r._handleTypeaheadRef,query:r.state.query,selectedItems:f,shouldDeferPrefetch:h,source:m,style:I,withSectionDivider:_})},r._dismissDropdown=function(){r.setState({showTypeaheadDropdown:!1}),r.props.onDismiss&&r.props.onDismiss()},r._handleOnEmptyStateDismiss=function(){r._dismissDropdown(),r._inputRef&&r._inputRef.blur()},r._handleLayout=function(){r._updatePosition()},r._handleInputLayoutChanged=function(){r._updatePosition()},r._updatePosition=function(){if(r._inputContainerNode){var e=r._inputContainerNode.getBoundingClientRect(),t=e.bottom;t!==r.state.dropdownOffset&&r.setState({dropdownOffset:t})}},r._handleTypeaheadRef=function(e){r._typeaheadRef=e},r._handleEmptyStateRef=function(e){r._emptyStateRef=e},r._setRootContainerNode=function(e){r._rootContainerNode=R.a.findDOMNode(e)},r._setInputRef=function(e){r._inputRef=e},r._setInputContainerNode=function(e){r._inputContainerNode=R.a.findDOMNode(e),r._inputContainerNode&&r._updatePosition()},r._handleFocusChange=function(e){var t=L.a.getCount()>0;r._rootContainerNode&&r._rootContainerNode.contains(e.target)||t||r.state.showTypeaheadDropdown&&r._dismissDropdown()},r._handleKeyDown=function(e){var t=e.key,n=r.state.showTypeaheadDropdown;if(Object(P.d)(e))return t===m.a?(r._focusNext(),void e.preventDefault()):t===m.b?(r._focusPrevious(),void e.preventDefault()):t===m.d?(r._dismissDropdown(),void e.preventDefault()):t===m.e?void r._dismissDropdown():t===m.c&&r._hasFocusedItem()?(r._selectFocusedItem(),void e.preventDefault()):void(n||r.setState({showTypeaheadDropdown:!0}))},r._handleItemFocusChanged=function(){r.setState({ariaDescendantId:Object(P.a)()})},r._handleInputClear=function(){r.setQuery("")},r._handleInputFocus=function(){r.setState({showTypeaheadDropdown:!0}),r._updatePosition(),r.props.onFocus&&r.props.onFocus()},r._handleInputChange=function(e){r.setQuery(e.target.value),r._updatePosition()},r._handleFormSubmit=function(e){e.preventDefault(),e.stopPropagation(),r._inputRef&&r._inputRef.blur(),r.setState({showTypeaheadDropdown:!1}),r.props.onDismiss&&r.props.onDismiss(),r.props.onSubmit&&r.props.onSubmit()},r._handleItemClick=function(e,t){var n=r.props,a=n.shouldClearOnSelect,o=n.shouldFocusOnClear,i=a?"":r.state.query;r.setState({showTypeaheadDropdown:!1}),r._inputRef&&(a&&o?r._inputRef.focus():r._inputRef.blur()),r.setQuery(i),r.props.onDismiss&&r.props.onDismiss(),r.props.onItemClick(e,t)},r._hasFocusedItem=function(){var e=r._emptyStateRef||r._typeaheadRef;return e&&e.hasFocusedItem()},r._selectFocusedItem=function(){var e=r._emptyStateRef||r._typeaheadRef;e&&e.selectFocusedItem()},r._focusNext=function(){var e=r._emptyStateRef||r._typeaheadRef;e&&e.focusNext()},r._focusPrevious=function(){var e=r._emptyStateRef||r._typeaheadRef;e&&e.focusPrevious()},r.state={ariaDescendantId:Object(P.a)(),query:e.initialValue,showTypeaheadDropdown:!1},r._dropdownDomId="typeaheadDropdown-"+V++,r}return p()(t,e),c()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.initialValue!==e.initialValue&&this.setQuery(e.initialValue)}},{key:"componentDidMount",value:function(){window.document.addEventListener("click",this._handleFocusChange,!0)}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("click",this._handleFocusChange,!0)}},{key:"render",value:function(){return E.a.createElement(G.a,null,this._render)}},{key:"focus",value:function(){this._inputRef&&this._inputRef.focus()}},{key:"setQuery",value:function(e){this.setState({query:e}),this.props.onQueryChange&&this.props.onQueryChange(e)}}]),t}(E.a.Component);Q.defaultProps={disableClearButton:!1,filter:[B.a.Users,B.a.Topics],initialValue:"",withSectionDivider:!0,withTypeahead:!0};var z=O.a.create(function(e){return{root:{flex:1,flexDirection:"column",position:"relative",zIndex:I.b+1},typeaheadContainer:{flex:1,position:"relative"},keydownInputListener:{flex:1},dropdown:{backgroundColor:e.colors.cellBackground,left:0,right:0,overflowY:"auto",overscrollBehavior:"contain",position:"absolute",top:0,WebkitOverflowScrolling:"touch"},modalDropdown:{backgroundColor:e.colors.cellBackground,flex:1,minHeight:300,position:"relative",overflowY:"auto",overscrollBehavior:"auto",WebkitOverflowScrolling:"touch"},wideModeDropdown:{borderRadius:e.borderRadii.medium,boxShadow:e.boxShadows.medium,minHeight:100,maxHeight:"calc(80vh - "+e.componentDimensions.appBarHeight+")"},wrapper:{alignItems:"stretch",flex:1}}});t.default=Q},TUQ7:function(e,t,n){"use strict";var r=n("Zx67"),a=n.n(r),o=n("Zrlr"),i=n.n(o),s=n("wxAW"),c=n.n(s),u=n("zwoO"),l=n.n(u),d=n("Pf15"),p=n.n(d),f=n("GiK3"),h=(n.n(f),n("ADUO")),m=n("sqR6"),y=n("R/an"),_=n("F8kA"),v=n("GWs/"),g=n("MjES"),b=n.n(g),S=n("jaZx"),I=n("fc63"),w=n.n(I),E=n("jYKd"),x=n.n(E),R=x.a.create(function(e){return{root:{borderRadius:e.borderRadii.infinite,overflow:"hidden"},container:{height:"auto",overflow:"hidden",width:"100%"},image:{borderRadius:0}}}),D=x.a.create(function(e){return{container:{flexDirection:"row"},left:{flex:1},right:{flex:1,marginLeft:e.borderWidths.small,marginRight:-1*e.borderWidths.small}}}),C=x.a.create(function(e){return{container:{flexDirection:"column"},top:{flex:1,marginBottom:e.borderWidths.small},bottom:{flex:1}}}),O=function(e){var t=e.left,n=e.right;return f.createElement(b.a,{style:D.container},f.createElement(b.a,{style:D.left},t),f.createElement(b.a,{style:D.right},n))},k=function(e){var t=e.top,n=e.bottom;return f.createElement(b.a,{style:C.container},f.createElement(b.a,{style:C.top},t),f.createElement(b.a,{style:C.bottom},n))},T=function(e){function t(){return i()(this,t),l()(this,(t.__proto__||a()(t)).apply(this,arguments))}return p()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.link,n=e.conversation,r=e.perspective,a=n&&n.avatar_image_https,o=Object(m.a)(n,r).map(function(e){return e.user}),i=o.slice(0,3),s=this._avatarFromGroup(n)||this._avatarFromSrc(a)||this._avatarFromParticipants(i),c=t||this._defaultLink(n,o);return s?f.createElement(w.a,{ratio:1,style:R.root},c?f.createElement(_.Link,{children:s,tabIndex:"-1",to:c}):s):null}},{key:"_defaultLink",value:function(e,t){return e.type===h.a.GROUP?"/messages/"+e.conversation_id+"/participants":e.type===h.a.ONE_TO_ONE?"/"+t[0].screen_name:void 0}},{key:"_avatarFromGroup",value:function(e){var t=e&&e.avatar&&e.avatar.image&&e.avatar.image.original_info;return t?f.createElement(S.b,{accessibilityLabel:"",aspect:S.a.SQUARE,backgroundColor:x.a.theme.colors.fadedGray,image:t,rounded:!0}):null}},{key:"_avatarFromSrc",value:function(e){return e?f.createElement(y.a,{source:e}):null}},{key:"_avatarFromParticipants",value:function(e){var t=e.length;return 0===t?null:1===t?this._singleParticipantAvatar(e[0]):this._multipleParticipantAvatar(e)}},{key:"_singleParticipantAvatar",value:function(e){return f.createElement(b.a,{key:e.id_str,style:R.container},f.createElement(v.default,{importantForAccessibility:"no-hide-descendants",style:R.image,uri:e.profile_image_url_https,userName:e.name}))}},{key:"_multipleParticipantAvatar",value:function(e){var t=e.length,n=e.map(function(e,n){var r=2===t||3===t&&0===n?.5:1;return f.createElement(b.a,{key:e.id_str,style:R.container},f.createElement(v.default,{aspectRatio:r,circle:!1,importantForAccessibility:"no-hide-descendants",style:R.image,uri:e.profile_image_url_https,userName:e.name}))});if(2===t)return f.createElement(O,{left:n[1],right:n[0]});var r=f.createElement(k,{bottom:n[2],top:n[1]}),a=n[0];return f.createElement(O,{left:r,right:a})}}]),t}(f.Component);t.a=T},XMIr:function(e,t,n){"use strict";var r=n("bOdI"),a=n.n(r),o=n("Zx67"),i=n.n(o),s=n("Zrlr"),c=n.n(s),u=n("wxAW"),l=n.n(u),d=n("zwoO"),p=n.n(d),f=n("Pf15"),h=n.n(f),m=n("iuYP"),y=n("CF/l"),_=n("4n+p"),v=n("bndy"),g=n("qX3G"),b=Object(v.createSelector)(g.b,function(e){return{loggedInUserScreenName:e&&e.screen_name}}),S=Object(_.connect)(b,null),I=n("3f1i"),w=n("Dxna"),E=n("plj8"),x=n.n(E),R=n("tp4B"),D=n("GiK3"),C=n.n(D),O=n("jYKd"),k=n.n(O),T=n("EU4s"),A=n.n(T),N=n("7q6/"),F=n("F8kA"),P=(n("KSGD"),n("/Bay")),j=n.n(P),U=n("MjES"),M=n.n(U),L=x.a.b92f34d0,q=x.a.h61e78de,G=new A.a,B=function(e){return e.target.tagName&&("input"===e.target.tagName.toLowerCase()||"textarea"===e.target.tagName.toLowerCase())},W=function(e){function t(e,n){c()(this,t);var r=p()(this,(t.__proto__||i()(t)).call(this,e,n));return r._bindKeyboardShortcuts=function(){var e,t=r.props,n=t.history,o=t.loggedInUserScreenName;if(o){var i=function(e){return function(t){t.preventDefault(),G._listeners.length?G.notify(e):n.push({pathname:"/explore",state:{searchFocused:!0,searchPrefill:e}})}},s=(e={},a()(e,R.a.goHome,function(){return n.push("/home")}),a()(e,R.a.goExplore,function(){return n.push("/explore")}),a()(e,R.a.goNotifications,function(){return n.push("/notifications")}),a()(e,R.a.goMentions,function(){return n.push("/notifications/mentions")}),a()(e,R.a.goProfile,function(){return n.push("/"+o)}),a()(e,R.a.goLikes,function(){return n.push("/"+o+"/likes")}),a()(e,R.a.goLists,function(){return n.push("/"+o+"/lists")}),a()(e,R.a.goMessages,function(){return n.push("/messages")}),a()(e,R.a.goSettings,function(){return n.push("/settings")}),a()(e,R.a.newMessage,function(){return n.push("/messages/compose")}),a()(e,R.a.newTweet,function(){return n.push("/compose/tweet")}),a()(e,R.a.search,i()),a()(e,R.a.goToUser,i("@")),e);I.a.isTrue("responsive_web_kb_shortcuts_dialog_enabled")&&(s[R.a.openKeyboardShortcuts]=function(){return n.push("/i/keyboard_shortcuts")}),r._unbindKeyboardShortcuts=Object(y.a)(s)}},r._handleKeyDown=function(e){B(e)||"Backspace"!==e.key||(r._backspaceDown=Date.now(),e.preventDefault(),e.stopPropagation())},r._handleKeyUp=function(e){if(!B(e)&&"Backspace"===e.key){e.preventDefault(),e.stopPropagation();var t=Date.now()-r._backspaceDown<500,n=Object(g.a)({},{location:r.props.location});t&&n?r.props.history.goBack():window.close()}},r._allowKeyboardShortcuts=I.a.isTrue("responsive_web_kb_shortcuts_dialog_enabled"),r}return h()(t,e),l()(t,[{key:"componentDidMount",value:function(){this._bindKeyboardShortcuts(),N.a.isKaiOS()&&(document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp))}},{key:"componentWillUnmount",value:function(){this._unbindKeyboardShortcuts&&this._unbindKeyboardShortcuts(),N.a.isKaiOS()&&(document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("keyup",this._handleKeyUp))}},{key:"render",value:function(){return this._allowKeyboardShortcuts?C.a.createElement(M.a,{accessibilityRole:"heading","aria-level":"2",style:k.a.visuallyHidden},C.a.createElement(j.a,null,L),C.a.createElement(w.a,{importantForAccessibility:"no",link:m.d("/i/keyboard_shortcuts")},q)):null}}]),t}(C.a.Component);W.registerSearchShortcutHandler=function(e){return G.subscribe(e).unsubscribe};t.a=Object(F.withRouter)(S(W))},YybX:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return s});var r="ArrowDown",a="ArrowUp",o="Enter",i="Escape",s="Tab"},cxKw:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments[1];switch(t.type){case M.REQUEST:var n=t.meta.queryId;return o()({},e,{remoteResults:o()({},e.remoteResults,k()({},n,o()({},e.remoteResults[n],{fetchStatus:x.a.LOADING})))});case M.SUCCESS:var r=t.meta.queryId,a=t.payload,i=e.cachedIds.filter(function(e){return e!==r}),s=i.length>=j?A()(e.remoteResults,i.splice(0,1)):e.remoteResults;return o()({},e,{cachedIds:[].concat(S()(i),[r]),remoteResults:o()({},s,k()({},r,{fetchStatus:x.a.LOADED,id:r,orderedSections:a.ordered_sections,events:B(a.events),topics:G(a.topics),users:Object(P.d)(a.users),timestamp:Date.now()}))});case M.FAILURE:var c=t.meta.queryId;return o()({},e,{remoteResults:o()({},e.remoteResults,k()({},c,o()({},e.remoteResults[c],{fetchStatus:x.a.FAILED})))});default:return e}}var a=n("Dd8w"),o=n.n(a),i=n("+6Bu"),s=n.n(i),c=n("Zx67"),u=n.n(c),l=n("Zrlr"),d=n.n(l),p=n("wxAW"),f=n.n(p),h=n("zwoO"),m=n.n(h),y=n("Pf15"),_=n.n(y),v=n("DTUu"),g=n.n(v),b=n("Gu7T"),S=n.n(b),I=n("4n+p"),w=n("sLaq"),E=n("bndy"),x=n("zAiL"),R=n("7t5w"),D=n("//Fk"),C=n.n(D),O=n("bOdI"),k=n.n(O),T=n("LZFh"),A=n.n(T),N=n("ipg4"),F=n("IIth"),P=n("6PFH"),j=25,U=[],M=Object(F.a)("rweb/typeaheadV2","FETCH"),L=function(e){return e.q+"_"+e.result_type+"_"+e.src},q={remoteResults:{},cachedIds:[]},G=function(e){return e.map(function(e){var t=e.tokens,n=e.rounded_score,r=s()(e,["tokens","rounded_score"]),a=r.topic,o=r.topic_type,i=o||P.b.Topic;return{id:i+"_"+a.replace(" ","_"),type:i,tokens:t,rounded_score:n,data:r}})},B=function(e){return e.map(function(e){var t=e.tokens,n=e.rounded_score,r=s()(e,["tokens","rounded_score"]),a=r.topic_type||P.b.Event;return{id:a+"_"+r.topic.replace(" ","_"),type:a,tokens:t,rounded_score:n,data:r}})};N.a.register(k()({},"typeaheadV2",r));var W=function(e,t){return e.typeaheadV2.remoteResults[t]},H=function(e,t){var n=W(e,t);return n&&n.users||U},K=function(e,t){var n=W(e,t);return n&&n.topics||U},V=function(e,t){var n=W(e,t);return n&&n.events||U},Q=function(e,t){var n=W(e,t);return n&&n.fetchStatus},z=function(e){return function(t,n){var r=W(n(),L(e));return r&&r.timestamp&&Date.now()-r.timestamp<=3e5?C.a.resolve():t(Y(e))}},Y=function(e){return function(t,n,r){var a=r.api;if(!e||!e.q||""===e.q.trim())return C.a.resolve();var o={queryId:L(e)};return Object(F.b)(t,{params:e,request:a.Typeahead.fetch})({actionTypes:M,context:"FETCH_TYPEAHEAD",meta:o})}},Z=n("kQCY"),X=[P.a.Users],J=[],$=Object(E.createSelector)(function(e,t){return t.filter||X},function(e,t){return t.query},function(e,t){return t.source},function(e,t,n){return L({q:t,result_type:e.join(","),src:n})}),ee=function(e,t){var n=$(e,t);return Q(e,n)},te=function(e,t){var n=$(e,t);return H(e,n)},ne=function(e,t){var n=$(e,t);return K(e,n)},re=function(e,t){var n=$(e,t);return V(e,n)},ae=function(e,t){return(t.rounded_graph_weight||0)-(e.rounded_graph_weight||0)},oe=Object(E.createSelector)(function(e,t){return t.query},function(e,t){return t.filter},Z.d,Z.e,function(e,t,n,r){if(!e||t.indexOf(P.a.Users)<0)return J;var a=Object(Z.f)(n,e);return Object(P.d)(a.map(function(e){return r[e]}).sort(ae).slice(0,10))}),ie=Object(E.createSelector)(re,ee,function(e,t){return t.query},function(e,t){return t.maxEvents},function(e,t){return t.filter},function(e,t,n,r,a){var o=n&&a.indexOf(P.a.Events)>=0,i=e.slice(0,r||1);return i.length&&o?i:J}),se=Object(E.createSelector)(ne,ee,function(e,t){return t.query},function(e,t){return t.maxTopics},function(e,t){return t.getTopicExactMatch},function(e,t,n,r,a){var o=t===x.a.LOADED,i=a&&a({query:n,hasResults:!!e.length,isLoaded:o}),s=e.slice(0,r||3);return i&&s.push(i),s.length?s:J}),ce=Object(E.createSelector)(te,oe,ee,function(e,t){return t.injectedItems},function(e,t){return t.query},function(e,t){return t.getUserExactMatch},function(e,t,n,r,a,o){var i=(r||[]).filter(function(e){return e.type===P.b.User}).map(function(e){return e.data.id_str}),s=t.filter(function(e){return i.indexOf(e.id)<0}),c=s.map(function(e){return e.id}),u=[].concat(S()(c),S()(i)),l=e.filter(function(e){return u.indexOf(e.id)<0}),d=n===x.a.LOADED,p=o&&o({query:a,hasResults:!!e.length,isLoaded:d}),f=[].concat(S()(s),S()(l)).slice(0,10);return p&&f.push(p),f.length?f:J}),ue=Object(E.createSelector)(ce,se,ie,function(e,t){return t.injectedItems},function(e,t,n,r){var a=r&&r.length?r:null;return t.length||e.length||n.length?g()([a,n.length&&n,t.length&&t,e.length&&e]):a&&[a]||J}),le=Object(E.createSelector)(ee,ue,function(e,t){return{fetchStatus:e,items:t}}),de={createLocalApiErrorHandler:Object(w.b)("TYPEAHEAD_DROPDOWN_CONTAINER_CONTEXT"),fetchTypeaheadIfNeeded:z,prefetchTypeaheadUsersIfNeeded:Z.b,scribeAction:R.d},pe=Object(I.connect)(le,de),fe=n("bgPG"),he=n("NreW"),me=n.n(he),ye=n("x3uO"),_e=n.n(ye),ve=n("905J"),ge=n("WgQH"),be=(n("uwYN"),n("GiK3")),Se=n.n(be),Ie=n("4RsN"),we=n("O27J"),Ee=n.n(we),xe=n("KSGD"),Re=n("2rH5"),De=n("VIKY"),Ce=n("Dica"),Oe=function(e,t){return t.conversationId},ke=function(e,t){return Object(De.a)(e,Oe(0,t))},Te={entries:{},entryIdsByConversationId:{}},Ae=Object(E.createSelector)(Oe,ke,Ce.b.selectAll,function(e,t,n){return{conversation:t&&Object(Re.b)(t.data,Te,n)}}),Ne={},Fe=Object(I.connect)(Ae,Ne),Pe=n("TUQ7"),je=n("L0dd"),Ue=n("Z7Ww"),Me=n("jYKd"),Le=n.n(Me),qe=n("MjES"),Ge=n.n(qe),Be=function(e){function t(){return d()(this,t),m()(this,(t.__proto__||u()(t)).apply(this,arguments))}return _()(t,e),f()(t,[{key:"render",value:function(){var e=this.props,t=e.conversation,n=e.perspective;return t?Se.a.createElement(Ue.a,{accessibilityRole:"button",style:We.root,withGutter:!0},Se.a.createElement(Ge.a,{style:We.avatarColumn},Se.a.createElement(Pe.a,{conversation:t,perspective:n})),Se.a.createElement(Ge.a,{style:We.bodyColumn},Se.a.createElement(je.a,{conversation:t,perspective:n}))):null}}]),t}(Se.a.Component),We=Le.a.create(function(e){return{root:{paddingVertical:e.spaces.small,paddingHorizontal:e.spaces.xSmall,width:"100%"},avatarColumn:{flexGrow:1,maxWidth:e.spaces.xxLarge,minWidth:"32px"},bodyColumn:{flexGrow:7,justifyContent:"center"}}}),He=Fe(Be),Ke=n("jaZx"),Ve=n("Mpbj"),Qe=n.n(Ve),ze=n("fc63"),Ye=n.n(ze),Ze=function(e){function t(){return d()(this,t),m()(this,(t.__proto__||u()(t)).apply(this,arguments))}return _()(t,e),f()(t,[{key:"render",value:function(){var e=this.props,t=e.image,n=e.event,r=e.supportText;return Se.a.createElement(Ge.a,{style:Xe.root},Se.a.createElement(Ue.a,{withGutter:!0},Se.a.createElement(Ge.a,{style:Xe.bodyColumn},r?Se.a.createElement(Qe.a,{color:"deepGray",size:"small"},r):null,Se.a.createElement(Qe.a,{numberOfLines:1},n)),t?Se.a.createElement(Ge.a,{style:Xe.coverContainer},Se.a.createElement(Ye.a,{ratio:1},Se.a.createElement(Ke.b,{accessibilityLabel:"",aspect:Ke.a.SQUARE,image:t}))):null))}}]),t}(Se.a.PureComponent),Xe=Le.a.create(function(e){return{root:{paddingHorizontal:e.spaces.xSmall,paddingVertical:e.spaces.small},bodyColumn:{flexGrow:7,justifyContent:"center"},coverContainer:{backgroundColor:e.colors.lightGray,borderRadius:e.borderRadii.medium,flexGrow:1,justifyContent:"flex-end",height:"25%",maxHeight:"100px",maxWidth:"100px",overflow:"hidden",width:"25%"}}}),Je=Ze,$e=n("2fO2"),et=function(e){function t(){return d()(this,t),m()(this,(t.__proto__||u()(t)).apply(this,arguments))}return _()(t,e),f()(t,[{key:"render",value:function(){var e=this.props,t=e.contextText,n=e.isDisabled,r=e.topic;return be.createElement(Ge.a,{style:[tt.root,n&&tt.disabled]},be.createElement(Qe.a,{weight:"bold"},be.createElement($e.a,{allowHashflags:!0,text:r})),t?be.createElement(Qe.a,{color:"deepGray"},t):null)}}]),t}(be.PureComponent),tt=Le.a.create(function(e){return{root:{paddingHorizontal:e.spaces.xSmall,paddingVertical:e.spaces.small},disabled:{backgroundColor:e.colors.faintGray}}}),nt=et,rt=n("plj8"),at=n.n(rt),ot=n("/Btz"),it=n.n(ot),st=n("LUfA"),ct=n("iGzH"),ut={root:"TypeaheadUser"},lt=n("AR34"),dt=n("GWs/"),pt=n("X+aW"),ft=n.n(pt),ht=at.a.h740c039,mt=at.a.fd87318c,yt=at.a.ide0c93c,_t=be.createElement(it.a,{accessibilityLabel:yt,style:{color:Le.a.theme.colors.textBlue}}),vt=function(e){function t(){var e,n,r,a;d()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=m()(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i))),r._getSocialContext=Object(Ie.a)(r,function(e){return e.socialContext},function(e){if(!e||!e.following)return null;var t=e.followed_by?ht:mt;return{contextType:ct.a.Follow,text:t}}),a=n,m()(r,a)}return _()(t,e),f()(t,[{key:"render",value:function(){var e=this.props,t=e.avatarUri,n=e.disabledMessage,r=e.isDisabled,a=e.isProtected,o=e.isSelected,i=e.isVerified,s=e.name,c=e.screenName,u=s&&!Object(st.a)(s),l=this._getSocialContext();return be.createElement(Ge.a,{style:[gt.root,r&&gt.disabled],testID:ut.root},l?be.createElement(lt.a,{socialContext:l,style:gt.socialContext}):null,be.createElement(Ue.a,{withGutter:!0},be.createElement(Ge.a,{style:gt.avatarColumn},be.createElement(dt.default,{importantForAccessibility:"no-hide-descendants",style:gt.avatar,uri:t,userName:s})),be.createElement(Ge.a,{style:gt.bodyColumn},be.createElement(Ge.a,{style:gt.body},be.createElement(Ge.a,{style:gt.userNames},be.createElement(Ge.a,{style:gt.name},be.createElement(Qe.a,{numberOfLines:1,style:gt.displayName,weight:"bold"},u?be.createElement($e.a,{text:s}):"@"+c),be.createElement(Ge.a,{style:gt.userBadges},be.createElement(ft.a,{isProtected:a,isVerified:i}))),be.createElement(Ge.a,{style:gt.screenNameContainer},be.createElement(Qe.a,{color:"deepGray",dir:"ltr",style:gt.screenName},r&&n?n:"@"+c))),o?_t:null))))}}]),t}(be.PureComponent),gt=Le.a.create(function(e){return{root:{paddingHorizontal:e.spaces.xSmall,paddingVertical:e.spaces.small},disabled:{opacity:.6,backgroundColor:e.colors.faintGray},avatarColumn:{flexGrow:1,justifyContent:"flex-start",minWidth:32,maxWidth:e.spaces.xxLarge},bodyColumn:{flexGrow:7,justifyContent:"center"},avatar:{display:"block",width:"100%"},body:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},userNames:{display:"inline",direction:"ltr",flexShrink:1,maxWidth:"100%"},name:{flexDirection:"row",maxWidth:"100%"},displayName:{whiteSpace:"nowrap"},screenNameContainer:{flexDirection:"row",alignItems:"center",flexShrink:1},screenName:{flexDirection:"row"},userBadges:{flexDirection:"row",flexShrink:0}}}),bt=vt,St=n("H/mk"),It=n.n(St),wt=function(e){function t(){var e,n,r,a;d()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=m()(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i))),r._onViewRef=function(e){r._viewRef=e;var t=r.props.onRef;t&&t(e)},r._handleClick=function(){var e=r.props.item;r.props.onClick&&r.props.onClick(e,r.isDisabled)},a=n,m()(r,a)}return _()(t,e),f()(t,[{key:"componentDidMount",value:function(){var e=this;this._loaded=!0,this._viewRef&&(this._rafId=window.requestAnimationFrame(function(){e._viewRef&&e._viewRef.setNativeProps({style:{opacity:1}})}))}},{key:"componentWillUnmount",value:function(){this._rafId&&window.cancelAnimationFrame(this._rafId)}},{key:"render",value:function(){var e=this.props,t=e.domId,n=e.isDisabled,r=e.isFocused,a=e.isInMultiSelect,o=e.isSelected,i=e.style;return be.createElement(It.a,{accessibilityRole:"option","aria-checked":o,"aria-selected":n?void 0:a&&o||!a&&!!r,nativeID:t,onPress:this._handleClick,style:[Et.root,r&&Et.focused,Et.transitionStyles,this._loaded&&Et.loaded,i],viewRef:this._onViewRef},this._renderResult())}},{key:"_renderResult",value:function(){var e=this.props,t=e.item,n=e.disabledMessage,r=e.isDisabled,a=e.isSelected;switch(t.type){case P.b.User:var o=t.data;return be.createElement(bt,{avatarUri:o.profile_image_url_https,canDm:!!o.can_dm,canMediaTag:!!o.can_media_tag,disabledMessage:n,isBlocked:!!o.is_blocked,isDisabled:r,isProtected:!!(o.hasOwnProperty("protected")?o.protected:o.is_protected),isSelected:a,isVerified:!!o.verified,name:o.name,screenName:o.screen_name,socialContext:o.social_context});case P.b.Event:var i=t.data;return be.createElement(Je,{event:i.topic,image:i.primary_image&&i.primary_image.original_info,supportText:i.supporting_text});case P.b.Hashtag:case P.b.Topic:var s=t.data,c=s.result_context&&s.result_context.display_string;return be.createElement(nt,{contextText:c,isDisabled:r,topic:s.topic});case P.b.DMConversation:return be.createElement(He,{conversationId:t.id,perspective:this.context.loggedInUserId});case P.b.NoResult:var u=t.data,l=u.text;return be.createElement(Qe.a,{style:Et.noResult},l);default:return null}}},{key:"isDisabled",get:function(){return!!this.props.isDisabled}}]),t}(be.Component);wt.contextTypes={loggedInUserId:xe.string};var Et=Le.a.create(function(e){return{root:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:1,cursor:"pointer"},noResult:{paddingHorizontal:e.spaces.xSmall,paddingVertical:e.spaces.small},loaded:{opacity:1},focused:{backgroundColor:e.colors.faintGray},transitionStyles:{transitionProperty:"opacity",transitionDuration:"250ms",opacity:0}}}),xt=wt,Rt=n("Nt9F"),Dt=n.n(Rt),Ct=n("V/VX"),Ot=n.n(Ct),kt=n("o5RB"),Tt=function(e){function t(e,n){d()(this,t);var r=m()(this,(t.__proto__||u()(t)).call(this,e));return At.call(r),r.state={focusIndex:e.withItemAlwaysSelected?0:-1,showProgressBar:!1},r}return _()(t,e),f()(t,[{key:"componentDidMount",value:function(){this._resetFocus()}},{key:"componentWillUnmount",value:function(){clearTimeout(this._interactivityTimeout),clearTimeout(this._delayedProgressTimeout)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;e.items!==this.props.items&&(this._resetFocus(),this._resetScroll()),!this.props.isLoading&&e.isLoading&&(this._delayedProgressTimeout=setTimeout(function(){return t.setState({showProgressBar:!0})},ve.a)),this.props.isLoading&&!e.isLoading&&(clearTimeout(this._delayedProgressTimeout),this.setState({showProgressBar:!1}))}},{key:"componentDidUpdate",value:function(e){var t=this;e.items!==this.props.items&&(this._interactivityTimeout&&clearTimeout(this._interactivityTimeout),this._shouldBlockInteractivity=!0,this._interactivityTimeout=setTimeout(function(){t._shouldBlockInteractivity=!1},500))}},{key:"render",value:function(){var e=this,t=this.props,n=t.domId,r=t.isLoading,a=t.items,o=t.selectedItems,i=t.style,s=this.state.showProgressBar,c=r||a.length,u=0,l=!!o;return c?be.createElement(Ge.a,{accessibilityRole:"listbox","aria-multiselectable":l,nativeID:n,style:[Ft.root,i]},be.createElement(Ot.a,{ariaValueText:s?"Loading results":"",indeterminate:s,style:!s&&Ft.hidden}),a.length?a.map(function(t,n){var r=!Array.isArray(a[n-1])&&n>0,o=n<a.length-1,i=Array.isArray(t)?e._renderTypeaheadGroup(t,u,r,o):e._renderTypeaheadItem(t,u);return u+=Array.isArray(t)?t.length:1,i}):null):null}},{key:"_renderTypeaheadGroup",value:function(e,t,n,r){var a=this,o=this.props.withSectionDivider;return be.createElement(Ge.a,{key:"typeaheadGroup-"+t},o&&n?be.createElement(Dt.a,{key:"typeaheadDividerTop-"+t}):null,e.map(function(e,n){return a._renderTypeaheadItem(e,t+n)}),o&&r?be.createElement(Dt.a,{key:"typeaheadDividerBottom-"+t}):null)}},{key:"_renderTypeaheadItem",value:function(e,t){var n=this.props,r=n.ariaDescendantId,a=n.getItemDisabledMessage,o=n.getItemIsDisabled,i=n.selectedItems,s=this.state.focusIndex,c=!(!i||!e.id)&&i.indexOf(e.id)>=0,u=!!i,l=s===t,d=o&&o(e,e.data),p=a&&a(e,e.data);return be.createElement(xt,{disabledMessage:p,domId:l?r:void 0,isDisabled:d,isFocused:l,isInMultiSelect:u,isSelected:c,item:e,key:"typeaheadItem-"+t+"-"+(e.id||""),onClick:this._handleItemClick,onRef:l?this._setFocusedItemRef:void 0})}},{key:"_getScrollParent",value:function(){if(!this._scrollParent){var e=Object(kt.a)(Ee.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}}]),t}(be.Component),At=function(){var e=this;this._setFocusedItemRef=function(t){var n=Ee.a.findDOMNode(t);e._shouldScrollToFocusedItem&&n instanceof window.Element&&(Object(kt.c)(e._getScrollParent(),n),e._shouldScrollToFocusedItem=!1)},this._resetScroll=function(){var t=e._getScrollParent();t&&(t.scrollTop=0)},this._handleItemClick=function(t,n){var r=e.props.onItemClick,a=e._getFlattenedItems().indexOf(t);t&&!n&&!e._shouldBlockInteractivity&&r(t,a),e._resetFocus()},this._getResultCount=function(){return e._getFlattenedItems().length},this._getFlattenedItems=Object(Ie.a)(this,function(e){return e.items},function(e){return _e()(e)}),this._setFocusIndex=function(t,n){var r=e.props.onItemFocusChanged;e._shouldScrollToFocusedItem=n,e.setState({focusIndex:t}),r&&r(e._getFlattenedItems()[t])},this._resetFocus=function(){e._setFocusIndex(e.props.withItemAlwaysSelected?0:-1)},this.focusNext=function(){var t=e.state.focusIndex,n=e._getResultCount();if(0!==n){var r=t+1>=n?0:t+1;e._setFocusIndex(r,!0)}},this.focusPrevious=function(){var t=e.state.focusIndex,n=e._getResultCount();if(0!==n){var r=t-1<0?n-1:t-1;e._setFocusIndex(r,!0)}},this.hasFocusedItem=function(){var t=e.state.focusIndex,n=e._getFlattenedItems();return t>=0&&n.length>t},this.selectFocusedItem=function(){var t=e.state.focusIndex,n=e.props.getItemIsDisabled;if(e.hasFocusedItem()){var r=e._getFlattenedItems()[t],a=!!n&&n(r,r.data);e._handleItemClick(r,a)}}},Nt=Tt,Ft=Le.a.create(function(e){return{root:{},hidden:{visibility:"hidden"}}}),Pt={element:"typeahead"},jt=function(e){function t(e,n){d()(this,t);var r=m()(this,(t.__proto__||u()(t)).call(this,e,n));return Ut.call(r),r._debouncedFetchTypeaheadResultsIfNeeded=me()(r._fetchTypeaheadResultsIfNeeded,250),r.state={shouldShowPrefetchResults:!0},r}return _()(t,e),f()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.createLocalApiErrorHandler,n=e.onRef,r=e.prefetchTypeaheadUsersIfNeeded;n&&n(this),this._debouncedFetchTypeaheadResultsIfNeeded(this.props),r().catch(t())}},{key:"componentWillUnmount",value:function(){this.props.onRef&&this.props.onRef(void 0),clearTimeout(this._prefetchResultsTimer)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props,r=n.onRef,a=n.query,o=n.filter,i=n.source,s=e.query,c=e.filter,u=e.source;r&&r!==e.onRef&&r(void 0),s===a&&c===o&&u===i||(this._debouncedFetchTypeaheadResultsIfNeeded(e),e.shouldDeferPrefetch&&(clearTimeout(this._prefetchResultsTimer),this.setState({shouldShowPrefetchResults:!1}),this._prefetchResultsTimer=setTimeout(function(){t.props.query&&t.props.fetchStatus!==x.a.LOADED&&t.setState({shouldShowPrefetchResults:!0})},ve.a)))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.onRef,r=t.items;n&&n!==e.onRef&&n(this),r&&r.length&&r!==e.items&&this._scribeResults()}},{key:"render",value:function(){var e=this.props,t=(e.filter,e.getTopicExactMatch,e.getUserExactMatch,e.injectedItems),n=e.items,r=(e.onRef,e.query),a=(e.shouldDeferPrefetch,e.source,e.fetchStatus),i=s()(e,["filter","getTopicExactMatch","getUserExactMatch","injectedItems","items","onRef","query","shouldDeferPrefetch","source","fetchStatus"]),c=r&&a!==x.a.LOADED,u=c&&!this.state.shouldShowPrefetchResults?t:n;return Se.a.createElement(Nt,o()({},i,{isLoading:!!c,items:u,ref:this._setComponentRef}))}}]),t}(be.Component);jt.defaultProps={filter:[P.a.User],injectedItems:[],maxEvents:3,maxTopics:1};var Ut=function(){var e=this;this._fetchTypeaheadResultsIfNeeded=function(e){e&&e.query&&e.fetchTypeaheadIfNeeded({q:e.query,src:e.source,result_type:e.filter.join(",")}).catch(e.createLocalApiErrorHandler())},this._setComponentRef=function(t){e._componentRef=t},this.focusNext=function(){e._componentRef&&e._componentRef.focusNext()},this.focusPrevious=function(){e._componentRef&&e._componentRef.focusPrevious()},this.selectFocusedItem=function(){e._componentRef&&e._componentRef.selectFocusedItem()},this.hasFocusedItem=function(){return e._componentRef&&e._componentRef.hasFocusedItem()},this._scribeResults=function(){var t=e.props,n=t.injectedItems,r=t.items,a=t.query,i=t.scribeAction,s=t.scribeNamespace,c=_e()(n||[]).length,u=g()(_e()(r).map(function(e,t){return ge.a.forTypeaheadResult(e,t+c,a)}));i(o()({},s,{action:"results"}),{items:u})}};t.a=Object(fe.b)(Pt)(pe(jt))},klNu:function(e,t,n){"use strict";var r=n("lyoc");t.a=function(e,t){var n=e.sort_event_id,a=t.sort_event_id;return n?a?Object(r.a)(a,n):1:-1}},sqR6:function(e,t,n){"use strict";var r=n("Gu7T"),a=n.n(r),o=n("d7EF"),i=n.n(o),s=n("ADUO"),c=n("rps5"),u=n.n(c),l=n("lyoc"),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Date(Number(e))},p=function(e,t){return d(e.join_time)-d(t.join_time)},f=function(e,t){var n=e.user,r=t.user;return Object(l.a)(n.id_str,r.id_str)},h=function(e){return function(t,n){var r=t.user,a=n.user;switch(e){case r.id_str:return-1;case a.id_str:return 1;default:return 0}}},m=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){return t.map(function(t){return t(e,n)}).filter(function(e){return!!e})[0]||0}},y=function(e){return m(h(e),p,f)},_=n("Tttp"),v=n.n(_);t.a=function(e,t){var n=e.participants,r=e.type,o=e.created_by_user_id,c=u()(n),l=v()(c,function(e){return e.user.id_str===t}),d=i()(l,2),p=d[0],f=d[1];return f.length?r===s.a.GROUP&&1===f.length?[].concat(a()(p),a()(f)):f.sort(y(o)):p}},tRvs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Zx67"),a=n.n(r),o=n("Zrlr"),i=n.n(o),s=n("wxAW"),c=n.n(s),u=n("zwoO"),l=n.n(u),d=n("Pf15"),p=n.n(d),f=n("plj8"),h=n.n(f),m=n("GiK3"),y=n.n(m),_={searchPeople:"searchPeople"},v=(n("uwYN"),n("R8Av")),g=n("MjES"),b=n.n(g),S=(n("KSGD"),n("/SMD")),I=n.n(S),w=n("jYKd"),E=n.n(w),x=n("6PFH");n.d(t,"UserPicker",function(){return C});var R=[x.a.Users],D=h.a.g40ba985,C=function(e){function t(e,n){i()(this,t);var r=l()(this,(t.__proto__||a()(t)).call(this,e,n));return r._renderSelectedUserPill=function(e){var t=r.props.withCompactPills,n=r.props.onRemove.bind(r,e);return y.a.createElement(I.a,{compact:t||!1,key:e.id,mode:"remove",onClick:n,style:O.selectionPill,text:e.data.name})},r._getItemIsDisabled=function(e,t){var n=r.props,a=n.getItemIsDisabled;return n.preselectedUsers.indexOf(e.id)>=0||!(!a||!a(e,t))},r._getItemDisabledMessage=function(e,t){var n=r.props,a=n.getItemDisabledMessage;return n.preselectedUsers.indexOf(e.id)>=0?null:a&&a(e,t)},r._handleQueryChange=function(e){var t=r.props.onQueryChange;r.setState({query:e}),t&&t(e)},r._handleOnSelect=function(e,t){var n=r.props.onSelect;n&&n(e,t)},r.state={query:""},r}return p()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.injections,n=e.selectedUsers,r=e.shouldAutoFocus,a=e.preselectedUsers,o=e.source,i=n.map(function(e){return e.id}).concat(a);return y.a.createElement(b.a,{style:O.root},n.length?this._renderSelectedUsersList():null,y.a.createElement(v.default,{alwaysOpen:!0,disableClearButton:!0,filter:R,getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injectedItems:t,isModal:!0,onItemClick:this._handleOnSelect,onQueryChange:this._handleQueryChange,placeholder:D,selectedItems:i,shouldAutoFocus:r,shouldClearOnSelect:!0,shouldFocusOnClear:!0,source:o,testID:_.searchPeople,withSectionDivider:!1}))}},{key:"_renderSelectedUsersList",value:function(){return y.a.createElement(b.a,{style:O.selectedUsersList},this.props.selectedUsers.map(this._renderSelectedUserPill))}}]),t}(y.a.Component);C.defaultProps={preselectedUsers:[],shouldAutoFocus:!0};var O=E.a.create(function(e){return{root:{flex:1},selectionPill:{margin:e.spaces.xxSmall},selectedUsersList:{flexDirection:"row",flexWrap:"wrap",padding:e.spaces.xxSmall}}});t.default=C}});
//# sourceMappingURL=https://ton.smf1.twitter.com/twitter_shared_private/twitter_lite/sourcemaps/web/loader.Typeahead.1fadfed0aecb79b80.js.map