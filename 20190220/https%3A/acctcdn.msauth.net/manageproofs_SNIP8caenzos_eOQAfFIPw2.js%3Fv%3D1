function $elm(e){return null!=e&&("object"!=typeof e||e instanceof String)?_ge(e):e}function exists(e){return e?!0:0==e||0==e||""==e}function isString(e){return"string"==typeof e}function isFunction(e){return"function"==typeof e}function isArray(e){return e instanceof Array}function isDefined(e){return"undefined"!=typeof e}function valOrEmpty(e){return e?e:""}function valOrDefault(e,n){return exists(e)?e:n}function getQSValue(e,n){var t="&"+n.toLowerCase()+"=",o=e.toLowerCase().indexOf(t);if(-1==o&&(t="?"+n.toLowerCase()+"=",o=e.toLowerCase().indexOf(t),-1==o)){return null
}var r=e.indexOf("&",o+1);return-1==r&&(r=e.length),e.substring(o+t.length,r)}function strEquals(e,n,t){return isString(e)&&isString(n)?t?e.toLowerCase()==n.toLowerCase():e===n:!1}function arrExists(e,n){if(!exists(e)){return!1}for(var t=isArray(n)?n:arguments,o=isArray(n)?0:1,r=o;r<t.length;r++){if(!exists(t[r])||!exists(e[t[r]])){return!1}e=e[t[r]]}return!0}function Derive(e,n){function t(){}var o=n.prototype;t.prototype=e.prototype,n.prototype=new t;for(var r in o){n.prototype[r]=o[r]}}function FormatString(e){for(var n=1;n<arguments.length;n++){e=e.replace(new RegExp("\\{"+(n-1)+"\\}","g"),arguments[n])
}return e}function DoTestDelay(e){return e(),null}function PrintRecoveryCode(e){var n=PrintRecoveryCodeTemplate.format(e.dir.encodeHtml(),e.title.encodeHtml(),e.desc1.encodeHtml(),e.desc2.encodeHtml(),e.rcHeader.encodeHtml(),e.rcValue.encodeHtml(),e.ctHeader.encodeHtml(),e.ctValue.encodeHtml(),e.mnHeader.encodeHtml(),e.mnValue.encodeHtml()),t=window.open();t.document.write(n),t.document.close(),t.print(),t.focus()}function Encrypt(e,n,t,o){var r=[];switch(t.toLowerCase()){case"chgsqsa":if(null==e||null==n){return null
}r=PackageSAData(e,n);break;case"chgpwd":if(null==e||null==o){return null}r=PackageNewAndOldPwd(e,o);break;case"pwd":if(null==e){return null}r=PackagePwdOnly(e);break;case"pin":if(null==e){return null}r=PackagePinOnly(e);break;case"proof":if(null==e&&null==n){return null}r=PackageLoginIntData(null!=e?e:n);break;case"saproof":if(null==n){return null}r=PackageSADataForProof(n);break;case"newpwd":if(null==o){return null}r=PackageNewPwdOnly(o)}if(null==r||"undefined"==typeof r){return r}if("undefined"!=typeof Key&&void 0!==parseRSAKeyFromString){var i=parseRSAKeyFromString(Key)
}var a=RSAEncrypt(r,i,randomNum);return a}function PackageSAData(e,n){var t=[],o=0;t[o++]=1,t[o++]=1,t[o++]=0;var r,i=n.length;for(t[o++]=2*i,r=0;i>r;r++){t[o++]=255&n.charCodeAt(r),t[o++]=(65280&n.charCodeAt(r))>>8}var a=e.length;for(t[o++]=a,r=0;a>r;r++){t[o++]=127&e.charCodeAt(r)}return t}function PackagePwdOnly(e){var n=[],t=0;n[t++]=1,n[t++]=1,n[t++]=0,n[t++]=0;var o,r=e.length;for(n[t++]=r,o=0;r>o;o++){n[t++]=127&e.charCodeAt(o)}return n}function PackagePinOnly(e){var n=[],t=0;n[t++]=1,n[t++]=2,n[t++]=0,n[t++]=0,n[t++]=0;
var o,r=e.length;for(n[t++]=r,o=0;r>o;o++){n[t++]=127&e.charCodeAt(o)}return n}function PackageLoginIntData(e){var n,t=[],o=0;for(n=0;n<e.length;n++){t[o++]=255&e.charCodeAt(n),t[o++]=(65280&e.charCodeAt(n))>>8}return t}function PackageSADataForProof(e){var n,t=[],o=0;for(n=0;n<e.length;n++){t[o++]=127&e.charCodeAt(n),t[o++]=(65280&e.charCodeAt(n))>>8}return t}function PackageNewPwdOnly(e){var n=[],t=0;n[t++]=1,n[t++]=1;var o,r=e.length;for(n[t++]=r,o=0;r>o;o++){n[t++]=127&e.charCodeAt(o)}return n[t++]=0,n[t++]=0,n
}function PackageNewAndOldPwd(e,n){var t=[],o=0;t[o++]=1,t[o++]=1;var r,i=n.length;for(t[o++]=i,r=0;i>r;r++){t[o++]=127&n.charCodeAt(r)}for(t[o++]=0,i=e.length,t[o++]=i,r=0;i>r;r++){t[o++]=127&e.charCodeAt(r)}return t}function mapByteToBase64(e){return e>=0&&26>e?String.fromCharCode(65+e):e>=26&&52>e?String.fromCharCode(97+e-26):e>=52&&62>e?String.fromCharCode(48+e-52):62==e?"+":"/"}function base64Encode(e,n){var t,o="";for(t=n;4>t;t++){e>>=6}for(t=0;n>t;t++){o=mapByteToBase64(63&e)+o,e>>=6}return o}function byteArrayToBase64(e){var n,t,o=e.length,r="";
for(n=o-3;n>=0;n-=3){t=e[n]|e[n+1]<<8|e[n+2]<<16,r+=base64Encode(t,4)}var i=o%3;for(t=0,n+=2;n>=0;n--){t=t<<8|e[n]}return 1==i?r=r+base64Encode(t<<16,2)+"==":2==i&&(r=r+base64Encode(t<<8,3)+"="),r}function parseRSAKeyFromString(e){var n=e.indexOf(";");if(0>n){return null}var t=e.substr(0,n),o=e.substr(n+1),r=t.indexOf("=");if(0>r){return null}var i=t.substr(r+1);if(r=o.indexOf("="),0>r){return null}var a=o.substr(r+1),l=new Object;return l.n=hexStringToMP(a),l.e=parseInt(i,16),l}function RSAEncrypt(e,n){for(var t=[],o=42,r=2*n.n.size-o,i=0;i<e.length;i+=r){if(i+r>=e.length){var a=RSAEncryptBlock(e.slice(i),n,randomNum);
a&&(t=a.concat(t))}else{var a=RSAEncryptBlock(e.slice(i,i+r),n,randomNum);a&&(t=a.concat(t))}}var l=byteArrayToBase64(t);return l}function RSAEncryptBlock(e,n,t){var o=n.n,r=n.e,i=e.length,a=2*o.size,l=42;if(i+l>a){return null}applyPKCSv2Padding(e,a,t),e=e.reverse();var c=byteArrayToMP(e),s=modularExp(c,r,o);s.size=o.size;var u=mpToByteArray(s);return u=u.reverse()}function JSMPnumber(){this.size=1,this.data=[],this.data[0]=0}function duplicateMP(e){var n=new JSMPnumber;return n.size=e.size,n.data=e.data.slice(0),n
}function byteArrayToMP(e){var n=new JSMPnumber,t=0,o=e.length,r=o>>1;for(t=0;r>t;t++){n.data[t]=e[2*t]+(e[1+2*t]<<8)}return o%2&&(n.data[t++]=e[o-1]),n.size=t,n}function mpToByteArray(e){var n=[],t=0,o=e.size;for(t=0;o>t;t++){n[2*t]=255&e.data[t];var r=e.data[t]>>>8;n[2*t+1]=r}return n}function modularExp(e,n,t){for(var o=[],r=0;n>0;){o[r]=1&n,n>>>=1,r++}for(var i=duplicateMP(e),a=r-2;a>=0;a--){i=modularMultiply(i,i,t),1==o[a]&&(i=modularMultiply(i,e,t))}return i}function modularMultiply(e,n,t){var o=multiplyMP(e,n),r=divideMP(o,t);
return r.r}function multiplyMP(e,n){var t=new JSMPnumber;t.size=e.size+n.size;var o,r;for(o=0;o<t.size;o++){t.data[o]=0}var i=e.data,a=n.data,l=t.data;if(e==n){for(o=0;o<e.size;o++){l[2*o]+=i[o]*i[o]}for(o=1;o<e.size;o++){for(r=0;o>r;r++){l[o+r]+=2*i[o]*i[r]}}}else{for(o=0;o<e.size;o++){for(r=0;r<n.size;r++){l[o+r]+=i[o]*a[r]}}}return normalizeJSMP(t),t}function normalizeJSMP(e){var n,t,o,r,i;for(o=e.size,t=0,n=0;o>n;n++){r=e.data[n],r+=t,i=r,t=Math.floor(r/65536),r-=65536*t,e.data[n]=r}}function removeLeadingZeroes(e){for(var n=e.size-1;n>0&&0==e.data[n--];){e.size--
}}function divideMP(e,n){var t=e.size,o=n.size,r=n.data[o-1],i=n.data[o-1]+n.data[o-2]/65536,a=new JSMPnumber;a.size=t-o+1,e.data[t]=0;for(var l=t-1;l>=o-1;l--){var c=l-o+1,s=Math.floor((65536*e.data[l+1]+e.data[l])/i);if(s>0){var u=multiplyAndSubtract(e,s,n,c);for(0>u&&(s--,multiplyAndSubtract(e,s,n,c));u>0&&e.data[l]>=r;){u=multiplyAndSubtract(e,1,n,c),u>0&&s++}}a.data[c]=s}removeLeadingZeroes(e);var d={"q":a,"r":e};return d}function multiplyAndSubtract(e,n,t,o){var r,i=e.data.slice(0),a=0,l=e.data;for(r=0;r<t.size;r++){var c=a+t.data[r]*n;
a=c>>>16,c-=65536*a,c>l[r+o]?(l[r+o]+=65536-c,a++):l[r+o]-=c}return a>0&&(l[r+o]-=a),l[r+o]<0?(e.data=i.slice(0),-1):1}function applyPKCSv2Padding(e,n,t){var o,r=e.length,i=[218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9],a=n-r-40-2,l=[];for(o=0;a>o;o++){l[o]=0}l[a]=1;var c=i.concat(l,e),s=[];for(o=0;20>o;o++){s[o]=Math.floor(256*Math.random())}s=SHA1(s.concat(t));var u=MGF(s,n-21),d=XORarrays(c,u),f=MGF(d,20),p=XORarrays(s,f),v=[];for(v[0]=0,v=v.concat(p,d),o=0;o<v.length;o++){e[o]=v[o]
}}function MGF(e,n){if(n>4096){return null}var t=e.slice(0),o=t.length;t[o++]=0,t[o++]=0,t[o++]=0,t[o]=0;for(var r=0,i=[];i.length<n;){t[o]=r++,i=i.concat(SHA1(t))}return i.slice(0,n)}function XORarrays(e,n){if(e.length!=n.length){return null}for(var t=[],o=e.length,r=0;o>r;r++){t[r]=e[r]^n[r]}return t}function SHA1(e){var n,t=e.slice(0);PadSHA1Input(t);var o={"A":1732584193,"B":4023233417,"C":2562383102,"D":271733878,"E":3285377520};for(n=0;n<t.length;n+=64){SHA1RoundFunction(o,t,n)}var r=[];return wordToBytes(o.A,r,0),wordToBytes(o.B,r,4),wordToBytes(o.C,r,8),wordToBytes(o.D,r,12),wordToBytes(o.E,r,16),r
}function wordToBytes(e,n,t){var o;for(o=3;o>=0;o--){n[t+o]=255&e,e>>>=8}}function PadSHA1Input(e){var n,t=e.length,o=t,r=t%64,i=55>r?56:120;for(e[o++]=128,n=r+1;i>n;n++){e[o++]=0}var a=8*t;for(n=1;8>n;n++){e[o+8-n]=255&a,a>>>=8}}function SHA1RoundFunction(e,n,t){var o,r,i,a=1518500249,l=1859775393,c=2400959708,s=3395469782,u=[],d=e.A,f=e.B,p=e.C,v=e.D,m=e.E;for(r=0,i=t;16>r;r++,i+=4){u[r]=n[i]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3]<<0}for(r=16;80>r;r++){u[r]=rotateLeft(u[r-3]^u[r-8]^u[r-14]^u[r-16],1)}var h;for(o=0;20>o;o++){h=rotateLeft(d,5)+(f&p|~f&v)+m+u[o]+a&4294967295,m=v,v=p,p=rotateLeft(f,30),f=d,d=h
}for(o=20;40>o;o++){h=rotateLeft(d,5)+(f^p^v)+m+u[o]+l&4294967295,m=v,v=p,p=rotateLeft(f,30),f=d,d=h}for(o=40;60>o;o++){h=rotateLeft(d,5)+(f&p|f&v|p&v)+m+u[o]+c&4294967295,m=v,v=p,p=rotateLeft(f,30),f=d,d=h}for(o=60;80>o;o++){h=rotateLeft(d,5)+(f^p^v)+m+u[o]+s&4294967295,m=v,v=p,p=rotateLeft(f,30),f=d,d=h}e.A=e.A+d&4294967295,e.B=e.B+f&4294967295,e.C=e.C+p&4294967295,e.D=e.D+v&4294967295,e.E=e.E+m&4294967295}function rotateLeft(e,n){var t=e>>>32-n,o=(1<<32-n)-1,r=e&o;return r<<n|t}function hexStringToMP(e){var n,t,o=Math.ceil(e.length/4),r=new JSMPnumber;
for(r.size=o,n=0;o>n;n++){t=e.substr(4*n,4),r.data[o-1-n]=parseInt(t,16)}return r}!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n){var t=jQuery(document.body),o=t.css("backgroundColor").toLowerCase().replace(new RegExp(" ","g"),"");return!n.forBlackBackground||"rgb(0,0,0)"!==o&&"#000000"!==o&&"#000"!==o?!n.forWhiteBackground||"rgb(255,255,255)"!==o&&"#ffffff"!==o&&"#fff"!==o?e:n.forWhiteBackground:n.forBlackBackground}e.getHighContrastImage=n}(n=e.HighContrast||(e.HighContrast={}))
}(n=e.Util||(e.Util={}))}(n=e.Account||(e.Account={}))}(wLive||(wLive={}));var DOM={"create":function(e,n){var t=null;if(exists(n)&&(n.name||n.type)){if(strEquals(e,"input",!0)&&!strEquals(n.type,"password",!0)){var o=DOM.create("div");o.innerHTML='<input type="'+(exists(n.type)?n.type:"")+'" name="'+(exists(n.name)?n.name:"")+'" />',t=o.childNodes[0],n.type=null,n.name=null}else{try{var r="<"+e;n.type&&(r+=' type="'+n.type+'"'),n.name&&(r+=' name="'+n.name+'"'),r+=">",t=document.createElement(r),n.type=null,n.name=null
}catch(i){t=null}}}return exists(t)||(t=document.createElement(e)),DOM.update(t,n)},"update":function(e,n){if(exists(e)&&exists(n)){for(var t in n){if(strEquals("attr",t,!0)){for(var o in n[t]){exists(n[t][o])&&e.setAttribute(o,""+n[t][o])}}else{exists(n[t])&&(e[t]=n[t])}}}return e},"text":function(e){return document.createTextNode(e)},"clear":function(e){for(;exists(e)&&e.hasChildNodes();){e.removeChild(e.firstChild)}},"isElement":function(e,n){return exists(e)&&e.nodeType==NodeType.Element&&(!isString(n)||strEquals(e.tagName,n,!0))
},"isSelectable":function(e){return DOM.isElement(e,"input")&&e.value.length>0},"visible":function(e,n){return DOM.isElement(e)&&(e.style.visibility=n[1],"none"==n[0]?DOM.hide(e):DOM.display(e)),e},"display":function(e){DOM.isElement(e)&&(e.style.display="block",e.setAttribute("aria-hidden","false"))},"displayInline":function(e){DOM.isElement(e)&&(e.style.display="inline",e.setAttribute("aria-hidden","false"))},"hide":function(e){DOM.isElement(e)&&(e.style.display="none",e.setAttribute("aria-hidden","true"))
},"addClass":function(e,n){for(var t=e.className.split(" "),o=0;o<t.length;o++){if(strEquals(t[o],n,!0)){return}}t.push(n),e.className=t.join(" ")},"removeClass":function(e,n){for(var t=e.className.split(" "),o=[],r=0;r<t.length;r++){strEquals(t[r],n,!0)||o.push(t[r])}e.className=o.join(" ")}},Visibility={"Visible":["block","visible"],"Hidden":["","hidden"],"Removed":["none",""],"Default":["",""]},NodeType={"Element":1,"Attribute":2,"Text":3,"CDATA":4,"EntityRef":5,"Entity":6,"ProcInst":7,"Comment":8,"Doc":9,"DocType":10,"DocFrag":11,"Notation":12},PrintRecoveryCodeTemplate="<body dir='{0}'><h1>{1}</h1><p>{2}</p><p>{3}</p><p>{4} <b>{5}</b></p><p>{6} {7} (UTC)</p><p>{8} {9}</p></body>";
!function(){function e(){function e(){a=!1}function n(e){var n=t("[autofocus],[autofocus=autofocus],[autofocus=true]",e).first();return 0==n.length&&(n=t("input,button,a,select,textarea",e).first()),0===n.length&&(n=t("[role='dialog']")),n}var a,l=this;this.$=t(this),l.dispose=function(){e()},l.modalDialog=function(c,s,u,d,f,p){e();var v=u&&u.options?u.options:r,m=t.extend({"dismissOnButtonClick":!1},p?p.options:null),h=t.extend({},p?p.controlOptions:null),g=[],y=p&&p.shouldReturnFocusOnClose===!1?!1:!0;if(y&&"undefined"==typeof m.returnFocusTo&&t.extend(m,{"returnFocusTo":t(document.activeElement)}),p&&p.flowEnabled){var C=new o.Account.Controls.FlowController(t(s),p.viewContext,p.flowControllerOptions);
C.setStateChangeFunc(p.flowControllerOptions.validateStateChange),C.$.on(C.events.stateChanged,p.flowControllerOptions.stateChangedEvent),C.show(p.flowControllerOptions.startState);var b=l.$;d={"action":function(){return b.trigger("action"),!0},"afterDismiss":function(){return b.trigger("cancel"),!1}}}var w=o.Controls.Notifications.createModalDialog({"title":c,"content":s,"buttons":u,"buttonOptions":v,"options":m,"controlOptions":h});t(w).bind("buttonclick.dialog",function(e,n,o){var r=!1;d&&(o&&d[o]?r=d[o](o,n):d.dismiss&&(r=d.dismiss(o||"dismiss",n))),r||null==n||t("#OuterContainer").modal("hide")
}),a=!0,t(w).bind("aftershow.dialog",function(){d.afterShow&&d.afterShow(w),t(w).unbind("aftershow.dialog")}),w.show().then(function(){t(w).unbind(".dialog"),a=!1,g.forEach(function(e){e.state?t(e.elm).attr("aria-hidden",e.state):t(e.elm).removeAttr("aria-hidden")}),d.afterDismiss&&d.afterDismiss(w)});var A=t("#OuterContainer");return A.modal("show").on("shown.bs.modal",function(){var e=["DialogUserTitle"],o=t("#DialogUserContent",A),r=t(".ariaDescription",o);r.length>0?t.each(r,function(n,o){var r=t(o),a=r.attr("id");
a||(a="dlgAutoId_"+i,r.attr("id",a),i++),e.push(a)}):e.push("DialogUserContent");var a=n(A);$B.Firefox||$B.Chrome?(e.push(a.attr("aria-labelledby")||a.attr("id")),a.attr("aria-labelledby",e.join(" "))):t("[role='dialog']",A).attr("aria-describedBy",e.join(" ")),t.each(t("body").children().not(".ModalDialog, script"),function(e,n){g.push({"elm":n,"state":t(n).attr("aria-hidden")||null}),t(n).attr("aria-hidden","true")}),a.focus()}),A.on("hidden.bs.modal",function(){w.dismiss()}),w},l.hidePopover=function(){e()
},l.isDialogOpened=function(){return a}}var n=window,t=n.jQuery,o=n.wLive,r={"renderOrder":"action,alternate,close"},i=1;e.__class=!0,$Do.when("NotificationControls",0,function(){o.Controls.Notifications.getQueue().start()}),registerNamespace("wLive.Account"),o.Account.DialogManager=new e}(),JSMPnumber.prototype={"size":1,"data":[0]},function(){function e(e,l){function c(){if(m&&h&&h.length>0){if(m.hasClass(n)){var e=t+b;m.on("input"+e,p).on("keypress"+e,p).on("keyup"+e,p).on("paste"+e,f).on("contextmenu"+e,p),h.on("click"+e,d)
}p()}}function s(){if(!C){var e=t+b;h&&h.off(e),m&&m.off(e),m=null,h=null,g=null,y=null,v=null,C=!0}}function u(e){!C&&h&&h.length>0&&(null==y||y!=e)&&(y=e,e?h.show():h.hide(),g[r]&&g[r](e,g.context))}function d(e){C||(3==e.which?u(!1):setTimeout(function(){!C&&m&&(m.focus(),g[i]&&g[i](m,g.context))},0))}function f(e){C||setTimeout(function(){C||p(e),e=null},0)}function p(){!C&&m&&u(!m.val())}var v=this,m=jQuery(e),h=m.next(o),g=l||{},y=null,C=!1,b=a++;v.update=u,v.dispose=s,c()}var n="placeholder",t=".placeholder",o=".placeholder",r="onVisible",i="onFocus",a=0;
registerNamespace("wLive.Account.Field"),wLive.Account.Field.PlaceholderControl=e}(),function(){function e(e){function n(e,n){var o=en[e.toLowerCase()],r=en.ariaLabel,i=en.placeholder,a=c.format(o.description.encodeHtml().replace("{0}",n),r.encodeHtmlAttribute(),i.encodeHtml());return t(a)}function o(e){var n=en.receive,o="";return o=-1!=e.indexOf("&#64;")?u.format(n.label.encodeHtml(),n.text.encodeHtml(),n.call.encodeHtml()):s.format(n.label.encodeHtml(),n.text.encodeHtml(),n.call.encodeHtml()),t(o)}function v(){q&&q.dispose(),q=null
}function m(e){v();var n=t("#iOttText",e);q=new i.Field.PlaceholderControl(n),setTimeout(function(){n.focus()},0)}function h(e){var n=t("#iOttText",e);n.off("keypress.verifyDialog")}function g(e){h(e);var n=t("#iOttText",e);n.on("keypress.verifyDialog",function(e){if(!K&&13==e.which){var n=T&&T.getButton({"buttonName":"action"});n&&!n.attr("disabled")&&n.click(),e.preventDefault()}})}function y(e,o){var r=en[o.toLowerCase()],i=en.buttons,a=e.content();h(a),v();var l=t("#iDialogContent",a);l.empty(),l.append(n(o,M));
var c=t(".UserTitle",a);c.empty(),c.append(r.title.replace("{0}",M));var s=e.getButton({"buttonName":"action"});s.val(i.action),s.text(i.action),s=e.getButton({"buttonName":"close"}),s.val(i.cancel),s.text(i.cancel),m(a),g(a)}function C(e,n){b(e,"action",K?!1:n),b(e,"close",n)}function b(e,n,t){if(e){var o=e.getButton({"buttonName":n});o&&(t?o&&o.removeAttr("disabled"):o&&o.attr("disabled","disabled"))}}function w(e){if(e&&k&&null!=R){var n=e.content(),o=t("#iVerificationErr",n);o.text(R)}}function A(e,n){function t(){C(e,!0),e=null
}function o(n){if(R="",n&&n.error){var t=n.error.code;R=GetString(d+t);for(var o=p.length,r=0;o>r;r++){if(p[r]==t){K=!0;break}}}R||(R=GetString(f)),w(e),C(e,!0),e=null}var i={"signinName":H,"hipSolution":O,"netId":x,"channel":n,"destination":N,"action":G,"allowUnconfirmed":z,"allowUnverified":X,"cxt":"MP","proofId":F,"proofType":U,"proofCountry":W,"proofCountryCode":j,"associationType":B,"allowAlias":$,"token":Q},l=new r.DataRequest(null,a.urls.dataRequest.sendOtt,i,t,o);l.start(),b(e,"action",!1)}function P(e){return e&&""!=e?e.match(J)?!0:(R=Y?GetString(d+"1304").format(Y):GetString(d+"1215"),!1):(R=GetString(d+"1018"),!1)
}function E(e,n,o){T=i.DialogManager.modalDialog(e,n,{"action":o.action,"close":o.cancel},{"action":function(e,n){if(K){return!0}if(1==I){var o="Voice",r=n.content();return t("#idSMSChannel",r).prop("checked")&&(o="SMS"),A(n,o),y(n,o),C(n,!0),I=0,!0}var i=t("#iOttText"),a=i.val();return a&&(a=a.trim()),P(a)?L&&L.onVerify&&L.onVerify(this,x,N||F,Encrypt(null,a,"saproof"))?(C(n,!1),!0):!1:(w(n),i.focus().select(),!0)},"close":function(){L&&L.onCancel&&L.onCancel(this)},"afterShow":function(e){k=!0,w(e),0==I&&(m(e.content()),g(e.content())),C(e,!0),_&&(R=_,w(e))
},"afterDismiss":function(){T=null,D.dispose()},"showErrorMessage":function(e){R=e,w(T)},"setActionButtonEnabled":function(e){K=!e,C(T,e)},"setEnabled":function(e){C(T,e)},"dispose":function(){T&&T.dismiss(),T=null}},null,{"options":{"focusFirstButton":0!=I},"controlOptions":{"setFocus":0!=I}})}function S(){null!=T&&(T.dismiss(),T=null)}var D=this,T=null,I=0,k=!1,R=null,L=e.callbacks,H=e.signinName||"",O=e.hipSolution||"",x=e.netId,M=e.proofNameHtml,N=e.encryptedProofId,V=e.channelType,B=e.associationType,$=e.allowAlias,U=e.proofType,F=e.proofId,W=e.proofCountry,j=e.proofCountryCode,Q=e.token,_=e.initialErrorMessage,Z=e.skipInitialSendOtt,q=null,G=e.sendOttAction||"VerifyProof",z=e.allowUnconfirmed||!1,X=e.allowUnverified||!1,K=e.actionButtonDisabled||!1,J=l.codeRegex||"^\\d+$",Y=l.codeLength||0,en=a.strings.verifyProof;
D.dispose=function(){S(),v(),R=null,x=null,M=null,F=null,V=null,L=null,B=null,_isClearText=null,D=null},D.triggerClose=function(){t("#OuterContainer").modal("hide")},D.show=function(){k=!1,R=null;var e=en.buttons,r=null,i=null;if(V){var a=en[V.toLowerCase()];r=a.title.replace("{0}",M),i=n(V,M)}else{I=1;var l=en.receive;r=l.title,e=l.buttons,i=o(M)}var c=t("<div id='iDialogContent' class='prfVrfyDlg'></div>");c.append(i),E(r,c,e),0!=I||Z||A(T,V)}}var n=window,t=n.jQuery,o=n.wLive,r=o.Core,i=o.Account,a=n.$Config.WLXAccount,l=a.verifyProof||{},c="<div id='iEnterCode' class='section' ><div class='descText test-body' id='iEnterSubhead'>{0}</div><div class='InputRow'><div role='alert' aria-live='assertive'><div id='iVerificationErr' class='alert alert-error ErrMsg xlargebottompadding' /></div><div class='phcontainer'><input type='tel' id='iOttText' name='iOttText' class='placeholder' maxlength='16' aria-label='{1}' aria-describedby='iEnterSubhead' /><label id='iOttHint' for='iOttText' class='placeholder' aria-hidden='true'>{2}</label></div></div></div>",s="<div id='iSelectCode' class='section selection'><span>{0}</span><span><input id='idSMSChannel' type='radio' name='nameMNCChannel' class='inlineRadio' value='SMS' checked='checked' /><label for='idSMSChannel'>{1}</label></span><span><input id='idVoiceChannel' type='radio' name='nameMNCChannel' class='inlineRadio' value='Voice' /><label for='idVoiceChannel'>{2}</label></span></div>",u="<div id='iSelectCode' class='section selection'><span>{0}</span><span><input id='idSMSChannel' type='radio' name='nameMNCChannel' class='inlineRadio' value='SMS' checked='checked' /><label for='idSMSChannel'>{1}</label></span><span><input id='idVoiceChannel' type='radio' name='nameMNCChannel' class='inlineRadio' value='Voice' disabled='disabled' /><label for='idVoiceChannel'>{2}</label></span></div>",d="live.accounts.strings.error_",f="live.accounts.strings.error_500",p=[1287];
e.__class=!0,registerNamespace("wLive.Account.Proofs"),o.Account.Proofs.VerifyDialogControl=e}(),function(){function e(e,n,t){function l(){}function v(){var e=null;r.accountCompromised||(e=m()),A()&&(e=e||s),E()&&(e=e||u),S()&&(e=e||d),U(e)}function m(){var e=null;return nn=o("#iProofsContainer",K),tn=o("#iProofOptions",nn),tn.length>0&&(yn&&tn.val(yn),tn.on("change",H),tn.on("keyup",H),e=tn.val(),e&&(e=e.trim())),e}function A(){return on=o("#iPhoneSection",e),on.length>0?(rn=o("#DisplayPhoneCountryISO",on),P(),rn.val(bn),rn.on("change",x),an=o("#DisplayPhoneNumber",on),an.on("change",M),vn&&an.on("keypress",function(e){13===e.keyCode&&(wn=an.val(),z.triggerHandler(p,{"actionName":g,"control":G}))
}),R(wn),ln=o("#idSMSChannel",on),cn=o("#idVoiceChannel",on),!0):!1}function P(){if(fn&&fn.List){for(var e in fn.List){var n=c.strEquals(e,bn,!0),t=o("<option />");t.text(fn.List[e]),t.val(e),n&&t.attr("selected","selected"),t.prop("defaultSelected",n),rn.append(t)}}}function E(){return sn=o("#iEmailSection",e),sn.length>0?(un=o("#EmailAddress",sn),un.on("change",O),vn&&un.on("keypress",function(e){13===e.keyCode&&(An=un.val(),z.triggerHandler(p,{"actionName":g,"control":G}))}),en[u]=new i.Field.PlaceholderControl(un),L(An),!0):!1
}function S(){return dn=o("#iTOTPSection",e),dn.length>0?!0:!1}function D(){T(),I(),k()}function T(){tn&&tn.length>0&&(tn.off("change"),tn.off("keyup"))}function I(){rn&&rn.off("change"),an&&an.off("change")}function k(){un&&un.off("change"),un&&un.off("keypress"),en[u]&&en[u].dispose(),en[u]=null}function R(e){an.val(e||"")}function L(e){var n=!e;un.val(e||""),en[u]&&en[u].update(n)}function H(){var e=tn.val();e&&(e=e.trim()),yn!=e&&(j(),yn=e,An="",wn=""),U(e)}function O(){B()||un.focus()}function x(){bn=rn.val(),R(""),ln.prop("checked",!0),cn.prop("checked",!1)
}function M(){$()||an.focus()}function N(e){return e?-1==e.indexOf("@")?e.replace(/[^0-9]/g,""):e.replace(" ",""):e}function V(){switch(gn.type=yn,gn.channel=null,gn.phoneCountry=null,gn.proofId=null,gn.name=null,gn.phoneCountryCode=null,yn.toLowerCase()){case s:if(!$()){return an.focus(),!1}gn.channel="Voice",ln.prop("checked")&&(gn.channel="SMS"),gn.proofId=N(wn),gn.name=wn,gn.phoneCountry=bn,gn.phoneCountryCode=r.countryInfo[n.data.newProof.phoneCountry].PhoneCountryCode;break;case u:if(!B()){return un.focus(),!1
}gn.channel=f,gn.proofId=N(An),gn.name=An;break;case d:gn.channel="PushNotifications"}return!0}function B(){An=un.val();var e=c.verifyEmailAddress(An,!0);e&&(e=w[e]||e);var n=e?F(e):null;return _(n),e?!1:!0}function $(){wn=an.val();var e=c.verifyPhoneNumber(wn,!0);e&&(e=b[e]||e);var n=e?F(e):null;return Z(n),e?!1:!0}function U(e){switch(yn=e,on&&on.hide(),sn&&sn.hide(),dn&&dn.hide(),e.toLowerCase()){case s:on&&on.show(),R(wn);break;case u:sn&&sn.show(),L(An||"");break;case d:dn&&dn.show()}}function F(e){if(e&&C[e]){return GetString("live.accounts.strings."+C[e])
}var n=GetString("live.accounts.strings.error_"+e);return n||(n=GetString("live.accounts.strings."+e)),n||(n=GetString("live.accounts.strings."+y)),n}function W(e){var n=Y[e];n&&(mn?(n.parent().children("input").removeClass("inputState_error"),n.hide()):a.deleteFromListFast(n),Y[e]=null)}function j(){W("totp"),W("email"),W("phone")}function Q(e,n,t){if(t){var r=!1,i=Y[n];return i||(i=o("#"+e,K),Y[n]=i,r=!0),mn?(i.parent().children("input").addClass("inputState_error"),i.find("p").text(t),i.show()):(i.text(t),r&&a.addToList(i)),!1
}return j(),!0}function _(e){return Q("EmailError","email",e),o("#iEmailHelp").hide(),!0}function Z(e){return Q("PhoneError","phone",e),!0}function q(e){if(pn&&o.isArray(pn)){for(var n=0;n<pn.length;n++){if(pn[n]===e){return!0}}}return!1}var G=this,z=G.$=o(G),X=!1,K=e,J=n||{},Y={},en=[],nn=null,tn=null,on=null,rn=null,an=null,ln=null,cn=null,sn=null,un=null,dn=null,fn=t.countries||r.countryList,pn=t._cancelActions||["cancel"],vn=void 0!==t.attachEnterKey?t.attachEnterKey:!0,mn=r.isWin10;J.data||(J.data={});var hn=J.data||{};
hn.newProof||(hn.newProof={});var gn=hn.newProof||{},yn=(gn.type||"").trim(),Cn=null;fn&&fn.Default&&(Cn=fn.Default.toUpperCase());var bn=gn.phoneCountry||Cn,wn="",An="";switch(yn.toLowerCase()){case s:wn=gn.name||gn.proofId||"";break;case u:An=gn.name||gn.proofId||""}G.show=function(){v(),o(K).show()},G.validate=function(e){return q(e)?!0:V()},G.hide=function(){D(),o(K).hide()},G.setEnabled=function(e){e?(tn&&tn.removeAttr("disabled"),rn&&rn.removeAttr("disabled"),an&&an.removeAttr("disabled"),ln&&ln.removeAttr("disabled"),cn&&cn.removeAttr("disabled"),sn&&sn.removeAttr("disabled"),un&&un.removeAttr("disabled")):(tn&&tn.attr("disabled","disabled"),rn&&rn.attr("disabled","disabled"),an&&an.attr("disabled","disabled"),ln&&ln.attr("disabled","disabled"),cn&&cn.attr("disabled","disabled"),sn&&sn.attr("disabled","disabled"),un&&un.attr("disabled","disabled"))
},G.showEmailErrorMessage=_,G.showPhoneErrorMessage=Z,G.hideErrorMessages=j,G.dispose=function(){X||(z.triggerHandler(h,{"control":G}),D(),G.$=null),nn=null,tn=null,on=null,rn=null,an=null,ln=null,cn=null,sn=null,un=null,dn=null,o(K).remove(),K=null,J=null,G=null,z=null,X=!0},l()}var n=window,t=n.wLive,o=n.jQuery,r=$Config.WLXAccount;registerNamespace("wLive.Account.Controls");var i=t.Account,a=i.AnimationHelper,l=t.Account.Controls,c=i.FieldHelper,s="phone",u="email",d="totp",f="Email",p="onAction",v="onShow",m="onHide",h="onDispose",g="action",y="error_500",C={"fieldRequired":"error_1018","emailInvalidFormat":"error_1035","phoneInvalidFormat":"error_1208"},b={"errorFieldRequired":"fieldRequired","errorInvalidFormat":"phoneInvalidFormat"},w={"errorFieldRequired":"fieldRequired","errorInvalidFormat":"emailInvalidFormat","errorEmailInvalidFormat":"emailInvalidFormat"};
e.prototype.proofTypes={"phone":s,"email":u,"totp":d},e.prototype.events={"action":p,"show":v,"hide":m,"dispose":h},e.__class=!0,l.AddProofSelectionControl=e}(),function(){function e(e,n,t){function r(){var e;if(wn){e=ExternalHelper.getProperty("SmsCode"),N(e)}else{if((An||Pn)&&i){try{i.getVerificationCode(function(e){N(e)},function(e){i.logError(e),B()})}catch(n){i.logError(n),B()}}else{B()}}}function N(e){isString(e)?"-1"===e?B():($n=!0,delete $Config.WLXAccount.wpBlueAutoVerification,a("#iOttText").val(e),wn?(WIZARDUI.fBackEnabled=!0,WIZARDUI.fNextEnabled=!0,WIZARDUI.fLastPage=!1,WIZARDUI.setButtonState(WIZARDUI.fBackEnabled,WIZARDUI.fNextEnabled,WIZARDUI.fLastPage)):(An||Pn)&&a("#iVerifyCodeAction").removeAttr("disabled","disabled"),xn=!0,j(D)):$n||(Bn=setTimeout(r,2e3))
}function V(){wn?(WIZARDUI.fBackEnabled=!0,WIZARDUI.fNextEnabled=!0,WIZARDUI.fLastPage=!1,WIZARDUI.setButtonState(WIZARDUI.fBackEnabled,WIZARDUI.fNextEnabled,WIZARDUI.fLastPage)):(An||Pn)&&(a("#iAutoEnterSubhead").text(s.autoVerifySkip),a("#iVerifyCodeAction").removeAttr("disabled","disabled"))}function B(){if(!$n){$n=!0,delete $Config.WLXAccount.wpBlueAutoVerification,$Config.WLXAccount.wpBlueAutoVerificationFailed=!0;for(var e=pn.data.proofList,n=0;n<e.length;n++){In.partialSelectValue===e[n].partialSelectValue&&e.splice(n,1)
}y.$.triggerHandler(y.back)}}function $(){mn=new v.PageDialogControl(dn,pn,fn),hn=mn.$}function U(e){var n=GetString(M+e);return n||(n=GetString("live.accounts.strings."+e)),n||(n=u.invalidCode),n}function F(e){e?An||Pn?(Dn.siblings("input").addClass("inputState_error"),Dn.find("p").text(e),Dn.show()):(Dn.text(e),fn.errorClass&&a("#"+gn).addClass(fn.errorClass),kn||(g.addToList(Dn),kn=!0)):W()}function W(){An||Pn?(Dn.parent().children("input").removeClass("inputState_error"),Dn.hide()):kn&&(g.deleteFromListFast(Dn),kn=!1)
}function j(o){Sn.showLoading(),mn&&mn.setEnabled(!1);var r=a("#"+gn,e),i=r.val();if(Q(r,Tn)||xn){var l={"success":function(e){W(),bn||Sn.hideLoading(),sn.triggerHandler(b,{"actionName":o,"control":cn}),t.callbacks&&t.callbacks.success&&t.callbacks.success(e)},"failure":function(e){if(xn){for(var n=pn.data.proofList,o=0;o<n.length;o++){In.partialSelectValue===n[o].partialSelectValue&&n.splice(o,1)}sn.triggerHandler(b,{"actionName":"autoVerifyRevert","control":cn})}else{if(wn){var i=a(".recoveryCancelPageContainer");
a("#iAutoVerification",i).addClass("hide"),a("#iEnterCode",i).removeClass("hide"),a(".pageTitle",i).removeClass("hide")}else{(An||Pn)&&(a("#iMarchingAntsProgress").addClass("hide"),a("#iVerifyCodeTitle").removeClass("hide"),a("#iAutoVerifyCodeTitle").addClass("hide"),a("#iEnterSubhead").removeClass("hide"),a("#iAutoEnterSubhead").addClass("hide"),a("#iVerifyCodeInput").removeClass("hide"),a("#iShowSendHolder").removeClass("hide"),a("#iEnterTotpLinks").removeClass("hide"))}if(Sn.hideLoading(),mn&&mn.setEnabled(!0),e&&e.error){var l=e.error.code;
F(l===I?d.expiredCreds:U(l))}else{W()}setTimeout(function(){r.focus(),bn&&r.select()},0)}t.callbacks&&t.callbacks.failure&&t.callbacks.failure()}};switch("undefined"==typeof t.action&&(t.action=Fn.VerifyCode),t.action.toLowerCase()){case Fn.AddProof:Y(l,i,n.data.newProof);break;case Fn.ConsumeOtt:K(l,i,n.data.newProof);break;case Fn.CreateAlias:J(l,i,t.cipherValue);break;case Fn.VerifyCode:default:X(l,i)}}else{(An||Pn)&&En&&$Config.WLXAccount.wpBlueAutoVerification?(B(),sn.triggerHandler(b,{"actionName":"autoVerifyRevert","control":cn})):(Sn.hideLoading(),mn&&mn.setEnabled(!0),setTimeout(function(){r.focus(),bn&&r.select()
},0))}}function Q(e,n){var t=e.val();if(!t){return F(d.emptyField),e.focus(),!1}if(n!==Un.SQSA){if(n===Un.OTC){if(!t.match(Hn)){return F(Ln?u.unmatchedDigits.format(Ln):u.invalidCode),e.focus(),!1}}else{if(n===Un.TOTP&&!t.match(On)){return F(u.invalidCode),e.focus(),!1}}}return!0}function _(){hn&&(hn.on(mn.events.action,nn),hn.on(mn.events.setupEvents,tn),hn.on(mn.events.removeEvents,on),hn.on(mn.events.createContent,rn),hn.on(mn.events.show,an),hn.on(mn.events.hide,ln))}function Z(){hn&&(hn.off(mn.events.action),hn.off(mn.events.setupEvents),hn.off(mn.events.removeEvents),hn.off(mn.events.show),hn.off(mn.events.hide))
}function q(e){var n=fn.tokens;for(var t in n){var o="{"+n[t]+"}",r=e.find(":contains('"+o+"')").last();if(r.length){var i=z(n[t]);i?(r.html(r.html().replace(o,i)),r.show()):r.hide()}}return e}function G(){var e=vn.proofEntry,n="";if(e&&In){var t=In.name;switch(In.type){case"Email":n=s.enterEmailCodePrompt.format(e);break;case"Sms":n="Voice"==In.channel?s.enterVoiceCodePrompt.format(e,Rn):t.indexOf("@")>=0?s.enterEmailCodePrompt.format(e):s.enterSmsCodePrompt.format(e,Rn)}}return n}function z(e){var n=vn.proofEntry,t="";
if(e===H){return vn.newProof.name}if(e===k){switch(Tn){case Un.OTC:t=G();break;case Un.TOTP:t=s.enterTotpPrompt}}else{if(e===R){s.enterCodeHeader?t=s.enterCodeHeader:Tn===Un.TOTP?t=s.enterCodeHeaderTotp:n||bn?Tn===Un.OTC&&(t="Sms"===In.type?"Voice"===In.channel?s.enterCodeHeaderVoice:s.enterCodeHeaderSms:s.enterCodeHeaderEmail):t=s.generalPrompt}else{if(e===L){var o=vn.name||In.name,r=vn.type||In.type,i=vn.proofChannel||In.channel;Tn===Un.TOTP?t=s.enterCodeDescTotp:o||bn?Tn===Un.OTC&&(t="Sms"===r?"Voice"===i?s.enterCodeDescVoice.format(o):s.enterCodeDescSms.format(o):s.enterCodeDescEmail.format(o)):t=s.generalPrompt
}}}return t}function X(e,n){var t={"publicKey":Nn,"encryptedCode":Vn(null,n,"saproof",null),"action":fn.verifyProofAction||x,"purpose":fn.verifyProofPurpose||O,"epid":In?In.epid:null};vn.proofEntry&&(t.confirmProof=vn.proofEntry);var o=new C(null,f.verifyCode,t,function(n){n&&(vn.authZProofDataRawXml=n.proofData,vn.token=n.token),e.success(n)},function(n){n&&n.error&&"1086"===n.error.code?$Utility.navigateTo(p.errorUrl):e.failure(n)});o.start()}function K(e,t,o){if(o.proofId){var r=o.proofId}else{var i=Mn[n.data.newProof.phoneCountry].PhoneCountryCode,r=i+n.data.newProof.name
}var a=o.channel,l={"ottPurpose":"VerificationCode","ott":t,"destinationPii":r,"channelType":a,"action":"SetVerifyState","ottAssociationType":"Alias"},c=new C(null,f.consumeOneTimeToken,l,function(n){e.success(n)},function(n){n&&n.error&&"1086"===n.error.code?$Utility.navigateTo(p.errorUrl):e.failure(n)});c.start()}function J(e,o,r){var i=Mn[n.data.newProof.phoneCountry].PhoneCountryCode;n.data.newProof.proofId=i+n.data.newProof.name;var a={"propertyBag":{"displayNamePii":n.data.newProof.name,"namePii":n.data.newProof.proofId.replace(/[^\d]/g,""),"isMobile":"true","mobileCountryCode":n.data.newProof.phoneCountry,"market":$Config.mkt,"cipherValue":r},"sendVerificationCode":!1,"verificationCode":o,"SKI":SKI||"","channelType":n.data.newProof.channel,"shouldGetEncryptedAlias":t.shouldGetEncryptedAlias},l=new C(null,f.addPhoneAlias,a,function(n){e.success(n)
},function(n){var o;switch(n&&n.error&&(o=n.error.code),o){case"1086":$Utility.navigateTo(p.errorUrl);break;case"1327":case"1002":t.callbacks&&t.callbacks.failure&&t.callbacks.failure(n);break;default:e.failure(n)}});l.start()}function Y(e,n,t){if(t.phoneCountryCode){var o=t.phoneCountryCode+t.proofId}else{var o=t.proofId}var r=t.type;"phone"==t.type.toLowerCase()&&(r="sms");var i={"publicKey":Nn,"ott":Vn(null,n,"saproof",null),"proofType":r,"proofProperties":{"idPii":o,"namePii":t.name,"market":$Config.mkt,"phoneCountry":t.phoneCountry,"phoneCountryCode":t.phoneCountryCode}},a=new C(null,f.addProof,i,e.success,function(n){n&&n.error&&"1086"===n.error.code?$Utility.navigateTo(p.errorUrl):e.failure(n)
});a.start()}function en(){function e(){sn.triggerHandler(b,{"actionName":T,"control":cn})}var n={"notificationType":c.policyBar.notificationType,"notificationAction":c.policyBar.notificationAction},t=new o.DataRequest(null,f.consumeNotification,n,e,e);t.start(),cn.setEnabled(!1),Sn&&Sn.showLoading()}function nn(e,n){var t=n.actionName;return t===D?j(t):c.policyBar&&t===T?en():sn.triggerHandler(b,{"actionName":t,"control":cn}),e&&(e.preventDefault(),e.stopPropagation()),!1}function tn(e,n){var t=n.content,o={};
bn&&yn&&(o={"context":{"label":a("#"+yn,t)},"onVisible":function(e,n){h.toggleInlineLabel(!e,n.label)}}),Cn=new m(a("#"+gn,t),o),sn.triggerHandler(P,{"content":t,"control":cn})}function on(e,n){Cn.dispose(),sn.triggerHandler(E,{"content":n.content,"control":cn})}function rn(e,n){q(n.content)}function an(n,t){var o=t.content,r=t.control;if(Sn=new v.LoadingIndicatorControl(a(".loadingArea",o)),Dn=a("#"+fn.errorMessageId,o),setTimeout(function(){o.find("#"+fn.fieldName).first().focus()},10),In){{In.type}if(Tn==Un.TOTP){var i=a("#iEnterTotpLinks",o);
i.show();var l=a("#iNewSessionLink",o);In.approver?(l.show(),l.on("click",function(e){return r.$.triggerHandler(b,{"actionName":"sessionPolling","control":cn}),e.preventDefault(),e.stopPropagation(),!1})):l.hide(),a("#iEnterTotpOptionLink",e).on("click",function(e){return r.$.triggerHandler(b,{"actionName":"alternate","control":cn}),e.preventDefault(),e.stopPropagation(),!1}),a("#iShowSendHolder",e).hide()}}sn.triggerHandler(w,{"content":t.content,"control":cn})}function ln(e,n){sn.triggerHandler(A,{"content":n.content,"control":cn})
}var cn=this,sn=a(cn),un=!1,dn=e,fn=t,pn=n,vn=pn.data,mn=null,hn=null,gn=t.fieldName,yn=t.fieldLabelName,Cn=null,bn=l.isXbox,wn=l.isWPBlue,An=l.isWin10,Pn=l.isHolo,En=l.supportsAutoVerification,Sn=null,Dn=null,Tn=vn.selectedActionType,In=vn.selectedProof,kn=!1,Rn=l.matchDigits||4;c||(c={});var Ln=c.codeLength||0,Hn=c.codeRegex||"^\\d+$",On="^\\d+$",xn=!1,Mn=t.countryInfo||c.countryInfo;if("undefined"!=typeof SKI){var Nn=SKI||"",Vn=Encrypt}var Bn,$n=!1,Un={"OTC":"OTC","TOTP":"TOTP","SQSA":"SQSA","RecoveryCode":"RecoveryCode"},Fn={"AddProof":"addproof","ConsumeOtt":"consumeott","CreateAlias":"createalias","VerifyCode":"verifycode"};
cn.show=function(){if(_(),mn.show(),En&&$Config.WLXAccount.wpBlueAutoVerification){if(wn){var e=a(".recoveryCancelPageContainer");a("#iAutoVerification",e).removeClass("hide"),a("#iEnterCode",e).addClass("hide"),a(".pageTitle",e).addClass("hide"),WIZARDUI.fBackEnabled=!0,WIZARDUI.fNextEnabled=!1,WIZARDUI.fLastPage=!1,WIZARDUI.setButtonState(WIZARDUI.fBackEnabled,WIZARDUI.fNextEnabled,WIZARDUI.fLastPage)}else{(An||Pn)&&(a("#iMarchingAntsProgress").removeClass("hide"),a("#iVerifyCodeTitle").addClass("hide"),a("#iAutoVerifyCodeTitle").removeClass("hide"),a("#iEnterSubhead").addClass("hide"),a("#iAutoEnterSubhead").removeClass("hide"),a("#iVerifyCodeInput").addClass("hide"),a("#iShowSendHolder").addClass("hide"),a("#iEnterTotpLinks").addClass("hide"),a("#iVerifyCodeAction").attr("disabled","disabled"))
}$Config.WLXAccount.wpBlueAutoVerificationFailed?B():(a(r),wn?a(setTimeout(B,3e4)):(An||Pn)&&(a(setTimeout(V,l.autoVerification.showSkipTimeout)),a(setTimeout(B,l.autoVerification.cancelTimeout))))}else{mn&&("undefined"!=typeof WIZARDUI&&WIZARDUI.setButtonState?(WIZARDUI.fBackEnabled=!0,WIZARDUI.fNextEnabled=!0,WIZARDUI.fLastPage=!1,WIZARDUI.setButtonState(WIZARDUI.fBackEnabled,WIZARDUI.fNextEnabled,WIZARDUI.fLastPage)):(An||Pn)&&a("#iVerifyCodeAction").removeAttr("disabled","disabled"))}},cn.hide=function(){mn&&mn.hide(),Z()
},cn.dispose=function(){un||($n=!0,delete $Config.WLXAccount.wpBlueAutoVerification,sn.triggerHandler(S,{"control":cn}),Sn&&(Sn.dispose(),Sn=null),Z(),mn&&(mn.dispose(),mn=null,hn=null),Dn=null,un=!0),cn=null,sn=null,dn=null,fn=null,n=null,t=null},cn.triggerAction=function(e){j(e)},$()}var n=window,t=n.wLive,o=t.Core,r=t.Account,i=n.MSA&&n.MSA.CXH,a=n.jQuery,l=n.$Config.WLXAccount,c=l.verifyCode,s=l.strings.verifyCode,u=s.errors,d=l.strings.errors,f=l.urls.dataRequest,p=l.urls.recoveryCancel,v=r.Controls,m=r.Field.PlaceholderControl,h=r.FieldHelper,g=r.AnimationHelper,y=t.Account.PageEvents,C=o.DataRequest,b="onAction",w="onShow",A="onHide",P="onSetupEvents",E="onRemoveEvents",S="onDispose",D="action",T="skip",I="6001",k="EnterCodePrompt",R="EnterCodeHeaderText",L="EnterCodeDescriptionText",H="ProofName",O="EAVeto",x="IptVerify",M="live.accounts.strings.error_";
e.prototype.events={"action":b,"show":w,"hide":A,"setupEvents":P,"removeEvents":E,"dispose":S},e.__class=!0,registerNamespace("wLive.Account.Controls"),t.Account.Controls.VerifyCodeControl=e,$Do.register("VerifyCodeControl")}(),function(){function e(e,n,t){function b(e){if(j&&r.isArray(j)){for(var n=0;n<j.length;n++){if(j[n]===e){return!0}}}return!1}function w(e){var n=G.newProof||{};if("1287"===e&&n.type.toLowerCase()==F.proofTypes.phone.toLowerCase()){return GetString("live.accounts.strings.error_1287_phone")
}if(e&&y[e]){return GetString("live.accounts.strings."+y[e])}var t=GetString(C+e);return t||(t=GetString("live.accounts.strings."+e)),t||(t=GetString("live.accounts.strings."+h)),t}function A(){if($){return!0}delete G.proofChannel,delete G.type,delete G.proofId,delete G.name,delete G.proofCountry,delete G.contactEmail,delete G.contactProof,delete G.contactProofTypeClass;var e=G.newProof||{};return e.type.toLowerCase()==F.proofTypes.phone.toLowerCase()?(P(e.channel,"Sms",e.proofId,e.name,e.phoneCountry),!1):(t&&t.useSendOttForEmail?P(e.channel,"Email",e.proofId,e.name,e.phoneCountry):E(V,e.proofId),!1)
}function P(e,n,t,r,a){function l(){B&&(G.proofChannel=e,G.type=n,G.proofId=t,G.name=r,G.proofCountry=a,G.selectedActionType="OTC"),x&&M&&($=!0,x.setEnabled(!0),W&&W.hideLoading(),M.triggerHandler(s,{"actionName":m,"control":x}))}function c(e){if(x&&!N){var t="";t=w(e&&e.error?e.error.code:h),W&&W.hideLoading(),F&&("Email"===n?F.showEmailErrorMessage(t):F.showPhoneErrorMessage(t)),x.setEnabled(!0)}}var u={"netId":i.NetId,"channel":e,"action":Q,"cxt":"MP","proofId":t,"proofName":r,"proofType":n,"proofCountryIso":a,"associationType":"None","allowUnconfirmed":_,"allowUnverified":Z,"allowAlias":q},d=new o.DataRequest(null,$Config.WLXAccount.urls.dataRequest.sendOtt,u,l,c);
d.start(),x.setEnabled(!1),W&&W.showLoading()}function E(e,n){function t(){x&&!N&&(B&&(G.contactEmail=n,G.contactProof=n,G.contactProofTypeClass="email"),$=!0,F&&F.hideErrorMessages(),x.setEnabled(!0),W&&W.hideLoading(),M.triggerHandler(s,{"actionName":m,"control":x}))}function r(e){var n="";n=w(e&&e.error?e.error.code:h),W&&W.hideLoading(),F&&F.showEmailErrorMessage(n),x.setEnabled(!0)}var i={"destination":n,"channel":"Email","requestMessagePurpose":"EAVerifyContactEmail","allowUnconfirmed":!0,"allowUnverified":!1,"callContext":B?B.userCat:null,"token":null},l=new o.DataRequest(null,a.dataRequest.requestMessage,i,t,r);
l.start(),x.setEnabled(!1),W&&W.showLoading()}function S(){function e(){M.triggerHandler(s,{"actionName":"skip","control":x})}var n={"notificationType":i.policyBar.notificationType,"notificationAction":i.policyBar.notificationAction},t=new o.DataRequest(null,a.dataRequest.consumeNotification,n,e,e);t.start(),x.setEnabled(!1),W&&W.showLoading()}function D(){U=new l.Controls.PageDialogControl(V,n,t)}function T(){U&&(U.$.on(U.events.action,k),U.$.on(U.events.setupEvents,R),U.$.on(U.events.removeEvents,L),U.$.on(U.events.show,H),U.$.on(U.events.hide,O))
}function I(){U&&(U.$.off(U.events.action),U.$.off(U.events.setupEvents),U.$.off(U.events.removeEvents),U.$.off(U.events.show),U.$.off(U.events.hide))}function k(e,n){return i.policyBar&&n.actionName===g?(S(),e.preventDefault(),e.stopPropagation(),!1):(M.triggerHandler(s,{"actionName":n.actionName,"control":x}),i.accountCompromised&&n.actionName===g?void 0:(e.preventDefault(),e.stopPropagation(),!1))}function R(e,n){if(i.accountCompromised&&!i.isXbox||i.policyBar){var t=i.accountCompromised?"#iCollectPhonePrivacyLink":"#iAddProofPrivacyLink";
i.isWinWab?r(t).on("click",{"toShow":["#iHostInlinePrivacy"]},HOSTUI.evt_inlineLink_onclick):i.isWinWiz||i.IsWPWiz?r(t).on("click",{"toShow":["#iPriv"]},WIZARDUI.evt_inlineLink_onclick):r(t).on("click",{"toShow":"#iPrivacyContainer"},HOSTUI.onInlineAgreementClick)}M.triggerHandler(f,{"content":n.content,"control":x})}function L(e,n){M.triggerHandler(p,{"content":n.content,"control":x})}function H(e,o){i.accountCompromised&&G.newProof&&r("#iCollectPhoneViewRevert").removeClass("hide"),F=new l.Controls.AddProofSelectionControl(V,n,t),F.$.on(F.events.action,k),F.show();
var a=o.content;W=new c.LoadingIndicatorControl(r(".loadingArea",a)),M.triggerHandler(u,{"content":a,"control":x})}function O(e,n){M.triggerHandler(d,{"content":n.content,"control":x})}var x=this,M=r(x),N=!1,V=e,B=n,$=!1,U=null,F=null,W=null,j=t._cancelActions||["cancel"],Q=t.sendOttAction||"VerifyNewProof",_=t.allowUnconfirmed||!1,Z=t.allowUnverified||!1,q=t.allowAlias;B.data||(B.data={});var G=B.data||{};x.show=function(){$=!1,T(),U&&U.show(),F&&F.show()},x.validate=function(e){return(b(e)||!F||F.validate(e))&&(e!==m||A())?!0:!1
},x.hide=function(){F&&F.hide(),U&&U.hide(),I()},x.setEnabled=function(e){F&&F.setEnabled&&F.setEnabled(e),U&&U.setEnabled(e)},x.dispose=function(){N||(M.triggerHandler(v,{"control":x}),I(),F&&(F.dispose(),F=null),U&&(U.dispose(),U=null),W&&(W.dispose(),W=null)),V=null,B=null,x=null,M=null,N=!0},D()}var n=window,t=n.wLive,o=t.Core,r=n.jQuery,i=$Config.WLXAccount,a=i.urls;registerNamespace("wLive.Account.Controls");var l=t.Account,c=l.Controls,s="onAction",u="onShow",d="onHide",f="onSetupEvents",p="onRemoveEvents",v="onDispose",m="action",h="error_500",g="skip",y={"fieldRequired":"error_1018","emailInvalidFormat":"error_1035","proofAlreadyExists":"error_1287","phoneInvalidFormat":"error_1208"},C="live.accounts.strings.error_";
e.prototype.events={"action":s,"show":u,"hide":d,"setupEvents":f,"removeEvents":p,"dispose":v},c.CollectProofControl=e}(),function(){function e(e){return 1==e?void $Utility.navigateTo(I.urls.addEmailProof):2==e?void $Utility.navigateTo(I.urls.addPhoneProof):3==e?void $Utility.navigateTo(I.urls.addAuthenticatorProof):void x++}function n(e){e||(e=document.createElement("div"),e.setAttribute("id","iAddProofModalDialog"),document.body.appendChild(e));D.modalDialog(k.addProofDialog.title,e,{"action":I.strings.action,"close":I.strings.cancel},{},{},{"dismissOnButtonClick":!1,"flowEnabled":!0,"viewContext":{"membername":$Config.displayMemberName},"flowControllerOptions":k.options})
}function t(){DOM.display($elm("idAuthenticatorAddErr"))}function o(){return y("maincontent","dynamiccontent"),!1}function r(){return v()||$Utility.navigateTo(I.urls.EnableTfa),!1}function i(){if(!m()){var e=I.strings.OptOut,n=e.Buttons;T.Fire(I.pageids.disableTwoStep),D.modalDialog(e.title,e.description,{"action":n.action,"close":n.cancel},{"action":function(){v()||($elm("action").value="DisableTfa",h())}})}}function a(e){if(!m()){var n=I.strings.removeTotp,t=n.buttons;T.Fire(I.pageids.removeAuthenticator),D.modalDialog(n.title,n.description,{"action":t.action,"close":t.cancel},{"action":function(){A.DeleteProof(e)
}})}}function l(){var e={"encryptedNetId":I.encryptedNetId},n=new P.Core.DataRequest(null,I.urls.recoverycode.generateRecoveryCode,e,C,b);n.start()}function c(){y("maincontent","dynamiccontent")}function s(){if(!m()){var e=I.strings.DelDevices,n=e.Buttons;T.Fire(I.pageids.removeDevices),D.modalDialog(e.title,e.description,{"action":n.action,"close":n.cancel},{"action":function(){v()||($elm("action").value="DeleteDevices",h())}})}}function u(){return v()?!1:($elm("action").value="ResolveUncfp",h(),!0)}function d(){return v()?!1:($elm("action").value="CompleteProofReview",h(),!0)
}function f(){if(m()){return!1}var e=I.strings.AppPassword.Revoke,n=e.Buttons;return D.modalDialog(e.title,e.description,{"action":n.action,"close":n.cancel},{"action":function(){v()||($elm("action").value="RevokeAppPassword",h())}}),!1}function p(){if(!m()){var e=I.strings.RemoveFedCredGitHub,n=e.Buttons,t=I.urls.RemoveFedCred,o=t&&t.changePassword;T.Fire(I.pageids.removeFedCredGitHub),D.modalDialog(e.title,e.description,{"action":n.action,"close":n.cancel},{"action":function(){v()||(o?$Utility.navigateTo(o):($elm("action").value="RemoveFedCredGitHub",h()))
}})}}function v(){return O?!0:(O=!0,!1)}function m(){return O}function h(){document.manageProofForm.submit()}function g(e,n){var t=jQuery("."+e,"#AddProofForm");t.hide(),n&&t.html("")}function y(e,n){g("ErrMsg",!0),DOM.hide($elm(n)),DOM.display($elm(e)),jQuery("#"+n).attr("aria-hidden","true"),jQuery("#"+e).attr("aria-hidden","false")}function C(e){if(T.Fire(I.pageids.recoveryCode),jQuery.extend(M,{"rcValue":e.recoveryCode,"ctValue":e.creationTime,"mnValue":e.obfuscatedMemberName}),k.useDialogs){var n=I.strings.recoveryCode,t=n.buttons,o="<p>"+n.newRcDesc1.encodeHtml()+"</p><p>"+n.newRcDesc2.encodeHtml()+"</p><p>"+n.newRcHeader.encodeHtml()+" <b>"+e.recoveryCode.encodeHtml()+"</b></p>";
jQuery("#RecoveryCodeLink").text(n.replaceRecoveryCodeLinkText),n.showPrintRcButton?D.modalDialog(n.newRcTitle.encodeHtml(),o,{"action":t.print,"close":t.ok},{"action":function(){PrintRecoveryCode(M)}}):D.modalDialog(n.newRcTitle.encodeHtml(),o,{"action":t.ok},{})}else{y("dynamiccontent","maincontent"),jQuery("#dynamiccontent").addClass("pageSectionContainer"),y("idRecoveryCodeSection","iOptInOutTfa"),jQuery("#NewRecoveryCodeHolder").text(e.recoveryCode.encodeHtml()),setTimeout(function(){jQuery("#idRecoveryCodeSection .default").focus()
},0)}}function b(e){if(T.Fire(I.pageids.recoveryCode),e&&e.error){switch(e.error.code){case P.Core.DataRequest.ApiErrorCodes.AuthFailure:$Utility.navigateTo(A.location.href);break;default:var n=GetString("live.accounts.strings.error_"+e.error.code);if(n){var t=$elm("RecoveryCodeError");t.innerHTML=n,t.style.display="block"}else{$Utility.navigateTo(I.urls.recoverycode.errorUrl)}}}}function w(){function v(e,n){var t=k.options.viewDefs[e];if(t){var o=t.sectionId,r=null;o&&(_templateCache[o]?r=_templateCache[o].clone():(r=jQuery("#"+o,n),r.detach(),_templateCache[o]=r)),t.options.viewTemplate=r
}}function m(){var e=jQuery("#templates");this._templateCache={},v("collectProof",e),v("verifyProof",e)}function h(){var v=A.location.search.substr(1);jQuery.extend(C,g(v));var h=C.action;h&&b[h]&&b[h](),S.$.on(S.dispose+N,y.dispose);var w=I.strings.recoveryCode;if(w&&(M={"dir":w.printRcTextDir,"title":w.printRcTitle,"desc1":w.printRcDesc1,"desc2":w.newRcDesc2,"rcHeader":w.newRcHeader,"ctHeader":w.printRcCtHeader,"mnHeader":w.printRcMnHeader}),H&&R&&R.fedProviderGitHubLogo){var P=jQuery("#FedCredGitHubLogo");
if(P.length>0){var E=H.getHighContrastImage(R.fedProviderGitHubLogo,{"forBlackBackground":R.fedProviderGitHubLogoWhite});E&&E!==R.fedProviderGitHubLogo&&P.attr("src",E)}}var D="click"+N;jQuery("#CommitBtn").on(D,u),jQuery("#CommitMiniBtn").on(D,d),jQuery("#iEmailAddProof").on(D,function(){return e(1),!1}),jQuery("#iLinkAddSms").on(D,function(){return e(2),!1}),jQuery.extend(!0,k,{"options":{"startState":"collectProof","viewDefs":{"collectProof":{"sectionId":"iCollectProof","control":"CollectProofControl","options":{"useSendOttForEmail":!0},"actions":{"action":"verifyProof"}},"verifyProof":{"sectionId":"iVerifyProof","control":"VerifyCodeControl","options":{"fieldName":"iOttText","errorMessageId":"iVerificationErr","focusFirstInput":!0,"focusFirstButton":!1,"verifyProofAction":"VerifyOtc","verifyProofPurpose":"ManageProofs","action":"addproof","tokens":{"description":"ProofName"}},"actions":{"action":"defaultReturn"}},"defaultReturn":{"url":I.urls.onVerifySuccess}}}}),m(),jQuery("#iLinkAddProof").on(D,function(){return n()
}),jQuery("#RecoveryCodeLink").on(D,l),jQuery("#iForgetAllLink").on(D,s),jQuery("#EnableTfaSubmit").on(D,r),jQuery("#EnableTfaCancel").on(D,o),jQuery("#iAuthenticatorRemoveLink").on(D,function(){return k.confirmRemoveAuthenticator?a(k.removeAuthenticator):A.DeleteProof(k.removeAuthenticator),!1}),jQuery("#iAuthenticatorLink, #iLinkAddApp").on(D,function(){return k.hasConfirmedTotpProof?(t(),!1):(e(3),!1)}),jQuery("#iOptInTfaAction").on(D,function(){return k.isOptInTfaEnabled?(i(),!1):r()}),jQuery("#iAppPasswordRevoke").on(D,f),jQuery("#PrintRecoveryCode").on(D,function(){PrintRecoveryCode(M)
}),jQuery("#iRecoveryCodeNext").on(D,c),jQuery("#iRemoveFedCredGitHub").on(D,p)}function g(e){for(var n=e.split("&"),t={},o=0;o<n.length;o++){var r=n[o].split("=");t[r[0]]=decodeURIComponent(r[1])}return t}var y=this,C={},b={"rc":l};y.dispose=function(){if(S.$.off(N),C){for(var e in C){C[e]=null,delete C[e]}}if(b){for(var n in b){b[n]=null,delete b[n]}}C=null,b=null,y=null},h()}var A=window,P=A.wLive,E=P&&P.Account,S=E.PageEvents,D=E.DialogManager,T=A.$ReportEvent,I=$Config.WLXAccount,k=I.ManageProofs,R=I.imgs,L=E.Util,H=L&&L.HighContrast,O=!1,x=0,M={},N=".ManageProofs";
A.DeleteProof=function(e){return v()?!1:($elm("ProofId").value=e,$elm("action").value="DeleteProof",void h())},A.ShowDeleteProof=function(e,n,t){var o=I.strings.deleteProof,r=o.buttons;T.Fire(t),D.modalDialog(o.title.replace("{0}",e),o.description.replace("{0}",e),{"action":r.action,"close":r.cancel},{"action":function(){A.DeleteProof(n)}})},A.ShowVerifyProof=function(e,n,t,o,r,i){var a=new P.Account.Proofs.VerifyDialogControl({"netId":e,"proofNameHtml":n,"encryptedProofId":t,"channelType":o,"proofCountry":r,"proofCountryCode":i,"callbacks":{"onVerify":function(e,n,t,o){v()||("undefined"!=typeof SKI&&(jQuery("#iPublicKey").val(SKI),$elm("iEncryptedOtt").value=o),$elm("ProofId").value=t,$elm("action").value="VerifyProof",h())
}}});a.show()},registerNamespace("wLive.Account"),P.Account.ManageProofs=new w}();