/*!------------------------------------------- START OF THIRD PARTY NOTICE -----------------------------------------

This file is based on or incorporates material from the projects listed below (Third Party IP). The original copyright notice and the license under which Microsoft received such Third Party IP, are set forth below. Such licenses and notices are provided for informational purposes only. Microsoft licenses the Third Party IP to you under the licensing terms for the Microsoft product. Microsoft reserves all other rights not expressly granted under this agreement, whether by implication, estoppel or otherwise. 

Knockout-Validation 
============================================================================= 
            Author:              Eric M. Barnard - @ericmbarnard                                                                                       
            License:             MIT (http://opensource.org/licenses/mit-license.php)                                                                                                                                                                                                                                                         
            Description:         Validation Library for KnockoutJS                                                                           
            Version:             2.0.2                                                                                                                             
===============================================================================

Provided for Informational Purposes Only

MIT License 

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the Software), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: 

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE 
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION 
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION 
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
----------------------------------------------- END OF THIRD PARTY NOTICE ------------------------------------------*/
function Encrypt(e,t,n,r){var i=[];switch(n.toLowerCase()){case"chgsqsa":if(null==e||null==t){return null}i=PackageSAData(e,t);break;case"chgpwd":if(null==e||null==r){return null}i=PackageNewAndOldPwd(e,r);break;case"pwd":if(null==e){return null}i=PackagePwdOnly(e);break;case"pin":if(null==e){return null}i=PackagePinOnly(e);break;case"proof":if(null==e&&null==t){return null}i=PackageLoginIntData(null!=e?e:t);break;case"saproof":if(null==t){return null}i=PackageSADataForProof(t);break;case"newpwd":if(null==r){return null
}i=PackageNewPwdOnly(r)}if(null==i||"undefined"==typeof i){return i}if("undefined"!=typeof Key&&void 0!==parseRSAKeyFromString){var a=parseRSAKeyFromString(Key)}var o=RSAEncrypt(i,a,randomNum);return o}function PackageSAData(e,t){var n=[],r=0;n[r++]=1,n[r++]=1,n[r++]=0;var i,a=t.length;for(n[r++]=2*a,i=0;a>i;i++){n[r++]=255&t.charCodeAt(i),n[r++]=(65280&t.charCodeAt(i))>>8}var o=e.length;for(n[r++]=o,i=0;o>i;i++){n[r++]=127&e.charCodeAt(i)}return n}function PackagePwdOnly(e){var t=[],n=0;t[n++]=1,t[n++]=1,t[n++]=0,t[n++]=0;
var r,i=e.length;for(t[n++]=i,r=0;i>r;r++){t[n++]=127&e.charCodeAt(r)}return t}function PackagePinOnly(e){var t=[],n=0;t[n++]=1,t[n++]=2,t[n++]=0,t[n++]=0,t[n++]=0;var r,i=e.length;for(t[n++]=i,r=0;i>r;r++){t[n++]=127&e.charCodeAt(r)}return t}function PackageLoginIntData(e){var t,n=[],r=0;for(t=0;t<e.length;t++){n[r++]=255&e.charCodeAt(t),n[r++]=(65280&e.charCodeAt(t))>>8}return n}function PackageSADataForProof(e){var t,n=[],r=0;for(t=0;t<e.length;t++){n[r++]=127&e.charCodeAt(t),n[r++]=(65280&e.charCodeAt(t))>>8
}return n}function PackageNewPwdOnly(e){var t=[],n=0;t[n++]=1,t[n++]=1;var r,i=e.length;for(t[n++]=i,r=0;i>r;r++){t[n++]=127&e.charCodeAt(r)}return t[n++]=0,t[n++]=0,t}function PackageNewAndOldPwd(e,t){var n=[],r=0;n[r++]=1,n[r++]=1;var i,a=t.length;for(n[r++]=a,i=0;a>i;i++){n[r++]=127&t.charCodeAt(i)}for(n[r++]=0,a=e.length,n[r++]=a,i=0;a>i;i++){n[r++]=127&e.charCodeAt(i)}return n}function mapByteToBase64(e){return e>=0&&26>e?String.fromCharCode(65+e):e>=26&&52>e?String.fromCharCode(97+e-26):e>=52&&62>e?String.fromCharCode(48+e-52):62==e?"+":"/"
}function base64Encode(e,t){var n,r="";for(n=t;4>n;n++){e>>=6}for(n=0;t>n;n++){r=mapByteToBase64(63&e)+r,e>>=6}return r}function byteArrayToBase64(e){var t,n,r=e.length,i="";for(t=r-3;t>=0;t-=3){n=e[t]|e[t+1]<<8|e[t+2]<<16,i+=base64Encode(n,4)}var a=r%3;for(n=0,t+=2;t>=0;t--){n=n<<8|e[t]}return 1==a?i=i+base64Encode(n<<16,2)+"==":2==a&&(i=i+base64Encode(n<<8,3)+"="),i}function parseRSAKeyFromString(e){var t=e.indexOf(";");if(0>t){return null}var n=e.substr(0,t),r=e.substr(t+1),i=n.indexOf("=");if(0>i){return null
}var a=n.substr(i+1);if(i=r.indexOf("="),0>i){return null}var o=r.substr(i+1),s=new Object;return s.n=hexStringToMP(o),s.e=parseInt(a,16),s}function RSAEncrypt(e,t){for(var n=[],r=42,i=2*t.n.size-r,a=0;a<e.length;a+=i){if(a+i>=e.length){var o=RSAEncryptBlock(e.slice(a),t,randomNum);o&&(n=o.concat(n))}else{var o=RSAEncryptBlock(e.slice(a,a+i),t,randomNum);o&&(n=o.concat(n))}}var s=byteArrayToBase64(n);return s}function RSAEncryptBlock(e,t,n){var r=t.n,i=t.e,a=e.length,o=2*r.size,s=42;if(a+s>o){return null}applyPKCSv2Padding(e,o,n),e=e.reverse();
var l=byteArrayToMP(e),u=modularExp(l,i,r);u.size=r.size;var d=mpToByteArray(u);return d=d.reverse()}function JSMPnumber(){this.size=1,this.data=[],this.data[0]=0}function duplicateMP(e){var t=new JSMPnumber;return t.size=e.size,t.data=e.data.slice(0),t}function byteArrayToMP(e){var t=new JSMPnumber,n=0,r=e.length,i=r>>1;for(n=0;i>n;n++){t.data[n]=e[2*n]+(e[1+2*n]<<8)}return r%2&&(t.data[n++]=e[r-1]),t.size=n,t}function mpToByteArray(e){var t=[],n=0,r=e.size;for(n=0;r>n;n++){t[2*n]=255&e.data[n];var i=e.data[n]>>>8;
t[2*n+1]=i}return t}function modularExp(e,t,n){for(var r=[],i=0;t>0;){r[i]=1&t,t>>>=1,i++}for(var a=duplicateMP(e),o=i-2;o>=0;o--){a=modularMultiply(a,a,n),1==r[o]&&(a=modularMultiply(a,e,n))}return a}function modularMultiply(e,t,n){var r=multiplyMP(e,t),i=divideMP(r,n);return i.r}function multiplyMP(e,t){var n=new JSMPnumber;n.size=e.size+t.size;var r,i;for(r=0;r<n.size;r++){n.data[r]=0}var a=e.data,o=t.data,s=n.data;if(e==t){for(r=0;r<e.size;r++){s[2*r]+=a[r]*a[r]}for(r=1;r<e.size;r++){for(i=0;r>i;i++){s[r+i]+=2*a[r]*a[i]
}}}else{for(r=0;r<e.size;r++){for(i=0;i<t.size;i++){s[r+i]+=a[r]*o[i]}}}return normalizeJSMP(n),n}function normalizeJSMP(e){var t,n,r,i,a;for(r=e.size,n=0,t=0;r>t;t++){i=e.data[t],i+=n,a=i,n=Math.floor(i/65536),i-=65536*n,e.data[t]=i}}function removeLeadingZeroes(e){for(var t=e.size-1;t>0&&0==e.data[t--];){e.size--}}function divideMP(e,t){var n=e.size,r=t.size,i=t.data[r-1],a=t.data[r-1]+t.data[r-2]/65536,o=new JSMPnumber;o.size=n-r+1,e.data[n]=0;for(var s=n-1;s>=r-1;s--){var l=s-r+1,u=Math.floor((65536*e.data[s+1]+e.data[s])/a);
if(u>0){var d=multiplyAndSubtract(e,u,t,l);for(0>d&&(u--,multiplyAndSubtract(e,u,t,l));d>0&&e.data[s]>=i;){d=multiplyAndSubtract(e,1,t,l),d>0&&u++}}o.data[l]=u}removeLeadingZeroes(e);var c={"q":o,"r":e};return c}function multiplyAndSubtract(e,t,n,r){var i,a=e.data.slice(0),o=0,s=e.data;for(i=0;i<n.size;i++){var l=o+n.data[i]*t;o=l>>>16,l-=65536*o,l>s[i+r]?(s[i+r]+=65536-l,o++):s[i+r]-=l}return o>0&&(s[i+r]-=o),s[i+r]<0?(e.data=a.slice(0),-1):1}function applyPKCSv2Padding(e,t,n){var r,i=e.length,a=[218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9],o=t-i-40-2,s=[];
for(r=0;o>r;r++){s[r]=0}s[o]=1;var l=a.concat(s,e),u=[];for(r=0;20>r;r++){u[r]=Math.floor(256*Math.random())}u=SHA1(u.concat(n));var d=MGF(u,t-21),c=XORarrays(l,d),p=MGF(c,20),m=XORarrays(u,p),f=[];for(f[0]=0,f=f.concat(m,c),r=0;r<f.length;r++){e[r]=f[r]}}function MGF(e,t){if(t>4096){return null}var n=e.slice(0),r=n.length;n[r++]=0,n[r++]=0,n[r++]=0,n[r]=0;for(var i=0,a=[];a.length<t;){n[r]=i++,a=a.concat(SHA1(n))}return a.slice(0,t)}function XORarrays(e,t){if(e.length!=t.length){return null}for(var n=[],r=e.length,i=0;r>i;i++){n[i]=e[i]^t[i]
}return n}function SHA1(e){var t,n=e.slice(0);PadSHA1Input(n);var r={"A":1732584193,"B":4023233417,"C":2562383102,"D":271733878,"E":3285377520};for(t=0;t<n.length;t+=64){SHA1RoundFunction(r,n,t)}var i=[];return wordToBytes(r.A,i,0),wordToBytes(r.B,i,4),wordToBytes(r.C,i,8),wordToBytes(r.D,i,12),wordToBytes(r.E,i,16),i}function wordToBytes(e,t,n){var r;for(r=3;r>=0;r--){t[n+r]=255&e,e>>>=8}}function PadSHA1Input(e){var t,n=e.length,r=n,i=n%64,a=55>i?56:120;for(e[r++]=128,t=i+1;a>t;t++){e[r++]=0}var o=8*n;for(t=1;8>t;t++){e[r+8-t]=255&o,o>>>=8
}}function SHA1RoundFunction(e,t,n){var r,i,a,o=1518500249,s=1859775393,l=2400959708,u=3395469782,d=[],c=e.A,p=e.B,m=e.C,f=e.D,v=e.E;for(i=0,a=n;16>i;i++,a+=4){d[i]=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]<<0}for(i=16;80>i;i++){d[i]=rotateLeft(d[i-3]^d[i-8]^d[i-14]^d[i-16],1)}var g;for(r=0;20>r;r++){g=rotateLeft(c,5)+(p&m|~p&f)+v+d[r]+o&4294967295,v=f,f=m,m=rotateLeft(p,30),p=c,c=g}for(r=20;40>r;r++){g=rotateLeft(c,5)+(p^m^f)+v+d[r]+s&4294967295,v=f,f=m,m=rotateLeft(p,30),p=c,c=g}for(r=40;60>r;r++){g=rotateLeft(c,5)+(p&m|p&f|m&f)+v+d[r]+l&4294967295,v=f,f=m,m=rotateLeft(p,30),p=c,c=g
}for(r=60;80>r;r++){g=rotateLeft(c,5)+(p^m^f)+v+d[r]+u&4294967295,v=f,f=m,m=rotateLeft(p,30),p=c,c=g}e.A=e.A+c&4294967295,e.B=e.B+p&4294967295,e.C=e.C+m&4294967295,e.D=e.D+f&4294967295,e.E=e.E+v&4294967295}function rotateLeft(e,t){var n=e>>>32-t,r=(1<<32-t)-1,i=e&r;return i<<t|n}function hexStringToMP(e){var t,n,r=Math.ceil(e.length/4),i=new JSMPnumber;for(i.size=r,t=0;r>t;t++){n=e.substr(4*t,4),i.data[r-1-t]=parseInt(n,16)}return i}!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],e):e(ko,ko.validation={})
}(function(e,t){function n(e){var t="max"===e;return function(n,r){if(a.utils.isEmptyVal(n)){return!0}var i,o;void 0===r.typeAttr?(o="text",i=r):(o=r.typeAttr,i=r.value),isNaN(i)||i instanceof Date||(o="number");var s,l,u;switch(o.toLowerCase()){case"week":if(s=/^(\d{4})-W(\d{2})$/,l=n.match(s),null===l){throw new Error("Invalid value for "+e+" attribute for week input.  Should look like '2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min")}return u=i.match(s),u?t?l[1]<u[1]||l[1]===u[1]&&l[2]<=u[2]:l[1]>u[1]||l[1]===u[1]&&l[2]>=u[2]:!1;
case"month":if(s=/^(\d{4})-(\d{2})$/,l=n.match(s),null===l){throw new Error("Invalid value for "+e+" attribute for month input.  Should look like '2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min")}return u=i.match(s),u?t?l[1]<u[1]||l[1]===u[1]&&l[2]<=u[2]:l[1]>u[1]||l[1]===u[1]&&l[2]>=u[2]:!1;case"number":case"range":return t?!isNaN(n)&&parseFloat(n)<=parseFloat(i):!isNaN(n)&&parseFloat(n)>=parseFloat(i);default:return t?i>=n:n>=i}}}function r(e,t,n){return t.validator(e(),void 0===n.params?!0:s(n.params))?!0:(e.setError(a.formatMessage(n.message||t.message,s(n.params),e)),!1)
}function i(e,t,n){e.isValidating(!0);var r=function(r){var i=!1,o="";return e.__valid__()?(r.message?(i=r.isValid,o=r.message):i=r,i||(e.error(a.formatMessage(o||n.message||t.message,s(n.params),e)),e.__valid__(i)),void e.isValidating(!1)):void e.isValidating(!1)};t.validator(e(),s(n.params||!0),r)}if("undefined"==typeof e){throw new Error("Knockout is required, please ensure it is loaded before loading this validation plug-in")}e.validation=t;var a=e.validation,o=e.utils,s=o.unwrapObservable,l=o.arrayForEach,u=o.extend,d={"registerExtenders":!0,"messagesOnModified":!0,"errorsAsTitle":!0,"errorsAsTitleOnModified":!1,"messageTemplate":null,"insertMessages":!0,"parseInputAttributes":!1,"writeInputAttributes":!1,"decorateInputElement":!1,"decorateElementOnModified":!0,"errorClass":null,"errorElementClass":"validationElement","errorMessageClass":"validationMessage","allowHtmlMessages":!1,"grouping":{"deep":!1,"observable":!0,"live":!1},"validate":{}},c=u({},d);
c.html5Attributes=["required","pattern","min","max","step"],c.html5InputTypes=["email","number","date"],c.reset=function(){u(c,d)},a.configuration=c,a.utils=function(){var e=(new Date).getTime(),t={},n="__ko_validation__";return{"isArray":function(e){return e.isArray||"[object Array]"===Object.prototype.toString.call(e)},"isObject":function(e){return null!==e&&"object"==typeof e},"isNumber":function(e){return!isNaN(e)},"isObservableArray":function(e){return!!e&&"function"==typeof e.remove&&"function"==typeof e.removeAll&&"function"==typeof e.destroy&&"function"==typeof e.destroyAll&&"function"==typeof e.indexOf&&"function"==typeof e.replace
},"values":function(e){var t=[];for(var n in e){e.hasOwnProperty(n)&&t.push(e[n])}return t},"getValue":function(e){return"function"==typeof e?e():e},"hasAttribute":function(e,t){return null!==e.getAttribute(t)},"getAttribute":function(e,t){return e.getAttribute(t)},"setAttribute":function(e,t,n){return e.setAttribute(t,n)},"isValidatable":function(e){return!!(e&&e.rules&&e.isValid&&e.isModified)},"insertAfter":function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},"newId":function(){return e+=1},"getConfigOptions":function(e){var t=a.utils.contextFor(e);
return t||a.configuration},"setDomData":function(e,r){var i=e[n];i||(e[n]=i=a.utils.newId()),t[i]=r},"getDomData":function(e){var r=e[n];return r?t[r]:void 0},"contextFor":function(e){switch(e.nodeType){case 1:case 8:var t=a.utils.getDomData(e);if(t){return t}if(e.parentNode){return a.utils.contextFor(e.parentNode)}}return void 0},"isEmptyVal":function(e){return void 0===e?!0:null===e?!0:""===e?!0:void 0},"getOriginalElementTitle":function(e){var t=a.utils.getAttribute(e,"data-orig-title"),n=e.title,r=a.utils.hasAttribute(e,"data-orig-title");
return r?t:n},"async":function(e){window.setImmediate?window.setImmediate(e):window.setTimeout(e,0)},"forEach":function(e,t){if(a.utils.isArray(e)){return l(e,t)}for(var n in e){e.hasOwnProperty(n)&&t(e[n],n)}}}}();var p=function(){function t(e){l(e.subscriptions,function(e){e.dispose()}),e.subscriptions=[]}function n(e){e.options.deep&&(l(e.flagged,function(e){delete e.__kv_traversed}),e.flagged.length=0),e.options.live||t(e)}function r(e,r){r.validatables=[],t(r),i(e,r),n(r)}function i(t,n,r){var a=[],o=t.peek?t.peek():t;
t.__kv_traversed!==!0&&(n.options.deep&&(t.__kv_traversed=!0,n.flagged.push(t)),r=void 0!==r?r:n.options.deep?1:-1,e.isObservable(t)&&(t.errors||m.isValidatable(t)||t.extend({"validatable":!0}),n.validatables.push(t),n.options.live&&m.isObservableArray(t)&&n.subscriptions.push(t.subscribe(function(){n.graphMonitor.valueHasMutated()}))),o&&!o._destroy&&(m.isArray(o)?a=o:m.isObject(o)&&(a=m.values(o))),0!==r&&m.forEach(a,function(t){!t||t.nodeType||e.isComputed(t)&&!t.rules||i(t,n,r+1)}))}function d(e){var t=[];
return l(e,function(e){m.isValidatable(e)&&!e.isValid()&&t.push(e.error.peek())}),t}var c=0,p=a.configuration,m=a.utils;return{"init":function(e,t){c>0&&!t||(e=e||{},e.errorElementClass=e.errorElementClass||e.errorClass||p.errorElementClass,e.errorMessageClass=e.errorMessageClass||e.errorClass||p.errorMessageClass,u(p,e),p.registerExtenders&&a.registerExtenders(),c=1)},"reset":a.configuration.reset,"group":function(t,n){n=u(u({},p.grouping),n);var i={"options":n,"graphMonitor":e.observable(),"flagged":[],"subscriptions":[],"validatables":[]},a=null;
return a=n.observable?e.computed(function(){return i.graphMonitor(),r(t,i),d(i.validatables)}):function(){return r(t,i),d(i.validatables)},a.showAllMessages=function(e){void 0===e&&(e=!0),a.forEach(function(t){m.isValidatable(t)&&t.isModified(e)})},a.isAnyMessageShown=function(){var e;return e=!!a.find(function(e){return m.isValidatable(e)&&!e.isValid()&&e.isModified()})},a.filter=function(e){return e=e||function(){return!0},a(),o.arrayFilter(i.validatables,e)},a.find=function(e){return e=e||function(){return!0
},a(),o.arrayFirst(i.validatables,e)},a.forEach=function(e){e=e||function(){},a(),l(i.validatables,e)},a.map=function(e){return e=e||function(e){return e},a(),o.arrayMap(i.validatables,e)},a._updateState=function(e){if(!m.isObject(e)){throw new Error("An object is required.")}return t=e,n.observable?void i.graphMonitor.valueHasMutated():(r(e,i),d(i.validatables))},a},"formatMessage":function(e,t,n){if(m.isObject(t)&&t.typeAttr&&(t=t.value),"function"==typeof e){return e(t,n)}var r=s(t)||[];return m.isArray(r)||(r=[r]),e.replace(/{(\d+)}/gi,function(e,t){return"undefined"!=typeof r[t]?r[t]:e
})},"addRule":function(e,t){e.extend({"validatable":!0});var n=!!o.arrayFirst(e.rules(),function(e){return e.rule&&e.rule===t.rule});return n||e.rules.push(t),e},"addAnonymousRule":function(e,t){void 0===t.message&&(t.message="Error"),t.onlyIf&&(t.condition=t.onlyIf),a.addRule(e,t)},"addExtender":function(t){e.extenders[t]=function(e,n){return n&&(n.message||n.onlyIf)?a.addRule(e,{"rule":t,"message":n.message,"params":m.isEmptyVal(n.params)?!0:n.params,"condition":n.onlyIf}):a.addRule(e,{"rule":t,"params":n})
}},"registerExtenders":function(){if(p.registerExtenders){for(var t in a.rules){a.rules.hasOwnProperty(t)&&(e.extenders[t]||a.addExtender(t))}}},"insertValidationMessage":function(e){var t=document.createElement("SPAN");return t.className=m.getConfigOptions(e).errorMessageClass,m.insertAfter(e,t),t},"parseInputValidationAttributes":function(e,t){l(a.configuration.html5Attributes,function(n){if(m.hasAttribute(e,n)){var r=e.getAttribute(n)||!0;if("min"===n||"max"===n){var i=e.getAttribute("type");"undefined"!=typeof i&&i||(i="text"),r={"typeAttr":i,"value":r}
}a.addRule(t(),{"rule":n,"params":r})}});var n=e.getAttribute("type");l(a.configuration.html5InputTypes,function(e){e===n&&a.addRule(t(),{"rule":"date"===e?"dateISO":e,"params":!0})})},"writeInputValidationAttributes":function(t,n){var r=n();if(r&&r.rules){var i=r.rules();l(a.configuration.html5Attributes,function(n){var r=o.arrayFirst(i,function(e){return e.rule&&e.rule.toLowerCase()===n.toLowerCase()});r&&e.computed({"read":function(){var i=e.unwrap(r.params);"pattern"===r.rule&&i instanceof RegExp&&(i=i.source),t.setAttribute(n,i)
},"disposeWhenNodeIsRemoved":t})}),i=null}},"makeBindingHandlerValidatable":function(t){var n=e.bindingHandlers[t].init;e.bindingHandlers[t].init=function(t,r,i,a,o){return n(t,r,i,a,o),e.bindingHandlers.validationCore.init(t,r,i,a,o)}},"setRules":function(t,n){var r=function(t,n){if(t&&n){for(var i in n){if(n.hasOwnProperty(i)){var o=n[i];if(t[i]){var l=t[i],u=s(l),d={},c={};for(var p in o){o.hasOwnProperty(p)&&(a.rules[p]?d[p]=o[p]:c[p]=o[p])}if(e.isObservable(l)&&l.extend(d),u&&m.isArray(u)){for(var f=0;f<u.length;f++){r(u[f],c)
}}else{r(u,c)}}}}}};r(t,n)}}}();u(e.validation,p),a.rules={},a.rules.required={"validator":function(e,t){var n;return void 0===e||null===e?!t:(n=e,"string"==typeof e&&(n=String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")),t?(n+"").length>0:!0)},"message":"This field is required."},a.rules.min={"validator":n("min"),"message":"Please enter a value greater than or equal to {0}."},a.rules.max={"validator":n("max"),"message":"Please enter a value less than or equal to {0}."},a.rules.minLength={"validator":function(e,t){if(a.utils.isEmptyVal(e)){return!0
}var n=a.utils.isNumber(e)?""+e:e;return n.length>=t},"message":"Please enter at least {0} characters."},a.rules.maxLength={"validator":function(e,t){if(a.utils.isEmptyVal(e)){return!0}var n=a.utils.isNumber(e)?""+e:e;return n.length<=t},"message":"Please enter no more than {0} characters."},a.rules.pattern={"validator":function(e,t){return a.utils.isEmptyVal(e)||null!==e.toString().match(t)},"message":"Please check this value."},a.rules.step={"validator":function(e,t){if(a.utils.isEmptyVal(e)||"any"===t){return!0
}var n=100*e%(100*t);return Math.abs(n)<1e-5||Math.abs(1-n)<1e-5},"message":"The value must increment by {0}."},a.rules.email={"validator":function(e,t){return t?a.utils.isEmptyVal(e)||t&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e):!0
},"message":"Please enter a proper email address."},a.rules.date={"validator":function(e,t){return t?a.utils.isEmptyVal(e)||t&&!/Invalid|NaN/.test(new Date(e)):!0},"message":"Please enter a proper date."},a.rules.dateISO={"validator":function(e,t){return t?a.utils.isEmptyVal(e)||t&&/^\d{4}[-/](?:0?[1-9]|1[012])[-/](?:0?[1-9]|[12][0-9]|3[01])$/.test(e):!0},"message":"Please enter a proper date."},a.rules.number={"validator":function(e,t){return t?a.utils.isEmptyVal(e)||t&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e):!0
},"message":"Please enter a number."},a.rules.digit={"validator":function(e,t){return t?a.utils.isEmptyVal(e)||t&&/^\d+$/.test(e):!0},"message":"Please enter a digit."},a.rules.phoneUS={"validator":function(e,t){return t?a.utils.isEmptyVal(e)?!0:"string"!=typeof e?!1:(e=e.replace(/\s+/g,""),t&&e.length>9&&e.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)):!0},"message":"Please specify a valid phone number."},a.rules.equal={"validator":function(e,t){var n=t;return e===a.utils.getValue(n)},"message":"Values must equal."},a.rules.notEqual={"validator":function(e,t){var n=t;
return e!==a.utils.getValue(n)},"message":"Please choose another value."},a.rules.unique={"validator":function(e,t){var n=a.utils.getValue(t.collection),r=a.utils.getValue(t.externalValue),i=0;return e&&n?(o.arrayFilter(n,function(n){e===(t.valueAccessor?t.valueAccessor(n):n)&&i++}),(r?1:2)>i):!0},"message":"Please make sure the value is unique."},function(){a.registerExtenders()}(),e.bindingHandlers.validationCore=function(){return{"init":function(t,n){var r=a.utils.getConfigOptions(t),i=n();if(r.parseInputAttributes&&a.utils.async(function(){a.parseInputValidationAttributes(t,n)
}),r.insertMessages&&a.utils.isValidatable(i)){var o=a.insertValidationMessage(t);r.messageTemplate?e.renderTemplate(r.messageTemplate,{"field":i},null,o,"replaceNode"):e.applyBindingsToNode(o,{"validationMessage":i})}r.writeInputAttributes&&a.utils.isValidatable(i)&&a.writeInputValidationAttributes(t,n),r.decorateInputElement&&a.utils.isValidatable(i)&&e.applyBindingsToNode(t,{"validationElement":i})}}}(),a.makeBindingHandlerValidatable("value"),a.makeBindingHandlerValidatable("checked"),e.bindingHandlers.textInput&&a.makeBindingHandlerValidatable("textInput"),a.makeBindingHandlerValidatable("selectedOptions"),e.bindingHandlers.validationMessage={"update":function(t,n){var r=n(),i=a.utils.getConfigOptions(t),l=(s(r),!1),u=!1;
if(null===r||"undefined"==typeof r){throw new Error("Cannot bind validationMessage to undefined value. data-bind expression: "+t.getAttribute("data-bind"))}l=r.isModified&&r.isModified(),u=r.isValid&&r.isValid();var d=null;(!i.messagesOnModified||l)&&(d=u?null:r.error);var c=!i.messagesOnModified||l?!u:!1,p="none"!==t.style.display;i.allowHtmlMessages?o.setHtml(t,d):e.bindingHandlers.text.update(t,function(){return d}),p&&!c?t.style.display="none":!p&&c&&(t.style.display="")}},e.bindingHandlers.validationElement={"update":function(t,n,r){var i=n(),o=a.utils.getConfigOptions(t),l=(s(i),!1),u=!1;
if(null===i||"undefined"==typeof i){throw new Error("Cannot bind validationElement to undefined value. data-bind expression: "+t.getAttribute("data-bind"))}l=i.isModified&&i.isModified(),u=i.isValid&&i.isValid();var d=function(){var e={},t=!o.decorateElementOnModified||l?!u:!1;return e[o.errorElementClass]=t,e};e.bindingHandlers.css.update(t,d,r),o.errorsAsTitle&&e.bindingHandlers.attr.update(t,function(){var e=!o.errorsAsTitleOnModified||l,n=a.utils.getOriginalElementTitle(t);return e&&!u?{"title":i.error,"data-orig-title":n}:!e||u?{"title":n,"data-orig-title":null}:void 0
})}},e.bindingHandlers.validationOptions=function(){return{"init":function(e,t){var n=s(t());if(n){var r=u({},a.configuration);u(r,n),a.utils.setDomData(e,r)}}}}(),e.extenders.validation=function(e,t){return l(a.utils.isArray(t)?t:[t],function(t){a.addAnonymousRule(e,t)}),e},e.extenders.validatable=function(t,n){if(a.utils.isObject(n)||(n={"enable":n}),"enable"in n||(n.enable=!0),n.enable&&!a.utils.isValidatable(t)){var r=a.configuration.validate||{},i={"throttleEvaluation":n.throttle||r.throttle};t.error=e.observable(null),t.rules=e.observableArray(),t.isValidating=e.observable(!1),t.__valid__=e.observable(!0),t.isModified=e.observable(!1),t.isValid=e.computed(t.__valid__),t.setError=function(e){var n=t.error.peek(),r=t.__valid__.peek();
t.error(e),t.__valid__(!1),n===e||r||t.isValid.notifySubscribers()},t.clearError=function(){return t.error(null),t.__valid__(!0),t};var o=t.subscribe(function(){t.isModified(!0)}),s=e.computed(u({"read":function(){return t(),t.rules(),a.validateObservable(t),!0}},i));u(s,i),t._disposeValidation=function(){t.isValid.dispose(),t.rules.removeAll(),o.dispose(),s.dispose(),delete t.rules,delete t.error,delete t.isValid,delete t.isValidating,delete t.__valid__,delete t.isModified,delete t.setError,delete t.clearError,delete t._disposeValidation
}}else{n.enable===!1&&t._disposeValidation&&t._disposeValidation()}return t},a.validateObservable=function(e){for(var t,n,o=0,s=e.rules(),l=s.length;l>o;o++){if(n=s[o],!n.condition||n.condition()){if(t=n.rule?a.rules[n.rule]:n,t.async||n.async){i(e,t,n)}else{if(!r(e,t,n)){return!1}}}}return e.clearError(),!0};var m,f={};a.defineLocale=function(e,t){return e&&t?(f[e.toLowerCase()]=t,t):null},a.locale=function(e){if(e){if(e=e.toLowerCase(),!f.hasOwnProperty(e)){throw new Error("Localization "+e+" has not been loaded.")
}a.localize(f[e]),m=e}return m},a.localize=function(e){var t=a.rules;for(var n in e){t.hasOwnProperty(n)&&(t[n].message=e[n])}},function(){var e={},t=a.rules;for(var n in t){t.hasOwnProperty(n)&&(e[n]=t[n].message)}a.defineLocale("en-us",e)}(),m="en-us",e.applyBindingsWithValidation=function(t,n,r){var i,o=document.body;n&&n.nodeType?(o=n,i=r):i=n,a.init(),i&&(i=u(u({},a.configuration),i),a.utils.setDomData(o,i)),e.applyBindings(t,o)};var v=e.applyBindings;e.applyBindings=function(e,t){a.init(),v(e,t)},e.validatedObservable=function(t,n){if(!n&&!a.utils.isObject(t)){return e.observable(t).extend({"validatable":!0})
}var r=e.observable(t);return r.errors=a.group(a.utils.isObject(t)?t:{},n),r.isValid=e.observable(0===r.errors().length),e.isObservable(r.errors)?r.errors.subscribe(function(e){r.isValid(0===e.length)}):e.computed(r.errors).subscribe(function(e){r.isValid(0===e.length)}),r.subscribe(function(e){a.utils.isObject(e)||(e={}),r.errors._updateState(e),r.isValid(0===r.errors().length)}),r}}),/*!
--------------------------------------------------------------------------------------------------- 
Bootstrap: dropdown.js v3.3.6 (http://getbootstrap.com)

Microsoft grants you the right to use these JavaScript files for the sole purpose of either: (i) interacting through your browser with the Microsoft website, subject to the website's terms of use; or (ii) using the files as included with a Microsoft product subject to that product's license terms. Microsoft reserves all other rights to the files not expressly granted by Microsoft, whether by implication, estoppel or otherwise. The notices and licenses below are for informational purposes only. 


Bootstrap: dropdown.js v3.3.6 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)


Provided for Informational Purposes Only


MIT License 


Permission is hereby granted, free of charge, to any person obtaining 
a copy of this software and associated documentation files (the 
"Software"), to deal in the Software without restriction, including 
without limitation the rights to use, copy, modify, merge, publish, 
distribute, sublicense, and/or sell copies of the Software, and to 
permit persons to whom the Software is furnished to do so, subject to 
the following conditions: 

The above copyright notice and this permission notice shall be 
included in all copies or substantial portions of the Software. 
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. 
-----------------------------------------------------------------------------------------
*/
+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function n(n){n&&3===n.which||(e(i).remove(),e(a).each(function(){var r=e(this),i=t(r),a={"relatedTarget":this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target)||(i.trigger(n=e.Event("hide.bs.dropdown",a)),n.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger(e.Event("hidden.bs.dropdown",a)))))
}))}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",a='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.6",o.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var a=t(i),o=a.hasClass("open");if(n(),!o){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);
var s={"relatedTarget":this};if(a.trigger(r=e.Event("show.bs.dropdown",s)),r.isDefaultPrevented()){return}i.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},o.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var i=t(r),o=i.hasClass("open");if(!o&&27!=n.which||o&&27==n.which){return 27==n.which&&i.find(a).trigger("focus"),r.trigger("click")
}var s=" li:not(.disabled):visible a",l=i.find(".dropdown-menu"+s);if(l.length){var u=l.index(n.target);38==n.which&&u>0&&u--,40==n.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,o.prototype.toggle).on("keydown.bs.dropdown.data-api",a,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)
}(jQuery),function(){var e=window,t=(e.jQuery,e.$Debug),n=e.wLive=e.wLive||{};n.__namespace=!0;var r=n.Core=n.Core||{};r.__namespace=!0;var i=n.Controls=n.Controls||{};i.__namespace=!0,t.assert(e.$Config,"ConfigBurner should output: $Config");var a=e.$Config;if(a.handlerBaseUrl=a.handlerBaseUrl||"",!a.sd){var o=document.domain,s=o.split(".");a.sd=1===s.length?"":"."+s[s.length-2]+".com"}t.assert(a.mkt,"ConfigBurner should output: $.$Config.mkt"),a.mkt=a.mkt||"na",a.prop=a.prop||"Account","undefined"!=typeof window.SymRealWinOpen&&(window.open=window.SymRealWinOpen)
}(),function(){function e(){var e=document.title,t=document.location.hash;e!=a&&t&&e.indexOf(t)==e.length-t.length&&(document.title=a),a=document.title}function t(){for(var e=0,t=arguments.length;t>e;e++){for(var r=this,i=arguments[e].split("."),a=0,o=i.length;o>a;a++){var s=i[a],l=r[s];l||(l=r[s]={}),l.__namespace||(0===a&&"Sys"!==arguments[e]&&(n.Sys.__rootNamespaces[Sys.__rootNamespaces.length]=l),l.__namespace=!0,l.__typeName=i.slice(0,a+1).join("."),l.getName=function(){return this.__typeName}),r=l}}return r
}var n=window,r=n.wLive;n.$Debug||(n.$Debug={"enabled":!1,"trace":function(){}});var i=n.document;n._d=i,n._ce=function(e){return i.createElement(e)},n._ge=function(e){return i.getElementById(e)},n._get=function(e){return i.getElementsByTagName(e)},n._dh=i.head=i.head||n._get("head")[0],r.dh=jQuery("#head")[0]||n._dh;var a;jQuery(document).bind("propertychange",e),n.registerNamespace=t,t("Sys"),n.Sys.__rootNamespaces||(n.Sys.__rootNamespaces=[Sys])}(),function(){function _objectMap(e,t){for(var n in e){e.hasOwnProperty(n)&&t(n,e[n])
}}function updateObject(e,t){for(var n in t){var r=e[n],i=t[n];i.constructor==Array?(r&&r.constructor==Array||(r=e[n]=[]),updateObject(r,i)):"object"==typeof i?("object"!=typeof r&&(r=e[n]={}),updateObject(r,i)):e[n]=i}}function evalStringsAndAddScripts(e,t){for(var n=0;n<e.length;n++){$Utility.eval(e[n])}for(n=0;n<t.length;n++){if(t[n]&&""!=t[n]){var r=document.createElement("SCRIPT");r.src=t[n],document.body.appendChild(r)}}}function _getQsValues(e){var t={};return e&&e.length>1&&("?"==e[0]&&(e=e.substr(1)),e.split("&").forEach(function(e){var n=e.split("="),r=n[0],i=n[1];
t[r]||(t[r]=[]),t[r].push(i)})),t}function _updateQsValues(e,t){return e=e||{},t&&_objectMap(t,function(t,n){e[t]=n}),e}function _formatQsValues(e){var t="";return e&&_objectMap(e,function(e,n){for(var r=null,i=0;i<n.length;i++){null!==n[i]&&void 0!==n[i]&&(r?r+=",":r="",r+=n[i])}t&&(t+="&"),t+=e,null!==r&&(t+="="+r)}),t&&(t="?"+t),t}var w=window,$config=w.$Config,jQuery=w.jQuery;w.wLive=w.wLive;var wl=w.wLive,Debug=w.$Debug,_ConstDefaultDeliminator="&",_ConstKeyValueDeliminator="=";wl.truncateEllipsis=function(e,t){return t=Math.max(parseInt(t,10)||1e5,4),e?e.length>t?e.substring(0,t-3)+"...":e:""
};var $Utility=w.$Utility={};$Utility.eval=function(s){eval(s)},$Utility.navigateTo=function(e,t){try{t?window.open(e,t):window.location.href=e}catch(n){}},$Utility.postTo=function(e,t){if(e&&"object"==typeof t){var n,r=document.createElement("form");r.action=e,r.method="post",jQuery.each(t,function(e,t){n=document.createElement("input"),n.type="hidden",n.id=e,n.name=e,n.value=t,r.appendChild(n)}),document.body.appendChild(r),r.submit()}},$Utility.deserialize=function(e,t,n,r){var i={};if(t=t||_ConstDefaultDeliminator,e){for(var a=e.split(t),o=a.length,s=0;o>s;s++){var l=a[s],u=l.split(_ConstKeyValueDeliminator);
if(u.length>0){var d=u[0].trim();u.splice(0,1);var c=u.join(_ConstKeyValueDeliminator).trim();try{Debug.assert(n||void 0===i[d],"Duplicate key detected: "+d+" value: "+i[d]+" new value: "+(r?c:c.decodeUrl())),i[d]=r?c:c.decodeUrl()}catch(p){Debug.assert(!1,"Deserialize Failed on value: "+c),i[d]=""}}}}return i},$Utility.serialize=function(e,t,n){Debug.assert(e,"hashtable must be provided"),t=t||_ConstDefaultDeliminator;var r=[];for(var i in e){var a=e[i];a=null==a?"":a.toString(),r.push(i,_ConstKeyValueDeliminator,n?a:a.encodeUrl(),t)
}return r.length>0&&r.pop(),r.join("")},$Utility.updateObject=updateObject;var scrTag="scr";scrTag+="ipt";var endScrTag="/scr";endScrTag+="ipt";var ajaxInnerHtmlRegex=new RegExp("<"+scrTag+' type="text/javascript"( src="([^"]*?)"){0,1}(( loadfirst="true")|( defer="defer")){0,1}( id="[^"]*?"){0,1}>([\\w\\W]*?)<'+endScrTag+">","gim"),debuggerAjaxInnerHtmlRegex=new RegExp("<"+scrTag,"gim");$Utility.ajaxInnerHtml=function(e,t){ajaxInnerHtmlRegex.lastIndex=0;for(var n,r=[],i=[],a=[],o=[],s=[],l=0;n=ajaxInnerHtmlRegex.exec(t);){r.push(t.substring(l,n.index)),n[4]&&""!=n[4]?(o.push(n[7]),s.push(n[2])):(i.push(n[7]),a.push(n[2])),l=ajaxInnerHtmlRegex.lastIndex
}r.push(t.substring(l)),Debug.assert(0==(debuggerAjaxInnerHtmlRegex.lastIndex=0)&&!debuggerAjaxInnerHtmlRegex.exec(r.join("")),"Invalid ajax script reference"),evalStringsAndAddScripts(o,s),e.innerHTML=r.join(""),evalStringsAndAddScripts(i,a)},$Utility.generateGuid=function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.floor(16*Math.random()),n="x"==e?t:3&t|8;return n.toString(16)});return e},$Utility.firePageLoadEvent=function(e){$config.isCustomPerf||$Do.when("doc.load",function(){w.$ReportEvent.PageLoadCompleted(),w.$ReportEvent.Fire(e+"_Client")
})},$Utility.generateUrl=function(e,t,n){var r="";if(e&&t){if(r=e+t,n){var i=r.indexOf("?");if(-1!==i){var a=_updateQsValues(_getQsValues(w.location.search),_getQsValues(r.substr(i)));r=r.substr(0,i),r+=_formatQsValues(a)}else{r+=w.location.search}}return r}return r},$Utility.addQueryString=function(e,t,n){if(e&&t&&"undefined"!=typeof n&&null!==n){var r=new RegExp("([?&])"+t+"=.*?(&|#|$)(.*)","gi");if(r.test(e)){e=e.replace(r,"$1"+t+"="+encodeURI(n)+"$2$3")}else{var i=-1!==e.indexOf("?")?"&":"?";e+=i+t+"="+encodeURI(n)
}}return e},$Utility.getQsValues=_getQsValues,$Utility.formatQsValues=_formatQsValues,$Utility.updateQsValues=_updateQsValues}(),function(){var e=window.jQuery;e(function(){var t=e("body"),n=e("<span/>").css({"borderLeftColor":"red","borderRightColor":"blue","position":"absolute","top":"-999px"}).appendTo(t);$Utility._isHighContrast=n.css("borderLeftColor")===n.css("borderRightColor"),n.remove(),$Utility._isHighContrast&&t.addClass("highContrast")}),$Utility.isHighContrast=function(){return $Utility._isHighContrast
}}(),function(){function e(e,a,s,l,u,d){o.assert(e,"$Beacon.fire: target required. Caller:"+arguments.callee.caller);var c=t();e=i(e,a),o.assert(d||e.length<=2e3,"Url is too long and will be truncated: "+e),e=e.substr(0,Math.min(e.length,2e3)),u||(e=i(e,{"r":Math.random()})),r(c,n(s,c),n(l,c)),c.src=e}function t(){for(var e,t=u.length,n=0;t>n;n++){var r=u[n];if(!r.inUse){e=r;break}}return e||(e=new Image,u.push(e)),e.inUse=!0,e}function n(e,t){return function(){r(t,null,null),t.inUse=!1,e&&e()}}function r(e,t,n){e.onload=t,e.onabort=e.onerror=n
}function i(e,t){if(e=e||"",t){var n=s.serialize(t),r="?";if(e.indexOf("?")>=0){var i=e.charAt(e.length-1);r="?"==i||"&"==i?"":"&"}e+=r+n}return e}var a=window,o=(a.jQuery,a.$Debug),s=a.$Utility,l=(a.wLive,a.$Beacon={}),u=[],d=150;l.Pool=u,l.fire=function(t,n,r,i,a,o){setTimeout(function(){e(t,n,r,i,a,o)},0)},l.fireAndHold=function(t,n){if(e(t,n),!$B.IE){for(var r=(new Date).getTime()+d;(new Date).getTime()<r;){}}},l.fireNow=e}(),function(){var e,t,n,r=window,i=(r.jQuery,r.$Utility),a=r.$Debug,o=r.$Cookie={};
o.getCookie=function(r,o){a.assert(r,"name must be provided");var s=document.cookie;if(s==e){if(o&&n){return n[r]}if(!o&&t){return t[r]}}else{t=0,n=0,e=s}var l=i.deserialize(document.cookie,";",!0,o);return o?n=l:t=l,l[r]},o.deleteCookie=function(e,t,n){a.assert(e,"name must be provided"),o.setCookie(e,"",t,n,new Date(2e3,1,1))},o.setCookie=function(e,t,n,r,o,s){a.assert(e,"name must be provided");var l={};l[e]=t,document.cookie="{0};path={1};{2}{3}secure".format(i.serialize(l,null,s),r?r:"/",n?"domain="+n+";":"",o?"expires="+o.toUTCString()+";":"")
},$Do.register("$Cookie"),$Do.register("$Cookie.setCookie")}(),function(){var e=window;e.wLive.PageStats={"d":[],"add":function(t,n){var r=e.wLive.PageStats;n=n||(new Date).getTime(),t=t||{"url":"Missing page stats.","tasks":[],"executionTimeMs":0,"schedulerTimeMs":0};var i=new Date;t.clientStart=n,t.clientLength=i.getTime()-n,t.clientTime=i,r.d.push(t),jQuery(r).trigger("go")}}}(),function(){var e=window;e.$f={"getSelectedText":function(){if(document.selection){return document.selection.createRange()}var t;
try{t=e.getSelection().getRangeAt(0)}catch(n){t=e.document.createRange()}return t},"replaceQs":function(e,t,n){var r="([?|&])"+t+"=([^&]+)",i=new RegExp(r,"i"),a=e,o="",s=e.indexOf("#");return s>-1&&(a=e.substr(0,s),o=e.substr(s)),a.replace(i,"$1"+t+"="+n)+o},"doc":document,"getDocType":function(){var e,t=$f.doc,n=t.doctype,r=t.all;return n?e=n.publicId:r&&r.length&&(e=r[0].nodeValue),e||""},"createLoading":function(t,n,r,i,a,o,s,l){var u,d=t;"object"==typeof t&&(d=t.returnMarkup,n=t.type,r=t.width,i=t.height,a=t.size,o=t.color,s=t.text,l=t.altText,u=t.useTransparentFallback),!l&&e.GetString&&(l=e.GetString("live.accounts.strings.general_module_loading")),n=n||$f.loadingType.spinning,r=r||"20px",i=i||r,a=a||"3px",o=o&&o.toLowerCase()||"#666",l=l||"";
var c,p="c_spinningDots",m=($Config.imgsBase||"/images")+"/common/";n==$f.loadingType.flying?(p="c_flyingDots",c="flyingdots.gif"):(c="spinner_",c+="#fff"==o?"white_":"grey_","60px"==r?c+="120":"30px"==r?c+="60":(c+="40",u&&"#fff"!=o&&(c+="_transparent")),c+=".gif");var f=m+c,v=document.createElement("div");jQuery(v).css({"width":r,"height":i,"font-size":a}),v.className=p+" c_loadingDots c_dotsPlaying";var g;if($B.IE&&$B.V<=9){g='<div class="c_loadingFallback"><img role="presentation" src="'+f+'" alt="'+l.encodeHtml()+'" width="'+r+'" height="'+i+'" /></div>'
}else{g='<div class="c_loadingFallback" role="presentation" style="background-image:url('+f+");background-size:"+r+" "+i+'" alt="'+l.encodeHtml()+'"></div>',g+='<div class="c_loadingTracks">';for(var b=5;b>0;b--){g+='<div class="c_loadingTrack c_loadingTrack'+b+'"><div class="c_loadingDot" style="background-color:'+o+'"></div></div>'}g+="</div>"}v.innerHTML=g;var h=jQuery("<div></div>").append(v);if(n==$f.loadingType.flying&&h.css({"width":r}),s&&h.append('<span class="c_loadingText">'+s.encodeHtml()+"</span>"),d){var y=jQuery("<span></span>").append(h),w=y.html();
return y.remove(),w}return h[0]},"loadingType":{"spinning":0,"flying":1},"hideLoading":function(e){e.hide(),e.removeClass("c_dotsPlaying")},"showLoading":function(e){e.show(),e.addClass("c_dotsPlaying")}},$Do.register("$f")}(),function(){function e(e){function n(e){return e&&e.state==d&&(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),E==e&&(E=e.next),P==e&&(P=e.prev),e.state=u,e.prev=e.next=null,C--),e}function r(e){if(e&&e.state==u){var t=P;t?(t.next=e,e.prev=t):E=e,P=e,e.state=d,C++}}function i(){!M&&!A&&C&&w>x&&(A=window.setTimeout(v,l))
}function f(e){var t=(new Date).getTime()-e<s;return t}function v(){var e=(new Date).getTime();for(A=0,M=!0;C>0&&w>x;){var t=E;if(t&&w>x?(a.assert(t.state===d,"Task was not in a pending state and we were just about to execute it."),t=g(n(t))):t=null,t&&!f(e)){break}}M=!1,i()}function g(e){if(e){a.assert(void 0!=e.id&&!N[e.id],"Task didn't have an id or was already active!"),x++,N[e.id]=e,e.startTime=(new Date).getTime(),e.state=c;var t=e.exec(function(t){b(e,t)});t||b(e)}return e}function b(e,t){e.state===c&&(x--,a.assert(N[e.id],"A task is being completed without being in the active task list."),delete N[e.id],t&&"number"==typeof t?(e.state=p,e.timeoutId=window.setTimeout(function(){h(e)
},t)):h(e))}function h(e){var t=S;e.state=m,delete t[e.id],i()}var y=this,w=e||o,C=0,x=0,A=0,k=0,S={},E=null,P=null,N={},T=!1,M=!1;y.enqueue=function(e,o,s){var l=!1;if(!T){s=s||String(k++);var u=S,c=u[s];(!c||c.state==d&&c.next)&&(c?n(c):(a.assert(!N[s],"An active task was found during an enqueue that wasn't in the queue list."),l=!0,c=u[s]=new t(e,o,s)),r(c),i())}return l},y.abortAll=function(){T=!0;y.abort(),T=!1,a.assert(0==C,"After abortAll, _pendingTaskCount should be 0. (Was "+C+")"),a.assert(0==x,"After abortAll, _activeTaskCount should be 0. (Was "+x+")")
},y.abort=function(){var e=S;if(e){for(taskId in e){a.assert(e.hasOwnProperty(taskId),"priorityQueue::abort ran across a property in queue that wasn't a task id.");var t=e[taskId];t.state==c?(b(t),t.abort&&t.abort()):t.state==p?(t.timeoutId&&clearTimeout(t.timeoutId),h(t)):n(t)}S={}}},y.getActiveTaskCount=function(){return x},y.getActiveTasks=function(){return N}}function t(e,t,n){var r=this;r.id=n,r.exec=e,r.abort=t,r.timeoutId=0,r.next=null,r.prev=null,r.state=u}var n=window,r=n.wLive,i=r.Core,a=n.$Debug,o=1,s=25,l=0,u=0,d=1,c=2,p=3,m=4;
i.TaskQueue=e,t.prototype={"id":"","queueId":"","exec":function(){},"abort":function(){},"timeoutId":0,"next":null,"prev":null,"state":u}}(),function(){var e=wLive.Core,t=1;window.requests=new e.TaskQueue(t)}(),function(){function e(e,t,n){t&&n&&(e[t]=n)}function t(e,t,n){void 0!==n&&(e[t]=n)}function n(n,r,i,a,o,c,m,D,O){function L(e,t){var n={};if(500==e.status){try{n=JSON.parse(e.responseText)||{}}catch(r){}}if(!n.error&&!n.items){var i=!0,a=!1,o=w;switch(n.pageStats={"url":V,"error":t,"tasks":[],"executionTimeMs":0,"schedulerTimeMs":0},t){case"timeout":o=w,a=!0;
break;case"abort":o=C,i=!1,n.pageStats.info=t,n.pageStats.error=null}n.error={"isRetriable":i,"code":o,"message":"","debugMessage":"(xhr status "+e.status+") xhr.responseText: "+e.responseText,"stackTrace":"","isFatal":a}}return n}function $(e,t){var n,r=e?e.error:null;if(e=e||{},d&&d.PageStats&&e.pageStats&&d.PageStats.add(e.pageStats,W),e.apiCanary&&(p.apiCanary=e.apiCanary,delete e.apiCanary),e.telemetryContext?($ClientTelemetry.updateTelemetryContext(e.telemetryContext),delete e.telemetryContext):e.tcxt&&($ClientTelemetry.updateTelemetryContext(e.tcxt),delete e.tcxt),e.error){e.error.telemetryContext?($ClientTelemetry.updateTelemetryContext(e.error.telemetryContext),delete e.error.telemetryContext):e.error.tcxt&&($ClientTelemetry.updateTelemetryContext(e.error.tcxt),delete e.error.tcxt),n=e.error.stackTrace,n=n&&n.encodeJson?n.encodeJson():"";
var i='{"code": "'+e.error.code+'", "message": "'+e.error.message+'", "debug": "'+e.error.debugMessage+'", "stacktrace": "'+n+'", "retriesLeft": "'+j+'", "requestUrl": "'+V+'"}';F.push(i),F.length>T&&F.shift()}if(e.error&&e.error.isRetriable&&j>0){R&&R(),H&&$ReportEvent.ReportApiCall({"apiId":H,"errorCode":e.error.code,"success":!1}),j--,B.start()}else{if(e.error?(R&&R(B.failureReentranceDelay),e.error.code!=C&&(H&&$ReportEvent.ReportApiCall({"apiId":H,"errorCode":e.error.code,"success":!1}),s(e,V),o&&o(e,m),t.reject(e,m))):(R&&R(B.successReentranceDelay),H&&$ReportEvent.ReportApiCall({"apiId":H,"success":!0}),a&&a(e,m),t.resolve(e,m)),B.apiId&&B.propertyId){var l=r?r.code:void 0;
Qos&&Qos.log(B.apiId,B.propertyId,W,l,void 0,n)}}}var B=this,V=r;l(r)?H=null:(V=r.url,H=r.apiId);var U,R,j=void 0!==O&&null!==O?O:x;c=c||y;var W;null===_&&(_=!1,p&&p.isINT&&p.isCorpnet&&(_=!0)),n=n||"key"+I++,B.originId=null,B.jsonpParameterName=void 0,B.successReentranceDelay=0,B.failureReentranceDelay=0,B.apiId="",B.propertyId="",B.start=function(){var r=jQuery.Deferred();return u.requests.enqueue(function(n){R=n,W=(new Date).getTime();var a,o=V,s={"canary":p.apiCanary,"Accept":M};s[P]=2,s[N]="xhr",e(s,E,p.correlationId),e(s,k,p.eipt),e(s,A,p.apiUseIpt?"1":null),e(s,S,p.authz),t(s,v,p.uiflvr),t(s,g,p.scid),t(s,h,p.hpgid),$ClientTelemetry.setHeaders(s);
var u=i;if(i&&!l(i)){void 0===i[v]&&void 0!==p.uiflvr&&(i[v]=p.uiflvr);var d=$ClientTelemetry.getUnauthSessionId();void 0===i[b]&&void 0!==d&&(i[b]=d),void 0===i[g]&&void 0!==p.scid&&(i[g]=p.scid),void 0===i[h]&&void 0!==p.hpgid&&(i[h]=p.hpgid),u=JSON.stringify(i)}return u&&(u=u.replace(/\?/g,"\\u003F")),f&&f.appendLog&&f.appendLog("DataRequest("+o+")"),U=jQuery.ajax({"url":o,"dataType":"json","jsonp":B.jsonpParameterName,"jsonpCallback":a?"wLive.Core.DataRequest."+a:void 0,"data":u,"processData":!1,"type":u?"POST":"GET","headers":s,"timeout":c}).done(function(e){$(e,r)
}).fail(function(e,t,n){$(L(e,t,n),r)}),!0},B.abort,n),r.promise()},B.abort=function(){U&&(U.abort(),U=null),R&&(R(),R=null)}}function r(e){return e?"<span style='font-weight: bold;'>"+e.toString().encodeHtml()+":</span> ":""}function i(e,t){return t?"<div>"+r(e)+t.toString().encodeHtml()+"</div>":""}function a(e){var t=[];if(e){for(var n=(e||"").split("\n"),r=0;r<n.length;r++){for(var i=n[r],a=(i||"").split("\\u000d"),o=0;o<a.length;o++){var s=(a[o]||"").replace("\\u000a","").replace("\\u0022",'"').replace("\\u0027","'").replace("\\u0028","(").replace("\\u0029",")").replace("\\u003a",":").replace("\\u003c","&lt;").replace("\\u003d","=").replace("\\u003e","&gt;").replace("\\u005c","\\");
t.push(s)}}}return t}function o(e){var t="";if(e){for(var n=0;n<e.length;n++){t+=e[n]+"\n"}}return t}function s(e,t){if(_&&e&&e.error&&(e.error.stackTrace||e.error.debugMessage)){var n=a(e.error.stackTrace),r=null;if(e.error.isFatal||e.error.showError||D){r=o(n),m&&m.showError(e.error.code,"ApiRequest Error: "+(e.error.message||""),t||"<none>",null,null,null,r,e.error.debugMessage,e.error.data,e.error.isFatal?"#FFC0C0":"#C0FFFF",!0)}else{if(window.$Debug&&f.scriptConsole){var s=f.scriptConsole;r=o(n),s.errorHtml(i("Url",t)+i("Error Code",e.error.code)+(e.error.message?i("Message",e.error.message):"")+(e.error.isFatal?i("Is Fatal",e.error.isFatal):"")+(e.error.debugMessage?i("Debug",e.error.debugMessage):""),{"url":t,"code":e.error.code,"data":e.error.data,"stackTrace":n,"rsp":e})
}}}}function l(e){return"string"===jQuery.type(e)}var u=window,d=u.wLive,c=d.Core,p=u.$Config,m=u.$WebWatson,f=u.$Debug||{},v="uiflvr",g="scid",b="uaid",h="hpgid",y=3e4,w=8001,C=8002,x=0,A="wlPreferIpt",k="eipt",S="authz",E="x-ms-correlation-id",P="x-ms-apiVersion",N="x-ms-apiTransport",T=100,M="application/json",I=0,H=null;c.DataRequest=n;var F=c.DataRequest.Errors=[];c.DataRequest.ApiErrorCodes={"GeneralError":"6000","AuthFailure":"6001","InvalidArgs":"6002","Timeout":w,"Aborted":C};var _=null,D=!1;n.forceShowErrors=function(e){D=e
},u.$Do&&u.$Do.register("DataRequest")}(),function(){function e(e,i){var a=null,s=null,l=o.WLXAccount&&o.WLXAccount.countryCode?o.WLXAccount.countryCode:"",d=0!==o.btReportingOn&&i===u?t():null,c=e.cxhFunctionRes?e.cxhFunctionRes:null;"number"===jQuery.type(e)||"string"===jQuery.type(e)?(a=e,s=""):(a=e.pageId,s=r(e.userAction));var m=n(e,a,i),v={"pageApiId":a,"clientDetails":p,"country":l,"userAction":s,"source":i,"clientTelemetryData":m,"btData":d,"cxhFunctionRes":c};return f=!0,v}function t(){var e={};try{e.present="undefined"!=typeof UserTracker,e.submitIndex=e.present?UserTracker.submitIndex:0,e.powEnabled="undefined"!=typeof _wutPOWEnabled&&_wutPOWEnabled
}catch(t){}return e}function n(e,t,n){var r={};try{var a=i.performance&&i.performance.timing?i.performance.timing:null;if(r.category=n,r.pageName=t?String(t).replace(/_Client$/,""):"",r.eventInfo={},r.eventInfo.timestamp=(new Date).getTime(),null!=a&&!f&&m&&(r.eventInfo.perceivedPlt=v>a.loadEventEnd?v-a.navigationStart:a.loadEventEnd-a.navigationStart,r.eventInfo.networkLatency=a.responseEnd-a.navigationStart),n!==u||f||(r.category=l),"undefined"!=typeof ExternalHelper){r.eventInfo.appVersion=ExternalHelper.getProperty("TelemetryAppVersion");
var o=ExternalHelper.getProperty("TelemetryNetworkType");r.eventInfo.networkType=o,$ClientTelemetry.setNetworkType(o)}"undefined"!=typeof ExternalHelper&&r.category===l?(r.eventInfo.precaching=ExternalHelper.getProperty("TelemetryPrecaching"),r.eventInfo.bundleVersion=ExternalHelper.getProperty("TelemetryResourceBundleVersion"),r.eventInfo.deviceYear=ExternalHelper.getProperty("TelemetryDeviceYearClass"),r.eventInfo.isMaster=ExternalHelper.getProperty("TelemetryIsRequestorMaster"),r.eventInfo.bundleHits=ExternalHelper.getProperty("TelemetryResourceBundleHits"),r.eventInfo.bundleMisses=ExternalHelper.getProperty("TelemetryResourceBundleMisses"),ExternalHelper.setProperty("TelemetryResourceBundleHits","0"),ExternalHelper.setProperty("TelemetryResourceBundleMisses","0")):r.category===d&&(e.suggestedAccountType&&(r.eventInfo.suggestedAccountType=e.suggestedAccountType),e.accountType&&(r.eventInfo.accountType=e.accountType),e.duration&&(r.eventInfo.duration=e.duration),e.errorCode&&(r.eventInfo.errorCode=e.errorCode)),"undefined"!=typeof ExternalHelper&&ExternalHelper.reportTelemetry(JSON.stringify(r))
}catch(s){}return r}function r(e){var t="";return jQuery.isArray(e)?(jQuery.each(e,function(e,n){t+=n,t+=","}),t=t.substring(0,t.length-1)):"string"==typeof e&&(t=e),t}var i=window,a=i.wLive.Core.DataRequest,o=i.$Config,s=o&&o.WLXAccount?o.WLXAccount.urls:null,l="PageLoad",u="PageView",d="UserAction",c=1e4,p=[],m=!1,f=!1,v=0,g=i.$ReportEvent={},b=o&&o.WLXAccount?o.WLXAccount.noReportClient:!1;g.ApiTime=function(){if("undefined"!=String(i.wLive.PageStats)&&"undefined"!=String(i.wLive.PageStats.d)){var e=i.wLive.PageStats.d[0]||{},t=e.clientStart;
if("undefined"!=t){return(new Date).getTime()-t}}return 0},g.ReportApiCall=function(e){if(e){var t=e.apiId;if(!t){throw"ApiId is missing for api call"}void 0===e.time&&(e.time=g.ApiTime()),p.push(e)}},g.SetCustomPageLoadCompletedTime=function(e){v=e,$ClientEvents&&$ClientEvents.SetCustomPageLoadCompletedTime(e)},g.PageLoadCompleted=function(){m=!0,$ClientEvents&&$ClientEvents.SetPageLoadCompleted(!0)},g.Fire=function(t){if(!b&&s&&s.reportClientData){var n,r;"number"===jQuery.type(t)||"string"===jQuery.type(t)?(n="",r=""):(n=t.testSuccessMethod,r=t.testFailureMethod);
var i=e(t,u),o=new a(null,$Utility.generateUrl(s.baseDomain,s.reportClientData,!0),i,n,r,c);o.start(),p=[]}},g.Action=function(t){if(!b&&s&&s.reportClientData){var n=e(t,d);if(!t.skipClientCall){var r=new a(null,$Utility.generateUrl(s.baseDomain,s.reportClientData,!0),n,t.testSuccessMethod,t.testFailureMethod,c);r.start()}p=[]}}}(),function(){function e(){}function t(t){var n=d.Animations;return!n||e.$forcejQuery||t?!1:n.Enabled||!1}function n(e,t,n){if($B.IE){try{e[0].style.removeAttribute("filter")}catch(i){}}r(e,t,n)
}function r(e,t,n){e&&(t?(e.show(),e.css("opacity","1")):(e.css("opacity","0"),e.hide())),n&&n()}function i(e,t,n){setTimeout(function(){r(e,t,n)},0)}function a(){var e=jQuery("#identityBanner");return e&&e.length>0?e:null}function o(){var e,t=document.createElement("div"),n={"animation":"animationend","OAnimation":"oAnimationEnd","MozAnimation":"animationend","WebkitAnimation":"webkitAnimationEnd"};for(var r in n){if(void 0!==t.style[r]){return e=n[r],n[r]}}return""}function s(t,n){var r=jQuery("#inner");if(r.length>0){if(!t){return void r.removeClass("zero-opacity")
}r.hasClass("zero-opacity")?(r.one(e.animationEndEventName,function(){r.removeClass("zero-opacity"),n&&n()}),r.addClass("fade-in-lightbox")):n&&n()}}function l(){var e=!1,t=["Webkit","Moz","O"],n=document.createElement("div");if(e=void 0!==n.style.animationName,!e){for(var r=t.length,i=0;r>i;i++){if(void 0!==n.style[t[i]+"AnimationName"]){e=!0;break}}}return e}var u=window,d=u.wLive,c=u.$Config.WLXAccount;registerNamespace("wLive.Account"),d.Account.AnimationHelper=e,e.$forcejQuery=!1,e.enabled=!(c.isXbox||c.isWin10||c.isHolo||c.disableAnimations),e.isCSSAnimationSupported=l(),e.convergedAnimationEnabled=c.Animation.showConvergedAnimation&&e.isCSSAnimationSupported,e.animationEndEventName=o(),e.fadeIn=function(a,o,s){e.enabled?t(s)?d.Animations.fadeIn(a).then(function(){r(a,!0,o)
}):a.fadeIn(100,function(){n(a,!0,o)}):i(a,!0,o)},e.fadeOut=function(a,o,s){e.enabled?t(s)?d.Animations.fadeOut(a).then(function(){r(a,!1,o)}):a.fadeOut(100,function(){n(a,!1,o)}):i(a,!1,o)},e.enterContentOnNext=function(t,n,i){if(!e.convergedAnimationEnabled){return c.Animation.showConvergedAnimation&&!e.isCSSAnimationSupported&&s(!1),void e.enterContent(t,n)}var o=null,l=i.animate,u=i.show;t.css("opacity",0),l&&u&&(o=a(),o&&o.css("opacity",0)),t.addClass(u?"pagination-view has-identity-banner":"pagination-view");
var d=function(){t.one(e.animationEndEventName,function(){l&&u&&o&&(o.css("opacity",1),o.removeClass("animate slide-in-next")),r(t,!0,n),t.removeClass("animate slide-in-next")}),setTimeout(function(){l&&u&&o&&o.addClass("animate slide-in-next"),t.addClass("animate slide-in-next")},0)};s(!0,d)},e.enterContentOnBack=function(t,n,i){if(!e.convergedAnimationEnabled){return void e.enterContent(t,n)}var o=null,s=i.animate,l=i.show;t.css("opacity",0),s&&l&&(o=a(),o&&o.css("opacity",0)),t.addClass(l?"pagination-view has-identity-banner":"pagination-view"),t.one(e.animationEndEventName,function(){s&&l&&o&&(o.css("opacity",1),o.removeClass("animate slide-in-back")),r(t,!0,n),t.removeClass("animate slide-in-back")
}),setTimeout(function(){s&&l&&o&&o.addClass("animate slide-in-back"),t.addClass("animate slide-in-back")},0)},e.enterContent=function(a,o,s){if(e.enabled){if(t(s)){d.Animations.enterContent(a).then(function(){r(a,!0,o)})}else{var l="left",u=40;$B&&$B.rtl&&(l="right",u=-40);var c=(a.position(),""),p=a.prop("style");p&&(c=p[l]),a.css(l,"+="+u+"px"),a.css("opacity","0.0");var m={"opacity":"1.0"};m[l]="-="+u+"px",a.animate(m,170,function(){a.css(l,c),n(a,!0,o)})}}else{i(a,!0,o)}},e.exitContentOnBack=function(t,n,i){if(!e.convergedAnimationEnabled){return void e.exitContent(t,n)
}var o=i.animate,s=i.show;if(t.addClass(s?"pagination-view has-identity-banner":"pagination-view"),t.one(e.animationEndEventName,function(){if(o&&s){var e=a();e&&e.removeClass("animate slide-out-back")}r(t,!1,n),t.removeClass("animate slide-out-back")}),o&&s){var l=a();l&&l.addClass("animate slide-out-back")}t.addClass("animate slide-out-back")},e.exitContentOnNext=function(t,n,i){if(!e.convergedAnimationEnabled){return void e.exitContent(t,n)}var o=i.animate,s=i.show;if(t.addClass(s?"pagination-view has-identity-banner":"pagination-view"),t.one(e.animationEndEventName,function(){if(o&&s){var e=a();
e&&e.removeClass("animate slide-out-next")}r(t,!1,n),t.removeClass("animate slide-out-next")}),o&&s){var l=a();l&&l.addClass("animate slide-out-next")}t.addClass("animate slide-out-next")},e.exitContent=function(a,o,s){if($B.IE&&11==$B.V&&(s=!0),e.enabled){if(t(s)){d.Animations.exitContent(a).then(function(){r(a,!1,o)})}else{var l="left",u="-=10px";$B&&$B.rtl&&(l="right",u="+=10px");var c=(a.position(),""),p=a.prop("style");p&&(c=p[l]);var m={"opacity":"0.0"};m[l]=u,a.animate(m,80,function(){a.css(l,c),n(a,!1,o)
})}}else{i(a,!1,o)}},e.addToList=function(a,o,s){e.enabled?t(s)?(a.show(),d.Animations.addToList(a).then(function(){r(a,!0,o)})):a.slideDown(100,function(){n(a,!0,o)}):i(a,!0,o)},e.deleteFromList=function(a,o,s){e.enabled?t(s)?d.Animations.deleteFromList(a).then(function(){r(a,!1,o)}):a.slideUp(100,function(){n(a,!1,o)}):i(a,!1,o)},e.deleteFromListFast=function(a,o,s){e.enabled?t(s)?d.Animations.deleteFromListFast(a).then(function(){r(a,!1,o)}):a.slideUp(50,function(){n(a,!1,o)}):i(a,!1,o)},e.expand=function(a,o,s){e.enabled?t(s)?(a.show(),d.Animations.expand(a).then(function(){r(a,!0,o)
})):a.slideDown(100,function(){n(a,!0,o)}):i(a,!0,o)},e.collapse=function(a,o,s){e.enabled?t(s)?d.Animations.collapse(a).then(function(){r(a,!0,o)}):a.slideUp(100,function(){n(a,!0,o)}):i(a,!0,o)}}(),function(){function e(e){if(!e){return r}if("string"!=typeof e||e.length<5||":"!=e.charAt(1)){return p}var t=e.charAt(0);return m[t]?m[t]:r}var t=window,n=t.wLive,r=0,i=1,a=2,o=3,s=4,l=5,u=6,d=7,c=8,p=-1,m={"-":r,"e":i,"a":o,"h":l,"r":a,"v":s,"s":u,"i":d,"c":c};registerNamespace("wLive.Account.TokenHelper"),n.Account.TokenHelper.getTokenType=e,n.Account.TokenHelper.Types={"none":r,"hip":l,"email":i,"reset":a,"authz":o,"recover":s,"acsrInit":d,"acsrSubmit":c,"invalid":p}
}(),function(){function e(e,t){var n="&"+t.toLowerCase()+"=",r=e.toLowerCase().indexOf(n);if(-1==r&&(n="?"+t.toLowerCase()+"=",r=e.toLowerCase().indexOf(n),-1==r)){return null}var i=e.indexOf("&",r+1);return-1==i&&(i=e.length),e.substring(r+n.length,i)}function t(e,t,n){if(!e){return""}var r="&"+t.toLowerCase()+"=",i=e.toLowerCase().indexOf(r);if(-1==i&&(r="?"+t.toLowerCase()+"=",i=e.toLowerCase().indexOf(r),-1==i)){var a="&";return-1==e.indexOf("?")&&(a="?"),e+a+t+"="+n}var o=e.indexOf("&",i+1);return-1==o&&(o=e.length),e.substring(0,i)+r+n+e.substring(o)
}function n(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}var r=window,i=r.wLive;registerNamespace("wLive.Account.UrlHelper"),i.Account.UrlHelper.SetQSValue=t,i.Account.UrlHelper.GetQSValue=e,i.Account.UrlHelper.FixedEncodeURIComponent=n}(),function(){function e(){function e(){o.on("unload"+r,function(){i()})}function i(){a.$.triggerHandler(n),o.off(r),o=null,a=null}var a=this,o=jQuery(t);a.$=jQuery(a),e()}var t=window,n="dispose",r=".pageEvents";e.prototype={"next":"onNext","back":"onBack","dispose":n,"setFocus":"setFocus"},registerNamespace("wLive.Account"),wLive.Account.PageEvents=new e
}(),function(){function e(e){function n(){a++}function o(e,t,n,r){function i(){f[e]=setTimeout(function(){n(),delete f[e],r&&v[e]&&(n=v[e],delete v[e],i())},t)}return r&&f[e]?void(v[e]=n):(f[e]&&(clearTimeout(f[e]),delete f[e]),void i())}function s(e){f[e]&&(clearTimeout(f[e]),delete f[e])}var l=this,u=null,d=e,c=r.isXbox,p=!1,m=t.WIZARDUI,f={},v={};l.dispose=function(){p||(u&&(u.empty(),u=null),p=!0)},l.showLoading=function(){o("LoadingIndicatorControl$loading#"+a,500,function(){p||(c?m&&m.notReady&&m.notReady():d&&(d.show(),i&&(u||(u=jQuery(i.createLoading(0,i.loadingType.spinning,"25px","25px")),jQuery(".loadingSpinner",d).append(u)),i.showLoading(u))))
})},l.hideLoading=function(e){s("LoadingIndicatorControl$loading#"+a),p||(c?m&&m.ready&&m.ready({"fKeyboardEnabled":e}):d&&(d.hide(),i&&u&&i.hideLoading(u)))},n()}var t=window,n=t.wLive,r=t.$Config.WLXAccount,i=t.$f,a=0;e.__class=!0,registerNamespace("wLive.Account.Controls"),n.Account.Controls.LoadingIndicatorControl=e}(),function(){function e(e,w,C){function x(){}function A(){var e=J&&J.pageTitle;e&&(document.title=e,at&&pt&&pt.setHeaderText&&pt.setHeaderText(e))}function k(){var e=jQuery("#bannerBackButton");
if(e.length>0){var t=J&&J.showBannerBackButton;t?(e.show(),S(!0)):(e.hide(),S(!1))}}function S(e){var t=jQuery("#bannerBackButton");t.length>0&&(e?t.removeAttr("disabled"):t.attr("disabled","disabled"))}function E(){var e=J&&J.removeLeftNav;e&&(jQuery(".LeftNav").hide(),jQuery("body").removeClass("am_fxlnav"))}function P(){var e=J.sectionId,t=J.annotations;if(e&&t){for(var n=jQuery("#"+e,K),r=0,i=t.length;i>r;r++){var a=t[r][0],o=t[r][1];a&&o&&n.attr("data-"+a,o)}}}function N(e){return et&&et[e]?rt[e]?rt[e]:("string"==typeof et[e]?(rt[e]=jQuery("#"+et[e],Z),l.trace("PageDialogControl.getButton ["+e+"(#"+et[e]+")] = "+rt[e].length)):rt[e]=et[e]instanceof jQuery?et[e]:jQuery(),rt[e]):jQuery()
}function T(e){S(e),e?(N("action").removeAttr("disabled"),N("alternate").removeAttr("disabled"),N("cancel").removeAttr("disabled")):(N("action").attr("disabled","disabled"),N("alternate").attr("disabled","disabled"),N("cancel").attr("disabled","disabled")),tt=e}function M(e){var t="action",n=jQuery(e.currentTarget).attr("id");if(n==h+ot||n==h+ot+y){for(var r=jQuery(".default:visible",st),i=r.length,a=0;i>a;a++){var o=jQuery(r[a]).attr("id");if(o==et.action){t="action";break}if(o==et.alternate){t="alternate";
break}if(o==et.cancel){t="cancel";break}if(o==et.skip){t="skip";break}}return I(e,t)}}function I(e,t){if(l.trace("PageDialogControl.buttonClick ["+t+"] enabled:["+tt+"]"),tt){var n=N(t);if(n.length>0&&"disabled"==n.attr("disabled")){return!1}var r=!1;"action"==t&&ut&&ut.onExternalConfirm?r=ut.onExternalConfirm():"cancel"==t&&ut&&ut.onExternalClose&&(r=ut.onExternalClose()),r||q.triggerHandler(u,{"actionName":t,"control":z,"viewModel":ut})}return e&&(e.preventDefault(),e.stopPropagation()),!1}function H(e){if(et&&et[e]){var t=N(e);
t.length>0&&(l.trace("PageDialogControl.on(Click) ["+e+"]"),t.on("click"+b+ot,function(t){return I(t,e)}))}a&&$Config.WLXAccount.isWin10InclusiveOOBE&&"cancel"===e&&(C.hasCancel?(a.showBackButton(!0),a.handleBackButton(function(){return I(null,e)})):a.showBackButton(!1))}function F(e){rt[e]&&(l.trace("PageDialogControl.clearButton ["+e+"(#"+et[e]+")]"),rt[e].off("click"+b+ot),delete rt[e])}function _(e){if(rt[e]&&rt[e].length>0&&"string"==typeof et[e]){var t=jQuery("#"+et[e],Z);l.assert(0!=t.length,"Html has been modified and removed the linked ["+e+"] button -- hook the onCreateContent event to alter the HTML"),l.assert(t[0]===rt[e][0],"Html has been modified and has replaced the linked ["+e+"] button -- hook the onCreateContent event to alter the HTML")
}}function D(){if(H("action"),H("alternate"),H("revert"),H("cancel"),H("skip"),i&&i.$&&(i.$.on(i.next+b+ot,function(){var e="action";if(J&&J.pageNextAction&&(e=J.pageNextAction),ut&&ut.wizardUIOnNext){return void ut.wizardUIOnNext()}var t=N(e);if(t.length>0){if("disabled"==t.attr("disabled")){return}I(null,e)}else{J&&J.pageNextAction&&I(null,e)}}),i.$.on(i.back+b+ot,function(){var e="cancel";if(J&&J.pageBackAction&&(e=J.pageBackAction),ut&&ut.wizardUIOnBack){return void ut.wizardUIOnBack()}var t=N(e);if(t.length>0){if("disabled"==t.attr("disabled")){return
}I(null,e)}else{J&&J.pageBackAction&&I(null,e)}})),n.Account.DialogManager){var e=n.Account.DialogManager;e.$.on("action"+b+ot,function(){var e=J.pageNextAction||"action";I(null,e)}),e.$.on("cancel"+b+ot,function(){var e=!1;ut&&ut.onExternalClose&&(e=ut.onExternalClose()),e||z.dispose()})}st&&st.on("submit"+b+ot,M),lt&&lt.on("click"+b+ot,M);var t=J.viewModel,a=n.Account.ViewModels;if(a&&t&&dt){var o,s={"trigger":function(e){q.triggerHandler(u,{"actionName":e,"control":z,"viewModel":ut})}};o="function"==typeof t?t:a[t],ut=new o(Y,J.viewModelOptions,s),n.Account.viewModelHandle=ut,r.applyBindingsWithValidation(ut,jQuery("#"+dt,K)[0],{"insertMessages":!1,"messagesOnModified":!0})
}q.triggerHandler(p,{"content":Z,"control":z,"viewModel":ut})}function O(){i&&i.$&&i.$.off(b+ot),n.Account.DialogManager&&n.Account.DialogManager.$.off(b+ot),q.triggerHandler(m,{"content":Z,"control":z}),F("action"),F("alternate"),F("revert"),F("cancel"),F("skip"),st&&st.off("submit"+b+ot),lt&&lt.off("click"+b+ot)}function L(){if(_("action"),_("alternate"),_("revert"),_("cancel"),_("skip"),st&&st.length>0){var e=Z;Z!==st&&(e=jQuery("#"+h+ot,Z)),l.assert(0!=e.length,"AutoForm has been removed -- hook the onCreateContent event to alter the HTML"),l.assert(st[0]===e[0],"AutoForm has been modified and has replaced -- hook the onCreateContent event to alter the HTML")
}if(lt&&lt.length>0){var t=jQuery("input[type=submit]",Z);l.assert(0!=t.length,"AutoFormSubmit button has been removed -- hook the onCreateContent event to alter the HTML"),l.assert(lt[0]===t[0],"AutoFormSubmit button has been modified and has replaced -- hook the onCreateContent event to alter the HTML")}}function $(e,t){for(var n=t.split("."),r=n.length,i=0;r>i&&null!==e&&void 0!==e;){e=e[n[i++]]}return e}function B(e,t,n){return e.indexOf(t)>-1&&(e=e.replace(t,n)),e}function V(e){return J.getViewContextTokenValue?J.getViewContextTokenValue(Y,e):$(Y,e)
}function U(e){if(!nt){return!1}var t=jQuery("form",e);if(t.length>0){return!1}var n=jQuery(":input",e);return 0==n.length?!1:!0}function R(e){if(U(e)){if(st=jQuery("<form id='"+h+ot+"' action='#' onsubmit='return false;' novalidate='novalidate' "+j()+"></form>"),st.append(e),0==jQuery("input[type=submit]",e).length){var t=jQuery("<input aria-hidden='true' id='"+h+ot+y+"' type='submit' tabindex='-1' style='position: absolute; height: 0px; width: 0px; border: none; padding: 0px; min-width: 0px; min-height: 0px;' />");
st.append(t)}return lt=jQuery("input[type=submit]",e),st}return e}function j(){var e="";return o.supportsUnifiedHeader&&(e=J&&J.pageTitle?"aria-label='"+J.pageTitle+"'":"aria-labelledby='iPageTitle DialogUserTitle'"),e}function W(){var e=jQuery(J.viewTemplate).clone(),t=J.viewContextTokens;if(t&&t.length>0){for(var n=e.html(),r=0;r<t.length;r++){var i=t[r],o=V(i);void 0!==o&&null!==o&&(n=B(n,"{"+i+"}",jQuery("<span />").text(o).html()))}e.html(n)}return a&&($Config.WLXAccount.isWin10||$Config.WLXAccount.isHolo)&&a.getContext(function(t){var n=t.host?t.host.toUpperCase():"",r=n===a.Hosts.OOBE||n===a.Hosts.NthUserFirstLogon||n===a.Hosts.SSCRPINReset;
jQuery(".icon-win-easeOfAccess",e).toggle(r)}),q.triggerHandler(f,{"content":e,"control":z}),R(e)}function Q(){J.focusFirstButton?setTimeout(function(){Z.find(":button").first().focus()},10):J.focusFirstInput?setTimeout(function(){var e=jQuery("input,select",Z).not(":hidden").first();0==e.length&&(e=jQuery("a,button,input[type=button]",Z).not(":hidden").first()),e.focus()},ct?255:10):J.focusSubmit?setTimeout(function(){Z.find("input[type=submit]").not(":hidden").first().focus()},10):J.focusFirstElemId?setTimeout(function(){jQuery("#"+J.focusElemId,Z).first().focus()
},10):J.disableAutoFocus||setTimeout(function(){var e=jQuery("[autofocus],[autofocus=autofocus],[autofocus=true]",Z).first();0==e.length&&(e=jQuery("input,button,a,select,textarea",Z).first()),e.focus()},ct?255:10)}var z=this,q=z.$=jQuery(z),G=!1,X=!1,K=e,J=C,Z=null,Y=w,et=C.buttons,tt=!0,nt=C.autoForm!==!1&&0!==C.autoForm&&"False"!==C.autoForm,rt={},it=o.isWinWab,at=o.isWinWiz,ot=(o.isXbox,o.isWPBlue,g++),st=null,lt=null,ut=null,dt=C.sectionId,ct=s.convergedAnimationEnabled,pt=t.WIZARDUI;z.notifyVisible=function(){ut&&ut.onNotifyVisible&&ut.onNotifyVisible()
},z.content=function(){return Z},z.show=function(){l.trace("PageDialogControl.show()"),Z||(Z=W()),X||(K.append(Z),X=!0),P(),A(),k(),D(),Z.show(),it&&(jQuery("form").parents("div").css("height","100%"),"undefined"!=typeof setContentWidth&&setContentWidth()),q.triggerHandler(d,{"content":Z,"control":z}),Q(),E(),L(),l.trace("PageDialogControl.~show()")},z.hide=function(){l.trace("PageDialogControl.hide()"),Z.hide(),q.triggerHandler(c,{"content":Z,"control":z}),O(),Z.detach(),X=!1},z.setEnabled=function(e){l.trace("PageDialogControl.setEnabled("+e+")"),T(e)
},z.getButton=N,z.dispose=function(){l.trace("PageDialogControl.dispose()"),G||(q.triggerHandler(v,{"control":z}),O(),Z.empty(),X&&Z.remove(),Z=null,G=!0,z.$=null),z=null,q=null,et=null,rt=null,K=null,J=null,w=null,C=null},x()}var t=window,n=t.wLive,r=t.ko,i=n.Account.PageEvents,a=t.MSA&&t.MSA.CXH,o=t.$Config.WLXAccount,s=n.Account.AnimationHelper,l=t.$Debug,u="onAction",d="onShow",c="onHide",p="onSetupEvents",m="onRemoveEvents",f="onCreateContent",v="onDispose",g=0,b=".pagedialog",h="pageDialogForm_",y="_submit";
e.prototype.events={"action":u,"createContent":f,"show":d,"hide":c,"setupEvents":p,"removeEvents":m,"dispose":v},e.__class=!0,registerNamespace("wLive.Account.Controls"),n.Account.Controls.PageDialogControl=e}(),function(){function e(e,n,w){function C(){}function x(e){var t,n=z[e];return t=r(n.template?n.template:w.defaultTemplate?w.defaultTemplate:"<div></div>"),t.hide(),t}function A(e,t){var n,r=z[t];return new(n="function"==typeof r.control?r.control:a[r.control])(e,Q,r.options)}function k(e,t){s.trace("FlowController.notifyVisible ["+t+"]"),!$&&e&&e[h]&&e[h](),E(e,!0),L.triggerHandler(u,{"controller":O,"control":e,"state":t,"viewContext":Q})
}function S(e,t,n,i){if(i[b]&&!i[b](e)){return null}if(r.isFunction(n)){return n()}if(G[y]){var a=G[y](t,n,Q,e);if(a){if(r.isArray(n)){for(var o=0;o<n.length;o++){if(n[o]===a){return a}}}else{if(a===n){return a}}}return null}return n}function E(e,t){e&&e[g]&&e[g](t)}function P(e,n,a,o,l,u,d){if(!$&&U===e){B.append(e),j=r(n),s.trace("Hooking control events for ["+a+"]");var c=n.events;for(var p in c){var m=c[p];j.on(m,{"eventName":m,"state":a,"control":n},_)}j.on(n.events.action,{"state":a,"control":n},D),W=e,e.show(),n.show();
var v=function(){if(e.show(),R===n&&k(n,a),o.pageId){var r={"pageId":o.pageId,"userAction":o.userAction};if($ReportEvent.SetCustomPageLoadCompletedTime((new Date).getTime()),$ReportEvent.PageLoadCompleted(),$ReportEvent.Fire(r),"undefined"!=typeof UserTracker&&"function"==typeof UserTracker.notifyDOMUpdate){try{UserTracker.notifyDOMUpdate()}catch(i){}}t.$Config.hpgid=o.pageId}};if(l){var g=o.options&&1===o.options.showIdentityBanner,b={"animate":d,"show":g};u?i.enterContentOnBack(e,v,b):i.enterContentOnNext(e,v,b)
}else{v()}L.triggerHandler(f,{"controller":O,"activeState":a,"control":n,"container":e,"viewContext":Q})}}function N(){X=[]}function T(e,t){if(!e.skipBackStack){if(X.length>0&&X[0]!=t){for(var n=0;n<X.length;n++){if(X[n]==t){X=X.slice(0,n);break}}}X.push(t)}}function M(e){if(X.length>0){for(var t=X.length-1;t>=0;t--){if(X[t]==e){X=X.slice(0,t);break}}}}function I(e,t){if(X.length>0){s.trace("FlowController.getBackState("+e+", "+t+") -- "+X);for(var n=X.length-1;n>=0;n--){var i=X[n];if(i!=e&&i){if(r.isArray(t)){for(var a=0;a<t.length;a++){if(t[a]==i){return i
}}}else{if(i==t){return i}}}}}return null}function H(e,t,n){if(!$){if(s.trace("FlowController.showControl("+e+")"),V!=e&&z[e]){s.trace("New State ["+e+"] from ["+V+"]"),L.triggerHandler(m,{"control":O,"activeState":V,"newState":e,"viewContext":Q});var a=z[e],l=a.url,u=a.target,c=a.cancelUrl,f=a.triggerAction;if(l){return s.trace("Navigate to ["+l+"]"),L.triggerHandler(p,{"control":O,"url":l,"viewContext":Q}),void(c?((K||J)&&o?o.openExternalWebBrowser(l):u&&$Utility.navigateTo(l,u),$Utility.navigateTo(c)):$Utility.navigateTo(l))
}if(f){return s.trace("Trigger action ["+f+"]"),void L.triggerHandler(d,{"actionName":f,"control":O})}var v=U,g=R,b=j,h=V,y=x(e),w=A(y,e);if(U=y,R=w,j=null,b&&(s.trace("Clearing action event for ["+h+"]"),b.off(g.events.action,D)),g&&g.prepareDispose&&g.prepareDispose(),V=e,a.clearBackStack&&N(),T(a,V),v&&W===v){var C=z[h].options.showIdentityBanner!==a.options.showIdentityBanner,k=function(){if(v.hide(),g){g.hide&&g.hide(),s.trace("Clearing control hooked events ["+h+"]");var t=r(g);for(var i in w.events){t.off(i,_)
}t=null,g.dispose(),delete g}v.empty(),v.remove(),v=null,delete v,P(y,w,e,a,!0,n,C)},S=z[h].options&&1===z[h].options.showIdentityBanner,M={"animate":C,"show":S};n?i.exitContentOnBack(v,k,M):i.exitContentOnNext(v,k,M)}else{var I=!0;t&&q.animateInitial===!1&&(I=!1),P(y,w,e,a,I,n,t)}}else{s.assert(z[e],"Undefined state ["+e+"] -- re-enabling existing control"),V==e&&s.trace("Same state re-enabling the control ["+e+"]"),E(R,!0)}}}function F(e,t){return{"controller":O,"state":e.state,"control":e.control,"controlData":t,"viewContext":Q}
}function _(e,t){var n=e.data;s.trace("FlowController.handleControlEvent ["+n.eventName+"] for ["+n.state+"]");var r=F(n,t);return L.triggerHandler(n.eventName+"$Control",r),!0}function D(e,t){var n=t.actionName,i=t.control,a=e.data,o=a.state,l=z[o].actions,u=l[n],d=!1;if(("cancel"==n||"backStack"==n)&&(d=!0),s.trace("FlowController.processActionEvent["+n+"] for ["+o+"]"),s.assert(o==V,"processAction state mismatch ev:["+o+"] act:["+V+"]"),o==V){var c=!1;if("backStack"==n){var p=I(o,u);p&&(u=p,c=!0)}u=S(n,o,u,i);
var m=u;if(u&&r.isArray(u)&&(m=u[0]),s.trace("FlowController.processActionEvent newState ["+m+"]"),m){if(z[m]){return c&&M(m),E(i,!1),H(m,!1,d),!0}s.fail("Invalid State ["+m+"] from ["+o+"] action ["+n+"]")}}return H(V,!1,d),!1}var O=this,L=O.$=r(O),$=!1,B=r(e),V=l,U=null,R=null,j=null,W=null,Q=n,z=w.viewDefs,q=w,G=w.callbacks||{},X=[],K=t.$Config.WLXAccount.isWin10,J=t.$Config.WLXAccount.isHolo;O.show=function(e){H(e,!0),L.triggerHandler(c,{"control":O,"viewContext":Q})},O.setStateChangeFunc=function(e){G[y]=e
},O.dispose=function(){if(!$){if(V=l,R){if(null!=j){s.trace("Clearing control events ["+V+"]"),j.off(R.events.action,D);for(var e in R.events){j.off(e,_)}j=null}R.dispose()}R=null,U&&U.empty(),U=null,L.triggerHandler(v,{"control":O,"viewContext":Q}),$=!0,O.$=null}L=null,O=null,$=!0,B&&B.empty(),B=null,Q=null,z=null,q=null},C()}var t=window,n=t.wLive,r=t.jQuery,i=n.Account.AnimationHelper,a=n.Account.Controls,o=t.MSA&&t.MSA.CXH,s=t.$Debug,l="none",u="onControlVisible",d="onAction",c="onShow",p="onNavigate",m="onStateChanging",f="onStateChanged",v="onDispose",g="setEnabled",b="validate",h="notifyVisible",y="validateStateChange";
e.prototype.events={"action":d,"show":c,"stateChanged":f,"stateChanging":m,"controlVisible":u,"dispose":v},e.__class=!0,registerNamespace("wLive.Account.Controls"),n.Account.Controls.FlowController=e}(),function(){function e(e,t,n){function r(){}var i=this,a=(i.$=jQuery(i),n),o=t,s=o.data,l=a.params;i.show=function(){for(var t=jQuery(a.viewTemplate).clone(),n=a.formId,r=jQuery("#"+n,t),i=0,o=l.length;o>i;i++){var u=l[i];jQuery("#"+u,r).val(s[u])}e.append(t),document.forms[n].submit()},r()}var t=window,n=t.wLive,r="onShow";
e.prototype.events={"show":r},e.__class=!0,registerNamespace("wLive.Account.Controls"),n.Account.Controls.RedirectionControl=e}(),function(){function e(e,t,n){function a(){}function u(e){if(e&&x[e]){return GetString("live.accounts.strings."+x[e])}var t=GetString(y+e);return t||(t=GetString("live.accounts.strings."+e)),t||(t=GetString("live.accounts.strings."+w)),t}function A(){return{"control":I,"viewContext":D,"pollAttempts":q,"numErrors":z}}function k(e){if(!F){X&&(clearTimeout(X),X=null);var t=(new Date).getTime();
if(z>=O||t>G){Q&&Q.hideLoading(),H.triggerHandler(m,A())}else{if(e){var n=A();n.sendPollingRequest=!0,H.triggerHandler(d,n),n.sendPollingRequest&&(X=setTimeout(P,B))}else{$?X=setTimeout(P,B):(Q&&Q.hideLoading(),H.triggerHandler(p,A()))}}}}function S(){if(!F){var e=0,t=0;null!=J&&(e=J.height(),t=J.width()),2==e?(Q&&Q.hideLoading(),1==t?H.triggerHandler(f,A()):H.triggerHandler(v,A())):(1!=t&&z++,k(!1)),null!=J&&(J.empty(),J.remove(),J=null)}}function E(){F||(z++,k(!1),null!=J&&(J.empty(),J.remove(),J=null))}function P(){if(!F){X=null;
var e=(new Date).getTime();null!=J&&(J.empty(),J=null),J=i("<img />").attr({"id":"iSessionPollingImg","style":"display: none"}),J.load(S),J.error(E);var t="?slk";V.indexOf("?")>-1&&(t="&slk="),J.attr("src",V+t+encodeURIComponent(K)+"&pa="+encodeURIComponent(e)),i("body").append(J),q++,H.triggerHandler(c,A())}}function N(e){F||(K=e.sessionLookupKey,D&&(D.sessionLookupKey=K),H.triggerHandler(g,A()),k(!0))}function T(e){if(!F){if(K=null,D&&delete D.sessionLookupKey,e.error&&e.error.code==C){return void H.triggerHandler(f,A())
}D.pollingError=errorMessage=u(String(e.error.code)),H.triggerHandler(b,A()),R&&k(!0)}}function M(){if(!F){var t=(new Date).getTime();if(G=t+L,z=0,q=0,j){var n=i(".loadingArea",e);0==n.length&&(n=i(".waitingArea",e)),Q=new l.LoadingIndicatorControl(n),Q.showLoading()}if(W){var a={"channel":"PushNotifications","purpose":U},o=new r.DataRequest(null,s.sendOtt,a,N,T,1e4);o.start()}else{k(!0)}}}var I=this,H=I.$=i(I),F=!1,_=n,D=t||{},O=_.maxErrors||o.polling.maxErrors,L=_.timeout||o.polling.timeout,$=void 0!==o.polling.enabled?o.polling.enabled:!0,B=$?_.pollInterval||o.polling.interval:0,V=_.approvalUrl||o.url,U=_.ottPurpose||o.ottPurpose,R=void 0!==_.pollOnSendError?_.pollOnSendError:!0,j=void 0!==_.showLoading?_.showLoading:!0,W=void 0!==_.sendNotification?_.sendNotification:!0,Q=null,z=0,q=0,G=null,X=null,K=o.lookupKey,J=null;
I.forcePollRequest=function(){k(!0)},I.show=function(){M()},I.dispose=function(){if(!F){if(H.triggerHandler(h,A()),X&&(clearTimeout(X),X=null),Q&&Q.dispose(),Q=null,null!=J&&(J.empty(),J.remove(),J=null),I&&I.$){for(var e in I.events){I.$.off(e)}H=I.$=null}I=null,_=null,D=null,O=null,L=null,$=null,B=null,V=null,U=null,R=!1,j=!1,G=null,K=null,F=!0}},a()}var t=window,n=t.wLive,r=n.Core,i=t.jQuery,a=t.$Config.WLXAccount,o=a.sessionApproval,s=a.urls.dataRequest,l=n.Account.Controls,u="onShow",d="onStartPolling",c="onPolling",p="onPending",m="onTimeout",f="onApproved",v="onDenied",g="onSendSuccess",b="onSendError",h="onDisposing",y="live.accounts.strings.error_",w="pollingdefaulterror",C="1306",x={"errorFieldRequired":"error_1018","errorEmailInvalidFormat":"error_1035","errorEmailExists":"error_1287"};
e.prototype.events={"show":u,"startPolling":d,"polling":c,"pending":p,"timeout":m,"approved":f,"denied":v,"sendSuccess":g,"sendError":b,"disposing":h},e.__class=!0,registerNamespace("wLive.Account.Controls"),n.Account.Controls.SessionPolling=e}(),function(){function e(e,t,n){if(e[t]){var r=e.__appendedFunctions=e.__appendedFunctions||{};if(r[t]){r[t].push(n)}else{{r[t]=[]}r[t].push(e[t]),r[t].push(n),e[t]=function(){for(var e=this.__appendedFunctions[t],n=0;n<e.length;n++){e[n].apply(this,arguments)}}}}else{e[t]=n
}}function t(n,r,i){for(var a in r){r.hasOwnProperty(a)&&("initialize"!==a&&"dispose"!==a||i?i&&n[a]?t(n[a],r[a],i):n[a]=r[a]:e(n,a,r[a]))}return n}function n(e){var t={};for(var n in e){if(e.hasOwnProperty(n)){var r=e[n];t[n]=r&&"[object Array]"===Object.prototype.toString.call(r)?r.slice(0):r}}return t}var r=1;t(window,{"getId":function(e){var t;return e?(e.__id||(e.__id=String(r++)),t=e.__id):t=String(r++),t},"getKey":function(e){var t;return e&&(e.key||(e.key=getId(e)),t=e.key),t},"defineNamespace":function(e,n,r,i){for(var a=e.split("."),o=r||window,s=0;s<a.length-1;s++){o=o[a[s]]=o[a[s]]||{}
}var l=a[a.length-1];return o[l]?t(o[l],n,i):o[l]=n,l},"defineClass":function(e,n,r,i){var a=n.prototype,o=defineNamespace(e,n);if(a.__fullName=e,a.__className=o,r&&t(a,r),i&&t(n,i),arguments.length>4){for(var s=4;s<arguments.length;s++){t(a,arguments[s])}}},"defineSubClass":function(e,r,i,a,o){var s=i||function(){};i=function(){r.apply(this,arguments),s.apply(this,arguments)};var l=i.prototype;if(t(l,r.prototype),l._base=r.prototype,l.__appendedFunctions&&(l.__appendedFunctions=n(l.__appendedFunctions)),defineClass(e,i,a,o),arguments.length>5){for(var u=5;u<arguments.length;u++){t(l,arguments[u])
}}},"appendFunction":e,"mix":t,"bind":function(e,t){return function(){return t.apply(e,arguments)}}})}(),function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t){var n=jQuery(document.body),r=n.css("backgroundColor").toLowerCase().replace(new RegExp(" ","g"),"");return!t.forBlackBackground||"rgb(0,0,0)"!==r&&"#000000"!==r&&"#000"!==r?!t.forWhiteBackground||"rgb(255,255,255)"!==r&&"#ffffff"!==r&&"#fff"!==r?e:t.forWhiteBackground:t.forBlackBackground}e.getHighContrastImage=t}(t=e.HighContrast||(e.HighContrast={}))
}(t=e.Util||(e.Util={}))}(t=e.Account||(e.Account={}))}(wLive||(wLive={})),function(e){var t;!function(e){var t;!function(t){var n;!function(t){function n(){if(a&&u){var e=u.baseUrl+u.dropdownCaret,t=u.baseUrl+u.dropdownCaretWhite;return a.getHighContrastImage(e,{"forBlackBackground":t})}return""}function r(){if(a&&u){var e=u.baseUrl+u.arrow,t=u.baseUrl+u.arrowWhite;return a.getHighContrastImage(e,{"forBlackBackground":t})}return""}function i(e){e?jQuery("#lightbox-cover").addClass("disable-lightbox"):jQuery("#lightbox-cover").removeClass("disable-lightbox")
}var a=e.Util.HighContrast,o=$Config.WLXAccount,s=o.convergedFrameConfig||o.signup,l=s&&s.page,u=l&&l.imgs;t.getDropDownCaretImage=n,t.getArrowImage=r,t.disableLightbox=i}(n=t.ConvergedUxUtil||(t.ConvergedUxUtil={}))}(t=e.Util||(e.Util={}))}(t=e.Account||(e.Account={}))}(wLive||(wLive={})),function(e){var t;!function(e){var t;!function(t){var n;!function(t){function n(){if(d&&f){var e=f.baseUrl+f.marchingAnts,t=f.baseUrl+f.marchingAntsWhite;return d.getHighContrastImage(e,{"forBlackBackground":t})}return""}function r(e,t){if(e.length>0){if(e.show(),jQuery("#marchingAnts",e).length>0){return
}var r;switch(h=h.replace("{0}",n()),t){case l.Lightbox:r=v?b:h;break;case l.Content:r='<div class="row progress-container">'+(v?b:h)+"</div>"}e.append(r)}}function i(){var e=jQuery("#progressBarLightbox");r(e,l.Lightbox)}function a(){jQuery("#progressBarLightbox").hide()}function o(){var e=jQuery("#progressBarContent");r(e,l.Content)}function s(){jQuery("#progressBarContent").hide()}var l,u=e.AnimationHelper,d=e.Util.HighContrast,c=$Config.WLXAccount,p=c.convergedFrameConfig||c.signup,m=p&&p.page,f=m&&m.imgs,v=u&&u.isCSSAnimationSupported,g='<div class="row progress-container">        <div role="progressbar" class="progress">            <!-- ko if: isCSSAnimationSupported -->            <div></div><div></div><div></div><div></div><div></div><div></div>            <!-- /ko -->            <!-- ko ifnot: isCSSAnimationSupported -->            <img role="presentation" data-bind="attr: { src: marchingAntsImage }" />            <!-- /ko -->        </div>    </div>',b='<div id="marchingAnts" role="progressbar" class="progress" >            <div></div><div></div><div></div><div></div><div></div>        </div>',h='<div id="marchingAnts" role="progressbar" class="progress">            <img role= "presentation" src="{0}"/>        </div>';
!function(e){e[e.Lightbox=0]="Lightbox",e[e.Content=1]="Content"}(l||(l={}));var y=function(){function e(){var e=this;e.isCSSAnimationSupported=v||!1,e.marchingAntsImage="",e.isCSSAnimationSupported||(e.marchingAntsImage=n())}return e}();ko&&ko.components&&ko.components.register("marchingAnts",{"viewModel":y,"template":g}),t.getMarchingAntsImage=n,t.showLightboxProgress=i,t.hideLightboxProgress=a,t.showContentProgress=o,t.hideContentProgress=s}(n=t.MarchingAnts||(t.MarchingAnts={}))}(t=e.Util||(e.Util={}))}(t=e.Account||(e.Account={}))
}(wLive||(wLive={})),function(){function e(e,t){if(e){if("undefined"!=typeof t&&t[e]){return GetString("live.accounts.strings."+t[e])}if(S[e]){return GetString("live.accounts.strings."+S[e])}}var n=GetString("live.accounts.strings.error_"+e);return n||(n=GetString("live.accounts.strings."+e)),n||(n=GetString("live.accounts.strings."+w)),n}function t(e){return"string"==typeof e}function n(e,n,r){return t(e)&&t(n)?r?e.toLowerCase()===n.toLowerCase():e===n:!1}function r(e,t){if(e=(e||"").trim(),t&&""===e){return C
}if(e.length>113){return A}var n=new RegExp(g.AltEmailRegEx);return e.match(n)?null:A}function i(e,t){var n=e>=97&&122>=e,r=e>=65&&90>=e;return n&&t||r&&!t}function a(e,t,n){return e=(e||"").trim(),t&&""===e?C:e.length>(n?n:10)?x:null}function o(e,t){return e=(e||"").trim(),t&&""===e?C:e.length>30||e.length<1?x:null}function s(e,t){t&&(e?t.css("opacity",1):t.css("opacity",0))}function l(e,t){if(e){if(e.indexOf("@")>=0){var n=e.split("@");if(2===n.length){for(var r=n[1].toLowerCase(),i=0,a=t.length;a>i;i++){if(t[i].toLowerCase()===r){return k.Live
}}return k.EASI}return k.Unknown}return k.Phone}return k.Unknown}function u(e,t){var n=!1;if(e&&t&&e.indexOf("@")>=0){var r=e.split("@");if(2===r.length){var i=r[1].toLowerCase();t.toLowerCase()===i&&(n=!0)}}return n}function d(e,t){if(e){var n=new RegExp(g.PhoneNumberFormat);if(!e.match(n)){return x}}else{if(t){return C}}return null}function c(){if(b&&b.url&&("undefined"==typeof p.HIPAMFE&&(HIPAMFE={"holder":"hipContent","scriptHolder":"hipScript","done":!1,"showMenu":!0,"showAddAccountOption":!1,"inputWidth":$B.IE&&$B.major<9?200:"100%","cssSet":{"cssCdHIPInput":"form-control input-max-width","cssCdHIPList":"form-control","cssCdHIPError":"alert alert-error","cssCdHIPErrorImg":"hide","cssCdHIPButton":"btn btn-default","cssCdHIPLabel":"text-base"},"createObservable":function(){var e=p.HIPAMFE;
return e.observable={},m.extend(e.observable,v.viewModelHandle),e.observable.hip.suppressMessages(!0),e.observable.hip(""),e.observable},"updateTitle":function(){var e=p.HIPAMFE,t=m("#HipPane");e.type&&("sms"===e.type?(m(".forVisualHip",t).addClass("hide"),m(".forSmsHip",t).removeClass("hide")):(m(".forVisualHip",t).removeClass("hide"),m(".forSmsHip",t).addClass("hide")))},"postLoad":function(){function e(e){return m("label",e).addClass("text-base text-body"),g.isWin10?(m("select",e).addClass("win-dropdown").parent().addClass("template-input inputType_large"),m("input[type=text]",e).addClass("win-textbox").parent().addClass("template-input inputType_large")):g.isWin10InclusiveOOBE?(m("select",e).removeClass().addClass("win-dropdown").parent().addClass("template-input"),m("input[type=text]",e).removeClass().addClass("win-textbox").parent().addClass("template-input")):(m("select",e).addClass("input-max-width").parent().addClass(t).removeAttr("style"),m("input[type=text]",e).removeClass("hiddenHipInputText").addClass("input-max-width").parent().addClass(t).removeAttr("style")),"#hipContent #wlspispHipControlButtonsContainer"===e.selector&&(m("body").hasClass("cb")?m("a",e).addClass("btn btn-block").parent().addClass(t).removeAttr("style"):m("a",e).addClass("btn btn-primary btn-block").parent().addClass(t).removeAttr("style")),e
}var t="form-group col-xs-24 template-input",n="col-xs-12",r=!1;m(".col-md-24").length>0?(t="form-group col-md-24 template-input",n="col-md-12",r=!1):m(".col-xs-18").length>0&&(t="form-group col-xs-18 template-input",n="col-xs-9",r=!0);var i=p.HIPAMFE,a=m("#hipDesc"),o=m("#hipTemplateContainer"),s=(m("#HipPane"),m("#"+i.holder));if(a.length>0&&a.addClass("text-body"),("undefined"===h||0===h)&&o.addClass("text-body"),y&&y.hideContentProgress(),i.updateTitle(),ko.cleanNode(o[0]),"sms"===i.type){var l=m("#pageControlHost input[type=submit]:visible");
v.ftrViewModelHandle?v.ftrViewModelHandle.buttons.nextButton.disabled(!0):l.length>0&&l.attr("disabled","disabled"),r&&m("#hipSection div.col-xs-18").addClass("alert alert-error");var u=e(m("#wlspispHIPErrorContainer",s).removeAttr("style").addClass(t)).detach().attr("data-bind","visible: !hip.suppressMessages() && !hip.isValid()"),d=e(m("#wlspispHipChallengeContainer",s).removeAttr("style")).detach(),c=e(m("#wlspispHipControlButtonsContainer",s).removeAttr("style")).detach().on("click",function(){i&&i.observable&&i.observable.hip.suppressMessages(!0)
}),f=e(m("#wlspispHipSolutionContainer",s)).hide().detach();m(".form-control",f).attr("data-bind","value: hip, setFocus: hip.focused, css: { 'has-error': !hip.suppressMessages() && !hip.isValid() }"),o.html("").append(d).append(c).append(f).append(u),i.createObservable(),i.observable.hip.suppressMessages(!0),ko.applyBindings(i.observable,o[0]);try{var b=v.viewModelHandle;b.phoneNumber&&b.phoneCountry&&i.setPhoneNumber(b.phoneCountry(),b.phoneNumber())}catch(w){}var C=i.getHipDataResponse;i.getHipDataResponse=function(e){C(e),e||(v.ftrViewModelHandle?v.ftrViewModelHandle.buttons.nextButton.disabled(!1):l.length>0&&l.removeAttr("disabled"))
},m('[id^="wlspispHIPPhoneInput"]',d).first().focus()}else{var c=m("<div></div>").addClass("text-body btn-group").addClass(n).append(m("a",s).addClass("btn btn-block captchaHIPLinks").attr("role","button").removeAttr("style").detach()),d=m("<div></div>").addClass(n);if(i.type===E){d.append(m(".cssWLSPHIPAudio",c).parent().detach().removeClass("btn btn-block"))}else{var x=m("img",s).filter(function(){return this.src.indexOf("GetHIPData")>-1}).css("height","auto").css("width","100%").css("max-width","200px");r||x.addClass("text-body"),d.append(x.detach())
}var f=m("<div></div>").addClass("form-group template-input").addClass(t),A=m(".form-control",s);A.attr("name",A.attr("id")),i.type!==E&&0!==$Config.isPlaceholderSupported&&m("body").hasClass("cb")?f.append(A.removeAttr("style").attr("placeholder",HIPAMFE.getInstruction()).attr("data-bind","value: hip, setFocus: hip.focused, css: { 'has-error': !hip.suppressMessages() && !hip.isValid() }").detach()):(f.append(m("<label></label>").addClass("text-base").text(HIPAMFE.getInstruction())),f.append(A.removeAttr("style").attr("data-bind","value: hip, setFocus: hip.focused, css: { 'has-error': !hip.suppressMessages() && !hip.isValid() }").detach()),i.type===E&&setTimeout(function(){A.focus()
},0));var u=m("<div></div>").addClass(t).append(m(".alert-error",s).detach().addClass("floatLeft"));o.html("").append(d).append(c).append(f).append(u),i.createObservable(),ko.applyBindingsWithValidation(i.observable,o[0])}i.observable.hip.serverError&&(i.error=1,i.setError(),i.observable.hip.serverError=null,m.each(m(".alert-error",o),function(e,t){var n=m(t);return"inline"===n.css("display")?(n.css("display","block"),!1):void 0}))}}),p.HIPAMFE&&!p.HIPAMFE.done)){y&&y.showContentProgress();var e=m("#hipScript")[0],t=m("#hipScript script")[0];
if(t){t.src=b.url}else{var n=document.createElement("script");n.type="text/javascript",n.src=b.url,e.appendChild(n)}}}var p=window,m=p.jQuery,f=p.wLive,v=f.Account,g=(f.Core.DataRequest,p.$Config.WLXAccount),b=g.hip,h=g.isConvergedUX,y=v.Util&&v.Util.MarchingAnts,w="error_500",C="errorFieldRequired",x="errorInvalidFormat",A="errorEmailInvalidFormat",k={"EASI":"EASI","Live":"Live","Phone":"Phone","Unknown":"Unknown"},S={"errorFieldRequired":"error_1018","errorEmailInvalidFormat":"error_1035","errorEmailExists":"error_1287"},E="audio";
registerNamespace("wLive.Account.FieldHelper"),f.Account.FieldHelper.verifyEmailAddress=r,f.Account.FieldHelper.verifyOttCode=a,f.Account.FieldHelper.verifyRecoveryCode=o,f.Account.FieldHelper.strEquals=n,f.Account.FieldHelper.isCapsLockOn=i,f.Account.FieldHelper.toggleInlineLabel=s,f.Account.FieldHelper.getMemberNameType=l,f.Account.FieldHelper.doesDomainMatch=u,f.Account.FieldHelper.verifyPhoneNumber=d,f.Account.FieldHelper.getErrorString=e,f.Account.FieldHelper.loadHip=c,f.Account.FieldHelper.memberNameTypes=k,f.Account.FieldHelper.errors={"required":C,"invalidFormat":x,"emailInvalidFormat":A}
}(),function(){function e(e,t){if(e){if(t){var r=n.Account.viewModelHandle;if(r&&r.validationOrder){var i=jQuery.inArray(e,r.validationOrder),a=i+1,o=r.validationOrder.length===a;if(o){e.focused&&e.focused(!0)}else{if(r.validationOrder.length>a){var s=r.validationOrder[a];s&&s.focused&&(e.focused&&e.focused(!1),s.focused(!0))}}}}else{e.focused&&e.focused(!0)}}}var t=window,n=t.wLive;registerNamespace("wLive.Account.Extensions.Utils"),n.Account.Extensions.Utils.setFocusOnObservable=e}(),function(){var e=window,t=e.jQuery,n=".placeholder",r="placement",i={"top":"top","left":$B.ltr?"left":"right","right":$B.ltr?"right":"left","bottom":"bottom"};
ko.bindingHandlers.autoSubmit={"update":function(e,n){var r=n(),i=ko.unwrap(r);i&&(ko.isObservable(r)&&r(!1),t(e).submit())}},ko.bindingHandlers.errorMessage={"init":function(){return{"controlsDescendantBindings":!0}},"update":function(e,t,n,r,i){{var a=null,o=t();ko.utils.unwrapObservable(o)}if(o.isValid()||o.suppressClientErrors&&o.suppressClientErrors()?o.isModified()||(a=o.serverError||null):a=o.error,ko.utils.setHtml(e,a),n.has("childBindings")){var s=n.get("childBindings")||{};for(var l in s){var u=document.getElementById(l);
u&&u.setAttribute("data-bind",s[l])}ko.applyBindingsToDescendants(i,e)}}},ko.bindingHandlers.validatorError={"init":function(){return{"controlsDescendantBindings":!0}},"update":function(e,t,n,r,i){{var a=null,o=t();ko.utils.unwrapObservable(o)}if(o.isModified()&&!o.isValid()&&(a=o.error),!o.isModified()&&o.serverError&&(a=o.serverError),ko.utils.setHtml(e,a),n.has("childBindings")){var s=n.get("childBindings")||{};for(var l in s){var u=document.getElementById(l);u&&u.setAttribute("data-bind",s[l])}ko.applyBindingsToDescendants(i,e)
}}},ko.bindingHandlers.hasFocusSelect={"init":function(e,t,n){ko.bindingHandlers.hasfocus.init(e,t,n)},"update":function(e,n){ko.bindingHandlers.hasfocus.update(e,n);var r=n(),i=ko.utils.unwrapObservable(r);i&&t(e).select()}},ko.bindingHandlers.setFocus={"update":function(e,n){var r=n(),i=ko.utils.unwrapObservable(r);i&&t(e).focus()}},ko.bindingHandlers.tooltip={"init":function(e,n){if(!($B&&$B.IE&&$B.V&&$B.V<=8)){var a=n(),o=ko.utils.unwrapObservable(a),s=t(e),l=t(window),u=".tooltip";if(o&&o.target){var d=t(o.target);
d&&d.length>0&&(s.on("blur"+u,function(){d.is(":focus")||d.tooltip("hide")}),s.on("focus"+u,function(){d.tooltip("show")})),l.on("resize",function(){s.is(":focus")&&(d.tooltip("hide"),d.tooltip("show"))})}else{s.on("show.bs.tooltip",function(){t(".tooltip").not(this).hide()});var c={};c.animation=!1;var p=o&&o[r]&&i[o[r]];c[r]=p||i.right,c.container="#maincontent",c.viewport="#maincontent",o&&o.html&&(c.html=!0,c.delay={"show":150,"hide":100}),o&&o.setup?(c.trigger="manual",o.setup()):c.trigger="focus",o&&o.dynamic&&s.on("change"+u,function(){s.tooltip("hide"),s.tooltip("show")
}),o&&o.hover&&(s.on("mouseover"+u,function(){s.tooltip("show")}),s.on("mouseout"+u,function(){s.tooltip("hide")})),o&&o.click&&(s.on("click"+u,function(){s.tooltip("show")}),s.on("focus"+u,function(){s.tooltip("show")}),s.on("blur"+u,function(){s.tooltip("hide")})),s.tooltip(c),l.on("resize",function(){s.is(":focus")&&(s.tooltip("hide"),s.tooltip("show"))})}ko.utils.domNodeDisposal.addDisposeCallback(e,function(){l.off("resize"),s.off(u),l=null,s=null})}}},ko.bindingHandlers.inputWithPlaceholder={"init":function(e,r,i){ko.bindingHandlers.textInput.init(e,r,i);
var a=".placeholder",o=t(e),s=o.next(n);s.on("click"+a,function(){setTimeout(function(){o.focus()},0)}),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){o=null,s.off(a),s=null})},"update":function(e,r,i){var a=ko.bindingHandlers.textInput.update;a&&a();var o=r(),s=ko.utils.unwrapObservable(o),l=t(e).next(n);l.length>0&&ko.bindingHandlers.visible.update(l[0],function(){var e=i.get("inlineLabelId");if(e){var n=t("#"+e);s?n.css("opacity",1):n.css("opacity",0)}return!s})}},ko.bindingHandlers.htmlWithBindings={"init":function(){return{"controlsDescendantBindings":!0}
},"update":function(e,t,n,r,i){ko.utils.setHtml(e,t());var a=n.get("childBindings");if(a){for(var o in a){var s=document.getElementById(o);s&&ko.applyBindingsToNode(s,a[o],i)}}ko.applyBindingsToDescendants(i,e)}}}(),function(){function e(e,t){return!e||!Boolean(e.match(t))}function t(e,t,n){var r=!0;return a.each(t,function(t,i){return r=Boolean(e.match(i)),n?r:!r}),r}function n(e,t,n){return n&&(e=e.toLowerCase(),t=t.toLowerCase()),0===e.indexOf(t)}function r(e,t,n){return n&&(e=e.toLowerCase(),t=t.toLowerCase()),e.lastIndexOf(t)+t.length===e.length
}var i=window,a=i.jQuery,o=i.wLive,s=o.Core,l=o.Account,u=i.$Config.WLXAccount,d=u.signup,c=s.DataRequest,p=l.FieldHelper,m=l.Extensions.Utils,f=l.Util&&l.Util.MarchingAnts,v="newpwd";a.extend(ko.validation.rules,{"birthdatePartRequired":{"validator":function(e){var t="",n="",r="",i=e.split(":");return 3===i.length&&(t=i[0],n=i[1],r=i[2]),Boolean(t&&n&&r)},"message":""},"birthdateValid":{"validator":function(e){var t=new Date,n="",r="",i="",a=e.split(":");3===a.length&&(n=a[0],r=a[1],i=a[2]);var o=parseInt(i,10),s=parseInt(r,10)-1,l=parseInt(n,10),u=new Date(o,s,l);
return!(u>t||0/0===o||0/0===s||0/0===l||l!==u.getDate()||s!==u.getMonth()||o!==u.getFullYear())},"message":""},"pwdContainsMemberName":{"validator":function(e){var t=d.viewContext&&d.viewContext.data&&d.viewContext.data.input?d.viewContext.data.input.memberNameInput:"";return e&&t&&0!==t.length?-1===e.toLowerCase().indexOf(t.toLowerCase().split("@")[0]):!0},"message":""},"pwdComplexity":{"validator":function(e){for(var t=[/[\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E]+/,/[\x30-\x39]+/,/[\x41-\x5A]+/,/[\x61-\x7A]+/],n=2,r=0,i=0,a=t.length;a>i;i++){if(e.match(t[i])&&r++,r>=n){return!0
}}return!1},"message":""},"strongPwdComplexity":{"validator":function(e){for(var t=[/[\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E]+/,/[\x30-\x39]+/,/[\x41-\x5A]+/,/[\x61-\x7A]+/],n=3,r=0,i=0,a=t.length;a>i;i++){if(e.match(t[i])&&r++,r>=n){return!0}}return!1},"message":""},"notMatchingPattern":{"validator":function(t,n){return e(t,n)},"message":""},"allPatterns":{"validator":function(e,n){return t(e,n,!0)},"message":""},"onePattern":{"validator":function(e,n){return t(e,n,!1)},"message":""},"userNamePattern":{"validator":function(e,n){if(!e||0===e.length||-1===e.indexOf("@")){return!1
}var r=e.split("@");return 2!==r.length?!1:t(r[0],n,!1)}},"userNameRequired":{"validator":function(e){if(!e||0===e.length||-1===e.indexOf("@")){return!1}var t=e.split("@");return 2!==t.length?!1:t[0].trim().length>0}},"liveMemberNameValid":{"validator":function(e,n){var r=n.domains,i=n.patterns;return r&&0!==r.length&&p.getMemberNameType(e,r)===p.memberNameTypes.Live?t(e.split("@")[0],i,!0):!0}},"proofClearPortionMatchEmail":{"validator":function(e,i){if(e){var a=n(e,i.clearPortion(),!0),o=i.domainPortion(),s=i.patterns,l=i.allowZero;
return l&&"0"===String(e)?!0:e.indexOf("@")>=0?a&&r(e,o,!0)&&t(e,s,!0):a&&t(e+o,s,!0)}return!1}},"proofClearPortionMatchPhone":{"validator":function(e,t){return t.allowZero&&"0"===String(e)?!0:Boolean(e&&e.length===t.matchDigits&&e.match(/^\d+$/)&&r(e,t.clearPortion(),!0))}},"memberNameValidForFl":{"validator":function(e,t){var n=t.fl,r=p.getMemberNameType(e,t.domains);return"EASI"===n&&r!==p.memberNameTypes.EASI?!1:"Live"===n&&r!==p.memberNameTypes.Live?!1:"Phone"===n&&r!==p.memberNameTypes.Phone?!1:!0}},"hipValidation":{"validator":function(e){var t=i.HIPAMFE;
return t&&t.done?(a("#hipContent .hiddenHipInputText").val(e),o.Account&&o.Account.viewModelHandle&&o.Account.viewModelHandle.hip&&o.Account.viewModelHandle.hip.serverError&&""===o.Account.viewModelHandle.hip()?(this.message=o.Account.viewModelHandle.hip.serverError,!1):(t.clientValidation(),t.setError(),this.message=t.getError(),""===t.getError())):!0}},"bannedPwd":{"async":!0,"validator":function(e,t,n){var r={"uaid":i.$Config.uaid};r.cipherValue=Encrypt("","",v,e),r.ski=t.ski;var a=new c(null,t.url,r,function(e){n(!e.isBanned),m.setFocusOnObservable(t.observable,!e.isBanned)
},function(){n(!0),m.setFocusOnObservable(t.observable,!0)});a.start()},"message":""},"checkAvailable":{"async":!0,"validator":function(e,t,n){var r={"signInName":e,"uaid":i.$Config.uaid};t.dft&&(r.dft=t.dft),t.includeSuggestions&&(r.includeSuggestions=t.includeSuggestions);var a="Account_CheckAvailPage",o=new c(null,t.url,r,function(r){try{var o={},s=i.performance&&i.performance.now?i.performance.now():(new Date).getTime();o.pageId=a,o.duration=Math.round(s-checkAvailableNamesApiStartTime),o.skipClientCall=!0,$ReportEvent.Action(o)
}catch(l){}var u=!r||r.isAvailable,c=r&&r.type,p=r&&r.suggestions||[],v=p.length>0,g=r&&r.isProof,b=r&&r.possibleEviction,h=r&&r.nopaAllowed,y=t.getResult&&t.getResult(0,e,u,c,v,g,b,h);f&&f.hideLightboxProgress(),t.getSuggestedMemberNames&&t.getSuggestedMemberNames(p),t.setSuccessMessage&&u&&t.setSuccessMessage(c,e),d.viewContext&&d.viewContext.data&&d.viewContext.data.reporting&&(d.viewContext.data.reporting.memberNameChangeCount++,u?d.viewContext.data.reporting.memberNameAvailableCount++:d.viewContext.data.reporting.memberNameUnavailableCount++),n(y?y:u),m.setFocusOnObservable(t.observable,u&&1===$B.IE)
},function(r){var o=r&&r.error;try{var s={},l=i.performance&&i.performance.now?i.performance.now():(new Date).getTime();s.pageId=a,s.duration=Math.round(l-checkAvailableNamesApiStartTime),s.errorCode=o?r.error.code:"",s.skipClientCall=!0,$ReportEvent.Action(s)}catch(u){}var c=r&&r.suggestions||[],p=c.length>0,v=t.getResult&&t.getResult(o&&r.error.code,e,void 0,void 0,p);f&&f.hideLightboxProgress(),t.getSuggestedMemberNames&&t.getSuggestedMemberNames(c),d.viewContext&&d.viewContext.data&&d.viewContext.data.reporting&&(d.viewContext.data.reporting.memberNameChangeCount++,d.viewContext.data.reporting.memberNameUnavailableCount++),n(v?v:!1),m.setFocusOnObservable(t.observable,!0)
});f&&f.showLightboxProgress(),checkAvailableNamesApiStartTime=i.performance&&i.performance.now?i.performance.now():(new Date).getTime(),o.start()},"message":""},"getPhoneDetails":{"async":!0,"validator":function(e,t,n){function r(e){if(!e.phoneDetails||e.phoneDetails.length<=0){n(!1)}else{var r=e.phoneDetails[0];t.phoneDetails&&t.phoneDetails(r),n(r.IsValid===!0)}}function a(e){n(!!t.onError),t.onError&&t.onError(e)}var o={"phone":[].concat(e),"uaid":i.$Config.uaid};t.country&&(o.country=[].concat(t.country()));
var s=new c(null,t.url,o,r,a);s.start()}}}),ko.validation.registerExtenders()}();var KnockoutExtensions;!function(){var e=window,t=e.jQuery;ko.subscribable.fn.whenAttainsValue=function(e){var n=this,r=t.Deferred();if(!ko.isObservable(n)&&!ko.isComputed(n)||e!==n()){var i=n.subscribe(function(t){t===e&&(i.dispose(),r.resolve())})}else{r.resolve()}return r.promise()},ko.subscribable.fn.validation=function(){return this.isValidating.whenAttainsValue(!1)}}(KnockoutExtensions||(KnockoutExtensions={})),JSMPnumber.prototype={"size":1,"data":[0]},!function(){registerNamespace("$Config.WLXAccount.signup"),$Config.WLXAccount.signup.errorCodes={"hipValidationError":"1043","hipNeeded":"1040","hipSMSNeeded":"1042","dailyLimitIDsReached":"450","oneTimeCodeInvalid":"1304","verificationSltInvalid":"1324","membernameTaken":"1058","domainNotAllowed":"1117","domainIsReserved":"1181","forbiddenWord":"403","passwordIncorrect":"1002","passwordConflict":"1009","invalidEmailFormat":"1062","invalidPhoneFormat":"1063","invalidBirthDate":"1039","invalidGender":"1243","invalidFirstName":"1240","invalidLastName":"1241","maximumOTTDailyError":"1204","bannedPassword":"1217","proofAlreadyExistsError":"1246","domainExistsInAad":"1184","domainExistsInAadSupportedLogin":"1185","membernameTakenEasi":"1242","membernameTakenPhone":"1052","signupBlocked":"1220","invalidMemberNameFormat":"1064","passwordRequired":"1330","emailMustStartWithLetter":"1256"}
}(),!function(){registerNamespace("$Config.WLXAccount.signup"),$Config.WLXAccount.signup.regularexpressions={"LiveMembernameRegex":"^(?:(?:[a-zA-Z])|(?:[\\w\\-](?:(?![\\.]{2,})[\\w\\.\\-]){0,62}[\\w\\-]))$","MembernameRegex":"^[a-zA-Z0-9_-]+(?:\\.[a-zA-Z0-9_-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$","PwdValidInput":"^[\\x20-\\x7e]{8,127}$","AltEmailRegEx":"^[a-zA-Z0-9!#$%\\x26'*+/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%\\x26'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$","PhoneNumberFormat":"^[\\+]{0,1}([\\(\\)\\- \\*\\.#/\\[\\]]*\\d[\\(\\)\\- \\*\\.#/\\[\\]]*){4,20}$","ProfileRegex":"([\\x00-\\x1f]|[\\x21-\\x26]|[\\x28-\\x2c]|\\x2f|[\\x3a-\\x40]|[\\x5b-\\x5e]|\\x60|[\\x7b-\\x7f]|\\x81|\\xa0|\\xad)"}
}(),function(){registerNamespace("$Config.WLXAccount.signup"),$Config.WLXAccount.signup.urls={"error":"error.aspx?errcode=","queryUrl":"query.aspx","dataRequest":{"createAccount":"API/CreateAccount","bannedPwd":"API/CheckIfBannedPassword","checkAvailable":"API/CheckAvailableSigninNames","getPhoneNumberDetails":"API/GetPhoneNumberDetails","sendOtt":"API/Proofs/SendOtt","createAndUpdateFamily":"API/CreateAndUpdateFamily","addPendingMember":"API/AddPendingMemberToFamily"}},$Config.WLXAccount.signup.regex={"verificationCode":"^\\d{4}$","verificationCodeInt":"^0$|^\\d{4}$"},$Config.WLXAccount.signup.signupObservableSets={"firstName":{"name":"firstName"},"lastName":{"name":"lastName"},"memberName":{"name":"memberName","clientPrefillKey":"PfUsernames"},"usernameRecoverySpeedbump":{"name":"usernameRecoverySpeedbump"},"password":{"name":"password"},"country":{"name":"country"},"birthdate":{"name":"birthdate"},"birthdateHTML5":{"name":"birthdateHTML5"},"phoneCountry":{"name":"phoneCountry"},"phoneNumber":{"name":"phoneNumber"},"alternateEmail":{"name":"alternateEmail"},"hip":{"name":"hip"},"verification":{"name":"verification"},"fedConfirm":{"name":"fedConfirm"},"fedPicker":{"name":"fedPicker"},"additionalLegalText":{"name":"additionalLegalText"},"personalizationCheckbox":{"name":"personalizationCheckbox"},"optinEmailCheckbox":{"name":"optinEmailCheckbox"},"evictionSpeedbump":{"name":"evictionSpeedbump"}}
}(),!function(){var e="credentials",t="cancel",n="action",r="create",i="finalBack",a="password",o="usernameRecoverySpeedbump",s="verification",l="fedConfirm",u="fedPicker",d="profileAccrual",c="birthDateCountryAccrual",p="privacy",m="tou",f="dataCollection",v="dataUse",g="retention",b="hip",h="blocked",y="impressum",w="deviceTicket",C="cxhCancel",x="cxhLocalAccount",A="evictionSpeedbump";registerNamespace("$Config.WLXAccount.signup");var k=$Config.WLXAccount,S=k&&k.signup,E=k&&k.usesWin10Behavior,P=S.page,N=0!==P.collectDob,T=0!==P.collectFLName,M=P.useKoreaPrivacy,I=S.fss.isFamilyAddMemberFlow,H=!!P.fedStateToken,F=H&&P.fedNamesPrefill&&1===P.fedNamesPrefill.length,_=H&&P.fedNamesPrefill&&P.fedNamesPrefill.length>1;
S.startState=S.collectDeviceTicket?w:F?l:_?u:S.prefillMembernameIsProof?o:e,S.options={"states":[w,e,o,a,p,m,A,f,v,g,b,h,s,l,u,d,c,y],"viewDefs":{"deviceTicket":{"pageId":"Signup_GetDeviceTicketPage_Client","sectionId":"DeviceTicket","control":"SignupControl","options":{"viewModel":"SignupViewModel","pageNextAction":n},"actions":{"privacy":p,"tou":m,"retention":g,"impressum":y,"dataCollection":f,"dataUse":v}},"credentials":{"pageId":"Signup_MemberNamePage_Client","sectionId":"Credentials","control":T||N?"SignupControl":"SignupCreateControl","options":{"viewModel":"SignupViewModel","viewModelOptions":{"observables":P.isPaginated?["memberName"]:["memberName","password","additionalLegalText","optinEmailCheckbox"]},"focusFirstInput":1,"optInEmailId":"iOptinEmail","pageBackAction":_?"backStack":t,"pageNextAction":n,"pageTitle":$Config.sharedStrings.pageTitle},"actions":{"cancel":i,"privacy":p,"tou":m,"dataCollection":f,"localAccount":x,"dataUse":v,"retention":g,"impressum":y,"hip":b,"blocked":h,"action":T?d:N?c:r,"verification":s,"password":a,"usernameRecoverySpeedbump":o,"evictionSpeedbump":A,"fedConfirm":l,"fedPicker":u,"backStack":[u]}},"usernameRecoverySpeedbump":{"pageId":"Signup_UsernameRecoverySpeedbumpPage_Client","sectionId":"UsernameRecoverySpeedbump","control":T||N?"SignupControl":"SignupCreateControl","options":{"viewModel":"SignupViewModel","viewModelOptions":{"observables":["usernameRecoverySpeedbump"]},"pageBackAction":t,"pageNextAction":n,"showIdentityBanner":1,"pageTitle":S.strings.usernameRecoverySpeedbumpPageTitle},"actions":{"action":T?d:N?c:r,"cancel":e,"password":a,"verification":s,"finalBack":i,"privacy":p,"tou":m,"retention":g,"impressum":y,"fedConfirm":l}},"evictionSpeedbump":{"pageId":"Signup_EvictionSpeedbumpPage_Client","sectionId":"EvictionSpeedbump","control":T||N?"SignupControl":"SignupCreateControl","options":{"viewModel":"SignupViewModel","viewModelOptions":{"observables":["evictionSpeedbump"]},"pageBackAction":t,"pageNextAction":n,"showIdentityBanner":1,"pageTitle":S.strings.usernameRecoverySpeedbumpPageTitle},"actions":{"action":T?d:N?c:r,"cancel":e,"password":a,"verification":s,"finalBack":i,"privacy":p,"tou":m,"retention":g,"impressum":y,"fedConfirm":l}},"password":{"pageId":"Signup_PasswordPage_Client","sectionId":"Password","control":T||N?"SignupControl":"SignupCreateControl","options":{"viewModel":"SignupViewModel","viewModelOptions":{"observables":["password","additionalLegalText","optinEmailCheckbox"]},"optInEmailId":"iOptinEmail","focusFirstInput":1,"pageBackAction":"backStack","pageNextAction":n,"showIdentityBanner":1,"pageTitle":S.strings.passwordPageTitle},"actions":{"cancel":e,"privacy":p,"tou":m,"dataCollection":f,"dataUse":v,"retention":g,"hip":b,"blocked":h,"impressum":y,"action":T?d:N?c:r,"verification":s,"finalBack":i,"usernameRecoverySpeedbump":o,"evictionSpeedbump":A,"fedConfirm":l,"backStack":[e,o,A]}},"privacy":{"pageId":"Signup_PrivacyPage_Client","sectionId":"TOUPrivacy","control":"TouPrivacyControl","options":{"viewModel":"SignupViewModel","isPrivacy":1,"command":M?"koreaprivacy":"privacy","pageBackAction":"backStack","pageNextAction":n},"actions":{"action":e,"cancel":e,"tou":m,"dataCollection":f,"dataUse":v,"retention":g,"impressum":y,"fedConfirm":l,"fedPicker":u,"backStack":[w,e,a,s,b,h,d,c,l,u]}},"tou":{"pageId":"Signup_TouPage_Client","sectionId":"TOUPrivacy","control":"TouPrivacyControl","options":{"viewModel":"SignupViewModel","isPrivacy":0,"command":"tou","pageBackAction":"backStack","pageNextAction":n},"actions":{"action":e,"cancel":e,"privacy":p,"dataCollection":f,"dataUse":v,"retention":g,"impressum":y,"fedConfirm":l,"fedPicker":u,"backStack":[w,e,a,s,b,h,d,c,l,u]}},"impressum":{"pageId":"Signup_ImpressumPage_Client","sectionId":"Impressum","control":"SignupControl","options":{"viewModel":"SignupViewModel","pageBackAction":"backStack","pageNextAction":n},"actions":{"action":e,"cancel":e,"privacy":p,"tou":m,"dataCollection":f,"dataUse":v,"retention":g,"fedConfirm":l,"fedPicker":u,"backStack":[w,e,a,s,b,h,d,c,l,u]}},"dataCollection":{"pageId":"Signup_DataCollectionPage_Client","sectionId":"TOUPrivacy","control":"TouPrivacyControl","options":{"viewModel":"SignupViewModel","command":"koreaprivacyextract","pageBackAction":"backStack","pageNextAction":n},"actions":{"action":e,"cancel":e,"privacy":p,"tou":m,"dataUse":v,"retention":g,"impressum":y,"fedConfirm":l,"fedPicker":u,"backStack":[w,e,a,s,b,h,d,c,l,u]}},"dataUse":{"pageId":"Signup_DataUsePage_Client","sectionId":"TOUPrivacy","control":"TouPrivacyControl","options":{"viewModel":"SignupViewModel","command":"koreaprivacyextract","pageBackAction":"backStack","pageNextAction":n},"actions":{"action":e,"cancel":e,"privacy":p,"tou":m,"dataCollection":f,"retention":g,"impressum":y,"fedConfirm":l,"fedPicker":u,"backStack":[w,e,a,s,b,h,d,c,l,u]}},"retention":{"pageId":"Signup_DataRetentionPage_Client","sectionId":"TOUPrivacy","control":"TouPrivacyControl","options":{"viewModel":"SignupViewModel","command":"koreaprivacyextract","pageBackAction":"backStack","pageNextAction":n},"actions":{"action":e,"cancel":e,"privacy":p,"tou":m,"dataCollection":f,"dataUse":v,"impressum":y,"fedConfirm":l,"fedPicker":u,"backStack":[w,e,a,s,b,h,d,c,l,u]}},"hip":{"pageId":"Signup_HipPage_Client","sectionId":"HipPane","control":"SignupCreateControl","options":{"viewModel":"SignupViewModel","viewModelOptions":{"observables":["hip"]},"focusFirstInput":1,"pageBackAction":t,"pageNextAction":n,"showIdentityBanner":1,"pageTitle":$Config.sharedStrings.hipHeading},"actions":{"action":r,"cancel":F?l:_?u:e,"privacy":p,"tou":m,"dataCollection":f,"dataUse":v,"retention":g,"hip":b,"blocked":h,"impressum":y,"blocked":h,"credentials":e,"password":a,"verification":s,"fedConfirm":l,"fedPicker":u}},"blocked":{"pageId":"Signup_BlockedPage_Client","sectionId":"Blocked","control":"PageDialogControl","options":{"viewModel":"SignupViewModel","pageBackAction":t,"pageNextAction":n},"actions":{"action":E?x:i,"cancel":E?I?C:x:i,"privacy":p,"tou":m,"dataCollection":f,"dataUse":v,"retention":g,"hip":b,"blocked":h,"impressum":y}},"verification":{"pageId":"Signup_VerificationPage_Client","sectionId":"Verification","control":H?"SignupControl":"SignupCreateControl","options":{"viewModel":"SignupViewModel","viewModelOptions":{"observables":P.isPaginated&&!H?["verification","additionalLegalText","optinEmailCheckbox"]:["verification"]},"optInEmailId":"iOptinEmail","focusFirstInput":1,"pageBackAction":"backStack","pageNextAction":n,"showIdentityBanner":1,"pageTitle":$Config.sharedStrings.lblVerificationCode},"actions":{"action":H?l:r,"privacy":p,"tou":m,"dataCollection":f,"dataUse":v,"retention":g,"hip":b,"blocked":h,"impressum":y,"hip":b,"credentials":e,"password":a,"profileAccrual":d,"birthDateCountryAccrual":c,"evictionSpeedbump":A,"usernameRecoverySpeedbump":o,"fedConfirm":l,"fedPicker":u,"backStack":[c,d,a,e,A,o,u]}},"fedConfirm":{"pageId":"Signup_FedConfirmPage_Client","sectionId":"FedConfirm","control":"SignupCreateControl","options":{"viewModel":"SignupViewModel","viewModelOptions":{"observables":["fedConfirm","additionalLegalText"]},"focusFirstInput":1,"pageBackAction":F?t:"backStack","pageNextAction":n,"showIdentityBanner":1,"pageTitle":S.strings.fedConfirmPageTitle},"actions":{"action":r,"cancel":i,"privacy":p,"tou":m,"dataCollection":f,"dataUse":v,"retention":g,"hip":b,"blocked":h,"impressum":y,"credentials":e,"profileAccrual":d,"birthDateCountryAccrual":c,"evictionSpeedbump":A,"usernameRecoverySpeedbump":o,"verification":s,"fedPicker":u,"backStack":[c,d,e,o,A,s,u]}},"fedPicker":{"pageId":"Signup_FedPickerPage_Client","sectionId":"FedPicker","control":T||N?"SignupControl":"SignupCreateControl","options":{"viewModel":"SignupViewModel","viewModelOptions":{"observables":["fedPicker"]},"pageBackAction":t,"pageNextAction":n,"pageTitle":S.strings.fedPickerPageTitle},"actions":{"action":T?d:N?c:r,"cancel":i,"privacy":p,"tou":m,"impressum":y,"fedConfirm":l,"credentials":e,"password":a,"verification":s}},"profileAccrual":{"pageId":"Signup_ProfileAccrualPage_Client","userAction":"Action_ClientSideTelemetry","sectionId":"ProfileAccrual","control":N?"SignupControl":"SignupCreateControl","options":{"viewModel":"SignupViewModel","viewModelOptions":{"observables":["firstName","lastName"]},"focusFirstInput":1,"pageBackAction":"backStack","pageNextAction":n,"showIdentityBanner":1,"pageTitle":$Config.sharedStrings.profileAccrualPageTitle},"actions":{"action":N?"birthDateCountryAccrual":r,"privacy":p,"tou":m,"dataCollection":f,"dataUse":v,"retention":g,"hip":b,"blocked":h,"impressum":y,"credentials":e,"verification":s,"hip":"hip","password":a,"evictionSpeedbump":A,"usernameRecoverySpeedbump":o,"fedConfirm":l,"fedPicker":u,"backStack":[a,e,A,o,u]}},"birthDateCountryAccrual":{"pageId":"Signup_BirthdatePage_Client","userAction":"Action_ClientSideTelemetry","sectionId":"BirthDateCountryAccrual","control":"SignupCreateControl","options":{"viewModel":"SignupViewModel","viewModelOptions":{"observables":N?["country","birthdate"]:[]},"focusFirstInput":1,"pageBackAction":"backStack","pageNextAction":n,"showIdentityBanner":1,"pageTitle":S.strings.birthdatePageTitle||$Config.sharedStrings.profileAccrualPageTitle},"actions":{"action":r,"privacy":p,"tou":m,"dataCollection":f,"dataUse":v,"retention":g,"hip":b,"blocked":h,"impressum":y,"credentials":e,"verification":s,"hip":b,"password":a,"profileAccrual":d,"evictionSpeedbump":A,"usernameRecoverySpeedbump":o,"fedConfirm":l,"fedPicker":u,"backStack":[d,a,e,A,o,u]}},"finalBack":{}}},P.isPaginated||delete S.options.viewDefs.password
}(),function(){function e(e,t){var n={"buttons":{},"text":{}},r={};r.disabled=ko.observable(!1),r.visible=ko.observable(!0);var i={};i.visible=ko.observable(t&&0===s.noConsentText);var a={};return a.disabled=ko.observable(!1),a.visible=ko.observable(!0),n.buttons.nextButton=r,n.buttons.consentCreateButton=i,n.buttons.backButton=a,n.text.visible=ko.computed(function(){return t&&n.buttons.nextButton.visible()}),n.buttons.visible=ko.computed(function(){return n.buttons.nextButton.visible()||n.buttons.backButton.visible()
}),n.additionalLegalText=e,o&&(n.strings=o.strings,n.config=o.page),n}function t(e){return!(!s.isPaginated||s.fedStateToken||0!==s.pwdless&&e===o.memberNameType.Phone||0!==s.pwdlessemail&&e===o.memberNameType.EASI)}function n(e){var t=!1;if(0!==o.autoVerify){var n=o.viewContext.data;if(n.reporting&&n.reporting.autoVerifyShown){return!1}if(e&&(e=e.replace(/[^0-9]/g,"")),n.devicePhone){var r=n.devicePhone;jQuery.each(r,function(n,r){return r&&r.phoneNumber&&e&&e.indexOf(r.phoneNumber)>=0?(t=!0,!1):void 0})}}return t
}var r=window,i=r.wLive,a=(i.Account,r.$Config.WLXAccount),o=a.signup,s=o.page;registerNamespace("wLive.Account.SignupHelper"),i.Account.SignupHelper.createFooterObservable=e,i.Account.SignupHelper.paginatedPasswordNotCollected=t,i.Account.SignupHelper.isAutoVerificationSupported=n}(),function(){var e=window,t=e.wLive,n=t.Core.DataRequest,r=e.jQuery,i=t.Account,a=i.Extensions.Utils,o=i.FieldHelper,s=i.SignupHelper,l=i.Util&&i.Util.HighContrast,u=null,d=e.MSA&&e.MSA.CXH,c=e.$Config.WLXAccount,p=(c.hip,c.signup),m=p.memberNameType,f=p.page,v={},g={},b={},h={},y={},w=p.signupObservableSets,C=c.usesWin10Behavior,x=c.isWin10,A=c.isWin10InclusiveOOBE,k=13,S="onAction",E="credentials";
$Do.when("ExternalHelper",0,function(){u=e.ExternalHelper}),defineNamespace("wLive.Account.SignupObservableFactory",{"createObservableSetByPrefillName":function(e,n,r){var i=t.Account.SignupObservableFactory;switch(b=p.strings,h=b.errors,g=p.urls.dataRequest,y=p.errorCodes,v=p.regex,e){case w.firstName.name:return i.createFirstNameObservableSet(n,r);case w.lastName.name:return i.createLastNameObservableSet(n,r);case w.memberName.name:return i.createMemberNameObservableSet(n,r);case w.usernameRecoverySpeedbump.name:return i.createUsernameRecoverySpeedbumpObservableSet(n,r);
case w.password.name:return i.createPasswordObservableSet(n,r);case w.country.name:return i.createCountryObservableSet(n,r);case w.birthdate.name:return i.createBirthdateObservableSet(n,r);case w.birthdateHTML5.name:return i.createBirthdateHTML5ObservableSet(n,r);case w.phoneCountry.name:return i.createPhoneCountryObservableSet(n,r);case w.phoneNumber.name:return i.createPhoneNumberObservableSet(n,r);case w.alternateEmail.name:return i.createAlternateEmailObservableSet(n,r);case w.hip.name:return i.createHipObservableSet(n,r);
case w.verification.name:return i.createVerificationObservableSet(n,r);case w.fedConfirm.name:return i.createFedConfirmObservableSet(n,r);case w.fedPicker.name:return i.createFedPickerObservableSet(n,r);case w.additionalLegalText.name:return i.createAdditionalLegalTextObservableSet(n,r);case w.personalizationCheckbox.name:return i.createPersonalizationCheckboxObservableSet(n,r);case w.optinEmailCheckbox.name:return i.createOptinEmailCheckboxObservableSet(n,r);case w.evictionSpeedbump.name:return i.createEvictionSpeedbumpObservableSet(n,r);
default:return null}},"createFirstNameObservableSet":function(e,t){var n={};!e&&u&&(e=u.getProperty("PfFirstName")),n.firstName=ko.observable(e||"").extend({"required":{"params":!0,"message":h.required}}).extend({"notMatchingPattern":{"params":v.ProfileRegex,"message":h.invalidFirstName}});var r=function(){n.firstName.suppressMessages(!1),p.viewContext.data.input[w.firstName.name]=n.firstName()};return n.firstName.suppressMessages=ko.observable(!0),n.firstName.subscribe(r),n.firstName.serverError=t,n.firstName.focused=ko.observable(!1),e&&r(),n
},"createLastNameObservableSet":function(e,t){var n={};!e&&u&&(e=u.getProperty("PfLastName")),n.lastName=ko.observable(e||"").extend({"required":{"params":!0,"message":h.required}}).extend({"notMatchingPattern":{"params":v.ProfileRegex,"message":h.invalidLastName}});var r=function(){n.lastName.suppressMessages(!1),p.viewContext.data.input[w.lastName.name]=n.lastName()};return n.lastName.suppressMessages=ko.observable(!0),n.lastName.subscribe(r),n.lastName.serverError=t,n.lastName.focused=ko.observable(!1),e&&r(),n
},"createMemberNameObservableSet":function(t,l){var u={},d=0!==f.supportsPhone,C=u.domains=p.domains,k=p.defaultDomain,S="",E="",P=p.viewContext.data.prefill[w.memberName.name],N=p.viewContext.data.prefill[w.country.name],T=!1;u.showCredentialsView=!0,u.showLegalText=!f.isPaginated,N&&(S=N);var M=d?p.memberNameType.Phone:p.memberNameType.EASI;p.isWin10Desktop&&(M=p.memberNameType.EASI);var I=P&&P[m.Live]&&P[m.Live].length>0,H=P&&P[m.EASI]&&P[m.EASI].length>0,F=d&&P&&P[m.Phone]&&P[m.Phone].length>0,_=!I&&!H&&!F,D="Default_Live"===p.fl&&!I,O="Default_EASI"===p.fl&&!H,L="Default_Phone"===p.fl&&!F;
if(t){if(E=p.viewContext.data.input.memberNameInput,M=o.getMemberNameType(t,C),M===m.Live){var $=t.split("@");$&&$.length>1&&(k=$[1])}else{d&&M===m.Phone&&(S=p.viewContext.data.input.memberNamePhoneCountry)}}else{if(d&&("Phone"===p.fl||"Always_Default_Phone"===p.fl||"Default_Phone"===p.fl&&(F||_)||F&&(D||O))){M=m.Phone,F&&(E=P[m.Phone][0].phoneNumber,S=P[m.Phone][0].country)}else{if("EASI"===p.fl||"Default_EASI"===p.fl&&(H||_)||H&&(D||L)){M=m.EASI,H&&(E=P[m.EASI][0].email)}else{if("Live"===p.fl||"Default_Live"===p.fl&&(I||_)||I&&(O||L)){if(M=m.Live,I){var B=P[m.Live][0].email.split("@");
E=B[0],k=B[1]}}else{if("Email"===p.fl){if(M=m.EASI,H){E=P[m.EASI][0].email}else{if(I){M=m.Live;var B=P[m.Live][0].email.split("@");E=B[0],k=B[1]}}}}}}}var V=u.memberNameType=ko.observable(encodeURI(M));V.subscribe(function(){W(""),Q("")});var U=u.domain=ko.observable(k||C[0]),R=(u.placeholder=ko.computed(function(){switch(V()){case m.EASI:return b.usernamePlaceholderEASI;case m.Phone:return b.usernamePlaceholderPhone;case m.Live:return b.usernamePlaceholderLive;default:return""}}),u.memberNameAriaLabel=ko.computed(function(){switch(V()){case m.Phone:return b.ariaLblUsernamePhone;
case m.Live:case m.EASI:return b.ariaLblUsernameEmail;default:return""}}),u.emailDomainOptionsMenuAriaLabel=ko.observable(b.emailDomainOptionsMenuAriaLabel),u.cssWin10InclusiveOOBE=ko.computed(function(){return V()===m.Live?"win-textbox win-textarea md padding":V()===m.Phone?"win-textbox md":"win-textbox win-textarea"}),function(e){var t=p.phoneCountryListJson,n=e||t["default"];u.memberNamePhoneCountries=t.list;for(var r=0,i=u.memberNamePhoneCountries.length;i>r;r++){if(u.memberNamePhoneCountries[r].iso===n){return u.memberNamePhoneCountries[r]
}}}),j=u.memberNameInput=ko.observable(E||"");"EASI"!==p.fl&&"Live"!==p.fl&&"Phone"!==p.fl&&j.subscribe(function(e){var t=this;if(t.memberNameType()!==m.Phone){var n=o.getMemberNameType(e,t.domains);if(n===m.EASI){t.memberNameType(m.EASI)}else{if(n===m.Live){var r=e.split("@");t.domain(r[1]),t.memberNameInput(r[0]),t.memberNameType(m.Live)}}}else{p.viewContext.data.input[w.verification.name]=""}t.memberNameSuccessMessage(""),t.memberNameExistsMessage("")},u),d&&(u.memberNamePhoneCountryObj=ko.observable(R(S)));
var W=u.memberNameSuccessMessage=ko.observable(""),Q=u.memberNameExistsMessage=ko.observable(""),z=u.memberNameSuggestions=ko.observableArray([]),q=u.showSuggestions=ko.observable(!1);u.onClickSuggestionsLink=function(){var e=z().length>0;if(e){$ReportEvent.Fire("Signup_SuggestionClick_UserAction"),r("#CredentialsSuggestionsModal").length>0&&r("#CredentialsSuggestionsModal").modal("show"),x&&r("#MemberNameSuggestions").show(),q(!0);var t=r("a,button,input[type=button]").not(":hidden").first();t.focus(),i.ftrViewModelHandle&&(i.ftrViewModelHandle.buttons.backButton.visible(!1),i.ftrViewModelHandle.buttons.nextButton.visible(!1))
}},u.setOptionData=function(e,t){ko.applyBindingsToNode(e,{"attr":{"data-value":t.iso}},t)},u.onPickSuggestion=function(e){if(e){var t=e.split("@");t&&t.length>1&&(j(t[0]),U(t[1])),u.onSuggestionsClose()}},u.onSuggestionsClose=function(){r("#CredentialsSuggestionsModal").length>0&&r("#CredentialsSuggestionsModal").modal("hide"),q(!1);var e=r("a,button,input[type=button]").not(":hidden").first();e.focus(),i.ftrViewModelHandle&&(i.ftrViewModelHandle.buttons.backButton.visible(0===p.noAuthCancel),i.ftrViewModelHandle.buttons.nextButton.visible(!0))
};var G=p.viewContext.data.previouslyCheckedMemberName||"",X=!1,K=function(e,t){e===m.Live?W(h.memberNameAvailable.format(t)):e===m.EASI&&W(h.memberNameAvailableEasi)},J=function(e,t,n,r,i,a,o,s){var l=h.memberNameTaken,u=h.memberNameTakenNoSugg,c="",v="";switch(0!==p.displaySignInLinkInMnError||p.autoRedirToSignInOnMnTakenError?(p.signinUrl=$Utility.addQueryString(p.signinUrl,"username",t||""),l=h.memberNameTaken.format(t,p.signinUrl),c=h.memberNameTakenEasi.format(t,p.signinUrl),v=h.memberNameTakenPhone.format(t,p.signinUrl)):(c=h.memberNameTakenEasi.format(t),v=h.memberNameTakenPhone.format(t)),e){case y.domainExistsInAad:return{"isValid":!1,"message":h.domainExistsInAad.format("domainExistsInAadSwitchToOutlook")};
case y.domainExistsInAadSupportedLogin:return{"isValid":!1,"message":h.domainExistsInAadSupportedLogin.format(t)};case y.domainIsReserved:case y.domainNotAllowed:return{"isValid":!1,"message":h.domainNotAllowed};case y.signupBlocked:return{"isValid":!1,"message":h.signupBlocked.format(t)};case y.invalidEmailFormat:return{"isValid":!1,"message":h.invalidEmailFormat};case y.invalidPhoneFormat:return{"isValid":!1,"message":h.invalidPhoneFormat};case y.invalidMemberNameFormat:return{"isValid":!1,"message":d&&V()===m.Phone?h.invalidPhoneFormat:h.invalidEmailFormat};
case y.membernameTaken:case y.membernameTakenEasi:return p.autoRedirToSignInOnMnTakenError?($Utility.navigateTo(p.signinUrl),!0):{"isValid":!1,"message":A||e===y.membernameTakenEasi?c:i?l:u};case y.membernameTakenPhone:return d?0!==p.forceEviction?(Q(h.memberNameExistsPhone),{"isValid":!0,"message":""}):{"isValid":!1,"message":v}:{"isValid":!1,"message":l}}if(0===e){if(n===!1){return r===m.Live?{"isValid":!1,"message":A?c:i?l:u}:{"isValid":!1,"message":c}}p.showUsernameRecoverySpeedbump&&a&&(p.viewContext.data.shouldGoToUsernameRecoverySpeedbump=!0,p.viewContext.data.shouldGoToUsernameRecoverySpeedbumpForPreviouslyCheckedMemberName=!0),p.isEvictionSpeedbumpEnabled&&o&&(p.viewContext.data.shouldGoToEvictionSpeedbump=!0,p.viewContext.data.shouldGoToEvictionSpeedbumpForPreviouslyCheckedMemberName=!0,p.viewContext.data.isNoPaAllowedOnEvictedMemberName=s,s||(f.pwdless=f.pwdlessemail=0))
}return{"isValid":!0,"message":""}},Z=ko.computed(function(){var e=this,t=e.memberNameInput();return e.memberNameType()===m.Live?t+"@"+e.domain():d&&e.memberNameType()===m.Phone?"+"+u.memberNamePhoneCountryObj.peek().code+t:t},u).extend({"required":{"params":!0,"message":h.emailRequired}}).extend({"validation":{"onlyIf":function(){return V()===m.Live},"validator":function(){return j()},"message":h.emailRequired}}).extend({"liveMemberNameValid":{"params":{"domains":C,"patterns":[v.LiveMembernameRegex]},"message":h.invalidEmailFormat}}).extend({"memberNameValidForFl":{"params":{"fl":p.fl,"domains":C},"message":h.domainNotAllowed}}).extend({"validation":{"onlyIf":function(){return V()===m.EASI
},"validator":function(e){return e.match(v.MembernameRegex)},"message":h.invalidEmailFormat}}).extend({"validation":{"onlyIf":function(){return d&&V()===m.Phone&&j()},"validator":function(e){return e.match(v.PhoneNumberFormat)},"message":h.invalidPhoneFormat}}).extend({"validation":{"onlyIf":function(){return d&&V()===m.Phone&&!j()},"validator":function(e){return e.match(/ /)},"message":h.phoneRequired}}).extend({"pattern":{"onlyIf":function(){return V()===m.Live},"params":"^[a-zA-Z]","message":h.emailMustStartWithLetter}}).extend({"validation":{"onlyIf":function(){var e=p.viewContext.data.prefill.checkServerSideCache&&(V()===m.EASI&&H||V()===m.Phone&&F);
return e||(X=!1),e},"validator":function(t){var r=p.viewContext.data.prefill[w.memberName.name];for(index=0;index<r[V()].length;++index){if(prefill=r[V()][index],prefill.phoneNumber&&prefill.countryCode&&"+"+prefill.countryCode+prefill.phoneNumber==t||prefill.email&&prefill.email==t||prefill===t){if(G!=t&&(p.viewContext.data.reporting.memberNameChangeCount++,prefill.isAvailable?p.viewContext.data.reporting.memberNameAvailableCount++:p.viewContext.data.reporting.memberNameUnavailableCount++,!p.noCheckavail)){var i={"signInName":t,"uaid":e.$Config.uaid,"skipBECall":!0,"isAvailableOnServerCache":prefill.isAvailable,"isEasiCheck":!0},o=new n(null,$Utility.generateUrl(c.urls.baseDomain,g.checkAvailable,!0),i,null,null);
o.start()}if(p.viewContext.data.previouslyCheckedMemberName=G=t,prefill.isAvailable){return K(V(),t),a.setFocusOnObservable(Z,!0),X=!0,p.prefillMembernameIsPossiblyEvicted&&(p.viewContext.data.shouldGoToEvictionSpeedbumpForPreviouslyCheckedMemberName=!0,p.viewContext.data.isNoPaAllowedOnEvictedMemberName=p.prefillMembernameIsNopaAllowed,p.prefillMembernameIsNopaAllowed||(f.pwdless=f.pwdlessemail=0)),p.prefillMembernameIsProof&&(p.viewContext.data.shouldGoToUsernameRecoverySpeedbumpForPreviouslyCheckedMemberName=!0),!0
}if(prefill.errorCode){var s=J(prefill.errorCode,t);if(s){return this.message=s.message,a.setFocusOnObservable(Z,!1),X=!0,s.isValid}}break}}return X=!1,!0},"message":""}});f.isPaginated&&E&&Z.isValid()&&(F&&!P[m.Phone][0].errorCode&&E==P[m.Phone][0].phoneNumber||H&&!P[m.EASI][0].errorCode&&E==P[m.EASI][0].email||I&&!P[m.Live][0].errorCode&&E==P[m.Live][0].email.split("@")[0])?(p.isCombinedSISUV2&&(u.showCredentialsView=!1),u.showPaginatedUsernamePrefill=!0,u.paginatedUsernamePrefill=Z()):u.showPaginatedUsernamePrefill=!1,Z.extend({"checkAvailable":{"onlyIf":function(){var e=!!j()&&Z&&G!=Z()&&!X&&!p.noCheckavail;
return Z&&(p.viewContext.data.previouslyCheckedMemberName=G=Z()),!e&&G?(p.viewContext.data.shouldGoToEvictionSpeedbump=p.viewContext.data.shouldGoToEvictionSpeedbumpForPreviouslyCheckedMemberName,p.viewContext.data.shouldGoToUsernameRecoverySpeedbump=p.viewContext.data.shouldGoToUsernameRecoverySpeedbumpForPreviouslyCheckedMemberName):p.viewContext.data.shouldGoToUsernameRecoverySpeedbumpForPreviouslyCheckedMemberName=!1,e},"params":{"url":$Utility.generateUrl(c.urls.baseDomain,g.checkAvailable,!0),"observable":Z,"getSuggestedMemberNames":function(e){z(e)
},"setSuccessMessage":K,"getResult":J,"includeSuggestions":!0,"message":h.checkAvailableFail}}});var Y=function(){p.viewContext.data.input[w.memberName.name]=Z(),p.viewContext.data.input.memberNameInput=j(),p.viewContext.data.input.memberNameType=V(),p.viewContext.data.input.isMemberNameVerified=T,d&&(Q(""),p.viewContext.data.input.memberNamePhoneCountry=u.memberNamePhoneCountryObj().iso,p.viewContext.data.input.memberNamePhoneCountryCode=u.memberNamePhoneCountryObj().code)};return Y(),Z.subscribe(function(e){u.memberName.suppressMessages(!1),Y(),u.memberName.previousValue(e)
}),Z.previousValue=ko.observable(""),Z.suppressMessages=ko.observable(!u.memberNameInput()),Z.serverError=l,Z.focused=ko.observable(!1),u.memberName=Z,u.isCountryCodeDropDownFocused=ko.observable(!1),u.domainDropdownClick=function(e){Z.isValidating()||U(e)},u.phoneSwitchFocused=ko.observable(!1),u.easiSwitchFocused=ko.observable(!1),u.liveSwitchFocused=ko.observable(!1),u.switchMemberNameType=function(e){var t=m,n=V();if(!Z.isValidating()&&e!==n){if(p.viewContext.data.previouslyCheckedMemberName=G=null,e===t.Live){if(j(""),V(e),U(C[0]),I){var r=P[m.Live][0].email.split("@");
j(r[0]),U(r[1])}}else{if(e===t.EASI){if(V(e),0!==f.pwdlessemail){var i=window.wLive.Account.viewModelHandle;i&&i.password&&i.password("")}j(H?P[t.EASI][0].email:""),U(C[0])}else{if(d&&e===t.Phone){if(0!==f.pwdless){var i=window.wLive.Account.viewModelHandle;i&&i.password&&i.password("")}V(e),j(F?P[t.Phone][0].phoneNumber:""),U(C[0])}else{e||(V()===t.Phone?u.switchMemberNameType(t.EASI):V()===t.EASI?u.switchMemberNameType(t.Live):V()===t.Live&&u.switchMemberNameType(d?t.Phone:t.EASI))}}}Z.suppressMessages(!j()),Z.focused(!0)
}},u.memberNameInputType=ko.computed(function(){return $B&&$B.IE&&$B.V&&$B.V<=8?"text":d&&V()===m.Phone?"tel":V()===m.EASI?"email":"text"}),u.liveEasiSwitchText=ko.computed(function(){return V()===m.Live?b.easiSwitch:b.liveSwitch}),u.memberNamePrefill=ko.computed(function(){return P?P[V()]:null}),u.prefillSelected=function(e){d&&e&&e.phoneNumber?(u.memberNameInput(e.phoneNumber),u.memberNamePhoneCountryObj(R(e.country))):e&&e.email&&u.memberNameInput(e.email)},u.domainSelected=function(e){u.domain(e),Z.suppressMessages(!j()),Z.focused(!0)
},u.shouldGoToPasswordPage=ko.computed(function(){return s.paginatedPasswordNotCollected(V())}),u},"createUsernameRecoverySpeedbumpObservableSet":function(){var e={},t=p.viewContext.data.input,n=t.memberName||p.prefillProofMembername,r=t.memberNameType||o.getMemberNameType(p.prefillProofMembername,p.domains,p.fedProvider);p.prefillMembernameIsProof&&(t.memberName=t.memberNameInput=n),e.usernameRecoverySpeedbumpDesc=b.usernameRecoverySpeedbumpDesc.format(n),n=n.replace("+","");var i=$Utility.addQueryString(b.usernameRecoverySpeedbumpRecoveryLinkUrl,"mn",n);
return i=i.replace("prefillUserName",encodeURI(n)),e.usernameRecoverySpeedbumpRecoveryLink=p.usernameRecoverySpeedbumpRecoveryLink=p.usernameRecoverySpeedbumpRecoveryLink.replace("#",i),e.shouldGoToPasswordPage=s.paginatedPasswordNotCollected(r),e},"createPasswordObservableSet":function(t,n){{var r={},a=function(){return i.viewModelHandle},s=function(){return a()&&a().memberName&&a().memberName()?a().memberName():p.viewContext.data.input.memberName},l=function(){return o.getMemberNameType(s(),p.domains)},u=!1,d=(r.showPasswordExperimentEnabled="true"===p.showPasswordExperimentEnabled,r.showPassword=ko.observable(!1));
r.showPasswordLabel=ko.observable(b.showPasswordLabel),r.showPasswordAriaLabel=ko.observable(b.showPasswordAriaLabel),r.passwordInputType=ko.pureComputed(function(){return d()===!0?(u===!1&&(u=!0,$ReportEvent.Action({"pageId":p.signUpPageId,"userAction":["Action_Signup_ShowPassword"]})),"text"):"password"})}r.skipPasswordValidation=function(){return n?!0:f.fedStateToken?!0:0!==f.pwdless?l()===m.Phone||0!==f.pwdlessemail&&l()===m.EASI:!1},r.oobePasswordDescText=ko.computed(function(){return A&&l()===m.Phone?b.phonePasswordDesc.format(s()):b.passwordDesc
});var y=ko.observable(t||"").extend({"required":{"onlyIf":function(){return!r.skipPasswordValidation()},"params":!0,"message":h.passwordRequired},"minLength":{"onlyIf":function(){return!r.skipPasswordValidation()},"params":8,"message":h.passwordTooSimple},"pattern":{"onlyIf":function(){return!r.skipPasswordValidation()},"params":v.PwdValidInput,"message":h.passwordInvalidChar},"pwdComplexity":{"onlyIf":function(){return!r.skipPasswordValidation()},"params":!0,"message":h.passwordTooSimple},"pwdContainsMemberName":{"onlyIf":function(){return!r.skipPasswordValidation()
},"params":!0,"message":function(){return l()===m.Phone?h.pwdContainsMnPhone:h.pwdContainsMnEmail}}});return 0!==p.noBPCheck||r.skipPasswordValidation()?y.isValidating=ko.observable(!1):y.extend({"bannedPwd":{"onlyIf":function(){var e=y()&&p.viewContext.data.previouslyCheckedPassword!=y();return e&&(p.viewContext.data.previouslyCheckedPassword=y()),e},"params":{"url":$Utility.generateUrl(c.urls.baseDomain,g.bannedPwd,!0),"ski":SKI||"","observable":y},"message":h.bannedPassword}}),y.subscribe(function(t){if(r.password.suppressMessages(!1),p.viewContext.data.input[w.password.name]=t,C||A){var n=e.MSA&&e.MSA.CXH;
n&&n.encryptUserDataAsync(t,function(e){n.propertyBagSetAsync("encPwd",e)})}}),y.suppressMessages=ko.observable(!0),y.serverError=n,n=null,y.focused=ko.observable(!1),r.password=y,r.showMarketingOptIn=f.isPaginated&&0!==p.showOptinEmail&&l()===m.Live,r.showLegalText=f.isPaginated&&l()===m.Live,r.shouldShowSmsDisclaimer=l()===m.Phone,r},"createCountryObservableSet":function(e){var t={},n=ko.observable(e||"");n.subscribe(function(e){t.country.suppressMessages(!1),p.viewContext.data.input[w.country.name]=e}),n.suppressMessages=ko.observable(!0),n.focused=ko.observable(!1),t.country=n;
t.countries=p.countryList,t.showBirthDate=ko.computed(function(){var e=this.country(),t=p.countryDetailMap,n=t&&t[e]?t[e].childAge:0;return t&&0!==n||0!==p.dobReq},t);return t},"createBirthdateObservableSet":function(e){e=e||"";var t={},n="",r="",i="",a=e.split(":");3===a.length&&(n=a[0],r=a[1],i=a[2]),t.birthYear=ko.observable(i),t.birthMonth=ko.observable(r.replace(/^0/,"")),t.birthDay=ko.observable(n.replace(/^0/,"")),t.birthdate=ko.computed(function(){var e=this,t=e.birthDay(),n=e.birthMonth(),r=e.birthYear();
return t=1===t.length?"0"+t:t,n=1===n.length?"0"+n:n,t+":"+n+":"+r},t),t.birthYear.suppressMessages=ko.observable(!0),t.birthMonth.suppressMessages=ko.observable(!0),t.birthDay.suppressMessages=ko.observable(!0),t.birthdate.subscribe(function(e){p.viewContext.data.input[w.birthdate.name]=e}),t.birthYear.subscribe(function(){t.birthYear.suppressMessages(!1)}),t.birthMonth.subscribe(function(){t.birthMonth.suppressMessages(!1)}),t.birthDay.subscribe(function(){t.birthDay.suppressMessages(!1)}),t.birthdate.suppressMessages=ko.computed({"read":function(){var e=this;
return e.birthYear.suppressMessages()||e.birthMonth.suppressMessages()||e.birthDay.suppressMessages()},"write":function(e){var t=this;t.birthYear.suppressMessages(e),t.birthMonth.suppressMessages(e),t.birthDay.suppressMessages(e)},"owner":t}),t.birthdate.focused=ko.observable(!1);var o=p.dateOrder.toUpperCase();return t.birthdateParts=new Array(3),t.birthdateParts[o.indexOf("D")]=t.birthDay,t.birthdateParts[o.indexOf("M")]=t.birthMonth,t.birthdateParts[o.indexOf("Y")]=t.birthYear,t},"createBirthdateHTML5ObservableSet":function(e){e=e||"";
var t={},n=ko.observable(e).extend({"required":{"params":!0,"message":h.required}});return n.extend({"validation":{"validator":function(e){var t=e.split("-");if(3===t.length){var n=new Date(t[0],t[1],t[2]),r=new Date;return!isNaN(n)&&r>n}return!1},"message":h.invalidBirthDate}}),n.subscribe(function(e){if(t.birthdateHTML5.suppressMessages(!1),e){var n=e.split("-");if(3===n.length){var r=n[2]+":"+n[1]+":"+n[0];p.viewContext.data.input[w.birthdate.name]=r,p.viewContext.data.input[w.birthdateHTML5.name]=e}}}),n.suppressMessages=ko.observable(!0),n.focused=ko.observable(!1),t.birthdateHTML5=n,t
},"createPhoneCountryObservableSet":function(e){var t=p.phoneCountryListJson,n=t["default"]||"";x&&(n=p.viewContext.data.input[w.country.name]||"");var r=ko.observable(e||n);return p.viewContext.data.input[w.phoneCountry.name]=r(),r.subscribe(function(e){p.viewContext.data.input[w.phoneCountry.name]=e}),{"phoneCountries":t.list,"phoneCountry":r}},"createPhoneNumberObservableSet":function(e){var t={},n=ko.observable(e||"").extend({"onePattern":{"onlyIf":function(){return n&&n()},"params":[v.PhoneNumberFormat],"message":h.invalidPhoneFormat},"required":{"onlyIf":function(){var e=window.wLive.Account.viewModelHandle,t=e&&e.memberName&&e.memberName()?e.memberName():p.viewContext.data.input.memberName,n=o.getMemberNameType(t,p.domains),r=e&&e.alternateEmail&&Boolean(e.alternateEmail().match(v.AltEmailRegEx));
return e&&n===m.Live&&!r},"message":h.required}});return n.subscribe(function(e){t.phoneNumber.suppressMessages(!1),p.viewContext.data.input[w.phoneNumber.name]=e}),n.suppressMessages=ko.observable(!0),n.focused=ko.observable(!1),t.phoneNumber=n,t},"createAlternateEmailObservableSet":function(e,t){var n={},r=ko.observable(e||"").extend({"allPatterns":{"onlyIf":function(){return r&&r()&&r.isVisble()},"params":[v.AltEmailRegEx],"message":h.invalidEmailFormat},"required":{"onlyIf":function(){var e=window.wLive.Account.viewModelHandle,t=e&&e.memberName&&e.memberName()?e.memberName():p.viewContext.data.input.memberName,n=o.getMemberNameType(t,p.domains);
return e&&n===m.Live&&(!e.phoneNumber||!e.phoneNumber())},"message":h.required}});return r.subscribe(function(e){n.alternateEmail.suppressMessages(!1),p.viewContext.data.input[w.alternateEmail.name]=e}),r.suppressMessages=ko.observable(!0),r.serverError=t,r.focused=ko.observable(!1),r.isVisble=ko.observable(!!t||p.viewContext.data.input[w.alternateEmail.name]&&!p.viewContext.data.input[w.phoneNumber.name]),n.alternateEmail=r,n},"createHipObservableSet":function(){var t={},n=e.HIPAMFE;if(n&&n.observable){return n.observable
}var r=ko.observable("").extend({"hipValidation":{}});return r.subscribe(function(){e.HIPAMFE;t.hip.suppressMessages(!1),t.hip.isModified(!0)}),r.suppressMessages=ko.observable(!0),r.focused=ko.observable(!1),r.focused.extend({"notify":"always"}),t.hip=r,t},"createVerificationObservableSet":function(e,t){var n={};n.verification=ko.observable(e||"").extend({"required":{"params":!0,"message":h.required},"pattern":{"params":$Config.isINT?v.verificationCodeInt:v.verificationCode,"message":h.oneTimeCodeInvalidFormat}});
var a=p.viewContext.data.input.memberName,o=p.viewContext.data.input.memberNameType;return n.verification.terminalState=ko.observable(!0),n.verification.serverError=t,n.verification.focused=ko.observable(!1),n.verification.suppressMessages=ko.observable(!0),n.verifyTimeout=null,n.startTimestamp=(new Date).getTime(),n.verificationSubTitle=f.isPaginated&&o==m.EASI?b.verifyPageDescEASI.format(a):b.verificationSubTitle.format(a),n.showAutoVerificationUI=ko.observable(!1),n.showSmsResendCodeText=o==m.Phone,n.showMarketingOptIn=f.isPaginated&&0!==p.showOptinEmail&&o==m.EASI,n.showLegalText=f.isPaginated&&!f.fedStateToken,ko.isObservable(n.memberName)?n.memberName(a):n.memberName=ko.observable(a),n.showAutoVerificationUI.subscribe(function(e){u&&u.setWizardButtons&&u.setWizardButtons(!e,!e,!1),i.ftrViewModelHandle&&(i.ftrViewModelHandle.buttons.backButton.disabled(e),i.ftrViewModelHandle.buttons.nextButton.disabled(e)),p.viewContext.data.input.autoVerify=e
}),n.showAutoVerificationUI(s.isAutoVerificationSupported(p.viewContext.data.input.memberNameInput)),n.verification.subscribe(function(e){e!==r.trim(e)&&(e=r.trim(e),n.verification(e)),n.verification.suppressMessages(!1),p.viewContext.data.input[w.verification.name]=e}),n.doAutoVerify=function(){var e=this;if(n.showAutoVerificationUI()){p.viewContext.data.reporting.autoVerifyShown=!0,i.ftrViewModelHandle&&(i.ftrViewModelHandle.buttons.backButton.disabled(!0),i.ftrViewModelHandle.buttons.nextButton.disabled(!0));
var t=u.getProperty("SmsCode");if(x&&d){try{d.getVerificationCode(function(t){n.onCodeSuccess(t,e)},function(e){d.logError(e),n.onVerifyFailed()})}catch(r){d.logError(r),n.onVerifyFailed()}}else{n.onCodeSuccess(t,e)}}},n.stopAutoVerify=function(){null!=n.verifyTimeout&&(clearTimeout(n.verifyTimeout),n.verifyTimeout=null),u.setWizardButtons(!0,!0,!1),i.ftrViewModelHandle&&(i.ftrViewModelHandle.buttons.backButton.disabled(!1),i.ftrViewModelHandle.buttons.nextButton.disabled(!1))},n.onVerifyFailed=function(e){var t=e&&e.error,r=this;
r._viewContext.data.serverErrors||(r._viewContext.data.serverErrors={}),t&&e.error.code===y.maximumOTTDailyError?r._viewContext.data.serverErrors[w.memberName.name]=h.verificationThrottled:0!==p.autoVerify?(n.stopAutoVerify(),r._viewContext.data.serverErrors[w.memberName.name]=h.autoVerificationFailed):r._viewContext.data.serverErrors[w.memberName.name]=h.generic,r.$.triggerHandler(S,{"actionName":E,"control":r})},n.onCodeSuccess=function(e,t){if("string"===r.type(e)){"-1"==e?n.onVerifyFailed():(n.verification(e),t.handleActionButton())
}else{var i=(new Date).getTime()-n.startTimestamp;i>p.sendOttTimeout?(n.stopAutoVerify(),n.showAutoVerificationUI(!1)):n.verifyTimeout=setTimeout(r.proxy(n.doAutoVerify,t),100)}},n.verifyPageTitle=ko.computed(function(){return f.isPaginated?o===m.Phone?b.verifyPageTitlePhone:b.verifyPageTitleEASI:b.lblVerificationCode}),n},"createFedConfirmObservableSet":function(){var e={},t=f.fedNamesPrefill,n=p.viewContext.data.input;t&&1===t.length&&(n.memberName=t[0].name,n.memberNameType=o.getMemberNameType(t[0].name,p.domains),n.isMemberNameVerified=1===t[0].isVerified,n.memberNameInput=n.memberNameType===m.Live?t[0].name.split("@")[0]:t[0].name);
var r=n.memberName;return e.fedConfirmPageDesc=b.fedConfirmPageDesc.format(r.encodeHtml()),e.showLegalText=!0,e},"createFedPickerObservableSet":function(){function e(e){e?(n[w.memberName.name]=e.name,n.memberNameType=o.getMemberNameType(e.name,p.domains),n.isMemberNameVerified=1===e.isVerified,n.memberNameInput=n.memberNameType===m.Live?e.name.split("@")[0]:e.name):(delete n[w.memberName.name],delete n.isMemberNameVerified,delete n.memberNameType,delete n.isMemberNameVerified),OnNext()}var t={},n=p.viewContext.data.input,r=l.getHighContrastImage(f.imgs.baseUrl+f.imgs.fedProviderLogo,{"forBlackBackground":f.imgs.baseUrl+f.imgs.fedProviderLogoWhite});
return t.fedProviderLogoImg=r,t.fedNamesPrefill=f.fedNamesPrefill,t.onPrefillClicked=function(t){e(t)},t.onPrefillKeyDown=function(t,n){return n=n||window.event,"Enter"===n.code||n.keyCode===k?(n.preventDefault?n.preventDefault():n.returnValue=!1,e(t),!1):!0},t.onUseOtherClick=function(){e(null)},t.shouldGoToPasswordPage=ko.computed(function(){return s.paginatedPasswordNotCollected(n.memberNameType)}),setTimeout(function(){i.ftrViewModelHandle&&i.ftrViewModelHandle.buttons.nextButton.visible(!1)},0),t},"createAdditionalLegalTextObservableSet":function(){var e={};
return e.additionalLegalText=ko.computed(function(){return b.frenchLegalText?b.frenchLegalText:void 0}),e},"createPersonalizationCheckboxObservableSet":function(e){var t={},n=ko.observable(e||"");return n.subscribe(function(e){t.personalizationCheckbox.suppressMessages(!1),p.viewContext.data.input[w.personalizationCheckbox.name]=e}),n.suppressMessages=ko.observable(!0),n.focused=ko.observable(!1),t.personalizationCheckbox=n,t},"createOptinEmailCheckboxObservableSet":function(e){var t={},n=ko.observable(e||"");
return n.subscribe(function(e){t.optinEmailCheckbox.suppressMessages(!1),p.viewContext.data.input[w.optinEmailCheckbox.name]=e}),n.suppressMessages=ko.observable(!0),n.focused=ko.observable(!1),t.optinEmailCheckbox=n,t},"createEvictionSpeedbumpObservableSet":function(){var e={},t=p.viewContext.data.input.memberName,n=$Utility.addQueryString(p.evictionSigninURL,"username",encodeURI(t)||"");return e.evictionSpeedbumpDesc1=b.evictionSpeedbumpDesc1.format(t),e.evictionSpeedBumpDesc2=b.evictionSpeedbumpDesc2.format(n),e.shouldGoToPasswordPage=s.paginatedPasswordNotCollected(p.memberNameType.Phone)||!p.viewContext.data.isNoPaAllowedOnEvictedMemberName,e
}})}(),function(){var e=window,t=e.wLive,n=e.jQuery,r=t.Account,i=r.SignupObservableFactory,a=r.Util&&r.Util.HighContrast,o=e.$Config.WLXAccount,s=o.signup,l=s.page,u={},d={},c=!o.isWin10&&!o.isWin10InclusiveOOBE&&0===o.isSkype;defineClass("wLive.Account.ViewModels.SignupViewModel",function(e,t){var o=this,p=e.data,m=p.input||{},f=p.serverErrors||{},v=i.createObservableSetByPrefillName,g=o._observables=[];t&&t.observables&&(g=o._observables=t.observables),o._viewContext=e,u=s.strings,d=u.errors;var b=g.length;
o.validationOrder=new Array(b);for(var h=0;b>h;h++){var y=g[h];mix(o,v(y,m[y],f[y])),o.validationOrder[h]=o[y]}mix(o,{"strings":u,"config":l});var w=n(".skypeSpinner .spinnerText p");if(w.length>0){var C={"loadingString":s.strings.sendingOTT};ko.cleanNode(w[0]),ko.applyBindings(C,w[0])}if(c){var x=n("#Spinner");if(x.length>0){var A={"$Utility":$Utility,"config":l,"strings":u};ko.cleanNode(x[0]),ko.applyBindings(A,x[0])}}r.ftrViewModelHandle=o.footerViewModel=r.SignupHelper.createFooterObservable(o.additionalLegalText,o.showLegalText);
var k=n("#maincontent")[0];if(k&&n("#identityBanner").length>0){var S=ko.dataFor(k);S&&S.memberName(m.memberName)}var E=n("#ftr");if(E.length>0&&(ko.cleanNode(E[0]),ko.applyBindings(r.ftrViewModelHandle,E[0])),o.birthdate){if(0!==s.dobCheck&&0===s.dobReq){var P=s.countryDetailMap;o.birthdate.extend({"birthdatePartRequired":{"onlyIf":function(){return P&&P[o.country()]&&0!==P[o.country()].childAge},"params":!0,"message":d.required},"birthdateValid":{"onlyIf":function(){return P&&P[o.country()]&&0!==P[o.country()].childAge
},"params":!0,"message":d.invalidBirthDate}})}else{o.birthdate.extend({"birthdatePartRequired":{"params":!0,"message":d.required},"birthdateValid":{"params":!0,"message":d.invalidBirthDate}})}o.birthdate.isValid()||(o.birthDay(""),o.birthMonth(""),o.birthYear(""))}if(l&&l.imgs){var N=a.getHighContrastImage(l.imgs.baseUrl+l.imgs.msLogo,{"forBlackBackground":l.imgs.baseUrl+l.imgs.msLogoWhite});o.msLogoImg=N;var T=a.getHighContrastImage(l.imgs.baseUrl+l.imgs.dropdownCaret,{"forBlackBackground":l.imgs.baseUrl+l.imgs.dropdownCaretWhite});
o.dropdownCaretImg=T}o.initErrorGroup()},{"validationOrder":null,"errors":null,"isValid":null,"_viewContext":null,"_observables":null,"initErrorGroup":function(){var e=this;e.errors=ko.validation.group(e.validationOrder),e.errors.showAllMessages(!1),e.isValid=function(){return e.errors().length>0?!1:e._viewContext.hasAttemptedSubmit?!e.getFirstError():!0}},"notifyAllSubscribers":function(){var e=this;n.each(e.validationOrder,function(e,t){t&&t.suppressMessages&&t.suppressMessages(!1),t&&!t()&&t.notifySubscribers&&t.notifySubscribers()
})},"validation":function(){var e=this,t=n.map(e.validationOrder,function(e){return e&&e.isValidating?e.validation():null});return t},"showError":function(e){var t=this;return!e.suppressMessages()||t._viewContext.hasAttemptedSubmit?e.isValid&&!e.isValid()||e.isModified&&!e.isModified()&&e.serverError:e.serverError},"getFirstError":function(){var e=this,t=null;return n.each(e.validationOrder,function(e,n){return n&&n.isValid&&!n.isValid()||n&&n.isModified&&!n.isModified()&&n.serverError?(t=n,!1):!0}),t},"placeholderVisible":function(e){return!e
},"isPlaceholderSupported":function(){return"placeholder"in document.createElement("input")},"reportUserAction":function(e){$ReportEvent.Fire(e)}})}(),function(){var e=window,t=e.wLive,n=e.jQuery,r=t.Account,i=r.Controls,a=null,o=e.$Config.WLXAccount,s=o.signup,l={},u=e.MSA&&e.MSA.CXH,d="onAction",c="onShow",p="onHide",m="onSetupEvents",f="onRemoveEvents",v="onDispose";$Do.when("ExternalHelper",0,function(){a=e.ExternalHelper}),defineClass("wLive.Account.Controls.TouPrivacyControl",function(e,t,r){var a=this;
a.$=n(a),a._$container=e,a._viewContext=t,a._options=r;var o=a._pageDialogControl=new i.PageDialogControl(e,t,r);a._$pageDialogControl=o.$,t.data||(t.data={}),l=s.strings},{"_pageDialogControl":null,"_$pageDialogControl":null,"_viewContext":null,"_options":null,"$":null,"dispose":function(){},"show":function(){var e=this;e._setupDialogEvents(),e._pageDialogControl&&e._pageDialogControl.show()},"hide":function(){var e=this;e._pageDialogControl&&e._pageDialogControl.hide(),e._removeDialogEvents()},"pageReady":function(){if(a){var e=n(".wpBluePage");
a.setProperty("FrameWidth",parseInt(e.innerWidth()).toString()),a.setProperty("FrameHeight",parseInt(e.innerHeight()).toString()),a.ready()}},"notifyVisible":function(){this.pageReady()},"_prepareAccessibleHtml":function(e){var t='<p id="agreementTitle" tabindex="-1">',n='<p tabindex="-1">',r="</p>",i=/(?:\r\n|\r|\n)/g,a=new RegExp(n+r,"g"),o=t+e+r;return o=o.replace(i,r+n),o=o.replace(a,"")},"_setupDialogEvents":function(){var e=this,t=e._$pageDialogControl;if(t){var r=e._pageDialogControl.events;t.on(r.action,n.proxy(e._processDialogActionEvent,e)),t.on(r.setupEvents,n.proxy(e._processDialogSetupEvent,e)),t.on(r.removeEvents,n.proxy(e._processDialogRemoveEvent,e)),t.on(r.show,n.proxy(e._processDialogShowEvent,e)),t.on(r.hide,n.proxy(e._processDialogHideEvent,e))
}},"_removeDialogEvents":function(){var e=this,t=e._$pageDialogControl;if(t){var n=e._pageDialogControl.events;t.off(n.action),t.off(n.setupEvents),t.off(n.removeEvents),t.off(n.show),t.off(n.hide)}},"_processDialogActionEvent":function(e,t){this.$.triggerHandler(d,{"actionName":t.actionName,"control":this}),e&&(e.preventDefault(),e.stopPropagation())},"inclusiveOOBEAlternateBack":function(){this.$.triggerHandler(d,{"actionName":"alternate","control":this})},"_processDialogSetupEvent":function(e,t){var i=this;
i.$.triggerHandler(m,{"content":t.content,"control":i}),r.ftrViewModelHandle&&(r.ftrViewModelHandle.buttons.backButton.visible(!0),r.ftrViewModelHandle.buttons.nextButton.visible(!1)),o.isWin10InclusiveOOBE&&u&&(u.showBackButton(!0),i._viewContext.data.input&&"Phone"===i._viewContext.data.input.memberNameType&&(n("#TOUPrivacyAlternate").show(),n("#TOUPrivacyCancel").hide(),u.handleBackButton(i.inclusiveOOBEAlternateBack.bind(i)))),n(".tou").on("click",function(){i.$.triggerHandler(d,{"actionName":"tou","control":i})
}),n(".privacy").on("click",function(){i.$.triggerHandler(d,{"actionName":"privacy","control":i})}),n(".pdc").on("click",function(){i.$.triggerHandler(d,{"actionName":"dataCollection","control":i})}),n(".upd").on("click",function(){i.$.triggerHandler(d,{"actionName":"dataUse","control":i})}),n(".rp").on("click",function(){i.$.triggerHandler(d,{"actionName":"retention","control":i})})},"_processDialogRemoveEvent":function(e,t){this.$.triggerHandler(f,{"content":t.content,"control":this})},"inclusiveOOBECancelBack":function(){this.$.triggerHandler(d,{"actionName":"cancel","control":this})
},"_processDialogShowEvent":function(e,t){var r=this,i=t.content,a=r._options,p=a.queryUrl?a.queryUrl:$Utility.generateUrl(o.urls.baseDomain,s.urls.queryUrl,!0),m=a.isPrivacy,f=a.command||(m?"privacy":"tou"),v=r._viewContext.data=r._viewContext.data||{},g=v[f],b=n("pre",i).length>0?n("pre",i):n("#TOUPrivacyDiv",i),h=n("#TOUPrivacyHeader",i),y=n(n("#touBackBtn").length>0?"#touBackBtn":"#TOUPrivacyCancel"),w=m?l.privacyHeader:l.touHeader;g?(y.removeClass("hidden"),b.html(g),h.text(w),y.first().focus()):p&&n.ajax({"type":"POST","url":p,"data":{"command":f},"context":r,"success":function(e){if(e){var t=String(e).encodeHtml(),n=r._prepareAccessibleHtml(t);
b.html(n),h.text(w),v[f]=n,y.removeClass("hidden"),o.isWin10InclusiveOOBE&&u&&u.handleBackButton(r.inclusiveOOBECancelBack.bind(r))}},"error":function(){r.$.triggerHandler(d,{"actionName":"cancel","control":r})},"complete":function(){y.first().focus()}}),b.attr("data-command",f),r.$.triggerHandler(c,{"content":i,"control":r})},"_processDialogHideEvent":function(e,t){this.$.triggerHandler(p,{"content":t.content,"control":this})},"events":{"action":d,"show":c,"hide":p,"setupEvents":m,"removeEvents":f,"dispose":v}},{})
}(),function(){var e=window,t=e.wLive,n=e.jQuery,r=t.Account,i=r.Controls,a=(r.ViewModels,r.AnimationHelper,null),o=t.Core.DataRequest,s=r.SignupHelper,l=e.$Config.WLXAccount,u=l.hip,d=l.signup,c=d.page,p=d.regex,m={},f=(d.signupObservableSets,{}),v=e.MSA&&e.MSA.CXH,g=l.isWin10,b=l.isWin10InclusiveOOBE,h="action",y="alternate",w="skip",C="credentials",x="password",A="usernameRecoverySpeedbump",k="evictionSpeedbump",S="onAction",E="onShow",P="onHide",N="onSetupEvents",T="onRemoveEvents",M="onDispose",I=0;$Do.when("ExternalHelper",0,function(){a=e.ExternalHelper
}),defineClass("wLive.Account.Controls.SignupControl",function(e,t,r){var a=this;a.$=n(a),a._$container=e,a._viewContext=t,a._options=r;var o=a._pageDialogControl=new i.PageDialogControl(e,t,r);a._$pageDialogControl=o.$,a._sectionId=r.sectionId,t.data||(t.data={}),f=d.strings,m=d.urls.dataRequest},{"_pageDialogControl":null,"_$pageDialogControl":null,"_viewContext":null,"_$container":null,"_verifyTimeout":null,"_options":null,"$":null,"dispose":function(){},"show":function(){var e=this;e._setupDialogEvents(),e._pageDialogControl&&(e._pageDialogControl.show(),e._setIdentityBannerVisibility(!0))
},"hide":function(){var e=this;e._pageDialogControl&&(e._pageDialogControl.hide(),e._setIdentityBannerVisibility(!1)),e._removeDialogEvents()},"pageReady":function(){if(a){var e=n("#maincontent");a.setProperty("FrameWidth",parseInt(e.innerWidth()).toString()),a.setProperty("FrameHeight",parseInt(e.innerHeight()).toString()),a.ready()}},"notifyVisible":function(){this.pageReady()},"handleActionButton":function(){this.$.triggerHandler(S,{"actionName":h,"control":this})},"IsChild":function(e,t){var n=!1,r=d.countryDetailMap,i=r&&r[t]?r[t].childAge:0;
if(t&&e&&0!==i){var a="",o="",s="",l=e.split(":");3===l.length&&(a=parseInt(l[0]),o=parseInt(l[1]),s=parseInt(l[2]));var u=new Date,c=new Date(s+i,o,a);n=c>u}return n},"setEnabled":function(e){a&&a.setWizardButtons(e,e,!1),r.ftrViewModelHandle&&(r.ftrViewModelHandle.buttons.backButton.disabled(!e),r.ftrViewModelHandle.buttons.nextButton.disabled(!e));var t=this;t._pageDialogControl&&t._pageDialogControl.setEnabled(e)},"_setupDialogEvents":function(){var e=this,t=e._$pageDialogControl;if(t){var r=e._pageDialogControl.events;
t.on(r.action,n.proxy(e._processDialogActionEvent,e)),t.on(r.setupEvents,n.proxy(e._processDialogSetupEvent,e)),t.on(r.removeEvents,n.proxy(e._processDialogRemoveEvent,e)),t.on(r.show,n.proxy(e._processDialogShowEvent,e)),t.on(r.hide,n.proxy(e._processDialogHideEvent,e))}},"_removeDialogEvents":function(){var e=this,t=e._$pageDialogControl;if(t){var n=e._pageDialogControl.events;t.off(n.action),t.off(n.setupEvents),t.off(n.removeEvents),t.off(n.show),t.off(n.hide)}},"_processDialogActionEvent":function(e,t){var r=this,i=t.viewModel,a=t.actionName,o=r._viewContext.data||{},s=o.input||{},l=r._options&&r._options.optInEmailId;
if(r.setEnabled(!1),n(document.activeElement).blur(),l){var u=n("#"+l,r._$container);u&&u.length>0&&(r._viewContext.persistedOptOutEmailSelection=!u.prop("checked"))}if(i&&a===h&&(g?i._observables.indexOf("alternateEmail")>=0&&i.notifyAllSubscribers():i.notifyAllSubscribers()),e&&(e.preventDefault(),e.stopPropagation()),a!==h&&a!==w&&a!==y){return i&&i.password&&("cancel"===a||"backStack"===a)&&d.isCombinedSISUV2&&(a="finalBack"),void r.$.triggerHandler(S,{"actionName":a,"control":r})}var c=i&&i.validation()||[];
n.when.apply(n,c).done(function(){if(i&&!i.isValid()){return void r._focusFirstError(i)}if(a===w){return i&&i.isValid()?void r.$.triggerHandler(S,{"actionName":w,"control":r}):void r.setEnabled(!0)}if(a===y){return void r.$.triggerHandler(S,{"actionName":y,"control":r})}if(i&&i.memberName){if(i.memberNameInput&&d.viewContext.data.shouldGoToUsernameRecoverySpeedbump){return void r.$.triggerHandler(S,{"actionName":A,"control":r})}if(i.memberNameInput&&d.viewContext.data.shouldGoToEvictionSpeedbump){return void r.$.triggerHandler(S,{"actionName":k,"control":r})
}if(i.shouldGoToPasswordPage&&i.shouldGoToPasswordPage()){return void r.$.triggerHandler(S,{"actionName":x,"control":r})}}return i&&i.evictionSpeedbumpDesc1&&i.shouldGoToPasswordPage?void r.$.triggerHandler(S,{"actionName":x,"control":r}):i&&i.usernameRecoverySpeedbumpDesc&&i.shouldGoToPasswordPage?void r.$.triggerHandler(S,{"actionName":x,"control":r}):i&&i.fedNamesPrefill&&!s.memberName?void r.$.triggerHandler(S,{"actionName":C,"control":r}):void r.handleActionButton()})},"inclusiveOOBEAlternateBack":function(){this.$.triggerHandler(S,{"actionName":"alternate","control":this})
},"_setIdentityBannerVisibility":function(e){var t=n("#maincontent")[0];if(t&&n("#identityBanner").length>0){var i=ko.dataFor(t);i&&(this._options.showIdentityBanner&&e?(i.isBackButtonVisible(r.ftrViewModelHandle.buttons.backButton.visible()),i.showIdentityBanner(!0)):i.showIdentityBanner(!1))}},"_processDialogSetupEvent":function(e,t){var i=this,a=t.content,o=t.viewModel,s=(i._options,o&&o.onClickSuggestionsLink),m=i._viewContext.data||{},h=m.input||{},y=!!c.fedStateToken,w=y&&c.fedNamesPrefill&&1===c.fedNamesPrefill.length,C=y&&c.fedNamesPrefill&&c.fedNamesPrefill.length>1;
if(r.ftrViewModelHandle){var x=o&&o.memberName&&o.showSuggestions&&!o.showSuggestions()&&!C,A=o&&o.password&&d.isCombinedSISUV2,k=o&&o.fedConfirmPageDesc&&w,E=o&&o.fedNamesPrefill&&C,P=0!==d.noAuthCancel&&(x||A||k||E);P=P||d.prefillMembernameIsProof&&o.usernameRecoverySpeedbumpDesc,r.ftrViewModelHandle.buttons.backButton.visible(!P)}if(n(".tou").on("click",function(){i.$.triggerHandler(S,{"actionName":"tou","control":i})}),n(".privacy").on("click",function(){i.$.triggerHandler(S,{"actionName":"privacy","control":i})
}),n(".pdc").on("click",function(){i.$.triggerHandler(S,{"actionName":"dataCollection","control":i})}),n(".upd").on("click",function(){i.$.triggerHandler(S,{"actionName":"dataUse","control":i})}),n(".rp").on("click",function(){i.$.triggerHandler(S,{"actionName":"retention","control":i})}),n("#iProofSignIn").on("click",function(){$Utility.navigateTo(d.usernameRecoverySpeedbumpSignInUrl)}),n("#iSignupAction").on("click",function(){return OnNext(),!1}),a.on("click","#iSignIn",function(){$ReportEvent.Fire("Signup_SignIn_UserAction")
}),1001!==$Config.uiflvr&&n("#impressumLink").attr("href","#").on("click",function(){i.$.triggerHandler(S,{"actionName":"impressum","control":i})}),n("#atlas").length>0&&d.urls&&d.urls.atlas&&d.urls.atlas.signupStart&&n("<img>").attr("src",d.urls.atlas&&d.urls.atlas.signupStart).appendTo(n("#atlas")),n("#LocalAccount").length>0&&a.on("click","#LocalAccount",function(){i.$.triggerHandler(S,{"actionName":"localAccount","control":i})}),n("#learnMore").length>0&&a.on("click","#learnMore",function(){v.getContext(function(e){var t="FRX"===(e.host?e.host.toUpperCase():"");
t?(n("#LearnMoreFlyoutContent").html(d.learnMoreContent),n("#HelpText").show(),n("#HelpClose").focus()):i.$.triggerHandler(S,{"actionName":"learnMore","control":i})})}),n("#LearnMoreContent").length>0&&n("#LearnMoreContent").html(d.learnMoreContent),n("#HelpClose").length>0&&a.on("click","#HelpClose",function(){n("#HelpText").hide()}),d.getDeviceTicket&&v.postDeviceTicketToUrl(d.originalUrl,d.signupAuthPolicy),(g||b)&&(a.mouseup(function(e){var t=n("#MemberNameSuggestions");t.is(":visible")&&!t.is(e.target)&&0===t.has(e.target).length&&t.hide();
var r=n("#HelpText");r.is(":visible")&&!r.is(e.target)&&0===r.has(e.target).length&&r.hide()}),!d.learnMoreContent&&d.urls.queryUrl&&n.post($Utility.generateUrl(l.urls.baseDomain,d.urls.queryUrl,!0),{"command":"win10learnmore"},function(e){var t=n.parseJSON(e);t&&(d.learnMoreContent=t.html)},"html"),n("#Proofs").length>0&&(d.fss&&d.fss.memberRole===d.fss.userRole?(n("#ProofsHeading").text(f.proofs.familychildheader),n("#ProofsDesc").text(f.proofs.familychilddesc)):d.fss&&d.fss.memberRole===d.fss.adminRole?n("#ProofsDesc").text(f.proofs.familydesc):i.IsChild(h.birthdate,h.country)&&(n("#ProofsHeading").text(f.proofs.childheader),n("#ProofsDesc").text(f.proofs.childdesc))),n("#PreferencesAction").is(":visible")&&(h.memberNameInput.indexOf("@")>-1?n("#PreferencesCancel").show():h.memberNameInput.match(p.PhoneNumberFormat)?n("#PhoneVerification").show():(n("#PreferencesAlternate").show(),l.isWin10InclusiveOOBE&&v&&v.handleBackButton(i.inclusiveOOBEAlternateBack.bind(i)))),n("#PasswordAction").is(":visible")&&d.viewContext.data.shouldGoToEvictionSpeedbump&&v.handleBackButton(i.inclusiveOOBEAlternateBack.bind(i))),d.isCombinedSISUV2&&o&&o.showPaginatedUsernamePrefill&&o.paginatedUsernamePrefill&&(h.memberName=o.paginatedUsernamePrefill,i.$.triggerHandler(S,{"actionName":"password","control":i})),o&&o.verification){var T=r.FieldHelper.getMemberNameType(h.memberName,d.domains),M=d.channel.sms,I="undefined"==typeof d.resendCodeTimeout?6e4:d.resendCodeTimeout,H=I||4e3,F=n("#resendCodeText"),_=n("#resendCodeLink",F);
T===d.memberNameType.EASI&&(M=d.channel.email),F.delay(I).fadeIn(500),_.on("click",function(){i._sendOTT(M),n("#VerificationCode").focus(),F.hide(),$ReportEvent.Fire("Signup_ResendCode_UserAction"),F.delay(H).fadeIn(500)}),h.lastEnteredMemberName!==h.memberNameInput&&(h.lastEnteredMemberName=h.memberNameInput,i._sendOTT(M))}var D=n("#MemberNamePrefill");D.length>0&&D.parent().on("show.bs.dropdown",function(){D.width(D.parents("div .col-md-8").first().width())});var O=n(".dropdown");if(O.length>0){var L=n("#domainLabel",O);
O.on("show.bs.dropdown",function(){L.attr("aria-label",f.hideEmailDomainOptions)}),O.on("hide.bs.dropdown",function(){L.attr("aria-label",f.showEmailDomainOptions)})}if(u.required?n("#hipTemplateContainer",t.content).length>0&&(r.FieldHelper.loadHip(),n("#hipSection").show()):n("#hipSection").hide(),s&&a.on("click","#suggLink",s),i._viewContext.hasAttemptedSubmit&&o&&!o.isValid()){var $=o.getFirstError();$.suppressMessages(!1),$.focused(!0)}n("body").on("click","#domainExistsInAadSwitchToOutlook",function(){r.viewModelHandle.switchMemberNameType("Live")
}),i.$.triggerHandler(N,{"content":a,"control":i})},"_processDialogRemoveEvent":function(e,t){var i=this,a=i._viewContext.data||{},o=(a.input||{},t.content),s=r.viewModelHandle;o.off("click"),s.verification&&s.showError(s.verification)&&s.verification(""),n("#hipTemplateContainer",t.content).length>0&&n("#hipTemplate").append(n("#hipTemplateContainer").children().detach()),this.$.triggerHandler(T,{"content":t.content,"control":this})},"_processDialogShowEvent":function(t,r){this.$.triggerHandler(E,{"content":r.content,"control":this});
var i=e.HIPAMFE,a="undefined"!=typeof i&&i.done;n("#hipTemplateContainer",r.content).length>0&&a&&(i&&i.updateTitle&&i.updateTitle(),n("#hipTemplateContainer").append(n("#hipTemplate").children().detach())),n("#ftr").removeClass("hide")},"_processDialogHideEvent":function(e,t){this.$.triggerHandler(P,{"content":t.content,"control":this})},"_sendOTT":function(t){var r=this,i=r._viewContext.data||{},a=i.input||{},u={"uaid":e.$Config.uaid};u.action=d.sendOttAction,u.proofId=a.memberNameInput,t===d.channel.sms&&(u.proofCountryIso=a.memberNamePhoneCountry,u.autoVerification=s.isAutoVerificationSupported(a.memberNameInput)),u.channel=t;
var c=e.location.hash;c&&(c=c.replace("#",""),c&&c.indexOf("ottErrCode=")>-1&&(u.TestErrorCode=c.replace("ottErrCode=",""),e.location.hash="#"));var p=new o(null,$Utility.generateUrl(l.urls.baseDomain,m.sendOtt,!0),u,n.proxy(r._onSendOttSuccess,r),n.proxy(r._onSendOttFailure,r),1e4,this);I=e.performance&&e.performance.now?e.performance.now():(new Date).getTime(),p.start()},"_onSendOttSuccess":function(){var e=this;if(e._reportApiQos(),r.viewModelHandle.doAutoVerify){n.proxy(r.viewModelHandle.doAutoVerify,e)()
}else{var t=e._viewContext.data||{};t.sendOttSuccessRsp=!0,e.handleActionButton()}},"_onSendOttFailure":function(e){var t=this,i=e&&e.error?e.error.code:"";if(t._reportApiQos(i),r.viewModelHandle.onVerifyFailed){n.proxy(r.viewModelHandle.onVerifyFailed,t)(e)}else{var a=t._viewContext.data||{};a.sendOttErrorRsp=e,t.handleActionButton()}},"_reportApiQos":function(t){try{var n=e.performance&&e.performance.now?e.performance.now():(new Date).getTime(),r={};r.pageId="Account_SendSMSOtt_API",r.duration=Math.round(n-I),t&&(r.errorCode=t),r.skipClientCall=!0,$ReportEvent.Action(r)
}catch(i){}},"_focusFirstError":function(e){var t=e.getFirstError();t.suppressMessages(!1),t.focused(!1),t.focused(!0),this.setEnabled(!0)},"events":{"action":S,"show":E,"hide":P,"setupEvents":N,"removeEvents":T,"dispose":M}},{})}(),function(){var e=window,t=e.wLive,n=e.jQuery,r=t.Account,i=r.Util,a=r.Controls,o=t.Core.DataRequest,s=r.UrlHelper,l=null,u=e.MSA&&e.MSA.CXH,d=(r.SignupHelper,i&&i.ConvergedUxUtil),c=i&&i.MarchingAnts,p=e.$Config.WLXAccount,m=p.signup,f=m.page,v=p.hip,g={},b={},h={},y={},w=p.isWin10,C=p.isWin10InclusiveOOBE,x=0!==p.isSkype,A=!!f.fedStateToken,k="newpwd",S="https://",E="onAction",P="Account_CreatePassports_API",N=0;
$Do.when("ExternalHelper",0,function(){l=e.ExternalHelper}),defineSubClass("wLive.Account.Controls.SignupCreateControl",a.SignupControl,function(t){this._wreply=s.GetQSValue(e.location.href,"wreply"),this._ru=m.csisuRu||s.GetQSValue(e.location.href,"ru"),this._isSubmitting=!1,this._$container=t,g=m.strings,b=g.errors,y=m.urls.dataRequest,h=m.errorCodes},{"dispose":function(){this._base.dispose()},"_onCreateSuccess":function(t){var i=r.FieldHelper.getMemberNameType(t.signinName,m.domains),a=this,s=a._viewContext.data||{},d=s.input||{},c=s.prefill||{},v={};
v.pageId=P,v.userAction=[],v.skipClientCall=!0;for(var g in c){c[g]===d[g]?v.userAction.splice(0,0,"Action_"+g+"_Used"):v.userAction.splice(0,0,"Action_"+g+"_NotUsed")}try{var b=e.performance&&e.performance.now?e.performance.now():(new Date).getTime();v.suggestedAccountType=m.fl,v.accountType=i,v.duration=Math.round(b-N),$ReportEvent.Action(v)}catch(h){}var w=n("#atlas");w.length>0&&m.urls&&m.urls.atlas&&(i===m.memberNameType.Live&&m.urls.atlas.createLive?n("<img>").attr("src",m.urls.atlas&&m.urls.atlas.createLive).appendTo(w):m.urls.atlas.createEasi&&n("<img>").attr("src",m.urls.atlas&&m.urls.atlas.createEasi).appendTo(w)),setTimeout(function(){if(l.setProperty("IsSignUp","1"),t){var n=r.FieldHelper.getMemberNameType(t.signinName,m.domains);
if(m.fss&&m.fss.isFamilyAddMemberFlow){var i=null,s={"uaid":e.$Config.uaid},d=n===m.memberNameType.EASI;s.memberEmailPii=t.signinName||"",s.memberRole=m.fss.memberRole||"",d?i=new o(null,$Utility.generateUrl(p.urls.baseDomain,y.addPendingMember,!0),s,function(e){a._onAddToFamilySuccess(e,t,d)},function(e){a._onAddToFamilyFailure(e,t.signinName,d)}):(s.memberPuid=t.puid||"",i=new o(null,$Utility.generateUrl(p.urls.baseDomain,y.createAndUpdateFamily,!0),s,function(e){a._onAddToFamilySuccess(e,t,d)},function(e){a._onAddToFamilyFailure(e,t.signinName,d)
})),u&&m.fss.isWinTsetFlow?u.createStubAccountAsync(t.signinName,!1,function(){i.start()},function(e){$ReportEvent.ReportApiCall({"apiId":m.fss.errorApiId,"success":!1,"errorCode":e.number||""}),$Utility.navigateTo(m.fss.ruOnError)}):i.start()}else{if(f.isAddUserFlow&&u){u.createStubAccountAsync(t.signinName,!1,function(){u.finish(u.FinishStates.Success)},function(e){$ReportEvent.ReportApiCall({"apiId":m.addUserErrorApi,"success":!1,"errorCode":e.number||""}),u.finish(u.FinishStates.Error)})}else{var s=a._getSignInPostData(t);
$Utility.postTo(t.redirectUrl,s)}}}},1e3)},"_onCreateFailure":function(t){var n=this,i=t&&t.error;try{var a=e.performance&&e.performance.now?e.performance.now():(new Date).getTime(),o=n._viewContext.data||{},s={};s.pageId=P,s.suggestedAccountType=m.fl,s.accountType=r.FieldHelper.getMemberNameType(o.input.memberName,m.domains),s.duration=Math.round(a-N),s.errorCode=i?t.error.code:"",s.skipClientCall=!0,$ReportEvent.Action(s)}catch(u){}l&&l.setWizardButtons(!0,!0,!1),r.ftrViewModelHandle&&(r.ftrViewModelHandle.buttons.backButton.disabled(!1),r.ftrViewModelHandle.buttons.nextButton.disabled(!1)),n._viewContext.hasAttemptedSubmit=!0,n._isSubmitting=!1,n._viewContext.data.serverErrors={},n._handleCreateError(t.error),n.setEnabled(!0)
},"_onAddToFamilySuccess":function(e,t,n){var r=this;if(r._updateFamilyCache(t.signinName),t.childInfo){$Cookie.setCookie(m.fss.childConsentCookieName,t.childInfo,m.fss.childConsentCookieDomain,0,0,1),$Cookie.setCookie(m.fss.childConsentRUCookieName,m.fss.ruOnSuccess,m.fss.childConsentCookieDomain,0,0,1);var i="",a=r._viewContext.data||{},o=a.input||{},s=!1;if(m.fss.kcFCountries&&"string"==typeof m.fss.kcFCountries&&o.country){for(var l=m.fss.kcFCountries.split(","),u=o.country.replace(/^\s+|\s+$/g,"").toLowerCase(),d=0;d<l.length;d++){if(l[d].replace(/^\s+|\s+$/g,"").toLowerCase()===u){s=!0;
break}}}i=s?$Utility.addQueryString(m.fss.kcFRu,"kcft",t.kcft):m.fss.childConsentRu,$Utility.navigateTo(i)}else{var i="";i=m.fss.isWinTsetFlow&&n?decodeURIComponent(m.fss.ruOnEasiSuccess).format(e.encryptedMemberName):m.fss.isWinTsetFlow?decodeURIComponent(m.fss.ruOnSuccess).format(e.encryptedMemberName):m.fss.ruOnSuccess,$Utility.navigateTo(i)}},"_onAddToFamilyFailure":function(e,t,n){var r=this;if(e&&e.error&&e.error.code){var i="";if(e.error.data){try{var a=JSON.parse(e.error.data);a&&a.encryptedMemberName&&(i=a.encryptedMemberName)
}catch(o){}}switch(e.error.code){case m.fss.errorCodes.familyInvitationAlreadyExists:r._updateFamilyCache(t);var s="";return s=m.fss.isWinTsetFlow&&n?decodeURIComponent(m.fss.ruOnEasiSuccess).format(i):m.fss.isWinTsetFlow?decodeURIComponent(m.fss.ruOnSuccess).format(i):m.fss.ruOnSuccess,void $Utility.navigateTo(s);case m.fss.errorCodes.memberAlreadyInFamily:return void $Utility.navigateTo(decodeURIComponent(m.fss.urls.memberAlreadyInFamily));case m.fss.errorCodes.cannotInviteExistingMember:return void $Utility.navigateTo(decodeURIComponent(m.fss.urls.cannotInviteExistingMember));
case m.fss.errorCodes.notAllowedToAddMember:case m.fss.errorCodes.notAllowedToInviteMember:return void $Utility.navigateTo(decodeURIComponent(m.fss.urls.addToFamilyChildFailure).format(i));case h.familySizeExceedLimit:return void $Utility.navigateTo(decodeURIComponent(m.fss.urls.familySizeLimitReached).format(i));case m.fss.errorCodes.firstMemberAdminMissingAccountInfo:return void $Utility.navigateTo(decodeURIComponent(m.fss.urls.addToFamilyParentFailure))}}$Utility.navigateTo(m.fss.ruOnError)},"_updateFamilyCache":function(e){if(u){try{var t=m.fss.memberRole===m.fss.userRole;
u.createLocalMemberWithEmailAsync(e,t,!1)}catch(n){}}},"_getSignInPostData":function(e){var t={"slt":e.slt};return 1===m.ignoresso&&(t.ignoresso=1),t},"_createAccount":function(t){var i=this,a=new o(null,$Utility.generateUrl(p.urls.baseDomain,y.createAccount,!0),t,n.proxy(i._onCreateSuccess,i),n.proxy(i._onCreateFailure,i));l&&l.setWizardButtons(!1,!1,!1),r.ftrViewModelHandle&&(r.ftrViewModelHandle.buttons.backButton.disabled(!0),r.ftrViewModelHandle.buttons.nextButton.disabled(!0));var s=n("#Spinner");if(s.show(),!(w||C||x)){var u=n("#spinnerImg",s);
u.detach(),s.append(u)}c&&c.showLightboxProgress(),d&&d.disableLightbox(!0),N=e.performance&&e.performance.now?e.performance.now():(new Date).getTime(),a.start()},"_handleCreateError":function(t){var i=this,a=t.code,o=t.field,s="",l=i._viewContext.keyToStateMap,u=i._viewContext.data||{},p=i._viewContext.data.serverErrors=i._viewContext.data.serverErrors||{},g=e.HIPAMFE,y=!1;switch(n("#Spinner").hide(),d&&d.disableLightbox(!1),c&&c.hideLightboxProgress(),r.viewModelHandle.showAutoVerificationUI&&r.viewModelHandle.showAutoVerificationUI(!1),a){case h.hipValidationError:if(g&&g.done){if(g.observable.hip(""),g.error=1,g.setError(),s=g.getError(),g.observable.hip.focused(!0),"sms"===g.type){if(t.data){try{var w=JSON.parse(t.data);
w&&w.fid&&g.switchHIP("sms",w.fid)}catch(C){}}}else{g.reloadHIP()}}break;case h.hipNeeded:i._viewContext.hasAttemptedSubmit=!1,v.required=!0,n.inArray("hip",m.options.states)>=0?i.$.triggerHandler(E,{"actionName":"hip","control":i}):(r.FieldHelper.loadHip(),n("#hipSection").show());break;case h.hipSMSNeeded:v.required=!0;var x,A,k=null;if(t.data){try{var w=JSON.parse(t.data);w&&(A=w.sid||null,x=w.fid||null,k=w.dc||null)}catch(C){}}if(g&&g.done){A&&(g.urlId=A),x&&k?g.switchHIP("sms",x,k):x?g.switchHIP("sms",x):g.switchHIP("sms")
}else{for(var P in i._viewContext.keyToStateMap){if("hip"===P){if(v.url=$f.replaceQs(v.url,"type","sms"),A&&(v.url=$f.replaceQs(v.url,"id",A)),x){if(k){v.url=v.url.replace(S,S+k+"."),v.url=$f.replaceQs(v.url,"fid",x)}else{if(x.indexOf(".")>-1){var N=x.split(".");v.url=v.url.replace(S,S+N[0]+"."),v.url=$f.replaceQs(v.url,"fid",x)}else{v.url=$f.replaceQs(v.url,"fid",x)}}}n.inArray("hip",m.options.states)>=0?i.$.triggerHandler(E,{"actionName":"hip","control":i}):(r.FieldHelper.loadHip(),n("#hipSection").show());
break}}i.$.triggerHandler(E,{"actionName":"blocked","control":i})}break;case h.dailyLimitIDsReached:y=!0,i.$.triggerHandler(E,{"actionName":"blocked","control":i});break;case h.oneTimeCodeInvalid:s=b.oneTimeCodeInvalid;break;case h.verificationSltInvalid:u.verificationCodeSlt=null;break;case h.membernameTaken:case h.membernameTakenEasi:case h.membernameTakenPhone:var T=b.memberNameTakenNoSugg,M="",I="";switch(0!==m.displaySignInLinkInMnError?(m.signinUrl=$Utility.addQueryString(m.signinUrl,"username",u.input.memberName||""),M=b.memberNameTakenEasi.format(u.input.memberName,m.signinUrl),I=b.memberNameTakenPhone.format(u.input.memberName,m.signinUrl)):(M=b.memberNameTakenEasi.format(u.input.memberName),I=b.memberNameTakenPhone.format(u.input.memberName)),a){case h.membernameTaken:var H=r.FieldHelper.getMemberNameType(u.input.memberName,m.domains);
s=H===m.memberNameType.Phone?I:T;break;case h.membernameTakenEasi:s=M;break;case h.membernameTakenPhone:s=I}break;case h.domainNotAllowed:s=b.domainNotAllowed;break;case h.forbiddenWord:s=b.forbiddenWord;break;case h.passwordIncorrect:s=b.passwordIncorrect;break;case h.passwordConflict:s=b.passwordConflict;break;case h.invalidEmailFormat:s=b.invalidEmailFormat;break;case h.emailMustStartWithLetter:s=b.emailMustStartWithLetter;break;case h.proofAlreadyExistsError:s=b.proofAlreadyExistsError;break;case h.invalidPhoneFormat:s=b.invalidPhoneFormat;
break;case h.invalidBirthDate:s=b.invalidBirthDate;break;case h.invalidGender:s=b.invalidGender;break;case h.invalidFirstName:s=b.invalidFirstName;break;case h.invalidLastName:s=b.invalidLastName;break;case h.maximumOTTDailyError:s=b.verificationThrottled;break;case h.bannedPassword:s=b.bannedPassword;break;case h.passwordRequired:f.pwdless=f.pwdlessemail=0,s=b.passwordRequired;break;case h.domainExistsInAad:s=b.domainExistsInAad.format("domainExistsInAadSwitchToOutlook");break;case h.domainExistsInAadSupportedLogin:s=b.domainExistsInAadSupportedLogin.format(u.input.memberName);
break;default:y=!0,i._handleFatalError(a)}if(o){var F=l[o];if(p[o]=s,r.viewModelHandle[o]&&(r.viewModelHandle[o].serverError=s,r.viewModelHandle[o].notifySubscribers&&!r.viewModelHandle[o].terminalState&&r.viewModelHandle[o].notifySubscribers(),r.viewModelHandle[o].isModified&&r.viewModelHandle[o].isModified(!1),r.viewModelHandle[o].focused&&r.viewModelHandle[o].focused(!0)),t.data){try{var _=JSON.parse(t.data);_&&_.verificationCodeSlt&&(u.verificationCodeSlt=_.verificationCodeSlt)}catch(C){}}F&&i.$.triggerHandler(E,{"actionName":F,"control":i})
}else{y||i._handleFatalError(a)}},"_handleFatalError":function(e){l&&(l.setProperty("ErrorCode",parseInt(e)),l.setWizardButtons(!1,!1,!0),l.finalNext()),r.ftrViewModelHandle&&(r.ftrViewModelHandle.buttons.backButton.disabled(!0),r.ftrViewModelHandle.buttons.nextButton.disabled(!0)),u?u.finish(u.FinishStates.Error):$Utility.navigateTo(p.urls.baseDomain+m.urls.error+e)},"handleActionButton":function(){var t=this,i=t._viewContext.data||{},a=i.prefill||{},o=i.input||{},s={},l=t._options.optInTargetedId,u=t._options.optInEmailId,d=(t._checkBoxBindings,e.HIPAMFE);
if(!t._isSubmitting){var c=o.memberName;if(c||(r.viewModelHandle.memberName&&(r.viewModelHandle.memberName.notifySubscribers(),c=o.memberName),c)){var p=r.FieldHelper.getMemberNameType(c,m.domains);if("function"==typeof r.viewModelHandle.shouldGoToPasswordPage&&r.viewModelHandle.shouldGoToPasswordPage()&&t.$.triggerHandler(E,{"actionName":"password","control":t}),p===m.memberNameType.Phone||p===m.memberNameType.EASI&&0!==m.easiVerifyInline){if(i.reporting&&i.reporting.autoVerifyShown&&(s.AutoVerify=!0),!o.verification||A&&!r.viewModelHandle.fedConfirmPageDesc){if(!A||!i.input.isMemberNameVerified){return void t.$.triggerHandler(E,{"actionName":"verification","control":t})
}if(!r.viewModelHandle.fedConfirmPageDesc){return void t.$.triggerHandler(E,{"actionName":"fedConfirm","control":t})}s.MemberName=c}else{i.verificationCodeSlt&&(s.VerificationCodeSlt=i.verificationCodeSlt),s.MemberName=c,s.VerificationCode=o.verification,o.autoVerify&&(s.AutoVerifySuccess=o.autoVerify)}}else{if(A&&!r.viewModelHandle.fedConfirmPageDesc){return void t.$.triggerHandler(E,{"actionName":"fedConfirm","control":t})}s.MemberName=c}if(A&&(s.FedStateToken=f.fedStateToken,p===m.memberNameType.EASI&&(s.IsFedEasiEmailVerified=i.input.isMemberNameVerified)),a&&a.memberName){var g=a.memberName.Live,b=a.memberName.Phone,h=a.memberName.EASI;
s.PrefillMemberNamePassed=!0,s.PrefillDomain=m.prefillDomain,p===m.memberNameType.Live?g&&n.each(g,function(e,t){return t&&t.email&&c&&c.indexOf(t.email)>=0?(s.PrefillMemberNameUsed=!0,!1):void 0}):p===m.memberNameType.Phone?b&&n.each(b,function(e,t){return t&&t.phoneNumber&&c&&c.indexOf(t.phoneNumber)>=0?(s.PrefillMemberNameUsed=!0,!1):void 0}):p===m.memberNameType.EASI&&h&&n.each(h,function(e,t){return t&&t.email&&c&&c.indexOf(t.email)>=0?(s.PrefillMemberNameUsed=!0,!1):void 0})}if(s.FirstName=o.firstName,s.LastName=o.lastName,i.reporting&&(s.MemberNameChangeCount=i.reporting.memberNameChangeCount,s.MemberNameAvailableCount=i.reporting.memberNameAvailableCount,s.MemberNameUnavailableCount=i.reporting.memberNameUnavailableCount),0!==f.pwdless&&p===m.memberNameType.Phone||0!==f.pwdlessemail&&p===m.memberNameType.EASI||A||(s.CipherValue=Encrypt("","",k,o.password),s.SKI=SKI||""),0!==m.dobCheck?(o.birthdate||0!==m.createWithCountry)&&(s.BirthDate=o.birthdate,s.Country=o.country):(s.BirthDate=o.birthdate,s.Country=o.country,s.PostalCode=o.postalCode,s.Gender=o.gender),p===m.memberNameType.Phone&&w||(s.PhoneCountry=o.phoneCountry,s.PhoneNumber=o.phoneNumber,s.AltEmail=p===m.memberNameType.Live?o.alternateEmail:null),s.IsOptOutEmailDefault=0!==m.isOptOut,s.IsOptOutEmailShown=!1,u){var y=n("#"+u,t._$container);
y&&y.length>0&&(t._viewContext.persistedOptOutEmailSelection=!y.prop("checked"))}if("undefined"!==t._viewContext.persistedOptOutEmailSelection&&(s.IsOptOutEmailShown=!0,s.IsOptOutEmail=t._viewContext.persistedOptOutEmailSelection),l){var C=n("#"+l);C&&C.length>0&&(s.IsOptOutTargeting=!C.prop("checked"))}s.LW=0!==m.lw,s.SiteId=i.siteId,s.IsRDM=i.isRdm;try{s.GWPC=window.external.SignString("bver=1")}catch(x){}s.WReply=t._wreply,s.ReturnUrl=t._ru,s.uiflvr=e.$Config.uiflvr,s.uaid=e.$Config.uaid,s.SuggestedAccountType=m.suggAccType,s.SuggestionType=m.suggType,m.DT&&(s.DT=m.DT);
var S=e.location.hash;S&&(S=S.replace("#",""),S&&S.indexOf("errCode=")>-1&&(s.TestErrorCode=S.replace("errCode=",""),e.location.hash="#")),v&&v.fid&&(s.HFId=v.fid),d&&d.done?r.viewModelHandle.hip||d.fake?(s.HType=d.type,s.HFId=d.urlFid,s.HSId=d.urlId,d.verify(function(e,n){if(d.clientValidation(),""!==d.getError()){if("sms"===d.type){return}r.viewModelHandle.hip.valueHasMutated()}s.HId=n,s.HSol=e,t._createAccount(s)},null)):t.$.triggerHandler(E,{"actionName":"hip","control":t}):v.required?t.$.triggerHandler(E,{"actionName":"hip","control":t}):(t._isSubmitting=!0,t._createAccount(s))
}}}},{})}(),function(){function e(e,t){var n=y.options.viewDefs[e];if(n){var r=n.sectionId,i=n.actions,a=null;r&&(S[r]?a=S[r].clone():(a=c("#"+r,t),a.detach(),S[r]=a)),n.options.sectionId||(n.options.sectionId=r),n.options.viewTemplate=a;var o={"action":r+"Action"};i.cancel&&(o.cancel=r+"Cancel"),i.alternate&&(o.alternate=r+"Alternate"),i.skip&&(o.skip="PhoneVerification"),i.tou&&(o.tou="tou"),i.privacy&&(o.privacy="privacy"),i.dataCollection&&(o.dataCollection="dataCollection"),i.dataUse&&(o.dataUse="dataUse"),i.retention&&(o.retention="retention"),i.localAccount&&(o.localAccount="LocalAccount"),i.hip&&(o.hip="hip"),i.learnMore&&(o.learnMore="learnMore"),n.options.buttons=o
}}function t(){p.SignupTemplates&&y.useTemplate&&(c.each(p.SignupTemplates,function(e,t){c("#"+e).append(t)}),c("#maincontent").removeAttr("role"));var t=c("#signupTemplates"),n=y.options.states;for(var r in n){e(n[r],t)}}function n(e,t,n,a){if(t===E){if($ReportEvent.Fire("Signup_FinalBack_UserAction"),y.finalBackUrl){h.isWin10InclusiveOOBE&&A?A.handleBackButton(function(){$Utility.navigateTo(y.finalBackUrl)}):y.options.viewDefs[E].url=y.finalBackUrl}else{if(g){return g.finalBack(),null}}}else{if("cxhLocalAccount"===t){return A.loadIdentityProvider(y.localAccountProvider),null
}if("cxhCancel"===t){return A.finish(k.Cancel),null}}return"cancel"==a?(r(t,N),t):(i(t,N),t)}function r(e,t){if(null!=e&&"undefined"!=typeof e&&w[e]){var n=w[e].userAction;n?(c.isArray(n)||(n=new Array(n)),-1===n.indexOf(t)&&n.push(t)):n=t,w[e].userAction=n}}function i(e,t){if(null!=e&&"undefined"!=typeof e&&w[e]){var n=w[e].userAction;if(n){if(n===t){n=""}else{var r=n.indexOf(t);-1!==r&&n.splice(r,1)}w[e].userAction=n}}}function a(e){var t=new c.Deferred;if(e){var n={"phone":e},r=new v(null,$Utility.generateUrl(h.urls.baseDomain,y.urls.dataRequest.getPhoneNumberDetails,!0),n,function(e){t.resolve(e)
},function(){t.reject()});r.start()}else{t.reject()}return t.promise()}function o(e){var t=e.data=e.data||{},n=t.prefill=t.prefill||{},r=t.input=t.input||{};for(var i in e.keyToStateMap){var o=x[i].clientPrefillKey;if(!n[i]&&o&&g){var s=g.getProperty(o);if(s){if(i===x.phoneNumber.name){a([s]).done(function(e){e&&e.phoneDetails&&e.phoneDetails.length>0&&(n[x.phoneCountry.name]=e.phoneDetails[0].country,n[x.phoneNumber.name]=e.phoneDetails[0].phoneNumber)})}else{if(i===x.memberName.name){try{var l=c.parseJSON(s),u=[],d=[],m=[];
c.isArray(l)||(l=[l]),c.each(l,function(e,t){var n=p.FieldHelper.getMemberNameType(t,y.domains,null),r=y.memberNameType;n===r.Phone?m.push(t):n===r.EASI?u.push(t):n===r.Live&&d.push(t)}),n[i]={"EASI":u,"Live":d},null!=m&&m.length>0&&a(m).done(function(e){e&&e.phoneDetails&&(n[i][y.memberNameType.Phone]=e.phoneDetails)})}catch(f){s=""}n[i]=s}else{n[i]=s}}}}}var v=n[x.country.name];v&&(n[x.country.name]=v.toUpperCase());for(var i in e.keyToStateMap){i!==x.memberName.name&&(r[i]=n[i])}}function s(e){var t=y.options,n=t.viewDefs||{};
e.keyToStateMap={};for(var r in n){if(n.hasOwnProperty(r)){var i=n[r];if(i&&i.options&&i.options.viewModelOptions&&i.options.viewModelOptions.observables){var a=i.options.viewModelOptions.observables;c.each(a,function(t,n){e.keyToStateMap[n]=r})}}}}function l(){0!==y.lw&&(y.phoneCountryListJson={"list":[]},y.phoneCountryListJson["default"]=y.defaultCountry,c.each(y.countryList,function(e,t){t.code&&(t.displayValue=y.showParens?t.name+" (+"+t.code+")":t.name+" +"+t.code,y.phoneCountryListJson.list.push(t))}))
}var u=window,d=u.wLive,c=u.jQuery,p=d.Account,m=p.PageEvents,f=p.Controls,v=d.Core.DataRequest,g=null,b=p.Util&&p.Util.HighContrast,h=u.$Config.WLXAccount,y=h.signup,w=y.options.viewDefs,C=y.page,x=y.signupObservableSets,A=u.MSA&&u.MSA.CXH,k=A&&A.FinishStates,S={},E="finalBack",P=p&&p.Util&&p.Util.ConvergedUxUtil;$Do.when("ExternalHelper",0,function(){g=u.ExternalHelper});var N="Action_Back";u.OnBack||(u.OnBack=function(){m&&m.$.triggerHandler(m.back)}),u.OnNext||(u.OnNext=function(){m&&m.$.triggerHandler(m.next)
}),defineNamespace("wLive.Account.Page",{"Signup":function(){function e(e){var t=document.createElement("script");if(t.type="text/javascript",t.src=C.behavioralTelemetryUrl,e.appendChild(t),0!==u.$Config.btReportingOn){var n=setInterval(function(){"undefined"!=typeof UserTracker&&(clearInterval(n),$ReportEvent.Fire("Signup_BT_UserAction"))},500)}}y.strings=y.strings||{},y.page=y.page||{},y.regex=y.regex||{},c.extend(!0,y.strings,u.$Config.sharedStrings),c.extend(!0,y.page,u.$Config.sharedPageConfig),c.extend(!0,y.regex,y.regularexpressions),c.extend(!0,y.strings,y.overrideStrings||{}),t();
var r=y.viewContext=y.viewContext||{};r.data=r.data||{},r.data.reporting=r.data.reporting||{},r.data.reporting.memberNameChangeCount=r.data.reporting.memberNameChangeCount||0,r.data.reporting.memberNameAvailableCount=r.data.reporting.memberNameAvailableCount||0,r.data.reporting.memberNameUnavailableCount=r.data.reporting.memberNameUnavailableCount||0,l(),s(r),o(r);var i=c("#maincontent")[0];if(C.isConvergedUXV2){var a=P.getArrowImage(),d={"strings":y.strings,"config":C,"memberName":ko.observable(),"isBackButtonVisible":ko.observable(!0),"arrowImg":a,"showIdentityBanner":ko.observable(!1)};
ko.applyBindings(d,i)}var p=new f.FlowController(c("#pageControlHost"),r,y.options);if(p.setStateChangeFunc(n),p.show(y.startState),C&&i){if(C.backgroundColor&&c(".background").css("backgroundColor",C.backgroundColor),C.imgs&&C.logoTypeHtml){var m=c("#ftrLogo");m.html(b.getHighContrastImage(C.logoTypeHtml.format(C.imgs.baseUrl,"White",0!==C.useSvg?"svg":"png"),{"forWhiteBackground":C.logoTypeHtml.format(C.imgs.baseUrl,"Gray",0!==C.useSvg?"svg":"png")}))}C.behavioralTelemetryUrl&&(C.behavioralTelemetryLoadDelay?$Do.when("doc.load",function(){u.setTimeout(function(){e(i)
},C.behavioralTelemetryLoadDelay)}):u.setTimeout(function(){e(i)},0))}h.isWin10InclusiveOOBE&&A&&!y.getDeviceTicket&&(A.speakAsync(y.strings.cortana),A.showBackButton(!0))}}),$Do.register("Account.Page.Signup")}();