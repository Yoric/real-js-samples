!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/js/cmpld/",e(e.s=555)}({0:function(t,e,i){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new l(t)}function o(t,e){return void 0===e&&(e=[]),a?(i=Function.prototype.bind).call.apply(i,[console[t],console].concat(e)):function(){};var i}function r(t,e){if(a){console.groupCollapsed(n(t).str());for(var i=0,o=Object.keys(e);i<o.length;i++){var r=o[i];console.groupCollapsed(r),console.log.apply(console,e[r]),console.groupEnd()}console.groupEnd()}}function s(t){return(t>9?"":"0")+t}Object.defineProperty(e,"__esModule",{value:!0});var a=console&&console.groupCollapsed&&console.groupEnd&&console.log&&!1,l=function(){function t(t){var e=new Date;this.state={messages:t,prefix:"["+e.getHours()+":"+s(e.getMinutes())+":"+s(e.getSeconds())+"]",icon:"ü§ñ"}}return t.prototype.toArray=function(){var t=this.state;return[t.icon,t.prefix].concat(t.messages)},t.prototype.str=function(){return this.toArray().join(" ")},t.prototype.prefix=function(t){return this.state.prefix=t,this},t.prototype.log=function(){return this.state.icon="ü§ñ",this},t.prototype.info=function(){return this.state.icon="üíÅ‚Äç‚ôÇÔ∏è",this},t.prototype.error=function(){return this.state.icon="üí©",this},t.prototype.warn=function(){return this.state.icon="üò¢",this},t.prototype.icon=function(t){return this.state.icon=t,this},t}();e.FormatDescriptor=l,e.format=n,e.print={log:o("log",n().log().toArray()),info:o("info",n().info().toArray()),warn:o("warn",n().warn().toArray()),error:o("error",n().error().toArray()),groups:r}},1:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COMPONENT_DELIMITER=",",e.COMPONENT_EVENT_DELIMITER=":",e.COMPONENT_NS_DELIMITER=".",e.COMPONENT_EL_DELIMITER=".",e.COMPONENT_DATA_BIND_DEF_DELIMITER="|",e.COMPONENT_DATA_BIND_EQ="=",e.COMPONENT_DATA_BIND_PROP_DELIMITER=";"},167:function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(168)),n(i(185))},168:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},r=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(t){i=[6,t],r=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}},l=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0});var u=i(19),h=i(169),c=i(48),p=i(171),d=i(174),f=i(30),m=i(59),_=i(177),g=i(179),y=i(180),v=i(184),b=i(30),w=i(60),P=i(61),T={sels:{answer:"js-survey__answer",answerInput:"js-survey__answer-input"},attrs:{exclude:"data-exclude",withInput:"data-with-input"}},L=-1,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._events={"submit:form":function(t){e.handleSubmit(t)},"click:button-reset":function(t){t.preventDefault(),e.reset()},"click:button-next":function(t){t.preventDefault();var i=e.getState(),n=i.currentIndex,r=i.survey,s=i.payload,a=n+1,l=r.questions[a];if(!l)return void e.vote(s);e.setState(function(t){return o({},t,{currentAnswer:null,currentIndex:a,currentQuestion:l,currentType:"question",hasUserInteractedWithSurvey:!0})})},"change:input":function(t){t.preventDefault();var i=T.attrs,n=t.target,o=n.getAttribute(i.exclude),r=n.getAttribute(i.withInput);if("checkbox"===n.type&&n.checked&&e.getElements("input").forEach(function(t){var e=t.getAttribute(i.exclude);(o&&!e||!o&&e)&&(t.checked=!1)}),r&&n.checked){var s=e.getElements("input-custom")[0];s&&s.focus()}},"click:input-custom":function(t){var e,i,n=T.sels,o=t.target,r=o.parentNode;if(null!==r){for(;"DIV"!==r.tagName||!r.classList.contains(n.answer);)r=r.parentNode;if(r){var s=r.getElementsByClassName(n.answerInput),l=Array.prototype.slice.call(s);try{for(var u=a(l),h=u.next();!h.done;h=u.next()){h.value.checked=!0}}catch(t){e={error:t}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}}o.focus()}}},e}return n(e,t),e.processDataBeforePost=function(t){return Object.keys(t).reduce(function(e,i){var n=t[i];if(Array.isArray(n)){var o=n.length;0!==o&&(e[i]=1===o?n[0]:n)}else(n||"number"==typeof n)&&(e[i]=n);return e},{})},e.prototype.handleQuizStepForm=function(t){var e=this.getState().survey,i=c.serializeObject(t),n=_.findAnswersIds(i),r=i.question[0],s=m.findItem(r,e.questions);if(s){if(0===Object.keys(n).length)return void this.setState(function(t){var e;return o({},t,{errors:(e={},e[r]=[f.errorRequired()],e),hasUserInteractedWithSurvey:!0})});var a=l(m.findItems(n,s.answers),1),u=a[0];if(u){var h=u.right?s.correct:s.incorrect;this.setState(function(t){return o({},t,{currentAnswer:h,currentType:"answer",errors:{},hasUserInteractedWithSurvey:!0,payload:o({},t.payload,_.packPayload(s,n))})})}}},e.prototype.handleSubmit=function(t){t.preventDefault&&t.preventDefault();var e=t.target,i=this.options.layout.type,n=this.type;if("step"!==i&&"sidebar"!==i||"poll"!==n&&"exam"!==n&&"survey"!==n){if("all"===i&&"poll"===n||"exam"===n||"survey"===n)throw new Error("not implemented");"quiz"===n&&this.handleQuizStepForm(e)}else this.handleSurveyStepForm(e)},e.prototype.handleSurveyStepForm=function(t){var e=this.getState(),i=e.currentIndex,n=e.payload,r=e.survey,s=r.questions,a=r.questionsById,l=c.serializeObject(t),u=l.question[0],h=a[u],p=_.findAnswersIds(l),f=(l.answer_custom||[]).filter(function(t){return t});if(h){var g=h.answers,y=h.options,v=!g||0===g.length,b=m.findItems(p,g),P=v?[]:d.validateAnswers(y,b,f);if(P.length)return void this.setState(function(t){var e,i;return o({},t,{errors:(e={},e[u]=P,e),formState:(i={},i[u]=_.saveQuestionState(p,f),i),hasUserInteractedWithSurvey:!0})});var T=o({},n,_.packPayload(h,p,f)),L=w.findNextQuestion(i,s,T);if(!L)return void this.vote(T);this.setState(function(t){return o({},t,{currentQuestion:L,currentIndex:m.itemIndex(L.id,s),errors:{},formState:{},hasUserInteractedWithSurvey:!0,payload:T})})}},Object.defineProperty(e.prototype,"type",{get:function(){var t=this.getState().survey;return t?t.type||"poll":"poll"},enumerable:!0,configurable:!0}),e.prototype.vote=function(t){return r(this,void 0,void 0,function(){var i,n,r,a;return s(this,function(s){switch(s.label){case 0:i=this.options.url,this.setState(function(e){return o({},e,{errors:{},formState:{},hasUserInteractedWithSurvey:!0,isBusy:!0,payload:t})}),s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(i,{credentials:"include",method:"POST",body:JSON.stringify(e.processDataBeforePost(t)),headers:{Accept:"application/json, application/xml, text/plain, text/html, *.*","Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}})];case 2:return n=s.sent(),[4,n.json()];case 3:return r=s.sent(),this.setState(function(t){var e=t.survey;if(r.error)return o({},t,{currentState:"ready",errors:{server:[r.message]},isBusy:!1});if((e.max_votes||0)>0){var i=g.readVotesCount(e.id);g.saveVotesCount(e.id,i+1)}return o({},t,{currentQuestion:null,currentState:"done",errors:{},isBusy:!1,survey:r,voteAttempts:g.getVoteAttempts(e.id,e.max_votes||0)})}),[3,5];case 4:return a=s.sent(),this.setState(function(t){return o({},t,{currentState:"ready",isBusy:!1,errors:{server:[b.errorServer500()]}})}),[3,5];case 5:return[2]}})})},e.prototype.scrollUp=function(){var t=this.getElements("scroll-anchor")[0],e=this.options.style.offsetTop;if(t)return void p.scrollTo(t.offsetTop+e);var i=this.$;p.scrollTo(i.offsetTop+e)},e.prototype.fetchSurvey=function(){return r(this,void 0,void 0,function(){var t,e,i,n,r,a;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,7,,8]),t=this.options.url,[4,fetch(t,{credentials:"include"})];case 1:return e=s.sent(),[4,e.json()];case 2:i=s.sent(),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,y.getAuth()];case 4:return n=s.sent(),[3,6];case 5:return r=s.sent(),console.error(r),n=null,[3,6];case 6:return this.setState(function(t){if(i.error)return o({},t,{currentState:"error",errors:{server:[i.message]}});var e=t.layout,r=h.parse(i.stop_date.rfc3339)||0,s=r>new Date,a=g.getVoteAttempts(i.id,i.max_votes);v.preload(i);var l=i.questions;return i.questionsById=w.mapToDictById(l),o({},t,{layout:o({},e,{showCounter:"survey"!==i.type}),authorized:!!n,currentQuestion:l[t.currentIndex],currentState:_.resolveSurveyInitialStateByType(i.type,s,a),isActive:s,survey:i,type:i.type,voteAttempts:a})}),[2,i];case 7:return a=s.sent(),console.error(a),this.setState(function(t){return o({},t,{currentState:"error",errors:{server:[a.message]}})}),[3,8];case 8:return[2]}})})},e.prototype.render=function(e,i){var n=this,o=this.options.style.allowScrollUp;if(t.prototype.render.call(this,e,i),i&&("done"===i.currentState&&this.options.onFinish(i,this.$),-1===["error","loading"].indexOf(i.currentState))){o&&i.hasUserInteractedWithSurvey&&-1!==["done","step","ready"].indexOf(i.currentState)&&this.scrollUp();var r=i.currentQuestion;!r||r.id===L||r.answers&&0!==r.answers.length||(L=r.id,setTimeout(function(){var t=n.$elements.form;t&&t[0]&&(P.log("–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∞–±–º–∏—Ç –≤–æ–ø—Ä–æ—Å–∞"),n.handleSubmit({target:t[0]}))},50))}},e.prototype.reset=function(){t.prototype.reset.call(this),this.setState(function(t){return o({},t,{hasUserInteractedWithSurvey:!0})})},e.prototype.init=function(){this.fetchSurvey()},e.prototype.getDefaultOptions=function(){return{onFinish:function(t,e){},style:{offsetTop:0,allowScrollUp:!0},layout:{type:"step",allowRepeat:!0,showIndex:!1,showResultIndex:!0,showCounter:!0,showHeader:!0,showResults:!0}}},e.prototype.getInitialState=function(){return{layout:this.options.layout,authorized:!1,voteAttempts:0,currentIndex:0,currentState:"loading",currentType:"question",errors:{},formState:{},isBusy:!1,hasUserInteractedWithSurvey:!1,payload:{json:1},survey:{}}},e.registryName="SurveyComponent",e}(u.TemplateComponent);e.SurveyComponent=E,u.registerComponent(E)},169:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(170))},170:function(t,e,i){"use strict";function n(t,i,n){void 0===n&&(n=1);var o=e.DATE_METHOD_MAP[i],r=o[0],s=o[1],a=Date.prototype[r],l=Date.prototype[s],u=new Date(t.getTime()),h=a.call(u);return l.call(u,h+n),u}function o(t){var e=Date.parse(t);if(NaN!==e)return new Date(e);for(var i=0,n=c;i<n.length;i++){var o=n[i],r=o.expr,s=o.pass;if(r.test(t))return s(r,t)}}function r(t){return 32-new Date(t.getFullYear(),t.getMonth(),32).getDate()}function s(t){var e=t.getDay()-1;return e<0?6:e}function a(t){var e=t.getDay();return 6===e||0===e}function l(t,e){return void 0===e&&(e=new Date),e.getTime()>t.getTime()}function u(t){return t%4==0&&t%100!=0||t%400==0}function h(t,e){var i=t.getDate()===e.getDate(),n=t.getMonth()===e.getMonth();return t.getFullYear()===e.getFullYear()&&n&&i}Object.defineProperty(e,"__esModule",{value:!0}),e.DATE_METHOD_MAP={date:["getDate","setDate"],year:["getFullYear","setFullYear"],hours:["getHours","setHours"],milliseconds:["getMilliseconds","setMilliseconds"],minutes:["getMinutes","setMinutes"],month:["getMonth","setMonth"],seconds:["getSeconds","setSeconds"],time:["getTime","setTime"]},e.shift=n;var c=[{expr:/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})([+-]\d{2}):(\d{2})$/,pass:function(t,e){var i=t.exec(e);if(null!==i){var n=i.slice(1).map(function(t){return parseInt(t,10)}),o=n[0],r=n[1],s=n[2],a=n[3],l=n[4],u=n[5],h=n[6],c=n[7],p=(new Date).getTimezoneOffset()+60*h+c;return new Date(o,r-1,s,a,l-p,u)}}}];e.parse=o,e.daysInMonth=r,e.getDayOfWeek=s,e.isWeekend=a,e.isPast=l,e.isLeapYear=u,e.daysEq=h},171:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(172))},172:function(t,e,i){"use strict";function n(t,e,i){void 0===e&&(e=1e3),void 0===i&&(i="easeOutSine");var n=o[i],a=window.scrollY,l=0;!function e(){l+=s;var i=l/.5,o=n(i);i<1?(r(e),window.scrollTo(0,a+(t-a)*o)):window.scrollTo(0,t)}()}Object.defineProperty(e,"__esModule",{value:!0});var o=i(173),r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},s=1/60;e.scrollTo=n},173:function(t,e,i){"use strict";function n(t){return function(e){return Math.pow(e,t)}}function o(t){return function(e){return 1-Math.abs(Math.pow(e-1,t))}}function r(t){var e=n(t),i=o(t);return function(t){return t<.5?e(2*t)/2:i(2*t-1)/2+.5}}function s(t){return Math.sin(t*l)}function a(t){return-.5*(Math.cos(Math.PI*t)-1)}Object.defineProperty(e,"__esModule",{value:!0});var l=Math.PI/2;e.linear=r(1),e.easeInQuad=n(2),e.easeOutQuad=o(2),e.easeInOutQuad=r(2),e.easeInCubic=n(3),e.easeOutCubic=o(3),e.easeInOutCubic=r(3),e.easeInQuart=n(4),e.easeOutQuart=o(4),e.easeInOutQuart=r(4),e.easeInQuint=n(5),e.easeOutQuint=o(5),e.easeInOutQuint=r(5),e.easeOutSine=s,e.easeInOutSine=a},174:function(t,e,i){"use strict";function n(t,e,i){if(!t)return[];var n=t.answer_required,s=t.min_answers,a=t.max_answers,l=t.user_input_min_length,u=t.user_input_max_length,h=e.length,c=s!==a;return[function(){return n&&c&&(h<s||h>a)?r.errorRange(s,a):null},function(){return n&&c&&h<s&&!a?r.errorAtLeastOne(s):null},function(){return n&&!c&&0===h?r.errorRequired():null},function(e){var s,a;try{for(var h=o(e),c=h.next();!c.done;c=h.next()){if(!c.value.id&&t.user_input_allowed){var p=i[0]||"";if(n&&0===p.length)return r.errorRequired();if(l>0){if(0===p.length||p.length<l)return r.errorMinLength(l);if(p.length>u)return r.errorMaxLength(u)}switch(t.user_input_allowed){case 1:var d=/(^[a-z–∞-—è\s]+$)/i;if(!d.test(p))return r.errorLettersOnly();break;case 2:var d=/(^[0-9]+$)/i;if(!d.test(p))return r.errorDigitsOnly()}}}}catch(t){s={error:t}}finally{try{c&&!c.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return null}].reduce(function(t,i){var n=i(e);return null!==n?t.concat(n):t},[])}var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(30);e.validateAnswers=n},175:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(176))},176:function(t,e,i){"use strict";function n(t,e){var i=e[0],n=e[1],o=e[2],r=Math.abs(t);return(r%=100)>=5&&r<=20?o:(r%=10,1===r?i:r>=2&&r<=4?n:o)}function o(t,e,i){return void 0===e&&(e=140),void 0===i&&(i=""),t.length<e?t:""+t.slice(0,e-i.length)+i}function r(t){return t.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(t,e){return 0==+t?"":0===e?t.toLowerCase():t.toUpperCase()}).replace(/[\-\.]/g,"")}function s(t){return t.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(t,e){return 0==+t?"":t.toUpperCase()}).replace(/[\-\.]/g,"")}Object.defineProperty(e,"__esModule",{value:!0}),e.plural=n,e.trunc=o,e.toCamelCase=r,e.toPascalCase=s},177:function(t,e,i){"use strict";function n(t,e,i){var n,o={},r=t.id,s=t.options;return s&&s.answer_range?(n=Object.assign({},e),delete n[0]):n=Object.keys(e).filter(function(t){return"0"!==t}),n&&(o[u.createQuestionKey(r)]=n),i&&(o[u.createQuestionKey(r,!0)]=i),o}function o(t,e){var i={};return Object.keys(t).forEach(function(n){n&&(i[n]={checked:!0},"string"==typeof t[n]&&(i[n].value=t[n]),"0"===n&&(i[n].value=e[0]))}),i}function r(t,e,i){var n=e&&i>0?"ready":"done",o=i>0?"ready":"done";return"poll"===t?n:"exam"===t||"survey"===t||"quiz"===t?e?o:"hidden":n}function s(t){return void 0===t&&(t={}),Object.keys(t).reduce(function(e,i){return"answer"===i?Object.assign(e,a.mapToDict(t[i],!0)):0===i.indexOf(l.prefixRangeAnswer)&&(e[i.replace(l.prefixRangeAnswer,"")]=t[i][0]),e},{})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(59),l=i(30),u=i(60);e.packPayload=n,e.saveQuestionState=o,e.resolveSurveyInitialStateByType=r,e.findAnswersIds=s},178:function(t,e,i){"use strict";function n(t,e){r.log("–ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å "+t.id+"...");var i=t.answers;if(!i||0===i.length)return r.log(">>> –≤–æ–ø—Ä–æ—Å –±–µ–∑ –æ—Ç–≤–µ—Ç–æ–≤ (–≤–æ–ø—Ä–æ—Å-—Å—Å—ã–ª–∫–∞) ‚Äî –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å."),!0;if(u(i,e))return r.log(">>> –≤—Å–µ –æ—Ç–≤–µ—Ç—ã —Å–∫—Ä—ã—Ç—ã ‚Äî –ù–ï–õ–¨–ó–Ø –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å."),!1;if(!t.options)return r.log(">>> –Ω–µ—Ç —É—Å–ª–æ–≤–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"),!0;var n=t.options.show_condition;if(!n||!n.question)return r.log(">>> –Ω–µ—Ç —É—Å–ª–æ–≤–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"),!0;var s=n.question,a=o.createQuestionKey(s),h=e[a];return h?l.every(function(t){return t(n,h)}):(r.log(">>> –Ω–∞ –≤–æ–ø—Ä–æ—Å "+s+", —è–≤–ª—è—é—â–∏–π—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –Ω–µ—Ç –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî","–ù–ï–õ–¨–ó–Ø –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"),!1)}Object.defineProperty(e,"__esModule",{value:!0});var o=i(60),r=i(61),s=function(t){return Array.isArray(t)?t.length:Object.keys(t).length},a=function(t,e){return!!e&&(Array.isArray(e)?-1!==e.indexOf(""+t):!!e[t]&&"0"!==e[t])},l=[function(t,e){var i=t.min_answers;if(!i)return!0;if(!e)return!1;var n=s(e),o=n>=(i||0);return r.log(">>> –º–∏–Ω–∏–º–∞–ª—å–Ω–æ —á–∏—Å–ª–æ –æ—Ç–≤–µ—Ç–æ–≤ "+i+",","–ø–æ–ª—É—á–µ–Ω–æ "+n+" ‚Äî",(o?"–º–æ–∂–Ω–æ":"–ù–ï–õ–¨–ó–Ø")+" –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"),o},function(t,e){if(!e)return!0;var i=t.max_answers;if(!i)return!0;var n=s(e),o=n<=(i||Number.POSITIVE_INFINITY);return r.log(">>> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –æ—Ç–≤–µ—Ç–æ–≤ "+i+",","–ø–æ–ª—É—á–µ–Ω–æ "+n+" ‚Äî",(o?"–º–æ–∂–Ω–æ":"–ù–ï–õ–¨–ó–Ø")+" –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"),o},function(t,e){if(!e)return!1;var i=t.checked_answer,n=!i||a(i,e);return r.log(">>> "+(n?"":"–Ω–µ ")+"–≤—ã–±—Ä–∞–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç —Å id "+i+" ‚Äî",(n?"–º–æ–∂–Ω–æ":"–ù–ï–õ–¨–ó–Ø")+" –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"),n}],u=function(t,e){var i=0;return t.every(function(t){if(t.disable_multiple)return 0===i&&(i++,!0);var n=t.show_condition;if(!n)return!1;var r=n.checked_answer,s=n.question;return!(!r||!s)&&!a(r,e[o.createQuestionKey(s)])})};e.checkIfCanShowQuestion=n},179:function(t,e,i){"use strict";function n(t,e){var i=a(t);localStorage.setItem(i,""+e)}function o(t){var e=a(t),i=localStorage.getItem(e);if(!i)return 0;var n=parseInt(i,10);return isNaN(n)?0:n}function r(t,e){return 0===e?1:e-o(t)}function s(t,e){if(0===e)return!0;var i=o(t);return 0===i||!(i>=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return"Survey:"+t};e.saveVotesCount=n,e.readVotesCount=o,e.getVoteAttempts=r,e.checkVotesCount=s},18:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},180:function(t,e,i){"use strict";function n(){return o(this,void 0,void 0,function(){return r(this,function(t){return null===a&&(a=s.getActiveUser()),[2,a]})})}var o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(t){i=[6,t],r=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(e,"__esModule",{value:!0});var s=i(181),a=null;e.getAuth=n},181:function(t,e,i){"use strict";function n(t){return p?Object(c.d)(t):Object(c.c)(t)}function o(){return p?Object(c.a)().then(function(t){var e=t.status,i=t.accounts;d=i||[],f=p.activeUser()||"",m=e||""}).catch(function(t){return t}):Object(c.b)().then(function(t){var e=t.status,i=t.data;d=i&&i.list?i.list:[],f=i&&i.email?i.email:"",m=e||""}).catch(function(t){return t})}function r(){return o().then(function(){return d}).catch(function(t){return t})}function s(){return r().then(function(t){return t.filter(function(t){return t.active})[0]})}function a(){return o().then(function(){return!!f&&!0}).catch(function(t){return t})}function l(){return o().then(function(){return m}).catch(function(t){return t})}function u(t){return o().then(function(){if("function"!=typeof t||!f)throw new TypeError("First argument must be a function or the user is not allowed.");t(f)}).catch(function(t){return t})}function h(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,o="function"==typeof t;return new Promise(function(r){u(function(s){s&&o?r(t()):e&&o?n(i):r(s)})})}Object.defineProperty(e,"__esModule",{value:!0}),e.getAccountsList=r,e.getActiveUser=s,e.isAuth=a,e.getStatus=l,e.onGetStatus=u,e.applyAuth=h;var c=i(182),p="undefined"!=typeof window?window.__PH:global.__PH,d=[],f="",m=""},182:function(t,e,i){"use strict";i.d(e,"b",function(){return s}),i.d(e,"a",function(){return a}),i.d(e,"d",function(){return l}),i.d(e,"c",function(){return u});var n=i(183),o=i.n(n),r="undefined"!=typeof window?window.__PH:global.__PH,s=function(){var t="mail.ru"!==document.domain.split(".").slice(-2).join(".")?"https://portal.devmail.ru/NaviData":"https://portal.mail.ru/NaviData",e={data:{mac:1,ldata:1},timeout:3e3,jsonpCallback:"callback"};return o()(t,e).then(function(t){return t.json()})},a=function(){return new Promise(function(t,e){return r.loadAccountsList(function(i){return i?t(i):e()})})},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.authForm.show(t)},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.successPage?t.successPage:window.location;window.location="https://touch.mail.ru/cgi-bin/login?page=".concat(e)}},183:function(t,e,i){(function(t){!function(i,n){if("function"==typeof define&&define.amd)define(["exports","module"],n);else{n(e,t)}}(0,function(t,e){"use strict";function i(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function n(t){try{delete window[t]}catch(e){window[t]=void 0}}function o(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}function r(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=t,a=e.timeout||s.timeout,l=e.jsonpCallback||s.jsonpCallback,u=void 0;return new Promise(function(s,h){var c=e.jsonpCallbackFunction||i(),p=l+"_"+c;window[c]=function(t){s({ok:!0,json:function(){return Promise.resolve(t)}}),u&&clearTimeout(u),o(p),n(c)},r+=-1===r.indexOf("?")?"?":"&";var d=document.createElement("script");d.setAttribute("src",""+r+l+"="+c),e.charset&&d.setAttribute("charset",e.charset),d.id=p,document.getElementsByTagName("head")[0].appendChild(d),u=setTimeout(function(){h(new Error("JSONP request to "+t+" timed out")),n(c),o(p),window[c]=function(){n(c)}},a),d.onerror=function(){h(new Error("JSONP request to "+t+" failed")),n(c),o(p),u&&clearTimeout(u)}})}var s={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};e.exports=r})}).call(e,i(18)(t))},184:function(t,e,i){"use strict";function n(t){return s(this,void 0,void 0,function(){return a(this,function(e){return[2,new Promise(function(e){var i=new Image;i.onload=function(){e()},i.src=t})]})})}function o(t){if(t&&t.img&&t.img.src)return t.img.src}function r(t){return s(this,void 0,void 0,function(){var e,i,r,s,u,h,c,p,d;return a(this,function(a){r=[],s=t.questions;try{for(u=l(s),h=u.next();!h.done;h=u.next())c=h.value,r=r.concat(o(c)||[]),"quiz"===t.type&&(p=c.correct,d=c.incorrect,r=r.concat(o(p)||[]),r=r.concat(o(d)||[]))}catch(t){e={error:t}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return[2,Promise.all(r.map(n))]})})}var s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(t){i=[6,t],r=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},l=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0}),e.preload=r},185:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version="3.2.4"},188:function(t,e,i){!function(t,e,i){"use strict";function n(){var e=this._elems,i=this._opts,n=i.attrs,o=i.cssClss,r=i.articleId,s=!1;Array.prototype.forEach.call(e.items,function(e,i){var a=t(e);a.attr(n.newsId)==r?(a.addClass(o.hidden),s=!0):s&&a.removeClass(2==i?o.hideLast:3==i?o.hidden:"")})}var o=i.Basic,r=o.getView,s=o.moduleOpts.setParams,a={cssSels:{Main:{items:".js-story-news__item"}},cssClss:{hidden:"hidden_all",hideLast:"hidden_small"},attrs:{articleId:"data-article-id",newsId:"data-news-id"},visibleCount:3};r(function(){return{_Init:function(){this._opts.articleId&&n.call(this)}}}(),a,null,"StorySection"),s("StorySection",{paramAttrs:{articleId:"data-article-id"}})}(window.jQuery||window.$,window,window.ru.mail.cpf)},19:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(35);e.init=n.init;var o=i(7);e.setConfig=o.setConfig;var r=i(21);e.registerComponent=r.registerComponent;var s=i(20);e.initAllComponents=s.initAllComponents,function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(42))},2:function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(36)),n(i(37))},20:function(t,e,i){"use strict";function n(t){var e=t.getAttribute(p.DOM_DATA_COMPONENT_STATE_ATTR)||"{}";try{return JSON.parse(e)||{}}catch(t){return d.print.warn('Unable to parse data "'+e+'"'),{}}}function o(t){var e=n(t);try{t.removeAttribute(p.DOM_DATA_COMPONENT_STATE_ATTR)}catch(t){d.print.warn('Unable to remove "'+p.DOM_DATA_COMPONENT_STATE_ATTR+'" attribute from node')}return e}function r(t){var e=/^([\w\.]+)\s+as\s+(\w+)$/gm,i=e.exec(t);return null!==i?{name:i[1].trim(),alias:i[2].trim()}:{name:t.trim(),alias:null}}function s(t,e){var i=r(e),n=i.name.split(c.COMPONENT_NS_DELIMITER),s=n[0],a=n.slice(1),l=f.getConfigCollapsed(i.name),p=h.getComponent(s);if(void 0===p)return d.print.warn("Component '"+s+"' was not found"),null;var m=o(t),_=m[s]||{},g=u.deepMerge({},l.initialState,_.state),y=u.deepMerge({},l.options,_.options);return new p(a.join(c.COMPONENT_NS_DELIMITER),y,g).mount(t).dispatch(i.alias||s)}function a(t){var e=t.getAttribute(p.DOM_DATA_COMPONENT_NAME_ATTR);if(!e)return[];for(var i=e.split(c.COMPONENT_DELIMITER),n=[],o=0,r=i;o<r.length;o++){var a=r[o],l=s(t,a);null!==l&&n.push(l)}return n}function l(t){if(!t)throw new Error("$root element not found");var e=t.querySelectorAll(p.DOM_DATA_COMPONENT_SEL),i=Array.prototype.slice.call(e);t.getAttribute(p.DOM_DATA_COMPONENT_NAME_ATTR)&&i.unshift(t);for(var n=[],o=0,r=i;o<r.length;o++){var s=r[o],l=a(s);n=n.concat(l)}return n}Object.defineProperty(e,"__esModule",{value:!0});var u=i(2),h=i(21),c=i(1),p=i(6),d=i(0),f=i(7);e.initComponents=a,e.initAllComponents=l},203:function(t,e,i){!function(t,e,i){"use strict";var n=e.localStorage||{},o=i.Basic,r=o.Extend,s=i.Tools.Auth,a=i.Tools.getTemplate,l={cssSels:{wrapper:".js-notice__wrapper",block:".js-notice",close:".js-notice__close"},cssClss:{show:"tooltip_shown"},storage:{root:"ru.mail.news.notice.comment",keys:{close:"lockTo",unique:"viewedTo",view:"viewed",list:"ids"}},timeouts:{lock:864e5,unique:864e5,hide:1e4,show:0},limits:{skip:1,views:2},autoHide:!0,canShowOnInit:null,template:a("ct-notifications-new-comment.xml")},u=o.getView(function(){function e(){var t=this._opts,e=this._state,i=t.storage,o=i.keys,r=e.storage={},s=n.getItem(i.root);s=s?JSON.parse(s):{},r[o.close]=s[o.close]||0,r[o.unique]=s[o.unique]||0,r[o.view]=s[o.view]||0,r[o.list]=s[o.list]||[]}function i(t,e){var i=this._opts,n=this._state,r=i.storage,s=i.timeouts,a=n.storage,l=r.keys[t];switch(t){case"close":e=n.timestamp+s.lock;break;case"unique":e=(new Date).getTime()+s.unique;break;case"view":e=void 0!==e?e:a[l]+1;break;case"list":e=void 0!==e?e:a[l].concat([n.id])}a[l]=e,o.call(this)}function o(){var t=this._state,e=this._opts.storage,i=t.storage;n.setItem(e.root,JSON.stringify(r(!0,{},i)))}function a(){var e=this._elems,i=this._opts,n=this._state,o=i.cssSels,r=i.template,s=n.data,a=t(r(s));(a||{}).length&&(e.block=a.is(o.block)?a:a.find(o.block),(e.block||{}).length||(e.block=a),a.appendTo((e.wrapper=t(o.wrapper)||{}).length?e.wrapper:document.body),a.on("click",o.close,p.bind(this)),n.rendered=!0)}function l(){var t=this._opts,e=this._state,i=t.timeouts,n=parseInt(i.show)||0,o=parseInt(i.hide)||0,r=c.bind(this,!0);e.rendered&&!e.started&&(n>0?setTimeout(r,n):r(),t.autoHide&&o&&(isNaN(parseInt(o))||setTimeout(c.bind(this,!1),o+n)),e.started=!0)}function u(){var t=this._opts,e=this._state,n=e.storage,o=t.storage.keys,r=e.timestamp,s=!1;return r<n[o.close]?s=!0:r<n[o.unique]?(i.call(this,"view",0),s=!0):n[o.list].indexOf(e.id)>-1?s=!0:n[o.view]>=t.limits.views&&(s=!0),s}function h(){var t=this._opts,e=this._state,i=e.storage,n=t.storage.keys,o=i[n.list].length,r=t.limits.skip;return!(0===r||o>1)||o%(1+r)==1}function c(t){var e=this._elems.block,i=this._opts.cssClss.show;(e||{}).length&&(e.toggleClass(i,t),this._trigger(t?"show":"hide"))}function p(t){t.preventDefault(),d.call(this)}function d(){c.call(this,!1),i.call(this,"close"),this._trigger("hide")}return{_Events:["show","hide","close"],_Init:function(t){if(t&&t.topicId){var n=this._opts,o=n.canShowOnInit,r=this._state={data:t,id:t.topicId,timestamp:(new Date).getTime()};if(e.call(this),u.call(this))return void(-1===r.storage[n.storage.keys.list].indexOf(r.id)&&i.call(this,"list"));"function"==typeof o&&o.call(this)||(i.call(this,"list"),h.call(this)&&s.onGetStatus(function(t){t!==r.data.author.email&&(a.call(this),i.call(this,"view"),r.storage[n.storage.keys.view]>=n.limits.views&&(i.call(this,"unique"),i.call(this,"list",[])),l.call(this))}.bind(this)))}}}}(),l,null,"Notice");r(!0,i,{Modules:{Notice:u}})}(window.jQuery||window.$,window,window.ru.mail.cpf)},207:function(t,e){!function(t,e,i,n){"use strict";var o=i.Basic.Constructors.getView,r={cssSels:{Main:{node:".js-stickypanel__container"}},cssClss:{state:[{base:"stickypanel__container",up:"stickypanel__container_up",down:"stickypanel__container_down"}]},raf:!0,horizontal:!1,getInitial:null,getNextState:null};o(function(){function i(t,e){return Object.keys(e).forEach(function(i){t.toggleClass(i,e[i])}),t}function o(t){return t?e.scrollX||document.documentElement.scrollLeft:e.scrollY||document.documentElement.scrollTop}function r(t){return t<0?a.UP:0===t?a.CENTER:t>0?a.DOWN:null}var s=t(e),a={UP:-1,CENTER:0,DOWN:1},l=function(){var t=this._State.dimensions,e=this._Elems.Parent,i=e.prev(),n=e.next(),o=i.get(0).getBoundingClientRect(),r=n.get(0).getBoundingClientRect();return this._Opts.horizontal?a.UP:o.bottom>s.height()-t.height?-1:r.top<t.height?1:0},u=function(){this._State.dimensions=this.getDimensions()},h=function(t){var e=this._Opts.cssClss.state[t],n={};n[e.base]=!1,n[e.up]=!1,n[e.down]=!1,i(this._Elems.node,n)},c=function(t){var e=this._State.state,n=this._Opts.cssClss.state[this._State.currentClassSet],o={};o[n.base]=!0,o[n.up]=e===a.UP,o[n.down]=e===a.DOWN,i(this._Elems.node,o),u.call(this),this._trigger("change",e,t)},p=function(){var t=this._Opts.getNextState||l,e=o(this._Opts.horizontal),i=+t.call(this,e),n=r(i);this._State.state!==n&&(this._State.state=n,c.call(this,e))},d=function(){this._Opts.raf?requestAnimationFrame(p.bind(this)):p.call(this)};return{_Events:["change"],_Handlers:{},changeClassSet:function(t){t!==this._State.currentClassSet&&(h.call(this,this._State.currentClassSet),this._State.currentClassSet=t,h.call(this,t),u.call(this),(this._Opts.getInitial||function(){}).call(this),this._State.state=null,d.call(this))},getDimensions:function(){return{width:this._Elems.node.width(),height:this._Elems.node.height()}},_Init:function(){if(null===this._Elems.node)return void(n&&e.console.warn('StickyPanel: node "'+this._opts.cssSels.Main.node+'" not found'));this._State={state:null,currentClassSet:0};var t=this._Opts.getInitial||function(){};u.call(this),t.call(this),s.on("resize",function(){u.call(this),t.call(this),d.call(this)}.bind(this)),s.on("scroll",d.bind(this)),d.call(this)}}}(),r,null,"StickyPanel")}(window.jQuery||window.$,window,window.ru.mail.cpf,window.DEBUG)},21:function(t,e,i){"use strict";function n(t){return(t.toString().match(/function (\w*)/)||[])[1]}function o(t){var e=t.registryName;if(!e){var i=n(t);throw new Error(s.format('Static property "registryName" is not defined for component "'+i+'"').error().str())}if(e in a)throw new Error(s.format("Component with name '"+e+"' is already registered").error().str());s.print.log('Registering "'+e+'"'),a[e]=t}function r(t){return a[t]}Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),a={};e.registerComponent=o,e.getComponent=r},22:function(t,e,i){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=i(23),r={templatesExt:".xml.js",templatesPath:"/bem",templatesNS:"fest"},s=function(){function t(){this._store=new o.Store("MPF_GLOBAL",r,this.dispatchStore.bind(this)),this._store.dispatch()}return t.prototype.dispatchStore=function(){},t.prototype.getState=function(){return this._store.read()},t.prototype.update=function(t){this._store.put(function(e){return n({},e,t)}),this._store.dispatch()},t}();e.ApplicationSettings=s,e.applicationSettings=new s},23:function(t,e,i){"use strict";function n(t){for(var e={},i={},n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];"@"===r.charAt(0)?e[r]=t[r]:i[r]=t[r]}return{component:i,shared:e}}var o=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=i(38),a=i(40),l=!1,u={},h=new s.Emitter,c=new a.DevToolsExtension,p=function(){function t(t,e,i){var s=this;this._id=t,this._events=[],this._EVENT_CHANGE="CHANGE:"+t,this._EVENT_INIT="INIT:"+t;var a=n(e).component;if(u[t])return void r.print.warn("'"+t+"' is already connected");this.bind(i),u[t]=a,h.emit(this._EVENT_INIT,u[t]),l&&(r.print.groups("Store ("+this._EVENT_INIT+")",{initial:[a]}),c.subscribe(this._id,function(t){var e=s.read(),i=JSON.parse(t.state)[s._id];h.emit(s._EVENT_CHANGE,i,e),u[s._id]=i}),c.send(this._EVENT_INIT,o({},u)))}return t.hasEntity=function(t){return t in u},t.prototype.destroy=function(){var t=this;this._events.forEach(function(e){h.removeListener(t._EVENT_CHANGE,e)}),l&&c.remove(this._id),delete u[this._id]},t.prototype.dispatch=function(){h.emit(this._EVENT_CHANGE,u[this._id])},t.prototype.put=function(t){var e=this.read(),i=t(this.read()),s=n(e).component,a=n(i).component,p=Object.keys(s),d=Object.keys(a);0===p.length&&0===d.length||(u[this._id]=a,h.emit(this._EVENT_CHANGE,a,e),l&&(r.print.groups("Store ("+this._EVENT_CHANGE+")",{prev:[e],next:[a]}),c.send(this._EVENT_CHANGE,o({},u))))},t.prototype.read=function(){var t=u[this._id];return o({},t)},t.prototype.bind=function(t){this._events.push(t),h.on(this._EVENT_CHANGE,t)},t}();e.Store=p},24:function(t,e,i){"use strict";function n(t){return"["+d.DOM_DATA_COMPONENT_EL_ATTR+'*="'+t+p.COMPONENT_EL_DELIMITER+'"]'}function o(t){return"["+d.DOM_DATA_COMPONENT_BIND_ATTR+'*="'+t+p.COMPONENT_DATA_BIND_DEF_DELIMITER+'"]'}function r(t){return function(t,e,i){}}function s(t,e,i){}var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=i(43),u=i(44),h=i(25),c=i(0),p=i(1),d=i(6);e.DOMEvent=r,e.DOMBind=s;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._events={},e}return a(e,t),Object.defineProperty(e.prototype,"$",{get:function(){if(!this._$root)throw new Error(c.format('Component "'+this.identity+'" not mounted').error().str());return this._$root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$elements",{get:function(){return this._collector.group(this.$,this.alias)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){null!==this._unbindEvents&&(this._unbindEvents(),this._unbindEvents=null),t.prototype.reset.call(this)},e.prototype.getElements=function(t){return this._collector.elements(this.$,t,this.alias)},e.prototype.mount=function(t){return this._$root||(this._$root=t),this},e.prototype.preDispatch=function(){var t=this;this._collector=new h.Collector(n(this.alias),d.DOM_DATA_COMPONENT_EL_ATTR);var e=u.eventsBinder(this.$,function(e){return t._collector.elements(t.$,e,t.alias)});this._unbindEvents=e(this._events),u.dataBinder(o(this.alias),d.DOM_DATA_COMPONENT_BIND_ATTR)(this,this._store.bind.bind(this._store),this.getState.bind(this))},e.prototype.postDispatch=function(){c.print.groups("Component ("+this.identity+")",{$:[this.$,this.$elements],options:[this.options],state:[this.getState()]})},e}(l.Component);e.DOMComponent=f},25:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=function(){function t(t,e){this.elSel=t,this.attrSel=e}return t.prototype.getName=function(t,e){var i=t.getAttribute(this.attrSel);return"string"==typeof i&&e?i.replace(""+e+n.COMPONENT_EL_DELIMITER,""):i},t.prototype.group=function(t,e){for(var i={},n=t.querySelectorAll(this.elSel),o=Array.prototype.slice.call(n),r=0,s=o;r<s.length;r++){var a=s[r],l=this.getName(a,e);null!==l&&(i[l]||(i[l]=[]),i[l]=i[l].concat(a))}return i},t.prototype.elements=function(t,e,i){var n=this,o=t.querySelectorAll(this.elSel);return Array.prototype.slice.call(o).filter(function(t){return n.getName(t,i)===e})},t}();e.Collector=o},26:function(t,e,i){"use strict";function n(t){var e,i=t.nodeName.toLowerCase(),n=a[i];return n&&void 0!==(e=n.getVal(t))?e:(e=t.value,"string"==typeof e?e.replace(/\r/g,""):null===e?void 0:e)}function o(t){throw new Error("to be done")}Object.defineProperty(e,"__esModule",{value:!0});var r=i(51),s=i(27),a={option:{getVal:function(t){var e=t.getAttribute("value");return null!==e?e:s.stripAndCollapse(s.getText(t))}},select:{getVal:function(t){for(var e=[],i=t.selectedIndex,o="select-one"===t.type,s=o?i+1:t.options.length,a=i<0?s:o?i:0;a<s;a++){var l=t.options[a],u=l.selected||a===i,h=l.disabled,c=l.parentNode,p=c.disabled,d=r.isNodeName(c,"optgroup");if(u&&!h&&(!p||!d)){var f=n(l);if(o)return f;e.push(f)}}return e},setVal:function(t,e){for(var i,n=[e],o=t.options.length;o--;){var r=t.options[o];(r.selected=-1!==n.indexOf(a.option.getVal(r)))&&(i=!0)}return i||(t.selectedIndex=-1),n}}};e.getValue=n,e.setValue=o},27:function(t,e,i){"use strict";function n(t){var e,i=t.nodeType,o="",r=0;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)o+=n(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)o+=n(e);return o}function o(t){return(t.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")}Object.defineProperty(e,"__esModule",{value:!0}),e.getText=n,e.stripAndCollapse=o},30:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(175);e.DEBUG=!1,e.prefixRangeAnswer="range_",e.errorRequired=function(){return"–í–æ–ø—Ä–æ—Å —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –æ—Ç–≤–µ—Ç–∞"},e.errorRange=function(t,e){return"–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç "+t+" –¥–æ "+e+" "+n.plural(e,["–≤–∞—Ä–∏–∞–Ω—Ç","–≤–∞—Ä–∏–∞–Ω—Ç–∞","–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤"])+" –æ—Ç–≤–µ—Ç–∞"},e.errorAtLeastOne=function(t){return"–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã "+t+" "+n.plural(t,["–≤–∞—Ä–∏–∞–Ω—Ç","–≤–∞—Ä–∏–∞–Ω—Ç–∞","–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤"])+" –æ—Ç–≤–µ—Ç–∞"},e.errorMinLength=function(t){return"–°–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å –º–∏–Ω–∏–º—É–º –∏–∑ "+t+" "+n.plural(t,["—Å–∏–º–≤–æ–ª–∞","—Å–∏–º–≤–æ–ª–æ–≤","—Å–∏–º–≤–æ–ª–æ–≤"])},e.errorMaxLength=function(t){return"–°–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å –º–∞–∫—Å–∏–º—É–º –∏–∑ "+t+" "+n.plural(t,["—Å–∏–º–≤–æ–ª–∞","—Å–∏–º–≤–æ–ª–æ–≤","—Å–∏–º–≤–æ–ª–æ–≤"])},e.errorLettersOnly=function(){return"–°–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã"},e.errorDigitsOnly=function(){return"–°–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã"},e.errorServer500=function(){return"–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –∏ –º—ã –¥–µ–ª–∞–µ–º –≤—Å—ë –≤–æ–∑–º–æ–∂–Ω–æ–µ –¥–ª—è –µ—ë –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É"}},305:function(t,e){!function(t,e,i){"use strict";var n=i.Basic,o=i.Mixins,r=n.getModel,s=n.Extend,a={urls:{subscribe:null,unsubscribe:null},transport:null,requestParams:{},storage:{options:{root:"ru.mail.newsletter",defaultKeySuffix:"subscribedChronicles"},subscribedChroniclesIds:"subscribedChronicles.ids",subscribedChroniclesEmail:"subscribedChronicles.email"}};r(function(){function t(t){var e=this._opts.storage;-1!==((this._storageTools=new i.Tools.LocalStorage(e.options)).getItem(e.subscribedChroniclesIds)||[]).indexOf(t.chronicle_id.toString())&&this.setState({is_subscribed:1})}function e(t){t=t||{};var e=this._opts,i=this._state,n=e.urls,o=this.isSubscribed(),r=o?n.unsubscribe:n.subscribe,a=s(!0,{},e.requestParams,t),l=e.transport||this.transport;i.loading||(i.loading=!0,this._trigger("loading"),r&&l({url:r,data:a,type:"POST"}).then(function(t){1===t.status&&t.data?(this.setState({loading:!1,email:t.email,chronicle_id:t.data.chronicle.id,chronicle_title:t.data.chronicle.title,chronicle_action:"pending",is_subscribed:1}),this._trigger("update")):this._trigger("error")}.bind(this),function(){i.loading=!1,this._trigger("error")}.bind(this)))}return{_Events:["loading","update","error"],_mixins:[o.transport],_Init:function(e){e=e||{},this._state={is_subscribed:0},t.call(this,e)},isSubscribed:function(){var t=this._state.is_subscribed;return void 0===t?null:1===t},toggle:function(t){e.call(this,t)},setState:function(t){this._state=s(this._state,t)},getState:function(){return s(!0,{},this._state)},update:function(t){var e=this._opts.storage,n=this._storageTools=new i.Tools.LocalStorage(e.options),o=n.getItem(e.subscribedChroniclesIds)||[];"reject"==t.chronicle_action?-1!==o.indexOf(t.chronicle_id.toString())&&(o=o.filter(function(e){return e!==t.chronicle_id.toString()}),n.setItem(o,!1,e.subscribedChroniclesIds),this.setState({is_subscribed:0,chronicle_action:t.chronicle_action,chronicle_id:t.chronicle_id})):"confirm"==t.chronicle_action&&this.setState({chronicle_action:t.chronicle_action,chronicle_id:t.chronicle_id}),this._trigger("update")}}}(),a,null,"NewsletterModel")}(window.jQuery||window.$,window,window.ru.mail.cpf)},306:function(t,e){!function(t,e,i){"use strict";var n=i.Basic.getView,o=i.Basic.moduleOpts.setParams,r=i.Types.String.Url.getParams,s=i.Tools.getTemplate,a={cssSels:{Main:{button:".js-newsletter__button",toggleElem:".js-newsletter__toggle"}},cssClss:{subscribed:"button_toggle"},paramName:null,toggleParent:!1,checkOnInit:!1,templates:{alert:s("ct-popup-alert.xml"),subscribe:s("ct-popup-chronicle-subscribe.xml")},texts:null};n(function(){function t(){var t=this._elems,e=this._opts.cssClss,i=this._model,n=t.toggleElem,o=i.isSubscribed();(n||{}).length&&null!==o&&n.toggleClass(e.subscribed,o)}return{_Events:["noAuth","checkUser"],_Handlers:{dom:{"submit:Main.form":function(){return function(t){t.preventDefault();var e=this._elems,i=this._opts,n=this._model,o=i.cssClss,r=e.input,s=r.find("input").val(),a=/^.+@[\\.\w-]+$/.test(s);if(r.toggleClass(o.inputInvalid,!a),a){var l={email:s};n.toggle(l)}}}()},model:{update:t}},_Init:function(){var i=this._opts,n=this._model,o=this._elems;if(o.toggleElem=i.toggleParent?o.parent:o.toggleElem,i.checkOnInit&&this._trigger("checkUser"),t.call(this),e.location.search){var s=e.location.origin+e.location.pathname,a=r(e.location.search);a&&a.hasOwnProperty(i.paramName)&&(n.update(a),e.history.replaceState(null,null,s))}}}}(),a,null,"NewsletterView"),o("NewsletterView",{acceptTypes:["NewsletterModel"]})}(window.jQuery||window.$,window,window.ru.mail.cpf)},308:function(t,e,i){"use strict";var n=i(207),o=(i.n(n),i(309));i.n(o)},309:function(t,e){!function(t,e,i){"use strict";var n=i.Basic.moduleOpts.setParams,o=(i.Tools.FuncTools.multi,i.Basic.Extend);!function(){var t;n("StickyPanel.TopButton",{options:{cssClss:{state:[{base:"sticky__inner",up:"hidden_all",down:"sticky__inner_bottom"}]},getInitial:function(){t||(t=this._elems.parent.get(0))},getNextState:function(){return t.getBoundingClientRect().top<0?1:-1}}})}(),n("StickyPanel.Rubric",{options:{cssClss:{state:[{base:"sticky__inner",up:"sticky__inner_top",down:"sticky__inner_bottom"}]}}}),n("StickyPanel.Card.AnchorMenu",function(){function i(t,e){return Object.keys(e).forEach(function(i){t.removeClass(e[i])}),t}function n(){if(void 0!==e.pageXOffset&&void 0!==e.pageYOffset)return{left:e.pageXOffset,top:e.pageYOffset};var t=document.documentElement||document.body.parentNode||document.body;return{left:t.scrollLeft,top:t.scrollTop}}function r(e){e=e||n().top;var i=this._opts,o=this._State.sizes,r=o.window.height,a=o.fullCont.el,l=this._elems.menu,u=o.items.el.filter(function(e,n){return t(n).hasClass(i.cssClss.activeItem)}),h=o.items.rects[u.data("anchor")],c=e-o.fullCont.offset.top+s.TOP,p=0,d={top:"",bottom:""};if(c>0){var f=o.mainWrapper.offset.top+o.mainWrapper.rect.height,m=f-e;p=-1,o.fullCont.rect.height<r?(d.top=s.TOP,o.fullCont.lastTop=d.top,o.fullCont.rect.height+s.TOP>m&&(d={top:"",bottom:s.BOTTOM},p=1)):m<r&&(d={top:"",bottom:s.BOTTOM},p=1)}return a.css(d),h&&l.scrollTop(h.offset.top-o.menu.offset.top),p}var s={TOP:20,BOTTOM:20};return{options:{cssSels:{Main:{menu:".js-stickypanel__menu",menuFullWrapper:".js-stickypanel__menu-wrapper_full",menuItem:".js-stickypanel__menu-item",menuItems:".reference-page__menu-inner",slot:".js-stickypanel__slot",article:".js-stickypanel__article",node:".js-stickypanel__menu-wrapper"},pageWrapper:".wrapper"},cssClss:{activeItem:"reference-page__menu-item_active",state:[{base:"",up:"sticky__inner_fixed",down:"sticky__inner_end"}]},onChange:function(t){},getInitial:function(){var n=this._State,a=this._elems,l=this._opts,u=l.cssSels,h=l.cssClss,c=h.activeItem,p=a.menuFullWrapper,d=a.node,f=a.menu,m=a.article,_=(a.slot,a.menuItems),g=c?a.menuItem:[],y=p.closest(u.pageWrapper),v=m.height();n.timer&&clearInterval(n.timer),n.timer=setInterval(function(){var i=m.height();v!==i&&t(e).trigger("resize")},500),p.height(v),d.width(p.width()),n.state=3,i(d,h.state[0]);var b=!n.sizes;b&&(n.sizes={menu:{el:f},fullCont:{el:d},pageWrapper:{el:y},mainWrapper:{el:p,offset:p.offset(),rect:p.get(0).getBoundingClientRect()},itemsWrapper:{el:_,rect:_.get(0).getBoundingClientRect()},slot:{},items:{el:g,rects:{}},window:{height:document.body.clientHeight}}),n.sizes.itemsWrapper.rect.height+s.TOP+s.BOTTOM>n.sizes.window.height&&(f.css("overflow","hidden"),f.height(n.sizes.window.height-s.TOP-s.BOTTOM)),n.sizes=o(!0,n.sizes,{menu:{offset:f.offset(),rect:f.get(0).getBoundingClientRect()},fullCont:{offset:p.offset(),rect:d.get(0).getBoundingClientRect()},pageWrapper:{rect:y.get(0).getBoundingClientRect()},mainWrapper:{rect:p.get(0).getBoundingClientRect()},itemsWrapper:{rect:_.get(0).getBoundingClientRect()},slot:{},window:{height:document.body.clientHeight}}),g.length&&g.each(function(e,i){var o=i.getAttribute("data-anchor"),r=t(i);n.sizes.items.rects[o]||(n.sizes.items.rects[o]={el:r}),n.sizes.items.rects[o].rect=i.getBoundingClientRect(),n.sizes.items.rects[o].offset=r.offset()}),b||r.call(this)},getNextState:function(t){return r.call(this,t)},raf:!1}}}())}(window.jQuery||window.$,window,window.ru.mail.cpf)},33:function(t,e,i){!function(t,e,i){"use strict";function n(t){if(t&&t.length){var i=c.trigger.bind(c,"resize");t.forEach(function(t){t in m&&m[t]()}),e.requestAnimationFrame(i),setTimeout(i,2e3)}}function o(t){var e;t=t.split("?")[0],-1===p.indexOf(t)&&(p.push(t),e=document.createElement("script"),e.type="text/javascript",e.setAttribute("defer","defer"),e.src=t+"?"+(Math.random()+"").split(".")[1],h.appendChild(e))}function r(t){return!(!t||!t.length)&&(!!t.is("iframe")||!!t.find("iframe").length)}function s(e,i,n){return new Promise(function(o,s){var a=n.closestParent?e.closest(n.closestParent):t(e.get(0).parentNode);setTimeout(function(){var t=_[i]||r,e={element:a.get(0),type:i};t(a)?o(e):s(e)},n.loadTimeout)})}function a(){var t=i.Basic.moduleOpts.get("ActivateEmbeds")||{};t.initializers&&(m=i.Basic.Extend(m,t.initializers))}function l(i,r){d||(a(),d=!0);var l=[],h=[],c=u(!0,{},f,r||{}),p=c.checkRawItems||{};return i.each(function(i,n){var r=n.getAttribute("data-type");if(!p[r]||!1!==p[r](n,r)){var a=t(),u=n.value.replace(/__text_area__/g,"textarea"),d=t(n),f=[];t(u).each(function(e,i){var n;"SCRIPT"===i.tagName?i.src?o(i.src):(n=document.createElement("script"),n.type="text/javascript","textContent"in n?n.textContent=i.textContent:n=['<script type="text/javascript">',t(i).html(),"<\/script>"].join(""),f.push(n)):a=a.add(i)}),-1===l.indexOf(r)&&l.push(r),h.push(s(d,r,c).catch(function(t){})),d.replaceWith(a),f.length&&f.forEach(function(t){document.head.appendChild(t)}),e.requestAnimationFrame(a.trigger.bind(a,"documentHeightChange"))}}),e.requestAnimationFrame(n.bind(this,l)),h}var u=i.Basic.Extend,h=t("head")[0],c=t(e),p=[],d=!1,f={loadTimeout:5e3,closestParent:null,checkRawItems:function(){var t=function(t){var i=e.Modernizr;return!i||("boolean"!=typeof i[t]||i[t])},i=function(e){var i=t("webaudio");return i||e.parentNode.removeChild(e),i};return{soundcloud:i,rutube:i}}()},m={instagram:function(t){e.instgrm&&e.instgrm.Embeds&&e.instgrm.Embeds.process(t)},facebook:function(t){e.FB&&e.FB.XFBML&&e.FB.XFBML.parse(t)},twitter:function(t){e.twttr&&e.twttr.widgets&&e.twttr.widgets.load(t)}},_={various:function(){return!0}};e.getNameSpace("Tools",i,!0).activateEmbeds=l}(window.jQuery||window.$,window,window.ru.mail.cpf)},34:function(t,e){!function(t,e,i){"use strict";var n=i.Basic,o=n.throttle,r=i.Tools.activateEmbeds,s=t(e),a=/iphone|ipod/i.test(navigator.userAgent),l={SCROLL:"scroll",CUSTOM_SCROLL:"touchend"},u=l.SCROLL,h={cssSels:{item:".js-wysiwyg__embedcode"},scrollLimit:400,loadTimeout:5e3,failHandler:null,checkRawItems:{}},c=function(){if(t(this._Elems.Parent).is(":visible")){var e,i=this._state.winSizes.height+this._Opts.scrollLimit;this._state.items.forEach(function(n){n.getBoundingClientRect().top<i&&(e=(e||t()).add(n))}),e&&this.initItemsCode(e)}},p=function(){this._state.winSize=d(),e.requestAnimationFrame(c.bind(this))},d=function(){var t=e.document.documentElement;return{height:t.clientHeight,width:t.clientWidth}},f=function(t){var e,i=this._state;i.areListernersActive!==t&&(i.areListernersActive=t,t?(e="on",i.handlers={resize:o(p.bind(this),100),scroll:o(c.bind(this),100)}):e="off",s[e]("resize",i.handlers.resize),s[e](u,i.handlers.scroll))},m=function(t){var e=this._state.items;t.each(function(t,i){var n=e.indexOf(i);-1!==n&&e.splice(n,1)})},_=function(){return{loadTimeout:this._Opts.loadTimeout,checkRawItems:this._Opts.checkRawItems||{}}},g=n.Constructors.getView({_Init:function(){this._state={items:[],winSizes:d(),handlers:{}},a&&"ru.mail.media.parallaxSlot"in e&&(u=l.CUSTOM_SCROLL),this.processItems(),this._state.items.length&&s.on("load",o(p.bind(this),100))},processItems:function(t){var e=this._state,i=t||this._Elems.Parent,n=this._Opts.cssSels.item,o=i.find(n).removeClass(n.slice(1));e.items=e.items.concat(Array.prototype.slice.call(o)),e.items.length&&(f.call(this,!0),c.call(this))},initItemsCode:function(t){var e=this._Opts.failHandler,i=r(t,_.call(this));m.call(this,t),this._state.items.length||f.call(this,!1),"function"==typeof e&&(e=e.bind(this),i.forEach(function(t){t.then(null,e)}))}},h,null,"MediaEmbeds");e.getNameSpace("Modules",i).MediaEmbeds=g}(window.jQuery||window.$,window,window.ru.mail.cpf)},35:function(t,e,i){"use strict";function n(t){return new Promise(function(e,i){return l?(r.print.warn("MPF is already started"),e()):(t&&a.applicationSettings.update(t),l=!0,s.resolveConfigSetters().then(function(t){var i=function(){r.print.info("MPF init. Env: production"),o.initAllComponents(document.body),e()};"loading"!==document.readyState?i():document.addEventListener("DOMContentLoaded",i)}))})}Object.defineProperty(e,"__esModule",{value:!0});var o=i(20),r=i(0),s=i(7),a=i(22),l=!1;e.init=n},36:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i={},s=0,a=t;s<a.length;s++){var l=a[s];if("object"===n(l)&&null!==l)for(var u=Object.keys(l),h=0,c=u;h<c.length;h++){var p=c[h],d=l[p];if(d instanceof Date){var f=new Date;f.setTime(d.getTime()),i[p]=f}else d instanceof RegExp?i[p]=new RegExp(d):Array.isArray(d)?i[p]=Array.prototype.concat.call([],d):r(d)?i[p]=o(i[p],d):i[p]=d}}return i}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return null!==t&&void 0!==t&&"object"===n(t)&&!(t instanceof Promise)};e.deepMerge=o},37:function(t,e,i){"use strict";function n(t,e){return function e(i,n){if(0===n.length)return i!==t?i:null;var o=i[n[0]];return null===o||void 0===o?null:e(o,n.slice(1))}(t,e)}function o(t,e,i){return function t(e,i,n){return 1===i.length?(e[i[0]]=n,e[i[0]]):(null!==e[i[0]]&&void 0!==e[i[0]]||(e[i[0]]=e[i[0]]||{}),t(e[i[0]],i.slice(1),n))}(t,e,i),t}Object.defineProperty(e,"__esModule",{value:!0}),e.getIn=n,e.setIn=o},38:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(39),r=function(t){function e(){var e=t.call(this)||this;return e.emit("ready"),e}return n(e,t),e}(o.EventEmitter);e.Emitter=r},39:function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function o(t){return"number"==typeof t}function r(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,o,a,l,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(i=this._events[t],s(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(r(i))for(a=Array.prototype.slice.call(arguments,1),u=i.slice(),o=u.length,l=0;l<o;l++)u[l].apply(this,a);return!0},i.prototype.addListener=function(t,e){var o;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(o=s(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function i(){this.removeListener(t,i),o||(o=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var o=!1;return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var i,o,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],s=i.length,o=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(i)){for(a=s;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){o=a;break}if(o<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],n(i))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},40:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(41))},41:function(t,e,i){"use strict";function n(){return __REDUX_DEVTOOLS_EXTENSION__.connect()}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof __REDUX_DEVTOOLS_EXTENSION__,r=function(){function t(){var t=this;this.subscriptions={},o&&(this.devTools=n(),this.devTools.subscribe(function(e){if("DISPATCH"===e.type&&"JUMP_TO_STATE"===e.payload.type)for(var i=0,n=Object.keys(t.subscriptions);i<n.length;i++){var o=n[i];t.subscriptions[o](e)}}))}return t.prototype.subscribe=function(t,e){var i="handler_"+t;this.subscriptions[i]||(this.subscriptions[i]=e)},t.prototype.send=function(t,e){o&&this.devTools&&this.devTools.send(t,e)},t.prototype.remove=function(t){delete this.subscriptions["handler_"+t]},t}();e.DevToolsExtension=r},42:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(24);e.DOMComponent=n.DOMComponent,function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(47))},43:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(1),r=i(23),s=0,a=function(){function t(t,e,i){void 0===e&&(e={}),void 0===i&&(i={}),this._ns=t,this._id=++s,this._options=n.deepMerge({},this.getDefaultOptions(),e),this._initialState=n.deepMerge({},this.getInitialState(),i)}return t.prototype.init=function(){},t.prototype.getDefaultOptions=function(){return{}},t.prototype.getInitialState=function(){return{}},Object.defineProperty(t.prototype,"alias",{get:function(){var t=this.constructor;return this._alias||t.registryName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this._ns?""+this.alias+o.COMPONENT_NS_DELIMITER+this._ns:this.alias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identity",{get:function(){return""+this.ns+o.COMPONENT_NS_DELIMITER+this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.getState()},enumerable:!0,configurable:!0}),t.prototype.setState=function(t){return this._store.put(t)},t.prototype.getState=function(){return this._store.read()},t.prototype.update=function(t,e){},t.prototype.canDispatch=function(){return!r.Store.hasEntity(this.identity)},t.prototype.dispatchStore=function(t,e){this.shouldUpdate(t,e)&&this.update(t,e)},t.prototype.shouldUpdate=function(t,e){return!0},t.prototype.reset=function(){this._store.destroy(),this.dispatch(this._alias)},t.prototype.preDispatch=function(){},t.prototype.postDispatch=function(){},t.prototype.dispatch=function(t){return this.canDispatch()&&(this._alias=t,this._store=new r.Store(this.identity,this._initialState,this.dispatchStore.bind(this)),this.preDispatch(),this._store.dispatch(),this.postDispatch(),this.init()),this},t}();e.Component=a},44:function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(45)),n(i(46))},45:function(t,e,i){"use strict";function n(t,e){return t.split(e).map(function(t){return t.trim()})}function o(t,e){var i=new RegExp(e+"\\"+u.COMPONENT_DATA_BIND_DEF_DELIMITER,"g");return t.replace(i,"")}function r(t,e){return function(i){if(t in h.DOM_ELEMENT_PROPERTIES)i[t]=e;else if(t in h.DOM_ELEMENT_ATTRIBUTES)switch(h.DOM_ELEMENT_ATTRIBUTES[t]){case h.MPFAttributeType.BOOLEAN:e?i.setAttribute(t,t):i.removeAttribute(t);break;case h.MPFAttributeType.STRING:i.setAttribute(t,e)}else i.setAttribute(t,e)}}function s(t,e){var i=new a.Collector(t,e);return function(t,e,s){e(function(){for(var e=i.group(t.$,t.alias),a=Object.keys(e),h=0,c=a;h<c.length;h++)for(var p=c[h],d=o(p,t.alias),f=n(d,u.COMPONENT_DATA_BIND_PROP_DELIMITER),m=0,_=f;m<_.length;m++){var g=_[m],y=n(g,u.COMPONENT_DATA_BIND_EQ),v=y[0],b=y[1];if("function"!=typeof t[b])l.print.warn("Method '"+b+"' not found in '"+t.alias+"' for key '"+p+"'");else{var w=e[p],P=t[b].bind(t),T=s(),L=P(T);w.forEach(r(v,L))}}})}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(25),l=i(0),u=i(1),h=i(6);e.dataBinder=s},46:function(t,e,i){"use strict";function n(t){for(var e=Object.keys(t),i={},n=0,o=e;n<o.length;n++){var s=o[n],a=s.split(r.COMPONENT_EVENT_DELIMITER),l=a[0],u=a[1];i[l]||(i[l]=[]);var h={name:u,handler:t[s]};i[l]=i[l].concat(h)}return i}function o(t,e){var i={};return function(o){for(var r=n(o),a=Object.keys(r),l=0,u=a;l<u.length;l++){var h=u[l];!function(n){var o=function(i){for(var o=0,s=r[n];o<s.length;o++){var a=s[o],l=a.name,u=a.handler,h=i.target;if(null===h)return;for(var c=e(l);h!==t;){if(-1!==c.indexOf(h))return void u(i);h=h.parentNode}}},a=-1!==s.indexOf(n);t.addEventListener(n,o,a),i[n]={unbind:function(){t.removeEventListener(n,o)}}}(h)}return function(){for(var t=Object.keys(i),e=0,n=t;e<n.length;e++){var o=n[e];i[o].unbind(),delete i[o]}}}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),s=["focus","blur"];e.eventsBinder=o},47:function(t,e,i){"use strict";function n(t){return window[t]}function o(t){return Promise.resolve(t)}function r(t,e){var i=e||{},o=u.applicationSettings.getState(),r=o.templatesPath,s=o.templatesNS,a=o.templatesExt;if(!r)throw new Error(l.format('Invalid application settings: "templatesPath"').error().str());if(!s)throw new Error(l.format('Invalid application settings: "templatesNS"').error().str());var p=i.getName,d=i.getPath,f="function"==typeof p?p(t):c.getName(t),m="function"==typeof d?d(r,t,a):c.getPath(r,t,a);if(h[m])return h[m];var _=new Promise(function(t,e){var i=n(s);if(i&&i[f])return t(i[f]);var o=document.createElement("script");o.async=!0,o.type="text/javascript",o.src=m,o.addEventListener("load",function(){i&&i[f]?t(i[f]):e(new Error(l.format('Unable to read template "'+f+'"').error().str()))}),o.addEventListener("error",function(){e(new Error(l.format('Unable to load template from "'+f+'"').error().str()))}),document.head.appendChild(o)});return h[m]=_,_.then(function(t){return delete h[m],t})}var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=i(24),l=i(0),u=i(22),h={},c={getPath:function(t,e,i){return t+"/"+e+"/"+e+i},getName:function(t){return t+".xml"}};e.resolveTemplate=function(t,e){return function(){return"function"==typeof t?o(t):"string"==typeof t?r(t,e):Promise.reject(new Error(l.format("Invalid template").error().str()))}};var p=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return s(i,t),i.prototype.update=function(e,i){var n=this;t.prototype.update.call(this,e,i),(0,this.options.template)().then(function(t){var e=n.getState();n.render(t,e)}).catch(function(t){l.print.warn(t.message)})},i.prototype.render=function(t,e){var i=t(e);this.$.innerHTML=i},i.getTemplate=e.resolveTemplate,i}(a.DOMComponent);e.TemplateComponent=p},48:function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(49)),n(i(50)),n(i(26)),n(i(27)),n(i(52))},49:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=[],r=0,s=t;r<s.length;r++){var a=s[r];if(a){var l=n(a);if("string"===l||"number"===l)i.push(""+a);else if(Array.isArray(a))i=i.concat(o.apply(void 0,a));else for(var u=0,h=Object.keys(a);u<h.length;u++){var c=h[u],p=a[c];p&&i.push(""+c)}}}return i}Object.defineProperty(e,"__esModule",{value:!0}),e.classNames=o},50:function(t,e,i){"use strict";function n(t){return Array.from(t.elements).reduce(function(t,e){var i=e,n=i.name,o=i.nodeName,r=i.type,a=i.checked,l=null!==e.getAttribute("disabled"),u=/^(?:input|select|textarea|keygen)/i.test(o),h=/^(?:submit|button|image|reset|file)$/i.test(r),c=a||!/^(?:checkbox|radio)$/i.test(r);if(n&&!l&&u&&!h&&c){var p=s.getValue(e);if(null===p)return t;if(Array.isArray(p)){var d=p.map(function(t){return{name:n,value:t.replace(/\r?\n/g,"\r\n")}});return t.concat(d)}return t.concat({name:n,value:(p||"").replace(/\r?\n/g,"\r\n")})}return t},[])}function o(t){for(var e=n(t),i={},o=0,r=e;o<r.length;o++){var s=r[o];i[s.name]||(i[s.name]=[]),i[s.name]=i[s.name].concat(s.value)}return i}function r(t){return n(t).map(function(t){var e=t.name,i=t.value;return encodeURIComponent(e)+"="+encodeURIComponent(null===i?"":i)}).join("&")}Object.defineProperty(e,"__esModule",{value:!0});var s=i(26);e.serializeArray=n,e.serializeObject=o,e.serializeStr=r},51:function(t,e,i){"use strict";function n(t,e){return!!t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeName=n},52:function(t,e,i){"use strict";function n(t,e,i){void 0===i&&(i={}),i=Object.assign({},o,i);var n;try{n=new Event(t,i)}catch(e){var r=i.bubbles,s=i.cancelable;n=document.createEvent("Event"),n.initEvent(t,r,s)}e.dispatchEvent(n)}Object.defineProperty(e,"__esModule",{value:!0});var o={bubbles:!1,cancelable:!1,composed:!1};e.triggerCustomEvent=n},555:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(i(308),i(556),i(558),i(560),i(561),i(563),i(95)),o=(i.n(n),i(188)),r=(i.n(o),i(203)),s=(i.n(r),i(565));i.n(s)},556:function(t,e,i){"use strict";var n=i(62),o=(i.n(n),i(88)),r=(i.n(o),i(89)),s=(i.n(r),i(90)),a=(i.n(s),i(557));i.n(a)},557:function(t,e){!function(t,e,i,n){"use strict";var o=i.Basic.moduleOpts.setParams;o("MapView",{options:{}}),o("MapLeafletView",{options:{getGeoObjectParams:function(t){return t.type_event?this._opts.types["type"+t.type_event]:{}},geoObjectDefaults:{weight:3,color:"#f58c70",lineCap:"round",opacity:1},types:{type1:{icon:{iconUrl:"/img/map/1x/map-marker-burst.png",iconRetinaUrl:"/img/map/2x/map-marker-burst.png?@2X=2014.03.06",iconSize:[44,44],iconAnchor:[22,22],popupAnchor:[0,-10]}},type2:{icon:{iconUrl:"/img/map/1x/map-marker-airplane.png",iconRetinaUrl:"/img/map/2x/map-marker-airplane.png?@21X=2014.04.02",iconSize:[44,44],iconAnchor:[22,22],popupAnchor:[0,-10]}},type3:{icon:{iconUrl:"/img/map/1x/map-marker-flood.png",iconRetinaUrl:"/img/map/2x/map-marker-flood.png",iconSize:[44,44],iconAnchor:[22,22],popupAnchor:[0,-10]}},type4:{icon:{iconUrl:"/img/map/1x/map-marker-event-small.png",iconRetinaUrl:"/img/map/2x/map-marker-event-small.png",iconSize:[10,10],iconAnchor:[5,5],popupAnchor:[0,-3]}},type5:{icon:{iconUrl:"/img/map/1x/map-marker-event-mid.png",iconRetinaUrl:"/img/map/2x/map-marker-event-mid.png",iconSize:[26,26],iconAnchor:[13,13],popupAnchor:[0,-8]}},type6:{icon:{iconUrl:"/img/map/1x/map-marker-event-big.png",iconRetinaUrl:"/img/map/2x/map-marker-event-big.png",iconSize:[44,44],iconAnchor:[22,22],popupAnchor:[0,-10]}},type7:{color:"#f58c70"},type8:{color:"#ffbc00"},type9:{color:"#6bbedd"},type10:{color:"#f06eaa"},type11:{color:"#f58c70",dashArray:"5 15"}}}})}(window.jQuery||window.$,window,window.ru.mail.cpf,window.Terraformer)},558:function(t,e,i){"use strict";var n=i(33),o=(i.n(n),i(34)),r=(i.n(o),i(92)),s=(i.n(r),i(559));i.n(s)},559:function(t,e){!function(t,e,i){"use strict";(0,i.Basic.moduleOpts.setParams)("Slider.EmbedList",{options:{_plugins:["EmbedList"],cssClss:{animatedControl:"control_animated"},embedTypesToWatch:["vk_post","facebook"]}})}(window.jQuery||window.$,window,window.ru.mail.cpf)},560:function(t,e,i){"use strict";var n=i(69);i.n(n)},561:function(t,e,i){"use strict";i(562)},562:function(t,e,i){"use strict";function n(t){(new Image).src=t+"?r="+Math.round(1e11*Math.random())}var o=i(19),r=(i.n(o),i(167)),s=(i.n(r),window.ru.mail.cpf),a=window,l=a.$;Object(o.setConfig)("SurveyComponent",{options:{template:o.TemplateComponent.getTemplate(s.Tools.getTemplate("ct-survey.xml")),onFinish:function(t,e){s.Tools.initModules(l(e));var i=e.getAttribute("data-finish-pixel-url");"done"==t.currentState&&i&&n(i)}}}),Object(o.init)({templatesNS:"fest"})},563:function(t,e,i){"use strict";var n=i(305),o=(i.n(n),i(306)),r=(i.n(o),i(564));i.n(r)},564:function(t,e){!function(t,e,i){"use strict";function n(e){var i=this._opts,n=i.templates.alert;n&&e&&(this._alertPopup=new l(null,t(n(e))),this._alertPopup.show())}function o(){var t=this._opts,e=this._elems,i=this._model,o=i.getState(),r=i._storageTools,s=i._opts.storage,l={},u=o.chronicle_id.toString();if("pending"==o.chronicle_action){var h=r.getItem(s.subscribedChroniclesIds)||[];a(h,"array")||h.split(","),h.push(u),r.setItem(h,!0,s.subscribedChroniclesIds),r.setItem(o.email,!0,s.subscribedChroniclesEmail),l={title:"–†–∞—Å—Å—ã–ª–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π —Ç–µ–º—ã",text:"<p>–í—ã —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–ø–∏—Å–∞–ª–∏—Å—å –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ —Ç–µ–º–µ:</p><p><strong>"+o.chronicle_title+".</strong></p><p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤–æ—é –ø–æ—á—Ç—É –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Ä–∞—Å—Å—ã–ª–∫—É</p>"}}else"confirm"==o.chronicle_action?l={title:"–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏",text:"<p>–ü–æ–¥–ø–∏—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞</p>"}:"reject"==o.chronicle_action&&(l={title:"–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏",text:"<p>–í—ã —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø–∏—Å–∞–ª–∏—Å—å –æ—Ç —Ä–∞—Å—Å—ã–ª–∫–∏</p>"});e.parent.toggleClass(t.cssClss.subscribed,i.isSubscribed()),n.call(this,l)}var r=i.Basic,s=r.moduleOpts.setParams,a=r.typeOf,l=r.Constructors._repo.get("Popup");s("NewsletterView",{options:{cssSels:{Main:{form:".js-newsletter__form",input:".js-newsletter__input"}},cssClss:{subscribed:"hidden",inputInvalid:"error"}}}),s("NewsletterView.Chronicle",{options:{_Handlers:{model:{update:o}},paramName:"chronicle_action",toggleParent:!0}})}(window.jQuery||window.$,window,window.ru.mail.cpf)},565:function(t,e){!function(t,e){"use strict";var i=e.Basic.moduleOpts.setParams,n=e.Tools.PubSub;i("PhotoStories.Article",{options:{useBanner:!1,_Handlers:{slide:function(){n.publish("fixedPanel_update_slot")}}}})}(window,window.ru.mail.cpf)},59:function(t,e,i){"use strict";function n(t,e){return e.filter(function(e){return""+e.id==""+t})[0]}function o(t,e){return e.filter(function(e){return e.id in t&&"0"!==t[e.id]})}function r(t,e){var i=-1;return(t||[]).some(function(t,n){var o=e(t);return o&&(i=n),o}),i}function s(t,e){var i=""+t;return r(e,function(t){return""+t.id===i})}function a(t,e){return(t||[]).reduce(function(t,i){return t[i]=e,t},{})}Object.defineProperty(e,"__esModule",{value:!0}),e.findItem=n,e.findItems=o,e.findIndex=r,e.itemIndex=s,e.mapToDict=a},6:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DOM_DATA_COMPONENT_SEL="[data-mp]",e.DOM_DATA_COMPONENT_NAME_ATTR="data-mp",e.DOM_DATA_COMPONENT_EL_ATTR="data-mp-el",e.DOM_DATA_COMPONENT_STATE_ATTR="data-mp-state",e.DOM_DATA_COMPONENT_BIND_ATTR="data-mp-bind";var n;!function(t){t[t.STRING=0]="STRING",t[t.BOOLEAN=1]="BOOLEAN",t[t.NUMERIC=2]="NUMERIC"}(n=e.MPFProperty||(e.MPFProperty={}));var o;!function(t){t[t.STRING=0]="STRING",t[t.BOOLEAN=1]="BOOLEAN"}(o=e.MPFAttributeType||(e.MPFAttributeType={})),e.DOM_ELEMENT_ATTRIBUTES={required:o.BOOLEAN,checked:o.BOOLEAN,disabled:o.BOOLEAN,selected:o.BOOLEAN},e.DOM_ELEMENT_PROPERTIES={alt:n.STRING,id:n.STRING,name:n.STRING,innerHTML:n.STRING,src:n.STRING,style:n.STRING,textContent:n.STRING,title:n.STRING,for:n.STRING,value:n.STRING,colspan:n.NUMERIC,height:n.NUMERIC,maxlength:n.NUMERIC,rowspan:n.NUMERIC,width:n.NUMERIC}},60:function(t,e,i){"use strict";function n(t,e){return"q_"+t+(e?"_":"")}function o(t,e,i){var n=h(t,e,i);if(!n)return l.log("–Ω–µ –Ω–∞—à–ª–∏ nextId"),null;var r=s.findItem(n,e);return r?a.checkIfCanShowQuestion(r,i)?r:o(s.itemIndex(r.id,e),e,i):(l.log("–Ω–µ –Ω–∞—à–ª–∏ –≤–æ–ø—Ä–æ—Å —Å id "+n),null)}function r(t){return t.reduce(function(t,e){return e.answers&&(e.answersById=r(e.answers)),t[e.id]=e,t},{})}Object.defineProperty(e,"__esModule",{value:!0});var s=i(59),a=i(178),l=i(61),u=function(t){return!!t&&(!Array.isArray(t)||0!==t.length)},h=function(t,e,i){if(e.length===t+1)return"";var o=e[t],r=o.answers,s=o.id,a=o.options;if(a){var h=a.next;if(h&&u(i[n(s,!0)]))return l.log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–∞–ª —Å–≤–æ–π –æ—Ç–≤–µ—Ç, –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ—Ö–æ–¥–∏–º —Å—é–¥–∞:",h),h}var c=i[n(s)];if(c){var p,d=Array.isArray(c);if(r.some(function(t){var e=t.next,i=t.id,n=d?-1!==c.indexOf(""+i):!(!e||!c[i]);return n&&(p=e),n}),p)return l.log("–ù–∞—à–ª–∏ —Å–ª–µ–¥—É—é—â–∏–π id –≤ –æ–ø—Ü–∏—è—Ö –æ—Ç–≤–µ—Ç–æ–≤:",p),p}var f=e[t+1].id;return l.log("–ë–µ—Ä–µ–º —Å–ª–µ–¥—É—é—â–∏–π –ø–æ –ø–æ—Ä—è–¥–∫—É –≤–æ–ø—Ä–æ—Å:",f),f};e.createQuestionKey=n,e.findNextQuestion=o,e.mapToDictById=r},61:function(t,e,i){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.DEBUG&&console.log.apply(console,r([">>>"],t))}var o=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},r=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var s=i(30);e.log=n},62:function(t,e,i){(function(t){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}/*! Terraformer JS - 1.0.4 - 2014-05-22
*   https://github.com/esri/Terraformer
*   Copyright (c) 2014 Environmental Systems Research Institute, Inc.
*   Licensed MIT */
!function(n,o){"object"==i(t)&&"object"==i(t.exports)&&(e=t.exports=o()),"object"==("undefined"==typeof window?"undefined":i(window))&&(n.Terraformer=o())}(window,function(){function t(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(){var t=Array.prototype.slice.apply(arguments);void 0!==("undefined"==typeof console?"undefined":i(console))&&console.warn&&console.warn.apply(console,t)}function n(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function o(t){if(t.type)switch(t.type){case"Point":return[t.coordinates[0],t.coordinates[1],t.coordinates[0],t.coordinates[1]];case"MultiPoint":case"LineString":return a(t.coordinates);case"MultiLineString":case"Polygon":return r(t.coordinates);case"MultiPolygon":return s(t.coordinates);case"Feature":return t.geometry?o(t.geometry):null;case"FeatureCollection":return l(t);case"GeometryCollection":return u(t);default:throw new Error("Unknown type: "+t.type)}return null}function r(t){for(var e=null,i=null,n=null,o=null,r=0;r<t.length;r++)for(var s=t[r],a=0;a<s.length;a++){var l=s[a],u=l[0],h=l[1];null===e?e=u:e>u&&(e=u),null===i?i=u:u>i&&(i=u),null===n?n=h:n>h&&(n=h),null===o?o=h:h>o&&(o=h)}return[e,n,i,o]}function s(t){for(var e=null,i=null,n=null,o=null,r=0;r<t.length;r++)for(var s=t[r],a=0;a<s.length;a++)for(var l=s[a],u=0;u<l.length;u++){var h=l[u],c=h[0],p=h[1];null===e?e=c:e>c&&(e=c),null===i?i=c:c>i&&(i=c),null===n?n=p:n>p&&(n=p),null===o?o=p:p>o&&(o=p)}return[e,n,i,o]}function a(t){for(var e=null,i=null,n=null,o=null,r=0;r<t.length;r++){var s=t[r],a=s[0],l=s[1];null===e?e=a:e>a&&(e=a),null===i?i=a:a>i&&(i=a),null===n?n=l:n>l&&(n=l),null===o?o=l:l>o&&(o=l)}return[e,n,i,o]}function l(t){for(var e,i=[],n=t.features.length-1;n>=0;n--)e=o(t.features[n].geometry),i.push([e[0],e[1]]),i.push([e[2],e[3]]);return a(i)}function u(t){for(var e,i=[],n=t.geometries.length-1;n>=0;n--)e=o(t.geometries[n]),i.push([e[0],e[1]]),i.push([e[2],e[3]]);return a(i)}function h(t){var e=o(t);return{x:e[0],y:e[1],w:Math.abs(e[0]-e[2]),h:Math.abs(e[1]-e[3])}}function c(t){return t*W}function p(t){return t*q}function d(t,e){for(var n=0;n<t.length;n++)"number"==typeof t[n][0]&&(t[n]=e(t[n])),"object"==i(t[n])&&(t[n]=d(t[n],e));return t}function f(t){var e=t[0],i=t[1];return[c(e/G)-360*Math.floor((c(e/G)+180)/360),c(Math.PI/2-2*Math.atan(Math.exp(-1*i/G)))]}function m(t){var e=t[0],i=Math.max(Math.min(t[1],89.99999),-89.99999);return[p(e)*G,G/2*Math.log((1+Math.sin(p(i)))/(1-Math.sin(p(i))))]}function _(t,e,i){if("Point"===t.type)t.coordinates=e(t.coordinates);else if("Feature"===t.type)t.geometry=_(t.geometry,e,!0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)t.features[n]=_(t.features[n],e,!0);else if("GeometryCollection"===t.type)for(var o=0;o<t.geometries.length;o++)t.geometries[o]=_(t.geometries[o],e,!0);else t.coordinates=d(t.coordinates,e);return i||e===m&&(t.crs=$),e===f&&delete t.crs,t}function g(t){return _(t,m)}function y(t){return _(t,f)}function v(t,e){return t[0]>e[0]?-1:t[0]<e[0]?1:t[1]>e[1]?-1:t[1]<e[1]?1:0}function b(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0])}function w(t){var e,i,n=0,o=[];for(t=t.sort(v),e=0;e<t.length;++e){for(;n>=2&&b(o[n-2],o[n-1],t[e])<=0;)--n;o[n++]=t[e]}for(e=t.length-2,i=n+1;e>=0;--e){for(;n>=i&&b(o[n-2],o[n-1],t[e])<=0;)--n;o[n++]=t[e]}return o}function P(t){for(var e,i=0;i<t.length-3;i++){var n=t[i],o=t[i+1],r=t[i+2],s=[o[0]-n[0],o[1]-n[1]],a=r[0]*s[1]-r[1]*s[0]+s[0]*n[1]-s[1]*n[0];if(0===i)e=0>a;else if(e&&a>0||!e&&0>a)return!1}return!0}function T(t,e){for(var i=!1,n=-1,o=t.length,r=o-1;++n<o;r=n)(t[n][1]<=e[1]&&e[1]<t[r][1]||t[r][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[r][0]-t[n][0])*(e[1]-t[n][1])/(t[r][1]-t[n][1])+t[n][0]&&(i=!i);return i}function L(t,e){if(t&&t.length){if(1===t.length)return T(t[0],e);if(T(t[0],e)){for(var i=1;i<t.length;i++)if(T(t[i],e))return!1;return!0}return!1}return!1}function E(t,e,i,n){var o=(n[0]-i[0])*(t[1]-i[1])-(n[1]-i[1])*(t[0]-i[0]),r=(e[0]-t[0])*(t[1]-i[1])-(e[1]-t[1])*(t[0]-i[0]),s=(n[1]-i[1])*(e[0]-t[0])-(n[0]-i[0])*(e[1]-t[1]);if(0!==s){var a=o/s,l=r/s;if(a>=0&&1>=a&&l>=0&&1>=l)return!0}return!1}function S(t){return!isNaN(parseFloat(t))&&isFinite(t)}function x(t,e){if(S(t[0][0])){if(S(e[0][0])){for(var i=0;i<t.length-1;i++)for(var n=0;n<e.length-1;n++)if(E(t[i],t[i+1],e[n],e[n+1]))return!0}else for(var o=0;o<e.length;o++)if(x(t,e[o]))return!0}else for(var r=0;r<t.length;r++)if(x(t[r],e))return!0;return!1}function M(t){for(var e=[],i=0;i<t.length;i++){var n=t[i].slice();!1===O(n[0],n[n.length-1])&&n.push(n[0]),e.push(n)}return e}function O(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function C(t,e){if(t.length!==e.length)return!1;for(var i=t.slice().sort(v),n=e.slice().sort(v),o=0;o<i.length;o++){if(i[o].length!==n[o].length)return!1;for(var r=0;r<i.length;r++)if(i[o][r]!==n[o][r])return!1}return!0}function D(t){if(t)switch(t.type){case"Point":return new I(t);case"MultiPoint":return new N(t);case"LineString":return new A(t);case"MultiLineString":return new k(t);case"Polygon":return new B(t);case"MultiPolygon":return new U(t);case"Feature":return new z(t);case"FeatureCollection":return new R(t);case"GeometryCollection":return new Z(t);default:throw new Error("Unknown type: "+t.type)}}function I(e){var i=Array.prototype.slice.call(arguments);if(e&&"Point"===e.type&&e.coordinates)n(this,e);else if(e&&t(e))this.coordinates=e;else{if(!(i.length>=2))throw"Terraformer: invalid input for Terraformer.Point";this.coordinates=i}this.type="Point"}function N(e){if(e&&"MultiPoint"===e.type&&e.coordinates)n(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.MultiPoint";this.coordinates=e}this.type="MultiPoint"}function A(e){if(e&&"LineString"===e.type&&e.coordinates)n(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.LineString";this.coordinates=e}this.type="LineString"}function k(e){if(e&&"MultiLineString"===e.type&&e.coordinates)n(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.MultiLineString";this.coordinates=e}this.type="MultiLineString"}function B(e){if(e&&"Polygon"===e.type&&e.coordinates)n(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.Polygon";this.coordinates=e}this.type="Polygon"}function U(e){if(e&&"MultiPolygon"===e.type&&e.coordinates)n(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.coordinates=e}this.type="MultiPolygon"}function z(t){if(t&&"Feature"===t.type)n(this,t);else{if(!(t&&t.type&&t.coordinates))throw"Terraformer: invalid input for Terraformer.Feature";this.geometry=t}this.type="Feature"}function R(e){if(e&&"FeatureCollection"===e.type&&e.features)n(this,e);else{if(!t(e))throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.features=e}this.type="FeatureCollection"}function Z(e){if(e&&"GeometryCollection"===e.type&&e.geometries)n(this,e);else if(t(e))this.geometries=e;else{if(!e.coordinates||!e.type)throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection",this.geometries=[e]}this.type="GeometryCollection"}function F(t,e,i){for(var n=m(t),o=i||64,r={type:"Polygon",coordinates:[[]]},s=1;o>=s;s++){var a=s*(360/o)*Math.PI/180;r.coordinates[0].push([n[0]+e*Math.cos(a),n[1]+e*Math.sin(a)])}return r.coordinates=M(r.coordinates),y(r)}function H(t,e,i){var o=i||64,r=e||250;if(!t||t.length<2||!r||!o)throw new Error("Terraformer: missing parameter for Terraformer.Circle");n(this,new z({type:"Feature",geometry:F(t,r,o),properties:{radius:r,center:t,steps:o}}))}var V={},G=6378137,W=57.29577951308232,q=.017453292519943,$={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}},J={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}},Q=["length"];return D.prototype.toMercator=function(){return g(this)},D.prototype.toGeographic=function(){return y(this)},D.prototype.envelope=function(){return h(this)},D.prototype.bbox=function(){return o(this)},D.prototype.convexHull=function(){var t,e,i=[];if("Point"===this.type)return null;if("LineString"===this.type||"MultiPoint"===this.type){if(!(this.coordinates&&this.coordinates.length>=3))return null;i=this.coordinates}else if("Polygon"===this.type||"MultiLineString"===this.type){if(!(this.coordinates&&this.coordinates.length>0))return null;for(t=0;t<this.coordinates.length;t++)i=i.concat(this.coordinates[t]);if(i.length<3)return null}else if("MultiPolygon"===this.type){if(!(this.coordinates&&this.coordinates.length>0))return null;for(t=0;t<this.coordinates.length;t++)for(e=0;e<this.coordinates[t].length;e++)i=i.concat(this.coordinates[t][e]);if(i.length<3)return null}else if("Feature"===this.type){var n=new D(this.geometry);return n.convexHull()}return new B({type:"Polygon",coordinates:M([w(i)])})},D.prototype.toJSON=function(){var t={};for(var e in this)this.hasOwnProperty(e)&&-1===Q.indexOf(e)&&(t[e]=this[e]);return t.bbox=o(this),t},D.prototype.contains=function(t){return new D(t).within(this)},D.prototype.within=function(t){var e,i,n;if("Point"===t.type&&"Point"===this.type)return O(this.coordinates,t.coordinates);if("MultiLineString"===t.type&&"Point"===this.type)for(i=0;i<t.coordinates.length;i++){var o={type:"LineString",coordinates:t.coordinates[i]};if(this.within(o))return!0}if(("LineString"===t.type||"MultiPoint"===t.type)&&"Point"===this.type)for(i=0;i<t.coordinates.length;i++){if(this.coordinates.length!==t.coordinates[i].length)return!1;if(O(this.coordinates,t.coordinates[i]))return!0}if("Polygon"===t.type){if("Polygon"===this.type){if(t.coordinates.length===this.coordinates.length)for(i=0;i<this.coordinates.length;i++)if(C(this.coordinates[i],t.coordinates[i]))return!0;return!(!this.coordinates.length||!L(t.coordinates,this.coordinates[0][0]))&&!x(M(this.coordinates),M(t.coordinates))}if("Point"===this.type)return L(t.coordinates,this.coordinates);if("LineString"===this.type||"MultiPoint"===this.type){if(!this.coordinates||0===this.coordinates.length)return!1;for(i=0;i<this.coordinates.length;i++)if(!1===L(t.coordinates,this.coordinates[i]))return!1;return!0}if("MultiLineString"===this.type){for(i=0;i<this.coordinates.length;i++){if(!1===new A(this.coordinates[i]).within(t))return n++,!1}return!0}if("MultiPolygon"===this.type){for(i=0;i<this.coordinates.length;i++){if(!1===new D({type:"Polygon",coordinates:this.coordinates[i]}).within(t))return!1}return!0}}if("MultiPolygon"===t.type){if("Point"===this.type){if(t.coordinates.length)for(i=0;i<t.coordinates.length;i++)if(e=t.coordinates[i],L(e,this.coordinates)&&!1===x([this.coordinates],t.coordinates))return!0;return!1}if("Polygon"===this.type){for(i=0;i<this.coordinates.length;i++)if(t.coordinates[i].length===this.coordinates.length)for(j=0;j<this.coordinates.length;j++)if(C(this.coordinates[j],t.coordinates[i][j]))return!0;if(!1===x(this.coordinates,t.coordinates)&&t.coordinates.length){for(i=0;i<t.coordinates.length;i++)e=t.coordinates[i],n=!1!==L(e,this.coordinates[0][0]);return n}}else if("LineString"===this.type||"MultiPoint"===this.type)for(i=0;i<t.coordinates.length;i++){var r={type:"Polygon",coordinates:t.coordinates[i]};return!!this.within(r)}else{if("MultiLineString"===this.type){for(i=0;i<this.coordinates.length;i++){var s=new A(this.coordinates[i]);if(!1===s.within(t))return!1}return!0}if("MultiPolygon"===this.type){for(i=0;i<t.coordinates.length;i++){var a={type:"Polygon",coordinates:t.coordinates[i]};if(!1===this.within(a))return!1}return!0}}}return!1},D.prototype.intersects=function(t){"Feature"===t.type&&(t=t.geometry);var i=new D(t);if(this.within(t)||i.within(this))return!0;if("Point"!==this.type&&"MultiPoint"!==this.type&&"Point"!==t.type&&"MultiPoint"!==t.type)return x(this.coordinates,t.coordinates);if("Feature"===this.type){return new D(this.geometry).intersects(t)}return e("Type "+this.type+" to "+t.type+" intersection is not supported by intersects"),!1},I.prototype=new D,I.prototype.constructor=I,N.prototype=new D,N.prototype.constructor=N,N.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates]);return this},N.prototype.addPoint=function(t){return this.coordinates.push(t),this},N.prototype.insertPoint=function(t,e){return this.coordinates.splice(e,0,t),this},N.prototype.removePoint=function(t){return"number"==typeof t?this.coordinates.splice(t,1):this.coordinates.splice(this.coordinates.indexOf(t),1),this},N.prototype.get=function(t){return new I(this.coordinates[t])},A.prototype=new D,A.prototype.constructor=A,A.prototype.addVertex=function(t){return this.coordinates.push(t),this},A.prototype.insertVertex=function(t,e){return this.coordinates.splice(e,0,t),this},A.prototype.removeVertex=function(t){return this.coordinates.splice(t,1),this},k.prototype=new D,k.prototype.constructor=k,k.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates])},k.prototype.get=function(t){return new A(this.coordinates[t])},B.prototype=new D,B.prototype.constructor=B,B.prototype.addVertex=function(t){return this.coordinates[0].push(t),this},B.prototype.insertVertex=function(t,e){return this.coordinates[0].splice(e,0,t),this},B.prototype.removeVertex=function(t){return this.coordinates[0].splice(t,1),this},B.prototype.close=function(){this.coordinates=M(this.coordinates)},U.prototype=new D,U.prototype.constructor=U,U.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates])},U.prototype.get=function(t){return new B(this.coordinates[t])},U.prototype.close=function(){var t=[];return this.forEach(function(e){t.push(M(e))}),this.coordinates=t,this},z.prototype=new D,z.prototype.constructor=z,R.prototype=new D,R.prototype.constructor=R,R.prototype.forEach=function(t){for(var e=0;e<this.features.length;e++)t.apply(this,[this.features[e],e,this.features])},R.prototype.get=function(t){var e;return this.forEach(function(i){i.id===t&&(e=i)}),new z(e)},Z.prototype=new D,Z.prototype.constructor=Z,Z.prototype.forEach=function(t){for(var e=0;e<this.geometries.length;e++)t.apply(this,[this.geometries[e],e,this.geometries])},Z.prototype.get=function(t){return new D(this.geometries[t])},H.prototype=new D,H.prototype.constructor=H,H.prototype.recalculate=function(){return this.geometry=F(this.properties.center,this.properties.radius,this.properties.steps),this},H.prototype.center=function(t){return t&&(this.properties.center=t,this.recalculate()),this.properties.center},H.prototype.radius=function(t){return t&&(this.properties.radius=t,this.recalculate()),this.properties.radius},H.prototype.steps=function(t){return t&&(this.properties.steps=t,this.recalculate()),this.properties.steps},H.prototype.toJSON=function(){return D.prototype.toJSON.call(this)},V.Primitive=D,V.Point=I,V.MultiPoint=N,V.LineString=A,V.MultiLineString=k,V.Polygon=B,V.MultiPolygon=U,V.Feature=z,V.FeatureCollection=R,V.GeometryCollection=Z,V.Circle=H,V.toMercator=g,V.toGeographic=y,V.Tools={},V.Tools.positionToMercator=m,V.Tools.positionToGeographic=f,V.Tools.applyConverter=_,V.Tools.toMercator=g,V.Tools.toGeographic=y,V.Tools.createCircle=F,V.Tools.calculateBounds=o,V.Tools.calculateEnvelope=h,V.Tools.coordinatesContainPoint=T,V.Tools.polygonContainsPoint=L,V.Tools.arraysIntersectArrays=x,V.Tools.coordinatesContainPoint=T,V.Tools.coordinatesEqual=C,V.Tools.convexHull=w,V.Tools.isConvex=P,V.MercatorCRS=$,V.GeographicCRS=J,V})}).call(e,i(18)(t))},69:function(t,e){!function(t,e,i){"use strict";var n=i.Basic,o={cssSels:{Main:{slider:".js-compare__separator",compareRegion:".js-compare__item",compareContent:".js-compare__size",sliding:".js-compare__sliding"}},cssClss:{animated:"compare__item_animated"},startOffset:"50",isVertical:!1},r=function(){function t(t,e){t.removeClass(e),this._state.animated=!1,this._swipe.pause(!1)}function n(t){return{x:t.pageX||t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:t.pageY||t.clientY+document.body.scrollTop+document.documentElement.scrollTop}}function o(t){if(!this._state.animated){if(!this._state.click)return void(this._state.click=!0);var e=this._elems.compareRegion.eq(0),i=this._opts.cssClss.animated;i&&(e.addClass(i).one(h,this.onAnimationEnd),this._swipe.pause(!0),this._state.animated=!0),s.call(this,n(t.originalEvent||t)[this._opts.isVertical?"y":"x"])}}function r(t,e){this._elems.sliding[t](e+"%")}function s(t){var i,n,o,s=!this._opts.isVertical,a=this._elems.parent,l=this.getOffset();s?(i="width",l=l.left):(i="height",l=l.top),n=a[i](),o=Math.min((t-l)/n*100,100),o==this._state.offset&&e.requestAnimationFrame(this.onAnimationEnd),this._state.offset=o,r.call(this,i,o)}function a(){this._elems.compareContent.css({width:"",height:""}),this._elems.parent.height(""),this._elems.sliding[this._opts.isVertical?"height":"width"]("")}function l(){a.call(this);for(var t,e,i,n,o=!this._opts.isVertical,r=this._elems.compareRegion.get(0).getBoundingClientRect(),s=this._elems.compareRegion.get(1).getBoundingClientRect(),l=this._elems.parent,u=["width","height"],h=0;h<u.length;h++)n=0===h,e=u[h],t=n===o,i=Math[t?"min":"max"](s[e],r[e],l[e]()),!n&&o?l[e](i):this._elems.compareContent[e](i)}function u(){var t=this._opts.isVertical?1:0;this._swipe=i.Tools.initModule("Swipe",this._elems.parent,{targetAxis:this._opts.isVertical?"y":"x",resetDelta:!0,_Handlers:{start:function(e,i){this._state.startFrom=i.from[t]}.bind(this),move:function(e){s.call(this,this._state.startFrom+e[t])}.bind(this),end:function(){this._state.startFrom=null,this._state.click=!1}.bind(this)}})}var h="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend";return{_Handlers:{dom:{"resize:window":function(){this.fixSizes()},click:o}},_Init:function(){var i=this._elems.compareRegion,n=this._opts.cssClss.animated;2!==i.length&&e.console.error("Wrong compare elems count"),n&&(this.onAnimationEnd=t.bind(this,i.eq(0),n)),this._state={animated:!1,startFrom:null,click:!0,offset:this._opts.startOffset};var o=i.find("img");o.length?Promise.all(o.toArray().map(function(t){return!0===t.complete?Promise.resolve():new Promise(function(e,i){t.onload=e,t.onerror=i})})).then(this.fixSizes.bind(this)):this.fixSizes.call(this),u.call(this)},getOffset:function(){var t=this._elems.parent.get(0).getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},fixSizes:function(){l.call(this),r.call(this,this._opts.isVertical?"height":"width",this._state.offset)}}}(),s=n.getView(r,o,null,"CompareSlider");i.Basic.moduleOpts.setParams("CompareSlider",{paramAttrs:{startOffset:"data-startfrom",isVertical:"data-vertical"}}),n.Extend(e.getNameSpace("Modules",i),{CompareSlider:s})}(window.jQuery||window.$,window,window.ru.mail.cpf)},7:function(t,e,i){"use strict";function n(){return new Promise(function(t){for(var e=0,i=c;e<i.length;e++){(0,i[e])()}t(a({},h))})}function o(t){return a({},h[t])}function r(t,e){var i=function(){h[t]=a({},e)};return c.push(i),i}function s(t){for(var e=t.split(u.COMPONENT_NS_DELIMITER),i=e[0],n=e.slice(1),r={},s=0,a=n;s<a.length;s++){var h=a[s];r=l.deepMerge({},r,o(i)),i=""+i+u.COMPONENT_NS_DELIMITER+h}return l.deepMerge({},r,o(i))}var a=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var l=i(2),u=i(1),h={},c=[];e.resolveConfigSetters=n,e.getConfig=o,e.setConfig=r,e.getConfigCollapsed=s},88:function(t,e,i){(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o,r){if("object"==n(t)&&"object"==n(t.exports)&&(e=t.exports=r(i(62))),"object"==("undefined"==typeof navigator?"undefined":n(navigator))){if(!o.Terraformer)throw new Error("Terraformer.WKT requires the core Terraformer library. http://github.com/esri/terraformer");o.Terraformer.WKT=r(o.Terraformer)}}(window,function(t){function e(t){this.data=[t],this.type="PointArray"}function i(t){this.data=t,this.type="Ring"}function n(t){this.data=[t],this.type="RingList"}function o(t){this.data=[t],this.type="PolygonList"}function r(e){var i;try{i=m.parse(e)}catch(t){throw Error("Unable to parse",t)}return t.Primitive(i)}function s(t){for(var e=[],i="",n=0;n<t.length;n++)e.push(t[n].join(" "));return i+="("+e.join(", ")+")"}function a(t){var e="POINT ";return void 0===t.coordinates||0===t.coordinates.length?e+="EMPTY":(3===t.coordinates.length?e+=t.properties&&!0===t.properties.m?"M ":"Z ":4===t.coordinates.length&&(e+="ZM "),e+="("+t.coordinates.join(" ")+")")}function l(t){var e="LINESTRING ";return void 0===t.coordinates||0===t.coordinates.length||0===t.coordinates[0].length?e+="EMPTY":(3===t.coordinates[0].length?e+=t.properties&&!0===t.properties.m?"M ":"Z ":4===t.coordinates[0].length&&(e+="ZM "),e+=s(t.coordinates))}function u(t){var e="POLYGON ";if(void 0===t.coordinates||0===t.coordinates.length||0===t.coordinates[0].length)return e+="EMPTY";3===t.coordinates[0][0].length?e+=t.properties&&!0===t.properties.m?"M ":"Z ":4===t.coordinates[0][0].length&&(e+="ZM "),e+="(";for(var i=[],n=0;n<t.coordinates.length;n++)i.push(s(t.coordinates[n]));return e+=i.join(", "),e+=")"}function h(t){var e="MULTIPOINT ";return void 0===t.coordinates||0===t.coordinates.length||0===t.coordinates[0].length?e+="EMPTY":(3===t.coordinates[0].length?e+=t.properties&&!0===t.properties.m?"M ":"Z ":4===t.coordinates[0].length&&(e+="ZM "),e+=s(t.coordinates))}function c(t){var e="MULTILINESTRING ";if(void 0===t.coordinates||0===t.coordinates.length||0===t.coordinates[0].length)return e+="EMPTY";3===t.coordinates[0][0].length?e+=t.properties&&!0===t.properties.m?"M ":"Z ":4===t.coordinates[0][0].length&&(e+="ZM "),e+="(";for(var i=[],n=0;n<t.coordinates.length;n++)i.push(s(t.coordinates[n]));return e+=i.join(", "),e+=")"}function p(t){var e="MULTIPOLYGON ";if(void 0===t.coordinates||0===t.coordinates.length||0===t.coordinates[0].length)return e+="EMPTY";3===t.coordinates[0][0][0].length?e+=t.properties&&!0===t.properties.m?"M ":"Z ":4===t.coordinates[0][0][0].length&&(e+="ZM "),e+="(";for(var i=[],n=0;n<t.coordinates.length;n++){for(var o="(",r=[],a=0;a<t.coordinates[n].length;a++)r.push(s(t.coordinates[n][a]));o+=r.join(", "),o+=")",i.push(o)}return e+=i.join(", "),e+=")"}function d(t){switch(t.type){case"Point":return a(t);case"LineString":return l(t);case"Polygon":return u(t);case"MultiPoint":return h(t);case"MultiLineString":return c(t);case"MultiPolygon":return p(t);default:throw Error("Unknown Type: "+t.type)}}var f={},m=function(){function t(){this.yy={}}var r={trace:function(){},yy:{},symbols_:{error:2,expressions:3,point:4,EOF:5,linestring:6,polygon:7,multipoint:8,multilinestring:9,multipolygon:10,coordinate:11,DOUBLE_TOK:12,ptarray:13,COMMA:14,ring_list:15,ring:16,"(":17,")":18,POINT:19,Z:20,ZM:21,M:22,EMPTY:23,point_untagged:24,polygon_list:25,polygon_untagged:26,point_list:27,LINESTRING:28,POLYGON:29,MULTIPOINT:30,MULTILINESTRING:31,MULTIPOLYGON:32,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"DOUBLE_TOK",14:"COMMA",17:"(",18:")",19:"POINT",20:"Z",21:"ZM",22:"M",23:"EMPTY",28:"LINESTRING",29:"POLYGON",30:"MULTIPOINT",31:"MULTILINESTRING",32:"MULTIPOLYGON"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[11,2],[11,3],[11,4],[13,3],[13,1],[15,3],[15,1],[16,3],[4,4],[4,5],[4,5],[4,5],[4,2],[24,1],[24,3],[25,3],[25,1],[26,3],[27,3],[27,1],[6,4],[6,5],[6,5],[6,5],[6,2],[7,4],[7,5],[7,5],[7,5],[7,2],[8,4],[8,5],[8,5],[8,5],[8,2],[9,4],[9,5],[9,5],[9,5],[9,2],[10,4],[10,5],[10,5],[10,5],[10,2]],performAction:function(t,r,s,a,l,u){var h=u.length-1;switch(l){case 1:case 2:case 3:case 4:case 5:case 6:return u[h-1];case 7:this.$=new e([Number(u[h-1]),Number(u[h])]);break;case 8:this.$=new e([Number(u[h-2]),Number(u[h-1]),Number(u[h])]);break;case 9:this.$=new e([Number(u[h-3]),Number(u[h-2]),Number(u[h-1]),Number(u[h])]);break;case 10:this.$=u[h-2].addPoint(u[h]);break;case 11:this.$=u[h];break;case 12:this.$=u[h-2].addRing(u[h]);break;case 13:this.$=new n(u[h]);break;case 14:this.$=new i(u[h-1]);break;case 15:this.$={type:"Point",coordinates:u[h-1].data[0]};break;case 16:this.$={type:"Point",coordinates:u[h-1].data[0],properties:{z:!0}};break;case 17:this.$={type:"Point",coordinates:u[h-1].data[0],properties:{z:!0,m:!0}};break;case 18:this.$={type:"Point",coordinates:u[h-1].data[0],properties:{m:!0}};break;case 19:this.$={type:"Point",coordinates:[]};break;case 20:this.$=u[h];break;case 21:this.$=u[h-1];break;case 22:this.$=u[h-2].addPolygon(u[h]);break;case 23:this.$=new o(u[h]);break;case 24:this.$=u[h-1];break;case 25:this.$=u[h-2].addPoint(u[h]);break;case 26:this.$=u[h];break;case 27:this.$={type:"LineString",coordinates:u[h-1].data};break;case 28:this.$={type:"LineString",coordinates:u[h-1].data,properties:{z:!0}};break;case 29:this.$={type:"LineString",coordinates:u[h-1].data,properties:{m:!0}};break;case 30:this.$={type:"LineString",coordinates:u[h-1].data,properties:{z:!0,m:!0}};break;case 31:this.$={type:"LineString",coordinates:[]};break;case 32:this.$={type:"Polygon",coordinates:u[h-1].toJSON()};break;case 33:this.$={type:"Polygon",coordinates:u[h-1].toJSON(),properties:{z:!0}};break;case 34:this.$={type:"Polygon",coordinates:u[h-1].toJSON(),properties:{m:!0}};break;case 35:this.$={type:"Polygon",coordinates:u[h-1].toJSON(),properties:{z:!0,m:!0}};break;case 36:this.$={type:"Polygon",coordinates:[]};break;case 37:this.$={type:"MultiPoint",coordinates:u[h-1].data};break;case 38:this.$={type:"MultiPoint",coordinates:u[h-1].data,properties:{z:!0}};break;case 39:this.$={type:"MultiPoint",coordinates:u[h-1].data,properties:{m:!0}};break;case 40:this.$={type:"MultiPoint",coordinates:u[h-1].data,properties:{z:!0,m:!0}};break;case 41:this.$={type:"MultiPoint",coordinates:[]};break;case 42:this.$={type:"MultiLineString",coordinates:u[h-1].toJSON()};break;case 43:this.$={type:"MultiLineString",coordinates:u[h-1].toJSON(),properties:{z:!0}};break;case 44:this.$={type:"MultiLineString",coordinates:u[h-1].toJSON(),properties:{m:!0}};break;case 45:this.$={type:"MultiLineString",coordinates:u[h-1].toJSON(),properties:{z:!0,m:!0}};break;case 46:this.$={type:"MultiLineString",coordinates:[]};break;case 47:this.$={type:"MultiPolygon",coordinates:u[h-1].toJSON()};break;case 48:this.$={type:"MultiPolygon",coordinates:u[h-1].toJSON(),properties:{z:!0}};break;case 49:this.$={type:"MultiPolygon",coordinates:u[h-1].toJSON(),properties:{m:!0}};break;case 50:this.$={type:"MultiPolygon",coordinates:u[h-1].toJSON(),properties:{z:!0,m:!0}};break;case 51:this.$={type:"MultiPolygon",coordinates:[]}}},table:[{3:1,4:2,6:3,7:4,8:5,9:6,10:7,19:[1,8],28:[1,9],29:[1,10],30:[1,11],31:[1,12],32:[1,13]},{1:[3]},{5:[1,14]},{5:[1,15]},{5:[1,16]},{5:[1,17]},{5:[1,18]},{5:[1,19]},{17:[1,20],20:[1,21],21:[1,22],22:[1,23],23:[1,24]},{17:[1,25],20:[1,26],21:[1,28],22:[1,27],23:[1,29]},{17:[1,30],20:[1,31],21:[1,33],22:[1,32],23:[1,34]},{17:[1,35],20:[1,36],21:[1,38],22:[1,37],23:[1,39]},{17:[1,40],20:[1,41],21:[1,43],22:[1,42],23:[1,44]},{17:[1,45],20:[1,46],21:[1,48],22:[1,47],23:[1,49]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{11:51,12:[1,52],13:50},{17:[1,53]},{17:[1,54]},{17:[1,55]},{5:[2,19]},{11:58,12:[1,52],17:[1,59],24:57,27:56},{17:[1,60]},{17:[1,61]},{17:[1,62]},{5:[2,31]},{15:63,16:64,17:[1,65]},{17:[1,66]},{17:[1,67]},{17:[1,68]},{5:[2,36]},{11:58,12:[1,52],17:[1,59],24:57,27:69},{17:[1,70]},{17:[1,71]},{17:[1,72]},{5:[2,41]},{15:73,16:64,17:[1,65]},{17:[1,74]},{17:[1,75]},{17:[1,76]},{5:[2,46]},{17:[1,79],25:77,26:78},{17:[1,80]},{17:[1,81]},{17:[1,82]},{5:[2,51]},{14:[1,84],18:[1,83]},{14:[2,11],18:[2,11]},{12:[1,85]},{11:51,12:[1,52],13:86},{11:51,12:[1,52],13:87},{11:51,12:[1,52],13:88},{14:[1,90],18:[1,89]},{14:[2,26],18:[2,26]},{14:[2,20],18:[2,20]},{11:91,12:[1,52]},{11:58,12:[1,52],17:[1,59],24:57,27:92},{11:58,12:[1,52],17:[1,59],24:57,27:93},{11:58,12:[1,52],17:[1,59],24:57,27:94},{14:[1,96],18:[1,95]},{14:[2,13],18:[2,13]},{11:51,12:[1,52],13:97},{15:98,16:64,17:[1,65]},{15:99,16:64,17:[1,65]},{15:100,16:64,17:[1,65]},{14:[1,90],18:[1,101]},{11:58,12:[1,52],17:[1,59],24:57,27:102},{11:58,12:[1,52],17:[1,59],24:57,27:103},{11:58,12:[1,52],17:[1,59],24:57,27:104},{14:[1,96],18:[1,105]},{15:106,16:64,17:[1,65]},{15:107,16:64,17:[1,65]},{15:108,16:64,17:[1,65]},{14:[1,110],18:[1,109]},{14:[2,23],18:[2,23]},{15:111,16:64,17:[1,65]},{17:[1,79],25:112,26:78},{17:[1,79],25:113,26:78},{17:[1,79],25:114,26:78},{5:[2,15]},{11:115,12:[1,52]},{12:[1,116],14:[2,7],18:[2,7]},{14:[1,84],18:[1,117]},{14:[1,84],18:[1,118]},{14:[1,84],18:[1,119]},{5:[2,27]},{11:58,12:[1,52],17:[1,59],24:120},{18:[1,121]},{14:[1,90],18:[1,122]},{14:[1,90],18:[1,123]},{14:[1,90],18:[1,124]},{5:[2,32]},{16:125,17:[1,65]},{14:[1,84],18:[1,126]},{14:[1,96],18:[1,127]},{14:[1,96],18:[1,128]},{14:[1,96],18:[1,129]},{5:[2,37]},{14:[1,90],18:[1,130]},{14:[1,90],18:[1,131]},{14:[1,90],18:[1,132]},{5:[2,42]},{14:[1,96],18:[1,133]},{14:[1,96],18:[1,134]},{14:[1,96],18:[1,135]},{5:[2,47]},{17:[1,79],26:136},{14:[1,96],18:[1,137]},{14:[1,110],18:[1,138]},{14:[1,110],18:[1,139]},{14:[1,110],18:[1,140]},{14:[2,10],18:[2,10]},{12:[1,141],14:[2,8],18:[2,8]},{5:[2,16]},{5:[2,17]},{5:[2,18]},{14:[2,25],18:[2,25]},{14:[2,21],18:[2,21]},{5:[2,28]},{5:[2,29]},{5:[2,30]},{14:[2,12],18:[2,12]},{14:[2,14],18:[2,14]},{5:[2,33]},{5:[2,34]},{5:[2,35]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,43]},{5:[2,44]},{5:[2,45]},{14:[2,22],18:[2,22]},{14:[2,24],18:[2,24]},{5:[2,48]},{5:[2,49]},{5:[2,50]},{14:[2,9],18:[2,9]}],defaultActions:{14:[2,1],15:[2,2],16:[2,3],17:[2,4],18:[2,5],19:[2,6],24:[2,19],29:[2,31],34:[2,36],39:[2,41],44:[2,46],49:[2,51],83:[2,15],89:[2,27],95:[2,32],101:[2,37],105:[2,42],109:[2,47],117:[2,16],118:[2,17],119:[2,18],122:[2,28],123:[2,29],124:[2,30],127:[2,33],128:[2,34],129:[2,35],130:[2,38],131:[2,39],132:[2,40],133:[2,43],134:[2,44],135:[2,45],138:[2,48],139:[2,49],140:[2,50]},parseError:function(t){throw new Error(t)},parse:function(t){var e=this,i=[0],n=[null],o=[],r=this.table,s="",a=0,l=0,u=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var c=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,d,f,m,_,g,y,v,b,w={};;){if(f=i[i.length-1],this.defaultActions[f]?m=this.defaultActions[f]:((null===p||void 0===p)&&(p=function(){var t;return t=e.lexer.lex()||1,"number"!=typeof t&&(t=e.symbols_[t]||t),t}()),m=r[f]&&r[f][p]),void 0===m||!m.length||!m[0]){var P="";if(!u){b=[];for(g in r[f])this.terminals_[g]&&g>2&&b.push("'"+this.terminals_[g]+"'");P=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(P,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:b})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+p);switch(m[0]){case 1:i.push(p),n.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(m[1]),p=null,d?(p=d,d=null):(l=this.lexer.yyleng,s=this.lexer.yytext,a=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(y=this.productions_[m[1]][1],w.$=n[n.length-y],w._$={first_line:o[o.length-(y||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(y||1)].first_column,last_column:o[o.length-1].last_column},c&&(w._$.range=[o[o.length-(y||1)].range[0],o[o.length-1].range[1]]),void 0!==(_=this.performAction.call(w,s,l,a,this.yy,m[1],n,o)))return _;y&&(i=i.slice(0,-2*y),n=n.slice(0,-1*y),o=o.slice(0,-1*y)),i.push(this.productions_[m[1]][0]),n.push(w.$),o.push(w._$),v=r[i[i.length-2]][i[i.length-1]],i.push(v);break;case 3:return!0}}return!0}},s=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,o;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),s=0;s<r.length&&(!(i=this._input.match(this.rules[r[s]]))||e&&!(i[0].length>e[0].length)||(e=i,n=s,this.options.flex));s++);return e?(o=e[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){switch(i){case 0:break;case 1:return 17;case 2:return 18;case 3:return 12;case 4:return 19;case 5:return 28;case 6:return 29;case 7:return 30;case 8:return 31;case 9:return 32;case 10:return 14;case 11:return 23;case 12:return 22;case 13:return 20;case 14:return 21;case 15:return 5;case 16:return"INVALID"}},t.rules=[/^(?:\s+)/,/^(?:\()/,/^(?:\))/,/^(?:-?[0-9]+(\.[0-9]+)?)/,/^(?:POINT\b)/,/^(?:LINESTRING\b)/,/^(?:POLYGON\b)/,/^(?:MULTIPOINT\b)/,/^(?:MULTILINESTRING\b)/,/^(?:MULTIPOLYGON\b)/,/^(?:,)/,/^(?:EMPTY\b)/,/^(?:M\b)/,/^(?:Z\b)/,/^(?:ZM\b)/,/^(?:$)/,/^(?:.)/],t.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],inclusive:!0}},t}();return r.lexer=s,t.prototype=r,r.Parser=t,new t}();return e.prototype.addPoint=function(t){return"PointArray"===t.type?this.data=this.data.concat(t.data):this.data.push(t),this},e.prototype.toJSON=function(){return this.data},i.prototype.toJSON=function(){for(var t=[],e=0;e<this.data.data.length;e++)t.push(this.data.data[e]);return t},n.prototype.addRing=function(t){return this.data.push(t),this},n.prototype.toJSON=function(){for(var t=[],e=0;e<this.data.length;e++)t.push(this.data[e].toJSON());return t.length,t},o.prototype.addPolygon=function(t){return this.data.push(t),this},o.prototype.toJSON=function(){for(var t=[],e=0;e<this.data.length;e++)t=t.concat([this.data[e].toJSON()]);return t},f.parser=m,f.Parser=m.Parser,f.parse=r,f.convert=d,f})}).call(e,i(18)(t))},89:function(t,e,i){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(i,n,o){var r=i.L,s={};s.version="0.7.7","object"==e(t)&&"object"==e(t.exports)?t.exports=s:"function"==typeof define&&define.amd&&define(s),s.noConflict=function(){return i.L=r,this},i.L=s,s.Util={extend:function(t){var e,i,n,o,r=Array.prototype.slice.call(arguments,1);for(i=0,n=r.length;n>i;i++){o=r[i]||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(i){return i[e]=i[e]||++t,i[e]}}(),invokeEach:function(t,i,n){var o,r;if("object"==e(t)){r=Array.prototype.slice.call(arguments,3);for(o in t)i.apply(n,[o,t[o]].concat(r));return!0}return!1},limitExecByInterval:function(t,e,i){var n,o;return function r(){var s=arguments;return n?void(o=!0):(n=!0,setTimeout(function(){n=!1,o&&(r.apply(i,s),o=!1)},e),void t.apply(i,s))}},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return s.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=s.extend({},t.options,e),t.options},getParamString:function(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,i){var n=e[i];if(n===o)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var e,n,o=["webkit","moz","o","ms"];for(e=0;e<o.length&&!n;e++)n=i[o[e]+t];return n}function e(t){var e=+new Date,o=Math.max(0,16-(e-n));return n=e+o,i.setTimeout(t,o)}var n=0,o=i.requestAnimationFrame||t("RequestAnimationFrame")||e,r=i.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){i.clearTimeout(t)};s.Util.requestAnimFrame=function(t,n,r,a){return t=s.bind(t,n),r&&o===e?void t():o.call(i,t,a)},s.Util.cancelAnimFrame=function(t){t&&r.call(i,t)}}(),s.extend=s.Util.extend,s.bind=s.Util.bind,s.stamp=s.Util.stamp,s.setOptions=s.Util.setOptions,s.Class=function(){},s.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var n=new i;n.constructor=e,e.prototype=n;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);t.statics&&(s.extend(e,t.statics),delete t.statics),t.includes&&(s.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),t.options&&n.options&&(t.options=s.extend({},n.options,t.options)),s.extend(n,t),n._initHooks=[];var r=this;return e.__super__=r.prototype,n.callInitHooks=function(){if(!this._initHooksCalled){r.prototype.callInitHooks&&r.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;e>t;t++)n._initHooks[t].call(this)}},e},s.Class.include=function(t){s.extend(this.prototype,t)},s.Class.mergeOptions=function(t){s.extend(this.prototype.options,t)},s.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var a="_leaflet_events";s.Mixin={},s.Mixin.Events={addEventListener:function(t,e,i){if(s.Util.invokeEach(t,this.addEventListener,this,e,i))return this;var n,o,r,l,u,h,c,p=this[a]=this[a]||{},d=i&&i!==this&&s.stamp(i);for(t=s.Util.splitWords(t),n=0,o=t.length;o>n;n++)r={action:e,context:i||this},l=t[n],d?(u=l+"_idx",h=u+"_len",c=p[u]=p[u]||{},c[d]||(c[d]=[],p[h]=(p[h]||0)+1),c[d].push(r)):(p[l]=p[l]||[],p[l].push(r));return this},hasEventListeners:function(t){var e=this[a];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,i){if(!this[a])return this;if(!t)return this.clearAllEventListeners();if(s.Util.invokeEach(t,this.removeEventListener,this,e,i))return this;var n,o,r,l,u,h,c,p,d,f=this[a],m=i&&i!==this&&s.stamp(i);for(t=s.Util.splitWords(t),n=0,o=t.length;o>n;n++)if(r=t[n],h=r+"_idx",c=h+"_len",p=f[h],e){if(l=m&&p?p[m]:f[r]){for(u=l.length-1;u>=0;u--)l[u].action!==e||i&&l[u].context!==i||(d=l.splice(u,1),d[0].action=s.Util.falseFn);i&&p&&0===l.length&&(delete p[m],f[c]--)}}else delete f[r],delete f[h],delete f[c];return this},clearAllEventListeners:function(){return delete this[a],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var i,n,o,r,l,u=s.Util.extend({},e,{type:t,target:this}),h=this[a];if(h[t])for(i=h[t].slice(),n=0,o=i.length;o>n;n++)i[n].action.call(i[n].context,u);r=h[t+"_idx"];for(l in r)if(i=r[l].slice())for(n=0,o=i.length;o>n;n++)i[n].action.call(i[n].context,u);return this},addOneTimeEventListener:function(t,e,i){if(s.Util.invokeEach(t,this.addOneTimeEventListener,this,e,i))return this;var n=s.bind(function(){this.removeEventListener(t,e,i).removeEventListener(t,n,i)},this);return this.addEventListener(t,e,i).addEventListener(t,n,i)}},s.Mixin.Events.on=s.Mixin.Events.addEventListener,s.Mixin.Events.off=s.Mixin.Events.removeEventListener,s.Mixin.Events.once=s.Mixin.Events.addOneTimeEventListener,s.Mixin.Events.fire=s.Mixin.Events.fireEvent,function(){var t="ActiveXObject"in i,r=t&&!n.addEventListener,a=navigator.userAgent.toLowerCase(),l=-1!==a.indexOf("webkit"),u=-1!==a.indexOf("chrome"),h=-1!==a.indexOf("phantom"),c=-1!==a.indexOf("android"),p=-1!==a.search("android [23]"),d=-1!==a.indexOf("gecko"),f=("undefined"==typeof orientation?"undefined":e(orientation))!=o+"",m=!i.PointerEvent&&i.MSPointerEvent,_=i.PointerEvent&&i.navigator.pointerEnabled||m,g="devicePixelRatio"in i&&i.devicePixelRatio>1||"matchMedia"in i&&i.matchMedia("(min-resolution:144dpi)")&&i.matchMedia("(min-resolution:144dpi)").matches,y=n.documentElement,v=t&&"transition"in y.style,b="WebKitCSSMatrix"in i&&"m11"in new i.WebKitCSSMatrix&&!p,w="MozPerspective"in y.style,P="OTransition"in y.style,T=!i.L_DISABLE_3D&&(v||b||w||P)&&!h,L=!i.L_NO_TOUCH&&!h&&(_||"ontouchstart"in i||i.DocumentTouch&&n instanceof i.DocumentTouch);s.Browser={ie:t,ielt9:r,webkit:l,gecko:d&&!l&&!i.opera&&!t,android:c,android23:p,chrome:u,ie3d:v,webkit3d:b,gecko3d:w,opera3d:P,any3d:T,mobile:f,mobileWebkit:f&&l,mobileWebkit3d:f&&b,mobileOpera:f&&i.opera,touch:L,msPointer:m,pointer:_,retina:g}}(),s.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},s.Point.prototype={clone:function(){return new s.Point(this.x,this.y)},add:function(t){return this.clone()._add(s.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(s.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=s.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=s.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=s.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+s.Util.formatNum(this.x)+", "+s.Util.formatNum(this.y)+")"}},s.point=function(t,e,i){return t instanceof s.Point?t:s.Util.isArray(t)?new s.Point(t[0],t[1]):t===o||null===t?t:new s.Point(t,e,i)},s.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},s.Bounds.prototype={extend:function(t){return t=s.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new s.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new s.Point(this.min.x,this.max.y)},getTopRight:function(){return new s.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof s.Point?s.point(t):s.bounds(t),t instanceof s.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=s.bounds(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>=e.x&&n.x<=i.x,a=o.y>=e.y&&n.y<=i.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},s.bounds=function(t,e){return!t||t instanceof s.Bounds?t:new s.Bounds(t,e)},s.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},s.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new s.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},s.DomUtil={get:function(t){return"string"==typeof t?n.getElementById(t):t},getStyle:function(t,e){var i=t.style[e];if(!i&&t.currentStyle&&(i=t.currentStyle[e]),(!i||"auto"===i)&&n.defaultView){var o=n.defaultView.getComputedStyle(t,null);i=o?o[e]:null}return"auto"===i?null:i},getViewportOffset:function(t){var e,i=0,o=0,r=t,a=n.body,l=n.documentElement;do{if(i+=r.offsetTop||0,o+=r.offsetLeft||0,i+=parseInt(s.DomUtil.getStyle(r,"borderTopWidth"),10)||0,o+=parseInt(s.DomUtil.getStyle(r,"borderLeftWidth"),10)||0,e=s.DomUtil.getStyle(r,"position"),r.offsetParent===a&&"absolute"===e)break;if("fixed"===e){i+=a.scrollTop||l.scrollTop||0,o+=a.scrollLeft||l.scrollLeft||0;break}if("relative"===e&&!r.offsetLeft){var u=s.DomUtil.getStyle(r,"width"),h=s.DomUtil.getStyle(r,"max-width"),c=r.getBoundingClientRect();("none"!==u||"none"!==h)&&(o+=c.left+r.clientLeft),i+=c.top+(a.scrollTop||l.scrollTop||0);break}r=r.offsetParent}while(r);r=t;do{if(r===a)break;i-=r.scrollTop||0,o-=r.scrollLeft||0,r=r.parentNode}while(r);return new s.Point(o,i)},documentIsLtr:function(){return s.DomUtil._docIsLtrCached||(s.DomUtil._docIsLtrCached=!0,s.DomUtil._docIsLtr="ltr"===s.DomUtil.getStyle(n.body,"direction")),s.DomUtil._docIsLtr},create:function(t,e,i){var o=n.createElement(t);return o.className=e,i&&i.appendChild(o),o},hasClass:function(t,e){if(t.classList!==o)return t.classList.contains(e);var i=s.DomUtil._getClass(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)},addClass:function(t,e){if(t.classList!==o)for(var i=s.Util.splitWords(e),n=0,r=i.length;r>n;n++)t.classList.add(i[n]);else if(!s.DomUtil.hasClass(t,e)){var a=s.DomUtil._getClass(t);s.DomUtil._setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){t.classList!==o?t.classList.remove(e):s.DomUtil._setClass(t,s.Util.trim((" "+s.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===o?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===o?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}},testProp:function(t){for(var e=n.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1},getTranslateString:function(t){var e=s.Browser.webkit3d,i="translate"+(e?"3d":"")+"(",n=(e?",0":"")+")";return i+t.x+"px,"+t.y+"px"+n},getScaleString:function(t,e){return s.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t)))+" scale("+t+") "},setPosition:function(t,e,i){t._leaflet_pos=e,!i&&s.Browser.any3d?t.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},s.DomUtil.TRANSFORM=s.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),s.DomUtil.TRANSITION=s.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),s.DomUtil.TRANSITION_END="webkitTransition"===s.DomUtil.TRANSITION||"OTransition"===s.DomUtil.TRANSITION?s.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in n)s.extend(s.DomUtil,{disableTextSelection:function(){s.DomEvent.on(i,"selectstart",s.DomEvent.preventDefault)},enableTextSelection:function(){s.DomEvent.off(i,"selectstart",s.DomEvent.preventDefault)}});else{var t=s.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);s.extend(s.DomUtil,{disableTextSelection:function(){if(t){var e=n.documentElement.style;this._userSelect=e[t],e[t]="none"}},enableTextSelection:function(){t&&(n.documentElement.style[t]=this._userSelect,delete this._userSelect)}})}s.extend(s.DomUtil,{disableImageDrag:function(){s.DomEvent.on(i,"dragstart",s.DomEvent.preventDefault)},enableImageDrag:function(){s.DomEvent.off(i,"dragstart",s.DomEvent.preventDefault)}})}(),s.LatLng=function(t,e,i){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,i!==o&&(this.alt=parseFloat(i))},s.extend(s.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),s.LatLng.prototype={equals:function(t){return!!t&&(t=s.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=s.LatLng.MAX_MARGIN)},toString:function(t){return"LatLng("+s.Util.formatNum(this.lat,t)+", "+s.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=s.latLng(t);var e=s.LatLng.DEG_TO_RAD,i=(t.lat-this.lat)*e,n=(t.lng-this.lng)*e,o=this.lat*e,r=t.lat*e,a=Math.sin(i/2),l=Math.sin(n/2),u=a*a+l*l*Math.cos(o)*Math.cos(r);return 12756274*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))},wrap:function(t,e){var i=this.lng;return t=t||-180,e=e||180,i=(i+e)%(e-t)+(t>i||i===e?e:t),new s.LatLng(this.lat,i)}},s.latLng=function(t,i){return t instanceof s.LatLng?t:s.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new s.LatLng(t[0],t[1],t[2]):null:t===o||null===t?t:"object"==e(t)&&"lat"in t?new s.LatLng(t.lat,"lng"in t?t.lng:t.lon):i===o?null:new s.LatLng(t,i)},s.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},s.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=s.latLng(t);return t=null!==e?e:s.latLngBounds(t),t instanceof s.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new s.LatLng(t.lat,t.lng),this._northEast=new s.LatLng(t.lat,t.lng)):t instanceof s.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new s.LatLngBounds(new s.LatLng(e.lat-n,e.lng-o),new s.LatLng(i.lat+n,i.lng+o))},getCenter:function(){return new s.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new s.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new s.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof s.LatLng?s.latLng(t):s.latLngBounds(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof s.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=s.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&n.lat<=i.lat,a=o.lng>=e.lng&&n.lng<=i.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=s.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},s.latLngBounds=function(t,e){return!t||t instanceof s.LatLngBounds?t:new s.LatLngBounds(t,e)},s.Projection={},s.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=s.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=t.lng*e,r=n*e;return r=Math.log(Math.tan(Math.PI/4+r/2)),new s.Point(o,r)},unproject:function(t){var e=s.LatLng.RAD_TO_DEG,i=t.x*e,n=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new s.LatLng(n,i)}},s.Projection.LonLat={project:function(t){return new s.Point(t.lng,t.lat)},unproject:function(t){return new s.LatLng(t.y,t.x)}},s.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return s.point(e,e)}},s.CRS.Simple=s.extend({},s.CRS,{projection:s.Projection.LonLat,transformation:new s.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),s.CRS.EPSG3857=s.extend({},s.CRS,{code:"EPSG:3857",projection:s.Projection.SphericalMercator,transformation:new s.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){return this.projection.project(t).multiplyBy(6378137)}}),s.CRS.EPSG900913=s.extend({},s.CRS.EPSG3857,{code:"EPSG:900913"}),s.CRS.EPSG4326=s.extend({},s.CRS,{code:"EPSG:4326",projection:s.Projection.LonLat,transformation:new s.Transformation(1/360,.5,-1/360,.5)}),s.Map=s.Class.extend({includes:s.Mixin.Events,options:{crs:s.CRS.EPSG3857,fadeAnimation:s.DomUtil.TRANSITION&&!s.Browser.android23,trackResize:!0,markerZoomAnimation:s.DomUtil.TRANSITION&&s.Browser.any3d},initialize:function(t,e){e=s.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=s.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==o&&this.setView(s.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===o?this.getZoom():e,this._resetView(s.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),r=t instanceof s.Point?t:this.latLngToContainerPoint(t),a=r.subtract(o).multiplyBy(1-1/n),l=this.containerPointToLatLng(o.add(a));return this.setView(l,e,{zoom:i})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():s.latLngBounds(t);var i=s.point(e.paddingTopLeft||e.padding||[0,0]),n=s.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));o=e.maxZoom?Math.min(e.maxZoom,o):o;var r=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),o),l=this.project(t.getNorthEast(),o),u=this.unproject(a.add(l).divideBy(2).add(r),o);return this.setView(u,o,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(s.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=s.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var i=this.getCenter(),n=this._limitCenter(i,this._zoom,t);return i.equals(n)?this:this.panTo(n,e)},addLayer:function(t){var e=s.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&s.TileLayer&&t instanceof s.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=s.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&s.TileLayer&&t instanceof s.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return!!t&&s.stamp(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=s.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),o=i.divideBy(2).round(),r=n.subtract(o);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=o}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new s.LatLngBounds(e,i)},getMinZoom:function(){return this.options.minZoom===o?this._layersMinZoom===o?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===o?this._layersMaxZoom===o?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=s.latLngBounds(t);var n,o=this.getMinZoom()-(e?1:0),r=this.getMaxZoom(),a=this.getSize(),l=t.getNorthWest(),u=t.getSouthEast(),h=!0;i=s.point(i||[0,0]);do{o++,n=this.project(u,o).subtract(this.project(l,o)).add(i),h=e?n.x<a.x||n.y<a.y:a.contains(n)}while(h&&r>=o);return h&&e?null:e?o:o-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new s.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new s.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===o?this._zoom:e,this.options.crs.latLngToPoint(s.latLng(t),e)},unproject:function(t,e){return e=e===o?this._zoom:e,this.options.crs.pointToLatLng(s.point(t),e)},layerPointToLatLng:function(t){var e=s.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(s.latLng(t))._round()._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return s.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return s.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(s.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(s.latLng(t)))},mouseEventToContainerPoint:function(t){return s.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=s.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;s.DomUtil.addClass(t,"leaflet-container"+(s.Browser.touch?" leaflet-touch":"")+(s.Browser.retina?" leaflet-retina":"")+(s.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=s.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(s.DomUtil.addClass(t.markerPane,e),s.DomUtil.addClass(t.shadowPane,e),s.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return s.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?s.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;i>e;e++)this.addLayer(t[e])},_resetView:function(t,e,i,n){var o=this._zoom!==e;n||(this.fire("movestart"),o&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),i?this._initialTopLeftPoint._add(this._getMapPanePos()):s.DomUtil.setPosition(this._mapPane,new s.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var r=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!i}),r&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(o||n)&&this.fire("zoomend"),this.fire("moveend",{hard:!i})},_rawPanBy:function(t){s.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,i=-1/0,n=this._getZoomSpan();for(t in this._zoomBoundLayers){var r=this._zoomBoundLayers[t];isNaN(r.options.minZoom)||(e=Math.min(e,r.options.minZoom)),isNaN(r.options.maxZoom)||(i=Math.max(i,r.options.maxZoom))}t===o?this._layersMaxZoom=this._layersMinZoom=o:(this._layersMaxZoom=i,this._layersMinZoom=e),n!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(s.DomEvent){t=t||"on",s.DomEvent[t](this._container,"click",this._onMouseClick,this);var e,n,o=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(e=0,n=o.length;n>e;e++)s.DomEvent[t](this._container,o[e],this._fireMouseEvent,this);this.options.trackResize&&s.DomEvent[t](i,"resize",this._onResize,this)}},_onResize:function(){s.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=s.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||s.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!s.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&s.DomEvent.preventDefault(t);var i=this.mouseEventToContainerPoint(t),n=this.containerPointToLayerPoint(i),o=this.layerPointToLatLng(n);this.fire(e,{latlng:o,layerPoint:n,containerPoint:i,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return s.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),r=new s.Bounds(n.subtract(o),n.add(o)),a=this._getBoundsOffset(r,i,e);return this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new s.Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=this.project(e.getNorthWest(),i).subtract(t.min),o=this.project(e.getSouthEast(),i).subtract(t.max),r=this._rebound(n.x,-o.x),a=this._rebound(n.y,-o.y);return new s.Point(r,a)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),s.map=function(t,e){return new s.Map(t,e)},s.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=s.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=this.R_MAJOR,r=this.R_MINOR,a=t.lng*e*o,l=n*e,u=r/o,h=Math.sqrt(1-u*u),c=h*Math.sin(l);c=Math.pow((1-c)/(1+c),.5*h);var p=Math.tan(.5*(.5*Math.PI-l))/c;return l=-o*Math.log(p),new s.Point(a,l)},unproject:function(t){for(var e,i=s.LatLng.RAD_TO_DEG,n=this.R_MAJOR,o=this.R_MINOR,r=t.x*i/n,a=o/n,l=Math.sqrt(1-a*a),u=Math.exp(-t.y/n),h=Math.PI/2-2*Math.atan(u),c=15,p=.1;Math.abs(p)>1e-7&&--c>0;)e=l*Math.sin(h),p=Math.PI/2-2*Math.atan(u*Math.pow((1-e)/(1+e),.5*l))-h,h+=p;return new s.LatLng(h*i,r)}},s.CRS.EPSG3395=s.extend({},s.CRS,{code:"EPSG:3395",projection:s.Projection.Mercator,transformation:function(){var t=s.Projection.Mercator,e=t.R_MAJOR,i=.5/(Math.PI*e);return new s.Transformation(i,.5,-i,.5)}()}),s.TileLayer=s.Class.extend({includes:s.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:s.Browser.mobile,updateWhenIdle:s.Browser.mobile},initialize:function(t,e){e=s.setOptions(this,e),e.detectRetina&&s.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=s.latLngBounds(e.bounds)),this._url=t;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=s.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==o&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var i,n,o,r=t.children,s=-e(1/0,-1/0);for(n=0,o=r.length;o>n;n++)r[n]!==this._container&&(i=parseInt(r[n].style.zIndex,10),isNaN(i)||(s=e(s,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(s)?s:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(s.Browser.ielt9)for(t in e)s.DomUtil.setOpacity(e[t],this.options.opacity);else s.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=s.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=s.DomUtil.create("div",e,this._container),this._tileContainer=s.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,i=this.options.maxNativeZoom,n=this.options.tileSize;return i&&e>i&&(n=Math.round(t.getZoomScale(e)/t.getZoomScale(i)*n)),n},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),i=t.getZoom(),n=this._getTileSize();if(!(i>this.options.maxZoom||i<this.options.minZoom)){var o=s.bounds(e.min.divideBy(n)._floor(),e.max.divideBy(n)._floor());this._addTilesFromCenterOut(o),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(o)}}},_addTilesFromCenterOut:function(t){var e,i,o,r=[],a=t.getCenter();for(e=t.min.y;e<=t.max.y;e++)for(i=t.min.x;i<=t.max.x;i++)o=new s.Point(i,e),this._tileShouldBeLoaded(o)&&r.push(o);var l=r.length;if(0!==l){r.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)});var u=n.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,i=0;l>i;i++)this._addTile(r[i],u);this._tileContainer.appendChild(u)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var i=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=i.x)||t.y<0||t.y>=i.y)return!1}if(e.bounds){var n=this._getTileSize(),o=t.multiplyBy(n),r=o.add([n,n]),s=this._map.unproject(o),a=this._map.unproject(r);if(e.continuousWorld||e.noWrap||(s=s.wrap(),a=a.wrap()),!e.bounds.intersects([s,a]))return!1}return!0},_removeOtherTiles:function(t){var e,i,n,o;for(o in this._tiles)e=o.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),(i<t.min.x||i>t.max.x||n<t.min.y||n>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(s.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),s.Browser.android||(e.onload=null,e.src=s.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var i=this._getTilePos(t),n=this._getTile();s.DomUtil.setPosition(n,i,s.Browser.chrome),this._tiles[t.x+":"+t.y]=n,this._loadTile(n,t),n.parentNode!==this._tileContainer&&e.appendChild(n)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this._getTileSize();return t.multiplyBy(i).subtract(e)},getTileUrl:function(t){return s.Util.template(this._url,s.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=s.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=s.Util.falseFn,s.Browser.ielt9&&this.options.opacity!==o&&s.DomUtil.setOpacity(t,this.options.opacity),s.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&s.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(s.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==s.Util.emptyImageUrl&&(s.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),s.tileLayer=function(t,e){return new s.TileLayer(t,e)},s.TileLayer.WMS=s.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var i=s.extend({},this.defaultWmsParams),n=e.tileSize||this.options.tileSize;e.detectRetina&&s.Browser.retina?i.width=i.height=2*n:i.width=i.height=n;for(var o in e)this.options.hasOwnProperty(o)||"crs"===o||(i[o]=e[o]);this.wmsParams=i,s.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,s.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,i=this.options.tileSize,n=t.multiplyBy(i),o=n.add([i,i]),r=this._crs.project(e.unproject(n,t.z)),a=this._crs.project(e.unproject(o,t.z)),l=this._wmsVersion>=1.3&&this._crs===s.CRS.EPSG4326?[a.y,r.x,r.y,a.x].join(","):[r.x,a.y,a.x,r.y].join(","),u=s.Util.template(this._url,{s:this._getSubdomain(t)});return u+s.Util.getParamString(this.wmsParams,u,!0)+"&BBOX="+l},setParams:function(t,e){return s.extend(this.wmsParams,t),e||this.redraw(),this}}),s.tileLayer.wms=function(t,e){return new s.TileLayer.WMS(t,e)},s.TileLayer.Canvas=s.TileLayer.extend({options:{async:!1},initialize:function(t){s.setOptions(this,t)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=s.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=s.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),s.tileLayer.canvas=function(t){return new s.TileLayer.Canvas(t)},s.ImageOverlay=s.Class.extend({includes:s.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t,this._bounds=s.latLngBounds(e),s.setOptions(this,i)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&s.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=s.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&s.Browser.any3d?s.DomUtil.addClass(this._image,"leaflet-zoom-animated"):s.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),s.extend(this._image,{galleryimg:"no",onselectstart:s.Util.falseFn,onmousemove:s.Util.falseFn,onload:s.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,i=this._image,n=e.getZoomScale(t.zoom),o=this._bounds.getNorthWest(),r=this._bounds.getSouthEast(),a=e._latLngToNewLayerPoint(o,t.zoom,t.center),l=e._latLngToNewLayerPoint(r,t.zoom,t.center)._subtract(a),u=a._add(l._multiplyBy(.5*(1-1/n)));i.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(u)+" scale("+n+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);s.DomUtil.setPosition(t,e),t.style.width=i.x+"px",t.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){s.DomUtil.setOpacity(this._image,this.options.opacity)}}),s.imageOverlay=function(t,e,i){return new s.ImageOverlay(t,e,i)},s.Icon=s.Class.extend({options:{className:""},initialize:function(t){s.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n;return n=e&&"IMG"===e.tagName?this._createImg(i,e):this._createImg(i),this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i,n=this.options,o=s.point(n[e+"Size"]);i="shadow"===e?s.point(n.shadowAnchor||n.iconAnchor):s.point(n.iconAnchor),!i&&o&&(i=o.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+n.className,i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return e=e||n.createElement("img"),e.src=t,e},_getIconUrl:function(t){return s.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),s.icon=function(t){return new s.Icon(t)},s.Icon.Default=s.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];s.Browser.retina&&"icon"===t&&(t+="-2x");var i=s.Icon.Default.imagePath;if(!i)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+t+".png"}}),s.Icon.Default.imagePath=function(){var t,e,i,o,r=n.getElementsByTagName("script"),s=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=r.length;e>t;t++)if(i=r[t].src,i.match(s))return o=i.split(s)[0],(o?o+"/":"")+"images"}(),s.Marker=s.Class.extend({includes:s.Mixin.Events,options:{icon:new s.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){s.setOptions(this,e),this._latlng=s.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=s.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation,n=i?"leaflet-zoom-animated":"leaflet-zoom-hide",o=t.icon.createIcon(this._icon),r=!1;o!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(o.title=t.title),t.alt&&(o.alt=t.alt)),s.DomUtil.addClass(o,n),t.keyboard&&(o.tabIndex="0"),this._icon=o,this._initInteraction(),t.riseOnHover&&s.DomEvent.on(o,"mouseover",this._bringToFront,this).on(o,"mouseout",this._resetZIndex,this);var a=t.icon.createShadow(this._shadow),l=!1;a!==this._shadow&&(this._removeShadow(),l=!0),a&&s.DomUtil.addClass(a,n),this._shadow=a,t.opacity<1&&this._updateOpacity();var u=this._map._panes;r&&u.markerPane.appendChild(this._icon),a&&l&&u.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&s.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){s.DomUtil.setPosition(this._icon,t),this._shadow&&s.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];s.DomUtil.addClass(t,"leaflet-clickable"),s.DomEvent.on(t,"click",this._onMouseClick,this),s.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var i=0;i<e.length;i++)s.DomEvent.on(t,e[i],this._fireMouseEvent,this);s.Handler.MarkerDrag&&(this.dragging=new s.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&s.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&s.DomEvent.preventDefault(t),"mousedown"!==t.type?s.DomEvent.stopPropagation(t):s.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){s.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&s.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),s.marker=function(t,e){return new s.Marker(t,e)},s.DivIcon=s.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:n.createElement("div"),i=this.options;return!1!==i.html?e.innerHTML=i.html:e.innerHTML="",i.bgPos&&(e.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),s.divIcon=function(t){return new s.DivIcon(t)},s.Map.mergeOptions({closePopupOnClick:!0}),s.Popup=s.Class.extend({includes:s.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){s.setOptions(this,t),this._source=e,this._animated=s.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&s.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&s.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),s.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&s.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=s.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",i=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),n=this._container=s.DomUtil.create("div",i);this.options.closeButton&&(t=this._closeButton=s.DomUtil.create("a",e+"-close-button",n),t.href="#close",t.innerHTML="&#215;",s.DomEvent.disableClickPropagation(t),s.DomEvent.on(t,"click",this._onCloseButtonClick,this));var o=this._wrapper=s.DomUtil.create("div",e+"-content-wrapper",n);s.DomEvent.disableClickPropagation(o),this._contentNode=s.DomUtil.create("div",e+"-content",o),s.DomEvent.disableScrollPropagation(this._contentNode),s.DomEvent.on(o,"contextmenu",s.DomEvent.stopPropagation),this._tipContainer=s.DomUtil.create("div",e+"-tip-container",n),this._tip=s.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&n>o?(e.height=o+"px",s.DomUtil.addClass(t,r)):s.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,i=s.point(this.options.offset);e&&s.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);s.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,n=new s.Point(this._containerLeft,-e-this._containerBottom);this._animated&&n._add(s.DomUtil.getPosition(this._container));var o=t.layerPointToContainerPoint(n),r=s.point(this.options.autoPanPadding),a=s.point(this.options.autoPanPaddingTopLeft||r),l=s.point(this.options.autoPanPaddingBottomRight||r),u=t.getSize(),h=0,c=0;o.x+i+l.x>u.x&&(h=o.x+i-u.x+l.x),o.x-h-a.x<0&&(h=o.x-a.x),o.y+e+l.y>u.y&&(c=o.y+e-u.y+l.y),o.y-c-a.y<0&&(c=o.y-a.y),(h||c)&&t.fire("autopanstart").panBy([h,c])}},_onCloseButtonClick:function(t){this._close(),s.DomEvent.stop(t)}}),s.popup=function(t,e){return new s.Popup(t,e)},s.Map.include({openPopup:function(t,e,i){if(this.closePopup(),!(t instanceof s.Popup)){var n=t;t=new s.Popup(i).setLatLng(e).setContent(n)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),s.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var i=s.point(this.options.icon.options.popupAnchor||[0,0]);return i=i.add(s.Popup.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=s.extend({offset:i},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof s.Popup?(s.setOptions(t,e),this._popup=t,t._source=this):this._popup=new s.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),s.LayerGroup=s.Class.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return s.stamp(t)}}),s.layerGroup=function(t){return new s.LayerGroup(t)},s.FeatureGroup=s.LayerGroup.extend({includes:s.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(s.FeatureGroup.EVENTS,this._propagateEvent,this),s.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),"off"in t&&t.off(s.FeatureGroup.EVENTS,this._propagateEvent,this),s.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new s.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof s.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=s.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),s.featureGroup=function(t){return new s.FeatureGroup(t)},s.Path=s.Class.extend({includes:[s.Mixin.Events],statics:{CLIP_PADDING:function(){var t=s.Browser.mobile?1280:2e3,e=(t/Math.max(i.outerWidth,i.outerHeight)-1)/2;return Math.max(0,Math.min(.5,e))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){s.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,s.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return s.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),s.Map.include({_updatePathViewport:function(){var t=s.Path.CLIP_PADDING,e=this.getSize(),i=s.DomUtil.getPosition(this._mapPane),n=i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),o=n.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new s.Bounds(n,o)}}),s.Path.SVG_NS="http://www.w3.org/2000/svg",s.Browser.svg=!(!n.createElementNS||!n.createElementNS(s.Path.SVG_NS,"svg").createSVGRect),s.Path=s.Path.extend({statics:{SVG:s.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,i=t.firstChild;return e&&i!==e&&t.insertBefore(e,i),this},getPathString:function(){},_createElement:function(t){return n.createElementNS(s.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&s.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(s.Browser.svg||!s.Browser.vml)&&s.DomUtil.addClass(this._path,"leaflet-clickable"),s.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)s.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this._map&&this.hasEventListeners(t.type)){var e=this._map,i=e.mouseEventToContainerPoint(t),n=e.containerPointToLayerPoint(i),o=e.layerPointToLatLng(n);this.fire(t.type,{latlng:o,layerPoint:n,containerPoint:i,originalEvent:t}),"contextmenu"===t.type&&s.DomEvent.preventDefault(t),"mousemove"!==t.type&&s.DomEvent.stopPropagation(t)}}}),s.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=s.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&s.Browser.any3d?(s.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):s.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(i)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,n=i.x-e.x,o=i.y-e.y,r=this._pathRoot,a=this._panes.overlayPane;s.Browser.mobileWebkit&&a.removeChild(r),s.DomUtil.setPosition(r,e),r.setAttribute("width",n),r.setAttribute("height",o),r.setAttribute("viewBox",[e.x,e.y,n,o].join(" ")),s.Browser.mobileWebkit&&a.appendChild(r)}}}),s.Path.include({bindPopup:function(t,e){return t instanceof s.Popup?this._popup=t:((!this._popup||e)&&(this._popup=new s.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),s.Browser.vml=!s.Browser.svg&&function(){try{var t=n.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==e(i.adj)}catch(t){return!1}}(),s.Path=s.Browser.svg||!s.Browser.vml?s.Path:s.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return n.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return n.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return n.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");s.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&s.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",n.appendChild(t)),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=s.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle="",i.lineCap&&(t.endcap=i.lineCap.replace("butt","flat")),i.lineJoin&&(t.joinstyle=i.lineJoin)):t&&(n.removeChild(t),this._stroke=null),i.fill?(e||(e=this._fill=this._createElement("fill"),n.appendChild(e)),e.color=i.fillColor||i.color,e.opacity=i.fillOpacity):e&&(n.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),s.Map.include(s.Browser.svg||!s.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=n.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),s.Browser.canvas=function(){return!!n.createElement("canvas").getContext}(),s.Path=s.Path.SVG&&!i.L_PREFER_CANVAS||!s.Browser.canvas?s.Path:s.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return s.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!s.Path._updateRequest&&(s.Path._updateRequest=s.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){s.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color),t.lineCap&&(this._ctx.lineCap=t.lineCap),t.lineJoin&&(this._ctx.lineJoin=t.lineJoin)},_drawPath:function(){var t,e,i,n,o,r;for(this._ctx.beginPath(),t=0,i=this._parts.length;i>t;t++){for(e=0,n=this._parts[t].length;n>e;e++)o=this._parts[t][e],r=(0===e?"move":"line")+"To",this._ctx[r](o.x,o.y);this instanceof s.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill(e.fillRule||"evenodd")),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(t){this._containsPoint(t.layerPoint)&&this.fire(t.type,t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),s.Map.include(s.Path.SVG&&!i.L_PREFER_CANVAS||!s.Browser.canvas?{}:{_initPathRoot:function(){var t,e=this._pathRoot;e||(e=this._pathRoot=n.createElement("canvas"),e.style.position="absolute",t=this._canvasCtx=e.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),n=this._pathRoot;s.DomUtil.setPosition(n,e),n.width=i.x,n.height=i.y,n.getContext("2d").translate(-e.x,-e.y)}}}),s.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,i){var n=t.length,r=("undefined"==typeof Uint8Array?"undefined":e(Uint8Array))!=o+""?Uint8Array:Array,s=new r(n);s[0]=s[n-1]=1,this._simplifyDPStep(t,s,i,0,n-1);var a,l=[];for(a=0;n>a;a++)s[a]&&l.push(t[a]);return l},_simplifyDPStep:function(t,e,i,n,o){var r,s,a,l=0;for(s=n+1;o-1>=s;s++)(a=this._sqClosestPointOnSegment(t[s],t[n],t[o],!0))>l&&(r=s,l=a);l>i&&(e[r]=1,this._simplifyDPStep(t,e,i,n,r),this._simplifyDPStep(t,e,i,r,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,r=t.length;r>n;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return r-1>o&&i.push(t[r-1]),i},clipSegment:function(t,e,i,n){var o,r,s,a=n?this._lastCode:this._getBitCode(t,i),l=this._getBitCode(e,i);for(this._lastCode=l;;){if(!(a|l))return[t,e];if(a&l)return!1;o=a||l,r=this._getEdgeIntersection(t,e,o,i),s=this._getBitCode(r,i),o===a?(t=r,a=s):(e=r,l=s)}},_getEdgeIntersection:function(t,e,i,n){var o=e.x-t.x,r=e.y-t.y,a=n.min,l=n.max;return 8&i?new s.Point(t.x+o*(l.y-t.y)/r,l.y):4&i?new s.Point(t.x+o*(a.y-t.y)/r,a.y):2&i?new s.Point(l.x,t.y+r*(l.x-t.x)/o):1&i?new s.Point(a.x,t.y+r*(a.x-t.x)/o):void 0},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var o,r=e.x,a=e.y,l=i.x-r,u=i.y-a,h=l*l+u*u;return h>0&&(o=((t.x-r)*l+(t.y-a)*u)/h,o>1?(r=i.x,a=i.y):o>0&&(r+=l*o,a+=u*o)),l=t.x-r,u=t.y-a,n?l*l+u*u:new s.Point(r,a)}},s.Polyline=s.Path.extend({initialize:function(t,e){s.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,i="";e>t;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(s.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,i,n=1/0,o=this._parts,r=null,a=0,l=o.length;l>a;a++)for(var u=o[a],h=1,c=u.length;c>h;h++){e=u[h-1],i=u[h];var p=s.LineUtil._sqClosestPointOnSegment(t,e,i,!0);n>p&&(n=p,r=s.LineUtil._sqClosestPointOnSegment(t,e,i))}return r&&(r.distance=Math.sqrt(n)),r},getBounds:function(){return new s.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var i,n,o=e?t:[];for(i=0,n=t.length;n>i;i++){if(s.Util.isArray(t[i])&&"number"!=typeof t[i][0])return;o[i]=s.latLng(t[i])}return o},_initEvents:function(){s.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,i=s.Path.VML,n=0,o=t.length,r="";o>n;n++)e=t[n],i&&e._round(),r+=(n?"L":"M")+e.x+" "+e.y;return r},_clipPoints:function(){var t,e,i,n=this._originalPoints,o=n.length;if(this.options.noClip)return void(this._parts=[n]);this._parts=[];var r=this._parts,a=this._map._pathViewport,l=s.LineUtil;for(t=0,e=0;o-1>t;t++)(i=l.clipSegment(n[t],n[t+1],a,t))&&(r[e]=r[e]||[],r[e].push(i[0]),(i[1]!==n[t+1]||t===o-2)&&(r[e].push(i[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=s.LineUtil,i=0,n=t.length;n>i;i++)t[i]=e.simplify(t[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),s.Path.prototype._updatePath.call(this))}}),s.polyline=function(t,e){return new s.Polyline(t,e)},s.PolyUtil={},s.PolyUtil.clipPolygon=function(t,e){var i,n,o,r,a,l,u,h,c,p=[1,4,2,8],d=s.LineUtil;for(n=0,u=t.length;u>n;n++)t[n]._code=d._getBitCode(t[n],e);for(r=0;4>r;r++){for(h=p[r],i=[],n=0,u=t.length,o=u-1;u>n;o=n++)a=t[n],l=t[o],a._code&h?l._code&h||(c=d._getEdgeIntersection(l,a,h,e),c._code=d._getBitCode(c,e),i.push(c)):(l._code&h&&(c=d._getEdgeIntersection(l,a,h,e),c._code=d._getBitCode(c,e),i.push(c)),i.push(a));t=i}return t},s.Polygon=s.Polyline.extend({options:{fill:!0},initialize:function(t,e){s.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,i,n;if(t&&s.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,i=this._holes.length;i>e;e++)n=this._holes[e]=this._convertLatLngs(this._holes[e]),n[0].equals(n[n.length-1])&&n.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(s.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,i,n;for(t=0,i=this._holes.length;i>t;t++)for(this._holePoints[t]=[],e=0,n=this._holes[t].length;n>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},setLatLngs:function(t){return t&&s.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):s.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var i=0,n=this._parts.length;n>i;i++){var o=s.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);o.length&&e.push(o)}this._parts=e}},_getPathPartStr:function(t){return s.Polyline.prototype._getPathPartStr.call(this,t)+(s.Browser.svg?"z":"x")}}),s.polygon=function(t,e){return new s.Polygon(t,e)},function(){function t(t){return s.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var i=0,n=e.length;for(this.eachLayer(function(t){n>i?t.setLatLngs(e[i++]):this.removeLayer(t)},this);n>i;)this.addLayer(new t(e[i++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}s.MultiPolyline=t(s.Polyline),s.MultiPolygon=t(s.Polygon),s.multiPolyline=function(t,e){return new s.MultiPolyline(t,e)},s.multiPolygon=function(t,e){return new s.MultiPolygon(t,e)}}(),s.Rectangle=s.Polygon.extend({initialize:function(t,e){s.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=s.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),s.rectangle=function(t,e){return new s.Rectangle(t,e)},s.Circle=s.Path.extend({initialize:function(t,e,i){s.Path.prototype.initialize.call(this,i),this._latlng=s.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=s.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,i=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,i=this._latlng;return new s.LatLngBounds([i.lat-e,i.lng-t],[i.lat+e,i.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":s.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(s.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y}}),s.circle=function(t,e,i){return new s.Circle(t,e,i)},s.CircleMarker=s.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){s.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){s.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return s.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),s.circleMarker=function(t,e){return new s.CircleMarker(t,e)},s.Polyline.include(s.Path.CANVAS?{_containsPoint:function(t,e){var i,n,o,r,a,l,u,h=this.options.weight/2;for(s.Browser.touch&&(h+=10),i=0,r=this._parts.length;r>i;i++)for(u=this._parts[i],n=0,a=u.length,o=a-1;a>n;o=n++)if((e||0!==n)&&(l=s.LineUtil.pointToSegmentDistance(t,u[o],u[n]),h>=l))return!0;return!1}}:{}),s.Polygon.include(s.Path.CANVAS?{_containsPoint:function(t){var e,i,n,o,r,a,l,u,h=!1;if(s.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(o=0,l=this._parts.length;l>o;o++)for(e=this._parts[o],r=0,u=e.length,a=u-1;u>r;a=r++)i=e[r],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(h=!h);return h}}:{}),s.Circle.include(s.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}}:{}),s.CircleMarker.include(s.Path.CANVAS?{_updateStyle:function(){s.Path.prototype._updateStyle.call(this)}}:{}),s.GeoJSON=s.FeatureGroup.extend({initialize:function(t,e){s.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=s.Util.isArray(t)?t:t.features;if(o){for(e=0,i=o.length;i>e;e++)n=o[e],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(o[e]);return this}var r=this.options;if(!r.filter||r.filter(t)){var a=s.GeoJSON.geometryToLayer(t,r.pointToLayer,r.coordsToLatLng,r);return a.feature=s.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)}},resetStyle:function(t){var e=this.options.style;e&&(s.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),s.extend(s.GeoJSON,{geometryToLayer:function(t,e,i,n){var o,r,a,l,u="Feature"===t.type?t.geometry:t,h=u.coordinates,c=[];switch(i=i||this.coordsToLatLng,u.type){case"Point":return o=i(h),e?e(t,o):new s.Marker(o);case"MultiPoint":for(a=0,l=h.length;l>a;a++)o=i(h[a]),c.push(e?e(t,o):new s.Marker(o));return new s.FeatureGroup(c);case"LineString":return r=this.coordsToLatLngs(h,0,i),new s.Polyline(r,n);case"Polygon":if(2===h.length&&!h[1].length)throw new Error("Invalid GeoJSON object.");return r=this.coordsToLatLngs(h,1,i),new s.Polygon(r,n);case"MultiLineString":return r=this.coordsToLatLngs(h,1,i),new s.MultiPolyline(r,n);case"MultiPolygon":return r=this.coordsToLatLngs(h,2,i),new s.MultiPolygon(r,n);case"GeometryCollection":for(a=0,l=u.geometries.length;l>a;a++)c.push(this.geometryToLayer({geometry:u.geometries[a],type:"Feature",properties:t.properties},e,i,n));return new s.FeatureGroup(c);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new s.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,i){var n,o,r,s=[];for(o=0,r=t.length;r>o;o++)n=e?this.coordsToLatLngs(t[o],e-1,i):(i||this.coordsToLatLng)(t[o]),s.push(n);return s},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==o&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],i=0,n=t.length;n>i;i++)e.push(s.GeoJSON.latLngToCoords(t[i]));return e},getFeature:function(t,e){return t.feature?s.extend({},t.feature,{geometry:e}):s.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var l={toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"Point",coordinates:s.GeoJSON.latLngToCoords(this.getLatLng())})}};s.Marker.include(l),s.Circle.include(l),s.CircleMarker.include(l),s.Polyline.include({toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"LineString",coordinates:s.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),s.Polygon.include({toGeoJSON:function(){var t,e,i,n=[s.GeoJSON.latLngsToCoords(this.getLatLngs())];if(n[0].push(n[0][0]),this._holes)for(t=0,e=this._holes.length;e>t;t++)i=s.GeoJSON.latLngsToCoords(this._holes[t]),i.push(i[0]),n.push(i);return s.GeoJSON.getFeature(this,{type:"Polygon",coordinates:n})}}),function(){function t(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),s.GeoJSON.getFeature(this,{type:t,coordinates:e})}}s.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),s.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),s.LayerGroup.include({toGeoJSON:function(){var e,i=this.feature&&this.feature.geometry,n=[];if(i&&"MultiPoint"===i.type)return t("MultiPoint").call(this);var o=i&&"GeometryCollection"===i.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),n.push(o?e.geometry:s.GeoJSON.asFeature(e)))}),o?s.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}})}(),s.geoJson=function(t,e){return new s.GeoJSON(t,e)},s.DomEvent={addListener:function(t,e,i,n){var o,r,a,l=s.stamp(i),u="_leaflet_"+e+l;return t[u]?this:(o=function(e){return i.call(n||t,e||s.DomEvent._getEvent())},s.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,o,l):(s.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,o,l),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1)):"mouseenter"===e||"mouseleave"===e?(r=o,a="mouseenter"===e?"mouseover":"mouseout",o=function(e){return s.DomEvent._checkMouse(t,e)?r(e):void 0},t.addEventListener(a,o,!1)):"click"===e&&s.Browser.android?(r=o,o=function(t){return s.DomEvent._filterClick(t,r)},t.addEventListener(e,o,!1)):t.addEventListener(e,o,!1):"attachEvent"in t&&t.attachEvent("on"+e,o),t[u]=o,this))},removeListener:function(t,e,i){var n=s.stamp(i),o="_leaflet_"+e+n,r=t[o];return r?(s.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,n):s.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,n):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",r,!1),t.removeEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1):t.removeEventListener(e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[o]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,s.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=s.DomEvent.stopPropagation;return s.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=s.DomEvent.stopPropagation,i=s.Draggable.START.length-1;i>=0;i--)s.DomEvent.on(t,s.Draggable.START[i],e);return s.DomEvent.on(t,"click",s.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return s.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new s.Point(t.clientX,t.clientY);var i=e.getBoundingClientRect();return new s.Point(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){s.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t},_getEvent:function(){var t=i.event;if(!t)for(var e=arguments.callee.caller;e&&(!(t=e.arguments[0])||i.Event!==t.constructor);)e=e.caller;return t},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent.timeStamp,n=s.DomEvent._lastClick&&i-s.DomEvent._lastClick;return n&&n>100&&500>n||t.target._simulatedClick&&!t._simulated?void s.DomEvent.stop(t):(s.DomEvent._lastClick=i,e(t))}},s.DomEvent.on=s.DomEvent.addListener,s.DomEvent.off=s.DomEvent.removeListener,s.Draggable=s.Class.extend({includes:s.Mixin.Events,statics:{START:s.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=s.Draggable.START.length-1;t>=0;t--)s.DomEvent.on(this._dragStartTarget,s.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=s.Draggable.START.length-1;t>=0;t--)s.DomEvent.off(this._dragStartTarget,s.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(s.DomEvent.stopPropagation(t),!s.Draggable._disabled&&(s.DomUtil.disableImageDrag(),s.DomUtil.disableTextSelection(),!this._moving))){var e=t.touches?t.touches[0]:t;this._startPoint=new s.Point(e.clientX,e.clientY),this._startPos=this._newPos=s.DomUtil.getPosition(this._element),s.DomEvent.on(n,s.Draggable.MOVE[t.type],this._onMove,this).on(n,s.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new s.Point(e.clientX,e.clientY),o=i.subtract(this._startPoint);(o.x||o.y)&&(s.Browser.touch&&Math.abs(o.x)+Math.abs(o.y)<3||(s.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=s.DomUtil.getPosition(this._element).subtract(o),s.DomUtil.addClass(n.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,s.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,s.Util.cancelAnimFrame(this._animRequest),this._animRequest=s.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),s.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){s.DomUtil.removeClass(n.body,"leaflet-dragging"),this._lastTarget&&(s.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in s.Draggable.MOVE)s.DomEvent.off(n,s.Draggable.MOVE[t],this._onMove).off(n,s.Draggable.END[t],this._onUp);s.DomUtil.enableImageDrag(),s.DomUtil.enableTextSelection(),this._moved&&this._moving&&(s.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),s.Handler=s.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),s.Map.mergeOptions({dragging:!0,inertia:!s.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:s.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),s.Map.Drag=s.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new s.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,r=(n+e+i)%t-e-i,s=Math.abs(o+i)<Math.abs(r+i)?o:r;this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,i=e.options,n=+new Date-this._lastTime,o=!i.inertia||n>i.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),o)e.fire("moveend");else{var r=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+n-this._times[0])/1e3,l=i.easeLinearity,u=r.multiplyBy(l/a),h=u.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,h),p=u.multiplyBy(c/h),d=c/(i.inertiaDeceleration*l),f=p.multiplyBy(-d/2).round();f.x&&f.y?(f=e._limitOffset(f,e.options.maxBounds),s.Util.requestAnimFrame(function(){e.panBy(f,{duration:d,easeLinearity:l,noMoveStart:!0})})):e.fire("moveend")}}}),s.Map.addInitHook("addHandler","dragging",s.Map.Drag),s.Map.mergeOptions({doubleClickZoom:!0}),s.Map.DoubleClickZoom=s.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}}),s.Map.addInitHook("addHandler","doubleClickZoom",s.Map.DoubleClickZoom),s.Map.mergeOptions({scrollWheelZoom:!0}),s.Map.ScrollWheelZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),s.DomEvent.on(this._map._container,"MozMousePixelScroll",s.DomEvent.preventDefault),this._delta=0},removeHooks:function(){s.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),s.DomEvent.off(this._map._container,"MozMousePixelScroll",s.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=s.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s.bind(this._performZoom,this),i),s.DomEvent.preventDefault(t),s.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,i=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(i+e):t.setZoomAround(this._lastMousePos,i+e))}}),s.Map.addInitHook("addHandler","scrollWheelZoom",s.Map.ScrollWheelZoom),s.extend(s.DomEvent,{_touchstart:s.Browser.msPointer?"MSPointerDown":s.Browser.pointer?"pointerdown":"touchstart",_touchend:s.Browser.msPointer?"MSPointerUp":s.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,i){function o(t){var e;if(s.Browser.pointer?(f.push(t.pointerId),e=f.length):e=t.touches.length,!(e>1)){var i=Date.now(),n=i-(a||i);l=t.touches?t.touches[0]:t,u=n>0&&h>=n,a=i}}function r(t){if(s.Browser.pointer){var i=f.indexOf(t.pointerId);if(-1===i)return;f.splice(i,1)}if(u){if(s.Browser.pointer){var n,o={};for(var r in l)n=l[r],o[r]="function"==typeof n?n.bind(l):n;l=o}l.type="dblclick",e(l),a=null}}var a,l,u=!1,h=250,c="_leaflet_",p=this._touchstart,d=this._touchend,f=[];t[c+p+i]=o,t[c+d+i]=r;var m=s.Browser.pointer?n.documentElement:t;return t.addEventListener(p,o,!1),m.addEventListener(d,r,!1),s.Browser.pointer&&m.addEventListener(s.DomEvent.POINTER_CANCEL,r,!1),this},removeDoubleTapListener:function(t,e){var i="_leaflet_";return t.removeEventListener(this._touchstart,t[i+this._touchstart+e],!1),(s.Browser.pointer?n.documentElement:t).removeEventListener(this._touchend,t[i+this._touchend+e],!1),s.Browser.pointer&&n.documentElement.removeEventListener(s.DomEvent.POINTER_CANCEL,t[i+this._touchend+e],!1),this}}),s.extend(s.DomEvent,{POINTER_DOWN:s.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:s.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:s.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:s.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,i,n){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,i,n);case"touchend":return this.addPointerListenerEnd(t,e,i,n);case"touchmove":return this.addPointerListenerMove(t,e,i,n);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,e,i,o){var r=this._pointers,a=function(t){"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&s.DomEvent.preventDefault(t);for(var e=!1,n=0;n<r.length;n++)if(r[n].pointerId===t.pointerId){e=!0;break}e||r.push(t),t.touches=r.slice(),t.changedTouches=[t],i(t)};if(t["_leaflet_touchstart"+o]=a,t.addEventListener(this.POINTER_DOWN,a,!1),!this._pointerDocumentListener){var l=function(t){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r.splice(e,1);break}};n.documentElement.addEventListener(this.POINTER_UP,l,!1),n.documentElement.addEventListener(this.POINTER_CANCEL,l,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,i,n){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r[e]=t;break}t.touches=r.slice(),t.changedTouches=[t],i(t)}}var r=this._pointers;return t["_leaflet_touchmove"+n]=o,t.addEventListener(this.POINTER_MOVE,o,!1),this},addPointerListenerEnd:function(t,e,i,n){var o=this._pointers,r=function(t){for(var e=0;e<o.length;e++)if(o[e].pointerId===t.pointerId){o.splice(e,1);break}t.touches=o.slice(),t.changedTouches=[t],i(t)};return t["_leaflet_touchend"+n]=r,t.addEventListener(this.POINTER_UP,r,!1),t.addEventListener(this.POINTER_CANCEL,r,!1),this},removePointerListener:function(t,e,i){var n=t["_leaflet_"+e+i];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,n,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,n,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,n,!1),t.removeEventListener(this.POINTER_CANCEL,n,!1)}return this}}),s.Map.mergeOptions({touchZoom:s.Browser.touch&&!s.Browser.android23,bounceAtZoomLimits:!0}),s.Map.TouchZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),o=e.mouseEventToLayerPoint(t.touches[1]),r=e._getCenterLayerPoint();this._startCenter=i.add(o)._divideBy(2),this._startDist=i.distanceTo(o),this._moved=!1,this._zooming=!0,this._centerOffset=r.subtract(this._startCenter),e._panAnim&&e._panAnim.stop(),s.DomEvent.on(n,"touchmove",this._onTouchMove,this).on(n,"touchend",this._onTouchEnd,this),s.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),n=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(n)/this._startDist,this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(e.options.bounceAtZoomLimits||!(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1))&&(this._moved||(s.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),s.Util.cancelAnimFrame(this._animRequest),this._animRequest=s.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),s.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),n=t.getScaleZoom(this._scale);t._animateZoom(i,n,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var t=this._map;this._zooming=!1,s.DomUtil.removeClass(t._mapPane,"leaflet-touching"),s.Util.cancelAnimFrame(this._animRequest),s.DomEvent.off(n,"touchmove",this._onTouchMove).off(n,"touchend",this._onTouchEnd);var e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),o=t.getZoom(),r=t.getScaleZoom(this._scale)-o,a=r>0?Math.ceil(r):Math.floor(r),l=t._limitZoom(o+a),u=t.getZoomScale(l)/this._scale;t._animateZoom(i,l,e,u)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),s.Map.addInitHook("addHandler","touchZoom",s.Map.TouchZoom),s.Map.mergeOptions({tap:!0,tapTolerance:15}),s.Map.Tap=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(s.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new s.Point(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&s.DomUtil.addClass(i,"leaflet-active"),this._holdTimeout=setTimeout(s.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),s.DomEvent.on(n,"touchmove",this._onMove,this).on(n,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),s.DomEvent.off(n,"touchmove",this._onMove,this).off(n,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&s.DomUtil.removeClass(i,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new s.Point(e.clientX,e.clientY)},_simulateEvent:function(t,e){var o=n.createEvent("MouseEvents");o._simulated=!0,e.target._simulatedClick=!0,o.initMouseEvent(t,!0,!0,i,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(o)}}),s.Browser.touch&&!s.Browser.pointer&&s.Map.addInitHook("addHandler","tap",s.Map.Tap),s.Map.mergeOptions({boxZoom:!0}),s.Map.BoxZoom=s.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){s.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){s.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){return this._moved=!1,!(!t.shiftKey||1!==t.which&&1!==t.button)&&(s.DomUtil.disableTextSelection(),s.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),void s.DomEvent.on(n,"mousemove",this._onMouseMove,this).on(n,"mouseup",this._onMouseUp,this).on(n,"keydown",this._onKeyDown,this))},_onMouseMove:function(t){this._moved||(this._box=s.DomUtil.create("div","leaflet-zoom-box",this._pane),s.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,i=this._box,n=this._map.mouseEventToLayerPoint(t),o=n.subtract(e),r=new s.Point(Math.min(n.x,e.x),Math.min(n.y,e.y));s.DomUtil.setPosition(i,r),this._moved=!0,i.style.width=Math.max(0,Math.abs(o.x)-4)+"px",i.style.height=Math.max(0,Math.abs(o.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),s.DomUtil.enableTextSelection(),s.DomUtil.enableImageDrag(),s.DomEvent.off(n,"mousemove",this._onMouseMove).off(n,"mouseup",this._onMouseUp).off(n,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,i=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(i)){var n=new s.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(i));e.fitBounds(n),e.fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),s.Map.addInitHook("addHandler","boxZoom",s.Map.BoxZoom),s.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),s.Map.Keyboard=s.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),s.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;s.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var t=n.body,e=n.documentElement,o=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),i.scrollTo(r,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;i>e;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;i>e;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;i>e;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;i>e;e++)n[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;i>e;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;i>e;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){s.DomEvent.on(n,"keydown",this._onKeyDown,this)},_removeHooks:function(){s.DomEvent.off(n,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,i=this._map;if(e in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;i.panBy(this._panKeys[e]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else{if(!(e in this._zoomKeys))return;i.setZoom(i.getZoom()+this._zoomKeys[e])}s.DomEvent.stop(t)}}),s.Map.addInitHook("addHandler","keyboard",s.Map.Keyboard),s.Handler.MarkerDrag=s.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new s.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),s.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),s.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,i=s.DomUtil.getPosition(t._icon),n=t._map.layerPointToLatLng(i);e&&s.DomUtil.setPosition(e,i),t._latlng=n,t.fire("move",{latlng:n}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),s.Control=s.Class.extend({options:{position:"topright"},initialize:function(t){s.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return s.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this},removeFrom:function(t){var e=this.getPosition();return t._controlCorners[e].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),s.control=function(t){return new s.Control(t)},s.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,o){var r=i+t+" "+i+o;e[t+o]=s.DomUtil.create("div",r,n)}var e=this._controlCorners={},i="leaflet-",n=this._controlContainer=s.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),s.Control.Zoom=s.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=s.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",i,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",i,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,i,n,o,r){var a=s.DomUtil.create("a",i,n);a.innerHTML=t,a.href="#",a.title=e;var l=s.DomEvent.stopPropagation;return s.DomEvent.on(a,"click",l).on(a,"mousedown",l).on(a,"dblclick",l).on(a,"click",s.DomEvent.preventDefault).on(a,"click",o,r).on(a,"click",this._refocusOnMap,r),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";s.DomUtil.removeClass(this._zoomInButton,e),s.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&s.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&s.DomUtil.addClass(this._zoomInButton,e)}}),s.Map.mergeOptions({zoomControl:!0}),s.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new s.Control.Zoom,this.addControl(this.zoomControl))}),s.control.zoom=function(t){return new s.Control.Zoom(t)},s.Control.Attribution=s.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){s.setOptions(this,t),this._attributions={}},onAdd:function(t){this._container=s.DomUtil.create("div","leaflet-control-attribution"),s.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):void 0},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):void 0},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),s.Map.mergeOptions({attributionControl:!0}),s.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new s.Control.Attribution).addTo(this))}),s.control.attribution=function(t){return new s.Control.Attribution(t)},s.Control.Scale=s.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",i=s.DomUtil.create("div",e),n=this.options;return this._addScales(n,e,i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=s.DomUtil.create("div",e+"-line",i)),t.imperial&&(this._iScale=s.DomUtil.create("div",e+"-line",i))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180),n=i*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),r=this.options,s=0;o.x>0&&(s=n*(r.maxWidth/o.x)),this._updateScales(r,s)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,o=3.2808399*t,r=this._iScale;o>5280?(e=o/5280,i=this._getRoundNum(e),r.style.width=this._getScaleWidth(i/e)+"px",r.innerHTML=i+" mi"):(n=this._getRoundNum(o),r.style.width=this._getScaleWidth(n/o)+"px",r.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),s.control.scale=function(t){return new s.Control.Scale(t)},s.Control.Layers=s.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,i){s.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=s.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=s.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),s.Browser.touch?s.DomEvent.on(e,"click",s.DomEvent.stopPropagation):s.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var i=this._form=s.DomUtil.create("form",t+"-list");if(this.options.collapsed){s.Browser.android||s.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var n=this._layersLink=s.DomUtil.create("a",t+"-toggle",e);n.href="#",n.title="Layers",s.Browser.touch?s.DomEvent.on(n,"click",s.DomEvent.stop).on(n,"click",this._expand,this):s.DomEvent.on(n,"focus",this._expand,this),s.DomEvent.on(i,"click",function(){setTimeout(s.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=s.DomUtil.create("div",t+"-base",i),this._separator=s.DomUtil.create("div",t+"-separator",i),this._overlaysList=s.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_addLayer:function(t,e,i){var n=s.stamp(t);this._layers[n]={layer:t,name:e,overlay:i},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,i=!1,n=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),n=n||e.overlay,i=i||!e.overlay;this._separator.style.display=n&&i?"":"none"}},_onLayerChange:function(t){var e=this._layers[s.stamp(t.layer)];if(e){this._handlingClick||this._update();var i=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)}},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';e&&(i+=' checked="checked"'),i+="/>";var o=n.createElement("div");return o.innerHTML=i,o.firstChild},_addItem:function(t){var e,i=n.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?(e=n.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=o):e=this._createRadioElement("leaflet-base-layers",o),e.layerId=s.stamp(t.layer),s.DomEvent.on(e,"click",this._onInputClick,this);var r=n.createElement("span");return r.innerHTML=" "+t.name,i.appendChild(e),i.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),i},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),o=n.length;for(this._handlingClick=!0,t=0;o>t;t++)e=n[t],i=this._layers[e.layerId],e.checked&&!this._map.hasLayer(i.layer)?this._map.addLayer(i.layer):!e.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){s.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),s.control.layers=function(t,e,i){return new s.Control.Layers(t,e,i)},s.PosAnimation=s.Class.extend({includes:s.Mixin.Events,run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[s.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(n||.5)+",1)",s.DomEvent.on(t,s.DomUtil.TRANSITION_END,this._onTransitionEnd,this),s.DomUtil.setPosition(t,e),s.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(s.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(s.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),s.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var t,e,n,o=this._el,r=i.getComputedStyle(o);if(s.Browser.any3d){if(!(n=r[s.DomUtil.TRANSFORM].match(this._transformRe)))return;t=parseFloat(n[1]),e=parseFloat(n[2])}else t=parseFloat(r.left),e=parseFloat(r.top);return new s.Point(t,e,!0)},_onTransitionEnd:function(){s.DomEvent.off(this._el,s.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[s.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),s.Map.include({setView:function(t,e,i){if(e=e===o?this._zoom:this._limitZoom(e),t=this._limitCenter(s.latLng(t),e,this.options.maxBounds),i=i||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!i.reset&&!0!==i){i.animate!==o&&(i.zoom=s.extend({animate:i.animate},i.zoom),i.pan=s.extend({animate:i.animate},i.pan));if(this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan))return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=s.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new s.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){s.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){s.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)}}),s.PosAnimation=s.DomUtil.TRANSITION?s.PosAnimation:s.PosAnimation.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=s.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=s.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));s.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){s.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),s.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),s.DomUtil.TRANSITION&&s.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&s.DomUtil.TRANSITION&&s.Browser.any3d&&!s.Browser.android23&&!s.Browser.mobileOpera,this._zoomAnimated&&s.DomEvent.on(this._mapPane,s.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),s.Map.include(s.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n),r=this._getCenterLayerPoint()._add(o);return!(!0!==i.animate&&!this.getSize().contains(o))&&(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,r,n,null,!0),!0)},_animateZoom:function(t,e,i,n,o,r,a){a||(this._animatingZoom=!0),s.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,s.Draggable&&(s.Draggable._disabled=!0),s.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:i,scale:n,delta:o,backwards:r}),setTimeout(s.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,s.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),s.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),s.Draggable&&(s.Draggable._disabled=!1)},this))}}:{}),s.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,i=s.DomUtil.TRANSFORM,n=t.delta?s.DomUtil.getTranslateString(t.delta):e.style[i],o=s.DomUtil.getScaleString(t.scale,t.origin);e.style[i]=t.backwards?o+" "+n:n+" "+o},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),s.Util.falseFn(e.offsetWidth);var i=this._map.getZoom();(i>this.options.maxZoom||i<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[s.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,i=this._getLoadedTilesPercentage(e),n=this._getLoadedTilesPercentage(t);return e&&i>.5&&.5>n?(t.style.visibility="hidden",void this._stopLoadingImages(t)):(e.style.visibility="hidden",e.style[s.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(t){var e,i,n=t.getElementsByTagName("img"),o=0;for(e=0,i=n.length;i>e;e++)n[e].complete&&o++;return o/i},_stopLoadingImages:function(t){var e,i,n,o=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,i=o.length;i>e;e++)n=o[e],n.complete||(n.onload=s.Util.falseFn,n.onerror=s.Util.falseFn,n.src=s.Util.emptyImageUrl,n.parentNode.removeChild(n))}}),s.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=s.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=s.bind(this._handleGeolocationResponse,this),i=s.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new s.LatLng(e,i),o=180*t.coords.accuracy/40075017,r=o/Math.cos(s.LatLng.DEG_TO_RAD*e),a=s.latLngBounds([e-o,i-r],[e+o,i+r]),l=this._locateOptions;if(l.setView){var u=Math.min(this.getBoundsZoom(a),l.maxZoom);this.setView(n,u)}var h={latlng:n,bounds:a,timestamp:t.timestamp};for(var c in t.coords)"number"==typeof t.coords[c]&&(h[c]=t.coords[c]);this.fire("locationfound",h)}})}(window,document)}).call(e,i(18)(t))},90:function(t,e){!function(t,e,i,n){"use strict";var o=n.WKT,r=i.Basic.Extend,s=i.Basic.getView,a=i.Tools.FuncTools.multi,l={geoObjectDefaults:{},types:{},getGeoObjectParams:function(){return{}},events:{attributionControl:!1,scrollWheelZoom:!1},map:{bounds:{},center:[55.75297,37.62456],zoom:9,minZoom:0,maxZoom:18,scrollWheelZoom:!1,server:"https://c.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:[['<a href="http://leafletjs.com/" target="_blank">Leaflet</a>'," | ",'&copy; <a href="http://openstreetmap.org" target="_blank">OpenStreetMap</a>'].join("")]}};s(function(){function t(t){var e=L.control.attribution({prefix:""});return t.forEach(function(t){e.addAttribution(t)}),e}function e(t){return L.latLngBounds(L.latLng(+t.south,+t.west),L.latLng(+t.north,+t.east))}function i(t){return 4===Object.keys(t).filter(function(e){return null!==t[e]&&void 0!==t[e]}).length}var n=function(t){return function(e){e.addTo(t)}},s=a(function(t){return void 0===t||null===t?"default":t.icon?"icon":"basic"}).method("default",function(t){return this._opts.geoObjectDefaults}).method("basic",function(t){return r(!0,{},this._opts.geoObjectDefaults,t)}).method("icon",function(t){return r(!0,{},this._opts.geoObjectDefaults,{pointToLayer:function(e,i){return L.marker(i,{icon:L.icon(t.icon)})}})}),l=function(){var t=this._elems.parent.get(0),n=this._opts.events,o=L.map(t,n);return o.setView(this._opts.map.center,this._opts.map.zoom),i(this._opts.map.bounds)&&o.setMaxBounds(e(this._opts.map.bounds)),o},u=function(t){return t.map(function(t){var e=o.parse(t.geo),i=this._opts.getGeoObjectParams.call(this,t),n=s.call(this,i),r=L.geoJson(e,n),a=t.desc||t.title||t.subtitle;return a&&(r.bindPopup(a),t.active&&setTimeout(function(){r.openPopup()})),r}.bind(this))};return{_Init:function(e){this._map=l.call(this),[t(this._opts.map.attribution),L.tileLayer(this._opts.map.server,{minZoom:Math.max(0,this._opts.map.minZoom||0),maxZoom:Math.min(18,this._opts.map.maxZoom||18)})].concat(u.call(this,e.objects||[])).forEach(n(this._map))}}}(),l,null,"MapLeafletView")}(window.jQuery||window.$,window,window.ru.mail.cpf,window.Terraformer)},92:function(t,e,i){!function(t,e,i){"use strict";function n(t){t&&((new Image).src="//rs.mail.ru/sb"+t+".gif?r="+Math.round(1e11*Math.random()))}var o=i.Basic,r={cssSels:{lazyEmbed:".js-slider__lazyembed"},cssClss:{animatedControl:"animated"},attrs:{activated:"data-embed-activated",type:"data-type",clickCounter:"data-first-click",resizable:"data-embed-resizable"},embedTypesToWatch:["vk_post"],preloadDepth:1,checkHightTimeout:500,minItemHeight:300},s=function e(n){var o=this._Opts,r=o.attrs,s=n.filter(function(t,e){return!e.getAttribute(r.activated)});if(s.length){s.attr(r.activated,"1");var a=s.find(this._Opts.cssSels.lazyEmbed);a.length&&(a.each(function(t,e){-1!==o.embedTypesToWatch.indexOf(e.getAttribute(r.type))&&s.eq(t).attr(r.resizable,1)}),c.call(this,a.eq(0).parent()),i.Tools.activateEmbeds(a,{closestParent:".js-slider__item"}).forEach(function(i){i.then(function(){this.update()}.bind(this),function(i){t(i.element).remove(),this.update(!0).then(function(){e.call(this,d.call(this,this.getPageNo()))}.bind(this))}.bind(this))}.bind(this)))}},a=function(){var t=0,e=p.call(this);e.length&&e.each(function(e,i){t=Math.max(t,i.offsetHeight)}),t&&this._Elems.content.height(t)},l=function(t){var e=0;return t.each(function(t,i){e=Math.max(e,i.offsetHeight)}),e},u=function(t){return l.call(this,p.call(this,t))||0},h=function t(e){var i=this._State;if(clearTimeout(i.watchTimeoutId),e&&e.length&&e.parent().length){var n=l(e);i.frameHeight!==n&&(i.frameHeight=n,a.call(this)),i.watchTimeoutId=setTimeout(t.bind(this,e),this._Opts.checkHightTimeout)}},c=function(t,e){e||(e=[1e3,1500,2e3,3e3,5e3,1e4]);var i=u.bind(this),n=i(),o=t.trigger.bind(t,"documentHeightChange"),r=this.update.bind(this);e.forEach(function(t){setTimeout(function(){var t=i();t!==n&&(r(),o(),n=t)},t)})},p=function(e,i){isNaN(e)&&(e=this.getPageNo());var n=this.getPages(),o=t(n[e]&&n[e].frames),r=this._Opts.attrs.resizable;return i&&(o=o.filter(function(t,e){return!!e.getAttribute(r)})),o},d=function(e,i){e=e||0,i=i||2;for(var n=t(),o=p.bind(this),r=e+i,s=Math.max(0,e-i);s<=r;s++)n=n.add(o(s));return n},f=function(t){var e,i=this._Elems,n=this._State,o=Math.max(u.call(this,t),this._Opts.minItemHeight),r=!1,s=!1,a=(n.frameHeight||0)/2,l=n.controlHeight,h=this._Opts.cssClss.animatedControl;"buttonsTopShift"in n||(a<5&&(a=this._Elems.container.height()/2),i.shiftedButtons=i.controlNext.add(i.controlPrev),i.shiftedButtons.removeClass(h),n.buttonsTopShift=i.shiftedButtons.get(0).offsetTop+l/2,r=s=!0),o&&a>o-l&&(e=Math.max(o,l)/2)<n.buttonsTopShift&&(n.buttonsTopShift=e,r=!0),n.buttonsTopShift<l/2&&(n.buttonsTopShift=l/2),r&&(i.shiftedButtons.css({top:n.buttonsTopShift}),s&&i.shiftedButtons.addClass(h))};o.Constructors.addPlugin("Slider",{_Handlers:{beforeSlide:function(t,e){var i=this._Elems;i.shiftedButtons||(i.shiftedButtons=i.controlNext.add(i.controlPrev),this._State.controlHeight=l(i.shiftedButtons)),f.call(this,e),this._State.firstClick||(this._State.firstClick=!0,n(i.Parent.attr(this._Opts.attrs.clickCounter)))},slide:function(e,i){for(var n=[i],o=t(),r=1;r<=this._Opts.preloadDepth;r++)n.push(i+r),i-r>=0&&n.push(i-r);n.forEach(function(t){o=o.add(p.call(this,t))},this);var l=p.call(this,i,!0);o&&o.length&&s.call(this,o),clearTimeout(this._State.watchTimeoutId),l&&l.length?h.call(this,l):this._State.frameHeight=u.call(this,i),a.call(this),this.update()}},_Init:function(){this._State||(this._State={}),s.call(this,d.call(this)),h.call(this,p.call(this,0)),this._Elems.content.on("documentHeightChange",a.bind(this))}},r,"EmbedList")}(window.jQuery||window.$,window,window.ru.mail.cpf)},95:function(t,e){!function(t,e,i){var n,o,r,s,a=i.Basic,l=a.moduleOpts,u=i.Tools,h=u.initModule,c=u.PubSub,p=u.Images.preloadImage,d=u.Counters.hitCntrsBlck,f=a.typeOf,m=i.Modules.Slider,_=l.setParams,g=e.getNameSpace("Modules",i),y={cssSels:{Main:{container:".js-photo-stories__container",viewport:".js-photo-stories__viewport",content:".js-photo-stories__content",frames:".js-photo-stories__items",startFrame:".js-photo-stories__item-start",controlNext:".js-photo-stories__next",controlPrev:".js-photo-stories__prev",controlPage:".js-photo-stories__preview",controlPagesList:".js-photo-stories__previews",previewsSlider:".js-photo-stories__list",banner:".js-photo-stories__banner"},frame:".js-photo-stories__item"},cssClss:{currentPage:"m-photo-stories__preview_active",currentPageFrame:"m-photo-stories__item_active",animatedCont:"m-photo-stories__items_animated",disabledControl:"hidden",img:"js-photo-item"},loop:!0,pageSize:1,align:"center",scrollTo:!0,scrollToDelta:-8,hitVirtualPhoto:!0,useBanner:!0,bannerViewName:"SlotView",usePreviews:!0,preloadDepth:2,previewsSliderOpts:{cssSels:{Main:{container:".js-photo-stories__list-wrap",content:".js-photo-stories__previews"},frame:".js-photo-stories__preview"},cssClss:{animatedCont:"m-photo-stories__items_animated",disabledControl:"hidden"},pageSize:"auto",align:"left"}},v=function(t){return new Promise(function(e,i){setTimeout(function(){if(t.complete)return void e();var n=function i(){clearTimeout(o),t.removeEventListener("load",i),e()},o=setTimeout(function(){t.removeEventListener("load",n),i(new Error("Timeout expired"))},1e3);t.addEventListener("load",n)},0)})},b=a.Constructors.getView(function(){return{_Handlers:{beforeSlide:function(){this._opts.useBanner&&this.reloadBanner();var t=this.getStoryShareUrl();this.setStoryShareUrl(t),this.pushStateUrl(t)},slide:function(t){var e=this._opts;e.usePreviews&&this._previewsSlider.goToFrame(t,!0),e.scrollTo&&!this.isTouch&&this.scrollTop(),e.hitVirtualPhoto&&this.hitVirtualPhoto(),this.preloadLazyPhotos(t)},swipeStart:function(){var t=this._State;n=t.isSwipingForward,o=t.position,s=o-r},swipeEnd:function(){var t=this._State;n!==t.isSwipingForward||(r=t.position);var e=o-r;Number.isNaN(s)||Number.isNaN(e)||s!==e&&this.scrollTop()}},_Init:function(){var e=this;this.isTouch=!!t.zepto,this._initialUpdate.then(function(){setTimeout(function(){e.setStoryShareUrl(e.getStoryShareUrl())},600),e.startLazyLoad(),e._opts.usePreviews&&(e._previewsSlider=null,e.initPreviews())})},initPreviews:function(){var t=this._elems.previewsSlider,e=this.getFrameNo();this._previewsSlider||(this._previewsSlider=h("Slider",t,this._opts.previewsSliderOpts),this._previewsSlider.goToFrame(e,!0))},startLazyLoad:function(){var t=new Array(this._State.$frames.length||0);t.fill(!1),this.photosLoaded=t;var e=this.getFrameNo();this.preloadLazyPhotos(e)},preloadLazyPhotos:function(t){var e=this,i=this._State.$frames.length,n=this._opts.preloadDepth,o=this.photosLoaded,r=[t],s=[];if(n>0){var a=n;for(a;a>0;a--){var l=t-a,u=t+a;l<0&&(l+=i),u>=i&&(u-=i),r.push(l,u)}}return r.forEach(function(t){o[t]||(s.push(e.initLazyPhoto(t)),o[t]=!0)}),Promise.all(s).then(function(t){return t.length?e.update(!0).then(function(){return t}):Promise.resolve(t)})},initLazyPhoto:function(t){var i=this._State.$frames,n=i.length,o=".".concat(this._opts.cssClss.img),r=t;r<0&&(r+=n),r>=n&&(r-=n);var s=i.eq(r).find(o).get(0),a=s.getAttribute("data-src");return p(a).then(function(t){return s.src=a,s.complete?t:v(s).then(function(){return t})}).catch(function(t){e.console.error(t)})},initAllLazyPhotos:function(){var t=this,e=this._State.$frames,i=[];return Object.keys(e).forEach(function(e){i.push(t.initLazyPhoto(e))}),Promise.all(i).then(function(e){return e.length?t.update(!0).then(function(){return e}):Promise.resolve(e)})},getStoryShareUrl:function(){return this.getCurrentFrame().attr("data-href")},setStoryShareUrl:function(t){c.publish("setStoryShareUrl",t)},pushStateUrl:function(t){t&&e.history.replaceState({},"",t)},reloadBanner:function(){this._elems.banner.data(this._opts.bannerViewName).reload(!0)},hitVirtualPhoto:function(){var t=this.getStoryShareUrl();t&&d({url:t})},scrollTop:function(){var i=this._opts,n=i.scrollTo,o=i.scrollToDelta,r=e.pageYOffset;if(n){var s=this._elems.parent;"string"===f(n)&&t(n).length&&(s=t(n));var a=s.offset(),l=a.top;l+=o;var u=r-l,h=u<1400?Math.round(u/2):1e3;u>0&&(this.isTouch?e.scrollTo(0,l):t("html, body").animate({scrollTop:l},h))}}}}(),y,m,"PhotoStories");_("".concat("PhotoStories",".Touch"),{options:{align:"left",scrollToDelta:0,useBanner:!1,usePreviews:!1}}),g.PhotoStories=b}(window.$,window,window.ru.mail.cpf)}})});
//# sourceMappingURL=page-news.js.map