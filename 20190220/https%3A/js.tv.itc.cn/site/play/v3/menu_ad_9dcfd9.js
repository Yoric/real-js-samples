/* sohutv 2018-10-18 10:56:22 */
!function(n){var t="15089",i=window._player||document.getElementById("player");({init:function(){var n=this;sohuHD.interactions&&sohuHD.interactions.enabled()?n.initAd():sohuHD.baseInfo.voteId?messagebus.subscribe("play.loaded_pkinteraction",function(){n.initAd()},null,null,{cache:!0}):n.initAd()},initAd:function(){var e=this;_sohuHD.AD.ready(function(){_sohuHD.AD.subscribe(t,function(n,i){e.config=i||{},$("#"+t).remove(),e.render(),_sohuHD.AD.init(t)},null,null,{cache:!0})})},render:function(){var n=this;if(n.config.src){var i=$("#menu");i.length&&(this.menu_instance=sohuHD.UI.getInstance(i.attr("ui-guid")),this.menu_instance&&(i.find(".tab_menu ul").append(n.getTabHtml()),i.find('div[data-sidebar="content"]').append(n.getBoxHtml()),n.menu_instance.one("active.tuiguang",function(){_sohuHD.AD.viewEventHandler&&_sohuHD.AD.viewEventHandler()}),sohuHD.play.adjust(),n.autoShow()))}else $("body").append('<div id="'+t+'" style="display:none;"></div>')},getTabHtml:function(){return[,"",'<li data-tab="album-tab-tuiguang" pb-click data-pb-txid="pg_player_tuiguangtab" data-pb-other="tab">',"<span>\u63a8\u5e7f</span>","</li>"].join("")},getBoxHtml:function(){return[,"",'<div class="tab_cont" data-tab="album-box-tuiguang" pb-click data-pb-txid="pg_player_tuiguang" style="padding:20px 20px 0 20px;">','<div id="',t,'"></div>',"</div>"].join("")},autoShow:function(){var e,t,n,i,a,o,u=this,r=function(){n=u.getPlayedTime(),i=u.getClosePoint(t,n),a=i.point,o=n-a,e&&a-e==30&&messagebus.publish("play.notify_interaction_clean"),0<=o&&o<=1&&(u.menu_instance.active("tuiguang"),u.auto_forward(),messagebus.publish("statV2.ping",{type:"click",txid:"pg_player_tuiguangtab",other:"auto"}))};function s(){t=u.makeShowPoint(),window.setInterval(r,1e3),messagebus.subscribe("play.loaded_interaction",function(n,i){var e;(i=i||{}).data=i.data||[],$.each(i.data,function(n,i){e=i.interactionInfo.beginTime,$.each(t,function(n,i){i-60<e&&e<i-30?t[n]=e+60:i-30<e&&e<i+60&&(t[n]=e+30)})})},null,null,{cache:!0})}messagebus.subscribe("play.notify_interaction",function(n,i){u.clean_auto_forward(),e=i.interactionInfo?i.interactionInfo.beginTime:u.getPlayedTime()},null,null,{cache:!0}),messagebus.subscribe("play.onVideoPlayed",function(n,i){s()},null,null,{cache:!0}),messagebus.subscribe("h5player.playvideo",function(n,i){s()},null,null,{cache:!0})},makeShowPoint:function(){for(var n=[90],i=1;i<11.85;)n.push(90+600*i),i++;return n},getClosePoint:function(n,i){var e,t,a=n.length,o={point:n[a-1],index:a-1};for(e=0;e<a;e++)if(i<=(t=n[e])){o.point=t,o.index=e;break}return o},getPlayedTime:function(){return i&&i.playedTime?parseInt(i.playedTime()):i&&i.movieCurrentTime?parseInt(i.movieCurrentTime):0},clean_auto_forward:function(){this.forwardTimer&&(clearTimeout(this.forwardTimer),this.forwardTimer=null)},auto_forward:function(){var e=this;e.forwardTimer&&clearTimeout(e.forwardTimer),e.forwardTimer=setTimeout(function(){if("9001"==window.cid){var n="choicevideos";n=1==window.pageid&&20==window.wm_user?"choicevideos":2==window.pageid?"playlist":"similar",e.menu_instance.active(n)}else{var i=sohuHD.play&&sohuHD.play.firstTabName;e.menu_instance.active(i||(sohuHD.play.isPianhua?"circum":"vlist"))}},3e4)}}).init()}(sohuHD);