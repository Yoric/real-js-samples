!function(i){var t={};function e(r){if(t[r])return t[r].exports;var f=t[r]={i:r,l:!1,exports:{}};return i[r].call(f.exports,f,f.exports,e),f.l=!0,f.exports}e.m=i,e.c=t,e.d=function(i,t,r){e.o(i,t)||Object.defineProperty(i,t,{enumerable:!0,get:r})},e.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,t){if(1&t&&(i=e(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.__esModule)return i;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var f in i)e.d(r,f,function(t){return i[t]}.bind(null,f));return r},e.n=function(i){var t=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(t,"a",t),t},e.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)},e.p="",e(e.s=72)}({"1Gc7":function(i,t,e){"use strict";e.r(t);var r=window.Float32Array,f=4,n=.001,a=1e-7,o=10,d=11,l=1/(d-1),u="function"==typeof r;function s(i,t){return 1-3*t+3*i}function c(i,t){return 3*t-6*i}function h(i){return 3*i}function g(i,t,e){return((s(t,e)*i+c(t,e))*i+h(t))*i}function v(i,t,e){return 3*s(t,e)*i*i+2*c(t,e)*i+h(t)}function p(i,t,e,s){if(!(0<=i&&i<=1&&0<=e&&e<=1))throw new Error("bezier x values must be in [0, 1] range");var c=u?new r(d):new Array(d);if(i!==t||e!==s)for(var h=0;h<d;++h)c[h]=g(h*l,i,e);function p(t){for(var r=0,u=1,s=d-1;u!==s&&c[u]<=t;++u)r+=l;var h=r+(t-c[--u])/(c[u+1]-c[u])*l,p=v(h,i,e);return p>=n?function(i,t,e,r){for(var n=0;n<f;++n){var a=v(t,e,r);if(0===a)return t;t-=(g(t,e,r)-i)/a}return t}(t,h,i,e):0===p?h:function(i,t,e,r,f){var n=void 0,d=void 0,l=0;do{(n=g(d=t+(e-t)/2,r,f)-i)>0?e=d:t=d}while(Math.abs(n)>a&&++l<o);return d}(t,r,r+l,i,e)}return function(r){return i===t&&e===s?r:0===r?0:1===r?1:g(p(r),t,s)}}var w=window,m=w.vkImage,X=w.cf,x=w.ce,Y=w.domCA,y=!1,b=!1,F="fifa_ball_toLeft",M="fifa_ball_toRight",_=null,T=null,C={height:480,width:720,paddingHorizontal:200,paddingBottom:160,scaleFactor:window.devicePixelRatio,figureColorsCount:5},B={lineBig:{width:54,height:106,index:0,weight:0,rotatable:!0,duration:2e3,points:[2,2]},lineMedium:{width:62,height:50,index:1,weight:0,rotatable:!0,duration:2e3,points:[1,1]},line:{width:20,height:32,index:2,weight:0,rotatable:!0,scalable:!0,duration:2e3,points:[1]},dot:{width:16,height:16,index:3,scalable:!0,weight:0,duration:2e3,points:[1]}};if(C.scaleFactor>1)for(var P in B)B.hasOwnProperty(P)&&(B[P].width*=2,B[P].height*=2);var O={first:{delay:500,duration:1500,lines:[],items:[{figure:"lineBig",diffX:177,diffY:283},{figure:"line",diffX:124,diffY:96},{figure:"lineMedium",diffX:299,diffY:149},{figure:"line",diffX:252,diffY:416},{figure:"line",diffX:162,diffY:394},{figure:"line",diffX:69,diffY:237},{figure:"line",diffX:200,diffY:139},{figure:"dot",diffX:321,diffY:252},{figure:"dot",diffX:432,diffY:252},{figure:"dot",diffX:434,diffY:367},{figure:"line",diffX:209,diffY:68},{figure:"line",diffX:346,diffY:85},{figure:"line",diffX:346,diffY:85},{figure:"line",diffX:384,diffY:162},{figure:"line",diffX:368,diffY:244},{figure:"line",diffX:237,diffY:250},{figure:"line",diffX:280,diffY:303},{figure:"dot",diffX:30,diffY:259},{figure:"dot",diffX:106,diffY:330},{figure:"dot",diffX:142,diffY:197},{figure:"dot",diffX:172,diffY:219},{figure:"lineMedium",diffX:59,diffY:139},{figure:"dot",diffX:256,diffY:173}]},second:{duration:2e3,lines:[],items:[{figure:"lineBig",diffX:177,diffY:283},{figure:"line",diffX:124,diffY:96},{figure:"lineMedium",diffX:299,diffY:149},{figure:"line",diffX:252,diffY:416},{figure:"line",diffX:162,diffY:394},{figure:"line",diffX:69,diffY:237},{figure:"line",diffX:200,diffY:139},{figure:"dot",diffX:321,diffY:252},{figure:"dot",diffX:432,diffY:252},{figure:"dot",diffX:434,diffY:367},{figure:"line",diffX:209,diffY:68},{figure:"line",diffX:346,diffY:85},{figure:"line",diffX:346,diffY:85},{figure:"line",diffX:384,diffY:162},{figure:"line",diffX:368,diffY:244},{figure:"line",diffX:237,diffY:250},{figure:"line",diffX:280,diffY:303},{figure:"dot",diffX:30,diffY:259},{figure:"dot",diffX:106,diffY:330},{figure:"dot",diffX:142,diffY:197},{figure:"dot",diffX:172,diffY:219},{figure:"lineMedium",diffX:59,diffY:139},{figure:"dot",diffX:256,diffY:173}]}},k=!1,S=!1,j=!1,z=!1,H=void 0,I=p(0,.43,.32,.39),A=p(0,0,1,1);function N(i,t,e,r,f,n,a){return{x:(1-i)*(1-i)*t+2*i*(1-i)*n+i*i*r,y:(1-i)*(1-i)*e+2*i*(1-i)*a+i*i*f}}function E(i){return I(i)}function R(i){var t=null,e=void 0,r=void 0,f=void 0;if(!i)return!1;if(1===i.length)return i[0];for(var n=0;n<i.length;n++){var a=i[n];null===t?(t=a.x,e=a.x,r=a.y,f=a.y):(t=Math.min(a.x,t),r=Math.min(a.y,r),e=Math.max(a.x,e),f=Math.max(a.y,f))}return t||console.log(i),{x:e-(e-t)/2,y:f-(f-r)/2}}function D(i,t){for(var e=0,r=0,f=[],n=0;f.length<t.points.length;){var a=t.points[e],o=i[r];if(!o)return!1;if(o.length>=a?(f.push(r),e++):f=[],r++,n>100)break;n++}for(var d=[],l=0;l<f.length;l++)for(var u=i[f[l]].splice(0,t.points[l]),s=0;s<u.length;s++)d.push(u[s]);return d}function G(){for(var i=960*C.scaleFactor,t=60*C.scaleFactor,e=[],r=0,f=i/2,n=i/2,a=0;r<i;){for(var o=Math.floor(r/t),d=[],l=1;l<=o;l++){var u=360/o*l*Math.PI/180;d.push({x:f+r/2*Math.cos(u),y:n+r/2*Math.sin(u)})}if(e.push(d),r+=2*t,a>100)break;a++}return e}function L(i){for(var t=i.length-1;t>0;t--){var e=Math.floor(Math.random()*(t+1)),r=[i[e],i[t]];i[t]=r[0],i[e]=r[1]}return i}window.Fifa2018={init:function(){if(!y){var i=0;for(var t in B)B.hasOwnProperty(t)&&(B[t].top=i,i+=B[t].height);y=x("canvas",{width:(C.width+C.paddingHorizontal)*C.scaleFactor,height:(C.height+C.paddingBottom)*C.scaleFactor},{width:C.width+C.paddingHorizontal+"px",height:C.height+C.paddingBottom+"px",top:window.innerHeight-C.height-C.paddingBottom+"px",left:(window.innerWidth-C.width-C.paddingHorizontal)/2+"px",position:"fixed",zIndex:1e3,pointerEvents:"none",transform:"translate(0,0,0)"}),b=y.getContext("2d"),bodyNode.appendChild(y)}},destroy:function(){cancelAnimationFrame(j),b=!1,re(y),y=!1,S=!1},startFlapper:function(i){var t=this,e=Y(i,"a");if(!e||"top_notify_btn"===e.id){if(C.paddingBottom=(window.innerHeight-C.height)/2,this.init(),cancelAnimationFrame(j),k)return this.start();var r=m();r.onload=function(){k=r,t.start()},r.src=C.scaleFactor>1?"/images/confetti_flapper_2x.png":"/images/confetti_flapper.png"}},start:function(){H=irand(0,C.figureColorsCount-1),S=clone(O,!0),this.clear(),this.findSpaceForFigures(),z=vkNow(),this.draw(),this.drawText(),this.drawBalls()},clearBalls:function(){T&&(clearInterval(T),T=null),geByClass("fifa_ballsContainer").forEach(re)},clearText:function(){_&&(clearTimeout(_),_=null),re(geByClass1("fifa_confettiText"))},clear:function(){for(var i in S)S.hasOwnProperty(i)&&(S[i].startTs=0,S[i].inited=!1);this.clearText()},findSpaceForFigures:function(){for(var i in S)if(S.hasOwnProperty(i)){var t=G(),e=S[i].items;L(e);for(var r=0;r<e.length;r++){var f=e[r],n=B[f.figure],a=R(D(t,B[f.figure]));a?(f.toX=a.x,f.toY=a.y-n.height-C.paddingBottom*C.scaleFactor-400):console.log("cant found")}}},drawText:function(){this.clearText();var i=getLang("global_fifa_confetti_text"),t=X('\n    <div class="fifa_confettiText">\n      <div class="fifa_confettiText__wrap">\n        <span class="fifa_confettiText__message">'+i+"</span>\n       </div>\n    </div>");document.body.appendChild(t),_=setTimeout(this.clearText.bind(this),2e3)},drawBalls:function(){var i=x("div");addClass(i,"fifa_ballsContainer"),T&&clearTimeout(T);for(var t=function(t){var e=x("div");addClass(e,"fifa_ball"),i.appendChild(e);var r=t%2==0?F:M;setTimeout(function(){addClass(e,r)},t*irand(100,500))},e=0;e<4;e++)t(e);document.body.appendChild(i),T=setTimeout(this.clearBalls.bind(this),5e3)},draw:function(){var i=this,t=vkNow(),e=(C.width+C.paddingHorizontal)*C.scaleFactor,r=C.height*C.scaleFactor;b.clearRect(0,0,e,r+C.paddingBottom*C.scaleFactor);var f=!0;for(var n in S)if(S.hasOwnProperty(n)){var a=S[n],o=a.delay,d=a.items,l=a.startTs,u=a.duration,s=a.lines,c=a.inited;if(l||(S[n].startTs=l=vkNow()),o){if(t-l<o)continue;S[n].delay=!1,S[n].startTs=l=vkNow()}for(var h=0;h<d.length;h++){var g=d[h],v=B[g.figure];c||(++H>=C.figureColorsCount&&(H=0),g.color=H,g.rotateDir=1===irand(0,1)?-1:1,g.inScale=.1,g.scale=1-(v.scalable?Math.min(1,Math.max(.5,irand(50,100)/100)):1),g.duration=u+irand(-300,300),"second"===n?(g.x=e+irand(-50,50)*C.scaleFactor,g.endX=50*C.scaleFactor*v.weight+irand(-50,300)*C.scaleFactor,g.toX=g.toX-v.width):(g.x=(-C.paddingHorizontal/2-irand(-50,50))*C.scaleFactor,g.endX=e-(50*C.scaleFactor*v.weight+irand(-50,300)*C.scaleFactor)-100*C.scaleFactor,g.toX=g.toX-v.width),g.y=r,g.endY=r+C.paddingBottom*C.scaleFactor);var p=Math.min(1,(t-l)/g.duration),w=E(p);p<1&&(f=!1);var m=g.color*v.width,X=v.top,x=N(w,g.x,g.y,g.endX,g.endY,g.toX,g.toY);b.save();var Y=g.inScale-g.scale;if(Y>1)return console.log("scale",Y);b.translate(x.x+v.width/2,x.y+v.height/2),b.scale(Y,Y),b.translate(-(x.x+v.width/2),-(x.y+v.height/2)),v.rotatable&&(b.translate(x.x+v.width/2,x.y+v.height/2),b.rotate((t-z)*g.rotateDir/3*Math.PI/180),b.translate(-(x.x+v.width/2),-(x.y+v.height/2))),g.inScale=1*A(Math.min(1,(t-l)/100)),b.drawImage(k,m,X,v.width,v.height,x.x,x.y,v.width,v.height),b.restore()}S[n].inited=!0;for(var y=0;y<3;y++){s[y]||(s[y]={progress:0,hideProgress:0});var F="second"===n,M=A(Math.min(1,(t-l)/(F?200:150)));if(1!==M){b.strokeStyle="#49acf2",b.lineWidth=4*C.scaleFactor,b.beginPath();var _=0,T=0,P=0,O=0;switch(y){case 1:_=40,T=F?-100:-40,P=F?5:15,O=F?0:8;break;case 0:_=50,T=F?-125:-65,O=10;break;case 2:_=40,T=F?-150:-90,P=F?-15:-10,O=F?8:2}var I=_*M;I*=C.scaleFactor,T=T*Math.PI/180;var R=void 0;R="second"===n?e-100*C.scaleFactor:100*C.scaleFactor;var D=r;R+=P*C.scaleFactor,D+=O*C.scaleFactor;var G=R+I*Math.cos(T),L=D+I*Math.sin(T);b.moveTo(R,D),b.lineTo(G,L),b.stroke(),s[y].progress=M}}}if(f)return this.destroy();j=requestAnimationFrame(function(){return i.draw()})}};try{stManager.done("fifa2018.js")}catch(i){}},72:function(i,t,e){i.exports=e("1Gc7")}});