(function(){if(!a){var a=(function(){var g={};var b="theia";var d=[];var c=200;var f;g[b]={IE:/msie/i.test(navigator.userAgent),E:function(h){if(typeof h==="string"){return document.getElementById(h)}else{return h}},C:function(h){var i;h=h.toUpperCase();if(h=="TEXT"){i=document.createTextNode("")}else{if(h=="BUFFER"){i=document.createDocumentFragment()}else{i=document.createElement(h)}}return i},log:function(){var n,m=arguments,j=m.length,i=[].slice.apply(m,[0,j]),k="error",h;while(i[--j]){if(i[j] instanceof Error){n=i.splice(j,1)[0];break}}if(!n){n=new Error();k="log"}h=[i,k,new Date().getTime(),n.message,n.stack];if(f){try{f.apply(null,h)}catch(o){}}else{d.length>=c&&d.shift();d.push(h)}},_regLogFn:function(h){f=h},_clearLogList:function(){return d.splice(0,d.length)}};var e=g[b];e.register=function(m,h,l){if(!l||typeof l!="string"){l=b}if(!g[l]){g[l]={}}var j=g[l];var o=m.split(".");var n=j;var i=null;while(i=o.shift()){if(o.length){if(n[i]===undefined){n[i]={}}n=n[i]}else{if(n[i]===undefined){try{if(l&&l!==b){if(m==="core.util.listener"){n[i]=g[b].core.util.listener;return true}if(m==="core.util.connect"){n[i]=g[b].core.util.connect;return true}}n[i]=h(j);return true}catch(p){setTimeout(function(){console.log(p)},0)}}}}return false};e.unRegister=function(l,j){if(!j||typeof j!="string"){j=b}var i=g[j];var n=l.split(".");var m=i;var h=null;while(h=n.shift()){if(n.length){if(m[h]===undefined){return false}m=m[h]}else{if(m[h]!==undefined){delete m[h];return true}}}return false};e.regShort=function(h,i){if(e[h]!==undefined){throw"["+h+"] : short : has been register"}e[h]=i};e.shortRegister=function(m,h,l){if(!l||typeof l!="string"){l=b}var j=g[l];var o=m.split(".");if(!h){return false}if(j[h]){return false}var n=j;var i=null;while(i=o.shift()){if(o.length){if(n[i]===undefined){return false}n=n[i]}else{if(n[i]!==undefined){if(j[h]){return false}j[h]=n[i];return true}}}return false};e.getPKG=function(h){if(!h||typeof h!="string"){h=b}return g[h]};return e})()}a.register("core.dom.sizzle",function(l){var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,k=0,f=Object.prototype.toString,q=false,j=true;[0,0].sort(function(){j=false;return 0});var c=function(x,e,A,B){A=A||[];e=e||document;var D=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!x||typeof x!=="string"){return A}var y=[],u,F,I,t,w=true,v=c.isXML(e),C=x,E,H,G,z;do{r.exec("");u=r.exec(C);if(u){C=u[3];y.push(u[1]);if(u[2]){t=u[3];break}}}while(u);if(y.length>1&&m.exec(x)){if(y.length===2&&g.relative[y[0]]){F=i(y[0]+y[1],e)}else{F=g.relative[y[0]]?[e]:c(y.shift(),e);while(y.length){x=y.shift();if(g.relative[x]){x+=y.shift()}F=i(x,F)}}}else{if(!B&&y.length>1&&e.nodeType===9&&!v&&g.match.ID.test(y[0])&&!g.match.ID.test(y[y.length-1])){E=c.find(y.shift(),e,v);e=E.expr?c.filter(E.expr,E.set)[0]:E.set[0]}if(e){E=B?{expr:y.pop(),set:b(B)}:c.find(y.pop(),y.length===1&&(y[0]==="~"||y[0]==="+")&&e.parentNode?e.parentNode:e,v);F=E.expr?c.filter(E.expr,E.set):E.set;if(y.length>0){I=b(F)}else{w=false}while(y.length){H=y.pop();G=H;if(!g.relative[H]){H=""}else{G=y.pop()}if(G==null){G=e}g.relative[H](I,G,v)}}else{I=y=[]}}if(!I){I=F}if(!I){c.error(H||x)}if(f.call(I)==="[object Array]"){if(!w){A.push.apply(A,I)}else{if(e&&e.nodeType===1){for(z=0;I[z]!=null;z++){if(I[z]&&(I[z]===true||I[z].nodeType===1&&c.contains(e,I[z]))){A.push(F[z])}}}else{for(z=0;I[z]!=null;z++){if(I[z]&&I[z].nodeType===1){A.push(F[z])}}}}}else{b(I,A)}if(t){c(t,D,A,B);c.uniqueSort(A)}return A};c.uniqueSort=function(t){if(d){q=j;t.sort(d);if(q){for(var e=1;e<t.length;e++){if(t[e]===t[e-1]){t.splice(e--,1)}}}}return t};c.matches=function(e,t){return c(e,null,null,t)};c.find=function(z,e,A){var y;if(!z){return[]}for(var v=0,u=g.order.length;v<u;v++){var x=g.order[v],w;if((w=g.leftMatch[x].exec(z))){var t=w[1];w.splice(1,1);if(t.substr(t.length-1)!=="\\"){w[1]=(w[1]||"").replace(/\\/g,"");y=g.find[x](w,e,A);if(y!=null){z=z.replace(g.match[x],"");break}}}}if(!y){y=e.getElementsByTagName("*")}return{set:y,expr:z}};c.filter=function(D,C,G,w){var u=D,I=[],A=C,y,e,z=C&&C[0]&&c.isXML(C[0]);while(D&&C.length){for(var B in g.filter){if((y=g.leftMatch[B].exec(D))!=null&&y[2]){var t=g.filter[B],H,F,v=y[1];e=false;y.splice(1,1);if(v.substr(v.length-1)==="\\"){continue}if(A===I){I=[]}if(g.preFilter[B]){y=g.preFilter[B](y,A,G,I,w,z);if(!y){e=H=true}else{if(y===true){continue}}}if(y){for(var x=0;(F=A[x])!=null;x++){if(F){H=t(F,y,x,A);var E=w^!!H;if(G&&H!=null){if(E){e=true}else{A[x]=false}}else{if(E){I.push(F);e=true}}}}}if(H!==undefined){if(!G){A=I}D=D.replace(g.match[B],"");if(!e){return[]}break}}}if(D===u){if(e==null){c.error(D)}else{break}}u=D}return A};c.error=function(e){throw"Syntax error, unrecognized expression: "+e};var g={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(y,t){var v=typeof t==="string",x=v&&!/\W/.test(t),z=v&&!x;if(x){t=t.toLowerCase()}for(var u=0,e=y.length,w;u<e;u++){if((w=y[u])){while((w=w.previousSibling)&&w.nodeType!==1){}y[u]=z||w&&w.nodeName.toLowerCase()===t?w||false:w===t}}if(z){c.filter(t,y,true)}},">":function(y,t){var w=typeof t==="string",x,u=0,e=y.length;if(w&&!/\W/.test(t)){t=t.toLowerCase();for(;u<e;u++){x=y[u];if(x){var v=x.parentNode;y[u]=v.nodeName.toLowerCase()===t?v:false}}}else{for(;u<e;u++){x=y[u];if(x){y[u]=w?x.parentNode:x.parentNode===t}}if(w){c.filter(t,y,true)}}},"":function(v,t,x){var u=k++,e=s,w;if(typeof t==="string"&&!/\W/.test(t)){t=t.toLowerCase();w=t;e=p}e("parentNode",t,u,v,w,x)},"~":function(v,t,x){var u=k++,e=s,w;if(typeof t==="string"&&!/\W/.test(t)){t=t.toLowerCase();w=t;e=p}e("previousSibling",t,u,v,w,x)}},find:{ID:function(t,u,v){if(typeof u.getElementById!=="undefined"&&!v){var e=u.getElementById(t[1]);return e?[e]:[]}},NAME:function(u,x){if(typeof x.getElementsByName!=="undefined"){var t=[],w=x.getElementsByName(u[1]);for(var v=0,e=w.length;v<e;v++){if(w[v].getAttribute("name")===u[1]){t.push(w[v])}}return t.length===0?null:t}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(v,t,u,e,y,z){v=" "+v[1].replace(/\\/g,"")+" ";if(z){return v}for(var w=0,x;(x=t[w])!=null;w++){if(x){if(y^(x.className&&(" "+x.className+" ").replace(/[\t\n]/g," ").indexOf(v)>=0)){if(!u){e.push(x)}}else{if(u){t[w]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(t,e){return t[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var t=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(t[1]+(t[2]||1))-0;e[3]=t[3]-0}e[0]=k++;return e},ATTR:function(w,t,u,e,x,y){var v=w[1].replace(/\\/g,"");if(!y&&g.attrMap[v]){w[1]=g.attrMap[v]}if(w[2]==="~="){w[4]=" "+w[4]+" "}return w},PSEUDO:function(w,t,u,e,x){if(w[1]==="not"){if((r.exec(w[3])||"").length>1||/^\w/.test(w[3])){w[3]=c(w[3],null,null,t)}else{var v=c.filter(w[3],t,u,true^x);if(!u){e.push.apply(e,v)}return false}}else{if(g.match.POS.test(w[0])||g.match.CHILD.test(w[0])){return true}}return w},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(u,t,e){return !!c(e[3],u).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)}},setFilters:{first:function(t,e){return e===0},last:function(u,t,e,v){return t===v.length-1},even:function(t,e){return e%2===0},odd:function(t,e){return e%2===1},lt:function(u,t,e){return t<e[3]-0},gt:function(u,t,e){return t>e[3]-0},nth:function(u,t,e){return e[3]-0===t},eq:function(u,t,e){return e[3]-0===t}},filter:{PSEUDO:function(u,z,y,A){var e=z[1],t=g.filters[e];if(t){return t(u,y,z,A)}else{if(e==="contains"){return(u.textContent||u.innerText||c.getText([u])||"").indexOf(z[3])>=0}else{if(e==="not"){var v=z[3];for(var x=0,w=v.length;x<w;x++){if(v[x]===u){return false}}return true}else{c.error("Syntax error, unrecognized expression: "+e)}}}},CHILD:function(e,v){var y=v[1],t=e;switch(y){case"only":case"first":while((t=t.previousSibling)){if(t.nodeType===1){return false}}if(y==="first"){return true}t=e;case"last":while((t=t.nextSibling)){if(t.nodeType===1){return false}}return true;case"nth":var u=v[2],B=v[3];if(u===1&&B===0){return true}var x=v[0],A=e.parentNode;if(A&&(A.sizcache!==x||!e.nodeIndex)){var w=0;for(t=A.firstChild;t;t=t.nextSibling){if(t.nodeType===1){t.nodeIndex=++w}}A.sizcache=x}var z=e.nodeIndex-B;if(u===0){return z===0}else{return(z%u===0&&z/u>=0)}}},ID:function(t,e){return t.nodeType===1&&t.getAttribute("id")===e},TAG:function(t,e){return(e==="*"&&t.nodeType===1)||t.nodeName.toLowerCase()===e},CLASS:function(t,e){return(" "+(t.className||t.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(x,v){var u=v[1],e=g.attrHandle[u]?g.attrHandle[u](x):x[u]!=null?x[u]:x.getAttribute(u),y=e+"",w=v[2],t=v[4];return e==null?w==="!=":w==="="?y===t:w==="*="?y.indexOf(t)>=0:w==="~="?(" "+y+" ").indexOf(t)>=0:!t?y&&e!==false:w==="!="?y!==t:w==="^="?y.indexOf(t)===0:w==="$="?y.substr(y.length-t.length)===t:w==="|="?y===t||y.substr(0,t.length+1)===t+"-":false},POS:function(w,t,u,x){var e=t[2],v=g.setFilters[e];if(v){return v(w,u,t,x)}}}};c.selectors=g;var m=g.match.POS,h=function(t,e){return"\\"+(e-0+1)};for(var o in g.match){g.match[o]=new RegExp(g.match[o].source+(/(?![^\[]*\])(?![^\(]*\))/.source));g.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+g.match[o].source.replace(/\\(\d+)/g,h))}var b=function(t,e){t=Array.prototype.slice.call(t,0);if(e){e.push.apply(e,t);return e}return t};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(n){b=function(w,v){var t=v||[],u=0;if(f.call(w)==="[object Array]"){Array.prototype.push.apply(t,w)}else{if(typeof w.length==="number"){for(var e=w.length;u<e;u++){t.push(w[u])}}else{for(;w[u];u++){t.push(w[u])}}}return t}}var d;if(document.documentElement.compareDocumentPosition){d=function(t,e){if(!t.compareDocumentPosition||!e.compareDocumentPosition){if(t==e){q=true}return t.compareDocumentPosition?-1:1}var u=t.compareDocumentPosition(e)&4?-1:t===e?0:1;if(u===0){q=true}return u}}else{if("sourceIndex" in document.documentElement){d=function(t,e){if(!t.sourceIndex||!e.sourceIndex){if(t==e){q=true}return t.sourceIndex?-1:1}var u=t.sourceIndex-e.sourceIndex;if(u===0){q=true}return u}}else{if(document.createRange){d=function(v,t){if(!v.ownerDocument||!t.ownerDocument){if(v==t){q=true}return v.ownerDocument?-1:1}var u=v.ownerDocument.createRange(),e=t.ownerDocument.createRange();u.setStart(v,0);u.setEnd(v,0);e.setStart(t,0);e.setEnd(t,0);var w=u.compareBoundaryPoints(Range.START_TO_END,e);if(w===0){q=true}return w}}}}c.getText=function(e){var t="",v;for(var u=0;e[u];u++){v=e[u];if(v.nodeType===3||v.nodeType===4){t+=v.nodeValue}else{if(v.nodeType!==8){t+=c.getText(v.childNodes)}}}return t};(function(){var t=document.createElement("div"),u="script"+(new Date()).getTime();t.innerHTML="<a name='"+u+"'/>";var e=document.documentElement;e.insertBefore(t,e.firstChild);if(document.getElementById(u)){g.find.ID=function(w,x,y){if(typeof x.getElementById!=="undefined"&&!y){var v=x.getElementById(w[1]);return v?v.id===w[1]||typeof v.getAttributeNode!=="undefined"&&v.getAttributeNode("id").nodeValue===w[1]?[v]:undefined:[]}};g.filter.ID=function(x,v){var w=typeof x.getAttributeNode!=="undefined"&&x.getAttributeNode("id");return x.nodeType===1&&w&&w.nodeValue===v}}e.removeChild(t);e=t=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){g.find.TAG=function(t,x){var w=x.getElementsByTagName(t[1]);if(t[1]==="*"){var v=[];for(var u=0;w[u];u++){if(w[u].nodeType===1){v.push(w[u])}}w=v}return w}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){g.attrHandle.href=function(t){return t.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=c,u=document.createElement("div");u.innerHTML="<p class='TEST'></p>";if(u.querySelectorAll&&u.querySelectorAll(".TEST").length===0){return}c=function(y,x,v,w){x=x||document;if(!w&&x.nodeType===9&&!c.isXML(x)){try{return b(x.querySelectorAll(y),v)}catch(z){}}return e(y,x,v,w)};for(var t in e){c[t]=e[t]}u=null})()}(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}g.order.splice(1,0,"CLASS");g.find.CLASS=function(t,u,v){if(typeof u.getElementsByClassName!=="undefined"&&!v){return u.getElementsByClassName(t[1])}};e=null})();function p(t,y,x,B,z,A){for(var v=0,u=B.length;v<u;v++){var e=B[v];if(e){e=e[t];var w=false;while(e){if(e.sizcache===x){w=B[e.sizset];break}if(e.nodeType===1&&!A){e.sizcache=x;e.sizset=v}if(e.nodeName.toLowerCase()===y){w=e;break}e=e[t]}B[v]=w}}}function s(t,y,x,B,z,A){for(var v=0,u=B.length;v<u;v++){var e=B[v];if(e){e=e[t];var w=false;while(e){if(e.sizcache===x){w=B[e.sizset];break}if(e.nodeType===1){if(!A){e.sizcache=x;e.sizset=v}if(typeof y!=="string"){if(e===y){w=true;break}}else{if(c.filter(y,[e]).length>0){w=e;break}}}e=e[t]}B[v]=w}}}c.contains=document.compareDocumentPosition?function(t,e){return !!(t.compareDocumentPosition(e)&16)}:function(t,e){return t!==e&&(t.contains?t.contains(e):true)};c.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":false};var i=function(e,z){var v=[],w="",x,u=z.nodeType?[z]:z;while((x=g.match.PSEUDO.exec(e))){w+=x[0];e=e.replace(g.match.PSEUDO,"")}e=g.relative[e]?e+"*":e;for(var y=0,t=u.length;y<t;y++){c(e,u[y],v)}return c.filter(w,v)};return c});a.register("core.dom.builder",function(b){return function(f,e){var k=((typeof f)==="string");var c=f;if(k){c=b.C("div");c.innerHTML=f}var l,g;l={};if(e){for(m in selectorList){l[m]=b.core.dom.sizzle(e[m].toString(),c)}}else{g=b.core.dom.sizzle("[node-type]",c);for(var h=0,j=g.length;h<j;h+=1){var m=g[h].getAttribute("node-type");if(!l[m]){l[m]=[]}l[m].push(g[h])}}var d=f;if(k){d=b.C("buffer");while(c.childNodes[0]){d.appendChild(c.childNodes[0])}}return{box:d,list:l}}});a.register("core.dom.isNode",function(b){return function(c){return(c!=undefined)&&Boolean(c.nodeName)&&Boolean(c.nodeType)}});a.register("core.evt.addEvent",function(b){return function(e,d,c){e=b.E(e);if(e==null){return false}if(typeof c!=="function"){return false}if(e.addEventListener){e.addEventListener(d,c,false)}else{if(e.attachEvent){e.attachEvent("on"+d,c)}else{e["on"+d]=c}}return true}});a.register("core.util.browser",function(i){var b=navigator.userAgent.toLowerCase();var l=window.external||"";var d,f,g,n,h;var c=function(e){var m=0;return parseFloat(e.replace(/\./g,function(){return(m++==1)?"":"."}))};try{if((/windows|win32/i).test(b)){h="windows"}else{if((/macintosh/i).test(b)){h="macintosh"}else{if((/rhino/i).test(b)){h="rhino"}}}if((f=b.match(/applewebkit\/([^\s]*)/))&&f[1]){d="webkit";n=c(f[1])}else{if((f=b.match(/presto\/([\d.]*)/))&&f[1]){d="presto";n=c(f[1])}else{if(f=b.match(/msie\s([^;]*)/)){d="trident";n=1;if((f=b.match(/trident\/([\d.]*)/))&&f[1]){n=c(f[1])}}else{if(/gecko/.test(b)){d="gecko";n=1;if((f=b.match(/rv:([\d.]*)/))&&f[1]){n=c(f[1])}}}}}if(/world/.test(b)){g="world"}else{if(/360se/.test(b)){g="360"}else{if((/maxthon/.test(b))||typeof l.max_version=="number"){g="maxthon"}else{if(/tencenttraveler\s([\d.]*)/.test(b)){g="tt"}else{if(/se\s([\d.]*)/.test(b)){g="sogou"}}}}}}catch(k){}var j={OS:h,CORE:d,Version:n,EXTRA:(g?g:false),IE:/msie/.test(b),OPERA:/opera/.test(b),MOZ:/gecko/.test(b)&&!/(compatible|webkit)/.test(b),IE5:/msie 5 /.test(b),IE55:/msie 5.5/.test(b),IE6:/msie 6/.test(b),IE7:/msie 7/.test(b),IE8:/msie 8/.test(b),IE9:/msie 9/.test(b),IE10:/msie 10/.test(b),SAFARI:!/chrome\/([\d.]*)/.test(b)&&/\/([\da-f.]*) safari/.test(b),CHROME:/chrome\/([\d.]*)/.test(b),IPAD:/\(ipad/i.test(b),IPHONE:/\(iphone/i.test(b),ITOUCH:/\(itouch/i.test(b),MOBILE:/mobile/i.test(b)};return j});a.register("core.func.getType",function(b){return function(c){var d;return((d=typeof(c))=="object"?c==null&&"null"||Object.prototype.toString.call(c).slice(8,-1):d).toLowerCase()}});a.register("core.dom.ready",function(h){var d=[];var m=false;var l=h.core.func.getType;var i=h.core.util.browser;var g=h.core.evt.addEvent;var j=function(){if(!m){if(document.readyState==="complete"){return true}}return m};var e=function(){if(m==true){return}m=true;for(var o=0,n=d.length;o<n;o++){if(l(d[o])==="function"){try{d[o].call()}catch(p){}}}d=[]};var b=function(){if(j()){e();return}try{document.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,25);return}e()};var c=function(){if(j()){e();return}setTimeout(arguments.callee,25)};var f=function(){g(document,"DOMContentLoaded",e)};var k=function(){g(window,"load",e)};if(!j()){if(h.IE&&window===window.top){b()}f();c();k()}return function(n){if(j()){if(l(n)==="function"){n.call()}}else{d.push(n)}}});a.register("core.dom.setStyle",function(c){function b(){if("y" in b){return b.y}return b.y=("filters" in c.C("div"))}return function(d,e,f){if(b()){switch(e){case"opacity":d.style.filter="alpha(opacity="+(f*100)+")";if(!d.currentStyle||!d.currentStyle.hasLayout){d.style.zoom=1}break;case"float":e="styleFloat";default:d.style[e]=f}}else{if(e=="float"){e="cssFloat"}d.style[e]=f}}});a.register("core.dom.getStyle",function(c){function b(){if("y" in b){return b.y}return b.y=("filters" in c.C("div"))}return function(f,h){if(b()){switch(h){case"opacity":var j=100;try{j=f.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(i){try{j=f.filters("alpha").opacity}catch(i){}}return j/100;case"float":h="styleFloat";default:var g=f.currentStyle?f.currentStyle[h]:null;return(f.style[h]||g)}}else{if(h=="float"){h="cssFloat"}try{var d=document.defaultView.getComputedStyle(f,"")}catch(i){}return f.style[h]||d?d[h]:null}}});a.register("core.dom.hasClassName",function(b){return function(d,c){return(new RegExp("(^|\\s)"+c+"($|\\s)").test(d.className))}});a.register("core.str.trim",function(b){return function(f){if(typeof f!=="string"){throw"trim need a string as parameter"}var c=f.length;var e=0;var d=/(\u3000|\s|\t|\u00A0)/;while(e<c){if(!d.test(f.charAt(e))){break}e+=1}while(c>e){if(!d.test(f.charAt(c-1))){break}c-=1}return f.slice(e,c)}});a.register("core.dom.addClassName",function(b){return function(d,c){if(d.nodeType===1){if(!b.core.dom.hasClassName(d,c)){d.className=b.core.str.trim(d.className)+" "+c}}}});a.register("core.dom.removeClassName",function(b){return function(d,c){if(d.nodeType===1){if(b.core.dom.hasClassName(d,c)){d.className=d.className.replace(new RegExp("(^|\\s)"+c+"($|\\s)")," ")}}}});a.register("core.dom.contains",function(b){return function(c,d){if(!c||!d){return false}if(c===d){return false}else{if(c.compareDocumentPosition){return((c.compareDocumentPosition(d)&16)===16)}else{if(c.contains&&d.nodeType===1){return c.contains(d)}else{while(d=d.parentNode){if(c===d){return true}}}}}return false}});a.register("core.util.scrollPos",function(b){return function(e){e=e||document;var c=e.documentElement;var d=e.body;return{top:Math.max(window.pageYOffset||0,c.scrollTop,d.scrollTop),left:Math.max(window.pageXOffset||0,c.scrollLeft,d.scrollLeft)}}});a.register("core.obj.parseParam",function(b){return function(e,d,c){var f,g={};d=d||{};for(f in e){g[f]=e[f];if(d[f]!=null){if(c){if(e.hasOwnProperty(f)){g[f]=d[f]}}else{g[f]=d[f]}}}return g}});a.register("core.dom.position",function(d){var b=function(h){var i,g,f,e,k,j;i=h.getBoundingClientRect();g=d.core.util.scrollPos();f=h.ownerDocument.body;e=h.ownerDocument.documentElement;k=e.clientTop||f.clientTop||0;j=e.clientLeft||f.clientLeft||0;return{l:parseInt(i.left+g.left-j,10)||0,t:parseInt(i.top+g.top-k,10)||0}};var c=function(g,e){var h,f;h=[g.offsetLeft,g.offsetTop];f=g.offsetParent;if(f!==g&&f!==e){while(f){h[0]+=f.offsetLeft;h[1]+=f.offsetTop;f=f.offsetParent}}if(d.core.util.browser.OPERA!=-1||(d.core.util.browser.SAFARI!=-1&&g.style.position=="absolute")){h[0]-=document.body.offsetLeft;h[1]-=document.body.offsetTop}if(g.parentNode){f=g.parentNode}else{f=null}while(f&&!/^body|html$/i.test(f.tagName)&&f!==e){if(f.style.display.search(/^inline|table-row.*$/i)){h[0]-=f.scrollLeft;h[1]-=f.scrollTop}f=f.parentNode}return{l:parseInt(h[0],10),t:parseInt(h[1],10)}};return function(g,e){if(g==document.body){return false}if(g.parentNode==null){return false}if(g.style.display=="none"){return false}var f=d.core.obj.parseParam({parent:null},e);if(g.getBoundingClientRect){if(f.parent){var i=b(g);var h=b(f.parent);return{l:i.l-h.l,t:i.t-h.t}}else{return b(g)}}else{return c(g,f.parent||document.body)}}});a.register("core.util.hideContainer",function(d){var e;var b=function(){if(e){return}e=d.C("div");e.style.cssText="position:absolute;top:-9999px;left:-9999px;";document.getElementsByTagName("head")[0].appendChild(e)};var c={appendChild:function(f){if(d.core.dom.isNode(f)){b();e.appendChild(f)}},removeChild:function(f){if(d.core.dom.isNode(f)){e&&e.removeChild(f)}}};return c});a.register("core.dom.getSize",function(c){var b=function(e){if(!c.core.dom.isNode(e)){throw"core.dom.getSize need Element as first parameter"}return{width:e.offsetWidth,height:e.offsetHeight}};var d=function(f){var e=null;if(f.style.display==="none"){f.style.visibility="hidden";f.style.display="";e=b(f);f.style.display="none";f.style.visibility="visible"}else{e=b(f)}return e};return function(f){var e={};if(!f.parentNode){c.core.util.hideContainer.appendChild(f);e=d(f);c.core.util.hideContainer.removeChild(f)}else{e=d(f)}return e}});a.register("core.dom.cssText",function(d){var g=function(n){var m=0;var l=[];var p="close";var j=false;var h=null;var k=function(i){l.push({type:"info",content:n.slice(0,m)});l.push({type:"sign",content:n.slice(m,m+1)});n=n.slice(m+1);m=0};while(n){var o=n.charAt(m);switch(o){case":":if(!j){if(p==="close"){l.push({type:"attr",content:n.slice(0,m)});l.push({type:"sign",content:n.slice(m,m+1)});n=n.slice(m+1);m=0;p="open";break}}m+=1;break;case";":if(!j){if(p==="open"){l.push({type:"info",content:n.slice(0,m)});l.push({type:"sign",content:n.slice(m,m+1)})}n=n.slice(m+1);m=0;p="close";break}m+=1;break;case'"':case"'":if(j){if(o===h){j=!j;h=null}}else{j=!j;h=o}m+=1;break;case" ":case"!":case",":case"(":case")":k(o);break;case"":l.push({type:"info",content:n.slice(0,m)});n="";m=0;break;default:m+=1}}return l};var f=function(l){var j={};var m;for(var k=0,h=l.length;k<h;k+=1){if(l[k].type==="attr"){m=l[k]["content"];j[m]=""}else{if(l[k].type==="sign"&&l[k]["content"]===";"){m=null;continue}else{if(l[k].type==="sign"&&l[k]["content"]===":"){continue}else{if(m!==null){j[m]+=l[k]["content"]}}}}}return j};var b=({webkit:"-webkit-",presto:"-o-",trident:"-ms-",gecko:"-moz-"})[d.core.util.browser.CORE];var e=["transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function"];var c=function(k){for(var j=0,h=e.length;j<h;j+=1){if(k===e[j]){return true}}return false};return function(j){var k=f(g(j||""));var h=function(m,l){m=m.toLowerCase();k[m]=l;if(c(m)){k[b+m]=l}return i};var i={push:h,remove:function(l){l=l.toLowerCase();k[l]&&delete k[l];if(c(l)){if(k[b+l]){delete k[b+l]}}return i},merge:function(n){var m=f(g(n||""));for(var l in m){h(l,m[l])}},getCss:function(){var m=[];for(var l in k){m.push(l+":"+k[l])}return m.join(";")}};return i}});a.register("core.arr.isArray",function(b){return function(c){return Object.prototype.toString.call(c)==="[object Array]"}});a.register("core.arr.foreach",function(d){var b=function(k,g){var j=[];for(var h=0,f=k.length;h<f;h+=1){var e=g(k[h],h);if(e===false){break}else{if(e!==null){j[h]=e}}}return j};var c=function(i,f){var h={};for(var g in i){var e=f(i[g],g);if(e===false){break}else{if(e!==null){h[g]=e}}}return h};return function(f,e){if(d.core.arr.isArray(f)||(f.length&&f[0]!==undefined)){return b(f,e)}else{if(typeof f==="object"){return c(f,e)}}return null}});a.register("core.evt.removeEvent",function(b){return function(e,d,c){e=b.E(e);if(e==null){return false}if(typeof c!=="function"){return false}if(e.removeEventListener){e.removeEventListener(d,c,false)}else{if(e.detachEvent){e.detachEvent("on"+d,c)}}e["on"+d]=null;return true}});a.register("core.evt.getEvent",function(b){return(function(){if(document.addEventListener){return function(){var d=arguments.callee;var c;do{c=d.arguments[0];if(c&&(c.constructor==Event||c.constructor==MouseEvent||c.constructor==KeyboardEvent)){return c}}while(d=d.caller);return c}}else{return function(e,d,c){return window.event}}}())});a.register("core.evt.stopEvent",function(b){return function(c){c=c||b.core.evt.getEvent();if(c.preventDefault){c.preventDefault();c.stopPropagation()}else{c.cancelBubble=true;c.returnValue=false}return false}});a.register("core.evt.preventDefault",function(b){return function(c){c=c||b.core.evt.getEvent();if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}}});a.register("core.json.queryToJson",function(b){return function(e,j){var l=b.core.str.trim(e).split("&");var k={};var d=function(i){if(j){return decodeURIComponent(i)}else{return i}};for(var g=0,h=l.length;g<h;g++){if(l[g]){var f=l[g].split("=");var c=f[0];var m=f[1];if(f.length<2){m=c;c="$nullName"}if(!k[c]){k[c]=d(m)}else{if(b.core.arr.isArray(k[c])!=true){k[c]=[k[c]]}k[c].push(d(m))}}}return k}});a.register("core.evt.fixEvent",function(c){var b="clientX clientY pageX pageY screenX screenY".split(" ");return function(g){g=g||c.core.evt.getEvent();if(!g.target){g.target=g.srcElement||document}if(g.pageX==null&&g.clientX!=null){var f=document.documentElement;var d=document.body;g.pageX=g.clientX+(f.scrollLeft||d&&d.scrollLeft||0)-(f.clientLeft||d&&d.clientLeft||0);g.pageY=g.clientY+(f.scrollTop||d&&d.scrollTop||0)-(f.clientTop||d&&d.clientTop||0)}if(!g.which&&g.button){if(g.button&1){g.which=1}else{if(g.button&4){g.which=2}else{if(g.button&2){g.which=3}}}}if(g.relatedTarget===undefined){g.relatedTarget=g.fromElement||g.toElement}if(g.layerX==null&&g.offsetX!=null){g.layerX=g.offsetX;g.layerY=g.offsetY}return g}});a.register("core.obj.isEmpty",function(b){return function(e,d){for(var c in e){if(d||e.hasOwnProperty(c)){return false}}return true}});a.register("core.func.empty",function(){return function(){}});a.register("core.evt.delegatedEvent",function(c){var b=function(g,f){for(var e=0,d=g.length;e<d;e+=1){if(c.core.dom.contains(g[e],f)){return true}}return false};return function(f,i){if(!c.core.dom.isNode(f)){throw"core.evt.delegatedEvent need an Element as first Parameter"}if(!i){i=[]}if(c.core.arr.isArray(i)){i=[i]}var d={};var h=function(m){var j=c.core.evt.fixEvent(m);var l=j.target;var k=m.type;e(l,k,j)};var e=function(n,m,k){var l=null;var o=function(){var r,p,q;r=n.getAttribute("action-target");if(r){p=c.core.dom.sizzle(r,f);if(p.length){q=k.target=p[0]}}o=c.core.func.empty;return q};var j=function(){var p=o()||n;if(d[m]&&d[m][l]){return d[m][l]({evt:k,el:p,box:f,data:c.core.json.queryToJson(p.getAttribute("action-data")||"")})}else{return true}};if(b(i,n)){return false}else{if(!c.core.dom.contains(f,n)){return false}else{while(n&&n!==f){if(n.nodeType===1){l=n.getAttribute("action-type");if(l&&j()===false){break}}n=n.parentNode}}}};var g={};g.add=function(l,m,k){if(!d[m]){d[m]={};c.core.evt.addEvent(f,m,h)}var j=d[m];j[l]=k};g.remove=function(j,k){if(d[k]){delete d[k][j];if(c.core.obj.isEmpty(d[k])){delete d[k];c.core.evt.removeEvent(f,k,h)}}};g.pushExcept=function(j){i.push(j)};g.removeExcept=function(l){if(!l){i=[]}else{for(var k=0,j=i.length;k<j;k+=1){if(i[k]===l){i.splice(k,1)}}}};g.clearExcept=function(j){i=[]};g.fireAction=function(k,n,j,m){var l="";if(m&&m.actionData){l=m.actionData}if(d[n]&&d[n][k]){d[n][k]({evt:j,el:null,box:f,data:c.core.json.queryToJson(l),fireFrom:"fireAction"})}};g.fireInject=function(m,n,j){var k=m.getAttribute("action-type");var l=m.getAttribute("action-data");if(k&&d[n]&&d[n][k]){d[n][k]({evt:j,el:m,box:f,data:c.core.json.queryToJson(l||""),fireFrom:"fireInject"})}};g.fireDom=function(k,l,j){e(k,l,j||{})};g.destroy=function(){for(var m in d){for(var j in d[m]){delete d[m][j]}delete d[m];c.core.evt.removeEvent(f,m,h)}};return g}});a.register("core.dom.removeNode",function(b){return function(c){c=b.E(c)||c;try{c.parentNode.removeChild(c)}catch(d){}}});a.register("core.util.getUniqueKey",function(d){var b=(new Date()).getTime().toString(),c=1;return function(){return b+(c++)}});a.register("core.str.parseURL",function(b){return function(e){var d=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;var j=["url","scheme","slash","host","port","path","query","hash"];var g=d.exec(e);var h={};for(var f=0,c=j.length;f<c;f+=1){h[j[f]]=g[f]||""}return h}});a.register("core.json.jsonToQuery",function(b){var c=function(e,d){e=e==null?"":e;e=b.core.str.trim(e.toString());if(d){return encodeURIComponent(e)}return e};return function(h,f){var j=[];if(typeof h=="object"){for(var e in h){if(e==="$nullName"){j=j.concat(h[e]);continue}if(h[e] instanceof Array){for(var g=0,d=h[e].length;g<d;g++){j.push(e+"="+c(h[e][g],f))}}else{if(typeof h[e]!="function"){j.push(e+"="+c(h[e],f))}}}}if(j.length){return j.join("&")}return""}});a.register("core.util.URL",function(b){return function(g,d){var f=b.core.obj.parseParam({isEncodeQuery:false,isEncodeHash:false},d||{});var e={};var i=b.core.str.parseURL(g);var c=b.core.json.queryToJson(i.query);var h=b.core.json.queryToJson(i.hash);e.setParam=function(j,k){c[j]=k;return this};e.getParam=function(j){return c[j]};e.setParams=function(k){for(var j in k){e.setParam(j,k[j])}return this};e.setHash=function(j,k){h[j]=k;return this};e.getHash=function(j){return h[j]};e.valueOf=e.toString=function(){var j=[];var k=b.core.json.jsonToQuery(c,f.isEncodeQuery);var l=b.core.json.jsonToQuery(h,f.isEncodeQuery);if(i.scheme!=""){j.push(i.scheme+":");j.push(i.slash)}if(i.host!=""){j.push(i.host);if(i.port!=""){j.push(":");j.push(i.port)}}j.push("/");j.push(i.path);if(k!=""){j.push("?"+k)}if(l!=""){j.push("#"+l)}return j.join("")};return e}});a.register("core.io.scriptLoader",function(c){var d={};var b={url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:c.core.func.empty,onTimeout:c.core.func.empty,isEncode:false,uniqueID:null};return function(i){var g,e;var f=c.core.obj.parseParam(b,i);if(f.url==""){throw"scriptLoader: url is null"}var h=f.uniqueID||c.core.util.getUniqueKey();g=d[h];if(g!=null&&c.IE!=true){c.core.dom.removeNode(g);g=null}if(g==null){g=d[h]=c.C("script")}g.charset=f.charset;g.id="scriptRequest_script_"+h;g.type="text/javascript";if(f.onComplete!=null){if(c.IE){g.onreadystatechange=function(){if(g.readyState.toLowerCase()=="loaded"||g.readyState.toLowerCase()=="complete"){try{clearTimeout(e);document.getElementsByTagName("head")[0].removeChild(g);g.onreadystatechange=null}catch(j){}f.onComplete()}}}else{g.onload=function(){try{clearTimeout(e);c.core.dom.removeNode(g)}catch(j){}f.onComplete()}}}g.src=c.core.util.URL(f.url,{isEncodeQuery:f.isEncode}).setParams(f.args).toString();document.getElementsByTagName("head")[0].appendChild(g);if(f.timeout>0){e=setTimeout(function(){try{document.getElementsByTagName("head")[0].removeChild(g)}catch(j){}f.onTimeout()},f.timeout)}return g}});a.register("core.io.jsonp",function(b){return function(g){var e=b.core.obj.parseParam({url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:null,onTimeout:null,responseName:null,isEncode:false,varkey:"callback"},g);var h=-1;var f=e.responseName||("STK_"+b.core.util.getUniqueKey());e.args[e.varkey]=f;var c=e.onComplete;var d=e.onTimeout;window[f]=function(i){if(h!=2&&c!=null){h=1;c(i)}};e.onComplete=null;e.onTimeout=function(){if(h!=1&&d!=null){h=2;d()}};return b.core.io.scriptLoader(e)}});a.register("core.arr.indexOf",function(b){return function(e,f){if(f.indexOf){return f.indexOf(e)}for(var d=0,c=f.length;d<c;d++){if(f[d]===e){return d}}return -1}});a.register("core.arr.inArray",function(b){return function(c,d){return b.core.arr.indexOf(c,d)>-1}});a.register("core.json.merge",function(d){var c=function(f){if(f===undefined){return true}if(f===null){return true}if(d.core.arr.inArray((typeof f),["number","string","function","boolean"])){return true}if(d.core.dom.isNode(f)){return true}return false};var b=function(h,l,m){if(c(m)){h[l]=m;return}if(d.core.arr.isArray(m)){if(!d.core.arr.isArray(h[l])){h[l]=[]}for(var j=0,f=m.length;j<f;j+=1){b(h[l],j,m[j])}return}if(typeof m==="object"){if(c(h[l])||d.core.arr.isArray(h[l])){h[l]={}}for(var g in m){b(h[l],g,m[g])}return}};var e=function(h,j,g){var i={};if(g){for(var f in h){b(i,f,h[f])}for(var f in j){b(i,f,j[f])}}else{for(var f in h){i[f]=h[f]}for(var f in j){i[f]=j[f]}}return i};return function(f,i,h){var g=d.core.obj.parseParam({isDeep:false},h);return e(f,i,g.isDeep)}});a.register("core.obj.beget",function(c){var b=function(){};return function(d){b.prototype=d;return new b()}});a.register("core.str.encodeHTML",function(b){return function(c){if(typeof c!=="string"){throw"encodeHTML need a string as parameter"}return c.replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\u00A0/g,"&nbsp;").replace(/(\u0020|\u000B|\u2028|\u2029|\f)/g,"&#32;")}});a.register("core.str.bLength",function(b){return function(d){if(!d){return 0}var c=d.match(/[^\x00-\xff]/g);return(d.length+(!c?0:c.length))}});a.register("core.str.leftB",function(b){return function(e,c){var d=e.replace(/\*/g," ").replace(/[^\x00-\xff]/g,"**");e=e.slice(0,d.slice(0,c).replace(/\*\*/g," ").replace(/\*/g,"").length);if(b.core.str.bLength(e)>c&&c>0){e=e.slice(0,e.length-1)}return e}});a.register("core.util.easyTemplate",function(c){var b=function(f,h){if(!f){return""}if(f!==b.template){b.template=f;b.aStatement=b.parsing(b.separate(f))}var e=b.aStatement;var g=function(d){if(d){h=d}return arguments.callee};g.toString=function(){return(new Function(e[0],e[1]))(h)};return g};b.separate=function(d){var f=/\\'/g;var e=d.replace(/(<(\/?)#(.*?(?:\(.*?\))*)>)|(')|([\r\n\t])|(\$\{([^\}]*?)\})/g,function(j,i,p,o,n,m,l,k){if(i){return"{|}"+(p?"-":"+")+o+"{|}"}if(n){return"\\'"}if(m){return""}if(l){return"'+("+k.replace(f,"'")+")+'"}});return e};b.parsing=function(m){var l,f,i,e,h,g,j,k=["var aRet = [];"];j=m.split(/\{\|\}/);var d=/\s/;while(j.length){i=j.shift();if(!i){continue}h=i.charAt(0);if(h!=="+"&&h!=="-"){i="'"+i+"'";k.push("aRet.push("+i+");");continue}e=i.split(d);switch(e[0]){case"+et":l=e[1];f=e[2];k.push('aRet.push("<!--'+l+' start-->");');break;case"-et":k.push('aRet.push("<!--'+l+' end-->");');break;case"+if":e.splice(0,1);k.push("if"+e.join(" ")+"{");break;case"+elseif":e.splice(0,1);k.push("}else if"+e.join(" ")+"{");break;case"-if":k.push("}");break;case"+else":k.push("}else{");break;case"+list":k.push("if("+e[1]+".constructor === Array){with({i:0,l:"+e[1]+".length,"+e[3]+"_index:0,"+e[3]+":null}){for(i=l;i--;){"+e[3]+"_index=(l-i-1);"+e[3]+"="+e[1]+"["+e[3]+"_index];");break;case"-list":k.push("}}}");break;default:break}}k.push('return aRet.join("");');return[f,k.join("")]};return b});a.register("core.evt.custEvent",function(d){var i="__custEventKey__",c=1,h={},e=function(m,l){var k=(typeof m=="number")?m:m[i];return(k&&h[k])&&{obj:(typeof l=="string"?h[k][l]:h[k]),key:k}};var g={};var j=function(p,m,l,n,k){if(p&&typeof m=="string"&&l){var o=e(p,m);if(!o||!o.obj){throw"custEvent ("+m+") is undefined !"}o.obj.push({fn:l,data:n,once:k});return o.key}};var b=function(m,t,r,n){var v=true;var p=function(){v=false};if(m&&typeof t=="string"){var k=e(m,t),q;if(k&&(q=k.obj)){r=typeof r!="undefined"&&[].concat(r)||[];for(var l=q.length-1;l>-1&&q[l];l--){var u=q[l].fn;var s=q[l].once;if(u&&u.apply){try{u.apply(m,[{obj:m,type:t,data:q[l].data,preventDefault:p}].concat(r));if(s){q.splice(l,1)}}catch(o){d.log("[error][custEvent]"+o.message,o,o.stack)}}}if(v&&d.core.func.getType(n)==="function"){n()}return k.key}}};var f={define:function(o,m){if(o&&m){var l=(typeof o=="number")?o:o[i]||(o[i]=c++),n=h[l]||(h[l]={});m=[].concat(m);for(var k=0;k<m.length;k++){n[m[k]]||(n[m[k]]=[])}return l}},undefine:function(n,m){if(n){var l=(typeof n=="number")?n:n[i];if(l&&h[l]){if(m){m=[].concat(m);for(var k=0;k<m.length;k++){if(m[k] in h[l]){delete h[l][m[k]]}}}else{delete h[l]}}}},add:function(n,l,k,m){return j(n,l,k,m,false)},once:function(n,l,k,m){return j(n,l,k,m,true)},remove:function(p,n,m){if(p){var o=e(p,n),q,k;if(o&&(q=o.obj)){if(d.core.arr.isArray(q)){if(m){var l=0;while(q[l]){if(q[l].fn===m){break}l++}q.splice(l,1)}else{q.splice(0,q.length)}}else{for(var l in q){q[l]=[]}}return o.key}}},fire:function(n,m,k,l){return b(n,m,k,l)},hook:function(t,v,n){if(!t||!v||!n){return}var q=[],o=t[i],r=o&&h[o],l,u=v[i]||(v[i]=c++),k;if(r){k=g[o+"_"+u]||(g[o+"_"+u]={});var s=function(x){var w=true;b(v,k[x.type].type,Array.prototype.slice.apply(arguments,[1,arguments.length]),function(){w=false});w&&x.preventDefault()};for(var p in n){var m=n[p];if(!k[p]){if(l=r[p]){l.push({fn:s,data:undefined});k[p]={fn:s,type:m};q.push(m)}}}f.define(v,q)}},unhook:function(r,l,q){if(!r||!l||!q){return}var n=r[i],p=l[i],k=g[n+"_"+p];if(k){for(var m in q){var o=q[m];if(k[m]){f.remove(r,m,k[m].fn)}}}},destroy:function(){h={};c=1;g={}}};return f});a.register("core.util.drag",function(d){var b=function(f){f.cancelBubble=true;return false};var c=function(f,e){f.clientX=e.clientX;f.clientY=e.clientY;f.pageX=e.clientX+d.core.util.scrollPos()["left"];f.pageY=e.clientY+d.core.util.scrollPos()["top"];return f};return function(f,n){if(!d.core.dom.isNode(f)){throw"core.util.drag need Element as first parameter"}var m=d.core.obj.parseParam({actRect:[],actObj:{}},n);var j={};var k=d.core.evt.custEvent.define(m.actObj,"dragStart");var g=d.core.evt.custEvent.define(m.actObj,"dragEnd");var h=d.core.evt.custEvent.define(m.actObj,"draging");var l=function(p){var o=c({},p);document.body.onselectstart=function(){return false};d.core.evt.addEvent(document,"mousemove",i);d.core.evt.addEvent(document,"mouseup",e);d.core.evt.addEvent(document,"click",b,true);if(p.preventDefault){p.preventDefault();p.stopPropagation()}d.core.evt.custEvent.fire(k,"dragStart",o);return false};var i=function(p){var o=c({},p);p.cancelBubble=true;d.core.evt.custEvent.fire(k,"draging",o)};var e=function(p){var o=c({},p);document.body.onselectstart=function(){return true};d.core.evt.removeEvent(document,"mousemove",i);d.core.evt.removeEvent(document,"mouseup",e);d.core.evt.removeEvent(document,"click",b,true);d.core.evt.custEvent.fire(k,"dragEnd",o)};d.core.evt.addEvent(f,"mousedown",l);j.destroy=function(){d.core.evt.removeEvent(f,"mousedown",l);m=null};j.getActObj=function(){return m.actObj};return j}});a.register("core.util.storage",function(f){var b=window.localStorage;if(b){return{get:function(e){return unescape(b.getItem(e))},set:function(e,h,i){b.setItem(e,escape(h))},del:function(e){b.removeItem(e)},clear:function(){b.clear()},getAll:function(){var e=b.length,j=null,k=[];for(var h=0;h<e;h++){j=b.key(h);k.push(j+"="+b.getItem(j))}return k.join("; ")}}}else{if(window.ActiveXObject){var c=document.documentElement;var d="localstorage";try{c.addBehavior("#default#userdata");c.save("localstorage")}catch(g){}return{set:function(e,h){c.setAttribute(e,h);c.save(d)},get:function(e){c.load(d);return c.getAttribute(e)},del:function(e){c.removeAttribute(e);c.save(d)}}}else{return{get:function(m){var j=document.cookie.split("; "),h=j.length,e=[];for(var k=0;k<h;k++){e=j[k].split("=");if(m===e[0]){return unescape(e[1])}}return null},set:function(e,h,i){if(!(i&&(i instanceof Date))){i=new Date();i.setDate(i.getDate()+1)}document.cookie=e+"="+escape(h)+"; expires="+i.toGMTString()},del:function(e){document.cookie=e+"=''; expires=Fri, 31 Dec 1999 23:59:59 GMT;"},clear:function(){var j=document.cookie.split("; "),h=j.length,e=[];for(var k=0;k<h;k++){e=j[k].split("=");this.deleteKey(e[0])}},getAll:function(){return unescape(document.cookie.toString())}}}}});a.register("core.util.cookie",function(c){var b={set:function(h,k,j){var e=[];var i,g;var f=c.core.obj.parseParam({expire:null,path:"/",domain:null,secure:null,encode:true},j);if(f.encode==true){k=escape(k)}e.push(h+"="+k);if(f.path!=null){e.push("path="+f.path)}if(f.domain!=null){e.push("domain="+f.domain)}if(f.secure!=null){e.push(f.secure)}if(f.expire!=null){i=new Date();g=i.getTime()+f.expire*3600000;i.setTime(g);e.push("expires="+i.toGMTString())}document.cookie=e.join(";")},get:function(f){f=f.replace(/([\.\[\]\$])/g,"\\$1");var e=new RegExp(f+"=([^;]*)?;","i");var g=document.cookie+";";var d=g.match(e);if(d){return d[1]||""}else{return""}},remove:function(d,e){e=e||{};e.expire=-10;b.set(d,"",e)}};return b});a.register("core.util.language",function(b){return function(e,g){var f=[];for(var d=2,c=arguments.length;d<c;d+=1){f.push(arguments[d])}return e.replace(/#L\{((.*?)(?:[^\\]))\}/ig,function(){var i=arguments[1];var h;if(g&&g[i]!==undefined){h=g[i]}else{h=i}if(f.length){h=h.replace(/(\%s)/ig,function(){var j=f.shift();if(j!==undefined){return j}else{return arguments[0]}})}return h})}});a.register("core.util.listener",function(b){return(function(){var d={};var e=[];var c;var f=function(){if(e.length==0){return}clearTimeout(c);var g=e.splice(0,1)[0];try{g.func.apply(g.func,[].concat(g.data))}catch(h){}c=setTimeout(f,25)};return{register:function(g,i,h){d[g]=d[g]||{};d[g][i]=d[g][i]||[];d[g][i].push(h)},fire:function(j,l,m){var k;var h,g;if(d[j]&&d[j][l]&&d[j][l].length>0){k=d[j][l];k.data_cache=m;for(h=0,g=k.length;h<g;h++){e.push({channel:j,evt:l,func:k[h],data:m})}f()}},remove:function(j,l,k){if(d[j]){if(d[j][l]){for(var h=0,g=d[j][l].length;h<g;h++){if(d[j][l][h]===k){d[j][l].splice(h,1);break}}}}},list:function(){return d},cache:function(g,h){if(d[g]&&d[g][h]){return d[g][h].data_cache}}}})()});(function(){var c=a.core;var d={isNode:c.dom.isNode,Ready:c.dom.ready,setStyle:c.dom.setStyle,getStyle:c.dom.getStyle,addClassName:c.dom.addClassName,hasClassName:c.dom.hasClassName,removeClassName:c.dom.removeClassName,contains:c.dom.contains,position:c.dom.position,foreach:c.arr.foreach,isArray:c.arr.isArray,addEvent:c.evt.addEvent,removeEvent:c.evt.removeEvent,getEvent:c.evt.getEvent,stopEvent:c.evt.stopEvent,preventDefault:c.evt.preventDefault,getType:c.func.getType,funcEmpty:c.func.empty,jsonp:c.io.jsonp,scriptLoader:c.io.scriptLoader,merge:c.json.merge,jsonToQuery:c.json.jsonToQuery,beget:c.obj.beget,parseParam:c.obj.parseParam,bLength:c.str.bLength,leftB:c.str.leftB,trim:c.str.trim,encodeHTML:c.str.encodeHTML,cookie:c.util.cookie,drag:c.util.drag,listener:c.util.listener,browser:c.util.browser,language:c.language,getUniqueKey:c.util.getUniqueKey};for(var b in d){if(d[b]){a.regShort(b,d[b])}}})();a.register("common.listener",function(c){var d={};var b={};b.define=function(f,g){if(d[f]!=null){throw"common.listener.define: 频道已被占用"}d[f]=g;var e={};e.register=function(i,h){if(d[f]==null){throw"common.listener.define: 频道未定义"}c.core.util.listener.register(f,i,h)};e.fire=function(h,i){if(d[f]==null){throw"commonlistener.define: 频道未定义"}c.core.util.listener.fire(f,h,i)};e.remove=function(i,h){c.core.util.listener.remove(f,i,h)};return e};return b});a.register("common.channel.plugin",function(b){return b.common.listener.define("common.channel.plugin",["outlogin_ready","plugin_ready","weibolist_show","weibolist_hide"])});a.register("kit.obj.append",function(b){return function(g){for(var f=1,d=arguments.length;f<d;f++){var c=arguments[f]||{};for(var e in c){g[e]=c[e]}}return g}});a.register("kit.dom.builder",function(c){var b=null;return function(d){var e=null;if(typeof(d)=="string"){if(!b){b=c.C("div")}b.innerHTML=d;e=b.children[0];b.removeChild(e);b.innerHTML=""}else{e=d}var g={};var f=e.getElementsByTagName("*");if(f.length>0){c.foreach(f,function(j){if(c.isNode(j)){var i=j.getAttribute("node-type");if(i){if(!g[i]){g[i]=[]}g[i].push(j)}}})}var h={};h.box=e;h.list=g;return h}});a.register("kit.dom.parseDOM",function(b){return function(d){for(var c in d){if(d[c]&&(d[c].length==1)){d[c]=d[c][0]}}return d}});a.register("kit.dom.loadStyle",function(e){var d;var c=e.funcEmpty;var b=e.core.util.browser;return function(g,n){var m,h,j=false,l=false;var k=e.parseParam({id:e.getUniqueKey(),timeout:30*1000,styleCheck:null,onLoad:c,onTimeout:c,props:{charset:"utf-8",rel:"stylesheet",media:"screen",type:"text/css"}},n);m=e.C("link");e.foreach(k.props,function(p,o){m[o]=p});m.id=k.id;m.href=g;var f=function(){clearInterval(h);if(!l&&!j){if(e.getType(k.onLoad)==="function"){setTimeout(k.onLoad,100)}}j=true};if(b.IE){m.onload=f}else{if(e.getType(k.styleCheck)==="function"){h=setInterval(function(){if(k.styleCheck()){f()}},10)}else{var i=document.createElement("img");i.onerror=f;i.src=g}}if(k.timeout&&k.onTimeout){setTimeout(function(){clearInterval(h);if(!j&&e.getType(k.onTimeout)==="function"){l=true;k.onTimeout()}},k.timeout)}if(!d){d=document.getElementsByTagName("head")[0]}d.appendChild(m)}});a.register("kit.dom.appendStyle",function(b){return function(f,c){var d=b.parseParam({autoAppend:true,target:null,type:"text/css"},c);var e;f=f||"";f=f.toString();if(b.isNode(d.target)&&d.target.tagName.toLowerCase()==="style"){e=d.target}else{e=document.createElement("style");e.setAttribute("type",d.type)}if(e.styleSheet){e.styleSheet.cssText=e.innerHTML+f}else{e.appendChild(document.createTextNode(f))}if(d.autoAppend){document.getElementsByTagName("head")[0].appendChild(e)}return e}});a.register("kit.util.makeReady",function(b){return function(d){var e=b.parseParam({timeout:30*1000,condition:b.funcEmpty,ready:b.funcEmpty},d);var c,f;return{reset:function(){if(c){c.length=0;c=null}if(f){clearTimeout(f);f=null}},exec:function(g){var h=this;if(b.getType(g)==="function"){if(e.condition()){g()}else{if(!c){c=[];c.push(g);if(!f){f=setTimeout(h.reset,e.timeout)}e.ready(function(){clearTimeout(f);f=null;while(b.getType(c)==="array"&&c.length>0){c.shift()()}})}else{c.push(g)}}}},destroy:function(){this.reset()}}}});a.register("comp.defaultStyle",function(c){var b=['.tn-title-login-custom{float:left!important;font-family: "Microsoft YaHei","微软雅黑","SimSun","宋体"!important;position:relative!important;}',".tn-title-login-custom .tn-user-custom{float:left!important;font-size:12px!important;}",".tn-title-login-custom .tn-user-greet{float:left!important;height:17px!important;padding:12px 0!important;width:51px!important; line-height:17px!important;overflow:hidden!important;}",".tn-title-login-custom .tn-tab-custom{position:relative!important;float:left!important;border-width:0 1px!important;border-style:solid!important;width:85px!important;height:17px!important;padding:12px 0!important;_padding:14px 0 10px!important;text-align:center!important;font-style:normal!important;text-decoration:none!important; vertical-align:top!important;}",".tn-title-login-custom .tn-tab-custom-login{width:57px!important;_float:left;}",".tn-title-login-custom .tn-tab-custom i{font-style:normal!important;}",".tn-title-login-custom .tn-tab-custom:hover{text-decoration:none!important;}",".tn-title-login-custom .tn-tab-custom .tn-new-custom{display:none;position:absolute!important;right:2px!important;margin-top:-10px!important;height:11px!important;width:13px!important;padding-left:3px!important;font-size:8px!important;overflow:hidden!important;line-height:10px!important;text-align:center!important;-webkit-text-size-adjust:none!important;font-style:normal!important;}",".tn-title-login-custom .tn-tab-custom .tn-arrow-custom{display: inline-block!important;font-size: 12px!important;height: 5px!important;line-height: 13px!important;margin: 0 0 0 5px!important;overflow: hidden!important;transform: none!important;vertical-align: middle!important;width:9px!important;font-style:normal!important;}",".tn-title-login-custom .tn-topmenulist-custom{position:absolute!important;right:0!important;top:41px!important;border-width:1px 1px 0!important;border-style:solid!important;width:85px!important;overflow:hidden!important;}",".tn-title-login-custom .tn-topmenulist-custom .tn-text-list{margin-bottom:-2px!important;margin:0!important;padding:0!important;}",".tn-title-login-custom .tn-topmenulist-custom li{border-bottom-width:1px!important;border-bottom-style:solid!important;line-height:31px!important; list-style:none!important;margin:0!important;padding:0!important;}",".tn-title-login-custom .tn-topmenulist-custom a{display:block!important;padding:0 15px!important;text-decoration:none!important;text-align:left!important;}",".tn-title-login-custom .tn-topmenulist-custom a em{float:right!important;font-style:normal!important;}",".tn-title-login-custom .tn-topmenulist-custom a:hover{text-decoration:none!important;}",".tn-title-login-custom .tn-topmenulist-custom a.tn-user-custom-logout{background:#f2f2f2!important;color:#0a8cd2!important;}",".tn-title-login-custom .tn-topmenulist-custom a.tn-user-custom-logout:hover{text-decoration:underline!important;}","/*可覆盖样式区域*/",".tn-title-login-custom .tn-user-custom{background:#f7f7f7;}",".tn-title-login-custom .tn-tab-custom{border-color:#f7f7f7;color:#ff8601;}",".tn-title-login-custom .tn-tab-custom:hover,",".tn-title-login-custom .tn-tab-custom-onmouse{background:#eaeaea;border-color:#ff8503;color:#ff8601;}",".tn-title-login-custom .tn-tab-custom .tn-new-custom{background:url(//i.sso.sina.com.cn/images/login/icon_custom.png) no-repeat 0 -30px;color:#fff;text-align:center;-webkit-text-size-adjust: none;}",".tn-title-login-custom .tn-tab-custom .tn-arrow-custom{ background:url(//i.sso.sina.com.cn/images/login/icon_custom.png) no-repeat scroll 0 0 transparent; }",".tn-title-login-custom .tn-topmenulist-custom{border-color:#ff8601;background:#fff;}",".tn-title-login-custom .tn-topmenulist-custom li{border-bottom-color:#ff8601;}",".tn-title-login-custom .tn-topmenulist-custom a{color:#000;}",".tn-title-login-custom .tn-topmenulist-custom a em{color:#ff8603;}",".tn-title-login-custom .tn-topmenulist-custom a:hover{background:#fff6d9;color:#ff8601;}"];return{get:function(){if(typeof b!=="string"){b=b.join("\n")}return b}}});a.register("comp.userpanel.dropmenu",function(h){var d=h.core.evt.addEvent;var b=h.core.dom.contains;var c=h.core.evt.removeEvent;var g=h.core.dom.addClassName;var f=h.core.dom.removeClassName;var e=h.core.util.listener;return function(o){var p={};var i=4097,n=4098,x=4096;var q,l;var y;var z=[];var v=false;var A=5;var t=h.parseParam({button:null,menu:null,id:null,onActive:function(){},onCancel:function(){},activeClass:"active"},o);var u=function(F){for(var G=0;G<z.length;G++){clearTimeout(z[G])}z=[];var H=F.fromElement||F.relatedTarget;if(b(q,H)||H==t.button){return}l.style.display="";if(!v){t.onActive&&t.onActive();g(q,t.activeClass);v=true;e.fire("clearfloat","clear",[t.id])}};var k=function(F){var G=F.toElement||F.relatedTarget;if(b(q,G)){return}y=setTimeout(function(){l.style.display="none";t.onCancel&&t.onCancel();if(h.isNode(q)){f(q,t.activeClass)}v=false},A);z.push(y)};var s=function(F){for(var G=0;G<z.length;G++){clearTimeout(z[G])}z=[];var H=F.fromElement||F.relatedTarget;if(!h.isNode(H)){return}if(b(l,H)){return}e.fire("clearfloat","clear",[t.id]);l.style.display="";if(!v){t.onActive&&t.onActive();g(q,t.activeClass);v=true}};var m=function(F){var G=F.toElement||F.relatedTarget;if(!h.isNode(G)){return}if(b(l,G)){return}y=setTimeout(function(){l.style.display="none";t.onCancel&&t.onCancel();f(q,t.activeClass);v=false},A);z.push(y)};var E=function(){l.style.display="none";t.onCancel&&t.onCancel();f(q,t.activeClass);v=false};var D=function(){c(q,"mouseover",u);c(q,"mouseout",k);c(l,"mouseover",s);c(l,"mouseout",m);c(l,"click",E)};var w=function(){y=setTimeout(function(){l.style.display="none";f(q,t.activeClass);if(v){t.onCancel()}v=false},A)};var j=function(){q=t.button;l=t.menu;if(!q||!l){throw"node is not defined"}};var r=function(){d(q,"mouseover",u);d(q,"mouseout",k);d(l,"mouseover",s);d(l,"mouseout",m);d(l,"click",E)};var C=function(){};var B=function(){j();r();C()};B();p.hide=w;p.destroy=D;return p}});a.register("core.util.winSize",function(b){return function(d){var c,e;var f;if(d){f=d.document}else{f=document}if(f.compatMode==="CSS1Compat"){c=f.documentElement.clientWidth;e=f.documentElement.clientHeight}else{if(self.innerHeight){if(d){f=d.self}else{f=self}c=f.innerWidth;e=f.innerHeight}else{if(f.documentElement&&f.documentElement.clientHeight){c=f.documentElement.clientWidth;e=f.documentElement.clientHeight}else{if(f.body){c=f.body.clientWidth;e=f.body.clientHeight}}}}return{width:c,height:e}}});a.register("kit.extra.merge",function(b){return function(d,c){var f={};for(var e in d){f[e]=d[e]}for(var e in c){f[e]=c[e]}return f}});a.register("kit.io.ajax",function(b){return function(j){var i,g,f,h,k,c,d;c=function(m){k=false;j.onComplete(m,i.args);setTimeout(l,0)};d=function(m){k=false;j.onFail(m,i.args);setTimeout(l,0)};f=[];h=null;k=false;i=b.parseParam({url:"",method:"get",responseType:"json",timeout:30*1000,onTraning:b.funcEmpty,isEncode:true},j);i.onComplete=c;i.onFail=d;var l=function(){if(!f.length){return}if(k===true){return}k=true;i.args=f.shift();h=b.ajax(i)};var e=function(n){while(f.length){f.shift()}k=false;if(h){try{h.abort()}catch(m){}}h=null};g={};g.request=function(m){if(!m){m={}}if(m&&!m.setting_rid&&window.$CONFIG&&$CONFIG.setting_rid){m.setting_rid=$CONFIG.setting_rid}if(j.noQueue){e()}if(!j.uniqueRequest||!h){f.push(m);m._t=0;l()}};g.abort=e;return g}});a.register("kit.io.jsonp",function(b){return function(e){var d,g,c,i,f;d=b.parseParam({url:"",method:"get",responseType:"json",varkey:"_v",timeout:30*1000,onComplete:b.funcEmpty,onTraning:b.funcEmpty,onFail:b.funcEmpty,isEncode:true},e);c=[];i={};f=false;var h=function(){if(!c.length){return}if(f===true){return}f=true;i.args=c.shift();i.onComplete=function(j){f=false;d.onComplete(j,i.args);setTimeout(h,0)};i.onFail=function(j){f=false;d.onFail(j);setTimeout(h,0)};b.jsonp(b.kit.extra.merge(d,{args:i.args,onComplete:function(j){i.onComplete(j)},onFail:function(j){try{i.onFail(j)}catch(k){}}}))};g={};g.request=function(j){if(!j){j={}}if(j&&!j.setting_rid&&window.$CONFIG&&$CONFIG.setting_rid){j.setting_rid=$CONFIG.setting_rid}c.push(j);j._t=1;h()};g.abort=function(j){while(c.length){c.shift()}f=false;i=null};return g}});a.register("kit.io.jsonp2",function(b){return function(g){var e=b.core.obj.parseParam({url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:null,onTimeout:null,responseName:null,isEncode:false,varkey:"varname"},g);var h=-1;var f=e.responseName||("STK_"+b.core.util.getUniqueKey());e.args[e.varkey]=f;var c=e.onComplete;var d=e.onTimeout;e.onTimeout=function(){if(h!=1&&d!=null){h=2;d()}};e.onComplete=function(){if(h!=2&&c!=null){h=1;c(window[f]);window[f]=undefined}};return b.core.io.scriptLoader(e)}});a.register("kit.io.inter",function(b){return function(){var c,e,d;c={};e={};d={};c.register=function(g,f){if(e[g]!==undefined){throw g+" interface has been registered"}e[g]=f;d[g]={}};c.hookComplete=function(f,h){var g=b.core.util.getUniqueKey();d[f][g]=h;return g};c.removeHook=function(f,g){if(d[f]&&d[f][g]){delete d[f][g]}};c.getTrans=function(h,f){var g=b.kit.extra.merge(e[h],f);g.onComplete=function(j,m){try{f.onComplete(j,m)}catch(l){}if(j&&j.code&&j.code==="100000"){try{f.onSuccess(j,m)}catch(l){}}else{try{f.onError(j,m)}catch(l){}}for(var i in d[h]){try{d[h][i](j,m)}catch(l){}}};if(e[h]["requestMode"]==="jsonp"){return b.kit.io.jsonp(g)}else{if(e[h]["requestMode"]==="ijax"){return b.kit.io.ijax(g)}else{return b.kit.io.ajax(g)}}};c.request=function(i,f,h){var g=b.core.json.merge(e[i],f);if(h&&!h.setting_rid&&window.$CONFIG&&$CONFIG.setting_rid){h.setting_rid=$CONFIG.setting_rid}g.onComplete=function(l,n){try{f.onComplete(l,n)}catch(m){}if(l&&l.code&&l.code==="100000"){try{f.onSuccess(l,n)}catch(m){}}else{try{f.onError(l,n)}catch(m){}}for(var j in d[i]){try{d[i][j](l,n)}catch(m){}}};g=b.core.obj.cut(g,["noqueue"]);g.args=h;if(e[i]["requestMode"]==="jsonp"){return b.jsonp(g)}else{if(e[i]["requestMode"]==="jsonp2"){return b.kit.io.jsonp2(g)}else{if(e[i]["requestMode"]==="ijax"){return b.ijax(g)}else{return b.ajax(g)}}}};return c}});a.register("core.obj.cut",function(b){return function(f,e){var d={};if(!b.core.arr.isArray(e)){throw"core.obj.cut need array as second parameter"}for(var c in f){if(!b.core.arr.inArray(c,e)){d[c]=f[c]}}return d}});a.register("common.trans.userPanel",function(d){var b=d.kit.io.inter();var c=b.register;c("commentInfo",{url:"https://comment5.news.sina.com.cn/user/message?action=read&version=2&type=reply",requestMode:"jsonp"});c("emailInfo",{url:"https://service.mail.sina.com.cn/mailproxy/mailnotice.php",requestMode:"jsonp"});c("weiboInfo",{url:"https://api.weibo.com/2/users/show_brief.json",requestMode:"jsonp"});c("blogInfo",{url:"https://comets.blog.sina.com.cn/notice",requestMode:"jsonp2"});return b});a.register("comp.userpanel.emailmenu",function(c){var b=c.common.trans.userPanel;return function(p){var k={};var o=[true];var l=c.parseParam({tab:null,index:null,userInfo:null,allReadCallback:function(s,r){}},p);var f,i;var n=true,h=true;var d={data:0};var m=function(r){n=r;if(n){i.style.visibility="hidden";l.allReadCallback(n,l.index)}};var g=function(r){if(!h){r&&r(false);return}b.request("emailInfo",{onComplete:function(t){var u=t.data;var s=u;if(t.result&&j(t)){if(t.data>0){i.style.visibility="visible";n=false;l.allReadCallback(n,l.index)}else{i.style.visibility="hidden";n=true;l.allReadCallback(n,l.index)}}else{if(!t.result){h=false}}},onFail:function(){}},{action:"email"})};var j=function(s){var r=false;if(!d){d={};d.data=s.data;r=true}else{if(d.data==s.data){r=false}else{o[0]=false;r=true}d.data=s.data}return r};var e=function(){f=c.kit.dom.parseDOM(c.core.dom.builder(l.tab).list);i=f.new_info_icon};var q=function(){e()};q();k.setRead=m;k.onGetInfo=g;return k}});a.register("comp.userpanel.weibomenu",function(d){var c=d.common.trans.userPanel;var b='<div class="needlogin">还未开通微博<a target"_blank" href="http://weibo.com/signup/signup.php"  class="list-link">立刻开通</a></div>';return function(q){var l={};var p=[true,true,true];var m=d.parseParam({tab:null,index:null,userInfo:null,allReadCallback:function(s){}},q);var e={mention_status:0,dm:0,cmt:0};var g,j;var o=true,i=true;var h=function(s){if(!i){return}c.request("weiboInfo",{onComplete:function(u){var x=u.data;if(u.code==0&&(x.error_code==20003||x.error_code==10013)){i=false}if(u.code==1){var t=x.dm;var v=x.cmt;var w=x.mention_status;if(k(x)){if(w+v+t>0){j.style.visibility="visible";o=false;m.allReadCallback(o,m.index)}else{o=true;n(o)}}}},onFail:function(){throw"error of getting weiboinfo"}},{source:"2835469272"})};var k=function(u){var s=false;if(!e){s=true;e={};e.mention_status=u.mention_status;e.dm=u.dm;e.cmt=u.cmt}else{if(e.mention_status!=u.mention_status&&u.mention_status!=0){p[0]=false}if((e.cmt!=u.cmt)&&u.cmt!=0){p[1]=false}if((e.dm!=u.dm)&&u.dm!=0){p[2]=false}s=true;for(var t=0;t<p.length;t++){s=s&&p[t]}s=!s;e.mention_status=u.mention_status;e.dm=u.dm;e.cmt=u.cmt}return s};var f=function(){g=d.kit.dom.parseDOM(d.core.dom.builder(m.tab).list);j=g.new_info_icon};var r=function(){f()};var n=function(s){o=s;if(o){j.style.visibility="hidden";m.allReadCallback(o,m.index)}};r();l.setRead=n;l.onGetInfo=h;return l}});a.register("comp.userpanel.commentmenu",function(c){var b=c.common.trans.userPanel;return function(o){var j={};var n=[true];var k=c.parseParam({tab:null,index:null,userInfo:null,allReadCallback:function(q){},newComment:function(){}},o);var f,h;var m=false;var d={reply:0};var g=function(q){b.request("commentInfo",{onComplete:function(s){var t=s.result.data;var r=t.reply;if(s.result.status.code==0&&i(t)){k.newComment&&k.newComment(r);if(t.reply>0){h.style.visibility="visible";m=false;k.allReadCallback(false,k.index)}else{h.style.visibility="hidden";m=true;k.allReadCallback(true,k.index)}}},onFail:function(){throw"error of getting comment info"}},{})};var i=function(r){var q=false;if(d.reply==r.reply){q=false}else{n[0]=false;q=true}d.reply=r.reply;return q};var l=function(q){m=q;if(m){h.style.visibility="hidden";k.allReadCallback(true,k.index)}};var e=function(){f=c.kit.dom.parseDOM(c.core.dom.builder(k.tab).list);h=f.new_info_icon};var p=function(){e()};p();j.setRead=l;j.onGetInfo=g;return j}});a.register("comp.userpanel.blogmenu",function(c){var b=c.common.trans.userPanel;return function(l){var g={};var i=c.parseParam({tab:null,index:null,userInfo:null,outLoginLayer:null,allReadCallback:function(n){}},l);var k=true,f=true;var h=i.outLoginLayer.getSinaCookie()&&i.outLoginLayer.getSinaCookie().uid;var e=function(n){b.request("blogInfo",{onComplete:function(o){if(o.code=="A00006"){var p=o.data[h];if(p.unreadnotices>0||p.blogcomment>0){newInfoIcon.style.visibility="visible";k=false;i.allReadCallback(k,i.index)}else{k=true;j(k)}}},onFail:function(){throw"error of getting bloginfo"}},{uid:h})};var d=function(){nodes=c.kit.dom.parseDOM(c.core.dom.builder(i.tab).list);newInfoIcon=nodes.new_info_icon};var m=function(){d()};var j=function(n){k=n;if(k){newInfoIcon.style.visibility="hidden";i.allReadCallback(k,i.index)}};m();g.setRead=j;g.onGetInfo=e;return g}});a.register("comp.userpanel.accountmenu",function(c){var b=c.core.dom.sizzle;return function(l){var m={};var d=4097,k=4098,r=4096;var w,t,A,f,v;var g,j=60000;var s=[];var C={};var o=c.parseParam({button:null,menu:null,loginStatus:null,userInfo:null,outLoginLayer:null,onActive:function(){},onCancel:function(){},newComment:function(){}},l);var u=function(){o.onActive()};var p=function(){o.onCancel()};var n=function(){for(var D=0;D<s.length;D++){s[D].onGetInfo()}g=setInterval(function(){for(var E=0;E<s.length;E++){s[E].onGetInfo()}},j)};var x=function(){if(g){clearInterval(g);g=null}};var i=function(){v=c.comp.userpanel.dropmenu({button:o.button,menu:o.menu,onActive:u,id:1,onCancel:p});s.push(c.comp.userpanel.commentmenu({tab:A[0],userInfo:o.userInfo,index:0,allReadCallback:h,newComment:function(D){o.newComment&&o.newComment(D)}}));s.push(c.comp.userpanel.weibomenu({tab:A[1],index:1,allReadCallback:h}));s.push(c.comp.userpanel.blogmenu({tab:A[2],index:2,outLoginLayer:o.outLoginLayer,allReadCallback:h}));s.push(c.comp.userpanel.emailmenu({tab:A[3],index:3,allReadCallback:h}))};var h=function(G,E){C[E]=G;var D=true;for(var F in C){D=D&&C[F]}if(!D){t.style.visibility="visible"}else{t.style.visibility="hidden"}};var e=function(){if(!o.button||!o.menu){throw" node is not defined"}w=o.menu;var D=c.kit.dom.parseDOM(c.core.dom.builder(o.button).list);t=D.new_info_icon;A=c.core.dom.sizzle("li[action-type=tab_btn]",w);f=o.loginStatus};var z=function(){i();if(o.loginStatus!=r){n()}};var y=function(){e();z()};y();var q=function(){v.hide()};var B=function(){if(s){for(var D=0;D<s.length;D++){s[D].setRead(true)}}t.style.visibility="hidden";x();v.destroy()};m.hide=q;m.destroy=B;return m}});a.register("comp.userpanel.template",function(c){var b={};var e='<#et temp data><#if (data.status != 0x1000 )><div class="ac-login-cnt" node-type="outer"><#if (data.status != 0x1001)><a class="thumb" action-type="login_btn"><img src="${data.url}"></a><#elseif (data.isWeibo)><a class="thumb" href="http://weibo.com/" suda-uatrack="key=index_top&value=head_click" target="_blank"><img src="${data.url}"></a><#else><a class="thumb" href="http://login.sina.com.cn/" suda-uatrack="key=index_top&value=head_click" target="_blank"><img src="${data.url}"></a></#if><span style="display:none" class="log-links"><a    href="javascript:;">登录</a><em class="ac-icon ac-icon-slash"></em><a   target="_blank"   href="https://login.sina.com.cn/signup/signup?entry=homepage">注册</a></span><i class="ac-icon ac-icon-ar"></i><i class="ac-icon ac-icon-message" node-type="new_info_icon" style="visibility:hidden"></i></div><#else><div class="ac-login-cnt" node-type="outer"><a class="ac-login-cnt" node-type="login_btn" href="javascript:;"><span class="thumb"><img src="${data.url}"></span><span class="log-links">登录</span></a></div></#if></#et>';var d='<#et temp data><ul class="ac-dropdown" style="display:none;" node-type="outer"><#list data.links as link><li><a target="_blank" href="${link.url}">${link.title}</a></li></#list><li action-type="tab_btn"><#if (data.status == 0x1001)><a   target="_blank" href="http://my.sina.com.cn/#location=news">我的新浪</a><i class="ac-icon ac-icon-message" node-type="new_info_icon" style="visibility:hidden"></i><#else><a  action-type="login_btn"  href="javascript:;">我的新浪</a><i class="ac-icon ac-icon-message" node-type="new_info_icon" style="visibility:hidden"></i></#if></li><li action-type="tab_btn"><#if (data.status == 0x1001)><a target="_blank"   href="http://weibo.com">我的微博</a><i class="ac-icon ac-icon-message" node-type="new_info_icon" style="visibility:hidden"></i><#else><a  action-type="login_btn" href="javascript:;">我的微博</a><i class="ac-icon ac-icon-message" node-type="new_info_icon" style="visibility:hidden"></i></#if></li><li action-type="tab_btn"><#if (data.status == 0x1001)><a target="_blank"   href="http://i.blog.sina.com.cn">我的博客</a><i class="ac-icon ac-icon-message" node-type="new_info_icon" style="visibility:hidden"></i><#else><a  action-type="login_btn" href="javascript:;">我的博客</a><i class="ac-icon ac-icon-message" node-type="new_info_icon" style="visibility:hidden"></i></#if></li><li action-type="tab_btn"><#if (data.status == 0x1001)><a target="_blank"   href="http://mail.sina.com.cn/">我的邮箱</a><i class="ac-icon ac-icon-message" node-type="new_info_icon" style="visibility:hidden"></i><#else><a  action-type="login_btn" href="javascript:;">我的邮箱</a><i class="ac-icon ac-icon-message" node-type="new_info_icon" style="visibility:hidden"></i></#if></li><li><#if (data.status == 0x1001)><a target="_blank"   href="http://news.sina.com.cn/guide/">我的导航</a><#else><a  action-type="login_btn" href="javascript:;">我的导航</a></#if></li><li><a   target="_blank" suda-uatrack="key=index_top&value=logout"  href="javascript:;" action-type="logout_btn">退出</a></li></ul></#et>';b.portraitTemplate=e;b.accountMenuTemplate=d;return b});a.register("comp.userpanel.loginLayer",function(d){var e=d.core.func.empty;var c=d.core.util.storage;var b=d.core.util.listener;return function(j){var k={},t;var A;var l=null;var m=d.parseParam({node:null,layer_hide:e,login_success:e,login_failure:e,logout_success:e,layer_ready:e,extra:{css:null},pre_login_state:e},j);var r=false;var n=function(I,F){var F=F||false;var E=A.nodes.box;var H=I.l;var G=I.t;css=d.core.dom.cssText(E.style.cssText);css.push("top",G+"px");css.push("left",H+"px");E.style.cssText=css.getCss()};var q=function(G){var G=G||false;l=document.body;if(!G){g(l);var F=d.core.util.winSize();var J=d.core.util.scrollPos();var E=d.core.dom.getSize(w().nodes.box);var I={l:(F.width-E.width)/2,t:J.top+(F.height-E.height)/2};n(I)}else{var H={position:"center",parentNode:null,relatedNode:null};H=d.parseParam(H,{parentNode:l,position:"center",useIframeInIE6:true});A.toggleType="normal";A.set("plugin",H)}};var i=function(E,J,M,P){var P=P||m.node;var I=d.core.dom.position(P);var M=M||"below";var K=d.core.dom.getSize(A.nodes.box);var G=d.core.dom.getSize(J);var N=d.core.dom.getSize(E);var O=d.core.dom.position(E);var L,F;var H;if(M=="below"){L=N.height+(O.t-I.t);F=-1*Math.abs(G.width-N.width)+(O.l-I.l)+128}else{if(M=="right"){L=(O.t-I.t);F=(O.l-I.l)+N.width}else{if(M=="left"){L=(O.t-I.t);F=(O.l-I.l)-K.width}else{if(M=="above"){L=(O.t-I.t)-K.height;F=(O.l-I.l)}}}}H=d.core.dom.cssText(J.style.cssText);H.push("top",L+"px");H.push("left",F+"px");J.style.cssText=H.getCss()};var v=function(){if(A.isLogin()){return false}else{var F=document.activeElement;var G=A.nodes.loginname.value,E=A.nodes.password.value;return !(G||E||(d.contains(A.nodes.box,F)&&F.tagName==="INPUT"))}};var B=function(){A=window.SINA_OUTLOGIN_LAYER;t.style.position="relative";l=t;A=A.set("plugin",{position:"custom"});A.set("extra",{css:m.extra.css});A.set("plugin",{parentNode:t});A.set("styles",{zIndex:999});A.register("layer_hide",function(){if(r){m.layer_hide()}r=false});A.register("login_success",function(){A.getWeiboInfo({onComplete:function(E){if(E&&E.result&&E.result.data){m.login_success(E.result.data)}else{m.login_success(null)}},onSuccess:function(E){},onFailure:function(E){throw"error of getting weiboinfo"}})});A.register("login_failure",function(){m.login_failure()});A.register("logout_success",function(){m.logout_success()});A.register("pre_login_state",function(){A.getPreLoginWeiboData({onComplete:function(E){if(E.code==1){m.pre_login_state(E.data)}else{throw"error of getting weiboinfo"}},onFailure:function(E){throw"error of getting weiboinfo"}})});A.register("layer_ready",function(){i(t,A.nodes.box);m.layer_ready()})};var w=function(){return A};var C=function(){};var g=function(F,E){if(!d.isNode(F)){throw"param elm is invalid"}var E=E||"custom";l=F;A.set("plugin",{parentNode:F,position:E})};var D=function(){if(A.nodes.box.parentNode==l){if(r){return}r=true;b.fire("clearfloat","clear",[3]);A.show()}else{r=true;A.show()}};var s=function(){return A.isLogin()};var h=function(){return A.isPreLoginState};var p=function(){return A.nodes.box};var z=function(){return A.logout()};var y=function(){return A.getSinaCookie()};var o=function(){r=false;A.hide()};var u=function(){return A.isDisplay()};var f=function(){if(!m.node){throw"node is not defined"}t=m.node};var x=function(){f();B()};x();k.setLayerAbsolutePosition=n;k.getOutLoginLayer=w;k.getOuter=p;k.show=D;k.logout=z;k.getSinaCookie=y;k.isLogin=s;k.destroy=C;k.isPreLoginState=h;k.hide=o;k.setCenter=q;k.setParent=g;k.setLayerPosition=i;k.isDisplay=u;return k}});a.register("comp.userpanel.hover",function(f){var d=f.core.evt.addEvent;var b=f.core.dom.contains;var c=f.core.evt.removeEvent;var e=[];return function(m){var o={};var u=100,g,v,t;var k=false;var j;var r=f.parseParam({button:null,content:null,delay:u,type:"1",showCallback:function(){},hideCallback:function(){}},m);var l=function(z){if(k){return}var B=z.target||z.srcElement;for(var A=0;A<e.length;A++){clearTimeout(e[A])}e=[];r.showCallback&&r.showCallback(z)};var x=function(z){if(k){return}var A=z.toElement||z.relatedTarget;if(!f.isNode(A)){return}if(!(A==g||b(g,A))){t=setTimeout(function(){r.hideCallback&&r.hideCallback(z)},u);e.push(t)}};var q=function(z){if(k||j==2){return}for(var A=0;A<e.length;A++){clearTimeout(e[A])}e=[];r.showCallback&&r.showCallback(z)};var s=function(z){j=z};var n=function(z){k=z};var i=function(z){if(k||j==2){return}var A=z.toElement||z.relatedTarget||z.srcElement;if(!f.isNode(A)){return}if(!(A==v||b(v,A))){t=setTimeout(function(){r.hideCallback&&r.hideCallback(z)},u);e.push(t)}};var y=function(){c(g,"mouseover",l);c(g,"mouseout",x);c(v,"mouseover",q);c(v,"mouseout",i)};var h=function(){if(!f.isNode(r.button)||!f.isNode(r.content)){throw"arguments are invalid"}g=r.button;v=r.content};var p=function(){if(navigator.userAgent.indexOf("iPad")==-1){d(g,"mouseover",l);d(g,"mouseout",x);d(v,"mouseover",q);d(v,"mouseout",i)}};var w=function(){h();p();j=r.type};w();o.setType=s;o.setDisabled=n;o.destroy=y;return o}});a.register("comp.userPanelNewVersion",function(O){var F;var i=O.core.evt.addEvent;var n=O.core.util.language;var c=O.kit.dom.appendStyle;var q=O.kit.dom.builder;var N=O.kit.dom.loadStyle;var aa=O.kit.util.makeReady;var k=O.core.util.listener;var L=O.comp.defaultStyle;var D=O.common.channel.plugin;var F=O.core.evt.delegatedEvent;var s=O.core.dom.sizzle;var e=O.comp.userpanel.template;var ag=O.core.dom.addClassName;var al=O.core.dom.contains;var W=O.core.dom.removeClassName;var V,M,g;var Q,H,ai,P;var ak,ab;var U={};var R=false,h=false;var w="//i.sso.sina.com.cn/images/login/pre_loading.gif";var o=[];var B;var r=4097,E=4098,ad=4096;var S,f;var G={outloginlayer:{ready:function(){},loginBtns:null},container:{node:null},extra:{css:null,outlogin:"//news.sina.com.cn/sso/outlogin_layer.js",anotherButton:null},plugin:{portrait:true,links:[]}};var Z={plugin_ready:null,outlogin_ready:null,weibolist_show:null,weibolist_hide:null,new_comment:null};var A=function(ap,an){var am=false;ap=ap.toLowerCase();for(var ao in G){if(ao==ap){am=true;break}}if(!am){throw"arguments are invalid"}an=an||{};var aq=G[ap];G[ap]=O.parseParam(aq,an);return U};var X=function(){K();if(S!=ad){ac()}};var K=function(){var au=window.location.protocol=="https:"?"https:":"http:";var aq=(f.weiboInfo)?f.weiboInfo.profile_image_url.replace(/http:\/\//g,au+"//"):w;var ao=(S!=ad)?aq:"//i.sso.sina.com.cn/images/login/thumb_default.png";if(!G.plugin.portrait){ao="//i.sso.sina.com.cn/images/login/avatar_icon.jpg"}var am=s(".ac-rgst",M)[0];var at={url:ao,status:S,isWeibo:(f.weiboInfo!=null)};var an=O.core.util.easyTemplate(e.portraitTemplate,at).toString();var ar=O.kit.dom.parseDOM(O.core.dom.builder(an).list);var ap=ar.outer;P.innerHTML="";P.appendChild(ap);Q=ar.login_btn;if(S!=ad){ag(P,"ac-logined");am.style.display="none"}else{W(P,"ac-logined");am.style.display=""}z();m()};var ac=function(){var am;if(f.weiboInfo){am=f.weiboInfo;am.uid=am.id}else{am=f.sinaInfo;am.screen_name=am.nick}var at={status:S,userInfo:am,isWeibo:(f.weiboInfo!=null),links:G.plugin.links};var an=O.core.util.easyTemplate(e.accountMenuTemplate,at).toString();var ar=O.kit.dom.parseDOM(O.core.dom.builder(an).list);var ap=ar.outer;var aq=s(".ac-icon",P)[1];var ao=s(".ac-login-cnt",P)[0];P.appendChild(ap);ak=O.comp.userpanel.accountmenu({button:ao,menu:ap,loginStatus:S,userInfo:f,outLoginLayer:B,onActive:function(){ag(ao,"ac-active");Z.weibolist_show&&Z.weibolist_show()},onCancel:function(){W(ao,"ac-active");Z.weibolist_hide&&Z.weibolist_hide()},newComment:function(au){Z.new_comment&&Z.new_comment(au)}});i(ao,"click",function(){if(O.getStyle(ap,"display")!=="none"){W(ao,"ac-active");W(ao,"active");ap.style.display="none"}else{ag(ao,"ac-active");ag(ao,"active");ap.style.display=""}});i(document.body,"touchend",function(av){var au=av.target;if(ao==au||ap==au||al(ao,au)||al(ap,au)){return}W(ao,"ac-active");W(ao,"active");ap.style.display="none"});F=O.core.evt.delegatedEvent(ap);F.add("logout_btn","click",u)};var p=function(an){var am=aa({condition:function(){return R},ready:function(ao){c(L.get());var ap=O.C("div");ap.setAttribute("class","css_check");ap.style.position="absolute";M.appendChild(ap);if(G.extra.css){N(G.extra.css,{timeout:10*1000,styleCheck:function(){if(O.isNode(ap)){var aq=O.getStyle(ap,"width");if(aq==="120px"){return true}}},onLoad:function(){R=true;ao&&ao()},onTimeout:function(){am.reset();throw"css file load error,please confirm the url of your css file"}})}else{R=true;ao&&ao()}}});am.exec(Z.plugin_ready)};var I=function(am){var an=aa({condition:function(){return !!window.SINA_OUTLOGIN_LAYER},ready:function(ao){O.scriptLoader({timeout:10*1000,url:G.extra.outlogin,onComplete:ao,onTimeout:function(){an.reset()}})}});an.exec(am)};var v=function(){B=O.comp.userpanel.loginLayer({node:M,extra:G.extra,layer_ready:function(){p();h=true;Z.outlogin_ready&&Z.outlogin_ready()},login_success:function(am){if(!f){f={}}ag(M,"TAP14-logined");f.weiboInfo=am;d(r);X()},login_failure:function(){W(M,"TAP14-logined");d(ad);X()},logout_success:function(){W(M,"TAP14-logined");S=ad;X()},pre_login_state:function(am){if(!f){f={}}ag(M,"TAP14-logined");f.weiboInfo=am;d(E);X()},layer_hide:function(){if(Q){W(Q,"active")}}});if(G.outloginlayer.ready){G.outloginlayer.ready()}};var m=function(){if(Q){o.push(O.comp.userpanel.hover({button:Q,type:1,content:B.getOuter(),hideCallback:function(){if(Q){W(Q,"active")}B.hide()},showCallback:function(am){var ao=am.target||am.srcElement;if(Q){if(ao==Q||al(Q,ao)){ag(Q,"active");for(var an=0;an<o.length;an++){if(o[an]){o[an].setType(1)}}B.setParent(M);setTimeout(function(){B.setLayerPosition(M,B.getOuter(),"below");k.fire("clearfloat","clear");B.show()},5)}}}}))}if(g){o.push(O.comp.userpanel.hover({button:g,content:B.getOuter(),hideCallback:B.hide,showCallback:function(am){var ao=am.target||am.srcElement;if(S!=r&&ao==g){for(var an=0;an<o.length;an++){if(o[an]){o[an].setType(1)}}B.setParent(g);setTimeout(function(){B.setLayerPosition(g,B.getOuter(),"right",g);B.show()},5)}}}))}};var ah=function(ao){var am=B.isDisplay();if(am){W(Q,"active");B.hide();return}l(3);for(var an=0;an<o.length;an++){if(o[an]){o[an].setType(1)}}ag(Q,"active");B.setParent(M);B.setLayerPosition(M,B.getOuter());B.show()};var u=function(){B.logout();ae()};var d=function(am){if(!f){f={}}S=am;if(S!=ad){f.sinaInfo=B.getSinaCookie()}};var l=function(am){if(!am){return}if(ab&&am!=2){ab.hide()}if(ak&&am!=1){ak.hide()}if(B&&am!=3){B.hide();W(Q,"active")}};var j=function(ao,ap){var am=false;for(var an in Z){if(an==ao){am=true;break}}am=(O.getType(ap)==="function")&&am;if(!am){throw"arguments are invalid"}Z[ao]=ap;return U};var C=function(ao){var am=false;for(var an in Z){if(an==ao){am=true;break}}if(am){Z[ao]=null}};var h=function(){return h};var af=function(ao,an){var an=an||document.body;if(!O.isNode(an)){throw"param parent is invalid"}for(var am=0;am<o.length;am++){if(o[am]){o[am].setType(2)}}B.setParent(an);B.setLayerAbsolutePosition(ao,fixed)};var J=function(ao){var ao=ao||false;var an=document.body;if(!O.isNode(an)){throw"param parent is invalid"}for(var am=0;am<o.length;am++){if(o[am]){o[am].setType(2)}}B.setCenter(ao)};var y=function(){return B.getOutLoginLayer()};var t=function(){M=G.container.node;if(!M){throw"node is not defined"}if(G.extra.anotherButton&&!O.isNode(G.extra.anotherButton)){throw"param 'another button' is invalid"}else{g=G.extra.anotherButton}V=O.kit.dom.parseDOM(q(M).list);H=V.register_btn;ai=V.notification_btn;Q=V.login_btn;P=s(".ac-login",M)[0]};var z=function(){i(Q,"click",ah);var ao=s(".sina15-more");for(var am=0;am<ao.length;am++){i(s(".sina15-more")[am],"touchend",function(){W(Q,"active");B.hide()})}var an=k.list();if(!("loginBtn" in an)){k.register("loginBtn","click",ah)}if(!("logout" in an)){k.register("logout","logout",u)}if(!("clearfloat" in an)){k.register("clearfloat","clear",l)}};var x=function(){I(function(){v()})};var aj=function(){t();z();x()};var T=function(am,ao){if(S!=r){for(var an=0;an<o.length;an++){if(o[an]){o[an].setType(1)}}B.setParent(M);B.setLayerPosition(M,B.getOuter());B.show();ao&&ao()}};var b=function(){return f};var Y=function(){o.push(O.comp.userpanel.hover({button:Q,type:1,content:B.getOuter(),hideCallback:B.hide,showCallback:function(am){var ao=am.target||am.srcElement;if(ao==Q){for(var an=0;an<o.length;an++){if(o[an]){o[an].setType(1)}}B.setParent(M);B.setLayerPosition(M,B.getOuter(),"below");B.show()}}}))};var ae=function(){var ap=s("[node-type=outer]",M);for(var am=0;am<ap.length;am++){var ao=ap[am].parentNode;ao.removeChild(ap[am])}if(ab){ab.destroy()}if(ak){ak.destroy()}B.destroy();var an=k.list();for(var am=o.length-1;am>=0;am--){if(o[am]){o[am].destroy()}o[am]=null}};U.set=A;U.init=aj;U.remove=C;U.getOutLogin=y;U.register=j;U.hasBeenInitialed=h;U.show=T;U.getUserInfo=b;U.setOutLoginMiddle=J;U.setOutLoginLayerPosition=af;return U});(function(c){var b=a.comp.userPanelNewVersion;b.listener=c.common.channel.plugin;b.getVersion=function(){return"1.0.2"};b.STK=a;this.SINA_USER_PANEL=b}).call(this,a)}).call(this);