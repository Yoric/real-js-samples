"use strict";$(function(){var r=$.app.appAssetRoot,o=$.app.itlCountryCode,i={diamonds:$(".diamonds-slider"),slick_page:$(".slider-page"),slick_pop:$(".slider-pop"),window:$(window),panel:$(".panel")};i.diamonds.vegas({slides:[{src:r+"img/vegas/slide1.jpg"},{src:r+"img/vegas/slide2.jpg"},{src:r+"img/vegas/slide3.jpg"}],overlay:!0,preload:!0,animation:"kenburnsUp"}),i.slick_page.slick({infinite:!0,dots:!0,autoplay:!0,autoplaySpeed:4e3,arrows:!0,prevArrow:'<div class="slider-nav-left"><i class="fa fa-angle-left"></i></div>',nextArrow:'<div class="slider-nav-right"><i class="fa fa-angle-right"></i></div>',responsive:[{breakpoint:768,settings:{arrows:!1}}]}),i.slick_pop.slick({infinite:!0,dots:!1,autoplay:!0,autoplaySpeed:4e3,arrows:!0,prevArrow:'<div class="slider-nav-left"><i class="fa fa-angle-left"></i></div>',nextArrow:'<div class="slider-nav-right"><i class="fa fa-angle-right"></i></div>'});var l={$forms:$(".saaForm"),isSent:!1,isValid:function(i){var e=$(i);l.validateFioInput(e),l.validateEmailInput(e),l.validateTelInput(e);var t=e.find("input[type!='hidden']"),n=!0;return t.each(function(i,e){var t=$(e);n=n&&!t.data("isError")}),n},processInputError:function(i,e){var t=i.closest("form"),n=(t.get(0),$(":submit",t),i.data("errorSpan"));e?(i.data("isError",!1),i.removeClass("error"),n.css({visibility:"hidden"})):(i.data("isError",!0),i.addClass("error"),n.css({visibility:"visible"}))},hideInputError:function(i){i.removeClass("error"),i.data("errorSpan").css({visibility:"hidden"})},validateFioInput:function(i){var e=i.find(".fioInput");e.data("isError",!0);var t=e.val();l.processInputError(e,/^[a-zа-я-']{2,20}$/i.test(t))},initFioInput:function(i){var e=$(i).find(".fioInput");if(e.length){var t=e.next("span.error").first();e.data("errorSpan",t),e.data("isError",!0),e.on("blur",function(i){var e=$(i.target).closest("form");l.validateFioInput(e)}),e.on("change keyup",function(i){var e=$(i.target);l.hideInputError(e)})}},validateEmailInput:function(i){var e=i.find(".emailInput"),t=e.val().toLowerCase();e.val(t);l.processInputError(e,/(?!.*\.{2})^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i.test(t))},initEmailInput:function(i){var e=$(i).find(".emailInput");if(e.length){var t=e.next("span.error").first();e.data("errorSpan",t),e.data("isError",!0),e.on("blur",function(i){var e=$(i.target).closest("form");l.validateEmailInput(e)}),e.on("change keyup",function(i){var e=$(i.target);l.hideInputError(e)})}},validateTelInput:function(i){var e=i.find(".telInput"),t=e.data("iti");l.processInputError(e,t.isValidNumber())},initInputPrefixPlugin:function(i){i.on("focus",function(i){var e=$(i.currentTarget),t=e.data("prefix").toString();return""===e.val()&&e.val(t),l.inputPrefixPluginEvent(t.replace("ibacorat",""),e),!1})},inputPrefixPluginEvent:function(o,u){u.on("keydown",function(r){setTimeout(function(){var i=l.inputPrefixPluginPrefixOn(u.val()),e=l.inputPrefixPluginPrefixOn(o),t=e.length,n=i.substring(0,t);if(i.match(new RegExp(e))&&n===e)u.val(l.inputPrefixPluginPrefixOff(i));else if("Control"===r.key||"Backspace"===r.key||"Del"===r.key)u.val(l.inputPrefixPluginPrefixOff(e));else{var a=l.inputPrefixPluginPrefixOff(e)+r.key;u.val(a.replace("undefined",""))}},50)})},inputPrefixPluginPrefixOn:function(t){var n=["+","$","^","*","?"],a=["ibacorat","ibacordolar","ibacorhalis","ibacorkali","ibacortanya"];return $.each(n,function(i,e){t=t.replace(n[i],a[i])}),t},inputPrefixPluginPrefixOff:function(t){var n=["+","$","^","*","?"],a=["ibacorat","ibacordolar","ibacorhalis","ibacorkali","ibacortanya"];return $.each(n,function(i,e){t=t.replace(a[i],n[i])}),t},initTelInputCodePrefix:function(i){var e=i.data("iti").getSelectedCountryData(),t=i.val();e&&""===t&&e.dialCode&&i.val("+".concat(e.dialCode))},initTelInput:function(i){var e=$(i).find(".telInput");if(e.length){var t=e.get(0),n=window.intlTelInput(t,{formatOnDisplay:!0,geoIpLookup:function(t){$.get("https://ipinfo.io",function(){},"jsonp").always(function(i){var e=i&&i.country?i.country:"";t(e)})},initialCountry:o,preferredCountries:["ru","ua","by"],utilsScript:r+"vendor/intl-tel-input/utils.js"});e.data("iti",n),t.addEventListener("countrychange",function(i){l.initTelInputCodePrefix(e)}),l.initTelInputCodePrefix(e);var a=e.closest("div.intl-tel-input").next("span.error").first();e.data("errorSpan",a),e.data("isError",!0),e.on("blur",function(i){var e=$(i.target).closest("form");l.validateTelInput(e)}),e.on("change keyup",function(i){var e=$(i.target);l.hideInputError(e)}),e.on("keydown",function(i){var e=$(i.target);if(104===i.keyCode&&1===e.val().length)return!1;-1!==$.inArray(i.keyCode,[46,8,9,27,13,110,190])||65===i.keyCode&&(!0===i.ctrlKey||!0===i.metaKey)||67===i.keyCode&&(!0===i.ctrlKey||!0===i.metaKey)||88===i.keyCode&&(!0===i.ctrlKey||!0===i.metaKey)||35<=i.keyCode&&i.keyCode<=39||(i.shiftKey||i.keyCode<48||57<i.keyCode)&&(i.keyCode<96||105<i.keyCode)&&i.preventDefault()}),l.initInputPrefixPlugin(e)}},init:function(){l.$forms.find('input[name="timezone"]').val(Intl.DateTimeFormat().resolvedOptions().timeZone),l.$forms.each(function(i,e){l.initFioInput(e),l.initEmailInput(e),l.initTelInput(e)}),l.$forms.on("submit",function(i){i.preventDefault();var e=i.currentTarget,t=$(e),n=$(":submit",t),a=n.find("span"),r=t.serialize();l.isValid(e)&&(l.isSent||$.ajax({method:"POST",url:"/email.php",data:r,beforeSend:function(){a.addClass("ajaxSpinner"),a.data("txt",a.html()),a.html(""),n.prop("disabled",!0),l.isSent=!0},complete:function(){a.removeClass("ajaxSpinner"),a.html(a.data("txt"))}}).done(function(i){window.location.href="/step1"}).fail(function(i,e,t){console.log(i,e,t)}))})}};l.init(),$("#bio_ep").length&&bioEp.init({showOncePerSession:!1,cookieExp:0}),$("nav a, #SlideToVideo").on("click",function(i){i.preventDefault();var e=$(this).attr("href");$("html, body").animate({scrollTop:$(e).offset().top},1e3)}),i.window.width()<=820&&$("#video-bg").detach(),i.panel.on("click tap mouseenter",function(){i.panel.removeClass("tapped"),$(this).addClass("tapped")}),i.panel.on("mouseleave",function(){i.panel.removeClass("tapped")})});