!function(e){e.fest||(e.fest={}),e.fest["ct-promo-popup.xml"]=e.fest["bem/web/web.bundles/ct-promo-popup"]=function(e){"use strict";var t,p,u,_,a,d,v,b,s,c=this,r="",m=[],x=[],n="",k={},i="",h="",l="",g=/[&<>"]/g,o=/[&<>"]/,H={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,wbr:!0},N=[],f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function P(e){s(e+'\nin block "'+l+'" at line: '+h+"\nfile: "+i)}function y(e){return f[e]}function C(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])}function w(e){return e.param=!0,e}function F(e,t,a){if(a)for(var s in t)"function"==typeof t[s]&&t[s].param&&(t[s]=t[s]());return e.call(c,t)}function j(e){if("string"==typeof e){if(o.test(e))return e.replace(g,y)}else if(void 0===e)return"";return e}s="undefined"==typeof __fest_error?"undefined"!=typeof console&&console.error?function(){return Function.prototype.apply.call(console.error,console,arguments)}:function(){}:__fest_error;var A;if(k.element=function(e){var t,a,s,c,r="";try{var m=e.baseParams||e.forParams||e,n=m.attrs||{},i=e.baseClass||e.forClass||"",h=e.elem,l=e.htmlDeep;h&&l&&!h.htmlDeep?h.htmlDeep=l:!h&&l&&(e.html=l),e.href&&(n.href=e.href)}catch(e){P(e.message)}try{"string"!=typeof(b=(n.href?"a":e.tagName)||"div")&&(P("Element name must be a string"),b="div")}catch(e){b="div",P(e.message)}N.push(b),r+="<"+b,r+=' class="';try{p=fest._helpers.classNamesFor(i,m)}catch(e){p="",P(e.message)}r+=p,r+='"';try{t=n||{}}catch(e){_={},P(e.message)}for(a in t){s=t[a];try{p=a}catch(e){p="",P(e.message)}if(""!==p){r+=" "+p+'="';try{r+=j(s)}catch(e){P(e.message+"25")}r+='"'}}try{c=e.attrsNoEscape||{}}catch(e){_={},P(e.message)}for(a in c){s=c[a];try{p=a}catch(e){p="",P(e.message)}if(""!==p){r+=" "+p+'="';try{r+=s}catch(e){P(e.message+"30")}r+='"'}}r+=(b=N[N.length-1])in H?"/>":">";try{u=e.htmlPrepend}catch(e){u=!1,P(e.message)}if(u)try{r+=e.htmlPrepend}catch(e){P(e.message+"36")}try{u=e.html}catch(e){u=!1,P(e.message)}if(u)try{r+=e.html}catch(e){P(e.message+"39")}try{u=e.elem}catch(e){u=!1,P(e.message)}if(u){p="element",v={};try{v=e.elem}catch(e){P(e.message)}(d=k[p])&&(r+=F(d,v,!1))}try{u=e.elems}catch(e){u=!1,P(e.message)}if(u){var g,o,f;try{o=(f=e.elems||[]).length}catch(e){f=[],o=0,P(e.message)}for(g=0;g<o;g++){h=f[g];try{u=h}catch(e){u=!1,P(e.message)}if(u){p="element",v={};try{v=h}catch(e){P(e.message)}(d=k[p])&&(r+=F(d,v,!1))}}}try{u=e.htmlAppend}catch(e){u=!1,P(e.message)}if(u)try{r+=e.htmlAppend}catch(e){P(e.message+"52")}return(b=N[N.length-1])in H||(r+="</"+b+">"),N.pop(),r},k.icon=function(r){var e="";try{var m=r.svg}catch(e){P(e.message)}p="element",v={};try{C(v,r)}catch(e){P(e.message)}try{C(v,fest._helpers.mergeTopParams(r,{mods:m?["svg"]:[],attrs:r.title&&{title:r.title}}))}catch(e){P(e.message)}try{C(v,{tagName:r.tagName||r.tag||"span",baseClass:"icon"})}catch(e){P(e.message)}return v.html=w(function(){var e,t,a,s,c="";try{t=m&&m.name}catch(e){t=!1,P(e.message)}if(t){e="icon__svg_defs",s={};try{s=m}catch(e){P(e.message)}(a=k[e])&&(c+=F(a,s,!1))}try{t=r.icon}catch(e){t=!1,P(e.message)}if(t){e="icon",s={};try{s=r.icon}catch(e){P(e.message)}(a=k[e])&&(c+=F(a,s,!1))}try{t=r.html}catch(e){t=!1,P(e.message)}if(t)try{c+=r.html}catch(e){P(e.message+"35")}return c}),(d=k[p])&&(e+=F(d,v,!0)),e},k.icon__svg_defs=function(a){var e="";p="element",v={};try{C(v,a)}catch(e){P(e.message)}try{C(v,fest._helpers.mergeTopParams(a,{mods:[a.name],attrs:a.viewbox&&{viewbox:a.viewbox}}))}catch(e){P(e.message)}try{C(v,{tagName:"svg",baseClass:"icon__svg"})}catch(e){P(e.message)}return v.html=w(function(){var t,e="";e+='<use xlink:href="';try{t="#icon__svg_"+a.name}catch(e){t="",P(e.message)}return e+=t,e+='"></use>'}),(d=k[p])&&(e+=F(d,v,!0)),e},k.link=function(r){var e="";try{var m,n=r.textParams||{mods:r.textMods||[],mix:r.textMix||[]},i=r.endingParams||{mods:r.endingMods||[],mix:r.endingMix||[]},h=r.icon;h&&(m=h.position||"left",h.mix=h.mix||[],h.mix.push("link__icon"),h.mix.push("margin_"+("left"==m?"right":"left")+"_"+(h.marginSize||5)),r.mods=r.mods||[],r.mods.push("icon")),r.ending&&(n.mix=["margin_right_5"].concat(n.mix||[]))}catch(e){P(e.message)}p="element",v={};try{C(v,r)}catch(e){P(e.message)}try{C(v,{baseClass:"link",tagName:"span"})}catch(e){P(e.message)}return v.html=w(function(){var e,t,a,s,c="";try{t="left"==m}catch(e){t=!1,P(e.message)}if(t){e="icon",s={};try{s=h}catch(e){P(e.message)}(a=k[e])&&(c+=F(a,s,!1))}try{t=r.beginning||r.beginningParams}catch(e){t=!1,P(e.message)}if(t){e="element",s={};try{C(s,{baseClass:"link__beginning",tagName:"span",html:r.beginning})}catch(e){P(e.message)}try{C(s,r.beginningParams)}catch(e){P(e.message)}(a=k[e])&&(c+=F(a,s,!1))}try{t="text"in r}catch(e){t=!1,P(e.message)}if(t){e="element",s={};try{C(s,n)}catch(e){P(e.message)}try{C(s,{baseClass:"link__text",tagName:"span",html:r.text})}catch(e){P(e.message)}(a=k[e])&&(c+=F(a,s,!1))}try{t=r.ending}catch(e){t=!1,P(e.message)}if(t){e="element",s={};try{C(s,i)}catch(e){P(e.message)}try{C(s,{baseClass:"link__ending",tagName:"span",html:r.ending})}catch(e){P(e.message)}(a=k[e])&&(c+=F(a,s,!1))}try{t="right"==m}catch(e){t=!1,P(e.message)}if(t){e="icon",s={};try{s=h}catch(e){P(e.message)}(a=k[e])&&(c+=F(a,s,!1))}return c}),(d=k[p])&&(e+=F(d,v,!0)),e},k.ajax=function(e){var t="";try{u=e.html}catch(e){u=!1,P(e.message)}if(u)try{t+=e.html}catch(e){P(e.message+"5")}return t},k.box__block=function(e){var t="";p="element",v={};try{C(v,e)}catch(e){P(e.message)}try{C(v,{baseClass:"box__block"})}catch(e){P(e.message)}return(d=k[p])&&(t+=F(d,v,!1)),t},k.box=function(r){var e="";try{var m=r.mainParams,n=r.title,i=r.html,h=r.left,l=r.link,g=r.titleAfterHtml}catch(e){P(e.message)}p="element",v={};try{C(v,r)}catch(e){P(e.message)}try{C(v,{baseClass:"box",href:null})}catch(e){P(e.message)}return v.html=w(function(){var e,t,a,s,c="";try{t=r.beforeHtml}catch(e){t=!1,P(e.message)}if(t)try{c+=r.beforeHtml}catch(e){P(e.message+"24")}try{t=n||h||i||m}catch(e){t=!1,P(e.message)}if(t){e="box__block",s={};try{C(s,m)}catch(e){P(e.message)}try{C(s,{mods:["main"].concat(m&&m.mods||[])})}catch(e){P(e.message)}s.html=w(function(){var e,t,a,s,c="";try{t=n}catch(e){t=!1,P(e.message)}if(t){c+='<div class="box__title">';try{t=r.titleBeforeHtml}catch(e){t=!1,P(e.message)}if(t){c+='<span class="box__title-left">';try{c+=r.titleBeforeHtml}catch(e){P(e.message+"43")}c+="</span>"}c+='<div class="box__title-wrapper">',e="element",s={};try{C(s,r.headingParams)}catch(e){P(e.message)}try{C(s,{baseClass:"box__heading",tagName:"span",href:r.href,html:r.title})}catch(e){P(e.message)}(a=k[e])&&(c+=F(a,s,!1));try{t=r.titleHtml}catch(e){t=!1,P(e.message)}if(t)try{c+=r.titleHtml}catch(e){P(e.message+"65")}c+="</div>";try{t=l||g}catch(e){t=!1,P(e.message)}if(t){c+='<span class="box__actions">';try{t=l}catch(e){t=!1,P(e.message)}if(t){e="link",s={};try{s=l}catch(e){P(e.message)}(a=k[e])&&(c+=F(a,s,!1))}try{t=g}catch(e){t=!1,P(e.message)}if(t)try{c+=g}catch(e){P(e.message+"80")}c+="</span>"}c+="</div>"}try{t=h}catch(e){t=!1,P(e.message)}if(t){e="element",s={};try{s={baseClass:"box__content",mods:["left"],html:h}}catch(e){P(e.message)}(a=k[e])&&(c+=F(a,s,!1));try{t=i}catch(e){t=!1,P(e.message)}if(t){c+='<div class="box__content">';try{c+=i}catch(e){P(e.message+"101")}c+="</div>"}}else{try{t=i}catch(e){t=!1,P(e.message)}if(t)try{c+=i}catch(e){P(e.message+"108")}}return c}),(a=k[e])&&(c+=F(a,s,!0))}try{t=r.actionsHtml}catch(e){t=!1,P(e.message)}if(t){e="box__block",s={};try{s={mods:["dark"],html:r.actionsHtml}}catch(e){P(e.message)}(a=k[e])&&(c+=F(a,s,!1))}try{t=r.afterHtml}catch(e){t=!1,P(e.message)}if(t)try{c+=r.afterHtml}catch(e){P(e.message+"128")}return c}),(d=k[p])&&(e+=F(d,v,!0)),e},k.item=function(y){var e="";try{x[0]=j(fest._helpers.classNamesFor("item",y))}catch(e){x[0]="",P(e.message)}e+='<div class="'+x[0]+'"';try{u=y.attrs}catch(e){u=!1,P(e.message)}if(u){var t,a,s;try{s=y.attrs||{}}catch(e){_={},P(e.message)}for(t in s){a=s[t];try{p=t}catch(e){p="",P(e.message)}if(""!==p){e+=" "+p+'="';try{e+=j(a)}catch(e){P(e.message+"7")}e+='"'}}}e+=">";try{u=y.left||y.leftHtml}catch(e){u=!1,P(e.message)}if(u){p="cell",v={};try{C(v,{mods:["left"]})}catch(e){P(e.message)}v.html=w(function(){var t,a,e,s,c="",r=y.left||{};try{a=r}catch(e){a=!1,P(e.message)}if(a){try{var m=r.avatar,n=r.src,i=r.user||{},h=i.email||{},l=r.attrs||{}}catch(e){P(e.message)}try{a=m&&n||m&&i&&h}catch(e){a=!1,P(e.message)}if(a){t="avatar",s={};try{s=r}catch(e){P(e.message)}(e=k[t])&&(c+=F(e,s,!1))}else{try{a=r.icon}catch(e){a=!1,P(e.message)}if(a){t="icon",s={};try{s=r.icon}catch(e){P(e.message)}(e=k[t])&&(c+=F(e,s,!1))}else{try{a=n}catch(e){a=!1,P(e.message)}if(a){try{x[0]=j(n)}catch(e){x[0]="",P(e.message)}var g,o,f;c+='<img src="'+x[0]+'" class="item__pic"';try{f=l||{}}catch(e){P(e.message)}for(g in f){o=f[g];try{t=g}catch(e){t="",P(e.message)}if(""!==t){c+=" "+t+'="';try{c+=j(o)}catch(e){P(e.message+"49")}c+='"'}}c+="/>"}}}}try{a=y.leftHtml}catch(e){a=!1,P(e.message)}if(a)try{c+=y.leftHtml}catch(e){P(e.message+"61")}return c}),(d=k[p])&&(e+=F(d,v,!0))}try{u=y.title||y.text||y.params||y.html||y.topHtml}catch(e){u=!1,P(e.message)}if(u){p="cell",v={};try{C(v,y.contentParams)}catch(e){P(e.message)}v.html=w(function(){var t,a,e,s,c="";try{a=y.topHtml}catch(e){a=!1,P(e.message)}if(a)try{c+=y.topHtml}catch(e){P(e.message+"78")}try{a=y.params}catch(e){a=!1,P(e.message)}if(a){c+='<span class="';try{c+=fest._helpers.classNamesFor("item__params",y.params)}catch(e){P(e.message+"87")}var r,m,n,i;c+='">';try{n=(i=y.params.items||[]).length}catch(e){i=[],n=0,P(e.message)}for(r=0;r<n;r++){m=i[r],t="item__param",s={};try{s=m}catch(e){P(e.message)}(e=k[t])&&(c+=F(e,s,!1))}c+="</span>"}try{a=y.title}catch(e){a=!1,P(e.message)}if(a){try{"string"!=typeof(b=y.href?"a":"span")&&(P("Element name must be a string"),b="div")}catch(e){b="div",P(e.message)}N.push(b),c+="<"+b;try{a=y.href}catch(e){a=!1,P(e.message)}if(a){c+=' href="';try{c+=j(y.href)}catch(e){P(e.message+"106")}c+='"'}c+=' class="';try{c+=j("item__title"+(y.href?" link-holder":""))}catch(e){P(e.message+"112")}var h,l,g;c+='"';try{g=y.titleAttrs||{}}catch(e){P(e.message)}for(h in g){l=g[h];try{t=h}catch(e){t="",P(e.message)}if(""!==t){c+=" "+t+'="';try{c+=j(l)}catch(e){P(e.message+"118")}c+='"'}}c+=(b=N[N.length-1])in H?"/>":">";try{a=y.titleIcon}catch(e){a=!1,P(e.message)}if(a){t="icon",s={};try{s=y.titleIcon}catch(e){P(e.message)}(e=k[t])&&(c+=F(e,s,!1))}try{c+=y.title}catch(e){P(e.message+"131")}(b=N[N.length-1])in H||(c+="</"+b+">"),N.pop();try{a=y.info}catch(e){a=!1,P(e.message)}if(a){c+=' <span class="item__info">';try{c+=y.info}catch(e){P(e.message+"139")}c+="</span>"}}try{a=y.middleHtml}catch(e){a=!1,P(e.message)}if(a)try{c+=y.middleHtml}catch(e){P(e.message+"148")}try{a=y.text}catch(e){a=!1,P(e.message)}if(a){c+='<span class="item__text">';try{c+=y.text}catch(e){P(e.message+"155")}c+="</span>"}try{a=y.html}catch(e){a=!1,P(e.message)}if(a)try{c+=y.html}catch(e){P(e.message+"162")}return c}),(d=k[p])&&(e+=F(d,v,!0))}return e+="</div>"},k.item__param=function(e){var t="";try{"string"!=typeof(b=e.href?"a":"span")&&(P("Element name must be a string"),b="div")}catch(e){b="div",P(e.message)}N.push(b),t+="<"+b;try{u=e.href}catch(e){u=!1,P(e.message)}if(u){t+=' href="';try{t+=j(e.href)}catch(e){P(e.message+"8")}t+='"'}t+=' class="';try{t+=fest._helpers.classNamesFor("item__param",e)}catch(e){P(e.message+"14")}t+='"',t+=(b=N[N.length-1])in H?"/>":">";try{u=e.icon}catch(e){u=!1,P(e.message)}if(u){p="icon",v={};try{v=e.icon}catch(e){P(e.message)}(d=k[p])&&(t+=F(d,v,!1))}try{u=e.text}catch(e){u=!1,P(e.message)}if(u)try{t+=e.text}catch(e){P(e.message+"27")}return(b=N[N.length-1])in H||(t+="</"+b+">"),N.pop(),t},k.avatar=function(e){var t="";try{var a={32:90,45:90},s=e.user,c=e.avatarSize,r=e.src;!r&&s&&(c||(c=90),r=fest._helpers.avatar({email:s.email,name:s.name,domain:s.domain,filin_domain:s.filin_domain,filin_d:s.filin_d,width:c in a?a[c]:180}))}catch(e){P(e.message)}p="element",v={};try{C(v,e)}catch(e){P(e.message)}try{C(v,fest._helpers.mergeTopParams(e,c&&{mods:["size_"+c]},r&&{attrs:{style:"background-image: url('"+r+"');"}}))}catch(e){P(e.message)}try{C(v,{baseClass:"avatar",tagName:"span"})}catch(e){P(e.message)}return(d=k[p])&&(t+=F(d,v,!1)),t},k.cell=function(e){var t="";p="element",v={};try{C(v,e)}catch(e){P(e.message)}try{C(v,{baseClass:"cell",tagName:e.tagName||e.tag||"span"})}catch(e){P(e.message)}return(d=k[p])&&(t+=F(d,v,!1)),t},k["pc-promo-popup"]=function(e){var t="";try{var i=e.data||[],h=e.html,a=e.title||"Главное сейчас",s={"data-close-pxl-url":e.pixel_close};e.bannerId&&(s.name="clb"+e.bannerId)}catch(e){P(e.message)}p="box",v={};try{C(v,{mods:["promo"],mix:["js-promo-popup"],title:a,link:{mods:["pointer"],mix:["js-promo-popup__close"],attrs:s,icon:{mods:["close"]}}})}catch(e){P(e.message)}return v.html=w(function(){var t,e,a,s="";try{t=i.length}catch(e){t=!1,P(e.message)}if(t){var c,r,m,n;try{m=(n=i||[]).length}catch(e){n=[],m=0,P(e.message)}for(c=0;c<m;c++){r=n[c],a={};try{C(a,{mods:["x-small","slot"],left:r.image&&r.image.src&&{src:r.image.src,attrs:{width:129}},contentParams:{mods:["slot"]},title:r.title,href:r.url,text:r.subtitle})}catch(e){P(e.message)}(e=k.item)&&(s+=F(e,a,!1))}}else{try{t=h}catch(e){t=!1,P(e.message)}if(t)try{s+=h}catch(e){P(e.message+"57")}}return s}),(d=k[p])&&(t+=F(d,v,!0)),t},A=e,p="ajax",(v={}).html=w(function(){var e,t,a="";t={};try{t=A}catch(e){P(e.message)}return(e=k["pc-promo-popup"])&&(a+=F(e,t,!1)),a}),m.push(r,{name:p,params:v,cp:!0}),r="",a=m.length){for(_=0;_<a;_++)"string"==typeof(t=m[_])?n+=t:(d=k[t.name])&&(n+=F(d,t.params,t.cp));return n+r}return r}}(Function("return this")());