!function(){"use strict";var PT_VERSION=3,phenomevent,token="phenomclient",breaker={},p_mapData,nativeForEach=Array.prototype.forEach,slice=Array.prototype.slice,PRIMARY_INSTANCE_NAME="phenomevent",windowConsole=window.console,navigator=window.navigator,document=window.document,userAgent=navigator.userAgent,HTTP_PROTOCOL="https:"==document.location.protocol?"https://":"http://",USE_XHR=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,ENQUEUE_REQUESTS=!USE_XHR&&-1==userAgent.indexOf("MSIE")&&-1==userAgent.indexOf("Mozilla"),ISIE9=!!window.XDomainRequest,DEBUG=!1,API_URL="ms-trackingapi.phenompeople.com",DEFAULT_CONFIG={api_host:HTTP_PROTOCOL+API_URL,cookie_name:"Per_UniqueID",login_jsession_cookie_name:"PHPPPE_STID",secure_cookie:!0,cookie_expiration:365,pt_param_type_create:"pt_param",pt_cookie_type_create:"pt_cookie",uid_map_event:"uid_needs_to_map",session_cookie:"JSESSIONID",initial_ref_cookie:"in_ref",campaign_kwords:"utm_source utm_medium utm_campaign utm_content utm_term gclid",in_ref_chng_cookie:"P_REF_CNG",exclusion_domain:["icims.com"]},cookie_ext_list={utm_source:"iisn",utm_campaign:"iisc"},each=function(e,t,r){if(null!=e)if(nativeForEach&&e.forEach===nativeForEach)e.forEach(t,r);else if(e.length===+e.length){for(var o=0,n=e.length;o<n;o++)if(o in e&&t.call(r,e[o],o,e)===breaker)return}else for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t.call(r,e[i],i,e)===breaker)return},getQueryParam=function(e,t){e=decodeURIComponent(e),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":decodeURIComponent(r[1]).replace(/\+/g," ")},includes=function(e,t){return-1!==e.indexOf(t)},isString=function(e){return"[object String]"==Object.prototype.toString.call(e)},extend=function(e){return each(slice.call(arguments,1),function(t){for(var r in t)void 0!==t[r]&&(e[r]=t[r])}),e},strip_empty_properties=function(e){var t={};return each(e,function(e,r){isString(e)&&e.length>0&&(t[r]=e)}),t},uid=(w=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},function(){var e=(screen.height*screen.width).toString(16);return w()+"-"+e+"-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"-"+w()}),w,cookie={get:function(e){for(var t=e+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){for(var n=r[o];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return null},set:function(e,t,r,o){var n="",i="";if(r){var a=new Date;a.setTime(a.getTime()+24*r*60*60*1e3),n="; expires="+a.toGMTString()}o&&"https:"==window.location.protocol&&(i="; secure"),document.cookie=e+"="+t+"; "+n+"; path=/"+i},remove:function(e){cookie.set(e,"",-1,DEFAULT_CONFIG.secure_cookie)}},info={setinitialReferral:function(){cookie.set(DEFAULT_CONFIG.initial_ref_cookie,encodeURIComponent(document.referrer),0,DEFAULT_CONFIG.secure_cookie)},getinitialReferral:function(){var e=decodeURIComponent(cookie.get(DEFAULT_CONFIG.initial_ref_cookie))?decodeURIComponent(cookie.get(DEFAULT_CONFIG.initial_ref_cookie)):"direct";return"null"===e?"direct":e},campaignParams:function(){var e=DEFAULT_CONFIG.campaign_kwords.split(" "),t="",r="",o={};return each(e,function(e){if((t=getQueryParam(document.URL,e)).length)return info.deletecampaignParams(),!1}),each(e,function(e){(t=getQueryParam(document.URL,e)).length&&cookie.set(e,t,0,DEFAULT_CONFIG.secure_cookie),(r=cookie.get(e))&&(o[e]=r)}),o},deletecampaignParams:function(){var e=DEFAULT_CONFIG.campaign_kwords.split(" ");each(e,function(e){cookie.remove(e)})},searchEngine:function(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(e){var t=info.searchEngine(e),r="yahoo"!=t?"q":"p",o={};if(null!==t){o.pt_search_engine=t;var n=getQueryParam(e,r);n.length&&(o.pt_keyword=n)}return o},browser:function(e,t,r){t=t||"";return r||includes(e," OPR/")?includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":includes(e,"IEMobile")||includes(e,"WPDesktop")?"Internet Explorer Mobile":includes(e,"Edge")?"Microsoft Edge":includes(e,"FBIOS")?"Facebook Mobile":includes(e,"Chrome")?"Chrome":includes(e,"CriOS")?"Chrome iOS":includes(t,"Apple")?includes(e,"Mobile")?"Mobile Safari":"Safari":includes(e,"Android")?"Android Mobile":includes(e,"Konqueror")?"Konqueror":includes(e,"Firefox")?"Firefox":includes(e,"MSIE")||includes(e,"Trident/")?"Internet Explorer":includes(e,"Gecko")?"Mozilla":""},browserVersion:function(e,t,r){var o={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/Chrome\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[info.browser(e,t,r)];if(void 0==o)return null;var n=e.match(o);return n?parseFloat(n[n.length-2]):null},os:function(){var e=userAgent;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":""},device:function(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mobile/.test(e)?"Android Mobile":/Android/.test(e)?"Android Tablet":""},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},properties:function(){return extend(strip_empty_properties({os:info.os(),browser:info.browser(userAgent,navigator.vendor,window.opera),referrer:document.referrer,referring_domain:info.referringDomain(document.referrer),uas:userAgent,device:info.device(userAgent)}),{current_url:window.location.href,browser_version:info.browserVersion(userAgent,navigator.vendor,window.opera),screen_height:screen.height,screen_width:screen.width,pt_timestamp:Date(),pt_UTC_timestamp:(new Date).toUTCString(),pt_lib:"web",lib_version:PT_VERSION})},pageviewInfo:function(e){return strip_empty_properties({pt_page:e,pt_referrer:document.referrer,pt_browser:info.browser(userAgent,navigator.vendor,window.opera),pt_platform:info.os()})}},HTTPBuildQuery=function(e,t){var r,o,n=[];return each(e,function(e,t){r=encodeURIComponent(e.toString()),o=encodeURIComponent(t),n[n.length]=o+"="+r}),n.join(t)},PhenomStorage=function(e){this.storage=cookie;var t=getQueryParam(document.URL,"uid");t?this.storage.get(DEFAULT_CONFIG.cookie_name)&&"null"!=cookie.get(DEFAULT_CONFIG.cookie_name)?(p_mapData={trait2:e,new_uid:t,ex_uid:cookie.get(DEFAULT_CONFIG.cookie_name)},info.token=e,phenomevent.track(DEFAULT_CONFIG.uid_map_event,p_mapData)):(info.createType=DEFAULT_CONFIG.pt_param_type_create,this.save(t)):this.storage.get(DEFAULT_CONFIG.cookie_name)&&"null"!=cookie.get(DEFAULT_CONFIG.cookie_name)||(info.createType=DEFAULT_CONFIG.pt_cookie_type_create,this.save(uid()))};PhenomStorage.prototype.save=function(e){this.storage.set(DEFAULT_CONFIG.cookie_name,e,DEFAULT_CONFIG.cookie_expiration,DEFAULT_CONFIG.secure_cookie)};var PhenomTrack=function(){};function init_phenomtrack(){window[PRIMARY_INSTANCE_NAME]=phenomevent=new PhenomTrack}PhenomTrack.prototype.init=function(e,t){this.persistence=this.cookie=new PhenomStorage(e),info.token=e,info.extTrk=t;var r=info.referringDomain(window.location.href),o=info.referringDomain(document.referrer);if(r!=o)if(cookie.get(DEFAULT_CONFIG.in_ref_chng_cookie))cookie.remove(DEFAULT_CONFIG.in_ref_chng_cookie);else{for(var n=!0,i=0;i<DEFAULT_CONFIG.exclusion_domain.length;i++){if(new RegExp(DEFAULT_CONFIG.exclusion_domain[i]).test(o)){n=!1;break}}n&&!info.extTrk&&(info.setinitialReferral(),info.deletecampaignParams())}phenomevent.track_page_view()},PhenomTrack.prototype.gaEvent=function(e){"function"==typeof ga&&(ga("set","&uid",e),ga("set","dimension2",e),ga("send","event","page","view",{UID:e}))},PhenomTrack.prototype.send_request=function(e,t){var r;t=encodeURIComponent(JSON.stringify(t));(r=USE_XHR?new XMLHttpRequest:ISIE9?new XDomainRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("POST",e,!0),ISIE9||r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(t)},PhenomTrack.prototype.track=function(e,t){t=t||{},t=extend({},info.properties(),info.campaignParams(),info.searchInfo(document.referrer),info.pageviewInfo(document.location.href),t);var r={event:e,clientToken:info.token,createType:info.createType,initialReferral:info.getinitialReferral(),uid:cookie.get(DEFAULT_CONFIG.cookie_name),pt_session:getQueryParam(document.URL,"pjid")?getQueryParam(document.URL,"pjid"):cookie.get(DEFAULT_CONFIG.session_cookie),phenomRefnum:getQueryParam(document.URL,"refNum")?getQueryParam(document.URL,"refNum"):info.token,properties:t};cookie.get(DEFAULT_CONFIG.login_jsession_cookie_name)&&(r.PHPPPE_STID=cookie.get(DEFAULT_CONFIG.login_jsession_cookie_name)),this.send_request(DEFAULT_CONFIG.api_host+"/track",r),delete info.createType},PhenomTrack.prototype.track_page_view=function(e){this.gaEvent(cookie.get(DEFAULT_CONFIG.cookie_name)),this.track("pt_page_view")},PhenomTrack.prototype.beacon_track=function(e,t){if(bSend_Data){var r={};r=extend(r,oTrait,t),phenomevent.track(e,r)}},init_phenomtrack();var bSend_Data=!1;window.get_bSendData=function(){return bSend_Data},window.sPlatform="undefined";var essential_traits=["trait2","trait65","trait76","trait79"],oTrait={};window.get_essentialdata=function(){return oTrait};var calculateTrait65=function(){return info.device(userAgent).length>0?"mobile":"desktop"},trait_info={trait2Obj:{"phApp.refNum":"CMS","ccglobal.refNum":"NGCC",tenant_refnum:"CC",external_refnum:"EXT"},CC:{trait76:"pageType",trait79:"langg"},NGCC:{trait79:"ccglobal.language",trait76:"ccglobal.pagetype"},CMS:{trait76:"phApp.pageName",trait79:"phApp.locale"},EXT:{trait76:"ext.pageName",trait79:"ext.locale"},Set_Trait:function(){for(var i in trait_info.trait2Obj)try{if(eval(i)){oTrait.trait2=eval(i),oTrait.trait65=calculateTrait65(),trait_info.GetTraitValueFromGlobalVariable(trait_info.trait2Obj[i]);break}}catch(e){}},GetTraitValueFromGlobalVariable:function(platform){window.sPlatform=platform;var traitObj=trait_info[platform];for(var i in traitObj)try{oTrait[i]=eval(traitObj[i])}catch(e){"CC"===platform&&"langg"==traitObj[i]&&(oTrait[i]="en")}}},check_send_data_status=function(){trait_info.Set_Trait();var e=0;for(var t in essential_traits)if(essential_traits[t]in oTrait){var r=oTrait[essential_traits[t]];"string"==typeof r&&r.length>0&&(e+=1)}e===essential_traits.length&&(bSend_Data=!0)},ctr_controller="https://prodcmscdn.azureedge.net/ctr-impressions/ctr_controller.min.js",no_attempt_load_script=3;function loadScript(e,t){var r=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.src=e,o.onload=t,r.appendChild(o)}var readyStateCheckInterval1=setInterval(function(){info.extTrk?clearInterval(readyStateCheckInterval1):"complete"===document.readyState&&(clearInterval(readyStateCheckInterval1),check_send_data_status(),loadScript(ctr_controller,Impression),addCookieTrk(),pageResponseTimings(),check_PerformanceEntries())},100);function Impression(){}function pageResponseTimings(){try{var e=performance.timing,t={};t.pageLoadTime=e.loadEventEnd-e.navigationStart,t.connectionTime=e.connectEnd-e.connectStart,t.requestTime=e.responseEnd-e.requestStart,t.fetchTime=e.responseEnd-e.fetchStart,phenomevent.beacon_track("PageResponseTimings",t)}catch(e){}}function check_PerformanceEntries(){try{var e=window.performance.getEntriesByType("resource"),t=[];for(var r in Object.keys(e)){var o={};o.name=e[r].name,o.name=o.name.substring(o.name.lastIndexOf("/")+1),o.dur=e[r].duration.toFixed(12),t.push(o)}phenomevent.track("ResourceLoadTimings",t)}catch(e){}}var consoleWarnFunc=console.warn;console.warn=function(){var e={};e.error_message=arguments[0],e.error_severity="Warning",phenomevent.beacon_track("ErrorTrackerWarn",e),consoleWarnFunc.apply(console,arguments)};var consoleErrorFunc=console.error;console.error=function(){var e={};e.error_message=arguments[0],e.error_severity="Error",phenomevent.beacon_track("ErrorTracker",e),consoleErrorFunc.apply(console,arguments)};try{window.onerror=function(e,t,r,o,n,i){var a={};a.error_message=e+n,e.indexOf("Script")>-1&&(a.error_rootcause="Uncaught error in third party resource file",a.error_source="Third party source file"),a.error_source=a.error_source+" at lineNumber "+r+" in "+t,a.file=window.location.toString,a.error_severity="Error",a.error_file=i,phenomevent.track("ErrorTracker",a)}}catch(e){}function addCookieTrk(){try{var e="";for(var t in cookie_ext_list)if(cookie_ext_list.hasOwnProperty(t)){var r=getQueryParam(document.URL,t);r&&(e=e+cookie_ext_list[t]+"="+r+"&")}e&&cookie.set("ext_trk",encodeURIComponent(e.slice(0,-1)),!1,DEFAULT_CONFIG.secure_cookie)}catch(e){}}}();
