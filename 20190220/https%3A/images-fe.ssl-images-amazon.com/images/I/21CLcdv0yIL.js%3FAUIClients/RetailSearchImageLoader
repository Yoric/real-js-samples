(function(w){var u=window.AmazonUIPageJS||window.P,l=u._namespace||u.attributeErrors,a=l?l("RetailSearchImageLoader",""):u;a.guardFatal?a.guardFatal(w)(a,window):a.execute(function(){w(a,window)})})(function(w,u,l){(function(a){a.P&&a.P.now().register("search-image-loader",function(){function u(a,b,e,k){var h=[];a&&h.push([a,(b||1).toString()]);for(a=null;null!==(a=B.exec(e||""));)3<=a.length&&h.push([a[1],a[2]]);e=[];a=[];for(b=0;b<h.length;++b){var g=h[b],l=g[0],g=g[1];if(0>a.indexOf(g)){var p=
parseFloat(g);w(p)&&(a.push(g),e.push([l,p]))}}e.sort(function(a,b){return a[1]-b[1]});for(b=0;b<e.length;++b)if(g=e[b],g[1]>=k||b===e.length-1)return g;return null}function w(a){return!!(a&&isFinite(a)&&0<a&&10>=a)}function l(x,b){function e(){var q=[];if("none"!==z)return q;z="loading";if(!x||!x.length)return p(),q;for(q=0;q<x.length;++q){var d=x[q];if(d&&!d.srcset&&!d.hasAttribute("data-search-image-status")){var c,f=d,b=y;c={sourceDensity:null,url:null,density:null,markers:(f.getAttribute("data-csm-markers")||
"").match(F)||[]};var e=f.getAttribute("data-search-image-source"),g=f.getAttribute("data-search-image-source-density");if(f.src&&(e=f.src,c.sourceDensity=1,g)){var h=parseFloat(g);w(h)&&(c.sourceDensity=h)}f=f.srcset||f.getAttribute("data-search-image-source-set");if(b=u(e,g,f,b))c.url=b[0],c.density=b[1];if(c.url&&c.url!==d.src&&c.url!==d.currentSrc&&!(c.sourceDesnsity&&c.density<=c.sourceDensity)){c.element=d;d.setAttribute("data-search-image-status","loading");for(d=0;d<c.markers.length;++d)b=
c.markers[d],A[b]=(A[b]||0)+1;m.push(c)}}}q=m.slice();m.length?(C=m.length,r&&a.ue&&"function"===typeof a.ue.count&&a.ue.count(r+":image_count",C||0),k()):p();return q}function k(){for(;m.length&&t.length<B;)h(m.shift())}function h(a){var d=a.element,c=new Image;c.onload=function(){d.src=a.url;for(var c=0;c<a.markers.length;++c){var b=a.markers[c];b in A&&0===--A[b]&&v(b)}n(a,"load")};c.onerror=function(){n(a,"error")};c.onabort=function(){n(a,"abort")};a.image=c;t.push(a);if(d.tagName&&"div"===d.tagName.toLowerCase()&&
d.parentNode){var b=d;g(d,c);a.element=d=c;c.src=a.url;b.parentNode.replaceChild(d,b)}else c.src=a.url}function g(a,b){for(var c=0;c<a.attributes.length;++c){var f=a.attributes[c];if(f&&"string"===typeof f.name&&"string"===typeof f.value&&("id"===f.name||"class"===f.name||0===f.name.indexOf("data-")||0===f.name.indexOf("aria-"))){var e=f.value;if("class"===f.name&&e&&(e=e.replace("data-search-image-stub","").replace(G,"").replace(H," "),!e))continue;b.setAttribute(f.name,e)}}for(c=0;c<E.length;++c)f=
E[c],e=a.getAttribute("data-search-image-"+f),"string"===typeof e&&b.setAttribute(f,e)}function n(b,d){b.image&&(b.image.onload=b.image.onerror=b.image.onabort=null);b.element.setAttribute("data-search-image-status","done");for(var c=0;c<t.length;++c)if(t[c]===b){t.splice(c,1);break}r&&a.ue&&"function"===typeof a.ue.count&&a.ue.count(r+":"+d,(a.ue.count(d)||0)+1);++D===C?(v("be"),p()):k()}function p(){if("done"!==z){z="done";for(var b=0;b<t.length;++b){var d=t[b].element;d.onload=d.onerror=d.onabort=
null;d.removeAttribute("data-search-image-status");d.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}t=[];for(b=0;b<m.length;++b)m[b].element.removeAttribute("data-search-image-status");m=[];r&&"function"===typeof a.uex&&a.uex("ld",r,{wb:1})}}function v(b){r&&"function"===typeof a.uet&&a.uet(b,r,{wb:1})}b||(b={});var z="none",y=a.devicePixelRatio||(a.screen&&a.screen.systemXDPI&&a.screen.logicalXDPI&&0<a.screen.logicalXDPI?a.screen.systemXDPI/a.screen.logicalXDPI:
1),C=0,m=[],B=b.maxRequests||4,t=[],D=0,r=b.scope,A={};try{v("bb"),e()}catch(I){throw p(),I;}return{close:p}}function v(){if(a.document.querySelectorAll&&!n){var x=a.document.querySelectorAll("img[data-search-image-load]"),b={};0===D++&&y&&(b.scope=y.scope);n=l(x,b)}}var D=0,n=null,y=null,y={scope:"s_dimge"},E="width height alt usemap title role class".split(" "),F=/[^, ]+/g,B=/ *([^ ]+) +([^x, ]+)x *(?:,|$)/g,G=/^ +| +$/g,H=/ +/g;(function(){a.P.when("cf").execute(function(){v()});a.P.when("jQuery").execute(function(a){a(document).bind("before-searchajax searchAjaxTransition",
function(){n&&(n.close(),n=null)});a(document).bind("searchajax searchAjaxTransitionCompleted",function(){v()})})})();return{load:l,loadChildren:function(a){for(var b=[],e=0;e<a.length;++e){var k=a[e];if(k&&k.querySelectorAll)for(var k=k.querySelectorAll("[data-search-image-load]"),h=0;h<k.length;++h)b.push(k[h])}l(b)},loadSearchImages:v}})})(u)});