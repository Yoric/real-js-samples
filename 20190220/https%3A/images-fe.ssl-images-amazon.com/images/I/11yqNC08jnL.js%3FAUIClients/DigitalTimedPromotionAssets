(function(b){var g=window.AmazonUIPageJS||window.P,h=g._namespace||g.attributeErrors,a=h?h("DigitalTimedPromotionAssets",""):g;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,g,h){b.when("A","DTPApiClient").register("TimedPromotion",function(a,b){function e(a){a=a||0;return(Date.now()/1E3|0)-a}function c(d,c,f,b,l,n,p){d=f-e(d);0>d?(a.$(l).html(k(0)),a.$(n).width("0%"),p(b),clearInterval(l.timerInterval)):(a.$(l).html(k(d)),c=d/c*100,a.$(n).width(c+"%"))}function k(a){var c=
Math.floor(a/3600),f=Math.floor(a/60)-60*c;a=Math.floor(a-3600*c-60*f);f=(10>f?"0"+f:f)+":"+(10>a?"0"+a:a);0!==c&&(f=(10>c?"0"+c:c)+":"+f);return f}return{startTimer:function(d,k){a.$(".msw-timed-bnx-hourglass").appendTo(".msw-timed-promo-progress-bar");a.$(".msw-timed-bnx-hourglass").show();if(d.length){var f=e();b.get("/kindle-dbs/manga-store-api/ajax/getNowSeconds").then(function(b){var e=f-b.nowSeconds;d.each(function(f,b){var d=a.$(b).find(".msw-timed-promo-timer")[0],m=d.dataset.promotiondurationseconds,
g=d.dataset.endtimeseconds,d=a.$(d).find(".msw-timed-promo-countdown")[0],h=a.$(b).find(".msw-timed-promo-progress-bar .a-meter-bar")[0];d.timerInterval=setInterval(c,1E3,e,m,g,b,d,h,k);c(e,m,g,b,d,h,k)})})}}}});"use strict";b.when("A","TimedPromotion","ready").execute("SingleAsinPromo",function(a,b){var e=a.$(".msw-timed-promo");b.startTimer(e,function(c){a.$(c).addClass("msw-timed-promo-fade-out-transition");setTimeout(function(){a.$(c).remove()},400)});e.each(function(c,b){a.$(b).find(".msw-timed-promo-book-desc.expand, .msw-timed-promo-book-desc.collapse").click(function(c){c.preventDefault();
a.$(b).find(".msw-timed-promo-book-desc").toggle()})})});"use strict";b.when("A","TimedPromotion","ready").execute("BnxPromo",function(a,b){var e=a.$(".msw-timed-bnx-promo");b.startTimer(e,function(c){a.$(c).find(".msw-timed-promo-unexpired-state").hide();a.$(c).find(".msw-timed-promo-expired-state").show();a.$(c).find(".msw-timed-promo-buy-button .a-button").addClass("msw-batch-bifrost-button-disabled");a.$(c).find(".msw-timed-promo-buy-button .a-button input").prop("disabled",!0)})});"use strict";
b.when("A","3p-promise","ready").register("DTPApiClient",function(a,b){function e(c,e,d){var g=d||{};return new b(function(b,d){var h=a.extend({dataType:"json",method:c,success:function(a){b(a)},error:function(a,b,c){d(c)}},g);a.ajax(e,h)})}return{get:function(a,b,d){return e("get",a,{params:b})}}})});