/*! v0.3.48 built Thu Apr 18 2019 13:20:12 GMT+0300 (MSK) */
!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};e[n].call(i.exports,i,i.exports,t);i.l=!0;return i.exports}var r={};t.m=e;t.c=r;t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})};t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};t.d(r,"a",r);return r};t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.p="";t(t.s=617)}({10:function(e,t,r){"use strict";t.a={preview:1400,videoContainer:500,overlayContainer:1500,spinner:1450,playerLogo:3e3,editorButtons:3e3,swipeForward:3e3,blick:4e3,subtitles:1e3,play:1475,volume:1475,progress:1475,mobileTouchProgress:1500,copyright:7500,fullScreen:1475,settings:1475,mobilePanel:3050,videoMode:1475,splashControls:1250,unpublishedLabel:1500,timelineSprite:1475,emptySlot:7500,task:7500,recommendationPreview:4e3,contextMenu:9e3,advert:1e4,flyPlayer:2147483547}},100:function(e,t){e.exports='<svg width="100%" height="100%" viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:1.41421;">\n    <g id="svg_1" transform="matrix(0.5,-2.31112e-34,0,0.5,-1,-1)">\n        <circle cx="32" cy="32" r="28" style="fill-opacity:0.501961;stroke:white;stroke-width:3px;"/>\n    </g>\n</svg>\n'},13:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=r(3),o={NONE:0,ERROR:1,WARN:2,LOG:3,TRACK:4,DEBUG:5,TRACE:6},a=/[?&]vq_debug\b(?:=(\d+))?/.exec(window.location.search),s=(a&&Math.max(o.NONE,Math.min(o.TRACE,a[1]||o.LOG)),function(){function e(){n(this,e);this._logs=[];this._logsTime={}}e.prototype.error=function(e){this._send(o.ERROR,e,"color: red; font-weight: bold")};e.prototype.warn=function(e){this._send(o.WARN,e,"color: red")};e.prototype.log=function(e){this._send(o.LOG,e,"")};e.prototype.track=function(e){this._send(o.TRACK,e,"color: darkblue")};e.prototype.debug=function(e){this._send(o.DEBUG,e,"color: darkgray")};e.prototype.trace=function(e){this._send(o.TRACE,e,"color: lightgray")};e.prototype.time=function(e){this._logsTime[e]=+new Date;this.log(""+e)};e.prototype._send=function(e,t,r){var n="VIQEO_LOG|%c["+(new Date).toISOString().slice(11,-1)+"] "+t;this._logs.push(n)};e.prototype.timeEnd=function(e){var t=this._logsTime[e];if(t){this.log(e+". Timer ended: "+(+new Date-t)/1e3+"sec")}else this.error("logger.timeEnd("+e+") Not found: "+e)};e.prototype.getLogs=function(){return this._logs};e.prototype.copy=function(){var e={logs:this._logs,playersState:[]},t=window.VIQEO;if(t){t.getPlayers().forEach(function(t){return e.playersState.push(t.store.getState())})}Object(i.f)(JSON.stringify(e));console.info("Лог скопировался")};return e}());window.vqLogger=window.vqLogger?window.vqLogger:new s;t.a=window.vqLogger},143:function(e,t){e.exports=function(e,t,r,n){function i(){function i(){a=Number(new Date);r.apply(c,u)}function s(){o=void 0}var c=this,l=Number(new Date)-a,u=arguments;n&&!o&&i();o&&clearTimeout(o);void 0===n&&l>e?i():!0!==t&&(o=setTimeout(n?s:i,void 0===n?e-l:e))}var o,a=0;if("boolean"!=typeof t){n=r;r=t;t=void 0}return i}},145:function(e,t,r){"use strict";t.a={BigPlay:"bigPlayButton"}},2:function(e,t,r){"use strict";r.d(t,"e",function(){return i});r.d(t,"n",function(){return o});r.d(t,"r",function(){return a});r.d(t,"p",function(){return s});r.d(t,"d",function(){return c});r.d(t,"c",function(){return l});r.d(t,"a",function(){return p});r.d(t,"b",function(){return h});r.d(t,"m",function(){return y});r.d(t,"l",function(){return v});r.d(t,"f",function(){return b});r.d(t,"i",function(){return g});r.d(t,"g",function(){return m});r.d(t,"k",function(){return _});r.d(t,"t",function(){return w});r.d(t,"j",function(){return O});r.d(t,"s",function(){return k});r.d(t,"h",function(){return T});r.d(t,"u",function(){return E});r.d(t,"q",function(){return S});r.d(t,"o",function(){return j});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){e.preventDefault();e.stopPropagation()},o=function(e,t){return e&&("object"===(void 0===e?"undefined":n(e))||"function"==typeof e)&&"string"==typeof e.innerHTML&&(!t||t.toUpperCase()===e.tagName)},a=function(e){e&&e.parentNode&&e.parentNode.removeChild(e);return null},s=function(e){return new Promise(function(t,r){var n=e.play();n?n.then(t,r):e.paused?r({message:"play() not returned promise and video paused"}):t()})},c=function(e,t){var r=[].concat(e);Object.keys(t).forEach(function(e){var n=t[e];void 0!==n&&r.forEach(function(t){t.style[e]=n})});return e},l=function(e,t,r,i,o){var a=document.createElement(t);switch(void 0===r?"undefined":n(r)){case"object":c(a,r);break;case"string":a.className=r}a.innerHTML=i||"";a.addEventListener("click",o);return e.appendChild(a)},u=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})},d=function(e,t){var r=e.ownerDocument.createElement("style");r.type="text/css";r.styleSheet?r.styleSheet.cssText=t:r.appendChild(e.ownerDocument.createTextNode(t));e.appendChild(r)},p=function(e,t){var r=[];Object.keys(t).forEach(function(e){var n=t[e],i=[];Object.keys(n).forEach(function(e){var t=n[e],r=u(e);i.push(r+":"+t)});var o=e+"{"+i.join("")+"}";r.push(o)});var n=r.join("");d(e,n)},f=[],h=function(e,t,r){var n=f.find(function(t){return t.el===e});if(!n||!n.names.find(function(e){return e===t})){var i="@keyframes "+t,o=[];r.forEach(function(e){var t=e.css,r=e.percent,n=[];Object.keys(t).forEach(function(e){var r=t[e],i=u(e);n.push(i+":"+r+";")});var i=n.join(" ");o.push(r+" {"+i+"}")});d(e,i+" {"+o.join("")+"}");n?n.names.push(t):f.push({el:e,names:[t]})}},y=function(e){var t=e;"NOINDEX"===e.tagName&&e.parentElement&&(t=e.parentElement);var r=t,n=r.clientWidth,i=getComputedStyle(t),o=i.paddingLeft,a=i.paddingRight;return n-parseFloat(o)-parseFloat(a)},v=function(e){var t=e;"NOINDEX"===e.tagName&&e.parentElement&&(t=e.parentElement);var r=t,n=r.clientHeight,i=getComputedStyle(t),o=i.paddingTop,a=i.paddingBottom;return n-parseFloat(o)-parseFloat(a)},b=function(e,t){var r=e.contentWindow["on"+t];e.contentWindow["on"+t]=function(n){r&&r(n);var i=document.createEvent("MouseEvents"),o=e.getBoundingClientRect();i.initMouseEvent(""+t,!0,!1,window,n.detail,n.screenX,n.screenY,n.clientX+o.left,n.clientY+o.top,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,null);e.dispatchEvent(i)}},g=function(e){var t=e.getBoundingClientRect(),r=document.body,n=document.documentElement,i=window.pageXOffset||n.scrollLeft||r.scrollLeft,o=n.clientLeft||r.clientLeft||0;return Math.round(t.left+i-o)},m=function(e){var t=document.createElement("textarea");t.innerHTML=e;return t.value},_=function(e){e.style.display&&"block"!==e.style.display||c(e,{display:"none"})},w=function(e){e.style.display&&"none"!==e.style.display||c(e,{display:"block"})},P=function(e){var t=window,r=e,n=document.documentElement,i=t.offsetHeight||window.innerHeight,o=!isNaN(t.scrollTop)&&t.scrollTop||(window.pageYOffset||n.scrollTop)-(n.clientTop||0);return{viewportHeight:i,viewportTop:o,viewportBottom:o+i,moduleTop:r.getBoundingClientRect().top}},O=function(e){var t=e.offsetHeight,r=parseInt(t,10),n=P(e),i=n.viewportTop,o=n.viewportBottom,a=n.moduleTop,s=Math.max(i,i+a),c=Math.min(o,s+a+r),l=Math.max(0,Math.min(r,c-s));return r&&l/r},k=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window,function(e,t,r){var n="";if(r){var i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3);n="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+n+"; path=/"}),T=function(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n+=1){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},E=function(e){var t=l(e,"div",{height:0,width:"100%",paddingBottom:"100%",position:"relative"});return l(t,"div",{position:"absolute",top:0,left:0,right:0,bottom:0})},S=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,n=void 0;e.addEventListener("touchend",function(t){n&&clearTimeout(n);if(e.classList.contains("touched")){e.classList.remove("touched");i(t)}},!0);e.addEventListener("touchmove",function(){n&&clearTimeout(n)});e.addEventListener("touchstart",function(i){e.classList.remove("touched");n=setTimeout(function(){e.classList.add("touched");t(i)},r)})},j=function(e){return"probably"===document.createElement("video").canPlayType(e)}},23:function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},25:function(e,t,r){"use strict";t.a={STARTED:"started",ENDED:"ended",PAUSED:"paused",REPLAYED:"replayed",PLAYED:"played"}},28:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.a=function(){function e(t){n(this,e);this.viqeo=t;this._functionSubscibes=[];this._eventsList=[]}e.prototype.subscribeTracking=function(e,t){this._functionSubscibes.push(e);this.viqeo.subscribeTracking(e,t)};e.prototype.addEvent=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._eventsList.push({el:e,name:t,callback:r});e.addEventListener(t,r,n)};e.prototype.destroy=function(){var e=this;this._functionSubscibes.forEach(function(t){return e.viqeo.unsubscribeTracking(t)});this._eventsList.forEach(function(e){e.el.removeEventListener(e.name,e.callback)})};return e}()},3:function(e,t,r){"use strict";r.d(t,"p",function(){return l});r.d(t,"v",function(){return u});r.d(t,"d",function(){return d});r.d(t,"u",function(){return p});r.d(t,"b",function(){return f});r.d(t,"A",function(){return h});r.d(t,"r",function(){return y});r.d(t,"x",function(){return v});r.d(t,"C",function(){return b});r.d(t,"t",function(){return g});r.d(t,"i",function(){return m});r.d(t,"y",function(){return _});r.d(t,"D",function(){return w});r.d(t,"g",function(){return P});r.d(t,"a",function(){return O});r.d(t,"c",function(){return k});r.d(t,"e",function(){return T});r.d(t,"n",function(){return E});r.d(t,"B",function(){return j});r.d(t,"m",function(){return x});r.d(t,"k",function(){return A});r.d(t,"h",function(){return I});r.d(t,"f",function(){return L});r.d(t,"q",function(){return N});r.d(t,"s",function(){return C});r.d(t,"j",function(){return D});r.d(t,"z",function(){return q});r.d(t,"l",function(){return R});r.d(t,"o",function(){return U});r.d(t,"w",function(){return M});var n=r(36),i=(r(2),r(5)),o=r(13),a=r(46),s=r.n(a),c=this,l=("function"==typeof Symbol&&Symbol,function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.document;if(e){o.a.time("utils.loadScript("+e+")");var i=n.getElementsByTagName("head")[0],a=n.createElement("script");a.src=e;a.type="text/javascript";a.charset="UTF-8";a.addEventListener("load",function(){o.a.timeEnd("utils.loadScript("+e+")");t&&t()});a.addEventListener("error",function(){o.a.error("utils.loadScript("+e+") Failed load");r&&r()});i.appendChild(a)}}),u=function(e,t){if(e){var r=new Image;r.src=e;t&&(r.onerror=t)}},d=function(e){return JSON.parse(JSON.stringify(e))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("?")[1]||"",r=t?t.split("&"):[];return Object.keys(r).reduce(function(e,t){var n=r[t],i=n.split("="),o=i[0]&&decodeURIComponent(i[0]),a=i[1]&&decodeURIComponent(i[1]);e[o]=a&&a.replace(/\+/g," ");return e},{})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];Object.keys(t).forEach(function(e){var n=t[e],i=[encodeURIComponent(e)];if(Array.isArray(n)){var o=encodeURIComponent("[]");n.forEach(function(e){var t=encodeURIComponent(e);r.push(""+i+o+"="+t)})}else{null!==n&&void 0!==n&&i.push(encodeURIComponent(n));r.push(i.join("="))}});var n=e.indexOf("?")>-1?"&":"?";return r.length?e+n+r.join("&"):e},h=function(e){return"//"===e.substring(0,2)?document.location.protocol+e:"/"===e.substring(0,1)?document.location.protocol+"//"+document.location.hostname+e:e},y=function(e){if(e)if(i.c){var t=document.createElement("a");t.setAttribute("href",e);t.setAttribute("target","_blank");var r=document.createEvent("HTMLEvents");r.initEvent("click",!0,!0);t.dispatchEvent(r)}else window.open(e,"_blank");else o.a.warn("utils.openUrl("+e+") invalid url")},v=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"GET",o=arguments[5],a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(!e)return null;var s=window.XDomainRequest?window.XDomainRequest:XMLHttpRequest,l=new s;n&&l.overrideMimeType&&l.overrideMimeType(n);t&&(l.onload=t.bind(c,l));r&&(l.onerror=r.bind(c,l));l.open(i,e,!0);l.withCredentials=a;var u=null;if(o){l.setRequestHeader("Content-type","application/json");u=JSON.stringify(o)}l.send(u);return l},b=function(e,t,r,n,i){var o=new XMLHttpRequest;o.withCredentials=!0;r&&o.addEventListener("load",r.bind(c,o));n&&o.addEventListener("error",n.bind(c,o));i&&o.upload.addEventListener("progress",i);o.open("POST",e,!0);o.send(t);return o},g=function(e){if("0"===e)return null;var t=/^\s*(?:(?:(\d+):)?(\d+):)?(\d+)(?:[.,](\d+))?\s*$/.exec(e);return t?(60*(+t[1]||0)*60*1e3+60*(+t[2]||0)*1e3+1e3*(+t[3]||0)+(+t[4]||0))/1e3:null},m=function(e){try{return JSON.parse(localStorage.getItem(e))||!1}catch(e){return!1}},_=function(e,t){try{return localStorage.setItem(e,t)}catch(e){return!1}},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=Math.abs(parseFloat(e)),n=t-String(e).length+1;return""+new Array(n).join("0")+r},P=function(e){return[e.getFullYear(),w(e.getMonth()+1),w(e.getDate())].join("-")},O=function(e){var t=performance.now(),r=function r(n){var i=(n-t)/e.duration;i>1&&(i=1);var o=e.timing(i);e.draw(o);i<1&&requestAnimationFrame(r)};requestAnimationFrame(r)},k=function(e,t,r,n,i){var o=Math.min;"crop"===i&&(o=Math.max);var a=o(r/e,n/t);return{width:e*a,height:t*a}},T=function(e){var t=Math.floor(e/60),r=e-60*t;return[w(t),w(r)].join(":")},E=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t="",r=0;r<e;r+=1)t+=Math.random().toString(16).slice(-4);return t},S=function(e){var t=Math.round(1e3*e)-1e3*Math.floor(e),r=w(parseInt(Math.floor(e)%60,10)),n=w(parseInt(Math.floor(e)/60%60,10));return w(parseInt(Math.floor(e)/60/60%60,10))+":"+n+":"+r+"."+t},j=function(e){return e.parsedSubtitles.map(function(e,t){return t+1+"\n"+S(e.startTime)+" --\x3e "+S(e.endTime)+"\n"+e.text+"\n"}).join("\n")},x=function(e){var t=e.video,r=e.preview,i=e.subtitles,o=e.preset,a=e.editing,s=t.selectedVideoFile,c=t.prodVideoFile,l=t.prodDisableAdvert,u=t.selectedDisableAdvert,d=r.selectedPreviewFile,p=r.prodPreviewFile,f=i.selectedSubtitle,h=i.prodSubtitle,y=i.selectedSubtitlePreset,v=i.prodSelectedSubtitlePreset,b=i.selectedStyles,g=i.prodStyles,m=i.subtitlesList,_=i.prodSubtitlesList,w=a.appliedEffects,P=a.selectAppliedEffects,O=o.selectedItem,k=o.prodItem,T=o.prodSettings,E=o.currentSettings,S=[];l!==u&&S.push({type:"videoAdvert",selected:u,prod:l});s!==c&&S.push({type:"video",selected:s,prod:c});d!==p&&S.push({type:"preview",selected:d,prod:p});f.id!==h.id&&S.push({type:"subtitle",selected:f,prod:h});var j=Object(n.a)(m,_);if(j){var x=j[0].path[0];S.push({type:"subtitlesList",selected:m[x],prod:_[x]})}y!==v?S.push({type:"preset_subtitle",selected:{id:y}}):Object(n.a)(g,b)&&S.push({type:"subtitle_styles",selected:b});O&&O.id&&O.id!==k.id?S.push({type:"preset",selected:O}):Object(n.a)(T,E)&&S.push({type:"edit_preset",selected:E});Object(n.a)(w,P)&&S.push({type:"filters",selected:P,item:s});return S},A=function(e){var t=0;e&&e.cut&&(t=e.cut.from/1e3);return t},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=String(e).split("."),n=r[0],i=r[1];i&&i.length>t&&(i=i.slice(0,t));return parseFloat(n+"."+i)},L=function(e){var t=document.createElement("textarea");t.style.position="fixed";t.style.top=0;t.style.left=0;t.style.width="2em";t.style.height="2em";t.style.padding=0;t.style.border="none";t.style.outline="none";t.style.boxShadow="none";t.style.background="transparent";t.value=e;document.body.appendChild(t);t.select();try{document.execCommand("copy")}catch(e){}document.body.removeChild(t)},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 0===(""+e).length||/%|px/.test(""+e)?""+e:e+"px"},C=function(e){var t=void 0;try{t=JSON.parse(e)}catch(e){return!1}return t},D=function(){return window.navigator.language&&"ru"===window.navigator.language.substring(0,2)?"ru":"en"},q=function(e,t){var r=window,n=r.vqLogger,i=t.getState(),o=n?n.getLogs():["Not found logs"],a=E(4);v(e.baseUrl+"/debug",!1,!1,!1,"POST",{debug_info:JSON.stringify({logs:o,playerState:i}),hash:a});s()(a)},R=function(){var e=window.location;return e.origin?e.origin:e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")},U=function(e){return new RegExp(/^((https?:\/\/)|^(\/\/))([wW]{3}\.)?(([yY][oO][uU][tT][uU][bB][eE](-nocookie)?.com)|([yY][oO][uU][tT][uU]\.[bB][eE]))/).test(e)},M=function(e,t,r){return e.substr(0,t)+r+e.substr(t+r.length)}},31:function(e,t,r){"use strict";r.d(t,"b",function(){return i});r.d(t,"a",function(){return o});r.d(t,"c",function(){return a});r.d(t,"d",function(){return s});r.d(t,"e",function(){return c});var n=r(3),i=function(e,t){var r=[];if(!e)return r;e.forEach(function(e){e.type===t&&r.push(e)});return r},o=function(e,t,r){var n=[];e.forEach(function(e){n.push(e.width*e.height)});for(var i=t*r,o=1/0,a=n.indexOf(Math.max.apply(Math,n)),s=0;s<n.length;s+=1){var c=n[s]-i;if(c<o&&c>=0){o=c;a=s}}return e[a]},a=function(e){var t=/(\d+)\n([\d:.,]+)\s*-->\s*([\d:.,]+)\n((?:.|\n)+)/m;return e.replace(/^[^\S\n]*(.+)[^\S\n]*$/gm,"$1").replace(/\r/g,"\n").split("\n\n").map(function(e){var r=t.exec(e);return!!r&&{id:r[1],startTime:Object(n.t)(r[2]),endTime:Object(n.t)(r[3]),text:r[4]}}).filter(Boolean)},s=function(e){var t=/(\d+)\n([\d:.,]+)\s*-->\s*([\d:.,]+)\n((?:.|\n)+)/m;return e.replace(/^[^\S\n]*(.+)[^\S\n]*$/gm,"$1").replace(/\r/g,"\n").split("\n\n").map(function(e){var r=t.exec(e);return!!r&&{id:r[1],startTime:Object(n.t)(r[2]),endTime:Object(n.t)(r[3]),text:r[4]}}).filter(Boolean)},c=function(e){if(!e)return{};var t=e.thumb,r=e.width,n=e.height,i=t.match(/\d+/g),o=0,a=0;if(i&&i.length>=2){o=Number(i[0]);a=Number(i[1])}return{width:Number(r)||0,height:Number(n)||0,tileWidth:o,tileHeight:a}}},343:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(3),s=r(45),c=r(6),l=r(28),u=r(58),d=r(77),p={waitCheck:"waitCheck",processCheck:"processCheck"};t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._players=[];o._ids={};o._role=d.a.USER;o._profileId=null;o._subscribeTasks=["applying_filters","convert_video","extract_subtitles"];o._initEvents();return o}o(t,e);t.prototype._initEvents=function(){var e=[u.a.stdPlayer,u.a.extPlayer,u.a.recommendPlayer,u.a.viqeoPersonlaPlayer];this.subscribeTracking(this._playerAdded.bind(this),{eventName:"Player:added",container:e});this.subscribeTracking(this._playerDestroyed.bind(this),{eventName:"Player:destroyed",container:e});this.subscribeTracking(this._startupLoaded.bind(this),"Init:StartupDataLoaded");this.subscribeTracking(this._editorTasksProcessing.bind(this),"Init:TasksProcessed")};t.prototype._playerDestroyed=function(e){var t=e.player,r=this._players.indexOf(t);r>-1&&this._players.splice(r,1)};t.prototype._editorTasksProcessing=function(e){var t=e.tasks,r=e.videoId;this._players.forEach(function(e){e.getSlotId()===r&&e.setTasks(t)})};t.prototype._playerAdded=function(e){var t=e.player,r=e.slotId;this._players.push(t);this._ids[r]||(this._ids[r]={status:p.waitCheck});this._profileId=t.getProfileId();this._searchTask()};t.prototype._startupLoaded=function(e){var t=e.data.role,r=e.profileId;this._role=t;this._profileId=r;this._searchTask()};t.prototype._filterActiveTasks=function(e){var t=this;return e.filter(function(e){var r=e.status;return t._subscribeTasks.includes(e.tag)&&!["done","error"].includes(r)})};t.prototype._searchTask=function(){var e=this;this._role===d.a.EDITOR&&Object.keys(this._ids).forEach(function(t){e._ids[t].status===p.waitCheck&&Promise.resolve(e._getTasks(t)).then(e._filterTasks.bind(e)).then(e._tasksProcess.bind(e)).then(e._reloadSlotId.bind(e))})};t.prototype._getTasks=function(e){this._ids[e]=p.processCheck;return new Promise(function(t,r){Object(s.m)(e).then(function(r){t({response:r,videoId:e})},r)})};t.prototype._filterTasks=function(e){var t=this,r=e.response.items,n=e.videoId;return new Promise(function(e){var i=t._filterActiveTasks(r);i.length&&e({response:i,videoId:n})})};t.prototype._tasksProcess=function(e){var t=this,r=e.videoId,n=function(e){var n=e.items;t._players.forEach(function(e){e.getSlotId()===r&&e.setTasks(t._filterActiveTasks(n))})};return new Promise(function(e){Object(s.t)(r,n).then(function(n){e({items:t._filterActiveTasks(n.items),videoId:r})},n)})};t.prototype._findTask=function(e){var t=this,r=e.response.items,n=e.videoId;return new Promise(function(e){for(var i=0;i<r.length;i+=1){var o=r[i],a=o.tag,s=o.status;if(-1!==t._subscribeTasks.indexOf(a)&&"done"!==s&&"error"!==s){e({response:r[i],videoId:n});return}}})};t.prototype._taskProcess=function(e){var t=this,r=e.response,n=e.videoId,i=function(e){var r=e.items;t._players.forEach(function(e){e.getSlotId()===n&&e.setTask(r)})},o=r.token;return new Promise(function(e){Object(s.s)(o,i).then(function(t){return e({response:t,videoId:n})},i)})};t.prototype._reloadSlotId=function(e){var t=e.items,r=e.videoId;this._players.forEach(function(e){if(e.getSlotId()===r){e.setTasks(t);Object(a.x)(c.a.baseUrl+"/data/"+r+"/metadata",function(t){e.init({data:JSON.parse(t.responseText).items[0]})})}})};return t}(l.a)},344:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(28),s=r(13),c="VisiblePlayerController";t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._players=[];o.subscribeTracking(o._playerAdded.bind(o),"Player:added");o.subscribeTracking(o._playerDestroyed.bind(o),"Player:destroyed");o.subscribeTracking(o._checkConfig.bind(o),"ConfigUpdated");o.subscribeTracking(o.updateVisible.bind(o),"Player:changedSize");o.subscribeTracking(function(){o.updateVisible(o);setTimeout(function(){return o.updateVisible()},100)},"Player:videoLoaded");o.subscribeTracking(function(){o.updateVisible(o);setTimeout(function(){return o.updateVisible()},100)},"Editor:Show");o.subscribeTracking(o.updateVisible.bind(o),"Editor:Hidden");o.subscribeTracking(o.updateVisible.bind(o),"Player:forcePause");o.addEvent(o.getWindow(),"scroll",o.updateVisible.bind(o),!0);return o}o(t,e);t.prototype.getWindow=function(){var e=this.viqeo._config,t=e.amp,r=e.standalone;if(t||r){s.a.log(c+".getWindow(). amp: "+JSON.stringify(t)+", standalone: "+JSON.stringify(r));return window}try{if(window.top!==window){s.a.log(c+".getWindow(). Run in top window.");if(window.top.document)return window.top}}catch(e){s.a.log(c+".getWindow(). CORS window.top.");return window}return window};t.prototype._checkConfig=function(e){e.options.amp&&this.destroy()};t.prototype._playerAdded=function(e){this._players.push({player:e.player});this.updateVisible()};t.prototype._playerDestroyed=function(e){var t=e.player;this._players.splice(this._players.findIndex(function(e){return e.player===t}),1);this.updateVisible()};t.getOuterIframe=function(){try{for(var e=window,t=window.top,r=Array.from(t.document.querySelectorAll("iframe")),n=0;n<r.length;n+=1)if(r[n].contentWindow===e){s.a.log(c+".getOuterIframe(). Finded iframe.");return r[n]}}catch(e){s.a.log(c+".getOuterIframe(). CORS iframe.");return null}s.a.log(c+".getOuterIframe(). Not founded iframe.");return null};t.prototype.getModuleDimensions=function(e){var r=e.slot,n=window,i=r,o=document.documentElement,a=0;if(this.getWindow()!==window){n=this.getWindow();i=t.getOuterIframe()||r;a=r.getBoundingClientRect().top;o=n.document.documentElement}var s=n.offsetHeight||this.getWindow().innerHeight,c=!isNaN(n.scrollTop)&&n.scrollTop||(this.getWindow().pageYOffset||o.scrollTop)-(o.clientTop||0);return{viewportHeight:s,viewportTop:c,viewportBottom:c+s,moduleTop:i.getBoundingClientRect().top+a}};t.prototype.checkVisible=function(e){var t=e.store.getState(),r=t.player,n=r.height,i=r.hasVisible,o=r.hasFullScreen,a=r.hasFly,s=t.options.hasOverlayMode;if(!n)return!1;var c=parseInt(n,10),l=this.getModuleDimensions(e),u=l.viewportTop,d=l.viewportBottom,p=l.moduleTop,f=Math.max(u,u+p),h=Math.min(d,f+p+c),y=Math.max(0,Math.min(c,h-f)),v=c&&y/c,b=i,g=window,m=g.innerHeight,_=n/m;if(_<=.5)v<=.9?b=!1:v>=.9&&(b=!0);else if(_>=1)v<=.5?b=!1:v>=.5&&(b=!0);else{var w=1.5-_;v<=w?b=!1:v>=w&&(b=!0)}(o||a||s)&&(b=!0);e.store.getState().player.visiblePercent!==v&&e.store.dispatch({type:"CHANGE_VISIBLE_PERCENT",payload:v});var P=e.store.getState(),O=P.player,k=O.hasAfterScreen,T=O.hasInitial,E=Math.abs(Math.abs(p)-n)>m;E!==k&&e.store.dispatch({type:"CHANGE_AFTER_SCREEN",payload:E});(!T&&b||!T&&Math.abs(p)<=2*m)&&e.store.dispatch({type:"PLAYER_NEED_REQUESTED_VIDEO"});e.store.dispatch({type:"SCROLLED"});return b};t.getActivePlayer=function(e){var t=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},r=[],n={x:0,y:window.innerHeight/2};e.forEach(function(e){var i=e.slot.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,c={x:o,y:a},l={x:o,y:a+s};r.push(Math.min(t(c,n),t(l,n)))});return e[r.indexOf(Math.min.apply(Math,r))]};t.prototype.updateVisible=function(){var e=this,r=[],n=this._players.find(function(e){return"smartVisible"===e.player.getPlayback("videostart").type});this._players.forEach(function(t){var i=t.player,o=e.checkVisible(i),a=i.store.getState().options.forcePause;o&&n&&!a?r.push(i):i.setVisiblePercent(o)});if(1===r.length)r[0].setVisiblePercent(!0);else if(r.length>1){var i=t.getActivePlayer(r);i.setVisiblePercent(!0);r.forEach(function(e){e!==i&&e.setVisiblePercent(!1)})}};return t}(a.a)},345:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(28),s=function(e){var t=e.player;if(t.vpaid){var r=t.vpaid.getCurrentTime(),n=t.getCut();n&&2===n.length&&(r<n[0]||r>n[1])&&t.vpaid.seek(n[0])}},c=void 0,l=void 0,u=function(){var e=window.innerWidth-document.documentElement.clientWidth;if(void 0===l){l=document.body.style.overflow;document.body.style.overflow="hidden"}if(void 0===c&&e>0){c=document.body.style.paddingRight;document.body.style.paddingRight=e+"px"}},d=function(){if(void 0!==l){document.body.style.overflow=l;l=void 0}if(void 0!==c){document.body.style.paddingRight=c;c=void 0}};t.a=function(e){function t(r){n(this,t);var o=i(this,e.call.apply(e,[this].concat(r)));o._players=[];o._hasDisableEidorControl=!1;o._initEvents();return o}o(t,e);t.prototype._initEvents=function(){var e=this;this.subscribeTracking(function(t){var r=t.options,n=r.amp,i=r.standalone;e._hasDisableEidorControl=!!n||!!i},"ConfigUpdated");this.subscribeTracking(function(t){var r=t.player;e._players.push(r);e._hasDisableEidorControl&&r.setOptions({forceHideEditorControls:!0})},"Player:added");this.subscribeTracking(s,"Player:currentTimeUpdated");this.subscribeTracking(this._onEditorOpened.bind(this),{eventName:["Editor:Show","Stats:Show"]});this.subscribeTracking(this._onEditorHidden.bind(this),{eventName:["Editor:Hidden","Stats:Hidden"]});this.subscribeTracking(this._syncPlayerState.bind(this),"Editor:SyncPlayerState");this.subscribeTracking(this._onUpdatePlayerData.bind(this),"Editor:UpdatePlayerData")};t.prototype._syncPlayerState=function(e){var t=e.videoId,r=e.state,n=r.hasVisibleUnpublishedLabel,i=r.visible,o=this._players.filter(function(e){return e.getSlotId()===t});i||o.forEach(function(e){e.toggleUnpublishedLabel(n);e.pause()})};t.prototype._onUpdatePlayerData=function(e){var t=e.data,r=t.vqControls,n=t.vqPlayback,i=t.subtitle,o=t.ranges,a=t.mediaFiles,s=t.filters,c=e.videoId;this._players.filter(function(e){return e.getSlotId()===c}).forEach(function(e){r&&e.updateVqControls(r);n&&e.updateVqPlayback(n);i&&e.updateSubtitles(i.data,i.styles);a&&e.updateFiles(a);o&&e.setCut(o);s&&e.setFilters(s)})};t.prototype._onEditorOpened=function(){u();this._players.forEach(function(e){return e.block()})};t.prototype._onEditorHidden=function(){d();this._players.forEach(function(e){return e.unblock()})};return t}(a.a)},346:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(28),s=(r(2),r(13)),c="KeyBoardController",l=function(e,t){s.a.log(c+".seekTime("+e.getSlotId()+", "+t+")");var r=e.getCurrentTime(),n=r+t;n<0?n=.01:n>e.getDuration()&&(n=e.getDuration());s.a.log(c+".seekTime(): currentTime: "+r+", duration: "+e.getDuration()+", seekTime: "+n);e.setCurrentTime(n)};t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._players=[];o._editorOpened=!1;o.subscribeTracking(function(e){return o._players.push(e.player)},"Player:added");o.subscribeTracking(function(){o._editorOpened=!0},"Editor:Show");o.subscribeTracking(function(){o._editorOpened=!1},"Editor:Hidden");o.subscribeTracking(o._onKeyDown.bind(o),"Player:keydown");o.addEvent(window.document,"keydown",o._onKeyDown.bind(o));return o}o(t,e);t.prototype._onKeyDown=function(e){if(this._editorOpened)s.a.log(c+"._onKeyDown(}. Block keyboard.)");else{var t=e.keyCode;this._players.filter(function(e){return e.hasVisible()}).forEach(function(e){switch(t){case 39:l(e,10);break;case 37:l(e,-10)}})}};return t}(a.a)},347:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.a=function(){function e(){n(this,e);this._events=[];this._config={}}e.prototype._triggerTracking=function(e){for(var t=0;t<this._events.length;t+=1){for(var r=this._events[t],n=r.cb,i=r.filter,o=Object.keys(i),a=!0,s=0;s<o.length;s+=1){var c=o[s];if(Array.isArray(i[c])){if(-1===i[c].indexOf(e[c])){a=!1;break}}else if(i[c]!==e[c]){a=!1;break}}a&&n(e)}return!0};e.prototype.subscribeTracking=function(e,t){var r=t||{};"string"==typeof r&&(r={eventName:t});this._events.push({cb:e,filter:r})};e.prototype.unsubscribeTracking=function(e){this._events=[].concat(this._events).filter(function(t){return e!==t.cb})};return e}()},348:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(41),s=r(6),c=r(3),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var o=i(this,e.call(this));o._modules={};o._videoGallery=null;o.role=r.role;o._scripts={};o._hasPreload=!0;switch(document.readyState){case"loading":document.addEventListener("readystatechange",o._onReadyStateChange.bind(o));break;case"complete":default:o._onReadyStateChange()}document.addEventListener("viqeo:changeLanguage",function(e){return o.setLanguage(e.detail.locale)});o.setLanguage(Object(c.j)());o._loadEditorScripts();return o}o(t,e);t.prototype._onReadyStateChange=function(){this.getScript(s.a.playerScriptUrl)};t.prototype.initLoaded=function(e){this.role=e.role||"user";this._loadEditorScripts()};t.prototype._loadEditorScripts=function(){var e=this;if("editor"===this.role){[s.a.editorScriptUrl,s.a.statsScriptUrl].forEach(function(t){return e.getScript(t)})}};t.prototype.getScript=function(e){this._scripts[e]||(this._scripts[e]=new Promise(function(t,r){Object(c.p)(e,t,r)}));return this._scripts[e]};t.prototype.showModal=function(e,t,r,n){var i=this;return new Promise(function(o){i._modules[e]||(i._modules[e]={});var a=i._modules[e][t];if(a){o(a);a.show()}else i.getScript(r).then(function(){i._modules[e][t]=n();var r=t.charAt(0).toUpperCase()+t.slice(1);i._modules[e][t].subscribeAll(function(e){i.trigger("Tracking",{eventName:r+":"+e.type})});o(i._modules[e][t]);i._modules[e][t].show()})})};t.prototype._createVideoGallery=function(){return new Promise(function(){})};t.prototype._pushPlayer=function(e,t){var r=this,n=e.getSlotId();if(this._modules[n]){this._modules[n].player=e;this._modules[n].params=this._modules[n].params||{}}else this._modules[n]={player:e,params:{}};this._modules[n].params=l({},this._modules[n].params,t);var i={language:this.language,profileId:e.getProfileId(),videoId:n};e.subscribe(this.showModal.bind(this,n,"editor",s.a.editorScriptUrl,function(){var t=window.getVQEditor(l({callbacks:{syncPlayerState:function(n){r.trigger("Tracking",{eventName:"Editor:SyncPlayerState",state:n,editor:t,videoId:e.getSlotId()})},updatePlayerData:function(n){r.trigger("Tracking",{eventName:"Editor:UpdatePlayerData",data:n,editor:t,videoId:e.getSlotId()})},setTasks:function(n){r.trigger("Tracking",{eventName:"Init:TasksProcessed",tasks:n,editor:t,videoId:e.getSlotId()})}}},i));return t}),"Modal:editor");e.subscribe(this.showModal.bind(this,n,"stats",s.a.statsScriptUrl,function(){return window.getVQStats(l({},i,t))}),"Modal:stats")};t.prototype.createPlayer=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n){t.getScript(s.a.playerScriptUrl).then(function(){var i=t._hasPreload;t._hasPreload&&(t._hasPreload=!1);e.options?e.options.preload=!!e.options.preload&&i:e.options={preload:i};var o=window.getVQPlayer(l({language:t.language},e));t._videoGallery?t._videoGallery.push(o,e):t._createVideoGallery({language:t.language,profileId:e.profileId}).then(function(){return t._videoGallery.push(o,e)});t._pushPlayer(o,l({},r,{playerData:e.data}));n(o)})})};t.prototype.setLanguage=function(e){var t=this._modules;Object.keys(t).forEach(function(r){Object.keys(t[r]).forEach(function(n){t[r][n].setLanguage&&t[r][n].setLanguage(e)})});this._videoGallery&&this._videoGallery.setLanguage(e);this.language=e};t.prototype.getPlayerBy=function(e){for(var t=this.getAllPlayers(),r=void 0,n=0;n<t.length;n+=1){r=t[n];if(e.contains(r.getParent()))break;r=null}return r};t.prototype.getPlayers=function(){var e=this._modules,t=[];Object.keys(e).forEach(function(r){t.push(e[r].player)});return t};t.prototype.getAllPlayers=function(){var e=this._modules,t=[];Object.keys(e).forEach(function(r){t.push(e[r].player)});return t};t.prototype.getSlot=function(e){return e.getParent()};t.prototype.resize=function(){this.getAllPlayers().forEach(function(e){return e.forceResize()})};t.prototype.destroy=function(e){var t=this._modules[e].player;if(t){t.destroy();delete this._modules[e]}};t.prototype.hide=function(e){var t=this._modules;Object.keys(t).forEach(function(r){Object.keys(t[r]).forEach(function(n){!t[r][n].hide||e&&e!==r||t[r][n].hide()})})};return t}(a.a)},349:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(28);t.a=function(e){function t(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t);var a=i(this,e.call(this,r));a.totalTime=0;a._options=o;return a}o(t,e);t.prototype.updateTime=function(e,t){this.totalTime+=e};t.prototype.beforeStartAdvert=function(){};t.prototype.getSumTime=function(){return new Promise(function(e){return e(0)})};return t}(a.a)},36:function(e,t,r){"use strict";(function(e){function r(e,t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function n(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0});t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,r){i.super_.call(this,"E",e);Object.defineProperty(this,"lhs",{value:t,enumerable:!0});Object.defineProperty(this,"rhs",{value:r,enumerable:!0})}function o(e,t){o.super_.call(this,"N",e);Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e);Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,r){s.super_.call(this,"A",e);Object.defineProperty(this,"index",{value:t,enumerable:!0});Object.defineProperty(this,"item",{value:r,enumerable:!0})}function c(e,t,r){var n=e.slice((r||t)+1||e.length);e.length=t<0?e.length+t:t;e.push.apply(e,n);return e}function l(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function u(e,t,r,n,d,p,f){d=d||[];f=f||[];var h=d.slice(0);if(void 0!==p){if(n){if("function"==typeof n&&n(h,p))return;if("object"==typeof n){if(n.prefilter&&n.prefilter(h,p))return;if(n.normalize){var y=n.normalize(h,p,e,t);if(y){e=y[0];t=y[1]}}}}h.push(p)}if("regexp"===l(e)&&"regexp"===l(t)){e=e.toString();t=t.toString()}var v=typeof e,b=typeof t,g="undefined"!==v||f&&f[f.length-1].lhs&&f[f.length-1].lhs.hasOwnProperty(p),m="undefined"!==b||f&&f[f.length-1].rhs&&f[f.length-1].rhs.hasOwnProperty(p);if(!g&&m)r(new o(h,t));else if(!m&&g)r(new a(h,e));else if(l(e)!==l(t))r(new i(h,e,t));else if("date"===l(e)&&e-t!=0)r(new i(h,e,t));else if("object"===v&&null!==e&&null!==t)if(f.filter(function(t){return t.lhs===e}).length)e!==t&&r(new i(h,e,t));else{f.push({lhs:e,rhs:t});if(Array.isArray(e)){var _;for(_=0;_<e.length;_++)_>=t.length?r(new s(h,_,new a(void 0,e[_]))):u(e[_],t[_],r,n,h,_,f);for(;_<t.length;)r(new s(h,_,new o(void 0,t[_++])))}else{var w=Object.keys(e),P=Object.keys(t);w.forEach(function(i,o){var a=P.indexOf(i);if(a>=0){u(e[i],t[i],r,n,h,i,f);P=c(P,a)}else u(e[i],void 0,r,n,h,i,f)});P.forEach(function(e){u(void 0,t[e],r,n,h,e,f)})}f.length=f.length-1}else e!==t&&("number"===v&&isNaN(e)&&isNaN(t)||r(new i(h,e,t)))}function d(e,t,r,n){n=n||[];u(e,t,function(e){e&&n.push(e)},r);return n.length?n:void 0}function p(e,t,r){if(r.path&&r.path.length){var n,i=e[t],o=r.path.length-1;for(n=0;n<o;n++)i=i[r.path[n]];switch(r.kind){case"A":p(i[r.path[n]],r.index,r.item);break;case"D":delete i[r.path[n]];break;case"E":case"N":i[r.path[n]]=r.rhs}}else switch(r.kind){case"A":p(e[t],r.index,r.item);break;case"D":e=c(e,t);break;case"E":case"N":e[t]=r.rhs}return e}function f(e,t,r){if(e&&t&&r&&r.kind){for(var n=e,i=-1,o=r.path?r.path.length-1:0;++i<o;){void 0===n[r.path[i]]&&(n[r.path[i]]="number"==typeof r.path[i]?[]:{});n=n[r.path[i]]}switch(r.kind){case"A":p(r.path?n[r.path[i]]:n,r.index,r.item);break;case"D":delete n[r.path[i]];break;case"E":case"N":n[r.path[i]]=r.rhs}}}function h(e,t,r){if(r.path&&r.path.length){var n,i=e[t],o=r.path.length-1;for(n=0;n<o;n++)i=i[r.path[n]];switch(r.kind){case"A":h(i[r.path[n]],r.index,r.item);break;case"D":case"E":i[r.path[n]]=r.lhs;break;case"N":delete i[r.path[n]]}}else switch(r.kind){case"A":h(e[t],r.index,r.item);break;case"D":case"E":e[t]=r.lhs;break;case"N":e=c(e,t)}return e}function y(e,t,r){if(e&&t&&r&&r.kind){var n,i,o=e;i=r.path.length-1;for(n=0;n<i;n++){void 0===o[r.path[n]]&&(o[r.path[n]]={});o=o[r.path[n]]}switch(r.kind){case"A":h(o[r.path[n]],r.index,r.item);break;case"D":case"E":o[r.path[n]]=r.lhs;break;case"N":delete o[r.path[n]]}}}function v(e,t,r){if(e&&t){u(e,t,function(n){r&&!r(e,t,n)||f(e,t,n)})}}var b,g,m=[];b="object"==typeof e&&e?e:"undefined"!=typeof window?window:{};g=b.DeepDiff;g&&m.push(function(){if(void 0!==g&&b.DeepDiff===d){b.DeepDiff=g;g=void 0}});r(i,n);r(o,n);r(a,n);r(s,n);Object.defineProperties(d,{diff:{value:d,enumerable:!0},observableDiff:{value:u,enumerable:!0},applyDiff:{value:v,enumerable:!0},applyChange:{value:f,enumerable:!0},revertChange:{value:y,enumerable:!0},isConflict:{value:function(){return void 0!==g},enumerable:!0},noConflict:{value:function(){if(m){m.forEach(function(e){e()});m=null}return d},enumerable:!0}});t.a=d}).call(t,r(23))},37:function(e,t){e.exports={editor:"vn_editor",stats:"vn_stats",player:"vn_player",starter:"vq_starter",playerInit:"vq_player_init",editorInit:"vq_editor_init",initExternalPlayer:"vq_init_external_player",initInternalPlayer:"vq_init_internal_player",wordpressPluginInit:"vq_wordpress_plugin_init",wordpressButton:"vq_wordpress_button",gallery:"vq_gallery",filters:"vq_filters"}},41:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(){function e(){n(this,e);this.eventListeners={};this.listeners=[]}e.prototype.subscribe=function(e,t){this.eventListeners[t]=[].concat(this.eventListeners[t]||[],e)};e.prototype.subscribeAll=function(e){this.listeners.push(e)};e.prototype.subscribeOnce=function(e,t){var r=this;this.subscribe(function n(){e.apply(void 0,arguments);r.unsubscribe(n,t)},t)};e.prototype.unsubscribe=function(e,t){this.eventListeners[t]=[].concat(this.eventListeners[t]||[]).filter(function(t){return t!==e})};e.prototype.unsubscribeAll=function(){this.eventListeners={};this.listeners=[]};e.prototype.trigger=function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(this.eventListeners[e]||[]).forEach(function(e){return e.apply(t,n)});this.listeners.forEach(function(r){return r.apply(t,[i({type:e},n)])})};return e}()},45:function(e,t,r){"use strict";function n(e,t,r,n,i,o){var a=new FormData;switch(n){case"subtitle":a.append("srt",r);a.append("language",i.language);break;default:a.append("file",r)}var s=null,c=new Promise(function(r,i){s=Object(v.C)(_+"/website/"+e+"/video/"+t+"/type/"+n+"/upload",a,function(e){try{var t=JSON.parse(e.responseText),n=Object(m.a)(t);if(n){i(n);return}r(t)}catch(e){i("Failed to response upload video: "+e)}},function(){i("Failed upload video")},function(e){var t=Math.round(e.loaded/e.total*100);o&&o(t)})});c.xhr=s;return c}function i(e,t,r){return new Promise(function(n,i){Object(v.x)(_+"/website/"+e+"/video/"+t+"/type/"+r+"/list",function(e){try{var t=JSON.parse(e.responseText),r=Object(m.a)(t);if(r){i(r);return}n(t)}catch(e){i()}},function(){i()})})}function o(e){return new Promise(function(t,r){Object(v.x)(_+"/task/"+e,function(e){try{var n=JSON.parse(e.responseText),i=Object(m.a)(n);if(i){r(i);return}t(n)}catch(e){r("Failed to response task: "+e)}},function(){r("Failed get task")})})}function a(e){return new Promise(function(t,r){var n=_+"/video/"+e+"/tasks";Object(v.x)(n,function(e){try{var n=JSON.parse(e.responseText),i=Object(m.a)(n);if(i){r(i);return}t(n)}catch(e){r("Failed to response tasks: "+e)}},function(){r("Failed get tasks")})})}function s(e,t){return new Promise(function(r,n){var i=function i(a){t&&t(a);var s=a.items.status;"error"===s?n(a):"done"!==s?setTimeout(function(){return o(e).then(i)},1e3):r(a)};o(e).then(i,function(e){n(e)})})}function c(e,t){return new Promise(function(r,n){var i=function n(i){t&&t(i);i.items.filter(function(e){return!["done","error"].includes(e.status)}).length?setTimeout(function(){return a(e).then(n)},1e3):r(i)};a(e).then(i,function(e){n(e)})})}function l(e,t){return new Promise(function(r,n){Object(v.x)(_+"/website/"+e+"/preset/"+t+"/list",function(e){try{var t=JSON.parse(e.responseText),i=Object(m.a)(t);if(i){n(i);return}r(t)}catch(e){n("Failed to response getPresetList: "+e)}},function(){n("Failed getPresetList")},!1)})}function u(e){return new Promise(function(t,r){Object(v.x)(_+"/video/"+e+"/website",function(e){try{var n=JSON.parse(e.responseText),i=Object(m.a)(n);if(i){r(i);return}t(n)}catch(e){r("Failed to response getWebsiteId: "+e)}},function(){r("Failed getWebsiteId")},!1)})}function d(e,t){return new Promise(function(r,n){Object(v.x)(_+"/website/"+e+"/video/"+t,function(e){try{var t=JSON.parse(e.responseText),i=Object(m.a)(t);if(i){n(i);return}r(t)}catch(e){n("Failed to response getWebsiteId: "+e)}},function(){n("Failed getWebsiteId")},!1)})}function p(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"production",o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return new Promise(function(a,s){Object(v.x)(_+"/website/"+e+"/video/"+t+"/type/"+n+"/"+r+"/set-"+i,function(e){try{var t=JSON.parse(e.responseText),r=Object(m.a)(t);if(r){s(r);return}a(t)}catch(e){s("Failed to response getGroupList: "+e)}},function(){s("Failed set-production")},!1,"POST",{clearCutBoundaries:o})})}function f(e,t,r){return new Promise(function(n,i){Object(v.x)(_+"/website/"+e+"/video/"+t+"/edit",function(e){try{var t=JSON.parse(e.responseText),r=Object(m.a)(t);if(r){i(r);return}n(t)}catch(e){i("Failed to response editVideoSlot: "+e)}},function(){i("Failed editVideoSlot")},!1,"POST",r)})}function h(e,t){return new Promise(function(r,n){w(e,t).then(function(e){var t=Object(b.b)(e,"image/jpeg");t.length?r(t[0].url):n("Failed get image")},n)})}function y(e,t){return new Promise(function(r,n){Object(v.x)(_+"/data/"+e+"/type/video/"+t+"/metadata",function(e){try{var t=JSON.parse(e.responseText),i=Object(m.a)(t);if(i){n(i);return}var o=t.items||[];o.length&&o[0].vqSubtitles&&o[0].vqSubtitles.data?P(o[0].vqSubtitles.data).then(function(e){return r(e)}):n("Failed getSubtitle")}catch(e){n("Failed to response getSubtitle: "+e)}},function(){n("Failed getSubtitle")})})}r.d(t,"g",function(){return w});t.u=n;t.f=i;t.m=a;t.s=s;t.t=c;t.h=l;t.o=u;t.n=d;t.r=p;t.c=f;t.i=h;t.l=y;r.d(t,"j",function(){return O});r.d(t,"k",function(){return k});r.d(t,"a",function(){return T});r.d(t,"v",function(){return E});r.d(t,"p",function(){return S});r.d(t,"b",function(){return j});r.d(t,"q",function(){return x});r.d(t,"e",function(){return A});r.d(t,"d",function(){return I});var v=r(3),b=r(31),g=r(6),m=r(51),_=g.a.baseUrl,w=function(e,t){return new Promise(function(r){Object(v.x)(_+"/data/"+e+"/type/video/"+t+"/metadata",function(e){var t=JSON.parse(e.responseText).items[0];r(t.mediaFiles)})})},P=function(e){return new Promise(function(t){Object(v.x)(e,function(e){return t(e.responseText)})})},O=function(e,t,r){return new Promise(function(n,i){var o=location.href,a=(new Date).getTimezoneOffset();Object(v.x)(Object(v.b)(_+"/stats/video/"+r+"/average",{date_from:e,date_to:t,video_id:r,uri:o,time_zone:a}),function(e){try{var t=JSON.parse(e.responseText),r=Object(m.a)(t);if(r){i(r);return}n(t)}catch(e){i("Failed to response task: "+e)}},function(){i("Failed get task")})})},k=function(e,t,r){return new Promise(function(n,i){Object(v.x)(Object(v.b)(_+"/stats/video/"+r+"/metric",{date_from:e,date_to:t}),function(e){try{var t=JSON.parse(e.responseText),r=Object(m.a)(t);if(r){i(r);return}n(t)}catch(e){i("Failed to response stats: "+e)}},function(){i("Failed get stats")})})},T=function(e,t,r,n){return new Promise(function(i,o){Object(v.x)(_+"/website/"+e+"/video/"+t+"/type/video/"+r+"/filters/apply",function(e){try{var t=JSON.parse(e.responseText),r=Object(m.a)(t);if(r){o(r);return}i(t)}catch(e){o("Failed to response applyFilters: "+e)}},function(){o("Failed applyFilters")},!1,"POST",n)})},E=function(e){return new Promise(function(t,r){Object(v.x)(_+"/user/edit",function(e){try{var n=JSON.parse(e.responseText),i=Object(m.a)(n);if(i){r(i);return}t(n)}catch(e){r("Failed to response getDublicates: "+e)}},function(){return r("Failed edit user")},!1,"POST",e)})},S=function(e,t,r,n){return new Promise(function(i,o){Object(v.x)(_+"/website/"+e+"/video/"+t+"/type/video/"+r+"/make_subtitles",function(e){try{var t=JSON.parse(e.responseText),r=Object(m.a)(t);if(r){o(r);return}i(t)}catch(e){o("Failed to response make subtitles: "+e)}},function(){return o("Failed make subtitles")},!1,"POST",n)})},j=function(e,t,r,n){return new Promise(function(i,o){Object(v.x)(_+"/website/"+e+"/video/"+t+"/type/subtitle/"+r+"/edit",function(e){try{var t=JSON.parse(e.responseText),r=Object(m.a)(t);if(r){o(r);return}i(t)}catch(e){o("Failed to response update subtitles: "+e)}},function(){return o("Failed update subtitles")},!1,"POST",{text:n})},!1,"POST",{text:n})},x=function(e,t,r,n){return new Promise(function(i,o){Object(v.x)(_+"/website/"+e+"/video/"+t+"/type/"+r+"/"+n+"/remove",function(e){try{var t=JSON.parse(e.responseText),r=Object(m.a)(t);if(r){o(r);return}i(t)}catch(e){o("Failed to response remove file: "+e)}},function(){return o("Failed remove file")})})},A=function(e,t,r,n){return new Promise(function(r,i){Object(v.x)(_+"/website/"+e+"/video/"+t+"/save_as",function(e){try{var t=JSON.parse(e.responseText);if(Object(m.a)(t)){i(t);return}r(t)}catch(e){i("Failed to response duplicateVideo: "+e)}},function(){i("Failed to response duplicateVideo")},!1,"POST",n)})},I=function(e,t){return new Promise(function(r,n){Object(v.x)(_+"/content/"+e+"/slice/create",function(e){try{var t=JSON.parse(e.responseText),i=Object(m.a)(t);if(i){n(i);return}r(t)}catch(e){n("Failed to response create content fragment: "+e)}},function(){n("Failed to response create content fragment")},!1,"POST",t)})}},46:function(e,t){function r(e){if(navigator.clipboard)return navigator.clipboard.writeText(e);var t=document.createElement("span");t.textContent=e;t.style.whiteSpace="pre";var r=document.createElement("iframe");r.sandbox="allow-same-origin";document.body.appendChild(r);var n=r.contentWindow;n.document.body.appendChild(t);var i=n.getSelection();if(!i){n=window;i=n.getSelection();document.body.appendChild(t)}var o=n.document.createRange();i.removeAllRanges();o.selectNode(t);i.addRange(o);var a=!1;try{a=n.document.execCommand("copy")}catch(e){}i.removeAllRanges();n.document.body.removeChild(t);document.body.removeChild(r);return a?Promise.resolve():Promise.reject()}e.exports=r},47:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(37),s=r.n(a),c=r(48);t.a=new(function(e){function t(){n(this,t);var o=i(this,e.call(this)),a=r(49).version;o.baseUrl="//api.viqeo.tv/v1";o.statsUrl="//stats.viqeo.tv";o.staticUrl="//cdn.viqeo.tv/js";o.playerHomeUrl="https://viqeo.tv";o.personalUrl="https://viqeo.tv/personal/";o.statsScriptUrl=o.staticUrl+"/"+s.a.stats+".js?v="+a;o.editorScriptUrl=o.staticUrl+"/"+s.a.editor+".js?v="+a;o.playerScriptUrl=o.staticUrl+"/"+s.a.player+".js?v="+a;o.initInternalPlayerUrl=o.staticUrl+"/"+s.a.initInternalPlayer+".js";o.galleryScriptUrl=o.staticUrl+"/"+s.a.gallery+".js?v="+a;o.embedUrl="https://cdn.viqeo.tv";o.errorTrackerUrl="https://error.viqeo.tv";o.proxyUrl="//cdn.viqeo.tv/v1/proxy";o.ampAdvertUrl="https://amptracker.viqeo.tv";return o}o(t,e);return t}(c.a))},48:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.a=function e(){n(this,e);this.baseUrl="";this.statsUrl="";this.staticUrl="";this.playerHomeUrl="";this.personalUrl="";this.statsScriptUrl="";this.editorScriptUrl="";this.playerScriptUrl="";this.initInternalPlayerUrl="";this.galleryScriptUrl="";this.embedUrl="";this.errorTrackerUrl="";this.advertDataUrl="";this.advertModuleUrl="";this.proxyUrl="";this.ampAdvertUrl=""}},49:function(e,t){e.exports={name:"viqeo-player",version:"0.3.48",main:"lib/index.js",scripts:{"watch player":"./node_modules/.bin/cross-env SERVER=local NODE_ENV=development ./node_modules/.bin/webpack --watch --config ./internals/webpack.config.debug.js","build player":"NODE_ENV=production ./node_modules/.bin/webpack","watch plugin":"./node_modules/.bin/cross-env SERVER=plugin NODE_ENV=development ./node_modules/.bin/webpack --watch --config ./internals/webpack.config.plugin.js",eslint:"eslint --ext .jsx,js src",stylelint:"stylelint src/**/*.css","start manual server test":"node ./tests/manual/","test:single":"rm -rf tmp/ && ./node_modules/.bin/karma start karma.conf.js --single-run","test:watch":"karma start karma.conf.js"},"pre-commit":[],keywords:["videonow","viqeo","test3"],license:"UNLICENSED",private:!0,dependencies:{"babel-core":"6.25.0","babel-loader":"7.1.1","babel-plugin-transform-helper":"0.0.6","babel-plugin-transform-object-rest-spread":"6.23.0","babel-preset-latest":"6.24.1","babel-runtime":"6.25.0","chart.js":"^2.7.2","cross-env":"3.2.4",moment:"^2.23.0",pug:"^2.0.0-rc.4","raw-loader":"0.5.1","rc-slider":"^8.6.3","react-dropzone":"^4.1.2","react-redux-i18n":"^1.8.0","react-select":"^1.0.0-rc.5","strip-loader":"0.1.2",svgo:"0.7.2","svgo-loader":"1.2.1","throttle-debounce":"^1.0.1",webpack:"3.4.1","xml-js":"^1.5.1"},devDependencies:{autoprefixer:"^7.1.2","babel-plugin-add-module-exports":"^0.2.1","babel-preset-react":"^6.24.1","clipboard-copy":"^2.0.1","copy-webpack-plugin":"^4.0.1","css-loader":"^0.28.4",dashjs:"^2.9.2","deep-diff":"^0.3.8",eslint:"4.3.0","eslint-config-airbnb-base":"11.3.1","eslint-import-resolver-webpack":"0.8.3","eslint-plugin-import":"2.7.0","eslint-plugin-jasmine":"^2.10.1","eslint-plugin-jsx-a11y":"^6.0.2","eslint-plugin-react":"^7.0.1",express:"^4.15.3","file-loader":"^0.11.2","hls.js":"^0.12.4","jasmine-core":"^3.1.0",karma:"^2.0.2","karma-browserstack-launcher":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-jasmine":"^1.1.2","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-phantomjs-launcher":"^1.0.4","karma-webpack":"^3.0.0","material-ui":"^0.19.4",mocha:"^5.2.0","phantomjs-prebuilt":"^2.1.16","postcss-icss-values":"^2.0.1","postcss-loader":"^2.0.6","pre-commit":"^1.2.2","raw-loader":"^0.5.1",react:"^16.2.0","react-click-outside":"^2.3.1","react-color":"^2.13.8","react-dom":"^16.2.0","react-redux":"^5.0.5",redux:"^3.7.2","redux-devtools-extension":"^2.13.2","redux-thunk":"^2.2.0","style-loader":"^0.18.1",stylelint:"^8.0.0","stylelint-config-standard":"^17.0.0","svg-url-loader":"^2.1.1","viqeo-authorization":"git+ssh://git@bitbucket.org/videonow/viqeo-authorization.git#v0.0.7","viqeo-front-common":"git+ssh://git@bitbucket.org/videonow/viqeo-front-common.git#v0.0.10","webpack-conditional-loader":"^1.0.12",ws:"2.2.1"},browserslist:["Chrome >= 20","Firefox >= 24","Edge >= 12","Explorer >= 10","iOS >= 5","Safari >= 5","Android >= 2.3","Opera >= 15"],engines:{node:"6",npm:"3"}}},5:function(e,t,r){"use strict";r.d(t,"d",function(){return f});r.d(t,"f",function(){return h});r.d(t,"a",function(){return y});r.d(t,"c",function(){return m});r.d(t,"e",function(){return _});r.d(t,"b",function(){return w});r.d(t,"g",function(){return P});var n=navigator,i=n.userAgent,o=n.vendor,a=n.plugins,s=n.appVersion,c=n.platform,l=window,u=l.opera,d=l.MSStream,p=i||o||u,f=!!window.MSInputMethodContext&&!!document.documentMode,h=/^((?!chrome|android).)*safari/i.test(p),y=(function(){var e=p.match(/Chrom(e|ium)\/([0-9]+)\./);!!e&&parseInt(e[2],10)}(),/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),v=(/Firefox/.test(p),/iPod/.test(p)&&!d),b=/iPhone/.test(p)&&!d,g=/iPad/.test(p)&&!d,m=v||b||g,_=(/android/i.test(p),/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(p)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(p.substr(0,4))),w=((void 0===a||0===a.length)&&("undefined"==typeof ActiveXObject||new ActiveXObject("ShockwaveFlash.ShockwaveFlash")),/Edge/.test(p)),P=(function(){if(!m)return!1;if("string"!=typeof s)return!1;var e=s.match(/OS (\d+)_(\d+)_?(\d+)?/);!!e&&parseFloat(e[1]+"."+e[2])}(),function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t);window.removeEventListener("testPassive",null,t)}catch(t){e=!1}return e}());"WebKitMediaSource"in window||window,!!c&&c.indexOf("Win")},50:function(e,t,r){"use strict";var n=r(2),i=r(5),o=r(99),a=r.n(o),s=r(100),c=r.n(s);t.a=function(e,t){var r=Object(n.c)(e,"div",{position:"absolute",width:"100%",height:"100%",bottom:0,left:0,zIndex:10},""+a.a+(t||c.a));r.firstElementChild.style.display="block";r.lastElementChild.style.display="none";if(!i.e){e.addEventListener("mouseenter",function(){r.lastElementChild.style.display="block"});e.addEventListener("mouseleave",function(){r.lastElementChild.style.display="none"})}Object(n.d)(r.firstElementChild,{position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px"});Object(n.d)(r.lastElementChild,{position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px"});return e}},51:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=(r(6),function(e){var t=e.status,r=e.message;return"error"===t&&(Array.isArray(r)?r.join("\n"):r)})},58:function(e,t,r){"use strict";t.a={extPlayer:"extPlayer",stdPlayer:"stdPlayer",recommendPlayer:"recommendPlayer",recomendVmodePlayer:"recommendVmode",vmodePlayer:"vmode",viqeoPersonlaPlayer:"viqeoPersonalPlayer"}},6:function(e,t,r){"use strict";var n=r(3),i=r(47);t.a=(Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e})({},i.a,Object(n.i)("viqeo-config"))},617:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(6),o=r(13),a=r(618),s=window,c=s.opera,l=navigator,u=l.userAgent,d=l.vendor;o.a.log("Url: "+location.href+", UserAgent: "+(u||d||c));if(!window.VIQEO||!window.VIQEO.run){var p=window.onerror;window.onerror=function(e,t,r,a,s){p&&p(e,t,r,a,s);if(-1!==t.indexOf(i.a.staticUrl)){var c=s?s.toString():e;o.a.log("onerror: "+c);var l={code:101,message:c,referer:location.href,sourceUrl:t,row:r,column:a};Object(n.x)(i.a.errorTrackerUrl,!1,!1,!1,"POST",l)}};window.VIQEO=new a.a;var f=window.onViqeoLoad||[];"function"==typeof f&&(f=[f]);f.forEach(function(e){return e(window.VIQEO)})}document.body?setTimeout(function(){return window.VIQEO.run()},0):document.addEventListener("DOMContentLoaded",function(){return window.VIQEO.run()})},618:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(13),s=r(347),c=r(619),l=r(620),u=r(621),d=r(348),p=r(622),f=r(58),h="Init";t.a=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var o=i(this,e.call(this,r));a.a.log(h+".constructor("+JSON.stringify(r)+")");p.a.forEach(function(e){return new e(o)});o.playersManager=new d.a;o._recommendationLayout=new l.a({viqeo:o,playersManager:o.playersManager,type:f.a.recommendPlayer});o._standartLayout=new c.a({viqeo:o,playersManager:o.playersManager,type:f.a.stdPlayer});o._externalLayout=new u.a({viqeo:o,playersManager:o.playersManager,type:f.a.extPlayer});o._layouts=[o._standartLayout,o._recommendationLayout,o._externalLayout];o._layouts.forEach(function(e){return e.subscribe(o._triggerTracking.bind(o),"Tracking")});o.playersManager.subscribe(o._triggerTracking.bind(o),"Tracking");o.initPersonal={callPlayerMethod:function(e,t,r){o.getPlayers().forEach(function(n){n.getSlotId()===e&&n[t].apply(n,r)})}};return o}o(t,e);t.prototype.run=function(){a.a.log(h+".run()");this._layouts.forEach(function(e){return e.run()})};t.prototype.start=function(e){a.a.log(h+".start("+JSON.stringify(e)+")");this._externalLayout.start(e)};t.prototype.getPlayers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{container:[f.a.stdPlayer,f.a.extPlayer,f.a.recommendPlayer]},t=e.container,r=t;Array.isArray(t)||(r=[t]);var n=[];this._layouts.forEach(function(e){-1!==r.indexOf(e._type)&&(n=n.concat(e.getPlayers()))});return n};t.prototype.getPlayerBy=function(e){a.a.log(h+".getPlayers("+e+")");var t=this.getPlayers(),r=e;"string"==typeof e&&(r=document.querySelector(e));for(var n=void 0,i=0;i<t.length;i+=1){n=t[i];if(r.contains(n.getParent()))break;n=null}return n};t.prototype.setConfig=function(e){a.a.log(h+".setConfig("+JSON.stringify(e)+")");this._config=e;this._triggerTracking({eventName:"ConfigUpdated",options:e})};t.prototype.destroyPlayers=function(){this._layouts.forEach(function(e){return e.destroyPlayers()})};t.prototype.resize=function(){this.getPlayers().forEach(function(e){return e.forceResize()})};t.prototype.createPlayer=function(e){var t=this;return new Promise(function(r){var n=e.videoId;t.subscribeTracking(function(t){(t.slotId===e.videoId||t.originalParams&&t.originalParams.videoSrc===e.videoSrc)&&r(t.player)},"Player:added");if("string"==typeof n&&/^[A-Za-z0-9]+$/.test(n)){t._standartLayout.createPlayer(e);t._standartLayout.run()}else{t._externalLayout.createPlayer(e);t._externalLayout.run()}})};return t}(s.a)},619:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(3),s=r(6),c=r(13),l=r(2),u=r(96),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(e){function t(r){n(this,t);var o=i(this,e.call.apply(e,[this].concat(r)));window.addEventListener("message",o._handleGetMessage.bind(o));return o}o(t,e);t.prototype._handleGetMessage=function(e){var r=e.data,n=e.origin,i=s.a.embedUrl||"*";i=i.replace(/(^\w+:|^)\/\//,"");if(n.replace(/(^\w+:|^)\/\//,"")===i){c.a.log("StandardPlayerLayout._handleGetMessage("+JSON.stringify({data:r,origin:n})+")");var o=JSON.parse(r),a=o.npvid;this._ids[a].frameData=o;this._ids[a].elements.forEach(function(e){var r=e.mark;return Object(l.d)(r,t.getIframeStyles(o,r.parentNode))});this.trigger("Tracking",{eventName:"Init:IframeLoaded",data:o,container:this._type});this.createPlayers()}};t.getIframeStyles=function(e,t){var r=e.vqPlayback,n=e.mediaFiles,i={option:{type:"video"}},o=r?r.find(function(e){return"aspect"===e.option.id})||i:i,a=9/16;if(n)for(var s=0;s<n.length;s+=1){var c=n[s],l=c.type,u=c.width,d=c.height;if("video/mp4"===l){a=d/u;break}}var p=o.option.type;if("smart"===p){p="video";a>.75&&window.innerWidth>window.innerHeight&&(p="4/3")}switch(p){case"square":return{paddingBottom:Math.ceil(100)+"%"};case"custom":var f=o.option,u=f.width,d=f.height;return{width:u+"px",height:d+"px",paddingBottom:"0%"};case"container":return{width:t.offsetWidth,height:t.offsetHeight,paddingBottom:"0%"};case"16/9":return{paddingBottom:Math.ceil(56.25)+"%"};case"9/16":return{paddingBottom:Math.ceil(16/9*100)+"%"};case"4/3":return{paddingBottom:Math.ceil(75)+"%"};default:return{paddingBottom:Math.ceil(100*a)+"%"}}};t.prototype._requestIframeData=function(e,t){var r=this;if(!this._ids[t].frameData&&e.parentNode){e.contentWindow&&e.contentWindow.postMessage("requestData","*");setTimeout(function(){r._requestIframeData(e,t)},100)}};t.createLabel=function(e){var t=e.videoId,r=e.profileId,n=e.presetId,i=document.createElement("div");i.className+="viqeo-embed";i.setAttribute("data-vnd",t);i.setAttribute("data-profile",r);var o=document.createElement("iframe"),a=s.a.embedUrl+"/embed/?vid="+t;n&&(a=a+"&presetId="+n);o.src=a;o.allowFullscreen=!0;i.appendChild(o);Object(l.d)(i,{display:"none"});return i};t.replaceOldStarter=function(e){var r=e.querySelectorAll("script[data-vnd]");Array.from(r).forEach(function(e){e.parentNode.insertBefore(t.createLabel({profileId:e.getAttribute("data-profile"),videoId:e.getAttribute("data-vnd")}),e);Object(l.r)(e)})};t.replaceEmbedTag=function(e){var t=document.createElement("iframe");t.src=e.src;t.width=0;t.height=0;e.parentNode.appendChild(t)};t.prototype.findElements=function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;t.replaceOldStarter(r);var n=r.querySelectorAll(".viqeo-embed[data-vnd]");!n.length&&r.classList.contains("viqeo-embed")&&(n=[r]);n.length&&(this._profileId=n[0].getAttribute("data-profile"));this.parseIds(n,"data-vnd");Array.from(n).forEach(function(r){var n=r.getAttribute("data-vnd"),i=r.querySelector("embed");i&&t.replaceEmbedTag(i);e._requestIframeData(r.querySelector("iframe"),n)});var i=this.getNotLoadedIds();if(i.length){c.a.log("StandardPlayerLayout Founded ids="+JSON.stringify(i));this.loadData().then(this.dataLoaded.bind(this))}this.createPlayers()};t.prototype.dataLoaded=function(e){var t=this,r=e.role;e.players.forEach(function(e){t._ids[e.requestedParam].initData=d({},e);t._ids[e.requestedParam].elements.forEach(function(n){var i=n.getPlayer;i&&i.then(function(n){n.loadInit(d({},e,{data:t._ids[e.requestedParam].frameData}));"editor"===r&&n.forceResize()})})})};t.prototype.getPlayer=function(e){return this.playersManager.createPlayer(d({},e,{options:{disableEmbed:!0}}))};t.prototype.getUrl=function(){var e=this.getNotLoadedIds(),t=this._profileId;return Object(a.b)(s.a.baseUrl+"/data/startup",{video:e,profile:t,referer:this.getReferer(),title:document.title})};t.prototype.createPlayer=function(e){e.parent.appendChild(t.createLabel(e))};return t}(u.a)},620:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(3),s=r(6),c=r(13),l=r(96),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(e){function t(){n(this,t);return i(this,e.apply(this,arguments))}o(t,e);t.prototype.findElements=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,t=e.querySelectorAll(".viqeo-embed[data-playerId]");t.length&&(this._profileId=t[0].getAttribute("data-profile"));this.parseIds(t,"data-playerId");var r=this.getNotLoadedIds();if(r.length){c.a.log("RecommendationPlayerLayout Founded ids="+JSON.stringify(r));this.loadData().then(this.dataLoaded.bind(this))}this.createPlayers()};t.prototype.getPlayer=function(e){return this.playersManager.createPlayer(u({},e,{options:{hideEditor:!0},playerId:e.requestedParam}))};t.prototype.dataLoaded=function(e){var t=this;e.players.forEach(function(e){t._ids[e.requestedParam].frameData=e.data;t._ids[e.requestedParam].initData=u({},e)});this.createPlayers()};t.prototype.getUrl=function(){var e=this.getNotLoadedIds(),t=this._profileId;return Object(a.b)(s.a.baseUrl+"/data/startup",{playerId:e,profile:t,referer:this.getReferer(),title:document.title})};return t}(l.a)},621:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(37),s=r.n(a),c=r(6),l=r(13),u=r(3),d=r(96),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(e){function t(){n(this,t);return i(this,e.apply(this,arguments))}o(t,e);t.createLabel=function(e){var t=e.profileId,r=e.playerId,n=e.previewSrc,i=e.videoSrc,o=document.createElement("div");o.className="viqeo-external_player";var a={videoSrc:i,previewSrc:n?Object(u.A)(n):"",playerId:r,profile:t};Object.keys(a).forEach(function(e){a[e]&&o.setAttribute("data-"+e,a[e])});o.setAttribute("data-original",JSON.stringify(e));return o};t.prototype.start=function(e){var r=e.players,n=document.querySelector('script[src*="'+s.a.initExternalPlayer+'"]'),i=n.getAttribute("data-profile"),o=n.getAttribute("data-playerId");r.forEach(function(e){var r=e.selector,n=document.querySelector(r),a=t.createLabel(p({},e,{profileId:i,playerId:o}));n&&n.appendChild(a)});this.run()};t.prototype.parseIds=function(e,t){var r=this;Array.from(e).forEach(function(e){var n=e.getAttribute(t),i=Object(u.s)(n),o=n;i&&(o=i[0].url);r._ids[o]||r._createEmptyId(o);r._ids[o].elements.find(function(t){return t.mark===e})||r._ids[o].elements.push({mark:e,getPlayer:null})})};t.prototype.findElements=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,t=document.querySelectorAll(".viqeo-external_player");t.length||"viqeo-external_player"!==e.className||(t=[e]);if(t.length){this._profileId=t[0].getAttribute("data-profile");this._playerId=t[0].getAttribute("data-playerId")}Array.from(t).forEach(function(e){e.setAttribute("data-videoSrc",Object(u.A)(e.getAttribute("data-videoSrc")))});this.parseIds(t,"data-videoSrc");var r=this.getNotLoadedIds();if(r.length){l.a.log("ExternalPlayerLayout Founded ids="+JSON.stringify(r));this.loadData().then(this.dataLoaded.bind(this))}this.createPlayers()};t.prototype.dataLoaded=function(e){var t=this,r=e.preload;e.players.forEach(function(e){t._ids[e.requestedParam].frameData=e.data;t._ids[e.requestedParam].initData=p({},e,{preload:r})});this.createPlayers()};t.prototype.getPlayer=function(e,t){var r=t.getAttribute("data-original");r&&(r=JSON.parse(r));return this.playersManager.createPlayer(p({},e,{profileId:this._profileId,options:{disableVideoCors:!0,preload:e.preload,hideEditor:!0},paramsForGlobalEvent:{originalParams:r}}))};t.prototype.getUrl=function(){return Object(u.b)(c.a.baseUrl+"/data/startup")};t.prototype.getValuesForRequest=function(){var e=this,t={profile:this._profileId,referer:this.getReferer(),externalVideos:[],title:document.title};this._playerId&&(t.playerId=[this._playerId]);this.getNotLoadedIds().forEach(function(r){var n=e._ids[r].elements,i=n.length>0?n[0].mark:null;if(i){var o=i.getAttribute("data-previewSrc"),a=i.getAttribute("data-videoSrc"),s=Object(u.s)(i.getAttribute("data-videoSrc")),c={videoSrc:s||a};o&&(c.previewSrc=o);t.externalVideos.push(c)}});return t};t.prototype.createPlayer=function(e){var r=e.videoId,n=e.parent,i=r;"string"==typeof i&&(i=JSON.parse(r));n.appendChild(t.createLabel(p({},e,i)))};return t}(d.a)},622:function(e,t,r){"use strict";var n=r(623),i=r(626),o=r(343),a=r(628),s=r(629),c=r(630),l=r(344);t.a=[n.a,i.a,a.a,o.a,s.a,c.a,r(631).a,l.a,r(632).a,r(346).a,r(345).a]},623:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(3),s=r(6),c=r(13),l=r(28),u=r(25),d=r(145),p=r(624),f=r(625),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y="PageRollController";t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._startAdvertAfter=null;o._startAdvertRelative=null;o._videoGalleryOpened=!1;o._initAdvertLoad=new Promise(function(){});o._players=[];o._hasMultipleAdvert=!1;o._controller=new p.a(r);o._data=null;o._initEvents();return o}o(t,e);t.prototype._initEvents=function(){this.subscribeTracking(this._startupLoaded.bind(this),"Init:StartupDataLoaded");this.subscribeTracking(this._startTimer.bind(this),"Player:videoStarted");this.subscribeTracking(this._onVideoGalleryShow.bind(this),"VideoGallery:Opened");this.subscribeTracking(this._onVideoGalleryHide.bind(this),"VideoGallery:Hidden");this.subscribeTracking(this._onPlayerAdded.bind(this),"Player:added");this.subscribeTracking(this._onAdvertLoaded.bind(this),"Player:advLoaded");this.subscribeTracking(this._onUserAction.bind(this),"Player:userAction");this.subscribeTracking(this._onRemovedPlayer.bind(this),"Player:destroyed");this.subscribeTracking(this._endedAdvert.bind(this),"Player:advEnded");this.subscribeTracking(this._checkConfig.bind(this),"ConfigUpdated")};t.prototype._onRemovedPlayer=function(e){var t=e.player,r=this._players.findIndex(function(e){return e.player===t});-1!==r&&this._players.splice(r,1)};t.prototype._onUserAction=function(e){var t=e.player;e.trackingParams.name===d.a.BigPlay&&(this._players.find(function(e){return e.player===t}).needStart=!0)};t.prototype._checkConfig=function(e){var t=e.options,r=t.amp,n=t.url;r&&(this._controller=new f.a(this.viqeo,h({},r,{url:n})))};t.prototype._onAdvertLoaded=function(e){this._players.find(function(t){return e.player===t.player}).hasAdvertLoaded=!0};t.prototype._onPlayerAdded=function(e){this._players.push({player:e.player,container:e.container,hasAdvertInit:!1,hasAdvertStart:!1,hasAdvertLoaded:!1,hasTriggered:!1,time:0})};t.prototype._requestAdvert=function(){var e=this,t=this._getActivePlayer(),r=this._players.find(function(e){return t===e.player});r.hasAdvertInit||this._initAdvertLoad.then(function(n){var i=e._players.find(function(e){return e.hasAdvertStart});if((e._hasMultipleAdvert||!i)&&t===e._getActivePlayer()){r.hasAdvertInit=!0;t.initAdvert(n);c.a.log(y+"._requestAdvert(). \n              time:"+r.time+" \n              videoId:"+t.getSlotId()+" \n              currentTime:"+t.getCurrentTime())}})};t.prototype._startAdvert=function(){var e=this,t=this._getActivePlayer(),r=this._players.find(function(e){return t===e.player});r.hasAdvertStart||this._initAdvertLoad.then(function(){var n=e._players.find(function(e){return e.hasAdvertStart});if((e._hasMultipleAdvert||!n)&&t===e._getActivePlayer()){if(r.hasAdvertLoaded){r.hasAdvertStart=!0;e._controller.beforeStartAdvert();t.startAdvert();c.a.log(y+"._startAdvert(). \n              time:"+r.time+" \n              videoId:"+t.getSlotId()+" \n              currentTime:"+t.getCurrentTime())}var i=e._players.find(function(e){return e.hasTriggered});if(e._hasMultipleAdvert&&!r.hasTriggered){r.hasTriggered=!0;t.triggerTracker("advStart");t.trigger("advStart")}else if(!e._hasMultipleAdvert&&!i){r.hasTriggered=!0;t.triggerTracker("advStart");t.trigger("advStart")}}})};t.prototype._getActivePlayer=function(){var e=this,t=this._players.find(function(t){var r=t.player,n=r.getSlotId(),i=!1;e._data&&(i=e._data.players.find(function(e){return e.requestedParam===n&&e.disableAdvert}));return r.hasVisible()&&!i&&r.inStatus([u.a.STARTED,u.a.PLAYED,u.a.REPLAYED])});return t?t.player:null};t.prototype._startTimer=function(){var e=this;if(!this._timer){c.a.log(y+"._startTimer()");this._timer=setInterval(function(){var t=e._getActivePlayer(),r=e._players.find(function(e){return e.player===t});if(!e._videoGalleryOpened&&t){r.time+=.5;c.a.log(y+"._startTimer(). \n          time:"+r.time+" \n          videoId:"+t.getSlotId()+" \n          currentTime:"+t.getCurrentTime());e._controller.updateTime(.5,t.getSlotId());if(r.needStart){e._requestAdvert();e._startAdvert()}else if(e._hasMultipleAdvert){r.time>=3&&e._requestAdvert();r.time>=e._startAdvertAfter&&e._startAdvert()}else e._controller.getSumTime().then(function(r){r>=3&&e._requestAdvert();t.getCurrentTime()>e._getPaddingTime()&&t.getDuration()-t.getCurrentTime()>e._getPaddingTime()&&r>=e._getStartTime()&&e._startAdvert()},function(){return e._destroy()})}},500)}};t.prototype._getPaddingTime=function(){return this._startAdvertAfter>=this._getAllPlayerDuration()?0:2};t.prototype._getStartTime=function(){var e=this._getActivePlayer(),t=this._getAllPlayerDuration();if(e&&this._startAdvertAfter>=t&&"loop"!==e.getPlayback("videofinished").type)return e.getDuration()-2;var r=t*this._startAdvertRelative;return Math.min(r,120)<this._startAdvertAfter?this._startAdvertAfter:r};t.prototype._clearTimer=function(){clearInterval(this._timer);this._timer=!1};t.prototype._getAllPlayerDuration=function(){var e=this.viqeo.getPlayers(),t=0;e.forEach(function(e){t+=e.getDuration()});return t};t.prototype._endedAdvert=function(){this._hasMultipleAdvert||this._destroy()};t.prototype._startupLoaded=function(e){var t=this,r=e.data,n=r.pageRollAdvert,i=void 0===n?{}:n;c.a.log(y+"._startupLoaded("+JSON.stringify(i)+")");var o=i.startAdvertAfter,l=i.startAdvertRelative,u=i.hasMultipleAdvert,d=i.dataUrl,p=i.moduleUrl;this._data=r;this._startAdvertAfter=o||15;this._startAdvertRelative=l||0;this._hasMultipleAdvert=u;var f=s.a.advertModuleUrl||p;f?this._initAdvertLoad=new Promise(function(e,r){Object(a.p)(s.a.proxyUrl+"/?url="+Object(a.A)(f),function(){e({dataUrl:s.a.advertDataUrl||d,format:{name:"viqeoplayerroll"}})},function(){t._destroy();r()})}):this._destroy()};t.prototype._onVideoGalleryShow=function(){this._videoGalleryOpened=!0};t.prototype._onVideoGalleryHide=function(){this._videoGalleryOpened=!1;this.viqeo.getPlayers().find(function(e){return e.inStatus([u.a.STARTED,u.a.PLAYED,u.a.REPLAYED])})&&this._startTimer()};t.prototype._destroy=function(){c.a.log(y+"._destroy()");e.prototype.destroy.call(this);this._controller.destroy();this._clearTimer()};return t}(l.a)},624:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(349);t.a=function(e){function t(){n(this,t);return i(this,e.apply(this,arguments))}o(t,e);t.prototype.getSumTime=function(){var e=this;return new Promise(function(t){return t(e.totalTime)})};return t}(a.a)},625:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){var e=this._options;return e.url+"+"+e.pageViewId}function s(){var e=this;y.a.log(_+" loadInfo()");return new Promise(function(t,r){Object(f.x)(h.a.ampAdvertUrl+"/v1/amp/get",function(e){try{var n=JSON.parse(e.responseText);y.a.log(_+" success loadInfo() "+e.responseText);if("error"===n.status){r(n.message);return}t(n)}catch(e){y.a.log(_+" failed parse loadInfo() "+e);r(""+e)}},function(e){y.a.log(_+" failed loadInfo() "+e);r(e)},!1,"POST",{id:a.call(e)})})}function c(e){var t=e.player;if(!this._hasPlaying){this._hasPlaying=!0;y.a.log(_+" playerPlaying("+t.getSlotId()+")");this._stateLoad=s.call(this)}}function l(e){var t=this,r=e.player;if(this._hasPlaying){this._hasPlaying=!1;y.a.log(_+" playerStopped("+r.getSlotId()+")");this._stateLoad.then(function(e){var n=e.data,i=n.totalTime;n.advertStarted||t._trackDebounce({videoId:r.getSlotId(),time:t.totalTime+i});t.totalTime=0});this._stateLoad=null}}function u(e){var t=this,r=e.data,n=r.advertStarted,i=r.totalTime;return new Promise(function(e,r){n?r():e(i+t.totalTime)})}function d(e){var t=JSON.stringify(e);if(this._trackCaches[t])y.a.log(_+" track("+t+") cached");else{this._trackCaches[t]=!0;y.a.log(_+" track("+t+")");Object(f.x)(h.a.ampAdvertUrl+"/v1/amp/track",function(e){y.a.log(_+" success track() "+e.responseText)},function(e){y.a.log(_+" failed track() "+e)},!1,"POST",[m({},e,{id:a.call(this)})])}}function p(){y.a.log(_+" startAdvert()");Object(f.x)(h.a.ampAdvertUrl+"/v1/amp/adv",function(e){y.a.log(_+" success startAdvert() "+e.responseText)},function(e){y.a.log(_+" failed track() "+e)},!1,"POST",{id:a.call(this)});this.destroy()}var f=r(3),h=r(6),y=r(13),v=r(143),b=r.n(v),g=r(349),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_="AmpController";t.a=function(e){function t(r,o){n(this,t);var a=i(this,e.call(this,r,o));a._trackCaches={};a._hasPlaying=!1;a._stateLoad=null;a._trackDebounce=b()(2e3,d.bind(a));y.a.log(_+".constructor(viqeo, "+JSON.stringify(o)+")");a.subscribeTracking(c.bind(a),{eventName:["Player:started","Player:played","Player:replayed"]});a.subscribeTracking(l.bind(a),{eventName:["Player:ended","Player:paused"]});return a}o(t,e);t.prototype.beforeStartAdvert=function(){p.call(this)};t.prototype.updateTime=function(t,r){var n=this;y.a.log(_+".updateTime("+t+", "+r+")");e.prototype.updateTime.call(this,t,r);this._stateLoad?this._stateLoad.then(function(e){var t=e.data,i=t.totalTime;t.advertStarted||n._trackDebounce({videoId:r,time:n.totalTime+i})}):y.a.log(_+".updateTime("+t+", "+r+") not load info")};t.prototype.getSumTime=function(){return Promise.resolve(this._stateLoad).then(u.bind(this))};return t}(g.a)},626:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(2),s=r(3),c=r(5),l=r(76),u=r(627),d=r.n(u),p=r(10),f=r(28),h=r(58),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b={floatingRight:"3%",floatingBottom:"4%"};t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._config={floatingWidth:230,floatingTop:"",floatingRight:"",floatingBottom:"",floatingLeft:"",playerNumber:0,playerDesktopFactor:.25,playerMobileFactor:.25,floatingTranslateX:0,floatingTranslateY:0,slotBackground:"",enableCloseButton:!0};o._flyPlayer=null;o._hasCollapsed=!1;o._hasVisible=!1;o._configLoaded=!1;o._players=[];o._initEvents();return o}o(t,e);t.prototype._initEvents=function(){this.subscribeTracking(this._checkConfig.bind(this),"ConfigUpdated");this.subscribeTracking(this._playerAdded.bind(this),{eventName:"Player:added",container:[h.a.stdPlayer,h.a.extPlayer,h.a.recommendPlayer]});this.subscribeTracking(this._visibilityChanged.bind(this),"Player:visibilityChanged");this.subscribeTracking(this._advStarted.bind(this),"Player:advStarted");this.subscribeTracking(this._advEnded.bind(this),"Player:advEnded");this.addEvent(window,"scroll",this._onScroll.bind(this));this.addEvent(window,"resize",this._onResize.bind(this))};t.prototype._advEnded=function(e){var t=e.player;this._players.find(function(e){return e.player===t}).hasAdvertProgress=!1;if(this._flyPlayer){var r=this._flyPlayer.getWrapper(),n=r.querySelector(".flyPlayer_close");n&&Object(a.d)(n,{display:"block"})}};t.prototype._advStarted=function(e){var t=e.player;this._players.find(function(e){return e.player===t}).hasAdvertProgress=!0;if(this._flyPlayer){var r=this._flyPlayer.getWrapper(),n=r.querySelector(".flyPlayer_close");n&&Object(a.d)(n,{display:"none"})}};t.prototype._onResize=function(){var e=this._flyPlayer;if(e&&this._hasCollapsed){var t=e.getParent(),r=t.offsetWidth;Object(a.d)(t,{width:r+"px",height:""+r*e.getVideoSlotAspect()})}};t.prototype._createCloseButton=function(e){var t=this,r=e.getWrapper(),n=Object(l.a)(d.a,Object(a.c)(r,"div",{position:"absolute",top:"-13px",right:"-13px",width:"26px",height:"26px",zIndex:100}),function(){t._expand(e);t.destroy()});n.classList.add("flyPlayer_close");return n};t.prototype._collapse=function(e){var t=this._config,r=t.floatingWidth,n=t.floatingTop,i=t.floatingRight,o=t.floatingBottom,c=t.floatingLeft,l=t.slotBackground,u=t.floatingTranslateX,d=t.floatingTranslateY,f=t.enableCloseButton,h=e.getParent(),y=e.getWrapper(),v=e.getSize(),b=v.height,g=v.width;e.startFly();Object(a.d)(h,{width:""+g,height:b+"px",background:l});e.resizeAd(r,r*e.getVideoSlotAspect());Object(a.d)(y,{boxShadow:"0 0 10px #000",position:"fixed",opacity:0,top:Object(s.q)(n),right:Object(s.q)(i),bottom:Object(s.q)(o),left:Object(s.q)(c),transform:"translate("+Object(s.q)(u)+", "+Object(s.q)(d)+")",zIndex:p.a.flyPlayer,fontSize:0,lineHeight:0});setTimeout(function(){Object(a.d)(y,{opacity:1,transition:"opacity 2s"})},0);if(f){var m=y.querySelector(".flyPlayer_close");m||(m=this._createCloseButton(e));this._players.find(function(t){return t.player===e}).hasAdvertProgress?Object(a.d)(m,{display:"none"}):Object(a.d)(m,{display:"block"})}this._hasCollapsed=!0};t.prototype._expand=function(e){var t=e.getParent(),r=e.getWrapper();e.endFly();Object(a.d)(r,{position:"",transition:"",opacity:1,top:0,right:0,bottom:0,left:0,transform:"translate(0, 0)",boxShadow:"none"});var n=r.querySelector(".flyPlayer_close");n&&Object(a.d)(n,{display:"none"});e.forceResize();Object(a.d)(t,{width:"100%",height:"100%"});this._hasCollapsed=!1};t.prototype._onScroll=function(){if(this._flyPlayer&&this._hasVisible){var e=Object(a.j)(this._flyPlayer.getParent()),t=this._config,r=t.playerDesktopFactor,n=t.playerMobileFactor,i=c.e?n:r;!this._hasCollapsed&&this._flyPlayer.getVisible()<=i?this._collapse(this._flyPlayer):this._hasCollapsed&&e>=i&&this._expand(this._flyPlayer)}};t.prototype._visibilityChanged=function(e){var t=e.player;this._flyPlayer&&this._flyPlayer===t&&!this._hasVisible&&(this._hasVisible=this._flyPlayer.hasVisible())};t.prototype._playerAdded=function(e){this._players.push({player:e.player,hasAdvertProgress:!1});this._run()};t.prototype._checkConfig=function(e){var t=e.options,r=t.flyPlayer;r&&(this._configLoaded=!0);"object"===(void 0===r?"undefined":v(r))?this._config=y({},this._config,r):"boolean"==typeof r&&(this._config=y({},this._config,b));this._run()};t.prototype._run=function(){if(this._configLoaded&&!this._flyPlayer){var e=this._config.playerNumber,t=this.viqeo.getPlayers({container:[h.a.stdPlayer,h.a.recommendPlayer,h.a.extPlayer]}),r=t[e];if(r){this._flyPlayer=r;this._hasVisible||(this._hasVisible=this._flyPlayer.hasVisible())}}};return t}(f.a)},627:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24">\n  <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="white"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},628:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(3),s=r(25),c=r(6),l=r(28),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d=.5,p=[3,5,10,15,20,30,60,90,120,180,300,600,1200];t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._queueEvents=[];o._trackerParams=null;o._playerTrackerParams={};o._data=[];o._players={};o._events=[{playerName:"Player:galleryStarted",trackingName:"videomode"},{playerName:"Player:videoPaused",trackingName:"pause"},{playerName:"Player:videoPlayed",trackingName:"resume"},{playerName:"Player:rewind",trackingName:"rewind"},{playerName:"Player:videoStarted",trackingName:"start"},{playerName:"Player:ended",trackingName:o._videoEnded.bind(o)},{playerName:"Player:videoReplayed",trackingName:"replay"},{playerName:"Player:videoStarted",trackingName:"impression"},{playerName:"Player:firstShowing",trackingName:"visible"},{playerName:"Player:advStarted",trackingName:"adv"},{playerName:"Player:advStart",trackingName:"advVisible"},{playerName:"Player:fullscreenStarted",trackingName:"fullscreen"},{playerName:"Player:autoplayDisabled",trackingName:"autoplayBlocked"},{playerName:"Player:userAction",trackingName:o._userActionTracking.bind(o)},{playerName:"Player:currentTimeUpdated",trackingName:o._currentTimeUpdated.bind(o)}];setInterval(o._checkTime.bind(o),1e3*d);o.subscribeTracking(o._eventTriggered.bind(o));o.subscribeTracking(o._startupLoaded.bind(o),"Init:StartupDataLoaded");o.subscribeTracking(o._playerAdded.bind(o),"Player:added");o.subscribeTracking(o._playerDestroyed.bind(o),"Player:destroyed");o.subscribeTracking(o._slotIdUpdated.bind(o),"Player:slotIdUpdated");return o}o(t,e);t.prototype._playerAdded=function(e){var t=e.player,r=e.container,n=t.getSlotId();this._players[n]||(this._players[n]={player:t,firstQuartile:!1,midpoint:!1,thirdQuartile:!1,complete:!1,lastTime:0});this._data.push({player:t,container:r,currentTime:0,lastTime:0})};t.prototype._slotIdUpdated=function(e){var t=this,r=e.player,n=r.getSlotId(),i=Object.keys(this._players).find(function(e){return t._players[e].player===r});if(i){this._players[n]={player:this._players[i].player,firstQuartile:!1,midpoint:!1,thirdQuartile:!1,complete:!1,lastTime:0};this._playerTrackerParams[n]=this._playerTrackerParams[i];var o=this._data.findIndex(function(e){return e.player===r});this._data[o].currentTime=0;this._data[o].lastTime=0}};t.prototype._playerDestroyed=function(e){for(var t=e.player,r=0;r<this._data.length;r+=1)this._data[r].player===t&&this._data.splice(r,1)};t.prototype._startupLoaded=function(e){var t=this,r=e.data,n=r.trackingParams,i=r.players;this._trackerParams=n;i.forEach(function(e){var r=e.requestedParam,n=e.data,i=e.trackingParams;t._playerTrackerParams[n?n.npvid:r]=i});var o=Array.from(this._queueEvents);this._queueEvents=[];o.forEach(function(e){var r=e.videoId;t.send(u({},e,{rand:t._playerTrackerParams[r]?t._playerTrackerParams[r].rand:null},t._playerTrackerParams[r]))})};t.prototype.getReferer=function(){var e=this.viqeo._config.url;return e||location.href};t.normalizeValue=function(e){return e.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()})};t.normalizeDataForServer=function(e){var r={};Object.keys(e).forEach(function(n){r[t.normalizeValue(n)]=e[n]});return r};t.prototype.getPlayerParams=function(e){var t=e.getSlotId();return u({videoId:t,profileId:e.getProfileId(),rand:this._playerTrackerParams[t]?this._playerTrackerParams[t].rand:null},this._playerTrackerParams[t])};t.prototype.send=function(e){if(e.rand){var r=t.normalizeDataForServer(u({referer:this.getReferer()},this._trackerParams,e));Object(a.v)(Object(a.b)(c.a.statsUrl+"/stats",r))}else this._queueEvents.push(e)};t.prototype._checkTime=function(){var e=this;this._data.forEach(function(r,n){var i=r.player,o=r.currentTime,a=r.lastTime,c=r.container;if(i.inStatus([s.a.PLAYED,s.a.REPLAYED,s.a.STARTED])){e._data[n].currentTime+=d;p.forEach(function(r){if(a<r&&o>=r){e._data[n].lastTime=o;e.send(u({event:r+"s",container:t.normalizeValue(c)},e.getPlayerParams(i)))}})}})};t.prototype._eventTriggered=function(e){var r=this,n=e.eventName,i=e.player,o=e.container;this._events.forEach(function(a){var s=a.playerName,c=a.trackingName;n===s&&("string"==typeof c?r.send(u({event:c,container:t.normalizeValue(o)},r.getPlayerParams(i))):"function"==typeof c&&c(e))})};t.prototype._userActionTracking=function(e){var r=e.player,n=e.container,i=e.trackingParams,o=i.name;i.disablePing||this.send(u({event:"action"+o,container:t.normalizeValue(n)},this.getPlayerParams(r)))};t.prototype._currentTimeUpdated=function(e){var r=e.player,n=e.container,i=r.getCurrentTime(),o=r.getSlotId(),a=r.getDuration(),s=this._players[o],c=s.firstQuartile,l=s.midpoint,d=s.thirdQuartile,p=s.lastTime;if(!c&&p<.25*a&&i>=.25*a){this._players[o].firstQuartile=!0;this.send(u({event:"firstQuartile",container:t.normalizeValue(n)},this.getPlayerParams(r)))}if(!l&&p<.5*a&&i>=.5*a){this._players[o].midpoint=!0;this.send(u({event:"midpoint",container:t.normalizeValue(n)},this.getPlayerParams(r)))}if(!d&&p<.75*a&&i>=.75*a){this._players[o].thirdQuartile=!0;this.send(u({event:"thirdQuartile",container:t.normalizeValue(n)},this.getPlayerParams(r)))}this._players[o].lastTime=i};t.prototype._videoEnded=function(e){var r=e.player,n=e.container,i=r.getSlotId();if(!this._players[i].complete){this._players[i].complete=!0;this.send(u({event:"complete",container:t.normalizeValue(n)},this.getPlayerParams(r)))}};return t}(l.a)},629:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(28);t.a=function(e){function t(r){n(this,t);var o=i(this,e.call.apply(e,[this].concat(r)));o._players=[];o._initEvents();return o}o(t,e);t.prototype._initEvents=function(){this.subscribeTracking(this._addedPlayer.bind(this),"Player:added");this.subscribeTracking(this._selectedQuality.bind(this),"Player:qualitySelected");this.subscribeTracking(this._settingsPanelOpened.bind(this),"Player:settingsPanelOpened")};t.prototype._addedPlayer=function(e){this._players.push(e.player)};t.prototype._selectedQuality=function(e){this._players.forEach(function(t){t!==e.player&&t.setQuality(e.trackingParams.quality)})};t.prototype._settingsPanelOpened=function(e){this._players.forEach(function(t){t!==e.player&&t.hideSettingsPanel()})};return t}(a.a)},630:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(92),s=r(13),c=r(28),l=r(96),u=r(58),d="CacheIframeController";t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._players={};o._requested=[];o._initEvents();return o}o(t,e);t.prototype._initEvents=function(){this.subscribeTracking(this._startupLoaded.bind(this),{eventName:"Init:StartupDataLoaded",container:u.a.stdPlayer});this.subscribeTracking(this._iframeLoaded.bind(this),{eventName:"Init:IframeLoaded",container:u.a.stdPlayer});this.subscribeTracking(this._playerAdded.bind(this),{eventName:"Player:added",container:u.a.stdPlayer})};t.prototype._updateData=function(e){var t=this;if(!this._requested.find(function(t){return t===e})){this._requested.push(e);var r=e.getSlotId();Object(a.a)(r).then(function(r){var n=r.items,i=n[0];s.a.log(d+". Meta data loaded: "+JSON.stringify(i));e.init({data:l.a.transformData(i,t.viqeo._config)})},function(e){return s.a.error(d+"._updateData("+r+"): "+e)})}};t.prototype._checkUpdate=function(e,t){var r=this;this._players[e]||(this._players[e]={});if(this._players[e].time){if(this._players[e].time!==t){s.a.log(d+".checkUpdate("+e+", "+t+"). Need reset cache");this._players[e].needUpdate=!0;this._players[e].items&&this._players[e].items.forEach(function(e){return r._updateData(e)})}}else this._players[e].time=t};t.prototype._iframeLoaded=function(e){var t=e.data,r=t.lastVideoUpdate,n=t.npvid;r&&this._checkUpdate(n,r)};t.prototype._startupLoaded=function(e){var t=this;e.data.players.forEach(function(e){t._checkUpdate(e.requestedParam,e.lastUpdate)})};t.prototype._playerAdded=function(e){var t=e.slotId,r=e.player;this._players[t]?this._players[t].items?this._players[t].items.push(r):this._players[t].items=[r]:this._players[t]={items:[r]};this._players[t].needUpdate&&this._updateData(r)};return t}(c.a)},631:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(28);t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._players=[];o._ampConfig=null;o.subscribeTracking(o._playerAdded.bind(o),"Player:added");o.subscribeTracking(o._checkConfig.bind(o),"ConfigUpdated");return o}o(t,e);t.prototype._checkConfig=function(e){var t=e.options,r=t.amp;r&&(this._ampConfig=r)};t.prototype._playerAdded=function(e){var t=e.player;this._players.push(t);this._ampConfig&&t.setVisiblePercent(1)};return t}(a.a)},632:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(28);t.a=function(e){function t(r){n(this,t);var o=i(this,e.call(this,r));o._scrollTop=0;o.subscribeTracking(function(){return window.scrollTo(0,o._scrollTop)},"Player:fullscreenEnded");o.subscribeTracking(o._onClickedFullScreen.bind(o),"Player:requestFullscreen");return o}o(t,e);t.prototype._onClickedFullScreen=function(){var e=document.documentElement;this._scrollTop=(window.pageYOffset||e.scrollTop)-(e.clientTop||0)};return t}(a.a)},76:function(e,t,r){"use strict";var n=r(2),i=r(50),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(e,t,r,a){var s=Object(n.c)(t,"div",{width:"100%",height:"100%",position:"relative",cursor:"pointer",zIndex:100});r&&s.addEventListener("click",function(e){r(e)});var c={position:"absolute",top:0,left:0,width:"100%",height:"100%"},l=Object(n.c)(s,"div",o({},c,{zIndex:20}),e);Object(n.d)(l.firstElementChild,{position:"absolute",top:0,left:0,width:"100%",height:"100%"});Object(i.a)(s,a);return s}},77:function(e,t,r){"use strict";t.a={EDITOR:"editor",USER:"user"}},92:function(e,t,r){"use strict";r.d(t,"b",function(){return s});r.d(t,"a",function(){return c});var n=r(51),i=r(6),o=r(3),a=i.a.baseUrl,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"popular";return new Promise(function(i,s){Object(o.x)(Object(o.b)(a+"/profile/"+e+"/"+r,t),function(e){try{var t=JSON.parse(e.responseText),r=Object(n.a)(t);if(r){s(r);return}i(t)}catch(e){s("Failed to response recommendation: "+e)}},function(){s("Failed to response reccomendation")})})},c=function(e){return new Promise(function(t,r){Object(o.x)(a+"/data/"+e+"/metadata",function(e){try{var i=JSON.parse(e.responseText),o=Object(n.a)(i);if(o){r(o);return}t(i)}catch(e){r("Failed to response recommendation: "+e)}},function(){r("Failed to resonse getMetaData")})})}},96:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=r(3),s=r(2),c=r(13),l=r(41),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.a=function(e){function t(r){var o=r.playersManager,a=r.type,s=r.viqeo;n(this,t);var c=i(this,e.call(this));c._hasObserveDom=!1;c._profileId=null;c._ids={};c._type=a;c._players=[];c.playersManager=o;c._viqeo=s;return c}o(t,e);t.prototype.loadData=function(){var e=this;return new Promise(function(t,r){var n=e.getUrl(),i=e.getValuesForRequest(),o="GET";i&&(o="POST");c.a.log("BaseLayout Init startup url:"+n+" values:"+JSON.stringify(i));c.a.time("BaseLayout Load data url:"+n);e.beforeLoadData();Object(a.x)(n,function(i){c.a.timeEnd("BaseLayout Load data url:"+n);c.a.log("BaseLayout Data startup "+i.responseText);try{var o=JSON.parse(i.responseText),a=o.status,s=o.message;if("error"!==a){t(o);e._loadData(o);e.trigger("Tracking",{container:e._type,eventName:"Init:StartupDataLoaded",data:o,profileId:e._profileId})}else r(s)}catch(e){r("Failed to parse profile json: "+e)}},function(e){c.a.error("BaseLayout Failed load init: "+e);r(e)},!1,o,i)})};t.prototype._loadData=function(e){e.dynamic&&this._initDynamicPlayer();this.playersManager.initLoaded(e)};t.prototype._initDynamicPlayer=function(){var e=this;if("undefined"!=typeof MutationObserver&&!this._hasObserveDom){this._hasObserveDom=!0;var t=new MutationObserver(function(t){t.forEach(function(t){var r=t.addedNodes;Array.from(r).forEach(function(t){t.querySelectorAll&&e.findElements(t)})})}),r={childList:!0,attributes:!1,characterData:!1,subtree:!0};t.observe(document.body,r)}};t.prototype.run=function(){this.findElements()};t.prototype._createEmptyId=function(e){this._ids[e]={frameData:null,initData:null,hasLoad:!1,elements:[]}};t.prototype.parseIds=function(e,t){var r=this;Array.from(e).forEach(function(e){var n=e.getAttribute(t);r._ids[n]||r._createEmptyId(n);r._ids[n].elements.find(function(t){return t.mark===e})||r._ids[n].elements.push({mark:e,getPlayer:null})})};t.prototype.getNotLoadedIds=function(){var e=this,t=[];Object.keys(this._ids).forEach(function(r){e._ids[r].hasLoad||t.push(r)});return t};t.createSlot=function(e){var t=document.createElement("div");t.className="viqeo-slot";t.setAttribute("data-video_id",e);return t};t.transformAmpData=function(e){var t=Object(a.d)(e);t.vqPlayback.forEach(function(e){"videostart"===e.option.id&&(e.option.type="click");if("aspect"===e.option.id){e.option.type="container";e.option.framing="crop"}});return t};t.transformStandaloneData=function(e){var t=Object(a.d)(e);t.vqPlayback.forEach(function(e){if("aspect"===e.option.id){e.option.type="container";e.option.framing="fit"}});return t};t.prototype.getReferer=function(){var e=this._viqeo._config.url;return e||location.href};t.transformData=function(e,r){var n=r.amp,i=r.standalone;return n?t.transformAmpData(e):i?t.transformStandaloneData(e):e};t.prototype.createPlayers=function(){var e=this;Object.keys(this._ids).forEach(function(r){var n=e._ids[r],i=n.elements,o=n.frameData,a=n.initData;o&&i.forEach(function(n,l){var d=n.mark;if(!n.getPlayer){var p=t.createSlot(r);d.parentNode.insertBefore(p,d);c.a.time("BaseLayout Video in player load id="+r);i[l].getPlayer=e.getPlayer(u({},a,{slot:p,mark:d,originalSlot:d.parentNode,data:t.transformData(o,e._viqeo._config),profileId:e._profileId,trackerFn:e._triggerTrackerPlayer.bind(e)}),d);i[l].getPlayer.then(function(t){var n=!!d.querySelector("iframe")||d.children.length>0,i=o.mediaFiles||[],a=i.find(function(e){return"video/mp4"===(e.type||"")});n&&a&&!e._viqeo._config.amp&&t.getContainer().style.setProperty("display","none","important");a||Object(s.d)(d,{height:0,padding:0,display:"none"});var l=function(){c.a.timeEnd("BaseLayout Video in player load id="+r);Object(s.r)(d);t.getContainer().style.setProperty("display","block","important");t.forceResize()};t.hasReady()?l():t.subscribe(l,"Ready");e.pushPlayer(t)})}})})};t.prototype._triggerTrackerPlayer=function(e,t,r){this.trigger("Tracking",u({eventName:"Player:"+e,slotId:r.getSlotId(),videoId:r.getSlotId(),container:this._type,player:r},r.options.paramsForGlobalEvent,t))};t.prototype.pushPlayer=function(e){this._players.push(e);this.trigger("Tracking",u({eventName:"Player:added",slotId:e.getSlotId(),container:this._type,player:e},e.options.paramsForGlobalEvent))};t.prototype.getPlayers=function(){return this._players};t.prototype.beforeLoadData=function(){var e=this;Object.keys(this._ids).forEach(function(t){e._ids[t].hasLoad=!0})};t.prototype.destroyPlayers=function(){this._players.forEach(function(e){return e.destroy()});this._players=[]};t.prototype.createPlayer=function(){};t.prototype.getPlayer=function(){};t.prototype.findElements=function(){};t.prototype.getUrl=function(){};t.prototype.getValuesForRequest=function(){};return t}(l.a)},99:function(e,t){e.exports='<svg width="100%" height="100%" viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:1.41421;">\n    <g id="svg_1" transform="matrix(0.5,-2.31112e-34,0,0.5,-1,-1)">\n        <circle cx="32" cy="32" r="28" style="fill-opacity:0.301961;"/>\n    </g>\n</svg>\n'}});