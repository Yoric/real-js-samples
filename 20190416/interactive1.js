if(typeof(AdvertInteractive)==="undefined"){window.AdvertInteractive=function(){this.initialize.apply(this,arguments);if(!this.parentTagId||this.parentTagId.length<=0){window.AdvertInteractiveRegistry.push(this)}else{if(parent.AVP&&parent.AVP.viewabilitySupport){parent.AVP.viewabilityRegistry.push(this)}}};window.AdvertInteractiveRegistry=[];window.AdvertInteractive.prototype={initialize:function(c,a,g,i,f,e){this.tagId=c;this.parentTagId=a;this.baseUrl=g;this.beaconUrl=i;this.beaconData=f;this.interactiveTime=null;this.interactiveTimeCount=0;this.interactiveTimeMarker=0;this.lastMouseActivityTime=null;var b=(c==="body")?document.body:document.getElementById(c);this.listen(this,b);if("context" in window&&"initialIntersection" in window.context){var d=function(){return((window.innerWidth*window.innerHeight)>=242500)?0.3:0.5};var h=((window.context.initialIntersection.intersectionRect.width*window.context.initialIntersection.intersectionRect.height)/(window.innerWidth*window.innerHeight));this.viewableState=(this.isPageVisible()&&h>=d())?"viewable":"obscured";this.viewableTime=(this.viewableState=="viewable")?e:null;this.viewableTimeCount=0}else{if(!a||a.length<=0){this.viewableState=(this.isPageVisible()&&this.isCreativeViewable(c))?"viewable":"obscured";this.viewableTime=(this.viewableState=="viewable")?e:null;this.viewableTimeCount=0}else{if(parent.AVP&&parent.AVP.viewabilitySupport){this.viewableState=(parent.AVP.isPageVisible()&&parent.AVP.isCreativeViewable(c,a))?"viewable":"obscured";this.viewableTime=(this.viewableState=="viewable")?e:null;this.viewableTimeCount=0}else{this.viewableState="obscured";this.viewableTime=null;this.viewableTimeCount=0}}}},listen:function(f,b){if(b){var a=false;try{var c=Object.defineProperty({},"passive",{get:function(){a=true}});window.addEventListener("test",null,c)}catch(d){}b.addEventListener("click",f.handleOnClick.bind(f));b.addEventListener("mousemove",f.handleMouseActivity.bind(f));b.addEventListener("touchmove",f.handleMouseActivity.bind(f),a?{passive:true}:false);b.addEventListener("mouseenter",f.startInteractiveTimeTracking.bind(f));b.addEventListener("mouseleave",f.finishInteractiveTimeTracking.bind(f))}},startInteractiveTimeTracking:function(){if(!this.interactiveTime){this.interactiveTime=setInterval(function(){this.sendInteractiveTimeEvent(this,false)}.bind(this),1000)}},sendInteractiveTimeEvent:function(c,b){if(!b){if(!c.isPageVisible()||!c.isCreativeVisible(c.tagId)){return}if(((new Date().getTime())-c.lastMouseActivityTime)>(5*1000)){return}}c.interactiveTimeCount+=1;if(c.interactiveTimeCount<=180&&(c.interactiveTimeCount-c.interactiveTimeMarker)>0){var a=function(f,e){var d=c.baseUrl;d=d.replace("[type]",f);d=d.replace("[name]",e+"&ticks="+c.interactiveTimeCount);return d};new Image().src=a("interactive","time")}},finishInteractiveTimeTracking:function(){if(this.interactiveTime){clearInterval(this.interactiveTime);this.interactiveTime=null;this.interactiveTimeMarker=this.interactiveTimeCount}},isPageVisible:function(){if("context" in window&&"hidden" in window.context){return !window.context.hidden}var a=function(){var d=["webkit","moz","ms","o"];if("hidden" in document){return"hidden"}for(var c=0;c<d.length;c++){if((d[c]+"Hidden") in document){return d[c]+"Hidden"}}return null};var b=a();return(b)?!document[b]:true},isCreativeVisible:function(d){if(d=="body"){return true}var c=document.getElementById(d);if(c){var e=c.getBoundingClientRect();var b=Math.max(document.documentElement.clientWidth,window.innerWidth||0);var g=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(document.compatMode&&document.compatMode=="BackCompat"){b=Math.max(document.body.clientWidth,window.innerWidth||0);g=Math.max(document.body.clientHeight,window.innerHeight||0)}var a=c.clientWidth;var f=c.clientHeight;return(a>0&&f>0&&((e.top>=0&&e.top<g&&((e.left>=0&&e.left<b)||(e.right>0&&e.right<=b)||(e.left<0&&e.right>b)))||(e.top<0&&e.bottom>g&&((e.left>=0&&e.left<b)||(e.right>0&&e.right<=b)||(e.left<0&&e.right>b)))||(e.bottom>=0&&e.bottom<=g&&((e.left>=0&&e.left<b)||(e.right>0&&e.right<=b)||(e.left<0&&e.right>b)))))}else{return false}},isCreativeViewable:function(h){if(h=="body"){return true}var c=document.getElementById(h);if(c){var k=c.getBoundingClientRect();var d=Math.max(document.documentElement.clientWidth,window.innerWidth||0);var l=Math.max(document.documentElement.clientHeight,window.innerHeight||0);if(document.compatMode&&document.compatMode=="BackCompat"){d=Math.max(document.body.clientWidth,window.innerWidth||0);l=Math.max(document.body.clientHeight,window.innerHeight||0)}var a=c.clientWidth;var j=c.clientHeight;var g=(a>0&&j>0&&((k.top>=0&&k.top<l&&((k.left>=0&&k.left<d)||(k.right>0&&k.right<=d)||(k.left<0&&k.right>d)))||(k.top<0&&k.bottom>l&&((k.left>=0&&k.left<d)||(k.right>0&&k.right<=d)||(k.left<0&&k.right>d)))||(k.bottom>=0&&k.bottom<=l&&((k.left>=0&&k.left<d)||(k.right>0&&k.right<=d)||(k.left<0&&k.right>d)))));if(g){var i=(Math.min(k.right,d)-Math.max(k.left,0));var b=(Math.min(k.bottom,l)-Math.max(k.top,0));var f=(i*b);var m=(a*j);var e=(m>=242500)?(0.3*m):(0.5*m);if(f<e){g=false}}return g}else{return false}},startViewableTimeTracking:function(){if(!this.viewableTime&&this.viewableState!="disabled"){this.viewableState="viewable";this.viewableTime=new Date().getTime()}},sendViewableTimeEvent:function(b){var a=b.viewableTimeCount;b.viewableTimeCount=0;return a},finishViewableTimeTracking:function(){if(this.viewableTime){this.viewableState="obscured";this.viewableTimeCount+=(new Date().getTime()-this.viewableTime);this.viewableTime=null}},disableViewableTimeTracking:function(){this.viewableState="disabled";if(this.viewableTime){this.viewableTimeCount+=(new Date().getTime()-this.viewableTime);this.viewableTime=null}},handleOnClick:function(){if(this.interactiveTimeCount==0){this.sendInteractiveTimeEvent(this,true);this.interactiveTimeMarker+=1}var a=(this.tagId==="body")?document.body:document.getElementById(this.tagId);if(a){a.removeEventListener("click",this.handleOnClick)}},handleMouseActivity:function(){this.lastMouseActivityTime=new Date().getTime()}};var viewabilityReporter=function(){if(window.AdvertInteractiveRegistry){var d=null;var h=[];var c=window.AdvertInteractiveRegistry.length;for(var b=0;b<c;b++){var a=window.AdvertInteractiveRegistry[b];d=a.beaconUrl;a.finishViewableTimeTracking();var f=a.sendViewableTimeEvent(a);if(f>=1000){h.push(a.beaconData+"&elapsed="+Math.round(f/1000))}}if(h.length>0){var e=h.join("|");d=d.replace("[type]","viewable");d=d.replace("[name]","time");if("sendBeacon" in navigator){navigator.sendBeacon(d,e)}else{var g=("XMLHttpRequest" in window)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");g.open("POST",d,false);g.setRequestHeader("Accept","*/*");g.setRequestHeader("Content-Type","text/plain;charset=UTF-8");g.responseType="text/plain";g.send(e)}}}};window.addEventListener("unload",viewabilityReporter);if(window==top){var viewabilityScanner=function(){if(window.AdvertInteractiveRegistry){var c=window.AdvertInteractiveRegistry.length;for(var b=0;b<c;b++){var a=window.AdvertInteractiveRegistry[b];if(a.isPageVisible()&&a.isCreativeViewable(a.tagId)){a.startViewableTimeTracking()}else{a.finishViewableTimeTracking()}}}};window.addEventListener("DOMContentLoaded",viewabilityScanner);window.addEventListener("load",viewabilityScanner);window.addEventListener("resize",viewabilityScanner);window.addEventListener("visibilitychange",viewabilityScanner);window.addEventListener("scroll",viewabilityScanner);setInterval(viewabilityScanner,100)}else{if("context" in window&&"observeIntersection" in window.context){var getViewabilityThreshold=function(){return((window.innerWidth*window.innerHeight)>=242500)?0.3:0.5};window.context.observeIntersection(function(a){a.forEach(function(e){var d=((e.intersectionRect.width*e.intersectionRect.height)/(window.innerWidth*window.innerHeight));if(window.AdvertInteractiveRegistry&&window.AdvertInteractiveRegistry.length>0){var b=window.AdvertInteractiveRegistry[0];if(b.isPageVisible()&&d>=getViewabilityThreshold()){b.startViewableTimeTracking()}else{b.finishViewableTimeTracking()}}})})}else{if(window.AdvertInteractiveRegistry&&window.AdvertInteractiveRegistry.length>0){var ua=navigator.userAgent;if("IntersectionObserver" in window){var getViewabilityThreshold=function(){return((window.innerWidth*window.innerHeight)>=242500)?0.3:0.5};var io=new IntersectionObserver(function(b){for(var c=0;c<b.length;c++){var a=window.AdvertInteractiveRegistry[0];if(a.isPageVisible()&&b[c].intersectionRatio>=getViewabilityThreshold()){a.startViewableTimeTracking()}else{a.finishViewableTimeTracking()}}},{threshold:[getViewabilityThreshold()]});io.observe(document.body)}else{if("mozInnerScreenX" in window){var isCreativeViewableFirefoxLegacy=function(){var c=screen.width;var l=screen.height;var a=window.innerWidth;var k=window.innerHeight;var d=window.mozInnerScreenY;var j=window.mozInnerScreenX;var n=(d+k);var h=(j+a);var g=(a>0&&k>0&&((d>=0&&d<l&&((j>=0&&j<c)||(h>0&&h<=c)))||(n>=0&&n<=l&&((j>=0&&j<c)||(h>0&&h<=c)))));if(g){var i=(j>=0&&j<c)?Math.min((c-j),a):h;var b=(d>=0&&d<l)?Math.min((l-d),k):n;var f=(i*b);var m=(a*k);var e=(m>=242500)?(0.3*m):(0.5*m);if(f<e){g=false}}return g};setInterval(function(){var a=window.AdvertInteractiveRegistry[0];if(a.isPageVisible()&&isCreativeViewableFirefoxLegacy()){a.startViewableTimeTracking()}else{a.finishViewableTimeTracking()}},100)}else{if(ua.indexOf("MSIE")!=-1||ua.indexOf("Trident/")!=-1||ua.indexOf("Edge/")!=-1){var isCreativeViewableMSIELegacy=function(){if((window.innerWidth*window.innerHeight)>=242500){return(document.elementFromPoint((window.innerWidth*0.3),(window.innerHeight*0.3))!=null)||(document.elementFromPoint((window.innerWidth*0.3),(window.innerHeight*0.6))!=null)}else{return(document.elementFromPoint((window.innerWidth*0.5),(window.innerHeight*0.5))!=null)}};setInterval(function(){var a=window.AdvertInteractiveRegistry[0];if(a.isPageVisible()&&isCreativeViewableMSIELegacy()){a.startViewableTimeTracking()}else{a.finishViewableTimeTracking()}},100)}}}}}}};