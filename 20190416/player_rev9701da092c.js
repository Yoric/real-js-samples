define(["jquery","counters","base/view","util/helpers","plugins/swfobject"],function(a,b,c,d){"use strict";var e=c.extend({props:{deferred:{flash:"video-html5/flash",html5:"video-html5/html5"}},public:{init:function(){return this.MIN_FLASH_VERSION="11.1",this.isGoogleBot()||this.isMp4Supported()&&(!this.hasFlashSupport()||this.isTestRegion()||!this.isFlashEnabled())?this.require("html5",function(a){this.player=a.createRunTime(d.extend(!0,{minFlashVersion:this.MIN_FLASH_VERSION,external:!0},this.options),this.$el),this.trigger("playerReady")}.bind(this)):this.require("flash",function(a){this.player=a.createRunTime(d.extend(!0,{minFlashVersion:this.MIN_FLASH_VERSION,external:!0},this.options),this.$el),this.trigger("playerReady")}.bind(this)),this},hasFlashSupport:function(){return window.swfobject.hasFlashPlayerVersion(this.MIN_FLASH_VERSION)},isMp4Supported:function(){var a=document.createElement("video");return!!a.canPlayType&&!!a.canPlayType("video/mp4")},isTestRegion:function(){return 1===this.options.request.html5||this.options.request.html5===!0},isGoogleBot:function(){return window.navigator.userAgent.indexOf("Googlebot")!==-1},isFlashEnabled:function(){return"0"!==this.options.flashVars.flash_enabled},getInstance:function(){return this.player}}});return e});