define(["common/user-agent-analyzer","common/utils","common/cookie-manipulation","common/config"],function(e,t,n,d){"use strict";function s(){return t.isDisabledScript(d.disabledScripts,"disqus")?(t.addClass(i,"hidden"),null):void n.executeScriptByFamily(n.COOKIE_CATEGORY.RESEAUX_SOCIAUX,this.init.bind(this),"disqus")}var i=(e.analyze(),document.getElementById("disqus_button")),a=document.getElementById("disqus_thread"),c=!1,o=!1;s.prototype.init=function(){i.addEventListener("click",r)};var r=function(){c?u():m()},u=function(){o?(t.removeClass(i,"js-open"),t.addClass(a,"hidden"),o=!1):(t.addClass(i,"js-open"),t.removeClass(a,"hidden"),o=!0)},m=function(){var e=document.getElementById("disqus_thread"),t=e.dataset.srcembed,n=e.dataset.srccount,d=document.createElement("script");d.type="text/javascript",d.async=!0,d.src=t,d.setAttribute("data-timestamp",+new Date),(document.body||document.head).appendChild(d);var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src=n,(document.body||document.head).appendChild(s),c=!0,u()};return s});