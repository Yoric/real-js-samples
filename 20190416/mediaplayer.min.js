var MediaPlayer=function(t){var i={};function n(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=i,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:e})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var i=t&&t.t?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=34)}([function(t,i){var n={CLEAR_KEY:{keySystem:"org.w3.clearkey",uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"},FAIRPLAY:{keySystem:"com.apple.fps.2_0",certUrl:"https://fp-keyos-twitch.licensekeyserver.com/cert/a17fd33d3843df9b17679ccf50a419b2.der",licenseUrl:"https://fp-keyos-twitch.licensekeyserver.com/getkey",uuid:"94CE86FB-07FF-4F43-ADB8-93D2FA968CA2"},PLAYREADY:{keySystem:"com.microsoft.playready",licenseUrl:"https://pr-keyos-twitch.licensekeyserver.com/core/rightsmanager.asmx",uuid:"9a04f079-9840-4286-ab92-e65be0885f95"},WIDEVINE:{keySystem:"com.widevine.alpha",licenseUrl:"https://wv-keyos-twitch.licensekeyserver.com",uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"}},e={"com.widevine.alpha":n.WIDEVINE,"com.microsoft.playready":n.PLAYREADY,"com.apple.fps.2_0":n.FAIRPLAY,"org.w3.clearkey":n.CLEAR_KEY},r={NO_CDM_SUPPORT:{value:4,message:"Your browser does not support any DRM Content Decryption Modules"},SESSION_UPDATE:{value:4,message:"There was an issue while updating DRM License"},LICENSE_REQUEST:{value:2,message:"Error while requesting DRM license"},KEY_SESSION_CREATION:{value:4,message:"Error creating key session"},KEY_SESSION_INTERNAL:{value:4,message:"Encryption key not usable because of internal error in CDM"},NO_PSSH_FOUND:{value:4,message:"Unable to find valid CDM support on media"},AUTH_XML_REQUEST:{value:2,message:"Request for AuthXML failed"},CERT_REQUEST:{value:2,message:"Request for DRM certificate failed"}};t.exports={KEY_SYSTEMS:n,KEY_SYSTEMS_BY_STRING:e,AUTH_XML_URL:"https://vizima.twitch.tv/api/authxml/",ERRORS:r}},function(t){t.exports={lowLatency:{prefetchOffset:1}}},function(t){t.exports={lowlatency:{liveSpeedUpBuffer:5,liveSpeedUpReset:3,liveSpeedUpRate:1.05},buffercontrol:{liveSpeedUpBuffer:12,liveSpeedUpReset:7,liveSpeedUpRate:1.05}}},function(t){t.exports={abr:{panicMode:!0,panicBuffer:1}}},function(t){t.exports={abr:{panicMode:!0,panicBuffer:.75}}},function(t){t.exports={abr:{panicMode:!0}}},function(t){t.exports={abr:{useDuoPercentile:!0}}},function(t){t.exports={abr:{displaySizeChange:!0,displayAreaFactor:1.5}}},function(t){t.exports={abr:{displaySizeChange:!0,displayAreaFactor:1.25}}},function(t){t.exports={abr:{displaySizeChange:!0,displayAreaFactor:1}}},function(t){t.exports={abr:{enableLowLatency:!0}}},function(t,i,n){var e={"./abrall.json":10,"./abrdisp.json":9,"./abrdisp1.json":8,"./abrdisp2.json":7,"./abrduo.json":6,"./abrpanic.json":5,"./abrpanic1.json":4,"./abrpanic2.json":3,"./speed5.json":2,"./startseg.json":1};function r(t){var i=o(t);return n(i)}function o(t){var i=e[t];if(!(i+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return i}r.keys=function(){return Object.keys(e)},r.resolve=o,t.exports=r,r.id=11},function(t,i){t.exports={PLAYER_LOADED_IN_WORKER:"player_loaded_in_worker",HLS_MASTER_PLAYLIST_REQUEST:"master_manifest_request",HLS_MASTER_PLAYLIST_READY:"master_manifest_ready",HLS_MEDIA_PLAYLIST_REQUEST:"variant_request",HLS_MEDIA_PLAYLIST_READY:"variant_ready",MIN_BUFFER_READY:"min_buffer_ready",VIDEO_ELEMENT_PLAY:"video_element_play"}},function(t,i){t.exports={UNKNOWN:"Unspecified",FILE:"File",PLAYLIST:"Playlist",SEGMENT:"Segment",SOURCE:"Source",DECODER:"Decode",RENDERER:"Render"}},function(t,i){t.exports={GENERIC:"Error",NOT_SUPPORTED:"ErrorNotSupported",NO_SOURCE:"ErrorNoSource",INVALID_DATA:"ErrorInvalidData",INVALID_STATE:"ErrorInvalidState",INVALID_PARAMETER:"ErrorInvalidParameter",TIMEOUT:"ErrorTimeout",INVALID_OUTPUT:"ErrorInvalidOutput",INTERNAL:"ErrorInternal",NETWORK:"ErrorNetwork",NETWORK_IO:"ErrorNetworkIO",AUTHORIZATION:"ErrorAuthorization",NOT_AVAILABLE:"ErrorNotAvailable",EXCEPTION:"ErrorException"}},function(t,i){t.exports={ID3:"MetaID3",CAPTION:"MetaCaption",SPLICE_OUT:"MetaSpliceOut",SPLICE_IN:"MetaSpliceIn"}},function(t,i){t.exports={IDLE:"Idle",READY:"Ready",BUFFERING:"Buffering",PLAYING:"Playing",ENDED:"Ended"}},function(t,i){t.exports={INITIALIZED:"PlayerInitialized",QUALITY_CHANGED:"PlayerQualityChanged",AUTO_SWITCH_QUALITY_CHANGED:"PlayerAutoSwitchQualityChanged",DURATION_CHANGED:"PlayerDurationChanged",VOLUME_CHANGED:"PlayerVolumeChanged",MUTED_CHANGED:"PlayerMutedChanged",PLAYBACK_RATE_CHANGED:"PlayerPlaybackRateChanged",REBUFFERING:"PlayerRebuffering",AUDIO_BLOCKED:"PlayerAudioBlocked",PLAYBACK_BLOCKED:"PlayerPlaybackBlocked",ERROR:"PlayerError",TRACKING:"PlayerTracking",TIME_UPDATE:"PlayerTimeUpdate",BUFFER_UPDATE:"PlayerBufferUpdate",SEEK_COMPLETED:"PlayerSeekCompleted",PROFILE:"PlayerProfile",TWITCH_INFO:"PlayerTwitchInfo",WORKER_ERROR:"PlayerWorkerError",METADATA_CUE_ENTER:"PlayerMetadataCueEnter",METADATA_CUE_EXIT:"PlayerMetadataCueExit"}},function(t,i){t.exports={STATE_CHANGED:"ClientStateChanged",STATS:"ClientStats",SAVE_ITEM:"ClientSaveItem",CONFIGURE:"ClientConfigure",REINIT:"ClientReinit",ENQUEUE:"ClientEnqueue",END_OF_STREAM:"ClientEndOfStream",SET_TIMESTAMP_OFFSET:"ClientSetTimestampOffset",PLAY:"ClientPlay",PAUSE:"ClientPause",REMOVE:"ClientRemove",RESET:"ClientReset",SEEK_TO:"ClientSeekTo",SET_PLAYBACK_RATE:"ClientSetPlaybackRate",ADD_CUE:"ClientAddCue"}},function(t,i,n){var e;!function(r,o){var s=function(){return s.get.apply(s,arguments)},u=s.utils={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isPlainObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},toArray:function(t){return Array.prototype.slice.call(t)},getKeys:Object.keys||function(t){var i=[],n="";for(n in t)t.hasOwnProperty(n)&&i.push(n);return i},encode:function(t){return String(t).replace(/[,;"\\=\s%]/g,function(t){return encodeURIComponent(t)})},decode:function(t){return decodeURIComponent(t)},retrieve:function(t,i){return null==t?i:t}};s.defaults={},s.expiresMultiplier=86400,s.set=function(t,i,n){if(u.isPlainObject(t))for(var e in t)t.hasOwnProperty(e)&&this.set(e,t[e],i);else{var o=void 0!==(n=u.isPlainObject(n)?n:{expires:n}).expires?n.expires:this.defaults.expires||"",s=typeof o;"string"===s&&""!==o?o=new Date(o):"number"===s&&(o=new Date(+new Date+1e3*this.expiresMultiplier*o)),""!==o&&"toGMTString"in o&&(o=";expires="+o.toGMTString());var a=n.path||this.defaults.path;a=a?";path="+a:"";var h=n.domain||this.defaults.domain;h=h?";domain="+h:"";var c=n.secure||this.defaults.secure?";secure":"";!1===n.secure&&(c=""),r.cookie=u.encode(t)+"="+u.encode(i)+o+a+h+c}return this},s.setDefault=function(t,i,n){if(u.isPlainObject(t)){for(var e in t)void 0===this.get(e)&&this.set(e,t[e],i);return s}if(void 0===this.get(t))return this.set.apply(this,arguments)},s.remove=function(t){for(var i=0,n=(t=u.isArray(t)?t:u.toArray(arguments)).length;i<n;i++)this.set(t[i],"",-1);return this},s.removeSpecific=function(t,i){if(!i)return this.remove(t);t=u.isArray(t)?t:[t],i.expires=-1;for(var n=0,e=t.length;n<e;n++)this.set(t[n],"",i);return this},s.empty=function(){return this.remove(u.getKeys(this.all()))},s.get=function(t,i){var n=this.all();if(u.isArray(t)){for(var e={},r=0,o=t.length;r<o;r++){var s=t[r];e[s]=u.retrieve(n[s],i)}return e}return u.retrieve(n[t],i)},s.all=function(){if(""===r.cookie)return{};for(var t=r.cookie.split("; "),i={},n=0,e=t.length;n<e;n++){var o=t[n].split("="),s=u.decode(o.shift()),a=u.decode(o.join("="));i[s]=a}return i},s.enabled=function(){if(navigator.cookieEnabled)return!0;var t="_"===s.set("_","_").get("_");return s.remove("_"),t},void 0===(e=function(){return{cookie:s}}.call(i,n,i,t))||(t.exports=e)}("undefined"==typeof document?null:document)},function(t,i,n){var e=n(19).cookie,r="unique_id";t.exports=function(){var t=e.get(r);return t||(t=function(t=32){for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",e=0;e<t;e++){var r=Math.floor(Math.random()*i.length);n+=i.charAt(r)}return n}(),e.set(r,t,{expires:3650,domain:"."+window.location.host.split(".").slice(-2).join("."),path:"/",secure:!1}),t)}},function(t,i){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,i,n){
/*!
 * Bowser - a browser detector
 * https://github.com/ded/bowser
 * MIT License | (c) Dustin Diaz 2015
 */
!function(i,e,r){void 0!==t&&t.exports?t.exports=r():n(21)("bowser",r)}(0,0,function(){var t=!0;function i(i){function n(t){var n=i.match(t);return n&&n.length>1&&n[1]||""}function e(t){var n=i.match(t);return n&&n.length>1&&n[2]||""}var r,o=n(/(ipod|iphone|ipad)/i).toLowerCase(),s=!/like android/i.test(i)&&/android/i.test(i),u=/nexus\s*[0-6]\s*/i.test(i),a=!u&&/nexus\s*[0-9]+/i.test(i),h=/CrOS/.test(i),c=/silk/i.test(i),f=/sailfish/i.test(i),d=/tizen/i.test(i),l=/(web|hpw)os/i.test(i),v=/windows phone/i.test(i),p=(/SamsungBrowser/i.test(i),!v&&/windows/i.test(i)),m=!o&&!c&&/macintosh/i.test(i),y=!s&&!f&&!d&&!l&&/linux/i.test(i),E=e(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),b=n(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(i)&&!/tablet pc/i.test(i),S=!w&&/[^-]mobi/i.test(i),T=/xbox/i.test(i);/opera/i.test(i)?r={name:"Opera",opera:t,version:b||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(i)?r={name:"Opera",opera:t,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(i)?r={name:"Samsung Internet for Android",samsungBrowser:t,version:b||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(i)?r={name:"Opera Coast",coast:t,version:b||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(i)?r={name:"Yandex Browser",yandexbrowser:t,version:b||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(i)?r={name:"UC Browser",ucbrowser:t,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(i)?r={name:"Maxthon",maxthon:t,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(i)?r={name:"Epiphany",epiphany:t,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(i)?r={name:"Puffin",puffin:t,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(i)?r={name:"Sleipnir",sleipnir:t,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(i)?r={name:"K-Meleon",kMeleon:t,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:v?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:t},E?(r.msedge=t,r.version=E):(r.msie=t,r.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(i)?r={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:h?r={name:"Chrome",osname:"Chrome OS",chromeos:t,chromeBook:t,chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(i)?r={name:"Microsoft Edge",msedge:t,version:E}:/vivaldi/i.test(i)?r={name:"Vivaldi",vivaldi:t,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||b}:f?r={name:"Sailfish",osname:"Sailfish OS",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(i)?r={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(i)?(r={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(i)&&(r.firefoxos=t,r.osname="Firefox OS")):c?r={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(i)?r={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(i)?r={name:"SlimerJS",slimer:t,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(i)||/rim\stablet/i.test(i)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:t,version:b||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:l?(r={name:"WebOS",osname:"WebOS",webos:t,version:b||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(i)&&(r.touchpad=t)):/bada/i.test(i)?r={name:"Bada",osname:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:d?r={name:"Tizen",osname:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(i)?r={name:"QupZilla",qupzilla:t,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(i)?r={name:"Chromium",chromium:t,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(i)?r={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?r={name:"Android",version:b}:/safari|applewebkit/i.test(i)?(r={name:"Safari",safari:t},b&&(r.version=b)):o?(r={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},b&&(r.version=b)):r=/googlebot/i.test(i)?{name:"Googlebot",googlebot:t,version:n(/googlebot\/(\d+(\.\d+))/i)||b}:{name:n(/^(.*)\/(.*) /),version:e(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(i)?(/(apple)?webkit\/537\.36/i.test(i)?(r.name=r.name||"Blink",r.blink=t):(r.name=r.name||"Webkit",r.webkit=t),!r.version&&b&&(r.version=b)):!r.opera&&/gecko\//i.test(i)&&(r.name=r.name||"Gecko",r.gecko=t,r.version=r.version||n(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!s&&!r.silk?!r.windowsphone&&o?(r[o]=t,r.ios=t,r.osname="iOS"):m?(r.mac=t,r.osname="macOS"):T?(r.xbox=t,r.osname="Xbox"):p?(r.windows=t,r.osname="Windows"):y&&(r.linux=t,r.osname="Linux"):(r.android=t,r.osname="Android");var g="";r.windows?g=function(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):r.windowsphone?g=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?g=(g=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):o?g=(g=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):s?g=n(/android[ \/-](\d+(\.\d+)*)/i):r.webos?g=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?g=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?g=n(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(g=n(/tizen[\/\s](\d+(\.\d+)*)/i)),g&&(r.osversion=g);var A=!r.windows&&g.split(".")[0];return w||a||"ipad"==o||s&&(3==A||A>=4&&!S)||r.silk?r.tablet=t:(S||"iphone"==o||"ipod"==o||s||u||r.blackberry||r.webos||r.bada)&&(r.mobile=t),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=t:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=t:r.x=t,r}var n=i("undefined"!=typeof navigator&&navigator.userAgent||"");function e(t){return t.split(".").length}function r(t,i){var n,e=[];if(Array.prototype.map)return Array.prototype.map.call(t,i);for(n=0;n<t.length;n++)e.push(i(t[n]));return e}function o(t){for(var i=Math.max(e(t[0]),e(t[1])),n=r(t,function(t){var n=i-e(t);return r((t+=new Array(n+1).join(".0")).split("."),function(t){return new Array(20-t.length).join("0")+t}).reverse()});--i>=0;){if(n[0][i]>n[1][i])return 1;if(n[0][i]!==n[1][i])return-1;if(0===i)return 0}}function s(t,e,r){var s=n;"string"==typeof e&&(r=e,e=void 0),void 0===e&&(e=!1),r&&(s=i(r));var u=""+s.version;for(var a in t)if(t.hasOwnProperty(a)&&s[a]){if("string"!=typeof t[a])throw new Error("Browser version in the minVersion map should be a string: "+a+": "+String(t));return o([u,t[a]])<0}return e}return n.test=function(t){for(var i=0;i<t.length;++i){var e=t[i];if("string"==typeof e&&e in n)return!0}return!1},n.isUnsupportedBrowser=s,n.compareVersions=o,n.check=function(t,i,n){return!s(t,i,n)},n.e=i,n.detect=i,n})},function(t,i,n){var e=n(22).e(navigator.userAgent),r=n(20),o=/^(\d+)\.(\d+)\.(\d+)[+|-]?(.*)?$/,s=/^(\d+)\.(\d+)[+|-]?(.*)?$/,u=/^(\d+)$/,a=function(t){var i=o.exec(t)||s.exec(t)||u.exec(t)||[];return{major:parseInt(i[1]),minor:parseInt(i[2]),patch:parseInt(i[3])}}(e.version);e.family=String(e.name).toLowerCase()||"",e.name=navigator.appVersion||"",e.userAgent=navigator.userAgent||"",e.major=a.major||0,e.minor=a.minor||0,e.patch=a.patch||0,e.osName=e.osname||"",e.osVersion=e.osversion||"",e.chromecast=navigator.userAgent.toLowerCase().indexOf("crkey")>-1,e.chrome=e.chrome||!1,e.firefox=e.firefox||!1,e.safari=e.safari||!1,e.msie=e.msie||!1,e.msedge=e.msedge||!1,e.deviceId=r(),e.url=window.location.href,e.host=window.location.host,e.domain=window.location.host.split(".").slice(-2).join("."),t.exports=e},function(t,i){!function(i){var n=setTimeout;function e(){}function r(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this.u=0,this.h=!1,this.f=void 0,this.v=[],h(t,this)}function o(t,i){for(;3===t.u;)t=t.f;0!==t.u?(t.h=!0,r.y(function(){var n=1===t.u?i.onFulfilled:i.onRejected;if(null!==n){var e;try{e=n(t.f)}catch(t){return void u(i.promise,t)}s(i.promise,e)}else(1===t.u?s:u)(i.promise,t.f)})):t.v.push(i)}function s(t,i){try{if(i===t)throw new TypeError("A promise cannot be resolved with itself.");if(i&&("object"==typeof i||"function"==typeof i)){var n=i.then;if(i instanceof r)return t.u=3,t.f=i,void a(t);if("function"==typeof n)return void h(function(t,i){return function(){t.apply(i,arguments)}}(n,i),t)}t.u=1,t.f=i,a(t)}catch(i){u(t,i)}}function u(t,i){t.u=2,t.f=i,a(t)}function a(t){2===t.u&&0===t.v.length&&r.y(function(){t.h||r.b(t.f)});for(var i=0,n=t.v.length;i<n;i++)o(t,t.v[i]);t.v=null}function h(t,i){var n=!1;try{t(function(t){n||(n=!0,s(i,t))},function(t){n||(n=!0,u(i,t))})}catch(t){if(n)return;n=!0,u(i,t)}}r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,i){var n=new this.constructor(e);return o(this,new function(t,i,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof i?i:null,this.promise=n}(t,i,n)),n},r.all=function(t){var i=Array.prototype.slice.call(t);return new r(function(t,n){if(0===i.length)return t([]);var e=i.length;function r(o,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var u=s.then;if("function"==typeof u)return void u.call(s,function(t){r(o,t)},n)}i[o]=s,0==--e&&t(i)}catch(t){n(t)}}for(var o=0;o<i.length;o++)r(o,i[o])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(i){i(t)})},r.reject=function(t){return new r(function(i,n){n(t)})},r.race=function(t){return new r(function(i,n){for(var e=0,r=t.length;e<r;e++)t[e].then(i,n)})},r.y="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){n(t,0)},r.b=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},r.w=function(t){r.y=t},r.S=function(t){r.b=t},void 0!==t&&t.exports?t.exports=r:i.Promise||(i.Promise=r)}(this)},function(t,i){function n(t){this.T=t,this.g=[t.addTextTrack("metadata")]}t.exports=n,n.prototype.addCue=function(t){var i=this.g.find(function(i){var n=i.cues;return!n.length||n[n.length-1].startTime<=t.startTime});i||(i=this.T.addTextTrack("metadata"),this.g.push(i)),i.addCue(t)},n.prototype.remove=function(t,i){this.g.forEach(function(n){for(var e=n.cues,r=e.length-1;r>=0;r--){var o=e[r],s=o.startTime;if(s<t)break;s<i&&n.removeCue(o)}})},n.prototype.delete=function(){this.T=null,this.g=null}},function(t,i){var n=t.exports=function(){this.A=[],this._=0,this.O=0};n.prototype.push=function(t){this.O===this.A.length?this.A.push(t):this.A[this.O]=t,this.O++},n.prototype.pop=function(){var t=this.A[this._];return this.A[this._]=null,this._++,this.empty()&&(this._=0,this.O=0),t},n.prototype.size=function(){return this.O-this._},n.prototype.empty=function(){return this._>=this.O}},function(t,i,n){var e=n(26);function r(t,i){this.T=t,this.R=i,this.I=new e,this.R.addEventListener("updateend",this.C.bind(this))}t.exports=r,r.prototype.appendBuffer=function(t){this.schedule(function(i){try{i.appendBuffer(t)}catch(t){if("QuotaExceededError"===t.name){var n=i.buffered,e=n.start(0),r=n.end(n.length-1),o=(e+r)/2;i.remove(o,r)}}})},r.prototype.setTimestampOffset=function(t){this.schedule(function(i){i.timestampOffset=t})},r.prototype.remove=function(t,i){this.schedule(function(n){var e=n.buffered;e.length&&(t=Math.max(t,e.start(0)),i=Math.min(i,e.end(e.length-1)),t<i&&n.remove(t,i))})},r.prototype.schedule=function(t){this.I.empty()&&!this.P()?t(this.R):(this.I.push(t),this.C())},r.prototype.C=function(){for(;!this.I.empty()&&!this.P();)this.I.pop()(this.R)},r.prototype.P=function(){return!this.R||this.R.updating||null!==this.T.error}},function(t,i){t.exports={licenseRequestData:function(t){var i=String.fromCharCode.apply(null,new Uint16Array(t)),n=(new DOMParser).parseFromString(i,"application/xml");return{headers:function(t){for(var i={},n=t.getElementsByTagName("name"),e=t.getElementsByTagName("value"),r=0;r<n.length;r++)i[n[r].childNodes[0].nodeValue]=e[r].childNodes[0].nodeValue;return i}(n),body:function(t){var i=null;if(t.getElementsByTagName("Challenge").length>0&&t.getElementsByTagName("Challenge")[0]){var n=t.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;n&&(i=atob(n))}return i}(n)}}}},function(t,i,n){var e=n(0).KEY_SYSTEMS,r=function(t){return t instanceof Uint8Array||t instanceof Uint16Array?t.buffer:t},o=function(t){var i=[];return t.forEach(function(t){Object.keys(e).forEach(function(n){var r=e[n];r.uuid===t&&i.push(r)})}),i},s=function(t){if(null===t)return[];for(var i=new DataView(t.buffer||t),n=[],e=0;;){var r,o,s;if(e>=i.buffer.byteLength)break;if(r=e+i.getUint32(e),e+=4,i.getUint32(e)===a("pssh"))if(e+=4,0===(o=i.getUint8(e))||1===o){var u;for(e++,e+=3,s="",u=0;u<4;u++)s+=h(i.getUint8(e+u));for(e+=4,s+="-",u=0;u<2;u++)s+=h(i.getUint8(e+u));for(e+=2,s+="-",u=0;u<2;u++)s+=h(i.getUint8(e+u));for(e+=2,s+="-",u=0;u<2;u++)s+=h(i.getUint8(e+u));for(e+=2,s+="-",u=0;u<6;u++)s+=h(i.getUint8(e+u));e+=6,s=s.toLowerCase(),i.getUint32(e),e+=4,n.push(s),e=r}else e=r;else e=r}return n};function u(t,i){for(var n=new DataView(t.buffer,t.byteOffset,t.byteLength),e=a(i),r=0;r<t.byteLength;){var o=n.getUint32(r);if(n.getUint32(r+4)===e)return t.subarray(r+8,r+o);r+=o}return new Uint8Array}function a(t){return(t.charCodeAt(0)<<24)+(t.charCodeAt(1)<<16)+(t.charCodeAt(2)<<8)+t.charCodeAt(3)}function h(t){var i=t.toString(16);return 1===i.length?"0"+i:i}function c(t){for(var i=atob(t),n=i.length,e=new Uint8Array(n),r=0;r<n;r++)e[r]=i.charCodeAt(r);return e}function f(t){return decodeURIComponent(t.replace(/\+/g," "))}t.exports={arrayBuffersEqual:function(t,i){if((t=r(t))===(i=r(i)))return!0;if(t.byteLength!==i.byteLength)return!1;for(var n=new DataView(t),e=new DataView(i),o=0;o<n.byteLength;o++)if(n.getUint8(o)!==e.getUint8(o))return!1;return!0},httpRequest:function(t,i){return new Promise(function(n,e){var r=new XMLHttpRequest;for(var o in r.open(i.method,t,!0),i.headers)i.headers.hasOwnProperty(o)&&r.setRequestHeader(o,i.headers[o]);r.responseType=i.responseType,r.onload=function(){200===r.status&&n(r.response)},r.onloadend=function(){e(r.status)},r.send(i.body)})},parsePSSHSupportFromInitData:function(t){var i=s(t);return o(i)},contentIdFromInitData:function(t){return function(t){for(var i="",n=0;n<t.length;n++)i+=h(t[n]);return i}(u(u(c(JSON.parse(String.fromCharCode.apply(null,t)).sinf[0]),"schi"),"tenc").subarray(8,24))},decodeBase64:c,encodeBase64:function(t){return btoa(String.fromCharCode.apply(null,t))},getParamsFromUrl:function(t){var i={},n=t.indexOf("?");if(n>-1)for(var e=t.substring(n+1).split("&"),r=0;r<e.length;r++){var o=e[r].split("=");i[f(o[0])]=o[1]?f(o[1]):""}return i}}},function(t,i,n){var e=n(0),r=n(29),o=n(28),s=e.KEY_SYSTEMS,u=e.KEY_SYSTEMS_BY_STRING,a=e.AUTH_XML_URL,h=r.arrayBuffersEqual,c=r.httpRequest,f=r.parsePSSHSupportFromInitData,d=r.contentIdFromInitData,l=r.decodeBase64,v=r.encodeBase64,p=r.getParamsFromUrl,m=e.ERRORS,y=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'video/mp4;codecs="avc1.42E01E"'}]}],E=function(t){this.T=t.video,this.M=t.onerror,this.N=null,this.L=null,this.D=void 0,this.U=[],this.reset(),this.T.addEventListener("encrypted",this.j.bind(this),!1),this.T.addEventListener("webkitneedkey",this.B.bind(this),!1)};E.prototype.configure=function(t){if(!this.F){var i=new URL(t).pathname.split("/"),n=i[i.length-1].split(".")[0],e=p(t),r=e.token,o=e.sig,s=a+n+"?token="+encodeURIComponent(r)+"&sig="+o;this.F=c(s,{method:"GET",responseType:"text"}).catch(function(t){return Promise.reject(Object.assign({code:t},m.AUTH_XML_REQUEST))})}},E.prototype.reset=function(){this.F=null,this.Y=[]},E.prototype.isProtected=function(){return null!==this.F},E.prototype.K=function(t){this.F&&this.M({value:t.value||4,code:t.code||0,message:t.message||""})},E.prototype.V=function(t){for(var i=0;i<this.Y.length;i++){var n=this.Y[i];if(n.initData&&h(n.initData,t))return!0}return!1},E.prototype.W=function(){if(null===this.N||0===this.N.length)return Promise.reject(m.NO_PSSH_FOUND);var t=Promise.reject();return this.N.forEach(function(i){t=t.catch(function(t){return navigator.requestMediaKeySystemAccess(i.keySystem,y)})}),t=t.catch(function(){return Promise.reject(m.NO_CDM_SUPPORT)})},E.prototype.j=function(t){var i;if(!this.V(t.initData))return this.Y.push({initData:t.initData}),null===this.N&&(this.N=f(t.initData)),void 0===this.D&&(this.D=null,i=this.W().then(function(t){return this.L=u[t.keySystem],t.createMediaKeys()}.bind(this)).then(this.G.bind(this)).catch(function(t){this.K(t)}.bind(this))),this.H(t.initDataType,t.initData),i},E.prototype.G=function(t){return this.D=t,this.U.forEach(function(t){this.z(t.initDataType,t.initData)}.bind(this)),this.U=[],this.T.setMediaKeys(this.D)},E.prototype.H=function(t,i){this.D?this.z(t,i).catch(function(t){this.K(m.KEY_SESSION_CREATION)}.bind(this)):this.U.push({initDataType:t,initData:i})},E.prototype.z=function(t,i){var n=this.D.createSession();return n.addEventListener("message",this.q.bind(this),!1),n.addEventListener("keystatuseschange",function(t){this.Q(n,t,i)}.bind(this),!1),n.generateRequest(t,i)},E.prototype.Q=function(t,i,n){var e=!1;t.keyStatuses.forEach(function(t,i){switch(t){case"expired":e=!0;break;case"internal-error":this.K(m.KEY_SESSION_INTERNAL)}}.bind(this)),e&&t.close().then(function(){this.X(n)}.bind(this))},E.prototype.X=function(t){for(var i=0;i<this.Y.length;i++){if(this.Y[i].initData===t)return void this.Y.splice(i,1)}},E.prototype.q=function(t){var i=t.target;this.J(t.message).then(function(t){return i.update(t).catch(function(){return Promise.reject(m.SESSION_UPDATE)})}).catch(function(t){this.K(t)}.bind(this))},E.prototype.J=function(t){if(this.L===s.CLEAR_KEY){var i=JSON.parse((new TextDecoder).decode(t)).kids.map(function(t){return{kty:"oct",alg:"A128KW",kid:t,k:t}}),n=(new TextEncoder).encode(JSON.stringify({keys:i}));return Promise.resolve(n)}return this.F?this.F.then(function(i){return this.$(t,i)}.bind(this)):Promise.reject(m.AUTH_XML_REQUEST)},E.prototype.$=function(t,i){var n={method:"POST",responseType:"arraybuffer",body:t,headers:{customdata:i,"Content-Type":"application/octet-stream"}};if(this.L===s.PLAYREADY){var e=o.licenseRequestData(t);n.body=e.body,n.headers=Object.assign(n.headers,e.headers)}return c(this.L.licenseUrl,n).catch(function(t){return Promise.reject(Object.assign({code:t},m.LICENSE_REQUEST))})},E.prototype.B=function(t){this.L=s.FAIRPLAY,c(s.FAIRPLAY.certUrl,{method:"GET",responseType:"arraybuffer",headers:{Pragma:"Cache-Control: no-cache","Cache-Control":"max-age=0"}}).catch(function(t){return Promise.reject(Object.assign({code:t},m.CERT_REQUEST))}.bind(this)).then(function(i){return this.Z(t,i)}.bind(this)).catch(function(t){this.K(t)}.bind(this))},E.prototype.Z=function(t,i){return new Promise(function(n,e){this.T.webkitKeys||this.T.webkitSetMediaKeys(new WebKitMediaKeys(s.FAIRPLAY.keySystem)),this.T.webkitKeys||e("Issue setting fairplay media keys");var r=d(t.initData),o=this.T.webkitKeys.createSession("video/mp4",t.initData);if(!o)return e("Could not create key session");o.contentId=r,o.addEventListener("webkitkeymessage",function(t){var n=t.target,o=t.message;"certificate"===String.fromCharCode.apply(null,t.message)?n.update(new Uint8Array(i)):this.tt(o,r).then(function(t){var i=t.trim();"<ckc>"===i.substr(0,5)&&"</ckc>"===i.substr(-6)&&(i=i.slice(5,-6)),n.update(l(i))}).catch(e)}.bind(this)),o.addEventListener("webkitkeyadded",n),o.addEventListener("webkitkeyerror",e)}.bind(this))},E.prototype.tt=function(t,i){return this.F?this.F.then(function(n){var e=s.FAIRPLAY.licenseUrl,r="spc="+v(t)+"&assetId="+i;return c(e,{method:"POST",body:r,responseType:"text",headers:{"Content-Type":"application/x-www-form-urlencoded",customdata:n}}).catch(function(t){return Promise.reject(Object.assign({code:t},m.LICENSE_REQUEST))})}):Promise.reject(m.AUTH_XML_REQUEST)},t.exports=E},function(t,i){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,i,n){(function(i){var e=n(30),r=n(27),o=n(25),s=i.Promise||n(24),u=-1,a=.1,h=t.exports=function(t){this.T=document.createElement("video"),this.it=new o(this.T),this.nt=Object.create(null),this.M=t.onerror,this.et="",this.rt=new p(this.T,t),this.ot=new e({video:this.T,onerror:this.M}),this.reset()};function c(t){return new s(function(i){t.schedule(i)})}function f(){}function d(t){return"number"==typeof t.webkitDecodedFrameCount?t.webkitDecodedFrameCount:"function"==typeof t.getVideoPlaybackQuality?t.getVideoPlaybackQuality().totalVideoFrames:"number"==typeof t.mozDecodedFrames?t.mozDecodedFrames:u}function l(t){for(var i=t.buffered,n=t.currentTime,e=0;e<i.length;e++){var r=i.start(e),o=i.end(e);if(!(o<=n)){if(r-a>n)break;for(var s=e+1;s<i.length&&!(i.start(s)-o>a);s++)o=i.end(s);for(var u=e-1;u>=0&&!(r-i.end(u)>a);u--)r=i.start(u);return{start:Math.min(r,n),end:o}}}return{start:n,end:n}}function v(t){return new s(function(i,n){var e=new MediaSource;e.addEventListener("sourceopen",function t(){e.removeEventListener("sourceopen",t),"open"===e.readyState?(e.duration=1<<30,i(e)):n(new Error("MediaSource not opened"))}),t.src=URL.createObjectURL(e)})}function p(t,i){this.st=i.onidle,this.ut=i.onstop,this.at=i.onended,this.M=i.onerror,this.ht=i.onbufferupdate,this.ct=i.ontimeupdate,this.ft=i.onplay,this.dt=i.onplaying,this.lt=i.onvideodisplaysizechanged,this.T=t,this.vt=0,this.pt=[],this.mt=!0,this.yt=!0,this.Et=0,this.bt=0,this.wt=0,this.St=0,this.Tt=performance.now(),this.gt=-1,this.At=!1,this._t=!1;var n=function(t,i){this.T.addEventListener(t,i),this.pt.push(function(){this.T.removeEventListener(t,i)}.bind(this))}.bind(this);n("play",this.Ot.bind(this)),n("pause",this.Rt.bind(this)),n("timeupdate",this.It.bind(this)),n("ended",this.Ct.bind(this)),n("error",this.Pt.bind(this)),n("waiting",this.kt.bind(this)),n("playing",this.Mt.bind(this))}h.prototype.configure=function(t){if(t.path&&(this.et=t.path,t.isProtected&&this.ot.configure(t.path),t.isPassthrough))return this.T.src=t.path,void this.rt.updatePassThrough(!0);this.rt.updatePassThrough(t.isPassthrough);var i=t.trackID,n=t.codec;n?this.nt[i]=n:n=this.nt[i],this.Nt||(this.Nt=v(this.T)),i in this.g||this.Lt(i,n,0)},h.prototype.enqueue=function(t){var i=this.g[t.trackID];i&&i.then(function(i){i.appendBuffer(t.buffer)},f)},h.prototype.endOfStream=function(){this.Dt().then(function(){this.rt.endOfStream()}.bind(this))},h.prototype.setTimestampOffset=function(t){var i=this.g[t.trackID];i&&(this.Ut[t.trackID]=t.offset,i.then(function(i){i.setTimestampOffset(t.offset)},f))},h.prototype.captureGesture=function(){0===this.T.played.length&&(s.resolve(this.T.play()).catch(f),this.T.pause())},h.prototype.play=function(){return this.Dt().then(function(){return this.rt.play()}.bind(this))},h.prototype.pause=function(){this.Dt().then(function(){this.rt.pause()}.bind(this))},h.prototype.reset=function(){if(this.Nt=null,this.g=Object.create(null),this.Ut=Object.create(null),this.et="",this.rt.pause(),this.ot.reset(),this.it.remove(0,1/0),this.T.src){var t=this.T.src;this.T.removeAttribute("src"),this.T.load(),URL.revokeObjectURL(t)}},h.prototype.reinit=function(){this.rt.pause();var t=this.T.currentTime,i=this.buffered();this.it.remove(i.start,i.end);var n=this.T.src;for(var e in this.Nt=v(this.T),URL.revokeObjectURL(n),this.g)this.Lt(e,this.nt[e],this.Ut[e]);this.T.currentTime=t},h.prototype.remove=function(t){var i=t.start,n=t.end;function e(t){t.remove(i,n)}for(var r in this.g)this.g[r].then(e);this.it.remove(i,n)},h.prototype.seekTo=function(t){var i=l(this.T);t>=i.start&&t<i.end?this.Dt().then(function(){this.T.currentTime=t}.bind(this)):this.T.currentTime=t},h.prototype.setPlaybackRate=function(t){this.T.playbackRate=t},h.prototype.addCue=function(t,n,e){n<=t&&(n=t+a);var r=new(i.VTTCue||i.TextTrackCue)(t,n,"");r.onenter=function(){e(!0)},r.onexit=function(){e(!1)},this.it.addCue(r)},h.prototype.currentTime=function(){return this.T.currentTime},h.prototype.buffered=function(){return l(this.T)},h.prototype.bufferDuration=function(){var t=l(this.T);return t.end-Math.max(t.start,this.T.currentTime)},h.prototype.decodedFrames=function(){return d(this.T)},h.prototype.droppedFrames=function(){if("number"==typeof this.T.webkitDroppedFrameCount)return this.T.webkitDroppedFrameCount;if("function"==typeof this.T.getVideoPlaybackQuality){var t=this.T.getVideoPlaybackQuality();return t?t.droppedVideoFrames:u}return u},h.prototype.framerate=function(){return this.rt.framerate()},h.prototype.videoElement=function(){return this.T},h.prototype.isProtected=function(){return this.ot.isProtected()},h.prototype.srcUrl=function(){return this.et},h.prototype.delete=function(){this.reset(),this.it.delete(),this.rt.delete(),this.T=null},h.prototype.Lt=function(t,i,n){var e=this.Nt.then(function(t){var e=t.addSourceBuffer("video/mp4;"+i);return e.timestampOffset=n,new r(this.T,e)}.bind(this));e.catch(function(t){this.M({value:4,code:4,message:t.toString()})}.bind(this)),this.g[t]=e},h.prototype.Dt=function(){var t=[];for(var i in this.g)t.push(this.g[i].then(c));return s.all(t)},p.prototype.updatePassThrough=function(t){this.At=t,t&&this.T.paused&&!this.yt&&this.play()},p.prototype.delete=function(){this.pt.forEach(function(t){t()}),clearInterval(this.vt),this.T=null},p.prototype.play=function(){this.yt=!1;var t=this.T.buffered;if(t.length>0){var i=t.start(0);this.T.currentTime<i&&(this.T.currentTime=i)}var n=s.resolve(this.T.play());return n.catch(this.jt.bind(this)),this.ft(),n},p.prototype.pause=function(){this.yt=!0,this.T.pause()},p.prototype.endOfStream=function(){this.mt=!1,clearTimeout(this.gt),this.gt=-1},p.prototype.framerate=function(){return this.wt},p.prototype.Ot=function(){this.Et=this.T.currentTime,clearInterval(this.vt),this.vt=setInterval(this.Bt.bind(this),2e3)},p.prototype.Rt=function(){clearInterval(this.vt),this.jt()},p.prototype.It=function(){clearTimeout(this.gt),this.gt=-1,this.At&&this._t&&4===this.T.readyState&&(this._t=!1,this.dt(this.yt));var t=d(this.T),i=performance.now();this.wt=1e3*Math.max(t-this.St,0)/(i-this.Tt),this.St=t,this.Tt=i,this.ct();var n=l(this.T);this.xt(n),this.At||this.Ft(n)},p.prototype.Ct=function(){this.at()},p.prototype.kt=function(){this._t=!0,this.At&&this.st()},p.prototype.Mt=function(){this._t=!1,this.dt(this.yt)},p.prototype.Pt=function(){var t=this.T.error;this.M({value:t.code,code:t.code,message:t.message||""})},p.prototype.Bt=function(){var t=l(this.T);this.T.paused?clearInterval(this.vt):this.T.currentTime===this.Et?(this.Yt(),this.Ft(t)):(this.xt(t),this.Et=this.T.currentTime),this.Kt()},p.prototype.Kt=function(){var t=this.T.clientWidth*window.devicePixelRatio,i=this.T.clientHeight*window.devicePixelRatio;this.lt(t,i)},p.prototype.xt=function(t){t.end!==this.bt&&(this.bt=t.end,this.ht())},p.prototype.Ft=function(t){if(this.T.paused)this.mt=!0;else{var i=t.end-this.T.currentTime,n=!(this.T.ended||this.T.duration-this.T.currentTime<a)&&i<a;n&&!this.mt&&(this.gt=setTimeout(this.Vt.bind(this),12e4),this.st()),this.mt=n}},p.prototype.Vt=function(){clearTimeout(this.gt),this.gt=-1,this.M({value:101,code:101,message:"Buffering timeout"})},p.prototype.jt=function(t){!this.T.paused||this.T.ended||this.T.error||this.yt||this.ut(t)},p.prototype.Yt=function(){var t=l(this.T).end-this.T.currentTime>a,i=this.T.buffered;if(i.length>1||!t)for(var n=this.T.currentTime,e=0;e<i.length;e++){var r=i.start(e),o=i.end(e);if(n<r&&o-r>a)return console.warn("jumping "+(r-n)+"s gap"),void(this.T.currentTime=r+a)}t&&(console.warn("stalled within buffer"),this.T.currentTime+=a)}}).call(this,n(31))},function(t,i,n){"use strict";var e,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(t,i,n){return Function.prototype.apply.call(t,i,n)};e=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function u(){u.init.call(this)}t.exports=u,u.EventEmitter=u,u.prototype.Wt=void 0,u.prototype.Gt=0,u.prototype.Ht=void 0;var a=10;function h(t){return void 0===t.Ht?u.defaultMaxListeners:t.Ht}function c(t,i,n,e){var r,o,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=t.Wt)?(o=t.Wt=Object.create(null),t.Gt=0):(void 0!==o.newListener&&(t.emit("newListener",i,n.listener?n.listener:n),o=t.Wt),s=o[i]),void 0===s)s=o[i]=n,++t.Gt;else if("function"==typeof s?s=o[i]=e?[n,s]:[s,n]:e?s.unshift(n):s.push(n),(r=h(t))>0&&s.length>r&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=i,u.count=s.length,function(t){console&&console.warn&&console.warn(t)}(u)}return t}function f(t,i,n){var e={fired:!1,wrapFn:void 0,target:t,type:i,listener:n},r=function(){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,t))}.bind(e);return r.listener=n,e.wrapFn=r,r}function d(t,i,n){var e=t.Wt;if(void 0===e)return[];var r=e[i];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var i=new Array(t.length),n=0;n<i.length;++n)i[n]=t[n].listener||t[n];return i}(r):v(r,r.length)}function l(t){var i=this.Wt;if(void 0!==i){var n=i[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,i){for(var n=new Array(i),e=0;e<i;++e)n[e]=t[e];return n}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),u.init=function(){void 0!==this.Wt&&this.Wt!==Object.getPrototypeOf(this).Wt||(this.Wt=Object.create(null),this.Gt=0),this.Ht=this.Ht||void 0},u.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.Ht=t,this},u.prototype.getMaxListeners=function(){return h(this)},u.prototype.emit=function(t){for(var i=[],n=1;n<arguments.length;n++)i.push(arguments[n]);var e="error"===t,r=this.Wt;if(void 0!==r)e=e&&void 0===r.error;else if(!e)return!1;if(e){var s;if(i.length>0&&(s=i[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)o(a,this,i);else{var h=a.length,c=v(a,h);for(n=0;n<h;++n)o(c[n],this,i)}return!0},u.prototype.addListener=function(t,i){return c(this,t,i,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(t,i){return c(this,t,i,!0)},u.prototype.once=function(t,i){if("function"!=typeof i)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i);return this.on(t,f(this,t,i)),this},u.prototype.prependOnceListener=function(t,i){if("function"!=typeof i)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i);return this.prependListener(t,f(this,t,i)),this},u.prototype.removeListener=function(t,i){var n,e,r,o,s;if("function"!=typeof i)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i);if(void 0===(e=this.Wt))return this;if(void 0===(n=e[t]))return this;if(n===i||n.listener===i)0==--this.Gt?this.Wt=Object.create(null):(delete e[t],e.removeListener&&this.emit("removeListener",t,n.listener||i));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===i||n[o].listener===i){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,i){for(;i+1<t.length;i++)t[i]=t[i+1];t.pop()}(n,r),1===n.length&&(e[t]=n[0]),void 0!==e.removeListener&&this.emit("removeListener",t,s||i)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(t){var i,n,e;if(void 0===(n=this.Wt))return this;if(void 0===n.removeListener)return 0===arguments.length?(this.Wt=Object.create(null),this.Gt=0):void 0!==n[t]&&(0==--this.Gt?this.Wt=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(e=0;e<o.length;++e)"removeListener"!==(r=o[e])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this.Wt=Object.create(null),this.Gt=0,this}if("function"==typeof(i=n[t]))this.removeListener(t,i);else if(void 0!==i)for(e=i.length-1;e>=0;e--)this.removeListener(t,i[e]);return this},u.prototype.listeners=function(t){return d(this,t,!0)},u.prototype.rawListeners=function(t){return d(this,t,!1)},u.listenerCount=function(t,i){return"function"==typeof t.listenerCount?t.listenerCount(i):l.call(t,i)},u.prototype.listenerCount=l,u.prototype.eventNames=function(){return this.Gt>0?e(this.Wt):[]}},function(t,i,n){var e=n(33),r=n(32),o=n(23),s=n(18),u=n(0).KEY_SYSTEMS,a=i.PlayerEvent=n(17),h=i.PlayerState=n(16),c=i.MetadataEvent=n(15),f=(i.ErrorType=n(14),i.ErrorSource=n(13),i.Profile=i.ProfileEvent=n(12));i.isWasmSupported="object"==typeof window.WebAssembly&&"function"==typeof window.WebAssembly.instantiate,i.canPlay="undefined"!=typeof MediaSource&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')&&-1===(navigator.appVersion||"").toLowerCase().indexOf("rv:11"),i.createWorker=function(t,i,n){var e=`\n        var Module = {\n            WASM_BINARY_URL: '${i}',\n            WASM_CACHE_MODE: ${n}\n        }\n        importScripts('${t}');\n    `;return new Worker(URL.createObjectURL(new Blob([e])))};var d=o.chrome&&63===o.major||o.opera,l=i.MediaPlayer=function(t,i){this.zt=i,this.qt=p(),this.Qt=new e,this.Xt=null,this.Jt=!0,this.$t=!1,this.Zt=!1,this.ti=t.isQualitySupported||E,this.ii=this.ni.bind(this),this.ei=this.ri.bind(this),this.oi=new r({ontimeupdate:this.si.bind(this),onbufferupdate:this.ui.bind(this),onended:this.ai.bind(this),onidle:this.hi.bind(this),onplaying:this.ci.bind(this),onstop:this.fi.bind(this),onerror:this.di.bind(this),onplay:this.li.bind(this),onvideodisplaysizechanged:this.vi.bind(this)});var s=function(t){try{return n(11)("./"+t+".json")}catch(t){return{}}}(t.settings),h=s.abr;this.Zt=h&&h.displaySizeChange,this.u={looping:!1,autoSwitchQuality:!0},this.pi={},this.mi(),this.yi(),this.Ei("create",[{settings:s,logLevel:String(t.logLevel),localStorage:function(t){var i=Object.create(null);try{for(var n=0;n<localStorage.length;n++){var e=localStorage.key(n);e.substr(0,t.length)===t&&(i[e.substr(t.length)]=localStorage.getItem(e))}}catch(t){console.warn("localStorage not available:",t)}return i}("cvp."),mseSupported:m(),keySystem:void 0!==t.keySystem?t.keySystem:function(t){if("function"==typeof navigator.requestMediaKeySystemAccess)return t.msie||t.msedge?u.PLAYREADY.uuid:u.WIDEVINE.uuid;return""}(o),analyticsEndpoint:t.analyticsEndpoint||"",browserContext:o}]),setTimeout(function(){this.Qt&&this.Qt.emit(a.INITIALIZED)}.bind(this),0)};function v(){}l.createWorker=i.createWorker,l.prototype.delete=function(){this.Ei("delete"),this.zt.removeEventListener("message",this.ei),document.removeEventListener("visibilitychange",this.ii),this.oi.delete(),this.zt=null,this.oi=null,this.Qt=null},l.prototype.getHTMLVideoElement=function(){return this.oi.videoElement()},l.prototype.load=function(t,i){this.Ei("load",[t,i||""]),this.mi()},l.prototype.play=function(){this.oi.captureGesture(),this.Jt=!1,this.bi()},l.prototype.pause=function(){this.Jt=!0,this.Ei("pause")},l.prototype.isPaused=function(){return this.Jt},l.prototype.seekTo=function(t){this.getDuration()>.5&&(t=Math.min(t,this.getDuration()-.5)),t=Math.max(0,t),this.Xt=t,this.Ei("seekTo",[t])},l.prototype.isSeeking=function(){return null!==this.Xt},l.prototype.getVideoSrc=function(){return this.oi.videoElement().src},l.prototype.getDuration=function(){return this.u.duration||this.oi.videoElement().duration},l.prototype.getStartOffset=function(){return this.u.startOffset},l.prototype.getPosition=function(){return null===this.Xt?this.oi.currentTime():this.Xt},l.prototype.getBuffered=function(){return this.oi.buffered()},l.prototype.getBufferDuration=function(){return this.oi.bufferDuration()},l.prototype.getPlayerState=function(){return this.u.playerState},l.prototype.getVideoWidth=function(){return this.oi.videoElement().videoWidth},l.prototype.getVideoHeight=function(){return this.oi.videoElement().videoHeight},l.prototype.getVideoFrameRate=function(){return this.oi.framerate()},l.prototype.getVideoBitRate=function(){return this.pi.videoBitRate},l.prototype.getBandwidthEstimate=function(){return this.pi.bandwidthEstimate},l.prototype.getVersion=function(){return"2.9.3-5c465488"},l.prototype.isLiveLowLatency=function(){return Boolean(this.u.twitchInfo.FUTURE)},l.prototype.isLooping=function(){return this.u.looping},l.prototype.setLooping=function(t){this.Ei("setLooping",[t]),this.u.looping=t},l.prototype.isMuted=function(){return this.oi.videoElement().muted},l.prototype.setMuted=function(t){this.oi.videoElement().muted=t,this.Ei("setMuted",[t]),this.Qt.emit(a.MUTED_CHANGED)},l.prototype.setVolume=function(t){this.oi.videoElement().volume=t,this.Ei("setVolume",[t]),this.Qt.emit(a.VOLUME_CHANGED)},l.prototype.getVolume=function(){return this.oi.videoElement().volume},l.prototype.getQuality=function(){return this.u.quality},l.prototype.setQuality=function(t,i){this.Ei("setQuality",[t,Boolean(i)]),this.u.autoSwitchQuality=!1},l.prototype.getQualities=function(){return this.u.qualities},l.prototype.setAuthToken=function(t){return this.Ei("setAuthToken",[t])},l.prototype.getAutoSwitchQuality=function(){return this.u.autoSwitchQuality},l.prototype.setAutoSwitchQuality=function(t){this.u.autoSwitchQuality=t,this.Ei("setAutoSwitchQuality",[t])},l.prototype.setAutoInitialBitrate=function(t){this.Ei("setAutoInitialBitrate",[t])},l.prototype.setAutoMaxBitrate=function(t){this.Ei("setAutoMaxBitrate",[t])},l.prototype.setAutoMaxVideoSize=function(t,i){this.Ei("setAutoMaxVideoSize",[t,i])},l.prototype.setAutoViewportSize=function(t,i){this.Ei("setAutoViewportSize",[t,i])},l.prototype.setAutoViewportScale=function(t){this.Ei("setAutoViewportScale",[t])},l.prototype.setAutoViewportSizeEnabled=function(t){this.Zt=t},l.prototype.getPlaybackRate=function(){return this.oi.videoElement().playbackRate},l.prototype.setPlaybackRate=function(t){this.Ei("setPlaybackRate",[t])},l.prototype.setAdInsertionEnabled=function(t){this.Ei("setAdInsertionEnabled",[t])},l.prototype.setClientId=function(t){this.Ei("setClientId",[t])},l.prototype.setPlayerType=function(t){return this.Ei("setPlayerType",[t])},l.prototype.setLiveMaxLatency=function(t){this.Ei("setLiveMaxLatency",[t])},l.prototype.setLiveLowLatencyEnabled=function(t){this.Ei("setLiveLowLatencyEnabled",[t])},l.prototype.setMinBuffer=function(t){this.Ei("setMinBuffer",[t])},l.prototype.setMaxBuffer=function(t){this.Ei("setMaxBuffer",[t])},l.prototype.setVisible=function(t){this.Ei("setVisible",[t])},l.prototype.setAnalyticsSendEvents=function(t){this.Ei("setAnalyticsSendEvents",[t])},l.prototype.setBufferReplaceEnabled=function(t){this.Ei("setBufferReplaceEnabled",[t])},l.prototype.addEventListener=function(t,i){this.Qt.on(t,i)},l.prototype.removeEventListener=function(t,i){this.Qt.removeListener(t,i)},l.prototype.getDroppedFrames=function(){return this.oi.droppedFrames()},l.prototype.getDecodedFrames=function(){return this.oi.decodedFrames()},l.prototype.getDisplayWidth=function(){return this.oi.videoElement().clientWidth},l.prototype.getDisplayHeight=function(){return this.oi.videoElement().clientHeight},l.prototype.getManifestInfo=function(){return this.u.twitchInfo},l.prototype.getLiveLatency=function(){return this.pi.broadcasterLatency},l.prototype.getBroadcasterLatency=function(){return 1e3*this.pi.broadcasterLatency},l.prototype.getTranscoderLatency=function(){return 1e3*this.pi.transcoderLatency},l.prototype.getNetworkProfile=function(){return this.pi.networkProfile},l.prototype.isProtected=function(){return this.oi.isProtected()},l.prototype.getSourceUrl=function(){return this.oi.srcUrl()},l.prototype.bi=function(){!document.hidden&&this.$t&&this.Ei("play")},l.prototype.Ei=function(t,i){this.zt.postMessage({id:this.qt,funcName:t,args:i})},l.prototype.mi=function(){y(this.u,{playerState:h.IDLE,quality:{name:"",group:"",codecs:"",bitrate:0,width:0,height:0,framerate:0},qualities:[],duration:0,startOffset:0,twitchInfo:{}}),y(this.pi,{videoBitRate:0,bandwidthEstimate:0,broadcasterLatency:0,transcoderLatency:0,networkProfile:[]}),this.Qt.emit(a.DURATION_CHANGED,{duration:0}),this.Xt=null,this.$t=!1},l.prototype.yi=function(){this.zt.addEventListener("message",this.ei),document.addEventListener("visibilitychange",this.ii);var t=this.Qt,i=this.oi,n=function(t){y(this.u,t)}.bind(this);t.on(a.QUALITY_CHANGED,n),t.on(a.AUTO_SWITCH_QUALITY_CHANGED,n),t.on(a.DURATION_CHANGED,n),t.on(a.VOLUME_CHANGED,this.wi.bind(this)),t.on(a.MUTED_CHANGED,this.Si.bind(this)),t.on(a.SEEK_COMPLETED,this.Ti.bind(this)),t.on(a.ERROR,this.gi.bind(this)),t.on(a.TWITCH_INFO,this.Ai.bind(this)),t.on(s.STATS,function(t){y(this.pi,t)}.bind(this)),t.on(s.STATE_CHANGED,this._i.bind(this)),t.on(s.SAVE_ITEM,this.Oi.bind(this)),t.on(s.CONFIGURE,i.configure.bind(i)),t.on(s.REINIT,i.reinit.bind(i)),t.on(s.ENQUEUE,i.enqueue.bind(i)),t.on(s.END_OF_STREAM,i.endOfStream.bind(i)),t.on(s.SET_TIMESTAMP_OFFSET,i.setTimestampOffset.bind(i)),t.on(s.PLAY,function(){this.Ri(),this.Qt.emit(a.PROFILE,f.MIN_BUFFER_READY)}.bind(this)),t.on(s.PAUSE,i.pause.bind(i)),t.on(s.REMOVE,i.remove.bind(i)),t.on(s.RESET,i.reset.bind(i)),t.on(s.SEEK_TO,i.seekTo.bind(i)),t.on(s.SET_PLAYBACK_RATE,i.setPlaybackRate.bind(i)),t.on(s.ADD_CUE,this.Ii.bind(this)),t.on(c.ID3,this.Ci.bind(this))},l.prototype.wi=function(){d&&document.hidden&&0===this.getVolume()&&this.Ei("pause")},l.prototype.Si=function(){d&&document.hidden&&this.isMuted()&&this.Ei("pause")},l.prototype.Ti=function(){this.Xt=null,this.getPlayerState()===h.PLAYING&&this.Qt.emit(h.PLAYING)},l.prototype.gi=function(){this.Jt=!0},l.prototype._i=function(t){switch(t.playerState){case h.READY:var i=this.Pi(t.qualities);t.qualities=i.supported,i.unsupported.forEach(function(t){this.Ei("removeQuality",[t])},this),this.$t=!0,this.Jt||this.bi();break;case h.ENDED:this.Jt=!0}y(this.u,t),t.playerState!==h.PLAYING&&this.Qt.emit(t.playerState)},l.prototype.Pi=function(t){var i=[],n=[];return t.forEach(function(t){this.ti(t)?i.push(t):n.push(t)},this),{supported:i,unsupported:n}},l.prototype.Oi=function(t){try{localStorage.setItem("cvp."+t.key,t.value)}catch(t){}},l.prototype.Ri=function(){this.oi.play().then(function(){this.Qt.emit(h.PLAYING)}.bind(this)).catch(v)},l.prototype.Ii=function(t){this.oi.addCue(t.start,t.end,function(i){this.Ei("onClientSinkCue",[t.id,i])}.bind(this))},l.prototype.Ci=function(t){t.forEach(function(t){if("TXXX"===t.id&&"segmentmetadata"===t.desc&&t.info.length){var i=function(t){try{return JSON.parse(t)}catch(i){return console.error("Failed JSON parse:",t),{}}}(t.info[0]);if(i.hasOwnProperty("stream_offset")){var n=Number(i.stream_offset);isNaN(n)||(this.u.startOffset=n-this.getPosition())}}}.bind(this))},l.prototype.ni=function(){this.Jt||document.hidden||this.bi(),d&&!this.Jt&&document.hidden&&(this.isMuted()||0===this.getVolume())&&this.Ei("pause")},l.prototype.si=function(){null===this.Xt&&(this.Ei("onClientSinkUpdate",[{currentTime:this.oi.currentTime(),decodedFrames:this.oi.decodedFrames(),droppedFrames:this.oi.droppedFrames(),framerate:this.oi.framerate()}]),this.Qt.emit(a.TIME_UPDATE))},l.prototype.ui=function(){this.Qt.emit(a.BUFFER_UPDATE)},l.prototype.ai=function(){this.Ei("onClientSinkEnded")},l.prototype.hi=function(){this.Ei("onClientSinkIdle")},l.prototype.ci=function(t){this.Ei("onClientSinkPlaying"),t&&this.play()},l.prototype.fi=function(t){document.hidden?this.Ei("pause"):t?this.isMuted()?(this.pause(),this.Qt.emit(a.PLAYBACK_BLOCKED)):(this.setMuted(!0),this.Ri(),this.Qt.emit(a.AUDIO_BLOCKED)):this.pause()},l.prototype.di=function(t){this.Ei("onClientSinkError",[t.value,t.code,t.message])},l.prototype.li=function(){this.Qt.emit(a.PROFILE,f.VIDEO_ELEMENT_PLAY)},l.prototype.vi=function(t,i){this.Zt&&this.setAutoViewportSize(t,i)},l.prototype.Ai=function(t){y(this.u,t)},l.prototype.ri=function(t){var i=t.data;i.id===this.qt&&this.Qt.emit(i.type,i.arg)};var p=function(){var t=0;return function(){return t++}}();function m(){return"undefined"!=typeof MediaSource}function y(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t}function E(t){return""===t.codecs||MediaSource.isTypeSupported('video/mp4;codecs="'+t.codecs+'"')}l.isVP9Supported=function(){return m()&&MediaSource.isTypeSupported('video/mp4;codecs="vp09.00.10.08"')}}]);