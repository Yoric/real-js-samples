var SlideExperienceLite;(function(n){function u(n,t,r,u,f,e,o,s,h,c){var l=new i(n,t,r,u,e,o,s,h,c);l.init()}function t(){sj_evt.fire("lazyLdImg")}var i=function(){function n(n,t,i,r,u,f,e,o,s){if(this.swipeThreshold=50,this.activeSlideIndex=0,this.scrolling=!1,this.id=n,this.controlId=t,this.bar=_ge(t),this.control=_ge(this.bar.id+"c"),this.viewport=this.getViewPortParent(this.bar)||this.bar.parentElement,this.showChevronAllTime=u,this.hideChevronsOnStart=o,this.paddingBuffer=s&&i?this.computePaddingBuffer():0,this.appns=this.control.getAttribute("data-appns"),this.kvalue=this.control.getAttribute("data-k"),this.slideExpType=i?"Carousel":"SlideShow",this.slideRightMargin=r,this.totalSlides=this.bar.childElementCount,this.totalSlides<=0)throw"no slides was found";this.initialViewportWidth=this.viewportWidth();this.getExtraBleedingMargin();this.enableCarouselSeeMore=f;this.shownSlideIndex=e;this.stateKey=this.control.getAttribute("data-stk")}return n.prototype.computePaddingBuffer=function(){if(_w.getComputedStyle){var n=_w.getComputedStyle(this.viewport);return parseInt(n.paddingTop)+parseInt(n.paddingBottom)}return 0},n.prototype.enableNativeScrolling=function(){var t,n,i,u,r;this.viewport.getAttribute("nativeScrollingEnabled")!=="1"&&(this.viewport.parentElement.style.overflow="hidden",t=this.viewport.offsetHeight,t===0?(Lib.CssClass.add(this.viewport,"scrollbar"),this.viewport.parentElement.style.position="relative",n=this.getViewPortParent(this.bar)||this.bar.parentElement,i=n.cloneNode(!0),i.style.opacity="0",i.style.overflow="hidden",n.style.position="absolute",n.style.width="100%",n.style.top="0",n.parentElement.insertBefore(i,n.parentElement.children[0]),this.bar.style.paddingBottom="10px"):(this.viewport.parentElement.style.height=""+t+"px",this.bar.style.height=""+this.viewportHeightToBarHeight(t)+"px",Lib.CssClass.add(this.viewport,"scrollbar"),u=this.viewport.offsetHeight,this.viewport.style.height=""+u+"px",this.viewport.style.marginBottom="-30px",this.viewport.style.paddingBottom="30px",this.enableCarouselSeeMore&&(r=_ge(this.controlId+"_carousel_seemore"),r.style.height=""+t+"px",r.style.lineHeight=""+t+"px")),this.viewport.setAttribute("nativeScrollingEnabled","1"))},n.prototype.init=function(){var n=this,i,u,f,t,e;this.enableNativeScrolling();sj_be(this.viewport,"scroll",function(){n.onScroll()});Swipe.OnSwipe(function(){Log.Log("Left","SlideExp","Swipe",!1,"Type",n.slideExpType,"AppNS",n.appns,"K",n.kvalue)},function(){Log.Log("Right","SlideExp","Swipe",!1,"Type",n.slideExpType,"AppNS",n.appns,"K",n.kvalue)},this.control,this.swipeThreshold,function(){},function(t){n.isLeft=t>0;n.isRight=t<0;Log.Log("NoOp","SlideExp","Swipe",!1,"Type",n.slideExpType,"AppNS",n.appns,"K",n.kvalue)},function(){sj_evt.fire("slideexp_movestart",n.controlId)},!0,!1);sj_be(this.control,"mousedown",function(t){i=t.pageX;u=t.pageY;t.preventDefault&&t.preventDefault();var r=t.pageX,f=function(t){var i=t.pageX-r;n.viewport.scrollLeft-=i;r=t.pageX},e=function(){sj_ue(_w,"mousemove",f,!0);sj_ue(_w,"mouseup",e,!0)};sj_be(_w,"mousemove",f,!0);sj_be(_w,"mouseup",e,!0)},!0);f=function(n){(Math.abs(n.pageX-i)>5||Math.abs(n.pageY-u)>5)&&n.preventDefault&&n.preventDefault()};sj_be(this.control,"click",f,!0);this.updateMaxScrollLeft();Orientation.onOrientation(function(t){n.updateMaxScrollLeft();var i=_ge(n.controlId);i?Log.Log(t?"Landsc":"Portrt","SlideExp","Rotate",!1,"Type",n.slideExpType,"AppNS",n.appns,"K",n.kvalue):Log.Log(t?"Landsc":"Portrt","SlideExp","Rotate",!1,"Type",n.slideExpType,"GeE","1","AppNS",n.appns,"K",n.kvalue);sj_evt.fire("slideexp_rotate",n.controlId,i?null:n.bar)});for(sj_be(this.control,"mouseover",function(){n.enableChevronsOnSlideExperienceInvisibility();sj_evt.fire("slideexp_mouseover_show",n.controlId)}),sj_be(this.control,"mouseout",function(){n.showChevronAllTime||sj_evt.fire("slideexp_mouseout_hide",n.controlId)}),sj_evt.bind("slideexp_slideprev",function(t){n.isEventForMe(t)&&n.slidePrev()}),sj_evt.bind("slideexp_slidenext",function(t){n.isEventForMe(t)&&n.slideNext()}),sj_evt.bind("slideexp_slidetoindex",function(t){if(n.isEventForMe(t)){var i=t[2];Log.Log("SlideTo","SlideExp","ID"+i,!1,"Type",n.slideExpType,"AppNS",n.appns,"K",n.kvalue)}},!0),t=0;t<this.bar.childElementCount;++t)sj_be(this.bar.children[t],"keydown",function(t){return function(i){i.keyCode===37&&t!==0?n.slideToIndex(t-1,!0):i.keyCode===39&&t!==n.bar.childElementCount-1&&n.slideToIndex(t+1,!0)}}(t));this.showChevronAllTime&&!this.hideChevronsOnStart&&(this.updateChevrons(),sj_evt.fire("slideexp_mouseover_show",this.controlId));this.updatePager();this.updateChevrons();e=this;r[this.id]=e;sj_evt.fire("slideexp_init_done",this.controlId)},n.prototype.onScroll=function(){var n=this;this.scrolling||(this.scrolling=!0,sb_st(function(){n.updatePager();n.updateChevrons();sj_evt.fire("slideexp_scroll",n.controlId);Log.Log("Scroll","SlideExp","Scroll",!1,"Type",n.slideExpType,"AppNS",n.appns,"K",n.kvalue);n.scrolling=!1},1e3))},n.prototype.viewportHeightToBarHeight=function(n){return n-this.paddingBuffer},n.prototype.enableChevronsOnSlideExperienceInvisibility=function(){this.updateMaxScrollLeft();this.updateChevrons()},n.prototype.getElementWidth=function(n){if(_w.getComputedStyle){var t=_w.getComputedStyle(n).width;return Number(t.substring(0,t.length-2))}return n.scrollWidth},n.prototype.updateMaxScrollLeft=function(){this.maxScrollLeft=this.viewport.scrollWidth-this.viewport.offsetWidth},n.prototype.firstElementChild=function(n){if(n.firstElementChild)return n.firstElementChild;for(var t=n.firstChild;t;){if(t.nodeType==1)return t;t=t.nextSibling}return null},n.prototype.slideWidth=function(){return this.getElementWidth(this.firstElementChild(this.bar))},n.prototype.viewportWidth=function(){return this.getElementWidth(this.viewport)},n.prototype.isCssTransitionSupported=function(){var n=this.viewport.style,t=n.WebkitTransition!=null,i=n.MozTransition!=null,r=n.OTransition!=null;return t||i||r||n.transition!=null},n.prototype.getActiveSlide=function(){return Math.round(this.viewport.scrollLeft/this.slideWidth())},n.prototype.getSlide=function(n){return this.bar.children[n]},n.prototype.updatePager=function(n){t();n||(n=this.activeSlideIndex);sj_evt.fire("pager_updateindex",this.controlId,n)},n.prototype.setSlideTabFocus=function(){for(var t,i,n=0;n<this.bar.childElementCount;n++)t=this.bar.children[n],t.removeAttribute("tabindex");i=this.bar.children[this.activeSlideIndex];i.tabIndex=0},n.prototype.slidePrev=function(){var n;if(!this.isLeftMost()){var r=this.slideWidth(),u=this.viewportWidth(),i=r+this.slideRightMargin,f=u%i>=r?1:0,e=Math.floor(u/i)+f,o=Math.ceil(this.viewport.scrollLeft/i),s=Math.max(0,o-e);n=s*i;n=Math.max(n,0);this.slideToOffset(n);sj_evt.fire("slideexp_slideprev_move",this.controlId);Log.Log("Prev","SlideExp","Slide",!1,"Type",this.slideExpType,"AppNS",this.appns,"K",this.kvalue);t()}},n.prototype.slideNext=function(){var n;if(!this.isRightMost()){var r=this.slideWidth(),u=this.viewportWidth(),i=r+this.slideRightMargin,f=(this.viewport.scrollLeft+u)%i>=r?1:0,e=Math.floor((this.viewport.scrollLeft+u)/i)+f;n=e*i;n=Math.min(n,this.maxScrollLeft);this.slideToOffset(n);sj_evt.fire("slideexp_slidenext_move",this.controlId);Log.Log("Next","SlideExp","Slide",!1,"Type",this.slideExpType,"AppNS",this.appns,"K",this.kvalue);t()}},n.prototype.slideToIndex=function(n,i,r){var u=this,f;(i===void 0&&(i=!1),r===void 0&&(r=!1),t(),n<0||n>=this.totalSlides)||(f=this.slideWidth()*n,this.activeSlideIndex=n,i&&this.setSlideTabFocus(),sb_st(function(){u.slideToOffset(f,i?function(){u.setFocusOnCurrentSlide()}:null,r)},0),sj_evt.fire("slideexp_toActiveIndex",this.controlId,n),t())},n.prototype.getExtraBleedingMargin=function(){return(!this.extraBleedingMargin||this.extraBleedingMargin<=0)&&(this.extraBleedingMargin=this.viewport.scrollWidth-(this.totalSlides*(this.slideWidth()+this.slideRightMargin)-this.slideRightMargin)+Math.abs(parseInt(getComputedStyle(this.bar).marginLeft))),this.extraBleedingMargin},n.prototype.setFocusOnCurrentSlide=function(){var n=this.bar.children[this.activeSlideIndex];n.focus()},n.prototype.slideToOffset=function(n,t,i){t===void 0&&(t=null);i===void 0&&(i=!1);this.updateMaxScrollLeft();var r=this.maxScrollLeft;n<0?n=0:n>r&&(n=r);this.updatePager();i?(this.viewport.scrollLeft=n,t&&t()):this.isCssTransitionSupported()&&this.slideToOffsetUsingTransition(n,t)},n.prototype.slideToOffsetUsingTransition=function(n,t){var i=this,u,r;if(t===void 0&&(t=null),u=n-this.viewport.scrollLeft,u===0){t&&t();return}r=function(){Lib.CssClass.remove(i.bar,"anim");i.bar.style.transition="x";i.bar.style.marginLeft="";i.viewport.scrollLeft=n;i.updateChevrons();sj_ue(i.bar,"transitionend",r);sj_ue(i.bar,"webkitTransitionEnd",r);sj_ue(i.bar,"oTransitionEnd",r);t&&t()};sj_be(this.bar,"transitionend",r);sj_be(this.bar,"webkitTransitionEnd",r);sj_be(this.bar,"oTransitionEnd",r);this.bar.style.transition="";Lib.CssClass.add(this.bar,"anim");this.bar.style.marginLeft=""+-u+"px"},n.prototype.isLeftMost=function(){return this.updateMaxScrollLeft(),this.viewport.scrollLeft<=0},n.prototype.isRightMost=function(){return this.updateMaxScrollLeft(),Math.ceil(this.viewport.scrollLeft)>=this.maxScrollLeft},n.prototype.updateChevrons=function(){if(t(),this.isLeftMost()&&this.isRightMost()){sj_evt.fire("slideexp_leftrightmost",this.controlId);return}if(this.isLeftMost()){sj_evt.fire("slideexp_leftmost",this.controlId);return}if(this.isRightMost()){sj_evt.fire("slideexp_rightmost",this.controlId);return}sj_evt.fire("slideexp_middle",this.controlId)},n.prototype.isEventForMe=function(n){var t=n[1];return t==this.controlId||t==this.controlId+"c"},n.prototype.getViewPortParent=function(n){return n==null||this.control==n?null:Lib.CssClass.contains(n,"b_viewport")?n:this.getViewPortParent(n.parentElement)},n}(),r={};n.init=u;sj_evt.fire("slideexperiencelite_init",n)})(SlideExperienceLite||(SlideExperienceLite={}))