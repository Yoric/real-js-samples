(function(){function c(){t=typeof VideoFavoritesUtil!="undefined";i=typeof VideoFavoritesSignIn!="undefined";t&&i?r():(SmartEvent.bindc(f,function(){t&&i?r():t=!0}),SmartEvent.bindc(e,function(){t&&i?r():i=!0}))}function r(){SmartEvent.bindc("VideoFavoritesAddItemEvent",l);SmartEvent.bindc("VideoFavoritesRemoveItemEvent",v);sj_evt.fire("Favorites.Loaded")}function l(t){if(t&&t.length>2){var i=!0;t[2].id!="undofav"&&(i=o.afb(t[2]));i?(u(t[1],t[2],n.TransactionType.Write,null),h&&a(t)):sj_evt.fire("StatefulAction.SwitchState",t[2])}}function a(n){n&&n.length>=2&&sj_evt.fire("Favorites.ShowMoveToBalloon",n[1].mid,n[2].parentNode)}function v(t){sj_evt.fire("AddUndo",t[2]);t&&t.length>2&&u(t[1],t[2],n.TransactionType.Delete,null)}function u(t,i,r,u){var f=n.extns(i);f&&n.lfi(f,n.instCl,n.addFromResultPageInstComponentName,JSON.stringify(t));s=i;n.sxhr(t,r,i,u)}var f="FavUtils.Loaded",e="FavSignIn.Loaded",t,i=!1,n=VideoFavoritesUtil,o=VideoFavoritesSignIn,s,h=_ge("fav_move_ba");c()})()