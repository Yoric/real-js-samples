/* sohutv 2019-04-09 10:55:35 */
!function(e,C,B){var t,L=function(e,t,a){a=1==a?"1":"0";var i="?url="+escape(location.href)+"&type="+e+"&txid="+t+"&other="+a+"&refer="+escape(document.referrer)+"&sid="+B.cookie("SUV")+"&fuid="+B.cookie("fuid")+"&playlistid="+window.playlistId+"&vid="+window.vid+"&catecode="+(window.cateCode||window.cateId)+"&cid="+window.cid+"&ver=v20141016&_="+1e13*Math.random();return B.pingback("http://pv.hd.sohu.com/mc.gif"+i)},a="//api.my.tv.sohu.com/comment/api/v1/",T={load:a+"load?",commentsList:a+"load?",replyList:a+"reply?",action:a+"like?",submit:a+"publish?",report:a+"report?"},z=null,J=((t=C.trim(window.tag||window.tags||"").substr(0,50)).substr(0,t.lastIndexOf(" ")),["\x3c!-- Start:remark-mask --\x3e",'<div class="remark-mask" style="display:none;">','    <div class="remark-mask-bg"></div>','    <div class="remark-mask-con">','        <table class="remark-mask-table"><tr><td class="remark-mask-td"><div class="remark-mask-link"><img src="" class="remark-mask-photo"><span class="remark-mask-close"></span></div></td></tr></table>',"    </div>","</div>","\x3c!-- End:remark-mask --\x3e"].join("")),M={};M.comment_head=["",'<div class="remark-tit" pb-impress data-pb-txid="pg_cmt"><strong>\u8ba8\u8bba\u533a</strong>(<%=participation_count_tip %>\u4eba\u53c2\u4e0e)</div>'].join(""),M.huati=["","<% if(huati){%>","<% if(huati.subjectImg){%>",'<div class="remark-huati" style="background:url(<%= huati.subjectImg%>) no-repeat left bottom;"> ',"<%}else{%>",'<div class="remark-huati-grey" >',"<%}%>",'        \t<div class="remark-huati-tit"><%=huati.subjectTitle%></div>','            <div class="remark-huati-con">',"            \t<p><%=huati.subjectDesc%></p>",'            \t<div class="cfix"><a href="javascript:void(0);"  pb-click data-pb-txid="pg_cmt_topic" class="remark-huati-kan l">\u67e5\u770b\u8bdd\u9898\u8bc4\u8bba<span class="f-song">&gt;&gt;</span></a><a data-title="<%=huati.subjectKeyword%>" data-hid="<%=huati.id%>" href="javascript:void(0);" class="remark-btn-white r J_huati_add" pb-click data-pb-txid="pg_cmt_join">\u53c2\u4e0e\u8bdd\u9898</a></div>',"            </div>","        </div>","      <%}%>"].join(""),M.jubao=["",' <div class="l rel remark-jubao-box" >            ','     <a href="javascript:void(0)" class="remark-list-jubao"><em>\u4e3e\u62a5</em></a>            ',"     \x3c!-- Start:remark-jubao --\x3e            ",'     <div class="remark-jubao">','         <span class="remark-jubao-arrow"></span>','         <p class="remark-jubao-tit">\u4e3e\u62a5\u539f\u56e0</p>','         <ul class="cfix">','           <li pb-click data-pb-txid="pg_cmt_report" data-pb-other="sq"><span data-rid="1" class="remark-jubao-radio"></span> \u8272\u60c5\u6deb\u79fd</li>','           <li pb-click data-pb-txid="pg_cmt_report" data-pb-other="lj"><span data-rid="2" class="remark-jubao-radio"></span> \u5e7f\u544a\u5783\u573e</li>','           <li pb-click data-pb-txid="pg_cmt_report" data-pb-other="wf"><span data-rid="3" class="remark-jubao-radio"></span> \u8fdd\u6cd5\u4fe1\u606f</li>','           <li pb-click data-pb-txid="pg_cmt_report" data-pb-other="qt"><span data-rid="4" class="remark-jubao-radio remark-jubao-radio-checked"></span> \u5176\u4ed6</li>',"         </ul>",'         <div class="cfix"><a href="javascript:void(0);" class="remark-btn-red l J_jubao">\u786e\u5b9a</a><a href="javascript:void(0);" class="remark-btn-white  r J_cancel">\u53d6\u6d88</a></div>',"     </div>               ","     \x3c!-- End:remark-jubao --\x3e          "," </div>"].join(""),M.textarea=["",'<div class="rkBox-Max cfix">','  <div class="tex">','      <textarea id="commentTextarea"  maxlength="300" onchange="this.value=this.value.substring(0, 300)" placeholder="\u6709\u4ec0\u4e48\u611f\u60f3\uff1f\u4e00\u8d77\u6765\u804a\u804a\u5427"></textarea>',"  </div>",'  <div class="bot">','      <input class="remark-btn-red r" value="\u53d1\u8868\u8bc4\u8bba" type="button" id="commentSubmit" needlogin="true" data-type="submit">',' <span class="r J_num" style="display: none;">\u8fd8\u53ef\u4ee5\u8f93\u5165<em class="js_comment_num">300</em>\u5b57</span>',"  </div>","</div>"].join(""),M.listTitle=["",,'<% if($("#commPage").length>0){$("#commPage").remove();}%>','<div class="cfix remark-total" id="commPage">','  <div id="pagination_5" class="pages-1 r"></div>',"</div>"].join(""),M.replylist=["","<% if(replies.length){%>","<%$.each(replies,function(i,vals){%>",'<li class="J_reply_li">','    <p class="p1">','        <a href="<%=vals.user.profileurl %>" class="reply-name" pb-click data-pb-txid="pg_cmt_user" data-pb-other="icon" target="_blank">','            <img src="<%=vals.user.smallphoto || "//css.tv.itc.cn/channel/space/avatar/01_small.jpg" %>" alt="<%=vals.user.nickname%>" class="reply-pic">',"        </a>",'        <a href="<%=vals.user.profileurl %>" class="reply-name rername" pb-click data-pb-txid="pg_cmt_user" data-pb-other="icon" target="_blank">',"        <%=vals.user.nickname%></a>","        <%if(vals.is_topic_author==1){%>",'            <span class="author"></span>',"        <%}%>","    </p>",'    <p class="p2">',"      <% var _comment =vals.reply;if(_comment&&_comment.user){ %>",'      \u56de\u590d<a target="_blank" title="" href="<%=_comment.user.profileurl%>">@<%=_comment.user.nickname%></a>\uff1a<%}%>',"    <%=helper.replEmoj(vals.content)%></p>",'    <div class="remark-list-bot cfix">   ','        <span class="remark-list-time l"><%=vals.publishtime%></span>','        <div class="remark-fun r J_jubao_div"  data-mpid="<%= vals.mp_id %>" data-cmid="<%=vals.comment_id%>">        ',M.jubao,'            <a class="remark-list-zan" href="javascript:void(0)" data-mpid="<%= vals.mp_id %>" pb-click data-pb-txid="pg_cmt_recmtzan" data-ding="<%=vals.comment_id%>">','               <em class="rline" data-count="<%= vals.like_count %>"><% if(vals.like_count>0){ %><%=vals.like_count_tip%><% } %></em></a>','            <a class="remark-list-reply reply" data-cmid="<%=vals.comment_id%>" data-reply="<%= vals.mp_id %>" pb-click data-pb-txid="pg_cmt_recmtre" href="javascript:void(0)" data-name="<%=vals.user.nickname%>" data-href="<%=vals.user.profileurl %>"></a>',"        </div>","    </div>","</li>","<%});%>","<% }%>"].join(""),M.list=["","<% comments = $.grep(comments,function(val){return !val.top}); %>","<% if(comments.length){%>","<%$.each(comments,function(i,val){%>",'<div class="remark-list cfix" data-cmid="<%= val.comment_id%>" data-mpid="<%= val.mp_id %>" data-dmpid ="<%=val.mp_id %>" data-index="<%= val.index || i%>">','    <a class="remark-list-pic" href="<%=val.user.profileurl%>" pb-click data-pb-txid="pg_cmt_user" data-pb-other="icon" target="_blank"><img width="30" height="30" alt="<%=val.user.nickname%>" src="<%=val.user.smallphoto || "//css.tv.itc.cn/channel/space/avatar/01_small.jpg" %>"></a>','    <p class="remark-list-name">','        <a class="rname" pb-click data-pb-txid="pg_cmt_user" data-pb-other="name"  href="<%=val.user.profileurl%>" target="_blank"><%=val.user.nickname%></a>',"        <%if(val.user.ismedia){%>",'            <img src="<%=val.user.mediaInfo.mediaIcons["01"] %>" width="14" height="15" class="ruser" title="<%= val.user.mediaInfo.mediatitle %>">',"        <%}else{%>","            <%if(val.user.vipInfo&&val.user.vipInfo.vipfeetype == 1 && val.user.vipInfo.vipicon){%>",'                <a  pb-click data-pb-txid="pg_cmt_uservip" href="//film.sohu.com/silverVip.html" target="_blank"><img width="16" class="remark-list-vip"  height="12" alt="\u5feb\u6765\u4e00\u8d77\u4eab\u53d7\u53bb\u5e7f\u544a\u670d\u52a1~" src="<%= val.user.vipInfo.vipicon %>"/></a>',"            <%} else if(val.user.vipInfo&&val.user.vipInfo.vipfeetype == 2 && val.user.vipInfo.vipicon){%>",'                <a  pb-click data-pb-txid="pg_cmt_uservip" href="//film.sohu.com/vip.html"  target="_blank"><img width="16" style="margin-top:5px" class="remark-list-vip" height="12" alt="\u5feb\u6765\u4e00\u8d77\u4eab\u53d7\u53bb\u5e7f\u544a\u670d\u52a1~" src="<%= val.user.vipInfo.vipicon%>"/></a>',"            <%}else{%>",'                <a style="display:none"></a>',"            <%}%>","        <%}%>","        <%if(val.is_topic_author==1){%>",'            <span class="author"></span>',"        <%}%>","    </p>",'    <p class="remark-list-text">',"        <%=helper.replEmoj(val.content)%>","    </p>","  <% if(val.attachment_info&&val.attachment_info.image){ var _img=val.attachment_info.image[0]; %> ",'    <div class="remark-list-photo" data-width="<%= _img.width %>" data-height="<%= _img.height %>" data-img="<%= _img.url %>">','        <a href="javascript:void(0);"><img src="<%= _img.thumbUrl %>"></a>',"    </div>","  <% } %>",'    <div class="remark-list-bot cfix">   ','        <span class="remark-list-time l"><%=val.publishtime%></span>','        <div class="remark-fun r J_jubao_div"  data-mpid="<%= val.mp_id %>" data-cmid="<%=val.comment_id%>">        ',M.jubao,'            <a class="remark-list-zan" href="javascript:void(0)" pb-click data-pb-txid="pg_cmt_ding"  data-mpid="<%= val.mp_id %>" data-ding="<%=val.comment_id%>">','               <em class="rline" data-count="<%= val.like_count %>"><% if(val.like_count>0){ %><%=val.like_count_tip%><% } %></em></a>','            <a class="remark-list-reply reply" data-cmid="<%=val.comment_id%>" data-reply="<%=val.mp_id%>" pb-click data-pb-txid="pg_cmt_recmt" href="javascript:void(0)"><em class="J_count"><% if(val.reply_count>0){ %><%=val.reply_count_tip%><%}%></em></a>',"        </div>","    </div>",'    <div class="rkBox" data-cmid="<%= val.comment_id %>" data-replytxt="<%=val.mp_id%>" id="rp<%=val.mp_id%>">','      <div class="tex disNone"><span class="tex-arr"></span>','          <input type="text" id="recommentTextarea" class="inp_reply" maxlength="300" data-value="\u56de\u590d\u4e00\u4e0b\u4f60\u7684\u770b\u6cd5.." placeholder="\u56de\u590d\u4e00\u4e0b\u4f60\u7684\u770b\u6cd5..">','          <input type="button" data-replyid="<%= val.mp_id%>" data-cmid="<%=val.comment_id%>" data-type="resubmit" value="\u56de\u590d" class="remark-btn-red">',"      </div>","      \x3c!-- Start:rkBox-list --\x3e",'      <ul class="rkBox-list cfix J_reply_box">',"          <% replies = val.replies||[]; %>",M.replylist,"      </ul>","      \x3c!-- End:rkBox-list --\x3e","      <% if(replies.length>0&&val.reply_count>2){%>",'          <div class="rkBox-more" data-cmid = "<%=val.comment_id%>" data-mpid="<%= val.mp_id %>"><a href="###">\u67e5\u770b\u5168\u90e8<em class="J_count"><%= val.reply_count_tip%></em>\u6761\u56de\u590d<span class="rkBox-more-arrow"></span></a></div>',"      <% }%>","    </div>","</div>","<%});%>","<% }%>"].join(""),M.nocomment=["",M.comment_head,M.huati,M.textarea,'<div class="shafa"></div>','  <div id="pagination_5" class="pages-1 r"></div>',"</div>",""].join(""),M.layout=["",M.comment_head,M.huati,M.textarea,'<div class="remark-tab J_tab_check">','\t<ul class="cfix">','    \t<li id="time"  pb-click data-pb-txid="pg_cmt_alltab" class="on">\u5168\u90e8</li>','        <li id="new"  pb-click data-pb-txid="pg_cmt_newtab">\u6700\u65b0</li>','        <li id="hot"  pb-click data-pb-txid="pg_cmt_hottab">\u6700\u70ed</li>','        <li id="tv_subject"  pb-click data-pb-txid="pg_cmt_topictab">\u8bdd\u9898</li>',"    </ul>","</div>",'<div class="J_new">',"</div>",'<div class="J_comment_hotList">',M.hotList,"</div>",'  <div class="J_comment_list">',M.list,"  </div>",M.listTitle,"</div>",""].join("");var D=['<style type="text/css">',"body{background:#fff;}","a:focus,input:focus{outline: none;}","a:hover{text-decoration:none;}",".grey{color:#ccc;}",".r{float:right;}",".l{float:left;}",".rel{position:relative;}",".c-red,",".c-red a{color:#e73c31;}",".c-red:hover{color:#ed7168;}","textarea{-webkit-appearance:none;outline-style:none;resize:none;color:#949494;background:none;border:0;}",".remarkNo{background:url(//css.tv.itc.cn/channel/play_v1_img/shafa.png) no-repeat center center;height:65px;margin-right:20px;padding:20px 0 28px;} ",".J_comment_list{font: 12px/18px arial hiragino sans gb,microsoft yahei,simsun;}",".remark-jubao-arrow,",".remark-list-jubao,",".remark-list-zan,",".remark-list-reply,",".rkBox .tex-arr,",".page1-btnL,",".page1-btnR,",".remark-list .author,",".rkBox-more-arrow{background:url(//css.tv.itc.cn/channel/play_v1_img/remark/ico-remark.png) no-repeat;display:inline-block;}",".remark-tit{margin:0px 0 9px;}",".remark-tit strong{font-size:16px;font-weight:normal;color:#3a3a3a;margin-right:15px;}",".remark-tab ul{border-bottom:1px solid #e6e6e8;}",".remark-tab li{float:left;cursor:pointer;font-size:14px;color:#3a3a3a;padding:0 20px 7px;margin-bottom:-1px;}",".remark-tab li.on{border-bottom:2px solid #e73c31;color:#e73c31;}",".remark-total{margin:10px 0;}",".remark-total .entry{font-size:14px;padding:3px 0;}",".remark-btn-red,",'.remark-btn-white{display:inline-block;font-family:"Microsoft Yahei";border:1px solid #e73c31;width:70px;height:24px;text-align:center;}',".remark-btn-red{background:#e73c31;color:#fff;cursor:pointer;}",".remark-btn-red:hover{background:#ec635a;border-color:#ec635a;color:#fff;}",".remark-btn-white{background:#fff;border-color:#e73c31;color:#e73c31;}",".remark-btn-white:hover{background:#e73c31;color:#fff;}","/* remark-jubao */",".remark-jubao{background:#fff;border:1px solid #d2d2d2;position:absolute;top:28px;left:-95px;width:168px;padding:10px 15px 15px;z-index:2;box-shadow:0 0 3px #cfcfcf;-webkit-box-shadow:0 0 3px #cfcfcf;}",".remark-jubao ul{margin:10px 0 4px;}",".remark-jubao li{float:left;color:#3a3a3a;width:75px;margin:0 9px 5px 0;}",".remark-jubao li:hover{cursor:pointer;}",".remark-jubao-tit{color:#b2b2b2;font-size:14px;}",".remark-jubao-arrow{background-position:-51px 0;width:12px;height:7px;overflow:hidden;position:absolute;top:-7px;left:95px;}",".remark-jubao-radio{display:inline-block;width:12px;height:12px;background:url(//css.tv.itc.cn/channel/play_v1_img/remark/ico-remark.png) no-repeat;vertical-align:middle;margin:0 5px 5px 0;_margin:6px 5px 0 0;}",".remark-jubao-radio-checked{background-position:-14px 0;}","/* remark-huati */",".remark-huati{background:#f8e9e4 url(//css.tv.itc.cn/channel/play_v1_img/remark/huati-bg.jpg) no-repeat left bottom;padding:12px 10px 10px;margin:0 0 15px;}",".remark-huati-tit{font-size:16px;color:#3a3a3a;margin:0 -8px 2px 0;}",".remark-huati-con{padding:0 0 0 113px;}",".remark-huati-con p{margin:8px 0 15px;height:84px;overflow:hidden;line-height:21px;}",".remark-huati-con .remark-btn-white{width:68px;height:21px;line-height:21px;}",".remark-huati-grey{background:#f9f9f9;padding:15px 10px;margin:0 0 15px;}",".remark-huati-grey .remark-huati-con{padding:0;}",".remark-huati-kan{margin:3px 0 0;}","/* remark-list */",".remark-list{background:url(//css.tv.itc.cn/channel/play_v1_img/remark/dot-2.png) repeat-x bottom;*background-position:left bottom;padding:17px 0 20px 50px;position:relative;}",".remark-list-name{margin:1px 0 5px;position:relative;}",".remark-list-pic{width:40px;position:absolute;top:20px;left:0;}",".remark-list-pic img{border-radius:50%;-webkit-border-radius:50%;width:40px;height:40px;}",".remark-list-text{color:#333;font-size:14px;line-height:24px;margin:3px 0 6px;word-break:break-all;word-wrap:break-word;overflow:hidden;}",".remark-list-bot,",".remark-list-bot a{color:#999;}",".remark-list-bot a:hover{color:#e73c31;}",".remark-list-bot .remark-btn-red:hover{color:#fff;}",".remark-list-bot .remark-btn-white{color:#e73c31;line-height:22px;width:68px;height:22px;}",".remark-list-bot .remark-btn-white:hover{color:#fff;}",".remark-list-bot .remark-btn-red{color:#fff;line-height:22px;width:68px;height:22px;}",".remark-list-jubao,",".remark-list-zan,",".remark-list-reply{height:18px;vertical-align:top;background-position:0 -27px;padding:0 0 0 18px;}",".remark-list-zan{margin:0 10px;color:#999;}",".remark-list-zan:hover{background-position:0 -57px;}",".remark-list-zaned,",".remark-list-zaned:hover{background-position:0 -85px;}",".remark-list-reply{background-position:0 -115px;color:#999;}",".remark-list-reply:hover{background-position:0 -145px;}",".remark-list-jubao{background-position:0 -175px;padding-left:19px;}",".remark-list-jubao:hover{background-position:0 -205px;}",".remark-jubao-box{display:none;padding:0 0 10px;margin-bottom:-10px;z-index:20;}",".remark-jubao{display:none;}",".remark-jubao-box-hover{z-index:21;}",".remark-jubao-box-hover .remark-jubao{display:block;}",".remark-list-hover .remark-jubao-box{display:block;}",".remark-list .author{background-position:0 -351px;width:57px;height:18px;vertical-align:middle;margin-left:3px;}",".remark-list .ruser,",".remark-list .rname{    max-width: 170px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;display:inline-block;vertical-align:middle;margin-right:7px;}",".remark-list .rername{    max-width: 144px; overflow: hidden; white-space: nowrap; display: inline-block; text-overflow: ellipsis; vertical-align: middle;}",".remark-list-photo{margin:0 0 15px;}",'.remark-list-photo a{max-width:100%;display:inline-block;position:relative;cursor:url("//css.tv.itc.cn/channel/play_v1_img/remark/ico-add.cur"),pointer;}',".remark-list-photo img{max-width:240px;max-height:240px;}",".remark-mask-bg{background:#000;filter:alpha(opacity=50);opacity:0.5;width:100%;height:100%;position:fixed;top:0;left:0;z-index:1111;}",".remark-mask-con{position:fixed;top:0;left:0;z-index:1112;width:100%;height:100%;}",".remark-mask-td,",".remark-mask-table{border-collapse:collapse;height:100%;width:100%;}",".remark-mask-photo{max-height:100%;max-width:100%;height:auto;}",".remark-mask-td{vertical-align:middle;text-align:center;}",".remark-mask-link{position:relative;margin:0 auto;}",".remark-mask-close{display:block;background:url(//css.tv.itc.cn/channel/play_v1_img/remark/close.png) no-repeat;width:40px;height:40px;position:absolute;top:-20px;right:-20px;cursor:pointer;}",".disNone{display:none;}","/* rkBox */",".rkBox{background:#f9f9f9;margin:13px 0 0;}",".rkBox.mar{margin:-5px 0 20px;}",".rkBox .J_reply_li{margin:0 10px;padding:11px 0 7px;background:url(//css.tv.itc.cn/channel/play_v1_img/remark/dot.png) repeat-x left bottom;}",".rkBox .J_reply_li:last-child{background:none;}",".rkBox .p1{color:#999;margin:0 0 7px;}",".rkBox .p2{color:#3a3a3a;line-height:20px;margin:0 0 5px;word-break:break-all;word-wrap:break-word;overflow:hidden;}",".rkBox .p2 .reply{color:#999;margin:0 5px 0 0;}",".rkBox .tex{height:24px;padding:5px 65px 5px 8px;position:relative;background:#fff;border:1px solid #d2d2d2;margin:0 0 1px;}",'.rkBox .tex .inp_reply{border:none;vertical-align:top;width:100%;color:#999;font:14px/22px "Microsoft YaHei";background:none;}',".rkBox .tex-active .inp_reply{color:#3a3a3a;}",".rkBox .tex-warn{border-color:#e73b30;background:#ffefee;}",".rkBox .tex-active{border-color:#e73b30;}",".rkBox .tex-warn .inp_reply{color:#e73b30;background: #ffefee}",".rkBox .tex-arr{display:block;position:absolute;top:-6px;right:17px;width:13px;height:6px;overflow:hidden;background-position:-51px 0;}",".rkBox .tex-warn .tex-arr,",".rkBox .tex-active .tex-arr{background-position:-28px 0;display:inline-block;width:11px;height:6px;overflow:hidden;}",".rkBox .tex .remark-btn-red{font-size:14px;line-height:auto;width:55px;position:absolute;top:4px;right:4px;}",".rkBox .reply-pic{width:20px;height:20px;vertical-align:middle;border-radius:50%;-webkit-border-radius:50%;margin:-1px 8px 0 0;}",".rkBox-bot{margin:0 10px;padding:8px 0 10px;text-align:center;background:url(//css.tv.itc.cn/channel/play_v1_img/remark/dot.png) repeat-x;}",".rkBox-more{text-align:center;background:url(//css.tv.itc.cn/channel/play_v1_img/remark/dot.png) repeat-x;padding:8px 0 10px;margin:0 10px;}",".rkBox-more a{color:#999;}",".rkBox-more a:hover{color:#e73c31;}",".rkBox-more-arrow{background-position:0 -380px;width:12px;height:7px;overflow:hidden;margin-left:5px;}",".rkBox-more a:hover .rkBox-more-arrow{background-position:-18px -380px;}",".tex textarea{","    scrollbar-3dlight-color:#e0e0e0;","    scrollbar-highlight-color:#e0e0e0;","    scrollbar-arrow-color:#fff;","    scrollbar-shadow-color:#e0e0e0;","    scrollbar-darkshadow-color:#e0e0e0;","    scrollbar-base-color:#e0e0e0;","    scrollbar-track-color:#f0f0f0;}",".tex textarea::-webkit-scrollbar{width:10px;height:10px;}",".tex textarea::-webkit-scrollbar-track:vertical{background-color:#e5e5e5;}",".tex textarea::-webkit-scrollbar-track-piece{background-color:transparent;}",".tex textarea::-webkit-scrollbar-thumb:vertical{background-color:#e0e0e0;}",".rkBox-Max{margin:0 0 15px;position:relative;}",".rkBox-Max .tex,",".rkBox-Min .tex{background:#fff;border:1px solid #d9d9da;box-shadow:0 0 3px #e6e6e6 inset;-webkit-box-shadow:0 0 3px #e6e6e6 inset;padding:5px 8px;height:48px;margin:0 0 10px;}",".rkBox-Max .tex textarea,",'.rkBox-Min .tex textarea{overflow:auto;color:#3a3a3a;border:none;background:none;width:100%;height:46px;color:#999;font:14px/20px "Microsoft YaHei";}',".rkBox-Max .tex-active{border-color:#e73c31;}",".rkBox-Max .tex-active textarea{color:#3a3a3a;}",".rkBox-Max .tex-warn{background:#fdecea url(//css.tv.itc.cn/channel/play_v1_img/remark/rbox.png) no-repeat center center;border:1px solid #e73c31;}",".rkBox-Max .tex-warn textarea,.rkBox-Max .tip-ok textarea{display:none;}",".rkBox-Max .tex-1{display:none;}",".rkBox-Max .tex-2{display:block;}",".rkBox-Max .remark-btn-red,",".rkBox-Min .remark-btn-red{width:90px;height:28px;font-size:14px;cursor:pointer;}",".rkBox-Min .tex-1{height:23px;}",".rkBox-Min .tex-2{display:none;}",'.rkBox-Min .tex-1 input{background:none;border:none;width:100%;line-height:21px;height:23px; font:14px/20px "Microsoft YaHei";color:#999;}',".rkBox-Ding{position:fixed;box-shadow:0 1px 3px #eee;bottom:0;right:0;padding:15px 20px;background:#fff;border:1px solid #eff0f1;margin:0;z-index:99;width:317px;}",".rkBox-Ding .remark-btn-red{position:static;}",".rkBox-Ding .tex{width:299px;}",".J_num{padding:5px 10px;}",".rkBox-Max .tip-ok{background: #f9fafd url(//css.tv.itc.cn/channel/play_v1_img/rkBox_v2.png) 0 -83px no-repeat;}","/* page */",".pages-1 .page_fig,",".pages-1 .page_btn_p,.G-remark .page_btn_n,",".pages-1 .page_fig_on{display:inline-block;margin-left:1px;line-height:28px;height:28px;border:1px solid #d5d5d5;vertical-align:top;color:#3a3a3a;}",".pages-1 .page{margin:0 0 20px;text-align:center;}",".pages-1 .page_fig{min-width:29px;width:auto;_width:29px;padding:0 2px;background:#fafafa;}",".pages-1 .page_fig:hover{background:#fff;border-color:#e73c31;text-decoration:none;color:#e73c31;}",".pages-1 .page_fig_on,",".pages-1 .page_fig_on:hover{color:#fff;background:#e73c31;border-color:#e73c31;cursor:default;}",".pages-1 .page_omit{width:24px;display:inline-block;height:30px;background-position:6px -165px;vertical-align:top;}",".pages-1 .page_btn_p,.G-remark .page_btn_n{width:53px;background:#fafafa;}",".pages-1 .page_btn_p:hover,.G-remark .page_btn_n:hover{background:#fff;border-color:#e73c31;color:#e73c31;}",".pages-1 .page_btn_disable,",".pages-1 .page_btn_disable:hover{border-color:#eaeaea;background:#fcfcfc;color:#999;cursor:default;}","/* page1  */",".pages-1 ul{display:none;}",".pages-1 .isno:hover{color:#999;cursor:default;}",".pages-1 .isno:hover i{color:#3a3a3a;cursor:default;}",".pages-1{width:auto;}",".page1-btnL,",".page1-btnR{font-size:0;background-position:0 -247px;display:inline-block;width:34px;height:24px;cursor:pointer;vertical-align:top;}",".page1-btnR{background-position:-33px -247px;margin-left:-1px;}",".page1-btnL:hover{background-position:0 -281px;z-index:5;position:relative;}",".page1-btnR:hover{background-position:-33px -281px;}",".page1-btnL-disable,",".page1-btnL-disable:hover{background-position:0 -316px;cursor:default;}",".page1-btnR-disable,",".page1-btnR-disable:hover{background-position:-33px -316px;cursor:default;}",".page1-number{color:#999;cursor:auto;display:inline-block;vertical-align:middle;margin:3px 10px 0;}",".page1-number i{color:#3a3a3a;}",".rkBox-bot .page1-btnL,",".rkBox-bot .page1-btnR{background-position:0 -399px;width:30px;height:20px;}",".rkBox-bot .page1-btnR{background-position:-33px -399px;}",".rkBox-bot .page1-btnL:hover{background-position:0 -433px;}",".rkBox-bot .page1-btnR:hover{background-position:-33px -433px;}",".rkBox-bot .page1-btnL-disable,",".rkBox-bot .page1-btnL-disable:hover{background-position:0 -468px;}",".rkBox-bot .page1-btnR-disable,",".rkBox-bot .page1-btnR-disable:hover{background-position:-33px -468px;}",".winbox-mask{filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=80);}",'.wBox{background:#ebebeb;padding:2px;width:335px;font-family:"Microsoft Yahei";position:relative;}',".wBoxIn{background:#fff;border:1px solid #d9d9d9;}",".wBox .bti{background:#f8f8f8;height:40px;padding:0 20px;line-height:40px;}",".wBox .bti h3{font-size:16px;line-height:38px;float:left;margin-right:10px;font-weight:normal;color:#3a3a3a;}",".wBox .cont{padding:20px;}",".wBox .btn-orange,",".wBox .btn-line{display:inline-block;font-size:14px;text-align:center;}",".wBox .btn-orange{background:#e73c31;color:#fff;height:30px;line-height:30px;width:85px;margin-right:20px;}",".wBox .btn-orange:hover{background:#e55359;text-decoration:none;color:#fff;}",".wBox .btn-line{background:#fafafa;color:#3a3a3a;height:28px;line-height:28px;width:83px;border:1px solid #d5d5d5;}",".wBox .btn-line:hover{border-color:#e73c31;color:#e73c31;text-decoration:none;}","/*.wBox */.Zico_close{background:url(http://css.tv.itc.cn/wemedia/space/images/close.png) no-repeat;display:inline-block;width:14px;height:14px;position:absolute;top:15px;right:22px;}","/*.wBox */.Zico_close:hover{background-position:0 -22px;}",".wBox_pub .wBoxIn{padding:35px 20px 20px;}","/*.wBox */.Zico_close{top:13px;right:13px;}",".shafa{background:url(//css.tv.itc.cn/channel/play_v1_img/remark/nocontent.png) no-repeat center top;height:140px;}","::-webkit-input-placeholder { /* WebKit, Blink, Edge */","     color:    #999;"," }",":-moz-placeholder { /* Mozilla Firefox 4 to 18 */","    color:    #999;","    opacity:  1;"," }","::-moz-placeholder { /* Mozilla Firefox 19+ */","    color:    #999;","    opacity:  1;"," }",":-ms-input-placeholder { /* Internet Explorer 10-11 */","    color:    #999;"," }"].join("");function i(a){var u=this,i=a.client_id||"cyqyBluaj",r=a.page_size||10,o=a.reply_size||2,n=a.source||1,s=a.topic_type||1,l=a.r_size||5,c=(a.hot_size,a.elite_size,a.topic_url||location.href,a.topic_title||decodeURIComponent(document.title.replace(/%([^\d].)/g,"$1"))),p=a.topic_id||"",d=a.cate_code||"",e=a.default_theme||D,t=a.tmpl||M,m=null;a.is56;C("head").append(e);var g="time";this.elem=function(){var e=a.selectorID;if(!e)throw new Error("\u8bf7\u914d\u7f6e\u9009\u62e9\u5668");if("string"==typeof e){if(C(e).length)return C(e);throw new Error("\u9009\u62e9\u5668\u65e0\u6548")}if("Object"==typeof e)return e}(),this.pageNum=1,this.currentPage=1,this.replypNum=1,this.replycPage=1,this.pageRData=null,this.cmt_id=null,this.mp_id=null,this.countNum=0,this.isLogin=!1,this.isNoList=!1,this.pageData=null,this.userInfo=null;var h={user_id:"",fee:0,nickname:"",profileurl:"",smallphoto:"//css.tv.itc.cn/channel/space/avatar/05_small.jpg"};var x=t.layout,b=t.nocomment;this.layoutTpl=new B.Template(x||""),this.noCTpl=new B.Template(b||""),this.replyTpl=new B.Template(t.replylist),this.listTpl=new B.Template(t.list),this.hotlisttpl=new B.Template(t.hotlist),this.ellisttpl=new B.Template(t.elitelist),this.intlistTpl=new B.Template(t.list);var k=new B.Template(t.gailou||"");B.Template.registHelper({formatDate:function _(e){var t=3600,a=24*t,i=30*a,r=new Date(e),o=new Date;return i<=(e=(o.getTime()-parseInt(e))/1e3)?r.getFullYear()!=o.getFullYear()?r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate():r.getMonth()+1+"-"+r.getDate():a<=e?Math.floor(e/a)+"\u5929\u524d":t<=e?Math.floor(e/t)+"\u5c0f\u65f6\u524d":60<=e?Math.floor(e/60)+"\u5206\u949f\u524d":"\u521a\u521a"},replEmoj:function w(e){var t=new RegExp("\\[emoji:[0-9a-zA-Z]+\\]","gi");return e.replace(t,"\u2605")},gailou:function y(e){for(var t="{{#next}}",a=/\{\{\#next\}\}/gi,i=null,r=e.length;i=e.shift();){i.index=r--;var o=k.render(i);t=t.replace(a,o)}return t.replace(a,"")},formatCount:function j(e){var t=/(\d{1,3})(?=(\d{3})+(?:$|\.))/g;return 1e8<=e?e=(e=Math.round(10*parseFloat(e/1e8))/10).toString().replace(t,"$1,")+"\u4ebf":1e5<=e?e=Math.round(e/1e4).toString().replace(t,"$1,")+"\u4e07":1e4<=e&&(e=Math.round(e/1e3).toString().replace(t,"$1,")/10+"\u4e07"),e}}),B.alert=function(e){var t=new B.showWin({htmlStr:['<div class="wBox wBox_pub">','<div class="wBoxIn">','<a title="\u5173\u95ed" class="Zico_close close" href=""></a>','<div class="cont">','<p class="fs16 ta-c mB15 c-black">',e,"</p>","</div>","</div>","</div>"].join(""),showOnce:!0});t.initWin(),t.show(),t.winbox.find(".Zico_close").click(function(e){e.preventDefault(),t.closeWin()})},this.init=function(){return 1==n&&C(".rkBoxMin").hide(),this.bindEvent(),this.checkLogin(u.load,u.load),u},messagebus.subscribe("core.login.userinfo",function(e,t){u.userInfo={user_id:t.id,fee:t.fee,nickname:t.nickName,profileurl:"//my.tv.sohu.com/user/"+t.id,smallphoto:t.smallPhoto,vipicon:t.vipicon},B.user.originalData=t,C.extend(u.userInfo,t)},null,null,{cache:!0}),messagebus.subscribe("core.logout",function(e,t){u.isLogin=!1,u.userInfo=h},null,null,{cache:!0}),this.show=function(e,t){u.pageData=e,u.renderData(e),u.pagination(t)},this.load=function(){u.getLoad({}).done(function(e){e&&200==e.status&&((e=e.data).close_comment?C('[data-tab="comment"]').remove():(u.pageData=e,u.countNum=e.comment_count,u.pageNum=e.total_page||1,e.huati="undefined"!=typeof e.tvSubjects?e.tvSubjects[0]:"",e.hots="undefined"!=typeof e.hots?e.hots:[],u.hots=C.grep(e.hots,function(e){return 10<1*e.support_count}),e.comments.length||(u.isNoList=!0),e.total_count<r&&setTimeout(function(){a.onload&&a.onload(u)},0),u.show(e,"time"),L("click","pg_cmt_alltab"),messagebus.publish("sohu.loaded_cy_data",{countNum:e.comment_count,partiNum:e.participation_count})))})},this.getCList=function(t){u.getCommentsList({order_by:t,page_no:1}).done(function(e){if(is_move=!1,e&&200==e.status){(e=e.data).comments.length?u.isNoList=!1:u.isNoList=!0,u.renderList(e,t);C(".J_new").html(""),u.countNum=e.total_count,"time"==t?C(".J_comment_hotList").show():C(".J_comment_hotList").hide(),u.pageNum=e.total_page||1,0==u.pageNum&&(u.pageNum=-1),m.refresh({total:u.pageNum,current:u.currentPage,pageonly:!0})}})},this.getRList=function(a,i){u.getReplyList({cmt_id:a,page_no:1}).done(function(e){if(e)if(e.data.replies.length<1)C("#replyP_1").hide();else{var t=C("[data-replytxt="+i+"]");t.find(".rkBox-more").hide(),t.find("#replyP_1").show(),e=e.data,u.renderRList(e,i),u.pageRData=e,u.replycPage=1,u.cmt_id=a,u.mp_id=i,u.replypNum=e.page||1,u.replyPage(a,i),C("[data-dmpid="+i+"]").find(".J_count").text(e.total)}})},this.bindEvent=function(){function i(e){return!C(".gl-true-tit").is(":visible")&&(0<C(".gl-true-tit").length?(C(".gl-true-tit").parents(".globallogin").show(),!1):void kao("smz",function(){B._smz.init(e)}))}function d(a){z&&messagebus.unsubscribe(z),B.user.originalData?1==B.user.originalData.isAuth?a():i(a):z=messagebus.subscribe("core.login.userinfo",function(e,t){u.userInfo={user_id:t.id,fee:t.fee,nickname:t.nickName,profileurl:"//my.tv.sohu.com/user/"+t.id,smallphoto:t.smallPhoto,vipicon:t.vipicon},B.user.originalData=t,setTimeout(function(){messagebus.unsubscribe(z)},0),1==B.user.originalData.isAuth?a():i(a)},null,null,{execTime:1})}u.elem.on("click",".remark-list-photo img",function(){L("click","pg_cmt_pic");var e=C(this).closest(".remark-list-photo"),t=e.data("img"),a=e.data("width"),i=e.data("height"),r=C(window).width(),o=C(window).height();C(".remark-mask").length<1&&C("body").append(J);var n=C(".remark-mask").find("img")[0];n.src="";var l=C(".remark-mask-link");a/i<r/o&&o<i?(n.width=.7*o*(a/i),n.height=.7*o,l.css("width",.7*o*(a/i))):r/o<a/i&&r<a?(n.width=.7*r,n.height=.7*r*(i/a),l.css("width",.7*r)):(n.width=a,n.height=i,l.css("width",a)),n.src=t,C(".remark-mask").show()}),C("body").on("click",".remark-mask",function(e){e=window.event||e,obj=C(e.srcElement||e.target);C(obj).is("img")||C(".remark-mask").hide()}),u.elem.on("mouseover",".remark-list",function(e){e=window.event||e,obj=C(e.srcElement||e.target);var t=null;if(C(obj).is(".rkBox *")?C(obj).is(".J_reply_li *")&&(t=C(obj).closest(".J_reply_li")):t=C(obj).closest(".remark-list"),t){if(t.find(".remark-jubao").is(":visible"))return!1;t.children(".remark-list-bot").addClass("remark-list-hover")}}),u.elem.on("mouseout",".remark-list",function(e){e=window.event||e,obj=C(e.srcElement||e.target);var t=null;if(C(obj).is(".rkBox *")?C(obj).is(".J_reply_li *")&&(t=C(obj).closest(".J_reply_li")):t=C(obj).closest(".remark-list"),t){if(t.find(".remark-jubao").is(":visible"))return!1;t.children(".remark-list-bot").removeClass("remark-list-hover")}}),u.elem.on("click",".remark-list-jubao",function(){var e=C(this),t=e.closest(".remark-jubao-box");return e.next(".remark-jubao").is(":visible")?t.removeClass("remark-jubao-box-hover"):t.addClass("remark-jubao-box-hover"),!1}),u.elem.on("click",".remark-jubao li",function(){C(".remark-jubao-radio-checked").removeClass("remark-jubao-radio-checked"),C(this).find(".remark-jubao-radio").addClass("remark-jubao-radio-checked")}),u.elem.on("click",".J_cancel",function(){C(".remark-jubao-box").removeClass("remark-jubao-box-hover")}),C(document).die().click(function(e){e=window.event||e,obj=C(e.srcElement||e.target),C(obj).is(".remark-jubao-box *")||(C(".remark-list-hover").removeClass("remark-list-hover"),C(".remark-jubao-box-hover").removeClass("remark-jubao-box-hover"))}),u.elem.on("click",".J_jubao",function(){var e=C(this).closest(".J_jubao_div"),t=e.attr("data-cmid"),a=e.attr("data-mpid"),i=e.find(".remark-jubao-radio-checked").data("rid"),r={source:n||1,topic_type:s||1,topic_id:p,app_type:7,comment_id:t||0,mp_id:a||0,report_reason:i};if(!u.isLogin)return u.checkLogin(function(){d(o)},function(){u.doLogin(function(){d(o)})});function o(){v.call(u,T.report+C.param(r)).done(function(e){B.alert("\u4e3e\u62a5\u5df2\u63d0\u4ea4\uff0c\u611f\u8c22\u53cd\u9988"),setTimeout("$('.Zico_close').trigger('click');",3e3),C(".remark-jubao-box").removeClass("remark-jubao-box-hover")})}d(o)}),u.elem.on("click",".tex-warn",function(){C(this).children("textarea").focus()}),u.elem.on("click",".J_tab_check li",function(){var e=C(this);g=e.attr("id")||g,e.addClass("on").siblings().removeClass("on"),u.getCList(g),u.currentPage=1}),u.elem.on("focus","#commentTextarea",function(){B.commenting=!0;var e=C(this),t=C.trim(e.val());t&&"\u6709\u4ec0\u4e48\u611f\u60f3\uff1f\u4e00\u8d77\u6765\u804a\u804a\u5427"!=t||e.val(""),e.closest(".tex").removeClass("tex-warn tip-ok").addClass("tex-active"),L("click","pg_cmt_plk",u.isLogin),C(".J_num").show()}),u.elem.on("blur","#commentTextarea",function(){B.commenting=!1;var e=C(this),t=C.trim(e.val());t&&"\u6709\u4ec0\u4e48\u611f\u60f3\uff1f\u4e00\u8d77\u6765\u804a\u804a\u5427"!=t||(C(".J_num").hide(),e.closest(".tex").removeClass("tex-active tex-warn"))}),u.elem.delegate("#commentTextarea","keyup",function(){B.commenting=!1;var e=C(this),t=e.val();C(".J_num").show(),C(".js_comment_num").html(300-t.length),300<t.length&&(e.val(t.substring(0,300)),C(".js_comment_num").html(300-t.length))}),u.elem.delegate("[data-ding]","click",function(){var e=C(this);if(!e.hasClass("remark-list-zaned")&&!e.hasClass("rDing-dis")){var t=e.attr("data-ding"),a=e.attr("data-mpid");e.addClass("remark-list-zaned"),e.siblings(".rCai").addClass("rCai-dis"),e.hasClass("remark-list-zaned")||e.addClass("remark-list-zaned"),isNaN(e.children().text())||e.children().text(1*e.children().text()+1),u.ding({comment_id:t,mp_id:a}).done(function(e){})}}),u.elem.delegate("[data-cai]","click",function(){var e=C(this);if(!e.hasClass("rCai-click")&&!e.hasClass("rCai-dis")){var t=1*e.attr("data-cai");e.addClass("rCai-click"),e.siblings(".rDing").addClass("rDing-dis"),e.hasClass("rCai-click")||e.addClass("rCai-click"),isNaN(e.children().text())||e.children().text(1*e.children().text()+1),e.children().text(1*e.children().text()+1),u.cai(t).done(function(e){})}});var l=!1;u.elem.delegate('[data-type="submit"]',"click",function(){var i=u.isLogin;L("click","pg_cmt_submit",u.isLogin);var r=C(this),o=C("#commentTextarea"),n=o.closest(".rkBox");function e(){var a=o.val();if(!(a=C.trim(a).replace(/</g,"&lt;").replace(/>/g,"&gt;"))||"\u6709\u4ec0\u4e48\u611f\u60f3\uff1f\u4e00\u8d77\u6765\u804a\u804a\u5427"==a)return o.parent().removeClass("tip-ok").addClass("tex-warn"),void L("click","pg_cmt_submit_x",u.isLogin);300<a.length?o.parent().addClass("tip-limit"):l||(l=!0,setTimeout(function(){l=!1},1e3),u.submit({content:a}).done(function(e){if(40013==e.status&&(e.data={comment_id:0},a="\u56e0\u60a8\u53d1\u5e03\u5185\u5bb9\u6d89\u53ca\u7981\u8bcd\uff0c\u5df2\u88ab\u5c4f\u853d"),!e.data)return r.removeClass("G-btn-disable"),o.parent().addClass("tip-wrong"),l=!1;L("click","pg_cmt_sbss",i),e=e.data,r.removeClass("G-btn-disable"),o.val(""),C(".J_num").hide(),C(".js_comment_num").text(300),n.removeClass("rkBoxMin").removeClass("rkBoxMax"),o.parent().addClass("tip-ok").removeClass("tex-warn tex-active");var t={comments:[{comment_id:e.comment_id||0,mp_id:e.mp_id||0,replies:[],content:a,create_time:(new Date).getTime(),like_count_tip:0,reply_count_tip:0,like_count:0,reply_count:0,is_topic_author:0,user:u.userInfo}]};u.insertCommentHTML(t)}).fail(function(e){r.removeClass("G-btn-disable"),o.parent().addClass("tip-wrong")}))}u.isLogin?d(e):u.checkLogin(function(){d(e)},function(){u.doLogin(function(){d(e)})})}),u.elem.on("click",".remark-huati-kan",function(){C("#tv_subject").trigger("click")}),u.elem.on("click",".J_huati_add",function(){var e=C(this),t=C("#commentTextarea"),a=t.parent(".tex");e.hasClass("clean")?(e.removeClass("clean").html("\u53c2\u52a0\u8bdd\u9898"),a.removeClass("noempty"),C(".js_comment_num").text(300).parents(".J_num").hide(),""):(e.addClass("clean").html("\u6e05\u7a7a\u8bc4\u8bba\u6846"),a.removeClass("tex-warn").addClass("noempty"),t.val("").focus(),t.val(e.data("title")),C(".js_comment_num").html(300-t.val().length),e.data("hid"))}),u.elem.delegate("[data-reply]","click",function(){var e=C(this).attr("data-reply")||"",t=C(this).attr("data-cmid")||"",a=C(this).closest("[data-dmpid]"),i=a.find("#recommentTextarea"),r=i.next("input"),o=r.attr("data-replyid"),n=C(this).attr("data-name")||"",l=C(this).attr("data-href")||"",s=C("[data-replytxt]>.disShow");0<s.length&&C(s[0]).closest("[data-replytxt]").data("replytxt")!=a.data("dmpid")&&C(s[0]).addClass("disNone").removeClass("disShow"),o==e?C(a.find(".tex")[0]).toggleClass("disNone").toggleClass("disShow"):C(a.find(".tex")[0]).removeClass("disNone").addClass("disShow"),n?i.attr({"data-href":l,"data-name":n,"data-value":"\u56de\u590d@"+n,placeholder:"\u56de\u590d@"+n}):i.attr({"data-href":"","data-name":"","data-value":"\u56de\u590d\u4e00\u4e0b\u4f60\u7684\u770b\u6cd5..",placeholder:"\u56de\u590d\u4e00\u4e0b\u4f60\u7684\u770b\u6cd5.."}),window.ActiveXObject||"ActiveXObject"in window||i.focus(),r.attr("data-replyid",e).attr("data-cmid",t)}),u.elem.delegate(".rkBox-more","click",function(){L("click","pg_cmt_recmtmore");var e=C(this).attr("data-cmid")||"",t=C(this).attr("data-mpid")||"";C("#replyP_1").prev(".rkBox-more").show(),C("#replyP_1").remove(),C(this).after('<div class="rkBox-bot cfix " style="text-align: right;display:block;" id="replyP_1">    </div>'),u.getRList(e,t),setTimeout(function(){C("#pagination_5 .pages-1").css("zoom",1).hide().show()},0)});var m=!1;u.elem.delegate('[data-type="resubmit"]',"click",function(){var n=u.isLogin;L("click","pg_cmt_recmtsub",u.isLogin);var l=C(this),e=l.attr("data-replyid")||"",t=l.attr("data-cmid")||"",s=l.closest(".rkBox").find(".inp_reply"),c=l.closest(".tex"),p=l.closest("[data-dmpid]"),a=s.attr("data-value");if(!u.isLogin)return u.checkLogin(function(){d(i)},function(){u.doLogin(function(){d(i)})});function i(){var o=s.val();if(!(o=C.trim(o).replace(/</g,"&lt;").replace(/>/g,"&gt;"))||"\u56de\u590d\u4e00\u4e0b\u4f60\u7684\u770b\u6cd5.."==o||o==a)return s.val("\u8bf7\u8f93\u5165\u56de\u590d\u5185\u5bb9"),c.addClass("tex-warn").removeClass("tex-active"),void L("click","pg_cmt_resubmit_x",u.isLogin);if("\u8bf7\u8f93\u5165\u56de\u590d\u5185\u5bb9"!=o){if("\u53d1\u5e03\u5931\u8d25\uff01\u8bf7\u91cd\u8bd5"==o&&(c.addClass("tex-warn").removeClass("tex-active"),s.val(s.attr("data-fvalue"))),300<o.length)return s.val("\u56de\u590d\u5185\u5bb9\u4e0d\u80fd\u8d85\u8fc7300\u4e2a\u5b57"),void c.addClass("tex-warn").removeClass("tex-active");m||(m=!0,setTimeout(function(){m=!1},1e3),u.submit({content:o,comment_id:t,mp_id:e}).done(function(e){if(40013==e.status&&(e.data={comment_id:0},o="\u56e0\u60a8\u53d1\u5e03\u5185\u5bb9\u6d89\u53ca\u7981\u8bcd\uff0c\u5df2\u88ab\u5c4f\u853d"),!e.data)return s.val("\u53d1\u5e03\u5931\u8d25\uff01\u8bf7\u91cd\u8bd5"),s.attr("data-fvalue",o),c.addClass("tex-warn").removeClass("tex-active"),setTimeout(function(){s.val(o),c.addClass("tex-active").removeClass("tex-warn")},2e3),m=!1;L("click","pg_cmt_ress",n),s.attr("data-fvalue",""),e=e.data,l.removeClass("G-btn-disable"),c.removeClass("tex-warn tex-active"),s.val("");var t=1*p.attr("data-index");if(0<p.find(".rhot").length)u.hots[t];else u.pageData.comments[t];var a={replies:[{comment_id:e.comment_id||0,mp_id:e.mp_id||0,replies:[],content:o,create_time:(new Date).getTime(),like_count:0,reply_count:0,like_count_tip:0,reply_count_tip:0,is_topic_author:0,user:u.userInfo}]};s.attr("data-href")&&(a.replies[0].reply={user:{profileurl:s.data("href"),nickname:s.data("name")}});var i=u.replyTpl.render(a);l.closest("[data-replytxt]").find(".J_reply_box").prepend(i),C(".J_reply_box .jtrigger").hide();var r=C(p.find(".J_count")[0]).text();isNaN(r)||p.find(".J_count").text(+r+1)}).fail(function(){l.removeClass("G-btn-disable"),_textarea.parent().addClass("tip-wrong")}))}else L("click","pg_cmt_resubmit_x",u.isLogin)}d(i)}),C(document).click(function(e){if(e=window.event||e,obj=C(e.srcElement||e.target),C(obj).is(".tex *,.reply,.reply *"));else{var t=C("#recommentTextarea"),a=C.trim(t.val());t.attr("data-value");a&&"\u8bf7\u8f93\u5165\u56de\u590d\u5185\u5bb9"!=a||t.closest(".tex").removeClass("tex-warn  tip-ok tex-active"),"\u53d1\u5e03\u5931\u8d25\uff01\u8bf7\u91cd\u8bd5"==a&&(t.closest(".tex").removeClass("tex-warn  tip-ok tex-active"),t.val(t.attr("data-fvalue")))}if(C(obj).is(".rkBox-Max *"));else{var i=C("#commentTextarea");(a=i.val())?i.closest(".tex").attr("class","tex"):i.closest(".tex").removeClass("tex-active tex-warn tip-ok")}}),u.elem.delegate("#recommentTextarea","focus",function(){var e=C(this),t=e.attr("data-value"),a=C.trim(e.val());"\u8bf7\u8f93\u5165\u56de\u590d\u5185\u5bb9"!=a&&"\u56de\u590d\u4e00\u4e0b\u4f60\u7684\u770b\u6cd5.."!=a&&a!=t||e.val(""),"\u53d1\u5e03\u5931\u8d25\uff01\u8bf7\u91cd\u8bd5"==a&&(e.closest(".tex").removeClass("tex-warn  tip-ok tex-active"),e.val(e.attr("data-fvalue"))),e.closest(".tex").removeClass("tex-warn tip-ok").addClass("tex-active"),L("click","pg_cmt_reback",u.isLogin)})},this.showPage=function(e,t){u.currentPage=e||u.currentPage||1,u.getCommentsList({order_by:t}).done(function(e){u.renderList(e.data,t)})},this.showrPage=function(e,t,a){u.replycPage=e||u.replycPage||1,u.getReplyList({cmt_id:t}).done(function(e){u.renderRList(e.data,a)})},this.renderRList=function(e,t){u.pageRData=e;var a=u.replyTpl.render(e);u.elem.find("#rp"+t).find(".J_reply_box").html(a),C(".J_reply_box .jtrigger").hide()},this.renderList=function(e,t){u.pageData=e;var a=u.listTpl.render(e);u.isNoList?u.elem.find(".J_comment_list").html('<div class="shafa"></div>'):u.elem.find(".J_comment_list").html(a),u.currentPage},this.renderData=function(e){var t=u.layoutTpl.render(e);u.isNoList?u.elem.html(u.noCTpl.render(e)):(u.elem.html(t),e.huati||C("#tv_subject").hide())},this.insertComment=function(e){u.getComment(e).done(function(e){"10104"==e.error_code?u.elem.find("#commentTextarea").parent(".tex").addClass("tip-wrong"):u.insertCommentHTML(e)})},this.remainInWords=function(e){for(var t=0,a=0;a<e.length;a++)e.charAt(a),128<e.charCodeAt(a)?t+=2:t++;return parseInt(t/2)},this.cut_str=function(e,t){if(2*e.length<=t)return e;for(var a=0,i="",r=0;r<e.length;r++)if(i+=e.charAt(r),128<e.charCodeAt(r)){if(t<=(a+=2))return i.substr(0,i.length)}else if(t<=++a)return i.substr(0,i.length);return i},this.insertCommentHTML=function(e){e.comments[0].index=u.pageData.comments.length;u.pageData.comments.push(e.comments[0]);var t=u.intlistTpl.render(e);u.isNoList?(u.elem.find(".shafa").replaceWith('<div class="J_new">'+t+"</div>"),u.isNoList=!1):u.elem.find(".J_new").prepend(t)};var f=function(e){return C.ajax({dataType:"jsonp",scriptCharset:"utf-8",url:e+"&callback=?"})},v=function(e,t){return C.ajax({url:e,type:"POST",data:t,xhrFields:{withCredentials:!0}})};this.getLoad=function(e){if(!p)throw new Error("source_id \u4e3a\u7a7a,\u8bf7\u914d\u7f6e\u9875\u9762\u7684\u552f\u4e00\u6807\u793a");var t={topic_id:p||"",topic_type:s||1,source:n||1,page_size:e.psize||r||10,sort:0,timestamp:(new Date).getTime(),ssl:0,page_no:1,reply_size:o||5};return f.call(this,T.load+C.param(t))},this.getCommentsList=function(e){var t="new"==g?1:"hot"==g?2:0,a={topic_id:p||"",topic_type:s||1,source:n||1,page_size:e.psize||r||10,sort:t||0,timestamp:(new Date).getTime(),ssl:0,page_no:e.page_no||u.currentPage||1,reply_size:o||5};return f.call(u,T.commentsList+C.param(a))},this.getReplyList=function(e){var t={source:n||1,topic_type:s||1,topic_id:p,comment_id:e.cmt_id||0,ssl:0,page_no:e.page_no||u.replycPage,page_size:e.r_size||l,timestamp:(new Date).getTime()};return f.call(u,T.replyList+C.param(t))},this.getComment=function(e){var t={client_id:i,comment_id:e,topic_id:u.topic_id};return f.call(u,T.floor+C.param(t))},this.submit=function(e){var t={passport:B.user&&B.user.passport,app_type:7,cate_code:d||"",source:n||1,topic_type:s||1,topic_id:p,topic_title:c,topic_url:window.location.href,image_file:"",content:e.content||"",comment_id:e.comment_id||0,mp_id:e.mp_id||0};return v.call(u,T.submit,t)},this.crossDomainPost=function(e,t){var a=C.Deferred(),i=[];for(var r in document.charset="utf-8",t)i.push('<input name="',r,'" value="',t[r]||"",'" />');var o=B.createElement('<div style="display:none"></div>'),n="tmpPostForm"+B.now();return o.innerHTML=['<form id="',n,'" action="',e,'" method="POST" target="hideFrame" accept-charset="utf-8" >',i.join(""),"</form>",'<iframe name="hideFrame" />'].join(""),document.body.appendChild(o),document.getElementById(n).submit(),window.submitMsg=function(e){a.resolve(e),document.charset="GBK",setTimeout(function(){document.body.removeChild(o)},10)},setTimeout(function(){document.body.removeChild(o),document.charset="GBK",a.reject("fail")},5e4),a.promise()},this.getUserInfo=function(){var e={client_id:i,access_token:""};return f.call(u,T.userInfo+C.param(e))},this.getCount=function(e){var t={client_id:i,topic_id:e.topic_id||"",topic_source_id:e.topic_source_id||"",topic_url:e.topic_url||""};return f.call(u,T.count+C.param(t))},this.doAction=function(e){var t={client_id:i,topic_id:u.topic_id,comment_id:e.comment_id,action_type:e.action_type};return v.call(u,T.action+C.param(t))},this.ding=function(e){var t={passport:B.user&&B.user.passport||"",topic_type:s||1,topic_id:p,client_id:B.user&&B.user.passport||B.cookie("fuid"),app_type:7,source:n||1,comment_id:e.comment_id||0,mp_id:e.mp_id||0};return v.call(u,T.action+C.param(t))},this.cai=function(e){return u.doAction({comment_id:e,action_type:2})},this.doLogin=function(e){var t=C.Deferred();return B.initLogin(),B.showLoginWinbox(function(){t.resolve("login"),e&&e()},{from:"cmt"}),t.promise()},this.syncChangyan=function(){return C.getJSON(T.account)},this.checkLogin=function(e,t){B.user&&""!=B.user.passport&&""!=B.cookie("ppinf")?(u.isLogin=!0,e&&e()):(u.isLogin=!1,u.userInfo=h,t&&t())},this.ssoLogin=function(){var e=C.Deferred(),t=B.cookie("ppinf"),a=B.cookie("spinfo");return t?a?(u.isLogin=!0,e.resolve("isLogin")):u.syncChangyan().done(function(){u.isLogin=!0,e.resolve("isLogin")}):(a&&(B.cookie("spinfo",null,{domain:"sohu.com"}),u.isLogin=!1),e.reject("isLogout")),e.promise()},this.replyPage=function(){var e={id:"replyP",total:u.replypNum,current:u.replycPage,handle:function(t,e){return messagebus.publish("statV2.ping",{type:"click",txid:"pg_cmt_recmtnextpage"}),u.showrPage(t,u.cmt_id,u.mp_id),setTimeout(function(){var e=a.replypCallback;e&&e(u.elem,t)},0),!0},before:function(e,t){return!0}};new B.Pagination(C.extend({},e,a.replypConf)).init()},this.pagination=function(){var e={id:"pagination",total:u.pageNum,current:u.currentPage,handle:function(t,e){return messagebus.publish("statV2.ping",{type:"click",txid:"pg_cmt_nextpage"}),u.showPage(t,g),setTimeout(function(){var e=a.pageCallback;e&&e(u.elem,t)},0),!0},before:function(e,t){return!0}};m=new B.Pagination(C.extend({},e,a.paginationConf)).init()}}B.changyan=function(e){return new i(e).init()}}(window,jQuery,sohuHD||{});