/* sohutv 2019-04-16 14:26:50 */
!function(){sohuHD.Template.registHelper({formatDiscount:function(i){return Math.ceil(100*i.price/i.oriPrice)/10},formatTime:function(i){return i.name}});var i="//film.sohu.com",e="//api.store.sohu.com",t={vip_commodities:i+"/pay/vip_commodities.json",qrcode:e+"/pp/qrPay/genQrWeb",paystatus:i+"/pay/paystatus.json",sms_pay_msg:e+"/minipay/sms/msg",sms_pay:e+"/minipay/sms_pay",active:e+"/minipay/card/active",imagecreate:e+"/minipay/imagecreate",quitOrder:"//api.store.sohu.com/sms/telecom/user/quitOrder",order:i+"/pay/order.json",payTicket:i+"/pay/cInfoByC.json"};vipCommondityCache=null,payTicketCache={};var p={plat:18,app_id:1,position:39093,loadVipCommondities:function(i){var e=$.Deferred();return vipCommondityCache?e.resolve(vipCommondityCache):$.ajax({url:t.vip_commodities,data:i,type:"get",dataType:"jsonp"}).then(function(i){vipCommondityCache=i,e.resolve(vipCommondityCache)}),e.promise()},loadPayTicket:function(e){var o=$.Deferred();if(payTicketCache[e.commodityId])o.resolve(payTicketCache[e.commodityId]);else{e=$.extend({},{commodityId:""},e),$.ajax({url:t.payTicket,data:e,type:"get",dataType:"jsonp"}).then(function(i){200==i.status?(payTicketCache[e.commodityId]=i.data,o.resolve(payTicketCache[e.commodityId])):o.reject(i)})}return o.promise()},loadQrcode:function(i){var e={plat:this.plat,app_id:this.app_id,position:this.position,commodity_id:4,gid:"",aid:"",vid:"",channeled:"",use_coin:"",order_sn:"",coupon_no:""};return i=$.extend({},e,i),$.ajax({url:t.qrcode,data:i,type:"get",dataType:"jsonp"})},loadPaystatus:function(i){return i=$.extend({},{qrcode:""},i),$.ajax({url:t.paystatus,data:i,type:"get",dataType:"jsonp"})},sendMsg:function(i){var e={plat:this.plat,app_id:this.app_id,phone_num:"",aid:"",vid:"",to:location.href};return i=$.extend({},e,i),$.ajax({url:t.sms_pay_msg,data:i,type:"get",dataType:"jsonp"})},smsPay:function(i){var e={play:this.plat,app_id:this.app_id,phone_num:"",verification_code:"",order_sn:""};return i=$.extend({},e,i),$.ajax({url:t.sms_pay,data:i,type:"get",dataType:"jsonp"})},quitOrder:function(){return $.ajax({url:t.quitOrder,data:{},type:"get",dataType:"jsonp"})},activeCard:function(i){return i=$.extend({},{plat:18,app_id:1,type:0,codenum:"",validate:""},i),$.ajax({url:t.active,data:i,type:"get",dataType:"jsonp"})},getImagecreate:function(){return t.imagecreate+"?timestamp="+(new Date).getTime()}},r={commodity:["",'<div class="GvBox-item-wrap cfix">','    <span class="GvBox-item-arrL GvBox-item-arrL-unable" data-pagetype="left"></span>','    <span class="GvBox-item-arrR" data-pagetype="right"></span>','    <div class="GvBox-item-Box">','    <ul class="GvBox-item-inner cfix">',"    <% var index = 0; $.each(vip, function(key, item){ %>",'        <li class="GvBox-item <%=(index==0 ? \'GvBox-item-on \' : \'\' ) %>" data-id="<%=item.id%>" data-key="<%=key%>" data-price="<%=item.price / 100 %>">','            <%if(index==0){%><span class="jd-renewal-info" style="width:130px;left:10px;">\u4eac\u4e1c\u652f\u4ed8\u7528\u6237\u968f\u673a\u51cf</span><%}%>','            <p class="GvBox-item-row1"><span class="GvBox-item-money"><%=item.price / 100 %>\u5143</span><%=helper.formatTime(item) %></p>','            <p class="GvBox-item-row2"><span class="GvBox-item-discount"><%=helper.formatDiscount(item) %>\u6298</span><span class="GvBox-item-detele"><%=item.oriPrice / 100 %>\u5143</span></p>','            <span class="GvBox-item-ok"></span>',"        </li>","    <% index++; }); %>","    </ul>","    </div>","</div>"].join(""),pay_agree:["",'<p class="GvBox-agree">','    <span class="GvBox-radio GvBox-radio-on"></span>','    <span class="ib va-m">\u540c\u610f','        <a href="//tv.sohu.com/upload/store/agreement.html" target="_blank">\u300a\u641c\u72d0\u89c6\u9891\u6536\u8d39\u534f\u8bae\u300b</a>','        <a href="//film.sohu.com/renewalAgree.html" target="_blank">\u300a\u641c\u72d0\u89c6\u9891\u8fde\u7eed\u5305\u6708\u670d\u52a1\u534f\u8bae\u300b</a>',"    </span>","</p>",'<div class="pay-coupon pt_cont " style="display: block;">','    <span class="pt_tit l">\u4ee3\u91d1\u5238\uff1a</span>','    <div class="coupon-select l"></div>',"</div>"].join(""),pay_ticket:["","<% if(coupon && coupon.length) { var item = coupon[0]; %>",'<div class="dropdown-default dropdown-hasmore" data-coupon-no="<%=item.couponno %>" data-value="<%=item.disprice/100 %>">','    <span class="strong-red"><%=item.disprice/100 %>\u5143</span>','    <span class="coupon-type">\u4ee3\u91d1\u5238</span>','    <span class="gap"></span>','    <span class="valid-to"><%=item.validto %>\u5230\u671f</span>',"</div>",'<ul class="dropdown-menu" style="display: none;">',"    <% $.each(coupon.slice(0,5), function(index, item) {%>",'    <li class="option" data-coupon-no="<%=item.couponno %>" data-value="<%=item.disprice/100 %>">','        <span class="strong-red"><%=item.disprice/100 %>\u5143</span>','        <span class="coupon-type">\u4ee3\u91d1\u5238</span>','        <span class="gap"></span>','        <span class="valid-to"><%=item.validto %>\u5230\u671f</span>',"    </li>","    <% }); %>",'    <li class="option" data-coupon-no="" data-value="0"><span>\u4e0d\u4f7f\u7528\u4ee3\u91d1\u5238</span></li>',"</ul>",'<span class="down-arrow" style="display: block;"></span>',"<% } else { %>",'<div class="dropdown-default">\u60a8\u8fd8\u6ca1\u6709\u6b64\u5546\u54c1\u7684\u4ee3\u91d1\u5238\u54e6~~</div>',"<% } %>"].join(""),pay_money:function(i){return["",'<div class="GvBox-erwm cfix">','    <span class="GvBox-erwm-money l">\u652f\u4ed8\u91d1\u989d\uff1a<em class="GvBox-money">15.0\u5143</em></span>','    <div class="GvBox-erwm-photo l">','        <img src="//:0" width="136" height="136">','        <a href="javascript:void(0);" class="GvBox-erwm-fresh j-payvip-login" pb-click data-pb-txid="pg_vippay_Refresh" data-pb-other="qrcode"></a>',"    </div>",'    <div class="GvBox-erwm-text l"><div class="j-descripte-txt"><p>',i=i||"\u5fae\u4fe1",'\u626b\u7801\u652f\u4ed8\uff0c\u968f\u65f6\u53ef\u9000</p><p>\u5b8c\u6210\u652f\u4ed8\u540e\uff0c\u7acb\u5373\u4f53\u9a8c</p></div><a href="javascript:void(0)" class="GvBox-btnG GvBox-btnG-fresh" pb-click data-pb-txid="pg_vippay_Refresh" data-pb-other="button">\u5237\u65b0</a></div>',"</div>"].join("")}},n={qrsuccess:["",'<div class="GvBoxIn">','    <span class="GvBox-close"></span>','    <p class="GvBoxMin-tips"><span class="GvBoxMin-ok"></span><span class="ib va-m">\u652f\u4ed8\u6210\u529f\uff01</span></p>','    <p class="GvBoxMin-text"><em>3</em>\u79d2\u540e\u81ea\u52a8\u5237\u65b0</p>',"</div>"].join(""),mobileTip:["",'    <div class="GvBoxIn">','        <span class="GvBox-close"></span>','        <p class="GvBoxMin-tips">\u8bf7\u5728\u65b0\u9875\u9762\u5b8c\u6210\u652f\u4ed8\u540e\u9009\u62e9\uff01</p>','        <p class="j-pay-link"><a style="color:#efbc3f;display:none;" href="" target="_blank">\u5982\u679c\u6ca1\u6709\u6253\u5f00\u65b0\u7a97\u53e3\uff0c\u8bf7\u70b9\u51fb\u6b64\u5904\u8fdb\u884c\u652f\u4ed8</a></p>','        <p class="GvBoxMin-text">\u652f\u4ed8\u524d\u4e0d\u8981\u5173\u95ed\u7a97\u53e3\uff01<br>\u5982\u9700\u5e2e\u52a9\u8bf7\u62e8\u62534008816666</p>','        <p><a href="javascript:void(0)" class="GvBox-btnY mr20 j-btn-mbsucc">\u652f\u4ed8\u6210\u529f</a><a href="javascript:void(0)" class="GvBox-btnG GvBox-btnG-again j-btn-mbfail">\u652f\u4ed8\u5931\u8d25\uff0c\u91cd\u65b0\u652f\u4ed8</a></p>',"    </div>"].join(""),tdTip:["",'    <div class="GvBoxIn">','        <span class="GvBox-close"></span>','        <p class="GvBoxMin-tips"><span class="<%=iconClass %>"></span><span class="ib va-m"><%=tipTxt %></span></p>','        <p class="GvBoxMin-text"></p>',"    </div>"].join(""),codeTip:["",'    <div class="GvBoxIn">','        <span class="GvBox-close"></span>','        <p class="GvBoxMin-tips"><span class="GvBoxMin-ok"></span><span class="ib va-m">\u5151\u6362\u6210\u529f\uff01</span></p>','        <p class="GvBoxMin-text"><%=txt %></p>','        <p class="GvBoxMin-bot"><a href="//film.sohu.com/vip.html" target="_blank" class="GvBox-btnY GvBox-btnY-see j-btn-see">\u7acb\u5373\u89c2\u770b\u5f71\u7247</a></p>',"    </div>"].join("")},a=['<div class="GvBox"><div class="GvBoxIn">','<span class="GvBox-close"></span>',"<h4>\u8d2d\u4e70\u641c\u72d0\u89c6\u9891\u4f1a\u5458\u514d\u5e7f\u544a\u7545\u4eab\u6d77\u91cf\u5927\u7247</h4>",'<div class="GvBox-tips">','    <span class="GvBox-warn"></span>','    <span class="ib GvBox-tips-text">\u60a8\u8fd8\u6ca1\u6709\u767b\u5f55\u54e6\uff0c\u8bf7</span>','    <a href="javascript:void(0)" class="GvBox-btnY GvBox-btnY2 j-payvip-login">\u7acb\u5373\u767b\u5f55</a>',"</div>",'<div class="GvBox-cont">','    <ul class="GvBox-menu cfix" pb-click-a data-pb-txid="pg_vippay_mode">','        <li class="on" data-type="alipay"><a class="disb" href="javascript:void(0)" data-pb-other="alipay">\u652f\u4ed8\u5b9d\u652f\u4ed8</a></li>','        <li data-type="wechat"><a class="disb" href="javascript:void(0)" data-pb-other="wechat">\u5fae\u4fe1\u652f\u4ed8</a></li>','        <li data-type="mobilepay"><a class="disb" href="javascript:void(0)" data-pb-other="mobile">\u8bdd\u8d39\u652f\u4ed8</a></li>','        <li data-type="jd"><a class="disb" href="javascript:void(0)" data-pb-other="jd">\u4eac\u4e1c\u652f\u4ed8</a><span class="jd-tab-tips">\u4eac\u4e1c\u652f\u4ed8\u968f\u673a\u51cf</span></li>','        <li data-type="dcode"><a class="disb" href="javascript:void(0)" data-pb-other="code">\u5151\u6362\u7801</a></li>',"    </ul>",'    <div class="tab_alipay GvBox-info">',r.commodity,r.pay_agree,r.pay_money("\u652f\u4ed8\u5b9d"),"    </div>",'    <div class="tab_wechat GvBox-info" style="display:none;">',r.commodity,r.pay_agree,r.pay_money("\u5fae\u4fe1"),"    </div>",'    <div class="tab_mobilepay GvBox-info GvBox-info-huafei" style="display:none;">','        <div class="GvBox-form GvBox-form-huafei1 cfix">\u624b\u673a\u53f7\u7801\uff1a<input type="text" maxlength="11" id="mobile" class="inp" placeholder="\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"><span class="c-red j-mobile-error">\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801</span></div>','        <ul class="GvBox-form GvBox-form-huafei cfix hid">','            <li class="gf">',"                <label>\u624b\u673a\u53f7\u7801\uff1a</label>",'                <span id="mobileTxt" class="inp-value">186****666</span>','                <a href="javascript:void(0)" class="GvBox-btnG GvBox-btnG1 j-btnchangenum">\u66f4\u6362\u53f7\u7801</a>',"            </li>",'            <li class="gf">',"                <label>\u9a8c\u8bc1\u7801\uff1a</label>",'                <input type="text" id="mobilevalid" class="inp inp2" placeholder="\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801">','                <a href="javascript:void(0)" class="GvBox-btnG GvBox-btnG1 j-btngetvalidnum">\u91cd\u65b0\u83b7\u53d6</a>','                <p class="gf-tips j-valid-error">\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801</p>',"            </li>","        </ul>",'        <p class="GvBox-agree">','            <span class="GvBox-radio GvBox-radio-on"></span>','            <span class="ib va-m">\u540c\u610f','                <a href="//tv.sohu.com/upload/store/agreement.html" target="_blank">\u300a\u641c\u72d0\u89c6\u9891\u6536\u8d39\u534f\u8bae\u300b</a>',"            </span>","        </p>",'        <div class="GvBox-wenxin cfix">','            <span class="l">\u6e29\u99a8\u63d0\u793a\uff1a</span>','            <ul class="GvBox-wenxin-list l">','                <li class="gw"><em>1.</em>\u624b\u673a\u8bdd\u8d39\u5305\u6708\u670d\u52a1\u4ec5\u652f\u6301\u79fb\u52a8\u3001\u8054\u901a\u3001\u7535\u4fe1\u624b\u673a\u7528\u6237, \u8ba2\u8d2d\u7ed3\u679c\u53ef\u80fd\u5ef6\u65f6\uff0c\u5f00\u901a\u540e\u8bf7\u7a0d\u540e\u67e5\u770b\u3002</li>','                <li class="gw"><em>2.</em>\u7eed\u8d39\u89c4\u5219\uff1a\u79fb\u52a8\u7528\u6237\u8ba2\u8d2d\u6210\u529f\u540e\u6bcf\u969430\u5929\u4e3a\u60a8\u81ea\u52a8\u7eed\u8d39\uff1b\u8054\u901a\u7528\u6237\u8ba2\u8d2d\u6210\u529f\u540e\u6bcf\u6708\u8ba2\u8d2d\u65e5\u4e3a\u60a8\u81ea\u52a8\u7eed\u8d39\uff0c\u5982\u8ba2\u8d2d\u65e5\u4e3a\u6708\u672b\u6700\u540e\u4e00\u5929\u5219\u7eed\u8d39\u65e5\u4e3a\u6708\u672b\u6700\u540e\u4e00\u5929\uff1b\u7535\u4fe1\u7528\u6237\u4f1a\u5458\u5230\u671f\u524d\u4e09\u5929\u4e3a\u60a8\u53d1\u8d77\u81ea\u52a8\u7eed\u8d39\u3002</li>','                <li class="gw"><em>3.</em>\u4e00\u4e2a\u624b\u673a\u53f7\u4ec5\u80fd\u4e3a\u4e00\u4e2a\u641c\u72d0\u8d26\u53f7\u5f00\u901a\u4f1a\u5458\u670d\u52a1\uff1b\u5982\u66f4\u6362\u624b\u673a\u53f7\uff0c\u8bf7\u5148\u9000\u8ba2\u5f53\u524d\u624b\u673a\u53f7\u518d\u7ed1\u5b9a\u65b0\u624b\u673a\u53f7\u3002</li>','                <li class="gw"><em>4.</em>\u9000\u8ba2\uff1a\u8054\u901a\u7528\u6237\u9000\u8ba2\u53d1\u9001TD\u523010655198665\uff0c\u79fb\u52a8\u7528\u6237\u9000\u8ba2\u53d1\u9001TD1762\u52301065890059\u6216\u53d1\u90010000\u5230106580083030\uff0c\u6216\u53d1\u90010000\u523010086\uff0c\u5f53\u6708\u9000\u8ba2\u540e\u4e0d\u9000\u8d39\uff0c\u4e0b\u6708\u4e0d\u518d\u6536\u53d6\u4efb\u4f55\u8d39\u7528\u3002</li>','                <li class="gw"><em>5.</em>\u7535\u4fe1\u7528\u6237\u9000\u8ba2\u65f6\uff0c\u70b9\u51fb\u201c\u7acb\u5373\u9000\u8ba2\u201d\u5373\u53ef\u3002<a href="javascript:void(0)" class="gw-ljtd">\u7acb\u5373\u9000\u8ba2</a></li>','                <li class="gw"><em>6.</em>\u5982\u6709\u7591\u95ee\uff0c\u8bf7\u62e8\u6253400-881-6666\uff088:00-20:00\uff09\u3002</li>',"            </ul>","        </div>",'        <div class="GvBox-zhifu ta-c cfix">','            <p class="GvBox-zhifu-row1">\u652f\u4ed8\u91d1\u989d\uff1a<em class="GvBox-money">25\u5143</em><span class="c-grey">\uff08\u4ece\u624b\u673a\u8bdd\u8d39\u4e2d\u6263\u9664\uff09</span></p>','            <p class="GvBox-zhifu-row2 j-hf-btn1">','                <a href="javascript:void(0)" class="GvBox-btnY j-btnnext">\u4e0b\u4e00\u6b65</a>',"            </p>",'            <p class="GvBox-zhifu-row2 j-hf-btn2 hid">','                <a href="javascript:void(0)" class="GvBox-btnG mr20 j-btnprev">\u4e0a\u4e00\u6b65</a>','                <a href="javascript:void(0)" class="GvBox-btnY j-btnpay">\u7acb\u5373\u652f\u4ed8</a>',"            </p>","        </div>","    </div>",'    <div class="tab_jd GvBox-info" style="display:none;">',r.commodity,r.pay_agree,r.pay_money("\u4eac\u4e1c"),"    </div>",'    <div class="tab_dcode GvBox-info" style="display:none;">','        <div class="GvBox-form-duihuan">','            <ul class="GvBox-form cfix">','                <li class="gf"><label>\u5151\u6362\u7801\uff1a</label><input id="codenum" type="text" class="inp inp1" placeholder="\u8bf7\u8f93\u5165\u5151\u6362\u7801" maxlength="18"></li>','                <li class="gf">','                    <label>\u9a8c\u8bc1\u7801\uff1a</label><input id="code_validation" type="text" class="inp inp2" placeholder="\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801" maxlength="4"><img class="code_picture" src="" width="100" height="32"><span class="GvBox-fresh ml10 code_change"></span>','                    <p class="gf-tips code_error">\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801</p>',"                </li>","            </ul>",'            <div class="ta-c"><a href="javascript:void(0)" class="GvBox-btnY j-btnactive">\u7acb\u5373\u6fc0\u6d3b</a></div>',"        </div>",'        <div class="GvBox-service">',"            <p>\u5ba2\u670d\u7535\u8bdd\uff1a4008816666</p>","            <p>\u5de5\u4f5c\u65f6\u95f4\uff1a8:00--20:00\uff08\u8282\u5047\u65e5\u4e0d\u4f11\uff09</p>","        </div>","    </div>","</div>","</div></div>"].join(""),s={curTab:"alipay",payStatus:!1,vipCache:null,init:function(){var o=this;if(o._winBox)return o.show(),void o.refreshTab();o.isInit||(o.isInit=!0,o.renderCss(),p.loadVipCommondities().then(function(i){if(200==i.status&&i.commodities&&i.commodities.vip){o.vipCache=i.commodities.vip;var e=sohuHD.Template.render(a,i.commodities);o.initWin(e),o.initUserInfo(),o.initTips(),d.init(o.$wrap),l.init(o.$wrap),o.refreshTab(),o.bindEvent()}}),o.fixedException())},renderCss:function(){var i=["<style>",".GvBox{width:785px;padding:2px;background:rgba(204,204,204,0.3);background:#f0f0f09;margin:0 auto 20px;color:#3a3a3a;line-height:1.5;font-size:14px;position:relative;}",".GvBoxIn{background:#fcfcfc;border:1px solid #dfdfdf;width:783px;overflow:hidden;}",".GvBox-warn,",".GvBox-item-ok,",".GvBox-radio,",".GvBox-fresh,",".GvBox-close,",".GvBoxMin-ok,",".GvBoxMin-warn{background:url(//css.tv.itc.cn/channel/play_v1_img/GvBox/ico.png) no-repeat 0 -31px;display:inline-block;vertical-align:middle;}",".GvBox-warn{width:16px;height:16px;}",".GvBox-close{background-position:-61px 0;width:14px;height:14px;position:absolute;top:13px;right:16px;cursor:pointer;}",".GvBox-close:hover{background-position:-61px -32px;}",".GvBox-item-ok{background-position:-27px -27px;width:19px;height:20px;position:absolute;bottom:-5px;right:-9px;display:none;}",".GvBox-radio{background-position:-25px 0;width:14px;height:14px;margin-right:7px;}",".GvBox-radio-on{background-position:0 0;}",".GvBox .orange{color:#f1c562;}",".GvBox h4{background:#f8f8f8;height:40px;line-height:40px;font-size:16px;padding:0 10px;}",".GvBox-tips{height:62px;line-height:62px;padding:0 10px;}",".GvBox-tips-text{margin:0 8px 0 5px;}",".GvBox-tips-toux{margin:0 13px 0 11px;}",".GvBox-menu{height:50px;line-height:48px;background:#fefefe;border-bottom:2px solid #f8f8f8;}",".GvBox-menu li{float:left;width:20%;*width:19.5%;text-align:center;font-size:16px;position:relative;}",".GvBox-menu li a{margin:0 10px;}",".GvBox-menu li a:hover{color:#3a3a3a;}",".GvBox-menu .on{border-bottom:2px solid #f1c562;padding-bottom:2px;margin-bottom:-2px;position:relative;}",".GvBox-cont{background:#fff;border:1px solid #f8f8f8;margin:0 10px 10px;padding:0 0 50px;}",".GvBox-info{padding:0 0 0 10px;position:relative;}",".GvBox-item{border:2px solid #d5d5d5;text-align:center;width:166px;height:90px;padding:16px 0 0;float:left;margin:0 20px 0 0;display:inline;position:relative;}",".GvBox-item-arrL,",".GvBox-item-arrR{background:url(//css.tv.itc.cn/channel/play_v1_img/vip/arrow.png) no-repeat 0 0px;cursor:pointer;width:15px;display:inline-block;height:32px;position:absolute;top:68px;}",".GvBox-item-arrR{background-position:-27px 0px;right:10px;}",".GvBox-item-arrR:hover{background-position:-27px -42px;}",".GvBox-item-arrL{left:0;}",".GvBox-item-arrL:hover{background-position:0px -42px;}",".GvBox-item-arrL-unable{background-position:0 0;cursor:default;z-index:21;}",".GvBox-item-arrL-unable:hover{background-position:0 0;}",".GvBox-item-arrR-unable{background-position:-27px 0;cursor:default;z-index:21;}",".GvBox-item-arrR-unable:hover{background-position:-27px 0;}",".GvBox-item-arrL:after,",'.GvBox-item-arrR:after{content:"";width:40px;height:110px;top:-45px;z-index:20;position:absolute;}',".GvBox-item-arrL:after{background:linear-gradient(left,#fff,rgba(255,255,255,0));background:-webkit-linear-gradient(left,#fff,rgba(255,255,255,0));left:25px;}",".GvBox-item-arrR:after{background:linear-gradient(left,rgba(255,255,255,0),#fff);background:-webkit-linear-gradient(left,rgba(255,255,255,0),#fff);right:25px;}",".GvBox-item-arrL-unable:after,",".GvBox-item-arrR-unable:after{display:none;}",".GvBox-item-inner{width:20000px;padding:0 0 7px;}",".GvBox-item-Box{width:690px;overflow:hidden;position:relative;padding-top:23px;}",".GvBox-item-wrap{padding:0 20px 0 25px;position:relative;}",".GvBox-item-money{color:#efbc3f;font-size:30px;margin-right:5px;}",".GvBox-item-detele{color:#d5d5d5;font-size:18px;text-decoration:line-through;}",".GvBox-item-discount{color:#999;font-size:18px;margin:0 5px 0 0;}",".GvBox-item-on,",".GvBox-item:hover{border-color:#f1c562;cursor:pointer;position:relative;}",".GvBox-item-on .GvBox-item-ok{display:block;}",".GvBox-item-row1{margin:0 0 8px;}",".pay-coupon {height:34px; line-height:34px; display:none; padding:0 0 0 25px; }",".pay-coupon .coupon-select {width:470px; position:relative; color:#999 }",".pay-coupon .dropdown-default {height:30px; line-height:30px; padding-left:10px; border:1px solid #ccc;cursor:default;}",".pay-coupon .dropdown-menu {position:absolute; width:100%; display:none; z-index:99999; background:#fff }",".dropdown-menu .option {height:30px; line-height:30px; padding-left:10px; border-left:1px solid #ccc; border-bottom:1px solid #ccc; border-right:1px solid #ccc;cursor:default;}",".dropdown-menu .option:hover {background:#eee;}",".coupon-select .coupon-type {color:#444 }",".coupon-select .gap {display:inline-block; width:10px }",".dropdown-menu .mouseover {background:#eee }",".coupon-select .down-arrow {display:none; position:absolute; right:8px; top:12px; width:0; height:0; border-top:10px solid #ccc; border-left:7px solid transparent; border-right:7px solid transparent }",".pay-coupon span.strong-red {color:#fe5b5b }",".GvBox-erwm{padding:40px 0px 0 79px;}",".GvBox-erwm-photo{margin:0 28px 0 0;position:relative;}",".GvBox-erwm-text{width:170px;margin:45px 0 0;color:#999;}",".GvBox-erwm-money{font-size:18px;margin:40px 0 0;width:300px}",".GvBox-erwm-fresh{background:url(//css.tv.itc.cn/channel/play_v1_img/GvBox/erwm-fresh.png) no-repeat;_filter:alpha(opacity=60);width:148px;height:149px;position:absolute;top:-6px;left:-6px;display:none;}",".GvBox-money{color:#f1c562;font-size:36px;}",".GvBox-btnG{width:113px;height:32px;line-height:32px;text-align:center;border:1px solid #d5d5d5;display:inline-block;vertical-align:middle;background:#fefefe;}",".GvBox-btnG:hover{color:#f1c562;border-color:#f1c562;}",".GvBox-btnG1{width:74px;height:30px;line-height:30px;}",".GvBox-btnG2{width:70px;height:26px;line-height:26px;font-size:12px;}",".GvBox-btnG-fresh{width:69px;height:26px;line-height:26px;margin:10px 0 0;}",".GvBox-btnG-again{width:168px;}",".GvBox-btnG-dis,.GvBox-btnG-dis:hover{border:1px solid #d5d5d5;color:#999;cursor:default;}",".GvBox-btnY{display:inline-block;width:115px;background:#f1c562;color:#fff;font-size:14px;height:34px;line-height:34px;vertical-align:middle;text-align:center;}",".GvBox-btnY:hover{background:#f1d084;color:#fff;}",".GvBox-btnY-dis,.GvBox-btnY-dis:hover{background:#d4d4d5;cursor:default;}",".GvBox-btnY2{width:72px;height:28px;line-height:28px;font-size:12px;}",".GvBox-btnY-see{width:130px;}",".GvBox-wenxin{color:#999;padding:4px 0;}",".GvBox-wenxin-list{width:650px;margin-left:10px;}",".GvBox-wenxin .gw{position:relative;margin:0 0 3px;padding:0 0 0 16px;text-align:justify;}",".GvBox-wenxin .gw em{position:absolute;top:0;left:0;}",".GvBox-wenxin .gw-ljtd{color:#999;text-decoration:underline;}",".GvBox-agree{margin:10px 0;}",".GvBox-agree a:hover{color:#f1c562;}",".GvBox-zhifu .GvBox-money{font-size:32px;margin:0 15px 0 4px;}",".GvBox-zhifu-row1{margin:0 0 13px;}",".GvBox-zhifu-row2{margin-bottom:-20px;position:relative;}",".GvBox-form{margin:0 0 7px 140px;}",".GvBox-form .gf{margin:0 0 10px;}",".GvBox-form .inp{border:1px solid #ddd;height:30px;line-height:30px;padding:0 10px;width:335px;font-size:14px;color:#999;vertical-align:middle;}",".GvBox-form .inp2{width:225px;margin:0 10px 0 0;}",".GvBox-form .gf-tips{color:#e73c31;margin:5px 0 0 75px;}",".GvBox-fresh{background-position:0 -62px;width:18px;height:18px;cursor:pointer;}",".GvBox-fresh:hover{background-position:-57px -62px;}",".GvBox-form label{width:70px;text-align:right;margin-right:5px;display:inline-block;}",".GvBox-form-huafei{margin:30px 0 0 225px;height:148px;}",".GvBox-form-huafei .inp1{width:175px;}",".GvBox-form-huafei .inp2{width:90px;}",".GvBox-form-huafei .inp-value{width:112px;color:#999;margin:0 10px 0 0;display:inline-block;}",".GvBox-form-huafei1{margin:23px; 0 14px 0;}",".GvBox-form-huafei1 .inp{margin:0 10px;width:200px;}",".GvBox-form-duihuan{height:320px;margin-top:23px;}",".GvBox-form-duihuan .code_picture{cursor:pointer;}",".GvBox-service{color:#999;text-align:center;line-height:24px;margin-bottom:-20px;}",".GvBoxMin{width:330px;text-align:center;}",".GvBoxMin .GvBoxIn{padding:49px 0 20px;background:#fff;width:328px;}",".GvBoxMin .GvBox-close{top:13px;right:12px;}",".GvBoxMin-tips{font-size:16px;margin:0 0 5px 0;}",".GvBoxMin-text{color:#999;margin:0 0 24px;line-height:23px;}",".GvBoxMin-ok{background-position:-28px -56px;width:24px;height:24px;margin:0 10px 0 0;}",".GvBoxMin-warn{background-position:-87px 0;width:33px;height:32px;margin:-2px 10px 0 0;}",".GvBoxMin-bot{margin:0 0 10px;}",".GvBoxMin-state{width:508px;}",".GvBoxMin-state .GvBoxIn{padding:44px 0 51px;width:506px;}",".GvBoxMin-duihuan .GvBoxIn{padding:36px 0 20px;}",".GvBoxMin-duihuan .GvBoxMin-text{margin:0 0 15px;}",".jd-tab-tips,.jd-renewal-info{width:100px;position:absolute;background:#ff5757;border-radius:15px 15px 15px 0;padding:0 10px;font-size:14px;height:24px;line-height:24px;color: #fff;display:none;}",".jd-tab-tips{top:-20px;left:76px;}",".jd-renewal-info{display:none;top:-20px;left:24px;}",".tab_jd .jd-renewal-info{display:none;}","</style>"].join("");$(i).appendTo("head")},fixedException:function(){var i=this;setTimeout(function(){i.vipCache||(i.closeWin(),i.resumePlayStartAd(!1))},3e3)},rerenderTabHTML:function(){var a=this;p.loadVipCommondities().then(function(i){if(200==i.status&&i.commodities&&i.commodities.vip){a.vipCache=i.commodities.vip;var e={".tab_alipay":"\u652f\u4ed8\u5b9d",".tab_wechat":"\u5fae\u4fe1",".tab_jd":"\u4eac\u4e1c"},o="";for(var t in e)o=["",r.commodity,r.pay_agree,r.pay_money(e[t])].join(""),$(t).html(sohuHD.Template.render(o,i.commodities));a.refreshTab()}})},initWin:function(i){var e=this,o=new sohuHD.showWin({htmlStr:i,noMask:!1,maskColor:"#000",opacity:"0.2"});o.initWin(),e._winBox=o,e.$wrap=e._winBox.winbox,e.show()},initUserInfo:function(){var t=this;messagebus.subscribe("core.login.userinfo",function(i,e){if(sohuHD.passport.getPassport()){var o=["",'<img src="',e.smallPhoto,'" width="40" height="40" class="ra50 va-m GvBox-tips-toux">',e.vipicon&&e.feetype?'<img src="'+e.vipicon+'" style="margin-top:24px;">':"",'<span class="ib GvBox-tips-text">',e.nickName,"</span>",'<a href="javascript:void(0);" class="GvBox-btnG GvBox-btnG2 j-btnchange" pb-click data-pb-txid="pg_vippay_login" data-pb-other="change">\u5207\u6362\u8d26\u53f7</a>'].join("");t.$wrap.find(".GvBox-erwm-fresh").hide(),t.$wrap.find(".GvBox-btnG-fresh").show(),t.$wrap.find(".GvBox-tips").html(o)}},null,null,{cache:!0}),messagebus.subscribe("core.logout",function(i,e){if(!sohuHD.passport.getPassport()){var o=["",'<span class="GvBox-warn"></span>','<span class="ib GvBox-tips-text">\u60a8\u8fd8\u6ca1\u6709\u767b\u5f55\u54e6\uff0c\u8bf7</span>','<a href="javascript:void(0);" class="GvBox-btnY GvBox-btnY2 j-payvip-login" pb-click data-pb-txid="pg_vippay_login" data-pb-other="login">\u7acb\u5373\u767b\u5f55</a>'].join("");t.$wrap.find(".GvBox-erwm-fresh").show(),t.$wrap.find(".GvBox-btnG-fresh").hide(),t.$wrap.find(".GvBox-tips").html(o),payTicketCache={},t.refreshTab()}},null,null,{cache:!0})},setWinZindex:function(i){this.$wrap.css("zIndex",i)},refreshTab:function(){var i=this,e=i.$wrap.find(".GvBox-menu li.on").data("type");switch(i.curTab=e,i.stopRoll(),e){case"alipay":i.refreshAliAndWechat(i.$wrap.find(".tab_alipay"));break;case"wechat":i.refreshAliAndWechat(i.$wrap.find(".tab_wechat"));break;case"jd":i.refreshAliAndWechat(i.$wrap.find(".tab_jd"));break;case"mobilepay":break;case"dcode":l.refreshCodePic()}},bindEvent:function(){var d=this,t=d.$wrap;t.delegate(".GvBox-close","click",function(i){d.closeWin(),d.payCheck(),d.resumePlayStartAd()}).delegate(".GvBox-menu li","click",function(i){var e=$(this),o=e.index();e.addClass("on").siblings().removeClass("on"),t.find(".GvBox-cont .GvBox-info").hide().eq(o).show(),d.refreshTab()}).delegate(".j-btnchange","click",function(i){sohuHD.doLogout({success:function(){sohuHD.initLogin(),d.showLoginWinbox()}})}).delegate(".j-payvip-login","click",function(i){d.showLoginWinbox()}).delegate(".GvBox-item-wrap .GvBox-item","click",function(i){var e=$(this);e.addClass("GvBox-item-on").siblings().removeClass("GvBox-item-on"),d.refreshTab();var o=e.closest(".GvBox-item-wrap"),t=o.find(".GvBox-item-arrL"),a=o.find(".GvBox-item-arrR"),n=o.find(".GvBox-item-Box").width(),s=o.find(".GvBox-item-inner"),p=s.data("marginleft")||0,r=e.position().left;if(r<0)0==(r=p-r)&&(t.addClass("GvBox-item-arrL-unable"),a.removeClass("GvBox-item-arrR-unable"));else if(n<r+180){(r=n-(r+180)+p)==n-(s.find("li").last().position().left+180)+p&&(t.removeClass("GvBox-item-arrL-unable"),a.addClass("GvBox-item-arrR-unable"))}else r=p;s.data("marginleft",r).stop().animate({marginLeft:r},300)}).delegate(".GvBox-btnG-fresh","click",function(i){d.refreshTab()}).delegate(".dropdown-hasmore, .coupon-select .down-arrow","click",function(i){d.$wrap.find(".tab_"+d.curTab).find(".dropdown-menu").toggle()}).delegate(".dropdown-menu li","click",function(i){var e=$(this),o=d.$wrap.find(".tab_"+d.curTab),t={"coupon-no":e.data("coupon-no"),value:e.data("value")};o.find(".dropdown-hasmore").data(t).html(e.html()),o.find(".dropdown-menu").hide();var a=o.find("li.GvBox-item-on").data("id");d.refreshQrcode(a)}).delegate("[data-pagetype]","click",function(i){var e,o=$(this),t=o.data("pagetype"),a=o.closest(".GvBox-item-wrap"),n=a.find(".GvBox-item-arrL"),s=a.find(".GvBox-item-arrR"),p=a.find(".GvBox-item-Box").width(),r=a.find(".GvBox-item-inner"),d=r.data("marginleft")||0;"left"==t?(e=0,n.addClass("GvBox-item-arrL-unable"),s.removeClass("GvBox-item-arrR-unable")):(e=p-(r.find("li").last().position().left+180)+d,n.removeClass("GvBox-item-arrL-unable"),s.addClass("GvBox-item-arrR-unable")),r.data("marginleft",e).stop().animate({marginLeft:e},300)})},resumePlayStartAd:function(i){if(!$("#player_vipTips").length){i=!1!==i;var e=sohuHD.getElem("player")||sohuHD.getElem("player_ob");if(e&&e.resumePlayStartAd)try{e.resumePlayStartAd(i)}catch(o){e.resumePlayStartAd()}else window._player&&_player.playOrPause&&_player.playOrPause()}},refreshAliAndWechat:function(o){var t=this,i=o.find("li.GvBox-item-on"),a=i.data("id"),e=i.data("key");if(4==a?(o.find(".coupon-select").html(""),o.find(".pay-coupon").hide(),t.refreshQrcode(a)):p.loadPayTicket({commodityId:a}).then(function(i){var e=sohuHD.Template.render(r.pay_ticket,{coupon:i&&i.length?i[0].coupon:null});o.find(".coupon-select").html(e),o.find(".pay-coupon").show(),t.refreshQrcode(a)}).fail(function(){var i=sohuHD.Template.render(r.pay_ticket,{coupon:null});o.find(".coupon-select").html(i),o.find(".pay-coupon").show(),t.refreshPrice()}),t.vipCache){var n=t.vipCache[e];n&&n.description?o.find(".j-descripte-txt").html('<p style="color:#efbc3f;">'+n.description+"</p>"):o.find(".j-descripte-txt").html("\u626b\u63cf\u4e8c\u7ef4\u7801\u8f7b\u677e\u652f\u4ed8\uff0c\u5f00\u542f\u4f1a\u5458\u4e4b\u65c5")}var s=o.find(".GvBox-agree a:eq(1)");"4"==a?s.show():s.hide()},initTips:function(i){i=i||'<div class="GvBox GvBoxMin j-payvip-tipbox"></div>';var e=new sohuHD.showWin({htmlStr:i,noMask:!1,maskColor:"#000",opacity:"0.2"});e.initWin(),this.tipsWin=e},showTips:function(i,e){var o=this;i=i||"",o.tipsWin?(e?o.tipsWin.winbox.addClass(e):o.tipsWin.winbox.removeClass("GvBoxMin-state GvBoxMin-duihuan"),"mobilepay"==o.curTab&&o.setWinZindex(998),o.tipsWin.winbox.html(i)):o.initTips(i),o.tipsWin.show()},hideTips:function(i){this.tipsWin&&this.tipsWin.closeWin(i)},showLoginWinbox:function(){var o=this,i=!1;return sohuHD.passport.getPassport()||(sohuHD.showLoginWinbox(function(){messagebus.subscribe("core.login.userinfo",function(i,e){2==e.feetype?window.location.reload():(vipCommondityCache=null,o.rerenderTabHTML())},null,null,{cache:!0})}),$(".globallogin").css("zIndex","1000"),i=!0),i},show:function(){this._winBox&&(this._winBox.show(),messagebus.publish("statV2.ping",{type:"impress",txid:"pg_vippay"}))},closeWin:function(i){this._winBox&&(this._winBox.closeWin(i),this.stopRoll())},payCheck:function(){var i=document.getElementById("player");try{var e=i.startAdInPlay();this.payStatus&&1==e&&(i.outerHTML=i.outerHTML)}catch(o){}},generateMgid:function(){for(var i="",e=0;e<3;e++)i+=Math.floor(10*Math.random());return i+Date.parse(new Date)},refreshPrice:function(){var i=this.$wrap.find(".tab_"+this.curTab),e=i.find("li.GvBox-item-on").data("price"),o=i.find(".dropdown-default").data("value")||0;i.find(".GvBox-money").html(Math.round(100*(e-o))/100)},refreshQrcode:function(i){var e=this,o=e.$wrap.find(".tab_"+e.curTab);e.stopRoll(),e.refreshPrice(),e.commodityId=i;var t=o.find(".dropdown-default").data("coupon-no")||"";sohuHD.passport.getPassport()&&p.loadQrcode({commodity_id:i,gid:e.generateMgid(),aid:window.playlistId,vid:window.vid,coupon_no:t}).then(function(i){200==i.status&&(i=i.data,e.qrcode=i.qrCode,o.find(".GvBox-erwm-photo img").attr("src",i.url),e.startRoll(i.qrcode))})},startRoll:function(){var e=this;"alipay"!=e.curTab&&"wechat"!=e.curTab&&"jd"!=e.curTab||p.loadPaystatus({qrcode:e.qrcode}).then(function(i){200==i.status&&(1==i.data.result?(e.payStatus=!0,e.stopRoll(),e.qrSuccess()):(e.payStatus=!1,e.timer=setTimeout(function(){e.startRoll()},5e3)))})},stopRoll:function(){this.timer&&clearTimeout(this.timer)},qrSuccess:function(){this.showTips(n.qrsuccess),this.closeWin(),this.setQrTimer(),sohuHD.getJSONP("//my.tv.sohu.com/user/a/profile/currinfo.do?callback=?",function(i){})},setQrTimer:function(){var i=this,e=3,o=i.tipsWin.winbox.find(".GvBoxMin-text em").html(e);i.qrTimer=setInterval(function(){o.html(--e),0==e&&(i.clearQrTimer(),window.location.reload())},1e3)},clearQrTimer:function(){this.qrTimer&&clearInterval(this.qrTimer)}},d={tipsMap:{40023:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801",40030:"\u8be5\u624b\u673a\u53f7\u5df2\u8ba2\u8d2d\u4f1a\u5458\uff08\u5982\u60f3\u66f4\u6362\u624b\u673a\u53f7\uff0c\u8bf7\u5148\u9000\u8ba2\uff09",40065:"\u65e0\u6548\u7684\u5f71\u7247\u8ba2\u5355\u53f7",41105:"\u8bf7\u6c42\u6b21\u6570\u8fc7\u591a\uff0c\u5f53\u524d\u8d26\u53f7\u5df2\u9501\u5b9a\uff0c\u8bf7\u660e\u5929\u518d\u8bd5",41109:"\u5f53\u524d\u624b\u673a\u53f7\u4e0d\u652f\u6301\u6216\u8f93\u5165\u53f7\u7801\u6709\u8bef",45004:"\u5bf9\u4e0d\u8d77\uff0c\u60a8\u7684\u8bdd\u8d39\u4f59\u989d\u4e0d\u8db3",45005:"\u9a8c\u8bc1\u7801\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u83b7\u53d6\u9a8c\u8bc1\u7801",50050:"\u9a8c\u8bc1\u6b21\u6570\u8fc7\u591a\uff0c\u5f53\u524d\u8d26\u53f7\u5df2\u9501\u5b9a\uff0c\u8bf7\u660e\u5929\u518d\u8bd5"},tdMap:{200:"\u9000\u8ba2\u6210\u529f\uff01",40029:"\u60a8\u5c1a\u672a\u8ba2\u8d2d\u7535\u4fe1\u5305\u6708\u4f1a\u5458"},init:function(i){var e=this,o=e.$box=i.find(".tab_mobilepay");e.$wrap=i,e.order_sn="",e.$numInp=o.find("#mobile"),e.$tip1=o.find(".j-mobile-error").html(""),e.$numSpan=o.find("#mobileTxt"),e.$mobilevalid=o.find("#mobilevalid"),e.$tip2=o.find(".j-valid-error").html(""),e.$btnValid=o.find(".j-btngetvalidnum"),e.bindEvent()},bindEvent:function(){var e=this;e.$box.delegate(".j-btnnext","click",function(i){if(!s.showLoginWinbox()){if(!e.checkMobile())return;e.sendMsg(e.$tip1)}}).delegate(".j-btnchangenum, .j-btnprev","click",function(i){e.mobilePayDisplay()}).delegate('.j-btngetvalidnum"',"click",function(i){$(this).hasClass("GvBox-btnG-dis")||e.sendMsg(e.$tip2)}).delegate('.j-btnpay"',"click",function(i){$(this).hasClass("GvBox-btnY-dis")||e.mobileToPay()}).delegate(".gw-ljtd","click",function(i){e.mobileTd()}),$("body").delegate(".GvBoxMin-state .GvBox-close, .GvBoxMin-state .j-btn-mbsucc","click",function(i){var e=$(this);(e.hasClass("GvBox-close")||e.hasClass("j-btn-mbsucc"))&&("mobilepay"==s.curTab?location.reload():s.hideTips(function(){s.clearQrTimer(),location.reload()}))}).delegate(".j-payvip-tipbox .j-btn-mbfail","click",function(){"mobilepay"==s.curTab&&(s.setWinZindex(999),s.hideTips())}).delegate(".j-payvip-tipbox .GvBox-close, .j-payvip-tipbox .j-btn-see","click",function(){"mobilepay"==s.curTab?s.setWinZindex(999):"dcode"==s.curTab&&(s.payCheck(),s.resumePlayStartAd()),s.hideTips()})},checkMobile:function(){var i=this,e=$.trim(i.$numInp.val()),o=new RegExp(/^1\d{10}$/),t=new RegExp(/^(134|135|136|137|138|139|147|150|151|152|157|158|159|182|183|184|187|188|178)\d{8}$/),a=new RegExp(/^(130|131|132|155|156|185|186|145|176)\d{8}$/),n=new RegExp(/^(133|153|180|181|189|177)\d{8}$/);return o.test(e)?t.test(e)?(i.$tip1.text(""),!0):a.test(e)?(i.$tip1.text(""),!0):n.test(e)?(i.$tip1.text(""),!0):(i.$tip1.text("\u76ee\u524d\u6682\u4e0d\u652f\u6301\u9664\u8054\u901a/\u79fb\u52a8/\u7535\u4fe1\u4ee5\u5916\u7684\u624b\u673a\u53f7"),!1):""!==e?(i.$tip1.text("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801"),!1):""==e?(i.$tip1.text("\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a"),!1):void 0},sendMsg:function(i){var o=this,t=$.trim(o.$numInp.val()),a=i||o.$tip1;p.sendMsg({phone_num:t,aid:window.playlistId,vid:window.vid}).then(function(i){if(200==i.status)!0===(i=i.data).is_chinamobile&&i.details&&"umpay"!=i.details.channel||!0===i.is_chinaunicom?i.details.url&&o.openMobilePayWin(i.details.url):!0===i.is_chinamobile&&i.details&&"umpay"==i.details.channel||!0===i.is_chinatelecom?(o.order_sn=i.order_sn,o.mobilePayDisplay("next",t)):a.text("\u65e0\u6548\u7684\u624b\u673a\u53f7\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165");else{var e=o.tipsMap[i.status]||i.statusText;a.text(e)}})},openMobilePayWin:function(i){var e=i&&window.open(i);(s.showTips(n.mobileTip,"GvBoxMin-state"),e==undefined)&&$(".j-pay-link").find("a").attr("href",i).show()},changeMobileDisplay:function(i){return(i+="").substring(0,3)+"*****"+i.substring(8,11)},mobilePayDisplay:function(i,e){var o=this,t=o.$box;"next"==i?(t.find(".GvBox-form-huafei1").hide(),t.find(".GvBox-agree").hide(),t.find(".GvBox-wenxin").hide(),t.find(".j-hf-btn1").hide(),t.find(".GvBox-form-huafei").show(),t.find(".j-hf-btn2").show(),t.find("#mobileTxt").text(o.changeMobileDisplay(e)),o.setBtnDisable(!1),o.resetCountDown(),o.countDown()):(t.find(".GvBox-form-huafei1").show(),t.find(".GvBox-agree").show(),t.find(".GvBox-wenxin").show(),t.find(".j-hf-btn1").show(),t.find(".GvBox-form-huafei").hide(),t.find(".j-hf-btn2").hide(),o.$mobilevalid.val(""),o.$tip2.text(""))},resetCountDown:function(){this.$btnValid.addClass("GvBox-btnG-dis").html('<span class="j-mobile-num">60</span>\u79d2')},countDown:function(){var i=this.$btnValid,e=i.find(".j-mobile-num"),o=60,t=setInterval(function(){e.text(--o),0==o&&(clearInterval(t),i.removeClass("GvBox-btnG-dis").html("\u91cd\u65b0\u83b7\u53d6"))},1e3)},mobileToPay:function(){var o=this,t=($.trim(o.$numInp.val()),o.$tip2),i=$.trim(o.$mobilevalid.val()),e=new RegExp(/^[a-zA-Z0-9]+$/);""!=i?!i||e.test(i)?(t.text(""),p.smsPay({phone_num:$.trim(o.$numInp.val()),verification_code:$.trim(o.$mobilevalid.val()),order_sn:o.order_sn}).then(function(i){if(200==i.status)o.startRoll();else{s.payStatus=!1;var e=o.tipsMap[i.status]||"\u60a8\u7684\u624b\u673a\u53f7\u6682\u65f6\u65e0\u6cd5\u8ba2\u8d2d";47006==i.status&&(e=i.statusText||"\u60a8\u7684\u624b\u673a\u53f7\u6682\u65f6\u65e0\u6cd5\u8ba2\u8d2d",o.setBtnDisable(!0),o.startRoll()),t.text(e)}})):t.text("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801"):t.text("\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a")},setBtnDisable:function(i){var e=this.$box.find(".j-btnpay");i?e.addClass("GvBox-btnY-dis"):e.removeClass("GvBox-btnY-dis")},startRoll:function(){var e=this;$.ajax({url:t.order,data:{order_sn:e.order_sn},type:"get",dataType:"jsonp"}).then(function(i){200==i.status&&(4==i.data.status?(e.stopRoll(),s.payStatus=!0,s.qrSuccess()):e.timer=setTimeout(function(){e.startRoll()},1e3))})},stopRoll:function(){this.timer&&clearTimeout(this.timer)},mobileTd:function(){var t=this;p.quitOrder().then(function(i){var e=t.tdMap[i.status]||"\u9000\u8ba2\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u9000\u8ba2",o=sohuHD.Template.render(n.tdTip,{iconClass:200==i.status?"GvBoxMin-ok":"GvBoxMin-warn",tipTxt:e});s.showTips(o)},function(){var i=sohuHD.Template.render(n.tdTip,{iconClass:"GvBoxMin-warn",tipTxt:"\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u9000\u8ba2"});s.showTips(i)})}},l={reg:new RegExp(/^[a-zA-Z0-9]{18}$/),codeReg:new RegExp(/^[a-zA-Z0-9]{4}$/),init:function(i){var e=this,o=e.$box=i.find(".tab_dcode");e.$wrap=i,e.$codeNum=o.find("#codenum"),e.$codeValid=o.find("#code_validation"),e.$codePic=o.find(".code_picture"),e.$codeError=o.find(".code_error").html("&nbsp;"),e.refreshCodePic(),e.bindEvent()},refreshCodePic:function(){this.$codePic.attr("src",p.getImagecreate())},checkValid:function(i,e,o){var t=this.$codeError,a=$.trim(i.val()),n=!1;return(n=e.test(a))?t.html("&nbsp;"):""!=a?(n=!1,t.text("\u8bf7\u8f93\u5165\u6b63\u786e\u7684"+o)):""==a&&(n=!1,t.text(o+"\u4e0d\u80fd\u4e3a\u7a7a")),n},activeCode:function(){var a=this;a.checkValid(a.$codeNum,a.reg,"\u5151\u6362\u7801")&&(a.checkValid(a.$codeValid,a.codeReg,"\u9a8c\u8bc1\u7801")&&p.activeCard({codenum:$.trim(a.$codeNum.val()),validate:$.trim(a.$codeValid.val())}).then(function(i){if(200==i.status){var e=$.parseJSON(i.data).privileges;if(e.length){s.payStatus=!0;var o=e[0],t=sohuHD.Template.render(n.codeTip,{txt:'\u606d\u559c\u60a8\u83b7\u5f97<span class="orange">'+o.amount+o.unit+o.name+"</span>"});s.showTips(t,"GvBoxMin-duihuan"),s.closeWin()}else a.$codeError.text("\u5151\u6362\u5931\u8d25")}else s.payStatus=!1,2==i.wrong_type?(a.$codeError.text("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801"),a.refreshCodePic(),a.$codeValid.val("")):a.$codeError.text(i.statusText)}))},bindEvent:function(){var e=this;e.$box.delegate(".code_picture, .code_change","click",function(){s.showLoginWinbox()||e.refreshCodePic()}).delegate(".j-btnactive","click",function(i){s.showLoginWinbox()||e.activeCode()}),$("body").delegate(".GvBoxMin-duihuan .GvBox-close","click",function(i){$(this).hasClass("GvBox-close")&&location.reload()})}};"undefined"==typeof window.sohuHD&&(window.sohuHD={}),messagebus.subscribe("play.openPayVip",function(i,e){s.init()},null,null,{cache:!0}),sohuHD._payvip=s}(jQuery);