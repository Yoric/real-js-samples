!function(r){"use strict";function e(){this.performance=r.performance||r.webkitPerformance||r.msPerformance||r.mozPerformance,this.page=this.getPageTimeByOnload()}e.prototype.getPageTimeByOnload=function(){var e={};return r.pageStartTime&&(e.calPageTime=(new Date).getTime()-r.pageStartTime),e},e.prototype.getPageTimeByUnload=function(){this.page=Object.assign(this.page,this.getPageTime());try{this.resource=this.getResourceTime()}catch(e){this.resource={}}},e.prototype.getPageTime=function(){var e=this.performance.timing,t={pid:"oversea-log.oversea-landing.perf-log"};return t.redirectTime=e.redirectEnd-e.redirectStart,t.dnsTime=e.domainLookupEnd-e.domainLookupStart,t.tcpTime=e.connectEnd-e.connectStart,t.requestTime=e.responseStart-e.requestStart,t.responseTime=e.responseEnd-e.responseStart,t.resloveDomTime=e.domInteractive-e.domLoading,t.loadDomTime=e.domComplete-e.domInteractive,r.pageStartTime&&(t.calWhiteTime=r.pageStartTime-e.navigationStart),t.calDomLoadTime=e.domComplete-e.responseEnd,t.calLoadTime=e.loadEventEnd-e.navigationStart,t},e.prototype.getResourceTime=function(){var e=this.performance.getEntriesByType("resource"),i={};e.forEach(function(e){var t=e.name.replace(/^https?:\/\//,"").split("/")[0].replace(/\./g,"_");if(t&&e.duration&&(i[t]||(i[t]=[]),e.connectEnd&&e.domainLookupEnd&&e.responseStart)){var r=e.connectEnd-e.connectStart,o=e.domainLookupEnd-e.domainLookupStart,n=e.responseStart-e.requestStart,a=Number.parseFloat((r+o+n).toFixed(2));i[t].push(a)}});var t={};for(var r in i){var o=i[r];if(o&&0<o.length){var n=o.reduce(function(e,t){return e+t},0)/o.length;t[r]=Number.parseFloat(n.toFixed(2))}}return t},e.prototype.sendData=function(){var e=["p4pparam="+JSON.stringify({page:this.page,resource:this.resource}),"pageType=seo"];try{r.goldlog.record("/oversea-log.oversea-landing.perf-log","EXP",e.join("_&$&_"),"POST")}catch(e){}},r.addEventListener("load",function(){r.perfCount=new e},!1),r.addEventListener("beforeunload",function(){r.perfCount&&(r.perfCount.getPageTimeByUnload(),r.perfCount.sendData())},!1)}("undefined"!=typeof window?window:{});