define("mui/slider-m/index",function(e,t,i){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol?"symbol":typeof e};var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s="current";var a=window;var l=document;var f=e("mui/flipsnap/index");var u=e("mui/custom-event/index");var c=function(){function e(t,i){var n=this;o(this,e);this.config=i=Object.assign({scroller:".scroller",nav:".nav",transitionDuration:350,bindTrigger:false,lazyLoadImg:false,autoSlide:false,hoverStop:true,fallback:{img:"",width:30,height:30},threshold:30,timeout:3e3},i);if(t.getDOMNode){t=t.getDOMNode()}this.el=typeof t==="string"?document.querySelector(t):t;this.scroller=this.el.querySelector(i.scroller);this.pannels=i.pannels&&this.scroller.querySelectorAll(i.pannels)||this.scroller.children;this.nav=this.el.querySelector(i.nav);if(this.nav){this.triggers=this.nav.children}var r=f(this.scroller,i);this.flipsnap=r;var l=0;r.element.addEventListener("fspointmove",function(e){if(e.target!==r.element){return}var t=this.index;if(isNaN(t)||l===t){return}l=t;if(this.triggers){var i=this.triggers[t];this.nav.querySelector("."+s).classList.remove(s);i&&i.classList.add(s)}this.trigger("change",{index:t,pannel:this.pannels[t],originalEvent:e})}.bind(this),false);r.element.addEventListener("fspointbeforemove",function(e){if(e.target!==r.element){return}this.trigger("beforechange",{before:e.beforePoint,index:e.currentPoint,pannel:this.pannels[e.currentPoint],originalEvent:e})}.bind(this),false);if(i.autoSlide){(function(){n.play();if(i.hoverStop){n.scroller.addEventListener("touchstart",function(e){this.stop()}.bind(n));n.scroller.addEventListener("touchend",function(e){this.play()}.bind(n))}var e=function r(e,t,i,n){if(!e){return}var r=Array.prototype.slice.call(n);t=t||0;if(typeof e==="string"){e=i[e]}var o=function a(){e.apply(i,r)},s=setTimeout(o,t);return{id:s,cancel:function l(){clearTimeout(s)}}};var t=function o(t,i,n){i=i||150;if(i===-1){return function(){t.apply(n||this,arguments)}}var r=null;function o(){o.stop();r=e(t,i,n||this,arguments)}o.stop=function(){if(r){r.cancel();r=0}};return o};a.addEventListener("scroll",t(function(e){if(this.isViewPort()){this.play()}else{this.stop()}}.bind(n),200),false)})()}if(this.triggers&&i.bindTrigger){var u=function v(e,t){n.triggers[e].addEventListener("click",function(t){this.go(e)}.bind(n))};for(var c=0,h=this.triggers.length;c<h;c++){u(c,h)}}a.addEventListener("orientationchange",function(){r.refresh(0)});if(i.lazyLoadImg!==false){this.lazyLoadImg();if(i.fallback){}}}r(e,[{key:"_getRAF",value:function t(e){var t=window,i=["r","webkitR","mozR","msR","oR"];for(var n=0;n<i.length;n++){var r=i[n]+"equestAnimationFrame";if(r in t){return t[r](e)}}return function(e){setTimeout(e,0)}}},{key:"play",value:function i(){var e=this;clearInterval(e.autoSliderTimer);e.autoSliderTimer=setInterval(function(){e._getRAF(function(){e.next()})},e.config.timeout)}},{key:"stop",value:function u(){clearInterval(this.autoSliderTimer);this.trigger("stop")}},{key:"getPoint",value:function c(e){var t=this.size+1;return(t+e%t)%t}},{key:"go",value:function h(e,t,i){this.flipsnap.moveToPoint.apply(this.flipsnap,[e,i]);if(!t){return}this.once("change",t)}},{key:"next",value:function v(e,t){var i=this.getPoint(this.index+1);this.go.apply(this,[i,e,t])}},{key:"previous",value:function d(e,t){var i=this.getPoint(this.index-1);this.go.apply(this,[i,e,t])}},{key:"refresh",value:function g(e){this.flipsnap.refresh.apply(this.flipsnap,arguments)}},{key:"destroy",value:function p(){if(this.autoSliderTimer){this.stop()}this.flipsnap.destroy()}},{key:"lazyLoadImg",value:function y(){var e=this,t=[],i=this.config.fallback,r=e.pannels,o=undefined,s=undefined;if(i&&i.img){var a=this.scroller.querySelectorAll("img");for(var l=0,f=a.length;l<f;l++){var u=a[l];u.setAttribute("src",i.img);u.style.cssText="width:"+i.width+"px;height:"+i.height+"px"}}o=function c(i){var o=e.index,a="data-lazyload",l="data-src";if(t.length!==e.size+1){if(t.indexOf(o)===-1){var f=r[o].querySelectorAll("img");var u=function d(e,t){var i=f[e];var n=i.getAttribute(a)||i.getAttribute(l);if(!n){return{v:undefined}}var r=new Image;r.addEventListener("load",function(){i.src=n;r=null});r.src=n;i.removeAttribute(a)};for(var c=0,h=f.length;c<h;c++){var v=u(c,h);if((typeof v==="undefined"?"undefined":n(v))==="object")return v.v}t.push(o)}}else{s()}};s=function(){this.off("change",o,false)}.bind(this);this.on("change",o,false);o()}},{key:"getOffset",value:function m(e){var t=e;var i=0,n=0;while(t!=null&&t!=l.body){i+=t.offsetLeft;n+=t.offsetTop;t=t.offsetParent}return{left:i,top:n}}},{key:"isViewPort",value:function b(){var e=this.el,t=this.getOffset(e);return!(t.top+e.clientHeight<=a.scrollY)&&!(a.innerWidth+a.scrollX<=t.left)&&!(a.innerHeight+a.scrollY<=t.top)&&!(t.left+e.clientWidth<=a.scrollX)}},{key:"index",get:function k(){return this.flipsnap.currentPoint}},{key:"size",get:function S(){return this.flipsnap._maxPoint}}]);return e}();Object.assign(c.prototype,u);i.exports=c});