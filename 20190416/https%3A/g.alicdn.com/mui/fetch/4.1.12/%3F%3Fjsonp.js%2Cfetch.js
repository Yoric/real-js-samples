define("mui/fetch/jsonp",["mui/fetch/fetch","mui/fetch/tool"],function(e,t,r){"use strict";var n=e("mui/fetch/fetch");var o=e("mui/fetch/tool");(function(e){var t={timeout:2e3,jsonpCallback:"callback",callback:null,body:""};function i(){return"jsonp_"+Date.now()%1e5+Math.ceil(Math.random()*1e3)}function s(e){var t=Object.prototype.toString.call(e).toLowerCase();return t.substring(8,t.length-1)}function a(t,r){var n=document.querySelectorAll("head script[id="+r+"]");if(n.length<2){try{delete e[t]}catch(r){e[t]=undefined}}}function f(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}function u(t){var r=e.document.createElement("a");r.setAttribute("href",t);return r}var c=function r(n,c){c=c||{};e.fetch.jsonpcount++;var l=c.timeout?c.timeout:t.timeout,d=c.jsonpCallback?c.jsonpCallback:t.jsonpCallback,p;if(n.indexOf(d)!==-1){var h=u(n),y=new RegExp("("+d+"(=([^&#]*)|&|#|$))"),m=y.exec(h.search.substring(1));if(m){h.search=h.search.replace(m[0],"");n=h.toString();c.callback=m[3]}}return new Promise(function(t,r){var u=c.callback||i(),h=d+"_"+u+"_"+e.fetch.jsonpcount;if(e[u]){if(p)clearTimeout(p);f(h);a(u)}e[u]=function(e){t({ok:true,json:function t(){return Promise.resolve(e)},text:function t(){return Promise.resolve(JSON.stringify(e))}});if(p)clearTimeout(p);f(h);a(u)};n+=n.indexOf("?")===-1?"?":"&";if(c.body){n+=s(c.body)==="object"?o.param(c.body):encodeURI(String(c.body));n+="&"}var y=document.createElement("script");y.setAttribute("src",n+d+"="+u);y.id=h;document.getElementsByTagName("head")[0].appendChild(y);p=setTimeout(function(){r(new Error("JSONP request to "+n+" timed out"));e[u]=function(){a(u);f(h)}},l);y.onreadystatechange=y.onerror=function(){if(!this.readyState||(this.readyState==="loaded"||this.readyState==="complete")&&!e[u]){r(new Error("JSONP request to "+n+" error"));if(p)clearTimeout(p);a(u);f(h)}}})};var l=n;e.fetch=function(e,t){if(t&&t.method&&t.method.toUpperCase()==="JSONP"||/\.jsonp/i.test(e)){return c(e,t)}else{return l(e,t)}};e.fetch.jsonpcount=0;if(r){r.exports=e.fetch}})(window)});define("mui/fetch/fetch",["mui/babel-polyfill/index"],function(e,t,r){"use strict";var n=e("mui/babel-polyfill/index");(function(){"use strict";self.__disableNativeFetch=true;if(!self.__disableNativeFetch&&self.fetch){if(typeof r!=="undefined"&&r.exports){r.exports=self.fetch}return}function e(e){if(typeof e!=="string"){e=e.toString()}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e)){throw new TypeError("Invalid character in header field name")}return e.toLowerCase()}function t(e){if(typeof e!=="string"){e=e.toString()}return e}function n(e){this.map={};var t=this;if(e instanceof n){e.forEach(function(e,r){r.forEach(function(r){t.append(e,r)})})}else if(e){Object.getOwnPropertyNames(e).forEach(function(r){t.append(r,e[r])})}}n.prototype.append=function(r,n){r=e(r);n=t(n);var o=this.map[r];if(!o){o=[];this.map[r]=o}o.push(n)};n.prototype["delete"]=function(t){delete this.map[e(t)]};n.prototype.get=function(t){var r=this.map[e(t)];return r?r[0]:null};n.prototype.getAll=function(t){return this.map[e(t)]||[]};n.prototype.has=function(t){return this.map.hasOwnProperty(e(t))};n.prototype.set=function(r,n){this.map[e(r)]=[t(n)]};n.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.map).forEach(function(r){e(r,t.map[r])})};function o(e){if(e.bodyUsed){return m.reject(new TypeError("Already read"))}e.bodyUsed=true}function i(e){return new m(function(t,r){e.onload=function(){t(e.result)};e.onerror=function(){r(e.error)}})}function s(e){var t=new FileReader;t.readAsArrayBuffer(e);return i(t)}function a(e,t){var r=new FileReader;var n=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"";var o=/charset\=[0-9a-zA-Z\-\_]*;?/;var s=e.type.match(o)||n.match(o);var a=[e];if(s){a.push(s[0].replace(/^charset\=/,"").replace(/;$/,""))}r.readAsText.apply(r,a);return i(r)}var f={blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self};function u(){this.bodyUsed=false;this._initBody=function(e,t){this._bodyInit=e;if(typeof e==="string"){this._bodyText=e}else if(f.blob&&Blob.prototype.isPrototypeOf(e)){this._bodyBlob=e;this._options=t}else if(f.formData&&FormData.prototype.isPrototypeOf(e)){this._bodyFormData=e}else if(!e){this._bodyText=""}else{throw new Error("unsupported BodyInit type")}};if(f.blob){this.blob=function(){var e=o(this);if(e){return e}if(this._bodyBlob){return m.resolve(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return m.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){return this.blob().then(s)};this.text=function(){var e=o(this);if(e){return e}if(this._bodyBlob){return a(this._bodyBlob,this._options)}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return m.resolve(this._bodyText)}}}else{this.text=function(){var e=o(this);return e?e:m.resolve(this._bodyText)}}if(f.formData){this.formData=function(){return this.text().then(d)}}this.json=function(){return this.text().then(function(e){return JSON.parse(e)})};return this}var l=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function h(e){var t=e.toUpperCase();return l.indexOf(t)>-1?t:e}function p(e,t){t=t||{};this.url=e;this.credentials=t.credentials||"omit";this.headers=new n(t.headers);this.method=h(t.method||"GET");this.mode=t.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&t.body){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(t.body,t)}function d(e){var t=new FormData;e.trim().split("&").forEach(function(e){if(e){var r=e.split("=");var n=r.shift().replace(/\+/g," ");var o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}});return t}function c(e){var t=new n;var r=e.getAllResponseHeaders().trim().split("\n");r.forEach(function(e){var r=e.trim().split(":");var n=r.shift().trim();var o=r.join(":").trim();t.append(n,o)});return t}u.call(p.prototype);function y(e,t){if(!t){t={}}this._initBody(e,t);this.type="default";this.url=null;this.status=t.status;this.ok=this.status>=200&&this.status<300;this.statusText=t.statusText;this.headers=t.headers instanceof n?t.headers:new n(t.headers);this.url=t.url||""}u.call(y.prototype);self.Headers=n;self.Request=p;self.Response=y;var b=function e(t,r){var n;if(p.prototype.isPrototypeOf(t)&&!r){n=t}else{n=new p(t,r)}return new m(function(e,t){var r=new XMLHttpRequest;function o(){if("responseURL"in r){return r.responseURL}if(/^X-Request-URL:/m.test(r.getAllResponseHeaders())){return r.getResponseHeader("X-Request-URL")}return}function i(){if(r.readyState!==4){return}var n=r.status===1223?204:r.status;if(n<100||n>599){t(new TypeError("Network request failed"));return}var i={status:n,statusText:r.statusText,headers:c(r),url:o()};var s="response"in r?r.response:r.responseText;e(new y(s,i))}r.onreadystatechange=i;if(!self.usingActiveXhr){r.onload=i;r.onerror=function(){t(new TypeError("Network request failed"))}}r.open(n.method,n.url,true);try{if(n.credentials==="include"){if("withCredentials"in r){r.withCredentials=true}else{console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning")}}}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}if("responseType"in r&&f.blob){r.responseType="blob"}n.headers.forEach(function(e,t){t.forEach(function(t){r.setRequestHeader(e,t)})});r.send(typeof n._bodyInit==="undefined"?null:n._bodyInit)})};var m=self.Promise;self.fetch=b.bind({});self.fetch.polyfill=true;if(typeof r!=="undefined"&&r.exports){r.exports=b}})()});