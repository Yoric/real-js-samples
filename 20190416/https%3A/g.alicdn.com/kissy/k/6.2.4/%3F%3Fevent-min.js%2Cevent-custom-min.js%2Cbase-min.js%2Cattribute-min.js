define("event",["event-dom","event-custom"],function(e){var t,n=e("event-dom"),r=e("event-custom");return t=function(e){var t=n,v=r,o=t;return o.Target=v.Target,e=o}()});define("event-custom",["event-base","util"],function(t){var e,r,n,i,s,a,u=t("event-base"),o=t("util");return e=function(t){function e(){e.superclass.constructor.apply(this,arguments)}var r=u,n=o;return n.extend(e,r.Observer,{keys:["fn","context","groups"]}),t=e}(),r=function(t){function e(t){e.superclass.constructor.call(this),n.mix(this,t)}var r=u,n=o;return n.extend(e,r.Object),t=e}(),n=function(t){function n(){var t=this;n.superclass.constructor.apply(t,arguments),t.defaultFn=null,t.defaultTargetOnly=!1,t.bubbles=!0}var i=u,s=e,a=r,c=i.Utils,f=o;return f.extend(n,i.Observable,{on:function(t){var e=new s(t);-1===this.findObserver(e)&&this.observers.push(e)},fire:function(t){t=t||{};var e,r,n,i,s,u=this,o=u.bubbles,c=u.currentTarget,f=u.type,v=u.defaultFn,g=t;if(t.type=f,g.isEventObject||(g=new a(g)),g.target=g.target||c,g.currentTarget=c,s=u.notify(g),i!==!1&&void 0!==s&&(i=s),o&&!g.isPropagationStopped())for(e=c.getTargets(),r=e&&e.length||0,n=0;r>n&&!g.isPropagationStopped();n++)s=e[n].fire(f,g),i!==!1&&void 0!==s&&(i=s);if(v&&!g.isDefaultPrevented()){var l=g.target,h=l.getEventListeners(g.type);(u.defaultTargetOnly||h&&h.defaultTargetOnly)&&c!==l||(i=v.call(c,g))}return i},notify:function(t){var e,r,n,i=[].concat(this.observers),s=i.length;for(n=0;s>n&&!t.isImmediatePropagationStopped();n++)e=i[n].notify(t,this),r!==!1&&void 0!==e&&(r=e);return r},detach:function(t){var e,r=this,n=t.fn,i=t.context,s=r.currentTarget,a=r.observers,u=t.groups;if(a.length){u&&(e=c.getGroupsRe(u));var o,f,v,g,l,h=a.length;if(n||e){for(i=i||s,o=0,f=0,v=[];h>o;++o){g=a[o];var p=g.config;l=p.context||s,(i!==l||n&&n!==p.fn||e&&!p.groups.match(e))&&(v[f++]=g)}r.observers=v}else r.reset()}}}),t=n}(),i=function(t){function e(t,e){var r=t.getEventListeners(e);return r||(r=t.getEventListeners()[e]=new i({currentTarget:t,type:e})),r}var r=u,i=n,s=o,a=r.Utils,c=a.splitAndRun,f="__~ks_bubble_targets",v="__~ks_custom_events";return t={isTarget:1,fire:function(t,e){var r,n=this,s=n.getTargets(),u=s&&s.length;return t.isEventObject&&(e=t,t=t.type),e=e||{},c(t,function(t){var s,o;if(a.fillGroupsForEvent(t,e),t=e.type,o=n.getEventListeners(t),o||u){if(o){if(!o.hasObserver()&&!o.defaultFn&&(o.bubbles&&!u||!o.bubbles))return}else o=new i({currentTarget:n,type:t});s=o.fire(e),r!==!1&&void 0!==s&&(r=s)}}),r},publish:function(t,r){var n,i=this;return c(t,function(t){n=e(i,t),s.mix(n,r)}),i},addTarget:function(t){var e=this,r=e.getTargets();return s.inArray(t,r)||r.push(t),e},removeTarget:function(t){var e=this,r=e.getTargets(),n=s.indexOf(t,r);return-1!==n&&r.splice(n,1),e},getTargets:function(){return this[f]||(this[f]=[])},getEventListeners:function(t){var e=this[v]||(this[v]={});return t?e[t]:e},on:function(t,r,n){var i=this;return a.batchForType(function(t,r,n){var s=a.normalizeParam(t,r,n);t=s.type;var u=e(i,t);u.on(s)},0,t,r,n),i},detach:function(t,e,r){var n=this;return a.batchForType(function(t,e,r){var i=a.normalizeParam(t,e,r);if(t=i.type){var u=n.getEventListeners(t);u&&u.detach(i)}else s.each(n.getEventListeners(),function(t){t.detach(i)})},0,t,e,r),n}}}(),s=function(t){var e=i,n=o;return t={Target:e,Object:r,global:n.mix({},e)}}(),a=function(t){return t=s}()});define("base",["util","attribute"],function(t){var n,r,e=t("util"),i=t("attribute");return n=function(t){function n(t,n){return function(r){return function(){var e=this;n?r!==f&&r.apply(e,arguments):e.callSuper.apply(e,arguments);var i=arguments.callee.__owner__.__extensions__||[];n&&i.reverse(),s(e,i,t,arguments),n?e.callSuper.apply(e,arguments):r!==f&&r.apply(e,arguments)}}}function r(t){var n=this,r=n.__extensions__,e=n.__hooks__,i=n.prototype;if(r.length&&e)for(var a in e)(!i.hasOwnProperty(a)||t.hasOwnProperty(a))&&(t[a]=t[a]||f);return h.call(n,t)}function a(t){var n,r=this;t.target===r&&(n=r[g+t.type.slice(5).slice(0,-6)],n.call(r,t.newVal,t))}function u(t){var n,r=t.get("plugins");l.each(r,function(t,e){"function"==typeof t&&(n=t,r[e]=new n)})}function o(t,n){var r,e,i=this,a=i.get("plugins");if(n=n||[],n=[i].concat(n),r=a.length)for(var u=0;r>u;u++)e=a[u][t],e&&e.apply(a[u],n)}function s(t,n,r,e){var i;if(i=n&&n.length)for(var a=0;i>a;a++){var u=n[a]&&(r?n[a].prototype[r]:n[a]);u&&u.apply(t,e||[])}}var l=e,c=i,p=l.ucfirst,g="_onSet",f=l.noop,v=c.extend({constructor:function(){var t=this;t.callSuper.apply(t,arguments);var n=t.get("listeners");if(n)for(var r in n)t.on(r,n[r]);t.initializer(),u(t),o.call(t,"pluginInitializer"),t.bindInternal(),t.syncInternal()},initializer:f,__getHook:n,__callPluginsMethod:o,bindInternal:function(){var t,n,r=this,e=r.getAttrs();for(t in e)n=g+p(t),r[n]&&r.on("after"+p(t)+"Change",a)},syncInternal:function(){for(var t,n=this,r=[],e=n.constructor,i=n.getAttrs();e;)r.push(e),e=e.superclass&&e.superclass.constructor;for(r.reverse(),t=0;t<r.length;t++){var a=r[t].ATTRS||{};for(var u in a)if(u in i){var o,s,l=g+p(u);(s=n[l])&&0!==i[u].sync&&void 0!==(o=n.get(u))&&s.call(n,o)}}},plug:function(t){var n=this;if("function"==typeof t){var r=t;t=new r}return t.pluginInitializer&&t.pluginInitializer(n),n.get("plugins").push(t),n},unplug:function(t){var n=[],r=this,e="string"==typeof t;return l.each(r.get("plugins"),function(i){var a,u=0;t&&(e?(a=i.get&&i.get("pluginId")||i.pluginId,a!==t&&(n.push(i),u=1)):i!==t&&(n.push(i),u=1)),u||i.pluginDestructor(r)}),r.setInternal("plugins",n),r},getPlugin:function(t){var n=null;return l.each(this.get("plugins"),function(r){var e=r.get&&r.get("pluginId")||r.pluginId;return e===t?(n=r,!1):void 0}),n},destructor:f,destroy:function(){var t=this,n=l.makeArray(arguments);t.get("destroyed")||(o.call(t,"pluginDestructor",n),t.destructor.apply(t,n),t.set("destroyed",!0),t.fire("destroy"),t.detach())}});l.mix(v,{__hooks__:{initializer:n(),destructor:n("__destructor",!0)},ATTRS:{plugins:{valueFn:function(){return[]}},destroyed:{value:!1},listeners:{}},extend:function d(t,n,e){l.isArray(t)||(e=n,n=t,t=[]);var i=c.extend.call(this,n,e);if(i.__extensions__=t,r.call(i,{}),t.length){var a={},u={};l.each(t.concat(i),function(t){if(t){l.each(t.ATTRS,function(t,n){var r=a[n]=a[n]||{};l.mix(r,t)});var n,r=t.prototype;for(n in r)r.hasOwnProperty(n)&&(u[n]=r[n])}}),i.ATTRS=a,u.constructor=i,l.augment(i,u)}return i.extend=e&&e.extend||d,i.addMembers=r,i}});var h=v.addMembers;return t=v}(),r=function(t){return t=n}()});define("attribute",["util","event-custom"],function(t){var r,e,n=t("util"),a=t("event-custom");return r=function(t){function r(t){return t===V.noop?function(){}:V.bind(t)}function e(t,r){return"string"==typeof r?t[r]:r}function i(t){return t.__attrVals||(t.__attrVals={})}function o(t,r){return t+V.ucfirst(r)+"Change"}function u(t,r,e,n,a,i,u,s){return u=u||e,t.fire(o(r,e),V.mix({attrName:u,subAttrName:i,prevVal:n,newVal:a},s))}function s(t,r,e){var n=t[r];return e||n||(t[r]=n={}),n||{}}function _(t,r){for(var e=0,n=r.length;void 0!==t&&n>e;e++)t=t[r[e]];return t}function f(t,r,e){var n=r.length-1,a=t;if(n>=0){for(var i=0;n>i;i++)t=t[r[i]];void 0!==t?t[r[i]]=e:a=void 0}return a}function c(t){var r;return-1!==t.indexOf(".")&&(r=t.split("."),t=r.shift()),{path:r,name:t}}function l(t,r,e){var n=e;return r&&(n=void 0===t?{}:V.clone(t),f(n,r,e)),n}function v(t,r){var e=s(t,"__defaultBeforeFns");if(!e[r]){e[r]=1;var n=o("before",r);t.publish(n,{defaultFn:h,defaultTargetOnly:!0})}}function d(t,r,e,n,a){var i,u,s,f=c(r),d=r;if(r=f.name,i=f.path,s=t.get(r),v(t,r),i&&(u=_(s,i)),!n.force){if(!i&&s===e)return void 0;if(i&&u===e)return void 0}e=l(s,i,e);var p=V.mix({attrName:r,subAttrName:d,prevVal:s,newVal:e,_opts:n,_attrs:a,target:t},n.data);if(n.silent){if(O===h.call(t,p))return O}else if(O===t.fire(o("before",r),p))return O;return t}function h(t){var r=this,e=t.newVal,n=t.prevVal,a=t.attrName,o=t.subAttrName,s=t._attrs,_=t._opts,f=r.setInternal(a,e);return f===O?f:(_.silent||(e=i(r)[a],u(r,"after",a,n,e,o,null,_.data),s?s.push({prevVal:n,newVal:e,attrName:a,subAttrName:o}):u(r,"","*",[n],[e],[o],[a],_.data)),void 0)}function p(t){var r=this,e=r.constructor;for(r.userConfig=t;e;)A(r,e.ATTRS),e=e.superclass?e.superclass.constructor:null;w(r,t)}function m(t,e){var n=e.__hooks__;if(n)for(var a in n)a in t&&(t[a]=n[a](t[a]));V.each(t,function(n,a){if("function"==typeof n){var i=0;if(n.__owner__){var o=n.__owner__;delete n.__owner__,delete n.__name__,i=n.__wrapped__=1;var u=r(n);u.__owner__=o,u.__name__=a,o.prototype[a]=u}else n.__wrapped__&&(i=1);i&&(t[a]=n=r(n)),n.__owner__=e,n.__name__=a}})}function g(t){var r=this;m(t,r),V.mix(r.prototype,t)}function A(t,r){if(r)for(var e in r)t.addAttr(e,r[e],!1)}function w(t,r){if(r)for(var e in r)t.setInternal(e,r[e])}function y(t,r){var n,a=t.getAttrs(),i=s(a,r,1),o=i.valueFn;return o&&(o=e(t,o))&&(n=o.call(t),void 0!==n&&(i.value=n),delete i.valueFn,a[r]=i),i.value}function b(t,r,n,a){var i,o,u;u=c(r),r=u.name,i=u.path,i&&(o=t.get(r),n=l(o,i,n));var _,f=s(t.getAttrs(),r),v=f.validator;return v&&(v=e(t,v))&&(_=v.call(t,n,r,a),void 0!==_&&_!==!0)?_:void 0}var V=n,x=a,N={},O=!1;return p.extend=function S(t,r){var e,n=t,a=this;r=V.merge(r),t=V.merge(t),n.hasOwnProperty("constructor")&&(t.constructor=n.constructor);var i,o=r.__hooks__;(i=a.__hooks__)&&(o=r.__hooks__=r.__hooks__||{},V.mix(o,i,!1));r.name||"AttributeDerived";e=t.hasOwnProperty("constructor")?t.constructor:function(){this.callSuper.apply(this,arguments)},t.constructor=e,e.__hooks__=o,m(t,e);var u,s=r.inheritedStatics;return(u=a.inheritedStatics)&&(s=r.inheritedStatics=r.inheritedStatics||{},V.mix(s,u,!1)),V.extend(e,a,t,r),s&&V.mix(e,s),e.extend=r.extend||S,e.addMembers=g,e},V.augment(p,x.Target,{INVALID:N,callSuper:function(){var t,r,e=this,n=arguments;"function"==typeof e&&e.__name__?(t=e,r=n[0],n=Array.prototype.slice.call(n,1)):(t=arguments.callee.caller,t.__wrapped__&&(t=t.caller),r=e);var a=t.__name__;if(!a)return void 0;var i=t.__owner__.superclass[a];return i?i.apply(r,n||[]):void 0},getAttrs:function(){return this.__attrs||(this.__attrs={})},getAttrVals:function(){var t,r=this,e={},n=r.getAttrs();for(t in n)e[t]=r.get(t);return e},addAttr:function(t,r,e){var n,a=this,i=a.getAttrs(),o=V.merge(r);return o.value&&"object"==typeof o.value&&(o.value=V.clone(o.value)),(n=i[t])?V.mix(n,o,e):i[t]=o,a},addAttrs:function(t,r){var e=this;return V.each(t,function(t,r){e.addAttr(r,t)}),r&&e.set(r),e},hasAttr:function(t){return this.getAttrs().hasOwnProperty(t)},removeAttr:function(t){var r=this,e=i(r),n=r.getAttrs();return r.hasAttr(t)&&(delete n[t],delete e[t]),r},set:function(t,r,e){var n,a=this;if("string"!=typeof t){e=r,e=e||{};var i=Object(t),o=[],s=[];for(t in i)void 0!==(n=b(a,t,i[t],i))&&s.push(n);if(s.length)return e.error&&e.error(s),O;for(t in i)d(a,t,i[t],e,o);var _=[],f=[],c=[],l=[];return V.each(o,function(t){f.push(t.prevVal),c.push(t.newVal),_.push(t.attrName),l.push(t.subAttrName)}),_.length&&u(a,"","*",f,c,l,_,e.data),a}return e=e||{},n=b(a,t,r),void 0!==n?(e.error&&e.error(n),O):d(a,t,r,e)},setInternal:function(t,r){var n,a=this,o=s(a.getAttrs(),t),u=o.setter;return u&&(u=e(a,u))&&(n=u.call(a,r,t)),n===N?O:(void 0!==n&&(r=n),i(a)[t]=r,void 0)},get:function(t){var r,n,a,o,u=this,f=".",c=i(u);return-1!==t.indexOf(f)&&(r=t.split(f),t=r.shift()),n=s(u.getAttrs(),t,1),a=n.getter,o=t in c?c[t]:y(u,t),a&&(a=e(u,a))&&(o=a.call(u,o,t)),t in c||void 0===o||(c[t]=o),r&&(o=_(o,r)),o},reset:function(t,r){var e=this;if("string"==typeof t)return e.hasAttr(t)?e.set(t,y(e,t),r):e;r=t;var n=e.getAttrs(),a={};for(t in n)a[t]=y(e,t);return e.set(a,r),e}}),t=p}(),e=function(t){return t=r}()});