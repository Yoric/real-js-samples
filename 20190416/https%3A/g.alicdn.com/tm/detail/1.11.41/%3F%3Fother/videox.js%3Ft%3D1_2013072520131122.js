KISSY.add("malldetail/other/videox",function(e){function t(){!function(){"use strict";function e(e){return void 0===e}function t(t){e(t.replaceYouku)||(y.replaceYouku=t.replaceYouku),e(t.videoCfg)||(y.videoCfg=t.videoCfg),e(t.trun)||(y.trun=t.trun),e(t.msg)||(y.msg=t.msg)}function a(t,a){e(t)||(y.trun=t),e(a)||(y.msg=a);for(var n=document.getElementsByTagName("embed"),i=[],o=0;o<n.length;o+=1)i.push(n[o]);for(var o=0;o<i.length;o+=1)l(i[o],o);i=[]}function n(e){for(var t=0;t<b.length;t+=1)if(e.indexOf(b[t])>0)return!0;return!1}function i(e){var t=e.parentNode||e.parentElement,a="J_replace_vedio_"+ ++v,n=document.createElement("div");n.setAttribute("id",a),n.style.display="inline-block";var i=e.getAttribute("height"),o=e.getAttribute("width");return n.style.height=i?+i?+i+"px":i.replace(";",""):e.style.height,n.style.width=o?+o?+o+"px":o.replace(";",""):e.style.width,t.insertBefore(n,e),n}function o(e,t){var a=e.parentNode||e.parentElement,n="J_replace_vedio_"+ ++v,i=document.createElement("iframe");i.setAttribute("id",n),i.setAttribute("src",t),i.setAttribute("scrolling","no"),i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen","true"),i.style.display="inline-block",i.style.display="inline-block";var o=e.getAttribute("height"),o=e.getAttribute("height"),r=e.getAttribute("width");return i.style.height=o?+o?+o+"px":o.replace(";",""):e.style.height,i.style.width=r?+r?+r+"px":r.replace(";",""):e.style.width,a.insertBefore(i,e),i}function r(e){var t={};if(!e)return t;for(var a=e.split("&"),n=0;n<a.length;n+=1){var i=a[n].split("=");i[0]&&(t[i[0]]=i[1])}return t}function l(e){var t=e.parentNode||e.parentElement;if("application/x-shockwave-flash"===e.getAttribute("type")){var a=e.getAttribute("src"),l=r(e.getAttribute("flashvars"));if(!h&&n(a))return void(e.style.display="none");var u=d(a),m=s(a,l);if(m&&y.replaceYouku||u)if(f&&p){if(u){var v=i(e);setTimeout(function(){new p({"container":"#"+v.id,"from":"ugc_copy","url":u,"controls":!0,"muted":y.videoCfg.muted,"volumeControls":y.videoCfg.volumeControls,"autoplay":!g,"noFullscreen":navigator.userAgent.indexOf("MSIE")>=0});g=!0},1e3)}else m&&o(e,m);t.removeChild(e)}else if(!h){if(y.trun){var v=i(e);c(v)}t.removeChild(e)}}}function c(e){e.innerHTML=y.msg,e.style.backgroundColor="#fcf8e3",e.style.color="#8a6d3b",e.style.textAlign="center",e.style.lineHeight=e.style.height,e.style.border="1px solid #faebcc",e.innerHTML=y.msg}function s(e,t){function a(e){var t=e||"";return"XMTI="===e&&(t="ca18167fbd81f280"),t}var n="",i=k.exec(e);return i&&(n=(i[1]||"")+"//player.youku.com/embed/"+i[6]+"?client_id="+a(i[5])+"&autoplay="+t.isAutoPlay),n}function d(e){var t="";return e.indexOf("cloud.video.taobao.com")>0&&(e=e.replace(".swf",".mp4"),e=e.replace("/e/1/","/e/6/"),e=e.replace(/(\/t\/\d\/)/,"/t/1/"),t=e),t}function u(){var e=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(e=!0)}catch(t){navigator.mimeTypes["application/x-shockwave-flash"]!=undefined&&(e=!0)}return e}function m(){if(!document.createElement("video").canPlayType)return!1;try{var e=document.createElement("video"),t=e.canPlayType('video/ogg; codecs="theora, vorbis"');if(t)return"probably"==t;var a=e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');return!!a&&"probably"==a}catch(n){return!1}}var p=window&&window.VideoX&&window.VideoX["default"],f=m(),h=u(),v=0,g=!1,b=["vodcdn.alicdn.com","v.biz.ku6.com","player.pps.tv","t.focosee.com"],y={"replaceYouku":!0,"videoCfg":{},"trun":!1,"msg":'<b>\u8b66\u544a:</b>\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u89c6\u9891\uff0c\u8bf7\u66f4\u65b0\u6d4f\u89c8\u5668\u3002<a href="http://www.uc.cn/ucbrowser/download/" targe="_blank">\u4e0b\u8f7dUC\u6d4f\u89c8\u5668</a>'},k=/(http:|https:)?\/\/(players|player).youku.com\/player.php(\/(partnerid)\/([^\/?#]+))?\/sid\/([^\/?#]+)\/v\.swf/;window.embedReplace=window.embedReplace||{},window.embedReplace.supportFlash=h,window.embedReplace.supportVedioTag=f,window.embedReplace.checkSupportVedioTag=m,window.embedReplace.checkSupportFlash=u,window.embedReplace.replaceEmbed=l,window.embedReplace.replaceAll=a,window.embedReplace.configure=t}()}function a(t){window.VideoX?t&&t(window.VideoX):e.use(["mui/kissy-polyfill/index","@ali/mui-videox/index-pc"],function(e,a,n){window.VideoX=n.exports?n.exports["default"]:n["default"],t&&t(window.VideoX)})}function n(){a(function(){window.embedReplace||t(),window.embedReplace.configure({"replaceYouku":!1,"videoCfg":{"muted":!0,"volumeControls":!0}}),window.embedReplace&&window.embedReplace.replaceAll()})}return KISSY.config({"modules":{"@ali/mui-videox/index-pc":{"requires":["./lib/videox","mui/mtop/index","promise"]}},"packages":{"@ali/mui-videox":{"debug":!0,"ignorePackageNameInUri":!0,"version":"4.0.2","path":"//g.alicdn.com/mui/videox/5.0.5/","group":"tm"},"mui/kissy-polyfill":{"debug":!0,"group":"tm","ignorePackageNameInUri":!0,"path":"//g.alicdn.com/mui/kissy-polyfill/4.0.15/","version":"4.0.15"}}}),{"getVideox":a,"replaceFlash":n}},{"requires":[]});