var baxiaCommon=function(){"use strict";var e=function(e,t){return!!e&&e.indexOf(t)>-1},t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(n){var r={valid:!1,type:""};"object"===(void 0===n?"undefined":t(n))&&(n=JSON.stringify(n)),n=n.toLocaleUpperCase();var a=e(n,"RGV587"),o=!a&&e(n,"assist_flag")&&e(n,"URL"),s=!o&&e(n,"_flag_")&&e(n,"URL");return a||o||s?r:(r.valid=!0,r)},r=location,a=document,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!(n>0&&Math.random()>=n)){var o={code:t,msg:(e+"").substr(0,1e3)+";v:1.0.1-beta1",pid:"baxia",page:r.href.split(/[#?]/)[0],query:r.search.substr(1),hash:r.hash,referrer:a.referrer,title:a.title,ua:navigator.userAgent};console&&console.error(e),function(e,t){var n=[];for(var r in e)n.push(r+"="+encodeURIComponent(e[r]));(new Image).src=t+n.join("&")}(o,"//gm.mmstat.com/fsp.1.1?")}};var s,i,c=document,d=window,u=arguments,l=function(e,t){return t.jsPath?t.jsPath:""+(n="cdnPath",r="https://g.alicdn.com/sd/baxia/1.0.3/",(d.__baxia__||{})[n]||r)+e+".js";var n,r},h=[],p=void 0,f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Xhr",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(p)return p.handler(t);h.push({pluginName:e,props:t});var n=h[0],r=n.pluginName,a=n.props,s="baxia"+r+"Handler";!function(e,t,n){var r=c.getElementsByTagName("script")[0],a=c.createElement("script");if(a.async=1,a.src=e,a.onerror=function(t){o("function:loadJS. msg:"+e+"load error。props："+JSON.stringify(n)),a.onerror=null},t){var s=!1;a.onload=a.onreadystatechange=function(){s||a.readyState&&!/loaded|complete/.test(a.readyState)||(a.onload=a.onreadystatechange=null,s=!0,t())}}r.parentNode.insertBefore(a,r)}(l(s,a),function(){p=new window[s];for(var e=0;e<h.length;e++)p.handler(h[e].props);h=[]})}catch(e){p=null,o("handler err，param:"+JSON.stringify(u)+","+e.message+e.stack)}};s={done:function(e){var t=e.parent_config,r=e.parent_arguments,a=e.response,o=e.data,s=e.resolve,i=e.reject,c=o.config||{};c&&((c=t).url=r[0]);var d=void 0;return n(o).valid?((d=c.baxiaData&&c.baxiaData.defer)?d.resolve(a,a.status,a.headers,c):s(a),o):(d={resolve:s,reject:i},(c=Object.assign({},c)).baxiaData={defer:d,response:a},f("Fetch",{result:o,config:c}),d.promise)}}.done,(i=window.fetch)&&(window.fetch=function(){var e=arguments;return new Promise(function(t,n){var r=e[1]||{};r.credentials&&"omit"!==r.credentials||(r.credentials="include"),i.apply(window,e).then(function(a){a.clone().text().then(function(o){return s?s({parent_config:r,parent_arguments:e,response:a,data:o,resolve:t,reject:n}):(t(a),o)})}).catch(function(e){n(e)})})});var v=function(e){return Array.prototype.slice.call(e)},y=function(){var e={test:"true"};try{return Object.defineProperty(e,"test",{enumerable:!1,value:e}),e.test==e.test}catch(e){return!1}}(),g=function(e,t,n,r){var a=e[t];e[t]=function(){var e=v(arguments);if(r){var t=r.apply(this,e);e=t||e}return n&&n.apply(this,e),a.apply(this,e)}},m=XMLHttpRequest.prototype,b=null;!function(e){var t,n,r,a,o,s,i,c=e.done;t=m,n="readyState",r=null,a=function(e){var t=e,n=this;return this._onreadystatechange=this._onreadystatechange||this.onreadystatechange,this.onreadystatechange=function(e){var r=this;b=window.event||e||b;var a=n.response||n.responseText;c({response:a,readyState:t,xhr:n,eventKey:"onreadystatechange",event:b},function(){r._onreadystatechange(b)})},t},o=Object.getOwnPropertyDescriptor(t,n),s=o&&o.set,i=o&&o.get,y&&Object.defineProperty(t,n,{set:function(){var e=v(arguments);if(r){var t=r.apply(this,e);e=t?[t]:e}s.apply(this,e)},get:function(){var e=i.apply(this);return a?a.apply(this,[e]):e}}),g(m,"send",function(){var e=this;this.sendParam=arguments,this._onload||(this._onload=this.onload),this.onload=function(e){var t=this;b=window.event||e;var n=this.response||this.responseText;c({response:n,readyState:3,xhr:this,eventKey:"onload"},function(){t._onload&&t._onload(b)})},!y&&function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n)}("readystatechange",this,function(){var t=e.response||e.responseText;c({response:t,readyState:e.readyState,xhr:e,eventKey:"readystatechange"})})}),g(m,"setRequestHeader",function(e,t){this._header_=this._header_||{},this._header_[e]=t}),g(m,"open",function(){this.openParams=arguments})}({done:function(e,t){var r=e.response,a=e.readyState,o=e.xhr,s=e.eventKey;3!==a||n(r).valid?t():("onreadystatechange"===s&&(o.onload=o._onload),f("Xhr",{result:r,config:{xhr:o,url:o.responseURL,fail:function(){(o.onerror||o.onabort||o.ontimeout||t)()}}}))}});return o("i,c",11,.1),{version:"1.0.1-beta1"}}();
//# sourceMappingURL=baxiaCommon.js.map
