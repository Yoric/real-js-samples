if (self.CavalryLogger) { CavalryLogger.start_js(["Xf8v1"]); }

__d("TypeaheadFacepileX.react",["React","joinClasses"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.renderPic=function(a,c){var e="url("+d.props.photos[a]+")";return b("React").createElement("span",{className:b("joinClasses")("splitpic",c),key:a,style:{backgroundImage:e}})},d.renderPics=function(){var a=d.props.size;if(a>=3)return[d.renderPic(0,"leftpic"),d.renderPic(1,"toppic"),d.renderPic(2,"bottompic")];else return[d.renderPic(0,"leftpic"),d.renderPic(1)]},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement("span",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"splitpics clearfix")}),this.renderPics())};return c}(b("React").Component);e.exports=a}),null);
__d("WorkGalahadAppTabID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PROFILE:"profile",HOME:"home",NOTIFICATIONS:"notifications",CHATS:"chats",ADMIN_PANEL:"admin_panel",RESELLER_CONSOLE:"reseller_console",DIRECT:"direct"})}),null);
__d("WorkGalahadNavActions",["URI","WorkGalahadAppTabID","WorkGalahadBeeperActions","WorkGalahadDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=a.appTabID,d=a.entityKeys;a=a.uri;b("WorkGalahadDispatcher").dispatch({type:"nav/markPendingTransition",appTabID:c,entityKeys:d,uri:new(b("URI"))(a).getPath()})}function c(a){b("WorkGalahadDispatcher").dispatch({type:"nav/setActiveEntityKeys",entityKeys:a})}function d(a){b("WorkGalahadDispatcher").dispatch({type:"nav/selectAppTabID",appTabID:a}),a===b("WorkGalahadAppTabID").NOTIFICATIONS?b("WorkGalahadBeeperActions").clearAllNotificationBeeps():a===b("WorkGalahadAppTabID").CHATS&&b("WorkGalahadBeeperActions").clearAllChatBeeps()}function f(a,c,d){b("WorkGalahadDispatcher").dispatch({type:"nav/selectStackedChannel",stackedChannelData:{type:a,title:c,data:d}})}function g(){b("WorkGalahadDispatcher").dispatch({type:"nav/dismissStackedChannel"})}function h(a){b("WorkGalahadDispatcher").dispatch({type:"nav/startLoading",uri:new(b("URI"))(a).getPath()})}function i(){b("WorkGalahadDispatcher").dispatch({type:"nav/stopLoading"})}function j(a){b("WorkGalahadDispatcher").dispatch({type:"nav/showPublicContentBanner",html:a})}function k(){b("WorkGalahadDispatcher").dispatch({type:"nav/hidePublicContentBanner"})}function l(){b("WorkGalahadDispatcher").dispatch({type:"nav/showSearchOverlay"})}function m(){b("WorkGalahadDispatcher").dispatch({type:"nav/hideSearchOverlay"})}e.exports={markPendingTransition:a,setActiveEntityKeys:c,selectAppTabID:d,selectStackedChannel:f,dismissStackedNavigation:g,startLoading:h,stopLoading:i,showPublicContentBanner:j,hidePublicContentBanner:k,showSearchOverlay:l,hideSearchOverlay:m}}),null);
__d("WorkGalahadBadgeTitleUpdater",["Arbiter","DocumentTitle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=0,h=!1,i;function j(){b("DocumentTitle").badge(g)}function k(){b("DocumentTitle").badge(0)}a={enable:function(){h||(h=!0,i=b("Arbiter").subscribe("update_title",function(){return j()}),j())},updateBadge:function(a){g=a,h&&j()},disable:function(){h&&(h=!1,i&&i.unsubscribe(),k())}};e.exports=a}),null);
__d("WorkGalahadEntityKey",["invariant","WorkAdminSection","enumUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={DIFFERENT:0,EQUAL:1,SUBKEY:2};function i(a,b){return a===b?h.EQUAL:a.indexOf(b)===0&&a[b.length]==="/"?h.SUBKEY:h.DIFFERENT}function j(a,b){var c=!1;for(var d=0;d<a.length;d++){var e=i(a[d],b);if(e===h.EQUAL)return h.EQUAL;else e===h.SUBKEY&&(c=!0)}return c?h.SUBKEY:h.DIFFERENT}var k=(a={},a[b("WorkAdminSection").INTEGRATIONS_DATA]=b("WorkAdminSection").APPS,a[b("WorkAdminSection").PROFILE_SETTINGS]=b("WorkAdminSection").SETTINGS,a[b("WorkAdminSection").DOMAINS]=b("WorkAdminSection").SETTINGS,a[b("WorkAdminSection").BUSINESS_DETAILS]=b("WorkAdminSection").PAYMENT_INFORMATION,a);c={forFeed:function(){return"feed"},forGroupsExplorer:function(a){return l("groups_explorer",[a])},forDirectPosts:function(){return"direct_posts"},forPeopleDirectory:function(){return"org_search"},forTimelinePermalink:function(){return"permalink"},forTeamFeed:function(){return"team_feed"},forUser:function(a,b){return l("user",[a,b])},forPage:function(a,b){return l("page",[a,b])},forGroup:function(a,b){return l("groups",[a,b])},forGroupPost:function(a,b){return l("groups",[a,"permalink",b])},forNotif:function(){return"notifications"},forNotifID:function(a){return"notifications/"+a},forAdminPanelSection:function(a,b){if(a!=null&&k[a]){var c=k[a];return l("admin_panel",[c,a,b])}return l("admin_panel",[a,b])},forChat:function(a){return l("chat",[a])},forSearch:function(a){return l("search",[a])},forEvent:function(a){return l("events",[a])},forSaved:function(a){return l("saved",[a])},forCommunityResources:function(){return"community_resources"},forTeam:function(a){return l("teams",[a])},containsKey:function(a,b){return j(a,b)===h.EQUAL},containsSubkey:function(a,b){return j(a,b)===h.SUBKEY},containsKeyOrSubkey:function(a,b){return j(a,b)!==h.DIFFERENT},getProfileID:function(a){var b=null;for(var c=0;c<a.length;c++){var d=a[c].split("/");(d[0]==="profile"||d[0]==="page"||d[0]==="user")&&(b=d[1])}return b},getPageID:function(a){var b=null;for(var c=0;c<a.length;c++){var d=a[c].split("/");(d[0]==="profile"||d[0]==="page")&&(b=d[1])}return b},getUserID:function(a){var b=null;for(var c=0;c<a.length;c++){var d=a[c].split("/");(d[0]==="profile"||d[0]==="user")&&(b=d[1])}return b},getGroupID:function(a){var b=null;for(var c=0;c<a.length;c++){var d=a[c].split("/");d[0]==="groups"&&(b=d[1])}return b},getThreadID:function(a){var b=null;for(var c=0;c<a.length;c++){var d=a[c].split("/");d[0]==="chat"&&d.length>1&&(b=d[1])}return b},getGroupView:function(a){var b=null;for(var c=0;c<a.length;c++){var d=a[c].split("/");d[0]==="groups"&&(b=d[2])}return b},getProfileView:function(a){var b=null;for(var c=0;c<a.length;c++){var d=a[c].split("/");(d[0]==="profile"||d[0]==="user"||d[0]==="page")&&(b=d[2])}return b},getAdminPanelSection:function(a){for(var c=0;c<a.length;c++){var d=a[c].split("/");if(d[0]==="admin_panel")return b("enumUtils").assert(d[1],b("WorkAdminSection"))}return null},getPermalinkID:function(a){var b=null;for(var c=0;c<a.length;c++){var d=a[c].split("/");d.length>=4&&d[0]==="groups"&&d[2]==="permalink"&&(b=d[3])}return b},serialize:function(a){return a}};function l(a,b){__p&&__p();a=a;var c=!1;for(var b=b,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;f!==void 0?(c&&g(0,832),a+="/"+f):c=!0}return a}e.exports=c}),null);
__d("WorkGalahadDocumentTitle",["fbt","DocumentTitle","MessengerBrowserAlerts","WorkGalahadBadgeTitleUpdater","WorkGalahadEntityKey"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return b("WorkGalahadEntityKey").containsKeyOrSubkey(a,b("WorkGalahadEntityKey").forChat())}function i(a){return a.length===0}a={onEntitySwitch:function(a,c){!h(a)&&h(c)?(b("WorkGalahadBadgeTitleUpdater").disable(),b("MessengerBrowserAlerts").enableTitleUpdate(),b("DocumentTitle").set(g._("Workplace Chat"))):(i(a)||h(a))&&!h(c)&&(b("MessengerBrowserAlerts").disableTitleUpdate(),b("WorkGalahadBadgeTitleUpdater").enable())}};e.exports=a}),null);
__d("WorkGalahadNavStore",["FluxReduceStore","WorkGalahadAppTabID","WorkGalahadDispatcher","WorkGalahadDocumentTitle","WorkGalahadEntityKey","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record({activeEntityKeys:[],loading:!1,seenGroups:b("immutable").Set(),seenGroupPosts:b("immutable").Set(),selectedAppTabID:b("WorkGalahadAppTabID").HOME,publicContentBanner:void 0,stackedChannelData:null,pendingTransitionState:{},showSearchOverlay:!1}));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new g()};d.reduce=function(a,b){__p&&__p();switch(b.type){case"nav/markPendingTransition":return a.set("pendingTransitionState",{appTabID:b.appTabID,entityKeys:b.entityKeys,uri:b.uri});case"nav/setActiveEntityKeys":return this.$WorkGalahadNavStore1(a,b.entityKeys);case"nav/selectAppTabID":return this.$WorkGalahadNavStore2(a,b.appTabID);case"nav/selectStackedChannel":return a.set("stackedChannelData",b.stackedChannelData);case"nav/dismissStackedChannel":return a.set("stackedChannelData",null);case"nav/startLoading":var c=a.set("loading",!0);b.uri===c.pendingTransitionState.uri&&(c=this.$WorkGalahadNavStore1(c,c.pendingTransitionState.entityKeys||c.activeEntityKeys),c=this.$WorkGalahadNavStore2(c,c.pendingTransitionState.appTabID||c.selectedAppTabID));return c.set("pendingTransitionState",{});case"nav/stopLoading":return a.set("loading",!1);case"nav/showPublicContentBanner":return a.set("publicContentBanner",b.html);case"nav/hidePublicContentBanner":return a.set("publicContentBanner",void 0);case"nav/showSearchOverlay":return a.set("showSearchOverlay",!0);case"nav/hideSearchOverlay":return a.set("showSearchOverlay",!1);default:return a}};d.isSearchOverlayShown=function(){return this.getState().showSearchOverlay};d.getActiveEntityKeys=function(){return this.getState().activeEntityKeys};d.getSelectedAppTabID=function(){return this.getState().selectedAppTabID};d.getStackedChannelData=function(){return this.getState().stackedChannelData};d.isLoading=function(){return this.getState().loading};d.hasGroupBeenSeen=function(a){return this.getState().seenGroups.has(a)};d.hasGroupPostBeenSeen=function(a){return this.getState().seenGroupPosts.has(a)};d.getPublicContentBanner=function(){return this.getState().publicContentBanner};d.$WorkGalahadNavStore1=function(a,c){__p&&__p();if(a.activeEntityKeys.length===c.length&&a.activeEntityKeys.every(function(a,b){return a===c[b]}))return a;b("WorkGalahadDocumentTitle").onEntitySwitch(a.activeEntityKeys,c);var d=a.seenGroups,e=b("WorkGalahadEntityKey").getGroupID(c);e!=null&&(d=d.add(e));e=a.seenGroupPosts;var f=b("WorkGalahadEntityKey").getPermalinkID(c);f!=null&&(e=e.add(f));return a.set("activeEntityKeys",c).set("seenGroups",d).set("seenGroupPosts",e)};d.$WorkGalahadNavStore2=function(a,b){return a.selectedAppTabID!==b?a.set("selectedAppTabID",b).set("stackedChannelData",null):a};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("WorkGalahadDispatcher"))}),null);
__d("WorkGalahadChannelItemChromeList.react",["cx","FlexLayout.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){var c=a.centered,d=a.textType,e=a.roundIcon,f=a.isNested,g=a.isBig,h=a.index,i=a.spacing;a=a.isIndented;var j={animationDelay:h*.1+"s"};return b("React").createElement("li",{className:"_6s9f"+(f?" _6unp":"")+(g?" _6s9i":"")+(i==="narrow"?" _2pi2":"")+(i==="medium"?" _79x2":"")+" _2pih"+(a?" _2piv":"")+(a?"":" _2piu")},b("React").createElement("div",{className:f?"_3-9b":""},b("React").createElement(b("FlexLayout.react"),{align:c?"center":"start"},f?null:b("React").createElement(b("FlexLayout.react"),{align:"center",className:(a?"_3-90":"")+(a?"":" _3-91")+" _3nmt"},b("React").createElement("div",{className:"_6s9g"+(e?" _6s9j":""),style:j})),b("React").createElement(b("FlexLayout.react"),{align:"start",direction:"vertical",style:{width:"100%",transform:"scaleX("+(Math.abs(Math.sin(h))*(1-.6)+.6)+")",transformOrigin:"center left"}},b("React").createElement("div",{className:"_6s9h _6s9k",style:j}),d==="subtitled"?b("React").createElement("div",{className:"_6s9h _6s9l",style:j}):null,d==="multi"?b("React").createElement(b("React").Fragment,null,b("React").createElement("div",{className:"_6s9h _6s9l",style:j}),b("React").createElement("div",{className:"_6s9h _6s9m",style:j})):null))))}function i(){return b("React").createElement("li",null,b("React").createElement(b("FlexLayout.react"),{align:"center",className:"_3-8n _2o1m",direction:"horizontal",justify:"all"},b("React").createElement("div",{className:"_6s9h _6s9l"})))}function a(a){__p&&__p();var c=a.amount,d=a.type;a=a.withHeader;a=a===void 0?!1:a;var e;switch(d){case"groups":e={centered:!0,textType:"single",roundIcon:!1,isNested:!1,isBig:!1,spacing:"narrow",isIndented:!0};break;case"people":e={centered:!0,textType:"single",roundIcon:!0,isNested:!1,isBig:!1,spacing:"narrow",isIndented:!0};break;case"notifications":e={centered:!1,textType:"multi",roundIcon:!0,isNested:!1,isBig:!0,spacing:"narrow",isIndented:!0};break;case"minimall":e={centered:!1,textType:"multi",roundIcon:!0,isNested:!1,isBig:!1,spacing:"narrow",isIndented:!0};break;case"inlineMinimall":e={centered:!1,textType:"multi",roundIcon:!0,isNested:!0,isBig:!1,spacing:"narrow",isIndented:!0};break;case"search":e={centered:!1,textType:"subtitled",roundIcon:!1,isNested:!1,isBig:!1,spacing:"medium",isIndented:!1};break}d=[];for(var f=0;f<c;f++)d.push(b("React").createElement(h,babelHelpers["extends"]({index:f,key:f},e)));return b("React").createElement(b("React").Fragment,null,a?b("React").createElement(i,null):null,d)}e.exports=a}),null);
__d("WorkGalahadImage.react",["cx","CssBackgroundImage.react","Image.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.children,d=a.className,e=a.height,f=a.src,g=a.type;a=a.width;var h;typeof f==="string"?h=b("React").createElement(b("CssBackgroundImage.react"),{backgroundPosition:"50% 50%",className:"_6x1a"+(e==null?" _7ccj":""),imageURI:f,height:e,width:a}):h=b("React").createElement(b("Image.react"),{className:"_6x1a",height:e,src:f,width:a});return b("React").createElement("div",{className:b("joinClasses")("_6x17"+(g==="rounded"?" _6x18":"")+(g==="circle"?" _6x19":""),d),style:{height:e,width:a}},h,c)}e.exports=a}),null);
__d("WorkGalahadEntityHeaderPicture.react",["cx","Link.react","React","WorkGalahadImage.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){var c=a.children,d=a.className,e=a.deactivated,f=a.href,g=a.src,h=a.type;a=a.size;a=a===void 0?40:a;e=b("React").createElement(b("WorkGalahadImage.react"),{className:"_6uee"+(e?" _6wga":""),height:a,width:a,src:g,type:h},c);if(f!=null)return b("React").createElement(b("Link.react"),{className:d,href:f,rel:"theater"},e);else return b("React").createElement("div",{className:d},e)}e.exports=a}),null);
__d("FacebarGSv2Echo",["cx","fbt","FacebarGlobalOptions","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarStructuredText"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={insertInto:function(a,b,c,d,e,f){__p&&__p();var g=this,h=i.normalizeValue(a);if(!this._shouldInsert(a,b))return;var j=b.findIndex(function(a){return a.isSpecialIntent&&g._isKeywordSuggestion(a)&&h===i.normalizeValue(a.text)},this);j=j<0;if(!j)return;j=this._removeExactMatchAndReturnSubtext(a,b);a=this._createEchoResult(a,c,j,d,e,f);d?a!=null&&b.unshift(a):a!=null&&b.push(a)},_shouldInsert:function(a,c){a=i.normalizeValue(a);if(!a)return!1;for(var d=0;d<c.length;d++){var e=c[d],f=b("FacebarStructuredText").fromStruct(e.structure).toString().toLowerCase();if(e.type===b("FacebarJSConstants").keywordType&&a.toLowerCase()===f)return!1}return!0},_isKeywordSuggestion:function(a){return a.type===b("FacebarJSConstants").keywordType||a.type===b("FacebarJSConstants").grammarType},_removeExactMatchAndReturnSubtext:function(a,b){__p&&__p();var c="";a=i.normalizeValue(a);for(var d=0;d<b.length;d++){var e=b[d];if(this._isKeywordSuggestion(e)&&a===i.normalizeValue(e.text)){e.subtext&&(c=e.subtext);b.splice(d,1);return c}}return c},normalizeValue:function(a){return String(a).trim().replace(/\s+/g," ").replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,"").toLowerCase()},_createEchoResult:function(a,c,d,e,f,g){var j=i.normalizeValue(a);f=e&&f&&b("FacebarGlobalOptions").showLocalPinkKwsSingleState&&a instanceof b("FacebarStructuredText")&&a.getFragment(0)&&a.getFragment(0).isLocal();var k=f?b("FacebarKeywordSearchUtils").makeFacebarEntryForLocalPage(a):b("FacebarKeywordSearchUtils").makeFacebarEntry(j),l=f?b("FacebarJSConstants").keywordTypes.local:b("FacebarJSConstants").keywordTypes.keyword,m={};f&&(m.subtext=d||h._("See photos, posts and info about this place"),g!==null&&(m.boldedSubtext=h._("{categoryName}",[h._param("categoryName",g)])));return babelHelpers["extends"]({type:b("FacebarJSConstants").keywordType,results_set_type:b("FacebarJSConstants").browseTypes.keyword,text:a,id:j,uid:j,query_string:j,icon_class:"_5b1w",isSingleState:e,isLocal:f,exactMatchKeyword:!0,structure:b("FacebarStructuredText").fromString(String(a)),semantic:k.semantic,uri:k.uri,keywordType:l,keywordSource:b("FacebarJSConstants").keywordTypes.echo,fromCache:c,tags:{}},m)}};e.exports=i}),null);
__d("FacebarInviteCoworkers",["cx","fbt","FacebarGlobalOptions","FacebarStructuredText","WorkInviteSource","XWorkInviteCoworkersDialogController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={insertInto:function(a,b,c){a=this._cleanQuery(a);var d=this._getInsertionIndex(a,b);if(d>-1){a=this._createInviteCoworkersResult(a,c);b.splice(d,0,a)}},_getInsertionIndex:function(a,c){return!a||!b("FacebarGlobalOptions").inviteCoworkers?-1:c.length},_cleanQuery:function(a){return String(a).trim().replace(/\s+/g," ").replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,"")},_createInviteCoworkersResult:function(a,c){var d=h._("Invite \"{query}\" to Workplace",[h._param("query",a)]),e=b("XWorkInviteCoworkersDialogController").getURIBuilder().setEnum("source",b("WorkInviteSource").SEARCH_TYPEAHEAD).getURI();return{uid:a,icon_class:"_5yiv",isAsync:!1,isInviteCoworkers:!0,structure:b("FacebarStructuredText").fromString(d),asyncURI:e,fromCache:c}}};e.exports=a}),null);
__d("XTypeaheadDeleteRecentSearchController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/typeahead/delete_recent_search/",{recent_search:{type:"String",required:!0}})}),null);
__d("FacebarRemoveRecentSearchDialog.react",["cx","fbt","AsyncRequest","BanzaiODS","FacebarTypeaheadRefreshNullstate","React","XTypeaheadDeleteRecentSearchController","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUINotice.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isDisabled:!1,showError:!1},d.$1=function(){b("BanzaiODS").bumpEntityKey("search.www.remove_recent_search.dialog","error"),d.setState({isDisabled:!1,showError:!0})},d.$2=function(){b("BanzaiODS").bumpEntityKey("search.www.remove_recent_search.dialog","remove");var a=b("XTypeaheadDeleteRecentSearchController").getURIBuilder().setString("recent_search",d.props.recentSearch).getURI();d.setState({isDisabled:!0});new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(){d.setState({isDisabled:!1}),b("FacebarTypeaheadRefreshNullstate").forceNullstateRefresh(d.props.onNullstateReadyAfterRemoval,d.$1)}).setErrorHandler(d.$1).send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement("div",null,b("React").createElement(b("XUIDialogTitle.react"),null,h._("Remove this search from your history?")),b("React").createElement(b("XUIDialogBody.react"),null,h._("You've searched for this before. Removing {=[query]} from your history will remove it from your history across all devices.",[h._param("=[query]",b("React").createElement("strong",null,h._("{query}",[h._param("query",this.props.recentSearch)])))]),this.state.showError?b("React").createElement(b("XUINotice.react"),{use:"warn",className:"_3-8x"},h._("Sorry, something went wrong. Please try again.")):null),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogButton.react"),{label:h._("Cancel"),action:"cancel",disabled:this.state.isDisabled}),b("React").createElement(b("XUIDialogButton.react"),{label:h._("Remove"),className:"autofocus",use:"confirm",onClick:this.$2,disabled:this.state.isDisabled})))};return c}(b("React").Component);e.exports=a}),null);
__d("StructuredInputDOM",["cx","CSS","DOM","FacebarGlobalOptions","createArrayFromMixed","getElementText","isElementNode","isTextNode"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){return"_4v1s"};var h={ENTITY_CLASS:a(),encodeText:function(a){return a.replace(/ /g,"\xa0")},decodeText:function(a){return a.replace(/\u00a0/g," ")},createIconNode:function(a){if(a&&typeof a==="object"){a=b("DOM").create("i",{className:a.className,style:a.uri&&{backgroundImage:'url("'+a.uri+'")'}});a.setAttribute("data-select","ignore");return a}},createTextNode:function(a){return b("DOM").create("span",{"data-si":!0},h.encodeText(a||""))},createEntityNode:function(a,c){var d=h.encodeText(a.text),e=h.createIconNode(c.icon);e=b("DOM").create("span",{},e?[e,d]:d);var f=(c.className||"").split(/\s+/);f.push(h.ENTITY_CLASS);f.forEach(b("CSS").addClass.bind(b("CSS"),e));f={si:!0,uid:a.uid,type:a.type,text:d,"is-local":a.isLocal,"category-name":a.categoryName,fulltext:d,group:c.group,select:c.select,icon:JSON.stringify(c.icon||null)};for(var g in f)f[g]!=null&&e.setAttribute("data-"+g,f[g]);return e},convertToTextNode:function(a){__p&&__p();a.className="";a.setAttribute("data-type","text");a.removeAttribute("data-group");a.removeAttribute("data-select");a.removeAttribute("data-icon");a.removeAttribute("data-uid");a.removeAttribute("data-is-local");a.removeAttribute("data-category-name");for(var a=a.firstChild;a;a=a.nextSibling)b("isTextNode")(a)||b("DOM").remove(a)},isEntityNode:function(a){return b("isElementNode")(a)&&b("CSS").hasClass(a,h.ENTITY_CLASS)},containsOnlyText:function(a,c){c=b("createArrayFromMixed")(c);for(var d=a.firstChild;d;d=d.nextSibling)if(!(b("isTextNode")(d)||a.nodeName in c))return!1;return!0},getText:function(a){return b("getElementText")(a).replace(/ /g,"\xa0")},getDecodedText:function(a){return h.decodeText(b("getElementText")(a))},getLength:function(a){return b("getElementText")(a).length},getMarker:function(a,c,d){__p&&__p();a=a.firstChild;while(a){var e=h.getLength(a);if(e>c||!a.nextSibling)if(b("isTextNode")(a)||!d)return{node:a,offset:Math.min(c,e)};else return h.getMarker(a,c);else c-=e;a=a.nextSibling}}};e.exports=h}),null);
__d("StructuredInputUtil",["StructuredInputDOM"],(function(a,b,c,d,e,f){__p&&__p();function g(a,b,c){a=a.substr(0,b).lastIndexOf(c);return a!==-1?a+1:0}function h(a,b,c){c=a.indexOf(c,b);return c!==-1?c:a.length}function i(a,b,c){return b===0||b===a.length||a.substr(b,c.length)==c}function j(a,b,c,d){switch(b){case"none":return c;case"all":return d?a.length:0;case"word":if(i(a,c,"\xa0"))return c;else if(d)return h(a,c,"\xa0");else return g(a,c,"\xa0")}}function k(a,c){return c&&b("StructuredInputDOM").isEntityNode(a)&&!b("StructuredInputDOM").isEntityNode(c)}var l={getMarkerAtOffset:function(a,c){var d=a.firstChild,e=0,f=0;while(d){e+=f;f=b("StructuredInputDOM").getLength(d);if(e+f>c)break;else d=d.nextSibling}return{node:d||a.lastChild,offset:c-e}},validateEntityText:function(a){__p&&__p();var c=b("StructuredInputDOM").getText(a),d=a.getAttribute("data-fulltext");a=a.getAttribute("data-group");if(a=="hashtag"){var e=c.match(/#[^\s]+/);d=e&&e[0]}e=c.indexOf(d);var f={prefix:null,entity:null,suffix:null};switch(a){case"none":f.entity=c;break;case"hashtag":case"all":e!=-1?(f.prefix=c.substr(0,e),f.entity=c.substr(e,d.length),f.suffix=c.substr(e+d.length)):f.suffix=c;break;case"word":e!=-1&&(f.prefix=c.substr(0,e),c=c.substr(e));a=0;e=0;while(a<d.length){e=h(d,a+1,"\xa0");if(c.substr(0,e)!=d.substr(0,e))break;else a=e}f.entity=c.substr(0,a)||null;f.suffix=c.substr(a)||null}return f},getGrouping:function(a,b){var c=a.getAttribute("data-group");a=a.getAttribute("data-select");if(b=="select")return a=="group"?c:"none";else return c},snapMarkerToText:function(a,c){__p&&__p();var d=a.node;if(b("StructuredInputDOM").isEntityNode(d)){var e=a.offset;c=l.getGrouping(d,c);if(c!="none")if(e===0){c=d.previousSibling;if(k(d,c))return{node:c,offset:b("StructuredInputDOM").getLength(c)}}else if(e==b("StructuredInputDOM").getLength(d)){c=d.nextSibling;if(k(d,c))return{node:c,offset:0}}}return a},nextMarkerBoundary:function(a,c,d){var e=a.node;if(b("StructuredInputDOM").isEntityNode(e)&&(!c||a.offset!==0)){d=l.getGrouping(e,d);if(d!="none")return{node:a.node,offset:j(b("StructuredInputDOM").getText(e),d,a.offset,c)}}return a}};e.exports=l}),null);
__d("StructuredInputCleaner",["DOM","StructuredInputDOM","StructuredInputUtil","UserAgent_DEPRECATED","createArrayFromMixed","getElementText","isTextNode"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b,c){this._node=a,this._selection=b,this._wrapText=c}var c=a.prototype;c._cleanEntityNode=function(a){__p&&__p();var c=a.getAttribute("data-text"),d=b("StructuredInputDOM").getText(a);a.style.cssText="";if(c==d&&b("StructuredInputDOM").containsOnlyText(a,{I:!0}))return null;c=[];var e=b("StructuredInputUtil").validateEntityText(a),f=b("StructuredInputDOM").createIconNode(JSON.parse(a.getAttribute("data-icon")));if(!e.entity&&(e.suffix&&!e.prefix||e.prefix&&!e.suffix)){b("StructuredInputDOM").convertToTextNode(a);a.setAttribute("data-text",d);return null}e.prefix&&c.push(this._createTextNode(e.prefix));e.entity&&(this._selection&&b("getElementText")(a)!==e.entity&&this._selection.markDirty(a),b("DOM").setContent(a,f?[f,e.entity]:e.entity),a.setAttribute("data-text",e.entity),c.push(a));e.suffix&&c.push(this._createTextNode(e.suffix));return c};c._removeSpecialNodes=function(){var a=b("createArrayFromMixed")(this._node.getElementsByTagName("script")),c=b("createArrayFromMixed")(this._node.getElementsByTagName("style"));a.forEach(b("DOM").remove);c.forEach(b("DOM").remove)};c._collapseNodes=function(){for(var a,c=this._node.firstChild;c;c=a){a=c.nextSibling;if(!b("isTextNode")(c)&&!b("StructuredInputDOM").isEntityNode(c)&&!b("StructuredInputDOM").containsOnlyText(c))for(var d=c.lastChild;d;d=c.lastChild)this._node.insertBefore(d,a),a=d}};c._createTextNode=function(a){if(this._wrapText)return b("StructuredInputDOM").createTextNode(a);else return document.createTextNode(a)};c.replaceNodes=function(a,c){if(c==null)return;var d=a.length?a[a.length-1].nextSibling:null;a.forEach(function(a){c.indexOf(a)===-1&&b("DOM").remove(a)},this);c.reverse().forEach(function(b){a.indexOf(b)===-1&&this._node.insertBefore(b,d),d=b},this)};c.clean=function(){var a=this;this._removeSpecialNodes();this._collapseNodes();var c=[],d=function(){c.length&&(this.replaceNodes(c,this._cleanTextNodes(c)),c.length=0)}.bind(this);Array.from(this._node.childNodes).forEach(function(e){b("StructuredInputDOM").isEntityNode(e)?(a.replaceNodes([e],a._cleanEntityNode(e)),d(c)):c.push(e)});d();!this._node.firstChild&&b("UserAgent_DEPRECATED").firefox()&&this._node.appendChild(this._createTextNode())};c.endOnText=function(){var a=function(a,c){b("StructuredInputDOM").isEntityNode(a)&&this._node.insertBefore(this._createTextNode(),c?a:null)}.bind(this);a(this._node.firstChild,!0);a(this._node.lastChild,!1)};return a}();Object.assign(a.prototype,{_cleanTextNodes:function(){__p&&__p();var a=function(a){return a.nodeName==="BR"||a.nodeName==="SPAN"&&c(a)},c=function(a){return a.getAttribute("data-si")&&b("StructuredInputDOM").containsOnlyText(a)&&b("StructuredInputDOM").getLength(a)>0};return function(c){if(c.length!=1||!a(c[0])){var d=c.map(b("StructuredInputDOM").getText).join("").replace(/\s+/g," ");return d?[this._createTextNode(d)]:[]}else{c[0].style.cssText="";return}}}()});e.exports=a}),null);
__d("DOMSelection",[],(function(a,b,c,d,e,f){__p&&__p();(function(){__p&&__p();var a=this,b={isPreceding:function(a,b){return b.compareDocumentPosition(a)&2},contains:function(a,b){if(a.compareDocumentPosition!=null)return a.compareDocumentPosition(b)&16;else return a.contains(b)},isCursorPreceding:function(a,c,d,e){__p&&__p();if(a===d)return c<=e;if(b.isText(a)&&b.isText(d))return b.isPreceding(a,d);if(b.isText(a)&&!b.isText(d))return!b.isCursorPreceding(d,e,a,c);if(!b.contains(a,d))return b.isPreceding(a,d);if(a.childNodes.length<=c)return!1;return a.childNodes[c]===d?0<=e:b.isPreceding(a.childNodes[c],d)},isText:function(a){return a!=null?a.nodeType==3:!1},getChildIndex:function(a){var b=0;while(a=a.previousSibling)b++;return b}},c=a.Selection=function(){__p&&__p();function a(a){this.win=a}a.prototype.hasSelection=function(){return a.hasSelection(this.win)};a.prototype.isBidirectional=function(){return a.isBidirectional(this.win)};a.prototype.getOrigin=function(){return a.getOrigin(this.win)};a.prototype.getFocus=function(){return a.getFocus(this.win)};a.prototype.getStart=function(){return a.getStart(this.win)};a.prototype.getEnd=function(){return a.getEnd(this.win)};a.prototype.trySelection=function(b,c,d,e){return a.trySelection(this.win,b,c,d,e)};a.prototype.setSelection=function(b,c,d,e){return a.setSelection(this.win,b,c,d,e)};a.prototype.clearSelection=function(){return a.clearSelection(this.win)};return a}();function d(){if(a.document.selection&&/MSIE 9\./.test(navigator.userAgent))return!1;else return!!a.getSelection}if(d()){c.supported=!0;c.hasSelection=function(a){return(a=a.getSelection())&&a.focusNode!=null&&a.anchorNode!=null};c.isBidirectional=function(a){return!0};c.getOrigin=function(a){return!((a=a.getSelection())&&a.anchorNode!=null)?null:[a.anchorNode,a.anchorOffset]};c.getFocus=function(a){return!((a=a.getSelection())&&a.focusNode!=null)?null:[a.focusNode,a.focusOffset]};c.getStart=function(a){var d,e,f;if(!c.hasSelection(a))return null;f=c.getOrigin(a),d=f[0],f=f[1];a=c.getFocus(a),e=a[0],a=a[1];return b.isCursorPreceding(d,f,e,a)?[d,f]:[e,a]};c.getEnd=function(a){var d,e,f;if(!c.hasSelection(a))return null;f=c.getOrigin(a),d=f[0],f=f[1];a=c.getFocus(a),e=a[0],a=a[1];return b.isCursorPreceding(d,f,e,a)?[e,a]:[d,f]};d=function(a,b,d,e,f,g){__p&&__p();var h=b.getSelection();if(!h)return;f==null&&(f=d);g==null&&(g=e);if(h.collapse&&h.extend)h.collapse(d,e),h.extend(f,g);else{r=b.document.createRange();r.setStart(d,e);r.setEnd(f,g);if(a||!c.hasSelection(b)||r.endContainer===f&&r.endOffset===g&&r.startContainer===d&&r.startOffset===e){try{h.removeAllRanges()}catch(a){}h.addRange(r)}}};c.setSelection=d.bind(c,!0);c.trySelection=d.bind(c,!1);c.clearSelection=function(a){try{a=a.getSelection();if(!a)return;a.removeAllRanges()}catch(a){}};c.getText=function(a){a=a.getSelection();if(!a)return;return a.toString()}}else if(a.document.selection){var e=function(a,c,d){__p&&__p();var e,f;a=a.createElement("a");e=c.duplicate();e.collapse(d);f=e.parentElement();while(!0){f.insertBefore(a,a.previousSibling);e.moveToElementText(a);if(!(e.compareEndPoints(d?"StartToStart":"StartToEnd",c)>0&&a.previousSibling!=null))break}e.compareEndPoints(d?"StartToStart":"StartToEnd",c)===-1&&a.nextSibling?(e.setEndPoint(d?"EndToStart":"EndToEnd",c),f=a.nextSibling,d=e.text.length):(f=a.parentNode,d=b.getChildIndex(a));a.parentNode.removeChild(a);return[f,d]},f=function(a,c,d,e,f){__p&&__p();var g,h,i;i=0;g=b.isText(e)?e:e.childNodes[f];h=b.isText(e)?e.parentNode:e;b.isText(e)&&(i=f);e=a.createElement("a");h.insertBefore(e,g||null);f=a.body.createTextRange();f.moveToElementText(e);e.parentNode.removeChild(e);c.setEndPoint(d?"StartToStart":"EndToEnd",f);return c[d?"moveStart":"moveEnd"]("character",i)};c.supported=!0;c.hasSelection=function(a){var b;if(!a.document.selection)return!1;b=a.document.selection.createRange();return b&&b.parentElement().document===a.document};c.getStart=function(a){var b;if(!c.hasSelection(a))return null;b=a.document.selection.createRange();return e(a.document,b,!0)};c.getEnd=function(a){var b;if(!c.hasSelection(a))return null;b=a.document.selection.createRange();return e(a.document,b,!1)};c.isBidirectional=function(a){return!1};c.getOrigin=function(a){return c.getStart(a)};c.getFocus=function(a){return c.getEnd(a)};d=function(a,b,c,d,e,g){e==null&&(e=c);g==null&&(g=d);a=b.document.body.createTextRange();f(b.document,a,!1,e,g);f(b.document,a,!0,c,d);return a.select()};c.setSelection=d.bind(c,!0);c.trySelection=d.bind(c,!1);c.clearSelection=function(a){return a.document.selection.empty()};c.getText=function(a){if(!c.hasSelection(a))return null;a=a.document.selection.createRange();return a&&a.text}}else c.supported=!1}).call(this),e.exports=Selection}),null);
__d("StructuredInputSelection",["DOM","DOMSelection","Scroll","StructuredInputDOM","StructuredInputUtil","Vector"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){var b=a.ownerDocument;this.window=b.defaultView||b.parentWindow;this.root=a;this.selection=!1;this.start=new g(this,[]);this.end=new g(this,[]);this.update()}var c=a.prototype;c.isSupported=function(){return!!(b("DOMSelection")&&b("DOMSelection").hasSelection)};c.update=function(){this.selection=!1;if(this.isSupported()&&this.root==document.activeElement&&b("DOMSelection").hasSelection(this.window)){var a=b("DOMSelection").getStart(this.window),c=b("DOMSelection").getEnd(this.window),d=b("DOMSelection").getFocus(this.window);this.start=this.makeMarker(a);this.end=this.makeMarker(c);this.backward=a[0]==d[0]&&a[1]==d[1];this.selection=this.start.node&&this.end.node}};c.makeMarker=function(a){if(a[0]===this.root)return new g(this,[this.root.childNodes[a[1]],0]);else return new g(this,a)};c.getFocus=function(){return this.backward?this.start:this.end};c.getOrigin=function(){return this.backward?this.end:this.start};c.move=function(a){if(this.selection){this.start.move(a);this.start.snap();this.end.setPosition(this.start);return this.apply()}};c.expand=function(a){if(this.selection){b("DOMSelection").isBidirectional()&&(this.start.move(!a),this.start.snap(),this.end.move(a),this.end.snap());return this.apply()}};c.getText=function(){if(this.selection&&this.isSupported()){var a=b("DOMSelection").getText(this.window);return a}};c.getOffset=function(){if(this.selection)return this.start.rootOffset};c.getLength=function(){return(this.getText()||"").length};c.setPosition=function(a,c){this.backward=!1;this.selection=!0;this.start.setPosition(b("StructuredInputUtil").getMarkerAtOffset(this.root,a));this.start.snap();c>0?(this.end.setPosition(b("StructuredInputUtil").getMarkerAtOffset(this.root,a+c)),this.end.snap()):this.end.setPosition(this.start);return this.apply()};c.hasRange=function(){return this.selection&&(this.start.node!=this.end.node||this.start.offset!=this.end.offset)};c.scrollToFocus=function(){var a=5,c=this.getFocus();if(c.node){var d=b("Vector").getElementDimensions(this.root).x,e=b("Scroll").getLeft(this.root);c=c.node.offsetLeft+c.node.offsetWidth;c-e<a?b("Scroll").setLeft(this.root,c-a):c-e>d-a&&b("Scroll").setLeft(this.root,c-d+a)}};c.apply=function(){__p&&__p();if(this.start.hasChanged()||this.end.hasChanged()){var a=this.getOrigin().getMarker(!0),c=this.getFocus().getMarker(!0);this.selection=this.selection&&a&&a.node&&c&&c.node;if(this.selection&&this.isSupported()){this.start.changed=!1;this.end.changed=!1;b("DOMSelection").trySelection(this.window,a.node,a.offset,c.node,c.offset);return!0}}};c.markDirty=function(a){b("DOM").contains(a,this.start.node,a)&&(this.start.changed=!0),b("DOM").contains(a,this.end.node,a)&&(this.end.changed=!0)};return a}();var g=function(){"use strict";__p&&__p();function a(a,b){this.selection=a,this.node=b[0],this.offset=b[1],this.rootOffset=this.getRootOffset(b[0],b[1]),this.sibling=this.node&&this.node.previousSibling,this.changed=!1}var c=a.prototype;c.hasChanged=function(){return this.changed||!this.isNodeValid()};c.isNodeValid=function(){if(b("StructuredInputDOM").getLength(this.node)>this.offset){var a=this.node;while(a=a.parentNode)if(a==this.selection.root)return!0}};c.getMarker=function(a){if(this.isNodeValid()&&(a&&!this.node.firstChild||!a&&this.node.parentNode==this.selection.root))return this;else return b("StructuredInputDOM").getMarker(this.selection.root,this.rootOffset,a)};c.move=function(a){this.node&&this.setPosition(b("StructuredInputUtil").nextMarkerBoundary(this.getMarker(!1),a,"select"))};c.snap=function(){this.node&&this.setPosition(b("StructuredInputUtil").snapMarkerToText(this.getMarker(!1),"select"))};c.setPosition=function(a){(a.offset!=this.offset||a.node!=this.node)&&(this.changed=!0,this.node=a.node,this.offset=a.offset,this.rootOffset=this.getRootOffset(this.node,this.offset))};c.getRootOffset=function(a,c){var d=0,e=5;while(a&&d++<e)if(a===this.selection.root)return c;else{var f=a;while(f=f.previousSibling)c+=b("StructuredInputDOM").getLength(f);a=a.parentNode}};return a}();e.exports=a}),null);
__d("StructuredInput",["csx","cx","fbt","Arbiter","ArbiterMixin","CSS","DataStore","DOM","Event","Input","InputSelection","JSLogger","Keys","Locale","Parent","Scroll","StructuredInputCleaner","StructuredInputDOM","StructuredInputSelection","StructuredInputUtil","Style","UserAgent_DEPRECATED","createArrayFromMixed","createObjectFrom","emptyFunction","getActiveElement","isElementNode","isTextNode","mixin","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=229,k=b("createObjectFrom")([b("Keys").UP,b("Keys").DOWN,b("Keys").LEFT,b("Keys").RIGHT,b("Keys").HOME,b("Keys").END]),l=b("createObjectFrom")([b("Keys").BACKSPACE,b("Keys").DELETE]),m=b("createObjectFrom")([b("Keys").SPACE,b("Keys").RETURN]),n=b("createObjectFrom")("IUB".split("").map(function(a){return a.charCodeAt(0)})),o=b("UserAgent_DEPRECATED").firefox(),p=b("UserAgent_DEPRECATED").ie(),q=b("UserAgent_DEPRECATED").webkit(),r=function(c){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,c);function a(a){__p&&__p();var d;d=c.call(this)||this;b("DataStore").set(a,"StructuredInput",babelHelpers.assertThisInitialized(d));d._root=a;d._richInput=b("DOM").find(a,"._586i");d._textInput=b("DOM").find(a,"._586f");d._placeholderText=b("DOM").scry(a,"._586j")[0];d._hintText=b("DOM").find(a,"._586k");d._contentWidth=null;d._richWidth=null;d._hintNodes=[];b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.structuredInputState={initInputsFinished:!!d._initInputsFinished,initEventsFinished:!!d._initEventsFinished,cleanInputPreTogglesFinished:!!d._cleanInputPreTogglesFinished,cleanInputFinished:!!d._cleanInputFinished,elements:{richInput:!!d._richInput,textInput:!!d._textInput,placeholderText:!!d._placeholderText,hintText:!!d._hintText}}});d.init();return d}var d=a.prototype;d.init=function(){this.init=b("emptyFunction"),this._initSelection(),this._initCleaner(),this._initInputs(),this._initInputsFinished=!0,this._initEvents(),this._initEventsFinished=!0,this._scheduledCleanInput=!1,this._richChanged=!1,this._textChanged=!1,this._selectionChanged=!1,this._selectionIgnore=!1,this._imeMode=!1,this.cleanInput(),this.inform("init",null,"persistent")};d._initInputs=function(){__p&&__p();this._richInput.contentEditable=!0;this._richInput.spellcheck=!1;this._richInput.tabIndex=0;this._richInput.setAttribute("aria-label",i._("Search Facebook"));this._textInput.tabIndex=-1;this._multiline=this._textInput.nodeName=="TEXTAREA";if(!b("CSS").shown(this._richInput)){var a=b("InputSelection").get(this._textInput),c=b("getActiveElement")()===this._textInput;b("DOM").setContent(this._richInput,b("StructuredInputDOM").encodeText(b("Input").getValue(this._textInput)));b("CSS").hide(this._textInput);b("CSS").show(this._richInput);this.cleanInput();c&&(this._richInput.focus(),this.setSelection({offset:a.start,length:a.end-a.start}))}this.togglePlaceholder();this._toggleHint()};d._initEvents=function(){__p&&__p();var a=null,c=!1,d=function(){this._richChanged=!0,c||this.scheduleCleanInput(!0)}.bind(this),e=function(){this._textChanged=!0,c||this.scheduleCleanInput(!1)}.bind(this),f=function(){this._selectionChanged=!0,this.scheduleCleanInput(!1)}.bind(this),g=function(){this._imeMode=!0,this._placeholderText&&b("CSS").hide(this._placeholderText),b("CSS").hide(this._hintText)}.bind(this),h=function(){this._imeMode=!1,this._richChanged=!0,this.cleanInput()}.bind(this);b("Event").listen(this._richInput,"keydown",function(c){__p&&__p();a=c.keyCode;if(c.ctrlKey&&c.keyCode in n)return c.kill();else if(c.keyCode in k)f();else if(c.keyCode===b("Keys").BACKSPACE&&this._deleteTrailingChunk()){this._richChanged=!0;this.cleanInput();return c.kill()}else c.keyCode in l?d():c.keyCode==j&&g()}.bind(this));b("Event").listen(this._richInput,"keypress",function(a){if(a.keyCode==b("Keys").RETURN){this._multiline&&this._insertText("\n");return a.kill()}else!this._selectionChanged&&this._selectionIsText()?e():d()}.bind(this));!c?(b("Event").listen(this._richInput,"keyup",function(b){if((this._imeMode||b.keyCode!=a)&&b.keyCode in m){h();return b.kill()}else this._imeMode&&(this._textChanged=!0,this.cleanInput())}.bind(this)),o&&b("Event").listen(this._richInput,"input",function(){this._textChanged=!0,this.cleanInput()}.bind(this))):(b("Event").listen(this._richInput,"compositionstart",g),b("Event").listen(this._richInput,"compositionend",function(){setTimeout(h,0)}),b("Event").listen(this._richInput,"input",function(){this._textChanged=!0,this._imeMode||(!this._richChanged?this.cleanInput():this.scheduleCleanInput())}.bind(this)));b("Event").listen(document,"selectionchange",function(){this._selectionIgnore?this._selectionIgnore=!1:this._selectionChanged=!0}.bind(this));b("Event").listen(this._richInput,"mousedown",function(){this._selectionChanged=!0,this._selectionLength=0,this._selectionOffset=0}.bind(this));b("Event").listen(this._richInput,"mouseup",function(){this._selectionChanged=!0,this.scheduleCleanInput()}.bind(this));b("Event").listen(this._richInput,"cut",function(){this._richChanged=!0,this.scheduleCleanInput(!1)}.bind(this));b("Event").listen(this._richInput,"paste",function(a){this._richChanged=!0,this.scheduleCleanInput(!0)}.bind(this));b("Event").listen(this._richInput,"drop",function(a){this.focus();this.selectAll();this._insertClipboard(a&&a.dataTransfer);return a.kill()}.bind(this));b("Event").listen(this._richInput,"dragover",function(a){a.dataTransfer.dropEffect="move";a.dataTransfer.effectAllowed="move";return a.kill()});b("Event").listen(this._richInput,"focus",function(a){this._toggleHint(),this.inform("focus")}.bind(this));b("Event").listen(this._richInput,"blur",function(a){b("CSS").hide(this._hintText),this._imeMode=!1,this._richChanged=!0,this.scheduleCleanInput(!1),this.inform("blur")}.bind(this))};d._initCleaner=function(){this._cleaner=new(b("StructuredInputCleaner"))(this._richInput,this._selection,!0)};d._initSelection=function(){this._selection=new(b("StructuredInputSelection"))(this._richInput),this._selectionLength=0,this._selectionOffset=0};d._insertClipboard=function(a){if(a&&typeof a.getData==="function"){a=a.getData("Text");this._insertText(a)}};d._deleteTrailingChunk=function(a){__p&&__p();a=this.getSelection();if(a.length>0||a.offset===0)return!1;a=this.getSelection().offset-1;a=b("StructuredInputUtil").getMarkerAtOffset(this._richInput,a);if(a&&b("StructuredInputDOM").isEntityNode(a.node)&&b("StructuredInputUtil").getGrouping(a.node,"select")!=="none"){b("DOM").remove(a.node);return!0}return!1};d._selectionIsText=function(){var a=this._selection.start.node,c=this._selection.end.node;return a&&a===c&&!b("StructuredInputDOM").isEntityNode(a)&&!b("StructuredInputDOM").isEntityNode(a.parentNode)};d._insertText=function(a){if(a){a=b("DOM").create("div",{},a);return this._insertNodes(a)}};d._insertHTML=function(a){if(a){var c=b("DOM").create("div"),d=new(b("StructuredInputCleaner"))(c,null,!1);c.innerHTML=a;d.clean();return this._insertNodes(c)}};d._insertNodes=function(a){document.selection?document.selection.createRange().pasteHTML(a.innerHTML):document.execCommand("insertHTML",!1,a.innerHTML),this._richChanged=!0,this.cleanInput()};d.togglePlaceholder=function(a){if(!this._placeholderText)return;var c=b("StructuredInputDOM").getLength(this._richInput)===0;a&&c?b("CSS").show(this._placeholderText):b("CSS").conditionShow(this._placeholderText,c&&!this._imeMode)};d._toggleHint=function(){__p&&__p();var a=b("createArrayFromMixed")(this._hintNodes),c=null,d="",e=b("StructuredInputDOM").getText(this._richInput).toLowerCase();if(!this.hasFocus())return;if(this._contentOverflows()){b("CSS").hide(this._hintText);return}while(a.length&&d.length<e.length)c=a.shift(),d+=b("StructuredInputDOM").getText(c);if(e.length&&d.substr(0,e.length).toLowerCase()==e.toLowerCase()){b("DOM").setContent(this._hintText,Array.from(this._richInput.cloneNode(!0).childNodes).filter(function(a){return a.tagName!=="BR"}));c=b("StructuredInputDOM").createTextNode(d.substr(e.length));a.unshift(c);b("DOM").appendContent(this._hintText,b("DOM").create("span",{className:"_586h"},a));b("CSS").show(this._hintText);b("CSS").hide(this._placeholderText)}else b("CSS").hide(this._hintText)};d._contentOverflows=function(){this._richWidth===null&&(this._richWidth=this._richInput.clientWidth);if(this._contentWidth===null){var a=this._richInput.lastChild;this._contentWidth=b("isElementNode")(a)?a.offsetLeft+a.offsetWidth:0}return this._contentWidth>this._richWidth};d._forceTop=function(){this._multiline||b("Scroll").setTop(this._richInput,0),b("Scroll").setTop(this._root,0)};d._createStructureNodes=function(a){return a.map(function(a){return a.uid||a.type&&a.type!="text"?b("StructuredInputDOM").createEntityNode(a,a.display||{}):b("StructuredInputDOM").createTextNode(a.text)}.bind(this))};d._suppressInput=function(){__p&&__p();if(o||p){if(this._richClean)return;this._richClean=this._richInput.cloneNode(!0);this._richClean.contentEditable=!1;this._root.insertBefore(this._richClean,this._richInput.nextSibling);b("Scroll").setLeft(this._richClean,b("Scroll").getLeft(this._richInput));b("Style").set(this._richInput,"padding",0);b("Style").set(this._richInput,"height",0)}};d._revealInput=function(){if(!this._richClean)return;b("Style").set(this._richInput,"height","");b("Style").set(this._richInput,"padding","");this._root.removeChild(this._richClean);this.focus();this._richClean=null};d._cleanInput=function(){__p&&__p();var a;this._textChanged&&!this._richChanged?(this._selection.update(),a="change"):(this._richChanged||this._selectionChanged)&&(this._selection.update(),this._richChanged&&(this._contentWidth=null,this._cleaner.clean(),this._cleaner.endOnText(),this._selection.apply(),a="change"),this._selectionChanged&&(this._cleanSelection(),(this._selectionLength||!this._richChanged)&&(a="select")));this._revealInput();this._forceTop();this._cleanInputPreTogglesFinished=!0;(this._richChanged||this._textChanged)&&(this.togglePlaceholder(),this._toggleHint());this._selectionIgnore=!0;this._selectionChanged=!1;this._richChanged=!1;this._textChanged=!1;this._cleanInputFinished=!0;a&&this.inform(a)};d._cleanSelection=function(){var a=this._selection.getLength(),b=this._selection.getOffset();a&&(this._selection.expand(a>=this._selectionLength),a=this._selection.getLength(),b=this._selection.getOffset());this._selectionLength=a;this._selectionOffset=b};d.cleanInput=function(){this._scheduledCleanInput||this._cleanInput()};d.scheduleCleanInput=function(a){var c=this;a&&this._suppressInput();this._scheduledCleanInput||(this._scheduledCleanInput=!0,b("setTimeoutAcrossTransitions")(function(){c._cleanInput(),c._scheduledCleanInput=!1},0))};d.setEnabled=function(a){this._textInput.disabled=!a,this._richInput.contentEditable=a};d.getRoot=function(){return this._root};d.getRichInput=function(){return this._richInput};d.getEnabled=function(){return!this._textInput.disabled};d.getText=function(){return b("StructuredInputDOM").getDecodedText(this._richInput)};d.setText=function(a){b("DOM").setContent(this._richInput,b("StructuredInputDOM").createTextNode(a)),this._richChanged=!1,this._selectionChanged=!1,this.inform("change")};d.setHint=function(a){this._hintNodes=this._createStructureNodes(a),this._toggleHint()};d.getStructure=function(){var a=[];Array.from(this._richInput.childNodes).forEach(function(c){var d=!b("isTextNode")(c),e=b("StructuredInputDOM").getDecodedText(c);e.length&&a.push({text:e,uid:d?c.getAttribute("data-uid"):null,type:d&&c.getAttribute("data-type")||"text",isLocal:d&&c.getAttribute("data-is-local"),categoryName:d?c.getAttribute("data-category-name"):null})});return a};d.setStructure=function(a){b("DOM").setContent(this._richInput,this._createStructureNodes(a)),this._cleaner.clean(),this._cleaner.endOnText(),this.togglePlaceholder(),this._toggleHint(),this._richChanged=!1,this._selectionChanged=!1,this.inform("change")};d.getContentDimensions=function(){var a=this._richInput.lastChild;return{width:a?a.offsetLeft+a.offsetWidth:0,height:a?a.offsetTop+a.offsetHeight:0}};d.getSelection=function(){if(this._selection)return{offset:this._selection.getOffset(),length:this._selection.getLength()}};d.setSelection=function(a){this.hasFocus()&&this._selection&&(this._selection.update(),this._selection.setPosition(a.offset,a.length),this._selection.scrollToFocus(),this._selectionChanged=!1,this.inform("select"))};d.moveSelectionToEnd=function(){this.setSelection({length:0,offset:b("StructuredInputDOM").getLength(this._richInput)})};d.isSelectionAtEnd=function(){var a=this.getSelection().offset,c=b("StructuredInputDOM").getLength(this._richInput);return a>=c};d.selectAll=function(){this.setSelection({offset:0,length:b("StructuredInputDOM").getLength(this._richInput)})};d.hasFocus=function(){return b("DOM").contains(this._root,document.activeElement)};d.focus=function(){this._richInput.focus()};d.blur=function(){var a={position:"absolute",top:0,width:"1px",height:"1px"};b("Locale").isRTL()?a.right="-100px":a.left="-100px";var c=b("DOM").create("input",{type:"text",tabIndex:-1,style:a});b("DOM").appendContent(this._root,c);a=function(){(this.hasFocus()||q&&document.activeElement===document.body)&&(c.focus(),c.blur())};this.blur=a;this.blur()};return a}(b("mixin")(b("ArbiterMixin")));r.getInstance=function(a){var c=b("Parent").bySelector(a,"._586g");if(!c)throw new Error("No DOMElement structured input found using "+a);return b("DataStore").get(c,"StructuredInput")||new r(c)};e.exports=r}),null);
__d("FacebarTypeaheadInput",["csx","ArbiterMixin","DOM","FacebarStructuredText","Locale","SimpleStructuredInput","StructuredInput","mixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={text:{className:"text",group:"all",select:"none"},ent:{className:"entity",group:"all",select:"group"},"ent:hashtag_exact":{className:"entity",group:"hashtag",select:"none"}};function i(a){return Object.assign(a.toStruct(),{display:h[a.getType()]||h[a.getTypePart(0)]})}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this)||this;d.root=c;var e=b("DOM").scry(d.root,"._586i")[0];e?d.input=b("StructuredInput").getInstance(c):d.input=b("SimpleStructuredInput").getInstance(c);d.value=null;d.selection={offset:0,length:0};d.resetOnChange=!0;d.initEvents();return d}var d=c.prototype;d.initEvents=function(){var a=function(a,b){this.inform(a,b)}.bind(this);this.input.subscribe("blur",a);this.input.subscribe("focus",a);this.input.subscribe("change",function(a,b){this.resetOnChange&&(this.value=null),this.inform("change",b)}.bind(this))};d.togglePlaceholder=function(a){return this.input instanceof b("StructuredInput")?this.input.togglePlaceholder(a):null};d.focus=function(){this.input.focus()};d.blur=function(){this.input.blur()};d.getElement=function(){return this.root};d.getRawInputElement=function(){var a=b("DOM").scry(this.root,"._586i")[0];return a==null?b("DOM").scry(this.root,"._1frb")[0]:a};d.getValue=function(){this.value==null&&(this.value=b("FacebarStructuredText").fromStruct(this.input.getStructure()));return this.value};d.getLength=function(){return this.getValue().getLength()};d.resetPlaceholder=function(){this.input.resetPlaceholder()};d.setValue=function(a,b){this.value=a;this.resetOnChange=!!b;b=a.toArray().map(i);this.input.setStructure(b);this.input.setSelection({offset:a.getLength(),length:0});this.resetOnChange=!0};d.storeSelection=function(){this.selection=this.input.getSelection()};d.restoreSelection=function(){this.selection&&this.input.setSelection(this.selection)};d.clearSelection=function(){this.input.setSelection({offset:this.getLength(),length:0})};d.setHint=function(a){a=a&&!a.hasRTL()&&!b("Locale").isRTL()?a.toArray().map(i):[];this.input.setHint(a)};d.isSelectionAtEnd=function(){return this.input.isSelectionAtEnd()};d.selectInput=function(a){this.input.setSelection({offset:a||0,length:this.getLength()})};return c}(b("mixin")(b("ArbiterMixin")));Object.assign(a.prototype,{events:["change","focus","blur"]});e.exports=a}),null);
__d("LayerStopMouseDown",["Event"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._layer=a}var c=a.prototype;c.enable=function(){this._listener=b("Event").listen(this._layer.getContentRoot(),"mousedown",function(a){a.kill()})};c.disable=function(){this._listener&&this._listener.remove()};return a}();e.exports=a}),null);
__d("FacebarRemoveRecentSearchButton.react",["ix","cx","fbt","AbstractButton.react","AsyncRequest","BanzaiODS","DialogX","FacebarRemoveRecentSearchDialog.react","FacebarTypeaheadCore","FacebarTypeaheadRefreshNullstate","Image.react","LayerAutoFocusReact","LayerHideOnBlur","LayerStopMouseDown","React","XTypeaheadDeleteRecentSearchController","XUISpinner.react","asset","qex"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("React").useCallback,k=b("React").useRef,l=b("React").useState;function a(a){__p&&__p();var c=a.recentSearch,d=k(null);a=l(!1);var e=a[0],f=a[1],h=j(function(){d.current&&d.current.hide()},[]),m=j(function(){b("BanzaiODS").bumpEntityKey("search.www.remove_recent_search.dialog","hide");var a=b("FacebarTypeaheadCore").getInstance();a!=null&&a.focus()},[]),n=j(function(){b("BanzaiODS").bumpEntityKey("search.www.remove_recent_search.dialog","show");var a=new(b("DialogX"))({xui:!0,addedBehaviors:[b("LayerHideOnBlur"),b("LayerStopMouseDown"),b("LayerAutoFocusReact")],width:400},b("React").createElement(b("FacebarRemoveRecentSearchDialog.react"),{recentSearch:c,onNullstateReadyAfterRemoval:h}));a.subscribe("hide",function(){return m()});a.show();d.current=a},[m,h,c]),o=j(function(){b("BanzaiODS").bumpEntityKey("search.www.remove_recent_search.non_dialog","remove");f(!0);var a=b("XTypeaheadDeleteRecentSearchController").getURIBuilder().setString("recent_search",c).getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(){b("FacebarTypeaheadRefreshNullstate").forceNullstateRefresh(h)}).setErrorHandler(function(){b("BanzaiODS").bumpEntityKey("search.www.remove_recent_search.non_dialog","error"),f(!1)}).send()},[h,c]);a=j(function(){if(b("qex")._("889795")){var a=b("FacebarTypeaheadCore").getInstance();a!=null&&a.ignoreNextBlur();n()}else o()},[o,n]);a=b("qex")._("889796")?b("React").createElement(b("AbstractButton.react"),{className:"_7u-1",href:"#",image:b("React").createElement(b("Image.react"),{src:g("499669")}),label:i._("REMOVE"),role:"link",onClick:a,labelIsHidden:!0}):b("React").createElement(b("AbstractButton.react"),{className:"_7h02",href:"#",label:i._("REMOVE"),role:"link",onClick:a});return b("React").createElement("div",null,e?b("React").createElement(b("XUISpinner.react"),{className:"_7u-2",size:"small"}):a)}e.exports=a}),null);
__d("SearchPivotType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHOTO:"photo",PHOTO_EXPERIMENTAL:"photo_experimental",VIDEO:"video",FEED_SEARCH_KEYWORDS:"feed_search_keywords",SEARCH_AWARENESS_KEYWORDS:"search_awareness_keywords",ARTICLE_CLICK_ACTION:"ARTICLE_CLICK_ACTION",STORY_CLICK_ACTION:"STORY_CLICK_ACTION",STORY_LIKE_ACTION:"STORY_LIKE_ACTION",STORY_UNLIKE_ACTION:"STORY_UNLIKE_ACTION",STORY_COMMENT_DELETE_ACTION:"STORY_COMMENT_DELETE_ACTION",COMPOSER_PUBLISH_ACTION:"COMPOSER_PUBLISH_ACTION",FAN_PAGE_ACTION:"FAN_PAGE_ACTION",TRENDING_SERP_LOAD:"TRENDING_SERP_LOAD",PHOTOS_SERP_LOAD:"PHOTOS_SERP_LOAD",STORY_COMMENT_ACTION:"STORY_COMMENT_ACTION",SCROLL_ACTION:"SCROLL_ACTION",NEWS_FEED:"NEWS_FEED",PAGE:"PAGE",GROUP:"GROUP",NEWS_FEED_SECONDARY:"NEWS_FEED_SECONDARY",POST_SEARCH_SERP:"POST_SEARCH_SERP",LEARNING_NUX:"LEARNING_NUX",LEARNING_NUX_SECOND_STEP:"LEARNING_NUX_SECOND_STEP",MOBILE_STORY_LIKE_ACTION:"MOBILE_STORY_LIKE_ACTION",MOBILE_STORY_COMMENT_ACTION:"MOBILE_STORY_COMMENT_ACTION",MOBILE_COMMENT_LIKE_ACTION:"MOBILE_COMMENT_LIKE_ACTION",TIMELINE:"TIMELINE",NEXT_TRENDING:"NEXT_TRENDING",LEARNING_NUX_STANDALONE:"LEARNING_NUX_STANDALONE",TUTORIAL_NUX:"TUTORIAL_NUX",FEED_READ_ACTION:"FEED_READ_ACTION",NON_TRIGGERED_LEARNING_NUX:"NON_TRIGGERED_LEARNING_NUX",TYPEAHEAD_TOOLTIP:"TYPEAHEAD_TOOLTIP",TRIGGERED_LEARNING_NUX:"TRIGGERED_LEARNING_NUX",S19N_NUX:"S19N_NUX"})}),null);
__d("FacebarResultStore",["cx","fbt","Arbiter","CurrentUser","FacebarGlobalOptions","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarResultStoreUtils","FacebarStructuredText","KeywordsSearchResultConfig","SearchI18nMatch","SearchPivotType","TokenizeUtil","concatMap"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function(){__p&&__p();function a(a,c,d,e){__p&&__p();var f=this;this._extractStructure=function(a){__p&&__p();function c(a,b,c,d,e){return{type:a==="ent:extend_string"?"text":a,text:b,uid:c||null,isLocal:d?d:!1,categoryName:e?e:null}}function d(b,d){b.split(" ").forEach(function(b){b!==""&&(d&&a.chunks.push(a.structure.length),a.structure.push(c("text",b))),a.structure.push(c("text"," "))}),a.structure.pop()}function e(c){return a.structure.length!==0||b("FacebarJSConstants").nonGrammarTypes[a.type]?c:c.charAt(0).toUpperCase()+c.substr(1)}a.structure=[];a.chunks=[];a.parse.display.forEach(function(b){__p&&__p();if(typeof b==="string")d(e(b),!0);else if(b.type==="ent:extend_string")d(b.text,!0);else if(b.uid){var f=this.getEntry(b.uid,b.fetchType);a.chunks.push(a.structure.length);if(f==null)throw new Error('No entry found for uid "'+b.uid+'", type "'+b.fetchType+'" and piece text "'+b.text+'"');if(f.grammar_like)d(e(f.text),!1);else{var g=b.type;b.fetchType&&(g+=":"+b.fetchType);a.structure.push(c(g,f.text,b.uid,a.isLocal,a.categoryName))}}else b.type=="blank"&&(a.chunks.push(a.structure.length),a.structure.push(c(b.type,"...")))},f);return a};this._processBackendResult=function(a){__p&&__p();if(a.semantic==null)throw new Error("Facebar can't process empty semantic "+JSON.stringify(a));a.semantic=a.semantic.toString();a.backendCost=a.cost;f._extractStructure(a);a.type.match(/^\{.*\}$/)&&(a.useExtendedIndex=!0);a.alternateSemantic&&(a.alternateSemantic=a.alternateSemantic.toLowerCase().replace(/\[(\d*)\]/g,"$1"));if(a.semantic.match(/\[\d*\]/)){var b=a.parse,c=b.pos;if(c===void 0)a.semantic=a.semantic.replace(/\[(\d*)\]/g,"$1");else{var d=b.remTokens[b.remTokens.length-1];b.remTokens.length&&a.structure[a.chunks[d]]&&a.structure[a.chunks[d]].uid&&(c=b.remTokens[b.remTokens.length-1],a.completed=!0);var e=a.structure[a.chunks[c]].uid;if(e===null)a.semantic=a.semantic.replace(/\[(\d*)\]/g,"$1");else{var g=new RegExp("\\["+e+"\\]","g");a.unsubstituted_semantic=a.semantic;a.semantic=a.semantic.replace(g,e);b&&b.disambiguation&&b.disambiguation.length>0&&(b.disambiguation=b.disambiguation.filter(function(a){return a.indexOf("["+e+"]")!==-1}),b.unsubstituted_disambiguation=b.disambiguation.splice(0),b.disambiguation=b.disambiguation.map(function(a){return a.replace(g,e)}))}}}a.semantic=a.semantic.replace(/\[(.*)\]/g,"$1");a.tuid=JSON.stringify({semantic:a.semantic,structure:a.structure});return a};this.facebarConfig=a;this.facebarConfig.grammar_stop_words_penalty=this.facebarConfig.grammar_stop_words_penalty||2;this.facebarConfig.grammar_stop_words=this.facebarConfig.grammar_stop_words||{};this.facebarConfig.options=e;this.injectedSuggestionCount=0;this.tokenize=c;this.getEntry=d;this.typeaheadTypeMap=this.facebarConfig.mapped_types;this.facebarConfig.typeahead_types.forEach(function(a){this.typeaheadTypeMap[a]=a},this);this.unicodeMatch=new(b("SearchI18nMatch"))({prefix_hangul_conjoining_jamo:!0});this.resetCaches()}var c=a.prototype;c.transformStructured=function(a){__p&&__p();var b=[],c=[],d="",e="";a.forEach(function(a,f){if(a.isType("text"))d+=a.getText(),e=e==null?null:e+a.getText();else{f=d.match(/\"/g);f&&f.length%2&&(d=d.replace(/\s+$/,"")+'"');d.length&&(Array.prototype.push.apply(b,this.tokenize(d)),c.push(d),d="");b.push(a.toStruct());c.push({uid:String(a.getUID()),type:this._getFBObjectType(a.getTypePart(1)),text:a.getText()});e=null}},this);a=!1;var f=d;d.length&&(d[d.length-1]=="'"&&(d=d.substr(0,d.length-1)),d.length>0&&d[0]==="#"?Array.prototype.push.call(b,d):d.length>0&&d[0]==="@"?(a=!0,f=this._convertToAliasKey(d.substring(1)),Array.prototype.push.call(b,f)):(f=this._convertToAliasKey(d),Array.prototype.push.apply(b,this.tokenize(d))),c.push(d),d[d.length-1]==" "&&b.push(""));var g=JSON.stringify(c),h=g.replace(/\]$/,"").replace(/\"$/,"");h=h.replace(/\s{2,}/g," ");return{tokens:b,text_form:g,is_empty:!!g.match(/^\[(\"\s*\")?\]$/),raw_text:e,cache_id:h,is_alias_search:a,potential_alias_term:f}};c.resetCaches=function(){this.resetBootstrapCache(),this.resetQueryCache()};c.resetBootstrapCache=function(){this.bootstrapCache={}};c.resetQueryCache=function(){this.queryCache={"":{tokens:[],results:[]}}};c.setNullState=function(a){this.facebarConfig.null_state=a.map(this._extractStructure,this)};c.clearRecentSearches=function(){if(!this.facebarConfig.null_state)return;this.facebarConfig.null_state=this.facebarConfig.null_state.filter(function(a){return!a.isRecent})};c.setSortFunction=function(a){this._sortFunction=a};c.addBootstrap=function(a){var b=this.bootstrapCache;a.forEach(function(a){var c=this.getEntry(a);c.bootstrapped=!0;var d=this.tokenize(c.textToIndex,!0);c.tokens&&Array.prototype.push.apply(d,c.tokens.split(" "));d.forEach(function(c){Object.prototype.hasOwnProperty.call(b,c)||(b[c]={}),b[c][a]=!0})},this)};c._convertToAliasKey=function(a){return a.replace(/\./g,"").toLowerCase()};c.addNullStateToQueryCache=function(a){this.saveResults(this.facebarConfig.null_state,a,!0)};c.getResults=function(a,c){__p&&__p();var d=this;if(a.tokens.length===0||a.tokens.length==1&&a.tokens[0]==="")return{results:this.facebarConfig.null_state||[],null_state:!0};c=this._getBestQueryCache(a.cache_id);c=c.results.filter(function(a){return!a.isRecent});var e={},f=this._getBootstrapMatchByType(a,e),g=this._addMatchingBootstrapResults(a,f[0]||{},e,[]);b("FacebarGlobalOptions").limitBootstrapResult&&(g=g.slice(0,b("FacebarGlobalOptions").limitBootstrapResultNum));var h=[],i=[],k;b("FacebarGlobalOptions").disableBootstrapQueryNormalization&&a.raw_text!=null?k=a.raw_text.toLowerCase():k=a.tokens.map(function(a){return a.text!=null?a.text:a}).join(" ").toLowerCase();b("FacebarGlobalOptions").hasKeywordBootstrap&&(h=g.filter(function(a){return a.type===b("FacebarJSConstants").keywordType&&d.unicodeMatch.prefixMatch(a.structure[0].text.toLowerCase(),k)}),h.sort(this._sortFunction(a.raw_text)),i=g.filter(function(a){return a.type!==b("FacebarJSConstants").keywordType&&d.unicodeMatch.prefixMatch(a.structure[0].text.toLowerCase(),k)}),i.sort(this._sortFunction(a.raw_text)),g=i.concat(h));Array.prototype.push.apply(g,b("concatMap")(this._getResultsFromCache.bind(this,f,a),c));b("FacebarGlobalOptions").hasKeywordBootstrap||g.sort(this._sortFunction(a.raw_text));var m={},n=[],o=!1,p=0;g.forEach(function(a){__p&&__p();var c=b("FacebarStructuredText").fromStruct(a.structure);if(c.hasType("blank")){n.push(a);return}a.semantic=a.semantic.toLowerCase();a.termMatches||(a.termMatches=e[a.semantic]);c=l(a,a.semantic);var d=l(a,a.alternateSemantic);if(!c)return;var f=m[c]||d!=null&&m[d];if(f){a.isJSBootstrapMatch?(f.isJSBootstrapMatch=!0,f.bootstrapCost=a.bootstrapCost):f.isJSBootstrapMatch&&a.backendCost!==void 0&&f.backendCost===void 0&&(f.backendCost=a.backendCost);a.tags!=null&&Object.assign(f.tags||{},a.tags);j(a)&&f.keyword_type==="keyword"&&Object.assign(f,a);return}if(o&&a.blankFilled)return;if(a.type.indexOf("browse_type")>=0){p+=1;if(this.facebarConfig.maxGrammarResults!==void 0&&p>this.facebarConfig.maxGrammarResults)return}o=o||!!a.blankFilled;m[c]=a;d&&(m[d]=a);n.push(a)},this);return{results:n}};c.saveResults=function(a,c,d,e){__p&&__p();a=a.map(this._processBackendResult,this);var f=[],g={},h={};a.forEach(function(a){h[a.semantic]=!0});var i=this._getBestQueryCache(c.cache_id);i.results.forEach(function(a){if(a.type==="websuggestion")return;if(a.exactMatchKeyword)return;if(a.semantic in g)return;var b=this._getDifferenceArrayTokens(a.tokens,c.tokens),d=this._getNumTokensMatching(b,a);d=this._tryMatchingFinalInsertedEntity(b,d,a);(d>0&&d==b.length||(a.type==="shortcut"&&a.termMatches.indexOf(c.tokens[c.tokens.length-1]))>=0)&&(a.cacheOnlyResult=!h[a.semantic],f.push(a))},this);b("FacebarGlobalOptions").limitCacheResult&&(f=f.slice(0,b("FacebarGlobalOptions").limitCacheResultNum));a.forEach(function(a){a.tokens=c.tokens,a.cache_id_length=c.cache_id.length,a.isTypeNamedXBootstrap&&++a.cache_id_length,f.push(a)},this);this.queryCache[c.cache_id]===void 0&&(this.queryCache[c.cache_id]={});Object.assign(this.queryCache[c.cache_id],{tokens:c.tokens,results:f,incomplete:d},e)};c.alreadyKnown=function(a){return!!this.queryCache[a]&&!this.queryCache[a].incomplete};c.stripBrackets=function(a){return a.replace(/^[\[\{]/,"").replace(/[\]\}]$/,"")};c._getDifferenceArrayTokens=function(a,b){if(!a.length)return[""].concat(b);var c=a.length-1,d=a[c];d===""&&(d=a[--c]);a="";typeof d==="string"&&c<b.length&&(a=b[c].substr(d.length));return[a].concat(b.slice(c+1))};c._sortFunction=function(a){return function(a,b){return(a.cost||0)-(b.cost||0)}};c._getResultsFromCache=function(a,c,d){a=c.tokens;var e=this._getDifferenceArrayTokens(d.tokens,a),f=[],g=this._getNumTokensMatching(e,d);g=this._tryMatchingFinalInsertedEntity(e,g,d);g>0&&g==e.length&&!(d.type===b("KeywordsSearchResultConfig").result_type&&e.length===1&&e[0]==='"')&&f.push(d);d.type==="shortcut"&&d.termMatches.indexOf(c.tokens[a-1])>=0&&f.push(d);return f};c._addMatchingBootstrapResults=function(a,c,d,e){__p&&__p();var f=a.tokens;return b("concatMap")(function(g){__p&&__p();var h=c[g];if(h===void 0)return[];var i=[],j=b("FacebarResultStoreUtils").getQueryFeatures(a);h.forEach(function(c){__p&&__p();var h=this.getEntry(c,g);if(a.is_alias_search){if(!this._isAliasMatch(a,h,!1))return}else if(!this._isTitleTermMatch(f,h)&&!this._isAliasMatch(a,h,!1)&&!e.includes(c))return;var k=this._isExactNameMatch(f,h)||this._isAliasMatch(a,h,!0),l=k?0:this.facebarConfig.non_title_term_match_penalty,m=this._isNonGrammarTermMatch(f,h),n=h.grammar_costs?h.grammar_costs["{"+g+"}"]:0,o=g===b("FacebarJSConstants").keywordType?h.cost:0;o=o+n+l+this.facebarConfig.entity_cost+this.facebarConfig.grammar_stop_words_penalty*!m;n=b("FacebarResultStoreUtils").processEntityResult(g,c,h.text,o,a,j,d,k,!m);n.bootstrapCost=o;n.isJSBootstrapMatch=!0;g===b("FacebarJSConstants").keywordType&&(n.iconClass=h.iconClass,n.keywordBootstrapType=h.keywordBootstrapType,n.parse=h.parse,n.subtext=h.subtext,n.boldedSubtext=h.boldedSubtext,n.semantic=h.semantic,n.popularSearchScore=h.popularSearchScore,n.trendingTopicID=h.trendingTopicID,n.photo=h.photo,n.keyword_type=h.keyword_type,n.keywordSource=h.keywordSource,n.item_logging_info=h.item_logging_info,n.item_logging_id=h.item_loggind_id);i.push(n)},this);return i}.bind(this),this.facebarConfig.bootstrap_types)};c._isTitleTermMatch=function(a,c){var d=a[0]||{};if(typeof d==="object")return!1;c=c.titleToIndex;return a.length===1?this._isTokenizePrefixMatch(d,c):b("TokenizeUtil").isExactMatch(d,c)};c._isExactNameMatch=function(a,c){var d=a[0]||{};if(typeof d==="object")return!1;d=c.text;for(var c=0;c<a.length-1;++c)if(a[c]!==""&&!b("TokenizeUtil").isExactMatch(a[c],d))return!1;return a.length>0&&this._isTokenizePrefixMatch(a[a.length-1],d)};c._isAliasMatch=function(a,c,d){if(c.alias==null||a.potential_alias_term==null)return!1;c=this._convertToAliasKey(c.alias);if(d||!a.is_alias_search)return b("TokenizeUtil").isExactMatch(a.potential_alias_term,c);else return b("TokenizeUtil").isPrefixMatch(a.potential_alias_term,c)};c._isNonGrammarTermMatch=function(a,c){__p&&__p();c=b("TokenizeUtil").parse(c.titleToIndex.toLowerCase());c=c.tokens.filter(function(a){return a!==""&&!this.facebarConfig.grammar_stop_words[a]},this);c=c.join(" ");for(var d=0;d<a.length;++d){if(typeof a[d]==="object")return!0;var e=d===a.length-1?this._isTokenizePrefixMatch(a[d],c):b("TokenizeUtil").isQueryMatch(a[d],c);if(e)return!0}return!1};c._getBootstrapMatchByType=function(a,b,c){__p&&__p();c===void 0&&(c=[]);var d=a.tokens.slice();if(d.length===0)return[];var e=d.map(function(){return{}}),f=d[d.length-1]==="",g={},h,i=f?d.length-1:d.length,j=d[i-1];if(i&&j.uid){this._pushBootstrapEntryAtPosition(e,i-1,j.uid,a.is_alias_search);return e}for(var k in this.bootstrapCache)if(i&&this.unicodeMatch.prefixMatch(k,j)&&(!f||k===j))for(h in this.bootstrapCache[k])this._addMatchedTerm(h,k,b),g[h]||(g[h]=1,this._pushBootstrapEntryAtPosition(e,i-1,h,a.is_alias_search));for(var f=i-2;f>=0;f--){if(typeof d[f]==="object")break;if(d[f].length&&d[f][0]=='"')break;for(h in this.bootstrapCache[d[f]])g[h]||(g[h]=0),g[h]+f==i-1&&(++g[h],this._addMatchedTerm(h,d[f],b),this._pushBootstrapEntryAtPosition(e,f,h,a.is_alias_search))}if(!a.is_alias_search&&a.potential_alias_term)for(h in this.bootstrapCache[a.potential_alias_term])this._addMatchedTerm(h,a.potential_alias_term,b),g[h]||(g[h]=1,this._pushBootstrapEntryAtPosition(e,0,h,a.is_alias_search));for(var j=c,f=Array.isArray(j),i=0,j=f?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(i>=j.length)break;d=j[i++]}else{i=j.next();if(i.done)break;d=i.value}b=d;this.getEntry(b)&&!g[b]&&(g[b]=1,this._pushBootstrapEntryAtPosition(e,0,b,a.is_alias_search))}return e};c._addMatchedTerm=function(a,b,c){(c[a]=c[a]||[]).push(b);return c};c._pushBootstrapEntryAtPosition=function(a,b,c,d){__p&&__p();var e=this.getEntry(c);if(!e)return;var f=[];f=[e.type];for(var e=0;e<f.length;e++){var g=f[e];if(d&&g!=="user"&&g!=="page")continue;a[b][g]===void 0&&(a[b][g]=[]);a[b][g].push(c)}};c._getNumTokensMatching=function(a,b){__p&&__p();var c=0,d=b.parse,e=a.length,f=null,g=null;if(d.pos!==void 0){var h=b.structure[b.chunks[d.pos]];h&&(f=h.uid,g=h.type.split(":")[2])}b.outputTokensUsed=[];b.termMatches=[];if(f){c=this._prefixMatchEntity(a,d,f,b.outputTokensUsed,g,!!b.useExtendedIndex,b.termMatches);if(c===0||c===e)return c}else if(d.suffix&&e==1&&d.suffix.indexOf(a[0])===0)return e;else if(d.suffix==a[0])++c;else return 0;h=[];d.remTokens=d.remTokens||[];for(var f=0;f<d.remTokens.length;f++){if(typeof a[c]!=="string"||b.chunks.length<=d.remTokens[f]||b.structure.length<=b.chunks[d.remTokens[f]]||b.structure[b.chunks[d.remTokens[f]]].uid)break;g=b.structure[b.chunks[d.remTokens[f]]].text;h.push(g.toLowerCase())}c=this._greedyMatchText(h,a,c,d.remTokens,b.outputTokensUsed,b.isNullState);return c==e-1&&a[c]===""?e:c};c._prefixMatchEntity=function(a,b,c,d,e,f,g){__p&&__p();b.entTokens=b.entTokens||[];if(b.entTokens.length===0){if(a[0]!=="")return 0;if(b.possessive&&a.length>1&&a[1]=="'s"){d.push([b.pos+1]);return 2}else return 1}var h=!1;c=this.getEntry(c,e);if(e!==void 0&&e!==c.fetchType)return 0;e=this.tokenize(f?c.textToIndex:c.text,!0);f=[];for(var c=0;c<a.length+b.entTokens.length-1;c++)c<b.entTokens.length-1?f.push(b.entTokens[c]):c==b.entTokens.length-1?f.push(b.entTokens[c]+a[0]):f.push(a[c-b.entTokens.length+1]);c=-b.entTokens.length+1;for(var i=0;i<f.length;++i){var j=f[i];if(typeof j!=="string")break;if(j===""){c++;continue}var k=!1;for(var l=0;l<e.length;l++)if(e[l]==j||i===f.length-1&&e[l].indexOf(j)===0){g&&g.push(e[l]);e[l]="";k=!0;++c;break}if(k)continue;if(!b.possessive||j.length<=2||j.substr(j.length-2)!="'s")break;k=j.substr(0,j.length-2);for(l=0;l<e.length;l++)if(e[l]==k){++c;d&&(h=!0);break}break}if(c>0){h&&d.push([b.pos+1]);return c}if(d===void 0)return 0;j=a[0];l=j;b.possessive&&j.length>=2&&j.substr(j.length-2)=="'s"&&(l=j.substr(0,j.length-2));b.suffix=b.suffix||"";if(a.length==1&&b.suffix.indexOf(j)===0||b.suffix==l||b.suffix==j){l!=j&&b.suffix==l&&d.push([b.pos+1]);return 1}return 0};c._tryMatchingFinalInsertedEntity=function(a,b,c){if(!c.completed||b<0)return b;var d=c.parse;d=d.remTokens[d.remTokens.length-1];c=c.structure[c.chunks[d]];d=this.getEntry(c.uid,c.type);c=this.tokenize(d.text,!0);b=this._greedyMatchText(c,a,b);return b==a.length-1&&a[b]===""?a.length:b};c._greedyMatchText=function(a,b,c,d,e,f){__p&&__p();for(var g=0;g<a.length;g++){var h=a[g];if(h==b[c]){e!==void 0&&e.push(d[g]);++c;continue}if(c===b.length-1&&h.indexOf(b[c])===0){e!==void 0&&(h==b[c]?e.push([d[g]]):e.push([d[g],b[c].length]));return b.length}if(f)break}return c};c._getBestQueryCache=function(a){for(var b=a.length;b>=0;b--){var c=this.queryCache[a.slice(0,b)];if(c)return c}};c._getFBObjectType=function(a){if(this.typeaheadTypeMap[a])return this.typeaheadTypeMap[a];else return"page"};c._isTokenizePrefixMatch=function(a,c){return b("TokenizeUtil").isPrefixMatch(this.unicodeMatch.prefixMatchPrepare(a),this.unicodeMatch.prefixMatchPrepare(c))};c.getBootstrapMatches=function(a,b){b===void 0&&(b=[]);var c={},d=this._getBootstrapMatchByType(a,c,b?b:[]);return this._addMatchingBootstrapResults(a,d[0]||{},c,b?b:[])};return a}();i.EPSILON=1e-5;i.getUniqueSemantic=function(a){__p&&__p();if(!a)return;var b=[],c=[],d=[];a="("+a+")";var e=a,f=!1;a.replace(/[\(\),]/g,function(g,h){__p&&__p();var i;switch(g){case",":var j=d.length-1;i=e.substr(d[j],h-d[j]);b[j].push(i);d[j]=h+1;break;case"(":d.push(h+1);b.push([]);c.push(h+1);break;case")":if(d.length===0)throw new Error(a+" is not a valid semantic string");j=d.pop();i=e.substr(j,h-j);i=decodeURI(i.replace(/%/g,"%25").replace(/\s/g,"+").trim());j=b.pop();j.push(i);i=j.sort();for(var j=1;j<i.length;j++)i[j]==i[j-1]&&(f=!0);j=i.join(",");e=e.substr(0,c.pop())+j+e.substr(h);break}return g});return f?"":e.replace(/\((.*)\)/,"$1")};var j=function(a){return a.keyword_type==="local"&&a.semantic.match(/[0-9]+\/local/)!=null},k=function(a){if(!j(a))return null;a=encodeURIComponent(a.name.replace(/\s+/g,"+"));return"str/"+a+"/keywords_search"},l=function(a,c){if(!b("CurrentUser").isWorkUser())return b("FacebarStructuredText").fromStruct(a.structure).toString().toLowerCase();a=k(a);a=a!=null?a:i.getUniqueSemantic(c);return a!=null?a.toLowerCase():null};e.exports=i}),null);
__d("FacebarTimerUtils",[],(function(a,b,c,d,e,f){"use strict";a={getTimestamp:function(){return Date.now()}};e.exports=a}),null);
__d("FacebarTokenizer",["TokenizeUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a='[^"]';var g=["\\s's","'s",'"'+a+'*"?'],h=[[/\s+$/,""],[/\"\s+/,'"'],[/\s+\"/,'"'],[/\"\"/,""],[/^\"$/,""],[/\s+/," "]];c={tokenize:function(a,c){__p&&__p();var d=[],e=0;a=a.replace(/\s/g," ").toLowerCase();a.replace(new RegExp(g.join("|"),"g"),function(f,g){__p&&__p();if(g>e){var i=a.substr(e,g-e);Array.prototype.push.apply(d,b("TokenizeUtil").parse(i).tokens.slice(0))}i=f;for(var j=0;j<h.length;j++){var k=h[j];i=i.replace(k[0],k[1])}d.length&&i=="'s"?d[d.length-1]+=i:i!==""&&d.push(i);c&&Array.prototype.push.apply(d,b("TokenizeUtil").parse(f).tokens);e=g+f.length});if(e<a.length){var f=a.substr(e,a.length-e);Array.prototype.push.apply(d,b("TokenizeUtil").parse(f).tokens.slice(0))}return d}};e.exports=c}),null);
__d("FacebarTypeaheadRecorder",["Arbiter","CurrentUser","Event","FacebarGlobalOptions","FacebarJSConstants","FacebarTimerUtils","Keys","SearchFunnelLogger","SearchTypeaheadRecorder","URI","clickRefAction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){__p&&__p();b=a.call(this,b)||this;b.userText="";b.nullStateCandidates=null;b.singleStateCandidates=null;b.queryTimes={};b._sessionDisabled=!1;b.type="facebar";b._maxQueryID=0;b._isQueryMatch=!0;b._bootstrapSize=null;return b}var d=c.prototype;d.initEvents=function(a){__p&&__p();var c=this;a.getCore().subscribe("session",function(a,b){b===null?this.sessionEnd():this.sessionStart(b)}.bind(this));a.getCore().subscribe("select",function(a,b){this.recordStat("time_between_select_and_last_render",Date.now()-this._lastRenderTime),this._firstKeypressTime!=null&&this.recordStat("keypress_to_select_time",Date.now()-this._firstKeypressTime),this.recordSelectInfo(b)}.bind(this));a.getCore().subscribe("magSearch",function(a,b){this.recordMagSearch(b)}.bind(this));a.getCore().input.subscribe("shortcut",function(a,b){this.recordShortcut(b)}.bind(this));a.getCore().subscribe("quickSelectRedirect",function(a,b){this.recordQuickSelectInfo(b)}.bind(this));a.getView().subscribe("render",function(a,b){if(this.data._isInjectedSuggestionFlow)return;this.recordRender(b);this.allFromNullState?this.nullStateCandidates=this.buildListTypeaheadRecords():this.allFromSingleState&&(this.singleStateCandidates=this.buildListTypeaheadRecords());this._lastRenderTime=Date.now()}.bind(this));a.getView().subscribe("show",function(a,b){if(!this.data.lastNullOrSingleStateFetchStartTime)return;this.recordStat("time_render_null_state",Date.now()-this.data.lastNullOrSingleStateFetchStartTime);this.data.lastNullOrSingleStateFetchStartTime=null}.bind(this));a.getView().subscribe("logPerformanceTiming",function(a,b){c.performanceTimings[b.field]=b.value});a.data.subscribe("query",function(a,c){c.value.isEmpty()||this.recordCountStat("num_queries"),this.recordAvgStat("num_results_from_cache",c.results.length),this.queryTimes[c.queryId]={send:b("FacebarTimerUtils").getTimestamp()}}.bind(this));a.data.subscribe("sending_request",function(a,b){a=b.data.value;if(!a)return;this.backendQueries.push(a)}.bind(this));a.subscribe("navigation",function(a,b){b&&b.structure&&(this.recordStat("navigation_input",JSON.stringify(b.structure.toStruct())),this.recordStat("navigation_text",b.structure.toString()))}.bind(this));a.data.subscribe("response_received",function(a,c,d){if(this.queryTimes[c.queryId]){a=this.queryTimes[c.queryId];a.recv=b("FacebarTimerUtils").getTimestamp()-a.send;c&&c.payload&&(a.payload_size=JSON.stringify(c.payload).length)}}.bind(this));a.data.subscribe("remote_query_latency",function(a,b){if(this.queryTimes[b.queryId]){a=this.queryTimes[b.queryId];a.remoteQueryLatencies=b.latencies}}.bind(this));a.data.subscribe("cache_query_latency",function(a,b){if(this.queryTimes[b.queryId]){a=this.queryTimes[b.queryId];a.cacheQueryLatencies=b.latencies}}.bind(this));a.data.subscribe("backend_response",function(a,c){if(this.queryTimes[c.queryId]){a=this.queryTimes[c.queryId];a.render=b("FacebarTimerUtils").getTimestamp()-a.send;c.payload.incomplete&&(a.incomplete=!0);a.backendInfo=c.payload.info;this.core.scubaInfo&&this.logToScuba(c,a,this.core.scubaInfo,c.inputQuery,this.type)}}.bind(this));a.getCore().subscribe("change",function(a,b){this.userInput(this.core.getText())}.bind(this));a.data.subscribe("remote_query_match",function(a,b){this._maxQueryID<b.queryId&&(this._maxQueryID=b.queryId,this._isQueryMatch=b.isMatch)}.bind(this));b("Arbiter").subscribe("BrowseNUX/typing",this.disableThisSession.bind(this));b("Arbiter").subscribe("TestConsole/typing",this.disableThisSession.bind(this));a.subscribe("clear",function(){this.recordAppendStat("before_clear_queries",this.userText)}.bind(this));b("Event").listen(this.element,"keydown",function(a){this.recordStat("keypressed",1),this.recordCountStat("count_keys_pressed"),b("Event").getKeyCode(a)==b("Keys").BACKSPACE?this._backspacing||(this._backspacing=!0,this.recordAppendStat("before_backspace_queries",this.core.getText())):this._backspacing=!1,this._firstKeypressTime==null&&(this._firstKeypressTime=Date.now())}.bind(this));this.core.subscribe("open",function(a,c){c&&c.sessionID&&b("SearchFunnelLogger").logSearchOpen(c.sessionID);if(c&&c.catchup)return;this.data.lastNullOrSingleStateFetchStartTime=Date.now()}.bind(this));this.core.subscribe("focusStartTime",function(a,b){this.data.lastNullOrSingleStateFetchStartTime=b.time}.bind(this));this.data.subscribe("beforeQuery",function(a,b){this.queryStartTime||(this.queryStartTime=[]);a=b.value;this.query=a!=null?a.toString():a;!this.query&&!this.data.lastNullOrSingleStateFetchStartTime&&(this.data.lastNullOrSingleStateFetchStartTime=Date.now());this.queryStartTime[this.query]=Date.now()}.bind(this));a.subscribe("filter",function(a,b){this._unsupportedGrammarInfo=this.buildUnsupportedGrammarInfo(b)}.bind(this));a.getCore().subscribe("recordFunction",function(a,b){this._extraRecorder.push(b)}.bind(this));this.data.subscribe("bootstrapped",function(a,b){this._bootstrapSize=b.size}.bind(this))};d._reset=function(a){this.stats={},this.avgStats={},this.appendStats={},this._backspacing=!1,this.backendQueries=[],this._topreplace=!1,this._inflightRequests={}};d.sessionStart=function(a){__p&&__p();this._sessionEnded=!1;this.data.setQueryData({sid:a});this.recordStat("sid",a);this.recordStat("bootstrap_size",this._bootstrapSize);if(!this.stats.session_start_time){this.recordStat("session_start_time",b("FacebarTimerUtils").getTimestamp());a=new Date();a=a.getTimezoneOffset();a=Date.now()-a*60*1e3;this.recordStat("session_start_time_user_timezone",a)}this.recordStat("keypressed",0);this.queryTimes={};this._lastRenderTime=0;this._firstKeypressTime=null};d.sessionEnd=function(){__p&&__p();if(this._sessionEnded||this._sessionDisabled){this._sessionDisabled&&(this.reset(),this._sessionDisabled=!1,this._sessionEnded=!0);return}this._sessionEnded=!0;var a="typed";this.allFromNullState?a="nullstate":this.allFromSingleState&&(a="singlestate");this.recordStat("last_state",a);this.recordStat("session_end_time",b("FacebarTimerUtils").getTimestamp());this.recordStat("grammar_version",this.data.getQueryData().grammar_version);this.submit();this.nullStateCandidates=null;this.singleStateCandidates=null};d.disableThisSession=function(){this._sessionDisabled=!0};d.userInput=function(a){this.userText=a};d.buildUnsupportedGrammarInfo=function(a){a=a.results?a.results[0]:null;return!a||a.results_set_type!=="unimplemented"?null:{unsupported_grammar:{category:a.error_info.category||"unknown",edge:a.error_info.blamed_edge}}};d.buildTypeaheadRecord=function(a,c){__p&&__p();var d=a.rankType||a.render_type||a.type,e=a.keywordType,f=a.keywordSource;!a.isNullState&&d!==b("FacebarJSConstants").keywordType&&(e=d,b("CurrentUser").isWorkUser()||(d=b("FacebarJSConstants").keywordType),a.isJSBootstrapMatch&&(f=b("FacebarJSConstants").keywordTypes.entityBootstrap));a.isNullState&&d===b("FacebarJSConstants").keywordType&&(f=b("FacebarJSConstants").keywordTypes.recentSearch);var g=0;c=c;typeof a.groupIndex==="number"&&(g=a.groupIndex,c=a.indexInGroup);g={group_index:g,index_in_group:c,cost:a.cost,s_value:a.s_value||0,semantic:a.semantic,text:a.structure.toString(),cache_only:a.cacheOnlyResult?1:0,prefetched:a.isPrefetched?1:0,parse:a.parse,category:a.category,type:d,source:a.bootstrapped,grammar_results_type:(a.results_set_type||"").replace(/[\[\{](.*)[\]\}]/,"$1"),result_from_memcache:a.memcache,dynamic_cost:a.dynamic_cost,is_js_bootstrap_match:a.isJSBootstrapMatch,backend_cost:a.backendCost,bootstrap_cost:a.bootstrapCost,match_type:a.match_type,l_type:a.l_type,vertical_type:a.vertical_type,prefix_match:a.prefix_match,prefix_length:a.prefix_length,index_before_buckets:a.indexBeforeBuckets,bucket_lineage:a.bucketLineage,nullstate:a.isNullState,singlestate:a.isSingleState,query_id:a.qid,template_id:a.templateID,coeff_cost:typeof a.grammar_costs==="undefined"?-1:a.grammar_costs["{"+a.type+"}"],suggestion:a.isSuggestion,keyword_source:f,keyword_bootstrap_type:a.keywordBootstrapType,exact_match_suggestion:a.exactMatchKeyword?1:0,keyword_type:e};a.logInfo&&(g.backend_log_info=a.logInfo);a.s_token&&(g.s_token=a.s_token);a.s_categories&&(g.s_categories=a.s_categories);return g};d.buildListTypeaheadRecords=function(){var a=[];this.results&&this.results.forEach(function(b,c){b.uid!=="search"&&a.push(this.buildTypeaheadRecord(b,c))}.bind(this));return a};d.recordShortcut=function(a){this.recordStat("shortcut",1),this.recordStat("shortcut_with_shift",a.shift)};d.recordStats=function(a,b){for(var c in b)this.recordStat(a+"_"+c,b[c])};d.getTypeaheadIndex=function(a,b){a=typeof a.groupIndex==="number"?a.groupIndex+1:0;return b-a};d.recordQuickSelectInfo=function(a){a={input_query:a.input_query,semantic:a.semantic,type:a.type,position:a.position,with_mouse:a.with_mouse,text:a.text,quick_select:1};this.recordStats("selected",a);this.recordStat("quick_select",1)};d.recordMagSearch=function(a){var b={};b.text=a.text;b.semantic=a.semantic;b.type=a.type;b.input_query=a.text;b.position=a.position;this.recordStats("selected",b)};d.recordSelectInfo=function(a){__p&&__p();var c=a.selected,d=this.getTypeaheadIndex(c,a.index),e={};if(c.uid=="search")e.selected_search=1;else{e=this.buildTypeaheadRecord(c);var f=e.type=="friend"?"user":e.type;e.position=d;e[f]=1}e.with_mouse=a.clicked?1:0;e.quick_select=0;e.input_query=this.userText;e.input_fragments=JSON.stringify(this.core.currentQuery.toStruct());d=c.dataGT?{gt:JSON.parse(c.dataGT)}:{};f={href:c.path};b("clickRefAction")("click",f,null,null,d);this.recordStats("selected",e);this.recordAppendStat("selection_history",{selected:e,candidate_results:this.buildListTypeaheadRecords(),timestamp:b("FacebarTimerUtils").getTimestamp()});var g={};this._extraRecorder.forEach(function(b){b(a,this.results,g)}.bind(this));this.recordStat("extra_select_info",JSON.stringify(g));this.recordStat("selected_with_mouse",a.clicked?1:0)};d._dataToSubmit=function(){__p&&__p();this.recordStat("max_results",this.data._maxResults);this.stats&&this.stats.selected_input_query?this.recordStat("input_query",this.stats.selected_input_query):this.recordStat("input_query",this.userText);this.recordStat("uri",new(b("URI"))(window.location.href).toString());this.stats.shortcut||(this.recordStat("shortcut",0),this.recordStat("shortcut_with_shift",!1));var a=this.stats;for(var c in this.avgStats){var d=this.avgStats[c];a[c]=d[0]/d[1]}d={candidate_results:this.buildListTypeaheadRecords(),timestamp:b("FacebarTimerUtils").getTimestamp(),input_query:this.userText,remote_query_match:this._isQueryMatch};this._unsupportedGrammarInfo&&Object.assign(d,this._unsupportedGrammarInfo);this.recordAppendStat("suggestions_at_end_of_session",d);this.nullStateCandidates&&this.recordAppendStat("suggestions_at_nullstate_session",{candidate_results:this.nullStateCandidates});this.singleStateCandidates&&this.recordAppendStat("suggestions_at_singlestate_session",{candidate_results:this.singleStateCandidates});this.recordAppendStat("query_times",this.queryTimes);this.backendQueries.length>0&&(this.backendQueries.length>this.data.logBackendQueriesWindow&&(this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow)),this.recordStat("backend_queries",this.backendQueries));if(b("FacebarGlobalOptions").taSessionLoggingSample){var e=[];this.results.forEach(function(a){e.push([a.text||"",a.category||"",a.subtext||""])});this.recordStat("raw_suggestions_text",e)}this.recordStat("experience_type","gsv2");for(var f in this.appendStats)a[f]=JSON.stringify(this.appendStats[f]);return a};d.getDataToSubmit=function(){return this._dataToSubmit()};d.reset=function(){return this._reset()};d.submit=function(){this._sessionDisabled||a.prototype.submit.call(this),this.view.inform("feedback"),this._reset()};return c}(b("SearchTypeaheadRecorder"));Object.assign(a.prototype,{_sessionEnded:!0,_extraRecorder:[],_banzaiRoute:"facebar"});e.exports=a}),null);
__d("ResultsBucketizer",["FacebarGlobalOptions","FacebarJSConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b){this.$1=a,this.$2=b}a.trimResults=function(a,b,c){var d=[];a.forEach(function(a,c){a.indexBeforeBuckets>b&&d.push({index:c,originalIndex:a.indexBeforeBuckets})});d.sort(function(a,b){return a.originalIndex-b.originalIndex}).slice(c).sort(function(a,b){return b.index-a.index}).forEach(function(b){a.splice(b.index,1)})};a.mergeBuckets=function(b,c){var d=[];for(var e in c)!c[e].rule.hidden&&(!c[e].rule.xor||!c[c[e].rule.xor])&&d.push(c[e]);d.sort(function(a,b){var c=(a.rule.position||0)-(b.rule.position||0);return c!==0?c:a.results[0].indexBeforeBuckets-b.results[0].indexBeforeBuckets});b.length=0;d.forEach(function(c,e){c.rule.maxPromotions!=null&&e<d.length-1&&a.trimResults(c.results,d[e+1].results[0].indexBeforeBuckets,c.rule.maxPromotions),Array.prototype.push.apply(b,c.results)}.bind(this))};var c=a.prototype;c.$3=function(a,b){if(b.propertyName==null)return b.bucketName||"default";a=this.$2(a,b.propertyName);return a==null||b.propertyValue!=null&&""+a!==b.propertyValue?!1:b.bucketName||b.propertyName+"."+a};c.$4=function(a,c,d){__p&&__p();var e={};d==null&&(d=b("FacebarGlobalOptions").default_num_top_results_to_show);a.forEach(function(a,f){__p&&__p();c.some(function(c){__p&&__p();var f=this.$3(a,c);if(f===!1)return!1;e[f]==null&&(e[f]={results:[],rule:c});if(f===b("FacebarJSConstants").keywordType&&e[f].results.length>=d)return!0;if(!!c.maxResults&&e[f].results.length>=c.maxResults)return!0;a.bucketLineage.push({bucketName:f,bucketIndex:e[f].results.length});e[f].results.push(a);return!0}.bind(this))}.bind(this));return e};c.$5=function(b,c,d){__p&&__p();c=this.$1[c];if(!c)return{};c=this.$4(b,c,d);for(var e in c){var f=c[e].rule.subBucketRules;f&&this.$5(c[e].results,f,d)}a.mergeBuckets(b,c);return c};c.$6=function(a,b,c){if(b.length<=c)return b.slice();a=b.map(function(a){return a.indexBeforeBuckets});var d=a.sort(function(a,b){return a-b})[c];return d==null?b:b.filter(function(a){return a.indexBeforeBuckets<d})};c.bucketize=function(a,b,c,d){a.forEach(function(a,b){a.bucketLineage=[],a.indexBeforeBuckets=b});c=c||{};Object.assign(c,this.$5(a,"main",d));d=this.$6(c,a,b);return d};return a}();e.exports=a}),null);
__d("FacebarTypeaheadDebugPane.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.renderDebugText=function(a){return b("React").createElement("div",{key:a},a)};d.render=function(){return b("React").createElement("div",{className:"fsm pam"},this.props.result.debug.map(this.renderDebugText))};return c}(b("React").Component);e.exports=a}),null);
__d("FacebarTypeaheadDiffText.react",["cx","React","TextWithEmoticons.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.renderDiff=function(a,c){return b("React").createElement("span",{className:"diffNode _5td3",key:c},b("React").createElement(b("TextWithEmoticons.react"),{text:a}))};d.renderParts=function(){var a=this.props.prefix,c=this.props.text;if(a==null)return[this.renderDiff(c,0)];var d=c.toLowerCase().indexOf(a.toLowerCase());a=a.trim();d===0&&(c=c.slice(a.length));c=c.split(/\b/).map(this.renderDiff);d===0&&c.unshift(b("React").createElement(b("TextWithEmoticons.react"),{key:"prefix",text:a}));return c};d.render=function(){return b("React").createElement("span",this.props,this.renderParts())};c.generatePrefixes=function(a,b){var c=[],d,e;for(var f=0,g=b.length;f<g;f++){e=b[f].getText();d=a.slice(0,Math.min(a.length,e.length));if(d==="")return c;e.toLowerCase().indexOf(d.toLowerCase())===0?(c.push(d),a=a.slice(d.length)):c.push("")}return c};return c}(b("React").Component);e.exports=a}),null);
__d("FacebarTypeaheadHighlightedText.react",["BrowseFacebarHighlighter","React","TextWithEmoticons.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.renderHighlight=function(a,c){if((c+1)%3===0)return b("React").createElement("span",{className:"highlightNode",key:c},b("React").createElement(b("TextWithEmoticons.react"),{text:a}));else return b("React").createElement(b("TextWithEmoticons.react"),{text:a})};d.renderParts=function(){var a=this.props.text,c=this.props.tokens;if(c!=null&&a!==""){c=b("BrowseFacebarHighlighter").createRegex(c);c=a.split(c);return c.map(this.renderHighlight)}else return b("React").createElement(b("TextWithEmoticons.react"),{text:a})};d.render=function(){return b("React").createElement("span",this.props,this.renderParts())};return c}(b("React").Component);e.exports=a}),null);
__d("TimelineFilterOptions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ALL:"all",REVIEW:"review",TAG_REVIEW:"tagreview",FACE_ALERTS:"photoreview",POSTS_AND_APPS:"postsandapps",LOCATION:"location",PHOTOS:"photos",TAGGED_PHOTOS:"taggedphotos",OWN_PHOTOS:"ownphotos",OWN_VIDEOS:"ownvideos",LIKES:"likes",LIKED_INTERESTS:"likedinterests",LIKED_POSTS:"likedposts",FOLLOWERS:"followers",ARCHIVED_STORIES:"archivedstories",STORY_CARDS:"storycards",GROUPS:"groups",GROUP_MEMBERSHIP:"groupmembership",GROUP_POSTS:"groupposts",GROUP_SEARCH:"groupsearch",YOUR_EVENTS:"yourevents",INVITED_EVENTS:"invitedevents",EVENT_RSVPS:"eventrsvps",HIDDEN:"hidden",SPAM:"spam",ALL_APPS:"apps",SEARCH:"search",VIDEO_SEARCH:"videosearch",VIDEO_WATCH:"videowatch",ASSISTANT_HISTORY:"voiceinteractions",ADS:"ads",SECURITYLOGIN:"securitylogin",ACTIVE_SESSIONS:"activesessions",LOGINS_LOGOUTS:"loginslogouts",RECOGNIZED_DEVICES:"recognizeddevices",ACCOUNT_ACTIVITY:"accountactivity",ADMINISTRATIVE_RECORDS:"administrativerecords",YOUR_PLACES:"yourplaces",YOUR_APPS:"yourapps",FRIENDSHIP_ACTIVITY:"friendshipactivity",FRIENDS:"friends",REMOVED_FRIENDS:"removedfriends",RECEIVED_FRIEND_REQUESTS:"receivedfriendrequests",SENT_FRIEND_REQUESTS:"sentfriendrequests",RESPONSE:"response",CLUSTER:"cluster",APP:"app",STORIES:"stories",COLLECTION_ITEM:"citem",FITNESS:"fitness",OG_VIDEO:"ogvideo",SAVED_FOR_LATER:"saved",NOW:"now",VIDEO_POLLS_VOTED:"videopollsvoted",TALENT_SHOW_AUDITION_VOTED:"talentshowauditionvoted",CODEGEN_DO_NOT_USE:"codegendonotuse"})}),null);
__d("FacebarTypeaheadItem.react",["cx","Badge.react","DOM","DOMContainer.react","FacebarGlobalOptions","FacebarJSConstants","FacebarTypeaheadDebugPane.react","FacebarTypeaheadDiffText.react","FacebarTypeaheadHighlightedText.react","Image.react","React","TimelineFilterOptions","TypeaheadCanvasConfig","URI","XUICloseButton.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){a=a.getTypePart(0);return a?"fragment"+a.charAt(0).toUpperCase()+a.substr(1):"fragment"}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.renderHighlightedFragment=function(a,c){return b("React").createElement(b("FacebarTypeaheadHighlightedText.react"),{className:h(a),key:c,text:a.getText(),tokens:d.props.highlight})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.renderDiffedFragment=function(a,c,d){return b("React").createElement(b("FacebarTypeaheadDiffText.react"),{className:h(a),key:d,prefix:c,text:a.getText()})};d.renderText=function(){__p&&__p();var a=this,c=this.props.result,d=c.isLocal,e=c.displayStructure!=null?c.displayStructure:c.structure;e=e.toArray();var f=this.props.prefix;if(!c.isSeeMore&&f!=null&&f.trim()!==""){var g=b("FacebarTypeaheadDiffText.react").generatePrefixes(f,e);d&&(g=[]);return e.map(function(b,c){g[c]||(g[c]="");return a.renderDiffedFragment(b,g[c],c)})}else return e.map(this.renderHighlightedFragment)};d.renderBadge=function(){__p&&__p();var a=this.props.result;if(a.category&&a.category.toString().toLowerCase()===b("TypeaheadCanvasConfig").category_games.toLowerCase()&&b("TypeaheadCanvasConfig").in_games_v1)return b("React").createElement(b("Badge.react"),{type:"game_blue",size:"medium"});else if(a.is_verified)return b("React").createElement(b("Badge.react"),{type:"verified",size:"medium"});else if(a.is_work_bot)return b("React").createElement(b("Badge.react"),{type:"bot",size:"medium"});else if(a.is_work_foreign_entity)return b("React").createElement(b("Badge.react"),{type:"work_non_coworker"});else if(a.pages_verified_badge===1)return b("React").createElement(b("Badge.react"),{type:"page_gray_check",size:"medium"});else if(a.is_interest_community)return b("React").createElement(b("Badge.react"),{type:"interest_community",size:"medium"});return null};d.renderIcon=function(){var a=this.props.result,c=a.icon_class;if(c)return b("React").createElement("span",{className:"_k83"},b("React").createElement("span",{className:c}));else if(a.photo)return b("React").createElement(b("Image.react"),{className:"_20h",alt:"",src:a.photo});return null};d.renderSecondaryIcon=function(){var a=this.props.result;return!a.isRecent&&a.isInjectedSuggestion?b("React").createElement("span",{className:"_3kxl"}):null};d.renderUnseenPosts=function(){if(this.props.recentSearchItem&&this.props.result.unseen_posts){var a=b("React").createElement(b("DOMContainer.react"),null,b("DOM").create("span",{className:""}," \xb7 ")),c=b("React").createElement(b("DOMContainer.react"),null,b("DOM").create("span",{className:""},this.props.result.unseen_posts.markup));return b("React").createElement("span",{className:"_2tb-"},a,c)}return null};d.renderLabel=function(){var a=" \xb7 ",c=this.props.result;c="_53ad"+(this.props.valign&&this.props.token&&this.props.token.props&&this.props.token.props.text.length>0?" _55y-":"")+(!c.category&&!c.subtext?" _2vzo":"")+(!c.category&&!!c.subtext||c.category&&c.category.toString().indexOf(a)<0&&!c.subtext?" _2vzp":"")+(c.category&&!!c.subtext||c.category&&c.category.toString().indexOf(a)>0?" _2vzq":"");a=this.renderUnseenPosts();c=b("React").createElement("span",{className:c},this.renderText(),this.props.hideBadge?null:this.renderBadge(),a,this.props.token);a="_7gk"+(this.props.message?" _5byz":"");return b("React").createElement("span",{className:a},c,this.props.message)};d.renderMain=function(){var a=b("React").createElement("a",{className:"_6i1",href:this.props.result.uri},b("React").createElement("span",null,this.props.icon||this.renderIcon(),this.renderLabel(),this.renderSecondaryIcon()));this.props.result.isAsync&&(a=b("React").createElement("a",{className:"_6i1",href:"#",ajaxify:this.props.result.asyncURI,rel:"async"},b("React").createElement("span",null,this.props.icon||this.renderIcon(),this.renderLabel(),this.renderSecondaryIcon())));return b("React").createElement("span",{className:"_205",rel:"ignore"},this.renderActivityLogXButton(),a)};d.renderActivityLogXButton=function(){if(this.props.result.keywordBootstrapType!==b("FacebarJSConstants").keywordBootstrapTypes.recent)return null;var a=new(b("URI"))("/me/allactivity");a.setQueryData({privacy_source:"activity_log",log_filter:b("TimelineFilterOptions").SEARCH});return b("React").createElement(b("XUICloseButton.react"),{size:"medium",className:"_2d9t",href:a})};d.renderDebug=function(){return this.props.result.debug?b("React").createElement(b("FacebarTypeaheadDebugPane.react"),{result:this.props.result}):null};d.render=function(){var a=this.props.result;a="_202 _5bl2 _6_k _1et7 _28vg"+(a.isCelebrity?" _5g-n":"")+(a.isSeeMore?" _qbs":"")+(a.isInjectedSuggestion?" _3kxm":"")+(a.isTrending||a.isHappeningNow?" _5g-o":"")+(a.isRecent?" _jsd":"")+(a.isLocal?" _1821":"")+(a.isFootball?" _1822":"")+(a.isHashtag?" _4z1b":"")+(a.isPhotos?" _4z1c":"")+(a.isVideos?" _4z1d":"")+(a.isInvalidated||a.is_inactive?" _44vm":"");return b("React").createElement("li",{className:b("joinClasses")(a,this.props.className),onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,role:"row"},b("React").createElement("div",{role:"gridcell"},this.renderMain(),this.renderDebug()))};return c}(b("React").Component);a.defaultProps={valign:!0};e.exports=a}),null);
__d("FacebarTypeaheadToken.react",["cx","FacebarTypeaheadHighlightedText.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=" \xb7 ";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props.text.map(function(a){return String(a)});this.props.limit&&c.splice(this.props.limit);c.forEach(function(b,d){(d!==0||a.props.leadingMiddot)&&(c[d]=h+b)});var d=c.shift(),e;d!=null&&(e=b("React").createElement(b("FacebarTypeaheadHighlightedText.react"),{className:this.props.mainClass,tokens:this.props.highlight,text:d}));var f;c.length>0&&(f=b("React").createElement(b("FacebarTypeaheadHighlightedText.react"),{tokens:this.props.highlight,className:"_53ab",text:c.join("")}));d=this.props.innerClass||"_53aa";return b("React").createElement("span",{className:"_53a9"},b("React").createElement("span",{className:d},e,f))};return c}(b("React").Component);e.exports=a}),null);
__d("FacebarTypeaheadTokenText",["FbtResultBase","HTML","getElementText"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="\xb7";function h(a){if(a instanceof b("FbtResultBase"))return a.toString();else if(typeof a==="object")return b("getElementText")(b("HTML")(a).getRootNode());else return String(a)}function i(a){return h(a).split(g).map(function(a){return a.trim()})}function j(a){var b={};return a.filter(function(a){var c=String(a),d=!b[c];b[c]=!0;return a!=null&&a!==""&&d})}a={textForEntity:function(a,b){b=a.category||b[a.type]||"";var c=a.subtext||"";a=a.boldedSubtext||"";b=i(b).concat(i(a)).concat(i(c));return j(b)},text:function(a){return j(i(a))}};e.exports=a}),null);
__d("FacebarTypeaheadEntityItem.react",["ix","cx","CurrentUser","FacebarGlobalOptions","FacebarTypeaheadItem.react","FacebarTypeaheadToken.react","FacebarTypeaheadTokenText","Image.react","React","RoundImage.react","TypeaheadFacepileX.react","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.renderToken=function(){return b("React").createElement(b("FacebarTypeaheadToken.react"),{highlight:this.getHighlightTokens(),text:b("FacebarTypeaheadTokenText").textForEntity(this.props.result,{}),category:this.props.result.category})};d.renderIcon=function(){__p&&__p();var a=this.props.result;if(a.isNullState){var c=a.icon_class?b("React").createElement("span",{className:a.icon_class}):b("React").createElement(b("Image.react"),{className:"_20h",src:a.photo});return b("React").createElement("span",null,c)}if(b("FacebarGlobalOptions").useTypeaheadUICircleUsersPages&&(a.type==="user"||a.type==="page")&&a.photo)return b("React").createElement(b("RoundImage.react"),{className:"_20h",src:a.photo});if(b("FacebarGlobalOptions").useTypeaheadUICoverPhoto&&(a.type==="group"||a.type==="event")&&a.photo)return b("React").createElement(b("Image.react"),{className:"_20h _7a55",src:a.photo});if(a.size>1&&a.photos)return b("React").createElement(b("TypeaheadFacepileX.react"),{className:"_51l_",photos:a.photos,size:a.size});else if(a.photo)return b("React").createElement(b("Image.react"),{className:"_20h",alt:"",src:a.photo});else if(b("CurrentUser").isWorkUser()&&!a.isInviteCoworkers)return b("React").createElement(i,{result:a});return null};d.getHighlightTokens=function(){if(this.props.result.original_query==null)return null;var a=this.props.result.original_query.toString().trim(),b=a.split(" ");b=b.length>1?[a].concat(b):[a];return b.filter(function(a){return a!==""})};d.render=function(){var a=babelHelpers["extends"]({},this.props,{icon:this.renderIcon(),token:this.renderToken(),highlight:this.getHighlightTokens(),valign:!0});return b("React").createElement(b("FacebarTypeaheadItem.react"),a)};return c}(b("React").Component);function i(a){__p&&__p();a=a.result;var c="_20h",d=null;switch(a.type){case"user":d=g("489501");break;case"page":a.category_type==="MEETING_ROOM"?d=g("794183"):d=g("669566");break;case"group":d=g("542240");break;case"event":d=g("534788");break}return d==null?null:b("React").createElement("div",{className:c},b("React").createElement(b("Image.react"),{className:"_7g-z",src:d}))}e.exports=a}),null);
__d("FacebarTestId",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({STRUCTURED_RICH:"facebar-structured-rich",TYPEAHEAD_VIEW:"facebar-typeahead-view",BROWSE_ERROR:"facebar-browse-error",ROOT:"facebar_root",INPUT_TEXT:"facebar_input_area",SEARCH_BUTTON:"facebar_search_button",RECENT_HISTORY_EDIT:"recent_searches_edit",RECENT_HISTORY_CLEAR:"recent_searches_clear",RECENT_HISTORY_CONFIRM:"recent_searches_clear_confirm",RECENT_SEARCHES_SUGGESTIONS:"facebar_recent_searches_suggestions",SIMPLE_SEARCH_TYPEAHEAD_VIEW:"simple_search_typeahead_view"})}),null);
__d("FacebarTypeaheadKeywordItem.react",["cx","fbt","CurrentUser","FacebarTypeaheadItem.react","FacebarTypeaheadToken.react","FacebarTypeaheadTokenText","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a="";b("CurrentUser").isWorkUser()?a=[h._("Search Workplace")]:a=[h._("Search Facebook")];this.props.result.isTrending?a.push(h._("Trending")):this.props.result.type=="related"&&(a=[h._("Related search")]);var c=b("FacebarTypeaheadTokenText").textForEntity(this.props.result,{});c!=null&&c.length&&(a=c);c=c!=null&&(c.length>1||this.props.result.boldedSubtext!=null);var d=this.props.result.isSeeMore;d=d?null:b("React").createElement(b("FacebarTypeaheadToken.react"),{text:a,mainClass:(c?"_4jt7":"")+(c&&this.props.result.isSpecialIntent&&!this.props.result.isLocal?" _21z1":"")+(c&&this.props.result.isLocal?" _2xfl":"")+(c&&this.props.result.isPhotos?" _21z2":"")+(c&&this.props.result.isVideos?" _21z4":"")+(c&&this.props.result.isSingleState&&this.props.result.exactMatchKeyword&&!this.props.result.isLocal?" _21z5":""),innerClass:"_53ab"});return b("React").createElement(b("FacebarTypeaheadItem.react"),babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_5d77"),token:d,prefix:this.props.result.query_string.toLowerCase(),showSecondaryIcon:!1}))};return c}(b("React").Component);e.exports=a}),null);
__d("FacebarTypeaheadMessengerThreadIcon.react",["cx","React","WorkGalahadEntityHeaderPicture.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();a.className;a=a.result;a=a.participantImgs;if(!Array.isArray(a))return null;if(a.length===1)return h(a[0],0,32);a=a.slice(0,2);return b("React").createElement("div",{className:"_7ev9"},a.map(function(a,b){return h(a,b,23)}))}function h(a,c,d){return b("React").createElement("div",{className:"_7eva",key:c},b("React").createElement(b("WorkGalahadEntityHeaderPicture.react"),{src:a,href:null,type:"circle",size:d}))}e.exports=a}),null);
__d("FacebarTypeaheadMessengerThreadItem.react",["cx","fbt","CurrentUser","FacebarTypeaheadItem.react","FacebarTypeaheadMessengerThreadIcon.react","FacebarTypeaheadToken.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=babelHelpers["extends"]({},this.props,{icon:b("React").createElement(b("FacebarTypeaheadMessengerThreadIcon.react"),{result:this.props.result,className:"_20h",size:36}),token:this.renderToken(),valign:!0});return b("React").createElement(b("FacebarTypeaheadItem.react"),a)};d.renderToken=function(){var a=[h._("Chat")];return b("React").createElement(b("FacebarTypeaheadToken.react"),{text:a,category:this.props.result.category})};return c}(b("React").Component);e.exports=a}),null);
__d("FacebarTypeaheadNodeItem.react",["DOM","React","ReactDOM","isElementNode"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.result.node;return b("React").createElement("li",this.props,b("isElementNode")(a)?null:a)};d.attachNode=function(){var a=b("ReactDOM").findDOMNode(this);if(a==null)return;var c=this.props.result.node;b("isElementNode")(c)&&b("DOM").setContent(a,c)};d.componentDidMount=function(){this.attachNode()};d.componentDidUpdate=function(){this.attachNode()};d.shouldComponentUpdate=function(a){return this.props.result.node!==a.result.node};return c}(b("React").Component);e.exports=a}),null);
__d("FacebarTypeaheadRecentItem.react",["cx","FacebarGlobalOptions","FacebarTypeaheadItem.react","FacebarTypeaheadToken.react","Image.react","React","RoundImage.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("FacebarTypeaheadItem.react"),babelHelpers["extends"]({},this.props,{token:this.renderToken(),icon:this.renderIcon(),recentSearchItem:!0}))};d.renderToken=function(){return this.props.result.subtext?b("React").createElement(b("FacebarTypeaheadToken.react"),{text:[this.props.result.subtext]}):null};d.renderIcon=function(){var a=this.props.result;if(b("FacebarGlobalOptions").useTypeaheadUICircleUsersPages&&(a.type==="user"||a.type==="page")&&a.photo)return b("React").createElement(b("RoundImage.react"),{className:"_20h",src:a.photo});if(b("FacebarGlobalOptions").useTypeaheadUICoverPhoto&&(a.type==="group"||a.type==="event")&&a.photo)return b("React").createElement(b("Image.react"),{className:"_20h _7a55",src:a.photo});if(!b("FacebarGlobalOptions").allowGrammar)return b("React").createElement(b("Image.react"),{className:"_20h",src:a.photo});var c=a.icon_class?b("React").createElement("span",{className:a.icon_class}):b("React").createElement(b("Image.react"),{className:"_20h",src:a.photo});return b("React").createElement("span",{className:a.icon_class?"_k83":""},c)};return c}(b("React").Component);e.exports=a}),null);
__d("XTypeaheadReportController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/typeahead/search_suggestion_report/",{search_suggestion:{type:"String",required:!0},typed_query:{type:"String",required:!0},__asyncDialog:{type:"Int"}})}),null);
__d("FacebarTypeaheadSimpleItem.react",["ix","cx","fbt","AbstractButton.react","FacebarGlobalOptions","FacebarJSConstants","FacebarRemoveRecentSearchButton.react","FBLogger","Image.react","Locale","React","RoundImage.react","SearchSuggestionsHighlighter","XTypeaheadReportController","fbglyph","gkx","joinClasses","killswitch","mayHaveConnectedCharacters","qex"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a){__p&&__p();a=a.result;var c=a.displayStructure!=null?a.displayStructure:a.structure;c=c!=null?c.toString():"";var d=c;a.keywordType!==b("FacebarJSConstants").keywordTypes.escape&&!a.isNullState&&(c=c.toLowerCase());var e=a.query_string?a.query_string.toLowerCase():null;if(!b("killswitch")("SEARCH_WWW_DISABLE_TYPEAHEAD_HIGHLIGHTING")&&!b("mayHaveConnectedCharacters")(c)&&e!=null&&!a.isSeeMore)try{c=b("SearchSuggestionsHighlighter").highlightNonMatch(e,c)}catch(a){b("FBLogger")("search").catching(a).mustfix("Error highlighting search suggestion (%s) for query (%s)",d,e)}return b("Locale").isRTL()?b("React").createElement("div",{className:"_19bk"},c,"\u200e"):b("React").createElement("div",{className:"_19bk"},c)}function k(a){a=a.result;if(!a.isNullState||!b("FacebarGlobalOptions").logSERPClickAsRecentSearch)return null;var c="_19bl",d;a.photo!=null&&(d=b("React").createElement(b("RoundImage.react"),{className:b("joinClasses")(c,"_19bm"),src:a.photo,width:"24",height:"24"}));d==null&&(d=b("React").createElement(b("Image.react"),{className:c,src:g("126434"),width:"16",height:"16"}));return d!=null?b("React").createElement("div",{className:"_19bp"},d):null}function a(a){var c=a.onClick,d=a.onMouseEnter,e=a.onMouseDown;a=a.result;var f;if(b("gkx")("678803")&&!a.isNullState&&!a.isSeeMore){var g=b("XTypeaheadReportController").getURIBuilder().setString("search_suggestion",String(a.text)).setString("typed_query",a.query_string).getURI();f=b("React").createElement("div",{role:"gridcell"},b("React").createElement(b("AbstractButton.react"),{className:"_6auy",href:"#",ajaxify:g,image:b("React").createElement("div",{className:"_7h01"}),label:i._("Give feedback for suggestions item in typeahead"),role:"link",labelIsHidden:!0,rel:"dialog"}))}g=b("qex")._("889797")&&a.isNullState?b("React").createElement("div",{role:"gridcell"},b("React").createElement(b("FacebarRemoveRecentSearchButton.react"),{recentSearch:String(a.text)})):null;return b("React").createElement("div",null,b("React").createElement("li",{className:"_202 _19bq"+(a.isSeeMore?" _19br":""),onMouseDown:e,onMouseEnter:d,role:"row"},b("React").createElement("div",{role:"gridcell",className:"_7g_o"},b("React").createElement("a",{onClick:c,href:a.uri,className:"_19bs"},b("React").createElement(k,{result:a}),b("React").createElement(j,{result:a}))),f,g))}e.exports=a}),null);
__d("FacebarTypeaheadList.react",["csx","cx","fbt","invariant","CSS","CurrentUser","FacebarGlobalOptions","FacebarJSConstants","FacebarTypeaheadEntityItem.react","FacebarTypeaheadKeywordItem.react","FacebarTypeaheadMessengerThreadItem.react","FacebarTypeaheadNodeItem.react","FacebarTypeaheadRecentItem.react","FacebarTypeaheadSimpleItem.react","JSResource","LoadingIndicator.react","MercuryThreadIDMap","React","StaticContainer.react","gkx","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("lazyLoadComponent")(b("JSResource")("WorkGalahadSearchTypeaheadEntityItem.react").__setRef("FacebarTypeaheadList.react")),l=b("lazyLoadComponent")(b("JSResource")("WorkGalahadSearchTypeaheadKeywordItem.react").__setRef("FacebarTypeaheadList.react")),m=b("lazyLoadComponent")(b("JSResource")("WorkGalahadSearchTypeaheadMessengerItem.react").__setRef("FacebarTypeaheadList.react")),n={related:b("FacebarTypeaheadKeywordItem.react")};n[b("FacebarJSConstants").browseTypes.keyword]=b("FacebarTypeaheadKeywordItem.react");n[b("FacebarJSConstants").keywordType]=b("FacebarTypeaheadKeywordItem.react");n[b("FacebarJSConstants").messengerThreadsType]=b("FacebarTypeaheadMessengerThreadItem.react");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.handleMouseLeave=function(){b("FacebarGlobalOptions").facebarTypeaheadMouseoutHighlight&&d.props.onClearHighlight()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getItemComponentConstructor=function(a){__p&&__p();if(this.props.isGalahadSearch||this.props.isNewClassicSearch)if(a.type==="keyword")return l;else if(a.type===b("FacebarJSConstants").messengerThreadsType)return m;else return k;if(!b("CurrentUser").isWorkUser())return b("FacebarTypeaheadSimpleItem.react");if(a.node)return b("FacebarTypeaheadNodeItem.react");if(a.isRecent)return b("FacebarTypeaheadRecentItem.react");if(a.results_set_type===b("FacebarJSConstants").browseTypes.keyword)return b("FacebarTypeaheadKeywordItem.react");return a.type!=null&&n[a.type]?n[a.type]:b("FacebarTypeaheadEntityItem.react")};d.renderItem=function(a){__p&&__p();var c=this,d=this.getItemComponentConstructor(a),e;a.type===b("FacebarJSConstants").keywordType?e=a.query_string+a.semantic+a.boldedSubtext+a.subtext+a.fromCache+(a.isSeeMore?"see_more":"")+(a.keywordBootstrapType?a.keywordBootstrapType:"")+(a.uid!=null?a.uid:"")+a.isInvalidated:(e=a.semantic||a.uid||a.tuid,e+=a.isNullState+a.category+a.subtext,e+=a.query_string);b("FacebarGlobalOptions").dymOnEchoOnly&&(a.query_string!==a.text?a.uri.addQueryData({em:"1"}):a.uri.removeQueryData("em"));b("FacebarGlobalOptions").noDymOnSingleState&&(a.isSingleState&&a.uri.addQueryData({em:"1"}));b("FacebarGlobalOptions").noDymOnNullState&&(a.isNullState&&a.uri.addQueryData({em:"1"}));d=b("React").createElement(b("React").Suspense,{fallback:null,key:e},b("React").createElement(d,{highlighted:a===this.props.highlightedResult,result:a,onClick:function(b){return c.handleClick(b,a)},onMouseEnter:function(){return c.handleMouseEnter(a)},isNewClassicSearch:this.props.isNewClassicSearch}));if(this.props.controlledHighlight)return d;else return b("React").createElement(b("StaticContainer.react"),{key:e},d)};d.renderFooter=function(){var a="_3su"+(this.props.loading?"":" hidden_elem");return b("React").createElement("li",{className:a},b("React").createElement("div",{className:"_21f"},i._("Finding results"),b("React").createElement(b("LoadingIndicator.react"),{size:"medium",color:"white"})))};d.render=function(){var a=this.props.results,c=[];a&&a.forEach(function(a){c.push(this.renderItem(a))},this);return b("React").createElement("div",null,b("React").createElement("ul",{id:"facebar_typeahead_view_list",className:"_21c"+(this.props.isKeywordList?" _2yob":""),"data-click":"Search",onMouseLeave:this.handleMouseLeave},c,this.renderFooter()))};d.handleClick=function(a,c){__p&&__p();a.target instanceof HTMLElement||j(0,531);if(b("CSS").matchesSelector(a.target,"._2d9t"))return;if(!a.nativeEvent.isMiddleClick()&&!a.nativeEvent.getModifiers().any){if(c.type===b("FacebarJSConstants").messengerThreadsType){var d=b("MercuryThreadIDMap").get(),e=[c.serverThreadID,c.clientThreadID];d.setServerIDToClientID.apply(d,e);d.setDeprecatedServerIDToClientID.apply(d,e)}this.props.onSelect(c);a.preventDefault()}};d.handleMouseEnter=function(a){this.props.onHighlight(a)};d.componentDidUpdate=function(a){this.props.onRender()};d.shouldComponentUpdate=function(a){return this.props.loading!==a.loading||this.props.results!==a.results||this.props.highlightedResult!==a.highlightedResult};return c}(b("React").Component);e.exports=a}),null);
__d("FacebarTypeaheadGSV2List.react",["cx","fbt","FacebarTestId","FacebarTypeaheadList.react","LeftRight.react","Link.react","React","TimelineFilterOptions","URI","WorkGalahadChannelItemChromeList.react","WorkGalahadNavHeader.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.copyProps=function(a){return babelHelpers["extends"]({accessibilityElement:this.props.accessibilityElement,onClearHighlight:this.props.onClearHighlight,onHighlight:this.props.onHighlight,onRender:this.props.onRender,onSelect:this.props.onSelect,isGalahadSearch:this.props.isGalahadSearch,isNewClassicSearch:this.props.isNewClassicSearch},a,{loading:this.props.isGalahadSearch?!1:a.loading})};d.render=function(){__p&&__p();var a=this.props.listProps,c=this.copyProps(Object.assign({},a,{isKeywordList:!0})),d=this.copyProps(a);a=this.copyProps(Object.assign({},a,{isKeywordList:!0}));c.results=this.props.isNullState?this.props.keywordResults.filter(function(a){return!a.isRecent}):this.props.keywordResults;a.results=this.props.isNullState?[]:this.props.results.filter(function(a){return a.isSeeMore});d.results=this.props.entityResults.filter(function(a){return!a.isRecent});a.results.length>0||this.props.isNullState?(c.loading=!1,d.loading=!1):d.results.length===0?d.loading=!1:c.loading=!1;var e=!!d.results.length,f=!!c.results.length,g=!1,i=this.copyProps(d);this.props.isNullState&&(i.results=this.props.entityResults.filter(function(a){return!!a.isRecent}),g=!!i.results.length);var j=new(b("URI"))("/me/allactivity").addQueryData({privacy_source:"activity_log",log_filter:b("TimelineFilterOptions").SEARCH}),k=h._("Recent Searches");k=b("React").createElement("div",{key:"recent",className:g?"":"hidden_elem"},this.props.isGalahadSearch?b("React").createElement(b("WorkGalahadNavHeader.react"),{title:k,indented:!1,action:{href:j,title:h._("Edit")}}):b("React").createElement(b("LeftRight.react"),{className:"_3zsi _1ejo"},k,b("React").createElement(b("Link.react"),{href:j,"data-testid":b("FacebarTestId").RECENT_HISTORY_EDIT},h._("Edit"))),g?b("React").createElement(b("FacebarTypeaheadList.react"),i):null);j=b("React").createElement("div",{key:"keyword",className:this.props.isNullState||!f?"hidden_elem":""},this.props.isNullState?null:b("React").createElement(b("FacebarTypeaheadList.react"),c));g=b("React").createElement("div",{key:"entity",className:e?"":"hidden_elem"},b("React").createElement(b("FacebarTypeaheadList.react"),d));i=[];this.props.isNullState?i=[j,k,g]:i=[j,g];e=b("React").createElement("div",{className:"_3-xd"+(this.props.seeMoreResult==null||this.props.isNullState?" hidden_elem":"")},b("React").createElement(b("FacebarTypeaheadList.react"),a));return b("React").createElement("div",{className:"_21r"},this.props.isGalahadSearch?e:null,i,b("React").createElement("div",{className:!this.props.isNullState||!f?"hidden_elem":""},this.props.isNullState?b("React").createElement(b("FacebarTypeaheadList.react"),c):null),this.props.isGalahadSearch?null:e,this.props.isGalahadSearch&&this.props.listProps.loading?b("React").createElement(b("WorkGalahadChannelItemChromeList.react"),{type:"search",amount:1}):null)};return c}(b("React").Component);e.exports=a}),null);
__d("XWarmUserRequestArgsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/search/browse/warm/requestargs/",{query:{type:"String"},csid:{type:"String"}})}),null);