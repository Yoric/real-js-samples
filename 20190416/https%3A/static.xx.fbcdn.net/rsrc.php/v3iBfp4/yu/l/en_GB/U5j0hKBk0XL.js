if (self.CavalryLogger) { CavalryLogger.start_js(["kAAh5"]); }

__d("BrowseTopFiltersNone",["cx","CSS"],(function(a,b,c,d,e,f,g){a={init:function(){b("CSS").removeClass(document.body,"_4dik")}};e.exports=a}),null);
__d("XPlatformXOutableElementController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/platform/async/xoutelement/",{type:{type:"Enum",required:!0,enumType:0},fbid:{type:"Int",required:!0}})}),null);
__d("PlatformElementXOut.react",["AsyncRequest","DOM","DOMContainer.react","GamesXOut.react","React","ReactDOM","XPlatformXOutableElementController"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){var a=b("XPlatformXOutableElementController").getURIBuilder().setEnum("type",d.props.type).setInt("fbid",d.props.fbid).getURI();new(b("AsyncRequest"))(a).setMethod("POST").send();a=b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d)).parentNode.parentNode;b("ReactDOM").unmountComponentAtNode(a);b("DOM").remove(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=b("React").createElement(b("DOMContainer.react"),null,this.props.domChild);return b("React").createElement(b("GamesXOut.react"),{onClick:this.$1},a)};return c}(b("React").Component);c.propTypes={type:a.string.isRequired,fbid:a.string.isRequired,domChild:a.object.isRequired};e.exports=c}),null);
__d("FacebarResultStoreUtils",["FacebarGlobalOptions","FacebarJSConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getQueryFeatures:function(a){__p&&__p();var c={};if(b("FacebarGlobalOptions").enableBootstrapRanking){a.raw_text&&(c.FEATURE_QUERY_LENGTH=a.raw_text.length);if(a.tokens){c.FEATURE_QUERY_TOKENS=a.tokens.length;c.FEATURE_QUERY_TOKEN_LENGTH_SUM=0;for(var d=0;d<a.tokens.length;d++)c.FEATURE_QUERY_TOKEN_LENGTH_SUM+=a.tokens[d].length}}return c},addFeatures:function(a,b,c,d,e,f){__p&&__p();if(!a.features)return;a.features={FEATURE_QUERY_LENGTH:d.FEATURE_QUERY_LENGTH,FEATURE_QUERY_TOKENS:d.FEATURE_QUERY_TOKENS,FEATURE_QUERY_TOKEN_LENGTH_SUM:d.FEATURE_QUERY_TOKEN_LENGTH_SUM};a.features.FEATURE_IS_EXACT_NAME_MATCH=e;a.features.FEATURE_IS_STOP_WORD_MATCH=f;if(b&&b.length>0){d=b.split(" ").length;e=0;for(var f=0;f<a.termMatches.length;++f)b.search(a.termMatches[f])>=0&&e++;a.features.FEATURE_TITLE_TOKEN_MATCH_FRACTION=e/d}if(c.tokens&&c.tokens.length>0){f=b.search(c.tokens[0]);a.features.FEATURE_FIRST_TERM_MATCH_POSITION=f;a.features.FEATURE_FIRST_TERM_MATCH_TOKEN=b.substring(0,f+c.tokens[0].length).split(" ").length;a.termMatches.some(function(b){if(b.search(c.tokens[0])===0){a.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=c.tokens[0].length/b.length;return!0}return!1});a.features.FEATURE_IN_ORDER_MATCH=1;c.tokens.length>1&&(f=b.search(c.tokens[1]),a.features.FEATURE_SECOND_TERM_MATCH_POSITION=f,a.features.FEATURE_SECOND_TERM_MATCH_TOKEN=b.substring(0,f+c.tokens[1].length).split(" ").length,a.termMatches.some(function(b){if(b.search(c.tokens[1])===0){a.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=c.tokens[0].length/b.length;return!0}return!1}),a.features.FEATURE_SECOND_TERM_MATCH_TOKEN<a.features.FEATURE_FIRST_TERM_MATCH_POSITION&&(a.features.FEATURE_IN_ORDER_MATCH=0))}return a},processEntityResult:function(a,c,d,e,f,g,h,i,j){a={semantic:c.toString(),structure:[{type:a===b("FacebarJSConstants").keywordType?a:"ent:"+a,text:d,uid:c}],type:a,cost:e,cache_id_length:0,features:[]};a.tuid=JSON.stringify({semantic:a.semantic,structure:a.structure});b("FacebarGlobalOptions").enableBootstrapRanking&&(a.termMatches=h[c.toString()],a=this.addFeatures(a,d.toLowerCase(),f,g,i,j));return a},getRawTextFromStructured:function(a){a=a.map(function(a){return a.getText()});return a.join("")},getTextFromResult:function(a){a=a.structure;var b="";a.forEach(function(a){b+=a.text});return b}};e.exports=a}),null);
__d("HashtagParser",["URLMatcher","getHashtagRegex"],(function(a,b,c,d,e,f){__p&&__p();var g=100,h=30,i=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function a(a){var b=u(a),c=0,d=0;return j(a).map(function(a){while(c<b.length){var e=b[c],f=e.offset-d;if(f<a.offset)d+=e.token.length-e.name.length,c++;else break}return{marker:a.marker,tag:a.hashtag,rawOffset:a.offset+d,offset:a.offset}})}function c(a){return k(a,p(a))}function j(a){var b=w(a);return k(b,l(a,b))}function k(a,b){return n(a).slice(0,h).filter(function(a){var c=r(a.offset,a.hashtag.length,b);return!c&&a.hashtag.length<=g})}function l(a,b){return q(o(a),p(b))}var m=b("getHashtagRegex")();function n(a){var b=[];a.replace(m,function(a,c,d,e,f){b.push({marker:d,hashtag:e,offset:f+c.length})});return b}function o(a){return x(a).map(function(a){return[a.offset,a.name.length]})}function p(a){var c=[],d,e=0;while(d=b("URLMatcher").permissiveMatch(a)){var f=a.indexOf(d);c.push([e+f,d.length]);a=a.substring(f+d.length);e+=f+d.length}return c}function q(a,b){var c=[],d=0,e=0,f=0;while(d<a.length&&e<b.length)a[d][0]>b[e][0]?c[f++]=b[e++]:c[f++]=a[d++];return c.concat(a.slice(d),b.slice(e))}function r(a,b,c){if(!c)return!1;var d=t(c,a);return s(a,b,c,d)||s(a,b,c,d+1)}function s(a,b,c,d){if(!c[d])return!1;var e=c[d][0];c=c[d][1];return!(a+b-1<e||a>e+c-1)}function t(a,b){var c=0,d=a.length-1;while(c<=d){var e=Math.floor((c+d)/2),f=a[e][0];if(f==b)return e;else f<b?c=e+1:d=e-1}return d}function u(a){var b=[];a.replace(i,function(a,c,d,e,f){b.push({token:a,id:c,type:d,name:e,offset:f})});return b}function v(a){return a?a.replace(/\\([^\\])/g,"$1").replace(/\\\\/g,"\\"):null}function w(a){return a.replace(i,function(a,b,c,d,e){return v(d)})}function x(a){var b=0,c=0;return u(a).map(function(d){var e=a.indexOf(d.token,c);c=e+1;e-=b;var f=v(d.name);b+=d.token.length-f.length;if(e>=0)return{id:d.id,name:f,type:d.type,offset:e}})}d={};d.parse=a;d.parseWithoutMentions=c;e.exports=d}),null);
__d("HashtagSearchResultUtils",["fbt","FacebarResultStoreUtils","HashtagParser","HashtagSearchResultConfig","URI"],(function(a,b,c,d,e,f,g){__p&&__p();a={getHashtagFromQuery:function(a){a=b("HashtagParser").parse(a);return a&&a.length===1&&a[0].offset===0?a[0].tag:!1},makeTypeaheadResult:function(a){var c=g._("Hashtag");return{category:c,path:new(b("URI"))("/hashtag/"+a).toString(),photo:b("HashtagSearchResultConfig").image_url,rankType:null,replace_results:b("HashtagSearchResultConfig").boost_result?!0:!1,scaled_score:1,score:0,text:"#"+a,type:"hashtag_exact",uid:"hashtag:"+a}},makeFacebarEntry:function(a){var c=g._("Hashtag");return{category:c,path:new(b("URI"))("/hashtag/"+a).toString(),photo:b("HashtagSearchResultConfig").image_url,replace_results:b("HashtagSearchResultConfig").boost_result?!0:!1,text:"#"+a,type:"hashtag_exact",uid:"hashtag:"+a}},makeFacebarResult:function(a){var c=b("FacebarResultStoreUtils").processEntityResult("hashtag_exact","hashtag:"+a,"#"+a,b("HashtagSearchResultConfig").hashtag_cost);c.parse={display:[{type:"ent:hashtag_exact",uid:"hashtag:"+a}],remTokens:[],suffix:""};c.tags={hashtag:"hashtag"};return c}};e.exports=a}),null);
__d("FavIcon",["DOM"],(function(a,b,c,d,e,f){__p&&__p();var g,h,i;function j(){var a=b("DOM").scry(document.head,"link");a&&a.forEach(function(a){(a.rel.indexOf("icon")!=-1||a.rel.indexOf("shortcut icon")!=-1)&&b("DOM").remove(a)})}a={isToggledResource:function(){return i&&g instanceof HTMLLinkElement&&g.href===i?!0:!1},set:function(a){g&&b("DOM").remove(g),j(),g=b("DOM").create("link",{type:"image/x-icon",rel:"icon",href:a}),b("DOM").appendContent(b("DOM").find(document,"head"),g)},setToggleResources:function(a,b){g=document.querySelector('link[rel*=icon][href*=".ico"]'),g instanceof HTMLLinkElement&&(h=b!=null?b:g.href,i=a)},toggle:function(){if(!g||!i)return;if(g.href===h){this.set(i);return}this.set(h)},toggleSet:function(a){if(!g||!i||!h)return;a=a?i:h;g.href!==a&&this.set(a)}};e.exports=a}),null);
__d("MercuryAttachmentSnippetType",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,SHARE:null,ERROR:null,MIXED:null,GIFT:null,THIRDPARTYSTICKER:null,FILE:null,LIKE_STICKER:null});e.exports=a}),null);
__d("MercuryGiftSnippetRenderer",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={renderText:function(a,b){return a?g._("You sent a Valentine."):g._("{name} sent a Valentine.",[g._param("name",b)])}};e.exports=a}),null);
__d("P2PSnippetStringUtils",["fbt","P2PPaymentRequestStatus","P2PTransferStatus"],(function(a,b,c,d,e,f,g){__p&&__p();a={getRequestCanceledSnippet:function(a,b,c,d,e){if(a)return g._("Your request for {payment request amount} from {receiver's name} was cancelled.",[g._param("payment request amount",e),g._param("receiver's name",d)]);else if(b)return g._("{requester's name}'s request for {payment request amount} was cancelled.",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{requester's name}'s request for {payment request amount} from {receiver's name} was cancelled.",[g._param("requester's name",c),g._param("payment request amount",e),g._param("receiver's name",d)])},getRequestDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver's name} declined your request for {payment request amount}.",[g._param("receiver's name",d),g._param("payment request amount",e)]);else if(b)return g._("You declined {requester's name}'s request for {payment request amount}.",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{receiver's name} declined {sender's name}'s request for {payment request amount}.",[g._param("receiver's name",d),g._param("sender's name",c),g._param("payment request amount",e)])},getRequestSentSnippet:function(a,b,c,d,e){if(a)return g._("You requested {amount} from {requestee name}.",[g._param("amount",e),g._param("requestee name",d)]);else if(b)return g._("{requester name} requested {amount} from you.",[g._param("requester name",c),g._param("amount",e)]);else return g._("{name} requested {amount} from {requestee name}.",[g._param("name",c),g._param("amount",e),g._param("requestee name",d)])},getRequestSnippetByStatus:function(a,c,d,e,f,g){a=a||b("P2PPaymentRequestStatus").INITED;c=[c,d,e,f,g];switch(a){case b("P2PPaymentRequestStatus").DECLINED:return this.getRequestDeclinedSnippet.apply(this,c);case b("P2PPaymentRequestStatus").TRANSFER_FAILED:case b("P2PPaymentRequestStatus").CANCELED:return this.getRequestCanceledSnippet.apply(this,c)}return this.getRequestSentSnippet.apply(this,c)},getTransferCanceledSnippet:function(a,b,c,d,e){if(a)return g._("Your payment of {amount} to {receiver_name} was cancelled.",[g._param("amount",e),g._param("receiver_name",d)]);else if(b)return g._("{sender name}'s payment of {amount} was cancelled.",[g._param("sender name",c),g._param("amount",e)]);else return g._("{sender_name}'s payment of {amount} to {receiver_name} was cancelled.",[g._param("sender_name",c),g._param("amount",e),g._param("receiver_name",d)])},getTransferDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver_name} didn't accept your payment of {amount}.",[g._param("receiver_name",d),g._param("amount",e)]);else if(b)return g._("You didn't accept {sender name}'s payment of {amount}.",[g._param("sender name",c),g._param("amount",e)]);else return g._("{receiver_name} didn't accept {sender_name}'s payment of {amount}.",[g._param("receiver_name",d),g._param("sender_name",c),g._param("amount",e)])},getTransferSentSnippet:function(a,b,c,d,e){if(a)return g._("You sent {amount} to {receiver name}.",[g._param("receiver name",d),g._param("amount",e)]);else if(b)return g._("{name} sent {amount} to you.",[g._param("name",c),g._param("amount",e)]);else return g._("{sender name} sent {amount} to {receiver name}.",[g._param("sender name",c),g._param("receiver name",d),g._param("amount",e)])},getTransferSnippetByStatus:function(a,c,d,e,f,g){c=[c,d,e,f,g];d=a||b("P2PTransferStatus").PENDING_SENDER_INITED;switch(d){case b("P2PTransferStatus").CANCELED_DECLINED:return this.getTransferDeclinedSnippet.apply(this,c);case b("P2PTransferStatus").CANCELED_SENDER_RISK:case b("P2PTransferStatus").CANCELED_RECIPIENT_RISK:case b("P2PTransferStatus").CANCELED_SYSTEM_FAIL:case b("P2PTransferStatus").CANCELED_EXPIRED:case b("P2PTransferStatus").CANCELED_SAME_CARD:return this.getTransferCanceledSnippet.apply(this,c)}return this.getTransferSentSnippet.apply(this,c)}};e.exports=a}),null);
__d("MercuryAttachmentSnippetRenderer",["fbt","CurrentUser","MercuryAttachmentSnippetType","MercuryAttachmentType","MercuryAudioType","MercuryGiftSnippetRenderer","MessengerLightweightActionUtils","P2PSnippetStringUtils","StickerConstants","StoryAttachmentStyle","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getAttachmentSnippetType:function(a){__p&&__p();if(this._hasOnlyPhotos(a))return b("MercuryAttachmentSnippetType").PHOTO;if(this._hasOnlyAnimatedImages(a))return b("MercuryAttachmentSnippetType").GIF;if(this._hasOnlyVideo(a))return b("MercuryAttachmentSnippetType").VIDEO;if(this._hasAudioClip(a))return b("MercuryAttachmentSnippetType").AUDIO_CLIP;if(this._hasLikeSticker(a))return b("MercuryAttachmentSnippetType").LIKE_STICKER;if(this._hasSticker(a))return b("MercuryAttachmentSnippetType").STICKER;if(this._hasThirdPartySticker(a))return b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER;if(this._hasShare(a))return b("MercuryAttachmentSnippetType").SHARE;if(this._hasGift(a))return b("MercuryAttachmentSnippetType").GIFT;if(this._hasError(a))return b("MercuryAttachmentSnippetType").ERROR;return this._hasFile(a)?b("MercuryAttachmentSnippetType").FILE:b("MercuryAttachmentSnippetType").MIXED},renderAttachmentSnippetText:function(a,c,d,e){__p&&__p();switch(a){case b("MercuryAttachmentSnippetType").PHOTO:return this._renderPhotoAttachmentSnippetText(c,d,this._getPhotoAttachments(e));case b("MercuryAttachmentSnippetType").GIF:return this._renderAnimatedImagesAttachmentSnippetText(c,d,this._getAnimatedImageAttachments(e));case b("MercuryAttachmentSnippetType").VIDEO:return c?g._("You sent a video."):g._("{sender name} sent a video.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").AUDIO_CLIP:return c?g._("You sent a voice message."):g._("{name} sent a voice message.",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").STICKER:case b("MercuryAttachmentSnippetType").LIKE_STICKER:case b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER:return c?g._("You sent a sticker."):g._("{name} sent a sticker.",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").SHARE:if(e&&this._hasP2PPayment(e))return this._renderP2PPaymentSnippetText(e[0]);if(e&&this._hasP2PPaymentRequest(e))return this._renderP2PPaymentRequestSnippetText(e[0]);if(e&&this._hasBusinessMessage(e))return this._renderBusinessMessageSnippetText(e[0],d);if(e&&this._hasLocation(e))return c?g._("You sent a location."):g._("{sender name} sent a location.",[g._param("sender name",d)]);if(e&&this._hasLiveLocation(e))return c?g._("You sent a live location."):g._("{sender name} sent a live location.",[g._param("sender name",d)]);if(e&&this._hasMontageDirect(e)){if(!b("gkx")("676919"))return c?g._("You sent a link."):g._("{sender name} sent a link.",[g._param("sender name",d)]);a=e[0];a=(a=a)!=null?(a=a.share)!=null?(a=a.media)!=null?a.source:a:a:a;return c?a?g._("You sent a video."):g._("You sent a photo."):a?g._("View {sender name}'s disappearing video.",[g._param("sender name",d)]):g._("View {sender name}'s disappearing photo.",[g._param("sender name",d)])}return e&&e.length===1&&b("MessengerLightweightActionUtils").isLWAAttachment(e[0])?b("MessengerLightweightActionUtils").getLWASnippetText(e):c?g._("You sent a link."):g._("{sender name} sent a link.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").GIFT:return b("MercuryGiftSnippetRenderer").renderText(c,d);case b("MercuryAttachmentSnippetType").FILE:return c?g._("You sent an attachment."):g._("{sender name} sent an attachment.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").ERROR:return c?g._("You sent an attachment."):g._("{sender name} sent an attachment.",[g._param("sender name",d)]);default:return""}},_hasOnlyPhotos:function(a){return this._getPhotoAttachments(a).length===a.length},_hasThirdPartySticker:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").THIRDPARTYSTICKER},_hasOnlyAnimatedImages:function(a){return this._getAnimatedImageAttachments(a).length===a.length},_hasOnlyVideo:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").VIDEO},_hasAudioClip:function(a){var c=a[0].metadata&&a[0].metadata.type;return a.length===1&&(c===b("MercuryAudioType").AudioClip||c===b("MercuryAudioType").VoiceMessageWithTranscript)},_hasBusinessMessage:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").BUSINESS_MESSAGE_ITEMS)},_hasSticker:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").STICKER},_hasLikeSticker:function(a){if(a.length<1)return!1;var c=a[0].metadata&&a[0].metadata.stickerID;return a.length===1&&(c==b("StickerConstants").LIKE_STICKER_ID||c==b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||c==b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||c==b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID)},_hasLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").MESSAGE_LOCATION)},_hasLiveLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").MESSAGE_LIVE_LOCATION)},_hasMontageDirect:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").MONTAGE_DIRECT)},_hasP2PPayment:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").ORION)},_hasP2PPaymentRequest:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").ORION_REQUEST)},_hasSingleShareAttachmentOfStyle:function(a,c){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").SHARE&&a[0].share.style_list.indexOf(c)>=0},_hasShare:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").SHARE},_hasError:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").ERROR},_hasGift:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").GIFT},_hasFile:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").FILE},_getPhotoAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type===b("MercuryAttachmentType").PHOTO})},_getAnimatedImageAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE})},_renderPhotoAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("You sent a photo.");else return g._("{name} sent a photo.",[g._param("name",b)]);else if(a)return g._({"*":"You sent {num_photos} photos."},[g._param("num_photos",c.length,[0])]);else return g._({"*":"{name} sent {num_photos} photos."},[g._param("name",b),g._param("num_photos",c.length,[0])])},_renderAnimatedImagesAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("You sent a GIF.");else return g._("{name} sent a GIF.",[g._param("name",b)]);else if(a)return g._("You sent {num_animated_images} GIFs.",[g._param("num_animated_images",c.length)]);else return g._("{name} sent {num_animated_images} GIFs.",[g._param("name",b),g._param("num_animated_images",c.length)])},_renderBusinessMessageSnippetText:function(a,b){a=a.share.target;a=a&&a.message||g._("{sender name} sent an attachment.",[g._param("sender name",b)]);return a},_renderP2PPaymentSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentSnippetText(b("CurrentUser").getID()===a.sender.id,a.sender.name,a.amountWithSymbol,a.status,b("CurrentUser").getID()===a.receiver.id,a.receiver.name)},_renderP2PPaymentRequestSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentRequestSnippetText(b("CurrentUser").getID()===a.requester.id,a.requester.name,a.amountWithSymbol,a.currentStatus,b("CurrentUser").getID()===a.requestee.id,a.requestee.name)},renderP2PPaymentSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getTransferSnippetByStatus(e,a,f||!1,c||"",g||"",d)},renderP2PPaymentRequestSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getRequestSnippetByStatus(e,a,f||!1,c||"",g||"",d)}};e.exports=a}),null);
__d("XMessengerDotComSettingsEditController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/settings/edit/",{})}),null);
__d("MessengerSettingsActions",["AsyncRequest","CurrentEnvironment","MessengerDesktopNotificationPermissions","MessengerDesktopNotifications","MessengerDispatcher","MessengerURIConstants","XMessengerDotComSettingsEditController","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null});a={Types:g,changeSettings:function(a){var c=b("XMessengerDotComSettingsEditController").getURIBuilder().getURI();b("CurrentEnvironment").facebookdotcom&&c.setPath(b("MessengerURIConstants").FACEBOOK_PREFIX+c.getPath());new(b("AsyncRequest"))().setData({settings:a}).setURI(c).send();b("MessengerDispatcher").dispatch({type:g.CHANGE_SETTINGS,newSettings:a})},changeDesktopNotifs:function(a,c){a&&!b("MessengerDesktopNotifications").isGranted()?b("MessengerDesktopNotifications").requestPermission(function(d){if(d!==b("MessengerDesktopNotificationPermissions").GRANTED){b("MessengerDesktopNotifications").checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED&&(c&&c());return}b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}):b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}};e.exports=a}),null);
__d("MessengerSettingsStore",["CacheStorage","MessengerDotComSettingsInitialData","MessengerSettingsActions","MessengerStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("CacheStorage"))("localstorage"),h="desktopNotifsEnabled";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$MessengerSettingsStore1=babelHelpers["extends"]({},b("MessengerDotComSettingsInitialData"),{desktopNotifsEnabled:c.$MessengerSettingsStore2()});return c}var d=c.prototype;d.getSettings=function(){return this.$MessengerSettingsStore1};d.$MessengerSettingsStore2=function(){return g.get(h,!1)};d.$MessengerSettingsStore3=function(a){g.set(h,a)};d.__onDispatch=function(a){switch(a.type){case b("MessengerSettingsActions").Types.CHANGE_SETTINGS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,a.newSettings);this.emitChange();break;case b("MessengerSettingsActions").Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,{desktopNotifsEnabled:a.desktopNotifsEnabled});this.$MessengerSettingsStore3(a.desktopNotifsEnabled);this.emitChange();break}};return c}(b("MessengerStore"));e.exports=new a()}),null);
__d("MessengerBrowserAlerts",["fbt","Bootloader","CurrentUser","DocumentTitle","Event","FavIcon","ImageSourceRequest","ImageSourceType","MercuryActionType","MercuryAttachmentSnippetRenderer","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryLogMessageType","MercuryNotificationRenderer","MercuryThreadInfo","MercuryThreadInformer","MessagingTag","MessengerActions","MessengerConfig","MessengerDesktopNotifications","MessengerFaviconUrls","MessengerParticipants.bs","MessengerSettingsStore","MessengerState.bs","MessengerURIStore","PhotoResizeModeConst","RTWebLoggingComponent","RTWebLoggingSurface","Sound","UserActivity","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=8e3,i=80,j=3,k=6e5,l=new Map(),m=null,n=null;function o(){l=new Map()}function p(a){var c=b("MessengerSettingsStore").getSettings().sound_enabled,d=a.action_type==b("MercuryActionType").LOG_MESSAGE;d=d&&(a.log_message_type==b("MercuryLogMessageType").PHONE_CALL||a.log_message_type==b("MercuryLogMessageType").VIDEO_CALL)&&a.log_message_data.answered;c&&!d&&b("Sound").play([b("MessengerConfig")["sound.notif_ogg_url"],b("MessengerConfig")["sound.notif_mp3_url"]],a.timestamp,!1)}function q(a,c,d){__p&&__p();if(!a.snippet_sender)return;var e=l.get(a.thread_id)||0;if(e>=j)return;l.set(a.thread_id,e+1);b("MessengerParticipants.bs").get(a.snippet_sender,function(e){var f=a.snippet,h=a.custom_nickname&&a.custom_nickname[b("MercuryIDs").getUserIDFromParticipantID(e.id)],i=h?h:e.short_name;!f&&a.snippet_attachments&&a.snippet_attachments.length>0&&(f=b("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(b("MercuryAttachmentSnippetRenderer").getAttachmentSnippetType(a.snippet_attachments),!1,i,a.snippet_attachments));h=h?h:e.name;a.is_canonical||(h=a.name?g._("{sender's name} to {group name}",[g._param("sender's name",i),g._param("group name",a.name)]):g._("{sender's name} to your group",[g._param("sender's name",i)]));b("MessengerDesktopNotifications").showNotification({title:h,body:f,icon:a.image_src||c||e.big_image_src||e.image_src,closeTime:null,onClick:function(){window.focus(),b("MessengerActions").selectThread(a.thread_id)},tag:d.message_id,silent:!b("MessengerSettingsStore").getSettings().sound_enabled});b("MessengerDesktopNotifications").hasDefaultSound()||p(d)})}a={_shouldUpdateTitle:!0,init:function(a){__p&&__p();var c=this;this._viewer=a;this._threadInformer=b("MercuryThreadInformer").getForFBID(this._viewer);this._highResImageMap=new Map();this._shouldMarkAllAsSeenWhenActive=!0;this._shouldUpdateFavicon=!0;this._shouldUpdateTitle=!0;this._enabled=!0;b("gkx")("678573")&&b("CurrentUser").isWorkUser()&&(this._availabilityStatusStore=null,b("Bootloader").loadModules(["WorkChatAvailabilityStatusStore"],function(a){c._availabilityStatusStore=a},"MessengerBrowserAlerts"));b("Event").listen(window,"focus",function(){o(),clearInterval(m)});b("Event").listen(window,"blur",function(){m=setInterval(o,k)});this._threadInformer.subscribe("messages-received",function(a,b){for(var d in b)b[d].forEach(function(a){c.handleMessageReceived(a)})});this._threadInformer.subscribe("unseen-updated",this._handleUnseenUpdated.bind(this));this._threadInformer.subscribe("unread-updated",this._handleUnseenUpdated.bind(this))},disable:function(){this._enabled=!1},enable:function(){this._enabled=!0},disableMarkAllAsSeenWhenActive:function(){this._shouldMarkAllAsSeenWhenActive=!1},enableMarkAllAsSeenWhenActive:function(){this._shouldMarkAllAsSeenWhenActive=!0},disableFaviconUpdate:function(){this._shouldUpdateFavicon=!1},disableTitleUpdate:function(){this._shouldUpdateTitle=!1},enableTitleUpdate:function(){this._shouldUpdateTitle=!0},handleMessageReceived:function(a){__p&&__p();var c=this;if(!this._enabled)return;var d=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(this._viewer);if(d||a.author===this._viewer||!a.is_unread||a.thread_id===b("MessengerURIStore").getState().activeThreadID&&b("UserActivity").isOnTab()||a.folder!=b("MessagingTag").INBOX&&a.folder!=b("MessagingTag").ARCHIVED)return;b("MessengerState.bs").getThreadMeta(this._viewer,a.thread_id,function(d){__p&&__p();if(b("MercuryThreadInfo").isMuted(d))if(!b("MercuryThreadInfo").areMentionsMuted(d)){if(!a.profile_ranges||!a.profile_ranges.some||!a.profile_ranges.some(function(a){return a.id===c._viewer}))return}else return;var e=b("CurrentUser").getID();b("MessengerState.bs").compute(e,function(f){f=f.blocked_ids;if(b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(e,f,d))return;b("MessengerSettingsStore").getSettings().desktopNotifsEnabled&&!b("UserActivity").isOnTab()?c._attemptDesktopNotification(d,a):a.log_message_type!==b("MercuryLogMessageType").UNSUBSCRIBE&&p(a);!b("UserActivity").isOnTab()&&b("MessengerState.bs").getUnseenUnreadCount(c._viewer)>0&&b("MercuryNotificationRenderer").renderDocumentTitle(a.thread_id,function(a){!n&&c._shouldUpdateTitle&&(n=b("DocumentTitle").blink(a))})})})},showRTCNotification:function(a,c){__p&&__p();var d=this;if(b("UserActivity").isOnTab()){c(null);return}var e=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(this._viewer);if(e){c(null);return}this._highResImageMap||(this._highResImageMap=new Map());var f=a.peerID;if(!this._highResImageMap.has(f)){e=function(b,e){d._highResImageMap.set(f.toString(),e.uri),d._displayRTCDesktopNotification(e.uri,a,c)};new(b("ImageSourceRequest"))().setFBID(f).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(i,i).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(e.bind(null,f)).send()}else this._displayRTCDesktopNotification(this._highResImageMap.get(f),a,c)},_updateFavicon:function(a){if(!this._shouldUpdateFavicon)return;a===0?b("FavIcon").set(b("MessengerFaviconUrls")["default"]):b("FavIcon").set(b("MessengerFaviconUrls").unread)},_displayRTCDesktopNotification:function(a,c,d){__p&&__p();var e=b("MercuryIDs").getParticipantIDFromUserID(c.peerID);b("MessengerParticipants.bs").get(e,function(f){var i;c.isVideoCall?c.isGroupCall?i=g._("Incoming group video chat"):i=g._("Incoming video call"):c.isGroupCall?i=g._("Incoming group call"):i=g._("Incoming call");f=g._("{caller} is calling you. Click to answer.",[g._param("caller",f.short_name)]);e=b("MessengerDesktopNotifications").showNotification({title:i,body:f,icon:a,closeTime:h,onShow:function(){b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logPreCallImpression({callID:c.callID,callType:a.getCallType(c.isGroupCall),mediaType:a.getMediaType(!c.isVideoCall),surface:b("RTWebLoggingSurface").DESKTOP_NOTIFICATION,component:b("RTWebLoggingComponent").ACCEPT})},"MessengerBrowserAlerts")},onClick:function(){window.focus(),b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logPreCallClick({callID:c.callID,callType:a.getCallType(c.isGroupCall),mediaType:a.getMediaType(!c.isVideoCall),surface:b("RTWebLoggingSurface").DESKTOP_NOTIFICATION,component:b("RTWebLoggingComponent").ACCEPT})},"MessengerBrowserAlerts"),c.onNotificationClicked()}});d(e)})},_handleUnseenUpdated:function(){__p&&__p();var a=this;if(!this._enabled)return;var c=b("MessengerState.bs").getUnseenUnreadCount(this._viewer);if(this._shouldMarkAllAsSeenWhenActive&&b("UserActivity").isOnTab()&&b("UserActivity").isActive()&&c>0){this._updateFavicon(0);b("MessengerState.bs").markAsSeen(this._viewer);return}this._shouldUpdateTitle&&b("DocumentTitle").badge(c);this._updateFavicon(c);n&&c===0&&(n.stop(),n=null);this._shouldMarkAllAsSeenWhenActive&&!this._focusToken&&c>0&&(this._focusToken=b("UserActivity").subscribe(function(){b("UserActivity").isOnTab()&&(a._focusToken&&a._focusToken.unsubscribe(),a._focusToken=null,b("MessengerState.bs").markAsSeen(a._viewer))}))},_attemptDesktopNotification:function(a,c){var d=this;if(!a.snippet_sender)return;if(!this._highResImageMap.has(a.snippet_sender)){var e=function(b,e){d._highResImageMap.set(a.snippet_sender,e.uri),q(a,e.uri,c)};new(b("ImageSourceRequest"))().setFBID(b("MercuryIDs").getUserIDFromParticipantID(a.snippet_sender)).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(i,i).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(e.bind(null,a.snippet_sender)).send()}else q(a,this._highResImageMap.get(a.snippet_sender),c)}};e.exports=a}),null);
__d("SearchBootstrapCache",["AsyncRequest","AsyncResponse","CacheStorage","SearchBootstrapCacheConstants"],(function(a,b,c,d,e,f){__p&&__p();var g=1;a={get:function(a,c,d,e,f){__p&&__p();var g=this.getKey(a,c,d),h=this.getStorage(),i=h.get(g);h=b("SearchBootstrapCacheConstants")[c.type]||36e5;if(i==null||Date.now()-i.timestamp>h)f(d,a,c);else{g=new(b("AsyncRequest"))();g.getData=function(){return i.requestData};h=new(b("AsyncResponse"))(g,i.payload);e(h,c)}},set:function(a,b,c){var d=a.getRequest().getData();this.getStorage().set(this.getKey(d,b,c),{timestamp:Date.now(),payload:a.payload,requestData:d})},getKey:function(a,b,c){return JSON.stringify({filter:a.filter,context:a.context,viewer:a.viewer,lazy:a.lazy,token:a.token,type:b.type,bootstrapEndpoint:c})},getStorage:function(){return new(b("CacheStorage"))("localstorage","_SearchBootstrapCache_"+g)}};e.exports=a}),null);
__d("SearchSingleState",["fbt"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a,b,c,d){return{classNames:"grammar",groupIndex:0,indexInGroup:a,path:b,text:c,type:"grammar",uid:d}}a={getSuggestions:function(a,b,c){if(c==="ent:user")return this.getSuggestionsForUser(a,b);else if(c==="ent:page")return this.getSuggestionsForPage(a,b);else if(c==="ent:app")return this.getSuggestionsForApp(a,b);else if(c==="ent:group")return this.getSuggestionsForGroup(a,b)},getSuggestionsForUser:function(a,b){return[h(0,"/search/"+a+"/photos-of",g._("photos of {full name}",[g._param("full name",b)]),"photos_of_user"),h(1,"/search/"+a+"/friends",g._("friends of {full name}",[g._param("full name",b)]),"friends_of_user"),h(2,"/search/"+a+"/pages-liked",g._("favourite Pages of {full name}",[g._param("full name",b)]),"pages_liked_user"),h(3,"/search/str/"+b+"/users-named",g._("find all people named \"{full name}\"",[g._param("full name",b)]),"people_named_text")]},getSuggestionsForPage:function(a,b){return[h(0,"/search/"+a+"/photos-of",g._("photos of {name of page}",[g._param("name of page",b)]),"photos_of_page"),h(1,"/search/"+a+"/likers",g._("people who like {name of page}",[g._param("name of page",b)]),"page_likers"),h(2,"/search/str/"+b+"/pages-named",g._("find all Pages named \"{name of page}\"",[g._param("name of page",b)]),"pages_named_text")]},getSuggestionsForGroup:function(a,b){return[h(0,"/search/"+a+"/members",g._("{name of group} members",[g._param("name of group",b)]),"members_of_group"),h(1,"/search/"+a+"/photos-in",g._("photos in {name of groups}",[g._param("name of groups",b)]),"photos_in_group"),h(2,"/search/"+a+"/creators",g._("{name of group} creators",[g._param("name of group",b)]),"creators_of_group"),h(3,"/search/"+a+"/admins",g._("{name of group} administrators",[g._param("name of group",b)]),"admins_of_group")]},getSuggestionsForApp:function(a,b){return[h(0,"/search/"+a+"/apps-similar-to",g._("apps similar to {name of app}",[g._param("name of app",b)]),"similar_apps"),h(1,"/search/"+a+"/app-users",g._("people who use {name of app}",[g._param("name of app",b)]),"app_users"),h(2,"/search/str/"+b+"/pages-named",g._("find all apps named \"{name of page}\"",[g._param("name of page",b)]),"apps_named_text")]}};e.exports=a}),null);
__d("SearchDataSource",["Arbiter","AsyncResponse","CSRFGuard","CurrentUserInitialData","DataSource","Event","FacebarJSConstants","HashtagSearchResultUtils","PageTransitionsRegistrar","SearchBootstrapCache","SearchRegion","SearchSingleState","UnicodeCJK","XHRRequest","createArrayFromMixed","debounce"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=100,h="/typeahead/search/facebar/nullstate/";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){__p&&__p();var c;b.headerflags=new Map();c=a.call(this,b)||this;c._updateMaxResults=function(){var a=window.innerHeight||document.documentElement.clientHeight;c.setMaxResults(Math.max(c._numResults.min,Math.min(c._numResults.max,Math.ceil(2+(a-370)/56))))};c._token=b.token||"";c._lazyonload=b.lazyonload!==!1;c._extraTypes=b.extraTypes;c._buckets=b.buckets;c._noMultiFetch=b.noMultiFetch||!1;c._nullStateConfig=b.nullStateConfig||{};var d=b.maxResults||8;c._numResults={min:3,max:d};c.recordingRoute=b.recordingRoute||"non_banzai";c._enabledHashtag=b.enabledHashtag||!1;c.logBackendQueriesWindow=b.logBackendQueriesWindow||25;c._genTime=b.genTime;c._bootstrapError=!1;c._hasKeywordBootstrap=b.hasKeywordBootstrap||!1;c._addJoinedTermsMatching=b.addJoinedTermsMatching||!1;c._useBootstrapCache=b.useBootstrapCache||!1;c._useBrowserCache=b.useBrowserCache||!1;c.cacheUnicodeMatch.setConfigs({prefix_hangul_conjoining_jamo:!0,prefix_kana_drop_trailing_latin:b.cjkDropLatinInCjTokens,prefix_kana_hiragana_to_katakana:b.cjkUiCacheHiraganaToKatakana,search_i18n_prefix_arabic_normalization:b.arabicNormalization});c.backendUnicodeMatch.setConfigs({prefix_kana_drop_trailing_latin:b.cjkDropLatinInCjTokens});return c}var d=c.prototype;d.init=function(){__p&&__p();a.prototype.init.call(this);this._leanPayload=null;this._bootstrapRequestsPending=0;this._criticalOnly=!0;this._updateMaxResults();var c=b("debounce")(this._updateMaxResults,g,this,!0);b("Event").listen(window,"resize",c);this._nullStateConfig.prefetchNullState&&this.fetchNullState("");this._nullStateConfig.singleState&&b("Arbiter").subscribe("page_transition",this.handlePageTransition.bind(this));(this._nullStateConfig.prefetchNullState||this._nullStateConfig.singleState)&&b("Arbiter").subscribe("search/updateNullState",this.updateNullState.bind(this));this._nullStateConfig.recent&&b("Arbiter").subscribe("search/refreshRecentSearchesNullstate",this.refreshRecentSearches.bind(this))};d.refreshRecentSearches=function(){this.nullStateData=null};d.handlePageTransition=function(){this.nullStateParams={}};d.updateNullState=function(a,b){this.nullStateParams=b,this.fetchNullState()};d.markResultsAsNullState=function(a){__p&&__p();if(a)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.isNullState=!0}};d.markResultsAsSingleState=function(a){__p&&__p();if(a)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.isSingleState=!0}};d.fetchNullState=function(a){this.lastNullOrSingleStateFetchStartTime=Date.now();if(!this._nullStateConfig.hasNullState)return;var b=null;this.nullStateParams&&this.nullStateParams.uid?(this.nullStateParams.query=a||"",b=this._fetchDataForSingleState(),this.markResultsAsNullState(b)):(b=this._fetchDataForNullState(),this.markResultsAsSingleState(b));b&&this.inform("respond",{value:this.nullStateParams?this.nullStateParams.query:"",results:b,isAsync:!1,nullState:!0})};d._fetchDataForSingleState=function(){__p&&__p();if(this.nullStateDataWithProfile&&this.nullStateParams.uid===this.nullStateDataWithProfile.profileID)return this.nullStateDataWithProfile.data;if(this.nullStateParams.type==="ent:app"||this.nullStateParams.type==="ent:group"||this.nullStateParams.type==="ent:page"){this.fetch(h,{profile_id:this.nullStateParams.uid,ent_type:this.nullStateParams.type},{singleState:!0});this.nullStateDataWithProfile={profileID:this.nullStateParams.uid};return}var a=b("SearchSingleState").getSuggestions(this.nullStateParams.uid,this.nullStateParams.text,this.nullStateParams.type);if(!a)return this._fetchDataForNullState();this.nullStateDataWithProfile={data:a,profileID:this.nullStateParams.uid};return a};d._shouldRefreshNullState=function(){if(!this._nullStateConfig.recent)return!1;var a=window.location.href;if(!a)return!1;return a.contains("allactivity")&&a.contains("log_filter=search")?!0:!1};d._fetchDataForNullState=function(){var a=this;if(this.nullStateData&&!this._shouldRefreshNullState()){this.markResultsAsNullState(this.nullStateData);window.setTimeout(function(){a.inform("respond",{value:"",results:a.nullStateData,isAsync:!0,nullState:!0})},0);return}this.fetchingNullState||(this.fetchingNullState=!0,this.fetch(h,{value:""},{nullState:!0,value:""}));return null};d.dirty=function(){a.prototype.dirty.call(this),this._bootstrapError=!1,this._fetchOnUseRequests=[]};d.asyncErrorHandler=function(a,b){b.nullState&&(this.fetchingNullState=!1),b.bootstrap&&(this._bootstrapError=!0),this.inform("fetchError",{response:a,fetch_context:b})};d.fetch=function(c,d,e){e=e||{};e.fetch_start=Date.now();var f=b("PageTransitionsRegistrar").getMostRecentURI().getPath();d=babelHelpers["extends"]({},d,{path:f});a.prototype.fetch.call(this,c,d,e)};d.xhrFetchHandler=function(a,c,d){a=b("CSRFGuard").clean(a);a=JSON.parse(a);return this.fetchHandler(new(b("AsyncResponse"))(null,a.payload),d,c)};d.fetchHandler=function(c,d,e){__p&&__p();e===void 0&&(e=null);if(d.nullState){this.fetchingNullState=!1;this.nullStateData=c.getPayload().entries;this.markResultsAsNullState(this.nullStateData);this.inform("respond",{value:"",results:this.nullStateData,isAsync:!0,nullState:!0});return}if(d.singleState){this.nullStateDataWithProfile.data=c.getPayload().entries;this.markResultsAsSingleState(this.nullStateDataWithProfile.data);this.inform("respond",{results:this.nullStateDataWithProfile.data,isAsync:!0,value:this.nullStateParams?this.nullStateParams.query:"",nullState:!0});return}var f=c.getPayload(),g=babelHelpers["extends"]({fetch_end:Date.now()},d),h=g.value?"event":"persistent";this.inform("beginFetchHandler",{response:c});d.bootstrap&&(this._bootstrapError=!1);var i=e===null?c.getRequest().uri.getPath():e.getURI().getPath();i===this.bootstrapEndpoint&&this._useBootstrapCache&&b("SearchBootstrapCache").set(c,d,this.bootstrapEndpoint);if(d.type=="lean")this._leanPayload=f,this._processLean();else{f.coeff2_ts&&(g.coeff2_ts=f.coeff2_ts);a.prototype.fetchHandler.call(this,c,d);i=e===null?c.getRequest().getData():e.getData();d.bootstrap&&!i.no_cache&&(g.browserCacheHit=f.timestamp<this._genTime);d.bootstrap&&!f.no_data&&this._bootstrapRequestsPending>0&&(d.bootstrap=!1,--this._bootstrapRequestsPending,this._bootstrapRequestsPending||this._bootstrapPostProcess());if(f.no_data||f.stale||f.token!==this._token){e=babelHelpers["extends"]({},i);e.lazy&&(delete e.lazy,e.token=this._token,this._fetchOnUse(e,d))}}this.inform("endpointStats",{info:g,response:c},h);d&&!!d.value&&this.inform("completeFetch",{response:c,stats:g})};d.respond=function(a,b,c){this.inform("respondValidUids",b);this.inform("reorderResults",b);b=this.buildData(b,a);b.forEach(function(a,b){a.origIndex=b,a.fromCache=!c});this.inform("respond",{value:a,results:b,isAsync:!!c});return b};d.buildData=function(a,b){if(!a||a.length===0)return[];b=a.map(this.getEntry,this);b.length=Math.min(b.length,this._maxResults);return b};d.fetchLean=function(){this._fetchLean()};d._isQueryTooShort=function(a){return a.length<this._minQueryLength&&!this._performShortQuery&&!b("UnicodeCJK").hasIdeoOrSyll(a)};d.shouldFetchMoreResults=function(a){return a.length<this._maxResults};d._bootstrapPostProcess=function(){var a=0;for(var b in this._data)Object.prototype.hasOwnProperty.call(this._data,b)&&a++;this.inform("bootstrapped",{time:Date.now(),size:a},"persistent");this._processLean()};d._processLean=function(){if(this._leanPayload){var a,b=this._leanPayload.entries;for(var c in b)a=this.getEntry(c),a&&(a.index=b[c]);this.setExclusions(this._leanPayload.blocked);this._leanPayload=null}};d._bootstrapFetch=function(a,b){b=babelHelpers["extends"]({},b,this.bootstrapData);this._criticalOnly&&this._lazyonload&&(b.lazy=1);a={bootstrap:!0,type:a};this._fetchBootstrapMaybeCache(b,a);++this._bootstrapRequestsPending};d._fetchBootstrapMaybeCache=function(a,c){__p&&__p();var d=this;if(this._useBootstrapCache)b("SearchBootstrapCache").get(a,c,this.bootstrapEndpoint,this.fetchHandler.bind(this),this.fetch.bind(this));else if(this._useBrowserCache){var e=new(b("XHRRequest"))(this.bootstrapEndpoint).setData(babelHelpers["extends"]({},a,{__user:b("CurrentUserInitialData").USER_ID,__a:1})).setMethod("GET").setResponseHandler(function(a){return d.xhrFetchHandler(a,e,c||{})}).setErrorHandler(function(a){return d.asyncErrorHandler(a,c)});this.inform("beforeFetch",{request:e,fetch_context:c});e.send()}else this.fetch(this.bootstrapEndpoint,a,c)};d._fetchOnUse=function(a,b){for(var c in this.bootstrapData)Object.prototype.hasOwnProperty.call(a,c)||(a[c]=this.bootstrapData[c]);this._criticalOnly?this._fetchOnUseRequests.push({args:a,ctx:b}):this._fetchBootstrapMaybeCache(a,b)};d._fetchLean=function(){var a={no_cache:1};a.options=b("createArrayFromMixed")(a.options);a.options.push("lean");this._fetchOnUse(a,{type:"lean"})};d.bootstrap=function(a){__p&&__p();a||(this._criticalOnly=!1,this._flushFetchOnUseRequests());if(this._bootstrapped)return;a={filter:["event"]};this._fetchOnUse(a,{type:"event"});a=["app","page","group","friendlist"];a=a.concat(this._extraTypes||[]);var c=[];this._hasKeywordBootstrap&&c.push(b("FacebarJSConstants").keywordType);if(this._noMultiFetch)a.push("user"),a=a.concat(c),this._bootstrapFetch("user",{filter:a});else{this._bootstrapFetch("other",{filter:a});if(this._buckets)for(var a=0;a<this._buckets.length;++a){var d={filter:["user"],buckets:this._buckets[a]};this._bootstrapFetch("user",d)}else this._bootstrapFetch("user",{filter:["user"]});c.length>0&&this._bootstrapFetch("keyword",{filter:c})}this._fetchLean();this._bootstrapped=!0};d.getBootstrapError=function(){return this._bootstrapError};d._flushFetchOnUseRequests=function(){var a=this._fetchOnUseRequests.length;for(var b=0;b<a;++b){var c=this._fetchOnUseRequests[b];this._fetchBootstrapMaybeCache(c.args,c.ctx)}a>0&&this.inform("extra_bootstrap",{time:Date.now()},"persistent");this._fetchOnUseRequests=[]};d.onLoad=function(a,b){this.inform("onload",{time:Date.now()},"persistent"),a&&window.setTimeout(this.bootstrap.bind(this,b),0)};d.mergeUids=function(b,c,d,e){__p&&__p();var f=this.getDynamicHashtagResult(e);e&&f&&c.indexOf(f)<=0&&c.unshift(f);f=d[0]?this.getEntry(d[0]):null;var g=c[0]?this.getEntry(c[0]):null;f=f&&f.replace_results?f:null;f=!f&&g&&g.replace_results?g:f;g=a.prototype.mergeUids.call(this,b,c,d,e);if(f){this.inform("backend_topreplace",{});return this.deduplicateByKey([f.uid].concat(g))}return g};d.getTextToIndexFromFields=function(a,b){var c=[],d=a.tokenVersion==="v2";for(var e=0;e<b.length;++e){if(d&&(b[e]==="text"||b[e]==="alias"))continue;var f=a[b[e]];f&&(f=f.join?f.join(" "):f,c.push(f),b[e]=="text"&&this._addJoinedTermsMatching&&(f=f.toLowerCase(),f=f.replace(/ /g,""),c.push(f)))}return c.join(" ")};d.getDynamicHashtagResult=function(a){if(!a||!this._enabledHashtag)return;var c=b("HashtagSearchResultUtils").getHashtagFromQuery(a);if(!c)return;var d="hashtag:"+c,e=this.getEntry(d);e||this.processEntries([b("HashtagSearchResultUtils").makeTypeaheadResult(c)],a);return d};d.tokenizeCache=function(a,b){a=this.cacheUnicodeMatch.prefixMatchPrepare(a);a=this._tokenize(a,b);b=a.tokens;b.length>0&&a.value.startsWith("@")&&(b[0]="@"+b[0]);return a};return c}(b("DataSource"));e.exports=a}),null);
__d("FacebarDataSource",["invariant","Arbiter","AsyncRequest","CurrentUser","FacebarGlobalOptions","FacebarGSv2Echo","FacebarInviteCoworkers","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarResultStore","FacebarResultStoreUtils","FacebarStructuredText","FacebarTimerUtils","FacebarTokenizer","FacebarURI","ResultsBucketizer","ResultsBucketizerConfig","SearchDataSource","Vector","ViewportBounds","emptyFunction","gkx","queryThenMutateDOM","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=50,i={};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.executeQuery=function(a,c,e){__p&&__p();d._curQueryId++;e!=null&&(e.queryId=d._curQueryId,e.startCacheQuery=b("FacebarTimerUtils").getTimestamp());var f=d.getMaxResults();d.setQueryData({qid:d._curQueryId,max_results:f});d.inform("beforeQuery",{value:a,queryId:d._curQueryId});d.value=a;f=d.buildUids(a,[]);e!=null&&(e.endCacheQuery=b("FacebarTimerUtils").getTimestamp());c&&f.length===0&&f.push(c);d.inform("query",{value:a,results:f,queryId:d._curQueryId});d.resultStore&&d.respond(a,f,!1,!1,e)};d.sendRemoteQuery=function(a,c,e){__p&&__p();var f=d.getQueryData(a.text_form),g=e!=null?e.queryId:0;f=new(b("AsyncRequest"))().setURI(d.queryEndpoint).setData(f).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(b,d){this.handleQueryResponse(d,b,a,c,e)}.bind(babelHelpers.assertThisInitialized(d),g)).setFinallyHandler(function(){d.activityEnd()});for(var h=d._headerflags,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=h.length)break;k=h[j++]}else{j=h.next();if(j.done)break;k=j.value}k=k;var l=k[0];k=k[1];f.setRequestHeader(l,k)}d.inform("sending_request",f);d._maxRemoteQueryId=g;e!=null&&(e.waitingQueries=d._waitingQueries,e.inflightRequests=b("AsyncRequest").getInflightCount(),e.startRemoteQuery=b("FacebarTimerUtils").getTimestamp());f.send();d.activityStart()};d.renderResults=function(a,c,e,f,g){g!=null?i[String(a)]=g:g=i[String(a)],b("FacebarGSv2Echo").insertInto(a,c,!e,d._single_state,d._is_local,d._categoryName),!!a&&a instanceof b("FacebarStructuredText")&&!a.isEmptyOrWhitespace()&&!d._bypassBucketizer&&(c=d._bucketizeResults(a,c,g)),c.length=Math.min(c.length,d.getMaxResults()),d.injectExtraResults(a,c),f=e&&c.length===0,d.inform("respond",{value:a,results:c,isAsync:!!e,isEmptyResults:f})};d._fetched_null_state=null;d._initialQueryData=null;d._curQueryId=-1;d._maxRemoteQueryId=-1;d._single_state=!1;d._is_local=!1;d._categoryName=null;d._waitingQueries=0;d.mixGrammarAndEntity=c.mixGrammarAndEntity!==void 0?c.mixGrammarAndEntity:!0;d._isInjectedSuggestionFlow=!1;d.grammarVersion=c.grammarVersion||"";c.grammarOptions||(c.grammarOptions={});d._headerflags=c.headerflags||new Map();d.recordingRoute="banzai_vital";d._maxGrammarResults=c.grammarOptions.maxGrammarResults;d.nullStateEndpoint=c.nullStateEndpoint||"/ajax/browse/null_state.php";d.setNullStateData(c.nullStateData||{},!0);d._minQueryLength=c.minQueryLength||-1;d._performShortQuery=c.performShortQuery||!1;d._fixProcessLean=c.grammarOptions.fixProcessLean||!1;d.throttleExecuteQuery();d.throttleSendRemoteQuery();d.throttleRenderResults();d.resultStoreOptions=c.grammarOptions||{};d.resultStoreOptions.useNewExactNameMatch=c.grammarOptions.useNewExactNameMatch==="true";d.defaultQuery=null;d._bypassBucketizer=!1;d._resultsBucketizer=new(b("ResultsBucketizer"))(b("ResultsBucketizerConfig").rules,function(a,b){switch(b){case"isSeeMore":return a.isSeeMore;case"objectType":return a.type;case"resultSetType":return a.results_set_type;case"renderType":return a.render_type||a.type;case"cacheOnlyResult":return a.cacheOnlyResult;case"closeEntity":return a.bootstrapped||(a.tags?a.tags[b]:void 0);default:return a.tags?a.tags[b]:void 0}});d.fetchNullState();d.initWithConfig(b("FacebarGlobalOptions").grammarConfig);d.subscribe("bootstrapped",function(){b("Arbiter").subscribe("FacebarDataSource.getBootstrapMatches",function(b,a){a.callback.call(null,d.getBootstrapMatches(a.query,a.whitelistedEntIds))})});return d}var d=c.prototype;d.initWithConfig=function(a){this.facebarConfig=a,this.createResultStore(),this._fetched_null_state&&(this.setNullState(this._fetched_null_state),this._fetched_null_state=null)};d.throttleExecuteQuery=function(){var a=b("FacebarGlobalOptions").executeQueryThrottleTime;this.executeQueryThrottled=b("throttle").withBlocking(this.executeQuery,a,this)};d.throttleSendRemoteQuery=function(){var a=b("FacebarGlobalOptions").sendRemoteQueryThrottleTime;a===0?this.sendRemoteQueryThrottled=this.sendRemoteQuery:this.sendRemoteQueryThrottled=b("throttle").withBlocking(this.sendRemoteQuery,a,this)};d.throttleRenderResults=function(){var a=this,c=b("FacebarGlobalOptions").renderThrottleTime;if(c===0){this.renderResultsThrottled=this.renderResults;return}var d=Date.now();this.renderResultsThrottled=function(b,e,f,g,h){var i=Date.now();(f||d+c<i)&&(d=i,a.renderResults(b,e,f,g,h))}};d.createResultStore=function(){this.facebarConfig.maxGrammarResults=this._maxGrammarResults,this.resultStore=new(b("FacebarResultStore"))(this.facebarConfig,b("FacebarTokenizer").tokenize,this.getEntry.bind(this),this.resultStoreOptions),this._fixProcessLean&&this._processLean(),this.subscribe("setSortFunction",function(a,b){this.resultStore.setSortFunction(b)}.bind(this))};d.dirty=function(){this._nullStateFetched=!1,this.resultStore.resetCaches(),a.prototype.dirty.call(this)};d.refreshNullstate=function(a,c){a===void 0&&(a=b("emptyFunction")),c===void 0&&(c=b("emptyFunction")),this._nullStateFetched=!1,this.fetchNullState(a,c)};d.addEntries=function(a){this.resultStore.addBootstrap(this.processEntries(a))};d._processLean=function(){__p&&__p();if(this._fixProcessLean){if(this._leanPayload&&this.resultStore){var b,c=this._leanPayload.entries;for(var d in c){b=this.getEntry(d);if(!b)continue;for(var e in c[d])b.grammar_costs||(b.grammar_costs={}),b.grammar_costs["{"+e+"}"]=c[d][e]}this.setExclusions(this._leanPayload.blocked);this._leanPayload=null}}else a.prototype._processLean.call(this)};d.setNullStateData=function(a,b){b&&(this.nullStateData={grammar_version:this.grammarVersion});Object.assign(this.nullStateData,a);return this};d.setNullState=function(a){__p&&__p();var c={};a.queries=a.queries.filter(function(a){a=a.parse.display.join(" ").toLowerCase();if(!c[a]){c[a]=!0;return!0}return!1});this._null_state=a;this.processEntries(this._null_state.entities);this.resultStore.setNullState(this._null_state.queries);this.resultStore.addNullStateToQueryCache(this.getRawStructure(b("FacebarStructuredText").fromString("")))};d.getNullStateTrending=function(){return this._null_state.trending};d.setSingleState=function(a){this._single_state=a};d.getSingleState=function(){return this._single_state};d.setLocal=function(a){this._is_local=a};d.setCategoryName=function(a){this._categoryName=a};d.overrideNullState=function(a){this._null_state!=null||g(0,5553),this._original_null_state=this._original_null_state||this._null_state,this.setNullState(a)};d.restoreNullState=function(){this._original_null_state&&this.setNullState(this._original_null_state)};d.fetchNullState=function(a,c){__p&&__p();a===void 0&&(a=b("emptyFunction"));c===void 0&&(c=b("emptyFunction"));if(this._nullStateFetched){this.activityStart();setTimeout(this.activityEnd.bind(this),0);a();return}var d=new(b("AsyncRequest"))().setURI(this.nullStateEndpoint).setData(this.nullStateData).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(b){this.resultStore?(this.setNullState(b.payload),this.inform("nullstateReady",!0)):this._fetched_null_state=b.payload,this._nullStateFetched=!0,a()}.bind(this)).setErrorHandler(function(){c()}).setFinallyHandler(this.activityEnd.bind(this));this.activityStart();d.send()};d.toTypeaheadEntryUid=function(a,c){__p&&__p();var d,e=b("FacebarStructuredText").fromStruct(c.structure),f=e.getFragment(0);if(e.getCount()==1&&f.isType("ent")){var g=f.getType().split(":")[2];d=this.getEntry(f.getUID(),g);d.type=this.resultStore.stripBrackets(c.type)}else d=this.getEntry(c.tuid),d||(d={dynamic_cost:c.dynamic_cost,extra_uri_params:c.extra_uri_params,memcache:c.fromMemcache,photo:c.photo,results_set_type:c.resultsSetType,tuid:c.tuid,type:c.type,uid:c.tuid,tags:c.tags},this.processEntries([d]),d=this.getEntry(c.tuid)),d.icon_class=c.iconClass,d.unseen_posts=c.unseen_posts,d.category=c.category,d.subtext=c.subtext,d.boldedSubtext=c.boldedSubtext,d.is_work_foreign_entity=c.is_work_foreign_entity;d.error_info=c.errorInfo;d.logInfo=c.logInfo;d.itemLoggingInfo=c.item_logging_info;d.itemLoggingId=c.item_logging_id;d.structure=e;d.text=d.structure.toString();d.queryTypeText=c.queryTypeText;d.semantic=!!c.isSingleState&&c.singleStateSemantic?c.singleStateSemantic:c.semantic;d.alternateSemantic=c.alternateSemantic;d.tree=c.tree;d.cost=c.cost;d.isSeeMore=!!c.isSeeMore;d.isNullState=!!c.isNullState;d.isSingleState=!!c.isSingleState;d.keywordSource=c.keywordSource;d.keyword=c.keyword;f=c.keyword_type;d.keywordType=f;d.isTrending=!!c.isTrending||c.keywordBootstrapType===b("FacebarJSConstants").keywordBootstrapTypes.trending||f===b("FacebarJSConstants").keywordTypes.trending;d.isCelebrity=f===b("FacebarJSConstants").keywordTypes.celebrity;d.isFootball=f===b("FacebarJSConstants").keywordTypes.football;d.isPhotos=f===b("FacebarJSConstants").keywordTypes.photos;d.isVideos=f===b("FacebarJSConstants").keywordTypes.videos;d.isHashtag=f===b("FacebarJSConstants").keywordTypes.hashtag;d.isLocal=f===b("FacebarJSConstants").keywordTypes.local||f===b("FacebarJSConstants").keywordTypes.local_category;d.isCompany=f===b("FacebarJSConstants").keywordTypes.company;d.isMovie=f===b("FacebarJSConstants").keywordTypes.movie;d.isHappeningNow=f===b("FacebarJSConstants").keywordTypes.happeningNow;d.isSpecialIntentGeneric=f===b("FacebarJSConstants").keywordTypes.specialIntentGeneric;d.isLink=f===b("FacebarJSConstants").keywordTypes.link;b("FacebarJSConstants").intentKeys.map(function(a){d.isSpecialIntent=d.isSpecialIntent||d[a]});d.isRecent=!!c.isRecent;d.isPrefetched=!!c.isPrefetched;d.isSuggestion=!!c.isSuggestion;d.isInjectedSuggestion=!!c.isInjectedSuggestion;d.isFromGSEF=!!c.isFromGSEF;d.isGloballyCachedKeyword=!!c.isGloballyCachedKeyword;d.entityInfo=c.entityInfo;d.cacheOnlyResult=c.cacheOnlyResult||!1;if(!b("CurrentUser").isWorkUser()&&(!b("FacebarGlobalOptions").logSERPClickAsRecentSearch||!c.isNullState)){g=b("FacebarStructuredText").fromStruct(c.structure).toString().toLowerCase();e=b("FacebarKeywordSearchUtils").makeFacebarEntry(g);d.uri=e.uri;d.semantic=e.semantic;d.structure=e.structure}else d.uri=d.uri||b("FacebarURI").getURI(this.facebarConfig,d);d.type==="user"&&b("FacebarGlobalOptions").landUserSuggestionOnChat&&(d.uri=b("FacebarURI").getChatURI(d));d.parse=c.parse;d.tags=c.tags||{};d.isKeywordL2=c.isKeywordL2||!1;d.exactMatchKeyword=c.exactMatchKeyword||!1;d.qid=c.qid;d.templateID=c.templateID;c.isJSBootstrapMatch&&(d.isJSBootstrapMatch=c.isJSBootstrapMatch,d.backendCost=c.backendCost,d.bootstrapCost=c.bootstrapCost,d.keywordBootstrapType=c.keywordBootstrapType);this._replaceCategoryWithTermMatches(a,d,c);return d.tuid};d._replaceCategoryWithTermMatches=function(a,b,c){__p&&__p();if(b.type!=="user"&&b.type!=="page")return;if(!b.term_to_subtitle||!c.termMatches)return;var d=b.alias,e=d==null?"":this.resultStore._convertToAliasKey(d),f=[];c.termMatches.forEach(function(c){var d=b.term_to_subtitle[c];!a.is_alias_search&&c===e&&c!==a.potential_alias_term&&(d=null);d&&f.push(d)},this);b.category===void 0&&(b.category="");b.original_category!==void 0&&(b.category=b.original_category);if(!f||f.length===0)return;b.original_category===void 0&&(b.original_category=b.category);if(!b.original_category)return;d=b.original_category.length>0?b.original_category.split(" \xb7 "):[];d.unshift.apply(d,f);d=d.filter(function(a,b,c){return b==c.indexOf(a)});b.category=d.splice(0,2).join(" \xb7 ")};d.getRawStructure=function(a){typeof a==="string"&&(a=b("FacebarStructuredText").fromString(a));if(this.resultStore)return this.resultStore.transformStructured(a.toArray())};d.saveResult=function(a){this._initialQueryData=this.getUID(a.uid,a.fetchType)};d.isDefaultKeywordQuery=function(a){return a.type===b("FacebarJSConstants").keywordType&&b("FacebarResultStoreUtils").getTextFromResult(a).toLowerCase()===this.value.getHash().trim().toLowerCase()};d.buildUids=function(a){__p&&__p();var c=this;if(!a||!this.resultStore)return[];typeof a==="string"&&(a=b("FacebarStructuredText").fromString(a));var d=this.getRawStructure(a);a=this.resultStore.getResults(d,this.getMaxResults());var e=a.results;if(e===void 0)return[];a=a.null_state===!0;var f=0;e=e.filter(function(a,c){return!b("FacebarGlobalOptions").allowGrammar&&a.type=="grammar"?!1:a.semantic!="<blank>"&&(a.type!="unimplemented"||f++===0)},this);var g=[],h=[],i=[];e.forEach(function(a){a.forcedPosition>0?i.push(a):a.isSeeMore?g.push(a):h.push(a)});a?e=this.orderNullState(e,this.getMaxResults()):e=h;i.length>0&&(i.sort(function(a,b){return a.forcedPosition-b.forcedPosition}),i.forEach(function(a){e.splice(a.forcedPosition,0,a)}));g.length>0&&e.push.apply(e,g);return e.map(function(a){return c.toTypeaheadEntryUid(d,a)})};d.orderNullState=function(a,b){var c={top:[],bottom:[],middle:[]},d=function(a){a=a.null_state_position;return Object.prototype.hasOwnProperty.call(c,a)?a:"middle"},e=function(a,b){return a.original_cost-b.original_cost};a&&a.forEach(function(a){c[d(a)].push(a)},this);for(var f in c)c[f]=c[f].sort(e).slice(0,b),b-=c[f].length;return[].concat(c.top,c.middle,c.bottom)};d.isEntity=function(a){return!a?!1:/^\d+$/.test(a)};d.handleResponse=function(a,b){var c=this;a.payload.errors||(this.processEntries(a.payload.entities),a.payload.results.forEach(function(d){d.qid=a.queryId,d.parse||(d.parse={}),d.parse.entTokens=d.parse.entTokens||[],d.parse.remTokens=d.parse.remTokens||[],d.parse.suffix=d.parse.suffix||"",c.isEntity(d.semantic)&&(d=c._buildCommonEntityFields(d,b.tokens))}),this.saveResults(a,b))};d.saveResults=function(a,b){a.payload.prefetched&&this.processPrefetched(a.payload.prefetched),this.resultStore.saveResults(a.payload.results,b,a.payload.incomplete,{},[])};d.processPrefetched=function(a){var c=this,d=function(d){var e=b("FacebarStructuredText").fromString(d),f=c.getRawStructure(e);e=a[d];c.processEntries(e.entities);e.results.forEach(function(a){c.isEntity(a.semantic)&&(a=c._buildCommonEntityFields(a,f.tokens))});c.resultStore.saveResults(e.results,f,e.incomplete)};for(var e in a)d(e)};d.processEntries=function(a){__p&&__p();return a.map(function(a,b){__p&&__p();var c=a.uid+="";a.textToIndex=this.getTitleTerms(a);a.titleToIndex=this.getTitleTerms(a);c=this.getUID(c,a.fetchType);var d=this.getEntry(c);!d?(this.setEntry(c,{}),d=this.getEntry(c)):delete a.photo;Object.assign(d,a);d.tuid=c;d.index===void 0&&(d.index=b);return c},this)};d.getUID=function(a,b){a+="";if(b!==void 0){b=/([^:]+:)?([^:]+)(:.*)?/.exec(b)[2];return JSON.stringify([a,b])}return a};d.getEntry=function(b,c){b=""+b;c=c!=null?a.prototype.getEntry.call(this,this.getUID(b,c))||a.prototype.getEntry.call(this,b):a.prototype.getEntry.call(this,b);return c};d.getEntryForFragment=function(a){return this.getEntry(a.getUID(),a.getTypePart(2))};d.getMaxResults=function(){return this._numResults.max};d.query=function(a,c,d){this.executeQueryThrottled(a,this._initialQueryData,{keyPress:b("FacebarTimerUtils").getTimestamp()}),this._initialQueryData=null};d.shouldFetchMore=function(a,c){__p&&__p();if(!a.is_empty){var d=c.filter(function(a){return a.type===b("FacebarJSConstants").keywordType}).length;if(d<b("FacebarGlobalOptions").default_num_top_results_to_show)return!0}if(a.is_empty)return!1;if(this.resultStore.alreadyKnown(a.cache_id))return!1;if(a.raw_text&&this._isQueryTooShort(a.raw_text))return!1;return c.length<this.getMaxResults()||this._performShortQuery?!0:this.countValidResults(c)<this.getMaxResults()||this._performShortQuery};d.countValidResults=function(a){var b=0;a.forEach(function(a){a&&!a.isNullState&&!a.isSeeMore&&b++},this);return b};d.handleQueryResponse=function(a,c,d,e,f){__p&&__p();var g=this,h=a.payload;a.queryId=c;a.inputQuery=d.text_form;h.results!=null&&h.results.forEach(function(a){a.isSingleState=g._single_state});f!=null&&(f.endRemoteQuery=b("FacebarTimerUtils").getTimestamp());this.inform("response_received",a);this.handleResponse(a,d);c=[];h.abandon_cache&&(c=h.results.map(function(a){return g.toTypeaheadEntryUid(d,a)}));var i=h.num_topresults_to_show;(i==null||i<3)&&(i=3);this.respond(e,c,!0,h&&(!h.results||h.results.length===0),f,i);this.inform("backend_response",a)};d.activityStart=function(){this._waitingQueries||this.inform("activity",{activity:!0},"state"),this._waitingQueries++};d.activityEnd=function(){this._waitingQueries--,this._waitingQueries||this.inform("activity",{activity:!1},"state")};d._bucketizeResults=function(a,b,c){b=this._tagKeywordsSuggestions(b);return this._resultsBucketizer.bucketize(b,h,null,c)};d._tagKeywordsSuggestions=function(a){__p&&__p();if(!a||a.length===0)return a;var c=a[0];if(c.bootstrapped)return a;return c.type==="grammar"||c.cost<b("FacebarGlobalOptions").closeEntityThreshold&&c.type==="user"?a:a.map(function(a){if(a.type!==b("FacebarJSConstants").keywordType)return a;a=babelHelpers["extends"]({},a);a.tags.topBucket=!0;return a})};d._buildCommonEntityFields=function(a,c){if(a.queryTypeText)return a;a.parse.display=[{type:"ent:"+a.type,uid:a.semantic}];a.parse.fetchType&&(a.parse.display[0].fetchType=a.parse.fetchType);a.parse.entTokens=c;a.parse.pos=0;a.resultsSetType="{"+a.type+"}";a.queryTypeText=b("FacebarJSConstants").defaultQueryTypeText;return a};d.setBypassBucketizer=function(a){this._bypassBucketizer=a};d.respond=function(a,c,d,e,f,g){__p&&__p();d&&this.value&&(typeof this.value==="string"&&(this.value=b("FacebarStructuredText").fromString(this.value)),this.inform("remote_query_match",{isMatch:this.value.matches(a),queryId:f!=null?f.queryId:0}),a=this.value,(!c||c.length===0)&&(c=this.buildUids(a)));this.inform("reorderResults",c);this.inform("respondValidUids",c);c=c.map(this.getEntry,this);c.forEach(function(a,b){a.fromCache=!d,a.isSingleState=this._single_state},this);if(!d&&(a.getHash().length<512||a.getHash().startsWith("http://")||a.getHash().startsWith("https://"))){var h=this.getRawStructure(a);this.shouldFetchMore(h,c)&&(f!=null&&(f.dispatchRemoteQuery=b("FacebarTimerUtils").getTimestamp()),this.sendRemoteQueryThrottled(h,a,f))}(!d||f==null||f.queryId===this._maxRemoteQueryId)&&this.renderResultsThrottled(a,c,d,e,g);f!=null&&this.logLatencies(d,f)};d.injectExtraResults=function(a,c,d){b("FacebarInviteCoworkers").insertInto(a,c,!d,this._single_state)};d.logLatencies=function(a,c){var d=b("FacebarTimerUtils").getTimestamp();a?this.inform("remote_query_latency",{queryId:c.queryId,latencies:{queryStart:Math.max(c.startRemoteQuery-c.dispatchRemoteQuery,0),queryEnd:Math.max(c.endRemoteQuery-c.startRemoteQuery,0),keyPressToQueryDispatch:Math.max(c.dispatchRemoteQuery-c.keyPress,0),keyPressToQueryStart:Math.max(c.startRemoteQuery-c.keyPress,0),keyPressToQueryEnd:Math.max(c.endRemoteQuery-c.keyPress,0),render:Math.max(d-c.endRemoteQuery,0),inflightRequests:c.inflightRequests,waitingQueries:c.waitingQueries,keyPressToRender:Math.max(d-c.keyPress,0)}}):this.inform("cache_query_latency",{queryId:c.queryId,latencies:{queryStart:Math.max(c.startCacheQuery-c.keyPress,0),queryEnd:Math.max(c.endCacheQuery-c.startCacheQuery,0),keyPressToQueryEnd:Math.max(c.endCacheQuery-c.keyPress,0),render:Math.max(d-c.endCacheQuery,0),keyPressToRender:Math.max(d-c.keyPress,0)}})};d._updateMaxResults=function(){var a=this;b("queryThenMutateDOM")(function(){var c=b("Vector").getViewportDimensions().y,d=b("ViewportBounds").getTop()||42,e=56,f=48;c=c-d-f-25;a._maxResults=Math.max(a._numResults.min,Math.min(a._numResults.max,Math.floor(c/e)-1));a.value&&a.query(a.value)})};d.getCurQueryId=function(){return this._curQueryId};d.setMinQueryLength=function(a){this._minQueryLength=a};d.setGrammarOption=function(a){b("FacebarGlobalOptions").allowGrammar=a};d.getBootstrapMatches=function(a,c){var d=this;c===void 0&&(c=[]);var e=this.getRawStructure(b("FacebarStructuredText").fromString(a));a=this.resultStore.getBootstrapMatches(e,c);return a.map(function(a){return d.getEntry(d.toTypeaheadEntryUid(e,a))})};return c}(b("SearchDataSource"));Object.assign(a.prototype,{events:["query","respond","bootstrapped","activity","ready"]});e.exports=a}),null);
__d("FacebarTypeahead",["Arbiter","Typeahead","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g,h){__p&&__p();c=a.call(this,c,d,e,f)||this;c.getCore();c.proxyEvents();c.initBehaviors(g||[]);var i=c.core.subscribe("focus",function(){h&&h.init(this),this.core.unsubscribe(i),this.data.bootstrap(!1),this.core.input.focus()}.bind(babelHelpers.assertThisInitialized(c)));c.data.bootstrap(!0);c.inform("init",babelHelpers.assertThisInitialized(c),"persistent");b("Arbiter").inform("Facebar/init",babelHelpers.assertThisInitialized(c),"persistent");return c}var d=c.prototype;d.proxyEvents=function(){var a,b=[],c=null,d=function(){while(a=b.shift())this.inform(a[0],a[1]);c=null}.bind(this);[this.data,this.view,this.core].forEach(function(a){a.subscribe(a.events,function(a,e){b.push([a,e]),c=c||setTimeout(d,0)}.bind(this))},this)};return c}(b("Typeahead"));Object.assign(a.prototype,{init:b("emptyFunction")});e.exports=a}),null);
__d("FacebarTypeaheadCore",["csx","cx","invariant","Arbiter","ArbiterMixin","Base64","CSS","DOM","Event","FacebarGlobalOptions","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarResultStoreUtils","FacebarStructuredText","FacebarTypeaheadInput","FacebarURI","Keys","KeywordsSearchResultConfig","Parent","URI","WorkGalahadNavStore","WorkplaceSearchTypeaheadConfigs","generateBrowseSessionID","getActiveElement","gkx","immutable","mixin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.events=["session","focus","select","change","execute","blur","focusStartTime","open"];d._squashedEntityIDsByQuery=b("immutable").Map();d._ignoreNextBlur=!1;Object.assign(babelHelpers.assertThisInitialized(d),c);j=babelHelpers.assertThisInitialized(d);return d}var d=c.prototype;d.init=function(a,c,d){__p&&__p();if(window.getSelection===null)throw new Error("Facebar: window.getSelection is null!");this.init=function(){};this.data=a;this.view=c;this.root=d;this.facebarRoot=b("Parent").bySelector(d,"._585-");this.button=b("DOM").find(this.facebarRoot,"._4w98");this.windowFocused=!0;this.isFocused=!1;this.hoverAnimation=null;this.stickyQuery=null;this.settedQuery=null;this.selectedQuery=null;this.currentQuery=null;this.isSuggestionBagdeVisible=!1;this.initSubcomponents();this.initEvents();this.checkValue();this.checkSingleState();this.checkLocal();this.checkCategoryName()};d.initSubcomponents=function(){var a=b("DOM").find(this.root,"._5861");this.input=new(b("FacebarTypeaheadInput"))(a);this.view.setInputElement(this.input.getRawInputElement())};d.initEvents=function(){__p&&__p();var a=this;b("Event").listen(this.root,"keydown",this.keydown.bind(this));b("Event").listen(this.root,"keyup",this.keyup.bind(this));b("Event").listen(this.root.parentNode,"mousedown",this.mousedown.bind(this));this.view.onMousedown(this.viewMousedown.bind(this));b("Event").listen(window,"focus",this.focusWindow.bind(this));b("Event").listen(window,"blur",this.blurWindow.bind(this));this.view.subscribe("select",this.selectView.bind(this));this.view.subscribe("highlight",this.highlightView.bind(this));this.view.subscribe("render",this.highlightView.bind(this));this.input.subscribe("focus",this.focusInput.bind(this));this.input.subscribe("blur",this.blurInput.bind(this));this.input.subscribe("change",this.changeInput.bind(this));this.data.subscribe("activity",this.typeaheadActivity.bind(this));this.data.subscribe("respond",this.completeData.bind(this));this.data.subscribe("nullstateReady",this.performQueryIfVisible.bind(this));b("Arbiter").subscribe("FacebarTypeahead.clearRecentSearches",function(){return a.clearRecentSearches()});b("Event").listen(this.button,"click",this.buttonDownOrClick.bind(this));b("Event").listen(this.button,"mousedown",this.buttonDownOrClick.bind(this));b("Event").listen(this.button,"mouseup",this.buttonUp.bind(this));setTimeout(this.initFocus.bind(this),0)};d.ignoreNextBlur=function(){this._ignoreNextBlur=!0};d.focus=function(){this.input.focus()};d.initFocus=function(){!this.lazyFocused&&b("DOM").contains(this.input.root,b("getActiveElement")())&&(this.lazyFocused=!0,this.isFocused=!0,this._newSession(),this.inform("focus",{catchup:!0}),this.open(!0))};d.setStartTime=function(a){this.inform("focusStartTime",{time:a})};d.cleanQuery=function(a){a=babelHelpers["extends"]({},a)||{};a.structure||(a.structure=new(b("FacebarStructuredText"))());(!b("FacebarGlobalOptions").allowGrammar||b("FacebarJSConstants").nonGrammarTypes[a.type])&&(a.structure=b("FacebarStructuredText").fromString(a.structure.toString()));a.structure instanceof b("FacebarStructuredText")||i(0,3869);return a};d._unlockQuery=function(){var a=this.input.getValue();a.hasType("ent")&&a.trim().getCount()===1&&(this.input.storeSelection(),this.input.setValue(b("FacebarStructuredText").fromString(a.toString())),this.input.restoreSelection())};d.setPageQuery=function(a){a=this.cleanQuery(a);var b=this.input.getValue(),c=a.structure;b=!c.isEmptyOrWhitespace()&&(b.isEmptyOrWhitespace()||!b.matches(c));return this.selectQuery(a,b)};d.selectQuery=function(a,b){b=b!==!1;a=this.cleanQuery(a);(b||!this.selectedQuery)&&((b||this.getValue().isEmptyOrWhitespace())&&this.setQuery(a),this.selectedQuery=a);return a};d.completeSelection=function(){var a=this.view.getSelection();if(a&&!a.search){this.data.saveResult(a);a.structure=a.structure.pad();this.setQuery(a);return!0}return!1};d.setQuery=function(a,c){c===void 0&&(c=!0),a=this.cleanQuery(a),a.structure.hasType("blank")&&(a.structure=new(b("FacebarStructuredText"))(a.structure.toArray().filter(function(a){return a.getType()!="blank"}))),this.input.setValue(a.structure),this.settedQuery=a,this.stickyQuery=c===!1?this.stickyQuery:a,this.checkValue(),this.checkSingleState(),this.checkLocal(),this.checkCategoryName()};d.checkValue=function(a){a===void 0&&(a=!1);if(!a&&this.value&&this.value.getHash()===this.input.getValue().getHash())return;this.performQueryIfVisible();this.showSearchSuggestionBadgeIfPossible()};d.showSearchSuggestionBadgeIfPossible=function(){this.isNullState()?!this.isSuggestionBagdeVisible&&this.data.resultStore.injectedSuggestionCount&&(b("Arbiter").inform("FacebarTypeahead.showSuggestionBadge"),this.isSuggestionBagdeVisible=!0):this.isSuggestionBagdeVisible&&(b("Arbiter").inform("FacebarTypeahead.hideSuggestionBadge"),this.isSuggestionBagdeVisible=!1)};d.checkSingleState=function(){var a=this.input.getValue();this.data.setSingleState(a.getCount()===1&&a.hasType("ent"))};d.checkLocal=function(){var a=this.input.getValue();this.data.setLocal(a.getCount()===1&&a.isLocal())};d.checkCategoryName=function(){var a=this.input.getValue();a.getCategoryName()!==null&&this.data.setCategoryName(a.getCategoryName())};d.isNullState=function(){return this.input.getValue().getHash()===""};d.performQueryIfVisible=function(){if(!this.view.visible)return;this.performQuery()};d.performQuery=function(){this.value=this.nextQuery=this.getValue(),this.view.resetIndex(),this.data.query(this.nextQuery),this.currentQuery=this.nextQuery};d.executeQuery=function(a){this._browseSessionID=b("generateBrowseSessionID")({appName:"www",edge:"keywords_search"});var c=this.isNullState();a=this.cleanQuery(a);this._setSquashedEntityIDsFromQuery(a);var d=this.inform("execute",a),e=this.getSessionID();this.close();b("FacebarGlobalOptions").allowGrammar?this.selectQuery(a):this.selectQuery();a.type!=="shortcut"&&(!c||a.isInjectedSuggestion)&&(a.isInjectedSuggestion&&(b("Arbiter").inform("FacebarTypeahead.removeInjectedSuggestion"),--this.data.resultStore.injectedSuggestionCount,this.performQuery()));d||this._navigateToQuery(a,e,a.csid)};d.getSearchType=function(){return"facebar"};d._newSession=function(){if(this._sessionID!=null)return;this._sessionID=Math.random().toString();this.inform("session",this._sessionID,"state")};d._closeSession=function(){this._sessionID=null,this.inform("session",null,"state")};d.getSessionID=function(){return this._sessionID};d.getBrowseSessionID=function(){return this._browseSessionID};d._navigateToQuery=function(a,c,d){__p&&__p();var e=this.data.facebarConfig;if(a.uri){a.uri.addQueryData(a.extra_uri_params);a.uri.addQueryData({ref:"br_tf"});var f=a.uid!=null&&a.uid.match(/^[0-9]+$/)!=null;if(a.structure&&(a.type=="websuggestion"||a.type==b("KeywordsSearchResultConfig").result_type||a.type=="grammar"&&(!e||String(a.uri.getPath()).startsWith(e.search_path))||f)){e=this.data.getRawStructure(a.structure).text_form;f=b("Base64").encode(encodeURIComponent(e)).replace(/\=+$/,"");e={sid:c,qs:f,gv:this.data.getQueryData().grammar_version,ent_ids:this.getSquashedEntityIDsFromQueryString(String(a)),bsid:this._browseSessionID,preloaded_entity_ids:null,preloaded_entity_type:null,ref:"br_tf",csid:null,high_confidence_argument:null,client_time_ms:Date.now()};d&&(e.csid=d);a.uri.addQueryData({ref:b("FacebarKeywordSearchUtils").encodeFacebarURIParams(e),bs:a.alternateSemantic})}a.uri.addQueryData({epa:"SEARCH_BOX"});b("WorkplaceSearchTypeaheadConfigs").unifySearchBox&&b("WorkGalahadNavStore").getSelectedAppTabID()==="chats"&&a.type==="user"&&(a.uri=b("FacebarURI").getChatURI(a));a.uri.go();return}};d.reset=function(){this.selectQuery(),this.inform("reset"),this.showSearchSuggestionBadgeIfPossible(),b("FacebarKeywordSearchUtils").clearSelectedTabInfo()};d.open=function(a){this.view.show(this.facebarRoot.offsetWidth),this.input.focus({catchup:a}),this.checkValue(!0),this.checkSingleState(),this.checkLocal(),this.checkCategoryName(),this.highlightButton(),this.isFocused||(this.isFocused=!0,this._newSession(),this.inform("focus")),this.inform("open",{catchup:a,sessionID:this._sessionID})};d.close=function(){__p&&__p();this._closeSession();if(this.inform("close")===!1)return;(!this.value||this.value.isEmptyOrWhitespace())&&this.selectedQuery?this.input.setValue(this.selectedQuery.structure):this.stickyQuery&&this.input.setValue(this.stickyQuery.structure);this.input.setHint(null);this.view.hide();this.view.setAutoSelect(!1);this.inform("session",null,"state");this.isFocused=!1;this.unlightButton()};d.getElement=function(){return this.root};d.getValue=function(){return this.input.getValue()};d.getText=function(){return this.getValue().toString()};d.submitQuery=function(a){__p&&__p();if(this.view.index<0){var c=this.input.getValue(),d=this.data.getRawStructure(c);if(d&&!d.is_empty){d=d.raw_text?d.raw_text:b("FacebarResultStoreUtils").getRawTextFromStructured(c.toArray());c=b("FacebarKeywordSearchUtils").makeFacebarEntry(d);c.position=a;this.inform("magSearch",c);this.executeQuery(c)}}else this.view.select()};d.keydown=function(a){__p&&__p();var c=!0,d=b("Event").getKeyCode(a);a.metaKey===!0&&(this.metaOnKeyDown=!0);this.isFocused||this.open();switch(d){case b("Keys").ESC:b("gkx")("817376")?(this.selectQuery(),this.view.highlight(-1)):this.input.blur();break;case b("Keys").UP:this.view.prev();break;case b("Keys").DOWN:this.view.next();break;case b("Keys").RETURN:var e=-2;this.submitQuery(e);break;case b("Keys").PAGE_UP:this.view.first();break;case 222:e=this.input.value.trim();!a.getModifierState("shift")&&e.endsOnType("ent")&&this.input.setValue(e);c=!1;break;default:if(b("gkx")("817376")&&this.input.value!=null&&this.input.value.toString()===""){if(d===b("Keys").LEFT||d===b("Keys").RIGHT){this.view.getSelection()==null?c=!1:d===b("Keys").LEFT?this.view.prevColumn():this.view.nextColumn();break}}else if(d===b("Keys").RIGHT){c=this.input.isSelectionAtEnd()&&this.completeSelection();break}e=d<=46&&d!==8&&d!==32;var f=d>=112&&d<=126,g=d===144||d===145;d=d===91||d===92||d===93||d===224;!e&&!f&&!g&&!a.metaKey&&!d&&(this.data.setSingleState(!1),this.data.setLocal(!1));this.stickyQuery=null;c=!1;break}this.input.storeSelection();c?(a.preventDefault(),a.stopPropagation()):b("gkx")("817376")&&this.view.highlight(-1)};d.keyup=function(a){var c=b("Event").getKeyCode(a),d=c<=46&&c!==8&&c!==32,e=c>=112&&c<=126,f=c===144||c===145;c=c===91||c===92||c===93||c===224;!d&&!e&&!f&&!a.metaKey&&!c&&!this.metaOnKeyDown&&this._unlockQuery();c||(this.metaOnKeyDown=!1)};d.mousedown=function(a){this.input.storeSelection()};d.viewMousedown=function(a){this.mousedown(a),a.preventDefault()};d.focusWindow=function(){this.windowFocused=!0};d.blurWindow=function(){this.windowFocused=!1};d.selectView=function(a,c){__p&&__p();if(!c||!c.selected)return;a=this.cleanQuery(c.selected);if(this.view.getCurrentColumnIndex()>0){var d=b("DOM").scry(c.element,'[role="gridcell"]')[this.view.getCurrentColumnIndex()];d=b("DOM").find(d,"a");d.click();return}this.inform("select",c);this.executeQuery(a)};d.highlightView=function(){var a=this.view.getSelection();this.input.setHint(a?a.structure:null)};d.blurInput=function(){var a=this;if(this._ignoreNextBlur){this._ignoreNextBlur=!1;return}setTimeout(function(){(a.windowFocused||b("URI").getRequestURI().getSubdomain()==="apps")&&(a.input.togglePlaceholder(),a.close())},0)};d.changeInput=function(){this.inform("change"),this.checkValue(),this.checkLocal(),this.inform("change_end")};d.focusInput=function(){this.open(),this.input.togglePlaceholder(!1)};d.updateData=function(){this.view.setLoading(this.loading)};d.completeData=function(a,b){if(b.forceDisplay||this.value&&this.value.matches(b.value)){a=!b.results.length;this.view.render(b.value,b.results,b.isAsync,a);this.tabQueued&&this.completeSelection()&&delete this.tabQueued}};d.typeaheadActivity=function(a,b){this.fetching=b.activity,this.loading!==this.fetching&&(this.loading=this.fetching,this.updateData())};d.getNameTextFromSelected=function(){var a=this.settedQuery&&this.settedQuery.semantic,b=this.data.facebarConfig&&this.data.facebarConfig.name_functions;a=a&&b&&a.match(/[a-z-]+\([^()]+\)/g);if(a)for(var c=0;c<a.length;c++){var d=a[c].match(/([a-z-]+)\(([^()]+)\)/);if(d&&b.includes(d[1]))return d[2]}return this.value.toString()};d.clearRecentSearches=function(){this.data.resultStore.clearRecentSearches()};d.highlightButton=function(){b("CSS").addClass(this.button,"_4w97")};d.unlightButton=function(){b("CSS").matchesSelector(this.button,"._4w97")&&b("CSS").removeClass(this.button,"_4w97")};d.buttonDownOrClick=function(a){a.preventDefault()};d.buttonUp=function(){!this.isFocused?this.focusInput():this.submitQuery(-1)};d._setSquashedEntityIDsFromQuery=function(a){var b=[];a.itemLoggingInfo?a.itemLoggingInfo.kwEntIds?b=a.itemLoggingInfo.kwEntIds:a.itemLoggingInfo.kwEntId&&(b=[a.itemLoggingInfo.kwEntId]):a.entity_ids&&(b=a.entity_ids);this._squashedEntityIDsByQuery=this._squashedEntityIDsByQuery.set(a.text,b)};d.getSquashedEntityIDsFromQueryString=function(a){a=this._squashedEntityIDsByQuery.get(a);return a==null?[]:a};c.clearRecentSearches=function(){b("Arbiter").inform("FacebarTypeahead.clearRecentSearches")};c.getInstance=function(){return j};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("FacebarTypeaheadRefreshNullstate",["emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h;a=function(){__p&&__p();function a(a){this.$1=a.getCore(),h=this.$1.data}var c=a.prototype;c.enable=function(){this.$1.subscribe("focus",function(){g&&(h.refreshNullstate(),g=!1)})};c.disable=function(){};a.setIsNullstateStale=function(a){g=a};a.forceNullstateRefresh=function(a,c){a===void 0&&(a=b("emptyFunction")),c===void 0&&(c=b("emptyFunction")),h.refreshNullstate(a,c)};return a}();e.exports=a}),null);
__d("SearchSuggestionsHighlighter",["React","escapeRegex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e){__p&&__p();a=b("escapeRegex")(a);e=e?"gi":"g";a=new RegExp("( "+a.split(/\s+/).join("| ")+")",e);e=" "+c;var f=[],g=0,h=null;while(!0){h=a.exec(e);if(h==null)break;var i=e.substring(g,h.index);g===0&&(i=i.trimLeft());d?f.push(i):f.push(b("React").createElement("strong",{key:c+"-"+h.index},i));i=h[0];h.index===0&&(i=i.trimLeft());g=h.index+h[0].length;d?f.push(b("React").createElement("strong",{key:c+"-"+g},i)):f.push(i)}d?f.push(e.substring(g,e.length)):f.push(b("React").createElement("strong",{key:c+"-"+e.length},e.substring(g,e.length)));return f}function a(a,b){return g(a,b,!0,!1)}function c(a,b){return g(a,b,!1,!1)}function d(a,b){return g(a,b,!1,!0)}e.exports={highlightMatch:a,highlightNonMatch:c,highlightNonMatchCaseInsensitive:d}}),null);
__d("WorkWebDriverConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADMIN_EMPLOYEES_MEMBER_TABLE:"employees_member_table",ADMIN_EMPLOYEES_GENERATE_CLAIM_DIALOG:"employees_generate_claim_dialog",PAGELET_COMPANY_LOGO:"pagelet_company_logo",PROGRESS_BAR:"progressbar",DASHBOARD_GROUPS_GRID:"dashboard_groups_grid",DASHBOARD_GROUPS_MEMBER_COUNT:"dashboard_groups_member_count",DASHBOARD_GROUPS_ADMIN_COUNT:"dashboard_groups_admin_count",DASHBOARD_IMPORT_PEOPLE_CREATED:"dashboard_import_people_created",DASHBOARD_IMPORT_PEOPLE_FINISHED_BUTTON:"dashboard_import_people_finished_button",DASHBOARD_IMPORT_PEOPLE_OPTIONS:"dashboard_import_people_options",DASHBOARD_IMPORT_PEOPLE_QUICK_ADD_OPTION:"dashboard_import_people_quick_add_option",DASHBOARD_IMPORT_PEOPLE_SPREADSHEET_OPTION:"dashboard_import_people_spreadsheet_option",DASHBOARD_INVITES_SECTION:"dashboard_invites_section",DASHBOARD_INVITES_ALL_BUTTON:"dashboard_invites_all_button",DASHBOARD_INVITES_CUSTOM_EMAIL:"dashboard_invites_custom_email",DASHBOARD_INVITES_DEFAULT_EMAIL_SEND:"dashboard_invites_default_email_send",DASHBOARD_INVITES_CONFIRMATION_DIALOG:"dashboard_invites_confirmation_dialog",DASHBOARD_INVITES_CONFIRM_SEND:"dashboard_invites_confirm_send",DASHBOARD_INVITES_CONFIRMED:"dashboard_invites_confirmed",DASHBOARD_INVITES_PREPARING:"dashboard_invites_preparing",DASHBOARD_IMPORT_PROFILES:"dashboard_import_profiles",DASHBOARD_IMPORT_PROFILES_CONFIRM:"dashboard_import_profiles_confirm",DASHBOARD_IMPORT_PROFILES_SUCCESS:"dashboard_import_profiles_success",DASHBOARD_UPLOAD_SPREADSHEET:"dashboard_upload_spreadsheet",DASHBOARD_LOCALE_SELECTOR_DIALOG:"dashboard_locale_selector_dialog",DASHBOARD_LOCALE_SELECTOR_DIALOG_LOCALE_SELECTOR:"dashboard_locale_selector_dialog_locale_selector",DASHBOARD_LOCALE_SELECTOR_DIALOG_CTA:"dashboard_locale_selector_dialog_cta",DASHBOARD_SETTINGS_COMPANY_NAME:"dashboard_settings_company_name",DASHBOAR_SETTINGS_SAVE:"dashboard_settings_save",DASHBOARD_SETTINGS_SAVED_DIALOG:"dashboard_settings_saved_dialog",GROUP_MORE_ACTIONS:"group_more_actions",GROUP_MORE_ACTIONS_POPOVER:"group_more_actions_popover",GROUP_IMPORT_MEMBERS:"group_import_members",GROUP_IMPORT_MEMBERS_UPLOAD_FILE:"group_import_members_upload_file",GROUP_IMPORT_MEMBERS_INVITE_ALL:"group_import_members_invite_all",GROUP_IMPORT_MEMBERS_SUCCESS:"group_import_members_success",GROUP_PENDING_INVITE_BOX:"group_pending_invite_box",GROUP_SUGGESTION_CARD:"GROUP_SUGGESTION_CARD",GROUP_SETUP_SUBMIT:"GROUP_SETUP_SUBMIT",GROUP_SUBMISSION_SUCCESS:"GROUP_SUBMISSION_SUCCESS",DASHBOARD_ADMINISTRATORS:"dashboard_add_administrators",DASHBOARD_ADMINISTRATORS_INVITE_ADMIN:"dashboard_administrators_invite_admin",DASHBOARD_ADMINISTRATORS_FIND_COLLEAGUES:"dashboard_administrators_find_colleagues",DASHBOARD_ADMINISTRATORS_ROLE_DIALOG:"dashboard_administrators_role_dialog",DASHBOARD_ADMINISTRATORS_ADD_ADMIN:"dashboard_administrators_add_admin",DASHBOARD_ADMINISTRATORS_AWAITING_ACCEPTANCE:"dashboard_administrators_awaiting_acceptance",FAKE_IDP_EMAIL_FIELD:"fake_idp_field",FAKE_IDP_LOGIN_BUTTON:"fake_idp_login_button",FAKE_IDP_LOGOUT_BUTTON:"fake_idp_logout_button",CREATE_WORK_GROUP_DIALOG_SKIP_ADD_MEMBERS:"create_group_dialog_skip_add_members",CREATE_WORK_GROUP_LEFT_NAV_BOOKMARK:"left_nav_item_Create Group",CREATE_WORK_GROUP_NAME_NEXT_BUTTON:"create_work_group_name_next_button",CREATE_WORK_GROUP_NAME_TEXT:"create_work_group_name_text",CREATE_WORK_GROUP_NAME_DIALOG:"create_group_dialog_name",CREATE_WORK_GROUP_PURPOSE_TEAM_GROUP:"create_work_group_purpose_work_team",GROUP_TITLE_IN_GROUP_PAGE:"group_title_in_group_page",COWORKER_INVITE_BOX:"coworker_invite_box",COWORKER_INVITE_DIALOG_INPUT:"coworker_invite_dialog_input",COWORKER_INVITE_DIALOG_LINK:"coworker_invite_dialog_link",COWORKER_INVITE_DIALOG_INPUT_VIEW:"coworker_invite_dialog_input_view",COWORKER_INVITE_INPUT:"coworker_invite_input",COWORKER_INVITE_BUTTON:"coworker_invite_button",COWORKER_INVITE_TOPBAR_BUTTON:"coworker_invite_topbar_button",COWORKER_INVITE_RESULTS:"coworker_invite_results",COWORKER_INVITE_LINK:"coworker_invite_link",WORK_LANDING:"work_landing",WORK_LANDING_TITLE:"work_landing_title",WORK_LANDING_INPUT:"work_landing_input",WORK_LANDING_BUTTON:"work_landing_button",COMPANY_CREATION_LANDING:"company_creation_landing",COMPANY_CREATION_TITLE:"company_creation_title",LOGIN_USERNAME_PASSWORD_FORM:"login_username_password_form",LOGIN_BUTTON:"login_button",LOGIN_USERNAME:"login_username",LOGIN_PASSWORD:"login_password",LOGIN_FORGOT_PASSWORD:"login_forgot_password",LOGIN_FORGOT_PASSWORD_MOBILE:"login_forgot_password_mobile",LOGIN_IDENTIFY_FORM:"login_identify_form",LOGIN_IDENTIFY_USERNAME:"login_identify_username",LOGIN_IDENTIFY_BUTTON:"login_identify_button",SIGNUP_FORM:"signup_form",SIGNUP_FORM_FIELD_NAME:"signup_form_field_name",SIGNUP_FORM_FIELD_PASSWORD:"signup_form_field_password",SIGNUP_FORM_COMMUNITY_NAME:"signup_form_community_name",SIGNUP_FORM_FIELD_COUNTRY_CODE:"signup_form_field_country_code",SIGNUP_FORM_FIELD_COMPANY_NAME:"signup_form_field_company_name",SIGNUP_FORM_FIELD_PHONE_NUMBER:"signup_form_field_phone_number",SIGNUP_FORM_FIELD_TITLE:"signup_form_field_title",SIGNUP_FORM_FIELD_DEPARTMENT:"signup_form_field_department",SIGNUP_FORM_FIELD_INDUSTRY:"signup_form_field_industry",SIGNUP_FORM_FIELD_NGO:"signup_form_field_ngo",SIGNUP_FORM_FIELD_COMPANY_SIZE:"signup_form_field_company_size",SIGNUP_FORM_FIELD_COMPANY_SIZE_TOGGLE:"signup_form_field_company_size_toggle",SIGNUP_FORM_FIELD_B2B:"signup_form_field_b2b",SIGNUP_FORM_FIELD_MARKETING_OPT_IN:"signup_form_field_marketing_opt_in",SIGNUP_FORM_FIELD_GO:"signup_form_field_go",SIGNUP_FORM_FIELD_COMMENT:"signup_form_field_comment",SIGNUP_FORM_FIELD_CUSTOM_AGREEMENT:"signup_form_field_custom_agreement",SIGNUP_FORM_FIELD_USERNAME:"signup_form_field_username",SIGNUP3_FORM_FIELD_EMAIL:"signup3_form_field_email",LOGIN_SSO_FORM:"login_sso_form",LOGIN_SSO_SUBMIT_BUTTON:"login_sso_submit_button",SEARCH_INPUT:"search_input",SEARCH_TYPEAHEAD_VIEW:"search_typeahead_view",SIMPLIFIED_GYSJ_JOIN_GROUP_BUTTON:"simplified_gysj_join_group_button",SIMPLIFIED_GYSJ_SUBMIT_BUTTON:"simplified_gysj_submit_button",TEAM_SETUP_CONTINUE_BUTTON:"team_setup_continue_button",TEAM_SETUP_TEAM_NAME_INPUT:"team_setup_team_name_input",TEAM_SETUP_INVITE_INPUT:"team_setup_invite_input",WORK_INVITE_GRID:"work_invite_grid",WORK_INVITE_GRID_BUTTON_ADD_MORE:"work_invite_grid_button_add_more",WORK_INVITE_GRID_BUTTON_SKIP:"work_invite_grid_button_skip",WORK_INVITE_GRID_BUTTON_SUBMIT:"work_invite_grid_button_submit",WORK_INVITE_GRID_FIELD_EMAIL:"work_invite_grid_field_email",WORK_INVITE_GRID_FIELD_NAME:"work_invite_grid_field_name",WORK_INVITE_GRID_ROW:"work_invite_grid_row",PROFILE_NAME_IN_PROFILE_PAGE:"profile_name_in_profile_page",UPGRADE_TEXT_LINK:"upgrade_text_link",UPGRADE_CONFIRM_BUTTON:"upgrade_confirm_button",UPGRADE_DNS_METHOD_BUTTON:"upgrade_dns_method_button",UPGRADE_EMAIL_METHOD_BUTTON:"upgrade_email_method_button",UPGRADE_EMAIL_METHOD_SEND_BUTTON:"upgrade_email_method_send_button",UPGRADE_HTML_METHOD_BUTTON:"upgrade_html_method_button",UPGRADE_VERIFY_BUTTON:"upgrade_verify_button",EMAILLESS_ACCESS_CODE_FORM:"emailless_access_code_form",EMAILLESS_ACCESS_CODE_FORM_MOBILE:"emailless_access_code_form_mobile",EMAILLESS_ACCESS_CODE_FIELD:"emailless_access_code_field",EMAILLESS_ACCESS_CODE_FIELD_MOBILE:"emailless_access_code_field_mobile",EMAILLESS_ACCESS_CODE_SUBMIT_BUTTON:"emailless_access_code_submit_button",EMAILLESS_ACCESS_CODE_SUBMIT_BUTTON_MOBILE:"emailless_access_code_submit_button_mobile",ACTIVATION_GOLDIE_REACT_COMPONENT:"activation_goldie_react_component",ACTIVATION_GOLDIE_SKIP_BUTTON:"activation_goldie_skip_button",ACTIVATION_GOLDIE_DONE_BUTTON:"activation_goldie_done_button",ACTIVATION_GOLDIE_WELCOME_MESSAGE_COMPONENT:"activation_goldie_welcome_message_component",ACTIVATION_GOLDIE_ADD_PEOPLE_COMPONENT:"activation_goldie_add_people_component",ACTIVATION_GOLDIE_UPLOAD_LOGO_COMPONENT:"activation_goldie_upload_logo_component",ACTIVATION_GOLDIE_TEAM_SETUP_COMPONENT:"activation_goldie_team_setup_component",ACTIVATION_GOLDIE_MOBILE_UPSELL_COMPONENT:"activation_goldie_mobile_upsell_component",ACTIVATION_GOLDIE_SUGGESTED_GROUPS_COMPONENT:"activation_goldie_suggested_groups_component",WORK_GOLDIE_ONBOARDING_TEAM_SETUP_GROUP_NAME_INPUT:"activation_goldie_team_setup_group_name_input",ACTIVATION_GOLDIE_INVITE_TO_SUBCOMMUNITY_COMPONENT:"activation_goldie_invite_to_subcommunity_component",ACTIVATION_GOLDIE_NAME_SUBCOMMUNITY_COMPONENT:"activation_goldie_name_subcommunity_component",ACTIVATION_GOLDIE_JOIN_SUBCOMMUNITY_COMPONENT:"activation_goldie_join_subcommunity_component",ACTIVATION_GOLDIE_SUBCOMMUNITY_ROW_COMPONENT:"activation_goldie_subcommunity_row_component",ACTIVATION_GOLDIE_SWITCH_TO_CREATE_SUBCOMMUNITY_COMPONENT:"activation_goldie_switch_to_create_subcommunity_component",ACTIVATION_GOLDIE_SWITCH_TO_JOIN_SUBCOMMUNITY_COMPONENT:"activation_goldie_switch_to_join_subcommunity_component",PROFILE_ITEM_NAV_BAR:"profile_item_nav_bar",DO_NOT_DISTURB_MENU_NAV_BAR:"do_not_disturb_menu_nav_bar",DO_NOT_DISTURB_ONE_HOUR_OPTION:"do_not_disturb_one_hour_option",DO_NOT_DISTURB_TURN_OFF_OPTION:"do_not_disturb_turn_off_option",ACTIVATION_GOLDIE_SUGGESTED_GROUPS_UNIT:"activation_goldie_suggested_groups_unit",ACTIVATION_GOLDIE_SUGGESTED_GROUPS_UNIT_CELL:"activation_goldie_suggested_groups_unit_cell",WORK_ADMIN_ACTIONS_CONTAINER_COMPONENT:"work_admin_actions_container_component",WORK_ADMIN_ACTIONS_SKIP_BUTTON:"work_admin_actions_skip_button",WORK_ADMIN_ACTIONS_WELCOME_GOAL_COMPONENT:"work_admin_actions_welcome_goal_component",WORK_GOAL_NEWSFEED_WELCOME_CONTINUE_BUTTON:"work_goal_newsfeed_welcome_continue_button",WORK_ADMIN_ACTIONS_ADD_PEOPLE_GOAL_COMPONENT:"work_admin_actions_add_people_goal_component",WORK_ADMIN_ACTIONS_UPLOAD_LOGO_GOAL_COMPONENT:"work_admin_actions_upload_logo_goal_component",WORK_ADMIN_ACTIONS_ADD_DOMAINS_GOAL_COMPONENT:"work_admin_actions_add_domains_goal_component",WORK_ADMIN_ACTIONS_CREATE_GROUP_GOAL_COMPONENT:"work_admin_actions_create_group_goal_component",WORK_ADMIN_ACTIONS_CREATE_GROUP_GOAL_GROUP_NAME_FIELD:"work_admin_actions_create_group_goal_group_name_field",WORK_ADMIN_ACTIONS_CREATE_GROUP_GOAL_SUBMIT_BUTTON:"work_admin_actions_create_group_goal_submit_button",WORK_PROVISIONER_COMPONENT:"work_provisioner_component",WORK_PROVISIONER_ROW_COMPONENT:"work_provisioner_row_component",WORK_PROVISIONER_NAME_INPUT_COMPONENT:"work_provisioner_name_input_component",WORK_PROVISIONER_EMAIL_INPUT_COMPONENT:"work_provisioner_email_input_component",WORK_INVITE_TYPEAHEAD_COMPONENT:"work_invite_typeahead_component",WORK_GOLDIE_ONBOARDING_NAME_COMMUNITY_INPUT:"work_goldie_onboarding_name_community_input",WORK_PEOPLE_DIRECTORY:"work_people_directory",WORK_PEOPLE_DIRECTORY_FILTER:"work_people_directory_filter",WORK_BOOKMARK_COWORKER_BUTTON:"work_bookmark_coworker_button",WORK_BOOKMARKED_COWORKER_BUTTON:"work_bookmarked_coworker_button",WORK_BOOKMARKED_COWORKER_NOTE:"work_bookmarked_coworker_note",WORK_BOOKMARKED_COWORKER_NOTE_BUTTON:"work_bookmarked_coworker_note_button",WORK_BOOKMARKED_COWORKER_NOTE_TEXTAREA:"work_bookmarked_coworker_note_textarea",WORK_BOOKMARKED_COWORKER_PROFILE_CELL:"work_bookmarked_coworker_profile_cell",WORK_BOOKMARKED_COWORKER_PROFILE_CELL_NAME:"work_bookmarked_coworker_profile_cell_name",WORK_BOOKMARKED_COWORKER_PROFILE_CELL_ROLE:"work_bookmarked_coworker_profile_cell_role",WORK_BOOKMARKED_COWORKERS_PAGELET:"work_bookmarked_coworkers_pagelet",WORK_DISCOVERY_FACEPILE:"work_discovery_facepile",WORK_DISCOVERY_FACEPILE_LINK:"work_discovery_facepile_link",WORK_SEE_ALL_BOOKMARKED_COWORKERS_LINK:"work_see_all_bookmarked_coworkers_link",WORK_UNBOOKMARK_COWORKER_LINK:"work_unbookmark_coworker_link",WORK_UNBOOKMARK_COWORKER_POPOVER:"work_unbookmark_coworker_popover",WORK_PROFILE_SKILLS_TILE:"profile_timeline_tiles_unit_pagelets_work_skills",WORK_PROFILE_SKILLS_EDIT_BUTTON:"work_profile_skills_edit_button",WORK_PROFILE_SKILLS_DELETE_BUTTON:"work_profile_skills_delete_button",WORK_PROFILE_SKILLS_ADD_BUTTON:"work_profile_skills_add_button",WORK_PROFILE_SKILLS_DONE_BUTTON:"work_profile_skills_done_button",WORK_PROFILE_SKILLS_TYPEAHEAD:"work_profile_skills_typeahead",WORK_PROFILE_SKILLS_SKILL_ITEM:"work_profile_skills_skill_item",WORK_PROFILE_SKILLS_SKILL_ITEM_NAME:"work_profile_skills_skill_item_name",WORK_PROFILE_SKILLS_SKILL_BUTTON:"work_profile_skills_skill_button",WORK_PROFILE_SKILLS_ENDORSEMENTS_COUNT:"work_profile_skills_endorsements_count",WORK_CHAT_PIN_THREAD_BUTTON_IN_INFO_PANEL:"work_pin_thread_in_info_panel",GIF_SPROUT:"gif-sprout",ACTIVITY_SPROUT:"activity-sprout",ACTIVITY_TAGGER:"activity-tagger-component",ACTIVITY_TYPEAHEAD:"composer-tagger-results",LOCATION_SPROUT:"location-sprout",LOCATION_TAGGER:"location-tagger-component",MARKDOWN_SPROUT:"markdown-sprout",TAG_COWORKER_SPROUT:"people-sprout",TAG_COWORKER_TAGGER:"people-tagger-component",MENTIONS_INPUT_TYPEAHEAD:"group-mentions-input-typeahead",MENTIONS_CONTEXTUAL_LAYER:"mentions-contextual-layer",BULK_ACTION_SAVE_CHANGES:"bulk-action-save-changes",BULK_ACTION_CSV_INVITE_ALL:"bulk-action-csv-invite-all",BULK_ACTION_RESULT:"bulk-action-result"})}),null);
__d("FacebarTypeaheadView",["csx","cx","fbt","Arbiter","ContextualLayer","ContextualLayerUpdateOnScroll","CSS","DOM","FacebarGlobalOptions","FacebarJSConstants","FacebarStructuredText","FacebarTypeaheadGSV2List.react","Parent","React","ReactDOM","ScriptPath","Style","SubscriptionList","TypeaheadView","WorkGalahadAppTabID","WorkGalahadNavActions","WorkWebDriverConstants","performanceNow"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j="unimplemented";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){__p&&__p();var e;e=a.call(this,c,d)||this;e.handleClearHighlight=function(){e.highlight(e.getDefaultIndex(),!1)};e.handleHighlight=function(a){e.highlight(e.getIndexOf(a,e.results),!1),e.resetColumn()};e.handleSelect=function(a){e.handleHighlight(a),e.select(!0)};e.handleRender=function(){e.items=e.getItems()};e.isGalahadEnabled=Boolean(d.isGalahadEnabled);e.isNewClassicSearch=Boolean(d.isNewClassicSearch);e.element=c;e.sid="";e.index=-1;e.warningShown=!1;e.autoSelect=!1;e.flipCount=0;e.loading=!1;e.events=["highlight","render","filter","show"];e.mousedownSubscriptions=new(b("SubscriptionList"))();return e}var d=c.prototype;d.init=function(){this.initializeElements()};d.onMousedown=function(a){this.mousedownSubscriptions.add(a)};d.initGSV2Elements=function(){this.element,this.results=[],this.keywordResults=[],this.entityResults=[]};d.initializeElements=function(){var a=this,c=this.element;Event.listen(this.element,"mousedown",function(b){return a.mousedownSubscriptions.fireCallbacks(b)});this.content=b("DOM").find(c,"._21r");this.warningNode=b("DOM").find(c,"._553e");this.resultsContainer=b("DOM").create("div");this.initGSV2Elements()};d.initializeList=function(){this.renderTypeaheadList(),this.content.appendChild(this.resultsContainer)};d.initializeLayer=function(){this.layer=new(b("ContextualLayer"))({context:b("Parent").bySelector(this.causalElement,"._585-"),position:"below",causalElement:this.causalElement,shouldSetARIAProperties:!1,"data-testid":b("WorkWebDriverConstants").SEARCH_TYPEAHEAD_VIEW},this.element).enableBehavior(b("ContextualLayerUpdateOnScroll"));var a=this.layer.getRoot();a.setAttribute("role","grid");a=this.layer.getContentRoot();this.root=b("DOM").find(a,"._50c9");b("CSS").addClass(a,"_5tlx");b("CSS").addClass(a,"_5xzd");this.wrapper=a};d.setInputElement=function(a){this.setAccessibilityControlElement(a),this.causalElement=a,this.isGalahadEnabled||this.initializeLayer(),this.initializeList()};d.setAutoSelect=function(a){this.autoSelect=a,this.index===-1&&a&&this.first()};d.getIndexOf=function(a,b){for(var c=0;c<b.length;c++)if(a.semantic===b[c].semantic&&a.isSeeMore===b[c].isSeeMore&&a.text===b[c].text)return c;return-1};d.getDefaultIndex=function(){return-1};d.show=function(c){if(!this.visible){!this.isGalahadEnabled?(this.inform("beforeShow",this.layer),b("Style").set(this.wrapper,"minWidth",c+"px")):b("WorkGalahadNavActions").selectAppTabID(b("WorkGalahadAppTabID").SEARCH);c=a.prototype.show.call(this);this.first();this.isGalahadEnabled||(this.layer.show(),this.layer.updatePosition());this.inform("show");b("Arbiter").inform("layer_shown",{type:"FacebarTypeahead"});return c}};d.hide=function(){this.visible&&(this.isGalahadEnabled||this.layer.hide(),a.prototype.hide.call(this),this.inform("hide"),b("Arbiter").inform("layer_hidden",{type:"FacebarTypeahead"}),this.flipCount=0);return this};d.select=function(c){var d=this.results&&this.results[this.index];if(!d){this.inform("quickSelect");return}d=this.inform("beforeSelect",{index:this.index,selected:d});d!==!1&&(b("ScriptPath").setClickPointInfo({click:"Search"}),a.prototype.select.call(this,c))};d.processGSV2Results=function(a){var b=this;this.keywordResults=[];this.entityResults=[];var c=[],d=[],e=[],f=a.some(function(a){return a.isSingleState});a.forEach(function(a){b.entityResults.push(a)});f&&(this.keywordResults=e.concat(d.concat(c)));return this.keywordResults.concat(this.entityResults)};d.buildResultsData=function(a,b){__p&&__p();var c=String(this.value);a.forEach(function(a){a.query_string=c});this.results=a;this.results=this.processGSV2Results(a);if(this.seeMoreResult){a=this.results.indexOf(this.seeMoreResult);a>-1&&this.results.splice(a,1);this.seeMoreResult=null}!this.isNullState()&&!b&&(this.seeMoreResult=this.inform("seeMore",{value:c,results:this.results}),this.seeMoreResult&&(this.isGalahadEnabled?this.results.unshift(this.seeMoreResult):this.results.push(this.seeMoreResult),this.inform("afterSeeMore",{results:this.results})))};d.buildResultsNoRegeneration=function(a,c){this.buildResultsData(a,c);a=b("performanceNow")();this.renderTypeaheadList({results:this.results,loading:this.loading});this.inform("logPerformanceTiming",{field:"build_results_set_props_duration",value:b("performanceNow")()-a})};d.buildResults=function(a){var b=a.some(function(a){return a.isSingleState});this.buildResultsNoRegeneration(a,b);return this.resultsContainer};d.getGSV2Items=function(){return a.prototype.getItems.call(this).filter(function(a){return!b("CSS").matchesSelector(a,"._3su")})};d.getItems=function(){return this.getGSV2Items()};d.render=function(c,d,e,f){this.inform("filter",{results:d,value:c});var g=!c||c instanceof b("FacebarStructuredText")&&c.isEmptyOrWhitespace();this.isGalahadEnabled||b("CSS").conditionClass(this.wrapper,"_5qz2",!d.length&&g);var h=d[0];f&&!g||(h&&h.results_set_type===j?h.error_info.suppress||this.showWarning(h.error_info.errorMessage||i._("This search isn't currently supported.")):this.hideWarning());d=d.filter(function(a){return a.results_set_type!==j});a.prototype.render.call(this,c,d,e)};d.reset=function(){this.index=-1;this.items=[];this.results=[];this.value="";this.buildResults([]);this.inform("reset");return this};d.resetIndex=function(){this.index=this.getDefaultIndex()};d.showWarning=function(a){b("CSS").show(this.warningNode),b("DOM").setContent(this.warningNode,a),this.warningShown=!0,this.highlight(-1,!1)};d.hideWarning=function(){b("CSS").hide(this.warningNode),this.warningShown=!1,this.highlight(this.index,!1)};d.setLoading=function(a){this.loading!=a&&(this.loading=a,this.renderTypeaheadList({results:this.results,loading:a}))};d.first=function(){this.index=this.autoSelect?0:-1,this.highlight(this.index)};d.prev=function(){(this.index<0||this.index===0&&this.autoSelect)&&(this.index=this.items.length),this.ignoreMouseover=!0,a.prototype.prev.call(this)};d.next=function(){this.autoSelect&&this.index>=this.items.length-1&&(this.index=-1),this.ignoreMouseover=!0,a.prototype.next.call(this)};d.$FacebarTypeaheadView1=function(a,b){var c=this.results.length-1;a>c?a=-1:a<-1&&(a=c);this.index=a;c={controlledHighlight:!0,highlightedResult:this.results[this.index],loading:this.loading,results:this.results};b&&this.inform("highlight",{index:a,selected:this.results[a]});this.visible&&this.renderTypeaheadList(c)};d.highlight=function(b,c){if(this.isNewClassicSearch)this.$FacebarTypeaheadView1(b,c!==!1);else{c=c!==!1&&this.index!==b;var d=this.warningShown||!this.autoSelect?-1:0;a.prototype.highlight.call(this,Math.max(d,b),c)}};d.isNullState=function(){return!String(this.value).trim()};d.copyProps=function(a){return babelHelpers["extends"]({accessibilityElement:this.accessibilityElement,onClearHighlight:this.handleClearHighlight,onHighlight:this.handleHighlight,onRender:this.handleRender,onSelect:this.handleSelect},a)};d.renderGSV2TypeaheadList=function(a,c){b("ReactDOM").render(b("React").createElement(b("FacebarTypeaheadGSV2List.react"),{results:this.results,listProps:a,keywordResults:this.keywordResults,entityResults:this.entityResults,seeMoreResult:this.seeMoreResult,isNewClassicSearch:this.isNewClassicSearch,isNullState:this.isNullState(),accessibilityElement:this.accessibilityElement,onClearHighlight:this.handleClearHighlight,onHighlight:this.handleHighlight,onRender:this.handleRender,onSelect:this.handleSelect}),c)};d.renderTypeaheadList=function(a){a=a||{},this.renderGSV2TypeaheadList(a,this.resultsContainer)};return c}(b("TypeaheadView"));e.exports=a}),null);
__d("FacebarTypeaheadBrowsePreload",["AsyncRequest","XWarmUserRequestArgsController","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this._core=a.core,this._typeahead=a}var c=a.prototype;c.enable=function(){this._core.subscribe("execute",this.preloadOnNavigate.bind(this))};c.preloadOnNavigate=function(a,c){if(c.type==="keyword"){a=b("XWarmUserRequestArgsController").getURIBuilder().setString("query",String(c.text));c.csid&&a.setString("csid",String(c.csid));new(b("AsyncRequest"))().setURI(a.getURI()).setAllowCrossPageTransition(!0).setOption("suppressErrorAlerts",!0).send()}};c.disable=function(){b("emptyFunction")()};return a}();e.exports=a}),null);
__d("FacebarTypeaheadInjectedSuggestion",["csx","cx","fbt","Arbiter","DOM"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=3,k=0,l;a=function(){__p&&__p();function a(a){this.core=a.getCore(),this.$1=this.core.view}var c=a.prototype;c.enable=function(){var a=this;b("Arbiter").subscribe("FacebarTypeahead.injectedSuggestion",function(){return a.addSuggestionTextToSearchBox()});b("Arbiter").subscribe("FacebarTypeahead.removeInjectedSuggestion",function(){return a.removeSuggestionTextToSearchBox()});b("Arbiter").subscribe("FacebarTypeahead.showSuggestionBadge",function(){return a.showSuggestionBadge(!0)});b("Arbiter").subscribe("FacebarTypeahead.hideSuggestionBadge",function(){return a.showSuggestionBadge(!1)})};c.disable=function(){this.$2.unsubscribe()};c.showSuggestionBadge=function(a){var c=b("DOM").scry(this.core.getElement(),"._5861")[0];if(c){c=c.getElementsByClassName("injectedSearchSuggestion")[0];if(!c)return;a?c.style.visibility="visible":c.style.visibility="hidden"}};c.removeSuggestionTextToSearchBox=function(){__p&&__p();if(!k)return;--k;if(!k){var a=b("DOM").scry(this.core.getElement(),"._5861")[0],c=a.getElementsByClassName("injectedSearchSuggestion")[0];a.removeChild(c)}else if(l){a=i._({"suggestion":"{suggestionCount} new suggestion","suggestions":"{suggestionCount} new suggestions"},[i._param("suggestionCount",k),i._enum(k===1?"suggestion":"suggestions",{suggestion:"suggestion",suggestions:"suggestions"})]);l.innerText=a}};c.addSuggestionTextToSearchBox=function(){__p&&__p();if(k)l&&k<j&&(l.innerText=k+1+" new suggestions");else{var a=b("DOM").scry(this.core.getElement(),"._5861")[0];if(a){l=document.createElement("DIV");var c=document.createTextNode("1 new suggestion");l.style.cssFloat="right";l.appendChild(c);c=document.createElement("DIV");c.className="_586j injectedSearchSuggestion";c.appendChild(l);a.appendChild(c)}}k+=1};return a}();e.exports=a}),null);
__d("FacebarTypeaheadNavigation",["Arbiter","FacebarNavigation","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this._core=a.core,this._preserveQuery=!1,this._typeahead=a}var c=a.prototype;c.enable=function(){b("FacebarNavigation").registerBehavior(this),this._core.subscribe("execute",this.executedUserQuery.bind(this))};c.executedUserQuery=function(a,b){this._preserveQuery=!0};c.pageTransition=function(){!this._preserveQuery?(this._core.close(),this._core.reset()):this._preserveQuery=!1};c.setPageQuery=function(a){a=this._core.setPageQuery(a),this._typeahead.inform("navigation",a,"persistent")};return a}();Object.assign(a.prototype,{disable:b("emptyFunction")});e.exports=a}),null);
__d("FacebarTypeaheadPrefixLengthOrderedCache",["Arbiter","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this._typeahead=a}var b=a.prototype;b.enable=function(){this._typeahead.data.inform("setSortFunction",function(a){return function(b,c){if((b.keyword_type==="local"||b.keyword_type==="local_category")&&(c.keyword_type==="local"||c.keyword_type==="local_category"))return 0;if(b.cache_id_length!==c.cache_id_length)return b.cache_id_length-c.cache_id_length;var d=this.getCost(b,a)-this.getCost(c,a);return d!==0?d:(b.semantic||"").localeCompare(c.semantic||"")}.bind(this)}.bind(this),"state")};b.getCost=function(a,b){return a.cost||0};return a}();Object.assign(a.prototype,{disable:b("emptyFunction")});e.exports=a}),null);
__d("FacebarTypeaheadQuickSelect",["FacebarStructuredText","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/search/web/direct_search.php";a=function(){__p&&__p();function a(a){this._core=a.getCore(),this._view=a.getView(),this._input=this._core.input,this._beforeSelectListener=null,this._quickSelectListener=null}var c=a.prototype;c.enable=function(){this._beforeSelectListener=this._view.subscribe("beforeSelect",this._quickSelect.bind(this)),this._quickSelectListener=this._view.subscribe("quickSelect",this._quickSelect.bind(this))};c._quickSelect=function(a,c){__p&&__p();if(c&&c.selected)return!0;a=this._input.getValue().toArray();c=new(b("FacebarStructuredText"))(a);a=c.toString();if(!a)return!0;c=new(b("URI"))(g).addQueryData("q",a);a={input_query:a,type:"quickselect",text:a,position:0,with_mouse:0,semantic:"quickselect("+c.toString()+")",extra_uri_params:{source:"quickselect",sid:this._core.getSessionID()},uri:c};this._core.inform("quickSelectRedirect",a);this._core.executeQuery(a);return!1};c.disable=function(){this._beforeSelectListener&&this._view.unsubscribe(this._beforeSelectListener),this._quickSelectListener&&this._view.unsubscribe(this._quickSelectListener)};return a}();e.exports=a}),null);
__d("SearchTypeaheadRecorder",["AsyncRequest","Banzai","BanzaiNectar","BanzaiScuba","CurrentUser","Event","FacebarGlobalOptions","Keys","TokenizeUtil","Vector","clickRefAction","ge","mapObject","throttle","whitelistObjectKeys"],(function(a,b,c,d,e,f){__p&&__p();var g={WAITING:"WAITING",SUCCESS:"SUCCESS",NO_RESULTS:"NO_RESULTS",ERROR:"ERROR"};a=function(){"use strict";__p&&__p();function a(a){this.init(a),this.initEvents(a)}var c=a.prototype;c.init=function(a){__p&&__p();this.core=a.getCore();this.data=a.getData();this.view=a.getView();this.element=this.core.getElement();this.initTime=Date.now();this._onloadTime=0;this._extraRecorder=[];this.performanceTimings={};this.allFromSingleState=!1;this.allFromNullState=!1;a=b("ge")("search_first_focus");this.initStartTime=a&&a.value;this.bootstrapStats={bootstrapped:0};this.type="legacy_search";this._reset()};c._reset=function(){__p&&__p();this.stats={};this.avgStats={};this.appendStats={};this._backspacing=!1;this.backendQueries=[];this.backendQueriesStatus={};this._topreplace=!1;this._inflightRequests={};var a=Math.random().toString();this.data.setQueryData({sid:a});this.view.setSid(a);this.recordStat("sid",a);this.recordStat("keypressed",0)};c.initEvents=function(){__p&&__p();var a=this;this.core.subscribe("focus",function(a){if(!this.stats.session_start_time){this.recordStat("session_start_time",Date.now());a=new Date();a=a.getTimezoneOffset();a=Date.now()-a*60*1e3;this.recordStat("session_start_time_user_timezone",a);this._lastRenderTime=0;this._firstKeypressTime=null}}.bind(this));this.core.subscribe("blur",function(a){a=Date.now();for(var b in this._inflightRequests){var c=this._inflightRequests[b];c=a-c;this.recordAvgStat("search_endpoint_ms_from_js",c)}this.recordStat("session_end_time",a);this.submit()}.bind(this));this.view.subscribe("select",function(a,b){this.recordStat("time_between_select_and_last_render",Date.now()-this._lastRenderTime),this._firstKeypressTime!=null&&this.recordStat("keypress_to_select_time",Date.now()-this._firstKeypressTime),this.recordSelectInfo(b)}.bind(this));this.view.subscribe("render",function(a,b){this._lastRenderTime=Date.now(),this.recordRender(b)}.bind(this));this.data.subscribe("logPerformanceTiming",function(b,c){a.performanceTimings[c.field]=c.value});this.data.subscribe("logProxygenForkPoolId",function(b,c){a.recordStat(c.field,c.value)});this.data.subscribe("activity",function(a,b){this.recordStat("pending_request",b.activity)}.bind(this));this.data.subscribe("respondValidUids",function(a,b){this.validUids=b.slice(0)}.bind(this));this.data.subscribe("beforeQuery",function(a,b){__p&&__p();if(!b.value){this.query="";this.results=[];this.data.lastNullOrSingleStateFetchStartTime=Date.now();return}this.stats.first_query_time||this.recordStat("first_query_time",Date.now());this.query=b.value;this.queryStartTime||(this.queryStartTime=[]);this.queryStartTime[this.query]=Date.now();this.recordCountStat("num_queries")}.bind(this));this.data.subscribe("queryEndpoint",function(a,b){this.recordCountStat("num_search_ajax_requests"),this.recordAvgStat("endpoint_query_length",b.value.length),this._inflightRequests[b.value]=Date.now()}.bind(this));this.data.subscribe("onload",function(a,b){this._onloadTime=b.time}.bind(this));this.data.subscribe("bootstrapped",function(a,b){this.bootstrapStats.endTime=b.time,this.bootstrapStats.bootstrapped=1}.bind(this));this.core.subscribe("recordFunction",function(a,b){this._extraRecorder.push(b)}.bind(this));this.data.subscribe("endpointStats",function(a,b){a=b.info;b=a.fetch_end-a.fetch_start;a.value?this.recordAvgStat("search_endpoint_ms_from_js",b):this.bootstrapStats[a.type]=b;a.coeff2_ts&&(this.bootstrapStats.coeff2_ts=a.coeff2_ts);typeof a.browserCacheHit!=="undefined"&&this.recordCountStat(a.browserCacheHit?"bootstrap_cachehits":"bootstrap_cachemisses");this._inflightRequests[a.value]&&delete this._inflightRequests[a.value]}.bind(this));this.data.subscribe("fetchComplete",function(b,c){b=c.entries;c=c.value;c&&a.backendQueriesStatus[c]&&(a._addDurationForBackendQuery(a.backendQueriesStatus[c]),a.backendQueriesStatus[c].status=b&&b.length>0?g.SUCCESS:g.NO_RESULTS)});this.data.subscribe("fetchError",function(b,c){b=c.fetch_context;c=b.value;if(b.bootstrap||!c)return;a.backendQueriesStatus[c]&&(a.backendQueriesStatus[c].status=g.ERROR,a._addDurationForBackendQuery(a.backendQueriesStatus[c]))});this.data.subscribe("query",function(a,b){this.recordAvgStat("num_results_from_cache",b.results.length)}.bind(this));this.data.subscribe("backend_topreplace",function(a,b){!1===this._topreplace&&(this.recordStat("backend_topreplace",1),this._topreplace=!0)}.bind(this));this.data.subscribe("completeFetch",function(a,b){if(this.core.scubaInfo){a=b.response;b={recv:b.stats.fetch_end-b.stats.fetch_start,render:Date.now()-b.stats.fetch_start,payload_size:JSON.stringify(a).length};a.payload.entities||(a.payload.entities=this.buildResults());this.logToScuba(a,b,this.core.scubaInfo,this.query,this.type)}}.bind(this));this.data.subscribe("completeCacheFetch",b("throttle")(function(b,c){a.core.scubaInfo&&a.logToScuba({},{},a.core.scubaInfo,a.query,a.type)},500));b("Event").listen(this.element,"keydown",function(a){this.recordStat("keypressed",1),this.recordCountStat("count_keys_pressed"),b("Event").getKeyCode(a)==b("Keys").BACKSPACE?!this._backspacing&&this.query&&(this._backspacing=!0,this.recordAppendStat("before_backspace_queries",this.query)):this._backspacing=!1,this._firstKeypressTime==null&&(this._firstKeypressTime=Date.now())}.bind(this));this.data.subscribe("beforeFetch",function(a,b){a=b.request.data?b.request.data.value:null;if(!a)return;this.backendQueries.push(a);this.backendQueriesStatus[a]={status:g.WAITING,start_time:Date.now()}}.bind(this))};c.recordStat=function(a,b){this.stats[a]=b};c.recordCountStat=function(a){var b=this.stats[a];this.stats[a]=b?b+1:1};c.recordAvgStat=function(a,b){this.avgStats[a]?(this.avgStats[a][0]+=b,++this.avgStats[a][1]):this.avgStats[a]=[b,1]};c.recordAppendStat=function(a,b){Object.prototype.hasOwnProperty.call(this.appendStats,a)||(this.appendStats[a]=[]),this.appendStats[a].push(b)};c.recordRender=function(a){__p&&__p();this.results=a.filter(function(a){return a.uid!="search"&&a.type!="disabled_result"&&a.type!="header"}).map(function(a){return babelHelpers["extends"]({},a)});a=null;this.queryStartTime&&(a=this.queryStartTime[this.query]);var c=this.results.every(function(a){return a.fromCache||a.isSeeMore}),d=this.results.every(function(a){return a.isFromGSEF||a.fromCache||a.isSeeMore||a.isJSBootstrapMatch})&&this.results.some(function(a){return a.isFromGSEF}),e=this.results.every(function(a){return a.isGloballyCachedKeyword||a.fromCache||a.isSeeMore||a.isJSBootstrapMatch})&&this.results.some(function(a){return a.isGloballyCachedKeyword}),f=this.results.every(function(a){return a.isNullState}),g=this.results.every(function(a){return a.isSingleState}),h=this.results.every(function(a){return a.exactMatchKeyword||a.isSeeMore});this.allFromSingleState=g;this.allFromNullState=f;if(this.results.length&&this.data.lastNullOrSingleStateFetchStartTime&&f)this.recordStat("time_render_null_state",Date.now()-this.data.lastNullOrSingleStateFetchStartTime),this.data.lastNullOrSingleStateFetchStartTime=null;else if(this.data.lastNullOrSingleStateFetchStartTime&&this.results.length&&g)this.recordStat("time_render_single_state",Date.now()-this.data.lastNullOrSingleStateFetchStartTime);else if(a){f=Date.now()-a;h?this.recordAppendStat("times_render_gs_echo",f):this.recordAppendStat(c?"times_render_local":"times_render_remote",f);!c&&d&&this.recordAppendStat("time_render_gs_early_fetch",f);!c&&e&&this.recordAppendStat("time_render_globally_cached_keywords",f);!c&&!d&&!e&&this.recordAppendStat("time_render_remote_main_call",f)}this.data.lastNullOrSingleStateFetchStartTime=null;g=b("Vector").getViewportDimensions();this.recordStat("window_size_width",g.x);this.recordStat("window_size_height",g.y);this.results.length>0&&!this.stats.first_result_time&&this.recordStat("first_result_time",Date.now());a="typed";this.allFromNullState?a="nullstate":this.allFromSingleState&&(a="singlestate");this.recordStat("last_state",a)};c.recordSelectInfo=function(a){__p&&__p();var c=a.selected,d=a.index;c.groupIndex!==void 0&&(d=a.index-c.groupIndex-1);var e={href:c.path},f=c.dataGT?{gt:JSON.parse(c.dataGT)}:{};b("clickRefAction")("click",e,null,null,f);if(c.uid=="search"||c.uid=="people_search")this.recordStat("selected_position",this.results!=null?this.results.length:0),this.recordStat("selected_search",1);else if(c.uid=="invite")this.recordStat("selected_invite",1);else{e=c.log_type||c.rankType||c.render_type||c.type;f=e=="friend"?"user":e;this.recordStat("selected_"+f,1);this.recordStat("selected_position",d);this.recordStat("selected_type",e);this.recordStat("selected_name_length",c.text.length);this.recordStat("selected_id",c.uid);this.recordStat("selected_degree",c.bootstrapped?1:2);this.recordStat("selected_recent_search",c.recent_search);f=b("TokenizeUtil").parse(this.data.getTextToIndex(c)).tokens;d=h(f,this.query);d&&this.recordStat("matched_terms",d);this.recordStat("selected_text",c.text)}var g={};this._extraRecorder.forEach(function(b){b(a,this.results,g)}.bind(this));this.recordStat("extra_select_info",JSON.stringify(g));this.recordStat("selected_with_mouse",a.clicked?1:0)};c._addDurationForBackendQuery=function(a){a.start_time&&(a.duration=Date.now()-a.start_time,delete a.start_time)};c._dataToSubmit=function(){__p&&__p();this.recordStat("candidate_results",this.buildResults());this.recordStat("query",this.query);this.recordStat("init_time",this.initTime);this.initStartTime&&(this.recordStat("init_start_time",this.initStartTime),this.recordStat("onload_time",this._onloadTime),this.initStartTime=0);this.recordStat("bootstrapped",this.bootstrapStats.bootstrapped);this.bootstrapStats.endTime&&(this.recordStat("bootstrapped_time",this.bootstrapStats.endTime),this.recordStat("user_bootstrap_ms",this.bootstrapStats.user),this.recordStat("other_bootstrap_ms",this.bootstrapStats.other),this.bootstrapStats.endTime=0);var a=this.data.getBootstrapError();a&&this.recordStat("bootstrap_error",1);this.recordStat("coeff2_ts",this.bootstrapStats.coeff2_ts);this.recordStat("max_results",this.data._maxResults);if(this.backendQueries.length>0){this.backendQueries.length>this.data.logBackendQueriesWindow&&(this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow));this.recordStat("backend_queries",this.backendQueries);a=b("whitelistObjectKeys")(this.backendQueriesStatus,this.backendQueries);b("mapObject")(a,this._addDurationForBackendQuery,this);this.recordStat("backend_queries_status",a)}if(b("FacebarGlobalOptions").taSessionLoggingSample){var c=[];this.results.forEach(function(a){c.push([a.text||"",a.category||"",a.subtext||""])});this.recordStat("raw_suggestions_text",c)}a=this.stats;for(var d in this.avgStats){var e=this.avgStats[d];a[d]=e[0]/e[1]}for(var f in this.appendStats)a[f]=JSON.stringify(this.appendStats[f]);return a};c.buildResults=function(){var a=(this.results||[]).map(function(a,c){var d=b("TokenizeUtil").parse(this.data.getTextToIndex(a)).tokens,e=a.rankType||a.render_type||a.type,f=a.log_type,g=a.bootstrapped?1:0,i=a.s_token||"",j=typeof a.index==="undefined"?100:a.index;d=h(d,this.query)||this.query;var k=a.index_rank,l=a.match_type,m=a.l_type,n=a.vertical_type,o=a.prefix_match,p=a.prefix_length,q=a.text,r=a.category,s=a.subtext,t=a.fromCache,u=a.isNullState,v=a.isSingleState,w=a.logInfo;return typeof a.groupIndex==="number"?[a.groupIndex,a.indexInGroup,a.uid,e,g,i,d,k,l,o,p,a.origIndex,m,n,q,r,s,j,t,u,v,w,f]:[0,c,a.uid,e,g,i,d,k,l,o,p,a.origIndex,m,n,q,r,s,j,t,u,v,w,f]}.bind(this));return JSON.stringify(a)};c.submit=function(){var a=this._dataToSubmit();switch(this.data.recordingRoute){case"banzai_vital":b("Banzai").post(this._banzaiRoute,a,{delay:0,retry:!0});break;default:this.submitThroughAsyncRequest(a)}this._reset()};c.addLatencyToSample=function(a,b,c,d){a.addInteger(d+"query_start",c.queryStart),a.addInteger(d+"query_end",c.queryEnd),a.addInteger(d+"keypress_query_end",c.keyPressToQueryEnd),a.addInteger(d+"render",c.render),a.addInteger(d+"keypress_render",c.keyPressToRender),b[d+"query_start"]=c.queryStart,b[d+"query_end"]=c.queryEnd,b[d+"keypress_query_end"]=c.keyPressToQueryEnd,b[d+"render"]=c.render,b[d+"keypress_render"]=c.keyPressToRender};c.logToScuba=function(a,c,d,e,f){__p&&__p();var g=this,h={},i=new(b("BanzaiScuba"))("search_facebar_js",null,{addBrowserFields:!0,addPredictedGeographyFields:!0,addUser:!0,addSearchVersion:!0,addGatekeepers:{facebarGKs:!0}});i.addInteger("sample_rate",d.sample_rate);h.sample_rate=d.sample_rate;i.addNormal("site",d.site);h.site=d.site;i.addDenorm("query",e);h.query=e;d=a.payload||{};d.entities&&(i.addInteger("num_entities",d.entities.length),h.num_entities=d.entities.length);Object.keys(this.performanceTimings).forEach(function(a){i.addInteger(a,g.performanceTimings[a]),h[a]=g.performanceTimings[a]},this);if(d.results||d.entries){var j=(d.results||d.entries).length;i.addInteger("num_results",j);h.num_results=j}d.gzipped_payload_size!==void 0&&(i.addInteger("gzipped_payload_size",d.gzipped_payload_size),h.gzipped_payload_size=d.gzipped_payload_size);c.recv&&c.render>c.recv&&(i.addInteger("time_render",c.render-c.recv),h.time_render=c.render-c.recv,i.addInteger("time_js_async",c.recv),h.time_js_async=c.recv);c.payload_size&&(i.addInteger("payload_size",c.payload_size),h.payload_size=c.payload_size);this.stats.time_render_null_state&&(!e||e.length===0)&&(i.addInteger("time_render_null_state",this.stats.time_render_null_state),h.time_render_null_state=this.stats.time_render_null_state);i.addInteger("query_id",a.queryId);h.query_id=a.queryId;i.addDenorm("user_id",b("CurrentUser").getID());h.user_id=b("CurrentUser").getID();i.addDenorm("session_id",this.stats.sid);h.session_id=this.stats.sid;i.addNormal("typeahead_type",f);h.typeahead_type=f;c.remoteQueryLatencies&&(this.addLatencyToSample(i,h,c.remoteQueryLatencies,"remote_"),i.addInteger("remote_keypress_query_dispatch",c.remoteQueryLatencies.keyPressToQueryDispatch),h.remote_keypress_query_dispatch=c.remoteQueryLatencies.keyPressToQueryDispatch,i.addInteger("remote_keypress_query_start",c.remoteQueryLatencies.keyPressToQueryStart),h.remote_keypress_query_start=c.remoteQueryLatencies.keyPressToQueryStart,i.addNormal("inflight_requests",c.remoteQueryLatencies.inflightRequests),i.addInteger("inflight_requests",c.remoteQueryLatencies.inflightRequests),h.inflight_requests=c.remoteQueryLatencies.inflightRequests,i.addNormal("waiting_queries",c.remoteQueryLatencies.waitingQueries),i.addInteger("waiting_queries",c.remoteQueryLatencies.waitingQueries),h.waiting_queries=c.remoteQueryLatencies.waitingQueries);c.cacheQueryLatencies&&this.addLatencyToSample(i,h,c.cacheQueryLatencies,"cache_");i.post();b("BanzaiNectar").log("search_facebar_js","typeahead",h)};c.submitThroughAsyncRequest=function(a){Object.keys(a).length>0&&new(b("AsyncRequest"))().setURI(this._endPoint).setMethod("POST").setData({stats:a}).setOption("handleErrorAfterUnload",!0).setErrorHandler(function(c){a.retry=!0,new(b("AsyncRequest"))().setURI(this._endPoint).setMethod("POST").setData({stats:a}).setOption("asynchronous_DEPRECATED",!1).send()}.bind(this)).send()};return a}();var h=function(a,c){__p&&__p();if(!a||!c)return;c=b("TokenizeUtil").parse(c);if(c.flatValue[c.flatValue.length-1]===" ")return c.flatValue;var d=c.tokens[c.tokens.length-1],e={};a.forEach(function(a){e[a]=(e[a]||0)+1});var f={};c=c.tokens.slice(0,c.tokens.length-1);c.forEach(function(a){f[a]=(f[a]||0)+1});for(var g=0;g<a.length;++g){var h=a[g];if(h.indexOf(d)===0&&e[h]-(f[h]||0)>0){c.push(h);return c.join(" ")}}return void 0};Object.assign(a.prototype,{_endPoint:"/ajax/typeahead/record_metrics.php",_banzaiRoute:"search"});e.exports=a}),null);
__d("FacebarTypeaheadRecorderBasic",["FacebarTypeaheadRecorder"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(a){this._typeahead=a}var c=a.prototype;c.enable=function(){var a=this._typeahead;this._recorder=new(b("FacebarTypeaheadRecorder"))(a)};c.disable=function(){this._typeahead.unsubscribe(this._subscription),this._recorder=null,this._subscription=null};return a}();Object.assign(a.prototype,{_subscription:null});e.exports=a}),null);
__d("FacebarTypeaheadSeeMore",["cx","fbt","FacebarGSv2Echo","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarStructuredText"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a.getCore(),this.$2=this.$1.view}var c=a.prototype;c.enable=function(){this.$3=this.$2.subscribe("seeMore",this.$4.bind(this))};c.disable=function(){this.$3.unsubscribe()};c.$4=function(a,c){a=c.value.toString().trim();a=b("FacebarGSv2Echo").normalizeValue(a);c=b("FacebarKeywordSearchUtils").makeFacebarEntry(a);var d=h._("See all results for {query}",[h._param("query",a)]);return babelHelpers["extends"]({},c,{query_string:a,icon_class:"_5b1w",isSeeMore:!0,structure:b("FacebarStructuredText").fromString(a),displayStructure:b("FacebarStructuredText").fromString(String(d)),uri:c.uri,tags:{},isSingleState:this.$1.data.getSingleState(),keywordType:b("FacebarJSConstants").keywordTypes.escape,keywordSource:b("FacebarJSConstants").keywordTypes.escape})};return a}();e.exports=a}),null);
__d("FacebarTypeaheadSelectAll",["requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this._core=a.getCore(),this._listener=null}var c=a.prototype;c.enable=function(){var a=this._core.input;this._listener=this._core.subscribe("focus",function(c,d){c=d&&d.catchup;c||b("requestAnimationFrame")(function(){a.selectInput()})})};c.disable=function(){this._listener&&this._core.unsubscribe(this._listener)};return a}();e.exports=a}),null);
__d("FacebarTypeaheadShortcut",["fbt","CurrentUser","KeyboardShortcuts","URI","UserAgent","XFacebookWorkChatInboxController","gkx","translateKey"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this._input=a.core.input,this._view=a.view,this._listener=null}var c=a.prototype;c.enable=function(){this._registerListener()};c.disable=function(){};c._registerListener=function(){this._listener&&this._listener.remove();var a=b("UserAgent").isPlatform("Mac OS X"),c=b("URI").getRequestURI().getPath().startsWith(b("XFacebookWorkChatInboxController").getURIBuilder().getURI().getPath()),d=a?b("translateKey")("cmd"):b("translateKey")("ctrl");this._listener=b("CurrentUser").isWorkUser()&&b("gkx")("792924")&&!c?b("KeyboardShortcuts").register("k",this._selectInput.bind(this),{baseFilters:[function(b){return!a&&b.ctrlKey||a&&b.metaKey}],persistOnTransition:!0,shortcutInfo:{displayKeys:[d,b("translateKey")("k")],description:g._("Search")}}):b("KeyboardShortcuts").register("SLASH",this._selectInput.bind(this),{filter:function(a,b){return!a.getModifiers().shift},persistOnTransition:!0,shortcutInfo:{displayKeys:[b("translateKey")("/")],description:g._("Search")}})};c._selectInput=function(){this._view.setAutoSelect(!0),this._input.focus(),this._input.selectInput(),this._input.inform("shortcut",{shift:!1})};return a}();e.exports=a}),null);
__d("FacebarTypeaheadStickyFilters",["Arbiter","NavigationMessage","Run","SubscriptionsHandler","enumerate","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=5e3,i="/search/top";a=function(){__p&&__p();function a(a){this.core=a.getCore(),this.filters={},this.subscriptionsHandler=new(b("SubscriptionsHandler"))(),this.view=this.core.view}var c=a.prototype;c.enable=function(){__p&&__p();var a=this;this.subscriptionsHandler.addSubscriptions(b("Arbiter").subscribe("SearchLHCFilters.initStickyFilters",function(c,d){__p&&__p();for(var c=b("enumerate")(a.filters),e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;var h=g[0];g=g[1];h in d||(g.active=!1)}for(var h=b("enumerate")(d),g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=h.length)break;e=h[f++]}else{f=h.next();if(f.done)break;e=f.value}c=e;d=c[0];e=c[1];c={value:e,active:!0};a.filters[d]=c}}),b("Arbiter").subscribe(b("NavigationMessage").NAVIGATION_BEGIN,function(b,c){a.resetFiltersIfNotSearching()}),this.view.subscribe("filter",this.handleFilter.bind(this)),this.core.subscribe("magSearch",this.handleSearch.bind(this)),this.view.subscribe("afterSeeMore",this.handleSeeMore.bind(this)));b("Run").onLeave(function(){a.resetFiltersIfNotSearching()})};c.disable=function(){this.teardown()};c.teardown=function(){this.subscriptionsHandler.release()};c.handleFilter=function(a,b){a=b.results.filter(function(a){return!a.isNullState&&!a.isTrending});this.updateResultData(a)};c.handleSearch=function(a,b){this.updateResultData([b])};c.handleSeeMore=function(a,b){a=b.results.filter(function(a){return a.isSeeMore});this.updateResultData(a)};c.resetFiltersIfNotSearching=function(){__p&&__p();var a=this;if(g)return;g=!0;b("setTimeoutAcrossTransitions")(function(){__p&&__p();var c=window.location.pathname;if(c.indexOf(i)===-1)for(var c=b("enumerate")(a.filters),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f=f[1];f.active=!1}g=!1;b("Run").onLeave(function(){a.resetFiltersIfNotSearching()})},h)};c.updateResultData=function(a){__p&&__p();for(var c=0;c<a.length;c++){var d=a[c];if(d.type==="keyword"){var e=d.uri.getQueryData();for(var f=b("enumerate")(this.filters),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];i.active?e[j]=i.value:d.uri.removeQueryData(j)}}}};return a}();e.exports=a}),null);
__d("TypeaheadEarlyUserRequest",["AsyncRequest","XWarmUserRequestArgsController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(a){this._core=a.getCore(),this._listener=null}var c=a.prototype;c.enable=function(){this._listener=this._core.subscribe("focus",function(a,c){new(b("AsyncRequest"))().setURI(b("XWarmUserRequestArgsController").getURIBuilder().getURI()).send(),this.disable()}.bind(this))};c.disable=function(){this._listener&&this._core.unsubscribe(this._listener)};return a}();e.exports=a}),null);
__d("XSearchFacebarSurveyController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/search/facebar_survey/",{id:{type:"String",required:!0},query:{type:"String"},session_id:{type:"String",required:!0},on_session_start:{type:"Exists",defaultValue:!1},result_selected:{type:"Exists",defaultValue:!1}})}),null);