if (self.CavalryLogger) { CavalryLogger.start_js(["wIxlq"]); }

__d("UFICommercialBreakAdapter",["SubscriptionsHandler","UFIInstanceAction","UFISharedDispatcher","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){var d=c.getOption("VideoWithCommercialBreak","controller"),e=new(b("SubscriptionsHandler"))();if(b("gkx")("678266"))return e;d&&d.getIsCommercialBreakOngoing()&&b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").toggleCommercialBreak(a,!0));e.addSubscriptions(c.addListener("commercialBreak/hideUFI",function(){return b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").toggleCommercialBreak(a,!0))}),c.addListener("commercialBreak/showUFI",function(){return b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").toggleCommercialBreak(a,!1))}));return e}var h=new Map();e.exports={start:function(a,b){var c=a.instanceid;if(h.get(c))return;h.set(c,g(a,b))},stop:function(a){var b=h.get(a);if(!b)return;b.release();h["delete"](a)}}}),null);
__d("UFIDomRootAdapter",["csx","DOMQuery","FeedbackSourceType","Parent","UFIRootRegistry"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b){this.$2=null,this.$3=null,this.$5=null,this.$4=a,this.$1=b}var c=a.prototype;c.getParentForm=function(){if(!this.$2){var a=b("Parent").byTag(this.$4,"form");this.$2=a instanceof HTMLElement?a:null}return this.$2};c.getHeadRoot=function(){if(!this.$3){var a=b("UFIRootRegistry").isSnowliftNode(this.$1.rootid);a=a&&this.$1.source!==b("FeedbackSourceType").LIVE_VIDEO_STORIES?"^.fbPhotosSnowliftFeedback ._37uu":"^form ._37uu";a=b("DOMQuery").scry(this.$4,a);this.$3=a&&a[0]||null}return this.$3};c.getSnowliftActionRoot=function(){if(!this.$5){var a=b("DOMQuery").scry(this.$4,"^.snowliftPayloadRoot ._29qf ._37uu");this.$5=a&&a[0]||null}return this.$5};return a}();e.exports=a}),null);
__d("UFIPlayLiveVODHighlightsAdapter",["SubscriptionsHandler","UFIInstanceAction","UFISharedDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){c&&c.isPlayingVODHighlights()&&b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").playLiveVODHighlights(a,!0));var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(c.addListener("playLiveVODHighlights/hideUFI",function(){return b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").playLiveVODHighlights(a,!0))}),c.addListener("playLiveVODHighlights/showUFI",function(){return b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").playLiveVODHighlights(a,!1))}));return d}var h=new Map();e.exports={start:function(a,b){var c=a.instanceid;if(h.get(c))return;h.set(c,g(a,b))},stop:function(a){var b=h.get(a);if(!b)return;b.release();h["delete"](a)}}}),null);
__d("PinnedCommentEventCreateSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"2250727954977320",queryID:"2218482948478923"})}),null);
__d("PinnedCommentEventCreateSubscription",["BaseGraphQLSubscription","PinnedCommentEventCreateSubscriptionWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/"+this.getSubscriptionCallName()+"/video_id_"+a};d.getQueryID=function(){return b("PinnedCommentEventCreateSubscriptionWebGraphQLSubscription").getDocID()};d.getQueryParameters=function(a){return{input:JSON.stringify({client_subscription_id:b("uuid")(),video_id:a})}};d.getSubscriptionCallName=function(){return"pinned_comment_event_create_subscribe"};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null);
__d("FbFeedCommentUFIScroller",["DOMScroll","containsNode","ge","ifRequired"],(function(a,b,c,d,e,f){a={reveal:function(a){if(a){var c=b("ge")("content");c&&b("containsNode")(c,a)?b("DOMScroll").ensureVisible(a,null,60,250):b("ifRequired")("ScrollableArea",function(b){b=b.getInstance(a);b&&b.scrollIntoView(a)})}}};e.exports=a}),null);
__d("UFIAddCommentLink.react",["cx","fbt","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("joinClasses")("UFIRow UFIAddCommentLink"+(this.props.isFirstCommentComponent?" _48pi":"")+(this.props.isLastCommentComponent?" UFILastCommentComponent":"")+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")),c=h._("Write a comment...");return b("React").createElement("div",{className:a,"data-ft":this.props["data-ft"]},b("React").createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},c))};return c}(b("React").Component);e.exports=a}),null);
__d("UFICommentDisabledNotice.react",["cx","React","TextWithEntities.react","linkifyEntityRange"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.feedback,c=a.commentdisablednotice;a.isviewermuted&&(c=a.mutednotice);a.arecommentsdisabled&&(c=a.commentdisablednotice);a=b("React").createElement("div",{className:"UFINotice"},b("React").createElement(b("TextWithEntities.react"),{interpolator:b("linkifyEntityRange"),ranges:c.ranges,aggregatedranges:c.aggregated_ranges,text:c.text}));return b("React").createElement("div",{className:"UFIRow _4204 _2o9m _4oep"},a)};return c}(b("React").Component);c.propTypes={feedback:a.object.isRequired};e.exports=c}),null);
__d("UFICommentFilters",["UFIConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getAuthors:function(a){return a.reduce(function(a,b){b.author&&(a=a.concat(b.author));b.socialcontext&&(a=a.concat(b.socialcontext.topmutualid));b.replyauthors&&b.replyauthors.length&&(a=a.concat(b.replyauthors));b.parentcommentauthorid&&(a=a.concat(b.parentcommentauthorid));return a},[])},isDeleted:function(a){return a.status===b("UFIConstants").UFIStatus.DELETED},isSpam:function(a){return a.status===b("UFIConstants").UFIStatus.SPAM},collectSpamBuckets:function(a,c){a=a.reduce(function(a,d){g.isSpam(d)?a.spamBucket?(a.spamBucket.spamCommentIDs.push(d.id),a.collected.push(null)):(a.spamBucket={status:b("UFIConstants").UFIStatus.SPAM,id:d.id,spamCommentIDs:[d.id]},a.collected.push(a.spamBucket)):(d.isAnnouncement||c[d.author])&&(a.spamBucket=null,a.collected.push(d));return a},{spamBucket:null,collected:[]});return a.collected}};e.exports=g}),null);
__d("UFICommentHeader.react",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("h6",babelHelpers["extends"]({},this.props,{className:"accessible_elem"}),h._("Comments"))};return c}(b("React").Component);e.exports=a}),null);
__d("UFICommentListVisibilityTracker.react",["cx","OnVisible.react","React","SubscriptionsHandler","UFIInstanceAction","UFISharedDispatcher","UFIVisibility","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("React").Children;a=b("React").Component;c=b("React").PropTypes;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.state={isVisible:!1};d.onVisible=function(){d.setState({isVisible:!0}),b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").changeCommentListVisibility(d.props.contextArgs,b("UFIVisibility").VISIBLE))};d.onHidden=function(){d.setState({isVisible:!1}),b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").changeCommentListVisibility(d.props.contextArgs,b("UFIVisibility").HIDDEN))};d.$1=new(b("SubscriptionsHandler"))();return d}var d=c.prototype;d.shouldComponentUpdate=function(a,c){return!b("gkx")("678285")&&this.state.isVisible!==c.isVisible?!1:!0};d.render=function(){var a=h.only(this.props.children),c=b("gkx")("678285");return b("React").createElement("div",{"data-debugstate":c?this.state.isVisible?"partially visible":"hidden":null,className:"_3b-9"+(c?" _3b-a":"")+(c&&this.state.isVisible?" _3b-b":"")+(c&&!this.state.isVisible?" _3b-c":"")+" _j6a",onScroll:this.props.onScroll,ref:this.props.inputRef},b("React").createElement(b("OnVisible.react"),{onVisible:this.onVisible,onHidden:this.onHidden},a))};return c}(a);d.propTypes={contextArgs:c.shape({instanceid:c.string.isRequired,location:c.string}).isRequired};e.exports=d}),null);
__d("UFICommentScrollableArea.react",["React","ScrollableArea.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").Children;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.children,d=a.scrollcomments;a=a.scrollwidth;return d&&a?b("React").createElement(b("ScrollableArea.react"),{width:a},g.only(c)):g.only(c)};return c}(b("React").Component);e.exports=a}),null);
__d("CommentsTimeSpentTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:CommentsTimeSpentLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:CommentsTimeSpentLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:CommentsTimeSpentLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEndTime=function(a){this.$1.end_time=a;return this};c.setOrderingMode=function(a){this.$1.ordering_mode=a;return this};c.setPostFbid=function(a){this.$1.post_fbid=a;return this};c.setStartTime=function(a){this.$1.start_time=a;return this};c.setTimeSpentID=function(a){this.$1.time_spent_id=a;return this};c.setViewerHasInteracted=function(a){this.$1.viewer_has_interacted=a;return this};return a}();c={end_time:!0,ordering_mode:!0,post_fbid:!0,start_time:!0,time_spent_id:!0,viewer_has_interacted:!0};e.exports=a}),null);
__d("CommentsTimeSpentTracker.react",["Banzai","CommentsTimeSpentTypedLogger","Event","OnVisible.react","React","SubscriptionsHandler","TimeSlice","UFIOrderingModeStore","UserActivity","pageID","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"CommentsTimeSpentTracker",firstVisibleTime:0,listeners:new(b("SubscriptionsHandler"))(),propTypes:{contextArgs:a.object.isRequired,targetFBID:a.string.isRequired,viewerHasInteracted:a.bool.isRequired,timeToConsiderViewerInactiveMillis:a.number,pollViewerActivityIntervalMillis:a.number},getDefaultProps:function(){return{timeToConsiderViewerInactiveMillis:3e4,pollViewerActivityIntervalMillis:1e3}},render:function(){return b("React").createElement(b("OnVisible.react"),{onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children)},startInterval:function(){this.firstVisibleTime===0&&(this.firstVisibleTime=this._getTimeInSeconds(),this._checkForIdleViewer())},finishInterval:function(){var a=b("UFIOrderingModeStore").getState().get(this.props.contextArgs.instanceid);if(this.firstVisibleTime&&this.isMounted()){var c=this._getTimeInSeconds();c>this.firstVisibleTime&&new(b("CommentsTimeSpentTypedLogger"))().setViewerHasInteracted(this.props.viewerHasInteracted).setOrderingMode(a).setPostFbid(this.props.targetFBID).setStartTime(this.firstVisibleTime).setEndTime(c).setTimeSpentID(b("pageID")).log();this.firstVisibleTime=0}},componentDidMount:function(){this.listeners.addSubscriptions(b("Banzai").subscribe(b("Banzai").SHUTDOWN,this.finishInterval),b("Event").listen(window,"blur",this.finishInterval))},componentWillUnmount:function(){this.finishInterval(),this.listeners.release()},componentDidUpdate:function(){this.finishInterval()},_getTimeInSeconds:function(){return Math.floor(Date.now()/1e3)},_checkForIdleViewer:function(){var a=this;if(this.firstVisibleTime===0)return;b("UserActivity").isActive(this.props.timeToConsiderViewerInactiveMillis)?b("setTimeout")(b("TimeSlice").guard(function(){a._checkForIdleViewer()},"CommentsTimeSpentTracker checkForIdleViewer",{propagationType:b("TimeSlice").PropagationType.EXECUTION}),this.props.pollViewerActivityIntervalMillis):this.finishInterval()}});e.exports=c}),null);
__d("UFISeenTracker.react",["BanzaiODS","OnVisible.react","React","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var b=!1;return function(){b||(a(),b=!0)}}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.state={seen:!1};b.$1=g(b.logSeen.bind(babelHelpers.assertThisInitialized(b)));return b}var d=c.prototype;d.render=function(){return this.state.seen?this.props.children:b("React").createElement(b("OnVisible.react"),{onVisible:this.$1},this.props.children)};d.logSeen=function(){var a=this;b("setTimeout")(function(){return a.setState({seen:!0})},100);b("BanzaiODS").bumpEntityKey("unsampled_feedback","rendered_ufi_client")};return c}(b("React").Component);a.defaultProps={children:null};e.exports=a}),null);
__d("UFIComponentLogger.react",["CommentsTimeSpentTracker.react","React","UFIConfig","UFISeenTracker.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.children,d=a.contextArgs,e=a.feedback,f=a.hasComments,g=a.isPermalink;a=a.viewerHasInteractedWithComments;if(!c)return null;c=b("React").createElement("div",null,c);if(f&&b("UFIConfig").logCommentsTimespent){f=a||g;c=b("React").createElement(b("CommentsTimeSpentTracker.react"),{contextArgs:d,viewerHasInteracted:f,targetFBID:e.commentstargetfbid},c)}b("UFIConfig").logWhetherUFISeen&&(c=b("React").createElement(b("UFISeenTracker.react"),null,c));return c};return c}(b("React").Component);c.propTypes={contextArgs:a.object.isRequired,feedback:a.object.isRequired,hasComments:a.bool.isRequired,isPermalink:a.bool.isRequired,viewerHasInteractedWithComments:a.bool.isRequired};c.defaultProps={children:null};e.exports=c}),null);
__d("UFIComponents",["React","UFICommentFilters"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a){if(!a)return!1;return a.props.comment&&b("UFICommentFilters").isDeleted(a.props.comment)?!1:!0},h=function(a,b,c){var d=c?a.length-1:0,e=c?-1:a.length;c=c?-1:1;for(d=d;d!=e;d+=c)if(g(a[d])){b(a,d);return a}return a};a={applyToUFIComponents:function(a,c,d){a=h(a,function(a,d){a[d]&&(a[d]=b("React").cloneElement(a[d],c))},!1);a=h(a,function(a,c){a[c]&&(a[c]=b("React").cloneElement(a[c],d))},!0);return a}};e.exports=a}),null);
__d("UFILikeSentenceText.react",["cx","ActorURI","HovercardLinkInterpolator","ProfileBrowserLink","ProfileBrowserTypes","React","TextWithEntities.react","URI","XUFIReactionProfileBrowserController","XUFIReactionProfileDialogController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;function h(a,c,d,e){__p&&__p();if(e.count!=null){var f=b("ProfileBrowserTypes").LIKES,g={id:a.targetfbid,actorid:a.actorid},h=[],i;for(var j=0;j<c.length;j++)if(!c[j].count){i=c[j];i=i.entity;h.push(i.id)}i=new(b("URI"))("/ajax/like/tooltip.php").setQueryData({comment_fbid:a.targetfbid,comment_from:a.actorforpost,seen_user_fbids:h.length?h:!0});i=b("ActorURI").create(i,a.actorforpost);a.displayreactions?(c=b("XUFIReactionProfileDialogController").getURIBuilder().setString("ft_ent_identifier",a.entidentifier).getURI(),c=b("ActorURI").create(c,a.actorforpost),j=b("XUFIReactionProfileBrowserController").getURIBuilder().setString("ft_ent_identifier",a.entidentifier).getURI(),j=b("ActorURI").create(j,a.actorforpost)):(c=b("ProfileBrowserLink").constructDialogURI(f,g).toString(),j=b("ProfileBrowserLink").constructPageURI(f,g).toString());return b("React").createElement("a",{"data-testid":"n_other_people_link",className:"_375l",rel:"dialog",ajaxify:c,href:j,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":i.toString(),role:"button"},d)}else{h={source_feedback_owner_id:a.ownerid,source_feedback_identifier:a.entidentifier};return b("HovercardLinkInterpolator")(d,e,null,null,"ufi",h)}}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.feedback,c=this.props.likeSentenceData,d,e=c.aggregatedranges||c.aggregated_ranges;d=h;d=d.bind(null,a,c.ranges);return b("React").createElement(b("TextWithEntities.react"),{interpolator:d,ranges:Object.values(c.ranges),aggregatedRanges:e,text:c.text})};return c}(b("React").Component);c.propTypes={contextArgs:a.object.isRequired,feedback:a.object.isRequired,likeSentenceData:a.object.isRequired};e.exports=c}),null);
__d("UFIReactionsSocialSentence.react",["cx","ActorURI","BanzaiLogger","Bootloader","FeedbackSourceType","React","UFIReactionsBlingTokens.react","UFIReactionsProfileBrowserUtils","XUFIReactionTooltipController"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onSentenceClick=function(a){if(d.props.reactionsLink)return;var c=d.props.feedback,e=b("UFIReactionsProfileBrowserUtils").getDialogURI({actorID:c.actorforpost,feedbackTargetID:c.entidentifier}).toString();b("BanzaiLogger").log("WebReactionsBlingLoggerConfig",{feedback_id:c.entidentifier,"interface":"www",action:"click",target_type:"social_sentence"});var f=a.currentTarget;b("Bootloader").loadModules(["AsyncDialog"],function(a){a.bootstrap(e,f,"dialog")},"UFIReactionsSocialSentence.react");a.preventDefault()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(a){var c=a.actorforpost;a=a.entidentifier;return{"data-hover":"tooltip","data-tooltip-uri":b("ActorURI").create(b("XUFIReactionTooltipController").getURIBuilder().setString("ft_ent_identifier",a).getURI(),c)}};d.render=function(){__p&&__p();var a=this.props.feedback,c=this.props.contextArgs,d=a.likesentences,e=a.reactioncountreduced,f=a.reactionsentences,g=a.viewerreaction,h=a.reactioncount||0;g=g?h>3:h>2;var i=null;g&&(i=this.$1(a));g=null;f&&f.current?g=f.current.text:d&&d.current?g=d.current.text:e!=="0"&&(g=e);f=null;g&&(f=b("React").createElement("span",{className:"_4arz"},b("React").createElement("span",i,g)));d=null;h&&(d=b("React").createElement("span",{"aria-hidden":!!f,className:"_1g5v"},b("React").createElement("span",i,e)));g=b("UFIReactionsProfileBrowserUtils").getPageURI({actorID:a.actorforpost,feedbackTargetID:a.entidentifier});this.props.reactionsLink&&(g=this.props.reactionsLink);h=c&&c.source===b("FeedbackSourceType").TAHOE;return b("React").createElement("div",{className:"_1vaq"},b("React").createElement("div",{className:"_ipp"},b("React").createElement(b("UFIReactionsBlingTokens.react"),{className:"_4ar- _ipn",contextArgs:c,feedback:a,max:3},b("React").createElement("a",{className:"_2x4v",href:g,onClick:this.onSentenceClick,rel:"ignore",role:"button"},d,h?null:f))))};return c}(b("React").Component);e.exports=a}),null);
__d("UFILikeSentence.react",["cx","fbt","invariant","ActorURI","Bootloader","LeftRight.react","React","SutroBlingBarGatingConfig","UFILikeSentenceText.react","UFIReactionsSocialSentence.react","URI","XUFIGroupSeenByProfileBrowserController","XUFIGroupSeenByProfileDialogController","intlSummarizeNumber","isEmpty","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;var j=null;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={bootloadedSelectorModule:!1,hasSelectorModule:!!j},b)||babelHelpers.assertThisInitialized(c)}c.rendersSocialSentence=function(a){var c=a.feedback;a=a.contextArgs;var d=c.likesentences;c=c.reactionsentences;return a.hideSocialSentence?!1:d&&!b("isEmpty")(d.current)||c&&c.current&&c.current.text};var d=c.prototype;d.componentDidMount=function(){this.$1(this.props)};d.componentDidUpdate=function(){this.$1(this.props)};d.$1=function(a){var c=this;a.showOrderingModeSelector&&!this.state.bootloadedSelectorModule&&(a.contextArgs.entstream&&i(0,2394),b("Bootloader").loadModules(["UFIOrderingModeSelectorContainer.react"],function(a){j=a,c.setState({hasSelectorModule:!0})},"UFILikeSentence.react"),this.setState({bootloadedSelectorModule:!0}))};d.$2=function(){var a=this.props.feedback;a=a.likesentences;a=a||{};a=a.current;return a||{}};d.$3=function(){var a=this.props,c=a.feedback,d=a.contextArgs;if(!this.constructor.rendersSocialSentence(a))return null;if(d.hasReactions&&c.displayreactions)return b("React").createElement(b("UFIReactionsSocialSentence.react"),{feedback:c,contextArgs:d});a=this.$2();return a&&a.text?b("React").createElement("div",{className:"UFILikeSentenceText"},b("React").createElement(b("UFILikeSentenceText.react"),{contextArgs:d,feedback:c,likeSentenceData:a})):null};d.$4=function(){var a=this.props,c=a.contextArgs;a=a.commentCounts;if(!c.showCommentHeader)return null;a=a[c.ftentidentifier];a?(a=b("intlSummarizeNumber")(a),c=h._("Comments ({commentCount})",[h._param("commentCount",a)])):c=h._("Comments");return b("React").createElement("div",{className:"_4bsb"},c)};d.renderOrderingModeSelector=function(){return!this.props.showOrderingModeSelector||!this.state.hasSelectorModule||!j?null:b("React").createElement(j,{key:"orderingmodeselector",contextArgs:this.props.contextArgs,feedback:this.props.feedback})};d.renderSeenState=function(){var a=this.props.feedback;if(!a.seencount||a.seencount===0||this.props.contextArgs.entstream)return null;var c=null;a.seenbyall?a.seencount==1||a.seencount==2&&a.disable_seen_by_everyone?c=h._("Seen by both of you"):c=h._("Seen by everyone"):c=a.seencount==1?h._("Seen by 1"):h._("Seen by {count}",[h._param("count",a.seencount)]);var d=new(b("URI"))("/ajax/ufi/seen_list_hovercard.php").setQueryData({id:a.entidentifier}),e=b("ActorURI").create(b("XUFIGroupSeenByProfileDialogController").getURIBuilder().setInt("id",a.entidentifier).getURI(),a.actorforpost);a=b("ActorURI").create(b("XUFIGroupSeenByProfileBrowserController").getURIBuilder().setInt("id",a.entidentifier).getURI(),a.actorforpost);return b("React").createElement("a",{key:"seenstate",rel:"dialog",ajaxify:e,href:a,"data-hovercard":d.toString(),className:"UFISeenCount UFISeenCountRight"},b("React").createElement("span",{className:"UFISeenCountIcon"}),c)};d.render=function(){__p&&__p();var a=b("SutroBlingBarGatingConfig").enabled,c=this.$3(),d=this.renderOrderingModeSelector(),e=this.renderSeenState();e=[e,d].filter(function(a){return a!==null});var f=null;e.length===1?f=e[0]:e.length>1&&(f=b("React").createElement("div",{className:"_oql"},e));e=null;var g=null;a?e=d:(e=c,g=f);if(!e&&!g)return null;else e||(e=this.$4(),!e&&g&&(e=b("React").createElement("div",null)));d=null;e?d=b("React").createElement(b("LeftRight.react"),{direction:b("LeftRight.react").DIRECTION.right},e,g):d=g;return b("React").createElement("div",{className:b("joinClasses")("UFIRow"+(this.props.feedback.likesentences.isunseen?" UFIUnseenItem":"")+" UFILikeSentence"+(!a&&this.props.isFirstComponent||a&&this.props.isFirstComponent&&f!==null?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")+(this.props.contextArgs.hasReactions?" _4_dr":"")+(a?" _y2x":""))},d)};return c}(b("React").Component);c.propTypes={contextArgs:a.object.isRequired,feedback:a.object.isRequired,commentCounts:a.object,isFirstComponent:a.bool,isLastComponent:a.bool,onOrderingModeChange:a.func,hasCommentOrderInverted:a.bool,showOrderingModeSelector:a.bool};c.contextTypes={dispatch:a.func};e.exports=c}),null);
__d("UFILiveTypingIndicator",["CurrentUser"],(function(a,b,c,d,e,f){"use strict";e.exports={isEnabled:function(){return b("CurrentUser").isLoggedIn()}}}),null);
__d("UFILiveTypingIndicatorContainer.react",["BootloadOnRender.react","FluxContainer","JSResource","LazyComponent.react","React","UFILiveTypingIndicator","UFILiveTypingStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").Component;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.state={everHadTyping:!1,hasTyping:!1,friendTyping:!1};return b}c.getStores=function(){return[b("UFILiveTypingStore")]};c.calculateState=function(a,c){if(!b("UFILiveTypingIndicator").isEnabled())return{everHadTyping:!1,hasTyping:!1,friendTyping:!1};var d=!!b("UFILiveTypingStore").getState()[c.feedbackTargetID];return{everHadTyping:(a||{}).everHadTyping||d,hasTyping:d,friendTyping:b("UFILiveTypingStore").isFriendTyping(c.feedbackTargetID)}};var d=c.prototype;d.shouldComponentUpdate=function(a,b){return a.feedbackTargetID!=this.props.feedbackTargetID||b.everHadTyping!=this.state.everHadTyping||b.hasTyping!=this.state.hasTyping};d.render=function(){return this.state.everHadTyping?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("UFILiveTypingIndicator.react").__setRef("UFILiveTypingIndicatorContainer.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),babelHelpers["extends"]({},this.props,this.state))}):null};return c}(a);e.exports=b("FluxContainer").create(c,{pure:!1,withProps:!0})}),null);
__d("UFIReplySocialSentence.react",["cx","fbt","Badge.react","Image.react","LiveTimer","Middot.react","NumberFormat","React","Timestamp.react","UFIImageBlock.react","WebCommentViewOption","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=43200;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props.isLoading?"UFIReplySocialSentenceLoading":"",c=b("joinClasses")("UFIRow UFIReplySocialSentenceRow"+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")),d,e,f=b("NumberFormat").formatInteger(this.props.replies);if(this.props.isExpanded)d=this.props.replies>1?h._({"*":"Hide {count} Replies"},[h._param("count",f,[0,this.props.replies])]):h._("Hide 1 Reply");else{d=this.props.replies>1?h._({"*":"{count} Replies"},[h._param("count",f,[0,this.props.replies])]):h._("1 Reply");f=this.props.timestamp;if(f){var g=b("LiveTimer").getApproximateServerTime()/1e3-f.time;(g<i||this.props.orderingMode==b("WebCommentViewOption").RECENT_ACTIVITY)&&(e=b("React").createElement("span",{className:"fcg"},b("React").createElement(b("Middot.react"),{key:"middot-timestamp"}),b("React").createElement(b("Timestamp.react"),{shorten:this.props.contextArgs.shortenTimestamp,time:f.time,text:f.text,verbose:f.verbose})))}}g=this.props.author;f=null;var j;if(g&&!this.props.isExpanded){f=b("React").createElement(b("Image.react"),{alt:"",src:g.thumbSrc,className:"img UFIActorImage _54ru"});var k=null;this.props.showVerified&&(k=b("React").createElement(b("Badge.react"),{size:"xsmall",type:"verified"}));var l=g.persona&&g.firstName?h._("{author} ({persona})",[h._param("author",g.firstName),h._param("persona",g.persona)]):g.name;g.i18nGender?j=[h._({"*":"{author}{verified_badge} replied"},[h._param("author",l,[1,g.i18nGender]),h._param("verified_badge",k)])]:j=[h._("{author}{verified_badge} replied",[h._param("author",l),h._param("verified_badge",k)])];j.push(b("React").createElement(b("Middot.react"),{key:"middot-author"}),d)}else j=d;l=g&&!this.props.isExpanded;return b("React").createElement("div",{className:c,"data-ft":this.props["data-ft"]},b("React").createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},b("React").createElement(b("UFIImageBlock.react"),null,b("React").createElement("div",{className:(l?"UFIReplyActorPhotoWrapper":"")+(l?" UFIReplyActor":"")},b("React").createElement("i",{className:(this.props.isExpanded?"":"UFIPagerIcon")+(this.props.isExpanded?" UFICollapseIcon":"")+(l?" UFIIconWithActor":"")}),f),b("React").createElement("span",{className:a},b("React").createElement("span",{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?" UFIReplySocialSentenceVerified":"")},j),e))))};return c}(b("React").Component);e.exports=a}),null);
__d("XUFICommentTooltipController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/tooltip/",{ft_ent_identifier:{type:"String",required:!0},seen_user_fbids:{type:"IntVector",defaultValue:[]}})}),null);
__d("UFICommentCount.react",["cx","fbt","ActorURI","NumberFormat","React","XUFICommentTooltipController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){var a=this.props.commentCount,c=a==1;typeof a==="number"&&(a=b("NumberFormat").formatInteger(a));return h._({"Comment":"{count} comment","Comments":"{count} comments"},[h._param("count",a),h._enum(c?"Comment":"Comments",{Comment:"Comment",Comments:"Comments"})])};d.render=function(){var a=this.props.feedback,c=a.entidentifier;a=a.actorforpost;var d=this.$1(),e="fcg",f=null;c&&a&&(f=b("ActorURI").create(b("XUFICommentTooltipController").getURIBuilder().setString("ft_ent_identifier",c).getURI(),a));if(f)return b("React").createElement("span",{className:e,"data-hover":"tooltip","data-tooltip-uri":f},d);else return b("React").createElement("span",{className:e},d)};return c}(b("React").Component);c.propTypes={commentCount:a.oneOfType([a.number,a.string]).isRequired,feedback:a.object.isRequired};e.exports=c}),null);
__d("XUFIShareTooltipController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/share/tooltip/",{ft_ent_identifier:{type:"String",required:!0},seen_user_fbids:{type:"IntVector",defaultValue:[]}})}),null);
__d("XUFIShareTooltipController.flow",["XUFIShareTooltipController"],(function(a,b,c,d,e,f){e.exports=b("XUFIShareTooltipController")}),null);
__d("UFIShareRow.react",["cx","fbt","invariant","ActorURI","CurrentUser","Layout.react","NumberFormat","React","UFICommentCount.react","URI","XUFIShareTooltipController.flow","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("Layout.react").Column,k=b("Layout.react").FillColumn;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){var a=this.props,c=a.feedback;a=a.shownCommentCount;return a&&Number(a)!==0?b("React").createElement(b("UFICommentCount.react"),{feedback:c,commentCount:a}):null};d.render=function(){__p&&__p();var a=this.props.feedback.sharefbid||this.props.feedback.targetfbid,c=new(b("URI"))("/ajax/shares/view").setQueryData({target_fbid:a});a=new(b("URI"))("/shares/view").setQueryData({id:a});b("CurrentUser").isWorkUser()||(a=a.setSubdomain("www"));var d=this.props.contextArgs.loggedOutLinkConfig;d&&d.showShareLink&&(c=d.shareAjaxifyURI,c||i(0,5668));if(this.props.feedback.sharecount>1){d=this.props.useReducedShareCount?b("intlSummarizeNumber")(this.props.feedback.sharecount):b("NumberFormat").formatInteger(this.props.feedback.sharecount);d=h._("{count} shares",[h._param("count",d)])}else d=h._("1 share");var e="UFIRow UFIShareRow"+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":""),f=b("ActorURI").create(b("XUFIShareTooltipController.flow").getURIBuilder().setString("ft_ent_identifier",this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);f=b("React").createElement("a",{className:"UFIShareLink",rel:"dialog","data-hover":"tooltip","data-tooltip-uri":f,ajaxify:c.toString(),href:a.toString()},d);c=this.$1();c&&(f=b("React").createElement(b("Layout.react"),null,b("React").createElement(k,null,f),b("React").createElement(j,null,c)));return b("React").createElement("div",{className:e},f)};return c}(b("React").Component);e.exports=a}),null);
__d("UFISpamPlaceholder.react",["fbt","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return this.props.isLoading?b("React").createElement("div",{className:"UFIRow"},b("React").createElement("span",{className:"UFISpamCommentWrapper"},b("React").createElement(b("XUISpinner.react"),{className:"mls",background:"light",size:"small"}))):b("React").createElement("div",{className:"UFIRow"},b("React").createElement("a",{href:"#",role:"button",className:"UFISpamCommentLink",onClick:this.props.onClick,"aria-label":g._("Show comments marked as spam")},b("React").createElement("span",{"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":g._("{count} hidden",[g._param("count",this.props.numHidden)]),className:"UFISpamCommentWrapper"},b("React").createElement("i",{className:"placeholderIcon"}))))};return c}(b("React").Component);e.exports=a}),null);
__d("UFISpamPlaceholderContainer.react",["FluxContainer","React","UFISharedDispatcher","UFISpamPlaceholder.react","UFISpamStore","UFIStoryAction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isLoading:!0,numHidden:0,onClick:function(){}},b)||babelHelpers.assertThisInitialized(c)}c.getStores=function(){return[b("UFISpamStore")]};c.calculateState=function(a,c){var d=c.contextArgs,e=c.viewas,f=c.comment,g=c.parentCommentID;return{isLoading:!!b("UFISpamStore").getState()[f.id],numHidden:f.spamCommentIDs.length,onClick:function(){return b("UFISharedDispatcher").dispatch(b("UFIStoryAction").spamFetched(d,e,f.spamCommentIDs,g))}}};var d=c.prototype;d.shouldComponentUpdate=function(a,b){return a.contextArgs!=this.props.contextArgs||a.viewas!=this.props.viewas||a.parentCommentID!=this.props.parentCommentID||b.isLoading!=this.state.isLoading||b.numHidden!=this.state.numHidden};d.render=function(){return b("React").createElement(b("UFISpamPlaceholder.react"),this.state)};return c}(b("React").Component);e.exports=b("FluxContainer").create(a,{pure:!1,withProps:!0})}),null);
__d("UFITTLEndLoggerUtil",["Bootloader","gkx","performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return!a?0:Object.values(a).reduce(function(a,b){b=b;b=b;return a+b.length},0)}a={endCommentTTLMarker:function(a,c){var d=b("performanceNow")();if(!b("gkx")("678283"))return;b("Bootloader").loadModules(["CommentTTLEndLogger"],function(a){a.log({numComments:g(c),timestamp:d})},"UFITTLEndLoggerUtil")}};e.exports=a}),null);
__d("UFITranslateAllRow.react",["cx","ContentTranslationStrings","Link.react","React","UFIInstanceAction","UFISharedDispatcher"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").translateAll(d.props.contextArgs))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"UFIRow"},b("React").createElement("div",{className:"_4upo"},b("React").createElement(b("Link.react"),{onClick:this.$1},b("ContentTranslationStrings").TRANSLATE_ALL_TEXT)))};return c}(b("React").Component);e.exports=a}),null);
__d("StaticUFI.react",["csx","cx","invariant","Arbiter","BanzaiODS","BlueBar","BootloadedComponent.react","BootloadOnRender.react","CommentPrivacyValue","CurrentUser","DOM","FbFeedCommentUFIScroller","FBFeedLocations","FeedbackSourceType","FluxContainer","JSLogger","JSResource","LazyComponent.react","LogHistory","Parent","PrivateCommentsConfig","React","ReactDOM","SearchableEntry","SubscriptionsHandler","SutroBlingBarGatingConfig","TrackingNodes","UFIAddComment.react","UFIAddCommentLink.react","UFIComment.react","UFICommentDisabledNotice.react","UFICommentEditIDStore","UFICommentFilters","UFICommentHeader.react","UFICommentListVisibilityTracker.react","UFIComments","UFICommentScrollableArea.react","UFICommercialBreakStore","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIComponentLogger.react","UFIComponents","UFIConfig","UFIConstants","UFIContainer.react","UFIInteractionStore","UFILikeSentence.react","UFILivePinnedCommentStore","UFILiveTypingIndicatorContainer.react","UFILocallyComposedCommentStore","UFINewCommentsPillUtils","UFIODSLogger","UFIOrderingModeStore","UFIPagerGenerator","UFIPaging","UFIPlayLiveVODHighlightsStore","UFIReplySocialSentence.react","UFIShareRow.react","UFISpamPlaceholderContainer.react","UFIStoryAction","UFIThreadedFacecastCommentsStore","UFIThreadedFacecastCommentsUtils","UFITranslateAllRow.react","UFITTLEndLoggerUtil","UFIUIEvents","UFIVersion","URI","XUISpinner.react","distinctArrayBy","emptyFunction","getElementPosition","getElementRect","getUnboundedScrollPosition","gkx","ifRequired","qex","shallowEqual"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("UFIConfig").UFICommentFilterFallbackWarning||null,k=b("UFIConstants").UFIFeedbackSourceType,l=b("UFIConstants").UFIPayloadSourceType,m=b("UFIConstants").UFIStatus;a=b("React").PropTypes;var n=b("JSLogger").create("StaticUFI"),o=b("React").createElement("div",{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},b("React").createElement(b("XUISpinner.react"),{size:"large"})),p=b("React").createElement("div",{className:"_xtv _32k4"},b("React").createElement("i",null));c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$5=b("React").createRef();d.$42=function(a){b("UFINewCommentsPillUtils").handleScroll(d.props.contextArgs,a)};d.$38=function(a){a.preventDefault(),b("UFINewCommentsPillUtils").scrollToBottom(d.$5.current,d.props.contextArgs.liveVideoNewCommentsPillConfig)};d.loadMoreComments=function(){if(d.$1&&d.refs.topLevelBottomPager&&!(d.props.contextArgs.ftentidentifier in d.props.isActiveLoading)){var a=b("ReactDOM").findDOMNode(d.refs.topLevelBottomPager),c=b("getUnboundedScrollPosition")(window).y;c=c+(document.documentElement?document.documentElement.clientHeight:0)+b("UFIConstants").infiniteScrollRangeForQANDAPermalinks;a instanceof HTMLElement&&a.offsetHeight&&a.offsetTop<c&&d.refs.topLevelBottomPager.props.onPagerClick()}};d.onComment=function(){__p&&__p();var a=b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d)),c=null,e=null,f=null;a instanceof Node&&(c=b("Parent").byTag(a,"form"),e=b("Parent").bySelector(a,"#fbPhotoSnowliftDetails"),f=b("Parent").bySelector(a,"._3g6d"));a=[function(){return d.refs.toplevelcomposer},function(){return d.$46(c)},function(){return d.$46(e)},function(){return d.$46(f)}];a=a.reduce(function(a,b){return a||b()},null);a&&(a.focus(),b("FbFeedCommentUFIScroller").reveal(b("ReactDOM").findDOMNode(a)))};c=d.props.focusReply;d.state={focusReply:c,viewerHasClickedCommentComposer:!1,viewerHasClickedSeeMore:!1,editcommentid:b("UFICommentEditIDStore").getForInstance(d.props.contextArgs.instanceid),localCommentIDs:b("UFILocallyComposedCommentStore").getStateForInstance(d.props.contextArgs.instanceid),inCommercialBreak:b("UFICommercialBreakStore").getValueFor(d.props.contextArgs.instanceid),isPlayingLiveVODHighlights:b("UFIPlayLiveVODHighlightsStore").getValueFor(d.props.contextArgs.instanceid),currentThreadedFacecastCommentID:null,hasNotMounted:!0};return d}c.getStores=function(){return[b("UFIThreadedFacecastCommentsStore")]};c.calculateState=function(a,c){c=c.contextArgs;c=b("UFIThreadedFacecastCommentsStore").getCommentID(c.instanceid);return babelHelpers["extends"]({},a,{currentThreadedFacecastCommentID:c})};var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this;this.setState({hasNotMounted:!1});b("UFIODSLogger").bump("componentDidMount",b("UFIVersion").LEGACY);this.props.contextArgs.source===b("FeedbackSourceType").TAHOE&&(this.props.contextArgs.islivestreaming||this.props.contextArgs.isLiveVOD||b("CurrentUser").isWorkUser()?b("UFIODSLogger").bump("componentDidMount.tahoe1",b("UFIVersion").LEGACY):b("UFIODSLogger").bump("componentDidMount.tahoe2",b("UFIVersion").LEGACY));b("UFITTLEndLoggerUtil").endCommentTTLMarker(this.props.feedback,this.props.ranges);this.$1=!0;b("Arbiter").inform("UFI/displayDone-"+this.props.contextArgs.instanceid);this.$2=new(b("SubscriptionsHandler"))();this.$6();this.$2.addSubscriptions(b("UFICommentEditIDStore").addListener(function(){a.setState({editcommentid:b("UFICommentEditIDStore").getForInstance(a.props.contextArgs.instanceid)})}),b("UFILocallyComposedCommentStore").addListener(function(){a.setState({localCommentIDs:b("UFILocallyComposedCommentStore").getStateForInstance(a.props.contextArgs.instanceid)})}),b("UFICommercialBreakStore").addListener(function(){a.setState({inCommercialBreak:b("UFICommercialBreakStore").getValueFor(a.props.contextArgs.instanceid)})}),b("UFIPlayLiveVODHighlightsStore").addListener(function(){a.setState({isPlayingLiveVODHighlights:b("UFIPlayLiveVODHighlightsStore").getValueFor(a.props.contextArgs.instanceid)})}))};d.UNSAFE_componentWillReceiveProps=function(a){this.props.focusReply!==a.focusReply&&this.setState({focusReply:a.focusReply})};d.componentWillUnmount=function(){this.$1=!1,this.$2&&this.$2.release()};d.shouldComponentUpdate=function(a,c){var d=this.props,e=this.state;return!b("shallowEqual")(e,c)||!b("shallowEqual")(e.loadingSpamIDs,c.loadingSpamIDs)||!b("shallowEqual")(e.localCommentIDs,c.localCommentIDs)||!b("shallowEqual")(e.inCommercialBreak,c.inCommercialBreak)||!b("shallowEqual")(d,a)||!b("shallowEqual")(d.feedback,a.feedback)||!b("shallowEqual")(d.repliesMap,a.repliesMap)||!b("shallowEqual")(d.commentCounts,a.commentCounts)||!b("shallowEqual")(d.deletedCounts,a.deletedCounts)||!b("shallowEqual")(d.privateDeletedCounts,a.privateDeletedCounts)||!b("shallowEqual")(d.availableComments,a.availableComments)||!b("shallowEqual")(d.availablePrivateComments,a.availablePrivateComments)||!b("shallowEqual")(d.ranges,a.ranges)||!b("shallowEqual")(d.authorProfiles,a.authorProfiles)||!b("shallowEqual")(d.commentPermalinks,a.commentPermalinks)||!b("shallowEqual")(d.canAddCommentMap,a.canAddCommentMap)||!b("shallowEqual")(d.canReplyMap,a.canReplyMap)||!b("shallowEqual")(d.isActiveLoading,a.isActiveLoading)||!b("shallowEqual")(d.allSeenActiveLoadDirectionData,a.allSeenActiveLoadDirectionData)||!b("shallowEqual")(d.repliesExpandedMap,a.repliesExpandedMap)||!b("shallowEqual")(d.loadingTranslationsMap,a.loadingTranslationsMap)||!b("shallowEqual")(e.isPlayingLiveVODHighlights,c.isPlayingLiveVODHighlights)||!b("shallowEqual")(d.privateCommentsRange,a.privateCommentsRange)||d.privateCommentsCount!==a.privateCommentsCount||!b("shallowEqual")(d.loadingCommentsForSection,a.loadingCommentsForSection)};d.UNSAFE_componentWillUpdate=function(a,c){this.$3=this.$3||!this.$7(this.props.payloadSource)&&this.props.source===k.NEWS_FEED&&b("BlueBar").hasFixedBlueBar();if(this.$3&&!this.$4){a=b("ReactDOM").findDOMNode(this);a instanceof Element&&(this.$4=b("getElementRect")(a))}};d.componentDidUpdate=function(a,c){this.$6(a);if(this.$3&&this.$4){c=this.$8(this.$4);c!==null&&b("Arbiter").inform("ufi/didUpdate",{offsetY:c});this.$3=!1;this.$4=null}b("shallowEqual")(a.availableComments,this.props.availableComments)||this.$9(a.availableComments,this.props.availableComments)};d.$9=function(a,c){a=b("UFINewCommentsPillUtils").findNumNewComments(a,c);if(a>0){c=this.props.contextArgs;b("Arbiter").inform(b("UFIUIEvents").CommentChanged,{ftentidentifier:c.ftentidentifier});b("UFINewCommentsPillUtils").dispatchNewCommentAction(b("UFIStoryAction").handleNewComments(c,a),c)}};d.$7=function(a){return a===l.UNKNOWN||a===l.INITIAL_SERVER||a===l.USER_ACTION||a===l.COLLAPSE_ACTION};d.$8=function(a){var c=b("getElementPosition")(b("BlueBar").getMaybeFixedRoot());if(a.bottom<c.height){c=a.bottom-a.top;a=b("ReactDOM").findDOMNode(this);if(a instanceof HTMLElement)return a.offsetHeight-c}return null};d.$10=function(){var a=this.props,b=a.contextArgs,c=a.commentCounts,d=a.deletedCounts;a=a.feedback;a=a.commentcountreduced;b=b.ftentidentifier;var e=null;this.$11()&&(a&&isNaN(a)?e=a:e=c[b]-d[b]);return e};d.$6=function(a){__p&&__p();if(this.props.loadingComments)return;this.props.focusTopLevelComposer&&this.onComment();if(this.state.focusReply){a=this.state.focusReply;var c=a.replyID;a=a.initiatorComment;if(!(c in this.refs))return;c=this.refs[c]&&this.refs[c].refs&&this.refs[c].refs.mentionsinput;if(!c)return;c.focus();b("FbFeedCommentUFIScroller").reveal(b("ReactDOM").findDOMNode(c));this.setState({focusReply:null});if(!a)return;var d=c.hasEnteredText(),e=a.author===this.props.feedback.actorforpost,f=!!a.parentcommentid;!d&&!e&&f&&c.insertMention(this.$12(a.author))}};d.$12=function(a){a=this.props.authorProfiles[a];var c=a.type;return new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:c==="friend"?"user":c})};d.$13=function(){return this.props.source===k.ADS};d.$14=function(){return this.props.source===k.LIVE_VIDEO};d.$15=function(){return this.props.source===k.GAMESHOW_DASH};d.$16=function(){var a=this.props.contextArgs;a=a.feedcontext&&JSON.parse(a.feedcontext);return!!(a&&a.is_narrow)};d.$17=function(){return this.props.source===k.COMPACT_SEARCH};d.$18=function(){var a=this.props,c=a.hideOrderingModeSelector,d=a.feedback,e=a.commentCounts;a=a.contextArgs;return!c&&d.orderingmodes&&!this.$15()&&!this.$17()&&e[a.ftentidentifier]>=b("UFIConstants").minCommentsForOrderingModeSelector};d.$19=function(){return!!this.props.contextArgs.hasReactions&&(this.props.contextArgs.feedbackMode==="none"||this.props.contextArgs.feedbackMode==="toggle")&&this.props.feedback.displayreactions&&!this.$20()&&this.props.feedback.orderingmodes&&!this.props.hideOrderingModeSelector};d.$21=function(){var a=this.props,b=a.contextArgs;a=a.ranges;b=b.ftentidentifier;a=a[b].getLength();return this.$22(b,a)};d.$22=function(a,b){var c=this.props.commentCounts;return c[a]==b};d.$23=function(){var a=this.props,b=a.contextArgs;a=a.feedback;return a.seencount>0&&!b.entstream};d.$24=function(){return b("UFILikeSentence.react").rendersSocialSentence(this.props)};d.$25=function(){var a=this.props;return Boolean(a.contextArgs.showCommentHeader)};d.$26=function(){var a=this.props,b=a.contextArgs;a=a.feedback;return this.$13()||this.$14()||b.search||this.hasReactions(a,b)};d.$20=function(){return this.$26()?!1:this.$24()||this.$23()||this.$18()||this.$25()};d.$27=function(){var a=this.props,b=a.contextArgs;a=a.feedback;return this.$13()?!1:Boolean(b.showshares&&a.sharecount&&!this.hasReactions(a,b))};d.$28=function(){var a=b("SutroBlingBarGatingConfig").enabled;return this.$27()&&!this.props.contextArgs.entstream&&!a};d.$11=function(){if(this.$13()||this.$17())return!1;if(this.props.contextArgs.shouldHideCommentsWhenCannotReply&&(this.props.feedback.arecommentsdisabled||!this.$29()||!this.props.feedback.cancomment))return!1;var a=this.props,b=a.availableComments;a=a.availablePrivateComments;return!!(b&&b.length||a&&a.length)};d.$29=function(){var a=this.props,c=a.canAddCommentMap,d=a.contextArgs;a=a.feedback;return this.props.contextArgs.feedLocationType!==b("FBFeedLocations").SURVEY_GALLERY&&a.cancomment&&Boolean(d.showaddcomment)&&Boolean(d.showInlineComposer)&&Boolean(a.actorforpost)&&c[d.ftentidentifier]};d.$30=function(){return this.$29()&&this.$31()&&this.props.hasPagedToplevel};d.$32=function(){var a=this.props.feedback;return a.arecommentsdisabled===!0&&a.cancomment===!1};d.$33=function(){var a=this.props.feedback;return a.isviewermuted===!0&&a.cancomment===!1};d.$34=function(){if(!this.$28())return!1;var a=this.props.contextArgs.isPermalink;a=a?this.$10():null;return Boolean(a)&&Number(a)!==0};d.$35=function(){if(!this.$28())return null;var a=this.props,c=a.contextArgs;a=a.feedback;var d=this.$34()?this.$10():null;return b("React").createElement(b("UFIShareRow.react"),{contextArgs:c,feedback:a,shownCommentCount:d})};d.$36=function(){var a=this.props,c=a.feedback,d=a.contextArgs;a=a.commentCounts;return this.$20()?b("React").createElement(b("UFILikeSentence.react"),{contextArgs:d,feedback:c,commentCounts:a,showOrderingModeSelector:this.$18(),hasCommentOrderInverted:this.$31(),key:"ufi_like_sentence"}):null};d.$37=function(){var a=this.props.authorPinnedComment;if(a&&a.status!==b("UFIConstants").UFIStatus.DELETED){var c=a.id===this.state.editcommentid?b("UFIAddComment.react").renderEditCommentBox(this.props.contextArgs,a,this.props.feedback):this.renderComment(a,0,!0,!1,!0,!1,!1,!!this.props.loadingTranslationsMap[a.id],!0);a=this.renderReplyContainer(a);return b("React").createElement(b("React").Fragment,null,c,a)}return null};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.feedback,e=c.contextArgs,f=c.source;if(e.hideComments)return null;var g=this.$32(),h=this.$33(),i=this.$27(),j=this.$36(),l=!!j,m=this.$37();g=g||h?b("React").createElement(b("UFICommentDisabledNotice.react"),{feedback:c.feedback}):null;h=e.liveVideoNewCommentsPillConfig;var n=null;if(!e.isBroadcasterUFI&&h){var q=h.UFINewCommentsPill;n=b("React").createElement(q,{instanceID:e.instanceid,isLiveVideo:!0,onClick:this.$38})}q=this.$35();if(c.loadingComments)return b("React").createElement(b("UFIContainer.react"),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},j,q,o);var r=this.$11(),s=c.ranges[e.ftentidentifier];s=Number(c.loggingOffset)-s.getOffset();var t=d.targetiscomment,u=null;r&&(u=this.renderCommentArray(c.availableComments,s,t,null));s=null;t=null;var v=d.cancomment;l=l||i||r||v;i=l?b("React").createElement(b("UFICommentHeader.react"),null):null;if(this.$29()||e.loggedOutLinkConfig&&e.loggedOutLinkConfig.showAddComment){v=this.$39();if(v){v=b("UFIOrderingModeStore").isLiveStreaming(e.instanceid);(!e.islivestreaming||!v)&&(s=b("React").createElement(b("UFILiveTypingIndicatorContainer.react"),{contextArgs:e,feedbackTargetID:d.targetfbid}));t=b("React").createElement(b("UFIAddComment.react"),{viewerActorID:d.actorforpost,targetID:d.ownerid,targetName:d.actorname,initialData:null,ref:"toplevelcomposer",isTopLevelComposer:!0,withoutSeparator:!1,editingComment:{},isEditing:!1,mentionsDataSource:d.mentionsdatasource,showSendOnEnterTip:d.showsendonentertip,peopleOutsideCommunityInCommentNotice:d.peopleoutsidecommunityincommentnotice,allowVideoAttachments:d.allowvideoattachments&&!v,allowPhotoAttachments:d.allowphotoattachments&&!v,allowFileAttachments:d.allowfileattachments&&!v,allowStickerAttachments:d.allowstickerattachments&&!v,allowCustomStickerAttachmentsV2:d.allowgaminglivestreamcustomstickersv2&&!v,allowGifAttachments:d.allowgifattachments&&!v,allowBotMentions:d.allowbotmentions&&!v,allowNativeTipJar:d.isnativetipjarenabled,allowFlexibleTipping:d.isflexibletippingenabled,allowTogglePrivateComments:(b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled)&&d.canviewercommentinprivate,privateCommentTarget:d.actorname,contextArgs:e,subtitle:d.subtitle,markViewerHasInteracted:this.state.viewerHasClickedCommentComposer?b("emptyFunction"):function(){return a.setState({viewerHasClickedCommentComposer:!0})},groupID:d.grouporeventid,allowCommentMarkdown:d.iscommentmarkdowneligible,allowCommentFixSuggestions:(b("gkx")("678286")||b("qex")._("724607"))&&b("UFIConfig").shouldShowWritingHelp,showConstituentBadgeV2OptIn:d.showconstituentbadgev2optin,constituentBanner:d.constituentbanneruri,isFirstComponent:!r||b("SutroBlingBarGatingConfig").enabled&&!this.$20()&&this.$31(),commentsTargetID:d.commentstargetfbid,showAddMentionButton:b("gkx")("678287")&&!v})}}v=e.ftentidentifier;var w=this.renderPagers(v,!1,c.ranges[v].getOffset(),c.ranges[v].getLength()),x=w.topPager;w=w.bottomPager;var y=this.$31()?s:null;s=this.$31()?null:s;v=this.$40(v,x,w);var z=v.topFilterWarning;v=v.bottomFilterWarning;var A=this.$19()?b("React").createElement("div",{className:"_11c1"+(this.$31()?"":" _4204")+(b("SutroBlingBarGatingConfig").enabled?" _4mtp":"")},b("React").createElement(b("BootloadedComponent.react"),{alignh:"left",bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("UFIOrderingModeSelectorContainer.react").__setRef("StaticUFI.react"),contextArgs:e,feedback:d})):null,B=b("UFIComponents").applyToUFIComponents([m,A,y,x,z].concat(u,[v,w,s]),{isFirstCommentComponent:!0},{isLastCommentComponent:!0}),C=B.slice(0,5);m=C[0];A=C[1];y=C[2];x=C[3];z=C[4];C=B.slice(-3);v=C[0];w=C[1];s=C[2];u=B.slice(5,-3);C=this.$31()?t:null;var D=this.$31()?null:t;m&&(C=null,D=t);t=this.$30()?b("React").createElement(b("UFIAddCommentLink.react"),{onClick:this.onComment}):null;var E=!0,F=null;e.showCommentNuxForGroupMallAds&&(F=b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("UFICommentNuxForGroupMallAds.react").__setRef("StaticUFI.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{commentNuxContent:e.groupMallAdsCommentNuxContent})}));B=b("UFIComponents").applyToUFIComponents([j,q,C,A,x,z].concat(u,[v,w,D,t]),{isFirstComponent:E},{isLastComponent:!0});E=B.slice(0,6);j=E[0];q=E[1];C=E[2];A=E[3];x=E[4];z=E[5];E=B.slice(-4);v=E[0];w=E[1];D=E[2];t=E[3];u=B.slice(6,-4);E=!!b("UFIInteractionStore").getValueFor(e.instanceid);B=b("ifRequired")("UFIThreadedFacecastCommentsContainer.react",function(a){return a});c=B!=null&&(c.contextArgs.islivestreaming||c.contextArgs.isLiveVOD)&&this.state.currentThreadedFacecastCommentID!=null&&b("UFIThreadedFacecastCommentsUtils").isEnabled(e);var G=this.$41();f=e.isBroadcasterUFI||f===k.LIVE_VIDEO_STORIES||e.isBottomUpCommentStreamingEnabled||e.isLivingRoom;return c&&B!=null?b("React").createElement(b("UFIContainer.react"),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},b("React").createElement(B,{contextArgs:e})):b("React").createElement(b("UFIContainer.react"),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},e.shownub&&l?p:null,j,q,m,i,F,C,b("React").createElement(b("UFICommentListVisibilityTracker.react"),{contextArgs:e,inputRef:this.$5,onScroll:h?this.$42:null},b("React").createElement(b("UFICommentScrollableArea.react"),{scrollcomments:!!e.scrollcomments,scrollwidth:e.scrollwidth||0},b("React").createElement(b("UFIComponentLogger.react"),{contextArgs:e,feedback:d,hasComments:r,isPermalink:e.isPermalink,viewerHasInteractedWithComments:E||this.state.viewerHasClickedCommentComposer||this.state.viewerHasClickedSeeMore},A,y,x,z,f?null:G,u,f?G:null,v,w,s))),D,t,g,n)};d.$41=function(){__p&&__p();var a=b("UFILivePinnedCommentStore").getPinnedCommentID(this.props.contextArgs.ftentidentifier);if(a==null)return null;a=b("UFIComments").getComment(a);if(a==null)return null;var c=a.parentcommentid;if(c!=null){c=b("UFIComments").getComment(c);if(c&&c.status===b("UFIConstants").UFIStatus.DELETED)return null}if(a&&!this.props.authorProfiles[a.author]){b("BanzaiODS").bumpEntityKey("unsampled_feedback","missing_pinned_comment_author");return null}return this.renderComment(a,0,!1,!1,!0,!1,!0,!!this.props.loadingTranslationsMap[a.id])};d.$39=function(){return this.state.editcommentid===null};d.renderCommentArray=function(a,c,d,e){__p&&__p();var f=this,g=this.props,h=g.contextArgs,i=g.feedback,j=g.authorProfiles;g=g.authorPinnedComment;var k=g?!0:!1;if(!a||!a.length)return[];a=b("distinctArrayBy")(a,function(a){return a.id});var l=b("UFICommentFilters").collectSpamBuckets(a,j);return l.reduce(function(a,g,j){__p&&__p();if(!g)return a;if(b("UFICommentFilters").isSpam(g))a.push(b("React").createElement(b("UFISpamPlaceholderContainer.react"),{key:"spam"+g.id,contextArgs:h,viewas:h.viewas,comment:g,parentCommentID:e}));else{if(g.id==f.state.editcommentid)a.push(b("UFIAddComment.react").renderEditCommentBox(h,g,i));else{var m=Math.max(c-j,0),n=j===0&&!k;j=j===l.length-1;var o=!d&&!i.arecommentsdisabled,p=d&&!n;a.push(f.renderComment(g,m,n,j,o,p,!1,!!f.props.loadingTranslationsMap[g.id]));g.id==f.props.translateAllCommentID&&!b("UFIOrderingModeStore").isLiveStreaming(h.instanceid)&&a.push(b("React").createElement(b("UFITranslateAllRow.react"),{key:"translateAll"+g.id,contextArgs:h}))}if(!d&&!b("UFICommentFilters").isDeleted(g)&&!b("UFIOrderingModeStore").isLiveStreaming(h.instanceid)){m=f.renderReplyContainer(g);m&&a.push(m)}}return a},[])};d.renderReplyContainer=function(a){__p&&__p();var c=this,d=this.props,e=d.commentCounts[a.id],f=d.repliesExpandedMap[a.id],g=!f&&a.interestingReplyId,h=d.ranges[a.id];h||n.error("renderReplyContainer range is undefined");var i,j;if(h&&(f||a.interestingReplyId)){i=d.repliesMap[a.id];j=h.getOffset();if(g){var k=i.filter(function(b){return b.id===a.interestingReplyId});k.length!==1?(b("LogHistory").getInstance("ufi").error("comment "+a.id+" claims to have an interesting reply, but there is not exactly 1 comment with that id in the reply list."),i=null):(i=k,j=a.interestingReplyOffset)}}var l;k=null;var o=null,p=null,q=null;if(h&&i){var r=h.getOffset(),s=h.getLength();g&&(r=j,s=1);g=this.renderPagers(a.id,!0,Number(r),s);k=g.topPager;o=g.bottomPager;r=Number(d.loggingOffset)-Number(j);l=this.renderCommentArray(i,r,!0,a.id);s=this.$43(a.id,k,o);p=s.topFilterWarning;q=s.bottomFilterWarning}g=Math.max(e-Number(a.spamreplycount),0);var t;if(h&&!b("UFIOrderingModeStore").isLiveStreaming(this.props.contextArgs.instanceid)&&g&&(f&&i&&i.length>d.replySocialSentenceMaxReplies||!f&&!i)){r=h.isLoadingPrev()||h.isLoadingNext();s=f&&!k&&r;e=null;a.replyauthors&&a.replyauthors.length&&(e=d.authorProfiles[a.replyauthors[0]]);h=i?i.length:0;t=b("React").createElement(b("UFIReplySocialSentence.react"),{contextArgs:d.contextArgs,author:e,replies:f?h:g,timestamp:a.recentreplytimestamp,onClick:function(){return c.context.dispatch(b("UFIStoryAction").toggleReplies(d.contextArgs,a.id))},isLoading:s,isExpanded:f,showVerified:d.feedback.showfeaturedreplies,orderingMode:d.orderingMode})}var u;if(f&&(a.cancomment&&d.canAddCommentMap[a.id]&&!(a.needsApproval||a.canAppeal||a.canSecure))){r=!1;if(l)for(var e=l.length-1;e>=0;e--)if(l[e]){r=l[e].props.isAuthorReply;break}u=this.renderReplyComposer(a,!r)}var v;if(t||k||p||l||q||o||u){h=b("UFIComponents").applyToUFIComponents([t,k,p].concat(l,[q,o,u]),{isFirstComponent:!0},{isLastComponent:!0});g=h.slice(0,3);t=g[0];k=g[1];p=g[2];s=h.slice(-3);q=s[0];o=s[1];u=s[2];l=h.slice(3,-3);f=a.status===m.LIVE_DELETED;v=b("React").createElement(b("UFIContainer.react"),{key:"replies"+a.id,isParentLiveDeleted:f,isPrivateComment:a.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER,isReplyList:!0},t,k,p,l,q,o,u)}return v};d.renderReplyComposer=function(a,c){var d=this.props,e=d.contextArgs,f=d.feedback,g=this.state.editcommentid!==null;g=g&&!a.id;if(g)return null;g=b("UFIOrderingModeStore").isLiveStreaming(e.instanceid);var h=f.actorforpost===a.author;d=d.authorProfiles[a.author];h=a.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER?h?f.actorname:d.name:null;return b("React").createElement(b("UFIAddComment.react"),{viewerActorID:f.actorforpost,replyCommentID:a.id,replyCommentPrivacy:a.privacy_value,groupID:f.grouporeventid,targetID:f.ownerid,initialData:null,ref:"replycomposer-"+a.id,withoutSeparator:c,editingComment:{},isEditing:!1,mentionsDataSource:f.mentionsdatasource,showSendOnEnterTip:!1,peopleOutsideCommunityInCommentNotice:f.peopleoutsidecommunityincommentnotice,allowVideoAttachments:f.allowvideoattachments&&!g,allowPhotoAttachments:f.allowphotoattachments&&!g,allowFileAttachments:f.allowfileattachments&&!g,allowStickerAttachments:f.allowstickerattachments&&!g,allowGifAttachments:f.allowgifattachments&&!g,allowBotMentions:f.allowbotmentions&&!g,allowCommentMarkdown:f.iscommentmarkdowneligible,allowTogglePrivateComments:!1,privateCommentTarget:h,contextArgs:e,subtitle:f.subtitle,showconstituentbadgev2optin:f.showconstituentbadgev2optin,constituentBanner:f.constituentbanneruri,showAddMentionButton:!1})};d.renderComment=function(a,c,d,e,f,g,h,i,j){var l=this;j===void 0&&(j=!1);var m=this.props,n=m.feedback,o=n.actorforpost===a.author,p=a.__typename==="local",q=p||this.state.localCommentIDs[a.id],r=n.showremovemenu||n.viewerid===a.author,s=n.canremoveall&&n.isownerpage&&!o&&!n.grouporeventid,t=m.source!=k.INTERN,u=!!a.parentcommentid,v=a.parentcommentid,w=!0;u&&v&&v in this.props.canReplyMap&&this.props.canReplyMap[v]!==null&&(w=this.props.canReplyMap[v]);u=!!a.isfeatured;v=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.COMMENT,c);c=new(b("URI"))(m.commentPermalinks[a.id]).addQueryData({comment_tracking:v}).toString();return b("React").createElement(b("UFIComment.react"),{key:b("UFIComments").getRenderKey(a.id),isFirst:d,isFirstCommentComponent:d,isLast:e,isStaticUFILoading:this.state.hasNotMounted,showReplyLink:f,hasPartialBorder:g,comment:a,authorProfiles:m.authorProfiles,viewerIsAuthor:o,feedback:n,"data-ft":v,contextArgs:m.contextArgs,hideAsSpamForPageAdmin:s,isLocallyComposed:q,isOptimisticallyRendered:p,isFeatured:u,parentCanComment:w,permalink:c,showPermalink:t,showRemoveReportMenu:r,focusOnMount:a.id===m.commentIDToFocusOnMount,orderingMode:m.orderingMode,featuredCommentIDs:m.featuredCommentIDs,markViewerHasInteracted:this.state.viewerHasClickedSeeMore?b("emptyFunction"):function(){return l.setState({viewerHasClickedSeeMore:!0})},isLivePinnedComment:h,isAuthorPinnedComment:j,showTranslation:i||!!a.translationdata})};d.$40=function(a,b,c){return this.$44(a,b,c,!1)};d.$43=function(a,b,c){return this.$44(a,b,c,!0)};d.$44=function(a,c,d,e){var f=null,g=null;c||(f=this.$45(a,b("UFIPaging").TOP,e));d||(g=this.$45(a,b("UFIPaging").BOTTOM,e));return{topFilterWarning:f,bottomFilterWarning:g}};d.$45=function(a,c,d){var e=this.props.allSeenActiveLoadDirectionData;if(!e)return null;e=e[a];if(!e||!(c in e))return null;e=this.props;return!j||!j.shouldRender(e,a,c,d)?null:b("React").createElement(j,{asReplyWarning:d,targetID:a,pagingDirection:c,ufiProps:e})};d.renderPagers=function(a,c,d,e){__p&&__p();var f=this,g=this.props;if(this.$22(a,e)||this.$13()||this.$17()||!c&&g.hideToplevelPager)return{topPager:null,bottomPager:null};c=g.commentCounts[a];var h=g.deletedCounts[a];Number.isInteger(c)||i(0,255,a);Number.isInteger(h)||i(0,256,a);Number.isInteger(e)||i(0,257);return b("UFIPagerGenerator").renderPagers({commentCount:c,contextArgs:g.contextArgs,currentLength:e,currentOffset:d,deletedCount:h,feedback:g.feedback,onPageCallback:function(c,d){var e=babelHelpers["extends"]({},g.contextArgs,{interactionRequestCorrelationID:b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_TOP_LEVEL_COMMENTS_PAGINATION)});f.context.dispatch(b("UFIStoryAction").pageInComments(e,a,c,d))},orderingMode:g.orderingMode,range:g.ranges[a],targetID:a})};d.$46=function(a){return!a?null:b("DOM").scry(a,'[name="add_comment_text_text"]').concat(b("DOM").scry(a,'[name="add_comment_text"]')).find(function(a){return!b("Parent").byClass(a,"UFIReplyList")})};d.$31=function(){return Boolean(b("UFIOrderingModeStore").isInverted(this.props.orderingMode,this.props.contextArgs.ftentidentifier))};d.hasReactions=function(a,b){return Boolean(a.displayreactions&&b.hasReactions&&(b.feedbackMode==="none"||b.feedbackMode==="toggle"))};return c}(b("React").Component);c.contextTypes={dispatch:a.func};c.defaultProps={commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:!1,loadingSpamIDs:{},loadingTranslationsMap:{}};e.exports=b("FluxContainer").create(c,{pure:!1,withProps:!0})}),null);
__d("EntstreamFeedObjectSave",["cx","CurrentUser","EntstreamFeedObject","EntstreamFeedObjectFollowup","PostsByOtherPreviewObject","SavedStateActions","ge"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={toggleSaveFromUFI:function(a,c,d){__p&&__p();if(!b("CurrentUser").isWorkUser())return;var e=b("EntstreamFeedObject").getRoot(b("ge")(a));e===null&&(e=b("PostsByOtherPreviewObject").getRoot(b("ge")(a)));if(!e)return;if(d===b("SavedStateActions").SAVE)b("EntstreamFeedObjectFollowup").addFollowup(e,c,["_521o","_4-u3","_3yll"]);else if(d===b("SavedStateActions").UNSAVE){a=b("EntstreamFeedObjectFollowup").getFollowup(e);a&&b("EntstreamFeedObjectFollowup").removeFollowup(e)}}};e.exports=a}),null);
__d("UFIBlingItem.react",["cx","fbt","NumberFormat","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=b("NumberFormat").formatInteger(this.props.count);a=a;switch(this.props.itemKey){case"like":a=h._({"Like":"{count} Like","Likes":"{count} Likes"},[h._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:a),h._enum(this.props.count===1?"Like":"Likes",{Like:"Like",Likes:"Likes"})]);break;case"comment":a=h._({"Comment":"{count} Comment","Comments":"{count} Comments"},[h._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:a),h._enum(this.props.count===1?"Comment":"Comments",{Comment:"Comment",Comments:"Comments"})]);break;case"reaction":a=h._({"Reaction":"{count} reaction","Reactions":"{count} reactions"},[h._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:a),h._enum(this.props.count===1?"Reaction":"Reactions",{Reaction:"Reaction",Reactions:"Reactions"})]);break;case"reshare":a=h._({"Share":"{count} Share","Shares":"{count} Shares"},[h._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:a),h._enum(this.props.count===1?"Share":"Shares",{Share:"Share",Shares:"Shares"})]);break}return b("React").createElement("span",{className:"_2u_j"},a)};return c}(b("React").Component);e.exports=a}),null);
__d("UFIBlingBox.react",["cx","fbt","NumberFormat","React","UFIBlingItem.react","UFIReactionTypes"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=[],c="",d=this.props,e=d.likes,f=d.likesreduced,g=d.reactionCount,i=d.reactionCountMap;d=d.reactionCountReduced;if(e||g){i=i&&i[b("UFIReactionTypes").LIKE]["default"]!==g;a.push(b("React").createElement(b("UFIBlingItem.react"),{className:a.length>0?"mls":"",count:i?g||0:e,countreduced:i?d||"":f,itemKey:i?"reaction":"like",key:"like"}));c+=this.props.likes==1?h._("1 like"):h._({"*":"{count} likes"},[h._param("count",this.props.likes,[0])]);c+=" "}if(this.props.comments){g=this.props.commentsreduced;this.props.contextArgs.islivestreaming&&(g=b("NumberFormat").formatInteger(this.props.comments));a.push(b("React").createElement(b("UFIBlingItem.react"),{className:a.length>0?"mls":"",contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:g,itemKey:"comment",key:"comment"}));c+=this.props.comments==1?h._("1 comment"):h._({"*":"{count} comments"},[h._param("count",this.props.comments,[0])]);c+=" "}this.props.reshares&&(a.push(b("React").createElement(b("UFIBlingItem.react"),{className:a.length>0?"mls":"",count:this.props.reshares,countreduced:this.props.resharesreduced,itemKey:"reshare",key:"reshare"})),c+=this.props.reshares==1?h._("1 share"):h._({"*":"{count} shares"},[h._param("count",this.props.reshares,[0])]));if(this.props.readOnly)return b("React").createElement("span",{"aria-label":c},a);else{e=this.props.contextArgs.commentajaxify;return b("React").createElement("a",{ajaxify:e,href:this.props.permalink,"data-ft":this.props["data-ft"],"data-comment-prelude-ref":this.props["data-comment-prelude-ref"],"aria-label":c,onClick:this.props.onClick,rel:e?"dialog":"ignore"},a)}};return c}(b("React").Component);c.propTypes={contextArgs:a.object.isRequired,"data-ft":a.string,"data-comment-prelude-ref":a.string,comments:a.number,commentsreduced:a.string,likes:a.number,likesreduced:a.string,nfb:a.number,onClick:a.func,permalink:a.string,reactionCount:a.number,reactionCountMap:a.object,reactionCountReduced:a.string,reshares:a.number,resharesreduced:a.string,readOnly:a.bool};e.exports=c}),null);
__d("UFIReactionsBlingSocialSentence.react",["csx","cx","fbt","ActorURI","BanzaiLogger","Bootloader","BootloadOnRender.react","DOMQuery","FeedbackSourceType","JSResource","LazyComponent.react","NumberFormat","PagesPrivateReplyConstants","React","SutroPhase2GatingConfig","Tooltip.react","UFIPrivateReplyIndicator.react","UFIReactionsSocialSentence.react","URI","XUFICommentTooltipController","XUFIGroupSeenByProfileBrowserController","XUFIGroupSeenByProfileDialogController","XUFIShareTooltipController","renderCrosspostedTooltipText"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onCommentsClick=function(a){d.props.onCommentClick&&(d.props.onCommentClick(a),a.preventDefault()),d.logCountAction("comments","click")},d.onSeensClick=function(a){var c=d.props.feedback,e=b("XUFIGroupSeenByProfileDialogController").getURIBuilder().setInt("id",c.entidentifier).getURI();e=b("ActorURI").create(e,c.actorforpost);d.launchDialog(e.toString(),a.currentTarget);d.logCountAction("seens","click");a.preventDefault()},d.onSharesClick=function(a){if(d.isCompactSearch())return;var c=d.props.feedback,e=c.sharefbid||c.targetfbid;e=b("ActorURI").create(new(b("URI"))("/ajax/shares/view").setQueryData({target_fbid:e}),c.actorforpost);d.launchDialog(e.toString(),a.currentTarget);d.logCountAction("shares","click");a.preventDefault()},d.onViewsClick=function(a){d.logCountAction("views","click")},d.onViewsHover=function(a){d.canSeeConsolidatedTooltip()&&d.logCountAction("views","hover")},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.launchSnowlift=function(a,c){b("Bootloader").loadModules(["PhotoSnowlift"],function(b){b.bootstrap(a,c)},"UFIReactionsBlingSocialSentence.react")};d.launchDialog=function(a,c){b("Bootloader").loadModules(["AsyncDialog"],function(b){b.bootstrap(a,c,"dialog")},"UFIReactionsBlingSocialSentence.react")};d.logCountAction=function(a,c){b("BanzaiLogger").log("WebReactionsBlingLoggerConfig",{feedback_id:this.props.feedback.entidentifier,"interface":"www",action:c,target_type:"count",target_subtype:a})};d.renderComments=function(){var a=this.props.contextArgs.islivestreaming;if(!this.props.commentCount||!this.props.aboveUFI&&this.props.contextArgs.feedbackMode==="expanded"&&!a||this.props.contextArgs.disableCommentAndLikeForGroupAds||this.props.aboveUFI&&!this.props.commentCount)return null;a=isNaN(this.props.feedback.commentcountreduced)&&!a?this.props.feedback.commentcountreduced:b("NumberFormat").formatInteger(this.props.commentCount);var c=b("ActorURI").create(b("XUFICommentTooltipController").getURIBuilder().setString("ft_ent_identifier",this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return b("React").createElement("div",{className:"_36_q"},b("React").createElement("a",{className:"_ipm _-56","data-comment-prelude-ref":this.props["data-comment-prelude-ref"],"data-ft":this.props["data-ft"],"data-hover":"tooltip","data-tooltip-uri":c,href:this.props.href,onClick:this.onCommentsClick,role:"button"},this.props.children,i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i._param("count",a),i._enum(this.props.commentCount===1?"Comment":"Comments",{Comment:"Comment",Comments:"Comments"})])))};d.renderSeens=function(){if(this.props.contextArgs.entstream||!this.props.feedback.seencount)return null;var a=this.props.feedback,c=a.seencount,d;a.seenbyall&&!a.disable_seen_by_everyone?d=i._("Seen by everyone"):c===1?d=i._("Seen by 1"):d=i._("Seen by {count}",[i._param("count",c)]);c=new(b("URI"))("/ajax/ufi/seen_list_hovercard.php").setQueryData({id:a.entidentifier});var e=b("XUFIGroupSeenByProfileBrowserController").getURIBuilder().setInt("id",a.entidentifier).getURI();e=b("ActorURI").create(e,a.actorforpost);return b("React").createElement("div",{className:"_36_q"},b("React").createElement("span",{ref:"seen_by_text"},b("React").createElement("a",{href:e,"data-hovercard":c.toString(),className:"_ipm _2x0l",onClick:this.onSeensClick},d)))};d.renderShares=function(){if(!this.props.feedback.sharecountreduced)return null;var a=this.props.feedback.sharefbid||this.props.feedback.targetfbid,c;this.isCompactSearch()&&this.props.href!=null?c=this.props.href:c=b("ActorURI").create(new(b("URI"))("/shares/view").setQueryData({id:a}),this.props.feedback.actorforpost);a=b("ActorURI").create(b("XUFIShareTooltipController").getURIBuilder().setString("ft_ent_identifier",this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return b("React").createElement("div",{className:"_36_q"},b("React").createElement("a",{className:"_ipm _2x0m","data-hover":"tooltip","data-tooltip-uri":a,href:c,onClick:this.onSharesClick,role:"button"},i._({"*":"{number} shares","_1":"1 share"},[i._plural(this.props.feedback.sharecount,"number")])))};d.renderSaves=function(){return!this.props.contextArgs.saveCount||!this.props.contextArgs.saveCollectionId?null:b("React").createElement("div",{className:"_36_q"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("UFIReactionsSaveDialog.react").__setRef("UFIReactionsBlingSocialSentence.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{saveCount:this.props.contextArgs.saveCountReduced,collectionId:this.props.contextArgs.saveCollectionId,buttonText:this.props.contextArgs.saveButtonTitle,storyId:this.props.contextArgs.saveStoryID,isSaveCountLink:this.props.contextArgs.isSaveCountLink})}))};d.renderViews=function(){__p&&__p();var a=null;if(!this.props.contextArgs.viewCount&&this.props.contextArgs.source===b("FeedbackSourceType").TAHOE){var c=document.getElementById(this.props.contextArgs.rootid);if(c){c=b("DOMQuery").scry(c,"^._1rh0 ._yjk")[0];a=c?c.getAttribute("data-view-count"):null}}c=this.props.contextArgs.viewCount||a;var d=null;this.canSeeConsolidatedTooltip()&&(d=this.renderViewsTooltip());if(!c)return null;a=this.props.contextArgs.viewCount?this.props.contextArgs.viewCountReduced:a;return b("React").createElement("div",{className:"_36_q"},b("React").createElement(b("Tooltip.react"),{tooltip:d,"data-hover":"tooltip","data-tooltip-alignh":"left","data-tooltip-position":"above",className:"_ipm _2x0m",onClick:this.onViewsClick,onMouseOver:this.onViewsHover},i._({"View":"{count} view","Views":"{count} views"},[i._param("count",a),i._enum(c==="1"?"View":"Views",{View:"View",Views:"Views"})])))};d.canSeeConsolidatedTooltip=function(){var a=this.props.contextArgs.postViewCount,b=this.props.contextArgs.totalPosts,c=this.props.contextArgs.otherPostsViewCount;return!!b&&b>1&&!!a&&!!c};d.isCompactSearch=function(){return this.props.contextArgs.source===b("FeedbackSourceType").COMPACT_SEARCH};d.renderViewsTooltip=function(){var a=+this.props.contextArgs.totalPosts||0,c=+this.props.contextArgs.postViewCount||0,d=+this.props.contextArgs.otherPostsViewCount||0;return b("renderCrosspostedTooltipText")({posts:a,postViews:c,otherPostsViews:d})};d.renderPrivateReply=function(){var a=this.props.feedback.messagereplycontext;return!a||a.status!==b("PagesPrivateReplyConstants").Status.ALREADY_REPLIED?null:b("React").createElement("div",{className:"_36_q"},b("React").createElement("span",{className:"_ipm"},b("React").createElement(b("UFIPrivateReplyIndicator.react"),{replyStatus:a.status})))};d.render=function(){var a={feedback:this.props.feedback,contextArgs:this.props.contextArgs,reactionsLink:null};this.props.overrideReactionsLink&&(a.reactionsLink=this.props.href);var c=this.renderComments(),d=this.renderShares(),e=this.renderSaves(),f=this.renderSeens(),g=this.renderViews(),h=this.renderPrivateReply(),i=this.props.feedback.reactioncount,j=b("SutroPhase2GatingConfig").enabled_counts_on_left;if(this.props.contextArgs.viewCount!=null&&(this.props.contextArgs.saveCount!=null||this.props.contextArgs.seenCount!=null))return b("React").createElement("div",{className:"_ipn clearfix _-5d"+(j&&i==0?" _lca":"")},b("React").createElement("div",{className:"_ipo"},c,d,b("React").createElement("div",{className:"_34i1 _36_q"},e,f,g,h)),b("React").createElement(b("UFIReactionsSocialSentence.react"),a));else return b("React").createElement("div",{className:"_ipn clearfix _-5d"+(j&&i==0?" _lca":"")},b("React").createElement("div",{className:"_ipo"},c,d,e,f,g,h),b("React").createElement(b("UFIReactionsSocialSentence.react"),a))};return c}(b("React").Component);e.exports=a}),null);
__d("UFIBling.react",["CommentPrelude","CommentSection","FeedbackSourceType","React","SutroBlingBarGatingConfig","TrackingNodes","UFIBlingBox.react","UFIReactionsBlingSocialSentence.react","UFISharedDispatcher","UFIStoryAction","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","URI","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props.contextArgs,d=this.props.feedbackTarget,e=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.BLINGBOX),f=d.permalink,g=new(b("URI"))(f).addQueryData({comment_tracking:e}).toString();c.islivestreaming?f=b("UFIToplevelStreamedCommentList").getCommentList(c.ftentidentifier).getDisplayedCommentCount():c.isActiveLivingRoom?f=b("UFIToplevelStreamedCommentList").getCommentList(c.ftentidentifier,c.instanceid).getDisplayedCommentCount():f=b("UFIToplevelPagedCommentList").getCommentList(c.ftentidentifier,d.defaultcommentorderingmode,b("CommentSection").DEFAULT).getDisplayedCommentCount();var h=b("SutroBlingBarGatingConfig").enabled,i=(c.feedbackMode==="none"||c.feedbackMode==="toggle")&&c.hasReactions&&d.displayreactions,j=function(d){d.preventDefault();if(i&&c.feedbackMode==="expanded")a.$1();else if(c.source===b("FeedbackSourceType").COMPACT_SEARCH){var e=c.commentredirecturi!=null?new(b("URI"))(c.commentredirecturi):new(b("URI"))(g);e!=null&&e.go()}else b("CommentPrelude").onBlingboxClick(d.currentTarget),c.disableinlinetoggle||a.props.onCommentVisibilityChanged&&a.props.onCommentVisibilityChanged()};if(i||h||this.props.contextArgs.source===b("FeedbackSourceType").TAHOE){this.props.contextArgs.source===b("FeedbackSourceType").TAHOE&&(f=0);return b("React").createElement(b("UFIReactionsBlingSocialSentence.react"),{aboveUFI:h,commentCount:f,contextArgs:c,"data-comment-prelude-ref":"action_link_bling","data-ft":e,feedback:d,href:g,onCommentClick:j})}else{var k,l,m;c.hasReactions&&(k=d.reactioncount,l=d.reactioncountmap,m=d.reactioncountreduced);return b("React").createElement(b("UFIBlingBox.react"),{comments:f,commentsreduced:d.commentcountreduced,contextArgs:c,"data-comment-prelude-ref":"action_link_bling","data-ft":e,likes:d.likecount,likesreduced:d.likecountreduced,nfb:d.nfbcount,onClick:j,permalink:g,reactionCount:k,reactionCountMap:l,reactionCountReduced:m,reshares:d.sharecount,resharesreduced:d.sharecountreduced,readOnly:c.readonly})}};d.$1=function(){b("UFISharedDispatcher").dispatch(b("UFIStoryAction").showComments(this.props.contextArgs))};return c}(b("React").Component);e.exports=a}),null);
__d("UFICommentActionLink.react",["cx","fbt","Arbiter","React","UFICommentLink.react","UFISharedDispatcher","UFIStoryAction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=b("Arbiter").subscribe("UFIAction/"+this.props.contextArgs.ftentidentifier+"/showComments",function(c,d){if(!d)return;b("UFISharedDispatcher").dispatch(b("UFIStoryAction").showComments(a.props.contextArgs))})};d.componentWillUnmount=function(){this.$1&&b("Arbiter").unsubscribe(this.$1)};d.render=function(){__p&&__p();var a=this,c=this.props.contextArgs,d=c.commentredirecturi;c=c.loggedOutLinkConfig;var e=h._("Comment"),f;c&&c.showCommentLink&&(f=c.commentAjaxifyURI);if(f)return b("React").createElement("span",{className:"_6a _15-3 _3h-u _4k43"},b("React").createElement(b("UFICommentLink.react"),{ajaxify:f,rel:"dialog"},e));else if(d)return b("React").createElement("span",{className:"_6a _15-6 _3h-u _4k43"},b("React").createElement(b("UFICommentLink.react"),{href:d},e));return b("React").createElement("span",{className:"_6a _15-7 _3h-u _4k43"},b("React").createElement(b("UFICommentLink.react"),{onClick:function(c){c.preventDefault(),b("UFISharedDispatcher").dispatch(b("UFIStoryAction").showComments(a.props.contextArgs))}},e))};return c}(b("React").Component);c.propTypes={contextArgs:a.object.isRequired};e.exports=c}),null);
__d("UFILikeActionLink.react",["React","UFILikeLink.react","UFIReactionsLinkImpl.react","UFIReactionTypes","UFIStoryAction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onClick=function(a){a.preventDefault();var c=d.props.contextArgs.loggedOutLinkConfig;if(c)return;c=d.props.feedback.hasviewerliked;d.context.dispatch(b("UFIStoryAction").changeReaction(d.props.contextArgs,c?b("UFIReactionTypes").NONE:b("UFIReactionTypes").LIKE,a.target))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props,c=a.contextArgs;a=a.feedback;if(!c.showLikeNuxForGroupMallAds&&c.hasReactions&&a.canviewerreact&&b("UFIReactionsLinkImpl.react"))return b("React").createElement(b("UFIReactionsLinkImpl.react"),{contextArgs:c,nuxConfig:c.reactionsNuxConfig,reaction:a.viewerreaction,suggestedReaction:a.suggestedreaction,supportedReactions:a.supportedreactions});else{var d=c.loggedOutLinkConfig,e=null;d&&d.showLikeLink&&(e=d.likeAjaxifyURI);return b("React").createElement(b("UFILikeLink.react"),{ajaxify:e,likeAction:!a.hasviewerliked,onClick:this.onClick,rel:e?"dialog":null,forcelegacyrendering:c.forcelegacyrendering,showLikeNuxForGroupMallAds:c.showLikeNuxForGroupMallAds,likeNuxContent:c.groupMallAdsCommentNuxContent})}};return c}(b("React").Component);c.contextTypes={dispatch:a.func};c.propTypes={feedback:a.object.isRequired,contextArgs:a.object.isRequired};e.exports=c}),null);
__d("UFISaveActionLink.react",["ix","cx","fbt","Bootloader","Image.react","React","SutroStoryHeaderUFIGatingConfig","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=function(){var a=d.state.showSave;b("Bootloader").loadModules(["AsyncRequest","CollectionCurationMechanisms","CollectionsDisplaySurface","SavedStateActions","XSaveController"],function(b,c,e,f,g){f=a?f.SAVE:f.UNSAVE;d.props.onClick&&d.props.onClick(f);new b().setData({action:f,mechanism:c.SAVED_UFI,story_id:d.props.storyID,surface:e.CAMPFIRE_NOTE}).setHandler(function(b){b.error===0&&d.setState({showSave:!a})}).setURI(g.getURIBuilder().getURI()).send()},"UFISaveActionLink.react")};d.state={showSave:!c.isSaved};return d}var d=c.prototype;d.render=function(){var a=this.state.showSave?i._("Save"):i._("Unsave"),c=null;if(!b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi){var d=this.state.showSave?g("122454"):g("138474");c=b("React").createElement(b("Image.react"),{src:d})}return b("React").createElement("span",{className:"_6a _38qe"+(b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi?" _38qf":"")},b("React").createElement("a",{"aria-pressed":!this.state.showSave,className:(this.state.showSave?"":"_38qg")+(b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi?" _38qh":""),href:"#",onClick:this.$1,role:"button"},c,a))};return c}(b("React").Component);e.exports=a}),null);
__d("UFIShareActionLink.react",["Promise","ActorURI","Arbiter","Bootloader","React","ReactShareButtonGatedModule","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIShareLink.react","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReactShareButtonGatedModule").module,h=b("ReactShareButtonGatedModule").should_use_groups_dialog,i=b("ReactShareButtonGatedModule").store;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=!1,d.state={confirmed:!1,openOnInitOverride:!1,interceptedAndWantedToShareAnyways:!1},d.$3=function(){!d.$1&&!d.$2&&(d.$1=b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_SHARE_DIALOG_OPENS))},d.$4=function(){d.$2=!1},d.$5=function(){d.$1&&(b("UFICommonInteractionLogger").endInteraction(d.$1),d.$1=null),d.$2=!0,d.$6()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.state,d=c.confirmed;c=c.openOnInitOverride;var e=this.props,f=e.shareURI,j=e.shareRel,k=e.shareNowMenuURI,l=e.feedbackReferrer,m=e.feedbackSource,n=e.feedbackTarget,o=e.misinformationConfirmDialogURI;e=e.interceptForPagePost;if(o&&!d)return b("React").createElement(b("UFIShareLink.react"),{href:"#",onClick:function(){a.$7(o),a.$6()}});if(e&&n&&n.ownerid&&!this.state.interceptedAndWantedToShareAnyways)return b("React").createElement(b("UFIShareLink.react"),{href:"#",onClick:function(){return a.$8(n.ownerid)}});d={feedback_referrer:l,feedback_source:m};e=n&&n.actorforpost;e&&(f=f&&b("ActorURI").create(f,e),k=k&&new(b("URI"))(k).addQueryData("actor_id",e).toString());if(h){e={default_audience:"silent_disco",feedback_referrer:l,feedback_source:m};i&&i.setShareNowURI(this.props.feedbackTarget?this.props.feedbackTarget.sharefbid:null,k);return b("React").createElement(b("UFIShareLink.react"),{href:new(b("URI"))(f).addQueryData(e),rel:j,openOnInit:c,onClick:function(){return a.$6()}})}return k?b("React").createElement(g,{endpoint:k,endpointData:d,openOnInitOverride:c||this.state.interceptedAndWantedToShareAnyways,onMouseUp:this.$3,onShow:this.$5,onHide:this.$4}):b("React").createElement(b("UFIShareLink.react"),{href:new(b("URI"))(f).addQueryData(d),rel:j,openOnInit:c,onClick:function(){a.$6()}})};d.$6=function(){this.props.feedbackTarget&&b("Arbiter").inform("share_initiated",{entidentifier:this.props.feedbackTarget.entidentifier})};d.$8=function(a){__p&&__p();var c=this;b("Bootloader").loadModules(["PagePostEngagementFrictionActions","promiseDone"],function(d,e){var f=new(b("Promise"))(function(b,c){d.showReshareEngagementFrictionDialog(a,function(){return b(!0)},function(){return b(!1)},function(){b(!1),d.goToPage(a)})}).then(function(a){a&&(c.setState({interceptedAndWantedToShareAnyways:!0}),c.$6())},function(a){throw a});e(f)},"UFIShareActionLink.react")};d.$7=function(a){var c=this;b("Bootloader").loadModules(["AsyncDialog","AsyncRequest","ShareWarningFactCheckLinkLogger"],function(b,d,e){b.send(new d(a),function(a){a.subscribe("confirm",function(){c.setState({confirmed:!0,openOnInitOverride:!0})}),e.addReshareLoggingToDialog(a)})},"UFIShareActionLink.react")};return c}(b("React").Component);c.propTypes={feedbackTarget:a.object,shareURI:a.string,shareRel:a.string,shareNowMenuURI:a.string,shareLinkHref:a.string,feedbackReferrer:a.string,feedbackSource:a.number,misinformationConfirmDialogURI:a.string,interceptForPagePost:a.bool};e.exports=c}),null);
__d("UFISubscribeActionLink.react",["cx","fbt","React","SutroStoryHeaderUFIGatingConfig","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.isSubscribed?h._("Subscribed"):h._("Subscribe");return b("React").createElement("span",{className:"_6a _7kt6 _7kt7"},b("React").createElement("a",{"aria-pressed":this.props.isSubscribed,className:(this.props.isSubscribed?"_7kt8":"")+(b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi?" _7kt9":""),href:"#",onClick:this.props.onClick,role:"button"},a))};return c}(b("React").Component);a.defaultProps={onClick:b("emptyFunction")};e.exports=a}),null);
__d("UFIActionLinks.react",["cx","fbt","BanzaiODS","BootloadedComponent.react","EntstreamFeedObjectFollow","EntstreamFeedObjectSave","FBFeedLocations","FeedbackSourceType","JSResource","React","SutroBlingBarGatingConfig","SutroStoryHeaderUFIGatingConfig","UFIBling.react","UFICommentActionLink.react","UFIConfig","UFIInstanceAction","UFILikeActionLink.react","UFIPrivateReplyLink.react","UFISaveActionLink.react","UFIShareActionLink.react","UFISharedDispatcher","UFISubscribeActionLink.react","UFIUserActions","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this.$1();b("BanzaiODS").bumpEntityKey("feedback",a)};d.renderActorSelector=function(){if(this.props.hideActorSelector||this.props.contextArgs.disableCommentAndLikeForGroupAds)return null;var a=this.props.contextArgs,c=a.actorSelectorConfig;a=a.hasReactions;if(!c)return null;var d=b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi,e=c.module;return b("React").createElement("div",{className:"_40yk"+(d?" _610g":"")+(d?" _610h":"")+(a?" _pbn":"")},b("React").createElement(e,c.props))};d.renderActionList=function(){var a=[this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderPrivateReplyLink(),this.renderEmbedLink(),this.renderSaveLink(),this.renderSubscribeLink(),this.renderPostNowLink(),this.renderEditPostLink()];a=a.filter(function(a){return a}).map(function(a,c){return b("React").createElement("span",{className:"_1mto",key:c},a)});if(a.length)return b("React").createElement("div",{className:"_42nr _1mtp"},a);else return null};d.renderBling=function(){var a=this,c=this.shouldRenderBling();return!c?null:b("React").createElement(b("UFIBling.react"),{contextArgs:this.props.contextArgs,feedbackTarget:this.props.feedbacktarget,onCommentVisibilityChanged:function(){return b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").toggleComments(a.props.contextArgs))}})};d.renderLikeLink=function(){var a=this.props,c=a.contextArgs;a=a.feedbacktarget;var d=c.loggedOutLinkConfig,e=c.disableCommentAndLikeForGroupAds;if(e)return null;return!a.hasviewerliked&&!a.viewercanlike&&!(d&&d.showLikeLink)?null:b("React").createElement(b("UFILikeActionLink.react"),{feedback:a,contextArgs:c})};d.renderCommentLink=function(){__p&&__p();var a=this.props.contextArgs.disableCommentAndLikeForGroupAds;if(a||this.props.contextArgs.hideComments||this.props.contextArgs.showsavelink||this.props.contextArgs.showsubscribelink)return null;a=this.props.contextArgs.loggedOutLinkConfig;if(!this.props.feedbacktarget.cancomment&&!(a&&a.showCommentLink)){a=this.props.contextArgs.disabledCommentTooltip;if(a){var c=h._("Comment");return b("React").createElement("span",null,b("React").createElement("span",{className:"_1ysv","data-hover":"tooltip","data-tooltip-content":a},c))}return null}return b("React").createElement(b("UFICommentActionLink.react"),{contextArgs:this.props.contextArgs})};d.$1=function(){var a=this.props.contextArgs.shareLinkConfig;if(!a)return"ufi-share-link.unavailable";a=this.props.contextArgs.loggedOutLinkConfig;return a&&a.showShareLink?"ufi-share-link.loggedout":"ufi-share-link.render"};d.renderShareLink=function(){var a=this.props.contextArgs.shareLinkConfig;if(!a)return null;var c=this.props.contextArgs.loggedOutLinkConfig;c&&c.showShareLink&&(a.shareURI=c.shareAjaxifyURI);return b("React").createElement(b("UFIShareActionLink.react"),babelHelpers["extends"]({feedbackTarget:this.props.feedbacktarget,feedbackReferrer:this.props.contextArgs.feedbackReferrer,feedbackSource:this.props.contextArgs.source},a))};d.renderPrivateReplyLink=function(){var a=this.props,c=a.contextArgs;a=a.feedbacktarget;var d=a.actorforpost;a=a.messagereplycontext;if(!b("UFIPrivateReplyLink.react").willRender(a,d))return null;return!a?null:b("React").createElement(b("UFIPrivateReplyLink.react"),{actorID:d,activityID:c.ftentidentifier,context:a,seeResponseLabel:!1,shouldShowNuxToPage:c.shouldShowPrivateReplyNuxToPage,shouldShowGeneralNuxContent:c.shouldShowGeneralPrivateReplyNuxContent})};d.renderEmbedLink=function(){var a=this.props.contextArgs.shareLinkConfig;if(!a||!a.embedURI)return null;var c=h._("Embed");return b("React").createElement("span",{className:"_4q8d _1mtq"},b("React").createElement("a",{href:a.embedURI,rel:"dialog",className:"_2g1w"},c))};d.renderSaveLink=function(){if(!this.props.contextArgs.showsavelink)return null;var a=this.props.contextArgs,c=a.isSaved,d=a.feedcontext,e=a.saveFollowupMarkup;a=a.saveStoryID;var f=JSON.parse(d).object_element_id;return b("React").createElement(b("UFISaveActionLink.react"),{isSaved:c,onClick:function(a){if(!f)return;b("EntstreamFeedObjectSave").toggleSaveFromUFI(f,e,a)},storyID:a})};d.renderSubscribeLink=function(){if(!this.props.contextArgs.showsubscribelink)return null;var a=this.props.contextArgs,c=a.ftentidentifier,d=a.rootid,e=a.source,f=this.props.feedbacktarget,g=f.hasviewersubscribed;return b("React").createElement(b("UFISubscribeActionLink.react"),{isSubscribed:g,onClick:function(a){a=a.target;if(!(a instanceof Element))return;b("EntstreamFeedObjectFollow").toggleFollowFromUFI(d,c,g?"follow_post":"unfollow_post");b("UFIUserActions").changeSubscribe(c,!g,{source:e,target:a,rootid:d,commentexpandmode:f.commentexpandmode})},postID:c})};d.renderPostNowLink=function(){try{var a=this.props.contextArgs,c=a.feedcontext;a=a.ftentidentifier;c=JSON.parse(c).location_type;return c===b("FBFeedLocations").GROUP_DRAFT_POSTS?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIPostNowActionLink.react").__setRef("UFIActionLinks.react"),bootloadPlaceholder:b("React").createElement("div",null),groupID:this.props.feedbacktarget.grouporeventid,postID:a}):null}catch(a){return null}};d.renderEditPostLink=function(){try{var a=this.props.contextArgs,c=a.feedcontext;a=a.ftentidentifier;var d=JSON.parse(c).location_type;return d===b("FBFeedLocations").GROUP_DRAFT_POSTS?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIEditPostActionLink.react").__setRef("UFIActionLinks.react"),bootloadPlaceholder:b("React").createElement("div",null),feedContext:c,postID:a}):null}catch(a){return null}};d.renderSearchFeedback=function(){var a=this.props.contextArgs.inlineSearchFeedbackConfig;return!a?null:b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("InlineFeedback.react").__setRef("UFIActionLinks.react")},a))};d.renderCrowdsourceLabelingContainer=function(){return!b("UFIConfig").showUFICrowdsource?null:b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("UFICrowdsourceLabelingContainer.react").__setRef("UFIActionLinks.react"),feedback:this.props.feedbacktarget,contextArgs:this.props.contextArgs})};d.renderLayout=function(a,c,d){c=c.map(function(a,c){return a&&b("React").createElement("div",{className:"_3m9g",key:c},a)}).filter(function(a){return a});return!a&&c.length===0?null:b("React").createElement("div",{className:b("joinClasses")("_3399",d)},c,b("React").createElement("div",{className:"_524d"},a))};d.shouldRenderBling=function(){__p&&__p();var a=this.props.contextArgs,c=a.feedcontext,d=a.source;a=a.showBling;var e=null;if(c)try{e=JSON.parse(c).location_type}catch(a){}if(e===b("FBFeedLocations").GOODWILL_THROWBACK_PROMOTION||e===b("FBFeedLocations").GOODWILL_THROWBACK_SHARE)return!1;if(d===b("FeedbackSourceType").TAHOE)return!this.props.hideBling;c=b("SutroBlingBarGatingConfig").enabled;return a||c&&!this.props.hideBling};d.shouldRenderActionButtons=function(){var a=null,c=this.props.contextArgs.source;if(this.props.contextArgs.feedcontext)try{a=JSON.parse(this.props.contextArgs.feedcontext).location_type}catch(a){}return a===b("FBFeedLocations").GOODWILL_THROWBACK_PERMALINK||a===b("FBFeedLocations").GOODWILL_THROWBACK_PROMOTION||a===b("FBFeedLocations").GOODWILL_THROWBACK_SHARE||a===b("FBFeedLocations").GROUP_SUGGESTIONS_WITH_STORY||c===b("FeedbackSourceType").LIVE_WWW_BROADCASTING||c===b("FeedbackSourceType").COMPACT_SEARCH||c===b("FeedbackSourceType").LIVE_VIDEO_STORIES?!1:!0};d.hasCounts=function(){return!!(this.props.feedbacktarget.commentcountreduced||this.props.feedbacktarget.sharecountreduced||this.props.feedbacktarget.seencount||this.props.contextArgs.viewCount)||this.props.feedbacktarget.reactioncount>0&&(b("SutroBlingBarGatingConfig").enabled||this.props.contextArgs.showBling||this.props.contextArgs.source===b("FeedbackSourceType").TAHOE)};d.render=function(){__p&&__p();var a=this.renderActorSelector(),c=this.renderSearchFeedback(),d=[],e=[],f=this.props.contextArgs.disableCommentAndLikeForGroupAds,g=null,h=b("SutroBlingBarGatingConfig").enabled,i=this.renderBling();this.props.contextArgs.showBling&&!h?(d.push(a),this.hasCounts()?g=this.renderLayout(null,[c],"_1f6t"):e.push(c)):(d.push(a),d.push(c));h=this.props.contextArgs.source===b("FeedbackSourceType").COMPACT_SEARCH;a=this.shouldRenderActionButtons();c=b("SutroStoryHeaderUFIGatingConfig").enabled_hide_ufi_border&&a;h="_1f6t"+(h?" _24vt":"")+(this.props.contextArgs.hasReactions?" _4_dr":"")+(c&&this.props.contextArgs.source!==b("FeedbackSourceType").PHOTOS_SNOWLIFT&&this.props.contextArgs.source!==b("FeedbackSourceType").WORKPLACE_DISCOVERY_FEED?" _20h5":"");var j=b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi,k=b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi_animation,l=b("SutroBlingBarGatingConfig").enabled;a=a?this.renderLayout(this.renderActionList(),d,"_a7s"+(c?" _20h6":"")+(j?" _610i":"")+(j?" _610j":"")+(j&&k?" _125r":"")+(l?" _2h27":"")+" clearfix _zw3"+(f?" _r9u":"")):null;d=this.renderCrowdsourceLabelingContainer();return b("React").createElement("div",{ref:"root",className:"_57w"},g,this.hasCounts()?this.renderLayout(i,e,h):null,a,d)};return c}(b("React").Component);e.exports=a}),null);
__d("UFIActionHeader.react",["cx","FeedbackSourceType","FluxContainer","React","UFIActionLinks.react","UFICommercialBreakStore","UFIDispatcherContext.react","UFIPlayLiveVODHighlightsStore","ifRequired"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={inCommercialBreak:!1,isPlayingLiveVODHighlights:!1},b)||babelHelpers.assertThisInitialized(c)}c.getStores=function(){return[b("UFICommercialBreakStore"),b("UFIPlayLiveVODHighlightsStore")]};c.calculateState=function(a,c){a=c.contextArgs.instanceid;return{inCommercialBreak:b("UFICommercialBreakStore").getValueFor(a),isPlayingLiveVODHighlights:b("UFIPlayLiveVODHighlightsStore").getValueFor(a)}};var d=c.prototype;d.$1=function(){var a=this,c=b("ifRequired")("UFIVideoPlayerRegistry",function(b){return b.getAvailableVideoPlayerController(a.props.contextArgs.instanceid)});c=c&&c.getOption("VideoWithInstreamVideo","controller");c=c&&c.getConfig();return c};d.$2=function(){__p&&__p();var a=this.props.contextArgs.source;a=a===b("FeedbackSourceType").COMPACT_SEARCH;a=b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.props.dispatcher,stores:this.props.stores},b("React").createElement(b("UFIActionLinks.react"),{contextArgs:this.props.contextArgs,feedbacktarget:this.props.feedbacktarget,hideActorSelector:a}));if(this.state.isPlayingLiveVODHighlights)return b("React").createElement("div",{className:"_f_s"},a);if(!this.state.inCommercialBreak)return a;var c=this.$1();c=c&&c.vodTransitionVersion!==0;return!c?null:b("React").createElement("div",{className:"_4hqd"},a)};d.render=function(){return b("React").createElement("div",null,this.$2())};return c}(b("React").Component);e.exports=b("FluxContainer").create(a,{withProps:!0,pure:!1})}),null);
__d("CommentLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1435334373168219",queryID:"1723155404680538"})}),null);
__d("UFICommentLikeSubscription",["BaseGraphQLSubscription","CommentLikeWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/"+this.getSubscriptionCallName()+"/top_level_feedback_id_"+a};d.getQueryID=function(){return b("CommentLikeWebGraphQLSubscription").getDocID()};d.getQueryParameters=function(a){return{input:JSON.stringify({client_subscription_id:b("uuid")(),top_level_feedback_id:a})}};d.getSubscriptionCallName=function(){return"comment_like_subscribe"};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null);
__d("CommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1840357882741892",queryID:"410384789785558"})}),null);
__d("UFICommentSubscription",["BaseGraphQLSubscription","CommentCreateWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/"+this.getSubscriptionCallName()+"/top_level_feedback_id_"+a};d.getQueryID=function(){return b("CommentCreateWebGraphQLSubscription").getDocID()};d.getQueryParameters=function(a){return{input:JSON.stringify({client_subscription_id:b("uuid")(),top_level_feedback_id:a})}};d.getSubscriptionCallName=function(){return"comment_create_subscribe"};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null);
__d("UFIFeaturedReplyCommentListImpl",["UFIReplyCommentListImpl","WebCommentViewOption"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e,f){__p&&__p();var g;g=a.call(this,c,d,b("WebCommentViewOption").FEATURED)||this;c=0;d=e.length;g.updateCommentCount(d);g.addCommentIDs(c,d,e);var h={};f.forEach(function(a){a.id&&(h[a.id]=a)});e.forEach(function(a){g.addOrUpdateComment(h[a])});return g}var d=c.prototype;d.fetchComments=function(a,b,c){};return c}(b("UFIReplyCommentListImpl"));e.exports=a}),null);
__d("UFIFeaturedToplevelCommentListImpl",["UFIToplevelPagedCommentListImpl","WebCommentViewOption"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e){__p&&__p();var f;f=a.call(this,c,b("WebCommentViewOption").FEATURED)||this;c=0;var g=d.length;f.updateCommentCount(g);f.addCommentIDs(c,g,d);var h={};e.forEach(function(a){a.id&&(h[a.id]=a)});d.forEach(function(a){f.addOrUpdateComment(h[a])});return f}var d=c.prototype;d.fetchComments=function(a,b,c){};return c}(b("UFIToplevelPagedCommentListImpl"));e.exports=a}),null);
__d("UFIFeedbackFilters",[],(function(a,b,c,d,e,f){"use strict";a={getRequestedIDs:function(a){var b=[];a.reactorids&&(b=b.concat(a.reactorids));a.actorforpost&&(b=b.concat(a.actorforpost));return b}};e.exports=a}),null);
__d("UFIFetcher",["Promise","ShortProfiles"],(function(a,b,c,d,e,f){"use strict";a={fetchShortProfiles:function(a){return new(b("Promise"))(function(c,d){return b("ShortProfiles").getMulti(a,c)})},fetchComments:function(a,c,d){return new(b("Promise"))(function(b,e){return a.getComments(c.getOffset(),c.getLength(),d,b)}).then(function(a){return Object.values(a)})},fetchCommentsOrThrow:function(a,b,c){return Object.values(a.getCommentsOrThrow(b,c))}};e.exports=a}),null);
__d("FeedbackLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1304193676334207",queryID:"264366153976871"})}),null);
__d("UFILikeSubscription",["BaseGraphQLSubscription","FeedbackLikeWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/"+this.getSubscriptionCallName()+"/feedback_id_"+a};d.getQueryID=function(){return b("FeedbackLikeWebGraphQLSubscription").getDocID()};d.getQueryParameters=function(a){return{input:JSON.stringify({client_subscription_id:b("uuid")(),feedback_id:a})}};d.getSubscriptionCallName=function(){return"feedback_like_subscribe"};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null);
__d("PageCommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"2475953642429043",queryID:"335464200513908"})}),null);
__d("UFIPageCommentSubscription",["BaseGraphQLSubscription","PageCommentCreateWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/"+this.getSubscriptionCallName()+"/top_level_feedback_id_"+a};d.getQueryID=function(){return b("PageCommentCreateWebGraphQLSubscription").getDocID()};d.getQueryParameters=function(a){return{input:JSON.stringify({client_subscription_id:b("uuid")(),top_level_feedback_id:a})}};d.getSubscriptionCallName=function(){return"page_comment_create_subscribe"};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null);
__d("LiveVideoShareCountUpdateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1844588075618356",queryID:"911885508997273"})}),null);
__d("UFIShareCountUpdateSubscription",["BaseGraphQLSubscription","LiveVideoShareCountUpdateWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/live_video_share_count_update_subscribe/feedback_id_"+a};d.getQueryID=function(){return b("LiveVideoShareCountUpdateWebGraphQLSubscription").getDocID()};d.getQueryParameters=function(a){return{input:JSON.stringify({client_subscription_id:b("uuid")(),feedback_id:a})}};d.getSubscriptionCallName=function(){return"live_video_share_count_update_subscribe"};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null);
__d("FeedbackTypingWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1237650813017179",queryID:"1235619139887368"})}),null);
__d("UFITypingSubscription",["BaseGraphQLSubscription","FeedbackTypingWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/"+this.getSubscriptionCallName()+"/feedback_id_"+a};d.getQueryID=function(){return b("FeedbackTypingWebGraphQLSubscription").getDocID()};d.getQueryParameters=function(a){return{input:JSON.stringify({client_subscription_id:b("uuid")(),feedback_id:a})}};d.getSubscriptionCallName=function(){return"feedback_typing_subscribe"};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null);
__d("UFITypingSubscriptionController",["TimeSlice","UFITypingSubscription","clearTimeout","getByPath","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=15*1e3;function h(a){var c=b("getByPath")(a,["feedback_typing_subscribe","feedback","feedback_typers","friend_count"]);a=b("getByPath")(a,["feedback_typing_subscribe","feedback","feedback_typers","other_count"]);return{friendCount:parseInt(c,10)||0,otherCount:parseInt(a,10)||0}}function i(a){return a.friendCount===0&&a.otherCount===0}a=function(){__p&&__p();function a(a,c){this.$1=null,this.$2=c,this.$3=b("UFITypingSubscription").subscribe(a,this.$4.bind(this))}var c=a.prototype;c.unsubscribe=function(){this.$5(),this.$3&&this.$3.unsubscribe()};c.$4=function(a){var c=this;this.$5();a=h(a);this.$2(a);i(a)||(this.$1=b("setTimeout")(b("TimeSlice").guard(function(){c.$5(),c.$2({friendCount:0,otherCount:0})},"UFITypingSubscriptionController freshnessTimer",{propagationType:b("TimeSlice").PropagationType.EXECUTION}),g))};c.$5=function(){this.$1&&(b("clearTimeout")(this.$1),this.$1=null)};return a}();e.exports=a}),null);
__d("UFITypingSubscriptionControllerFactory",["UFILiveTypingIndicator","UFISharedDispatcher","UFIStoryAction","UFITypingSubscriptionController","debounce"],(function(a,b,c,d,e,f){"use strict";var g=500;a={forUFIController:function(a,c){var d=b("debounce")(function(a){var d;a.friendCount?d=b("UFIStoryAction").friendTyping(c):a.otherCount&&b("UFILiveTypingIndicator").isEnabled()?d=b("UFIStoryAction").someoneTyping(c):d=b("UFIStoryAction").typingStopped(c);b("UFISharedDispatcher").dispatch(d)},g);return new(b("UFITypingSubscriptionController"))(a.targetfbid,d)}};e.exports=a}),null);
__d("XVODStreamingCommentsAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videos/vodcomments/",{eft_id:{type:"String",required:!0},target_ufi_instance_id:{type:"String",required:!0},start_time:{type:"Float",required:!0},end_time:{type:"Float",required:!0},should_backfill:{type:"Bool",defaultValue:!1}})}),null);
__d("UFIVODStreamingComments",["AsyncRequest","BanzaiODS","CommentSection","SubscriptionsHandler","UFICentralUpdates","UFIConstants","UFIInstanceAction","UFILivePinnedCommentStore","UFISharedDispatcher","UFIStoryAction","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","WebCommentViewOption","XVODStreamingCommentsAsyncController","setInterval"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("BanzaiODS").setEntitySample("feedback",1e-4);var g=function(){__p&&__p();function a(a,c){__p&&__p();var d=this;this.ufiController=a;this.videoPlayerController=c;this.queue=[];this.queueEndTime=0;this.currentRequest=null;this.subscriptions=new(b("SubscriptionsHandler"))();this.commentsAutoplayState=this.ufiController.shouldAutoplayLiveVODComments()?"MayPlay":"MayNotPlay";this.pinQueue=[];this.resetToTime(c.getCurrentTimePosition());a=this.ufiController.getFtEntIdentifier();var e=this.ufiController.getInstanceID(),f=b("UFIToplevelPagedCommentList").getPagedCommentCountForFeedbackTargetID(a,b("CommentSection").DEFAULT);typeof f==="number"&&b("UFIToplevelStreamedCommentList").getCommentList(a,e).updateCommentCount(f);this.subscriptions.addSubscriptions(c.addListener("seekEnd",function(a){d.commentsAutoplayState==="MayNotPlay"&&(d.commentsAutoplayState="MayPlay"),d.resetToTime(a.position)}),c.addListener("unmute",function(a){d.commentsAutoplayState==="MayNotPlay"&&(d.commentsAutoplayState="MayPlay"),d.$1()}),c.addListener("updateStatus",function(a,b){b=null;while(d.pinQueue.length){if(d.pinQueue[0].timeoffset>a.position)break;b=d.pinQueue.shift()}b&&d.$2(b)}));b("setInterval")(this.renderNextComment.bind(this),2e3);b("BanzaiODS").bumpEntityKey("vod_comments","www_load")}var c=a.prototype;c.renderNextComment=function(){__p&&__p();if(!this.videoPlayerController.isState("playing"))return;var a=this.videoPlayerController.getCurrentTimePosition();this.onTimeUpdated(a);while(this.queue.length&&this.queue[0].timeoffset<a){var c=this.queue.shift();if(c.timeoffset<a-5)continue;b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.STREAMING,c.ufipayload);b("BanzaiODS").bumpEntityKey("feedback","facecast_vod_comment_rendered");break}this.$1()};c.fetchNewCommments=function(a,c,d,e){__p&&__p();var f=this,g=a+60;a=b("XVODStreamingCommentsAsyncController").getURIBuilder().setString("eft_id",this.ufiController.getFtEntIdentifier()).setString("target_ufi_instance_id",this.ufiController.getInstanceID()).setFloat("start_time",a).setFloat("end_time",g).setBool("should_backfill",c).getURI();this.currentRequest&&this.currentRequest.abandon();this.currentRequest=new(b("AsyncRequest"))().setURI(a).setHandler(function(a){a=a.getPayload();if(a.status==="error")return;a.backfillpayload&&b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.STREAMING,a.backfillpayload);d(a.ufipayloads);e(a.pinnedcommentpayloads,a.backfillpinnedcommentpayload);f.queueEndTime=g}).setFinallyHandler(function(){c&&b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").didReceiveVODComments(f.ufiController.getContextArgs())),f.currentRequest=null});this.currentRequest.send();c&&b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").didRequestVODComments(this.ufiController.getContextArgs()))};c.onTimeUpdated=function(a){var b=this;if(a<this.queueEndTime-15||this.currentRequest!==null)return;this.fetchNewCommments(this.queueEndTime,!1,function(a){b.queue=b.queue.concat(a)},function(a,c){b.pinQueue=b.pinQueue.concat(a)})};c.resetToTime=function(a){var c=this,d=this.ufiController.getFtEntIdentifier();b("UFIToplevelStreamedCommentList").resetCommentList(d,this.ufiController.getInstanceID());b("UFICentralUpdates").didUpdateFeedback(d);this.fetchNewCommments(a,!0,function(a){c.queue=a},function(a,b){c.pinQueue=a,c.$2(b)})};c.stop=function(){this.subscriptions.release()};c.$1=function(){var a=b("UFIToplevelStreamedCommentList").getExistingCommentList(this.ufiController.getFtEntIdentifier(),this.ufiController.getInstanceID());if(!a||a.getActualCommentCount()<5||this.commentsAutoplayState!=="MayPlay"||!this.videoPlayerController.isState("playing"))return;b("BanzaiODS").bumpEntityKey("vod_comments","www_autoplay");this.commentsAutoplayState="Played";b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").changeOrderingMode(this.ufiController.getContextArgs(),b("WebCommentViewOption").LIVE_STREAMING))};c.$2=function(a){__p&&__p();var c,d=this.ufiController.getContextArgs(),e=b("UFILivePinnedCommentStore").getPinnedCommentID(d.ftentidentifier),f=a.ufipayload;c=(c=f)!=null?(c=c.pinnedcomments)!=null?c.length:c:c;if(!c){e!==null&&b("UFISharedDispatcher").dispatch(b("UFIStoryAction").unpinComment(d,a.pineventid));return}c=f.pinnedcomments[0].id;if(c===e)return;b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.STREAMING,f);b("UFISharedDispatcher").dispatch(b("UFIStoryAction").pinComment(d,c,a.pineventid))};return a}(),h=new Map();e.exports={start:function(a,b){var c=a.getInstanceID();if(h.get(c))return;h.set(c,new g(a,b))},stop:function(a,b){a=h.get(b);if(!a)return;a.stop();h["delete"](b)}}}),null);
__d("XCommentEmbedPluginEmbedAsyncDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/comment-embed/async/embed/dialog/",{comment_id:{type:"String",required:!0},width:{type:"Int"},__asyncDialog:{type:"Int"}})}),null);
__d("XGroupsContentRemoveDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/content/remove/dialog/",{group_id:{type:"FBID"},content_id:{type:"FBID"},story_dom_id:{type:"String"},source:{type:"Enum",required:!0,enumType:1},client_id:{type:"String"},comment_id:{type:"String"},ft_ent_identifier:{type:"String"},__asyncDialog:{type:"Int"}})}),null);
__d("UFIController",["csx","invariant","Promise","Arbiter","AsyncRequest","AuthorPinnedCommentLogger","BigPipe","BootloadedComponent.react","Bootloader","ClientIDs","CommentPrelude","CommentSection","DOM","DOMContainer.react","DOMQuery","FBFeedLocations","FBLogger","FeedbackPayloadSourceType","FeedbackSourceType","ImmutableObject","IntersectionObserver","JSResource","LiveTimer","PinnedCommentEventCreateSubscription","React","ReactDOM","Run","ShortProfiles","StaticUFI.react","SubscriptionsHandler","TranslationTrigger","UFIActionHeader.react","UFIActionLinks.react","UFIAddCommentActionType","UFIAsyncWrapper","UFICallbackStore","UFICentralUpdates","UFICommentAction","UFICommentActionType","UFICommentFilters","UFICommentLikeSubscription","UFICommentLogger","UFIComments","UFICommentSubscription","UFICommentUtils","UFICommentVisibilityStore","UFICommercialBreakAdapter","UFICommonInteractionLogger","UFIConfig","UFIConstants","UFIDispatcher","UFIDispatcherContext.react","UFIDomRootAdapter","UFIFeaturedReplyCommentListImpl","UFIFeaturedToplevelCommentListImpl","UFIFeedbackFilters","UFIFeedbackMode","UFIFeedbackStore","UFIFeedbackTargets","UFIFetcher","UFIInstanceAction","UFIInstanceActionType","UFILikeSubscription","UFILivePinnedCommentStore","UFILiveTypingIndicator","UFINewCommentNotifier","UFIOrderingModeStore","UFIPageCommentSubscription","UFIPaging","UFIPlayLiveVODHighlightsAdapter","UFIRange","UFIReactionStore","UFIReplyCommentList","UFIRootRegistry","UFIShareCountUpdateSubscription","UFISharedDispatcher","UFIStoryAction","UFIStoryActionType","UFIThreadedFacecastCommentsStore","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","UFITypingSubscriptionControllerFactory","UFIUIEvents","UFIVideoPlayerRegistry","UFIVisibility","UFIVODStreamingComments","URI","WebCommentViewOption","XCommentEmbedPluginEmbedAsyncDialogController","XGroupsContentRemoveDialogController","createArrayFromMixed","flattenArray","forEachObject","gkx","intersectionObserverEntryIsIntersecting","isEmpty","onEnclosingPageletDestroy","promiseDone","requireWeak"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=Object.freeze({NEWSSTAND:"newsstand"}),j=function(a,c,d,e){var f=a.getRequestedOffset();a=a.getRequestedLength();c=f+a===c;c=c&&k(e)?d-f:a;return new(b("UFIRange"))(f,c)},k=function(a){return a==b("FeedbackPayloadSourceType").USER_ACTION||a==b("FeedbackPayloadSourceType").LIVE_SEND||a==b("FeedbackPayloadSourceType").STREAMING},l,m=!1;a=function(){__p&&__p();c.factory=function(a,d,e){__p&&__p();if(!l||d.feedLocationType!==b("FBFeedLocations").NEWSFEED||m||d.substream_index!==1){c.$14(a,d,e);return}var f=new(b("IntersectionObserver"))(function(g,f){g.forEach(function(g){b("intersectionObserverEntryIsIntersecting")(g)&&(f.disconnect(),c.$14(a,d,e))})},{});f.observe(a);l.subscribeOnce(b("BigPipe").Events.displayed,function(){m=!0,f.disconnect(),c.$14(a,d,e),b("Bootloader").loadModules(["UFISubscriptionUpdates","UFIUserActions","UFIRetryActions"],function(){},"UFIController")})};c.prepare=function(){b("Arbiter").subscribeOnce(b("BigPipe").Events.init,function(a,b){l=b.arbiter})};c.$14=function(a,b,d){if(b.rootid)return null;b.rootid=a.id;return new c(a,Object.freeze(b),d)};var a=c.prototype;a.getRootNode=function(){return this.root};a.getContextArgs=function(){return this.$2};a.getFtEntIdentifier=function(){return this.$2.ftentidentifier};a.getInstanceID=function(){return this.$2.instanceid};a.getFluentContentToken=function(){return this.$2.fluentContentToken};a.shouldAutoplayLiveVODComments=function(){return!!this.$2.autoplayLiveVODComments};a.getIsCurrentCommentEmpty=function(){return this.$13};a.getOrderingMode=function(a){return a===b("CommentSection").FRIENDS?b("WebCommentViewOption").TOPLEVEL:b("UFIOrderingModeStore").getOrderingMode(this.$2.instanceid)};function c(a,c,d){__p&&__p();var e=this;this.$6=!1;this.$19=[];this.componentDidRender=function(){e.$19.length&&(e.$19.forEach(b("UFICommonInteractionLogger").endInteraction),e.$19.length=0)};this.$15();this.$16();this.root=a;this.$2=c;this.$7=null;b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").init(c,d));b("UFIRootRegistry").registerController(c.rootid,c.instanceid,c.ftentidentifier,function(){e.$17()});this.$4=new(b("UFIDomRootAdapter"))(this.root,this.$2);if(b("UFIConfig").feedfocusWrapperModule&&c.location==i.NEWSSTAND){var f=b("UFIConfig").feedfocusWrapperModule,g=b("DOMQuery").scry(this.root,"^._5pat");g=g[0];if(g){var h=b("createArrayFromMixed")(g.children),j=document.createDocumentFragment();h.forEach(function(a){j.appendChild(a)});b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,b("React").createElement(f,{instanceID:c.instanceid},b("React").createElement(b("DOMContainer.react"),null,j))),g)}}h=c.feedbackMode===b("UFIFeedbackMode").NEVER||c.feedbackMode===b("UFIFeedbackMode").NONE;this.$10={payloadSource:null,feedback:null,oldRange:{},commentIDToFocusOnMount:null,showLoadingUFI:!1,isActiveLoading:{},allSeenActiveLoadDirectionData:{},requestedInitialComments:!1,isHidden:h,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:!1,focusTopLevelComposer:!1,featuredCommentLists:{},featuredCommentIDs:[],translateAllCommentID:null,toplevelPagerClickCounts:{},replyPagerClickCounts:{},loadingVODComments:!1,shouldTranslateAllVisibleComments:!1,commentsLoadingTranslations:{},loadingCommentsForSection:new Set(),authorPinnedCommentID:null};this.$10.oldRange[b("CommentSection").DEFAULT]={offset:0,length:0};this.$10.deletedCounts[b("CommentSection").DEFAULT]={};this.authorProfiles={};this.comments={};this.comments[b("CommentSection").DEFAULT]=[];this.commentsToSection={};this.repliesMap={};this.$13=!0;d.authorpinnedcomments&&(this.authorPinnedComment=d.authorpinnedcomments[0],this.$10.authorPinnedCommentID=d.authorpinnedcomments[0].id);Object.assign(this.authorProfiles,d.profiles);var k=d.feedbacktarget?d.feedbacktarget:d.feedbacktargets&&d.feedbacktargets[0];this.canRenderHeader()||b("Bootloader").loadModules(["UFIActionLinkController"],function(b){return new b(a,c,k)},"UFIController");k&&this.$18(k,c);f=this.getOrderingMode(b("CommentSection").DEFAULT);g=null;var l=null;if(d.featuredcommentlists&&d.featuredcommentlists.comments&&d.featuredcommentlists.comments[c.ftentidentifier])g=d.featuredcommentlists.comments[c.ftentidentifier],this.$10.featuredCommentLists[c.ftentidentifier]=new(b("UFIFeaturedToplevelCommentListImpl"))(c.ftentidentifier,g.values,d.comments);else{h=d.commentlists&&d.commentlists.comments;h=h[c.ftentidentifier];g=h[f]}d.privatecommentlists&&d.privatecommentlists.comments&&d.privatecommentlists.comments[c.ftentidentifier]&&(l=d.privatecommentlists.comments[c.ftentidentifier][b("WebCommentViewOption").TOPLEVEL],this.$10.oldRange[b("CommentSection").FRIENDS]={offset:0,length:0});d.featuredcommentids&&(this.$10.featuredCommentIDs=d.featuredcommentids);this.ranges={};this.replyRanges={};this.commentCounts={};this.commentCounts[c.ftentidentifier]=0;this.privateCommentsCount=0;this.ranges[b("CommentSection").DEFAULT]={};this.ranges[b("CommentSection").DEFAULT][f]=new(b("UFIRange"))(g.range.offset,g.range.length);this.$10.oldRange[b("CommentSection").DEFAULT]={offset:g.range.offset,length:this.comments[b("CommentSection").DEFAULT]&&this.comments[b("CommentSection").DEFAULT].length||0};l&&(this.$10.deletedCounts[b("CommentSection").FRIENDS]={},this.comments[b("CommentSection").FRIENDS]=[],this.ranges[b("CommentSection").FRIENDS]={},this.ranges[b("CommentSection").FRIENDS][b("WebCommentViewOption").TOPLEVEL]=new(b("UFIRange"))(l.range.offset,l.range.length),this.$10.oldRange[b("CommentSection").FRIENDS]={offset:l.range.offset,length:this.comments[b("CommentSection").FRIENDS]&&this.comments[b("CommentSection").FRIENDS].length||0});d.commentlists.replies&&g.values.concat((l||{}).values||[]).concat(this.authorPinnedComment?this.authorPinnedComment.id:[]).forEach(function(a){var c=d.commentlists.replies[a];c&&(e.commentCounts[a]=e.getReplyCommentList(a).getCommentCount(),e.replaceReplyRange(a,new(b("UFIRange"))(c.range.offset,c.range.length)))});d.featuredcommentlists&&d.featuredcommentlists.replies&&g.values.forEach(function(a){var f=d.featuredcommentlists.replies[a];f&&(e.$10.featuredCommentLists[a]=new(b("UFIFeaturedReplyCommentListImpl"))(c.ftentidentifier,a,f.values,d.comments),e.commentCounts[a]=e.getReplyCommentList(a).getCommentCount(),e.replaceReplyRange(a,b("UFIRange").combine(new(b("UFIRange"))(f.range.offset,f.range.length),e.replyRanges[a])))});this.$8=null;this.ufiCentralUpdatesSubscriptions=[b("UFICentralUpdates").subscribe("feedback-updated",function(a,d){a=d.updates;c.ftentidentifier in a&&(e.$10.payloadSource=d.payloadSource,e.fetchAndUpdate(d.payloadSource,b("CommentSection").DEFAULT),l&&e.fetchAndUpdate(d.payloadSource,b("CommentSection").FRIENDS))}),b("UFICentralUpdates").subscribe("update-ranges",function(d,a){d=a.adjustedRanges&&a.adjustedRanges[c.ftentidentifier];d&&b("forEachObject")(d,function(a,b){b=e.getRange(b);b.updateRequestedRange(a.offset,b.length+a.length)})}),b("UFICentralUpdates").subscribe("update-feedback",function(b,a){a.ircid&&e.$19.push(a.ircid)})];this.$20(c);this.onUnloadSubscription=b("Run").onUnload(function(){return e.$21()});this.getToplevelCommentList(b("CommentSection").DEFAULT);l&&this.getToplevelCommentList(b("CommentSection").FRIENDS);b("UFICentralUpdates").handleUpdate(b("FeedbackPayloadSourceType").INITIAL_SERVER,d);if(c.islivestreaming&&c.fluentContentToken!=null){var m=Date.now();b("PinnedCommentEventCreateSubscription").subscribe(String(c.fluentContentToken),function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLivePinnedComment(c,a,Date.now()-m)},"UFIController")})}if(c.isActiveLivingRoom){var n=this.$2.ftentidentifier;b("Bootloader").loadModules(["PinnedStreamingCommentPinSubscription","RelayFBEnvironment","PinnedStreamingCommentUnpinSubscription"],function(a,d,e){a.subscribe(d,{feedback_id:n},{onNext:function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleFeedbackPinnedComment(c,a)},"UFIController")}}),e.subscribe(d,{feedback_id:n},{onNext:function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(a){b("UFISharedDispatcher").dispatch(b("UFIStoryAction").unpinComment(c))},"UFIController")}})},"UFIController")}(c.islivestreaming||c.isActiveLivingRoom)&&b("requireWeak")("UFILiveStreamingComments",function(a){var e=null;d.comments&&d.comments.length>0&&(e=d.comments[d.comments.length-1].fbid);a.start(c.ftentidentifier,k.commentcount,e,c.showLiveVideoAnnoucements,c.showLiveVideoBroadcastingJoinEvents,c.isViewerTheOwner,c.isLiveAudio,c);b("Run").onLeave(function(){return a.stop(c.ftentidentifier)})});!c.lazyFetch&&!this.canRenderHeader()&&this.$22(k);this.$2.fluentContentToken&&b("UFIVideoPlayerRegistry").registerUFIController(this,function(a){c.enableVODStreamingComments&&!e.$10.featuredCommentLists[c.ftentidentifier]&&b("UFIVODStreamingComments").start(e,a),b("UFICommercialBreakAdapter").start(c,a),b("UFIPlayLiveVODHighlightsAdapter").start(c,a),c.islivestreaming&&e.$12&&e.$12.addSubscriptions(a.addListener("stateChange",function(){a.isState("playing")&&e.render()})),b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").foundVideoPlayerController(c,a))},function(){c.enableVODStreamingComments&&b("UFIVODStreamingComments").stop(e.$2.ftentidentifier,c.instanceid),b("UFICommercialBreakAdapter").stop(c.instanceid),b("UFIPlayLiveVODHighlightsAdapter").stop(c.instanceid)})}a.$20=function(a){__p&&__p();var c=this;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("onEnclosingPageletDestroy")(this.root,function(){c.$17()}),b("Arbiter").subscribe(b("UFIUIEvents").PageCleared,function(){c.$17()}),b("Arbiter").subscribe("ConversationNub/destroy",function(a,d){d.root&&b("DOMQuery").contains(d.root,c.root)&&c.$17()}),b("Arbiter").subscribe("WorkHub/destroy",function(a,d){d.root&&b("DOMQuery").contains(d.root,c.root)&&c.$17()}),b("Arbiter").subscribe("TahoeController/exitTahoe",function(){return b("UFISharedDispatcher").dispatch(b("UFIStoryAction").hideFacecastReplies(a,!0))}));a.viewas&&this.$1.addSubscriptions(b("Arbiter").subscribe("pre_page_transition",function(c,d){a.viewas!==new(b("URI"))(d.to).getQueryData("viewas")&&(b("UFIToplevelPagedCommentList").resetCommentListsForFeedbackTargetID(a.ftentidentifier),b("UFIToplevelStreamedCommentList").resetAllCommentLists(a.ftentidentifier))}))};a.$18=function(a,c){__p&&__p();this.$23();var d=Date.now(),e=[];(a.ll||this.$2.source===b("FeedbackSourceType").TAHOE)&&e.push(b("UFILikeSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveLike(c.ftentidentifier,a,Date.now()-d)},"UFIController")}));this.$2.source===b("FeedbackSourceType").TAHOE&&this.$2.islivestreaming===!0&&b("gkx")("685345")&&e.push(b("UFIShareCountUpdateSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveShares(c.ftentidentifier,a.live_video_share_count_update_subscribe,Date.now()-d)},"UFIController")}));a.pagelc&&e.push(b("UFIPageCommentSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveComment(c.ftentidentifier,a.page_comment_create_subscribe,Date.now()-d)},"UFIController")}));a.lc&&e.push(b("UFICommentSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveComment(c.ftentidentifier,a.comment_create_subscribe,Date.now()-d)},"UFIController")}));a.lcl&&e.push(b("UFICommentLikeSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveCommentLike(c.ftentidentifier,a,Date.now()-d)},"UFIController")}));a.lti&&b("UFILiveTypingIndicator").isEnabled()&&e.push(b("UFITypingSubscriptionControllerFactory").forUFIController(a,c));a=new(b("SubscriptionsHandler"))();a.addSubscriptions.apply(a,e.filter(function(a){return!!a}));this.$7=a};a.$24=function(){var a=b("UFIFeedbackStore").getState()[this.$2.ftentidentifier];a&&this.$18(a,this.$2)};a.$25=function(){__p&&__p();var a=b("DOMQuery").scry(this.root,"^._5pat");a&&a[0]&&b("ReactDOM").unmountComponentAtNode(a[0]);b("DOM").scry(this.root,"^form ._3csb").forEach(function(a){b("ReactDOM").unmountComponentAtNode(a)});a=this.$4.getHeadRoot();a&&b("ReactDOM").unmountComponentAtNode(a);if(b("UFIRootRegistry").isSnowliftNode(this.$2.rootid)){a=this.$4.getSnowliftActionRoot();a&&b("ReactDOM").unmountComponentAtNode(a)}this.reactRoot&&this.reactRoot.unmount();b("ReactDOM").unmountComponentAtNode(this.root)};a.unitTestOnlySetFeedbackIntoState=function(a){this.$10.feedback=a};a.$15=function(){__p&&__p();var a=this;this.$12||(this.$3=new(b("UFIDispatcher"))(),this.$11={UFICallbackStore:new(b("UFICallbackStore"))(this.$3),UFIReactionStore:new(b("UFIReactionStore"))(this.$3)},this.$12=new(b("SubscriptionsHandler"))(),this.$12.addSubscriptions(this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_LIKE,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.changeCommentLike(c.comment.id,c.like,{source:a.$2.source,target:c.target})},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").CHANGE_REACTION,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.changeCommentReaction(c.comment.id,c.reactionType,{source:a.$2.source,instanceid:a.$2.instanceid},c.target)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFIStoryActionType").CHANGE_REACTION,function(a){b("Bootloader").loadModules(["UFILiveVideoCommentUtil"],function(b){return b.handleScheduledLiveSubscriberNuxLogic(a)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").CHANGE_VOTE,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.changeCommentVote(c.comment.id,c.comment.fbid,c.arrowType,c.currentVoteState,{source:a.$2.source,instanceid:a.$2.instanceid},c.target)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").REMOVE,function(c){b("Bootloader").loadModules(["UFICommentRemoveDialog","UFIUserActions"],function(b,d){return b.show(function(b){d.removeComment(c.comment.id,{source:a.$2.source,oneclick:!1,target:c.target},b),c.onConfirm()})},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").REMOVE_AND_BLOCK,function(c){b("Bootloader").loadModules(["UFICommentRemoveDialog","UFIUserActions"],function(b,d){return b.show(function(){d.removeComment(c.comment.id,{source:a.$2.source,oneclick:!1,target:c.target},!0),c.onConfirm()},!0)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").DELETE_COMMENT_AND_REMOVE_COMMENTER,function(c){b("Bootloader").loadModules(["UFICommentDeleteAndMemberRemoveDialog","UFIUserActions"],function(b,d){b.showEx({authorName:c.comment.author_name,commentId:c.comment.id,showRemoveContentOptions:c.comment.canseeremovecontentoptions},function(b){d.deleteCommentAndRemoveCommenter(c.comment.id,{source:a.$2.source,oneclick:!1,target:c.target},b.selectedDeletePosts,b.selectedDeleteComments,b.selectedDeclinePendingMembers,b.selectedBlockPermanently,b.selectedApplyToOtherGroups)})},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").MUTE_MEMBER,function(c){__p&&__p();if(!c.comment.ismuted)b("Bootloader").loadModules(["UFIMemberMuteDialog","UFIUserActions"],function(b,d){return b.show(function(b,e){d.muteMember(c.comment.id,{source:a.$2.source,oneclick:!1,target:c.target},b,e)},c.comment.author_name)},"UFIController");else{var d;b("Bootloader").loadModules(["GroupsMemberMuteDurationDefaults"],function(a){d=a.UNMUTE},"UFIController");b("Bootloader").loadModules(["UFIUserActions"],function(b){b.muteMember(c.comment.id,{source:a.$2.source,oneclick:!1,target:c.target},d,null)},"UFIController")}}),this.$11.UFICallbackStore.on("bulk_review",function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.showBulkReview(c.comment.id,{source:a.$2.source,target:c.target})},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_TEXT_DELIGHTS,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.toggleTextDelights(c.comment,{source:a.$2.source,target:c.target},!c.comment.text_delights_are_hidden)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").TRANSLATE,function(c){a.$10.commentsLoadingTranslations[c.comment.id]||(a.$10.commentsLoadingTranslations[c.comment.id]=!0,b("Bootloader").loadModules(["UFIUserActions"],function(b){b.translateComments(c.comment.ftentidentifier,[c.comment.id],c.trigger,{source:a.$2.source,target:c.target})},"UFIController"),b("UFICommentUtils").shouldShowTranslateAll(a.comments[b("CommentSection").DEFAULT],a.repliesMap,babelHelpers["extends"]({},a.$10.defaultRepliesExpandedMap,a.$10.repliesExpandedMap),a.$10.commentsLoadingTranslations)&&(a.$10.translateAllCommentID=c.comment.id),a.render())}),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_MARK_AS_SPAM,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.setHideAsSpam(c.comment.id,c.is_spam,{source:a.$2.source,target:c.target})},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_KEEP_SPAM,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.keepSpam(c.comment.id,{source:a.$2.source,target:c.target})},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").CHANGE_PIN_BY_AUTHOR,function(c){__p&&__p();var d=c.comment;b("Bootloader").loadModules(["UFIReplacePinnedCommentDialog","UFIUserActions"],function(e,f){__p&&__p();if(c.pinnedByAuthor){var g=a.$10.authorPinnedCommentID;g&&g!==d.id?e.show(function(){b("AuthorPinnedCommentLogger").logReplacingPinnedCommentAttempt(d.fbid);var e=b("UFIComments").getComment(g);b("UFIComments").setComment(g,b("ImmutableObject").set(e,{ispinnedbyauthor:!1}));f.authorPinComment(d,c.pinnedByAuthor);a.$10.authorPinnedCommentID=d.id}):(b("AuthorPinnedCommentLogger").logPinningCommentAttempt(d.fbid),f.authorPinComment(d,c.pinnedByAuthor),a.$10.authorPinnedCommentID=d.id)}else b("AuthorPinnedCommentLogger").logUnpinningCommentAttempt(d.fbid),a.$10.authorPinnedCommentID=null,f.authorPinComment(d,c.pinnedByAuthor)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_APPEAL_SPAM,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.appealSpam(c.comment.id,c.feedback.actorname,{source:a.$2.source,target:c.target})},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_SECURE_ACCOUNT,function(c){b("Bootloader").loadModules(["UFICommentSecureAccountDialog","UFIUserActions"],function(b,d){return b.show(function(){d.secureAccount(c.comment.id,{source:a.$2.source,target:c.target})},c.feedback.actorname)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFIStoryActionType").CHANGE_ACCEPTED_ANSWER,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.changeAcceptedAnswer(a.comment,a.doAccept)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_INLINE_BAN,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.banUser(c.comment,c.ownerid,c.is_banned,{source:a.$2.source,target:c.target})},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_INLINE_STREAM_BAN,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.streamBanUser(c.comment,c.ownerid,c.is_banned,{source:a.$2.source,target:c.target})},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").EMBED,function(a){a=b("XCommentEmbedPluginEmbedAsyncDialogController").getURIBuilder().setString("comment_id",a.comment.id).getURI();new(b("AsyncRequest"))(a).send()}),this.$11.UFICallbackStore.on(b("UFICommentActionType").DELETE_COMMENT_WITH_FEEDBACK,function(c){var d=c.comment;c=b("XGroupsContentRemoveDialogController").getURIBuilder().setFBID("group_id",c.comment.group_id.toString()).setFBID("content_id",c.comment.fbid).setEnum("source","group_mall").getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData({comment_id:d.id.toString(),ft_ent_identifier:d.ftentidentifier,source:a.$2.source,client_id:b("ClientIDs").getNewClientID()}).send()}),this.$11.UFICallbackStore.on(b("UFICommentActionType").MANAGE_CONSTITUENT_BADGE,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.manageConstituentBadge(a.comment)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFIAddCommentActionType").SUBMIT_NEW,function(c){var d=a.$4.getParentForm();d&&b("UFINewCommentNotifier").onNewComment(d,a.$2,c.comment,c.target,c.replyCommentID,c.timestamp)}),this.$11.UFICallbackStore.on(b("UFIAddCommentActionType").SUBMIT_EDIT,function(c){var d=c.comment,e=c.commentData,f=c.target;!e.visibleValue&&!e.attachedPhoto&&!e.attachedVideo&&!e.attachedFile&&!e.attachedSticker&&!e.attachedShareURL?b("Bootloader").loadModules(["UFICommentRemoveDialog","UFIUserActions"],function(b,c){return b.show(function(){return c.removeComment(d.id,{source:a.$2.source,oneclick:!1,target:f},!1)},!1)},"UFIController"):b("Bootloader").loadModules(["UFIUserActions"],function(b){b.editComment(d.id,e.visibleValue,e.encodedValue,{source:a.$2.source,target:f,attachedPhoto:e.attachedPhoto,attachedVideo:e.attachedVideo,attachedFile:e.attachedFile,attachedSticker:e.attachedSticker,attachedShareURL:e.attachedShareURL,isMarkdown:e.isMarkdown,delightRanges:e.delightRanges})},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").REMOVE_PREVIEW,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.removePreview(c.comment,{source:a.$2.source,target:c.target})},"UFIController")}),this.$11.UFICallbackStore.on(b("UFIAddCommentActionType").RETRY_SUBMIT,function(c){b("Bootloader").loadModules(["UFIRetryActions"],function(b){b.retrySubmit(c.comment,a.$2.source)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFIStoryActionType").PAGE_IN_COMMENTS,function(c){a.$10.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION,a.$26(c.commentID,c.direction,c.nextRange,c.section),a.fetchAndUpdateWithLogs(b("FeedbackPayloadSourceType").USER_ACTION,c.section||b("CommentSection").DEFAULT,c.direction,c.interactionRequestCorrelationID)}),this.$11.UFICallbackStore.on(b("UFIStoryActionType").TOGGLE_REPLIES,function(c){a.$10.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION;c=c.commentID;var d=a.$10.repliesExpandedMap[c];d?(delete a.$10.isActiveLoading[c],a.$10.repliesExpandedMap[c]=!1,a.render()):(a.$10.focusedReplyComposer={replyID:"replycomposer-"+c,initiatorComment:null},a.$26(c,b("UFIPaging").BOTTOM,a.$27(c)),a.fetchAndUpdateWithLogs(b("FeedbackPayloadSourceType").USER_ACTION,a.commentsToSection[c]||b("CommentSection").DEFAULT))}),this.$11.UFICallbackStore.on(b("UFIStoryActionType").SHOW_REPLIES,function(c){a.$10.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION,a.$10.focusedReplyComposer={replyID:"replycomposer-"+c.commentID,initiatorComment:c.initiatorComment},a.$26(c.commentID,b("UFIPaging").BOTTOM,a.$27(c.commentID)),a.fetchAndUpdateWithLogs(b("FeedbackPayloadSourceType").USER_ACTION,a.commentsToSection[c.commentID]||b("CommentSection").DEFAULT)}),this.$11.UFICallbackStore.on(b("UFIStoryActionType").COMMENTS_ARRIVED,function(c){a.$10.loadingCommentsForSection["delete"](c.section),a.$10.payloadSource=c.source,a.$10.showLoadingUFI=!1,a.$10.isActiveLoading={},a.$10.commentIDToFocusOnMount=c.source===b("FeedbackPayloadSourceType").USER_ACTION&&!a.$2.isBroadcasterUFI&&!a.$2.isActiveLivingRoom?a.$28(c.newOffset,c.newLength,c.section):null,a.$10.oldRange[c.section]={offset:c.newOffset,length:c.newLength},a.$29(),a.$10.shouldTranslateAllVisibleComments&&!b("UFIOrderingModeStore").isLiveStreaming(a.$2.instanceid)&&a.$30(),c.interactionRequestCorrelationID&&a.$19.push(c.interactionRequestCorrelationID),a.render(),c.source==b("FeedbackPayloadSourceType").ENDPOINT_COMMENT_FETCH&&(b("Arbiter").inform(b("UFIUIEvents").CommentPager),b("UFIConfig").logCommentLoad&&b("UFICommentLogger").logCommentFetchReceived(a.$2.ftentidentifier,Date.now()))})))};a.$16=function(){__p&&__p();var a=this;this.$9=[b("UFISharedDispatcher").register(function(c){__p&&__p();switch(c.type){case b("UFIInstanceActionType").REMOVE:if(c.instanceID!==a.$2.instanceid){c.ftentidentifier===a.$2.ftentidentifier&&a.$24();return}b("UFIRootRegistry").cleanupInstance(c.instanceID);break;case b("UFIInstanceActionType").TOGGLE_COMMENTS:if(c.instanceID!==a.$2.instanceid)return;a.$10.payloadSource=b("FeedbackPayloadSourceType").COLLAPSE_ACTION;a.$10.isHidden=!a.$10.isHidden;a.render();break;case b("UFIInstanceActionType").CHANGE_ORDER_MODE:if(c.instanceID!==a.$2.instanceid)return;a.$10.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION;a.comments[b("CommentSection").FRIENDS]?a.$10.loadingCommentsForSection.add(b("CommentSection").DEFAULT):a.$10.showLoadingUFI=!0;a.render();a.fetchAndUpdate(b("FeedbackPayloadSourceType").USER_ACTION,b("CommentSection").DEFAULT);break;case b("UFIInstanceActionType").REQUESTED_VOD_COMMENTS:if(c.instanceID!==a.$2.instanceid)return;a.$10.loadingVODComments=!0;a.render();break;case b("UFIInstanceActionType").RECEIVED_VOD_COMMENTS:if(c.instanceID!==a.$2.instanceid)return;a.$10.loadingVODComments=!1;a.render();break;case b("UFIStoryActionType").LIVE_PIN_COMMENT:if(c.ftentidentifier!==a.$2.ftentidentifier)return;var d=b("UFIComments").getComment(c.commentID),e=d?d.author:null;e&&b("ShortProfiles").get(e,function(b){a.authorProfiles[e]=b,a.$6||a.render()});break;case b("UFIStoryActionType").LIVE_UNPIN_COMMENT:if(c.ftentidentifier!==a.$2.ftentidentifier)return;a.render();break;case b("UFIStoryActionType").SHOW_COMMENTS:if(c.instanceID!==a.$2.instanceid)return;a.$10.isHidden=!1;a.$10.focusTopLevelComposer=!0;b("CommentPrelude").expand(a.root,!1,"ufi_controller");a.staticUFI&&b("CommentPrelude").expand(a.staticUFI,!1,"ufi.react");a.render();break;case b("UFIInstanceActionType").TRANSLATE_ALL:if(c.instanceID!==a.$2.instanceid)return;if(a.$2.islivestreaming)break;a.$10.shouldTranslateAllVisibleComments=!0;a.$10.translateAllCommentID=null;a.$30();a.render();break;case b("UFIAddCommentActionType").CHANGE_CONTENT:if(c.instanceID!==a.$2.instanceid)return;a.$13=c.text.length===0;break;case b("UFIAddCommentActionType").SUBMIT_NEW:if(c.instanceID!==a.$2.instanceid)return;a.$13=!0;break}})]};a.getStores=function(){return this.$11};a.$27=function(a){a=this.commentCounts[a];var c=Math.min(a,this.$2.pagesize);return new(b("UFIRange"))(a-c,c)};a.$26=function(a,c,d,e){__p&&__p();e=e||this.commentsToSection[a]||b("CommentSection").DEFAULT;var f=this.$10,g=f.isActiveLoading,h=f.allSeenActiveLoadDirectionData,i=f.repliesExpandedMap,j=f.toplevelPagerClickCounts;f=f.replyPagerClickCounts;var k=this.$2.ftentidentifier,l=a!==k;g[a]=c;g=h[a]||{};g[c]=!0;h[a]=g;l?i[a]=!0:this.$10.hasPagedToplevel=!0;if(a==k){c=this.getOrderingMode(e);j[e]=j[e]||{};h=j[e][c]||0;j[e][c]=h+1;this.getRange(e).updateRequestedRange(d.offset,d.length)}else{g=f[a]||0;f[a]=g+1;this.replyRanges[a].updateRequestedRange(d.offset,d.length)}};a.$31=function(){__p&&__p();var a=this;this.$10.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION;this.$10.showLoadingUFI=!0;this.$10.requestedInitialComments=!0;this.$10.loadingCommentsForSection.add(b("CommentSection").DEFAULT);this.comments[b("CommentSection").FRIENDS]&&this.$10.loadingCommentsForSection.add(b("CommentSection").FRIENDS);this.$10.loadingCommentsForSection.forEach(function(c){var d=a.getToplevelCommentList(c).getCommentCount(),e=Math.min(d,a.$2.numLazyComments||0);b("forEachObject")(a.ranges[c],function(a){a.updateRequestedRange(d-e,e)});a.fetchAndUpdate(b("FeedbackPayloadSourceType").USER_ACTION,c)});b("UFIFeedbackTargets").getFeedbackTarget(this.$2.ftentidentifier,function(b){a.canRenderHeader()?a.renderHeader(b):a.$22(b)})};a.$22=function(a){var c=this;this.shouldShowCommentOrderingModeSelector(a)&&b("DOM").scry(this.root,"^form ._3csb").slice(0,1).forEach(function(d){b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("UFIOrderingModeSelectorContainer.react").__setRef("UFIController"),contextArgs:c.$2,feedback:a})),d)})};a.$29=function(){var a=this;if(Object.keys(this.$10.commentsLoadingTranslations).length==0)return;this.comments[b("CommentSection").DEFAULT].concat(this.comments[b("CommentSection").FRIENDS]||[]).forEach(function(b){a.$10.commentsLoadingTranslations[b.id]&&!!b.translationdata&&delete a.$10.commentsLoadingTranslations[b.id]});Object.keys(this.repliesMap).forEach(function(b){b=a.repliesMap[b];b.forEach(function(b){a.$10.commentsLoadingTranslations[b.id]&&!!b.translationdata&&delete a.$10.commentsLoadingTranslations[b.id]})})};a.$30=function(){__p&&__p();var a=this,c=this.comments[b("CommentSection").DEFAULT].concat(this.comments[b("CommentSection").FRIENDS]||[]).filter(function(b){return a.$32(b)}).map(function(a){return a.id}),d=babelHelpers["extends"]({},this.$10.defaultRepliesExpandedMap,this.$10.repliesExpandedMap),e=[];Object.keys(this.repliesMap).filter(function(a){return d[a]}).forEach(function(b){e=e.concat(a.repliesMap[b])});c=c.concat(e.filter(function(b){return a.$32(b)}).map(function(a){return a.id}));c.length>0&&(c.forEach(function(b){return a.$10.commentsLoadingTranslations[b]=!0}),b("Bootloader").loadModules(["UFIUserActions"],function(d){d.translateComments(a.$2.ftentidentifier,c,b("TranslationTrigger").TRANSLATE_ALL,{source:a.$2.source})},"UFIController"))};a.$32=function(a){return a.istranslatable&&!a.translationdata&&!this.$10.commentsLoadingTranslations[a.id]};a.canRenderHeader=function(){return!!this.$4.getHeadRoot()};a.renderHeader=function(a){if(!this.canRenderHeader())return;b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,b("React").createElement(b("UFIActionHeader.react"),{contextArgs:this.$2,dispatcher:this.$3,feedbacktarget:a,stores:this.$11})),this.$4.getHeadRoot());var c=b("UFIRootRegistry").isSnowliftNode(this.$2.rootid);c&&this.$4.getSnowliftActionRoot()&&b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.$3,stores:this.$11},b("React").createElement(b("UFIActionLinks.react"),{contextArgs:this.$2,feedbacktarget:a,hideActorSelector:!0,hideBling:!0}))),this.$4.getSnowliftActionRoot())};a.shouldComponentUpdate=function(){if(this.$2.islivestreaming&&(this.$10.payloadSource===b("FeedbackPayloadSourceType").STREAMING||this.$10.payloadSource===b("FeedbackPayloadSourceType").LIVE_SEND)){var a=b("UFIVideoPlayerRegistry").getAvailableVideoPlayerController(this.$2.instanceid);a=a?a.isState("playing")&&!a.getOption("WatchAndScroll","isActive"):!1;var c=b("UFICommentVisibilityStore").getVisibility(b("UFICommentVisibilityStore").getState(),this.$2)===b("UFIVisibility").VISIBLE;return a||c}return!0};a.render=function(){__p&&__p();var a=this;if(!this.shouldComponentUpdate())return;if(this.$10.showLoadingUFI||b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid)&&b("UFIThreadedFacecastCommentsStore").getCommentID(this.$2.instanceid)==null&&this.$10.loadingVODComments){b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,this.$33()),this.root);return}this.$10.feedback||h(0,5267);var c=this.$10.feedback,d=c.reactionsentences,e=c.likesentences;c=c.replysocialsentencemaxreplies;d=this.comments[b("CommentSection").DEFAULT].length||this.comments[b("CommentSection").FRIENDS]&&this.comments[b("CommentSection").FRIENDS].length||!b("isEmpty")((d||e).current);e=this.$10.payloadSource;d&&k(e)&&this.$2.feedbackMode!==b("UFIFeedbackMode").NEVER&&(this.$10.isHidden=!1,b("CommentPrelude").expand(this.root,!1,"ufi_controller"));if(this.$2.disableCSSHiding&&this.$10.isHidden){b("ReactDOM").unmountComponentAtNode(this.root);return}if(this.$2.lazyFetch&&!this.$10.requestedInitialComments){b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,this.$33()),this.root);this.$31();return}d=this.getRange(b("CommentSection").DEFAULT);this.$8===null&&(this.$8=d.getOffset()+d.getLength()-1);c=c||-1;var f={};f[this.$2.ftentidentifier]=new(b("UFIRange"))(d.offset,d.length).updateRequestedRange(d.requestedOffset,d.requestedLength);for(var g in this.replyRanges)f[g]=new(b("UFIRange"))(this.replyRanges[g].offset,this.replyRanges[g].length).updateRequestedRange(this.replyRanges[g].requestedOffset,this.replyRanges[g].requestedLength);var i=babelHelpers["extends"]({},this.$10.defaultRepliesExpandedMap,this.$10.repliesExpandedMap),j=!!this.$10.featuredCommentLists[this.$2.ftentidentifier];d=b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid)?!0:this.getToplevelCommentList(b("CommentSection").DEFAULT).getClientHasAll()&&d.offset===0&&d.length===this.getToplevelCommentList(b("CommentSection").DEFAULT).getCommentCount();var l=this.$10.focusTopLevelComposer,m=this.$34(e),n=this.getOrderingMode(b("CommentSection").DEFAULT),o=this.comments[b("CommentSection").DEFAULT].concat(this.authorPinnedComment?this.authorPinnedComment:[]).filter(function(b){return b.id!==a.$10.authorPinnedCommentID}),p=this.comments[b("CommentSection").DEFAULT].concat(this.authorPinnedComment?this.authorPinnedComment:[]).filter(function(b){return b.id===a.$10.authorPinnedCommentID});p=p.length&&p[0];var q=this.comments[b("CommentSection").FRIENDS],r=(this.ranges[b("CommentSection").FRIENDS]||{})[b("WebCommentViewOption").TOPLEVEL],s=b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.$3,stores:this.$11},b("React").createElement(b("StaticUFI.react"),{ref:function(b){a.staticUFI=b},feedback:this.$10.feedback,contextArgs:this.$2,repliesMap:this.repliesMap,commentCounts:this.commentCounts,deletedCounts:this.$10.deletedCounts[b("CommentSection").DEFAULT],privateDeletedCounts:this.$10.deletedCounts[b("CommentSection").FRIENDS],availableComments:o,availablePrivateComments:q,source:this.$2.source,payloadSource:e,ranges:f,authorProfiles:this.authorProfiles,loggingOffset:this.$8,replySocialSentenceMaxReplies:c,orderingMode:n,hideOrderingModeSelector:j,commentPermalinks:this.$10.commentPermalinks,canAddCommentMap:this.$10.canAddCommentMap,canReplyMap:this.$10.canReplyMap,focusTopLevelComposer:l,focusReply:m,isActiveLoading:this.$10.isActiveLoading,allSeenActiveLoadDirectionData:this.$10.allSeenActiveLoadDirectionData,repliesExpandedMap:i,hasPagedToplevel:this.$10.hasPagedToplevel,commentIDToFocusOnMount:this.$10.commentIDToFocusOnMount,hideToplevelPager:d,featuredCommentIDs:this.$10.featuredCommentIDs,loadingTranslationsMap:this.$10.commentsLoadingTranslations,translateAllCommentID:this.$10.translateAllCommentID,privateCommentsCount:this.privateCommentsCount,privateCommentsRange:r,loadingCommentsForSection:this.$10.loadingCommentsForSection,authorPinnedComment:p}));if(this.$2.enableAsyncFacecastUFI){var t=this.reactRoot?this.reactRoot:this.reactRoot=b("ReactDOM").unstable_createRoot(this.root);e===b("FeedbackPayloadSourceType").INITIAL_SERVER?b("ReactDOM").flushSync(function(){t.render(s,a.componentDidRender)}):t.render(s,this.componentDidRender)}else b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,s),this.root,this.componentDidRender);b("LiveTimer").updateTimeStamps();o=this.$4.getParentForm();o&&b("Arbiter").inform(b("UFIUIEvents").Changed,{form:o});e!=b("FeedbackPayloadSourceType").INITIAL_SERVER&&b("Arbiter").inform("reflow");this.$10.focusedReplyComposer=null;this.$10.focusTopLevelComposer=!1};a.$35=function(a){return this.commentsToSection[a]||b("CommentSection").DEFAULT};a.$34=function(a){if(a===b("FeedbackPayloadSourceType").INITIAL_SERVER&&this.$10.feedback&&this.$10.feedback.permalinkcommentid)return{replyID:"replycomposer-"+this.$10.feedback.permalinkcommentid};else if(this.$10.focusedReplyComposer)return this.$10.focusedReplyComposer;return null};a.$28=function(a,c,d){var e=(this.$10.oldRange||{})[b("CommentSection").DEFAULT];if(e&&(e.offset!=a||e.length!=c)){a=a<e.offset?e.length:0;if(a<c)return this.comments[d][a].id}return this.$10.commentIDToFocusOnMount};a.$36=function(a,b,c){if(a&&b.id===a.permalinkcommentid)return!0;if(c>1)return!0;if(c>0&&b.interestingReplyOffset===void 0)return!0;b=a&&b.author===a.viewerid;return b&&c==1?!0:!1};a.getNewRange=function(a,c,d,e){if(b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid))return new(b("UFIRange"))(0,c.feedcarded?4:50);else{c=e===b("CommentSection").FRIENDS?this.privateCommentsCount:this.commentCounts[c.ftentidentifier];return j(this.getRange(e),c,d,a)}};a.getNewReplyRange=function(a,c,d){var e=c.id;if(this.replyRanges[e])return j(this.getReplyRange(e),this.commentCounts[e],d,a);else if(c.interestingReplyOffset!==void 0)return new(b("UFIRange"))(c.interestingReplyOffset,1);else{e=this.$10.feedback&&this.$10.feedback.isranked;a=e?0:Math.min(d,2);return new(b("UFIRange"))(0,a)}};a.fetchAndUpdateWithLogs=function(a,b,c,d){a===this.$10.payloadSource||h(0,5268),this.$37(a,!0,b,c,d)};a.fetchAndUpdate=function(a,b,c,d){a===this.$10.payloadSource||h(0,5269),this.$37(a,!1,b,c,d)};a.$38=function(a,b,c,d){var e=this.getOrderingMode(b);b=(this.$10.toplevelPagerClickCounts[b]||{})[e]||0;return{numPagerClicks:a?b:null,viewAs:this.$2.viewas,feedContext:this.$2.feedcontext,feedbackSource:this.$2.source,streamingOrderReversed:this.$2.streamingCommentOrderReversed,direction:c,interactionRequestCorrelationID:d}};a.$39=function(a,b){return{numPagerClicks:b?this.$10.replyPagerClickCounts[a]||0:null,viewAs:this.$2.viewas,feedContext:this.$2.feedcontext}};a.$40=function(a,c){__p&&__p();var d=this,e=this.$10.feedback,f=this.getToplevelCommentList(c),g=this.getNewRange(a,this.$2,f.getCommentCount(),c);f=b("UFIFetcher").fetchCommentsOrThrow(f,g,this.$38(!1,c));this.$41(g,f,c);var h=b("UFICommentFilters").getAuthors(f);c===b("CommentSection").DEFAULT&&this.authorPinnedComment&&(f=[].concat(f,[this.authorPinnedComment]));f.forEach(function(e){var f=e.id,g=d.getReplyCommentList(f),c=d.getNewReplyRange(a,e,g.getCommentCount());g=b("UFIFetcher").fetchCommentsOrThrow(g,c,d.$39(f,!1));h.push.apply(h,b("UFICommentFilters").getAuthors(g));d.$42(c,e,g)});e&&h.push.apply(h,b("UFIFeedbackFilters").getRequestedIDs(e));g=b("UFILivePinnedCommentStore").getPinnedCommentAuthorID(this.$2.ftentidentifier);g&&h.push(g);if(e&&e.acceptedanswer){c=b("UFIComments").getComment(e.acceptedanswer);c&&c.author&&h.push(c.author)}Object.assign(this.authorProfiles,b("ShortProfiles").getMultiNow(h))};a.$37=function(a,c,d,e,f){__p&&__p();var g=this,h=b("UFIFeedbackTargets").getFeedbackTargetIfExists(this.$2.ftentidentifier);if(!h){b("FBLogger")("ufi").warn("Feedback target %s not present while rendering UFI with source %s",this.$2.ftentidentifier,a);return}this.$10.feedback=h;k(a)&&this.render();this.canRenderHeader()&&this.renderHeader(h);this.$10.isHidden||(a===b("FeedbackPayloadSourceType").INITIAL_SERVER?(this.$40(a,d),this.$3.dispatch(b("UFIStoryAction").commentsArrived(this.$2,this.getRange(d).getOffset(),this.comments[d].length,a,d,f,this.$43()))):b("promiseDone")(this.fetchAllComments(a,c,d,e,f),function(){return g.$3.dispatch(b("UFIStoryAction").commentsArrived(g.$2,g.getRange(d).getOffset(),g.comments[d].length,a,d,f))}))};a.fetchAllComments=function(a,c,d,e,f){__p&&__p();var g=this;return b("Promise").resolve().then(function(){return g.fetchCommentsForFeedbackTarget(a,c,d,e,f).then(function(e){d===b("CommentSection").DEFAULT&&g.authorPinnedComment&&(e=[].concat(e,[g.authorPinnedComment]));var f=b("UFICommentFilters").getAuthors(e);return!g.$10.feedback||!g.$10.feedback.isthreaded||!e.length?f:g.fetchAllReplyIDsForComments(e,a,c).then(function(a){return f.concat(a)})}).then(function(a){return!g.$10.feedback?[]:b("UFIFeedbackFilters").getRequestedIDs(g.$10.feedback).concat(a)})}).then(function(a){var c=g.$10.feedback,d=b("UFILivePinnedCommentStore").getPinnedCommentAuthorID(g.$2.ftentidentifier);d&&a.push(d);if(c&&c.acceptedanswer){d=b("UFIComments").getComment(c.acceptedanswer);d&&d.author&&a.push(d.author)}return b("UFIFetcher").fetchShortProfiles(a)}).then(function(a){return Object.assign(g.authorProfiles,a)})};a.fetchCommentsForFeedbackTarget=function(a,c,d,e,f){var g=this,h=this.getToplevelCommentList(d).getCommentCount(),i=this.getNewRange(a,this.$2,h,d);return b("UFIFetcher").fetchComments(this.getToplevelCommentList(d),i,this.$38(c,d,e,f)).then(function(a){g.$41(i,a,d);return a})};a.$41=function(a,c,d){__p&&__p();var e=this,f=this.getToplevelCommentList(d),g=this.$2.ftentidentifier,h=b("gkx")("678267")||b("gkx")("678268"),i=this.$10,j=i.deletedCounts,k=i.canAddCommentMap,l=i.canReplyMap,m=i.commentPermalinks;this.replaceRange(a,d);this.comments[d]=c;d===b("CommentSection").DEFAULT?this.commentCounts[g]=f.getCommentCount():this.privateCommentsCount=f.getCommentCount();c.forEach(function(a){var c=a.id,g=a.cancomment,i=a.fbid,j=a.voteEnabled,k=a.voteCount;a=a.voteState;l[c]=g;m[c]=f.getPermalinkForComment(c);e.commentsToSection[c]=d;h&&j&&i&&e.$3.dispatch(b("UFICommentAction").updateVoteCountAndState(e.$2,i,k?k:0,a?a:b("UFIConstants").UFICommentVoteType.NONE))});j[d]||(j[d]={});j[d][g]=f.getDeletedCount();k[g]=!this.$10.featuredCommentLists[g]};a.fetchRepliesForComment=function(a,c,d){var e=this,f=a.id,g=this.getReplyCommentList(f).getCommentCount(),h=this.getNewReplyRange(c,a,g);return b("UFIFetcher").fetchComments(this.getReplyCommentList(f),h,this.$39(f,d)).then(function(b){e.$42(h,a,b);return b})};a.$42=function(a,c,d){__p&&__p();var e=c.id,f=this.getReplyCommentList(e),g=this.$10,h=g.deletedCounts,i=g.canAddCommentMap,j=g.featuredCommentLists,k=g.defaultRepliesExpandedMap,l=g.feedback,m=g.canReplyMap,n=g.commentPermalinks;this.replaceReplyRange(e,a);this.repliesMap[e]=d;this.commentCounts[e]=f.getCommentCount();h[b("CommentSection").DEFAULT][e]=f.getDeletedCount();i[e]=!j[e];k[e]=this.$36(l,c,d.length);d.forEach(function(a){var b=a.id;a=a.cancomment;m[b]=a;n[b]=f.getPermalinkForComment(b)})};a.$43=function(){var a;return this.$2.islivestreaming&&((a=this.$2)!=null?(a=a.liveVideoThreadedCommentsConfig)!=null?a.enable_replies:a:a)?(a=this.$10)!=null?(a=a.feedback)!=null?a.permalinkcommentid:a:a:null};a.fetchAllReplyIDsForComments=function(a,c,d){var e=this;a=new(b("Promise").all)(a.map(function(a){return e.fetchRepliesForComment(a,c,d).then(function(a){return b("UFICommentFilters").getAuthors(a)})}));return a.then(b("flattenArray"))};a.getToplevelCommentList=function(a){var c=this.$2;if(this.$10.featuredCommentLists[c.ftentidentifier])return this.$10.featuredCommentLists[c.ftentidentifier];if(b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid))return b("UFIToplevelStreamedCommentList").getCommentList(c.ftentidentifier,c.islivestreaming?b("UFIToplevelStreamedCommentList").GLOBAL_ID:c.instanceid);var d=this.getOrderingMode(a);return b("UFIToplevelPagedCommentList").getCommentList(c.ftentidentifier,d,a)};a.getReplyCommentList=function(a){if(a in this.$10.featuredCommentLists)return this.$10.featuredCommentLists[a];var c=this.commentsToSection[a]||b("CommentSection").DEFAULT;c=this.getOrderingMode(c);return b("UFIReplyCommentList").getCommentList(this.$2.ftentidentifier,a,c)};a.getRange=function(a){var c=this.getOrderingMode(a);this.ranges[a]=this.ranges[a]||{};if(!(c in this.ranges[a])){var d=this.getToplevelCommentList(a).getCommentCount(),e=Math.min(d,this.$2.defaultNumCommentsToExpand);this.ranges[a][c]=new(b("UFIRange"))(d-e,e)}return this.ranges[a][c]};a.replaceRange=function(a,b){var c=this.getOrderingMode(b);this.ranges[b]=this.ranges[b]||{};this.ranges[b][c]=a};a.getReplyRange=function(a){a in this.replyRanges||(this.replyRanges[a]=new(b("UFIRange"))());return this.replyRanges[a]};a.replaceReplyRange=function(a,b){this.replyRanges[a]=b};a.$17=function(){this.$6=!0,this.$25(),this.$44()};a.$44=function(){this.$45(),this.$46(),this.$23(),this.$47(),this.$48(),this.$49(),this.$50(),this.onUnloadSubscription&&this.onUnloadSubscription.remove(),b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").remove(this.$2))};a.$21=function(){this.$23()};a.$50=function(){var a=this.$2;b("UFIPlayLiveVODHighlightsAdapter").stop(a.instanceid)};a.$49=function(){var a=this.$2;b("UFICommercialBreakAdapter").stop(a.instanceid)};a.$48=function(){var a=this.$2;b("UFIVODStreamingComments").stop(a.ftentidentifier,a.instanceid)};a.$45=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(a){return a&&b("UFICentralUpdates").unsubscribe(a)})};a.$46=function(){this.$1&&this.$1.release()};a.$23=function(){this.$7&&this.$7.release()};a.$47=function(){this.$12&&(this.$12.release(),this.$12=null),this.$9.forEach(function(a){return b("UFISharedDispatcher").unregister(a)})};a.$33=function(){var a=this.$2;return b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.$3,stores:this.$11},b("React").createElement(b("StaticUFI.react"),{feedback:this.$10.feedback,id:this.$2.ftentidentifier,contextArgs:a,commentCounts:this.commentCounts,loadingComments:!0}))};a.shouldShowCommentOrderingModeSelector=function(a){var c=this.getToplevelCommentList(b("CommentSection").DEFAULT).getCommentCount()||a.commentcount||0;return a.orderingmodes&&c>=b("UFIConstants").minCommentsForOrderingModeSelector&&!this.$10.featuredCommentLists[this.$2.ftentidentifier]};return c}();e.exports=a}),null);