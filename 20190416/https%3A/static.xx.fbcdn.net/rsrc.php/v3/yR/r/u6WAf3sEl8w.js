if (self.CavalryLogger) { CavalryLogger.start_js(["iIJcT"]); }

__d("AdsCMPageChangeActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"ADS_CM_PAGE_CHANGE"}}),null);
__d("isIterable",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a!=null&&(Array.isArray(a)||typeof a==="string"||typeof a==="object"&&a.constructor===Object||typeof a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]==="function")}e.exports=a}),null);
__d("AdsICContainsContextualTargetingPredicatePlugin",["immutable","isIterable"],(function(a,b,c,d,e,f){"use strict";var g=b("immutable").List;a={type:"icContextualTargetingPredicate",key:"contains",matches:function(a,c){return b("isIterable")(a)?g(a).includes(c):!1}};e.exports=a}),null);
__d("AdsICEqualsContextualTargetingPredicatePlugin",[],(function(a,b,c,d,e,f){"use strict";a={type:"icContextualTargetingPredicate",key:"equals",matches:function(a,b){return typeof b==="number"&&typeof a==="number"&&a===b}};e.exports=a}),null);
__d("AdsICGreaterThanContextualTargetingPredicatePlugin",[],(function(a,b,c,d,e,f){"use strict";a={type:"icContextualTargetingPredicate",key:"greater_than",matches:function(a,b){return typeof b==="number"&&typeof a==="number"&&a>b}};e.exports=a}),null);
__d("AdsICIsInContextualTargetingPredicatePlugin",["immutable","isIterable"],(function(a,b,c,d,e,f){"use strict";var g=b("immutable").List;a={type:"icContextualTargetingPredicate",key:"is_in",matches:function(a,c){if(b("isIterable")(c))return g(c).includes(a);else if(typeof c==="boolean")return a===c;return!1}};e.exports=a}),null);
__d("AdsICIsNotInContextualTargetingPredicatePlugin",["immutable","isIterable"],(function(a,b,c,d,e,f){"use strict";var g=b("immutable").List;a={type:"icContextualTargetingPredicate",key:"is_not_in",matches:function(a,c){if(a==null)return!0;return b("isIterable")(c)?!g(c).includes(a):!1}};e.exports=a}),null);
__d("AdsICLessThanContextualTargetingPredicatePlugin",[],(function(a,b,c,d,e,f){"use strict";a={type:"icContextualTargetingPredicate",key:"less_than",matches:function(a,b){return typeof b==="number"&&typeof a==="number"&&a<b}};e.exports=a}),null);
__d("AdsICNotContainsContextualTargetingPredicatePlugin",["immutable","isIterable"],(function(a,b,c,d,e,f){"use strict";var g=b("immutable").List;a={type:"icContextualTargetingPredicate",key:"not_contains",matches:function(a,c){if(a==null)return!0;return b("isIterable")(a)?!g(a).includes(c):!1}};e.exports=a}),null);
__d("AdsICNotEqualsContextualTargetingPredicatePlugin",[],(function(a,b,c,d,e,f){"use strict";a={type:"icContextualTargetingPredicate",key:"not_equals",matches:function(a,b){return a==null?!0:typeof b==="number"&&typeof a==="number"&&a!==b}};e.exports=a}),null);
__d("AdsICNotNullContextualTargetingPredicatePlugin",[],(function(a,b,c,d,e,f){"use strict";a={type:"icContextualTargetingPredicate",key:"not_null",matches:function(a,b){return a!==null}};e.exports=a}),null);
__d("AdsICNullContextualTargetingPredicatePlugin",[],(function(a,b,c,d,e,f){"use strict";a={type:"icContextualTargetingPredicate",key:"null",matches:function(a,b){return a===null}};e.exports=a}),null);
__d("AdsICContextualTargetingPredicatePlugins",["adsPluginsFactory","AdsICContainsContextualTargetingPredicatePlugin","AdsICEqualsContextualTargetingPredicatePlugin","AdsICGreaterThanContextualTargetingPredicatePlugin","AdsICIsInContextualTargetingPredicatePlugin","AdsICIsNotInContextualTargetingPredicatePlugin","AdsICLessThanContextualTargetingPredicatePlugin","AdsICNotContainsContextualTargetingPredicatePlugin","AdsICNotEqualsContextualTargetingPredicatePlugin","AdsICNotNullContextualTargetingPredicatePlugin","AdsICNullContextualTargetingPredicatePlugin"],(function(a,b,c,d,e,f){"use strict";a=b("adsPluginsFactory")(function(){return[b("AdsICContainsContextualTargetingPredicatePlugin"),b("AdsICEqualsContextualTargetingPredicatePlugin"),b("AdsICGreaterThanContextualTargetingPredicatePlugin"),b("AdsICIsInContextualTargetingPredicatePlugin"),b("AdsICIsNotInContextualTargetingPredicatePlugin"),b("AdsICLessThanContextualTargetingPredicatePlugin"),b("AdsICNotContainsContextualTargetingPredicatePlugin"),b("AdsICNotEqualsContextualTargetingPredicatePlugin"),b("AdsICNotNullContextualTargetingPredicatePlugin"),b("AdsICNullContextualTargetingPredicatePlugin")]},function(){});e.exports=a}),null);
__d("AdsIntelligentComponentsClickMessageActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsIntelligentComponents.CLICK_MESSAGE"}}),null);
__d("AdsIntelligentComponentsCloseMessageActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsIntelligentComponents.CLOSE_MESSAGE"}}),null);
__d("AdsIntelligentComponentsCompleteTourActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsIntelligentComponents.COMPLETE_TOUR"}}),null);
__d("AdsIntelligentComponentsMessagesLoadErrorActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsIntelligentComponents.LOAD_ERROR"}}),null);
__d("AdsIntelligentComponentsMessagesLoadedActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsIntelligentComponents.MESSAGES_LOADED"}}),null);
__d("AdsIntelligentComponentsMountActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsIntelligentComponents.MOUNT"}}),null);
__d("AdsIntelligentComponentsMountingBatchActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsIntelligentComponents.MOUNTING_BATCH"}}),null);
__d("AdsIntelligentComponentsResetMessagesCapActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsIntelligentComponents.RESET_MESSAGES_CAP"}}),null);
__d("AdsIntelligentComponentsTimerProviderPlugin",["immutable"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({timerCycle:0,timerOn:!1}));c={initialState:new a()};e.exports=c}),null);
__d("AdsIntelligentComponentsTimerProvider",["Laminar","AdsIntelligentComponentsTimerProviderPlugin"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsIntelligentComponentsTimerProviderPlugin"),"AdsIntelligentComponentsTimerProviderPlugin")}),null);
__d("AdsIntelligentComponentsTimerStopReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return a.set("timerOn",!1).update("timerCycle",function(a){return a+1})}};e.exports=a}),null);
__d("AdsIntelligentComponentsTimerStopAction",["Laminar","AdsIntelligentComponentsTimerStopReducerPlugin","AdsIntelligentComponentsTimerProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsIntelligentComponentsTimerStopReducerPlugin"),b("AdsIntelligentComponentsTimerProvider"),{})]},function(){return[]},"AdsIntelligentComponents.STOP_TIMER","reducers_only");e.exports=a}),null);
__d("AdsIntelligentComponentsTimerStartReducerPlugin",["AdsIntelligentComponentsTimerStopAction","gkx","requestIdleCallback","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=10;function h(a){b("gkx")("840141")?b("setTimeout")(a,g):b("requestIdleCallback")(function(){b("setTimeout")(a,g)})}a={reduce:function(a,c){if(a.get("timerOn"))return a;h(function(){return b("AdsIntelligentComponentsTimerStopAction").dispatch({},{line:"42",module:"AdsIntelligentComponentsTimerStartReducerPlugin.js"})});return a.set("timerOn",!0)}};e.exports=a}),null);
__d("AdsIntelligentComponentsTimerStartAction",["Laminar","AdsIntelligentComponentsTimerStartReducerPlugin","AdsIntelligentComponentsTimerProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsIntelligentComponentsTimerStartReducerPlugin"),b("AdsIntelligentComponentsTimerProvider"),{})]},function(){return[]},"AdsIntelligentComponents.START_TIMER","reducers_only");e.exports=a}),null);
__d("AdsIntelligentComponentsTourStepActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsIntelligentComponents.TOUR_STEP"}}),null);
__d("AdsIntelligentComponentsUnmountActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"AdsIntelligentComponents.UNMOUNT"}}),null);
__d("AdsVCCShowDialogDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"VCC.SHOW_DIALOG"}}),null);
__d("AdsICDebuggerContainer.react",["cx","React","Tooltip.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_6eft"},b("React").createElement(b("Tooltip.react"),{className:"_6efu",tooltip:this.props.tooltip},this.props.children))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("AdsIntelligentComponentsUtils",["AdsIntelligentComponentsPlacementEnum"],(function(a,b,c,d,e,f){"use strict";a={getTipParams:function(a){return{context:a,placement:b("AdsIntelligentComponentsPlacementEnum").AYMT_TIPS}},getFAQParams:function(a){return{context:a,placement:b("AdsIntelligentComponentsPlacementEnum").HELP_ARTICLES}},getSavedMessagesParams:function(a){return{context:a,placement:b("AdsIntelligentComponentsPlacementEnum").SAVED_MESSAGES_PANE}},convertContext:function(a){return JSON.stringify(a)}};e.exports=a}),null);
__d("XAdsInProductGuidanceAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ads/advertiser_guidance/server_msg/",{context:{type:"String",required:!0},placement:{type:"String"},inject_tip:{type:"String"},enable_stages:{type:"StringSet"},enable_for_test_users:{type:"Bool",defaultValue:!1}})}),null);
__d("AdsIntelligentComponentsDataLoader",["Promise","AdsIntelligentComponentsUtils","AsyncRequest","URIInitDataUtil","XAdsCMTipQEAsyncController","XAdsInProductGuidanceAsyncController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){var c=b("AdsIntelligentComponentsUtils").convertContext(a.context),d=b("XAdsInProductGuidanceAsyncController").getURIBuilder().setString("context",c).setString("placement",a.placement).setString("inject_tip",b("URIInitDataUtil").getDefaultInjectTip()).setStringSet("enable_stages",b("URIInitDataUtil").getDefaultEnableStages()).getURI();return new(b("Promise"))(function(a,c){return new(b("AsyncRequest"))().setURI(d).setAllowCrossPageTransition(!0).setErrorHandler(function(a){return c(a.errorDescription)}).setHandler(function(b){a(b.payload)}).send()})};c=function(a,c){a=b("XAdsCMTipQEAsyncController").getURIBuilder().setString("tip_id",a).setString("channel_id",c).getURI();new(b("AsyncRequest"))().setURI(a).setAllowCrossPageTransition(!0).send()};d={loadMessages:a,logExposure:c};e.exports=d}),null);
__d("AdsIntelligentComponentsDataDispatcher",["AdsApplicationUtils","AdsIntelligentComponentsActions","AdsIntelligentComponentsDataLoader","URI","isDevelopersURI","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={loadMessages:function(a){if(b("AdsApplicationUtils").isFAME())return;if(b("isDevelopersURI")(b("URI").getRequestURI()))return;b("promiseDone")(b("AdsIntelligentComponentsDataLoader").loadMessages(a),function(c){b("AdsIntelligentComponentsActions").dispatchMessages(a,c)},function(c){b("AdsIntelligentComponentsActions").messagesLoadError(a,c)})}};e.exports=a}),null);
__d("AdsICMessage",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={id:"",visiblePlacements:b("immutable").Set(),isMounted:!1,isLoaded:!1,isClosed:!1,passValidateCondition:!0,isMatchingContext:!0,adObjectID:null,format:null,componentName:"",messageGroup:void 0,messageType:null,messageTypeID:null,aymtData:null,mustShow:!1,fbJoinerKey:null,score:1,experiments:{},qeState:!1};c=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getID=function(){return this.get("id")};c.getVisiblePlacements=function(){return this.get("visiblePlacements")};c.getIsVisibleForPlacement=function(a){return this.getVisiblePlacements().has(a)};c.getIsMounted=function(){return this.get("isMounted")};c.getIsLoaded=function(){return this.get("isLoaded")};c.getIsClosed=function(){return this.get("isClosed")};c.getPassValidateCondition=function(){return this.get("passValidateCondition")};c.getIsMatchingContext=function(){return this.get("isMatchingContext")};c.getAdObjectID=function(){return this.get("adObjectID")};c.getFormat=function(){return this.get("format")};c.getComponentName=function(){return this.get("componentName")};c.getMessageGroup=function(){return this.get("messageGroup")};c.getMessageType=function(){return this.get("messageType")};c.getMessageTypeID=function(){return this.get("messageTypeID")};c.getAYMTData=function(){return this.get("aymtData")};c.getMustShow=function(){return this.get("mustShow")};c.getFBJoinerKey=function(){return this.get("fbJoinerKey")};c.getScore=function(){return this.get("score")};c.getExperiments=function(){return this.get("experiments")};c.getQEState=function(){return this.get("qeState")};c.addVisiblePlacement=function(a){return this.setVisiblePlacements(this.getVisiblePlacements().add(a))};c.setVisiblePlacements=function(a){return this.set("visiblePlacements",a)};c.setIsMounted=function(a){return this.set("isMounted",a)};c.setIsLoaded=function(a){return this.set("isLoaded",a)};c.setIsClosed=function(a){return this.set("isClosed",a)};c.setPassValidateCondition=function(a){return this.set("passValidateCondition",a)};c.setIsMatchingContext=function(a){return this.set("isMatchingContext",a)};return b}(b("immutable").Record(a));e.exports=c}),null);
__d("AdsICMessagesMap",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={messagesMap:b("immutable").OrderedMap()};a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){b===void 0&&(b=g);return a.call(this,b)||this}var c=b.prototype;c.setMessage=function(a,b){return this.setMessagesMap(this.getMessagesMap().set(a,b))};c.addMessage=function(a){return this.setMessage(a.getID(),a)};c.removeMessage=function(a){return this.setMessagesMap(this.getMessagesMap()["delete"](a))};c.setMessagesMap=function(a){return this.set("messagesMap",a)};c.filter=function(a){return this.setMessagesMap(this.getMessagesMap().filter(a))};c.sortByScore=function(){return this.setMessagesMap(this.getMessagesMap().sortBy(function(a){return-a.getScore()}))};c.moveWhitelistedToFront=function(){return this.setMessagesMap(this.getMessagesMap().sortBy(function(a){return a.getMustShow()?-1:0}))};c.hasMessage=function(a){return this.getMessagesMap().has(a)};c.getMessage=function(a){return this.getMessagesMap().get(a)};c.getMessagesMap=function(){return this.get("messagesMap")};c.getAll=function(){return this.getMessagesMap()};c.getMessageIDs=function(){return this.getMessagesMap().keySeq().toArray()};return b}(b("immutable").Record(g));e.exports=a}),null);
__d("AdsICFilterByMessageFormat",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=new Set(a)}var b=a.prototype;b.getInvisibleReason=function(){return"InvalidDeliveryPlacement"};b.shouldHideMessageIfFailsRule=function(){return!0};b.filter=function(a,b){b=a.getFormat();return b!=null&&this.$1.has(b)};return a}();e.exports=a}),null);
__d("AdsICFilterIfDoesNotMatchContextualTargeting",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(){}var b=a.prototype;b.getInvisibleReason=function(){return"ClientContextualTargetingFailure"};b.shouldHideMessageIfFailsRule=function(){return!0};b.filter=function(a,b){return a.getIsMatchingContext()};return a}();e.exports=a}),null);
__d("AdsICFilterIfDoesNotPassValidateCondition",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(){}var b=a.prototype;b.getInvisibleReason=function(){return"ValidateConditionFailure"};b.shouldHideMessageIfFailsRule=function(){return!0};b.filter=function(a,b){return a.getPassValidateCondition()};return a}();e.exports=a}),null);
__d("AdsICFilterIfFailMessageHoldoutQE",["AdsInProductGuidanceConfigSitevar","AdsIntelligentComponentsMessageGroupEnum"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Set(b("AdsInProductGuidanceConfigSitevar").holdout_experiment_blacklist),h=new Set(b("AdsInProductGuidanceConfigSitevar").holdout_experiment_whitelist);a=function(){__p&&__p();function a(){}var c=a.prototype;c.getInvisibleReason=function(){return"MessageHoldoutQEFail:duplication-phase2"};c.shouldHideMessageIfFailsRule=function(){return!0};c.filter=function(a,c){__p&&__p();c=c.am_message_houldout_qe;if(c==null||a.getMessageGroup()!==b("AdsIntelligentComponentsMessageGroupEnum").DUPLICATION)return!0;if(!c.isDone()||!c.hasValue())return!1;var d=a.getID();c=c.getValueEnforcing();a=c.getParamBool("is_new")&&g.has(a.getID());h.has(d)&&c.maybeLogExposure();return!a};return a}();e.exports=a}),null);
__d("AdsICFilterIfFailsQE",["AdsIntelligentComponentsDataLoader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=new Set()}var c=a.prototype;c.getInvisibleReason=function(){return"QENotPassed"};c.shouldHideMessageIfFailsRule=function(){return!0};c.filter=function(a,c){c=a.getAYMTData();if(c&&!this.$1.has(a.getID())){var d=c.tip_id;c=c.channel_id;d!=null&&c!=null&&(this.$1.add(a.getID()),b("AdsIntelligentComponentsDataLoader").logExposure(d,c))}return a.getQEState()};return a}();e.exports=a}),null);
__d("AdsICFilterIfInContextualRecsExperiment",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="ads_cf_contextual_recommendation_entry";a=function(){function a(){}var b=a.prototype;b.getInvisibleReason=function(){return"ContextualRecsExperiment"};b.shouldHideMessageIfFailsRule=function(){return!0};b.filter=function(a,b){return b.cf_section!=null&&a.getID()!==g&&b.should_show_contextual_recommendation===!0?!1:!0};return a}();e.exports=a}),null);
__d("AdsICFilterIfNoLeftSpace",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a}var b=a.prototype;b.getInvisibleReason=function(){return"NoSpace"};b.shouldHideMessageIfFailsRule=function(){return!0};b.filter=function(a,b){return this.$1>0||a.getMustShow()};b.setAvailableCap=function(a){this.$1=a};return a}();e.exports=a}),null);
__d("AdsICFilterIfPreviouslyClosed",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(){}var b=a.prototype;b.getInvisibleReason=function(){return"MessageClosed"};b.shouldHideMessageIfFailsRule=function(){return!0};b.filter=function(a,b){return!a.getIsClosed()};return a}();e.exports=a}),null);
__d("AdsICFilterIfUnloaded",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(){}var b=a.prototype;b.getInvisibleReason=function(){return"MessageNotFromServer"};b.shouldHideMessageIfFailsRule=function(){return!0};b.filter=function(a,b){return a.getIsLoaded()};return a}();e.exports=a}),null);
__d("AdsICFilterIfUnmounted",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(){}var b=a.prototype;b.getInvisibleReason=function(){return"NotMounted"};b.shouldHideMessageIfFailsRule=function(){return!0};b.filter=function(a,b){return a.getIsMounted()};return a}();e.exports=a}),null);
__d("AdsICPassIfAlreadyVisible",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a}var b=a.prototype;b.getInvisibleReason=function(){return null};b.shouldHideMessageIfFailsRule=function(){return!1};b.filter=function(a,b){b=a.getVisiblePlacements().has(this.$1);return!b};return a}();e.exports=a}),null);
__d("AdsICPlacement",["AdsICFilterIfFailsQE","AHGLogUtils","AYMTClientSideLogging","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c,d){d===void 0&&(d=[]),this.$1=a,this.$2=c,this.__visibleMessages=b("immutable").OrderedSet(),this.__visibleMessagesInMessageGroups=b("immutable").Map().withMutations(function(a){d.forEach(function(c){return a.set(c,b("immutable").OrderedSet())})}),this.__experimentHideMessages=b("immutable").OrderedSet(),this.$4=new Map(),this.$3=new(b("AdsICFilterIfFailsQE"))()}var c=a.prototype;c.getName=function(){return this.$1};c.__deleteVisibleMessage=function(a,b){this.__visibleMessages=this.__visibleMessages["delete"](a),b!=null&&(this.__visibleMessagesInMessageGroups=this.__visibleMessagesInMessageGroups.set(b,this.__visibleMessagesInMessageGroups.get(b)["delete"](a)))};c.__addVisibleMessage=function(a){var b=a.getID();this.__visibleMessages=this.__visibleMessages.add(b);a=a.getMessageGroup();a!=null&&(this.__visibleMessagesInMessageGroups=this.__visibleMessagesInMessageGroups.set(a,this.__visibleMessagesInMessageGroups.get(a).add(b)))};c.__hideUnknownMessages=function(a){var b=this,c=this.__visibleMessages.subtract(a.getMessageIDs());c.forEach(function(c){var d,e=a.getMessage(c);e&&(d=e.getMessageGroup());b.__deleteVisibleMessage(c,d)})};c.updateVisibleMessages=function(a,b,c){c===void 0&&(c=!0);this.__hideUnknownMessages(a);a=this.__applyAllRules(a,b);a=a.sortByScore();this.__customLogicForShowingMessage(a,b,c);return this.__visibleMessages.subtract(this.__experimentHideMessages)};c.getInvisibleReason=function(a){return this.$4.get(a)};c.__customLogicForShowingMessage=function(a,b,c){var d=this;a.getAll().forEach(function(a){d.__checkQEAndShowMessage(a,b,c)})};c.__applyAllRules=function(a,b){__p&&__p();var c=this,d,e=a;this.$2.forEach(function(a){d=e.filter(function(c){return a.filter(c,b)});e.getAll().forEach(function(b){d.hasMessage(b.getID())||c.__updateInvalidMessage(a,b)});e=d;if(d.getAll().isEmpty())return});return e};c.__updateInvalidMessage=function(a,b){var c=a.getInvisibleReason();c!=null&&c!==""&&this.$4.set(b.getID(),c);a.shouldHideMessageIfFailsRule()&&this.$5(b)};c.__checkQEAndShowMessage=function(a,b,c){if(!this.$3.filter(a,b)){this.__updateInvalidMessage(this.$3,a);return}if(!c)return;this.$4["delete"](a.getID());this.__showMessage(a)};c.__showMessage=function(a){if(this.__visibleMessages.has(a.getID()))return!1;a.aymtData&&(b("AYMTClientSideLogging").logImpressionNew(a.aymtData),b("AHGLogUtils").logImpression(a.getAdObjectID(),a.getFormat(),a.getComponentName(),a.getID(),a.getFBJoinerKey(),this.getName(),a.getMessageGroup(),a.getMessageType(),a.getMessageTypeID(),a.getScore(),a.getExperiments()));a.getExperiments().performance_lift_experiment===0&&(this.__experimentHideMessages=this.__experimentHideMessages.add(a.getID()));this.__addVisibleMessage(a);return!0};c.$5=function(a){this.__visibleMessages.has(a.getID())&&(b("AHGLogUtils").logCloseMessage(a.getFormat(),a.getID(),this.getName(),a.getMessageGroup()),this.__deleteVisibleMessage(a.getID()))};return a}();e.exports=a}),null);
__d("AdsICPlacementWithCap",["AdsICFilterIfNoLeftSpace","AdsICPlacement","AHGLogUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e,f){__p&&__p();f===void 0&&(f=b("immutable").Map());c=a.call(this,c,d,Array.from(f.keys()))||this;c.$AdsICPlacementWithCap1=e;c.$AdsICPlacementWithCap2=e;c.$AdsICPlacementWithCap3=new(b("AdsICFilterIfNoLeftSpace"))(c.$AdsICPlacementWithCap2);c.$AdsICPlacementWithCap4=f;c.$AdsICPlacementWithCap5=f;c.$AdsICPlacementWithCap6=f.map(function(a){return new(b("AdsICFilterIfNoLeftSpace"))(a)});return c}var d=c.prototype;d.getAvailableCap=function(){return this.$AdsICPlacementWithCap2};d.resetCap=function(){var a=this,c=this.$AdsICPlacementWithCap1,d=this.__visibleMessages.size;this.$AdsICPlacementWithCap2=c-d;this.$AdsICPlacementWithCap5=this.$AdsICPlacementWithCap4.map(function(b,c){c=a.__visibleMessagesInMessageGroups.get(c).size;return b-c});b("AHGLogUtils").logResetCap(this.getName(),this.$AdsICPlacementWithCap2)};d.__customLogicForShowingMessage=function(a,b,c){a=a.moveWhitelistedToFront();this.$AdsICPlacementWithCap7(a,b,c);this.$AdsICPlacementWithCap8(a)};d.__showMessage=function(b){var c=a.prototype.__showMessage.call(this,b);if(c){this.$AdsICPlacementWithCap2=Math.max(0,this.$AdsICPlacementWithCap2-1);b=b.getMessageGroup();b!=null&&(this.$AdsICPlacementWithCap5=this.$AdsICPlacementWithCap5.set(b,Math.max(0,this.$AdsICPlacementWithCap5.get(b)-1)))}return c};d.$AdsICPlacementWithCap7=function(a,b,c){var d=this;a.getAll().forEach(function(a){var e=a.getMessageGroup(),f=null;e!=null&&(f=d.$AdsICPlacementWithCap6.get(e),f.setAvailableCap(d.$AdsICPlacementWithCap5.get(e)));d.$AdsICPlacementWithCap3.setAvailableCap(d.$AdsICPlacementWithCap2);e=f==null||f.filter(a,b);var g=d.$AdsICPlacementWithCap3.filter(a,b);e&&g?d.__checkQEAndShowMessage(a,b,c):f!=null&&!e?d.__updateInvalidMessage(f,a):d.__updateInvalidMessage(d.$AdsICPlacementWithCap3,a)})};d.$AdsICPlacementWithCap8=function(a){var c=a.getAll();if(c.size==0||this.__visibleMessages.size==0)return;this.__visibleMessages.forEach(function(a){b("AHGLogUtils").logEligibleMessages(c,a)})};return c}(b("AdsICPlacement"));e.exports=a}),null);
__d("AdsICGenericPlacementBasedOnFormatWithCap",["AdsICFilterByMessageFormat","AdsICFilterIfDoesNotMatchContextualTargeting","AdsICFilterIfDoesNotPassValidateCondition","AdsICFilterIfFailMessageHoldoutQE","AdsICFilterIfInContextualRecsExperiment","AdsICFilterIfPreviouslyClosed","AdsICFilterIfUnloaded","AdsICFilterIfUnmounted","AdsICPassIfAlreadyVisible","AdsICPlacementWithCap","immutable"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e,f){f===void 0&&(f=b("immutable").Map());d=[new(b("AdsICFilterByMessageFormat"))(d),new(b("AdsICFilterIfUnmounted"))(),new(b("AdsICFilterIfPreviouslyClosed"))(),new(b("AdsICFilterIfDoesNotPassValidateCondition"))(),new(b("AdsICFilterIfDoesNotMatchContextualTargeting"))(),new(b("AdsICFilterIfInContextualRecsExperiment"))(),new(b("AdsICPassIfAlreadyVisible"))(c),new(b("AdsICFilterIfUnloaded"))(),new(b("AdsICFilterIfFailMessageHoldoutQE"))()];return a.call(this,c,d,e,f)||this}return c}(b("AdsICPlacementWithCap"));e.exports=a}),null);
__d("AdsICBadgesPlacement",["AdsICGenericPlacementBasedOnFormatWithCap","AdsInProductGuidanceConfigSitevar","AdsIntelligentComponentsMessageFormat","AdsIntelligentComponentsPlacementEnum"],(function(a,b,c,d,e,f){"use strict";a=[b("AdsIntelligentComponentsMessageFormat").NEW_BADGE];c=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsPlacementEnum").BADGES)||0;e.exports=new(b("AdsICGenericPlacementBasedOnFormatWithCap"))(b("AdsIntelligentComponentsPlacementEnum").BADGES,a,c)}),null);
__d("AdsICBluesCluesPlacement",["AdsICGenericPlacementBasedOnFormatWithCap","AdsInProductGuidanceConfigSitevar","AdsIntelligentComponentsMessageFormat","AdsIntelligentComponentsPlacementEnum"],(function(a,b,c,d,e,f){"use strict";a=[b("AdsIntelligentComponentsMessageFormat").BLUE_TIP,b("AdsIntelligentComponentsMessageFormat").BLUE_TOUR];c=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsPlacementEnum").BLUES_CLUES)||0;e.exports=new(b("AdsICGenericPlacementBasedOnFormatWithCap"))(b("AdsIntelligentComponentsPlacementEnum").BLUES_CLUES,a,c)}),null);
__d("AdsICInFlowPlacement",["AdsICGenericPlacementBasedOnFormatWithCap","AdsInProductGuidanceConfigSitevar","AdsIntelligentComponentsMessageFormat","AdsIntelligentComponentsMessageGroupEnum","AdsIntelligentComponentsPlacementEnum","immutable"],(function(a,b,c,d,e,f){"use strict";a=[b("AdsIntelligentComponentsMessageFormat").INLINE];c=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsPlacementEnum").IN_FLOW)||0;f=b("immutable").Map((d={},d[b("AdsIntelligentComponentsMessageGroupEnum").CREATION_AND_EDITING_L1]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").CREATION_AND_EDITING_L1)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").CREATION_AND_EDITING_L2]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").CREATION_AND_EDITING_L2)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").CREATION_AUDIENCE]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").CREATION_AUDIENCE)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").CREATION_L2_SIDEBAR]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").CREATION_L2_SIDEBAR)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").CREATION_L3_HEADER]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").CREATION_L3_HEADER)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").DELIVERY_OPTIMIZATION]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").DELIVERY_OPTIMIZATION)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").DUPLICATION]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").DUPLICATION)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").EDITING_L3]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").EDITING_L3)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").IMPORT]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").IMPORT)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").INSIGHTS_TRAY]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").INSIGHTS_TRAY)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").NOT_IN_ADS_MANAGER]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").NOT_IN_ADS_MANAGER)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").OBJECTIVE]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").OBJECTIVE)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").PLACEMENT]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").PLACEMENT)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").PUBLISHING_RECEIPT]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").PUBLISHING_RECEIPT)||0,d[b("AdsIntelligentComponentsMessageGroupEnum").QUICK_CREATION]=b("AdsInProductGuidanceConfigSitevar").cap_per_type.get(b("AdsIntelligentComponentsMessageGroupEnum").QUICK_CREATION)||0,d));e.exports=new(b("AdsICGenericPlacementBasedOnFormatWithCap"))(b("AdsIntelligentComponentsPlacementEnum").IN_FLOW,a,c,f)}),null);
__d("AdsIntelligentComponentContextFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AD_ACCOUNT_ID:"ad_account_id",ADGROUP:"adgroup",AM_MESSAGE_HOLDOUT_QE:"am_message_houldout_qe",AUDIENCE_NETWORK_POSITIONS:"audience_network_positions",AUDIENCE_STRATEGY:"audience_strategy",BID_STRATEGY:"bid_strategy",BUSINESS_GOAL:"business_goal",BUYING_TYPE:"buying_type",CAMPAIGN:"campaign",CAMPAIGN_GROUP:"campaign_group",CATALOG_VERTICAL:"catalog_vertical",CF_SECTION:"cf_section",CREATE_DIALOG_OPEN:"create_dialog_open",CREATION_EXPERIENCE_MODE:"creation_experience_mode",CREATIVE:"creative",EDIT_TRAY_OPEN:"edit_tray_open",END_TIME:"end_time",FACEBOOK_POSITIONS:"facebook_positions",HAS_L3_BUDGET:"has_l3_budget",INSTAGRAM_POSITIONS:"instagram_positions",INSTREAM_ADS_CPV_UPSELL_EXP_CELL_TYPE:"instream_ads_cpv_upsell_exp_cell_type",MESSENGER_POSITIONS:"messenger_positions",OBJECT_ID:"object_id",OBJECT_STORY_SPEC:"object_story_spec",OBJECTIVE:"objective",OPTIMIZATION_GOAL:"optimization_goal",PAGE_ID:"page_id",PAGE_ID_SELECTED:"page_id_selected",PE_AUDIENCE_SPLITTING_OPEN:"pe_audience_splitting_open",PE_PANE:"pe_pane",PLACEMENTS_CYCLE:"placements_cycle",PROMOTED_OBJECT_TYPE:"promoted_object_type",RULE_DIALOG_OPEN:"rule_dialog_open",SHOULD_SHOW_CONTEXTUAL_RECOMMENDATION:"should_show_contextual_recommendation",START_TIME:"start_time",TAGS:"tags",TARGETING:"targeting",TOOL:"tool"})}),null);
__d("AdsIntelligentComponentsMessageContentStore",["AdsDataAtom","AdsIntelligentComponentsMessagesLoadedActionFlux","FluxMapStore","gkx","immutable","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("gkx")("779516");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__getActionTypes=function(){return g?[b("AdsIntelligentComponentsMessagesLoadedActionFlux").actionType]:null};d.reduce=function(a,c){__p&&__p();var d=this,e=c.action;switch(e.type){case b("AdsIntelligentComponentsMessagesLoadedActionFlux").actionType:return a.withMutations(function(a){var c=e.loadedData.messages;c.aymt_tips&&Object.keys(c.aymt_tips).forEach(function(b){return a.set(b,{aymt_tip:c.aymt_tips[b].metadata,fbjoiner_key:c.aymt_tips[b].fbjoiner_key,help_article:d.getHelpArticle(b),saved_message:d.getSavedMessage(b)})});c.help_articles&&Object.keys(c.help_articles).forEach(function(e){return a.set(e,{help_article:b("nullthrows")(c.help_articles)[e].metadata,saved_message:d.getSavedMessage(e),aymt_tip:d.getAYMTTip(e),fbjoiner_key:d.getFBJoinerKey(e)})});c.SAVED_MESSAGES_PANE&&Object.keys(c.SAVED_MESSAGES_PANE).forEach(function(e){return a.set(e,{saved_message:b("nullthrows")(c.SAVED_MESSAGES_PANE)[e].metadata,help_article:d.getHelpArticle(e),aymt_tip:d.getAYMTTip(e),fbjoiner_key:d.getFBJoinerKey(e)})})});default:return a}};d.getAYMTTip=function(a){a=this.get(a);return a?a.aymt_tip:null};d.getHelpArticle=function(a){a=this.get(a);return a?a.help_article:null};d.getSavedMessage=function(a){a=this.get(a);return a?a.saved_message:null};d.getFBJoinerKey=function(a){a=this.get(a);return a?a.fbjoiner_key:null};return c}(b("FluxMapStore"));a.__moduleID=e.id;e.exports=new a(b("AdsDataAtom"))}),null);
__d("AdsICTargetingSpecConditionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ALL_OF:"all_of",ANY_OF:"any_of"})}),null);
__d("AdsIntelligentComponentsTargeting",["AdsICContextualTargetingPredicatePlugins","AdsICTargetingSpecConditionType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getValueFromContextByFields:function(a,b){return!b.hasIn(a)?null:b.getIn(a)},isMessageMatchingContext:function(a,b){if(a==null)return!0;var c=a.contextual_targeting_spec,d=a.targeting_spec_condition_type,e=a.targeting_spec==null?0:a.version;a=e<2?null:a.targeting_spec;switch(e){case 2:return a==null?!0:h(b,a);case 0:case 1:default:return h(b,Object.freeze({condition_type:d,rules:c,rule_groups:[]}))}}};function h(a,c){switch(c.condition_type){case b("AdsICTargetingSpecConditionType").ANY_OF:return c.rules.some(function(b){return i(b,a)})||c.rule_groups.some(function(b){return h(a,b)});case b("AdsICTargetingSpecConditionType").ALL_OF:default:return c.rules.every(function(b){return i(b,a)})&&c.rule_groups.every(function(b){return h(a,b)})}}function i(a,c){c=g.getValueFromContextByFields(a.context_field,c);return b("AdsICContextualTargetingPredicatePlugins").get(a.predicate).matches(c,a.value)}e.exports=g}),null);
__d("AdsIntelligentComponentsDeliveryController",["AdsICBadgesPlacement","AdsICBluesCluesPlacement","AdsICInFlowPlacement","AdsICMessage","AdsICMessagesMap","AdsICPlacementWithCap","AdsIntelligentComponentContextFields","AdsIntelligentComponentsMessageContentStore","AdsIntelligentComponentsTargeting","AdsIntelligentComponentsTimerStartAction","immutable","requestIdleCallback","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("throttle")(function(a){b("requestIdleCallback")(a)});a=function(){__p&&__p();function a(){var a=this;this.$8=0;this.$1=b("immutable").Set([b("AdsICBluesCluesPlacement"),b("AdsICInFlowPlacement"),b("AdsICBadgesPlacement")]);this.$2=b("immutable").Map().withMutations(function(c){a.$1.forEach(function(a){return c.set(a.getName(),b("immutable").OrderedSet())})})}var c=a.prototype;c.canUpdateVisibleMessagesCheck=function(a,c){if(!a&&this.$8===c){g(function(){return b("AdsIntelligentComponentsTimerStartAction").dispatch({},{line:"99",module:"AdsIntelligentComponentsDeliveryController.js"})});return!1}this.$8=c;return!a};c.update=function(a,b,c,d,e,f){__p&&__p();var g=this;this.$7!=a&&(this.resetCap(),this.$7=a);this.$3=b;this.$4=c;this.$5=d;this.$6=e;var h=this.$9();this.$1.forEach(function(a){g.$2=g.$2.set(a.getName(),a.updateVisibleMessages(h,g.$6,f))});return this.$2};c.resetCap=function(){this.$1.forEach(function(a){a instanceof b("AdsICPlacementWithCap")&&a.resetCap()});return this};c.getMessageState=function(a){var c,d=this.$3.get(a);c=(c=this.$10())!=null?c[a]:c;var e=b("AdsIntelligentComponentsMessageContentStore").getAYMTTip(a);return!d&&!c&&!e?null:new(b("AdsICMessage"))({id:a,visiblePlacements:this.$11(a),isMounted:!!this.$3.has(a),isLoaded:!!c,isClosed:!!this.$4.has(a),passValidateCondition:!!(d&&d.validateCondition()),isMatchingContext:b("AdsIntelligentComponentsTargeting").isMessageMatchingContext(e&&e.ic_targeting_spec,this.$6),adObjectID:this.$6.get(b("AdsIntelligentComponentContextFields").OBJECT_ID),format:d&&d.messageFormat,componentName:d&&d.componentName,messageGroup:d&&d.messageGroup,messageType:c&&c.message_type,messageTypeID:c&&c.message_type_id,aymtData:e&&e.aymt_data,mustShow:c&&c.must_show,experiments:c&&c.experiments,fbJoinerKey:b("AdsIntelligentComponentsMessageContentStore").getFBJoinerKey(a),score:c&&c.score,qeState:c&&c.qe_state})};c.getInvisibleReason=function(a){var b;this.$1.forEach(function(c){c=c.getInvisibleReason(a);c!=null&&c!==""&&c!=="InvalidDeliveryPlacement"&&(b=c)});return b};c.$9=function(){var a=this,c=this.$2.reduce(function(a,b){return a.union(b)},b("immutable").Set(this.$3.keys())),d=new(b("AdsICMessagesMap"))();c.forEach(function(b){b=a.getMessageState(b);b&&(d=d.addMessage(b))});return d};c.$11=function(a){return this.$2.reduce(function(b,c,d){return c.has(a)?b.add(d):b},b("immutable").Set())};c.$10=function(){return this.$5?this.$5.messages&&this.$5.messages.aymt_tips:null};return a}();e.exports=new a()}),null);
__d("AdsIntelligentComponentServerContextTypes",["AdsIntelligentComponentContextFields","immutable"],(function(a,b,c,d,e,f){"use strict";c=b("immutable").Record((a={},a[b("AdsIntelligentComponentContextFields").OBJECTIVE]=null,a));f=b("immutable").Record((d={},d[b("AdsIntelligentComponentContextFields").CREATIVE]=null,d));d=b("immutable").Record((a={},a[b("AdsIntelligentComponentContextFields").AD_ACCOUNT_ID]=null,a[b("AdsIntelligentComponentContextFields").OBJECT_ID]=null,a[b("AdsIntelligentComponentContextFields").CAMPAIGN_GROUP]=c(),a[b("AdsIntelligentComponentContextFields").ADGROUP]=f(),a[b("AdsIntelligentComponentContextFields").CF_SECTION]=null,a[b("AdsIntelligentComponentContextFields").CREATE_DIALOG_OPEN]=!1,a[b("AdsIntelligentComponentContextFields").EDIT_TRAY_OPEN]=!1,a[b("AdsIntelligentComponentContextFields").PAGE_ID_SELECTED]=!1,a[b("AdsIntelligentComponentContextFields").PE_AUDIENCE_SPLITTING_OPEN]=!1,a[b("AdsIntelligentComponentContextFields").PE_PANE]=null,a[b("AdsIntelligentComponentContextFields").PLACEMENTS_CYCLE]=null,a[b("AdsIntelligentComponentContextFields").RULE_DIALOG_OPEN]=!1,a[b("AdsIntelligentComponentContextFields").TAGS]=null,a[b("AdsIntelligentComponentContextFields").TOOL]=null,a));e.exports={AdsAPICampaignGroupServerRecordFactory:c,AdsAPIAdgroupServerRecordFactory:f,AdsIntelligentComponentServerContextRecordFactory:d}}),null);
__d("AdsIntelligentComponentsServerMessagesStore",["AdsDataAtom","AdsIntelligentComponentsDataDispatcher","AdsIntelligentComponentServerContextTypes","AdsIntelligentComponentsMessageContentStore","AdsIntelligentComponentsMessagesLoadedActionFlux","AdsIntelligentComponentsMessagesLoadErrorActionFlux","AHGLogUtils","FluxLoadObjectStore","clearTimeout","gkx","immutable","requestIdleCallback","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsIntelligentComponentServerContextTypes").AdsIntelligentComponentServerContextRecordFactory,h=1e3,i=5,j=0,k=null;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.reduce=function(a,c){__p&&__p();var d=this,e=c.action;switch(e.type){case b("AdsIntelligentComponentsMessagesLoadedActionFlux").actionType:b("clearTimeout")(k);j=0;b("AdsDataAtom").waitFor([b("AdsIntelligentComponentsMessageContentStore").getDispatchToken()]);c=e.loadedData;c&&c.messages&&c.messages.aymt_tips&&b("AHGLogUtils").logAYMTTipsLoaded(Object.keys(c.messages.aymt_tips));return this.__handleOne(a,this.$AdsIntelligentComponentsServerMessagesStore1(e.params),c);case b("AdsIntelligentComponentsMessagesLoadErrorActionFlux").actionType:b("clearTimeout")(k);if(j<i){k=b("setTimeout")(function(){d.__load(d.$AdsIntelligentComponentsServerMessagesStore1(e.params))},Math.pow(2,j++)*h);return a}else return this.__handleOne(a,this.$AdsIntelligentComponentsServerMessagesStore1(e.params),e.error);default:return a}};d.__load=function(a){b("AdsIntelligentComponentsDataDispatcher").loadMessages(this.$AdsIntelligentComponentsServerMessagesStore2(a))};d.__queueLoadAll=function(c){var d=this;b("gkx")("840141")?a.prototype.__queueLoadAll.call(this,c):b("requestIdleCallback")(function(){a.prototype.__queueLoadAll.call(d,c)})};d.getMessages=function(a){a=this.get(this.$AdsIntelligentComponentsServerMessagesStore1(a));return a.getValue()};d.$AdsIntelligentComponentsServerMessagesStore1=function(a){var b=Object.assign({},a);a.context&&(b.context=a.context.toJSON());return JSON.stringify(b)};d.$AdsIntelligentComponentsServerMessagesStore2=function(a){a=JSON.parse(a);a.context&&(a.context=g(a.context));return a};return c}(b("FluxLoadObjectStore"));a.__moduleID=e.id;e.exports=new a(b("AdsDataAtom"))}),null);
__d("AdsICDeliveryDebuggerUtils",["AdsICDebuggerContainer.react","Bootloader","React","emptyFunction","gkx","requireWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("requireWeak")("AdsICDeliveryDebugger",function(a){return g=a});a=function(){__p&&__p();function a(){this.$1=!1,this.$2=!1,this.$1=!1,this.$2=!1}var c=a.prototype;c.isDebugModeOn=function(){return this.$1};c.isVerboseDebugModeOn=function(){return this.$1&&this.$2};c.setVerboseMode=function(a){a===void 0&&(a=!0),this.$2=a};c.getDebuggerInfoForMessage=function(a){var b="[IC Debugger - "+a+"]";if(g){var c=g.getMessageState(a);if(c)for(var d in c)d!=="id"&&(b+=" - "+d+": "+JSON.stringify(c[d]));b+=" - invisibleReason: "+g.getInvisibleReasonForMessage(a)}return b};c.wrapInDebugContainer=function(a,c){return b("React").createElement(b("AdsICDebuggerContainer.react"),{tooltip:this.getDebuggerInfoForMessage(a)},c)};return a}();e.exports=new a()}),null);
__d("AdsIntelligentComponentsStore",["AdsCFNavigationWizardPageShownDataActionFlux","AdsCMPageChangeActionFlux","AdsDataAtom","AdsICDeliveryDebuggerUtils","AdsInProductGuidanceConfigSitevar","AdsIntelligentComponentsActions","AdsIntelligentComponentsClickMessageActionFlux","AdsIntelligentComponentsCloseMessageActionFlux","AdsIntelligentComponentsCompleteTourActionFlux","AdsIntelligentComponentsDeliveryController","AdsIntelligentComponentsMessageContentStore","AdsIntelligentComponentsMountActionFlux","AdsIntelligentComponentsMountingBatchActionFlux","AdsIntelligentComponentsResetMessagesCapActionFlux","AdsIntelligentComponentsTourStepActionFlux","AdsIntelligentComponentsUnmountActionFlux","AdsInterfacesRouteUpdateParamsDataActionFlux","AdsVCCShowDialogDataActionFlux","AHGLogUtils","AYMTClientSideLogging","FBLogger","FluxReduceStore","immutable","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsCFNavigationWizardPageShownDataActionFlux"),h=100,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record({mountedContainers:b("immutable").Map(),closedMessages:b("immutable").Set(),resetCapCycle:0}));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("AdsDataAtom"))||this;b("AHGLogUtils").logInitStore(JSON.stringify(b("AdsInProductGuidanceConfigSitevar")));return c}var d=c.prototype;d.getInitialState=function(){return new i()};d.__getActionTypes=function(){return[b("AdsCFNavigationWizardPageShownDataActionFlux").actionType,b("AdsCMPageChangeActionFlux").actionType,b("AdsIntelligentComponentsClickMessageActionFlux").actionType,b("AdsIntelligentComponentsCloseMessageActionFlux").actionType,b("AdsIntelligentComponentsCompleteTourActionFlux").actionType,b("AdsIntelligentComponentsMountActionFlux").actionType,b("AdsIntelligentComponentsMountingBatchActionFlux").actionType,b("AdsIntelligentComponentsResetMessagesCapActionFlux").actionType,b("AdsIntelligentComponentsTourStepActionFlux").actionType,b("AdsIntelligentComponentsUnmountActionFlux").actionType,b("AdsInterfacesRouteUpdateParamsDataActionFlux").actionType,b("AdsVCCShowDialogDataActionFlux").actionType,g.actionType]};d.$AdsIntelligentComponentsStore1=function(a,b){return a.set("closedMessages",a.get("closedMessages").add(b))};d.$AdsIntelligentComponentsStore2=function(a,c,d,e,f,g){var h=a.get("mountedContainers");h.has(c)||(h=h.set(c,{messageFormat:d,componentName:e,messageGroup:f,validateCondition:g}),b("AHGLogUtils").logMountContainer(d,e,c));return a.set("mountedContainers",h)};d.$AdsIntelligentComponentsStore3=function(a,c){var d=a.get("mountedContainers");d.has(c)&&(b("AHGLogUtils").logUnmountContainer(d.get(c).messageFormat,d.get(c).componentName,c,b("AdsIntelligentComponentsDeliveryController").getInvisibleReason(c),d.get(c).messageGroup),d=d.remove(c),a=a.set("mountedContainers",d));return a};d.$AdsIntelligentComponentsStore4=function(a,c,d,e){e===void 0&&(e=[]);a=b("AdsIntelligentComponentsMessageContentStore").getAYMTTip(a);if(!a){b("FBLogger")("ads").warn(c);return!0}a&&a.aymt_data&&d.apply(void 0,[a.aymt_data].concat(e));return!1};d.reduce=function(a,c){__p&&__p();c=c.action;b("AdsICDeliveryDebuggerUtils").isVerboseDebugModeOn()&&c.type.startsWith("AdsIntelligentComponents");switch(c.type){case b("AdsIntelligentComponentsResetMessagesCapActionFlux").actionType:return a.update("resetCapCycle",function(a){return a+1});case b("AdsInterfacesRouteUpdateParamsDataActionFlux").actionType:var d=c.data.isNavigation;d&&b("setTimeout")(function(){return b("AdsIntelligentComponentsActions").resetMessagesCap()},h);return a;case b("AdsCFNavigationWizardPageShownDataActionFlux").actionType:case b("AdsCMPageChangeActionFlux").actionType:b("setTimeout")(function(){return b("AdsIntelligentComponentsActions").resetMessagesCap()},h);return a;case b("AdsVCCShowDialogDataActionFlux").actionType:case g.actionType:b("setTimeout")(function(){return b("AdsIntelligentComponentsActions").resetMessagesCap()},h);return a;case b("AdsIntelligentComponentsMountActionFlux").actionType:d=c.messageID;var e=c.messageFormat,f=c.componentName,i=c.messageGroup,j=c.validateCondition;return this.$AdsIntelligentComponentsStore2(a,d,e,f,i,j);case b("AdsIntelligentComponentsUnmountActionFlux").actionType:d=c.messageID;return this.$AdsIntelligentComponentsStore3(a,d);case b("AdsIntelligentComponentsMountingBatchActionFlux").actionType:e=a;for(var f=0;f<c.changes.length;f++){i=c.changes[f];switch(i.type){case"mount":e=this.$AdsIntelligentComponentsStore2(e,i.messageID,i.messageFormat,i.componentName,i.messageGroup,i.validateCondition);break;case"unmount":e=this.$AdsIntelligentComponentsStore3(e,i.messageID);break}}return e;case b("AdsIntelligentComponentsClickMessageActionFlux").actionType:j=c.messageID;d=this.$AdsIntelligentComponentsStore4(j,"Failed to click message "+j+". It is not visible.",b("AYMTClientSideLogging").logClickNew);return d?a:c.shouldClose?this.$AdsIntelligentComponentsStore1(a,j):a;case b("AdsIntelligentComponentsCloseMessageActionFlux").actionType:i=c.messageID;f=this.$AdsIntelligentComponentsStore4(i,"Failed to close message "+i+". It is not visible.",b("AYMTClientSideLogging").logXoutNew);if(f)return a;e=a.get("mountedContainers");b("AHGLogUtils").logXOut(e.get(i).messageFormat,e.get(i).componentName,i,b("AdsIntelligentComponentsMessageContentStore").getFBJoinerKey(i));return this.$AdsIntelligentComponentsStore1(a,i);case b("AdsIntelligentComponentsCompleteTourActionFlux").actionType:d=c.messageID;j=this.$AdsIntelligentComponentsStore4(d,"Failed to complete tour "+d+". It is not visible.",b("AYMTClientSideLogging").logTourCompleteNew);return j?a:this.$AdsIntelligentComponentsStore1(a,d);case b("AdsIntelligentComponentsTourStepActionFlux").actionType:f=c.messageID;e=c.step;this.$AdsIntelligentComponentsStore4(f,"Failed to step tour "+f+". It is not visible.",b("AYMTClientSideLogging").logTourStepImpressionNew,e);return a;default:return a}};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("AdsIntelligentComponentContextTypes",["AdsIntelligentComponentContextFields","immutable"],(function(a,b,c,d,e,f){"use strict";c=b("immutable").Record((a={},a[b("AdsIntelligentComponentContextFields").AD_ACCOUNT_ID]=null,a[b("AdsIntelligentComponentContextFields").OBJECT_ID]=null,a[b("AdsIntelligentComponentContextFields").CAMPAIGN_GROUP]=null,a[b("AdsIntelligentComponentContextFields").CAMPAIGN]=null,a[b("AdsIntelligentComponentContextFields").ADGROUP]=null,a[b("AdsIntelligentComponentContextFields").CF_SECTION]=null,a[b("AdsIntelligentComponentContextFields").CREATE_DIALOG_OPEN]=!1,a[b("AdsIntelligentComponentContextFields").EDIT_TRAY_OPEN]=!1,a[b("AdsIntelligentComponentContextFields").PAGE_ID_SELECTED]=!1,a[b("AdsIntelligentComponentContextFields").PE_AUDIENCE_SPLITTING_OPEN]=!1,a[b("AdsIntelligentComponentContextFields").PE_PANE]=null,a[b("AdsIntelligentComponentContextFields").PLACEMENTS_CYCLE]=null,a[b("AdsIntelligentComponentContextFields").RULE_DIALOG_OPEN]=!1,a[b("AdsIntelligentComponentContextFields").TAGS]=null,a[b("AdsIntelligentComponentContextFields").TOOL]=null,a[b("AdsIntelligentComponentContextFields").CATALOG_VERTICAL]=null,a[b("AdsIntelligentComponentContextFields").INSTREAM_ADS_CPV_UPSELL_EXP_CELL_TYPE]=null,a[b("AdsIntelligentComponentContextFields").PROMOTED_OBJECT_TYPE]=null,a[b("AdsIntelligentComponentContextFields").CREATION_EXPERIENCE_MODE]=null,a[b("AdsIntelligentComponentContextFields").HAS_L3_BUDGET]=!1,a[b("AdsIntelligentComponentContextFields").AM_MESSAGE_HOLDOUT_QE]=null,a[b("AdsIntelligentComponentContextFields").SHOULD_SHOW_CONTEXTUAL_RECOMMENDATION]=!1,a));e.exports={AdsIntelligentComponentContextRecordFactory:c}}),null);
__d("AdsSelectorBootloadedStore",["AdsBaseBootloadedStore","AdsDataAtom"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.onLoadedSelector=function(a){return this.__onLoadedModule(function(a){return a()},a)};d.loadSelectorPostDispatch=function(a){this.__loadModulePostDispatch(a)};d.__reduce=function(a){a.action;a=this.__getModule().getValueEnforcing();b("AdsDataAtom").waitFor(a.getStores().map(function(a){return a.getDispatchToken()}));a.getStores().some(function(a){return a.hasChanged()})&&this.__emitChange()};c.create=function(a){var b=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(c);b.__moduleID=a.getModuleId();return new b(a)};return c}(b("AdsBaseBootloadedStore"));e.exports=a}),null);
__d("adsIntelligentComponentContextBootloadedSelector",["AdsApplicationIDs","AdsIntelligentComponentContextTypes","AdsSelectorBootloadedStore","JSResource","WebApiApplication","adsCreateStoreSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=b("AdsIntelligentComponentContextTypes").AdsIntelligentComponentContextRecordFactory;var g=b("WebApiApplication").getClientID();function a(){switch(g){case b("AdsApplicationIDs").ADS_POWER_EDITOR:return b("AdsSelectorBootloadedStore").create(b("JSResource")("adsIntelligentComponentContextSelector").__setRef("adsIntelligentComponentContextBootloadedSelector"));case b("AdsApplicationIDs").ADS_CAMPAIGN_MANAGER:return b("AdsSelectorBootloadedStore").create(b("JSResource")("adsCMIntelligentComponentContextSelector").__setRef("adsIntelligentComponentContextBootloadedSelector"));case b("AdsApplicationIDs").ADS_CREATIVE_STUDIO:return b("AdsSelectorBootloadedStore").create(b("JSResource")("adsCrStIntelligentComponentContextSelector").__setRef("adsIntelligentComponentContextBootloadedSelector"));case b("AdsApplicationIDs").BUSINESS_ACCOUNTS:return b("AdsSelectorBootloadedStore").create(b("JSResource")("adsEMIntelligentComponentContextSelector").__setRef("adsIntelligentComponentContextBootloadedSelector"));default:return b("AdsSelectorBootloadedStore").create(b("JSResource")("adsDefaultIntelligentComponentContextSelector").__setRef("adsIntelligentComponentContextBootloadedSelector"))}}var h=c(),i=a();d=b("adsCreateStoreSelector")([i],function(){return i.onLoadedSelector(h)},e.id+".adsIntelligentComponentContextBootloadedSelector");e.exports=d}),null);
__d("adsIntelligentComponentServerContextSelector",["AdsIntelligentComponentContextFields","AdsIntelligentComponentServerContextTypes","adsCreateSelector","adsIntelligentComponentContextBootloadedSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsIntelligentComponentServerContextTypes").AdsAPIAdgroupServerRecordFactory,h=b("AdsIntelligentComponentServerContextTypes").AdsAPICampaignGroupServerRecordFactory,i=b("AdsIntelligentComponentServerContextTypes").AdsIntelligentComponentServerContextRecordFactory;a=b("adsCreateSelector")([b("adsIntelligentComponentContextBootloadedSelector")],function(a){var c={};a[b("AdsIntelligentComponentContextFields").CAMPAIGN_GROUP]!=null&&(c[b("AdsIntelligentComponentContextFields").OBJECTIVE]=a[b("AdsIntelligentComponentContextFields").CAMPAIGN_GROUP][b("AdsIntelligentComponentContextFields").OBJECTIVE]);var d={},e=a[b("AdsIntelligentComponentContextFields").ADGROUP];e!=null&&e[0]&&(d[b("AdsIntelligentComponentContextFields").CREATIVE]=e[0][b("AdsIntelligentComponentContextFields").CREATIVE]);c=(e={},e[b("AdsIntelligentComponentContextFields").AD_ACCOUNT_ID]=a[b("AdsIntelligentComponentContextFields").AD_ACCOUNT_ID],e[b("AdsIntelligentComponentContextFields").OBJECT_ID]=a[b("AdsIntelligentComponentContextFields").OBJECT_ID],e[b("AdsIntelligentComponentContextFields").CAMPAIGN_GROUP]=h(c),e[b("AdsIntelligentComponentContextFields").ADGROUP]=g(d),e[b("AdsIntelligentComponentContextFields").CF_SECTION]=a[b("AdsIntelligentComponentContextFields").CF_SECTION],e[b("AdsIntelligentComponentContextFields").CREATE_DIALOG_OPEN]=a[b("AdsIntelligentComponentContextFields").CREATE_DIALOG_OPEN],e[b("AdsIntelligentComponentContextFields").EDIT_TRAY_OPEN]=a[b("AdsIntelligentComponentContextFields").EDIT_TRAY_OPEN],e[b("AdsIntelligentComponentContextFields").PAGE_ID_SELECTED]=a[b("AdsIntelligentComponentContextFields").PAGE_ID_SELECTED],e[b("AdsIntelligentComponentContextFields").PE_AUDIENCE_SPLITTING_OPEN]=a[b("AdsIntelligentComponentContextFields").PE_AUDIENCE_SPLITTING_OPEN],e[b("AdsIntelligentComponentContextFields").PE_PANE]=a[b("AdsIntelligentComponentContextFields").PE_PANE],e[b("AdsIntelligentComponentContextFields").PLACEMENTS_CYCLE]=a[b("AdsIntelligentComponentContextFields").PLACEMENTS_CYCLE],e[b("AdsIntelligentComponentContextFields").RULE_DIALOG_OPEN]=a[b("AdsIntelligentComponentContextFields").RULE_DIALOG_OPEN],e[b("AdsIntelligentComponentContextFields").TAGS]=a[b("AdsIntelligentComponentContextFields").TAGS],e[b("AdsIntelligentComponentContextFields").TOOL]=a[b("AdsIntelligentComponentContextFields").TOOL],e);return i(c)},{name:e.id});e.exports=a}),null);
__d("adsIntelligentComponentsSelector",["AdsIntelligentComponentsDeliveryController","AdsIntelligentComponentsPlacementEnum","AdsIntelligentComponentsServerMessagesStore","AdsIntelligentComponentsStore","AdsIntelligentComponentsTimerProvider","AdsIntelligentComponentsUtils","adsCreateSelector","adsCreateStoreSelector","adsIntelligentComponentContextBootloadedSelector","adsIntelligentComponentServerContextSelector","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsIntelligentComponentsTimerProvider").toFluxStore();a=b("adsCreateStoreSelector")([b("AdsIntelligentComponentsStore")],function(){return b("AdsIntelligentComponentsStore").getState()},e.id+".icStoreSelector");var h=b("adsCreateStoreSelector")([b("AdsIntelligentComponentsServerMessagesStore")],function(){return b("AdsIntelligentComponentsServerMessagesStore").getState()},e.id+".serverMsgsStoreSelector");c=b("adsCreateSelector")([h,b("adsIntelligentComponentServerContextSelector")],function(a,c){return b("AdsIntelligentComponentsServerMessagesStore").getMessages(b("AdsIntelligentComponentsUtils").getTipParams(c))},{name:e.id+".currentServerMsgsSelector"});d=b("adsCreateStoreSelector")([g],function(){return g.getState()},e.id+".timerStoreSelector");var i=b("adsCreateSelector")([a,c,b("adsIntelligentComponentContextBootloadedSelector"),d],function(a,c,d,e){e=b("AdsIntelligentComponentsDeliveryController").canUpdateVisibleMessagesCheck(e.get("timerOn"),e.get("timerCycle"));return b("AdsIntelligentComponentsDeliveryController").update(a.get("resetCapCycle"),a.get("mountedContainers"),a.get("closedMessages"),c,d,e)},{name:e.id+".visibleMessagesSelector"});f=function(a,b){b=j(b);return!b?!1:b.has(a)};f.getStores=function(){return[].concat(j.getStores())};var j=function(a){__p&&__p();if(a===b("AdsIntelligentComponentsPlacementEnum").HELP_ARTICLES){var c=b("AdsIntelligentComponentsUtils").getFAQParams(b("adsIntelligentComponentServerContextSelector")());c=b("AdsIntelligentComponentsServerMessagesStore").getMessages(c);if(c!=null&&c.messages!=null&&c.messages.help_articles!=null)return b("immutable").OrderedSet(Object.keys(c.messages.help_articles))}else if(a===b("AdsIntelligentComponentsPlacementEnum").SAVED_MESSAGES_PANE){c=b("AdsIntelligentComponentsUtils").getSavedMessagesParams(b("adsIntelligentComponentServerContextSelector")());c=b("AdsIntelligentComponentsServerMessagesStore").getMessages(c);if(c!=null&&c.messages!=null&&c.messages.SAVED_MESSAGES_PANE!=null)return b("immutable").OrderedSet(Object.keys(c.messages.SAVED_MESSAGES_PANE))}else if(a===b("AdsIntelligentComponentsPlacementEnum").BLUES_CLUES||a===b("AdsIntelligentComponentsPlacementEnum").IN_FLOW||a===b("AdsIntelligentComponentsPlacementEnum").BADGES)return i().get(a);return null};j.getStores=function(){return[].concat(b("adsIntelligentComponentServerContextSelector").getStores(),h.getStores(),i.getStores())};e.exports={isVisible:f,currentList:j}}),null);
__d("ChatTabViewEvents",["Arbiter"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("Arbiter"))()}),null);
__d("PageTimelineChainingTypeConstants",[],(function(a,b,c,d,e,f){e.exports={FANNING:"fanning",FOLLOW:"follow",SHOW_FOLLOW:"show_follow"}}),null);
__d("PagesTimelineChaining",["Arbiter","Banzai","ChatTabViewEvents","CSS","Event","PageLikeConstants","PagesFollowStore","PageTimelineChainingTypeConstants","Run","Style","SubscriptionsHandler","UIPagelet"],(function(a,b,c,d,e,f){__p&&__p();var g=0;a={_recentlyLikedPageIDs:{},_recentlyMessagedPageIDs:{},container:null,_subscriptions:[],_chatSubscriptions:[],_followSubscription:null,_isFollow:!1,_shouldShowRelatedPagesOnBounce:!1,init:function(a,c){__p&&__p();var d=this;this.container=a;this._followSubscription=new(b("SubscriptionsHandler"))();this._isFollow=c.isFollow;this._shouldShowRelatedPagesOnBounce=c.shouldShowRelatedPagesOnBounce;b("Run").onLeave(function(){return d._unsubscribe()});this._showChainSuggestions(c.pageID,!1)||(this._subscriptions=[b("Arbiter").subscribe(b("PageLikeConstants").LIKED,this.onLike.bind(this,c.pageID))],c.canFollow&&this._followSubscription.addSubscriptions(b("PagesFollowStore").addListener(function(){var a=b("PagesFollowStore").getState();if(!(c.pageID in a))return;a[c.pageID]&&!d._isFollow&&d._onFollow(c.pageID);d._isFollow=a[c.pageID]})),c.enableLikeCheckup&&this._subscriptions.push(b("Arbiter").subscribe(b("PageLikeConstants").UNLIKED,this.onUnlike.bind(this))),c.onMessageEnabled&&this._chatSubscriptions.push(b("ChatTabViewEvents").subscribe("chat-send-to-page",this.onMessage.bind(this,c.pageID))),c.shouldShowRelatedPagesOnBounce&&window.addEventListener("scroll",this.onScroll.bind(this,c.pageID),!1))},onScroll:function(a){if(document.documentElement){var b=window.pageYOffset||document.documentElement.scrollTop;b<=g&&(this._showChainSuggestions(a,!0),this._unsubscribe());g=b}},onLike:function(a,b,c){c.profile_id===a&&c.target&&(this._recentlyLikedPageIDs[a]=!0,this._showChainSuggestions(a,!1),this._unsubscribe())},_onFollow:function(a){this._showChainFollowSuggestions(a),this._unsubscribe()},onMessage:function(a,b,c){c&&c.pageID===a&&(this._recentlyMessagedPageIDs[a]=!0,this._showMessageSuggestions(a),this._unsubscribe())},onUnlike:function(a,c){b("UIPagelet").loadFromEndpoint("PagesLikeCheckupPagelet",this.container,{},{displayCallback:this.displayCallback.bind(this)}),this._unsubscribe()},displayCallback:function(a){a&&a();a=this.container.firstChild;a&&b("Style").set(this.container,"height",a.offsetHeight+"px")},_showChainSuggestions:function(a,c){if(!(a in this._recentlyLikedPageIDs)&&!(this._shouldShowRelatedPagesOnBounce&&c))return!1;c=b("PageTimelineChainingTypeConstants").FANNING;b("UIPagelet").loadFromEndpoint("PagesTimelineChainingPagelet",this.container,{pageID:a,type:c},{displayCallback:this.displayCallback.bind(this)});return!0},_showChainFollowSuggestions:function(a){var c=b("PageTimelineChainingTypeConstants").FOLLOW;b("UIPagelet").loadFromEndpoint("PagesTimelineChainingPagelet",this.container,{pageID:a,type:c},{displayCallback:this.displayCallback.bind(this)});return!0},_showMessageSuggestions:function(a){if(!(a in this._recentlyMessagedPageIDs))return!1;b("UIPagelet").loadFromEndpoint("PagesMessageChainingPagelet",this.container,{pageID:a},{displayCallback:this.displayCallback.bind(this)});return!0},dismissCallback:function(a,c,d){b("CSS").hide(this.container);delete this._recentlyLikedPageIDs[c];this._unsubscribe();if(d==="friend_inviter_chaining"){a="pages_growth_general_analytical_logger";d={id:c,event:"dismiss_carousel",event_target:"friend_inviter_chaining",feature_name:"friend_inviter_chaining_investigate"};b("Banzai").post(a,d)}},attachDismissCallback:function(a,c,d,e){b("Event").listen(a,"click",this.dismissCallback.bind(this,c,d,e))},_unsubscribe:function(){this._subscriptions.length&&(this._subscriptions.forEach(function(a){return b("Arbiter").unsubscribe(a)}),this._subscriptions=[]),this._chatSubscriptions.length&&(this._chatSubscriptions.forEach(function(a){return b("ChatTabViewEvents").unsubscribe(a)}),this._chatSubscriptions=[]),this._followSubscription&&this._followSubscription.release()}};e.exports=a}),null);
__d("PagesManagerUserMessagePrompt",["ChatAppStore","ChatOpenTabEventLogger","ChatVisibility","FantaTabActions","MercuryIDs","MessengerDiscoveryEntryPoint","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=2e3,h={openTab:function(a,c,d){__p&&__p();c===void 0&&(c=b("MessengerDiscoveryEntryPoint").FB_PAGE_USER_MESSAGE_PROMPT);d===void 0&&(d=g);if(!b("ChatVisibility").isOnline())return;setTimeout(function(){if(b("ChatAppStore").getState().isInitialized)h._openTabAndLog(a,c);else var d=b("ChatAppStore").addListener(function(){b("ChatAppStore").getState().isInitialized&&(b("setImmediate")(function(){h._openTabAndLog(a,c)}),d.remove())})},d)},_openTabAndLog:function(a,c){var d=b("MercuryIDs").getThreadIDFromUserID(a);b("FantaTabActions").openTab(d,[c]);b("ChatOpenTabEventLogger").logUserAutoOpen(c,a);b("PagesLogger").log(a,b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").PAGE_MESSAGE_PROMPT,null,["pages_growth"],{})}};e.exports=h}),null);