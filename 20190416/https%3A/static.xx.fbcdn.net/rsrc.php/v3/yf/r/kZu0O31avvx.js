if (self.CavalryLogger) { CavalryLogger.start_js(["W2gSC"]); }

__d("MessengerSharePreviewStore",["FantaTypeSharePreview","MessengerActions","MessengerStore","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$MessengerSharePreviewStore1=b("immutable").Map({});return c}var d=c.prototype;d.getState=function(){return this.$MessengerSharePreviewStore1};d.__onDispatch=function(a){__p&&__p();var c=a.threadID;switch(a.type){case b("MessengerActions").Types.LINK_PREVIEW:var d=a.match;this.$MessengerSharePreviewStore1=this.$MessengerSharePreviewStore1.withMutations(function(a){a.get(c)||a.set(c,new(b("FantaTypeSharePreview"))());var e=a.get(c);a.set(c,e.merge({params:null,type:null,uri:d}))});this.emitChange();break;case b("MessengerActions").Types.LOADING_SHARE_DATA:this.$MessengerSharePreviewStore1=this.$MessengerSharePreviewStore1.withMutations(function(a){var b=a.get(c);if(!b)return;a.set(c,b.merge({isLoading:!0,params:null,type:null}))});this.emitChange();break;case b("MessengerActions").Types.LOADED_SHARE_DATA:a=a.attachmentData;var e=a.share_data;this.$MessengerSharePreviewStore1=this.$MessengerSharePreviewStore1.withMutations(function(a){var d=a.get(c);if(!d)return;a.set(c,d.merge({isLoading:!1,params:b("immutable").Map({data:e.share_params}),type:e.share_type}))});this.emitChange();break;case b("MessengerActions").Types.REMOVE_SHARE_PREVIEW:this.$MessengerSharePreviewStore1=this.$MessengerSharePreviewStore1.withMutations(function(a){a.get(c)&&a.set(c,new(b("FantaTypeSharePreview"))())});this.emitChange();break}};return c}(b("MessengerStore"));e.exports=new a()}),null);