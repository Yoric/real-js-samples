if (self.CavalryLogger) { CavalryLogger.start_js(["fHANF"]); }

__d("Keyframes",["Promise","Bootloader","NavigationMetrics","XHRRequest","emptyFunction","once","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="::",h="tti";b("NavigationMetrics").addRetroactiveListener(b("NavigationMetrics").Events.EVENT_OCCURRED,function(a,b){a=b.event;h=a});function i(){return new(b("Promise"))(function(a){b("Bootloader").loadModules(["KeyframesRenderer"],function(b){return a(b)},"Keyframes")})}function j(){return new(b("Promise"))(function(a){b("Bootloader").loadModules(["FBKeyframesLoggedSession"],function(b){return a(b)},"Keyframes")})}function k(){return new(b("Promise"))(function(a){b("Bootloader").loadModules(["KeyframesAssetDecoder"],function(b){return a(b)},"Keyframes")})}function l(){return b("Promise").all([j(),k(),i()]).then(b("emptyFunction"))}function m(a){return!a||typeof a!=="string"?b("Promise").reject("Request: invalid uri "+a):new(b("Promise"))(function(c,d){new(b("XHRRequest"))(a).setMethod("GET").setResponseType("arraybuffer").setErrorHandler(function(a){return d(a)}).setAbortHandler(function(a){return d(a)}).setResponseHandler(function(a){return c(a)}).send()})}var n=function(){__p&&__p();function a(c){var d=this;this.$3=function(){var c=a.timestamp();b("promiseDone")(d.$1,function(a){return a.error(c)})};this.$1=j().then(function(a){return new a(c)});this.$2=this.$1.then(function(a){return a.getPerformanceLogIfEnabled()})}a.timestamp=function(){return{value:Date.now(),phase:h}};var c=a.prototype;c.scheduleDecode=function(c,d){__p&&__p();var e=c.then(function(){return a.timestamp()}),f=c.then(function(){return d}).then(function(){return a.timestamp()}),g=d.then(function(a){return a&&a.pluginsLoader&&a.pluginsLoader.getPluginTable instanceof Function?a.pluginsLoader.getPluginTable():[]});c=b("Promise").all([this.$1,e]).then(function(a){var c=a[0];a=a[1];c=c.startDecode(a);return b("Promise").all([c,f,g])});b("promiseDone")(c,function(a){var b=a[0],c=a[1];a=a[2];return b(c,a)},this.$3)};c.markAsPackage=function(){b("promiseDone")(this.$1,function(a){return a.markAsPackage()})};c.maybeGetPerformanceLog=function(){return this.$2};return a}(),o=function(){__p&&__p();function a(a,c){__p&&__p();var d=this;this.$2=!1;a=b("Promise").all([m(a),k()]);this.$1=a.then(function(a){var c=a[0];a=a[1];return a.getDocumentByteSlicesFromPackage(c).then(function(a){return a.map(function(a,c){return b("once")(function(b){return new p(a,b)})})})});c=new n({projectName:c.projectName,assetName:c.packageName});c.markAsPackage();c.scheduleDecode(a,this.$1);b("promiseDone")(this.$1,function(){return d.$2=!0},function(){return d.$2=!0})}a.getSliceSession=function(a,b){return new n({projectName:a.projectName,assetName:a.packageName+g+b})};var c=a.prototype;c.isDone=function(){return this.$2};c.getAllAssets=function(c){return this.$1.then(function(d){return b("Promise").all(d.map(function(b,d){return b(a.getSliceSession(c,d)).getAsset()}))})};c.getRendererAtIndex=function(c,d){return this.$1.then(function(e){var f=a.getSliceSession(d,c);return e[c]?e[c](f).getRenderer(f):b("Promise").reject("Out of bounds index in package: "+c)})};return a}(),p=function(){__p&&__p();function a(a,c){__p&&__p();var d=this;this.$1=!1;a=b("Promise").all([typeof a==="string"?m(a):a,k()]);this.$2=a.then(function(a){var b=a[0];a=a[1];return a.fromDocumentBytes(b)});c.scheduleDecode(a,this.$2);b("promiseDone")(this.$2,function(){return d.$1=!0},function(){return d.$1=!0})}var c=a.prototype;c.isDone=function(){return this.$1};c.getAsset=function(){return this.$2};c.getRenderer=function(c){var a=i();return b("Promise").all([this.$2,a,c.maybeGetPerformanceLog()]).then(function(a){var b=a[0],c=a[1];a=a[2];return new c(b,a)})};return a}(),q={},r={};a={requestRenderer:function(a,b){b=new n(b);q[a]||(q[a]=new p(a,b));return q[a].getRenderer(b)},preload:function(a,c){if(!q[a]){c=new n(c);q[a]=new p(a,c)}c=l();a=q[a].getAsset();return b("Promise").all([c,a]).then(b("emptyFunction"))},requestRendererFromBytes:function(a,b){b=new n(b);return new p(a,b).getRenderer(b)},requestRendererFromPackage:function(a,b,c){r[a]||(r[a]=new o(a,c));return r[a].getRendererAtIndex(b,c)},preloadPackage:function(a,c){r[a]||(r[a]=new o(a,c));var d=l();a=r[a].getAllAssets(c);return b("Promise").all([d,a]).then(b("emptyFunction"))},hasLoaded:function(a){return!!(q[a]&&q[a].isDone()||r[a]&&r[a].isDone())},clearCache:function(){q={},r={}}};e.exports=a}),null);