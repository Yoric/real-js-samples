if (self.CavalryLogger) { CavalryLogger.start_js(["xwVDU"]); }

__d("FollowLink",["Arbiter","CSS","ge"],(function(a,b,c,d,e,f){__p&&__p();a={subscribeEvents:function(a,c,d){b("Arbiter").subscribe(["FollowUser","UnfollowUser"],function(e,f){if(f.profile_id!=a)return;f=b("ge")(c);var g=b("ge")(d);e=e=="FollowUser";f&&b("CSS").conditionShow(f,!e);g&&b("CSS").conditionShow(g,e)})}};e.exports=a}),null);
__d("PageLikeButtonLazy",["Arbiter","Bootloader","Event","PageLikeConstants","SubscriptionsHandler","ifRequired","setImmediate"],(function(a,b,c,d,e,f){__p&&__p();var g=new(b("SubscriptionsHandler"))(),h=[],i=!1,j=!1,k=b("PageLikeConstants").LIKED,l=b("PageLikeConstants").UNLIKED,m=b("PageLikeConstants").SPM_CALLOUT,n=b("PageLikeConstants").LAZY_CLICK,o={init:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,p,q){o._initWithArgs(a,b,c,d,e,f,g,h,i,j,k,l,m,n,p,q)},_initWithArgs:function(){var a=this;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];b("ifRequired")("PageLikeButton",function(a){return a.init.apply(a,d)},function(){d[11]=babelHelpers["extends"]({},d[11],{isLazy:!0}),a._startListening(d[1]),h.push(d)})},_startListening:function(a){var c=this;i||(i=!0,g.addSubscriptions(b("Arbiter").subscribe([k,l,m],function(a,d){b("Arbiter").inform(a+".lazy",d,"persistent"),c._bootload()})));g.addSubscriptions(b("Event").listen(a,"click",function(d){b("Arbiter").inform(n,{event:d,node:a},"persistent"),b("setImmediate")(function(){return c._bootload()})}))},_bootload:function(){if(j)return;j=!0;b("Bootloader").loadModules(["PageLikeButton"],function(a){g.release(),h.forEach(function(b){return a.init.apply(a,b)})},"PageLikeButtonLazy")}};e.exports=o}),null);
__d("HoverButton",["csx","cx","AsyncRequest","CSS","DOM","URI"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b,c,d){this._button=a,this._flyout=b,this._flyoutAjaxify=d,this._flyoutContent=c,b.subscribe("show",this._onShow.bind(this)),b.subscribe("hide",this._onHide.bind(this))}var c=a.prototype;c.showFlyoutBriefly=function(){this.showFlyout(),this._flyout.hideFlyoutDelayed(5e3)};c.showFlyout=function(){this._flyout.showFlyout(this._button,!0),this._flyout.inform("show",this._button)};c.hideFlyout=function(){this._flyout.hideFlyout(!0),this._flyout.inform("hide",this._button)};c.enableButton=function(){this._flyout.initNode(this._button)};c.disableButton=function(){this.hideFlyout(),this._flyout.deactivateNode(this._button)};c._onShow=function(a,c){b("CSS").addClass(c,"_52nd"),(b("CSS").hasClass(c,"uiButton")||b("CSS").matchesSelector(c,"._42fu"))&&b("CSS").addClass(c,"selected"),this._flyoutAjaxify&&(b("CSS").addClass(this._flyoutContent,"async_saving"),new(b("AsyncRequest"))().setURI(new(b("URI"))(this._flyoutAjaxify)).setHandler(function(a){b("CSS").removeClass(this._flyoutContent,"async_saving"),b("DOM").setContent(this._flyoutContent,a.payload)}.bind(this)).send(),this._flyoutAjaxify=null)};c._onHide=function(a,c){b("CSS").removeClass(c,"_52nd"),(b("CSS").hasClass(c,"uiButton")||b("CSS").matchesSelector(c,"._42fu"))&&b("CSS").removeClass(c,"selected")};c.destroy=function(){this.hideFlyout(),this._flyout.destroy()};c.suppressNextMouseEnter=function(){this._flyout.setActiveNode(this._button)};return a}();Object.assign(a.prototype,{_button:null,_flyout:null,_flyoutAjaxify:null,_flyoutContent:null});e.exports=a}),null);
__d("HoverFlyout",["Arbiter","ArbiterMixin","DataStore","Event","Keys","mixin","removeFromArray","shield"],(function(a,b,c,d,e,f){__p&&__p();c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e,f){var g;g=a.call(this)||this;c&&(g._showDelay=e,g._hideDelay=f,g.init(c),d&&g.initNode(d));b("Arbiter").subscribe("SwapButtonDEPRECATED/focusOnJoinButton",b("shield")(g.hideFlyout,babelHelpers.assertThisInitialized(g)),"all");return g}var d=c.prototype;d.init=function(a){this._flyout=a;this._showDelay=this._showDelay||0;this._hideDelay=this._hideDelay||100;this._showTimeout=null;this._hideTimeout=null;this._flyoutSubscriptions=[this._flyout.subscribe("mouseenter",this._onFlyoutMouseEnter.bind(this)),this._flyout.subscribe("mouseleave",b("shield")(this.hideFlyout,this))];this._nodes=[];this._dataStoreUnique="HoverFlyout_"+Date.now()+"_listeners";return this};d.initNode=function(a){if(this._nodes.includes(a))return this;this._nodes.push(a);b("DataStore").set(a,this._dataStoreUnique,[b("Event").listen(a,"mouseenter",this._onNodeMouseEnter.bind(this,a)),b("Event").listen(a,"mouseleave",b("shield")(this.hideFlyout,this)),b("Event").listen(a,"click",this._onNodeMouseEnter.bind(this,a)),b("Event").listen(a,"keydown",this._onNodeKeyEscape.bind(this))]);return this};d.deactivateNode=function(a){var c=b("DataStore").get(a,this._dataStoreUnique);if(c)while(c.length)c.pop().remove();b("removeFromArray")(this._nodes,a)};d.setShowDelay=function(a){this._showDelay=a;return this};d.setHideDelay=function(a){this._hideDelay=a;return this};d.showFlyout=function(a,b){this.setActiveNode(a);b?(this._flyout.setContext(a).show(),this.inform("show",a)):this._showTimeout=setTimeout(this.showFlyout.bind(this,a,!0),this._showDelay);return this};d.hideFlyout=function(a){clearTimeout(this._showTimeout),a?(this._flyout.hide(),this._activeNode&&this.inform("hide",this._activeNode),this._activeNode=null):this._hideTimeout=setTimeout(this.hideFlyout.bind(this,!0),this._hideDelay)};d.hideFlyoutDelayed=function(a){clearTimeout(this._showTimeout),clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(this.hideFlyout.bind(this,!0),a)};d.getActiveNode=function(){return this._activeNode};d.setActiveNode=function(a){clearTimeout(this._hideTimeout);this._activeNode&&this._activeNode!==a&&this.hideFlyout(!0);this._activeNode=a;return this};d.clearNodes=function(){for(var a=this._nodes.length;a>0;a--)this.deactivateNode(this._nodes[a-1])};d.destroy=function(){while(this._flyoutSubscriptions.length)this._flyout.unsubscribe(this._flyoutSubscriptions.pop());this.clearNodes()};d._onNodeMouseEnter=function(a){this._activeNode===a?clearTimeout(this._hideTimeout):this.showFlyout(a)};d._onFlyoutMouseEnter=function(){clearTimeout(this._hideTimeout)};d._onNodeKeyEscape=function(a){b("Event").getKeyCode(a)===b("Keys").ESC&&(this._activeNode&&this.inform("hide",this._activeNode),this._activeNode=null)};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a.HoverFlyout||c}),null);