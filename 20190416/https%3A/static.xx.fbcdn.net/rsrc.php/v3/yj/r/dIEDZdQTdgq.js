if (self.CavalryLogger) { CavalryLogger.start_js(["HqWtw"]); }

__d("MessengerThreadSharedMediaHelper",["AsyncRequest","LogHistory","MessageSharedMediaIDStore.bs","MessengerThreadSharedMediaAfterWebGraphQLQuery","MessengerThreadSharedMediaBeforeWebGraphQLQuery","MessengerThreadSharedMediaFindWebGraphQLQuery","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LogHistory").getInstance("shared_media_helper"),h=0;a={search:function(a,c,d){var e=b("MessageSharedMediaIDStore.bs").getMessageIDForAttachmentID(c),f=h++,i=b("performanceAbsoluteNow")(),j=new(b("AsyncRequest"))(b("MessengerThreadSharedMediaFindWebGraphQLQuery").getLegacyURI({id:a,photoID:c,messageID:e}));g.debug("search request "+f,JSON.stringify({id:a,photoID:c,messageID:e,timestamp:i}));b("promiseDone")(j.setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}),function(h){var j=b("performanceAbsoluteNow")();g.debug("search response "+f,JSON.stringify({id:a,photoID:c,messageID:e,timestamp:j,duration:j-i}));d(h)});return j},loadMorePrevious:function(a,c,d,e){a=new(b("AsyncRequest"))(b("MessengerThreadSharedMediaAfterWebGraphQLQuery").getLegacyURI({id:a,after:c,first:d}));b("promiseDone")(a.setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}),function(a){return e(a)});return a},loadMoreLatest:function(a,c,d,e){a=new(b("AsyncRequest"))(b("MessengerThreadSharedMediaBeforeWebGraphQLQuery").getLegacyURI({id:a,before:c,last:d}));b("promiseDone")(a.setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}),function(a){return e(a)});return a}};e.exports=a}),null);