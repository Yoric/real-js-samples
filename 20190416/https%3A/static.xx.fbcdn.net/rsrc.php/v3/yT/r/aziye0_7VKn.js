if (self.CavalryLogger) { CavalryLogger.start_js(["X\/SlY"]); }

__d("GrowthMobileActivation",["Arbiter","CSS","DOM","Event","Input","$"],(function(a,b,c,d,e,f){__p&&__p();a={promoFormInit:function(a,c,d){var e=b("$")(a);a=b("$")(d);b("Event").listen(a,"click",function(a){e.value=c})},phoneFormInit:function(a,c){var d=b("$")(a);a=b("$")(c);b("Event").listen(a,"click",function(a){return!b("Input").isEmpty(d)})},MegaphoneInit:function(){b("Arbiter").subscribe("mobile_activation/state_update",function(a,c){if(c.state>1)return;b("DOM").scry(document,"div.megaphone_title").forEach(function(a){b("CSS").hide(a)})}),b("DOM").scry(document,"div.megaphone_box").forEach(function(a){b("CSS").addClass(a,"welcome_mobile_activate_megaphone")})}};e.exports=a}),null);
__d("ProfilePicForm",["csx","CSS","DOM","Event","Parent","Run","TimelineProfilePicConfig","$","tidyEvent"],(function(a,b,c,d,e,f,g){__p&&__p();var h=!1,i;function j(a){h=a,b("CSS").conditionClass(document.documentElement,"profilePicLoading",a)}a=function(){"use strict";__p&&__p();function a(a,c){__p&&__p();this.reset();this.$1=a;if(!c)return;var d=b("$")(c);b("tidyEvent")(b("Event").listen(a.getRoot(),"click",function(a){i=a,a.stopPropagation()}));this.subscriptions=[a.subscribe("submit",function(){j(!0),i&&(b("Event").fire(a.getRoot().parentNode,"click",i),i=null)}),a.subscribe("success",function(a,c){j(!1);a=b("Parent").bySelector(d,"._1ro1");a||(a=d.parentElement);b("DOM").replace(a,c.response.payload)}),a.subscribe("failure",j.bind(null,!1))];b("Run").onBeforeUnload(function(){if(h)return b("TimelineProfilePicConfig").leavingMessage});b("Run").onLeave(this.reset.bind(this))}var c=a.prototype;c.getFileForm=function(){return this.$1};c.reset=function(){this.subscriptions&&this.subscriptions.forEach(function(a){a.unsubscribe()}),this.subscriptions=[],i=null,j(!1)};return a}();e.exports=a}),null);
__d("ProfilePictureUploader",["Arbiter","CSS","Dialog","DOM","Event","HTML","ProfilePhotoActionLogger","$","ge","tidyEvent"],(function(a,b,c,d,e,f){__p&&__p();var g={_hadProfilePicture:!1,_hasPreview:!1,_optionsToHide:null,_spinner:null,init:function(a,c,d,e,f,h,i){__p&&__p();c=c.getFileForm();var j=b("ge")("remove_profile_picture_link");this._spinner=e;d&&e&&(this._hasPreview=!0);i&&(this._optionsToHide=i);b("tidyEvent")([b("Arbiter").subscribe("timeline/profile_pic/success",function(c,e){__p&&__p();if(h){goURI(window.location);return}c=e.newPic;if(!c)return;var i=b("Dialog").getCurrent();i&&i.hide();this._hasPreview&&b("DOM").setContent(d,typeof c==="string"?b("HTML")(c):c);j&&b("CSS").show(j);g.updateIcons(e.headerPicURL,a);b("Arbiter").inform("profile_picture/"+f+"/success")}.bind(this)),b("Event").listen(c._form,"click",function(a){if(!a.clientX)return;b("ProfilePhotoActionLogger").log(b("ProfilePhotoActionLogger").EVENT_SELECT_METHOD,f,b("ProfilePhotoActionLogger").METHOD_UPLOAD)}),c.subscribe("submit",function(){if(!this._hasPreview){b("CSS").addClass(document.documentElement,"profilePicLoading");return}j&&(this._hadProfilePicture=!b("CSS").hasClass(j,"hidden_elem"),b("CSS").hide(j));b("CSS").hide(d)}.bind(this)),c.subscribe("success",function(c,e){if(h){goURI(window.location.href);return}this._hasPreview?(b("DOM").setContent(d,e.response.payload),b("CSS").show(d),j&&b("CSS").show(j)):b("CSS").removeClass(document.documentElement,"profilePicLoading");c=b("DOM").create("div",null,e.response.payload).getElementsByTagName("img")[0].src;g.updateIcons(c,a);b("Arbiter").inform("profile_picture/"+f+"/success")}.bind(this)),c.subscribe("failure",function(a,c){if(!this._hasPreview){b("CSS").removeClass(document.documentElement,"profilePicLoading");return}b("CSS").show(d);b("CSS").conditionShow(b("$")("remove_profile_picture_link"),this._hadProfilePicture)}.bind(this))])},updateIcons:function(a,c){var d=b("ge")("profile_pic_header_"+c);c=b("ge")("profile_pic_welcome_"+c);d&&(d.src=a);c&&(c.src=a,b("CSS").addClass(c,"_8zq"));this._optionsToHide&&(b("DOM").remove(this._optionsToHide),this._optionsToHide=null,this._spinner&&b("CSS").hide(this._spinner))}};e.exports=g}),null);
__d("ProfilePictureUploaderLanding",["cx","Arbiter","CSS","tidyEvent"],(function(a,b,c,d,e,f,g){a={init:function(a){b("tidyEvent")([b("Arbiter").subscribe("profile_picture/promo_landing/success",function(){b("CSS").addClass(a,"_4jy1"),b("CSS").removeClass(a,"_517h")})])}};e.exports=a}),null);