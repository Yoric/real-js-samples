;(function(){var Locate={running:false,cookieName:'pcLocate',callbackQueue:[],defaultData:{proCode:'440000',pro:'广东省',cityCode:'440100',city:'广州市'},dataType:'',err:[0],extend:function(o,n,override){for(var p in n){if(n.hasOwnProperty(p)&&(!o.hasOwnProperty(p)||override))o[p]=n[p];}
return o;},parseQuery:function(obj){var ret='';for(var i in obj){if(obj.hasOwnProperty(i)){ret+='&'+i+'='+obj[i];}}
return ret;},parseResult:function(ret){if(!ret)return;if(window.JSON&&typeof window.JSON.parse==='function'){return JSON.parse(ret)}else{return eval('('+ret+')');}},setCookie:function(name,value,time){document.cookie=name+"="+encodeURIComponent(value)+"; path=/; domain="+window.location.hostname.replace(/.+((\.\w+)\.com(\.cn)?)/,"$1")+"; expires="+new Date(+new Date()+time).toGMTString();},getCookie:function(name){return decodeURIComponent(document.cookie.replace(new RegExp(".*(?:^|; )"+name+"=([^;]*).*|.*"),"$1"));},getLocateCookie:function(){return Locate.parseResult(Locate.getCookie(Locate.cookieName));},stringifyResult:(function(){var stringfiy=function(input){var isArray=function(arr){if(typeof Array.isArray==='function'){return Array.isArray(arr);}else{return Object.prototype.toString.call(arr).slice(8,-1)==='Array';}}
var isObject=function(obj){return Object.prototype.toString.call(obj).slice(8,-1)==='Object';}
var parse=function(input){if(isArray(input)){for(var i=0;i<input.length;i++){input[i]=parse(input[i]);}
return'['+input.join(',')+']';}else if(isObject(input)){var ret=[];for(var i in input){if(input.hasOwnProperty(i)){ret.push('"'+i+'":'+parse(input[i]));}}
return'{'+ret.join(',')+'}';}else if(typeof input==="string"){return'"'+input.toString()+'"';}else{return input.toString();}}
return parse(input);}
return function(ret){if(window.JSON&&typeof window.JSON.stringify==='function'){return JSON.stringify(ret);}else{return stringfiy(ret);}}})(),getScriptFuc:{},getScript:function(option){var script=document.createElement("script");var callbackVal=option.callbackSuccName?option.callbackSuccName:'callback'+1*new Date;var callbackName="Locate.getScriptFuc."+callbackVal,add=/\?/.test(option.url)?"&":"?";Locate.getScriptFuc[callbackVal]=function(json){script.jsonp=1;option.callbackSucc(json);}
script.type="text/javascript";script.src=option.url+add+'callback='+callbackName;script.charset=option.charset||"UTF-8";script.onload=script.onreadystatechange=function(){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){Locate.removeScript(this,option.callbackErr,option.interface,callbackVal);}}
script.onerror=function(){Locate.removeScript(this,option.callbackErr,option.interface,callbackVal);}
document.getElementsByTagName("head")[0].appendChild(script);},removeScript:function(script,callbackErr,interface,callbackVal){if(typeof script.jsonp==="undefined"){callbackErr(interface);}
if(script.clearAttributes){script.clearAttributes();}else{script.onload=script.onreadystatechange=script.onerror=null;}
script.parentNode.removeChild(script);delete Locate.getScriptFuc[callbackVal];},getByCoordSucc:function(data){if(data.error){Locate.err[0]+=1;Locate.err['ipAreaCoordJson']=data.error;Locate.dataType='default';Locate.doCallbackErr();}else{Locate.dataType='ipAreaCoordJson';Locate.doCallbackSucc(data);}},getByIpSucc:function(data){if(data.err){Locate.err[0]+=1;Locate.err['ipJson']=data.err;}
if(data.cityCode){Locate.dataType='ipJson';Locate.doCallbackSucc(data);}else{Locate.dataType='default';Locate.doCallbackErr();}},getCityErr:function(interface){Locate.err[0]+=1;Locate.err['interface']=interface;Locate.dataType='default';Locate.doCallbackErr();},getCityByIp:function(args){var url=location.protocol+'//whois.pconline.com.cn/ipJson.jsp?defaultCity=true';if(args){url+=Locate.parseQuery(args);}
Locate.getScript({url:url,interface:'ipJson',callbackSucc:Locate.getByIpSucc,callbackSuccName:'getByIpSucc',callbackErr:Locate.getCityErr,charset:'GBK'});},getCoordsByH5:function(){var _this=this;navigator.geolocation.getCurrentPosition(getCityByCoords,getCoordsByH5Error,{timeout:1e4});_this.h5ErrorTimer=setTimeout(function(){getCoordsByH5Error({code:3});},1e4)
function getCoordsByH5Error(error){clearTimeout(_this.h5ErrorTimer);Locate.err[0]+=1;switch(error.code){case 1:Locate.err['h5']='RejectShare';break;case 2:Locate.err['h5']='GetError';break;case 3:Locate.err['h5']='Timeout';break;default:Locate.err['h5']='unknownErr'}
Locate.getCityByIp({'sts':Locate.err['h5']});}
function getCityByCoords(position){clearTimeout(_this.h5ErrorTimer);var lat=position.coords.latitude,lng=position.coords.longitude,url=location.protocol+"//whois.pconline.com.cn/ipAreaCoordJson.jsp?coords="+lng+","+lat+"&level=2";Locate.getScript({url:url,interface:'ipAreaCoordJson',callbackSucc:Locate.getByCoordSucc,callbackSuccName:'getByCoordSucc',callbackErr:Locate.getCityErr});}},doCallbackSucc:function(data){var data={proCode:data.proCode,pro:data.pro,cityCode:data.cityCode,city:data.city,dataType:Locate.dataType,expires:+new Date+1296*1e6}
Locate.setCookie(Locate.cookieName,Locate.stringifyResult(data),1024*24*3600*1000);data.err=Locate.err;Locate.doCallback(data);},doCallbackErr:function(){var data={};Locate.extend(data,Locate.defaultData);data.dataType=Locate.dataType;data.err=Locate.err;Locate.doCallback(data);},doCallback:function(data){var queue=Locate.callbackQueue,i=0,length=queue.length;for(;i<length;i++){queue[i].call(Locate,data);}
Locate.callbackQueue=[];Locate.err=[0];Locate.dataType='';Locate.running=false;},setByCityCode:function(cityCode,callbackSetSucc,callbackSetErr){if(Locate.running){var err=[1];err['other']='Lacate is running!';callbackSetErr({err:err});}else{Locate.running=true;callbackSetSucc&&(Locate.callbackQueue.push(callbackSetSucc));callbackSetErr&&(Locate.callbackSetErr=callbackSetErr);var url=location.protocol+"//price.pcauto.com.cn/interface/cms/region_ipArea.jsp?m=getCityById&encode=utf8&cityCode="+cityCode;Locate.getScript({url:url,interface:'region_ipArea',callbackSucc:Locate.setByCityCodeSucc,callbackSuccName:'setByCityCodeSucc',callbackErr:Locate.setByCityCodeErr});}},setByCityCodeSucc:function(data){Locate.running=false;if(!data.result){if(Locate.callbackSetErr){var dataReturn={err:data.msg};Locate.callbackSetErr(dataReturn);delete Locate.callbackSetErr;}}else{var dataReturn={proCode:data.cityData.proCode,pro:data.cityData.pro+'省',cityCode:data.cityData.cityCode,city:data.cityData.name+'市',dataType:'user',expires:+new Date+1296*1e6}
Locate.setCookie(Locate.cookieName,Locate.stringifyResult(dataReturn),1024*24*3600*1000);dataReturn.err=Locate.err;Locate.doCallback(dataReturn);}},setByCityCodeErr:function(interface){Locate.running=false;if(Locate.callbackSetErr){var err=[1];err['other']=interface+'接口请求失败';Locate.callbackSetErr({err:err});delete Locate.callbackSetErr;}},init:function(obj){this.callbackQueue.push(obj.callback);this.device=obj.device||'wap';if(!this.running){this.running=true;var locationCookie=this.getLocateCookie(),now=+new Date;if(locationCookie&&locationCookie.city&&locationCookie.expires>now){locationCookie.dataType='cookie';this.doCallback(locationCookie);}else{if(this.device=='wap'){if(navigator.geolocation){this.getCoordsByH5();}else{this.err[0]+=1;this.err['h5']='NotHtml5';this.getCityByIp({'sts':this.err['h5']});}}else if(this.device=='pc'){this.getCityByIp({'sts':'devicePC'});}}}}};window.Locate=Locate;})();;;(function(){var LocateAuto={running:false,cookieName:'pcautoLocate',cookieName2:'PClocation',callbackQueue:[],locateDate:{},defaultData:{proId:5,cityId:1,url:location.protocol+'//www.pcauto.com.cn/qcbj/gz/'},dataTypeAuto:'',getLocateCookie:function(){return Locate.parseResult(Locate.getCookie(LocateAuto.cookieName));},setByCityCode:function(cityCode,callbackSetSucc,callbackSetErr){if(LocateAuto.running){var err=[1];err['other']='Lacate is running!';callbackSetErr({err:err});}else{LocateAuto.running=true;callbackSetSucc&&(LocateAuto.callbackQueue.push(callbackSetSucc));callbackSetErr&&(Locate.callbackSetErr=callbackSetErr);var url=location.protocol+"//price.pcauto.com.cn/interface/cms/region_ipArea.jsp?m=getCityById&encode=utf8&cityCode="+cityCode;Locate.getScript({url:url,interface:'region_ipArea',callbackSucc:LocateAuto.setByCityCodeSucc,callbackSuccName:'setByCityCodeSucc_auto',callbackErr:LocateAuto.setByCityCodeErr});}},setByCityId:function(cityId,callbackSetSucc,callbackSetErr){if(LocateAuto.running){var err=[1];err['other']='Lacate is running!';callbackSetErr({err:err});}else{LocateAuto.running=true;callbackSetSucc&&(LocateAuto.callbackQueue.push(callbackSetSucc));callbackSetErr&&(Locate.callbackSetErr=callbackSetErr);var url=location.protocol+"//price.pcauto.com.cn/interface/cms/region_ipArea.jsp?m=getCityById&encode=utf8&cityId="+cityId;Locate.getScript({url:url,interface:'region_ipArea',callbackSucc:LocateAuto.setByCityCodeSucc,callbackSuccName:'setByCityIdSucc_auto',callbackErr:LocateAuto.setByCityCodeErr});}},setByCityCodeSucc:function(data){LocateAuto.running=false;if(!data.result){if(Locate.callbackSetErr){var dataReturn={err:data.msg};Locate.callbackSetErr(dataReturn);delete Locate.callbackSetErr;}}else{var dataLocate={proCode:data.cityData.proCode,pro:data.cityData.pro+'省',cityCode:data.cityData.cityCode,city:data.cityData.name+'市',dataType:'user',expires:+new Date+1296*1e6}
var dataLocateAuto={proId:data.cityData.proId,cityId:data.cityData.cityId,url:data.cityData.url,dataTypeAuto:'user'}
if(LocateAuto.device=='wap'){dataLocateAuto.url=dataLocateAuto.url.replace(/www\.pcauto\.com\.cn/,"m\.pcauto\.com\.cn/x");}
Locate.setCookie(Locate.cookieName,Locate.stringifyResult(dataLocate),1024*24*3600*1000);Locate.setCookie(LocateAuto.cookieName,Locate.stringifyResult(dataLocateAuto),1024*24*3600*1000);Locate.setCookie(LocateAuto.cookieName2,dataLocateAuto.cityId,1024*24*3600*1000);Locate.extend(dataLocate,dataLocateAuto);LocateAuto.doCallback(dataLocate);}},setByCityCodeErr:function(interface){LocateAuto.running=false;if(Locate.callbackSetErr){var err=[1];err['other']=interface+'接口请求失败';Locate.callbackSetErr({err:err});delete Locate.callbackSetErr;}},doCallbackSucc:function(data){var dataReturn={proId:data.cityData.proId,cityId:data.cityData.cityId,url:data.cityData.url,dataTypeAuto:LocateAuto.dataTypeAuto}
if(LocateAuto.device=='wap'){dataReturn.url=dataReturn.url.replace(/www\.pcauto\.com\.cn/,"m\.pcauto\.com\.cn/x");}
Locate.setCookie(LocateAuto.cookieName,Locate.stringifyResult(dataReturn),1024*24*3600*1000);Locate.setCookie(LocateAuto.cookieName2,dataReturn.cityId,1024*24*3600*1000);Locate.extend(dataReturn,LocateAuto.locateDate);LocateAuto.doCallback(dataReturn);},doCallback:function(data){var queue=LocateAuto.callbackQueue,i=0,length=queue.length;for(;i<length;i++){queue[i].call(LocateAuto,data);}
LocateAuto.callbackQueue=[];LocateAuto.dataTypeAuto='';LocateAuto.running=false;},getByCityCodeSucc:function(data){if(data.result){LocateAuto.dataTypeAuto='region_ipArea';LocateAuto.doCallbackSucc(data);}else{LocateAuto.locateDate.err[0]+=1;LocateAuto.locateDate.err['region_ipArea']=data.msg;doCallback(LocateAuto.locateDate);}},getByCityCodeErr:function(data){LocateAuto.locateDate.err[0]+=1;LocateAuto.locateDate.err['other']='region_ipArea接口请求失败';LocateAuto.doCallback(LocateAuto.locateDate);},getLocate:function(data){if(data.dataType=="default"){Locate.extend(data,LocateAuto.defaultData);data.dataTypeAuto="default";LocateAuto.doCallback(data);}else{LocateAuto.locateDate=data;var url=location.protocol+"//price.pcauto.com.cn/interface/cms/region_ipArea.jsp?m=getCityById&encode=utf8&cityCode="+data.cityCode;Locate.getScript({url:url,interface:'region_ipArea',callbackSucc:LocateAuto.getByCityCodeSucc,callbackSuccName:'getByCityCodeSucc_auto',callbackErr:LocateAuto.getByCityCodeErr});}},init:function(obj){this.callbackQueue.push(obj.callback);this.device=obj.device||'wap';if(!this.running){this.running=true;var locationCookie=Locate.getLocateCookie(),locationAutoCookie=this.getLocateCookie(),now=+new Date;if(locationCookie&&locationCookie.expires>now&&locationAutoCookie){locationCookie.dataType=locationAutoCookie.dataTypeAuto='cookie';Locate.extend(locationCookie,locationAutoCookie);this.doCallback(locationCookie);}else{Locate.init({device:LocateAuto.device,callback:LocateAuto.getLocate});}}}};window.LocateAuto=LocateAuto;})();