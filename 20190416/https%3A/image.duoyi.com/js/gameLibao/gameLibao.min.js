!function(e){function t(e,o){return(t="undefined"==typeof layer?function(e){var t=decodeURIComponent(e);alert(t)}:o?function(e){var t=decodeURIComponent(e);layer.open({content:t,btn:"我知道了"})}:function(e){var t=decodeURIComponent(e);layer.alert(t)})(e,o)}if(!e)return!1;var o={url:"//w4.duoyi.com/p_user/DoNewActCard.aspx",data:{gate:"th",type:1,from:0,platform:0,ext1:"预约"},isMobile:!1,isShowPhone:!1,elePhone:".ipt-phone",eleVerifyCode:".ipt-vcode",eleXskCode:".ipt-code",iptFocusClass:"focus",btnVerify:".btn-getvcode",btnGetXsk:".btn-getxsk",isShowCopy:!0,eleCopyTip:".copy-tip",btnCopy:".btn-copy",errorPhoneTxt:"请输入正确格式的手机号！",errorVerifyTxt:"请输入正确格式的验证码！",isNeedCookie:!0,cookieTime:0,cookieName:"sw3_fab",time:60,getVerifyCodeCallback:function(e,t){t.showAlert(e.msg)},getXskCodeCallback:function(e,t){"ok"==e.status&&dy_trace(["_trackEvent","xsk","click","官网_"+t.data.ext1+"_新手礼包领取成功"])}},i={act:"getsmscode"},n={Strategy:{isEmpty:function(e,t){if(!e||e.length<1||e==t)return t},phone:function(e,t){if(!/^1[3-9][0-9]{9}$/.test(e))return t},isNum:function(e,t){if(!/^\d+$/.test(e))return t},checkhtml:function(e,t){if(!e.replace(/%3c(%3F|%2F|[a-z]+)/gi,""))return t},email:function(e,t){if(!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(e))return t}},list:[],add:function(e,t,o){var i=this;i.list.push(function(){return i.Strategy[e](t,o)})},start:function(){for(var e,t=0;t<this.list.length;t++)if(e=this.list[t]())return e},init:function(){this.list=[]}},s=function(t,i){var n=this,s={};s=e.extend({},o,t),n.url=s.url,n.data=s.data,n.isShowPhone=s.isShowPhone,n.iptFocusClass=s.iptFocusClass,n.errorPhoneTxt=s.errorPhoneTxt,n.errorVerifyTxt=s.errorVerifyTxt,n.isShowCopy=s.isShowCopy,n.isMobile=s.isMobile,n.isNeedCookie=s.isNeedCookie,n.cookieTime=s.cookieTime,n.cookieName=s.cookieName,n.time=s.time,n._btnCopy=s.btnCopy,i?(n.elePhone=i.find(s.elePhone),n.eleVerifyCode=i.find(s.eleVerifyCode),n.eleXskCode=i.find(s.eleXskCode),n.eleCopyTip=i.find(s.eleCopyTip),n.btnVerify=i.find(s.btnVerify),n.btnGetXsk=i.find(s.btnGetXsk),n.btnCopy=i.find(s.btnCopy)):(n.elePhone=e(s.elePhone),n.eleVerifyCode=e(s.eleVerifyCode),n.eleXskCode=e(s.eleXskCode),n.eleCopyTip=e(s.eleCopyTip),n.btnVerify=e(s.btnVerify),n.btnGetXsk=e(s.btnGetXsk),n.btnCopy=e(s.btnCopy)),n.getVerifyCodeCallback=s.getVerifyCodeCallback,n.getXskCodeCallback=s.getXskCodeCallback,n.data.act&&delete n.data.act};s.prototype.init=function(e){var t=this;t.bindEvent(),t.isMobile||t.isShowPhone&&(t.elePhoneDefaultValue=t.elePhone[0].defaultValue,t.eleVerifyCodeDefaultValue=t.eleVerifyCode[0].defaultValue)},s.prototype.showAlert=function(e){t(e,this.isMobile)},s.prototype.focusBlur=function(t){var o=this;t.on("focus",function(){e(this).val()==this.defaultValue&&(e(this).val(""),e(this).addClass(o.iptFocusClass))}),t.on("blur",function(){""==e(this).val()&&(e(this).val(this.defaultValue),e(this).removeClass(o.iptFocusClass))})},s.prototype.calctime=function(e,t){var o=this;o.timer=setInterval(function(){if(t<=0)return clearInterval(o.timer),o.timer=null,e.removeClass("disable").html("获取验证码"),!1;e.html(t+"秒后重获"),t--},1e3)},s.prototype.copy=function(){var t=this;t.isMobile?e.getScript("//image.duoyi.com/js/clipboard/clipboard.min.js",function(){var e=new ClipboardJS(t._btnCopy,{text:function(e){return t.eleXskCode.val()}});e.on("success",function(e){t.eleCopyTip.trigger("show","复制成功！"),setTimeout(function(){t.eleCopyTip.trigger("hide")},1500),e.clearSelection()}),e.on("error",function(e){t.showAlert("复制失败！请长按新手礼包码选择复制~!")})}):e.getScript("//image.duoyi.com/js/clippy/clippy.beta.js",function(){zeroClippy.replace(t.btnCopy[0],{text:function(){return t.eleXskCode.val()},callback:function(){t.eleCopyTip.trigger("show","复制成功！"),setTimeout(function(){t.eleCopyTip.trigger("hide")},1500)}})})},s.prototype.getVcode=function(t,o){var n=this,s={act:i.act,phone:t},r=e.extend(s,n.data);if(n.getVcodeing)return!1;n.getVcodeing=!0,e.ajax({url:n.url,data:r,type:"GET",dataType:"jsonp",jsonp:"jsoncallback",timeout:"20000",success:function(t){o.removeClass("disable"),n.getVcodeing=!1,e.isFunction(n.getVerifyCodeCallback)?n.getVerifyCodeCallback(t,n):n.showAlert(t.msg),"ok"==t.status?n.calctime(o,n.time):o.removeClass("disable").html("获取验证码")},error:function(e,t,i){o.removeClass("disable"),n.getVcodeing=!1,n.showAlert("网络信号不好，请刷新再试")}})},s.prototype.setXskCode=function(e,t){var o=this;o.eleXskCode.val(e),o.eleCopyTip.trigger("hide"),t&&t.removeClass("disable"),o.isShowCopy&&(o.isLoadZeroClippy||(o.copy(),o.isLoadZeroClippy=!0))},s.prototype.getLibaoCode=function(t){var o=this,i=o.data;if(o.eleCopyTip.trigger("show","正在获取...."),o.xskCodeVal)return o.setXskCode(o.xskCodeVal,t.ele),e.isFunction(o.getXskCodeCallback)&&o.getXskCodeCallback(o.res,o),!1;if(o.isNeedCookie&&e.cookie(o.cookieName))return o.setXskCode(e.cookie(o.cookieName),t.ele),e.isFunction(o.getXskCodeCallback)&&o.getXskCodeCallback({status:"ok",code:0,msg:"成功"},o),!1;if(o.isShowPhone){var n={phone:t.phone,smscode:t.smscode};i=e.extend(n,o.data)}if(o.libaoGetting)return!1;o.libaoGetting=!0,e.ajax({url:o.url,data:i,type:"GET",dataType:"jsonp",jsonp:"jsoncallback",timeout:"20000",success:function(i){t.ele.removeClass("disable"),o.libaoGetting=!1,o.res=i,"error"==i.status?(o.showAlert(i.msg),o.eleXskCode.val(""),o.eleCopyTip.trigger("hide")):"ok"==i.status&&(-1!==i.cards.indexOf("|")?o.xskCodeVal=i.cards.split("|")[1]:o.xskCodeVal=i.cards,o.setXskCode(o.xskCodeVal),o.isNeedCookie&&e.cookie(o.cookieName,o.xskCodeVal,{expires:o.cookieTime,path:"/"})),e.isFunction(o.getXskCodeCallback)&&o.getXskCodeCallback(i,o)},error:function(e,i,n){t.ele.removeClass("disable"),o.libaoGetting=!1,o.showAlert("网络信号不好，请刷新再试")}})},s.prototype.bindEvent=function(){var t=this;t.isMobile||(t.focusBlur(t.elePhone),t.focusBlur(t.eleVerifyCode)),t.eleCopyTip.on({show:function(t,o){e(this).html(o).show()},hide:function(){e(this).html("").hide()}}),t.isShowPhone&&t.btnVerify.on("click",function(o){o.preventDefault();var i=e.trim(t.elePhone.val()),s=e(this);if(s.hasClass("disable"))return!1;n.init(),n.add("phone",i,t.errorPhoneTxt);var r=n.start();return r?t.showAlert(r):(s.addClass("disable"),t.getVcode(i,s)),!1}),t.btnGetXsk.on("click",function(o){o.preventDefault();var i=e(this),s={ele:i};if(i.hasClass("disable"))return!1;if(t.isShowPhone){var r=e.trim(t.elePhone.val()),a=t.eleVerifyCode.val();n.init(),n.add("phone",r,t.errorPhoneTxt),n.add("isNum",a,t.errorVerifyTxt);var l=n.start();if(l)return t.showAlert(l),!1;s.phone=r,s.smscode=a}return i.addClass("disable"),t.getLibaoCode(s),!1})};var r={},a={},l=1;r.creat=function(e){a["l"+l]=new s(e),a["l"+l].init(),l++},window.gameLibao=r;var c={};e.fn.gameLibao=function(t){return this.each(function(o){c["o"+o]=new s(t,e(this)),c["o"+o].init()})}}(window.jQuery||"");