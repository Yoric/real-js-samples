honey.def("lib:jquery",function(e){var u,g,t,v,i;u=window,t=function(){},v=u.document,i={set:t,get:t,remove:t,clear:t,each:t,obj:t,length:0},function(){if("localStorage"in u)try{return g=u.localStorage}catch(m){}var e,t,i=v.getElementsByTagName("head")[0],n=u.location.hostname||"localStorage",a=new Date;if(i.addBehavior){try{(t=new ActiveXObject("htmlfile")).open(),t.write('<script>document.w=window;<\/script><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,i=e.createElement("head"),e.appendChild(i)}catch(m){i=v.getElementsByTagName("head")[0]}try{a.setDate(a.getDate()+36500),i.addBehavior("#default#userData"),i.expires=a.toUTCString(),i.load(n),i.save(n)}catch(m){return}var r,o;try{r=i.XMLDocument.documentElement,o=r.attributes}catch(m){return}var d="p__hack_",c="m-_-c",l=new RegExp("^"+d),h=new RegExp(c,"g"),s=function(e){return encodeURIComponent(d+e).replace(/%/g,c)};g={length:o.length,isVirtualObject:!0,getItem:function(e){return(o.getNamedItem(s(e))||{nodeValue:null}).nodeValue||r.getAttribute(s(e))},setItem:function(e,t){try{r.setAttribute(s(e),t),i.save(n),this.length=o.length}catch(m){}},removeItem:function(e){try{r.removeAttribute(s(e)),i.save(n),this.length=o.length}catch(m){}},clear:function(){for(;o.length;)this.removeItem(o[0].nodeName);this.length=0},key:function(e){return o[e]?(t=o[e].nodeName,decodeURIComponent(t.replace(h,"%")).replace(l,"")):undefined;var t}},"localStorage"in u||(u.localStorage=g)}else try{g=u.localStorage}catch(m){g=null}}(),u.LOCALSTORGE=g?{set:function(e,t){this.get(e)!==undefined&&this.remove(e),g.setItem(e,t),this.length=g.length},get:function(e){var t=g.getItem(e);return null===t?undefined:t},remove:function(e){g.removeItem(e),this.length=g.length},clear:function(){g.clear(),this.length=0},each:function(e){var t,i=this.obj(),n=e||function(){};for(t in i)if(!1===n.call(this,t,this.get(t)))break},obj:function(){var e,t,i={},n=0;if(g.isVirtualObject)i=g.key(-1);else for(e=g.length;n<e;n++)i[t=g.key(n)]=this.get(t);return i},length:g.length}:i,u.jQuery&&(u.jQuery.LS=u.LOCALSTORGE);var n=function(e,t,i){if(window.VIDEOINFO){for(var n=window.VIDEOINFO.vid,a=[],r=0,o=!0,d=$.LS.get("honey-rec")?JSON.parse($.LS.get("honey-rec")):[],c={updateTime:$.now(),video_id:n,vid:n,cid:VIDEOINFO.cid,url:window.location.href+"?start_time="+t,sid:VIDEOINFO.sid,video_name:VIDEOINFO.title,watchTime:e,time:t,isEnd:i};d.length;){var l=d.shift();if(l.video_id===n&&(l=c,o=!1),a.push(l),10<++r)break}o&&a.unshift(c),$.LS.set("honey-rec",JSON.stringify(a));for(var h=[],s=0,m=!0,u=$.LS.get("honey-add")?JSON.parse($.LS.get("honey-rec")):[],g={updateTime:$.now(),vid:n,cid:VIDEOINFO.cid,sid:VIDEOINFO.sid,watchTime:t,isEnd:i};u.length;){var v=u.shift();if(v.vid===n&&(v=g,m=!1),h.push(v),10<++s)break}m&&h.unshift(g),$.LS.set("player-add",JSON.stringify(h))}};function a(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),i=document.cookie.match(t);return i?i[1]:""}var r=a("uuid"),o=""==a("HDCN")?"":a("HDCN").match(/\b\w+\b/g)[0],d="//playhistory.bz.mgtv.com/playHistory/heartbeat?pid=&ticket="+o+"&uid="+r+"&cid="+VIDEOINFO.cid+"&vid="+VIDEOINFO.vid+"&sid="+VIDEOINFO.sid+"&from=1";if(""!==a("HDCN")){var c=$.LS.get("honey-add")?JSON.parse($.LS.get("honey-rec")):[],l=$("#mgtv-addplaylist-iframe"),h=$("#mgtv-addplaylist-from");if(c.length){if(0==l.length&&$('<iframe frameborder="0" height="0" name="mgtv-addplaylist-iframe"  id="mgtv-addplaylist-iframe" width="0"/>').appendTo("body"),0==h.length)h=$('<form action="//playhistory.bz.mgtv.com/playHistory/add" target="mgtv-addplaylist-iframe" method="post" id="mgtv-addplaylist-from"><input type="hidden" name="pid" value="" /><input type="hidden" name="ticket" value="'+o+'" /><input type="hidden" name="uid" value="'+r+'" /><input type="hidden" name="from" value="1" /><input type="hidden" name="playList" value="" /></form>').appendTo("body"),$('[name="playList"]',h).val(JSON.stringify(c)),h.submit();$.LS.set("player-add",[])}}var s={};(e.MGTV_VIDEO_FUN=s).getStopEvent=function(e){window.USER&&honey.load(d+"&watchTime="+parseInt(0)+"&isEnd=1&callback=playerBack"),n("已看完",0,1)},s.getSeekEvent=function(e,t){window.seekTime=e;var i="已观看"+Math.ceil(e/t*100)+"%";window.USER&&honey.load(d+"&watchTime="+parseInt(e)+"&isEnd=0&callback=playerBack"),n(i,e,0)},s.getPlayEvent=function(e){var t=/iPad/i.test(navigator.userAgent)?6:1;(new Image).src="//vc.mgtv.com/v3/watch?vid="+(VIDEOINFO.vid||"")+"&cid="+(VIDEOINFO.cid||"")+"&pid="+(VIDEOINFO.bdid||"")+"&invoker="+t+"&_t="+Math.random()},window.playerLight=function(){},window.playerBack=function(){};var m=new e.vipDialog(".c-player-video");window.showPlayPayDialog=function(e,t){var i={user:e,info:t};return 200!=i.user.purview&&m.open(i),!0}});