"use strict";var _createClass=function(){function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}honey.def("lib:jquery",function(e){var a=function(e){var n=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),t=document.cookie.match(n);return t?t[1]:""},c=function(e,n){for(var t=[],i=0;i<e.length;i++)t.push(e[i][n]);return t.join(",")},s=new STK.start,r="//rc.log.mgtv.com/rpt",o={},h="https://www.mgtv.com/",u=null,f=Math.ceil(1e9*Math.random()),y="https://www.mgtv.com/feedback/?token="+f,n=function(){function n(e){_classCallCheck(this,n),this.type="1",this.bind()}return _createClass(n,[{key:"init",value:function(e){return this.render(e),this.type=e.type?e.type:this.type,!0}},{key:"bind",value:function(){var t=this;this.$errorFail=$("div[node-type=error-fail]");var e=this.$errorFail;e.on("click","a.error-list-uihot",function(e){var n=$(this).parents();t.sendClickEvent(o,{hitid:n.attr("data-vid"),pos:n.index()+1,videoid:VIDEOINFO.vid},"recommended_hot","hotlist")}),e.on("click","i[action-type=cancel-play-error]",function(e){e.preventDefault(),clearTimeout(u),$(this).parents().data("focus",!0),$(this).parents().removeClass("focus")}),$(document).on("page.reload.mock",function(){t.hide()}),e.on("click","a[action-type=error-ui-feedback]",function(e){try{FUN_VIDEO_FEEDBACK_POST&&FUN_VIDEO_FEEDBACK_POST(f)}catch(n){}}),e.on("click","a[action-type=video-ui-fail-btn]",function(e){e.preventDefault(),window.location.reload()})}},{key:"sendData",value:function(e,n,t){var i="playlist"==t?"plid":"videoId",a={bid:"1.1.4",time:STK.$.getTimer("yyyyMMddhhmmss"),act:n,ver:e.ver||"",reqid:e.reqid||"",region:8,cid:VIDEOINFO.rid,rcdata:c(e.data,i)||"",videoid:VIDEOINFO.vid,vidauto:0,rctype:c(e.data,"rcType")};s.pageEvent(a,r)}},{key:"sendClickEvent",value:function(e,n,t,i){var a={bid:"1.1.4",time:STK.$.getTimer("yyyyMMddhhmmss"),act:t,ver:e.ver||"",reqid:e.reqid||"",region:8,cid:VIDEOINFO.rid,rcdata:c(e.data,"hotlist"==i?"videoId":"plid")||"",hitid:n.hitid,pos:n.pos,videoid:VIDEOINFO.vid,vidauto:0,rctype:c(e.data,"rcType")};s.pageEvent(a,r)}},{key:"creatList",value:function(e){var a=this;this.listHtml=[],e.data.forEach(function(e,n){var t="";0==n&&(h=e.play_url,t="focus");var i='<li class="'+t+'" data-vid="'+e.videoId+'" action-type="error-ui-ploading">\n                    <div class="picbox">\n                        <a href="'+e.play_url+'" class="error-list-uihot">\n                            \n                            \x3c!--播放图片--\x3e\n                            <span class="pimg">\n                                <img src="'+e.image+'_160x90.jpg" width="160" height="90"/>\n                            </span>\n                            \n                            \x3c!--播放次数--\x3e\n                            <span class="pnum">\n                                <i class="svgicon svg-play">\n                                    <svg viewBox="0 0 9 9">\n                                        <path d="M7.4,3.3l-4.1-3C2.3-0.4,1,0.3,1,1.5v5.9c0,1.2,1.3,2,2.3,1.2l4.1-3C8.2,5.1,8.2,3.9,7.4,3.3z"/>\n                                    </svg>\n                                </i>\n                                <i>'+e.info+'</i>\n                            </span>\n                            \n                            \x3c!--黑色遮罩背景--\x3e\n                            <span class="pbg"></span>\n                        </a>\n                        \x3c!--继续播放按钮--\x3e\n                        <span class="pbtn">\n                            <a href="'+e.play_url+'" class="error-list-uihot">\n                                <i class="svgicon svg-next">\n                                    <svg viewBox="0 0 14 14">\n                                        <g>\n                                            <path d="M9.1,5.3l-6.3-4C1.5,0.6,0,1.5,0,3.1v8c0,1.5,1.5,2.5,2.8,1.7l6.3-4C10.3,8,10.3,6.1,9.1,5.3z"/>\n                                            <path d="M13,1.1c-0.5,0-1,0.5-1,1v10c0,0.5,0.5,1,1,1s1-0.5,1-1v-10C14,1.5,13.5,1.1,13,1.1z"/>\n                                        </g>\n                                    </svg>\n                                </i>\n                            </a>\n                            <i class="t" action-type="cancel-play-error">取消</i>\n                            <i class="line"></i>\n                        </span>\n                    </div>\n                    <span class="ptxt">'+e.name+"</span>\n                </li>";a.listHtml.push(i)}),setTimeout(function(){$("ul[node-type=video-error-recommended]").html(a.listHtml.join(""))},0)}},{key:"render",value:function(e){var n=parseInt(e.code,10)?e.code:"052112",t=e.msg?e.msg:"抱歉！视频播放失败";e.type?e.type:this.type;y="https://www.mgtv.com/feedback/?token="+function(){var e="";if("undefined"!=typeof window.honeyUuid)e=window.honeyUuid();else try{e="feedback-rom-"+String.fromCharCode(65+Math.ceil(25*Math.random()))+Math.ceil(1e9*Math.random())}catch(n){}return f=e}();var i=function(e,n){var t=void 0!==n?n.substring(n.indexOf("?")):location.search,i={};if(-1!=t.indexOf("?"))for(var a=0,c=t.substr(1).split("&");a<c.length;a+=1)i[c[a].split("=")[0]]=unescape(c[a].split("=")[1]);var s=i[e.toLowerCase()];return void 0===s?"":s}("cxid")||"",a=VIDEOINFO.vid||"",c=VIDEOINFO.plid||"",s='<svg viewBox="0 0 14 14">\n                            <g>\n                                <path class="p1" d="M11.5,1.2h-9C1.7,1.2,1,1.9,1,2.7v6.1c0,0.8,0.7,1.5,1.5,1.5h1.8l2.4,2.4c0.2,0.2,0.5,0.2,0.7,0l2.4-2.4h1.8\n                                    c0.8,0,1.5-0.7,1.5-1.5V2.7C13,1.9,12.3,1.2,11.5,1.2z M5.7,6.5C5.5,6.7,5.2,6.8,5,6.8c-0.1,0-0.3,0-0.4-0.1\n                                    c-0.1,0-0.2-0.1-0.3-0.2C4.1,6.3,4,6,4,5.8C4,5.6,4,5.5,4,5.4c0-0.1,0.1-0.2,0.2-0.3c0.4-0.4,1.1-0.4,1.4,0C5.9,5.3,6,5.5,6,5.8\n                                    C6,6,5.9,6.3,5.7,6.5z M9.7,6.5C9.5,6.7,9.3,6.8,9,6.8S8.5,6.7,8.3,6.5C8.1,6.3,8,6,8,5.8c0-0.1,0-0.3,0.1-0.4\n                                    c0-0.1,0.1-0.2,0.2-0.3C8.6,4.8,9,4.7,9.4,4.9c0.1,0,0.2,0.1,0.3,0.2C9.9,5.3,10,5.5,10,5.8C10,6,9.9,6.3,9.7,6.5z"/>\n                                <path d="M11.5,0.2h-9C1.1,0.2,0,1.3,0,2.7v6.1c0,1.4,1.1,2.5,2.5,2.5h1.4L6,13.4c0.3,0.3,0.6,0.4,1,0.4s0.8-0.2,1-0.4l2.1-2.1h1.4\n                                    c1.4,0,2.5-1.1,2.5-2.5V2.7C14,1.3,12.9,0.2,11.5,0.2z M13,8.8c0,0.8-0.7,1.5-1.5,1.5H9.7l-2.4,2.4c-0.2,0.2-0.5,0.2-0.7,0\n                                    l-2.4-2.4H2.5C1.7,10.3,1,9.6,1,8.8V2.7c0-0.8,0.7-1.5,1.5-1.5h9c0.8,0,1.5,0.7,1.5,1.5V8.8z"/>\n                                <path d="M4.3,5.1C4.2,5.2,4.1,5.3,4,5.4C4,5.5,4,5.6,4,5.8C4,6,4.1,6.3,4.3,6.5c0.1,0.1,0.2,0.2,0.3,0.2C4.7,6.8,4.8,6.8,5,6.8\n                                    c0.3,0,0.5-0.1,0.7-0.3C5.9,6.3,6,6,6,5.8c0-0.3-0.1-0.5-0.3-0.7C5.3,4.7,4.6,4.7,4.3,5.1z"/>\n                                <path d="M9.4,4.9C9,4.7,8.6,4.8,8.3,5.1C8.2,5.2,8.2,5.3,8.1,5.4C8.1,5.5,8,5.6,8,5.8C8,6,8.1,6.3,8.3,6.5C8.5,6.7,8.8,6.8,9,6.8\n                                    s0.5-0.1,0.7-0.3C9.9,6.3,10,6,10,5.8c0-0.3-0.1-0.5-0.3-0.7C9.6,5,9.5,4.9,9.4,4.9z"/>\n                            </g>\n                        </svg>',r='<div class="cebox" style="display:block" node-type="error-copyright">\n                <h2 class="tit">'+t+'</h2>\n                <p class="txt1 pbot25">错误码：<i>'+n+'</i>\n                    <i class="svgicon svg-fback">\n                        '+s+'\n                    </i>\n                    <a href="'+y+'" action-type="error-ui-feedback" target="_blank">立即反馈</a>\n                </p>\n                <p class="txt2">芒果APP扫码观看 ↓</p>\n                <p class="pic"><img width="115" height="115" src="'+("//pcweb.api.mgtv.com/qrcode/?source=pc2&from=pcweb&p="+a+"&plid="+c+"&cxid="+i)+'"></p>\n            </div>',o='<div class="cebox" node-type="error-region">\n                <h2 class="tit ptop80">'+t+'</h2>\n                <p class="txt1">错误码：<i>'+n+'</i> \n                    <i class="svgicon svg-fback">\n                        '+s+'\n                    </i>\n                    <a href="'+y+'" action-type="error-ui-feedback" target="_blank">立即反馈</a>\n                </p>\n            </div>',l='<div class="cebox" node-type="error-fail">\n                <h2 class="tit ptop30">'+t+'</h2>\n                <p class="txt1">错误码：'+n+'</p>\n                <p class="btn">\n                    <a href="javascript:;" action-type="video-ui-fail-btn">\n                        <i class="svgicon svg-ref">\n                            <svg viewBox="0 0 14 14">\n                                <path d="M13.5,6.5C13.2,6.5,13,6.7,13,7c0,3.3-2.7,6-6,6s-6-2.7-6-6s2.7-6,6-6c1.6,0,3.2,0.7,4.3,1.8c0.1,0.1,0.2,0.2,0.4,0.4H9.6\n            c-0.3,0-0.5,0.2-0.5,0.5s0.2,0.5,0.5,0.5h2.8c0.5,0,0.9-0.4,0.9-0.9V0.5c0-0.3-0.2-0.5-0.5-0.5s-0.5,0.2-0.5,0.5l0,2\n            c-0.1-0.2-0.3-0.3-0.3-0.4C10.7,0.8,8.9,0,7,0C3.1,0,0,3.1,0,7c0,3.9,3.1,7,7,7c3.9,0,7-3.1,7-7C14,6.7,13.8,6.5,13.5,6.5z"/>\n                            </svg>\n                        </i>刷新重试\n                    </a>\n                </p>\n                <p class="txt3">\n                    <i class="svgicon svg-fback">\n                    '+s+'\n                    </i>\n                    <a href="'+y+'" action-type="error-ui-feedback" target="_blank">反馈问题获得帮助</a>\n                </p>\n            </div>',d='\n                <div class="cebox" node-type="error-unline" style="display:block;">\n                    <h2 class="tit">'+t+'</h2>\n                    <p class="txt1">错误码：<i>'+n+'</i> \n                        <i class="svgicon svg-fback">\n                            '+s+'\n                        </i>\n                        <a href="'+y+'" action-type="error-ui-feedback" target="_blank">立即反馈</a>\n                    </p>\n                    <div class="celist">\n                <ul class="clearfix" node-type="video-error-recommended"></ul>\n            </div>\n                    </div>',p="",v=function(){clearTimeout(u),u=setTimeout(function(){window.location.href=h},1e4)};switch(n){case 40002:this.getList(),p=d,v();break;case 40005:p=o;break;case 40004:p=r;break;case 40001:this.getList(),p=d,v();break;case 40003:p=o;break;default:p=l}$("div[node-type=error-fail]").html(p).show()}},{key:"hide",value:function(){this.$errorFail.hide()}},{key:"getList",value:function(){var n=this,e=a("__MQGUID")||"",t=a("__STKUUID")||"",i={rt:"v",c:111,guid:e,uid:a("uuid")||"",cookie:t,limit:6};$.ajax({type:"get",url:"//rc.mgtv.com/pc/ranklist",data:i,dataType:"jsonp",jsonpCallback:"rc_ranklist_0",success:function(e){e&&200==e.code&&e.data&&e.data.length&&(n.creatList(e),o=e,n.sendData(e,"hotpv"))}})}}]),n}();e.videoErrorUI=window.VIDEOERRORUITIPS=new n});