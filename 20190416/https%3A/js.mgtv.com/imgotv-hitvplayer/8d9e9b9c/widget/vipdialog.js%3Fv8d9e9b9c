"use strict";honey.def("lib:jquery",function(f){var D="//i.mgtv.com",O=101,x=102,N=200,E="page="+encodeURIComponent(window.location.href),q=0,i=3==VIDEOINFO.rid?"本片":"本节目",V="",F="";F=!VIDEOINFO.bdid||""===VIDEOINFO.bdid&&0===VIDEOINFO.bdid?(VIDEOINFO.cid||"")+"_"+(VIDEOINFO.vid||""):"0_"+(VIDEOINFO.bdid||"")+"_"+(VIDEOINFO.vid||"");var S=3,C=3,j='<div class="c-player-paytips {{isshow}}">\n        <div class="c-player-paytips-wrapper">\n            <div class="c-player-paytips-title">\n                <i class="warning"></i><span>{{tips}}</span>\n            </div>\n            <div class="c-player-paytips-content">\n                \x3c!-- 左侧 --\x3e\n                <div class="c-player-paytips-primary" bosszone="{{boss}}">\n                    {{{bottom}}}\n                    <p class="c-player-paytips-adds">\n                        {{{text}}}\n                    </p>\n                    \x3c!-- 分割线 --\x3e\n                    <div class="c-player-paytips-divding"></div>\n\n                    \x3c!-- 特权 --\x3e\n                    <div class="c-player-paytips-welfare">\n                        <h5 class="title">开通会员享特权</h5>\n                        <ul class="list">\n                            <li class="c-player-paytips-welfare-listitem"><i class="welfare-1"></i><span>观影无广告</span></li>\n                            <li class="c-player-paytips-welfare-listitem"><i class="welfare-2"></i><span>专属片库</span></li>\n                            <li class="c-player-paytips-welfare-listitem"><i class="welfare-3"></i><span>移动端覆盖</span><p class="listitem-tips">\n                                打开芒果APP，抢海量会员大礼包！<a href="#" node-type="guide-app" data-pos="8">立即领取</a>\n                            </p></li>\n                            <li class="c-player-paytips-welfare-listitem"><i class="welfare-4"></i><span>赠送观影券</span></li>\n                        </ul>\n                    </div>\n                </div>\n                \x3c!-- 右侧 --\x3e\n                <div class="c-player-paytips-sidebar">\n                    <span class="u-paycode">\n                        <span class="u-pic paycode-qrcode" node-type="paycode-qrcode"><img class="pay-qrcode-info" node-type="pay-qrcode-info" style="display:none" src="" alt="我是二维码"></span>\n                        <i class="u-mask refresh-qrcode" node-type="refresh-qrcode" action-type="qrcode-u-mask"><i class="u-refresh"></i></i>\n                    </span>\n                    <p class="u-tips">\n                        扫一扫，开通会员\n                    </p>\n                </div>\n            </div>\n            <div class="c-player-paytips-reload">\n                开通后请登录并刷新页面观看\n            </div>\n        </div>\n    </div>',o='<div class="c-player-windowmask" node-type="c-player-windowmask"></div>\n        <div class="c-player-1080p" node-type="hd-video-box" bosszone="tovip">\n            <div class="c-player-1080p-wrapper">\n                <div class="c-player-paytips-title">\n                    会员尊享蓝光极致清晰\n                </div>\n                <div class="c-player-paytips-content">\n                    \x3c!-- 左侧 --\x3e\n                    <div class="c-player-paytips-primary">\n                        <a class="c-player-paytips-button open-vip-dialog" unid="'+F+'" clocation="61001" ftype="10"  target="_blank" type="11"\' href="//order.mgtv.com/pay/pc/index.html?unid='+F+'&ftype=10&clocation=61001">\n                            开通会员免费观看\n                            <i class="price" style="display:{{show}}">{{buy_tips}}</i>\n                        </a>\n                        <p class="c-player-paytips-adds">开通后请<a class="u-reload" href="javascript:;">登录</a>并<a class="u-reload" href="javascript:;">刷新</a>页面观看</p>\n                        \x3c!-- 分割线 --\x3e\n                        <div class="c-player-paytips-divding"></div>\n                        \x3c!-- 特权 --\x3e\n                        <div class="c-player-paytips-welfare">\n                            <h5 class="title">开通会员享特权</h5>\n                            <ul class="list">\n                                <li class="c-player-paytips-welfare-listitem"><i class="welfare-1"></i><span>观影无广告</span></li>\n                                <li class="c-player-paytips-welfare-listitem"><i class="welfare-2"></i><span>专属片库</span></li>\n                                <li class="c-player-paytips-welfare-listitem"><i class="welfare-3"></i><span>移动端覆盖</span><p class="listitem-tips">\n                                打开芒果APP，抢海量会员大礼包！<a href="#">立即领取</a>\n                            </p></li>\n                                <li class="c-player-paytips-welfare-listitem"><i class="welfare-4"></i><span>赠送观影券</span></li>\n                            </ul>\n                        </div>\n                    </div>\n                    \x3c!-- 右侧 --\x3e\n                    <div class="c-player-paytips-sidebar">\n                        <span class="u-paycode">\n                            <span class="u-pic paycode-qrcode" node-type="paycode-qrcode"><img class="pay-qrcode-info" node-type="pay-qrcode-info" style="display:none" src="" alt="我是二维码"></span>\n                            <i class="u-mask refresh-qrcode" node-type="refresh-qrcode" action-type="qrcode-u-mask"><i class="u-refresh"></i></i>\n                        </span>\n                        <p class="u-tips">扫一扫，开通会员</p>\n                    </div>\n                </div>\n                <div class="c-player-paytips-divding"></div>\n                <div class="c-player-paytips-status" style="display:{{login}}">\n                    您还未登录，请<a href="#" action-type="hd-video-login">登录</a>\n                </div>\n            </div>\n            <span class="c-player-paytips-close" action-type="hd-video-closed">关闭</span>\n        </div>',T={isvip:['<em class="noad">全站畅享大片+无广告</em>'].join(""),vip_tips:"开通会员可以免费观看"+i,vip_pay_tips:"该片为付费点播影片,您享有优惠特权",pay_tips:"该片为付费点播影片,开通会员享优惠",no_ticket:"你的观影券已经用完,续费会员可以获赠观影券免费看",is_ticket:"你可以使用观影券继续观看影片",vip_no_ticket:"续费会员用券免费看",allpay:"该片仅限付费点播，购买后可观看完整视频",play_button:"购买本片"},a=function(i){var e=document.getElementById(i);return-1!=navigator.appName.indexOf("Microsoft")?e:0<e.getElementsByTagName("embed").length?e.getElementsByTagName("embed")[0]:e};function H(i){var e=new RegExp("(?:^|;+|\\s+)"+i+"=([^;]*)"),a=document.cookie.match(e);return a?a[1]:""}var M=null,e=f.vipDialog=function(i){this.parent_ele=$(i),this.id="vipDialog_"+100*Math.random()>>0};e.prototype.open=function(i){var p=this,s="",e=i.info,n=i.user;q=1==n.isvip?e.price_vip||0:e.price_novip||0,e.price_vip||0;e.price_novip;var o="尊敬的会员",c="尊敬的用户",a={play_tips:"应版权方要求该片付费播放",buy_title:"",play_link:"购买本片",play_tips2:"会员每月获取2个张观音券",preview_tips:"免费试看5分钟",play_button:"购买本片",vip_promotion:"开通会员"};e&&e.tips&&(a={play_tips:e.tips.play_tips,buy_title:e.tips.buy_title,play_link:e.tips.play_link,play_tips2:e.tips.play_tips2,preview_tips:e.tips.preview_tips,play_button:e.tips.play_button,vip_promotion:e.tips.vip_promotion},V=e.tips.vip_promotion||V);var t=0,l=""==V?"none":"block";T.vip_tips=a.play_tips,T.play_button=a.play_button;var r,d,y,v,u=function(i,e){return['<a class="c-player-paytips-button open-vip-dialog" unid="'+F+'"  clocation="60303" ftype="3" type="1" target="_blank" href="//order.mgtv.com/pay/pc/index.html?unid='+F+"&ftype="+S+"&clocation="+C+'">'+a.play_button+'   <i class="price" node-type="promotion-info" style="display: '+l+'">'+V+"</i> </a>"].join("")},m=function(){return['<em class="tickets">'+a.play_tips2+'</em><a class="anotherway" type="2" target="_blank" href="//order.mgtv.com/pc/order?videoId='+VIDEOINFO.vid+"&"+E+"&unid="+F+"&ftype="+S+'&clocation=4">'+a.play_link+"</a>"].join("")};if("live"==e.paymark&&(n.purview===O&&n.purview==x||(F=e.channelId||"",S=4,C=1,s=Mustache.render(j,{bottom:u(),text:3==VIDEOINFO.rid?m():T.isvip,tips:"开通会员免费观看本直播",nickname:1==n.isvip?o:c,boss:"tovip"}),p.buildDialog(s)),t=10,""==H("HDCN")&&!0),"1"==e.paymark&&(n.purview===O&&n.purview==x||(s=Mustache.render(j,{bottom:u(),text:3==VIDEOINFO.rid?m():T.isvip,tips:T.vip_tips,nickname:1==n.isvip?o:c,boss:"tovip"}),p.buildDialog(s)),t=1,""==H("HDCN")&&!0),"2"==e.paymark){var _=['<a class="c-player-paytips-button" href="//order.mgtv.com/pc/order?videoId='+VIDEOINFO.vid+"&"+E+"&unid="+F+"&ftype="+S+'&clocation=4" target="_blank" type="5">'+T.play_button+"</a>"].join(""),f=['<em class="tickets">'+a.play_tips2+"</em>"].join(""),w=T.vip_tips;1==n.isvip&&(w=T.vip_pay_tips),n.purview!=O&&n.purview==N||(s=Mustache.render(j,{bottom:_,price:q,text:f,tips:w,nickname:1==n.isvip?o:c,boss:"tovip",isshow:"c-player-paytips-nowxpay"}),p.buildDialog(s)),t=5,""==H("HDCN")&&!0}if("3"==e.paymark){var b=['<a class="c-player-paytips-button" type="3" action-type="determine">确认使用1张观影券</a>'].join(""),h=['<a class="c-player-paytips-button" type="4" target="_blank" href="//order.mgtv.com/pay/pc/index.html?unid='+F+"&ftype="+S+'&clocation=3">续费会员用券免费看</a>'].join("");['<em class="tickets">原价'+q+"元</em>"].join("");if(""==n.uuid)s=Mustache.render(j,{bottom:u(),text:m(),tips:T.vip_tips,nickname:1==n.isvip?o:c,boss:"tovip"}),p.buildDialog(s);else{var g=function(t){$.getJSON(D+"/coupon/count?callback=?",function(i,e){if(i&&200==i.err_code){var a=i.data.count;a,i&&t.call(this,i)}})};if(1==n.isvip){g(function(i){var e=i.data.count,a=0<e,t=['<em class="tickets">您目前有<b>'+e+'张</b>观影券</em><em class="anotherway">48小时内随意观看</em>'].join("");s=Mustache.render(j,{bottom:a?b:h,text:a?t:m(),tips:a?T.is_ticket:T.no_ticket,nickname:1==n.isvip?o:c,boss:"tovip"}),p.buildDialog(s)})}else{g(function(i){var e=i.data.count,a=0<e,t=['<em class="tickets">您目前有<b>'+e+'张</b>观影券</em><em class="anotherway">48小时内随意观看</em>'].join("");s=Mustache.render(j,{bottom:a?b:u(),text:a?t:m(),tips:a?T.is_ticket:T.vip_tips,nickname:1==n.isvip?o:c,boss:"tovip"}),p.buildDialog(s)})}}t=3}try{M=new STK.start;var k={act:"tovippv",vid:VIDEOINFO.vid,curl:"",type:t};r=k,(d=navigator).userAgent.toLowerCase(),d.platform.toLowerCase(),y=/iPad/i.test(d.userAgent)?"4.1.11":"1.1.11",v={act:r.act,bid:y,vid:window.VIDEOINFO.vid||"",plid:window.VIDEOINFO.cid||"",cid:window.VIDEOINFO.rid||"",ext1:3,ext2:"",ext3:r.type,cf:window.VIDEOINFO.clip_type||"",ch:""},M.pageEvent(v,"//vip.log.mgtv.com/audit_pc.html")}catch(I){}},e.prototype.buildDialog=function(i){this.parent_ele.append(i),c()},e.prototype.destroy=function(){this.parent_ele.find(".c-player-paytips").remove()},$("body").on("click","a[action-type=determine]",function(i){i.preventDefault(),$.getJSON(D+"/coupon/use?&callback=?",{video_id:VIDEOINFO.vid,clip_id:VIDEOINFO.cid},function(i,e){i&&200==i.err_code?window.location.reload():alert("非常抱歉,数据出现异常,请重新尝试")})}),$("body").on("click",".trigger-login",function(i){!0}),$("body").on("click","a[action-type=hd-video-login]",function(i){if(""==H("HDCN")&&f.loginDialog)return f.loginDialog(),!1}),$("body").on("click","span[action-type=hd-video-closed],div[node-type=c-player-windowmask]",function(i){$("div[node-type=hd-video-box],div[node-type=c-player-windowmask]").hide();try{a("hunantv-player-1").resume()}catch(e){}});var w=null,c=function(){var i=navigator,e=(i.userAgent.toLowerCase(),i.platform.toLowerCase(),/iPad/i.test(i.userAgent)?"4.1.11":"1.1.11"),a=$("span[node-type=paycode-qrcode]"),t=$("img[node-type=pay-qrcode-info]"),p=$("i[node-type=refresh-qrcode]");p.hide();var s="";s=window.localStorage&&window.localStorage.getItem("__STKUUID")||H("__STKUUID");var n="pcweb",o=F,c=S,l=7,r=e,d=""==H("HDCN")?"":H("HDCN").match(/\b\w+\b/g)[0],y=H("sessionid")||"",v=(H("uuid"),s),u=($.now(),H("vipStatus")||""),m={invoker:"pcweb",version:"5.0.0.1",ticket:""==H("HDCN")?"":H("HDCN").match(/\b\w+\b/g)[0],product_id:0,product_type:1,product_level:3,action:4,voucher_id:0,ip:"127.0.0.1",mac:""==H("__STKUUID")?"00000000-0000-0000-0000-000000000000":H("__STKUUID"),cxid:H("sessionid"),t:Math.round((new Date).getTime()/1e3),os:navigator.platform?navigator.platform:"Win32",scene_code:"system",auto_buy:0},_='//as.mgtv.com/client/qrcode/getqrcodeinfo?data={"bid":"'+r+'","ftype":"'+c+'","clocation":"'+l+'","uvip":"'+u+'","isscan":"1","unid":"'+o+'","cookie":"'+v+'","sessionid":"'+y+'","ticket":"'+d+'","invoker":"'+n+'"}&'+$.param(m)+"&sign=11";!isNaN(f.ie)&&f.ie<9?t.attr("src",_).show():$.ajax({url:_,type:"GET",dataType:"jsonp",success:function(i){i&&"200"==i.status?(a.html(""),a.qrcode({render:"canvas",width:110,height:110,text:i.msg.url})):p.show()}}),w=setTimeout(function(){p.show()},18e5)};$("body").on("click","i[action-type=qrcode-u-mask]",function(i){clearTimeout(w),c()}),$(document).on("HONEY-LOGIN-SUCCESS",function(){1==H("vipStatus")&&window.location.reload(),c();try{a("hunantv-player-1").OnUserLogin()}catch(i){}}),window.FLASH_MGTV_VIDEOHD=function(i){var e=""==i?"none":"block",a=""==H("HDCN")?"block":"none",t=H("vipStatus")||0,p=Mustache.render(o,{buy_tips:i,show:e,login:a});!0,S=10,0<$("div[node-type=hd-video-box]").length?$("div[node-type=hd-video-box],div[node-type=c-player-windowmask]").show():$("#mgtv-player-wrap").append(p),c();try{M=new STK.start;var s={act:"dialogpv",dname:"pc_dialogpv_player_blue",ptype:3,uvip:t,unid:F,dmtype:"",bid:"1.1.11"};M.pageEvent(s,"//vip.log.mgtv.com/audit_vip_bhv.html")}catch(n){}}});