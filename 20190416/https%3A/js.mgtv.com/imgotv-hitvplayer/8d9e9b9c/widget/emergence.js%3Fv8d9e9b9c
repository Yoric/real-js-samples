!function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof exports?module.exports=t:e.emergence=t(e)}(this,function(e){"use strict";var t,u,i,r,s,m,h,g,w,p,c={},d=function(){},a=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|playbook|silk/i.test(navigator.userAgent)},v=function(e){for(var t=e.offsetWidth,n=e.offsetHeight,o=0,i=0;isNaN(e.offsetTop)||(o+=e.offsetTop),isNaN(e.offsetLeft)||(i+=e.offsetLeft),null!==(e=e.offsetParent););return{width:t,height:n,top:o,left:i}},l=function(e){if(null===e.offsetParent)return!1;var t,n,o,i,r=v(e),s=((t=u)!==window?(n=t.clientWidth,o=t.clientHeight):(n=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight),{width:n,height:o}),c=(i=u)!==window?{x:i.scrollLeft+v(i).left,y:i.scrollTop+v(i).top}:{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop},d=r.width,a=r.height,l=r.top,f=r.left;return l+a*m<c.y-w+s.height&&c.y+h<l+a-a*m&&f+d*m<c.x-g+s.width&&c.x+p<f+d-d*m},f=function(){t||(clearTimeout(t),t=setTimeout(function(){c.engage(),t=null},i))};return c.init=function(e){var t,n,o=function(e,t){return parseInt(e||t,10)};u=(e=e||{}).container||window,r="undefined"==typeof e.reset||e.reset,s="undefined"==typeof e.handheld||e.handheld,i=o(e.throttle,250),t=e.elemCushion,n=.15,m=parseFloat(t||n),h=o(e.offsetTop,0),g=o(e.offsetRight,0),w=o(e.offsetBottom,0),p=o(e.offsetLeft,0),d=e.callback||d,"querySelectorAll"in document?(a()&&s||!a())&&(document.documentElement.className+=" emergence",window.addEventListener?(window.addEventListener("load",f,!1),u.addEventListener("scroll",f,!1),u.addEventListener("resize",f,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&f()}),u.attachEvent("onscroll",f),u.attachEvent("onresize",f))):console.log("Emergence.js is not supported in this browser.")},c.engage=function(){for(var e,t=document.querySelectorAll("[data-emergence]"),n=t.length,o=0;o<n;o++)e=t[o],l(e)?(e.setAttribute("data-emergence","visible"),e.className=e.className,d(e,"visible")):!0===r?(e.setAttribute("data-emergence","hidden"),e.className=e.className,d(e,"reset")):!1===r&&d(e,"noreset");n||c.disengage()},c.disengage=function(){window.removeEventListener?(u.removeEventListener("scroll",f,!1),u.removeEventListener("resize",f,!1)):(u.detachEvent("onscroll",f),u.detachEvent("onresize",f)),clearTimeout(t)},c});