"use strict";honey.def("lib:jquery",function(t){var a="";if(VIDEOINFO.uploadid?(a=VIDEOINFO.uploadid||"",$('.v-panel-v5 [node-type="v-panel-author"]').remove()):a=VIDEOINFO.puuid||"",!a||0==a.length)return!1;var u=$("div[node-type=v-panel-author]"),i=$("div[node-type=v-rightside-author]"),d='<a class="u-avt" href="{{url}}" target="_blank">\n\t        <img class="u-pic" src="{{photo}}" alt="">\n\t        <i class="u-vip"></i>\n\t    </a>\n\t    <div class="u-author">\n\t        <a class="u-name" target="_blank" href="{{url}}">{{columnName}}</a>\n\t    </div>\n\t    <a class="u-follow {{style}}" href="{{url}}" target="_blank"><em>{{follow}} {{cunt}}</em></a>',o=l("uuid")||"",n=""==l("HDCN")?"":l("HDCN").match(/\b\w+\b/g)[0],s=1;function l(t){var e=new RegExp("(?:^|;+|\\s+)"+t+"=([^;]*)"),o=document.cookie.match(e);return o?o[1]:""}var r=function(t,e){$.ajax({url:t,type:"GET",dataType:"jsonp"}).done(function(t){t&&e.call(this,t)}).fail(function(){console.log("data error")})},c=function(t){return t<=1e4?t+"人":(t/1e4).toFixed(1)+"万人"},f=function(t,e){e.data&&e.data.isFollowed;var o=t.data,n="去饭团",a="//www.mgtv.com/fantuan/"+o.uid+"/list.html";s=parseInt(o.fans,10),1==VIDEOINFO.puuid_type&&(a="https://www.mgtv.com/u/"+VIDEOINFO.puuid+"/d.html",n="去主页");var l={photo:o.photo,columnName:o.nickName,cunt:"",style:"no-follow",follow:n,url:a};1==VIDEOINFO.puuid_type||3==VIDEOINFO.puuid_type||2==VIDEOINFO.puuid_type?(u.html(Mustache.render(d,l)).show(),i.html(Mustache.render(d,l)).show()):(u.hide(),i.hide()),$("[node-type=details-line]").show()};r("//mguser.api.max.mgtv.com/artist/getArtistInfo?uid="+a,function(e){""!=l("HDCN")?e&&0==e.code?r("//feed.bz.mgtv.com/artist/isfollowed?uid="+o+"&artistId="+a+"&token="+n,function(t){t&&0==t.code?f(e,t):f(e)}):$("[node-type=details-line]").hide():f(e,{data:{isFollowed:!1}})});i.on("mouseenter",".u-followed",function(t){$(this)}),i.on("mouseleave",".u-followed",function(t){$(this).find("em").html("已关注 "+c(s))}),i.on("click",".u-followed",function(t){t.preventDefault();var e=$(this),o=l("uuid")||"",n=""==l("HDCN")?"":l("HDCN").match(/\b\w+\b/g)[0];s=--s,i.find(".u-count").html(c(s)),e.removeClass("u-followed"),e.addClass("no-follow"),e.find("em").html("关注 "+c(s)),r("//feed.bz.mgtv.com/fans//removeFollow?uid="+o+"&artistId="+a+"&token="+n,function(t){})})});