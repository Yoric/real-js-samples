webpackJsonp([53],{1342:function(t,e,o){t.exports={controllerViews:{CanvasStickyShareButtons:o(3279)},meta:{dependencies:["tdv2-applet-canvass","tdv2-applet-follow","react-share-buttons"],langBundle:"tdv2-applet-content-canvas"}}},1724:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(o(11)),i=n(o(27)),r={article:"story"},a="undefined"!=typeof window;e.default={isLazyLoad:function(t,e){return e>=0&&t<e},isSidekick:function(t){return t&&-1!==t.indexOf("SIDEKICK")},updateQueryParam:function(t,e){e=e||{};var o=i.default.parse(t,!0);return o.search=void 0,o.query=Object.assign({},o.query,e),i.default.format(o)},getLoopIndex:function(t,e,o){if(!o)return t+e;var n=(t+e)%o;return n<0?n+o:n},getRelatedUuids:function(t,e,o){var n=e.length,s=[];if(0===n||0===t||o>=n)return s;for(var i=o;s.length<t&&(i=++i%n)!==o;)e[i]&&e[i].uuid&&s.push(e[i].uuid);return s},getResizedImage:function(t,e){return t=t||{},t[e]||t.original},getCommentString:function(t){if(!t)return"";return t>=1e6?parseFloat((t/1e6).toFixed(2))+"m":t>=1e5?parseFloat((t/1e3).toFixed(0))+"k":t>=1e3?parseFloat((t/1e3).toFixed(1))+"k":t.toString()},getBaseI13n:function(t,e,o){var n=t.type,s={itc:0,g:t.uuid||t.id};this.isSidekick(o)?(s.cat=o,s.ccode=t.ccode,s.ct=r[n]||n,s.subsec="sentiment",s.sec="sdkick"):s.sec="jtc";var i=this.parseUrl(t.link||t.url||"");i&&(s.tar=i.host,s.tar_uri=i.pathname);var a=t.title;return a&&(s.slk=a),s.cpos=e+1,s.pos=e+1,s},getTypeIcon:function(t){var e=["video","slideshow"],o=t.type;return e.indexOf(o)>=0?o:""},getSentimentsRatio:function(t,e,o){if(void 0===t||void 0===o||void 0===e)return null;var n=t+o+e;if(!n)return null;var s=Math.round(t/n*100),i=Math.round(o/n*100);return{negative:s,neutral:i,positive:100-s-i}},parseUrl:function(t){if(t=t.split("?")[0]){if("/"===t.charAt(0))return{host:a?window.location.host:"",pathname:t,protocol:a?window.location.protocol:""};var e=t.split("/");return{host:e[2],pathname:"/"+e.slice(3).join("/"),protocol:e[0]}}return null},processStreamData:function(t){var e=t.get("comments")||s.default.Map(),o=e.toJS(),n=t.get("images")||s.default.Map();return{bypassModal:t.get("bypassModal"),ccode:t.get("ccCode"),commentCount:parseInt(o.totalCount,10)||0,imageSize:n.toJS(),link:t.get("link")||"",title:t.get("title")||"",topRatedComments:o.topRated||[],total_negative_comments:parseInt(o.negativeCount,10)||0,total_neutral_comments:parseInt(o.neutralCount,10)||0,total_postive_comments:parseInt(o.positiveCount,10)||0,type:t.get("subtype")||t.get("type"),uuid:t.get("id")||""}}},t.exports=e.default},1759:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e,o){c("expand",e);var n=e&&(e.id||e.instanceId);if(!n)return o&&o(new Error("expandMessages requires an instanceId"));var s=t.session.query,a=t.getStore(r.default).getState(),p=t.getStore(i.default),f=p.getCommentsState(n),h=f.get("messageList")||u.default.List(),m={id:n,instanceId:n,isExpanded:(0,l.default)(e,["expanded"],!0)};if(!m.isExpanded||h.size>0||m.isExpanded===f.get("expanded"))t.dispatch("COMMENTS_EXPAND",m),o&&o();else{var g={context:e.uuid||e.context||s.context||"YahooGlobal",contextDisplayText:e.contextDisplayText||f.get("contextDisplayText"),contextUrl:e.contextUrl||f.get("contextUrl"),expanded:!0,index:e.nextIndex||null,instanceId:n,lang:a.lang,messagesPerPage:a.messagesPerPage,namespace:e.namespace||f.get("namespace")||a.namespace,region:a.region,selectedTags:e.selectedTags,sortBy:e.sortBy||f.get("sortBy"),tagsAnd:e.tagsAnd,tagsOr:e.tagsOr,oauthConsumerKey:a.oauthConsumerKey,oauthConsumerSecret:a.oauthConsumerSecret};t.executeAction(d.default,g,function(e,s){p.getCommentsState(n).get("error")||t.dispatch("COMMENTS_EXPAND",m),o&&o()})}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(o(303)),r=n(o(117)),a=n(o(3)),l=n(o(2)),u=n(o(11)),d=n(o(531)),c=(0,a.default)("Canvass:actions:expandMessages");s.displayName="expandMessages",e.default=s,t.exports=e.default},1931:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(o(11));e.default=(0,o(297).createImmutableStore)({storeName:"FollowContentStore",statics:{handlers:{SET_CONTENT_FOLLOW_STATE:"setContentState"}},initialize:function(){this._state=n.default.fromJS({knownContentState:{}})},setContentState:function(t){if(t){var e=t.uuids||[],o=t.followedContent||[],s=t.overrideState,i=n.default.Map(),r=this;e.forEach(function(t){var e;e=-1!==o.indexOf(t)||!s&&r._state.getIn(["knownContentState",t])?1:0,i=i.set(t,e)}),r.setState(r._state.set("knownContentState",r._state.get("knownContentState").merge(i)),null,{type:"SET_CONTENT_FOLLOW_STATE",uuids:e,action:t.action})}},getContentState:function(t){return this._state.getIn(["knownContentState",t])||0},getContentStateMap:function(){return this._state.get("knownContentState")}}),t.exports=e.default},1977:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(o(1)),i=n(o(0)),r=n(o(4)),a="undefined"!=typeof window?window:null;e.default=(0,r.default)({autobind:!1,displayName:"Flyout",propTypes:{align:i.default.oneOf(["left","right"]),alignToViewport:i.default.bool,componentProps:i.default.object.isRequired,fixedToParent:i.default.bool,flyoutWidth:i.default.number,flyoutHeight:i.default.number,onMouseEnter:i.default.func,onMouseLeave:i.default.func,parentNode:i.default.object.isRequired,relativeToParent:i.default.bool,triangleFillColor:i.default.string},getDefaultProps:function(){return{align:"right",Component:null,componentProps:{},flyoutWidth:370,flyoutHeight:482,parentNode:null,relativeToParent:!1,triangleFillColor:"#fff"}},calculatePositions:function(){var t=this.props;if(!a)return null;var e=t.flyoutHeight,o=t.parentNode&&t.parentNode.getBoundingClientRect();if(!o)return null;var n=o.height/2,s=0;t.fixedToParent&&(s=o.top-a.innerHeight+e);var i=a.innerHeight-o.top;if(t.alignToViewport&&i<e){var r=this.getViewPortAlignedPos(i,s,e,o.height);n=r.arrow,s=r.flyout}return"left"===t.align?this.getLeftAlignedFlyoutStyles(n,s,o.top,o.left):"right"===t.align?this.getRightAlignedFlyoutStyles(n,s,o.top,o.right):null},getLeftAlignedFlyoutStyles:function(t,e,o,n){var s=this.props,i=-(s.flyoutWidth+s.paddingRight);return s.relativeToParent||(e+=o,i+=n),{arrowStyles:{left:s.flyoutWidth+1,top:t,transform:"rotate(180deg)"},wrapperStyles:{left:i,top:e}}},getRightAlignedFlyoutStyles:function(t,e,o,n){var s=this.props,i=-(s.flyoutWidth+s.paddingLeft);return s.relativeToParent||(e+=o,i=-(i+n)),{arrowStyles:{right:s.flyoutWidth-1,top:t},wrapperStyles:{right:i,top:e}}},getViewPortAlignedPos:function(t,e,o,n){var s=t<n/2,i=o-t;return{arrow:s?i:i+n/2,flyout:-i}},render:function(){var t=this.props,e=t.Component;if(!e||!t.parentNode)return null;var o=this.calculatePositions();if(!o)return null;var n={height:t.flyoutHeight,width:t.flyoutWidth,paddingTop:t.paddingTop||0,paddingBottom:t.paddingBottom||0,paddingLeft:t.paddingLeft||0,paddingRight:t.paddingRight||0},i=o.arrowStyles,r=t.componentProps,a=Object.assign({},n,o.wrapperStyles),l={borderRightColor:t.triangleFillColor};return s.default.createElement("div",{className:"Pos(a)",style:a,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave},s.default.createElement(e,r),s.default.createElement("div",{className:"Z(3) C(t) Pos(a) W(0) H(0) Bds(s) Bdtc(t) Bdbc(t) Bdendc($c-fuji-grey-e) Bdendw(12px) Bdtw(12px) Bdbw(12px)",style:i},s.default.createElement("div",{className:"Pos(r) Scale(1.4) T(-9px) W(0) H(0) Bdtc(t) Bdbc(t) Bds(s) Bdtw(9px) Bdbw(9px) Bdendw(9px)",style:l})))}}),t.exports=e.default},1978:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(o(5)),i=n(o(1291)),r=n(o(16)),a=n(o(1931)),l=n(o(1292)),u=n(o(0)),d=n(o(1)),c=n(o(4)),p=n(o(1979)),f=(0,c.default)({displayName:"FollowContent",autobind:!1,mixins:[r.default],statics:{componentConfig:{name:"componentFollow"},storeListeners:[a.default]},contextTypes:{session:u.default.object},propTypes:{afterClick:u.default.func,buttonSize:u.default.number,category:u.default.string,className:u.default.string,colors:u.default.object,componentConfig:u.default.object,enableHoverColor:u.default.bool,enableHoverColorTransition:u.default.bool,enableRoundShape:u.default.bool,enableTooltip:u.default.bool,openDirection:u.default.oneOf(["left","right","up","down"]),fromSlingstone:u.default.bool,iconClasses:u.default.string,iconSize:u.default.number,intl:o(36).intlShape,overrideTooltipClasses:u.default.string,persistTooltip:u.default.bool,uuid:u.default.string.isRequired,ylkData:u.default.object},getDefaultProps:function(){return{category:"",className:"",colors:{initial:"#c8c8cc",hovered:"#ff333a",selected:"#ff4d53"},enableHoverColor:!1,enableHoverColorTransition:!1,enableTooltip:!1,enableRoundShape:!1,buttonSize:40,iconClasses:"",iconSize:15,overrideTooltipClasses:"",persistTooltip:!1,openDirection:"left",ylkData:{}}},getInitialState:function(){return this.followContentStore=this.getStore(a.default),{contentState:this.followContentStore.getContentState(this.props.uuid),hover:this.props.persistTooltip}},onChange:function(){this._updateContentState(this.props.uuid)},shouldComponentUpdate:function(t,e){return this.state.hover!==e.hover||this.state.contentState!==e.contentState},componentWillReceiveProps:function(t){this.props.uuid!==t.uuid&&this._updateContentState(t.uuid)},componentWillMount:function(){var t=this,e=t.constructor.prototype;t.onChange=e.onChange.bind(t),t.handleClick=e.handleClick.bind(t),(t.props.enableHoverColor||t.props.enableTooltip)&&(t.onMouseEnter=e.onMouseEnter.bind(t),t.onMouseLeave=e.onMouseLeave.bind(t))},handleClick:function(t){t.preventDefault(),this.executeAction(p.default,{uuid:this.props.uuid,state:this.state.contentState,category:this.props.category,fromSlingstone:this.props.fromSlingstone,config:this.props.componentConfig||{}})},onMouseEnter:function(){this.setState({hover:!0})},onMouseLeave:function(){this.setState({hover:!1}),this.props.afterClick&&this.props.afterClick()},shouldSetupMouseListeners:function(){return!this.props.persistTooltip&&(this.props.enableHoverColor||this.props.enableTooltip)},render:function(){var t=this.props.openDirection,e={"aria-label":this._getButtonText(),className:(0,s.default)(this.props.className,"NoJs_D(n) Bd(0) M(0) P(0) Va(m)",{"desktop_W(100%) Pos(r)":this.props.enableTooltip&&"down"!==t,"Trs(hoverColorTransition) Cur(p)":this.props.enableHoverColorTransition,"Bdrs(50%)":this.props.enableRoundShape}),style:this._getStyle(),href:"#",i13nModel:Object.assign({},this.props.ylkData,{dcl:this.state.contentState?"pos-neu":"neu-pos",elm:"like",itc:1,slk:"like"}),onClick:this.handleClick};return this.shouldSetupMouseListeners()&&(e.onMouseEnter=this.onMouseEnter,e.onMouseLeave=this.onMouseLeave),this.props.uuid&&!this.context.session.isLightWeightBrowser?d.default.createElement(o(20).I13nButton,e,this._renderIcon(),this._renderTooltip()):null},_getButtonText:function(){var t;return t="1"!==this.context.session.dimensions.authed?"SIGN_IN_TO_LIKE":this.state.contentState?"UNDO":"LIKE_THIS_TOPIC",this.props.intl.formatMessage({id:t})},_getStyle:function(){var t;return this.props.enableRoundShape&&(t={},t.height=t.width=this.props.buttonSize+"px",t.backgroundColor=this.props.enableHoverColor&&this.state.hover?this.props.colors.hovered:this.props.colors.selected),t},_renderIcon:function(){var t=this.state.contentState||this.state.hover?this.props.colors.hovered||this.props.colors.selected:this.props.colors.initial;return this.props.enableRoundShape&&(t=this.props.colors.initial),d.default.createElement(o(30).Icon,{asset:this.state.contentState?l.default:i.default,className:this.props.iconClasses,color:t,height:this.props.iconSize})},_renderTooltip:function(){var t=this.props.openDirection;if(this.props.enableTooltip&&this.state.hover){var e=this.props.overrideTooltipClasses||(0,s.default)("Bdc($c-fuji-grey-c) Bds(s) Bdw(1px) Bdrs(3px) Bgc(#fff)","Bxsh(followContentTooltipBxsh) C($c-fuji-red-2-b) Fz(13px)","Lh(14px) Pos(a) Px(14px) Py(8px) Whs(nw) Z(3)",{"Start(0) T(26px)":"down"===t,"B(0) End(36px)":"left"===t});return d.default.createElement("b",{className:e},this._getButtonText())}},_updateContentState:function(t){this.setState({contentState:this.followContentStore.getContentState(t)})}});e.default=(0,o(36).injectIntl)(f),t.exports=e.default},1979:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e,o){e=e||{};var n={uuid:e.uuid,curState:e.state?1:0,fromSlingstone:e.fromSlingstone};if(n.uuid){if(void 0===n.fromSlingstone){var s=(e.category||"").split(":")[0];n.fromSlingstone=d[s]||!1}var c=t.session&&t.session.dimensions?t.session.dimensions.authed:"0",p=t.localStorage;if(p)if("1"!==c){var f=+new Date;p.setItem(l,{uuid:n.uuid,fromSlingstone:n.fromSlingstone,expiry:f+a});var h=e.config&&e.config.loginBaseUrl||"https://login.yahoo.com/config/login";window.location=h+"?.done="+window.location.href}else{var m=t.getStore(r.default),g=m.getGUID(),S=p.getItem(u)||{},C={},v=Object.keys(S);S[g]&&S[g][n.uuid]&&n.curState?delete S[g][n.uuid]:(v.length>19&&delete S[g][v[0]],S=(0,i.default)(S,[g,n.uuid],!n.curState)),C[g]=Object.assign({},S[g]),p.setItem(u,C);var b={action:"set",uuids:[n.uuid],followedContent:n.curState?[]:[n.uuid],overrideState:!0};t.dispatch("SET_CONTENT_FOLLOW_STATE",b)}o&&o()}else t.logger.warn("setContentState did not recieve a uuid"),o&&o()}Object.defineProperty(e,"__esModule",{value:!0});var i=n(o(197)),r=n(o(92)),a=18e4,l="followed-content-login",u="followed-content-signedin",d={"":!0,WIKIID:!0,YCT:!0,YMEDIA:!0,YPROP:!0};s.displayName="setContentState",e.default=s,t.exports=e.default},2015:function(t,e,o){"use strict";function n(t,e){if(!t)return null;var n=(0,o(6).get)(t,"summary")||"",r=(0,o(6).get)(t,"title")||"";"slideshow"===(0,o(6).get)(t,"contentType")&&n.length>i&&(n=r);var a=(0,s.default)(e,["layout","image"],"");return{uuid:(0,o(6).get)(t,"uuid")||"",link:(0,o(6).get)(t,"url")||"",alias:(0,o(6).get)(t,"alias")||"",title:r,description:n,picture:(0,o(6).getIn)(t,["thumbnail","url"])||a}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var s=function(t){return t&&t.__esModule?t:{default:t}}(o(2)),i=800;t.exports=e.default},2211:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(o(11)),i=n(o(0)),r=n(o(1)),a=n(o(159)),l=n(o(1978)),u=n(o(213)),d=n(o(93)),c=n(o(7)),p=n(o(5)),f=n(o(69)),h=n(o(2)),m=n(o(2015));e.default={statics:{storeListeners:[d.default]},contextTypes:{getStore:i.default.func.isRequired,renderTarget:i.default.object,session:i.default.object.isRequired},propTypes:{alignLeft:i.default.bool,buttonSpacingPixels:i.default.number,contentId:i.default.string,commentScrollMarginTop:i.default.number,iconSize:i.default.number,maxSquareWidth:i.default.number,minSquareWidth:i.default.number,orientation:i.default.string,persistToolTip:i.default.bool,roundButtonDiameter:i.default.number,shouldUseBrowserUrl:i.default.bool,showTooltipAtBottom:i.default.bool,useButtonColorForBackground:i.default.bool,hideText:i.default.bool,ylkData:i.default.object},getDefaultProps:function(){return{alignLeft:!1,buttonSpacingPixels:8,contentId:void 0,commentScrollMarginTop:void 0,iconSize:20,maxSquareWidth:void 0,minSquareWidth:void 0,orientation:a.default.orientation.HORIZONTAL,persistToolTip:!1,roundButtonDiameter:40,shouldUseBrowserUrl:!0,showTooltipAtBottom:!1,useButtonColorForBackground:!0,hideText:!1,ylkData:{}}},getInitialState:function(){return this.config=(0,h.default)(this.props,["componentConfig","shareButtons"])||{},this.contentStore=this.getStore(d.default),this.langStore=this.getStore("LangStore"),this.pageStore=this.getStore(c.default),this.routeStore=this.getStore("RouteStore"),this._getState(this.props.contentId)},onChange:function(t){this.props.contentId||this.setState(this._getState())},componentWillReceiveProps:function(t){t.contentId!==this.props.contentId&&this.setState(this._getState(t.contentId))},_getState:function(t){var e=this.contentStore,n=this.context.renderTarget||{},i=t?e.getContentByUUID(t):e.getCurrentContent(n.id),r=this.routeStore.getCurrentRoute()||{},a={};this.pageStore&&(a=this.pageStore.getPageConfig()),i=i||{};var l=(0,o(6).get)(i,"uuid")||"",u=(0,m.default)(i,a),d=f.default.isLcpContent(i);return{buttons:s.default.List(d?this.config.lcpButtons:this.config.buttons),isLcp:d,isCurrentRenderTarget:this._isCurrentRenderTarget(),shareMeta:u,site:f.default.getContentSite(r,this.context),twitterId:this._getTwitterId(),uuid:l,ylk:Object.assign({},this.props.ylkData,{uuid:l})}},_isCurrentRenderTarget:function(){return(0,h.default)(this,["context","renderTarget","id"])===(this.pageStore&&this.pageStore.getCurrentRenderTargetId())},_getDevice:function(){return(0,h.default)(this.context,["session","dimensions","device"],"smartphone")},_getTwitterId:function(){var t=this.pageStore.getPageData(),e=(0,h.default)(t,["meta","property","twitter:site"])||(0,h.default)(t,["meta","name","twitter:site"])||"Yahoo";return"@"===e.charAt(0)&&(e=e.slice(1)),e},_getStyles:function(t){return(0,h.default)(this.config,["styles",t])},renderLikeButton:function(){var t=this.config;if(!this.props.enableLikeButton||this.state.isLcp||!this.state.uuid)return null;var e={initial:"#f23347",hovered:"#f23347"};t.enableRoundShareButtons&&(e={initial:"#fff",hovered:"#d1282d",selected:"#ff4d53"});var o={className:this._getStyles("likeButtonClasses"),colors:e,enableRoundShape:t.enableRoundShareButtons,enableHoverColor:t.enableHoverColor,enableHoverColorTransition:t.enableHoverColorTransition,enableTooltip:this.props.persistToolTip,iconClasses:this._getStyles("likeIconClasses"),iconSize:this.props.iconSize,overrideTooltipClasses:this._getStyles("tooltipClasses"),persistTooltip:this.props.persistToolTip,uuid:this.state.uuid,ylkData:this.state.ylk};return r.default.createElement("div",{className:this._getStyles("likeClasses"),key:"like"},r.default.createElement(l.default,o))},renderShareButtonGroup:function(){var t=this.config,e=t.buttonSize||a.default.size.LARGE,o=this.langStore.getStrings("tdv2-applet-content-canvas"),n=!1!==t.isTouchDevice,s={buttonShape:a.default.shape.SQUARE,buttonWidth:this._getStyles("buttonWidth"),iconRendererClassName:this._getStyles("iconRendererClasses"),iconSize:this.props.iconSize,maxSquareWidth:this.props.maxSquareWidth,minSquareWidth:this.props.minSquareWidth,persistToolTip:this.props.persistToolTip,persistTooltipClasses:(0,p.default)(this._getStyles("shareButtonTooltipClasses"),{"D(n)":this.props.hideText,"End(9px) D(n)--modalFloatingCloseBtn":this.props.persistToolTip}),showShareInfoOnHover:!n,touchDevice:n,useButtonColorForBackground:this.props.useButtonColorForBackground};return t.enableRoundShareButtons&&(s={buttonShape:a.default.shape.ROUND,buttonSpacingPixelsSmall:this.props.buttonSpacingPixels,iconSize:this.props.iconSize,maxSquareWidth:this.props.maxSquareWidth,roundButtonDiameter:this.props.roundButtonDiameter,showShareInfoOnHover:!1,touchDevice:n,useButtonColorForBackground:this.props.useButtonColorForBackground,useHoverColor:t.enableHoverColor,enableHoverColorTransition:t.enableHoverColorTransition}),r.default.createElement(u.default,Object.assign({},s,{alignLeft:this.props.alignLeft,buttonsToShow:this.state.buttons,buttonSize:e,buttonOrientation:this.props.orientation,className:this._getStyles("outerContainerClasses"),key:"share",messages:o,metaData:this.state.shareMeta,sharingConfig:{device:this._getDevice(),shouldUseBrowserUrl:this.props.shouldUseBrowserUrl,site:this.state.site,twitterId:this.state.twitterId},showTooltipAtBottom:this.props.showTooltipAtBottom,webshare:t.webshare,ylkData:this.state.ylk}))}},t.exports=e.default},2573:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),l=(n(o(0)),n(o(1))),u=n(o(2)),d=function(t){function e(t){return s(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return r(e,t),a(e,[{key:"render",value:function(){var t=this.props,e=t.className,o=t.items,n=t.index,s=o&&o[n];if(!s)return null;var i=s.comment,r=(0,u.default)(s,["userProfile","nickName"]);return r=r?r+": ":null,l.default.createElement("p",{className:e},l.default.createElement("span",{className:"Fw(b)"},r),l.default.createElement("span",null,i))}}]),e}(l.default.Component);d.defaultProps={index:0,items:[]},d.displayName="CommentSlider",e.default=d,t.exports=e.default},2574:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(o(0)),i=n(o(1)),r=n(o(4)),a=n(o(2));e.default=(0,r.default)({autobind:!1,displayName:"ProfileImageSlider",propTypes:{classNames:s.default.string,iconSize:s.default.number,index:s.default.number,items:s.default.array.isRequired},getDefaultProps:function(){return{classNames:"Pos(r) H(25px) W(32px)",iconSize:25,index:0,items:[]}},getItemStyle:function(t){return{left:6*t-4,transform:"scale("+(1-.12*(2-t))+")"}},getLoopIndex:function(t,e,o){var n=(t+e)%o;return n<0?n+o:n},getItems:function(){var t,e=this.props.index,n=(0,a.default)(this.props,["items","length"],0),s=this.props.items,r=[];for(t=0;t<3;t++){var l=this.getLoopIndex(e,2-t,n),u=this.getItemStyle(t);r.push(i.default.createElement("li",{key:"jtd-item-"+l,className:"Pos(a)",style:u},i.default.createElement(o(80).Img,{checkPosition:!1,className:"Bdrs(50%) Bdw(2px) Bdc(#fff) Bds(s) Bxz(bb)",height:this.props.iconSize,width:this.props.iconSize,url:s[l]})))}return r},render:function(){var t=this.props;if(0===t.items.length)return null;var e=this.getItems();return i.default.createElement("ul",{className:t.classNames},e)}}),t.exports=e.default},3279:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(o(1)),i=n(o(4)),r=n(o(5)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}(o(24)),l=n(o(3280)),u=n(o(16)),d=n(o(2211)),c=n(o(39));e.default=(0,i.default)({displayName:"CanvasStickyShareButtons",autobind:!1,mixins:[u.default,d.default],statics:{componentConfig:{bundleName:"tdv2-applet-content-canvas",name:"componentStickyShareButtons"}},shouldComponentUpdate:function(t,e){return e.uuid!==this.state.uuid||e.status!==this.state.status||e.winHeight!==this.state.winHeight||e.isCurrentRenderTarget!==this.state.isCurrentRenderTarget},shouldFreeze:function(){return!this._isCurrentRenderTarget()},componentWillMount:function(){this.shouldFreeze=this.shouldFreeze.bind(this),this.onStateChange=this.onStateChange.bind(this)},componentDidMount:function(){if("undefined"!=typeof window){this.setState({winHeight:window.innerHeight||document.documentElement.clientHeight})}this.subscriber=(0,c.default)("resize",this.handleResize.bind(this),{enableResizeInfo:!0})},componentWillUnmount:function(){this.subscriber&&this.subscriber.unsubscribe()},handleResize:function(t,e){if(!this.shouldFreeze()){this.setState({winHeight:e.resize.height})}},onStateChange:function(t){this.setState({status:t.status,bottom:t.bottom})},renderCommentsButton:function(){if(!this.props.enableCommentsButton||this.state.isLcp&&!this.props.enableCommentsButtonOffnet)return null;var t=this.state.uuid,e=this.state.status,o=a.STATUS_FIXED_NEAR_BOTTOM===e||a.STATUS_RELEASED===e,n=t?"article[data-uuid='"+t+"']":null,i=this.state.winHeight,r=this.state.bottom,u=40,d=a.DOCKPOS_BOTTOM;i&&r&&(i-r<40+a.STATUS_NEAR_RANGE&&(o=!0),i-r<40&&(d=a.DOCKPOS_TOP,u=r-40));var c={buttonSize:this.props.roundButtonDiameter,classNames:"",containerClassNames:"Mt(-40px)",dockPos:d,enableDockedCommentsFlyout:this.config.enableDockedCommentsFlyout,fixedY:u,iconClasses:this._getStyles("commentsIconClasses"),iconSize:this.props.iconSize,key:"comments",scrollMarginTop:this.props.commentScrollMarginTop,scrollTargetClass:"canvas-bottom-anchor-"+t,hideCommentCount:o,useHoverColor:this.config.enableHoverColor,uuid:t,bottomBoundarySelector:n,shouldFreeze:this.shouldFreeze};return s.default.createElement(l.default,c)},render:function(){var t=this.state.uuid,e=t?"article[data-uuid='"+t+"']":null,n=(0,r.default)("canvas-share-buttons StretchedBox",this.props.className);return this._isCurrentRenderTarget()?s.default.createElement("div",{className:n},s.default.createElement(o(1267).DockedContainer,{bottomBoundarySelector:e,dockPos:a.DOCKPOS_TOP,fixedYSelector:".YDC-UH",shouldFreeze:this.shouldFreeze,onStateChange:this.onStateChange},s.default.createElement("div",{className:"Pb(48px)"},this.renderLikeButton(),this.renderShareButtonGroup())),this.renderCommentsButton()):null}}),t.exports=e.default},3280:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(o(1)),i=n(o(4)),r=n(o(542)),a=n(o(3281)),l=n(o(303)),u=n(o(5)),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}(o(24)),c=n(o(1759)),p=n(o(16)),f=n(o(1977)),h=n(o(3282)),m=n(o(0)),g=n(o(10)),S=(0,i.default)({displayName:"DockedCommentsButton",autobind:!1,mixins:[p.default],contextTypes:{i13n:m.default.object},statics:{storeListeners:[l.default]},propTypes:{backgroundColors:m.default.object,bottomBoundary:m.default.string,buttonSize:m.default.number,classNames:m.default.string,containerClassNames:m.default.string,dockPos:m.default.string,fixedY:m.default.number,hideCommentCount:m.default.bool,iconClasses:m.default.string,iconColor:m.default.string,iconSize:m.default.number,scrollMarginTop:m.default.number,scrollTargetClass:m.default.string.isRequired,shouldFreeze:m.default.func,uuid:m.default.string.isRequired},getInitialState:function(){this.canvassStore=this.getStore(l.default),this.currentNode=null,this.i13nModel={action:"click",itc:1,sec:"hl-viewer",slk:"comments",outcm:"open"};var t=this._getState(this.props);return t.hovered=!1,t},getDefaultProps:function(){return{backgroundColors:{initial:"#5601C0",hovered:"#320071"},bottomBoundary:null,buttonSize:40,classNames:"",containerClassNames:"",dockPos:d.DOCKPOS_BOTTOM,fixedY:40,hideCommentCount:!1,iconClasses:"",iconColor:"#fff",iconSize:20,scrollMarginTop:-150,shouldFreeze:function(){return!1}}},onChange:function(){this.currentNode=g.default.findDOMNode(this.refs.dockedCommentsBtn),this.setState(this._getState(this.props))},componentWillMount:function(){this._commentsClickButtonHandler=this._commentsClickHandler.bind(this,"button"),this._commentsClickFlyoutHandler=this._commentsClickHandler.bind(this,"flyout"),this._onHover=this._onHover.bind(this),this.onChange=this.onChange.bind(this),this.onCloseBtnClick=this.onCloseBtnClick.bind(this),this.onStateChange=this.onStateChange.bind(this)},shouldComponentUpdate:function(t,e){return t.uuid!==this.props.uuid||t.fixedY!==this.props.fixedY||t.dockPos!==this.props.dockPos||t.hideCommentCount!==this.props.hideCommentCount||e.count!==this.state.count||e.hovered!==this.state.hovered||e.showFlyout!==this.state.showFlyout||e.status!==this.state.status},componentWillReceiveProps:function(t){t.uuid!==this.props.uuid&&this.setState(this._getState(t))},_getState:function(t){var e=this.canvassStore.getCommentsState("canvass-"+t.uuid),n=this.getCommentCount(e);if(e)return{count:n,countString:(0,o(119).getCommentString)(n),messageList:this.getMessageList(e),showFlyout:!0,url:this.getContextUrl(e)}},getCommentCount:function(t){return t&&(0,o(6).get)(t,"count")||0},getContextUrl:function(t){return t&&(0,o(6).get)(t,"contextUrl")||""},getMessageList:function(t){return t&&(0,o(6).toJS)((0,o(6).get)(t,"messageList"))||[]},_getScrollTop:function(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop},_commentsClickHandler:function(t){var e=this;if("flyout"===t&&e.context.i13n.executeEvent("beacon",{beaconType:"beaconClick",arguments:["hl-viewer","comments",null,{elm:"cmmt",itc:1,outcm:"open"}]}),e.props.scrollTargetClass){var o=e.props.uuid,n=document.getElementsByClassName(e.props.scrollTargetClass)||[];if(n[0]){var s=n[0].getBoundingClientRect().bottom,i=e._getScrollTop()+s+e.props.scrollMarginTop;(0,r.default)(i,null,null,function(){var t=document.getElementById("canvass-"+o);t&&t.focus({preventScroll:!0}),e.executeAction(c.default,{context:o,instanceId:"canvass-"+o,isExpanded:!0})})}}},_onHover:function(){this.setState({hovered:!this.state.hovered})},onStateChange:function(t){this.setState({status:t.status})},onCloseBtnClick:function(t){t&&t.stopPropagation(),this.context.i13n.executeEvent("beacon",{beaconType:"beaconClick",arguments:["hl-viewer","comment_close",null,{elm:"close",itc:1,outcm:"close"}]}),this.setState({showFlyout:!1})},_getFlyoutProps:function(){var t=this.state.messageList;return t&&0===t.length?null:{autoRotation:!0,i13nModel:this.i13nModel,messageList:t,onClick:this._commentsClickFlyoutHandler,onCloseBtnClick:this.onCloseBtnClick,url:this.state.url,uuid:this.props.uuid}},renderCommentCount:function(){var t=this.state.count;if(!t)return null;var e=this.state.status,o=" Op(1)";return e&&!this.props.hideCommentCount&&d.STATUS_ORIGINAL!==e&&d.STATUS_ORIGINAL_DISABLED!==e&&d.STATUS_FIXED_NEAR_TOP!==e||(o=" Op(0)"),s.default.createElement("div",{className:"Pos(a) T(-20px) Start(0) End(0) C($c-fuji-purple-1-c) Py(3px) Fw(b) Trsdu(.2s) Trsp(opacity)"+o},t)},renderCommentFlyout:function(){var t=this._getFlyoutProps();return t&&this.currentNode?s.default.createElement(f.default,{align:"right",Component:a.default,componentProps:t,fixedToParent:!0,flyoutWidth:682,flyoutHeight:71,parentNode:this.currentNode,relativeToParent:!0,paddingLeft:18,triangleFillColor:"#f7f8ff"}):null},render:function(){var t=this.props,e=this.state;if(!t.uuid)return null;var n=t.iconSize,i=(0,u.default)("H(100%)",t.iconClasses),r=t.backgroundColors,a=parseInt(t.buttonSize,10)+"px",l=e.status,c={"aria-label":t.intl.formatMessage({id:"COMMENT",defaultMessage:"Comment"}),onClick:this._commentsClickButtonHandler,onMouseEnter:this._onHover,onMouseLeave:this._onHover,i13nModel:Object.assign({},this.i13nModel,{elm:"btn"}),width:a,className:"canvas-modal-comments-button Cur(p) P(0) O(n) Bdrs(50%) Trs(hoverColorTransition)",style:{width:a,height:a,backgroundColor:this.state.hovered?r.hovered:r.initial}},p="Trsdu(.2s) Trsp(scale)";p+=l!==d.STATUS_ORIGINAL?" Scale(1)":" Scale(0)";var f=t.enableDockedCommentsFlyout&&e.showFlyout&&2===e.status;return s.default.createElement(o(1267).DockedContainer,{bottomBoundarySelector:t.bottomBoundarySelector,className:t.containerClassNames,dockPos:t.dockPos,fixedY:t.fixedY,shouldFreeze:t.shouldFreeze,onStateChange:this.onStateChange,innerZ:3},s.default.createElement("div",{ref:"dockedCommentsBtn",style:{width:a,height:a},className:"Ta(c)"},s.default.createElement("div",{className:p},this.renderCommentCount(),s.default.createElement(o(20).I13nButton,c,s.default.createElement(o(30).Icon,{asset:h.default,className:i,color:t.iconColor,height:n,width:n})))),f?this.renderCommentFlyout():null)}});e.default=(0,o(36).injectIntl)(S),t.exports=e.default},3281:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(o(1)),i=n(o(4)),r=n(o(0)),a=n(o(94)),l=n(o(2573)),u=n(o(16)),d=n(o(2)),c=n(o(2574)),p=n(o(1724)),f="undefined"!=typeof window?window:null;e.default=(0,i.default)({displayName:"CanvasCommentFlyout",autobind:!1,mixins:[u.default],propTypes:{autoRotation:r.default.bool,messageList:r.default.array.isRequired,onClick:r.default.func,onCloseBtnClick:r.default.func,uuid:r.default.string},contextTypes:{i13n:r.default.object},getDefaultProps:function(){return{autoRotation:!1,messageList:[],rotationInterval:15e3}},getInitialState:function(){return this.timer=null,this._getState()},componentDidMount:function(){this.props.autoRotation&&this._enableAutoRotation(),this._fireLinkView()},componentWillReceiveProps:function(t){t.autoRotation?this._enableAutoRotation():this._disableAutoRotation(),t.url!==this.props.url&&this.setState(this._getState())},componentWillUnmount:function(){this._disableAutoRotation()},shouldComponentUpdate:function(t,e){return t.url!==this.props.url||e.commentIndex!==this.state.commentIndex},_enableAutoRotation:function(){f&&(this._disableAutoRotation(),this.timer=setInterval(function(){this._step(1)}.bind(this),this.props.rotationInterval))},_disableAutoRotation:function(){f&&this.timer&&clearInterval(this.timer)},_fireLinkView:function(t){this.context.i13n.executeEvent("beacon",{beaconType:"beaconLinkViews",arguments:[[{sec:"hl-viewer",_links:[{elm:"cmmt",outcm:"open",slk:"comments",subsec:"flyout"}]}]]},t)},_getState:function(){return{commentIndex:0}},_step:function(t){var e=(0,d.default)(this.props,["messageList","length"],0);this.setState({commentIndex:p.default.getLoopIndex(this.state.commentIndex,t,e)})},_processCommentsData:function(){return(this.props.messageList||[]).map(function(t){return{comment:(0,d.default)(t,["details","userText"],""),userProfile:{nickName:(0,d.default)(t,["meta","author","nickname"],"")}}})},render:function(){var t=this.props,e=this.state,n=e.commentIndex,i=t.messageList;if(i&&0===i.length)return null;var r=this._processCommentsData(),u=i.map(function(t){return(0,d.default)(t,["meta","author","image","url"],"")});return s.default.createElement("div",{className:"Pos(r) Cur(p) Ai(c) D(f) W(100%) Bxsh(commentFlyoutShadow) Bg($c-fuji-grey-a) Bdrs(3px) Bdw(1px) Bds(s) Bdc($c-fuji-grey-e)",onClick:t.onClick},s.default.createElement("div",{className:"Fl(start) Pos(r) Pend(5px) Pstart(14px) Py(16px)"},s.default.createElement(c.default,{classNames:"Pos(r) H(33px) W(44px)",iconSize:33,index:n,items:u})),s.default.createElement("div",{className:"Flxs(1) Pos(r) Pend(40px) Py(16px)"},s.default.createElement(l.default,{className:"C(#000) Fz(13px) Lh(17px) LineClamp(2,34px)",items:r,index:n})),s.default.createElement("div",{className:"Pt(2px) Pos(a) End(0) T(0) Pend(6px)",onClick:t.onCloseBtnClick},s.default.createElement(o(30).Icon,{className:"close-btn",asset:a.default,height:14,color:"#787d82"})))}}),t.exports=e.default},3282:function(t,e){if(void 0===o)var o={};o["comments-fill"]={name:"comments-fill",height:16,width:16,path:"M3.396.667h9.228c1.507 0 2.73 1.194 2.73 2.667V10c0 1.474-1.223 2.668-2.73 2.668H4.556l-2.77 2.487c-.124.117-.288.18-.453.18-.09 0-.18-.02-.266-.056-.243-.107-.4-.347-.4-.612V3.335C.666 1.862 1.888.668 3.394.668zm7.958 4H4.687c-.368 0-.667.298-.667.667s.3.667.667.667h6.667c.37 0 .667-.298.667-.666s-.297-.667-.666-.667zM4.688 7.333c-.368 0-.667.298-.667.667s.3.667.668.667h6.667c.37 0 .667-.3.667-.667s-.298-.667-.667-.667H4.688z"},void 0!==t&&t.exports&&(t.exports=o["comments-fill"])}});