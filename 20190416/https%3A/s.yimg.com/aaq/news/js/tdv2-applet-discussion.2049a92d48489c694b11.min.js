webpackJsonp([22],{1248:function(e,t,a){e.exports={controllerViews:{DiscussionCarousel:a(2176),DiscussionItem:a(1859),DiscussionList:a(2177),DiscussionListItem:a(1861),DiscussionListFlyout:a(1708),Flyout:a(1425),FlyoutContainer:a(2179),DiscussionStreamItem:a(2180)},stores:{DiscussionStore:a(1707),FlyoutStore:a(1709),NativeAdStore:a(1205)}}},1384:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a(11)),i=n(a(25)),o={article:"story"},l="undefined"!=typeof window;t.default={isLazyLoad:function(e,t){return t>=0&&e<t},isSidekick:function(e){return e&&-1!==e.indexOf("SIDEKICK")},updateQueryParam:function(e,t){t=t||{};var a=i.default.parse(e,!0);return a.search=void 0,a.query=Object.assign({},a.query,t),i.default.format(a)},getLoopIndex:function(e,t,a){if(!a)return e+t;var n=(e+t)%a;return n<0?n+a:n},getRelatedUuids:function(e,t,a){var n=t.length,s=[];if(0===n||0===e||a>=n)return s;for(var i=a;s.length<e&&(i=++i%n)!==a;)t[i]&&t[i].uuid&&s.push(t[i].uuid);return s},getResizedImage:function(e,t){return e=e||{},e[t]||e.original},getCommentString:function(e){if(!e)return"";return e>=1e6?parseFloat((e/1e6).toFixed(2))+"m":e>=1e5?parseFloat((e/1e3).toFixed(0))+"k":e>=1e3?parseFloat((e/1e3).toFixed(1))+"k":e.toString()},getBaseI13n:function(e,t,a){var n=e.type,s={itc:0,g:e.uuid||e.id};this.isSidekick(a)?(s.cat=a,s.ccode=e.ccode,s.ct=o[n]||n,s.subsec="sentiment",s.sec="sdkick"):s.sec="jtc";var i=this.parseUrl(e.link||e.url||"");i&&(s.tar=i.host,s.tar_uri=i.pathname);var l=e.title;return l&&(s.slk=l),s.cpos=t+1,s.pos=t+1,s},getTypeIcon:function(e){var t=["video","slideshow"],a=e.type;return t.indexOf(a)>=0?a:""},getSentimentsRatio:function(e,t,a){if(void 0===e||void 0===a||void 0===t)return null;var n=e+a+t;if(!n)return null;var s=Math.round(e/n*100),i=Math.round(a/n*100);return{negative:s,neutral:i,positive:100-s-i}},parseUrl:function(e){if(e=e.split("?")[0]){if("/"===e.charAt(0))return{host:l?window.location.host:"",pathname:e,protocol:l?window.location.protocol:""};var t=e.split("/");return{host:t[2],pathname:"/"+t.slice(3).join("/"),protocol:t[0]}}return null},processStreamData:function(e){var t=e.get("comments")||s.default.Map(),a=t.toJS(),n=e.get("images")||s.default.Map();return{bypassModal:e.get("bypassModal"),ccode:e.get("ccCode"),commentCount:parseInt(a.totalCount,10)||0,imageSize:n.toJS(),link:e.get("link")||"",title:e.get("title")||"",topRatedComments:a.topRated||[],total_negative_comments:parseInt(a.negativeCount,10)||0,total_neutral_comments:parseInt(a.neutralCount,10)||0,total_postive_comments:parseInt(a.positiveCount,10)||0,type:e.get("subtype")||e.get("type"),uuid:e.get("id")||""}}},e.exports=t.default},1425:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a(1)),i=n(a(0)),o=n(a(4)),l="undefined"!=typeof window?window:null;t.default=(0,o.default)({autobind:!1,displayName:"Flyout",propTypes:{align:i.default.oneOf(["left","right"]),alignToViewport:i.default.bool,componentProps:i.default.object.isRequired,fixedToParent:i.default.bool,flyoutWidth:i.default.number,flyoutHeight:i.default.number,onMouseEnter:i.default.func,onMouseLeave:i.default.func,parentNode:i.default.object.isRequired,relativeToParent:i.default.bool,triangleFillColor:i.default.string},getDefaultProps:function(){return{align:"right",Component:null,componentProps:{},flyoutWidth:370,flyoutHeight:482,parentNode:null,relativeToParent:!1,triangleFillColor:"#fff"}},calculatePositions:function(){var e=this.props;if(!l)return null;var t=e.flyoutHeight,a=e.parentNode&&e.parentNode.getBoundingClientRect();if(!a)return null;var n=a.height/2,s=0;e.fixedToParent&&(s=a.top-l.innerHeight+t);var i=l.innerHeight-a.top;if(e.alignToViewport&&i<t){var o=this.getViewPortAlignedPos(i,s,t,a.height);n=o.arrow,s=o.flyout}return"left"===e.align?this.getLeftAlignedFlyoutStyles(n,s,a.top,a.left):"right"===e.align?this.getRightAlignedFlyoutStyles(n,s,a.top,a.right):null},getLeftAlignedFlyoutStyles:function(e,t,a,n){var s=this.props,i=-(s.flyoutWidth+s.paddingRight);return s.relativeToParent||(t+=a,i+=n),{arrowStyles:{left:s.flyoutWidth+1,top:e,transform:"rotate(180deg)"},wrapperStyles:{left:i,top:t}}},getRightAlignedFlyoutStyles:function(e,t,a,n){var s=this.props,i=-(s.flyoutWidth+s.paddingLeft);return s.relativeToParent||(t+=a,i=-(i+n)),{arrowStyles:{right:s.flyoutWidth-1,top:e},wrapperStyles:{right:i,top:t}}},getViewPortAlignedPos:function(e,t,a,n){var s=e<n/2,i=a-e;return{arrow:s?i:i+n/2,flyout:-i}},render:function(){var e=this.props,t=e.Component;if(!t||!e.parentNode)return null;var a=this.calculatePositions();if(!a)return null;var n={height:e.flyoutHeight,width:e.flyoutWidth,paddingTop:e.paddingTop||0,paddingBottom:e.paddingBottom||0,paddingLeft:e.paddingLeft||0,paddingRight:e.paddingRight||0},i=a.arrowStyles,o=e.componentProps,l=Object.assign({},n,a.wrapperStyles),r={borderRightColor:e.triangleFillColor};return s.default.createElement("div",{className:"Pos(a)",style:l,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},s.default.createElement(t,o),s.default.createElement("div",{className:"Z(3) C(t) Pos(a) W(0) H(0) Bds(s) Bdtc(t) Bdbc(t) Bdendc($c-fuji-grey-e) Bdendw(12px) Bdtw(12px) Bdbw(12px)",style:i},s.default.createElement("div",{className:"Pos(r) Scale(1.4) T(-9px) W(0) H(0) Bdtc(t) Bdbc(t) Bds(s) Bdtw(9px) Bdbw(9px) Bdendw(9px)",style:r})))}}),e.exports=t.default},1429:function(e,t,a){"use strict";e.exports=function(e,t,n){t=t||{};var s=e.getStore("PageStore"),i=e.getStore("RouteStore").getCurrentRoute()||a(11).Map(),o={id:t.id,dimensions:t.dimensions,count:t.count,se:t.se,sponsorship_enabled:t.sponsorship_enabled,spaceid:t.spaceid||s&&s.getSpaceid()};o.contentSite=a(2)(i,["params","contentSite"])||i.contentSite||"fp",e.service.read("NativeAdService",o,{},function(a,s){s&&e.dispatch("STORE_NATIVE_ADS",{id:t.id,ads:s}),n&&n()})}},1474:function(e,t,a){"use strict";function n(e,t,a){var n=e.getStore(i.default),s=t.id;n&&n.isFlyoutShown(s)&&e.dispatch("FLYOUT_HIDE",t),a&&a()}function s(e,t,a){e.dispatch("FLYOUT_SHOW",t),a&&a()}Object.defineProperty(t,"__esModule",{value:!0}),t.hide=n,t.show=s;var i=function(e){return e&&e.__esModule?e:{default:e}}(a(1709))},1678:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=(n(a(0)),n(a(1))),u=n(a(2)),d=function(e){function t(e){return s(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.items,n=e.index,s=a&&a[n];if(!s)return null;var i=s.comment,o=(0,u.default)(s,["userProfile","nickName"]);return o=o?o+": ":null,r.default.createElement("p",{className:t},r.default.createElement("span",{className:"Fw(b)"},o),r.default.createElement("span",null,i))}}]),t}(r.default.Component);d.defaultProps={index:0,items:[]},d.displayName="CommentSlider",t.default=d,e.exports=t.default},1679:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a(0)),i=n(a(1)),o=n(a(4)),l=n(a(2));t.default=(0,o.default)({autobind:!1,displayName:"ProfileImageSlider",propTypes:{classNames:s.default.string,iconSize:s.default.number,index:s.default.number,items:s.default.array.isRequired},getDefaultProps:function(){return{classNames:"Pos(r) H(25px) W(32px)",iconSize:25,index:0,items:[]}},getItemStyle:function(e){return{left:6*e-4,transform:"scale("+(1-.12*(2-e))+")"}},getLoopIndex:function(e,t,a){var n=(e+t)%a;return n<0?n+a:n},getItems:function(){var e,t=this.props.index,n=(0,l.default)(this.props,["items","length"],0),s=this.props.items,o=[];for(e=0;e<3;e++){var r=this.getLoopIndex(t,2-e,n),u=this.getItemStyle(e);o.push(i.default.createElement("li",{key:"jtd-item-"+r,className:"Pos(a)",style:u},i.default.createElement(a(80).Img,{checkPosition:!1,className:"Bdrs(50%) Bdw(2px) Bdc(#fff) Bds(s) Bxz(bb)",height:this.props.iconSize,width:this.props.iconSize,url:s[r]})))}return o},render:function(){var e=this.props;if(0===e.items.length)return null;var t=this.getItems();return i.default.createElement("ul",{className:e.classNames},t)}}),e.exports=t.default},1707:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(0,function(e){return e&&e.__esModule?e:{default:e}}(a(20)).default)({storeName:"DiscussionStore",statics:{handlers:{LOAD_DISCUSSION_DATA_SUCCESS:"_handleDataSuccess",LOAD_DISCUSSION_DATA_FAILURE:"_handleDataFailure"}},initialize:function(){this.data={}},_handleDataFailure:function(e){},_handleDataSuccess:function(e){e&&e.data&&(this.data[e.category]=e.data,this.emitChange())},getDiscussionList:function(e){var t=this.data[e];return t||null},dehydrate:function(){return{data:this.data}},rehydrate:function(e){this.data=e.data}}),e.exports=t.default},1708:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=n(a(0)),o=n(a(1)),l=n(a(4)),r=n(a(1208)),u=n(a(8)),d=n(a(1196)),c=n(a(2178)),f=n(a(296)),m=(0,l.default)({autobind:!1,displayName:"DiscussionListFlyout",propTypes:{ad:i.default.object,comments:i.default.array.isRequired,commentsCount:i.default.number,index:i.default.number,intl:a(36).intlShape,isSidekick:i.default.bool,sentiment:i.default.string,sentimentDegree:i.default.number},contextTypes:{i13n:i.default.object},getDefaultProps:function(){return{ad:null,comments:null,commentsCount:0,index:0}},componentDidMount:function(){this.fireLinkView()},fireLinkView:function(e){var t={pos:this.props.index,subsec:this.props.isSidekick?"sentiment":"flyout"};this.context.i13n.executeEvent("beacon",{beaconType:"beaconLinkViews",arguments:[[{sec:this.props.isSidekick?"sdkick":"jtc",_links:[t]}]]},e)},renderComment:function(e){var t=this.props.intl.formatNumber(this.props.commentsCount)+" ",n=o.default.createElement("span",{className:"Pstart(5px) Lh(28px) Fz(14px) C($c-fuji-blue-1-b) D(ib) Fw(b)"},t,o.default.createElement(a(36).FormattedMessage,{id:"REACTIONS",defaultMessage:"reactions"}),o.default.createElement("i",{className:"P(5px) Fz(12px)"},"•"),o.default.createElement(a(36).FormattedMessage,{id:"JOIN_THE_CONVERSATION",defaultMessage:"Join the Conversation"}));return o.default.createElement(f.default,s({className:"Mstart(26px) Mt(16px) Td(n) D(ib)"},e),o.default.createElement(a(34).Icon,{asset:d.default,height:"20px",color:"#0081f2",style:{position:"relative",margin:"auto",verticalAlign:"middle"}}),n)},renderSentiment:function(){var e=(0,u.default)("Bg(sentimentPointerImg) Anim(moveAnimation) Bgz(19px, 42px) Trfo(bottom)","Pos(a) Start(148px) T(30px) W(19px) H(42px)"),t=this.props.sentiment,n=(0,u.default)("Bdtw(1px) W(317px) Bdts(d) Bdtc($c-fuji-grey-e) Fz(13px) Pt(7px) Fw(500)","Lh(15px) C(#000) Ta(c)"),s=this.props.sentimentDegree+"deg";return o.default.createElement("div",{className:"Mt(14px) Mstart(26px) Mend(33px)"},o.default.createElement("div",{className:"Pos(r) T(1px)"},o.default.createElement(a(80).Img,{className:"W(150px) H(74px) Mstart(83px) Bgc(white)",url:"https://s.yimg.com/dh/ap/default/161020/spectrum1476995021.png"}),o.default.createElement("span",{className:e,style:{transform:"rotate("+s+")"}})),o.default.createElement("div",{className:n},"neutral"===t?o.default.createElement(a(36).FormattedMessage,{id:"CONVERSATION_NEUTRAL",defaultMessage:"Conversations around this story are mostly ",values:{neutral:o.default.createElement("span",{style:{color:"#ff7b12"}},o.default.createElement(a(36).FormattedMessage,{id:"NEUTRAL",defaultMessage:"neutral"}))}}):o.default.createElement(a(36).FormattedMessage,{id:"CONVERSATION",defaultMessage:"Conversations around this story lean ",values:{sentiment:t,positive:o.default.createElement("span",{style:{color:"#1ac567"}},o.default.createElement(a(36).FormattedMessage,{id:"POSITIVE",defaultMessage:"positive"})),negative:o.default.createElement("span",{style:{color:"#f0162f"}},o.default.createElement(a(36).FormattedMessage,{id:"NEGATIVE",defaultMessage:"negative"}))}})))},renderUserComments:function(){var e=this,t=e.props.comments;if(t){t=t.slice(0,2);var n=t.map(function(t,n){var s=t.comment,i=new Date(t.createTime);isNaN(i)&&(i=1e3*parseInt(t.createTime,10));var l=o.default.createElement("i",{className:"P(4px) Fz(11px) C($c-fuji-grey-e)"},"•"),u="cmnt-"+n,d=t.userProfile||{},c=d.nickName||e.props.intl.formatMessage({id:"APPLET_COMMENT_YAHOO_READER"}),f=o.default.createElement(r.default,{src:d.imageUrl,name:c,enableAlphatar:!0,size:25});return o.default.createElement("li",{key:u,className:"Mb(16px)"},f,o.default.createElement("div",{className:"D(ib) Va(tb) Pstart(8px)"},o.default.createElement("span",{className:"user Fz(12px) Lh(14px) C($c-fuji-grey-l) Fw(b)"},c),l,o.default.createElement("span",{className:"time Fz(11px) Lh(14px) C($c-fuji-grey-e) Ta(start)"},o.default.createElement(a(36).FormattedRelative,{value:i}))),o.default.createElement("div",{className:"cmnt H(54px) Pt(4px) Fz(13px) Va(sup) Lh(18px) C(#000) Lts(0) LineClamp(3,54px)"},s))});return o.default.createElement("ul",{className:"cmntlist"},n)}},render:function(){var e=this.props,t=e.ad,n=(0,u.default)("Bxsh(discussionFlyoutBoxShadow) W(370px) Bg(#fff) Bdw(1px) Bds(s)","Bdc($c-fuji-grey-e) Bdrs(2px)"),i=(0,u.default)("C(#000) C($c-fuji-blue-1-a):h Fz(14px) Fw(b) Lh(18px) LineClamp(2,36px)"),l=e.url||"",r=Object.assign({category:"",pageTitle:e.title,url:l,uuid:e.uuid},e.navParams),d={followLink:e.bypassModal||"/"!==l.charAt(0),href:e.url,navParams:r},m=Object.assign({},d,{model:Object.assign({},{elm:"hdln",subsec:"flyout"},e.model)}),p=Object.assign({},r,{collapseContent:!0}),h=Object.assign({},d,{navParams:p}),g=Object.assign({},{elm:"flyout",subsec:"flyout"},e.model),v=Object.assign({},h,{model:Object.assign({},{elm:"cmmt",subsec:"flyout"},e.model)}),y="flyout-"+e.index;return o.default.createElement(a(29).I13nDiv,{id:y,className:"Pos(a) Z(2)",i13nModel:g},o.default.createElement("div",{className:n},this.renderComment(v),o.default.createElement("p",{className:"Bdbw(1px) Bdbs(s) Bdbc($c-fuji-grey-e) Op(0.4) Mt(10px) Mstart(26px) Mend(24px)"}),o.default.createElement(f.default,s({className:"Td(n) D(b) Mt(14px) Mstart(26px) Mend(22px)"},m),o.default.createElement("h3",{className:i},e.title)),o.default.createElement(f.default,s({className:"Td(n) D(b) Mt(14px) Mstart(25px) Mend(22px)"},v),this.renderUserComments()),this.renderSentiment(),o.default.createElement("p",{className:"Bdbw(1px) Bdbs(s) Mt(16px) Bdbc($c-fuji-grey-e) Op(0.4)"}),o.default.createElement(a(1191).Controller,{component:c.default,className:"H(78px) Pos(r) Bg(#f4f5fa) Pt(13px)",choicesUrl:e.adchoicesUrl,data:t,nativeAdDimension:e.nativeAdDimension,sponsoredUrl:e.sponsoredUrl})))}});t.default=(0,a(36).injectIntl)(m),e.exports=t.default},1709:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a(20)),i=n(a(311));t.default=(0,s.default)({statics:{storeName:"FlyoutStore",handlers:{FLYOUT_SHOW:"_show",FLYOUT_HIDE:"_hide",NAVIGATE_START:"_clear"}},initialize:function(){this.flyouts={}},defaults:{Component:null,componentProps:{}},_debouncedEmitChange:(0,i.default)(function(){this.emitChange()},300),_show:function(e){var t=e.id;if(t){var a=this.flyouts[t],n=Object.assign({},this.defaults,a,e.data);n.show=!0,this.flyouts[t]=n,this._debouncedEmitChange()}},_hide:function(e){var t=e.id,a=e.delay;t&&this.flyouts[t]&&(this.flyouts[t].show=!1,this.flyouts[t].hideDelay=a,a?this._debouncedEmitChange():this.emitChange())},_clear:function(){this.flyouts={},this.emitChange()},isFlyoutShown:function(e){return e&&this.flyouts[e]?this.flyouts[e].show:null},getFlyouts:function(){return this.flyouts},dehydrate:function(){return this.flyouts},rehydrate:function(e){this.flyouts=e}}),e.exports=t.default},1859:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=n(a(0)),o=n(a(1)),l=n(a(4)),r=n(a(8)),u=n(a(1209)),d=n(a(529)),c=n(a(1678)),f=n(a(1679)),m=n(a(2)),p=n(a(296)),h=n(a(1384)),g="undefined"!=typeof window?window:null,v=(0,l.default)({autobind:!1,contextTypes:{session:i.default.object},displayName:"DiscussionItem",propTypes:{appendQueryParam:i.default.object,autoRotation:i.default.bool,className:i.default.string,category:i.default.string,data:i.default.object.isRequired,index:i.default.number,intl:a(36).intlShape,total:i.default.number,onClickPrev:i.default.func,onClickNext:i.default.func,rotationInterval:i.default.number},getDefaultProps:function(){var e=function(){};return{autoRotation:!1,rotationInterval:5e3,data:null,index:0,isHeadlineReaction:!1,total:0,appendQueryParam:{},onClickPrev:e,onClickNext:e}},getInitialState:function(){return this.timer=null,this.props.autoRotation&&this._enableAutoRotation(),this._getState()},componentWillReceiveProps:function(e){e.autoRotation?this._enableAutoRotation():this._disableAutoRotation(),e.data!==this.props.data&&this.setState(this._getState())},componentWillUnmount:function(){this._disableAutoRotation()},shouldComponentUpdate:function(e,t){return e.data!==this.props.data||e.index!==this.props.index||t.commentIndex!==this.state.commentIndex},_getState:function(){return{commentIndex:0}},_jump:function(e){var t=(0,m.default)(this.props,["data","topRatedComments","length"],0);this.setState({commentIndex:h.default.getLoopIndex(this.state.commentIndex,e,t)})},_enableAutoRotation:function(){g&&(this._disableAutoRotation(),this.timer=setInterval(function(){this._jump(1)}.bind(this),this.props.rotationInterval))},_disableAutoRotation:function(){g&&this.timer&&clearInterval(this.timer)},renderCommentThread:function(e,t){var n,s,i,l=e&&e[t];if(!l)return null;var u=this.context.session.getBucketMeta(),d=(0,m.default)(u,["feature.hrConversation"],!1),c="C(#000) Fz(12px) Lh(14px) LineClamp(3,42px)",f="C(#000) Fw(b) Fz(12px) Lh(14px) D(b) Pb(6px) Pt(4px)",p="W(25px) H(25px) Bdrs(50%) Bdw(2px) Bdc(#fff) Bds(s) Bxz(bb)",h=l.comment,g=(0,m.default)(l,["userProfile","nickName"],null),v=(0,m.default)(l,["userProfile","imageUrl"]),y=l.replies;return y&&(i=y.comment,n=(0,m.default)(y,["userProfile","nickName"],null),s=(0,m.default)(y,["userProfile","imageUrl"])),o.default.createElement("div",{className:"comment-thread Mt(10px)"},o.default.createElement("div",{className:"Fl(start) Pos(r) W(32px)"},o.default.createElement(a(80).Img,{url:v,checkPosition:!1,className:p})),o.default.createElement("div",{className:(0,r.default)("Mstart(32px) Mb(10px)",{"Mend(32px)":d})},o.default.createElement("span",{className:f},g),o.default.createElement("p",{className:c},h)),o.default.createElement("div",{className:(0,r.default)("Pos(r) W(32px)",{"Fl(start)":!d,"Fl(end)":d})},o.default.createElement(a(80).Img,{url:s,checkPosition:!1,className:p})),o.default.createElement("div",{className:(0,r.default)("Mstart(32px)",{"Mend(32px)":d})},o.default.createElement("span",{className:(0,r.default)(f,{"Fl(end) P(6px)":d})},n),o.default.createElement("p",{className:(0,r.default)(c,{"Cl(b) Ta(end)":d})},i)))},render:function(){var e=this.props,t=this.state,n=e.data,i=e.index,l=e.total;if(!n)return null;n.id=n.uuid;var g,v,y=t.commentIndex,b=h.default.updateQueryParam(n.link||n.url||"",e.appendQueryParam),x=e.isHeadlineReaction,E={category:"",pageTitle:n.title,url:b,uuid:n.id,renderTarget:e.renderTarget||"default"},N={isLeafNode:!1,followLink:n.bypassModal||"/"!==b.charAt(0),href:b,navParams:E},_=Object.assign({},N,{model:{elm:"hdln"}}),C=h.default.getResizedImage(n.imageSize,"img:45x45");C&&(v=Object.assign({},N,{model:{elm:"img"},style:{paddingBottom:Math.round(C.height/C.width*100)+"%"}}));var P=Object.assign({},E,{collapseContent:!0}),S=Object.assign({},N,{navParams:P}),M=Object.assign({},S,{model:{elm:"hdln",subsec:"comments"}}),I=Object.assign({},S,{model:{elm:"img",subsec:"comments"}}),F=Object.assign({},S,{model:{elm:"btn",subsec:"commentbubble"}}),j=Object.assign({},S,{model:{elm:"nav",subsec:"jtc"}});x||(g=(n.topRatedComments||[]).map(function(e){return(0,m.default)(e,["userProfile","imageUrl"])}));var O=h.default.getBaseI13n(n,i),T=Object.assign({},O,{itc:1,elm:"btn",subsec:"arrows"});return x&&e.i13n&&e.i13n.sec&&(O.sec=e.i13n.sec),o.default.createElement(a(29).I13nDiv,{className:(0,r.default)("Px(14px) Pt(12px) Pb(10px)",e.className),i13nModel:O},o.default.createElement("div",{className:"Pos(r) H(45px) Mb(7px) Cf"},C?o.default.createElement("div",{className:"Fl(start) Pos(r) Z(1) W(45px) Pend(9px)"},o.default.createElement(p.default,s({className:"D(b) H(0) Ov(h) Bdrs(2px)"},v),o.default.createElement(a(80).Img,{url:C.url,checkPosition:!1,className:"W(100%)"}))):null,o.default.createElement("div",{className:"Ov(h) Pt(6px)"},o.default.createElement("h3",{className:"Mb(5px)"},o.default.createElement(p.default,s({className:"Td(n)"},_),o.default.createElement("u",{className:"StretchedBox"}),o.default.createElement("div",{className:"Fw(b) Fz(13px) Lh(16px) LineClamp(2,32px) Pos(r) C($c-fuji-blue-1-a)"},n.title))))),x?o.default.createElement("div",{className:(0,r.default)("Pos(r) Mb(7px) Cf",{"H(63px)":!x,"H(160px)":x})},o.default.createElement(p.default,s({className:"Td(n)"},M),o.default.createElement("u",{className:"StretchedBox"}),this.renderCommentThread(n.topRatedComments,y))):o.default.createElement("div",{className:"Pos(r) H(28px) Mb(7px) Cf"},o.default.createElement("div",{className:"Fl(start) Pos(r) W(32px)"},o.default.createElement(p.default,I,o.default.createElement(f.default,{items:g,index:y}))),o.default.createElement("div",{className:"Ov(h) Pstart(4px)"},o.default.createElement(p.default,s({className:"Td(n)"},M),o.default.createElement("u",{className:"StretchedBox"}),o.default.createElement(c.default,{className:"C(#000) Fz(12px) Lh(14px) LineClamp(2,28px)",items:n.topRatedComments,index:y})))),o.default.createElement("div",{className:"Pos(r) Cf Bdtw(1px) Bdtc(#d9d9d9) Bdts(s) Pt(6px)"},o.default.createElement(p.default,s({className:"Fl(start) Fz(12px) Fw(b) Td(n) C($c-fuji-blue-1-a) Pt(2px)"},j),this.props.intl.formatMessage({id:"JOIN_THE_CONVERSATION",defaultMessage:"Join the conversation"})),x?null:o.default.createElement("div",{className:"Fl(end) C(#878c9b) Fw(b)"},o.default.createElement(a(29).I13nButton,{isLeafNode:!1,i13nModel:T,className:"jtdBtnPrev Lh(12px) Px(5px) Py(2px)",onClick:this.props.onClickPrev},o.default.createElement(a(34).Icon,{asset:u.default,color:"#878c9b",height:"12"})),o.default.createElement("span",{className:"Pos(r) Fz(11px) T(-2px)"},i+1," / ",l),o.default.createElement(a(29).I13nButton,{isLeafNode:!1,i13nModel:T,className:"jtdBtnNext Lh(12px)  Px(5px) Py(2px)",onClick:this.props.onClickNext},o.default.createElement(a(34).Icon,{asset:d.default,color:"#878c9b",height:"12"})))),o.default.createElement("div",{className:"Pos(a) T(-8px) End(-10px) W(39px) H(39px) Bg(commentBubbleImg) Bgz(39px,39px)"},o.default.createElement(p.default,F,o.default.createElement("u",{className:"StretchedBox"})),o.default.createElement("p",{className:"Fz(11px) Fw(b) C(#fff) Lts(0) Ta(c) Mt(4px)"},h.default.getCommentString(n.commentCount)),o.default.createElement("div",{className:"W(18px) H(6px) Bg(typingIcon) Bgz(18px,6px) Mstart(10px)"})))}});t.default=(0,a(36).injectIntl)(v),e.exports=t.default},1860:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){var n=t.componentProps||{},s=n.componentConfig||{},l=(0,i.default)(e,["session","query"])||{},r=e.getStore("RouteStore").getCurrentRoute(),u=o.default.getContentSite(r,e),d=s.category,c=d,f={category:l.category||d,comments:!0,count:s.count,enable_canvass_comments:(0,i.default)(s,["ui","enable_canvass_comments"]),maxCount:s.maxCount,link_out_allowed:s.linkOutAllowed,relative_links:s.relative_links,resizeTag:s.resizeTag,requireArticleWithComments:s.requireArticleWithComments,requireResizedImage:s.requireResizedImage,requireResizeTags:s.requireResizeTags,site:u,smart_crop:(0,i.default)(s,["ui","smart_crop"],!1),sentiment_comments_enabled:s.sentimentCommentsEnabled,top_rated_comments_enabled:s.topRatedCommentsEnabled};e.service.read("CommonStreamService",f,{},function(t,n){if(t||!n)return e.dispatch("LOAD_DISCUSSION_DATA_FAILURE",{err:t,category:c}),a&&a(t);(0,i.default)(s,["isHeadlineReaction"])&&n.length&&n.splice(1),e.dispatch("LOAD_DISCUSSION_DATA_SUCCESS",{data:n,category:c}),a&&a()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var i=n(a(2)),o=n(a(67));e.exports=t.default},1861:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=n(a(0)),o=n(a(1)),l=n(a(4)),r=n(a(8)),u=n(a(1708)),d=n(a(1425)),c=n(a(2)),f=n(a(296)),m=n(a(1202)),p=n(a(10)),h=n(a(39)),g=n(a(1384)),v="undefined"!=typeof document?document:null,y=(0,l.default)({autobind:!1,displayName:"DiscussionListItem",propTypes:{ad:i.default.object,adchoicesUrl:i.default.string,appendQueryParam:i.default.object,category:i.default.string,data:i.default.object.isRequired,index:i.default.number,intl:a(36).intlShape,isSidekick:i.default.bool,nativeAdDimension:i.default.array,navParams:i.default.object,prerenderConfig:i.default.object,sponsoredUrl:i.default.string,target:i.default.string,renderFlyoutInOverlay:i.default.bool},contextTypes:{i13n:i.default.object},getDefaultProps:function(){return{ad:null,appendQueryParam:{},data:null,index:0,prerenderConfig:null,renderFlyoutInOverlay:!1}},getInitialState:function(){return this.currentNode=null,this.flyoutTimer=null,{itemHover:!1,renderFlyout:!1}},componentWillMount:function(){this.onMouseEnterItem=this.onMouseEnterItem.bind(this),this.onMouseLeaveItem=this.onMouseLeaveItem.bind(this),this.handleScroll=this.handleScroll.bind(this)},componentDidMount:function(){this.currentNode=p.default.findDOMNode(this),this.subscriber=(0,h.default)("scrollStart",this.handleScroll)},componentDidUpdate:function(){this.currentNode=p.default.findDOMNode(this)},componentWillUnmount:function(){this.subscriber&&this.subscriber.unsubscribe(),this.clearTimers()},clearTimers:function(){clearTimeout(this.flyoutTimer)},handleScroll:function(e){this.state.renderFlyout&&this.setState({renderFlyout:!1}),this.shouldRenderFlyoutInOverlay()&&this.hideFlyoutInOverlay()},fireBeacon:function(){this.props.isSidekick?this.context.i13n.executeEvent("beacon",{beaconType:"beaconClick",arguments:["sdkick",null,null,{itc:2,subsec:"sentiment"}]}):this.context.i13n.executeEvent("beacon",{beaconType:"beaconClick",arguments:["jtc",null,null,{itc:2,subsec:"module"}]})},fixZIndex:function(e,t){if(v){var a=v.getElementById("Main");a?("enter"===e?(a.style.zIndex=0,a.style.position="relative"):(a.style.zIndex="",a.style.position=""),t()):t()}},shouldRenderFlyoutInside:function(){var e=this.props,t=(0,c.default)(this.props,["data","commentCount"]);return e.enableFlyout&&t&&!e.renderFlyoutInOverlay},shouldRenderFlyoutInOverlay:function(){var e=this.props,t=(0,c.default)(this.props,["data","commentCount"]);return e.enableFlyout&&t&&e.renderFlyoutInOverlay},onMouseEnterItem:function(){var e=this;e.state.renderFlyout||e.fireBeacon(),e.clearTimers(),e.setState({itemHover:!0}),e.flyoutTimer=setTimeout(function(){var t=e.shouldRenderFlyoutInside(),a=e.shouldRenderFlyoutInOverlay(),n={renderFlyout:t};return a?void e.showFlyoutInOverlay():t?void e.fixZIndex("enter",function(){e.setState(n)}):void e.setState(n)},e.props.delay)},onMouseLeaveItem:function(){var e=this;e.clearTimers(),e.setState({itemHover:!1}),e.flyoutTimer=setTimeout(function(){var t=e.shouldRenderFlyoutInside(),a={renderFlyout:!1};return e.shouldRenderFlyoutInOverlay()?void e.hideFlyoutInOverlay():t?void e.fixZIndex("leave",function(){e.setState(a)}):void e.setState(a)},e.props.delay)},getId:function(){var e=this.props.data||{},t=this.props.index||0;return"jtc-"+(e.uuid||e.id||"-flyout-item")+"-"+t},showFlyoutInOverlay:function(){this.executeAction(a(1474).show,{id:this.getId(),data:{align:"left",alignToViewport:!0,Component:u.default,componentProps:this.getFlyoutProps(),flyoutWidth:370,flyoutHeight:this.props.ad?535:445,parentNode:this.currentNode,paddingRight:20,relativeToParent:!1}})},hideFlyoutInOverlay:function(){this.executeAction(a(1474).hide,{id:this.getId()})},renderComment:function(e){var t=this.props.data,n={className:(0,r.default)("Pos(r) Cur(p) Bdw(0) Va(m) Td(n) P(0) D(ib)"),model:Object.assign({},{elm:"cmmt_go",pos:1,slk:"comments",subsec:t.commentCount})},i=t.link||t.url||"";n.followLink="/"!==i.charAt(0),n.href=i,n.model.itc=0,n.navParams=Object.assign({},e,{collapseContent:!0,uuid:t.uuid||""}),n.target=this.props.target;var l=this.props.intl.formatNumber(t.commentCount)+" ";return o.default.createElement(f.default,s({className:"Td(n)"},n),o.default.createElement("span",{className:"Fz(11px) Ta(start) C($c-fuji-grey-f) C($c-fuji-blue-1-a):h"},l,o.default.createElement(a(36).FormattedMessage,{id:"REACTIONS",defaultMessage:"reactions"})))},getFlyoutProps:function(){var e=this.props.data,t=this.getSentimentsRatio();if(!e.topRatedComments||!t)return null;var a,n=this.props.isSidekick,s=g.default.updateQueryParam(e.link||e.url||"",this.props.appendQueryParam),i=t.negative,o=t.neutral,l=t.positive,r=g.default.getBaseI13n(e,this.props.index,this.props.category),u=l,d=90*(l-i)/100;return i>l?(a="negative",u=i):a="positive",o>u&&(a="neutral"),{ad:this.props.ad,adchoicesUrl:this.props.adchoicesUrl,comments:e.topRatedComments,commentsCount:e.commentCount,index:this.props.index,isSidekick:n,model:r,nativeAdDimension:this.props.nativeAdDimension,navParams:this.props.navParams,onMouseEnter:this.onMouseEnterItem,onMouseLeave:this.onMouseLeaveItem,sentiment:a,sentimentDegree:d,sponsoredUrl:this.props.sponsoredUrl,title:e.title,url:s,uuid:e.uuid}},renderFlyout:function(){var e=this.getFlyoutProps();return e?o.default.createElement(d.default,{align:"left",alignToViewport:!0,Component:u.default,componentProps:e,flyoutWidth:370,flyoutHeight:this.props.ad?535:445,parentNode:this.currentNode,paddingRight:20,relativeToParent:!0}):null},getSentimentsRatio:function(){var e=this.props.data,t=e.total_negative_comments,a=e.total_neutral_comments,n=e.total_postive_comments;if(void 0===t||void 0===a||void 0===n)return null;var s=t+a+n;if(!s)return null;var i=Math.round(t/s*100),o=Math.round(a/s*100);return{negative:i,neutral:o,positive:100-i-o}},renderSentiment:function(){var e=this.getSentimentsRatio();if(!e)return null;var t="W(15px) H(15px) D(ib) Va(tt) Bgz(330%)",a=e.neutral+"%",n=e.negative+"%",s=e.positive+"%";return o.default.createElement("div",{className:"sentiments W(100%) Mt(4px) Va(b)"},o.default.createElement("span",{className:"D(ib) Pend(6px)"},o.default.createElement("span",{className:(0,r.default)(t,"Bg(positiveImg)")}),o.default.createElement("span",{className:(0,r.default)("C($c-fuji-green-1-b)","Pstart(3px) Fz(11px) Fw(b)")},s)),o.default.createElement("span",{className:"D(ib) Pend(6px)"},o.default.createElement("span",{className:(0,r.default)(t,"Bg(neutralImg)")}),o.default.createElement("span",{className:(0,r.default)("C($c-fuji-orange-b)","Pstart(3px) Fz(11px) Fw(b)")},a)),o.default.createElement("span",{className:"D(ib)"},o.default.createElement("span",{className:(0,r.default)(t,"Bg(negativeImg)")}),o.default.createElement("span",{className:(0,r.default)("C($c-fuji-red-2-a)","Pstart(3px) Fz(11px) Fw(b)")},n)))},render:function(){var e=this.props,t=this.state,n=e.data;if(!n)return null;var i=g.default.updateQueryParam(n.link||n.url||"",e.appendQueryParam),l=e.prerenderConfig||{},u=e.isSidekick;n.id=n.uuid;var d,c=Object.assign({category:"",pageTitle:n.title,url:i,uuid:n.id},e.navParams),p={followLink:n.bypassModal||"/"!==i.charAt(0),href:i,target:n.off_network?e.target:void 0,navParams:c},h=g.default.getBaseI13n(n,e.index,e.category),v=u?"medium":"img:150x111",y=g.default.getResizedImage(n.imageSize,v),b=g.default.isLazyLoad(e.index,e.forceLoadImageCount,u);if(y){var x,E=(0,r.default)("Fl(start) Pos(r) Z(1) W(150px)"),N=Math.round(y.height/y.width*100),_=Object.assign({},p,{className:"D(b) H(0) Ov(h) Bdrs(2px)",model:Object.assign({},{elm:"img",subsec:"module"},h),style:{paddingBottom:N+"%"}}),C={alt:n.title,checkPosition:!1,className:"W(100%) Trsdu(0s)!",forceLoad:b,url:y.url},P=o.default.createElement("span",{className:"Tsh(discussionTextShadow) Pos(a) Fz(32px) Lh(30px) Start(8px) B(6px) C($c-fuji-grey-a) Fw(b)"},e.index+1),S=o.default.createElement("div",{className:"Bg(discussionImgRankGradient) StretchedBox"});if(e.typeIcon&&u){x=o.default.createElement(a(1197).TypeIcon,{iconSize:20,lazyLoad:!1,orbSize:50,type:e.typeIcon})}d=o.default.createElement("div",{className:E},o.default.createElement(f.default,_,o.default.createElement(a(80).Img,C),x,S,u?null:P))}var M=Object.assign({},p,{className:"Td(n)",model:Object.assign({},{elm:"hdln",subsec:"module"},h)}),I=(0,r.default)("Fw(b) Pos(r)",{"LineClamp(4,60px) Fz(13px) Lh(15px)":e.enableComments&&e.enableSentiments,"LineClamp(5,80px) Fz(13px) Lh(16px)":!e.enableComments&&e.enableSentiments||!e.enableSentiments&&e.enableComment,"LineClamp(5,100px) Fz(14px) Lh(20px)":!e.enableComments&&!e.enableSentiments,"C(#000)":!t.itemHover,"C($c-fuji-blue-1-a)":t.itemHover});return o.default.createElement("div",{key:e.index,className:"Py(10px) Pos(r)",onMouseEnter:this.onMouseEnterItem,onMouseLeave:this.onMouseLeaveItem},o.default.createElement(m.default,s({className:"Cf",nodeName:"div",payload:{url:i}},l),o.default.createElement(a(29).I13nDiv,{i13nModel:h},d,o.default.createElement("div",{className:"H(111px) Ov(h) Pstart(15px) Pos(r)"},o.default.createElement("p",{className:"W(27px) H(1px) Bdtw(1px) Bdts(s) Bdtc($c-fuji-grey-d) Mb(6px)"}),o.default.createElement("h3",{className:"Mb(5px)"},o.default.createElement(f.default,M,o.default.createElement("div",{className:I},n.title))),n.commentCount?o.default.createElement("div",{className:"Pos(a) W(100%) B(0)"},e.enableComments?this.renderComment(c):null,e.enableSentiments?this.renderSentiment():null):null))),t.renderFlyout?this.renderFlyout():null)}});t.default=(0,a(36).injectIntl)(y),e.exports=t.default},2176:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a(0)),i=n(a(1)),o=n(a(4)),l=n(a(8)),r=n(a(1859)),u=n(a(1707)),d=n(a(19)),c=n(a(2)),f=n(a(1860)),m=n(a(1206)),p=n(a(1384)),h="undefined"!=typeof window?window:null;t.default=(0,o.default)({autobind:!1,displayName:"DiscussionCarousel",mixins:[d.default],contextTypes:{session:s.default.object},statics:{initializeAction:f.default},propTypes:{className:s.default.string,componentConfig:s.default.object,id:s.default.string},getDefaultProps:function(){return{componentConfig:{}}},getInitialState:function(){return this.discussionStore=this.getStore(u.default),this._getState(this.props)},_getState:function(e){var t=e.componentConfig||{},a=t.category,n=t.ui||{},s=n.autoRotation,i=this.discussionStore.getDiscussionList(a)||[];return{autoRotation:s,discussions:i,category:a,index:0,isHeadlineReaction:t.isHeadlineReaction||!1,total:i.length}},_jump:function(e){this.setState({index:p.default.getLoopIndex(this.state.index,e,this.state.total)})},_handlePrev:function(e){this._jump(-1)},_handleNext:function(e){this._jump(1)},_handleMouseEnter:function(e){this.setState({autoRotation:!1})},_handleMouseLeave:function(e){this.setState({autoRotation:(0,c.default)(this.props,["componentConfig","ui","autoRotation"])})},_enableAutoRotation:function(){if(h){var e=this,t=(0,c.default)(e.props,["componentConfig","ui","storyRotationInterval"]);e._disableAutoRotation(),e.timer=setInterval(function(){e._jump(1)},t)}},_disableAutoRotation:function(){h&&this.timer&&clearInterval(this.timer)},componentWillReceiveProps:function(e){this.state.category!==(0,c.default)(e,["componentConfig","category"])&&this.setState(this._getState(e))},componentWillMount:function(){this._handlePrev=this._handlePrev.bind(this),this._handleNext=this._handleNext.bind(this),this._handleMouseEnter=this._handleMouseEnter.bind(this),this._handleMouseLeave=this._handleMouseLeave.bind(this)},componentWillUnmount:function(){this._disableAutoRotation()},render:function(){var e=this.props,t=this.state,n=t.discussions,s=e.componentConfig,o=t.total,u=this.state.isHeadlineReaction;if(0===o)return null;t.autoRotation?this._enableAutoRotation():this._disableAutoRotation();var d=t.index,f=(0,c.default)(s,["ui","commentRotationInterval"]),p=!0,h="Bgc(#fff) Bxz(bb)";if(u){var g=this.context.session.getBucketMeta();p="true"===(0,c.default)(g,["feature.hrShowBorder"],"true")}p&&(h+=" Bdrs(2px) Bxsh(jtdCardShadow) Bdw(1px) Bdc(#d9d9d9) Bds(s)");var v=Object.assign({cat:s.category,itc:0,sec:"jtd"},s.i13n);return u&&n[d]&&!n[d].topRatedComments?null:i.default.createElement("div",null,s.headline?i.default.createElement("h3",{className:"Fz(15px) Fw(b) Lh(27px) Mb(10px)"},s.headline):null,i.default.createElement(a(29).I13nDiv,{className:(0,l.default)("mini-jtd Pos(r)",e.className),i13nModel:v,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave},i.default.createElement(m.default,{transitionName:"jtdBgTrans",transitionEnterTimeout:350,transitionLeaveTimeout:350},i.default.createElement("div",{key:"jtd-bg-"+d,className:(0,l.default)("Pos(a) T(10px) Start(5px) End(5px) H(128px)",h)})),i.default.createElement("div",{id:this.props.id,className:(0,l.default)("Pos(r)",{"H(133px)":!u,"H(270px) Mb(20px)":u})},i.default.createElement(m.default,{transitionName:"jtdTrans",transitionEnterTimeout:350,transitionLeaveTimeout:350},i.default.createElement(r.default,{key:"jtd-"+d,appendQueryParam:s.appendQueryParam,autoRotation:t.autoRotation,className:(0,l.default)("Pos(a) H(100%) W(100%)",h),category:t.category,i13n:s.i13n,rotationInterval:f,renderTarget:s.linkRenderTarget,data:n[d],index:d,isHeadlineReaction:u,total:o,onClickPrev:this._handlePrev,onClickNext:this._handleNext})))))}}),e.exports=t.default},2177:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a(1)),i=n(a(0)),o=n(a(4)),l=n(a(1195)),r=n(a(1861)),u=n(a(1707)),d=n(a(19)),c=n(a(2)),f=n(a(11)),m=n(a(1860)),p=n(a(1429)),h=n(a(1205)),g=n(a(1384)),v=n(a(1201));t.default=(0,o.default)({autobind:!1,displayName:"DiscussionList",mixins:[d.default],propTypes:{componentConfig:i.default.object,id:i.default.string},contextTypes:{i13n:i.default.object},statics:{componentConfig:{name:"componentDiscussionList"},initializeAction:m.default,storeListeners:[h.default]},getInitialState:function(){return this.discussionStore=this.getStore(u.default),this.nativeAdStore=this.getStore(h.default),{ads:null}},componentDidMount:function(){this.loadNativeAd(),this.fireLinkView()},componentWillMount:function(){this.onChange=this.onChange.bind(this)},onChange:function(e){if("jtd-community-id"===e.nativeAd){this.setState({ads:(this.nativeAdStore.popAds("jtd-community-id")||f.default.List()).toJS()})}},componentDidUpdate:function(e){var t=this.props.componentConfig,a=t.category,n=this.discussionStore.getDiscussionList(a)||[];if(t.dispatchContentStore){var s=(0,c.default)(t,["ui","use_caas"],!1);this.executeAction(l.default,{loadContentAction:s?v.default:void 0,items:n,prefetch:t.usePrefetch,snippets:!0,sourceId:this.props.id})}},fireLinkView:function(e){this.context.i13n.executeEvent("beacon",{beaconType:"beaconLinkViews",arguments:[[{sec:"jtc",_links:[{subsec:"module"}]}]]},e)},loadNativeAd:function(){var e=this.props.componentConfig,t=(0,c.default)(e,["ads","adsCount"]),a=(0,c.default)(e,["ads","enableGeminiAd"]),n=(0,c.default)(e,["ads","nativeAdDimension"]);a&&this.executeAction(p.default,{id:"jtd-community-id",dimensions:n,count:t})},renderList:function(){var e=this.state.ads,t=this.props.componentConfig,a=(0,c.default)(t,["ads","adchoicesUrl"]),n=t.appendQueryParam,i=t.category,o=(0,c.default)(t,["ui","flyoutDelay"]),l=this.discussionStore.getDiscussionList(i)||[],u=t.flyoutEnabled,d=t.sentimentCommentsEnabled,f=t.reactionNumberEnabled,m=(0,c.default)(t,["ads","nativeAdDimension"]),p=t.prerender||{},h=(0,c.default)(t,["ads","sponsoredUrl"]),v=(0,c.default)(t,["offnet","target"]);return l=l.map(function(c,y){var b,x=e&&e[y],E=t.ui||{};if(E.storyline_navparam_enabled){b={relatedUuids:g.default.getRelatedUuids(E.stream_navparam_count||0,l,y)}}return s.default.createElement(r.default,{key:y,ad:x,adchoicesUrl:a,appendQueryParam:n,category:i,data:c,delay:o,enableFlyout:u,enableSentiments:d,enableComments:f,index:y,navParams:b,nativeAdDimension:m,sponsoredUrl:h,target:v,prerenderConfig:p})})},render:function(){var e=this.props.componentConfig;if(0===(this.discussionStore.getDiscussionList(e.category)||[]).length)return null;var t=Object.assign({cat:e.category,itc:2,sec:"jtc",subsec:"module"});return s.default.createElement(a(29).I13nDiv,{className:"Pos(r)","data-test-locator":"jtd",i13nModel:t},s.default.createElement("h2",{className:"Fz(15px) Fw(b) C(#000) M(0) Mb(10px)"},s.default.createElement(a(36).FormattedMessage,{id:e.useTrendingHeadline?"TRENDING":"COMMUNITY_JTC"})),this.renderList())}}),e.exports=t.default},2178:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a(1)),i=n(a(0)),o=n(a(4)),l=n(a(2)),r=n(a(510));t.default=(0,o.default)({autobind:!1,displayName:"NativeAd",propTypes:{className:i.default.string},getDefaultProps:function(){return{adChoicesUrl:"https://info.yahoo.com/privacy/us/yahoo/relevantads.html",sponsoredUrl:"http://help.yahoo.com/kb/index?page=content&y=PROD_FRONT&locale=en_US&id=SLN14553"}},render:function(){var e=this.props,t=e.data;if(!t)return null;var n=t.adChoicesUrl||e.choicesUrl,i=(0,l.default)(t,["resizedImage",e.nativeAdDimension]),o=e.sponsoredUrl;return s.default.createElement("div",{className:this.props.className},s.default.createElement(a(1191).Controls.PrimaryImage,{checkPosition:!1,className:"D(ib) W(118px) H(61px) Pstart(26px)",data:t,imageOverride:i}),s.default.createElement("div",{className:"D(ib) Va(t) W(180px) Pstart(11px)"},s.default.createElement(a(1191).Controls.PrimaryLink,{className:"Td(n)",data:t},s.default.createElement(a(1191).Controls.Headline,{className:"Fz(13px) C(#000) Fw(500) LineClamp(2,36)",data:t}),s.default.createElement("u",{className:"StretchedBox Z(1)"})),s.default.createElement("div",{className:"Pt(3px) Z(2) Pos(r)"},s.default.createElement(a(29).I13nAnchor,{href:o,className:"Td(n) Fw(b) Fz(11px) Pend(1px) C($c-fuji-grey-f)",target:"_blank"},s.default.createElement(a(36).FormattedMessage,{id:"SPONSORED",defaultMessage:"Sponsored"})),s.default.createElement(a(29).I13nAnchor,{href:n,className:"Td(n) C($c-fuji-grey-f)",target:"_blank"},s.default.createElement(a(34).Icon,{asset:r.default,color:"#979ba7",height:13})),s.default.createElement(a(1191).Controls.Publisher,{className:"Td(n) Pstart(8px) Fz(11px) C($c-fuji-grey-f)",target:"_blank",data:t}))))}}),e.exports=t.default},2179:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=n(a(1)),o=n(a(4)),l=n(a(19)),r=n(a(1425)),u=n(a(1709)),d="undefined"==typeof window;t.default=(0,o.default)({autobind:!1,displayName:"FlyoutContainer",mixins:[l.default],statics:{storeListeners:[u.default]},getInitialState:function(){return this.flyoutStore=this.getStore(u.default),this.getState()},onChange:function(e){this.setState(this.getState())},getState:function(){return{flyouts:this.flyoutStore.getFlyouts()}},componentWillMount:function(){d||(this.onChange=this.onChange.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this))},onMouseEnter:function(e){var t=this;return function(){t.executeAction(a(1474).show,{id:e})}},onMouseLeave:function(e,t){var n=this;return function(){n.executeAction(a(1474).hide,{delay:t,id:e})}},renderFlyouts:function(){var e=[],t=this.state.flyouts||{};for(var a in t)if(t[a]&&t[a].Component&&t[a].show){var n=t[a],o=t[a].hideDelay;e.push(i.default.createElement(r.default,s({key:a,onMouseEnter:this.onMouseEnter(a),onMouseLeave:this.onMouseLeave(a,o)},n)))}return e},render:function(){var e=this.renderFlyouts();return 0===e.length?null:i.default.createElement("div",{className:"Pos(a)"},e)}}),e.exports=t.default},2180:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a(0)),i=n(a(1)),o=n(a(4)),l=n(a(2181)),r=n(a(1384));t.default=(0,o.default)({autobind:!1,displayName:"DiscussionStreamItem",propTypes:{config:s.default.object.isRequired,data:s.default.object.isRequired},render:function(){var e=this.props,t=e.config,a=t.category,n=e.data;if(!n)return null;n=r.default.processStreamData(n);var s=t.flyout_enabled,o=t.sentiment_comments_enabled,u=r.default.isSidekick(a),d=r.default.getTypeIcon(n);return i.default.createElement(l.default,{category:a,data:n,enableFlyout:s,enableSentiments:o,forceLoadImageCount:4,index:e.index,isSidekick:u,navParams:e.navParams,renderFlyoutInOverlay:!0,typeIcon:d})}}),e.exports=t.default},2181:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a(1)),i=n(a(4)),o=n(a(8)),l=n(a(2182)),r=n(a(2183)),u=n(a(19)),d=n(a(296)),c=n(a(1384)),f=(0,i.default)({autobind:!1,displayName:"DiscussionCardItem",mixins:[u.default,r.default],render:function(){var e=this.props,t=this.state,n=e.data;if(!n)return null;var i=n.link||n.url;n.id=n.uuid;var r,u=Object.assign({category:"",pageTitle:n.title,url:i,uuid:n.id},e.navParams),f={followLink:n.bypassModal||"/"!==i.charAt(0),href:i,navParams:u},m=c.default.getBaseI13n(n,e.index,e.category),p=c.default.getResizedImage(n.imageSize,"medium"),h=c.default.isLazyLoad(e.index,e.forceLoadImageCount);if(p){var g=Math.round(p.height/p.width*100),v={alt:n.title,checkPosition:!1,className:"Bgz(cv) Bdrs(2px) Trsdu(0s)! Mb(6px)",forceLoad:h,nodeName:"div",url:p.url};v.style={paddingBottom:g+"%"};var y={maxWidth:p.width+"px"},b=s.default.createElement(a(1197).TypeIcon,{iconSize:26,lazyLoad:!1,orbSize:66,type:e.typeIcon});r=s.default.createElement("div",{className:"Pos(r)",style:y},s.default.createElement(a(80).Img,v),b)}var x=Object.assign({},f,{className:"Td(n)",model:Object.assign({},{elm:"hdln",subsec:"module"},m)}),E=(0,o.default)("Fw(600) Fz(14px) Lh(16px) LineClamp(4,64px)",{"C(#000)":!t.itemHover,"C($c-fuji-blue-1-a)":t.itemHover}),N={data:n,enableSentiments:e.enableSentiments,intl:e.intl};return s.default.createElement(a(29).I13nDiv,{key:e.index,className:"Py(10px) Pos(r)",i13nModel:m,onMouseEnter:this.onMouseEnterItem,onMouseLeave:this.onMouseLeaveItem},r,s.default.createElement("h3",{className:"Pb(6px)"},s.default.createElement(d.default,x,s.default.createElement("span",{className:E},n.title),s.default.createElement("u",{className:"StretchedBox Z(1)"}))),n.commentCount?s.default.createElement(l.default,N):null)}});t.default=(0,a(36).injectIntl)(f),e.exports=t.default},2182:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=n(a(0)),o=n(a(1)),l=n(a(4)),r=n(a(8)),u=n(a(296)),d=n(a(1384));t.default=(0,l.default)({autobind:!1,displayName:"CommentSentimentsBar",propTypes:{data:i.default.object.isRequired,enableSentiments:i.default.bool,intl:a(36).intlShape},getDefaultProps:function(){return{data:{},enableSentiments:!1}},renderComment:function(e){var t=this.props.data,n=this.props.intl,i=t.commentCount,l={className:"Cur(p) Va(m) Td(n) P(0)",model:Object.assign({},{elm:"cmmt_go",pos:1,slk:"comments",subsec:i})},r=t.link||t.url||"";l.followLink="/"!==r.charAt(0),l.href=r,l.model.itc=0,l.navParams=Object.assign({},e,{collapseContent:!0,uuid:t.uuid||""});var d=(n?n.formatNumber(i):i)+" ";return o.default.createElement(u.default,s({className:"Td(n)"},l),o.default.createElement("span",{className:"Fz(11px) Ta(start) C($c-fuji-grey-h) C($c-fuji-blue-1-a):h"},d,o.default.createElement(a(36).FormattedMessage,{id:"REACTIONS",defaultMessage:"reactions"})))},renderSentiment:function(){var e=this.props.data,t=d.default.getSentimentsRatio(e.total_negative_comments,e.total_postive_comments,e.total_neutral_comments);if(!t)return null;var a="W(15px) H(15px) D(ib) Va(tt) Bgz(330%)",n=t.neutral+"%",s=t.negative+"%",i=t.positive+"%";return o.default.createElement("span",{className:"sentiments Fl(end)"},o.default.createElement("span",{className:"Pend(6px)"},o.default.createElement("span",{className:(0,r.default)(a,"Bg(positiveImg)")}),o.default.createElement("span",{className:(0,r.default)("C($c-fuji-green-1-b)","Pstart(3px) Fz(11px) Fw(b)")},i)),o.default.createElement("span",{className:"Pend(6px)"},o.default.createElement("span",{className:(0,r.default)(a,"Bg(neutralImg)")}),o.default.createElement("span",{className:(0,r.default)("C($c-fuji-orange-b)","Pstart(3px) Fz(11px) Fw(b)")},n)),o.default.createElement("span",null,o.default.createElement("span",{className:(0,r.default)(a,"Bg(negativeImg)")}),o.default.createElement("span",{className:(0,r.default)("C($c-fuji-red-2-a)","Pstart(3px) Fz(11px) Fw(b)")},s)))},render:function(){var e=this.props,t=e.data;return t?o.default.createElement("div",null,this.renderComment({category:"",pageTitle:t.title,url:t.link||t.url,uuid:t.id||t.uuid}),e.enableSentiments?this.renderSentiment():null):null}}),e.exports=t.default},2183:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(a(0)),i=n(a(1708)),o=n(a(2)),l=n(a(10)),r=n(a(39)),u=n(a(1384));t.default={autobind:!1,propTypes:{ad:s.default.object,category:s.default.string,data:s.default.object.isRequired,index:s.default.number,renderFlyoutInOverlay:s.default.bool},contextTypes:{i13n:s.default.object},getDefaultProps:function(){return{ad:null,category:null,data:null,index:0,renderFlyoutInOverlay:!1}},getInitialState:function(){return this.currentNode=null,{itemHover:!1}},componentWillMount:function(){this.onMouseEnterItem=this.onMouseEnterItem.bind(this),this.onMouseLeaveItem=this.onMouseLeaveItem.bind(this),this.handleScroll=this.handleScroll.bind(this)},componentDidMount:function(){this.currentNode=l.default.findDOMNode(this),this.subscriber=(0,r.default)("scrollStart",this.handleScroll)},componentDidUpdate:function(){this.currentNode=l.default.findDOMNode(this)},componentWillUnmount:function(){this.subscriber&&this.subscriber.unsubscribe()},fireBeacon:function(){this.props.isSidekick?this.context.i13n.executeEvent("beacon",{beaconType:"beaconClick",arguments:["sdkick",null,null,{itc:2,subsec:"sentiment"}]}):this.context.i13n.executeEvent("beacon",{beaconType:"beaconClick",arguments:["jtc",null,null,{itc:2,subsec:"module"}]})},handleScroll:function(e){this.shouldRenderFlyoutInOverlay()&&this.hideFlyoutInOverlay(!1)},hideFlyoutInOverlay:function(e){this.executeAction(a(1474).hide,{delay:e,id:this.getId()})},getFlyoutProps:function(){var e=this.props.data,t=u.default.getSentimentsRatio(e.total_negative_comments,e.total_postive_comments,e.total_neutral_comments);if(!e.topRatedComments||!t)return null;var a,n=this.props.isSidekick,s=u.default.updateQueryParam(e.link||e.url||"",this.props.appendQueryParam),i=t.negative,o=t.neutral,l=t.positive,r=u.default.getBaseI13n(e,this.props.index,this.props.category),d=l,c=90*(l-i)/100;return i>l?(a="negative",d=i):a="positive",o>d&&(a="neutral"),{ad:this.props.ad,adchoicesUrl:this.props.adchoicesUrl,comments:e.topRatedComments,commentsCount:e.commentCount,index:this.props.index,isSidekick:n,model:r,nativeAdDimension:this.props.nativeAdDimension,navParams:this.props.navParams,onMouseEnter:this.onMouseEnterItem,onMouseLeave:this.onMouseLeaveItem,sentiment:a,sentimentDegree:c,sponsoredUrl:this.props.sponsoredUrl,title:e.title,url:s,uuid:e.uuid}},getId:function(){var e=this.props.data||{},t=this.props.index||0;return"jtc-"+(e.uuid||e.id||"-flyout-item")+"-"+t},onMouseEnterItem:function(){this.state.itemHover||this.fireBeacon(),this.shouldRenderFlyoutInOverlay()&&this.showFlyoutInOverlay(),this.setState({itemHover:!0})},onMouseLeaveItem:function(){this.shouldRenderFlyoutInOverlay()&&this.hideFlyoutInOverlay(!0),this.setState({itemHover:!1})},getFlyoutHeight:function(){var e=this.props.data,t=e.topRatedComments&&e.topRatedComments.length,a=535;return this.props.ad||(a=a-78-16),t=t>=3?2:t,a-=99*(2-t)},showFlyoutInOverlay:function(){this.getFlyoutProps()&&this.executeAction(a(1474).show,{id:this.getId(),data:{align:"left",alignToViewport:!0,Component:i.default,componentProps:this.getFlyoutProps(),flyoutWidth:370,flyoutHeight:this.getFlyoutHeight(),paddingRight:20,parentNode:this.currentNode,relativeToParent:!1}})},shouldRenderFlyoutInOverlay:function(){var e=this.props,t=(0,o.default)(this.props,["data","commentCount"]);return e.enableFlyout&&t&&e.renderFlyoutInOverlay}},e.exports=t.default}});