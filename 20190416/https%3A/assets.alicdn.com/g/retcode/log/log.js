!function(){function e(t,n,o){function r(a,c){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!c&&s)return s(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){return r(t[a][1][e]||e)},f,f.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}return e}()({1:[function(e,t,n){t.exports=function(e,t){for(var n,o=[],r=["custom","error","performance","retCode","speed","log"],i=0;n=r[i++];)e[n]=function(e){return function(){o.push({type:e,params:Array.prototype.slice.call(arguments)})}}(n);e.reloaded=function(){e.ready();for(var t=0,n=o.length;t<n;t++)e[o[t].type].apply(e,o[t].params)},e.reloadFailed=function(){"function"==typeof t&&t()}}},{}],2:[function(e,t,n){t.exports=function(e,t){var n=e.startTime||e.config.startTime,o=n;if(!n)try{n=window.performance.timing.responseStart||+new Date,o=+new Date}catch(c){o=n=+new Date}var r=function(t,n){n=n||e.config.sample,t.tag=e.config.tag&&e.safetyCall(e.config.tag,[],e.config.tag+"")||"",e.sampling(n,"retcode"==t.type)==(e.config.modVal||1)&&(t.sampling=n,e.send(t))};e.custom=function(e,n,o){var i={type:"custom"};"time"!=(e=["time","count"][e]||e)&&"count"!=e||(i.category=e),i.type&&(i.key=n,i.value="time"==e?o:t,r(i))};var i=function(e,t){if(!e)return!0;if(!t)return!1;try{var n=Object.prototype.toString.call(t).substring(8).replace("]","");if("Function"===n)return!!t(e);if("RegExp"===n)return t.test(e);if("String"===n)return e.indexOf(t)>=0}catch(o){"object"==typeof window&&window.console&&console.error("retcode log errMsgFitler error",o)}return!1};e.error=function(t,n,o,a,s,u){var f={type:"jserror"};if(1===arguments.length&&(n=t,t=undefined),n){if(f.category=t||"sys","object"==typeof n&&n.message){var d=n;try{n=d.message,o=o||d.filename,a=a||d.lineno,s=s||d.colno}catch(c){}}else if("object"==typeof n)try{n=JSON.stringify(n)}catch(c){}try{n=n?n.substring(0,1e3):""}catch(c){n=""}if(u=u?u.substring(0,1e3):"",f.msg=n,e.config&&e.config.errMsgFilter&&i(n,e.config.errMsgFilter))return;o&&(f.file=o),a&&(f.line=a),s&&(f.col=s),u&&(f.stack=u),r(f,1)}},e.performance=function(t){var n={type:"per"};r(e.extend(n,t))},e.retCode=function(t,o,i,a,s){var u={type:"retcode",sampling:this.config.retCode[t]};if("object"==typeof t){try{t.msg=t.msg?t.msg.substring(0,1e3):""}catch(c){t.msg=""}u.sampling=t.api?this.config.retCode[t.api]:1,u.api=t.api,u.issucess=t.issuccess,u.delay="number"==typeof t.delay?parseInt(t.delay,10):new Date-n,u.msg=t.msg||(t.issuccess?"success":"fail"),u.detail=t.detail||"",u.traceId=t.traceId||"",delete(u=e.extend(t,u)).issuccess}else{try{s=s?s.substring(0,1e3):""}catch(c){s=""}u=e.extend({api:t,issucess:o,delay:"number"==typeof i?parseInt(i,10):new Date-n,msg:a||(o?"success":"fail"),detail:s||""},u)}"undefined"!=typeof u.delay&&"undefined"!=typeof u.issucess&&r(u,u.issucess?u.sampling:1)};var a=function(){for(var t,n={type:"speed"},o=0,i=e.speed.points.length;o<i;o++)(t=e.speed.points[o])&&(n["s"+o]=t,e.speed.points[o]=null);r(n)};e.speed=function(t,r,i){var c;"string"==typeof t&&(t=parseInt(t.slice(1),10)),"number"==typeof t&&((c=e.speed.points||new Array(11))[t]="number"==typeof r?r>864e5?r-n:r:new Date-n,c[t]<0&&(c[t]=new Date-o),e.speed.points=c),clearTimeout(e.speed.timer),i?a():e.speed.timer=setTimeout(a,3e3)},e.log=function(e,t){r({type:"log",msg:e},t)}}},{}],3:[function(e,t,n){t.exports=function(e,t,n){var o={spm:e.getSpmId()},r=t.onerror;({init:function(){this.lockPerformanceSpm(),this.sendPerformance(),this.bind(),/wpodebug\=1/.test(location.search)&&(e.config.sample=1,e.config.modVal=1,e.debug=!0)},bind:function(){e.on(t,"beforeunload",function(){e.clear(),e.speed.points&&e.speed(null,null,!0)},!0),t.onerror=function(t,n,o,i,a){r&&r(t,n,o,i,a);var c=a&&a.stack;n?e.error("sys",t,n,o,i,c):e.error(t)}},analyzeTiming:function(){var e={rrt:["responseStart","requestStart"],dns:["domainLookupEnd","domainLookupStart"],cnt:["connectEnd","connectStart"],ntw:["responseStart","fetchStart"],dct:["domContentLoadedEventStart","fetchStart"],flt:["loadEventStart","fetchStart"]};try{var n=performance.timing;for(var r in e){var i=n[e[r][1]],a=n[e[r][0]];if(i&&a){var c=a-i;c>=0&&c<864e5&&(o[r]=c)}}var s=t.navigator.connection;o.ct=s?s.effectiveType||s.type:""}catch(u){}return o},lockPerformanceSpm:function(){if(!o.spm){var e=function(){var e=n&&n.getSpmId&&n.getSpmId();e&&(o.spm=e)},t=function(){"complete"===document.readyState?e():document.addEventListener?(document.removeEventListener("DOMContentLoaded",t,!1),e()):"complete"===document.readyState&&(document.detachEvent("onreadystatechange",t),e())};document.addEventListener?document.addEventListener("DOMContentLoaded",t,!1):document.attachEvent&&document.attachEvent("onreadystatechange",t)}},sendPerformance:function(){var n=this;"complete"===document.readyState?e.performance(n.analyzeTiming()):e.on(t,"load",function(){e.performance(n.analyzeTiming())},!0)}}).init()}},{}],4:[function(e,t,n){var o=function(){return+new Date+Math.floor(1e3*Math.random())},r="",i=function(){var e=document.getElementsByTagName("meta"),t=[],n="";if(r)return r;for(var o=0;o<e.length;o++){var i=e[o];i&&i.name&&("data-spm"==i.name||"spm-id"==i.name)&&(n=i.content)}return n&&t.push(n),document.body&&document.body.getAttribute("data-spm")&&t.push(document.body.getAttribute("data-spm")),(t=t.length?t.join("."):0)&&-1!==t.indexOf(".")&&(r=t),r};i.bind||(i.bind=function(){return i});var a="object"==typeof window?window:{},c=["catch"][0],s=a.fetch;s="function"==typeof s?s:undefined;var u=function(){};t.exports={sendRequest:function(e){if(s)return s(e,{method:"HEAD",mode:"no-cors"})[c](u);var t="jsFeImage_"+o(),n=a[t]=new Image;n.onload=n.onerror=function(){a[t]=undefined},n.src=e,n=null},getCookie:function(){return document.cookie},getSpmId:i}},{}],5:[function(e,t,n){t.exports=function(e,t,n){var o,r,i={},a=0,c={imgUrl:"//retcode.taobao.com/r.png?",sample:10,modVal:1,dynamic:!1,retCode:{},delayOfReady:null},s=function(e,t,n){if("function"!=typeof e)return n;try{return e.apply(this,t)}catch(o){return n}},u=n.sendRequest,f=function(){var t,n;if(e.asyncQueue&&e.asyncQueue.length>0)for(var i,f=e.asyncQueue;i=f.shift();){var d=i.method;"function"==typeof e[d]&&e[d].apply(e,i.args||[])}for(;(t=p.dequeue())&&((n=p.extend({uid:o,userNick:e.getNick(),times:t.times?t.times:1,_t:~new Date+(a++).toString(),tag:e.config.tag&&s(e.config.tag,[],e.config.tag+"")||""},t)).spm||(n.spm=e.getSpmId()),n.spm);)e.debug&&"object"==typeof window&&window.console&&console.log(n),u.call(e,c.imgUrl+p.query.stringify(n));r=null},d=function(e){e&&r&&(clearTimeout(r),f()),r||(r=setTimeout(f,1e3))},p={_key:"wpokey",ver:"0.3.2",requestQueue:e.requestQueue||[],getCookie:function(e){var t,o,r="";if(!i[e]){t=new RegExp(e+"=([^;]+)");try{r=n.getCookie(this)}catch(a){}(o=t.exec(r))&&(i[e]=o[1])}return i[e]},setCookie:function(e,t,n,o,r){var i=e+"="+t;o&&(i+="; domain="+o),r&&(i+="; path="+r),n&&(i+="; expires="+n),document.cookie=i},extend:function(e){for(var t,n=Array.prototype.slice.call(arguments,1),o=0,r=n.length;o<r;o++){t=n[o];for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}return e},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},send:function(t){if(t&&!e.config.disabled){var n=p.getSpmId();!t.spm&&n&&(t.spm=n),this.queue(t)}},query:{stringify:function(e){var t=[],n="";try{for(var o in e)if(e.hasOwnProperty(o)&&e[o]!==undefined){var r="";r="spm"==o?encodeURI(e[o]):encodeURIComponent(e[o]),t.push(o+"="+r)}t.length>0&&(n=t.join("&"))}catch(i){}return n},parse:function(e){var t,n=e.split("&"),o={};try{for(var r=0,i=n.length;r<i;r++)o[(t=n[r].split("="))[0]]=decodeURIComponent(t[1])}catch(a){}return o}},getSpmId:function(){return c.spmId?c.spmId:"function"==typeof n.getSpmId?n.getSpmId.call(this):0},on:function(e,t,n,o){e.addEventListener?e.addEventListener(t,o?function(){e.removeEventListener(t,n,!1),n()}:n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){o&&e.detachEvent("on"+t,arguments.callee),n()})},getNick:function(){var t="";try{e.config.nick?t=e.config.nick:(t=this.getCookie("_nk_")||this.getCookie("lgc")||this.getCookie("_w_tb_nick")||this.getCookie("sn")||"",t=decodeURIComponent(t))}catch(n){}return t},setConfig:function(e){if(e&&"object"!=typeof e)throw"args of wpo.setConfig is not object";return e&&e.user&&"function"==typeof e.user.getUserInfo&&"weex"===this.env&&e.user.getUserInfo(function(e){try{e=JSON.parse(e)}catch(t){}p.extend(c,{nick:e.info&&e.info.nick})}),p.extend(c,e)},spm:function(e){return e&&this.setConfig({spmId:e}),this},dynamicConfig:function(e){var t=this.query.stringify(e);try{localStorage.setItem(this._key,t)}catch(n){this.setCookie(this._key,t,new Date(e.expTime))}this.setConfig({sample:parseInt(e.sample,10)}),this.ready()},ready:function(){var t=function(){e._ready=!0,d()};e.config.delayOfReady?setTimeout(function(){t()},e.config.delayOfReady):t()},queue:function(e){var t,n=this.requestQueue;if("jserror"===e.type){if(n.length&&(t=n[n.length-1],e.msg===t.msg))return void t.times++;e.times||(e.times=1)}n.push(e),this._ready&&("jserror"===e.type?d(!1):f())},dequeue:function(){return this.requestQueue.shift()},clear:function(){d(!0)}};return p.uid=o=p.guid(),p.config=p.setConfig(e.config),p.safetyCall=s,p.extend(e,p),t.__WPO=e,e}},{}],6:[function(e,t,n){!function(t){var n=e("./conf-browser"),o=t.__WPO||{},r=2;if(!o.__hasInitBlSdk){o.env="browser",e("./core")(o,t,n);var i=function(){e("./sampling")(o),e("./apis")(o),e("./browser-performance")(o,t,n),o.__hasInitBlSdk=!0};!o.config.dynamic||(r=e("./server-config")(o))?(2==r&&("complete"===document.readyState?o.ready():o.on(t,"load",function(){o.ready()},!0)),i()):e("./api-await")(o,function(){i(),o.reloaded&&o.reloaded()})}}(window),t.exports=window.__WPO},{"./api-await":1,"./apis":2,"./browser-performance":3,"./conf-browser":4,"./core":5,"./sampling":7,"./server-config":8}],7:[function(e,t,n){t.exports=function(e){var t={};e.sampling=function(e,n){return 1==e?1:n?Math.floor(Math.random()*e):"number"==typeof t[e]?t[e]:(t[e]=Math.floor(Math.random()*e),t[e])}}},{}],8:[function(e,t,n){t.exports=function(e){var t,n,o,r,i,a=e._key,c=function(e){var t=document.createElement("script");return t.src=e,document.getElementsByTagName("script")[0].parentNode.appendChild(t),t},s=function(){i||(i=!0,u())},u=function(){var t="//retcode.alicdn.com/retcode/pro/config/"+e.getSpmId()+".js",n=c(t);n.onerror=function(){n.onerror=null,e.error("sys","dynamic config error",t,0),e.ready()}},f=function(){"complete"===document.readyState?s():document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),s()},!1):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),s())}),document.documentElement.doScroll&&"undefined"==typeof window.frameElement&&function(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}s()}(),e.on(window,"load",function(){s()},!0))};if(!a)return 2;try{t=localStorage.getItem(a)}catch(d){t=e.getCookie(a)}return t?(n=e.query.parse(t),selfUpdate=function(){var t=e.ver&&e.ver.split("."),o=n.ver&&n.ver.split(".");if(!t||!o)return!1;for(var r=0,i=t.length;r<i;r++)if(o[r]&&parseInt(t[r],10)<parseInt(o[r],10))return!0;return!1},selfUpdate()?(r="//g.alicdn.com/retcode/log/"+n.ver+"/log.js",o=c(r),o.onload=function(){o.onload=null,e.reloaded()},o.onerror=function(){o.onerror=null,e.error("sys","self update error",r,0),e.reloadFailed()},0):parseInt(n.exp,10)<(new Date).getTime()?(f(),1):(e.setConfig({sample:parseInt(n.sample,10)}),2)):(f(),1)}},{}]},{},[6]);