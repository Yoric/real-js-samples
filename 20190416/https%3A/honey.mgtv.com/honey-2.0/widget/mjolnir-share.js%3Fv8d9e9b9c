honey.def("lib:jquery, lib:mustache, plugin:ZeroClipboard",function(){var platformShareOpt={weibo:{target:"http://service.weibo.com/share/share.php?url={url}&appkey=152400019&title={title}&source=&sourceUrl=&content=utf-8&pic={pic}",option:{width:440,height:430}},qzone:{target:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={url}&title={title}&pics={pic}",option:{width:700,height:680}},qq:{target:"http://connect.qq.com/widget/shareqq/index.html?url={url}&appkey=0823ccdcda524ddf94897852cc826d16&site=&pics={pic}&title={title}",option:{width:700,height:680}},douban:{target:"http://www.douban.com/recommend/?url={url}&title={title}&sel=&v=1",option:{width:450,height:330}},renren:{target:"http://share.renren.com/share/buttonshare?link={url}&title={title}&pics={pic}",option:{width:626,height:436}},weixin:{target:"//www.mgtv.com/share/weixin/?url={url}&title={title}",option:{width:window.screen.availWidth,height:window.screen.availHeight}}},SUPPORTCOPY=document.execCommand,SUPPORTFLASH=function(){var e=!1;if("function"==typeof ActiveXObject)try{var t;if(t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))e=10<=~~t.GetVariable("$version").split(" ")[1].split(",")[0]}catch(i){}return!e&&navigator.mimeTypes["application/x-shockwave-flash"]&&(e=!0),e}(),_config={box:".v-panel-share",list:".primary a",more:".more",extend:".extend",moreCodeInput:".output>input",moreCodeSwitchBtn:".u-btn-copy",tips:".u-msg-tips"},_ms=H.MjolnirShare=function(e){if(this.config=e=$.extend(_config,e),this.box=$(e.box),0!=this.box.length){var t=this.box;this.con={box:t,list:t.find(e.list),more:t.find(e.more),extend:t.find(e.extend),moreCodeInput:t.find(e.moreCodeInput),moreCodeSwitchBtn:t.find(e.moreCodeSwitchBtn)},SUPPORTFLASH&&t.find(e.tips).hide(),_bindEvent.call(this)}};function _bindEvent(){var r=this,i=r.con,t=function(){var a="//player.mgtv.com/mgtv_v6_out/main.swf?";i.moreCodeSwitchBtn.each(function(e,t){var i="",o=$(this),n="video_id="+(r.config.vid||VIDEOINFO.vid);switch(o.data("action")){case"video":i=a+n;break;case"html":i='<embed src="'+a+n+'" allowFullScreen="true" quality="high" width="580" height="425" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash"></embed>';break;case"url":i=r.config.customURL||location.href}if(-1<navigator.userAgent.indexOf("Edge"))return 0==e&&o.attr("data-clipboard-text",i),!1;o.attr("data-clipboard-text",i),o.prev().find("input").val(i)}),i.moreCodeInput.val(r.config.customURL||location.href).select()};(t(),$(document).on("page.reload.mock",function(e){t()}),i.extend.on("click touchstart",".u-btn-close",function(){return i.extend.hide(),!1}),$("a[action-type=share-panel-v]").on("click",function(){var e=$(this).next(".extend"),t=e.is(":visible");$(".v-panel .extend").hide(),$("div[node-type=tv-down-details]").removeClass("collapse");var i=encodeURIComponent(window.location.href);e.find(".u-wxcode").html('<img width="100" height="100" src="//pcweb.api.mgtv.com/qrcode/?url='+i+'" />'),t?e.hide():e.show()}),i.list.on("click",function(e){$(this).data("pf")&&_openShareWindow($(this)),e.preventDefault()}),i.moreCodeSwitchBtn.on("click",function(e){var t=$(this).data("clipboard-text"),i=$(this).parent(".u-item").find("input")[0],o=document.activeElement;if(i.removeAttribute("disabled"),i.value=t,SUPPORTCOPY)try{i.focus(),i.setSelectionRange(0,i.value.length),document.execCommand("copy",!0),o.focus(),i.setAttribute("disabled","disabled"),alert("复制成功")}catch(n){}}),SUPPORTCOPY)||(ZeroClipboard.config({swfPath:"//js.mgtv.com/imgotv-miniv6/file/ZeroClipboard2.swf",cacheBust:!1}),new ZeroClipboard(i.moreCodeSwitchBtn).on({ready:function(e){},error:function(e){},aftercopy:function(e){var t=e.data["text/plain"];t&&(i.moreCodeInput.val(t),alert("复制成功"))}}))}function changeURLArg(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText),tmp}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText}function cookieGet(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),i=document.cookie.match(t);return i?i[1]:""}function _openShareWindow(e){var t={width:600,height:400,toolbar:0,status:0,resizable:1},i=$.extend(!1,platformShareOpt[e.data("pf")]);(t=$.extend(t,i.option)).left=t.left||(screen.width-t.width)/2,t.top=t.top||(screen.height-t.height)/2;var o=document.title.split("-")[0],n=e.data("url")||document.location.href,a="",r=cookieGet("__STKUUID")||"";a=1<n.indexOf("#")?n.slice(0,-1):n,a=1<n.indexOf("dc")?changeURLArg(a,"dc",r):1<n.indexOf("?")?a+"&dc="+r:a+"?dc="+r,"weibo"==e.data("pf")&&(a=a.replace(/https/,"http"));var c=a;c=c.indexOf("from")<0?encodeURIComponent("weibo"==e.data("pf")?c+"&from=wb":c):encodeURIComponent("weibo"==e.data("pf")?changeURLArg(c,"from","wb"):changeURLArg(c,"from",e.data("pf"))),o=e.data("text")||"我正在 @芒果TV 看【"+o+"】小伙伴们速度围观了~ ",o=encodeURI(o),i.target=i.target.replace("{url}",c).replace("{title}",o).replace("{pic}",e.data("pic")||"");var d=[];for(var l in t)d.push(l+"="+t[l]);var h=function(){window.open(i.target,"mb",d.join(","))};/Firefox/.test(navigator.userAgent)?setTimeout(h,0):h();var p={bid:"1.5.5.5",act:"share",pos:1,dc:r,value:""};try{if(!s&&window.STK)var s=new window.STK.start;s&&s.pageEvent(p)}catch(u){}}});