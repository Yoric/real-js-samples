"use strict";honey.def("lib:jquery",function(a){var n=1,c=2,s=3,o="<i></i>",t="//u.api.mgtv.com/user/",e="favorite_status";a.MjolnirCollection=function(t){if(this.btn=$(".v-panel-fav"),this.btn.hasClass("svg")&&(o='<i><svg class="icon resource"><use xlink:href="#resource"/></svg></i>'),0!=this.btn.length){this.video_id=t||VIDEOINFO.vid,function(){var i=this;$(document).on("page.reload.mock",function(t){i.video_id=VIDEOINFO.vid,d.call(i)}),$(document).on("HONEY-LOGIN-DONE",function(){d.call(i)}),this.btn.on("click",function(){switch($(this).data(e)){case c:l.call(i,"uncollect");break;case s:l.call(i,"collect");break;case n:default:a.loginDialog()}}),this.btn.hover(function(){$(this).data(e)},function(){$(this).data(e)==c&&i.btn.html(o+"已收藏")})}.call(this),d.call(this)}};function l(i){var a=this;$.ajax({data:{video_id:this.video_id},dataType:"JSONP",url:t+i,success:function(t){200===t.code&&(a.btn.data(e,"collect"==i?c:s),u.call(a))}})}function d(){var a=this;$.ajax({url:t+"iscollected",dataType:"JSONP",data:{video_id:this.video_id},success:function(t){var i=n;200===t.code&&(i=t.data?c:s),a.btn.data(e,i),u.call(a)}})}function u(){var t=this,i=t.btn.data(e),a=o+"收藏";i==c?(a=o+"已收藏",t.btn.addClass("on")):t.btn.removeClass("on"),t.btn.html(a)}});