"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}honey.def("lib:jquery, lib:mustache",function(u){"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var c={svg:'\n        <svg class="mgtv_comment_svg" display="none" version="1.1" xmlns="http://www.w3.org/2000/svg">\n        \x3c!-- 标题删除  --\x3e\n        <symbol id="mgtv_comment_svg_del" viewBox="0 0 12 12">\n            <path d="M7.414,6l4.293-4.293c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0L6,4.586L1.707,0.293c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414L4.586,6l-4.293,4.293c-0.391,0.391-0.391,1.023,0,1.414C0.488,11.902,0.744,12,1,12s0.512-0.098,0.707-0.293L6,7.414l4.293,4.293C10.488,11.902,10.744,12,11,12s0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414L7.414,6z"></path>\n        </symbol>\n        \x3c!-- 点赞  --\x3e     \n\t\t<symbol id="mgtv_comment_svg_zan" viewBox="0 0 14 14">\n\t\t\t<path d="M13.2,5.716c-0.277-0.366-0.967-0.577-1.416-0.577H8.722c0.104-0.23,0.167-0.459,0.181-0.589l0.048-0.199c0.214-0.856,0.178-1.757-0.107-2.61L8.75,1.481C8.557,0.903,7.998,0.5,7.388,0.5H7.351C6.557,0.5,5.86,1.174,5.86,1.944v0.371c0,1.616-1.075,2.875-2.574,3.114V13.5h7.212c0.649,0,1.225-0.445,1.397-1.081l1.549-5.408C13.57,6.571,13.479,6.087,13.2,5.716z"/>\n\t\t\t<path d="M0.5,6.966v5.036c0,0.799,0.78,1.449,1.579,1.449h0.278v-8.03H2.079C1.307,5.421,0.5,6.143,0.5,6.966z"/>\n        </symbol>\n        \x3c!-- 关闭上传图片  --\x3e \n        <symbol id="mgtv_comment_svg_close" viewBox="0 0 14 14">\n            <path d="M8.414,7l5.293-5.293c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0L7,5.586L1.707,0.293c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414L5.586,7l-5.293,5.293c-0.391,0.391-0.391,1.023,0,1.414C0.488,13.902,0.744,14,1,14s0.512-0.098,0.707-0.293L7,8.414l5.293,5.293C12.488,13.902,12.744,14,13,14s0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414L8.414,7z"></path>\n        </symbol>\n        \x3c!-- 回复  --\x3e \n\t\t<symbol id="mgtv_comment_svg_reply" viewBox="0 0 14 14">\n\t\t\t<path d="M0.485,8.698C0.172,8.017,0,7.277,0,6.499C0,3.185,3.135,0.5,7,0.5c3.867,0,7,2.685,7,5.999c0,3.314-3.133,6-7,6c0,0-3-0.099-6,1C1.8,10.701,0.485,8.698,0.485,8.698z"/>\n\t\t</symbol> \n \t\t\x3c!-- 举报  --\x3e \n\t\t<symbol id="mgtv_comment_svg_report" viewBox="0 0 14 14">\n  \t\t\t<path style="fill:none;" d="M7.012,4.001C6.342,4.045,5.8,4.523,5.782,4.947C5.765,5.369,6.139,5.655,6.139,5.655c0,0.871,0.873,1.148,0.873,1.148c0.785-0.15,0.97-1.115,0.97-1.115s0.379-0.315,0.389-0.708C8.38,4.586,7.683,3.956,7.012,4.001z"/>\n\t\t\t<path d="M11.283,9.078C9.325,9.745,4.968,9.802,2.465,8.983C1.599,8.7,1.513,9.01,1.513,9.01s-0.104,0.385,0.55,1.25c0.654,0.863,2.407,2.855,5.274,2.735c2.873-0.12,4.82-2.836,4.82-2.836s0.824-1.007,0.453-1.25C12.237,8.665,11.283,9.078,11.283,9.078z"/>\n\t\t\t<path d="M12.286,3.933c-1.102-0.429-3.633-2.144-4.497-2.702C6.925,0.674,5.945,1.299,5.945,1.299S5.917,1.303,4.651,2.211c-1.266,0.908-3.43,2.094-3.43,2.094S0.775,4.523,0.251,4.879c-0.524,0.355-0.065,0.877-0.065,0.877s0.925,0.773,1.068,0.946c0.143,0.175,0.129,0.339,0.129,0.339S1.344,7.217,1.415,7.479c0.071,0.262,0.421,0.371,0.421,0.371c6.313,1.221,10.382,0.014,10.579-0.068c0.197-0.082,0.226-0.269,0.226-0.269s0.003-0.134,0-0.473c-0.003-0.34,0.517-0.709,0.517-0.709s0.811-0.37,0.841-0.945C14.03,4.809,13.387,4.361,12.286,3.933z M7.982,5.689c0,0-0.185,0.965-0.97,1.115c0,0-0.873-0.277-0.873-1.148c0,0-0.374-0.286-0.357-0.709C5.8,4.523,6.342,4.045,7.012,4.001c0.671-0.045,1.368,0.585,1.359,0.98C8.362,5.374,7.982,5.689,7.982,5.689z"/>\n\t\t</symbol>\n \t\t\x3c!-- 评论删除  --\x3e \n\t\t<symbol id="mgtv_comment_svg_cdel" viewBox="0 0 14 14">\n\t\t\t<path d="M13,2.776H1c-0.553,0-1,0.448-1,1s0.447,1,1,1h1.357v6.214c0,1.65,1.35,3,3,3h3.286c1.65,0,3-1.35,3-3V4.776H13c0.553,0,1-0.448,1-1S13.553,2.776,13,2.776z"/>\n\t\t\t<path d="M5.143,1.991h3.715c0.553,0,1-0.448,1-1s-0.447-1-1-1H5.143c-0.553,0-1,0.448-1,1S4.59,1.991,5.143,1.991z"/>\n        </symbol>\n        \x3c!-- 上传图片  --\x3e \n        <symbol id="mgtv_comment_svg_pic" viewBox="0 0 20 20">\n            <circle style="fill:none;" cx="6.5" cy="6.5" r="1.5"></circle>\n            <polygon style="fill:none;" points="8,14 6,11 3,16 17,16 12,9   "></polygon>\n            <path d="M16,2H4C2.35,2,1,3.35,1,5v10c0,1.65,1.35,3,3,3h12c1.65,0,3-1.35,3-3V5C19,3.35,17.65,2,16,2z M6.5,5C7.328,5,8,5.672,8,6.5S7.328,8,6.5,8S5,7.328,5,6.5S5.672,5,6.5,5z M3,16l3-5l2,3l4-5l5,7H3z"></path>\n        </symbol>\n        \x3c!-- 上展开  --\x3e \n        <symbol id="mgtv_comment_svg_tarr" viewBox="0 0 12 12">\n            <path d="M0.293,9.207c0.391,0.391,1.023,0.391,1.414,0L6,4.914l4.293,4.293c0.391,0.391,1.023,0.391,1.414,0s0.391-1.023,0-1.414l-5-5C6.511,2.598,6.256,2.5,6,2.5S5.488,2.598,5.293,2.793l-5,5C-0.097,8.184-0.097,8.816,0.293,9.207z"></path>\n        </symbol>\n        \x3c!-- 添加  --\x3e \n        <symbol id="mgtv_comment_svg_add" viewBox="0 0 20 20">\n            <path d="M19,9h-8V1c0-0.552-0.448-1-1-1S9,0.448,9,1v8H1c-0.552,0-1,0.448-1,1s0.448,1,1,1h8v8c0,0.553,0.448,1,1,1s1-0.447,1-1v-8h8c0.553,0,1-0.448,1-1S19.553,9,19,9z"></path>\n        </symbol>\n        \x3c!-- 图片预览关闭  --\x3e \n        <symbol id="mgtv_comment_svg_cpic" viewBox="0 0 30 30">\n            <path d="M17.828,15L29.414,3.414c0.781-0.781,0.781-2.047,0-2.828c-0.781-0.781-2.047-0.781-2.828,0L15,12.172L3.414,0.586c-0.78-0.781-2.048-0.781-2.828,0c-0.781,0.781-0.781,2.047,0,2.828L12.172,15L0.586,26.586c-0.781,0.781-0.781,2.047,0,2.828C0.976,29.805,1.488,30,2,30s1.024-0.195,1.414-0.586L15,17.828l11.586,11.586C26.977,29.805,27.488,30,28,30s1.023-0.195,1.414-0.586c0.781-0.781,0.781-2.047,0-2.828L17.828,15z"></path>\n        </symbol>\n        \x3c!-- 微博  --\x3e \n        <symbol id="mgtv_comment_svg_sina" viewBox="0 0 20 20">\n            <path style="fill:none;" d="M6.553,12.655c-0.324,0.036-0.576,0.174-0.756,0.414c-0.18,0.24-0.282,0.495-0.306,0.765c-0.024,0.27,0.033,0.519,0.171,0.747c0.138,0.228,0.369,0.354,0.693,0.378c0.444,0.036,0.783-0.072,1.017-0.324c0.234-0.252,0.36-0.534,0.378-0.846c0.018-0.312-0.072-0.591-0.27-0.837C7.282,12.706,6.973,12.607,6.553,12.655z"></path>\n            <path style="fill:none;" d="M12.43,10.531c-0.33-0.276-0.699-0.495-1.107-0.657c-0.408-0.162-0.843-0.279-1.305-0.351C9.556,9.451,9.085,9.415,8.605,9.415c-0.924,0-1.743,0.096-2.457,0.288c-0.714,0.192-1.332,0.444-1.854,0.756c-0.522,0.312-0.945,0.666-1.269,1.062C2.7,11.917,2.472,12.319,2.34,12.727c-0.132,0.396-0.171,0.789-0.117,1.179c0.054,0.39,0.177,0.759,0.369,1.107c0.192,0.348,0.441,0.66,0.747,0.936c0.306,0.276,0.645,0.498,1.017,0.666c0.684,0.3,1.383,0.489,2.097,0.567c0.714,0.078,1.395,0.081,2.043,0.009c0.648-0.072,1.239-0.198,1.773-0.378c0.534-0.18,0.969-0.378,1.305-0.594c0.312-0.192,0.627-0.456,0.945-0.792c0.318-0.336,0.576-0.711,0.774-1.125c0.198-0.414,0.309-0.858,0.333-1.332c0.024-0.474-0.096-0.951-0.36-1.431C13.039,11.143,12.76,10.807,12.43,10.531zM10.837,14.005c-0.096,0.216-0.213,0.435-0.351,0.657c-0.138,0.222-0.306,0.429-0.504,0.621c-0.198,0.192-0.435,0.363-0.711,0.513c-0.276,0.15-0.612,0.261-1.008,0.333c-0.72,0.132-1.41,0.066-2.07-0.198c-0.66-0.264-1.176-0.702-1.548-1.314C4.5,14.149,4.422,13.735,4.41,13.375c-0.012-0.36,0.084-0.75,0.288-1.17c0.156-0.324,0.393-0.627,0.711-0.909c0.318-0.282,0.684-0.51,1.098-0.684c0.414-0.174,0.855-0.276,1.323-0.306c0.468-0.03,0.93,0.045,1.386,0.225c0.24,0.096,0.468,0.204,0.684,0.324c0.216,0.12,0.408,0.282,0.576,0.486c0.12,0.144,0.225,0.324,0.315,0.54c0.09,0.216,0.153,0.447,0.189,0.693c0.036,0.246,0.045,0.495,0.027,0.747C10.99,13.573,10.933,13.801,10.837,14.005z"></path>\n            <path d="M10.792,11.881c-0.09-0.216-0.195-0.396-0.315-0.54c-0.168-0.204-0.36-0.366-0.576-0.486c-0.216-0.12-0.444-0.228-0.684-0.324c-0.456-0.18-0.918-0.255-1.386-0.225c-0.468,0.03-0.909,0.132-1.323,0.306c-0.414,0.174-0.78,0.402-1.098,0.684c-0.318,0.282-0.555,0.585-0.711,0.909c-0.204,0.42-0.3,0.81-0.288,1.17c0.012,0.36,0.09,0.774,0.234,1.242c0.372,0.612,0.888,1.05,1.548,1.314c0.66,0.264,1.35,0.33,2.07,0.198c0.396-0.072,0.732-0.183,1.008-0.333c0.276-0.15,0.513-0.321,0.711-0.513c0.198-0.192,0.366-0.399,0.504-0.621c0.138-0.222,0.255-0.441,0.351-0.657c0.096-0.204,0.153-0.432,0.171-0.684c0.018-0.252,0.009-0.501-0.027-0.747C10.945,12.328,10.882,12.097,10.792,11.881z M7.372,14.635c-0.234,0.252-0.573,0.36-1.017,0.324c-0.324-0.024-0.555-0.15-0.693-0.378c-0.138-0.228-0.195-0.477-0.171-0.747c0.024-0.27,0.126-0.525,0.306-0.765c0.18-0.24,0.432-0.378,0.756-0.414c0.42-0.048,0.729,0.051,0.927,0.297c0.198,0.246,0.288,0.525,0.27,0.837C7.732,14.101,7.606,14.383,7.372,14.635z"></path>\n            <path d="M19.514,4.608c-0.324-0.636-0.771-1.176-1.341-1.62c-0.57-0.444-1.236-0.783-1.998-1.017c-0.762-0.234-1.581-0.351-2.457-0.351c-0.396,0-0.699,0.09-0.909,0.27c-0.21,0.18-0.321,0.381-0.333,0.603c-0.012,0.222,0.072,0.423,0.252,0.603c0.18,0.18,0.456,0.27,0.828,0.27c0.576,0,1.143,0.093,1.701,0.279c0.558,0.186,1.053,0.441,1.485,0.765c0.432,0.324,0.78,0.702,1.044,1.134c0.264,0.432,0.396,0.888,0.396,1.368c0,0.36,0.096,0.627,0.288,0.801c0.192,0.174,0.399,0.258,0.621,0.252c0.222-0.006,0.429-0.108,0.621-0.306C19.904,7.462,20,7.165,20,6.769C20,5.965,19.838,5.245,19.514,4.608z"></path>\n            <path d="M13.717,4.5c-0.216,0-0.381,0.063-0.495,0.189c-0.114,0.126-0.171,0.261-0.171,0.405s0.054,0.279,0.162,0.405c0.108,0.126,0.276,0.189,0.504,0.189c0.684,0,1.23,0.21,1.638,0.63c0.408,0.42,0.612,0.984,0.612,1.692c0,0.264,0.06,0.474,0.18,0.63c0.12,0.156,0.252,0.243,0.396,0.261c0.144,0.018,0.276-0.048,0.396-0.198c0.12-0.15,0.18-0.405,0.18-0.765c0-1.152-0.288-2.013-0.864-2.583S14.833,4.5,13.717,4.5z"></path>\n            <path d="M16.112,10.621c-0.144-0.108-0.315-0.204-0.513-0.288s-0.387-0.162-0.567-0.234c-0.18-0.072-0.339-0.144-0.477-0.216c-0.138-0.072-0.225-0.15-0.261-0.234c-0.048-0.144-0.057-0.282-0.027-0.414c0.03-0.132,0.072-0.261,0.126-0.387c0.054-0.126,0.105-0.261,0.153-0.405c0.048-0.144,0.06-0.3,0.036-0.468c-0.036-0.276-0.138-0.501-0.306-0.675c-0.168-0.174-0.381-0.303-0.639-0.387c-0.258-0.084-0.546-0.129-0.864-0.135c-0.318-0.006-0.639,0.021-0.963,0.081c-0.204,0.036-0.399,0.09-0.585,0.162c-0.186,0.072-0.369,0.141-0.549,0.207c-0.18,0.066-0.366,0.12-0.558,0.162c-0.192,0.042-0.39,0.051-0.594,0.027c-0.048-0.12-0.06-0.252-0.036-0.396c0.024-0.144,0.054-0.294,0.09-0.45c0.036-0.156,0.069-0.312,0.099-0.468c0.03-0.156,0.027-0.318-0.009-0.486C9.631,5.413,9.559,5.242,9.451,5.104C9.343,4.965,9.229,4.83,9.109,4.698c-0.264-0.144-0.6-0.21-1.008-0.198c-0.408,0.012-0.78,0.078-1.116,0.198c-0.732,0.24-1.419,0.579-2.061,1.017C4.281,6.154,3.66,6.655,3.06,7.219C2.448,7.795,1.944,8.323,1.548,8.803c-0.396,0.48-0.708,0.924-0.936,1.332c-0.228,0.408-0.387,0.78-0.477,1.116C0.045,11.587,0,11.887,0,12.151c0,0.612,0.033,1.116,0.099,1.512c0.066,0.396,0.195,0.768,0.387,1.116c0.288,0.54,0.639,1.002,1.053,1.386c0.414,0.384,0.849,0.708,1.305,0.972c0.456,0.264,0.924,0.477,1.404,0.639c0.48,0.162,0.939,0.288,1.377,0.378c0.438,0.09,0.837,0.15,1.197,0.18c0.36,0.03,0.648,0.045,0.864,0.045c0.216,0,0.519-0.009,0.909-0.027c0.39-0.018,0.831-0.063,1.323-0.135c0.492-0.072,1.017-0.183,1.575-0.333c0.558-0.15,1.113-0.357,1.665-0.621c0.552-0.264,1.086-0.594,1.602-0.99c0.516-0.396,0.978-0.876,1.386-1.44c0.228-0.312,0.414-0.66,0.558-1.044c0.144-0.384,0.228-0.768,0.252-1.152c0.024-0.384-0.03-0.753-0.162-1.107C16.664,11.176,16.436,10.873,16.112,10.621zM13.294,14.302c-0.198,0.414-0.456,0.789-0.774,1.125c-0.318,0.336-0.633,0.6-0.945,0.792c-0.336,0.216-0.771,0.414-1.305,0.594c-0.534,0.18-1.125,0.306-1.773,0.378c-0.648,0.072-1.329,0.069-2.043-0.009c-0.714-0.078-1.413-0.267-2.097-0.567c-0.372-0.168-0.711-0.39-1.017-0.666c-0.306-0.276-0.555-0.588-0.747-0.936c-0.192-0.348-0.315-0.717-0.369-1.107c-0.054-0.39-0.015-0.783,0.117-1.179c0.132-0.408,0.36-0.81,0.684-1.206c0.324-0.396,0.747-0.75,1.269-1.062c0.522-0.312,1.14-0.564,1.854-0.756c0.714-0.192,1.533-0.288,2.457-0.288c0.48,0,0.951,0.036,1.413,0.108c0.462,0.072,0.897,0.189,1.305,0.351c0.408,0.162,0.777,0.381,1.107,0.657c0.33,0.276,0.609,0.612,0.837,1.008c0.264,0.48,0.384,0.957,0.36,1.431C13.603,13.444,13.492,13.888,13.294,14.302z"></path>\n        </symbol>\n        \x3c!-- 下展开  --\x3e \n        <symbol id="mgtv_comment_svg_barr" viewBox="0 0 12 12">\n            <path d="M11.707,2.793c-0.391-0.391-1.023-0.391-1.414,0L6,7.086L1.707,2.793c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414l5,5C5.489,9.402,5.744,9.5,6,9.5s0.512-0.098,0.707-0.293l5-5C12.097,3.816,12.097,3.184,11.707,2.793z"></path>\n        </symbol>\n        \x3c!-- 右翻  --\x3e \n        <symbol id="mgtv_comment_svg_rarr" viewBox="0 0 28 50">\n            <path d="M2.5,50c-0.512,0-1.024-0.195-1.414-0.586c-0.781-0.781-0.781-2.047,0-2.828L22.671,25L1.086,3.414c-0.781-0.781-0.781-2.047,0-2.828c0.78-0.781,2.047-0.781,2.828,0l22.999,22.999C27.289,23.96,27.5,24.469,27.5,25s-0.211,1.04-0.586,1.415l-23,23C3.524,49.805,3.012,50,2.5,50z"></path>\n        </symbol>\n        \x3c!-- 左翻  --\x3e \n        <symbol id="mgtv_comment_svg_larr" viewBox="0 0 28 50">\n            <path d="M25.5,50c0.512,0,1.024-0.195,1.414-0.586c0.781-0.781,0.781-2.047,0-2.828L5.329,25L26.914,3.414c0.781-0.781,0.781-2.047,0-2.828c-0.78-0.781-2.047-0.781-2.828,0L1.087,23.585C0.711,23.96,0.5,24.469,0.5,25s0.211,1.04,0.586,1.415l23,23C24.476,49.805,24.988,50,25.5,50z"></path>\n        </symbol>\n        \x3c!-- 翻页左  --\x3e \n        <symbol id="mgtv_comment_svg_plarr" viewBox="0 0 7 12">\n            <path d="M2.414,6l4.293-4.293c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0l-5,5c-0.391,0.391-0.391,1.023,0,1.414l5,5C5.488,11.902,5.744,12,6,12s0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414L2.414,6z"></path>\n        </symbol>\n        \x3c!-- 翻页右  --\x3e \n        <symbol id="mgtv_comment_svg_prarr" viewBox="0 0 7 12">\n            <path d="M4.586,6L0.293,1.707c-0.391-0.391-0.391-1.023,0-1.414s1.023-0.391,1.414,0l5,5c0.391,0.391,0.391,1.023,0,1.414l-5,5C1.512,11.902,1.256,12,1,12s-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414L4.586,6z"></path>\n        </symbol>\n        \x3c!-- loading  --\x3e   \n        <symbol id="mgtv_comment_svg_loading" viewBox="0 0 40 40" style="enable-background:new 0 0 40 40;">\n            <image style="overflow:visible;" width="40" height="40" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsSAAALEgHS3X78AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABYVJREFUeNq8mG9Mm0Ucx/u0DxSYUqBjLU67ZGnmn+EGxkaCTF44TZQsIQaURQwDEwwJQRIJL33raxKUACFoCP+yEAkkThejiSwYiPxxgJF2JM6OIo5uCBkwSlu/P7xrjuMpYGl7yZd7jt5z93m+d8/d7zlFF2EqKirK8/v9+YFAwArZoVRIHwwGFfqd5dPIl5GPIN2KpB/l/1QuLi4+jw6vAOQC9CQBcQHWoAG4mwvXt6Dro6OjU1EFLC0tzUTn19D4K1pQYvkQQIU9xA3kHePj40uH9W04rEJZWdkHyD6GnuYPhQ64U4pYplx46BAYv+Z1APcs8qtZWVnK0tLSZEQOlpeXp6CRajTmoIZlt2QXKZcd1HKPTwPhehL6ZHp6ev3IDlZUVNgURanD5fPI9zwINc7+p5PdoQ5FBwXpmMt65mDIceg09KrFYvlueXl5+1AHq6qqyLlGNHJGfFL56ZlzK8h/29nZmUV+H7k496xQLlNWuHYEp53Qh7Ozs3ucVPcRK8o1mm96PbUT0KNMlgWpTL+z/81B3wwNDY0fMoW/pT/5+fmX0Pl70Mvi0Et6Dm13onpJWAerq6tLUfGy+HTSE2/Bqa/7+/tvRLKmORyOMrTxkbhmitOD6Qun09m8bw7W1NSY4UoVzS8+x6S55oaaent7f4l0cfd4PLNWq/VnABVAqQKYgQv/yzOZTN+vrq6u0D16fjOG8B0aRlF8aKG70Gfd3d13dcdMU1NTToCUAWRJaz1lK8Gnexysq6uzA+YKd09ybhPlzzs7O726KCV6WzMzMycAUwSoFNlFyJaamjq2trZ2T8+G8jXZPS6DwTDU0dHh1kU5zc3N/Q7AFrz5Komvo4LeDQ0xQM7KQ8uGd761tfUHXYySy+X6CiDzYSCv7rI1NDScB4gxjIM/6mKcAPalCCbuSunp6W+DQf+CxrD6ofvNzc23Yw24uLh4HTCPfD5fApfg6CUVQGmo55f3TAyxSxenBKib6PN9jf37IgFaaIMQAWn+Id2JIyCtjRVycIEslwATRUDhxwdxBHSjzwQxjmTXZpXvsWJilYJxBKT+VBEuFCxoAbK1MW6ARqPxV8zBNwAomrSrfYB8DYyng16vdw19jor98t2MADeQJ3HHBEBTvACxpBjQpyr0zUcwSIB/ofCM7CB0GsWZOM3BRHCoQt8ccocAVxlMaN6xBfupOL4kyeiP+qd+Q1OMAGkncWrsIqQTTU1NZ2MN53a7UzDEiWz3EHcRFS+OX9/Y2HgHpFtacSAgL8Rh/plo3+XBghg0mM1m3240A5A/wwSr1paWlhdjBTc/P58GkGQ51GKQ26FwCzCT4eJBKLe9vd0cbbiZmZkkQJziQ6oRWW+GAOvr6xcBshDGxQSoABF1YrTg8JFOIGcAkSC5xl302Wy2x3u+SQAzcoCLadCbXV1d6ceFm5iYSGZHH0at7xFWDsUBIcDa2tp1QNzW+GDiEXYa9HpPT8+5SOHGxsYs6Pwch+PRixisQg/tdvt22JOFtra2y4CycUAZlJYgXC9DrpKSEs9RwEZGRjJwnxX3PCEbIC7OKG9mZ2cvHHiygEo/ofJbNKwinOTmSShjcHBwnSJvaEVV1Q3kVJ9PGSNkIqGYCKcCTHLMx9MW3PvjSKdbeCEy0HB+OMgwC7ufuRuQtkxxd9rnHss3oIWcnBz/PsO0ACsrKx/gxpu4yS0PwwGuBrVCNPk4Tj7ygB5BmnBHOmHFS/ESIOwyGHdLvKZcIyqS93hxXi86HA7PsY+A+/r6TqCxi7SzaA2xeC1DyaAM8G/k9/Ly8h5H9RB9YGDgJPvIz4AMWrDiMGuET17IU1BQ8E9MTvnFNDw8bAHUKSiJIh/9fykgAT6kQISC5sLCwojOdv4VYACWBmBNWh2RnQAAAABJRU5ErkJggg==" transform="matrix(1 0 0 1 3.694327e-04 3.694327e-04)"/>\n        </symbol>        \n    </svg>',commentbox:'\n        <script src="//honey.mgtv.com/honey-2.0/mod/identify-box.js?v0727"><\/script>\n        <link type="text/css" rel="stylesheet" href="//css.mgtv.com/standard2.0/comment6.css?version=20180727">\n        <div class="c-comment" mg-stat-mod="1h6rza">\n        <div class="m-comment-header">评论<span>（全部<em class="comment-all-total" node-type="comment-all-total"></em>条)</span></div>\n        <div class="m-comment-user nologin">\n            <div class="textarea-box">\n                <textarea class="textarea mango-comment-textarea" datavalue="说两句吧..." onblur="this.placeholder=\'说两句吧...\'" onfocus="this.placeholder=\'\'" contenteditable="true" placeholder="说两句吧..."></textarea>\n            </div>\n            <div class="user mango-comment-user">\n                \x3c!-- 用户功能区 --\x3e\n                <div class="user-box">\n                    \x3c!-- 用户头像 --\x3e\n                    <div class="avatar mango-comment-avatar">\n                        <img src="//avatar.hitv.com/0/8c5a31e7/b6tpo1n6jlt7t174jptg?x-oss-process=style/large">\n                    </div>\n                    \x3c!-- 用户名字，未登录隐藏 --\x3e\n                    <a href="javascript:;" class="name mango-comment-username">未登录</a>\n                    \x3c!-- 评论标题 --\x3e\n                    <div class="add-title">\n                        <input type="text" datavalue="添加标题" maxlength="20" class="m-comment-title-hot" onblur="this.placeholder=\'添加标题\'" onfocus="this.placeholder=\'\'" placeholder="添加标题">\n                    </div>\n                    \x3c!-- 添加图片，点击加on弹出浮层pic-ul --\x3e\n                    <div class="pic-box">\n                        <a href="javascript:;" class="icon icon20 mango-comment-uppci">\n                            <svg class="svg-icon" viewBox="0 0 20 20" width="20" height="20">\n                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_pic"></use>\n                            </svg>\n                        </a>\n                        \x3c!-- 添加图片浮层 --\x3e\n                        <div class="pic-ul">\n                            \x3c!-- 添加图片计数和关闭 --\x3e\n                            <span class="pic-txt">上传图片\n                                <b node-type="mango-cupdate-count">0</b>/9\n                                <i class="icon icon14 mango-comment-update-closed">\n                                    <svg class="svg-icon" viewBox="0 0 14 14" width="14" height="14">\n                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_close"></use>\n                                    </svg>\n                                </i>\n                            </span>\n                            \x3c!-- 图片添加 --\x3e\n                            <ul node-type="update-list-img">\n                                \x3c!-- 添加，默认显示，添加9张后删除 --\x3e\n                                <li class="mango-comment-update-add">\n                                    <i class="icon icon20">\n                                        <svg class="svg-icon" viewBox="0 0 20 20" width="20" height="20">\n                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_add"></use>\n                                        </svg>\n                                    </i>\n                                    <input type="file" name="file" id="mango-comment-file" class="mango-comment-file file" value="" accept="image/jpg,image/jpeg,image/gif,image/png,image/webp,image/tiff" multiple="">\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n                \x3c!-- 评论字数统计+发表按钮 --\x3e\n                <div class="commentBtn">\n                    <span class="words">\n                        <b node-type="word-limit">0</b>/300</span>\n                    <a href="javascript:" class="u-btn m-comment-post">发布</a>\n                </div>\n            </div>\n        </div>\n\n        <div class="comment-no-data none" style="text-align:center;margin-top:50px;"><img class="no-img" src="//i1.hitv.com/ui/2016/images/comment.png?" alt=""></div>\n\n        <div class="m-comment-title mango-comment-tabbox none">\n            <span mg-stat-click="vid=&direct=cntp&addr=" mg-stat-lob="subjectId={{subjectId}}&subjectType={{subjectType}}" type="hot" class="on mango-tab-options">最热</span>\n            <span mg-stat-click="vid=&direct=cntp&addr=" mg-stat-lob="subjectId={{subjectId}}&subjectType={{subjectType}}" type="news" class="mango-tab-options mango-tab-options-news">最新</span>\n            <span class="move"></span>\n        </div>\n        <div class="c-comment-cont" node-type="c-comment-positioning"></div>\n        <div class="c-comment-cont" node-type="c-comment-hotlist"></div>\n        <div class="m-comment-title m-comment-title-new" style="display:none">最新评论</div>\n        <div class="c-comment-cont" node-type="c-comment-list"></div>\n        <a href="javascript:;" mg-stat-click="vid=&direct=cntp&addr=" mg-stat-lob="subjectId={{subjectId}}&subjectType={{subjectType}}" class="more-comment mango-comment-loading-more" style="display:none">\n            <span>查看更多评论</span>\n            <span class="load">\n                <i class="icon">\n                    <svg class="svg-icon" viewBox="0 0 40 40" width="40" height="40">\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_loading"></use>\n                    </svg>\n                </i>\n                <b></b>\n            </span>\n        </a>\n    \n        \x3c!--举报--\x3e\n        <div class="c-comment-tips c-comment-report" node-type="mango-comment-report" mg-stat-mod="c_report" style="display:none;">\n            <h4 class="title">举报\n                \x3c!-- 关闭按钮 --\x3e\n                <a href="javascript:;" class="close mango-comment-report-close">\n                    <i class="icon icon14">\n                        <svg class="svg-icon" viewBox="0 0 14 14" width="14" height="14">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_close"></use>\n                        </svg>\n                    </i>\n                </a>\n            </h4>\n            <div class="content">\n                <p class="reason-title">您为什么要举报此信息</p>\n                <ul class="reason mango-comment-report-list">\n                </ul>\n                <p class="details-title">举报说明（可选）</p>\n                <textarea class="details" name=""></textarea>\n                <a href="javascript:void(0)" class="u-btn u-btn-report mango-comment-report-send">确定</a>\n                <a href="javascript:void(0)" class="u-btn-cancel mango-comment-report-close">取消</a>\n            </div>\n        </div>\n\n        <div class="c-comment-err mamgo-comment-error" style="display:none;">\n            <span>评论超出300字</span>\n        </div>\n\n        \x3c!-- 删除提示弹层 --\x3e\n        <div class="c-comment-tips c-comment-del" node-type="c-comment-del-tips" style="display:none;">\n            \x3c!-- 关闭按钮 --\x3e\n            <a href="javascript:;" class="close mango-comment-del-cancel">\n                <i class="icon icon14">\n                    <svg class="svg-icon" viewBox="0 0 14 14" width="14" height="14">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_close"></use>\n                    </svg>\n                </i>\n            </a>\n            <h4>提示</h4>\n            <p>确认删除评论吗？</p>\n            <div class="btnbox">\n                <a href="javascript:void(0)" class="u-btn u-btn-del mango-comment-del">删除</a>\n                <a href="javascript:void(0)" class="u-btn mango-comment-del-cancel">取消</a>\n            </div>\n        </div>\n\n        <div class="c-comment-tips c-comment-alert" style="display:none;">\n            \x3c!-- 关闭按钮 --\x3e\n            <a href="" class="close">\n                <i class="icon icon14">\n                    <svg class="svg-icon" viewBox="0 0 14 14" width="14" height="14">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_close"></use>\n                    </svg>\n                </i>\n            </a>\n            \x3c!-- if 1.操作太过频繁 --\x3e\n\n            <h4>操作太过频繁</h4>\n            <p class="delay">请在\n                <strong>180</strong>秒后再发表</p>\n            <a href="javascript:void(0)" class="a-btn u-btn-ok">确定</a>\n\n\n            \x3c!-- if 2.操作异常 --\x3e\n\n            <h4>操作异常</h4>\n            <p class="verif">\n                <label>输入验证码</label>\n                <input type="text">\n                <span>\n                    <img src="https://i.mgtv.com/vcode?from=pcclient&amp;time=1528094224479" alt="">\n                    <em>换一张</em>\n                </span>\n            </p>\n\n            \x3c!-- if 验证码错误  --\x3e\n            <p class="error">验证码错误</p>\n            <a href="javascript:void(0)" class="a-btn u-btn-continue">继续发表</a>\n        </div>\n\n        \x3c!-- 大图 --\x3e\n        <div class="c-dialog-viewpictures">\n            <div class="m-viewpictures mango-comment-showpic" node-type="mango-comment-showpic" style="display:none;">\n                <div class="pic-viewer">\n                    <div class="viewer-image mango-comment-showimg" style="text-align: center;">\n                        <div class="img-box">\n                            \x3c!-- 图片 --\x3e\n                            <img class="pic" src="">\n                            \x3c!-- 图片加载loading --\x3e\n\t\t\t\t\t        <i class="loading"></i>\n                            \x3c!-- 左箭头 --\x3e\n                            <i class="viewer-left mango-comment-prev"></i>\n                            \x3c!-- 右箭头 --\x3e\n                            <i class="viewer-right mango-comment-next"></i>\n                            \x3c!-- 关闭按钮 --\x3e\n                            <i class="icon icon30 mango-comment-pic-closed">\n                                <svg class="svg-icon" viewBox="0 0 30 30" width="30" height="30">\n                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_cpic"></use>\n                                </svg>\n                            </i>\n                        </div>\n                    </div>\n                </div>\n                \x3c!-- 略缩图 --\x3e\n                <ul class="pic-viewer-list" node-type="mango-comment-viewer"></ul>\n            </div>\n        </div> \n\n        <div class="c-comment-mask mango-comment-mask" node-type="mango-comment-mask" style="display:none;"></div>\n    </div>\n    ',list:'\n    {{#list}}\n    <div class="m-comment" comment-id="{{commentId}}">\n        \x3c!-- 这是有回复的评论 --\x3e\n        <div class="comment">\n            \x3c!-- 头像 --\x3e\n            <a href="//i.mgtv.com/u/{{user.uuid}}/dynamic.html" target="_black" class="avatar">\n                <img src="{{user.photo}}">\n            </a>\n            \x3c!-- 用户名+时间 --\x3e\n            <div class="user">\n                <a href="//i.mgtv.com/u/{{user.uuid}}/dynamic.html" uuid="{{user.uuid}}" target="_black" class="name mango-master-name">{{user.nickName}}</a>\n                <span class="vip {{level}}">{{user.level}}</span>\n                <span class="timer">{{date}}</span>\n            </div>\n            \x3c!-- 评论标题 --\x3e\n            <p class="title">\n                <span class="picon">{{>label}}</span>\n                <span class="ptitle {{tit}}">{{title}}</span>\n                <span class="ptxt">{{content}}</span>\n            </p>\n            \x3c!-- 评论图片超过2张都是此格式 --\x3e\n            <div mg-stat-click="vid=&direct=cntp&addr=" mg-stat-custom="cont=图片" mg-stat-lob="subjectId={{subjectId}}&subjectType={{subjectType}}&commentId={{commentId}}" class="img-list mango-show-img-{{commentId}} {{onem}}">\n                {{>images}}\n            </div>\n            <div class="comment-list {{isreplay}}">\n                <ul>\n                    {{>replyList}}\n                </ul>\n                <div class="li-more {{isMore}}">\n                    <a href="javascript:;" mg-stat-click="vid=&direct=cntp&addr=" mg-stat-custom="cont=查看更多回复" mg-stat-lob="subjectId={{subjectId}}&subjectType={{subjectType}}&commentId={{commentId}}" num="{{commentNum}}" class="to-more mango-comment-reply-more">\n                        <span>查看更多回复</span>\n                        <span class="mango-comment-replyNum">({{commentNum}})</span>\n                        <b>\n                            <i class="icon icon12">\n                                <svg class="svg-icon" viewBox="0 0 12 12" width="12" height="12">\n                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_barr"></use>\n                                </svg>\n                            </i>\n                        </b>\n                    </a>\n                    <a href="javascript:;" style="display:none" class="to-retract mango-comment-more-retract">\n                        <span>收起回复</span>\n                        <b>\n                            <i class="icon icon12">\n                                <svg class="svg-icon" viewBox="0 0 12 12" width="12" height="12">\n                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_tarr"></use>\n                                </svg>\n                            </i>\n                        </b>\n                    </a>\n                    <span class="load">\n                        <i class="icon">\n                            <svg class="svg-icon" viewBox="0 0 40 40" width="40" height="40">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_loading"></use>\n                            </svg>\n                        </i>\n                        <b></b>\n                    </span>\n                </div>\n            </div>\n            <div class="ico-list">\n                \x3c!-- 点赞点击添加on，点赞数+1 --\x3e\n                <a href="javascript:;" class="comment-up mango-comment-givelike">\n                    <i class="icon icon14">\n                        <svg class="svg-icon" viewBox="0 0 16 16" width="16" height="16">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_zan"></use>\n                        </svg>\n                    </i>\n                    <b count="{{praiseNum}}">{{praiseNum}}</b>\n                </a>\n                \x3c!-- 回复点击添加on --\x3e\n                <a href="javascript:;" type="reply-master" class="reply mango-comment-reply-btn">\n                    <i class="icon icon14">\n                        <svg class="svg-icon" viewBox="0 0 16 16" width="16" height="16">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_reply"></use>\n                        </svg>\n                    </i>\n                    <b>回复</b>\n                </a>\n                \x3c!-- 举报 --\x3e\n                {{^self}}\n                <a href="javascript:;" class="report mango-comment-report">\n                    <i class="icon icon14">\n                        <svg class="svg-icon" viewBox="0 0 16 16" width="16" height="16">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_report"></use>\n                        </svg>\n                    </i>\n                    <b>举报</b>\n                </a>\n                {{/self}}\n                \x3c!-- 删除 --\x3e\n                {{^del}}\n                <a href="javascript:;" class="del mango-comment-del-tips">\n                    <i class="icon icon14">\n                        <svg class="svg-icon" viewBox="0 0 16 16" width="16" height="16">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_cdel"></use>\n                        </svg>\n                    </i>\n                    <b>删除</b>\n                </a>\n                {{/del}}\n            </div>\n            <div class="reply-box mango-comment-reply-send" type="reply-master" style="display:none">\n                <input class="comment-reply-input" maxlength="300" type="text" placeholder="">\n                <a href="javascript:;" type="reply-master" class="a-btn mango-comment-reply-sendBtn">回复</a>\n            </div>\n        </div>\n    </div>\n    {{/list}}\n    ',replyList:'\n    {{#replyList}}\n    <li class="mango-reply-list {{more}}" comment-id="{{commentId}}" reply-comment-id="{{commentId}}">\n        <a href="//i.mgtv.com/u/{{user.uuid}}/dynamic.html"  target="_black" class="avatar">\n            <img src="{{user.photo}}">\n        </a>\n        <div class="user">\n            <a href="//i.mgtv.com/u/{{user.uuid}}/dynamic.html" uuid="{{user.uuid}}" target="_black" class="name">{{user.nickName}}</a>\n            <span class="{{istoUser}} text">\n                <b>回复</b>\n                <a href="//i.mgtv.com/u/{{toUser.uuid}}/dynamic.html" target="_black">{{toUser.nickName}}</a>\n            </span>\n            <span class="timer">{{date}}</span>\n        </div>\n        \x3c!-- 评论内容 --\x3e\n        <p class="cont">{{content}}</p>\n        <div class="ico-list">\n            \x3c!-- 点赞点击添加on，点赞数+1 --\x3e\n            <a href="javascript:;" type="reply-like" class="comment-up mango-comment-givelike">\n                <i class="icon icon14">\n                    <svg class="svg-icon" viewBox="0 0 16 16" width="16" height="16">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_zan"></use>\n                    </svg>\n                </i>\n                <b count="{{praiseNum}}">{{praiseNum}}</b>\n            </a>\n            \x3c!-- 回复点击添加on --\x3e\n            <a href="javascript:;" type="reply-guest" class="reply mango-comment-reply-btn">\n                <i class="icon icon14">\n                    <svg class="svg-icon" viewBox="0 0 16 16" width="16" height="16">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_reply"></use>\n                    </svg>\n                </i>\n                <b>回复</b>\n            </a>\n            \x3c!-- 举报 --\x3e\n            {{^self}}\n            <a href="javascript:;" type="report-guest" class="report mango-comment-report">\n                <i class="icon icon14">\n                    <svg class="svg-icon" viewBox="0 0 16 16" width="16" height="16">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_report"></use>\n                    </svg>\n                </i>\n                <b>举报</b>\n            </a>\n            {{/self}}\n            \x3c!-- 删除 --\x3e\n            {{^del}}\n            <a href="javascript:;" del-guest="guest" class="del mango-comment-del-tips">\n                <i class="icon icon14">\n                    <svg class="svg-icon" viewBox="0 0 16 16" width="16" height="16">\n                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_cdel"></use>\n                    </svg>\n                </i>\n                <b>删除</b>\n            </a>\n            {{/del}}\n        </div>\n        <div class="reply-box mango-comment-reply-send-list" type="reply-guest" style="display:none">\n            <input class="comment-reply-input-list" maxlength="300" type="text" placeholder="">\n            <a href="javascript:;" type="reply-guest" class="a-btn mango-comment-reply-sendBtn">回复</a>\n        </div>\n    </li>\n    {{/replyList}}'},d=function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),n=document.cookie.match(t);return n?n[1]:""},m=function(e){return 0==e.length?"":e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/ /g," ").replace(/\n/g," ")},i=function(e,t){var n=void 0!==t?t.substring(t.indexOf("?")):location.search,i={};if(-1!=n.indexOf("?"))for(var s=0,o=n.substr(1).split("&");s<o.length;s+=1)i[o[s].split("=")[0]]=unescape(o[s].split("=")[1]);var c=i[e.toLowerCase()];return void 0!==c&&c},s=!1,r=function(e,t,n){$.ajax({url:e,type:"GET",dataType:"jsonp"}).done(function(e){e&&t.call(this,e)}).fail(function(){console.log("数据加载失败")})},p=function(e){return e<=1e4?e:(e/1e4).toFixed(1)+"万"},g="//comment.mgtv.com",e=($(window),$(document)),l={empty:"评论内容不能为空",verify_err:"验证码不能为空",success:"<i></i> 评论提交成功",error:"<i></i> 评论提交失败，请刷新后重试",comment_max:[300,"评论不能超过300字"],comment_min:[2,"评论不能少于2个字"]},n={$el:null,total:0,options:{},timer:null,currentPage:1,pages:1,events:{"click .m-comment-post":"postComment","click .mango-comment-del":"deleteComment","click .mango-comment-del-tips":"deleteCommentPro","click .mango-comment-del-cancel":"hideCommentPro","click .mango-comment-givelike":"giveLike","click .mango-comment-report":"toReport","click .mango-comment-report-close":"closedReport","click .mango-comment-reply-btn":"replyButtonClicked","click .mango-comment-reply-more":"fetchReplyData","click .mango-comment-more-retract":"packUp","click .mango-comment-report-send":"reportSend","click .mango-comment-username":"checkLogin","click .mango-comment-mask":"checkCommentMask","click .mango-tab-options":"checkTabType","click .mango-comment-uppci":"upImg","click .mango-comment-update-closed":"checkUpImg","click .mango-comment-item":"clickItemImg","click .mango-comment-loading-more":"loadinMore","click .mango-comment-reply-sendBtn":"replySend","focus [contenteditable]":"saveEditableContent","blur [contenteditable]":"blurEditTextarea","keyup [contenteditable]":"checkEditableContentForChange","paste [contenteditable]":"checkEditableContentForChange"},getDefaultOptions:function(){return{getUsers:function(e,t){e([])},getComments:function(e,t){e([])},postComment:function(e,t,n){t(e)},putComment:function(e,t,n){t(e)},deleteComment:function(e,t,n){t()},upvoteComment:function(e,t,n){t(e)},uploadAttachments:function(e,t,n){t(e)},refresh:function(){},timeFormatter:function(e){return new Date(e).toLocaleDateString()},page:1,pageSize:15}},init:function(e,t){this.$el=$(t),this.uuid=d("uuid")||"",this.ticket=""==d("HDCN")?"":d("HDCN").match(/\b\w+\b/g)[0],this.subjectType="",this.subjectId="",this.options=$.extend(!0,{},this.getDefaultOptions(),e),this.topCommentData=[],this.hotCommentData=[],this.isHotlock=!0,this.currentPage=this.options.page||1,this.currentRpage=1,this.isHotComment=!1,this.iscommentShow=!0,this.ToastShow=!1,this.isLogin=""!=this.ticket,this.undelegateEvents(),this.delegateEvents(),this.bindEvent(),this.defaultParameters={subjectType:this.options.type,subjectId:this.options.subject_id,uuid:this.uuid,ticket:this.ticket,platform:"pc"},this.textElDiv(),this.commentId=i("commentid");var n=this;this.fetchDataHotRender({options:this.options},function(){n.fetchDataAndRender({options:n.options})}),this.updateImage()},delegateEvents:function(){this.bindEvents(!1)},undelegateEvents:function(){this.bindEvents(!0)},reloadPage:function(){var e=this;this.options.subject_id=VIDEOINFO.vid,this.$el.find("div[node-type=c-comment-list]").html(""),this.$el.find("div[node-type=c-comment-hotlist]").html(""),this.$el.find("div[node-type=c-comment-positioning]").html(""),e.$el.find(".m-comment-title-new").hide(),e.isHotComment=!1,this.currentPage=1,this.currentRpage=1,this.iscommentShow=!0,this.commentId=i("commentid"),this.$el.find(".mango-comment-textarea").height(70),this.getCount(),this.fetchDataHotRender({options:this.options},function(){e.fetchDataAndRender({options:e.options})})},bindEvent:function(){var n=this;e.on("page.reload.mock",function(e,t){n.reloadPage()}),e.on("HONEY-LOGIN-DONE",function(){n.editUser(),n.uuid=d("uuid")||"",n.ticket=""==d("HDCN")?"":d("HDCN").match(/\b\w+\b/g)[0]}),e.on("HONEY-LOGIN-ERR",function(){}),$(window).on("resize",function(){1060<$(window).width()?n.$el.find("div.small-img").addClass("maxwidth"):n.$el.find("div.small-img").removeClass("maxwidth")}),setTimeout(function(){$(window).scroll(function(){if(n.$el.position().top<$(document).scrollTop()&&n.iscommentShow){try{"undefined"!=typeof MgStat&&MgStat.send("udp",{subjectId:n.options.subject_id,subjectType:n.options.type},{event:"cmntpv",bid:"20.9.1",lastp:""})}catch(e){console.log("方法有问题")}n.iscommentShow=!1}})},1800)},bindEvents:function(e){var t=e?"off":"on";for(var n in this.events){var i=n.split(" ")[0],s=n.split(" ").slice(1).join(" "),o=this.events[n].split(" ");for(var c in o)if(o.hasOwnProperty(c)){var a=this[o[c]];a=$.proxy(a,this),""==s?this.$el[t](i,a):this.$el[t](i,s,a)}}},isLoginFun:function(){return""!=d("HDCN")||(u.loginDialog("","",{entrance:1}),!1)},checkLogin:function(){this.isLoginFun()},createPar:function(e){var t="";for(var n in e)""!=t&&(t+="&"),t+=n+"="+encodeURIComponent(e[n]);return t},checkShowimg:function(e){this.$el.find("div.mango-comment-mask").hide(),this.$el.find("div.mango-comment-showpic").hide(),e.preventDefault()},clickItemImg:function(e){var t=$(e.currentTarget),n=this.$el.find("b[node-type=mango-cupdate-count]"),i=parseInt(n.text(),10)<0?0:parseInt(n.text(),10)-1;n.html(i),t.remove(),$("ul[node-type=update-list-img]>li.image-item").length<9&&this.$el.find(".mango-comment-update-add").show()},checkCommentMask:function(e){$(e.currentTarget).hide(),this.$el.find(".c-comment-report").hide()},checkUpImg:function(e){this.$el.find("li.image-item").length<=0&&this.$el.find(".pic-box").removeClass("on"),this.$el.find(".mango-comment-uppci").data("img",!1),this.$el.find(".pic-ul").hide()},checkTabType:function(e){var t=this,n=$(e.currentTarget),i=n.attr("type");if(n.hasClass("on"))return!1;t.currentPage=1;var s="getCommentList";this.$el.find("div[node-type=c-comment-list]").html(""),this.$el.find("div[node-type=c-comment-hotlist]").html(""),this.$el.find("div[node-type=c-comment-positioning]").html(""),t.$el.find(".mango-comment-loading-more").hide(),t.isHotComment=!1,$(e.currentTarget).addClass("on").siblings().removeClass("on"),"news"===i?(s="getCommentList",t.$el.find(".m-comment-title-new").hide(),this.fetchDataAndRender({options:t.options,api:s})):this.fetchDataHotRender({options:this.options},function(){t.fetchDataAndRender({options:t.options,api:s})})},reportSend:function(e){var t=this,n=$(e.currentTarget),i=$('input[type="radio"][name="report-reason"]:checked').attr("id"),s=n.parents(".content").find(".details").val(),o=n.parents(".content").find(".mango-comment-report-list").attr("comment-id");if(!i)return t.infoTips({txt:"请选择一项要举报的内容"}),!1;var c={content:s,reasonId:i,commentId:o},a=t.createPar($.extend(c,t.defaultParameters));r(g+"/v4/comment/report?"+a,function(e){e&&200===e.code?(t.infoTips({txt:"举报成功"}),$("div[node-type=mango-comment-report]").hide(),t.$el.find(".mango-comment-mask").hide()):alert(e.msg)})},packUp:function(e){var t=$(e.currentTarget);t.parents(".comment-list").find("li.mangao-reply-list-more").remove(),t.parents(".comment-list").find(".mango-comment-reply-more").show(),t.parents(".comment-list").find(".mango-comment-replyNum").show(),t.hide(),this.currentRpage=1;var n=t.parents(".m-comment").position().top+t.parents(".comment-list").height()+300;$(window).scrollTop(n)},replyButtonClicked:function(e){var t=$(e.currentTarget),n=t.attr("type"),i=t.parents(".comment").find(".mango-comment-reply-send"),s=t.parents(".comment").find("input.comment-reply-input");"reply-guest"===n&&(i=t.parents("li.mango-reply-list").find(".mango-comment-reply-send-list"),s=t.parents("li.mango-reply-list").find("input.comment-reply-input-list")),t.hasClass("on")?($(e.currentTarget).removeClass("on"),i.hide(),t.find("b").text("回复")):(this.$el.find(".mango-comment-reply-btn").removeClass("on"),this.$el.find(".mango-comment-reply-btn").find("b").text("回复"),this.$el.find(".mango-comment-reply-send").hide(),this.$el.find(".mango-comment-reply-send-list").hide(),t.addClass("on"),i.show(),s.focus(),t.find("b").text("收起"))},replySend:function(e){var t=this,n=$(e.currentTarget);if(!t.isLoginFun())return!1;var i=n.attr("type"),s=n.parents(".comment").find("input.comment-reply-input"),o=n.parents(".m-comment").attr("comment-id");if("reply-guest"===i){n.parents("li.mango-reply-list").find(".mango-comment-reply-send-list");s=n.parents("li.mango-reply-list").find("input.comment-reply-input-list"),o=n.parents("li.mango-reply-list").attr("reply-comment-id")}var c=$.trim(s.val()),a={content:c=m(c),parentId:o,uuid:t.uuid};a=$.extend(t.defaultParameters,a),""==c?(s.focus(),t.infoTips({txt:"回复不能为空"})):t.createComment(a,n)},blurEditTextarea:function(){!$.browser.msie||"9.0"!=$.browser.version&&"8.0"!=$.browser.version&&"7.0"!=$.browser.version||""!=$(ev.currentTarget).val()&&$(ev.currentTarget).val()!=$(ev.currentTarget).attr("datavalue")||$(ev.currentTarget).val($(ev.currentTarget).attr("datavalue"))},checkEditableContentForChange:function(e){var t=$(e.currentTarget),n=t.val(),i=n.length,s=e.keyCode;if(13==s)return!1;var o=this.$el.find(".m-comment-user"),c=o.find("b[node-type=word-limit]"),a=o.find("a.u-btn");return c.text(i),300<i&&(t.val(n.substr(0,300)),c.text(300),this.infoTips({txt:"超过字数限制，多出内容被截断"})),a[(0<i?"add":"remove")+"Class"]("active"),"13"==s&&0<i?(a.trigger("click"),event.preventDefault(),!1):void 0},postComment:function(e){var t=this,n=($(e.currentTarget),t.$el.find(".textarea")),i=$.trim(n.val()),s=i.length,o=t.$el.find(".m-comment-title-hot").val();t.ticket=""==d("HDCN")?"":d("HDCN").match(/\b\w+\b/g)[0],t.uuid=d("uuid")||"";var c="";t.$el.find("ul[node-type=update-list-img] li.image-item").each(function(e,t){c+="$"+$(t).attr("bucket")+":"+$(t).attr("imagename")}),o=m(o),i=m(i);var a={uuid:t.uuid,ticket:t.ticket,subjectType:t.options.type,subjectId:t.options.subject_id,title:o,content:i,type:""==c?0:1,parentId:"",images:c};return!!t.isLoginFun()&&(""==i?(t.infoTips({txt:l.empty}),n.focus(),!1):s<l.comment_min[0]?(t.infoTips({txt:l.comment_min[1]}),!1):void t.createComment(a))},hideCommentPro:function(){this.$el.find(".mango-comment-mask").hide(),this.$el.find("div[node-type=c-comment-del-tips]").hide()},deleteCommentPro:function(e){var t=$(e.currentTarget),n=t.parents(".m-comment").attr("comment-id");"guest"==t.attr("del-guest")&&(n=t.parents(".mango-reply-list").attr("reply-comment-id")),this.$el.find("div[node-type=c-comment-del-tips]").attr("commentid",n).show()},deleteComment:function(e){var n=this,i=$(e.currentTarget).parents(".c-comment-tips").attr("commentid"),t={uuid:n.uuid,ticket:n.ticket,subjectType:n.options.type,subjectId:n.options.subject_id,commentId:i},s=n.createPar($.extend(t,n.defaultParameters));r(g+"/v4/comment/delete?"+s,function(e){if(e&&200===e.code){var t=$("[comment-id="+i+"]");"guest"==t.find(".mango-comment-del-tips").attr("del-guest")&&1==t.parents(".comment-list").find("li.mango-reply-list").length&&t.parents(".comment-list").hide(),t.remove(),n.$el.find("div[node-type=c-comment-del-tips]").hide()}else n.infoTips({txt:e.msg})})},saveEditableContent:function(e){$(e.currentTarget),!$.browser.msie||"9.0"!=$.browser.version&&"8.0"!=$.browser.version&&"7.0"!=$.browser.version||$(e.currentTarget).val()==$(e.currentTarget).attr("datavalue")&&$(e.currentTarget).val("")},loadinMore:function(e){var t={page:this.currentPage};$(e.currentTarget).addClass("loading"),t=$.extend(t,this.options),this.fetchDataAndRender({options:t})},checkEdititle:function(){this.isLoginFun()},upImg:function(e){var t=this;if(!t.isLoginFun())return!1;var n=$(e.currentTarget);n.data("img")?(t.$el.find("li.image-item").length<=0&&t.$el.find(".pic-box").removeClass("on"),n.data("img",!1),t.$el.find(".pic-ul").hide()):(n.parent().addClass("on"),n.data("img",!0),t.$el.find(".pic-ul").show()),e.preventDefault()},fetchReplyData:function(t){var n=$(t.currentTarget),i=this,e=n.parents(".m-comment").attr("comment-id"),s=n.parents(".comment-list").find(".mango-reply-list").last().attr("reply-comment-id");n.parents(".m-comment").find(".mango-comment-more-retract").hide(),n.parents(".li-more").addClass("loading");var o=$(t.currentTarget).attr("num"),c=Math.ceil(o/5),a={uuid:i.uuid,ticket:i.ticket,subjectType:i.options.type,subjectId:i.options.subject_id,commentId:e,page:i.currentRpage,pageSize:5,cursor:s},m=i.createPar($.extend(i.defaultParameters,a));r(g+"/v4/comment/getReplyList?"+m,function(e){e&&200===e.code?(i.currentRpage>=c&&$(t.currentTarget).hide(),i.currentRpage++,i.renderReply(e,t),n.parents(".li-more").removeClass("loading"),n.parents(".m-comment").find(".mango-comment-more-retract").show(),n.find(".mango-comment-replyNum").hide()):console.log("数据异常")})},getCount:function(){var t=this,e={subjectId:t.options.subject_id,uuid:t.uuid,ticket:t.ticket},n=t.createPar($.extend(t.defaultParameters,e));r(g+"/v4/comment/getCount?"+n,function(e){e&&200==e.code&&t.$el.find(".comment-all-total").html(e.data.commentCount)})},infoTips:function(e){var t={};t.txt=e.txt||"操作异常",t.time=e.time||1500;var n=this.$el.find(".mamgo-comment-error");this.$el.find(".mamgo-comment-error span").html(t.txt),n.show(),clearTimeout(this.timer),this.timer=setTimeout(function(){n.fadeOut(200)},t.time)},guestRply:function(e,t){var n=window.USER&&200==window.USER.code?window.USER.data:{},i=c.replyList,s={replyList:[{commentId:e.commentId,content:e.content,date:"刚刚",praiseNum:0,title:e.title,self:!0,del:!1,istoUser:"on",toUser:{nickName:t.parents(".mango-reply-list").find(".name").text(),uuid:t.parents(".mango-reply-list").find(".name").attr("uuid")},user:{level:"",nickName:n.nickname,photo:n.avatar,uuid:n.uid}}]},o=Mustache.render(i,s);t.parents(".comment-list").show().find("ul").prepend(o),this.$el.find(".comment-reply-input-list").val(""),this.$el.find(".mango-comment-reply-btn").removeClass("on"),this.$el.find(".mango-comment-reply-btn").find("b").text("回复"),this.$el.find(".mango-comment-reply-send-list").hide()},masterRply:function(e,t){var n=window.USER&&200==window.USER.code?window.USER.data:{},i=c.replyList,s={replyList:[{commentId:e.commentId,content:e.content,date:"刚刚",praiseNum:0,title:e.title,self:!0,del:!1,istoUser:"",toUser:{},user:{level:"",nickName:n.nickname,photo:n.avatar,uuid:n.uid}}]},o=Mustache.render(i,s);t.parents(".comment").find(".comment-list").show(),t.parents(".comment").find(".comment-list").find("ul").prepend(o),this.$el.find(".mango-comment-reply-btn").removeClass("on"),this.$el.find(".mango-comment-reply-btn").find("b").text("回复"),this.$el.find(".comment-reply-input").val(""),this.$el.find(".mango-comment-reply-send").hide()},createComment:function(r,d){var p=this;p.buildForm(r),p.form.submit();r=r;p.listenAPI(function(e){if(e&&200==e.code){var t,n=window.USER&&200==window.USER.code?window.USER.data:{};r.commentId=e.data.commentId,new u.lotteryToast(5,function(e){e?p.infoTips({txt:e}):p.infoTips({txt:"发布成功"}),p.ToastShow=!0}),clearTimeout(i);var i=setTimeout(function(){p.ToastShow||p.infoTips({txt:"发布成功"})},1500),s=d&&d.attr("type")||"";if("reply-guest"==s)return p.guestRply(r,d),!1;if("reply-master"==s)return p.masterRply(r,d),!1;var o=p.$el.find("ul[node-type=update-list-img] img"),c=[];if(0<o.length){var a=new Image,m="";o.each(function(e,t){a.src=$(t).attr("src"),m=a.width+"*"+a.height,c.push({big:$(t).attr("src"),size:m,small:$(t).attr("src")})})}var l={list:[(t={commentId:r.commentId,content:r.content,date:"刚刚",del:!0,images:c,isMore:"none",isreplay:"none",ist:"",label:[],onem:"none",praiseNum:0,replyList:[],self:!1},_defineProperty(t,"del",!0),_defineProperty(t,"title",r.title),_defineProperty(t,"user",{level:"",nickName:n.nickname,photo:n.avatar,uuid:r.uuid}),t)]};p.render({data:l,inThe:!0}),p.$el.find(".mango-comment-uppci").parent().removeClass("on"),p.$el.find(".textarea").val(""),p.$el.find(".m-comment-title-hot").val(""),p.$el.find(".pic-ul").hide(),p.$el.find("li.mango-comment-item").remove(),p.$el.find("b[node-type=word-limit]").html(0),p.$el.find(".mango-comment-textarea").height(70)}else 2010==~~e.code?$(document).trigger("identity.box.show"):p.infoTips({txt:e.msg})})},topComment:function(e){var t=this,n={commentId:e},i=t.createPar($.extend(n,t.defaultParameters)),s=g+"/v4/comment/info?"+i;t.topCommentData=[],r(s,function(e){e&&e.data&&200===e.code&&(t.topCommentData.push(e.data),(e={}).list=t.topCommentData,t.renderTop(e))})},fetchDataHotRender:function(e,n){var i=this;e||console.log("数据不能传空");var t=e,s=(i.currentPage,g+"/v4/comment/topComment?subjectType="+t.options.project+"&subjectId="+t.options.subject_id);r(s,function(e){if(e&&200==e.code){var t=e.data;n&&n(),i.commentId&&t.list&&0<t.list.length&&$.each(t.list,function(e){if(i.commentId==t.list[e].commentId)return t.list.splice(e,1),!1}),i.render({data:t,ishot:!0})}else n&&n()})},fetchDataAndRender:function(e){var n=this;e||console.log("数据不能传空");var t=e,i=n.currentPage,s=t.api?t.api:"getCommentList",o=g+"/v4/comment/"+s+"?page="+i+"&subjectType="+t.options.project+"&subjectId="+t.options.subject_id;n.commentId&&n.topComment(n.commentId),r(o,function(e){if(e&&200===e.code){var t=e.data;"getCommentList"===s&&(n.total=e.data.commentCount,n.pages=Math.ceil(n.total/n.options.pageSize),n.currentPage>=n.pages?n.$el.find(".mango-comment-loading-more").hide():n.$el.find(".mango-comment-loading-more").removeClass("loading").show(),n.currentPage++,n.commentId&&t.list&&0<t.list.length&&$.each(t.list,function(e){if(n.commentId==t.list[e].commentId)return t.list.splice(e,1),!1})),t.list&&0<t.list.length&&n.render({data:t})}else console.log("暂时没数据")})},renderReply:function(t,e){var n=this,i=c.replyList;if(t.replyList=t.data.list,t.more="mangao-reply-list-more",t.replyList&&0<t.replyList.length){$.each(t.replyList,function(e){t.replyList[e].istoUser=t.replyList[e].toUser?"on":"",t.replyList[e].praiseNum=""==t.replyList[e].praiseNum?0:t.replyList[e].praiseNum,t.replyList[e].self=t.replyList[e].user.uuid==n.uuid,t.replyList[e].del=t.replyList[e].user.uuid!=n.uuid});var s=Mustache.render(i,t);$(e.currentTarget).parents(".comment-list").find("ul").append(s)}},editUser:function(){var e=window.USER&&200==window.USER.code?window.USER.data:{};e&&(this.$el.find(".mango-comment-avatar img").attr("src",e.avatar),this.$el.find(".mango-comment-username").html(e.nickname),this.$el.find(".m-comment-user").removeClass("nologin"))},textElDiv:function(){var e=this;this.$el.append(c.svg);var t=c.commentbox,n={subjectId:e.options.subject_id,subjectType:e.options.type},i=Mustache.render(t,n);this.$el.append(i),this.$el.width()<750&&e.$el.find(".mango-comment-user").addClass("min-w600"),this.getCount(),this.isLogin&&e.editUser(),(!$.browser.msie||"8.0"!=$.browser.version&&"7.0"!=$.browser.version)&&function(o){var c,a;o&&o.nodeName&&"TEXTAREA"===o.nodeName&&!o.hasAttribute("data-autosize-on")&&("onpropertychange"in o&&"oninput"in o&&o.addEventListener("keyup",n),window.addEventListener("resize",n),o.addEventListener("input",n),o.addEventListener("autosize.update",n),o.addEventListener("autosize.destroy",function(t){window.removeEventListener("resize",n),o.removeEventListener("input",n),o.removeEventListener("keyup",n),o.removeEventListener("autosize.destroy"),Object.keys(t).forEach(function(e){o.style[e]=t[e]}),o.removeAttribute("data-autosize-on")}.bind(o,{height:o.style.height,overflow:o.style.overflow,overflowY:o.style.overflowY,wordWrap:o.style.wordWrap,resize:o.style.resize})),o.setAttribute("data-autosize-on",!0),o.style.overflow="hidden",o.style.overflowY="hidden",function(){var e=window.getComputedStyle(o,null);o.style.wordWrap="break-word";var t=o.style.width;o.style.width="0px",o.offsetWidth,o.style.width=t,c="none"!==e.maxHeight&&parseFloat(e.maxHeight),a="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),n()}());function n(){var e=o.style.height,t=document.documentElement.scrollTop,n=document.body.scrollTop;o.style.height="auto";var i=o.scrollHeight+a;if(!1!==c&&c<i?(i=c,"scroll"!==o.style.overflowY&&(o.style.overflowY="scroll")):"hidden"!==o.style.overflowY&&(o.style.overflowY="hidden"),o.style.height=i+"px",document.documentElement.scrollTop=t,document.body.scrollTop=n,e!==o.style.height){var s=document.createEvent("Event");s.initEvent("autosize.resized",!0,!1),o.dispatchEvent(s)}}}(e.$el.find(".mango-comment-textarea")[0]),!$.browser.msie||"9.0"!=$.browser.version&&"8.0"!=$.browser.version&&"7.0"!=$.browser.version||(e.$el.find(".m-comment-title-hot").val("添加标题"),e.$el.find(".mango-comment-textarea").val("说两句吧..."))},createTemplate:function(e){var n=this,t=0,p=0,i=0,s="small-img",o=c.list;if(1060<$(window).width())s="small-img maxwidth";var u=e;if(u.list&&0<u.list.length)return $.each(u.list,function(d,e){t=u.list[d].replyList?u.list[d].replyList.length:0,p=u.list[d].images.length,i=u.list[d].label.length,p=u.list[d].images.length,u.list[d].isMore=2<u.list[d].commentNum?"":"none",u.list[d].commentNum=u.list[d].commentNum?u.list[d].commentNum-2:"",u.list[d].isreplay=0===t?"none":"",u.list[d].onem=1==p?"big-img":p<=0?"none":s,u.list[d].ist=0===u.list[d].label.length?"notitle":"",u.list[d].self=u.list[d].user.uuid==n.uuid,u.list[d].del=u.list[d].user.uuid!=n.uuid,u.list[d].user.level=0==u.list[d].user.level?"":"V"+u.list[d].user.level,u.list[d].level=0==u.list[d].user.level?"none":"",u.list[d].tit=""==u.list[d].title?"none":"",u.list[d].subjectId=n.options.subject_id,u.list[d].subjectType=n.options.type,u.list[d].praiseNum=""==u.list[d].praiseNum?0:u.list[d].praiseNum,0<i&&$.each(u.list[d].label,function(e,t){var n=1==u.list[d].label[e]?"top":"hot";u.list[d].label.push({cls:n,txt:"top"==n?"顶":"热"})}),0<p&&$.each(u.list[d].images,function(e,t){if(u.list[d].images[e].cls=1==u.list[d].images[e].type?"gificon":"",1==p){u.list[d].images[e].small=u.list[d].images[e].big;var n=u.list[d].images[e].size.split("*"),i=(s=n[0],o=n[1],c=390,a=220,l={},r=o||0,(m={}).width=s||0,m.height=r,0<m.width&&0<m.height&&(m.width/m.height>=c/a?m.width>c?(l.width=c,l.height=m.height*c/m.width):(l.width=m.width,l.height=m.height):m.height>a?(l.height=a,l.width=m.width*a/m.height):(l.width=m.width,l.height=m.height)),l);u.list[d].images[e].width=i.width,u.list[d].images[e].height=i.height}var s,o,c,a,m,l,r}),0<t&&$.each(u.list[d].replyList,function(e,t){u.list[d].replyList[e].istoUser=u.list[d].replyList[e].toUser?"on":"",u.list[d].replyList[e].praiseNum=""==u.list[d].replyList[e].praiseNum?0:u.list[d].replyList[e].praiseNum,u.list[d].replyList[e].self=u.list[d].replyList[e].user.uuid==n.uuid,u.list[d].replyList[e].del=u.list[d].replyList[e].user.uuid!=n.uuid})}),Mustache.render(o,u,{images:'{{#images}}<a href="javascript:;" size="{{size}}"class="pic_item {{cls}}" data-role="lightbox" data-source="{{big}}" data-group="group-1"><img  width="{{width}}" height="{{height}}" src="{{small}}"><i>GIF</i></a>{{/images}}',replyList:c.replyList,label:'{{#label}}<b class="{{cls}}">{{txt}}</b>{{/label}}'})},renderTop:function(e){var t=this.$el.find("div[node-type=c-comment-positioning]"),n=this.createTemplate(e);t.html(n)},render:function(e){var t=this,n=this.$el.find("div[node-type=c-comment-list]"),i=this.$el.find("div[node-type=c-comment-hotlist]"),s=(c.list,e.data);if(s.list&&0<s.list.length){var o=t.createTemplate(s);e.ishot?(i.append(o),t.isHotComment=!0,this.$el.find(".mango-comment-tabbox").show()):(e.inThe?t.$el.find("[node-type=c-comment-hotlist] .m-comment").length<=0?t.$el.find("[node-type=c-comment-list]").prepend(o):t.$el.find("[node-type=c-comment-hotlist]").prepend(o):(t.isHotComment&&t.$el.find(".m-comment-title-new").show(),n.append(o)),$(".img-list").lightbox({ifChange:!0}))}else e.ishot&&(t.$el.find(".mango-comment-tabbox").hide(),t.$el.find(".m-comment-title-new").hide(),this.$el.find(".mango-comment-tabbox").hide());this.$el.find(".c-comment-cont").find(".m-comment").length<=0?this.$el.find(".comment-no-data").show():this.$el.find(".comment-no-data").hide()},giveLike:function(e){var t=this,n=$(e.currentTarget),i=n.attr("type");if(!t.isLoginFun())return!1;var s=n.parents(".m-comment").attr("comment-id");"reply-like"===i&&(s=n.parents("li").attr("reply-comment-id"));var o=n.find("b").attr("count")||0,c=""==o?0:o,a=g+"/v4/comment/up?"+l;t.uuid=d("uuid")||"",t.ticket=""==d("HDCN")?"":d("HDCN").match(/\b\w+\b/g)[0];var m={uuid:t.uuid,ticket:t.ticket,subjectType:t.options.type,subjectId:t.options.subject_id,commentId:s},l=t.createPar($.extend(t.defaultParameters,m));n.data("dnd-count")?(n.removeClass("on"),c=parseInt(c,10)-1,n.data("dnd-count",!1),a=g+"/v4/comment/unup?"+l):(c=parseInt(c,10)+1,n.addClass("on"),n.data("dnd-count",!0),a=g+"/v4/comment/up?"+l),n.find("b").attr("count",c),c=0==p(c)?0:p(c),n.find("b").html(c),r(a,function(e){e&&200===e.code||t.infoTips({txt:e.msg})})},banned:function(){},toReport:function(e){var n=this,t=$(e.currentTarget),i=$(e.currentTarget).parents(".m-comment").attr("comment-id");i=t.parents(".m-comment").attr("comment-id");"report-guest"===t.attr("type")&&(i=t.parents("li.mango-reply-list").attr("reply-comment-id"));var s=[];r("//comment.mgtv.com/v4/comment/reasonList",function(t){t&&200===t.code?($.each(t.data.list,function(e){s.push('<li><input type="radio" name="report-reason" id="'+t.data.list[e].id+'"><label for="report-reason-1">'+t.data.list[e].name+"</label></li>")}),$("div[node-type=mango-comment-report] .mango-comment-report-list").attr("comment-id",i).html(s.join(""))):console.log("暂时没数据"),n.$el.find(".c-comment-report").show(),n.$el.find(".mango-comment-mask").show()})},closedReport:function(){this.$el.find(".c-comment-report").hide(),this.$el.find(".mango-comment-mask").hide()},buildForm:function(e){var t=this;t.iframe&&t.iframe.remove(),t.form&&t.form.remove();var n="honey-comment-from",i=$('<iframe frameborder="0" height="0" name="'+n+'" id="'+n+'" width="0"/>').appendTo("body"),s=(encodeURIComponent(window.location.href),{subjectType:t.options.type,subjectId:t.options.subject_id,content:e.content,uuid:t.uuid,ticket:t.ticket,title:e.title,type:e.type||"",method:"post",platform:"pc",parentId:e.parentId,images:e.images,abroad:"0",dataType:"html",_support:"10000"}),o={api:g+"/v4/comment/add",id:n,type:"hiddens"};t.form=t.createForm(s,o),t.iframe=i},createForm:function(e,t){var n={},i=$("<form />").attr({action:t.api,target:t.id,method:"POST"}).appendTo("body");return $.each(e,function(e,t){n[e]=$("<input />").attr({type:"hidden",name:e,value:t}).appendTo(i)}),"hiddens"==t.type&&(this.hiddens=n),i},updateImage:function(){var o=this;if($.browser.msie&&("9.0"==$.browser.version||"8.0"==$.browser.version||"7.0"==$.browser.version))return o.$el.find(".pic-box").hide(),!1;head.js("//i5.hitv.com/s1/2018/shoutu/js/aliyun-oss-sdk.js",function(){});var e=navigator;if(/iPad/i.test(e.userAgent))return o.$el.find(".pic-box").hide(),!1;var r="";$("#mango-comment-wrap").on("change",".mango-comment-file",function(){var e=d("uuid")||"",t=""==d("HDCN")?"":d("HDCN").match(/\b\w+\b/g)[0];if(""==d("HDCN"))return u.loginDialog(),!1;var n=$(this).attr("id"),i=document.getElementById(n),s=i.files,l=function(e){var n=[];if(!(1==e.length&&5242880<e[0].size))return $.each(e,function(e,t){9!=n.length&&t.size<5242880&&n.push(t)}),n;o.infoTips({txt:"单张图片限制大小5M"})}(s);return i.value.match(/jpg|jpeg|gif|png|webp|tiff/i)?0!=s.length&&($.ajax({url:"//upload-ugc.bz.mgtv.com/upload/image/getStsToken?uuid="+e+"&ticket="+t+"&biz=1&num="+l.length,type:"GET",dataType:"jsonp",success:function(i){i.data&&0<i.data.bucketInfo.keys.length&&function(){var e=i.data,c=new OSS.Wrapper({accessKeyId:e.stsToken.accessKeyId,accessKeySecret:e.stsToken.accessKeySecret,stsToken:e.stsToken.securityToken,endpoint:e.bucketInfo.endpoint,bucket:e.bucketInfo.bucket}),a=e.bucketInfo.keys;r=e.bucketInfo.bucket;for(var t=e.bucketInfo.endpoint.replace("https://",""),m="https://"+r+"."+t+"/",n=0;n<l.length;n++)!function(e){var t=l[e],n=e+"_"+Math.ceil(1e6*Math.random()),i=(a[e],t.type.split("/")[1]),s=a[e]+"."+i;$('<li class="image-item mango-comment-item" imageName="'+s+'" bucket="'+r+'"  id="'+n+'">\n                                            <b>\n                                                <i class="icon icon14">\n                                                <svg class="svg-icon" viewBox="0 0 14 14" width="14" height="14">\n                                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#mgtv_comment_svg_close"></use>\n                                                </svg>\n                                                </i>\n                                            </b>\n                                            <img src="//img.mgtv.com/standard2.0/pcweb-comment6/loading2.gif">\n                                        </li>').prependTo("ul[node-type=update-list-img]");var o=$("ul[node-type=update-list-img]>li.image-item").length;9==o&&$(".mango-comment-update-add").hide(),9<o&&$("li.image-item:gt(8)").remove(),$("b[node-type=mango-cupdate-count]").html($("ul[node-type=update-list-img]>li.image-item").length),c.multipartUpload(s,t,{}).then(function(e){$("#"+n).find("img").attr("src",m+s).show()})["catch"](function(e){})}(n)}()},error:function(e,t,n){console.log(e,t,n)}}),void $("#mango-comment-file").val("")):(o.infoTips({txt:"请您上传正确的图片:jpg|jpeg|gif|png|webp|tiff"}),!1)})},listenAPI:function(n){!s&&Messenger&&(s=new Messenger("parent","MessengerComment")),s&&s.listen(function(e){if(e){var t=$.parseJSON(e);$.isFunction(n)&&n(t),s.clear()}})}};$.fn.comments=function(t){return this.each(function(){var e=Object.create(n);$.data(this,"comments",e),e.init(t||{},this)})}});