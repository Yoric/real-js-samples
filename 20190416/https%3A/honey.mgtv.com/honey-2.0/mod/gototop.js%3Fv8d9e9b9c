"use strict";honey.def("lib:jquery,lib:mustache,plugin:stk",function(n){var o,l,d=null,i=$(window),c=!1,t=t||$.now(),r=navigator.userAgent.toLowerCase(),a=new STK.start;n.css("//css.mgtv.com/imgotv-member/page/member/member-dialog.css?version=20190415"),n.gotoTop=function(){if(!(0<$(".honey-feedback-floatbtn").length)){var t=p(),a="";0==t?a='<anuncio id="249"></anuncio>':1<=t&&t<=7||14==t?a='<anuncio id="251"></anuncio>':11==t&&(a='<anuncio id="250"></anuncio>');var e="";try{e="feedback-rom-"+String.fromCharCode(65+Math.ceil(25*Math.random()))+Math.ceil(1e5*Math.random())}catch(s){}"undefined"!=typeof window.honeyUuid&&(e=window.honeyUuid()),(o=$('<div class="honey-feedback-floatbtn clearfix">'+a+'<div class="footJifen on" style="display:none;" node-type="honey-pop-enter-content"><a class="Jifenimg" href="" target="_blank" node-type="honey-pop-enter-icon"><img width="100%" height="auto" src="" alt="" node-type="honey-pop-enter-img"></a><i class="btn-close" node-type="honey-pop-enter-close" style="display:none;"></i></div><ul class="honey-feedback-list"><li class="f-getJifen" node-type="f-getlottery" style="display:none;"><i class="c-feedback-icon getJifen-svg" node-type="f-getlottery-i"></i><span class="txt">领积分</span><div class="f-gj-conwp" node-type="f-getlottery-list"><div class="f-getJifen-con"><i class="arr"></i><p class="f-gj-wp-notask" style="display:block;">暂无任务，请稍后再试!</p><div class="f-gj-lottery" node-type="lottery-container"></div><p class="f-gj-goshop" style="display:none;"><a mg-stat-click="vid=&direct=cntp&addr=" mg-stat-custom="label=feedback-getScore-goGift" target="_blank" href="//i.mgtv.com/my/lottery?fpa=gototop">去我的积分中心换好礼</a></p></div></div></li><li class="appdown" id="appdown"></li><li class="feedback"><a target="_blank" action-type="honey-feedback-btn" feedback-token="'+e+'" href="'+("//www.mgtv.com/feedback/?token="+e)+'"><span class="btn"></span><span class="txt">反馈</span></a></li><li class="backtop"><a href="#"><span class="btn"></span><span class="txt">顶部</span></a></li></ul></div>')).appendTo("body"),l=o.find(".close"),/windows nt 10.0/i.test(r)&&(g(),window.lotteryEnterData&&1==window.lotteryEnterData.show&&$("[node-type=f-getlottery]").show());$("a[action-type=honey-backtop]");o.find(".backtop").on("click",function(t){t.preventDefault(),d||(d=setInterval(function(){var t=i.scrollTop();t<=5?(i.scrollTop(0),clearInterval(d),d=null):i.scrollTop(.85*t)},20))}),l.on("click",function(t){t.preventDefault(),o.find(".close").remove(),o.find(".pad").remove()}),6!=n.ie&&7!=n.ie?(i.on("scroll",function(t){i.scrollTop()<500?(o.fadeOut(),c=!1):(c||(o.fadeIn(),c=!0),window.MgStat&&MgStat.send&&MgStat.send("cv",{},{mod:"YXIAKT"}))}),i.scrollTop()<500&&(o.hide(),c=!1)):(o.css("display","block"),$("html").css({"background-image":"url(about:blank)",backgroundAttachment:"fixed"}))}};var p=function(){var t=window.location.hostname,a={"^/$":0,"^/show/$":1,"^/movie/$":3,"^/tv/$":2,"^/cartoon/$":4,"^/child/$":5,"^/music/$":6,"^/live/$":7,"^/vip/$":14,"^/v/\\d{1,3}/\\d+/$":10,"^/v/\\d{1,3}/\\d+/[a-z]/\\d+\\.html$":11,"^/z/\\d+/\\d+\\.html$":11,"^/z/\\d+\\.html$":11,"^/b/\\d+/\\d+\\.html$":11,"^/s/\\d+\\.html$":11,"^/l/\\d+/\\d+\\.html$":11,"^/l/\\d+\\.html$":11},e=location.pathname,s={"www.mgtv.com":0,"so.mgtv.com":9,"list.mgtv.com":8,"live.mgtv.com":7,"i.mgtv.com":12}[t];if(0==s){var n,o=13;for(n in a){var l=!1,d=new RegExp(n);try{l=d.test(e)}catch(i){}l&&(o=a[n])}return o}return s||13},s=null;$.ajax({url:"//www.mgtv.com/v/2018/pcweb_sidebar/",type:"GET",dataType:"jsonp",jsonpCallback:"mgtvcallback_sidebar",success:function(t){var a=navigator.userAgent.toLowerCase();""==(s=/windows nt 10.0/i.test(a)?t.win10app:/windows phone 10.0/i.test(a)?t.win10app:/(macintosh|mac(?=_powerpc)\s)/i.test(a)?t.macapp:/ipad/i.test(a)||/android/i.test(a)?t.padapp:t.win32app).data.link&&(s.data.link="//www.mgtv.com/app/");var e=Mustache.render('{{#data}}        <a target="_blank" class="app-float-down" alt="{{subtitle}}" href="{{link}}" style="background-image:url({{ico}});" mg-stat-mod="YXIAKT" mg-stat-custom="label=float-client" >            <span class="code-layer">                <em class="code-img">                    <img src="{{img}}" alt="{{subtitle}}">                    <i class="arr"></i>                </em>            </span>            <span class="txt">{{title}}</span>        </a>    {{/data}}',s);$("#appdown").html(e).show()}});var y={uuid:""==u("uuid")?"":u("uuid"),ticket:""==u("HDCN")?"":u("HDCN").match(/\b\w+\b/g)[0],mac:""==u("__STKUUID")?"00000000-0000-0000-0000-000000000000":u("__STKUUID"),platform:"4",device:"",appVersion:"",osType:"",abroad:""},e=function(){$("[node-type=f-getlottery]").addClass("f-gj-hover"),y.uuid=""==u("uuid")?"":u("uuid"),y.ticket=""==u("HDCN")?"":u("HDCN").match(/\b\w+\b/g)[0],$("[node-type=lottery-container]").html(""),$.ajax({url:"//task.bz.mgtv.com/user/task",type:"GET",data:y,dataType:"jsonp",success:function(t){if(t&&200==t.code&&t.data&&t.data.task_list&&t.data.task_list.length)if($(".f-gj-wp-notask").hide(),t.data.task_list=t.data.task_list.slice(0,3),t.data.task_list.length){for(var a=0;a<t.data.task_list.length;a++)if(-1!=t.data.task_list[a].status){t.data.task_list[a].widthPer=f(t.data.task_list[a].curStep/t.data.task_list[a].maxStep);var e=t.data.task_list[a].type;if(e)switch(e){case 11:t.data.task_list[a].classtag="fjf-sign",t.data.task_list[a].btnURL="javascript:void(0)",t.data.task_list[a].labelValue="feedback-getScore-layer-sign",1==t.data.task_list[a].status?(t.data.task_list[a].btntag="签到",t.data.task_list[a].btnClass=""):2==t.data.task_list[a].status?(t.data.task_list[a].btntag="已签到",t.data.task_list[a].btnClass="fj-btn-gray"):(t.data.task_list[a].btntag="签到",t.data.task_list[a].btnClass="");break;case 5:t.data.task_list[a].classtag="fjf-comment",t.data.task_list[a].btntag="去发表",t.data.task_list[a].btnURL=t.data.task_list[a].url,t.data.task_list[a].btnClass="",t.data.task_list[a].labelValue="feedback-getScore-layer-comment",2==t.data.task_list[a].status?(t.data.task_list[a].btntag="已完成",t.data.task_list[a].btnClass="fj-btn-gray"):1==t.data.task_list[a].status&&(t.data.task_list[a].btntag="领取");break;case 7:t.data.task_list[a].classtag="fjf-danmu",t.data.task_list[a].btntag="去发表",t.data.task_list[a].btnURL=t.data.task_list[a].url,t.data.task_list[a].btnClass="",t.data.task_list[a].labelValue="feedback-getScore-layer-danmu",1==t.data.task_list[a].status?t.data.task_list[a].btntag="领取":2==t.data.task_list[a].status&&(t.data.task_list[a].btntag="已完成",t.data.task_list[a].btnClass="fj-btn-gray");break;case 13:t.data.task_list[a].classtag="fjf-play",t.data.task_list[a].btntag="去观看",t.data.task_list[a].btnURL=t.data.task_list[a].url,t.data.task_list[a].labelValue="feedback-getScore-layer-play",t.data.task_list[a].btnClass="",2==t.data.task_list[a].status?(t.data.task_list[a].btntag="已完成",t.data.task_list[a].btnClass="fj-btn-gray"):1==t.data.task_list[a].status&&(t.data.task_list[a].btntag="领取")}}else t.data.task_list[a].splice(a,1);var s=Mustache.render('{{#datas}}                                <dl class="f-gj-wp f-jf-{{classtag}}">                                    <dd class="f-gj-ico {{classtag}}"></dd>                                    <dt class="f-gj-con">                                        <p class="fj-txt">{{name}}<em>+{{credits}}</em></p>                                        <p class="fj-line"><span class="fj-1"><em style="width:{{widthPer}}"></em></span><span class="fj-2">{{curStep}}/{{maxStep}}</span></p>                                    </dt>                                    <dd class="f-gj-btn">                                        <a href="{{btnURL}}" mg-stat-custom="label={{labelValue}}" btnstatus="{{status}}" node-type="lottery-sign" target="_blank" action-type="{{type}}" mg-stat-click="vid=&direct=cntp&addr=" class="fj-btn {{btnClass}}">{{btntag}}</a>                                    </dd>                                </dl>                                {{/datas}}',{datas:t.data.task_list});$("[node-type=lottery-container]").html(s).show(),$("[node-type=f-getlottery-list]").show(),window.MgStat&&MgStat.send&&MgStat.send("cv",{},{mod:"RgS1Le"})}else $("[node-type=lottery-container]").hide(),$(".f-gj-wp-notask").show();else $("[node-type=lottery-container]").hide(),$(".f-gj-wp-notask").show();$(".f-gj-goshop").show()}})};$(document).on("click","[node-type=lottery-sign]",function(t){if(""==u("HDCN"))return t.preventDefault(),n.loginDialog(),!1;var a=$(this),e=a.attr("action-type"),s=a.attr("btnstatus");1==s?(t.preventDefault(),$.ajax({url:"//task.bz.mgtv.com/user/task_take?type="+e,type:"GET",data:y,dataType:"jsonp",success:function(t){t&&200==t.code&&(a.addClass("fj-btn-gray").html("已完成"),"11"==e&&a.addClass("fj-btn-gray").html("已签到"),$(document).trigger("HONEY-BALANCE-UPDATE"),$(document).trigger("LOTTERY-PROCESS-UPDATE"),window.getLotteryMount=t.data.balance,$("[node-type=honey-balance-pot]").html(t.data.balance+"积分"),$("[node-type=sidebar-total-point],[node-type=content-total-point],[node-type=detail-total-point]").html(t.data.balance))}})):2==s&&t.preventDefault()}),$(document).on("LOTTERY-PROCESS-UPDATE",function(){e()}),$(document).on("mouseover","[node-type=f-getlottery-i]",function(t){e()}),$(document).on("mouseover","[node-type=f-getlottery]",function(t){t.stopPropagation(),$("[node-type=f-getlottery]").addClass("f-gj-hover"),$("[node-type=f-getlottery-list]").show()}),$(document).on("mouseleave","[node-type=f-getlottery]",function(t){$("[node-type=f-getlottery]").removeClass("f-gj-hover"),$("[node-type=f-getlottery-list]").hide(),$(".f-gj-goshop").hide()}),$("body").on("mouseenter","a.app-float-down",function(t){window.MgStat&&MgStat.send&&MgStat.send("cv",{},{mod:"X7dORJ"})});var g=function(){var t=$.extend({},y,{platform:"pcweb"});$.ajax({url:"//layer.bz.mgtv.com/layer/conf",type:"GET",dataType:"jsonp",data:t,success:function(t){t&&t.data&&t.data.layer&&t.data.layer.length&&0==t.data.layer[0].layer_type&&2==t.data.layer[0].position&&t.data.layer[0].img&&($("[node-type=honey-pop-enter-icon]").attr("href",t.data.layer[0].landing),$("[node-type=honey-pop-enter-img]").attr("src",t.data.layer[0].img),$("[node-type=honey-pop-enter-close]").attr("dataurl",t.data.layer[0].close[0]),$("[node-type=honey-pop-enter-icon]").attr("dataurl",t.data.layer[0].click[0]),u("isCloseCommonLottery")?u("isCloseCommonLottery")!=m()?($("[node-type=honey-pop-enter-content]").show(),a.pagePv(y,t.data.layer[0].pv[0])):$("[node-type=honey-pop-enter-content]").hide():($("[node-type=honey-pop-enter-content]").show(),a.pagePv(y,t.data.layer[0].pv[0])))}})};function u(t){var a=new RegExp("(?:^|;+|\\s+)"+t+"=([^;]*)"),e=document.cookie.match(a);return e?e[1]:""}function f(t){var a=Number(100*t).toFixed(2);return a+="%"}$(document).on("click","[node-type=honey-pop-enter-icon]",function(t){a.pageEvent(y,$(this).attr("dataurl"))}),$(document).on("click","[node-type=honey-pop-enter-close]",function(t){$("[node-type=honey-pop-enter-content]").hide(),STK.$.cookie.set("isCloseCommonLottery",m(),1,".mgtv.com"),a.pageEvent(y,$(this).attr("dataurl"))}),$(document).on("mouseover","[node-type=honey-pop-enter-content]",function(t){$("[node-type=honey-pop-enter-close]").show()}),$(document).on("mouseleave","[node-type=honey-pop-enter-content]",function(t){$("[node-type=honey-pop-enter-close]").hide()});var m=function(){var t=new Date;return""+t.getFullYear()+t.getMonth()+t.getDate()}});