!function($){jshop.module.GoodsRec={},$.extend(jshop.module.GoodsRec,jshop.module),$.extend(jshop.module.GoodsRec,function(){var intellArr=[];return{errorMessage:function(a){a.show(),setTimeout(function(){a.animate({top:-a.outerHeight(!0)},200).hide()},1e4)},autoLayout:function autoLayout(args){if(void 0==args&&validateData($(this).attr("module-param")))var args=eval("("+$(this).attr("module-param")+")");if(!$(this).data("autoLayout")){var _this=this,param=$.extend({node:"li",spacingType:"margin",size:1,message:".jMessageRemind",pageMode:".j-edit-page"},args),elem=$(_this).find(param.node),message=$(_this).find(param.message),pageMode=$(param.pageMode),qty=parseInt(elem.parent().parent().width()/elem.outerWidth(!0)),ie=$.browser.msie&&parseInt($.browser.version)<=7?"i":"",spacingType="padding"==param.spacingType?"p":"m",size=.5==param.size?"OneHalf":"One",array=["qOne","qTwo","qThree","qFour","qFive","qSix","qSeven","qEight","qNine","qTen","qEleven","qTwelve"];qty>=1&&qty<=array.length&&$(elem).addClass(ie+array[qty-1]+size).addClass(spacingType+size),$(this).data("autoLayout",!0)}},removeBg:function removeBg(args){if(void 0==args&&validateData($(this).attr("module-param")))var args=eval("("+$(this).attr("module-param")+")");if(!$(this).data("removeBgFlag")){var param=$.extend({defaultClass:"noBg"},args),elem=$(this).find(param.node),qty=parseInt(elem.parent().width()/elem.outerWidth(!0)),defaultClass=param.defaultClass;elem.each(function(a,t){!a||((a+1)/qty).toString().indexOf(".")>=0?(a+1)/qty==1&&$(t).addClass("noBgOne"):$(t).addClass(defaultClass)}),$(this).data("removeBgFlag",!0)}},autoLayoutRemoveBg:function autoLayoutRemoveBg(){if(validateData($(this).attr("module-param")))var args=eval("("+$(this).attr("module-param")+")");var param=$.extend({node:null},args);jshop.module.GoodsRec.removeBg.call(this,param),jshop.module.GoodsRec.autoLayout.call(this,param)},waterfallFlow:function waterfallFlow(args){function compare(a,t){return a<t?-1:a>t?1:0}if(void 0==args&&validateData($(this).attr("module-param")))var args=eval("("+$(this).attr("module-param")+")");var _this=this,param=jQuery.extend({node:"li",topSpac:15},args),elem=jQuery(_this).find(param.node),qty=parseInt(elem.parent().width()/parseInt(elem.outerWidth(!0))),topPos,array=[];elem.each(function(a,t){var e=parseInt(a/qty),o=a%qty,i=o*jQuery(t).outerWidth(!0);if(0==e)topPos=parseInt(o%2*param.topSpac)+param.topSpac;else{var r=jQuery(elem.get((e-1)*qty+o));topPos=r.outerHeight()+parseInt(r.css("top"))}jQuery(t).css({left:i,top:topPos}),array.push(parseInt(jQuery(t).css("top"))+jQuery(t).height())}),array.sort(compare),jQuery(_this).css("height",array[array.length-1]+param.topSpac)},autoLayoutWaterfallFlow:function autoLayoutWaterfallFlow(){if(validateData($(this).attr("module-param")))var args=eval("("+$(this).attr("module-param")+")");var param=$.extend({node:null},args);jshop.module.GoodsRec.autoLayout.call(this,param),jshop.module.GoodsRec.waterfallFlow.call(this,param)},addEllipsis:function addEllipsis(args){if(void 0==args&&validateData($(this).attr("module-param")))var args=eval("("+$(this).attr("module-param")+")");var _this=this,param=jQuery.extend({title:"li",count:15,text:"..."},args),elem=jQuery(_this).find(param.title);elem.each(function(a,t){var e=t.firstChild;e&&3==e.nodeType&&e.length>=param.count&&e.replaceData(param.count,e.length,param.text)})},autoLayoutEllipsis:function autoLayoutEllipsis(){if(validateData($(this).attr("module-param")))var args=eval("("+$(this).attr("module-param")+")");var param=$.extend({node:null},args);jshop.module.GoodsRec.addEllipsis.call(this,param),jshop.module.GoodsRec.autoLayout.call(this,param)},blankNote:function(a){var t=this,e=$(t),o=$.extend({phase:24,node:"li",priceNode:".jdNum",rate:0},a),i=e.find(o.node);i.length&&function(){var a=[];i.each(function(t,e){a.push("J_"+$(e).attr("skuid"))}),$.ajax({url:INTERFACE.price.jd,data:{type:2,skuids:a.join(",")},dataType:"jsonp",success:function(a){$.each(a,function(a,t){var i=t.p<=0?"暂无定价":(parseFloat(t.p)/o.phase+parseFloat(t.p)*parseFloat(o.rate)).toFixed(2);e.find(o.node+"[skuid="+t.id.substr(2)+"]").find(o.priceNode).html(i)})}})}()},intellSort:function(a){var t,e,o,i,r=this,s=$(r),n=$.extend({attrName:"sku",item:"li",container:"ul"},a),d=function(){var a=[];return s.find(n.item).each(function(t,e){a.push($(e).attr(n.attrName))}),a}(),l=d.length,u=u||CookieUtil.getCookie,p=null;d=d.slice(0,50),d=d.join(","),l&&function(){function a(a){var t=new Image;a+="&m=UA-J2011-1&ref="+encodeURIComponent(document.referrer)+"&random="+Math.random(),t.setAttribute("src",a.replace(/https?:/,""))}function r(){$.ajax({url:INTERFACE.diviner,data:{p:610013,uuid:o,sku:"",skus:"",pin:i,lid:1,lim:l,sp:"",hi:"sku="+t+":"+e+":"+d,fe:"",fne:"",ro:"",ec:"utf-8"},dataType:"jsonp",jsonpCallback:c})}t=$("#pageInstance_appId").val()||$("#appId").val(),e=s.closest("[instanceid]").attr("instanceid");try{uudi=u("__jda").split(".")[1]}catch(a){o=-1}i=encodeURIComponent(u("pin"));var c="diviner"+parseInt(1e4*Math.random());window[c]=function(o){if(o&&o.success&&o.data){var i=s.find(n.container),r=[],d=o.data[0].clk;$.each(o.data[0].subsku,function(o,l){var u=s.find(n.item+"["+n.attrName+"="+l.sku+"]");p?p.after(u):u.prependTo(i),p=u,r.push(l.sku),u.click(function(){a(d.replace(/sku\=\d+(?=\$)/,"sku="+l.sku).replace(/csku\=\d+(?=\$)/,"csku="+l.sku).replace(/(v\=src[^&]+)/,"$1$activityid="+t+"$moduleid="+e))})}),r=r.join(","),a(o.impr.replace(/csku\=\d+(?=\$)/,"csku="+r).replace(/(v\=src[^&]+)/,"$1$activityid="+t+"$moduleid="+e))}delete window[c]},s.data("scrollHandler",r),s.offset().top<=$(window).scrollTop()+$(window).height()?r():(intellArr.push(s),$(window).scroll(function(){for(var a=0,t=intellArr.length;a<t;a++)intellArr[a].offset().top<=$(window).scrollTop()+$(window).height()&&(intellArr[a].data("scrollHandler")(),intellArr.splice(a,1),t--,a--)}),$(window).resize(function(){$(window).trigger("scroll")}))}()},getAreaState:function(a){var t=document.cookie.split(";"),e="";jQuery.each(t,function(a,t){var o=t.split("=");o[0].indexOf("ipLoc-djd")>=0&&(e=o[1].replace(/-/g,","))}),e.split(",").length<4&&(e+=",0");var o=jQuery(this),i=jQuery.extend({item:".item",skuid:"skuid",soldOutCls:"sold-out"},a);jQuery(i.item,o).each(function(a,t){var o=jQuery(t),r=o.data(i.skuid);e&&r&&jQuery.ajax({url:"//act-jshop.jd.com/ss/areaStockState/mget?app=jshop&ch=1&skuNum="+r+",1&area="+e,dataType:"jsonp",success:function(a){var t=parseInt(a[r].a),e=parseInt(a[r].b);(a[r]&&1===e&&34===t||1!=e)&&o.addClass(i.soldOutCls)}})})},getSkuCoupon:function(a){function t(a){if(a&&a.data&&a.data.length){a=a.data;for(var t=0;t<a.length;t++){var i=a[t].skuJDQInfo.sku,r=function(){if(void 0!==a[t].batchActiveVoLocals&&0!==a[t].batchActiveVoLocals.length){for(var e,o=-1,i=0;i<a[t].batchActiveVoLocals.length;i++)a[t].batchActiveVoLocals[i].discount>o&&(o=a[t].batchActiveVoLocals[i].discount,e=a[t].batchActiveVoLocals[i]);return e}}(),s=o.find(e.itemNode+"["+e.skuidAttr+"="+i+"]");s.find(e.discountNode).text(r.discount),s.attr("data-roleId",r.roleId).attr("data-key",r.encryptedKey),s.find(e.couponNode).show(),s.find(e.addCartNode).hide()}}}var e=$.extend({itemNode:".J_item",skuidNode:".J_item",skuidAttr:"skuid",discountNode:".J_couponNum",couponNode:".J_coupon",addCartNode:".J_addCart"},a||{}),o=$(this),i=[];o.find(e.itemNode).each(function(){var a=$(this),t=a.attr(e.skuidAttr);i.push(t)}),i=i.join(","),$.ajax({url:INTERFACE.actJshop.goodsCoupon,data:{method:"findJoinActives",resultCount:5,platform:2,skuInfos:i},dataType:"jsonp",success:t}),getJdEidtoWindow(),o.delegate(e.couponNode,"click",function(){var a=$(this).closest("[data-roleId]").attr("data-roleId"),t=$(this).closest("[data-key]").attr("data-key"),o=$(this);return $.ajax({url:INTERFACE.actJshop.couponSend,data:{ruleId:a,key:t,eid:JdEid.eid,fp:JdEid.fp,shshshfp:CookieUtil.getCookie("shshshfp"),shshshfpa:CookieUtil.getCookie("shshshfpa"),shshshfpb:CookieUtil.getCookie("shshshfpb"),jda:CookieUtil.getCookie("__jda")||-1,pageClickKey:o.closest("[clstag]").attr("clstag")||-1,platform:0,applicationId:appId},type:"GET",dataType:"jsonp",success:function(t){return 999==t.code?$(e.itemNode+"[data-roleId="+a+"]").find(".J_couponWarp").show().text("已领取"):-1==t.code?thick_login(function(){location.href=location.href}):alert(t.desc),!1}}),!1})}}}())}(jQuery);!function($){jshop.module.UserDefine={},$.extend(jshop.module.UserDefine,jshop.module),$.extend(jshop.module.UserDefine,{sideSlip:function sideSlip(args){function getTop(){return(document.documentElement.scrollTop||document.body.scrollTop||0)-(document.documentElement.clientTop||document.body.clientTop||0)}var imgs=$(this).find("img");if(imgs.each(function(t,a){$(a).attr("src",$(a).attr("original")),$(a).removeAttr("original"),$(a).removeClass("J_imgLazyload")}),void 0==args&&validateData($(this).attr("module-param")))var args=eval("("+$(this).attr("module-param")+")");var _this=this,param=$.extend({vertical:"top",verticalValue:170,horizontal:"left",horizontalValue:0,zindex:10},args),vertical=param.vertical,verticalValue=param.verticalValue,horizontal=param.horizontal,horizontalValue=param.horizontalValue,zindex=param.zindex,count=0;for(var i in param)count++;if(5==count&&"top"==vertical&&verticalValue>=170&&"right"==horizontal&&setInterval(function(){verticalValue+=(getTop()+param.verticalValue-verticalValue)/20,$(_this).css({position:"absolute",top:verticalValue,right:horizontalValue,zIndex:zindex})},20),5==count&&"top"==vertical&&verticalValue>=170&&"left"==horizontal&&setInterval(function(){verticalValue+=(getTop()+param.verticalValue-verticalValue)/20,$(_this).css({position:"absolute",top:verticalValue,left:horizontalValue,zIndex:zindex})},20),5==count&&"bottom"==vertical&&"right"==horizontal){var a=$(window).height()-$(_this).height()-param.verticalValue,b=a;setInterval(function(){a+=(getTop()+b-a)/20,$(_this).css({position:"absolute",top:a,right:horizontalValue,zIndex:zindex})},20)}if(5==count&&"bottom"==vertical&&"left"==horizontal){var a=$(window).height()-$(_this).height()-param.verticalValue,b=a;setInterval(function(){a+=(getTop()+b-a)/20,$(_this).css({position:"absolute",top:a,left:horizontalValue,zIndex:zindex})},20)}if(5==count&&"bottom"==vertical&&"middle"==horizontal){var a=$(window).height()-$(_this).height()-param.verticalValue,b=a;setInterval(function(){a+=(getTop()+b-a)/20,$(_this).css({position:"absolute",top:a,left:horizontalValue,"margin-left":-$(_this).width()/2,zIndex:zindex})},20)}},addFavorite:function addFavorite(args){if(void 0==args&&validateData($(this).attr("module-param")))var args=eval("("+$(this).attr("module-param")+")");var _this=this,param=$.extend({title:"京东商城",url:"//www.jd.com"},args),title=param.title,url=param.url;$(_this).css("cursor","pointer"),$(_this).click(function(t){document.all?window.external.AddFavorite(url,title):window.sidebar?window.sidebar.addPanel(title,url,""):alert("对不起，您的浏览器不支持此操作!\n请您使用菜单栏或Ctrl+D收藏本站。")})}})}(jQuery);!function(){function e(){oStorage=localStorage,_setItem=function(e,t){oStorage.setItem(e,t)},_getItem=function(e){return oStorage.getItem(e)},_removeItem=function(e){oStorage.removeItem(e)},_clear=function(){oStorage.clear()}}function t(){i(),_setItem=function(e,t){try{oStorage.setAttribute(e,t),oStorage.save("IELocalDataStore")}catch(e){}},_getItem=function(e){try{return oStorage.load("IELocalDataStore"),oStorage.getAttribute(e)}catch(e){}},_removeItem=function(e){try{oStorage.removeAttribute(e),oStorage.save("IELocalDataStore")}catch(e){}},_clear=function(){try{oStorage.expires=a(),oStorage.save("IELocalDataStore"),n()}catch(e){}}}function i(){var e=document;oStorage=e.createElement("link"),oStorage.addBehavior&&e.getElementsByTagName("head")[0].appendChild(oStorage)}function n(){if(oStorage)try{document.body.removeChild(oStorage)}catch(e){}i()}function a(){var e=new Date;return e.setMinutes(e.getMinutes()-1),e.toUTCString()}window.JShop||(window.JShop={});var r=$.browser;!function(){"undefined"!=typeof localStorage?e():r.msie&&t()}();var o={setItem:_setItem,getItem:_getItem,removeItem:_removeItem,clear:_clear};window.JShop.JLocalStorage=o}(),function($){function _JSlide(e,t){var i=this,n={slideInterval:5e3,slideDuration:500,slideEasing:"swing",autoSlide:!0,isMouseoverStop:!0,steps:1};if(!e)return!1;i.container=$(e),i.timer=null,i.config=$.extend(n,t),i._init()}var FORWARD="forward",BACKWARD="backward",localStorage=window.JShop.JLocalStorage;_JSlide.prototype={_init:function(){var e=this;e._parseMarkup(),e.positionIndex=0,e.direction=FORWARD,e._getActive(),e._setActive(),e._initSlide(),e._bind()},_parseMarkup:function(){var e=this,t=e.config,i=e.container,n=i.find(t.items);e.stepWidth=n.eq(0).outerWidth(!0),e.len=n.length,i.find(t.content).length&&(n.parent().css("position","relative"),n.each(function(e,t){t=$(t),t.attr("data-slide-idx",e)}))},_bind:function(){var e=this,t=e.config;e.container.find(t.content).length&&e._bindContent(),e._bindTrigger()},_bindContent:function(){var e=this,t=e.config,i=e.container;i.find(t.itemImgs);if(i.delegate(t.items,"click",function(t){var i=$(t.currentTarget);ls={},e.activeIndex=i.attr("data-slide-idx"),e.positionIndex=e.positionIndex,e.href=i.find("a").attr("href"),e.__setActive()}),!t.isMouseoverStop)return!0;i.delegate(t.items,"mouseenter mouseleave",function(t){"mouseenter"===t.type?e._clearTimer():e._initSlide()})},_bindTrigger:function(){var e=this,t=e.config,i=e.container;i.delegate(t.prevTrigger,"click",function(i){var n=$(i.currentTarget),a=e.positionIndex-t.steps;if(n.hasClass(t.prevTriggerDisableCls))return!1;e.direction=BACKWARD,a<0&&(a=0),e._slideTo(a)}),i.delegate(t.nextTrigger,"click",function(i){var n=$(i.currentTarget),a=t.steps,r=e.positionIndex+a,o=e.len;if(n.hasClass(t.nextTriggerDisableCls))return!1;e.direction=FORWARD,r+a>o&&(r=o-a),e._slideTo(r)}),i.delegate(t.prevTrigger,"mouseenter mouseleave",function(e){var i=e.type,n=$(e.currentTarget);"mouseenter"===i?(n.removeClass(t.prevTriggerOutCls),n.addClass(t.prevTriggerOverCLs)):(n.removeClass(t.prevTriggerOverCLs),n.addClass(t.prevTriggerOutCls))}),i.delegate(t.nextTrigger,"mouseenter mouseleave",function(e){var i=e.type,n=$(e.currentTarget);"mouseenter"===i?(n.removeClass(t.nextTriggerOutCls),n.addClass(t.nextTriggerOverCls)):(n.removeClass(t.nextTriggerOverCls),n.addClass(t.nextTriggerOutCls))})},_initSlide:function(){var e=this,t=e.config;e.container;if(!t.autoSlide)return!1;e.timer=setInterval(function(){var t=e.positionIndex,i=e.len-1;e.direction===BACKWARD?(t-=7)<0&&(t=0):(t+=7)+7>i&&(t=i-6),e._slideTo(t)},t.slideInterval)},_slideTo:function(e){var t,i=this,n=i.config,a=i.container,r=(a.find(n.content),i.positionIndex,a.find(n.items).parent());r.stop(!0,!0),t=r.css("left"),t="auto"===t?0:parseInt(t,10),distance=e*i.stepWidth+t,$(i).trigger("slideStart",[i.positionIndex,e]),i._dealTrigger(e),r.animate({left:"-="+distance+"px"},n.slideDuration,n.slideEasing,function(){$(i).trigger("slideEnd",[i.positionIndex,e])})},_dealTrigger:function(e){var t=this,i=t.config,n=t.container,a=n.find(i.prevTrigger),r=i.prevTriggerDisableCls,o=n.find(i.nextTrigger),s=i.nextTriggerDisableCls;t.positionIndex=e,a.removeClass(r),o.removeClass(s),0===e?(a.addClass(r),t.direction=FORWARD):e+i.steps===t.len&&(o.addClass(s),t.direction=BACKWARD)},_getActive:function(){var e,t=this,i=t.config,n=window.location.href,a=t.container.find(i.items),r=t.len,o=i.steps;try{e=$.parseJSON(localStorage.getItem(i.uid))||{}}catch(t){e={}}return n===e.href?(t.activeIndex=e.activeIndex,t.positionIndex=e.positionIndex):a.each(function(e,i){$(i).find("a").attr("href")===n&&(t.activeIndex=e,t.positionIndex=e,e+o>r-1&&(t.positionIndex=r-o))}),t.href=n,t.__setActive(),t},_setActive:function(){var e=this,t=e.config,i=e.container,n=t.activeCls,a=i.find(t.items),r=e.activeIndex;a.removeClass(n),r>=0&&a.eq(r).addClass(n),e._slideTo(e.positionIndex)},__setActive:function(){var e=this,t=[];t.push('{"activeIndex":'),t.push(e.activeIndex+","),t.push('"positionIndex":'),t.push(e.positionIndex+","),t.push('"href":'),t.push('"'+e.href+'"}'),localStorage.setItem(e.config.uid,t.join(""))},_clearTimer:function(){var e=this;e.timer&&(clearInterval(e.timer),e.timer=null)}},jshop.module.Banner={},$.extend(jshop.module.Banner,jshop.module),$.extend(jshop.module.Banner,{JSlide:function JSlide(args){if(void 0==args&&validateData($(this).attr("module-param")))var args=eval("("+$(this).attr("module-param")+")");var container=this,slide=new _JSlide(container,args)},errorMessage:function(e){e.show(),setTimeout(function(){e.animate({top:-e.outerHeight(!0)},200)},1e4)},baseSlide:function baseSlide(args){function allImgMove(){clearInterval(partTime),clearInterval(time),partTime=setInterval(oneImgMove,30),time=setInterval(imgMove,timer)}function oneImgMove(){var e=index*moveRange-imgArea[0][scroll],t=e>0?Math.ceil(e/10):Math.floor(e/10);imgArea[0][scroll]+=t,0==t&&(clearInterval(partTime),imgNode.eq(index).addClass(defaultClass),tabNode.eq(index).addClass(defaultClass),photoName.text(imgNode.eq(index).find("img").attr("title")),t=null)}function imgMove(){1==direction?index<imgNode.length-1?classOper([imgNode,tabNode],defaultClass,!0):(direction=0,classOper([imgNode,tabNode],defaultClass,!1)):index>0?classOper([imgNode,tabNode],defaultClass,!1):(direction=1,classOper([imgNode,tabNode],defaultClass,!0)),photoName.text(imgNode.eq(index).find("img").attr("title")),allImgMove()}function classOper(e,t,i){e.each(function(e,i){i.eq(index).removeClass(t)}),i?index++:index--,e.each(function(e,i){i.eq(index).addClass(t)})}if(void 0==args&&validateData($(this).attr("module-param")))var args=eval("("+$(this).attr("module-param")+")");if($(this)[0]){var _this=this,param=$.extend({imgArea:".jbannerImg",imgNode:".jbannerImg dl",tabArea:".jbannerTab",tabNode:".jbannerTab span",photoName:".jDesc",arrowLeft:".jPreOut",arrowRight:".jNextOut",arrowLeftOver:"jPreOver",arrowRightOver:"jNextOver",defaultClass:"show",message:".jMessageRemind",pageMode:".j-edit-page",slideDirection:"left",timer:"3"},args),imgArea=$(_this).find(param.imgArea),imgNode=$(_this).find(param.imgNode),tabArea=$(_this).find(param.tabArea),tabNode=$(_this).find(param.tabNode),photoName=$(_this).find(param.photoName),arrowLeft=$(_this).find(param.arrowLeft),arrowRight=$(_this).find(param.arrowRight),arrowLeftOver=param.arrowLeftOver,arrowRightOver=param.arrowRightOver,defaultClass=param.defaultClass,message=$(_this).find(param.message),pageMode=$(param.pageMode),slideDirection=param.slideDirection,timer=1e3*param.timer,scroll;scroll="top"==slideDirection?"scrollTop":"scrollLeft",imgArea.find("img").width()!=$(_this).width()&&pageMode[0]&&jshop.module.Banner.errorMessage.call(this,message),imgNode.eq(0).addClass(defaultClass),tabNode.eq(0).addClass(defaultClass),photoName.text(imgNode.eq(0).find("img").attr("title"));var imgHeight=imgNode.find("img").height();$(_this).css({height:imgHeight}),imgArea.css({width:$(_this).parent().width(),height:$(_this).parent().height()}),"top"==slideDirection?(imgArea.children().css({height:1e4,width:"auto"}),imgNode.css({width:$(_this).parent().width(),height:"auto","float":"none"})):(imgArea.children().css({width:1e4,height:"auto"}),imgNode.css({width:$(_this).parent().width(),height:"100%","float":"left"})),imgNode.find("img").css({height:imgHeight,width:"100%"});var index=0,moveRange,partTime,direction=1;moveRange="top"==slideDirection?imgNode.height():imgNode.width(),imgArea[0][scroll]=index*moveRange;var time=setInterval(imgMove,timer);tabNode.each(function(e,t){$(this).click(function(){imgNode.eq(index).removeClass(defaultClass),tabNode.eq(index).removeClass(defaultClass),index=e,imgNode.eq(index).addClass(defaultClass),tabNode.eq(index).addClass(defaultClass),photoName.text(imgNode.eq(index).find("img").attr("title")),allImgMove()})}),arrowLeft.bind({click:function(){0!=index&&(classOper([imgNode,tabNode],defaultClass,!1),allImgMove())},mouseover:function(){$(this).addClass(arrowLeftOver)},mouseout:function(){$(this).removeClass(arrowLeftOver)}}),arrowRight.bind({click:function(){index<imgNode.length-1&&(classOper([imgNode,tabNode],defaultClass,!0),allImgMove())},mouseover:function(){$(this).addClass(arrowRightOver)},mouseout:function(){$(this).removeClass(arrowRightOver)}})}},slide:function(e){function t(){f.css({width:m.find("img").width(),height:m.find("img").height()}),m.eq(0).addClass(w),p.eq(0).addClass(w),v.text(m.eq(0).find("img").attr("title")),g.isAreaClick&&$(h).click(function(){window.open(m.eq(T).attr("ref"))}),i(),$(window).resize(function(){i()})}function i(){var e=f.width()-$(h).width();e>0?f.css({"margin-left":-e/2}):f.css("margin","0 auto")}function n(){p.each(function(e,t){$(t)[x](function(){return m.eq(T).removeClass(w),p.eq(T).removeClass(w),T=e,m.eq(T).addClass(w),p.eq(T).addClass(w),v.text(m.eq(T).find("img").attr("title")),A(),!1})})}function a(){clearTimeout(_),_=null,C.clearQueue(),m.eq(T).clearQueue()}function r(){g.isCircular?T<m.length-1?c([m,p],w,!0):(T=-1,c([m,p],w,!0)):1==I?T<m.length-1?c([m,p],w,!0):(I=0,c([m,p],w,!1)):T>0?c([m,p],w,!1):(I=1,c([m,p],w,!0)),v.text(m.eq(T).find("img").attr("title")),A()}function o(){var e=$(h).find(g.arrowLeft),t=$(h).find(g.arrowRight);$(h).bind({mouseover:function(){e.show(),t.show()},mouseout:function(){e.hide(),t.hide()}})}function s(){var e=$(h).find(g.arrowLeft),t=$(h).find(g.arrowRight),i=g.arrowLeftOver,n=g.arrowRightOver;e.bind({click:function(){return 0!=T?(c([m,p],w,!1),A()):g.isCircular&&(c([m,p],w,!1),T=m.length,c([m,p],w,!1),A()),!1},mouseover:function(){$(this).addClass(i)},mouseout:function(){$(this).removeClass(i)}}),t.bind({click:function(){return T<m.length-1?(c([m,p],w,!0),A()):g.isCircular&&(T=-1,c([m,p],w,!0),A()),!1},mouseover:function(){$(this).addClass(n)},mouseout:function(){$(this).removeClass(n)}})}function d(){m.animate({opacity:0},0,function(){}),$(h).css({"background-color":m.eq(T).attr("background")}),m.eq(T).animate({opacity:1},1e3,function(){a(),q||(_=setTimeout(r,b))})}function l(){var e=T*N-f[0][u],t=e>0?Math.ceil(e/10):Math.floor(e/10);f[0][u]+=t,0==t?(m.eq(T).addClass(w),p.eq(T).addClass(w),v.text(m.eq(T).find("img").attr("title")),t=null,a(),q||(_=setTimeout(r,b))):S=setTimeout(l,30),$(h).css({"background-color":m.eq(T).attr("background")})}function c(e,t,i){e.each(function(e,i){i.eq(T).removeClass(t)}),i?T++:T--,e.each(function(e,i){i.eq(T).addClass(t)})}var u,h=this,g=$.extend({imgArea:".jbannerImg",imgNodeArea:".jImgNodeArea",imgNode:".jbannerImg dl",tabArea:".jbannerTab",tabNode:".jbannerTab span",photoName:".jDesc",arrowLeft:".jPreOut",arrowRight:".jNextOut",arrowLeftOver:"jPreOver",arrowRightOver:"jNextOver",defaultClass:"show",slideDirection:"left",timer:"3",subFunction:"transparentEffect",eventType:"click",showArrow:1,isCircular:!1,isTabAvailable:!0,isAreaClick:!0,isHoverStop:!0},e),f=$(h).find(g.imgArea),m=$(h).find(g.imgNode),p=($(h).find(g.tabArea),$(h).find(g.tabNode)),v=$(h).find(g.photoName),w=g.defaultClass,x=g.eventType,b=1e3*!g.timer?3e3:1e3*g.timer,C=$(h).find(g.imgNodeArea),T=(g.isFull,0),I=1,_=null,N=0,S=null,A=null,q=!1;if(m.length){g.isHoverStop&&f.bind({mouseenter:function(){q=!0,a()},mouseleave:function(){q=!1,_=setTimeout(r,b)}});var O={transparentEffect:function(){$(h).css({"background-color":m.eq(T).attr("background")}),t(),g.isTabAvailable&&n(),s(),1!=g.showArrow&&o(),A=d,_=setTimeout(r,b)},moveEffect:function(){var e="top"==g.slideDirection;u=e?"scrollTop":"scrollLeft",$(h).css({"background-color":m.eq(T).attr("background")}),e?(C.css({height:2e4,width:$(h).width()}),m.css({width:C.width(),height:"auto","float":"none"}),N=m.height(),f[0][u]=T*N):(C.css({width:2e4}),m.css({width:m.find("img").width(),height:"100%","float":"left"}),N=m.width(),f[0][u]=T*N),t(),g.isTabAvailable&&n(),s(),1!=g.showArrow&&o(),A=l,_=setTimeout(r,b)}};O[g.subFunction]&&O[g.subFunction].call(h)}},c_slide:function(e){function t(e){r=e,"left"==h&&$(a).find("ul").animate({marginLeft:-e*d+"px"},{duration:600,queue:!1}),o.removeClass("visited"),o.eq(e).addClass("visited")}function i(){1==g?r<u-1?(r+=1,t(r)):(r=0,t(0)):2==g&&(p?r+1==u?(p=!1,r-=1):r+=1:0==r?(p=!0,r+=1):r-=1,t(r));autoExt=setTimeout(function(){i()},m)}var n=$.extend({node:"li",slideNext:".btn_next",slidePrev:".btn_prev",slideType:2,height:360,width:700,timer:2,slideShow:1},e||{}),a=$(this),r=0,o=$(a).find(n.node),s=n.height,d=n.width,l=$(a).find(n.slideNext),c=$(a).find(n.slidePrev),u=o.length,h="left",g=n.slideType,f=n.slideShow,m=parseInt(1e3*parseFloat(n.timer||.5)),p=!0;o.length&&(1==f&&(c.hide(),l.hide()),a.css({height:s}),a.find(".banner_left").css({height:s,width:(a.width()-d)/2}),a.find(".banner_right").css({height:s,width:(a.width()-d)/2,left:parseInt(d)+parseInt((a.width()-d)/2)}),o.css({height:s,width:d}),o.find("img").css({height:s,width:d}),a.find(".u_bannerpic").css({height:s,width:a.width()}),a.find("ul").css({left:-(d-(a.width()-d)/2)}),l.css({top:(s-c.height())/2,right:(a.width()-d)/2+20}),c.css({top:(s-c.height())/2,left:(a.width()-d)/2+20}),o.eq(u-1).after(o.eq(0).clone()),o.eq(0).before(o.eq(u-1).clone()),function(){l.bind({click:function(){r<u-1?(r+=1,t(r)):p=!1}}),c.bind({click:function(){r>0?(r-=1,t(r)):p=!1}}),a.bind("mouseover",function(){c.show(),l.show(),clearTimeout(autoExt)}),a.bind("mouseout",function(){1==f&&(c.hide(),l.hide()),clearTimeout(autoExt),autoExt=setTimeout(function(){i()},m)})}(),autoExt=setTimeout(function(){i()},m))}})}(jQuery),function(e){e.fn.jdSlide=function(t){var i=e.extend({width:null,height:null,pics:[],index:0,type:"num",current:"curr",delay1:100,delay2:5e3},t||{});if(0!=i.pics.length){var n,a,r,o=this,s=0,d=!0,l=!0,c=i.pics.length,u=function(){var e=[];e.push("<div>");for(var t,a,s=0;s<c;s++){switch(t=s==i.index?i.current:"",i.type){case"num":a=s+1;break;case"string":a=i.pics[s].alt;break;case"image":a="<img src='"+i.pics[s].breviary+"' />"}e.push("<span class='"),e.push(t),e.push("'><a href='"),e.push(i.pics[s].href),e.push("' target='_blank'>"),e.push(a),e.push("</a></span>")}e.push("</div>"),o.append(e.join("")),o.find("span").bind("mouseover",function(){l=!1,clearTimeout(n),clearTimeout(r);var e=o.find("span").index(this);i.index!=e&&(r=setInterval(function(){d&&h(e)},i.delay1))}).bind("mouseleave",function(){l=!0,clearTimeout(n),clearTimeout(r),n=setTimeout(function(){h(i.index+1,!0)},i.delay2)})},h=function(e,t){e==c&&(e=0),a=setTimeout(function(){o.find("span").eq(i.index).removeClass(i.current),o.find("span").eq(e).addClass(i.current),g(e,t)},20)},g=function e(t,r){var u=parseInt(s),g=Math.abs(u+i.index*i.height),f=Math.abs(t-i.index)*i.height,m=Math.ceil((f-g)/4);g==f?(clearTimeout(a),r?++i.index==c&&(i.index=0):i.index=t,(d=!0)&&l&&(clearTimeout(n),n=setTimeout(function(){h(i.index+1,!0)},i.delay2))):(i.index<t?(s=u-m,o.find("ul").css({top:s+"px"})):(s=u+m,o.find("ul").css({top:s+"px"})),d=!1,a=setTimeout(function(){e(t,r)},20))},f=function(){for(var e=[],t=1;t<c;t++)e.push("<li><a href='"),e.push(i.pics[t].href),e.push("' target='_blank'><img src='"),e.push(i.pics[t].src),e.push("' width='"),e.push(i.width),e.push("' height='"),e.push(i.height),e.push("' /></a></li>");o.find("ul").append(e.join("")),n=setTimeout(function(){h(i.index+1,!0)},i.delay2),i.type&&u()};!function(){var t="<ul style='position:absolute;top:0;left:0;'><li><a href='"+i.pics[0].href+"' target='_blank'><img src='"+i.pics[0].src+"' width='"+i.width+"' height='"+i.height+"' /></a></li></ul>";o.css({position:"relative"}).html(t),e(function(){f()})}()}}}(jQuery);!function(t){jshop.module.tabmodule=jshop.module.tabmodule||{},t.extend(jshop.module.tabmodule,{base:function(a){var i=t(this),o=t.extend({type:"1",timeType:"1",touchDom:".js-swith-tab",swithDom:".js-swith-body",tabColor:"#373737",tabClickColor:"#ffd900",fontColor:"#ffffff",fontClickColor:"#373737",event:"mouseover"},a||{}),s=i.find(o.touchDom).length,e=i.closest("[instanceid]");e.css({"margin-bottom":0}),t('[fatherid="'+e.attr("instanceid")+'"]').each(function(){""===t.trim(t(this).find(".mc").attr("style"))&&t(this).find(".mc").css({background:o.tabClickColor})}),i.find(o.swithDom).addClass("hide"),"1"==o.type?(i.find(o.touchDom).css({background:o.tabColor,color:o.fontColor,width:parseFloat(100/s)+"%"}),i.find(o.touchDom).first().css({background:o.tabClickColor,color:o.fontClickColor}),i.find(o.swithDom+'[data-sort="'+i.find(o.touchDom).first().attr("data-sort")+'"]').removeClass("hide")):seajs.use("public/utils/JsonUtils",function(a){var e=(new Date).getTime(),n=e,d=e;i.find(o.touchDom).each(function(r){var c,l,h=t(this).find("[data-tab-time]").data("tab-time").replace(/-/g,"/"),f=t(this).attr("data-sort");c=r>0?i.find(o.touchDom).eq(r-1).find("[data-tab-time]").data("tab-time").replace(/-/g,"/"):a.dateFormat(new Date(h),"{Y}/{MM}/{DD}")+" 00:00:00",l=r<i.find(o.touchDom).length-1?i.find(o.touchDom).eq(r+1).find("[data-tab-time]").data("tab-time").replace(/-/g,"/"):a.dateFormat(new Date(h),"{Y}/{MM}/{DD}")+" 23:59:59",n="1"==o.timeType?Date.parse(c):Date.parse(h),d="1"==o.timeType?Date.parse(h):Date.parse(l),n>e?(0===r?(t(this).css({background:o.tabClickColor,color:o.fontClickColor,width:parseFloat(100/s)+"%"}),i.find(o.swithDom+'[data-sort="'+f+'"]').removeClass("hide")):t(this).css({background:o.tabColor,color:o.fontColor,width:parseFloat(100/s)+"%"}),t(this).find("[data-tab-time]").text("即将开始")):n<e&&e<d?(t(this).css({background:o.tabClickColor,color:o.fontClickColor,width:parseFloat(100/s)+"%"}),t(this).find("[data-tab-time]").text("进行中"),i.find('[name="instance-id"]').each(function(){t('[instanceid="'+t(this).val()+'"]').addClass("hide")}),i.find(o.swithDom+'[data-sort="'+f+'"]').removeClass("hide"),i.find(o.swithDom+'[data-sort="'+f+'"]').find('[module-function="countdown"]').each(function(){t(this).toggleClass("hide")}),i.find(o.swithDom+'[data-sort="'+f+'"]').find('[name="instance-id"]').each(function(){t('[instanceid="'+t(this).val()+'"]').removeClass("hide")})):(t(this).find("[data-tab-time]").text("已结束"),t(this).addClass("d-timeout"),i.find(o.swithDom+'[data-sort="'+f+'"]').find('[module-function="countdown"]').each(function(){t(this).toggleClass("hide")}))})}),i.find(o.touchDom).bind(o.event,function(){i.find(o.touchDom).each(function(){t(this).hasClass("d-timeout")?(t(this).attr("style",""),t(this).find("> *").attr("style","")):t(this).css({background:o.tabColor,color:o.fontColor})}),t(this).hasClass("d-timeout")&&(t(this).find("[data-tab-time]").css({background:"rgba(0,0,0,.6)"}),t(this).find(".d-tab-text").css({color:o.fontClickColor})),t(this).css({background:o.tabClickColor,color:o.fontClickColor}),i.find(o.swithDom).addClass("hide");var a=t(this).attr("data-sort");i.find('[name="instance-id"]').each(function(){t('[instanceid="'+t(this).val()+'"]').addClass("hide")}),i.find(o.swithDom+'[data-sort="'+a+'"]').removeClass("hide"),i.find(o.swithDom+'[data-sort="'+a+'"]').find('[name="instance-id"]').each(function(){t('[instanceid="'+t(this).val()+'"]').removeClass("hide"),t('[instanceid="'+t(this).val()+'"]').attr("module-refresh")||t('[instanceid="'+t(this).val()+'"]').attr("module-refresh",!0),moduleRefresh.call(t('[instanceid="'+t(this).val()+'"]').find(".j-module"))})})},newBase:function(a){var i,o=t(this),s=null,e=t.extend({type:"1",timeType:"1",touchDom:".js-swith-tab",swithDom:".js-swith-body",tabColor:"#373737",tabClickColor:"#ffd900",fontColor:"#ffffff",fontClickColor:"#373737",event:"mouseover"},a||{}),n=o.find(e.touchDom).length,d=o.closest("[instanceid]");if(d.css({"margin-bottom":0}),t('[fatherid="'+d.attr("instanceid")+'"]').each(function(){""===t.trim(t(this).find(".mc").attr("style"))&&t(this).find(".mc").css({background:e.tabClickColor})}),o.find(e.swithDom).addClass("hide"),"1"==e.type){var r=o.find(e.touchDom).first();r.attr("data-default-img",r.css("background-image")),o.find(e.touchDom).css({width:parseFloat(100/n)+"%"}),o.find(e.touchDom).first().css({"background-color":e.tabClickColor,"background-image":"url("+r.data("current-img")+")","background-position":"center center",color:e.fontClickColor}),o.find(e.swithDom+'[data-sort="'+o.find(e.touchDom).first().attr("data-sort")+'"]').removeClass("hide")}else{var c=(new Date).getTime(),l=c,h=c;o.find(e.touchDom).each(function(a){var i=t(this).find("[data-start-date]").data("start-date")||"",s=t(this).find("[data-end-date]").data("end-date")||"",d=t(this).attr("data-sort");l=Date.parse(i.replace(/-/g,"/")),h=Date.parse(s.replace(/-/g,"/")),t(this).attr("data-default-img",t(this).css("background-image")),l>c?(0===a?(t(this).css({"background-color":e.tabClickColor,"background-image":"url("+t(this).data("current-img")+")","background-position":"center center",color:e.fontClickColor,width:parseFloat(100/n)+"%"}),o.find(e.swithDom+'[data-sort="'+d+'"]').removeClass("hide")):t(this).css({width:parseFloat(100/n)+"%"}),t(this).find("[data-start-date]").text("即将开始")):l<c&&c<h?(t(this).css({"background-color":e.tabClickColor,"background-image":"url("+t(this).data("current-img")+")","background-position":"center center",color:e.fontClickColor,width:parseFloat(100/n)+"%"}),t(this).find("[data-start-date]").text("进行中"),o.find('[name="instance-id"]').each(function(){t('[instanceid="'+t(this).val()+'"]').addClass("hide")}),o.find(e.swithDom+'[data-sort="'+d+'"]').removeClass("hide"),o.find(e.swithDom+'[data-sort="'+d+'"]').find('[module-function="countdown"]').each(function(){t(this).toggleClass("hide")}),o.find(e.swithDom+'[data-sort="'+d+'"]').find('[name="instance-id"]').each(function(){t('[instanceid="'+t(this).val()+'"]').removeClass("hide")})):(t(this).find("[data-start-date]").text("已结束"),t(this).attr("style","").addClass("d-timeout"),o.find(e.swithDom+'[data-sort="'+d+'"]').find('[module-function="countdown"]').each(function(){t(this).toggleClass("hide")}))})}var f=function(){var a=t(this),i=a.data("current-img");o.find(e.touchDom).each(function(){var a=t(this).data("default-img");t(this).hasClass("d-timeout")?(t(this).attr("style",""),t(this).find("> *").attr("style","")):t(this).css({"background-color":e.tabColor,"background-image":a,"background-position":"center center",color:e.fontColor})}),a.hasClass("d-timeout")&&(a.find("[data-tab-time]").css({background:"rgba(0,0,0,.6)"}),a.find(".d-tab-text").css({color:e.fontClickColor})),a.data("default-img")||a.attr("data-default-img",a.css("background-image")),a.css({"background-color":e.tabClickColor,"background-image":"url("+i+")","background-position":"center center",color:e.fontClickColor}),o.find(e.swithDom).addClass("hide");var s=a.attr("data-sort");o.find('[name="instance-id"]').each(function(){t('[instanceid="'+t(this).val()+'"]').addClass("hide")}),o.find(e.swithDom+'[data-sort="'+s+'"]').removeClass("hide"),o.find(e.swithDom+'[data-sort="'+s+'"]').find('[name="instance-id"]').each(function(){t('[instanceid="'+t(this).val()+'"]').removeClass("hide"),t('[instanceid="'+t(this).val()+'"]').attr("module-refresh")||t('[instanceid="'+t(this).val()+'"]').attr("module-refresh",!0),moduleRefresh.call(t('[instanceid="'+t(this).val()+'"]').find(".j-module"))})};o.find(e.touchDom).bind(e.event,function(){var a=t(this),o=+new Date;clearTimeout(s),i||(i=o),o-i>=100?(f.call(a),i=o):s=setTimeout(function(){f.call(a)},50)})},render:function(a){var i,o=t(this),s=null,e=t.extend({type:"1",timeType:"1",touchDom:".js-swith-tab",swithDom:".js-swith-body",tabColor:"#373737",tabClickColor:"#ffd900",fontColor:"#ffffff",fontClickColor:"#373737",event:"mouseover"},a||{}),n=o.find(e.touchDom).length,d=o.closest("[instanceid]");if(d.css({"margin-bottom":0}),t('[fatherid="'+d.attr("instanceid")+'"]').each(function(){""===t.trim(t(this).find(".mc").attr("style"))&&t(this).find(".mc").css({background:e.tabClickColor})}),o.find(e.swithDom).addClass("hide"),"1"==e.type){var r=o.find(e.touchDom).first();r.attr("data-default-img",r.css("background-image")),o.find(e.touchDom).css({width:parseFloat(100/n)+"%"}),o.find(e.touchDom).first().css({"background-color":e.tabClickColor,"background-image":"url("+r.data("current-img")+")","background-position":"center center",color:e.fontClickColor}),o.find(e.swithDom+'[data-sort="'+o.find(e.touchDom).first().attr("data-sort")+'"]').removeClass("hide")}else{var c=(new Date).getTime(),l=c,h=c;o.find(e.touchDom).each(function(a){var i=t(this).find("[data-start-date]").data("start-date")||"",s=t(this).find("[data-end-date]").data("end-date")||"",d=t(this).attr("data-sort");l=Date.parse(i.replace(/-/g,"/")),h=Date.parse(s.replace(/-/g,"/")),t(this).attr("data-default-img",t(this).css("background-image")),l>c?(0===a?(t(this).css({"background-color":e.tabClickColor,"background-image":"url("+t(this).data("current-img")+")","background-position":"center center",color:e.fontClickColor,width:parseFloat(100/n)+"%"}),o.find(e.swithDom+'[data-sort="'+d+'"]').removeClass("hide")):t(this).css({width:parseFloat(100/n)+"%"}),t(this).find("[data-start-date]").text("即将开抢")):l<c&&c<h?(t(this).css({"background-color":e.tabClickColor,"background-image":"url("+t(this).data("current-img")+")","background-position":"center center",color:e.fontClickColor,width:parseFloat(100/n)+"%"}),t(this).find("[data-start-date]").text("正在抢"),o.find('[name="instance-id"]').each(function(){t('[instanceid="'+t(this).val()+'"]').addClass("hide")}),o.find(e.swithDom+'[data-sort="'+d+'"]').removeClass("hide"),o.find(e.swithDom+'[data-sort="'+d+'"]').find('[module-function="countdown"]').each(function(){t(this).toggleClass("hide")}),o.find(e.swithDom+'[data-sort="'+d+'"]').find('[name="instance-id"]').each(function(){t('[instanceid="'+t(this).val()+'"]').removeClass("hide")})):(t(this).find("[data-start-date]").text("已结束"),t(this).attr("style","").addClass("d-timeout"),o.find(e.swithDom+'[data-sort="'+d+'"]').find('[module-function="countdown"]').each(function(){t(this).toggleClass("hide").find(".d-label").html("提醒你本场已结束"),t(this).find(".d-hours").css({opacity:0}),t(this).find(".d-minutes").css({opacity:0}),t(this).find(".d-seconds").css({opacity:0}),t(this).find("em").css({opacity:0})}))})}var f=function(){var a=t(this),i=a.data("current-img");o.find(e.touchDom).each(function(){var a=t(this).data("default-img");t(this).hasClass("d-timeout")?(t(this).attr("style",""),t(this).find("> *").attr("style","")):t(this).css({"background-color":e.tabColor,"background-image":a,"background-position":"center center",color:e.fontColor})}),a.hasClass("d-timeout")&&(a.find("[data-tab-time]").css({background:"rgba(0,0,0,.6)"}),a.find(".d-tab-text").css({color:e.fontClickColor})),a.data("default-img")||a.attr("data-default-img",a.css("background-image")),a.css({"background-color":e.tabClickColor,"background-image":"url("+i+")","background-position":"center center",color:e.fontClickColor}),o.find(e.swithDom).addClass("hide");var s=a.attr("data-sort");o.find('[name="instance-id"]').each(function(){t('[instanceid="'+t(this).val()+'"]').addClass("hide")}),o.find(e.swithDom+'[data-sort="'+s+'"]').removeClass("hide"),o.find(e.swithDom+'[data-sort="'+s+'"]').find('[name="instance-id"]').each(function(){t('[instanceid="'+t(this).val()+'"]').removeClass("hide"),t('[instanceid="'+t(this).val()+'"]').attr("module-render")||(t('[instanceid="'+t(this).val()+'"]').attr("module-render",!0),moduleRefresh.call(t('[instanceid="'+t(this).val()+'"]').find(".j-module")))})};o.find(e.touchDom).bind(e.event,function(){var a=t(this),o=+new Date;clearTimeout(s),i||(i=o),o-i>=100?(f.call(a),i=o):s=setTimeout(function(){f.call(a)},50)})}})}(jQuery);!function(t){jshop.module.pictureHotspot={},t.extend(jshop.module.pictureHotspot,jshop.module),t.extend(jshop.module.pictureHotspot,{renderHotspot:function(){var o=t(this),e=o.find(".J_hotspots").html();if(""==e)return!1;var i=JSON.parse(e)||{},n={left:0,top:0};o.find(".J_htmlContent").html(i.content);var s=t(this).closest("[instanceid]").width();i.maxWidth!=s&&(n.left=(s-i.maxWidth)/2),o.find(".hot-link").each(function(){t(this).css({left:t(this).position().left+n.left})}),t(document).trigger("newDomLoad",o.closest("[instanceid]"))}})}(jQuery);function getModules(){var e=[];if($('script[moduleinit="module"]').length){var t=$('script[moduleinit="module"]').attr("src");return t.substring(t.indexOf("?")+4,t.indexOf("&")).split(",")}return e}!function(e,t){function o(){var t,o=this,n=jQuery(o).attr("module-function"),r=jQuery(o).parents("div[module-name]").attr("module-name");if(void 0!==n){try{t=JSON.parse(e(o).attr("module-param").replace(/'/g,'"').replace(/(\{|,)\s*\w+\s*:/g,function(e,t){return t+'"'+e.match(/\w+/)+'":'}))}catch(e){t={}}n.split(",").each(function(e,n){jshop.module[r]&&jshop.module[r][n]?jshop.module[r][n].call(o,t):jshop.module[n]&&jshop.module[n].call(o,t)})}}function n(){var t=this;e(t).find("[jshop-close]").click(function(){var o=e(this).attr("dialog");e(t).find("."+o).fadeOut().trigger("closed")})}function r(){var t=this,o={sinaminiblog:"//v.t.sina.com.cn/share/share.php?appkey=583395093&title=#cnt#&url=#href#&source=bshare&retcode=0&pic=",qqmb:"//v.t.qq.com/share/share.php?title=#cnt#&site=#href#&pic=&url=#href#&appkey=dcba10cb2d574a48a16f24c9b6af610c",renren:"//widget.renren.com/dialog/share?resourceUrl=#href#&title=&images=&description=#cnt#",qzone:"//sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=#href#&title=&pics=&summary=#cnt#",kaixin001:"//www.kaixin001.com/rest/records.php?url=#href#&content=#cnt#&pic=&aid=100013770&style=111",douban:"//www.douban.com/recommend/?url=#href#&title=#cnt#&v=1",neteasemb:"//t.163.com/article/user/checkLogin.do?source=#source#&info=#cnt# #href#&images=",meilishuo:"//www.meilishuo.com/meilishuo_share?picurl=&siteurl=#href#&content= #cnt#",mogujie:"//www.mogujie.com/mshare?url=#href#&content=#cnt#&from=mogujie&pic=",qqxiaoyou:"//sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?to=pengyou&url=#href#&pics=&title=&summary=#cnt#",facebook:"//www.facebook.com/share.php?src=jd&u=#href#",twitter:"//twitter.com/intent/tweet?text=#cnt# #href#",googleplus:"https://plus.google.com/share?url=#href#&hl=zh-CN",pinterest:"https://pinterest.com/login/?next=/pin/create/bookmarklet/?media=&url=#href#&alt=&title=#cnt#&is_video=false"},n=e(t).find("[vote-con]"),r=encodeURIComponent(n.attr("vote-cnt")?n.attr("vote-cnt").replace("#title#",e("title").html()):e("title").html()),i=encodeURIComponent(n.attr("vote-url")||document.location.href),c=encodeURIComponent(n.attr("vote-source")||"jd.com");e(t).find("[jshop-vote]").each(function(t,n){e(n).click(function(){var t=o[e(n).attr("jshop-vote")].replace(/#cnt#/g,r).replace(/#href#/g,i).replace(/#source#/g,c),l=e(window).height()>400?(e(window).height()-400)/2:50,a=e(window).width()>600?(e(window).width()-600)/2:50;window.open(t,"","height=400, width=600,left="+a+",top="+l)})})}function i(){var e=this;n.call(e),r.call(e)}function c(){var t=e(this),o=t.attr("front-function"),n=t.parents("div[module-name]").attr("module-name");if(void 0!==o){o.split(",").each(function(e,o){jshop.module[n]&&jshop.module[n][o]?jshop.module[n][o].call(t):jshop.module[o]&&jshop.module[o].call(t)})}}t.gJshop_aModules=[],e(function(){t.gJshop_aModules=getModules(),jQuery("div.j-module").each(function(e,t){i.call(t),o.call(t)})}),t.moduleRefresh=function(t){if("funcParam"==t)e(this).find(".j-module").each(function(e,t){o.call(t),c.call(t)});else{var n=jQuery("[module-refresh=true]");i.call(n),n.closest("[module-name]").find(".j-module").each(function(e,t){o.call(t),c.call(t)}),n.removeAttr("module-refresh"),n.removeAttr("onload")}},t.getModuleJS=function(t,o){if(!1===t.result)return void seajs.use("plugins/alert/cpm",function(e){e.alert(t.msg)});var n=t.moduleJs,r=gJshop_aModules.aUnique(n.split(",")),i=r.length,c=0;if(""===n||!i)return void o();r.each(function(t,n){e.getScript(RESOURCEPATH+n.substring(8,n.length),function(){c++,gJshop_aModules.push(n),c==i&&o()})})},e(function(){var t="",o=[];e("div[front-function]").each(function(n,r){t=e(r).attr("front-function"),e.inArray(t,o)<0&&o.push(t)}),t=null;for(var n=0;n<o.length;n++){var r=o[n],i=e('div[front-function="'+r+'"]'),c=i.eq(0).parents("div[module-name]").attr("module-name");""!==r&&jshop.module[c][r].call(i)}})}(jQuery,window);