function _defineProperty(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}define("public/business/pageBIinfo",[],function(require,exports,module){$.base64.utf8encode=!0;var e={},a=$("#pageBIVoInfoJson").val(),t=$("#pageInstance_id").val()||$("#instanceId").val();if($.trim(a)&&""!==$.trim(a)&&(e=JSON.parse($.trim(a))),!e.floorBiOpen&&!e.floorDirectOpen)return!1;var o=CookieUtil.getCookie("pin")||"",r=CookieUtil.getCookie("__jda").split(".")[1]||"",i=CookieUtil.getCookie("ipLoc-djd"),n=i?i.split(/[-_]/g).slice(0,2).join():"1,27",l=$(".layoutcontainer").find(".d-layout-area"),p="";o&&(o=decodeURIComponent(o),p=$.base64.btoa(o));var s=parseInt(e.floorSelectCount,10);s||(s=JSON.parse(e.layoutMapping).length);var d=e.floorBiOpen?63:65,u=JSON.parse(e.deliveryTypeIdsMap),f=u[d][0],c={deliveryIdTypeListMap:u,paramMap:_defineProperty({avatar:p,avatarId:$.base64.btoa(r),area:n,pi:t,ci:"1"},d,_defineProperty({},f,s))},v=$.ajax({url:INTERFACE.apim.client,data:{appid:"wjshop",functionId:"jshopHandleExecute",body:JSON.stringify(c),client:"android",clientVersion:"5.4.0",uuid:1,sign:1,st:1,sv:1},dataType:"jsonp",timeout:1e3*parseInt(e.timeout),success:function(a){if("0"===a.code)if(a.data&&a.data.itemsMap&&a.data.itemsMap[d]){var t=a.data.itemsMap,o=t[d],r=$(".layoutcontainer")[0],i=[],n=[],l=function(){for(var e=JSON.parse(JSON.parse($.trim($("#pageBIVoInfoJson").val())).layoutMapping),a={},t=0;t<e.length;t++){var o=e[t];a[o.id]=o.layoutIds.split(","),n.push(o.id)}return a}();for(var p in o)for(var s=o[p],u=0;u<s.length;u++)i.push(s[u].itemid);for(var f=[],u=0;u<n.length;u++)f.push($("#"+l[n[u]][0]).parent());f.sort(function(e,a){return e.index()-a.index()});for(var c=0;c<f.length;c++)f[c].before('<div id="BISortFloor'+c+'" class="J_place-floor"></div>');!function(){for(var e=[],a=0;a<n.length;a++){for(var t=n[a],o=!1,r=0;r<i.length;r++){if(t==i[r]){o=!0;break}}!1===o&&e.push(t)}for(var r=0;r<e.length;r++)for(var p=l[e[r]],s=0;s<p.length;s++)$("#"+p[s]).parent().hide()}();for(var v=0;v<i.length;v++){var y=$("#BISortFloor"+v)[0];!function(e,a){for(var t=l[e],o=0;o<t.length;o++){var i=$("#"+t[o]).parent()[0];r.insertBefore(i,a)}}(i[v],y)}$(".J_place-floor").remove()}else{for(var h=[],g=JSON.parse(e.layoutMapping),m=0;m<g.length;m++)for(var I=g[m].layoutIds.split(","),b=0;b<I.length;b++)h.push(I[b]);$(h).each(function(e,a){$(".d-layout[id="+a+"]").closest(".d-layout-area").remove()})}},complete:function(a,t){if("timeout"===t){v.abort();var o=$(".layoutcontainer"),r=[],i=JSON.parse(e.layoutMapping);$(i).each(function(e,a){r.push(a.layoutIds)});var n=r.join();$(n.split(",")).each(function(e,a){l.find(".d-layout[id="+a+"]").closest(".d-layout-area").addClass("config")}),o.find(".d-layout-area.config").each(function(e,a){if(!r[e])return!0;var t=r[e].split(",");$(t).each(function(e,t){var o=$(".d-layout[id="+t+"]");o.addClass("tempLayout"),$(a).append(o)})}),o.find(".d-layout-area.config").each(function(e,a){var t=$(a);if(!t.html().trim())return t.remove(),!0;t.find(".tempLayout").each(function(e,a){if(e>0){var o=$('<div class="d-layout-area tempArea"></div>');o.append(a),1===e?t.after(o):(t.nextAll(".tempArea").after(o),o.prev(".tempArea").removeClass("tempArea"))}}),t.removeClass("config").removeClass("tempArea")});var p=JSON.parse(e.layoutMapping).slice(s),d=[];$(p).each(function(e,a){var t=a.layoutIds.split(",");$(t).each(function(e,a){d.push(a)})}),$(d).each(function(e,a){$(".d-layout[id="+a+"]").closest(".d-layout-area").remove()})}}})});