/*!Name: common.js
 * Date: 2019-4-4 18:53:50 */
define("MOD_ROOT/common/common",function(require,exports,module){var o=require("MOD_ROOT/common/tools/event").Event,t=require("MOD_ROOT/common/tools/tools"),n=require("MOD_ROOT/common/core");function e(o){o.havestock=null,o.isHeYue=null,o.isKO=n.onAttr("isKO"),o.isBiGouMa=n.onAttr("isJMa"),o.isTuanGou=n.onAttr("isGroupgoods"),o.isLOC3=n.onAttr("isLOC-3"),o.isRLShop=686083===o.venderId}function i(){t.checkLogin(function(t){o.fire({type:"onLogin",login:t.IsAuthenticated})})}function c(){var o=window,t=$(".crumb-wrap"),e=$("#shop-head"),i=$("#nav-2014"),c=$("#discover-nav"),s=$("#nav-2015"),r=0,a="#none"===o.location.hash;if(!t.length||"#comment"===o.location.hash||a)return!1;t.length&&(r=t.offset().top),c.length&&(r=c.offset().top),i.length&&(r=i.offset().top),s.length&&(r=s.offset().top),e.length&&(r=e.offset().top);function f(){$(o).scrollTop(r)}if(o.name)$(o).bind("beforeunload",f);else try{o.name=n.name+"__scrollTop__flag",f()}catch(o){}}function s(o){if(!/jt=/.test(location.href))return!1;var t=n.serializeUrl(location.href).param.jt,e="";"10"===t&&(e="\u7531\u4e8e\u60a8\u9009\u62e9\u7684\u5730\u533a\u4eac\u4e1c\u81ea\u8425\u6682\u65f6\u65e0\u8d27\u6216\u4e0d\u652f\u6301\u914d\u9001\uff0c\u5df2\u4e3a\u60a8\u5207\u6362\u4e3a\u7b2c\u4e09\u65b9\u5546\u5bb6\u7684\u540c\u6b3e\u5546\u54c1\uff0c\u8bf7\u5173\u6ce8\u3002"),"11"!==t&&"00"!==t||(e="\u7531\u4e8e\u60a8\u5730\u5740\u7684\u53d8\u66f4\uff0c\u5df2\u4e3a\u60a8\u5207\u6362\u4e3a\u5728\u8be5\u5730\u533a\u552e\u5356\u7684\u540c\u6b3e\u5546\u54c1\uff0c\u8bf7\u5173\u6ce8\u3002"),"01"===t&&(e="\u7531\u4e8e\u60a8\u9009\u62e9\u7684\u5730\u533a\u7b2c\u4e09\u65b9\u5546\u5bb6\u6682\u65f6\u65e0\u8d27\u6216\u4e0d\u652f\u6301\u914d\u9001\uff0c\u5df2\u4e3a\u60a8\u5207\u6362\u4e3a\u4eac\u4e1c\u81ea\u8425\u540c\u6b3e\u5546\u54c1\uff0c\u8bf7\u5173\u6ce8\u3002 "),e&&$(".itemInfo-wrap").prepend('<div class="DJD-tips"><i class="sprite-info"></i> {0} <i onclick="$(\'.DJD-tips\').remove()" class="sprite-close">&times;</i></div>'.format(e))}function r(o){("yiyaojd.com"===document.domain||o.isOtc||o.isCfy)&&t.checkLogin(function(o){o.IsAuthenticated&&$.ajax({url:"//fts.jd.com/ajt/authorized/"+readCookie("pin"),dataType:"jsonp",success:function(o){1==o.code&&(window.location.href="//authorize.yiyaojd.com/nauth/auth?successReturnUrl="+encodeURIComponent(location.href))}})})}function a(){String.prototype.format||(String.prototype.format=function(){var o=arguments;return this.replace(/{(\d+)}/g,function(t,n){return void 0!==o[n]?o[n]:t})})}function f(o){a(),e(o),i(),c(),s(o),r(o)}module.exports.__id="common",module.exports.init=f});
/*!Name: address.js
 * Date: 2019-4-4 18:53:49 */
define("MOD_ROOT/address/address",function(require,exports,module){var e=require("MOD_ROOT/address/stock"),a=require("MOD_ROOT/common/tools/event").Event;function o(){this.init()}o.prototype={init:function(){var o=this;seajs.use(["//misc.360buyimg.com/jdf/1.0.0/ui/switchable/1.0.0/switchable","//misc.360buyimg.com/jdf/1.0.0/ui/area/1.0.0/area"],function(){$("#area1").area({scopeLevel:4,hasOversea:!0,hasCommonAreas:!0,showAllCommonArea:!0,commonAreaServiceUrl:"//cd.jd.com/usual/address?",onChange:function(e,a){var t=pageConfig.FN_getDomain(),d=a.addressName.replace(/ /g,"^");if(a&&a.commonAreaData){var r=a.commonAreaData.gcLng||"",i=a.commonAreaData.gcLat||"";if(r&&i){var n=r+","+i;createCookie("detailedAdd_coord",n,10,"/;domain="+t)}else createCookie("detailedAdd_coord","",-1,"/;domain="+t);if(createCookie("detailedAdd","",-1,"/;domain="+t),d){createCookie("detailedAdd",encodeURIComponent(d),10,"/;domain="+t);var c=a.commonAreaData,s=c.provinceId+"-"+c.cityId+"-"+c.countyId+"-"+c.townId;createCookie("detailedAdd_areaid",s,10,"/;domain="+t)}}o.readyState()}})}),o.readyState(),a.addListener("onNumChange",function(){var o={};pageConfig.product.locStoreId&&(o.storeId=pageConfig.product.locStoreId),new e(o,function(e){var o=this;a.fire({type:"onStockReady",area:{id:o.areas},stock:e})})})},readyState:function(){var a=this,o={};pageConfig.product.locStoreId&&(o.storeId=pageConfig.product.locStoreId),new e(o,function(e){a.triggerStockEvent(this,e)})},triggerStockEvent:function(e,o){a.fire({type:"onStockReady",area:{id:e.areas},stock:o}),a.fire({type:"onAreaChange",area:{id:e.areas},stock:o})}};function t(){new o}module.exports.__id="address",module.exports.init=t});
/*!Name: prom.js
 * Date: 2019-4-4 18:53:52 */
define("MOD_ROOT/prom/prom",function(require,exports,module){var e=require("MOD_ROOT/common/tools/tools").Countdown,t=require("MOD_ROOT/gift/gift"),i=require("MOD_ROOT/lazyinit/lazyinit"),n=require("MOD_ROOT/common/tools/tools"),s=require("MOD_ROOT/common/tools/event").Event,a=require("MOD_ROOT/common/core");require("JDF_UNIT/json/1.0.0/json"),require("JDF_UNIT/trimPath/1.0.0/trimPath"),require("MOD_ROOT/ETooltips/ETooltips");var o={init:function(e,t){return this.sku=e||pageConfig.product.skuid,this.shopId=pageConfig.product.shopId,this.venderId=pageConfig.product.venderId,this.ipLoc=n.getAreaId().areaIds.join("_"),this.$el=$("#summary-promotion"),this.$prom=$("#prom"),this.$promOne=$("#prom-one"),this.$gift=$("#prom-gift"),this.$fj=$("#choose-additional"),this.$fujian=$("#prom-fujian"),this.$darkBgEl=$("#J-summary-top"),this.$promPhone=$("#prom-phone"),this.$wrap=this.$el.find(".J-prom-wrap"),this.$moreProm=this.$wrap.find(".J-prom-more"),this.qrcodeLoaded=!1,this.promCount=0,this.maxPromCount=2,this.hasBvalue=pageConfig.product.proms&&pageConfig.product.proms.length>0,this.hasBvalue&&(this.promCount+=pageConfig.product.proms.length),void 0===t&&(this.get(),this.$prom.html(""),this.$promPhone.html("")),this},get:function(){var e=this,t="isCanUseDQ-1",i="isCanUseJQ-1";a.onAttr(/isCanUseDQ-\d/,function(e){t=e}),a.onAttr(/isCanUseJQ-\d/,function(e){i=e}),$.ajax({url:"//cd.jd.com/promotion/v2",data:{skuId:this.sku,area:this.ipLoc,shopId:this.shopId,venderId:this.venderId,cat:pageConfig.product.cat.join(","),isCanUseDQ:t,isCanUseJQ:i,platform:0,orgType:2,jdPrice:e.jdPrice?e.jdPrice:"",appid:1},dataType:"jsonp",scriptCharset:"gb18030",success:function(t){e.handleData(t)}})},renderCarGift:function(){if($("#choose-car").length){var e=n.getAreaId().areaIds,t=e[0],i=e[1],s=e[2],a=e[3],o=pageConfig.jumpCarType;$.ajax({url:"//c.3.cn/getCarSoaGift",data:{skus:pageConfig.product.skuid,provinceId:t,cityId:i,areaId:s,townId:a,carModelId:o},dataType:"jsonp",success:function(e){if(e&&!$.isEmptyObject(e)){for(var t in e)var i=e[t];$("#prom-car-gift").html("");var n=$("#summary-promotion");if(i.hashStore){var s='                            <div class="J-prom-gift" data-id="${sku}">                                <div class="prom-gifts clearfix">                                    <span class="prom-gift-label"><em class="car_red_bg">\u8d60\u54c1</em></span>                                    <div class="prom-gift-list">                                        <div class="prom-gift-item">                                            <a target="_blank" href="//item.jd.com/${sku}.html" title="${skuName}">                                                {if mainImage}                                                <img src="${pageConfig.FN_GetImageDomain(sku)}n1/s25x25_${mainImage}" width="25" height="25" class="gift-img" />                                                {else}                                                <img src="//img30.360buyimg.com/da/jfs/t1264/236/181850154/1105/14bba6c8/5509488cN2093c2a9.png" width="25" height="25" class="gift-img" />                                                {/if}                                            </a>                                            <em class="gift-number">\xd7 ${giftCount}</em>                                        </div>                                        <div class="J-gift-limit gift-limit">\uff08\u8f66\u578b\u8d60\u54c1\uff09</div>                                    </div>                                </div>                            </div>',a=s.process(i),o=a.match(/\[ERROR:.+\]/g);o&&o[0]&&(console.error("[prom gift]Template Rendering error.\n"),console.error(o[0])),$("#prom-car-gift").append(a).show(),pageConfig.jumpCarTxt&&($(".choose-op").addClass("car-type"),$(".car-type .car-text").text(pageConfig.jumpCarTxt),$(".choose-op").attr("title",pageConfig.jumpCarTxt),pageConfig.jumpCarTxt=""),$("#choose-baitiao,#btn-onkeybuy").hide(),pageConfig.hasCarGift=!0,n.show()}else pageConfig.hasCarGift=!1,pageConfig.hasPromotion||n.hide()}}})}},handleData:function(e){if(e){var t="";if(e&&200===e.promStatus){var i=e.prom;if(/debug=mpt/.test(location.href)&&(i={mpt:"1477756980"},this.initMBuy(e,199)),i.mpt&&this.handleMBuy(e),o.plusTags){var n=$.parseJSON(o.plusTags),r=n&&n.PLUS,c=r&&r.limit||!1,p=r&&r.overlying||!1;if(i.tags&&i.tags.length)for(var d=0;d<i.tags.length;d++){var m=i.tags[d];if("3"===m.code){c&&(m.content="\u975ePLUS\u7528\u6237"+m.content)}else if("9"===m.code)var u=!0}if(r){if(c){var l={position:2,content:r.limit_text,name:"PLUS\u9650\u8d2d"};i.tags.push(l)}if(!u&&!p){var l={position:4,content:r.confine_text,name:"PLUS\u9650\u5236"};i.tags.push(l)}}}if(i.tags&&i.tags.length?this.setPromotion(i.tags):this.emptyGift(),i.pickOneTag&&i.pickOneTag.length?t=this.setOnePromotion(i.pickOneTag):this.$promOne.html(""),1==i.carGift&&($(".car-gift-icon").show(),$(".car-gift-icon").ETooltips({close:!1,content:"\u9009\u62e9\u8f66\u578b\uff0c\u67e5\u770b\u5bf9\u5e94\u8d60\u54c1\u3002",width:167,pos:"right",zIndex:10,y:0,x:-6,autoHide:!0}),$(".choose-op").is(".car-type")||$(".choose-op a").text("\u9009\u8f66\u578b\u83b7\u53d6\u8d60\u54c1")),i.packing&&i.packing.length&&this.setPackages(i),i.accessories&&i.accessories.length){var f=[];f.push({code:"\u9644\u4ef6",name:"\u9644\u4ef6",gifts:i.accessories,content:""}),this.renderGift(f,this.$fujian),this.promCount++}i.giftPool&&this.setGiftPool(i),/debug=sjgo/.test(location.href)&&(i.sjgo={url:"//channel.jd.com/sjgo.html",targetId:"123456"}),i.sjgo?this.setSJG(i.sjgo):$("#jjg-sjgo").remove(),(a.isPop||i.bargaining)&&this.setYiJia(i.bargaining)}200===e.adsStatus&&this.setAdWords(e.ads),200===e.quanStatus&&this.setExtraPromotions(e.quan),e.skuCoupon&&this.setSkuCoupon(e),t&&this.setPickOneTip(t),this.setFoldLayer(),s.fire({type:"onPromReady",result:e,prom:e.prom})}},setSJG:function(e){var t=$(".itemInfo-wrap"),i=a(e),n='            <div id="jjg-sjgo" style="clear:both;padding-left:10px;display:none" clstag="shangpin|keycount|product|3chuodongbanner">                <a target="_blank" style="display:inline;" href="'+i+'">                    <img width="360" height="61" src="//img13.360buyimg.com/da/jfs/t2656/312/1769527897/13223/587f8601/574693acNa9a3ef54.png" />                </a>            </div>';function a(e){var t=pageConfig.giftSelectedSkuids?pageConfig.giftSelectedSkuids.join(","):"";return e.url+"?"+$.param({pid:pageConfig.product.skuid,pcount:$("#buy-num").val(),targetId:e.targetId,ptype:13,gids:t})}if(!$("#jjg-sjgo").length){t.append(n);var o=$("#jjg-sjgo");function r(){pageConfig.product.havestock?o.show():o.hide()}function c(){num=$("#buy-num").val();var e=o.find("a"),t=e.attr("href");e.attr("href",t.replace(/(nums|pcount|buyNum)=\d+/g,"$1="+num))}r(),s.addListener("onStockReady",r),s.addListener("onNumChange",c),s.addListener("onGiftSelected",function(){o.find("a").attr("href",a(e))})}},setGiftPool:function(e){t&&t.init(e)},setSkuCoupon:function(e){if(e&&e.skuCoupon&&e.skuCoupon.length){var t=$("#summary-quan");t.html('            <div class="dt">\u4f18 \u60e0 \u5238</div>            <div class="dd">                <dl>                    <dt class="fl"></dt>                    <dd class="lh">                        <a class="J-open-tb" href="#none">                            {var len = skuCoupon.length}                            {for item in skuCoupon}                                {if item_index < 3}                                <span class="quan-item"                                     title="${item.name} ${item.timeDesc}">                                    <s></s><b></b>                                    {if item.couponType === 0}                                    <span class="text">${item.discount}\u5143\u4eac\u5238</span>                                    {elseif item.discountFlag}                                        {if item.discountFlag === 1}                                            <span class="text">${item.allDesc}</span>                                        {elseif item.discountFlag === 2}                                            <span class="text">${item.simDesc}\u6298</span>                                        {else}                                            <span class="text">\u6ee1${item.quota}\u51cf${item.discount}</span>                                        {/if}                                    {else}                                        <span class="text">\u6ee1${item.quota}\u51cf${item.discount}</span>                                    {/if}                                </span>                                {/if}                            {/for}                            {if len>=3}<span class="more-btn">\u66f4\u591a>></span>{/if}                        </a>                    </dd>                </dl>            </div>'.process(e)).show(),t.find(".J-open-tb").unbind().bind("click",function(){return pageConfig.toolbar.$trigger.filter("[data-name=coupon]").trigger("click"),!1})}},setYiJia:function(e){var t=$(".J-yijia");function i(){var e=pageConfig.IMContact.$el.find("[data-seller]"),t=e.attr("data-domain");a.isPop?pageConfig.IMContact.open(t,{entry:"pop_web_itemkanjia",venderId:pageConfig.product.venderId||0}):window.open("//jimi.jd.com/index.action?source=webproductkanjia&c3="+pageConfig.product.cat[2]+"&productId="+pageConfig.product.skuid,"\u54a8\u8be2jimi")}if(!t.length)return t.hide(),!1;a.isPop||e?(t.show().find("a").eq(0).unbind("click").bind("click",i),function(e){var t="<ul>                <li>1\u3001\u780d\u4ef7\u662f\u9488\u5bf9\u6709\u201c\u53bb\u780d\u4ef7\u201d\u6807\u7b7e\u7684\u5546\u54c1\u8fdb\u884c\u7684\u4ea4\u6613\uff0c\u65e0\u201c\u53bb\u780d\u4ef7\u201d\u6807\u7b7e\u5546\u54c1\u4e0d\u53c2\u4e0e\u780d\u4ef7\uff1b</li>                <li>2\u3001\u53ef\u901a\u8fc7\u70b9\u51fb\u201c\u53bb\u780d\u4ef7\u201d\u6807\u8bc6\u54a8\u8be2\u5728\u7ebf\u5ba2\u670d\u6216\u8005JIMI\u673a\u5668\u4eba\u53c2\u4e0e\u780d\u4ef7\uff1b</li>                <li>3\u3001\u780d\u4ef7\u6210\u529f\u540e\uff0c\u8bf7\u60a8\u5728\u534a\u4e2a\u5c0f\u65f6\u5185\u8fdb\u884c\u4e0b\u5355\u5b8c\u6210\u7ed3\u7b97\uff0c\u5426\u5219\u780d\u4ef7\u5c06\u5931\u6548\u3002</li>                </ul>";a.isPop&&(t="<ul>                    <li>\u53ef\u901a\u8fc7\u70b9\u51fb\u201c\u53bb\u780d\u4ef7\u201d\u6807\u7b7e\uff0c\u4e0e\u5728\u7ebf\u5ba2\u670d\u8fdb\u884c\u6c9f\u901a\u53c2\u4e0e\u780d\u4ef7</li>                    </ul>"),e.find(".hy-btype-tips").ETooltips({close:!1,content:t,width:270,pos:"bottom",zIndex:10,x:-7})}(t)):t.hide()},showJiaDianQuan:function(){var e=$("#summary-jiadian-quan");e.length>0&&(e.show(),$("body").addClass("lingquan"))},setTuanCD:function(e){var t=$("#tuan-banner .time-remain"),i=t.find(".J-tuan-cd");e.tr&&(e=Number(e.tr))>0&&(t.show(),a.Countdown.init(e,function(e){i.html(e.d+"\u5929"+e.h+"\u65f6"+e.m+"\u5206"+e.s+"\u79d2")}))},setPromotion:function(e){for(var t=[],i=e.length,n=[],s=0;s<i;s++){var a=e[s];"20"===a.code&&this.setTuanCD(a),"10"===a.code||"80"===a.code?n.push(a):("3"===a.code?a.position=1:"9"===a.code&&(a.position=3),t.push(a))}n?this.renderGift(n,this.$gift):this.emptyGift();t.sort(function(e){return function(t,i){return t[e]-i[e]}}("position")),this.setProm({proms:t,len:i},this.$prom)},emptyGift:function(){this.$gift.html("").hide()},setOnePromotion:function(e){var t=[],i="";t=t.concat(e);for(var n=[],s=0;s<t.length;s++)"\u6d3b\u52a8\u9884\u544a"!=t[s].name&&n.push("\u201c"+t[s].name+"\u201d");return n.length>1&&(i=function(e){var t=[];var i={};for(var n=0;n<e.length;n++){if(!i[e[n]]){t.push(e[n]);i[e[n]]=1}}return t}(n).join(" ")+" \u4ec5\u53ef\u5728\u8d2d\u7269\u8f66\u4efb\u9009\u5176\u4e00"),this.setProm({proms:t,len:e.length},this.$promOne),i},setAdWords:function(e){if(e&&e.length&&e[0].ad){$("#p-ad").html(e[0].ad).show();var t=e[0].ad.replace(/<.*?>/g,"");$("#p-ad").attr("title",t)}},setPackages:function(e){var t=$("#product-fj");t.length||($("#product-detail-3").append('<div id="product-fj"></div>'),t=$("#product-fj")),t.html("            {for fj in packing}                <li>${fj.nm} \xd7 ${fj.num}</li>            {/for}".process(e))},setExtraPromotions:function(e){var t=this,i=$("#prom-quan"),n='&nbsp;<a href="{href}" target="_blank">\u8be6\u60c5 <s class="s-arrow">&gt;&gt;</s></a>';if(!e||!e.title)return void i.html("");n=e.actUrl?n.replace("{href}",e.actUrl):"",i.html('<div class="J-prom-quan prom-quan"><em class="hl_red_bg">\u6ee1\u989d\u8fd4\u5238</em><em class="hl_red">'+e.title+"</em>"+n+"</div>"),t.$el.show(),t.promCount++,t.setFoldLayer()},renderGift:function(e,t){var i=this;e instanceof Array&&e.sort(this.arrObjectCompare("code")),t.html(""),$.each(e,function(e,n){$(".prom-plus-gift-list").length&&(n.content="\uff08\u975ePLUS\u4f1a\u5458\u53ef\u9886\uff0c\u8d60\u5b8c\u5373\u6b62\uff09"),80==n.code&&(i.isPlus?n.content="\uff08PLUS\u4f1a\u5458\u53ef\u9886\uff0c\u8d60\u5b8c\u5373\u6b62\uff09":n.content="<a href='//plus.jd.com/index?flow_entrance=gift&flow_channel=pc' target='_blank' style='width:auto;color: #cfae68;'>\u5f00\u901aPLUS\u4f1a\u5458\uff0c\u7acb\u4eab\u4e13\u4eab\u8d60\u54c1>></a>"),n.css="",10==n.code&&("object"==typeof n.customtag&&n.customtag.hasOwnProperty("2")?(n.name=n.customtag[2],n.css="w"):n.name="\u8d60\u54c1");var s='            <div class="J-prom-gift">                <div class="prom-gifts clearfix">                    {if code == "80"}                    <span class="prom-plus-gift-label"><em class="yellow-bg">${name}</em></span>                    <div class="prom-plus-gift-list">                    {elseif code == "10" && css == "w"}                        <span class="prom-plus-gift-label"><em class="hl_red_bg">${name}</em></span>                        <div class="prom-plus-gift-list">                    {else}                    <span class="prom-gift-label"><em class="hl_red_bg">${name}</em></span>                    <div class="prom-gift-list">                    {/if}                        {for item in gifts}                        <div class="prom-gift-item" data-count="${pageConfig.isGiftProm = true}">                            <a target="_blank" href="//item.jd.com/${item.sid}.html" title="${item.nm}">                                {if item.mp}                                <img src="${pageConfig.FN_GetImageDomain(item.sid)}n1/s25x25_${item.mp}" width="25" height="25" class="gift-img" />                                {else}                                <img src="//img30.360buyimg.com/da/jfs/t1264/236/181850154/1105/14bba6c8/5509488cN2093c2a9.png" width="25" height="25" class="gift-img" />                                {/if}                            </a>                            <em class="gift-number">\xd7 ${item.num}</em>                        </div>                        {/for}                        <div class="J-gift-limit gift-limit">${content}</div>                    </div>                </div>            </div>'.process(n),a=s.match(/\[ERROR:.+\]/g);a&&a[0]&&(console.error("[prom gift]Template Rendering error.\n"),console.error(a[0])),t.append(s).show()})},arrObjectCompare:function(e){return function(t,i){var n=t[e],s=i[e];return n<s?1:n>s?-1:0}},setProm:function(e,t){var i='            <div class="J-prom">                {for prom in proms}                <div class="prom-item" data-code="${prom.code}">                    {if prom.name && (prom.position == 2 || prom.position == 4)}                        <em class="hl_red_bg yellow">${prom.name}</em>                    {elseif prom.name}                        <em class="hl_red_bg">${prom.name}</em>                    {/if}                    <em class="hl_red">{if prom.tips}<i class="sprite-tips"></i>{/if}${prom.content}</em>                    {if prom.adurl}                    <a href="${prom.adurl}" clstag="shangpin|keycount|product|${prom.name}" target="_blank">                        {if prom.linkName}${prom.linkName}{else}\u8be6\u60c5{/if} <s class="s-arrow">&gt;&gt;</s>                    </a>                    {/if}                    {if prom.link}${prom.link}{/if}                </div>                {/for}            </div>',n=i.process(e),s=n.match(/\[ERROR:.+\]/g);s&&s[0]&&(console.error("[prom item]Template Rendering error.\n"),console.error(s[0])),this.promCount+=e.len,t.html(n)},setPickOneTip:function(e){var t=$("#pickOneTip");t.length>0&&t.remove(),this.$el.find(".p-promotions").append('<ins id="pickOneTip"><em class="hl_red"><i class="sprite-tips"></i>'+e+"</em></ins>")},loadQrcode:function(e){require.async("PLG_ROOT/jQuery.qrcode",function(){var t=e||"//m.jd.com/product/"+a.sku+".html?from=qrcode";$("#summary-mbuy .qrcode").html("").jdQrcode({render:"image",ecLevel:"L",size:145,text:t})})},handleMBuy:function(e){var t=this;$.ajax({url:"//pm.3.cn/prices/pcpmgets",data:{skuids:this.sku,origin:2,source:1,area:this.ipLoc},dataType:"jsonp",success:function(i){var n="\u6682\u65e0\u62a5\u4ef7";i&&i.length&&i[0].p&&i[0].pcp&&(n=Number(i[0].pcp)>Number(i[0].p)?i[0].p:null,t.initMBuy(e,n))}})},initMBuy:function(e,t){var i=this,n=$("#prom-mbuy"),s=$("#summary-mbuy"),a=n.attr("data-url");if(!e.prom)return n.html(""),s.remove(),!1;this.promCount++;n.html('            <div class="mob-buy J-prom-mbuy">                <em class="hl_red_bg">\u624b\u673a\u4e13\u4eab\u4ef7</em>                <span class="hl_red J-m-price">&#12288;\uffe5</span>                <span class="qrcode-wrap">                    <span class="hl_blue">&#12288;&#12288;\u53bb\u624b\u673a\u8d2d\u4e70</span>                    <span class="icon"><s></s><b></b></span>                </span>            </div>'),s.length||($(".summary").eq(0).append('            <div id="summary-mbuy" class="hide">                <i></i>                <div class="qrcode">                    <div class="loading-style1"><b></b>\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019...</div>                </div>            </div>'),s=$("#summary-mbuy"));var o=$(".J-prom-mbuy .qrcode-wrap"),r=null,c=null,p=$(".J-m-price");if(!t)return n.html("");p.html("\uffe5"+t),o.add(s).unbind("mouseenter mouseover mouseleave mouseout"),o.hover(function(){clearTimeout(c),o.parent(".J-prom-mbuy").addClass("mob-buy-curr"),s.show();var e=$(".J-prom-mbuy").offset().top,t=$(".summary").offset().top,n=e-t+36;return s.css("top",n),i.qrcodeLoaded||i.loadQrcode(a),!1},function(){r=setTimeout(function(){o.parent(".J-prom-mbuy").removeClass("mob-buy-curr"),s.hide()},100)}),s.hover(function(){clearTimeout(r)},function(){c=setTimeout(function(){o.parent(".J-prom-mbuy").removeClass("mob-buy-curr"),s.hide()},100)}),this.setFoldLayer()},showPromotion:function(){var e=this.promCount>0||o.haveProAdv,t=this.promCount>this.maxPromCount;pageConfig.hasPromotion=e,e||pageConfig.hasCarGift?this.$el.show():this.$el.hide(),t?this.$darkBgEl.addClass("z-has-more-promotion"):this.$darkBgEl.removeClass("z-has-more-promotion")},setFoldLayer:function(){var e="z-promotions-all-show",t=this,i=$("#summary-promotion");t.promCount>2?(t.$moreProm.css("visibility","visible"),t.$wrap.bind("mouseenter",function(){i.addClass(e)}).bind("mouseleave",function(){i.removeClass(e)})):(t.$moreProm.css("visibility","hidden"),t.$wrap.unbind("mouseenter mouseleave")),t.showPromotion(),t.appendTagsToPromTags()},appendTagsToPromTags:function(){var e=this,t=$(".J-more-prom-ins");t.length?t.html(""):t=$('<div class="J-more-prom-ins more-prom-ins"></div>');var i=e.$wrap.find(".hl_red_bg"),n=i.length,s="";if(!(n<=2)){for(var a=1;a<n;a++)$(i[a]).hasClass("yellow")?s+='<em class="hl_red_bg yellow">'+$(i[a]).html()+"</em>":s+='<em class="hl_red_bg">'+$(i[a]).html()+"</em>";t.append(s);var o=i.eq(0).parents(".prom-item");0==o.length&&(o=i.eq(0).parents("ins")),o.after(t)}},clear:function(){$("#product-gifts,#prom,#product-prom-ext,#product-tips").remove(),$("#summary-promotion,#summary-promotion-extra,#summary-gifts,#summary-tips").hide()},setJdPrice:function(e){e&&e.jdPrice?this.jdPrice=e.jdPrice.p:this.jdPrice=""}},r=function(e,t){function i(){n.priceNum({skus:[t.skuid],text:"{NUM}",pdbp:1}),$.closeDialog()}require.async("MOD_ROOT/common/verify/verify",function(e){new e({onError:function(){i()},onComplete:function(e){601==e?i():602==e?this.showMessage("\u9a8c\u8bc1\u7801\u9519\u8bef!"):this.hideMessage()}})})},c=function(e){var t=function(){var t=readCookie("ipLoc-djd")||"1_0_0";t=t.replace(/-/g,"_"),$.ajax({url:"//wq.jd.com/pingou_api/BatGetPingouInfo",cache:!0,dataType:"jsonp",data:{skuids:pageConfig.product.skuid+"",platform:6,origin:1,area:t,source:"pc"},success:function(t){if("OK!"!=t.errmsg||t.pingou_info&&t.pingou_info[0]&&!t.pingou_info[0].isPriceValid)return v(e),void i();pageConfig.product.pinGouInfo=t.pingou_info[0],pageConfig.product.jp=pageConfig.product.pinGouInfo.bp=Number(pageConfig.product.pinGouInfo.bp)?Number(pageConfig.product.pinGouInfo.bp).toFixed(2):"\u6682\u65e0\u62a5\u4ef7",pageConfig.product.pinGouInfo.p=Number(pageConfig.product.pinGouInfo.p)?Number(pageConfig.product.pinGouInfo.p).toFixed(2):"\u6682\u65e0\u62a5\u4ef7",pageConfig.product.skuMarkJson.pg=!!t.pingou_info[0].isPriceValid;var n={p:t.pingou_info[0].p,bp:t.pingou_info[0].bp,m:"",id:pageConfig.product.skuid+""};s.fire({type:"onPriceReady",price:n}),pageConfig.eventTarget.fire({type:"onPinGouGoodsInfoReady"})},error:function(){v(e),i()}})};function i(i){var o=[];if(!pageConfig.product.isYuShou&&$("#banner-miaosha").length<=0&&e.skuMarkJson&&e.skuMarkJson.pg)return void t();i&&i.stock&&i.stock.stock&&i.stock.stock.jdPrice&&(i.stock.stock.jdPrice.id="J_"+e.skuid,o.push(i.stock.stock.jdPrice)),n.priceNum({$el:$(".J-summary-price"),skus:[e.skuid],text:"{NUM}",priceData:o,callback:function(t,i){var o="";if(i){e.specialAttrs&&-1!=e.specialAttrs.join(",").indexOf("fqy-1")&&$.ajax({url:"//cd.jd.com/getStaging",data:{skuId:e.skuid,buyNum:1,source:2,area:n.getAreaId().areaIds.join("_"),price:Number(i.p)},dataType:"jsonp",success:function(t){if(0===t.code){var i=t.data,n="",s="",a="";1===i.stagesKinds?(n=Number(i.preAmount)<=0?"\u6682\u65e0\u62a5\u4ef7":i.preAmount,s=Number(i.leastPlanAmount)<=0?"\u6682\u65e0\u62a5\u4ef7":i.leastPlanAmount+"/\u671f",a=i.longestPlanStages<=0?"":"(\u5171"+i.longestPlanStages.toString()+"\u671f)"):(n=Number(i.preAmount)<=0?"\u6682\u65e0\u62a5\u4ef7":i.preAmount+"\u8d77",s=Number(i.leastPlanAmount)<=0?"\u6682\u65e0\u62a5\u4ef7":i.leastPlanAmount+"/\u671f\u8d77",a=i.longestPlanStages<=0?"":"(\u6700\u591a\u53ef\u9009"+i.longestPlanStages.toString()+"\u671f)"),$(".J-stages-price").find(".J-p-"+e.skuid).text(n);$("#summary-fqy-info").html('                                                <span class="p-price">                                                    <span>\xa5</span>                                                    <span>{0}</span>                                                </span>                                                <span>{1}</span>                                                '.format(s,a));$("#choose-btns").find(".bt-info-tips").ETooltips({close:!1,content:'                                    <div id="J-bt-tips">                                        <div class="g-tips-inner">                                            <i></i><em></em>                                            <ul>                                                {if stagesKinds === 1}                                                <li>1.\u4ed8\u9996\u6b3e-2.\u6bcf\u671f\u4ed8\u6b3e-3.\u5230\u671f\u8fd8\u673a</li>                                                {else}                                                <li>1.\u9009\u671f\u6570-2.\u4ed8\u9996\u6b3e-3.\u6bcf\u671f\u4ed8\u6b3e-4.\u5230\u671f\u8fd8\u673a</li>                                                {/if}                                                <li>\u4ec0\u4e48\u662f\u5206\u671f\u7528\uff1f<br />                                                \u5728\u7ea6\u5b9a\u671f\u9650\u5185\uff0c\u7528\u6237\u53ea\u9700\u5206\u671f\u652f\u4ed8\u7ea6\u5b9a\u8d39\u7528\uff0c\u5230\u671f\u5f52\u8fd8\u5546\u54c1\u5373\u53ef\u3002\u4e3a\u5468\u671f\u6027\u6362\u65b0\u63d0\u4f9b\u4fbf\u5229\u3002</li>                                                <li style="text-align: right;"><a style="color: #5e69ad;" href="https://fenqiyong.jd.com/html/protocol.html" target="_blank">\u4e86\u89e3\u8be6\u60c5>></a></li>                                            </ul>                                        </div>                                    </div>'.process(i),width:300,pos:"right",zIndex:10,y:8,autoHide:!0})}}});var r=i.p,c=i.m,p=i.op,d=i.l,m=Number(r),u=Number(c);if(pageConfig.product.jp=m,pageConfig.product.mp=u,m>0)if(o="\uffe5"+r,$("#summary-price .p-discount").html(a.discount(m,u)),$("#page_dpprice").html("\uffe5"+parseFloat(u).toFixed(2)),d&&Number(d)>0){var l=pageConfig.koBeginTime>0,f=$("#page_origin_price").length>0,g=$("#page_dpprice").length>0,h=$("#page_opprice").length>0;if(Number(d)===m||(l||f||g||h)||pageConfig.product.isYuShou||pageConfig.product.isPinGou)h&&$("#page_opprice").html("\uffe5"+parseFloat(d).toFixed(2));else{var b='<span class="pricing">[<del id="page_hx_price">\uffe5'+d+"</del>]</span>";$("#page_hx_price").length>0?$("#page_hx_price").text("\uffe5"+d):$(".J-summary-price .p-price").after(b)}}else p&&$("#page_opprice").html("\uffe5"+parseFloat(p).toFixed(2))}o||(o="\u6682\u65e0\u62a5\u4ef7"),s.fire({type:"onPriceReady",price:i})},onReady:function(t){t&&t.error&&"pdos_captcha"==t.error&&r(t,e)}})}s.addListener("onStockReady",i)},p=function(e){if(e.isFeeType){/debug=txb/.test(location.href)&&(e.proms=['<ins id="prom-bvalue"><div class="J-prom-bvalue"><em class="hl_red_bg">\u901a\u4fe1B</em><em class="hl_red">\u4eac\u4e1c\u901a\u4fe1\u7528\u6237\u900197\u4e2a\u901a\u4fe1B</em><a href="//sale.jd.com/act/mA8nbHJMU2.html" target="_blank">&nbsp;&nbsp;\u8be6\u60c5 <s class="s-arrow">&gt;&gt;</s></a></div></ins>']);var t=e.proms,i=t&&t.length,n=$("#prom-quan");if(i)for(var s=0;s<t.length;s++)n.after(t[s])}},d=function(e){$(".comment-count a").attr("href","#none").bind("click",i.goToComment),n.commentMeta({skus:[e.skuid],$el:$(".summary-price-wrap"),text:"{NUM}",callback:function(t,i){e.commentMeta=i,s.fire({type:"onCommentMeta",commentMeta:i}),$('#detail .tab-main [data-anchor="#comment"] s').html("("+i.CommentCountStr+")").show(),$(".summary-price .count").unbind("click").bind("click",function(){return $("body,html").scrollTop($("#comment").offset().top-50),!1})}})},m=function(e){var t=$("#buy-rate"),i=t.find(".count");function n(e){e._MODIFIERS={toFixed:function(e,t){return t=t||2,e.toFixed(t)}},i.ETooltips({close:!1,content:'            {macro rankIcon(rk)}                <i class="sprite-{if rk>0}up{else}down{/if}"></i>            {/macro}            <div class="rate-layer">                <div class="layer-tit">                    <h3>\u8bc4\u5206\u8be6\u7ec6</h3>                    <span>\u4e0e\u540c\u7c7b\u5bf9\u6bd4</span>                </div>                <div class="layer-con">                    <div class="total">                        <span class="label">\u603b\u5206\uff1a</span>                        <span class="score"><a href="#">${xgzs|toFixed}</a></span>                        <span class="trend">${avg_xgzs|toFixed}% ${rankIcon(rank)} </span>                    </div>                    <ul class="score-list">                        {for item in detail}                        <li>                            <span class="label">${item.name}\uff1a</span>                            <span class="score">${item.value|toFixed}</span>                            <span class="trend">${item.avg|toFixed}% ${rankIcon(item.rank)} </span>                        </li>                        {/for}                    </ul>                    <dl class="tips">                        <dt>\u4ec0\u4e48\u662f\u9009\u8d2d\u6307\u6570</dt>                        <dd>\u4eac\u4e1c\u4e0e\u4e2d\u56fd\u5bb6\u7528\u7535\u5668\u534f\u4f1a\u7b49\u5171\u540c\u5bf9\u5546\u54c1\u53c2\u6570\u8fdb\u884c\u8bc4\u4f30\u8ba1\u7b97\u51fa\u9009\u8d2d\u6307\u6570\u3002\u6307\u6570\u6700\u9ad8\u4e3a10\u3002</dd>                    </dl>                </div>            </div>'.process(e),width:240,pos:"bottom",zIndex:10})}function s(e){i.html(e.xgzs)}t.length&&function(){$.ajax({url:"//c.3.cn/product/tag?skuIds="+e.skuid,dataType:"jsonp",success:function(e){if(e&&e.items&&e.items.length){var i=e.items[0];n(i),s(i),t.show()}else t.hide()}})}()};function u(){var e=$(".J-yijia a");pageConfig.product.havestock||a.itemDisabled?e.show():e.hide()}function l(e){var t=$(".J-plus-price");function i(i){if(!(!pageConfig.product.isYuShou&&$("#banner-miaosha").length<=0&&e.skuMarkJson&&e.skuMarkJson.pg)){var n=i.price;if("pp"!==n.up&&"tpp"!==n.up||!n.pp&&!n.tpp)t.hide();else{if(n.pp<=0||n.tpp<=0)var s="\u6682\u65e0\u62a5\u4ef7";else var s="\uffe5"+(n.pp||n.tpp);$(".J-p-p-"+e.skuid).text(s),t.show(),$("#banner-shangou").length>0&&($(".summary-price.J-summary-price .dt").html("\u4eac \u4e1c \u4ef7"),$(".summary-price.J-summary-price .pricing").remove())}}}s.addListener("onPriceReady",i);function n(){0===t.find("a.plus-icon-linkwrap").length&&t.find("img.plus-icon").wrap('<a class="plus-icon-linkwrap" clstag="shangpin|keycount|product|plusicon" href="//plus.jd.com/index" target="_blank"></a>')}s.addListener("onStockReady",function(e){e&&e.stock&&e.stock.stock&&e.stock.stock.isPlus||!1||n()})}function f(e){var t=$(".J-sam-price");function i(){t.find("i").length&&t.find("i").ETooltips({close:!1,content:"\u5c71\u59c6\u4f1a\u5458\u5e97\u662f\u6c83\u5c14\u739b\u65d7\u4e0b\u7684\u9ad8\u7aef\u4f1a\u5458\u5236\u5546\u5e97\uff0c\u5c06\u5c71\u59c6\u4f1a\u5458\u5361\u4e0e\u4eac\u4e1c\u8d26\u53f7\u7ed1\u5b9a\u540e\uff0c\u5373\u53ef\u5728\u5c71\u59c6\u4f1a\u5458\u5546\u5e97\u5b98\u65b9\u65d7\u8230\u5e97\u4eab\u53d7\u4f1a\u5458\u4ef7\u8d2d\u4e70\u5546\u54c1",width:230,pos:"bottom",zIndex:10})}function n(n){if(!(!pageConfig.product.isYuShou&&$("#banner-miaosha").length<=0&&e.skuMarkJson&&e.skuMarkJson.pg)){var s=n.price;if("sp"===s.up&&s.sp&&!isNaN(s.sp)){var a="\uffe5"+s.sp;s.sp<=0&&(a="\u6682\u65e0\u62a5\u4ef7"),$(".J-p-s-"+e.skuid).text(a),i(),t.show()}else t.hide()}}s.addListener("onPriceReady",n)}function g(e){var e=e||{};"nup"===e.up&&e.nup?($("#J_NewcomerPrice").length>0&&$("#J_NewcomerPrice").remove(),$(".J-summary-price .dd").append('<div class="newcomer-price" id="J_NewcomerPrice">                 <em>\uffe5{0}</em><i></i><span>\u4ec5\u4eac\u4e1c\u65b0\u7528\u6237\u53ef\u4eab\u65b0\u4eba\u4ef7</span>             </div>'.format(e.nup))):$("#J_NewcomerPrice").remove()}function h(e){var e=e||{};"sdp"===e.up&&e.sdp?($("#J_StudentPrice").length>0&&$("#J_StudentPrice").remove(),$(".J-summary-price .dd").append('<div class="student-price" id="J_StudentPrice">                 <em>\uffe5{0}</em><i></i><span>\u4ec5\u5b8c\u6210\u6ce8\u518c\u8ba4\u8bc1\u7684\u4eac\u4e1c\u6821\u56ed\u7528\u6237\u53ef\u4eab\u53d7</span>             </div>'.format(e.sdp))):$("#J_StudentPrice").remove()}function b(e){function t(){var t='<div class="qrcode-pingou"><p>\u624b\u673a\u626b\u7801\u5f00\u56e2</p><img src="//qrimg.jd.com/'+encodeURIComponent("https://wqs.jd.com/pingou/item.shtml?sku="+e.skuid+"&ptag=17009.11.1")+'-150-0-4-0.png" alt=""/></div>';$(".J-p-b-"+e.skuid).length&&$(".J-p-b-"+e.skuid).ETooltips({close:!1,content:t,width:180,pos:"bottom",zIndex:10})}function i(i){if(!(e.isYuShou||$("#banner-miaosha").length>0)&&e.skuMarkJson&&e.skuMarkJson.pg){if($(".addcart-mini").hide(),$(".J-p-"+e.skuid).text(e.pinGouInfo.bp),$(".J-p-b-"+e.skuid).length<=0){$("#InitCartUrl").data("label",$("#InitCartUrl").html());($("#InitCartUrl").length?$("#InitCartUrl"):$("#btn-reservation")).before('<a href="javascript:;" class="btn-special1 btn-lg btn-pingou J-p-b-'+e.skuid+'"><span></span><br/><strong>\u6211\u8981\u5f00\u56e2</strong></a>'),t()}$(".J-p-b-"+e.skuid+" span").text("\uffe5"+e.pinGouInfo.bp),$("#yuyue-process").hide(),$("#InitCartUrl").addClass("btn-pingou").html("<span></span><br/><strong>\u5355\u72ec\u8d2d\u4e70</strong>"),
$("#InitCartUrl span").text("\uffe5"+e.pinGouInfo.p),$("#page_origin_price, #page_opprice").parent().remove(),$(".J-o-"+e.skuid).length<=0&&$(".summary-price .p-price").after('<span class="line-thro J-o-'+e.skuid+'">['+e.pinGouInfo.p+"]</span>"),$(".J-o-"+e.skuid).text("[\uffe5"+e.pinGouInfo.p+"]"),$(".summary-price > .dt").html("<span>"+e.pinGouInfo.tuan_member_count+"</span>\u4eba  \u62fc")}}s.addListener("onPriceReady",i)}function v(e){pageConfig.product.skuMarkJson.pg=!1,$("#pingou-banner-new").remove(),$(".summary-price > .dt").html("\u4eac \u4e1c \u4ef7"),$(".J-o-"+e.skuid).remove(),$("#InitCartUrl").removeClass("btn-pingou").html($("#InitCartUrl").data("label")||"\u52a0\u5165\u8d2d\u7269\u8f66"),$(".line-thro").remove(),$(".J-p-b-"+e.skuid).remove(),$(".addcart-mini").show(),$("#yuyue-process").show()}function y(e){var t=!1,i=$(".J-fans-price"),n=$(".J-fans-price .text");function a(s){var a=s.price;if("sfp"===a.up&&a.sfp&&!isNaN(a.sfp)){var o="\uffe5"+a.sfp;a.sfp<=0?o="\u6682\u65e0\u62a5\u4ef7":t&&e.isFans?n.text("\u60a8\u5df2\u5173\u6ce8\u5e97\u94fa\uff0c\u53ef\u4eab\u7c89\u4e1d\u4ef7"):n.text("\u5173\u6ce8\u5e97\u94fa\uff0c\u5373\u4eab\u7c89\u4e1d\u4ef7"),$(".J-p-f-"+e.skuid).text(o),i.show(),e.hasFansPrice=!0}else i.hide()}s.addListener("onPriceReady",a),s.addListener("onLogin",function(e){t=e.login})}function k(e){var t=$(".J-user-price"),i=!1,n=null;function a(){t.find("i").length&&t.find("i").ETooltips({close:!1,content:"\u8fd1\u671f\u6d4f\u89c8\u3001\u5173\u6ce8\u8fc7\u8be5\u5546\u54c1\u6216\u5173\u8054\u5546\u54c1\u7684\u7528\u6237\uff0c\u6709\u53ef\u80fd\u4f1a\u88ab\u7cfb\u7edf\u547d\u4e2d\uff0c\u88ab\u5224\u65ad\u4e3a\u8be5\u5546\u54c1\u4f18\u60e0\u4ef7\u7684\u4e13\u5c5e\u7528\u6237\u3002\u4ec5\u5728\u5546\u54c1\u5c55\u793a\u201c\u4e13\u5c5e\u4ef7\u201d\u6807\u7b7e\u671f\u95f4\uff0c\u7528\u6237\u80fd\u4ee5\u4f4e\u4e8e\u4eac\u4e1c\u4ef7\u7684\u4e13\u5c5e\u4ef7\u683c\u8d2d\u4e70\u8be5\u5546\u54c1\u3002",width:230,pos:"bottom",zIndex:10})}function o(i){if(!pageConfig.product.isYuShou&&$("#banner-miaosha").length<=0&&pageConfig.product.skuMarkJson&&pageConfig.product.skuMarkJson.pg)return!1;var n="\uffe5"+i.tkp;i.tkp<=0&&(n="\u6682\u65e0\u62a5\u4ef7"),$(".J-p-s-"+e.skuid).text(n),a(),t.show()}function r(){t.hide()}s.addListener("onPriceReady",function(e){var t=e.price;n="tkp"===t.up&&t.tkp&&!isNaN(t.tkp)?t:null,i&&n?o(n):r()}),s.addListener("onLogin",function(e){i=e.login,e.login&&n?o(n):r()})}function x(e){e.koEndOffset&&e.koEndTime&&(e.koEndOffset=e.koEndTime-+new Date($.ajax({async:!1,cache:!1}).getResponseHeader("date"))),$("#banner-miaosha").length>0&&6!==e.secKillType&&e.koEndOffset?s.addListener("onStockReady",function(i){var n=i&&i.stock&&i.stock.stock&&i.stock.stock.jdPrice,s=n&&n.p||0,a=n&&n.op||0;Number(s)<Number(a)?t($("#banner-miaosha"),e.koBeginTime,e.koEndOffset):($(".J-summary-price .dt").text("\u4eac \u4e1c \u4ef7"),$(".J-summary-price .pricing").text(""))}):t($("#banner-miaosha"),e.koBeginTime,e.koEndOffset),e.fsEndOffset&&e.fsEndTime&&(e.fsEndOffset=e.fsEndTime-+new Date($.ajax({async:!1,cache:!1}).getResponseHeader("date"))),(!e.skuMarkJson||!e.skuMarkJson.pg)&&e.fsEndOffset&&$("#banner-shangou").length>0?s.addListener("onStockReady",function(i){var n=i&&i.stock&&i.stock.stock&&i.stock.stock.jdPrice,s=n&&n.p||0,a=n&&n.op||0,o=n&&n.l||0,r=Number(o)>0?Number(o):Number(a);Number(s)<r?t($("#banner-shangou"),e.fsBeginTime,e.fsEndOffset):($(".J-summary-price .dt").text("\u4eac \u4e1c \u4ef7"),$(".J-summary-price .pricing").text(""))}):t($("#banner-shangou"),e.fsBeginTime,e.fsEndOffset);function t(e,t,i){if(e.length){var s=e.find(".activity-message"),a=t>0,o=i>0,r=a?"seckill":"seckilling";if(e.addClass(r).find("i").addClass("sprite-"+r),a){var c="\u9884\u8ba1{0}\u6708{1}\u65e5{2}:{3}\u5f00\u59cb",p=new Date(t),d=new Date;e.show(),d.getFullYear()==p.getFullYear()&&d.getMonth()==p.getMonth()&&d.getDate()==p.getDate()&&(c="\u9884\u8ba1{2}:{3}\u5f00\u59cb"),s.html(c.format(p.getMonth()+1,p.getDate(),n.prefix(2,p.getHours()),n.prefix(2,p.getMinutes())))}else if(o){e.show();var m=s.data("countdown");m||(m=new n.Countdown(i,function(e){var t=["\u8ddd\u79bb\u7ed3\u675f"];e.d>0&&t.push("<span>"+e.d+"</span>\u5929"),t.push("<span>"+n.prefix(2,e.h)+"</span>"),t.push(":<span>"+n.prefix(2,e.m)+"</span>"),t.push(":<span>"+n.prefix(2,e.s)+"</span>"),s.html(t.join(""))}),s.data("countdown",m))}else e.hide(),e.remove()}}}function j(t){function i(i){var n=i.price;if(n&&n.np&&!$("body").hasClass("yyp")&&!$("#banner-miaosha").length&&!(t.skuMarkJson&&t.skuMarkJson.pg||$("#banner-shangou").length)){$("#prepare-price-banner").length&&$("#prepare-price-banner").remove();var s='                <div id="prepare-price-banner" class="activity-banner" data-name="${name}" style="background:url(${img}) 0 0 no-repeat">                     <div class="activity-type">                         <i class="sprite-yy"></i><strong></strong>                     </div>                    {if text}                         <span class="item J-item-1" style="color: #fff; font-size: 14px; {if imgHasText}margin-left: 190px;{/if}">                             ${text} {if price}\uffe5${price}{/if}                         </span>                     {/if}                     <div class="activity-message">                         <span class="item J-item-2 hide" style="display: inline;">                             {if text2}                                 ${text2}                             {else}                                 <i class="sprite-time"></i>                                 <span class="J-text">${cdText}</span>                                 <em class="J-time"></em>                             {/if}                         </span>                     </div>                 </div>',a={100000:"//m.360buyimg.com/cc/jfs/t1/14966/40/14210/2356/5ca5bce8E9eedc008/4ec4b5d3d5bae078.jpg",100001:"//m.360buyimg.com/cc/jfs/t1/4527/32/11268/15520/5bcec10dEbfb8ca48/426e6302a70f2a4d.jpg",100002:"//m.360buyimg.com/cc/jfs/t1/4527/32/11268/15520/5bcec10dEbfb8ca48/426e6302a70f2a4d.jpg",100003:"//m.360buyimg.com/cc/jfs/t1/6793/23/11001/10686/5c2301cfE9037ef9c/1175042c91b9d492.jpg",100004:"//m.360buyimg.com/cc/jfs/t1/4120/34/11881/10947/5bd132a0E38ce6cc7/4ced0404a480fb3e.jpg",100005:"//m.360buyimg.com/cc/jfs/t1/1132/2/11796/11113/5bd132aeEeeedaec3/3549f236f7ac0924.jpg",100010:"//img20.360buyimg.com/devfe/jfs/t7387/200/3888371512/13803/12409ced/59f8858eN73bf5eaf.jpg"},o=["//m.360buyimg.com/cc/jfs/t1/4527/32/11268/15520/5bcec10dEbfb8ca48/426e6302a70f2a4d.jpg","//m.360buyimg.com/cc/jfs/t1/14966/40/14210/2356/5ca5bce8E9eedc008/4ec4b5d3d5bae078.jpg"],r=$("#summary,.summary").eq(0),c=n.np,i={name:"\u53cc\u5341\u4e00\u9884\u544a\u4ef7"};if(c.id in a?i.img=a[c.id]:i.img="//m.360buyimg.com/cc/jfs/t1/4527/32/11268/15520/5bcec10dEbfb8ca48/426e6302a70f2a4d.jpg",-1==$.inArray(i.img,o)?i.imgHasText=!0:i.imgHasText=!1,0==c.type)i.text=c.c,i.text2="";else if(1==c.type)1==c.t?(i.text="\u524d"+c.m+"\u4ef6\u4f18\u60e0\u4ef7\uff1a",i.text2=""):2==c.t&&(i.text="",i.text2="\u4ec5\u524d"+c.m+"\u4ef6\u53ef\u4eab\u4f18\u60e0\u4ef7");else if(2==c.type){var p=c.e-c.s;p>0?(p/=36e5,p=p.toFixed(0)==p.toFixed(1)?p.toFixed(0):p.toFixed(1)):p=0,1==c.t?i.text="\u524d"+p+"\u5c0f\u65f6\u4f18\u60e0\u4ef7\uff1a":2==c.t&&(i.text=""),i.text2=""}if(c.p?i.price=c.p:i.price="",!i.text2){var p=0,d=+new Date;1==c.t?(p=c.s-d,i.cdText="\u8ddd\u5f00\u59cb"):2==c.t&&(p=c.e-d,i.cdText="\u8ddd\u7ed3\u675f")}r.before(s.process(i));var m=$("#prepare-price-banner .J-time");p&&m.length&&new e(parseInt(p),function(e){e.d<1?m.html(e.h+"\u5c0f\u65f6"+e.m+"\u5206"+e.s+"\u79d2"):m.html(e.d+"\u5929"+e.h+"\u5c0f\u65f6"+e.m+"\u5206"+e.s+"\u79d2")})}}s.addListener("onPriceReady",i)}!function(){var e=!1,t=function(){if(!pageConfig.product.isYuShou&&$("#banner-miaosha").length<=0&&pageConfig.product.skuMarkJson.pg&&!e){var t=pageConfig&&pageConfig.product&&pageConfig.product.skuid||"-";expLogJSON("PC_PINGOU1","PC_PINGOU2",'{"v1":"PC_PINGOUGoodsExposure", "skuid":"'+t+'"}'),e=!0}};pageConfig.eventTarget.addListener("onPinGouGoodsInfoReady",t)}();function C(e,t){var i={}.toString;return i.call(e)===i.call(t)}var I={getTagId:function(e){var t=location.search.match(/__tagid__=([^&]*)/i),i=t?t[1]:0;return i||e},hasSpecialBanner:function(e){return $("#banner-miaosha").length>0||$("#banner-shangou").length>0||e.isYuYue||e.isYuShou||e.skuMarkJson&&e.skuMarkJson.pg},isWithinDate:function(e,t){var i=/(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2}):(\d{2})/,n=function(e,t,i,n,s,a){return+new Date(e,t-1,i,n,s,a)};if(i.test(e)&&i.test(t)){e=n.apply(null,i.exec(e).slice(1,7)),t=n.apply(null,i.exec(t).slice(1,7));var s=+new Date;return!(s<e||s>t)}return!1},isCategoryValid:function(e,t){if(C({},e)&&C([],t)){for(var i=e,n=0,s=t.length;n<s;n++){var a=String(t[n]);if(!(a in i))return!1;if(!C({},i[a]))return!0;i=i[a]}return!1}return!1},hasAtmosphereBanner:function(e){return $(e).length>0},addAtmosphereBanner:function(e,t){if(e=e||"",t=t||"#J_atmosphere_banner",I.removeAtmosphereBanner(t),!I.hasAtmosphereBanner(t)){var i=$("#summary,.summary").eq(0);if("#"===t[0])var n='<div id="{0}" class="activity-banner" style="background:url({1}) 0 0 no-repeat"></div>';else if("."===t[0])var n='<div class="activity-banner {0}" style="background:url({1}) 0 0 no-repeat"></div>';i.before(n.format(t.slice(1),e))}},removeAtmosphereBanner:function(e){return!!I.hasAtmosphereBanner(e)&&($(e).remove(),!0)},addEntryLink:function(e,t){$("body").append('<a id="J_atmosphere_side" href="'+t+'" target="_blank" style="position:fixed;right:0;top:0;z-index:10000"><img src="'+e+'"></a>')},requestLabelSystem:function(e,t){e&&$.ajax({url:"//rms.shop.jd.com/json/vender/msmyDynValue.action?venderId="+e,dataType:"jsonp",success:function(e){C(function(){},t)&&t(e)},error:function(e){console&&console.error("//rms.shop.jd.com/json/vender/msmyDynValue.action\n",e)}})}};function _(e){if(I.isWithinDate("2018-05-25 00:00:01","2018-06-20 23:59:59")){var t=e.cat,i=t[0];if(I.isCategoryValid({9855:9855,9847:9847},t)&&I.isWithinDate("2018-06-14 00:00:00","2018-06-20 23:59:59")){var n="//newbuz.360buyimg.com/pcItem/default/618_3f1.png";9855==i?I.addEntryLink(n,"//sale.jd.com/act/2E3IfuONpS.html"):9847==i&&I.addEntryLink(n,"//sale.jd.com/act/nURXZ50dwNt8YqHu.html")}else if(I.isCategoryValid({1672:{2599:2599,14226:14226,14227:14227},1620:1620,6196:6196,6728:6728,9192:9192,15248:15248,15126:15126},t)&&I.isWithinDate("2018-06-13 00:00:00","2018-06-20 23:59:59")){var n="//newbuz.360buyimg.com/pcItem/default/618_3p7.png";I.addEntryLink(n,"//sale.jd.com/act/J0rOFYh2kxju8.html")}I.hasSpecialBanner(e)||s.addListener("onPriceReady",function(i){i&&i.price&&i.price.np?I.removeAtmosphereBanner("#J_atmosphere_banner"):e.isPop?I.requestLabelSystem(e.venderId,function(i){var n=parseInt(i.value,10);n===I.getTagId(424283)&&I.isWithinDate("2018-06-14 00:00:00","2018-06-20 23:59:59")&&I.isCategoryValid({9855:9855,9847:9847},t)?I.addAtmosphereBanner("//newbuz.360buyimg.com/pcItem/default/618_3f1_banner.jpg"):n===I.getTagId(424282)&&I.isWithinDate("2018-06-13 00:00:00","2018-06-20 23:59:59")&&I.isCategoryValid({1672:{2599:2599,14226:14226,14227:14227},1620:1620,6196:6196,6728:6728,9192:9192,15248:15248,15126:15126},t)?I.addAtmosphereBanner("//newbuz.360buyimg.com/pcItem/default/618_3p7_banner.jpg"):parseInt(e.pTag,10)===I.getTagId(424280)&&I.addAtmosphereBanner("//newbuz.360buyimg.com/pcItem/default/618_banner.png")}):parseInt(e.pTag,10)===I.getTagId(424280)&&I.addAtmosphereBanner("//newbuz.360buyimg.com/pcItem/default/618_banner.png")})}}function w(e){if(I.isWithinDate("2018-10-20 00:00:01","2018-10-21 11:59:59")&&parseInt(e.pTag,10)==I.getTagId(424356))var t="//img14.360buyimg.com/cms/jfs/t24997/239/2262487277/13512/b4f24c6d/5bc6daa6Na20f8b17.png";else{if(!I.isWithinDate("2018-10-22 00:00:01","2018-11-15 23:59:59")||parseInt(e.pTag,10)!=I.getTagId(424355))return;var t="//img14.360buyimg.com/cms/jfs/t26122/251/1027469246/4833/c653dfb/5bbf0c2eN407a6cee.png"}I.hasSpecialBanner(e)||s.addListener("onPriceReady",function(e){e&&e.price&&e.price.np?I.removeAtmosphereBanner("#J_atmosphere_banner"):I.addAtmosphereBanner(t)})}function P(e){if(I.isWithinDate("2018-12-08 00:00:01","2018-12-13 11:59:59")&&parseInt(e.pTag,10)==I.getTagId(424363)){I.hasSpecialBanner(e)||s.addListener("onPriceReady",function(e){e&&e.price&&e.price.np?I.removeAtmosphereBanner("#J_atmosphere_banner"):I.addAtmosphereBanner("//m.360buyimg.com/cc/jfs/t1/22917/35/209/4335/5c07dabbE3c7b4025/f0cd75fa269e40c9.png")})}}function J(e){if(I.isWithinDate("2018-12-06 00:00:01","2018-12-12 23:23:59")){if(I.isCategoryValid({9192:9192,1620:1620,6196:6196,15248:15248,15126:15126,6728:6728,1672:{2599:2599,14226:14226,14227:14227},9855:9855,9847:9847},e.cat)){I.addEntryLink("//img10.360buyimg.com/devfe/jfs/t1/27265/38/384/14540/5c094c7eE4e681321/3f5561b828974d06.png","//sale.jd.com/act/4Jjt6ShRC5.html")}I.hasSpecialBanner(e)||parseInt(e.pTag,10)!=I.getTagId(424365)||s.addListener("onPriceReady",function(e){e&&e.price&&e.price.np?I.removeAtmosphereBanner("#J_atmosphere_banner"):I.addAtmosphereBanner("//img14.360buyimg.com/devfe/jfs/t1/27539/5/408/19993/5c094c50E7ffeacec/be24dbd93e33dbfd.jpg")})}}function T(e){if(I.isWithinDate("2019-01-09 00:00:01","2019-01-14 23:23:59")&&I.isCategoryValid({9192:9192,1620:1620,6196:6196,15248:15248,15126:15126,6728:6728,1672:{2599:2599,14226:14226,14227:14227},9855:9855,9847:9847},e.cat)){I.addEntryLink("//img11.360buyimg.com/devfe/jfs/t1/21209/28/4555/13122/5c330a6fEadf03460/e15b2044acfd59e3.png","//sale.jd.com/act/4KG6LNxlk1Ed.html")}I.isWithinDate("2019-01-09 00:00:01","2019-02-11 23:23:59")&&(I.hasSpecialBanner(e)||parseInt(e.pTag,10)!=I.getTagId(424390)||s.addListener("onPriceReady",function(e){e&&e.price&&e.price.np?I.removeAtmosphereBanner("#J_atmosphere_banner"):I.addAtmosphereBanner("//img14.360buyimg.com/cms/jfs/t1/26313/35/3840/10971/5c2c54d7E29dedbbd/882e4fec8e84737b.png")}))}function O(e){I.isWithinDate("2019-01-18 00:00:01","2019-01-18 23:23:59")&&(I.hasSpecialBanner(e)||parseInt(e.pTag,10)!=I.getTagId(424391)||s.addListener("onPriceReady",function(e){e&&e.price&&e.price.np?I.removeAtmosphereBanner("#J_atmosphere_banner"):I.addAtmosphereBanner("//img14.360buyimg.com/cms/jfs/t1/26186/25/4988/3447/5c36f45bE65674601/13f25a5294557701.png")}))}function S(t){if(I.isWithinDate("2019-01-29 00:00:01","2019-02-11 23:23:59")&&parseInt(t.pTag,10)==I.getTagId(424393)&&!I.hasSpecialBanner(t)){j=function(){};var i=function(i){var n=i.price;if(n&&n.np&&!$("body").hasClass("yyp")&&!$("#banner-miaosha").length&&!(t.skuMarkJson&&t.skuMarkJson.pg||$("#banner-shangou").length)){$("#prepare-price-banner").length&&$("#prepare-price-banner").remove();var s='                    <div id="prepare-price-banner" class="activity-banner" data-name="${name}" style="background:url(${img}) 0 0 no-repeat">                         <div class="activity-type">                             <i class="sprite-yy"></i><strong></strong>                         </div>                        {if text}                             <span class="item J-item-1" style="color: #fff; font-size: 14px; {if imgHasText}margin-left: 190px;{/if}">                                 ${text} {if price}\uffe5${price}{/if}                             </span>                         {/if}                         <div class="activity-message">                             <span class="item J-item-2 hide" style="display: inline;">                                 {if text2}                                     ${text2}                                 {else}                                     <i class="sprite-time"></i>                                     <span class="J-text">${cdText}</span>                                     <em class="J-time"></em>                                 {/if}                             </span>                         </div>                     </div>',a={100000:"//m.360buyimg.com/cc/jfs/t1/10286/28/4663/6991/5c0e487eEe29e8d24/847c0ffa2a605077.jpg",100001:"//m.360buyimg.com/cc/jfs/t1/4527/32/11268/15520/5bcec10dEbfb8ca48/426e6302a70f2a4d.jpg",100002:"//m.360buyimg.com/cc/jfs/t1/4527/32/11268/15520/5bcec10dEbfb8ca48/426e6302a70f2a4d.jpg",100003:"//m.360buyimg.com/cc/jfs/t1/6793/23/11001/10686/5c2301cfE9037ef9c/1175042c91b9d492.jpg",100004:"//m.360buyimg.com/cc/jfs/t1/4120/34/11881/10947/5bd132a0E38ce6cc7/4ced0404a480fb3e.jpg",100005:"//m.360buyimg.com/cc/jfs/t1/1132/2/11796/11113/5bd132aeEeeedaec3/3549f236f7ac0924.jpg",100010:"//img20.360buyimg.com/devfe/jfs/t7387/200/3888371512/13803/12409ced/59f8858eN73bf5eaf.jpg"},o=["//m.360buyimg.com/cc/jfs/t1/4527/32/11268/15520/5bcec10dEbfb8ca48/426e6302a70f2a4d.jpg","//m.360buyimg.com/cc/jfs/t1/10286/28/4663/6991/5c0e487eEe29e8d24/847c0ffa2a605077.jpg"],r=$("#summary,.summary").eq(0),c=n.np,i={name:"\u53cc\u5341\u4e00\u9884\u544a\u4ef7"};if(c.id in a?i.img=a[c.id]:i.img="//m.360buyimg.com/cc/jfs/t1/4527/32/11268/15520/5bcec10dEbfb8ca48/426e6302a70f2a4d.jpg",-1==$.inArray(i.img,o)?i.imgHasText=!0:i.imgHasText=!1,1==c.type)2==c.t?(i.text="",i.text2="\u4ec5\u524d"+c.m+"\u4ef6\u53ef\u4eab\u4f18\u60e0\u4ef7"):(i.text="\u524d"+c.m+"\u4ef6\u4f18\u60e0\u4ef7\uff1a",i.text2="");else if(2==c.type){var p=c.e-c.s;p>0?(p/=36e5,p=p.toFixed(0)==p.toFixed(1)?p.toFixed(0):p.toFixed(1)):p=0,2==c.t?i.text="":i.text="\u524d"+p+"\u5c0f\u65f6\u4f18\u60e0\u4ef7\uff1a",i.text2=""}else i.text=1==c.t?c.c:"",i.text2="";if(c.p?i.price=c.p:i.price="",!i.text2){var p=0,d=+new Date;1==c.t?(p=c.s-d,i.cdText="\u8ddd\u5f00\u59cb"):2==c.t&&(p=c.e-d,i.cdText="\u8ddd\u7ed3\u675f")}r.before(s.process(i));var m=$("#prepare-price-banner .J-time");p&&m.length&&new e(parseInt(p),function(e){e.d<1?m.html(e.h+"\u5c0f\u65f6"+e.m+"\u5206"+e.s+"\u79d2"):m.html(e.d+"\u5929"+e.h+"\u5c0f\u65f6"+e.m+"\u5206"+e.s+"\u79d2")})}},a=function(e){$.ajax({url:"//c.3.cn/festival",data:{ch:1,skuId:t.skuid,area:n.getAreaId().areaIds.join("_"),buyNum:$("#buy-num").val()},dataType:"jsonp"}).done(function(t){t.isfhsx?I.addAtmosphereBanner("//img13.360buyimg.com/devfe/jfs/t1/16746/15/5607/41776/5c404654E1a003f3b/598c7b6f8165f19d.png"):(I.removeAtmosphereBanner("#J_atmosphere_banner"),e&&e.price.np&&i(e))}).fail(function(t){I.removeAtmosphereBanner("#J_atmosphere_banner"),e&&e.price.np&&i(e)})};s.addListener("onPriceReady",a)}}function E(e){!I.hasSpecialBanner(e)&&I.isWithinDate("2019-02-25 00:00:01","2019-03-13 23:59:59")&&parseInt(e.pTag,10)==I.getTagId(424396)&&s.addListener("onPriceReady",function(e){(e&&e.price?e.price:{}).np?I.removeAtmosphereBanner("#J_atmosphere_banner"):I.addAtmosphereBanner("//m.360buyimg.com/cc/jfs/t1/17479/11/8210/37744/5c74eb58E9c9b6bb5/e679caf71afe256e.jpg")})}function A(e){if(e.skuMarkJson&&e.skuMarkJson.pg&&!($("#pingou-banner-new").length>0)){$("#summary,.summary").eq(0).before('        <div id="pingou-banner-new" class="activity-banner" data-name="${name}" style="background:url(${img}) 0 0 no-repeat">            <div class="activity-type">                <i class="sprite-yy sprite-pingou"></i><strong>${name}</strong>            </div>            {if timer>0}            <div class="activity-message">                <span class="item J-item-2 hide" style="display: inline;">                    <i class="sprite-time"></i>                    <span class="J-text">${cdText}</span>                    <em class="J-time"></em>            </span>            </div>            {/if}        </div>'.process({name:"\u4eac\u4e1c\u62fc\u8d2d",img:"//img14.360buyimg.com/devfe/jfs/t17683/261/2561539025/7600/c5027c28/5afc357eN96b2ff34.png",cdText:"\u8ddd\u7ed3\u675f",timer:0}));$("#pingou-banner-new .J-time")}}function D(e){var t=$("span[node-tips=stepPrice]");t[0]&&(D.bindEvent(t),D.getModel(e).done(function(e){var i=t.find("div[node-tips-content=stepPrice]");e&&e.length>0&&(i.html(D.temp2html(e)),t.removeClass("hide"))}).fail(function(e){console.warn(e&&e.message||"\u9636\u68af\u4ef7\u63a5\u53e3\u95ee\u9898\uff01")}))}D.getModel=function(e){return $.ajax({url:"//c.3.cn/stepPrice?skuId="+(e.skuid||"")+"&venderId="+(e.venderId||""),dataType:"jsonp"})},D.temp2html=function(e){for(var t="",i=0,n=e.length;i<n;i++){var s=e[i];t+="<p><i>"+s.perMinNum+"~"+s.perMaxNum+"\u4ef6</i>\xa5"+s.promoPrice+"</p>"}return t},D.bindEvent=function(e){e.bind("mouseover",function(){e.addClass("zIndex")}).bind("mouseleave",function(){e.removeClass("zIndex")})};var M={init:function(e,t){this.getProductActivityInfo(e,t)},getProductActivityInfo:function(e,t){var i=this,n=e.skuid.toString(),s=e.cat[e.cat.length-1].toString(),a=e.venderId.toString(),o=e.shopId.toString(),r=0,c=0;e&&e.specialAttrs&&(/isCanUseDQ-0/.test(e.specialAttrs)?r=0:/isCanUseDQ-1/.test(e.specialAttrs)&&(r=1),/isOverseaPurchase-0/.test(e.specialAttrs)?c=1:(/isOverseaPurchase-1/.test(e.specialAttrs)||/isOverseaPurchase-2/.test(e.specialAttrs)||/isOverseaPurchase-3/.test(e.specialAttrs)||/isOverseaPurchase-4/.test(e.specialAttrs))&&(c=2)),$.ajax({url:"//c.3.cn/wbs/mgets",dataType:"jsonp",data:{search:n+"_"+r+"_"+c+","+s+","+a+","+o,source:"pcitem"},success:function(n){i.businessForHaveActivityInfo(n,e,t)},error:function(e){console.log("//ad.3.cn/wbs/mgets have some error"),console.log(e)}})},businessForHaveActivityInfo:function(e,t,i){var n=this,s=e[0].result||{};n.checkActivityInfoAPIData(s)?n.businessForControlBeltImg(i,!0,s,t):n.businessForControlBeltImg(i,!1,s,t)},businessForControlBeltImg:function(e,t,i,n){var s=this,a=e.price.np||{},o=s.formatDate(a.s),r=s.formatDate(a.e),c=s.formatDate(i.start),p=s.formatDate(i.end),d=s.formatDate(i.forecast);s.printfMsg("\u9884\u544a\u4ef7\u751f\u6548\u65f6\u95f4\uff1a"+o+"-"+r+"\n"),s.printfMsg("\u8170\u5e26\u56fe\u751f\u6548\u65f6\u95f4\uff1a"+c+"-"+p+"\n"),s.printfMsg("\u8170\u5e26\u56fe\u9884\u544a\u65f6\u95f4\uff1a"+d+"-"+c+"\n"),s.checkRealtimePricesAPIData(a)?t?(s.setBeltImg(i),s.printfMsg("\u53ea\u8981\u4e2d\u53f0\u63a5\u53e3\u6709\u6570\u636e\uff0c\u90a3\u4e48\u8170\u5e26\u80af\u5b9a\u662f\u8981\u5c55\u793a\u7684"),o===c&&r===p?(s.setPriceImg(!0),s.printfMsg("\u4e2d\u53f0\u63a5\u53e3\u6709\u6570\u636e\uff0c \u5b9e\u65f6\u4ef7\u683c\u63a5\u53e3\u6709\u6570\u636e\uff0c\u5e76\u4e14\u8170\u5e26\u751f\u6548\u65f6\u95f4\u548c\u5b9e\u65f6\u4ef7\u683c\u751f\u6548\u65f6\u95f4\u4fdd\u6301\u4e00\u81f4\uff0c \u90a3\u4e48\u9884\u544a\u4ef7\u80af\u5b9a\u662f\u8981\u5c55\u793a\u7684")):(s.setPriceImg(!1),s.printfMsg("\u4e2d\u53f0\u63a5\u53e3\u6709\u6570\u636e\uff0c \u5b9e\u65f6\u4ef7\u683c\u63a5\u53e3\u6709\u6570\u636e\uff0c\u5e76\u4e14\u8170\u5e26\u751f\u6548\u65f6\u95f4\u548c\u5b9e\u65f6\u4ef7\u683c\u751f\u6548\u65f6\u95f4\u4e0d\u4e00\u81f4\uff0c \u4f18\u5148\u663e\u793a\u8170\u5e26"))):(s.setPriceImg(!0),s.printfMsg("\u4e2d\u53f0\u63a5\u53e3\u6ca1\u6709\u6570\u636e\uff0c\u4f46\u662f\u4ef7\u683c\u63a5\u53e3\u6709\u6570\u636e\u65f6  \u53ea\u663e\u793a\u9884\u544a\u4ef7\u4fe1\u606f")):t?(s.setBeltImg(i),s.printfMsg("\u4e2d\u53f0\u63a5\u53e3\u6709\u6570\u636e,\u4f46\u662f\u4ef7\u683c\u63a5\u53e3\u6ca1\u6709\u6570\u636e\u65f6 \u53ea\u663e\u793a\u8170\u5e26\u56fe\uff0c\u4e0d\u663e\u793a\u9884\u544a\u4ef7\u8d34\u7247")):s.printfMsg("\u4e2d\u53f0\u63a5\u53e3\u548c\u4ef7\u683c\u63a5\u53e3\u6570\u636e\u8fd4\u56de\u9519\u8bef")},setPriceImg:function(e){var t=$("#prepare-price-banner");t[0]&&(e?t.show():t.hide())},setBeltImg:function(e){var t=this,i=$("#belt"),n=$("#spec-img"),s="//img30.360buyimg.com/devfe/jfs/t19579/343/409400466/4499/ecd10130/5a7304f6N483d823b.png",a=e&&e.url&&e.url.split(",");a instanceof Array&&a[2]&&(s=a[2]),i.length&&!$(".belt-bg").length&&i.html('              <div class="belt-bg" style="background: url({0}) no-repeat;">                  <p><span>{1}</span>&nbsp;<span>{2}</span></p>              </div>'.format(s,e.content,t.isSameDay(e.start,e.end))),n.length&&(450===n.width()?$(".belt-bg").css("height","66px").find("p").css("font-size","20px"):350===n.width()&&$(".belt-bg").css("height","51px").find("p").css("font-size","17px")),$.browser.msie&&"8.0"==$.browser.version&&$(".belt-bg > p").css("left",(n.width()-$(".belt-bg > p").width())/2)},formatDate:function(e){if(e){e=parseInt(e.toString().substring(0,10));var t=new Date(1e3*e);return t.getMonth()+1+"."+t.getDate()}},isSameDay:function(e,t){if(e&&t){var i="",n=parseInt(e.toString().substring(0,10)),s=parseInt(t.toString().substring(0,10)),a=s-n,i="",o=new Date(1e3*n),r=new Date(1e3*s),c=r.getMonth()+1,p=r.getDate(),d=r.getHours(),m=r.getMinutes(),u=(r.getSeconds(),o.getMonth()+1),l=o.getDate();return a<=86459?(0==d&&0==m&&(p-=1),i=u===c&&l===p?"("+u+"\u6708"+l+"\u65e5)":"("+u+"."+l+"-"+c+"."+p+")"):i="("+u+"."+l+"-"+c+"."+p+")",i}},checkActivityInfoAPIData:function(e){return!!(e&&e.hasOwnProperty("start")&&e.start&&e.hasOwnProperty("end")&&e.end&&e.hasOwnProperty("forecast")&&e.forecast)&&!(parseInt(e.start)>parseInt(e.end)||parseInt(e.forecast)>parseInt(e.start))},checkRealtimePricesAPIData:function(e){return!!(e&&e.hasOwnProperty("s")&&e.s&&e.hasOwnProperty("e")&&e.e)&&!(parseInt(e.s)>parseInt(e.e))},printfMsg:function(e){}};function L(e){$("#belt").length&&s.addListener("onPriceReady",function(t){M.init(e,t)})}var N=function(e){this.$el=$(".summary-price .J-xsth-sale"),this.tips={loginContext:"\u672c\u5546\u54c1\u4e3a\u60a8\u9650\u65f6\u4f18\u60e0\uff0c\u8bf7\u70b9\u51fb\u67e5\u770b",loginWidth:204,noLoginContext:"\u672c\u5546\u54c1\u53ef\u80fd\u6709\u4f18\u60e0\uff0c\u8bf7\u767b\u5f55\u67e5\u770b",noLoginWidth:194},this.init(e)};N.prototype={init:function(e){if(737==parseInt(e.cat[0])){var t=this;a.onAttr(/gdsp-1/,function(i){t.existCallback(e)},function(){t.hideItem()})}else this.hideItem()},existCallback:function(e){var t=this;this.checkLogin(function(i){i.IsAuthenticated?t.loginShowItem(i,e):t.showItem(i)})},showItem:function(e){this.$el.show(),this.setTips(e),this.bindEvent()},loginShowItem:function(e,t){var i=this;$.ajax({url:"//c.3.cn/gdpPromotion",data:{pin:e.Name,skuId:t.skuid},dataType:"jsonp",success:function(t){t&&t.resultCode&&"SUCCESS"==t.resultCode?i.showItem(e):i.hideItem()}})},hideItem:function(){this.$el.hide()},bindEvent:function(){this.$el.delegate(".J-xsth-panel","click",function(){var e=$("#J-global-toolbar .jdm-toolbar-tabs .jdm-tbar-tab-xianshitehui");e.length&&e.click()})},setTips:function(e){var t=this,i=this.tips.noLoginContext,n=this.tips.noLoginWidth;e.IsAuthenticated&&(i=this.tips.loginContext,n=this.tips.loginWidth);var s=this.$el.find("i");s.length&&s.show().ETooltips({close:!1,content:i,width:n,pos:"bottom",zIndex:10,onOpen:function(){t.tipOpenCallback(this)}})},tipOpenCallback:function(e){var t=this.tips.noLoginContext,i=this.tips.noLoginWidth,n=this.tips.loginContext,s=this.tips.loginWidth;this.checkLogin(function(a){a.IsAuthenticated?(e.setContent(n),e.$tooltips.css("width",s)):(e.setContent(t),e.$tooltips.css("width",i))})},checkLogin:function(e){e=e||function(e){},n.checkLogin(function(t){e(t)})}};function R(e){var t=-1!==e.specialAttrs.join("#").indexOf("isSamGoods");function i(t){$("#J_watsons").remove();var i=t.price;if("pp"!==i.up&&"tpp"!==i.up||!i.pp&&!i.tpp){var n=e.shopId,s=e.cat[2];if("41106"==n&&15655!=s){var a=$(".J-summary-price .dd");if(a.length>0){var o=$('                <div class="watsons" id="J_watsons">                    <span class="watsons__logo"></span>                    <span class="watsons__text">\u5c48\u81e3\u6c0f\u4f1a\u5458\u5361\uff0c</span>                    <a class="watsons__link watsons__link--mr18" href="//cartv.jd.com/item/200117505809.html" target="_blank">\u70b9\u51fb\u8d2d\u5361&gt;&gt;</a>                    <span class="watsons__text">\u5df2\u6709\u4f1a\u5458\u5361\uff1f\u8bf7</span>                    <a class="watsons__link watsons__link--mr3" href="//bind.jd.com/watsons/watsonsIndex.html" target="_blank">\u70b9\u51fb\u7ed1\u5b9a</a>                    <span class="sprite-question"></span>                </div>');o.find(".sprite-question").ETooltips({autoHide:!0,close:!1,content:"\u5c48\u81e3\u6c0f\u7535\u5b50\u4f1a\u5458\u5361\uff0c\u5168\u56fd\u95e8\u5e97\u53ca\u4eac\u4e1c\u5c48\u81e3\u6c0f\u5b98\u65b9\u65d7\u8230\u5e97\u90fd\u53ef\u4ee5\u4f7f\u7528\uff0c\u6fc0\u6d3b\u540e\u53ef\u4eab\u53d7\u5c48\u81e3\u6c0f\u4f1a\u5458\u76f8\u5173\u6743\u76ca\u3002",width:250,pos:"bottom",zIndex:10}),a.append(o)}else console&&console.log("\u6302\u8f7d\u70b9\u4e0d\u5b58\u5728")}}else;}t||s.addListener("onPriceReady",i)}function B(e){var t=e.cat[2];15118!=t&&15119!=t||$.ajax({url:"//api.m.jd.com/api",data:{appid:"nb_rent_house_yfb",functionId:"rent_getbrokerInfoBySkuId",body:'{"skuId":'+e.skuid+"}"},dataType:"jsonp",jsonp:"jsonp",success:function(e){var t=e&&e.data&&e.data.extensionPhone;if(t){$(".summary.summary-first").append($('<div style="font-size: 14px;color: #e4393c;padding: 10px;">                             <span style="color: #666;font-weight: bold;margin-right: 10px;">\u8054\u7cfb\u7ba1\u5bb6</span>{0}</div>'.format(t)))}},error:function(){console&&console.error("\u623f\u4ea7\u7ba1\u5bb6\u8054\u7cfb\u65b9\u5f0f\u83b7\u53d6\u5931\u8d25\uff1b")}})}function F(e){e.isFeeType||s.addListener("onStockReady",function(e){var t=e&&e.stock&&e.stock.stock&&e.stock.stock.isPlus||!1;o.isPlus=t,o.plusTags=e&&e.stock&&e.stock.stock&&e.stock.stock.jdPrice&&e.stock.stock.jdPrice.ext,o.setJdPrice(e.stock.stock),o.init()}),b(e),f(e),l(e),R(e),y(e),k(e),s.addListener("onPriceReady",function(e){g(e.price),h(e.price)}),p(e),5276==e.cat[1]||e.specialAttrs.join(",").indexOf("LeaseType-3")>-1||c(e),d(e),m(e),s.addListener("onStockReady",u),x(e),D(e),S(e),j(e),L(e),B(e),_(e),w(e),P(e),J(e),T(e),O(e),E(e),s.addListener("onPriceReady",function(t){if(!pageConfig.product.isYuShou&&$("#banner-miaosha").length<=0&&pageConfig.product.skuMarkJson&&pageConfig.product.skuMarkJson.pg)return A(e),!1;e.xianshitehui=new N(e)}),!$("#day-sales-rank").length||655!=e.cat[2]&&6881!=e.cat[2]||$.ajax({url:"//c0.3.cn/race/price/rank",data:{sku:e.skuid},scriptCharset:"gbk",dataType:"jsonp",success:function(e){var t=e.data;if(e&&0==e.errno&&t&&t.text){var i='<div class="dt">\u9500 \u91cf \u699c</div><div class="dd">'+t.text+'<a target = "_blank" href="'+t.raceUrl+'" clstag="shangpin|keycount|product|pcjingsubang">\u67e5\u770b\u699c\u5355 ></a></div>';$("#day-sales-rank").append(i)}},error:function(e){console.log("//c0.3.cn/race/price/rank",e)}}),(a.onAttr("isLOC-1")||a.onAttr("isLOC"))&&$(".J-summary-price .dd").append('<div class="store-price-tips">\u5177\u4f53\u4ef7\u683c\u8bf7\u4ee5\u6700\u7ec8\u9009\u62e9\u7684\u95e8\u5e97\u4ef7\u683c\u4e3a\u51c6\u3002</div>')}module.exports.__id="prom",module.exports.init=F,module.exports.Promotions=o,module.exports.getPrice=c});
/*!Name: colorsize.js
 * Date: 2019-4-4 18:53:50 */
define("MOD_ROOT/colorsize/colorsize",function(require,exports,module){var t=require("MOD_ROOT/common/tools/tools"),e=require("MOD_ROOT/common/tools/abtest"),n=(require("MOD_ROOT/common/tools/event").Event,require("JDF_UNIT/login/1.0.0/login"));require("JDF_UI/dialog/1.0.0/dialog"),require("MOD_ROOT/ETooltips/ETooltips");var a=pageConfig.product,i=a.colorSize,o={},s="\u2299",r={},l=[],c=[],u=$("#choose-attrs"),h=u.find("[data-type]"),d=$("#choose-results"),f="selected",g="disabled",v="no-stock",p="item-hl-bg",m=6,k=!1,C=!1;/lessAttr/.test(location.href)&&(m=2),/selected/.test(location.href)&&(C=!0);function x(t){var e={"&amp;":"&","&lt;":"<","&gt;":">","&apos;":"'","&quot;":'"',"&mdash;":"\u2014","&phi;":"\u03c6","&Phi;":"\u03a6","&deg;":"\xb0"},n=t;for(var a in e)e.hasOwnProperty(a)&&(n=n.replace(new RegExp(a,"ig"),e[a]));return n}function I(t,e){if(t.indexOf)return t.indexOf(e)>-1;for(var n=0;n<t.length;n++){if(e===t[n])return!0}return!1}function b(t,e){for(var n=[],a={},i=0;i<t.length;i++){for(var o=t[i],r=[],l=0;l<e.length;l++){var c=e[l];a[c]||(a[c]=[]),I(a[c],o[c])||a[c].push(o[c]),r.push(o[c])}n.push({path:r.join(s),sku:o.skuId,stock:o.stock?1:0})}return{result:a,items:n}}function w(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].path);return e}function y(t){for(var e=[[]],n=0;n<t.length;n++)for(var a=0,i=e.length;a<i;a++)e.push(e[a].concat(t[n]));return e}function T(t){for(var e=w(t),n=0;n<e.length;n++)for(var a=e[n],i=t[n].sku,r=t[n].stock,l=a.split(s),c=y(l),u=0;u<c.length;u++){var h=c[u],d=h.join(s);if(d){var f=x(d);o[f]?(o[f].skus.push(i),o[f].stock+=r):o[f]={skus:[i],stock:r}}}}function O(t,e){var n=new RegExp("^"+e+"+","g"),a=new RegExp(e+"+$","g"),i=new RegExp(e+"+","g");return t.replace(n,"").replace(a,"").replace(i,e)}function j(){var t=[];return h.each(function(){var e=$(this).find("."+f);e.length?t.push(e.attr("data-value").toString()):t.push("")}),t}function _(e){for(var n=[],a=0;a<i.length;a++){var o=i[a];o.skuId&&n.push(o.skuId)}function s(t){return t&&-1!=t&&34!=t&&0!=t}function r(t){for(var e=0;e<i.length;e++){var n=i[e];if(t){var a=t[n.skuId];n.stock=!a||s(a.StockState)}else n.stock=!0}}n.length&&(n.length>100&&(n=n.slice(0,100)),$.ajax({url:"//c0.3.cn/stocks",dataType:"jsonp",data:{type:"getstocks",skuIds:n.join(","),area:t.getAreaId().areaIds.join("_")},success:function(t){r(t),e()}}))}function z(t){Q();for(var e=0;e<l.length;e++)for(var n=l[e],a=r.result[n],i=t.slice(),c=0;c<a.length;c++){var u=a[c];if(t[e]!=u){i[e]=u;var d=O(i.join(s),s),f=h.filter('[data-type="'+n+'"]').find('[data-value="'+u+'"]');i[e]="\u300c"+u+"\u300d";var p=i.join("-");o[d]?(f.removeClass(g),o[d].stock<1?f.addClass(v).attr("title",p+" \u65e0\u8d27"):f.removeClass(v)):f.addClass(g).attr("title",p+" \u65e0\u6b64\u5546\u54c1")}}}function D(t){t.siblings().removeClass(f),t.addClass(f)}function E(t){t.hasClass(f)?t.removeClass(f):(t.siblings().removeClass(f),t.addClass(f),t.parents(".p-choose").removeClass("item-hl-bg"))}function R(t){var e=t.parents("[data-type]").eq(0),n=e.data("idx"),a=e.data("type"),i=t.attr("data-value");t.removeClass(g),c[n]=i,h.not(e).find("[data-value]").removeClass(f),z(j());for(var o=0;o<l.length;o++){var s=l[o],r=u.find('[data-type="'+s+'"]');if(s!=a){var d=r.find('[data-value="'+c[o]+'"]');d.hasClass(g)||(d.addClass(f),z(j()))}}}function S(){a.addToCartBtn.enabled(),a.oneKeyBuyBtn.showBtn(),a.baiTiaoFenQi&&a.baiTiaoFenQi.$el.show(),$("#choose-service").show()}function M(){for(var t=!1,e=0;e<l.length;e++){var n=l[e],a=u.find('[data-type="'+n+'"]');a.find("."+f).length<1?(a.addClass(p),t=!0,$("#InitCartUrl,#btn-baitiao,#InitCartUrl-mini").attr("href","#none")):a.removeClass(p)}return t}function A(t){for(var e=0;e<i.length;e++){for(var n=i[e],a=!0,o=0;o<l.length;o++){if(n[l[o]]!==t[o]){a=!1;break}}if(a)return n.skuId}return!1}function B(){function t(t){t.hasClass(g)?R(t):c[t.parents("[data-type]").eq(0).data("idx")]=t.val(),z(j()),G()}function e(){if(u.find("."+f).length>=l.length){var t=j(),e=A(t);e?F(e):q("["+t.join(" - ")+"] \u4e0d\u5b58\u5728\uff0c\u8bf7\u9009\u62e9\u5176\u5b83\u642d\u914d")}}function n(n){if($(".choose-attr-clothes").length)E(n),k?e(n):t(n);else{n.hasClass(f)||(D(n),k?e(n):t(n))}}u.not(".choose-attr-clothes").undelegate().delegate("[data-value]","click",function(){n($(this))}),$(".choose-attr-clothes").undelegate().delegate('[data-value]:not(".disabled,.no-stock")',"click",function(){n($(this))})}function U(){var t=$("#choose-attr-1"),e=$("#spec-img"),n=e.attr("width"),i=0,o=null;if(737===a.cat[0])return!1;if(e.attr("height"))i=e.attr("height");else{var s=e.attr("data-origin").match(/s\d+x\d+/);s&&(i=s[0].replace(/s\d+x/i,""))}t.bind("mouseleave",function(){o=setTimeout(function(){$("#spec-img").attr("src",a.currentMainImage)},200)}),t.delegate(".item","mouseenter",function(){var t=$(this).find("img"),e=t.attr("width"),a=t.attr("height"),s=new RegExp("s"+e+"x"+a,"g"),r=new RegExp("cc_"+e+"x"+a,"g");if(clearTimeout(o),t.length){var l=t.attr("src"),c=l.replace(s,"s"+n+"x"+i).replace(r,"cc_"+n+"x"+i);$("#spec-img").attr("src",c)}})}function P(){u.find("[data-value]").each(function(){var t=$(this).attr("data-value");o[t]||$(this).hasClass(f)||$(this).addClass(g)})}function F(t){$(".crumb-wrap").attr("id","crumb-wrap"),location.href="//"+location.hostname+"/"+t+".html"+location.search+"#crumb-wrap"}function q(t){d.show().find(".dd").html(t)}function G(){for(var t=j(),e=[],n=0;n<t.length;n++){var i=t[n];i&&e.push(i)}if(e.length&&e.length==l.length){var r=o[e.join(s)];C?q(e.join(" - ")):r&&a.skuid==r.skus[0]?S():r&&a.skuid!=r.skus[0]&&F(r.skus[0])}}function H(){h.each(function(){var t=$(this).data("type");t&&l.push(t)}),l.length>m&&(k=!0)}function J(t){var e=t.attr("data-value");e&&t.attr("title",e)}function Q(){u.find(".item").each(function(){J($(this))})}function K(){o={},l=[],c=[],r={},u.find("[data-value]").removeClass(g).removeClass(v),h.removeClass(p)}function L(){a.__colorSizeABTest=new e(t.getUUID(),.5);var n=a.__colorSizeABTest.isHitVersion();1315===a.cat[0]&&"A"===n&&U()}function N(){if(!i)return!1;K(),H(),B(),L(),k||(c=j(),_(function(){r=b(i,l),T(r.items),P(),z(j()),C&&G(),/debug=res/.test(location.href)&&(console.log(o),console.log(c))}))}var V={init:function(t){this.$el=$("#size-helper"),this.cfg=t,this.$el.length&&(this.get(),this.bindEvent())},get:function(){$.ajax({url:"//cd.jd.com/sizeHelper/info",data:{pin:readCookie("pin"),wareId:this.cfg.mainSkuId},dataType:"jsonp",success:$.proxy(this.handleData,this)})},bindEvent:function(){this.$el.delegate("a","click",$.proxy(this.openIframe,this))},openIframe:function(){var t="//helper.jd.com/IDPlus/pchtml/size-layer.html?wareId="+this.cfg.mainSkuId;n({modal:!0,complete:function(e){e&&e.Identity&&e.Identity.IsAuthenticated&&$("body").dialog({type:"iframe",width:700,height:520,title:"\u5c3a\u7801\u52a9\u624b",source:t})}})},handleData:function(t){t&&(this.$el.show(),this.getSize(t.size))},getSize:function(t){if(t){var e=t.substring(0,t.indexOf("/")),n=$("#choose-attr-2");/debug=size/.test(location.href)&&(e="M");var a=n.find('[data-value="'+e+'"]');a.length&&(a.append('<i class="reco"></i>'),this.setTips(a))}},setTips:function(t){t.ETooltips({close:!1,content:"\u4f60\u53ef\u80fd\u5408\u9002\u7684\u5c3a\u7801",pos:"bottom",width:120,zIndex:10})}};function W(t){if(!u.length)return!1;N(),V.init(t)}module.exports.highLighAttr=M,module.exports.initAttrSelection=N,module.exports.setData=function(t){i=t},module.exports.overrideGoToPageMethod=function(t){"function"==typeof t&&(F=t)},module.exports.overrideGoToPageMethod.originMethod=F,exports.init=W});
/*!Name: buytype.js
 * Date: 2019-4-4 18:53:50 */
define("MOD_ROOT/buytype/buytype",function(require,exports,module){var t=require("MOD_ROOT/prom/prom").Promotions,e=require("MOD_ROOT/address/stock"),i=require("MOD_ROOT/common/tools/event").Event,s=require("MOD_ROOT/common/tools/tools");require("MOD_ROOT/ETooltips/ETooltips"),require("JDF_UNIT/trimPath/1.0.0/trimPath");var a={init:function(t,e,i,s,r,h){this.$el=$("#choose-type"),this.$hy=$("#choose-type-hy"),this.$suit=$("#choose-type-suit"),this.$btn=$("#btn-heyue"),this.$qiang=$("#btn-qiang"),this.$onkeybuy=$("#btn-onkeybuy"),this.$tipsTxt=this.$suit.find("#J-suit-tips"),this.$jjg=$("#prom-phone-jjg"),this.$promPhone=$("#prom-phone"),this.$promGift=$("#prom-gift"),this.$phoneAd=$("#p-ad-phone"),this.$amount=$(".choose-amount"),this.$disabled=$("#btype-tip"),this.$yysPlanTips=$(),this.$yysArrow=$(),this.$promiseIcon=$(".J-promise-icon"),this.sku=t.skuid,this.pid=e,this.cid=i,this.mainSkuId=s||t.mainSkuId,this.sp="",this.cfg=t,this.onReady=r||function(){},this.onError=h||function(){},this.$currBuyType=null,this.$currHeYue=null,this.$currSuit=null,this.url="//feetype.jd.com/services/queryFeeTypes.action",/debug=yys/.test(location.href)&&(this.url="//yys.worker.jd.com/services/queryFeeTypes.action"),this.buyTypeIndex=null,this.disableClass="btn-disable",this.dtype=null,this.isHySuit=!1,this.noBuyType=!1,this.destory(),this.bindEvent(),this.getBuyType(this.sku,this.pid,this.cid,this.mainSkuId),pageConfig.matchFeetype=function(t){var e=a.getUrlFeeType(),i=!1,s=0;if(e&&t&&t.length)for(s=0;s<t.length;s++)if(t[s].ft==e){i=!0;break}return i}},bindEvent:function(){var t=this;this.binded||(this.binded=!0,this.$el.undelegate("click").delegate(".item","click",function(){var e=$(this),i=e.hasClass("disabled"),s=e.hasClass("selected");i||s||(t.$currBuyType=e,t.handleBuyTypeClick(e))}),this.$hy.undelegate("click").delegate(".item","click",function(){var e=$(this),i=e.hasClass("disabled"),s=e.hasClass("selected");i||s||(t.$currHeYue=e,t.handleHyTypeClick(e))}),this.$suit.undelegate("click").delegate(".J-suit-trigger","click",function(){var e=$(this),i=e.attr("data-url")||t.$currHeYue.attr("data-aurl"),s=t.$currHeYue.attr("data-auth");t.$currSuit=e,t.showSuitIframe(i,s)}),this.$btn.unbind("click").bind("click",function(){if(t.hasSuitIframe&&!t.suitSelected)return t.$suit.addClass("item-hl-bg"),t.$tipsTxt.show(),!1}))},getTPL:function(t){return"btype"===t?'            <div class="dt">\u8d2d\u4e70\u65b9\u5f0f</div>            <div class="dd">                {for list in datas}                {var btype = list.feetypes[0]}                <div class="J-btype-item item{if list.che} selected{/if}"                     clstag="shangpin|keycount|product|gmfs-${list.name}"                     data-ind="${list_index}"                     data-matched="${pageConfig.matchFeetype(list.feetypes)}"                    {if !(list.sp===-1&&btype.ft===100)}                    data-ishy="true"                     {/if}                    data-ft="${btype.ft}"                    data-sp="${list.sp}"                     data-count="${list.feetypes.length}"                    clstag="shangpin|keycount|product|goumaifangshi_${list.name}">                    <b></b>                    <a href="#none" title="">${list.name}</a>                </div>                {/for}            </div>':"suit"===t?'            <div class="dt">\u4f18\u60e0\u7c7b\u578b</div>            <div class="dd">                {for item in datas}                <div class="J-hy-btype {if !item.che} hide{/if}">                    {for list in item.feetypes}                    <div class="item{if list.che||(item.sp===-1&&list.ft===100)} selected{/if}{if !list.stat} disabled{/if}"                         clstag="shangpin|keycount|product|hylx-${list.name}"                         data-aurl="${list.aurl}"                        data-rurl="${list.rurl}"                        data-type="${list.type}"                        data-dtype="${list.dtype}"                        data-id="${list.ft}"                         data-skus="${list.sids}"                         data-ad="${list.ad}"                         data-ind="${list_index}"                         data-sku="${list.sku}"                        data-sp="${item.sp}">                        <b></b>                        <a href="#none" title="${list.tips}">${list.name}</a>                    </div>                    {/for}                </div>                {/for}                {if list.ft!==100}                    <a class="J-hy-btype-tips hy-btype-tips icon question fl"                         href="#none"><i class="sprite-question"></i></a>                {/if}            </div>':"jjg-prom"===t?'            <div class="J-prom-phone-jjg">                <em class="hl_red_bg">${title||"\u52a0\u4ef7\u8d2d"}</em>                <em class="hl_red">${text}</em>                <a title="\u53c2\u52a0\u6d3b\u52a8\u5165\u53e3" clstag="eve|keycount|treaty|JJGDetails" class="J-jjg-btn" href="#none">                    &nbsp;&nbsp;\u70b9\u51fb\u62a2\u8d2d <s class="s-arrow">&gt;</s>                </a>            </div>':"jjg-iframe"===t?'            <div id="shf-feetype">                  <dl class="dl-1">                      <dt class="fl">\u60a8\u9700\u6d88\u8d39\uff1a</dt>                      <dd class="lh hl_red">${info.cons}</dd>                  </dl>                  <dl class="dl-2">                      <dt class="fl">\u60a8\u5c06\u5f97\u5230\uff1a</dt>                      <dd class="lh">                          <ul class="hl_red">                              <li>\u624b\u673a <em>&times; 1</em></li>                              <li>${stockArea}\uff08\u624b\u673a\u5361\uff09 <em>&times; 1</em></li>                              <li>\u8d60\u9001\u8bdd\u8d39 ${info.pres}</li>                          </ul><div class="clr"></div>                          <p>${info.pack} </p>                          <table>                              <tr>                                  <td><div><strong>\u8bed\u97f3\u901a\u8bdd(\u5206\u949f)</strong></div>{if info.cal!=="null"}${info.cal}{/if}</td>                                  <td><div><strong>\u56fd\u5185\u77ed\u4fe1(\u6761)</strong></div>{if info.msg!=="null"}${info.msg}{/if}</td>                              </tr>                              <tr>                                  <td><div><strong>\u56fd\u5185\u6d41\u91cf</strong></div>{if info.traf!=="null"}${info.traf}{/if}</td>                                  <td><div><strong>\u63a5\u542c\u514d\u8d39</strong></div>{if info.area!=="null"}${info.area}{/if}</td>                              </tr>                          </table>                          <div class="shf-buy-now">                              <a class="btn-primary J-btn" href="${resLink}" target="_blank" clstag="eve|keycount|treaty|JJGRedirect" class="css3-btn">\u9009\u62e9\u53f7\u7801</a>                          </div>                      </dd>                  </dl><span clstag="eve|keycount|treaty|JJGDetails" id="JJGDetails">\u3000</span>            </div>':void 0},handleBuyTypeClick:function(t){var e=t.attr("data-ind"),i=(t.attr("data-sp"),"true"===t.attr("data-ishy")),s=t.attr("data-ft");this.switchTo(t),"100"!=s?this.$amount.css({visibility:"hidden",marginRight:0}):this.$amount.css({visibility:"visible",marginRight:"10px"}),this.buyTypeIndex=e,this.isHeYue=i,pageConfig.product.isHeYue=i,this.$currHeYue=this.$hy.find(".J-hy-btype").eq(this.buyTypeIndex).find(".selected"),this.switchBtn(i),this.setResult(this.getParams(this.$currHeYue))},switchBtn:function(t){var s=this;t?this.onHeYue():this.onNonHeYue();var a={extraParam:'{"originid":"1"}'};this.isHeYue&&(a.extraParam='{"originid":"1","heYueJi":"1"}'),new e(a,function(t){s.setBuyBtn()}),i.fire({type:"onHeYueReady",bType:this.bType,noBuyType:this.noBuyType})},handleHyTypeClick:function(t){var e=t.attr("data-ind"),i=t.parent().find(".item"),s=i.removeClass("selected").eq(e);s.addClass("selected"),this.$currHeYue=s,this.setResult(this.getParams(this.$currHeYue))},switchTo:function(t){var e=t.attr("data-ind"),i=t.parent().find(".J-btype-item"),s=this.$hy.find(".J-hy-btype");i.removeClass("selected").eq(e).addClass("selected"),s.hide().eq(e).show()},getBuyType:function(t,e,i,s){var a=this;window.fetch_feetype_data=function(){},$.ajax({url:this.url,dataType:"jsonp",scriptCharset:"utf-8",timeout:5e3,cache:!0,jsonpCallback:"fetch_feetype_data",data:{skuId:t,cityId:i,provinceId:e,productId:s},error:function(t){a.onReady.call(this,100),a.onError.call(this,100)},success:function(t){a.handleBuyTypeData(t)}})},handleBuyTypeData:function(e){var i=pageConfig.chooseType=!!e&&e.datas.length>0,s=1;if(i)for(var a=0;a<e.datas.length;a++)e.datas[a]&&e.datas[a].che&&e.datas[a].feetypes&&e.datas[a].feetypes[0]&&"100"!=e.datas[a].feetypes[0].ft&&(s=0);var r=i&&e.promo;s?this.$amount.css({visibility:"visible",marginRight:"10px"}):this.$amount.css({visibility:"hidden",marginRight:0}),i?(this.r=e,this.setBuyType(e),r&&this.setJiaJiaGou(e.promo)):(t.init(pageConfig.product.skuid),this.$el.html("\x3c!--oops, \u6728\u6709\u6570\u636e\u4e86^!^--\x3e"),this.disabled(),this.onReady.call(this,"100"))},setBuyType:function(t){var e=this.getTPL("btype"),i=e.process(t),s=i.match(/\[ERROR:.+\]/g);if(t&&t.sp&&(this.sp=t.sp),s&&s[0])return $("#summary-promotion").hide(),console.error("[BuyType]Template Rendering error.\n"),console.error(s[0]),this.onError.call(this,100,s);t.dis?this.$disabled.show():this.$disabled.hide(),this.$el.html(i),this.noBuyType=1==t.datas.length&&1==t.datas[0].feetypes.length&&"-1"===t.datas[0].feetypes[0].name,this.noBuyType?this.$el.hide():this.$el.show(),this.setHyType(t)},setHyType:function(t){var e=this.getTPL("suit"),i=e.process(t),s=i.match(/\[ERROR:.+\]/g);s&&s[0]&&($("#summary-promotion").hide(),console.error("[BuyType]Template Rendering error.\n"),console.error(s[0])),this.$hy.html(i),this.noBuyType?this.$hy.hide():this.$hy.show();var a=this.getUrlFeeType();if(a){var r=this.$el.find('[data-matched="true"]');this.switchTo(r)}this.$currBuyType=this.$el.find(".selected"),this.buyTypeIndex=this.$currBuyType.attr("data-ind"),this.$currBuyTypes=this.$hy.find(".J-hy-btype").eq(this.buyTypeIndex).find(".item");var h=this.$currBuyTypes.filter('[data-id="'+a+'"]');a&&h?(this.$currHeYue=h,this.$currBuyTypes.removeClass("selected"),this.$currHeYue.addClass("selected")):this.$currHeYue=this.$currBuyTypes.filter(".selected"),this.bType=this.$currHeYue.attr("data-id"),this.isHeYue="true"===this.$currBuyType.attr("data-ishy"),pageConfig.product.isHeYue=this.isHeYue,this.$currHeYue.length||(this.disabledBuy=!0),this.switchBtn(this.isHeYue);var n=this.getParams(this.$currHeYue);this.setResult(n)},getTips:function(){var t="\u79fb\u52a8\u8001\u7528\u6237\uff0c\u65e0\u9700\u6362\u53f7\uff0c\u53ea\u9700\u627f\u8bfa\u4e1a\u52a1\u5185\u5bb9\uff0c\u5373\u53ef\u6bcf\u6708\u83b7\u5f97\u9ad8\u989d\u7684\u8bdd\u8d39\u8fd4\u8fd8",e="\u540c\u65f6\u8d2d\u4e70\u624b\u673a\u548c\u65b0\u53f7\u7801\uff0c\u5373\u53ef\u6839\u636e\u6240\u9009\u7684\u5957\u9910\u6863\u4f4d\uff0c\u6309\u6708\u83b7\u5f97\u4e00\u5b9a\u989d\u5ea6\u7684\u8bdd\u8d39\u8d60\u9001",i={name:"\u8054\u901a/\u7535\u4fe1",8:"\u540c\u65f6\u8d2d\u4e70\u624b\u673a\u548c\u65b0\u53f7\u7801\uff0c\u5e76\u9884\u5b58\u4e00\u5b9a\u91d1\u989d\u7684\u8bdd\u8d39\uff08\u540e\u7eed\u5c06\u5206\u6708\u8fd4\u8fd8\uff09\uff0c\u5373\u53ef\u62b5\u6263\u7b49\u503c\u7684\u8d2d\u673a\u6b3e\uff0c\u8d2d\u673a\u6b3e\u6700\u9ad8\u53ef\u51cf\u81f30\u5143",28:"\u540c\u65f6\u8d2d\u4e70\u624b\u673a\u548c\u65b0\u53f7\u7801\uff0c\u5373\u53ef\u6839\u636e\u6240\u9009\u7684\u5957\u9910\u6863\u4f4d\uff0c\u6309\u6708\u83b7\u5f97\u4e00\u5b9a\u989d\u5ea6\u7684\u8bdd\u8d39\u8d60\u9001",27:"\u8d2d\u4e70\u65b0\u624b\u673a\u65f6\u529e\u7406\u4e00\u5f20\u65b0\u7535\u8bdd\u5361\uff0c\u53ef\u4ee5\u81ea\u7531\u9009\u62e9\u5957\u9910\u4e2d\u8bed\u97f3\u3001\u6d41\u91cf\u3001\u77ed\u4fe1\u7684\u642d\u914d\u548c\u7528\u91cf",33:"\u7535\u4fe1\u8001\u7528\u6237\uff0c\u4e0d\u6362\u53f7\uff0c\u4e70\u624b\u673a\uff0c\u529e\u7406\u65b0\u5957\u9910\uff0c\u5373\u53ef\u6309\u7167\u4f18\u60e0\u89c4\u5219\u6309\u6708\u83b7\u5f97\u989d\u5916\u7684\u8bdd\u8d39\u8d60\u9001",2:e,5:e,12:e};return{"-1":"",1:{name:"\u79fb\u52a8",5:t,12:t,18:"\u5168\u56fd\u79fb\u52a8\u8001\u7528\u6237\u5747\u53ef\u529e\u7406\uff0c\u627f\u8bfa\u5728\u7f51\u65f6\u957f\u548c\u5957\u9910\u5185\u5bb9\uff0c\u5373\u53ef\u6bcf\u6708\u83b7\u8d60\u4e00\u5b9a\u989d\u5ea6\u7684\u8bdd\u8d39\uff08\u79fb\u52a8\u8d2d\u673a\u4e13\u4eab\u65e0\u8bdd\u8d39\u8fd4\u8fd8\uff09",32:"\u4e0a\u6d77\u79fb\u52a8\u8001\u7528\u6237\uff0c\u627f\u8bfa\u6708\u6700\u4f4e\u6d88\u8d39\uff0c\u5373\u53ef\u6bcf\u6708\u4eab\u53d7\u4e00\u5b9a\u989d\u5ea6\u7684\u8bdd\u8d39\u8d60\u9001",34:"\u5317\u4eac\u79fb\u52a8\u8001\u7528\u6237\uff0c\u4e0d\u6362\u53f7\uff0c\u4e70\u624b\u673a\uff0c\u5373\u53ef\u6bcf\u6708\u4eab\u53d7\u4e00\u5b9a\u989d\u5ea6\u7684\u8bdd\u8d39\u8d60\u9001",35:"\u5c71\u897f\u79fb\u52a8\u8001\u7528\u6237\uff0c\u4e0d\u6362\u53f7\uff0c\u4e70\u624b\u673a\uff0c\u5373\u53ef\u6bcf\u6708\u4eab\u53d7\u4e00\u5b9a\u989d\u5ea6\u7684\u8bdd\u8d39\u8d60\u9001",36:"\u798f\u5efa\u79fb\u52a8\u8001\u7528\u6237\uff0c\u4e0d\u6362\u53f7\uff0c\u529e\u5408\u7ea6\uff0c\u5373\u53ef\u6bcf\u6708\u4eab\u53d7\u4e00\u5b9a\u989d\u5ea6\u7684\u8bdd\u8d39\u8d60\u9001"},2:i,3:i,4:{name:"\u4eac\u4e1c\u8054\u901a",0:""},5:{name:"\u4eac\u4e1c\u901a\u4fe1",0:""}}},setTips:function(t){var e=this.$hy.find(".J-hy-btype-tips"),i=t.attr("data-sp")||-1,s=t.attr("data-id")||-1,a=this.getTips()[i],r="";a&&a[s]&&(r=a[s]),r?e.show().ETooltips({close:!1,content:r,width:200,position:"bottom",zIndex:10}):e.hide()},getParams:function(t){return t&&t.length?{sku:t.attr("data-sku"),skus:t.attr("data-skus"),id:t.attr("data-id"),ad:t.attr("data-ad"),ind:t.attr("data-ind"),type:t.attr("data-type"),dtype:t.attr("data-dtype")}:null},setSuitContent:function(t){this.suitSelected=!0,t&&(this.disabledBuy=!1,this.$suit.find(".J-suit-trigger").attr("data-url",this.formatBtypeUrl(t.aurl,t.auth)).addClass("selected").find("a").html(t.message),this.$suit.find(".J-suit-resel").show(),this.$suit.removeClass("item-hl-bg").find(".J-suit-tips").hide(),this.setBuyBtn(this.formatBtypeUrl(t.rurl,t.auth)))},getSuitName:function(t){return{0:"\u9009\u62e9\u5957\u9910\u4e0e\u53f7\u7801",1:"\u9009\u62e9\u5957\u9910\u4e0e\u8d44\u8d39"}[t]},setSuitName:function(t){this.$suit.find(".J-suit-trigger a").html(this.getSuitName(t))},clearSuit:function(){var t=this.getSuitName(this.dtype);this.suitSelected=!1,this.$suit.find(".J-suit-resel").hide(),this.$suit.find(".J-suit-trigger").removeClass("selected").removeAttr("data-url").find("a").html(t).attr("title",t)},setResult:function(e){var i=e&&e.id;if(this.hasSuitIframe=!!this.$currHeYue.attr("data-aurl"),this.bType=i,this.dtype=e?e.dtype:null,this.isOnlyNonHeYue=1===this.$currBuyTypes.length&&"100"===this.bType,this.setTips(this.$currHeYue),this.hasSuitIframe?(this.clearSuit(),this.setSuitName(e.dtype),this.$suit.show()):this.$suit.hide(),this.isOnlyNonHeYue?this.$hy.hide():this.noBuyType||this.$hy.show(),"function"==typeof this.onReady&&this.onReady.call(this,i),this.disabledBuy=!e,this.disabledBuy)return this.setBuyBtn();if(e.sku&&this.sku!==Number(e.sku)&&(location.href="//"+location.host+"/"+e.sku+".html"),this.hasSuitIframe&&this.suitSelected)return this.setBuyBtn();if(e.ad){this.$phoneAd.html(e.ad).show();var s=e.ad.replace(/<.*?>/g,"");this.$phoneAd.attr("title",s)}else this.$phoneAd.html("").hide(),this.$phoneAd.attr("title","");e.skus?(t.clear(),this.getPhoneProm(e.skus)):(this.clearPhoneProm(),e.skus!==this.isHySuit&&t.init(this.sku)),this.isHySuit=!!e.skus,this.setBuyBtn()},onHeYue:function(){this.cfg.addToCartBtn.hide(),this.$btn.show(),this.cfg.isKO&&this.cfg.koBtn.hide(),this.$promiseIcon.hide(),this.$qiang.hide(),this.cfg.notifyBtn.show(),this.$yysPlanTips.hide(),this.$yysArrow.hide()},onNonHeYue:function(){this.cfg.addToCartBtn.show(),this.$btn.hide(),this.cfg.isKO&&this.cfg.koBtn.show(),this.cfg.notifyBtn.show(this.cfg),this.$promiseIcon.show(),this.$yysPlanTips.show(),this.$yysArrow.show()},formatBtypeUrl:function(t,e){var i=t.replace(/{sku}/g,this.sku).replace(/{btype}/g,this.bType).replace(/{pid}/g,this.pid).replace(/{cid}/g,this.cid).replace(/{productId}/g,this.mainSkuId).replace(/{sp}/g,this.sp).replace(/{venderId}/g,pageConfig.product.venderId);return e&&(i=i.replace(/{auth}/g,e)),i},showSuitIframe:function(t){var e=this.formatBtypeUrl(t),i=this.getSuitName(this.dtype);seajs.use("JDF_UI/dialog/1.0.0/dialog",function(){$("body").dialog({type:"iframe",autoIframe:!1,width:820,height:600,title:i,source:e})})},setBuyBtnText:function(t){if(!this.$currHeYue)return!1;var t=this.$currHeYue.attr("data-type"),e="\u4e0d\u6362\u53f7\u529e\u5957\u9910";"0"===t&&(e="\u9009\u62e9\u53f7\u7801\u548c\u5957\u9910"),"2"===t&&(e="\u7acb\u5373\u8d2d\u4e70"),this.$btn.html(e).attr("clstag","shangpin|keycount|product|"+e+"_"+pageConfig.product.pType)},disabled:function(){this.$btn.addClass(this.disableClass).attr("href","#none")},enabled:function(t){var e=this.cfg;if(e.isClosePCShow||!e.havestock)return!1;this.$btn.removeClass(this.disableClass),t&&this.$btn.attr("href",t)},setBuyBtn:function(t){if((!1===pageConfig.product.havestock||pageConfig.product.isClosePCShow)&&(this.disabledBuy=!0),this.setBuyBtnText(),this.disabledBuy)this.disabled();else{var e=t||"//eve.jd.com/redirect.action?"+$.param({wid:this.sku,btype:this.bType,pid:this.pid,cid:this.cid,r:Math.random()});this.enabled(e)}},getUrlFeeType:function(){var t=location.href.toLowerCase(),e=null,i=null;return t.indexOf("feetype")>-1&&null!==(e=t.match(/feetype=\w+/g))&&(i=e[0].replace("feetype=","")),i},getPhoneProm:function(t){var e=this,i="//c.3.cn/contractsuit/{sku}_{skus}_{pid},0,0_1_1_CellPhone.setPhoneProm_html",s=i.replace("{sku}",this.sku).replace("{skus}",t).replace("{pid}",this.pid);$.ajax({url:s,dataType:"jsonp",success:function(t){e.setPhoneProm(t)}})},setPhoneProm:function(t){var e=[],i=[],s='            <div class="prom-gifts clearfix">                <span class="prom-gift-label"><em>\u8d60\u54c1</em></span>                <div class="prom-gift-list">                    {for item in gs}                    {if item.t==2}                    <div class="prom-gift-item">                        <a target="_blank" href="//item.jd.com/${item.id}.html" title="${item.name}">                            {if item.img}                            <img src="${pageConfig.FN_GetImageDomain(item.id)}n5/${item.img}" width="25" height="25" class="gift-img">                            {else}                            <img src="//misc.360buyimg.com/product/skin/2012/i/gift.png" width="25" height="25" class="gift-img">                            {/if}                        </a>                        <em class="gift-number">\xd7 ${item.num}</em>                    </div>                    {/if}                    {/for}                </div>            </div>';if(t.csl&&t.csl.length>0)for(var a=0;a<t.csl.length;a++)if(t.csl[a].skuId===t.sid){$("#summary-price strong").html("\uffe5"+t.csl[a].p.toFixed(2));break}if(t.d&&e.push('<em class="hl_red_bg">\u76f4\u964d</em><em class="hl_red">\u5df2\u4f18\u60e0\uffe5'+t.d+"\u5143</em>"),t.s&&e.push('<em class="hl_red_bg">\u8d60\u4eac\u8c46</em><em class="hl_red">\u8d60'+t.s+"\u4eac\u8c46</em>"),t.gs&&t.gs.length>0&&i.push(s.process(t)),t.cl&&t.cl.length>0){var r="",h="",h="",n="";r+='<em class="hl_red_bg">\u8d60\u5238</em>';for(var d=0;d<t.cl.length;d++)t.cl[d].k&&(h="\u9650\u54c1\u7c7b"),1===t.cl[d].t&&(n="\u4eac"),2===t.cl[d].t&&(n="\u4e1c"),perfix+=t.cl[d].q+"\u5143"+n+h+"\u5238 ";r+='<em class="hl_red">\u8d60\u9001'+perfix+"</em>",e.push(r)}e.length?this.$promPhone.html('<div class="J-prom-phone">'+e.join("<br/>")+"</div>"):this.$promPhone.html(""),i.length?this.$promGift.html('<div class="J-prom-phone-gift">'+i.join("<br/>")+"</div>"):this.$promGift.html(""),this.originPromCount=($("#prom-bvalue").length>0?1:0)+($("#prom-quan em").length>0?1:0)},setJiaJiaGou:function(e){var i="//eve.jd.com/redirect.action?"+$.param({wid:this.sku,btype:e.info.ft,pid:this.pid,cid:this.cid,r:Math.random()}),s=$("#store-selector .text div").text();s.indexOf("\u5e02")>0?e.stockArea=s.substr(0,s.indexOf("\u5e02")+1):e.stockArea=s.substr(0,2),e.resLink=i;var a=this.getTPL("jjg-prom"),r=this.getTPL("jjg-iframe");this.$jjg.html(a.process(e)),this.$jjg.find(".J-jjg-btn").unbind("click").bind("click",function(){seajs.use("JDF_UI/dialog/1.0.0/dialog",function(){$("body").dialog({width:550,height:320,title:"\u52a0\u4ef7\u8d2d",source:r.process(e),onReady:function(){var t=$("#shf-feetype a");pageConfig.product.havestock?t.attr("clstag","eve|keycount|treaty|JJGRedirect"):t.removeClass("css3-btn").addClass("css3-btn-gray").attr("href","#none").removeAttr("target").after("<strong>\u3000\u6240\u9009\u5730\u533a\u8be5\u5546\u54c1\u6682\u65f6\u65e0\u8d27\uff0c\u975e\u5e38\u62b1\u6b49\uff01</strong>").removeAttr("clstag")}})})}),t.init(!1,!0),t.$el.show(),t.promCount++,t.setFoldLayer()},setPlanIframe:function(t){var e=this,i="z-have-phone-service";this.$yysPlanTips=this.$el.find("#yys-plan-tips"),this.$yysArrow=$("#J-yys-arrow"),"100"===t?(e.$yysPlanTips.show(),e.$yysArrow.show(),e.$el.addClass(i)):(e.$yysPlanTips.hide(),e.$yysArrow.hide(),e.$el.removeClass(i)),e.$yysPlanTips.undelegate().delegate(".J-popup-iframe","click",function(){var t=$(this).attr("data-url"),i=$.param({skuId:e.sku,provinceId:e.pid,cityId:e.cid,r:Math.random()}),s="";s=t?t.indexOf("?")>-1?t+i:t+"?"+i:"//dj.eve.jd.com/queryCtcPackageInfo.action?"+i,seajs.use("JDF_UI/dialog/1.0.0/dialog",function(){pageConfig.bTypeIframe=$("body").dialog({type:"iframe",width:690,height:610,title:"\u5957\u9910\u53d8\u66f4",autoIframe:!1,iframeTimestamp:!1,source:s,onReady:function(){var t=$(this.el).width();$(this.el).addClass("popup-phone-service"),$(this.content).width(t)}})})})},clearPhoneProm:function(){this.$promPhone.html(""),this.$promGift.html("")},destory:function(){this.$el.html("").hide(),this.$hy.html("").hide(),this.$phoneAd.html("").hide(),this.$jjg.html(""),this.$suit.hide().removeClass("item-hl-bg")}};function r(e){if(!e.isFeeType)return!1;window.CellPhone=a;function r(i){var r=s.getAreaId().areaIds,h=r[0],n=r[1];t.setJdPrice(i.stock.stock),a.init(e,h,n,e.mainSkuId,function(t){})}i.addListener("onAreaChange",r)}module.exports.__id="buytype",module.exports.init=r,module.exports.CellPhone=a});
/*!Name: baitiao.js
 * Date: 2019-4-4 18:53:49 */
define("MOD_ROOT/baitiao/baitiao",function(require,exports,module){var i=require("MOD_ROOT/common/core"),t=require("MOD_ROOT/common/tools/event").Event,e=require("JDF_UNIT/login/1.0.0/login"),s=require("MOD_ROOT/common/tools/tools");require("MOD_ROOT/ETooltips/ETooltips"),require("JDF_UNIT/trimPath/1.0.0/trimPath");var n=function(t,e){this.$el=t.$el||$("#choose-baitiao"),this.$btn=t.$btn||$("#btn-baitiao"),this.price=t.price,this.$jc=$("#choose-jincai"),this.$jcBtn=$("#btn-jincai"),this.cfg=t.cfg,this.onSelected=e||function(){},this.sku=t.sku,this.cat=t.cat,this.shopId=t.cfg.shopId,this.enable=!1,this.isAva=null,this.did="",this.disabledBT=i.onAttr("isXnzt")||this.cfg.isYuShou||this.cfg.isBiGouMa||this.cfg.isKO,this.URL="//btshow.jd.com/queryBtPlanInfo.do",this.JSONP_CALLBACK_NAME="queryBtPlanInfo",window.queryBtPlanInfo=function(){},this.hideJCItem(),this.hideJCBtn(),this.init()};n.TEMPLATE='    <div class="dt">\u767d\u6761\u5206\u671f</div>    <div class="dd">        <div class="baitiao-list J-baitiao-list">            {for item in planInfos}            <div class="item disabled"                 clstag="shangpin|keycount|product|baitiaofenqi_${item.plan}_${pageConfig.product.cat.join(\'_\')}"                 data-snum="${item.plan}">                <b></b>                <a href="#none">                    <strong>                    {if item.plan===1}                         \u4e0d\u5206\u671f                     {else}                        \uffe5${item.curTotal}${(item.text ? item.text : "")}&times;${item.plan}\u671f                    {/if}                    </strong>                    <span style="display:none;">                        {if item.isDiscount}<em>\u60e0</em>{/if}                         {if item.fee>0}\u542b{else}0{/if}\u670d\u52a1\u8d39                    </span>                </a>                <div class="baitiao-tips hide">                    <ul>                        <li>                        {if item.fee>0}                            \u542b\u670d\u52a1\u8d39\uff1a\u8d39\u7387${item.rate}%${(item.text ? item.text : "")}\uff0c\uffe5${item.planFee}${(item.text ? item.text : "")}&times;${item.plan}\u671f                        {else}                            \u65e0\u670d\u52a1\u8d39                        {/if}                        </li>                    </ul>                </div>            </div>            {/for}            {if isDiscountAll}            <div class="bt-info-tips">                <a class="J-icon-hui prom icon fl" href="#none">\u3000</a>            </div>            {/if}            <div class="bt-info-tips">                <a class="J-bt-tips question icon fl" href="#none">\u3000</a>            </div>        </div>        <div class="baitiao-text-wrap"><div class="baitiao-text J-baitiao-text"></div></div>    </div>',n.prototype={init:function(){this.bindEvent(),this.get()},bindEvent:function(){var i=this;this.$el.undelegate(".item","click"),this.$el.delegate(".item","click",function(){var t=$(this).hasClass("selected");$(this).hasClass("disabled")||(i.$el.find(".item").removeClass("selected"),t?$(this).removeClass("selected"):$(this).addClass("selected"),i.select($(this),!t))}),this.$el.delegate(".J-login","click",function(){i.loginIframe()}),this.$el.delegate(".item","mouseenter",function(){$(this).addClass("hover")}),this.$el.delegate(".item","mouseleave",function(){$(this).removeClass("hover")}),this.$jc.undelegate("click").delegate(".J-jincai-list .item","click",$.proxy(this.handleJC,this)),t.addListener("onStockReady",function(){i.showItem()}),t.addListener("onGiftSelected",function(){i.disabledBT||i.setBTLink()}),t.addListener("onLDPSelected",function(t){i.did=t.did,i.disabledBT||i.setBTLink()}),t.addListener("onHeYueReady",function(){i.showItem()}),t.addListener("onStockReady",function(){i.isHWAdd()&&(i.$jcBtn.hide(),i.hideJCItem())})},isHWAdd:function(){var i=s.getAreaId().areaIds;return 53283===i[0]||52993===i[0]||32===i[0]},log:function(i){"undefined"!=typeof errortracker&&errortracker.log({filename:"reservation.js",message:i})},loginIframe:function(){e({modal:!0,complete:function(){window.location.reload(!0)}})},getNum:function(){var i=$("#buy-num").val(),t=Number(i);return isNaN(t)?1:t},get:function(t){var e=this,n=this.getNum(),o=this.price.p*Number(n),a=$.extend({},t,{sku:this.sku,cId:this.cat.join(","),num:this.getNum(),amount:o,sourceType:"PC-XQ",shopId:pageConfig.product.venderId,ver:1,areaId:s.getAreaId().areaIds[0],isJd:i.isPop});$.ajax({url:this.URL,dataType:"jsonp",data:a,scriptCharset:"utf-8",jsonpCallback:this.JSONP_CALLBACK_NAME,timeout:2e3,error:function(){"undefined"!=typeof console&&console.error("Baitiao service error with timeout."),i.log(null,"baitiao.js","Baitiao service error with timeout.")},success:function(t){/debug=bt/.test(location.href)&&(t.isDiscountAll=!0,t.marketingText="\u6d4b\u8bd5\u6587\u5b57"),t&&t.result&&t.result.isSuccess?e.set(t):i.log(null,"baitiao.js","Baitiao service error.")}})},destory:function(){this.hide(),this.hideBtn(),this.$el.html("")},set:function(i){if(!pageConfig.hasCarGift){if(i.planInfos&&i.planInfos.length){if(this.key=i.key,this.isAva=i.isAva,!i.isAva)return this.destory(),!1;this.$el.html(n.TEMPLATE.process(i)),this.showItem(),this.hideBtn(),this.enabled(),this.setTips(i),t.fire({type:"onBaiTiaoRender"})}this.setBTLink()}},setTips:function(i){this.$el.find(".J-bt-tips").length&&this.$el.find(".J-bt-tips").show().ETooltips({close:!1,content:'            <div id="J-bt-tips">                <div class="g-tips-inner">                    <i></i><em></em>                    <ul>                        <li>1\u3001\u767d\u6761\u7684\u5b9e\u9645\u5206\u671f\u91d1\u989d\u3001\u5206\u671f\u670d\u52a1\u8d39\u3001\u53ef\u7528\u989d\u5ea6\u53ca\u5206\u671f\u4f18\u60e0\u4ee5\u6536\u94f6\u53f0\u5c55\u793a\u4e3a\u51c6\u3002</li>                        <li>2\u3001\u4ec0\u4e48\u662f\u767d\u6761\u5206\u671f\uff1f<br />                        \u767d\u6761\u662f\u4e00\u79cd\u201c\u5148\u6d88\u8d39\uff0c\u540e\u4ed8\u6b3e\u201d\u7684\u652f\u4ed8\u65b9\u5f0f\uff0c\u4f7f\u7528\u767d\u6761\u53ef\u4ee5\u4eab\u53d7\u5148\u7528\u540e\u4ed8\uff0c\u4ee5\u53ca\u6700\u957f36\u671f\u7684\u5206\u671f\u8fd8\u6b3e\u3002</li>                    </ul>                </div>            </div>',width:300,pos:"bottom",zIndex:10}),this.$el.find(".J-icon-hui").length&&this.$el.find(".J-icon-hui").show().ETooltips({close:!1,content:i.marketingText,pos:"bottom",width:200,zIndex:10})},disabled:function(){this.$el.find(".item").addClass("disabled").removeClass("selected"),this.showTips("yb"),this.hideBtn()},enabled:function(){this.enable=!0,this.enable&&this.$el.find(".item").removeClass("disabled"),this.showTips("none")},select:function(i,e){var s=i.attr("data-snum");this.hasSelectedItem=!e,e?(this.snum=s,this.showBtn(),this.clearYbService()):(this.snum=null,this.hideBtn()),this.setBTLink(),t.fire({type:"onBaiTiaoSelect",isSelect:e}),this.onSelected(e)},clearYbService:function(){$("#choose-service .item").each(function(){$(this).removeClass("selected")})},isDisabledToShow:function(i){return i.isHeYue||i.isYuShou||i.isBiGouMa||!i.havestock||i.__chooseShop&&i.__chooseShop.selected||this.isHWAdd()||i.isJinCai||pageConfig.hasCarGift},showItem:function(){this.isDisabledToShow(this.cfg)?this.hide():(this.show(),this.isAva&&this.getJinCai())},getJinCai:function(){this.$jc.length&&$.ajax({url:"//cd.jd.com/userLevel/info",dataType:"jsonp",success:$.proxy(this.setJinCai,this)})},setJinCai:function(i){(this.cfg.isJinCai=i&&i.userLevel&&90===i.userLevel)?(this.$jc.show(),this.$jc.find(".J-bt-tips").ETooltips({close:!1,content:"<strong>\u4ec0\u4e48\u662f\u4f01\u4e1a\u91d1\u91c6\uff1f</strong>\u4f01\u4e1a\u91d1\u91c6\u662f\u4e3a\u4f18\u8d28\u4f01\u4e1a\u5ba2\u6237\u63a8\u51fa\u7684\u4e00\u6b3e\u201c\u5148\u91c7\u8d2d\u3001\u540e\u4ed8\u6b3e\u201d\u7684\u4fe1\u7528\u652f\u4ed8\u4ea7\u54c1\u3002\u4f01\u4e1a\u91d1\u91c6\u5ba2\u6237\u53ef\u4eab\u53d7\u201c\u5468\u7ed321\u5929\u514d\u606f\u201d\u6216\u201c\u6708\u7ed3\u4f4e\u606f\u5206\u671f\u201d\u7684\u5ef6\u671f\u4ed8\u6b3e\u4f53\u9a8c\u3002",width:300,pos:"bottom",zIndex:10}),this.hide()):this.hideJCItem()},hideJCItem:function(){this.$jc.hide(),this.$jc.find(".item").removeClass("selected")},showJCBtn:function(){this.$jcBtn.show()},handleJC:function(i){var t=$(i.currentTarget);t.toggleClass("selected");var e=t.hasClass("selected");this.cfg.isJinCaiSelected=e,e?(this.showJCBtn(),this.cfg.oneKeyBuyBtn.hide()):(this.hideJCBtn(),this.cfg.oneKeyBuyBtn.show())},hideJCBtn:function(){this.$jcBtn.hide()},show:function(){this.$el.show()},hide:function(){this.$el.hide()},hideBtn:function(){this.$btn.hide()},showBtn:function(){var i=$("#choose-shop-show .selected").attr("data-index");this.isDisabledToShow(this.cfg)||"0"==i||this.$btn.show(),0==i&&pageConfig.product.__chooseShop.showShopTips()},setBTLink:function(){var i=pageConfig.giftSelectedSkuids?pageConfig.giftSelectedSkuids.join(","):"",t={pid:this.sku,cid:this.cat[2],num:this.getNum(),snum:this.snum,key:this.key,gids:i,did:this.did};this.snum?this.$btn.attr("href","//bttrade.jd.com/shopping/order/getOrderInfo.action?"+$.param(t)):this.$btn.attr("href","#none")},showTips:function(i){var t=pageConfig.hasYbService?"<em>\u589e\u503c\u4fdd\u969c\u4e0d\u652f\u6301\u4e00\u952e\u6253\u767d\u6761 </em>":"",e={yb:t,none:""};this.$el.find(".J-baitiao-text").html(e[i])}};function o(i){var e=$("#choose-baitiao");if(!e.length)return!1;t.addListener("onPriceReady",function(t){if(!(!pageConfig.product.isYuShou&&$("#banner-miaosha").length<=0&&i.skuMarkJson&&i.skuMarkJson.pg)){var s=t.price;i.baiTiaoFenQi=new n({$el:e,price:s,sku:i.skuid,cat:i.cat,cfg:i})}})}module.exports.__id="baitiao",module.exports.init=o});
/*!Name: summary.js
 * Date: 2019-4-4 18:53:52 */
define("MOD_ROOT/summary/summary",function(require,exports,module){require("//static.360buyimg.com/item/assets/address/area");var t=common_getAreaMap(),e=require("JDF_UNIT/login/1.0.0/login"),i=require("MOD_ROOT/common/tools/tools"),s=require("MOD_ROOT/common/tools/event").Event,n=require("MOD_ROOT/common/core"),o=require("MOD_ROOT/address/stock");require("JDF_UI/dialog/1.0.0/dialog");function d(t){var e=$("#choose-competition"),i=e.find(".J-dest a"),s=e.find(".J-count .dd");if(!t.isLOC3||!i.length)return!1;function n(){var e=$.param({addressId:t.locMatch.addressId,coordinate:t.locMatch.coordinate,detailAddress:t.locMatch.detailAddress});e.skuId=t.skuid,$("body").dialog({width:900,height:470,title:"\u5730\u56fe",type:"iframe",maskClose:!0,autoIframe:!1,source:"//cd.jd.com/acty?"+e})}1!==t.locMatchIsExpire&&setTimeout(function(){t.addToCartBtn.setDisable()},100),i.click($.proxy(n,this)),function(t){$.ajax({url:"//cd.jd.com/acty/info?skuId="+t.skuid,dataType:"jsonp",success:function(e){e&&(s.text(e.availableStockNum),e.availableStockNum||t.addToCartBtn.setDisable())}})}(t)}var a={init:function(t,e){return this.$el=e||$("#choose-thmd"),this.cfg=t,this.sid=1,this.cid="",this.ccid="",this.pid="",this.selected=!1,!!this.$el.length&&(this.$el.find(".item a").prepend('<i class="icon-o2o"></i>'),this.text=this.$el.find(".dd .item a").text(),this.bindEvent(),this)},bindEvent:function(){this.$el.undelegate("click"),this.$el.delegate(".item,.J-mod","click",$.proxy(this.openIframe,this)),this.cfg.addToCartBtn.$el.bind("click",$.proxy(this.handleBuyBtnClick,this)),this.$el.delegate(".J-cancel","click",$.proxy(this.reset,this)),s.addListener("onNumChange",$.proxy(this.setBtnLink,this))},handleBuyBtnClick:function(){if(!this.selected)return this.highLightSelect(),this.showTips(),!1},highLightSelect:function(){this.$el.addClass("item-hl-bg")},normalSelect:function(){this.$el.removeClass("item-hl-bg")},getMapUrl:function(e,s){var n=i.getAreaId().areaIds;var o={storeGroupId:e.storeGroupId||"",venderId:e.venderId,pName:escape(this.cfg._area.provinceName),isNarrow:+!(pageConfig.wideVersion&&pageConfig.compatible),provinceId:n[0],cityId:n[1],countyId:n[2],shopId:this.sid,skuId:this.cfg.skuid};this.cfg.isZx&&this.cfg.decorationCurrentCityIds&&(o.pName=escape(t.provinceMap[this.cfg.decorationCurrentCityIds[0]]),o.provinceId=this.cfg.decorationCurrentCityIds[0],o.cityId=this.cfg.decorationCurrentCityIds[1]),s&&(o.modifyFlag="true",o.pid=this.pid,o.cid=this.cid,o.ccid=this.ccid);return"//item.jd.com/loco2oshop?"+$.param(o)},openIframe:function(t){var e=$(t.currentTarget).is(".J-mod"),i=this.getMapUrl(this.cfg,e);$("body").dialog({width:900,height:520,title:"\u9009\u62e9\u95e8\u5e97",type:"iframe",autoIframe:!1,iframeTimestamp:!1,source:i,onReady:function(){$("#dialogIframe").css("height","100%")}})},setResult:function(t,e,i,n,d){t=t||"",i=i||"",n=n||1,d=d||1,e=e||"",this.selected=!0,this.sid=t,this.cid=n,this.ccid=d,this.name=e,this.pid=i,e.length>25&&(e=e.substr(0,25)+"..."),this.$el.find(".item").addClass("selected"),this.normalSelect(),this.showOperate(),this.hideTips(),this.setContent(e),this.setBtnLink(t),new o({storeId:t},function(t){var e=this;s.fire({type:"onStockReady",area:{id:e.areas},stock:t})})},setContent:function(t){this.$el.find(".item a").html('<i class="icon-o2o"></i>'+t)},setBtnLink:function(t){var e=this.cfg.addToCartBtn.$el,i=e[0].href;i=t&&"object"!=typeof t?n.modifyURL(i,{query:{pcount:$("#buy-num").val(),lsid:t}}):n.modifyURL(i,{query:{pcount:$("#buy-num").val()}}),this.selected=!0,this.cfg.addToCartBtn.enabled(i)},showTips:function(){this.$el.find(".J-msg").show()},hideTips:function(){this.$el.find(".J-msg").hide()},showOperate:function(){this.$el.find(".J-operate").show()},hideOperate:function(){this.$el.find(".J-operate").hide()},reset:function(){this.selected=!1,this.$el.find(".item").removeClass("selected"),this.setContent(this.text),this.hideOperate(),this.hideTips()}};window.PeriodicalBuy={isBinded:!1,init:function(t){this.$el=$("#choose-period-buy"),this.cfg=t,this.$el.length&&(this.get(),this.bindEvent())},bindEvent:function(){this.isBinded||($(document).bind("click",$.proxy(this.handleCloseAll,this)),this.$el.delegate(".period-more","click",function(){return!1}),this.$el.delegate(".item","click",$.proxy(this.handleClick,this)),this.$el.find(".service-tips").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),this.isBinded=!0)},handleCloseAll:function(t){$(t.target).is(".period-inner")||this.closeAll()},closeAll:function(){this.$el.find(".item").removeClass("selected")},handleClick:function(t){var i=this;e({modal:!0,complete:function(e){e&&e.Identity&&e.Identity.IsAuthenticated&&i.itemSelect($(t.currentTarget))}})},itemSelect:function(t){var e=t.hasClass("selected"),i=t.attr("data-pid"),s=this.$el.find(".item"),n=s.filter('[data-pid="'+i+'"]');this.closeAll(),e?t.removeClass("selected"):(t.addClass("selected"),n.data("loaded")||(this.openIframe(n),n.data("loaded",!0)))},openIframe:function(t){var e=t.find("iframe");e.attr("src",e.attr("data-src"))},get:function(){var t="//ding-server.jd.com/plan/queryFrequencies?skuId="+this.cfg.skuid;$.ajax({url:t,dataType:"jsonp",success:$.proxy(this.set,this)})},set:function(t){t&&"200"===t.code&&t.result.data&&(this.$el.show(),this.renderItem(t.result.data),this.setDiscount(t.result.data.regularDiscount))},setDiscount:function(t){if(t){var e=10*t+"";this.$el.find(".J-discount").text(e.substr(0,3))}},renderItem:function(t){this.$el.find(".J-period-wrap").html('            {for item in frequencyEnumList}            <div class="item" data-pid="${item.id}" clstag="shangpin|keycount|product|dingqigou_${item.value}">                <a href="#none" class="period-inner">${item.value}</a>                <div class="period-more">                    <iframe style="width:100%;height:100%" data-src="${item.url}" frameborder="0" scrolling="no"></iframe>                </div>            </div>            {/for}'.process(t))}};function c(t){d(t),setTimeout(function(){t.chooseLOCShop=a.init(t)},100)}module.exports.init=c});
/*!Name: o2o.js
 * Date: 2019-4-4 18:53:51 */
"use strict";define("MOD_ROOT/o2o/o2o",function(require,exports,module){var t=require("MOD_ROOT/common/core"),i=require("MOD_ROOT/common/tools/tools"),e=require("MOD_ROOT/common/tools/event").Event,s=require("MOD_ROOT/vehicle/vehicle"),n={init:function(t,i){return this.$el=t,this.$btn=$("#choose-btn-shop"),this.$baitiao=$("#choose-baitiao"),this.cfg=i,this.selected=!1,this.$btn.after('<a href="#none" style="display:none;" id="choose-btn-deli-shop" class="btn-special1 btn-lg">\u7acb\u5373\u8d2d\u4e70</a>'),this.$deliBtn=$("#choose-btn-deli-shop"),!(!this.$el.length||!this.$btn.length)&&(-1!=$.inArray("isFreeload-2",i.specialAttrs)?this.hasAddedService():this.hasBindSale(),this)},bindEvent:function(){this.$el.undelegate("click"),this.$el.delegate(".item,.J-mod","click",$.proxy(this.openIframe,this)),this.$el.delegate(".J-cancel","click",$.proxy(this.reset,this)),this.$el.delegate("#deli-to-shop","click change",$.proxy(this.handleCheck,this)),e.addListener("onNumChange",$.proxy(this.setBtnLink,this,"numberchange")),e.addListener("onAreaChange",$.proxy(this.handleAreaChange,this))},handleAreaChange:function(){this.cfg.havestock&&this.selected?this.enableBtn():this.disableBtn()},openIframe:function(){var t="",e={},n=i.getAreaId().areaIds,h="",a=$("#choose-car"),o=a.find(".vehicle.selected");a.length>0&&o.length>0&&(h=o.attr("data-modelid")),"carService"==this.btnType?(t="//nbhome.jd.com/carService/pc/index.html?",e={skuId:this.cfg.skuid,provinceId:n[0],cityId:n[1],countyId:n[2],num:$("#buy-num").val(),cm:h}):"bindSale"==this.btnType&&(t="//nbhome.jd.com/locshop/index.html?",e={skuId:this.cfg.skuid,cat:this.cfg.cat.join(","),pName:escape(this.cfg._area.provinceName),addrCodeLv1:n[0],addrCodeLv2:n[1],addrCodeLv3:n[2],venderId:this.cfg.venderId,modifyFlag:!!this.selected,sku:this.sku||"",sid:this.sid||"",num:this.num||"",name:this.name||"",price:this.price||"",provider:this.provider||"",coor:this.coor||"",currentPage:1,pageSize:10,cm:h},this.selected&&this.ext&&(e.ext=this.ext.join(",")));var d=s.getGiftSkus();d&&(e.giftId=d),$("body").dialog({width:900,height:520,title:"\u9009\u62e9\u95e8\u5e97",type:"iframe",autoIframe:!1,source:t+$.param(e),onReady:function(){$("#dialogIframe").css("height","100%")}})},setResult:function(t,i,e,s,n,h,a,o){t=t||"",i=i||"",s=s||"",n=n||1,e=e||"",h=h||"",this.selected=!0,this.sku=t,this.sid=i,this.num=n,this.name=e,this.price=s,this.provider=h,this.coor=a,this.ext=o,e.length>25&&(e=e.substr(0,25)+"...");var d="{0} \uffe5{1}&times;{2}".format(e,s,n);h="\u7531 {0} \u63d0\u4f9b\u670d\u52a1".format(h),this.$el.find(".item").addClass("selected"),this.setContent(d,h,o),this.setBtn(),this.setBtnLink(),this.showResult(),this.handleCheck($("#deli-to-shop"))},isTargetItem:function(){return t.isJd&&!t.onAttr("factoryShip")&&9248===this.cfg.cat[2]},setContent:function(t,i,e){var s=i;"1"===e[1]&&this.isTargetItem()&&(s='            <span class="deli-to-shop J-deli-to-shop">                <input type="checkbox" id="deli-to-shop" checked>                <label for="deli-to-shop">\u9001\u8d27\u5230\u8be5\u5e97</label>                 <a href="//sale.jd.com/act/Ap5LHZw4uQV.html" class="hl_blue" target="_blank">\u8be6\u60c5</a>            </span>'+s),this.$el.find(".J-service-provider").html(s),this.$el.find(".item a").html('<i class="icon-o2o"></i>'+t)},getDeliBtnLink:function(){var t={skuId:this.cfg.skuid,serviceSku:this.sku,skuNum:$("#buy-num").val(),saleNum:this.num,locShopId:this.sid,isStore:1};return"//bundlingsale.jd.com/bundlingOrder/getOrderInfo.action?"+$.param(t)},handleCheck:function(t){(t instanceof $?t:$(t.currentTarget)).is(":checked")?(this.$deliBtn.show().attr("href",this.getDeliBtnLink()),this.hideBtn(),this.cfg.addToCartBtn.hide()):(this.$deliBtn.hide(),this.setBtn())},setBtnLink:function(t){if(!t||"numberchange"!=t||this.isO2oCanGoCart){if(t&&"numberchange"==t){var i=$("#InitCartUrl").attr("href");i&&-1==i.indexOf("none")&&(this.originalCartLink=i)}this.originalCartLink&&(this.originalCartLink=this.originalCartLink.replace(/(.*pcount=)(\d*)(.*)/,"$1"+$("#buy-num").val()+"$3")),this.cfg.addToCartBtn.$el.hasClass("btn-disable")||this.cfg.addToCartBtn.$el.attr("href",this.originalCartLink)}},showBtn:function(){this.$btn.show()},hideBtn:function(){this.$btn.hide()},enableBtn:function(){this.$btn.removeClass("btn-disable"),this.buyUrl&&this.$btn.attr("href",this.buyUrl)},disableBtn:function(){this.$btn.addClass("btn-disable"),this.$btn.attr("href","#none")},setBtn:function(){this.showBtn(),this.cfg.havestock?this.enableBtn():this.disableBtn(),this.cfg.baiTiaoFenQi&&(this.cfg.baiTiaoFenQi.showItem(),this.cfg.baiTiaoFenQi.hideBtn()),this.cfg.addToCartBtn.hide(),this.cfg.oneKeyBuyBtn.hide()},hasAddedService:function(){$.ajax({url:"//c.3.cn/addedService",data:{skuId:this.cfg.skuid},dataType:"jsonp",timeout:1e3,error:$.proxy(this.hasService,this),success:$.proxy(this.hasService,this)})},hasService:function(t){t&&t.isHave?(this.serviceClass="addedService",this.showChooseShop(),this.btnType="carService",this.bindEvent()):this.hasBindSale()},hasBindSale:function(){-1!=$.inArray("isActualServ-1",pageConfig.product.specialAttrs)&&$.ajax({url:"//c.3.cn/locshop/has",data:{skuId:this.cfg.skuid,cat:this.cfg.cat.join(",")},dataType:"jsonp",timeout:1e3,error:$.proxy(this.clearShop,this),success:$.proxy(this.setBindSale,this)})},setBindSale:function(t){t&&"true"===t.hasLocShop?(this.showChooseShop(),this.btnType="bindSale",this.bindEvent()):this.clearShop()},clearShop:function(){this.$el.hide(),this.clear()},showChooseShop:function(t){this.render(),this.$el.find(".dt").html("\u670d\u52a1\u95e8\u5e97"),this.renderShop(),this.$el.show()},render:function(){var t='                <div class="item '+this.serviceClass+'"                    clstag="shangpin|keycount|product|xuanzemendian_'+this.cfg.cat[2]+'">                    <b></b>                    <a href="#none"><i class="icon-o2o"></i>\u9009\u62e9\u95e8\u5e97\u8d2d\u4e70\u5b89\u88c5\u670d\u52a1</a>                </div>                <div class="J-operate operate fl hide">                    <a href="#none" class="J-mod">\u4fee\u6539</a>                    <a href="#none" class="J-cancel">\u53d6\u6d88</a>                </div>                <div class="J-service-provider service-provider hide"></div>';this.$el.find(".dd").html(t)},renderShop:function(){var t=this.cfg.specialAttrs.join(",").indexOf("psdd-2")>-1,i='<div id="choose-shop-show" class="li">               <div class="dt">\u53ef\u9009\u670d\u52a1</div>               <div class="dd">               <div class="item selected" data-index="0">                    <b></b>                    <a href="#none">\u5230\u5e97\u5b89\u88c5</a>                </div>';i+=t?"                </div>                </div>":'                    <div class="item" data-index="1">                        <b></b>                        <a href="#none">\u65e0\u9700\u5b89\u88c5</a>                    </div>                </div>                </div>',this.$el.before(i),this.bindShopEvent()},bindShopEvent:function(){var t=this;t.originalCartLink=$("#InitCartUrl").attr("href"),t.disabeAddToCartBtn(),$("#choose-shop-show").delegate(".item","click",function(){var i=$(this),e=i.attr("data-index");if($("#choose-shop-show .item").removeClass("selected"),i.addClass("selected"),0==e){t.$el.show(),$("#btn-baitiao").hide();var n=$("#InitCartUrl").attr("href");n&&-1==n.indexOf("none")&&(t.originalCartLink=n),t.disabeAddToCartBtn()}else 1==e&&(t.isO2oCanGoCart=!0,t.sid="",t.$el.hide(),t.setBtnLink("noNeedInstall"),$("#choose-baitiao .selected").length>0&&$("#btn-baitiao").show(),t.cfg.addToCartBtn.enabled(t.originalCartLink),s.setCartBtn())})},disabeAddToCartBtn:function(){var t=this;t.cfg.addToCartBtn.$el.attr("href","#none"),t.isO2oCanGoCart=!1,t.cfg.addToCartBtn.enabled(),t.cfg.addToCartBtn.$el.unbind("click",$.proxy(this.showShopTips,this)).bind("click",$.proxy(this.showShopTips,this))},showShopTips:function(){var t=this;if(t.$el.addClass("item-hl-bg"),!$(".display-tips").length){t.$el.append('<div class="fl display-tips">\u8bf7\u9009\u62e9\u95e8\u5e97</div>')}},showResult:function(){this.$el.find(".J-operate,.J-service-provider").show()},hideResult:function(){this.$el.find(".J-operate,.J-service-provider").hide()},reset:function(){this.selected=!1,this.$el.find(".item").removeClass("selected"),this.render(),this.hideResult(),this.hideBtn(),this.$baitiao.show(),this.cfg.addToCartBtn.show(),this.cfg.baiTiaoFenQi&&(this.cfg.oneKeyBuyBtn.showBtn(),this.cfg.baiTiaoFenQi.showItem())},clear:function(){this.$el.find(".dd").html("")}};function h(t){var i=$("#choose-shop");t.__chooseShop=n.init(i,t)}module.exports.__id="o2o",module.exports.init=h});
/*!Name: buybtn.js
 * Date: 2019-4-4 18:53:50 */
define("MOD_ROOT/buybtn/buybtn",function(require,exports,module){require("JDF_UI/dialog/1.0.0/dialog"),require("PLG_ROOT/jQuery.scroller");var t=require("MOD_ROOT/common/core"),i=require("MOD_ROOT/common/tools/event").Event,e=require("MOD_ROOT/common/tools/tools"),s=require("MOD_ROOT/buybtn/onekey"),n=require("MOD_ROOT/colorsize/colorsize"),a=require("MOD_ROOT/buybtn/reservation"),d=require("MOD_ROOT/buybtn/ko"),o=require("MOD_ROOT/buybtn/bigouma"),h=require("JDF_UNIT/notif/1.0.0/notif"),r=require("JDF_UNIT/login/1.0.0/login");window.setAmount={init:function(){if(this.min=1,this.max=200,this.count=1,this.disableAdd=!1,this.disableReduce=!0,this.$buyNum=$("#buy-num"),this.$buyBtn=$("#InitCartUrl,#InitCartUrl-mini"),this.$add=$("#choose-btns .btn-add"),this.$reduce=$("#choose-btns .btn-reduce"),this.matchCountKey=["pcount","pCount","num","buyNum","number"],this.$buyNum.length<1)return!1;/debug=num/.test(location.href)&&(this.$buyNum.attr("data-min","5"),this.$buyNum.attr("data-max","10"));var t=this.$buyNum.data("min"),i=this.$buyNum.data("max");i&&(this.max=i),t&&(this.min=t,this.count=t),this.checkLimit(),this.handleChange(),this.bindEvent()},bindEvent:function(){var t=this;this.$buyNum.unbind("change keydown keyup").bind("change keydown keyup",e.throttle($.proxy(this.handleChange,this),500)),i(this.$reduce,"{0} \u6700\u5c11\u8d2d\u4e70 {1} \u4ef6"),i(this.$add,"{0} \u6700\u591a\u8d2d\u4e70 {1} \u4ef6");function i(i,e){i.ETooltips({close:!1,content:'<div class="min-buy-tips"></div>',width:150,position:"bottom",zIndex:10,onOpen:function(){this.$tooltips.find(".min-buy-tips").html(e.format('<img src="//img20.360buyimg.com/da/jfs/t2734/145/4239060100/1006/b6d0f0d8/57b4240fN9cc48b02.png" />',t.$buyNum.val()))}})}},disabledReduce:function(t){this.disableReduce=!0,this.disableAdd=!1,this.$reduce.addClass("disabled"),this.$add.removeClass("disabled"),this.$add.attr("data-disabled","1"),t?this.$reduce.removeAttr("data-disabled"):this.$reduce.attr("data-disabled","1")},disabledAdd:function(t){this.disableAdd=!0,this.disableReduce=!1,this.$add.addClass("disabled"),this.$reduce.removeClass("disabled"),this.$reduce.attr("data-disabled","1"),t?this.$add.removeAttr("data-disabled"):this.$add.attr("data-disabled","1")},enabledAll:function(){this.disableAdd=!1,this.disableReduce=!1,this.$reduce.removeClass("disabled").attr("data-disabled","1"),this.$add.removeClass("disabled").attr("data-disabled","1")},getVal:function(){return this.$buyNum.val()},setVal:function(t){this.$buyNum.val(t)},checkLimit:function(){var t=this.$buyNum.data("min"),i=Number(this.getVal());i<=1&&this.disabledReduce(),i>=this.max&&this.disabledAdd(!0),i>1&&i<this.max&&this.enabledAll(),t&&i===this.min&&this.disabledReduce(!0)},isEmpty:function(t){return""==$.trim(t)},isFloat:function(t){return Number(t)===t&&t%1!=0},add:function(){var t=Number(this.getVal());return!this.disableAdd&&!this.isEmpty(t)&&(t>this.min&&(this.disableReduce=!1),t>=this.max?(this.setDisabled(this.$add),this.disableAdd=!0,!1):(this.disableAdd=!1,this.setEnabled(this.$add),this.count++,this.setVal(this.count),this.checkLimit(),void this.setBuyLink()))},reduce:function(){var t=Number(this.getVal());return!this.disableReduce&&!this.isEmpty(t)&&(t<this.max&&(this.disableAdd=!1),t<=this.min?(this.setDisabled(this.$reduce),this.disableReduce=!0,!1):(this.setEnabled(this.$reduce),this.disableReduce=!1,this.count--,this.setVal(this.count),this.checkLimit(),void this.setBuyLink()))},handleChange:function(){var t=this.getVal(),i=null;isNaN(Number(t))||this.isEmpty(t)||this.isFloat(Number(t))?i=this.count:(t<this.min&&(i=this.min,this.disabledReduce(1!==i)),t>this.max&&(i=this.max,this.disabledAdd(!0))),i?(this.count=i,this.$buyNum.val(i)):this.count=Number(t),this.checkLimit(),this.setBuyLink()},modify:function(){},setDisabled:function(t){t.attr("data-disabled",1)},setEnabled:function(t){t.removeAttr("data-disabled")},setBuyLink:function(){var t=this;t.$buyBtn.each(function(){var i,e,s=$(this),n=s.attr("href"),a=n.split("?")[1];!function(){for(var d=0;d<t.matchCountKey.length;d++)if(e=new RegExp(t.matchCountKey[d]+"=\\d+"),e.test(a))return i=n.replace(e,t.matchCountKey[d]+"="+t.count),s.attr("href",i),!1}()}),i.fire({type:"onNumChange",count:this.count})}},setAmount.init();var l={init:function(t){return this.cfg=t,this.$el=$("#InitCartUrl,#InitCartUrl-mini"),this.cName="btn-disable",this.originHref=this.$el.attr("href"),this.href=this.$el.attr("href"),this.bindEvent(t),this},reInit:function(t){var i='<a href="'+this.cfg.addToCartUrl+'" id="InitCartUrl" class="btn-special1 btn-lg" clstag="shangpin|keycount|product|\u52a0\u5165\u8d2d\u7269\u8f66_1">\u52a0\u5165\u8d2d\u7269\u8f66</a>';$("#InitCartUrl").length<1&&t.before(i),this.init(this.cfg),this.disabled(),this.enabled()},bindEvent:function(t){var e=this;function s(){t.havestock?e.enabled():e.disabled()}i.addListener("onStockReady",s)},show:function(){if(this.cfg.isHeYue||this.cfg.isYuShou||this.cfg.isBiGouMa||this.cfg.isKO)return!1;this.$el.show()},hide:function(){this.$el.hide()},updateNum:function(t){var i=$("#buy-num").val();if(t)return t.replace(/(nums|num|pcount|buyNum|number)=\d+/g,"$1="+i)},disabled:function(){var t=this.$el.attr("href");return this.$el.addClass(this.cName),this.$el.attr("href","#none"),t},enabled:function(t){if(t=this.updateNum(t||this.href),this.cfg.isClosePCShow||!this.cfg.havestock)return!1;this.setEnable(t)},setEnable:function(t){this.$el.removeClass(this.cName),this.href=t,"0"!=$("#choose-shop-show .selected").attr("data-index")&&this.$el.attr("href",t)},setDisable:function(){return this.disabled()}},u={init:function(t){return this.cfg=t,this.$el=$("#btn-notify"),h({el:$(".J-notify-sale")}),h({el:$(".J-notify-stock")}),this.bindEvent(),this},show:function(){this.cfg.havestock||this.cfg.unSupportedArea?this.hide():this.$el.show()},hide:function(){this.$el.hide()},bindEvent:function(){var t=this;i.addListener("onStockReady",function(){t.show()})}},c={init:function(t){return this.cfg=t,this.$el=$("#choose-btn-jnbt"),this.$el.length&&this.bindEvent(),this},isTargetArea:function(){return 1===e.getAreaId().areaIds[0]},changeArea:function(){this.$el.length<1||(this.show(),this.cfg.havestock?this.enabled():this.disabled())},bindEvent:function(){i.addListener("onStockReady",$.proxy(this.changeArea,this));var t=this.$el;seajs.use("MOD_ROOT/ETooltips/ETooltips",function(){t.ETooltips({close:!1,content:"<p>1. \u70b9\u51fb\u53c2\u52a0\u8282\u80fd\u8865\u8d34\u6309\u94ae\u8d2d\u4e70\uff0c\u6700\u9ad8\u53ef\u51cf\u514d800\u5143\uff01</p>                 <p>2. \u8282\u80fd\u8865\u8d34\u9762\u5411\u5317\u4eac\u5730\u533a\u7684\u7528\u6237\uff0c\u9700\u60a8\u6536\u8d27\u5730\u5740\u4e3a\u5317\u4eac\u4e14\u63d0\u4f9b\u76f8\u5e94\u8bc1\u4ef6\u8bc1\u660e\uff0c                \u6700\u9ad8\u53ef\u4eab\u5546\u54c1\u91d1\u989d13%\u7684\u51cf\u514d\uff08\u4e0a\u9650800\u5143\uff09\uff0c\u5e76\u540c\u65f6\u652f\u6301\u4f7f\u7528\u4eac\u4e1c\u4f18\u60e0\u5238\uff0c                \u70b9\u51fb\u53c2\u52a0\u8282\u80fd\u8865\u8d34\u6309\u94ae\u7acb\u5373\u4f53\u9a8c\uff01</p> ",width:265,position:"bottom",zIndex:10})})},enabled:function(){this.cfg.havestock?(this.$el.removeClass("btn-disable"),this.$el.attr("href",this.$el.attr("dataurl"))):this.disabled()},disabled:function(){this.$el.addClass("btn-disable").attr("href","#none")},show:function(){this.isTargetArea()?this.$el.show():this.hide()},hide:function(){this.$el.hide()}},b=function(t){var e=$("#btn-dqs");if(0!=e.length){var s=t.shopId,n=t.specialAttrs.join("|").match(/isTimeOrder\-([^\|]*)/),a=n?+n[1]:0;if(3==a&&613998==s||5==a)var d="//ding-server.jd.com/period-buy-gm.html?skuId="+t.skuid+"&frequency=5";else{if(0==a)return void e.addClass("btn-disable");var d="//ding.jd.com/orderPlan/toCreateOrderPlan.action?skuId="+t.skuid+"&buyNum="+$("#buy-num").val()+"&r="+Math.random(),o=!0}i.addListener("onStockReady",function(){t.havestock?e.removeClass("btn-disable"):e.addClass("btn-disable")}),e.click(function(){$(this).hasClass("btn-disable")||(o&&(d="//ding.jd.com/orderPlan/toCreateOrderPlan.action?skuId="+t.skuid+"&buyNum="+$("#buy-num").val()+"&r="+Math.random()),r.isLogin(function(t){t?$("body").dialog({type:"iframe",width:720,height:360,title:"\u5b9a\u671f\u9001",autoIframe:!1,iframeTimestamp:!1,source:d}):r({modal:!0,complete:function(t){null!==t&&t.Identity&&t.Identity.IsAuthenticated&&$("body").dialog({type:"iframe",width:720,height:360,title:"\u5b9a\u671f\u9001",autoIframe:!1,iframeTimestamp:!1,source:d})}})}))})}},f=function(t){var i=$(".choose-btn-fqy"),e=i.attr("href");function s(){$.ajax({url:"//cd.jd.com/credit/verify?",data:{pin:readCookie("pin")},dataType:"jsonp",success:function(t){t&&"1"===t.accountStatus?location.href=e:$("body").dialog({width:360,title:"\u5206\u671f\u7528\u670d\u52a1\u63d0\u793a",type:"text",maskClose:!0,source:'<div class="ac"><h2>\u62b1\u6b49\uff0c\u60a8\u65e0\u6cd5\u4f7f\u7528\u5206\u671f\u7528\u670d\u52a1</h2></div><br>                            <p style="padding:10px 20px;">\u5206\u671f\u7528\u670d\u52a1\u76ee\u524d\u4ec5\u5bf9\u5f00\u901a\u4eac\u4e1c\u767d\u6761\u7684\u7528\u6237\u63d0\u4f9b\uff0c\u8bf7\u524d\u5f80 <a target="_blank" class="hl_blue" href="https://bt.jd.com/v3/activity/open">https://bt.jd.com/v3/activity/open</a> \u5f00\u901a\u4eac\u4e1c\u767d\u6761\u670d\u52a1</p>                            <br>                            <div class="ac"><a href="#none" onclick="$.closeDialog()" class="btn-def">\u597d\u7684</a></div>                            <br>'})}})}if(i.length){i.add("#InitCartUrl-mini").click(function(){return $(this).hasClass("btn-disable")||r({modal:!0,complete:function(){s()}}),!1})}};function m(t){var e=$(".J-sam-login-text"),s='\u5c71\u59c6\u4f1a\u5458\u4e13\u4eab\u5546\u54c1\uff0c\u8bf7<a target="_blank" href="//passport.jd.com/new/login.aspx?ReturnUrl='+location.href+'">\u767b\u5f55</a>\u786e\u8ba4\u8d2d\u4e70\u8d44\u683c',n='\u5c71\u59c6\u4f1a\u5458\u4e13\u4eab\u5546\u54c1\uff0c\u8bf7<a target="_blank" href="//cartv.jd.com/item/200100420635.html">\u6210\u4e3a\u5c71\u59c6\u4f1a\u5458</a>\u540e\u8d2d\u4e70';function a(t){$.ajax({url:"//cd.jd.com/sam/info?",dataType:"jsonp",success:function(i){t(i&&i.issam&&"1"===i.issam)}})}function d(i){h=i.login,i.login?a(function(i){r=i,i||(t.addToCartBtn.disabled(),e.html(n))}):e.html(s)}function o(){!1===h?e.html(s):!1===r&&(t.addToCartBtn.disabled(),e.html(n))}if(e.length){var h=null,r=null;i.addListener("onLogin",d),i.addListener("onStockReady",o)}}function g(e){var s=$("#btn-goCustomize2");s.length&&(s.unbind("click").bind("click",function(){if($(this).hasClass("btn-disable"))return!1;t.onAttr("Customize-2")?window.location.href="//dz.jd.com/customMade/toCustomizePC.action?pid="+e.skuid+"&pcount="+$("#buy-num").val():t.onAttr("Customize-3")&&$.ajax({type:"get",url:"//bespoke.jd.com/bespokeAddress/queryBespokeAddress?skuId="+e.skuid,dataType:"jsonp",jsonpCallback:"jsonpCall"}).done(function(t){t&&t.bespokeUrl&&(window.location.href=t.bespokeUrl)}).fail(function(t){console&&console.log(t)})}),i.addListener("onStockReady",function(){pageConfig.product.havestock?s.removeClass("btn-disable"):s.addClass("btn-disable")}))}function p(t){t.addToCartBtn=l.init(t),t.oneKeyBuyBtn=s.init(t),t.notifyBtn=u.init(t),t.bgmBtn=o.init(t),t.jnbtBtn=c.init(t),t.skuMarkJson&&t.skuMarkJson.pg?$("#yuyue-banner").remove():t.reservationBtn=a.init(t),t.koBtn=d.init(t),b(t),f(t),m(t),g(t),$("#InitCartUrl").click(function(){if(!n.highLighAttr()){var t=$("#prom-car-gift .J-prom-gift");if(t.length){var i=t.attr("data-id");if(i){var e=$(this).attr("href")+"&gids="+i;$(this).attr("href",e)}}var s=$("#choose-car"),a=s.find(".vehicle.selected");if(s.length>0&&a.length>0){var d=a.attr("data-modelid");if(d){var o=$(this).attr("href")+"&cm="+d;$(this).attr("href",o)}}}}),$("#btn-baitiao").unbind("click").bind("click",function(){n.highLighAttr()}),$("#InitCartUrl-mini").bind("click",function(){n.highLighAttr()&&$("html,body").scrollTop($(".product-intro").offset().top)})}module.exports.__id="buybtn",module.exports.init=p,module.exports.setAmount=setAmount,module.exports.addToCartBtn=l});
/*!Name: track.js
 * Date: 2019-4-4 18:53:52 */
define("MOD_ROOT/track/track",function(require,exports,module){require("PLG_ROOT/jQuery.imgScroll");var t=require("MOD_ROOT/common/tools/tools"),i=require("MOD_ROOT/common/tools/recommend"),e='        <ul clstag="shangpin|keycount|product|kanleyoukan_2">            {for item in data}            <li data-clk="${item.clk}"                 data-push="${pageConfig[skuHooks].push(item.sku)}">                <a target="_blank" title="${item.t}" href="//item.jd.com/${item.sku}.html">                    <img height="150" width="150" alt="${item.t}" src="${pageConfig.FN_GetImageDomain(item.sku)}n1/s150x150_${item.img}">                    <div>${item.t}</div>                     <p class="J-p-${item.sku}">\uffe5</p>                </a>            </li>            {/for}        </ul>';function o(t,i,e){var o=$.extend({SKU:pageConfig.product.skuid,venderId:pageConfig.product.venderId},t);return $.ajax({url:"//jshop-rec.jd.com/queryData.html",data:o,dataType:"jsonp",scriptCharset:"UTF-8",timeout:5e3,success:function(){"function"==typeof i&&i.apply(null,arguments)},error:function(){"function"==typeof onError&&e.apply(null,arguments)}})}function a(i,e){if(i.length&&e&&$.isArray(e.goodList)&&e.goodList.length){try{i.html('            <ul>                {for item in data.goodList}                    <li class="fore${+item_index+1}" data-sku="${item.skuId}" onclick=\'log("dztj_pc","dztj_all_click",pageConfig.product.venderId, "${+item_index+1}","${item.skuId}",pageConfig.product.skuid, "${data.strategyId}")\'>                        <a href="${item.skuId|itemUrl}" title="${item.wname}" target="_blank">                            <img width="150" height="150" alt="${item.wname}" class="" src="${item.skuId|imgDomain}n2/${item.imageurl}">                            <div>${item.wname}</div>                            <p class="J-p-${item.skuId}">\uffe5</p>                        </a>                    </li>                {/for}            </ul>'.process({data:e,_MODIFIERS:t.modifier}));var o=[];i.find("[data-sku]").each(function(){o.push($(this).data("sku"))}),t.priceNum({skus:o,$el:i}),i.removeClass("hide").show()}catch(t){console&&console.error(t)}}else i.hide()}function n(t){var n=$("#track");function c(){var t=n.find(".track-con"),i=n.find(".J-prev"),e=n.find(".J-next"),o=737==pageConfig.product.cat[0];t.imgScroll({width:150,height:188,visible:o?2:3,showControl:!1,step:o?2:3,direction:"y",loop:!0,prev:i,next:e})}function r(){s.html("\u770b\u4e86\u53c8\u770b"),new i({$el:l,skuHooks:"SKUS_track",template:e,ext:{title:"\u770b\u4e86\u53c8\u770b",imgWidth:180,imgHeight:180},param:{p:d,sku:t.skuid,lim:15,ck:"pin,ipLocation,atw,aview",pin:""},callback:c})}if(0!=n.length){var s=$(".track-tit h3",n),l=$(".track-con",n),d=l.data("rid");737==t.cat[0]?o().done(function(t){t&&$.isPlainObject(t.shopRec)&&!$.isEmptyObject(t.shopRec)?(s.html("\u5e97\u957f\u63a8\u8350"),a(l,t.shopRec),c()):r()}).fail(function(t,i,e){console&&console.error("\u5e97\u957f\u63a8\u8350\u6a21\u5757\u6570\u636e\u8c03\u7528\u5931\u8d25\uff0c\u5177\u4f53\u5982\u4e0b\uff1a\n"+e),r()}):r()}}module.exports.init=n,module.exports.__id="track"});
/*!Name: suits.js
 * Date: 2019-4-4 18:53:52 */
define("MOD_ROOT/suits/suits",function(require,exports,module){var t=require("MOD_ROOT/common/tools/event").Event,a=require("MOD_ROOT/common/tools/tools");require("MOD_ROOT/common/core");require("//static.360buyimg.com/item/assets/address/area");var e=common_getAreaMap();require("MOD_ROOT/EDropdown/EDropdown"),require("PLG_ROOT/jQuery.imgScroll"),require("MOD_ROOT/ETooltips/ETooltips");function i(t){return{item:'            <div class="item" data-pid="{0}">                <a href="#none" class="title"                     data-drop="head"                     data-pid="{0}"                     clstag="shangpin|keycount|product|xuanzetaozhuang_{1}">{2}</a>                <div class="suits-panel J-suits-panel"></div>            </div>',colorAttr:'            {for attr in list}                {if attr.attr=="color" && attr.data.length>0}                <div class="p-pic J-p-pic" data-type="${attr.attr}" data-value="${attr.data[0]}">                    <a href="#none" class="sprite-arrowL J-thumb-prev"></a>                    <a href="#none" class="sprite-arrowR J-thumb-next"></a>                    <div class="J-thumb-scroll thumb-scroll-wrap">                        <ul class="pic-list">                            {for color in attr.data}                            <li class="inner-list {if Number(color_index)==0} current{/if}" data-attr="${color}" data-imgsrc="${colorMap[color]}">                                <a href="#none"><img title="${color}" width="20" height="20" src="//img10.360buyimg.com/n1/s20x20_${colorMap[color]}" alt="${color}"/></a>                            </li>                            {/for}                        </ul>                    </div>                </div>                {else}                    {if attr.data.length}                    <select class="J-attr-check yb-item-cat" data-open="false" data-type="${attr.attr}" data-value="${attr.data[0]}">                        {for item in attr.data}                            <option value="${item}" title="${item}">${item}</option>                        {/for}                    </select>                    {/if}                {/if}            {/for}',packList:'            <div class="suits-box"">                <div class="J-scroll">                <ul class="lh clearfix">                    {for pool in poolList}                    {var isLastItem = Number(pool_index)+1==poolList.length}                    {var currItem = pool.colorList[0]}                    <li {if pool.colorList.length>3} data-scroll="true"{/if} class="J-sku-item sku-item {if isLastItem} last{/if} "                        data-push="${pageConfig.SKU_suits.push(currItem.skuId)}">                        <div class="p-img J-p-img">                            <a href="//item.jd.com/${currItem.skuId}.html" target="_blank">                                {if currItem.skuPicUrl}                                <img width="100" height="100" src="${pageConfig.FN_GetImageDomain(currItem.skuId)}n1/s100x100_${currItem.skuPicUrl}">                                {/if}                            </a>                            <div class="no-stock J-no-stock hide">${areaName}\u65e0\u8d27</div>                            <div class="no-item J-no-item hide">\u65e0\u6b64\u7ec4\u5408\u5546\u54c1</div>                        </div>                        <div class="J-attrs"></div>                        <div class="p-name J-p-name">                            <a href="//item.jd.com/${currItem.skuId}.html" target="_blank">${currItem.skuName}</a>                        </div>                        <div class="p-check-price-num">                            {if typeof pool.selectState!="undefined"&&pool.selectState!=1}<input type="checkbox" class="p-checkbox J-choose"/>{/if}                            {if typeof packType!="undefined"&&packType==6&&pageConfig.product.cat[2]==798}                                <strong class="p-price">\uffe5${parseFloat(currItem.finalPrice).toFixed(2)}</strong>                            {/if}                            {if typeof currItem.count!="undefined"&&currItem.count>1}<span class="J-count p-count">\xd7${currItem.count}</span>{/if}                            {if typeof pool.num!="undefined"&&pool.num>1}<span class="J-count p-count">\xd7${pool.num}</span>{/if}                        </div>                        <i class="plus">+</i>                    </li>                    {/for}                </ul>                </div>                {if poolList.length>3}                <a href="javascript:;" class="J-arrow arrow-prev disabled"><i class="sprite-arrow-prev"></i></a>                <a href="javascript:;" class="J-arrow arrow-next disabled"><i class="sprite-arrow-next"></i></a>                {/if}            </div>            <div class="suits-detail">                <div class="price-box">                    <div class="suits-price J-suits-price">                        <span class="text">\u5957\u88c5\u4ef7\uff1a</span>                        <span class="p-price">                            <strong {if suitType==1} class="J-p-${packId}"{/if}>\uffe5${parseFloat(packPromotionPrice).toFixed(2)}</strong>                        </span>                    </div>                    {var isHideSavePrice = typeof packType=="undefined" || packType!=6}                    <div class="suits-save-price J-suits-save-price {if isHideSavePrice} hide {/if}">                        <span class="text">\u8282\u7701</span><span class="p-price">                            <strong>{if typeof baseSuitDiscount!="undefined"}\uffe5${parseFloat(baseSuitDiscount).toFixed(2)}{/if}</strong>                        </span>                    </div>                </div>                <div class="btns">                    <a href="#none" class="btn-primary J-btn">\u8d2d\u4e70\u5957\u88c5</a>                </div>                <div class="suits-tips fr hl_red hide">\u5957\u88c5\u5185\u90e8\u5206\u5546\u54c1\u65e0\u8d27</div>            </div>'}[t]}var s={init:function(t,a){var e=this;e.$el=t||$("#choose-suits"),e.packList=[],e.cfg=a,e.packData={},e.$el.length&&(e.getData(),e.bindEvent(),e.isInited=!0)},getData:function(){var t=this;$.ajax({url:"//c.3.cn/recommend",data:{sku:t.cfg.skuid,cat:t.cfg.cat.join(","),area:a.getAreaId().areaIds.join("_"),methods:"suitv2",count:6},scriptCharset:"gbk",dataType:"jsonp",success:$.proxy(t.handleData,t)})},rePos:function(t){t.find(".J-suits-panel").css("top",t.position().top+t.height()-1)},bindEvent:function(){var a=this;a.isInited||(a.$el.undelegate(),$(document).bind("click.suit",$.proxy(a.handleDocumentClick,a)),a.$el.delegate(".item [data-pid]","click",$.proxy(a.handleClick,a)),a.$el.delegate(".J-thumb-scroll li","click",$.proxy(a.handleColorClick,a)),a.$el.delegate(".J-attr-check","change",$.proxy(a.handleAttrClick,a)),a.$el.delegate(".J-choose","change",$.proxy(a.handleChooseClick,a)),t.addListener("onHeYueReady",function(){a.cfg.isHeYue?a.$el.hide():a.$el.find(".item").length>0&&a.$el.show()}),t.addListener("onAreaChange",function(){s.init(a.$el,a.cfg)}))},handleData:function(t){var a=this;if(!t||200!=t.suit.status||!t.suit.data.packList||!t.suit.data.packList.length)return a.$el.find(".dd").empty(),a.$el.hide(),!1;a.renderItem(t.suit.data)},handleDocumentClick:function(t){var a=this;$(t.target).parents(".choose-suits").length<1&&($.browser.isIE7()||a.$el.find(".item").removeClass("open"))},handleClick:function(t){var a=this,e=$(t.target),i=e.data("pid"),s=e.parents(".item");if(s.hasClass("open"))return void s.removeClass("open");this.$el.find(".item").removeClass("open"),s.addClass("open"),this.$currSuit=e.next(".J-suits-panel"),e.data("loaded")||(this.setSuitContent(i),e.data("loaded",!0)),a.rePos(s)},renderItem:function(t){var a=this,e="",s=i("item");a.data=t;for(var r=t.packList,n=0,o=0;o<r.length;o++){var c=r[o];if(c.packType&&7==c.packType&&c.extType&&1==c.extType){if(0==$(".instant-promotion-suite").length){var l=$("#choose-shop .dd .item");l.length&&!l.hasClass("addedService")&&$("#choose-shop > .dd > .item").after('<div class="instant-promotion-suite bt-info-tips" data-title="\u9009\u62e9\u670d\u52a1\u8d2d\u4e70\u5546\u54c1\u7acb\u4eab\u4f18\u60e0\uff0c\u52a0\u5165\u8d2d\u7269\u8f66\u540e\u53d8\u4ef7"><a class="J-icon-hui prom icon fl" href="#none">\u3000</a></div>'),$("#choose-shop").find(".bt-info-tips").each(function(){$(this).data("title")&&$(this).ETooltips({pos:"bottom",zIndex:10,width:300,defaultTitleAttr:"data-title"})})}}else{var d="";n++,d=1==t.original?"\u4f18\u60e0\u5957\u88c5"+(o+1):c.packName,e+=s.format(c.packId,a.cfg.cat[2],d)}var u="";if(6==c.packType&&c.suitSkuPriceList)for(var p=0;p<c.suitSkuPriceList.length;p++){var h=c.suitSkuPriceList[p];h.skuId==t.mainSkuId&&(u=h.finalPrice)}1!=c.suitType&&c.poolList.unshift({selectState:1,colorList:[{skuPicUrl:t.mainSkuPicUrl,skuName:t.mainSkuName,skuId:t.mainSkuId,finalPrice:u}]}),c.poolList.sort(function(t,a){return t.selectState?t.selectState-a.selectState:1}),a.packData[c.packId]=c}0!=n&&(a.$el.find(".dd").html(e),a.$el.show())},handleAttrData:function(t){for(var a=t.attrSheme,e=t.colorMap,i=t.colorList,s=0;s<i.length;s++){var r=i[s];e[r.color]=r.skuPicUrl;for(var n=0;n<a.length;n++){var o=a[n].attr,c=r[o];a[n].data||(a[n].data=[]),c&&!function(t,a){var e="\u2299"+t.join("\u2299")+"\u2299",i="\u2299"+a+"\u2299";return e.indexOf(i)>-1}(a[n].data,c)&&a[n].data.push(c)}}},handleColorClick:function(t){var a=this,e=$(t.currentTarget),i=e.data("attr"),s=e.data("imgsrc");e.parent().find("li").removeClass("current"),e.addClass("current");var r=e.parents(".J-sku-item");r.find(".J-p-img img").attr("src","//img10.360buyimg.com/n1/s100x100_"+s),e.parents(".J-p-pic").attr("data-value",i);var n=e.parents(".item"),o=a.getEqualObjBySkuItem(r);o?(r.find(".J-p-img a").attr("href","//item.jd.com/"+o.skuId+".html").attr("target","_blank").removeClass("disabled"),r.find(".J-p-name a").attr("href","//item.jd.com/"+o.skuId+".html").attr("target","_blank").removeClass("disabled"),r.find(".J-p-name a").html(o.skuName),a.setBuyLink(n)):(r.find(".J-p-img a").attr("href","#none").removeAttr("target").addClass("disabled"),r.find(".J-p-name a").attr("href","#none").removeAttr("target").addClass("disabled"),r.find(".J-p-name a").html(""),a.setBuyLink(n))},handleAttrClick:function(t){var a=this,e=$(t.currentTarget),i=e.parents(".J-sku-item");e.attr("data-value",e.val());var s=e.parents(".item"),r=a.getEqualObjBySkuItem(i);r?(i.find(".J-p-img a").attr("href","//item.jd.com/"+r.skuId+".html").attr("target","_blank").removeClass("disabled"),i.find(".J-p-name a").attr("href","//item.jd.com/"+r.skuId+".html").attr("target","_blank").removeClass("disabled"),i.find(".J-p-name a").html(r.skuName),a.setBuyLink(s)):(i.find(".J-p-img a").attr("href","#none").removeAttr("target").addClass("disabled"),i.find(".J-p-name a").attr("href","#none").removeAttr("target").addClass("disabled"),i.find(".J-p-name a").html(""),a.setBuyLink(s))},handleChooseClick:function(t){var a=this,e=$(t.currentTarget),i=e.parents(".item");a.setBuyLink(i)},getEqualObjBySkuItem:function(t){var a=this,e=t.index(),i=t.find(".J-attrs").children(),s=t.parents("[data-pid]").attr("data-pid"),r={};$.each(a.data.packList,function(t,a){a.packId==s&&(r=a)});var n=r.poolList[e].colorList,o=n.slice(),c=null;return $.each(o,function(t,a){var e=!0;$.each(i,function(t,i){var s=$(i),r=s.attr("data-type"),n=s.attr("data-value");a[r]!=n&&(e=!1)}),e&&(c=a)}),c},setSuitContent:function(t){var s=this;pageConfig.SKU_suits=[];var r=s.packData[t],n=readCookie("areaId");r.areaName=e.provinceMap[n];var o=i("packList"),c=$(o.process(r));s.$currSuit.html(c);for(var l=0;l<r.poolList.length;l++){var d=r.poolList[l];if(d.colorList.length>1){d.attrSheme=[];for(var u=0;u<d.saleNames.length;u++)d.attrSheme.push({attr:d.saleNames[u]});d.colorMap={},s.handleAttrData(d);var p=i("colorAttr"),h=$(p.process({list:d.attrSheme,colorMap:d.colorMap}));c.find(".J-sku-item").eq(l).find(".J-attrs").html(h)}}s.checkIsAllCanSelect(r.poolList)&&s.$currSuit.find(".J-choose").eq(0).click(),this.initScroll(),r.poolList.length>3&&this.setScroll();var f=s.$currSuit.parents(".item");s.setBuyLink(f),1==r.suitType&&a.priceNum({skus:[r.packId],$el:this.$currSuit});var m=0,v=f.find(".J-suits-panel"),g=v.find(".J-sku-item");g.each(function(t,a){var e=$(a);e.height()>m&&(m=e.height())}),m+=10,g.parents("ul").height(m),g.parents(".J-scroll").height(m)},checkIsAllCanSelect:function(t){for(var a,e=!0,i=0;i<t.length;i++)if(a=t[i],1==a.selectState){e=!1;break}return e},setBuyLink:function(t){var a=this,e=t.attr("data-pid"),i=t.find(".J-suits-panel"),s=i.find(".J-sku-item"),r=!0,n=[a.cfg.skuid],o=[a.cfg.skuid],c=1==a.packData[e].suitType;if(!c)for(var l=1;l<s.length;l++){var d=s.eq(l),u=d.find(".J-choose"),p=!1;u.length?u.is(":checked")&&(p=!0):p=!0;var h=d.find(".J-no-stock"),f=d.find(".J-no-item"),m=a.getEqualObjBySkuItem(d);m?(f.hide(),m.stock?(u.removeProp("disabled"),h.hide(),p&&(o.push(m.skuId),n.push(m.skuId))):(h.show(),u.prop("disabled","disabled"),p&&(o.push(m.skuId),r=!1))):(f.show(),h.hide(),u.prop("disabled","disabled"),r=!1)}if(c||a.calPrice(t,e,o),!r)return void a.setBtnDisable(t);var v=t.find(".J-btn");v.removeClass("btn-disable");var g;if(c)g="//cart.jd.com/gate.action?pid="+e+"&pcount=1&ptype=1",v.attr("onclick",'log("product", "xuanzetaozhuang_button",'+e+")");else{var k="//cart.jd.com/gate.action?";a.cfg.isOtc&&!a.cfg.isPop&&(k="//cart.yiyaojd.com/gate.action?"),a.cfg.isCfy?(n.unshift(e),g="//rx.yiyaojd.com/cart_addItem.action?pid="+n.join("_")+"&ptype=4&pcount=1"):g=k+$.param({pid:e,pcount:1,ptype:3,sku:n.join(",")}),v.attr("onclick",'log("product", "xuanzetaozhuang_button","'+n.join(",")+'")')}v.attr("href",g)},calPrice:function(t,a,e){$.ajax({url:"//c.3.cn/suit/suitprice",data:{suitId:a,skuIds:e.join(","),origin:1,webSite:1},dataType:"jsonp",success:function(a){var e=t.find(".J-suits-price strong"),i=t.find(".J-suits-save-price strong");a&&a.packPromotionPrice?(e.html("\uffe5 "+a.packPromotionPrice.toFixed(2)),i.html("\uffe5 "+a.baseSuitDiscount.toFixed(2))):(e.html("\u6682\u65e0\u62a5\u4ef7"),i.html("\u6682\u65e0\u62a5\u4ef7"))}})},setBtnDisable:function(t){var a=t.find(".J-btn");a.addClass("btn-disable"),a.attr("href","#none")},initScroll:function(){this.$currSuit.find('[data-scroll="true"]').each(function(){var t=$(this).find(".J-thumb-scroll"),a=$(this).find(".J-thumb-prev"),e=$(this).find(".J-thumb-next");t.imgScroll({visible:3,step:3,prev:a,next:e,showControl:!0})})},setScroll:function(){var t=this.$currSuit.find(".J-scroll"),a=this.$currSuit.find(".arrow-prev"),e=this.$currSuit.find(".arrow-next");t.imgScroll({visible:3,step:3,prev:a,next:e})}};function r(t){var a=$("#choose-suits");s.init(a,t)}module.exports.__id="suits",module.exports.init=r});
/*!Name: crumb.js
 * Date: 2019-4-4 18:53:50 */
define("MOD_ROOT/crumb/crumb",function(require,exports,module){var i=require("MOD_ROOT/common/tools/tools");require("MOD_ROOT/EDropdown/EDropdown");var e=!1;function n(n,t){e||$.ajax({url:"//c.3.cn/brand/recommend",data:{skuId:n.skuid,cat:n.cat.join(","),brandId:n.brand},scriptCharset:"gbk",dataType:"jsonp",success:function(n){n&&n.items.length&&(e=!0,pageConfig.crumbBR=[],t.html('        {for item in items}        <li class="fore${pageConfig.crumbBR.push(item.id)}">            <div class="p-img">                <a href="//item.jd.com/${item.id}.html" target="_blank">                    <img width="65" height="65" alt="${item.base_info.name}" src="${pageConfig.FN_GetImageDomain(item.id)}n1/s65x65_${item.base_info.imageUrl}">                </a>            </div>            <div class="p-name">                <a href="//item.jd.com/${item.id}.html" target="_blank">${item.base_info.name}</a>            </div>            <div class="p-price">                <strong class="J-p-${item.id}">\uffe5</strong>            </div>        </li>        {/for}'.process(n)).show(),i.priceNum({skus:pageConfig.crumbBR,$el:t}))}})}function t(i){var e=$(".J-crumb-br");if(e.length<1)return!1;e.EDropdown({lazyload:"data-src",onOpen:function(){n(i,e.find(".content .br-reco"))}})}module.exports.__id="crumb",module.exports.init=t});
/*!Name: fittings.js
 * Date: 2019-4-4 18:53:50 */
define("MOD_ROOT/fittings/fittings",function(require,exports,module){var t=require("MOD_ROOT/common/tools/event").Event,e=require("MOD_ROOT/common/tools/tools"),i=require("MOD_ROOT/common/core");require("MOD_ROOT/ETab/ETab");var s='    {for item in data}    <li data-push="${pageConfig[skuHooks].push(item.wid)}" class="p-list" onclick=\'log("gz_item", "gz_detail","02","tjpj_sp_${item_index}","","main")\'>        <div class="p-img">            <a href="//item.jd.com/${item.wid}.html" target="_blank">                <img width="100" height="100" src="${pageConfig.FN_GetImageDomain(item.wid)}n4/${item.imageUrl}">            </a>        </div>        <div class="p-name">            <a href="//item.jd.com/${item.wid}.html" target="_blank" title="${item.wName}">${item.wName}</a>        </div>        <div class="p-price">            <input type="checkbox" data-sku="${item.wid}" id="inp-acc-${item.wid}" onclick=\'log("gz_item", "gz_detail","02","tjpj_fxk_${item_index}","","main")\'/>            <label for="inp-acc-${item.wid}"><strong class="J-p-${item.wid}">\uffe5.00</strong></label>        </div>    </li>    {/for}';pageConfig.getAccSelectedSkus=function(){return pageConfig.accSelectedSkus.join("-")||i.sku};var a={init:function(t){return this.$el=$("#fittings"),this.$more=this.$el.find(".J-more"),this.$count=this.$el.find(".J-selected-cnt"),this.$btn=this.$el.find(".J-btn"),this.$cmbPrice=this.$el.find(".J_cal_jp"),this.sku=t.skuid,this.cat=t.cat,this.cfg=t,this.MORE_TAB_NUM=5,this.MAX_TAB=10,this.skuHooks="SKUS_Fitting",this.$el.length&&this.bindEvent(t),this},switchTo:function(t){var e=this.$tab.items.eq(t),i=this.data[t-1];e.data("loaded")||0===t||(pageConfig[this.skuHooks]=[],e.find("ul").html(s.process(i)),this.cfg.isYuYue||this.cfg.isYuShou||this.cfg.isPinGou||this.imgScroll(e),e.data("loaded",!0))},bindEvent:function(e){var i=this;return this.$el.undelegate().delegate("input","change",function(){var t=$(this).attr("data-sku");i.check(t,$(this))}).delegate("#reco-more .content","click",$.proxy(this.handleMoreClick,this)),this.$el.delegate(".J-btn","click",function(){i.setLog()}),t.addListener("onStockReady",function(){e.havestock&&i.data.length?i.$el.show():i.$el.hide()}),this},handleMoreClick:function(t){var e=$(t.target);e.is('[data-tab="trigger"]')&&(this.$trggerMore.addClass("current"),this.setMoreName(e.text()),this.$trggerMore.data("EDropdown").close(),e.parents("#reco-more").find('[data-tab="trigger"]').removeClass("current"),e.addClass("current"))},check:function(t,e){var i=Number(this.$el.find(".master input").eq(0).data("jp")),s=[this.cfg.skuid];this.$el.find(".suits input:checked").each(function(){var t=Number($(this).data("jp")),e=Number($(this).data("sku"));e&&s.push(e),t&&(i+=t)}),this.$cmbPrice.html("\uffe5"+i.toFixed(2)),this.$count.html(s.length-1),this.$btn.attr("href","//cart.jd.com/reBuyForOrderCenter.action?"+$.param({wids:s.join(","),nums:1})),pageConfig.accSelectedSkus=s},setLog:function(){var t=this.$tab.items.eq(this.$tab.index),e=[];t&&t.find("input").each(function(){$(this).attr("checked")&&e.push($(this).attr("data-sku"))}),e.length&&log("gz_item","gz_detail","02","tjpj_ycgm_ljgm",this.cfg.skuid+"-"+e.join("-"),"main")},set:function(t){var e=this;if(!t||!t.list||!this.$el.length)return!1;pageConfig[this.skuHooks]=[this.sku],t.skuHooks=this.skuHooks,this.data=[];for(var i={skuHooks:this.skuHooks,data:[]},a=!1,n="",o="",r="",c='<{2} href="#none" data-tab="trigger" data-name="{0}" data-id="{1}" onclick=\'log("gz_item", "gz_detail","02","tjpj_pjfl_{0}","","main")\'>{0}</{2}>',d='                <li id="reco-more" class="recommend-more EDropdown">                    <div class="head"><span class="J-text">\u66f4\u591a</span><span class="arrow arr-close"></span></div>                    <div data-drop="content" class="content hide">{items}</div>                </li>',l=0;l<t.list.length;l++){var h=t.list[l],u=h.accessoryShows;u.length&&u[0].wid&&l<this.MAX_TAB&&(u[0].typeName=h.typeName,u[0].typeId=h.typeId,i.data.push(u[0]),this.data.push({skuHooks:this.skuHooks,data:u,typeId:h.typeId,typeName:h.typeName}),n+='            <div class="switchable-wrap" data-tab="item">                <div class="btns">                    <a href="javascript:void(0)" target="_self" class="prev-btn"></a>                    <a href="javascript:void(0)" target="_self" class="next-btn"></a>                </div>                <div class="lh-wrap">                    <ul class="lh clearfix"></ul>                </div>            </div>',l<this.MORE_TAB_NUM?o+=c.format(h.typeName,h.typeId,"li"):(a=!0,r+=c.format(h.typeName,h.typeId,"a")))}if(i.data.length){var m=o+(a?d.replace("{items}",r):"");this.$el.find(".tab-main ul").append(m),this.$el.find(".suits").append(n),a&&(this.$trggerMore=this.$el.find("#reco-more"),this.$trggerMore.EDropdown()),this.$el.ETab({defaultIndex:0,onSwitch:function(t){e.switchTo(t),e.getPrice(t),this.triggers.eq(this.index).parents("#reco-more").length<1&&e.$trggerMore&&(e.$trggerMore.removeClass("current").find('[data-tab="trigger"]').removeClass("current"),e.setMoreName("\u66f4\u591a"))}}),this.$tab=this.$el.data("ETab");var g=this.$tab.items.eq(0);g.find("ul").html(s.process(i)),this.cfg.havestock&&this.$el.show(),this.cfg.isYuYue||this.cfg.isYuShou||this.cfg.isPinGou||e.imgScroll(g),t.transform?this.$more.hide():this.$more.show()}},setMoreName:function(t){this.$trggerMore&&this.$trggerMore.find(".J-text").html(t)},getPrice:function(t){var i=this;e.priceNum({skus:pageConfig[this.skuHooks],$el:this.$tab.items.eq(t),callback:function(t,e){var s=i.$el.find('input[data-sku="'+t+'"]');s.attr("data-jp",e.p),s.attr("data-mp",e.m)},onReady:function(t){i.check()}})},imgScroll:function(t){t.find(".lh-wrap").imgScroll({width:t.find(".lh li").eq(0).outerWidth(!0),visible:i.wideVersion?5:4,showControl:!0,step:i.wideVersion?5:4,loop:!1,prev:t.find(".prev-btn"),next:t.find(".next-btn")})}};function n(t,i,s){var n=window.pageConfig.product,o=n.pType;if(1===o)var r=103003;else if(2===o)var r=102001;else if(3===o)var r=104001;else if(4===o)var r=104026;else var r="";var c=$.extend({methods:"accessories",p:r,sku:n.skuid,cat:n.cat.join(","),lid:e.getAreaId().areaIds[0],uuid:e.getUUID(),pin:readCookie("pin")||"",ck:"pin,ipLocation,atw,aview",lim:n.wideVersion?6:5,cuuid:readCookie("__jdu"),csid:readCookie("__jdb")},t);return $.ajax({url:"//c.3.cn/recommend",data:c,dataType:"jsonp",scriptCharset:"gbk",jsonpCallback:"handleComboCallback",timeout:5e3,success:function(t){$.isPlainObject(t.accessories)&&$.isPlainObject(t.accessories.data)&&!$.isEmptyObject(t.accessories.data)&&a.init(n).set(t.accessories.data),"function"==typeof i&&i.apply(null,arguments)},error:function(){"function"==typeof onError&&s.apply(null,arguments)}})}function o(){var t=$("#shopRecSuit");t.length&&t.ETab()}function r(t,e,i){var s=$.extend({SKU:pageConfig.product.skuid,venderId:pageConfig.product.venderId},t);return $.ajax({url:"//jshop-rec.jd.com/queryData.html",data:s,dataType:"jsonp",scriptCharset:"UTF-8",timeout:5e3,success:function(){"function"==typeof e&&e.apply(null,arguments)},error:function(){"function"==typeof onError&&i.apply(null,arguments)}})}function c(t,i){if(t.length&&i&&$.isArray(i.goodList)&&i.goodList.length){try{var s=$(".J-shopRec-content",t);s.html('            <ul class="plist plist-2" id="shop-reco">                {for item in data.goodList}                    <li class="fore${+item_index+1}" data-sku="${item.skuId}" onclick=\'log("dztj_pc","dztj_all_click",pageConfig.product.venderId, "${+item_index+1}","${item.skuId}",pageConfig.product.skuid, "${data.strategyId}")\'>                        <div class="p-img">                            <a href="${item.skuId|itemUrl}" title="${item.wname}" target="_blank">                                <img width="160" height="160" alt="${item.wname}" class="" src="${item.skuId|imgDomain}n2/${item.imageurl}">                            </a>                        </div>                        <div class="p-name">                            <a href="${item.skuId|itemUrl}" target="_blank" title="${item.wname}">${item.wname}</a>                        </div>                        <div class="p-price">                            {if window.pageConfig.isOversea}\u610f\u5411\u91d1\uff1a{/if}<strong class="J-p-${item.skuId}">\uffe5</strong>                        </div>                    </li>                {/for}            </ul>'.process({data:i,_MODIFIERS:e.modifier}));var a=[];s.find("[data-sku]").each(function(){a.push($(this).data("sku"))}),e.priceNum({skus:a,$el:s}),t.removeClass("hide"),$(".J-shopRec-trigger",t).removeClass("hide"),s.removeClass("hide")}catch(t){console&&console.error(t)}}else t.hide()}function d(t,e){if(t.length&&$.isArray(e)&&e.length){try{t.html('            {for item in data}                 <a href="${item.address}" target="_blank" title="${item.name}" onclick=\'log("dngg_pc","dngg_all_click",pageConfig.product.venderId, "${item.id}","${item.address}")\'><img src="${item.image}" alt="${item.name}"/></a>             {/for}'.process({data:e})),t.show()}catch(t){console&&console.log(t)}}else t.hide()}function l(t){737!=pageConfig.product.cat[0]&&(o(),c($("#shopRecSuit"),t&&t.shopRec))}function h(t){r().done(function(t){$("#fittings").length>0?n().done(function(e){(!e||$.isEmptyObject(e)||$.isEmptyObject(e.accessories)||$.isEmptyObject(e.accessories.data))&&l(t)}).fail(function(e,i,s){console&&console.error("\u4eba\u6c14\u914d\u4ef6\u6a21\u5757\u6570\u636e\u8c03\u7528\u5931\u8d25\uff0c\u5177\u4f53\u5982\u4e0b\uff1a\n"+s),l(t)}):l(t),d($("#sp-ad"),t&&t.shopAds)}).fail(function(t,e,i){console&&console.error("\u5e97\u957f\u63a8\u8350\u6a21\u5757\u6570\u636e\u8c03\u7528\u5931\u8d25\uff0c\u5177\u4f53\u5982\u4e0b\uff1a\n"+i),n()})}module.exports.__id="fittings",module.exports.init=h});
/*!Name: contact.js
 * Date: 2019-4-4 18:53:50 */
define("MOD_ROOT/contact/contact",function(require,exports,module){require("MOD_ROOT/EDropdown/EDropdown");var o=require("MOD_ROOT/common/core"),e=require("MOD_ROOT/common/tools/event").Event,t=require("MOD_ROOT/contact/im"),i=require("MOD_ROOT/contact/followshop");function r(o,e){if(o.jimiData)return e(o.jimiData);var t={skuId:o.skuid,c1:o.cat[0],c2:o.cat[1],c3:o.cat[2],venderId:o.venderId};$.ajax({url:"//entry-jimi.jd.com/iadshop/checkJimiStatus?"+$.param(t),dataType:"jsonp",scriptCharset:"utf-8",cache:!0,success:function(t){/debug=im/.test(location.href)&&alert(t.code),o.jimiData=t,e(t)}})}function c(e,t,i,r,c){var n='            <div class="jimi customer-service">                <a href="//jimi.jd.com/index.action?productId={0}&source={1}" target="_blank">                    <i class="sprite-jimi"></i>'+t+"                </a>             </div>";c&&(e.html(n.format(i.skuid,o.isPop?"productpop":"productself")),o.customerServiceURL="//jimi.jd.com/index.action?productId={0}&source={1}".format(i.skuid,o.isPop?"productpop":"productself"))}function n(e){new i({$wrap:$(".contact"),vids:[e.shopId],onFollow:function(){var t=readCookie("pin")||"",i=readCookie("__jda")?readCookie("__jda").split(".")[1]:"";o.sendRequest("//mercury.jd.com/log.gif?t=shop.100001&v=src=shop$shopid="+e.shopId+"$action=0&pin="+t+"&uid="+i+"&ver=1&rid="+Math.random()+"&m=UA-J2011-1&ref="+document.referrer)},onunFollow:function(){var t=readCookie("pin")||"",i=readCookie("__jda")?readCookie("__jda").split(".")[1]:"";o.sendRequest("//mercury.jd.com/log.gif?t=shop.100001&v=src=shop$shopid="+e.shopId+"$action=1&pin="+t+"&uid="+i+"&ver=1&rid="+Math.random()+"&m=UA-J2011-1&ref="+document.referrer)}})}function d(o){var e=$(".J-wd-qrcode"),t=$(".J-m-qrcode");!function(){var t=e.find("img");$.ajax({url:"//wq.jd.com/weidian/weixin/GetQRCode?venderid="+o.venderId,dataType:"jsonp",cache:!0,jsonpCallback:"getQRCode",success:function(o){o&&0==o.errcode&&""!=o.data.qrurl&&(t.attr("src",o.data.qrurl),e.show())}})}(),function(){var e=t.find(".J-m-wrap"),i="https://item.m.jd.com/product/{0}.html?pc_source=pc_productDetail_{0}".format(o.skuid),r='<img src="//qrimg.jd.com/{0}-118-1-4-0.png?ltype=0" width="118" height="118" />'.format(encodeURIComponent(i));e.html("").html(r)}()}function a(){$(".J-contact-text").show()}function s(o){var i=$("#crumb-wrap");$(".goodshop",i).EDropdown(),$(".J-hove-wrap",i).EDropdown({onOpen:function(){this.$el.attr("opened")||(d(o),this.$el.attr("opened","1"))}}),pageConfig.IMContact=new t({cfg:o,$el:$(".J-im-btn"),trigger:".im",template:'<div class="im customer-service"><i class="sprite-im"></i>{text}</div>'}),e.addListener("onIMReady",function(t){t.exists?(a(),$(".J-im-item").show()):r(o,function(t){var i=t&&1===t.code;c($(".J-jimi-btn").eq(0),"\u8054\u7cfb\u5ba2\u670d",o,t,i),c($(".J-jimi-btn").eq(1),"\u8054\u7cfb\u5ba2\u670d",o,t,i),e.fire({type:"onJimiReady",exists:i})})}),e.addListener("onJimiReady",function(o){o.exists&&(a(),$(".J-jimi-item").show())}),n(o)}module.exports.__id="contact",module.exports.init=s});
/*!Name: popbox.js
 * Date: 2019-4-4 18:53:51 */
define("MOD_ROOT/popbox/popbox",function(require,exports,module){require("PLG_ROOT/jQuery.scroller");var o=require("MOD_ROOT/common/core"),e=require("MOD_ROOT/contact/im"),i=require("MOD_ROOT/contact/followshop");function r(r){new i({$wrap:$("#popbox"),vids:[r.shopId],onFollow:function(){var e=readCookie("pin")||"",i=readCookie("__jda")?readCookie("__jda").split(".")[1]:"";o.sendRequest("//mercury.jd.com/log.gif?t=shop.100001&v=src=shop$shopid="+r.shopId+"$action=0&pin="+e+"&uid="+i+"&ver=1&rid="+Math.random()+"&m=UA-J2011-1&ref="+document.referrer)},onunFollow:function(){var e=readCookie("pin")||"",i=readCookie("__jda")?readCookie("__jda").split(".")[1]:"";o.sendRequest("//mercury.jd.com/log.gif?t=shop.100001&v=src=shop$shopid="+r.shopId+"$action=1&pin="+e+"&uid="+i+"&ver=1&rid="+Math.random()+"&m=UA-J2011-1&ref="+document.referrer)}});r.IMContact=new e({cfg:r,$el:$(".J-popbox-im"),trigger:".im",template:'<div class="im customer-service"><i class="sprite-im"></i></div>'}),d($("#popbox"))}function d(o){o.scroller({delay:0,end:$("#footmark"),onStart:function(){this.$el.find("[data-fixed]").addClass("pro-detail-hd-fixed")},onEnd:function(){this.$el.find("[data-fixed]").removeClass("pro-detail-hd-fixed")}})}module.exports.__id="popbox",module.exports.init=r});
/*!Name: preview.js
 * Date: 2019-4-4 18:53:52 */
define("MOD_ROOT/preview/preview",function(require,exports,module){var e=require("JDF_UNIT/follow/1.0.0/follow"),i=require("MOD_ROOT/preview/contrast"),o=require("MOD_ROOT/common/core"),a=require("MOD_ROOT/common/tools/tools"),t=require("MOD_ROOT/common/tools/event").Event,n=require("MOD_ROOT/common/tools/abtest"),r=require("MOD_ROOT/preview/panorama").Panorama,s=require("MOD_ROOT/videoBox/videoBox"),l=require("MOD_ROOT/videoBox/videoTrack"),d=require("MOD_ROOT/videoBox/videoAnchorPoint"),c=require("MOD_ROOT/videoBox/videoTrailer");require("MOD_ROOT/preview/contrast.css"),require("PLG_ROOT/jQuery.imgScroll"),require("PLG_ROOT/jQuery.jqueryzoom"),require("PLG_ROOT/jQuery.zoom"),require("JDF_UI/dialog/1.0.0/dialog"),require("MOD_ROOT/ETab/ETab");function g(e){var i=o.wideVersion?5:3;e.imgScroll({width:e.find("li").eq(0).outerWidth(!0),visible:i,showControl:!0,step:i,loop:!1,prev:"#spec-forward",next:"#spec-backward"})}function p(e){var i=pageConfig.FN_GetImageDomain(e.skuid),o=/isOverseaPurchase-2/.test(e.specialAttrs),a=o?"/popWaterMark/":"/n0/",t=$("#spec-list"),n=t.find("li"),r=($("#spec-n1").html(),-1);e.ctCloth&&$("body").addClass("ctCloth");function s(o){var n=t.find("li"),s=o.find("img"),l=s.attr("src"),d=s.attr("data-url"),c=n.index(o);if(r!=c){r=c,$("#spec-n1").addClass("jqzoom"),0==c?w.show():w.hide(),l=l.replace(/54x54/g,"450x450"),l=l.replace(/50x64/g,"350x449"),l=l.replace(/\/n5/g,"/n1");var g="";g=e.ctCloth?l.replace(/350x449/g,"800x1026"):i+a+d,e.currentMainImage=l,$("#spec-img").eq(0).attr({src:l,jqimg:g}).show(),n.removeClass("img-hover"),o.addClass("img-hover")}}t.undelegate().delegate("li","mouseenter",function(e){s($(e.currentTarget))}),s(n.eq(0));var l=$(".jqzoom");if(l.find("img").attr("src")){l.jqueryzoom({xzoom:540,yzoom:540,offset:10,position:"left",lens:1})}g(t);var d=$("#spec-n1");"1"===d.attr("data-big")&&d.bind("click",function(e){var i=$(e.target);!i.is(".J-preview-btn")&&i.parents(".J-preview-btn").length<1&&u(0)}),d.delegate("#three-d-show","click",function(){u(1)}),d.delegate("#over-all-images-show","click",function(){u(2)})}function u(e){var i=pageConfig&&pageConfig.product&&pageConfig.product.specialAttrs instanceof Array&&pageConfig.product.specialAttrs.join(",").indexOf("LeaseType-3")>-1,o=pageConfig&&pageConfig.product&&(pageConfig.product.isYuShou||pageConfig.product.isPinGou),t="\u5168\u666f\u5c55\u793a";pageConfig.product.is3DHome&&(t="3D\u5bb6");var n='        <div class="preview-layer J-preview-layer">            <div class="layer-tab">                <ul>                    <li data-tab="trigger" class="current"><a href="#none">\u5927\u56fe</a></li>                    <li data-tab="trigger" class="{if !has3D}hide{/if}"><a href="#none">3D</a></li>                    <li data-tab="trigger"  style="display:'+(pageConfig.product.is3DHome&&pageConfig.notSupportWebGL?"none":"")+';" class="{if !hasOverAllImagesShow}hide{/if}"><a href="#none">'+t+'</a></li>                </ul>            </div>            <div data-tab="item" class="layer-con">                <div class="layer-img">                    <span></span>                    <img id="popup-big-img" width="546" data-big="//img14.360buyimg.com/n0/${src}" src="//img14.360buyimg.com/n1/s546x546_${src}" alt=""/>                </div>                <div class="layer-side">                    <h3 class="pro-name">${name}</h3>                    <div class="pro-price" style="display:'+(o?"none":"block")+'">'+(i?" \u79df   \u91d1 ":!pageConfig.product.isYuShou&&$("#banner-miaosha").length<=0&&pageConfig.product.skuMarkJson&&pageConfig.product.skuMarkJson.pg?" \u62fc \u8d2d \u4ef7 ":" \u4eac \u4e1c \u4ef7 ")+'<span>\uffe5${price}</span></div>                    <div class="side-list">                        <div class="J-side-list">                            <ul>                                {for list in imgs}                                <li>                                    {for item in list.tabs}                                    <a href="#none">                                        <img data-url="${item}" src="http://img14.360buyimg.com/n5/s54x54_${item}" alt=""/>                                    </a>                                    {/for}                                </li>                                {/for}                            </ul>                        </div>                        <div class="list-page J-list-page">                            <a href="#none" class="prev"><i></i></a>                            <span class="scroll-status-wrap">1/1\u9875</span>                            <a href="#none" class="next"><i></i></a>                        </div>                    </div>                </div>            </div>            <div data-tab="item" class="layer-con">                <iframe src="${iframe}"                     id="dialogIframe"                     name="dialogIframe"                     marginwidth="0" marginheight="0" frameborder="0" scrolling="no"                     style="border: 0px; width: 100%; height: 100%;"></iframe>            </div>            <div data-tab="item" class="layer-con" style="display:'+(pageConfig.product.is3DHome&&pageConfig.notSupportWebGL?"none":"")+';">                <div id="over-all-images" class="panorama-show p-tips">                    <div class="panorama-img">                        <img src="" alt="">                        <div class="panorama-tips"></div>                    </div>                </div>            </div>        </div>',s=$("#three-d-show"),l=$("#over-all-images-show"),d=s.attr("data-href"),c="\u6682\u65e0\u62a5\u4ef7";if(pageConfig.product.jp){var g=parseFloat(pageConfig.product.jp).toFixed(2);isNaN(g)||g>0&&(c=g)}pageConfig.product.isHidePrice&&(c="\u5f85\u53d1\u5e03");var p={has3D:s.length>0,hasOverAllImagesShow:l.length>0,iframe:d||"about:blank",price:c,name:pageConfig.product.name,src:pageConfig.product.src,imgs:a.reBuildJSON(pageConfig.product.imageList||[],8)};function u(){var e=$(".J-preview-layer .layer-img"),i=e.find("img").attr("data-big");e.trigger("zoom.destroy").zoom({url:i})}function m(i){var o=$(".J-preview-layer");o.ETab({defaultIndex:i,onSwitch:function(e){0!=e&&pageConfig.product.imageAndVideoJson&&pageConfig.product.imageAndVideoJson.overAllPath&&new r({pics:pageConfig.product.imageAndVideoJson.overAllPath,element:$("#over-all-images")})}}),u(),0!=e&&pageConfig.product.imageAndVideoJson&&pageConfig.product.imageAndVideoJson.overAllPath&&new r({pics:pageConfig.product.imageAndVideoJson.overAllPath,element:$("#over-all-images")}),o.delegate(".J-side-list li img","mouseenter",function(){var e=$(this).data("url");o.find("#popup-big-img").attr({src:"//img14.360buyimg.com/n1/s546x546_"+e,"data-big":"//img14.360buyimg.com/n0/"+e}),$(".J-side-list li a").removeClass("current"),$(this).parent().addClass("current"),u()}),$(".J-side-list").imgScroll({showControl:!0,loop:!1,status:!0,prev:$(".J-list-page .prev"),next:$(".J-list-page .next")})}$("body").dialog({mainId:"big-image-3d",width:960,maskClose:!0,autoUpdate:!0,height:580,title:"\u5927\u56fe",type:"html",source:n.process(p),onReady:function(){m(e)}})}function m(i){var o=$(".J-follow");e.init(o),e.check&&e.check([i.skuid],function(e,i){i&&o.addClass("followed").find("em").text("\u5df2\u5173\u6ce8")})}function f(e){$(".J-share,#btn-pg-share,.J-btn-invite,.J-yuyue-share").bind("click",function(){require.async("MOD_ROOT/preview/combineShare",i)});function i(i){var o=$("#preview .spec-items li img"),a=[],t=$(".J-share");o.each(function(){var e=$(this).attr("src");a.push(e)});var n="\u6211\u5728@\u4eac\u4e1c \u53d1\u73b0\u4e86\u4e00\u4e2a\u975e\u5e38\u4e0d\u9519\u7684\u5546\u54c1\uff1a "+e.name+"\u3000\u4eac\u4e1c\u4ef7\uff1a\uffe5 {PRICE}\u3002 \u611f\u89c9\u4e0d\u9519\uff0c\u5206\u4eab\u4e00\u4e0b";new i({sid:3,rid:986951,$el:t,title:n,content:n,url:location.href,imgs:a,onbeforeOpen:function(i){i.jp=e.jp}}).popUp()}}function v(e){return 1==={1666577:1,1397351:1,897523:1,1339416:1,3586940:1,3812632:1,2676072:1,3668041:1,3740498:1,3381353:1,1521124:1,10297885284:1,4229138:1,1084054:1,4390182:1,1879150:1,1689327:1,2972067:1,3754251:1,2873418:1,4140704:1,4368426:1,2799682:1,2539514:1,3773968:1,3812632:1,2129121:1,966962:1,4401892:1,2963900:1,3327010:1,1042114:1,1727233:1,4460756:1,10477349622:1,2379171:1,1041464:1,1280920:1,1847341:1,549543:1,1834943:1,4168838:1,3829536:1,3755130:1,3017823:1,2676648:1,1242645:1,1440460796:1,3796674:1,1218558:1}[e]}function h(e){function i(){C.show()}function o(){C.hide()}function t(a){if(!a||!a.playUrl)return o(),!1;e.videoData=m=a,r(),i()}function r(){b.removeClass("hide"),y.hide(),y.css({width:O.width,height:O.height,zIndex:6})}function g(i){function o(i){$(".preview-btn").hide(),y.show(),e.videoPlayer=i,l.init(e.videoPlayer,e.skuid,e.imageAndVideoJson.mainVideoId,m.playUrl),d.init(e.videoPlayer,{list:m.videoMarkList,limitLabelNum:3}),e.videoPlayer.on("ended",function(){(!c.ifTrailer||c.ifTrailer&&1==c.trailerFlag)&&p()}),c.addCloseBtn(e.videoPlayer,p),c.init(e.videoPlayer,m.extInfo),e.videoPlayer.on("error",function(e){"undefined"!=typeof console&&console.info("Video loaded Error.")}),setTimeout(function(){e.videoPlayer.play()},0)}if("undefined"==typeof videojs||!videojs.players["video-player"]){var a={autoplay:!0,controls:!0,preload:"auto",fuScrnEnabled:!0};e.ctCloth&&(a.controls=!1),m&&(w.html(f.format(m.playUrl,O.width+2,O.height+3)),a.callback=o,s.initPlayer("video-player",a)),i&&i.stopPropagation()}}function p(){y.hide(),$(".preview-btn").show(),setTimeout(u,500)}function u(){"undefined"!=typeof videojs&&videojs.players["video-player"]&&videojs.players["video-player"].dispose(),void 0!==e&&"object"==typeof e.videoPlayer&&(e.videoPlayer=""),w.html("")}if(void 0!=e.imageAndVideoJson){var m=null,f='        <video id="video-player"            class="video-js vjs-default-skin"            style="position:absolute;top:0;left:0"            poster="//misc.360buyimg.com/lib/img/e/blank.gif"            width="{1}" height="{2}"  controls>            <source src="{0}" type="video/mp4"> </source>            <p class="vjs-no-js"> \u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 HTML 5 Video \u6807\u7b7e\uff0c\u8bf7\u5347\u7ea7\u6d4f\u89c8\u5668\u3002</p>        </video>',h=$("#preview"),y=$("#v-video"),w=y.find(".J-v-player"),b=y.find(".J-close"),C=$(".J-preview-btn .J-video-icon"),O=function(){var i=pageConfig.compatible&&pageConfig.wideVersion;var o={width:i?450:300,height:i?450:300};if(!e.twoColumn){o={width:i?350:300,height:i?350:300}}if(e.ctCloth){o={width:i?350:300,height:i?449:385}}return o}(),J=e.imageAndVideoJson.mainVideoId,x=$.browser.msie&&Number($.browser.version)<9,T=document.createElement("video").canPlayType,j=J&&!x&&T;if(/deubg/.test(location.href)&&console.log(j),!j)return o(),!1;$("#three-d-show").length&&C.addClass("has-3d-show"),$.browser.msie&&Number($.browser.version)<11&&y.addClass("ie9"),h.delegate(".J-video-icon","click",g),y.delegate(".J-close","click",p);v(e.skuid)&&function(){return pageConfig.__videoAutoPlayTest=new n(a.getUUID(),.5),"A"===pageConfig.__videoAutoPlayTest.isHitVersion()}()&&g(),window.renderVideo=g,$.ajax({url:"//c.3.cn/tencent/video_v3",dataType:"jsonp",data:{vid:J,type:1,from:1,appid:24},success:t})}}function y(e){function i(i){var o=$("#spec-list"),a=$("#spec-img,#spec-n1 img");if(o.length&&i&&i.imageList&&i.imageList.length){var t=i.imageList,n="jfs/";e.imageList&&(e.imageList=t),i.imageUrl&&function(e){var i=a.attr("src"),o=a.attr("jqimg"),t=i.split(n),r=o.split(n);t.length<2||r.length<2?console.log("\u4e3b\u56fe\u7247\u5730\u5740\u5f02\u5e38\uff1a%s",i):a.attr({"data-replace":!0,src:t[0]+e,"data-origin":t[0]+e,jqimg:r[0]+e})}(i.imageUrl),i.imageList&&function(e){var i=o.find("li img"),a=i.length;if(i.length){var r=o.find("li").eq(0);if(e.length>a){var s=e.length-a;do{o.find("ul").append(r.clone()),s--}while(s>0)}o.find("li").not(r).removeClass("img-hover"),o.find("li img").each(function(e){var i=$(this).attr("src"),o=i.split(n);o.length<2?console.log("\u56fe\u7247\u5730\u5740\u5f02\u5e38\uff1a%s",i):e<t.length?$(this).attr({"data-replace":!0,src:o[0]+t[e],"data-url":t[e]}):$(this).parent().remove()})}}(i.imageList),g(o)}}$("body").hasClass("yyp")||function(){$.ajax({url:"//cd.jd.com/img/channel",data:{skuId:e.skuid},dataType:"jsonp",success:i})}()}var w={init:function(){this.$el=$("#spec-n1 .p-watermark"),this.bindEvent()},bindEvent:function(){t.addListener("onStockReady",$.proxy(this.show,this))},isValidatedArea:function(){var e=a.getAreaId().areaIds;return 53283!==e[0]&&52993!==e[0]&&32!==e[0]},show:function(){this.isValidatedArea()?this.$el.show():this.hide()},hide:function(){this.$el.hide()}};function b(){pageConfig.product.imageAndVideoJson&&pageConfig.product.imageAndVideoJson.overAllPath&&1==pageConfig.product.imageAndVideoJson.overAllPath.length&&(pageConfig.product.is3DHome=!0)}function C(){var e=document.createElement("canvas");e.style.width=e.style.height="100%",e.getContext&&e.getContext("experimental-webgl",{alpha:!1,depth:!1})||($(".btn-3d.vr-single-pic").hide(),pageConfig.notSupportWebGL=!0)}function O(e){b(),C(),w.init(),p(e),m(e),f(e),h(e),i.init(null,null,"gbk"),y(e)}module.exports.__id="preview",module.exports.init=O});
/*!Name: info.js
 * Date: 2019-4-4 18:53:51 */
define("MOD_ROOT/info/info",function(require,exports,module){var t=require("MOD_ROOT/common/tools/event").Event,e=require("MOD_ROOT/common/tools/tools");function i(t,e){this.$el=t,this.len=e,this.items=[],this.items.length=e}i.prototype={set:function(t,e){if(t>this.len)throw new Error("index error.");return e&&(this.items[t]=e,this.show()),this},del:function(t){this.items[t]=null,this.show(t)},show:function(){var t=this.items.length,e=0,i=[],o=this.$el.find("ol");for(e;e<t;e++)if(this.items[e]){if(this.items[e].indexOf("\u5b8c\u6210\u9884\u7ea6")>=0&&pageConfig.product.skuMarkJson.pg)continue;i.push('<li class="local-txt">\xb7'+this.items[e]+"</li>")}i.length>0?(o.html(i.join("")),this.$el.show()):this.$el.hide()}};var o=pageConfig.__tips=new i($("#summary-tips"),20);function n(e){var i=$("#local-tips");function o(t){if(!t||!t.stock||!t.stock.stock)return!1;var e=t.stock.stock,o=e.cla;if(o&&o.length){for(var n="",s=0;s<o.length;s++){var r=o[s];n+='<li>\xb7<a data-aid="{0}" href="{1}" target="_blank" clstag="shangpin|keycount|product|bendihuodong-{2}">{2} &gt;&gt;</a></li>'.format(r.id,r.url,r.name)}i.show().find(".tips-list").html(n)}else i.hide().find(".tips-list").html("")}o(),t.addListener("onStockReady",o)}function s(e){var i=e.tips,n=i&&i.length;!function(){if(n)for(var t=0;t<i.length;t++)1==i[t].order||o.set(i[t].order,i[t].tip)}();function s(t){e.isHeYue&&!t.noBuyType?o.set(7,'<a target="_blank" href="//sale.jd.com/act/IgFRVepkJKr.html">\u8bf7\u9605\u8bfb\u5408\u7ea6\u673a\u8d2d\u4e70\u8bf4\u660e &gt;&gt;</a>'):o.del(7)}function r(t){var e="//authpay.jd.com/auth/toAuthPage.action?source=62&directReturnUrl="+location.href,i='\u8be5\u5546\u54c1\u9700\u8981\u5b9e\u540d\u8ba4\u8bc1\u624d\u53ef\u62a2\u8d2d\uff0c<a target="_blank" href="{0}">\u53bb\u5b9e\u540d &gt;&gt;</a>'.format(e);t.r&&"1"===t.r.shiming?o.set(9,i):o.del(9)}function a(t){var e=t.area.id[0],i=t.stock.stock;52993===e||53283===e||32===e?o.set(0,"\u4e0d\u652f\u63017\u5929\u65e0\u7406\u7531\u9000\u8d27"):i&&i.promiseMark&&"string"==typeof i.promiseMark?o.set(0,i.promiseMark):o.del(0)}t.addListener("onHeYueReady",s),t.addListener("onKOReady",r),t.addListener("onStockReady",a),t.addListener("onPromReady",function(t){var e=t.result,i=e.couponLimit&&e.couponLimit[0];i&&i.limitCouponDesc&&"string"==typeof i.limitCouponDesc?o.set(1,"\u6b64\u5546\u54c1"+i.limitCouponDesc):o.del(1)})}function r(){var t=$(".J-mobile-only"),e=t.find(".qrcode");if(t.length){var i=e.attr("data-url"),o=i||"//m.jd.com/product/"+pageConfig.product.skuid+".html?from=qrcode";require.async("PLG_ROOT/jQuery.qrcode",function(){e.jdQrcode({render:"image",ecLevel:"L",size:80,text:o})})}}function a(t){var i=$("#er-same");function o(t){t&&"\u65e0\u5173\u8054\u6570\u636e"!=t.message&&(i.show().find("a").attr("href","//item.jd.com/"+t+".html"),e.priceNum({skus:[t],$el:i,callback:function(t,e){e&&e.p&&Number(e.p)>0?i.find(".price").html("\uffe5"+e.p):i.find(".price").html("\u6682\u65e0\u62a5\u4ef7")}}))}t.isErshou&&i.length&&$.ajax({url:"//c.3.cn/second?skuId="+t.skuid,dataType:"jsonp",success:o})}function c(t){s(t),n(t),r(t),a(t)}module.exports.__id="info",module.exports.init=c,module.exports.Tip=o});
/*!Name: imcenter.js
 * Date: 2019-4-4 18:53:50 */
define("MOD_ROOT/imcenter/imcenter",function(require,exports,module){var e=require("MOD_ROOT/common/tools/event").Event,t=function(e){this.shopCserviceJson=e.shopCserviceJson||[],this.groupIdArr=[],this.$el=e.$el||$("<div></div>"),this.trigger=e.trigger||".link-trigger",this.$customerServiceList=this.$el.find(".customer-service-list"),this.skuid=e.skuid,this.commentNum=e.commentNum,this.jprice=e.jprice,this.venderId=e.venderId,this.src=e.src,this.name=e.name,this.init()};t.prototype={init:function(){this.bindEvent(),this.get()},bindEvent:function(){var e=this;this.$el.delegate(this.trigger,"click",function(){var t=$(this).attr("data-url");e.open(t)})},get:function(){for(var e=this,t=0;t<e.shopCserviceJson.length;t++)e.shopCserviceJson[t].groupId&&e.groupIdArr.push(e.shopCserviceJson[t].groupId);var i=e.groupIdArr.join(",");$.ajax({url:"//chat.jd.com/venderApi/queryGroupByIdList.action",data:{groupIdList:i,responseCharset:"gbk"},scriptCharset:"gbk",dataType:"jsonp",success:function(t){t&&t.code&&(1==t.code||2==t.code||3==t.code||9==t.code)&&e.set(t)}})},set:function(e){var t="";if(e.body&&e.body.length>0)try{this.setStatusClass(e);var t='    {for item in body}        <li><a class="link-trigger" href="#none" data-id="${item.id}" data-url="${item.url}" title="${item.name}"><i class="jd-dd ${item.statusClass}"></i><em>${item.name}</em></a></li>    {/for}'.process(e);this.$customerServiceList.html(t)}catch(e){var i=t.match(/\[ERROR.+\]/);i&&i.length&&console.error("Template Render Error @ [imCenter.js]. >>>>> \n   %s",i[0])}},setStatusClass:function(e){for(var t in e.body)e.body[t].hasOnlineWaiter?e.body[t].statusClass="":e.body[t].statusClass="jd-dd-offline"},open:function(e){var t={pid:this.skuid,advertiseWord:encodeURIComponent($("#p-ad").text()),commentNum:this.commentNum,evaluationRate:"x",imgUrl:this.src,wname:encodeURIComponent(this.name),jprice:this.jprice,stock:encodeURIComponent($("#store-selector .text").text()+"("+$("#store-prompt strong").text())+")"};this.venderId&&(t.venderId=this.venderId);var i=-1!=e.indexOf("?")?"&":"?";open(e+i+$.param(t),this.skuid,"status=no,toolbar=no,menubar=no,location=no,titlebar=no,resizable=yes,width=1018px,height=590")}};function i(i){e.addListener("onCommentMeta",o),e.addListener("onPriceReady",r);var s=!1,n=!1;function r(e){(s=!0)&&n&&c(i)}function o(e){n=!0,s&&n&&c(i)}function c(e){if(!e.shopCserviceJson||!e.shopCserviceJson.length)return!1;new t({$el:$("#imcenter"),shopCserviceJson:e.shopCserviceJson,skuid:e.skuid,commentNum:e.commentMeta.CommentCount,jprice:e.jp,venderId:e.venderId,src:e.src,name:e.name})}}module.exports.__id="imcenter",module.exports.init=i});
/*!Name: jdservice.js
 * Date: 2019-4-4 18:53:51 */
define("MOD_ROOT/jdservice/jdservice",function(require,exports,module){require("JDF_UNIT/trimPath/1.0.0/trimPath");var e=require("MOD_ROOT/common/core"),i=require("MOD_ROOT/common/tools/event").Event,t=require("MOD_ROOT/buybtn/buybtn").addToCartBtn,s=require("MOD_ROOT/common/tools/tools"),a=s.ConditionTrigger.globalConditionTrigger,n=new RegExp("^"+location.protocol),c='        <div class="dt" data-yb="new_yb_server">\u589e\u503c\u4fdd\u969c</div>        <div class="dd">            <div class="service-type-yb clearfix">                {for item in data}                    <div class="yb-item-cat">                        <div class="yb-item">                            <img class="icon" src="${pageConfig.FN_GetImageDomain(item.details[0].bindSkuId)}${item.imgUrl}"/>                            <span class="name">${item.details[0].bindSkuName}</span>                            {if (pageConfig.product.venderId == 1000000127 && item.details[0].bindSkuName == "\u6362\u4fee\u65e0\u5fe7") }                             <span class="price">\uffe5${item.details[0].price}/\u6708</span>                            {else}                             <span class="price">\uffe5${item.details[0].price}</span>                            {/if}                             <i class="arrow-icon"></i>                            <div class="after"></div>                        </div>                        <div class="more-item">                            <ul>                                {for list in item.details}                                <li data-sku="${list.bindSkuId}">                                    <div class="title" title="${list.tip}">                                        <span class="choose-btn" clstag="shangpin|keycount|product|jingdongfuwu_${list.bindSkuId}">                                            <i class="sprite-checkbox"></i>{if list.isFavor}<span class="tips">\u4f18\u60e0</span>{/if}<span class="name">${list.bindSkuName}</span>{if (pageConfig.product.venderId == 1000000127 && list.bindSkuName == "\u6362\u4fee\u65e0\u5fe7")}<span class="price">\uffe5${list.price}/\u6708</span>{else}<span class="price">\uffe5${list.price}</span>{/if}                                        </span>                                        <a href="//item.jd.com/${list.bindSkuId}.html" target="_blank" class="detail-more" clstag="shangpin|keycount|product|jingdongfuwu_xiangqing">\u8be6\u60c5<s class="s-arrow">&gt;&gt;</s></a>                                    </div>                                </li>                                {/for}                            </ul>                        </div>                    </div>                {/for}                <div class="service-tips">                    <a href="#none"><i class="sprite-question"></i></a>                    <div class="tips">                        <div class="sprite-arrow"></div>                        <div class="content">                        <dl>                            <dd>\u589e\u503c\u4fdd\u969c\u662f\u6307\u51e1\u5728\u4eac\u4e1c\u8d2d\u4e70\u5546\u54c1\u6216\u670d\u52a1\u7684\u6d88\u8d39\u8005\uff0c\u5728\u4fdd\u969c\u671f\u95f4\u5185\u9047\u5230\u65e0\u8bba\u662f\u6b63\u5e38\u4f7f\u7528\u4e2d\u7684\u95ee\u9898\u8fd8\u662f\u610f\u5916\u4e8b\u6545\uff0c\u5373\u53ef\u4eab\u53d7\u589e\u503c\u4fdd\u969c\u670d\u52a1\u3002\u4fdd\u969c\u5185\u5bb9\u5305\u62ec\uff1a\u5ef6\u957f\u4fdd\u4fee\u3001\u53ea\u6362\u4e0d\u4fee\u3001\u610f\u5916\u4fdd\u62a4\u3001\u670d\u52a1\u4fdd\u969c\u3002\u8986\u76d6\u5bb6\u7535\u3001\u624b\u673a\u6570\u7801\u3001\u7535\u8111\u529e\u516c\u3001\u6c7d\u8f66\u7528\u54c1\u3001\u670d\u9970\u5bb6\u5c45\u7b49\u5546\u54c1\u3002</dd>                        </dl>                        <p>\u589e\u503c\u4fdd\u969c\u670d\u52a1\uff0c\u53ea\u80fd\u63d0\u4f9b\u589e\u503c\u7a0e\u666e\u901a\u7535\u5b50\u53d1\u7968\uff0c\u5982\u6709\u7591\u95ee\uff0c\u8bf7\u4e0e<a href="//chat.jd.com/pop/chat?shopId=162403" target="_blank">\u5728\u7ebf\u5ba2\u670d</a>\u8054\u7cfb</p>                    </div>                </div>            </div>        </div>';var r=function(e,i){n.test(e)||(e=location.protocol+e);try{var t=i.serializeURL(e),s=t.query;for(var a in s)if(s.hasOwnProperty(a))return!0;return!1}catch(e){return console&&console.log(e),!1}}(e.originBuyUrl,e);function o(e,i,s){var a=t.$el.attr("href"),c=n.test(a),o={query:{}};c||(a=location.protocol+a),s.is("",i)?o.query[e]=i:s.is([],i)&&(o.query[e]=i.join(","));try{a=s.modifyURL(a,o,!0)}catch(e){console&&console.log(e)}c||(a=a.replace(n,"")),r&&t.enabled(a)}var l={init:function(e,i){this.sku=e.sku,this.cat=e.cat,this.brand=e.brand,this.$el=e.$el||$("#choose-service"),this.onSelected=e.onSelected||function(){},this.cfg=i,this.currSku=null,this.bindEvent()},bindEvent:function(){var t=this;this.$el.delegate(".yb-item","click",function(){var e=$(this),i=e.parents(".yb-item-cat");i.hasClass("selected")?(i.find("li.selected .choose-btn").trigger("click"),t.updateFrist(i.find(".more-item li:eq(0)"),i.find(".yb-item"))):i.find(".more-item li:eq(0) .choose-btn").trigger("click")}),this.$el.delegate(".choose-btn","click",function(){var e=$(this),i=e.parents("li"),s=i.attr("data-sku"),a=e.parents(".yb-item-cat");return i.hasClass("selected")?(i.removeClass("selected"),a.removeClass("selected hover"),a.find(".yb-item").removeAttr("data-sku")):(a.find("li").removeClass("selected"),i.addClass("selected"),a.addClass("selected").removeClass("hover"),t.updateFrist(i,a.find(".yb-item"))),t.currSku=s,t.currEl=e,t.calResult(),!1}),this.$el.delegate(".yb-item-cat","mouseenter",function(){$(this).addClass("hover")}),this.$el.delegate(".yb-item-cat","mouseleave",function(){$(this).removeClass("hover")});var s=0;this.$el.delegate(".service-tips","mouseenter",function(){clearTimeout(s),$(this).addClass("hover")}),this.$el.delegate(".service-tips","mouseleave",function(){var e=$(this);s=setTimeout(function(){e.removeClass("hover")},300)}),a.addReceiver("YBService",function(){"JDService"in a.receivers&&a.callReceiverAction("JDService"),"JDServiceF"in a.receivers&&a.callReceiverAction("JDServiceF")},function(e){"JDService"in a.receivers&&a.callReceiverAction("JDService"),"JDServiceF"in a.receivers&&a.callReceiverAction("JDServiceF")}).addAction({success:function(){t.cfg.baiTiaoFenQi&&t.cfg.baiTiaoFenQi.disabled()},failure:function(){t.cfg.baiTiaoFenQi&&t.cfg.baiTiaoFenQi.enabled()}});function n(){a.emit("YBService",!1),o("ybId","",e),t.cfg.havestock&&!t.cfg.isHeYue?t.get():(t.cfg.hasYbInfo=!1,t.$el.hide().html())}i.addListener("onAreaChange",function(){n()}),i.addListener("onHeYueReady",function(){n()}),i.addListener("onStockReady",function(){t.cfg.havestock&&!t.cfg.isHeYue?t.$el.show():t.$el.hide()}),i.addListener("onBaiTiaoRender",function(e){t.cfg.havestock&&!t.cfg.isHeYue&&(a.callReceiverAction("YBService"),a.callActions())})},updateFrist:function(e,i){var t=e.find(".name").html();i.find(".name").html(t),i.find(".name").attr("title",t),i.find(".price").html(e.find(".price").html()),i.attr("data-sku",e.attr("data-sku"))},get:function(){var e=this;$.ajax({url:"//cd.jd.com/yanbao/v3",data:{skuId:e.sku,cat:e.cat.join(","),brandId:e.brand,area:s.getAreaId().areaIds.join("_")},dataType:"jsonp",scriptCharset:"gbk",cache:!0,jsonpCallback:"yanbao_jsonp_callback",success:function(i){e.set(i)}})},set:function(e){var i=e&&e[this.sku];if($.isArray(i)&&i.length>0){i.length>3&&(i.length=3);for(var t in i){var s=i[t];s.details&&s.details.length>6&&(s.details.length=6)}var a="";try{a=c.process({data:i}),this.$el.html(a),this.show(),this.cfg.hasYbInfo=!0}catch(e){var n=a.match(/\[ERROR.+\]/);n&&n.length&&console.error("Template Render Error @ [jdService.js]. >>>>> \n   %s",n[0])}}else this.$el.hide().html(""),this.cfg.hasYbInfo=!1},show:function(){this.cfg.havestock&&this.$el.show()},hide:function(){this.$el.hide()},clear:function(){this.$el.find(".yb-item").removeAttr("data-sku"),this.$el.find(".yb-item-cat").removeClass("selected"),this.$el.find(".yb-item-cat .more-item li").removeClass("selected")},calResult:function(){var e=this.$el.find(".selected"),i=[];if(e.each(function(){var e=$(this).find(".yb-item"),t=e.attr("data-sku");t&&i.push(t)}),"function"==typeof this.onSelected)return this.onSelected.apply(this,[i,this.currSku,this.currEl])}};function d(t){$("#choose-service").length<1||l.init({sku:t.skuid,cat:t.cat,brand:t.brand,onSelected:function(t){t.length>0?(pageConfig.hasYbService=!0,a.emit("YBService",!0)):(pageConfig.hasYbService=!1,a.emit("YBService",!1)),o("ybId",t,e),i.fire({type:"onYBSelected",skus:t})}},t)}module.exports.__id="jdservice",module.exports.init=d});
/*!Name: jdservicePlus.js
 * Date: 2019-4-4 18:53:51 */
define("MOD_ROOT/jdservicePlus/jdservicePlus",function(require,exports,module){require("JDF_UNIT/trimPath/1.0.0/trimPath");var e=require("MOD_ROOT/common/core"),i=require("MOD_ROOT/common/tools/event").Event,s=require("MOD_ROOT/common/tools/tools"),t=require("MOD_ROOT/buybtn/onekey"),a=require("MOD_ROOT/buybtn/buybtn").addToCartBtn,c=/^(?:https?:)?(?:\/\/)?/,n=s.ConditionTrigger.globalConditionTrigger,r=new RegExp("^"+location.protocol),o='        <div class="dt">\u4eac\u4e1c\u670d\u52a1</div>        <div class="dd">            <div class="service-wrap clearfix">                {for item in data}                    <div class="service">                        <div class="service__head">                            <img class="icon" src="${item.scIconUrl}"/>                            <span class="name">${item.serviceSkuInfoList[0].serviceSkuShortName}</span>                            <span class="price">\uffe5${item.serviceSkuInfoList[0].serviceSkuPrice}</span>                            <i class="arrow-icon"></i>                            <div class="after"></div>                        </div>                        <div class="service__body">                            <ul>                                {for list in item.serviceSkuInfoList}                                <li data-sku="${list.serviceSku}">                                    <div class="title" title="${list.serviceSkuAdWord}">                                        <span class="choose-btn" clstag="shangpin|keycount|product|jingdongfuwujia_${list.serviceSku}">                                            <i class="sprite-checkbox"></i><span class="name">${list.serviceSkuShortName}</span><span class="price">\uffe5${list.serviceSkuPrice }</span>                                        </span>                                        <a href="//item.jd.com/${list.serviceSku}.html" target="_blank" class="detail-more" clstag="shangpin|keycount|product|jingdongfuwujia_xiangqing">\u8be6\u60c5<s class="s-arrow">&gt;&gt;</s></a>                                    </div>                                </li>                                {/for}                            </ul>                        </div>                    </div>                {/for}                <div class="service-tips">                    <a href="#none"><i class="sprite-question"></i></a>                    <div class="tips">                        <div class="sprite-arrow"></div>                        <div class="content">                        <dl>                            <dd>\u4eac\u4e1c\u670d\u52a1+\uff0c\u4e3a\u7528\u6237\u6253\u9020\u7edf\u4e00\u3001\u6807\u51c6\u5316\u7684\u670d\u52a1\u4f53\u9a8c\uff0c\u5c06\u670d\u52a1\u4ea7\u54c1\u5316\uff0c\u5f62\u6210\u8986\u76d6\u96f6\u552e\u9886\u57df\u5168\u94fe\u6761\u670d\u52a1\u3001\u5177\u5907\u4e13\u4e1a\u77e5\u8bc6\u7684\u65b0\u4e00\u4ee3\u670d\u52a1\u751f\u6001\u5e73\u53f0\u3002\u670d\u52a1\u4ea7\u54c1\u5185\u5bb9\u5305\u62ec\uff1a\u5b89\u88c5\u670d\u52a1\u3001\u6e05\u6d17\u4fdd\u517b\u3001\u68c0\u6d4b\u7ef4\u4fee\u3001\u4f01\u60a6\u670d\u52a1\u7b49\uff0c\u8986\u76d6\u5bb6\u7535\u3001\u624b\u673a\u6570\u7801\u3001\u7535\u8111\u529e\u516c\u3001\u5c45\u5bb6\u751f\u6d3b\u3001\u670d\u9970\u7b49\u5546\u54c1\u3002</dd>                        </dl>                    </div>                </div>            </div>        </div>';var l=function(e,i){r.test(e)||(e=location.protocol+e);try{var s=i.serializeURL(e),t=s.query;for(var a in t)if(t.hasOwnProperty(a))return!0;return!1}catch(e){return console&&console.log(e),!1}}(e.originBuyUrl,e);function d(e,i,s){var t=a.$el.attr("href"),c=r.test(t),n={query:{}};c||(t=location.protocol+t),s.is("",i)?n.query[e]=i:s.is([],i)&&(n.query[e]=i.join(","));try{t=s.modifyURL(t,n,!0)}catch(e){console&&console.log(e)}c||(t=t.replace(r,"")),l&&a.enabled(t)}var u={init:function(e,i){this.sku=e.sku,this.cat=e.cat,this.brand=e.brand,this.$el=e.$el||$("#choose-service\\+"),this.onSelected=e.onSelected||function(){},this.cfg=i,this.skuPrice="",this.currSku=null,this.bindEvent()},bindEvent:function(){var s=this;this.$el.undelegate("click").delegate(".service__head","click",function(){var e=$(this),i=e.parents(".service");i.hasClass("selected")?(i.find("li.selected .choose-btn").trigger("click"),s.updateFrist(i.find(".service__body li:eq(0)"),i.find(".service__head"))):i.find(".service__body li:eq(0) .choose-btn").trigger("click")}),this.$el.delegate(".choose-btn","click",function(){var e=$(this),i=e.parents("li"),t=i.attr("data-sku"),a=e.parents(".service"),c=a.find(".service__head");s.$el.data("data")[a.index()];return i.hasClass("selected")?(i.removeClass("selected"),a.removeClass("selected hover"),c.removeAttr("data-sku")):(a.find("li").removeClass("selected"),i.addClass("selected"),a.addClass("selected").removeClass("hover"),s.updateFrist(i,a.find(".service__head"))),s.currSku=t,s.currEl=e,s.calResult(),!1}),this.$el.delegate(".service",{mouseenter:function(){$(this).addClass("hover")},mouseleave:function(){$(this).removeClass("hover")}});var a=0;this.$el.delegate(".service-tips","mouseenter",function(){clearTimeout(a),$(this).addClass("hover")}),this.$el.delegate(".service-tips","mouseleave",function(){var e=$(this);a=setTimeout(function(){e.removeClass("hover")},300)}),n.addReceiver("JDService",function(e){var i='<span id="J_JDSTips" style="color:#999; white-space: nowrap;">{0}</span>';setTimeout(function(){if(t.hide(),s.cfg.baiTiaoFenQi){var e=$(".J-baitiao-text"),a=e.next("#J_JDSTips");a.length>0?e.find("em").length?a.html("\uff0c\u4eac\u4e1c\u670d\u52a1\u4e0d\u652f\u6301\u4e00\u952e\u6253\u767d\u6761"):a.html("\u4eac\u4e1c\u670d\u52a1\u4e0d\u652f\u6301\u4e00\u952e\u6253\u767d\u6761"):e.find("em").length?e.after(i.format("\uff0c\u4eac\u4e1c\u670d\u52a1\u4e0d\u652f\u6301\u4e00\u952e\u6253\u767d\u6761")):e.after(i.format("\u4eac\u4e1c\u670d\u52a1\u4e0d\u652f\u6301\u4e00\u952e\u6253\u767d\u6761"))}},0)},function(e){if(t.isEnabled(s.cfg)&&t.show(),s.cfg.baiTiaoFenQi){var i=$(".J-baitiao-text"),a=i.next("#J_JDSTips");a.length>0&&a.remove()}}).addAction({success:function(){s.cfg.baiTiaoFenQi&&s.cfg.baiTiaoFenQi.disabled()},failure:function(){s.cfg.baiTiaoFenQi&&s.cfg.baiTiaoFenQi.enabled()}});function c(){n.emit("JDService",!1),d("jdhsid","",e),s.cfg.havestock&&!s.cfg.isHeYue?s.get():s.$el.hide().html()}i.addListener("onAreaChange",function(e){s.setSkuPrice(e.stock.stock),c()}),i.addListener("onHeYueReady",function(){c()}),i.addListener("onStockReady",function(){s.cfg.havestock&&!s.cfg.isHeYue?s.$el.show():s.$el.hide()}),i.addListener("onBaiTiaoRender",function(e){s.cfg.havestock&&!s.cfg.isHeYue&&(n.callReceiverAction("JDService"),n.callActions())})},updateFrist:function(e,i){var s=e.find(".name").html();i.find(".name").html(s),i.find(".name").attr("title",s),i.find(".price").html(e.find(".price").html()),i.attr("data-sku",e.attr("data-sku"))},get:function(){var e=this;$.ajax({url:"//cd.jd.com/mcsFacade",data:{skuId:e.sku,cat:e.cat.join(","),brandId:e.brand,area:s.getAreaId().areaIds.join("_"),price:e.skuPrice,harmony:1},dataType:"jsonp",scriptCharset:"gbk",success:function(i){e.set(i)}})},set:function(e){if($.isArray(e)&&e.length>0){for(var i=e.slice(0,3),s=0,t=i.length;s<t;s+=1){var a=i[s].serviceSkuInfoList;a&&(a=a.slice(0,5)),i[s].scIconUrl=i[s].scIconUrl.replace(c,"//")}this.$el.html(o.process({data:i})).data("data",i),this.show()}else this.$el.hide().html("")},show:function(){this.cfg.havestock&&!this.cfg.isHeYue&&this.$el.show()},hide:function(){this.$el.hide()},clear:function(){this.$el.find(".service__head").removeAttr("data-sku"),this.$el.find(".service").removeClass("selected"),this.$el.find(".service .service__body li").removeClass("selected")},calResult:function(){var e=this.$el.find(".selected"),i=[];if(e.each(function(){var e=$(this).find(".service__head"),s=e.attr("data-sku");s&&i.push(s)}),"function"==typeof this.onSelected)return this.onSelected.apply(this,[i,this.currSku,this.currEl])},setSkuPrice:function(e){e&&e.jdPrice?this.skuPrice=e.jdPrice.p:this.skuPrice=""}};function h(s){var t=$("#choose-service\\+");t.length<1||u.init({$el:t,sku:s.skuid,cat:s.cat,brand:s.brand,onSelected:function(s){s.length>0?(pageConfig.hasJDService=!0,n.emit("JDService",!0)):(pageConfig.hasJDService=!1,n.emit("JDService",!1)),d("jdhsid",s,e),i.fire({type:"onServicePlusSelected",skus:s})}},s)}module.exports.__id="jdservicePlus",module.exports.init=h});
/*!Name: jdserviceF.js
 * Date: 2019-4-4 18:53:51 */
define("MOD_ROOT/jdserviceF/jdserviceF",function(require,exports,module){require("JDF_UNIT/trimPath/1.0.0/trimPath");var e=require("MOD_ROOT/common/core"),i=require("MOD_ROOT/common/tools/tools"),t=require("MOD_ROOT/common/tools/event").Event,s=require("MOD_ROOT/buybtn/onekey"),a=require("MOD_ROOT/buybtn/buybtn").addToCartBtn,n=i.ConditionTrigger.globalConditionTrigger,c=new RegExp("^"+location.protocol),r='        <div class="dt">\u589e\u503c\u670d\u52a1</div>        <div class="dd">            <div class="service-wrap clearfix">                {for item in data}                    <div class="service">                        <div class="service__head">                            <span class="name">${item.name}</span>                            <span class="price">\uffe5${item.charge}</span>                            <i class="arrow-icon"></i>                            <div class="after"></div>                        </div>                        <div class="service__body">                            <ul>                                {for list in item.itemChildList}                                <li data-sku="${list.skuId}">                                    <div class="title" title="\u4eac\u4e1c\u670d\u52a1\u54a8\u8be2\u70ed\u7ebf\uff1a400-610-3600">                                        <span class="choose-btn" clstag="shangpin|keycount|product|jiajufuwu_${list.skuId}">                                            <i class="sprite-checkbox"></i><span class="name">${list.serviceChildName}</span><span class="price">\uffe5${list.price }</span>                                        </span>                                        <a href="//item.jd.com/${list.skuId}.html" target="_blank" class="detail-more" clstag="shangpin|keycount|product|jiajufuwu_xiangqing">\u8be6\u60c5<s class="s-arrow">&gt;&gt;</s></a>                                    </div>                                </li>                                {/for}                            </ul>                        </div>                    </div>                {/for}                <div class="service-tips">                    <a href="#none"><i class="sprite-question"></i></a>                    <div class="tips">                        <div class="sprite-arrow"></div>                        <div class="content">                        <dl>                            <dd>\u6e29\u99a8\u63d0\u793a\uff1a\u5bf9\u4e8e\u8d85\u9ad8\uff08\u5927\u4e8e3\u7c73\uff09\u4f5c\u4e1a\uff0c\u7528\u6237\u8bf7\u63d0\u4f9b\u811a\u624b\u67b6\uff0c\u6536\u8d39\u6807\u51c6\uff08\u6bcf\u7c73\u6bcf\u4ef650\u5143\uff0c\u4e0d\u8db31\u7c73\u63091\u7c73\u7b97\uff09\uff1b\u94a2\u67b6\u9633\u5149\u623f\u662f\u5426\u53ef\u4ee5\u5b89\u88c5\u667e\u8863\u67b6\u3001\u5438\u9876\u706f\uff0c\u9700\u8981\u5de5\u7a0b\u5e08\u73b0\u573a\u52d8\u6d4b\u5f00\u5b54\u6761\u4ef6\u3001\u94a2\u67b6\u56fa\u5b9a\u7b49\uff1b\u77f3\u818f\u540a\u9876\u9ad8\u5ea61-30cm\u6536\u8d3930\u5143/\u76cf\uff0c31-50cm\u6536\u8d3950\u5143/\u76cf\uff0c\u5927\u4e8e50cm\u4e0d\u5177\u5907\u5b89\u88c5\u6761\u4ef6\u3002</dd>                        </dl>                        <p>\u4eac\u4e1c\u670d\u52a1+\u4e3a\u5e7f\u5927\u4eac\u4e1c\u7528\u6237\u63d0\u4f9b\u5168\u65b9\u4f4d\u7684\u54c1\u8d28\u670d\u52a1\uff0c\u5177\u4f53\u670d\u52a1\u4ea7\u54c1\u5185\u5bb9\u8bf7\u70b9\u51fb<a href="//jdservice.jd.com" target="_blank">\u4eac\u4e1c\u670d\u52a1+</a>\u3002</p>                     </div>                </div>            </div>        </div>';var o=function(e,i){c.test(e)||(e=location.protocol+e);try{var t=i.serializeURL(e),s=t.query;for(var a in s)if(s.hasOwnProperty(a))return!0;return!1}catch(e){return console&&console.log(e),!1}}(e.originBuyUrl,e);function l(e,i,t){var s=a.$el.attr("href"),n=c.test(s),r={query:{}};n||(s=location.protocol+s),t.is("",i)?r.query[e]=i:t.is([],i)&&(r.query[e]=i.join(","));try{s=t.modifyURL(s,r,!0)}catch(e){console&&console.log(e)}n||(s=s.replace(c,"")),o&&a.enabled(s)}var d={init:function(e,i){this.sku=e.sku,this.venderId=e.venderId,this.appreTemplateId=e.appreTemplateId,this.$el=e.$el||$("#choose-serviceF"),this.onSelected=e.onSelected||function(){},this.cfg=i,this.currSku=null,this.bindEvent(),this.get()},bindEvent:function(){var i=this;this.$el.undelegate("click").delegate(".service__head","click",function(){var e=$(this),i=e.parents(".service");i.hasClass("selected")?i.find("li.selected .choose-btn").trigger("click"):i.find(".service__body li:eq(0) .choose-btn").trigger("click")}),this.$el.delegate(".choose-btn","click",function(){var e=$(this),t=e.parents("li"),s=t.attr("data-sku"),a=e.parents(".service"),n=a.find(".service__head"),c=i.$el.data("data")[a.index()];return t.hasClass("selected")?(t.removeClass("selected"),a.removeClass("selected hover"),n.removeAttr("data-sku"),n.find(".name").html(c.name).removeAttr("title"),n.find(".price").html("\uffe5"+c.charge)):(a.find("li").removeClass("selected"),t.addClass("selected"),a.addClass("selected").removeClass("hover"),i.updateFrist(t,a.find(".service__head"))),i.currSku=s,i.currEl=e,i.calResult(),!1}),this.$el.delegate(".service",{mouseenter:function(){$(this).addClass("hover")},mouseleave:function(){$(this).removeClass("hover")}});var a=0;this.$el.delegate(".service-tips","mouseenter",function(){clearTimeout(a),$(this).addClass("hover")}),this.$el.delegate(".service-tips","mouseleave",function(){var e=$(this);a=setTimeout(function(){e.removeClass("hover")},300)}),n.addReceiver("JDServiceF",function(e){var t='<span id="J_JDSFTips" style="color:#999; white-space: nowrap;">{0}</span>';setTimeout(function(){if(s.hide(),i.cfg.baiTiaoFenQi){var e=$(".J-baitiao-text"),a=e.next("#J_JDSFTips");a.length>0?e.find("em").length?a.html("\uff0c\u4eac\u4e1c\u670d\u52a1\u4e0d\u652f\u6301\u4e00\u952e\u6253\u767d\u6761"):a.html("\u4eac\u4e1c\u670d\u52a1\u4e0d\u652f\u6301\u4e00\u952e\u6253\u767d\u6761"):e.find("em").length?e.after(t.format("\uff0c\u4eac\u4e1c\u670d\u52a1\u4e0d\u652f\u6301\u4e00\u952e\u6253\u767d\u6761")):e.after(t.format("\u4eac\u4e1c\u670d\u52a1\u4e0d\u652f\u6301\u4e00\u952e\u6253\u767d\u6761"))}},0)},function(e){if(s.isEnabled(i.cfg)&&s.show(),i.cfg.baiTiaoFenQi){var t=$(".J-baitiao-text"),a=t.next("#J_JDSFTips");a.length>0&&a.remove()}}).addAction({success:function(){i.cfg.baiTiaoFenQi&&i.cfg.baiTiaoFenQi.disabled()},failure:function(){i.cfg.baiTiaoFenQi&&i.cfg.baiTiaoFenQi.enabled()}});function c(){n.emit("JDServiceF",!1),l("fsIds","",e),i.cfg.havestock&&!i.cfg.isHeYue?i.get():i.$el.hide().html()}t.addListener("onAreaChange",function(){c()}),t.addListener("onHeYueReady",function(){c()}),t.addListener("onStockReady",function(){i.cfg.havestock&&!i.cfg.isHeYue?i.$el.show():i.$el.hide()}),t.addListener("onBaiTiaoRender",function(e){i.cfg.havestock&&!i.cfg.isHeYue&&(n.callReceiverAction("JDServiceF"),n.callActions())})},updateFrist:function(e,i){var t=e.find(".name").html(),s=e.find(".title").attr("title");i.find(".name").html(t),i.find(".name").attr("title",s),i.find(".price").html(e.find(".price").html()),i.attr("data-sku",e.attr("data-sku"))},get:function(){var e=this;$.ajax({url:"//cd.jd.com/popAppreTemplate",data:{skuId:e.sku,venderId:e.venderId,appreTemplateId:e.appreTemplateId,area:i.getAreaId().areaIds.join("_"),fromSource:34,priceSource:0,priceOrigin:"",businessId:""},dataType:"jsonp",success:function(i){e.set(i)}})},set:function(e){var i=!!($.isArray(e)&&e.length>0)&&e[0].items;if($.isArray(i)&&i.length>0){for(var t=i.slice(0,3),s=0,a=t.length;s<a;s+=1){var n=t[s].serviceSkuInfoList;n&&(n=n.slice(0,5))}this.$el.html(r.process({data:t})).data("data",t),this.show()}else this.$el.hide().html("")},show:function(){this.cfg.havestock&&!this.cfg.isHeYue&&this.$el.show()},hide:function(){this.$el.hide()},clear:function(){this.$el.find(".service__head").removeAttr("data-sku"),this.$el.find(".service").removeClass("selected"),this.$el.find(".service .service__body li").removeClass("selected")},calResult:function(){var e=this.$el.find(".selected"),i=[];if(e.each(function(){var e=$(this).find(".service__head"),t=e.attr("data-sku");t&&i.push(t)}),"function"==typeof this.onSelected)return this.onSelected.apply(this,[i,this.currSku,this.currEl])}};function h(i){var s=$("#choose-serviceF"),a=i.specialAttrs.join("|").match(/zzfwmb\-([^\|]*)/);s.length&&a&&d.init({$el:s,sku:i.skuid,venderId:i.venderId,appreTemplateId:a?a[1]:"",onSelected:function(i){i.length>0?(pageConfig.hasJDServiceF=!0,n.emit("JDServiceF",!0)):(pageConfig.hasJDServiceF=!1,n.emit("JDServiceF",!1)),l("fsIds",i,e),t.fire({type:"onServiceFSelected",skus:i})}},i)}module.exports.__id="jdserviceF",module.exports.init=h});
/*!Name: commitments.js
 * Date: 2019-4-4 18:53:50 */
define("MOD_ROOT/commitments/commitments",function(require,exports,module){var t=require("MOD_ROOT/common/core"),i=function(t){this.init(t)};i.prototype={$el:$("#commitments"),init:function(i){this.sku=i,t.onAttr("isCare")&&(this.addEvents(),this.loadCare())},addEvents:function(){this.$el.find(".heart").hover(function(){$(this).addClass("heart-hover")},function(){$(this).removeClass("heart-hover")})},loadCare:function(){var t=this;require.async(["MOD_ROOT/commitments/commitments.css"],function(){t.$el.find(".heart .commitments-tips").html('        <i class="sprite-arrow"></i>        <div class="sprite-heartPic"></div>        <p>\u7231\u5fc3\u4e1c\u4e1c\u516c\u76ca\u5546\u54c1\uff0c\u5546\u5bb6\u627f\u8bfa\u6bcf\u5b8c\u6210\u9500\u552e\u4e00\u7b14\u8ba2\u5355\uff0c\u5c06\u6350\u8d60\u4e00\u5b9a\u6bd4\u4f8b\u7684\u91d1\u989d\u7528\u4e8e\u516c\u76ca\u6148\u5584\u9879\u76ee\u6267\u884c\u3002</p>        <a style="display:none;" href="#" target="_blank">\u8be6\u7ec6 &gt;&gt;</a>'.process({})),t.$el.show()})}};function s(t){new i(t.skuid)}module.exports.__id="commitments",module.exports.init=s});
/*!Name: gift.js
 * Date: 2019-4-4 18:53:50 */
define("MOD_ROOT/gift/gift",function(require,exports,module){var t=require("MOD_ROOT/buybtn/buybtn").addToCartBtn,e=require("MOD_ROOT/common/tools/event").Event,i=require("MOD_ROOT/common/core");require("MOD_ROOT/gift/gift.css");var o={skus:[],init:function(t){if(this.$el=$("#choose-gift"),this.$gift=this.$el.find(".J-gift"),this.$count=this.$gift.find("em"),this.$selected=this.$el.find(".J-gift-selected"),!(this.$el.length&&t&&t.giftPool&&t.giftPool.length))return this.$el.hide(),!1;pageConfig.haveGift=!0,this.hasSelected=!1,this.data=t,this.bindEvent(),this.$count.html(t.giftPool.length),this.$el.show()},bindEvent:function(){var e=this,i=$(document);this.$el.undelegate("click"),this.$el.delegate(".J-gift,.J-popup,.J-gift-choosed","click.popup",function(){e.showGiftSelect()}),i.undelegate("click.gift_pool_item"),i.delegate(".J-choose-gift-layer .J-select","click.gift_pool_item",function(){e.select($(this))}),i.delegate(".J-choose-gift-layer .J-select","mouseover",function(){e.hover($(this))}),i.delegate(".J-gift-pool","mouseleave",function(){e.leave($(this))}),i.delegate(".J-gift-pool-ok","click",function(){e.collectSelectedSkus()});var o=pageConfig.product,n=t.$el.add($("#btn-reservation,#btn-reservation-mini")).add(o.oneKeyBuyBtn.$el).add($("#btn-baitiao"));n.unbind("click.validate_gift"),n.bind("click.validate_gift",function(){if(!pageConfig.giftSelected)return e.$el.addClass("item-hl-bg"),!1})},showGiftSelect:function(){var t=this;pageConfig.getGiftPoolDataStr=function(t){return t.sid+"|"+t.num+"|"+encodeURIComponent(t.mp)+"|"+encodeURIComponent(t.nm)},pageConfig.getGiftPoolStatus=function(e,i){var o="-"+e.sid+"-";return("-"+t.skus.join("-")+"-").indexOf(o)>-1?"choosed":0!=i||t.hasSelected?"":"choosed"};var e='            <div class="J-choose-gift-layer choose-gift-layer">                {for pool in giftPool}                <div class="J-gift-pool gift-pool" data-res="">                <dl class="J-gift-list gift-list">                    <dt>${pool.poolName}</dt>                    {for item in pool.list}                    <dd>                        <a href="#none" class="J-select p-img ${pageConfig.getGiftPoolStatus(item, item_index)}"                             data-res="${pageConfig.getGiftPoolDataStr(item)}" >                            <img src="${pageConfig.FN_GetImageDomain(item.sid)}n1/s60x60_${item.mp}" alt="${item.nm}"/>                        </a>                    </dd>                    {/for}                </dl>                <p class="p-name">${pool.list[0].nm}</p>                </div>                {/for}                <div class="bt-wrap">                    <a href="#none" class="J-gift-pool-ok btn-confirm">\u786e\u5b9a</a>                    <a href="#none" onclick="$.closeDialog();" class="J-gift-pool-cancel btn-cancel"                         clstag="shangpin|keycount|product|zengpintanceng-guanbi">\u53d6\u6d88</a>                </div>            </div>',i=e.process(this.data);require.async("JDF_UI/dialog/1.0.0/dialog",function(){$("body").dialog({type:"html",mainId:"gift-pool-popup",width:530,title:"\u9009\u62e9\u8d60\u54c1",source:i,onReady:function(){t.$giftLayer=$(".J-choose-gift-layer"),t.$giftLayer.find(".choosed").trigger("click.gift_pool_item"),$("#gift-pool-popup .ui-dialog-close").attr("clstag","shangpin|keycount|product|zengpintanceng-guanbi")}})})},collectSelectedSkus:function(){var t={data:[]},i=[];this.$giftLayer.find(".J-gift-pool").each(function(){var e=$(this).attr("data-res").split("|"),o=e[0],n=e[1],s=decodeURIComponent(e[2]),a=decodeURIComponent(e[3]);t.data.push({sku:o,num:n,img:s,name:a}),o&&i.push(o)}),pageConfig.giftSelectedSkuids=i,pageConfig.giftSelected=!0,this.skus=i,this.hasSelected=this.skus.length>0,e.fire({type:"onGiftSelected",skus:i}),this.hasSelected&&this.$el.removeClass("item-hl-bg"),this.updateSelected(t),this.setBtnLink(),$.closeDialog()},updateSelected:function(t){this.$gift.hide(),this.$selected.show(),this.$selected.find(".J-gift-choosed").html('            {for item in data}                <img src="${pageConfig.FN_GetImageDomain(item.sku)}n1/s40x40_${item.img}" />                <span>x ${item.num}</span>            {/for}'.process(t))},setBtnLink:function(){if(pageConfig.product.isYuYue||pageConfig.product.isYuShou||pageConfig.product.isPinGou){var e=$("#btn-reservation,#btn-reservation-mini"),o=e.attr("href");o&&"#none"!==o&&(/^https?:/.test(o)||(o=location.protocol+o),e.attr("href",i.modifyURL(o,{query:{gids:this.skus.join(",")}},!0)))}else{var o=t.$el.attr("href");o&&t.enabled(i.getHrefWithGift(o,this.skus))}},setName:function(t,e){var i=e.split("|"),o=i[0],n=decodeURIComponent(i[3]),s=null;n.length>29&&(s=n.substr(0,29)+"..."),t.html('<a href="//item.jd.com/{0}.html" target="_blank" title="{1}">{2}</a>'.format(o,n,s||n)+"<span>\u3000x{0}</span>".format(i[1]))},leave:function(t){var e=t.find(".p-name");this.setName(e,t.find(".choosed").attr("data-res"))},hover:function(t){var e=t.parents(".J-gift-pool").eq(0),i=e.find(".p-name"),o=t.attr("data-res");this.setName(i,o)},select:function(t){var e=t.parents(".J-gift-pool").eq(0),i=e.find(".J-select"),o=e.find(".p-name"),n=t.attr("data-res");i.removeClass("choosed"),t.addClass("choosed"),e.attr("data-res",n),this.setName(o,n)}};module.exports=o});
/*!Name: vehicle.js
 * Date: 2019-4-4 18:53:52 */
define("MOD_ROOT/vehicle/vehicle",function(require,exports,module){require("JDF_UI/dialog/1.0.0/dialog"),require("JDF_UNIT/trimPath/1.0.0/trimPath");var e=require("MOD_ROOT/common/core"),i=require("JDF_UNIT/login/1.0.0/login"),t=require("MOD_ROOT/common/tools/tools"),o=require("MOD_ROOT/common/tools/event").Event,n=require("MOD_ROOT/colorsize/colorsize"),a=require("MOD_ROOT/buybtn/buybtn").addToCartBtn,s=require("MOD_ROOT/buybtn/onekey"),c='        <div class="reminder">             <div class="guide" clstag="shangpin|keycount|product|xuanzechexing">                 <span class="icon-car"></span><span class="guide-text">{0}</span>             </div>             <div class="icon-present" title="\u9009\u62e9\u8f66\u578b\uff0c\u67e5\u770b\u8d60\u54c1\u3002"></div>         </div>',l='        {if data}        <div class="vehicles">             {for item in data}             <div class="vehicle" data-id="${item.id}" data-modelId="${item.modelId}">                 <img class="vehicle-logo" src="//img30.360buyimg.com/car/${item.logoUrl}" title="${item.brandName}" />                 <div class="vehicle-inner">                     <div class="vehicle-name" title="${item.brandName} ${item.seriesName}">${item.brandName} ${item.seriesName}</div>                     <div class="vehicle-model" title="${item.seriesYear}\u6b3e${item.modelName}">${item.seriesYear}\u6b3e${item.modelName}</div>                 </div>             </div>             {/for}             <a class="other" href="javascript:void(0)">\u7ba1\u7406\u7231\u8f66&gt;</a>         </div>{/if}',r='        {if data}        <div class="vehicles">             {for item in data}             <div class="vehicle" data-id="${item.id}" data-modelId="${item.model_id}">                 <img class="vehicle-logo" src="//img30.360buyimg.com/car/${item.brand_logo}" title="${item.brand_name}" />                 <div class="vehicle-inner">                     <div class="vehicle-name" title="${item.brand_name} ${item.series_name}">${item.brand_name} ${item.series_name}</div>                     <div class="vehicle-model" title="${item.series_year_name}\u6b3e${item.model_name}">${item.series_year_name}\u6b3e${item.model_name}</div>                 </div>             </div>             {/for}             <a class="other" href="javascript:void(0)">\u7ba1\u7406\u7231\u8f66&gt;</a>         </div>{/if}',d='        <div class="J-prom-gift">             <div class="prom-gifts clearfix">                 <span class="prom-gift-label"><em class="car_red_bg">\u8d60\u54c1</em></span>                 <div class="prom-gift-list">                     {for item in data}                         {if item.hashStore}                             <div class="prom-gift-item" data-id="${item.sku}">                                 <a target="_blank" href="//item.jd.com/${item.sku}.html" title="${item.skuName}">                                    {if item.mainImage}                                     <img src="${pageConfig.FN_GetImageDomain(item.sku)}n1/s25x25_${item.mainImage}" width="25" height="25" class="gift-img"/>                                     {else}                                     <img src="//img30.360buyimg.com/da/jfs/t1264/236/181850154/1105/14bba6c8/5509488cN2093c2a9.png" width="25" height="25" class="gift-img"/>                                    {/if}                                 </a>                                 <em class="gift-number">\xd7 ${item.giftCount}</em>                             </div>                         {/if}                     {/for}                     <div class="J-gift-limit gift-limit">\uff08\u8f66\u578b\u8d60\u54c1\uff09</div>                 </div>             </div>         </div>',m="\u8bf7\u9009\u62e9\u8f66\u578b\uff0c\u4e3a\u60a8\u7cbe\u51c6\u5339\u914d>",f="\u8bf7\u6dfb\u52a0\u8f66\u578b\uff0c\u4e3a\u60a8\u7cbe\u51c6\u5339\u914d>",u="\u8be5\u5546\u54c1\u53ef\u9002\u914d\u7231\u8f66\uff0c\u8bf7\u653e\u5fc3\u8d2d\u4e70",h="\u5f53\u524d\u9875\u9762\u6240\u6709\u5546\u54c1\u4e0e\u6b64\u8f66\u578b\u5747\u4e0d\u9002\u914d\uff0c\u8bf7\u8c28\u614e\u8d2d\u4e70",g=e.serializeURL(location.href).query.modelId,p=$("#choose-car"),v=$(".dd",p),y=+pageConfig.product.skuid,b=$("#prom-car-gift"),I=function(){var i={},t=pageConfig.product.colorSize;if(e.is([],t)&&t.length)for(var o=0,n=t.length;o<n;o++)i[t[o].skuId]=t[o];return i}(),C=function(){var e=[],i=$("#choose-attrs");return i.length&&i.find("[data-type]").each(function(){var i=$(this).data("type");i&&e.push(i)}),e}();function _(i,t){var o={};e.is(1,i)&&(o.path="/"+i+".html"),e.is(1,t)&&(o.query={modelId:t}),location.href=e.modifyURL(location.href,o)}function k(i){return function(t){$(".crumb-wrap").attr("id","crumb-wrap"),location.href=e.modifyURL(location.href,{path:"/"+t+".html",query:{modelId:i},fragment:"#crumb-wrap"},!0)}}function T(e,i){e&&i&&(e.html(c.format(i)),e.closest(".choose-car").show())}function x(e,i){e&&i&&(e.html(l.process({data:i})),e.closest(".choose-car").show())}function O(e,i){e&&i&&(e.html(r.process({data:i})),e.closest(".choose-car").show())}function j(i,t){if(i.length){if(e.is([],t)&&t.length){var o=d.process({data:t});$(o).find(".prom-gift-item").length<=0&&(o="")}else var o="";i.html(o);var n=$("#summary-promotion");o?n.show():pageConfig.hasPromotion||n.hide()}}function w(e,i){e.length&&e.before($('<div id="J_vTips">').css({color:"#e4393c",height:"25px",lineHeight:"25px",paddingLeft:"5px",marginBottom:"5px",backgroundColor:"#fdf0f0"}).html(i||h))}function M(e){e.length&&$("#J_vTips",e).remove()}var D=[];function R(i){var t=[];if(e.is([],i)&&i.length)for(var o=0,n=i.length;o<n;o+=1){var a=i[o];if(a.skuId==y){e.is([],a.gifts)&&a.gifts.length&&(t=t.concat(a.gifts));break}}return D=t,N(),U(),t}function G(){if(e.is([],D)&&D.length){for(var i=[],t=0,o=D.length;t<o;t++){var n=D[t];n.hashStore&&i.push(n.sku)}return i.join(",")}return""}function N(){var i=a.$el,t=i.attr("href"),o=G();if("#none"!==t){/^https?/.test(t)||(t=location.protocol+t);try{t=e.modifyURL(t,{query:{gids:o}},!0).replace(/^(?:https?:)?(?:\/\/)?/,"//"),a.enabled(t)}catch(e){console&&console.log(e)}}}function U(){if(G()){pageConfig.hasCarGift=!0,s.hide();try{pageConfig.product.baiTiaoFenQi.hide()}catch(e){console&&console.log(e)}}else{pageConfig.hasCarGift=!1,s.show();try{pageConfig.product.baiTiaoFenQi.showItem()}catch(e){console&&console.log(e)}}}function A(e,i,t){var e=$.extend({},e);return $.ajax({url:"//cargw.jd.com/mClient/model/queryById",data:e,dataType:"jsonp",success:function(){"function"==typeof i&&i.apply(null,arguments)},error:function(){"function"==typeof t&&t.apply(null,arguments)}})}function L(e,i,t){var e=$.extend({appid:"carHousekeeper",functionId:"getBindCarUserModel",body:'{"skuId":'+pageConfig.product.skuid+',"source":"M\u5546\u54c1\u8be6\u60c5\u9875"}',jsonp:"autoskubypin"},e);return $.ajax({url:"//api.m.jd.com/api",data:e,dataType:"jsonp",jsonpCallback:"autoskubypin",success:function(){"function"==typeof i&&i.apply(null,arguments)},error:function(){"function"==typeof t&&t.apply(null,arguments)}})}function P(e,i,o){var n=t.getAreaId().areaIds,e=$.extend({modelId:"",skuId:pageConfig.product.skuid,provinceId:n[0],cityId:n[1],areaId:n[2],townId:n[3]},e);return $.ajax({url:"//cd.jd.com/auto/skubymodelidarea_v2",data:e,scriptCharset:"gbk",dataType:"jsonp",success:function(){"function"==typeof i&&i.apply(null,arguments)},error:function(){"function"==typeof o&&o.apply(null,arguments)}})}function z(i,t){if(i.length&&t){var o=i.filter('[data-modelid="'+t+'"]');o.length&&(M(v),o.hasClass("selected")?(o.removeClass("selected"),E(),n.overrideGoToPageMethod(k("")),j(b,R([]))):(i.removeClass("selected"),o.addClass("selected"),P({modelId:t}).done(function(i){if(e.is([],i)&&i.length){j(b,R(i));var o=[];$.each(i,function(e,i){i&&o.push(+i.skuId)}),q(o,t),w($(".vehicles",v),u),n.overrideGoToPageMethod(k(t))}else S&&E(),w($(".vehicles",v)),n.overrideGoToPageMethod(k("")),j(b,R([]))}).fail(function(e){console&&console.log(e)})))}}function B(i){if(e.is([],i)&&i.length){var t={};return $.each(C,function(e,i){t[i]=[]}),$.each(i,function(e,i){i in I&&$.each(I[i],function(e,i){e in t&&-1==$.inArray(i,t[e])&&t[e].push(i)})}),t}}function J(i){if(e.is([],i)&&i.length){var t=[];return $.each(i,function(e,i){i in I&&t.push(I[i])}),t}return[]}var S=!1;function F(e){var i=$("#choose-attrs"),t=B([e]);i.length&&t&&(i.find(".item").removeClass("selected"),$.each(t,function(e,t){i.find('[data-type="'+e+'"]').find('.item[data-value="'+t[0]+'"]').addClass("selected")}))}function q(e,i){var t=$("#choose-attrs"),o=B(e);if(t.length&&o){$.each(o,function(e,i){t.find('[data-type="'+e+'"] .item').each(function(){var e=$(this),t=e.data("value");-1!==$.inArray(t,i)?e.show():e.hide()})}),t.find(".item").removeClass("selected disabled").removeAttr("title"),-1!==$.inArray(y,e)?F(y):_(e[0],i);var a=J(e);a.length>0&&n.setData(a),n.initAttrSelection(),S=!0}}function E(){var e=$("#choose-attrs"),i=B([y]);if(e.length&&i){e.find(".item").removeClass("selected disabled"),$.each(i,function(i,t){e.find('[data-type="'+i+'"]').find('.item[data-value="'+t[0]+'"]').addClass("selected")}),e.find(".item").show();var t=pageConfig.product.colorSize;t.length>0&&n.setData(t),n.initAttrSelection(),S=!1}}function H(){L({}).done(function(i){if(i&&i.model&&i.model.bindCar){var t=i.model.carUserModels;e.is([],t)&&t.length?(x(v,t),g&&z($(".vehicle",v),g)):T(v,f)}}).fail(function(e){console&&console.log(e)})}function Q(e){e&&A({modelId:e}).done(function(i){i&&0==i.code?(O(v,[i.data]),z($(".vehicle",v),e)):T(v,m)}).fail(function(e){T(v,m),console&&console.log(e)})}function Y(){$("body").dialog({type:"iframe",title:"\u7ba1\u7406\u7231\u8f66",width:804,source:"//iche.jd.com/itemBox.html",onBeforeClose:function(){H(),S&&E()}})}o.addListener("onPromReady",function(e){var i=e.prom&&e.prom.carGift;p.data("carGift",i)});function K(e){p.delegate(".vehicle","click",function(){z($(".vehicle",p),$(this).data("modelid"))}),p.delegate(".other","click",function(){e?Y():i({modal:!0,complete:function(i){null!==i&&i.Identity&&i.Identity.IsAuthenticated&&(Y(),e=!0)}})}),p.delegate(".guide","click",function(){e?Y():i({modal:!0,complete:function(i){null!==i&&i.Identity&&i.Identity.IsAuthenticated&&(H(),e=!0)}})}),o.addListener("onAreaChange",function(e){var i=$(".vehicle.selected",p);i.length?i.removeClass("selected").trigger("click"):(E(),n.overrideGoToPageMethod(k("")))}),p.data("carGift")?$(".icon-present",p).css("display","inline-block"):$(".icon-present",p).hide(),o.addListener("onPromReady",function(e){e.prom&&e.prom.carGift?$(".icon-present",p).css("display","inline-block"):$(".icon-present",p).hide()}),$(".icon-present",v).ETooltips({pos:"bottom",zIndex:10})}function V(t){0!=p.length&&L({}).done(function(t){if(t&&t.model&&t.model.bindCar){var o=t.model.carUserModels;i.isLogin(function(i){i?e.is([],o)&&o.length?(x(v,o),g&&z($(".vehicle",v),g)):T(v,f):g?Q(g):T(v,m),K(i)})}}).fail(function(e){console&&console.log(e)})}module.exports.__id="vehicle",module.exports.getGiftSkus=G,module.exports.setCartBtn=N,module.exports.init=V});
/*!Name: lazyinit.js
 * Date: 2019-4-4 18:53:51 */
define("MOD_ROOT/lazyinit/lazyinit",function(require,exports,module){var n=require("MOD_ROOT/similar/similar"),i=require("MOD_ROOT/common/tools/event").Event,t=require("MOD_ROOT/lazyinit/ad"),o=require("MOD_ROOT/try/try");require("MOD_ROOT/try/try.css"),require("MOD_ROOT/ELazyload/ELazyload");var c=function(n,i,t){n.length&&n.ELazyload({type:"module",onAppear:function(){t(n,i)}})};function a(n){var i=$("#GLOBAL_FOOTER");c(i,n,function(i){var t=(i.attr("type"),n.foot||"//d.3.cn/footer?");$.ajax({url:t,dataType:"jsonp",cache:!0,scriptCharset:"gb2312",jsonpCallback:"showfooter",success:function(t){if(t&&t.content){var o=t.content.replace(/data\-lazyload/g,"src");"13314"==n.cat[0]&&(o=o.replace(/<a [^>]*>\u8425\u4e1a\u6267\u7167<\/a>(<span class="divide"><\/span>)?/,"")),i.html(o)}}})})}function e(n){var i=$("#footmark");c(i,n,function(){require.async(["MOD_ROOT/footmark/footmark","MOD_ROOT/footmark/footmark.css"],function(t){t(i,n)})})}function s(n){var i=$("#comment");c(i,n,function(){require.async(["MOD_ROOT/comment/comment","MOD_ROOT/comment/comment.css"],function(i){i.init(n)})})}function r(n){var i=$("#comment");c(i,n,function(){o.Report.init($("#try-report"),n),o.Report.getData(0)})}function O(n){o.Entry.init($("#try-entry"),n)}function u(n){var i=$("#consult");c(i,n,function(){require.async(["MOD_ROOT/consult/consult","MOD_ROOT/consult/consult.css"],function(i){i.init(n)})})}function l(n){var i=$("#club");c(i,n,function(){require.async(["MOD_ROOT/club/club","MOD_ROOT/club/club.css"],function(i){i.init(n)})})}function f(n){var i=$(".aside");c(i,n,function(){require.async(["MOD_ROOT/sidereco/sidereco","MOD_ROOT/sidereco/sidereco.css"],function(i){i.init(n)})})}function m(n){i.addListener("onPriceReady",function(){t.init(n)})}function y(i){var t=$("#similar");n.init(i,t)}function T(n){if(n.isOver){var i=$("#itemover");c(i,n,function(){require.async(["MOD_ROOT/itemover/itemover","MOD_ROOT/itemover/itemover.css"],function(i){i.init(n)})})}}function p(n){var i=$("#shop-similar-promotion");c(i,n,function(){require.async(["MOD_ROOT/shopSimilar/shopSimilar","MOD_ROOT/shopSimilar/shopSimilar.css"],function(i){i.ShopSimilar.inited||i.init(n)})})}function _(n){var i=$("#askAnswer");c(i,n,function(){require.async(["MOD_ROOT/askAnswer/askAnswer","MOD_ROOT/askAnswer/askAnswer.css"],function(i){i.init(n)})})}function R(n){var i=null;n.isYuYue&&(i="yuyue"),n.isYuShou&&(i="yushou"),n.isPinGou&&(i="pin"),n.isTuanGou&&(i="pc_tuangou"),i&&log("gz_item","gz_detail","03",i)}function d(){$('#detail .tab-main li[data-anchor="#comment"]').trigger("click"),$("#detail").length&&setTimeout(function(){$("html,body").scrollTop($("#detail").offset().top)},200)}function D(){"#comment"===location.hash&&d()}function M(n){if(!$("#iscgj").length&&!$("#choose-car").length)return!1;require.async(["MOD_ROOT/carButler/carButler","MOD_ROOT/carButler/carButler.css"],function(n){new n({el:"#iscgj",isGoToCarPage:!0}),$("#iscgj").show()})}function v(){($.browser.isIE6()||$.browser.isIE7())&&require.async(["MOD_ROOT/ie6Tip/ie6Tip","MOD_ROOT/ie6Tip/ie6Tip.css"],function(n){n.init()})}function h(n){var i=$("#J-baby");if(!i.length)return!1;var t=["MOD_ROOT/baby/baby","MOD_ROOT/baby/baby.css"];require.async(t,function(n){n.init(i)})}function b(n){f(n),s(n),r(n),O(n),u(n),l(n),y(n),a(n),e(n),m(n),T(n),p(n),_(n),D(n),R(n),v(),M(n),h(n),$("#InitCartUrl").bind("click",function(){JA&&JA.tracker.ngloader("item.010002",{sku:n.skuid,jp:n.jp})})}module.exports.__id="lazyinit",module.exports.setShopSimilar=p,module.exports.goToComment=d,module.exports.init=b});
/*!Name: detail.js
 * Date: 2019-4-4 18:53:55 */
define("PUBLIC_ROOT/modules/detail/detail",function(require,exports,module){var e=window.pageConfig.eventTarget,t=require("PUBLIC_ROOT/modules/detail/nav"),i=require("PUBLIC_ROOT/modules/detail/bookReadMore"),a=require("PUBLIC_ROOT/modules/common/core"),o=require("PUBLIC_ROOT/modules/common/tools/tools"),s=require("PUBLIC_ROOT/modules/detail/qualitylife");require("PUBLIC_ROOT/modules/ETab/ETab"),require("PUBLIC_ROOT/modules/EDropdown/EDropdown"),require("PUBLIC_ROOT/modules/ELazyload/ELazyload"),require("PUBLIC_ROOT/plugins/jQuery.scroller"),require("JDF_UI/elevator/1.0.0/elevator"),require("JDF_UI/dialog/1.0.0/dialog"),require("JDF_UI/pager/1.0.0/pager");var n=require("PUBLIC_ROOT/modules/videoBox/videoBox");function r(t){var i=$(".J-addcart-mini");i.EDropdown({onOpen:function(){$(".J-buy-num").html(a.getNum())}}),e.addListener("onStockReady",function(){t.havestock?i.removeAttr("data-disable"):i.attr("data-disable","true")})}function d(e){var t=$("#placeholder-floatnav-stop"),i=$("#club"),a=$("#consult"),o=$("#footmark"),s=null;a.length&&(s=a),i.length&&(s=i),o.length&&(s=o),t.length&&(s=t);$('<div class="pro-detail-hd-fixed-div"></div>').appendTo("body"),e.scroller({delay:0,end:s,onStart:function(){this.$el.find("[data-fixed]").addClass("pro-detail-hd-fixed"),$(".pro-detail-hd-fixed-div").show()},onEnd:function(){this.$el.find("[data-fixed]").removeClass("pro-detail-hd-fixed"),$(".pro-detail-hd-fixed-div").hide()}}),$(".detail").elevator({floorClass:"detail-elevator-floor",elevatorClass:"detail-elevator",handlerClass:"detail-elevator-handler",selectClass:"current"})}function l(e){e.ELazyload({type:"module",onAppear:function(){a.wideVersion&&new t({$el:$("#J-detail-nav")})}})}var c={inited:!1,init:function(e){this.cfg=e,this.ITEMS_PER_PAGE=6,this.page=1,this.$el=$("#e-comment"),this.$trigger=$('#detail [data-anchor="#e-comment"]'),this.inited||(this.bindEvent(),this.get(this.page),this.inited=!0)},bindEvent:function(){this.$el.delegate(".J-more","click",$.proxy(this.handleClick,this))},handleClick:function(e){var t=$(e.currentTarget),i=t.prev();i.is(".close")?(i.removeClass("close").addClass("open"),t.addClass("hover").find("s").text("\u6536\u8d77")):(i.removeClass("open").addClass("close"),t.removeClass("hover").find("s").text("\u5c55\u5f00\u5168\u6587"))},getTPL:function(){return'            <div class="book-review">                <div class="J-book-review">                    {for item in reviews.list}                    <div class="review-item">                        <div class="user-line">                            <span class="avatar"><img src="${item.userHeadFullUrl}" alt=""/></span>                            <span class="name">${item.nickname}</span>                            <span class="star star${item.score}"></span>                            <span class="time">${item.creationTime|getTime}</span>                        </div>                        <div class="review-con">                            <i class="arrowUp"></i>                            <div class="review-content">${item.contents|stripUnsafeTags|lineToBr}</div>                            <div class="more EDropdown J-more hide">                                <a href="#none"><s>\u5c55\u5f00\u5168\u6587</s> <i class="arrow arr-close"></i></a>                            </div>                        </div>                    </div>                    {/for}                </div>                <div class="com-table-footer">                    <div class="ui-page-wrap clearfix">                        <div class="ui-page"></div>                    </div>                </div>            </div>'},get:function(e){var t='{"currentPage":'+e+',"pageSize":'+this.ITEMS_PER_PAGE+',"eBookId":'+this.cfg.skuid+"}";this.page=e||1,$.ajax({url:"//gw-e.jd.com/client.action",data:{functionId:"greatJsonPComments",body:t},cache:!0,dataType:"jsonp",jsonpCallback:"func",scriptCharset:"utf-8",success:$.proxy(this.set,this)})},set:function(e){if(!(this.$el.length&&e&&e.reviews&&e.reviews.list.length))return this.$trigger.hide(),this.$el.hide(),!1;this.$trigger.show(),this.$el.show(),e._MODIFIERS={getTime:function(e){return e.substring(0,e.lastIndexOf(" "))},lineToBr:function(e){return e.replace(/\n/gi,"<br>")},stripUnsafeTags:function(e){return e.replace(/<script>|<\/script>|<style>|<\/style>|<iframe>|<\/iframe>/g,"")}},this.$el.find(".mc").html(this.getTPL().process(e)),this.$trigger.find("s").html("("+e.greatCount+")"),this.setPager(e.greatCount),this.setMore()},setMore:function(){this.$el.find(".review-item .review-content").each(function(){var e=$(this).outerHeight();e>120&&$(this).attr("data-open",e).addClass("close").parents(".review-item").eq(0).addClass("has-more")})},setPager:function(e){var t=this;this.$el.find(".ui-page").pager({total:e,pageSize:this.ITEMS_PER_PAGE,currentPageClass:"ui-page-curr",currentPage:this.page,pageHref:"#e-comment",callback:function(e){t.get(e)}})}};function f(e){if(e.isPop&&$.ajax({url:"//c.3.cn/template/channel",data:{productId:e.mainSkuId||"",venderId:e.venderId||"",keys:"headContent,bottomContent"},dataType:"jsonp",scriptCharset:"gbk",success:function(e){var t=$("#J-detail-pop-tpl-top-new"),i=$("#J-detail-pop-tpl-bottom-new");e&&e.headContent&&t.html(e.headContent),e&&e.bottomContent&&i.html(e.bottomContent)}}),/debug=disable_detail/.test(location.href))return!1;$.ajax({url:e.desc,dataType:"jsonp",cache:!0,jsonpCallback:"showdesc",success:function(t){var a=$("#J-detail-content");e.isEBook?(a.html('    {if list.editorPick}    <div class="formwork_bt" id="editorPick" name="detail-tag-id-0" text="\u7f16\u8f91\u63a8\u8350">        <div class="formwork_bt_it" ><span>\u7f16\u8f91\u63a8\u8350</span></div>        <div class="con">${list.editorPick}</div>        <div class="more"><a href="javascript:void(0)">\u67e5\u770b\u5168\u90e8\u2193</a></div>    </div>    {/if}    {if list.contentInfo}    <div class="formwork_bt" id="contentInfo" name="detail-tag-id-1" text="\u5185\u5bb9\u7b80\u4ecb">        <div class="formwork_bt_it"><span>\u5185\u5bb9\u7b80\u4ecb</span></div>        <div class="con">${list.contentInfo}</div>        <div class="more"><a href="javascript:void(0)">\u67e5\u770b\u5168\u90e8\u2193</a></div>    </div>    {/if}    {if list.authorInfo}    <div class="formwork_bt" id="authorInfo" name="detail-tag-id-2" text="\u4f5c\u8005\u7b80\u4ecb">        <div class="formwork_bt_it"><span>\u4f5c\u8005\u7b80\u4ecb</span></div>        <div class="con">${list.authorInfo}</div>        <div class="more"><a href="javascript:void(0)">\u67e5\u770b\u5168\u90e8\u2193</a></div>    </div>    {/if}    {if list.catalog}    <div class="formwork_bt" id="catalog" name="detail-tag-id-3" text="\u76ee\u5f55">        <div class="formwork_bt_it"><span>\u76ee\u5f55</span></div>        <div class="con">${list.catalog}</div>        <div class="more"><a href="javascript:void(0)">\u67e5\u770b\u5168\u90e8\u2193</a></div>    </div>    {/if}    {if list.mediaComments}    <div class="formwork_bt" id="mediaComments" name="detail-tag-id-4" text="\u5a92\u4f53\u8bc4\u8bba">        <div class="formwork_bt_it"><span>\u5a92\u4f53\u8bc4\u8bba</span></div>        <div class="con">${list.mediaComments}</div>        <div class="more"><a href="javascript:void(0)">\u67e5\u770b\u5168\u90e8\u2193</a></div>    </div>    {/if}    {if list.preface}    <div class="formwork_bt" id="preface" name="detail-tag-id-5" text="\u524d\u8a00">        <div class="formwork_bt_it"><span>\u524d\u8a00</span></div>        <div class="con">${list.preface}</div>        <div class="more"><a href="javascript:void(0)">\u67e5\u770b\u5168\u90e8\u2193</a></div>    </div>    {/if}    {if list.digest}    <div class="formwork_bt" id="digest" name="detail-tag-id-6" text="\u7cbe\u5f69\u4e66\u6458">        <div class="formwork_bt_it"><span>\u7cbe\u5f69\u4e66\u6458</span></div>        <div class="con">${list.digest}</div>        <div class="more"><a href="javascript:void(0)">\u67e5\u770b\u5168\u90e8\u2193</a></div>    </div>    {/if}    {if list.illustration}    <div class="formwork_bt" id="illustration" name="detail-tag-id-7" text="\u7cbe\u5f69\u63d2\u56fe">        <div class="formwork_bt_it"><span>\u7cbe\u5f69\u63d2\u56fe</span></div>        <div class="con">${list.illustration}</div>        <div class="more"><a href="javascript:void(0)">\u67e5\u770b\u5168\u90e8\u2193</a></div>    </div>    {/if}'.process({list:t})),$("#illustration img").load(function(){p($("#illustration"))}),p(a.find(".formwork_bt"))):(a.html(t.content.replace(/data-lazyload="done"/g,"")),1713==e.cat[0]&&(3!==e.pType&&4!==e.pType||i.bookInit())),a.ELazyload({source:"data-lazyload"}),l($("#detail"))}})}function v(e){if(pageConfig.product.skuMarkJson&&pageConfig.product.skuMarkJson.pg)return!1;if(e.price){var t=$(".J-addcart-mini"),i=parseFloat(e.price.p),a=e.price.id.replace("J_","");i&&(i>0?t.find(".J-p-"+a).html("\uffe5"+e.price.p):t.find(".J-p-"+a).html("\u6682\u65e0\u62a5\u4ef7"))}}function m(e){var t=e.parents(".formwork_bt").eq(0).offset().top;$("body").scrollTop()?$("body").scrollTop(t):$("html").scrollTop(t)}function p(e){e.each(function(e){var t=$(this).find(".more"),i=$(this).find(".con");if(0!=t.length&&0!=i.length){var a;i.height()>440&&(a=440,i.css({height:a,overflow:"hidden"}),t.show().toggle(function(){$(this).html('<a href="javascript:void(0)">\u6536\u8d77\u5168\u90e8\u2191</a>'),i.css({height:"auto",overflow:"hidden"}),m($(this))},function(){$(this).html('<a href="javascript:void(0)">\u67e5\u770b\u5168\u90e8\u2193</a>'),i.css({height:a,overflow:"hidden"}),m($(this))}))}})}function h(t){var i=$("#loc-map");if(!i.length)return!1;function a(){var e=readCookie("ipLocation");return e||"%u5317%u4EAC"}function s(){return t.decorationCurrentCity||o.getAreaId().areaIds[0]}function n(){return"//c.3.cn/store/template?"+$.param({storeGroupId:t.storeGroupId||"",venderId:t.venderId,pName:a(),isNarrow:!(pageConfig.wideVersion&&pageConfig.compatible),provinceId:s()})}var r='<iframe id="loc-map-iframe" src="{0}" style="width:{1}px;height:{2}px" marginheight="0" frameborder="0" scrolling="no"></iframe>',d=r.format(n(),pageConfig.wideVersion&&pageConfig.compatible?990:750,526);i.html(d),e.addListener("onAreaChange",function(){$("#loc-map-iframe").attr("src",n())})}function u(e,t){737===e.cat[0]&&$.ajax({url:"//dx.3.cn/afterSaleDesc/"+(e.mainSkuId||e.skuid),jsonpCallback:"showAfterSaleDesc",dataType:"jsonp",cache:!0,success:function(e){e&&e.content&&t.html(e.content).ELazyload({source:"data-lazyload"})}})}function g(e){$("#e-comment").length&&e.isEBook&&c.init(e)}function b(t){e.addListener("onVideoData",function(e){require.async(["PUBLIC_ROOT/modules/detail/video"],function(i){i.init(e.data,t)})})}function k(e){var t=$("#tencent-video");if(!t.length||!e.imageAndVideoJson.infoVideoId)return!1;function i(i){if(i&&i.playUrl){e.tecentVideoData=i.playUrl,n.getVideojs({callback:a});function a(){var e={autoplay:!1,controls:!0,preload:"auto"};t.html('                    <video id="detail-video-player"                        class="video-js vjs-default-skin"                        poster="{1}"                        width="750"                        height="422"                        controls>                        <source src="{0}" type="video/mp4"> </source>                        <p class="vjs-no-js"> \u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 HTML 5 Video \u6807\u7b7e\uff0c\u8bf7\u5347\u7ea7\u6d4f\u89c8\u5668\u3002</p>                    </video>                    <style>#detail-video-player{display:block;margin: 0 auto;}</style>'.format(i.playUrl,i.imageUrl||"misc.360buyimg.com/lib/img/e/blank.gif"));var a=videojs("detail-video-player",e);a.on("ready",function(){this.addClass("vjs-has-started")}),a.on("error",function(e){"undefined"!=typeof console&&console.info("Video loaded Error.")})}}}$.ajax({url:"//c.3.cn/tencent/video_v2",dataType:"jsonp",data:{vid:e.imageAndVideoJson.infoVideoId,type:1,from:1,appid:16},success:i})}function C(t){e.addListener("onPriceReady",v);var i=$("#detail");i.ETab({onReady:function(){var t=this,i=$("#guarantee"),a=this.triggers.filter('[clstag="shangpin|keycount|product|psaleservice"]'),o=this.items.eq(a.index()),s=pageConfig.product.specialAttrs.join("|").match(/SoldOversea-([^\|]*)/);s=s?s[1]:-1;function n(){var e=readCookie("ipLoc-djd");(e?e.split("-")[0]:-1)in{32:"\u53f0\u6e7e",52993:"\u6e2f\u6fb3",53283:"\u6d77\u5916"}?(a.hide(),o.hide(),i.remove(),a.hasClass("current")&&t.go(0)):a.is(":hidden")&&(a.css("display","inline-block"),$("#detail").after(i),t.go(t.triggers.filter(".current").index()))}-1!=="1|2|3|4|5|6|7".indexOf(s)&&a.length>0&&(n(),e.addListener("onAreaChange",n))},onBeforeSwitch:function(e){a(this.triggers.eq(e))},onSwitch:function(e){var i=this.triggers.eq(e),a=this.items.eq(e);if(o(i),i.is('[data-anchor="#comment"]')){var s=$("#comment").data("ELazyload");$.each(s,function(e,t){t.check(t.$targets)})}if(i.is('[data-anchor="#shop-similar-promotion"]')){var s=$("#shop-similar-promotion").data("ELazyload");$.each(s,function(e,t){t.check(t.$targets)})}if(i.is('[data-anchor="#club"]')){var s=$("#club").data("ELazyload");$.each(s,function(e,t){t.check(t.$targets)})}"\u552e\u540e\u4fdd\u969c"===i.text()&&u(t,a)}});function a(e){var t=$("#consult,#comment,#e-comment,#guarantee,#club,#try-report,#askAnswer,#J-bookcomment");t.show(),e.is('[data-anchor="#comment"]')?$("#guarantee,#e-comment").hide():e.is('[data-anchor="#bookcomment"]')?$("#guarantee,#e-comment,#comment").hide():e.is('[data-anchor="#club"]')?$("#consult,#comment,#guarantee,#try-report,#J-bookcomment").hide():e.is('[data-anchor="#try-holder"]')?$("#comment,#guarantee").hide():e.is('[data-anchor="#shop-similar-promotion"]')?$("#consult,#comment,#guarantee,#askAnswer").hide():t.show()}function o(e){var t=e.attr("data-anchor"),i=$(t),a=$("#detail .tab-main").hasClass("pro-detail-hd-fixed");if(!i.length)return!1;a&&function(){setTimeout(function(){$("html,body").scrollTop(i.offset().top-1)},10)}()}$(".J-more-param").bind("click",function(){i.data("ETab").go(1)}),i.ELazyload({source:"data-lazyload"}),g(t),r(t),f(t),d(i),k(t),h(t),b(t),s.init(t)}module.exports.__id="detail",module.exports.init=C});
