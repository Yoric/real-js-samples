/*!Name: EDropdown.js
 * Date: 2019-4-4 18:53:49 */
!function(t,e,s){"use strict";var i="EDropdown",n=function(){},o={event:"mouseenter",trigger:null,current:"hover",autoClose:!1,delay:100,close:"[data-close]",disable:"[data-disable]",head:'[data-drop="head"]',content:null,lazyload:null,onOpen:n,onClose:n,onTrigger:n};function h(e,s){this.$el=e,this.settings=t.extend({},o,s),this._defaults=o,this._name=i,this._version="@VERSION",this.init()}h.prototype={init:function(){this.$el.attr("data-role","drop"),this.isMouseEvt=/mouse/.test(this.settings.event),this.timer=null,this.settings.debug&&console.log("click"===this.settings.event&&!this.settings.autoClose),"click"!==this.settings.event||this.settings.autoClose||(this.settings.trigger=this.$el.find(this.settings.head)),this.$triggers=this.settings.trigger?this.$el.find(this.settings.trigger):this.$el,this.bindEvent()},bindEvent:function(){var e=this;if(this.isMouseEvt){if(this.$triggers.each(function(){t(this).unbind("mouseenter").bind("mouseenter",function(){e.handleEvent(t(this),!1)}).bind("mouseleave",function(){e.handleEvent(t(this),!0)})}),this.settings.content){var n=[this.settings.event,i,t.fn[i+"_guid"]].join(".");t(s).undelegate(n).delegate(this.settings.content,n,function(){clearTimeout(e.timer)}),t(s).undelegate("mouseleave").delegate(this.settings.content,"mouseleave",function(){e.handleEvent(t(this),t(this).data("open"))})}}else this.$triggers.unbind("click").bind("click",function(){var s=t(this),i=s.attr("data-role")?s:s.parents('[data-role="drop"]').eq(0);e.trigger(i,!!i.data("open"))}),this.$el.delegate(this.settings.close,"click",function(){e.close()})},handleEvent:function(e,s){if(e.attr("data-disable"))return!1;this.isMouseEvt||(this.settings.delay=0),this.settings.content&&(1===t(this.settings.content).length&&1===this.$el.length||console.log("\u300c"+i+"\u300d Content & jQuery element should be juse select only one element.")),this.isOpen=!s,this.delay(e,s)},delay:function(t,e){var s=this;clearTimeout(this.timer),this.timer=setTimeout(function(){s.trigger(t,e)},this.settings.delay)},trigger:function(t,e){this.isOpen=e,e?this.close(t):this.open(t),this.settings.lazyload&&this.loadImages(this.$el),this.settings.onTrigger.call(this,t)},loadImages:function(e){var s=this.settings.lazyload;e.find("["+s+"]").each(function(){var e=t(this).attr(s);e&&t(this).attr("src",e).removeAttr(s)})},open:function(e){e=e||this.$el,e.addClass(this.settings.current).data("open",!0),this.settings.content&&t(this.settings.content).show(),this.settings.onOpen.call(this,e)},close:function(e){e=e||this.$el,e.removeClass(this.settings.current).removeData("open"),this.settings.content&&t(this.settings.content).hide(),this.settings.onClose.call(this,e)}},t.fn[i+"_guid"]=0,t.fn[i]=function(e){return this.length||"undefined"==typeof console?this.each(function(){t(this).data("Eguid",t.fn[i+"_guid"]++);var s=new h(t(this),e);t(this).data(i)||t(this).data(i,s)}):(console.log("\u300c"+i+"\u300d The elements["+this.selector+"] you passed is empty."),this)}}(jQuery,window,document);
