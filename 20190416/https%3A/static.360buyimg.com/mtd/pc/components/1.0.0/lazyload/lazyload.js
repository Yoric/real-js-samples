define("//static.360buyimg.com/mtd/pc/components/1.0.0/lazyload/lazyload.js",[],function(){"use strict";!function(window,$){var $window=$(window);$.fn.o2lazyload=function(options){var self=this,$self=$(self),settings={threshold:200,delay:100,container:window,source:"data-lazy-img",supportWebp:!0,cacheSupportWebp:!0,cacheSupportWebpKey:"o2-webp",webpReg:/\/\/img\d+.360buyimg.com\/.+\.(jpg|png)$/,webpSuffix:".webp",webpQuality:80,webpDisableKey:"data-webp",webpDisableValue:"no",forceOpenOrCloseWebP:"o2-webp",placeholder:"//misc.360buyimg.com/lib/img/e/blank.gif"};options&&$.extend(settings,options);var inviewport=function(){var e=function(e){var t;return t=void 0===settings.container||settings.container===window?(window.innerHeight?window.innerHeight:$window.height())+$window.scrollTop():$(settings.container).offset().top+$(settings.container).height(),t<=$(e).offset().top-settings.threshold},t=function(e){var t;return t=void 0===settings.container||settings.container===window?$window.width()+$window.scrollLeft():$(settings.container).offset().left+$(settings.container).width(),t<=$(e).offset().left-settings.threshold},i=function(e){var t;return t=void 0===settings.container||settings.container===window?$window.scrollTop():$(settings.container).offset().top,t>=$(e).offset().top+settings.threshold+$(e).height()},n=function(e){var t;return t=void 0===settings.container||settings.container===window?$window.scrollLeft():$(settings.container).offset().left,t>=$(e).offset().left+settings.threshold+$(e).width()};return function(o){return!(t(o)||n(o)||e(o)||i(o))}}(),Lazyload={$elements:[],webpSupported:!1,forceOpenWebP:!1,_setImg:function(e,t,i){t.attr("src",i),e.onload=null},_errorLoadImg:function(e,t,i){(this.webpSupported&&t.attr(settings.webpDisableKey)!==settings.webpDisableValue||this.forceOpenWebP)&&(e.onload=$.proxy(function(){this._setImg(e,t,i)},this),e.src=i),e.onerror=null},_loadImg:function(e){var t=e.attr(settings.source),i=e.attr(settings.webpDisableKey),n=t;this.webpSupported&&(settings.webpReg.test(t)&&i!==settings.webpDisableValue||this.forceOpenWebP)&&(n=t+"!q"+settings.webpQuality+settings.webpSuffix);var o=new Image;o.onload=$.proxy(function(){this._setImg(o,e,n)},this),o.onerror=$.proxy(function(){this._errorLoadImg(o,e,t)},this),o.src=n},_loadImgs:function(){this.$elements=$self.find("img["+settings.source+"]["+settings.source+'!="done"]'),this.$elements.each($.proxy(function(e,t){var i=$(t);inviewport(t)&&void 0!==i.attr(settings.source)&&(i.attr("src")||i.attr("src",settings.placeholder),this._loadImg(i),i.attr(settings.source,"done"))},this))},_loadTimer:null,_update:function(){clearTimeout(this._loadTimer),this._loadTimer=setTimeout($.proxy(this._loadImgs,this),settings.delay)},_forceUpdateArea:function(e,t){setTimeout($.proxy(this._forceLoadImgs,this,t),settings.delay)},_forceLoadImgs:function(e){this.$elements=$self.find("#"+e).find("img["+settings.source+"]["+settings.source+'!="done"]'),this.$elements.each($.proxy(function(e,t){var i=$(t);void 0!==i.attr(settings.source)&&(i.attr("src")||i.attr("src",settings.placeholder),this._loadImg(i),i.attr(settings.source,"done"))},this))},_initEvent:function(){$(document).ready($.proxy(this._update,this)),$window.bind("scroll.o2-lazyload",$.proxy(this._update,this)),$window.bind("resize.o2-lazyload",$.proxy(this._update,this)),$self.bind("renderImage",$.proxy(this._forceUpdateArea,this))},_isInit:function(){return"1"===$self.attr(settings.source+"-install")||($self.attr(settings.source+"-install","1"),!1)},init:function(e){if(!this._isInit()){var t=Util.getUrlParams(settings.forceOpenOrCloseWebP);this.webpSupported=e,"1"===t&&(this.forceOpenWebP=!0),this._initEvent()}}},Util={setCookie:function(e,t,i,n){if(n||(n=location.hostname),arguments.length>2){var o=new Date((new Date).getTime()+parseInt(60*i*60*24*30*1e3));document.cookie=e+"="+escape(t)+"; path=/; domain="+n+"; expires="+o.toGMTString()}else document.cookie=e+"="+escape(t)+"; path=/; domain="+n},getCookie:function(e){try{return null==document.cookie.match(new RegExp("(^"+e+"| "+e+")=([^;]*)"))?"":decodeURIComponent(RegExp.$2)}catch(t){return null==document.cookie.match(new RegExp("(^"+e+"| "+e+")=([^;]*)"))?"":RegExp.$2}},getUrlParams:function(key){var query=location.search,reg="/^.*[\\?|\\&]"+key+"\\=([^\\&]*)/";reg=eval(reg);var ret=query.match(reg);return null!=ret?decodeURIComponent(ret[1]):""}},checkWebp=function(e){if("0"===Util.getUrlParams(settings.forceOpenOrCloseWebP))return void e(!1);if(!settings.supportWebp)return void e(!1);if(settings.cacheSupportWebp){var t=Util.getCookie(settings.cacheSupportWebpKey);if(""!==t)return void e("true"===t||t===!0)}var i=new Image;i.onload=function(){var t=i.width>0&&i.height>0;e(t),settings.cacheSupportWebp&&Util.setCookie(settings.cacheSupportWebpKey,t,1)},i.onerror=function(){e(!1),settings.cacheSupportWebp&&Util.setCookie(settings.cacheSupportWebpKey,!1,1)},i.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA"};return checkWebp(function(e){Lazyload.init(e)}),this}}(window,jQuery)});