/* jdf-1.0.0/ setUserInfo.js Date:2019-04-10 15:05:10 */
define("//misc.360buyimg.com/jdf/1.0.0/unit/setUserInfo/5.0.0/setUserInfo.js",["//misc.360buyimg.com/jdf/1.0.0/ui/switchable/1.0.0/switchable.js","//misc.360buyimg.com/jdf/1.0.0/ui/dropdown/1.0.0/dropdown.js"],function(require){require("//misc.360buyimg.com/jdf/1.0.0/ui/switchable/1.0.0/switchable.js");require("//misc.360buyimg.com/jdf/1.0.0/ui/dropdown/1.0.0/dropdown.js");var e=function(a){a=$.extend({el:$("#loginbar,#ttbar-login"),callback:null},a||{});var b=function(){return"https:"==document.location.protocol?"https://":"http://"};var c='<div class="dt cw-icon">						<i class="icon-plus-nickname"></i>						<i class="ci-right"><s>\u25c7</s></i>						<a class="nickname" target="_blank" href="//home.jd.com/"></a>					</div>					<div class="dd dorpdown-layer"></div>';$("#shortcut-2014 #ttbar-home .iconfont").length&&(c='<div class="dt cw-icon">						<i class="icon-plus-nickname"></i>						<a class="nickname" target="_blank" href="//home.jd.com/"></a>						<i class="iconfont">&#xe605;</i>					</div>					<div class="dd dorpdown-layer"></div>'),$.ajax({url:b()+"passport.jd.com/new/helloService.ashx",dataType:"jsonp",scriptCharset:"GBK",success:function(b){if(!b)return!1;b.nick?(a.el.addClass("dorpdown"),a.el.html(c),a.el.find(".nickname").html(b.nick),a.el.find(".dd").html('<div class="dd-spacer"></div><div class="dd-inner"><span class="loading"></span></div>'),e(),a.el.dropdown({enterDelay:100,trigger:!0,current:"hover",onchange:function(){}})):a.el.html(b.info);var d=function(){clearTimeout(f),$.isFunction(a.callback)&&a.callback(b),d=$.noop};var f=setTimeout(function(){d()},2e3);if(b.sso){var g=b.sso.length;$.each(b.sso,function(a,b){$.getJSON(b).complete(function(){0==--g&&d()})})}else d()}});function d(a,b){var c="//misc.360buyimg.com/lib/img/e/blank.gif";var d='<div class="u-plus"><a href="https://passport.jd.com/uc/login?ltype=logout&ReturnUrl='+window.location.href+'" class="link-logout">\u9000\u51fa</a><a href="https://plus.jd.com/index" target="_blank" class="icon-plus-dropdown"></a></div>';var e='				<div class="dd-spacer"></div>				<div class="userinfo">					<div class="u-pic"><a target="_blank" href="//home.jd.com/"><img src="'+c+'" width="60" height="60" /></a></div>'+d+'					<div class="u-msg"></div>				</div>			';var a=a||0;var f;var g={mfsy:{name:"\u514d\u8d39\u8bd5\u7528",url:"//plus.jd.com/index"},yfdm:{name:"\u8fd0\u8d39\u5355\u514d",url:"//vip.jd.com/home.html"},srtq:{name:"\u751f\u65e5\u7279\u6743",url:"//vip.jd.com/home.html"},sdtk:{name:"\u95ea\u7535\u9000\u6b3e",url:"//vip.jd.com/home.html"},smhx:{name:"\u4e0a\u95e8\u6362\u65b0",url:"//vip.jd.com/home.html"},jxzlb:{name:"\u4eac\u4eab\u503c\u793c\u5305",url:"//vip.jd.com/home.html"},gbzx:{name:"\u8d35\u5bbe\u4e13\u7ebf",url:"//vip.jd.com/home.html"},yfsm:{name:"\u8fd0\u8d39\u53cc\u514d",url:"//vip.jd.com/home.html"},zxj:{name:"\u4e13\u4eab\u4ef7",url:"//bvip.jd.com"},zzfp:{name:"\u81ea\u4e3b\u53d1\u7968",url:"//bvip.jd.com"},mfxz:{name:"\u552e\u540e\u53cc\u514d",url:"//bvip.jd.com"},shsm:{name:"\u4e13\u4eab\u8fd0\u8d39",url:"//bvip.jd.com"},zskf:{name:"\u4e13\u5c5e\u5ba2\u670d",url:"//bvip.jd.com"}};f=7==b?{has:["zxj","zzfp","shsm","mfxz","zskf"]}:200>=a?{hasnt:["yfdm","srtq","sdtk","smhx","jxzlb","gbzx","yfsm"]}:500>a?{has:["yfdm"],hasnt:["srtq","sdtk","smhx","jxzlb","gbzx","yfsm"]}:5e3>a?{has:["yfdm","srtq"],hasnt:["sdtk","smhx","jxzlb","gbzx","yfsm"]}:1e4>a?{has:["yfdm","srtq","sdtk","smhx"],hasnt:["jxzlb","gbzx","yfsm"]}:2e4>a?{has:["yfdm","srtq","sdtk","smhx","jxzlb"],hasnt:["gbzx","yfsm"]}:{has:["yfsm","srtq","sdtk","smhx","jxzlb","gbzx"]};var h=7==b?[]:['<div class="badge-panel fore1"><a href="https://plus.jd.com/index" target="_blank"><i></i><p class="u-name">\u514d\u8d39\u8bd5\u7528</p></a></div>'];$.each(f,function(a){for(var b=0,c=this.length;c>b;b++)h.push('<div class="badge-panel"><a href="'+g[this[b]].url+'" target="_blank"><i class="'+a+"-"+this[b]+'"></i><p class="u-name">'+g[this[b]].name+"</p></a></div>")});var i='<div class="badge-list">								<a href="javascript:void(0);" class="badge-list-prev">&lt;</a>								<div class="u-badges">									<div class="badge-panel-main">'+h.join("")+'</div>								</div>								<a href="javascript:void(0);" class="badge-list-next">&gt;</a>							</div>';return e+=i}function e(){$.ajax({url:"//passport.jd.com/user/petName/getUserInfoForMiniJd.action",dataType:"jsonp",success:function(b){if(!b)return!1;var c=b.userLevel||1;var e=parseInt(b.plusStatus);var f=b.userScoreVO?b.userScoreVO.totalScore:0;if(7==c){var g="//bvip.jd.com";$("#shortcut-2014 li.fore4 .dt a").attr("href",g)}var h=d(f,c);a.el.find(".dd").html(h),b.imgUrl&&a.el.find(".u-pic img").attr("src",b.imgUrl);var i=a.el.find(".u-msg");var j=a.el.find(".badge-panel-main .fore1");e>=1&&4>=e&&(a.el.find(".dt").addClass("icon-plus-state"+e),a.el.find(".dd").addClass("icon-plus-state"+e));function m(){1==e?(i.html('<a href="//plus.jd.com/index" target="_blank">\u5f00\u901aPLUS \u5e73\u5747\u77011012\u5143/\u5e74&gt;</a>'),j.find(".u-name").html("\u5f00\u901a\u6b63\u5f0f\u7248")):2==e?(i.html('<a href="//plus.jd.com/index" target="_blank">\u5f00\u901aPLUS \u5e73\u5747\u77011012\u5143/\u5e74&gt;</a>'),j.find(".u-name").html("\u5f00\u901a\u6b63\u5f0f\u7248"),j.addClass("u-dis")):3==e?(i.html('<a href="//plus.jd.com/index" target="_blank">\u73b0\u5728\u7eed\u8d39PLUS\u4eab\u7279\u60e0\u4ef7&gt;</a>'),j.find(".u-name").html("PLUS\u4e13\u4eab")):4==e?(i.html('<a href="//plus.jd.com/index" target="_blank">\u7eed\u8d39PLUS \u5e73\u5747\u77011012\u5143/\u5e74&gt;</a>'),j.find(".u-name").html("PLUS\u7eed\u8d39"),j.addClass("u-dis")):5==e?(i.html('<a href="//plus.jd.com/index" target="_blank">\u53ea\u5dee\u4e00\u6b65 \u6fc0\u6d3bPLUS\u4eab\u7279\u6743&gt;</a>'),j.find(".u-name").html("\u6fc0\u6d3bPLUS"),j.addClass("u-dis")):(i.html('<a href="//plus.jd.com/index" target="_blank">\u5f00\u901aPLUS \u5e73\u5747\u77011012\u5143/\u5e74&gt;</a>'),j.find(".u-name").html("\u514d\u8d39\u8bd5\u7528"),j.addClass("u-dis"))}function n(){i.html('<a href="//b.jd.com" target="_blank">\u4f01\u4e1a\u4f1a\u5458\u4eab\u7279\u4ef7&gt;</a>'),a.el.addClass("u-ent"),a.el.find(".icon-plus-dropdown").attr("href","//bvip.jd.com")}switch(c){case 7:n();break;default:m()}$(".badge-list").switchable({type:"slider",mainClass:"badge-panel",contentClass:"badge-panel-main",prevClass:"badge-list-prev",nextClass:"badge-list-next",step:2,hasPage:!0})}})}};return e});
/* jdf-1.0.0/ event.js Date:2019-04-10 15:05:10 */
define("//misc.360buyimg.com/jdf/1.0.0/unit/event/1.0.0/event.js",[],function(){var c={on:function(a,b){var c=this;this.list=this.list||(this.list=[]),this.list[a]=this.list[a]||[];if("undefined"==typeof b)var b=function(){c[a]&&c[a]()};"function"==typeof b&&this.list[a].push(b)},off:function(a,b){if("function"==typeof b){if("undefined"!=typeof this.list){var c=this.list[a];if(c){var d=c.length;for(;d--;)c[d]===b&&c.splice(d,1)}}}else this.list[a]=[]},trigger:function(a,b){if("undefined"!=typeof this.list){var c=this.list[a];if(c)for(var d in c)c.hasOwnProperty(d)&&"function"==typeof c[d]&&c[d](b)}},removeAll:function(){this.list=[]}};return c});
/* jdf-1.0.0/ dialog.js Date:2019-04-10 15:05:11 */
!function(a){a.ui.define("dialog",{options:{hasCssLink:!0,baseVersion:"1.0.0",cssLinkVersion:"1.0.0",maskHas:!0,maskClass:"ui-mask",maskIframe:!1,maskClose:!1,opacity:.15,zIndex:9998,type:"text",source:null,extendMainClass:null,autoIframe:!0,autoOpen:!0,autoCloseTime:0,title:!0,hasButton:!1,submitButton:"\u786e\u8ba4",cancelButton:"\u53d6\u6d88",onSubmit:null,onCancel:null,onBeforeClose:null,closeButton:!0,onReady:null,width:480,height:null,fixed:!1,autoUpdate:!1,maskId:null,mainId:null,contentId:null,titleId:null,iframeName:"dialogIframe",iframeTimestamp:!0},init:function(){var b=this.options;a.browser.isIE6()&&(b.fixed=!1),this.createMain(),this.createMask(),this.mainStyle(),b.autoOpen?this.open():this.hide(),this.bind()},show:function(){this.mask&&this.mask.show(),this.el.show()},hide:function(){this.mask&&this.mask.hide(),this.el.hide()},tpl:{mask:'<div class="ui-mask"></div>',close:'<a class="ui-dialog-close" title="\u5173\u95ed"><span class="ui-icon ui-icon-delete"></span></a>',title:'<div class="ui-dialog-title">						<span><%=title%></span>					</div>				',wrap:'<div class="ui-dialog"></div>',conten:'<div class="ui-dialog-content"></div>',button:'<div class="ui-dialog-btn">						<%if($.trim(submit)){%><a class="ui-dialog-btn-submit"><%=submit%></a><%}%>						<%if($.trim(cancel)){%><a class="ui-dialog-btn-cancel"><%=cancel%></a><%}%>					</div>				'},createMain:function(){var c=this.options;var d="";c.title&&(d=a.tpl(this.tpl.title,{title:c.title}));var e=a.tpl(this.tpl.button,{submit:this.options.submitButton,cancel:this.options.cancelButton});var f=d+this.tpl.conten+(c.hasButton?e:"");this.el=a(this.tpl.wrap),c.extendMainClass&&this.el.addClass(c.extendMainClass),a(f).appendTo(this.el),this.el.appendTo("body"),this.content=this.el.find(".ui-dialog-content"),this.title=this.el.find(".ui-dialog-title"),c.mainId&&this.el.attr("id",c.mainId),c.contentId&&this.content.attr("id",c.contentId),c.titleId&&this.title.attr("id",c.titleId),c.closeButton&&this.el.append(this.tpl.close)},createMask:function(){var b=this;var c=this.options;if(c.maskHas){{this.mask=a(document.createElement("div"))}this.mask.addClass(c.maskClass).css({position:"absolute",left:0,top:0,opacity:c.opacity,zIndex:c.zIndex,backgroundColor:"#000",width:a.page.docWidth(),height:a.page.docHeight()}),c.maskId&&this.mask.attr("id",c.maskId),a("."+c.maskClass)[0]||this.mask.appendTo("body"),(a.browser.isIE6()||c.maskIframe)&&this.mask.append('<iframe src="about:blank" class="jdMaskIframe" frameBorder="0" style="width:100%;height:100%;position:absolute;z-index:'+(c.zIndex+1)+';opacity:0;filter:alpha(opacity=0);top:0;left:0;">'),a(window).resize(function(){b.mask.css({width:a.page.docWidth(),height:a.page.docHeight()})})}},getPadding:function(a){return{width:parseInt(a.css("paddingLeft"),10)+parseInt(a.css("paddingRight"),10),height:parseInt(a.css("paddingTop"),10)+parseInt(a.css("paddingBottom"),10)}},mainStyle:function(){var b=this.options;b.title&&(b.height=b.height?b.height+28:b.height,this.title.css({width:b.width-this.getPadding(this.content).width})),this.content.css({height:b.height?b.height:"",width:b.width?b.width-this.getPadding(this.content).width:"",overflow:"hidden"}),b.width&&this.el.css({width:b.width});var c=b.fixed&&!a.browser.isIE6()?"fixed":"absolute";this.el.css({position:c,zIndex:b.zIndex+2,display:"block",overflow:"hidden"}),this.updateMain()},updateMain:function(){var b=this.options;var c=a.page.docWidth()!=a.page.clientWidth()?16:0;var d=b.fixed?0:a(document).scrollTop();var e=b.fixed?0:a(document).scrollLeft();var f=(a.page.clientHeight()-this.el.outerHeight())/2+d;var g=a.browser.msie&&a.browser.version<10?0:8;var h=(a.page.clientWidth()-c-(b.width?b.width+g:0))/2+e;0>f&&(f=0),0>h&&(h=0),this.el.css({top:f,left:h})},bind:function(){var b=this;var c=this.options;this.options.closeButton&&this.el.find(".ui-dialog-close").bind("click",function(){b.close()}),this.options.autoUpdate&&a(window).resize(function(){b.updateMain()}),c.hasButton&&(this.el.find(".ui-dialog-btn-submit").bind("click",function(){c.onSubmit&&c.onSubmit.call(this)}),this.el.find(".ui-dialog-btn-cancel").bind("click",function(){b.close()})),this.options.maskHas&&this.options.maskClose&&a(this.mask).bind("click",function(){b.close()})},open:function(){this.openType(),this.autoClose(),this.show(),this.iframeSet(),this.options.onReady&&this.options.onReady.call(this)},openType:function(){var b=this.options;var c=this;switch(b.type){case"text":this.content.html(b.source);break;case"html":a(b.source).clone().appendTo(this.content);break;case"iframe":var d={width:"100%",height:"100%"};b.iframeTimestamp&&!/&t=/.test(b.source)&&(b.source+=(b.source.indexOf("?")>-1?"&":"?")+"t="+(new Date).getTime()),this.iframe=a('<iframe src="'+b.source+'" id="'+b.iframeName+'" name="'+b.iframeName+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" style="border:0"></iframe>').css(d).appendTo(this.content);break;case"image":var e=b.width?'width="'+b.width+'"':"";var f=b.height?'height="'+b.height+'"':"";var g=a("<img src="+b.source+" "+e+f+"/>");g.appendTo(this.content),g.bind("load",function(){c.updateMain()});break;case"json":}c.updateMain()},close:function(){var a=this.options;this.options.autoCloseTime;a.onBeforeClose&&a.onBeforeClose.call(this),this.el.remove(),this.mask&&this.mask.remove(),a.onCancel&&a.onCancel.call(this)},autoClose:function(){var b=this;var c=this.options.autoCloseTime;if(c){var d=c;a("<div class='ui-dialog-autoclose'><span id='ui-autoclose'>"+d+"</span>\u79d2\u540e\u81ea\u52a8\u5173\u95ed</div>").appendTo(this.el),clearInterval(window.autoCloseTimerDialog),window.autoCloseTimerDialog=setInterval(function(){d--,a("#ui-autoclose").html(d),0==d&&(d=c,b.close(),clearInterval(window.autoCloseTimerDialog))},1e3),this.updateMain()}},getIframeHeight:function(a){var b=a[0].contentWindow.document;return b.body.scrollHeight&&b.documentElement.scrollHeight?Math.min(b.body.scrollHeight,b.documentElement.scrollHeight):b.documentElement.scrollHeight?b.documentElement.scrollHeight:b.body.scrollHeight?b.body.scrollHeight:void 0},syncHeight:function(){var a=this;var b;try{b=a.getIframeHeight(a.iframe)}catch(c){}b&&(a.iframe.css({height:b}),a.updateMain())},iframeSet:function(){var a=this;var b=this.options;"iframe"==b.type&&b.autoIframe&&this.iframe.one("load",function(){a.syncHeight()})}}),a.closeDialog=function(){a(".ui-dialog,.ui-mask").remove(),clearInterval(window.autoCloseTimerDialog)}}(jQuery);
