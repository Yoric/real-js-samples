/* product-list/1.0.7 main.js Date:2017-08-22 16:40:00 */
var projectPath="product/list/1.0.5";/dev.jd.com/.test(window.location.hostname)&&(projectPath="");var searchUnit={pType:0};!function(){var a="undefined"!=typeof params&&params.istsyx===!0;var b=a&&"1713"===params.firstCatId;var c=a&&!b;searchUnit.isBookMvd=a,searchUnit.isBook=b,searchUnit.isMvd=c}(),define("//misc.360buyimg.com/product/list/1.0.7/js/main.js",["//misc.360buyimg.com/jdf/1.0.0/ui/switchable/1.0.0/switchable","//misc.360buyimg.com/jdf/1.0.0/ui/lazyload/1.0.0/lazyload","//misc.360buyimg.com/jdf/1.0.0/ui/tips/1.0.0/tips","//misc.360buyimg.com/jdf/1.0.0/unit/notif/1.0.0/notif","//misc.360buyimg.com/jdf/1.0.0/unit/login/1.0.0/login","//misc.360buyimg.com/product/module/footprint-v2","//misc.360buyimg.com/product/module/clslog.js","//misc.360buyimg.com/jdf/1.0.0/unit/cookie/1.0.0/cookie.js","//misc.360buyimg.com/product/list/1.0.7/js/responsive.js","//misc.360buyimg.com/product/list/1.0.7/js/recommend.js","//misc.360buyimg.com/product/list/1.0.7/js/bookmvd.js","//misc.360buyimg.com/product/list/1.0.7/js/selector.js","//misc.360buyimg.com/product/list/1.0.7/js/promotion.js","//misc.360buyimg.com/product/list/1.0.7/js/goodsList.js","//misc.360buyimg.com/product/list/1.0.7/js/backtop.js","//misc.360buyimg.com/product/list/1.0.7/js/promotionGoods.js","//misc.360buyimg.com/product/m/1.0.0/widget/p-contrast/p-contrast","//misc.360buyimg.com/product/list/1.0.7/js/dsp.js","//misc.360buyimg.com/product/list/1.0.7/widget/carButler/carButler"],function(require,exports,module){var switchable=require("//misc.360buyimg.com/jdf/1.0.0/ui/switchable/1.0.0/switchable");var lazyload=require("//misc.360buyimg.com/jdf/1.0.0/ui/lazyload/1.0.0/lazyload");var tips=require("//misc.360buyimg.com/jdf/1.0.0/ui/tips/1.0.0/tips");var notif=require("//misc.360buyimg.com/jdf/1.0.0/unit/notif/1.0.0/notif");var login=require("//misc.360buyimg.com/jdf/1.0.0/unit/login/1.0.0/login");var footprint=require("//misc.360buyimg.com/product/module/footprint-v2");var clslog=require("//misc.360buyimg.com/product/module/clslog.js");var cookie=require("//misc.360buyimg.com/jdf/1.0.0/unit/cookie/1.0.0/cookie.js");var responsive=require("//misc.360buyimg.com/product/list/1.0.7/js/responsive.js");var recommend=require("//misc.360buyimg.com/product/list/1.0.7/js/recommend.js");var BookMvd=require("//misc.360buyimg.com/product/list/1.0.7/js/bookmvd.js");var selector=require("//misc.360buyimg.com/product/list/1.0.7/js/selector.js");var promotion=require("//misc.360buyimg.com/product/list/1.0.7/js/promotion.js");var goodsList=require("//misc.360buyimg.com/product/list/1.0.7/js/goodsList.js");var backtop=require("//misc.360buyimg.com/product/list/1.0.7/js/backtop.js");var promotionGoods=require("//misc.360buyimg.com/product/list/1.0.7/js/promotionGoods.js");var contrast=require("//misc.360buyimg.com/product/m/1.0.0/widget/p-contrast/p-contrast");var DSP=require("//misc.360buyimg.com/product/list/1.0.7/js/dsp.js");var CarFilter=require("//misc.360buyimg.com/product/list/1.0.7/widget/carButler/carButler");var $body=$("body");!function(){var a=$(".menu-drop");a.hover(function(){var a=$(this);a.addClass("z-menu-drop-open")},function(){var a=$(this);a.removeClass("z-menu-drop-open")})}(),$(".gl-item").tips({trigger:".J-picon-tips",tipsClass:"ui-tips-skin1",hasClose:!1,width:220,callback:function(a,b){if(!a.parents(".J-goods-list").hasClass("gl-type-5")){var c=parseInt(a.offset().left);var d=$.browser.msie&&$.browser.version<10?parseInt(a.parents(".gl-i-wrap").offset().left):parseInt(a.parents(".gl-i-wrap").offset().left)+1;b.css("left",d+"px"),b.find(".ui-tips-arrow").css("left",c-d+"px")}}});var responsive=responsive;responsive.init();var selector=selector;selector.init();var goodsList=goodsList;goodsList.init(),($(".J-goods-list .addcart").hasClass("isflytocart")||window.location.search.match(/isFlyToCart=true/))&&require.async(projectPath+"/js/flyToCart",function(a){$(".J-goods-list").delegate(".addcart","click",function(b){var c=$(this).closest(".j-sku-item");var d=c.data("sku");var e=c.find(".p-img img").attr("src")||c.find(".p-img img").data("lazy-img");var f={left:b.clientX,top:b.clientY};var g=a(d,e,f);g&&b.preventDefault()})});var backtop=new backtop;var Recommend=recommend;var adjustSidebarConfig={enable:!1};!function(){var a=$(".J-goods-list").height();var b=$(".J-goods-list").find(".gl-item").length;var c;adjustSidebarConfig.enable=!0,0==b?$.extend(adjustSidebarConfig,{tuiguangsp:1,finalbuy:0,shangjiajx:!1}):1142>a?(c=a>500?1:0,$.extend(adjustSidebarConfig,{tuiguangsp:1,finalbuy:c,shangjiajx:!1})):(c=Math.floor((a-350-322-472)/580),$.extend(adjustSidebarConfig,{tuiguangsp:2+c,finalbuy:1+c,shangjiajx:!0}))}(),function(){if($("#finalbuy").length>0&&baseConf.liulanzzgm!==!1&&(!adjustSidebarConfig.enable||0!=adjustSidebarConfig.finalbuy)){var a=8;adjustSidebarConfig.enable&&(a=10);{new Recommend("#finalbuy","finalbuy",504e3,null,a,function(a,b){b.resSku.join(",");adjustSidebarConfig.enable&&a.find(".mc li").slice(adjustSidebarConfig.finalbuy).remove(),a.show()},"mixer")}}}(),/disabled=contrast/.test(location.href)||contrast.init(null,"_contrast"),$("div#iscgj").length>0&&new CarFilter,searchUnit.setImgLazyload=function(a){var a=a||"body";$(a).lazyload({type:"img",placeholder:"//misc.360buyimg.com/lib/img/e/blank.gif",delay:20,space:200}),$(a).length>0&&pageConfig.FN_ImgError($(a)[0])},searchUnit.setImgLazyload("body"),searchUnit.resizeOnebox=function(a){"undefined"!=typeof a&&(a+=10,$(".J_oneBoxFrame").css("height",a))},searchUnit.handleAdRequest=function(){var a=[];baseConf.guanggaow!==!1&&a.push("2_164_5691"),$('li[id^="search-act-"]').length>0&&a.push("0_0_4278"),pageConfig.FN_GetCompatibleData=function(a){var b=screen.width<1210;return b&&(a.width=a.widthB?a.widthB:a.width,a.height=a.heightB?a.heightB:a.height,a.src=a.srcB?a.srcB:a.src),a},a.length>0&&$.ajax({url:"//nfa.jd.com/loadFa_toJson.js",dataType:"script",data:{aid:a.join("-")}})},searchUnit.initAside=function(){$("#J_bottom-ad").remove(),$("#footprint").parent().after('<div class="w" id="J_bottom-ad"><div class="m bottom-ad" id="J_promWrap_230"></div></div>');var a=promotion;var b=$(".promo-pic-adbox");b.hide();window.QUERY_KEYWORD;if(sortConfig&&sortConfig.hotsale)if(searchUnit.isBookMvd)BookMvd.getHotsale();else if($("#hotsale").length>0){$("#hotsale").addClass("J_promGoodsWrap_46");{new DSP({ids:["46:3"],selector:".J_promGoodsWrap_{aid}"})}}if("0"===params.gjz){if(baseConf.tuiguangsp!==!1){new DSP({selector:"#J_spread_goods",ids:["742:8"],vType:2,debug:!0,param:{cai_type:"0",template:0}})}if(baseConf.shangpinjx!==!1){new DSP({selector:"#J_goods_best",ids:["743:5"],param:{cai_type:"0",template:0}})}}else{if($("#J_spread_goods").length>0&&baseConf.tuiguangsp!==!1&&(!adjustSidebarConfig.enable||0!=adjustSidebarConfig.tuiguangsp)){var h=8;adjustSidebarConfig.enable&&(h=10);{new DSP({selector:"#J_spread_goods",ids:["47:"+h],callback:function(){adjustSidebarConfig.enable&&this.$el.find(".mc li").slice(adjustSidebarConfig.tuiguangsp).remove()}})}}if(baseConf.shangjiajx!==!1&&(!adjustSidebarConfig.enable||adjustSidebarConfig.shangjiajx)){$("#J_promWrap_547").length<1&&$("#J_promWrap_60").after('<div id="J_promWrap_547"></div>');{new DSP({ids:["547:2"],adType:7,vType:2,selector:"#J_promWrap_{aid}",callback:function(a,c){c&&b.show()}})}}if(baseConf.shangpinjx!==!1&&pageConfig.queryParam&&""!=pageConfig.queryParam.c3){new DSP({selector:"#J_goods_best",ids:["48:5"],param:{template:0}})}}if(baseConf.guanggaow!==!1){new a("94:1,1:1","#J_promWrap_","8")}searchUnit.isBookMvd&&baseConf.paihangb!==!1&&BookMvd.reco(),searchUnit.handleAdRequest(),searchUnit.setImgLazyload("#J_goodsList")},searchUnit.initGuang=function(){},searchUnit.initGuang(),window.jdThickBoxclose=$.closeDialog;var footerConfigVersion="";"0"===params.gjz?require.async("//misc.360buyimg.com/jdf/1.0.0/unit/globalInit/1.0.0/globalInit",function(){}):(require.async("//misc.360buyimg.com/jdf/1.0.0/unit/globalInit/5.0.0/globalInit",function(a){a()}),footerConfigVersion="common_config2"),searchUnit.initFooter=function(){var a=$("#GLOBAL_FOOTER");if(a.length>0){{a.attr("type")||footerConfigVersion}$body.lazyload({type:"fn",source:a,space:500,onchange:function(){var b=this;var c=a.attr("type")||footerConfigVersion;$.ajax({url:"//d.3.cn/footer?type="+c,dataType:"jsonp",cache:!0,scriptCharset:"gb2312",jsonpCallback:"showfooter",success:function(a){a&&a.content&&b.source.html(a.content.replace(/data\-lazyload/g,"src"))}})}})}},$(document).ready(function(){searchUnit.initAside(),searchUnit.initFooter(),$("#footmark").length>0&&baseConf.cainixh!==!1&&$body.lazyload({type:"fn",source:$("#footmark"),onchange:function(){footprint.init()}})}),$.browser.msie&&$.browser.version<=7&&$("#navitems-2014").css({width:"auto",marginRight:"-210px"});function showShopingAssistant(){var a=cookie("list_sa_ht");$(".jdm-tbar-tab-shopingassistant").append('<i class="tab-tip"></i>'+(a?"":'<div class="assistant-tips"><i class="icon"></i>\u60a8\u6709\u65b0\u7684\u4e13\u5c5e\u4f18\u60e0\uff01<i class="close"></i><i class="arrow"></i></div>')).show().bind("mouseenter",function(a){$(a.target).hasClass("tab-ico")||a.stopPropagation()}).find(".close").bind("click",function(){$(this).parent().remove(),cookie("list_sa_ht","TRUE",{domain:"list.jd.com",expires:fiveDaysLater()})})}function oneHourLater(){var a=new Date;return a.setTime(a.getTime()+36e5),a}function fiveDaysLater(){var a=new Date;return a.setTime(a.getTime()+432e3),a}cookie("list_sa")?"TRUE"==cookie("list_sa")&&showShopingAssistant():login.isLogin(function(a){a&&$.ajax({url:"//notice.jd.com/notice/userAuth?source=flyorderList",dataType:"jsonp",success:function(a){a&&"TRUE"==a.resultCode?(showShopingAssistant(),cookie("list_sa","TRUE",{domain:"list.jd.com",expires:oneHourLater()})):cookie("list_sa","FALSE",{domain:"list.jd.com",expires:oneHourLater()})}})}),function(){var a=!1;var b=null;var c=null;var d=null;var e=window.serverTime||0;var f=window.pageConfig&&window.pageConfig.queryParam||{};if(e>=20170421e6&&20170424235959>=e&&"-1713-".indexOf("-"+f.c1+"-")>-1&&(a=!0,b="//img20.360buyimg.com/uba/jfs/t4561/50/2989434908/34531/1410996d/58f55850N91a4eb4d.jpg",c="//img20.360buyimg.com/uba/jfs/t4621/105/2953302993/34532/38b3497d/58f55850Ne50f359d.jpg",d="//sale.jd.com/act/ykY82hC5Gs3Sx4ew.html"),a){var g=$(window);var h=$("body > .w");function j(){var a={};var b=g.width();var c=h.width();return a.leftCoupletPosition=(b-c)/2-200,a.rightCoupletPosition=(b-c)/2+c,a.realWidth=(b-c)/2,a}var k=j();var l,m;d?(l=$('<a target="_blank" href="'+d+'" class="skin-act-left"></a>'),m=$('<a target="_blank" href="'+d+'" class="skin-act-right"></a>')):(l=$('<span class="skin-act-left"></span>'),m=$('<span class="skin-act-right"></span>')),b&&l.css({background:"url("+b+") no-repeat"}),c&&m.css({background:"url("+c+") no-repeat"}),l.css({left:k.leftCoupletPosition}).appendTo("body"),m.css({left:k.rightCoupletPosition,width:k.realWidth}).appendTo("body");var n=null;g.bind("resize",function(){n||setTimeout(function(){var a=j();l.css({left:a.leftCoupletPosition}),m.css({left:a.rightCoupletPosition,width:a.realWidth})},20)})}}()});