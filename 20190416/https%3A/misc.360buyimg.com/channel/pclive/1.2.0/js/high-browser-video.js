/* channel-pclive/1.2.0 high-browser-video.js Date:2017-10-11 16:18:21 */
define("//misc.360buyimg.com/channel/pclive/1.2.0/js/high-browser-video.js",["//misc.360buyimg.com/channel/pclive/1.2.0/js/video.min.js","//misc.360buyimg.com/channel/pclive/1.2.0/js/videojs-contrib-hls"],function(require,a){require("//misc.360buyimg.com/channel/pclive/1.2.0/js/video.min.js"),require("//misc.360buyimg.com/channel/pclive/1.2.0/js/videojs-contrib-hls");a.init=function(a){$floor=a;var b=null;var c=0;var e,d=0;function f(a){var b=$(a).parents(".player-box");0!=d&&clearInterval(d),d=setInterval(function(){h(),c+=1},1e3),b.addClass("loading-state")}function g(a){var b=$(a).parents(".player-box");0!=d&&clearInterval(d),c=0,b.removeClass("loading-state end-state").addClass("living-state")}function h(){c>3&&g()}$(".player-btn",a).each(function(a,b){var c=$(this);var d,e,f;c.parent().hasClass("player-info")?(d=c.parent(".player-info").siblings(".NoIeUrl").val(),e="application/x-mpegURL"):c.parent().hasClass("anchor-info")&&(f=c.parent(".anchor-info").siblings(".playbackUrl").data("property"),d=c.parent(".anchor-info").siblings(".playbackUrl").val(),e="mp4"==f?"video/mp4":"application/x-mpegURL"),c.click(function(){if(d)$(".player-box").removeClass("loading-state"),i(a,b,e,d);else{var f=$(this).parents(".player-box").find(".qrcode"),g=f.attr("width");c.parents(".player-box").addClass("end-state"),comFun.qrcodeFun(f,g)}})});function i(a,c,d,h){var i=c;var j="";j+='<video id="video_id" class="video-js vjs-default-skin"></video>';var k=$(i).parents(".player-box").find(".player");var l=$("div[id^=video_]");if(l&&l.length>0)for(var m=0;m<l.length;m++){var n=l[m];videojs(n).dispose()}$("body").find(".player-box").removeClass("loading-state living-state tips-state end-state"),k.html(j),k.css({width:"100%",height:"100%"});var o={controls:!0,autoplay:!1,preload:"auto",width:"100%",height:"100%"};b=videojs("video_id",o,function(){var a=this;a.src({type:d,src:h}),a.play(),a.on("waiting",function(){f(i)}),a.on("error",function(){a.dispose();var b=$(i).parents(".player-box");b.addClass("end-state").removeClass("loading-state tips-state living-state"),b.find(".state p").html("\u4eac\u4e1cAPP\u626b\u7801\u770b\u7cbe\u5f69\u56de\u653e"),comFun.qrcodeFun($img,imgSize)}),a.on("playing",function(){g(i),clearTimeout(e),e=setTimeout(function(){$(i).parents(".player-box").addClass("tips-state")},6e3),$("#pc-hotlive #video_id").css({height:"311",width:"570"}),$("#playback #video_id").css({height:"200",width:"370"}),$(i).parents(".J-tips1").delegate(".living-state",{mouseenter:function(){$(this).addClass("tips-state")},mouseleave:function(){$(this).removeClass("tips-state")}})}),a.on("pause",function(){}),a.on("ended",function(){$(i).parents(".player-box").removeClass("living-state tips-state").addClass("end-state")})})}}});