!function(_){function e(e){for(var o,a,r=e[0],s=e[1],n=e[2],d=0,E=[];d<r.length;d++)a=r[d],i[a]&&E.push(i[a][0]),i[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(_[o]=s[o]);for(c&&c(e);E.length;)E.shift()();return l.push.apply(l,n||[]),t()}function t(){for(var _,e=0;e<l.length;e++){for(var t=l[e],o=!0,r=1;r<t.length;r++){var s=t[r];0!==i[s]&&(o=!1)}o&&(l.splice(e--,1),_=a(a.s=t[0]))}return _}var o={},i={"web/page":0},l=[];function a(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return _[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=_,a.c=o,a.d=function(_,e,t){a.o(_,e)||Object.defineProperty(_,e,{enumerable:!0,get:t})},a.r=function(_){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},a.t=function(_,e){if(1&e&&(_=a(_)),8&e)return _;if(4&e&&"object"==typeof _&&_&&_.__esModule)return _;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:_}),2&e&&"string"!=typeof _)for(var o in _)a.d(t,o,function(e){return _[e]}.bind(null,o));return t},a.n=function(_){var e=_&&_.__esModule?function(){return _.default}:function(){return _};return a.d(e,"a",e),e},a.o=function(_,e){return Object.prototype.hasOwnProperty.call(_,e)},a.p="";var r=window.webpackJsonp=window.webpackJsonp||[],s=r.push.bind(r);r.push=e,r=r.slice();for(var n=0;n<r.length;n++)e(r[n]);var c=s;l.push([114,"common"]),t()}({114:function(_,e,t){_.exports=t("FgzW")},"9at3":function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";var _lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zxIV"),_lib_message_box__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("EasH"),_lib_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("v+DW"),_lib_ui_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ryw6"),_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("t7n3"),_lib_ajax__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("Kngp"),WallUpload={_videoUploadIndex:null,photoUploaded:function(_,e){var t=void 0!==_.ind?_.ind:_,o=(_.fileName?_.fileName:_).replace(/[&<>"']/g,""),i=_.fileName?t+"_"+_.fileName:_,l=ge("upload"+i+"_progress_wrap");l&&hide(geByClass1("progress_x",l)),ajax.post("al_photos.php",extend({act:"choose_uploaded"},e),{onDone:function(_,e){WallUpload.addMedia().chooseMedia("photo",_,extend(e,{upload_ind:t+"_"+o}))},onFail:WallUpload.uploadFailed.pbind(_)})},uploadFailed:function(_,e){var t=void 0!==_.ind?_.ind:_,o=Upload.options[t],i=(_.fileName?_.fileName:_).replace(/[&<>"']/g,"");if("fileApi"==Upload.types[t]&&!o.wiki_editor){var l=_.fileName?t+"_"+_.fileName:_,a=void 0;cur.imMedia?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("upload"+l+"_progress_wrap"),a=cur.imMedia.lnkId,cur.addMedia[a].unchooseMedia()):cur.addMedia&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("upload"+l+"_progress_wrap"),(a=(cur.attachMediaIndexes||{})[i])&&cur.addMedia[a].unchooseMedia()),1==o.filesTotalCount&&setTimeout(Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_1__.d)({title:getLang("global_error")},getLang("wall_add_photo_error")).hide,2e3)}Object(_lib_ui_util__WEBPACK_IMPORTED_MODULE_3__.c)("Upload failed",{dt:-1,type:102,url:(ge("file_uploader_form"+t)||{}).action}),Upload.embed(t)},show:function(){cur.uploadInited&&("feed"==cur.wallType?removeClass(cur.uploadWrap,"post_upload_min_wrap"):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(cur.uploadWrap))},hide:function(_){function e(){return _.apply(this,arguments)}return e.toString=function(){return _.toString()},e}(function(){cur.uploadInited&&("feed"==cur.wallType?addClass(cur.uploadWrap,"post_upload_min_wrap"):hide(cur.uploadWrap),hide("post_upload_dropbox"))}),addMedia:function(){return cur.dropboxAddMedia||cur.wallAddMedia},attachEl:function(){return WallUpload.dropboxAttachEl||ge("submit_post_box")},attachToEl:function(_){_=ge(_);var e=ge("post_upload_dropbox");if(WallUpload.dropboxAttachEl=_,!_||!e)return!1;_.insertBefore(e,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(_))},checkDragDrop:function(){var _=browser,e=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.k)(browser.version);return!!(_.msie&&e>=9||_.mozilla&&e>=3.5||_.chrome||_.safari)&&((window.XMLHttpRequest||window.XDomainRequest)&&(window.FormData||window.FileReader&&(window.XMLHttpRequest&&XMLHttpRequest.sendAsBinary||window.ArrayBuffer&&window.Uint8Array&&(window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder))))},initCallback:function(){cur.editingPost?WallUpload.init():Wall.showEditPost()},init:function(){cur.withUpload&&(cur.uploadAdded?WallUpload.show():(cur.uploadAdded=!0,window.Upload&&window.VideoInlineUpload?(WallUpload.initLoader(),Wall._videoUploadIndex=WallUpload.initVideoUploader()):stManager.add(["upload.js","video_upload.js"],function(){WallUpload.initLoader(),Wall._videoUploadIndex=WallUpload.initVideoUploader()})))},initVideoUploader:function(){var _=cur.wallUploadVideoOpts;if(_){var e=ge("post_field_upload_video"),t=ge("post_upload_video_dropbox");_.options.from="post";var o=ge("send_post"),i={onUploadAllCompleteDone:function(){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_2__.f)(o,!1)},onUploadStartDone:function(){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_2__.f)(o,!0)}};return window.VideoInlineUpload.getUploadModule(e,t,_,WallUpload.addMedia(),i)}},initLoader:function initLoader(){removeEvent(bodyNode,"dragover dragenter");var data=cur.wallUploadOpts,field=ge("post_field");if(WallUpload.checkDragDrop()){cur.uploadWrap=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{className:"post_upload_wrap fl_r",innerHTML:'<div id="post_field_upload" class="post_upload"></div>'}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(cur.uploadWrap,field),cur.uploadVideoWrap=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{className:"post_upload_video_wrap fl_r",innerHTML:'<div id="post_field_upload_video" class="post_upload_video"></div>'}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(cur.uploadVideoWrap,field);var submitBox=WallUpload.attachEl();submitBox.insertBefore(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{id:"post_upload_dropbox",className:"post_upload_dropbox",innerHTML:'<div class="post_upload_dropbox_inner"><div class="post_upload_label drop_label">'+(data.opts.lang.wall_drop_media_here||"Drop files here")+'</div><div class="post_upload_label release_label">'+(data.opts.lang.wall_release_media_here||"Release button to attach files")+"</div></div>"}),submitBox.firstChild),cur.wallUploadInd=Upload.init("post_field_upload",data.url,data.params,{accept:"image/jpeg,image/png,image/gif",dragEl:bodyNode,dropbox:"post_upload_dropbox",file_input:null,file_name:"photo",file_size_limit:26214400,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_match:data.opts.ext_re,lang:data.opts.lang,noFlash:1,multiple:1,multi_progress:1,max_files:10,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:data.opts.server,error:data.opts.default_error,error_hash:data.opts.error_hash,label:data.opts.label,wiki_editor:0,onUploadStart:function(_,e){var t=void 0!==_.ind?_.ind:_,o=Upload.options[t];"form"==Upload.types[t]&&(geByClass1("file",ge("choose_photo_upload")).disabled=!0),"fileApi"==Upload.types[t]&&(cur.notStarted&&(cur.preventBoxHide||boxQueue.hideLast(),delete cur.notStarted),o.multi_progress&&this.onUploadProgress(_,0,0))},onUploadComplete:function onUploadComplete(info,res){var params=void 0;try{params=eval("("+res+")")}catch(_){params=Object(_lib_ajax__WEBPACK_IMPORTED_MODULE_5__.f)(res)}params.photos?WallUpload.photoUploaded(info,params):Upload.onUploadError(info)},onUploadProgress:function(_,e,t){var o=void 0!==_.ind?_.ind:_;if("fileApi"==Upload.types[o]){var i=(cur.attachMediaIndexes||{})[o];if(void 0===i||i&&cur.addMedia[i].chosenMedia||cur.imMedia){var l={loaded:e,total:t};_.fileName&&(l.fileName=_.fileName.replace(/[&<>"']/g,"")),WallUpload.addMedia().showMediaProgress("photo",o,l)}}},onUploadError:WallUpload.uploadFailed,onCheckServerFailed:function(){delete cur.uploadInited,WallUpload.hide()},onUploadCompleteAll:function(_){"form"==Upload.types[_]&&Upload.embed(_)},onDragEnter:function(){cur.editingPost?(Wall.hidePosterFeatureTooltip(),WallUpload.init()):Wall.showEditPost()},onNoFilteredCallback:function(_){Wall._videoUploadIndex&&Upload.onFileApiSend(Wall._videoUploadIndex,_)}}),cur.uploadInited=!0,WallUpload.show(),cur.wallUploadFromDrag&&(1==cur.wallUploadFromDrag&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("post_upload_dropbox"),delete cur.wallUploadFromDrag)}}};__webpack_exports__.a=WallUpload},FgzW:function(_,e,t){"use strict";t.r(e);var o=t("oBWH"),i=t("qwyz"),l=t("9at3"),a=t("zxIV"),r=t("t7n3"),s=t("Egk5"),n=t("/PiP"),c=t("7jxN"),d=t("lXE5"),E={init:function(_,e){if(!(_=ge(_)))return null;var t=Object(a.i)(_,"composer");if(t)return t;t={input:_,inited:!1,options:e},Object(a.i)(_,"composer",t),t.wddWrap=Object(a.e)("div",{className:"composer_wdd clear_fix "+(e.wddClass||""),id:_.id+"_composer_wdd",innerHTML:'<input type="hidden" id="'+_.id+'_composer_wdd_term"/>'},{width:e.width||Object(a.N)(_)[0]}),e.appendTo&&Object(r.v)(e.appendTo)?e.appendTo(t.wddWrap):Object(a.w)(t.wddWrap,_.nextSibling),t.wddInput=t.wddWrap.firstChild,t.wdd=WideDropdown.initSelect(t.wddWrap,extend({text:t.wddInput,input:_,noResult:e.lang.noResult||"",introText:e.lang.introText||"",toup:e.toup,wddOpts:e.wddOpts,searchKeys:e.searchKeys,width:"auto",onItemSelect:E.onItemSelect.bind(E).pbind(t)},e.wddOpts||{url:"hints.php",params:{act:"a_json_friends",from:"composer"}})),_.dd=t.wddWrap.id,E.initEvents(t),e.media&&(t.addMedia=new MediaSelector(e.media.lnk,e.media.preview,e.media.types,e.media.options,e.media.gearEl,e.media.actionsEl)),Object(a.qb)(t.wddWrap,"width",""),t.inited=!0,E.updateAutoComplete(t),t.edit=e.edit,t.isReply=e.isReply,E.updateArticleConvertSuggest(t);var o=cur.onMediaChanged;return cur.onMediaChanged=function(){E.updateArticleConvertSuggest(t),o&&o()},t},initEvents:function(_){addEvent(_.input,"keyup keydown keypress",E.onKeyEvent.pbind(_)),addEvent(_.input,"click mousedown mouseup focus blur paste",E.onMouseEvent.pbind(_))},destroy:function(_){WideDropdown.deinit(_.wddWrap),Object(a.g)(_.input,_.wddWrap),Object(a.fb)(_.wddWrap),_.inited=!1,_.addMedia&&_.addMedia.destroy(),Object(a.i)(_.input,"composer",null),Object(a.fb)(_.articleConvertEl),_.articleConvertEl=!1},onKeyEvent:function(_,e){var t=!e.shiftKey&&inArray(e.keyCode,[KEY.UP,KEY.DOWN,KEY.RETURN]),o=_.wdd&&t;if("keypress"==e.type||"keydown"==e.type){if(e.keyCode==KEY.RETURN||10==e.keyCode){if(_.select&&_.select.isVisible())return Object(s.j)(document,e.type,e),Object(s.c)(e);if(e.ctrlKey&&Object(r.v)(_.options.onSubmit))return!0}if(e.keyCode==KEY.TAB){var i=_.input,l=window.Emoji?Emoji.editableVal(i):"",n=E.getCursorPosition(i),c=(l.substr(0,n)+String.fromCodePoint(1)+l.substr(n)).match(/^[\s\S]*(@|\*)[\S]+\s*\([\s\S]*?\001[\s\S]*?\)\s*/);if(c){var d=c[0].length-1;return Object(a.E)(_.input,d,d),Object(s.c)(e)}}var p=0;for(var O in _.wdd.shown)p+=1;if(o&&Object(a.ab)(_.wdd.listWrap)&&p)return e.type==(browser.opera&&!browser.chrome?"keypress":"keydown")&&WideDropdown._textEvent(e),Object(s.c)(e)}if("keyup"==e.type&&!o){if(65==e.keyCode&&e.ctrlKey)return;_.wdd&&inArray(e.keyCode,[KEY.SPACE,KEY.HOME,190,191,78,55,49])&&E.hideSelectList(_)}"keyup"!=e.type||o&&e.keyCode!=KEY.RETURN||E.updateAutoComplete(_,e),E.updateArticleConvertSuggest(_)},isArticleConvertSuggestAvailable:function(_){if(_.edit||_.isReply)return!1;var e=!!cur.wallAddMedia&&cur.wallAddMedia.types,t=!1;if(e)for(var o=0;o<e.length;o++)if("article"==e[o][0]){t=!0;break}if(!t||!isArticleEditorAvailable())return!1;var i=!0;return each(cur.wallAddMedia.getMedias()||[],function(_,e){if(!inArray(e[0],["photo","video","postpone","mark_as_ads"]))return i=!1,!1}),!!i&&!!(cur.options.articleConvertThreshold>0&&_.curValue.length>=cur.options.articleConvertThreshold)},updateArticleConvertSuggest:function(_){if(E.isArticleConvertSuggestAvailable(_)){if(!_.articleConvertEl){var e=gpeByClass("post_field_wrap",_.input),t=geByClass1("post_actions_btns",e);_.articleConvertEl=Object(a.mb)('<button class="article_post_convert round_button">'+getLang("profile_convert_to_article_short")+"</button>"),t?(e!==domPN(t)&&Wall.sendInsertBeforeError(),e.insertBefore(_.articleConvertEl,t)):e.appendChild(_.articleConvertEl),removeEvent(_.articleConvertEl),addEvent(_.articleConvertEl,"click",function(){cur.postComposer=_;var e=[];each(cur.wallAddMedia.getMedias()||[],function(_,t){inArray(t[0],["photo","video"])&&e.push(t[0]+"_"+t[1])}),Object(n.q)(cur.oid,0,{text:_.curValue,medias:e})})}Object(a.tb)(_.articleConvertEl)}else Object(a.fb)(_.articleConvertEl),delete _.articleConvertEl},onMouseEvent:function(_,e){"blur"!=e.type?("focus"!=e.type&&"click"!=e.type||E.updateAutoComplete(_,e),"paste"==e.type&&setTimeout(E.updateAutoComplete.pbind(_,e),0)):E.hideSelectList(_)},updateAutoComplete:function(_,e){var t=_.input,o=(_.options&&_.options.getValue||window.Emoji&&Emoji.editableVal||val)(t),i=Math.max(o.lastIndexOf("@"),o.lastIndexOf("*")),l=!1;if(i>-1){var a=E.getCursorPosition(t),r=o.substr(0,a),s=r.match(/(^|[\s.,:\'\"«»;>\)\(]|\#[\w_\.\u0400-\u04FF]+)[@\*]([^,@\*\(\)\?\!\s\n\r \u00A0]*)$/);i=Math.max(r.lastIndexOf("@"),r.lastIndexOf("*")),s&&"."!==s[2].substr(-1)&&(l=s[2])}!1===l&&delete _.ignoredTerm,void 0!==_.ignoredTerm&&l==_.ignoredTerm&&(l=!1),_.curValue=o,_.curTerm=l,_.curPos=i,val(_.wddInput,l),E.toggleSelectList(_),!e||"keyup"!=e.type&&"paste"!=e.type||(_.options.onValueChange&&_.options.onValueChange(o,"keyup"!=e.type),_.addMedia&&_.addMedia.checkMessageURLs(o,"keyup"!=e.type),_.options.checkLen&&_.options.checkLen(o))},toggleSelectList:function(_){var e=_.curTerm;!1===e?E.hideSelectList(_):E.showSelectList(_,e)},hideSelectList:function(_){_.wddInput.focused=!1,WideDropdown._hideList(_.wdd);var e=_.options||{};e.onHide&&e.onHide()},showSelectList:function(_,e){function t(t){_.wddInput.focused=!0,WideDropdown.items(_.wdd.id,t||[]),WideDropdown._updateList(_.wdd,!1,e);var o=_.options||{};o.onShow&&o.onShow()}"function"==typeof cur.wallMentions&&(cur.wallMentions=cur.wallMentions()),cur.wallMentions&&"function"==typeof cur.wallMentions.then?cur.wallMentions.then(function(_){t(_)}):t(cur.wallMentions)},onItemSelect:function(_,e){if(!e)return!1;var t=e[2].replace("@",""),o=e[8]||e[1],i=_.curValue.substr(0,_.curPos),l=_.curValue.substr(_.curPos),s=!!i.match(/\#[\w_\.\u0400-\u04FF]+$/i);document.activeElement.classList.contains("_im_text")&&(/^(?:id|club)\d{1,}$/.test(t)||(s=!0));var n=_.options.poster,c=window.Emoji&&void 0!==_.input.emojiId||n;c||n?l=Object(r.c)(l):o=Object(r.E)(o),cur.selNum=(cur.selNum||0)+1;var d=new RegExp("^(@|\\*)"+Object(r.h)(_.curTerm)+"(?:\\s+\\((?:(.*?)\\))?\\s*)?","");return l=l.replace(d,function(_,e,i){var l=e+t+" ";return s?l+=c||n?'<span id="tmp_sel_'+cur.selNum+'"></span>':"":(l+=(c||n?'<span id="tmp_sel_'+cur.selNum+'">':"")+"(",l+=o.replace(/[\(\)\]\[]/g,""),l+=")"+(c||n?"</span>":"")+" "),l}),s||!i||i.match(/[\.\(\)\?\!\s\n\r\'\"«» \u00A0]$/)||(l=" "+l),E.hideSelectList(_),c||n?(Emoji.val(_.input,Object(r.c)(i)+l),Emoji.focus(_.input),Emoji.editableFocus(_.input,ge("tmp_sel_"+cur.selNum),!0),n&&n.checkText()):(val(_.input,i+l),Object(a.E)(_.input)),!1},getCursorPosition:function(_){if(void 0!==_.selectionStart)return _.selectionStart;if(void 0!==window.getSelection){var e=window.getSelection();if(!e||!e.rangeCount)return 0;var t=e.getRangeAt(0),o=t.cloneRange(),i=Object(a.e)("div");return o.selectNodeContents(_),o.setEnd(t.startContainer,t.startOffset),i.appendChild(o.cloneContents()),(window.Emoji?Emoji.editableVal:val)(i).replace(/\n$/,"").length}return 0},getSendParams:function(_,e,t){var o=_.addMedia||{},i=o.chosenMedia||{},l=o&&o.getMedias?o.getMedias():[],s=o.shareData||{},n=_&&_.options.media&&_.options.media.options.limit||0,E=_.input,p=cur.posterWpe&&cur.posterWpeSendParams?cur.posterWpeSendParams.text:Object(r.H)(window.Emoji?Emoji.editableVal(E):val(E)),O={message:p},u=0,b=hasClass(gpeByClass("post",E),"suggest");isArray(i)&&i.length&&l.push(clone(i)),Object(a.qb)(bodyNode,{cursor:"default"});var P=ge("wpe_cont"),M=geByClass1("wpe_error",P);function D(_){M||(M=Object(a.mb)('<div class="wpe_error error"><div>'),P.insertBefore(M,Object(a.u)(P))),M.innerHTML=_.length>60?'<div class="msg_text">'+_+"</div>":_,Object(a.ab)(M)||(Object(c.l)(M,100),Object(d.g)(Object(a.Q)(M)[1]-15),Object(c.b)(ge("box_layer_wrap"),{scrollTop:0}))}if(M&&hide(M),l.length&&each(l,function(_,i){if(isArray(i)&&i.length){var a=this[0],c=this[1];if(u>=n&&"postpone"!=a)return!1;switch(a){case"poll":var d=o.pollData(t);if(!d)return O.delayed=!0,!1;Object(r.r)(c)&&(O.poll_id=Object(r.r)(c)),c=d.question,delete d.question,O=extend(O,d);break;case"copyright":var E=o.copyrightData();if(E)return void(O=extend(O,E));break;case"share":if(s.failed||!s.url||!s.title&&(!s.images||!s.images.length)&&!s.photo_url&&!s.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(O.delayed=!0,!1):void 0;if((cur.options.share||{}).button_exclusive&&s.button_text&&s.button_action){var P=void 0;l.length>1&&(P=getLang("global_share_too_many_attachments")),O.message.split("\n").length-1>(cur.options.share||{}).button_exclusive_max_message_newlines&&(P=getLang("global_share_too_many_newlines")),O.message.length>(cur.options.share||{}).button_exclusive_max_message_len&&(P=getLang("global_share_too_long_message"));var M=Object(r.j)(" "+O.message+" "),m=Object(r.j)(" "+s.url+" ")[0];if(m&&M.length){"/"===m.query&&(m.query=""),"www."===m.domain.substr(0,4)&&(m.domain=m.domain.substr(4));for(var g=0;g<M.length;++g){var f=M[g];if("/"===f.query&&(f.query=""),"www."===f.domain.substr(0,4)&&(f.domain=f.domain.substr(4)),m.domain!=f.domain||m.query!=f.query){P=getLang("global_share_too_many_links");break}}}if(P)return D(P),O.delayed=!0,!1}if(!s.title)return D(getLang("global_share_title_required")),O.delayed=!0,!1;if(s.video?(c=s.video_owner_id+"_"+s.video_id,O.snippet_video=1):c=s.user_id&&s.photo_id&&!s.noPhoto?s.user_id+"_"+s.photo_id:"",s.share_upload_failed&&!c)return s.share_upload_failed=0,O.delayed=!0,!1;if(s.images&&s.images.length&&!isArray(s.images[cur.shareShowImg])&&!t&&!c&&!s.noPhoto&&!s.video)return o.uploadShare(e),O.delayed=!0,!1;if((cur.options.share||{}).require_image&&!c)return D(getLang("global_share_image_required")),O.delayed=!0,!1;s.initialPattern&&Object(r.H)(p)==s.initialPattern&&(O.message=""),extend(O,{url:s.url,mode:s.mode,title:Object(r.E)(s.title),description:Object(r.E)(s.description),button_text:Object(r.E)(s.button_text),button_action:s.button_action,extra:s.extra,extra_data:s.extraData,photo_url:s.video?"":Object(r.E)(s.photo_url),placeholder_inserted:s.placeholder_inserted,open_graph_data:(s.openGraph||{}).data,open_graph_hash:(s.openGraph||{}).hash});break;case"page":s.initialPattern&&Object(r.H)(p)==s.initialPattern&&(O.message="");break;case"postpone":return void(o.postponeIsTooltip?O.postpone=cur.postponedLastDate=o.postponeDate:O.postpone=cur.postponedLastDate=val("postpone_date"+o.lnkId));case"mark_as_ads":return void(O.mark_as_ads=1);case"pretty_cards":if(!o.prettyCardGallery)return;if(o.prettyCardGallery.needSendData())return o.prettyCardGallery.saveCards(e,function(_){D(_)}),O.delayed=!0,!1;c=o.prettyCardGallery.getSendData().attachVal}this[3]&&Object(r.H)(p)==this[3]&&(O.message=""),b&&this[4]&&(c+="_"+this[4]),O["attach"+(u+1)+"_type"]=a,O["attach"+(u+1)]=c,u++}}),!o.multi&&(!O.postpone&&o.postponePreview&&(o.postponeIsTooltip?o.postponeDate&&(O.postpone=cur.postponedLastDate=o.postponeDate):O.postpone=cur.postponedLastDate=val("postpone_date"+o.lnkId)),!O.copyright&&o.copyrightData)){var m=o.copyrightData();m&&(O=extend(O,m))}return o.multi||O.mark_as_ads||!o.markAsAds||(O.mark_as_ads=1),O},reset:function(_){var e=_.input,t=val(e),o=_.addMedia,i={value:t};return window.Emoji?Emoji.val(e,""):e.innerHTML="",o&&(i.urlsCancelled=clone(o.urlsCancelled),o.unchooseMedia(),o.urlsCancelled=[]),Object(a.fb)(_.articleConvertEl),i},restore:function(_,e){var t=_.input,o=E.reset(_);return val(t,e.value||""),o}},p=E;window.Page=o.a,window.page=o.a,window.Wall=i.a,window.wall=i.a,window.WallUpload=l.a,window.Composer=p,window._postsSendTimer||(window._postsSendTimer=setTimeout(o.a.postsSend,1e4));try{stManager.done("page.js")}catch(_){}},oBWH:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";var _lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zxIV"),_lib_ajax__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("Kngp"),_lib_feature_entries__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("/PiP"),_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Egk5"),_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("FWc3"),_lib_message_box__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("EasH"),_lib_ui__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("v+DW"),_lib_ls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("0DAA"),_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("t7n3"),_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("98sY"),_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("kcIO"),_lib_stats__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("XzvV"),_lib_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("aong"),_lib_scroll__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("lXE5"),_lib_video__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("Ia1d"),_lib_fx__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("7jxN"),Page={_adBlockSeenStorage:{},_postsClearTimeoutsCalls:0,initUploadForImagePaste:function initUploadForImagePaste(txtEl,addMedia,blob){stManager.add(["upload.js"],function(){addMedia.menu&&addMedia.menu.activate();var uploadEl=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{className:"post_upload_wrap fl_r",innerHTML:'<div id="page_field_upload" class="post_upload"></div>'});Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(uploadEl,txtEl);var uploadData=cur.wallUploadOpts;if(void 0!==addMedia.clipboardImageUploadIndex)Upload.onFileApiSend(addMedia.clipboardImageUploadIndex,[blob]);else{var composer=txtEl&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(txtEl,"composer"),composerOpts=composer&&composer.options&&composer.options.media&&composer.options.media.options||{},limit=composerOpts&&composerOpts.limit||2;addMedia.clipboardImageUploadIndex=Upload.init(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(uploadEl),uploadData.url,uploadData.params,{file_name:"photo",file_size_limit:26214400,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_input:null,accept:"image/jpeg,image/png",file_match:uploadData.opts.ext_re,lang:uploadData.opts.lang,wiki_editor:0,onUploadStart:function(_,e){var t=void 0!==_.ind?_.ind:_,o=Upload.options[t];"form"==Upload.types[t]&&(geByClass1("file",ge("choose_photo_upload")).disabled=!0),"fileApi"==Upload.types[t]&&(cur.notStarted&&(cur.preventBoxHide||boxQueue.hideLast(),delete cur.notStarted),o.multi_progress&&this.onUploadProgress(_,0,0))},onUploadComplete:function onUploadComplete(info,res){var params=void 0,i=void 0!==info.ind?info.ind:info,fileName=(info.fileName?info.fileName:info).replace(/[&<>"']/g,"");try{params=eval("("+res+")")}catch(_){params=Object(_lib_ajax__WEBPACK_IMPORTED_MODULE_1__.f)(res)}params.photos?ajax.post("al_photos.php",extend({act:"choose_uploaded"},params),{onDone:function(_,e){e.uploadNum=i,addMedia.chooseMedia("photo",_,extend(e,{upload_ind:i+"_"+fileName}))},onFail:function(){}}):Upload.onUploadError(info)},onUploadProgress:function(_,e,t){var o=void 0!==_.ind?_.ind:_;if("fileApi"==Upload.types[o]){var i=(cur.attachMediaIndexes||{})[o];if(void 0===i||i&&cur.addMedia[i].chosenMedia||cur.imMedia){var l={loaded:e,total:t};_.fileName&&(l.fileName=_.fileName.replace(/[&<>"']/g,"")),addMedia.showMediaProgress("photo",o,l)}}},onUploadError:WallUpload.uploadFailed,onCheckServerFailed:function(){delete cur.uploadInited,WallUpload.hide()},onUploadCompleteAll:function(_){"form"==Upload.types[_]&&Upload.embed(_)},onCheckComplete:function(_){Upload.types[_]="fileApi",Upload.onFileApiSend(_,[blob])},customShowProgress:function(){},noFlash:1,multiple:1,multi_progress:1,max_files:limit,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:uploadData.opts.server,error:uploadData.opts.default_error,error_hash:uploadData.opts.error_hash})}})},buildMediaLinkEl:function(_,e){return'<div class="page_media_link_url '+(e?"page_market_owner_link":"")+'">'+(e?"":'<div class="page_media_link_icon"></div>')+'<div class="page_media_link_text">'+_+"</div></div>"},showManyPhoto:function(_,e,t,o){var i=[];return each(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_).childNodes,function(_,e){var t=(e&&e.getAttribute&&e.getAttribute("onclick")).match(/'(-?\d+_\d+)'\s*,\s*'([a-f0-9]{18})'/i);t&&i.push(t[1]+"/"+t[2])}),o.additional={draft_photos:i.join(";")},Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_2__.x)(e,t,extend(o,{queue:1}))},inviteToGroup:function(_,e,t,o,i){var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_),a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_)),r=function(_){var o=_?1:0,a=_?getLang("friends_cancel_event_invite"):getLang("friends_send_event_invite");l.innerHTML='<a onclick="return page.inviteToGroup(this, '+e+", "+t+", "+o+", '"+i+"')\">"+a+"</a>"};return o?(ajax.post("/al_page.php",{act:"a_cancel_invite",mid:t,gid:e,hash:i}),r(0)):(ajax.post("/al_page.php",{act:"a_invite",mid:t,gid:e,hash:i},{onDone:function(_,e){if(!_){r(0),hide(l);var t=geByClass1("error",a),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)('<div class="page_members_box_error msg"><div class="msg_text">'+e+"</div></div>");t?a.replaceChild(o,t):a.insertBefore(o,a.firstChild)}}}),r(1)),!1},moneyTransferBox:function(_,e){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("al_payments.php",{act:"money_transfer_box",to_id:cur.oid,from:e},{onFail:function(_){return setTimeout(Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.d)(getLang("global_error"),_).hide,2e3),!0}}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(_)},showMoreActions:function(_){var e=geByClass1("page_actions_more",_.parentElement);e&&(hide(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(e))},onSubscriptionItemOnClick:function(_,e,t,o,i){var l=hasClass(_,"on");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"act",l?0:1),t&&Page.toggleSubscription(_,t,e,0,"page",function(){var e=getLang(l?"groups_notifications_on":"groups_notifications_set_up");val(_,e),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(_,"on")}),o&&Page.toggleLiveSubscription(_,o,l?0:1,e,function(){},!0),i&&Page.togglePodcastsSubscription(this,i,l?0:1,e,function(){},!0)},toggleSubscription:function(_,e,t,o,i,l,a){var r=parseInt(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"act"))?1:0,s={onDone:function(e){l?l(e,r?0:1,_):(val(_,e),_.setAttribute("data-act",r?0:1))}};a||(s.showProgress=Page.actionsDropdownLock.pbind(_),s.hideProgress=Page.actionsDropdownUnlock.pbind(_)),ajax.post("al_wall.php",{act:"a_toggle_posts_subscription",subscribe:r?1:0,oid:o||cur.oid,hash:e,source:i},s),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(t)},toggleLiveSubscription:function(_,e,t,o,i,l){void 0!=cur.toggleLiveSubscriptionAct&&(t=cur.toggleLiveSubscriptionAct),ajax.post("al_video.php?act=a_subscribe_live",{subscribe:t?1:0,owner_id:cur.oid,hash:e},{onDone:function(e){cur.toggleLiveSubscriptionAct=!t,i?i(e):val(_,e)},showProgress:Page.actionsDropdownLock.pbind(_),hideProgress:Page.actionsDropdownUnlock.pbind(_)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(o)},togglePodcastsSubscription:function(_,e,t,o,i,l){void 0!=cur.togglePodcastsSubscriptionAct&&(t=cur.togglePodcastsSubscriptionAct),ajax.post("al_wall.php",{act:"a_toggle_podcasts_subscription",subscribe:t?1:0,owner_id:cur.oid,hash:e},{onDone:function(e){cur.togglePodcastsSubscriptionAct=!t,i?i(e):val(_,e)},showProgress:!l&&Page.actionsDropdownLock.pbind(_),hideProgress:!l&&Page.actionsDropdownUnlock.pbind(_)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(o)},showMessagesFromCommunityTooltip:function(_,e,t,o){void 0==cur.toggleMessagesFromCommunityAct&&0==e&&(o?Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_4__.c)(_,{text:t,dir:"auto",shift:[4,-3]}):Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_4__.c)(_,{text:t,dir:"auto"}))},toggleMessagesFromCommunity:function(_,e,t,o){void 0!=cur.toggleMessagesFromCommunityAct&&(t=cur.toggleMessagesFromCommunityAct),ajax.post("al_groups.php",{act:"a_toggle_messages_from_community",allow:t?1:0,oid:cur.oid,hash:e},{onDone:function(e){val(_,e),cur.toggleMessagesFromCommunityAct=!t},showProgress:Page.actionsDropdownLock.pbind(_),hideProgress:Page.actionsDropdownUnlock.pbind(_)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(o)},showPageMembers:function(_,e,t){return cur.viewAsBox?(cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(_)):!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.f)("al_page.php",{act:"box",oid:e,tab:t},{cache:1},_)},showPageVideos:function(_,e){return cur.viewAsBox?(cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(_)):!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("al_video.php?act=a_choose_video_box",{review:1,to_id:e},{cache:1,grey:1})},showPageAudios:function(_,e){return cur.viewAsBox?(cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(_)):!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("/al_audio.php",{act:"audios_box",oid:e},{cache:1,params:{width:638}},_)},ownerPhotoFast:function(){var _=ge("owner_photo_bubble_input");_||(_=ge("owner_photo_wrap").appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("input",{type:"file",id:"owner_photo_bubble_input",onchange:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(this,"changed",!0),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("al_page.php",{act:"owner_photo_box",oid:cur.oid}).inp=this}}))),_.click()},ownerPhoto:function(_,e){e||(e={}),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("al_page.php",{act:"owner_photo_box",oid:_||cur.oid,gid:e.gid},{stat:["owner_photo.css","owner_photo.js"]})},ownerCrop:function(_,e){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("al_page.php",{hash:e,act:"owner_photo_crop",oid:_||cur.oid},{stat:["owner_photo.css","owner_photo.js"]})},ownerPhotoEffects:function(_,e){var t="album"+e+"_0/rev";!cur.pvData||cur.pvShown&&cur.pvListId==t||delete cur.pvData[t],Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_2__.x)(_,t,{additional:{open_pe:1,pe_no_copy:1},loader:1,onHide:function(){cur.pvEditorSaved&&nav.reload()}})},uploadOwnerCover:function(_){return!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("al_page.php",{act:"owner_photo_box",oid:_||cur.oid,cover:1},{stat:["owner_photo.css","owner_photo.js"]})},editOwnerCover:function(_){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("al_page.php",{act:"owner_cover_crop",oid:_||cur.oid},{stat:["owner_photo.css","owner_photo.js"]})},deleteOwnerCover:function(_,e,t){t||(t=cur.shareSetOwnPhoto),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.d)({title:getLang("groups_delete_cover_title")},getLang("groups_delete_cover_confirm"),getLang("global_delete"),function(o){ajax.post("al_page.php",{act:"owner_cover_remove",oid:_,hash:e,from:cur.module},{showProgress:lockButton.pbind(o),hideProgress:unlockButton.pbind(o),onDone:t})},getLang("global_cancel"))},editPhoto:function(_){cur.hideOther(),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("al_page.php",extend(_||{},{act:"a_edit_photo"}),{params:{bodyStyle:"padding: 16px 7px"},stat:["tagger.js","tagger.css"]})},deletePhoto:function(_,e){cur.hideOther();var t=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.d)({title:getLang("global_warning")},getLang("sure_delete_photo"),getLang("global_delete"),function(){ajax.post("al_page.php",{act:"a_delete_photo",hash:e,oid:_},{showProgress:t.showProgress,hideProgress:t.hideProgress})},getLang("global_cancel"))},shareCurrent:function(){var _=geByClass1("current_audio",ge("page_current_info"));return _||nav.reload(),(_=_.getAttribute("data-audio"))||nav.reload(),((_=_.split("_")).length<3||"s"!=_[2].substr(0,1))&&nav.reload(),!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("like.php",{act:"publish_box",object:"audio"+_[0]+"_"+_[1],list:_[2]+(_[3]&&"h"==_[3].charAt(0)?"_"+_[3]:"")},{stat:["page.js","page.css","wide_dd.js","wide_dd.css","sharebox.js"]})},playCurrent:function(_,e){var t=_.parentNode;return Page.playLive(e,{showProgress:function(){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_6__.u)(t)},hideProgress:function(){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_6__.i)(t)}})},playLive:function(_,e){Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_2__.j)().playLive(_,e)},audioStatusUpdate:function(_){var e=Object(_lib_ui__WEBPACK_IMPORTED_MODULE_6__.l)("currinfo_audio"),t=Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_2__.j)(),o=AudioUtils.asObject(t.getCurrentAudio());o&&!t.isPlaying()&&(o=""),ajax.post("al_audio.php",{act:"toggle_status",hash:_,exp:e,id:o?o.fullId:"",oid:vk.id},{onDone:function(_,e){vk.id==cur.oid&&_&&(val("current_info",_),t.setStatusExportInfo(e))}})},audioListenersOver:function(_,e){Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_4__.c)(_,{url:"al_audio.php",params:{act:"listeners_tt",oid:e},slide:15,shift:[24,10,10],ajaxdt:100,showdt:400,hidedt:200,asrtl:1,dir:"auto",typeClass:"audio_tt",appendParentCls:"scroll_fix_wrap"})},showAudioListeners:function(_,e){function t(){var _=ge("listeners_more_link"),e=ge("listeners_more_link_trigger");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(e)&&boxLayerWrap.scrollHeight-500<boxLayerWrap.scrollTop+boxLayerWrap.offsetHeight&&(hide(e),_.click())}return e.cancelBubble=!0,cur.audioListenersOnDone={onHide:function(){removeEvent(window.boxLayerWrap,"scroll",t)},onDone:function(_,e){window.audioListenersOffset=0,e?addEvent(window.boxLayerWrap,"scroll",t):(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("listeners_more_link"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("listeners_more_link_trigger"))}},!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("/al_audio.php",{act:"listeners_box",oid:_},extend(cur.audioListenersOnDone,{cache:1}))},moreAudioListeners:function(_){window.audioListenersOffset+=50;var e=geByClass1("fans_rows"),t=ge("listeners_more_link");ajax.post("/al_audio.php",{act:"listeners_box",oid:_,offset:window.audioListenersOffset},{onDone:function(_,o){for(var i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{innerHTML:_}),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(i);l;l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(i))e.appendChild(l);if(o){var a=ge("listeners_more_link_trigger");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(a)}else Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("listeners_more_link_trigger")},showProgress:lockButton.pbind(t),hideProgress:unlockButton.pbind(t)})},postsUnseen:function(_){window._postsExtras||(window._postsExtras={});var e=Date.now(),t=!1;for(var o in _)for(var i in _[o])if("module"!=i&&"index"!=i&&"q"!=i&&"block"!=i){var l=window._postsExtras[i];l&&-1==l.diff&&(l.diff=e-l.start,t=!0)}t&&Page.postsClearTimeouts()},postsSeen:function(_){if(vk.id&&_.length&&!vk.pd){window._postsSeenModules||(window._postsSeenModules={}),window._postsExtras||(window._postsExtras={});var e=Date.now(),t=Page._adBlockSeenStorage,o=void 0;for(var i in _){var l=Page.getPostModuleCode(_[i].module?_[i].module:""),a=_[i].index,r=_[i].q,s=_[i].block;for(var n in _[i].hash&&!window._postsViewHash&&(window._postsViewHash=_[i].hash),_[i])if("module"!=n&&"index"!=n&&"q"!=n&&"hash"!=n&&"block"!=n){window._postsSeenModules[n]=l;var c=_[i][n],d=ge("post"+n);if(n in t||(t[n]=!(!d||!attr(d,"data-ad-view"))),!t[n]){var E=window._postsSeen[n],p=window._postsSaved[n];if(-1==p||-1==E||1==c&&(p||E))continue}var O=0;if(d){O=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(d)[1];var u=geByClass1("replies",d);u&&(O-=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(u)[1])}window._postsSeen[n]=c,o=c,window._postsExtras[n]={start:e,diff:-1,index:a,q:r,block:s,postHeight:O,viewportHeight:window.clientHeight(),session_id:cur.feed_session_id?cur.feed_session_id:"na"},Wall.triggerAdStat(n,_[i].long?"impression_long":"impression")}}o&&Page.postsClearTimeouts()}},postsClearTimeouts:function(){clearTimeout(window._postsSaveTimer),clearTimeout(window._postsSendTimer),++Page._postsClearTimeoutsCalls<10?(window._postsSaveTimer=setTimeout(Page.postsSave,2500),window._postsSendTimer=setTimeout(Page.postsSend,5e3)):(Page._postsClearTimeoutsCalls=0,Page.postsSave(),Page.postsSend())},postsSave:function(){if(!_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.checkVersion()||Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.u)(window._postsSeen))return window._postsSeen;var _=_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.get("posts_sent")||{},e=_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.get("posts_seen")||{},t=_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.get("posts_seen_modules")||{},o=_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.get("posts_extras")||{},i=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),l=Page._adBlockSeenStorage,a=void 0;for(var r in window._postsExtras||(window._postsExtras={}),window._postsSeen){var s=window._postsSeen[r];window._postsExtras[r]&&(o[r]={diff:window._postsExtras[r].diff,index:window._postsExtras[r].index,q:window._postsExtras[r].q,session_id:window._postsExtras[r].session_id?window._postsExtras[r].session_id:"na",postHeight:window._postsExtras[r].postHeight,viewportHeight:window._postsExtras[r].viewportHeight,block:window._postsExtras[r].block},delete window._postsExtras[r]);var n=r.split("_");"ad"!==n[0]&&"adsite"!==n[0]&&"posthashtag"!==n[0]&&"block"!==n[0]&&(n[0]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.r)(n[0]),n[1]&&"p"==n[1].substr(0,1)||(n[1]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.r)(n[1])));var c=(_[n[0]]||{})[n[1]];n[0]!=vk.id&&(l[r]||!c||-1==s&&c>0)&&(e[n[0]]||(e[n[0]]={},delete t[r]),(!e[n[0]][n[1]]||-1==s&&e[n[0]][n[1]]>0)&&(a=e[n[0]][n[1]]=i*s,t[r]=window._postsSeenModules[r])),window._postsSaved[r]=s}window._postsSeen={},window._postsSeenModules={},a&&(_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.set("posts_seen",e),_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.set("posts_seen_modules",t),_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.set("posts_extras",o))},getPostModuleCode:function(_){switch(_){case"feed":return"f";case"public":case"groups":return"c";case"profile":return"p";case"wall":return"w";case"wall_top":return"tw";case"feed_search":return"s";case"feed_news_recent":case"feed_news":return"rf";case"feed_news_top":return"tf";case"feed_recommended":case"feed_recommended_recent":return"d";case"feed_recommended_top":return"e";case"feed_other":return"o";case"feed_friends":case"feed_friends_recent":return"rr";case"feed_friends_top":return"tr";case"feed_podcasts":case"feed_podcasts_top":case"feed_podcasts_recent":return"h";case"feed_groups":case"feed_groups_recent":return"rg";case"feed_groups_top":return"tg";case"feed_videos":case"feed_videos_recent":return"rv";case"feed_videos_top":return"tv";case"feed_photos":case"feed_photos_recent":return"rp";case"feed_photos_top":return"tp";case"feed_list_recent":return"rl";case"feed_list_top":return"tl";case"groups_ads_promoted_post":return"ag";case"public_ads_promoted_post":return"ap";default:return"u"}},postsSend:function(){var _={},e={},t={};if(_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.checkVersion())_=_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.get("posts_seen"),e=_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.get("posts_seen_modules")||{},t=_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.get("posts_extras")||{};else{var o=Page.postsSave();for(var i in o){var l=o[i],a=i.split("_");"ad"!==a[0]&&"posthashtag"!==a[0]&&(a[0]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.r)(a[0]),"p"!=a[1].substr(0,1)&&(a[1]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.r)(a[1]))),_[a[0]]||(_[a[0]]={}),(!_[a[0]][a[1]]||-1==l&&_[a[0]][a[1]]>0)&&(_[a[0]][a[1]]=l)}}var r=[],s=[];for(var n in _){var c=[];for(var d in _[n]){var E=n+"_"+d,p=e[E]||"",O=t[E],u="s"==p&&O&&O.q?O.q:"";u=u.replace(/[,;:]/g,"");var b=O&&O.session_id?O.session_id:"na",P="";O&&"ad"!==n&&"posthashtag"!==n&&(P=(P=":"+[O.diff,O.index,b,u||"",O.block||""].join(":")).replace(/:+$/,"")),O&&O.postHeight&&s.push([E,O.postHeight,O.viewportHeight].join(":")),c.push(p+(_[n][d]>0?d:-d)+P)}c.length&&r.push(n+"_"+c.join(","))}if(r.length){if(!vk.id)return Page.postsClear();var M={act:"seen",data:r.join(";"),meta:s.join(";")};window._postsViewHash&&(M.hash=window._postsViewHash),ajax.post("al_page.php",M,{onDone:function(){if(!_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.checkVersion())return extend(window._postsSaved,window._postsSeen);var e=_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.get("posts_seen")||{},t=_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.get("posts_sent")||{},o=_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.get("posts_seen_modules");for(var i in _){var l=void 0;for(l in _[i])t[i]||(t[i]={}),-1!=t[i][l]&&(t[i][l]=_[i][l]),(e[i]||{})[l]&&(delete e[i][l],delete o[i+"_"+l]);e[i]&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.u)(e[i])&&(delete e[i],delete o[i+"_"+l])}_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.set("posts_seen",e),_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.set("posts_sent",t),_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.set("posts_seen_modules",o),clearTimeout(window._postsCleanTimer),window._postsCleanTimer=setTimeout(Page.postsClean,1e4)}})}},postsClean:function(){if(window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle)return Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.b)("waiting ls clean.."),clearTimeout(window._postsCleanTimer),void(window._postsCleanTimer=setTimeout(Page.postsClean,1e4));Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.b)("cleaning ls..");var _=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),e=_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.get("posts_sent")||{};for(var t in e){for(var o in e[t]){var i=e[t][o];_-(i>0?i:-i)>24&&delete e[t][o]}Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.u)(e[t])&&delete e[t]}_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.set("posts_sent",e),Wall.cleanAdsEvents()},postsClear:function(){_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.set("posts_seen",{}),_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.set("posts_extras",{}),_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.set("posts_sent",{}),window._postsSaved={},window._postsSeen={},window._postsSeenModules={},window._postsExtras={},_lib_ls__WEBPACK_IMPORTED_MODULE_7__.a.set(Wall.LS_ADS_EVENTS,Wall._lsAdsEvents={})},showContacts:function(_,e,t){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("/al_page.php",{act:"a_get_contacts",oid:_,edit:e}).setOptions({onHideAttempt:function(){return cur.reloadAfterClose&&(t?t():(nav.reload({noscroll:!0}),cur.reloadAfterClose=!1)),!0}})},showContactTT:function(_,e){Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_4__.c)(_,{text:function(){return e},slideX:15,className:"pedit_tt",hasover:1,shift:[-Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(_)[0]-10,-15,-15],dir:"left",appendParentCls:"scroll_fix_wrap",onCreate:function(){_.tt&&setTimeout(_.tt.hide,3e3)}})},editContact:function editContact(oid,mid,hash,callback){var b=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("al_page.php",{act:"a_edit_contact_box",mid:mid,oid:oid}).setButtons(getLang("global_save"),function(btn){function onSearch(){var params={act:"a_add_contact",mid:mid,oid:oid};params.hash=hash,hash||(params.hash=ge("group_contact_hash").value),params.title=val("group_contact_position"),params.phone=val("group_contact_phone"),params.email=val("group_contact_email"),mid||!ge("group_contact_memlink")||(params.page=val("group_contact_memlink"),params.page||params.phone||params.email)?ajax.post("al_page.php",params,{onDone:function onDone(res,script){b.hide();var box=Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.b)();if(box){if(box.content(res),ge("public_contacts_list")&&ge("public_contacts_list").sorter&&ge("public_contacts_list").sorter.destroy(),script)try{eval(script)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.d)(_,script)}Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ub)("group_add_contact",ge("public_contacts_list").childNodes.length<30)}else Page.showContacts(oid,1,callback)},onFail:function(_){if(ge("group_contact_error"))return ge("group_contact_error").innerHTML=_,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("group_contact_error_wrap"),!0},showProgress:lockButton.pbind(btn),hideProgress:unlockButton.pbind(btn)}):b.hide()}cur.reloadAfterClose=!0,mid||cur.lastContact==val("group_contact_memlink")?onSearch():Page.searchContact(oid,val("group_contact_memlink"),onSearch)},getLang("global_cancel"));return!1},searchContact:function(_,e,t){if(!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.H)(e))return cur.lastContact="",void(t&&t());e!=cur.lastContact&&ajax.post("al_page.php",{act:"a_search_contact",oid:_,page:e},{onDone:function(_,o,i,l){cur.lastContact=e,ge("group_contact_name").innerHTML=i,ge("group_contact_image").innerHTML=o,ge("group_contact_hash").value=l,_?t?t():hide("group_contact_error_wrap"):(Object(_lib_ui__WEBPACK_IMPORTED_MODULE_6__.q)("group_contact_memlink","",!0),hide("group_contact_error_wrap"))}})},deleteContact:function deleteContact(oid,mid,hash){return cur.reloadAfterClose=!0,ajax.post("al_page.php",{act:"a_delete_contact",oid:oid,mid:mid,hash:hash},{onDone:function onDone(res,script){var box=Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.b)();if(box.content(res),ge("public_contacts_list")&&ge("public_contacts_list").sorter&&ge("public_contacts_list").sorter.destroy(),script)try{eval(script)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.d)(_,script)}Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ub)("group_add_contact",ge("public_contacts_list").childNodes.length<30)}}),!1},reorderContacts:function(_,e,t,o,i){var l=t.id.replace("group_contact_cell",""),a=(o&&o.id||"").replace("group_contact_cell",""),r=(i&&i.id||"").replace("group_contact_cell","");cur.reloadAfterClose=!0,ajax.post("/al_page.php",{act:"a_reorder_contacts",oid:_,mid:l,before:a,after:r,hash:e})},initStatusEditable:function(_){if(_.emojiInited)return!1;_.emojiInited=!0,stManager.add([jsc("web/emoji.js"),"notifier.css"],function(){Emoji.init(_,{ttDiff:-48,rPointer:!0,controlsCont:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_),noStickers:!0,forceEnterSend:!0,ref:"status",onSend:Page.infoSave,checkEditable:function(){var e=Emoji.editableVal(_);e.length>140&&(Emoji.val(_,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.c)(e.substr(0,140))),Emoji.editableFocus(_,!1,!0))}})})},infoEdit:function(_){if(cur.viewAsBox)return cur.viewAsBox();var e=ge("current_info").tt;e&&e.hide&&e.hide({fasthide:!0}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("currinfo_editor","currinfo_fake"),hide("currinfo_wrap"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)("currinfo_app")&&!cur.ciApp?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("currinfo_audio"),hide("currinfo_app")):cur.ciApp&&(hide("currinfo_audio"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("currinfo_app"));var t=ge("current_info").firstChild,o=ge("currinfo_input"),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.J)("a",t);if(Page.initStatusEditable(o,cur.infoOld),cur.infoEditing="my_current_info"==t.className,cur.infoEditing){var l=i?i.innerHTML:t.innerHTML;l=l.replace(/<img[^>]+alt="([^"]+)"[^>]*>/g,"$1"),cur.infoOld=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.H)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.c)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.G)(l)))}else cur.infoOld="";return window.Emoji?(Emoji.val(o,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.M)(cur.infoOld)),Emoji.editableFocus(o,!1,!0,!0)):(val(o,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.M)(cur.infoOld)),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.E)(o)),addEvent(window,"keydown",Page.infoKeydown),addEvent(document,"mousedown",Page.infoMousedown),ge("currinfo_save").onclick=Page.infoSave,!1},infoCancel:function(){hide("currinfo_editor","currinfo_fake"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("currinfo_wrap"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.g)("currinfo_save","currinfo_cancel"),removeEvent(window,"keydown",Page.infoKeydown),removeEvent(document,"mousedown",Page.infoMousedown),cur.ciApp=!1},infoShowShare:function(){if(cur.viewAsBox)return cur.viewAsBox();var _=ge("current_info"),e=getLang("share_current_info");Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_4__.c)(_,{content:'<div class="content"><div class="checkbox">'+e+"</div></div>",className:"share_tt",init:function(){addEvent(geByClass1("checkbox",_.tt.container),"click",function(){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_6__.c)(this),ajax.post("al_page.php",{act:"share_currinfo",hash:cur.options.info_hash,oid:cur.oid,checked:Object(_lib_ui__WEBPACK_IMPORTED_MODULE_6__.l)(this)},{onDone:Wall.receive})})},toup:!1,showdt:0,slide:10,shift:[6,8,8],dir:"auto",hidedt:200,onClean:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.g)(geByClass1("checkbox",_.tt.container))}})},infoKeydown:function(_){_.keyCode==KEY.ESC&&Page.infoCancel()},infoMousedown:function(_){for(var e=_.target;e.parentNode;){if("currinfo_editor"==e.id)return;e=e.parentNode}Page.infoCancel()},infoSave:function(){if(cur.viewAsBox)return cur.viewAsBox();var _=ge("currinfo_input"),e=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.H)((window.Emoji?Emoji.editableVal:val)(_)).replace(/\n/g," ");if(e==cur.infoOld||e==Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.M)(cur.infoOld))return Page.infoCancel();e=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.H)(e).substr(0,140),ajax.post("al_page.php",{act:"current_info",oid:cur.oid,info:e,hash:cur.options.info_hash},{onDone:function(){var _=e?"my":"no",t=e?'<span class="current_text">'+Emoji.emojiToHTML(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),!0)+"</span>":getLang("change_current_info");ge("current_info").innerHTML=ge("currinfo_fake").innerHTML='<span class="'+_+'_current_info">'+t+"</span>",Page.infoCancel();var o=ge("current_info"),i=o.tt;i&&i.el&&(i.destroy(),removeEvent(o,"mouseover")),e&&(addEvent(o,"mouseover",Page.infoShowShare),Page.infoShowShare())},onFail:function(_){if(!_)return!0},showProgress:lockButton.pbind("currinfo_save"),hideProgress:unlockButton.pbind("currinfo_save"),stat:["tooltips.js","tooltips.css",jsc("web/emoji.js")]})},showGifBox:function(_,e,t,o,i,l){l&&(l.ctrlKey||l.metaKey||l.shiftKey)||(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(l),checkMp4(function(a){a&&(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(l),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_5__.b)("docs.php",{act:"show_box",doc_id:_,doc_owner_id:e,post_id:t,post_owner_id:o,hash:i},{stat:["docs.js","docs.css"],params:{white:!0,hideButtons:!0},onDone:function(_,e){if(!vk.widget){if(Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.b)().setOptions({width:e.width+50}),cur.gifAdded&&cur.gifAdded[e.doc]){var t=geByClass1("docs_gif_box_add_"+e.doc);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.kb)(t,"button_action_light_add","button_action_light_done"),val(t,getLang("wall_doc_added_short"))}var o=geByClass1("page_doc_photo_href",Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.b)().bodyNode);Page.showGif(o)}}}))}))},showGif:function(_,e,t,o){if(e&&(e.ctrlKey||e.metaKey))return!0;if(!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.A)(o)){var i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(i),a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(_);cur.gifAdded=cur.gifAdded||{},(cur.activeGif&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(cur.activeGif))==l||hasClass(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(cur.activeGif),"page_gif_large")&&!t)&&Page.hideGif(cur.activeGif,!1);var r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"doc"),s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"hash"),n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"add-txt")||"",c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"add-hash"),d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"share-txt")||"",E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"post"),p=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"reply"),O=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"preview"),u=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"width"),b=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"height"),P=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"thumb"),M=hasClass(i,"page_gif_large"),D=!e;O||(o=!1);var m=void 0,g=_.href+"&wnd=1&module="+cur.module;o?(m=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("video",{autoplay:!0,muted:!0,loop:"loop",poster:P,src:g+"&mp4=1",className:"pages_gif_img page_gif_big"},{width:u?u+"px":void 0,height:b?b+"px":void 0,background:M?"transparent url("+P+") no-repeat 0 0":"",backgroundSize:"cover"}),attr(m,"webkit-playsinline",""),browser.ipad&&attr(m,"controls","")):m=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("img",{src:g,className:"pages_gif_img"},{visibility:"hidden"});var f=s?'<div class="page_gif_share" onmouseover="showTooltip(this, {text: \''+d+"', black: 1, shift: [7, 6, 6], toup: 0, needLeft: 1})\" onclick=\"return Page.shareGif(this, '"+r+"', '"+s+'\', event)"><div class="page_gif_share_icon"></div></div>':"",w=c?'<div class="page_gif_add" onmouseover="return Page.overGifAdd(this, \''+n+"', '"+r+"', event);\" onclick=\"return Page.addGif(this, '"+r+"', '"+s+"', '"+c+'\', event);"><div class="page_gif_add_icon"></div></div>':"",T=f||w?'<div class="page_gif_actions">'+f+w+"</div>":"",h='<div class="page_gif_progress_icon" style="display:none;">'+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(vk.pr_tpl,{id:"",cls:""})+"</div>",C=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("a",{href:_.href,className:"page_gif_preview"+(cur.gifAdded[r]?" page_gif_added":""),innerHTML:h+T,onclick:_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c},{backgroundImage:o?"":(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.O)(a,"backgroundImage")||"").replace(/"/g,"'"),backgroundSize:o?"":(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.O)(a,"backgroundSize")||"").replace(/"/g,"'"),width:u?u+"px":void 0,height:b?b+"px":void 0}),L=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(C);C.appendChild(m),cur.activeGif=C,i!==Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_)&&Wall.sendInsertBeforeError(),i.insertBefore(C,_),hide(_);var W=!1,v=void 0,A=function(){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(m);(_[0]||_[1])&&(clearInterval(v),delete m.onload,delete m.onloadeddata,W=!0,hide(L),C.style.background="",C.setAttribute("onclick","return Page.hideGif(this, event);"),addClass(m,"page_gif_big"),addClass(C,"page_gif_loaded"),u&&(m.style.width=u+"px"),b&&(m.style.height=b+"px"),m.style.visibility="",Object(_lib_stats__WEBPACK_IMPORTED_MODULE_11__.c)("gif_play",0,o?"mp4":"gif",D?1:0))};e?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(L):setTimeout(function(){W||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(L)},300),o?m.onloadeddata=A:(v=setInterval(A,10),m.onload=A),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(i,"playing",1);var R=D?"autoplay":"manual",j=cur.module||"other",B=E?"post":p?"reply":"";if(Object(_lib_stats__WEBPACK_IMPORTED_MODULE_11__.c)("gif_show",R,j,B),E){var I=E.split("_"),U=I[0],K=I[1];Object(_lib_stats__WEBPACK_IMPORTED_MODULE_11__.c)("show_post_gif",1,U,K)}return Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(e)}checkMp4(function(o){Page.showGif(_,e,t,o)})},hideGif:function(_,e){if(e&&(e.ctrlKey||e.metaKey))return!0;var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_);return t.removeAttribute("data-playing"),e&&removeClass(t,"page_gif_autoplay"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(o),delete cur.activeGif,!1},overGifAdd:function(_,e,t,o){return cur.gifAdded=cur.gifAdded||{},!(cur.gifAdded[t]&&!(e=cur.gifAdded[t].tooltip))&&(Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_4__.c)(_,{text:e,black:1,shift:[7,6,6],toup:0,needLeft:1}),!1)},addGif:function(_,e,t,o,i){if(cur.viewAsBox)return Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.i)(i),cur.viewAsBox();cur.gifAdded=cur.gifAdded||{},isObject(_.tt)&&_.tt.hide();var l=hasClass(_,"button_action_light");return cur.gifAdded[e]?ajax.post("docs.php",{act:"a_delete",oid:vk.id,did:cur.gifAdded[e].did,hash:cur.gifAdded[e].hash},{onDone:function(){if(l)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.kb)(_,"button_action_light_done","button_action_light_add"),val(_,getLang("wall_doc_add_short"));else{var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("page_gif_large",_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_);removeClass(t,"page_gif_added"),_.tt&&_.tt.el&&_.tt.destroy()}delete cur.gifAdded[e]}}):(addClass(_,"page_gif_adding"),ajax.post("docs.php",{act:"a_add",doc:e,hash:t,add_hash:o},{onDone:function(t,o,i,a){if(Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.e)(t),l)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.kb)(_,"button_action_light_add","button_action_light_done"),val(_,getLang("wall_doc_added_short"));else{var r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("page_gif_large",_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_);addClass(r,"page_gif_added"),_.tt&&_.tt.el&&_.tt.destroy()}cur.gifAdded[e]={tooltip:o,did:i[0],hash:a}}})),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(i)},shareGif:function(_,e,t,o){return cur.viewAsBox?(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.i)(o),cur.viewAsBox()):(isObject(_.tt)&&_.tt.hide(),window.showBox("like.php",{act:"publish_box",object:"doc"+e,list:t},{stat:["wide_dd.js","wide_dd.css","sharebox.js"]}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(o))},initGifAutoplay:function(_){if(!(cur.gifAutoplayScrollHandler||browser.mobile||!1===_||cur.viewAsBox))if(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.A)(_))checkMp4(function(_){Page.initGifAutoplay(_)});else{var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)("page_header")[1],t=Object(_lib_utils__WEBPACK_IMPORTED_MODULE_12__.c)(function(){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("page_gif_autoplay");if(!(!_.length||window.wkcur&&wkcur.shown)){var t=(window.innerHeight||document.documentElement.clientHeight)-e,o=e+t/2,i=Math.min(t,800),l=o-i/2,a=o+i/2,r=_.length-1,s=-1,n=void 0,c=void 0;if(cur.activeGif){var d=cur.activeGif.getBoundingClientRect();if(d.top>l&&d.bottom<a){if(d.top<o&&d.bottom>o)return;var E=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.p)(_,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(cur.activeGif)),p=Math.min(Math.abs(t/2-d.top),Math.abs(t/2-d.bottom));n={el:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(cur.activeGif),distanceToMiddle:p},E>-1&&(r=E,s=Math.abs(t/2-d.top)<Math.abs(t/2-d.bottom)?-1:1)}else inArray(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(cur.activeGif),_)&&Page.hideGif(cur.activeGif)}for(var O=void 0;c=_[r];){var u=c.getBoundingClientRect(),b=u.width&&u.height&&u.top>l&&u.bottom<a;if(b&&0==r&&Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_13__.e)()<300){n={el:c,distanceToMiddle:O};break}if(b){if(O=Math.min(Math.abs(t/2-u.top),Math.abs(t/2-u.bottom)),n&&O>n.distanceToMiddle)break;n={el:c,distanceToMiddle:O}}r+=s}if(n&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(n.el)!==cur.activeGif){Page.showGif(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(n.el));for(var P=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.p)(_,n.el)+1,M=void 0;M=_[P++];){var D=M.getBoundingClientRect();if(D.width&&D.height){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("video",{src:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(M).href+"&wnd=1&mp4=1",preload:"auto"});break}}}}},50);cur.gifAutoplayScrollHandler=t,addEvent(window,"scroll",t),addEvent(window,"resize",t),t(),cur.destroy.push(function(){removeEvent(window,"scroll",t),removeEvent(window,"resize",t),t=null,delete cur.gifAutoplayScrollHandler})}},initVideoAutoplay:function(_){if(browser.mobile||!1===_||cur.videoAutoplayScrollHandler)"feed"==cur.module&&Object(_lib_stats__WEBPACK_IMPORTED_MODULE_11__.c)("feed_init_video_autoplay",cur.videoAutoplayScrollHandler?"already_init":"bad_browser");else if(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.A)(_))checkMp4(function(_){Page.initVideoAutoplay(_)});else{var e="im"==cur.module,t=void 0,o=void 0,i=void 0,l=void 0,a=void 0,r=void 0,s=void 0;if("feed"==cur.module)Object(_lib_stats__WEBPACK_IMPORTED_MODULE_11__.c)("feed_init_video_autoplay","good_browser");else if(e){var n=geByClass1("_im_chat_body_abs");t=geByClass1("im-page--chat-header"),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(n,"ui-scroll"),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(t)[1],l=geByClass1("im-chat-input"),a=0,r=!0,s=null}var c=void 0,d=void 0,E=window.MediaSource&&MediaSource.isTypeSupported&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),p=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)("page_header")[1],O=Object(_lib_utils__WEBPACK_IMPORTED_MODULE_12__.c)(function(_,n){if(!(layers.visible||window.mvcur&&mvcur.mvShown||nav.objLoc.z||document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement)){var O=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("page_video_autoplayable"),D=O.length;if(D&&(!n||!cur.videoInlinePlayer||cur.videoInlinePlayer.isAutoplay())){var m=document.body.scrollHeight-p,g=(window.innerHeight||document.documentElement.clientHeight)-p,f=p+g/2,w=Math.min(g,800),T=void 0,h=void 0,C=void 0;e?(C=cur.imClassicInterface?m-(g+Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_13__.e)()):o.api.data.scrollBottom,r=C>=a,a=C,(n||C&&(cur.imClassicInterface&&r||!cur.imClassicInterface&&r))&&(O=O.reverse()),T=f-w/2,h=C<100?g:T+w,cur.imClassicInterface?(c=t.getBoundingClientRect().top+i,d=l.getBoundingClientRect().top):(c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(t)[1]+i,d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(l)[1]),T<c&&(T=c),h>d&&(h=d)):h=(T=(C=Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_13__.e)())<300?p:f-w/2)+w;var L=cur.videoInlinePlayer;if(L){var W=L.isAutoplay(),v=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("post",L.el),"ad-view"),A=L.el.getBoundingClientRect(),R=A.top>T&&A.bottom<h;if(!v&&W||(R=A.bottom>T&&A.bottom<h||A.top>T&&A.top<h),R){if(W&&"paused"==L.getState()&&L.play(),"ended"!=L.getState())return}else W&&!L.isActiveLive()&&L.pause()}var j=D;for(n&&s&&(j=O.indexOf(s));j--;){var B=O[j];if(E||!(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(B,"duration"))>300)){var I=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(B,"loading"),U=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(B,"playing"),K=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("post",B),"ad-view"),y=(U?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(B):B).getBoundingClientRect();if(y.width&&y.height){var k=y.top>T&&y.bottom<h;if(K&&!L&&(k=y.bottom>T&&y.bottom<h||y.top>T&&y.top<h),k){if(!U&&!I){var x=u(B),S=Date.now();s=B,Object(_lib_video__WEBPACK_IMPORTED_MODULE_14__.i)(x.video,x.list,{autoplay:1,no_progress:1,cache:1,addParams:x},!1,B),Object(_lib_stats__WEBPACK_IMPORTED_MODULE_11__.c)("page_show_inline_video",Date.now()-S),P(x),cur.videoAutoplayStat={video:x.video,launched:Date.now(),preloaded:b(x.video)}}break}if(!e&&y.top<=T)break}}}var N=j+1;if(e){if(!C)return;N=j-1}do{var F=O[N];if(F&&(E||Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(F,"duration"))<=300)){var V=u(F);b(V.video)||Object(_lib_video__WEBPACK_IMPORTED_MODULE_14__.e)(V,M,!0);break}}while(++N<D&&!e)}}},50);cur.videoAutoplayScrollHandler=O,addEvent(window,"scroll",O),addEvent(window,"resize",O),e&&!cur.imClassicInterface&&addEvent(window,"imScroll",O),O(),cur.destroy.push(function(){removeEvent(window,"scroll",O),removeEvent(window,"resize",O),removeEvent(window,"imScroll",O),O=null,delete cur.videoAutoplayScrollHandler})}function u(_){return{video:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"video"),list:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"list"),post_id:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("post",_),"post-id"),stretch_vertical:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"stretch-vertical")),autoplay:1,from_autoplay:1,module:currentModule()}}function b(_){var e=!1;return each(window.ajaxCache,function(t,o){if(0==t.indexOf("/al_video.php?act=show_inline")&&t.indexOf("&video="+_)>0)return e=!0,!1}),e}function P(_){ajax.post("al_video.php?act=autoplay_stat",{event:"load",video:_.video,post_id:_.post_id,module:cur.module||""},{})}function M(_,e){if(_){var t=e[3].player.params[0];VideoPlayer.preload(t)}}},actionsDropdown:function(_,e){_||!e?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(_):e()},actionsDropdownHide:function(_,e,t){if(1===e)return t&&t(),hide(_);clearTimeout(cur.actDdHide),cur.actDdHide=setTimeout(function(){Object(_lib_fx__WEBPACK_IMPORTED_MODULE_15__.f)(_,200,hide.pbind("page_actions_sublist")),t&&t()},150)},actionsDropdownUnhide:function(){clearTimeout(cur.actDdHide)},actionsDropdownLocked:function(_){if(_=ge(_))return hasClass(_,"page_actions_item_lock")},lockTimeout:null,resetLockTimeout:null,actionsDropdownLock:function(_){(_=ge(_))&&hasClass(_,"page_actions_item")&&!hasClass(_,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),Page.resetLockTimeout=!1,Page.lockTimeout=setTimeout(function(){if(!Page.resetLockTimeout){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"inner",_.innerHTML),addClass(_,"page_actions_item_lock");var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{className:"page_actions_item_lock_text"});val(e,_.innerHTML),_.appendChild(e),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_6__.u)(_)}},500))},actionsDropdownUnlock:function(_){Page.resetLockTimeout=!0,(_=ge(_))&&hasClass(_,"page_actions_item")&&hasClass(_,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),removeClass(_,"page_actions_item_lock"),_.innerHTML=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"inner"))},actionsPreloadFeedLists:function actionsPreloadFeedLists(el,sh){ajax.post("al_feed.php",{act:"a_get_lists_by_item",item_id:cur.oid},{onDone:function onDone(html,js){if(sh&&!ge("page_actions_wrap")){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(el).appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(html),el);try{eval(js)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_9__.d)(_,js)}}},cache:1})},feedListsDDShow:function(){var _=ge("page_actions_item_lists");if(addClass(_,"page_actions_item_unfolded"),ge("page_actions_sublist"))return clearTimeout(cur.feedListsDDHide),void Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("page_actions_sublist");var e=[];for(var t in cur.options.feedLists){var o=cur.options.feedLists[t];o.length>20&&(o=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_8__.H)(o.substr(0,18))+"..."),e.push('<a id="page_feed_item'+t+'" class="page_actions_item page_actions_subitem'+(cur.options.feedListsSet&&cur.options.feedListsSet[t]?" checked":"")+'" onclick="Page.feedListsCheck(this, '+t+');">'+o+"</a>")}e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)('<div id="page_actions_sublist" onmouseover="Page.feedListsDDShow();">'+e.join("")+"</div>"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_).appendChild(e)},feedListsDDHide:function(){clearTimeout(cur.feedListsDDHide),cur.feedListsDDHide=setTimeout(function(){hide("page_actions_sublist"),removeClass("page_actions_item_lists","page_actions_item_unfolded")},150)},feedListsCheck:function(_,e){var t=hasClass(_,"checked");t?(cur.options.feedListsSet[e]=0,cur.options.feedListsChanges[e]=-1):(cur.options.feedListsSet[e]=1,cur.options.feedListsChanges[e]=1),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(_,"checked",!t),cur.feedListsTO&&clearTimeout(cur.feedListsTO);var o=[];for(var i in cur.options.feedListsChanges)o.push(cur.options.feedListsChanges[i]*i);o.length&&(cur.feedListsTO=setTimeout(function(){ajax.post("al_feed.php",{act:"a_toggle_lists",item_id:cur.oid,lists_ids:o.join(","),hash:cur.options.feedListsHash},{onDone:function(){cur.options.feedListsChanges={}}})}))},addAudioPreview:function(_,e){return stManager.add(["audioplayer.css","audioplayer.js"]),e[AudioUtils.AUDIO_ITEM_INDEX_CONTEXT]="attach_preview",AudioUtils.drawAudio(e,"inlined")},ownerButtonClick:function(_,e,t){if(!Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.d)(t)){switch(_.type){case"open_url":if(_.is_internal&&_.open_in_layer){var o=nav.fromStr(_.url),i=o[0].replace("/","");return delete o[0],Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_2__.B)({w:i},null,null,{ads_params:o})}return nav.go(e,t)}return!1}},postAttachesShowMore:function(_,e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.A)(_);if(t&&hasClass(t,"post_cropped_attaches")){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.A)(t),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(t);["wall_audio_rows","post_media","post_thumbed_media"].some(function(_){return hasClass(o,_)&&hasClass(i,_)})&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.m)(i).forEach(function(_){o.appendChild(_)}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(i));var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.f)(t.innerHTML);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(l,t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(_);var a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",_),r=post?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(a,"post-id"):"";if(r){var s="feed"===cur.module&&feed?feed.getModuleRef():cur.module;Object(_lib_stats__WEBPACK_IMPORTED_MODULE_11__.c)("post_activity","expand_attach",r,s)}}return e&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.c)(e)}};__webpack_exports__.a=Page},qwyz:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";var _lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zxIV"),_lib_feature_entries__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("/PiP"),_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("Egk5"),_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("FWc3"),_lib_message_box__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("EasH"),_lib_ui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("v+DW"),_lib_ls__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("0DAA"),_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("t7n3"),_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("kcIO"),_lib_stats__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("XzvV"),_lib_scroll__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("lXE5"),_lib_fx__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("7jxN"),_lib_video__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("Ia1d"),_lib_lang__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("4+be"),_lib_ajax__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("Kngp"),_lib_legacy__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("t/FQ"),_lib_accessibility__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("QGEU"),_lib_debug_tools__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("98sY"),_lib_input_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("o7bv"),_lib_utils__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("aong"),_slicedToArray=function(){return function(_,e){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return function(_,e){var t=[],o=!0,i=!1,l=void 0;try{for(var a,r=_[Symbol.iterator]();!(o=(a=r.next()).done)&&(t.push(a.value),!e||t.length!==e);o=!0);}catch(_){i=!0,l=_}finally{try{!o&&r.return&&r.return()}finally{if(i)throw l}}return t}(_,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Wall={LS_ADS_EVENTS:"ads.events",deleteAll:function(_,e,t){ajax.post("al_wall.php",{act:"delete_all",post:e,hash:t},{onDone:function(e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_));t.oldt=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(t,e)},showProgress:function(){hide(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_).appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{className:"progress"})))},hideProgress:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_))}})},restoreAll:function(_,e,t){var o=Math.floor(1e5*Math.random());cur.wallRnd=o,ajax.post("al_wall.php",{act:"restore_all",post:e,hash:t,rnd:o},{onDone:function(e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(t,t.oldt)},showProgress:function(){hide(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_).appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("span",{className:"progress_inline"})))},hideProgress:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_))}})},deleteThread:function(_,e,t){ajax.post("al_wall.php",{act:"delete_thread",post:e,hash:t,from_deleted:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(ge("post"+e),"reply_deleted")},{onDone:function(t){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("dld_inner",_);if(o)o.oldElements=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(o),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(o,t);else{var i=ge("post"+e),l=geByClass1("reply_wrap",i);hide(l),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{id:"post_del"+e,className:"dld",innerHTML:'<span class="dld_inner">'+t+"</span>"}),i.appendChild(o)}hide("replies_wrap_deep"+e)},showProgress:function(){hide(_);var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post_actions",_);if(e)addClass(e,"post_actions_progress");else{var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_);t||(t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{className:"progress"}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_).appendChild(t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(t))}},hideProgress:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(_);var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post_actions",_);e?removeClass(e,"post_actions_progress"):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_))}})},restoreThread:function(_,e,t){ajax.post("al_wall.php",{act:"restore_thread",post:e,hash:t},{onDone:function(){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_);if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("replies_wrap_deep"+e),t.oldElements)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(t,t.oldElements);else{var o=geByClass1("reply_wrap","post"+e);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(o),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("post_del"+e)}},showProgress:function(){hide(_);var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_);e||(e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{className:"progress"}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_).appendChild(e),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(e))},hideProgress:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_))}})},block:function(_,e,t,o,i){ajax.post("al_wall.php",{act:"block",post:e,hash:t,bl:o,from:i},{onDone:function(e){o?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_).insertBefore(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("span",{innerHTML:e}),_),hide(_)):(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_))),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_)))},showProgress:function(){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.u)(_,"post_inline_progress","post_inline_progress",!0)},hideProgress:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("post_inline_progress")}})},blockEx:function(_,e){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.b)("groupsedit.php",{act:"bl_edit",name:"id"+e,gid:_,auto:1},{stat:["page.css","ui_controls.js","ui_controls.css"],dark:1})},withMentions:!(browser.mozilla&&browser.version.match(/^2\./)||browser.mobile),editPost:function(_,e,t,o,i){if(cur.editingPost&&ge("wpe_text")){var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wall_posts",ge("wpe_text"));if(!l||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(l))return o&&o(),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.q)("wpe_text");Wall.cancelEdit()}cur.editingPost=[e],Wall.withMentions?stManager.add(["ui_controls.css","ui_controls.js","mentions.js",jsc("web/wall_edit.js")]):stManager.add([jsc("web/wall_edit.js")]),ajax.post("al_wall.php",extend({act:"edit",post:e,mention:Wall.withMentions?1:""},t),{onDone:function(){var _=Array.prototype.slice.call(arguments);if(isArray(_[4])&&cur.options&&isArray(cur.options.filter_media_types)){var t=[];each(_[4],function(_,e){each(cur.options.filter_media_types,function(_,o){if(e[0]===o[0])return t.push(o),!1})}),_[4]=t}_.unshift(e),WallEdit.editPost.apply(window,_),i&&i()},onFail:function(){cur.editingPost=!1,o&&o()},showProgress:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"ui_actions_menu_item")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.n)(_):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"flat_button")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o)(_):addClass(geByClass1("post_actions","post"+e),"post_actions_progress")},hideProgress:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"ui_actions_menu_item")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.v)(_):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"flat_button")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w)(_):removeClass(geByClass1("post_actions","post"+e),"post_actions_progress")},noSort:!0})},fixPost:function fixPost(link,post,hash,value){return ajax.post("al_wall.php",{act:"a_fix_post",post:post,hash:hash,value:value},{onDone:function onDone(js){if(js)try{eval(js)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_17__.d)(_,js)}var postEl=cur.wallLayer==post?ge("wl_post"):ge("post"+post);each(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("post_fixed"),function(){removeClass(this,"post_fixed")}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(postEl,"post_fixed",value),link&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(link,getLang(value?"wall_unfix_post":"wall_fix_post")),link.onclick=function(){return Wall.fixPost(link,post,hash,value?0:1)}),cur.onWKFix&&(cur.onWKFix(value),delete cur.onWKFix)},showProgress:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(link,"ui_actions_menu_item")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.n)(link):_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o.pbind("wpe_fix"+post)},hideProgress:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(link,"ui_actions_menu_item")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.v)(link):_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w.pbind("wpe_fix"+post)}}),!1},cancelEdit:function(_){if(cur.editingPost){if(!0===_&&cur.editingPost[0].match(/^-?\d+_/))return;window.WallEdit?WallEdit.cancelEditPost():cur.editingPost=!1}},searchWall:function(){},switchTabContent:function(_){switch(hide("page_wall_posts","page_postponed_posts","page_suggested_posts","page_search_posts","page_top_posts","page_archive_posts"),_){case"own":case"all":Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("page_wall_posts");break;case"postponed":Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("page_postponed_posts"),hide("wall_more_link");break;case"suggested":Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("page_suggested_posts");break;case"search":Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("page_search_posts");break;case"top":Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("page_top_posts");break;case"archive":Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("page_archive_posts")}},switchWall:function(_,e,t){if(e&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.d)(e))return!0;if(t||(t="own"==cur.wallType?"all":"own"),e&&"click"==e.type&&e.clientX&&e.offsetX&&cur.wallTab==t&&cur.wallType==t&&"top"!==t)return nav.go(_,e);if("postponed"==cur.wallTab&&wall.checkPostponedCount(),"archive"!==cur.wallTab&&"archive"!==t||((cur.wallLayer?wkcur:cur).wallMyDeleted={}),Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.v)(cur.wallArchiveFeatureTooltipHide)&&cur.wallArchiveFeatureTooltipHide(),"top"!==t&&"archive"!==t){var o=ge("page_wall_posts");removeClass(o,"own"),removeClass(o,"all"),addClass(o,t)}return cur.wallType=t,cur.wallTab=t,uiTabs.switchTab(_),uiTabs.hideProgress(_),"top"===t||"archive"===t?(cur.baseWallModule=cur.module,cur.module="wall_"+t,cur.topWallFeatureTT&&cur.topWallFeatureTT.hide()):cur.baseWallModule&&(cur.module=cur.baseWallModule,delete cur.baseWallModule),Wall.hasPosts()?(Wall.update(),Wall.showWall()):(cur.wallNextFrom=0,cur.wallTopNextFrom=0,cur.wallArchiveNextFrom=0,cur.wallArchiveRestored=0,cur.wallArchiveArchived=0,cur.wallArchiveRolledback=0,"top"===t&&delete cur.wallTopFinished,"archive"===t&&delete cur.wallArchiveFinished,uiTabs.showProgress(_),Wall.showMore(0,_)),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(e)},resetWall:function(){if(cur.wallType&&cur.wallTab){var _=geByClass1("_wall_tab_"+cur.wallType);_&&(cur.wallNextFrom=0,cur.wallTopNextFrom=0,cur.wallArchiveNextFrom=0,(cur.wallLayer?wkcur:cur).wallMyDeleted={},"top"===cur.wallType&&delete cur.wallTopFinished,"archive"===cur.wallType&&delete cur.wallArchiveFinished,uiTabs.showProgress(_),Wall.showMore(0,_,!0))}},hasPosts:function(_){return _=_||cur.wallType,!!geByClass1("post","archive"===_?"page_archive_posts":"top"===_?"page_top_posts":"page_wall_posts")},showSuggested:function showSuggested(ev,rows,notAll){if(ev&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.d)(ev))return!0;if(!cur.oid)return!1;var el=ge("page_wall_suggest");if(el=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(el,"unshown")?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.C)("#page_wall_suggest_more .ui_tab_group_item"):geByClass1("ui_tab",el),!el)return!1;if(uiTabs.switchTab(el),cur.wallTab="suggested",delete cur.suggestedDeletedCount,void 0!==rows)wall.suggestLoaded(rows,notAll);else{if(cur.suggestedLoading)return!1;var curOid=cur.suggestedLoading=cur.oid;uiTabs.showProgress(el),ajax.post("al_wall.php",{act:"get_suggests",owner_id:cur.oid},{onDone:function onDone(rows,notAll,js,count){if(js)try{eval(js)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_17__.d)(_,js)}cur.suggestedLoading=!1,uiTabs.hideProgress(el),Wall.updateTabCounter("page_wall_suggested_cnt",count),curOid===cur.oid&&"suggested"==cur.wallTab&&wall.suggestLoaded.apply(window,arguments)}})}return!1},deleteSuggested:function(_,e,t,o){if(!Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.b)(o)){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o)(o);var i=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.d)({title:getLang("global_action_confirmation"),onHide:function(){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w)(o)}},getLang("wall_delete_suggested_box"),getLang("wall_delete_suggested_btn"),function(o){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.b)(o)||(Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o)(o),ajax.post("al_wall.php",{act:"delete_suggested",post_id:_,hash:t,group_id:e},{onDone:function(_){if("full_own"==cur.wallType||"full_all"==cur.wallType){var e=(Math.ceil(_/cur.pgPerPage)-1)*cur.pgPerPage;e<cur.pgOffset&&(e>0?nav.objLoc.offset=e:delete nav.objLoc.offset,nav.setLoc(nav.objLoc)),nav.reload()}else Wall.showSuggested();i.hide()},showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o.pbind(o),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w.pbind(o)}))},getLang("global_cancel"))}},suggestLoaded:function(_,e){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_suggested_posts",_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ub)("wall_more_link",e),wall.switchTabContent("suggested")},suggestMore:function(){var _=ge("page_suggested_posts"),e=ge("wall_more_link");Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.b)(e)||ajax.post("al_wall.php",{act:"get_suggests",owner_id:cur.oid,offset:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("post",_).length-Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("dld",_).length},{onDone:function(t,o){for(var i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{innerHTML:t}),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(i);l;)ge(l.id)||!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(l,"post")?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(l):_.appendChild(l),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(i);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ub)(e,o)},showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o.pbind(e),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w.pbind(e)})},suggestUpdate:function(_){var e=ge("page_suggests_count"),t=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(e));e&&(-1!==_&&1!==_||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(e,t+=_),Wall.updateTabCounter("page_wall_suggested_cnt",t))},suggestPublished:function(_,e,t){if(cur.onepost)return nav.go("/wall"+cur.oid);if(Wall.suggestUpdate(-1),Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.e)(e),cur.wallMyDeleted[_]=1,cur.editingPost=!1,Wall.deinitComposer(ge("wpe_text")),"full_own"!=cur.wallType&&"full_all"!=cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),cur.postWpeIsPoster=!!cur.posterWpeSendParams,cur.posterWpe&&cur.posterWpeSendParams&&WallEdit.posterDestroy(),t&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_postponed_posts",t),wall.postponeUpdateCount()),Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_suggests_count")))Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("post"+_);else{var o=ge("wall_rmenu");o?(geByClass1("ui_rmenu_item",o).click(),hide(geByClass1("_wall_menu_suggested",o))):ge("wall_tabs")&&(geByClass1("ui_tab",ge("wall_tabs")).click(),wall.updateTabVisibility("page_wall_suggest",!1))}},showPostponedFull:function(_){var e=ge("ui_rmenu_postponed"),t=ge("page_wall_posts");if(!e||!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(e,"ui_rmenu_item_sel")||!t){var o={0:nav.objLoc[0],postponed:1};return nav.go(o)}Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(t,_),FullWall.updateSummary(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("post",t).length)},showPostponed:function(_,e){if(_&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.d)(_))return!0;if(!cur.oid)return!1;var t=ge("page_wall_postponed");if(!(t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"unshown")?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.C)("#page_wall_postponed_more .ui_tab_group_item"):geByClass1("ui_tab",t)))return!1;if(uiTabs.switchTab(t),cur.wallTab="postponed",void 0!==e)Wall.postponedLoaded(e);else{if(cur.postponedLoading)return!1;var o=cur.postponedLoading=cur.oid;uiTabs.showProgress(t),ajax.post("al_wall.php",{act:"get_postponed",owner_id:cur.oid},{onDone:function(_){cur.postponedLoading=!1,uiTabs.hideProgress(t),o===cur.oid&&"postponed"==cur.wallTab&&Wall.postponedLoaded(_)}})}return!1},postponedLoaded:function(_){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_postponed_posts",_),wall.postponeUpdateCount(),wall.switchTabContent("postponed")},postponeUpdateCount:function(){var _=ge("page_postponed_posts"),e=_&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("post",_).length-Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("dld",_).length||0;_&&Wall.updateTabCounter("page_wall_postponed_cnt",e)},checkPostponedCount:function(){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("post","page_postponed_posts"),e=0;each(_,function(){var _=this.id.replace("post","");cur.wallMyDeleted[_]||e++}),e||wall.updateTabVisibility("page_wall_postponed",!1)},updateTabCounter:function(_,e){e=e?Object(_lib_lang__WEBPACK_IMPORTED_MODULE_13__.i)(e,"%s",!0):"",Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)(_).forEach(function(_){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(_,e);var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"ui_tab_group_item")&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"default-label",t.innerHTML)})},updateTabVisibility:function(_,e){var t=ge("page_wall_more_tab"),o=void 0,i=void 0,l=void 0,a=void 0;t?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(t)?e?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"unshown")&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_+"_more","unshown")&&(a=!1,cur.wallTabsMorePriority.forEach(function(e){a||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(e,"unshown")||(addClass(e,"unshown"),removeClass(e+"_more","unshown"),removeClass(_,"unshown"),a=!0)}),a||removeClass(_+"_more","unshown")):(l=ge(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(l,"unshown")?addClass(ge(_+"_more"),"unshown"):(addClass(l,"unshown"),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("ui_tab",ge("wall_tabs")).filter(function(_){return(_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_))!==t&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"unshown")}),(o=cur.wallTabsLimit-1-i.length)>0&&cur.wallTabsMorePriority.forEach(function(_){if(!(o<=0)){var e=ge(_+"_more");e&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(e,"unshown")&&(removeClass(ge(_),"unshown"),addClass(e,"unshown"),o--)}})),(i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("ui_tab_group_item",t)).length-Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("unshown",t).length<=1&&(i.forEach(function(_){_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"unshown")||(removeClass(ge(_.id.replace(/_more$/,"")),"unshown"),addClass(_,"unshown"))}),addClass(t,"unshown"))):(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(ge(_),"unshown",!e),(i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("ui_tab",ge("wall_tabs")).filter(function(_){return(_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_))!==t&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"unshown")})).length>cur.wallTabsLimit&&(o=i.length-(cur.wallTabsLimit-1),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("ui_tab_group_item",t).forEach(function(_){addClass(_,"unshown")}),cur.wallTabsMorePriority.forEach(function(_){if(!(o<=0)){var e=ge(_);e&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(e,"unshown")&&(addClass(e,"unshown"),removeClass(ge(_+"_more"),"unshown"),o--)}}),removeClass(t,"unshown"),Object(_lib_stats__WEBPACK_IMPORTED_MODULE_9__.c)("wall_more_tab_shown",cur.oid))):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(ge(_),"unshown",!e)},postponedPublished:function(_,e){if(cur.onepost)return nav.go("/wall"+cur.oid);"full_own"!=cur.wallType&&"full_all"!=cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),e&&Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.e)(e),cur.wallMyDeleted[_]=1;var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("post",ge("page_postponed_posts")),o=ge("post"+_);if(t.length<=1&&inArray(o,t)){var i=ge("wall_rmenu");i?(geByClass1("ui_rmenu_item",i).click(),hide(geByClass1("_wall_menu_postponed",i))):ge("wall_tabs")&&(geByClass1("ui_tab",ge("wall_tabs")).click(),wall.updateTabVisibility("page_wall_postponed",!1))}else Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(o),wall.postponeUpdateCount()},onWallSearchSend:function(_,e){e?Wall.showSearch(e,0):Wall.hideSearch()},showSearch:function(_,e){if(cur.searchLoading&&cur.searchLoading==_||!cur.oid)return!1;var t=cur.oid;cur.wallQuery=cur.searchLoading=_,"search"!=cur.wallTab&&(cur.prevWallTab=cur.wallTab,cur.wallTab="search");var o=ge("wall_more_link");return ajax.post("al_wall.php",{act:"s",search:1,q:_,owner_id:cur.oid,offset:e,inline:1,owners_only:1},{onDone:function(i,l,a){if(t===cur.oid&&"search"==cur.wallTab){var r=ge("page_search_posts");e||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(r,""),r.appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.f)(i)),wall.switchTabContent("search"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ub)(o,l<a),o.onclick=Wall.showSearch.pbind(_,l),Object(_lib_stats__WEBPACK_IMPORTED_MODULE_9__.b)(cur.oid>0?"wall_users":"wall_groups",0,a)}},showProgress:function(){uiSearch.showProgress("wall_search"),e&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o)(o)},hideProgress:function(){cur.searchLoading=!1,uiSearch.hideProgress("wall_search"),e&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w)(o)}}),!1},hideSearch:function(){delete cur.wallQuery,cur.prevWallTab&&(Object(_lib_stats__WEBPACK_IMPORTED_MODULE_9__.a)(cur.oid>0?"wall_users":"wall_groups"),cur.wallTab=cur.prevWallTab,cur.prevWallTab=!1,wall.switchTabContent(cur.wallTab),wall.update())},publishPostponedPost:function(_,e,t){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.d)(getLang("publish_postponed_title"),getLang("publish_postponed_confirm"),getLang("publish_postponed_btn"),function(){Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.b)().hide(),ajax.post("al_wall.php",{act:"publish_postponed",post:_,from:t,hash:e},{onDone:Wall.postponedPublished.pbind(_),showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o.pbind("wpe_publish"+_),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w.pbind("wpe_publish"+_)})},getLang("global_cancel"))},cmp:function(_,e){var t=_.length,o=e.length;return t<o?-1:t>o?1:_<e?-1:_>e?1:0},receive:function(_,e,t,o){o=!0===o;var i="top"===(t=t||cur.wallType),l="archive"===t,a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{innerHTML:_}),r=!!cur.options.revert,s=l?ge("page_archive_posts"):i?ge("page_top_posts"):ge("page_wall_posts"),n=[],c=[],d=0,E=void 0,p=void 0,O=void 0,u=void 0;function b(_){return!!(_&&_.tagName&&"div"===_.tagName.toLowerCase()&&_.id&&"post"===_.id.substr(0,4))&&_.id}o?c=["page_top_posts","page_wall_posts","page_archive_posts"]:(c=l?["page_top_posts","page_wall_posts"]:i?["page_wall_posts","page_archive_posts"]:["page_top_posts","page_archive_posts"],O=r?s.firstChild:s.lastChild),c.forEach(function(_){for(var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(ge(_));e;){var t=e;e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(e),t.tagName&&"input"===t.tagName.toLowerCase()||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(t)}});for(var P=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(r?a.firstChild:a.lastChild);P;P=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(r?a.firstChild:a.lastChild))if("input"!=P.tagName.toLowerCase()){if(!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(P,"post_fixed")||!ge(P.id))if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(P,"_ads_promoted_post"))n.push({el:P,beforePost:b(r?a.firstChild:E),afterPost:b(r?E:a.lastChild)});else{for(;O&&O.tagName&&"div"==O.tagName.toLowerCase()&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(O,"post_fixed")&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(O,"_ads_promoted_post")||!i&&!l&&Wall.cmp(O.id,P.id)<0);)O=r?O.nextSibling:O.previousSibling;++d,O?Wall.cmp(O.id,P.id)?(u=O,(p=r?O.previousSibling:O.nextSibling)&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(p,"_ads_promoted_post")&&(u=p),r?(s!==Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(u)&&Wall.sendInsertBeforeError(),s.insertBefore(P,u)):(s!==Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(u.nextSibling)&&Wall.sendInsertBeforeError(),s.insertBefore(P,u.nextSibling))):(s.replaceChild(P,O),O=P,--d):r?s.appendChild(P):s.insertBefore(P,s.firstChild),E=P,Object(_lib_input_utils__WEBPACK_IMPORTED_MODULE_18__.c)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.J)("textarea",P),{fast:1})}}else{var M=ge(P.id);M?s.replaceChild(P,M):s.firstChild?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(P,s.firstChild):s.appendChild(P)}if(n.length)for(var D=0,m=n.length;D<m;++D){var g=n[D];if(g.beforePost||g.afterPost){for(var f="no_position",w=r?s.firstChild:s.lastChild;w;w=r?w.nextSibling:w.previousSibling){u=null;var T=b(w);if(T){if(g.beforePost===T?u=w:g.afterPost===T&&(u=w.nextSibling),u&&(u.previousSibling&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(u.previousSibling,"_ads_promoted_post")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(u,"_ads_promoted_post"))){u=null,f="ads_sibling";break}if(u){s!==Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(u)&&Wall.sendInsertBeforeError(),s.insertBefore(g.el,u),f=!1;break}}}f&&Object(_lib_stats__WEBPACK_IMPORTED_MODULE_9__.c)("debug_watch",1,"js_page_ads_promoted_post_no_position",f)}}i&&!d&&(cur.wallTopFinished=cur.oid),l&&!d&&(cur.wallArchiveFinished=cur.oid),"full_own"!=t&&"full_all"!=t||(Pagination.recache(d),FullWall.updateSummary(cur.pgCount)),Wall.update(),wall.addReplyNames(e),Wall.updateMentionsIndex(),d&&Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_1__.j)().updateCurrentPlaying()},showMore:function(_,e,t){if(cur.viewAsBox)return cur.viewAsBox();if(!cur.wallLayer){if("suggested"==cur.wallTab)return Wall.suggestMore();if(!(cur.wallTypeLoading&&cur.wallTypeLoading[cur.wallType]||"top"===cur.wallType&&cur.wallTopFinished===cur.oid||"archive"===cur.wallType&&cur.wallArchiveFinished===cur.oid)){var o=cur.wallType,i="top"===o,l="archive"===o,a=ge("wall_more_link"),r=(0!==_?l?cur.wallArchiveNextFrom:i?cur.wallTopNextFrom:cur.wallNextFrom:"")||"",s=cur.wallLoading=cur.oid,n=i&&!!cur.wallTopOnlyCache;cur.wallTypeLoading=cur.wallTypeLoading||{},cur.wallTypeLoading[o]=!0,t=!0===t&&!_,ajax.post("al_wall.php",{act:"get_wall",owner_id:cur.oid,offset:_,type:o,fixed:cur.options.fixed_post_id||"",wall_start_from:r,onlyCache:n},{onDone:function(a,r,n,c){return e&&uiTabs.hideProgress(e),s!==cur.oid||o!==cur.wallType?(delete cur.wallLoading,void delete cur.wallTypeLoading[o]):i&&isObject(a)&&a.wait?(cur.wallTopLoadingDelay=cur.wallTopLoadingDelay?cur.wallTopLoadingDelay+100:200,void(cur.wallTopLoadingDelay<500?setTimeout(function(){delete cur.wallLoading,delete cur.wallTypeLoading[o],Wall.showMore(_)},cur.wallTopLoadingDelay):(delete cur.wallLoading,delete cur.wallTypeLoading[o],cur.wallTopOnlyCache=!1,Wall.showMore(_)))):(delete cur.wallTopLoadingDelay,cur.wallVideos&&each(n,function(_,e){cur.wallVideos[_]&&(cur.wallVideos[_].list=cur.wallVideos[_].list.concat(e.list))}),l?cur.wallArchiveNextFrom=c:i?cur.wallTopNextFrom=c:cur.wallNextFrom=c,void setTimeout(function(){Wall.receive(a,r,o,t),_||o!==cur.wallType||Wall.showWall(),delete cur.wallLoading,delete cur.wallTypeLoading[o]},0))},showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o.pbind(a),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w.pbind(a)})}}},showWall:function(){wall.switchTabContent(cur.wallType);var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("wall_module",ge("page_wall_posts")))[1];_<Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.e)()&&Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.g)(_-15)},checkTextLen:function(_,e,t){var o=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(Emoji.editableVal(_).replace(/\n\n\n+/g,"\n\n"));if(_.lastLen!==o.length||t){var i=_.lastLen=o.length,l=(cur.options||{}).max_post_len||(window.mvcur||{}).maxReplyLength,a=i-o.replace(/\n/g,"").length;e=ge(e),i>l-100||a>4?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(e),e.innerHTML=i>l?getLang("global_recommended_exceeded",i-l):a>4?getLang("global_recommended_lines",a-4):getLang("text_N_symbols_remain",l-i)):hide(e),window.FullWall&&cur.onepost&&FullWall.onePostOnScroll()}else window.FullWall&&cur.onepost&&FullWall.onePostOnScroll()},checkPostLen:function(_,e,t,o){var i=ge(_);if(t=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(t).replace(/\n\n\n+/g,"\n\n"),i&&(i.lastLen!==t.length||o)){var l=i.lastLen=t.length,a=cur.options.max_post_len,r=l-t.replace(/\n/g,"").length,s=ge(e);l>a-100||r>4?(s.innerHTML=l>a?getLang("global_recommended_exceeded",l-a):r>4?getLang("global_recommended_lines",r-4):getLang("text_N_symbols_remain",a-l),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(s)):hide(s)}},postChanged:function(_){var e=Wall.isPosterEditorOpen();if((e||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)("submit_post"))&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(ge("submit_post_box"),"shown")||Wall.showEditPost(),vk.id&&!vk.widget&&!cur.options.no_draft){clearTimeout(cur.postAutosave);var t=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(cur.oid)==vk.id?Wall.saveDraft:Wall.saveOwnerDraftText.pbind(cur.oid);!0===_?t():cur.postAutosave=setTimeout(t,10===_?10:1e3)}e||setTimeout(Wall.checkPosterAvailability)},ownerDraftKey:function(_){return"wall_draft"+vk.id+"_"+_},ownerDraftData:function(){return cur.wallDraftData||(cur.wallDraftData={}),cur.wallDraftData},addOwnerDraftMedia:function(_,e){if(!cur.options.no_draft){var t=Wall.ownerDraftData(),o=e[0],i=e[1],l=e[2];t._attach_cache=t._attach_cache||{},l?t._attach_cache[o+i]=l:l=t._attach_cache[o+i],t.attaches=t.attaches||[];var a=_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.get(Wall.ownerDraftKey(_))||{};!1!==o?t.attaches.push([o,i,l,t.attaches.length]):!1===o&&void 0!==i&&(t.attaches=t.attaches.filter(function(_){return _[3]!==i})),_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.set(Wall.ownerDraftKey(_),extend(a,{txt:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.c)(Wall.getDraftData().message||""),medias:t.attaches}))}},cleanOwnerDraftMedia:function(_){if(!cur.options.no_draft){var e=Wall.ownerDraftData(),t=_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.get(Wall.ownerDraftKey(_))||{};e.attaches=[],_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.set(Wall.ownerDraftKey(_),extend({txt:""},t,{medias:[]}))}},saveOwnerDraftText:function(_){if(cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia),!cur.options.no_draft){var e=Wall.ownerDraftData(),t=_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.get(Wall.ownerDraftKey(_))||{},o=Wall.getDraftData(),i=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.c)(o.message||""),l=null;if(e.txt=i,each(t.medias||{},function(_,e){switch(e[0]){case"postpone":o.postpone&&(t.medias[_][1]=o.postpone,t.medias[_][2].draft=1);break;case"poll":var i=(cur.wallAddMedia||{}).pollData(!0,!0);i&&extend(t.medias[_][2],i);break;case"copyright":var l=(cur.wallAddMedia||{}).copyrightData(!0);l&&extend(t.medias[_][2],l)}}),i&&o.bkg_id&&(l={id:o.bkg_id},cur.poster&&cur.poster.isCustomBkgId(o.bkg_id)&&extend(l,cur.poster.getCustomBkg()),t.bkg_id&&delete t.bkg_id),extend(t,{txt:i,bkg:l}),cur.shareShowImg&&extend(t,{shareShowImg:cur.shareShowImg}),_<0){var a=cur.poster?ge("submit_post_box"):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("_submit_post_box",ge("official"));extend(t,{from:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(a,"from-oid")||vk.id,signed:Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)("signed")?1:0})}_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.set(Wall.ownerDraftKey(_),t)}},getOwnerDraft:function(_){if(cur.options.no_draft)return[];var e=_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.get(Wall.ownerDraftKey(_))||[];return[e.txt,e.medias,!0,{from:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(e.from),signed:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(e.signed),shareShowImg:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(e.shareShowImg)},e.bkg]},saveOwnerDraftMedia:function(_,e,t,o){if(!cur.options.no_draft){Wall.cleanOwnerDraftMedia(_);var i=cur.wallAddMedia||{},l=[],a=(cur.wallAddMedia?i.getMedias():[]).slice().map(function(_){return _.slice(0,2)});void 0!==t&&e?l=[[e,t,o]]:e||void 0===t||a.splice(t,1),a=a.concat(l),each(a,function(){Wall.addOwnerDraftMedia(_,this)})}},saveDraft:function(){if(cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia),!cur.options.no_draft)if(cur.noDraftSave)cur.noDraftSave=!1;else if(!cur.postSent&&vk.id==Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(cur.oid)){var _=Wall.getDraftData();_.delayed||ajax.post("al_wall.php",Wall.fixPostParams(extend({act:"save_draft",hash:cur.options.post_hash},_)),{onFail:function(){return!0}})}},getDraftData:function(){if(cur.options.no_draft)return{};var _=cur.wallAddMedia||{},e=_.chosenMedia||{},t=cur.wallAddMedia?_.getMedias():[],o=_.shareData||{},i="",l=0,a=null;if(Wall.isPosterEditorOpen())a=(i=cur.poster.getText())?cur.poster.getBkgId():null;else{var r=ge("post_field");i=window.Emoji?Emoji.editableVal(r):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(r),i=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(i)}var s={message:i,bkg_id:a};return isArray(e)&&e.length&&t.push(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.d)(e)),t.length&&each(t,function(e,t){if(t){var a=this[0],r=this[1];switch(a){case"poll":var n=_.pollData(!0,!0);if(!n)return s.delayed=!0,!1;r=n.question,delete n.question,s=extend(s,n);break;case"copyright":var c=_.copyrightData(!0);if(c)return void(s=extend(s,c));break;case"share":if(o.failed||!o.url||!o.title&&(!o.images||!o.images.length)&&!o.photo_url&&!o.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(s.delayed=!0,!1):void 0;o.video?(r=o.video_owner_id+"_"+o.video_id,s.snippet_video=1):r=o.user_id&&o.photo_id&&!o.noPhoto?o.user_id+"_"+o.photo_id:"",o.initialPattern&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(i)==o.initialPattern&&(s.message=""),s=extend(s,{url:o.url,mode:o.mode,title:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.E)(o.title),description:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.E)(o.description),button_text:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.E)(o.button_text),button_action:o.button_action,extra:o.extra,extra_data:o.extraData,photo_url:o.video?"":Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.E)(o.photo_url),open_graph_data:(o.openGraph||{}).data,open_graph_hash:(o.openGraph||{}).hash});break;case"page":o.initialPattern&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(i)==o.initialPattern&&(s.message="");break;case"postpone":var d=+_.postponeDate;return void(s=extend(s,{postpone:d}));case"mark_as_ads":return void(s=extend(s,{mark_as_ads:1}))}this[3]&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(i)==this[3]&&(s.message=""),s["attach"+(l+1)+"_type"]=a,s["attach"+(l+1)]=r,l++}}),s},setDraft:function(_){if(!cur.options.no_draft&&(_[0]||_[1]&&_[1].length||null!=_[4])){var e=ge("post_field");if(e){var t=_[4];t||Emoji.val(e,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.c)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.E)(_[0]||"")).replace(/\n/g,"<br/>")),Wall.showEditPost(function(){setTimeout(function(){if(t&&cur.poster){Wall.hidePosterFeatureTooltip();var o={text:_[0]||""};if(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.z)(t)?o.bkgId=_[4]:isObject(t)&&(cur.poster.isCustomBkgId(t.id)&&cur.poster.addCustomBkg(t),o.bkgId=t.id),!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(Wall.getMainPostBlock()))return cur.poster.setBkg(o.bkgId,!0),cur.poster.setText(o.text),void Emoji.val(e,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.c)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.E)(_[0])).replace(/\n/g,"<br/>"));Wall.openPosterEditor(o)}if(_[1]&&cur.wallAddMedia)for(var i in _[1])cur.noDraftSave=!0,cur.wallAddMedia.chooseMedia.apply(cur.wallAddMedia,_[1][i]);Wall.checkPosterAvailability()},0)}),_[2]&&wall.focusOnEnd(),_[3]&&(wall.setReplyAsGroup(ge("official"),_[3]),_[3].shareShowImg&&(cur.shareShowImgRestored=_[3].shareShowImg)),cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia)}}},initPostEditable:function(_){var e=cur.postField;if(!e||e.emojiInited)return!1;e.emojiInited=!0,stManager.add([jsc("web/emoji.js"),"notifier.css"],function(){Emoji.init(e,{ttDiff:-42,rPointer:!0,controlsCont:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(e),noStickers:!0,onSend:Wall.sendPost,noEnterSend:!0,ref:"post",checkEditable:Wall.postChanged,initUploadForImagePasteCallback:function(_,e,t){window.Upload&&Upload.onFileApiSend(cur.wallUploadInd,[t])}}),addClass(e,"submit_post_inited"),_?setTimeout(Wall.setDraft.pbind(_),0):cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia)}),setTimeout(function(){cur.postFieldZoomText&&addEvent(e,"keydown paste",function(){setTimeout(function(){cur.postFieldZoomText(cur.postField,cur.wallAddMedia)},0)})},0)},showEditPost:function(_){var e=ge("post_field");if(cur.viewAsBox)return setTimeout(function(){e.blur()},0),cur.viewAsBox();0!==cur.editing&&(setTimeout(WallUpload.init,0),Wall.initComposer(e,{lang:{introText:getLang("profile_mention_start_typing"),noResult:getLang("profile_mention_not_found")},checkLen:Wall.postChanged,onValueChange:Wall.onPostValChange},_),Wall.hideEditPostReply(),addClass("submit_post_box","shown"),cur.editing=0,Wall.showPosterFeatureTooltip(),Wall.showPostCopyrightFeatureTooltip(),Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.v)(cur.onShowEditPost)&&cur.onShowEditPost(),cur.wallAdsReplacedFeatureTooltip&&Wall.showAdsReplacedTooltip(),stManager.add(["ui_controls.css","ui_controls.js","datepicker.css","datepicker.js"]))},postBoxFocus:function(_,e){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.i)(_||window.event);var t=Wall.isPosterEditorOpen();(cur.postField&&window.Emoji||t)&&setTimeout(function(){e?t?(cur.poster.focusPoster(),Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.g)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(cur.poster.getPosterElement())[1]-15)):(Emoji.focus(cur.postField),Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.g)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(cur.postField)[1]-15)):t?cur.poster.focusPoster():Emoji.focus(cur.postField,!0,ge("submit_post_box"))},0)},initComposer:function(_,e,t){if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"composer"))t&&t();else if(cur.composerAdded){var o=Composer.init(_,e);t&&t(),cur.destroy.push(Composer.destroy.bind(Composer).pbind(o))}else stManager.add(["wide_dd.css","wide_dd.js"],function(){cur.composerAdded=!0;var o=Composer.init(_,e);t&&t(),cur.destroy.push(Composer.destroy.bind(Composer).pbind(o))})},deinitComposer:function(_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"composer");e&&Composer.destroy(e),_.emojiId&&window.Emoji&&Emoji.destroy(_.emojiId)},hasComposerMedia:function(_){var e=_&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"composer");return!(!e||!e.addMedia)&&e.addMedia.attachCount()>0},composerListShown:function(_){var e=_&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"composer");if(!e)return!1;var t=e.wdd,o=0;for(var i in t.shown)o+=1;return!!(t&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(t.listWrap)&&o)},onPostValChange:function(_){if(cur.wallAddMedia&&cur.wallAddMedia.checkMessageURLs.apply(window,arguments),"full_own"!=cur.wallType&&"full_all"!=cur.wallType||Pagination.pageTopUpdated(),browser.msie&&!_){var e=ge("post_field");hide(e),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(e),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.E)(e)}},hideEditPost:function(_){cur.editing=!1;var e=ge("post_field"),t=cur.wallAddMedia||{},o=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)((window.Emoji?Emoji.editableVal:_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(e));!browser.opera_mobile&&e&&(!_&&(o||t.chosenMedia||t.getMedias&&t.getMedias().length>0||t.activeState||t.attachCount&&t.attachCount()>0)||(removeClass("submit_post_box","shown"),e&&!o&&cur.postMention&&(cur.postMention.options.minHeight=cur.emptyPostheight||14),cur.onWallSendCancel&&cur.onWallSendCancel(),window.WallUpload&&WallUpload.hide(),cur.wallAddMedia&&cur.wallAddMedia._hideAddMedia(!0)))},clearInput:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("page_add_media");var _=ge("post_field");if(Wall.withMentions){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"mention");e&&(e.rtaEl.innerHTML="",hide(e.cont),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(_))}Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(_,""),_.blur(),_.phonblur(),Wall.hideEditPost(!0),cur.wallAddMedia&&cur.wallAddMedia.unchooseMedia(),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)("export_status",!1),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)("close_comments",!1);var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"composer");t&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(t.articleConvertEl),t.articleConvertEl=!1)},fixPostParams:function(_){var e=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.d)(_);return e.Message=_.message,delete e.message,e},focusOnEnd:function(_){if(_=ge(_)||ge("post_field"))if("TEXTAREA"!=_.tagName){var e=_.innerHTML?_.innerHTML.length:_.length?_.length:_.childNodes.length-1;if(_.focus(),document.selection){var t=document.selection.createRange();t.moveStart("character",e),t.select()}else window.getSelection().collapse(_,_.childNodes.length)}else Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.E)(_)},isAnonPost:function(){var _=geByClass1("anon_toggle");return _&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(geByClass1("_ui_toggler",_),"on")?1:""},saveAnon:function(_){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(geByClass1("_ui_toggler",_),"on");var e=Wall.isAnonPost();Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)("friends_only",!1),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)("status_export",!e),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)("facebook_export",!e),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(ge("submit_post_box"),"anon_field_on");var t=cur.anonPostBtn||getLang("wall_send");cur.anonPostBtn=ge("send_post").innerHTML,ge("send_post").innerHTML=e?getLang("wall_send"):t},showPostSettings:function(_,e){var t=cur.wallAdsReplacedFeatureTooltip&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"addpost_opt");if(!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"ett")||t){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_);t&&Wall.hideAdsReplacedTT(),new ElementTooltip(_,{cls:"post_settings_tooltip",content:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(o),defaultSide:"top",offset:[0,-5],appendTo:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_)}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(o)}e&&checkKeyboardEvent(e)&&"click"===e.type&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"ett").toggle()},saveExport:function(_,e,t){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)("friends_only")||Wall.isAnonPost()||Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)(_),cur.saveExportTO=cur.saveExportTO||{},clearTimeout(cur.saveExportTO[e]),cur.saveExportTO[e]=setTimeout(function(){ajax.post("/al_settings.php",{act:"a_save_export",service:e,disabled:Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)(_)?0:1,hash:t})},300)},togglePostFriendsOnly:function(_,e,t){var o=!!t;if(!Wall.isAnonPost()||o){t=t||"";var i=cur["postVisibilityTT"+t];i&&i.hide(),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.r)(_,e,"post_settings_btn"+t);var l=ge("post_visibility_btn"+t),a=o?ge("wpe_status_export"):ge("status_export"),r=o?ge("wpe_facebook_export"):ge("facebook_export"),s=geByClass1("post_action_btn_text",l);if(e){var n=ge("friends_only"+t).innerHTML;s.innerHTML=n,s.setAttribute("aria-label",Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.E)(n)),addClass(l,"on"),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)(a,!1),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)(r,!1)}else{var c=ge("no_friends_only"+t).innerHTML;s.innerHTML=c,s.setAttribute("aria-label",Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.E)(c)),removeClass(l,"on")}a&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.e)(a,e),r&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.e)(r,e)}},togglePostMarkAsAds:function(_,e){e=e||"mute_notifications";var t=ge(e);if(t){var o=Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)(_);if(Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.e)(t,o),o)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"prev-state",+Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)(t)),addClass(t,"on");else{var i=+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"prev-state");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(t,"on",i)}}},needCheckSign:function(){var _=ge("check_sign");return _&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)(_)},saveCheckSign:function(_){var e=Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)(_);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"title",e?getLang("wall_check_sign_disabled"):getLang("wall_check_sign_enabled")),window.tooltips&&tooltips.hide(_,{onHide:_.onmouseover.bind(_)}),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)(_,!e)},checkAsGroup:function(_){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)(_),wall.setReplyAsGroup(_,{fromGroup:Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)(_)})},sendPost:function(_,e){var t=cur.wallAddMedia||{},o=t.chosenMedia||{},i=cur.wallAddMedia?t.getMedias():[],l=t.shareData||{},a=cur.poster&&!!e,r=a?e.text:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)((window.Emoji?Emoji.editableVal:_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(ge("post_field"))),s=!1,n=Wall.isAnonPost(),c=a?null:ge("send_post"),d=cur.options.suggesting?"suggest":cur.wallType;"top"===d&&(d="all"),a&&(i=i.filter(function(_){if(isArray(_)){var e=_slicedToArray(_,1)[0];return["copyright","postpone"].includes(e)}}));var E=a?ge("submit_post_box"):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("_submit_post_box",ge("official")),p=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(E,"from-oid")==cur.postTo?1:"";E&&cur.postTo||p||cur.defaultPostSettings&&(p=cur.defaultPostSettings.official?1:"");var O={act:"post",message:r,to_id:cur.postTo,type:d,friends_only:!n&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)("friends_only"),check_sign:Wall.needCheckSign(),status_export:!n&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)("status_export"),close_comments:ge("close_comments")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)("close_comments")?1:0:"",mute_notifications:ge("mute_notifications")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)("mute_notifications")?1:0:"",mark_as_ads:Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)("mark_as_ads")?1:0,official:p,signed:Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)("signed"),anonymous:n,hash:cur.options.post_hash,from:cur.from?cur.from:"",fixed:cur.options.fixed_post_id||""},u=0;function b(_){var e=ge("submit_post_error");if(e.innerHTML=_.length>60?'<div class="msg_text">'+_+"</div>":_,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)("submit_post_error")||(Object(_lib_fx__WEBPACK_IMPORTED_MODULE_11__.l)("submit_post_error",100),Object(_lib_fx__WEBPACK_IMPORTED_MODULE_11__.b)(ge("box_layer_wrap"),{scrollTop:0})),Wall.isPosterEditorOpen()){var t=cur.poster.getErrorWrapperElement();t.innerHTML="",t.appendChild(e)}}cur.options.additional_save_params&&(O=extend(O,cur.options.additional_save_params)),isArray(o)&&o.length&&i.push(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.d)(o)),a&&(O.poster_bkg_id=e.bkgId,O.poster_bkg_access_hash=e.accessHash,e.fallbackObj&&(i.push(["photo",e.fallbackObj.owner_id+"_"+e.fallbackObj.id,!1]),O.poster_photo_hash=e.fallbackObj.post_hash),O.poster_bkg_id!==cur.posterCtaBkgId&&(O.poster_author_bkg_check=!0)),hide("submit_post_error");var P=void 0;if(i.length){var M=0;P=!1,each(i,function(_,e){if(e){var o=this[0],a=this[1];switch(o){case"video":if(s||"suggest"==d)break;var E=Wall.getOwnerDraft(cur.oid)[1];if(!E)break;each(E,function(_,e){e[1]===a&&(e[2].upload_new&&M++)});break;case"poll":if(n)return;var p=t.pollData();if(!p)return P=!0,!1;a=p.question,delete p.question,O=extend(O,p);break;case"copyright":if(n)return;var D=t.copyrightData();if(D)return void(O=extend(O,D));break;case"share":if(l.failed||!l.url||!l.title&&(!l.images||!l.images.length)&&!l.photo_url&&!l.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(P=!0,!1):void 0;if((cur.options.share||{}).button_exclusive&&l.button_text&&l.button_action){var m=void 0;i.length>1&&(m=getLang("global_share_too_many_attachments")),r.split("\n").length-1>(cur.options.share||{}).button_exclusive_max_message_newlines&&(m=getLang("global_share_too_many_newlines")),r.length>(cur.options.share||{}).button_exclusive_max_message_len&&(m=getLang("global_share_too_long_message"));var g=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.j)(" "+r+" "),f=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.j)(" "+l.url+" ")[0];if(f&&g.length){"/"===f.query&&(f.query=""),"www."===f.domain.substr(0,4)&&(f.domain=f.domain.substr(4));for(var w=0;w<g.length;++w){var T=g[w];if("/"===T.query&&(T.query=""),"www."===T.domain.substr(0,4)&&(T.domain=T.domain.substr(4)),f.domain!=T.domain||f.query!=T.query){m=getLang("global_share_too_many_links");break}}}if(m)return b(m),P=!0,!1}if(!l.title)return b(getLang("global_share_title_required")),P=!0,!1;if(l.video?(a=l.video_owner_id+"_"+l.video_id,O.snippet_video=1):a=l.user_id&&l.photo_id&&!l.noPhoto?l.user_id+"_"+l.photo_id:"",l.share_upload_failed&&!a)return void(l.share_upload_failed=0);if(l.images&&l.images.length&&!isArray(l.images[cur.shareShowImg])&&!a&&!l.noPhoto&&!l.share_own_image&&!l.video)return Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o)(c),t.uploadShare(function(){Wall.sendPost(!0)}),P=!0,!1;if((cur.options.share||{}).require_image&&!a)return b(getLang("global_share_image_required")),P=!0,!1;l.initialPattern&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(r)==l.initialPattern&&(O.message=""),O=extend(O,{url:l.url,mode:l.mode,title:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.E)(l.title),description:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.E)(l.description),button_text:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.E)(l.button_text),button_action:l.button_action,extra:l.extra,extra_data:l.extraData,photo_url:l.noPhoto||l.video?"":Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.E)(l.photo_url),open_graph_data:(l.openGraph||{}).data,open_graph_hash:(l.openGraph||{}).hash});break;case"page":l.initialPattern&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(r)==l.initialPattern&&(O.message="");break;case"postpone":if(n)return;var h=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("postpone_date"+t.lnkId);return O=extend(O,{postpone:h}),cur.postponedLastDate=h,void(s=!0);case"mark_as_ads":return void(O=extend(O,{mark_as_ads:1}));case"pretty_cards":if(!t.prettyCardGallery)return;if(t.prettyCardGallery.needSendData())return t.prettyCardGallery.saveCards(Wall.sendPost,function(_){b(_)}),P=!0,!1;var C=t.prettyCardGallery.getSendData();a=C.attachVal;break;case"podcast":if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(this[2],"attach_disabled"))return!1}this[3]&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(r)==this[3]&&(O.message=""),n&&"photo"!==o||(O["attach"+(u+1)+"_type"]=o,O["attach"+(u+1)]=a,u++)}});var D=cur.postTo<0||cur.postTo===vk.id;if(cur.wallUploadVideoOpts&&cur.wallUploadVideoOpts.vars.is_wall_postponed_allowed&&D&&M&&!_&&!cur.postponeVideoPost)return Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.b)()&&Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.b)().hide(),void Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.b)("al_video.php?act=postponed_post_box",{videos_count:M},{onDone:function(_,e){_.removeButtons(),_.addButton(e.video_post_later_text,function(){cur.postponeVideoPost=!0,Wall.sendPost(!0),_.hide()}),_.addButton(e.video_post_now_text,function(){Wall.sendPost(!0),_.hide()},"no")}});if(P)return void(_&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w)(c))}if(!u&&!r)return _&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w)(c),void Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.E)("post_field");if(!c||_||!Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.b)(c)){cur.postponeVideoPost&&(O=extend(O,{postpone_video:!0,postpone_video_hd:Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)(ge("postponed_post_hd"))})),cur.postAutosave&&clearTimeout(cur.postAutosave),hide("submit_post_error"),cur.postSent=!0;var m=window.GroupsAdminTips&&window.GroupsAdminTips.isShownSection()?1:0;O.update_admin_tips=m,setTimeout(function(){ajax.post("al_wall.php",Wall.fixPostParams(O),{onDone:function(_,e,t){Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.z)(t)||(t=null),cur.poster&&a&&(cur.poster.unlockEditPoster(),cur.poster.closeEditor(),cur.poster.resetPoster(),cur.posterCtaBkgId&&(cur.posterCtaBkgId=null)),cur.posterFeatureTT&&cur.posterFeatureTT.hide(),Wall.clearInput(),cur.postSent=!1,cur.postponeVideoPost=!1;var o=ge("mark_as_ads"),i=ge("mute_notifications");if(Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)(o)&&i&&(removeClass(i,"on"),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.e)(i,0)),o&&removeClass(o,"on"),cur.options.onSendPostDone)cur.options.onSendPostDone.apply(window,arguments);else if(isObject(_)&&_.redirect)nav.go(_.redirect);else{if(s){if("feed"==d)Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.e)(_,{out:3e3});else if("full_own"==d||"full_all"==d)return Wall.showPostponedFull(_);return wall.updateTabVisibility("page_wall_postponed",!0),Wall.showPostponed(!1,_),void(ge("wall_tabs")&&removeClass(ge("wall_tabs"),"page_tabs_hidden"))}if(("full_own"==d||"full_all"==d)&&(cur.pgStart||nav.objLoc.postponed)){var l=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.d)(nav.objLoc);return delete l.offset,delete l.postponed,vk.id!=cur.oid&&delete l.own,nav.go(l)}if(vk.id!=cur.oid&&"full_own"==d){var r=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.d)(nav.objLoc);return delete r.own,nav.go(r)}if("feed"==d)return cur.wallPostCb();if("suggest"==d)return wall.updateTabVisibility("page_wall_suggest",!0),Wall.showSuggested(!1,_,e),Wall.suggestUpdate();"suggested"==cur.wallTab?Wall.showSuggested():ge("wall_tabs")&&(removeClass(ge("wall_tabs"),"page_tabs_hidden"),geByClass1("ui_tab",ge("wall_tabs")).click()),Wall.receive(_,e),cur.onWallSendPost&&cur.onWallSendPost(),m&&null!==t&&window.GroupsAdminTips&&window.GroupsAdminTips.refreshSection(t)}},onFail:function(_){if(cur.postSent=!1,cur.postponeVideoPost=!1,cur.poster&&a&&cur.poster.unlockEditPoster(),cur.posterFeatureTT&&cur.posterFeatureTT.hide(),!cur.options.onSendPostFail){if(!_)return!0;var e=ge("submit_post_error");if(e.innerHTML=_.length>60?'<div class="msg_text">'+_+"</div>":_,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)("submit_post_error")||Object(_lib_fx__WEBPACK_IMPORTED_MODULE_11__.l)("submit_post_error",100),Wall.isPosterEditorOpen()){var t=cur.poster.getErrorWrapperElement();t.innerHTML="",t.appendChild(e)}return!0}cur.options.onSendPostFail.apply(window,arguments)},showProgress:function(){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o)(c)},hideProgress:function(){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w)(c)},noSort:!0})},0)}},_repliesLoaded:function(_,e,t,o,i){var l=ge("replies"+_);if(l){var a=l.nextSibling;if(e){var r=l.offsetHeight;l.innerHTML=t,Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.g)(Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.e)()+(l.offsetHeight-r),0,void 0,!0),setTimeout(Wall.scrollHighlightReply.pbind("post"+e),0)}else l.innerHTML=t;if(a&&"replies_open"==a.className&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(a),ajax._framenext(),_==cur.wallLayer){var s=wkcur.reverse;extend(wkcur,{offset:!s&&i.offset||0,loaded:i.num||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("reply",l,"div").length,count:i.count}),wall.addReplyNames(o),WkView.wallUpdateReplies(),s||(wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll())}else wall.addReplyNames(o),Wall.repliesSideSetup(_);Wall.updateMentionsIndex(),setTimeout(function(){Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_1__.j)().updateCurrentPlaying()},10),i&&Likes.updateComments("wall"+_,i.count)}},repliesSideSetup:function(_){if(cur.wallLayer!=_){var e=ge("replies"+_);if(e){var t=geByClass1("wr_header",e,"a"),o=ge("post"+_),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(o,"deep_active"),l=ge("replies_side"+_);if(cur.wallMyOpened[_]&&(t||i)){if(!l){var a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)('<div class="replies_side_wrap"><div id="replies_side'+_+'" class="replies_side"></div></div>');e.parentNode.insertBefore(a,e),(l=a.firstChild).onmouseover=Wall.repliesSideOver.pbind(_),l.onmouseout=Wall.repliesSideOut.pbind(_),l.onclick=i?Wall.hideDeepReplies.pbind(_):Wall.repliesSideClick.pbind(_)}e.onmouseover=Wall.repliesSideOver.pbind(_),e.onmouseout=Wall.repliesSideOut.pbind(_),Wall.repliesSideOver(_)}else hide(l),e.onmouseover=null,e.onmouseout=null}}else WkView.wallUpdateReplies()},repliesSideClick:function(_){var e=ge("replies"+_),t=Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.e)(),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(e)[1];return t>o&&Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.g)(o-100,0),hide("replies_side"+_),Wall.showReplies(_,3,!1)},repliesSideOver:function(_){var e=ge("replies"+_),t=ge("replies_side"+_);if(e){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(t))[1],i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(t)[1],l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(e)[1],a=e.offsetHeight,r=window.lastWindowHeight||0,s=o+i-r+15,n=l+a-r;cur.wallRepliesSideOver=[_,t,s,n],Wall.repliesSideUpdate()}},repliesSideOut:function(_){cur.wallRepliesSideOver&&cur.wallRepliesSideOver[0]==_&&delete cur.wallRepliesSideOver},repliesSideUpdate:function(_){var e=cur.wallRepliesSideOver;if(e){var t=e[1],o=e[4]||{},i=e[5]||"",l="replies_side",a=void 0;void 0===_&&(_=Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.e)()),_<e[2]?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(t),a={marginTop:0,opacity:1}):_<e[3]?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(t),l+=" replies_side_fixed",a={opacity:Math.max(0,Math.min(1,(e[3]-_)/200))}):(l+=" replies_side_hidden",a={marginTop:e[3]-e[2],opacity:0,display:null}),JSON.stringify(o)!==JSON.stringify(a)&&(each(o,function(_,e){o[_]=null}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.qb)(t,extend(o,a)),e[4]=a),i!=l&&(t&&(t.className=l),e[5]=l)}},highlightReply:function(_){(_=ge(_))&&(addClass(_,"reply_highlighted"),setTimeout(function(){removeClass(_,"reply_highlighted")},1500))},scrollHighlightReply:function(_){if(_=ge(_))if(cur.wallLayer||_.id.match(/^post-?\d+(photo|video|market)?_\d+$/)&&(window.wkcur&&wkcur.shown||window.mvcur&&mvcur.mvShown||cur.pvShown)){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(_,!0)[1];e<0||e>lastWindowHeight-200?Object(_lib_fx__WEBPACK_IMPORTED_MODULE_11__.b)(wkLayerWrap,{scrollTop:wkLayerWrap.scrollTop+e-50},300,Wall.highlightReply.pbind(_)):Wall.highlightReply(_)}else{var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(_)[1];t<Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.e)()+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)("page_header")[1]?(Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.g)(t,300),setTimeout(Wall.highlightReply.pbind(_),300)):Wall.highlightReply(_)}},showReply:function(_,e,t,o){if(cur.viewAsBox)return!1;if(o&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.d)(o))return!0;if(window.mvcur&&mvcur.post==e)return Videoview.showComment(t),!1;var i=ge("post"+t);if(i)Wall.scrollHighlightReply(i);else if(cur.wallLayer==e)WkView.wallShowPreviousReplies(t);else if(e.match(/market/))Market.comments(e);else{if(_.tt&&_.tt.hide&&_.tt.hide(),"full"==cur.wallType){var l=t.split("_");return delete nav.objLoc.offset,nav.go(extend(nav.objLoc,{reply:l[1]}))}Wall.showReplies(e,!1,t)}return!1},showReplies:function(_,e,t,o){if(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.d)(o||window.event))return!0;if(cur.viewAsBox)return cur.viewAsBox();if(cur.wallLayer!=_||!wkcur.reverse){cur.wallMyOpened[_]=3!=e;var i={act:"get_replies",post:_,count:e},l={onDone:Wall._repliesLoaded.pbind(_,t),showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o.pbind("wrh"+_),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w.pbind("wrh"+_),local:1};if(t||e&&!(e>20)||(extend(i,{cont:"replies"+_}),extend(l,{frame:1}),cur.onFrameBlocksDone=function(){setTimeout(Wall.repliesSideSetup.pbind(_),browser.msie?100:10)}),ajax.post("al_wall.php",i,l),!browser.msie&&e>0&&e<10){for(var a=ge("replies"+_),r=a&&a.lastChild,s=[];s.length<e&&r;)"DIV"==r.tagName&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(r,"reply")&&s.push(r),r=r.previousSibling;if(s.length==e){var n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("reply",a,"div").length;for(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(a,'<a class="wr_header wrh_all"></a>'),Wall.updateRepliesHeader(_,a.firstChild,e,n),hide("replies_side"+_);s.length;)a.appendChild(s.pop());Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o)("wrh"+_)}}return!1}},moreReplies:function(_,e,t,o){var i=void 0;if(o.deep){var l=_.split("_");i={act:"get_post_replies",offset:e,owner_id:l[0],item_id:l[1],count:t},o.order&&(i.order=o.order)}else i={act:"get_replies",offset:e,post:_,count:t};return extend(i,{rev:o.rev,from:o.from}),ajax.post("al_wall.php",i,{onDone:function(e,t,i){var l=ge("replies"+_);o.clear?l.innerHTML=e:o.rev||o.append?l.appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.f)(e)):l.innerHTML=e+l.innerHTML,wall.addReplyNames(t),o.onDone&&o.onDone(e,t,i),Wall.updateMentionsIndex()},showProgress:o.showProgress,hideProgress:o.hideProgress}),!1},openDeepShortReplies:function(_,e){var t=geByClass1("replies_next",Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_));return t&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(t),t.focus(),t.click(),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(_)),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(e)},showNextReplies:function(_,e,t){var o=e.split("_"),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"offset"),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"count"),a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"collapse"),r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"replies_prev"),s=cur.wallLayer?ge("wl_post"):ge("post"+e),n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)("post"+e,"reply"),c={act:"get_post_replies",owner_id:o[0],item_id:o[1],offset:i,count:l,collapse:a},d=r?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.A)(_);if(d&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(d,"reply")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(d,"replies_wrap_deep"))){var E=(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(d,"post-id")||"").split("_")[1];r?c.next_id=E:c.prev_id=E}if(n)cur.wallLayer||(s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",s));else{var p=ge("replies"+e),O=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(p,"top-ids");O&&(c.top_replies=O)}var u=s.offsetHeight,b=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(s,"post-id");c.order=wall.getRepliesOrder(b);var P=n&&wall.isDescRepliesOrder(b,c.order);P&&(r=!r);var M=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("span",{className:"progress_inline replies_next_loader"});return ajax.post("al_wall.php",c,{onDone:function(t,o,l){var n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.m)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{innerHTML:t})),c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.f)(),d=!1;n.forEach(function(_){if(!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"wr_header")){var e=ge(_.id);e&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(e,"reply")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(e,"replies_wrap_deep"))||(c.appendChild(_),d=!0)}});var E=r&&!P||!r&&P,p=!1,O=void 0,M=void 0;if(E){if(!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(ge("replies_wrap_deep"+e),"replies_deep_has_short")){var D=window.innerHeight||document.documentElement.clientHeight,m=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)("page_header")[1],g=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_),f=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(g)[1];O=cur.wallLayer?wkLayerWrap.scrollTop:Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.e)(),p=cur.wallLayer?f<D:f<O+D-m}M=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(c),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(c,_)}else M=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.x)(c),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.v)(c,_);var w=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(l.num),T=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(l.offset),h=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(l.count),C=Math.max(0,T+(r?-w:w)),L=h-C,W=0;if(d&&(r&&T>0||!r&&L>0)&&(W=r?i-C:Math.min(L,w),l.closest_inx>=0&&(W=Math.min(W,l.closest_inx))),document.activeElement===_?addEvent(_,"focusout",function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(_)}):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(_),W){var v=_.cloneNode(!0);removeClass(v,"replies_next_pre_deleted"),a||(E?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(v,M),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(v,getLang("wall_prev_n_replies",W))):(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.v)(v,M),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(v,getLang("wall_next_n_replies",W))),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(v,"count",W),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(v,"offset",C))}removeClass(ge("replies_wrap_deep"+e),"replies_deep_has_short");var A=s.offsetHeight-u;if(p&&A){var R=O+A;cur.wallLayer?wkLayerWrap.scrollTop=R:Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.g)(R,0,!1,!0)}wall.updateMentionsIndex(),wall.addReplyNames(o),wall.addDeepRepliesBlock(e),cur.wallMyOpened=cur.wallMyOpened||{},cur.wallMyOpened[b]=1,wall.repliesSideSetup(b)},onFail:function(){removeClass(_,"replies_next_pre_deleted")},showProgress:function(){addClass(_,"replies_next_pre_deleted"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.v)(M,_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(M)},hideProgress:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(M)}}),t&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(!1)},emojiOpts:{},emojiShowTT:function(_,e,t){return void 0!==Wall.emojiOpts[_]&&Emoji.ttShow(Wall.emojiOpts[_],e,t)},emojiHideTT:function(_,e,t){return void 0!==Wall.emojiOpts[_]&&Emoji.ttHide(Wall.emojiOpts[_],e,t)},initReplyEditable:function(_,e,t,o,i){if(_.emojiInited)return!1;var l=ge("reply_button"+t),a=ge("reply_media_preview"+t);_.emojiInited=!0,stManager.add([jsc("web/emoji.js"),"notifier.css"],function(){var r=Emoji.init(_,{ttDiff:o?-40:-42,rPointer:!0,controlsCont:e,shouldFocus:!i,ref:"reply",onSend:function(){Wall.sendReply(t),_.blur()},ctrlSend:function(){return Wall.customCur().wallTpl.reply_multiline||Wall.composerListShown(_)},checkEditable:function(){cur.onReplyChanged&&cur.onReplyChanged(_,t),Wall.checkTextLen(_,"reply_warn"+t)},onChange:function(){l&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(l,"reply_send_disabled",!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(Emoji.editableVal(_))&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(a,"media_preview_has_medias"))},onStickerSend:function(_,e){Wall.sendReply(t,!1,{stickerId:_,sticker_referrer:e})},initUploadForImagePasteCallback:Page.initUploadForImagePaste});if(vk.widget&&!window.emojiStickers&&Emoji.updateTabs(),Wall.emojiOpts[t]=r,cur.afterEmojiInit&&cur.afterEmojiInit[t]){var s=geByClass1("emoji_smile",Emoji.opts[r].controlsCont);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(s)&&(cur.afterEmojiInit[t](),delete cur.afterEmojiInit[t])}})},initEditReply:function(_,e,t,o){var i=_,l=ge("reply_field"+_),a=ge("post"+_),r=ge("reply_fakebox"+_),s=ge("reply_box"+_),n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(a,"reply"),c=cur.wallLayer?wkcur:cur,d=!1,E=void 0;if(n){if(E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",a)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",a),d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(E,"deep_active")){if(!cur.reply_to){var p=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(a,"answering-id");if(p){var O=_.split("_")[1];cur.reply_to=[Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(p),Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(O)],Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("reply_to"+_,O)}}wall.addDeepRepliesBlock(_),r=ge("reply_fakebox"+_)}i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(E,"post-id")}else cur.wallLayer?(d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(ge("wl_post"),"deep_active"),E=ge("wl_reply_form_inner")):(E=a,d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(E,"deep_active"));if(!E&&r?E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_post_wrap",r):!E&&s&&(E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_post_wrap",s)),r){var u=ge("post_hash"+i),b=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(u&&u.getAttribute("can_reply_as_group"))>0,P=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(r,"owner-photo")||"",M=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(r,"owner-href")||"",D=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(r,"owner-name")||"",m=b?c.wallTpl.reply_form_official_placeholder:i.match(/^(-?\d+)_(\d+)$/)?c.wallTpl.reply_form_official:"";s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(d&&c.wallTpl.reply_form_new?c.wallTpl.reply_form_new:c.wallTpl.reply_form,{add_buttons:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(m,{post_id:_,oid:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(_),owner_photo:P||"/images/blank.gif"}),post_id:_,oid:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(_),owner_photo:P,owner_href:M,owner_name:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.c)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.I)(D))})),r.parentNode.replaceChild(s,r),l=ge("reply_field"+_)}if(Wall.initReplyEditable(l,s,_,e,t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(l,"composer"))o&&o();else{var g=[],f=!1,w=void 0,T=void 0,h=void 0;window.mvcur&&mvcur.mvShown?w=mvcur.mvMediaTypes:cur.wallLayer==i?w=wkcur.options.rmedia_types:window.pvcur&&cur.pvShown?(w=pvcur.rmedia_types,T=0,h=0):w=c.options&&c.options.rmedia_types,d&&(f=!0,T=0,h=0),each(w||c.options&&c.options.media_types||[],function(){inArray(this[0],["photo","video","audio","doc","link","page"])&&g.push(this)});var C=void 0,L=!1,W=i.match(/^(\d+_)?-?\d+_(photo|video|topic|market)?\d+(mv)?(_\d+)?$/);g.length>0&&W?(C={lnk:d?ge("reply_more_attaches"+_):ge("reply_add_media_"+_),preview:ge("reply_media_preview"+_),types:g,options:{from:"topic"===W[2]?"board":"comment",limit:2,disabledTypes:["album","market","poll"],toggleLnk:!0,maxShown:void 0!==T?T:void 0,hideAfterCount:void 0!==h?h:void 0,vectorIcon:f,hideLabel:getLang("wall_reply_add_attach_label"),toId:"full"===cur.wallType?cur.oid:cur.postTo,onToggleBlock:function(e){var t=ge("reply_box"+_),o=geByClass1("reply_box_photo",t);o&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ub)(o,e)},onMediaChanged:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)("reply_button"+_,"reply_send_disabled",!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(Emoji.editableVal(l))&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)("reply_media_preview"+_,"media_preview_has_medias"))}}},i.match(/^-?\d+_topic/)&&(extend(C.options,{disabledTypes:["album","share","link","page"],limit:10,editable:1,sortable:1,teWidth:280,teHeight:200}),L=!0)):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("reply_add_media_"+_),Wall.initComposer(l,{lang:{introText:getLang("profile_mention_start_typing"),noResult:getLang("profile_mention_not_found")},toup:L,wddClass:"reply_composer_dd",width:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(l.parentNode)[0],media:C,isReply:!0},o)}return void 0!==l.emojiId&&cur.afterEmojiInit&&cur.afterEmojiInit[_]&&(cur.afterEmojiInit[_](),delete cur.afterEmojiInit[_]),{postId:i,postEl:E,isReply:n,rf:l}},showEditReply:function(_,e,t,o,i,l){if(cur.viewAsBox)return setTimeout(function(){ge("reply_field"+_).blur()},0),cur.viewAsBox();var a=wall.initEditReply(_,t,i,l);return cur.wallMyOpened&&(cur.wallMyOpened[_]=cur.wallMyOpened[_]||!1),cur.editing===_?(Emoji.editableFocus(a.rf,!1,!0),!1):(Wall.hideEditPostReply(),a.isReply?addClass(ge("replies_wrap_deep"+_),"deep_reply_box_open"):addClass(a.postEl,"reply_box_open"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.qb)("replies_wrap"+_,{display:""}),cur.editing=_,window.Emoji&&setTimeout(function(){Emoji.editableFocus(a.rf,!1,!0),Wall.repliesSideOver(_)},0),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.j)(window,"scroll"),void 0!==a.rf.emojiId&&cur.afterEmojiInit&&cur.afterEmojiInit[_]&&(cur.afterEmojiInit[_](),delete cur.afterEmojiInit[_]),cur.wallTpl&&cur.wallTpl.reply_multiline_intro&&ajax.post("al_wall.php",{act:"a_ctrl_submit_intro",hash:cur.wallTpl.poll_hash},{onDone:function(e){e&&cur.editing===a.postId&&Wall.replySubmitTooltip(_,1)},onFail:function(){return!0}}),window.mvcur&&mvcur.post==a.postId&&Videoview.onShowEditReply(),Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.v)(cur.onReplyFormSizeUpdate)&&cur.onReplyFormSizeUpdate(a.rf),Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.v)(cur.onReplyFormFocus)&&cur.onReplyFormFocus(a.rf),!1)},hideEditReply:function(_,e){cur.editing=!1;var t=ge("reply_field"+_),o=ge("post"+_),i=ge("reply_box"+_),l=cur.reply_to&&Wall.getReplyName(cur.reply_to[0]),a=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(window.Emoji?Emoji.editableVal(t):""),r=Wall.hasComposerMedia(t),s=void 0,n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(o,"reply");if(!(s=cur.wallLayer?ge("wl_reply_form_inner"):n?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",o):o)&&i&&(s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_post_wrap",i)),t&&(!r||e)){if(l&&isArray(l)&&l[1]&&(a&&l[1].indexOf(a)||(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(t,""),a="")),e&&(a||r)){var c=t&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(t,"composer");c?Composer.reset(c):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(t,""),a="",hide(geByClass1("reply_warn",s))}if(!(browser.opera_mobile||browser.safari_mobile||a)){Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.b)()&&Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.b)().isVisible()||(n?removeClass(ge("replies_wrap_deep"+_),"deep_reply_box_open"):removeClass(s,"reply_box_open")),ge("reply_link"+_)&&hide("replies_wrap"+_),window.tooltips&&i&&tooltips.hideAll(i),t.blur(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.j)(window,"scroll"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("reply_to"+_,""),hide("reply_to_title"+_),cur.reply_to=!1;var d=Wall.emojiOpts[_];d>=0&&Emoji.opts[d]&&Emoji.opts[d].onChange&&Emoji.opts[d].onChange(),cur.onReplyFormSizeUpdate&&cur.onReplyFormSizeUpdate();var E=cur.replySubmitSettings;E&&E.tt&&E.tt.el&&E.tt.destroy(),window.mvcur&&mvcur.post==_&&Videoview.onHideEditReply()}}},replyNamesRE:function(){wall.addReplyNames({});var _=wall.getReplyNames();if(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.u)(_))return!1;var e=[];return each(_,function(_,t){t&&(isArray(t)&&(t=t[1]),"string"==typeof t&&e.push(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.h)(t)))}),new RegExp("^("+e.join("|")+")")},replyTo:function(_,e,t,o){var i=window.cur.wallLayer==_?wkcur:window.cur;Wall.showEditReply(_,o),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("reply_to"+_,e);var l=i.reply_to&&Wall.getReplyName(i.reply_to[0]);i.reply_to=[t,e];var a=Wall.getReplyName(t),r=ge("reply_as_group"+_),s=_.match(/^(-?\d+)_([a-z]+)?(\d+)([a-z]+)?$/),n=s[1],c=s[2]||"",d=s[4]||"",E=ge("post"+n+c+"_"+e),p=E&&geByClass1("reply_to",E,"a"),O=Wall.replyNamesRE(),u=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",E)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",E),b=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(u,"deep_active"),P=b?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("replies_wrap_deep",E):null,M=P?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(P,"post-id"):_,D="";if(!b||P){var m=(isArray(a)?a[0]:a)||"";m='<a class="reply_to_mem" onclick="return wall.showReply(this, \''+M+"', '"+n+c+"_"+e+d+"', event);\">"+m+"</a>";var g='<span class="reply_to_cancel" onclick="return Wall.cancelReplyTo(\''+M+"', event);\"></span>",f='<div class="reply_to_label">'+langStr(getLang("global_reply_to"),"user",m)+"</div>";D=b?f+g:g+f}if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("reply_to_title"+M,D),isArray(a)&&a[1]&&window.Emoji){var w=ge("reply_field"+M),T=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.c)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(Emoji.val(w)));!(T=T.replace(/&nbsp;/g," "))||l&&isArray(l)&&!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.M)(l[1]).indexOf(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.M)(T))?Emoji.val(w,a[1]):O&&(T=T.replace(O,a[1]),Emoji.val(w,T));var h=Wall.emojiOpts[_];h>=0&&Emoji.opts[h]&&Emoji.opts[h].onChange&&Emoji.opts[h].onChange(),Emoji.focus(w,!0)}if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ub)("reply_to_title"+M,D),r){var C=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(r.parentNode)&&n<0&&p&&p.getAttribute("rid")===n;Wall.setReplyAsGroup(r,{from:C?n:vk.id})}return i.onReplyFormSizeUpdate&&i.onReplyFormSizeUpdate(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.i)(o),!1},cancelReplyTo:function(_,e){var t=window.cur.wallLayer==_?wkcur:window.cur,o=ge("reply_field"+_),i=t.reply_to&&Wall.getReplyName(t.reply_to[0]),l=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.c)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(window.Emoji?Emoji.editableVal(o):"")),a=Wall.replyNamesRE(),r=ge("post"+_),s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",r)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",r),n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(s,"deep_active");if(isArray(i)&&i[1]&&window.Emoji){l&&i[1].indexOf(l)?a&&(l=l.replace(a,""),Emoji.val(o,l)):(l="",Emoji.val(o,l));var c=Wall.emojiOpts[_];c>=0&&Emoji.opts[c]&&Emoji.opts[c].onChange&&Emoji.opts[c].onChange(),Emoji.focus(o,!0)}if(hide("reply_to_title"+_),n){var d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(r,"answering-id");if(d){var E=_.split("_")[1];t.reply_to=[Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(d),Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(E)],Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("reply_to"+_,E)}else t.reply_to=!1,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("reply_to"+_,"")}else window.mvcur&&mvcur.post==_?mvcur.mvReplyTo=!1:t.reply_to=!1,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("reply_to"+_,"");return t.onReplyFormSizeUpdate&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.v)(t.onReplyFormSizeUpdate)&&t.onReplyFormSizeUpdate(o),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.i)(e),!1},replySubmitTooltip:function(_,e,t){var o=_&&window.cur.wallLayer==_?wkcur:window.cur,i=_&&(ge("reply_box"+_)||ge("reply_fakebox"+_)),l=i&&geByClass1("button_blue",i,"div"),a=o.replySubmitSettings;if(!(t&&l&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(l)))if(t=t||l,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"flat_button")&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.b)(t)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"button_disabled"))!e&&a&&a.tt&&a.tt.hide&&a.tt.hide();else if(a||(a=o.replySubmitSettings=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{className:"reply_submit_hint_tt_point"})),e){if(t)if(a.parentNode==t&&a.tt&&a.tt.show)a.tt.show();else{a.tt&&a.tt.el&&a.tt.destroy(),t.insertBefore(a,t.firstChild);var r=Wall.customCur().wallTpl.reply_multiline?1:0,s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(Wall.customCur().wallTpl.reply_multiline_hint,{enabled:r?"on":"",disabled:r?"":"on"}),n=i&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",i)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",i)),c=n&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(n,"deep_active");Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_3__.c)(a,{text:s,typeClass:"tt_default_right",slide:15,shift:c?[15,8]:[0,8],asrtl:1,hasover:1,toup:!1,showdt:700,hidedt:700,dir:"auto",noZIndex:!0,onCreate:function(){radioBtns.reply_submit={els:Array.prototype.slice.apply(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("radiobtn",ge("reply_submit_hint_opts"))),val:s?1:0}}})}}else a&&a.tt&&a.tt.hide&&a.tt.hide()},onReplySubmitChanged:function(_,e){if(cur.wallTpl.reply_multiline=_,Wall.customCur().wallTpl&&(Wall.customCur().wallTpl.reply_multiline=_),e){var t=cur.replySubmitSettings;t&&t.tt&&t.tt.el&&t.tt.destroy()}else ajax.post("al_wall.php",{act:"a_save_ctrl_submit",value:_,hash:Wall.customCur().wallTpl.poll_hash}),window.Notifier&&Notifier.lcSend("wall_reply_multiline",{value:_})},getReplyFromId:function(_){var e=ge("reply_as_group"+_);return!(!e||!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(e.parentNode))&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("_submit_post_box",e),"from-oid")},sendReply:function(_,e,t){t=extend({},t);var o=ge("replies_wrap_deep"+_),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("reply_to"+_),l=void 0;if(o?(l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",o)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",o),"post-id"),i=i||_.split("_")[1]):l=_,window.mvcur&&mvcur.post==l)return Videoview.sendComment(l,e,t);var a=window.cur.wallLayer==l,r=a?ge("wl_post"):ge("post"+l),s=ge("replies"+_),n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(r,"deep_active"),c=a?wkcur:window.cur,d=ge("reply_field"+_),E=d&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(d,"composer"),p=c.reply_to&&Wall.getReplyName(c.reply_to[0]),O=void 0,u=void 0,b=d&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(d,"send");if(b&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.v)(b))return b(_,e,t);if(t.stickerId)u={message:"",attach1_type:"sticker",attach1:t.stickerId,sticker_referrer:t.sticker_referrer};else if(t.suggest)u={message:t.suggest};else{if((u=E?Composer.getSendParams(E,Wall.sendReply.pbind(_)):{message:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(Emoji.editableVal(d))}).delayed)return;if(!u.attach1_type&&(!u.message||isArray(p)&&p[1]&&!p[1].indexOf(u.message)))return void Emoji.editableFocus(ge("reply_field"+_),!1,!0);E?O=Composer.reset(E):window.Emoji&&Emoji.val(d,""),d.autosize&&d.autosize.update()}c.wallMyOpened=c.wallMyOpened||{},c.wallMyReplied[l]=1,c.wallMyOpened[l]=1;var P=ge("post_hash"+l)?ge("post_hash"+l).value:c.options.post_hash,M=null,D=n&&(o||!a&&"full"!==c.wallType),m=wall.getRepliesOrder(l),g=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(s,"top-ids"),f=!1;if(D&&s){var w=!o&&wall.isDescRepliesOrder(l,m)?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(s):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.x)(s);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(w,"replies_next")&&(D=!1,f=!0)}extend(u,{act:"post",type:c.wallType,reply_to:l,reply_to_msg:i,reply_to_user:c.reply_to&&c.reply_to[0]||0,start_id:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("start_reply"+l),from:a?"wkview":"",hash:P,only_new:D?1:0,need_last:f?1:0,order:m,top_replies:g||null}),c.reverse&&(u.rev=1);var T=wall.getReplyFromId(_);T&&(u.from_oid=T);var h=void 0;if(h=c.wallType?"feed"==c.wallType?"news"==c.section?"feed_"+(c.subsection?c.subsection:c.section):"recommended"==c.section?"feed_recommended"+("recent"!=c.subsection?"_"+c.subsection:""):-1!==["friends","groups","videos","photos","list"].indexOf(c.section)?"feed_"+c.section+(c.subsection?"_"+c.subsection:""):"feed_"+c.section:"top"==c.wallType?"wall_top":"wall_"+(c.onepost?"one":(c.wallType||"").indexOf("full_")?"page":"full"):c.module,extend(u,{ref:h}),browser.mobile?Wall.hideEditReply(_):(Emoji.editableFocus(d,!1,!0),Wall.cancelReplyTo(_,e)),hide("reply_warn"+_),ajax.post("al_wall.php",Wall.fixPostParams(u),{onDone:function(e,t,o,i){if(n){if(D)return wall.onOnlyNewReplySent.apply(window,arguments);if(f)return wall.onLastChunkReplySent.apply(window,arguments);if(a)return wall.onNewReplySentLayer.apply(window,arguments)}if("full"===c.wallType)return n?FullWall.onNewReplySent.apply(window,arguments):FullWall.onReplySent.apply(window,arguments);c.wallMyReplied[l]=0,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("reply_link"+l),hide("reply_warn"+l),Wall._repliesLoaded(_,!1,t,o,i),Wall.processPostReplyActions(e)},onFail:function(_){if(M&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(M),E?O=Composer.restore(E,O):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(d,u.message),d.autosize&&d.autosize.update(),_)return Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.d)(getLang("global_error"),_),!0},showProgress:function(){n?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.f)(ge("reply_button"+_),!0):Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o)(ge("reply_button"+_))},hideProgress:function(){n?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.f)(ge("reply_button"+_),!1):Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w)(ge("reply_button"+_))}}),window.cur.onPostReply&&window.cur.onPostReply(_),!u.from_oid&&u.message&&!D){var C=-++c.wallMyRepliesCnt,L=Emoji.emojiToHTML(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.c)(u.message),!0),W=wall.getReplyNames(),v=u.reply_to_user<0?getLang("wall_replied_to_group"):W[u.reply_to_user]&&W[u.reply_to_user][0],A=v?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(c.wallTpl.reply_link_to,{to_user:v}):"";if(M=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(c.wallTpl.reply_fast,{reply_id:"0_"+C,message:L.replace(/\n/g,"<br/>"),to_link:A,date:Wall.getNowRelTime(c)})),s&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(s)||ge("reply_link"+_))Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("reply_link"+_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("replies_wrap"+_);else if(!c.onepost){var R=s.nextSibling;if(R&&"replies_open"==R.className&&Wall.openNewComments(_),!a){var j=geByClass1("wr_header",s,"a"),B=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("reply",s,"div").length+1,I=B;j&&(I=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(j.getAttribute("offs").split("/")[1])+1),(I>5||B<I)&&(j||s.insertBefore(j=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("a",{className:"wr_header"}),s.firstChild),Wall.updateRepliesHeader(_,j,B,I))}}c.reverse?s.insertBefore(M,s.firstChild):s.appendChild(M),a&&(WkView.wallUpdateReplies(),c.reverse||(wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll()))}},onOnlyNewReplySent:function(_,e,t){var o=ge("post"+_),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(o,"reply"),l=i?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",o)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",o):o,a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(l,"post-id"),r=!i&&wall.isDescRepliesOrder(a);if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(l,"deep_active")){var s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("replies_wrap_deep",o);i&&s&&(_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(s,"post-id"));var n=cur.wallLayer===a,c=Wall._getRepliesInfoBeforeAddNewReply(_,n),d=Wall._checkVisibilityBeforeAddNewReply(_,c,r,n);i&&wall.addDeepRepliesBlock(_);var E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(e);r&&c.repliesListEl.firstChild?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(E,c.repliesListEl.firstChild):c.repliesListEl.appendChild(E),Wall._fixScrollAfterAddNewReply(_,c,d,r,n),Object(_lib_legacy__WEBPACK_IMPORTED_MODULE_15__.k)(E),wall.incReplyCounter(l),wall.addReplyNames(t)}},onLastChunkReplySent:function(_,e,t,o,i,l){var a=ge("post"+i),r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(a,"reply"),s=r?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",a)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",a):a,n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(s,"post-id"),c=!r&&wall.isDescRepliesOrder(n);if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(s,"deep_active")){var d=cur.wallLayer===n,E=Wall._getRepliesInfoBeforeAddNewReply(i,d),p=Wall._checkVisibilityBeforeAddNewReply(i,E,c,d);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(E.repliesListEl,e),Wall._fixScrollAfterAddNewReply(i,E,p,c,d);var O=ge("post"+l);Object(_lib_legacy__WEBPACK_IMPORTED_MODULE_15__.k)(O),wall.incReplyCounter(s,1,_),wall.addReplyNames(o)}},_getRepliesInfoBeforeAddNewReply:function(_,e){var t=e?wkLayerWrap.scrollTop:Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.e)(),o=window.innerHeight||document.documentElement.clientHeight,i=t+(e?0:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)("page_header_cont")[1]),l=t+o,a=ge("replies"+_),r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(a,e)[1],s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(a)[1];return{repliesListEl:a,scrollY:t,topY:i,bottomY:l,viewportHeight:o,repliesListY:r,repliesListH:s,repliesListEndY:r+s,layerFieldH:e?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)("wl_reply_form")[1]:0}},_checkVisibilityBeforeAddNewReply:function(_,e,t,o){return t?o?e.repliesListY>0&&e.repliesListY<e.viewportHeight-e.layerFieldH:e.topY<e.repliesListY&&e.bottomY>e.repliesListY:o?e.repliesListEndY>0&&e.repliesListEndY<e.viewportHeight-e.layerFieldH:e.topY<e.repliesListEndY&&e.bottomY>e.repliesListEndY},_fixScrollAfterAddNewReply:function(_,e,t,o,i){var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(e.repliesListEl)[1];if(o)t||Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.g)(e.repliesListY-100,300,!1,!0);else if(t){var a=e.scrollY+l-e.repliesListH;i?wkLayerWrap.scrollTop=a:Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.g)(a,0,!1,!0)}else{var r=e.repliesListY+l-300;i?Object(_lib_fx__WEBPACK_IMPORTED_MODULE_11__.b)(wkLayerWrap,{scrollTop:e.scrollY+r},300):Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.g)(r,300,!1,!0)}},incReplyCounter:function(_,e,t){e=e||1;var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"post-id"),i=geByClass1("comment",_),l=void 0;i&&(t||(l=+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(i,"count"),t=Math.max(0,l+e)),Likes.update("wall"+o,{comment_num:t}))},onNewReplySentLayer:function(_,e,t,o){var i=ge("wl_post"),l=geByClass1("wl_replies",i);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(l,e);var a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.m)(l).filter(function(_){return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"reply")}).length;extend(wkcur,{offset:t,loaded:a,count:_}),wall.addReplyNames(o),WkView.wallUpdateReplies();var r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(i,"post-id");wall.isDescRepliesOrder(r)?wkLayerWrap.scrollTop=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(i)[1]-Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)("wl_replies_wrap")[1]-30:wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll()},postTooltip:function(_,e,t,o){if(!cur.viewAsBox){var i=(t||{}).reply,l=(t||{}).className||"",a=i&&!(i%2)&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(_)[0]>420;o=o||{},i||(o.appendEl=bodyNode),Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_3__.c)(_,extend({url:"al_wall.php",params:extend({act:"post_tt",post:e},t||{}),slide:15,shift:[a?417:27,6,6],ajaxdt:100,showdt:400,hidedt:200,dir:"auto",className:"rich wall_tt"+l,typeClass:a?"tt_default_right":"tt_default"},o))}},adsMarkTooltip:function(_){cur.viewAsBox||Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_3__.c)(_,{black:1,shift:[15,7,0],text:_.getAttribute("data-tooltip")})},hideEditPostReply:function(_,e){if(!1!==cur.editing&&(cur.wallLayer&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)("wl_post","deep_active")&&(e=!0),e||!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(boxLayerBG)&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(layerBG))){var t=_&&_.target?_.target:{},o=t.id;cur.editing?cur.editingHide?cur.editingHide(cur.editing,t):_&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("_reply_wrap",t)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"reply_link")||o=="reply_field"+cur.editing||"reply_to_link"==t.className)||Wall.hideEditReply(cur.editing):(cur.wallAddMedia||{}).chosenMedia||_&&"post_field"==o||Wall.hideEditPost()}},postShowDeletedMessage:function(_,e){var t=ge("post"+_);if(t){var o=geByClass1("_post_content",t)||geByClass1("feedback_row_t",t);Object(_lib_video__WEBPACK_IMPORTED_MODULE_12__.h)(o),hide(o),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(o),"post_publish")&&hide(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(o));var i="post_del"+_,l=ge(i),a='<span class="dld_inner">'+e+"</span>";return l?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(l,a),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(l)):t.appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{id:i,className:"dld",innerHTML:a})),!0}return!1},postHideDeletedMessage:function(_){var e=ge("post"+_);if(e){var t=geByClass1("_post_content",e)||geByClass1("feedback_row_t",e);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(t),"post_publish")&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(t));var o=ge("post_del"+_);return hide(o),!0}return!1},isArchiveWall:function(){return cur.pgParams&&cur.pgParams.archive||"wall_archive"===cur.module},rollbackPostsArchiveState:function(_,e,t){if(Wall.isArchiveWall()&&!linkLocked(_)){var o=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(e.split("_")[1]);ajax.post("al_wall_archive.php",{act:"a_rollback_state",from:ge("page_wall_more_tab")?"profile":"wall",postId:o,hash:t},{onDone:function(_){cur.wallArchiveRolledback=!0,Wall.postShowDeletedMessage(e,_)},showProgress:lockLink(_),hideProgress:unlockLink(_)})}},restoreLastRollbackPostsArchiveState:function(_,e,t){if(Wall.isArchiveWall()&&!linkLocked(_)){var o=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(e.split("_")[1]);ajax.post("al_wall_archive.php",{act:"a_restore_last_rollback",from:ge("page_wall_more_tab")?"profile":"wall",postId:o,hash:t},{onDone:function(_){delete cur.wallArchiveRolledback,Wall.postShowDeletedMessage(e,_)},showProgress:lockLink(_),hideProgress:unlockLink(_)})}},postSetArchiveState:function postSetArchiveState(actionEl,postRaw,hash,state,isRollback){if(!Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.a)(actionEl)&&!linkLocked(actionEl)){var postId=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(postRaw.split("_")[1]),isActionMenuItem=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(actionEl,"ui_actions_menu_item"),localCur=cur.wallLayer?wkcur:cur;localCur&&(localCur.wallMyDeleted||(localCur.wallMyDeleted={}),localCur.wallMyDeleted[postRaw]=!Wall.isArchiveWall()==!state?0:1);var extended=!isRollback&&(Wall.isArchiveWall()?cur.wallArchiveRestored>=3&&!cur.wallArchiveRolledback:!cur.wallArchiveArchived);ajax.post("al_wall_archive.php",{act:"a_set_state",from:ge("page_wall_more_tab")?"profile":cur.pid?"post":"wall",hash:hash,state:state?1:void 0,extended:extended?1:void 0,postId:postId},{onDone:function onDone(msg,js){if(Wall.isArchiveWall()&&(state=!state,isRollback||(cur.wallArchiveRestored||(cur.wallArchiveRestored=0),cur.wallArchiveRestored++)),state&&(cur.wallArchiveArchived=!0),isRollback?Wall.postHideDeletedMessage(postRaw):Wall.postShowDeletedMessage(postRaw,msg)){"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(state?-1:1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(postEl,"reply")&&(state?--cur.pgOffset:++cur.pgOffset,state?--cur.pgCount:++cur.pgCount,FullWall.repliesSummary(cur.pgCount));var postEl=ge("post"+postRaw);"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(postEl,"own")&&(state?++cur.deletedCnts.own:--cur.deletedCnts.own),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(postEl,"all")&&(state?++cur.deletedCnts.all:--cur.deletedCnts.all),Wall.isArchiveWall()&&(state?--cur.deletedCnts.archive:++cur.deletedCnts.archive),Wall.update())}if(js)try{eval(js)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_17__.d)(_,js)}},showProgress:isActionMenuItem?_lib_ui__WEBPACK_IMPORTED_MODULE_5__.n.pbind(actionEl):lockLink(actionEl),hideProgress:isActionMenuItem?_lib_ui__WEBPACK_IMPORTED_MODULE_5__.v.pbind(actionEl):unlockLink(actionEl)})}},deletePost:function(_,e,t,o,i){(cur.wallLayer?wkcur:cur).wallMyDeleted[e]=1;var l=ge("post"+e),a=geByClass1("post_actions",l),r={act:"delete",post:e,hash:t,root:o?1:0,confirm:i?1:0,from:"wall"};cur.suggestedDeletedCount&&cur.suggestedDeletedCount>=2&&(r.delete_all=1),ajax.post("al_wall.php",r,{onDone:function(i,a,r){if(r)var s=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.d)(i,r,getLang("global_delete"),function(){s.hide(),wall.deletePost(_,e,t,o,1)},getLang("box_cancel"));else{Wall.postShowDeletedMessage(e,i),"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(l,"reply")&&(cur.pgOffset--,cur.pgCount--,FullWall.repliesSummary(cur.pgCount));var n=ge("post_publish_wrap"+e);n&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(n,"suggest")&&(void 0===cur.suggestedDeletedCount&&(cur.suggestedDeletedCount=0),cur.suggestedDeletedCount++),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(l,"suggest")?Wall.suggestUpdate(-1):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(l,"postponed")?wall.postponeUpdateCount():"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(l,"own")&&++cur.deletedCnts.own,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(l,"all")&&++cur.deletedCnts.all,Wall.isArchiveWall()&&++cur.deletedCnts.archive,Wall.update())}},showProgress:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"ui_actions_menu_item")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.n)(_):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"flat_button")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o)(_):addClass(a,"post_actions_progress")},hideProgress:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"ui_actions_menu_item")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.v)(_):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"flat_button")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w)(_):removeClass(a,"post_actions_progress")}});var s=ge("delete_post"+e);s&&s.tt&&s.tt.el&&s.tt.destroy()},markAsSpam:function markAsSpam(el,post,hash,inline){ajax.post("al_wall.php",{act:"spam",post:post,hash:hash,from:inline?"inline":""},{onDone:function onDone(msg,js){if(inline)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(el).replaceChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{innerHTML:msg}),el);else{var r=ge("post"+post),t=geByClass1("_post_content",r)||geByClass1("feedback_row_t",r);Object(_lib_video__WEBPACK_IMPORTED_MODULE_12__.h)(r);var pd=ge("post_del"+post);pd?(pd.innerHTML='<span class="dld_inner">'+msg+"</span>",Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(pd)):r.appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{id:"post_del"+post,className:"dld",innerHTML:'<span class="dld_inner">'+msg+"</span>"})),hide(t)}if(js)try{eval(js)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_17__.d)(_,js)}},showProgress:function(){el&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(el,"ui_actions_menu_item")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.n)(el):inline&&(hide(el),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(el)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(el).appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("span",{className:"progress_inline"}))))},hideProgress:function(){el&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(el,"ui_actions_menu_item")?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.v)(el):inline&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(el),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(el)))},stat:["privacy.js","privacy.css"]});var btn=ge("delete_post"+post);btn&&btn.tt&&btn.tt.el&&btn.tt.destroy()},ignoreAdsItem:function(_,e,t){var o=ge("post"+_),i=o.getAttribute("data-ad"),l=geByClass1("ui_actions_menu_wrap",o);o&&(l&&uiActionsMenu.toggle(l,!1),Object(_lib_video__WEBPACK_IMPORTED_MODULE_12__.h)(o),ajax.post("/al_feed.php?misc",{act:"a_ignore_item",post_raw:_,feed_raw:e,hash:t,ad_data:i,no_html:1},{onDone:function(){hide(o)}}))},ignoreAdsOwner:function(_,e,t,o){var i=ge("post"+_);i&&ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:_,owner_id:e,hash:t,list:0,no_html:1},{onDone:function(_){hide(i)},showProgress:o&&_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o.pbind(o),hideProgress:o&&_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w.pbind(o)})},markAsAds:function(_,e,t,o){ajax.post("al_wall.php",{act:"mark_as_ads",post:_,hash:e,full:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(o)},{onDone:function(e){ge("ui_actions_menu_item_mark_as_ads"+_).innerHTML=e}})},restorePost:function(_,e,t){return(cur.wallLayer?wkcur:cur).wallMyDeleted[_]=0,ajax.post("al_wall.php",{act:"restore",post:_,hash:e,root:t?1:0},{onDone:function(e){if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("post_del_btn"+_),Wall.postHideDeletedMessage(_)){var t=ge("post"+_);"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"reply")&&(cur.pgOffset++,cur.pgCount++,FullWall.repliesSummary(cur.pgCount)),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"suggest")?Wall.suggestUpdate(1):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"postponed")?wall.postponeUpdateCount():"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"own")&&--cur.deletedCnts.own,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"all")&&--cur.deletedCnts.all,Wall.isArchiveWall()&&--cur.deletedCnts.archive,Wall.update())}}}),!1},blockPostApp:function(_,e,t,o){ajax.post("al_wall.php",{act:"block_post_app",aid:_,from:e,hash:t},{onDone:function(_){o.parentNode.parentNode.innerHTML=_},showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o.pbind(o),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w.pbind(o)})},checkPostClick:function(_,e,t){if(e=e||window.event,!_||!e)return!0;var o=e.target||e.srcElement,i=8,l=!1,a=/wall_post_text|published_comment|post_media|page_event_share|page_public_share|page_group_share|feed_friends|feed_videos|feed_explain_list|explain|feed_photos|feedback_row/;do{if(!o||o==_||o.onclick||o.onmousedown||inArray(o.tagName,["A","IMG","TEXTAREA","EMBED","OBJECT"])||inArray(o.className,["play_new","video_box_wrap"])||(l=o.className.match&&o.className.match(a)))break}while(i--&&(o=o.parentNode));if(!l)return!1;if(cur.postClicked||(cur.postClicked={}),!t||!cur.postClicked[_]){if(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString()))return!1;t&&(cur.postClicked[_]=!0,setTimeout(function(){cur.postClicked[_]=!1},2e3))}return o||!0},postClick:function(_,e,t){t=t||{};var o=(_||"").match(/^(-?\d+)_(wall)?(\d+)$/),i=ge("post"+_),l=void 0;if(l=!!t.skipCheck||Wall.checkPostClick(i,e)){if(!0!==l){var a=geByClass1("wall_post_more",l,"a");if(a&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(a))return a.onclick(),void(o||removeClass(i,"wall_post_over"))}if(o&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(i,"suggest")&&!cur.onepost){var r=i&&i.getAttribute("data-ad"),s=i&&i.getAttribute("data-ad-block-uid"),n="/wall"+o[1]+"_"+o[3];if(browser.mobile&&e){var c={};r&&s&&(c.params={_post_ad_data:r,_post_ad_block_unique_id:s}),nav.go(n,null,c)}else Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.d)(e)?window.open(n,"_blank"):(r&&s&&(t.ads_params={post_ad_data:r,ad_block_unique_id:s}),Wall.hideEditPostReply(),Wall.postFull("wall"+o[1]+"_"+o[3],!1,t))}}},postClickStat:function(_){var e=(_=Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.g)(_)).currentTarget,t=[];e.getAttribute("data-ad-view")&&(t.push(Wall.postsGetRaws(e)),Page.postsSeen(t));var o=_.target;inArray(o.getAttribute("data-post-click-type"),["post_owner_img","post_owner_link"])||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(o,"author")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(o,"post_image")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(o,"post_img")?Wall.triggerAdStat(e,"click_post_owner"):("A"==_.target.nodeName&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wall_post_text",_.target,e)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("page_media_thumbed_link",_.target,e)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_.target,"lnk")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("lnk",_.target,e))&&Wall.triggerAdStat(e,"click_post_link")},adBlockClickStat:function(_,e){var t=(_=Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.g)(_)).currentTarget;Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"_ads_block_data_w")||(t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_ads_block_data_w",t));var o=[];t.getAttribute("data-ad-view")&&(o.push(Wall.postsGetRaws(t)),Page.postsSeen(o)),Wall.triggerAdStat(t,e)},getAdsEvents:function(){var _=Wall._lsAdsEvents;return _||(_=Wall._lsAdsEvents=_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.get(Wall.LS_ADS_EVENTS)||{}),_},cleanAdsEvents:function(){var _=Wall.getAdsEvents(),e=(new Date).getTime()/1e3|0,t=!1;each(_,function(o,i){e-i>=3600&&(delete _[o],t=!0)}),t&&_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.set(Wall.LS_ADS_EVENTS,_)},triggerAdPostStat:function(_,e){Wall.triggerAdStat(_,e)},triggerAdStat:function triggerAdStat(elIdOrEl,event){for(var el="string"==typeof elIdOrEl?Wall.domPost(elIdOrEl):elIdOrEl,pixels=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(el,"ad-stat-"+event);pixels;){var adBlockUID=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(el,"ad-block-uid"),isUniqueEvent=inArray(event,["load","impression","impression_long","video_start","video_play_3s","video_play_25","video_play_50","video_play_75","video_play_95","video_play_100"]);if(isUniqueEvent&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(el,"ad-disabled-stat-"+event,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(el,"ad-stat-"+event)),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(el,"ad-stat-"+event,null)),adBlockUID&&isUniqueEvent)try{var eventKey=Object(_lib_utils__WEBPACK_IMPORTED_MODULE_19__.g)(""+event+adBlockUID),lsData=Wall.getAdsEvents();if(lsData[eventKey])break;var now=(new Date).getTime()/1e3|0;lsData[eventKey]=now,_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.set(Wall.LS_ADS_EVENTS,lsData)}catch(_){try{console.log(_.message)}catch(_){}}pixels=pixels.split("$$$"),each(pixels,function(_,e){Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.J)().src=e});break}var statHtml=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(el,"ad-stat-html-"+event);if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(el,"ad-stat-html-"+event,null),statHtml)for(var statElemWrap=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{innerHTML:statHtml}),elem=void 0;elem=statElemWrap.firstChild;)if(el.appendChild(elem),"SCRIPT"===elem.tagName)try{eval(elem.innerHTML)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_17__.d)(_,elem.innerHTML)}},copyHistory:function(_,e,t,o){var i=(_=_||window.event).target||_.srcElement,l=8,a=!1,r=/published_a_quote/;do{if(!i||(a=i.className.match(r))||i.onclick||i.onmousedown||inArray(i.tagName,["A","IMG"]))break}while(l--&&(i=i.parentNode));if(a&&!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString()))return ajax.post("al_wall.php",{act:"copy_history",post:t,offset:o,from:cur.module},{onDone:function(_){if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(e)&&(hide(e),_)){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(e),"published_by_quote")?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(e):e;Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(t).insertBefore(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.f)(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(t)),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Y)(t,"im_rows")?IM.updateScroll(!0):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Y)(t,"wl_post")&&WkView.wallUpdateReplies()}}}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(_)},postFull:function(_,e,t){if(_.match(/^wall-?\d+_\d+$/)&&!(t||{}).nolist&&(!cur.pgParams||!cur.pgParams.owners_only&&!cur.pgParams.q))switch(cur.wallType){case"all":case"full_all":_+="/all"}return Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_1__.B)({w:_},!1,e,t)},checkReplyClick:function(_,e){if(e=e||window.event,!_||!e)return!1;var t=e.target||e.srcElement,o=8,i=!1;do{if(!t||t==_||t.onclick||t.onmousedown||"A"==t.tagName&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"_reply_lnk")||inArray(t.tagName,["IMG","TEXTAREA","EMBED","OBJECT"])&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"emoji")||"wpe_cont"==t.id||(i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"_reply_content")))break}while(o--&&(t=t.parentNode));return!i||!!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString())},replyClick:function(_,e,t,o){var i=_.split("_"),l=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(i[0]),a=i[1].replace(/-?\d+$/,""),r=ge("post"+l+a+"_"+e),s=ge("post"+_);if(!(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(s,"closed_comments")||!cur.stickerClicked&&Wall.checkReplyClick(r,t))){(t||{}).cancelBubble=!0;var n=geByClass1("wall_reply_more",r,"a");if(n&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(n))return removeClass(r,"reply_moreable"),void n.onclick();if(o){s=cur.wallLayer?ge("wl_post"):s;var c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(s,"deep_active"),d=cur.stickerClicked||!1,E=_;if(c){var p=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("replies_wrap_deep",r);E=p?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(p,"post-id"):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(r,"post-id")}var O=ge("reply_field"+E);cur.stickerClicked=!1,!d||O&&O.emojiInited||(cur.afterEmojiInit=cur.afterEmojiInit||{},cur.afterEmojiInit[E]=function(){Emoji.clickSticker(d,ge("reply_field"+E))}),Wall.replyTo(E,e,o,t),d&&O&&O.emojiInited&&Emoji.clickSticker(d,O)}}},stickerClick:function(_,e,t){if((t||{}).cancelBubble=!0,window.Emoji)if(e){var o=Emoji.isStickerPackEnabled(_,Wall.stickerClick.pbind(_,e));if(0!==o)if(o){var i=e.parentNode,l=8;do{if(!i||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(i,"reply"))break}while(l--&&(i=i.parentNode));i&&i.onclick&&(cur.stickerClicked=_,i.onclick())}else Emoji.clickSticker(_,!1)}else Emoji.clickSticker(_,!1);else stManager.add([jsc("web/emoji.js"),"notifier.css"],function(){Wall.stickerClick(_,e)})},domPost:function(_){return ge("post"+_)},formatCount:function(_,e){return e=e||{},Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.l)(_,e)},likeFullUpdate:function(_,e,t){var o=e.match(/^(wall|photo|video|note|topic|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(-?\d+_)(\d+)/);Likes.update(o?(o[1]||"wall")+o[2]+o[3]:e,t)},likeUpdate:function(_,e,t,o,i,l,a){a||(o=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(o)),!1===_&&cur.wallLayer===e&&(_=ge("wl_post_body"));var r=e.match(/(-?\d+)(_?)(photo|video|note|topic|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),s=r[1]+"_"+r[4],n=_&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_post_content",_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",_))||wall.domPost(s),c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(n,a?"_views_wrap":l?"_share_wrap":"_like_wrap"),d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(c,"_count");if(d){if(!a&&!l){var E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(n,"_views_wrap"),p=E&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(E,"_count");!p||!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(E,"_auto_update")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(p)&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(p)!=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(d)||wall.likeUpdate(_,e,0,this.formatCount(o),void 0,void 0,1)}var O=c.tt||{},u=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.d)(O.opts||{}),b=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(O.container,"_value"),P=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(O.container,"_content"),M=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(O.container,"_title");i&&M&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(M,i),O&&(O.likeInvalidated=!0),b&&(b.value=o),Object(_lib_fx__WEBPACK_IMPORTED_MODULE_11__.c)(d,a?o:Object(_lib_lang__WEBPACK_IMPORTED_MODULE_13__.i)(o,"%s",!0),{str:"auto",noWrapWidth:!!a}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(c,l?"my_share":"my_like",t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(c,a?"no_views":l?"no_shares":"no_likes",!o),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(P,"me_hidden",!t&&!a),o?O.el&&(!1===i?O.destroy&&O.destroy():Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(O.container)||i||!1===i||tooltips.show(O.el,extend(u,{showdt:0}))):O.el&&O.hide();var D=Object(_lib_lang__WEBPACK_IMPORTED_MODULE_13__.i)(o,"%s",!0);if(a){var m=geByClass1("feedback_views",n),g=0;g=o.match(/^\d+$/)?Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(o):5,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(m,"<em>"+o+"</em> "+getLang("global_X_post_views",g,!0))}else if(l){var f="";o>0&&(f="<em>"+D+"</em> "+getLang("global_X_shared",o,!0)),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(geByClass1("feedback_share",n),f)}else{var w="";o>0&&(w="<em>"+D+"</em> "+getLang("global_like")),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(geByClass1("feedback_like",n),w)}Wall.updateFeedbackVisibility(n)}},updateFeedbackVisibility:function(_){var e=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(geByClass1("feedback_views",_))),t=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(geByClass1("feedback_share",_))),o=!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(geByClass1("feedback_like",_)))&&!t&&!e;Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(geByClass1("post_feedback_info",_),"empty",o)},likeShareUpdate:function(_,e,t,o,i){return Wall.likeUpdate(_,e,t,o,i,!0)},like:function(_,e){if(vk.id&&!cur.viewAsBox){var t=wall.domPost(_),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(t,"_like_wrap"),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(o,"_icon"),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(o,"_count"),a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(i,"fw_like_icon")?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(i,"fw_my_like"):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(o,"my_like"),r=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),s=(r[3]||"wall")+r[1]+"_"+r[4],n=cur.module;cur.wallType&&(n="feed"==cur.wallType?"feed_"+("news"==cur.section&&cur.subsection?cur.subsection:cur.section):"top"==cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full")),ajax.post("like.php",{act:"a_do_"+(a?"un":"")+"like",object:s,hash:e,wall:2,from:n},{onDone:Wall.likeFullUpdate.pbind(!1,_)});var c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(l);Wall.likeUpdate(!1,_,!a,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(c)+(a?-1:1)),cur.onWallLike&&cur.onWallLike()}},bookmark:function(_,e){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(e),addClass(_,"bookmarked")},likeShare:function(_,e){if(vk.id&&!cur.viewAsBox){var t=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),o=(t[3]||"wall")+t[1]+"_"+t[4],i=ge("like_share_"+o),l=Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)(i),a=cur.wallType?"feed"==cur.wallType?"feed_"+cur.section:"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module;"top"==cur.wallType&&(a="wall_top"),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)(i),ajax.post("like.php",{act:"a_do_"+(l?"un":"")+"publish",object:o,hash:e,wall:2,ref:a},{onDone:Wall.likeFullUpdate.pbind(!1,_)});var r=wall.domPost(_),s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(r,"_like_wrap"),n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(s,"_icon"),c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(r,"_count")),d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(n,"fw_like_icon")?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(n,"fw_my_like"):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(s,"my_like");Wall.likeUpdate(!1,_,!0,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(c)+(d?0:1))}},likeShareCustom:function(_,e){var t=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),o=(t[3]||"wall")+t[1]+"_"+t[4];Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.b)("like.php",extend({act:"publish_box",object:o},e))},likeShareCheckLen:function(_,e,t){_=ge(_),e=ge(e),t=t||255;var o=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(_)).replace(/\n\n\n+/g,"\n\n");if(_.lastLen!==o.length){var i=_.lastLen=o.length,l=i-o.replace(/\n/g,"").length;i>t-50||l>4?(i>t?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(e,getLang("text_exceeds_symbol_limit",i-t)):l>4?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(e,getLang("global_recommended_lines",l-4)):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(e,getLang("text_N_symbols_remain",t-i)),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(e)):hide(e)}},showLikesPage:function(_,e,t){cur.likesBox.loadTabContent("like.php",{act:"a_get_members",object:_,published:e,offset:t,wall:1},e)},clearLikesCache:function(_,e){var t="^/like.php#"+Object(_lib_ajax__WEBPACK_IMPORTED_MODULE_14__.b)({act:"a_get_members",object:_,published:e,offset:12345,wall:1,tab:e,only_content:1}).replace("12345","\\d+")+"$",o=new RegExp(t,"i");for(var i in ajaxCache)o.test(i)&&delete ajaxCache[i]},subscribeByButton:function(_,e,t,o,i){var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"_subscribed"),a={showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o.pbind(_),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w.pbind(_),onDone:function(){l=!l,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(_,"_subscribed",l)}},r={};e>0&&i&&(r.from=i),Wall.subscribeToAuthor(l,e,t,o,a,r)},subscribeByAction:function(_,e,t,o){if(!Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.a)(_)){var i=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"value"))?1:0,l={showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.n.pbind(_),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.v.pbind(_)},a={};e>0&&o?a.from=o:e<0&&(l=extend(l,{onDone:function(o,a,r){if(a){var s=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.d)(getLang("global_warning"),a,getLang("group_leave_group"),function(){s.hide(),Wall.subscribeToAuthor(i,e,t,l,"",{confirm:1})},getLang("global_cancel"));return!0}Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(_,o),_.setAttribute("data-value",1-i),r&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_)),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(_))}})),Wall.subscribeToAuthor(i,e,t,"",l,a)}},subscribeToAuthor:function(_,e,t,o,i,l){i=extend({onFail:function(_){setTimeout(Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.d)(getLang("global_error"),_).hide,3e3)}},i),l=l||{},e>0?ajax.post("al_friends.php",extend({act:_?"remove":"add",mid:e,hash:t,from:"feed"},l),i):ajax.post("al_groups.php",extend({act:_?"list_leave":"list_enter",gid:-e,hash:t},l),i),o&&ajax.post("al_feed.php?act=viral_subscribe_stat",{author_id:e,subscribe:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(!_),hash:o})},showPhoto:function(_,e,t,o,i){return!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.b)("al_photos.php",{act:"photo_box",to_id:_,photo:e,hash:t},{cache:1},!!o.href&&i)},_animDelX:function(_,e,t,o){},domFC:function(_){for(_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(_);_&&_.id.match(/page_wall_count_/);)_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(_);return _},domPS:function(_){for(_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.A)(_);_&&_.id.match(/page_wall_count_/);)_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.A)(_);return _},scrollCheck:function(_,e,t){var o=void 0==e?Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.e)():e,i=0,l=void 0,a=[],r=window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight;if(window.scrollAnimation)return!1;if(Wall.repliesSideUpdate(o),cur.wallPage){var s=void 0;if(s="suggested"==cur.wallTab?ge("page_suggested_posts"):"top"==cur.wallTab?ge("page_top_posts"):ge("page_wall_posts"),(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(cur.topRow)!=s||((cur.topRow||{}).id||"").match(/page_wall_count_/))&&(cur.topRow=Wall.domFC(s)),vk.id&&cur.topRow&&!cur.topRow.id.match(/page_wall_count_/)&&!((window.curNotifier||{}).idle_manager||{}).is_idle){for(var n=[],c=Wall.domPS(cur.topRow);c;c=Wall.domPS(c))cur.topRow.offsetTop>o&&(cur.topRow=c),c.unseen||(c.unseen=!0,n.push(Wall.postsGetRaws(c)));Page.postsUnseen(n);for(var d=cur.topRow;d;d=l){LongView&&LongView.register(d,"Wall");var E=i||d.offsetTop;if(E>=o+r)break;(((l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(d))||{}).id||"").match(/page_wall_count_/)&&(l=null),(i=l?l.offsetTop:E+d.offsetHeight)<o&&l&&(cur.topRow=l);var p=d.bits||0;p>=3||(p|=(E>=o&&E<o+r?1:0)|(i>=o&&i<o+r?2:0))&&(d.bits=p,3==p&&a.push(Wall.postsGetRaws(d)))}LongView&&LongView.onScroll(o,r),Page.postsSeen(a)}}if(cur.wallAutoMore&&!cur.wallLoading&&!cur.viewAsBox){var O=ge("wall_more_link");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(O)&&o+lastWindowHeight+1500>Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(O)[1]&&O.onclick()}},postsGetRaws:function(_){var e=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.p)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_).children,_),t=void 0,o={};if(!_)return o;o.module=cur.module,o.index=e;var i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"_ads_promoted_post"),l=_.getAttribute("data-ad-view");l&&(o["ad_"+l]=1,i&&(o.module+="_ads_promoted_post"));var a=_.getAttribute("post_view_hash");if(a&&(o.hash=a),"block_"===_.id.substr(0,6)){o[_.id]=1,o.block=_.id.substr(6);var r=attr(_,"data-contain");r&&(r=r.split(",")).forEach(function(_){_=_.split(":"),o[_[0]]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(_[1])||1})}else(t=_.id.match(/^post(-?\d+_\d+)$/))&&(o[t[1]]=1,(t=(_.getAttribute("data-copy")||"").match(/^(-?\d+_\d+)$/))&&(o[t[1]]=-1));return o},votingExtendParams:function(_,e){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"fixed")&&(_.is_fixed=1),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"preview")&&(_.is_preview=1),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"board")&&(_.is_board=1),vk.widget&&(_.is_widget=1,_.width=cur.widgetWidth,_.url=cur.url),cur.voteHash&&(_.vote_hash=cur.voteHash);var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"id");t&&(_.voting_id=t);var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"ref");o&&(_.ref=o);var i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"hash");return i&&(_.hash=i),_},votingRevote:function(_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("media_voting",_);if(e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"id");if(this.votingIsLocked(t))return;var o=this.votingExtendParams({act:"revote"},e);ajax.post("al_voting.php",o,{onDone:this.votingUpdate.bind(this,t),showProgress:this.votingLock.bind(this,t),hideProgress:this.votingUnlock.bind(this,t)})}},votingIsLocked:function(_){var e=!1;return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("_media_voting"+_).forEach(function(_){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"media_voting_locked")&&(e=!0)}),e},votingLock:function(_){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("_media_voting"+_).forEach(function(_){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"disabled")||addClass(_,"media_voting_locked")})},votingUnlock:function(_){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("_media_voting"+_).forEach(function(_){removeClass(_,"media_voting_locked")})},votingUpdate:function(_,e){if(_){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("_media_voting"+_);t.length&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.z)(e)&&(t.forEach(function(_){if(!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"disabled"))if(""===e)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(_);else{var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.f)(e);if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"media_voting_can_vote")){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(t);addClass(o,"media_voting_just_voted"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.D)(_,t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ib)(o,"media_voting_just_voted")}else Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.D)(_,t)}}),window.IMBRIDGE&&setTimeout(IMBRIDGE.syncHistory.bind(IMBRIDGE),0),vk.widget&&window.WPoll&&window.WPoll.resizeWidget())}},votingVote:function(_,e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"id");if(!this.votingIsLocked(t)&&vk.id){if(e.length){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_),"wk_voting_box"),i=this.votingExtendParams({act:"vote",option_ids:e.join(",")},_);ajax.post("al_voting.php",i,{onDone:function(_,e){o?nav.reload():(vk.widget&&window.WPoll&&window.WPoll.updateShareMessage(e),this.votingUpdate(t,_))}.bind(this),showProgress:this.votingLock.bind(this,t),hideProgress:function(_){o||this.votingUnlock(_)}.bind(this,t)})}}else vk.widget&&Widgets.oauth()},votingButtonVote:function(_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("media_voting",_);if(e&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(e,"media_voting_multiple")){var t=[];Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("media_voting_option_selected",e).forEach(function(_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"id");e&&t.push(e)}),this.votingVote(e,t)}},votingOptionVote:function(_,e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("media_voting",_);if(t){if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"media_voting_multiple")){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"id");if(this.votingIsLocked(o)||!vk.id)return void(vk.widget&&Widgets.oauth());Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(_,"media_voting_option_selected");var i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("media_voting_option_selected",t).length;Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(t,"media_voting_has_selected_options",i)}else{var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"id");this.votingVote(t,[l])}Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(e)}},votingOptionTooltip:function(_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("media_voting",_);if(e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"id"),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"owner-id"),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"id"),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"board");Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_3__.c)(_,{url:"al_voting.php",params:{act:"option_tt",option_id:t,owner_id:o,is_board:l,voting_id:i},slide:15,ajaxdt:100,showdt:400,hidedt:200,dir:"auto",shift:[0,10,10],typeClass:"voting_tt"})}},votingLayer:function(_,e){var t=!!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"media_voting_option_wrap")&&_,o=t?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"id"):0,i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"media_voting")?_:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("media_voting",_);if(i){var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(i,"id"),a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(i,"owner-id"),r={w:(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(i,"board")?"board_poll":"poll")+a+"_"+l};o&&(r.opt_id=o),vk.widget?window.open(location.origin+"/"+r.w,"poll"):Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_1__.B)(r,!1,void 0,{queue:1,noloader:!!Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.b)()}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(e)}},votingUpdateByPostRaw:function(_){if(vk.id){_=_.split("_");var e=positive(_[1]),t=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(_[0]),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("_post_media_voting"+t+"_"+e);e&&t&&o.length&&ajax.post("al_voting.php",{act:"update",post_id:e,owner_id:t},{onDone:function(_){_&&o.forEach(function(e){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(e,_)})},onFail:function(){return!0}})}},votingExport:function(_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("media_voting",_);if(e&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"board")){var t=this.votingExtendParams({act:"export_box"},e);Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.b)("al_voting.php",t,{onDone:function(){Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.b)().setOptions({width:500})}})}},votingOnMain:function(_,e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("media_voting",_);if(t){if(this.votingIsLocked(o))return;var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"id"),i=this.votingExtendParams({act:"onmain",state:e?1:0},t);ajax.post("al_voting.php",i,{onDone:this.votingUpdate.bind(this,o),showProgress:this.votingLock.bind(this,o),hideProgress:this.votingUnlock.bind(this,o)})}},votingClosed:function(_,e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("media_voting",_);if(t){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"id");if(this.votingIsLocked(o))return;var i=this.votingExtendParams({act:"closed",state:e?1:0},t);ajax.post("al_voting.php",i,{onDone:this.votingUpdate.bind(this,o),showProgress:this.votingLock.bind(this,o),hideProgress:this.votingUnlock.bind(this,o)})}},votingNarrowAction:function votingNarrowAction(votingId,hash,action){var act=void 0,state=void 0;switch(action){case 101:act="closed",state=0;break;case 102:act="closed",state=1;break;case 103:act="onmain",state=0;break;case 104:act="onmain",state=1}act&&!cur.votingNarrowActionProgress&&ajax.post("al_voting.php",{act:act,voting_id:votingId,is_fixed:1,state:state,narrow:1,hash:hash},{onDone:function onDone(html,js){var votingModuleEl=ge("group_voting");if(votingModuleEl&&(votingModuleEl=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(votingModuleEl),html?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.D)(votingModuleEl,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.f)(html)):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(votingModuleEl)),js)try{eval(js)}catch(_){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_17__.d)(_,js)}},showProgress:function(){cur.votingNarrowActionProgress=!0},hideProgress:function(){cur.votingNarrowActionProgress=!1}})},votingReport:function(_,e){if(!Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.a)(_)){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("media_voting",_);if(t){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"id");if(this.votingIsLocked(o))return;var i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"board");ajax.post("al_voting.php",{act:"a_report_form",voting_id:o,is_board:i,hash:e},{onDone:function(_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.f)(_);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"media_voting_board")&&addClass(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(e),"media_voting_board"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.D)(t,e),vk.widget&&window.WPoll&&window.WPoll.resizeWidget()},showProgress:function(){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.n)(_),this.votingLock(o)}.bind(this),hideProgress:function(){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.v)(_),this.votingUnlock(o)}.bind(this)})}}},foTT:function(_,e,t){t&&t.oid&&(e=t.oid==vk.id?getLang("wall_my_friends_only"):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("wpfo"+t.pid)),Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_3__.b)(_,e)},update:function(){if(cur.wallLayer)WkView.wallUpdateReplies();else{var _="top"===cur.wallType,e="archive"===cur.wallType;if(("all"===cur.wallType||"own"===cur.wallType||_||e)&&("all"===cur.wallTab||"own"===cur.wallTab||"top"===cur.wallTab||"archive"===cur.wallTab)){var t=e?"all":_?"own":cur.wallType,o=ge("wall_more_link"),i=e?"page_archive_posts":_?ge("page_top_posts"):ge("page_wall_posts"),l=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(cur.deletedCnts[t]),a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)(t,i).length-l,r=!1;if(!_&&!e||!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(geByClass1("no_posts",i))&&cur.wallTopFinished!==cur.oid&&cur.wallArchiveFinished!==cur.oid){var s={all:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_all")),own:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_own")),top:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_top")),archive:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_archive"))}[e?"archive":_?"top":t];if("suggested"!=cur.wallTab){var n=s;cur.oid<0&&cur.options.fixed_post_id&&(n-=1),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_posts_count",n?Object(_lib_lang__WEBPACK_IMPORTED_MODULE_13__.i)(n,cur.options.wall_counts):cur.options.wall_no)}var c=a;!_&&!e&&cur.options.fixed_post_id&&cur.options.wall_oid<0&&(c+=1),r=c>=s-l}else r=!0;r?hide(o):(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(o),o.onclick=Wall.showMore.pbind(a)),cur.wallTab==cur.wallType&&(shortCurrency(),cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler())}}},getAbsDate:function(_,e){e=e||window.cur;var t,o=new Date(_||Date.now()),i=o.getHours(),l=o.getMinutes(),a="";return e.wallTpl.time_system&&(a=e.wallTpl.time_system[i>11?1:0],i=i%12||12),t=i>9?i:"0"+i,l=l>9?l:"0"+l,e.wallTpl.date_format.replace("{am_pm}",a).replace("{hour}",i).replace("{num_hour}",t).replace("{minute}",l)},getNowRelTime:function(_){_=_||window.cur;var e=Date.now();return'<span class="rel_date rel_date_needs_update" time="'+Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(e/1e3-(_.tsDiff||0))+'" abs_time="'+Wall.getAbsDate(e,_)+'">'+getLang("wall_just_now")+"</span>"},getNewPostHTML:function(_,e,t,o){o=o||window.cur;var i=[],l=_[2],a=l.split("_")[0],r="",s="",n=_[4].split("|"),c=void 0,d=Wall.getNowRelTime(o);1==_[8]?(r+=o.wallTpl.reply_link,s+=o.wallTpl.reply_button):a!=vk.id&&(r+=o.wallTpl.own_reply_link);var E=_[3].replace("mem_link","author").replace("memLink","author"),p=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(E),O=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.c)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.I)(p.innerText||p.textContent||""));-1!=_[6].indexOf('id="wpfo')&&(E+='<span class="page_fronly inl_bl" onmouseover="Wall.foTT(this, false, {oid: \''+a+"', pid: '"+_[2]+"'})\"></span>"),o.wallTpl.custom_del&&(e>(_[9]==a?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER)||a==vk.id||_[9]==vk.id||_[2].split("_")[0]!=_[4])&&i.push(o.wallTpl.custom_del),e>(_[9]==a?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER)||a==vk.id||_[9]==vk.id?i.push(o.wallTpl.del):_[2].split("_")[0]!=_[4]&&i.push(o.wallTpl.spam);var u=e>constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR&&_[9]==a||a==vk.id||_[9]==vk.id;u&&"rss"!==_[13]&&i.push(o.wallTpl.edit),a!=vk.id&&_[9]!=vk.id||!_[6]||(_[6]=_[6].replace("vk2017_snippet_show_layer_button","vk2017_snippet_show_layer_button_hidden"));var b=a<0&&_[9]==a&&e>constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR;return c={oid:a,name:E,actions:i.length?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(o.wallTpl.post_actions,{actions:i.join("")}):"",replies:"",reply_link:r,reply_button:s,own_reply_link:o.wallTpl.own_reply_link,reply_box:1==_[8]?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(o.wallTpl.reply_box,{actions:"",class:b?" reply_fakebox_with_official":""}):"",photo:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.eb)(n[0]),link:_[5],text:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.eb)(_[6]),date:d,post_id:_[2],poll_hash:o.wallTpl.poll_hash,date_postfix:"",user_image:"",post_url:"/wall"+l.replace("_wall_reply","_"),can_reply_as_group:b?1:"",owner_photo:b?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.eb)(n[1]||n[0]):"",owner_href:b?_[5]:"",owner_name:b?O:"",online_class:a>0?" online":"",likes:Likes.makeTemplate(o.wallTpl.post_likes,{object_raw:_[2]})},t&&extend(c,t(c,_)),u&&o.wallTpl.author_data&&(c.date=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(o.wallTpl.author_data,{date:c.date,post_id:l})),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(o.wallTpl.post,c),c)},updateAnonNewPost:function(_,e){if("anon"==_[13]){var t=geByClass1("author",e),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("span");o.innerHTML=t.innerHTML,o.className=t.className,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.D)(t,o);var i=geByClass1("post_image",e),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("span");l.innerHTML=i.innerHTML,l.className=i.className,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.D)(i,l)}return e},getNewReplyHTML:function(_,e,t,o){o=o||window.cur;var i=[],l=ge("reply_field"+_[2])||ge("reply_fakebox"+_[2])||ge("fwr_text"),a="",r="",s="",n=_[10]||"";(e>constants.Groups.GROUPS_ADMIN_LEVEL_USER||!_[2].indexOf(vk.id+"_")||_[4]==vk.id?i.push(o.wallTpl.del_reply):_[2].split("_")[0]!=_[4]&&i.push(o.wallTpl.spam_reply),(e>constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR&&_[4]==Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(_[2])||_[4]==vk.id)&&i.push(o.wallTpl.edit_reply),-1!=_[8].indexOf('class="wall_reply_more"')&&(a+="reply_moreable"),l)&&(a+=" reply_replieable",r=o.wallTpl.reply_link_wrap,wall.getReplyNames()[_[4]]||wall.addReplyName(_[4],[_[11],_[12]]));a&&(s=" onclick=\"Wall.replyClick('%post_id%', %reply_msg_id%, event, %reply_uid%)\""),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(o.wallTpl.reply_actions,{actions:i.join("")});var c={name:_[5].replace("mem_link","author"),photo:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.eb)(_[6]),link:_[7],text:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.eb)(_[8]),classname:a,actions:i,attr:s,date:Wall.getNowRelTime(o),to_link:n,answer_link:r,post_id:_[2],reply_id:_[3],like_id:_[3].replace("_","_wall_reply"),reply_msg_id:_[3].split("_")[1],reply_uid:_[4]||"false",likes:Likes.makeTemplate(o.wallTpl.reply_likes,{object_raw:_[3]})};return t&&extend(c,t(c)),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(o.wallTpl.reply,c)},updatePostImages:function(_){return _.replace(/<img[^>]+>/g,function(_){return _.match(/class=/)?_.replace("src=","data-src=").replace('class="','class="__need_img '):_})},loadPostImages:function(_){each(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("__need_img",_,"img"),function(){var _=this.getAttribute("data-src");_&&(this.src=_,this.removeAttribute("data-src")),removeClass(this,"__need_img")})},openNewComments:function(_){var e=ge("replies"+_),t=e.nextSibling,o=geByClass1("wr_header",e,"a"),i=0,l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("reply",e,"div").length,a=l,r=t.newCnt;Wall.loadPostImages(e),each(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.d)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("new_reply",e,"div")),function(){if(removeClass(this,"new_reply"),Object(_lib_legacy__WEBPACK_IMPORTED_MODULE_15__.k)(this),100==++i)return!1}),o&&(a=i+Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(o.getAttribute("offs").split("/")[1])),l+=-r+i,(a>3||l<a)&&(o||e.insertBefore(o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("a",{className:"wr_header"}),e.firstChild),Wall.updateRepliesHeader(_,o,l,a)),cur.wallMyOpened[_]=1,t&&"replies_open"==t.className&&(r>100?(t.innerHTML=getLang("news_x_new_replies_more",Math.min(100,r-i)),t.newCnt-=i):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(t)),Wall.repliesSideSetup(_)},langWordNumeric:function(_,e,t){return Object(_lib_lang__WEBPACK_IMPORTED_MODULE_13__.l)(_,e,t)},updateTimes:function(_){if((cur.lang||{}).wall_X_seconds_ago_words){var e=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Date.now()/1e3),t=[];e-=cur.tsDiff,each(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("rel_date_needs_update",_||ge("page_wall_posts"),"span"),function(_,o){if(o){var i=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(o.getAttribute("time")),l=e-i,a=o.getAttribute("abs_time");l<5?a=getLang("wall_just_now"):l<60?a=Wall.langWordNumeric(l,cur.lang.wall_X_seconds_ago_words,cur.lang.wall_X_seconds_ago):l<3600?a=Wall.langWordNumeric(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(l/60),cur.lang.wall_X_minutes_ago_words,cur.lang.wall_X_minutes_ago):l<14400?a=Wall.langWordNumeric(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(l/3600),cur.lang.wall_X_hours_ago_words,cur.lang.wall_X_hours_ago):t.push(o),o.innerHTML=a}}),each(t,function(){removeClass(this,"rel_date_needs_update")})}},updateRepliesHeader:function(_,e,t,o){if(!cur.onepost){var i=void 0,l=e.href,a=void 0,r=3,s=0;if(!l&&(a=_.match(/^(-?\d+)_(photo|video|note|topic|video|)(\d+)$/))){var n=a[2]||"wall";switch(l="/"+n+a[1]+"_"+a[3],n){case"topic":l+="?offset=last&scroll=1";break;case"wall":l+="?offset=last&f=replies"}e.href=l}o>t?t<100?(i=o>100?getLang("wall_show_n_last_replies",100):getLang("wall_show_all_n_replies",o),r=!1):i=getLang("wall_hide_replies"):(i=getLang("wall_hide_replies"),s=1),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(e,"wrh_all",s),e.innerHTML=i,e.onclick=Wall.showReplies.pbind(_,r,!1),e.setAttribute("offs",t+"/"+o)}},updated:function(_,e,t){var o=_?wkcur:window.cur;if(o.wallAddQueue&&o.wallAddQueue.key==e)if(t.failed)o.wallAddQueue=!1;else if(o.wallAddQueue.ts=t.ts,isArray(t.events)&&t.events.length){var i=_?wkLayerWrap.scrollTop:Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.e)(),l=i,a=!(o.wallType||"").indexOf("full"),r=o.onepost,s=!!_,n=_;a&&(nav.objLoc.q||nav.objLoc.search||nav.objLoc.day)||(each(t.events,function(){var e=this.split("<!>"),t=e[0],i=e[1],c=e[2],d=0,E=0,p=_&&window.cur.wallLayer==c&&ge("wl_post");if(p&&"del_reply"!=i||(p=ge("post"+c),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Y)(p,_?wkLayerWrap:pageNode)||(p=null)),t==o.options.qversion){switch((Wall.isArchiveWall()?"archive_post"===i:"reveal_post"===i)&&(i="res_post"),(Wall.isArchiveWall()?"reveal_post"===i:"archive_post"===i)&&(i="del_post"),i){case"new_post":if(p)break;if(a&&o.pgStart>0){o.pgOffset++;break}if(o.oid==vk.id&&vk.id==e[9]&&window.curNotifier&&curNotifier.idle_manager.is_idle&&Wall.clearInput(),"own"!==o.wallType&&"all"!==o.wallType&&!Wall.hasPosts("own"))break;var O=ge("page_wall_posts"),u=O.lastChild,b=!!a&&FullWall.addTetaTet,P=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(e[e.length-1]),M=void 0!==o.options.is_admin?o.options.is_admin:o.options.wall_oid<0?8&P?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&P?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,D=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Wall.getNewPostHTML(e,M,b,o)),m=O.firstChild;if(Wall.updateAnonNewPost(e,D),ge("post"+c))break;for(u&&u!=D?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(u):u=!1,a?u||o.pgOffset++:(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_all",Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_all"))+1),addClass(D,"all"),Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(e[10])&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_own",Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_own"))+1),addClass(D,"own"))),0==e[8]&&addClass(D,"closed_comments"),o.deepRepliesActive&&addClass(D,"deep_active");m&&("INPUT"==m.tagName||1!=m.nodeType||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(m,"post_fixed"));)m=m.nextSibling;O!==Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(m)&&Wall.sendInsertBeforeError(),O.insertBefore(D,m),Wall.votingUpdateByPostRaw(c),d=D.offsetHeight+15,E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(D,n)[1],Object(_lib_legacy__WEBPACK_IMPORTED_MODULE_15__.k)(D),Object(_lib_accessibility__WEBPACK_IMPORTED_MODULE_16__.c)(),Wall.updateMentionsIndex(),AudioUtils.updateQueueReceivedPost(D);break;case"edit_post":var g=ge("wpt"+c);if(!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(p)||!g)break;var f=geByClass1("wall_post_more",g);f&&(f=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(f))),d=-g.offsetHeight,E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(g,n)[1];var w=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.eb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(e[3],{poll_hash:o.wallTpl.poll_hash})),T=o.videoInlinePlayer&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Y)(window._videoLastInlined[0],g),h=T&&"playing"==o.videoInlinePlayer.getState();if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(g,w),T){var C=geByClass1("page_post_sized_thumbs",g);1==Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.m)(C).length&&(C.innerHTML="",C.appendChild(window._videoLastInlined[1]),C.appendChild(window._videoLastInlined[0]),h&&setTimeout(function(){o.videoInlinePlayer.play()},0))}f&&(f=geByClass1("wall_post_more",g))&&f.onclick(),Wall.votingUpdateByPostRaw(c),d+=g.offsetHeight,Object(_lib_legacy__WEBPACK_IMPORTED_MODULE_15__.k)(g),Wall.updatePostAuthorData(c);break;case"edit_reply":var L=e[3],W=ge("wpt"+L);if(!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)("post"+L)||!W)break;var v=geByClass1("wall_reply_more",W);v&&(v=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(v)));var A=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.eb)(e[4]);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(W,A),d=-W.offsetHeight,E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(W,n)[1],v&&(v=geByClass1("wall_reply_more",W))&&v.onclick(),d+=W.offsetHeight,Object(_lib_legacy__WEBPACK_IMPORTED_MODULE_15__.k)(W);break;case"post_parsed_link":if(!p)break;var R=geByClass1("wall_postlink_preview_btn_disabled",p);if(!R)break;var j=e[3];if("1"===j)removeClass(R,"wall_postlink_preview_btn_disabled");else if("0"===j)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(R);else if(j){removeClass(R,"wall_postlink_preview_btn_disabled");var B=geByClass1("flat_button",R);B&&(B.setAttribute("href",e[3]),B.removeAttribute("onclick"))}break;case"del_post":p&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(p)&&!o.wallMyDeleted[c]&&!r&&(d-=p.offsetHeight+15,E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(p,n)[1],Object(_lib_video__WEBPACK_IMPORTED_MODULE_12__.h)(p),addClass(p,"unshown"),a||s||(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_all",Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_all"))-1),e[3]&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_own",Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_own"))-1),Wall.isArchiveWall()&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_archive",Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_archive"))-1)));break;case"res_post":p&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(p)&&((o.wallRnd==e[4]||Wall.isArchiveWall())&&removeClass(p,"unshown"),a?o.pgOffset++:(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_all",Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_all"))+1),e[3]&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_own",Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_own"))+1),Wall.isArchiveWall()&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_archive",Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)("page_wall_count_archive"))+1)));break;case"new_reply":if(!p||o.wallMyReplied[c]||ge("post"+e[3])||r&&o.pgOffset<o.pgCount||s&&(o.reverse?o.offset:o.offset+o.loaded<o.count))break;if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(s?ge("wl_post"):ge("post"+c),"deep_active")){var I=wall.addNewReply(e);d+=I[0],E=I[1];break}var U=ge("replies"+c),K=ge("replies_wrap"+c),y=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(e[e.length-1]),k=void 0!==o.options.is_admin?o.options.is_admin:o.options.wall_oid<0?8&y?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&y?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,x=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Wall.getNewReplyHTML(e,k,!1,o)),S=s?U.offsetHeight:p.offsetHeight,N=!1,F=void 0;if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(U)&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(K)&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)("reply_link"+c)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("wall_fixed",K)){F=U.nextSibling;var V=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("new_reply",U,"div").length+1;if(s||r||o.wallMyOpened[c]){if(!r){F&&"replies_open"==F.className&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(F),N=!0;var H=geByClass1("wr_header",U,"a"),G=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("reply",U,"div").length+1,q=G;H&&(q=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(H.getAttribute("offs").split("/")[1])+1),(q>5||G<q)&&(H||U.insertBefore(H=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("a",{className:"wr_header"}),U.firstChild),Wall.updateRepliesHeader(c,H,G,q))}}else addClass(x,"new_reply"),F&&"replies_open"==F.className||(F=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(c),role:"button",tabIndex:0}),U.parentNode.insertBefore(F,U.nextSibling)),F.innerHTML=getLang("wall_x_new_replies_more",Math.min(100,V)),F.newCnt=V}else Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)("reply_link"+c),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(K,U),N=!0;_&&o.reverse&&U.firstChild?U.insertBefore(x,U.firstChild):U.appendChild(x),N&&Object(_lib_legacy__WEBPACK_IMPORTED_MODULE_15__.k)(x),s?(o.count++,o.loaded++,WkView.wallUpdateReplies(),d=U.offsetHeight-S,E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(x,n)[1]):(r&&(FullWall.repliesSummary(e[13]),o.pgOffset++,o.pgCount++,FullWall.repliesSummary(o.pgCount),Pagination.pageReady(!1),FullWall.onePostOnScroll(!1,!1,!0)),d=p.offsetHeight-S,E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(N?x:F)[1],Wall.repliesSideSetup(c)),Wall.updateMentionsIndex(),Likes.update("wall"+c,{comment_num:e[13]});break;case"del_reply":if(o.wallMyDeleted[c]||!p)break;var z=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",p)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",p);if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(z,"deep_active")){var Q=wall.removeDeepReply(e);d+=Q[0],E=Q[1];break}if(d-=p.offsetHeight,E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(p,n)[1],Object(_lib_video__WEBPACK_IMPORTED_MODULE_12__.h)(p),o.layerpost)hide(p),o.count--,o.loaded--;else{r&&(o.pgOffset--,o.pgCount--,FullWall.repliesSummary(o.pgCount));var Y=p.parentNode.id.match(/replies(-?\d+_\d+)/);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(p),Y&&Wall.repliesSideSetup(Y[1])}break;case"view_post":Wall.likeUpdate(!1,c,0,Wall.formatCount(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(e[3])),void 0,void 0,1);break;case"like_post":case"like_reply":if(!p)break;var X="like_reply"==i?"wall_reply"+c:c,$=p&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(p,"_like_wrap"),J=p&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(p,"_share_wrap");wall.likeFullUpdate($,X,{like_my:$&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)($,"my_like"),like_num:e[3],like_title:!1,share_my:J&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(J,"my_share"),share_num:e[4],share_title:!1});break;case"upd_ci":var Z=e[2],__=ge("current_info"),e_=__||ge("page_current_info");if(!e_)break;switch(e[3]){case"audio":var t_=geByClass1("current_audio_cnt");t_&&t_.tt&&t_.tt.hide();var o_=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(e[5]||""),i_=o_?"":" hidden",l_="";__||(l_+=" onmouseover=\"showTooltip(this, {forcetoup: true, text: '"+o.options.ciAudioTip+"', black: 1, shift: [14, 5, 5]})\" onclick=\"Page.playCurrent(this, '"+e[4]+"')\""),Z=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(o.options.ciAudioTpl,{text:Z,attrs:l_,count:o_,cnt_class:i_}),wall.updateOwnerStatus(Z,e_,e,__);break;case"app":var a_=e[6]?"[12, 5, 5]":"[15, 5, 5]",r_=e[6]?" current_app_icon":"",s_=__?' onclick="cur.ciApp = '+e[4]+'"':" onmouseover=\"showTooltip(this, {forcetoup: true, text: '"+o.options.ciAppTip+"', black: 1, shift: "+a_+'})" href="'+e[5]+'?ref=14" onclick="return showApp(event, '+e[4]+', 1, 14, cur.oid)"';e[6]&&(s_+=" style=\"background-image: url('"+e[6]+"')\""),Z='<a class="current_app'+r_+'"'+s_+">"+Z+"</a>",wall.updateOwnerStatus(Z,e_,e,__);break;default:stManager.add([jsc("web/emoji.js")],function(){Z=Z?'<span class="current_text">'+Emoji.emojiToHTML(Z,!0)+"</span>":Z,wall.updateOwnerStatus(Z,e_,e,__)})}break;case"upd_ci_cnt":var n_=ge("current_info"),c_=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(e[2]),d_=n_||ge("page_current_info"),E_=d_&&geByClass1("current_audio_cnt",d_);E_&&(E_.tt&&E_.tt.destroy(),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(E_,"hidden",0==c_),Object(_lib_fx__WEBPACK_IMPORTED_MODULE_11__.c)(E_,Object(_lib_lang__WEBPACK_IMPORTED_MODULE_13__.i)(c_,"%s",!0),{str:"auto"}));break;case"cover_updated":var p_=geByClass1("_page_cover");if(p_&&e[2]){var O_=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.J)(),u_=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.y)()?e[3]:e[2];O_.src=u_,O_.onload=function(){p_.style.backgroundImage="url('"+u_+"')",Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(O_)}}}d&&(_?E<0:l+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)("page_header_cont")[1]>E)&&(l+=d)}}),l!=i&&i>100&&!o.onepost&&(_?wkLayerWrap.scrollTop=l:Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.g)(l,0,!1,!0)),Wall.update())}},updateOwnerStatus:function(_,e,t,o){o&&(_='<span class="'+(_?"my_current_info":"no_current_info")+'">'+(_||getLang("change_current_info"))+"</span>",Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(e.parentNode.nextSibling,_),!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)("currinfo_editor")&&cur.oid>0&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ub)("currinfo_audio","app"!=t[3]),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ub)("currinfo_app","app"==t[3]),addClass("currinfo_app","on")));Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(e,_)},updateMentionsIndex:function(_){if(clearTimeout(cur.wallUpdateMentionsIndexTO),_){var e={},t=[],o=new RegExp("^(https?://(vk.com|"+location.host.replace(/\./,"\\.")+"))?/?"),i=[];each(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("author",bodyNode,"a"),function(){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(this),i=this.href.replace(o,"");if(void 0===e[i]){var l=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(this.getAttribute("data-from-id"));l&&l!=vk.id&&(e[i]=t.length,t.push([l,_,"@"+i,"/images/camera_c.gif"]))}}),i=(i=i.concat(Array.prototype.slice.apply(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("post_image",bodyNode,"a")))).concat(Array.prototype.slice.apply(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("reply_image",bodyNode,"a"))),each(i,function(){var _=this.href.replace(o,""),i=e[_];if(void 0!==i){for(var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(this);l&&"IMG"!=l.tagName;)l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(l);l&&(t[i][3]=l.getAttribute("src"),delete e[_])}}),cur.wallMentions=t}else cur.wallUpdateMentionsIndexTO=setTimeout(wall.updateMentionsIndex.pbind(!0),300)},initUpdates:function(_){if(_&&window.Notifier){var e=cur.wallAddQueue,t=function(){cur.wallAddQueue&&Notifier.addKey(cur.wallAddQueue,Wall.updated.pbind(!1))};if(cur.wallAddQueue=_,t(),!e){var o=setInterval(t,1e4);cur.destroy.push(function(){clearInterval(o)})}}},initWallOptions:function(_){extend(cur,{wallType:_.wall_type,wallTpl:_.wall_tpl,wallMyDeleted:{},tsDiff:_.wall_tpl&&_.wall_tpl.abs_timestamp?900*Math.round((Date.now()/1e3-_.wall_tpl.abs_timestamp)/900):0,wallMyOpened:{},wallMyReplied:{},wallMentions:[],wallMyRepliesCnt:0,wallUploadOpts:_.upload,wallUploadVideoOpts:_.upload_video,hasGroupAudioAccess:_.hasGroupAudioAccess,wallAdsReplacedFeatureTooltip:_.ads_replaced_feature_tooltip,wallAdsReplacedFeatureTooltipHash:_.ads_replaced_feature_tooltip_hash}),_.wall_tpl&&_.wall_tpl.lang&&(cur.lang=extend(cur.lang||{},_.wall_tpl.lang)),window.Notifier&&Notifier.addRecvClbk("wall_reply_multiline","wall",function(_){Wall.onReplySubmitChanged(_.value,1)},!0)},onPostLoaded:function(_,e){_=ge(_),Wall.onAdBlockLoaded(_,e),e&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"_post")&&(_=geByClass1("_post",_)),_&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"_post")&&cur.onPostLoaded&&cur.onPostLoaded(_)},onAdBlockLoaded:function(_,e){var t=void 0;Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"_ads_block_data_w")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"_ads_promoted_post_data_w")?t=_:e&&(t=geByClass1("_ads_block_data_w",_)||geByClass1("_ads_promoted_post_data_w",_)),t&&Wall.triggerAdStat(t,"load")},init:function(_){Wall.initWallOptions(_),extend(cur,{wallInited:!0,postField:ge("post_field"),wallSearch:ge("wall_search"),wallPage:ge("profile")||ge("group")||ge("public"),wallPageNarrow:ge("narrow_column"),wallUploadOpts:_.upload||!1,deletedCnts:{own:0,all:0,archive:0},posterFeatureTooltip:_.poster_feature_tooltip,posterFeatureTooltipHash:_.poster_feature_tooltip_hash,postCopyrightFeatureTooltip:_.post_copyright_feature_tooltip,postCopyrightFeatureTooltipHash:_.post_copyright_feature_tooltip_hash}),cur.destroy.push(function(_){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.g)(_.postField)});var e=removeEvent.pbind(document,"click",Wall.hideEditPostReply);cur._back?(cur._back.hide.push(e),cur._back.show.push(e),cur._back.show.push(addEvent.pbind(document,"click",Wall.hideEditPostReply))):cur.destroy.push(e),cur.wallTab=cur.wallType,Wall.update(),Wall.initUpdates(_.add_queue_key),_.wall_tpl&&(cur.timeUpdateInt=setInterval(function(){Wall.updateTimes(_.wallCont)},1e4),cur.destroy.push(function(){clearInterval(cur.timeUpdateInt)}));var t=window;addEvent(t,"scroll",Wall.scrollCheck),addEvent(window,"resize",Wall.scrollCheck),cur.destroy.push(function(){removeEvent(t,"scroll",Wall.scrollCheck),removeEvent(window,"resize",Wall.scrollCheck)}),cur.wallAutoMore=_.automore;var o=!1;if(cur.options.no_draft||(o=_.draft||cur.oid!=vk.id&&Wall.getOwnerDraft(cur.oid)),Wall.initPostEditable(o),cur.wallSearch&&placeholderInit(cur.wallSearch),removeEvent(document,"click",Wall.hideEditPostReply),addEvent(document,"click",Wall.hideEditPostReply),_.poster_options&&Wall.initPosterEditor(_.poster_options),_.media_types){cur.wallAddMedia=new MediaSelector(ge("page_add_media"),"media_preview",_.media_types,extend({onAddMediaChange:function(_){if(cur.postCopyrightFeatureTT&&cur.postCopyrightFeatureTT.hide(),Wall.hidePosterFeatureTooltip(),Wall.postChanged(10),"poll"!=_&&wall.focusOnEnd(),cur.oid!=vk.id){var e=Array.prototype.slice.call(arguments);e.unshift(cur.oid),Wall.saveOwnerDraftMedia.apply(window,e)}setTimeout(Wall.checkPosterAvailability)},onMediaChange:function(){Wall.postChanged()},onMediaUploadStarted:function(){Wall.postChanged()},editable:1,from:"post",sortable:1,poster:cur.poster},_.media_opts||{}));var i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(cur.wallAddMedia.menu.menuNode,"_type_podcast"),l=ge("official");i&&l&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("_submit_post_box",l),"from-oid")!=cur.postTo&&hide(i)}if(ge("post_visibility_btn")&&Wall.createVisibilityPostTooltip(cur.wallAddMedia.id),cur.withUpload=window.WallUpload&&!browser.safari_mobile&&inArray(cur.wallType,["all","own","feed","full_all","ads_promoted_stealth"])&&Wall.withMentions&&cur.wallUploadOpts,cur.withUpload&&WallUpload.checkDragDrop()){var a=function(){removeEvent(document,"dragover dragenter drop dragleave",n)},r=!1,s=!1,n=function(_){if(!1!==r&&(clearTimeout(r),r=!1),cur.uploadInited)return a(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(_);switch(_.type){case"drop":s=!1,delete cur.wallUploadFromDrag,hide("post_upload_dropbox");break;case"dragleave":r=setTimeout(function(){s=!1,delete cur.wallUploadFromDrag,hide("post_upload_dropbox")},100);break;case"dragover":case"dragenter":s||2==(s=!_.target||"IMG"!=_.target.tagName&&"A"!=_.target.tagName?2:1)&&setTimeout(WallUpload.initCallback,0),2==s&&(cur.wallUploadFromDrag=1)}return Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(_)};addEvent(document,"dragover dragenter drop dragleave",n),cur.destroy.push(a)}Wall.updateMentionsIndex(),_.top_wall_feature_tooltip?setTimeout(function(){Wall.showTopWallTooltip(_.top_wall_feature_tooltip_hash)},800):_.order_feature_tooltip&&setTimeout(function(){Wall.showOrderTooltip(_.order_feature_tooltip_hash)},800)},initPosterEditor:function(_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)('<div class="page_block"></div>'),t=Wall.getMainPostBlock();"feed"===cur.module&&addClass(e,"feed_post_field_wrap");var o=function(){return!1},i=function(){Wall.closeFancyTooltipsInPost(),Wall.openPosterEditor(),cur.poster.sendStatsInfo("open")},l={onPreOpen:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.v)(e,t)},onPostOpen:function(){var _=cur.poster.getTextInputEl();Wall.restoreCaretPositionForPoster(_)},onPreHide:function(){Wall.saveCaretPositionForPoster(cur.poster.getTextInputEl()),Wall.closeFancyTooltipsInPost();var _=ge("submit_post_error"),e=ge("submit_post_box"),t=ge("post_actions_btns");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(cur.postField).appendChild(t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(_)&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.v)(_,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(e))},onPostHide:function(){var _=ge("post_settings_btn"),o=cur.options.suggesting&&ge("check_sign");_&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(_,cur.openPosterBtn),o&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(o,cur.openPosterBtn),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(t);var i=cur.poster.getTextAsHtml();i&&i.match(Emoji.emojiRegex)&&(i=i.replace(Emoji.emojiRegex,Emoji.emojiReplace)),cur.postField.innerHTML=i,Wall.restoreCaretPositionForPoster(cur.postField),setTimeout(function(){Composer.updateArticleConvertSuggest(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(cur.postField,"composer"))}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(e)},onPreUploaderOpen:function(){var _=cur.poster.getTextInputEl();Wall.saveCaretPositionForPoster(_)},onPostUploaderClose:function(){var _=cur.poster.getTextInputEl();Wall.restoreCaretPositionForPoster(_)},onOverTextLimit:function(){Wall.disablePoster(!0),cur.poster.closeEditor(),cur.poster.sendStatsInfo("auto_disable"),cur.poster.state.toggled=!0},onChangeData:Wall.postChanged,onSend:function(_){Wall.sendPost(!0,_)},onDestroy:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(e)},getPostOwnerId:function(){return+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(ge("submit_post_box"),"from-oid")},width:Wall.getMainPostBlock().clientWidth,containerClasses:"poster_wall-creating",placeholder:attr(cur.postField,"placeholder"),appendToElem:e};cur.openPosterBtn=ge("page_poster_btn"),cur.poster=new Poster(_.poster_config,l),addEvent(cur.openPosterBtn,"click",i),addEvent(cur.openPosterBtn,"mousedown",o),cur.destroy.push(function(){removeEvent(cur.openPosterBtn,"click",i),removeEvent(cur.openPosterBtn,"mousedown",o)})},openPosterEditor:function(_){if(cur.poster&&!cur.poster.state.disabled&&!cur.poster.state.opened){_=_||{},cur.posterFeatureTT&&cur.posterFeatureTT.hide();var e=Wall.getMainPostBlock(),t=_.bkgId,o=window.browser.windows7||window.browser.windowsVista||window.browser.windowsXp;Wall.saveCaretPositionForPoster(cur.postField);var i=_.text||cur.postField.innerHTML;if(i=(i=i.replace(/\n/g,"<br/>")).replace(/<img[^>]*>/g,function(_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{innerHTML:_}).firstChild,t=Emoji.getCode(e);return t?o?" ":Emoji.codeToChr(t):_}),!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(e))return cur.poster.setBkg(t,!0),void cur.poster.setText(i);hide(e);var l=ge("post_settings_btn"),a=ge("submit_post_error"),r=cur.options.suggesting&&ge("check_sign"),s=cur.poster.getPostOptionsWrapperEl();if(l&&s.appendChild(l),r&&s.appendChild(r),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(a)){var n=cur.poster.getErrorWrapperElement();n.innerHTML="",n.appendChild(a)}var c=cur.poster.getBtnsWrapper(),d=ge("post_actions_btns");d&&(c.firstChild?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(d,c.firstChild):c.appendChild(d),d.children.length||c.children.length>1?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(c):hide(c)),cur.poster.setBkg(t,!0),cur.poster.setText(i),cur.poster.openEditor()}},checkPosterAvailability:function(){if(cur.poster){var _=cur.wallAddMedia?cur.wallAddMedia.getMedias():[],e=cur.poster.isTextFieldValid(cur.postField),t=Wall.checkAttachesForPoster(_),o=e&&t;!o!==cur.poster.state.disabled&&Wall.disablePoster(!o),o&&cur.poster.state.toggled&&(Wall.openPosterEditor(),cur.poster.sendStatsInfo("auto_enable"),cur.poster.state.toggled=!1)}},checkAttachesForPoster:function(_){if(!isArray(_))return!1;if(!_.length)return!0;var e=0;return _.some(function(_){if(isArray(_)){var t=_slicedToArray(_,1)[0];["copyright","postpone"].includes(t)||++e}}),0===e},disablePoster:function(_){cur.poster&&(void 0===_&&(_=!0),cur.poster.state.disabled=_,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(cur.openPosterBtn,"_disable",_))},isPosterEditorOpen:function(){return cur.poster&&cur.poster.isOpen()},saveCaretPositionForPoster:function(_){if(document.activeElement===_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("span"),t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("span");e.classList.add("poster__marker","poster__marker_start"),t.classList.add("poster__marker","poster__marker_end");var o=getSelection().getRangeAt(0);(o=o.cloneRange()).insertNode(e),o.collapse(!1),o.insertNode(t)}},restoreCaretPositionForPoster:function(_){var e=geByClass1("poster__marker_start",_),t=geByClass1("poster__marker_end",_);if(e&&t){var o=document.createRange();o.setStartBefore(e),o.setEndBefore(t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(e),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(t);var i=window.getSelection();i.removeAllRanges(),i.addRange(o)}else wall.focusOnEnd(_)},getMainPostBlock:function(){var _=cur.mainPostBlock;return _||(_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(ge("submit_post_box")),cur.mainPostBlock=_),_},changeAuthorInPoster:function(_){cur.poster&&_&&cur.poster.changeBkgAuthor({authorName:_.authorName,authorUrl:_.authorUrl})},sendInsertBeforeError:function(){ajax.post("al_page.php",{act:"insert_before_error",trace:(new Error).stack,owner_id:cur.oid,module:cur.module})},closeFancyTooltipsInPost:function(){var _=cur.wallAddMedia.lnkId;cur["postPostponeTT"+_]&&cur["postPostponeTT"+_].hide(),cur["postVisibilityTT"+_]&&cur["postVisibilityTT"+_].hide()},switchOwner:function(_){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(geByClass1("_ui_toggler",_),"on"),uiSearch.showProgress("wall_search"),cur.options.params.owners_only=cur.options.params.owners_only?null:1,nav.change({owners_only:cur.options.params.owners_only,offset:null})},fakeReplyAsGroupOver:function(_){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("reply_fakebox_with_official",_)&&wall.replyAsGroupOver(_)},fakeReplyAsGroupCheck:function(_,e,t){if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("reply_fakebox_with_official",_))return window.tooltips&&window.tooltips.hide(_),Wall.showEditReply(e,null,!1,!1,!0,function(){var _=ge("reply_as_group"+e);_&&(_.focus(),_.click())}),t&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(t)},setReplyAsGroup:function(_,e){if(!_)return!1;if(_.hasAttribute("data-reinit-ads-needs-confirmation")&&window.AdsEdit&&!e.reinitConfirmed&&AdsEdit.reinitCreatingPostFormNeeded())return AdsEdit.reinitCreatingPostFormConfirm(wall.setReplyAsGroup.pbind(_,extend({},e||{},{reinitConfirmed:!0}))),!1;var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("_submit_post_box",_),o=t&&ge("signed"),i=t&&ge("close_comments"),l=t&&ge("mute_notifications"),a=t&&ge("official"),r=t&&ge("mark_as_ads"),s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"tt"),n=e.from||(e.fromGroup?cur.oid:vk.id),c=n==vk.id?wall.replyAsProfileData():window.replyAsData&&window.replyAsData[n]||wall.replyAsGroupDomData(_);if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"from-oid")==n||!c||c[0]!=n)return!1;var d=ge("submit_post_box"),E=!t&&cur.poster&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("poster",_),p=t===d;E&&(t=d,o=ge("signed"),r=ge("mark_as_ads"),i=ge("close_comments"),l=ge("mute_notifications"),a=ge("official")),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"from-oid",n),wall.replyAsAnimate(t,c[2],c[1]),cur.poster&&(p||E)&&Wall.changeAuthorInPoster({authorName:c[3],authorUrl:c[2]}),s&&s.rows&&each(s.rows,function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(this,"active",Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(this,"from-oid")==n)}),o&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.e)(o,n>0),r&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.e)(r,n>0),i&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.e)(i,n>0),l&&(Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.l)(r)?(addClass(l,"on"),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.e)(l,1)):Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.e)(l,n>0)),a&&Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)(a,n!==vk.id),_.setAttribute("aria-label",getLang(n<0?"wall_reply_as_group":"wall_reply_as_user")),_.hasAttribute("data-replace-owner-name")&&(_.innerHTML=c[3],"A"===_.tagName&&(_.href=c[2])),_.hasAttribute("data-replace-post-to")&&(cur.postTo=c[0]),_.hasAttribute("data-replace-oid")&&(cur.oid=c[0]),_.hasAttribute("data-reinit-ads-post-editor")&&window.AdsEdit&&(e.withoutRedraw?AdsEdit.reinitCreatingPostFormBoundWithoutRedraw():AdsEdit.reinitCreatingPostFormBound()),"official"==_.id&&Wall.postChanged(!0),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.j)(geByClass1("submit_post_field",t),"td_update");var O=cur.wallAddMedia&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(cur.wallAddMedia.menu.menuNode,"_type_podcast");if(O){var u=cur.postTo==n;each(cur.wallAddMedia.getMedias()||[],function(_,e){if("podcast"===e[0])return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(e[2],"attach_disabled",!u),u=!1,!1}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ub)(O,u)}return!1},replyAsAnimate:function(_,e,t){var o=_&&geByClass1("_post_field_author",_),i=o&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("_post_field_image",o),l=_&&geByClass1("_post_field_official",_),a=l&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("_post_field_image",l),r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"author_secondary")?0:1;o&&i&&i[r]&&(o.href=e,i[r].src=t),a&&a[r]&&(a[r].src=t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(_,"author_secondary")},replyAsGroupOver:function(_){if(!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"checkbox_official")&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"reply_fakebox_wrap_image")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"disabled"))return!1;var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_submit_post_box",_),t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("deep_active",_),o=void 0;if(o=t&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("replies_wrap_deep",_)?[7,8,8]:t?[2,8,8]:[9,8,8],Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_3__.c)(_,{text:function(){return(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"from-oid")||vk.id)<0?getLang("global_on_behalf_group"):getLang("global_on_behalf_me")},black:1,shift:o}),!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"reply_fakebox_wrap_image")&&(wall.isWallReply(_)||wall.isAdsCreatingPost(_))){var i="/al_groups.php",l="get_editor_clubs";wall.isAdsCreatingPost(_)&&(i="/ads_edit.php",l="a_get_promoted_post_stealth_groups"),ajax.post(i,{act:l},{cache:1})}},replyAsGroupFocus:function(_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"tt");e&&e.isShown()||wall.replyAsGroupOver(_)},replyAsGroup:function(_,e){if(!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"checkbox_official")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"disabled"))return!1;if(!wall.isWallReply(_)&&!wall.isAdsCreatingPost(_)||window.replyAsList)wall.replyAsGroupTT(_,e);else{var t="/al_groups.php",o="get_editor_clubs";wall.isAdsCreatingPost(_)&&(t="/ads_edit.php",o="a_get_promoted_post_stealth_groups"),ajax.post(t,{act:o},{cache:1,onDone:function(t){window.replyAsList=t,window.replyAsData={},each(t,function(){window.replyAsData[this[0]]=this}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(_)&&wall.replyAsGroupTT(_,e)}})}},replyAsGroupDomData:function(_){var e=void 0,t=void 0,o=void 0,i=void 0,l=void 0;if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("replies_wrap_deep",_)){var a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",_),"post-id");a&&(e=ge("reply_box"+a)||ge("reply_fakebox"+a),t=a.split("_")[0])}else e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_submit_post_box",_),t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"oid");return e&&(o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"owner-photo"),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"owner-href"),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"owner-name")),t&&o&&i&&l&&[t,o,i,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.c)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.I)(l))]||cur.wallTpl&&cur.wallTpl.ownerData||!1},isWallReply:function(_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_submit_post_box",_);return e&&e.id.match(/reply_box(-?\d+)_(\d+)/)},isAdsCreatingPost:function(_){return!!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("ads_edit_ad_submit_post_header",_)},replyAsProfileData:function(){return window.cur&&cur.wallTpl&&cur.wallTpl.profileData||window.wkcur&&wkcur.wallTpl&&wkcur.wallTpl.profileData||window.mvcur&&mvcur.wallTpl&&mvcur.wallTpl.profileData},replyAsGroupList:function(_,e){var t=_.hasAttribute("data-disallow-profile")?[]:[wall.replyAsProfileData()],o=wall.replyAsGroupDomData(_);return o&&t.push(o),(wall.isWallReply(_)||wall.isAdsCreatingPost(_))&&each(window.replyAsList,function(){this[0]!=e&&t.push(this)}),t},replyAsGroupTT:function(_,e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"tt"),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_submit_post_box",_),i=o&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(o,"from-oid");if(!wall.replyAsProfileData())return!1;if(!t){var l=wall.replyAsGroupList(_,e),a="";_.hasAttribute("data-enable-search")&&(a+='<div class="post_from_tt_row_search_wrap"><input class="clear_fix post_from_tt_row post_from_tt_row_search" value="" placeholder="'+getLang("global_search")+'" /><div class="post_from_tt_row_search_progress"></div></div>');var r=function(_,e,t,o,i){return'<a id="_post_from_tt_row_oid_'+e+'" class="clear_fix post_from_tt_row _post_from_tt_row_searchable'+_+'" data-from-oid="'+e+'" href="'+t+'"><img class="post_from_tt_image" src="'+o+'" aria-label="'+i+'">'+i+"</a>"};each(l,function(){var _=i==this[0]?" active":"";a+=r(_,this[0],this[2],this[1],this[3])});var s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("deep_active",_);t=new ElementTooltip(_,{content:'<div class="post_from_tt_choose _post_scroll_wrap">'+a+"</div>",appendToParent:!0,autoHide:!0,customShow:!0,defaultSide:"bottom",offset:function(){return wall.isAdsCreatingPost(_)?[_.offsetWidth/2+8.5,-2]:s?[1,-5]:[-10,-5]},onFirstTimeShow:function(e){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("post_from_tt_row",e);each(o,function(e,t){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"post_from_tt_row_search")||addEvent(t,"click",wall.setReplyAsGroup.pbind(_,{from:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(this,"from-oid")}))});var i=geByClass1("post_from_tt_row_search",e);if(i){var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("_post_from_tt_row_searchable",e),a=_.getAttribute("data-search-url"),s={};addEvent(i,"keyup valueChanged",function(){var o=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.H)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(i)).toLowerCase();if(a&&o){_.searchRequestTimeout&&(clearTimeout(_.searchRequestTimeout),delete _.searchRequestTimeout);var n=geByClass1("post_from_tt_row_search_progress",e);geByClass1("pr",n)||Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.u)(n),_.searchRequestTimeout=setTimeout(function(){s[o]?Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.i)(n):ajax.plainpost(a,{str:o},function(i){s[o]=!0,i=JSON.parse(i),each(i,function(){if(!ge("_post_from_tt_row_oid_"+this[0])){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(r("",this[0],this[2],this[1],this[3]));geByClass1("ui_scroll_content",e).appendChild(t),addEvent(t,"click",wall.setReplyAsGroup.pbind(_,{from:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"from-oid")})),window.replyAsData[this[0]]||(window.replyAsData[this[0]]=this)}}),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("_post_from_tt_row_searchable",e),setTimeout(function(){t.scroll.update(),t.updatePosition()},0),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.i)(n)},function(){Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.i)(n)})},500)}each(l,function(_,e){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ub)(e,""===o||-1!==e.innerText.toLowerCase().indexOf(o))})})}this.rows=o,this.scroll=new uiScroll(geByClass1("_post_scroll_wrap",e)),setTimeout(function(){t.scroll.update(),t.updatePosition()},0)},onShow:function(_){setTimeout(function(){if(t.scroll){var e=geByClass1("active",_),o=e?e.offsetTop-(t.scroll.data.viewportHeight-Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(e)[1])/2:0;t.scroll.scrollTop(o);var i=geByClass1("post_from_tt_row_search",_);i&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.E)(i)}},0)},onHide:function(_){var e=geByClass1("post_from_tt_row_search",_);e&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(e,"")}}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"tt",t)}e&&t.isShown()&&!_.hasAttribute("data-disallow-profile")&&wall.setReplyAsGroup(_,{from:i==vk.id?e:vk.id}),_.tt&&_.tt.hide&&_.tt.hide(),t.isShown()||t.show()},reportPost:function(_,e,t){stManager.add(["privacy.js","privacy.css"],function(){return Privacy.show(_,e,"report_"+t)})},parsePostId:function(_){var e=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/);return{type:e[3]||"wall",id:e[1]+"_"+e[4]}},likeIt:function(_,e,t,o){if(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.i)(o),!vk.id)return!1;if(cur.viewAsBox)return cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(o);var i=wall.parsePostId(e),l=i.type,a=i.id,r=_&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_post_content",_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",_))||wall.domPost(a),s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(r,"_like_wrap"),n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(s,"_count"),c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(s,"my_like"),d=void 0;d=e==cur.wallLayer?"wkview":cur.wallType?"feed"==cur.wallType?"news"==cur.section?"feed_"+(cur.subsection?cur.subsection:cur.section):"recommended"==cur.section?"feed_recommended"+("recent"!=cur.subsection?"_"+cur.subsection:""):"friends"==cur.section||"groups"==cur.section||"videos"==cur.section||"photos"==cur.section?"feed_"+cur.section+(cur.subsection?"_"+cur.subsection:""):"feed_"+cur.section:"top"==cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module,ajax.post("like.php",{act:c?"a_do_unlike":"a_do_like",object:l+a,hash:t,wall:2,from:d},{onDone:Wall.likeFullUpdate.pbind(_,e),onFail:function(){return!0}});var E=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.G)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(n)).replace(/(\s|,)/g,"");return Wall.likeUpdate(_,e,!c,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(E)+(c?-1:1)),"wall"==l&&window.cur.onPostLike&&window.cur.onPostLike(_,e,c),cur.onWallLike&&cur.onWallLike(),"wall"==l&&Wall.triggerAdStat(a,"like_post"),!1},likesShow:function(_,e,t){if(!_.postDontShowLikes){t=t||{};var o=wall.parsePostId(e),i=o.type,l=o.id,a=i+l,r=_&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_post_content",_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",_))||wall.domPost(l),s=t.views?"_views_wrap":t.share?"_share_wrap":"_like_wrap",n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(r,s),c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"_feedback_info_item")?_:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(n,"_icon"),d=r&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(r,"_share_wrap");if(c&&!cur.viewAsBox){var E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(n)[0],p=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(c)[0],O=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(c,!0)[0],u=p+O/2-E-41,b=t.views?{views:1}:t.share?{published:1}:{};if(t.listId&&(b.list=t.listId),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(c,"_feedback_info_item")){var P=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.J)("em",c);u=-40,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(c,"feedback_share")&&(u+=7),u+=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(P)[0]/2}var M=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(c,"_feedback_info_item")?c:c.parentNode;Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_3__.c)(M,{url:"/like.php",params:extend({act:"a_get_stats",object:a,has_share:d?1:""},b),slide:15,shift:[-u,t.views?2:"wall_reply"==i?-3:7],ajaxdt:100,showdt:400,hidedt:200,dir:"auto",checkLeft:!0,reverseOffset:80,noZIndex:!0,tip:{over:function(){Wall.likesShow(_,e,t)}},onShowStart:function(){var e=M.tt.container;setTimeout(function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.qb)(e,{left:floatval(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.O)(e,"left"))+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(c)[0]-p})},10),Object(_lib_stats__WEBPACK_IMPORTED_MODULE_9__.c)("likes_show",Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"shown"))},typeClass:"like_tt",className:t.cl||""})}}},likesShowList:function(_,e,t){t=t||{};var o=wall.parsePostId(e),i=o.type,l=o.id,a=i+l,r=_&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_post_content",_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",_))||wall.domPost(l),s=t.share?"_share_wrap":"_like_wrap",n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(r,s);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.j)(n,"_icon")&&!cur.viewAsBox&&Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_1__.B)({w:(t.views?"views":t.share?"shares":"likes")+"/"+Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.c)(a)},!1,!1,{queue:1})},sharesShow:function(_,e,t){Wall.likesShow(_,e,extend(t,{share:1}))},viewsShow:function(_,e,t){Wall.likesShow(_,e,extend(t,{views:1}))},sharesShowList:function(_,e,t){Wall.likesShowList(_,e,extend(t,{share:1}))},viewsShowList:function(_,e,t){Wall.likesShowList(_,e,extend(t,{views:1}))},viewsUpdate:function(_,e){var t=wall.parsePostId(e),o={act:"a_get_stats",object:t.type+t.id,views:1};ajax.post("/like.php",o,{cache:1,onDone:function(t,i){Wall.likeUpdate(!1,e,!1,t,void 0,void 0,1);var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{innerHTML:i});_.setAttribute("title",l.innerText||l.textContent),setTimeout(ajax.invalidate.pbind("/like.php",o),3e3)}})},sharesOpen:function(_,e,t){if(cur.viewAsBox)return cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(_);if(!vk.id)return!1;Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.i)(_);var o=wall.parsePostId(e),i=o.type,l=o.id,a=i+l;return Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.b)("/like.php",extend({act:"publish_box",object:a},t)),"wall"==i&&Wall.triggerAdStat(l,"share_post"),!1},customCur:function(){return window.wkcur&&wkcur.shown?wkcur:window.mvcur&&mvcur.mvShown?mvcur:window.pvcur&&cur.pvShown?pvcur:cur},processPostReplyActions:function(_){},updatePostAuthorData:function(_){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("_post_author_data_"+_).forEach(function(_){_.post_author_data_update=!0})},closeComments:function(_,e,t,o,i){var l=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"closed"))?0:1;ajax.post("al_wall.php",{act:"close_comments",owner_id:e,post_id:t,close:l,hash:o},{onDone:function(){if(i)i(l);else{var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",_);Wall.onCloseComments(l,e)}}})},onCloseComments:function(_,e,t){if(e&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(e,"postponed")&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(e,"post")&&!vk.widget){var o=geByClass1("comment",e),i=geByClass1("reply_box_inner_wrap",e),l=cur.pgParams&&cur.pgParams.archive||"wall_archive"===cur.module;if(t||o&&i){l||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(e,"closed_comments",_);var a=geByClass1("action_closing_comments",e);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(a,"closed",_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(a,getLang(_?"wall_open_comments":"wall_closing_comments"))}else{var r=e.id.replace("post","").split("_");ajax.post("al_wall.php",{act:"comment_box",owner_id:r[0],post_id:r[1]},{onDone:function(t,o){if(!l){var i=geByClass1("comment",e),a=geByClass1("reply_box_inner_wrap",e);if(!i&&t){var r=geByClass1("like",e);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.v)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.y)(r))}if(!a&&o){var s=geByClass1("replies_list",e);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.v)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(o),s)}}Wall.onCloseComments(_,e,!0)}})}}},showPostEditedTime:function(_){var e=(cur.lang||{}).wall_changed;if(e){var t=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"time")),o=60*((new Date).getTimezoneOffset()+180);t&&Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_3__.c)(_,{text:e.replace("{time}",Object(_lib_lang__WEBPACK_IMPORTED_MODULE_13__.c)(t,o)),black:1,shift:[0,4]})}},showPostAuthorData:function(_,e){var t=_.className.match(/_post_author_data_(-?\d+_\d+)/)[1]||"",o=e?e.target:window.event.srcElement;!t||o!=_&&o.onmouseover||(_.post_author_data_update&&(delete _.post_author_data_update,_.post_author_data_tt&&(_.post_author_data_tt.destroy(),_.post_author_data_tt=!1)),_.post_author_data_tt||ajax.post("al_page.php",{act:"post_author_data_tt",raw:t},{onDone:function(e){var o=geByClass1("post_link",_)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(_);if(e&&o){var i={content:e,arrowSize:"mini",cls:"post_author_data",defaultSide:"bottom",align:"left",id:"author_tt_"+t},l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("_im_mess_stack",_);l?i.appendTo=l:i.appendToParent=!0,vk.widget&&(i.offset=[0,-2],i.forceSide="bottom"),_.post_author_data_tt=new ElementTooltip(o,i),_.post_author_data_tt.show()}else _.post_author_data_tt=!0}}))},hideAdsReplacedTT:function(){cur.adsReplacedFeatureTT.destroy(),cur.wallAdsReplacedFeatureTooltip=null,cur.adsReplacedFeatureTT=null,ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.wallAdsReplacedFeatureTooltipHash,type:"ads_in_post_replaced"})},showAdsReplacedTooltip:function(){if(!cur.adsReplacedFeatureTT){var _=setTimeout(function(){var _=geByClass1("addpost_opt");_&&(cur.adsReplacedFeatureTT=new ElementTooltip(_,{content:'<div class="ads_replaced_feature_tt__close" onclick="cur.adsReplacedFeatureTT.hide();"></div>'+getLang("global_ads_in_post_replaced"),forceSide:"top",cls:"feature_intro_tt ads_replaced_feature_tt",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendTo:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_),offset:[1,-10],onHide:Wall.hideAdsReplacedTT}),cur.adsReplacedFeatureTT.show())},800);cur.destroy.push(function(){clearTimeout(_)}),cur.destroy.push(function(){cur.adsReplacedFeatureTT&&cur.adsReplacedFeatureTT.destroy()})}},createVisibilityPostTooltip:function(_){_=_||"";var e=ge("post_visibility_btn"+_),t=geByClass1("post_action_tt_content",e),o=geByClass1("post_action_btn_layout",e),i=t.children;radioBtns["post_settings_btn"+_]={val:!1,els:i};var l=[-12*(vk.rtl?-1:1),7],a=new ElementTooltip(o,{appendTo:e,forceSide:"bottom",autoShow:!1,cls:"eltt_fancy eltt_fancy_actions",noOverflow:!1,centerShift:0,offset:l,content:t,align:"left",onFirstTimeShow:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(t)}});cur["postVisibilityTT"+_]=a,cur.destroy.push(function(){a&&a.destroy()})},showTopWallTooltip:function(_){if(!cur.topWallFeatureTT){var e=ge("page_wall_top");e&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(e)||(e=ge("page_wall_top_more")),e&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ab)(e)&&(cur.topWallFeatureTT=new ElementTooltip(geByClass1("ui_tab",e)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("ui_tab",e),{content:'<div class="feature_tooltip__close" onclick="cur.topWallFeatureTT.hide();"></div>'+getLang("wall_top_feature_text"),forceSide:"top",cls:"feature_intro_tt feature_info_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendTo:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.n)("page_block",e),onHide:function(){ajax.post("al_index.php",{act:"hide_feature_tt",hash:_,type:"top_wall_web"})}}),cur.topWallFeatureTT.show())}},hidePostCopyrightFeatureTooltip:function(){cur.postCopyrightFeatureTooltip&&cur.postCopyrightFeatureTooltipHash&&(cur.postCopyrightFeatureTooltip=!1,cur.postCopyrightFeatureTT.hide(),setTimeout(function(){cur.postCopyrightFeatureTT.destroy()},ElementTooltip.FADE_SPEED),ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.postCopyrightFeatureTooltipHash,type:"post_copyright"}))},showPostCopyrightFeatureTooltip:function(){if(cur.postCopyrightFeatureTooltip&&!cur.postCopyrightFeatureTT){var _=setTimeout(function(){var _=ge("post_settings_btn");_&&cur.postCopyrightFeatureTooltip&&(cur.postCopyrightFeatureTT=new ElementTooltip(_,{content:'<div class="feature_tooltip__close" onclick="Wall.hidePostCopyrightFeatureTooltip();"></div>'+getLang("wall_post_copyright_feature_text"),cls:"feature_intro_tt feature_info_tooltip",forceSide:"bottom",autoShow:!1,noOverflow:!1,noHideOnClick:!0,appendToParent:!0,offset:[-6.5,-8],onShow:function(){ajax.post("al_index.php",{act:"show_feature_tt",hash:cur.postCopyrightFeatureTooltipHash,type:"post_copyright"})},onWindowClick:function(){cur.postCopyrightFeatureTT&&(cur.postCopyrightFeatureTT.hide(),cur.postField.blur())}}),cur.postCopyrightFeatureTT.show())},800);cur.destroy.push(function(){return clearTimeout(_)})}},hidePosterFeatureTooltip:function(){cur.posterFeatureTooltip=!1,cur.posterFeatureTT&&cur.posterFeatureTooltipHash&&(cur.posterFeatureTT.destroy(),cur.posterFeatureTT=null,ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.posterFeatureTooltipHash,type:"poster_new_year"}))},showPosterFeatureTooltip:function(){if(cur.posterFeatureTooltip){var _=setTimeout(function(){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.C)(".poster__open-btn",ge("page_poster_btn"));if(_&&cur.posterFeatureTooltip){var e='<div class="poster_feature_tt__layout" onclick="cur.posterFeatureTT.hide(); cancelEvent(event);"><div class="poster_feature_tt__close"></div><div class="poster_feature_tt__info">'+getLang("wall_new_posters_new_year")+"</div>";cur.posterFeatureTT=new ElementTooltip(_,{content:e,forceSide:"bottom",cls:"eltt_fancy poster_feature_tt",autoShow:!1,noOverflow:!1,align:"left",centerShift:-28,noHideOnClick:!0,appendToParent:!0,offset:[0,-8],onHide:Wall.hidePosterFeatureTooltip,onWindowClick:function(){cur.posterFeatureTT.hide(),cur.postField.blur()}}),cur.posterFeatureTT.show(),cur.poster&&cur.poster.sendStatsInfo("new_bkg_tooltip_show")}},800);cur.destroy.push(function(){clearTimeout(_)})}},friendsRecommInit:function(_,e){if(_){e=e||{};var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"from")||"user_rec",o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"code"),i={scrollY:!1,onViewItem:function(_,o){e.checkViewItem&&!e.checkViewItem(_)||Wall.onViewFriendRecomm(_,o,t)},onDestroy:function(){e.onDestroy&&e.onDestroy()}};Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"next")&&(i.onLoadMore=function(){ajax.post("al_friends.php",{act:"a_recomm_friends_gallery",next:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"next"),track_code:o,friend_id:e.friendId||0},{onDone:function(e,t){var o=[];e&&(o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.m)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.e)("div",{innerHTML:e}))),uiGetGallery(_).addMore(o,!t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"next",t||null)}})}),new UIGallery(_,i)}},onViewFriendRecomm:function(_,e,t){if(!_.viewed&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"ui_gallery_item")){var o=+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"uid"),i="feed"===cur.module&&feed?feed.getModuleRef():cur.module,l=Wall._friendsRecommGetTrackCode(_);Wall.friendsRecommLogSave(["show_user_rec",o,Date.now(),e,i,t,l]),_.viewed=!0}},toggleRecommFriend:function(_,e,t){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("friend_recomm_card",_),i=o&&+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(o,"uid");if(i){var l={act:"add",mid:i,hash:t,from:"user_rec",ref:"feed"===cur.module&&feed?feed.getModuleRef():cur.module,track_code:Wall._friendsRecommGetTrackCode(o),ts:Date.now()},a=Wall.friendsRecommLogGet(!0,i);return a.length&&(Wall.friendsRecommLogClear(i),l.logs=a),ajax.post("al_friends.php",l,{onDone:function(e){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(_,e),addClass(_,"secondary"),Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.f)(_,!0),addClass(o,"friend_recomm_card_accepted"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(geByClass1("wall_card_text_special",o))},onFail:function(_){if(a&&Wall.friendsRecommLogOnFail(a),_)return Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.d)(getLang("global_error"),_),!0},showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o.pbind(_),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w.pbind(_)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(e),!1}},hideRecommFriend:function(_,e,t){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("friend_recomm_card",_),i=o&&+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(o,"uid");if(i){var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("ui_gallery",_),a="feed"===cur.module&&feed?feed.getModuleRef():cur.module,r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(o,"code")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(l,"code")||"";return ajax.post("al_friends.php",{act:"hide_possible",mid:i,ref:a,track_code:r,hash:t},{onDone:function(){var e=uiGetGallery(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("ui_gallery",_));if(e){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("ui_gallery_item",_);e.removeItem(t)}},onFail:function(_){if(_)return Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.d)(getLang("global_error"),_),!0},showProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.o.pbind(_),hideProgress:_lib_ui__WEBPACK_IMPORTED_MODULE_5__.w.pbind(_)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(e),!1}},onClickRecommFriend:function(_){if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"ui_gallery_item")||(_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("ui_gallery_item",_)),_){var e=+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"uid"),t="feed"===cur.module&&feed?feed.getModuleRef():cur.module,o=Wall._friendsRecommGetTrackCode(_);Wall.friendsRecommLogAddVisited(e,t,o),Wall.friendsRecommLogSave(["open_user",e,Date.now(),t,o])}},_friendsRecommGetTrackCode:function(_){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"code"),t=void 0;return e||(t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("ui_gallery",_),e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"code")),e||""},friendsRecommLogSave:function(_,e){var t=Wall.friendsRecommLogGet();t.push(_),_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.set("friends_recomm",t),Wall.friendsRecommLogSend(e)},friendsRecommLogGet:function(_,e,t){var o=_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.get("friends_recomm")||[];return e&&(o=o.filter(function(_){return(t?_[1]!==e:_[1]===e)&&inArray(_[0],["show_user_rec","open_user"])})),_&&(o=o.map(function(_){return _.join("|")})),o},friendsRecommLogClear:function(_){if(_){var e=Wall.friendsRecommLogGet(!1,_,!0);e.length?_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.set("friends_recomm",e):_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.remove("friends_recomm")}else _lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.remove("friends_recomm");Wall.friendsRecommLogCleanVisited(_)},friendsRecommLogAddVisited:function(_,e,t){var o=_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.get("friends_recomm_visited")||{};o[_]={ref:e,trackCode:t},_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.set("friends_recomm_visited",o)},friendsRecommLogCheckVisited:function(_){return(_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.get("friends_recomm_visited")||{})[_]},friendsRecommLogCleanVisited:function(_){if(_){var e=_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.get("friends_recomm_visited")||{};delete e[_],_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.set("friends_recomm_visited",e)}else _lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.remove("friends_recomm_visited")},friendsRecommLogSend:function(_){!cur.friendsRecommLogIdle&&window.curNotifier&&curNotifier.idle_manager&&(isArray(cur.onIdle)||(cur.onIdle=[]),isArray(cur.onUnidle)||(cur.onUnidle=[]),cur.friendsRecommLogIdle=function(){clearTimeout(cur.friendsRecommLog)},cur.onIdle.push(cur.friendsRecommLogIdle),cur.onUnidle.push(Wall.friendsRecommLogSend)),clearTimeout(cur.friendsRecommLog),_?Wall._friendsRecommLogSend():cur.friendsRecommLog=setTimeout(Wall._friendsRecommLogSend,1e4)},_friendsRecommLogSend:function(){if(!cur.friendsRecommProcess){var _=Wall.friendsRecommLogGet(!0);_.length&&(cur.friendsRecommProcess=!0,Wall.friendsRecommLogClear(),ajax.post("al_friends.php",{act:"a_recomm_logs",logs:_},{onDone:function(){delete cur.friendsRecommProcess},onFail:function(){return Wall.friendsRecommLogOnFail(_),delete cur.friendsRecommProcess,!0}}))}},friendsRecommLogOnFail:function(_){var e=Wall.friendsRecommLogGet();e=_.map(function(_){return _.split("|")}).concat(e),_lib_ls__WEBPACK_IMPORTED_MODULE_6__.a.set("friends_recomm",e)},replyEditPhoto:function(_,e,t){return Wall.showEditReply(e,null,!1,!1,!1,function(){var t=ge("reply_more_attaches"+e);if(t){var o=geByClass1("ms_item_photo",t);tooltips.hide(_),o&&o.click()}}),t&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(t)},replyMoreAttachShow:function(_,e,t){return Wall.showEditReply(e,null,!1,!1,!0,function(){var _=geByClass1("ms_items_more_wrap",ge("reply_more_attaches"+e));_&&(_.focus(),_.click())}),t&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.c)(t)},replyFakeEmojiOver:function(_){wall.initEditReply(_,!1,!0,function(){var e=ge("reply_smile"+_);if(e){var t=geByClass1("emoji_smile",e);t&&t.onmouseover()}})},hideDeepReplies:function(_){var e=ge("post"+_);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(e,"reply")&&(e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",e),_=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"post-id"));var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"replies-offset")||0,o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"replies-limit")||3,i=ge("replies"+_),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(cur.wallTpl.reply_deep_next,{post_id:_,reply_id:_,offset:t,count:o,text:"",class:" replies_next_main"}));i.innerHTML="",i.appendChild(l),Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_10__.g)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(i)[1]-100,0,null,!0),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(l,"collapse",!0),l.click(),cur.wallMyOpened[_]=0},addNewReply:function(_){var e=_[2],t=(_[10]||"").match(/wall.showReply\([^-)0-9]*(-?[_0-9]+)[^-)0-9]*(-?[_0-9]+)[^-)0-9]*\)/),o=t&&t[2]||"",i=o&&o!==e,l=cur.wallLayer&&cur.wallLayer===e,a=l?ge("replies"+e):ge("post"+e),r=a.offsetHeight,s=0,n=0,c=void 0;c=i?wall._addDeepReply(_,o):wall._addRootReply(_);var d=l?ge("wl_post"):ge("post"+e);return wall.incReplyCounter(d,1,_[13]),l?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(geByClass1("wl_replies_wrap",d)),cur.count++,cur.loaded++):(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)("replies_wrap"+e),Wall.repliesSideSetup(e)),Wall.updateMentionsIndex(),c&&(s=a.offsetHeight-r,n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(c,l)[1]),[s,n]},_addDeepReply:function(_,e){var t=_[2],o=_[10]||"",i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(o),l=i&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(i,"root-id")||e,a=ge("post"+l),r=a&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("replies_wrap_deep",a),s=cur.wallLayer&&cur.wallLayer===t?wkcur:cur,n=void 0;if(r&&(l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(r,"post-id"),a=ge("post"+l)),!a)return null;var c=ge("replies"+l);if(!c){wall.addDeepRepliesBlock(l);var d=ge("reply_fakebox"+l)||ge("reply_box"+l);d&&hide(d),n=c=ge("replies"+l)}if(!c)return null;if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("reply",c).length){var E=wall._addNewReplyShowMore(t,l,c,"replies_next_deep");n=n||E}else{var p=ge("replies_short_deep"+l),O=wall.isDescRepliesOrder(t);if(p){var u=geByClass1("replies_short_text_count",p),b=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(u).replace(/[^0-9]/g,""))||0;Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(u,getLang("global_replied_to_reply_count",b+1))}else{p=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(s.wallTpl.reply_deep_short,{post_id:t,reply_id:l,reply_msg_id:l.split("_")[1],img_src:_[6]||"",name:_[5]||"",count:getLang("global_replied_to_reply_count",1)}));var P=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(c);if(P)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(p,P),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(P,"replies_next_deep")&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.vb)(P,"replies_prev",O);else{c.appendChild(p);var M=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(s.wallTpl.reply_deep_next,{post_id:t,reply_id:l,offset:0,count:1,text:getLang("wall_next_n_replies",1),class:" replies_next_deep"+(O?" replies_prev":"")}));c.appendChild(M)}}addClass(r,"replies_deep_has_short"),n=p}return removeClass(r,"replies_deep_empty_list"),n},_addRootReply:function(_){var e=_[2],t=cur.wallLayer&&cur.wallLayer===e,o=t?wkcur:cur,i=ge("replies"+e),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.m)(i).length,a="full"===o.wallType,r=!l||l<3&&(t||a),s=wall.isDescRepliesOrder(e);if(r){var n=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.r)(_[_.length-1]),c=void 0!==o.options.is_admin?o.options.is_admin:o.options.wall_oid<0?8&n?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&n?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Wall.getNewReplyHTML(_,c,!1,o));return Object(_lib_legacy__WEBPACK_IMPORTED_MODULE_15__.k)(d),s&&i.firstChild?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(d,i.firstChild):i.appendChild(d),d}return wall._addNewReplyShowMore(e,e,i,"replies_next_main",s)},_addNewReplyShowMore:function(_,e,t,o,i){var l=cur.wallLayer&&cur.wallLayer===_?wkcur:cur,a=l.options.replies_page_count||20,r=i?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.u)(t):Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.x)(t),s=void 0,n=void 0;if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(r,"replies_next"))return(s=+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(r,"count")||0)<a?(s++,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(r,"count",s),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(r,i?getLang("wall_prev_n_replies",s):getLang("wall_next_n_replies",s))):i&&(n=+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(r,"offset")||0,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(r,"offset",n+1)),r;if(i)n=0;else{var c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)(o,t),d=c[c.length-1],E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.m)(t);if(d){var p=+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(d,"count")||a,O=+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(d,"offset")||0,u=E.indexOf(d);u=(u>=0?u:0)+1,n=O+p+E.slice(u).filter(function(_){return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"reply")}).length}else n=E.filter(function(_){return Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(_,"reply")}).length}var b=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(l.wallTpl.reply_deep_next,{post_id:_,reply_id:e,offset:n,count:1,text:i?getLang("wall_prev_n_replies",1):getLang("wall_next_n_replies",1),class:" "+(i?" replies_prev":"")+(o?" "+o:"")}));return i?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.w)(b,t.firstChild):t.appendChild(b),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.tb)(b),b},removeDeepReply:function(_){var e=_[2],t=ge("post"+e),o=0,i=0;if(cur.wallMyDeleted[e]||!t)return[o,i];i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.Q)(t,cur.layerpost)[1],Object(_lib_video__WEBPACK_IMPORTED_MODULE_12__.h)(t);var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",t)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",t),a=l?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(l,"post-id"):"",r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("replies_wrap_deep",t);if(r)o=-t.offsetHeight,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.N)(r)[1]&&addClass(r,"replies_deep_empty_list");else if(ge("replies_wrap_deep"+e)){var s=cur.wallLayer&&cur.wallLayer===a?wkcur:cur,n=geByClass1("reply_date",t),c=geByClass1("reply_link_wrap",t),d="",E=attr(t,"onclick");E&&(d+=' onclick="'+E+'"');var p=e.split("_")[0],O=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(p<0?s.wallTpl.reply_deleted_group:s.wallTpl.reply_deleted_user,{reply_id:e,date:n?n.innerHTML:"",answer:c?c.outerHTML:"",class:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"reply_replieable")?" reply_replieable":"",attr:d})),u=t.offsetHeight;Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.D)(t,O),o=O.offsetHeight-u}else o=-t.offsetHeight,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.fb)(t);return cur.layerpost&&(cur.count--,cur.loaded--),l&&(wall.repliesSideSetup(a),wall.incReplyCounter(l,-1)),[o,i]},addDeepRepliesBlock:function(_){var e=ge("post"+_);if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(e,"reply")){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("wl_post",e)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("post",e);if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.V)(t,"deep_active")){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(t,"post-id"),i=ge("replies_wrap_deep"+_),l=(cur.wallLayer?wkcur:cur).wallTpl;i||(i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(l.reply_deep,{post_id:o,reply_id:_,reply_msg_id:_.split("_")[1],text:"",offset:0,class:" replies_next_deep"})),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.v)(i,e));var a=ge("reply_fakebox"+_),r=ge("reply_box"+_);if(!a&&!r){var s=ge("reply_fakebox"+o)||ge("reply_box"+o),n=geByClass1("checkbox_official",s)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.T)("reply_fakebox_with_official",s),c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(l.reply_box,{post_id:_,owner_name:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.c)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(s,"owner-name")||""),owner_photo:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(s,"owner-photo")||"",owner_href:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(s,"owner-href")||"",can_reply_as_group:n||"",class:n?" reply_fakebox_with_official":""}));i.appendChild(c),addClass(i,"replies_deep_has_field")}}}},addReplyName:function(_,e){var t={};t[_]=e,wall.addReplyNames(t)},addReplyNames:function(_){var e=cur.wallLayer?wkcur:cur;e.options||(e.options={}),e.options.reply_names=extend({},e.options.reply_names,_)},getReplyNames:function(){return(cur.wallLayer?wkcur:cur).options.reply_names||{}},getReplyName:function(_){return cur.pvShown&&cur.pvReplyNames?cur.pvReplyNames[_]||[]:window.mvcur&&mvcur.mvShown&&!mvcur.minimized?mvcur.mvReplyNames[_]||[]:wall.getReplyNames()[_]||[]},showReorderRepliesTooltip:function(_,e){var t=cur.wallLayer&&cur.wallLayer===e?wkcur:cur;if(!t["postRepliesReorderTT"+e]&&!Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.i)(_,"ett")){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.z)(_),i=void 0;i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"hide-smart")||!1?t.wallTpl.replies_reorder_tooltip:t.wallTpl.replies_reorder_tooltip_with_smart;var l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(i||"",{postId:e})),a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.G)("radiobtn",l),r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"order")||"asc";radioBtns["post_replies_reorder"+e]={val:r,els:a},a.some(function(_){if(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"order")===r)return Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.c)(_,!0),!0});var s=new ElementTooltip(_,{appendTo:o,forceSide:"bottom",autoShow:!1,cls:"eltt_fancy eltt_fancy_actions",noOverflow:!1,centerShift:0,offset:[-10,0],content:l,align:"left"});t["postRepliesReorderTT"+e]=s,cur.destroy.push(function(){s&&s.destroy()}),s.show()}},reorderReplies:function(_,e,t){var o=cur.wallLayer&&cur.wallLayer===e?wkcur:cur;t=t||"asc",Object(_lib_ui__WEBPACK_IMPORTED_MODULE_5__.r)(_,t,"post_replies_reorder"+e);var i=ge("post_replies_reorder"+e),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(_,"label")||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(_);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.yb)(i,l),i.setAttribute("aria-label",l),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(i,"order",t),o["postRepliesReorderTT"+e]&&o["postRepliesReorderTT"+e].hide(),wall.moreReplies(e,0,0,{deep:!0,clear:!0,order:t,onDone:function(_,t,o){var i=ge("replies"+e);if(o.count>o.offset+o.num){var l=cur.wallLayer&&cur.wallLayer===e?wkcur:cur,a=l.options.replies_page_count||20,r=Math.min(a,o.count-o.offset-o.num),s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.mb)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.lb)(l.wallTpl.reply_deep_next,{post_id:e,reply_id:e,offset:o.offset+o.num,count:r,text:getLang("wall_next_n_replies",r),class:" replies_next_main"}));i.appendChild(s)}o.top_reply_ids&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(i,"top-ids",o.top_reply_ids.join(",")),cur.wallMyOpened=cur.wallMyOpened||{},cur.wallMyOpened[e]=1,wall.repliesSideSetup(e)}})},getRepliesOrder:function(_){var e=ge("post_replies_reorder"+_);return(e?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_0__.s)(e,"order"):"")||"asc"},isDescRepliesOrder:function(_,e){return"desc"===(e=e||wall.getRepliesOrder(_))},showOrderTooltip:function(_){var e=geByClass1("post_replies_reorder");e&&(cur.orderFeatureTT=new ElementTooltip(e,{content:'<div class="feature_tooltip__close" onclick="cur.orderFeatureTT.hide();"></div>'+getLang("wall_order_feature_text"),forceSide:"top",cls:"feature_intro_tt feature_info_tooltip order_feature_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendToParent:!0,offset:[0,-4],onHide:function(){ajax.post("al_index.php",{act:"hide_feature_tt",hash:_,type:"order_web"}),cur.orderFeatureTT.destroy(),delete cur.orderFeatureTT}}),cur.orderFeatureTT.show())}};__webpack_exports__.a=Wall}});