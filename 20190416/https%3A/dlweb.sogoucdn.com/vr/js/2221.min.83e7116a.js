define("vr.tpl2221",["$","$s"],function(a,b){return function(c,d,e,f){function g(a,b,c){var d=a.width,e=a.height,f=document.createElement("img");f.style.position="relative";var g=b/d*e;if(g>c)g>200&&(g=c),f.style.width=b+"px",f.style.height=g+"px",f.style.top=(c-g)/2+"px";else{f.style.height=c+"px";var h=c/e*d;f.style.width=h+"px",f.style.left=(b-h)/2+"px"}return f}function h(b,c,d,e,f,h){for(var k=120,l=c,n=1.1*d,p=n,q=0,r=c;r<b.length;r++){var s=b[r],t=s.width/(s.height/k),u=p-t;if(!(Math.abs(u)<Math.abs(p))){l=r-1;break}p-=t,q+=t}r==b.length&&(l=b.length-1);for(var v=d-(l-c+2),w=0,x=v/q,r=c;r<=l;r++){var y=a("<span class='pictotal'></span>");y.css("z-index","1");var s=b[r],z=document.createElement("li"),A=document.createElement("a"),t=s.width/(s.height/k);t=Math.round(t*x),r==l&&(t=v-w),w+=t;var B=k*x;B=B>k?k:B,A.setAttribute("target","_blank"),A.setAttribute("href",s.link),A.setAttribute("id","sogou_vr_"+f+"_small_"+h),A.style.zIndex=0,A.style.overflow="hidden",A.style.display="block",A.style.height=B+"px",z.setAttribute("pingBack",o+s.suffix),z.style.position="relative",z.style.width=t+"px",z.style.height=B+"px";var C=g(s,t,B);C.setAttribute("src",m(s.src)),C.style.zIndex=0,A.appendChild(C),s.imgTag&&(y.text(s.imgTag),A.appendChild(y[0]),A.setAttribute("id","sogou_vr_"+f+"_small-taotu_"+h)),z.appendChild(A);var D=1.25*t+"px",E=1.25*B+"px",F=0-.1*t+"px",G=0-.1*B+"px",H=document.createElement("a");H.setAttribute("target","_blank"),H.setAttribute("href",s.link),s.imgTag&&H.setAttribute("id","sogou_vr_"+f+"_small-taotu_"+h),H.setAttribute("id","sogou_vr_"+f+"_small_"+h),s.imgTag&&H.setAttribute("id","sogou_vr_"+f+"_small-taotu_"+h),H.setAttribute("style","display:none;position:absolute;width:"+D+";height:"+E+";top:"+G+";left:"+F+";"),H.setAttribute("pop_width",D),H.setAttribute("pop_height",E),H.setAttribute("pop_left",F),H.setAttribute("pop_top",G),H.style.display="none";var I=g(s,t,B);I.setAttribute("src",m(s.src)),I.setAttribute("style","display:none;position:absolute;width:"+t+"px;height:"+B+"px;top:0px;left:0px;"),I.style.display="none",H.appendChild(I);var J=a("<span class='pictotal'></span>");J.css("z-index","100"),s.imgTag&&(J.text(s.imgTag),H.appendChild(J[0])),z.appendChild(H),e.appendChild(z);var K={backLink:A,backImage:C,popLink:H,popImage:I,parentLi:z},L=window.navigator.userAgent.toLowerCase();/msie 6\.0/i.test(L)||/msie 7\.0/i.test(L)||a(z).bind("mouseenter",K,i).bind("mouseleave",K,j)}return{index:l+1,height:B}}function i(b){var c=a(this).find(".picstar-skin"),d=b.data.backLink,e=b.data.backImage,f=b.data.popLink,g=b.data.popImage,h=b.data.parentLi,i=f.getAttribute("pop_width"),j=f.getAttribute("pop_height"),k=f.getAttribute("pop_top"),l=f.getAttribute("pop_left");if(f.style.width=e.style.width,f.style.height=e.style.height,f.style.left="0px",f.style.top="0px",f.style.zIndex=99,g.style.left="0px",g.style.top="0px",g.style.width=e.style.width,g.style.height=e.style.height,d.style.display="none",e.style.display="none",f.style.display="",g.style.display="",/msie/i.test(window.navigator.userAgent.toLowerCase()))a(f).animate({width:i,height:j,left:l,top:k},200),a(g).animate({width:i,height:j,left:"0px",top:"0px"},200),c.length>0&&c.animate({width:i,height:j,left:"0px",top:"0px"},200);else{g.style.position="absolute";try{a(f).animate({width:i,height:j,left:l,top:k},200),a(g).animate({width:i,height:j,left:"0px",top:"0px"},200),c.length>0&&(c.eq(1).css({left:"0px",top:"0px",width:e.style.width,height:e.style.height}),c.eq(1).animate({width:i,height:j,left:"0px",top:"0px"},200))}catch(m){g.style.width=i,g.style.height=j,g.style.left="0px",g.style.top="0px",a(f).css({width:i,height:j,left:l,top:k})}}g.style.zIndex=99,h.style.zIndex=99}function j(a){var b=a.data.backLink,c=a.data.backImage,d=a.data.popLink,e=a.data.popImage,f=a.data.parentLi;b.style.display="block",c.style.display="block",d.style.display="none",e.style.display="none",b.style.zIndex=0,c.style.zIndex=0,d.style.zIndex=0,e.style.zIndex=0,f.style.zIndex=0}function k(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];0!=d.width&&0!=d.height&&b.push(d)}return b}function l(){var c=a("#"+r).find("em").text();"undefined"!=typeof isFromEnglishVertical&&isFromEnglishVertical?(a("#"+q).find(".js2221-English").show(),a("#"+q).find(".js2221-wangye").hide(),c.length>50?a("#"+r).html("Images of <em>"+c.substring(0,50)+"...</em>"):a("#"+r).html("Images of <em>"+c+"</em>")):c.length>50&&a("#"+r).html("<em>"+c.substring(0,50)+"...</em>--\u5fc5\u5e94\u56fe\u7247");var g=0,i=549,j=f.value,l=[];f.instrumentation&&(o=f.instrumentation.pingUrlBase),b.httpsUtil.isHttps&&o&&(o=o.replace("http","https")),p=f.webSearchUrlPingSuffix;for(var m=0;m<j.length;m++){var n={},s=j[m];n.src=s.thumbnailUrl,n.link=s.webSearchUrl,n.width=s.thumbnail.width,n.height=s.thumbnail.height,n.suffix=s.webSearchUrlPingSuffix,l.push(n)}a("#"+r).attr("href",l[0].link),a("#"+q).find("cite a").attr("href",l[0].link);var t=b.$("sogou_vr_"+d+"_piclist_"+e);l=k(l),h(l,g,i,t,d,e),a(t).find("li").click(function(){var b=new Image;b.src=a(this).attr("pingBack")}),a("#"+q).find(".js2221-ping").click(function(){var a=new Image;a.src=o+p})}function m(a){if("string"==typeof a)return a.replace("http:",window.location.protocol)}function n(a){return"sogou_vr_"+d+"_"+a+"_"+e}var o,p,q=n("wrap"),r=n("title");n("more");l()}});