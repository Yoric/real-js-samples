/*!
* Copyright 2015 linkFLy - http://www.cnblogs.com/silin6/
* Released under the MIT license
* http://opensource.org/licenses/mit-license.php
* Date: 2015-9-17 19:33:12
*/
(function(b,a){if(typeof define==="function"&&define.amd){define("jquery.imgLoad",["jquery"],function(c){return a(b,c)})}else{if(typeof define==="function"&&typeof declare==="function"){define("jquery.imgLoad",["$"],function(c){return a(b,c)})}else{a(b,b.jQuery)}}})(window,function(b,c){var d=function(h,i,g,e){var f=new Image();f.onload=function(){i.call(f,h,f.width,f.height);c.isFunction(e)&&e.call(f,h);f.onload=null};f.onerror=f.onabort=function(){g.call(f,h);c.isFunction(e)&&e.call(f,h);f.onabort=f.onerror=null};f.src=h};c.imgLoad=function(e,f){if(c.isPlainObject(e)){f=e;e=null}f=c.extend({},a,f);d(f.src,function(m,g,j){var l=c.isFunction(f.done);if(!l&&f.width&&f.height&&e){if(f.auto){var k=f.width/g*j;if(k>f.height){e.style.width=f.width+"px";e.style.height=k+"px";e.style.marginTop=(f.height-k)/2+"px"}else{e.style.height=f.height+"px";var i=f.height/j*g;e.style.width=i+"px";e.style.marginLeft=(f.width-i)/2+"px"}}else{e.style.height=f.height+"px";e.style.width=f.width+"px"}e.src=m}else{if(l){f.done.call(this,m,g,j)}}},function(g){if(c.isFunction(f.fail)){f.fail.call(this,g)}else{e.src=f.error;if(f.width&&f.height){e.style.height=f.height+"px";e.style.width=f.width+"px"}}},f.always);f.loading&&e&&(e.src=f.loading);return c};c.fn.imgLoad=function(e){c(this).each(function(g,h){if(h.tagName==="IMG"&&h.getAttribute("data-src")){var f=c.extend({src:h.getAttribute("data-src")||"",width:h.getAttribute("data-width")||h.getAttribute("width")||"",height:h.getAttribute("data-height")||h.getAttribute("height")||"",error:h.getAttribute("data-error")||h.getAttribute("src")},e);if(h.getAttribute("auto")==="false"||h.getAttribute("data-auto")==="false"){f.auto=false}c.imgLoad(h,f)}});return this};var a=c.imgLoad.DEFAULTS={loading:"",error:"images/vr/s_default.jpg",width:"",height:"",auto:true};return c.imgLoad});