define("vr.tpl70053100",["$","$s","StringUtils"],function(a,b,c){function d(a,b,c){if(a){if(a.getElementsByClassName)return a.getElementsByClassName(b);c=c||"*";for(var d=a.getElementsByTagName(c),e=[],f=0;f<d.length;f++){var g=d[f],h=" "+g.className+" ";h.indexOf(" "+b+" ")>-1&&e.push(g)}return e}}function e(a){var b,c,e=d(a,"works","a"),f=e.length;for(b=0;b<f;++b)c=e[b],c.onmouseover=function(){var a=d(this,"worksPlay","div")[0];a&&(a.style.display="block")},c.onmouseout=function(){var a=d(this,"worksPlay","div")[0];a&&(a.style.display="")}}var f=b.domainUtil.replaceSogoDomain,g=(b.domainUtil.isSogo?1:0,function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1})}),h=function(a){if(!a)return{};for(var b,c,d={},e=a.indexOf("||")===-1?[a]:a.split("||"),f=0;f<e.length;f++)c=e[f],b=c.split("::"),d[b[0].toLowerCase()]=b[1];return d},i=function(a){for(var b="",c=0;c<a.length;c++)b+=a.charCodeAt(c)>65248&&a.charCodeAt(c)<65375?String.fromCharCode(a.charCodeAt(c)-65248):String.fromCharCode(a.charCodeAt(c));return b};return function(d){function j(a,b){return(b?"#":"")+"sogou_vr_"+k+"_"+a+"_"+l}g();var k=d.classId,l=d.rankId,m=d.actor,n=(d.director,d.type.split(";").slice(0,3)),o=d.query,p=d.childvr,q=a(j("aggrBox1",!0)),r=a(j("aggrBox2",!0)),s=null,t=null,u=null,v=null,w=null,x=null,y=0==l&&p,z=!1,A=h(o),B="http://dlweb.sogoucdn.com/vr/images/tv/logo/",C="http://"+f("v.sogou.com")+"/v?query=",D=("https:"==location.protocol.toLowerCase(),["\u4e50\u89c6","\u7231\u5947\u827a","\u98ce\u884c","\u4f18\u9177","PPTV","\u534e\u6570","\u65b0\u6d6a","56\u7f51","\u571f\u8c46","\u51e4\u51f0\u7f51","\u7535\u5f71\u7f51","CNTV","\u9177\u7c73\u7f51","\u7206\u7c73\u82b1","\u66b4\u98ce","\u91776\u7f51","\u6fc0\u52a8\u7f51","\u8292\u679cTV","17173","\u817e\u8baf","\u770b\u770b","\u641c\u72d0","PPS","\u65b0\u7bee\u7f51","\u97f3\u60a6\u53f0","\u7cd6\u8c46\u7f51","\u6dd8\u7c73\u7f51","\u5148\u770b","\u54cd\u5de2\u770b\u770b","\u8fc5\u96f7","\u4e2d\u56fd\u84ddTV","AcFun","PP\u89c6\u9891","\u54d4\u54e9\u54d4\u54e9","\u6b22\u559c\u9996\u6620"]),E=["leshi.86fe36a0.png","iqiyi.ad940a2f.png","fengxing.a960913f.png","youku.29fd714a.png","pptv.8fbb2e92.png","huashu.0def4846.png","sina.099e4732.png","56.272e71be.png","tudou.ae4de3bd.png","fenghuang.c6aa3262.png","movie.c3e2e230.png","cntv.75a0d0c9.png","kumi.278794ee.png","baomihua.d493a98f.png","baofeng.69e20c8f.png","ku6.51f57ea5.png","jidong.fdd42535.png","hunantv.dc066b5d.png","17173.c215576f.png","tengxun.a75cbb75.png","xckk.5f0d6a67.png","sohu.24ec5982.png","pps.6ec4538e.png","cztv.c981617e.png","yinyuetai.02e44a2c.png","tangdou.22011925.png","taomi.ec4fea01.png","xiankan.3630dd7e.png","xckk.5f0d6a67.png","xunlei.3001e431.png","cztv2.6a3b99ec.png","acfun.4f3bbd61.png","ppsp.d5a8d2c1.png","bilibili.ddda95be.png","huanxi.03dcbeca.png"];if(void 0!=window.SgConst){SgConst.common&&SgConst.common.userid,SgConst.common&&SgConst.common.sec,SgConst.common&&SgConst.common.loginFlag,SgConst.common&&SgConst.common.clientIp,SgConst.common&&SgConst.common.ipsec}var F=function(){function d(){var b=m.split(";"),e=[],g=y?"/":" / ";if(o.html(p+b.join(g)),0==o.height())setTimeout(function(){d()},50);else{for(var h=b.length,i=0;i<h-1;i++)o.height()>30&&(b.pop(),o.html(p+b.join(g)));a.each(b,function(a,b){a>0?e.push(g):"",e.push("\u65e0"==b||"\u6682\u65e0"==b||""==b?"\u6682\u65e0":'<a href="http://'+f("v.sogou.com")+"/v?query="+encodeURIComponent(b)+'" target="_blank" id="'+j("zhuyan")+'">'+(o.height()>30?c.subString(b,y?18:16,!0):b)+"</a>")}),o.html(p+e.join(""))}}function e(){var a=s.find("._movie_info_poster"),c=a.parent().width(),d=a.parent().height();a.attr("data-src",b.httpsUtil.getCdnImgLink(a.attr("data-src"))),a.imgLoad({done:function(b,e,f){if(a[0].src=b,e/f<c/d){a[0].style.width=c+"px",a[0].style.height=f*c/e+"px";var g=parseInt(Math.abs(f*c/e-d)/2);a[0].style.marginTop="-"+g+"px"}else{a[0].style.height=d+"px",a[0].style.width=e*d/f+"px";var h=parseInt(Math.abs(e*d/f-c)/2);a[0].style.marginLeft="-"+h+"px"}},fail:function(){a.remove()}})}function g(){var a="",b=A.synonym?i(A.synonym):"",d=-1;if(a=y?h.html().replace(/<[!\/]?[^>]+>/g,""):h.html(),d=a.indexOf("_"),""!=b&&a.indexOf(b)<0&&b.indexOf(a.substring(0,d))<0)var b=b.replace(/\u3000/g," "),a=a.slice(0,d)+"(\u522b\u540d:"+(y?b:"<em>"+b+"</em>")+")"+a.slice(d);a=y?c.subString(a,40,!0):a,h.html(a)}var h=t.find("._movie_info_title"),k=t.find("._movie_info_jianjie>a"),l=t.find("._movie_info_daoyan"),o=t.find("._movie_info_actor"),p=o.html(),q=k.length>0?k.attr("data-summary"):"";if(q=~q.indexOf("\n")?q.slice(0,q.indexOf("\n")):q,k.length>0?k.before(c.subString(q,96,!0)):"",d(),y){t.find(".tab-vr-lis>li").each(function(b){a(this).click(function(c){c.preventDefault(),t.find(".tab-vr-lis>li").removeClass("cur").eq(b).addClass("cur"),t.find("._movie_tabs>div").hide().eq(b).show(),a(this).text().indexOf("\u7ecf\u5178\u53f0\u8bcd")>-1&&"0"==v.attr("data-index")&&(L(),v.attr("data-index","1"))})}),t.find(".tab-vr-lis>li.cur").text().indexOf("\u7ecf\u5178\u53f0\u8bcd")>-1?L()&&v.attr("data-index","1"):"";var r=l.text();"\u6682\u65e0"!=r&&(l.attr("href",C+encodeURIComponent(r)),o.height()>30&&l.html(c.subString(r,18,!0)))}else{var u=t.find("._movie_info_area"),w=t.find("._movie_info_type");u.attr("href",C+encodeURIComponent(u.text()));var x=[],z=w.html();a.each(n,function(a,b){a>0?x.push(" / "):"",x.push('<a href="'+C+encodeURIComponent(b)+'" target="_blank" id="'+j("leixing")+'">'+b+"</a>")}),w.html(z+x.join(""));var r=l.text();"\u6682\u65e0"!=r&&(l.attr("href",C+encodeURIComponent(r)),l.height()>30&&l.html(c.subString(r,16,!0)))}e(),g()},G=function(){var c=t.find(".tv-from"),d=t.find(".tv-viewbtn"),e=c.find(".f-btn"),f=c.find("._resource_tab");c.find("a").each(function(){logoIndex=D.indexOf(a(this).text()),logoIndex>-1&&a(this).find("img").attr("src",b.httpsUtil.getCdnImgLink(B+E[logoIndex]))}),f.length>0&&(e.click(function(b){b.stopPropagation(),b.preventDefault(),z?a(this).parent().removeClass("show-box"):(a(this).parent().addClass("show-box"),uigsPB(j("laiyuantab")),a("body").one("click",function(a){s.find("._movie_resource").removeClass("show-box"),z=!1})),z=!z}),f.find("a").each(function(b){a(this).click(function(b){var c=a(this).attr("data-href"),f=a(this).html();b.preventDefault(),z=!1,a(this).parent().parent().removeClass("show-box"),a(this).attr("data-href",e.attr("data-href")).html(e.html()).remove("i"),d.attr("href",c),w.attr("href",c),e.attr("data-href",c).html(f+"<i></i>")})}))},H=function(){u.find("img").each(function(a,c){var d=c.getAttribute("data-src"),e=d&&d.match(/http(s?):\/\/?(.*?(?=\/|$))/g);d&&(e=e&&e[0]||"",c.setAttribute("src",b.httpsUtil.getCdnImgLink(d)))})},I=function(b){var c="";b.find("a").each(function(){c=a.trim(a(this).attr("href")),c.indexOf("://m.")>-1&&a(this).attr("href",c.replace("://m.","://"))})},J=function(){var b="",d="";u.find(".tvstar-name").each(function(){b=a(this).attr("data-name"),d="/web?query="+encodeURIComponent(b),a(this).attr("href",d),a(this).prev().find("a").attr("href",d),a(this).html(c.subString(b,12,!0))})},K=function(){H(),I(u)},L=function(){var b=null,c=null,d=0,e=0;b=v.find(".pre"),c=v.find(".next"),d=v.find(".tv-info-box").length,b.length>0&&(b.click(function(a){a.preventDefault(),e>0?e--:"",v.find(".tv-info-box").hide().eq(e).show(),v.find("._page").addClass("cur").eq(e).removeClass("cur")}),c.click(function(a){a.preventDefault(),e<d-1?e++:"",v.find(".tv-info-box").hide().eq(e).show(),v.find("._page").addClass("cur").eq(e).removeClass("cur")}),v.find("._page").each(function(b){a(this).click(function(a){a.preventDefault(),e=b,v.find("table").hide().eq(e).show(),v.find("._page").addClass("cur").eq(e).removeClass("cur")})}))};s=y?q:r,q.hide(),r.hide(),s.show(),t=s.find(".vrwrap").eq(0),u=t.find("._movie_zhuyan"),v=t.find("._movie_taici"),x=t.find("._movie_yingping"),w=t.find("._movie_poster"),t.show(),x.length>0&&x.find("a.top").each(function(){var b=a(this).text();a(this).text(c.subString(b,42,!0))}),F(),G(),u.length>0&&(J(),K());var M=a(j("shipin",!0));M.length>0&&e(M[0])}});