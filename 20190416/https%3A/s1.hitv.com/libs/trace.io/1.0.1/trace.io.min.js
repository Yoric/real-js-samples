/*!
 * @hitv/trace.io v1.0.1-beta.5
 *
 * @author Allex Wang <allex.wxn@gmail.com>.
 * Released under the MIT License.
 */
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.TraceIO=e()}(this,function(){"use strict";var e=function(n){if(n==undefined)throw TypeError("Can't call method on  "+n);return n},l=function(n){return Object(e(n))},t={}.hasOwnProperty,h=function(n,e){return t.call(n,e)},o={}.toString,p=Object("z").propertyIsEnumerable(0)?Object:function(n){return"String"==(e=n,o.call(e).slice(8,-1))?n.split(""):Object(n);var e},s=function(n){return p(e(n))},i=Math.ceil,u=Math.floor,d=function(n){return isNaN(n=+n)?0:(0<n?u:i)(n)},m=Math.min,v=Math.max,y=Math.min;"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function n(n,e){return n(e={exports:{}},e.exports),e.exports}var g,a,c,w=n(function(n){var e=n.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)}),b=(w.version,n(function(n){var e=n.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),f=n(function(n){var e="__core-js_shared__",t=b[e]||(b[e]={});(n.exports=function(n,e){return t[n]||(t[n]=e!==undefined?e:{})})("versions",[]).push({version:w.version,mode:"pure",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})}),E=0,T=Math.random(),O=f("keys"),S=(g=!1,function(n,e,t){var r,o,i,u,a=s(n),c=0<(r=a.length)?m(d(r),9007199254740991):0,f=(i=c,(o=d(o=t))<0?v(o+i,0):y(o,i));if(g&&e!=e){for(;f<c;)if((u=a[f++])!=u)return!0}else for(;f<c;f++)if((g||f in a)&&a[f]===e)return g||f||0;return!g&&-1}),_=O[a="IE_PROTO"]||(O[a]="Symbol(".concat((c=a)===undefined?"":c,")_",(++E+T).toString(36))),j="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),P=Object.keys||function(n){return function(n,e){var t,r=s(n),o=0,i=[];for(t in r)t!=_&&h(r,t)&&i.push(t);for(;e.length>o;)h(r,t=e[o++])&&(~S(i,t)||i.push(t));return i}(n,j)},x=function(r,o,n){if(function(n){if("function"!=typeof n)throw TypeError(n+" is not a function!")}(r),o===undefined)return r;switch(n){case 1:return function(n){return r.call(o,n)};case 2:return function(n,e){return r.call(o,n,e)};case 3:return function(n,e,t){return r.call(o,n,e,t)}}return function(){return r.apply(o,arguments)}},k=function(n){return"object"==typeof n?null!==n:"function"==typeof n},I=function(n){if(!k(n))throw TypeError(n+" is not an object!");return n},L=function(n){try{return!!n()}catch(e){return!0}},M=!L(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),D=b.document,R=k(D)&&k(D.createElement),C=!M&&!L(function(){return 7!=Object.defineProperty((n="div",R?D.createElement(n):{}),"a",{get:function(){return 7}}).a;var n}),F=Object.defineProperty,A={f:M?Object.defineProperty:function(n,e,t){if(I(n),e=function(n,e){if(!k(n))return n;var t,r;if(e&&"function"==typeof(t=n.toString)&&!k(r=t.call(n)))return r;if("function"==typeof(t=n.valueOf)&&!k(r=t.call(n)))return r;if(!e&&"function"==typeof(t=n.toString)&&!k(r=t.call(n)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),I(t),C)try{return F(n,e,t)}catch(r){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(n[e]=t.value),n}},N=M?function(n,e,t){return A.f(n,e,{enumerable:!((r=1)&r),configurable:!(2&r),writable:!(4&r),value:t});var r}:function(n,e,t){return n[e]=t,n},B="prototype",W=function(n,e,t){var r,o,i,u=n&W.F,a=n&W.G,c=n&W.S,f=n&W.P,s=n&W.B,d=n&W.W,l=a?w:w[e]||(w[e]={}),p=l[B],m=a?b:c?b[e]:(b[e]||{})[B];for(r in a&&(t=e),t)(o=!u&&m&&m[r]!==undefined)&&h(l,r)||(i=o?m[r]:t[r],l[r]=a&&"function"!=typeof m[r]?t[r]:s&&o?x(i,b):d&&m[r]==i?function(r){var n=function(n,e,t){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(n);case 2:return new r(n,e)}return new r(n,e,t)}return r.apply(this,arguments)};return n[B]=r[B],n}(i):f&&"function"==typeof i?x(Function.call,i):i,f&&((l.virtual||(l.virtual={}))[r]=i,n&W.R&&p&&!p[r]&&N(p,r,i)))};W.F=1,W.G=2,W.S=4,W.P=8,W.B=16,W.W=32,W.U=64,W.R=128;var z,U,$,q,H=W;z="keys",U=function(){return function(n){return P(l(n))}},$=(w.Object||{})[z]||Object[z],(q={})[z]=U($),H(H.S+H.F*L(function(){$(1)}),"Object",q);var G=w.Object.keys,K={f:Object.getOwnPropertySymbols},V={f:{}.propertyIsEnumerable},X=Object.assign,Y=!X||L(function(){var n={},e={},t=Symbol(),r="abcdefghijklmnopqrst";return n[t]=7,r.split("").forEach(function(n){e[n]=n}),7!=X({},n)[t]||Object.keys(X({},e)).join("")!=r})?function(n,e){for(var t=l(n),r=arguments.length,o=1,i=K.f,u=V.f;o<r;)for(var a,c=p(arguments[o++]),f=i?P(c).concat(i(c)):P(c),s=f.length,d=0;d<s;)u.call(c,a=f[d++])&&(t[a]=c[a]);return t}:X;H(H.S+H.F,"Object",{assign:Y});var J=w.Object.assign;function Q(n){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function Z(n,e){return(Z=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function nn(n,e,t){return(nn=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}()?Reflect.construct:function(n,e,t){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(n,r));return t&&Z(o,t.prototype),o}).apply(null,arguments)}function en(n){var t="function"==typeof Map?new Map:undefined;return(en=function(n){if(null===n)return null;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,e)}function e(){return nn(n,arguments,Q(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Z(e,n)})(n)}var tn=n(function(n,e){var t,r,o;n.exports=(r=t={exports:{}},o=r.exports="undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),"number"==typeof __g&&(__g=o),t.exports)}),rn=tn.document,on=function(e,t){return function(){try{return e.apply(void 0,arguments)}catch(n){if(t)return arguments.length<=0?undefined:arguments[0]}}},un=function(n){return n&&"object"==typeof n},an=Date.now||function(){return+new Date},cn=Array.isArray||function(n){return"[object Array]"==={}.toString.call(n)};var fn=tn.setImmediate||function(n){return tn.setTimeout(n,1)},sn=function(n,e,t){return null==e?n:n+"="+(t?dn(String(e)):e)};var dn=on(encodeURIComponent,1),ln=function(o,n){return n.reduce(function(n,e){var t,r;return cn(e)?(r=e[0],t=(t=e[1])||r):t=e,n[r||t]=o[t],n},{})};function pn(n,e,t){return!!n&&(e=e||"click","function"==typeof t?(n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent&&n.attachEvent("on"+e,t),!0):void 0)}var mn=function(n){return null!=(e=n)&&e===e.window?n:9===n.nodeType&&(n.defaultView||n.parentWindow);var e};function hn(n){var e,t,r,o,i,u,a={top:0,left:0},c=n&&n.ownerDocument;if(c)return e=c.documentElement,o=n,i=9===(r=e).nodeType?r.documentElement:r,u=o&&o.parentNode,r===u||u&&1===u.nodeType&&(i.contains?i.contains(u):r.compareDocumentPosition&&16&r.compareDocumentPosition(u))?("undefined"!=typeof n.getBoundingClientRect&&(a=n.getBoundingClientRect()),t=mn(c),{top:a.top+(t.pageYOffset||e.scrollTop)-(e.clientTop||0),left:a.left+(t.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):a}var vn=tn.document,yn=function(){var n,e,t=!1,r=[],o=vn.addEventListener;function i(){var n=r;t&&n.length&&(r=[],function(n){for(var e=-1,t=n.length;++e<t;)n[e](vn)}(n))}function u(){if(!t){if(!vn.body)return fn(u);t=!0,o?(vn.removeEventListener("DOMContentLoaded",u),tn.removeEventListener("load",u)):tn.detachEvent&&tn.detachEvent("onload",u),e&&clearInterval(e),i()}}if("complete"===vn.readyState||vn.body&&0<vn.body.childNodes.length)fn(u);else if(o)vn.addEventListener("DOMContentLoaded",u,!1),tn.addEventListener("load",u,!1);else if(tn.attachEvent){tn.attachEvent("onload",u),vn.attachEvent("onreadystatechange",u);var a=vn.documentElement;try{n=null===tn.frameElement}catch(c){}a.doScroll&&n&&tn.external&&(e=setInterval(function(){try{a.doScroll(),u()}catch(c){}},30))}return function(n){t?n(vn):r.push(n)}}(),gn=function(){},wn=function(){function n(){this._l=new Image,this._r=!1}var e=n.prototype;return e.load=function(n,t){var r=this;this._r=!0;var o=this._l,e=function(n,e){t(n,e),o.onload=o.onerror=gn,r.reset()};o.onload=function(n){return e(null,n)},o.onerror=function(n){return e(n)},o.src=n},e.reset=function(){this._r=!1},n}(),bn=[],En=new function(){var e=0,t=[],r=function(){if(0<t.length&&e<5){var n=t.shift()[0];++e,o(n,function(){setTimeout(function(){--e,r()})})}},o=function(n,e){(function(){for(var n,e=-1,t=bn.length;++e<t;)if(!(t=bn[e])._r)return t;return n=new wn,bn.push(n),n})().load(n,function(n){return e(n)})};return{push:function(n){t.push([n]),r()}}},Tn={};["ready","load"].forEach(function(n){(Tn[n]=[]).state=0});var On=function r(o,i){return void 0===i&&(i="ready"),function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];r.check(i)?o.apply(null,e):r.add(i,[o,e])}};On.add=function(n,e){var t=e[0],r=e[1];Tn[n].push([t,r])},On.check=function(n){return!!Tn[n].state},On.resolve=function(n){var e=Tn[n];if(!e)throw new Error('The lifecycle not defined. name="'+n+'"');e.state=1,On.process(n)},On.process=function(n){for(var e,t,r,o=Tn[n];e=o.shift();){var i=e;t=i[0],r=i[1],t.apply(void 0,r)}};var Sn=window.document,_n=function(n){if("string"!=typeof n)throw new Error("trim need a string as parameter");for(var e=n.length,t=0,r=e-1,o=/(\u3000|\s|\t|\u00A0)/;t<e&&o.test(n.charAt(t));)++t;for(;0<=r&&o.test(n.charAt(r));)--r;return n.substring(t,r+1)},jn=function(n){for(var e,t,r,o=n?n.split("; "):[],i={},u=-1,a=o.length;++u<a;)~(e=(n=_n(o[u])).indexOf("="))&&(t=n.substring(0,e),r=n.substring(e+1),i[t]=r);return i},Pn=function(n,e,t){if(t=t||{},e!==undefined){if(t=function(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}(t),null===e&&(e="",t.expires=-1),"number"==typeof t.expires){var r=t.expires,o=t.expires=new Date;o.setTime(o.getTime()+864e5*r)}var i=function(n){try{return t.raw?n:encodeURIComponent(n)}catch(e){}return n};return Sn.cookie=[i(n),"=",i(e),t.expires?"; expires="+t.expires.toUTCString():"",t.path?"; path="+t.path:"",t.domain?"; domain="+t.domain:"",t.secure?"; secure":""].join(""),e}var u;return u=jn(Sn.cookie)[n],t.raw?u:u&&decodeURIComponent(u)||null};Pn.set=function(n,e,t){return Pn(n,e,t)},Pn.get=function(n){return Pn(n)},Pn.remove=function(n){return Pn(n,null)},Pn.keys=function(){return G(jn(Sn.cookie))};var xn=tn.performance,kn=window.timing||(window.timing={printTable:function(n){var e={},t=this.getTimes(n)||{};G(t).sort().forEach(function(n){e[n]={ms:t[n],s:+(t[n]/1e3).toFixed(2)}}),console.table(e)},printSimpleTable:function(){this.printTable({simple:!0})}}),In={},Ln=+new Date;kn.getTimes=function(n){var e=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance;if(e===undefined)return!1;var t,r=e.timing,o={};if(n=n||{},r){if(!n.simple)for(var i in r)t=r[i],!isNaN(parseFloat(t))&&isFinite(t)&&(o[i]=parseFloat(r[i]));o.navigationStart=o.navigationStart||Ln,o.loadTime=r.loadEventEnd-r.fetchStart,o.domContentReadyTime=o.domContentLoadedEventEnd-o.navigationStart,o.domReadyTime=r.domComplete-r.domInteractive,o.readyStart=r.fetchStart-r.navigationStart,o.redirectTime=r.redirectEnd-r.redirectStart,o.appcacheTime=r.domainLookupStart-r.fetchStart,o.unloadEventTime=r.unloadEventEnd-r.unloadEventStart,o.lookupDomainTime=r.domainLookupEnd-r.domainLookupStart,o.connectTime=r.connectEnd-r.connectStart,o.requestTime=r.responseEnd-r.requestStart,o.initDomTreeTime=r.domInteractive-r.responseEnd,o.loadEventTime=r.loadEventEnd-r.loadEventStart}return G(In).forEach(function(n){try{var e=function(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return"function"==typeof n?n.apply(void 0,t):n}(In[n],o);e!==undefined&&(o[n]=e)}catch(t){o[n]=0,console.error(t)}}),o},kn.r=function(n,e){In[n]=e},kn.r("finishLoadTime",function(){return window.PerformanceNavigationTiming&&performance.timeOrigin?(performance.getEntriesByType("navigation")[0].loadEventEnd+performance.timeOrigin)/1e3:performance.timing.loadEventEnd/1e3}),kn.r("firstPaintTime",function(n){var e=0,t=0;window.PerformancePaintTiming?t=(((performance.getEntriesByType("paint")[0]||0).startTime||0)+performance.timeOrigin)/1e3:window.chrome&&window.chrome.loadTimes?t=(e=1e3*window.chrome.loadTimes().firstPaintTime)-1e3*window.chrome.loadTimes().startLoadTime:"number"==typeof window.performance.timing.msFirstPaint&&(t=(e=window.performance.timing.msFirstPaint)-window.performance.timing.navigationStart);n.firstPaint=e,n.firstPaintTime=t}),kn.version="1.0.3";var Mn=tn.performance||tn.webkitPerformance||tn.msPerformance||tn.mozPerformance,Dn=kn.getTimes;kn.getTimes=function(n){var e=Dn(n)||{},t=Mn&&Mn.timing;return t&&(e.dns=e.lookupDomainTime,e.tcp=e.connectTime,e.ttfb=t.responseStart-t.fetchStart),e},kn.r("firstScreenTime",function(){return~~(100*function(n){if(!xn||!xn.getEntriesByType)return 0;var e=document.querySelectorAll('head link[type="text/css"],img,embed'),t=tn.innerHeight,r=[];n&&r.push(n);for(var o,i=0,u=e.length;i<u;i++)if("LINK"===(o=e[i]).tagName)r.push(o.href);else{if(!(hn(o).top<t))break;r.push(o.src)}var a=xn.getEntriesByType("resource"),c=0,f="";return r.forEach(function(n){for(var e=0;e<a.length;e++)if(-1<a[e].name.indexOf(n)){a[e].responseEnd>c&&(c=a[e].responseEnd,f=n);break}}),{time:c,name:f}}().time)/100});var Rn=window,Cn=document,Fn=Rn.screen,An=navigator.userAgent.toLowerCase(),Nn="$trio__gid",Bn=function(r,n){return r=ln(r,n),G(r).reduce(function(n,e){return n[e]="function"==typeof(t=r[e])?t():t,n;var t},{})};var Wn=function(){function n(n){this.$cfg=n}var e=n.prototype;return e.guid=function(){var n=Pn.get(Nn);return n||(n=function(){for(var n="",e=16;e--;)n+=Math.floor(16*Math.random()).toString(16);return n}(),Pn.set(Nn,n,{expires:365,domain:this.$cfg.domain})),n},e.set=function(n,e){1===arguments.length&&un(n)?J(this.$cfg,n):this.$cfg[n]=e},e.get=function(n){return function(n,e,t,r){if(!un(n)||"string"!=typeof e)return t===undefined?n:t;for(var o=e.split(r||/[./]/g),i=0;i<o.length;i++){if(!Object.prototype.propertyIsEnumerable.call(n,o[i]))return t;if(null==(n=n[o[i]])){if(i!==o.length-1)return t;break}}return n}(this.$cfg,n)},n}(),zn=function(n){return n instanceof Wn?n:new Wn(n)},Un=function(n){return{screenSize:function(){return[Fn.width,Fn.height].join("x")},winSize:function(){var n=function(){var n,e,t=rn.body;tn.innerWidth?(n=tn.innerWidth,e=tn.innerHeight):t&&t.clientWidth&&(n=t.clientWidth,e=t.clientHeight);var r=rn.documentElement;return r&&r.clientHeight&&r.clientWidth&&(n=r.clientWidth,e=r.clientHeight),{width:n,height:e}}();return[n.width,n.height].join("x")}}},$n=function(o){var t=Rn.location.href;return{pid:function(){return o.pageid||(n="pageid",t=Cn.getElementsByName(n),r=0<e?e:0,t.length>r?t[r].content:"")||"-1";var n,e,t,r},bid:function(){return An.match(/iPad/i)?"14.1.91":"1.1.91"},url:function(){return t},ref:function(){var n=Cn.referrer;if(!n&&Rn.parent)try{n=Rn.parent.document.referrer}catch(e){}return n&&!n.match(/^[^?&#]*.swf([?#])?/)||(n=function(n,e,t,r){if(!n)return"";e+=t=t||"=";var o=n.indexOf(e);if(!~o)return"";o+=e.length;var i=n.indexOf(r,o);return i<o&&(i=n.length),n.substring(o,i)}(t,"ref","=","&")||n),n||""}}},qn=tn,Hn=qn.document,Gn=function(e){var n,t;function r(n){return n="[trace.io] "+n,e.call(this,n)||this}return t=e,(n=r).prototype=Object.create(t.prototype),(n.prototype.constructor=n).__proto__=t,r}(en(Error));if(!Hn)throw new Gn("Load error, please make sure run in modern browser");var Kn=function(t,r){fn(function(){var n,e=function(n,e){if("object"!=typeof n)return n;var t,r,o,i=[];for(t in e=e===undefined?1:0,n)if(n.hasOwnProperty(t))if((r=n[t])&&"object"==typeof r){if("number"==typeof r.length)for(o=r.length;o--;)i.push(sn(t,r[o],e))}else i.push(sn(t,r,e));return i.join("&").replace(/%20/g,"+")}(J({},r,{_v:"1.0.1-beta.5",_:an()}));n=t+(~t.indexOf("?")?"&":"?")+e,En.push(n)})},Vn={},Xn=null,Yn=[],Jn=[],Qn=function(){var n=Xn.PI(),e=Vn.get("params.pi");return J({},n,e)},Zn=function(n,t){var e=Vn.get("api");if(!e)throw new Gn("sendTrack(), gather api not set.");if(!n)throw new Gn("sendTrack(), action type required.");return t=G(t).reduce(function(n,e){return n[e]=t[e]||0,n},{act:n}),Kn(e,t)},ne=On(function(n){return Zn("ac",n)}),ee=On(function(n){return Zn("ua",n)}),te=On(function(){return Zn("fsrender",Qn())},"load"),re=On(function(t,n){if(e=1,r=10,!(8<=Math.floor(Math.random()*(r-e+1))+e)){var e,r,o=Qn();t="string"==typeof t?{message:t,timeStamp:+new Date}:t;var i=["filename","lineno","colno","message","timeStamp","stack"].reduce(function(n,e){return n[e]=t[e],n},{}),u=J({errortype:1,error:i,msg:i.message,line:i.lineno,cookie:Vn.guid(),suuid:""},Vn.get("params.ci"),ln(o,["url","ref","bid","vid","ch","pver"]),n);return Zn("perror",u)}},"load"),oe={config:function(n){Vn.set(n)},setGatherParams:function(n){if(!un(n))throw new Error("fatal: gather params should be a object");Vn.set("params",n)},setGatherApi:function(n){Vn.set("api",n)},acTrack:function(){Yn.push.apply(Yn,arguments)},uaTrack:function(){Jn.push.apply(Jn,arguments)},error:function(){re.apply(void 0,arguments)}},ie=function(n){if(n&&cn(n))for(var e,t,r,o;e=n.shift();)t=e[0],o=e.slice(1),(r=oe[t])?r.apply(void 0,o):console.warn("[trace.io] option '"+t+"' not valid")},ue=function(n){},ae=function(n){return re(n,{errortype:2})},ce=function(n){return Zn("pexit",{timeStamp:n.timeStamp})},fe=function(){On.resolve("ready"),pn(Hn.body,"click",ue),pn(qn,"beforeunload",ce)};return function(n,e){if(!qn[e])return qn[e]=1,Vn=zn({api:"",params:{}}),ie(n),Xn=function(n){n=zn(n);var e=Un(),t=$n(n);return{PI:function(){var n=kn.getTimes();return J(Bn(t,["bid","url","ref"]),Bn(n,[["dns"],["tcp"],["ttfb"],["drt","domContentReadyTime"],["dlt","loadTime"],["dfst","initDomTreeTime"],["fst","firstScreenTime"]]),{pix:e.screenSize()})},UI:function(){return{}}}}(Vn),yn(fe),pn(qn,"load",function(){te(),setTimeout(function(){On.resolve("load")},300)}),pn(qn,"error",ae),Yn.forEach(function(n){return ne.apply(null,n)}),Jn.forEach(function(n){return ee.apply(null,n)}),n.ac=on(ne),n.ua=on(ee),n.error=on(re),n.push=function(n){ie([n])},n}(qn.TraceIO||(qn.TraceIO=[]),"_traceIOLoad")});