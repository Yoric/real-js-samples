(function(){function b(h){var j=false,g=/[^\x00-\xff]/g,d="",f=0,e;for(e=0;e<h.length;e++){d=h.charAt(e).toString();if(d=="<"){j=true}else{if(d==">"){j=false;continue}}if(j){continue}if(d.match(g)!=null){f+=2}else{if(d>="A"&&d<="Z"){f+=1.5}else{f+=1}}}return f}function a(q,m,p){function l(A,z){var y=0,x=0;while(y<A.length&&x<z.length){var w=A.charAt(y),v=z.charAt(x);if(w&&w.toString()==" "){y++;continue}if(v&&(v.toString()==" "||v.toString()=="/")){x++;continue}if(w!=v){break}else{y++;x++}}if(y==A.length&&x==z.length){return true}return false}if(!q){return""}var e=false,t=/[^\x00-\xff]/g,j,o="",f=0,s=q.length,h;for(j=0;j<q.length;j++){o=q.charAt(j).toString();if(o=="<"){e=true}else{if(o==">"){e=false;continue}}if(e){continue}if(o.match(t)!=null){f+=2}else{if(o>="A"&&o<="Z"){f+=1.5}else{f+=1}}if(f>m){s=j;break}}h=q;if(s<q.length){var g=q.substring(0,s),n=[],d=/<\/?\w+/g,k=g.match(d),u;if(k){for(j=0;j<k.length;j++){u=k[j];if(u.indexOf("/")<0){n.push(u)}else{var r=null;if(n.length!==0){r=n[n.length-1]}if(l(r,u)){n.pop()}}}}h=g;if(p){h+="..."}while(n.length>0){u=n.pop();u=u.replace("<","</")+">";h+=u}}return h}var c={};c.stringLength=b;c.subString=a;if(typeof(window.define)=="function"){window.define("StringUtils",[],function(){return c})}else{window.StringUtils=c}})();