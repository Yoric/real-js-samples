/*! Built by pcw player group @2019-4-16 10:47:53 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.QiyiPlayerLoader=t():e.QiyiPlayerLoader=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var i=window.Promise;i||(i=function(){function e(){}function t(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function a(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0,i._immediateFn(function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null===i)return void(1===e._state?n:r)(t.promise,e._value);var a;try{a=i(e._value)}catch(e){return void r(t.promise,e)}n(t.promise,a)})}function n(e,a){try{if(a===e)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var n=a.then;if(a instanceof i)return e._state=3,e._value=a,void o(e);if("function"==typeof n)return void d(t(n,a),e)}e._state=1,e._value=a,o(e)}catch(t){r(e,t)}}function r(e,t){e._state=2,e._value=t,o(e)}function o(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function s(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function d(e,t){var i=!1;try{e(function(e){i||(i=!0,n(t,e))},function(e){i||(i=!0,r(t,e))})}catch(e){if(i)return;i=!0,r(t,e)}}var l=setTimeout;return i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(t,i){var n=new this.constructor(e);return a(this,new s(t,i,n)),n},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,i){function a(r,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,function(e){a(r,e)},i)}t[r]=o,0==--n&&e(t)}catch(e){i(e)}}if(0===t.length)return e([]);for(var n=t.length,r=0;r<t.length;r++)a(r,t[r])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,i){i(e)})},i.race=function(e){return new i(function(t,i){for(var a=0,n=e.length;a<n;a++)e[a].then(t,i)})},i._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){l(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},i}());var a=window.webpackJsonpQiyiPlayerLoader;window.webpackJsonpQiyiPlayerLoader=function(t,i,n){for(var o,s,d=0,l=[];d<t.length;d++)s=t[d],r[s]&&l.push(r[s][0]),r[s]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);for(a&&a(t,i,n);l.length;)l.shift()()};var n={},r={3:0};return t.e=function(e){function a(){d.onerror=d.onload=null,clearTimeout(l);var t=r[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),r[e]=void 0)}var n=r[e];if(0===n)return new i(function(e){e()});if(n)return n[2];var o=new i(function(t,i){n=r[e]=[t,i]});n[2]=o;var s=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript",d.charset="utf-8",d.async=!0,d.timeout=12e4,t.nc&&d.setAttribute("nonce",t.nc),d.src=t.p+""+({0:"skin.default",1:"skin.mobile",2:"skin.playlist"}[e]||e)+".c9581fb2a8d447de7f92.js";var l=setTimeout(a,12e4);return d.onerror=d.onload=a,s.appendChild(d),o},t.m=e,t.c=n,t.d=function(e,i,a){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="//static.iqiyi.com/js/player_v1/",t.oe=function(e){throw console.error(e),e},t(t.s=76)}([function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(4),r=[],o=[],s=function(){},d=function(){this.__super__?this.__super__=this.__super__.prototype.superclass:this.__super__=this.superclass,this.__super__.apply(this,arguments),delete this.__super__},l=function(e,t){var i=t.construct||function(){},a=t.extend||s,l=function(){};l.prototype=a.prototype;var u=function(){d.apply(this,arguments),i.apply(this,arguments),r.push(this)},c=new l;return n(c,t.props||{}),n(c,t.methods||{}),n(u,t.statics||{}),c.constructor=u,c.superclass=a,o.push(c),u.prototype=c,u};l.destroyAll=function(){var e,t;for(e=0;e<r.length;e++)try{for(t in r[e])delete r[e][t]}catch(e){}for(e=0;e<o.length;e++)try{for(t in o[e])delete o[e][t]}catch(e){}r.splice(0,r.length)},a.exports=l}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){function n(e,t){var i=u.split("\n").slice(0,6),a=i.join("\n")+"\n~~~~~truncated log~~~~~\n";u=a+u.slice(e>a.length?e:a.length,t)}function r(){if(l){l=!1;var e=u.length;e>b&&n(e-b,e),d.write(c,u)}setTimeout(r,y)}var o=i(0),s=i(4),d=i(15),l=!1,u="",c="QiyiPlayerLogger",f={OFF:{value:0,name:"OFF"},ERROR:{value:1,name:"ERROR"},WARN:{value:2,name:"WARN"},INFO:{value:3,name:"INFO"},DEBUG:{value:4,name:"DEBUG"}},p=parseInt(d.read("QiyiPlayerLoggerLevel"),10),h=Array.prototype.slice,_=function(e,t){var i="",a=e<0,n=String(Math.abs(e));return n.length<t&&(i=new Array(t-n.length+1).join("0")),(a?"-":"")+i+n},g=function(){var e=new Date;return e.getFullYear()+"-"+_(e.getMonth()+1,2)+"-"+_(e.getDate(),2)+" "+_(e.getHours(),2)+":"+_(e.getMinutes(),2)+":"+_(e.getSeconds(),2)},m=function(e,t){var i,a="#FFA500";e=h.call(e),e.unshift("%c"),e.unshift("["+t.name+"]"),e.unshift("%c["+g()+" IQIYI_PLAYER_"+t.level.name+"]");var n=u||"";if(u=(""!==n?n+"\n":"")+e.join("").replace(/(%c|IQIYI_PLAYER_)/gi,""),l=!0,"undefined"!=typeof console)try{i=console.log,t.level===f.WARN&&console.warn?(i=console.warn,a="#ff6cb7"):t.level===f.ERROR&&console.error?(i=console.error,a="#F30"):t.level===f.INFO&&console.info?i=console.info:t.level===f.DEBUG&&console.info&&(a="#FFA500"),t.print&&i.apply(console,[e.join(" ")+" ","background-color:#699f00;color:#fff;","background-color:"+a+";color:#fff;"])}catch(e){}},v=o("Logger",{construct:function(e){this.context={name:e||"Unknown"}},statics:{levels:f,_filterLevel:function(){var e;for(var t in f)f[t].value===p&&(e=f[t]);return e||f.WARN}(),stringify:function(e){var t="";try{t=JSON.stringify(e)}catch(e){}return t},setLevel:function(e){e&&"value"in e&&(v._filterLevel=e,d.write("QiyiPlayerLoggerLevel",e.value))},getLevel:function(){return v._filterLevel},getLog:function(){return u}},methods:{enabledFor:function(e){return e.value<=v._filterLevel.value},invoke:function(e,t){m(t,s({level:e,print:this.enabledFor(e)},this.context))},debug:function(){this.invoke(f.DEBUG,arguments)},log:function(){this.invoke(f.INFO,arguments)},info:function(){this.invoke(f.INFO,arguments)},warn:function(){this.invoke(f.WARN,arguments)},error:function(){this.invoke(f.ERROR,arguments)}}}),y=3e4,b=524288;setTimeout(r,y),a.exports=v}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=[];a.exports=n("dispatcher",{construct:function(){this.__evtslist={},r.push(this)},statics:{clearAll:function(){for(var e=0;e<r.length;e++)r[e].__evtslist={};r.splice(0,r.length)}},methods:{once:function(e,t){var i=this;return i.on(e,function a(){t.apply(this,arguments),i.un(e,a)})},on:function(e,t){var i=this.__evtslist;return void 0===i[e]&&(i[e]=[]),i[e].push(t),this},fire:function(e){var t=this,i=t.__evtslist;if(i[e.type]instanceof Array)for(var a=0,n=i[e.type];a<n.length;a++)try{n[a].call(t,e)}catch(e){try{console.error(e.stack||e)}catch(e){}}},un:function(e,t){var i=this.__evtslist;return i[e]instanceof Array&&(i[e]=t?i[e].filter(function(e){return e!==t}):[]),this}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a="",n={},r={},o=navigator,s=o.platform,d=o.userAgent.toLowerCase(),l=d.match(/rtrident/),u=!l&&d.match(/(ipad).*os\s([\d_]+)/),c=!l&&!u&&d.match(/(iphone\sos)\s([\d_]+)/),f=d.match(/Android\s+([\d.]+)/i),p="";if(r.userAgent=d,r.IE11=/rv\:11/.test(d),r.IE=/msie/.test(d)||r.IE11,r.IE6=/msie 6/.test(d),r.IE7=/msie 7/.test(d),r.IE8=/msie 8/.test(d),r.IE9=/msie 9/.test(d),r.IE10=/msie 10/.test(d),r.EDGE=/edge/.test(d),r.iPhone=/iphone os/.test(d)&&!l,r.iPhone4=/iphone os [45]_/.test(d)&&!l,r.iPad=/ipad/.test(d)&&!l,r.iPod=/iPod/i.test(d)&&!l,r.isTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,r.CHROME=/chrome/.test(d),r.SAFARI=/safari/.test(d)&&!/chrome/.test(d),r.FIREFOX=/firefox/.test(d),r.mobile=/mobile/gi.test(d),r.mobileSafari=r.iPhone||r.iPhone||r.iPad,r.QQ=/QQBrowser/gi.test(d),r.WECHAT=/(wechat)|(micromessenger)/gi.test(d),r.CHROME){var h=/chrome\/([\d\.]+) /gi.exec(d);r.version=h?parseInt(h[1],10):0}if(r.EDGE){var _=/edge\/([\d\.]+)/gi.exec(d);r.version=_?parseInt(_[1],10):0}var g=/mac/i.test(s),m="X11"==s&&!g,v=/win/i.test(s)&&!m,y=/android/.test(d);n.unix=m,n.win=v,n.mac=g,n.android=y,n.androidMobile=y&&r.mobile,n.androidTablet=y&&(!r.mobile||/pad/i.test(d)),f&&(n.version=f[1]),n.ios=!1,c&&(n.ios=!0,n.version=c[2].replace(/_/g,".")),u&&(n.ios=!0,n.version=u[2].replace(/_/g,".")),r.iPod&&(n.ios=!0),a=r.iPad?"b85da1cf3ae44351":"b6c13e26323c537d";var b=function(e){var t="01";(r.iPhone||n.android)&&(t="02"),(r.iPad||n.androidTablet)&&(t="03");var i="01";n.android&&(i="02"),n.mac&&(i="08"),n.ios&&(i="03");return t+i+"00310100"+(e?"10":"00")+"000000"},x=function(e){return p||b(e)},w=function(e){p=e},T=function(e){var t=1;switch(x(e).substr(0,4)){case"0108":t=276;break;case"0303":t=10;break;case"0302":t=11;break;case"0203":t=13;break;case"0202":t=12}return t};i.exports={browser:r,os:n,code:a,getPtid:x,setPtid:w,getAgentType:T}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports=function e(t,i,a,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return i&&function(e,t){var i;for(i in e)if(r(e,i)&&t(e[i],i))break}(i,function(i,o){!a&&r(t,o)||(n&&"string"!=typeof i&&"boolean"!=typeof i?(t[o]||(t[o]={}),e(t[o],i,a,n)):t[o]=i)}),t}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(4),r={},o={get:function(e,t){var i="";if(t=n({memory:!1},t,!0),t.memory&&r.hasOwnProperty(e))i=r[e];else{if(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)){var a=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),o=a.exec(document.cookie);o&&(i=o[2]||"")}"string"==typeof i&&(i=decodeURIComponent(i)),t.memory&&(r[e]=i)}return i},set:function(e,t,i){i=i||{},t=encodeURIComponent(t);var a=i.expires;"number"==typeof i.expires&&(a=i.expires<=0?new Date(0):new Date,a.setTime(a.getTime()+i.expires)),delete r[e],document.cookie=e+"="+t+(i.path?"; path="+i.path:"")+(a?"; expires="+a.toUTCString():"")+(i.domain?"; domain="+i.domain:"")},remove:function(e,t){t=t||{},t.expires=-1,this.set(e,"",t)}};a.exports=o}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports={locale:"cn_s",isTraditionalChinese:function(){var e=!1,t=this.locale;return"tw_t"!==t&&"cn_t"!==t||(e=!0),e},isTWLocale:function(){var e=!1,t=this.locale;return"tw_t"!==t&&"tw_s"!==t||(e=!0),e},local:function(){return this.locale},setLocale:function(e){this.locale=e}}}.call(t,i,t,e))&&(e.exports=a)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Dispatcher=__webpack_require__(2),Class=__webpack_require__(0),cookies=__webpack_require__(5),http=__webpack_require__(11),md5=__webpack_require__(12),Logger=__webpack_require__(1),logger=new Logger("user"),platform=__webpack_require__(3),i18n=__webpack_require__(6),uuid=__webpack_require__(9),urlkit=__webpack_require__(10),authkey=__webpack_require__(14),NoticedLoginInfo,REQUEST_KEY="w0JD89dhtS7BdPLU2",RESPONSE_KEY="-0J1d9d^ESd)9jSsja",isNewUser=!cookies.get("QC006"),_isVIPSync=!1,_isBANSync=!1,_banType="",_heartBeatTimer=0,_heartBeatTime=0,_userLevel=0,_isActivation=!1,_tvid="",_agentType=1,_qdv=7;_agentType=platform.browser.iPad?23:platform.os.androidTablet?24:1;var preIsVip=!1,requestVipTypesRetryTimes=0;i18n.isTWLocale()&&(_agentType=platform.getAgentType(!0));var getUserInfo=function(){var userInfo={},p00002=cookies.get("P00002");return null!==p00002&&""!==p00002&&(p00002=window.JSON?window.JSON.parse(p00002):eval("("+p00002+")"),userInfo.uid=p00002.uid,userInfo.name=p00002.nickname,userInfo.email=p00002.email),userInfo},getUid=function(){return getUserInfo().uid||""},isLogin=function(){return NoticedLoginInfo?NoticedLoginInfo.login:""!==getUid()},passportCookie=function(){return NoticedLoginInfo&&NoticedLoginInfo.P00001?NoticedLoginInfo.P00001:cookies.get("P00001")||""},checkVipStack=[],flushCallback=function(e){_isVIPSync=e;for(var t=0;t<checkVipStack.length;t++)checkVipStack[t](e);checkVipStack=[]},onHeartBeatTimer=function(){var e=function(e){e&&e.sort();for(var t="",i=0;i<e.length;i++)t+=e[i]+"|";return t+="jfaljluixn39012$#",t=md5(t)},t={authcookie:cookies.get("P00001"),agenttype:_agentType,device_id:uuid.getFluid(),ptid:getPTID(),tv_id:_tvid,tn:Math.random().toString().replace(".","")};http.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/keepalive.action",params:t,beforeSend:function(t){var i=[];for(var a in t.params)i.push(a+"="+t.params[a]);return t.url+="&sign="+e(i),t},success:function(e){},failure:function(e){}})},openHeartBeat=function(){_isActivation=!0,1===_userLevel&&0===_heartBeatTimer&&(onHeartBeatTimer(),_heartBeatTimer=setInterval(onHeartBeatTimer,_heartBeatTime))},stopHeartBeat=function(){_isActivation=!1,0!==_heartBeatTimer&&(clearInterval(_heartBeatTimer),_heartBeatTimer=0)},getPTID=function(){return platform.getPtid(i18n.isTWLocale())},closeHeartBeat=function(){var e=+new Date,t=getPTID(),i=function(e){e&&e.sort();for(var t="",i=0;i<e.length;i++)i===e.length-1?t+=e[i]:t+=e[i]+"&";return t},a={authcookie:cookies.get("P00001"),agenttype:_agentType,device_id:uuid.getFluid()||uuid.getJsuid(),tv_id:_tvid,ptid:t,version:"4.1.1",qd_v:_qdv,ts:e};http.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/off.action",params:a,beforeSend:function(e){var t=[];for(var a in e.params)t.push(a+"="+e.params[a]);try{var n=i(t);e.url+="&qd_sc="+authkey.cmd5x(n)}catch(e){}return logger.log(e.url),e},success:function(e){},failure:function(e){}})},checkVip=function(e){var t=this,i=getPTID();i18n.isTWLocale()&&(_agentType=platform.getAgentType(!0)),_isBANSync=!1,_banType="";var a=cookies.get("P00001");checkVipStack.push(e),a?http.jsonp({url:"https://cmonitor.iqiyi.com/apis/user/check_vip.action",params:{agenttype:_agentType,sign:md5(a.substring(4,36)+"|"+_agentType+"|"+REQUEST_KEY),authcookie:a,ptid:i,version:3},timeout:2e3,memory:!0,beforeSend:function(){t.fire({type:"httpStart"})},complete:function(){t.fire({type:"httpComplete"})},success:function(e){var t=!1;if(_userLevel=0,e)if("A00000"==e.code){var i=md5(a.substring(5,39).split("").reverse().join("")+"<"+_agentType+"<"+RESPONSE_KEY);try{t=e.data.sign===i}catch(e){}if(e.data&&e.data.keepalive&&t){_userLevel=1;var n=1e3*parseInt(e.data.keepalive,10);if(n>0){n<1e4&&(n=1e4),(0===_heartBeatTimer||0!==_heartBeatTimer&&n!==_heartBeatTime)&&(_heartBeatTime=n,_isActivation&&(clearInterval(_heartBeatTimer),onHeartBeatTimer(),_heartBeatTimer=0,_heartBeatTimer=setInterval(onHeartBeatTimer,_heartBeatTime)))}}}else switch(e.code){case"A10001":case"A10002":case"A10004":_isBANSync=!0,_banType=e.code}flushCallback(t)},failure:function(e,t){_userLevel=0,408===t&&logger.warn("passport: timeout, check user vip fail!"),flushCallback(!0)}}):flushCallback(!1)},isVIPSync=function(){return _isVIPSync},isBanned=function(){return _isBANSync},setInfo=function(e){preIsVip=""!==__QP0013&&"0"!==__QP0013,NoticedLoginInfo=e,!0===NoticedLoginInfo.login?NoticedLoginInfo.login=!0:"true"===NoticedLoginInfo.login?NoticedLoginInfo.login=!0:NoticedLoginInfo.login=!1,_isVIPSync=!0===NoticedLoginInfo.login,_isBANSync=!1,_banType="",clearVipTypes(),this.fire({type:"infoset"})},getBanType=function(){return _banType},addEvent=function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i)},beforeunloadListener=function(){var e=this,t=function(){e.isVip(function(e){e&&closeHeartBeat()})};addEvent(window,"beforeunload",t)},_getVipTypesStack=[],_getVipTypesCallback=function(e){for(var t=0;t<_getVipTypesStack.length;t++)_getVipTypesStack[t](e);_getVipTypesStack=[]},isChangeVipState=function(e){isVip(function(t){logger.log("isChangeVipState! preIsVip:"+preIsVip+",curIsVip: "+t),e(preIsVip!=t)})},isVip=function(e){getVipTypes(function(t){var i=t.join(",");e("0"!==i&&""!==i)})},isRequestVipTypes=!1,__QP0013=null,getVipTypes=function(e){if(isLogin()||clearVipTypes(),_getVipTypesStack.push(e),!__QP0013){__QP0013=cookies.get("QP0013");var t=__QP0013.match(/[0-9]/g)||[];__QP0013&&t.length!=__QP0013.replace(/,/g,"").length&&(__QP0013="")}if(__QP0013){var i=__QP0013.split(",");_getVipTypesCallback(i)}else isRequestVipTypes||(isRequestVipTypes=!0,requestVipTypes())},updateVipTypes=function(){isRequestVipTypes||(isRequestVipTypes=!0,requestVipTypes())},requestVipTypes=function(){if(!isLogin())return void _getVipTypesCallback([0]);http.ajax({url:"//vinfo.vip.iqiyi.com/external/vip_users",params:{uid:getUid(),P00001:cookies.get("P00001"),platform:getPTID(),version:"3.0",appVersion:"1.0",bizSource:"vip_web_player",messageId:uuid.createUUID(),vipTypes:i18n.isTWLocale()?"5,6,7,8,10,13,14,16":"1,3,4,5,7,8,10,13,14,16"},timeout:2e3,memory:!0,success:function(e){try{e=JSON.parse(e||{})}catch(e){logger.error("vip_users: parse Error"),requestVipTypesFailed()}if("A00000"===e.code){var t=e.data||{},i=[];for(var a in t){var n=t[a];n&&"1"==n.status&&i.push(n.vipType),n=null}i.length||i.push(0),__QP0013=i.join(","),cookies.set("QP0013",__QP0013,{expires:1296e6,path:"/",domain:"iqiyi.com"}),logger.log("requset vipTypes success! viptypes is "+__QP0013),_getVipTypesCallback(i)}else requestVipTypesFailed()},failure:function(e,t){requestVipTypesFailed()}})},requestVipTypesFailed=function(){requestVipTypesRetryTimes>0?(__QP0013="1",logger.log("requset vipTypes failed! viptypes is "+__QP0013),_getVipTypesCallback([1])):(requestVipTypes(),requestVipTypesRetryTimes++)},clearVipTypes=function(){isRequestVipTypes=!1,requestVipTypesRetryTimes=0,cookies.set("QP0013","",{expires:1296e6,path:"/",domain:"iqiyi.com"}),__QP0013=null},UserInfo=new Class("User",{extend:Dispatcher,methods:{isLogin:isLogin,getUid:getUid,isVipSync:isVIPSync,isBanned:isBanned,getBanType:getBanType,passportCookie:passportCookie,isNewUser:function(){return isNewUser},setInfo:setInfo,tvid:function(e){_tvid=e},openHeartBeat:openHeartBeat,stopHeartBeat:stopHeartBeat,closeHeartBeat:closeHeartBeat,beforeunloadListener:beforeunloadListener,checkVip:checkVip,isVip:isVip,getVipTypes:getVipTypes,updateVipTypes:updateVipTypes,clearVipTypes:clearVipTypes,__isChangeVipState:isChangeVipState}});module.exports=new UserInfo}.call(exports,__webpack_require__,exports,module))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a=function(e){return"boolean"==typeof e},n=function(e){return"number"==typeof e},r=function(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()},o=function(e){return Array.isArray?Array.isArray(e):"[object array]"===Object.prototype.toString.call(e).toLowerCase()},s=function(e){if(isNaN(e))return"00:00:00";e=Math.round(e);var t=e>=3600?Math.floor(e/3600):0,i=e%3600>=60?Math.floor(e%3600/60):0;return i=i>=10?i:"0"+i,e=parseInt(i,10)>=0?e%3600%60:e,e=e>=10?e:"0"+e,t>0?(t>9?t:"0"+t)+":"+i+":"+e:i+":"+e},d=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return JSON.stringify(e)===JSON.stringify({})},l=function(e){var t="";return e=e||"",t=e.replace("http://","//"),t=t.replace("https://","//"),t=t.replace(".qiyipic",".iqiyipic")};i.exports={isBool:a,isNumber:n,isArray:o,isObject:r,formatMilliseconds:s,protocolRevise:l,isEmpty:d}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(5),r=i(12),o=0,s=!1,d="",l=window.webEventID||"",u=function(){l=window.webEventID||""},c=function(){return r(window.navigator.userAgent+document.cookie+Math.random()+(new Date).getTime()*o++)},f=function(e,t){n.set(e,t,{expires:31536e6,path:"/",domain:"iqiyi.com"})},p=function(){var e=n.get("QC006");return e||(s=!0,e=c(),f("QC006",e)),e},h=function(){var e=n.get("QC005");return e||(s=!0,e=c(),f("QC005",e)),e},_={createUUID:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1).toUpperCase()}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},getJsuid:p,getFluid:h,getWeid:function(){return l||(l=window.webEventID||r(p()+"weid"+ +new Date)),l},getEid:function(){var e="";return d||(e=p(),d=r(e+"veid"+1*new Date)),d},getIsNewUser:function(){return s},init:function(){try{window.addEventListener("unload",u),window.addEventListener("beforeunload",u),window.addEventListener("pagehide",u)}catch(e){}}};a.exports=_}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a=function(e){var t="",i="",a="",n="",r=/(\w+):\/\/([^\/:]+):?(\d*)((?:\/|$)[^?#]*)/,o=e.match(r);return o&&(t=o[1],i=o[2],a=o[3],n=o[4]),{protocol:t,host:i,port:a,path:n}},n=function(e){for(var t,i,a,n=e.substr(e.lastIndexOf("?")+1),r=n.split("&"),o=r.length,s={},d=0;d<o;d++)r[d]&&(a=r[d].split("="),t=a.shift(),i=a.join("="),void 0===s[t]&&(s[t]=i));return s},r=function(e,t){1===arguments.length&&(t=e,e=window.location.href);var i=String(t).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1"),a=new RegExp("(^|&|\\?|#)"+i+"=([^&#]*)(&|$|#)",""),n=e.match(a);return n?n[2]:""},o=function(e){var t=a(e);return(t?t.path||"":"").replace(/^.*[\\\/]/,"").split(".")[0]};i.exports={parse:a,query:r,query2Json:n,filename:o}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(4),r=i(12),o=document,s=function(){},d={},l={"*":"*/".concat("*"),text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},u={"*":null,text:null,html:null,xml:null,json:function(e){var t={},i=window.JSON?JSON.parse:function(){return{}};try{t=i(e)}catch(e){}return t}},c={method:"get",dataType:"*",timeout:1e4,charset:"utf-8",cache:!0,withCredentials:!0,jsonpCallback:"callback",complete:s,success:s,failure:s},f=function(e){var t=[];if("object"==typeof e)for(var i in e)t[t.length]=encodeURIComponent(i)+"="+encodeURIComponent(e[i]);return t.join("&").replace(/%20/g,"+")},p=function(e){e=e||{},n(e,c);var t=e.url,i=e.params||{},a=e.success,r=e.failure;if(t){!function(){function n(){var t;4==d.readyState&&(t=u[e.dataType]?u[e.dataType](d.responseText):d.responseText,200==d.status?a(t):r(d.statusText,t))}var o={},s=f(i);o.params=i,o.url=t+(s.length>0?(/\?/i.test(t)?"&":"?")+s:""),"function"==typeof e.beforeSend&&(o=e.beforeSend(o));var d=new XMLHttpRequest;d.withCredentials=e.withCredentials,d.onreadystatechange=n,d.open(e.method,o.url),d.timeout=e.timeout,d.setRequestHeader("Accept",l[e.dataType]),d.send()}()}},h=function(e){e=e||{},n(e,c),e.dataType="json",p(e)},_=function(e){e=e||{},n(e,c);var t=e.url,i=e.params||{},a=f(i),s=t+(a.length>0?(/\?/i.test(t)?"&":"?")+a:""),l=e.complete,u=e.success,p=e.failure,h="Q"+r(e.fixedCallback||s),_=!!e.memory,g=r(s),m=d[g];if(s){if(_&&m&&u)return void u(m);var v=function(e,t,i){switch(y(),e){case"success":_&&(d[g]=i),u(i);break;case"fail":p(i,t)}l(i)},y=function(){if(window[h]){window[h]=void 0;try{delete window[h]}catch(e){}}};window[h]=function(e){y(),setTimeout(function(){v("success","200",e)},0)};var b,x={},w=o.createElement("script");w.async=!0,w.type="text/javascript",w.charset=e.charset;var T=function(){if(w)try{w.onload(null,!0)}catch(e){}};w.abort=T,w.onload=w.onreadystatechange=function(e,t){(t||!w.readyState||/loaded|complete/.test(w.readyState))&&(w.onload=w.onreadystatechange=null,w.parentNode&&w.parentNode.removeChild(w),w=null,clearTimeout(b))},w.onerror=function(e){v("fail",null),T()},b=setTimeout(function(){v("fail",408),T()},e.timeout);var S={};return S[e.jsonpCallback]=h,n(i,S,!0),x.url=s+(/\?/i.test(s)?"&":"?")+f(S),x.params=i,"function"==typeof e.beforeSend&&(x=e.beforeSend(x)||x),w.src=x.url,o.getElementsByTagName("head")[0].appendChild(w),w}},g=function(e,t,i){if("string"==typeof t){var a=void 0===i||i;if(e){var n=[];a&&(e._=+new Date);for(var r in e)n.push(r+"="+encodeURIComponent(e[r]));var o=t+"?"+n.join("&"),s=new Image;s.onload=s.onerror=s.onabort=function(){s.onload=s.onerror=s.onabort=null,s=null},s.src=o}}};a.exports={serializeParam:f,ajax:p,json:h,jsonp:_,beacon:g}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){function a(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var i=1732584193,a=-271733879,n=-1732584194,u=271733878,c=0;c<e.length;c+=16){var f=i,p=a,h=n,_=u;i=r(i,a,n,u,e[c+0],7,-680876936),u=r(u,i,a,n,e[c+1],12,-389564586),n=r(n,u,i,a,e[c+2],17,606105819),a=r(a,n,u,i,e[c+3],22,-1044525330),i=r(i,a,n,u,e[c+4],7,-176418897),u=r(u,i,a,n,e[c+5],12,1200080426),n=r(n,u,i,a,e[c+6],17,-1473231341),a=r(a,n,u,i,e[c+7],22,-45705983),i=r(i,a,n,u,e[c+8],7,1770035416),u=r(u,i,a,n,e[c+9],12,-1958414417),n=r(n,u,i,a,e[c+10],17,-42063),a=r(a,n,u,i,e[c+11],22,-1990404162),i=r(i,a,n,u,e[c+12],7,1804603682),u=r(u,i,a,n,e[c+13],12,-40341101),n=r(n,u,i,a,e[c+14],17,-1502002290),a=r(a,n,u,i,e[c+15],22,1236535329),i=o(i,a,n,u,e[c+1],5,-165796510),u=o(u,i,a,n,e[c+6],9,-1069501632),n=o(n,u,i,a,e[c+11],14,643717713),a=o(a,n,u,i,e[c+0],20,-373897302),i=o(i,a,n,u,e[c+5],5,-701558691),u=o(u,i,a,n,e[c+10],9,38016083),n=o(n,u,i,a,e[c+15],14,-660478335),a=o(a,n,u,i,e[c+4],20,-405537848),i=o(i,a,n,u,e[c+9],5,568446438),u=o(u,i,a,n,e[c+14],9,-1019803690),n=o(n,u,i,a,e[c+3],14,-187363961),a=o(a,n,u,i,e[c+8],20,1163531501),i=o(i,a,n,u,e[c+13],5,-1444681467),u=o(u,i,a,n,e[c+2],9,-51403784),n=o(n,u,i,a,e[c+7],14,1735328473),a=o(a,n,u,i,e[c+12],20,-1926607734),i=s(i,a,n,u,e[c+5],4,-378558),u=s(u,i,a,n,e[c+8],11,-2022574463),n=s(n,u,i,a,e[c+11],16,1839030562),a=s(a,n,u,i,e[c+14],23,-35309556),i=s(i,a,n,u,e[c+1],4,-1530992060),u=s(u,i,a,n,e[c+4],11,1272893353),n=s(n,u,i,a,e[c+7],16,-155497632),a=s(a,n,u,i,e[c+10],23,-1094730640),i=s(i,a,n,u,e[c+13],4,681279174),u=s(u,i,a,n,e[c+0],11,-358537222),n=s(n,u,i,a,e[c+3],16,-722521979),a=s(a,n,u,i,e[c+6],23,76029189),i=s(i,a,n,u,e[c+9],4,-640364487),u=s(u,i,a,n,e[c+12],11,-421815835),n=s(n,u,i,a,e[c+15],16,530742520),a=s(a,n,u,i,e[c+2],23,-995338651),i=d(i,a,n,u,e[c+0],6,-198630844),u=d(u,i,a,n,e[c+7],10,1126891415),n=d(n,u,i,a,e[c+14],15,-1416354905),a=d(a,n,u,i,e[c+5],21,-57434055),i=d(i,a,n,u,e[c+12],6,1700485571),u=d(u,i,a,n,e[c+3],10,-1894986606),n=d(n,u,i,a,e[c+10],15,-1051523),a=d(a,n,u,i,e[c+1],21,-2054922799),i=d(i,a,n,u,e[c+8],6,1873313359),u=d(u,i,a,n,e[c+15],10,-30611744),n=d(n,u,i,a,e[c+6],15,-1560198380),a=d(a,n,u,i,e[c+13],21,1309151649),i=d(i,a,n,u,e[c+4],6,-145523070),u=d(u,i,a,n,e[c+11],10,-1120210379),n=d(n,u,i,a,e[c+2],15,718787259),a=d(a,n,u,i,e[c+9],21,-343485551),i=l(i,f),a=l(a,p),n=l(n,h),u=l(u,_)}return Array(i,a,n,u)}function n(e,t,i,a,n,r){return l(u(l(l(t,e),l(a,r)),n),i)}function r(e,t,i,a,r,o,s){return n(t&i|~t&a,e,t,r,o,s)}function o(e,t,i,a,r,o,s){return n(t&a|i&~a,e,t,r,o,s)}function s(e,t,i,a,r,o,s){return n(t^i^a,e,t,r,o,s)}function d(e,t,i,a,r,o,s){return n(i^(t|~a),e,t,r,o,s)}function l(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function u(e,t){return e<<t|e>>>32-t}function c(e){for(var t=Array(),i=(1<<h)-1,a=0;a<e.length*h;a+=h)t[a>>5]|=(e.charCodeAt(a/h)&i)<<a%32;return t}function f(e){for(var t=p?"0123456789ABCDEF":"0123456789abcdef",i="",a=0;a<4*e.length;a++)i+=t.charAt(e[a>>2]>>a%4*8+4&15)+t.charAt(e[a>>2]>>a%4*8&15);return i}var p=0,h=8;i.exports=function(e){return f(a(c(e),e.length*h))}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){function n(e){return e.replace(p,"ms-").replace(h,function(e,t){return t.toUpperCase()})}function r(e,t){return e.className&&void 0!==e.className.baseVal?new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.getAttribute("class")):(" "+e.className+" ").indexOf(" "+t+" ")>=0}function o(e,t){var i=e.className&&void 0!==e.className.baseVal;r(e,t)||(i?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=(e.className?" ":"")+t)}function s(e,t){if(e.className&&void 0!==e.className.baseVal){var i=e.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");r(e,t)&&e.setAttribute("class",i)}else{for(var a=" "+e.className+" ";a.indexOf(" "+t+" ")>=0;)a=a.replace(" "+t+" "," ");e.className="function"==typeof a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}}function d(e,t){var i=t;e.className="function"==typeof i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function l(e,t){r(e,t)?s(e,t):o(e,t)}var u=i(0),c=document,f=window,p=/^-ms-/,h=/-([a-z])/g,_=Object.prototype.toString,g=Array.prototype.slice,m=u("dom",{construct:function(e){return this._query.call(this,e)},methods:{find:function(e){return this._query(e,new m)},_query:function(e,t){var i,a=this,n=[];if(!e)return this;if("[object nodelist]"===_.call(e).toLowerCase())n=e;else if(e.nodeType)n.push(e);else if(t)for(i=0;i<a.length;i++)n=n.concat(g.call(a[i].querySelectorAll(e)));else n=e.__$__&&"length"in e?g.call(e):c.querySelectorAll(e);for(t=t||a,i=0;i<n.length;i++)t[i]=n[i];return t.__$__=!0,t.length=n.length,t},_each:function(e){for(var t=this,i=0;i<t.length&&!1!==e.call(t[i],i,t[i]);i++);return t},addClass:function(e){return this._each(function(t,i){o(i,e)})},removeClass:function(e){return this._each(function(t,i){s(i,e)})},replaceClass:function(e){return this._each(function(t,i){d(i,e)})},toggleClass:function(e){return this._each(function(t,i){l(i,e)})},hasClass:function(e){return r(this[0],e)},css:function(e,t){if("object"!=typeof e)return void 0!==t?this._each(function(i,a){a.style[n(e)]=t}):(this.length>0&&(t=getComputedStyle(this[0])[n(e)]),t);for(var i in e)this.css(i,e[i])},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},attr:function(e,t){return void 0!==t?this._each(function(i,a){a.setAttribute(e,t)}):(this.length>0&&(t=this[0].getAttribute(e)),t)},removeAttr:function(e){this._each(function(t,i){1===i.nodeType&&i.removeAttribute(e)})},children:function(){var e,t=[],i=this[0];if(i)for(e=i.firstChild;e;)1===e.nodeType&&t.push(e),e=e.nextSibling;return t},html:function(e){if("string"==typeof e)this._each(function(t,i){i.innerHTML=e});else if(this[0])return this[0].innerHTML},append:function(e){var t,i,a=this,n=a[0];return n?("string"==typeof e&&(t=c.createDocumentFragment(),i=c.createElement("div"),t.appendChild(i),i.innerHTML=e,e=i.firstChild),n.appendChild(e),i=null,a):a},remove:function(){return this._each(function(e,t){t.parentNode&&t.parentNode.removeChild(t)})},offset:function(){var e,t=c.documentElement,i=this[0];return i?(e=i.getBoundingClientRect(),{top:e.top+(f.pageYOffset||t.scrollTop)-(t.clientTop||0),left:e.left+(f.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):{top:0,left:0}},width:function(e){var t=this[0];if(!t)return 0;if(void 0!==e)return this.css("width",isNaN(e)?e:e+"px");var i=this.css("width");if(i=parseInt("100%"===i?0:i),isNaN(i)){var a=t.offsetWidth;a<=0||null==a||(i=a)}return i},height:function(e){return this[0]?void 0!==e?this.css("height",isNaN(e)?e:e+"px"):parseInt(this.css("height")):0},contains:function(e){var t,i=this[0];return e&&(e.nodeType?t=e:e.__$__&&(t=e[0])),!(!i||!t)&&i.contains(t)},on:function(e,t){var i=this._events=this._events||[],a=i[e];return a||(a=i[e]=[]),a.push(t),this._each(function(i,a){a.addEventListener(e,t,!1)})},un:function(e,t){var i=this._events||[],a=i[e];return a||(a=i[e]=[]),this._each(function(i,n){var r;if(t){for(;(r=a.indexOf(t))>-1;)a.splice(r,1);n.removeEventListener(e,t)}else a.length>0&&(a.forEach(function(t){n.removeEventListener(e,t)}),a.splice(0,a.length))})},fire:function(e,t){var i=this,a=i._events=i._events||[],n=a[e];n||(n=a[e]=[]),t.data=t.data||{},i._each(function(e,i){n.forEach(function(e){e.call(i,t)})})}}});a.exports=function(e){return new m(e)}}.call(t,i,t,e))&&(e.exports=a)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){try{eval(function(e,t,i,a,n,r){if(n=function(e){return(e<62?"":n(parseInt(e/62)))+((e%=62)>35?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;i--;)r[n(i)]=a[i]||n(i);a=[function(e){return r[e]}],n=function(){return"\\w+"},i=1}for(;i--;)a[i]&&(e=e.replace(new RegExp("\\b"+n(i)+"\\b","g"),a[i]));return e}('2k 2R(b){R=2p 8X(16*3b);2g=8W*16;3a=2p 5G(R);3p=2p 8V(R);a=2p 8T(R);c=2p 5G(R);3a[0]=8U;i=8Y;m=0;n=0;o=0;p=0;s=0;t=0;u=0;v=0;w=0;x=0;y=0;z=0;A=0;B=0;C=0;D=0;E=0;F=0;G=0;H=0;I=0;J=0;K=0;L=2y.8Z;M=2y.9d;Z=2y.9c;3m=2y.6Z;1b=0;2f 2l=0;5H(2f 2h=0;2h<b.5I;++2h){2f u=b.2I(2h);1H(u>=5F&&u<=5E)u=5A+((u&2H)<<10)|b.2I(++2h)&2H;1H(u<=2Y){++2l}1W 1H(u<=5B){2l+=2}1W 1H(u<=5C){2l+=3}1W 1H(u<=5J){2l+=4}1W 1H(u<=5K){2l+=5}1W{2l+=6}}2f 2b=2p 9b(2l+1);2f 98=0,2a=0;3a[51]=9a;3a[54]=8R;2f 2r=2a+2l;5H(2f 2h=0;2h<b.5I;++2h){2f u=b.2I(2h);1H(u>=5F&&u<=5E)u=5A+((u&2H)<<10)|b.2I(++2h)&2H;1H(u<=2Y){1H(2a>=2r)1L;2b[2a++]=u}1W 1H(u<=5B){1H(2a+1>=2r)1L;2b[2a++]=5Q|u>>6;2b[2a++]=2c|u&63}1W 1H(u<=5C){1H(2a+2>=2r)1L;2b[2a++]=5R|u>>12;2b[2a++]=2c|u>>6&63;2b[2a++]=2c|u&63}1W 1H(u<=5J){1H(2a+3>=2r)1L;2b[2a++]=5S|u>>18;2b[2a++]=2c|u>>12&63;2b[2a++]=2c|u>>6&63;2b[2a++]=2c|u&63}1W 1H(u<=5K){1H(2a+4>=2r)1L;2b[2a++]=5P|u>>24;2b[2a++]=2c|u>>18&63;2b[2a++]=2c|u>>12&63;2b[2a++]=2c|u>>6&63;2b[2a++]=2c|u&63}1W{1H(2a+5>=2r)1L;2b[2a++]=5O|u>>30;2b[2a++]=2c|u>>24&63;2b[2a++]=2c|u>>18&63;2b[2a++]=2c|u>>12&63;2b[2a++]=2c|u>>6&63;2b[2a++]=2c|u&63}}2b[2a]=0;3p.8K(2b,2g);b=2g;2f d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,3m=0,$=0,aa=0,3R=0,3Q=0,4e=0,3P=0,3O=0,4d=0,4t=0,4s=0,3H=0,4v=0,3J=0,4u=0,4w=0,4q=0,3I=0,3M=0,3N=0,1a=0,1l=0,1b=0,1g=0,1f=0,1x=0,1h=0,1e=0,1U=0,1c=0,1q=0,1r=0,1s=0,1p=0,1d=0,17=0,13=0,1t=0,1k=0,2e=0,3E=0,2v=0,1X=0,1V=0,1I=0,1B=0,1C=0,1w=0,1E=0,1F=0,1D=0,1G=0,1v=0,1j=0,$a=0,ab=0,1m=0,1n=0,1i=0,1o=0,1u=0,1z=0,1A=0,1y=0,1S=0,1P=0,1Q=0,1M=0,1N=0,1R=0,1T=0,1O=0;2v=i;i=i+3T|0;1U=2v+40|0;2e=2v;h=1U+4|0;j=1U+8|0;u=1U+12|0;F=1U+16|0;Q=1U+20|0;aa=1U+24|0;3J=1U+28|0;3I=1U+32|0;3M=1U+36|0;3N=1U+40|0;k=1U+44|0;l=1U+48|0;m=1U+52|0;n=1U+56|0;o=1U+60|0;p=1U+64|0;q=1U+68|0;r=1U+72|0;s=1U+76|0;t=1U+80|0;v=1U+84|0;w=1U+88|0;x=1U+92|0;y=1U+96|0;z=1U+3X|0;A=1U+3u|0;B=1U+8Q|0;C=1U+3G|0;D=1U+3x|0;E=1U+8P|0;G=1U+3W|0;H=1U+2c|0;I=1U+3S|0;J=1U+2D|0;K=1U+8O|0;L=1U+8M|0;M=1U+3A|0;N=1U+4n|0;O=1U+2o|0;P=1U+2u|0;R=1U+8N|0;S=1U+34|0;T=1U+9e|0;U=1U+9f|0;V=1U+9y|0;W=1U+9x|0;X=1U+9w|0;Y=1U+5Q|0;3m=1U+9v|0;$=1U+9z|0;3R=1U+9A|0;3Q=1U+9E|0;4e=1U+9D|0;3P=1U+9C|0;3O=1U+9B|0;4d=1U+5R|0;4t=1U+9t|0;4s=1U+2i|0;3H=1U+9s|0;4v=1U+5S|0;4u=1U+9k|0;4w=1U+5P|0;4q=1U+5O|0;f=78;1a=0;1l=0;1b=0;1g=0;1f=0;1x=0;1h=0;1e=0;1c=0;1q=0;1r=0;1s=0;1p=0;e=0;d=0;1d=0;17=0;13=0;1t=0;1k=0;a:1Y(1)1Z 9i(f|0){1K 62:1L a;1K 2V:{3E=2D;1L a}1K 3G:{1o=1k;1i=1t;1n=13;1m=17;ab=1d;$a=d;1j=e;1v=1p;1G=1s;1D=1r;1F=1q;1E=1c;1w=1e;1C=1h;1B=1f;1I=1g;1V=1b;1X=1l;g=1a;f=99;1x=c[2e+(13+5L+ -1+ -5L+ -5M-1a+5M<<2)>>2]|0;1k=1o;1t=1i;13=1n;17=1m;1d=ab;d=$a;e=1j;1p=1v;1s=1G;1r=1D;1q=1F;1c=1E;1e=1w;1h=1C;1f=1B;1g=1I;1b=1V;1l=1X;1a=g;1J a}1K 7f:{1u=1k;g=1t;1X=13;1V=17;1I=1d;1B=d;1C=e;1w=1p;1E=1s;1F=1r;1D=1q;1G=1c;1v=1e;1j=1h;$a=1x;ab=1f;1m=1g;1n=1b;1i=1l;1o=1a;f=(13|0)==(1a|0)?5N:3Z;1k=1u;1t=g;13=1X;17=1V;1d=1I;d=1B;e=1C;1p=1w;1s=1E;1r=1F;1q=1D;1c=1G;1e=1v;1h=1j;1x=$a;1f=ab;1g=1m;1b=1n;1l=1i;1a=1o;1J a}1K 5N:{g=1k;1X=1t;1V=13;1I=17;1B=1d;1C=d;1w=e;1E=1p;1F=1s;1D=1r;1G=1q;1v=1c;1j=1e;$a=1h;ab=1x;1m=1f;1n=1g;1i=1b;1o=1l;1u=1a;f=(e|0)>0?5z:3Z;1k=g;1t=1X;13=1V;17=1I;1d=1B;d=1C;e=1w;1p=1E;1s=1F;1r=1D;1q=1G;1c=1v;1e=1j;1h=$a;1x=ab;1f=1m;1g=1n;1b=1i;1l=1o;1a=1u;1J a}1K 5z:{1X=1k;1V=1t;1I=13;1B=17;1C=1d;1w=d;1E=e;1F=1p;1D=1s;1G=1r;1v=1q;1j=1c;$a=1e;ab=1h;1m=1f;1n=1g;1i=1b;1o=1l;1u=1a;f=99;1x=c[2e>>2]|0;1k=1X;1t=1V;13=1I;17=1B;1d=1C;d=1w;e=1E;1p=1F;1s=1D;1r=1G;1q=1v;1c=1j;1e=$a;1h=ab;1f=1m;1g=1n;1b=1i;1l=1o;1a=1u;1J a}1K 3Z:{g=1k;1X=1t;1V=13;1I=17;1B=1d;1C=d;1w=e;1E=1p;1F=1s;1D=1r;1G=1q;1v=1c;1j=1e;$a=1h;ab=1x;1m=1f;1n=1g;1i=1b;1o=1l;1u=1a;f=(13|0)>(1a-5y+1+5y|0)?5l:5m;1k=g;1t=1X;13=1V;17=1I;1d=1B;d=1C;e=1w;1p=1E;1s=1F;1r=1D;1q=1G;1c=1v;1e=1j;1h=$a;1x=ab;1f=1m;1g=1n;1b=1i;1l=1o;1a=1u;1J a}1K 5l:{1X=1k;1V=1t;1I=13;1B=17;1C=1d;1w=d;1E=e;1F=1p;1D=1s;1G=1r;1v=1q;1j=1c;$a=1e;ab=1h;1m=1f;1n=1g;1i=1b;1o=1l;1u=1a;f=99;1x=0;1k=1X;1t=1V;13=1I;17=1B;1d=1C;d=1w;e=1E;1p=1F;1s=1D;1r=1G;1q=1v;1c=1j;1e=$a;1h=ab;1f=1m;1g=1n;1b=1i;1l=1o;1a=1u;1J a}1K 5m:{1X=1k;1V=1t;1I=13;1B=17;1C=1d;1w=d;1E=e;1F=1p;1D=1s;1G=1r;1v=1q;1j=1c;$a=1e;ab=1h;1m=1f;1n=1g;1i=1b;1o=1l;1u=1a;f=99;1x=c[1k+(13<<2)>>2]|0;1k=1X;1t=1V;13=1I;17=1B;1d=1C;d=1w;e=1E;1p=1F;1s=1D;1r=1G;1q=1v;1c=1j;1e=$a;1h=ab;1f=1m;1g=1n;1b=1i;1l=1o;1a=1u;1J a}1K 3u:{f=1c-5n+40+5n>>6<<4;g=1k;1X=1t;1V=13;1I=17;1B=1d;1C=d;1w=e;1E=1p;1F=1s;1D=1r;1G=1q;1v=1c;1j=1e;$a=1h;ab=1x;1m=1f;1n=1g;1i=1b;1o=1l;1u=1a;f=(13|0)==(f&14|f^14|0)?5k:5g;1k=g;1t=1X;13=1V;17=1I;1d=1B;d=1C;e=1w;1p=1E;1s=1F;1r=1D;1q=1G;1c=1v;1e=1j;1h=$a;1x=ab;1f=1m;1g=1n;1b=1i;1l=1o;1a=1u;1J a}1K 5k:{1X=1k;1V=1t;1I=13;1B=17;1C=1d;1w=d;1E=e;1F=1p;1D=1s;1G=1r;1v=1q;1j=1c;$a=1e;ab=1h;1m=1f;1n=1g;1i=1b;1o=1l;1u=1a;f=99;1x=(1c<<3)+ -5j+2n+5j|0;1k=1X;1t=1V;13=1I;17=1B;1d=1C;d=1w;e=1E;1p=1F;1s=1D;1r=1G;1q=1v;1c=1j;1e=$a;1h=ab;1f=1m;1g=1n;1b=1i;1l=1o;1a=1u;1J a}1K 5g:{g=1k;1X=1t;1V=13;1I=17;1B=1d;1C=d;1w=e;1E=1p;1F=1s;1D=1r;1G=1q;1v=1c;1j=1e;$a=1h;ab=1x;1m=1f;1n=1g;1i=1b;1o=1l;1u=1a;f=(13|0)>(1a-5h+1+5h|0)?5i:3X;1k=g;1t=1X;13=1V;17=1I;1d=1B;d=1C;e=1w;1p=1E;1s=1F;1r=1D;1q=1G;1c=1v;1e=1j;1h=$a;1x=ab;1f=1m;1g=1n;1b=1i;1l=1o;1a=1u;1J a}1K 5i:{1X=1k;1V=1t;1I=13;1B=17;1C=1d;1w=d;1E=e;1F=1p;1D=1s;1G=1r;1v=1q;1j=1c;$a=1e;ab=1h;1m=1f;1n=1g;1i=1b;1o=1l;1u=1a;f=99;1x=0;1k=1X;1t=1V;13=1I;17=1B;1d=1C;d=1w;e=1E;1p=1F;1s=1D;1r=1G;1q=1v;1c=1j;1e=$a;1h=ab;1f=1m;1g=1n;1b=1i;1l=1o;1a=1u;1J a}1K 3X:{1X=1k;1V=1t;1I=13;1B=17;1C=1d;1w=d;1E=e;1F=1p;1D=1s;1G=1r;1v=1q;1j=1c;$a=1e;ab=1h;1m=1f;1n=1g;1i=1b;1o=1l;1u=1a;f=99;1x=c[1k+(13<<2)>>2]|0;1k=1X;1t=1V;13=1I;17=1B;1d=1C;d=1w;e=1E;1p=1F;1s=1D;1r=1G;1q=1v;1c=1j;1e=$a;1h=ab;1f=1m;1g=1n;1b=1i;1l=1o;1a=1u;1J a}1K 99:{1a=c[1U+(1e<<2)>>2]|0;1d=~(~(((1a^~-2)&1a)-(0-1x))|~-2)&(~-5o|-5o);1V=(1a^~1)&1a;1X=~1d;1I=~1V;13=~-3r;13=((1X&-3r|1d&13)^(1I&-3r|1V&13)|~(1X|1I)&(-3r|13))-(0-((1x^~1)&1x))|0;1I=~(~(0-(0-13+(0-((17^~-2)&17))))|~-2)&(5p|~5p);1X=(17^~1)&17;1V=~1I;1d=~1X;1w=~-3q;1a=0-(0-((1V&-3q|1I&1w)^(1d&-3q|1X&1w)|~(1V|1d)&(-3q|1w))+(0-(~(~(1a+5v+1x-5v)|~1)&(5w|~5w))))|0;1w=(1e|0)%4|0;1w=0-(0-(1w<<2)+(0-9n))-5u+((Z(1w+ -5x+ -1+5x|0,1w)|0)/2|0)+5u|0;1d=1w+ -5t+ -9o+5t|0;1V=1a<<1d;1w=1a>>>(9F+ -5q-1w+5q|0);1w=1V&1w|1V^1w;1V=(1b^~1)&1b;1X=0-(0-1b+(0-4a))|0;1X=~(~(((1X^~-2)&1X)+5r+1w+ -5r)|~-2)&(~-5s|-5s);1I=~1X;1B=~1V;1C=~-3j;1y=~(~1w|~1)&(~-5T|-5T);1A=~1y;1z=~-4a;g=~-3l;1E=1k;1F=1t;1D=17;1G=d;1v=e;1j=1p;$a=1s;ab=1r;1m=1q;1n=1c;1i=1h;1o=1g;1u=1b;1l=1f;f=4j;1b=0-(0-((1A&-3l|1y&g)^(1z&-3l|-4a&g)|~(1A|1z)&(-3l|g))+(0-((1I&-3j|1X&1C)^(1B&-3j|1V&1C)|~(1I|1B)&(-3j|1C))))|0;1x=1w;1e=0-(0-1e+(0-1))|0;1k=1E;1t=1F;17=1D;d=1G;e=1v;1p=1j;1s=$a;1r=ab;1q=1m;1c=1n;1h=1i;1f=1o;1g=1u;1J a}1K 97:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(1e|0)<48?95:63;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 95:{1I=1b&~1g|1g&~1b;17=~-41;17=(~1I&-41|1I&17)^(~1f&-41|1f&17);1I=0-(0-(~(~1l|~-2)&(5U|~5U))+(0-17))|0;1I=(1I^~-2)&1I;1B=(1l^~1)&1l;1C=~1I;1w=~1B;13=~3i;1E=1k;1F=1t;1D=1d;1G=d;1v=e;1j=1p;$a=1s;ab=1r;1m=1q;1n=1c;1i=1e;1o=1h;1u=1f;1z=1g;1A=1b;1y=1l;f=94;1a=0-(0-1c+(0+1))>>2;1x=17;17=((1C&3i|1I&13)^(1w&3i|1B&13)|~(1C|1w)&(3i|13))-(0-(~(~17|~1)&(6s|~6s)))|0;13=((0-(0-(1e*3|0)+(0-5))|0)%16|0)-6t+1h+6t|0;1k=1E;1t=1F;1d=1D;d=1G;e=1v;1p=1j;1s=$a;1r=ab;1q=1m;1c=1n;1e=1i;1h=1o;1f=1u;1g=1z;1b=1A;1l=1y;1J a}1K 94:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)>(1c+6u+32-6u>>2|0)?82:93;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 93:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)>(1a|0)?92:89;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 92:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(e|0)>0?91:90;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 91:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=75;1x=c[2e+(13+(0-1a)<<2)>>2]|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 90:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=75;1x=c[2e+(13+6r+ -1-6r+6q-1a-6q<<2)>>2]|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 89:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)==(1a|0)?88:85;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 88:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(e|0)>0?87:85;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 87:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=75;1x=c[2e>>2]|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 85:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)>(0-(0-1a+(0-1))|0)?84:83;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 84:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=75;1x=0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 83:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=75;1x=c[1k+(13<<2)>>2]|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 82:{g=1c+6n+40-6n>>6<<4;1X=~g;1V=~14;f=~-3k;1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)==((1X&-3k|g&f)^(1V&-3k|14&f)|~(1X|1V)&(-3k|f)|0)?81:80;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 81:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=75;1x=(1c<<3)-(0-2n)|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 80:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)>(0-(0-1a+(0-1))|0)?79:77;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 79:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=75;1x=0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 78:{c[1U>>2]=-7O;c[h>>2]=-7M;c[j>>2]=8d;c[u>>2]=-7Y;c[F>>2]=-7U;c[Q>>2]=7W;c[aa>>2]=-8b;c[3J>>2]=-7X;c[3I>>2]=7Z;c[3M>>2]=-8c;c[3N>>2]=-7T;c[k>>2]=-8a;c[l>>2]=8e;c[m>>2]=-7P;c[n>>2]=-7N;c[o>>2]=7K;c[p>>2]=-7Q;c[q>>2]=-7S;c[r>>2]=7R;c[s>>2]=-7L;c[t>>2]=-7V;c[v>>2]=8D;c[w>>2]=-8w;c[x>>2]=-8v;c[y>>2]=8u;c[z>>2]=-8t;c[A>>2]=-8f;c[B>>2]=8A;c[C>>2]=-8z;c[D>>2]=-8s;c[E>>2]=8r;c[G>>2]=-8k;c[H>>2]=-8j;c[I>>2]=-8i;c[J>>2]=8g;c[K>>2]=-8o;c[L>>2]=-8n;c[M>>2]=8C;c[N>>2]=-8p;c[O>>2]=-8q;c[P>>2]=8m;c[R>>2]=-9G;c[S>>2]=-8l;c[T>>2]=8h;c[U>>2]=-8B;c[V>>2]=-8y;c[W>>2]=8x;c[X>>2]=-9u;c[Y>>2]=-af;c[3m>>2]=aj;c[$>>2]=-a4;c[3R>>2]=-a9;c[3Q>>2]=a3;c[4e>>2]=-ai;c[3P>>2]=-ag;c[3O>>2]=-a1;c[4d>>2]=9N;c[4t>>2]=-9O;c[4s>>2]=-9P;c[3H>>2]=9M;c[4v>>2]=-a2;c[4u>>2]=-9H;c[4w>>2]=9I;c[4q>>2]=-9J;$a=1k;ab=1t;1m=13;1n=17;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;f=74;1a=0;1l=6o;1b=-9K;1g=-9Q;1f=9R;1x=6o;1h=0;1e=0;1c=0;1d=1;1k=$a;1t=ab;13=1m;17=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1J a}1K 77:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=75;1x=c[1k+(13<<2)>>2]|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 75:{1a=c[1U+(1e<<2)>>2]|0;1B=~(~(((1a^~-2)&1a)-(0-1x))|~-2)&(6p|~6p);1I=~(~1a|~1)&(6v|~6v);1V=~1B;1X=~1I;13=~-2K;13=((1V&-2K|1B&13)^(1X&-2K|1I&13)|~(1V|1X)&(-2K|13))+ -6w+((1x^~1)&1x)+6w|0;1X=~(~(13+6D+(~(~17|~-2)&(6C|~6C))+ -6D)|~-2)&(6B|~6B);1V=(17^~1)&17;1I=~1X;1B=~1V;1C=~-38;1a=1a-(0-1x)|0;1w=1k;1E=1t;1F=17;1D=1d;1G=d;1v=e;1j=1p;$a=1s;ab=1r;1m=1q;1n=1c;1i=1e;1o=1h;1u=1x;1z=1g;1A=1b;1y=1b;1l=1f;f=73;1a=((1I&-38|1X&1C)^(1B&-38|1V&1C)|~(1I|1B)&(-38|1C))+6A+((1a^~1)&1a)-6A|0;1k=1w;1t=1E;17=1F;1d=1D;d=1G;e=1v;1p=1j;1s=$a;1r=ab;1q=1m;1c=1n;1e=1i;1h=1o;1x=1u;1f=1z;1g=1A;1b=1y;1J a}1K 74:{1C=1k;1t=1h;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=72;1h=0-(0-1h+(0-1))|0;1k=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 73:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=((1e|0)%4|0|0)<2?71:69;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 72:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(a[b+1t>>0]|0)==0?66:68;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 71:{1B=1k;1C=1t;1w=13;1E=17;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=67;1d=4;1k=1B;1t=1C;13=1w;17=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 69:{1B=1k;1C=1t;1w=13;1E=17;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=67;1d=2;1k=1B;1t=1C;13=1w;17=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 68:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=74;1c=0-(0-1c+(0-1))|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 67:{1w=0-(0-(((1e|0)%4|0)*7|0)+(0-1d))|0;1B=1a<<1w;1C=1a>>>(32+ -6x-1w+6x|0);1I=~1C;1V=~1B;1x=~2S;1x=(1I&2S|1C&1x)^(1V&2S|1B&1x)|~(1I|1V)&(2S|1x);1V=~(~(0-(0-1x+(0-(~(~1g|~-2)&(6y|~6y)))))|~-2)&(6z|~6z);1I=(1g^~1)&1g;1B=~1V;1C=~1I;1b=~-2U;1E=1k;1F=1t;1D=13;1G=17;1v=d;1j=e;$a=1p;ab=1s;1m=1r;1n=1q;1i=1c;1o=1h;1u=1f;1z=1g;1A=1l;1y=1a;f=97;1b=((1B&-2U|1V&1b)^(1C&-2U|1I&1b)|~(1B|1C)&(-2U|1b))+6m+((1x^~1)&1x)+ -6m|0;1e=1e+6l+1-6l|0;1d=1w;1k=1E;1t=1F;13=1D;17=1G;d=1v;e=1j;1p=$a;1s=ab;1r=1m;1q=1n;1c=1i;1h=1o;1f=1u;1g=1z;1l=1A;1a=1y;1J a}1K 66:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=64;e=1c>>2;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 64:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(1c|0)<6?62:60;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 63:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(1e|0)<64?59:21;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 60:{1B=1k;1C=1t;1w=13;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=58;17=0-(0-e+(0-1))|0;1k=1B;1t=1C;13=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 59:{1I=~1f|0|1f&~-1;1I=1b&1I|1b^1I;1I=(1I^~(~1g|0|1g&~-1))&1I;17=~3y;17=~(~(~(~1g|~((3y&~1b|1b&17)^(~-1&3y|-1&17)))&(61|~61))|~1f)&(~-65|-65);17=1I&17|1I^17;1I=((1l^~-2)&1l)+6a+17-6a|0;1I=(1I^~-2)&1I;1B=~(~1l|~1)&(~-5f|-5f);1C=~1I;1w=~1B;13=~-2Z;1E=1k;1F=1t;1D=1d;1G=d;1v=e;1j=1p;$a=1s;ab=1r;1m=1q;1n=1c;1i=1e;1o=1h;1u=1f;1z=1g;1A=1b;1y=1l;f=57;1a=0-(0-1c+(0+1))>>2;1x=17;17=((1C&-2Z|1I&13)^(1w&-2Z|1B&13)|~(1C|1w)&(-2Z|13))+5Y+(~(~17|~1)&(5Z|~5Z))-5Y|0;13=((1e*7|0)%16|0)-(0-1h)|0;1k=1E;1t=1F;1d=1D;d=1G;e=1v;1p=1j;1s=$a;1r=ab;1q=1m;1c=1n;1e=1i;1h=1o;1f=1u;1g=1z;1b=1A;1l=1y;1J a}1K 58:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(17|0)<33?56:54;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 57:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)>(1c-5V+32+5V>>2|0)?33:55;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 56:{1B=1k;1C=1t;1w=13;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=54;17=33;1k=1B;1t=1C;13=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 55:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)>(1a|0)?53:47;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 54:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(17|0)>((1c-(0-32)>>2)+5W+8+ -5W|0)?50:52;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 53:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(e|0)>0?51:49;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 52:{1B=1k;1C=1t;1w=13;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=50;17=0-(0-(1c-5X+32+5X>>2)+(0-8))|0;1k=1B;1t=1C;13=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 51:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=23;1x=c[2e+(13-6b-1a+6b<<2)>>2]|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 50:{1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=46;1h=0;1k=3t(17<<2,c,2g)|0;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 49:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=23;1x=c[2e+(13-(0+1)+6c-1a+ -6c<<2)>>2]|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 2E:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1x=1g;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=2q;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 47:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)==(1a|0)?45:39;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 2u:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)<10?2X:2o;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 46:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(1h|0)<(17|0)?42:40;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 2x:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1x=1f;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=2q;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 45:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(e|0)>0?43:39;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 2X:{1B=1k;1C=1t;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=3B;13=13-6i+32+6i|0;1k=1B;1t=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 2q:{1V=~(~(1e<<2)|~28)&(6j|~6j);1I=~3w;1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=6g;1x=~(~(1x>>((3w&~1V|1V&1I)^(~4&3w|4&1I)))|~15)&(6k|~6k);1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 43:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=23;1x=c[2e>>2]|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 2o:{1B=1k;1C=1t;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=3B;13=13-(0-72)|0;1k=1B;1t=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 42:{c[1k+(1h<<2)>>2]=0;1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=46;1h=1h-6h+1+6h|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 6g:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(1x|0)<10?6f:4E;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 3B:{1B=1e-(0-e)|0;1C=13+ -6d+16+6d<<(((1B|0)%4|0)<<3);1B=2e+(1B-(0-(1h<<2))>>2<<2)|0;1w=c[1B>>2]|0;c[1B>>2]=1w&1C|1w^1C;1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=4;1e=1e+6e+1-6e|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 40:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=36;1h=0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 6f:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=3s;1x=1x-6E+48+6E|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 39:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)>(1a+ -4M+1+4M|0)?37:35;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 4n:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=12;1h=1h+4x+1-4x|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 4E:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=3s;1x=1x+4I+87-4I|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 37:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=23;1x=0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 7o:{1F=2c<<(((e|0)%4|0)<<3);1B=2e+((1h<<2)+ -4H+e+4H>>2<<2)|0;1D=c[1B>>2]|0;1E=~1D;1w=~1F;1C=~2G;c[1B>>2]=(1E&2G|1D&1C)^(1w&2G|1F&1C)|~(1E|1w)&(2G|1C);1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=3L;1h=0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 36:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(1h|0)<(1c|0)?32:30;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 3s:{a[d+1e>>0]=1x;1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=15;1e=1e+ -4N+1+4N|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 35:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=23;1x=c[1k+(13<<2)>>2]|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 7l:{a[d+32>>0]=0;1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=2V;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 33:{f=1c+4L+40+ -4L>>6<<4;1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)==(f&14|f^14|0)?31:29;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 3L:{g=1c-(0-40)>>6<<4;1X=~g;1V=~14;f=~2J;1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(1h|0)<((1X&2J|g&f)^(1V&2J|14&f)|~(1X|1V)&(2J|f)|0)?4S:19;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 32:{1w=a[b+1h>>0]<<(((1h|0)%4|0)<<3);1B=1k+(1h>>2<<2)|0;1C=c[1B>>2]|0;c[1B>>2]=1w&1C|1w^1C;1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=36;1h=1h-(0-1)|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 31:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=23;1x=0-(0-(1c<<3)+(0-2n))|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 30:{e=0-(0-1c+(0-32))|0;f=2c<<(((e|0)%4|0)<<3);e=1k+(e>>2<<2)|0;g=c[e>>2]|0;c[e>>2]=g&f|g^f;e=(1c|0)%4|0;f=2e;g=f+36|0;1Z{c[f>>2]=0;f=f+4|0}1Y((f|0)<(g|0));1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=28;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 4S:{1F=1k;1D=1t;1G=13;1v=17;1j=1d;$a=d;ab=e;1p=1f;1s=1g;1r=1b;1q=1l;1m=1c;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=4g;1e=0;1k=1F;1t=1D;13=1G;17=1v;1d=1j;d=$a;e=ab;1c=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 29:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)>(0-(0-1a+(0-1))|0)?27:25;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 28:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(e|0)>0?26:16;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 4g:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(1e|0)<16?4R:4j;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 27:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=23;1x=0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 26:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=22;1h=1c+(0-e)|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 4R:{1w=(1g^~1b)&1g;13=~-3C;13=(~1f&-3C|1f&13)^(~1b&-3C|1b&13);13=(13^~(~1b|0|1b&~-1))&13;17=~3z;17=(3z&~13|13&17)^(~1w&3z|1w&17);1w=0-(0-(~(~1l|~-2)&(5d|~5d))+(0-17))|0;1w=(1w^~-2)&1w;13=~(~1l|~1)&(4Q|~4Q);1E=1k;1F=1t;1D=1d;1G=d;1v=e;1j=1p;$a=1s;ab=1r;1m=1q;1n=1c;1i=1e;1o=1h;1u=1f;1z=1g;1A=1b;1y=1l;f=4T;1a=1c-4P+ -1+4P>>2;1x=17;17=(1w&13|1w^13)+4K+(~(~17|~1)&(4O|~4O))-4K|0;13=((1e|0)%16|0)-(0-1h)|0;1k=1E;1t=1F;1d=1D;d=1G;e=1v;1p=1j;1s=$a;1r=ab;1q=1m;1c=1n;1e=1i;1h=1o;1f=1u;1g=1z;1b=1A;1l=1y;1J a}1K 25:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=23;1x=c[1k+(13<<2)>>2]|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 4T:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)>(1c-(0-32)>>2|0)?7A:4U;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 4U:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(13|0)>(1a|0)?2D:7u;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 23:{1a=c[1U+(1e<<2)>>2]|0;1d=(~(~1a|~-2)&(~-5b|-5b))+5c+1x+ -5c|0;1d=(1d^~-2)&1d;13=(1a^~1)&1a;13=(1d&13|1d^13)-5a+(~(~1x|~1)&(4J|~4J))+5a|0;1d=13+ -4Z+((17^~-2)&17)+4Z|0;1d=(1d^~-2)&1d;1w=(17^~1)&17;1a=(1d&1w|1d^1w)-(0-(~(~(0-(0-1a+(0-1x)))|~1)&(4V|~4V)))|0;1w=(1e|0)%4|0;1w=(1w<<2)-4W+ac+4W-(0-((Z(0-(0-1w+(0+1))|0,1w)|0)/2|0))|0;1d=1w-(0+ad)|0;1E=1a<<1d;1w=1a>>>(a6+(0-1w)|0);1B=~1E;1C=~1w;1D=~-3n;1D=(1B&-3n|1E&1D)^(1C&-3n|1w&1D)|~(1B|1C)&(-3n|1D);1C=(1b^~1)&1b;1B=(~(~(1b+ -4X+3V+4X)|~-2)&(~-4Y|-4Y))+ -6F+1D+6F|0;1B=(1B^~-2)&1B;1w=~1B;1E=~1C;1F=~3e;g=(1D^~1)&1D;1X=~g;1V=~-3V;1I=~3o;1G=1k;1v=1t;1j=17;$a=d;ab=e;1m=1p;1n=1s;1i=1r;1o=1q;1u=1c;1z=1h;1A=1g;1y=1b;1l=1f;f=63;1b=0-(0-((1X&3o|g&1I)^(1V&3o|-3V&1I)|~(1X|1V)&(3o|1I))+(0-((1w&3e|1B&1F)^(1E&3e|1C&1F)|~(1w|1E)&(3e|1F))))|0;1x=1D;1e=1e+5e+1-5e|0;1k=1G;1t=1v;17=1j;d=$a;e=ab;1p=1m;1s=1n;1r=1i;1q=1o;1c=1u;1h=1z;1f=1A;1g=1y;1J a}1K 2D:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(e|0)>0?4z:7y;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 22:{1I=1k;1B=1t;1C=13;1w=17;1E=1d;1F=d;1D=e;1G=1p;1v=1s;1j=1r;$a=1q;ab=1c;1m=1e;1n=1h;1i=1x;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=(1h|0)<(1c|0)?18:16;1k=1I;1t=1B;13=1C;17=1w;1d=1E;d=1F;e=1D;1p=1G;1s=1v;1r=1j;1q=$a;1c=ab;1e=1m;1h=1n;1x=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 4z:{1B=1k;1C=1t;1w=13;1E=17;1F=1d;1D=d;1G=e;1v=1p;1j=1s;$a=1r;ab=1q;1m=1c;1n=1e;1i=1h;1o=1f;1u=1g;1z=1b;1A=1l;1y=1a;f=2j;1x=c[2e+(13+(0-1a)<<2)>>2]|0;1k=1B;1t=1C;13=1w;17=1E;1d=1F;d=1D;e=1G;1p=1v;1s=1j;1r=$a;1q=ab;1c=1m;1e=1n;1h=1i;1f=1o;1g=1u;1b=1z;1l=1A;1a=1y;1J a}1K 21:{1Q=(1q^~1)&1q;1M=1l-(0-3K)+4A+((1q^~-2)&1q)-4A|0;1M=(1M^~-2)&1M;1P=~1M;1S=~1Q;g=~-2Q;1O=~(~1l|~1)&(~-4C|-4C);1T=~1O;1R=~-3K;1N=~-2O;1B=((1s^~-2)&1s)-4D+1g+4D|0;1B=(1B^~-2)&1B;1C=~(~1s|~1)&(4F|~4F);1w=~(~(((1p^~-2)&1p)-4G+1f+4G)|~-2)&(4y|~4y);1E=(1p^~1)&1p;1V=1b-(0-4h)+ -4B+((1r^~-2)&1r)+4B|0;1V=(1V^~-2)&1V;1I=(1r^~1)&1r;1X=(1b^~1)&1b;1F=1k;1D=1t;1G=13;1v=17;1j=1d;$a=d;ab=e;1m=1p;1n=1s;1i=1r;1o=1q;1u=1c;1z=1e;1A=1x;1y=1a;f=3L;1l=((1T&-2O|1O&1N)^(1R&-2O|-3K&1N)|~(1T|1R)&(-2O|1N))-(0-((1P&-2Q|1M&g)^(1S&-2Q|1Q&g)|~(1P|1S)&(-2Q|g)))|0;1b=(1X&-4h|1X^-4h)-7H+(1V&1I|1V^1I)+7H|0;1g=0-(0-(1B&1C|1B^1C)+(0-(~(~1g|~1)&(7x|~7x))))|0;1f=(1w&1E|1w^1E)-(0-((1f^~1)&1f))|0;1h=0-(0-1h+(0-16))|0;1k=1F;1t=1D;13=1G;17=1v;1d=1j;d=$a;e=ab;1p=1m;1s=1n;1r=1i;1q=1o;1c=1u;1e=1z;1x=1A;1a=1y;1J a}1K 7y:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1h;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=2j;1x=c[2e+(13-7w+ -1+7w+ -7v-1a+7v<<2)>>2]|0;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1h=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 7u:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(13|0)==(1a|0)?3S:3Y;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 19:{$a=1k;ab=1t;1m=13;1n=17;1i=1d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=15;1e=0;d=3t(33,c,2g)|0;1k=$a;1t=ab;13=1m;17=1n;1d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 3S:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(e|0)>0?7r:3Y;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 18:{$a=a[b+1h>>0]<<(((1h|0)%4|0)<<3);1j=c[2e>>2]|0;c[2e>>2]=$a&1j|$a^1j;1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=22;1h=1h+ -7s+1+7s|0;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 7r:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1h;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=2j;1x=c[2e>>2]|0;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1h=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 16:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=12;1h=0;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 3Y:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(13|0)>(1a+7m+1-7m|0)?2c:2Y;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 15:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(1e|0)<32?11:7l;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 2c:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1h;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=2j;1x=0;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1h=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 2Y:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1h;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=2j;1x=c[1k+(13<<2)>>2]|0;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1h=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 7A:{f=1c-(0-40)>>6<<4;1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(13|0)==(f&14|f^14|0)?7q:3W;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 12:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(1h|0)<8?8:7o;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 7q:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1h;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=2j;1x=(1c<<3)+7p+2n+ -7p|0;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1h=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 11:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=9;1h=(1e|0)/8|0;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 3W:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(13|0)>(1a+ -7z+1+7z|0)?7I:7J;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 7I:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1h;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=2j;1x=0;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1h=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 9:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(1h|0)==0?7:5;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 7J:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1h;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=2j;1x=c[1k+(13<<2)>>2]|0;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1h=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 8:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=4;1e=0;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 2j:{13=c[1U+(1e<<2)>>2]|0;1a=~(~13|~1)&(7G|~7G);13=~(~(0-(0-(0-(0-1x+(0+a5)))+(0-(~(~13|~-2)&(~-7F|-7F)))))|~-2)&(~-7E|-7E);1d=(1x^~1)&1x;1m=~1d;1o=~-7C;1n=~-2N;1a=0-(0-((1m&-2N|1d&1n)^(1o&-2N|-7C&1n)|~(1m|1o)&(-2N|1n))+(0-(13&1a|13^1a)))|0;13=0-(0-1a+(0-ah))|0;1n=(17^~1)&17;1o=~(~(13-(0-((17^~-2)&17)))|~-2)&(~-7j|-7j);1m=~1o;1d=~1n;1i=~-2L;1a=~(~(-ae+6P-1a-6P)|~1)&(6O|~6O);1a=((1m&-2L|1o&1i)^(1d&-2L|1n&1i)|~(1m|1d)&(-2L|1i))-6Q+(1&~1a|1a&~1)+6Q|0;1i=((1e|0)%4|0)*5|0;1d=1i-(0-7)|0;1m=1a<<1d;1i=1a>>>(25+(0-1i)|0);1i=1m&1i|1m^1i;1m=~(~(1i+6R+((1b^~-2)&1b)+ -6R)|~-2)&(6T|~6T);1n=(1b^~1)&1b;1o=1k;1u=1t;1z=17;1A=d;1y=e;1S=1p;1P=1s;1Q=1r;1M=1q;1N=1c;1R=1h;1T=1g;1O=1b;1l=1f;f=4g;1b=(1m&1n|1m^1n)-(0-((1i^~1)&1i))|0;1x=1i;1e=1e-(0-1)|0;1k=1o;1t=1u;17=1z;d=1A;e=1y;1p=1S;1s=1P;1r=1Q;1q=1M;1c=1N;1h=1R;1f=1T;1g=1O;1J a}1K 7:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1h;1x=1l;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=2q;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1h=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 4j:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(1e|0)<32?6S:97;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 5:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(1h|0)==1?3:1;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 4:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(1e|0)<4?0:4n;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 6S:{17=~1f|0|1f&~-1;1v=2s&~1b|1b&~2s;ab=~1v;13=~17;$a=~-2W;$a=(ab&-2W|1v&$a)^(13&-2W|17&$a)|~(ab|13)&(-2W|$a);13=~4l;13=(4l&~1g|1g&13)^(~2s&4l|2s&13);ab=~1f;1v=~13;1j=~-2T;1j=(ab&-2T|1f&1j)^(1v&-2T|13&1j)|~(ab|1v)&(-2T|1j);$a=($a^~2s)&$a;1v=~(~1b|~-6M)&(~-6N|-6N);1v=(1v^~1f)&1v;1j=(1j^~2s)&1j;17=(17^~-6M)&17;17=(17^~(1g&~1f|1f&~1g))&17;1v=$a&1v|$a^1v;1j=17&1j|17^1j;17=~3D;17=(3D&~1j|1j&17)^(~1v&3D|1v&17);1v=~(~((~(~1l|~-2)&(~-6H|-6H))-(0-17))|~-2)&(6G|~6G);1j=(1l^~1)&1l;$a=~1v;ab=~1j;13=~-2P;1m=1k;1n=1t;1i=1d;1o=d;1u=e;1z=1p;1A=1s;1y=1r;1S=1q;1P=1c;1Q=1e;1M=1h;1N=1f;1R=1g;1T=1b;1O=1l;f=3x;1a=0-(0-1c+(0+1))>>2;1x=17;17=(($a&-2P|1v&13)^(ab&-2P|1j&13)|~($a|ab)&(-2P|13))+7k+(~(~17|~1)&(~-6J|-6J))-7k|0;13=0-(0-(((1e*5|0)+6U+1+ -6U|0)%16|0)+(0-1h))|0;1k=1m;1t=1n;1d=1i;d=1o;e=1u;1p=1z;1s=1A;1r=1y;1q=1S;1c=1P;1e=1Q;1h=1M;1f=1N;1g=1R;1b=1T;1l=1O;1J a}1K 3:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1h;1x=1b;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=2q;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1h=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 3x:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(13|0)>(1c+7e+32-7e>>2|0)?3u:7d;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 7d:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(13|0)>(1a|0)?7g:7f;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 1:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(1h|0)==2?2E:2x;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 7g:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=(e|0)>0?7b:3G;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 0:{1j=1k;$a=1t;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=2u;13=((((1h*27|0)-(0-(1e*62|0))-(0-(Z(0-(0-(1h*84|0)+(0-21))|0,(1e*28|0)+7h+97+ -7h|0)|0))|0)*5|0)+7c+a0-7c|0)%32|0;1k=1j;1t=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}1K 7b:{1j=1k;$a=1t;ab=13;1m=17;1n=1d;1i=d;1o=e;1u=1p;1z=1s;1A=1r;1y=1q;1S=1c;1P=1e;1Q=1h;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;f=99;1x=c[2e+(13+6W-1a+ -6W<<2)>>2]|0;1k=1j;1t=$a;13=ab;17=1m;1d=1n;d=1i;e=1o;1p=1u;1s=1z;1r=1A;1q=1y;1c=1S;1e=1P;1h=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}9L:{1v=1k;1j=1t;$a=13;ab=17;1m=1d;1n=d;1i=e;1o=1p;1u=1s;1z=1r;1A=1q;1y=1c;1S=1e;1P=1h;1Q=1x;1M=1f;1N=1g;1R=1b;1T=1l;1O=1a;1k=1v;1t=1j;13=$a;17=ab;1d=1m;d=1n;e=1i;1p=1o;1s=1u;1r=1z;1q=1A;1c=1y;1e=1S;1h=1P;1x=1Q;1f=1M;1g=1N;1b=1R;1l=1T;1a=1O;1J a}}1Y(0);1H((3E|0)==2D){i=2v;2f 3F=0;2f 2w=0;1Y(1){2f 3v=3p[d+2w>>0];3F|=3v;1H(3v==0)1L;2w++}2f 2C="";1H(3F<2c){2f 2M;1Y(2w>0){2M=6Y.9T.9S(6Y,3p.9W(d,d+2y.6Z(2w,3b)));2C=2C?2C+2M:2M;d+=3b;2w-=3b}2d 2C}}i=2v;2d 0}2k 3t(a,c,2g){a=a|0;2f b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0;1Z 1H(a>>>0<9X){o=a>>>0<11?16:a+11&-8;a=o>>>3;j=c[48]|0;b=j>>>a;1H(b&3|0){b=(b&1^1)+a|0;d=2i+(b<<1<<2)|0;e=d+8|0;f=c[e>>2]|0;g=f+8|0;h=c[g>>2]|0;1Z 1H((d|0)!=(h|0)){a=h+12|0;1H((c[a>>2]|0)==(f|0)){c[a>>2]=d;c[e>>2]=h;1L}}1W c[48]=j&~(1<<b);1Y(0);L=b<<3;c[f+4>>2]=L|3;L=f+L+4|0;c[L>>2]=c[L>>2]|1;L=g;2d L|0}h=c[50]|0;1H(o>>>0>h>>>0){1H(b|0){d=2<<a;d=b<<a&(d|0-d);d=(d&0-d)+ -1|0;i=d>>>12&16;d=d>>>i;f=d>>>5&8;d=d>>>f;g=d>>>2&4;d=d>>>g;e=d>>>1&2;d=d>>>e;b=d>>>1&1;b=(f|i|g|e|b)+(d>>>b)|0;d=2i+(b<<1<<2)|0;e=d+8|0;g=c[e>>2]|0;i=g+8|0;f=c[i>>2]|0;1Z 1H((d|0)!=(f|0)){a=f+12|0;1H((c[a>>2]|0)==(g|0)){c[a>>2]=d;c[e>>2]=f;k=c[50]|0;1L}}1W{c[48]=j&~(1<<b);k=h}1Y(0);h=(b<<3)-o|0;c[g+4>>2]=o|3;e=g+o|0;c[e+4>>2]=h|1;c[e+h>>2]=h;1H(k|0){f=c[53]|0;b=k>>>3;d=2i+(b<<1<<2)|0;a=c[48]|0;b=1<<b;1H(a&b){a=d+8|0;b=c[a>>2]|0;1H(!(b>>>0<(c[52]|0)>>>0)){l=a;m=b}}1W{c[48]=a|b;l=d+8|0;m=d}c[l>>2]=f;c[m+12>>2]=f;c[f+8>>2]=m;c[f+12>>2]=d}c[50]=h;c[53]=e;L=i;2d L|0}a=c[49]|0;1H(a){d=(a&0-a)+ -1|0;K=d>>>12&16;d=d>>>K;J=d>>>5&8;d=d>>>J;L=d>>>2&4;d=d>>>L;b=d>>>1&2;d=d>>>b;e=d>>>1&1;e=c[2m+((J|K|L|b|e)+(d>>>e)<<2)>>2]|0;d=(c[e+4>>2]&-8)-o|0;b=e;1Y(1){a=c[b+16>>2]|0;1H(!a){a=c[b+20>>2]|0;1H(!a){j=e;1L}}b=(c[a+4>>2]&-8)-o|0;L=b>>>0<d>>>0;d=L?b:d;b=a;e=L?a:e}g=c[52]|0;i=j+o|0;h=c[j+24>>2]|0;e=c[j+12>>2]|0;1Z 1H((e|0)==(j|0)){b=j+20|0;a=c[b>>2]|0;1H(!a){b=j+16|0;a=c[b>>2]|0;1H(!a){n=0;1L}}1Y(1){e=a+20|0;f=c[e>>2]|0;1H(f|0){a=f;b=e;1J}e=a+16|0;f=c[e>>2]|0;1H(!f)1L;1W{a=f;b=e}}1H(!(b>>>0<g>>>0)){c[b>>2]=0;n=a;1L}}1W{f=c[j+8>>2]|0;a=f+12|0;b=e+8|0;1H((c[b>>2]|0)==(j|0)){c[a>>2]=e;c[b>>2]=f;n=e;1L}}1Y(0);1Z 1H(h|0){a=c[j+28>>2]|0;b=2m+(a<<2)|0;1H((j|0)==(c[b>>2]|0)){c[b>>2]=n;1H(!n){c[49]=c[49]&~(1<<a);1L}}1W{a=h+16|0;1H((c[a>>2]|0)==(j|0))c[a>>2]=n;1W c[h+20>>2]=n;1H(!n)1L}b=c[52]|0;c[n+24>>2]=h;a=c[j+16>>2]|0;1Z 1H(a|0)1H(!(a>>>0<b>>>0)){c[n+16>>2]=a;c[a+24>>2]=n;1L}1Y(0);a=c[j+20>>2]|0;1H(a|0)1H(!(a>>>0<(c[52]|0)>>>0)){c[n+20>>2]=a;c[a+24>>2]=n;1L}}1Y(0);1H(d>>>0<16){L=d+o|0;c[j+4>>2]=L|3;L=j+L+4|0;c[L>>2]=c[L>>2]|1}1W{c[j+4>>2]=o|3;c[i+4>>2]=d|1;c[i+d>>2]=d;a=c[50]|0;1H(a|0){f=c[53]|0;b=a>>>3;e=2i+(b<<1<<2)|0;a=c[48]|0;b=1<<b;1H(a&b){a=e+8|0;b=c[a>>2]|0;1H(!(b>>>0<(c[52]|0)>>>0)){p=a;q=b}}1W{c[48]=a|b;p=e+8|0;q=e}c[p>>2]=f;c[q+12>>2]=f;c[f+8>>2]=q;c[f+12>>2]=e}c[50]=d;c[53]=i}L=j+8|0;2d L|0}}}1W 1H(a>>>0<=9Z){a=a+11|0;o=a&-8;j=c[49]|0;1H(j){d=0-o|0;a=a>>>8;1H(a)1H(o>>>0>3d)i=31;1W{q=(a+3c|0)>>>16&8;E=a<<q;p=(E+3g|0)>>>16&4;E=E<<p;i=(E+3h|0)>>>16&2;i=14-(p|q|i)+(E<<i>>>15)|0;i=o>>>(i+7|0)&1|i<<1}1W i=0;b=c[2m+(i<<2)>>2]|0;a:1Z 1H(!b){a=0;b=0;E=86}1W{f=d;a=0;g=o<<((i|0)==31?0:25-(i>>>1)|0);h=b;b=0;1Y(1){e=c[h+4>>2]&-8;d=e-o|0;1H(d>>>0<f>>>0)1H((e|0)==(o|0)){a=h;b=h;E=90;1L a}1W b=h;1W d=f;e=c[h+20>>2]|0;h=c[h+16+(g>>>31<<2)>>2]|0;a=(e|0)==0|(e|0)==(h|0)?a:e;e=(h|0)==0;1H(e){E=86;1L}1W{f=d;g=g<<(e&1^1)}}}1Y(0);1H((E|0)==86){1H((a|0)==0&(b|0)==0){a=2<<i;a=j&(a|0-a);1H(!a)1L;q=(a&0-a)+ -1|0;m=q>>>12&16;q=q>>>m;l=q>>>5&8;q=q>>>l;n=q>>>2&4;q=q>>>n;p=q>>>1&2;q=q>>>p;a=q>>>1&1;a=c[2m+((l|m|n|p|a)+(q>>>a)<<2)>>2]|0}1H(!a){i=d;j=b}1W E=90}1H((E|0)==90)1Y(1){E=0;q=(c[a+4>>2]&-8)-o|0;e=q>>>0<d>>>0;d=e?q:d;b=e?a:b;e=c[a+16>>2]|0;1H(e|0){a=e;E=90;1J}a=c[a+20>>2]|0;1H(!a){i=d;j=b;1L}1W E=90}1H((j|0)!=0?i>>>0<((c[50]|0)-o|0)>>>0:0){f=c[52]|0;h=j+o|0;g=c[j+24>>2]|0;d=c[j+12>>2]|0;1Z 1H((d|0)==(j|0)){b=j+20|0;a=c[b>>2]|0;1H(!a){b=j+16|0;a=c[b>>2]|0;1H(!a){s=0;1L}}1Y(1){d=a+20|0;e=c[d>>2]|0;1H(e|0){a=e;b=d;1J}d=a+16|0;e=c[d>>2]|0;1H(!e)1L;1W{a=e;b=d}}1H(!(b>>>0<f>>>0)){c[b>>2]=0;s=a;1L}}1W{e=c[j+8>>2]|0;a=e+12|0;b=d+8|0;1H((c[b>>2]|0)==(j|0)){c[a>>2]=d;c[b>>2]=e;s=d;1L}}1Y(0);1Z 1H(g|0){a=c[j+28>>2]|0;b=2m+(a<<2)|0;1H((j|0)==(c[b>>2]|0)){c[b>>2]=s;1H(!s){c[49]=c[49]&~(1<<a);1L}}1W{a=g+16|0;1H((c[a>>2]|0)==(j|0))c[a>>2]=s;1W c[g+20>>2]=s;1H(!s)1L}b=c[52]|0;c[s+24>>2]=g;a=c[j+16>>2]|0;1Z 1H(a|0)1H(!(a>>>0<b>>>0)){c[s+16>>2]=a;c[a+24>>2]=s;1L}1Y(0);a=c[j+20>>2]|0;1H(a|0)1H(!(a>>>0<(c[52]|0)>>>0)){c[s+20>>2]=a;c[a+24>>2]=s;1L}}1Y(0);1Z 1H(i>>>0>=16){c[j+4>>2]=o|3;c[h+4>>2]=i|1;c[h+i>>2]=i;a=i>>>3;1H(i>>>0<2n){d=2i+(a<<1<<2)|0;b=c[48]|0;a=1<<a;1H(b&a){a=d+8|0;b=c[a>>2]|0;1H(!(b>>>0<(c[52]|0)>>>0)){u=a;v=b}}1W{c[48]=b|a;u=d+8|0;v=d}c[u>>2]=h;c[v+12>>2]=h;c[h+8>>2]=v;c[h+12>>2]=d;1L}a=i>>>8;1H(a)1H(i>>>0>3d)d=31;1W{K=(a+3c|0)>>>16&8;L=a<<K;J=(L+3g|0)>>>16&4;L=L<<J;d=(L+3h|0)>>>16&2;d=14-(J|K|d)+(L<<d>>>15)|0;d=i>>>(d+7|0)&1|d<<1}1W d=0;e=2m+(d<<2)|0;c[h+28>>2]=d;a=h+16|0;c[a+4>>2]=0;c[a>>2]=0;a=c[49]|0;b=1<<d;1H(!(a&b)){c[49]=a|b;c[e>>2]=h;c[h+24>>2]=e;c[h+12>>2]=h;c[h+8>>2]=h;1L}f=i<<((d|0)==31?0:25-(d>>>1)|0);a=c[e>>2]|0;1Y(1){1H((c[a+4>>2]&-8|0)==(i|0)){d=a;E=3A;1L}b=a+16+(f>>>31<<2)|0;d=c[b>>2]|0;1H(!d){E=2V;1L}1W{f=f<<1;a=d}}1H((E|0)==2V)1H(!(b>>>0<(c[52]|0)>>>0)){c[b>>2]=h;c[h+24>>2]=a;c[h+12>>2]=h;c[h+8>>2]=h;1L}1W 1H((E|0)==3A){a=d+8|0;b=c[a>>2]|0;L=c[52]|0;1H(b>>>0>=L>>>0&d>>>0>=L>>>0){c[b+12>>2]=h;c[a>>2]=h;c[h+8>>2]=b;c[h+12>>2]=d;c[h+24>>2]=0;1L}}}1W{L=i+o|0;c[j+4>>2]=L|3;L=j+L+4|0;c[L>>2]=c[L>>2]|1}1Y(0);L=j+8|0;2d L|0}}}1W o=-1;1Y(0);d=c[50]|0;1H(d>>>0>=o>>>0){a=d-o|0;b=c[53]|0;1H(a>>>0>15){L=b+o|0;c[53]=L;c[50]=a;c[L+4>>2]=a|1;c[L+a>>2]=a;c[b+4>>2]=o|3}1W{c[50]=0;c[53]=0;c[b+4>>2]=d|3;L=b+d+4|0;c[L>>2]=c[L>>2]|1}L=b+8|0;2d L|0}a=c[51]|0;1H(a>>>0>o>>>0){J=a-o|0;c[51]=J;L=c[54]|0;K=L+o|0;c[54]=K;c[K+4>>2]=J|1;c[L+4>>2]=o|3;L=L+8|0;2d L|0}1Z 1H(!(c[4c]|0)){a=a8;1H(!(a+ -1&a)){c[34]=a;c[70]=a;c[a7]=-1;c[3f]=-1;c[9Y]=0;c[2x]=0;c[4c]=4r.9V()/6L&-16^9U;1L}}1Y(0);h=o+48|0;g=c[34]|0;i=o+47|0;f=g+i|0;g=0-g|0;j=f&g;1H(j>>>0<=o>>>0){L=0;2d L|0}a=c[2X]|0;1H(a|0?(u=c[2o]|0,v=u+j|0,v>>>0<=u>>>0|v>>>0>a>>>0):0){L=0;2d L|0}b:1Z 1H(!(c[2x]&4)){a=c[54]|0;c:1Z 1H(a){d=2z;1Y(1){b=c[d>>2]|0;1H(b>>>0<=a>>>0?(r=d+4|0,(b+(c[r>>2]|0)|0)>>>0>a>>>0):0){e=d;d=r;1L}d=c[d+8>>2]|0;1H(!d){E=4m;1L c}}a=f-(c[51]|0)&g;1H(a>>>0<2B){b=2g;1H((b|0)==((c[e>>2]|0)+(c[d>>2]|0)|0)){1H((b|0)!=(-1|0)){h=b;f=a;E=2A;1L b}}1W E=4k}}1W E=4m;1Y(0);1Z 1H((E|0)==4m?(t=2g,(t|0)!=(-1|0)):0){a=t;b=c[70]|0;d=b+ -1|0;1H(!(d&a))a=j;1W a=j-a+(d+a&0-b)|0;b=c[2o]|0;d=b+a|0;1H(a>>>0>o>>>0&a>>>0<2B){v=c[2X]|0;1H(v|0?d>>>0<=b>>>0|d>>>0>v>>>0:0)1L;b=2g;1H((b|0)==(t|0)){h=t;f=a;E=2A;1L b}1W E=4k}}1Y(0);d:1Z 1H((E|0)==4k){d=0-a|0;1Z 1H(h>>>0>a>>>0&(a>>>0<2B&(b|0)!=(-1|0))?(w=c[34]|0,w=i-a+w&0-w,w>>>0<2B):0)1H(2g==(-1|0)){2g;1L d}1W{a=w+a|0;1L}1Y(0);1H((b|0)!=(-1|0)){h=b;f=a;E=2A;1L b}}1Y(0);c[2x]=c[2x]|4;E=4f}1W E=4f;1Y(0);1H((((E|0)==4f?j>>>0<2B:0)?(x=2g,y=2g,x>>>0<y>>>0&((x|0)!=(-1|0)&(y|0)!=(-1|0))):0)?(z=y-x|0,z>>>0>(o+40|0)>>>0):0){h=x;f=z;E=2A}1H((E|0)==2A){a=(c[2o]|0)+f|0;c[2o]=a;1H(a>>>0>(c[2q]|0)>>>0)c[2q]=a;i=c[54]|0;1Z 1H(i){e=2z;1Z{a=c[e>>2]|0;b=e+4|0;d=c[b>>2]|0;1H((h|0)==(a+d|0)){A=a;B=b;C=d;D=e;E=7a;1L}e=c[e+8>>2]|0}1Y((e|0)!=0);1H(((E|0)==7a?(c[D+12>>2]&8|0)==0:0)?i>>>0<h>>>0&i>>>0>=A>>>0:0){c[B>>2]=C+f;L=i+8|0;L=(L&7|0)==0?0:0-L&7;K=i+L|0;L=f-L+(c[51]|0)|0;c[54]=K;c[51]=L;c[K+4>>2]=L|1;c[K+L+4>>2]=40;c[55]=c[3f];1L}a=c[52]|0;1H(h>>>0<a>>>0){c[52]=h;j=h}1W j=a;d=h+f|0;a=2z;1Y(1){1H((c[a>>2]|0)==(d|0)){b=a;E=6X;1L}a=c[a+8>>2]|0;1H(!a){b=2z;1L}}1H((E|0)==6X)1H(!(c[a+12>>2]&8)){c[b>>2]=h;l=a+4|0;c[l>>2]=(c[l>>2]|0)+f;l=h+8|0;l=h+((l&7|0)==0?0:0-l&7)|0;a=d+8|0;a=d+((a&7|0)==0?0:0-a&7)|0;k=l+o|0;g=a-l-o|0;c[l+4>>2]=o|3;1Z 1H((a|0)!=(i|0)){1H((a|0)==(c[53]|0)){L=(c[50]|0)+g|0;c[50]=L;c[53]=k;c[k+4>>2]=L|1;c[k+L>>2]=L;1L}b=c[a+4>>2]|0;1H((b&3|0)==1){i=b&-8;f=b>>>3;e:1Z 1H(b>>>0>=2n){h=c[a+24>>2]|0;e=c[a+12>>2]|0;1Z 1H((e|0)==(a|0)){d=a+16|0;e=d+4|0;b=c[e>>2]|0;1H(!b){b=c[d>>2]|0;1H(!b){J=0;1L}}1W d=e;1Y(1){e=b+20|0;f=c[e>>2]|0;1H(f|0){b=f;d=e;1J}e=b+16|0;f=c[e>>2]|0;1H(!f)1L;1W{b=f;d=e}}1H(!(d>>>0<j>>>0)){c[d>>2]=0;J=b;1L}}1W{f=c[a+8>>2]|0;b=f+12|0;d=e+8|0;1H((c[d>>2]|0)==(a|0)){c[b>>2]=e;c[d>>2]=f;J=e;1L}}1Y(0);1H(!h)1L;b=c[a+28>>2]|0;d=2m+(b<<2)|0;1Z 1H((a|0)!=(c[d>>2]|0)){b=h+16|0;1H((c[b>>2]|0)==(a|0))c[b>>2]=J;1W c[h+20>>2]=J;1H(!J)1L e}1W{c[d>>2]=J;1H(J|0)1L;c[49]=c[49]&~(1<<b);1L e}1Y(0);e=c[52]|0;c[J+24>>2]=h;b=a+16|0;d=c[b>>2]|0;1Z 1H(d|0)1H(!(d>>>0<e>>>0)){c[J+16>>2]=d;c[d+24>>2]=J;1L}1Y(0);b=c[b+4>>2]|0;1H(!b)1L;1H(!(b>>>0<(c[52]|0)>>>0)){c[J+20>>2]=b;c[b+24>>2]=J;1L}}1W{d=c[a+8>>2]|0;e=c[a+12>>2]|0;b=2i+(f<<1<<2)|0;1Z 1H((d|0)!=(b|0)){1H((c[d+12>>2]|0)==(a|0))1L}1Y(0);1H((e|0)==(d|0)){c[48]=c[48]&~(1<<f);1L}1Z 1H((e|0)==(b|0))G=e+8|0;1W{b=e+8|0;1H((c[b>>2]|0)==(a|0)){G=b;1L}}1Y(0);c[d+12>>2]=e;c[G>>2]=d}1Y(0);a=a+i|0;g=i+g|0}a=a+4|0;c[a>>2]=c[a>>2]&-2;c[k+4>>2]=g|1;c[k+g>>2]=g;a=g>>>3;1H(g>>>0<2n){d=2i+(a<<1<<2)|0;b=c[48]|0;a=1<<a;1Z 1H(!(b&a)){c[48]=b|a;K=d+8|0;L=d}1W{a=d+8|0;b=c[a>>2]|0;1H(b>>>0>=(c[52]|0)>>>0){K=a;L=b;1L}}1Y(0);c[K>>2]=k;c[L+12>>2]=k;c[k+8>>2]=L;c[k+12>>2]=d;1L}a=g>>>8;1Z 1H(!a)d=0;1W{1H(g>>>0>3d){d=31;1L}K=(a+3c|0)>>>16&8;L=a<<K;J=(L+3g|0)>>>16&4;L=L<<J;d=(L+3h|0)>>>16&2;d=14-(J|K|d)+(L<<d>>>15)|0;d=g>>>(d+7|0)&1|d<<1}1Y(0);e=2m+(d<<2)|0;c[k+28>>2]=d;a=k+16|0;c[a+4>>2]=0;c[a>>2]=0;a=c[49]|0;b=1<<d;1H(!(a&b)){c[49]=a|b;c[e>>2]=k;c[k+24>>2]=e;c[k+12>>2]=k;c[k+8>>2]=k;1L}f=g<<((d|0)==31?0:25-(d>>>1)|0);a=c[e>>2]|0;1Y(1){1H((c[a+4>>2]&-8|0)==(g|0)){d=a;E=6I;1L}b=a+16+(f>>>31<<2)|0;d=c[b>>2]|0;1H(!d){E=6V;1L}1W{f=f<<1;a=d}}1H((E|0)==6V)1H(!(b>>>0<(c[52]|0)>>>0)){c[b>>2]=k;c[k+24>>2]=a;c[k+12>>2]=k;c[k+8>>2]=k;1L}1W 1H((E|0)==6I){a=d+8|0;b=c[a>>2]|0;L=c[52]|0;1H(b>>>0>=L>>>0&d>>>0>=L>>>0){c[b+12>>2]=k;c[a>>2]=k;c[k+8>>2]=b;c[k+12>>2]=d;c[k+24>>2]=0;1L}}}1W{L=(c[51]|0)+g|0;c[51]=L;c[54]=k;c[k+4>>2]=L|1}1Y(0);L=l+8|0;2d L|0}1W b=2z;1Y(1){a=c[b>>2]|0;1H(a>>>0<=i>>>0?(F=a+(c[b+4>>2]|0)|0,F>>>0>i>>>0):0){b=F;1L}b=c[b+8>>2]|0}g=b+ -47|0;d=g+8|0;d=g+((d&7|0)==0?0:0-d&7)|0;g=i+16|0;d=d>>>0<g>>>0?i:d;a=d+8|0;e=h+8|0;e=(e&7|0)==0?0:0-e&7;L=h+e|0;e=f+ -40-e|0;c[54]=L;c[51]=e;c[L+4>>2]=e|1;c[L+e+4>>2]=40;c[55]=c[3f];e=d+4|0;c[e>>2]=27;c[a>>2]=c[2u];c[a+4>>2]=c[2E];c[a+8>>2]=c[7t];c[a+12>>2]=c[4b];c[2u]=h;c[2E]=f;c[4b]=0;c[7t]=a;a=d+24|0;1Z{a=a+4|0;c[a>>2]=7}1Y((a+4|0)>>>0<b>>>0);1H((d|0)!=(i|0)){h=d-i|0;c[e>>2]=c[e>>2]&-2;c[i+4>>2]=h|1;c[d>>2]=h;a=h>>>3;1H(h>>>0<2n){d=2i+(a<<1<<2)|0;b=c[48]|0;a=1<<a;1H(b&a){a=d+8|0;b=c[a>>2]|0;1H(!(b>>>0<(c[52]|0)>>>0)){H=a;I=b}}1W{c[48]=b|a;H=d+8|0;I=d}c[H>>2]=i;c[I+12>>2]=i;c[i+8>>2]=I;c[i+12>>2]=d;1L}a=h>>>8;1H(a)1H(h>>>0>3d)d=31;1W{K=(a+3c|0)>>>16&8;L=a<<K;J=(L+3g|0)>>>16&4;L=L<<J;d=(L+3h|0)>>>16&2;d=14-(J|K|d)+(L<<d>>>15)|0;d=h>>>(d+7|0)&1|d<<1}1W d=0;f=2m+(d<<2)|0;c[i+28>>2]=d;c[i+20>>2]=0;c[g>>2]=0;a=c[49]|0;b=1<<d;1H(!(a&b)){c[49]=a|b;c[f>>2]=i;c[i+24>>2]=f;c[i+12>>2]=i;c[i+8>>2]=i;1L}e=h<<((d|0)==31?0:25-(d>>>1)|0);a=c[f>>2]|0;1Y(1){1H((c[a+4>>2]&-8|0)==(h|0)){d=a;E=6K;1L}b=a+16+(e>>>31<<2)|0;d=c[b>>2]|0;1H(!d){E=3T;1L}1W{e=e<<1;a=d}}1H((E|0)==3T)1H(!(b>>>0<(c[52]|0)>>>0)){c[b>>2]=i;c[i+24>>2]=a;c[i+12>>2]=i;c[i+8>>2]=i;1L}1W 1H((E|0)==6K){a=d+8|0;b=c[a>>2]|0;L=c[52]|0;1H(b>>>0>=L>>>0&d>>>0>=L>>>0){c[b+12>>2]=i;c[a>>2]=i;c[i+8>>2]=b;c[i+12>>2]=d;c[i+24>>2]=0;1L}}}}1W{L=c[52]|0;1H((L|0)==0|h>>>0<L>>>0)c[52]=h;c[2u]=h;c[2E]=f;c[4b]=0;c[57]=c[4c];c[56]=-1;a=0;1Z{L=2i+(a<<1<<2)|0;c[L+12>>2]=L;c[L+8>>2]=L;a=a+1|0}1Y((a|0)!=32);L=h+8|0;L=(L&7|0)==0?0:0-L&7;K=h+L|0;L=f+ -40-L|0;c[54]=K;c[51]=L;c[K+4>>2]=L|1;c[K+L+4>>2]=40;c[55]=c[3f]}1Y(0);a=c[51]|0;1H(a>>>0>o>>>0){J=a-o|0;c[51]=J;L=c[54]|0;K=L+o|0;c[54]=K;c[K+4>>2]=J|1;c[L+4>>2]=o|3;L=L+8|0;2d L|0}}2d 0}2k 4o(x){2d 2R(x)}2k 4i(){2f r={};r["9p"]="1";2d r}2k 2F(){2f r={};r["9q"]=1;r["9r"]=9m(9l.9h.9g())==="2k%9j%28%29%20%7B%20%8E%8L%5D%20%7D"?"a":"i";r["7i"]=0;1H(8G 8F!="8H")r["7i"]=1;r["8I"]=4r.8J(2p 4r())/6L;2d r}2k 4p(){2d 2F()}2k 3U(){2d 2F()}2f 7n=(2k(){2d!8S})();1H(7n){2t.2R=2R;2t.4o=4o;2t.4i=4i;2t.2F=2F;2t.4p=4p;2t.3U=3U}',0,640,"|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||Ia||||Ha|||sa|ua|Ba|Ga|za|wa|va|ya|db|_a|Ka|ta|bb|cb|eb|Fa|Ca|Da|Ea|Ja|fb|Za|Ua|xa|ib|gb|hb|Ra|Sa|Xa|Va|Wa|Ya|if|Qa|continue|case|break|mb|nb|qb|kb|lb|ob|jb|pb|Aa|Pa|else|Oa|while|do|||||||||||pn|ps|128|return|La|var|pt|ui|232|121|function|ut|496|256|156|new|157|pm|223327204|window|160|Na|ci|159|Math|640|193|2147483647|cr|136|161|cmd5xtmts|503206210|1023|charCodeAt|1388890711|268273123|1186168603|cu|205119057|306070462|89952541|380726747|cmd5x|1172163969|1424487794|861084163|145|381686885|158|127|797466866|||||168||||234558882||Rp|1024|1048320|16777215|1317685325|170|520192|245760|373881474|2075741683|2004298390|1973195180|_|1777071147|225229394|Rq|405859795|1404706964|149|cmd5xt|104|ct|419482005|116|659082404|1514409254|148|154|529461708|539859515|Ma|ch|112|ja|pa|la|33242356|146|qa|ra|fa|ea|ca|ba|132|304|cmd5xvms|1578590490|124|100|129|107||1719848737|||||||||1859242102|163|166|ga|da|190|141|924935704|cmd5xly|119|183|2088055561|173|152|cmd5ly|cmd5xlive|oa|Date|ia|ha|ma|ka|na|1905239980|876893045|135|252947873|2103109303|1162696414|1609523247|151|1191657700|1778799498|395027463|522724937|1797841953|1330564622|1999768042|27115808|2060210203|1599288595|1332493879|583337992|139|143|138|137|1854390030|23571533|1742022525|66713274|2098496209|||||||||||1663655995|1999460729|729837134|2136387674|1021816955|1581647320|102|2136007327|101|906020365|103|106|105|520486856|1024496191|2145560826|1775524201|403699684|221245562|705355747|1628865018|125479053|566281542|946902778|1017329338|109|65536|2047|65535||57343|55296|Int32Array|for|length|2097151|67108863|1588902052|1250383377|110|252|248|192|224|240|1546354233|573433763|817781417|248548091|721543188|394913534|1642549018||1735869413||||2123338553|||||794469430|845217744|1839362061|735801710|744675608|153|155|1417402377|1241365298|1821433937|1118038510|1402583234|1763856666|430907182|1732584193|1426481834|2024697286|692823717|1970494992|169207214|1934808656|171343354|1134317627|117621929|1283031477|555213856|506753693|58933214|209274788|796911875|1763841430|702715349|775604796|479053452|281|875125272|307|1e3|223327205|1513562601|1091295736|1818258150|1517567764|1491303093|117|1301399310|106029065|278|1501901147|211|String|min|167||||||||||203|113|426025673|115|77471208|111|114|1910606658|qds|128080197|1116549971|147|1849332518|isStrict|150|961017688|125|131|1916722598|162|133|1028988577|2095981013|1631560841|134|1509393712|126||524507312||1132267683|427127086|1316696592|937268693|123|122|1236535329|373897302|389564586|1502002290|680876936|40341101|165796510|643717713|1069501632|42063|176418897|701558691|1200080426|45705983|1044525330|1770035416|||||||||||1990404162|1473231341|1958414417|606105819|1804603682|187363961|1839030562|76029189|2022574463|378558|1926607734|722521979|681279174|1530992060|35309556|155497632|1094730640|1735328473|51403784|1019803690|568446438|405537848|660478335|530742520|421815835|1444681467|1163531501|640364487|1272893353|38016083|5Bnative|js_call_java_obj|typeof|undefined|tm|parse|set|20code|144|164|140|120|108|8328|this|Int8Array|255|Uint8Array|321|ArrayBuffer|1760|floor|||||||||po||3920|Array|imul|abs|172|176|toString|javaEnabled|switch|20javaEnabled|244|navigator|escape|1639813410|1639813405|qdv|qd_v|qdy|236|228|995338651|196|188|184|180|200|204|220|216|212|208|1639813437|358537222|1120210379|718787259|343485551|271733879|default|1309151649|1873313359|30611744|1560198380|1732584194|271733878|apply|fromCharCode|1431655768|now|subarray|245|171|4294967231|615|2054922799|145523070|1700485571|1416354905|96809952|601048418|169|4096|57434055|||601048392|601048386|621317265|198630844|1051523|621317264|1894986606|1126891415".split("|"),0,{}))}catch(e){}window.cmd5xtmts=cmd5xtmts,window.cmd5x=cmd5x,window.cmd5ly=cmd5ly,window.cmd5xlive=cmd5xlive,module.exports={cmd5xtmts:cmd5xtmts,cmd5x:cmd5x,cmd5ly:cmd5ly}}.call(exports,__webpack_require__,exports,module))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a={},n={},r={},o=0,s={getItem:function(e){return a[e]},setItem:function(e,t){a[e]=t},removeItem:function(e){delete a[e]}},d=function(){try{return window.localStorage.setItem("_Q_test_",1),window.localStorage.removeItem("_Q_test_"),window.localStorage}catch(e){}return s}(),l=function(){0===o&&(clearTimeout(o),o=setTimeout(function(){o=0;for(var e in n)d.setItem(e,n[e]),delete n[e];for(var t in r)d.removeItem(t),delete r[e]},1e3))};i.exports={PLAYER_VD_KEY:"QiyiPlayerVD",read:function(e){return a[e]||(a[e]=d.getItem(e)),a[e]},write:function(e,t){a[e]=t,n[e]=t,l()},remove:function(e){delete a[e],r[e]=0,l()}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(82),r=i(28);return n.CORE_TYPES=r,n}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(7),r={needRecord:!0,browserType:"",pageTmpltType:"",pgct:0,sTime_userInfo:0,sTime_P2PCore:0,sTime_history:0,sTime_showVideo:0,sTime_adInit:0,sTime_vms:0,usedTime_selfLoaded:0,usedTime_userInfo:0,usedTime_P2PCore:0,usedTime_history:0,usedTime_showVideo:0,usedTime_pageShowVideo:0,usedTime_adInit:0,usedTime_vms:0};n.on("httpStart",function(){r.sTime_userInfo=new Date-r.pgct}),n.on("httpComplete",function(){r.usedTime_userInfo=new Date-r.sTime_userInfo-r.pgct}),a.exports=r}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){function n(e){e=parseInt(e,10);var t=s(e+"IQIYI"+(new Date).getTime());return d[e]=t,t}function r(e){var t;for(var i in d)if(d[i]===e){t=i;break}return parseInt(t,10)}function o(e){return d[e]||""}var s=i(12),d={};a.exports={generate:n,getEpisodeId:r,getEventId:o}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports={Status_Idle:"idle",Status_Loadstart:"loadstart",Status_Loaddone:"loaddone",Status_LoadFailed:"error",Status_LoadedMetaData:"loadedmetadata",Status_Canplay:"canplay",Status_Waiting:"waiting",Status_Paused:"paused",Status_Play:"play",Status_Playing:"playing",Status_Stoped:"ended",Status_Stalled:"stalled",Status_Playing_Fail:"muted",NTF_StatusChanged:"statusChanged",NTF_CanPlayThrough:"canplaythrough",NTF_VolumeChanged:"volumechanged",NTF_RateChanged:"ratechange",NTF_DurationChanged:"durationchange",NTF_Seeking:"seeking",NTF_TimeUpdate:"timeupdate",NTF_Progress:"progress",NTF_NeedUserGesture4Playback:"needUserGesture",Action_Type_Controls:"controls",Action_Type_Code:"code",Action_Type_Native:"native"}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a=0,n="engine_ntf_";i.exports={Status_Assembled:n+ ++a,Status_Error:n+ ++a,Status_Done:n+ ++a,Status_Destroy:n+ ++a,NTF_MovieInfoChange:n+ ++a,NTF_VRSStart:n+ ++a,NTF_VRSPreReady:n+ ++a,NTF_VRSReady:n+ ++a,NTF_VRSDone:n+ ++a,NTF_VRSPreloaded:n+ ++a,NTF_ReJointPreload:n+ ++a,NTF_TVIDChange:n+ ++a,NTF_TVIDChanged:n+ ++a,NTF_VDChanged:n+ ++a,NTF_VDChangeFail:n+ ++a,NTF_AUDChanged:n+ ++a,NTF_AUDChangeFail:n+ ++a,NTF_Recharge:n+ ++a,NTF_SetSkipPrelude:n+ ++a,NTF_NeedUserGesture4Playback:n+ ++a,NTF_LoadTempVd:n+ ++a,NTF_ARES_Load:n+ ++a,NTF_ARES_Init:n+ ++a,NTF_ARES_Gas:n+ ++a,NTF_ARES_GasFinish:n+ ++a,NTF_ARES_Info:n+ ++a,NTF_ARES_Play:n+ ++a,NTF_ARES_End:n+ ++a,NTF_ARES_CloudPlay:n+ ++a,NTF_ARES_CloudPlayEnd:n+ ++a,NTF_AD_Start:"jsNotifyAdStart",NTF_AD_End:"jsNotifyAdEnd",NTF_ARES_NOAD:n+ ++a,NTF_ARES_READY:n+ ++a}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(13),r=i(0),o=i(2),s=r("WebFullScreen",{extend:o,methods:{__notice:function(){var e=this;e.fire({type:"change",data:e.isWebFullScreen()?"enter":"exit"})},__beforeNotice:function(){var e=this;e.fire({type:"beforechange",data:e.isWebFullScreen()?"enter":"exit"})},init:function(e,t){var i=this;i._elem=n(t),i._wrapper=n(e),i._enter=i._elem.find('[data-player-hook="webfullenter"]'),i._exit=i._elem.find('[data-player-hook="webfullexit"]');var a=function(){i.toggle()};i._elem.on("click",a)},exit:function(){var e=this;e._elem&&e.isWebFullScreen()&&(e.__beforeNotice(),e._exit.hide(),e._enter.show(),e._wrapper.removeClass("iqp-web-screen"),e._wrapper.removeClass("iqp-full-screen50"),e._wrapper.removeClass("iqp-full-screen75"),document.body.style.overflow=e.__bodyOverflow,e.__notice())},enter:function(){var e=this;e._elem&&!e.isWebFullScreen()&&(e.__bodyOverflow=document.body.style.overflow,e.__beforeNotice(),e._exit.show(),e._enter.hide(),e._wrapper.addClass("iqp-web-screen"),document.body.style.overflow="hidden",e.__notice())},toggle:function(){this.isWebFullScreen()?this.exit():this.enter()},isWebFullScreen:function(){return!!this._wrapper&&this._wrapper.hasClass("iqp-web-screen")}}});a.exports=new s}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports={seriesLoadScripts:function(e,t){"object"!=typeof e&&(e=[e]);var i=document.getElementsByTagName("head").item(0)||document.documentElement,a=[],n=e.length-1,r=function(o){a[o]=document.createElement("script"),a[o].setAttribute("type","text/javascript"),a[o].onload=a[o].onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),o!=n?r(o+1):"function"==typeof t&&t(!0))},a[o].onerror=a[o].onstalled=function(){"function"==typeof t&&t(!1)},a[o].setAttribute("src",e[o]),i.appendChild(a[o])};r(0)},parallelLoadScripts:function(e,t){"object"!=typeof e&&(e=[e]);for(var i=document.getElementsByTagName("head").item(0)||document.documentElement,a=[],n=0,r=0;r<e.length;r++)a[r]=document.createElement("script"),a[r].setAttribute("type","text/javascript"),a[r].setAttribute("async",!0),a[r].onload=a[r].onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(n++,this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),n==e.length&&"function"==typeof t&&t(!0))},a[r].onerror=a[r].onstalled=function(){"function"==typeof t&&t(!1)},a[r].setAttribute("src",e[r]),i.appendChild(a[r])}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a=0,n="ntf_";i.exports={NTF_PLG_Enable:n+a++,NTF_PLG_Disable:n+a++,NTF_HOTKEY_ControlbarShow:n+a++,NTF_Play:n+a++,NTF_Pause:n+a++,NTF_Replay:n+a++,NTF_Seek:n+a++,NTF_ChangeVolume:n+a++,NTF_SeekTime:n+a++,NTF_PlayerSmallWindowStatus:n+a++,NTF_ControlbarShow:n+a++,NTF_ControlbarHide:n+a++,NTF_DefinitionBtnClick:n+a++,NTF_DefinitionBtnMouseEnter:n+a++,NTF_DefinitionBtnMouseLeave:n+a++,NTF_DefinitionListShow:n+a++,NTF_DefinitionListhide:n+a++,NTF_DefinitionADShow:n+a++,NTF_DefinitionADClick:n+a++,NTF_FullScreen:n+a++,NTF_WebFullScreen:n+a++,NTF_SetDownLoad:n+a++,NTF_BarrageSelfSend:n+a++,NTF_BarrageSettingChange:n+a++,NTF_HIDE_BOTTOM_TOP:n+a++,NTF_SHOW_BOTTOM_TOP:n+a++,NTF_HIDE_PLAYLIST:n+a++,NTF_HIDE_TOPBAR:n+a++,NTF_SHOW_TOPBAR:n+a++,NTF_CLICK_PLAYLIST_BTN:n+a++,NTF_SHOW_PLAYLIST_BTN:n+a++,NTF_HIDE_PLAYLIST_BTN:n+a++,NTF_SHOW_CONTROLBAR_PINGBACK:n+a++,NTF_SEEKBAR_HOVER:n+a++,NTF_SHOW_HEATMAP:n+a++,NTF_HIDE_CONTROLBAR_VIDEOTIP:n+a++,NTF_SHOW_SETTING_BOX:n+a++,NTF_SUBTITLES_REGISTER_DOM:n+a++,NTF_SHOW_LOGIN_PANEL:n+a++,NTF_GESTURE_ASYNC_CONTROLS:n+a++,NTF_USER_SEEK:n+a++,NTF_BanTipHide:n+a++,NTF_WebFullScreen_BeforeChange:n+a++,NTF_WebFullScreen_AfterChange:n+a++,NTF_WebFullScreen_SetSwitch:n+a++,NTF_FullScreen_BeforeChange:n+a++,NTF_FullScreen_AfterChange:n+a++,NTF_ScoreTask_ScoreChange:n+a++,NTF_FullScreen_SetSwitch:n+a++,NTF_VideoPercent_Changed:n+a++,NTF_RIGHTBAR_STATUS_CHANGED:n+a++,NTF_Barrage_SetConfigInfo:n+a++,NTF_Barrage_SetChannelConfigInfo:n+a++,NTF_Barrage_SetSwitch:n+a++,NTF_Barrage_ShowLike:n+a++,NTF_Barrage_ShowMoreLike:n+a++,NTF_Barrage_ShowReport:n+a++,NTF_Barrage_EnsureReport:n+a++,NTF_Barrage_ShowRulePage:n+a++,NTF_Barrage_NotifyBarrageData:n+a++,NTF_Barrage_ClearBanWord:n+a++,NTF_Barrage_AddBanWord:n+a++,NTF_Barrage_RemoveBanWord:n+a++,NTF_Barrage_CatchSystemBarrage:n+a++,NTF_Barrage_NotifyGiftInfo:n+a++,NTF_Barrage_ShowSystemBarrage:n+a++,NTF_Barrage_ClickSystemBarrage:n+a++,NTF_Barrage_ClickSystemBarrageButton:n+a++,NTF_Barrage_RequestBarrageData:n+a++,NTF_Subtitles_Changing:n+a++,NTF_Subtitles_Changed:n+a++,NTF_Subtitles_ChangeFailed:n+a++,NTF_FeedBack_Show:n+a++,NTF_FeedBack_Hide:n+a++,NTF_Voice_Change:n+a++,NTF_CTXMenu_Copied:n+a++,NTF_Hotkey_Percent_Seek:n+a++,NTF_Hotkey_Playback_Rate:n+a++,Type_Play:"play",Type_Pause:"pause",Type_Replay:"replay"}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(13),r=i(0),o=i(2),s=document,d=r("FullScreen",{extend:o,methods:{init:function(e){var t=this;t._elem=n(e)[0];var i=function(){t.fire({type:"change",data:t.isFullScreen()?"enter":"exit"})};t._elem.addEventListener("fullscreenchange",i),s.addEventListener("mozfullscreenchange",i),t._elem.addEventListener("webkitfullscreenchange",i),t._elem.addEventListener("MSFullscreenChange",i)},exit:function(){var e=this._elem;if(e)if(this.fire({type:"beforechange",data:this.isFullScreen()?"enter":"exit"}),e.exitFullscreen)e.exitFullscreen();else if(s.webkitCancelFullScreen)s.webkitCancelFullScreen();else if(s.mozCancelFullScreen)s.mozCancelFullScreen();else if(e.mozCancelFullScreen)e.mozCancelFullScreen();else if(e.msExitFullscreen)e.msExitFullscreen();else try{e.webkitExitFullscreen()}catch(e){}},enter:function(){var e=this._elem;if(e)if(this.fire({type:"beforechange",data:this.isFullScreen()?"enter":"exit"}),e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.msRequestFullscreen)e.msRequestFullscreen();else try{e.webkitEnterFullScreen()}catch(e){}},toggle:function(){this.isFullScreen()?this.exit():this.enter()},isFullScreen:function(){return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen)}}});a.exports=new d}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r=i(5),o="-1",s={get:function(){if(n)o=n.tryGetFingerPrint();else{if("-1"===o)try{o=r.get("__dfp")}catch(e){o=""}if(""!==o){var e=o.split("@"),t=(new Date).getTime();3==e.length&&Number(e[2])<=t&&t<=Number(e[1])&&(o=e[0])}}return o},setSDK:function(e){n=e}};a.exports=s}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a={100:{nbid:100,value:"极速",qipu:"jisu",obid:96},200:{nbid:200,value:"流畅",qipu:"300",obid:1},300:{nbid:300,value:"高清",qipu:"600",obid:2},400:{nbid:400,value:"超清",qipu:"1000",obid:3},500:{nbid:500,value:"720P",qipu:"720P",obid:4},600:{nbid:600,value:"1080P",qipu:"1080P",obid:5},610:{nbid:610,value:"1080P50",qipu:"1080P50",obid:27},700:{nbid:700,value:"2K",qipu:"2K",obid:6},800:{nbid:800,value:"4K",qipu:"4K",obid:10},96:{nbid:100,value:"极速",qipu:"jisu",obid:96},1:{nbid:200,value:"流畅",qipu:"300",obid:1},2:{nbid:300,value:"高清",qipu:"600",obid:2},3:{nbid:400,value:"超清",qipu:"1000",obid:3},4:{nbid:500,value:"720P",qipu:"720P",obid:4},5:{nbid:600,value:"1080P",qipu:"1080P",obid:5},27:{nbid:610,value:"1080P50",qipu:"1080P50",obid:27},6:{nbid:700,value:"2K",qipu:"2K",obid:6},10:{nbid:800,value:"4K",qipu:"4K",obid:10}},n={getNewVd:function(e){return a[e]?a[e].nbid:""},getOldVd:function(e){return a[e]?a[e].obid:""}};i.exports=n}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(1),o=i(8),s=(i(12),i(2)),d=new r("EpisodeManager"),l={},u=function(e){return parseInt(e,10)},c=n("EpisodeManager",{extend:s,construct:function(){},methods:{_ensureDataStructure:function(e){var t=l[e]||{};o.isObject(t.pres)?(t.pres.finish=!!t.pres.finish,t.pres.queue=o.isArray(t.pres.queue)?t.pres.queue:[]):t.pres={finish:!1,queue:[]},o.isObject(t.mids)?(t.mids.finish=!!t.mids.finish,t.mids.queue=o.isArray(t.mids.queue)?t.mids.queue:[]):t.mids={finish:!1,queue:[]},o.isObject(t.features)?(t.features.finish=!!t.features.finish,t.features.queue=o.isArray(t.features.queue)?t.features.queue:[]):t.features={finish:!1,queue:[]},l[e]=t},clear:function(e){e=u(e),delete l[e]},clearAll:function(){l={}},addPres:function(e,t){var i=this;e=u(e),i.valid(e)&&o.isArray(t)&&(l[e].pres.queue=l[e].pres.queue.concat(t))},finishPres:function(e,t){var i=this;if(e=u(e),i.valid(e)){if("boolean"!=typeof t)return l[e].pres.finish;var a=l[e].pres;t&&!1===a.finish&&i.fire({type:"finishAddPres",data:{videoId:e,length:a.queue.length}}),a.finish=t}else{if("boolean"!=typeof t)return!1;d.warn("finishPres: episode id not valid, "+e)}},getPres:function(e){var t=this,i=[];return e=u(e),t.valid(e)&&(i=l[e].pres.queue),i},clearPres:function(e){var t=this,i=[];e=u(e),t.valid(e)&&(i=l[e].pres.queue,i.splice(0,i.length))},addMids:function(e,t){var i=this;e=u(e),i.valid(e)&&o.isArray(t)&&(l[e].mids.queue=l[e].mids.queue.concat(t))},getMids:function(e){var t=this,i=[];return e=u(e),t.valid(e)&&(i=l[e].mids.queue),i},finishMids:function(e,t){var i=this;if(e=u(e),i.valid(e)){if("boolean"!=typeof t)return l[e].mids.finish;var a=l[e].mids;t&&!1===a.finish&&i.fire({type:"finishAddMids",data:{videoId:e,length:a.queue.length}}),a.finish=t}else{if("boolean"!=typeof t)return!1;d.warn("finishMids: episode id not valid, "+e)}},clearMids:function(e){var t=this,i=[];e=u(e),t.valid(e)&&(i=l[e].mids.queue,i.splice(0,i.length))},freshFeatures:function(e,t){var i=this;e=u(e),i.valid(e)&&o.isArray(t)&&(l[e].features.queue=t)},finishFeatures:function(e,t){var i=this;if(e=u(e),i.valid(e)){if("boolean"!=typeof t)return l[e].features.finish;l[e].features.finish=t}},setInfo:function(e,t){var i=this;e=u(e),i.valid(e)&&(l[e].movieInfo=t)},getInfo:function(e){var t,i=this;return i.valid(e)&&l[e]&&(t=l[e].movieInfo),t},setDefinitionAd:function(e,t){var i=this;e=u(e),i.valid(e)&&(l[e].definitionAdInfo=t)},getDefinitionAd:function(e){var t,i=this;return i.valid(e)&&l[e]&&(t=l[e].definitionAdInfo),t},valid:function(e,t){var i=this;if(e=u(e),"boolean"!=typeof t)return l[e]&&!0===l[e].valid?(i._ensureDataStructure(e),t=!0):t=!1,t;i._ensureDataStructure(e),l[e].valid=t},destroy:function(){var e=this;l={},e.un("finishAddPres"),e.un("finishAddMids")}}});a.exports=new c}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports={Status_Idle:"idle",Status_Ready:"ready",Status_Loadstart:"loadstart",Status_LoadedMetaData:"loadedmetadata",Status_StartPlay:"startplay",Status_Waiting:"waiting",Status_Paused:"paused",Status_Play:"play",Status_Playing:"playing",Status_Stoped:"stoped",Status_End_Play:"endplay",Status_PlayError:"error",Status_AdLoaded:"adloaded",Status_AdInit:"adinit",Status_AdLoadstart:"adloadstart",Status_AdStartPlay:"adstartplay",Status_AdPlaying:"adplaying",Status_AdPaused:"adpaused",Status_AdPlayEnded:"adended",Status_AdError:"aderror",Status_AdStalled:"adstalled",Status_AdWaiting:"adwaiting",Status_AresPlay:"aresplay",Status_AresEnded:"aresended",Status_AresNoticeInfo:"aresnoticeinfo",NTF_StatusChanged:"statusChanged",NTF_Error:"engineError",NTF_VideoRefresh:"videorefresh",NTF_VideoChange:"videochange",NTF_VideoChanged:"videochanged",NTF_VideoListChanged:"videolistchanged",NTF_ADDVideoList:"addvideolist",NTF_REMOVEVideoList:"removevideolist",NTF_CanPlayThrough:"canplaythrough",NTF_VolumeChanged:"volumechanged",NTF_RateChanged:"ratechange",NTF_KeyVolumeChange:"keyvolumechange",NTF_DurationChanged:"durationchange",NTF_VRSStart:"vrsstart",NTF_VRSPreReady:"vrspreready",NTF_VRSReady:"vrsready",NTF_VRSPreloaded:"vrspreloaded",NTF_DefinitionSwitching:"definitionswitch",NTF_DefinitionSwitched:"definitionswitched",NTF_AudioSwitching:"aduioswitching",NTF_AudioSwitched:"aduioswitched",NTF_TimeUpdate:"timeupdate",NTF_Progress:"progress",NTF_Seeking:"seeking",NTF_Recharge:"recharge",NTF_SkipHook:"skiphook",NTF_FollowUpNextLoad:"followUpNextLoad",NTF_NeedUserGesture4Playback:"needUserGesture4Playback",NTF_PlayingFailByAutoPlay:"playingFailByAutoPlay",NTF_AD_CanPlayThrough:"adcanplaythrough",NTF_AD_VolumeChanged:"advolumechanged",NTF_AD_RateChanged:"adratechange",NTF_AD_DurationChanged:"addurationchange",NTF_AD_TimeUpdate:"adtimeupdate",NTF_AD_Progress:"adprogress",NTF_AD_Seeking:"adseeking",NTF_AD_NotifyManager:"jsNotifyAdManager",NTF_AD_Start:"jsNotifyAdStart",NTF_AD_End:"jsNotifyAdEnd",NTF_AD_CloudPlay:"adcloudplay",NTF_AD_CloudPlayEnd:"adcloudplayend",Evt_StartFromHistory:"playStartFromHistory",Evt_SkipHeader:"playSkipHeader",Evt_SkipTailer:"playSkipTailer",Evt_StartShareTime:"playShareTime",Evt_PreloadAD:"playPreloadAD",ERROR_HttpFailed:"P00001",ERROR_AnalyzFailed:"P00002",Enjoy_Evt_PlayEnd:"enjoy_play_end",Enjoy_Evt_PanleShow:"enjoy_panle_show"}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r=i(4),o=i(35),s=i(9),d=i(11),l=(i(10),i(5)),u=i(25),c=i(3),f=i(7),p=i(14),h=i(6),_=i(22),g=i(1),m=i(24),v=i(21),y=i(17),b=i(28),x="",w="",T=-1,S=!1,k=0,A={1:"303",2:"302",6:"304",11:"405",12:"401",13:"401",21:"302"},E="01010021010000000000",P=function(){c.browser.weixin?c.os.ios?E="02038001010000000000":c.os.android&&(E="02028001010000000000"):c.os.ios?E=c.os.iosMobile?"02030031010000000000":"03030021010000000000":c.os.android&&(E=c.os.androidMobile?"02020031010000000000":"03020021010000000000"),h.isTWLocale()&&(E=c.getPtid(!0))};P(),setTimeout(P,2e3);var q="1",I="10",L="101";c.browser.iPad?(q="2",I="20",L="202"):(c.os.ios||c.os.android)&&(q="2",I="20",L="201");var D="window";c.os.ios||c.os.mac?D="mac":c.os.android&&(D="android");var C="",F={},R=0,O="",B=function(e){var t="";if(e.drmType)switch(e.drmType){case 7:t=1}return t},N=function(e){!function(e){U(e,function(){n.getVideoInfo(function(t){f.isVip(function(i){var a=n.getMovieInfo(),c={bstp:6,ptid:E,pf:q,p:I,p1:L,c1:a.cid||"",r:t.tvid||"",aid:a.albumId||"",u:s.getFluid()||"",u2:s.getJsuid()||"",pu:f.getUid()||"",os:D,v:x,ra:C,nu:s.getIsNewUser()?1:0,ve:s.getEid(),ce:s.getWeid(),hu:i?1:-1,ht:a.isVIP?1:0,ispre:n.isTryWatch()?1:0,mod:h.local()||"",z:t.userDisInfo_t||"",diaoduuip:t.userDisInfo_t||"",server_ip:t.userDisInfo_l?String(t.userDisInfo_l).split("//")[1].split("/")[0]:"",stime:(new Date).getTime(),purl:window.location.href,rfr:window.document.referrer,lrfr:l.get("QC007")||"",dfp:u.get()||"",vfm:F.vfm||l.get("QP005")||"",vvfrom:F.vvfrom||"",vfrm:F.vfrm||"",plyrtp:0,coop:"",isdm:R,videotp:void 0!==a.is3D?a.is3D:"",rn:Math.random(),tmplt:y.pageTmpltType,drm:B(a),stauto:n.autoVdUsing()?"1":"0"};n.getPicInPic()?c.vfrmrst="80720_playerctrl_picinpic":c.vfrmrst=n.h5vars.vfrmrst||"",e&&13===e.t&&t.vi&&r(c,{uploaderid:t.vi.uid,isfan:O}),e&&e.t&&r(c,{pagev:n.h5vars.pagev||"",vfrmblk:n.h5vars.vfrmblk||""});var _;_=m.isFullScreen()?"901111_pcwh5_browerfull":v.isWebFullScreen()?"901111_pcwh5_pagefull":"901111_pcwh5_semipage",r(c,{rpage:_}),e&&1===e.t&&t.vi&&M(t.vi.uid),"QVS"===n.getEngineType()&&null!==n.getCurrManifestType()&&r(c,{manifesttp:n.getCurrManifestType()});var g,b=n.getEngineType().toLocaleLowerCase();if(b){switch(b){case"data":g=0;break;case"http":g=1;break;case"qvs":g=2}r(c,{enginetp:g})}try{r(c,{as:p.cmd5ly(c.r+""+c.p1+c.u+c.ve+"ChEnYH0804FdadrrEDFf2016tT")})}catch(e){}r(c,e),d.beacon(c,o.pingbackUrl)})})})}(e)},M=function(e){f.getUid()&&e&&(O="",d.jsonp({url:"//sns-api.iqiyi.com/apis/friend/follow.action",params:{myuid:f.getUid(),uids:e},timeout:2e3,memory:!0,success:function(t){"A00000"===t.code&&t.data&&(O=t.data[e])}}))},V=function(e,t,i,a,n){var r={};r._bizType="vrs_logRecord",r.errorcode=t,r.st=i,r.tvid=e,r.version=x,r.f4v=a,r.sgti=n,r.log_content=g.getLog();for(var o=JSON.stringify(r),s=new Uint8Array(o.length),d=0;d<o.length;d++)s[d]=o.charCodeAt(d);var l=new XMLHttpRequest;l.open("POST","//tracker-sns.iqiyi.com/naja/log/collect_log"),l.send(s)},U=function(e,t){e&&parseInt(e.t,10)>0&&void 0===window.dfp?_.seriesLoadScripts("//security.iqiyi.com/static/cook/v1/cooksdk.js",function(e){e&&void 0!==window.dfp&&(u.setSDK(window.dfp),t())}):t()};a.exports={sendVrsRequestPingback:function(){N({t:"init"})},sendVrsReadyPingback:function(){N({t:"ready"})},sendADStartPlayPingback:function(){N({t:15})},sendStartPlayPingback:function(){k=n.getCurrenttime(),N({t:1,lct:k}),-1===T&&this.sendTimingPingback(),this.sendProcessesTimePingback()},sendTimingPingback:function(){T=0;var e=0;clearTimeout(T);var t=function(){if(n.getCurrStatus()===b.Status_Playing){e+=1e3;var i=0;e%15e3==0&&(i=k,k=n.getCurrenttime(),N({t:2,tm:15,lct:i+","+k}))}if(e%6e4==0&&n.getCurrStatus()===b.Status_Playing){var a=f.isLogin()?"QP008":"QP007",r=l.get(a);r=""===r?0:parseInt(r,10),r+=60,l.set(a,r,{expires:31536e6,path:"/",domain:"iqiyi.com"})}clearTimeout(T),T=setTimeout(t,1e3)};t()},sendEndPlayPingback:function(e){k=n.getCurrenttime(),N({t:13,endtp:e,lct:k})},sendWaitingPingback:function(e){var t=0,i=0,a=-1;if(navigator.connection){var r=navigator.connection.downlink,o=(navigator.connection.effectiveType||"").toLowerCase(),s=(navigator.connection.type||"").toLowerCase();switch(o){case"4g":i=18;break;case"3g":i=17;break;case"2g":i=16;break;case"slow-2g":i=14}switch(s){case"cellular":i=15;break;case"wifi":i=1;break;case"ethernet":i=13;break;case"bluetooth":i=21;break;case"wimax":i=22}if("QVS"===n.getEngineType()){var d=n.getDataBufferInfo();d&&(a=d.len)}t=r}e?(S||(S=!0,N({t:8,rd:"ad",jamtp:1,bw:t,dl:a,ntwk:i})),this.sendErrorPlayPingback("","4016"),"QVS"===n.getEngineType()&&this.sendErrorPlayPingback("","QVS-4016")):(S||(S=!0,N({t:8,rd:"video",jamtp:1,bw:t,dl:a,ntwk:i})),this.sendErrorPlayPingback("","4015"),"QVS"===n.getEngineType()&&this.sendErrorPlayPingback("","QVS-4015"))},sendPlayingPingback:function(){S&&(S=!1)},sendErrorPlayPingback:function(e,t,i){N({t:0,ec:t||A[e],psrc:i||""})},sendProcessesTimePingback:function(){if(y.needRecord){y.needRecord=!1;var e={};e.t=10,y.usedTime_userInfo>0&&(e.tm1=y.usedTime_userInfo+","+y.sTime_userInfo),y.usedTime_P2PCore>0&&(e.tm2=y.usedTime_P2PCore+","+y.sTime_P2PCore),y.usedTime_history>0&&(e.tm7=y.usedTime_history+","+y.sTime_history),y.usedTime_pageShowVideo>0&&y.usedTime_pageShowVideo<12e4&&(e.tm8=y.usedTime_pageShowVideo+",0"),y.usedTime_showVideo>0&&y.usedTime_showVideo<6e4&&(e.tm9=y.usedTime_showVideo+","+y.sTime_showVideo),y.usedTime_vms>0&&(e.tm10=y.usedTime_vms+","+y.sTime_vms),y.usedTime_adInit>0&&(e.tm11=y.usedTime_adInit+","+y.sTime_adInit),y.usedTime_selfLoaded>0&&y.usedTime_selfLoaded<6e4&&(e.tm12=y.usedTime_selfLoaded+",0"),e.br=y.browserType||"",e.tmplt=y.pageTmpltType,e.re=window.screen.width+"*"+window.screen.height,N(e)}},init:function(e){T=0,n=e,x=n.holders.playerVersion,w="main"===n.holders.playerType?0:1,e.once(b.NTF_VRSReady,function(){})},setCurrentVD:function(e){C=e},setPbInfo:function(e){F=e},setPbisdm:function(e){R=e},sendErrorAuto:V}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(9),o=(i(7),i(1)),s=(i(5),i(10)),d=i(4),l=i(12),u=i(14),c=i(42),f=i(66),p=window.location.protocol,h=new o("segment"),_=n("segment",{construct:function(e,t,i,a,n,o,l,_,g,m,v,y,b,x,w,T){var S=this;S.ad=e,S.vip=t,S.index=e?0:a,S.tvId=n,S.vid=o,S.vidl=l,S.albumID=_,S.channelID=g,S.originID=m,S.du=v,S.size=y,S.showStartTime=b,S.showEndTime=x,S.startTime=w,S.endTime=T,S.__gas=a,S.__url=S.ad?i:p+"//data.video.iqiyi.com/videos"+i+"&cross-domain=1&qyid="+(r.getFluid()||r.getJsuid())+"&qypid="+S.tvId+"_"+f.getSrc(),S.__params=s.query2Json(S.__url),S.__filename=s.filename(S.__url),S.getUrl=function(){var e,t=this;if(t.ad)e=t.__url;else if(t.vip){var i=arguments[0]||"",a=u.cmd5x(i+t.__filename);i||h.warn(t.vid+", segment index: "+t.index+", boss key is empty!"),e=t.__url+"&t="+i+"&vid="+t.vid+"&ibt="+a+"&cid=afbe8fd3d73448c9&ib=4&ptime="+c.getPreviewTime(t.tvId)+"&qypid="+t.tvId+"_"+f.getSrc()+"&QY00001="+c.getAuthUid(t.tvId)}else e=t.__url+"&qypid="+t.tvId+"_"+f.getSrc();return e},S.getBossUrl=function(){var e=this,t=null;return!e.ad&&e.vip&&(d(e.__params,{filename:e.__filename,tvid:e.tvId,aid:e.albumID}),t=c.getRequestURL(e.__params)),t}},statics:{getIdentifier:function(e){return l(e.tvId+"_"+e.vid+"_"+e.startTime+"_"+e.endTime+"_"+e.__url)}},methods:{_setBoss:function(e){this.boss=e}}});a.exports=_}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(2),r=i(0),o=i(23),s=document.createDocumentFragment();a.exports=r("PluginBase",{construct:function(e,t){var i=this;i.skin=e,i.core=t,i.wrapper=e.videoWrapper,i.plgContainer=e.plgContainer,i.isOpen=!1,i.enabled=void 0,i.panelType="normal"},extend:n,methods:{open:function(){},close:function(){},destroy:function(){},enable:function(){var e=this;!1!==e.enabled&&void 0!==e.enabled||(e.enabled=!0,e.$plugin&&e.plgContainer.append(e.$plugin[0]),e.fire({type:o.NTF_PLG_Enable}))},disable:function(){var e=this;!0!==e.enabled&&void 0!==e.enabled||(e.enabled=!1,e.$plugin&&!0!==e.plgMustShow&&s.appendChild(e.$plugin[0]),e.skin.fire({type:o.NTF_PLG_Disable}))}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(11),r={},o=function(e){return e};a.exports={get:function(e,t){var i=e.tvid,a=e.vid||"",s=e.locale,d=o(i);if(r[d]=r[d]||[],r[d].push(t),i&&a&&t){var l="//pcw-api.iqiyi.com/video/video/playervideoinfo?tvid="+i;l=s?l+"&locale="+s:l,n.jsonp({url:l,memory:!0,success:function(e){"A00000"===e.code&&e.data||t({}),e=e.data,e.vid=a;var i=o(e.tvid),n=o(e.videoQipuId),s=[];r[i]?(s=(r[i]||[]).slice(0),delete r[i]):r[n]&&(s=(r[n]||[]).slice(0),delete r[n]);for(var d=0;d<s.length;d++)s[d]&&function(e,t){setTimeout(function(){e({tvid:t.videoQipuId,vid:t.vid,albumId:t.albumId,cid:t.cid,vi:t})},0)}(s[d],e);s=null},failure:function(e){t(e||{})}})}},isUGC:function(e){return!!((e+="")&&e.length>2&&"9"==e.charAt(e.length-1)&&"0"==e.charAt(e.length-2)&&(e=parseInt(e,10))>0&&e>9e7)}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a={},n={},r={},o=0,s={getItem:function(e){return a[e]},setItem:function(e,t){a[e]=t},removeItem:function(e){delete a[e]}},d=function(){try{return window.sessionStorage.setItem("_Q_test","1"),window.sessionStorage.removeItem("_Q_test"),window.sessionStorage}catch(e){}return s}(),l=function(){0===o&&(clearTimeout(o),o=setTimeout(function(){o=0;for(var e in n)d.setItem(e,n[e]),delete n[e];for(var t in r)d.removeItem(t),delete r[e]},1e3))};i.exports={PLAYER_TEMP_VD_KEY:"QiyiPlayerTempVD",read:function(e){return a[e]||(a[e]=d.getItem(e)),a[e]},write:function(e,t){a[e]=t,n[e]=t,l()},remove:function(e){delete a[e],r[e]=0,l()}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(1),o=i(5),s=i(2),d=(new r("Setting"),n("Setting",{extend:s,construct:function(){},methods:{isSkipPrelude:function(e){if("boolean"!=typeof e)return"skip"===o.get("QC157",{memory:!0});e?o.set("QC157","skip",{expires:31536e6,path:"/",domain:"iqiyi.com"}):o.remove("QC157",{path:"/",domain:"iqiyi.com"})},isBoss:function(e){if("boolean"!=typeof e)return"0"===o.get("QC004",{memory:!0});e?o.set("QC004","0",{expires:31536e6,path:"/",domain:"iqiyi.com"}):o.remove("QC004",{path:"/",domain:"iqiyi.com"})}}}));a.exports=new d}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a=window.location.protocol,n="420a8433732a6c99d1eae98fea69e55d/jp/dash";i.exports={vipauthUrl:"https://api.vip.iqiyi.com/services/cknsp.action",h5tmtsUrl:a+"//cache.m.iqiyi.com/jp/tmts/",vmsUrl:a+"//cache.video.iqiyi.com/jp/dash",vmsAccess:a+"//103.44.59.54/3ea",vmsIPSuc:a+"//{{IP}}/3ea/"+n,vmsIPFail:a+"//access.if.iqiyi.com/3ea/"+n,pingbackUrl:a+"//msg.qy.net/core",pingbackV6Url:a+"//msg.qy.net/b",isfanUrl:a+"//sns-api.iqiyi.com/apis/friend/follow.action"}}.call(t,i,t,e))&&(e.exports=a)},function(e,t){/*! qvs built @2019/4/15 下午3:42:25 */
e.exports=function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}if(!(Object.defineProperty&&Object.defineProperties&&Object.create&&window.ArrayBuffer&&window.Uint8Array))return{};var i={};return t.m=e,t.c=i,t.d=function(e,i,a){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(a,n,function(t){return e[t]}.bind(null,n));return a},t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){e.exports=i(1)["default"]},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,i,a){function n(){throw new Error("["+e+"] load/preload source manifest format is error!")}if("HLS"!==e||"string"==typeof t&&t.length>0||n(),"DASH"===e&&"object"!==(void 0===t?"undefined":(0,o["default"])(t))&&n(),0===a.length)throw new Error("The source's timeRanges length should be gt 0");if((0,z.isNumber)(i)&&i<a[0][0])throw new Error("playHeadTime should be gt first time range!")}Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),o=a(r),s=i(69),d=a(s),l=i(73),u=a(l),c=i(74),f=a(c),p=i(75),h=a(p),_=i(79),g=a(_),m=i(87),v=a(m),y=i(93),b=a(y),x=i(92),w=a(x),T=i(105),S=a(T),k=i(116),A=a(k),E=i(119),P=a(E),q=i(120),I=a(q),L=i(146),D=a(L),C=i(261),F=a(C),R=i(320),O=a(R),B=i(152),N=a(B),M=i(106),V=a(M),U=i(107),j=a(U),G=i(108),z=(a(G),i(135)),H=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u["default"])(this,t);var a=(0,f["default"])(this,(t.__proto__||(0,d["default"])(t)).call(this));return a.config=new V["default"](i),a.p2pLoader=(0,z.isObjectLike)(i.p2pLoader)?i.p2pLoader:{enabled:!1},a.netProxy=new F["default"](a),a.media=new O["default"](a,e),a.datasource=new D["default"](a,a.config.datasource),a._startPlayed=!1,a._applyConfig(),a._bindEvents(),a}return(0,g["default"])(t,e),(0,h["default"])(t,[{key:"currentTime",get:function(){return this.isRolling?this.datasource.getAdCurrentTime():this.media.currentTime}},{key:"duration",get:function(){return this.media.dataDuration}},{key:"isRolling",get:function(){return this.datasource.isRolling}},{key:"bufferInfo",get:function(){return{media:this.mediaBufferInfo,data:this.dataBufferInfo}}},{key:"mediaBufferInfo",get:function(){var e=this.media.bufferInfo(this.media.playHeadTime);return e.buffered={video:this.media.bufferInfo(this.media.playHeadTime,"video"),audio:this.media.bufferInfo(this.media.playHeadTime,"audio")},e}},{key:"dataBufferInfo",get:function(){return this.datasource.bufferInfo()}},{key:"reBufTime",get:function(){return this.datasource.reBufTime}},{key:"playRanges",get:function(){return this.datasource.playRanges}},{key:"endOfDown",get:function(){return this.datasource.eod}},{key:"currentManifestType",get:function(){var e=null;return this.datasource.playingStream&&(e=this.datasource.playingStream.manifestType),e}},{key:"timeRanges",set:function(e){if(Array.isArray(e)&&e.length>0){var t=this.datasource,i=this.media;i.appendWindowStart=t.playRanges.start(0),i.appendWindowEnd=t.playRanges.end(t.playRanges.length-1)}}},{key:"bufferOperating",get:function(){return this.media.updating||this.media.hasOperateBufferData}},{key:"variantSwitching",get:function(){return this.media.variantSwitching}},{key:"startPlayed",get:function(){return this._startPlayed}},{key:"playbackQuality",get:function(){return this.media.playbackQuality}}],[{key:"probeSupport",value:function(){return O["default"].probeSupport()}},{key:"DEBUG",set:function(e){"boolean"==typeof e&&(V["default"].DEBUG=e)},get:function(){return V["default"].DEBUG}},{key:"version",get:function(){return"2.0.2"}},{key:"logger",set:function(e){(0,y.setLogger)(e)},get:function(){return(0,y.getLogger)()}}]),(0,h["default"])(t,[{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,j["default"])(this.config,e,!0),this._applyConfig()}},{key:"_applyConfig",value:function(){var e=this.datasource,t=this.media,i=this.config;e.configure(i.datasource),t.configure(i)}},{key:"loadADVariant",value:function(e,t,i){this.datasource.loadRoll(e,t,i)}},{key:"preloadADVariant",value:function(e,t,i){this.datasource.preloadRoll(e,t,i)}},{key:"loadVariant",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[[0,Number.POSITIVE_INFINITY]],r=this.datasource,o=this.media;n(e,t,i,a),r.load(e,t,i,a,!1),t.drm?o.drmInfo={keySystem:t.drm.keySystem,keySystemServer:t.drm.keySystemServer}:o.drmInfo=null}},{key:"preloadVariant",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[[0,Number.POSITIVE_INFINITY]];n(e,t,i,a),this.datasource.preload(e,t,i=null,a)}},{key:"seek",value:function(e){this.media.variantSwitching=!1,this.media.currentTime=parseFloat(e)}},{key:"switchVariant",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.config,n=this.datasource,r=this.media;if("boolean"!=typeof i&&(i=a.switchVariantImmediate),!this.media.hasOperateBufferData&&this.datasource.eof)return void b["default"].warn("this stream will end, can't switch variant!");if(r.variantSwitching=!0,r.clearOperateBuffers(n.matEnabled?"video":void 0),b["default"].log("switching variant, immediate: "+i),i||r.paused||!r.currentTimeRange)n.load(e,t,null,null,!0),e!==A["default"].DASH&&(r.flushBuffer(),r.once(w["default"].BUFFER_FLUSHED,function(){n.seek(r.currentTime)}));else{var o=r.currentTime,s=r.bufferInfo(o),d=n.getSegmentByPTS(o),l=null;e!==A["default"].DASH&&(l=this.mediaBufferInfo.end),n.load(e,t,s.end,null,!0,l),e!==A["default"].DASH&&d&&d.startTime>1&&r.flushBuffer(0,d.startTime-1)}}},{key:"switchAudioVariant",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.config,a=this.datasource,n=this.media,r=null;if(n.clearOperateBuffers("audio"),e){var o=n.currentTime;t="boolean"==typeof t?t:i.switchVariantImmediate,t?(r=o,n.flushBuffer(o)):r=n.bufferInfo(o).end,b["default"].log("switching audio variant, immediate: "+t)}else b["default"].log("closing audio variant~");a.loadAltAudio(e,r)}},{key:"updateMediaRanges",value:function(e){var t=this.datasource,i=this.media;t.range(e),i.appendWindowStart=t.playRanges.start(0),i.appendWindowEnd=t.playRanges.end(t.playRanges.length-1)}},{key:"getCurrentADGas",value:function(){return this.datasource.getCurrentADGas()}},{key:"abortCurrentADGas",value:function(){var e=this.datasource,t=this.media;this.isRolling&&(e.abortCurrentADGas()||(t.off(w["default"].BUFFER_FLUSHED,this._onAbortCurrentADGas),t.once(w["default"].BUFFER_FLUSHED,this._onAbortCurrentADGas)),t.clearOperateBuffers(),t.flushBuffer())}},{key:"abortRollingStream",value:function(){var e=this.datasource;this.isRolling&&e.endOfPlayingStream()}},{key:"recoverMedia",value:function(){var e=this.datasource,t=this.media,i=t.currentTime;b["default"].log("media will recovery from "+i),t.reset(),e.recoverImmediately(i)}},{key:"reset",value:function(){this._unbindEvents(),this.error=null,this.media.reset(),this.datasource.reset(),this._bindEvents()}},{key:"destroy",value:function(){var e=this.datasource,t=this.media;this._startPlayed=!1,this.emit(w["default"].DESTROYING),this._unbindEvents(),this._pumpTimer.cancel(),this.error=null,e.destroy(),t.destroy(),this.emit(w["default"].DESTROYED)}}]),t}(v["default"]);H.manifestParser=I["default"],H.datasource=D["default"],H.Mux=N["default"],H.media=O["default"],H.Events=w["default"],H.Error=S["default"],H.ManifestTypes=A["default"],H.RollTypes=P["default"],H.NetProxy=F["default"],H.Conf=V["default"],t["default"]=H},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var n=i(3),r=a(n),o=i(54),s=a(o),d="function"==typeof s["default"]&&"symbol"==typeof r["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof s["default"]&&e.constructor===s["default"]&&e!==s["default"].prototype?"symbol":typeof e};t["default"]="function"==typeof s["default"]&&"symbol"===d(r["default"])?function(e){return void 0===e?"undefined":d(e)}:function(e){return e&&"function"==typeof s["default"]&&e.constructor===s["default"]&&e!==s["default"].prototype?"symbol":void 0===e?"undefined":d(e)}},function(e,t,i){e.exports={"default":i(4),__esModule:!0}},function(e,t,i){i(5),i(49),e.exports=i(53).f("iterator")},function(e,t,i){var a=i(6)(!0);i(9)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=a(t,i),this._i+=e.length,{value:e,done:!1})})},function(e,t,i){var a=i(7),n=i(8);e.exports=function(e){return function(t,i){var r,o,s=String(n(t)),d=a(i),l=s.length;return d<0||d>=l?e?"":void 0:(r=s.charCodeAt(d),r<55296||r>56319||d+1===l||(o=s.charCodeAt(d+1))<56320||o>57343?e?s.charAt(d):r:e?s.slice(d,d+2):o-56320+(r-55296<<10)+65536)}}},function(e,t){var i=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:i)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){var a=i(10),n=i(11),r=i(27),o=i(16),s=i(28),d=i(29),l=i(45),u=i(47),c=i(46)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,i,h,_,g,m){d(i,t,h);var v,y,b,x=function(e){if(!f&&e in k)return k[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},w=t+" Iterator",T="values"==_,S=!1,k=e.prototype,A=k[c]||k["@@iterator"]||_&&k[_],E=A||x(_),P=_?T?x("entries"):E:void 0,q="Array"==t?k.entries||A:A;if(q&&(b=u(q.call(new e)))!==Object.prototype&&b.next&&(l(b,w,!0),a||"function"==typeof b[c]||o(b,c,p)),T&&A&&"values"!==A.name&&(S=!0,E=function(){return A.call(this)}),a&&!m||!f&&!S&&k[c]||o(k,c,E),s[t]=E,s[w]=p,_)if(v={values:T?E:x("values"),keys:g?E:x("keys"),entries:P},m)for(y in v)y in k||r(k,y,v[y]);else n(n.P+n.F*(f||S),t,v);return v}},function(e,t){e.exports=!0},function(e,t,i){var a=i(12),n=i(13),r=i(14),o=i(16),s=i(26),d=function(e,t,i){var l,u,c,f=e&d.F,p=e&d.G,h=e&d.S,_=e&d.P,g=e&d.B,m=e&d.W,v=p?n:n[t]||(n[t]={}),y=v.prototype,b=p?a:h?a[t]:(a[t]||{}).prototype;p&&(i=t);for(l in i)(u=!f&&b&&void 0!==b[l])&&s(v,l)||(c=u?b[l]:i[l],v[l]=p&&"function"!=typeof b[l]?i[l]:g&&u?r(c,a):m&&b[l]==c?function(e){var t=function(t,i,a){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,a)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):_&&"function"==typeof c?r(Function.call,c):c,_&&((v.virtual||(v.virtual={}))[l]=c,e&d.R&&y&&!y[l]&&o(y,l,c)))};d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,e.exports=d},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t){var i=e.exports={version:"2.6.3"};"number"==typeof __e&&(__e=i)},function(e,t,i){var a=i(15);e.exports=function(e,t,i){if(a(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,a){return e.call(t,i,a)};case 3:return function(i,a,n){return e.call(t,i,a,n)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,i){var a=i(17),n=i(25);e.exports=i(21)?function(e,t,i){return a.f(e,t,n(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var a=i(18),n=i(20),r=i(24),o=Object.defineProperty;t.f=i(21)?Object.defineProperty:function(e,t,i){if(a(e),t=r(t,!0),a(i),n)try{return o(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){var a=i(19);e.exports=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){e.exports=!i(21)&&!i(22)(function(){return 7!=Object.defineProperty(i(23)("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){e.exports=!i(22)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,i){var a=i(19),n=i(12).document,r=a(n)&&a(n.createElement);e.exports=function(e){return r?n.createElement(e):{}}},function(e,t,i){var a=i(19);e.exports=function(e,t){if(!a(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!a(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!a(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!a(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){e.exports=i(16)},function(e,t){e.exports={}},function(e,t,i){var a=i(30),n=i(25),r=i(45),o={};i(16)(o,i(46)("iterator"),function(){return this}),e.exports=function(e,t,i){e.prototype=a(o,{next:n(1,i)}),r(e,t+" Iterator")}},function(e,t,i){var a=i(18),n=i(31),r=i(43),o=i(40)("IE_PROTO"),s=function(){},d=function(){var e,t=i(23)("iframe"),a=r.length;for(t.style.display="none",i(44).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),d=e.F;a--;)delete d.prototype[r[a]];return d()};e.exports=Object.create||function(e,t){var i;return null!==e?(s.prototype=a(e),i=new s,s.prototype=null,i[o]=e):i=d(),void 0===t?i:n(i,t)}},function(e,t,i){var a=i(17),n=i(18),r=i(32);e.exports=i(21)?Object.defineProperties:function(e,t){n(e);for(var i,o=r(t),s=o.length,d=0;s>d;)a.f(e,i=o[d++],t[i]);return e}},function(e,t,i){var a=i(33),n=i(43);e.exports=Object.keys||function(e){return a(e,n)}},function(e,t,i){var a=i(26),n=i(34),r=i(37)(!1),o=i(40)("IE_PROTO");e.exports=function(e,t){var i,s=n(e),d=0,l=[];for(i in s)i!=o&&a(s,i)&&l.push(i);for(;t.length>d;)a(s,i=t[d++])&&(~r(l,i)||l.push(i));return l}},function(e,t,i){var a=i(35),n=i(8);e.exports=function(e){return a(n(e))}},function(e,t,i){var a=i(36);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var a=i(34),n=i(38),r=i(39);e.exports=function(e){return function(t,i,o){var s,d=a(t),l=n(d.length),u=r(o,l);if(e&&i!=i){for(;l>u;)if((s=d[u++])!=s)return!0}else for(;l>u;u++)if((e||u in d)&&d[u]===i)return e||u||0;return!e&&-1}}},function(e,t,i){var a=i(7),n=Math.min;e.exports=function(e){return e>0?n(a(e),9007199254740991):0}},function(e,t,i){var a=i(7),n=Math.max,r=Math.min;e.exports=function(e,t){return e=a(e),e<0?n(e+t,0):r(e,t)}},function(e,t,i){var a=i(41)("keys"),n=i(42);e.exports=function(e){return a[e]||(a[e]=n(e))}},function(e,t,i){var a=i(13),n=i(12),r=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:a.version,mode:i(10)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var i=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+a).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,i){var a=i(12).document;e.exports=a&&a.documentElement},function(e,t,i){var a=i(17).f,n=i(26),r=i(46)("toStringTag");e.exports=function(e,t,i){e&&!n(e=i?e:e.prototype,r)&&a(e,r,{configurable:!0,value:t})}},function(e,t,i){var a=i(41)("wks"),n=i(42),r=i(12).Symbol,o="function"==typeof r;(e.exports=function(e){return a[e]||(a[e]=o&&r[e]||(o?r:n)("Symbol."+e))}).store=a},function(e,t,i){var a=i(26),n=i(48),r=i(40)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),a(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,i){var a=i(8);e.exports=function(e){return Object(a(e))}},function(e,t,i){i(50);for(var a=i(12),n=i(16),r=i(28),o=i(46)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),d=0;d<s.length;d++){var l=s[d],u=a[l],c=u&&u.prototype;c&&!c[o]&&n(c,o,l),r[l]=r.Array}},function(e,t,i){var a=i(51),n=i(52),r=i(28),o=i(34);e.exports=i(9)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,n(1)):"keys"==t?n(0,i):"values"==t?n(0,e[i]):n(0,[i,e[i]])},"values"),r.Arguments=r.Array,a("keys"),a("values"),a("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,i){t.f=i(46)},function(e,t,i){e.exports={"default":i(55),__esModule:!0}},function(e,t,i){i(56),i(66),i(67),i(68),e.exports=i(13).Symbol},function(e,t,i){var a=i(12),n=i(26),r=i(21),o=i(11),s=i(27),d=i(57).KEY,l=i(22),u=i(41),c=i(45),f=i(42),p=i(46),h=i(53),_=i(58),g=i(59),m=i(62),v=i(18),y=i(19),b=i(34),x=i(24),w=i(25),T=i(30),S=i(63),k=i(65),A=i(17),E=i(32),P=k.f,q=A.f,I=S.f,L=a.Symbol,D=a.JSON,C=D&&D.stringify,F=p("_hidden"),R=p("toPrimitive"),O={}.propertyIsEnumerable,B=u("symbol-registry"),N=u("symbols"),M=u("op-symbols"),V=Object.prototype,U="function"==typeof L,j=a.QObject,G=!j||!j.prototype||!j.prototype.findChild,z=r&&l(function(){return 7!=T(q({},"a",{get:function(){return q(this,"a",{value:7}).a}})).a})?function(e,t,i){var a=P(V,t);a&&delete V[t],q(e,t,i),a&&e!==V&&q(V,t,a)}:q,H=function(e){var t=N[e]=T(L.prototype);return t._k=e,t},Y=U&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},Q=function(e,t,i){return e===V&&Q(M,t,i),v(e),t=x(t,!0),v(i),n(N,t)?(i.enumerable?(n(e,F)&&e[F][t]&&(e[F][t]=!1),i=T(i,{enumerable:w(0,!1)})):(n(e,F)||q(e,F,w(1,{})),e[F][t]=!0),z(e,t,i)):q(e,t,i)},W=function(e,t){v(e);for(var i,a=g(t=b(t)),n=0,r=a.length;r>n;)Q(e,i=a[n++],t[i]);return e},$=function(e,t){return void 0===t?T(e):W(T(e),t)},K=function(e){var t=O.call(this,e=x(e,!0));return!(this===V&&n(N,e)&&!n(M,e))&&(!(t||!n(this,e)||!n(N,e)||n(this,F)&&this[F][e])||t)},J=function(e,t){if(e=b(e),t=x(t,!0),e!==V||!n(N,t)||n(M,t)){var i=P(e,t);return!i||!n(N,t)||n(e,F)&&e[F][t]||(i.enumerable=!0),i}},X=function(e){for(var t,i=I(b(e)),a=[],r=0;i.length>r;)n(N,t=i[r++])||t==F||t==d||a.push(t);return a},Z=function(e){for(var t,i=e===V,a=I(i?M:b(e)),r=[],o=0;a.length>o;)!n(N,t=a[o++])||i&&!n(V,t)||r.push(N[t]);return r};U||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(i){this===V&&t.call(M,i),n(this,F)&&n(this[F],e)&&(this[F][e]=!1),z(this,e,w(1,i))};return r&&G&&z(V,e,{configurable:!0,set:t}),H(e)},s(L.prototype,"toString",function(){return this._k}),k.f=J,A.f=Q,i(64).f=S.f=X,i(61).f=K,i(60).f=Z,r&&!i(10)&&s(V,"propertyIsEnumerable",K,!0),h.f=function(e){return H(p(e))}),o(o.G+o.W+o.F*!U,{Symbol:L});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var ie=E(p.store),ae=0;ie.length>ae;)_(ie[ae++]);o(o.S+o.F*!U,"Symbol",{"for":function(e){return n(B,e+="")?B[e]:B[e]=L(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!U,"Object",{create:$,defineProperty:Q,defineProperties:W,getOwnPropertyDescriptor:J,getOwnPropertyNames:X,getOwnPropertySymbols:Z}),D&&o(o.S+o.F*(!U||l(function(){var e=L();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){for(var t,i,a=[e],n=1;arguments.length>n;)a.push(arguments[n++]);if(i=t=a[1],(y(t)||void 0!==e)&&!Y(e))return m(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!Y(t))return t}),a[1]=t,C.apply(D,a)}}),L.prototype[R]||i(16)(L.prototype,R,L.prototype.valueOf),c(L,"Symbol"),c(Math,"Math",!0),c(a.JSON,"JSON",!0)},function(e,t,i){var a=i(42)("meta"),n=i(19),r=i(26),o=i(17).f,s=0,d=Object.isExtensible||function(){return!0},l=!i(22)(function(){return d(Object.preventExtensions({}))}),u=function(e){o(e,a,{value:{i:"O"+ ++s,w:{}}})},c=function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,a)){if(!d(e))return"F";if(!t)return"E";u(e)}return e[a].i},f=function(e,t){if(!r(e,a)){if(!d(e))return!0;if(!t)return!1;u(e)}return e[a].w},p=function(e){return l&&h.NEED&&d(e)&&!r(e,a)&&u(e),e},h=e.exports={KEY:a,NEED:!1,fastKey:c,getWeak:f,onFreeze:p}},function(e,t,i){var a=i(12),n=i(13),r=i(10),o=i(53),s=i(17).f;e.exports=function(e){var t=n.Symbol||(n.Symbol=r?{}:a.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,i){var a=i(32),n=i(60),r=i(61);e.exports=function(e){var t=a(e),i=n.f;if(i)for(var o,s=i(e),d=r.f,l=0;s.length>l;)d.call(e,o=s[l++])&&t.push(o);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,i){var a=i(36);e.exports=Array.isArray||function(e){return"Array"==a(e)}},function(e,t,i){var a=i(34),n=i(64).f,r={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return n(e)}catch(e){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==r.call(e)?s(e):n(a(e))}},function(e,t,i){var a=i(33),n=i(43).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,n)}},function(e,t,i){var a=i(61),n=i(25),r=i(34),o=i(24),s=i(26),d=i(20),l=Object.getOwnPropertyDescriptor;t.f=i(21)?l:function(e,t){if(e=r(e),t=o(t,!0),d)try{return l(e,t)}catch(e){}if(s(e,t))return n(!a.f.call(e,t),e[t])}},function(e,t){},function(e,t,i){i(58)("asyncIterator")},function(e,t,i){i(58)("observable")},function(e,t,i){e.exports={"default":i(70),__esModule:!0}},function(e,t,i){i(71),e.exports=i(13).Object.getPrototypeOf},function(e,t,i){var a=i(48),n=i(47);i(72)("getPrototypeOf",function(){return function(e){return n(a(e))}})},function(e,t,i){var a=i(11),n=i(13),r=i(22);e.exports=function(e,t){var i=(n.Object||{})[e]||Object[e],o={};o[e]=t(i),a(a.S+a.F*r(function(){i(1)}),"Object",o)}},function(e,t,i){t.__esModule=!0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,i){t.__esModule=!0;var a=i(2),n=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,n["default"])(t))&&"function"!=typeof t?e:t}},function(e,t,i){t.__esModule=!0;var a=i(76),n=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,n["default"])(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}()},function(e,t,i){e.exports={"default":i(77),__esModule:!0}},function(e,t,i){i(78);var a=i(13).Object;e.exports=function(e,t,i){return a.defineProperty(e,t,i)}},function(e,t,i){var a=i(11);a(a.S+a.F*!i(21),"Object",{defineProperty:i(17).f})},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var n=i(80),r=a(n),o=i(84),s=a(o),d=i(2),l=a(d);t["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l["default"])(t)));e.prototype=(0,s["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r["default"]?(0,r["default"])(e,t):e.__proto__=t)}},function(e,t,i){e.exports={"default":i(81),__esModule:!0}},function(e,t,i){i(82),e.exports=i(13).Object.setPrototypeOf},function(e,t,i){var a=i(11);a(a.S,"Object",{setPrototypeOf:i(83).set})},function(e,t,i){var a=i(19),n=i(18),r=function(e,t){if(n(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{a=i(14)(Function.call,i(65).f(Object.prototype,"__proto__").set,2),a(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,i){return r(e,i),t?e.__proto__=i:a(e,i),e}}({},!1):void 0),check:r}},function(e,t,i){e.exports={"default":i(85),__esModule:!0}},function(e,t,i){i(86);var a=i(13).Object;e.exports=function(e,t){return a.create(e,t)}},function(e,t,i){var a=i(11);a(a.S,"Object",{create:i(30)})},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(92),m=a(g),v=i(93),y=a(v),b=i(105),x=a(b),w=i(112),T=a(w),S=i(114),k=a(S),A=i(108),E=a(A),P=i(115),q=a(P),I=i(118),L=a(I),D=function(e){function t(){(0,s["default"])(this,t);var e=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return e._eventManager=new T["default"],e._pumpTimer=new k["default"](function(){return e._doPump("timer")}),e.hasReceivedVideoIS=!1,e.hasReceivedAudioIS=!1,e._onAbortCurrentADGas=e._onAbortCurrentADGas.bind(e),e}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"_bindEvents",value:function(){var e=this.datasource,t=this.media;this._eventManager.on(t,m["default"].STATE_CHANGE,this._onMediaStateChange.bind(this)),this._eventManager.on(t,m["default"].BUFFER_CREATED,this._onMediaBufferCreated.bind(this)),this._eventManager.on(t,m["default"].BUFFER_EXPECTING,this._onMediaBufferExpect.bind(this)),this._eventManager.on(t,m["default"].BUFFER_UPDATED,this._onMediaBufferUpdated.bind(this)),this._eventManager.on(e,m["default"].STATE_CHANGE,this._onDSStateChange.bind(this)),this._eventManager.on(e,"stream_start",this._onDSStreamStart.bind(this)),this._eventManager.on(this,m["default"].DATA_STAGE_SWITCHING,this._onstageChanging.bind(this))}},{key:"_unbindEvents",value:function(){this._eventManager.removeAll()}},{key:"_emitError",value:function(e){y["default"].assert(e instanceof x["default"],"Wrong error type!"),null==this.error&&e instanceof x["default"]&&e.severity===x["default"].severity.CRITICAL&&(this.error=e,this.emit(m["default"].ERROR,e))}},{key:"_onMediaStateChange",value:function(e,t){var i=this.datasource,a=this.media,n=!0;switch(t.state){case"loadedmetadata":this._loadedmetadata||(this._loadedmetadata=!0,this._seekToStartPos()),this.isRolling&&i.openAdLoadStart();break;case"afterended":a.loop||i.endOfPlayingStream();break;case"seeking":var r=a.currentTime;if(y["default"].log("seeking("+r+")"),this._seekingKeyframe)return void(this._seekingKeyframe=!1);a.withinBuffer(r)||(a.hasOperateBufferData&&a.clearOperateBuffers(),this._needSeekDS||(a.flushBuffer(),i.seek(r)),a.appendWindowStart=i.playRanges.start(0),a.appendWindowEnd=i.playRanges.end(i.playRanges.length-1),this._doPump("seeking")),this._needSeekDS=!1;break;case"seeked":break;case"timeupdate":i.currentTime=a.currentTime;break;case"waiting":var o=a.bufferInfo(a.currentTime).len;(a.readyState>=3||!a.seeking&&a.updating||o>.1||o<=.1&&i.error||i.bufferInfo().len>0)&&(n=!1),i.openReBufTime=!0;break;case"playing":case"canplay":this._startPlayed=!0,i.openReBufTime=!1}n&&this.emit(m["default"].STATE_CHANGE,t)}},{key:"_onMediaBufferCreated",value:function(){var e=(this.datasource,this.media),t=this.config;e.duration=t.mediaMaxDuration,this._loadedmetadata=!1,this._seekingKeyframe=!1,this._doPump("buf_crt"),this.emit(m["default"].BUFFER_CREATED)}},{key:"_isSafetyToEOS",value:function(){var e=this.media;return!e.hasOperateBufferData&&!e.updating&&!e.isEndOfStream}},{key:"_onMediaBufferExpect",value:function(e,t){var i=this.datasource,a=this.media,n=!1;if(i.error&&t.len<=1){var r=i.error.category,o=i.error.code,s=[x["default"].category.MUX],d=[];if(s.indexOf(r)>-1||d.indexOf(o)>-1)n=!0;else{i.bufferInfo().len<5&&(n=!0)}}n?this._emitError(i.error):i.eof?this._isSafetyToEOS()&&a.endOfStream():this._doPump("buf_exp")}},{key:"_onMediaBufferUpdated",value:function(e,t){var i=this.config,a=this.datasource,n=this.media,r=(a.duration,n.duration,t.operateType),o=t.previousBufferedLength;if(i.alwaysSeekKeyframe&&"append"===r&&0===o&&n.videoBuffered&&n.videoBuffered.length>0){var s=n.videoBuffered.start(0);y["default"].log("Due to alwaysSeekKeyframe, seeking to video buffered start@"+s),this._seekingKeyframe=!0,n.currentTime=s}a.eof&&this._isSafetyToEOS()&&n.endOfStream()}},{key:"_onDSStateChange",value:function(e){this.emit(m["default"].STATE_CHANGE,e)}},{key:"_onDSStreamStart",value:function(){var e=this.datasource,t=this.media;t.off(m["default"].BUFFER_FLUSHED,this._onAbortCurrentADGas),t.reset(),t.appendWindowStart=e.playRanges.start(0),t.appendWindowEnd=e.playRanges.end(e.playRanges.length-1)}},{key:"_onAbortCurrentADGas",value:function(){var e=this.media;this.isRolling&&(e.currentTime=0)}},{key:"_seekToStartPos",value:function(){var e=this.config,t=this.datasource,i=this.media;if(t.playRanges.length>0)if(t.recoverPoint){var a=t.recoverPoint;delete t.recoverPoint,a>0&&(y["default"].log("seek by datasource recover point "+a),i.currentTime=a)}else{var n=t.playRanges.start(0);if(E["default"].browser.SAFARI){var r=e.safariMinStartTime;n<r&&(n=r)}n>0&&(this._needSeekDS=!0,y["default"].log("seek by metadata~"),i.currentTime=n)}else y["default"].warn("playRanges is empty, pls fix it.")}},{key:"_doPump",value:function(e){var t=(this.config,this.datasource),i=this.media,a=null,n=null,r=null;if(i.sourceBuffersCreated&&!this.bufferOperating){var o=i.bufferInfo(i.currentTime,"audio"),s=i.bufferInfo(i.currentTime,"video");if(t.matEnabled){a={updating:i.updating,audioBufferInfo:o,videoBufferInfo:s,mayPumpVideo:!1,mayPumpAudio:!1}}var d=t.pump(a);n=d.video,r=d.audio;for(var l=[n,r],u=0;u<l.length;u++){var c=l[u];if(c instanceof L["default"])switch(c.type){case L["default"].TYPES.video:this.hasReceivedVideoIS=!0;break;case L["default"].TYPES.audio:this.hasReceivedAudioIS=!0}else if(c instanceof q["default"])if(c.origin===q["default"].ORIGINS.DASH);else{var f=c.type===q["default"].TYPES.video?s:o,p=f.start,h=f.end,_=c.startTime,g=c.duration,m=_+g,v="append seg start/end("+_+"/"+m+"), buffer start/end("+p+"/"+h+")";if(m+.1<f.end){switch(c.type){case q["default"].TYPES.video:n=null;break;case q["default"].TYPES.audio:r=null}y["default"].debug("ignore pumped "+c.type+" fmp4, "+v)}}}}if(null==n&&null==r)return this._pumpTimer.cancel(),void this._pumpTimer.schedule(.1);for(var b=[n,r],x=!1,w=0;w<b.length;w++){var T=b[w];if(T){if(!x){var S=i.currentTime,k=t.getSegmentByPTS(S);if(k){var A=k.startTime-1;A>0&&i.withinBuffer(A)&&i.flushBuffer(0,A)}x=!0}if(T instanceof q["default"]){var E=T.startTime,P=T.duration,I=E+P;y["default"].log("append "+T.type+" buffer, start/end/duration("+E.toFixed(3)+"/"+I.toFixed(3)+"/"+P.toFixed(3)+")")}else T instanceof L["default"]&&y["default"].log("append "+T.type+" initSegment");i.appendBuffer(T.type,T.bytes)}}}},{key:"_onstageChanging",value:function(){this._startPlayed=!1}}]),t}(_["default"]);t["default"]=D},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){return void 0===e._maxListeners?N.defaultMaxListeners:e._maxListeners}function r(e,t,i){if(t)e.call(i);else for(var a=e.length,n=m(e,a),r=0;r<a;++r)try{n[r].call(i)}catch(e){console.error(e)}}function o(e,t,i,a){if(t)e.call(i,a);else for(var n=e.length,r=m(e,n),o=0;o<n;++o)try{r[o].call(i,a)}catch(e){console.error(e)}}function s(e,t,i,a,n){if(t)e.call(i,a,n);else for(var r=e.length,o=m(e,r),s=0;s<r;++s)try{o[s].call(i,a,n)}catch(e){console.error(e)}}function d(e,t,i,a,n,r){if(t)e.call(i,a,n,r);else for(var o=e.length,s=m(e,o),d=0;d<o;++d)try{s[d].call(i,a,n,r)}catch(e){console.error(e)}}function l(e,t,i,a){if(t)e.apply(i,a);else for(var n=e.length,r=m(e,n),o=0;o<n;++o)try{r[o].apply(i,a)}catch(e){console.error(e)}}function u(e,t,i){var a,r,o;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if(r=e._events,r?(r.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),r=e._events),o=r[t]):(r=e._events=F(null),e._eventsCount=0),o){if("function"==typeof o?o=r[t]=[o,i]:o.push(i),!o.warned&&(a=n(e))&&a>0&&o.length>a){o.warned=!0;var s=new Error("Possible Dispatcher memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,"object"===("undefined"==typeof console?"undefined":(0,T["default"])(console))&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else o=r[t]=i,++e._eventsCount;return e}function c(e,t){var i,a,n,r,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(a=this._events))return this;if(!(i=a[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=F(null):(delete a[e],a.off&&this.emit("off",e,i.listener||t));else if("function"!=typeof i){for(n=-1,r=i.length-1;r>=0;r--)if(i[r]===t||i[r].listener===t){o=i[r].listener,n=r;break}if(n<0)return this;0===n?i.shift():g(i,n),1===i.length&&(a[e]=i[0]),a.off&&this.emit("off",e,o||t)}return this}function f(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,i){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=O.call(f,a);return n.listener=i,a.wrapFn=n,n}function h(e,t,i){var a=e._events;if(!a)return[];var n=a[t];return n?"function"==typeof n?i?[n.listener||n]:[n]:i?v(n):m(n,n.length):[]}function _(e){var t=this._events;if(t){var i=t[e];if("function"==typeof i)return 1;if(i)return i.length}return 0}function g(e,t){for(var i=t,a=i+1,n=e.length;a<n;i+=1,a+=1)e[i]=e[a];e.pop()}function m(e,t){for(var i=new Array(t),a=0;a<t;++a)i[a]=e[a];return i}function v(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}function y(e){var t=function(){};return t.prototype=e,new t}function b(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return i}function x(e){var t=this;return function(){return t.apply(e,arguments)}}Object.defineProperty(t,"__esModule",{value:!0});var w=i(2),T=a(w),S=i(76),k=a(S),A=i(73),E=a(A),P=i(75),q=a(P),I=i(89),L=a(I),D=i(84),C=a(D),F=C["default"]||y,R=L["default"]||b,O=Function.prototype.bind||x,B=10,N=function(){function e(){(0,E["default"])(this,e),this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=F(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}return(0,q["default"])(e,null,[{key:"listenerCount",value:function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_.call(e,t)}}]),(0,q["default"])(e,[{key:"emit",value:function(e){var t,i,a,n,u,c,f="error"===e;if(c=this._events)f=f&&null==c.error;else if(!f)return!1;if(f){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var p=new Error('Unhandled "error" event. ('+t+")");throw p.context=t,p}if(!(i=c[e]))return!1;var h="function"==typeof i;switch(a=arguments.length){case 1:r(i,h,this);break;case 2:o(i,h,this,arguments[1]);break;case 3:s(i,h,this,arguments[1],arguments[2]);break;case 4:d(i,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(a-1),u=1;u<a;u++)n[u-1]=arguments[u];l(i,h,this,n)}return!0}},{key:"on",value:function(e,t){return u(this,e,t)}},{key:"once",value:function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this}},{key:"off",value:function(e,t){return c.call(this,e,t)}},{key:"removeAllListeners",value:function(e){var t,i,a;if(!(i=this._events))return this;if(!i.off)return 0===arguments.length?(this._events=F(null),this._eventsCount=0):i[e]&&(0==--this._eventsCount?this._events=F(null):delete i[e]),this;if(0===arguments.length){var n,r=R(i);for(a=0;a<r.length;++a)"off"!==(n=r[a])&&this.removeAllListeners(n);return this.removeAllListeners("off"),this._events=F(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.off(e,t);else if(t)for(a=t.length-1;a>=0;a--)this.off(e,t[a]);return this}},{key:"listeners",value:function(e){return h(this,e,!0)}},{key:"rawListeners",value:function(e){return h(this,e,!1)}},{key:"listenerCount",value:function(){return e.listenerCount.apply(this,arguments)}}]),e}();t["default"]=N;var M=void 0;try{var V={};k["default"]&&Object.defineProperty(V,"x",{value:0}),M=0===V.x}catch(e){M=!1}M?Object.defineProperty(N,"defaultMaxListeners",{enumerable:!0,get:function(){return B},set:function(e){if("number"!=typeof e||e<0||e!==e)throw new TypeError('"defaultMaxListeners" must be a positive number');B=e}}):N.defaultMaxListeners=B},function(e,t,i){e.exports={"default":i(90),__esModule:!0}},function(e,t,i){i(91),e.exports=i(13).Object.keys},function(e,t,i){var a=i(48),n=i(32);i(72)("keys",function(){return function(e){return n(a(e))}})},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={ERROR:"qvsError",DESTROYING:"qvsDestroying",DESTROYED:"qvsDestroying",STATE_CHANGE:"qvsStateChange",STREAM_BEFORE_ENDED:"qvsStreamBeforeEnded",STREAM_ENCRYPTED:"qvsStreamEncrypted",MSE_ATTACHING:"qvsMSEAttaching",MSE_ATTACHED:"qvsMSEAttached",MSE_DETACHING:"qvsMSEDetaching",MSE_DETACHED:"qvsMediaDetached",MEDIA_IDLE:"qvsMediaIdle",BUFFER_RESET:"qvsBufferReset",BUFFER_CODECS:"qvsBufferCodecs",BUFFER_CREATED:"qvsBufferCreated",BUFFER_UPDATED:"qvsBufferUpdated",BUFFER_EXPECTING:"qvsBufferExpecting",BUFFER_APPENDING:"qvsBufferAppending",BUFFER_APPENDED:"qvsBufferAppended",BUFFER_EOS:"qvsBufferEos",BUFFER_FLUSHING:"qvsBufferFlushing",BUFFER_FLUSHED:"qvsBufferFlushed",MANIFEST_LOADING:"qvsManifestLoading",MANIFEST_LOADED:"qvsManifestLoaded",MANIFEST_PARSED:"qvsManifestParsed",DATA_EOD:"qvsDataEOD",DATA_STAGE_SWITCHING:"qvsDataStageSwitching",DATA_STAGE_SWITCHED:"qvsDataStageSwitched",AUDIO_TRACK_SWITCHED_FAILED:"qvsTrackSwitchedFailed",AUDIO_TRACK_SWITCHED_SUCCESSED:"qvsTrackSwitchedSuccessed",LEVEL_SWITCH:"qvsLevelSwitch",LEVEL_SWITCHING:"qvsLevelSwitching",LEVEL_SWITCHED:"qvsLevelSwitched",LEVEL_LOADING:"qvsLevelLoading",LEVEL_LOADED:"qvsLevelLoaded",LEVEL_UPDATED:"qvsLevelUpdated",LEVEL_PTS_UPDATED:"qvsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"qvsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"qvsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"qvsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"qvsAudioTrackSwitched",AUDIO_TRACK_LOADING:"qvsAudioTrackLoading",AUDIO_TRACK_LOADED:"qvsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"qvsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"qvsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"qvsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"qvsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"qvsSubtitleFragProcessed",INIT_PTS_FOUND:"qvsInitPtsFound",FRAG_LOADING:"qvsFragLoading",FRAG_LOAD_PROGRESS:"qvsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"qvsFragLoadEmergencyAborted",FRAG_LOADED:"qvsFragLoaded",FRAG_DECRYPTED:"qvsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"qvsFragParsingInitSegment",FRAG_PARSING_USERDATA:"qvsFragParsingUserdata",FRAG_PARSING_METADATA:"qvsFragParsingMetadata",FRAG_PARSING_DATA:"qvsFragParsingData",FRAG_PARSED:"qvsFragParsed",FRAG_BUFFERED:"qvsFragBuffered",FRAG_CHANGED:"qvsFragChanged",FPS_REPORT:"qvsFpsReport",FPS_STUCK:"qvsFpsStuck",KEY_LOADING:"qvsKeyLoading",KEY_LOADED:"qvsKeyLoaded",STREAM_STATE_TRANSITION:"qvsStreamStateTransition"}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){h=e}function r(){return g}Object.defineProperty(t,"__esModule",{value:!0});var o=i(94),s=a(o),d=i(73),l=a(d),u=i(75),c=a(u);t.setLogger=n,t.getLogger=r;var f=i(104),p=a(f),h=p["default"].console,_=function(){function e(){(0,l["default"])(this,e),this._enable=!1}return(0,c["default"])(e,[{key:"enable",get:function(){return this._enable},set:function(e){this._enable=e}}]),(0,c["default"])(e,[{key:"log",value:function(){if(this._enable){var e;(e=h.log).call.apply(e,[h,">>>"].concat(Array.prototype.slice.call(arguments)))}}},{key:"debug",value:function(){if(this._enable&&h.debug){var e;(e=h.debug).call.apply(e,[h,">>>"].concat(Array.prototype.slice.call(arguments)))}}},{key:"assert",value:function(){if(this._enable&&h.assert){var e,t=arguments[0],i=Array.prototype.slice.call(arguments,1);i.unshift(">>>"),(e=h.assert).call.apply(e,[h,t].concat((0,s["default"])(i)))}}},{key:"warn",value:function(){if(this._enable){var e;(e=h.warn).call.apply(e,[h,">>>"].concat(Array.prototype.slice.call(arguments)))}}},{key:"error",value:function(){if(this._enable){var e;(e=h.error).call.apply(e,[h,">>>"].concat(Array.prototype.slice.call(arguments)))}}}]),e}(),g=new _;t["default"]=g},function(e,t,i){t.__esModule=!0;var a=i(95),n=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return(0,n["default"])(e)}},function(e,t,i){e.exports={"default":i(96),__esModule:!0}},function(e,t,i){i(5),i(97),e.exports=i(13).Array.from},function(e,t,i){var a=i(14),n=i(11),r=i(48),o=i(98),s=i(99),d=i(38),l=i(100),u=i(101);n(n.S+n.F*!i(103)(function(e){Array.from(e)}),"Array",{from:function(e){var t,i,n,c,f=r(e),p="function"==typeof this?this:Array,h=arguments.length,_=h>1?arguments[1]:void 0,g=void 0!==_,m=0,v=u(f);if(g&&(_=a(_,h>2?arguments[2]:void 0,2)),void 0==v||p==Array&&s(v))for(t=d(f.length),i=new p(t);t>m;m++)l(i,m,g?_(f[m],m):f[m]);else for(c=v.call(f),i=new p;!(n=c.next()).done;m++)l(i,m,g?o(c,_,[n.value,m],!0):n.value);return i.length=m,i}})},function(e,t,i){var a=i(18);e.exports=function(e,t,i,n){try{return n?t(a(i)[0],i[1]):t(i)}catch(t){var r=e["return"];throw void 0!==r&&a(r.call(e)),t}}},function(e,t,i){var a=i(28),n=i(46)("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||r[n]===e)}},function(e,t,i){var a=i(17),n=i(25);e.exports=function(e,t,i){t in e?a.f(e,t,n(0,i)):e[t]=i}},function(e,t,i){var a=i(102),n=i(46)("iterator"),r=i(28);e.exports=i(13).getIteratorMethod=function(e){if(void 0!=e)return e[n]||e["@@iterator"]||r[a(e)]}},function(e,t,i){var a=i(36),n=i(46)("toStringTag"),r="Arguments"==a(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,i,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=o(t=Object(e),n))?i:r?a(t):"Object"==(s=a(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,i){var a=i(46)("iterator"),n=!1;try{var r=[7][a]();r["return"]=function(){n=!0},Array.from(r,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var i=!1;try{var r=[7],o=r[a]();o.next=function(){return{done:i=!0}},r[a]=function(){return o},e(r)}catch(e){}return i}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var a=void 0;a="undefined"==typeof window?self:window,t["default"]=a},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(106),l=a(d),u=i(109),c=a(u),f=i(110),p=a(f),h=i(111),_=a(h),g=function(){function e(t,i,a,n){if((0,r["default"])(this,e),this.severity=t,this.category=i,this.code=a,this.data=Array.prototype.slice.call(arguments,3),this.handled=!1,l["default"].DEBUG){var o="UNKNOWN",s="UNKNOWN";for(var d in p["default"])p["default"][d]===this.category&&(o=d);for(var u in _["default"])_["default"][u]===this.code&&(s=u);this.message="QVS Error "+o+"."+s+" ("+this.data.toString()+")";try{throw new Error(this.message)}catch(e){this.stack=e.stack}}}return(0,s["default"])(e,null,[{key:"severity",get:function(){return c["default"]}},{key:"category",get:function(){return p["default"]}},{key:"code",get:function(){return _["default"]}}]),e}();t["default"]=g},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(107),l=a(d),u=i(108),c=a(u),f=!1,p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r["default"])(this,e);var i=c["default"].browser.CHROME&&(c["default"].browser.version.major<50||50===c["default"].browser.version.major&&c["default"].browser.version.build<2661);this.enableWorker=!0,this.alwaysSeekKeyframe=!!(i||c["default"].browser.EDGE||c["default"].browser.IE),this.switchVariantImmediate=!1,this.bufferExpectLength=5,this.mediaMaxDuration=86400,this.nudgeOffset=.1,this.nudgeMaxRetry=3,this.maxBufferHole=.5,this.maxBufferTimeLength=180,this.hlsRangeTSTolerance=5,this.hlsMaxSegmentSearchTolerance=.25,this.drm={retryParameters:{maxRetry:2,timeout:5e3},servers:{}},this.datasource={retryParameters:{maxRetry:2,timeout:2e4}},this.loaderWithBufferMaxRetry=3,this.loaderNoBufferMaxRetry=1,this.fpsStuckMonitoringPeriod=5,this.safariMinStartTime=.2,(0,l["default"])(this,t,!0,!0),t.datasource&&t.datasource.p2pLoader&&(this.datasource.p2pLoader=t.datasource.p2pLoader)}return(0,s["default"])(e,null,[{key:"DEBUG",set:function(e){f=e},get:function(){return f}}]),e}();t["default"]=p},function(e,t,i){function a(e,t,i,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return t&&function(e,t){var i;for(i in e)if(r(e,i)&&t(e[i],i))break}(t,function(t,o){!i&&r(e,o)||(n&&"string"!=typeof t&&"boolean"!=typeof t?(e[o]||(e[o]={}),a(e[o],t,i,n)):e[o]=t)}),e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var a={},n={},r=navigator,o=r.userAgent.toLowerCase(),s=/(edge)\/([\w.]+)/.exec(o)||/(opr)[\/]([\w.]+)/.exec(o)||/(chrome)[ \/]([\w.]+)/.exec(o)||/(iemobile)[\/]([\w.]+)/.exec(o)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+)/.exec(o)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(o)||/(msie) ([\w.]+)/.exec(o)||o.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(o)||o.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(o)||[],d=/(ipad)/.exec(o)||/(ipod)/.exec(o)||/(windows phone)/.exec(o)||/(iphone)/.exec(o)||/(kindle)/.exec(o)||/(silk)/.exec(o)||/(android)/.exec(o)||/(win)/.exec(o)||/(mac)/.exec(o)||/(linux)/.exec(o)||/(cros)/.exec(o)||/(playbook)/.exec(o)||/(bb)/.exec(o)||/(blackberry)/.exec(o)||[],l={},u={browser:s[5]||s[3]||s[1]||"",version:s[2]||s[4]||"0",versionNumber:s[4]||s[2]||"0",platform:d[0]||""};if(u.browser){l[u.browser]=!0;var c=u.versionNumber.split(".");l.version={major:parseInt(u.versionNumber,10),string:u.version},c.length>1&&(l.version.minor=parseInt(c[1],10)),c.length>2&&(l.version.build=parseInt(c[2],10))}n.version=l.version,n.CHROME=!!l.chrome,n.SAFARI=!!l.safari&&!n.CHROME,n.FIREFOX=!!l.firefox,n.IE11=/rv:11/.test(o),n.IE=!!l.msie||n.IE11,n.EDGE=!!l.edge,n.WECHAT=/(wechat)|(micromessenger)/.test(o),a.mac=!!u.platform.mac,a.iphone=!!u.platform.iphone,a.android=!!u.platform.android,t["default"]={browser:n,os:a}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={RECOVERABLE:1,CRITICAL:2}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={NETWORK:1,MANIFEST:2,MEDIA:3,DATA_SOURCE:4,MUX:5,DRM:6}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={NET_UNSUPPORTED_SCHEME:1e3,MEDIA_VIDEO_ERROR:3e3,MEDIA_SOURCE_OPERATION_FAILED:3001,MEDIA_SOURCE_OPERATION_THREW:3002,MEDIA_QUOTA_EXCEEDED:3003,UNSUPPORTED_PLAY_RANGE:4e3,DATA_P2P_DISPATCH:4100,DATA_P2P_LOAD:4101,DATA_P2P_LOAD_ACCESS:4102,DATA_P2P_MEMORY_ALLOC:4103,DATA_P2P_BYTES_LENGTH:4104,DATA_HLS_DISPATCH_TIMEOUT:4200,DATA_HLS_DISPATCH_ERROR:4201,DATA_HLS_CDN_TIMEOUT:4202,DATA_HLS_CDN_ERROR:4203,DATA_FLV_TIMEOUT:4301,DATA_FLV_ERROR:4302,DATA_FLV_DISPATCH_ERROR:4303,DATA_FLV_DISPATCH_TIMEOUT:4304,DATA_AUDIO_LOADED_ERROR:4601,DATA_AUDIO_LOADED_TIMEOUT:4602,DATA_AUDIO_DISPATHED_ERROR:4603,DATA_AUDIO_DISPATHED_TIMEOUT:4604,DATA_AD_ERROR:4702,MUX_UNKNOWN_FAILED:5e3,MUX_WORKER_INTERNAL_EXCEPTION:5001,MUX_TS_SYNC_BYTE:5002,DRM_NO_RECOGNIZED_KEY_SYSTEMS:6e3,DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,DRM_FAILED_TO_CREATE_CDM:6002,DRM_FAILED_TO_ATTACH_TO_VIDEO:6003,DRM_FAILED_TO_CREATE_SESSION:6005,DRM_FAILED_TO_GENERATE_LICENSE_REQUEST:6006,DRM_LICENSE_REQUEST_ERROR:6007,DRM_LICENSE_REQUEST_TIMEOUT:6008,DRM_NO_LICENSE_SERVER_RESPONSE:6009,DRM_LICENSE_RESPONSE_REJECTED:6010,DRM_NO_LICENSE_SERVER_GIVEN:6012,DRM_NO_RECOGNIZED_ERROR:6013,DRM_NO_BASIC_SUPPORT:6014}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(113),l=a(d),u=function(){function e(){(0,r["default"])(this,e),this._bindingMap=new l["default"]}return(0,s["default"])(e,[{key:"destroy",value:function(){this.removeAll(),this._bindingMap=null}},{key:"on",value:function(t,i,a){if(this._bindingMap){var n=new e._Binding(t,i,a);this._bindingMap.push(i,n)}}},{key:"once",value:function(e,t,i){this.on(e,t,function(a){this.off(e,t),i(a)}.bind(this))}},{key:"off",value:function(e,t){if(this._bindingMap)for(var i=this._bindingMap.get(t)||[],a=0;a<i.length;++a){var n=i[a];n.target==e&&(n.off(),this._bindingMap.remove(t,n))}}},{key:"removeAll",value:function(){if(this._bindingMap){for(var e=this._bindingMap.getAll(),t=0;t<e.length;++t)e[t].off();this._bindingMap.clear()}}}]),e}();t["default"]=u,u._Binding=function(e,t,i){this.target=e,this.type=t,this.listener=i,this.target.addEventListener?this.target.addEventListener(t,i,!1):this.target.on&&this.target.on(t,i,!1)},u._Binding.prototype.off=function(){this.target.removeEventListener?this.target.removeEventListener(this.type,this.listener,!1):this.target.off&&this.target.off(this.type,this.listener,!1),this.target=null,this.listener=null}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=function(){function e(){(0,r["default"])(this,e),this.map_={}}return(0,s["default"])(e,[{key:"push",value:function(e,t){this.map_.hasOwnProperty(e)?this.map_[e].push(t):this.map_[e]=[t]}},{key:"get",value:function(e){var t=this.map_[e];return t?t.slice():null}},{key:"getAll",value:function(){var e=[];for(var t in this.map_)e.push.apply(e,this.map_[t]);return e}},{key:"remove",value:function(e,t){var i=this.map_[e];if(i)for(var a=0;a<i.length;++a)i[a]==t&&(i.splice(a,1),--a)}},{key:"clear",value:function(){this.map_={}}},{key:"forEach",value:function(e){for(var t in this.map_)e(t,this.map_[t])}}]),e}();t["default"]=d},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=function(){function e(t){(0,r["default"])(this,e),this._id=null,this._frequency=1/0,this._callback=function(){t()}.bind(this)}return(0,s["default"])(e,[{key:"cancel",value:function(){null!=this._id&&(clearTimeout(this._id),this._id=null)}},{key:"schedule",value:function(e){this.cancel(),this.adjustFrequency(e),this._id=setTimeout(this._callback,this._frequency)}},{key:"scheduleRepeated",value:function(e){this.cancel(),this.adjustFrequency(e);var t=function(){this._callback(),this.running&&(this._id=setTimeout(t,this._frequency))}.bind(this);this._id=setTimeout(t,this._frequency)}},{key:"adjustFrequency",value:function(e){this._frequency=1e3*e}},{key:"running",get:function(){return null!==this._id}}]),e}();t["default"]=d},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(116),l=a(d),u=i(117),c=a(u),f=function(){function e(t){(0,r["default"])(this,e),this._type=t,this._origin=null,this._bytes=null,this._startTime=null,this._duration=0}return(0,s["default"])(e,[{key:"type",get:function(){return this._type}},{key:"origin",get:function(){return this._origin},set:function(e){this._origin=e}},{key:"bytes",get:function(){return this._bytes},set:function(e){this._bytes=e}},{key:"startTime",get:function(){return this._startTime},set:function(e){this._startTime=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}}]),e}();f.TYPES=c["default"],f.ORIGINS=l["default"],t["default"]=f},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={HLS:0,DASH:1,F4V:2,MP4:3,AMP4:4}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={mixed:"mixed",video:"video",audio:"audio"}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(116),l=a(d),u=i(117),c=a(u),f=function(){function e(t){(0,r["default"])(this,e),this._type=t,this._origin=null,this._bytes=null}return(0,s["default"])(e,[{key:"type",get:function(){return this._type}},{key:"origin",get:function(){return this._origin},set:function(e){this._origin=e}},{key:"bytes",get:function(){return this._bytes},set:function(e){this._bytes=e}}]),e}();f.TYPES=c["default"],f.ORIGINS=l["default"],t["default"]=f},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={PRE_ROLL:0,MID_ROLL:1,POST_ROLL:2}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(116),m=a(g),v=i(122),y=a(v),b=i(137),x=a(b),w=function(e){function t(){(0,s["default"])(this,t);var e=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return e._parser=null,e}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"manifestType",get:function(){var e=void 0;return this._parser&&(this._parser instanceof y["default"]?e=m["default"].HLS:this._parser instanceof x["default"]&&(e=m["default"].DASH)),e}},{key:"duration",get:function(){return this._parser?this._parser.duration:0}},{key:"segments",get:function(){return this._parser?this._parser.segments:[]}},{key:"tracks",get:function(){return this._parser?this._parser.tracks:null}},{key:"isAccurateTimeStamp",get:function(){return this._parser?this._parser.isAccurateTimeStamp:null}}]),(0,c["default"])(t,[{key:"push",value:function(e){switch(e.type){case m["default"].HLS:this._parser=new y["default"];break;case m["default"].DASH:this._parser=new x["default"]}this._parser&&this._parser.push(e.chunk)}},{key:"end",value:function(){this._parser&&this._parser.end()}},{key:"reset",value:function(){this._parser&&this._parser.reset()}}]),t}(_["default"]);t["default"]=w},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=function(e){function t(){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this))}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"pipe",value:function(e){return this.on("reset",function(){e.reset()}),this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e}},{key:"unpipe",value:function(){return this.removeAllListeners("reset"),this.removeAllListeners("data"),this.removeAllListeners("done"),this}},{key:"push",value:function(e){this.emit("data",e)}},{key:"flush",value:function(e){this.emit("done",e)}},{key:"reset",value:function(){this.emit("reset")}}]),t}(_["default"]);t["default"]=g},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(116),_=a(h),g=i(121),m=a(g),v=i(123),y=a(v),b=i(124),x=a(b),w=i(126),T=a(w),S=i(127),k=a(S),A=i(125),E=a(A),P=i(135),q=i(136),I=a(q),L=function(){},D=function(e){function t(){(0,s["default"])(this,t);var e=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this)),i=e;return i._accurateTimestamp=!1,i.lineStream=new T["default"],i.parseStream=new k["default"],i.lineStream.pipe(e.parseStream),i.reset(),e.parseStream.on("data",function(e){var t={inf:function(){e.duration>0?i.currentSeg.duration=e.duration:0===e.duration&&(i.currentSeg.duration=.01)}},a={tag:function(){(t[e.tagType]||L).call(i)},uri:function(){var t=new E["default"](e.uri);(0,P.isHttps)()&&t.setScheme("https");var a=t.query.get("sd"),n=t.query.get("start"),r=t.query.get("end"),o=Array.isArray(a)&&a.length>0?parseInt(a[0],10)/1e3:void 0,s=void 0!==o;if(i._accurateTimestamp=s,""===i.currentFrag.uri)i.currentFrag.uri=new E["default"](t.toString());else if(i.currentFrag.uri instanceof E["default"])if(i.currentFrag.uri.path===t.path){var d=r[0],l=i.currentFrag.uri,u=l.query.get("start")[0],c=d-u;l.query.update("end",d),l.query.update("contentlength",c)}else i.currentTimeline+=1,i.currentFrag=new x["default"](_["default"].HLS),i.currentFrag.idx=i.currentTimeline,i.currentFrag.uri=new E["default"](t.toString()),i.fragments.push(i.currentFrag);i.currentSeg.uri=t,i.currentSeg.idx=i.currentFrag.segments.length,i.currentSeg.startByte=n?parseInt(n[0],10):null,i.currentSeg.endByte=r?parseInt(r[0],10):null,i.currentSeg.poolId=i.uuid+"-"+i.currentFrag.idx+"-"+i.currentSeg.idx,s?(i.currentSeg.startTime=o,i.prevSeg&&(i.prevSeg.duration=o-i.prevSeg.startTime)):i.currentSeg.startTime=i.prevSeg?i.prevSeg.startTime+i.prevSeg.duration:0,i.currentFrag.segments.push(i.currentSeg),i.prevSeg=i.currentSeg,i.currentSeg=new y["default"](_["default"].HLS)},comment:function(){}};a[e.type]&&a[e.type].call(i)}),e}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"totalDuration",get:function(){var e=this.fragments,t=0;if(e.length>0){var i=e[e.length-1];if(i.segments.length>0){var a=i.segments[i.segments.length-1];t=a.startTime+a.duration}}return t}},{key:"segments",get:function(){for(var e,t=this.fragments,i=[],a=0;a<t.length;a++){e=t[a];for(var n=0;n<e.segments.length;n++)i.push(e.segments[n])}return i}},{key:"isAccurateTimeStamp",get:function(){return this._accurateTimestamp}}]),(0,c["default"])(t,[{key:"push",value:function(e){this.lineStream.push(e)}},{key:"end",value:function(){var e=this.fragments;if(Array.isArray(e))for(var t=0;t<e.length;t++){var i=e[t],a=i.segments[0],n=i.segments[i.segments.length-1];i.startTime=a.startTime,i.duration=n.startTime+n.duration-i.startTime}this.lineStream.push("\n")}},{key:"reset",value:function(){this._accurateTimestamp=!1,this.lineStream.empty(),this.fragments=[],this.currentTimeline=0,this.currentFrag=new x["default"](_["default"].HLS),this.currentSeg=new y["default"](_["default"].HLS),this.prevSeg=void 0,this.currentFrag.idx=this.currentTimeline,this.fragments.push(this.currentFrag),this.uuid=I["default"].create()}}]),t}(m["default"]);t["default"]=D},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=function(){function e(t){(0,r["default"])(this,e),this._type=t,this._status=0,this._enabled=!0,this._startTime=null,this._startByte=null,this._endByte=null,this._duration=0,this._idx=null,this._fragIdx=null,this._uri="",this._poolId=""}return(0,s["default"])(e,[{key:"type",get:function(){return this._type}},{key:"uri",get:function(){return this._uri},set:function(e){this._uri=e}},{key:"startTime",get:function(){return this._startTime},set:function(e){this._startTime=e}},{key:"startByte",get:function(){return this._startByte},set:function(e){this._startByte=e}},{key:"endByte",get:function(){return this._endByte},set:function(e){this._endByte=e}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=!!e}},{key:"status",get:function(){return this._status},set:function(e){this._status=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}},{key:"idx",get:function(){return this._idx},set:function(e){this._idx=e}},{key:"fragIdx",get:function(){return this._fragIdx},set:function(e){this._fragIdx=e}},{key:"poolId",set:function(e){this._poolId=e},get:function(){return this._poolId}}]),e}();t["default"]=d},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(125),l=(a(d),function(){function e(t){(0,r["default"])(this,e),this._type=t,this._status=0,this._enabled=!0,this._startTime=null,this._startByte=null,this._endByte=null,this._duration=0,this._idx=null,this._uri="",this._isAd=!1,this._segments=[],this._gas=null,this._offset=0}return(0,s["default"])(e,[{key:"type",get:function(){return this._type}},{key:"uri",get:function(){return this._uri},set:function(e){this._uri=e}},{key:"startTime",get:function(){return this._startTime},set:function(e){this._startTime=e}},{key:"startByte",get:function(){return this._startByte},set:function(e){this._startByte=e}},{key:"endByte",get:function(){return this._endByte},set:function(e){this._endByte=e}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=!!e}},{key:"status",get:function(){return this._status},set:function(e){this._status=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}},{key:"idx",get:function(){return this._idx},set:function(e){this._idx=e}},{key:"segments",get:function(){return this._segments}},{key:"isAd",get:function(){return this._isAd},set:function(e){this._isAd=e}},{key:"gas",get:function(){return this._gas},set:function(e){this._gas=e}},{key:"offset",get:function(){return this._offset},set:function(e){this._offset=e}}]),e}());t["default"]=l},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7},c=function(){function e(t){(0,s["default"])(this,e),this._encodedQuery=t||null,this.count_=null}return(0,l["default"])(e,[{key:"ensureKeyMapInitialized_",value:function(){if(!this.keyMap_&&(this.keyMap_={},this.count_=0,this._encodedQuery))for(var e=this._encodedQuery.split("&"),t=0;t<e.length;t++){var i=e[t].indexOf("="),a=null,n=null;i>=0?(a=e[t].substring(0,i),n=e[t].substring(i+1)):a=e[t],a=decodeURIComponent(a.replace(/\+/g," ")),n=n||"",this.add(a,decodeURIComponent(n.replace(/\+/g," ")))}}},{key:"getCount",value:function(){return this.ensureKeyMapInitialized_(),this.count_}},{key:"add",value:function(e,t){this.ensureKeyMapInitialized_(),this._encodedQuery=null;var i=this.keyMap_.hasOwnProperty(e)&&this.keyMap_[e];return i||(this.keyMap_[e]=i=[]),i.push(t),this.count_++,this}},{key:"update",value:function(e,t){return this.ensureKeyMapInitialized_(),this._encodedQuery=null,(this.keyMap_[e]=[]).push(t),this}},{key:"get",value:function(e){return this.ensureKeyMapInitialized_(),this.keyMap_[e]}},{key:"clone",value:function(){var t=new e;if(t._encodedQuery=this._encodedQuery,this.keyMap_){var i={};for(var a in this.keyMap_)i[a]=this.keyMap_[a].concat();t.keyMap_=i,t.count_=this.count_}return t}},{key:"toString",value:function(){if(this._encodedQuery)return this._encodedQuery;if(!this.keyMap_)return"";var e=[];for(var t in this.keyMap_)for(var i=encodeURIComponent(t),a=this.keyMap_[t],n=0;n<a.length;n++){var r=i;r+="="+encodeURIComponent(a[n]),e.push(r)}return this._encodedQuery=e.join("&")}},{key:"toDecodedString",value:function(){return f.decodeOrEmpty(this.toString())}}]),e}(),f=function(){function e(t){(0,s["default"])(this,e);var i;this._scheme="",this._domain="",this._port="",this._userInfo="",this._path="",this._query=new c,this._hash="",this._reDisallowedInQuery=/[\#\?@]/g,this._reDisallowedInSchemeOrUserInfo=/[#\/\?@]/g,this._reDisallowedInRelativePath=/[\#\?:]/g,this._reDisallowedInAbsolutePath=/[\#\?]/g,this._reDisallowedInFragment=/#/g,"object"===(void 0===t?"undefined":(0,r["default"])(t))&&t instanceof this?(this.setScheme(t.scheme),this.setUserInfo(t.userInfo),this.setDomain(t.domain),this.setPort(t.port),this.setPath(t.path),this.setQueryData(t.query.clone()),this.setHash(t.hash)):t&&(i=this.split(String(t)))?(this.setScheme(i[u.SCHEME]||"",!0),this.setUserInfo(i[u.USER_INFO]||"",!0),this.setDomain(i[u.DOMAIN]||"",!0),this.setPort(i[u.PORT]),this.setPath(i[u.PATH]||"",!0),this.setQueryData(i[u.QUERY_DATA]||"",!0),this.setHash(i[u.FRAGMENT]||"",!0)):this._query=new c(null,null)}return(0,l["default"])(e,[{key:"scheme",get:function(){return this._scheme}},{key:"domain",get:function(){return this._domain}},{key:"port",get:function(){return this._port}},{key:"userInfo",get:function(){return this._userInfo}},{key:"path",get:function(){return this._path}},{key:"hash",get:function(){return this._hash}},{key:"query",get:function(){return this._query}}],[{key:"decodeOrEmpty",value:function(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}}]),(0,l["default"])(e,[{key:"setScheme",value:function(t,i){return this._scheme=i?e.decodeOrEmpty(t,!0):t,this._scheme&&(this._scheme=this._scheme.replace(/:$/,"")),this}},{key:"toString",value:function(){var e=[],t=this.scheme;t&&e.push(this._encodeSpecialChars(t,this._reDisallowedInSchemeOrUserInfo,!0),":");var i=this.getDomain();if(i){e.push("//");var a=this.userInfo;a&&e.push(this._encodeSpecialChars(a,this._reDisallowedInSchemeOrUserInfo,!0),"@"),e.push(this._removeDoubleEncoding(encodeURIComponent(i)));var n=this.port;null!=n&&e.push(":",String(n))}var r=this.path;r&&(this.hasDomain()&&"/"!=r.charAt(0)&&e.push("/"),e.push(this._encodeSpecialChars(r,"/"==r.charAt(0)?this._reDisallowedInAbsolutePath:this._reDisallowedInRelativePath,!0)));var o=this.getEncodedQuery();o&&e.push("?",o);var s=this.hash;return s&&e.push("#",this._encodeSpecialChars(s,this._reDisallowedInFragment)),e.join("")}},{key:"split",value:function(e){var t=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");return e.match(t)}},{key:"setUserInfo",value:function(t,i){return this._userInfo=i?e.decodeOrEmpty(t):t,this}},{key:"hasDomain",value:function(){return!!this._domain}},{key:"setDomain",value:function(t,i){return this._domain=i?e.decodeOrEmpty(t,!0):t,this}},{key:"getDomain",value:function(){return this._domain}},{key:"setPort",value:function(e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);this._port=e}else this._port=null;return this}},{key:"setPath",value:function(t,i){return this._path=i?e.decodeOrEmpty(t,!0):t,this}},{key:"setQueryData",value:function(e,t){return"object"===(void 0===e?"undefined":(0,r["default"])(e))&&e instanceof this.query?this._query=e:(t||(e=this._encodeSpecialChars(e,this._reDisallowedInQuery)),this._query=new c(e,null)),this}},{key:"getEncodedQuery",value:function(){return this._query.toString()}},{key:"setHash",value:function(t,i){return this._hash=i?e.decodeOrEmpty(t):t,this}},{key:"_encodeSpecialChars",value:function(e,t,i){if("string"==typeof e){var a=encodeURI(e).replace(t,this._encodeChar);return i&&(a=this._removeDoubleEncoding(a)),a}return null}},{key:"_encodeChar",value:function(e){var t=e.charCodeAt(0);return"%"+(t>>4&15).toString(16)+(15&t).toString(16)}},{key:"_removeDoubleEncoding",value:function(e){return e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")}}]),e}();t["default"]=f},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=function(e){function t(){(0,s["default"])(this,t);var e=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return e.buffer="",e}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.emit("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}},{key:"empty",value:function(){this.buffer=""}}]),t}(_["default"]);t["default"]=g},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(128),r=a(n),o=i(69),s=a(o),d=i(73),l=a(d),u=i(75),c=a(u),f=i(74),p=a(f),h=i(79),_=a(h),g=i(121),m=a(g),v=function(){return new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')},y=function(e){for(var t=e.split(v()),i={},a=t.length,n=void 0;a--;)""!==t[a]&&(n=/([^=]*)=(.*)/.exec(t[a]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),i[n[0]]=n[1]);return i},b=function(e){function t(){return(0,l["default"])(this,t),(0,p["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this))}return(0,_["default"])(t,e),(0,c["default"])(t,[{key:"push",value:function(e){var t=void 0,i=void 0;if(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),0!==e.length){if("#"!==e[0])return void this.emit("data",{type:"uri",uri:e});if(0!==e.indexOf("#EXT"))return void this.emit("data",{type:"comment",text:e.slice(1)});if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))return void this.emit("data",{type:"tag",tagType:"m3u"});if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),void this.emit("data",i);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),void this.emit("data",i);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"totalduration"},t[1]&&(i.duration=parseInt(t[1],10)),void this.emit("data",i);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),void this.emit("data",i);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void this.emit("data",i);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void this.emit("data",i);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),void this.emit("data",i);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"byterange"},t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),void this.emit("data",i);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),void this.emit("data",i);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"map"},t[1]){var a=y(t[1]);if(a.URI&&(i.uri=a.URI),a.BYTERANGE){var n=a.BYTERANGE.split("@"),o=(0,r["default"])(n,2),s=o[0],d=o[1];i.byterange={},s&&(i.byterange.length=parseInt(s,10)),d&&(i.byterange.offset=parseInt(d,10))}}return void this.emit("data",i)}if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=y(t[1]),i.attributes.RESOLUTION){var l=i.attributes.RESOLUTION.split("x"),u={};l[0]&&(u.width=parseInt(l[0],10)),l[1]&&(u.height=parseInt(l[1],10)),i.attributes.RESOLUTION=u}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}return void this.emit("data",i)}if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return i={type:"tag",tagType:"media"},t[1]&&(i.attributes=y(t[1])),void this.emit("data",i);if(t=/^#EXT-X-ENDLIST/.exec(e))return void this.emit("data",{type:"tag",tagType:"endlist"});if(t=/^#EXT-X-DISCONTINUITY/.exec(e))return void this.emit("data",{type:"tag",tagType:"discontinuity"});if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),void this.emit("data",i);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return i={type:"tag",tagType:"key"},t[1]&&(i.attributes=y(t[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void this.emit("data",i);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return i={type:"tag",tagType:"start"},t[1]&&(i.attributes=y(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void this.emit("data",i);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",void this.emit("data",i);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",void this.emit("data",i);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",void this.emit("data",i);this.emit("data",{type:"tag",data:e.slice(4)})}}}]),t}(m["default"]);t["default"]=b},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var n=i(129),r=a(n),o=i(132),s=a(o);t["default"]=function(){function e(e,t){var i=[],a=!0,n=!1,r=void 0;try{for(var o,d=(0,s["default"])(e);!(a=(o=d.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){n=!0,r=e}finally{try{!a&&d["return"]&&d["return"]()}finally{if(n)throw r}}return i}return function(t,i){if(Array.isArray(t))return t;if((0,r["default"])(Object(t)))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,i){e.exports={"default":i(130),__esModule:!0}},function(e,t,i){i(49),i(5),e.exports=i(131)},function(e,t,i){var a=i(102),n=i(46)("iterator"),r=i(28);e.exports=i(13).isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||r.hasOwnProperty(a(t))}},function(e,t,i){e.exports={"default":i(133),__esModule:!0}},function(e,t,i){i(49),i(5),e.exports=i(134)},function(e,t,i){var a=i(18),n=i(101);e.exports=i(13).getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},function(e,t,i){function a(e){return!!e&&"object"==(void 0===e?"undefined":(0,l["default"])(e))}function n(e){return/^https/gi.test(e||window.location.protocol)}function r(e){return"number"==typeof e&&!isNaN(e)}function o(e){return a(e)&&"[object arraybuffer]"===u.call(e).toLowerCase()}function s(e){return a(e)&&"[object uint8array]"===u.call(e).toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0});var d=i(2),l=function(e){return e&&e.__esModule?e:{"default":e}}(d);t.isObjectLike=a,t.isHttps=n,t.isNumber=r,t.isArrayBuffer=o,t.isUint8Array=s;var u=Object.prototype.toString},function(e,t,i){function a(){return Math.ceil(1e16*Math.random()+(new Date).getTime()).toString(32)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={create:a}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(138),m=a(g),v=i(139),y=a(v),b=i(123),x=a(b),w=i(116),T=a(w),S=function(e){function t(){(0,s["default"])(this,t);var e=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return e.trackStream=new m["default"],e.parseStream=new y["default"],e.trackStream.pipe(e.parseStream),e._duration=0,e._tracks={},e.manifest={allowCache:!0,discontinuityStarts:[]},e.parseStream.on("data",function(t){e._tracks[t.type]=t}),e}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"tracks",get:function(){return this._tracks}},{key:"duration",get:function(){return this._duration}}]),(0,c["default"])(t,[{key:"_newURI",value:function(){return new x["default"](T["default"].DASH)}},{key:"push",value:function(e){this._duration=e.duration,this.trackStream.push(e)}},{key:"end",value:function(){}},{key:"reset",value:function(){this.trackStream.empty(),this._tracks={},this._duration=0}}]),t}(_["default"]);t["default"]=S},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),r=a(n),o=i(69),s=a(o),d=i(73),l=a(d),u=i(75),c=a(u),f=i(74),p=a(f),h=i(79),_=a(h),g=i(121),m=a(g),v=function(e){function t(){return(0,l["default"])(this,t),(0,p["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this))}return(0,_["default"])(t,e),(0,c["default"])(t,[{key:"push",value:function(e){for(var t in e)"object"===(0,r["default"])(e[t])&&Array.isArray(e[t].type)&&/(video|audio)/gi.test(e[t].type.join(""))&&this.emit("data",e[t])}},{key:"empty",value:function(){}}]),t}(m["default"]);t["default"]=v},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(140),m=a(g),v=i(123),y=a(v),b=i(116),x=a(b),w=i(125),T=a(w),S=i(135),k=function(e){function t(){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this))}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){var t={},i=e.files.length;t.type=Array.isArray(e.type)?e.type[0]:e.type,t.totolDuration=parseInt(e.duration_second,10),t.codec=e.codec,t.initSegment=m["default"].fromBase64(e.codec_init),t.initDataType=e.encryption_scheme,t.segments=[],i>0&&(e.files[0].seekable.hasOwnProperty("pos")?this.parseOldData(t.segments,e.files,t.totolDuration):e.files[0].seekable.hasOwnProperty("pos_start")&&this.parseNewData(t.segments,e.files)),this.emit("data",t)}},{key:"parseOldData",value:function(e,t,i){for(var a=0,n=void 0,r=void 0,o=void 0,s=!1,d=t.length;a<d;a++){n=t[a],r=n.size,o=n.start_second,s=a===d-1;for(var l,u,c,f=0;f<n.seekable.time.length;f++)l=new y["default"](x["default"].DASH),u=e[e.length-1],c=n.seekable.pos[f+1],l.uri=new T["default"](n.file_name),(0,S.isHttps)()&&l.uri.setScheme("https"),l.idx=f,l.startTime=o+n.seekable.time[f],u&&(u.duration=l.startTime-u.startTime,s&&"number"!=typeof c&&(l.duration=i-l.startTime)),l.startByte=n.seekable.pos[f],l.endByte="number"==typeof c?c:r,e.push(l)}}},{key:"parseNewData",value:function(e,t){for(var i=0,a=void 0,n=void 0,r=t.length;i<r;i++)n=t[i],a=new y["default"](x["default"].DASH),a.uri=new T["default"](n.file_name),(0,S.isHttps)()&&a.uri.setScheme("https"),a.idx=i,a.duration=n.seekable.time_end-n.seekable.time_start,a.startTime=n.start_second,a.startByte=n.seekable.pos_start,a.endByte=n.seekable.pos_end,e.push(a)}}]),t}(_["default"]);t["default"]=k},function(e,t,i){function a(e){for(var t=window.atob(e.replace(/-/g,"+").replace(/_/g,"/")),i=new Uint8Array(t.length),a=0;a<t.length;++a)i[a]=t.charCodeAt(a);return i}function n(e,t){var i=(0,d.fromCharCode)(e);t=void 0==t||t;var a=window.btoa(i).replace(/\+/g,"-").replace(/\//g,"_");return t?a:a.replace(/=*$/,"")}function r(e){for(var t=new Uint8Array(e.length/2),i=0;i<e.length;i+=2)t[i/2]=window.parseInt(e.substr(i,2),16);return t}function o(e){for(var t="",i=0;i<e.length;++i){var a=e[i].toString(16);1==a.length&&(a="0"+a),t+=a}return t}function s(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;++i)if(e[i]!=t[i])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0});var d=i(141);t["default"]={toBase64:n,fromBase64:a,toHex:o,fromHex:r,equal:s}},function(e,t,i){function a(e){for(var t="",i=0;i<e.length;i+=16e3){var a=e.subarray(i,i+16e3);t+=String.fromCharCode.apply(null,a)}return t}function n(e){e=window.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t="",i=0;i<e.length;i++)t+=("0"+e.charCodeAt(i).toString(16)).substr(-2);return t}function r(e,t){var i,a={};for(i=0;i<e.length;i++)e[i].hasOwnProperty(t)?(0,l["default"])(a,r(e[i][t],t)):a[e[i].type]=e[i];return a}function o(e){return window.btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}function s(e,t,i){if(!e)return"";var n=void 0;if(e instanceof ArrayBuffer)n=e;else{var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(e)),n=r.buffer}for(var o=Math.floor(e.byteLength/2),s=new Uint16Array(o),d=new DataView(n),l=0;l<o;l++)s[l]=d.getUint16(2*l,t);return a(s)}Object.defineProperty(t,"__esModule",{value:!0});var d=i(142),l=function(e){return e&&e.__esModule?e:{"default":e}}(d);t.fromCharCode=a,t.base64ToHex=n,t.flatten=r,t.toBase64=o,t.fromUTF16=s,t["default"]={fromCharCode:a,base64ToHex:n,toBase64:o,flatten:r,fromUTF16:s}},function(e,t,i){e.exports={"default":i(143),__esModule:!0}},function(e,t,i){i(144),e.exports=i(13).Object.assign},function(e,t,i){var a=i(11);a(a.S+a.F,"Object",{assign:i(145)})},function(e,t,i){var a=i(32),n=i(60),r=i(61),o=i(48),s=i(35),d=Object.assign;e.exports=!d||i(22)(function(){var e={},t={},i=Symbol(),a="abcdefghijklmnopqrst";return e[i]=7,a.split("").forEach(function(e){t[e]=e}),7!=d({},e)[i]||Object.keys(d({},t)).join("")!=a})?function(e,t){for(var i=o(e),d=arguments.length,l=1,u=n.f,c=r.f;d>l;)for(var f,p=s(arguments[l++]),h=u?a(p).concat(u(p)):a(p),_=h.length,g=0;_>g;)c.call(p,f=h[g++])&&(i[f]=p[f]);return i}:d},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(132),r=a(n),o=i(69),s=a(o),d=i(73),l=a(d),u=i(74),c=a(u),f=i(75),p=a(f),h=i(79),_=a(h),g=i(147),m=a(g),v=i(293),y=a(v),b=i(302),x=a(b),w=i(92),T=a(w),S=i(116),k=a(S),A=i(93),E=a(A),P=i(105),q=a(P),I=i(107),L=a(I),D=i(112),C=a(D),F=i(88),R=a(F),O=i(149),B=a(O),N=i(118),M=a(N),V=i(115),U=a(V),j=i(303),G=a(j),z=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,l["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this));return a._eventManager=new C["default"],a._config=i,a._ctx=e,a._mainStage=new G["default"](e),a._subStage=new G["default"](e),a._matStream=null,a._matSynced=!1,a._stageSyncingAudioIS=null,a._stageSyncingAudioSegment=null,a._bindEvents(),a}return(0,_["default"])(t,e),(0,p["default"])(t,[{key:"mainStage",get:function(){return this._mainStage}},{key:"subStage",get:function(){return this._subStage}},{key:"playingStream",get:function(){return this._mainStage.playingStream}},{key:"currentTime",set:function(e){var t=this.playingStream;t&&(t.currentTime=e,this._mainStage.tryToSwitchStream(!1))}},{key:"duration",get:function(){var e=this.playingStream;return e?e.duration:0}},{key:"eof",get:function(){var e=!1,t=this._mainStage;if(this.isRolling)e=t.rollStream.eof;else{var i=t.movieStream;i&&(e=i.eof,this.matEnabled&&(e=e&&this._matStream.eof))}return e}},{key:"eod",get:function(){var e=!1,t=this._mainStage;if(this.isRolling)e=t.rollStream.eod;else{var i=t.movieStream;i&&(e=i.eod,this.matEnabled&&(e=e&&this._matStream.eod))}return e}},{key:"preloaded",get:function(){return!!this._subStage&&this._subStage.size>0}},{key:"mediaRanges",get:function(){var e=new B["default"],t=this._mainStage;if(this.isRolling)e=t.rollStream.mediaRanges;else{var i=t.movieStream;i&&(e=i.mediaRanges)}return e}},{key:"playRanges",get:function(){var e=new B["default"],t=this._mainStage;if(this.isRolling)e=t.rollStream.playRanges;else{var i=t.movieStream;i&&(e=i.playRanges)}return e}},{key:"error",get:function(){var e=null,t=this._mainStage;if(this.isRolling)e=t.rollStream.error;else{var i=t.movieStream;i&&(e=i.error),!e&&this._matStream&&this.matEnabled&&(e=this._matStream.error)}return e}},{key:"matEnabled",get:function(){return!!this._matStream&&this._matStream.enabled}},{key:"isRolling",get:function(){return this.mainStage.isRolling}},{key:"reBufTime",get:function(){return this.mainStage.playingStream?this.mainStage.playingStream.reBufTime:0}},{key:"openReBufTime",set:function(e){this.mainStage.playingStream&&(this.mainStage.playingStream.openReBufTime=e)}}]),(0,p["default"])(t,[{key:"_bindEvents",value:function(){this._eventManager.on(this._mainStage,G["default"].Events.PLAYING_STREAM_CHANGED,this._onStageStreamChanged.bind(this)),this._eventManager.on(this._mainStage,G["default"].Events.PLAYING_STREAM_PROGRESS,this._onStageStreamProgress.bind(this)),this._eventManager.on(this._mainStage,G["default"].Events.EOD,this._onStageEOD.bind(this)),this._eventManager.on(this._mainStage,G["default"].Events.STAGE_BEGIN,this._onStageBegin.bind(this)),this._eventManager.on(this._mainStage,G["default"].Events.STAGE_END,this._onStageEnd.bind(this))}},{key:"_unbindEvents",value:function(){this._eventManager.removeAll()}},{key:"configure",value:function(e){e.datasource&&(0,L["default"])(this._config,e.datasource,!0,!0)}},{key:"loadRoll",value:function(e,t,i){var a=this._ctx,n=this._mainStage,r=n.rollStream;if(E["default"].log("qvs.datasource , loadRoll done="+i+", _rollStream="+r),r||i||(r=new x["default"](a,!1)),r&&!(r&&r.done&&i)){var o=!r.filled;r.push({playSourceType:e,playSourceContent:t,done:i}),r.refreshFrags(),n.has(r)||n.add(r),o&&r.seek(0),i&&a.emit(T["default"].MANIFEST_LOADED)}}},{key:"preloadRoll",value:function(e,t,i){var a=this._ctx,n=this._subStage,r=n.rollStream;if(E["default"].log("datasource , preloadRoll done="+i+", _standbyRollStream="+r+",type="+t.type),r||i||(r=new x["default"](a,!0)),r&&!(r&&r.done&&i)){var o=!r.filled;r.push({playSourceType:e,playSourceContent:t,done:i}),r.refreshFrags(),o&&r.seek(0),n.has(r)||n.add(r)}}},{key:"load",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=this._ctx,s=this._mainStage,d=s.movieStream;if(d||(d=new m["default"](o,!1)),d.push({isSwitchLevel:n,playSourceType:e,playSourceContent:t}),d.range(i,a),s.has(d)||s.add(d),d.playRanges.length>0){if(d instanceof m["default"])if(n&&e===k["default"].DASH);else{var l=d.playRanges.start(0);null!==r&&n&&(l=r),d.seek(l,n)}}else o._emitError(new q["default"](q["default"].severity.CRITICAL,q["default"].category.DATA_SOURCE,q["default"].code.UNSUPPORTED_PLAY_RANGE));o.emit(T["default"].MANIFEST_LOADED)}},{key:"preload",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments[3],n=this._ctx,r=this._subStage,o=r.movieStream;E["default"].log("qvs.datasource , preload "),o||(o=new m["default"](n,!0)),o.push({playSourceType:e,playSourceContent:t}),o.range(i,a),o.playRanges.length>0&&o instanceof m["default"]&&o.seek(o.playRanges.start(0)),r.has(o)||r.add(o),E["default"].log("qvs.datasource , preload , duration = "+o.duration)}},{key:"loadAltAudio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this._ctx,a=this._mainStage,n=this._matStream,r=a.movieStream;n||(this._matStream=new y["default"](this._ctx),n=this._matStream),a.has(n)||a.add(n),e?(n.enabled=!0,this._matSynced=!1,n.push({playSourceContent:e}),n.range(t,r.mediaRanges.toArray()),n.playRanges.length>0?n.seek(n.playRanges.start(0)):i._emitError(new q["default"](q["default"].severity.CRITICAL,q["default"].category.DATA_SOURCE,q["default"].code.UNSUPPORTED_PLAY_RANGE))):(n.enabled=!1,n.reset(),r.needInitSegment=!0)}},{key:"endOfPlayingStream",value:function(){this.mainStage.endOfPlayingStream()}},{key:"switchStage",value:function(){var e=this._ctx,t=this._mainStage,i=this._subStage;e.emit(T["default"].DATA_STAGE_SWITCHING),E["default"].log("qvs.datasource , switchStage ");var a=!0,n=!1,o=void 0;try{for(var s,d=(0,r["default"])(t.values());!(a=(s=d.next()).done);a=!0){s.value.destroy()}}catch(e){n=!0,o=e}finally{try{!a&&d["return"]&&d["return"]()}finally{if(n)throw o}}t.clear();var l=!0,u=!1,c=void 0;try{for(var f,p=(0,r["default"])(i.values());!(l=(f=p.next()).done);l=!0){var h=f.value;h.silenced=!1,t.add(h)}}catch(e){u=!0,c=e}finally{try{!l&&p["return"]&&p["return"]()}finally{if(u)throw c}}i.clear(),e.emit(T["default"].DATA_STAGE_SWITCHED)}},{key:"seek",value:function(e){e=parseFloat(e);var t=this._mainStage,i=this._matStream,a=this.playRanges;this.isRolling||(this._matSynced=!1,this._stageSyncingAudioIS=null,this._stageSyncingAudioSegment=null,a.contain(e)||(t.movieStream.range(e),i&&i.enabled&&i.range(e)),t.movieStream.seek(e),i&&i.enabled&&i.seek(e))}},{key:"range",value:function(e){var t=this._mainStage,i=this._matStream,a=null,n=null;"number"==typeof e?(a=e,t.movieStream.range(a),i&&i.enabled&&i.range(a)):Array.isArray(e)&&(n=e,t.movieStream.range(a,n),i&&i.enabled&&i.range(a,n))}},{key:"pump",value:function(e){var t=this._ctx,i=this._mainStage,a=this._matStream,n=this.matEnabled,r={video:null,audio:null},o=i.playingStream,s=i.movieStream,d=i.rollStream;if(t.error||!o)return r;if(this.isRolling){if(!d.eof){var l=d.read();r.video=l.video,r.audio=l.audio}}else if(n){if(!s.eof&&!this._stageSyncingAudioSegment){var u=s.read();u.video&&(r.video=u.video),u.audio&&(this._stageSyncingAudioIS=s.audioInitSegment,this._stageSyncingAudioSegment=u.audio)}if(!a.eof&&!this._matSynced&&this._stageSyncingAudioSegment){var c=a.read(this._stageSyncingAudioSegment.duration);c&&(c instanceof U["default"]?(r.audio=c,this._matSynced=!0):c instanceof M["default"]&&(r.audio=c))}this._matSynced&&(this._matSynced=!1,this._stageSyncingAudioIS=null,this._stageSyncingAudioSegment=null)}else if(!s.eof)if(this._stageSyncingAudioIS)r.video=null,r.audio=this._stageSyncingAudioIS,this._stageSyncingAudioIS=null;else if(this._stageSyncingAudioSegment)r.video=null,r.audio=this._stageSyncingAudioSegment,this._matSynced=!1,this._stageSyncingAudioSegment=null;else{var f=s.read();f&&(r.video=f.video,r.audio=f.audio)}return r}},{key:"bufferInfo",value:function(){var e={len:0,start:0,end:0,buffered:null};return this.playingStream?this.playingStream.buffer:e}},{key:"recoverImmediately",value:function(e){var t=this.playingStream;e=parseFloat(e),t&&(t.needInitSegment=!0,this.recoverPoint=e)}},{key:"reset",value:function(){var e=!0,t=!1,i=void 0;try{for(var a,n=(0,r["default"])(this._mainStage.values());!(e=(a=n.next()).done);e=!0){a.value.destroy()}}catch(e){t=!0,i=e}finally{try{!e&&n["return"]&&n["return"]()}finally{if(t)throw i}}this._mainStage.clear();var o=!0,s=!1,d=void 0;try{for(var l,u=(0,r["default"])(this._subStage.values());!(o=(l=u.next()).done);o=!0){l.value.destroy()}}catch(e){s=!0,d=e}finally{try{!o&&u["return"]&&u["return"]()}finally{if(s)throw d}}this._subStage.clear()}},{key:"destroy",value:function(){this._unbindEvents();var e=!0,t=!1,i=void 0;try{for(var a,n=(0,r["default"])(this._mainStage.values());!(e=(a=n.next()).done);e=!0){a.value.destroy()}}catch(e){t=!0,i=e}finally{try{!e&&n["return"]&&n["return"]()}finally{if(t)throw i}}this._mainStage.clear(),this._mainStage=null;var o=!0,s=!1,d=void 0;try{for(var l,u=(0,r["default"])(this._subStage.values());!(o=(l=u.next()).done);o=!0){l.value.destroy()}}catch(e){s=!0,d=e}finally{try{!o&&u["return"]&&u["return"]()}finally{if(s)throw d}}this._subStage.clear(),this._subStage=null}},{key:"getSegmentByPTS",value:function(e){return this.playingStream.getSegmentByPTS(e)}},{key:"openAdLoadStart",value:function(){this._mainStage.rollStream.openLoadStart()}},{key:"getCurrentADGas",value:function(){return this._mainStage.rollStream.getCurrentADGas()}},{key:"getAdCurrentTime",value:function(){return this.isRolling?this._mainStage.rollStream.currentTime:0}},{key:"abortCurrentADGas",value:function(){return!!this.isRolling&&this._mainStage.rollStream.abortCurrentADGas()}},{key:"_onStageStreamChanged",value:function(){this.emit("stream_start")}},{key:"_onStageStreamProgress",value:function(){this.emit(T["default"].STATE_CHANGE,{state:"progress"})}},{key:"_onStageEOD",value:function(){this.emit(T["default"].STATE_CHANGE,{state:"eod"})}},{key:"_onStageBegin",value:function(){}},{key:"_onStageEnd",value:function(){this.preloaded&&this.switchStage()}}]),t}(R["default"]);t["default"]=z},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(116),_=a(h),g=i(93),m=(a(g),i(148)),v=a(m),y=i(150),b=a(y),x=i(245),w=a(x),T=i(255),S=a(T),k=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e));return a.TAG="MovieStream",a._silenced=!1,a.silenced=i,a._actor=null,a}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"eof",get:function(){return!!this._actor&&this._actor.eof}},{key:"eod",get:function(){return!!this._actor&&this._actor.eod}},{key:"duration",get:function(){return this._actor?this._actor.duration:0}},{key:"silenced",get:function(){return this._silenced},set:function(e){this._silenced=e,this._actor&&(this._actor.silenced=e)}},{key:"needInitSegment",set:function(e){this._actor&&(this._actor.needIS=e)}},{key:"willSendInitSegment",get:function(){return!!this._actor&&this._actor.willSendIS}},{key:"audioInitSegment",get:function(){return this._actor?this._actor.audioInitSegment:null}},{key:"buffer",get:function(){var e={len:0,start:0,end:0,buffered:null};try{if(this._actor){var t=this._actor.buffer;t&&(e=t)}}catch(e){}return e}},{key:"reBufTime",get:function(){return this._actor.reBufTime}},{key:"openReBufTime",set:function(e){this._actor.openReBufTime=e}}]),(0,c["default"])(t,[{key:"_reset",value:function(){}},{key:"push",value:function(e){var t=!!e.isSwitchLevel,i=e.playSourceType,a=e.playSourceContent;this._filled=!0,this._initActor(i),this._actor.feed(a,t)}},{key:"_initActor",value:function(e){switch(this._manifestType=e,e){case _["default"].HLS:this._actor&&this._actor instanceof w["default"]||(this._actor&&this._actor.destroy(),this._actor=new w["default"](this._ctx));break;case _["default"].DASH:this._actor&&this._actor instanceof b["default"]||(this._actor&&this._actor.destroy(),this._actor=new b["default"](this._ctx));break;case _["default"].F4V:this._actor&&this._actor instanceof S["default"]||(this._actor&&this._actor.destroy(),this._actor=new S["default"](this._ctx))}if(!this._actor)throw new Error(e+" actor init failed!");this._actor.silenced=this._silenced}},{key:"seek",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._start=e,this._actor&&this._actor.seek(this._start,!0,t)}},{key:"read",value:function(){return this._actor?this._actor.read():null}},{key:"getSegmentByPTS",value:function(e){return this._actor?this._actor.getSegmentByPTS(e):null}},{key:"refreshFrags",value:function(){this._actor&&this._actor.refreshFrags()}}]),t}(v["default"]);t["default"]=k},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(114),l=(a(d),i(149)),u=a(l),c=i(136),f=a(c),p=function(){function e(t){(0,r["default"])(this,e),this.TAG="BaseStream",this._ctx=t,this._error=null,this.id=f["default"].create(),this._actor=null,this._mediaRanges=new u["default"],this._playRanges=new u["default"],this._start=0,this._currentTime=0,this._filled=!1,this._hasNoticeEOD=!1,this._manifestType=null}return(0,s["default"])(e,[{key:"mediaRanges",get:function(){return this._mediaRanges}},{key:"playRanges",get:function(){return this._playRanges}},{key:"error",get:function(){var e=this._error;return!e&&this._actor&&(e=this._actor.error),e}},{key:"filled",get:function(){return this._filled}},{key:"currentTime",set:function(e){this._currentTime=e},get:function(){return this._currentTime}},{key:"hasNoticeEOD",set:function(e){this._hasNoticeEOD=e},get:function(){return this._hasNoticeEOD}},{key:"buffer",get:function(){return{len:0,start:0,end:0}}},{key:"manifestType",get:function(){return this._manifestType}}]),(0,s["default"])(e,[{key:"reset",value:function(){this._mediaRanges.empty(),this._playRanges.empty(),this._actor&&this._actor.reset(),this._currentTime=0,this._filled=!1,this._reset()}},{key:"_reset",value:function(){}},{key:"destroy",value:function(){this.reset(),this._actor&&this._actor.destroy(),this._destroy&&this._destroy(),delete this._ctx,delete this._actor,delete this._error,delete this._mediaRanges,delete this._playRanges}},{key:"range",value:function(e,t){Array.isArray(t)?this._generateMediaRanges(t):t instanceof u["default"]&&(this._mediaRanges=t),this._generatePlayRanges(e),this._start=this._playRanges.start(0),this._actor&&this._actor.applyRange(this._playRanges)}},{key:"_generateMediaRanges",value:function(e){if(this._mediaRanges.empty(),Array.isArray(e)&&e.length>0)for(var t,i=0;t=e[i];i++)this._mediaRanges.add(t[0],t[1])}},{key:"_generatePlayRanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._mediaRanges,i=t.start(0),a=t.end(t.length-1),n=this._playRanges;if(n.empty(),null===e||e<a){"number"==typeof e&&e<i&&n.add(e,i);for(var r=0;r<t.length;r++){var o=t.start(r),s=t.end(r);"number"==typeof e&&e>=s?e<t.start(r+1)&&n.add(e,t.start(r+1)):"number"==typeof e&&o<=e&&e<s?n.add(e,s):n.add(o,s)}}else n.add(e,Number.POSITIVE_INFINITY)}}]),e}();t["default"]=p},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t<this._ranges.length&&e>this._ranges[t].end;)++t;return{index:t,contained:t<this._ranges.length&&e>=this._ranges[t].start}}function r(e){return(0,u.isNumber)(e)&&e>=0&&e<this._ranges.length}Object.defineProperty(t,"__esModule",{value:!0});var o=i(75),s=a(o),d=i(73),l=a(d),u=i(135),c=i(93),f=a(c),p=function e(t,i){(0,l["default"])(this,e),this.start=t,this.end=i},h=function(){function e(){(0,l["default"])(this,e),this._ranges=[]}return(0,s["default"])(e,[{key:"length",get:function(){return this._ranges.length}}],[{key:"getGapIndex",value:function(e,t){if(!e||!e.length)return null;if(1==e.length&&e.end(0)-e.start(0)<1e-6)return null;var i=.1;/(Edge\/|Trident\/|Tizen)/.test(navigator.userAgent)&&(i=.5);for(var a=0;a<e.length;a++)if(e.start(a)>t&&(0==a||e.end(a-1)-t<=i))return a>0&&f["default"].log("getGapIndex , time = "+t+", b.length = "+e.length+", i = "+a+", start="+e.start(a)+", end = "+e.end(a)),a;return null}}]),(0,s["default"])(e,[{key:"start",value:function(e){if(!r.call(this,e))throw new Error("Invalid index");return this._ranges[e].start}},{key:"end",value:function(e){if(!r.call(this,e))throw new Error("Invalid index");return this._ranges[e].end}},{key:"add",value:function(e,t){if(!(0,u.isNumber)(e)||!(0,u.isNumber)(t)||t<e)throw new Error("Invalid range");var i=n.call(this,e),a=n.call(this,t,i.index);i.contained&&(e=Math.min(e,this._ranges[i.index].start)),a.contained&&(t=Math.max(t,this._ranges[a.index].end));var r=a.index-i.index+(a.contained?1:0);this._ranges.splice(i.index,r,new p(e,t))}},{key:"contain",value:function(e){return!!n.call(this,e).contained}},{key:"empty",value:function(){this._ranges.splice(0,this._ranges.length)}},{key:"toArray",value:function(){var e=[],t=this._ranges;if(Array.isArray(t))for(var i=0;i<t.length;i++){var a=t[i].start,n=t[i].end;e.push([a,n])}return e}}]),e}();t["default"]=h},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(151),_=a(h),g=i(152),m=a(g),v=i(237),y=a(v),b=i(137),x=a(b),w=i(115),T=a(w),S=i(118),k=a(S),A=i(244),E=(a(A),i(116)),P=a(E),q=function(e){function t(e){(0,s["default"])(this,t);var i=new x["default"],a=new y["default"](e),n=new m["default"]("dash","dash"),o=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e,{manifest:i,loader:a,multiplexer:n}));return o.TAG="DashActor",o._mountBuffered=!0,o._videoTrack={},o._audioTrack={},o._duration=0,o._canResetWhileSwitchLevel=!1,o._isCacheMode=!1,o}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"duration",get:function(){return this._duration}}]),(0,c["default"])(t,[{key:"_reset",value:function(){this._duration=0,this._videoTrack=null,this._audioTrack=null}},{key:"_destroy",value:function(){this._duration=0,this._videoTrack=null,this._audioTrack=null}},{key:"applyRange",value:function(e){var t=this._manifest,i=this._videoTrack=t.tracks.video,a=this._audioTrack=t.tracks.audio;this._duration=t.duration,this._loader.videoSegments=i.segments,this._loader.audioSegments=a.segments,this._needSendInitSegment=!0,this._videoInitSegment=new k["default"]("video"),this._videoInitSegment.origin=P["default"].DASH,this._videoInitSegment.bytes=i.initSegment,this._audioInitSegment=new k["default"]("audio"),this._audioInitSegment.origin=P["default"].DASH,this._audioInitSegment.bytes=a.initSegment}},{key:"_getSegmentByPTS",value:function(e){return this._loader.findSegmentByPTS(e).segment}},{key:"_constructPlaySegmentsByRangeList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];arguments[1];return e}},{key:"read",value:function(){var e=null,t=null,i=this._needSendInitSegment,a=this._videoInitSegment,n=this._audioInitSegment;if(i)a&&n&&(e=a,t=n,this._needSendInitSegment=!1);else{var r=this._loader.read();if(r&&r.data){var o=(r.done,r.meta||{});for(var s in o){var d=o[s];if(d){var l=d.contentType,u=d.bytes,c=d.segment.startTime,f=d.segment.duration;if("video"===l){var p=new T["default"]("video");p.origin=P["default"].DASH,p.bytes=u,p.startTime=c,p.duration=f,e=p,this._curVideoEndTime=c+f}else if("audio"===l){var h=new T["default"]("audio");h.origin=P["default"].DASH,h.bytes=u,h.startTime=c,h.duration=f,t=h,this._curAudioEndTime=c+f}}}}}return{video:e,audio:t}}}]),t}(_["default"]);t["default"]=q},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(93),_=a(h),g=i(88),m=a(g),v=i(114),y=a(v),b=i(105),x=a(b),w=i(152),T=a(w),S=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return a.TAG="BaseActor",a._ctx=e,a._silenced=!1,a._isCacheMode=!0,a._manifest=null,a._loader=null,a._multiplexer=null,a._sendISWhileFragmentChange=!1,a._needSendInitSegment=!0,a._videoInitSegment=null,a._audioInitSegment=null,a._videoMediaSegments=[],a._videoMediaStartTimes=[],a._audioMediaSegments=[],a._pumpLoaderTimer=new y["default"](function(){return a._pumpLoader()}),a._seeked=!1,a._seekPTS=0,a._firstFeed=!0,a._currentDataMeta=null,a._ignoreError=!1,a._pretime=0,a._canResetWhileSwitchLevel=!0,a._curAudioEndTime=null,a._curVideoEndTime=null,a._mountBuffered=!1,a._reBufTimeObj={len:0,pre:null,open:!1},a._segmentContiguous=!1,a._audioSegmentAlignPTS=null,a._createModules(i),a._initSchedules(),a}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"eof",get:function(){var e=0===this._videoMediaSegments.length&&0===this._audioMediaSegments.length;return this._loader&&(e=e&&this._loader.eof),this._multiplexer&&(e=e&&this._multiplexer.idle),void 0!==this._preEof&&this._preEof!==e&&_["default"].log(this.LOG_TAG+": EOF = "+e),this._preEof=e,e}},{key:"eod",get:function(){return!this._loader||this._loader.eod}},{key:"error",get:function(){var e=null;if(this._loader&&(e=this._loader.error),!e&&this._multiplexer){var t=this._multiplexer.error;if(t){var i=x["default"].code.MUX_UNKNOWN_FAILED;switch(t.code){case T["default"].ErrCode.WORKER_EXCEPTION:i=x["default"].code.MUX_WORKER_INTERNAL_EXCEPTION;break;case T["default"].ErrCode.TS_SYNC_BYTE:i=x["default"].code.MUX_TS_SYNC_BYTE}e=new x["default"](x["default"].severity.CRITICAL,x["default"].category.MUX,i,t.message)}}return e}},{key:"buffer",get:function(){var e={len:0,start:0,end:0,buffered:null};if(this._loader){var t=this._loader.buffer;e.len=t.len,e.start=t.start,e.end=t.end}if(this._mountBuffered&&null!==this._curAudioEndTime&&null!==this._curVideoEndTime&&(e.buffered={video:{preEnd:this._curVideoEndTime},audio:{preEnd:this._curAudioEndTime}}),this._videoMediaSegments.length>0){var i=this._videoMediaSegments[0];e.len+=i.duration,e.start=i.startTime}return e}},{key:"reBufTime",get:function(){var e=this._reBufTimeObj.len;return _["default"].log(" get reBufTime = "+e),this._reBufTimeObj.open?(this._reBufTimeObj.len=0,this._reBufTimeObj.pre=(new Date).getTime()):this._reBufTimeObj={len:0,pre:null,open:!1},e}},{key:"openReBufTime",set:function(e){this._reBufTimeObj.open!==e&&(e&&null===this._reBufTimeObj.pre&&(this._reBufTimeObj.pre=(new Date).getTime()),e||null===this._reBufTimeObj.pre||(this._reBufTimeObj.len+=(new Date).getTime()-this._reBufTimeObj.pre,this._reBufTimeObj.pre=null),this._reBufTimeObj.open=e)}},{key:"needIS",set:function(e){this._needSendInitSegment=e}},{key:"willSendIS",get:function(){return this._needSendInitSegment}},{key:"audioInitSegment",get:function(){return this._audioInitSegment}},{key:"silenced",set:function(e){this._silenced=e,this._loader&&(this._loader.silenced=e)}},{key:"LOG_TAG",get:function(){return"["+this.TAG+(this._silenced?"(silence)":"")+"]"}},{key:"ignoreError",set:function(e){this._ignoreError=e,this._loader&&(this._loader.ignoreError=e)}},{key:"openOffset",set:function(e){this._loader.openOffset=e},get:function(){return this._loader.openOffset}}]),(0,c["default"])(t,[{key:"_createModules",value:function(e){e.manifest?this._manifest=e.manifest:_["default"].error(this.LOG_TAG+" init manifest failed."),e.loader?this._loader=e.loader:_["default"].error(this.LOG_TAG+" init loader failed."),e.multiplexer?this._multiplexer=e.multiplexer:_["default"].error(this.LOG_TAG+" init multiplexer failed.")}},{key:"_initSchedules",value:function(){this._pumpLoaderTimer.scheduleRepeated(.1)}},{key:"_destroySchedules",value:function(){this._pumpLoaderTimer.cancel()}},{key:"drainBuffer",value:function(e){var t=this._videoMediaSegments,i=this._audioMediaSegments,a=this._videoMediaStartTimes;t.splice(0,t.length),i.splice(0,i.length),a.splice(0,a.length),this._multiplexer.reset(),this._loader&&e&&this._loader.drainBufferPool()}},{key:"destroy",value:function(){this._manifest&&this._manifest.reset(),this._loader&&this._loader.destroy(),this._multiplexer&&this._multiplexer.destroy(),this._destroySchedules(),this._destroy&&this._destroy(),this._pretime=0,this._reBufTimeObj={len:0,pre:null,open:!1},delete this._ctx,delete this._manifest,delete this._loader,delete this._multiplexer,delete this._pumpLoaderTimer}},{key:"reset",value:function(){this._currentDataMeta=null,this._needSendInitSegment=!0,this._videoInitSegment=this._audioInitSegment=null,this._reBufTimeObj={len:0,pre:null,open:!1},this.drainBuffer(!0),this._pretime=0,this._reset(),_["default"].log("actor reset ")}},{key:"_reset",value:function(){}},{key:"feed",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!this._firstFeed;i=i&&!e.isContinuousMode,i=i&&(!t||t&&this._canResetWhileSwitchLevel),i&&this.reset(),this.parseManifest(e),this._firstFeed=!1,t||(this._segmentContiguous=!1,this._audioSegmentAlignPTS=null,this._curVideoEndTime=null,this._curAudioEndTime=null)}},{key:"parseManifest",value:function(e){this._manifest.reset(),this._manifest.push(e),this._manifest.end()}},{key:"read",value:function(){var e=null,t=null,i=this._needSendInitSegment,a=this._videoInitSegment,n=this._audioInitSegment,r=this._videoMediaSegments,o=this._audioMediaSegments;return i?a&&n&&(e=a,t=n,this._needSendInitSegment=!1):(r.length>0&&(e=r.shift()),o.length>0&&(t=o.shift())),{video:e,audio:t}}},{key:"seek",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!1;t?(this._seekPTS=e,this._seeked=!1):a=!0,i||(this._segmentContiguous=!1,this._audioSegmentAlignPTS=null),this._currentDataMeta=null,this.drainBuffer(),this._loader.seek(e,a,i),this._reBufTimeObj={len:0,pre:null,open:!1}}},{key:"_pumpLoader",value:function(){if(!(this._silenced||!this._isCacheMode||this.eof||this._multiplexer&&this._multiplexer.error||0===this._loader.buffer.len&&this._loader.error)&&this._multiplexer.idle){var e=this._needSendInitSegment,t=this._videoInitSegment,i=this._audioInitSegment,a=this._videoMediaSegments,n=this._audioMediaSegments,r=this._segmentContiguous,o=this._audioSegmentAlignPTS,s=!1;if(!e||t&&i?0!==a.length&&0!==n.length||(s=!0):s=!0,s){var d=this._loader.read();if(d&&d.data){this.openReBufTime=!1;var l=d.done,u=d.meta;u&&(!this._needSendInitSegment&&this._sendISWhileFragmentChange&&this._currentDataMeta&&u.fragIdx!=this._currentDataMeta.fragIdx&&(this._needSendInitSegment=!0,this._videoInitSegment=this._audioInitSegment=null),this._currentDataMeta=u),this._multiplexer.push(d.data,{done:l,resetInitSegment:this._needSendInitSegment,contiguous:r,audioSegmentAlignPTS:o,meta:u})}else 0===this.buffer.len&&(this.openReBufTime=!0)}}}},{key:"getSegmentByPTS",value:function(e){return this._getSegmentByPTS?this._getSegmentByPTS(e):null}},{key:"refreshFrags",value:function(){}},{key:"getNextFrag",value:function(e){return null}},{key:"abortCurrentADGas",value:function(e){}}]),t}(m["default"]);t["default"]=S},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(93),_=a(h),g=i(121),m=a(g),v=i(135),y=i(107),b=a(y),x=i(153),w=a(x),T=i(112),S=a(T),k=i(156),A=a(k),E=i(235),P=a(E),q=i(190),I=a(q),L=function(e){function t(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s["default"])(this,t);var n=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return n._args={from:e,to:i,options:a},(0,b["default"])(a,{debug:!1,enableWorker:!0}),n._onWorkerMessage=n._onWorkerMessage.bind(n),n._onWorkerError=n._onWorkerError.bind(n),n._eventManager=new S["default"],n._error=null,n._mux=null,n._w=null,n._idle=!0,n._initialize(),n}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"error",get:function(){return this._error}},{key:"idle",get:function(){return this._idle}}]),(0,c["default"])(t,[{key:"_initialize",value:function(){var e=this,t=this._args,i=t.from,a=t.to,n=t.options,r=void 0,o=void 0;if(n.enableWorker&&void 0!==window.Worker)try{o=this._w=(0,w["default"])(236,{worker:{name:"iqiyi_qvs_"+i}}),o.addEventListener("message",this._onWorkerMessage),o.addEventListener("error",this._onWorkerError),o.postMessage({cmd:"__init__",msg:{from:i,to:a,options:n}})}catch(e){this._w&&URL.revokeObjectURL(this._w.objectURL),delete this._w,_["default"].error("error while initializing mux-worker, fallback on mux-inline"),r=this._mux=new A["default"](i,a,n)}else r=this._mux=new A["default"](i,a,n);r&&(this._eventManager.on(r,"__idle__",function(){e._idle=!0}),this._eventManager.on(r,"error",function(t,i){return e._emitError(t,i)}),this._eventManager.on(r,"info",function(t){return e._emitInfo(t)}),this._eventManager.on(r,"data",function(t){return e._emitData(t)}),this._eventManager.on(r,"done",function(){return e._emitDone()}))}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._w;((0,v.isArrayBuffer)(e)||(0,v.isUint8Array)(e))&&((0,v.isArrayBuffer)(e)&&(e=new Uint8Array(e)),this._idle=!1,i?i.postMessage({cmd:"push",msg:{buf:e,conf:t}}):this._mux.push(e,t))}},{key:"reset",value:function(){var e=this._w;e?(_["default"].log(" mux work terminate "),e.removeEventListener("message",this._onWorkerMessage),e.removeEventListener("error",this._onWorkerError),e.terminate(),this._initialize()):this._mux.reset()}},{key:"destroy",value:function(){var e=this._w;e?(e.removeEventListener("message",this._onWorkerMessage),e.removeEventListener("error",this._onWorkerError),e.terminate()):(this._mux.destroy(),this._eventManager.destroy())}},{key:"_onWorkerMessage",value:function(e){var t=e.data,i=t.cmd,a=t.msg;switch(i){case"__init__":URL.revokeObjectURL(this._w.objectURL);break;case"__idle__":this._idle=!0;break;case"error":this._emitError(a.code,a.message);break;case"info":this._emitInfo(a);break;case"data":this._emitData(a);break;case"done":this._emitDone()}}},{key:"_onWorkerError",value:function(e){var t="Worker, "+e.message+" ("+e.filename+": "+e.lineno+")";_["default"].warn(t),this._emitError(I["default"].WORKER_EXCEPTION,t)}},{key:"_emitError",value:function(e,t){this._error={code:e,message:t},this.emit(P["default"].ERROR,this._error)}},{key:"_emitInfo",value:function(e){this.emit(P["default"].INFO,e)}},{key:"_emitData",value:function(e){e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),this.emit(P["default"].DATA,e)}},{key:"_emitDone",value:function(e){this.emit(P["default"].DONE,e)}}]),t}(m["default"]);L.ErrCode=I["default"],L.Events=P["default"],t["default"]=L},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,a){t.o(e,i)||(0,g["default"])(e,i,{configurable:!1,enumerable:!0,get:a})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw console.error(e),e};var a=t(t.s=ENTRY_MODULE);return a["default"]||a}function r(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e){return!isNaN(1*e)}function s(e,t,a){var n={};n[a]=[];var s=t.toString(),d=s.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!d)return n;for(var l,u=d[1],c=new RegExp("(\\\\n|\\W)"+r(u)+v,"g");l=c.exec(s);)"dll-reference"!==l[3]&&n[a].push(l[3]);for(c=new RegExp("\\("+r(u)+'\\("(dll-reference\\s('+m+'))"\\)\\)'+v,"g");l=c.exec(s);)e[l[2]]||(n[a].push(l[1]),e[l[2]]=i(l[1]).m),n[l[2]]=n[l[2]]||[],n[l[2]].push(l[4]);for(var f=(0,h["default"])(n),p=0;p<f.length;p++)for(var _=0;_<n[f[p]].length;_++)o(n[f[p]][_])&&(n[f[p]][_]=1*n[f[p]][_]);return n}function d(e){return(0,h["default"])(e).reduce(function(t,i){return t||e[i].length>0},!1)}function l(e,t){for(var i={main:[t]},a={main:[]},n={main:{}};d(i);)for(var r=(0,h["default"])(i),o=0;o<r.length;o++){var l=r[o],u=i[l],c=u.pop();if(n[l]=n[l]||{},!n[l][c]&&e[l][c]){n[l][c]=!0,a[l]=a[l]||[],a[l].push(c);for(var f=s(e,e[l][c],l),p=(0,h["default"])(f),_=0;_<p.length;_++)i[p[_]]=i[p[_]]||[],i[p[_]]=i[p[_]].concat(f[p[_]])}}return a}function u(e,t){t=t||{};var a={main:i.m},r=t.all?{main:(0,h["default"])(a.main)}:l(a,e),o="";(0,h["default"])(r).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;r[e][t];)t++;r[e].push(t),a[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",(0,f["default"])(t))+")({"+r[e].map(function(t){return(0,f["default"])(t)+": "+a[e][t].toString()}).join(",")+"});\n"}),o=o+"new (("+n.toString().replace("ENTRY_MODULE",(0,f["default"])(e))+")({"+r.main.map(function(e){return(0,f["default"])(e)+": "+a.main[e].toString()}).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"}),d=window.URL||window.webkitURL||window.mozURL||window.msURL,u=d.createObjectURL(s),c=new window.Worker(u,t.worker||{});return c.objectURL=u,c}Object.defineProperty(t,"__esModule",{value:!0});var c=i(154),f=a(c),p=i(89),h=a(p),_=i(76),g=a(_),m="[\\.|\\-|\\+|\\w|/|@]+",v="\\((/\\*.*?\\*/)?s?.*?("+m+").*?\\)";t["default"]=u},function(e,t,i){e.exports={"default":i(155),__esModule:!0}},function(e,t,i){var a=i(13),n=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(112),m=a(g),v=i(135),y=i(157),b=a(y),x=i(160),w=a(x),T=i(177),S=a(T),k=i(192),A=a(k),E={dash:b["default"],m2ts:S["default"],f4v:w["default"],mp4:A["default"]},P=function(e){function t(e,i){arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,s["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return a._demuxer=new E[e].Demux(a),a._remuxer=new E[i].Remux(a),a._eventManager=new m["default"],a._demuxer.endStream.pipe(a._remuxer),a._eventManager.on(a._demuxer.endStream,"info",function(e){return a.emit("info",e)}),a._eventManager.on(a._remuxer.endStream,"data",function(e){return a.emit("data",e)}),a._eventManager.on(a._remuxer.endStream,"done",function(){return a.emit("done")}),a}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.resetInitSegment,a=t.audioSegmentAlignPTS;((0,v.isArrayBuffer)(e)||(0,v.isUint8Array)(e))&&((0,v.isArrayBuffer)(e)&&(e=new Uint8Array(e)),"number"!=typeof a||isNaN(a)||(this._remuxer.audioAlignPTS=a),"boolean"==typeof i&&i&&this._remuxer.rebuildInitSegment(),this._demuxer.push(e,t),this._noticeIdle())}},{key:"reset",value:function(){this._demuxer.reset(),this._remuxer.reset()}},{key:"destroy",value:function(){this._demuxer.unpipe(),this._demuxer.endStream.unpipe(),this._remuxer.endStream.removeAllListeners("data"),this._remuxer.endStream.removeAllListeners("done"),this._eventManager.removeAll()}},{key:"_noticeIdle",value:function(){this.emit("__idle__")}}]),t}(_["default"]);t["default"]=P},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(158),r=a(n),o=i(159),s=a(o);t["default"]={Demux:r["default"],Remux:s["default"]}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(93),m=a(g),v=function(e){function t(){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this))}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.meta||{};for(var a in i){var n=i[a];n&&(m["default"].log("dash demux pushing buffer: "+n.contentType),this.emit("data",{type:"fragment",contentType:n.contentType,bytes:n.bytes,duration:n.segment.duration,syncDTS:n.segment.startTime,syncPTS:n.segment.startTime}))}}},{key:"endStream",get:function(){return this}}]),t}(_["default"]);t["default"]=v},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=function(e){function t(){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this))}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){switch(e.type){case"initSegment":this.emit("data",{fragmentType:"initSegment",contentType:e.contentType,data:e.bytes});break;case"fragment":this.emit("data",{fragmentType:"fragment",contentType:e.contentType,data:e.bytes,startDTS:e.syncDTS,startPTS:e.syncPTS,duration:e.duration})}}},{key:"endStream",get:function(){return this}}]),t}(_["default"]);t["default"]=g},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(161),r=a(n),o=i(176),s=a(o);t["default"]={Demux:r["default"],Remux:s["default"]}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(93),m=a(g),v=i(162),y=a(v),b=function(e){function t(){(0,s["default"])(this,t);var e=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return e.complex=new y["default"],e.pipe(e.complex),e}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e,t){m["default"].log("demux pushing flv"),this.emit("data",{data:e,info:t}),this.emit("done")}},{key:"endStream",get:function(){return this.complex}}]),t}(_["default"]);t["default"]=b},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(163),m=a(g),v=i(107),y=a(v),b=i(108),x=a(b),w=i(93),T=a(w),S=i(165),k=a(S),A=i(167),E=a(A),P=i(175),q=a(P),I=i(166),L=a(I),D=function(e){function t(){(0,s["default"])(this,t);var e=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return e.videoTrack=null,e.audioTrack=null,e.captionTrack=null,e._initTagsInfo(),e._initHeaderInfo(),e}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"_initTagsInfo",value:function(){var e=this;this.faConfig=null,this.fvConfig=null,this.naluSizeLength=0,this._offsetTime=null,this.h264Codec=new k["default"],this.h264Codec.on("nalu",function(t){t.unit_type===E["default"].SEI?(t=e._parseSEI(t))&&e._creatFrame(t):t.unit_type!==E["default"].IDR_SLICE&&t.unit_type!==E["default"].NON_IDR_SLICE||e._creatFrame(t)})}},{key:"_creatFrame",value:function(e){this.currentFrame=[],this.currentFrame.duration=0,this.currentFrame.byteLength=e.rawData.byteLength,this.currentFrame.naluCount=1,this.currentFrame.pts=e.pts,this.currentFrame.dts=e.dts,this.prevFrame&&(this.prevFrame.duration=e.dts-this.prevFrame.dts,this.currentFrame.duration=this.prevFrame.duration),e.unit_type===E["default"].IDR_SLICE?(this.currentFrame.push(this.fvConfig.spsnalu),this.currentFrame.push(this.fvConfig.ppsnalu),this.currentFrame.byteLength+=this.fvConfig.spsnalu.rawData.byteLength+this.fvConfig.ppsnalu.rawData.byteLength,this.currentFrame.naluCount+=2,this.currentFrame.keyframe=!0):this.currentFrame.keyframe=!1,this.currentFrame.push(e),this.prevFrame=this.currentFrame,this._pushFrameIntoGop()}},{key:"_initHeaderInfo",value:function(){var e=this;this.headerCodec=new k["default"],this.headerObj={f:null,ac:null,vc:{},sps:!1,pps:!1,keyframeTimes:null,keyframePositions:null},this.headerCodec.on("nalu",function(t){t.unit_type===E["default"].SPS?(e.headerObj.sps=!0,e.headerObj.vc.width=t.sps.width,e.headerObj.vc.height=t.sps.height,e.headerObj.vc.profileIdc=t.sps.profile_idc,e.headerObj.vc.profileCompatibility=t.sps.profile_compatibility,e.headerObj.vc.levelIdc=t.sps.level_idc,e.headerObj.vc.pixelRatio=t.sps.pixelRatio,e.headerObj.vc.sps=[t.rawData],e.headerObj.vc.spsnalu=t):t.unit_type===E["default"].PPS&&(e.headerObj.pps=!0,e.headerObj.vc.pps=[t.rawData],e.headerObj.vc.ppsnalu=t),e.headerObj.sps&&e.headerObj.pps&&e.emit("info",{type:"headerComplete",data:e.headerObj})})}},{key:"push",value:function(e){this._clear();var t=e.data,i=e.info;if(70==t[0]&&76==t[1]&&86==t[2])this._complexHead(t,i);else{var a=i.meta.vac;this.fvConfig=a.vc,this.faConfig=a.ac,this.naluSizeLength=a.naluSizeLength,"number"==typeof i.meta.offset&&i.meta.offset>=0?this._offsetTime=1e3*i.meta.offset:this._offsetTime=null,this._newGops(),this._complexFLVData(t)}}},{key:"flush",value:function(){if(this.gop&&this.gop.length>0){this.videoTrack={type:"video",timescale:9e4,pid:256,duration:Number.POSITIVE_INFINITY},this._pushGopIntoGroup(),this.videoTrack.gops=this.gops,this.videoTrack.firstDTS=this.gop[0][2].dts,this.videoTrack.firstPTS=this.gop[0][2].pts;var e=(this.videoTrack.firstDTS+this.gops.duration)/90;this.emit("info",{type:"endtimestamp",data:e/1e3}),(0,y["default"])(this.videoTrack,this.fvConfig),this.audioTrack&&this.audioTrack.frames.length>0&&(this.audioTrack.firstPTS=this.audioTrack.frames[0].pts,this.audioTrack.firstDTS=this.audioTrack.frames[0].dts),this.emit("data",{videoTrack:this.videoTrack,audioTrack:this.audioTrack,captionTrack:this.captionTrack}),this.emit("done")}else this.emit("done");this.videoTrack=null,this.audioTrack=null,this.captionTrack=null}},{key:"_clear",value:function(){T["default"].log("flvcomplex reset"),this.gop=null,this.gops=null,this.currentFrame=null,this.videoTrack=null,this.audioTrack=null,this.captionTrack=null,this.h264Codec.reset(),this.headerObj={f:null,ac:null,vc:{},sps:!1,pps:!1,keyframeTimes:null,keyframePositions:null},this.headerCodec.reset()}},{key:"_newGops",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this._newGop()}},{key:"_newGop",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"_pushFrameIntoGop",value:function(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}},{key:"_pushGopIntoGroup",value:function(){this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.push(this.gop)}},{key:"_complexFLVData",value:function(e){var t=new Uint8Array(e),i=0,a=0,n=0,r=0,o=null,s=null;for(a=t.byteLength;i<a;){if(r=t[i+1]<<16|t[i+2]<<8|t[i+3],o=t.subarray(i,11+r+4+i),s=m["default"].parseFLVTag(o),null!==this._offsetTime&&this._offsetTime>=0){var d=s.DTS/90,l=(s.PTS-s.DTS)/90;s.DTS=90*(this._offsetTime+d),s.PTS=s.DTS+90*l}"video"==s.type&&s.data_byte?(s.naluSizeLength=this.naluSizeLength,this.h264Codec.push({pes:s})):"audio"==s.type&&s.data_byte&&this._adst(s),i+=11+r+4,n++}s=null,t=null,o=null}},{key:"_parseSEI",value:function(e){for(var t=null,i=e.data,a=(i[1],i[2]),n=3+a+1,r=i.length;n<r;){var o=i[n]<<24|i[n+1]<<16|i[n+2]<<8|i[n+3],s=31&i[n+4];s!=E["default"].IDR_SLICE&&s!=E["default"].NON_IDR_SLICE||(i=i.subarray(n+4,n+4+o),t=new L["default"](i)),n+=4+o}return t}},{key:"_adst",value:function(e){var t={};if((0,y["default"])(t,this.faConfig),t.data=e.data_byte,t.dts=e.DTS,t.pts=e.PTS,null==this.audioTrack&&(this.audioTrack={type:"audio",isAAC:!0,pid:257,duration:Number.POSITIVE_INFINITY,stream_type:q["default"].ADTS},this.audioTrack.frames=[],this.audioTrack.frames.byteLength=0),null==this.audioTrack.config){var i=this.getAudioConfig(t);this.audioTrack.config=i.config,this.audioTrack.sampleRate=i.sampleRate,this.audioTrack.inputTimeScale=9e4,this.audioTrack.timescale=i.sampleRate,this.audioTrack.channelCount=i.channelCount,this.audioTrack.codec=i.codec,this.audioTrack.manifestCodec=i.manifestCodec}this.audioTrack.frames.push(t),this.audioTrack.frames.byteLength+=t.data.byteLength}},{key:"_complexHead",value:function(e,t){var i=m["default"].parseFlvHead(e),a=m["default"].parseFLVTag(i.firstVideo);this.headerObj.naluSizeLength=a.naluSizeLength,this.headerObj.ac=m["default"].parseFLVTag(i.firstAudio),this.headerObj.f=t.f,this.headerObj.keyframePositions=i.info.keyframes.filepositions,this.headerObj.keyframeTimes=i.info.keyframes.times,this.headerObj.filesize=i.info.filesize,this.headerObj.duration=i.info.duration,this.headerCodec.push({pes:{PTS:a.PTS,DTS:a.DTS,data_byte:a.pps}}),this.headerCodec.push({pes:{PTS:a.PTS,DTS:a.DTS,data_byte:a.sps}}),i=null,a=null}},{key:"_complexCaption",value:function(){}},{key:"getAudioConfig",value:function(e,t){var i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=e.audioObjectType,n=e.samplingFrequencyIndex,r=void 0,o=e.channelCount,s=void 0,d=t;if(!(n>i.length-1))return x["default"].browser.FIREFOX?n>=6?(a=5,s=new Array(4),r=n-3):(a=2,s=new Array(2),r=n):x["default"].os.android?(a=2,s=new Array(2),r=n):(a=5,s=new Array(4),t&&(-1!==t.indexOf("mp4a.40.29")||-1!==t.indexOf("mp4a.40.5"))||!t&&n>=6?r=n-3:((t&&-1!==t.indexOf("mp4a.40.2")&&n>=6&&1===o||!t&&1===o)&&(a=2,s=new Array(2)),r=n)),s[0]=a<<3,s[0]|=(14&n)>>1,s[1]|=(1&n)<<7,s[1]|=o<<3,5===a&&(s[1]|=(14&r)>>1,s[2]=(1&r)<<7,s[2]|=8,s[3]=0),{config:s,sampleRate:i[n],channelCount:o,codec:"mp4a.40."+a,manifestCodec:d}}}]),t}(_["default"]);t["default"]=D},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(164),l=a(d),u=function(){function e(t){(0,r["default"])(this,e)}return(0,s["default"])(e,null,[{key:"parseFlvHead",value:function(e){var t=e;if(e.length<13||70!==e[0]||76!==e[1]||86!==e[2])return null;var i=null,a=0,n=t[4];if(!0&n){a++}if((4&n)>>2==1){a++}for(var r=0,o=0,s=0,d=t.length-1,l=13;l+15<=d&&(t[l]==this.TAG_TYPE_VIDEO||t[l]==this.TAG_TYPE_AUDIO||t[l]==this.TAG_TYPE_SCRIPTDATAOBJECT)&&0==t[l+8]&&0==t[l+9]&&(o=(t[l+1]<<16)+(t[l+2]<<8)+t[l+3],l+o+15<=d&&o>=0)&&(s=(t[l+1+11+o]<<16)+(t[l+2+11+o]<<8)+t[l+3+11+o]-11,o==s);){if(i||(i={}),t[l]==this.TAG_TYPE_SCRIPTDATAOBJECT){var u=t.subarray(l+11,o+l+11),c=this._AMFdeSerialize(u);i.info=c.onMetaData,u=null,a++}else t[l]==this.TAG_TYPE_VIDEO?(i.firstVideo=t.subarray(l,s+11+l),i.firstVideo=this._uint8arrayWrite32(i.firstVideo,s+11)):(i.firstAudio=t.subarray(l,s+11+l),i.firstAudio=this._uint8arrayWrite32(i.firstAudio,s+11));if(++r>=a)return i;l+=s+4+11}return i}},{key:"_AMFdeSerialize",value:function(e){var t={},i=this._parseData(e);return t[i.key]=i.value,t}},{key:"_parseData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null,a=null,n=null;t?(n=new Uint8Array(e.length+1),n[0]=2,n.set(e,1,e.length)):n=e,i=this._deSerialize(n),t&&(i.valueLength-=1);var r=e.subarray(i.valueLength,e.byteLength);a=this._deSerialize(r);var o={};return o.key=i.value,o.value=a.value,o.valueLength=i.valueLength+a.valueLength,n=null,r=null,i=null,o}},{key:"_deSerialize",value:function(e){var t={},i=0,a=new l["default"];switch(e[0]){case 0:i=8,t.value=this._uint8arrayToDouble(e.subarray(1,9)),t.valueLength=1+i;break;case 1:i=1,t.value=0!==e[1],t.valueLength=1+i;break;case 2:i=e[1]<<8|e[2],t.value=this._uint8arrayToString(e.subarray(3,3+i)),t.valueLength=3+i;break;case 3:for(i=1,t.value={};0!=e[i]||0!=e[i+1]||9!=e[i+2];){var n=e.subarray(i,e.byteLength),r=this._parseData(n,!0);t.value[r.key]=r.value,i+=r.valueLength,n=null}i+=3,t.valueLength=i;break;case 4:i=e[1]<<8|e[2],t.value=this._uint8arrayToString(e.subarray(3,3+i)),t.valueLength=3+i;break;case 5:t.value=null,i=1,t.valueLength=i;break;case 6:t.value=void 0,i=1,t.valueLength=i;break;case 7:t.value=a.readUint16(e,1),i=3,t.valueLength=i;break;case 8:var o=e[1]<<24|e[2]<<16|e[3]<<8|e[4];i=5,t.value={};for(var s=0;s<o;s++){var d=e.subarray(i,e.byteLength),u=this._parseData(d,!0);t.value[u.key]=u.value,i+=u.valueLength}i+=3,t.valueLength=i;break;case 9:break;case 10:for(var c=[],f=a.readUint32(e,1),p=0;p<f;p++){var h=e.subarray(9*p+4+1,e.byteLength);c.push(this._deSerialize(h).value)}t.value=c,i=9*c.length+4+1,t.valueLength=i;break;case 11:t.value=this._uint8arrayToDouble(e.subarray(0,8)),i=11,t.valueLength=i;break;case 12:i=e[1]<<24|e[2]<<16|e[3]<<8|e[4],t.value=this._uint8arrayToString(e.subarray(5,5+i)),t.valueLength=5+i;break;default:return null}return a=null,t}},{key:"parseFLVTag",value:function(e){var t=null,i=e[0],a=null,n=null,r=e[7]<<24|e[4]<<16|e[5]<<8|e[6];if(i==this.TAG_TYPE_VIDEO){var o=e[this.TAG_HEADER_BYTE_COUNT+1],s=(e[this.TAG_HEADER_BYTE_COUNT+0],15&e[this.TAG_HEADER_BYTE_COUNT+0]),d=e[this.TAG_HEADER_BYTE_COUNT+2]<<16;d|=e[this.TAG_HEADER_BYTE_COUNT+3]<<8,d|=e[this.TAG_HEADER_BYTE_COUNT+4];var l=e[1]<<16|e[2]<<8|e[3];if(a=90*r,n=a+90*d,8388608&d&&(d|=4278190080),o==this.AVC_PACKET_TYPE_SEQUENCE_HEADER){var u=1+(3&e[this.TAG_HEADER_BYTE_COUNT+9]),c=e[this.TAG_HEADER_BYTE_COUNT+11]<<8|e[this.TAG_HEADER_BYTE_COUNT+12],f=e.subarray(this.TAG_HEADER_BYTE_COUNT+13,this.TAG_HEADER_BYTE_COUNT+13+c),p=this.TAG_HEADER_BYTE_COUNT+13+c+1,h=e[p]<<8|e[p+1];t={type:"video",PTS:n,DTS:a,sps:f,pps:e.subarray(p+2,p+2+h),naluSizeLength:u}}else if(o==this.AVC_PACKET_TYPE_NALU&&s==this.CODEC_ID_AVC){var _=e.subarray(this.TAG_HEADER_BYTE_COUNT+5,this.TAG_HEADER_BYTE_COUNT+5+l-5);t={type:"video",PTS:n,DTS:a,data_byte:_}}}else if(i==this.TAG_TYPE_AUDIO){var g=e[this.TAG_HEADER_BYTE_COUNT+0],m=g>>4&15,v=1==(1&g)?16:8,y=null,b=e[1]<<16|e[2]<<8|e[3];if(a=90*r,n=a,m==this.SOUND_FORMAT_AAC){var x=e[this.TAG_HEADER_BYTE_COUNT+1];if(0==x){var w=e[this.TAG_HEADER_BYTE_COUNT+2],T=e[this.TAG_HEADER_BYTE_COUNT+3],S=(248&w)>>3,k=(7&w)<<1|T>>7,A=T>>3&15;t={type:"audio",pts:n,dts:a,audioObjectType:S,sampleCount:1024,channelCount:A,sampleRate:this.ADTS_SAMPLING_FREQUENCIES[k],samplingFrequencyIndex:k,sampleSize:v}}else m==this.SOUND_FORMAT_AAC&&(y=e.subarray(this.TAG_HEADER_BYTE_COUNT+2,this.TAG_HEADER_BYTE_COUNT+2+b-2),t={type:"audio",PTS:n,DTS:a,data_byte:y})}}return t}},{key:"_uint8arrayToString",value:function(e){return String.fromCharCode.apply(null,e)}},{key:"_uint8arrayToDouble",value:function(e){var t=new Uint8Array(e),i=new DataView(t.buffer),a=i.getFloat64(0);return i=null,t=null,a}},{key:"_uint8arrayWrite32",value:function(e,t){var i=new Uint8Array(4),a=(new DataView(i.buffer).setInt32(0,t),new Uint8Array(e.byteLength+4));return a.set(e),a.set(i,e.byteLength),e=null,null,i=null,a}}]),e}();t["default"]=u,u.TAG_TYPE_VIDEO=9,u.TAG_TYPE_AUDIO=8,u.TAG_TYPE_SCRIPTDATAOBJECT=18,u.TAG_HEADER_BYTE_COUNT=11,u.AVC_PACKET_TYPE_SEQUENCE_HEADER=0,u.AVC_PACKET_TYPE_NALU=1,u.CODEC_ID_AVC=7,u.SOUND_FORMAT_AAC=10,u.ADTS_SAMPLING_FREQUENCIES=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=0;return ArrayBuffer.isView(e)&&(t=e.byteOffset,e=e.buffer),new DataView(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var r=i(73),o=a(r),s=i(75),d=a(s),l=function(){function e(){(0,o["default"])(this,e)}return(0,d["default"])(e,[{key:"readUint8",value:function(e,t){return n(e).getUint8(t)}},{key:"readUint16",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n(e).getUint16(t,i)}},{key:"readUint32",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n(e).getUint32(t,i)}}]),e}();t["default"]=l},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(166),m=a(g),v=function(e){function t(){(0,s["default"])(this,t);var e=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return e.cachedBytes=null,e}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){var t=this,i=0,a=0,n=0,r=e.pes,o=r.PTS,s=r.DTS,d=r.data_byte,l=void 0;if(this.cachedBytes?(l=new Uint8Array(this.cachedBytes.byteLength+d.byteLength),l.set(this.cachedBytes),l.set(d,this.cachedBytes.byteLength)):l=d,r.hasOwnProperty("naluSizeLength")){var u=r.naluSizeLength,c=0,f=0,p=0;do{f=0;for(var h=0;h<u;h++)f|=l[c+h]<<8*(u-h-1);c+=u,p=c+f,p>l.length&&(p=l.length);var _=l.subarray(c,p),g=new m["default"](_);g.pts=o,g.dts=s,t.emit("nalu",g),c=p}while(c<l.length)}else{var v=l.byteLength-1,y=0;do{if(0!==l[v])break;y++,v--}while(v>0);y>=3&&(l=l.subarray(0,v+1));do{var b=l[i]<<24|l[i+1]<<16|l[i+2]<<8|l[i+3],x=l.length-i>=4?b:-1,w=0,T=i===l.length-1;if(x>>8==1?w=3:1===x&&(w=4),3===w||4===w||T){var S=a+n,k=T&&y>=3;if(i>a&&(!T||k)){var A=l.subarray(S,k?i+1:i),E=new m["default"](A);E.pts=o,E.dts=s,t.emit("nalu",E),a=i}T&&(y<3?(this.cachedBytes=l.subarray(a),this.cachedBytes.pts=o,this.cachedBytes.dts=s,this.cachedBytes.startCodeLength=n):this.cachedBytes=null),i===a&&(n=w),i+=w||1}else i++}while(i<l.length)}if(this.cachedBytes){var P=new m["default"](this.cachedBytes.subarray(this.cachedBytes.startCodeLength));P.pts=this.cachedBytes.pts,P.dts=this.cachedBytes.dts,this.emit("nalu",P),this.cachedBytes=null}this.emit("done")}},{key:"reset",value:function(){this.cachedBytes=null}}]),t}(_["default"]);t["default"]=v},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){return{}}function r(e){return e[0]>>5}Object.defineProperty(t,"__esModule",{value:!0});var o=i(69),s=a(o),d=i(73),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(164),_=a(h),g=i(167),m=a(g),v=i(168),y=a(v),b=i(169),x=a(b),w=i(171),T=a(w),S=function(e){function t(e){(0,l["default"])(this,t);var i=(0,c["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this));switch(i.forbidden_zero_bit=e[0]>>7,i.ref_idc=e[0]>>5&3,i.unit_type=31&e[0],i.data=(0,y["default"])(e.subarray(1)),i.rawData=e,i.unit_type){case m["default"].NON_IDR_SLICE:break;case m["default"].DPA_SLICE:case m["default"].DPB_SLICE:case m["default"].DPC_SLICE:case m["default"].IDR_SLICE:break;case m["default"].SPS:i.sps=(0,x["default"])(i.data);break;case m["default"].PPS:i.pps=(0,T["default"])(i.data);break;case m["default"].SEI:i.sei=n(i.data);break;case m["default"].AUD:i.primary_pic_type=r(i.data)}return i}return(0,p["default"])(t,e),t}(_["default"]);t["default"]=S},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={NON_IDR_SLICE:1,DPA_SLICE:2,DPB_SLICE:3,DPC_SLICE:4,IDR_SLICE:5,SEI:6,SPS:7,PPS:8,AUD:9,END_SEQUENCE:10,END_STREAM:11}},function(e,t,i){function a(e){for(var t,i=e.byteLength,a=[],n=1,r=new Uint8Array(0);n<i-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(a.push(n+2),n+=2):n++;if(0===a.length)return e;t=i-a.length,r=new Uint8Array(t);var o=0;for(n=0;n<t;o++,n++)o===a[0]&&(o++,a.shift()),r[n]=e[o];return r}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},function(e,t,i){function a(e,t){for(var i=8,a=8,n=void 0,s=0;s<t;s++)0!=a&&(n=r["default"].readUEV(e,o),o+=n.bitLength,a=(i+n.value+256)%256),i=e[s]}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){o=0;var t=e[0],i=e[1],n=e[2],s=e.subarray(3),d=0,l=void 0,u=void 0,c=void 0,f=void 0,p=[1,1],h=1,_=void 0,g=0,m=void 0,v=void 0,y=!0,b=r["default"].readUEV(s,o);if(o+=b.bitLength,100==t||110==t||122==t||244==t||44==t||83==t||86==t||118==t||128==t){var x=r["default"].readUEV(s,o);o+=x.bitLength,3==x.value&&(r["default"].readBit(s,o),o+=1);var w=r["default"].readUEV(s,o);o+=w.bitLength;var T=r["default"].readUEV(s,o);if(o+=T.bitLength,r["default"].readBit(s,o),o+=1,d=r["default"].readBit(s,o),o+=1,d)for(var S=0;S<(3!=x.value?8:12);S++){var k=r["default"].readBit(s,o);o+=1,k&&(S<6?a(s,16):a(s,64))}}var A=r["default"].readUEV(s,o);o+=A.bitLength;var E=r["default"].readUEV(s,o);if(o+=E.bitLength,0===E.value)l=r["default"].readUEV(s,o),o+=l.bitLength;else{r["default"].readBit(s,o),o+=1,u=r["default"].readSEV(s,o),o+=u.bitLength,c=r["default"].readSEV(s,o),o+=c.bitLength,f=r["default"].readUEV(s,o),o+=f.bitLength;for(var P,q=[],I=0;I<f.value;I++)P=r["default"].readSEV(s,o),o+=c.bitLength,q.push(P)}var L=r["default"].readUEV(s,o);o+=L.bitLength;r["default"].readBit(s,o);o+=1;var D=r["default"].readUEV(s,o);o+=D.bitLength;var C=r["default"].readUEV(s,o);o+=C.bitLength;var F=r["default"].readBit(s,o);o+=1,F||(o+=1);r["default"].readBit(s,o);o+=1;var R=r["default"].readBit(s,o);o+=1;var O=0,B=0,N=0,M=0;if(R){var V=r["default"].readUEV(s,o);o+=V.bitLength,O=V.value;var U=r["default"].readUEV(s,o);o+=U.bitLength,B=U.value;var j=r["default"].readUEV(s,o);o+=j.bitLength,N=j.value;var G=r["default"].readUEV(s,o);o+=G.bitLength,M=G.value}var z=r["default"].readBit(s,o);if(o+=1,z){var H=r["default"].readBit(s,o);if(o+=1,H){var Y=r["default"].readByte(s,o);switch(o+=8,Y){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:var Q=r["default"].readByte(s,o);o+=8;var W=r["default"].readByte(s,o);o+=8;var $=r["default"].readByte(s,o);o+=8;var K=r["default"].readByte(s,o);o+=8,p=[Q<<8|W,$<<8|K]}p&&(h=p[0]/p[1]),255===Y&&(o+=16,o+=16)}var J=r["default"].readBit(s,o);o+=1,J&&(o+=1);var X=r["default"].readBit(s,o);if(o+=1,X){_=r["default"].readBit(s,o,3),o+=3;r["default"].readBit(s,o);o+=1;var Z=r["default"].readBit(s,o);o+=1,Z&&(o+=24)}var ee=r["default"].readBit(s,o);if(o+=1,ee){var te=r["default"].readUEV(s,o);o+=te.bitLength;var ie=r["default"].readUEV(s,o);o+=ie.bitLength}var ae=r["default"].readBit(s,o);o+=1,ae&&(m=r["default"].readBit(s,o,24),o+=24,v=r["default"].readBit(s,o,24),o+=24,y=r["default"].readBit(s,o),o+=1,g=m/v)}return{profile_idc:t,profile_compatibility:i,level_idc:n,sps_id:b.value,log2_max_frame_num_minus4:E.value,pic_order_cnt_type:E.value,log2_max_pic_order_cnt_lsb_minus4:l?l.value:0,width:Math.ceil((16*(D.value+1)-2*O-2*B)*h),height:(2-F)*(C.value+1)*16-2*N-2*M,pixelRatio:p,payload:s,video_format:_,fps:g,fixedFPS:y}};var n=i(170),r=function(e){return e&&e.__esModule?e:{"default":e}}(n),o=0},function(e,t,i){function a(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=0,n=0,r="",o=0,s=t;s<t+i;s++)a=Math.floor(s/8),n=7-s%8,o=e[a]>>n&1,r+=o;return parseInt(r,2)}function n(e){return a(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,8)}function r(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[],a=8*e.byteLength,n=!1,r=0,o=0,s=0,d="",l=t;l<a;l++)if(r=Math.floor(l/8),o=7-l%8,s=e[r]>>o&1,!n){if(0!==s){n=!0,t=l;break}i.push(0)}for(var u=i.length+1,c=t;c<t+u;c++)r=Math.floor(c/8),o=7-c%8,s=e[r]>>o&1,d+=s;return d=parseInt(d,2)-1,{bitLength:i.length+u,value:d}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=r(e,t),a=i.value,n=Math.pow(-1,a+1)*Math.ceil(a/2);return{bitLength:i.bitLength,value:n}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={readUEV:r,readSEV:o,readBit:a,readByte:n}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(172),r=a(n);t["default"]=function(e){d=0;var t=e,i=[],a=void 0,n=void 0,o=0,l=s["default"].readUEV(t,d);d+=l.bitLength;var u=s["default"].readUEV(t,d);d+=u.bitLength;s["default"].readBit(t,d);d+=1;s["default"].readBit(t,d);d+=1;var c=s["default"].readUEV(t,d);if(d+=c.bitLength,c.value>0){var f=s["default"].readUEV(t,d);d+=f.bitLength;var p=0,h=void 0;switch(f.value){case 0:for(p=0;p<=f.value;p++)h=s["default"].readUEV(t,d),d+=h.bitLength;break;case 2:for(p=0;p<=f.value;p++)h=s["default"].readUEV(t,d),d+=h.bitLength,h=s["default"].readUEV(t,d),d+=h.bitLength;break;case 3:case 4:case 5:s["default"].readBit(t,d),d+=1,a=s["default"].readUEV(t,d),d+=a.bitLength;break;case 6:n=s["default"].readUEV(t,d),d+=n.bitLength;var _=Math.ceil((0,r["default"])(c.value+1));for(o=0;o<=n.value;o++)i.push(s["default"].readBit(t,d,_)),d+=_}}var g=s["default"].readUEV(t,d);d+=g.bitLength;var m=s["default"].readUEV(t,d);d+=m.bitLength;s["default"].readBit(t,d);d+=1;s["default"].readBit(t,d,2);d+=1;var v=s["default"].readSEV(t,d);d+=v.bitLength;var y=s["default"].readSEV(t,d);d+=y.bitLength;var b=s["default"].readSEV(t,d);d+=b.bitLength;s["default"].readBit(t,d);d+=1;s["default"].readBit(t,d);d+=1;s["default"].readBit(t,d);return d+=1,{sliceGroupNum:c.value+1}};var o=i(170),s=a(o),d=0},function(e,t,i){e.exports={"default":i(173),__esModule:!0}},function(e,t,i){i(174),e.exports=i(13).Math.log2},function(e,t,i){var a=i(11);a(a.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={H264:27,ADTS:15,METADATA:21}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=function(e){function t(){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this))}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){this.emit("data",e)}},{key:"flush",value:function(){this.emit("done")}},{key:"endStream",get:function(){return this}}]),t}(_["default"]);t["default"]=g},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(178),r=a(n),o=i(191),s=a(o);t["default"]={Demux:r["default"],Remux:s["default"]}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(179),m=a(g),v=i(93),y=a(v),b=i(180),x=a(b),w=i(184),T=a(w),S=i(186),k=a(S),A=i(189),E=a(A),P=i(190),q=a(P),I=function(e){function t(e){(0,s["default"])(this,t);var i=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i.context=e,i.cache_data=new Uint8Array(0),i.psi=new k["default"](e),i.pesStream=new T["default"](e,i.psi),i.elementaryStream=new x["default"](e,i.psi),i.complexStream=new m["default"](e,i.psi),i.pipe(i.pesStream),i.pesStream.pipe(i.elementaryStream),i.elementaryStream.pipe(i.complexStream),i}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"_append",value:function(e){var t=void 0;try{t=new Uint8Array(this.cache_data.byteLength+e.byteLength)}catch(e){var i="TS demux alloc memory error~";return y["default"].error(i),void this.context.emit("error",q["default"].TS_DEMUX_MEM_ALLOC,i)}t.set(this.cache_data,0),t.set(new Uint8Array(e),this.cache_data.byteLength),this.cache_data=t}},{key:"_cut",value:function(){var e=null;return this.cache_data.length>=188&&(e=new Uint8Array(188),e.set(this.cache_data.subarray(0,188),0),this.cache_data=this.cache_data.subarray(188)),e}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(y["default"].log("hls demux pushing buffer: "+e.byteLength),this._append(e);this.cache_data.length>=188;){var i=this._cut();if(i){var a=new E["default"](i);if(!a.valid()){var n="Encounter invalid ts packet, clear & reset mux~ "+i.length+","+this.cache_data.length;y["default"].error(n),this.reset(),this.context.emit("error",q["default"].TS_SYNC_BYTE,n);break}this.psi.parse(a),this.emit("data",a)}}0===this.cache_data.length&&t.done&&this.emit("done")}},{key:"reset",value:function(){y["default"].log("mux reset!"),this.cache_data=new Uint8Array(0),this.psi.reset(),this.emit("reset")}},{key:"endStream",get:function(){return this.complexStream}}]),t}(_["default"]);t["default"]=I},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return a.context=e,a.PSI=i,a.videoTrack=null,a.audioTrack=null,a.captionTrack=null,a}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){for(var t,i=e,a=0;a<i.length;a++)switch(t=i[a],t.type){case"video":this._complexVideo(t);break;case"audio":this._complexAudio(t);break;case"caption":this._complexCaption(t)}}},{key:"flush",value:function(){this.emit("done"),this._clearStream()}},{key:"reset",value:function(){this._clearStream()}},{key:"_clearStream",value:function(){this.PSI.reset(),this.videoTrack=null,this.audioTrack=null,this.captionTrack=null}},{key:"_complexVideo",value:function(e){var t=this.PSI.findTrack(e.trackId);t&&(t.type="video",t.gops=e,t.firstDTS=t.firstDTS||e[0][0].dts,t.firstPTS=t.firstPTS||e[0][0].pts,t.duration=Number.POSITIVE_INFINITY,this.videoTrack=t,this.emit("data",{videoTrack:this.videoTrack}))}},{key:"_complexAudio",value:function(e){var t=this.PSI.findTrack(e.trackId);t&&(t.type="audio",t.frames=e,t.firstPTS=t.firstPTS||e[0].pts,t.firstDTS=t.firstDTS||e[0].dts,t.duration=Number.POSITIVE_INFINITY,this.audioTrack=t,this.emit("data",{audioTrack:this.audioTrack}))}},{key:"_complexCaption",value:function(){}}]),t}(_["default"]);t["default"]=g},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(181),m=a(g),v=i(182),y=a(v),b=i(175),x=a(b),w=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return a.context=e,a.PSI=i,a.tracks=[],a.adtsStream=new y["default"](i),a.h264Stream=new m["default"](i),a.h264Stream.on("data",function(e){a.tracks.push(e),a.emit("data",a.tracks),a.tracks=[],a.adtsStream.flush()}),a.adtsStream.on("data",function(e){a.tracks.push(e),a.emit("data",a.tracks),a.tracks=[]}),a}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){var t=this.adtsStream,i=this.h264Stream;switch(e.stream_type){case x["default"].H264:i.push(e);break;case x["default"].ADTS:t.push(e)}}},{key:"flush",value:function(){var e=this.adtsStream;this.h264Stream.flush(),e.flush(),this.emit("data",this.tracks),this.emit("done"),this.tracks=[]}},{key:"reset",value:function(){this.tracks=[],this.h264Stream.reset(),this.adtsStream.reset(),this.emit("reset")}}]),t}(_["default"]);t["default"]=w},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(175),m=a(g),v=i(167),y=a(v),b=i(165),x=a(b),w=function(e){function t(e){(0,s["default"])(this,t);var i=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i.PSI=e,i.trackId=null,i.currentFrame=[],i.codec=new x["default"],i._newGop(),i._newGops(),i.codec.on("nalu",function(e){if(e.unit_type===y["default"].SPS){var t=i.PSI.findTrack(i.trackId);t.width=e.sps.width,t.height=e.sps.height,t.profileIdc=e.sps.profile_idc,t.profileCompatibility=e.sps.profile_compatibility,t.levelIdc=e.sps.level_idc,t.pixelRatio=e.sps.pixelRatio,t.sps=[e.rawData]}else if(e.unit_type===y["default"].PPS){var a=i.PSI.findTrack(i.trackId);a.pps=[e.rawData]}i._grouping(e)}),i}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){e.stream_type===m["default"].H264&&(this.trackId=e.pid,this.codec.push(e))}},{key:"flush",value:function(){this.currentFrame.length>0&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this._pushFrameIntoGop()),this.gop.length>0&&this._pushGopIntoGroup()}},{key:"reset",value:function(){this.codec.reset(),this.currentFrame=[],this._newGop(),this._newGops()}},{key:"_grouping",value:function(e){e.unit_type===y["default"].AUD?(this.currentFrame.length>0&&(this.currentFrame.duration=e.dts-this.currentFrame.dts,this.gop.length>0&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this._pushGopIntoGroup()),(this.currentFrame.keyframe||this.gop.length>0)&&this._pushFrameIntoGop()),this.prevFrame=this.currentFrame,this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=e.pts,this.currentFrame.dts=e.dts):(e.unit_type===y["default"].IDR_SLICE&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=e.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(e)),this.currentFrame.duration=e.dts-this.currentFrame.dts}},{key:"_newGop",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"_pushFrameIntoGop",value:function(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}},{key:"_newGops",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0}},{key:"_pushGopIntoGroup",value:function(){this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.push(this.gop),this.emit("data",this.gops),this._newGop(),this._newGops(),this.emit("done")}}]),t}(_["default"]);t["default"]=w},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(108),_=a(h),g=i(121),m=a(g),v=i(175),y=a(v),b=i(183),x=a(b),w=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],T=function(e){function t(e){(0,s["default"])(this,t);var i=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i.PSI=e,i.trackId=null,i.codec=new x["default"],i.codec.on("frame",function(e){var t=i.PSI.findTrack(i.trackId);if(!t.sampleRate){var a=i.getAudioConfig(e);t.config=a.config,t.sampleRate=a.sampleRate,t.inputTimeScale=t.timescale,t.timescale=a.sampleRate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,t.isAAC=!0}i.frames.push(e),i.frames.byteLength+=e.data.byteLength,i.frames.trackId=i.trackId}),i._newFrames(),i}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){e.stream_type===y["default"].ADTS&&(this.trackId=e.pid,this.codec.push(e))}},{key:"flush",value:function(){this.frames.length>0&&(this.emit("data",this.frames),this.reset(),this.emit("done"))}},{key:"reset",value:function(){this.trackId=null,this._newFrames()}},{key:"_newFrames",value:function(){this.frames=[],this.frames.type="audio",this.frames.byteLength=0}},{key:"getAudioConfig",value:function(e,t){var i=e.audioObjectType,a=e.samplingFrequencyIndex,n=void 0,r=e.channelCount,o=void 0,s=t;if(!(a>w.length-1))return _["default"].browser.FIREFOX?a>=6?(i=5,o=new Array(4),n=a-3):(i=2,o=new Array(2),n=a):_["default"].os.android?(i=2,o=new Array(2),n=a):(i=5,o=new Array(4),t&&(-1!==t.indexOf("mp4a.40.29")||-1!==t.indexOf("mp4a.40.5"))||!t&&a>=6?n=a-3:((t&&-1!==t.indexOf("mp4a.40.2")&&a>=6&&1===r||!t&&1===r)&&(i=2,o=new Array(2)),n=a)),o[0]=i<<3,o[0]|=(14&a)>>1,o[1]|=(1&a)<<7,o[1]|=r<<3,5===i&&(o[1]|=(14&n)>>1,o[2]=(1&n)<<7,o[2]|=8,o[3]=0),{config:o,sampleRate:w[a],channelCount:r,codec:"mp4a.40."+i,manifestCodec:s}}}]),t}(m["default"]);t["default"]=T},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],m=function(e){function t(){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this))}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){var t=e.pes,i=t.PTS,a=t.DTS,n=t.data_byte,r=void 0,o=0,s=0,d=void 0,l=void 0,u=void 0,c=void 0,f=void 0;for(r=n;o+5<r.length;)if(255===r[o]&&240==(246&r[o+1])){if(l=2*(1&~r[o+1]),d=(3&r[o+3])<<11|r[o+4]<<3|(224&r[o+5])>>5,c=1024*(1+(3&r[o+6])),f=9e4*c/g[(60&r[o+2])>>>2],u=o+d,r.byteLength<u)return;if(this.emit("frame",{pts:i+s*f,dts:a+s*f,sampleCount:c,audioObjectType:1+(r[o+2]>>>6&3),channelCount:(1&r[o+2])<<2|(192&r[o+3])>>>6,sampleRate:g[(60&r[o+2])>>>2],samplingFrequencyIndex:(60&r[o+2])>>>2,sampleSize:16,data:r.subarray(o+7+l,u)}),r.byteLength===u)return r=void 0,void this.emit("done");s++,r=r.subarray(u)}else o++}}]),t}(_["default"]);t["default"]=m},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(185),m=a(g),v=[];v.byteSize=0;var y=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return a.context=e,a.PSI=i,a}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){var t=this;e.PID>255&&e.PID<8191&&(-1==this.PSI.currentProgramPID?t._pushPacket(e):this.PSI.currentProgramPID!==e.PID&&(1===e.payload_unit_start_indicator&&t._assembleOnePES(),t._pushPacket(e)))}},{key:"flush",value:function(){var e=this;e._assembleOnePES(),e.emit("done")}},{key:"reset",value:function(){this._clearCached(),this.emit("reset")}},{key:"_clearCached",value:function(){v.splice(0,v.length),v.byteSize=0}},{key:"_pushPacket",value:function(e){0===v.length&&0===e.payload_unit_start_indicator||(v.push(e),v.byteSize+=e.payload.byteLength)}},{key:"_assembleOnePES",value:function(){var e=this;if(v.length>0){for(var t=new Uint8Array(v.byteSize),i=0,a=0;i<v.length;i++){var n=v[i];t.set(n.payload,a),a+=n.payload.byteLength}var r=new m["default"](t),o=this.PSI.findTrack(v[0].PID);o&&e.emit("data",{pid:o.pid,stream_type:o.stream_type,pcr_pid:o.pcr_pid,pes:r}),e._clearCached()}}}]),t}(_["default"]);t["default"]=y},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(164),_=a(h),g=function(e){function t(e){(0,s["default"])(this,t);var i=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i.start_code_prefix=i.readUint16(e,0)<<8|e[2],i.stream_id=e[3],i.packet_length=i.readUint16(e,4),i.data_alignment_indicator=4&e[6],i.copyright=2&e[6],i.PTS_DTS_flags=e[7]>>6,i.ESCR_flag=32&e[7],i.ES_rate_flag=16&e[7],i.trick_mode_flag=8&e[7],i.additional_copy_info_flag=4&e[7],i.CRC_flag=2&e[7],i.extension_flag=1&e[7],i.header_data_length=e[8],i.PTS=0,2==(2&i.PTS_DTS_flags)&&(i.PTS=(e[9]>>1&7)<<30|i.readUint16(e,10)>>1<<15|i.readUint16(e,12)>>1),i.DTS=i.PTS,1==(1&i.PTS_DTS_flags)&&(i.DTS=(e[14]>>1&7)<<30|i.readUint16(e,15)>>1<<15|i.readUint16(e,17)>>1),i.data_byte=e.subarray(9+i.header_data_length),i}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"valid",value:function(){var e=this.start_code_prefix;return 0===e[0]&&0===e[1]&&1===e[2]}}]),t}(_["default"]);t["default"]=g},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(187),l=a(d),u=i(188),c=a(u),f=function(){function e(t){(0,r["default"])(this,e),this.context=t,this.pat_table=[],this.pes_streams=[]}return(0,s["default"])(e,[{key:"currentProgramPID",get:function(){for(var e=[],t=0;t<this.pat_table.length;t++)e.push(this.pat_table[t].pid);return e.length>0?e[0]:-1}}]),(0,s["default"])(e,[{key:"parse",value:function(e){var t=this;0===e.PID?this._parsePat(e):1===e.PID||2===e.PID||3<=e.PID&&e.PID<=15||e.PID===t.currentProgramPID&&this._parsePmt(e)}},{key:"findTrack",value:function(e){for(var t=null,i=this.pes_streams,a=0;a<i.length;a++)if(i[a].pid===e){t=i[a];break}return t}},{key:"reset",value:function(){this.pat_table.splice(0,this.pat_table.length),this.pes_streams.splice(0,this.pes_streams.length)}},{key:"_parsePat",value:function(e){var t=void 0;if(e.payload_unit_start_indicator){var i=e.payload[0];t=e.payload.subarray(i+1)}else t=e.payload;for(var a=new l["default"](t),n=0;n<a.pmtTable.length;n++)this._add_pid_to_pmt(a.pmtTable[n].programNum,a.pmtTable[n].program_map_PID);return a}},{key:"_add_pid_to_pmt",value:function(e,t){var i=this.pat_table;(function(e){for(var t,a=0;a<i.length;a++)if(t=i[a],t.id===e)return t;return null})(e)||i.push({id:e,pid:t})}},{key:"_parsePmt",value:function(e){var t=void 0;if(e.payload_unit_start_indicator){var i=e.payload[0];t=e.payload.subarray(i+1)}else t=e.payload;for(var a=new c["default"](t),n=0;n<a.pes_table.length;n++)this._add_pes_stream(a.pes_table[n],a);return a}},{key:"_add_pes_stream",value:function(e,t){var i=this.pes_streams;(function(e){for(var t,a=0;a<i.length;a++)if(t=i[a],t.pid===e)return t;return null})(e.PID)||i.push({id:e.PID,pid:e.PID,stream_type:e.streamType,pcr_pid:t.PCR_PID,duration:0,sps:[],pps:[],pixelRatio:1,timescale:9e4,width:0,height:0})}}]),e}();t["default"]=f},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(164),_=a(h),g=i(93),m=a(g),v=function(e){function t(e){(0,s["default"])(this,t);var i=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));i.table_id=e[0],i.section_syntax_indicator=e[1]>>7,i.zero=e[1]>>6&1,i.reserved_0=e[1]>>4&3,i.section_length=(15&e[1])<<8|e[2],i.transport_stream_id=i.readUint16(e,3),i.reserved_1=e[5]>>6,i.version_number=e[5]>>1&31,i.current_next_indicator=e[5]&&1,i.section_number=e[6],i.last_section_number=e[7],i.network_PID=0;var a,n=0,o=i.section_length-4-5;for(i.pmtTable=[];n<o;n+=4)a=i.readUint16(e,8+n),e[10+n]>>5,0==a?(i.network_PID=(31&e[10+n])<<8|e[11+n],m["default"].log("packet->network_PID %0x /n/n",i.network_PID)):i.pmtTable.push({programNum:a,program_map_PID:(31&e[10+n])<<8|e[11+n]});var d=i.section_length+3;return i.CRC_32=(255&e[d-4])<<24|(255&e[d-3])<<16|(255&e[d-2])<<8|255&e[d-1],i}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"valid",value:function(){var e=this.start_code_prefix;return 0===e[0]&&0===e[1]&&1===e[2]}}]),t}(_["default"]);t["default"]=v},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(164),_=a(h),g=i(93),m=a(g),v=!1,y=function(e){function t(e){var i;(0,s["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));if(a.table_id=e[0],a.section_syntax_indicator=e[1]>>7,a.reserved_0=e[1]>>4&3,a.section_length=(15&e[1])<<8|e[2],a.program_number=a.readUint16(e,3),a.version_number=e[5]>>1&31,a.current_next_indicator=e[5]&&1,a.section_number=e[6],a.last_section_number=e[7],a.PCR_PID=(31&e[8])<<8|e[9],a.program_info_length=(15&e[10])<<8|e[11],a.program_info_length<0)return(0,c["default"])(a);if(a.program_info_length>2){for(var n=0;n<a.program_info_length;){var o=e[12+n],d=e[13+n];v||m["default"].log("descriptor_tag",o,d),n+=d}v=!0}var l=12+a.program_info_length,u=a.section_length-a.program_info_length-9-4,f=l+u;if(l>=f)return i=console.warn("es_section_pos < es_section_end "+l+", "+f),(0,c["default"])(a,i);a.pes_table=[];for(var p=0;p<u;){var h=e[l+p],_=8191&a.readUint16(e,l+p+1),g=4095&a.readUint16(e,l+p+3);if(a.pes_table.push({streamType:h,PID:_}),g>2){for(var y=0,b=l+p+5;y<g;){var x=e[b+y],w=e[b+y];v||m["default"].log("descriptor_tag",x,w),y+=w}v=!0}p+=g+5}var T=a.section_length+3;return a.CRC_32=(255&e[T-4])<<24|(255&e[T-3])<<16|(255&e[T-2])<<8|255&e[T-1],a}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"parse",value:function(){}},{key:"valid",value:function(){var e=this.start_code_prefix;return 0===e[0]&&0===e[1]&&1===e[2]}}]),t}(_["default"]);t["default"]=y},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(164),_=a(h),g=i(93),m=a(g),v=function(e){function t(e){(0,s["default"])(this,t);var i=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));if(i.sync_byte=e[0],i.temp=e,i.transport_error_indicator=e[1]>>7,i.payload_unit_start_indicator=e[1]>>6&1,i.transport_priority=e[1]>>>5&1,i.PID=8191&i.readUint16(e,1),i.tsc=e[3]>>6,i.afc=e[3]>>4&3,i.continuity_counter=15&e[3],i.has_payload=1&i.afc,i.has_adaptation=2&i.afc,i.is_discontinuity=i.has_adaptation&&0!=e[4]&&128&e[5],i.has_payload)if(i.has_adaptation){var a=e[4];i.payload=e.subarray(5+a)}else i.payload=e.subarray(4);return i}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"valid",value:function(){var e=71===this.sync_byte&&this.has_payload;if(!e){var t=" mux , package valid = "+e+",buffer[0] = "+this.sync_byte+" , has_payload = "+this.has_payload+", "+this.afc+", data = "+this.temp.subarray(0,10);m["default"].error(t)}return e}}]),t}(_["default"]);t["default"]=v},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var a=0;t["default"]={WORKER_EXCEPTION:a++,TS_SYNC_BYTE:a++,TS_DEMUX_MEM_ALLOC:a++,REMUX_VIDEO_MEM_ALLOC:a++,REMUX_AUDIO_MEM_ALLOC:a++}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=function(e){function t(){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this))}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){this.emit("data",e)}}]),t}(_["default"]);t["default"]=g},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(193),r=a(n),o=i(194),s=a(o);t["default"]={Demux:r["default"],Remux:s["default"]}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(93),m=a(g),v=function(e){function t(){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this))}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){m["default"].log("demux pushing buffer: "+e.type),this.emit("data",e)}},{key:"flush",value:function(){this.emit("done")}},{key:"endStream",get:function(){return this}}]),t}(_["default"]);t["default"]=v},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(195),m=a(g),v=function(e){function t(e){(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i.context=e,i.tracks=[],i._syncDTS=0,i._syncPTS=0,i._complexStream=new m["default"](e),i.pipe(i._complexStream),i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"audioAlignPTS",set:function(e){this._complexStream.audioAlignPTS=e}}]),(0,c["default"])(t,[{key:"push",value:function(e){var t=this.tracks,i=e.videoTrack,a=e.audioTrack,n=e.captionTrack;i&&!t.videoTrack&&(t.push(i),t.videoTrack=i),a&&!t.audioTrack&&(t.push(a),t.audioTrack=a),n&&!t.captionTrack&&(t.push(n),t.captionTrack=n),this._doComplex()}},{key:"rebuildInitSegment",value:function(){this._complexStream.rebuildInitSegment()}},{key:"reset",value:function(){this.tracks=[],this._syncDTS=0,this._syncPTS=0,this.emit("reset")}},{key:"_doComplex",value:function(){var e=this.tracks.videoTrack,t=this.tracks.audioTrack,i=e?e.firstDTS:0,a=t?t.firstDTS:0;if(this._genSyncTimestamp(t,e),t&&t.frames&&e&&e.gops){var n=t.firstDTS-e.firstDTS;a=i+Math.max(0,n)}this.emit("data",{syncPTS:this._syncPTS,syncDTS:this._syncDTS,audioTimeOffset:a,videoTimeOffset:i,tracks:this.tracks}),this.tracks.splice(0,this.tracks.length),this.tracks.videoTrack=null,this.tracks.audioTrack=null,this.tracks.captionTrack=null}},{key:"_genSyncTimestamp",value:function(e,t){var i=1/0,a=1/0;if(e){var n=e.frames[0];i=a=Math.max(n.pts,0)}if(t){var r=t.gops[0][0];i=r.pts,a=r.dts}this._syncDTS=a,this._syncPTS=i}},{key:"endStream",get:function(){return this._complexStream}}]),t}(_["default"]);t["default"]=v},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(121),_=a(h),g=i(196),m=a(g),v=i(232),y=a(v),b=i(234),x=a(b),w=function(e){function t(e){(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i.context=e,i._initComplexer=new m["default"](e),i._audioComplexer=new y["default"](e),i._videoComplexer=new x["default"](e),i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"audioAlignPTS",set:function(e){this._audioComplexer.nextSegmentPts=e}}]),(0,c["default"])(t,[{key:"push",value:function(e){if(this._initComplexer.needParseIS){var t=this._initComplexer.parse(e),i=t.length;if(i>0)for(var a=0;a<i;a++){var n=t[a];this.emit("data",{fragmentType:"initSegment",contentType:n.contentType,data:n.bytes.buffer})}}if(this._audioComplexer){var r=this._audioComplexer.parse(e);r&&this.emit("data",{fragmentType:"fragment",contentType:r.contentType,data:r.bytes.buffer,startDTS:r.syncDTS,startPTS:r.syncPTS,duration:r.duration,nextSegmentPTS:r.nextSegmentPTS})}if(this._videoComplexer){var o=this._videoComplexer.parse(e);o&&this.emit("data",{fragmentType:"fragment",contentType:o.contentType,data:o.bytes.buffer,startDTS:o.syncDTS,startPTS:o.syncPTS,duration:o.duration})}}},{key:"rebuildInitSegment",value:function(){this._initComplexer.reset()}},{key:"reset",value:function(){this._initComplexer.reset(),this._audioComplexer.reset(),this._videoComplexer.reset()}}]),t}(_["default"]);t["default"]=w},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(197),l=a(d),u=function(){function e(t){(0,r["default"])(this,e),this.context=t,this._hasVideoIS=!1,this._hasAudioIS=!1}return(0,s["default"])(e,[{key:"needParseIS",get:function(){return!(this._hasVideoIS&&this._hasAudioIS)}}]),(0,s["default"])(e,[{key:"parse",value:function(e){for(var t=[],i=e.tracks||[],a=0;a<i.length;a++){var n=i[a];switch(n.type){case"video":this._hasVideoIS||(this._hasVideoIS=!0,t.push(this._initSegment(n)));break;case"audio":this._hasAudioIS||(this._hasAudioIS=!0,t.push(this._initSegment(n)))}}return t}},{key:"reset",value:function(){this._hasVideoIS=!1,this._hasAudioIS=!1}},{key:"_initSegment",value:function(e){var t=l["default"].initSegment([e]);return{type:"initSegment",contentType:e.type,bytes:t}}}]),e}();t["default"]=u},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(198),l=a(d),u=i(201),c=a(u),f=i(224),p=a(f),h=i(231),_=a(h),g=function(){function e(){(0,r["default"])(this,e),this.UINT32_MAX=Math.pow(2,32)-1}return(0,s["default"])(e,[{key:"initSegment",value:function(e){var t=void 0,i=(0,c["default"])(e);return t=new Uint8Array(l["default"].byteLength+i.byteLength),t.set(l["default"]),t.set(i,l["default"].byteLength),t}},{key:"moof",value:function(e,t,i){return(0,p["default"])(e,t,i)}},{key:"mdat",value:function(e){return(0,_["default"])(e)}}]),e}();t["default"]=new g},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(199),p=a(f),h=i(200),_=a(h),g=function(e){function t(){(0,s["default"])(this,t);var e=new Uint8Array([105,115,111,109]),i=new Uint8Array([97,118,99,49]),a=new Uint8Array([0,0,0,1]);return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,_["default"].ftyp,e,a,e,i))}return(0,c["default"])(t,e),t}(p["default"]);t["default"]=(new g).bytes},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var a=i(73),n=function(e){return e&&e.__esModule?e:{"default":e}}(a),r=function e(t){(0,n["default"])(this,e);for(var i=8,a=arguments.length,r=Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];for(var s=r.length,d=s,l=void 0;d--;)i+=r[d].byteLength;for(l=new Uint8Array(i),l[0]=i>>24&255,l[1]=i>>16&255,l[2]=i>>8&255,l[3]=255&i,l.set(t,4),d=0,i=8;d<s;d++)l.set(r[d],i),i+=r[d].byteLength;this.bytes=l};t["default"]=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var a={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},n=void 0;for(n in a)a.hasOwnProperty(n)&&(a[n]=[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3)]);t["default"]=a},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=i(202),m=a(g),v=i(203),y=a(v),b=i(222),x=a(b),w=function(e){function t(e){var i;(0,s["default"])(this,t);for(var a=e.length,n=[];a--;)n[a]=(0,y["default"])(e[a]);return(0,l["default"])(this,(i=t.__proto__||(0,r["default"])(t)).call.apply(i,[this,p["default"].moov,(0,m["default"])(e[0].timescale,e[0].duration)].concat(n,[(0,x["default"])(e)])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new w(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(199),p=a(f),h=i(200),_=a(h),g=i(197),m=a(g),v=function(e){function t(e,i){(0,s["default"])(this,t),i*=e;var a=Math.floor(i/(m["default"].UINT32_MAX+1)),n=Math.floor(i%(m["default"].UINT32_MAX+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,_["default"].mvhd,o))}return(0,c["default"])(t,e),t}(p["default"]);t["default"]=function(e,t){return new v(e,t).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=i(204),m=a(g),v=i(205),y=a(v),b=function(e){function t(e){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].trak,(0,m["default"])(e),(0,y["default"])(e)))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return e.duration=e.duration||4294967295,new b(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(197),_=a(h),g=i(199),m=a(g),v=function(e){function t(e){(0,s["default"])(this,t);var i=e.id,a=e.duration*e.timescale,n=e.width,o=e.height,d=Math.floor(a/(_["default"].UINT32_MAX+1)),u=Math.floor(a%(_["default"].UINT32_MAX+1));return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,d>>24,d>>16&255,d>>8&255,255&d,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,o>>8&255,255&o,0,0])))}return(0,c["default"])(t,e),t}(m["default"]);t["default"]=function(e){return new v(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=i(206),m=a(g),v=i(207),y=a(v),b=i(208),x=a(b),w=function(e){function t(e){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].mdia,(0,m["default"])(e.timescale,e.duration),(0,y["default"])(e.type),(0,x["default"])(e)))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new w(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(197),_=a(h),g=i(199),m=a(g),v=function(e){function t(e,i){(0,s["default"])(this,t),i*=e;var a=Math.floor(i/(_["default"].UINT32_MAX+1)),n=Math.floor(i%(_["default"].UINT32_MAX+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]);return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].mdhd,o))}return(0,c["default"])(t,e),t}(m["default"]);t["default"]=function(e,t){return new v(e,t).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),m=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),v=function(e){function t(e){(0,s["default"])(this,t);var i=void 0;switch(e){case"video":i=g;break;case"audio":i=m}return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].hdlr,i))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new v(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=i(209),m=a(g),v=i(211),y=a(v),b=i(212),x=a(b),w=i(213),T=a(w),S=function(e){function t(e){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].minf,"audio"===e.type?y["default"]:x["default"],m["default"],(0,T["default"])(e)))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new S(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=i(210),m=a(g),v=function(e){function t(){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].dinf,m["default"]))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=(new v).bytes},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=(new g).bytes},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].smhd,new Uint8Array([0,0,0,0,0,0,0,0])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=(new g).bytes},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=(new g).bytes},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=i(214),m=a(g),v=i(215),y=a(v),b=i(216),x=a(b),w=i(217),T=a(w),S=i(218),k=a(S),A=function(e){function t(e){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].stbl,(0,k["default"])(e),T["default"],x["default"],y["default"],m["default"]))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new A(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].stco,new Uint8Array([0,0,0,0,0,0,0,0])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=(new g).bytes},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=(new g).bytes},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].stsc,new Uint8Array([0,0,0,0,0,0,0,0])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=(new g).bytes},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].stts,new Uint8Array([0,0,0,0,0,0,0,0])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=(new g).bytes},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=i(219),m=a(g),v=i(220),y=a(v),b=i(221),x=a(b),w=function(e){function t(e){(0,s["default"])(this,t);var i=new Uint8Array([0,0,0,0,0,0,0,1]),a=void 0;return a="audio"===e.type?e.isAAC||"mp3"!==e.codec?(0,y["default"])(e):(0,m["default"])(e):(0,x["default"])(e),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].stsd,i,a))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new w(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(e){(0,s["default"])(this,t);var i=e.sampleRate;return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"][".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new g(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(e){(0,s["default"])(this,t);var i=e.config.length;return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].esds,new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5,i].concat(e.config).concat([6,1,2]))))}return(0,c["default"])(t,e),t}(_["default"]),m=function(e){function t(e){(0,s["default"])(this,t);var i=e.sampleRate;return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),new g(e).bytes))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new m(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(e,i){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].pasp,new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i])))}return(0,c["default"])(t,e),t}(_["default"]),m=function(e){function t(){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}return(0,c["default"])(t,e),t}(_["default"]),v=function(e){function t(e,i,a){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(a))))}return(0,c["default"])(t,e),t}(_["default"]),y=function(e){function t(e){(0,s["default"])(this,t);var i=[],a=[],n=void 0,o=void 0,d=void 0;for(n=0;n<e.sps.length;n++)o=e.sps[n],d=o.byteLength,i.push(d>>>8&255),i.push(255&d),i=i.concat(Array.prototype.slice.call(o));for(n=0;n<e.pps.length;n++)o=e.pps[n],d=o.byteLength,a.push(d>>>8&255),a.push(255&d),a=a.concat(Array.prototype.slice.call(o));var u=new v(e,i,a).bytes,c=e.width,f=e.height,h=e.pixelRatio[0],_=e.pixelRatio[1];return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,255&c,f>>8&255,255&f,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,(new m).bytes,new g(h,_).bytes))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new y(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(94),s=a(o),d=i(73),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(200),_=a(h),g=i(199),m=a(g),v=i(223),y=a(v),b=function(e){function t(e){var i;return(0,l["default"])(this,t),(0,c["default"])(this,(i=t.__proto__||(0,r["default"])(t)).call.apply(i,[this,_["default"].mvex].concat((0,s["default"])(e))))}return(0,p["default"])(t,e),t}(m["default"]);t["default"]=function(e){for(var t=e.length,i=[];t--;)i[t]=(0,y["default"])(e[t]);return new b(i).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(e){(0,s["default"])(this,t);var i=e.id;return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new g(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=i(225),m=a(g),v=i(226),y=a(v),b=function(e){function t(e,i,a){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].moof,(0,m["default"])(e),(0,y["default"])(a,i)))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e,t,i){return new b(e,t,i).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(e){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new g(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=i(197),m=a(g),v=i(227),y=a(v),b=i(228),x=a(b),w=i(229),T=a(w),S=i(230),k=a(S),A=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,k["default"])(e),n=e.id,o=Math.floor(i/(m["default"].UINT32_MAX+1)),d=Math.floor(i%(m["default"].UINT32_MAX+1));return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].traf,(0,y["default"])(n),(0,x["default"])(o,d),(0,T["default"])(e,a.length+16+20+8+16+8+8),a))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e,t){return new A(e,t).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(e){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].tfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new g(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(e,i){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].tfdt,new Uint8Array([1,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i])))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e,t){return new g(e,t).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(e,i){(0,s["default"])(this,t);var a=e.samples||[],n=a.length,o=12+16*n,d=new Uint8Array(o),u=void 0,c=void 0,f=void 0,h=void 0,_=void 0;i+=8+o,d.set([0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,i>>>24&255,i>>>16&255,i>>>8&255,255&i],0);for(var g=0;g<n;g++)u=a[g],c=u.duration,f=u.size,h=u.flags,_=u.cts,d.set([c>>>24&255,c>>>16&255,c>>>8&255,255&c,f>>>24&255,f>>>16&255,f>>>8&255,255&f,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSyncSample,61440&h.degradationPriority,15&h.degradationPriority,_>>>24&255,_>>>16&255,_>>>8&255,255&_],12+16*g);return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].trun,d))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e,t){return new g(e,t).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(e){(0,s["default"])(this,t);for(var i,a=e.samples||[],n=new Uint8Array(4+a.length),o=0;o<a.length;o++)i=a[o].flags,n[o+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].sdtp,n))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new g(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(79),c=a(u),f=i(200),p=a(f),h=i(199),_=a(h),g=function(e){function t(e){return(0,s["default"])(this,t),(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,p["default"].mdat,e))}return(0,c["default"])(t,e),t}(_["default"]);t["default"]=function(e){return new g(e).bytes}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(93),l=a(d),u=i(197),c=a(u),f=i(190),p=a(f),h=i(233),_=a(h),g=function(){function e(t){(0,r["default"])(this,e),this.context=t,this.audioSequenceNumber=0,this.nextSegmentPts=void 0}return(0,s["default"])(e,[{key:"parse",value:function(e){var t=null,i=e.tracks.audioTrack;if(i){this._loopAACFrames(i,e.audioTimeOffset);var a=this._remuxAudio(i);a&&(t={type:"fragment",contentType:"audio",bytes:a,duration:(this.nextSegmentPts-i.firstPTS)/i.inputTimeScale,syncDTS:e.syncDTS/i.inputTimeScale,syncPTS:e.syncPTS/i.inputTimeScale,nextSegmentPTS:this.nextSegmentPts})}return t}},{key:"reset",value:function(){this.audioSequenceNumber=0,this.nextSegmentPts=void 0}},{key:"_remuxAudio",value:function(e){var t=c["default"].moof(this.audioSequenceNumber,e.baseMediaDecodeTime,e),i=c["default"].mdat(this.mdat);this.audioSequenceNumber++;var a=void 0;try{a=new Uint8Array(t.byteLength+i.byteLength)}catch(e){var n="remux audio while alloc memory error~";return l["default"].error(n),this.context.emit("error",p["default"].REMUX_AUDIO_MEM_ALLOC,n),null}return a.set(t,0),a.set(i,t.byteLength),a}},{key:"_loopAACFrames",value:function(e,t){var i=0,a=e.frames,n=void 0,r=void 0,o=void 0,s=e.inputTimeScale/e.timescale,d=e.isAAC?1024:1152,u=d*s;e.samples=[];var c=a.length>0&&"number"==typeof this.nextSegmentPts&&!isNaN(this.nextSegmentPts)&&this.nextSegmentPts>0&&(Math.abs(t-this.nextSegmentPts)<.1*e.inputTimeScale||Math.abs(a[0].pts-this.nextSegmentPts)<20*u);c||(l["default"].log("audio track consecutive fragments as being contiguous: "+c),this.nextSegmentPts=t);for(var f,p=0,h=this.nextSegmentPts;p<a.length;){f=a[p];var g=f.pts,m=g-h,v=Math.abs(1e3*m/e.inputTimeScale);if(m<=-1*u)l["default"].warn("Dropping 1 audio sample @ "+(h/e.inputTimeScale).toFixed(3)+"s due to "+Math.round(v)+" ms overlap."),a.byteLength-=f.data.byteLength,a.splice(p,1);else if(m>=1*u&&v<1e4&&h){var y=Math.round(m/u);l["default"].warn("Injecting "+y+" audio frame @ "+(h/e.inputTimeScale).toFixed(3)+"s due to "+Math.round(1e3*m/e.inputTimeScale)+" ms gap.");for(var b=0;b<y;b++){var x=Math.max(h,0),w=(0,_["default"])(e.manifestCodec||e.codec,e.channelCount);w||(l["default"].log("Unable to get silent frame for given audio codec; duplicating last frame instead."),w=f.data.subarray()),a.byteLength+=w.byteLength,a.splice(p,0,{data:w,pts:x,dts:x}),h+=u,p++}f.pts=f.dts=h,h+=u,p++}else f.pts=f.dts=h,h+=u,p++}var T=a[0],S=a[a.length-1];Math.max(T.dts,0),n=Math.max(T.pts,0),r=Math.max(S.dts,0),o=Math.max(S.pts,r),e.firstDTS=e.firstPTS=n,e.baseMediaDecodeTime=n/s;for(var k,A,E=new Uint8Array(a.byteLength),P=0;P<a.length;P++)k=a[P],A=a[P+1],e.samples.push({size:k.data.byteLength,duration:A?Math.round((A.pts-k.pts)/s):0,cts:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:0}}),E.set(k.data,i),i+=k.data.byteLength;e.samples.length>=2&&(e.samples[e.samples.length-1].duration=e.samples[e.samples.length-2].duration),this.nextSegmentPts=o+e.samples[e.samples.length-1].duration*s,this.mdat=E}}]),e}();t["default"]=g},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(108),l=a(d),u=i(93),c=a(u),f=i(197),p=a(f),h=i(190),_=a(h),g=i(107),m=a(g),v=l["default"].browser.SAFARI,y=function(){function e(t){(0,r["default"])(this,e),this.context=t,this.videoSequenceNumber=0,this.mdat=null,this.nextSegmentDts=null,this.nextSegmentPts=null}return(0,s["default"])(e,[{key:"parse",value:function(e){var t=null,i=e.tracks.videoTrack;if(i){this._loopGOPs(i);var a=this._remuxVideo(i);a&&(t={type:"fragment",contentType:"video",bytes:a,duration:(this.nextSegmentDts-i.firstDTS)/i.timescale,syncDTS:e.syncDTS/i.timescale,syncPTS:e.syncPTS/i.timescale})}return t}},{key:"reset",value:function(){this.videoSequenceNumber=0,this.mdat=null,this.nextSegmentDts=null,this.nextSegmentPts=null}},{key:"_remuxVideo",value:function(e){var t=p["default"].moof(this.videoSequenceNumber,e.baseMediaDecodeTime,e),i=p["default"].mdat(this.mdat);this.videoSequenceNumber++;var a=void 0;try{a=new Uint8Array(t.byteLength+i.byteLength)}catch(e){var n="remux video while alloc memory error~";return c["default"].error(n),this.context.emit("error",_["default"].REMUX_VIDEO_MEM_ALLOC,n),null}return a.set(t,0),a.set(i,t.byteLength),a}},{key:"_loopGOPs",value:function(e){var t=void 0,i=void 0,a=void 0,n=void 0,r=0,o=e.gops,s=void 0,d=void 0,u=void 0,f=void 0,p=void 0,h=void 0,_=-1,g=void 0,y=0;e.samples=[];var b=o[0],x=b[0],w=o[o.length-1],T=w[w.length-1];s=Math.max(x.dts,0),d=Math.max(x.pts,0),u=Math.max(T.dts,0),f=Math.max(T.pts,0,u),l["default"].browser.SAFARI&&(r=Math.round((u-s)/(o.frameLength-1)));var S=o.length&&this.nextSegmentDts&&(Math.abs((s-this.nextSegmentDts)/e.timescale)<.1||Math.abs(d-this.nextSegmentPts)<e.timescale/5);"boolean"==typeof S&&(S=!0);var k=Math.round((s-this.nextSegmentDts)/90);if(S&&k)if(k>1){var A=x.duration/90,E=Math.round(k/A)||0;for(c["default"].warn("AVC:"+k+" ms hole between fragments detected, filling it "+E+" I-frame"),n=0;n<E;n++){var P=Math.max(this.nextSegmentDts,0),q=Math.max(this.nextSegmentPts,0),I=(0,m["default"])([],x,!0);I.dts=P,I.pts=q,0===n&&(s=P,d=q),this.nextSegmentDts+=I.duration,this.nextSegmentPts+=I.duration,o.byteLength+=I.byteLength,o.naluCount+=I.naluCount,b.splice(n,0,I)}}else k<-1&&c["default"].log("AVC:"+-k+" ms overlapping between fragments detected");var L=o.byteLength+4*o.naluCount,D=new Uint8Array(L),C=new DataView(D.buffer);for(t=0;t<o.length;t++)for(p=o[t],i=0;i<p.length;i++){h=p[i],_+=1,l["default"].browser.SAFARI?h.dts=s+_*r:h.dts=Math.max(h.dts,s),h.pts=Math.max(h.pts,h.dts);var F={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};for(F.cts=v?Math.max(0,r*Math.round((h.pts-h.dts)/r)):h.pts-h.dts,F.duration=h.duration,F.size=4*h.length,F.size+=h.byteLength,(h.keyframe||l["default"].browser.CHROME&&0===e.samples.length)&&(F.flags.dependsOn=2,F.flags.isNonSyncSample=0),e.samples.push(F),a=0;a<h.length;a++)g=h[a],C.setUint32(y,g.rawData.byteLength),y+=4,D.set(g.rawData,y),y+=g.rawData.byteLength}e.firstDTS=s,e.firstPTS=d,e.lastDTS=u,e.lastPTS=f,e.baseMediaDecodeTime=s;var R=e.samples[e.samples.length-1].duration;this.nextSegmentPts=f+R,this.nextSegmentDts=u+R,this.mdat=D}}]),e}();t["default"]=y},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={ERROR:"ERROR",INFO:"INFO",DATA:"DATA",DONE:"DONE"}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];self.postMessage({cmd:e,msg:t},i)}Object.defineProperty(t,"__esModule",{value:!0});var r=i(156),o=a(r),s=i(112),d=a(s),l=i(93),u=a(l);t["default"]=function(e){var t=new d["default"];e.addEventListener("message",function(i){var a=i.data,r=a.cmd,s=a.msg;switch(r){case"__init__":var d=s.from,l=s.to,c=s.options;c.debug&&(u["default"].enable=!0),e._mux=new o["default"](d,l,c),t.on(e._mux,"__idle__",function(){return n("__idle__")}),t.on(e._mux,"error",function(e,t){return n("error",{code:e,message:t})}),t.on(e._mux,"info",function(e){return n("info",e)}),t.on(e._mux,"data",function(e){var t=[];e.data instanceof ArrayBuffer&&t.push(e.data),n("data",e,t)}),t.on(e._mux,"done",function(){return n("done")}),n("__init__"),n("__idle__");break;case"push":e._mux.push(s.buf,s.conf);break;case"reset":e._mux&&e._mux.reset()}})}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(238),_=a(h),g=i(242),m=a(g),v=i(241),y=a(v),b=i(116),x=a(b),w=i(93),T=a(w),S=i(243),k=a(S),A=i(105),E=a(A),P=function(e){function t(e){(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e,!0));return i.TAG="DashLoader",i._videoSegments=null,i._audioSegments=null,i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"videoSegments",set:function(e){this._eof=!1,this._eod=!1,this._videoSegments=e}},{key:"audioSegments",set:function(e){this._audioSegments=e}}]),(0,c["default"])(t,[{key:"read",value:function(){var e=this;if(this.mode===m["default"].CDN)return null;var t=this._p2pProxy.read(),i=this._videoSegments,a=this._audioSegments;if(t&&t.type){var n=t.bid,r=t.loadDone;if("m4s"===t.type.toLowerCase()){var o={contentType:"video",index:t.video.index,bytes:t.video.data,chunkEOF:t.video.chunkEOF,segment:i[t.video.index]},s={contentType:"audio",index:t.audio.index,bytes:t.audio.data,chunkEOF:t.audio.chunkEOF,segment:a[t.audio.index]};if(r&&(this.state=y["default"].END),[o,s].filter(function(e){return!!e.segment}).forEach(function(t){var i=t.contentType,a=t.index,r=t.bytes,o=t.chunkEOF,s=t.segment,d=s.startTime,l=s.duration,u=s.startByte,c=s.endByte,f=c-u;if(s.status=o?2:1,r){var p="\n\t\t\t\t\t\t\t\t"+e.LOG_TAG+": received "+i+" "+a+" segment, bid: "+n+". \n\t\t\t\t\t\t\t\tbytes length: "+r.length+", "+u+"->"+c+". \n\t\t\t\t\t\t\t\tstartTime: "+d+", duration: "+l+"\n\t\t\t\t\t\t\t\t";T["default"].debug(p),r.length!==f&&(self._error=new E["default"](E["default"].severity.CRITICAL,E["default"].category.DATA_SOURCE,E["default"].DATA_P2P_BYTES_LENGTH),T["default"].error(e.LOG_TAG+": bytes length not match, expect "+f+", return "+r.length+", "+p))}}),s.index>=a.length||s.index===a.length-1&&s.bytes?self._audioEOF=!0:self._audioEOF=!1,o.index>=i.length||o.index===i.length-1&&o.bytes?self._videoEOF=!0:self._videoEOF=!1,this._eof=self._videoEOF&&self._audioEOF,this._eof&&T["default"].log(this.LOG_TAG+": EOF"),o.bytes||s.bytes)return{type:x["default"].DASH,data:new Uint8Array(0),meta:{video:o.bytes?o:null,audio:s.bytes?s:null}}}}return null}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{fragment:null,segment:this._findPieceByPTS(e,this._videoSegments)}}},{key:"_findPieceByPTS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],i=arguments[2];return i&&!this._pieceWithinToleranceTest(e,i)?i:(0,k["default"])(t,this._pieceWithinToleranceTest.bind(this,e))}},{key:"_pieceWithinToleranceTest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];return e<0&&(e=0),t.startTime+t.duration<=e?1:t.startTime>e&&t.startTime?-1:0}}]),t}(_["default"]);t["default"]=P},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(105),m=a(g),v=i(136),y=a(v),b=i(93),x=a(b),w=i(114),T=a(w),S=i(239),k=a(S),A=i(241),E=a(A),P=i(242),q=a(P),I={};for(var L in E["default"])I[E["default"][L]]=L;var D=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,s["default"])(this,t);var a=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return a.TAG="BaseLoader",a._ctx=e,a._silenced=!1,a._cfg=e.config,a._uuid=y["default"].create(),a._eof=!1,a._eod=!1,a._useP2P=i,a._p2pProxy=a._ctx.p2pLoader,a._error=null,a._ignoreError=!1,a._state=E["default"].IDLE,a._tickTimer=new T["default"](function(){return a._ticker()}),a.mode===q["default"].CDN&&a._tickTimer.scheduleRepeated(a._silenced?.5:.1),a._maxBufferTimeLength=a._cfg.maxBufferTimeLength,a._downFragBufferTimeLength=30,a._bufferPool=new k["default"],a._openOffset=!1,a._withBufferMaxRetry=e.config.loaderWithBufferMaxRetry,a._noBufferMaxRetry=e.config.loaderNoBufferMaxRetry,a._withBufferRetryCount=0,a._noBufferRetryCount=0,a}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"eof",get:function(){return this._eof}},{key:"eod",get:function(){return this._eod}},{key:"mode",get:function(){var e=q["default"].CDN;return this._useP2P&&this._p2pProxy&&this._p2pProxy.enabled&&(e=q["default"].P2P),e}},{key:"state",set:function(e){if(this._state!==e){var t=this.state;this._state=e,x["default"].log(this.LOG_TAG+": "+I[t]+" -> "+I[e]),this._silenced||this._state!==E["default"].END||(this._eod=!0,x["default"].log(this.LOG_TAG+": EOD"))}},get:function(){return this._state}},{key:"buffer",get:function(){var e=0,t=0;if(this.mode===q["default"].P2P){var i=this._p2pProxy.getBuffTime();if(i){var a=i.start,n=i.length;"number"==typeof a&&a>=0&&"number"==typeof n&&n>=0&&(t=a,e=n)}}else{var r=this._getUnreadBufInfo();t=r.start,e=r.timeLength}return{len:e,start:t,end:t+e}}},{key:"error",get:function(){var e=null;if(this.mode===q["default"].P2P){switch(this._p2pProxy.error()){case"dispatch":e=new m["default"](m["default"].severity.CRITICAL,m["default"].category.DATA_SOURCE,m["default"].code.DATA_P2P_DISPATCH);break;case"load":e=new m["default"](m["default"].severity.CRITICAL,m["default"].category.DATA_SOURCE,m["default"].code.DATA_P2P_LOAD);break;case"loadAccessErr":e=new m["default"](m["default"].severity.CRITICAL,m["default"].category.DATA_SOURCE,m["default"].code.DATA_P2P_LOAD_ACCESS);break;case"memoryAllocErr":e=new m["default"](m["default"].severity.CRITICAL,m["default"].category.DATA_SOURCE,m["default"].code.DATA_P2P_MEMORY_ALLOC)}}else e=this._error;return e}},{key:"silenced",set:function(e){this._silenced=e,this._tickTimer.adjustFrequency(this._silenced?.5:.1)}},{key:"LOG_TAG",get:function(){return"["+this.TAG+(this._silenced?"(silence)":"")+"]"}},{key:"ignoreError",set:function(e){this._ignoreError=e}},{key:"openOffset",set:function(e){this._openOffset=e},get:function(){return this._openOffset}}]),(0,c["default"])(t,[{key:"reset",value:function(){this._uuid=y["default"].create(),this._eof=!1,this._eod=!1,this._openOffset=!1,this.mode===q["default"].P2P||this._reset()}},{key:"_reset",value:function(){}},{key:"destroy",value:function(){this.mode===q["default"].P2P||(this._tickTimer.cancel(),this._bufferPool.drain()),delete this._ctx,delete this._cfg,delete this._p2pProxy,delete this._error,delete this._tickTimer,delete this._bufferPool}},{key:"read",value:function(){}},{key:"_ticker",value:function(){if(!this._ctx.bufferOperating){var e=performance.now();!this._silenced&&this.state===E["default"].IDLE&&(void 0==this._lastGCTimestamp||e-this._lastGCTimestamp>5e3)&&(this._gc?this._gc():this.mode===q["default"].CDN&&x["default"].warn("Recommend to impl gc on cdn loader~"),this._lastGCTimestamp=e),this._tick&&this._tick()}}},{key:"seek",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._error=null,this.state!==E["default"].ERROR&&this.state!==E["default"].END||(this.state=E["default"].IDLE),this._eod=!1,this._eof=!1,this.mode===q["default"].P2P?this._silenced||this._ctx.variantSwitching&&!t||i||this._p2pProxy.seek(e):this._seek(e)}},{key:"_seek",value:function(e){}},{key:"getNextFrag",value:function(e){return null}},{key:"abortCurrentADGas",value:function(){}},{key:"drainBufferPool",value:function(){this._bufferPool.drain()}},{key:"_getUnreadBufInfo",value:function(){return{start:0,byteLength:0,timeLength:0}}},{key:"getStateKey",value:function(e){return I[e]}}]),t}(_["default"]);t["default"]=D},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(89),r=a(n),o=i(142),s=a(o),d=i(69),l=a(d),u=i(73),c=a(u),f=i(75),p=a(f),h=i(74),_=a(h),g=i(79),m=a(g),v=i(88),y=a(v),b=i(240),x=a(b),w=i(92),T=(a(w),{maxBytesLength:104857600}),S=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c["default"])(this,t);var i=(0,_["default"])(this,(t.__proto__||(0,l["default"])(t)).call(this));return i._config={},i._pool={},i._byteLength=0,(0,s["default"])(i._config,T),(0,s["default"])(i._config,e),i}return(0,m["default"])(t,e),(0,p["default"])(t,[{key:"add",value:function(e,t){var i=(this._config,this._pool),a=i[e],n=void 0;a?(n=new Uint8Array(a.byteLength+t.byteLength),n.set(a,0),n.set(t,a.byteLength)):n=t,this._byteLength+=t.byteLength,i[e]=n}},{key:"del",value:function(e){var t=this._pool,i=t[e];i&&(this._byteLength-=i.byteLength,t[e]=null,delete t[e])}},{key:"read",value:function(e){return this._pool[e]}},{key:"drain",value:function(){var e=this._pool;for(var t in e)this.del(t);0!==this._byteLength&&(this._pool={},this._byteLength=0)}},{key:"keys",get:function(){return(0,r["default"])(this._pool)}},{key:"size",get:function(){return this._byteLength}},{key:"humanSize",get:function(){return(0,x["default"])(this._byteLength)}},{key:"isSafe",get:function(){return this._byteLength<this._config.maxBytesLength}}]),t}(y["default"]);t["default"]=S},function(e,t,i){function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(isNaN(e))throw new Error("Invalid arguments");var i=[],a=0,s=!0===t.bits,d=!0===t.unix,l=t.base||2,u=void 0!==t.round?t.round:d?1:2,c=void 0!==t.separator?t.separator||"":"",f=void 0!==t.spacer?t.spacer:d?"":" ",p=t.symbols||t.suffixes||{},h=2===l?t.standard||"jedec":"jedec",_=t.output||"string",g=!0===t.fullform,m=t.fullforms instanceof Array?t.fullforms:[],v=void 0!==t.exponent?t.exponent:-1,y=Number(e),b=y<0,x=l>2?1e3:1024;return b&&(y=-y),(-1===v||isNaN(v))&&(v=Math.floor(Math.log(y)/Math.log(x)))<0&&(v=0),v>8&&(v=8),0===y?(i[0]=0,i[1]=d?"":r[h][s?"bits":"bytes"][v]):(a=y/(2===l?Math.pow(2,10*v):Math.pow(1e3,v)),s&&(a*=8)>=x&&v<8&&(a/=x,v++),i[0]=Number(a.toFixed(v>0?u:0)),i[1]=10===l&&1===v?s?"kb":"kB":r[h][s?"bits":"bytes"][v],d&&(i[1]="jedec"===h?i[1].charAt(0):v>0?i[1].replace(/B$/,""):i[1],n.test(i[1])&&(i[0]=Math.floor(i[0]),i[1]=""))),b&&(i[0]=-i[0]),i[1]=p[i[1]]||i[1],"array"===_?i:"exponent"===_?v:"object"===_?{value:i[0],suffix:i[1],symbol:i[1]}:(g&&(i[1]=m[v]?m[v]:o[h][v]+(s?"bit":"byte")+(1===i[0]?"":"s")),c.length>0&&(i[0]=i[0].toString().replace(".",c)),i.join(f))}Object.defineProperty(t,"__esModule",{value:!0});var n=/^(b|B)$/,r={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},o={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};t["default"]=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var a={IDLE:0,LOADING:1,END:2,ERROR:3};t["default"]=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var a=0;t["default"]={P2P:a++,CDN:a++}},function(e,t,i){function a(e,t){for(var i=0,a=e.length-1,n=null,r=null;i<=a;){n=(i+a)/2|0,r=e[n];var o=t(r);if(o>0)i=n+1;else{if(!(o<0))return r;a=n-1}}return null}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var a=window.DataView,n=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},r=function(e){return new Date(1e3*e-20828448e5)},o=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},s={avc1:function(e){var t=new a(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:d(e.subarray(78,e.byteLength))}},avcC:function(e){var t,i,n,r,o=new a(e.buffer,e.byteOffset,e.byteLength),s={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},d=31&e[5];for(n=6,r=0;r<d;r++)i=o.getUint16(n),n+=2,s.sps.push(new Uint8Array(e.subarray(n,n+i))),n+=i;for(t=e[n],n++,r=0;r<t;r++)i=o.getUint16(n),n+=2,s.pps.push(new Uint8Array(e.subarray(n,n+i))),n+=i;return s},btrt:function(e){var t=new a(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){new a(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[35]>>>3&31,samplingFrequencyIndex:(7&e[35])<<8+(128&e[36])>>7,channelConfiguration:(120&e[36])>>3}}}},ftyp:function(e){for(var t=new a(e.buffer,e.byteOffset,e.byteLength),i={majorBrand:n(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},r=8;r<e.byteLength;)i.compatibleBrands.push(n(e.subarray(r,r+4))),r+=4;return i},dinf:function(e){return{boxes:d(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:d(e.subarray(8))}},hdlr:function(e){var t=new a(e.buffer,e.byteOffset,e.byteLength),i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:n(e.subarray(8,12)),name:""},r=8;for(r=24;r<e.byteLength;r++){if(0===e[r]){r++;break}i.name+=String.fromCharCode(e[r])}return i.name=window.decodeURIComponent(window.escape(i.name)),i},mdhd:function(e){var t,i=new a(e.buffer,e.byteOffset,e.byteLength),n=4,o={version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===o.version?(n+=4,o.creationTime=r(i.getUint32(n)),n+=8,o.modificationTime=r(i.getUint32(n)),n+=4,o.timescale=i.getUint32(n),n+=8,o.duration=i.getUint32(n)):(o.creationTime=r(i.getUint32(n)),n+=4,o.modificationTime=r(i.getUint32(n)),n+=4,o.timescale=i.getUint32(n),n+=4,o.duration=i.getUint32(n)),n+=4,t=i.getUint16(n),o.language+=String.fromCharCode(96+(t>>10)),o.language+=String.fromCharCode(96+((960&t)>>5)),o.language+=String.fromCharCode(96+(31&t)),o},mdia:function(e){return{boxes:d(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:d(e)}},mp4a:function(e){var t=new a(e.buffer,e.byteOffset,e.byteLength),i={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(i.streamDescriptor=d(e.subarray(28))[0]),i},moof:function(e){return{boxes:d(e)}},moov:function(e){return{boxes:d(e)}},mvex:function(e){return{boxes:d(e)}},mvhd:function(e){var t=new a(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=r(t.getUint32(i)),i+=8,n.modificationTime=r(t.getUint32(i)),i+=4,n.timescale=t.getUint32(i),i+=8,n.duration=t.getUint32(i)):(n.creationTime=r(t.getUint32(i)),i+=4,n.modificationTime=r(t.getUint32(i)),i+=4,n.timescale=t.getUint32(i),i+=4,n.duration=t.getUint32(i)),i+=4,n.rate=t.getUint16(i)+t.getUint16(i+2)/16,i+=4,n.volume=t.getUint8(i)+t.getUint8(i+1)/8,i+=2,i+=2,i+=8,n.matrix=new Uint32Array(e.subarray(i,i+36)),i+=36,i+=24,n.nextTrackId=t.getUint32(i),n},pdin:function(e){var t=new a(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)i.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return i},sidx:function(e){var t,i=new a(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8),earliestPresentationTime:i.getUint32(12),firstOffset:i.getUint32(16)},r=i.getUint16(22);for(t=24;r;t+=12,r--)n.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&i.getUint32(t),subsegmentDuration:i.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&i.getUint32(t+8)});return n},stbl:function(e){return{boxes:d(e)}},stco:function(e){var t,i=new a(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=i.getUint32(4);for(t=8;r;t+=4,r--)n.chunkOffsets.push(i.getUint32(t));return n},stsc:function(e){var t,i=new a(e.buffer,e.byteOffset,e.byteLength),n=i.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;n;t+=12,n--)r.sampleToChunks.push({firstChunk:i.getUint32(t),samplesPerChunk:i.getUint32(t+4),sampleDescriptionIndex:i.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),boxes:d(e.subarray(8))}},stsz:function(e){var t,i=new a(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)n.entries.push(i.getUint32(t));return n},stts:function(e){var t,i=new a(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=i.getUint32(4);for(t=8;r;t+=8,r--)n.timeToSamples.push({sampleCount:i.getUint32(t),sampleDelta:i.getUint32(t+4)});return n},styp:function(e){return s.ftyp(e)},tfdt:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},tfhd:function(e){var t,i=new a(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],o=2&n.flags[2],s=8&n.flags[2],d=16&n.flags[2],l=32&n.flags[2];return t=8,r&&(t+=4,n.baseDataOffset=i.getUint32(12),t+=4),o&&(n.sampleDescriptionIndex=i.getUint32(t),t+=4),s&&(n.defaultSampleDuration=i.getUint32(t),t+=4),d&&(n.defaultSampleSize=i.getUint32(t),t+=4),l&&(n.defaultSampleFlags=i.getUint32(t)),n},tkhd:function(e){var t=new a(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=r(t.getUint32(i)),i+=8,n.modificationTime=r(t.getUint32(i)),i+=4,n.trackId=t.getUint32(i),i+=4,i+=8,n.duration=t.getUint32(i)):(n.creationTime=r(t.getUint32(i)),i+=4,n.modificationTime=r(t.getUint32(i)),i+=4,n.trackId=t.getUint32(i),i+=4,i+=4,n.duration=t.getUint32(i)),i+=4,i+=8,n.layer=t.getUint16(i),i+=2,n.alternateGroup=t.getUint16(i),i+=2,n.volume=t.getUint8(i)+t.getUint8(i+1)/8,i+=2,i+=2,n.matrix=new Uint32Array(e.subarray(i,i+36)),i+=36,n.width=t.getUint16(i)+t.getUint16(i+2)/16,i+=4,n.height=t.getUint16(i)+t.getUint16(i+2)/16,n},traf:function(e){return{boxes:d(e)}},trak:function(e){return{boxes:d(e)}},trex:function(e){var t=new a(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new a(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],s=4&i.flags[2],d=1&i.flags[1],l=2&i.flags[1],u=4&i.flags[1],c=8&i.flags[1],f=n.getUint32(4),p=8;for(r&&(i.dataOffset=n.getUint32(p),p+=4),s&&f&&(t={flags:o(e.subarray(p,p+4))},p+=4,d&&(t.duration=n.getUint32(p),p+=4),l&&(t.size=n.getUint32(p),p+=4),c&&(t.compositionTimeOffset=n.getUint32(p),p+=4),i.samples.push(t),f--);f--;)t={},d&&(t.duration=n.getUint32(p),p+=4),l&&(t.size=n.getUint32(p),p+=4),u&&(t.flags=o(e.subarray(p,p+4)),p+=4),c&&(t.compositionTimeOffset=n.getUint32(p),p+=4),i.samples.push(t);return i},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}}},d=function(e){for(var t,i,r,o,d=0,l=[],u=new a(e.buffer,e.byteOffset,e.byteLength);d<e.byteLength;)t=u.getUint32(d),i=n(e.subarray(d+4,d+8)),r=t>1?d+t:e.byteLength,o=(s[i]||function(e){return{data:e}})(e.subarray(d+8,r)),o.size=t,o.type=i,l.push(o),d=r;return l},l={mp4toJSON:d};t["default"]=l},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(151),_=a(h),g=i(118),m=a(g),v=i(115),y=a(v),b=i(152),x=a(b),w=i(246),T=a(w),S=i(122),k=a(S),A=i(93),E=a(A),P=i(116),q=a(P),I=i(106),L=a(I),D=function(e){function t(e){(0,s["default"])(this,t);var i=new k["default"],a=new T["default"](e),n=new x["default"]("m2ts","mp4",{debug:L["default"].DEBUG,enableWorker:e.config.enableWorker}),o=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e,{manifest:i,loader:a,multiplexer:n}));return o.TAG="HLSActor",o._fragments=[],o._segments=[],o._rangeTSTolerance=e.config.hlsRangeTSTolerance,o._maxSegmentSearchTolerance=e.config.hlsMaxSegmentSearchTolerance,o._sendISWhileFragmentChange=!0,o._multiplexer.on(x["default"].Events.DATA,function(e){var t=e.contentType,i=e.fragmentType,a=e.data,n=e.duration,r=e.startDTS,s=e.startPTS,d=e.nextSegmentPTS;switch(i){case"initSegment":if("video"===t){var l=new m["default"]("video");l.origin=q["default"].HLS,l.bytes=a,o._videoInitSegment=l}else if("audio"===t){var u=new m["default"]("audio");u.origin=q["default"].HLS,u.bytes=a,o._audioInitSegment=u}break;case"fragment":if(E["default"].log(o.LOG_TAG+" parsed "+t+", startDTS/startPTS/end/duration("+r.toFixed(3)+"/"+s.toFixed(3)+"/"+(s+n).toFixed(3)+"/"+n.toFixed(3)+")"),n<0)return void E["default"].warn(o.LOG_TAG+" ignore parsed, due the duration "+n);if("video"===t){var c=new y["default"]("video");if(c.origin=q["default"].HLS,c.bytes=a,c.startTime=r,c.duration=n,o._currentDataMeta){var f=o._currentDataMeta.fragIdx,p=o._currentDataMeta.segIdx,h=o._fragments[f];if(h){var _=h.segments[p];_.knownPTS||o._updateSegStartTime(_,r)}}o._videoMediaStartTimes.push(c.startTime),o._videoMediaSegments.push(c)}else if("audio"===t){var g=new y["default"]("audio");g.origin=q["default"].HLS,g.bytes=a,g.startTime=s,g.duration=n,o._audioSegmentAlignPTS=d,o._audioMediaSegments.push(g)}}}).on(x["default"].Events.DONE,function(){o._videoMediaStartTimes.length>0&&(o._onVideoSegmentParsed(o._videoMediaStartTimes[0]),o._videoMediaStartTimes=[])}),o}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"duration",get:function(){var e=0,t=this._fragments;if(t.length>0){var i=t[t.length-1];e=i.startTime+i.duration}return e}}]),(0,c["default"])(t,[{key:"_destroy",value:function(){this._fragments.splice(0,this._fragments.length),this._segments.splice(0,this._segments.length)}},{key:"applyRange",value:function(e){var t=this._manifest.isAccurateTimeStamp;this._maxSegmentSearchTolerance=t?0:this._ctx.config.hlsMaxSegmentSearchTolerance,this._rangeTSTolerance=t?0:this._ctx.config.hlsRangeTSTolerance;var i=this._constructPlaySegmentsByRangeList(this._manifest.fragments,e);this._fragments=i.fragments,this._segments=i.segments,E["default"].log("hls-actor applyRange,this._segments = "+this._segments.length),this._manifestDuration=this.duration,this._loader.fragsWithSegs={frags:this._fragments,segs:this._segments,isAccurateTimeStamp:t}}},{key:"_constructPlaySegmentsByRangeList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],i=[],a=this._rangeTSTolerance,n=t.start(0)-a,r=t.end(t.length-1)+a;return E["default"].log(this.LOG_TAG+" qvs reset timerange = "+n+"-"+r),e.forEach(function(e,t){var a=e.segments;a.length>0&&a.map(function(e,a,o){var s=e.startTime,d=e.startTime+e.duration;return e.enabled=(s>=n||d>n)&&(d<=r||s<r),e.fragIdx=t,e.flattenIdx=i.length,i.push(e),e})}),{fragments:e,segments:i}}},{key:"_reset",value:function(){this._fragments.splice(0,this._fragments.length),this._segments.splice(0,this._segments.length),this._multiplexer.reset(),this._loader.reset()}},{key:"_getSegmentByPTS",value:function(e){return this._loader.findSegmentByPTS(e).segment}},{key:"_getPrevSegmentByPTS",value:function(e){return this._loader.findPrevSegmentByPTS(e)}},{key:"_onVideoSegmentParsed",value:function(e){if(!this._seeked)if(e<=this._seekPTS)this._seeked=!0;else if(this._seekPTS>0){var t=this._getPrevSegmentByPTS(e);if(t){var i=t.startTime+this._maxSegmentSearchTolerance,a=t.enabled;a||(t.enabled=!0),E["default"].debug(this.LOG_TAG+" correct seek time from "+this._seekPTS+" to "+i+(a?"":", & enabled prev seg")),this.seek(i,!1)}else E["default"].warn(this.LOG_TAG+" can't correct seek time by seek pts "+this._seekPTS)}}},{key:"_updateSegStartTime",value:function(e,t){var i=this._manifest.isAccurateTimeStamp,a=this._manifestDuration,n=this._segments,r=void 0,o=e.flattenIdx;if(e.knownPTS=!0,!i){for(e.startTime=t,r=o;r>0;r--){if(this._updateSegPTS(n,r,r-1).knownPTS)break}for(r=o;r<n.length-1;r++){if(this._updateSegPTS(n,r,r+1).knownPTS)break}}var s=n[n.length-1];s&&a>s.startTime&&(s.duration=a-s.startTime),i||this._updateFragPTS(this._fragments)}},{key:"_updateSegPTS",value:function(e,t,i){var a=0===i,n=e[t],r=e[i];if(r.knownPTS){var o=this.LOG_TAG+" adjust segment pts encounter negative duration computed for seg";i>t?(!n.knownPTS&&r.startTime<=n.startTime&&r.startTime>0&&(n.startTime=r.startTime-.001),n.duration=r.startTime-n.startTime,n.duration<0&&E["default"].warn(o+" "+n.fragIdx+"/"+n.idx+"!")):(!n.knownPTS&&n.startTime<=r.startTime&&(n.startTime=r.startTime+.001),r.duration=n.startTime-r.startTime,r.duration<0&&E["default"].warn(o+" "+n.fragIdx+"/"+n.idx+"!"))}else if(i>t){var s=n.startTime+n.duration;r.startTime=s}else r.startTime=a?0:Math.max(n.startTime-r.duration,0);return r}},{key:"_updateFragPTS",value:function(e){for(var t=0;t<e.length;t++){var i=e[t],a=e[t+1],n=i.segments;i.startTime=n[0].startTime,i.duration=a?a.segments[0].startTime-i.startTime:n[n.length-1].startTime+n[n.length-1].duration-i.startTime}}}]),t}(_["default"]);t["default"]=D},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(154),r=a(n),o=i(69),s=a(o),d=i(73),l=a(d),u=i(74),c=a(u),f=i(75),p=a(f),h=i(79),_=a(h),g=i(247),m=a(g),v=i(116),y=a(v),b=i(93),x=a(b),w=i(243),T=a(w),S=i(241),k=a(S),A=i(238),E=a(A),P=i(242),q=a(P),I=i(248),L=a(I),D=i(249),C=a(D),F=i(112),R=a(F),O=i(105),B=a(O),N=function(e){function t(e){(0,l["default"])(this,t);var i=(0,c["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,!0));return i.TAG="HLSLoader",i._fragments=[],i._segments=[],i._readPos={f:-1,s:-1,b:-1},i._downPos={f:-1,s:-1,b:-1},i._maxSegmentSearchTolerance=e.config.hlsMaxSegmentSearchTolerance,i._eventManager=new R["default"],i._hlsRemote=new C["default"](e),i}return(0,_["default"])(t,e),(0,p["default"])(t,[{key:"fragsWithSegs",set:function(e){this._eof=!1,this._eod=!1,this._fragments=e.frags,this._segments=e.segs,this._maxSegmentSearchTolerance=e.isAccurateTimeStamp?0:this._ctx.config.hlsMaxSegmentSearchTolerance}},{key:"segments",set:function(e){this._segments=e}}]),(0,p["default"])(t,[{key:"_reset",value:function(){this._fragments.splice(0,this._fragments.length),this._segments.splice(0,this._segments.length),this._readPos.f=this._readPos.s=this._readPos.b=-1,this._downPos.f=this._downPos.s=this._downPos.b=-1,this._lastBufPos=void 0,this._lastBufInf=void 0,this.state!==k["default"].IDLE&&(this.state===k["default"].LOADING?this._abort():this.state=k["default"].IDLE),this._withBufferRetryCount=0,this._noBufferRetryCount=0,this._hlsRemote.reset()}},{key:"read",value:function(){return this.mode===q["default"].P2P?this._readP2P():this._readCDN()}},{key:"_seek",value:function(e){this._withBufferRetryCount=0,this._noBufferRetryCount=0,e-=this._maxSegmentSearchTolerance;var t=this.findSegmentByPTS(e),i=t.fragment,a=t.segment;if(!i||!a)throw Error("seek pts/frag/segment("+e+"/"+i+"/"+a+")");var n=this._getFloatNumByIdx(i.idx,a.idx),r=this._getFloatNumByIdx(this._readPos.f,this._readPos.s),o=this._getFloatNumByIdx(this._downPos.f,this._downPos.s),s=n>=r&&n<=o;this._readPos.f=i.idx,this._readPos.s=a.idx,this._readPos.b=0,this._downPos.f=i.idx,this._downPos.s=a.idx,this._downPos.b=0,this._findPieceByPos(this._downPos).segment.status===m["default"].LOADED&&this._moveToNextDownPosOrEOD(),s||this.state!==k["default"].LOADING||this._abort(),this._tick()}},{key:"_tick",value:function(){this._checkFetchOrEOD()}},{key:"_checkFetchOrEOD",value:function(){if(!this._eod&&!this._ctx.error&&this._segments&&0!==this._segments.length&&this.state===k["default"].IDLE){var e=this._getUnreadBufInfo();if(e.timeLength>this._maxBufferTimeLength)return;this._checkLoad(e)}}},{key:"_getFloatNumByIdx",value:function(e,t){return parseFloat(e+"."+t)}},{key:"_getUnreadBufInfo",value:function(){var e=this,t=this._fragments,i=this._downPos.f,a=this._downPos.s,n=this._readPos.f,r=this._readPos.s,o=[n,r,i,a].join("-");if(this._lastBufPos&&this._lastBufPos===o)return this._lastBufInf;for(var s=0,d=0,l=0,u=n;u<=i;u++){var c=t[u];if(c){var f=c.segments,p=u===n?r:0,h=u===i?a:f.length-1;u===n&&(l=f[r].startTime);for(var _=p;_<=h;_++){var g=f[_],m=e._bufferPool.read(g.poolId);if(m)s+=m.byteLength,d+=g.duration;else{if(!(u===i&&_===h))throw new Error("A discontinuous buffer was detected. "+g.poolId)}}}}var v={start:l,byteLength:s,timeLength:d};return this._lastBufPos=o,this._lastBufInf=v,v}},{key:"_readP2P",value:function(){var e=null,t=this._p2pProxy.read();if(t&&t.type){var i=(t.bid,t.loadDone),a=t.type.toLowerCase(),n=t.stream;if("ts"===a&&(i&&(this.state=k["default"].END),n)){var r=n.index,o=n.data,s=n.chunkEOF,d=this._segments,l=d[r];this._eof=r>d.length-1||r===d.length-1&&s,this._eof&&x["default"].log(this.LOG_TAG+": EOF"),o&&(x["default"].debug(this.LOG_TAG+": Read seg flatten idx "+r+" ->[0,"+(d.length-1)+"], status/startTime/duration("+this.getStateKey(l.status)+"/"+l.startTime.toFixed(3)+"/"+l.duration.toFixed(3)+")"),e={type:y["default"].HLS,data:o,done:s,meta:{fragIdx:l.fragIdx,segIdx:l.idx}})}}return e}},{key:"_readCDN",value:function(){if(this.eof)return null;var e=this._findPieceByPos(this._readPos),t=e.fragment,i=e.segment;if(!i)return null;if(!i.enabled)return this._moveToNextReadPosOrEOF(),null;if(i.status!==m["default"].PARTIAL&&i.status!==m["default"].LOADED)return this._tryToSyncReadAndDownPos(),null;var a=this._fragments.length,n=this._readPos.f,r=this._readPos.s,o=this._readPos.b,s=this._bufferPool.read(i.poolId),d=null,l=!1;return o>=s.byteLength?d=null:(x["default"].debug(this.LOG_TAG+": Read seg pool id "+i.poolId+",  flatten idx "+i.flattenIdx+" ->[0,"+(this._segments.length-1)+"] & inner seg idx "+r+"->[0,"+(t.segments.length-1)+"] of frag "+n+"->[0,"+(a-1)+"], status "+this.getStateKey(i.status)),d=s.subarray(o,s.byteLength)),i.status===m["default"].PARTIAL?this._readPos.b=s.byteLength:i.status===m["default"].LOADED&&(l=!0,this._moveToNextReadPosOrEOF()),{type:y["default"].HLS,data:d,done:l,meta:{fragIdx:n,segIdx:r}}}},{key:"_abort",value:function(){this._hlsRemote.abort()}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._findPieceByPTS(e,this._fragments),i=null;return t&&(i=this._findPieceByPTS(e,t.segments)),{fragment:t,segment:i}}},{key:"findPrevSegmentByPTS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=null,i=this.findSegmentByPTS(e),a=i.segment;return a&&a.flattenIdx>0&&(t=this._segments[a.flattenIdx-1]),t}},{key:"_findPieceByPTS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],i=arguments[2];return i&&!this._pieceWithinToleranceTest(e,i)?i:(0,T["default"])(t,this._pieceWithinToleranceTest.bind(this,e))}},{key:"_findPieceByPos",value:function(e){var t=this._fragments[e.f],i=null;return t&&(i=t.segments[e.s]),{fragment:t,segment:i}}},{key:"_pieceWithinToleranceTest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];return e<0&&(e=0),t.startTime+t.duration<=e?1:t.startTime>e&&t.startTime?-1:0}},{key:"_checkLoad",value:function(e){var t=this._findPieceByPos(this._downPos),i=t.fragment,a=t.segment;if(!i||!a)return x["default"].error(this.LOG_TAG+": load frag/segment("+i+"/"+a+"), down pos("+(0,r["default"])(this._downPos)+")");var n=new L["default"]({frag:i,fragIdx:this._downPos.f,range:[this._downPos.s,this._downPos.s],bufferInfo:e});this._loadSingleSegment(n)}},{key:"_isCurrentDownSeg",value:function(e){return!!e&&e.idx===this._downPos.s&&e.fragIdx===this._downPos.f}},{key:"_loadContiguousSegments",value:function(e){}},{key:"_loadSingleSegment",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.pieces,n=e.fragIdx,r=e.buffer,o=this,s=a[0],d=this._fragments[n],l=this._fragments.length;if(!i){if(s.status===m["default"].PARTIAL)return;if(s.status===m["default"].LOADED)return}o.state=k["default"].LOADING;var u=function(e,t){if(t.dump||o._bufferPool.del(s.poolId),e){var i=new Uint8Array(e);s.status===m["default"].NOT_LOADED&&(s.status=m["default"].PARTIAL),o._bufferPool.add(s.poolId,i);var a=o._bufferPool.read(s.poolId);o._downPos.b=a?a.byteLength:0}},c=function(e){o._bufferPool.del(s.poolId),o._bufferPool.add(s.poolId,e),s.status=m["default"].LOADED;var t="pool id "+s.poolId,i="seg "+s.idx+"->[0,"+(d.segments.length-1)+"]",a="frag "+n+"->[0,"+(l-1)+"]";x["default"].debug(o.LOG_TAG+": Loaded "+t+", "+i+" of "+a+", buffer "+r.timeLength+"s"),o._isCurrentDownSeg(s)&&o._moveToNextDownPosOrEOD(),o.state!==k["default"].ERROR&&(o.state=k["default"].IDLE)},f=function(i){t._getUnreadBufInfo().timeLength>0?t._withBufferRetryCount<t._withBufferMaxRetry?(t._withBufferRetryCount++,t._reloadSingleSegment(e)):t._doFinalError(i,e,s):t._noBufferRetryCount<t._noBufferMaxRetry?(t._noBufferRetryCount++,t._reloadSingleSegment(e)):t._doFinalError(i,e,s)},p=function(){var e="seg "+s.idx+"->[0,"+(d.segments.length-1)+"]",t="frag "+n+"->[0,"+(l-1)+"]";x["default"].debug(o.LOG_TAG+": onAbort "+e+" of "+t+", buffer "+r.timeLength+"s"),s.status=m["default"].NOT_LOADED,o._bufferPool.del(s.poolId),o.state!==k["default"].ERROR&&(o.state=k["default"].IDLE)};this._eventManager.removeAll(),this._eventManager.on(this._hlsRemote,C["default"].Events.PROGRESS,u),this._eventManager.on(this._hlsRemote,C["default"].Events.SUCCESS,c),this._eventManager.on(this._hlsRemote,C["default"].Events.FAILURE,f),this._eventManager.on(this._hlsRemote,C["default"].Events.ABORT,p),this._hlsRemote.startLoad(e)}},{key:"_reloadSingleSegment",value:function(e){this._hlsRemote.reset(),this._hlsRemote.dispatcher&&this._hlsRemote.dispatcher.destroy(),this._hlsRemote.cdnLaborer&&this._hlsRemote.cdnLaborer.destroy(),this._loadSingleSegment(e,!0)}},{key:"_doFinalError",value:function(e,t,i){var a=this,n=e.category,r=e.code,o=t.fragIdx,s=a._fragments[o],d=a._fragments.length;switch(n){case"cdn-error":case"dispatcher-error":if(a._isCurrentDownSeg(i))i.status=m["default"].ERROR,a.state=k["default"].ERROR,x["default"].log(a.LOG_TAG+": onError: "+i.fragIdx+"-"+i.idx),a._error=new B["default"](B["default"].severity.CRITICAL,B["default"].category.DATA_SOURCE,"cdn-error"===n?B["default"].code.DATA_HLS_CDN_ERROR:B["default"].code.DATA_HLS_DISPATCH_ERROR,r);else{var l="seg "+i.idx+"->[0,"+(s.segments.length-1)+"]",u="frag "+o+"->[0,"+(d-1)+"]";x["default"].error(a.LOG_TAG+": onError "+l+" of "+u+", buffer "+t.buffer.timeLength+"s")}break;case"cdn-timeout":case"dispatcher-timeout":if(a._isCurrentDownSeg(i))i.status=m["default"].TIMEOUT,a.state=k["default"].ERROR,x["default"].log(a.LOG_TAG+": onTimeout: "+i.fragIdx+"-"+i.idx),a._error=new B["default"](B["default"].severity.CRITICAL,B["default"].category.DATA_SOURCE,"cdn-timeout"===n?B["default"].code.DATA_HLS_DISPATCH_TIMEOUT:B["default"].code.DATA_HLS_CDN_TIMEOUT);else{var c="seg "+i.idx+"->[0,"+(s.segments.length-1)+"]",f="frag "+o+"->[0,"+(d-1)+"]";x["default"].error(a.LOG_TAG+": onTimeout "+c+" of "+f+", buffer "+t.buffer.timeLength+"s")}break;default:a.state!==k["default"].ERROR&&(a.state=k["default"].IDLE)}}},{key:"_getNextAvailableSegByFlatten",value:function(e){var t=this._segments,i=t[e];return i?i.enabled?i:this._getNextAvailableSegByFlatten(e+1):null}},{key:"_moveToNextDownPosOrEOD",value:function(){var e=this._findPieceByPos(this._downPos),t=e.segment,i=this._getNextAvailableSegByFlatten(t.flattenIdx+1);i?(this._downPos.f=i.fragIdx,this._downPos.s=i.idx,this._downPos.b=0,i.status===m["default"].LOADED&&this._moveToNextDownPosOrEOD()):this.state=k["default"].END}},{key:"_moveToNextReadPosOrEOF",value:function(){var e=this._fragments,t=e[this._readPos.f],i=t.segments[this._readPos.s],a=this._getNextAvailableSegByFlatten(i.flattenIdx+1);a?(this._readPos.f=a.fragIdx,this._readPos.s=a.idx,this._readPos.b=0):(this._eof=!0,x["default"].log(this.LOG_TAG+": EOF"))}},{key:"_tryToSyncReadAndDownPos",value:function(){var e=(this._downPos.f,this._downPos.s,this._readPos.f,this._readPos.s,!1);this._readPos.f>this._downPos.f?e=!0:this._readPos.s>this._downPos.s&&(e=!0),e&&(this._downPos.f=this._readPos.f,this._downPos.s=this._readPos.s,this._downPos.b=0)}},{key:"_gc",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._downPos.f<0||this._downPos.s<0))for(var e=this._fragments[this._readPos.f].segments[this._readPos.s].flattenIdx,t=this._fragments[this._downPos.f].segments[this._downPos.s].flattenIdx,i=this._segments,a=this._bufferPool,n=a.keys,r=0;r<n.length;r++){var o=n[r],s=o.split("-"),d=parseInt(s[1],10),l=parseInt(s[2],10),u=this._fragments[d];if(u){var c=u.segments[l];if(c){var f=c.flattenIdx;if(f<e||f>t){var p=i[f];p.status=m["default"].NOT_LOADED,a.del(o)}}else a.del(o)}else a.del(o)}}}]),t}(E["default"]);t["default"]=N},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={NOT_LOADED:0,PARTIAL:1,LOADED:2,ERROR:3,TIMEOUT:4}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=function(){function e(t){(0,r["default"])(this,e),this._fragment=t.frag,this._fragIdx=t.fragIdx,this._range=t.range,this._bufferInfo=t.bufferInfo,this._pieces=[];for(var i=this._fragment.segments,a=t.range[0],n=t.range[1],o=this._pieces,s=a;s<=n;s++)o.push(i[s]);if(1===o.length){var d=o[0];this._uri=d.uri}}return(0,s["default"])(e,[{key:"uri",get:function(){return this._uri}},{key:"fragIdx",get:function(){return this._fragIdx}},{key:"pieces",get:function(){return this._pieces}},{key:"buffer",get:function(){return this._bufferInfo}},{key:"fragment",get:function(){return this._fragment}}]),(0,s["default"])(e,[{key:"destroy",value:function(){this._pieces=[],this._fragment=null,this._range=null,this._fragIdx=null}}]),e}();t["default"]=d},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(250),_=a(h),g=i(88),m=a(g),v=i(112),y=a(v),b=i(107),x=a(b),w=i(251),T=a(w),S=i(254),k=a(S),A=i(125),E=a(A),P=i(253),q=a(P),I=function(e){function t(e){(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i.TAG="HLSRemote",i.ctx=e,i._eventManager=new y["default"],i.netProxy=e.netProxy,i._dispatcher=null,i._dispatcherResultDic={},i._cdnLaborer=null,i._internalRetryCount=0,i._internalMaxRetry=2,i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"dispatcher",get:function(){return this._dispatcher}},{key:"cdnLaborer",get:function(){return this._cdnLaborer}}]),(0,c["default"])(t,[{key:"_makeCDNUri",value:function(e,t,i){var a=new E["default"](e);return a.query.update("start",t),a.query.update("end",i),a}},{key:"removeDispatchDicKey",value:function(e){delete this._dispatcherResultDic[e]}},{key:"startLoad",value:function(e){var i=this,a=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.fragment),n=new E["default"](e.uri.toString()),r=a.uri.path,o=this._dispatcherResultDic[r],s={startByte:e.pieces[0].startByte,endByte:e.pieces[e.pieces.length-1].endByte};if(o&&o.l){var d=this._makeCDNUri(o.l,s.startByte,s.endByte);this._loadCDNData(e,d)}else{if(this._dispatcher&&(this._eventManager.removeAll(),this._dispatcher.destroy()),o){var l=o.z;l&&n.query.update("z",l)}this._dispatcher=new T["default"](this.ctx,n.toString(),this._internalRetryCount),this._eventManager.on(this._dispatcher,k["default"].DISPATCH_SUCCESS,function(t){i._dispatcherResultDic[r]=t;var a=i._makeCDNUri(t.l,s.startByte,s.endByte);i._loadCDNData(e,a)}),this._eventManager.on(this._dispatcher,k["default"].DISPATCH_FAIL,function(a){var n=a.reason;switch(n){case q["default"].TIMEOUT:i._internalRetryCount<i._internalMaxRetry?(i._internalRetryCount++,i._internalRetry(e)):i.emit(t.Events.FAILURE,{category:"dispatcher-timeout"});break;case q["default"].ERROR:i._internalRetryCount<i._internalMaxRetry?(i._internalRetryCount++,i._internalRetry(e)):i.emit(t.Events.FAILURE,{category:"dispatcher-error"});break;case q["default"].ABORT:i.emit(t.Events.ABORT);break;default:logger.warn("Unknown dispatch fail reason "+n)}}),this._dispatcher.load()}}},{key:"_loadCDNData",value:function(e,i){var a=this,n=this.netProxy,r=i.toString(),o=_["default"].SEGMENT,s=n.makeRequestContext([r],(0,x["default"])({timeout:1e4},n.defaultRetryParameters));s.method="GET",s.callbacks=(0,x["default"])(s.callbacks,{onProgress:function(e,i){a.emit(t.Events.PROGRESS,e,i)},onSuccess:function(e){var i=new Uint8Array(e.data);a.emit(t.Events.SUCCESS,i)},onError:function(i){a._internalRetryCount<a._internalMaxRetry?(a._internalRetryCount++,a._internalRetry(e)):a.emit(t.Events.FAILURE,{category:"cdn-error",code:i})},onTimeout:function(i,n){a._internalRetryCount<a._internalMaxRetry?(a._internalRetryCount++,a._internalRetry(e)):a.emit(t.Events.FAILURE,{category:"cdn-timeout"})},onAbort:function(){a.emit(t.Events.ABORT)}},!0),this._cdnLaborer=n.request(o,s)}},{key:"_internalRetry",value:function(e){var t=this._dispatcherResultDic[e.uri.path];t&&t.l&&delete t.l,this.startLoad(e,!0)}},{key:"abort",value:function(){this._dispatcher&&this._dispatcher.abort(),this._cdnLaborer&&this._cdnLaborer.abort()}},{key:"reset",value:function(){this._internalRetryCount=0,this._dispatcherResultDic={},this._eventManager.removeAll(),this.abort()}},{key:"destroy",value:function(){delete this._dispatcherResultDic,this._internalRetryCount=0,this._eventManager.destroy(),delete this._eventManager,this._dispatcher&&this._dispatcher.destroy(),delete this._dispatcher,this._cdnLaborer&&this._cdnLaborer.destroy(),delete this._cdnLaborer}}]),t}(m["default"]);I.Events={SUCCESS:"SUCCESS",PROGRESS:"PROGRESS",FAILURE:"FAILURE",ABORT:"ABORT",COMPLETE:"COMPLETE"},t["default"]=I},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={MANIFEST:0,DISPATCH:1,SEGMENT:2,LICENSE:3,APP:4}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(252),_=a(h),g=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,s["default"])(this,t);var n=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,i));return n.ctx=e,n.netProxy=e.netProxy,n.retryCount=a,n.hooks.beforeLoad=n._beforeLoad.bind(n),n}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"_beforeLoad",value:function(){this.retryCount>0&&this.query.update("retry",this.retryCount),this.query.update("pv","0.1"),this.query.update("cross-domain",1)}}]),t}(_["default"]);t["default"]=g},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(250),_=a(h),g=i(253),m=a(g),v=i(88),y=a(v),b=i(125),x=a(b),w=i(93),T=a(w),S=i(107),k=a(S),A=i(254),E=a(A),P=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return T["default"].assert(!e,"Dispatch url should be empty!"),i.uri=new x["default"](e),i.query=i.uri.query,i.hooks={beforeLoad:function(){}},i._laborer=null,i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"qkv",get:function(){var e=this.query;return{crossDomain:e.get("cross-domain"),pv:e.get("pv"),retry:e.get("retry"),client:e.get("client"),z:e.get("z"),l:e.get("l"),uid:e.get("uid"),cid:e.get("cid"),vid:e.get("vid"),t:e.get("t"),e:e.get("e"),tn:e.get("tn")}}}]),(0,c["default"])(t,[{key:"load",value:function(){var e=this,t=this.netProxy,i=this.uri,a=_["default"].DISPATCH;this.hooks.beforeLoad(i);var n=i.toString(),r=t.makeRequestContext([n],(0,k["default"])({timeout:3e3,maxRetry:1},t.defaultRetryParameters));r.method="GET",r.responseType="json",r.callbacks=(0,k["default"])(r.callbacks,{onSuccess:function(t){var i=t.data;e.emit(E["default"].DISPATCH_SUCCESS,{l:i.l,z:i.z})},onError:function(t){T["default"].error("Request "+t.code+" "+t.error+": "+n),e.emit(E["default"].DISPATCH_FAIL,{reason:m["default"].ERROR})},onTimeout:function(t,i){T["default"].error("Request timeout: "+n),e.emit(E["default"].DISPATCH_FAIL,{reason:m["default"].TIMEOUT})},onAbort:function(){e.emit(E["default"].DISPATCH_FAIL,{reason:m["default"].ABORT})},onComplete:function(){}},!0),this._laborer=t.request(a,r)}},{key:"abort",value:function(){this._laborer.abort()}},{key:"destroy",value:function(){this._laborer&&this._laborer.destroy()}}]),t}(y["default"]);t["default"]=P},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={ERROR:"ERROR",TIMEOUT:"TIMEOUT",ABORT:"ABORT"}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var a=0,n="hls_loader_event_";t["default"]={DISPATCH_SUCCESS:n+a++,DISPATCH_FAIL:n+a++,DATA_LOAD_SUCCESS:n+a++,DATA_LOAD_PROGRESS:n+a++,DATA_LOAD_FAIL:n+a++}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(151),_=a(h),g=i(115),m=a(g),v=i(118),y=a(v),b=i(256),x=a(b),w=i(152),T=a(w),S=i(291),k=a(S),A=i(93),E=a(A),P=i(116),q=a(P),I=i(106),L=a(I),D=function(e){function t(e){(0,s["default"])(this,t);var i=new k["default"],a=new x["default"](e),n=new T["default"]("f4v","mp4",{debug:L["default"].DEBUG,enableWorker:e.config.enableWorker}),o=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e,{manifest:i,loader:a,multiplexer:n}));return o.TAG="F4VActor",o._fragments=[],o._sendISWhileFragmentChange=!0,o._loader.on("fragmentHeader",function(e,t){o._multiplexer.push(e,t)}),o._loader.on("readFidxChanged",function(e){if(o.openOffset){var t=o._fragments[e];t.offset=o._pretime,E["default"].log(o.LOG_TAG+" change fragment offset, isAD = "+t.isAd+", idx = "+t.idx+", offset = "+t.offset)}}),o._loader.on("fidxLoadStart",function(e){o.emit("fidxLoadStart",e)}),o._loader.on("fidxError",function(e){o.emit("fidxError",e)}),o._multiplexer.on(T["default"].Events.INFO,function(e){switch(e.type){case"headerComplete":o._loader.initSegs(e.data);break;case"endtimestamp":o._pretime=e.data}}),o._multiplexer.on(T["default"].Events.DATA,function(e){var t=e.contentType,i=e.fragmentType,a=e.data,n=e.duration,r=e.startDTS,s=e.startPTS,d=e.nextSegmentPTS;switch(i){case"initSegment":if(E["default"].log(o.LOG_TAG+" parsed "+t+" initSegment"),"video"===t){var l=new y["default"]("video");l.origin=q["default"].F4V,l.bytes=a,o._videoInitSegment=l}else if("audio"===t){var u=new y["default"]("audio");u.origin=q["default"].F4V,u.bytes=a,o._audioInitSegment=u}break;case"fragment":if(E["default"].log(o.LOG_TAG+" parsed "+t+", startDTS/startPTS/end/duration("+r.toFixed(3)+"/"+s.toFixed(3)+"/"+(s+n).toFixed(3)+"/"+n.toFixed(3)+")"),"video"===t){var c=new m["default"]("video");c.origin=q["default"].F4V,c.bytes=a,c.startTime=r,c.duration=n,o._videoMediaSegments.push(c)}else if("audio"===t){var f=new m["default"]("audio");f.origin=q["default"].F4V,f.bytes=a,f.startTime=s,f.duration=n,o._audioSegmentAlignPTS=d,o._audioMediaSegments.push(f)}}}).on(T["default"].Events.DONE,function(e){o.emit("done",e)}),o}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"duration",get:function(){return this._loader.duration}}]),(0,c["default"])(t,[{key:"applyRange",value:function(e){this._fragments=this._constructPlaySegmentsByRangeList(this._manifest.fragments,e),this._loader.fragments=this._fragments,this._loader.dispatcherParam=this._manifest.dispatcherParam,this._loader.dispatcherFunc=this._manifest.dispatcherFunc}},{key:"_constructPlaySegmentsByRangeList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],i=t.start(0)-.5,a=t.end(t.length-1)+.5;return e.forEach(function(e){var t=e.segments;t.length>0&&t.map(function(e,t,n){var r=e.startTime,o=e.startTime+e.duration;return e.enabled=(r>=i||o>i)&&(o<=a||r<a),e})}),e}},{key:"_getSegmentByPTS",value:function(e){var t=this._loader.findSegmentByPTS(e);return t?t.segment:null}},{key:"refreshFrags",value:function(){if(this._fragments.length>0){var e=this._manifest.fragments;if(e.length>0){for(var t=0;t<e.length;t++){var i=e[t];i.idx=this._fragments.length,this._fragments.push(i)}this._loader.refreshFrags()}}else this._fragments=this._fragments.concat(this._manifest.fragments),this._loader.fragments=this._fragments,this._loader.dispatcherParam=this._manifest.dispatcherParam,this._loader.dispatcherFunc=this._manifest.dispatcherFunc}},{key:"getNextFrag",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this._loader.getNextFrag(e)}},{key:"abortCurrentADGas",value:function(e){return this._pretime=0,this._needSendInitSegment=!0,this._videoInitSegment=this._audioInitSegment=null,this.drainBuffer(),this._loader.abortCurrentADGas(e)}},{key:"_reset",value:function(){this._pretime=0,this._fragments.splice(0,this._fragments.length),this._multiplexer.reset(),this._loader.reset()}}]),t}(_["default"]);t["default"]=D},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(238),_=a(h),g=i(241),m=a(g),v=i(247),y=a(v),b=i(116),x=a(b),w=i(93),T=a(w),S=i(105),k=a(S),A=i(136),E=a(A),P=i(107),q=a(P),I=i(123),L=a(I),D=i(257),C=a(D),F=i(258),R=a(F),O=function(e){function t(e){(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e,!1));return i.TAG="F4VLoader",i._fragments=[],i._uuid=null,i._readPos={f:-1,s:-1,h:!1},i._loadPos={f:-1,s:-1},i._seekTime=0,i._dispatcherParam=null,i._dispatcherFunc=null,i._f4vRemote=new R["default"](e.netProxy),i._preReadFidx=-1,i._preLoadFidx=-1,i._preErrorData=null,i._lastError=!1,i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"fragments",set:function(e){this._eof=!1,this._eod=!1,this._uuid=E["default"].create(),this._fragments=e,this._preErrorData=null}},{key:"dispatcherParam",set:function(e){this._dispatcherParam=e,this._f4vRemote._dispatcherParam=e}},{key:"dispatcherFunc",set:function(e){this._dispatcherFunc=e,this._f4vRemote._dispatcherFunc=e}},{key:"duration",get:function(){var e=0;if(this._fragments.length>0){e=this._fragments[this._fragments.length-1].endTime}return e}}]),(0,c["default"])(t,[{key:"read",value:function(){var e=this,t=null;if(e._silenced)return null;if(e._fragments.length>0&&e._readPos.f>=e._fragments.length&&(e._eof=!0),e.eof)return T["default"].log(e.LOG_TAG+": read data eof"),null;var i=-1!==e._readPos.f&&e._readPos.f<e._fragments.length?e._fragments[e._readPos.f]:null,a=e._readPos.s>-1&&i&&i._segments.length>0?i._segments[e._readPos.s]:null;if(i&&e._bufferTime<5&&(i.status==y["default"].ERROR||i.status==y["default"].TIMEOUT)){if(T["default"].log(e.LOG_TAG+", read data error,seg = "+a+" , rf.status = "+i.status+" , readpos = "+e._readPos.f+" -- "+e._readPos.s+",this._error = "+e._error),e._ignoreError){var n=e._readPos.f+1;return n<e._fragments.length?(e.emit("fidxError",{gas:i.gas,end:!1}),e._readPos.f=n,e._readPos.s=0):e._lastError||(e._lastError=!0,e._eof=!0,e.emit("fidxError",{gas:i.gas,end:!0})),null}return e._error||(e._error=new k["default"](k["default"].severity.CRITICAL,k["default"].category.DATA_SOURCE,k["default"].code.DATA_FLV_ERROR),T["default"].log(e.LOG_TAG+" , read data error, create _error")),null}return i&&a&&a.status===y["default"].LOADED&&(0!==a.idx&&1!==a.idx&&(T["default"].log(e.LOG_TAG+", read data return tagdata,readpos = "+e._readPos.f+" -- "+e._readPos.s+",startTime = "+a.startTime+",endtime="+(a.startTime+a.duration)+",rfoffset = "+i.offset),t={type:x["default"].F4V,data:e._bufferPool.read(a.poolId),done:!0,meta:{fragIdx:i.idx,segIdx:a.idx,vac:i.vaconfig}},this._preReadFidx!=i.idx&&e.emit("readFidxChanged",i.idx),this.openOffset&&(t.meta.offset=i.offset),e._preReadFidx=i.idx),i.idx==e._fragments.length-1&&e._readPos.s==i.segments.length-1?e._eof=!0:e._readPos.s==i.segments.length-1?(i=e._fragments[i.idx+1],e._readPos.h=!1,e._setReadPos(i.idx,0)):e._setReadPos(e._readPos.f,e._readPos.s+1)),e._loadFragment(),t}},{key:"initSegs",value:function(e){if(0!=e.keyframePositions.length&&0!=e.keyframeTimes.length){var t=this._fragments[e.f];t.vaconfig={ac:e.ac,vc:e.vc,naluSizeLength:e.naluSizeLength};var i=e.keyframePositions.join(","),a=e.keyframeTimes.join(",");if(T["default"].log(this.LOG_TAG+",initSegs keyframePositions = "+i+",keyframeTimes = "+a),t.segments.length>0)return void T["default"].log(this.LOG_TAG+",initSegs has created segments , return");t.isAd&&(t.totalBytes=e.filesize,t.duration=e.duration);for(var n=e.keyframePositions,r=e.keyframeTimes,o=0,s=0,d=0,l=0,u=t.startTime,c=t.endTime,f=t.totalBytes,p=0;p<=n.length;p++){0==p?(d=0,l=n[p]-1,o=u,s=0==r[p]?u:r[p]):p<n.length?(d=n[p-1],l=n[p]-1,o=0==r[p-1]?u:r[p-1],s=0==r[p]?u:r[p]):(d=n[p-1],l=f-1,o=r[p-1],s=c);var h=new L["default"](x["default"].F4V);h.idx=p,h.startTime=o,h.duration=s-o,h.startByte=d,h.endByte=l,h.poolId="flv-"+this._uuid+"-"+t.idx+"-"+h.idx,t.segments.push(h)}t.idx==this._readPos.f&&-1==this._readPos.s&&t.startTime<=this._seekTime&&t.endTime>this._seekTime&&t.segments.length&&(this._resetReadPosByTime(this._seekTime),this._findNextLoad(this._readPos.f,this._readPos.s)),e=null,this._loadFragment()}}},{key:"_seek",value:function(e){if(this._seekTime=e,this._seekTime>this.duration)return void(this._eof=!0);!this._preErrorData||this._preErrorData.status!=y["default"].ERROR&&this._preErrorData.status!=y["default"].TIMEOUT||(this._preErrorData.status=y["default"].NOT_LOADED),T["default"].log(this.LOG_TAG+" , seek, time = "+e),this._resetReadPosByTime(this._seekTime),this._findNextLoad(this._readPos.f,this._readPos.s),this._loadFragment()}},{key:"_resetReadPosByTime",value:function(e){var t=this._findFindexByTime(e);if(t.f>-1){var i=this._readPos.f;t.f!==i&&(i=t.f,this._readPos.h=!1),this._setReadPos(i,t.s),T["default"].log(this.LOG_TAG+" , reset readpos,time = "+e+", readpos = "+this._readPos.f+" -- "+this._readPos.s)}}},{key:"_findFindexByTime",value:function(e){for(var t=-1,i=-1,a=0;a<this._fragments.length;a++)if(e>=this._fragments[a].startTime&&e<this._fragments[a].endTime){t=a,i=this._findSegByTime(a,e);break}return{f:t,s:i}}},{key:"_findSegByTime",value:function(e,t){var i=this._fragments[e],a=null;if(i.startTime<=t&&i.endTime>t&&i.segments.length>0)for(var n=0,r=i.segments.length-1,o=0,s=0,d=0,l=0;n<=r;){if(o=parseInt((n+r)/2),s=o,a=i.segments[s],d=a.startTime,l=a.startTime+a.duration,t>=d&&t<=l)return s;t<d?r=o-1:n=o+1}return-1}},{key:"_needLoadFrag",value:function(e){var t=e.f>=0&&this._fragments.length>0?this._fragments[e.f]:null,i=(e.s>=0&&t.segments&&t.segments.length)>0?t.segments[e.s].status:-1;return!(!t||!(t.headerStatus!==y["default"].LOADED&&t.headerStatus!==y["default"].PARTIAL||-1!==i&&i!==y["default"].LOADED&&i!==y["default"].PARTIAL))}},{key:"_loadFragment",value:function(){var e=this;if(e._fragments&&e._fragments.length>0&&(e._needLoadFrag(e._readPos)&&(e._loadPos.f=e._readPos.f,e._loadPos.s=e._readPos.s,e._updateBufferTime()),e.state!==m["default"].LOADING&&e.state!==m["default"].ERROR&&e._bufferTime<this._maxBufferTimeLength&&e._needLoadFrag(e._loadPos))){var t=e._fragments[e._loadPos.f];e._preLoadFidx!==t.idx&&(e.emit("fidxLoadStart",t.gas),e._preLoadFidx=t.idx),e._f4vRemote.removeAllListeners(),e._f4vRemote.on(C["default"].Fail,function(t){e._dataLoadFail(t)}),e._f4vRemote.on(C["default"].Success,function(t){e._noBufferRetryCount=0,e._withBufferRetryCount=0,e._dataLoadOk(t)}),e.state=m["default"].LOADING,e._f4vRemote.loadData(t,this._loadPos.s,!t.isAd)}}},{key:"_dataLoadFail",value:function(e){if(this._loadPos.f!==e.f||this._loadPos.s!==e.s)return this.state=m["default"].IDLE,void T["default"].log(this.LOG_TAG+" , dataLoadFail not loadpos, pos = "+this._loadPos.f+"-"+this._loadPos.s+", obj = "+e.f+"-"+e.s);this._ignoreError?(this.state=m["default"].IDLE,e.f+1<this._fragments.length&&(this._loadPos.f=e.f+1,this._loadPos.s=0)):this._doRetryStage(e)}},{key:"_makeErrorContext",value:function(e){var t=this,i=void 0,a=this._fragments[e.f];switch(a.status=y["default"].ERROR,e.data){case C["default"].FLV_Dispatch_Fail:i=k["default"].code.DATA_FLV_DISPATCH_ERROR;break;case y["default"].ERROR:i=k["default"].code.DATA_FLV_ERROR;break;case y["default"].TIMEOUT:i=k["default"].code.DATA_FLV_TIMEOUT}T["default"].log(t.LOG_TAG+" , dataLoadFail "+i),t._preErrorData=a,t.state=m["default"].ERROR,t._error=new k["default"](k["default"].severity.CRITICAL,k["default"].category.DATA_SOURCE,i)}},{key:"_doRetryStage",value:function(e){var t=this,i=t._fragments[t._loadPos.f];0===t._bufferTime?t._noBufferRetryCount>=t._noBufferMaxRetry?t._makeErrorContext(e):(t._noBufferRetryCount++,t._f4vRemote.reloadData(i,t._loadPos.s,!i.isAd)):t._withBufferRetryCount>=t._withBufferMaxRetry?t._makeErrorContext(e):(t._withBufferRetryCount++,t._f4vRemote.reloadData(i,t._loadPos.s,!i.isAd))}},{key:"_dataLoadOk",value:function(e){var t=this,i=t._fragments[e.f],a=null,n=null;if(T["default"].log(t.LOG_TAG+" , load ok "+e.f+" --  "+e.s+" , headerLoaded "+i.isHeaderLoaded),i.isHeaderLoaded){var r=i.segments[e.s];t._bufferPool.read(r.poolId)||t._bufferPool.add(r.poolId,e.data),r.status=y["default"].LOADED,r.idx==i.segments.length-1?(i.status=y["default"].LOADED,i.idx==t._fragments.length-1?t.state=m["default"].END:(a=i.idx+1,n=-1)):(a=i.idx,n=r.idx+1)}else i.headerStatus=y["default"].LOADED,t.emit("fragmentHeader",e.data,{f:i.idx}),a=i.idx,n=e.s>=0?e.s:0;t._updateBufferTime(),t.state!==m["default"].END&&(t.state=m["default"].IDLE),null!==a&&null!==n&&e.f==t._loadPos.f&&e.s==t._loadPos.s&&t.state==m["default"].IDLE&&t._findNextLoad(a,n),t._loadFragment()}},{key:"_findNextLoad",value:function(e,t){var i=this;if(this._prePos&&e>=this._prePos.f&&(e<this._prePos.rf||e==this._prePos.rf&&t>=this._prePos.s&&t<=this._prePos.rs))return this._prePos.f=e,void(this._prePos.s=t);this._prePos={f:e,s:t},this.__findNextLoad(e,t,function(e,t,a){if((0,q["default"])(i._prePos,{rf:e,rs:t}),i._loadPos.f=e,i._loadPos.s=t,a)i.state=m["default"].END;else{var n=i._fragments[e];n.status==y["default"].LOADED&&(n.status=y["default"].NOT_LOADED),i.state==m["default"].END&&(i.state=m["default"].IDLE)}})}},{key:"__findNextLoad",value:function(e,t,i){var a=!1,n=!1,r=this._fragments[e];r.headerStatus!==y["default"].LOADED?(t=-1,a=!0):r.segments.length>0&&(t=t>=0?t:0,r.segments[t].status==y["default"].LOADED?t==r.segments.length-1?(r.status=y["default"].LOADED,r.idx==this._fragments.length-1?(n=!0,a=!0):this.__findNextLoad(e+1,-1,i)):this.__findNextLoad(r.idx,t+1,i):a=!0),a&&i(e,t,n)}},{key:"_updateBufferTime",value:function(){var e=[this._loadPos.f,this._loadPos.s,this._readPos.f,this._readPos.s].join("-");if(!this._currentBuf||this._currentBuf.pos!=e){for(var t=0,i=0,a=0,n=null,r=null,o=this._readPos.f,s=this._loadPos.f,d=o;d<=s&&(n=this._fragments[d],r=n.segments,0!=r.length);d++){var l=d==o?this._readPos.s:0,u=d==s?this._loadPos.s:r.length-1;d==o&&(a=r[l].startTime);for(var c=!1,f=l;f<=u;f++){if(2!=r[f].status){c=!0;break}t+=r[f].duration,i+=r[f].endByte-r[f].startByte}if(c)break}this._currentBuf={pos:e,info:{start:a,byteLength:i,timeLength:t}}}}},{key:"_getUnreadBufInfo",value:function(){return this._currentBuf&&this._currentBuf.info?{start:this._currentBuf.info.start,byteLength:this._currentBuf.info.byteLength,timeLength:this._currentBuf.info.timeLength}:{start:0,byteLength:0,timeLength:0}}},{key:"_cancelLoaderData",value:function(){this._f4vRemote.removeAllListeners(),this._f4vRemote.destroy(),this.state=m["default"].IDLE}},{key:"_setReadPos",value:function(e,t){this._readPos.f=e,this._readPos.s=t,this._updateBufferTime()}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._findFindexByTime(e),i=null,a=null;return t.f>-1&&(i=this._fragments[t.f],i.segments.length>0&&(a=i.segments[t.s])),i&&a?{fragment:i,segment:a}:null}},{key:"refreshFrags",value:function(){this._eof&&(this._eof=!1,this._readPos.f+1<this._fragments.length&&(this._readPos.f=this._readPos.f+1,this._readPos.s=0)),this.state==m["default"].END&&(this.state=m["default"].NOT_LOADED),this._findNextLoad(this._readPos.f,this._readPos.s),this._loadFragment()}},{key:"getNextFrag",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(e+1<this._fragments.length)for(var t=null,i=e+1;i<this._fragments.length;i++)if(t=this._fragments[i],t.status!==y["default"].ERROR&&t.status!==y["default"].TIMEOUT)return t;return null}},{key:"abortCurrentADGas",value:function(e){var t=this.getNextFrag(e);return t?(this._readPos.f=t.idx,this._readPos.s=0,this._eof=!1,t.offset=0):this._eof=!0,this._preReadFidx=-1,T["default"].log(this.LOG_TAG+" , abortCurrentADGas done,abort= "+e+",next="+this._readPos.f+",eof = "+this._eof+",length = "+this._fragments.length),t}},{key:"_gc",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._loadPos.f<0||this._loadPos.s<0||this._loadPos.f<this._readPos.f))for(var e=this._bufferPool.keys,t=void 0,i=void 0,a=void 0,n=void 0,r=this._readPos.f,o=this._loadPos.f,s=void 0,d=void 0,l=0;l<e.length;l++)n=e[l],a=n.split("-"),t=parseInt(a[2],10),i=parseInt(a[3],10),t<r||t>o?this._gcSeg(n,t,i):t==r&&t==o?(s=this._readPos.s,d=this._loadPos.s,(i<s||i>d)&&this._gcSeg(n,t,i)):t==r?(s=this._readPos.s,i<s&&this._gcSeg(n,t,i)):t==o&&(d=this._loadPos.s,i>d&&this._gcSeg(n,t,i))}},{key:"_gcSeg",value:function(e,t,i){var a=this._fragments[t],n=a.segments[i];this._bufferPool.del(e),a.status==y["default"].LOADED&&(a.status,y["default"].NOT_LOADED),n.status=y["default"].NOT_LOADED}},{key:"_reset",value:function(){this._cancelLoaderData(),this._fragments.splice(0,this._fragments.length),this._readPos.f=this._readPos.s=-1,this._loadPos.f=this._loadPos.s=-1,this._readPos.h=!1,this._seekTime=0,this._currentBuf=null,this._dispatcherParam=null,this._dispatcherFunc=null,this.state=m["default"].IDLE,this._preErrorData=null,this._ignoreError=!1,this._lastError=!1}},{key:"_bufferTime",get:function(){return this._currentBuf&&this._currentBuf.info?this._currentBuf.info.timeLength:0}}]),t}(_["default"]);t["default"]=O},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={FLV_Type_FirstDispatch:"flv_firstDispatch",FLV_Type_SecondDispatch:"flv_secondDispatch",FLV_Type_Authentication:"flv_authentication",FLV_Type_MemberDispatch:"flv_memberDispatch",FLV_Type_IPDispatch:"flv_IPDispatch",Success:"Success",Fail:"Fail",FLV_Dispatch_Success:"flv_dispatch_success",FLV_Dispatch_Fail:"flv_dispatch_fail",FLV_Dataload_Success:"flv_dataload_success",FLV_Dataload_Fail:"flv_dataload_fail"}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(93),m=(a(g),i(107)),v=a(m),y=i(259),b=a(y),x=i(247),w=a(x),T=i(250),S=a(T),k=i(257),A=a(k),E=function(e){function t(e){(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i._netProxy=e,i._dispatcherProxy=new b["default"],i._retryMax=2,i._dispatcherParam=null,i._dispatcherFunc=null,i._laborer=null,i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"dispatcherParam",set:function(e){this._dispatcherParam=e}},{key:"dispatcherFunc",set:function(e){this._dispatcherFunc=e}}]),(0,c["default"])(t,[{key:"loadData",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=this,r=e.uri.toString(),o=e.uri.path;a&&(n._dispatcherParam.retryCount=0);var s={};if(i?s=n._dispatcherProxy.getDisResult(o):s.l=e.uri.toString(),s){var d="";e.isHeaderLoaded?(e.segments[t],d="range="+e.getRange(t)):d="range="+e.getRange(0),r=s.l+(-1==s.l.indexOf("?")?"?":"&")+d;var l=S["default"].SEGMENT,u=n._netProxy.makeRequestContext([r],(0,v["default"])({timeout:1e4},n._netProxy.defaultRetryParameters));u.method="GET",u.callbacks={onProgress:function(e){},onSuccess:function(i){n._dispatcherParam.retryCount=0,n._sendResult(A["default"].Success,i.data,e.idx,t)},onError:function(){n._dataRetry(e,t,w["default"].ERROR,i)},onTimeout:function(a,r){n._dataRetry(e,t,w["default"].TIMEOUT,i)},onAbort:function(){},onComplete:function(){}},n._laborer=n._netProxy.request(l,u)}else n._dispatcherProxy.dispatcherFunc=n._dispatcherFunc,n._dispatcherProxy.removeAllListeners(),n._dispatcherProxy.on(A["default"].FLV_Dispatch_Fail,function(i){n._dataRetry(e,t,A["default"].FLV_Dispatch_Fail,!0)}),n._dispatcherProxy.on(A["default"].FLV_Dispatch_Success,function(a){n.loadData(e,t,i,!1)}),n._dispatcherProxy.dispatcher(e,n._dispatcherParam,{f:e.idx,s:t})}},{key:"_dataRetry",value:function(e,t,i,a){e.segments.length>0&&e.segments[t];this._dispatcherParam.retryCount>=this._retryMax||!a?this._sendResult(A["default"].Fail,i,e.idx,t):(this._dispatcherParam.retryCount++,this._dispatcherProxy.setDisResultLose(e.uri.path,e),this.loadData(e,t,a,!1))}},{key:"_sendResult",value:function(e,t,i,a){this.emit(e,{data:t,f:i,s:a})}},{key:"reloadData",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.destroy(),this.loadData(e,t,i,a)}},{key:"destroy",value:function(){this._dispatcherProxy.stopDispatcher(),this._dispatcherProxy.removeAllListeners(),this._laborer&&this._laborer.abort(),this._laborer=null}}]),t}(_["default"]);t["default"]=E},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(93),m=a(g),v=i(260),y=a(v),b=i(286),x=a(b),w=i(287),T=a(w),S=i(288),k=a(S),A=i(289),E=a(A),P=i(257),q=a(P),I=function(e){function t(){(0,s["default"])(this,t);var e=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return e._disResultDic=null,e._fragment=null,e._ro=null,e._stateCode="",e._fileData=null,e._authRetried=!1,e._paramsData={},e._dispatcherFunc=null,e}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"dispatcherFunc",set:function(e){this._dispatcherFunc=e}}]),(0,c["default"])(t,[{key:"reset",value:function(){this.stopDispatcher(),this._disResultDic=null,this._fragment=null,this._ro=null,this._stateCode="",this._fileData=null,this._authRetried=!1,this._paramsData={},this._dispatcherFunc=null,this._loadPos=null}},{key:"stopDispatcher",value:function(){this._destroyRemote(),this._fragment=null,this._stateCode="",this._fileData=null}},{key:"getDisResult",value:function(e){return this._disResultDic&&this._disResultDic[e]?this._disResultDic[e]:null}},{key:"setDisResultLose",value:function(e,t){this._disResultDic&&this._disResultDic[e]&&delete this._disResultDic[e],this._fragment&&t==this._fragment&&(this._fragment=null)}},{key:"dispatcher",value:function(e,t,i){this._fragment!=e&&(this._paramsData=t,this._paramsData.rid=e.rid,this._loadPos=i,this.stopDispatcher(),this._fragment=e,t.movieIsMember?(this._ro=new k["default"](e),this._ro.dispatcherFunc=this._dispatcherFunc,this._stateCode=q["default"].FLV_Type_MemberDispatch):(this._ro=new y["default"],this._ro.dispatcherFunc=this._dispatcherFunc,this._stateCode=q["default"].FLV_Type_FirstDispatch),this._ro.on(q["default"].FLV_Dispatch_Success,this._onDispatchSuccess.bind(this)),this._ro.on(q["default"].FLV_Dispatch_Fail,this._onDispatchFail.bind(this)),this._ro.request(this._paramsData))}},{key:"_destroyRemote",value:function(){this._ro&&(this._ro.removeAllListeners(q["default"].FLV_Dispatch_Success),this._ro.removeAllListeners(q["default"].FLV_Dispatch_Fail),this._ro.destroy(),this._ro=null)}},{key:"_onDispatchSuccess",value:function(){null!=this._ro&&(this._stateCode+="_"+q["default"].Success,this._fileData=this._ro.getData(),this._gotoNextProcess()||(this._destroyRemote(),this._sendResult(q["default"].FLV_Dispatch_Success)))}},{key:"_onDispatchFail",value:function(){null!=this._ro&&(this._stateCode+="_"+q["default"].Fail,this._fileData=this._ro.getData(),m["default"].log("dispatcher,DispatchFail ,"+this._stateCode),this._ro.name!=q["default"].FLV_Type_MemberDispatch||this._authRetried?this._ro.name==q["default"].FLV_Type_MemberDispatch||this._ro.name==q["default"].FLV_Type_SecondDispatch?this._IPDispatch():(this._destroyRemote(),this._sendResult(q["default"].FLV_Dispatch_Fail)):(this._authRetried=!0,this._destroyRemote(),this._ro=new T["default"](this._fragment),this._ro.dispatcherFunc=this._dispatcherFunc,this._stateCode=q["default"].FLV_Type_Authentication,this._ro.on(q["default"].FLV_Dispatch_Success,this._onDispatchSuccess.bind(this)),this._ro.on(q["default"].FLV_Dispatch_Fail,this._onDispatchFail.bind(this)),this._ro.request(this._paramsData)))}},{key:"_IPDispatch",value:function(){this._destroyRemote(),this._ro=new E["default"](this._fragment),this._ro.dispatcherFunc=this._dispatcherFunc,this._stateCode=q["default"].FLV_Type_IPDispatch,this._ro.on(q["default"].FLV_Dispatch_Success,this._onDispatchSuccess.bind(this)),this._ro.on(q["default"].FLV_Dispatch_Fail,this._onDispatchFail.bind(this)),this._ro.startIPRequest(this._paramsData)}},{key:"_sendResult",value:function(e){this.emit(e,{state:this._stateCode,data:this._fileData,f:this._loadPos.f,s:this._loadPos.s})}},{key:"_gotoNextProcess",value:function(){var e=this._ro.getData();if(this._ro.name==q["default"].FLV_Type_Authentication)"A00000"==e.code?(this._destroyRemote(),this._ro=new k["default"](this._fragment),this._ro.dispatcherFunc=this._dispatcherFunc,this._stateCode=q["default"].FLV_Type_MemberDispatch,this._ro.on(q["default"].FLV_Dispatch_Success,this._onDispatchSuccess.bind(this)),this._ro.on(q["default"].FLV_Dispatch_Fail,this._onDispatchFail.bind(this)),this._ro.request(this._paramsData)):this._sendResult(q["default"].FLV_Dispatch_Fail);else{if(this._ro.name!=q["default"].FLV_Type_FirstDispatch){var t=this._fragment.uri.path;return t&&(this._disResultDic||(this._disResultDic={}),this._disResultDic[t]=e),!1}this._destroyRemote(),this._ro=new x["default"](this._fragment),this._ro.dispatcherFunc=this._dispatcherFunc,this._stateCode=q["default"].FLV_Type_SecondDispatch;var i="dispatcher,NextProcess ,"+this._stateCode+", fragment->"+this._fragment;m["default"].log(i),this._ro.on(q["default"].FLV_Dispatch_Success,this._onDispatchSuccess.bind(this)),this._ro.on(q["default"].FLV_Dispatch_Fail,this._onDispatchFail.bind(this)),this._ro.request(this._paramsData)}return!0}}]),t}(_["default"]);t["default"]=I},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(107),m=a(g),v=i(261),y=a(v),b=i(250),x=a(b),w=i(257),T=a(w),S=function(e){function t(){(0,s["default"])(this,t);var e=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return e.name=T["default"].FLV_Type_FirstDispatch,e._netProxy=new y["default"],e._request=null,e._data=null,e._dispatcherFunc=null,e}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"dispatcherFunc",set:function(e){this._dispatcherFunc=e}}]),(0,c["default"])(t,[{key:"_getDispatchKey",value:function(e,t){var i=Math.floor(e/600);return this._dispatcherFunc.md5(i+")(*&^flash@#$%a"+t)}},{key:"request",value:function(e){var t=this,i="//data.video.iqiyi.com/t?tn="+Math.random();t._data=null;var a={timeout:3e3,maxRetry:1},n=x["default"].DISPATCH,r=t._netProxy.makeRequestContext([i],a);r.method="GET",r.responseType="json",r.callbacks=(0,m["default"])(r.callbacks,{onSuccess:function(i){t._data=i.data,t._data.t?(e.dispatcherServerTime=parseInt(t._data.t),e.key=t._getDispatchKey(e.dispatcherServerTime,e.rid),t.emit(T["default"].FLV_Dispatch_Success)):t.emit(T["default"].FLV_Dispatch_Fail)},onError:function(e){t.emit(T["default"].FLV_Dispatch_Fail)},onTimeout:function(e,i){t.emit(T["default"].FLV_Dispatch_Fail)},onAbort:function(){},onComplete:function(){}},!0),t._request=t._netProxy.request(n,r)}},{key:"getData",value:function(){return this._data}},{key:"destroy",value:function(){this._netProxy=null,this._request=null,this._data=null,this._dispatcherFunc=null}}]),t}(_["default"]);t["default"]=S},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(262),_=a(h),g=i(263),m=a(g),v=i(125),y=a(v),b=i(88),x=a(b),w=i(285),T=a(w),S=i(105),k=a(S),A=i(107),E=a(A),P=function(e){function t(e){(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i._ctx=e,i._schemes={},m["default"].isSupported()?(i._registerLoader("http",m["default"]),i._registerLoader("https",m["default"])):(i._registerLoader("http",_["default"]),i._registerLoader("https",_["default"])),i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"defaultRetryParameters",get:function(){return{maxRetry:2,baseDelay:1e3,maxRetryDelay:8e3,timeout:0}}}]),(0,c["default"])(t,[{key:"makeRequestContext",value:function(e,t){return{uris:e,method:"GET",headers:{},body:null,responseType:"arraybuffer",allowCrossSiteCredentials:!1,retryParameters:t,callbacks:{onSuccess:function(e){},onError:function(){},onTimeout:function(e,t){},onAbort:function(){},onComplete:function(){}}}}},{key:"request",value:function(e,t){return t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=(0,E["default"])((0,T["default"])(this.defaultRetryParameters),t.retryParameters,!0),t.uris=(0,T["default"])(t.uris),this._makeRequestWithRetry(e,t)}},{key:"_makeRequestWithRetry",value:function(e,t){return this._send(e,t,0)}},{key:"_send",value:function(e,t,i){var a=this._ctx,n=this._schemes,r=new y["default"](t.uris[i]),o=r.scheme;o||(o=this._getLocationProtocol(),o=o.slice(0,-1),r.setScheme(o),t.uris[i]=r.toString());var s=n[o],d=s?s.loader:null;if(!d)return a._emitError(new k["default"](k["default"].severity.CRITICAL,k["default"].category.NETWORK,k["default"].code.NET_UNSUPPORTED_SCHEME,r));var l=new d(e,t);return l.load(t.uris[i]),l}},{key:"_getLocationProtocol",value:function(){return window.location.protocol}},{key:"_registerLoader",value:function(e,t,i){this._schemes[e]={loader:t,priority:i}}}]),t}(x["default"]);t["default"]=P},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=i(250),l=a(d),u=function(){function e(t,i){(0,r["default"])(this,e),this.netType=t,this.context=i}return(0,s["default"])(e,[{key:"destroy",value:function(){this.abort(),this.url=this.loader=this.stats=this.context=null}},{key:"_resetTimer",value:function(){clearTimeout(this._requestTimeout),clearTimeout(this._retryTimeout),this._requestTimeout=this._retryTimeout=null}},{key:"abort",value:function(){var e=this.stats,t=this.loader;this._resetTimer(),e&&(e.isTimeout?e.aborted=!1:e.aborted=!0),t&&4!==t.readyState?t.abort():this._onAbort(),e&&e.aborted&&this._onAbort()}},{key:"load",value:function(e){return this.url=e,this.stats={trequest:performance.now(),retry:0,retryDelay:this.context.retryParameters.baseDelay,dump:!1},this._resetTimer(),this._doLoad()}},{key:"_doLoad",value:function(){var e=this.url,t=this.context,i=this.stats,a=this.loader=new XMLHttpRequest;if(a.open(t.method,e,!0),t.retryParameters.timeout>0&&(this._requestTimeout=setTimeout(this._onTimeout.bind(this),t.retryParameters.timeout)),a.withCredentials=!!t.allowCrossSiteCredentials,a.onloadend=this._onEnd.bind(this),a.onprogress=this._onProgress.bind(this),t.headers)for(var n in t.headers){var r=n.toLowerCase();a.setRequestHeader(r,t.headers[n])}return a.responseType=t.responseType||"arraybuffer","arraybuffer"===a.responseType&&/firefox/gi.test(navigator.userAgent.toLowerCase())&&(a.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"!=a.responseType&&(a.responseType="arraybuffer")),i.tfirst=0,a.send(t.body),this}},{key:"_retry",value:function(){var e=this.context,t=this.stats;t.isTimeout=!1,this._resetTimer(),this._retryTimeout=setTimeout(this._doLoad.bind(this),t.retryDelay),t.retryDelay=Math.min(2*t.retryDelay,e.retryParameters.maxRetryDelay),t.retry++}},{key:"_onEnd",value:function(e){var t=this.context,i=this.stats,a=(this.loader,e.currentTarget),n=a.status,r=t.callbacks;if(i.aborted)this._onAbort();else if(clearTimeout(this._requestTimeout),n>=200&&n<300){i.tload=Math.max(i.tfirst,performance.now());var o=a.response;if("moz-chunked-arraybuffer"===a.responseType&&(o=t.totalBuffer),r.onSuccess){var s={url:a.responseURL,data:o};r.onSuccess(s,i,t)}this._onComplete(),i.dump=!0}else i.retry>=t.retryParameters.maxRetry||n>=400&&n<499?(i.isTimeout?r.onTimeout&&r.onTimeout(i,t):r.onError&&r.onError({code:n,response:a.response},t),this._onComplete()):this._retry()}},{key:"_onTimeout",value:function(){this.stats.isTimeout=!0,this.abort()}},{key:"_onProgress",value:function(e){var t=this.context,i=this.stats,a=(this.loader,t.callbacks);if(0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),e.lengthComputable&&(i.loaded=e.loaded,i.total=e.total),a.onProgress){var n=e.target?e.target.response:null;if(n){var r=new Uint8Array(n),o=new Uint8Array(t.totalBuffer||0),s=new Uint8Array(o.byteLength+r.byteLength);s.set(o,0),s.set(r,o.byteLength),t.totalBuffer=s.buffer}(this.netType!==l["default"].SEGMENT||n)&&(a.onProgress(n,i),i.dump=!0)}}},{key:"_onAbort",value:function(){var e=this.context;if(e&&!e.completed){var t=e.callbacks;t.onAbort&&t.onAbort(),this._onComplete()}}},{key:"_onComplete",value:function(){var e=this.context;if(e&&!e.completed){var t=e.callbacks;e.completed=!0,e.totalBuffer=null,this._resetTimer(),t.onComplete&&t.onComplete()}}}]),e}();t["default"]=u},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(264),r=a(n),o=i(267),s=a(o),d=i(73),l=a(d),u=i(75),c=a(u),f=i(93),p=a(f),h=function(){function e(t,i){(0,l["default"])(this,e),this.netType=t,this.context=i}return(0,c["default"])(e,null,[{key:"isSupported",value:function(){var e=!!window.fetch,t=!!window.AbortController,i=!0;if(window.ReadableStream)try{new ReadableStream({})}catch(e){i=!1}else i=!1;return e&&i&&t}}]),(0,c["default"])(e,[{key:"destroy",value:function(){this.abort(),this.url=this.controller=this.loader=this.stats=this.context=null}},{key:"_resetTimer",value:function(){clearTimeout(this._requestTimeout),clearTimeout(this._retryTimeout),this._requestTimeout=this._retryTimeout=null}},{key:"abort",value:function(){var e=this.controller,t=this.stats;this._resetTimer(),t&&(t.isTimeout?t.aborted=!1:t.aborted=!0),e&&!e.signal.aborted&&e.abort(),t&&t.aborted&&this._onAbort()}},{key:"load",value:function(e){return this.url=e,this.stats={trequest:performance.now(),retry:0,retryDelay:this.context.retryParameters.baseDelay,dump:!1},this._resetTimer(),this._doLoad()}},{key:"_parseRes",value:function(){function e(e,i){return t.apply(this,arguments)}var t=(0,s["default"])(r["default"].mark(function e(t,i){var a;return r["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0,e.t0=t,e.next="arraybuffer"===e.t0?4:"json"===e.t0?8:12;break;case 4:return e.next=6,i.arrayBuffer();case 6:return a=e.sent,e.abrupt("break",15);case 8:return e.next=10,i.json();case 10:return a=e.sent,e.abrupt("break",15);case 12:return e.next=14,i.text();case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"_initReqTimeout",value:function(){var e=this.context;this.stats;e.retryParameters.timeout>0&&(clearTimeout(this._requestTimeout),this._requestTimeout=setTimeout(this._onTimeout.bind(this),e.retryParameters.timeout))}},{key:"_doLoad",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s["default"])(r["default"].mark(function e(){var t,i,a,n,o,d,l,u,c,f,h,_,g,m,v,y,b=this;return r["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f=function(){return a.retry>=i.retryParameters.maxRetry||n>=400&&n<499},t=this,i=this.context,a=this.stats,n=void 0,o=void 0,d=0,l=void 0,u=i.callbacks,c=this.controller=new AbortController,this._initReqTimeout(),e.prev=10,h=this.url,_={method:i.method,headers:i.headers||{},body:i.body||void 0,mode:"cors",credentials:i.allowCrossSiteCredentials?"include":"same-origin",signal:c.signal},e.next=15,window.fetch(h,_);case 15:if(o=e.sent,!((n=o.status)>=200&&n<300)){e.next=30;break}return l=o.clone().body.getReader(),g=function(){var e=(0,s["default"])(r["default"].mark(function e(){var i,a;return r["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.read();case 2:if(i=e.sent,clearTimeout(t._requestTimeout),i.done||(d+=i.value.byteLength),i.done){e.next=10;break}return a=ArrayBuffer.isView(i.value)?i.value.buffer:null,t._onProgress(a),e.next=10,g();case 10:case"end":return e.stop()}},e,b)}));return function(){return e.apply(this,arguments)}}(),e.next=22,g();case 22:if(!u.onSuccess){e.next=28;break}return e.next=25,t._parseRes(i.responseType,o);case 25:m=e.sent,v={url:h,data:m},a.aborted||(u.onSuccess(v,a,i),this._onComplete(),a.dump=!0);case 28:e.next=44;break;case 30:if(!f()){e.next=43;break}if(!a.isTimeout){e.next=35;break}u.onTimeout&&u.onTimeout(a,i),e.next=40;break;case 35:if(!u.onError){e.next=40;break}return e.next=38,t._parseRes(i.responseType,o);case 38:y=e.sent,a.aborted||u.onError({code:n,response:y},i);case 40:this._onComplete(),e.next=44;break;case 43:this._retry();case 44:e.next=50;break;case 46:e.prev=46,e.t0=e["catch"](10),(e.t0 instanceof RangeError||e.t0 instanceof ReferenceError||e.t0 instanceof SyntaxError||e.t0 instanceof TypeError||e.t0 instanceof URIError)&&p["default"].error(e.t0.stack?e.t0.stack:e.t0.message?e.t0.message:e.t0);try{a.aborted||(f()?(a.isTimeout?u.onTimeout&&u.onTimeout(a,i):u.onError&&u.onError({code:n,response:null,error:e.t0},i),this._onComplete()):this._retry())}catch(e){p["default"].error(e.stack?e.stack:e.message?e.message:e)}case 50:return e.abrupt("return",this);case 51:case"end":return e.stop()}},e,this,[[10,46]])}));return e}()},{key:"_retry",value:function(){var e=this.context,t=this.stats;t.isTimeout=!1,this._resetTimer(),this._retryTimeout=setTimeout(this._doLoad.bind(this),t.retryDelay),t.retryDelay=Math.min(2*t.retryDelay,e.retryParameters.maxRetryDelay),t.retry++}},{key:"_onTimeout",value:function(){this.context;this.stats.isTimeout=!0,this.abort()}},{key:"_onProgress",value:function(e){var t=this.context,i=this.stats,a=t.callbacks;0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),a.onProgress&&(a.onProgress(e,i),i.dump=!0)}},{key:"_onAbort",value:function(){var e=this.context;if(!e.completed){var t=e.callbacks;t.onAbort&&t.onAbort(),this._onComplete()}}},{key:"_onComplete",value:function(){var e=this.context;if(e&&!e.completed){var t=e.callbacks;e.completed=!0,this._resetTimer(),t.onComplete&&t.onComplete()}}}]),e}();t["default"]=h},function(e,t,i){e.exports=i(265)},function(e,t,i){var a=function(){return this}()||Function("return this")(),n=a.regeneratorRuntime&&Object.getOwnPropertyNames(a).indexOf("regeneratorRuntime")>=0,r=n&&a.regeneratorRuntime;if(a.regeneratorRuntime=void 0,e.exports=i(266),n)a.regeneratorRuntime=r;else try{delete a.regeneratorRuntime}catch(e){a.regeneratorRuntime=void 0}},function(e,t){!function(t){function i(e,t,i,a){var r=t&&t.prototype instanceof n?t:n,o=Object.create(r.prototype),s=new p(a||[]);return o._invoke=l(e,i,s),o}function a(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}function n(){}function r(){}function o(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function d(e){function t(i,n,r,o){var s=a(e[i],e,n);if("throw"!==s.type){var d=s.arg,l=d.value;return l&&"object"==typeof l&&v.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):Promise.resolve(l).then(function(e){d.value=e,r(d)},o)}o(s.arg)}function i(e,i){function a(){return new Promise(function(a,n){t(e,i,a,n)})}return n=n?n.then(a,a):a()}var n;this._invoke=i}function l(e,t,i){var n=k;return function(r,o){if(n===E)throw new Error("Generator is already running");if(n===P){if("throw"===r)throw o;return _()}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var d=u(s,i);if(d){if(d===q)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===k)throw n=P,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=E;var l=a(e,t,i);if("normal"===l.type){if(n=i.done?P:A,l.arg===q)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=P,i.method="throw",i.arg=l.arg)}}}function u(e,t){var i=e.iterator[t.method];if(i===g){if(t.delegate=null,"throw"===t.method){if(e.iterator["return"]&&(t.method="return",t.arg=g,u(e,t),"throw"===t.method))return q;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return q}var n=a(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,q;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,q):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,q)}function c(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(c,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function t(){for(;++i<e.length;)if(v.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=g,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:g,done:!0}}var g,m=Object.prototype,v=m.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},b=y.iterator||"@@iterator",x=y.asyncIterator||"@@asyncIterator",w=y.toStringTag||"@@toStringTag",T="object"==typeof e,S=t.regeneratorRuntime;if(S)return void(T&&(e.exports=S));S=t.regeneratorRuntime=T?e.exports:{},S.wrap=i;var k="suspendedStart",A="suspendedYield",E="executing",P="completed",q={},I={};I[b]=function(){return this};var L=Object.getPrototypeOf,D=L&&L(L(h([])));D&&D!==m&&v.call(D,b)&&(I=D);var C=o.prototype=n.prototype=Object.create(I);r.prototype=C.constructor=o,o.constructor=r,o[w]=r.displayName="GeneratorFunction",S.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))},S.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(C),e},S.awrap=function(e){return{__await:e}},s(d.prototype),d.prototype[x]=function(){return this},S.AsyncIterator=d,S.async=function(e,t,a,n){var r=new d(i(e,t,a,n));return S.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},s(C),C[w]="Generator",C[b]=function(){return this},C.toString=function(){return"[object Generator]"},S.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var a=t.pop();if(a in e)return i.value=a,i.done=!1,i}return i.done=!0,i}},S.values=h,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,a){return r.type="throw",r.arg=e,i.next=t,a&&(i.method="next",i.arg=g),!!a}if(this.done)throw e;for(var i=this,a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a],r=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var o=v.call(n,"catchLoc"),s=v.call(n,"finallyLoc");if(o&&s){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&v.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var n=a;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var r=n?n.completion:{};return r.type=e,r.arg=t,n?(this.method="next",this.next=n.finallyLoc,q):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),q},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),f(i),q}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var a=i.completion;if("throw"===a.type){var n=a.arg;f(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:h(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=g),q}}}(function(){return this}()||Function("return this")())},function(e,t,i){t.__esModule=!0;var a=i(268),n=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]=function(e){return function(){var t=e.apply(this,arguments);return new n["default"](function(e,i){function a(r,o){try{var s=t[r](o),d=s.value}catch(e){return void i(e)}if(!s.done)return n["default"].resolve(d).then(function(e){a("next",e)},function(e){a("throw",e)});e(d)}return a("next")})}}},function(e,t,i){e.exports={"default":i(269),__esModule:!0}},function(e,t,i){i(66),i(5),i(49),i(270),i(283),i(284),e.exports=i(13).Promise},function(e,t,i){var a,n,r,o,s=i(10),d=i(12),l=i(14),u=i(102),c=i(11),f=i(19),p=i(15),h=i(271),_=i(272),g=i(273),m=i(274).set,v=i(276)(),y=i(277),b=i(278),x=i(279),w=i(280),T=d.TypeError,S=d.process,k=S&&S.versions,A=k&&k.v8||"",E=d.Promise,P="process"==u(S),q=function(){},I=n=y.f,L=!!function(){try{var e=E.resolve(1),t=(e.constructor={})[i(46)("species")]=function(e){e(q,q)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(q)instanceof t&&0!==A.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(e){}}(),D=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},C=function(e,t){if(!e._n){e._n=!0;var i=e._c;v(function(){for(var a=e._v,n=1==e._s,r=0;i.length>r;)!function(t){var i,r,o,s=n?t.ok:t.fail,d=t.resolve,l=t.reject,u=t.domain;try{s?(n||(2==e._h&&O(e),e._h=1),!0===s?i=a:(u&&u.enter(),i=s(a),u&&(u.exit(),o=!0)),i===t.promise?l(T("Promise-chain cycle")):(r=D(i))?r.call(i,d,l):d(i)):l(a)}catch(e){u&&!o&&u.exit(),l(e)}}(i[r++]);e._c=[],e._n=!1,t&&!e._h&&F(e)})}},F=function(e){m.call(d,function(){var t,i,a,n=e._v,r=R(e);if(r&&(t=b(function(){P?S.emit("unhandledRejection",n,e):(i=d.onunhandledrejection)?i({promise:e,reason:n}):(a=d.console)&&a.error&&a.error("Unhandled promise rejection",n)}),e._h=P||R(e)?2:1),e._a=void 0,r&&t.e)throw t.v})},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},O=function(e){m.call(d,function(){var t;P?S.emit("rejectionHandled",e):(t=d.onrejectionhandled)&&t({promise:e,reason:e._v})})},B=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),C(t,!0))},N=function(e){var t,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw T("Promise can't be resolved itself");(t=D(e))?v(function(){var a={_w:i,_d:!1};try{t.call(e,l(N,a,1),l(B,a,1))}catch(e){B.call(a,e)}}):(i._v=e,i._s=1,C(i,!1))}catch(e){B.call({_w:i,_d:!1},e)}}};L||(E=function(e){h(this,E,"Promise","_h"),p(e),a.call(this);try{e(l(N,this,1),l(B,this,1))}catch(e){B.call(this,e)}},a=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},a.prototype=i(281)(E.prototype,{then:function(e,t){var i=I(g(this,E));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=P?S.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&C(this,!1),i.promise},"catch":function(e){return this.then(void 0,e)}}),r=function(){var e=new a;this.promise=e,this.resolve=l(N,e,1),this.reject=l(B,e,1)},y.f=I=function(e){return e===E||e===o?new r(e):n(e)}),c(c.G+c.W+c.F*!L,{Promise:E}),i(45)(E,"Promise"),i(282)("Promise"),o=i(13).Promise,c(c.S+c.F*!L,"Promise",{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),c(c.S+c.F*(s||!L),"Promise",{resolve:function(e){return w(s&&this===o?E:this,e)}}),c(c.S+c.F*!(L&&i(103)(function(e){E.all(e)["catch"](q)})),"Promise",{all:function(e){var t=this,i=I(t),a=i.resolve,n=i.reject,r=b(function(){var i=[],r=0,o=1;_(e,!1,function(e){var s=r++,d=!1;i.push(void 0),o++,t.resolve(e).then(function(e){d||(d=!0,i[s]=e,--o||a(i))},n)}),--o||a(i)});return r.e&&n(r.v),i.promise},race:function(e){var t=this,i=I(t),a=i.reject,n=b(function(){_(e,!1,function(e){t.resolve(e).then(i.resolve,a)})});return n.e&&a(n.v),i.promise}})},function(e,t){e.exports=function(e,t,i,a){if(!(e instanceof t)||void 0!==a&&a in e)throw TypeError(i+": incorrect invocation!");return e}},function(e,t,i){var a=i(14),n=i(98),r=i(99),o=i(18),s=i(38),d=i(101),l={},u={},t=e.exports=function(e,t,i,c,f){var p,h,_,g,m=f?function(){return e}:d(e),v=a(i,c,t?2:1),y=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(r(m)){for(p=s(e.length);p>y;y++)if((g=t?v(o(h=e[y])[0],h[1]):v(e[y]))===l||g===u)return g}else for(_=m.call(e);!(h=_.next()).done;)if((g=n(_,v,h.value,t))===l||g===u)return g};t.BREAK=l,t.RETURN=u},function(e,t,i){var a=i(18),n=i(15),r=i(46)("species");e.exports=function(e,t){var i,o=a(e).constructor;return void 0===o||void 0==(i=a(o)[r])?t:n(i)}},function(e,t,i){var a,n,r,o=i(14),s=i(275),d=i(44),l=i(23),u=i(12),c=u.process,f=u.setImmediate,p=u.clearImmediate,h=u.MessageChannel,_=u.Dispatch,g=0,m={},v=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},y=function(e){v.call(e.data)};f&&p||(f=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return m[++g]=function(){s("function"==typeof e?e:Function(e),t)},a(g),g},p=function(e){delete m[e]},"process"==i(36)(c)?a=function(e){c.nextTick(o(v,e,1))}:_&&_.now?a=function(e){_.now(o(v,e,1))}:h?(n=new h,r=n.port2,n.port1.onmessage=y,a=o(r.postMessage,r,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(a=function(e){u.postMessage(e+"","*")},u.addEventListener("message",y,!1)):a="onreadystatechange"in l("script")?function(e){d.appendChild(l("script")).onreadystatechange=function(){d.removeChild(this),v.call(e)}}:function(e){setTimeout(o(v,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e,t,i){var a=void 0===i;switch(t.length){case 0:return a?e():e.call(i);case 1:return a?e(t[0]):e.call(i,t[0]);case 2:return a?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},function(e,t,i){var a=i(12),n=i(274).set,r=a.MutationObserver||a.WebKitMutationObserver,o=a.process,s=a.Promise,d="process"==i(36)(o);e.exports=function(){var e,t,i,l=function(){var a,n;for(d&&(a=o.domain)&&a.exit();e;){n=e.fn,e=e.next;try{n()}catch(a){throw e?i():t=void 0,a}}t=void 0,a&&a.enter()};if(d)i=function(){o.nextTick(l)};else if(!r||a.navigator&&a.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);i=function(){u.then(l)}}else i=function(){n.call(a,l)};else{var c=!0,f=document.createTextNode("");new r(l).observe(f,{characterData:!0}),i=function(){f.data=c=!c}}return function(a){var n={fn:a,next:void 0};t&&(t.next=n),e||(e=n,i()),t=n}}},function(e,t,i){function a(e){var t,i;this.promise=new e(function(e,a){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=a}),this.resolve=n(t),this.reject=n(i)}var n=i(15);e.exports.f=function(e){return new a(e)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,i){var a=i(12),n=a.navigator;e.exports=n&&n.userAgent||""},function(e,t,i){var a=i(18),n=i(19),r=i(277);e.exports=function(e,t){if(a(e),n(t)&&t.constructor===e)return t;var i=r.f(e);return(0,i.resolve)(t),i.promise}},function(e,t,i){var a=i(16);e.exports=function(e,t,i){for(var n in t)i&&e[n]?e[n]=t[n]:a(e,n,t[n]);return e}},function(e,t,i){var a=i(12),n=i(13),r=i(17),o=i(21),s=i(46)("species");e.exports=function(e){var t="function"==typeof n[e]?n[e]:a[e];o&&t&&!t[s]&&r.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,i){var a=i(11),n=i(13),r=i(12),o=i(273),s=i(280);a(a.P+a.R,"Promise",{"finally":function(e){var t=o(this,n.Promise||r.Promise),i="function"==typeof e;return this.then(i?function(i){return s(t,e()).then(function(){return i})}:e,i?function(i){return s(t,e()).then(function(){throw i})}:e)}})},function(e,t,i){var a=i(11),n=i(277),r=i(278);a(a.S,"Promise",{"try":function(e){var t=n.f(this),i=r(e);return(i.e?t.reject:t.resolve)(i.v),t.promise}})},function(e,t,i){function a(e){var t=[];return function e(i){switch(void 0===i?"undefined":(0,r["default"])(i)){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;case"object":default:if(!i)return i;if(t.indexOf(i)>=0)return null;var a=i.constructor==Array;if(i.constructor!=Object&&!a)return null;t.push(i);var n=a?[]:{};for(var o in i)n[o]=e(i[o]);return a&&(n.length=i.length),n}}(e)}Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),r=function(e){return e&&e.__esModule?e:{"default":e}}(n);t["default"]=a},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(107),m=(a(g),i(261)),v=a(m),y=i(250),b=a(y),x=i(257),w=a(x),T=function(e){function t(e){(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i.name=w["default"].FLV_Type_SecondDispatch,i._netProxy=new v["default"],i._request=null,i._data=null,i._fragment=e,i._dispatcherFunc=null,i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"dispatcherFunc",set:function(e){this._dispatcherFunc=e}}]),(0,c["default"])(t,[{key:"request",value:function(e){var t=this,i=t._fragment.uri.toString();t._data=null;var a=t._dispatcherFunc.UUID.getFluid();i+=-1==i.indexOf("?")?"?":"&",i+="tn="+Math.random(),i+="&su="+a,-1==i.indexOf("&pv=")&&(i+="&pv=0.1"),-1==i.indexOf("&qyid=")&&(i+="&qyid="+a),e.retryCount>0&&(i+="&retry="+e.retryCount),i+="&client="+e.currentUserIP,i+="&z="+e.preDispatchArea,i+="&mi="+e.mi,i+="&bt="+e.preDefinition,i+="&ct="+e.currentDefinition,e.preAverageSpeed>0&&(i+="&s="+e.preAverageSpeed),i+="&e="+e.preErrorCode;var n=b["default"].DISPATCH,r={timeout:3e3,maxRetry:1},o=t._netProxy.makeRequestContext([i],r);o.method="GET",o.responseType="json",o.callbacks={onSuccess:function(i){if(t._data=i.data,e.preDispatchArea=t._data.z,""==e.currentUserIP&&t._data.t){var a=String(t._data.t).split("-");e.currentUserArea=a[0],e.currentUserIP=a[1]}t.emit(w["default"].FLV_Dispatch_Success)},onError:function(){e.preErrorURL=i,t.emit(w["default"].FLV_Dispatch_Fail)},onTimeout:function(a,n){e.preErrorURL=i,t.emit(w["default"].FLV_Dispatch_Fail)},onAbort:function(){},onComplete:function(){}},t._request=t._netProxy.request(n,o)}},{key:"getData",value:function(){return this._data}},{key:"destroy",value:function(){this._netProxy=null,this._request=null,this._data=null,this._fragment=null,this._dispatcherFunc=null}}]),t}(_["default"]);t["default"]=T},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),r=a(n),o=i(69),s=a(o),d=i(73),l=a(d),u=i(74),c=a(u),f=i(75),p=a(f),h=i(79),_=a(h),g=i(88),m=a(g),v=i(108),y=(a(v),i(261)),b=a(y),x=i(250),w=a(x),T=i(257),S=a(T),k=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,l["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this));return a.name=S["default"].FLV_Type_Authentication,a._netProxy=new b["default"],a._request=null,a._data=null,a._fragment=e,a._shareFlag=i,a._dispatcherFunc=null,a}return(0,_["default"])(t,e),(0,p["default"])(t,[{key:"dispatcherFunc",set:function(e){this._dispatcherFunc=e}}]),(0,p["default"])(t,[{key:"request",value:function(e){var t=this,i=t._fragment.uri.query._encodedQuery;t._data=null;var a=this._dispatcherFunc.UUID,n=this._dispatcherFunc.user,r=this._dispatcherFunc.dfp,o=(this._dispatcherFunc.i18n,{version:"7.0",platform:e.pf,deviceId:a.getFluid()||a.getJsuid(),uid:n.getUid(),playType:"pcwh5",shareFlag:t._shareFlag,appname:"h5",dfp:r.get(),messageId:"h5_"+a.createUUID().replace(/-/gi,""),aid:e.albumId,tvid:e.tvid,filename:t._fragment.rid}),s={timeout:3e3,maxRetry:1},d="https://api.vip.iqiyi.com/services/cknsp.action?"+i+"&"+this._paramFormat(o),l=w["default"].DISPATCH,u=t._netProxy.makeRequestContext([d],s);u.method="GET",u.responseType="json",u.allowCrossSiteCredentials=!0,u.callbacks={onSuccess:function(i){if(t._data=i.data,t._shareFlag>0)return void t.emit(S["default"].FLV_Dispatch_Success);"A00000"==t._data.code?(e.key=t._data.data.t,e.QY00001=t._data.data.u,e.auth_ptime=parseInt(t._data.data.ptime),e.dispatcherServerTime=Number(t._data.data.st),t.emit(S["default"].FLV_Dispatch_Success)):t.emit(S["default"].FLV_Dispatch_Fail)},onError:function(){t.emit(S["default"].FLV_Dispatch_Fail)},onTimeout:function(e,i){t.emit(S["default"].FLV_Dispatch_Fail)},onAbort:function(){},onComplete:function(){}},t._request=t._netProxy.request(l,u)}},{key:"getData",value:function(){return this._data}},{key:"destroy",value:function(){this._netProxy=null,this._request=null,this._data=null,this._fragment=null,this._dispatcherFunc=null}},{key:"_paramFormat",value:function(e){var t=[];if("object"==(void 0===e?"undefined":(0,r["default"])(e)))for(var i in e)t[t.length]=encodeURIComponent(i)+"="+encodeURIComponent(e[i]);return t.join("&").replace(/%20/g,"+")}}]),t}(m["default"]);t["default"]=k},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(107),m=(a(g),i(261)),v=a(m),y=i(250),b=a(y),x=i(257),w=a(x),T=function(e){function t(e){(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i.name=w["default"].FLV_Type_MemberDispatch,i._netProxy=new v["default"],i._request=null,i._data=null,i._fragment=e,i._dispatcherFunc=null,i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"dispatcherFunc",set:function(e){this._dispatcherFunc=e}}]),(0,c["default"])(t,[{key:"request",value:function(e){var t=this,i=t._fragment.uri.toString();t._data=null;var a=t._dispatcherFunc.UUID,n=t._dispatcherFunc.cmd5x,r=a.getFluid();i+=-1==i.indexOf("?")?"?":"&",i+="t="+e.key,-1==i.indexOf("&cid=")&&(i+="&cid="+e.communicationlId),-1==i.indexOf("&vid=")&&(i+="&vid="+e.vid),-1==i.indexOf("&QY00001=")&&(i+="&QY00001="+e.QY00001),e.retryCount>0&&(i+="&retry="+e.retryCount),i+="&su="+r,i+="&client="+e.currentUserIP,i+="&z="+e.preDispatchArea,i+="&mi="+e.mi,i+="&bt="+e.preDefinition,i+="&ct="+e.currentDefinition,e.preAverageSpeed>0&&(i+="&s="+e.preAverageSpeed),i+="&e="+e.preErrorCode,-1==i.indexOf("&qyid=")&&(i+="&qyid="+r),-1==i.indexOf("&ib=")&&(i+="&ib=4"),-1==i.indexOf("&ptime=")&&(i+="&ptime="+(e.auth_ptime==1/0?0:e.auth_ptime)),-1==i.indexOf("&pv=")&&(i+="&pv=0.1"),i+="&tn="+Math.random();var o=e.key+t._fragment.rid,s=o;i+="&ibt="+n(s,s);var d=b["default"].DISPATCH,l={timeout:3e3,maxRetry:1},u=t._netProxy.makeRequestContext([i],l);u.method="GET",u.responseType="json",u.callbacks={onSuccess:function(i){t._data=i.data,e.preDispatchArea=t._data.z,""==e.currentUserIP&&t._data.t&&(e.currentUserIP=String(t._data.t).split("-")[1]),t.emit(w["default"].FLV_Dispatch_Success)},onError:function(){e.preErrorURL=i,t.emit(w["default"].FLV_Dispatch_Fail)},onTimeout:function(a,n){e.preErrorURL=i,t.emit(w["default"].FLV_Dispatch_Fail)},onAbort:function(){},onComplete:function(){}},t._request=t._netProxy.request(d,u)}},{key:"getData",value:function(){return this._data}},{key:"destroy",value:function(){this._netProxy=null,this._request=null,this._data=null,this._fragment=null,this._dispatcherFunc=null}}]),t}(_["default"]);t["default"]=T},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(107),m=a(g),v=i(135),y=i(261),b=a(y),x=i(250),w=a(x),T=i(125),S=a(T),k=i(141),A=a(k),E=i(257),P=a(E),q=i(290),I=a(q),L=function(e){function t(e){(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i.name=P["default"].FLV_Type_IPDispatch,i._netProxy=new b["default"],i._request=null,i._data=null,i._fragment=e,i._dispatcherFunc=null,i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"dispatcherFunc",set:function(e){this._dispatcherFunc=e}}]),(0,c["default"])(t,[{key:"request",value:function(e,t){var i=this;i._data=null;var a=i._prepareURLParam(e,t);a||i.emit(P["default"].FLV_Dispatch_Fail);var n=w["default"].DISPATCH,r={timeout:3e3,maxRetry:1};i._netProxy||(i._netProxy=new b["default"]);var o=i._netProxy.makeRequestContext([a],r);o.method="GET",o.responseType="json",o.callbacks={onSuccess:function(t){if(i._data=t.data,e.preDispatchArea=i._data.z,""==e.currentUserIP&&i._data.t){var a=String(i._data.t).split("-");e.currentUserArea=a[0],e.currentUserIP=a[1]}i.emit(P["default"].FLV_Dispatch_Success)},onError:function(e){i.emit(P["default"].FLV_Dispatch_Fail)},onTimeout:function(e,t){i.emit(P["default"].FLV_Dispatch_Fail)},onAbort:function(){},onComplete:function(){}},i._request=i._netProxy.request(n,o)}},{key:"startIPRequest",value:function(e){var t=this,i=I["default"].dispatchAccessURL,a=I["default"].dispatchIPFail,n=w["default"].DISPATCH,r=t._netProxy.makeRequestContext([i],(0,m["default"])({timeout:3e3},1));r.method="GET",r.responseType="text",r.callbacks={onSuccess:function(i){if(i&&i.data)if("string"==typeof i.data){var n=i.data.split(";"),r=n[0],o=I["default"].dispatchIPSuccess.replace("{{IP}}",r);t.request(e,o)}else t.request(e,a);else t.request(e,a)},onError:function(i){t.request(e,a)},onTimeout:function(i,n){t.request(e,a)},onAbort:function(){},onComplete:function(){}},t._netProxy.request(n,r)}},{key:"_prepareURLParam",value:function(e,t){var i=this;if(!i._fragment)return null;var a=i._fragment.uri.domain,n=i._fragment.uri.path,r=(i._fragment.uri.query.toString(),i._dispatcherFunc.md5),o="/3e8/"+r(a)+A["default"].toBase64(n),s=new S["default"](e.preErrorURL);return s.setDomain(t),s.setPath(o),(0,v.isHttps)(s.toString())?s.toString()+"&ssl=1":s.toString()}},{key:"getData",value:function(){return this._data}},{key:"destroy",value:function(){this._netProxy=null,this._request=null,this._data=null,this._fragment=null,this._dispatcherFunc=null}}]),t}(_["default"]);t["default"]=L},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var a=window.location.protocol;t["default"]={dispatchAccessURL:a+"//103.44.59.54/3e8",dispatchIPSuccess:"{{IP}}",dispatchIPFail:"access.if.iqiyi.com"}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(116),_=a(h),g=i(121),m=a(g),v=i(125),y=a(v),b=i(107),x=a(b),w=i(292),T=a(w),S=i(135),k=function(e){function t(){(0,s["default"])(this,t);var e=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return e.fragments=[],e.dispatcherParam=null,e.dispatcherFunc=null,e}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"push",value:function(e){e.segments&&this._analyzeSegments(e),void 0!==e.dispatchParams&&(this.dispatcherParam=e.dispatchParams,this.dispatcherFunc=e.dispatcherFunc,(0,x["default"])(this.dispatcherParam,{dispatcherServerTime:"",key:"",currentUserIP:"",preDispatchArea:"",preDefinition:"",preAverageSpeed:0,preErrorCode:"",retryCount:0}))}},{key:"_analyzeSegments",value:function(e){this.fragments=[];var t=e.segments;if(t&&t.length>0){var i=t.length;this.fragments=new Array(i);for(var a=null,n=0,r=null,o=null;n<i;++n)r=t[n],o=t[n+1],a=new T["default"](_["default"].F4V),a.idx=n,r.isAd&&(a.isAd=!0),a.startTime=r.startTime,a.duration=o?o.startTime-r.startTime:r.duration,a.totalBytes=r.totalBytes,a.uri=new y["default"](r.dispatUrl),(0,S.isHttps)()&&a.uri.setScheme("https"),a.gas=r.gas,this.fragments[n]=a}}},{key:"end",value:function(){}},{key:"reset",value:function(){this.fragments=[],this.dispatcherParam=null,this.dispatcherFunc=null}}]),t}(m["default"]);t["default"]=k},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(124),_=a(h),g=i(247),m=a(g),v=function(e){function t(e){(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e));return i._headerStatus=0,i._totalBytes=0,i._vaconfig=null,i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"totalBytes",get:function(){return this._totalBytes},set:function(e){this._totalBytes=e}},{key:"headerStatus",get:function(){return this._headerStatus},set:function(e){this._headerStatus=e}},{key:"isHeaderLoaded",get:function(){return this._headerStatus===m["default"].LOADED}},{key:"endTime",get:function(){return this.startTime+this.duration}},{key:"rid",get:function(){if(!this._rid){var e=this.uri.path.split("/");if(e&&e.length>0){e=e[e.length-1].split("."),e&&e.length>0&&(this._rid=e[0])}}return this._rid}},{key:"vaconfig",get:function(){return this._vaconfig},set:function(e){this._vaconfig=e}}]),(0,c["default"])(t,[{key:"getRange",value:function(e){return this._headerStatus===m["default"].LOADED?this.segments[e].startByte+"-"+this.segments[e].endByte:"0-8191"}}]),t}(_["default"]);t["default"]=v},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(148),_=a(h),g=i(93),m=a(g),v=i(294),y=a(v),b=i(300),x=a(b),w=i(115),T=(a(w),i(105)),S=a(T),k=i(92),A=a(k),E=function(e){function t(e){(0,s["default"])(this,t);var i=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e));return i.TAG="MATStream",i._enabled=!1,i._rTime=0,i._playSource=null,i._AudioActor=new y["default"](e),i._AudioActor.on(x["default"].ACTOR_LOAD_FAIL,i._onActorLoadFail.bind(i)),i._AudioActor.on(x["default"].ACTOR_DISPATCHED_FAIL,i._onActorDispatchFail.bind(i)),i._AudioActor.on(x["default"].ACTOR_AUDIOTRACK_SWITCHED_SUCCESSED,i._onAudioTrackSwitchedSuccessed.bind(i)),i}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"eof",get:function(){return!!this._AudioActor&&this._AudioActor.eof}},{key:"eod",get:function(){return!!this._AudioActor&&this._AudioActor.eod}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}}]),(0,c["default"])(t,[{key:"_onActorLoadFail",value:function(){var e=this._AudioActor,t=this._ctx;e.audioLoader&&e.audioLoader._firstLoad&&(t.emit(A["default"].AUDIO_TRACK_SWITCHED_FAILED),this._enabled=!1)}},{key:"_onActorDispatchFail",value:function(){var e=this._AudioActor,t=this._ctx;e.audioLoader&&e.audioLoader._firstLoad&&(t.emit(A["default"].AUDIO_TRACK_SWITCHED_FAILED),this._enabled=!1)}},{key:"_onAudioTrackSwitchedSuccessed",value:function(){this._ctx.emit(A["default"].AUDIO_TRACK_SWITCHED_SUCCESSED)}},{key:"push",value:function(e){var t=e.playSourceContent;this._filled=!0,this._playSource=t||null,this._playSource&&this._AudioActor.init(this._playSource)}},{key:"seek",value:function(e){this._AudioActor.seek(e),this._rTime=e}},{key:"read",value:function(e){var t=(this._playRanges,this._ctx),i=(this._rTime,this._AudioActor),a=e;i._currentReadTime!=i._currentLoadTime||i.audioLoader._firstLoad||i.onErrored&&t._emitError(new S["default"](S["default"].severity.CRITICAL,S["default"].category.DATA_SOURCE,S["default"].code.DATA_AUDIO_LOADED_ERROR));var n=i.read(a);return n&&(this._rTime+=a),m["default"].log("mat stream -> readTime "+a+", rTime "+this._rTime),n}},{key:"_reset",value:function(){this._enabled=!1,this._rTime=0,this._playSource=null,this._AudioActor.reset()}}]),t}(_["default"]);t["default"]=E},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(295),_=a(h),g=i(244),m=a(g),v=i(141),y=a(v),b=i(88),x=a(b),w=i(197),T=a(w),S=i(108),k=a(S),A=i(93),E=a(A),P=i(114),q=a(P),I=i(296),L=a(I),D=i(297),C=a(D),F=i(298),R=a(F),O=i(299),B=a(O),N=i(300),M=a(N),V=i(118),U=a(V),j=i(115),G=a(j),z=i(116),H=a(z),Y=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Q=18e4,W=function(e){function t(e){(0,s["default"])(this,t);var i=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i._MaxCacheTime=e?1e3*e.config.maxBufferTimeLength:Q,i.tracks=[],i._headDataReady=!1,i._headAnalyzed=!1,i._hasInit=!1,i.audioTrack=new L["default"],i._timeScale=0,i._sampleEntryList=[],i._timeToSampleList=[],i._timeToFragmentList=[],i._audioFragments=[],i._initSegment="",i._headerFragment="",i._audioSequenceNumber=0,i._currentLoadTime=0,i._currentReadTime=0,i._baseMediaDecodeTime=0,i.onErrored=!1,i._initAudioLoader(),i}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"_initAudioLoader",value:function(){this.audioLoader=new B["default"],this.audioLoader.on(M["default"].LOADER_DATA_LOAD_SUCCESS,this._onDataLoaderSuccess.bind(this)),this.audioLoader.on(M["default"].LOADER_DATA_LOAD_FAIL,this._onDataLoaderFail.bind(this)),this.audioLoader.on(M["default"].LOADER_DISPATCHER_FAIL,this._onLoaderDispatchFail.bind(this)),this.audioLoader.on(M["default"].LOADER_DISPATCHER_EXPIRED,this._onLoaderDispatchExpired.bind(this))}},{key:"_onDataLoaderSuccess",value:function(e){if(this.audioUsing){var t=e.data,i=t.fragment;"head"==i.type?(this._headDataReady=!0,this._analyzeHeader(t.data),this.tracks.length,this._mappingTimeToFragment()):this._analyzeMdat(i,t.data)}}},{key:"_onDataLoaderFail",value:function(e){this.onErrored=!0,this._dispatchEvent(M["default"].ACTOR_LOAD_FAIL)}},{key:"_onLoaderDispatchFail",value:function(){this.onErrored=!0,this._dispatchEvent(M["default"].ACTOR_DISPATCHED_FAIL)}},{key:"_onLoaderDispatchExpired",value:function(){this.onErrored=!0,this._dispatchEvent(M["default"].ACTOR_DISPATCHED_FAIL)}},{key:"_dispatchEvent",value:function(e){this.emit(e)}},{key:"_setFragments",value:function(e){var t=e.fs;if(t&&0!=t.length)for(var i=void 0,a=0;a<t.length;a++)1==t[a].i?(this._headerFragment=new R["default"](t[a]),this._headerFragment.type="head"):(i=new C["default"](t[a]),i.type="mdat",this._audioFragments.push(i))}},{key:"_tick",value:function(){this._checkLoadData()}},{key:"_checkLoadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.audioUsing&&!this.onErrored&&(E["default"].log("audio checkLoadData -> currentReadTime = "+this._currentReadTime+", currentLoadTime = "+this._currentLoadTime+", time = "+e),this._headDataReady?e>0&&(e!=this._currentLoadTime||e==this._currentLoadTime&&!this.audioLoader.hasDataLoading)&&!this._hasData(e,this._MaxCacheTime)?(this._currentLoadTime=this._currentReadTime=e,this.audioLoader.cancelLoad(),this._loadData(this._currentLoadTime)):this._currentLoadTime<this._currentReadTime+this._MaxCacheTime&&this._loadData(this._currentLoadTime):this.audioLoader.hasDataLoading||this._loadHeader(),this._hasData(this._currentLoadTime,this._MaxCacheTime)&&(this._currentLoadTime+=this._MaxCacheTime),(this.eod||this.eof)&&this._tickTimer.cancel())}},{key:"_hasData",value:function(e,t){if(!this._headDataReady||!this.audioUsing)return!1;var i=this._getIndexByTime(e),a=this._getIndexByTime(e+t),n=this._timeToFragmentList[i],r=this._timeToFragmentList[a],o=n.sFragment.fragment,s=r.eFragment.fragment,d=n.sFragment.position,l=r.eFragment.position;return E["default"].log("======= start checkHasData ====== st="+e+",et="+(e+t)+",start fragment order= "+o.order+", end fragment order = "+s.order),o.order==s.order?(E["default"].log("======= checkHasData ====== order="+o.order+", sp="+d+",ep="+l+", startByte="+s.startByte+", endByte="+s.endByte),o.hasPartData(d,l)):!o.isComplete||o.isComplete&&o.startByte>d?(E["default"].log("======= checkHasData ====== order="+o.order+", isComplete="+o.isComplete),!1):(E["default"].log("======= checkHasData ====== order="+s.order+", sp=0 ,ep="+l+", startByte="+s.startByte+", endByte="+s.endByte),s.hasPartData(0,l))}},{key:"_loadHeader",value:function(){this.audioLoader&&(this.audioLoader.cancelLoad(),this.audioLoader.startLoad(this._headerFragment,0,this._headerFragment.totalByte))}},{key:"_loadData",value:function(e){if(!this.audioLoader.hasDataLoading){var t=this._getFragmentByTime(e),i=this._getFragmentByTime(e+this._MaxCacheTime),a=t.sFragment.fragment,n=i.eFragment.fragment,r=t.sFragment.position,o=i.eFragment.position,s=void 0;a.order==n.order&&r<o?(s=a.getLoadPart(r,o),E["default"].log("audio loadData order = "+a.order+", time = "+e+",sp="+r+",ep="+o+",======= startByte="+a.startByte+", endByte="+a.endByte),s&&(E["default"].log("=========== fix sp = "+s.sp+", ep = "+s.ep),E["default"].log("=========== audio ++++++++ start load +++++++++ order = "+a.order+", currentReadTime = "+this._currentReadTime+", currentLoadTime = "+this._currentLoadTime+", sp = "+s.sp+", ep = "+s.ep),this.audioLoader.startLoad(a,s.sp,s.ep))):a.hasPartData(r,a.totalByte)?n.hasPartData(0,o)||(s=n.getLoadPart(0,o),r=s.sp,o=s.ep,E["default"].log("=========== audio ++++++++ start load +++++++++ order = "+n.order+", currentReadTime = "+this._currentReadTime+", currentLoadTime = "+this._currentLoadTime+", sp = "+s.sp+", ep = "+s.ep),this.audioLoader.startLoad(n,r,o)):(s=a.getLoadPart(r,a.totalByte),r=s.sp,o=s.ep,E["default"].log("=========== audio ++++++++ start load +++++++++ order = "+a.order+", currentReadTime = "+this._currentReadTime+", currentLoadTime = "+this._currentLoadTime+", sp = "+s.sp+", ep = "+s.ep),this.audioLoader.startLoad(a,r,o))}}},{key:"_mappingTimeToFragment",value:function(){for(var e=0,t=void 0,i=0;i<this._sampleEntryList.length;i++)t={},t.tm=this._sample_duration*i,t.index=i,t.sPosition=e,t.ePosition=e+this._sampleEntryList[i],t.sFragment=this._getFragmentByPosition(t.sPosition),t.eFragment=this._getFragmentByPosition(t.ePosition),this._timeToFragmentList.push(t),e+=this._sampleEntryList[i]}},{key:"_getFragmentByPosition",value:function(e){for(var t=void 0,i=0,a=0;a<this._audioFragments.length;a++){var n=0==a?this._audioFragments[a].totalByte-16:this._audioFragments[a].totalByte;if(0==e||e>i&&e-i<=n){t={},t.fragment=this._audioFragments[a],t.position=e-i+(0==a?16:0);break}i+=n}return t}},{key:"_getFragmentByTime",value:function(e){var t=this._getIndexByTime(e);return this._timeToFragmentList[t]}},{key:"_getIndexByTime",value:function(e){var t=this._sample_duration,i=e/1e3*this._timeScale,a=Math.floor(i/t);return a>this._timeToFragmentList.length-1&&(a=this._timeToFragmentList.length-1),a}},{key:"_getSampleData",value:function(e,t){var i=void 0;if(e.hasOwnProperty("fragment")&&t.hasOwnProperty("fragment"))if(e.fragment.order==t.fragment.order)i=e.fragment.getData(e.position,t.position);else{var a=e.fragment.getData(e.position,e.fragment.totalByte),n=t.fragment.getData(0,t.position);i=new Uint8Array(a.byteLength+n.byteLength),i.set(a,0),i.set(n,a.byteLength)}return i}},{key:"_getDataByTime",value:function(e,t){var i=this._getIndexByTime(e),a=this._getIndexByTime(e+t),n=this._timeToFragmentList[i],r=this._timeToFragmentList[a];return this._getSampleData(n.sFragment,r.eFragment)}},{key:"_getDataListByTime",value:function(e,t){var i=this._getIndexByTime(e),a=this._getIndexByTime(e+t)+1;a>this._timeToFragmentList.length-1&&(a=this._timeToFragmentList.length-1);for(var n=[],r=i;r<=a;r++){var o=this._timeToFragmentList[r],s=this._getSampleData(o.sFragment,o.eFragment);n.push({size:s.byteLength,duration:1024,cts:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:0}})}return n.length>0?n:[]}},{key:"_analyzeHeader",value:function(e){var t={},i=new Uint8Array(e),a=_["default"].ungzip(i),n=m["default"].mp4toJSON(a),r=y["default"].flatten(n,"boxes");this.audioTrack.$timescale=r.mp4a.samplerate,this.audioTrack.$duration=r.mvhd.duration/r.mvhd.timescale,this.audioTrack.$id=r.tkhd.trackId,this.audioTrack.$width=r.tkhd.width,this.audioTrack.$height=r.tkhd.height,this.audioTrack.$sampleRate=r.mp4a.samplerate,this.audioTrack.$channelCount=r.mp4a.channelcount;var o=r.mp4a.streamDescriptor.decoderConfig.decoderConfigDescriptor;t.audioObjectType=o.audioObjectType,t.channelCount=o.channelConfiguration,t.samplingFrequencyIndex=o.samplingFrequencyIndex;var s=this._getAudioConfig(t);this.audioTrack.$config=s.config,this.audioTrack.$codec=s.codec,this.audioTrack.$manifestCodec=s.manifestCodec,this._timeScale=r.mvhd.timescale,this._sampleEntryList=r.stsz.entries,this._timeToSampleList=r.stts.timeToSamples,this._sample_duration=r.stts.timeToSamples[0].sampleDelta/r.mp4a.samplerate*1e3,this.tracks.push(this.audioTrack),this._headAnalyzed=!0,this._dispatchEvent(M["default"].ACTOR_AUDIOTRACK_SWITCHED_SUCCESSED)}},{key:"_analyzeMdat",value:function(e,t){e.setData(t,this.audioLoader.sPosition,this.audioLoader.ePosition)}},{key:"_createInitSegment",value:function(e){return this._headAnalyzed?T["default"].initSegment(e):null}},{key:"_remuxAudio",value:function(e,t,i){var a=null;if(this._headAnalyzed&&i&&0!==e.samples.length){t*=e.sampleRate/1e3;var n=T["default"].moof(this._audioSequenceNumber,t,e),r=T["default"].mdat(i);this._audioSequenceNumber++,a=new Uint8Array(n.byteLength+r.byteLength),a.set(n,0),a.set(r,n.byteLength)}return a}},{key:"_getAudioConfig",value:function(e,t){var i=void 0,a=e.audioObjectType,n=e.samplingFrequencyIndex,r=void 0,o=e.channelCount,s=t;if(!(n>Y.length-1))return k["default"].browser.FIREFOX?n>=6?(a=5,i=new Array(4),r=n-3):(a=2,i=new Array(2),r=n):k["default"].os.android?(a=2,i=new Array(2),r=n):(a=5,i=new Array(4),t&&(-1!==t.indexOf("mp4a.40.29")||-1!==t.indexOf("mp4a.40.5"))||!t&&n>=6?r=n-3:((t&&-1!==t.indexOf("mp4a.40.2")&&n>=6&&1===o||!t&&1===o)&&(a=2,i=new Array(2)),r=n)),i[0]=a<<3,i[0]|=(14&n)>>1,i[1]|=(1&n)<<7,i[1]|=o<<3,5===a&&(i[1]|=(14&r)>>1,i[2]=(1&r)<<7,i[2]|=8,i[3]=0),{config:i,codec:"mp4a.40."+a,manifestCodec:s}}},{key:"_reset",value:function(){this.tracks=[],this.audioTrack=new L["default"],this._sampleEntryList=[],this._timeToSampleList=[],this._timeToFragmentList=[],this._audioFragments=[],this._initSegment="",this._headerFragment="",this._timeScale=0,this._audioSequenceNumber=0,this._currentLoadTime=this._currentReadTime=this._baseMediaDecodeTime=0}},{key:"_resetStatus",value:function(){this._headDataReady=!1,this._headAnalyzed=!1,this._hasInit=!1}},{key:"_readData",value:function(e,t){var i=void 0;return this._headDataReady&&this.audioUsing||(i=null),this._hasData(e,t)?(i=this._getDataByTime(e,t),this.tracks[0].samples=this._getDataListByTime(e,t)):i=null,this._currentReadTime=e,E["default"].log("multi-track audio readData()=> mdat data.Length = "+(i?i.byteLength:0)),i}},{key:"_isTimeEnd",value:function(e){var t=this._sample_duration,i=e/1e3*this._timeScale;return Math.floor(i/t)>=this._timeToFragmentList.length-1}},{key:"init",value:function(e){var t=this;this._setFragments(e),this._audioFragments.length>0&&(this._tickTimer=new q["default"](function(){return t._tick()}),this._tickTimer.scheduleRepeated(1))}},{key:"seek",value:function(e){this._seekTime=1e3*e,this._currentReadTime=this._currentLoadTime=this._baseMediaDecodeTime=this._seekTime}},{key:"read",value:function(e){var t={},i=1e3*e;if(this._hasInit){this._baseMediaDecodeTime=this._currentReadTime;var a=this._readData(this._currentReadTime,i),n=new G["default"]("audio");n.origin=H["default"].AMP4,n.bytes=this._remuxAudio(this.tracks[0],this._baseMediaDecodeTime,a),E["default"].log("multi-track read()=> segmentType:media ,startTime:"+this._currentReadTime/1e3+", endTime:"+(this._currentReadTime/1e3+e)+", byteLength:"+(n.bytes?n.bytes.byteLength:0)),n.bytes&&n.bytes.byteLength>0&&(this._currentReadTime+=i,n.duration=i/1e3,n.startTime=this._currentReadTime/1e3),t=n}else{var r=new U["default"]("audio");r.origin=H["default"].AMP4,r.bytes=this._createInitSegment(this.tracks),r.bytes&&(this._hasInit=!0),t=r,E["default"].log("multi-track read()=> segmentType:init , byteLength:"+(t.bytes?t.bytes.byteLength:0))}return t.bytes||(t=null),t}},{key:"reset",value:function(){this._reset(),this._resetStatus(),this.audioLoader.reset(),this._tickTimer&&this._tickTimer.cancel()}},{key:"audioUsing",get:function(){return this._audioFragments.length>0}},{key:"eof",get:function(){return this._isTimeEnd(this._currentReadTime)}},{key:"eod",get:function(){return this._isTimeEnd(this._currentLoadTime)}}]),t}(x["default"]);t["default"]=W},function(e,t,i){function a(){u=function(i){if("object"===(0,l["default"])(t)&&void 0!==e)e.exports=i();else{r=[],n=i,void 0!==(o="function"==typeof n?n.apply(t,r):n)&&(e.exports=o)}}(function(){return function e(t,i,a){function n(o,d){if(!i[o]){if(!t[o]){var l="function"==typeof s&&s;if(!d&&l)return s(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return n(i||e)},c,c.exports,e,t,i,a)}return i[o].exports}for(var r="function"==typeof s&&s,o=0;o<a.length;o++)n(a[o]);return n}({1:[function(e,t,i){function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!==(void 0===i?"undefined":(0,l["default"])(i)))throw new TypeError(i+"must be non-object");for(var n in i)a(i,n)&&(e[n]=i[n])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,i,a,n){if(t.subarray&&e.subarray)return void e.set(t.subarray(i,i+a),n);for(var r=0;r<a;r++)e[n+r]=t[i+r]},flattenChunks:function(e){var t,i,a,n,r,o;for(a=0,t=0,i=e.length;t<i;t++)a+=e[t].length;for(o=new Uint8Array(a),n=0,t=0,i=e.length;t<i;t++)r=e[t],o.set(r,n),n+=r.length;return o}},o={arraySet:function(e,t,i,a,n){for(var r=0;r<a;r++)e[n+r]=t[i+r]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(n)},{}],2:[function(e,t,i){function a(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var i="",a=0;a<t;a++)i+=String.fromCharCode(e[a]);return i}var n=e("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new n.Buf8(256),d=0;d<256;d++)s[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;s[254]=s[254]=1,i.string2buf=function(e){var t,i,a,r,o,s=e.length,d=0;for(r=0;r<s;r++)i=e.charCodeAt(r),55296==(64512&i)&&r+1<s&&56320==(64512&(a=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(a-56320),r++),d+=i<128?1:i<2048?2:i<65536?3:4;for(t=new n.Buf8(d),o=0,r=0;o<d;r++)i=e.charCodeAt(r),55296==(64512&i)&&r+1<s&&56320==(64512&(a=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(a-56320),r++),i<128?t[o++]=i:i<2048?(t[o++]=192|i>>>6,t[o++]=128|63&i):i<65536?(t[o++]=224|i>>>12,t[o++]=128|i>>>6&63,t[o++]=128|63&i):(t[o++]=240|i>>>18,t[o++]=128|i>>>12&63,t[o++]=128|i>>>6&63,t[o++]=128|63&i);return t},i.buf2binstring=function(e){return a(e,e.length)},i.binstring2buf=function(e){for(var t=new n.Buf8(e.length),i=0,a=t.length;i<a;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,n,r,o,d=t||e.length,l=new Array(2*d);for(n=0,i=0;i<d;)if((r=e[i++])<128)l[n++]=r;else if((o=s[r])>4)l[n++]=65533,i+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&i<d;)r=r<<6|63&e[i++],o--;o>1?l[n++]=65533:r<65536?l[n++]=r:(r-=65536,l[n++]=55296|r>>10&1023,l[n++]=56320|1023&r)}return a(l,n)},i.utf8border=function(e,t){var i;for(t=t||e.length,t>e.length&&(t=e.length),i=t-1;i>=0&&128==(192&e[i]);)i--;return i<0?t:0===i?t:i+s[e[i]]>t?i:t}},{"./common":1}],3:[function(e,t,i){function a(e,t,i,a){for(var n=65535&e|0,r=e>>>16&65535|0,o=0;0!==i;){o=i>2e3?2e3:i,i-=o;do{n=n+t[a++]|0,r=r+n|0}while(--o);n%=65521,r%=65521}return n|r<<16|0}t.exports=a},{}],4:[function(e,t,i){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(e,t,i){function a(e,t,i,a){var r=n,o=a+i;e^=-1;for(var s=a;s<o;s++)e=e>>>8^r[255&(e^t[s])];return-1^e}var n=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var a=0;a<8;a++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=a},{}],6:[function(e,t,i){function a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=a},{}],7:[function(e,t,i){t.exports=function(e,t){var i,a,n,r,o,s,d,l,u,c,f,p,h,_,g,m,v,y,b,x,w,T,S,k,A;i=e.state,a=e.next_in,k=e.input,n=a+(e.avail_in-5),r=e.next_out,A=e.output,o=r-(t-e.avail_out),s=r+(e.avail_out-257),d=i.dmax,l=i.wsize,u=i.whave,c=i.wnext,f=i.window,p=i.hold,h=i.bits,_=i.lencode,g=i.distcode,m=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;e:do{h<15&&(p+=k[a++]<<h,h+=8,p+=k[a++]<<h,h+=8),y=_[p&m];t:for(;;){if(b=y>>>24,p>>>=b,h-=b,0===(b=y>>>16&255))A[r++]=65535&y;else{if(!(16&b)){if(0==(64&b)){y=_[(65535&y)+(p&(1<<b)-1)];continue t}if(32&b){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}x=65535&y,b&=15,b&&(h<b&&(p+=k[a++]<<h,h+=8),x+=p&(1<<b)-1,p>>>=b,h-=b),h<15&&(p+=k[a++]<<h,h+=8,p+=k[a++]<<h,h+=8),y=g[p&v];i:for(;;){if(b=y>>>24,p>>>=b,h-=b,!(16&(b=y>>>16&255))){if(0==(64&b)){y=g[(65535&y)+(p&(1<<b)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(w=65535&y,b&=15,h<b&&(p+=k[a++]<<h,(h+=8)<b&&(p+=k[a++]<<h,h+=8)),(w+=p&(1<<b)-1)>d){e.msg="invalid distance too far back",i.mode=30;break e}if(p>>>=b,h-=b,b=r-o,w>b){if((b=w-b)>u&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(T=0,S=f,0===c){if(T+=l-b,b<x){x-=b;do{A[r++]=f[T++]}while(--b);T=r-w,S=A}}else if(c<b){if(T+=l+c-b,(b-=c)<x){x-=b;do{A[r++]=f[T++]}while(--b);if(T=0,c<x){b=c,x-=b;do{A[r++]=f[T++]}while(--b);T=r-w,S=A}}}else if(T+=c-b,b<x){x-=b;do{A[r++]=f[T++]}while(--b);T=r-w,S=A}for(;x>2;)A[r++]=S[T++],A[r++]=S[T++],A[r++]=S[T++],x-=3;x&&(A[r++]=S[T++],x>1&&(A[r++]=S[T++]))}else{T=r-w;do{A[r++]=A[T++],A[r++]=A[T++],A[r++]=A[T++],x-=3}while(x>2);x&&(A[r++]=A[T++],x>1&&(A[r++]=A[T++]))}break}}break}}while(a<n&&r<s);x=h>>3,a-=x,h-=x<<3,p&=(1<<h)-1,e.next_in=a,e.next_out=r,e.avail_in=a<n?n-a+5:5-(a-n),e.avail_out=r<s?s-r+257:257-(r-s),i.hold=p,i.bits=h}},{}],8:[function(e,t,i){function a(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=B,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new v.Buf32(_e),t.distcode=t.distdyn=new v.Buf32(ge),t.sane=1,t.back=-1,q):D}function o(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,r(e)):D}function s(e,t){var i,a;return e&&e.state?(a=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?D:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=i,a.wbits=t,o(e))):D}function d(e,t){var i,a;return e?(a=new n,e.state=a,a.window=null,i=s(e,t),i!==q&&(e.state=null),i):D}function l(e){return d(e,me)}function u(e){if(ve){var t;for(g=new v.Buf32(512),m=new v.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(w(S,e.lens,0,288,g,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;w(k,e.lens,0,32,m,0,e.work,{bits:5}),ve=!1}e.lencode=g,e.lenbits=9,e.distcode=m,e.distbits=5}function c(e,t,i,a){var n,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new v.Buf8(r.wsize)),a>=r.wsize?(v.arraySet(r.window,t,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(n=r.wsize-r.wnext,n>a&&(n=a),v.arraySet(r.window,t,i-a,n,r.wnext),a-=n,a?(v.arraySet(r.window,t,i-a,a,0),r.wnext=a,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}function f(e,t){var i,n,r,o,s,d,l,f,p,h,_,g,m,_e,ge,me,ve,ye,be,xe,we,Te,Se,ke,Ae=0,Ee=new v.Buf8(4),Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return D;i=e.state,i.mode===W&&(i.mode=$),s=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,n=e.input,d=e.avail_in,f=i.hold,p=i.bits,h=d,_=l,Te=q;e:for(;;)switch(i.mode){case B:if(0===i.wrap){i.mode=$;break}for(;p<16;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}if(2&i.wrap&&35615===f){i.check=0,Ee[0]=255&f,Ee[1]=f>>>8&255,i.check=b(i.check,Ee,2,0),f=0,p=0,i.mode=N;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",i.mode=fe;break}if((15&f)!==O){e.msg="unknown compression method",i.mode=fe;break}if(f>>>=4,p-=4,we=8+(15&f),0===i.wbits)i.wbits=we;else if(we>i.wbits){e.msg="invalid window size",i.mode=fe;break}i.dmax=1<<we,e.adler=i.check=1,i.mode=512&f?Y:W,f=0,p=0;break;case N:for(;p<16;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}if(i.flags=f,(255&i.flags)!==O){e.msg="unknown compression method",i.mode=fe;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=fe;break}i.head&&(i.head.text=f>>8&1),512&i.flags&&(Ee[0]=255&f,Ee[1]=f>>>8&255,i.check=b(i.check,Ee,2,0)),f=0,p=0,i.mode=M;case M:for(;p<32;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}i.head&&(i.head.time=f),512&i.flags&&(Ee[0]=255&f,Ee[1]=f>>>8&255,Ee[2]=f>>>16&255,Ee[3]=f>>>24&255,i.check=b(i.check,Ee,4,0)),f=0,p=0,i.mode=V;case V:for(;p<16;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}i.head&&(i.head.xflags=255&f,i.head.os=f>>8),512&i.flags&&(Ee[0]=255&f,Ee[1]=f>>>8&255,i.check=b(i.check,Ee,2,0)),f=0,p=0,i.mode=U;case U:if(1024&i.flags){for(;p<16;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}i.length=f,i.head&&(i.head.extra_len=f),512&i.flags&&(Ee[0]=255&f,Ee[1]=f>>>8&255,i.check=b(i.check,Ee,2,0)),f=0,p=0}else i.head&&(i.head.extra=null);i.mode=j;case j:if(1024&i.flags&&(g=i.length,g>d&&(g=d),g&&(i.head&&(we=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),v.arraySet(i.head.extra,n,o,g,we)),512&i.flags&&(i.check=b(i.check,n,g,o)),d-=g,o+=g,i.length-=g),i.length))break e;i.length=0,i.mode=G;case G:if(2048&i.flags){if(0===d)break e;g=0;do{we=n[o+g++],i.head&&we&&i.length<65536&&(i.head.name+=String.fromCharCode(we))}while(we&&g<d);if(512&i.flags&&(i.check=b(i.check,n,g,o)),d-=g,o+=g,we)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=z;case z:if(4096&i.flags){if(0===d)break e;g=0;do{we=n[o+g++],i.head&&we&&i.length<65536&&(i.head.comment+=String.fromCharCode(we))}while(we&&g<d);if(512&i.flags&&(i.check=b(i.check,n,g,o)),d-=g,o+=g,we)break e}else i.head&&(i.head.comment=null);i.mode=H;case H:if(512&i.flags){for(;p<16;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}if(f!==(65535&i.check)){e.msg="header crc mismatch",i.mode=fe;break}f=0,p=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=W;break;case Y:for(;p<32;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}e.adler=i.check=a(f),f=0,p=0,i.mode=Q;case Q:if(0===i.havedict)return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=d,i.hold=f,i.bits=p,L;e.adler=i.check=1,i.mode=W;case W:if(t===E||t===P)break e;case $:if(i.last){f>>>=7&p,p-=7&p,i.mode=le;break}for(;p<3;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}switch(i.last=1&f,f>>>=1,p-=1,3&f){case 0:i.mode=K;break;case 1:if(u(i),i.mode=ie,t===P){f>>>=2,p-=2;break e}break;case 2:i.mode=Z;break;case 3:e.msg="invalid block type",i.mode=fe}f>>>=2,p-=2;break;case K:for(f>>>=7&p,p-=7&p;p<32;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}if((65535&f)!=(f>>>16^65535)){e.msg="invalid stored block lengths",i.mode=fe;break}if(i.length=65535&f,f=0,p=0,i.mode=J,t===P)break e;case J:i.mode=X;case X:if(g=i.length){if(g>d&&(g=d),g>l&&(g=l),0===g)break e;v.arraySet(r,n,o,g,s),d-=g,o+=g,l-=g,s+=g,i.length-=g;break}i.mode=W;break;case Z:for(;p<14;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}if(i.nlen=257+(31&f),f>>>=5,p-=5,i.ndist=1+(31&f),f>>>=5,p-=5,i.ncode=4+(15&f),f>>>=4,p-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=fe;break}i.have=0,i.mode=ee;case ee:for(;i.have<i.ncode;){for(;p<3;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}i.lens[Pe[i.have++]]=7&f,f>>>=3,p-=3}for(;i.have<19;)i.lens[Pe[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Se={bits:i.lenbits},Te=w(T,i.lens,0,19,i.lencode,0,i.work,Se),i.lenbits=Se.bits,Te){e.msg="invalid code lengths set",i.mode=fe;break}i.have=0,i.mode=te;case te:for(;i.have<i.nlen+i.ndist;){for(;Ae=i.lencode[f&(1<<i.lenbits)-1],ge=Ae>>>24,me=Ae>>>16&255,ve=65535&Ae,!(ge<=p);){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}if(ve<16)f>>>=ge,p-=ge,i.lens[i.have++]=ve;else{if(16===ve){for(ke=ge+2;p<ke;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}if(f>>>=ge,p-=ge,0===i.have){e.msg="invalid bit length repeat",i.mode=fe;break}we=i.lens[i.have-1],g=3+(3&f),f>>>=2,p-=2}else if(17===ve){for(ke=ge+3;p<ke;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}f>>>=ge,p-=ge,we=0,g=3+(7&f),f>>>=3,p-=3}else{for(ke=ge+7;p<ke;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}f>>>=ge,p-=ge,we=0,g=11+(127&f),f>>>=7,p-=7}if(i.have+g>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=fe;break}for(;g--;)i.lens[i.have++]=we}}if(i.mode===fe)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=fe;break}if(i.lenbits=9,Se={bits:i.lenbits},Te=w(S,i.lens,0,i.nlen,i.lencode,0,i.work,Se),i.lenbits=Se.bits,Te){e.msg="invalid literal/lengths set",i.mode=fe;break}if(i.distbits=6,i.distcode=i.distdyn,Se={bits:i.distbits},Te=w(k,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Se),i.distbits=Se.bits,Te){e.msg="invalid distances set",i.mode=fe;break}if(i.mode=ie,t===P)break e;case ie:i.mode=ae;case ae:if(d>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=d,i.hold=f,i.bits=p,x(e,_),s=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,n=e.input,d=e.avail_in,f=i.hold,p=i.bits,i.mode===W&&(i.back=-1);break}for(i.back=0;Ae=i.lencode[f&(1<<i.lenbits)-1],ge=Ae>>>24,me=Ae>>>16&255,ve=65535&Ae,!(ge<=p);){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}if(me&&0==(240&me)){for(ye=ge,be=me,xe=ve;Ae=i.lencode[xe+((f&(1<<ye+be)-1)>>ye)],ge=Ae>>>24,me=Ae>>>16&255,ve=65535&Ae,!(ye+ge<=p);){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}f>>>=ye,p-=ye,i.back+=ye}if(f>>>=ge,p-=ge,i.back+=ge,i.length=ve,0===me){i.mode=de;break}if(32&me){i.back=-1,i.mode=W;break}if(64&me){e.msg="invalid literal/length code",i.mode=fe;break}i.extra=15&me,i.mode=ne;case ne:if(i.extra){for(ke=i.extra;p<ke;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}i.length+=f&(1<<i.extra)-1,f>>>=i.extra,p-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=re;case re:for(;Ae=i.distcode[f&(1<<i.distbits)-1],ge=Ae>>>24,me=Ae>>>16&255,ve=65535&Ae,!(ge<=p);){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}if(0==(240&me)){for(ye=ge,be=me,xe=ve;Ae=i.distcode[xe+((f&(1<<ye+be)-1)>>ye)],ge=Ae>>>24,me=Ae>>>16&255,ve=65535&Ae,!(ye+ge<=p);){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}f>>>=ye,p-=ye,i.back+=ye}if(f>>>=ge,p-=ge,i.back+=ge,64&me){e.msg="invalid distance code",i.mode=fe;break}i.offset=ve,i.extra=15&me,i.mode=oe;case oe:if(i.extra){for(ke=i.extra;p<ke;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}i.offset+=f&(1<<i.extra)-1,f>>>=i.extra,p-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=fe;break}i.mode=se;case se:if(0===l)break e;if(g=_-l,i.offset>g){if((g=i.offset-g)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=fe;break}g>i.wnext?(g-=i.wnext,m=i.wsize-g):m=i.wnext-g,g>i.length&&(g=i.length),_e=i.window}else _e=r,m=s-i.offset,g=i.length;g>l&&(g=l),l-=g,i.length-=g;do{r[s++]=_e[m++]}while(--g);0===i.length&&(i.mode=ae);break;case de:if(0===l)break e;r[s++]=i.length,l--,i.mode=ae;break;case le:if(i.wrap){for(;p<32;){if(0===d)break e;d--,f|=n[o++]<<p,p+=8}if(_-=l,e.total_out+=_,i.total+=_,_&&(e.adler=i.check=i.flags?b(i.check,r,_,s-_):y(i.check,r,_,s-_)),_=l,(i.flags?f:a(f))!==i.check){e.msg="incorrect data check",i.mode=fe;break}f=0,p=0}i.mode=ue;case ue:if(i.wrap&&i.flags){for(;p<32;){if(0===d)break e;d--,f+=n[o++]<<p,p+=8}if(f!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=fe;break}f=0,p=0}i.mode=ce;case ce:Te=I;break e;case fe:Te=C;break e;case pe:return F;case he:default:return D}return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=d,i.hold=f,i.bits=p,(i.wsize||_!==e.avail_out&&i.mode<fe&&(i.mode<le||t!==A))&&c(e,e.output,e.next_out,_-e.avail_out)?(i.mode=pe,F):(h-=e.avail_in,_-=e.avail_out,e.total_in+=h,e.total_out+=_,i.total+=_,i.wrap&&_&&(e.adler=i.check=i.flags?b(i.check,r,_,e.next_out-_):y(i.check,r,_,e.next_out-_)),e.data_type=i.bits+(i.last?64:0)+(i.mode===W?128:0)+(i.mode===ie||i.mode===J?256:0),(0===h&&0===_||t===A)&&Te===q&&(Te=R),Te)}function p(e){if(!e||!e.state)return D;var t=e.state;return t.window&&(t.window=null),e.state=null,q}function h(e,t){var i;return e&&e.state?(i=e.state,0==(2&i.wrap)?D:(i.head=t,t.done=!1,q)):D}function _(e,t){var i,a,n=t.length;return e&&e.state?(i=e.state,0!==i.wrap&&i.mode!==Q?D:i.mode===Q&&(a=1,(a=y(a,t,n,0))!==i.check)?C:c(e,t,n,n)?(i.mode=pe,F):(i.havedict=1,q)):D}var g,m,v=e("../utils/common"),y=e("./adler32"),b=e("./crc32"),x=e("./inffast"),w=e("./inftrees"),T=0,S=1,k=2,A=4,E=5,P=6,q=0,I=1,L=2,D=-2,C=-3,F=-4,R=-5,O=8,B=1,N=2,M=3,V=4,U=5,j=6,G=7,z=8,H=9,Y=10,Q=11,W=12,$=13,K=14,J=15,X=16,Z=17,ee=18,te=19,ie=20,ae=21,ne=22,re=23,oe=24,se=25,de=26,le=27,ue=28,ce=29,fe=30,pe=31,he=32,_e=852,ge=592,me=15,ve=!0;i.inflateReset=o,i.inflateReset2=s,i.inflateResetKeep=r,i.inflateInit=l,i.inflateInit2=d,i.inflate=f,i.inflateEnd=p,i.inflateGetHeader=h,i.inflateSetDictionary=_,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(e,t,i){var a=e("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,d,l,u,c,f){var p,h,_,g,m,v,y,b,x,w=f.bits,T=0,S=0,k=0,A=0,E=0,P=0,q=0,I=0,L=0,D=0,C=null,F=0,R=new a.Buf16(16),O=new a.Buf16(16),B=null,N=0;for(T=0;T<=15;T++)R[T]=0;for(S=0;S<d;S++)R[t[i+S]]++;for(E=w,A=15;A>=1&&0===R[A];A--);if(E>A&&(E=A),0===A)return l[u++]=20971520,l[u++]=20971520,f.bits=1,0;for(k=1;k<A&&0===R[k];k++);for(E<k&&(E=k),I=1,T=1;T<=15;T++)if(I<<=1,(I-=R[T])<0)return-1;if(I>0&&(0===e||1!==A))return-1;for(O[1]=0,T=1;T<15;T++)O[T+1]=O[T]+R[T];for(S=0;S<d;S++)0!==t[i+S]&&(c[O[t[i+S]]++]=S);if(0===e?(C=B=c,v=19):1===e?(C=n,F-=257,B=r,N-=257,v=256):(C=o,B=s,v=-1),D=0,S=0,T=k,m=u,P=E,q=0,_=-1,L=1<<E,g=L-1,1===e&&L>852||2===e&&L>592)return 1;for(;;){y=T-q,c[S]<v?(b=0,x=c[S]):c[S]>v?(b=B[N+c[S]],x=C[F+c[S]]):(b=96,x=0),p=1<<T-q,h=1<<P,k=h;do{h-=p,l[m+(D>>q)+h]=y<<24|b<<16|x|0}while(0!==h);for(p=1<<T-1;D&p;)p>>=1;if(0!==p?(D&=p-1,D+=p):D=0,S++,0==--R[T]){if(T===A)break;T=t[i+c[S]]}if(T>E&&(D&g)!==_){for(0===q&&(q=E),m+=k,P=T-q,I=1<<P;P+q<A&&!((I-=R[P+q])<=0);)P++,I<<=1;if(L+=1<<P,1===e&&L>852||2===e&&L>592)return 1;_=D&g,l[_]=E<<24|P<<16|m-u|0}}return 0!==D&&(l[m+D]=T-q<<24|64<<16|0),f.bits=E,0}},{"../utils/common":1}],10:[function(e,t,i){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(e,t,i){function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=a},{}],"/lib/inflate.js":[function(e,t,i){function a(e){if(!(this instanceof a))return new a(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=o.inflateInit2(this.strm,t.windowBits);if(i!==l.Z_OK)throw new Error(u[i]);this.header=new f,o.inflateGetHeader(this.strm,this.header)}function n(e,t){var i=new a(t);if(i.push(e,!0),i.err)throw i.msg||u[i.err];return i.result}function r(e,t){return t=t||{},t.raw=!0,n(e,t)}var o=e("./zlib/inflate"),s=e("./utils/common"),d=e("./utils/strings"),l=e("./zlib/constants"),u=e("./zlib/messages"),c=e("./zlib/zstream"),f=e("./zlib/gzheader"),p=Object.prototype.toString;a.prototype.push=function(e,t){var i,a,n,r,u,c,f=this.strm,h=this.options.chunkSize,_=this.options.dictionary,g=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?f.input=d.binstring2buf(e):"[object ArrayBuffer]"===p.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(h),f.next_out=0,f.avail_out=h),i=o.inflate(f,l.Z_NO_FLUSH),i===l.Z_NEED_DICT&&_&&(c="string"==typeof _?d.string2buf(_):"[object ArrayBuffer]"===p.call(_)?new Uint8Array(_):_,i=o.inflateSetDictionary(this.strm,c)),i===l.Z_BUF_ERROR&&!0===g&&(i=l.Z_OK,g=!1),i!==l.Z_STREAM_END&&i!==l.Z_OK)return this.onEnd(i),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&i!==l.Z_STREAM_END&&(0!==f.avail_in||a!==l.Z_FINISH&&a!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(n=d.utf8border(f.output,f.next_out),r=f.next_out-n,u=d.buf2string(f.output,n),f.next_out=r,f.avail_out=h-r,r&&s.arraySet(f.output,f.output,n,r,0),this.onData(u)):this.onData(s.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((f.avail_in>0||0===f.avail_out)&&i!==l.Z_STREAM_END);return i===l.Z_STREAM_END&&(a=l.Z_FINISH),a===l.Z_FINISH?(i=o.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===l.Z_OK):a!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),f.avail_out=0,!0)},a.prototype.onData=function(e){this.chunks.push(e)},a.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=a,i.inflate=n,i.inflateRaw=r,i.ungzip=n},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")})}var n,r,o,s,s;Object.defineProperty(t,"__esModule",{value:!0});var d=i(2),l=function(e){return e&&e.__esModule?e:{"default":e}}(d),u=void 0,c=void 0;a.call(window),c=window.pako||u,t["default"]=c},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=function(){function e(){(0,r["default"])(this,e),this.type="audio",this.isAAC=!0,this.duration="",this.timescale="",this.id="",this.width="",this.height="",this.sampleRate="",this.channelCount="",this.manifestCodec="",this.codec="",this.config=[],this.samples=[]}return(0,s["default"])(e,[{key:"$duration",get:function(){return this.duration},set:function(e){this.duration=e}},{key:"$timescale",get:function(){return this.timescale},set:function(e){this.timescale=e}},{key:"$id",get:function(){return this.id},set:function(e){this.id=e}},{key:"$width",get:function(){return this.width},set:function(e){this.width=e}},{key:"$height",get:function(){return this.height},set:function(e){this.height=e}},{key:"$sampleRate",get:function(){return this.sampleRate},set:function(e){this.sampleRate=e}},{key:"$channelCount",get:function(){return this.channelCount},set:function(e){this.channelCount=e}},{key:"$manifestCodec",set:function(e){this.manifestCodec=e}},{key:"$config",set:function(e){this.config=e}},{key:"$samples",set:function(e){this.samples=e}},{key:"$codec",set:function(e){this.codec=e}}]),e}();t["default"]=d},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=function(){function e(t){(0,r["default"])(this,e),this._isComplete=!1,this._order=t.i,this._uri=t.dpl.toString(),this._dataUrl="",this._data=new Uint8Array,this._totalByte=t.b,this._startByte=0,this._endByte=0,this._type=""}return(0,s["default"])(e,[{key:"getData",value:function(e,t){if(this._data){var i=e-this._startByte,a=t-this._startByte;return this._data.subarray(i,a)}return null}},{key:"setData",value:function(e,t,i){if(!(this.hasPartData(t,i)||t>=i)){var a=new Uint8Array(e);if(t<this._startByte&&i>this._endByte||i<this._startByte||t>this.endByte)this._data=null,this._data=new Uint8Array(e.byteLength),this._data.set(a,0),this._startByte=t,this._endByte=i;else if(t<this._startByte&&i>=this._startByte){var n=void 0,r=void 0;r=this._startByte==i?a:a.subarray(0,this._startByte-t),n=new Uint8Array(r.byteLength+this._data.byteLength),n.set(r,0),n.set(this._data,r.byteLength),this._data=n,this._startByte=t}else if(t<=this._endByte&&i>this._endByte){var o=void 0,s=void 0;s=t==this._endByte?a:a.subarray(this._endByte-t),o=new Uint8Array(this._data.byteLength+s.byteLength),o.set(this._data,0),o.set(s,this._data.byteLength),this._data=o,this._endByte=i}this._isComplete=this._endByte==this._totalByte}}},{key:"hasPartData",value:function(e,t){return!(!this._data||0==this._data.byteLength)&&(e>=this._startByte&&t<=this.endByte)}},{key:"getLoadPart",value:function(e,t){return this.hasPartData(e,t)?null:!this._data||0==this._data.length||e<this._startByte&&t>this._endByte||t<this._startByte||e>this._endByte?{sp:e,ep:t}:e<this._startByte&&t>=this._startByte&&t<this._endByte?{sp:e,ep:this._startByte}:e<this._endByte&&t>this._endByte?{sp:this._endByte,ep:t}:null}},{key:"clearData",value:function(){this._data=null,this._startByte=this._endByte=0}},{key:"destory",value:function(){this._order=0,this._uri="",this._dataUrl="",this._isComplete=!1,this._data=null,this._totalByte=0,this.clearData()}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"uri",get:function(){return this._uri},set:function(e){this._uri=e}},{key:"totalByte",get:function(){return this._totalByte},set:function(e){this._totalByte=e}},{key:"isComplete",get:function(){return this._isComplete},set:function(e){this._isComplete=e}},{key:"order",get:function(){return this._order},set:function(e){this._order=e}},{key:"dataUrl",get:function(){return this._dataUrl},set:function(e){this._dataUrl=e}},{key:"size",get:function(){return this._size}},{key:"startByte",get:function(){return this._startByte}},{key:"endByte",get:function(){return this._endByte}},{key:"holdDataLength",get:function(){return this._data.length}}]),e}();t["default"]=d},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(73),r=a(n),o=i(75),s=a(o),d=function(){function e(t){(0,r["default"])(this,e),this._isComplete=!1,this._order=t.i,this._uri=t.dpl.toString(),this._dataUrl="",this._data=new Uint8Array,this._totalByte=t.b,this._startByte=0,this._endByte=0,this._type=""}return(0,s["default"])(e,[{key:"destory",value:function(){this._order=0,this._uri="",this._dataUrl="",this._isComplete=!1,this._data=null,this._totalByte=this._startByte=this._endByte=0}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"uri",get:function(){return this._uri},set:function(e){this._uri=e}},{key:"holdDataLength",get:function(){return this._data.length}},{key:"totalByte",get:function(){return this._totalByte},set:function(e){this._totalByte=e}},{key:"isComplete",get:function(){return this._isComplete},set:function(e){this._isComplete=e}},{key:"order",get:function(){return this._order},set:function(e){this._order=e}},{key:"dataUrl",get:function(){return this._dataUrl},set:function(e){this._dataUrl=e}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"size",get:function(){return this._size}},{key:"startByte",get:function(){return this._startByte}},{key:"endByte",get:function(){return this._endByte}}]),e}();t["default"]=d},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(107),m=a(g),v=i(93),y=a(v),b=i(261),x=a(b),w=i(250),T=a(w),S=i(300),k=a(S),A=i(301),E=a(A),P=function(e){function t(e){(0,s["default"])(this,t);var i=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i._ctx=e||null,i._sPosition=0,i._ePosition=0,i._isLoading=!1,i._currFragment=null,i._netProxy=new x["default"],i._request=null,i._audioDispatcher=null,i._firstLoad=!0,i}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"startLoad",value:function(e,t,i){if(e){this._currFragment=e,this._sPosition=t,this._ePosition=i;var a=this._currFragment.dataUrl;y["default"].log("======= audioLoader startLoad sp->"+t+", ep->"+i+"======="),a?this._startRequest(a,t,i):this._dispatcher(e)}}},{key:"_startRequest",value:function(e,t,i){var a=this;this._isLoading=!0;var n=e+"&start="+t+"&end="+i,r=a._netProxy.makeRequestContext([n],a._netProxy.defaultRetryParameters);r.method="GET",r.callbacks=(0,m["default"])(r.callbacks,{onSuccess:function(e){a._isLoading=!1;var n=e.data,r={};n&&n.byteLength>0?(a._firstLoad=!1,r.fragment=a._currFragment,n.byteLength>i?r.data=n.slice(t,i):r.data=n,a.emit(k["default"].LOADER_DATA_LOAD_SUCCESS,{data:r})):a.emit(k["default"].LOADER_DATA_LOAD_FAIL)},onError:function(){a._isLoading=!1,a.emit(k["default"].LOADER_DATA_LOAD_FAIL)},onTimeout:function(e,t){a._isLoading=!1,a.emit(k["default"].LOADER_DATA_LOAD_FAIL)},onAbort:function(){a._isLoading=!1},onComplete:function(){a._isLoading=!1}},!0),this._request=this._netProxy.request(T["default"].SEGMENT,r)}},{key:"_destroyLoader",value:function(){this._request&&(this.removeAllListeners(k["default"].LOADER_DATA_LOAD_SUCCESS),this.removeAllListeners(k["default"].LOADER_DATA_LOAD_FAIL),this._request.destroy(),this._request=null)}},{key:"_initDispatcher",value:function(e){this._audioDispatcher=new E["default"](this._ctx),this._audioDispatcher.on(k["default"].LOADER_DISPATCHER_SUCCESS,this._onLoaderDispatchSuccess.bind(this)),this._audioDispatcher.on(k["default"].LOADER_DISPATCHER_FAIL,this._onLoaderDispatchFail.bind(this)),this._audioDispatcher.on(k["default"].LOADER_DISPATCHER_EXPIRED,this._onLoaderDispatchExpired.bind(this)),this._audioDispatcher.getRequest(e)}},{key:"_destroyDispatcher",value:function(){this._audioDispatcher&&(this._audioDispatcher.removeAllListeners(k["default"].LOADER_DISPATCHER_SUCCESS),this._audioDispatcher.removeAllListeners(k["default"].LOADER_DISPATCHER_FAIL),this._audioDispatcher.destroy(),this._audioDispatcher=null)}},{key:"_dispatcher",value:function(e){this._audioDispatcher&&this._audioDispatcher.currFragment==this._currFragment&&this._isLoading||(this._audioDispatcher&&this._destroyDispatcher(),this._isLoading=!0,this._initDispatcher(e))}},{key:"_onLoaderDispatchSuccess",value:function(e){null!=this._audioDispatcher&&(e&&e.fragment&&this.startLoad(e.fragment,this._sPosition,this._ePosition),this._dispatchEvent(k["default"].LOADER_DISPATCHER_SUCCESS))}},{key:"_onLoaderDispatchFail",value:function(){this._dispatchEvent(k["default"].LOADER_DISPATCHER_FAIL)}},{key:"_onLoaderDispatchExpired",value:function(){this._dispatchEvent(k["default"].LOADER_DISPATCHER_EXPIRED)}},{key:"_dispatchEvent",value:function(e){this.emit(e)}},{key:"cancelLoad",value:function(){this._isLoading=!1,this._sPosition=this._ePosition=0,this._currFragment=null}},{key:"destroy",value:function(){this._destroyLoader()}},{key:"reset",value:function(){this._sPosition=0,this._ePosition=0,this._isLoading=!1,this._currFragment=null,this._request=null,this._firstLoad=!0}},{key:"hasDataLoading",get:function(){return this._isLoading}},{key:"currFragment",get:function(){return this._currFragment}},{key:"sPosition",get:function(){return this._sPosition}},{key:"ePosition",get:function(){return this._ePosition}}]),t}(_["default"]);t["default"]=P},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={LOADER_DATA_LOAD_SUCCESS:"loader_dataload_success",LOADER_DATA_LOAD_FAIL:"loader_dataload_fail",LOADER_DISPATCHER_SUCCESS:"loader_dispatcher_success",LOADER_DISPATCHER_FAIL:"loader_dispatcher_fail",LOADER_DISPATCHER_EXPIRED:"loader_dispatcher_expired",ACTOR_LOAD_FAIL:"actor_load_fail",ACTOR_DISPATCHED_FAIL:"actor_dispatched_fail",ACTOR_AUDIOTRACK_SWITCHED_SUCCESSED:"actor_audiotrack_switched_successed"}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(261),m=a(g),v=i(250),y=a(v),b=i(300),x=a(b),w=i(107),T=a(w),S=function(e){function t(e){(0,s["default"])(this,t);var i=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return i._ctx=e,i._netProxy=new m["default"],i._fragment=null,i._request=null,i}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"getRequest",value:function(e){var t=this,i=void 0;e.uri&&(i=e.uri),t._fragment=e;var a=t._netProxy.makeRequestContext([i],t._netProxy.defaultRetryParameters);a.method="GET",a.responseType="json",a.callbacks=(0,T["default"])(a.callbacks,{onSuccess:function(e){var i=e.data;i&&i.l?(t._fragment.dataUrl=i.l,t.emit(x["default"].LOADER_DISPATCHER_SUCCESS,{fragment:t._fragment})):t.emit(x["default"].LOADER_DISPATCHER_FAIL)},onError:function(e){if(e&&e.response){var i=e.response;i.code&&"D2006"==i.code?t.emit(x["default"].LOADER_DISPATCHER_EXPIRED):t.emit(x["default"].LOADER_DISPATCHER_FAIL)}else t.emit(x["default"].LOADER_DISPATCHER_FAIL)},onTimeout:function(e,i){t.emit(x["default"].LOADER_DISPATCHER_FAIL)},onAbort:function(){},onComplete:function(){}},!0),t._request=t._netProxy.request(y["default"].DISPATCH,a)}},{key:"destroy",value:function(){this._fragment=null,this._request.destroy()}},{key:"currentFragment",get:function(){return this._fragment}}]),t}(_["default"]);t["default"]=S},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(149),_=a(h),g=i(93),m=a(g),v=i(116),y=a(v),b=i(119),x=(a(b),i(92)),w=a(x),T=i(148),S=a(T),k=i(150),A=a(k),E=i(245),P=a(E),q=i(255),I=a(q),L=i(105),D=a(L),C=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e));return a.TAG="RollStream",a._silenced=!1,a.silenced=i,a._actor=null,a._rollType=null,a._range=new _["default"],a._range.add(0,1/0),a._done=!1,a._offset=0,a._loadstartEvts=[],a._loadstartOpen=!1,a._curFragment=null,a._abortNextFrag=!1,a}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"_sendAdEnded",value:function(){m["default"].log("rollstream, change fragment , ended = "+this._curFragment.idx),this._ctx.emit(w["default"].STATE_CHANGE,{state:"ended"})}},{key:"_changeCurrFrag",value:function(e){m["default"].log("rollstream, change fragment , playing="+(e?e.idx:null)+",eof = "+this._actor.eof+",done="+this.done),e&&(this._curFragment=e,this._ctx.emit(w["default"].STATE_CHANGE,{state:"playing"}))}},{key:"offset",get:function(){return this._offset}},{key:"mediaRanges",get:function(){return this._range}},{key:"playRanges",get:function(){return this._range}},{key:"rollType",get:function(){return this._rollType}},{key:"eof",get:function(){return this._actor&&this._done&&this._actor.eof}},{key:"eod",get:function(){return!!this._actor&&this._actor.eod}},{key:"duration",get:function(){return this._curFragment?this._curFragment.duration:this._actor?this._actor.duration:0}},{key:"silenced",get:function(){return this._silenced},set:function(e){this._silenced=e,this._actor&&(this._actor.silenced=e)}},{key:"needInitSegment",set:function(e){this._actor&&(this._actor.needIS=e)}},{key:"willSendInitSegment",get:function(){return!!this._actor&&this._actor.willSendIS}},{key:"audioInitSegment",get:function(){return this._actor?this._actor.audioInitSegment:null}},{key:"buffer",get:function(){var e={len:0,start:0,end:0};try{if(this._actor){var t=this._actor.buffer;t&&(e=t)}}catch(e){}return e}},{key:"done",get:function(){return this._done}},{key:"currentTime",set:function(e){if(this._currentTime=e,null==this._curFragment)this._curFragment=this._actor.getNextFrag();else{var t=this._curFragment.startTime+this._curFragment.offset,i=this._curFragment.endTime+this._curFragment.offset;e>=t&&e<i||e>=i&&(this._sendAdEnded(),this._changeCurrFrag(this._actor.getNextFrag(this._curFragment.idx)))}},get:function(){return this._curFragment?this._currentTime-this._curFragment.offset:0}}]),(0,c["default"])(t,[{key:"_reset",value:function(){this._rollType=null,this._offset=0}},{key:"push",value:function(e){var t=e.playSourceContent,i=e.playSourceType;t.isContinuousMode=!0,this._filled||this._actor||this._initActor(i),this._rollType=t.rollType,this._filled=!0,this._done=e.done,this._offset=t.offset,this._actor.feed(t)}},{key:"_initActor",value:function(e){var t=this,i=!1;switch(this._manifestType=e,e){case y["default"].HLS:this._actor&&this._actor instanceof P["default"]||(this._actor&&(this._actor.removeAllListeners(),this._actor.destroy()),i=!0,this._actor=new P["default"](this._ctx));break;case y["default"].DASH:this._actor&&this._actor instanceof A["default"]||(this._actor&&(this._actor.removeAllListeners(),this._actor.destroy()),i=!0,this._actor=new A["default"](this._ctx));break;case y["default"].F4V:this._actor&&this._actor instanceof I["default"]||(this._actor&&(this._actor.removeAllListeners(),this._actor.destroy()),i=!0,this._actor=new I["default"](this._ctx))}if(!this._actor)throw new Error(e+" actor init failed!");this._actor.silenced=this._silenced,i&&this._actor&&(this._actor.openOffset=!0,this._actor.ignoreError=!0,this._actor.on("fidxLoadStart",function(e){0==t._loadstartEvts.length&&t._loadstartOpen||t.silenced?t._loadstart(e):t._loadstartEvts.push(e)}),this._actor.on("fidxError",function(e){t._ctx.emit(w["default"].ERROR,{category:D["default"].category.DATA_SOURCE,code:D["default"].code.DATA_AD_ERROR,data:[{gas:e.gas}],severity:D["default"].severity.CRITICAL}),e.gas&&e.gas==t._curFragment.gas&&t._changeCurrFrag(t._actor.getNextFrag(t._curFragment.idx))}))}},{key:"seek",value:function(e){this._start=e,this._actor&&this._actor.seek(this._start)}},{key:"read",value:function(){return this._actor?this._actor.read():null}},{key:"getSegmentByPTS",value:function(e){return this._actor?this._actor.getSegmentByPTS(e):null}},{key:"refreshFrags",value:function(){this._actor&&(this._actor.refreshFrags(),this._abortNextFrag&&(this._changeCurrFrag(this._actor.getNextFrag(this._curFragment.idx)),this._abortNextFrag=!1))}},{key:"openLoadStart",value:function(){for(var e=0;e<this._loadstartEvts.length;e++)e>0&&this._loadstart(this._loadstartEvts[e]);this._loadstartEvts=[],this._loadstartOpen=!0}},{key:"_loadstart",value:function(e){this._ctx.emit(w["default"].STATE_CHANGE,{state:"loadstart",gas:e})}},{key:"getCurrentADGas",value:function(){return null==this._curFragment&&(this.currentTime=0),this._curFragment.gas}},{key:"abortCurrentADGas",value:function(){var e=null;return this._actor&&this._curFragment&&(e=this._actor.abortCurrentADGas(this._curFragment.idx),m["default"].log("=rollstream, abortCurrentADGas done, current = ",this._curFragment.idx,",next = ",e?e.idx:"ended"),this._sendAdEnded(),this._changeCurrFrag(e),this.done||null!=e||(this._abortNextFrag=!0)),null==e&&this.done}}]),t}(S["default"]);t["default"]=C},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(304),r=a(n),o=i(69),s=a(o),d=i(132),l=a(d),u=i(73),c=a(u),f=i(74),p=a(f),h=i(75),_=a(h),g=i(79),m=a(g),v=i(88),y=a(v),b=i(93),x=a(b),w=i(302),T=a(w),S=i(119),k=a(S),A=i(147),E=a(A),P=i(293),q=a(P),I=i(114),L=a(I),D=0,C={STAGE_BEGIN:"stage_event_"+D++,STAGE_END:"stage_event_"+D++,PLAYING_STREAM_CHANGED:"stage_event_"+D++,PLAYING_STREAM_PROGRESS:"stage_event_"+D++,EOD:"stage_event_"+D++},F=function(e){function t(e){(0,c["default"])(this,t);var i=(0,p["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this));return i._ctx=e,i._set=new r["default"],i._playingStream=null,i._playingStreamBufferEnd=0,i}return(0,m["default"])(t,e),(0,_["default"])(t,[{key:"playingStream",get:function(){return this._playingStream},set:function(e){this.has(e)?(x["default"].log("stage change playing stream to "+e.TAG),this._playingStream=e,this.emit(C.PLAYING_STREAM_CHANGED,e)):x["default"].warn("playing stream change failed~")}},{key:"isRolling",get:function(){var e=this._playingStream,t=!!e;return t&&(t=e===this.rollStream),t}},{key:"rollStream",get:function(){var e=null,t=!0,i=!1,a=void 0;try{for(var n,r=(0,l["default"])(this.values());!(t=(n=r.next()).done);t=!0){var o=n.value;if(o instanceof T["default"]){e=o;break}}}catch(e){i=!0,a=e}finally{try{!t&&r["return"]&&r["return"]()}finally{if(i)throw a}}return e}},{key:"movieStream",get:function(){var e=null,t=!0,i=!1,a=void 0;try{for(var n,r=(0,l["default"])(this.values());!(t=(n=r.next()).done);t=!0){var o=n.value;if(o instanceof E["default"]){e=o;break}}}catch(e){i=!0,a=e}finally{try{!t&&r["return"]&&r["return"]()}finally{if(i)throw a}}return e}},{key:"matStream",get:function(){var e=null,t=!0,i=!1,a=void 0;try{for(var n,r=(0,l["default"])(this.values());!(t=(n=r.next()).done);t=!0){var o=n.value;if(o instanceof q["default"]){e=o;break}}}catch(e){i=!0,a=e}finally{try{!t&&r["return"]&&r["return"]()}finally{if(i)throw a}}return e}},{key:"size",get:function(){return this._set.size}}]),(0,_["default"])(t,[{key:"_startSchedules",value:function(){var e=this;this._destroySchedules(),this._secClockTimer=new L["default"](function(){return e._doSecClockJob()}),this._secClockTimer.scheduleRepeated(1)}},{key:"_destroySchedules",value:function(){this._secClockTimer&&(this._secClockTimer.cancel(),this._secClockTimer=null)}},{key:"add",value:function(e){var t=!1,i=!1;if(e instanceof T["default"]){if(t=!0,this.rollStream)return x["default"].error("stage should has only one roll stream"),this;if(e.rollType===k["default"].PRE_ROLL&&this.movieStream)return x["default"].error("stage now has a movie stream, but add a pre roll"),this}return e instanceof E["default"]&&(i=!0,this.movieStream)?(x["default"].error("stage should has just a movie stream"),this):e instanceof q["default"]&&this.matStream?(x["default"].error("stage should has just a mat stream"),this):(this._set.add(e),1===this.size&&(t||i)&&(this.playingStream=e,this.emit(C.STAGE_BEGIN),this._startSchedules()),this)}},{key:"clear",value:function(){this._playingStream=null,this._set.clear()}},{key:"delete",value:function(e){return this._set["delete"](e)}},{key:"forEach",value:function(e,t){t?this._set.forEach(e,t):this._set.forEach(e)}},{key:"has",value:function(e){return this._set.has(e)}},{key:"keys",value:function(){return this._set.keys()}},{key:"values",value:function(){return this._set.values()}},{key:"entries",value:function(){return this._set.entries()}},{key:"endOfPlayingStream",value:function(){this.tryToSwitchStream(!0)}},{key:"tryToSwitchStream",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._playingStream;if(t){if(t instanceof T["default"]){if(e){var i=t.rollType;if(i===k["default"].PRE_ROLL){var a=this.movieStream;a&&(this.playingStream=a)}else if(i===k["default"].MID_ROLL){var n=this.movieStream;n&&(this.playingStream=n)}else i===k["default"].POST_ROLL&&this.emit(C.STAGE_END);this["delete"](t),t.destroy(),t=null}}else{var r=this.rollStream;if(e)r&&r.rollType===k["default"].POST_ROLL||this.emit(C.STAGE_END);else if(r&&r.rollType===k["default"].MID_ROLL){var o=r.offset,s=t.currentTime;if(s>=o){this.playingStream=r;var d=s+.1;t.needInitSegment=!0,t.range(d),t.seek(d)}}}}}},{key:"_doSecClockJob",value:function(){var e=this._playingStream;if(e){!e.hasNoticeEOD&&e.eod&&e===this.movieStream&&(e.hasNoticeEOD=!0,this.emit(C.EOD));var t=e.buffer.end;t!==this._playingStreamBufferEnd&&(this._playingStreamBufferEnd=t,this.emit(C.PLAYING_STREAM_PROGRESS))}}}]),t}(y["default"]);F.Events=C,t["default"]=F},function(e,t,i){e.exports={"default":i(305),__esModule:!0}},function(e,t,i){i(66),i(5),i(49),i(306),i(313),i(316),i(318),e.exports=i(13).Set},function(e,t,i){var a=i(307),n=i(308);e.exports=i(309)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return a.def(n(this,"Set"),e=0===e?0:e,e)}},a)},function(e,t,i){var a=i(17).f,n=i(30),r=i(281),o=i(14),s=i(271),d=i(272),l=i(9),u=i(52),c=i(282),f=i(21),p=i(57).fastKey,h=i(308),_=f?"_s":"size",g=function(e,t){var i,a=p(t);if("F"!==a)return e._i[a];for(i=e._f;i;i=i.n)if(i.k==t)return i};e.exports={getConstructor:function(e,t,i,l){var u=e(function(e,a){s(e,u,t,"_i"),e._t=t,e._i=n(null),e._f=void 0,e._l=void 0,e[_]=0,void 0!=a&&d(a,i,e[l],e)});return r(u.prototype,{clear:function(){for(var e=h(this,t),i=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete i[a.i];e._f=e._l=void 0,e[_]=0},"delete":function(e){var i=h(this,t),a=g(i,e);if(a){var n=a.n,r=a.p;delete i._i[a.i],a.r=!0,r&&(r.n=n),n&&(n.p=r),i._f==a&&(i._f=n),i._l==a&&(i._l=r),i[_]--}return!!a},forEach:function(e){h(this,t);for(var i,a=o(e,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(a(i.v,i.k,this);i&&i.r;)i=i.p},has:function(e){return!!g(h(this,t),e)}}),f&&a(u.prototype,"size",{get:function(){return h(this,t)[_]}}),u},def:function(e,t,i){var a,n,r=g(e,t);return r?r.v=i:(e._l=r={i:n=p(t,!0),k:t,v:i,p:a=e._l,n:void 0,r:!1},e._f||(e._f=r),a&&(a.n=r),e[_]++,"F"!==n&&(e._i[n]=r)),e},getEntry:g,setStrong:function(e,t,i){l(e,t,function(e,i){this._t=h(e,t),this._k=i,this._l=void 0},function(){for(var e=this,t=e._k,i=e._l;i&&i.r;)i=i.p;return e._t&&(e._l=i=i?i.n:e._t._f)?"keys"==t?u(0,i.k):"values"==t?u(0,i.v):u(0,[i.k,i.v]):(e._t=void 0,u(1))},i?"entries":"values",!i,!0),c(t)}}},function(e,t,i){var a=i(19);e.exports=function(e,t){if(!a(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,i){var a=i(12),n=i(11),r=i(57),o=i(22),s=i(16),d=i(281),l=i(272),u=i(271),c=i(19),f=i(45),p=i(17).f,h=i(310)(0),_=i(21);e.exports=function(e,t,i,g,m,v){var y=a[e],b=y,x=m?"set":"add",w=b&&b.prototype,T={};return _&&"function"==typeof b&&(v||w.forEach&&!o(function(){(new b).entries().next()}))?(b=t(function(t,i){u(t,b,e,"_c"),t._c=new y,void 0!=i&&l(i,m,t[x],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!v||"clear"!=e)&&s(b.prototype,e,function(i,a){if(u(this,b,e),!t&&v&&!c(i))return"get"==e&&void 0;var n=this._c[e](0===i?0:i,a);return t?this:n})}),v||p(b.prototype,"size",{get:function(){return this._c.size}})):(b=g.getConstructor(t,e,m,x),d(b.prototype,i),r.NEED=!0),f(b,e),T[e]=b,n(n.G+n.W+n.F,T),v||g.setStrong(b,e,m),b}},function(e,t,i){var a=i(14),n=i(35),r=i(48),o=i(38),s=i(311);e.exports=function(e,t){var i=1==e,d=2==e,l=3==e,u=4==e,c=6==e,f=5==e||c,p=t||s;return function(t,s,h){for(var _,g,m=r(t),v=n(m),y=a(s,h,3),b=o(v.length),x=0,w=i?p(t,b):d?p(t,0):void 0;b>x;x++)if((f||x in v)&&(_=v[x],g=y(_,x,m),e))if(i)w[x]=g;else if(g)switch(e){case 3:return!0;case 5:return _;case 6:return x;case 2:w.push(_)}else if(u)return!1;return c?-1:l||u?u:w}}},function(e,t,i){var a=i(312);e.exports=function(e,t){return new(a(e))(t)}},function(e,t,i){var a=i(19),n=i(62),r=i(46)("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!n(t.prototype)||(t=void 0),a(t)&&null===(t=t[r])&&(t=void 0)),void 0===t?Array:t}},function(e,t,i){var a=i(11);a(a.P+a.R,"Set",{toJSON:i(314)("Set")})},function(e,t,i){var a=i(102),n=i(315);e.exports=function(e){return function(){if(a(this)!=e)throw TypeError(e+"#toJSON isn't generic");return n(this)}}},function(e,t,i){var a=i(272);e.exports=function(e,t){var i=[];return a(e,!1,i.push,i,t),i}},function(e,t,i){i(317)("Set")},function(e,t,i){var a=i(11);e.exports=function(e){a(a.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,i){i(319)("Set")},function(e,t,i){var a=i(11),n=i(15),r=i(14),o=i(272);e.exports=function(e){a(a.S,e,{from:function(e){var t,i,a,s,d=arguments[1];return n(this),t=void 0!==d,t&&n(d),void 0==e?new this:(i=[],t?(a=0,s=r(d,arguments[2],2),o(e,!1,function(e){i.push(s(e,a++))})):o(e,!1,i.push,i),new this(i))}})}},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(321),m=a(g),v=i(323),y=a(v),b=i(324),x=a(b),w=i(325),T=a(w),S=i(326),k=a(S),A=i(327),E=a(A),P=i(92),q=a(P),I=i(114),L=a(I),D=i(93),C=a(D),F=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));return a.ctx=e,a._config={},a._emit=a.emit,a.emit=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return this._emit.apply(this,[e,e].concat(i))},a._g=new k["default"](a,i),a._e=new T["default"](a,i),a._b=new x["default"](a,i),a._v=new m["default"](a,i),a._m=new y["default"](a,i),a._f=new E["default"](a,i),a._variantSwitching=!1,a._loop=!1,a._idleTimer=new L["default"](function(){return a._checkIdle()}),a}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"loop",get:function(){return this._loop},set:function(e){this._loop=e}},{key:"error",get:function(){return this._v.error}},{key:"paused",get:function(){return this._v.paused}},{key:"updating",get:function(){return this._b.updating}},{key:"videoBufferUpdating",get:function(){return this._b.videoBufferUpdating}},{key:"audioBufferUpdating",get:function(){return this._b.audioBufferUpdating}},{key:"sourceBuffersCreated",get:function(){return this._b.sourceBuffersCreated}},{key:"hasVideoBuffer",get:function(){return this._b.hasVideoBuffer}},{key:"hasAudioBuffer",get:function(){return this._b.hasAudioBuffer}},{key:"seeking",get:function(){return this._v.seeking}},{key:"playHeadTime",get:function(){return this._v.playHeadTime}},{key:"currentTime",get:function(){return this._v.currentTime},set:function(e){this._v.currentTime=parseFloat(e)}},{key:"duration",get:function(){return this._m.duration},set:function(e){var t=this;e===t.duration||t.updating||"open"!==t._m.readyState||(t._m.duration=e)}},{key:"dataDuration",get:function(){return this._duration||0},set:function(e){this._duration=e}},{key:"buffered",get:function(){return this._v.buffered}},{key:"videoBuffered",get:function(){var e=null,t=this._b.videoSourceBuffer;return t&&(e=t.buffered),e}},{key:"audioBuffered",get:function(){var e=null,t=this._b.audioSourceBuffer;return t&&(e=t.buffered),e}},{key:"currentTimeRange",get:function(){for(var e=null,t=this._v.buffered,i=this.currentTime,a=0;a<t.length;a++){var n=t.start(a),r=t.end(a);if(n<=i&&i<r){e={start:n,end:r};break}}return e}},{key:"variantSwitching",get:function(){return this._variantSwitching},set:function(e){this._variantSwitching=e}},{key:"appendWindowStart",get:function(){return this._b.appendWindowStart},set:function(e){this._b.appendWindowStart=e}},{key:"appendWindowEnd",get:function(){return this._b.appendWindowEnd},set:function(e){this._b.appendWindowEnd=e}},{key:"hasOperateBufferData",get:function(){return this._b.hasOperateBufferData}},{key:"drmInfo",set:function(e){this._e.setDrmInfo(e)}},{key:"isEndOfStream",get:function(){return"ended"===this._m.readyState}},{key:"readyState",get:function(){return this._v.readyState}},{key:"playbackRate",get:function(){return this._v.playbackRate}},{key:"playbackQuality",get:function(){return this._v.playbackQuality}}],[{key:"probeSupport",value:function(){return T["default"].probeSupport().then(function(e){return{media:y["default"].probeSupport(),drm:e}})}}]),(0,c["default"])(t,[{key:"configure",value:function(e){this._config=e}},{key:"reset",value:function(){C["default"].log("media reset"),this.abort(),this._idleTimer.schedule(0),this._g.reset(),this._e.reset(),this._b.reset(),this._v.reset(),this._m.reset(),this._f.reset()}},{key:"pause",value:function(){this._v.pause()}},{key:"appendBuffer",value:function(e,t){this.emit(q["default"].BUFFER_APPENDING,e,t)}},{key:"flushBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.emit(q["default"].BUFFER_FLUSHING,e,t,i)}},{key:"endOfStream",value:function(){return this.updating&&this.abort(),this._m.endOfStream()}},{key:"abort",value:function(){this._b.abort()}},{key:"withinBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this._b.withinBuffer(e,t,i)}},{key:"clearOperateBuffers",value:function(e){return this._b.clearOperateBuffers(e)}},{key:"bufferInfo",value:function(e,t){return this._b.bufferInfo(e,this.ctx.config.maxBufferHole,t)}},{key:"startReportFPS",value:function(){this._f.startReportFPS()}},{key:"stopReportFPS",value:function(){this._f.stopReportFPS()}},{key:"destroy",value:function(){this._idleTimer.cancel(),this._b.destroy(),this._v.destroy(),this._m.destroy(),this._idleTimer=this._b=this._v=this._m=null}},{key:"_checkIdle",value:function(){this.ctx.error||(this.emit(q["default"].MEDIA_IDLE),this._idleTimer.schedule(.2))}}]),t}(_["default"]);t["default"]=F},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(322),_=a(h),g=i(92),m=a(g),v=i(93),y=a(v),b=i(112),x=a(b),w=i(105),T=a(w),S=i(108),k=a(S),A=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e,m["default"].MSE_ATTACHING,m["default"].MSE_ATTACHED,m["default"].BUFFER_APPENDING,m["default"].BUFFER_APPENDED,m["default"].BUFFER_FLUSHING,m["default"].BUFFER_FLUSHED,m["default"].MEDIA_IDLE));return a._eventManager=new x["default"],a._video=i,a._playheadTime=a.currentTime,a._bind(),a}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"seeking",get:function(){return this._video.seeking}},{key:"currentTime",get:function(){return this._video.currentTime},set:function(e){var t=this.ctx,i=this.readyState;if(k["default"].browser.SAFARI){var a=t.config.safariMinStartTime;e<a&&(e=a)}this._playheadTime=e,i>0&&(this._video.currentTime=e)}},{key:"playHeadTime",get:function(){return this._playheadTime}},{key:"duration",get:function(){return this._video.duration}},{key:"buffered",get:function(){return this._video.buffered}},{key:"error",get:function(){return this._video.error}},{key:"readyState",get:function(){return this._video.readyState}},{key:"paused",get:function(){return this._video.paused}},{key:"ended",get:function(){return this._video.ended}},{key:"playbackRate",get:function(){var e=this._video.playbackRate;return"number"!=typeof e&&(e=1),e}},{key:"playbackQuality",get:function(){var e=this._video,t="function"==typeof e.getVideoPlaybackQuality,i=0,a=0,n=0;if(t){var r=e.getVideoPlaybackQuality();a=r.totalVideoFrames,n=r.droppedVideoFrames,i=a}else{var o=e.webkitDecodedFrameCount,s=e.webkitDroppedFrameCount;void 0!==o&&void 0!==s&&(a=o,n=s,i=a)}return{totalVideoFrames:i,decodedVideoFrames:a,droppedVideoFrames:n}}}]),(0,c["default"])(t,[{key:"destroy",value:function(){this._unbind(),this.reset(),this._video=null}},{key:"reset",value:function(){}},{key:"pause",value:function(){this._video.pause()}},{key:"onMediaIdle",value:function(){}},{key:"onMSEAttaching",value:function(e){this._playheadTime=0,this._video.load(),this._video.src=URL.createObjectURL(e)}},{key:"onMSEAttached",value:function(){URL.revokeObjectURL(this._video.src)}},{key:"onBufferFlushing",value:function(){}},{key:"onBufferFlushed",value:function(){}},{key:"onBufferAppending",value:function(){}},{key:"onBufferAppended",value:function(){}},{key:"_bind",value:function(){var e=this._video;this._eventManager.on(e,"error",this._onError.bind(this)),this._eventManager.on(e,"encrypted",this._onEncrypted.bind(this)),this._eventManager.on(e,"canplay",this._onCanplay.bind(this)),this._eventManager.on(e,"loadedmetadata",this._onLoadedMetadata.bind(this)),this._eventManager.on(e,"playing",this._onPlaying.bind(this)),this._eventManager.on(e,"waiting",this._onWaiting.bind(this)),this._eventManager.on(e,"pause",this._onPause.bind(this)),this._eventManager.on(e,"ended",this._onEnded.bind(this)),this._eventManager.on(e,"timeupdate",this._onTimeUpdate.bind(this)),this._eventManager.on(e,"seeking",this._onSeeking.bind(this)),this._eventManager.on(e,"seeked",this._onSeeked.bind(this))}},{key:"_unbind",value:function(){this._eventManager.removeAll()}},{key:"_onError",value:function(){var e=this.ctx,t=this._video;if(t.error){var i=t.error.code,a=t.error.msExtendedCode,n=t.error.message;switch(i){case 1:break;case 2:case 3:case 4:a&&(a<0&&(a+=Math.pow(2,32)),a=a.toString(16)),y["default"].error("video error, code("+i+"), message("+n+"), extended("+a+")"),e._emitError(new T["default"](T["default"].severity.CRITICAL,T["default"].category.MEDIA,T["default"].code.MEDIA_VIDEO_ERROR,i,n,a))}}}},{key:"_onTimeUpdate",value:function(){var e=this.readyState;if(!(this.paused||e<=1)){var t=this.media,i=this.currentTime,a=this._video,n=this,r=t.appendWindowEnd;this._playheadTime=i,i>0&&i>=r&&!this.seeking?(a.addEventListener("pause",function e(){a.removeEventListener("pause",e,!1),n._noticeStreamStop("timer")},!1),this.pause()):e>=3&&this._onPlaying({_isSimulating:!0}),t.emit(m["default"].STATE_CHANGE,{state:"timeupdate"})}}},{key:"_onLoadedMetadata",value:function(){var e=this.media;this.readyState,this.currentTime;e.emit(m["default"].STATE_CHANGE,{state:"loadedmetadata"})}},{key:"_onCanplay",value:function(){this.media.emit(m["default"].STATE_CHANGE,{state:"canplay"})}},{key:"_onSeeking",value:function(){var e=this.media;this._playing=!1,this._playheadTime=this._video.currentTime,e.emit(m["default"].STATE_CHANGE,{state:"seeking"})}},{key:"_onSeeked",value:function(){this.media.emit(m["default"].STATE_CHANGE,{state:"seeked"})}},{key:"_onPause",value:function(){var e=this.media;this._playing=!1,e.emit(m["default"].STATE_CHANGE,{state:"pause"})}},{key:"_onEnded",value:function(){var e=this.media;e.emit(m["default"].STATE_CHANGE,{state:"beforeended"}),e.emit(m["default"].STATE_CHANGE,{state:"ended"}),e.emit(m["default"].STATE_CHANGE,{state:"afterended"})}},{key:"_onPlaying",value:function(e){var t=this.media;!this._playing&&(!e._isSimulating&&this.readyState>1||e._isSimulating)&&(this._playing=!0,t.emit(m["default"].STATE_CHANGE,{state:"playing"}))}},{key:"_onWaiting",value:function(){var e=this.media;this._playing=!1,e.emit(m["default"].STATE_CHANGE,{state:"waiting"})}},{key:"_onEncrypted",value:function(e){this.media.emit(m["default"].STREAM_ENCRYPTED,e)}},{key:"_noticeStreamStop",value:function(e){y["default"].log("stream stop, by the "+e),this._onEnded()}}]),t}(_["default"]);t["default"]=A},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(88),_=a(h),g=i(92),m=(a(g),i(93)),v=a(m),y=function(e){function t(e){(0,s["default"])(this,t);var i=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this));i.ctx=e.ctx,i.media=e;for(var a=arguments.length,n=Array(a>1?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];return i.handledEvents=n,i.injectListeners(),i}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"destroy",value:function(){this.unInjectListeners()}},{key:"injectListeners",value:function(){var e=this;this.handledEvents.forEach(function(t){if(void 0===t)throw new Error("Event type "+t+" in this "+e.constructor.name+" class @super");e.media.on(t,e._onEvent.bind(e))},this)}},{key:"unInjectListeners",value:function(){var e=this;this.handledEvents.forEach(function(t){e.media.off(t,e._onEvent)},this)}},{key:"_onEvent",value:function(e){var t=e.replace(/^qvs/gi,"on");if("function"!=typeof this[t])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+t+")");try{for(var i,a=arguments.length,n=Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];(i=this[t].bind(this)).call.apply(i,[this].concat(n))}catch(e){v["default"].error(e.stack?e.stack:e)}}}]),t}(_["default"]);t["default"]=y},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(322),_=a(h),g=i(92),m=a(g),v=i(93),y=a(v),b=i(112),x=a(b),w=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e));return a._video=i,a._eventManager=new x["default"],a}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"readyState",get:function(){return this.mse?this.mse.readyState:""}},{key:"duration",get:function(){return this.mse?this.mse.duration:0},set:function(e){this.mse.duration=e}},{key:"sourceBuffers",get:function(){return this.mse?this.mse.sourceBuffers:null}}],[{key:"probeSupport",value:function(){var e={};return['video/mp4; codecs="avc1.42E01E"','video/mp4; codecs="avc3.42E01E"','video/mp4; codecs="hev1.1.6.L93.90"','video/mp4; codecs="hvc1.1.6.L93.90"','video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084"','video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084"','video/mp4; codecs="vp9"','video/mp4; codecs="vp09.00.10.08"','audio/mp4; codecs="mp4a.40.2"','audio/mp4; codecs="ac-3"','audio/mp4; codecs="ec-3"','audio/mp4; codecs="opus"','audio/mp4; codecs="flac"','video/webm; codecs="vp8"','video/webm; codecs="vp9"','video/webm; codecs="vp09.00.10.08"','audio/webm; codecs="vorbis"','audio/webm; codecs="opus"','video/mp2t; codecs="avc1.42E01E"','video/mp2t; codecs="avc3.42E01E"','video/mp2t; codecs="hvc1.1.6.L93.90"','video/mp2t; codecs="mp4a.40.2"','video/mp2t; codecs="ac-3"','video/mp2t; codecs="ec-3"',"text/vtt",'application/mp4; codecs="wvtt"',"application/ttml+xml",'application/mp4; codecs="stpp"'].forEach(function(t){try{e[t]=MediaSource.isTypeSupported(t);var i=t.split(";")[0];e[i]=e[i]||e[t]}catch(e){}}),e}}]),(0,c["default"])(t,[{key:"reset",value:function(){this.detachMediaElement(),this._unbind(),this._createMediaSource(),this._bind(),this.attachMediaElement()}},{key:"destroy",value:function(){this._unbind(),this._eventManager.destroy(),this._eventManager=null,this._video=null,this.mse=null}},{key:"endOfStream",value:function(){var e=(this.media,this.mse);return"open"===e.readyState?(y["default"].debug("end of stream!"),e.endOfStream(),!0):(y["default"].debug("end of stream, but mediaSource readyState is "+e.readyState+"!"),!1)}},{key:"attachMediaElement",value:function(){var e=this.media,t=this.mse;e.emit(m["default"].MSE_ATTACHING,t)}},{key:"detachMediaElement",value:function(){var e=this.media,t=this.mse;e.emit(m["default"].MSE_DETACHING,t)}},{key:"_createMediaSource",value:function(){this.mse=new MediaSource}},{key:"_createSourceBuffers",value:function(){var e=this.media,t=this.mse,i=[];if(i.push("avc1.64001f"),i.push("mp4a.40.5"),"open"===t.readyState){if(0===t.sourceBuffers.length){var a=t.addSourceBuffer("video/mp4;codecs=avc1.64001f"),n=t.addSourceBuffer("video/mp4;codecs=mp4a.40.5");e.emit(m["default"].BUFFER_CREATED,{videoSourceBuffer:a,audioSourceBuffer:n})}}else y["default"].error("mse create buffers failure, readyState: "+t.readyState)}},{key:"_removeSourceBuffers",value:function(){for(var e=(this.media,this.mse),t=e.sourceBuffers,i=0;i<t.length;i++)e.removeSourceBuffer(t[i])}},{key:"_bind",value:function(){var e=this.mse;this._eventManager.on(e,"error",this._onError.bind(this)),this._eventManager.on(e,"opened",this._onOpened.bind(this)),this._eventManager.on(e,"closed",this._onClosed.bind(this)),this._eventManager.on(e,"sourceopen",this._onSourceOpened.bind(this)),this._eventManager.on(e,"sourceended",this._onSourceEnded.bind(this))}},{key:"_unbind",value:function(){this._eventManager.removeAll()}},{key:"_onError",value:function(){}},{key:"_onOpened",value:function(){}},{key:"_onClosed",value:function(){this.media,this.mse}},{key:"_onSourceOpened",value:function(){var e=this.media,t=this.mse;t.sourceBuffers&&t.sourceBuffers.length>0||(y["default"].log("media source opened"),e.emit(m["default"].MSE_ATTACHED,t),t.removeEventListener("sourceopen",this._onSourceOpened),this._createSourceBuffers())}},{key:"_onSourceEnded",value:function(){}}]),t}(_["default"]);t["default"]=w},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(74),l=a(d),u=i(75),c=a(u),f=i(79),p=a(f),h=i(322),_=a(h),g=i(92),m=a(g),v=i(93),y=a(v),b=i(244),x=(a(b),i(112)),w=a(x),T=i(105),S=a(T),k=i(114),A=a(k),E=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,l["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e,m["default"].BUFFER_APPENDING,m["default"].BUFFER_FLUSHING,m["default"].BUFFER_CREATED,m["default"].MSE_DETACHING));return a._video=i,a._eventManager=new w["default"],a._sourceBuffersCreated=!1,a.videoSourceBuffer=null,a.audioSourceBuffer=null,a._videoAddBufs=[],a._audioAddBufs=[],a._videoDelBufs=[],a._audioDelBufs=[],a._sbUpdateType="",a._appendWindowStart=0,a._appendWindowEnd=Number.POSITIVE_INFINITY,a._appendTimer=new A["default"](function(){return a._checkAppend()}),a}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"updating",get:function(){return this.audioBufferUpdating||this.videoBufferUpdating}},{key:"videoBufferUpdating",get:function(){var e=this.videoSourceBuffer;return!!e&&e.updating}},{key:"audioBufferUpdating",get:function(){var e=this.audioSourceBuffer;return!!e&&e.updating}},{key:"updatingType",get:function(){var e=null;switch(this._sbUpdateType){case"+":e="append";break;case"-":e="flush"}return e}},{key:"sourceBuffersCreated",get:function(){return this._sourceBuffersCreated}},{key:"hasVideoBuffer",get:function(){return!!this.videoSourceBuffer}},{key:"hasAudioBuffer",get:function(){return!!this.audioSourceBuffer}},{key:"empty",get:function(){var e=this.videoSourceBuffer,t=this.audioSourceBuffer;return(!e||e&&0===e.buffered.length)&&(!t||t&&0===t.buffered.length)}},{key:"appendWindowEnd",get:function(){return this._appendWindowEnd},set:function(e){this._appendWindowEnd=e}},{key:"appendWindowStart",get:function(){return this._appendWindowStart},set:function(e){this._appendWindowStart=e}},{key:"hasOperateBufferData",get:function(){var e=!1;return this._videoAddBufs&&this._videoAddBufs.length>0?e=!0:this._audioAddBufs&&this._audioAddBufs.length>0?e=!0:this._videoDelBufs&&this._videoDelBufs.length>0?e=!0:this._audioDelBufs&&this._audioDelBufs.length>0&&(e=!0),e}}]),(0,c["default"])(t,[{key:"reset",value:function(){[this._videoAddBufs,this._videoDelBufs,this._audioAddBufs,this._audioDelBufs].forEach(function(e){e.length>0&&e.splice(0,e.length)}),this._unbind(),this._appendTimer.cancel(),this._sourceBuffersCreated=!1,this.videoSourceBuffer=null,this.audioSourceBuffer=null,this._appendWindowStart=0,this._appendWindowEnd=Number.POSITIVE_INFINITY}},{key:"destroy",value:function(){this.reset(),this._video=null,this._appendTimer=null,this._videoAddBufs=this._audioAddBufs=this._videoDelBufs=this._audioDelBufs=null,this._onUpdate=this._onUpdateStart=this._onUpdateEnd=this._onError=this._onAbort=null}},{key:"abort",value:function(){var e=this.media,t=this.videoSourceBuffer,i=this.audioSourceBuffer,a=this.videoBufferUpdating,n=this.audioBufferUpdating;if("open"===e._m.readyState&&e._m.sourceBuffers.length>0){if(a&&t)try{t.abort()}catch(e){y["default"].warn("video source buffer abort error, "+(e?e.message||e:""))}if(n&&i)try{i.abort()}catch(e){y["default"].warn("audio source buffer abort error, "+(e?e.message||e:""))}}}},{key:"withinBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this.audioSourceBuffer,n=this.videoSourceBuffer,r=[],o=[];return a&&r.push(a),n&&r.push(n),r.forEach(function(a){for(var n=a.buffered,r=0;r<n.length;r++)if(e>=n.start(r)+t&&e<n.end(r)-i){o.push(!0);break}}),o.length===r.length}},{key:"bufferInfo",value:function(e,t,i){var a=this.videoSourceBuffer,n=this.audioSourceBuffer,r=void 0,o=[],s=void 0;switch(i){case"video":r=a?a.buffered:null;break;case"audio":r=n?n.buffered:null;break;default:r=this._video.buffered}if(r)for(s=0;s<r.length;s++)o.push({start:r.start(s),end:r.end(s)});return this.bufferedInfo(o,e,t)}},{key:"bufferedInfo",value:function(e,t,i){var a=[],n=void 0,r=void 0,o=void 0,s=void 0,d=void 0;for(e.sort(function(e,t){var i=e.start-t.start;return i||t.end-e.end}),d=0;d<e.length;d++){var l=a.length;if(l){var u=a[l-1].end;e[d].start-u<i?e[d].end>u&&(a[l-1].end=e[d].end):a.push(e[d])}else a.push(e[d])}for(d=0,n=0,r=o=t;d<a.length;d++){var c=a[d].start,f=a[d].end;if(t+i>=c&&t<f)r=c,o=f,n=o-t;else if(t+i<c){s=c;break}}return{len:n,start:r,end:o,nextStart:s}}},{key:"intersectBuffer",value:function(e,t,i){var a=!1;if(e)for(var n,r,o=e.buffered,s=0;s<o.length;s++)if(n=o.start(s),r=o.end(s),!(i<=n||t>=r)){a=!0;break}return a}},{key:"onMSEDetaching",value:function(){this.abort()}},{key:"onBufferCreated",value:function(e){this._unbind(),this._sourceBuffersCreated=!0,this.videoSourceBuffer=e.videoSourceBuffer,this.audioSourceBuffer=e.audioSourceBuffer,this._bind()}},{key:"onBufferAppending",value:function(e,t){var i=this.videoSourceBuffer,a=this.audioSourceBuffer;switch(e){case"video":i&&this._videoAddBufs.push(t);break;case"audio":a&&this._audioAddBufs.push(t)}this.appending()}},{key:"onBufferFlushing",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=this.media;this.empty||"closed"===a._m.readyState?setTimeout(function(){a.emit(m["default"].BUFFER_FLUSHED)},10):(""!==i&&"video"!==i||this._videoDelBufs.push({start:e,end:t}),""!==i&&"audio"!==i||this._audioDelBufs.push({start:e,end:t}),this.flushing())}},{key:"appending",value:function(){var e=this.ctx,t=this.media,i=this.videoSourceBuffer,a=this.audioSourceBuffer;if(!t.error)if("closed"!==t._m.readyState){var n=[{contentType:"video",sb:i,adds:this._videoAddBufs},{contentType:"audio",sb:a,adds:this._audioAddBufs}];n.forEach(function(t,i){var a=t.sb;if(t.adds.length>0&&a&&!a.updating){var n=t.adds.shift(),r=t.contentType;try{a._bufferedLength=a.buffered.length,a.appendBuffer(n)}catch(t){22===t.code?e._emitError(new S["default"](S["default"].severity.CRITICAL,S["default"].category.MEDIA,S["default"].code.MEDIA_QUOTA_EXCEEDED,r)):e._emitError(new S["default"](S["default"].severity.CRITICAL,S["default"].category.MEDIA,S["default"].code.MEDIA_SOURCE_OPERATION_THREW,r,t))}}}),this._sbUpdateType="+"}else this._appendTimer.cancel(),this._appendTimer.schedule(.1)}},{key:"flushing",value:function(){var e=this,t=this.media,i=this.audioSourceBuffer,a=this.videoSourceBuffer,n=t._m.readyState;return[i,a].forEach(function(t){if(t)if("closed"===n||t.updating)"open"!==n&&y["default"].warn("flushing sb.updating: "+t.updating+", mediaSource state: "+n);else{for(var a=void 0,r=t===i?"audio":"video",o=t===i?e._audioDelBufs:e._videoDelBufs;o.length&&(a=o.shift(),!e.intersectBuffer(t,a.start,a.end));)a=null;a&&(a.end===Number.POSITIVE_INFINITY&&(a.end=t.buffered.end(t.buffered.length-1)),t._bufferedLength=t.buffered.length,y["default"].log("flushing "+r+" ["+a.start+","+a.end+"] of "+t.buffered.length+" ranges, pos:"+e._video.currentTime),t.remove(a.start,a.end),e._sbUpdateType="-")}}),!!this._sbUpdateType}},{key:"_bind",value:function(){var e=this;[{contentType:"video",sourceBuffer:this.videoSourceBuffer},{contentType:"audio",sourceBuffer:this.audioSourceBuffer}].forEach(function(t){var i=t.contentType,a=t.sourceBuffer;a&&(e._eventManager.on(a,"updatestart",e._onUpdateStart.bind(e)),e._eventManager.on(a,"update",e._onUpdate.bind(e)),e._eventManager.on(a,"updateend",e._onUpdateEnd.bind(e)),e._eventManager.on(a,"abort",e._onAbort.bind(e)),e._eventManager.on(a,"error",e._onError.bind(e,i)))})}},{key:"_unbind",value:function(){this._eventManager.removeAll()}},{key:"_onUpdateStart",value:function(e){var t=this.videoSourceBuffer,i=this.audioSourceBuffer,a=void 0,n=e.target;t&&n===t?a="video":i&&n===i&&(a="audio"),y["default"].debug(a+" source buffer on update start.")}},{key:"_onUpdate",value:function(e){var t=this.videoSourceBuffer,i=this.audioSourceBuffer,a=void 0,n=e.target;t&&n===t?a="video":i&&n===i&&(a="audio"),y["default"].debug(a+" source buffer on update.")}},{key:"_onUpdateEnd",value:function(e){var t=this.media,i=this.videoSourceBuffer,a=this.audioSourceBuffer,n=void 0,r=void 0,o=e.target,s=o._bufferedLength;if(i&&o===i?n="video":a&&o===a&&(n="audio"),"+"===this._sbUpdateType?r="append":"-"===this._sbUpdateType&&(r="remove"),t.emit(m["default"].BUFFER_UPDATED,{target:o,sourceBufferType:n,operateType:r,previousBufferedLength:s}),this._videoDelBufs.length>0||this._audioDelBufs.length>0){if(this.flushing())return}else if("-"===this._sbUpdateType)return this._sbUpdateType="",this.media.emit(m["default"].BUFFER_FLUSHED);this._videoAddBufs.length>0||this._audioAddBufs.length>0?this.appending():"+"===this._sbUpdateType&&(this._sbUpdateType="",t.variantSwitching&&(t.variantSwitching=!1),t.emit(m["default"].BUFFER_APPENDED)),y["default"].debug(n+" source buffer on update end")}},{key:"_onAbort",value:function(){y["default"].warn("source buffer met abort.'")}},{key:"_onError",value:function(e,t){var i=this.ctx,a=t.timeStamp,n=t.target,r=t.currentTarget,o=t.srcElement,s=r||n||o||{},d=this._video.error?this._video.error.code:0;this._appendTimer.cancel(),y["default"].error(e+" source buffer met error, video code("+d+"), timeStamp("+a+"), mode("+s.mode+")"),i._emitError(new S["default"](S["default"].severity.CRITICAL,S["default"].category.MEDIA,S["default"].code.MEDIA_SOURCE_OPERATION_FAILED,d))}},{key:"_checkAppend",value:function(){(this._videoAddBufs.length>0||this._audioAddBufs.length>0)&&(this.appending(),this._appendTimer.schedule(.1))}},{key:"clearOperateBuffers",value:function(e){var t=!0,i=!0;"video"===e?t=!1:"audio"===e&&(i=!1),t&&this._audioAddBufs.length>0&&(this._audioAddBufs=[]),i&&this._videoAddBufs.length>0&&(this._videoAddBufs=[])}}]),t}(_["default"]);t["default"]=E},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(264),r=a(n),o=i(267),s=a(o),d=i(132),l=a(d),u=i(69),c=a(u),f=i(268),p=a(f),h=i(73),_=a(h),g=i(74),m=a(g),v=i(75),y=a(v),b=i(79),x=a(b),w=i(322),T=a(w),S=i(92),k=a(S),A=i(250),E=a(A),P=i(93),q=a(P),I=i(140),L=a(I),D=i(141),C=a(D),F=i(105),R=a(F),O=i(107),B=a(O),N=i(112),M=a(N),V=function(e){function t(e,i){(0,_["default"])(this,t);var a=(0,m["default"])(this,(t.__proto__||(0,c["default"])(t)).call(this,e,k["default"].STREAM_ENCRYPTED));return a.sessions=[],a.licenseRequests=[],a.drmInfo={},a._video=i,a._eventManager=new M["default"],a}return(0,x["default"])(t,e),(0,y["default"])(t,[{key:"isSupported",get:function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)}},{key:"error",get:function(){return null}}],[{key:"probeSupport",value:function(){var e=[],t=["org.w3.clearkey","com.widevine.alpha","com.microsoft.playready","com.apple.fps.2_0","com.apple.fps.1_0","com.apple.fps","com.adobe.primetime"],i=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],a={videoCapabilities:i},n={videoCapabilities:i,persistentState:"required",sessionTypes:["persistent-license"]},r=[n,a],o={};return t.forEach(function(t){try{var i=navigator.requestMediaKeySystemAccess(t,r).then(function(e){var i=e.getConfiguration().sessionTypes,a=!!i&&i.indexOf("persistent-license")>=0;return o[t]={persistentState:a},e.createMediaKeys()})["catch"](function(){o[t]=null});e.push(i)}catch(e){}}),p["default"].all(e).then(function(){return o})}}]),(0,y["default"])(t,[{key:"destroy",value:function(){this._unbind(),this.reset(),this._video=null,this.licenseRequests=null,this.sessions=null,this.drmInfo=null}},{key:"reset",value:function(){var e=(this.ctx,this.sessions),t=this.licenseRequests;if(e.length>0&&e.splice(0,e.length),t.length>0){for(var i=0;i<t.length;i++)t[i]._destroyed=!0;t.splice(0,t.length)}}},{key:"setDrmInfo",value:function(e){this.drmInfo=e?{keySystem:e.keySystem,licenseServerUri:e.keySystemServer,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]}:{}}},{key:"_unbind",value:function(){this._eventManager.removeAll()}},{key:"_onMediaKeySessionMessage",value:function(e){var t=this.ctx,i=this.media,a=this.drmInfo,n=this.licenseRequests,r=i._config,o=e.target,s=e.message,d=e.messageType;if(!a.licenseServerUri)return t._emitError(new R["default"](R["default"].severity.CRITICAL,R["default"].category.DRM,R["default"].code.DRM_NO_LICENSE_SERVER_GIVEN));var l=t.netProxy.makeRequestContext([a.licenseServerUri],(0,B["default"])(r.drm.retryParameters,t.netProxy.defaultRetryParameters));l.method="POST",l.body=s,l.licenseRequestType=d,l.callbacks=(0,B["default"])(l.callbacks,{onSuccess:function(e){var i=e.data;if(i&&i.byteLength>0){var a=new Uint8Array(i);q["default"].log("drm=== requestlicenseserver ok "),o.update(a)["catch"](function(e){q["default"].error("update() failed, "+e.message),t._emitError(new R["default"](R["default"].severity.CRITICAL,R["default"].category.DRM,R["default"].code.DRM_LICENSE_RESPONSE_REJECTED,e.message))})}else t._emitError(new R["default"](R["default"].severity.CRITICAL,R["default"].category.DRM,R["default"].code.DRM_NO_LICENSE_SERVER_RESPONSE))},onError:function(){t._emitError(new R["default"](R["default"].severity.CRITICAL,R["default"].category.DRM,R["default"].code.DRM_LICENSE_REQUEST_ERROR))},onTimeout:function(e,i){t._emitError(new R["default"](R["default"].severity.CRITICAL,R["default"].category.DRM,R["default"].code.DRM_LICENSE_REQUEST_TIMEOUT))},onAbort:function(){},onComplete:function(){}},!0),"com.microsoft.playready"!==a.keySystem&&"com.chromecast.playready"!==a.keySystem||this.unpackPlayReadyRequest_(l),q["default"].log("drm=== requestlicenseserver "+a.licenseServerUri);var u=t.netProxy.request(E["default"].LICENSE,l);n.push(u)}},{key:"_onMediaKeySessionStatusChange",value:function(e){var t=e.target,i=t.keyStatuses;if("com.microsoft.playready"==this.drmInfo.keySystem)this._onSessionStatusChangePlayready(i,t.sessionId);else{var a=!0,n=!1,r=void 0;try{for(var o,s=(0,l["default"])(i.entries());!(a=(o=s.next()).done);a=!0){var d=o.value,u=d[0],c=d[1],f=L["default"].toBase64(new Uint8Array(u)),p=C["default"].base64ToHex(f);q["default"].log("SessionId="+t.sessionId+" keyId="+p+" status="+c)}}catch(e){n=!0,r=e}finally{try{!a&&s["return"]&&s["return"]()}finally{if(n)throw r}}}}},{key:"onStreamEncrypted",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s["default"])(r["default"].mark(function e(t){var i,a,n,o,s;return r["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.ctx,a=this._video,n=new Uint8Array(t.initData),o=t.initDataType,q["default"].log("drm=== onStreamEncrypted,initdata = ",n.length),!this.isSupported){e.next=23;break}return e.prev=6,e.next=9,this._queryMediaKeys();case 9:return s=e.sent,e.next=12,this._setMediaKeys(a,s);case 12:return q["default"].log("drm=== _createSession,initdata = ",n.length,",initDataType = "+o),e.next=15,this._createSession(a,o,n);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](6),q["default"].error("Encrypted session error: "+("string"==typeof e.t0?e.t0:e.t0.message)),i._emitError(new R["default"](R["default"].severity.CRITICAL,R["default"].category.DRM,R["default"].code.DRM_NO_RECOGNIZED_ERROR));case 21:e.next=24;break;case 23:i._emitError(new R["default"](R["default"].severity.CRITICAL,R["default"].category.DRM,R["default"].code.DRM_NO_BASIC_SUPPORT));case 24:case"end":return e.stop()}},e,this,[[6,17]])}));return e}()},{key:"_queryMediaKeys",value:function(){var e=this.ctx,t=this.drmInfo;return this._queryMediaKeysPromise||(this._queryMediaKeysPromise=new p["default"](function(i,a){var n=[];void 0===MediaKeySystemAccess.prototype.getConfiguration?(q["default"].warn("Detected obsolete navigator.requestMediaKeySystem options style."),n=[{initDataType:"cenc",distinctiveIdentifier:"optional",persistentState:"optional",videoType:'video/mp4; codecs="avc1.64001f"',audioType:'audio/mp4; codecs="mp4a.40.5"'}]):n=[{initDataTypes:["cenc"],distinctiveIdentifier:"optional",persistentState:"optional",videoCapabilities:[{contentType:'video/mp4; codecs="avc1.64001f"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.5"'}]}],navigator.requestMediaKeySystemAccess(t.keySystem,n).then(function(e){e.getConfiguration();return e.createMediaKeys()},function(t){e._emitError(new R["default"](R["default"].severity.CRITICAL,R["default"].category.DRM,R["default"].code.DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE)),a("requestMediaKeySystemAccess fail: "+t+"!")}).then(function(e){i(e)},function(t){e._emitError(new R["default"](R["default"].severity.CRITICAL,R["default"].category.DRM,R["default"].code.DRM_FAILED_TO_CREATE_CDM)),a("createMediaKeys fail: "+t)})})),this._queryMediaKeysPromise}},{key:"_setMediaKeys",value:function(){function e(e,i){return t.apply(this,arguments)}var t=(0,s["default"])(r["default"].mark(function e(t,i){var a;return r["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.ctx,this._setMediaKeysPromise||(this._setMediaKeysPromise=t.setMediaKeys(i),this._setMediaKeysPromise["catch"](function(e){a._emitError(new R["default"](R["default"].severity.CRITICAL,R["default"].category.DRM,R["default"].code.DRM_FAILED_TO_ATTACH_TO_VIDEO))})),e.abrupt("return",this._setMediaKeysPromise);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"_createSession",value:function(){function e(e,i,a){return t.apply(this,arguments)}var t=(0,s["default"])(r["default"].mark(function e(t,i,a){var n,o,s,d;return r["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.ctx,o=this.sessions,s=0;case 2:if(!(s<o.length)){e.next=8;break}if(!L["default"].equal(a,o[s].initData)){e.next=5;break}return e.abrupt("return",q["default"].debug("Ignoring duplicate init data."));case 5:++s,e.next=2;break;case 8:if(!t.mediaKeys){e.next=24;break}d=void 0,e.prev=10,d=t.mediaKeys.createSession(),e.next=18;break;case 14:return e.prev=14,e.t0=e["catch"](10),q["default"].debug(e.t0.message),e.abrupt("return",n._emitError(new R["default"](R["default"].severity.CRITICAL,R["default"].category.DRM,R["default"].code.DRM_FAILED_TO_CREATE_SESSION)));case 18:o.push({initData:a,session:d,loaded:!1,oldExpiration:1/0}),this._eventManager.on(d,"message",this._onMediaKeySessionMessage.bind(this)),this._eventManager.on(d,"keystatuseschange",this._onMediaKeySessionStatusChange.bind(this)),this._mediaKeySessionPromise=d.generateRequest(i,a),e.next=25;break;case 24:this._mediaKeySessionPromise=p["default"].resolve();case 25:return this._mediaKeySessionPromise["catch"](function(e){q["default"].warn("initDataType("+i+"), initData("+a+")"),n._emitError(new R["default"](R["default"].severity.CRITICAL,R["default"].category.DRM,R["default"].code.DRM_FAILED_TO_GENERATE_LICENSE_REQUEST))}),e.abrupt("return",this._mediaKeySessionPromise);case 27:case"end":return e.stop()}},e,this,[[10,14]])}));return e}()},{key:"unpackPlayReadyRequest_",value:function(e){var t=C["default"].fromUTF16(e.body,!0,!0);if(!t.includes("PlayReadyKeyMessage"))return void(e.headers["Content-Type"]="text/xml; charset=utf-8");for(var i=(new DOMParser).parseFromString(t,"application/xml"),a=i.getElementsByTagName("HttpHeader"),n=0;n<a.length;++n){var r=a[n].querySelector("name"),o=a[n].querySelector("value");e.headers[r.textContent]=o.textContent}var s=i.querySelector("Challenge");e.body=L["default"].fromBase64(s.textContent).buffer}},{key:"_onSessionStatusChangePlayready",value:function(e,t){e.forEach(function(e,i){if("string"==typeof i){var a=i;i=e,e=a}if("com.microsoft.playready"==this.drmInfo.keySystem&&16==i.byteLength){var n=new DataView(i),r=n.getUint32(0,!0),o=n.getUint16(4,!0),s=n.getUint16(6,!0);n.setUint32(0,r,!1),n.setUint16(4,o,!1),n.setUint16(6,s,!1)}"com.microsoft.playready"==this.drmInfo.keySystem&&"status-pending"==e&&(e="usable");var d=L["default"].toBase64(new Uint8Array(i)),l=C["default"].base64ToHex(d);q["default"].log("SessionId="+t+" keyId="+l+" status="+e)}.bind(this))}}]),t}(T["default"]);t["default"]=V},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(322),_=a(h),g=i(92),m=a(g),v=i(93),y=a(v),b=i(149),x=a(b),w=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e,m["default"].MEDIA_IDLE));return a._video=i,a}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"destroy",value:function(){}},{key:"reset",value:function(){}},{key:"onMediaIdle",value:function(){this._checkBuffer()}},{key:"_checkBuffer",value:function(){var e=this.ctx,t=this.media,i=t._config,a=t.currentTime,n=t.playHeadTime,r=this._video,o=r.readyState;if(!e.error&&r&&!t.updating&&(t.hasVideoBuffer||t.hasAudioBuffer)){var s=t.bufferInfo(a);if(s.len<i.bufferExpectLength*Math.max(1,t.playbackRate)&&t.emit(m["default"].BUFFER_EXPECTING,s),s.len>=0){var d=x["default"].getGapIndex(t.buffered,a),l=!(r.paused&&o>1||r.ended),u=performance.now();if(d&&y["default"].debug("met gapIndex "+d+", currentTime: "+a),a!==n)this.stallReported&&(y["default"].warn("video not stuck anymore @"+a+", after "+Math.round((u-this.stalled)/1e3)+"s"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0;else if(l){var c=u-this.stalled,f=t.bufferInfo(a);if(!this.stalled)return void(this.stalled=u);c>=1e3&&(this.stallReported||(this.stallReported=!0,y["default"].warn("video stalling at @"+a+" due to low buffer"))),this._tryFixBufferStall(f,c)}}}}},{key:"_tryFixBufferStall",value:function(e,t){this.media;e.len>.5&&t>2e3&&(this.stalled=null,this._tryNudgeBuffer())}},{key:"_tryNudgeBuffer",value:function(){var e=(this.ctx,this.media),t=e.currentTime,i=(this.nudgeRetry||0)+1;this.nudgeRetry=i;var a=e._config;if(i<a.nudgeMaxRetry){var n=t+i*a.nudgeOffset;y["default"].log("adjust currentTime from "+t+" to "+n),e.currentTime=n}else y["default"].error("still stuck in high buffer @"+t+" after "+a.nudgeMaxRetry+", raise fatal error")}}]),t}(_["default"]);t["default"]=w},function(e,t,i){function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(69),r=a(n),o=i(73),s=a(o),d=i(75),l=a(d),u=i(74),c=a(u),f=i(79),p=a(f),h=i(322),_=a(h),g=i(92),m=a(g),v=i(93),y=(a(v),i(112)),b=a(y),x=i(114),w=a(x),T=function(e){function t(e,i){(0,s["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e,m["default"].MSE_ATTACHING));return a._video=i,a._eventManager=new b["default"],a._checkFPSTimer=new w["default"](function(){return a._checkFPSInterval()}),a._shouldReport=!1,a._fpsFrequency=1,a._decodeFrameStuckCount=0,a}return(0,p["default"])(t,e),(0,l["default"])(t,[{key:"onMSEAttaching",value:function(){this._checkFPSTimer.scheduleRepeated(this._fpsFrequency)}},{key:"startReportFPS",value:function(){this._shouldReport=!0}},{key:"stopReportFPS",value:function(){this._shouldReport=!1}},{key:"_checkAndFixStuck",value:function(e){var t=this.ctx,i=this.media,a=document.hidden;"boolean"!=typeof a||a||i.paused||4!==i.readyState||(this.variantSwitching?this._decodeFrameStuckCount=0:this._decodeFrameStuckCount>t.config.fpsStuckMonitoringPeriod?(t.emit(m["default"].FPS_STUCK),this._decodeFrameStuckCount=0,t.recoverMedia()):0===e?this._decodeFrameStuckCount++:this._decodeFrameStuckCount=0)}},{key:"_checkFPS",value:function(e,t){var i=this.ctx,a=(this.media,performance.now());if(e){if(this._lastTime){var n=(this._lastTime,t-this._lastDroppedFrames),r=e-this._lastDecodedFrames;this._shouldReport&&i.emit(m["default"].FPS_REPORT,{currentDropped:n,currentDecoded:r,totalDroppedFrames:t}),this._checkAndFixStuck(r)}this._lastTime=a,this._lastDroppedFrames=t,this._lastDecodedFrames=e}}},{key:"_checkFPSInterval",value:function(){var e=this.media;if(this._video){var t=e.playbackQuality;this._checkFPS(t.totalVideoFrames,t.droppedVideoFrames)}}},{key:"destroy",value:function(){this._unbind(),this.reset(),this._video=null,this._eventManager=null}},{key:"reset",value:function(){}}]),t}(_["default"]);t["default"]=T}])},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports={error_code_title1:"喔喔，播放失敗啦~",error_code_desc1:"你可以試試獲取視頻信息更  穩定的  愛奇藝客戶端",error_code_desc2:"檢測發現您可能在使用惡意插件，請檢查並解安裝後重試",error_code_desc6:"很抱歉，你訪問的視頻丟了",error_code_desc7:"該視頻目前還未通過審核",error_code_title10:"喔喔，這裡的視頻消失了~",error_code_desc10:"你可以試試匯集全網視頻的  愛奇藝客戶端",error_code_desc11:"很抱歉，因爲版權限制，本節目暫無法觀看",error_code_title12:"當前平臺暫無法播放喔~",error_code_desc12:"你可以試試看1080P全免費的愛奇藝客戶端",error_code_title13:"由於版權限制，您所在的地區無法觀看該視頻",error_code_title14:"本片受版權方約束，需要使用DRM碼流播放<br/>請登錄手機客戶端或者Pad客戶端進行觀看",error_code_desc14:"",error_code_desc21:"您沒有權限觀看此視頻",error_code_desc22:"您的帳號僅限2臺設備同時播放，請停止其他設備播放等待5分鍾或修改密碼",error_code_switch_flash:"播放出錯了，請點擊切換到原版Flash播放器",error_code_desc_http:"播放出錯了，請稍後刷新重試",error_code_title201:"抱歉，您訪問的視頻暫無法播放~",error_code_title206:"播放出錯了，請稍等片刻刷新試試~",error_code_title301:"抱歉，您訪問的視頻暫無法播放~",error_code_desc_ad:"喔喔...廣告無法正常播放了，開通VIP功能跳過廣告，或關閉屏蔽廣告功能",controls_tip_history:'您上次觀看至<i class="iqp-txt-selected">#time#</i> 處, 愛奇藝為您自動續播。',controls_tip_skipheader:"已經為您跳過片頭",controls_tip_skiptailer:"即將為您跳過片尾",controls_tip_recharge_type1:'免費試看<i class="iqp-txt-selected">6</i>分鐘，觀看完整版請 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">開通VIP會員</a>',controls_tip_recharge_type4:'免費試看<i class="iqp-txt-selected">6</i>分鐘，觀看完整版請立即購買，點擊 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">開通網球會員</a>',controls_tip_recharge_type2:'試看<i class="iqp-txt-selected">#previewTime#</i>分鐘，因版權限制，觀看完整版請 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">購買本片</a>',controls_tip_recharge_type3:'試看<i class="iqp-txt-selected">#previewTime#</i>分鐘，因版權限制，觀看完整版請  <a href="javascript:;" class="iqp-txt-selected" data-event="useTicket">用券觀看</a>',controls_tip_recharge_defaultype:'免費觀看前<i class="iqp-txt-selected">#previewTime#</i>分鐘，完整觀看請 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">立即購買</a>',controls_tip_skipheadertailer:"跳過片頭片尾",controls_yes:"是",controls_no:"否",controls_tip_precache:"正在緩衝",controls_tip_switching:"正在切換到",controls_tip_switchedsucc:"已成功切換到",controls_tip_switchwaiting:"畫質，請稍候",controls_tip_switchedfail:"畫質切換失敗，請檢查網絡並再次嘗試",controls_tip_switchedpic:"畫質",controls_tip_playspeedguide:"在這裏可以調節播放倍速",controls_tip_speed_changed:"播放速度：<i class=\"iqp-txt-selected\">XX</i> ('shift'+'>'/'<' 增減倍速)",controls_tip_setting_normal:"正常",controls_subtitles_tip_switching:"正在切換到",controls_subtitles_tip_switchedsucc:"已成功切換到",controls_subtitles_tip_switchwaiting:"字幕，請稍候",controls_subtitles_tip_switchedfail:"字幕切換失敗，請檢查網絡並再次嘗試",controls_subtitles_tip_switchedpic:"字幕",controls_playlistbtn:"選集",controls_clickplay_hover:"點擊播放",controls_clickpause_hover:"點擊暫停",controls_replay_hover:"重新播放",controls_forward_hover:"下一集",controls_webfullscreen_hover:"網頁全屏",controls_exitwebfullscreen_hover:"退出網頁全屏",controls_fullscreen_hover:"全屏",controls_exitfullscreen_hover:"退出全屏",controls_download:"立即下載",controls_download_mobile:"立即體驗",controls_clientdownload_mobile:"使用愛奇藝客戶端，視頻播放更流暢~",controls_cycleplay:"循環播放",controls_select_player:"播放器選擇",controls_setting_recommend:"推薦使用  [ HTML5 ]",controls_setting_playratedesc:"倍速",controls_nextbtn:'<span class="iqp-titie-next">下壹條視頻 </span>',controls_seek_tips:"可點擊1-9定位至10%-90%內容處",definition_name_limit:"極速",definition_name_standard:"流暢",definition_name_high:"高清",definition_name_superhigh:"超清",definition_name_720p:"720P",definition_name_1080p:"1080P",definition_name_4k:"4k",definition_name_1080P50:"1080P50",definition_name_ad:"廣告",definition_name_auto:"智能",error_errorcode_text:"錯誤代碼",error_switchplayer:"切換播放器",error_tryrefresh:"刷新試試",error_download:"立刻下載安裝",error_help:"幫助反饋",loading_text:"正在全力加載，請稍候…",score_task_guide:"再看10分鐘即可領取積分噢~",score_task_login:"播放任務達成，登錄可領積分獎勵~",score_task_success:"恭喜完成觀看視頻任務！<br>送你#score#積分獎勵",score_task_btn_info1:"查看詳情",score_task_btn_info2:"我的積分",score_task_btn_close1:"不再提示",score_task_btn_close2:"不再提示",score_task_btn_login:"立即登錄",ban_btn:"修改密碼",ban_tip_001:"賬號最多同時在2臺設備播放，終止其餘設備播放或修改密碼恢復",ban_tip_002:"檢測到賬號被多人共享，會員權益已暫停，請修改密碼",ban_tip_004:"檢測到您的帳號被嚴重分享，已永久封禁",error_maintitle:"Flash插件異常",error_fltitle:"下載官方Flash插件",error_h5title:"正在切換HTML5播放模式",error_fltip:"已安裝仍無法觀看",subtitles_switch:"字幕",subtitles_setting:"字幕設置",subtitles_back:"返回",subtitles_fontsize:"字號",subtitles_alpha:"透明度",subtitles_language:"語言",picture_in_picture:"畫中畫",contentMenu_bug:"問題反饋",contentMenu_link:"復制鏈接",contentMenu_shortcut:"快捷鍵說明",contentMenu_console:"復制調試信息",contentMenu_shortcut_text:"播放快捷鍵",contentMenu_shortcut_text1_1:"空格",contentMenu_shortcut_text1_2:"：播放，暫停視頻",contentMenu_shortcut_text2_2:"：音量增加5%",contentMenu_shortcut_text2_4:"：音量減少5%",contentMenu_shortcut_text3_2:"：快退15s",contentMenu_shortcut_text3_4:"：快進15s",contentMenu_shortcut_text4_2:"：倍速增加",contentMenu_shortcut_text4_4:"：倍速減少",contentMenu_shortcut_text5_2:"：播放上一集",contentMenu_shortcut_text5_4:"：播放下一集",contentMenu_shortcut_text6_2:"：快速定位至視頻10%-90%的內容處(僅限>5min視頻)",contentMenu_shortcut_text7_2:"：進入/退出全屏",contentMenu_shortcut_text8_2:"：靜音/取消靜音",contentMenu_shortcut_text9_2:"：重播",contentMenu_shortcut_text10_2:"：喚醒顯示播控條或退出全屏",loading_download_speed:"加載速度:",top_tip_like:"點贊",top_tip_cancel_like:"取消點贊",top_tip_collect:"收藏",top_tip_cancel_collect:"取消收藏",top_tip_size:"畫面尺寸"}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports={error_code_title1:"呃，播放失败啦~",error_code_desc1:"你可以试试获取视频信息更  稳定的  爱奇艺客户端",error_code_desc2:"检测发现您可能在使用恶意插件，请检查并卸载后重试",error_code_desc6:"很抱歉，你访问的视频丢了",error_code_desc7:"该视频当前还未通过审核",error_code_title10:"呃，这里的视频消失了~",error_code_desc10:"你可以试试汇集全网视频的  爱奇艺客户端",error_code_desc11:"很抱歉，因为版权限制，本节目暂无法观看",error_code_title12:"当前平台暂无法播放哦~",error_code_desc12:"你可以试试看1080P全免费的爱奇艺客户端",error_code_title13:"由于版权限制，您所在的地区无法观看该视频",error_code_title14:"本片受版权方约束，暂不支持网页端播放<br/>请使用移动客户端或电脑客户端进行观看 ",error_code_desc14:"",error_code_desc21:"您没有权限观看此视频",error_code_desc22:"您的账号仅限2台设备同时播放，请停止其他设备播放等待5分钟或修改密码",error_code_switch_flash:"播放出错了，请点击切换到原版Flash播放器",error_code_desc_http:"播放出错了，请稍后刷新重试",error_code_title201:"抱歉，您访问的视频暂无法播放~",error_code_title206:"播放出错了，请稍等片刻刷新试试~",error_code_title301:"抱歉，您访问的视频暂无法播放~",error_code_desc_ad:"呃...广告无法正常播放了，开通VIP功能跳过广告，或关闭屏蔽广告功能",controls_tip_history:'您上次观看至<i class="iqp-txt-selected">#time#</i> 处, 爱奇艺为您自动续播。',controls_tip_skipheader:"已经为您跳过片头",controls_tip_skiptailer:"即将为您跳过片尾",controls_tip_recharge_type1:'免费试看<i class="iqp-txt-selected">6</i>分钟，观看完整版请 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">开通VIP会员</a>',controls_tip_recharge_type4:'免费试看<i class="iqp-txt-selected">6</i>分钟，观看完整版请 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">开通网球会员</a>',controls_tip_recharge_type2:'试看<i class="iqp-txt-selected">#previewTime#</i>分钟，因版权限制，观看完整版请 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">购买本片</a>',controls_tip_recharge_type3:'试看<i class="iqp-txt-selected">#previewTime#</i>分钟，因版权限制，观看完整版请  <a href="javascript:;" class="iqp-txt-selected" data-event="useTicket">用券观看</a>',controls_tip_recharge_defaultype:'免费观看前<i class="iqp-txt-selected">#previewTime#</i>分钟，完整观看请 <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">立即购买</a>',controls_tip_skipheadertailer:"跳过片头片尾",controls_yes:"是",controls_no:"否",controls_tip_precache:"正在缓冲",controls_tip_switching:"正在切换到",controls_tip_switchedsucc:"已成功切换到",controls_tip_switchwaiting:"画质，请稍候",controls_tip_switchedfail:"画质切换失败，请检查网络并再次尝试",controls_tip_switchedpic:"画质",controls_tip_playspeedguide:"在这里可以调节播放倍速",controls_tip_speed_changed:"播放速度：<i class=\"iqp-txt-selected\">XX</i> ('shift'+'>'/'<' 增减倍速)",controls_tip_setting_normal:"正常",controls_subtitles_tip_switching:"正在切换到",controls_subtitles_tip_switchedsucc:"已成功切换到",controls_subtitles_tip_switchwaiting:"字幕，请稍候",controls_subtitles_tip_switchedfail:"字幕切换失败，请检查网络并再次尝试",controls_subtitles_tip_switchedpic:"字幕",controls_playlistbtn:"选集",controls_clickplay_hover:"点击播放",controls_clickpause_hover:"点击暂停",controls_replay_hover:"重新播放",controls_forward_hover:"下一集",controls_webfullscreen_hover:"网页全屏",controls_exitwebfullscreen_hover:"退出网页全屏",controls_fullscreen_hover:"全屏",controls_exitfullscreen_hover:"退出全屏",controls_download:"立即下载",controls_download_mobile:"立即体验",controls_clientdownload_mobile:"使用爱奇艺客户端，视频播放更流畅~",controls_cycleplay:"循环播放",controls_select_player:"播放器选择",controls_setting_recommend:"推荐使用  [ HTML5 ]",controls_setting_playratedesc:"倍速",controls_nextbtn:'<span class="iqp-titie-next">下一条视频 </span>',controls_seek_tips:"可点击1-9定位至10%-90%内容处",definition_name_limit:"极速",definition_name_standard:"流畅",definition_name_high:"高清",definition_name_superhigh:"超清",definition_name_720p:"720P",definition_name_1080p:"1080P",definition_name_4k:"4k",definition_name_1080P50:"1080P50",definition_name_ad:"广告",definition_name_auto:"智能",error_errorcode_text:"错误代码",error_switchplayer:"切换播放器",error_tryrefresh:"刷新试试",error_download:"立刻下载安装",error_help:"帮助反馈",loading_text:"正在全力加载，请稍候…",score_task_guide:"再看10分钟即可领取积分噢~",score_task_login:"播放任务达成，登录可领积分奖励~",score_task_success:"恭喜完成观看视频任务！<br>送你#score#积分奖励",score_task_btn_info1:"查看详情",score_task_btn_info2:"我的积分",score_task_btn_close1:"不再提示",score_task_btn_close2:"不再提示",score_task_btn_login:"立即登录",ban_btn:"修改密码",ban_tip_001:"账号最多同时在2台设备播放，终止其余设备播放或修改密码恢复",ban_tip_002:"检测到账号被多人共享，会员权益已暂停，请修改密码",ban_tip_004:"检测到您的帐号被严重分享，已永久封禁",error_maintitle:"Flash插件异常",error_fltitle:"下载官方Flash插件",error_h5title:"正在切换HTML5播放模式",error_fltip:"已安装仍无法观看",subtitles_switch:"字幕",subtitles_setting:"字幕设置",subtitles_back:"返回",subtitles_fontsize:"字号",subtitles_alpha:"透明度",subtitles_language:"语言",picture_in_picture:"画中画",contentMenu_bug:"问题反馈",contentMenu_link:"复制链接",contentMenu_shortcut:"快捷键说明",contentMenu_console:"复制调试信息",contentMenu_shortcut_text:"播放快捷键",contentMenu_shortcut_text1_1:"空格",contentMenu_shortcut_text1_2:"：播放，暂停视频",contentMenu_shortcut_text2_2:"：音量增加5%",contentMenu_shortcut_text2_4:"：音量减少5%",contentMenu_shortcut_text3_2:"：快退15s",contentMenu_shortcut_text3_4:"：快进15s",contentMenu_shortcut_text4_2:"：倍速增加",contentMenu_shortcut_text4_4:"：倍速减少",contentMenu_shortcut_text5_2:"：播放上一集",contentMenu_shortcut_text5_4:"：播放下一集",contentMenu_shortcut_text6_2:"：快速定位至视频10%-90%的内容处(仅限>5min视频)",contentMenu_shortcut_text7_2:"：进入/退出全屏",contentMenu_shortcut_text8_2:"：静音/取消静音",contentMenu_shortcut_text9_2:"：重播",contentMenu_shortcut_text10_2:"：唤醒显示播控条或退出全屏",loading_download_speed:"加载速度:",top_tip_like:"点赞",top_tip_cancel_like:"取消点赞",top_tip_collect:"收藏",top_tip_cancel_collect:"取消收藏",top_tip_size:"画面尺寸"}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r=i(0),o=i(4),s=i(9),d=i(11),l=(i(10),i(5)),u=i(7),c=i(3),f=i(2),p=i(14),h=i(6),_=i(24),g=i(21),m=i(41),v="1",y="10",b="101";c.browser.iPad?(v="2",y="20",b="202"):(c.os.ios||c.os.android)&&(v="2",y="20",b="201");var x=r("Pingback",{construct:function(e){var t=this;t._core=e,t._pbisdm=1},extend:f,methods:{_send:function(e,t){var i=this;u.isVip(function(a){var n=i._core.getMovieInfo(),r={bstp:6,block:"B",pf:v,p:y,p1:b,c1:n.cid||"",r:n.tvid||"",u:s.getFluid()||"",u2:s.getJsuid()||"",pu:u.getUid(),pru:l.get("P00PRU")||"",v:m,ra:e.ra||i._core.getCurrentVD(),nu:s.getIsNewUser()||"",ve:s.getEid(),ce:s.getWeid(),hu:a?1:-1,ht:n.isVIP?1:0,mod:h.local(),plyrtp:0,coop:"",isdm:i._pbisdm,videotp:n.is3D,tmplt:i._core.getPageTmpltType(),rn:Math.random(),ct:"901111_pcwh5_mouse"};try{o(r,{as:p.cmd5ly(r.r+""+r.p1+r.u+r.ve+"ChEnYH0804FdadrrEDFf2016tT")})}catch(e){}var c;c=_.isFullScreen()?"901111_pcwh5_browerfull":g.isWebFullScreen()?"901111_pcwh5_pagefull":"901111_pcwh5_semipage",o(r,{rpage:c}),r=o(r,e,t),d.beacon(r,"//msg.qy.net/b")})},sendSeekPingback:function(e,t,i){var a=this,n={rseat:"ply_seek",from:e,to:t,t:20};a._core.getMovieInfo().isShowHeatMap&&(n.s2="lvjing"),i?(n.ct="901111_pcwh5_keyboard",a._send(n,!0)):a._send(n)},sendSwitchVDPingback:function(e){var t=this;t._send({rseat:"ply_cc",tra:e,t:20,ra:t._core.getCurrentVD()})},sendUserActionPingback:function(e,t){var i=this;t?i._send({rseat:e,t:20,ct:"901111_pcwh5_keyboard"},!0):i._send({rseat:e,t:20})},sendBlockPingback:function(e){var t=this,i={block:e,t:21};t._core.getMovieInfo().isShowHeatMap&&(i.s2="lvjing"),t._send(i,!0)},setpbisdm:function(e){this._pbisdm=e},sendBarrageShowRulePagePingback:function(){this._send({rpage:"full_ply",block:"tucaou",t:20,rseat:"608241_etiquette"},!0)},sendBarrageShowLikePingback:function(){this._send({rpage:"full_ply",block:"tucaou",t:20,rseat:"608241_like"},!0)},sendBarrageEnsureReportPingback:function(){this._send({rpage:"full_ply",block:"tucaou",t:20,rseat:"608241_T0_sub"},!0)},sendBarrageShowReportPingback:function(){this._send({rpage:"full_ply",block:"tucaou",t:20,rseat:"608241_report"},!0)},sendShowSystemBarragePingback:function(e){var t=this;t._send({rpage:"full_ply",block:"dmsys",t:21,tm:e.contentId,aid:t._core.getMovieInfo().albumId,rseat:""},!0)},sendClickSystemBarragePingback:function(e){var t=this;t._send({rpage:"full_ply",block:"dmsys",t:20,tm:e.contentId,aid:t._core.getMovieInfo().albumId,rseat:"608241_sysclick"},!0)},sendClickSystemBarrageButtonPingback:function(e){var t=this;t._send({rpage:"full_ply",block:"dmsys",t:20,tm:e.contentId,aid:t._core.getMovieInfo().albumId,rseat:"608241_syspicclick"},!0)},sendShowControlBarPingback:function(e){var t=this,i={block:"80720_playerctrl",t:21};t._core.getMovieInfo().isShowHeatMap&&(i.s2="lvjing"),t._send(i,!0)},sendSeekBarHoverPingback:function(e){var t=this,i={block:"80720_playerctrl_seekbar",t:21};e&&(i.s2="lvjing"),t._send(i,!0)},sendShowHeatMapPingback:function(e){this._send({block:"80720_playerctrl_lvjing",t:21,s2:"lvjing"},!0)},showScoreTaskGuidePanel:function(e){this._send({block:"80720_scorepannel_20m",t:21},!0)},closeScoreTaskGuidePanel:function(e){this._send({rseat:"80720_scorepannel_20mclose",t:20},!0)},showScoreTaskLoginPanel:function(e){this._send({block:"80720_scorepannel_30mlogin",t:21},!0)},showScoreTaskSuccessPanel:function(e){this._send({rseat:"80720_scorepannel_30msuccess",t:20},!0)},hoverVideoListButton:function(){this._send({block:"80720_playerctrl_selection",t:21},!0)},clickVideoListButton:function(){this._send({block:"B",rseat:"80720_playerctrl_selection",t:20},!0)},clickVideoListItemTitle:function(e){this._send({block:"B",rseat:"80720_playerctrl_selection_"+e,t:20},!0)},clickVideoListItemImage:function(e){this._send({block:"B",rseat:"80720_playerctrl_selection_"+e,t:20},!0)},clickSubtitlesSwitch:function(e){this._send({t:20,rseat:"80720_playerctrl_menu_subtitleswitch"+e},!0)},clickSubtitlesSetting:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle"},!0)},clickSubtitlesFontsizeSetting:function(e){e?this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_size_"+e},!0):this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_size"},!0)},clickSubtitlesAlphaSetting:function(e){e?this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_transp_"+e},!0):this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_transp"},!0)},clickSubtitlesLanguageSetting:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_lang"},!0)},changeSubtitlesLanguage:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_lang_change"},!0)},showSubtitlesPanel1:function(){this._send({t:21,rseat:"80720_playerctrl_menu_subtitle_panel1"},!0)},showSubtitlesPanel2:function(){this._send({t:21,rseat:"80720_playerctrl_menu_subtitle_panel2"},!0)},showContentMenu:function(){this._send({t:21,rseat:"80720_playerctrl_subpannel"},!0)},clickCtxMenuBugBtn:function(){this._send({t:21,rseat:"80720_playerctrl_subpannel_feedback"},!0)},clickCtxMenuLinkBtn:function(){this._send({t:21,rseat:"80720_playerctrl_subpannel_linkcopy"},!0)},clickCtxMenuShortcutBtn:function(){this._send({t:21,rseat:"80720_playerctrl_subpannel_keyboard"},!0)},clickCtxMenuConsoleBtn:function(){this._send({t:21,rseat:"80720_playerctrl_subpannel_debugger"},!0)}}});a.exports={init:function(e){n||(n=new x(e))},getInterface:function(){return n}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){function a(e){var t=e.target||e.srcElement;t.__resizeRAF__&&l(t.__resizeRAF__),t.__resizeRAF__=d(function(){var i=t.__resizeTrigger__;i.__resizeListeners__.forEach(function(t){t.call(i,e)})})}function n(e){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",a)}var r=document.attachEvent,o=navigator.userAgent.match(/Trident/),s=null,d=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),l=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}(),u=function(e,t){if(!s.__resizeListeners__)if(s.__resizeListeners__=[],r)s.__resizeTrigger__=s,s.attachEvent("onresize",a);else{var i=s.__resizeTrigger__=document.createElement("object");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),i.__resizeElement__=s,i.onload=n,i.type="text/html",o&&s.appendChild(i),i.data="about:blank",o||s.appendChild(i)}s.__resizeListeners__.push(t)},c=function(e,t){s.__resizeListeners__.splice(s.__resizeListeners__.indexOf(t),1),s.__resizeListeners__.length||(r?s.detachEvent("onresize",a):(s.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",a),s.__resizeTrigger__=!s.removeChild(s.__resizeTrigger__)))},f=function(e){s=e};i.exports={on:u,off:c,registElement:f}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports="4.1.4"}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(11),r=i(7),o=i(9),s=i(4),d=i(3),l=i(1),u=i(25),c=i(35),f=i(60),p={},h=new l("authremote");a.exports={getRequestURL:function(e){var t=f.getVars(),i={version:"7.0",platform:"01010021010000000000",deviceId:o.getFluid()||o.getJsuid(),uid:r.getUid(),playType:"pcwh5",shareFlag:0,appname:"h5",dfp:u.get(),messageId:"h5_"+o.createUUID().replace(/-/gi,"")};return"tw_s"!==t.local&&"tw_t"!==t.local||(i.platform=d.getPtid(!0)),s(e,i),c.vipauthUrl+"?"+n.serializeParam(e)},getPreviewTime:function(e){var t=p[e];if(t){var i=0;return t.data&&t.data.prv&&1==t.data.prv&&1==t.previewType&&(i=60*t.previewTime*1e3),i}h.error("the time to invoke getPreviewTime is wrong!")},getAuthUid:function(e){var t=p[e];if(t){if(t.data&&t.data.u)return t.data.u}else h.error("the u to invoke getAuthUid is wrong!")},analyzeAuthData:function(e,t,i,a){var n=1==e.shareFlag,r=e.tvid;t&&t.hasOwnProperty("code")?(h.log("analyze authremote data,params: isShare = "+(n?"fgtw(分甘同味)":"")+",code = "+t.code),"A00000"===t.code?(t.bossKeyTime=+new Date,p[r]=t,i(r,t)):a(t.code,"CKNSP_RECHARGE_"+t.code,t)):a(null,"CKNSP_DATA_Fail")},request:function(e,t,i){var a=this,r=0,o=function(){r++;var s=a.getRequestURL(e);2===r&&(s=s.replace(/^https/gi,"http")),n.json({url:s,timeout:5e3,beforeSend:function(e){return h.log("check charge definition,params: url = "+e.url),e},success:function(n){a.analyzeAuthData(e,n,t,i)},failure:function(e,t){r<2?o():i(null,"CKNSP_HTTPFail")}})};o()}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){function a(){for(var e=[],t=1;t<=64;t++)e.push(c[1][t]?1:0);return parseInt(e.reverse().join(""),2)}function n(){for(var e=[],t=1;t<=64;t++)e.push(c[2][t]?1:0);return parseInt(e.reverse().join(""),2)}function r(){for(var e=[],t=1;t<=64;t++)e.push(c[4][t]?1:0);return parseInt(e.reverse().join(""),2)}function o(){var e=[];c[1][37]=!0,c[1][38]=!0;for(var t=1;t<=64;t++)e.push(c[1][t]?1:0);return parseInt(e.reverse().join(""),2)}function s(){var e=[];c[1][45]=!0;for(var t=1;t<=64;t++)e.push(c[1][t]?1:0);return parseInt(e.reverse().join(""),2)}function d(e,t){c[e][t]=!0}function l(e,t){c[e][t]=!1}function u(e,t){return c[e][t]}var c={1:{3:!0,37:!1,40:!0,42:!0,48:!0},2:{},4:{3:!1,5:!1}};i.exports={getFT1:a,getFT2:n,getFT4:r,getM3U8FT1:o,getMP4FT1:s,hasBit:u,openBit:d,closeBit:l}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a=[],n={_videolist:a,getVideoIndexByTvid:function(e){for(var t,i=this,a=-1,n=0;n<i._videolist.length;n++)if(t=i._videolist[n],t.tvid==e){a=n;break}return a},addVideoList:function(e){var t=this,i=[],a=!1;return e.forEach(function(e){-1===t.getVideoIndexByTvid(e.tvid)&&(t._videolist.push({tvid:parseInt(e.tvid,10),vid:e.vid,isMember:"true"==e.isMemberVideo,isQiyiProduced:"1"==e.qiyiProduced,isExclusive:"1"==e.exclusive,cid:e.cid,pageUrl:e.pageUrl,imageUrl:e.imageURL,title:e.title,imageLoader:e.imageLoader}),i.push(e.tvid+"_"+e.vid),a=!0)}),{listChanged:a,logList:i,list:e}},removeVideoList:function(e){var t=this;0===e.length?t._videolist.splice(0,t._videolist.length):e.forEach(function(e){for(var i,a=0;a<t._videolist.length;a++)i=t._videolist[a],i.tvid==e.tvid&&i.vid===e.vid&&t._videolist.splice(a,1)})},getViFromVl:function(e,t){for(var i,a=this,n=null,r=0;r<a._videolist.length;r++)if(i=a._videolist[r],i.tvid==e&&i.vid===t){n=i;break}return n},getVideoList:function(){return this._videolist}};i.exports=n}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){return{isEnjoyPlayer:function(){return"enjoy"===this.playerType},playerType:"",playerVersion:""}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r,o,s=i(4),d=i(3),l=i(62),u=i(10),c={},f=function(){o=document.querySelectorAll?document.querySelectorAll("span"):document.getElementsByTagName("span"),n=window.QiyiPlayerParam||[],r={};for(var e=0;e<n.length;e++)n[e].name&&(r[n[e].name]=n[e].attribute||{})},p=function(e){(r[e]||r.hasOwnProperty(e))&&(r[e]=null,delete r[e]);for(var t=n.length;t--;)n[t].name===e&&n.splice(t,1)},h=function(e){return e.replace(/([<>])/g,"")},_=function(e){for(var t in e)e[t]||!1===e[t]||delete e[t];return e},g=function(e){var t,i,a=function(t){return e.getAttribute(t)},n={expandState:a("data-player-expandstate"),albumId:a("data-player-albumid"),tvid:a("data-player-tvid"),vid:a("data-player-videoid"),autoplay:a("data-player-autoplay"),isMember:a("data-player-ismember"),cyclePlay:a("data-player-cycleplay"),exclusive:a("data-player-exclusive"),qiyiProduced:a("data-player-qiyiProduced"),share_sTime:a("data-player-startTime"),share_eTime:a("data-player-endTime"),showBarStyle:a("data-player-barStyle"),isLoop:a("data-player-isloop")};for(t=0;t<o.length;t++)if(i=o[t],"data-widget-adparam"===i.getAttribute("data-widget-adparam")){var r=i.getAttribute("data-adparam-cupid"),s=i.getAttribute("data-adparam-playerid");r&&(n.adurl=r),s&&(n.cid=s)}return _(n)},m=function(){var e,t,i={};for(e=0;e<o.length;e++)if(t=o[e],"data-widget-adparam"===t.getAttribute("data-widget-adparam")){var a=t.getAttribute("data-adparam-cupid"),n=t.getAttribute("data-adparam-playerid");a&&(i.adurl=a),n&&(i.cid=n)}return _(i)},v=function(){var e,t,i,a,r,d,l=!1,c={};for(r=0;r<n.length;r++)"public"===n[r].name&&(s(c,_(n[r].attribute||{}),!0),p("public"),l=!0);if(!l)for(e=0;e<o.length;e++)d=o[e],t=d.getAttribute("data-widget-flashplayerparam"),i=d.getAttribute("data-flashplayerparam-flashvars"),a=d.getAttribute("data-h5playerparam-h5vars"),"public"===t&&(i&&s(c,_(u.query2Json(i)),!0),a&&s(c,_(u.query2Json(a)),!0));return _(c)},y=function(e){var t={playerUrl:l.checkFlashLzma()&&QiyiPlayerConfig.FLASH_PLAYER_ZURL?QiyiPlayerConfig.FLASH_PLAYER_ZURL:QiyiPlayerConfig.FLASH_PLAYER_URL,flashP2PCoreUrl:QiyiPlayerConfig.FLASH_P2P_URL,barrageurl:QiyiPlayerConfig.FLASH_BARRAGE_URL,preloader:QiyiPlayerConfig.FLASH_PRELOADER_URL,preloaderTw:QiyiPlayerConfig.FLASH_PRELOADER_URL_TW,qiyiProducedPreloader:QiyiPlayerConfig.FLASH_PRELOADER_PRODUCE,qiyiProducedPreloaderTw:QiyiPlayerConfig.FLASH_PRELOADER_PRODUCE_TW,exclusivePreloader:QiyiPlayerConfig.FLASH_PRELOADER_EXCLUSIVE,exclusivePreloaderTw:QiyiPlayerConfig.FLASH_PRELOADER_EXCLUSIVE_TW,vipPreloader:QiyiPlayerConfig.FLASH_PRELOADER_VIP,vipPreloaderTw:QiyiPlayerConfig.FLASH_PRELOADER_VIP_TW,iconPreloader:QiyiPlayerConfig.FLASH_PRELOADER_ICON,iconPreloaderTw:QiyiPlayerConfig.FLASH_PRELOADER_ICON_TW,iconProducedPreloader:QiyiPlayerConfig.FLASH_PRELOADER_ICON_PRODUCE,iconProducedPreloaderTw:QiyiPlayerConfig.FLASH_PRELOADER_ICON_PRODUCE_TW,iconExclusivePreloader:QiyiPlayerConfig.FLASH_PRELOADER_ICON_EXCLUSIVE,iconExclusivePreloaderTw:QiyiPlayerConfig.FLASH_PRELOADER_ICON_EXCLUSIVE_TW,tipdataurl:QiyiPlayerConfig.FLASH_TIP_XML,h5P2PUrl:QiyiPlayerConfig.H5_P2P_URL,h5P2PABSUrl:QiyiPlayerConfig.H5_P2P_ABS_URL,h5adsrc:QiyiPlayerConfig.H5_ARES_URL,h5AdPadSrc:QiyiPlayerConfig.H5_ARES_PAD_URL};return _(t)},b=function(){var e,t,i,a,d,l={};for(e=0;e<o.length;e++)d=o[e],t=d.getAttribute("data-widget-flashplayerparam"),i=d.getAttribute("data-flashplayerparam-flashvars"),a=d.getAttribute("data-h5playerparam-h5vars"),t&&"public"!==t&&(r[t]?(s(l,_(r[t]),!0),p(t)):(i&&s(l,_(u.query2Json(i)),!0),a&&s(l,_(u.query2Json(a)),!0)));if(n.length>0)for(e=0;e<n.length;e++)n[e]&&n[e].name&&s(l,_(n[e].attribute||{}),!0);return _(l)},x=function(e){var t={},i=function(t){return e.getAttribute(t)}("data-player-flashvars");return i=i?u.query2Json(i):{},s(t,_(i),!0),_(t)},w=function(){var e={},t=function(e){var t=u.query2Json(e),i=t.flashvars;i=i?u.query2Json(h(decodeURIComponent(i))):{};var a=t.share_sTime||t.s,n=t.share_eTime||t.e,r=a&&a.match(/(\d*)-.*?=(\d*)/);r&&(a=r[1],n=r[2]);var o={autoplay:t.autoplay,vid:t.videoid||t.vid,tvid:t.tvid||t.tvId,albumId:t.albumid,cyclePlay:t.cycleplay,isMember:t.ismember,exclusive:t.exclusive,qiyiProduced:t.qiyiProduced,share_sTime:a,share_eTime:n,outsite:t.outsite,cid:t.cid,isCid:t.isCid,vfrm:t.vfrm,isMute:t.isMute,showBarStyle:t.barStyle,local:t.local,components:t.components,isLoop:t.isLoop,masflag:t.masflag,ptid:t.ptid};return s(i,_(o),!0),i},i=t(h(window.location.search.replace(/([<>])/g,""))),a=t(h(window.location.hash.slice(1).replace(/([<>])/g,"")));s(e,_(i),!0),s(e,_(a),!0);for(var n in e)e[n]||!1===e[n]||delete e[n];return _(e)};return{mix:function(e,t){f();var i=window.__qlt,a="";i&&i.brs&&(a=i.brs||"");var n=e.tmplt||0,r={outsite:l.outsite,site:"iqiyiw",components:"feffffe6e",local:"cn_s",ost:"0",browserType:a,pageTmpltType:n};s(r,g(t),!0),s(r,m(),!0),s(r,v(),!0),s(r,y(),!0),s(r,b(),!0),s(r,x(t),!0),s(r,e,!0),s(r,w(),!0),(d.os.ios||d.os.android)&&(r.autoplay=!1);for(var o in r)"string"==typeof r[o]&&(r[o]=r[o].replace(/^http:/gi,""));return c=r,r},getVars:function(){return c}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){function n(){var e=r.browser.WECHAT,t=r.browser.CHROME&&d>=34&&!r.browser.EDGE,i=r.browser.SAFARI&&u>=10;return e||t||i||!1}var r=i(3),o=i(5),s=(i(6),navigator.userAgent),d=/chrome\/([\d\.]+) /gi.exec(s.toLowerCase());d=d?parseInt(d[1],10):0;var l=/firefox\/([\d\.]+)/gi.exec(s.toLowerCase());l=l?parseInt(l[1],10):0;var u=/Version\/([\d\.]+)/gi.exec(s.toLowerCase());u=u?parseFloat(u[1]):0;a.exports={flag:n,canaryUserPercent:function(){return!0},canaryAutoVd:function(){var e=o.get("QC005");if(e.length>1){var t=e.substr(0,1);if(0===parseInt(t,10))return!0}return!1}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){function a(e){var t=parseInt(e,10);return t<9e7&&(t=100*(t+9e5)),t}i.exports=a}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports={PlayerType_Html5VOD:"h5_VOD",PlayerType_FlashVOD:"flash_VOD",PlayerType_Null:"null",QYPLAYER_STATUS_LOAD_MOVIE:"loadmovie",QYPLAYER_STATUS_DATA_READY:"dataready",QYPLAYER_STATUS_AD_START_PLAY:"adstartplay",QYPLAYER_STATUS_AD_PLAYING:"adplaying",QYPLAYER_STATUS_AD_PAUSED:"adpaused",QYPLAYER_STATUS_AD_RESUMED:"adresumed",QYPLAYER_STATUS_READY:"ready",QYPLAYER_STATUS_START_PLAY:"startplay",QYPLAYER_STATUS_SEEKING:"seeking",QYPLAYER_STATUS_WAITING:"waiting",QYPLAYER_STATUS_PAUSED:"paused",QYPLAYER_STATUS_PLAYING:"playing",QYPLAYER_STATUS_STOPED:"stoped",QYPLAYER_STATUS_ERROR:"error",QYPLAYER_STATUS_END_PLAY:"endplay",QYPLAYER_LOAD_COMPLETE:"loadcomplete",QYPLAYER_LOAD_SUCCESS:"playerLoadSuccess",QYPLAYER_STATE_CHANGE:"playerStateChange",QYPLAYER_VIDEO_CHANGE:"videoChanged",QYPLAYER_VID_CHANGE:"vidChanged",QYPLAYER_NEXT_VIDEO:"playnextvideo",QYPLAYER_SET_LIGHT:"setLight",QYPLAYER_MOVETO_QITAN:"moveToQitan",QYPLAYER_SHOW_LOGIN_PANEL:"showLoginPanel",QYPLAYER_EXPAND:"expand",QYPLAYER_AUTHENTICATION_RESULE:"authenticationResult",QYPLAYER_RECHARGE:"recharge",QYPLAYER_SUBSCRIBE:"subscribe",QYPLAYER_REFRESH_PAGE:"refreshPage",QYPLAYER_DOWNLOAD:"download",QYPLAYER_REQUEST_VIDEOLIST:"requestVideoList",QYPLAYER_REQUEST_VIDEOLIST_BY_PAGE:"requestVideoListByPage",QYPLAYER_REQUEST_CHANGE_VIDEO:"requestChangeVideo",QYPLAYER_SWITCH_FULL_SCREEN:"switchFullScreen",QYPLAYER_ADD_TO_TABLE:"addToTable",QYPLAYER_FOCUS_TIPS:"focusTips",QYPLAYER_FOCUS_UPLOADER:"focusUploader",QYPLAYER_FIND_GOODS:"findGoods",QYPLAYER_PGC_FOLLOW:"pgcFollow",QYPLAYER_SHOW_DOWNLOAD_APPPOP:"showDownLoadAppPop",QYPLAYER_CHECK_CLIENT_INSTALL:"checkClientInstall",QYPLAYER_REQUEST_SEND_PINGBACK:"requestJSSendPB",QYPLAYER_DOSOMETHING:"setJsDoSomething",QYPLAYER_FOLLOW_UPNEXT_LOAD:"followUpNextLoad",QYPLAYER_USER_CLICK_SCORE:"userClickScore",QYPLAYER_BARRAGE_REPLAY:"barrageReply",QYPLAYER_BARRAGE_RECEIVE_DATA:"barrageReceiveData",QYPLAYER_SET_BARRAGE_INTERACT_INFO:"setBarrageInteractInfo",QYPLAYER_NOTIFY_BARRAGE_DATA:"notifyBarrageData",QYPLAYER_SET_BARRAGE_CONFIG_INFO:"setHasBarrageConfigInfo",QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO:"setHasBarrageChannelConfigInfo",QYPLAYER_BARRAGE_STATE_CHANGE:"barrageStateChange",QYPLAYER_BARRAGE_ALLOWED:"barrageAllowed",QYPLAYER_REQUEST_REWARD:"requestReward",QYPLAYER_COMMENT_ALLOWED:"commentAllowed",QYPLAYER_GET_PLAYER_LOG:"getQiyiPlayerLog",QYPLAYER_WEBFULLSCREEN_BEFORE_CHANGE:"beforeWebFullScreenChange",QYPLAYER_WEBFULLSCREEN_AFTER_CHANGE:"afterWebFullScreenChange",QYPLAYER_FULLSCREEN_BEFORE_CHANGE:"beforeFullScreenChange",QYPLAYER_FULLSCREEN_AFTER_CHANGE:"afterFullScreenChange",QYPLAYER_NOTIFY_GIFT_INFO:"notifyGiftInfo",QYPLAYER_NOTIFY_WRITE_FLASH_LOG:"writeFlashLog",QYPLAYER_SWITCH_PLAYER:"switchPlayer",QYPLAYER_NOTIFY_AD_START:"ADStart",QYPLAYER_NOTIFY_AD_END:"ADEnd",QYPLAYER_NOTIFY_AD_NOTIFY_INFO:"adnotifyinfo",QYPLAYER_NOTIFY_TIMEUPDATE:"timeUpdate",QYPLAYER_NOTIFY_SCORECHANGE:"scoreTaskChange",QYPLAYER_NOTIFY_FEEDBACK_SHOW:"feedbackShow",QYPLAYER_NOTIFY_FEEDBACK_HIDE:"feedbackHide",QYPLAYER_NOTIFY_USER_SEEK:"userSeek",QYPLAYER_H5_VIDEO_LOADSTART:"h5videoloadstart",QYPLAYER_H5_VIDEO_LOADEDMETADATA:"h5videoloadedmetadata",QYPLAYER_H5_DURATION_CHANGED:"h5durationchanged",QYPLAYER_H5_VOLUME_CHANGED:"h5volumechanged"}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a={},n={api:a,get:function(){return this.api},set:function(e){this.api=e}};i.exports=n}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(1),o=i(15),s=(i(7),i(18),i(8)),d=i(4),l=i(10),u=i(85),c=i(20),f=i(27),p=i(42),h=i(86),_=new r("baseEngine");a.exports=n("baseEngine",{extend:u,construct:function(e,t){var i=this;i._param=t,i._isAd=!1,i._startPlayTime=0,i._endPlayTime=0,i._currentFeaturePlayingDuration=0,i._vd=o.read(o.PLAYER_VD_KEY),i._realArea={width:16,height:9},i.autoVdValue=-1,h.init(i)},methods:{brokedown:function(e,t,i,a){var n=this;n.pause(),n.fire({type:c.Status_Error,data:{code:e,realcode:t,ec:i,vmsst:a}})},reset:function(){var e=this;e._vdSwitch=!1,e._isAd=!1,e._startPlayTime=0,e._movieinfo=null,clearTimeout(e._switchDelayTimer)},destroy:function(){this.fire({type:c.Status_Destroy}),this.removeAllEventsListener()},updateMovieInfo:function(e){var t=this;t._movieinfo&&(f.clear(t._movieinfo.tvid),t._preEngineMovieinfo=t._movieinfo),t.reset(),t._movieinfo=e,t.fire({type:c.NTF_MovieInfoChange,data:{preMovieInfo:t._preEngineMovieinfo||"",curMovieInfo:t._movieinfo}}),f.valid(e.tvid,!0),t.loadMovie(e.tvid,e.vid)},getEngineMovieInfo:function(){return this._movieinfo||{}},hasPreload:function(e,t){return!1},isPPT:function(){return this._param.ppt||"0"},ost:function(){var e=this;return 1===parseInt(e._param.ost,10)?1===parseInt(e._param.bd)||"true"===e._param.bd?1:2:0},clearData:function(){_.log("clear engine data!"),this._clearData()},abortAres:function(){var e=this;_.debug("ares call abort! current gas: "+r.stringify(e.getCurrentGas())),e.isAd()&&e._abortAres&&e._abortAres()},isTryWatch:function(){return!(!this._movieinfo||!this._movieinfo.isTryWatch)},getPreviewTime:function(){var e=this;return e._movieinfo?e._movieinfo.previewTime:1/0},recharge:function(e,t){this._noticeRecharge(e,t)},setStartPlayTime:function(e,t){var i=this;e<0?_.error("play start time set error!"):i._startPlayTime=i.isTryWatch()&&!t?0:e},getStartPlayTime:function(){return this._startPlayTime},getEndPlayTime:function(){return this._endPlayTime},getFeaturePlayingDuration:function(){return this._currentFeaturePlayingDuration},_findBestPlayVd:function(e,t,i){var a,n,r=this,o=!1,s=[],d=0;for(e=parseInt(e||r._vd||null,10),t=t||r.getVidl(),n=0;n<t.length;n++)s.push(t[n].vd),t[n].hasOwnProperty("segments")&&t[n].segments.length>0&&(d=t[n].vd),t[n].vd===e&&(o=!0);return a=o?e:-1!=s.indexOf(2)?2:-1!=s.indexOf(1)?1:-1!=s.indexOf(96)?96:t[t.length-1].vd,0!==d&&(a=d),a},getCurrentGas:function(){return this._getCurrentGas()},getCurrentVD:function(){return parseInt(this._vd,10)},getRealArea:function(){var e=this;if(e._movieinfo&&e._movieinfo.vidl)for(var t,i=e._movieinfo.vidl,a=0;a<i.length;a++)if(i[a].vd===e.getCurrentVD()){t=i[a],e._realArea=t.realArea;break}return e._realArea},getVidl:function(){var e=this,t=[];return e._movieinfo&&s.isArray(e._movieinfo.vidl)&&(t=e._movieinfo.vidl),t},switchVD:function(e,t){var i,a=this,n=a._movieinfo.vidl;if(e===a.autoVdValue&&a._switchVD)return _.log("definition changing: "+e),a._switchVD({vd:e}),void a.setAutoVdUsing(!0);a.setAutoVdUsing(!1),a.__switchToVd=e,a.__isManualAction=t;for(var r=0;r<n.length;r++)if(n[r].vd===e){i=n[r];break}a._switchVD&&(a._vdSwitch=!0,a._vdSwitchVideoPaused=a.isPaused(),_.log("definition changing: "+e),a._switchVD(i))},skipPrelude:function(e){var t=this;"boolean"==typeof e&&t.fire({type:c.NTF_SetSkipPrelude,data:{skip:e}})},_checkAuthTime:function(e){var t=this,i=!0;return t._movieinfo&&t._movieinfo.isVIP&&e>=t._movieinfo.previewTime&&(t._noticeRecharge("Q00304"),i=!1),i},_checkSecondAuthTime:function(e){var t=this,i=t.getFeaturePlayingDuration();if(!t._isRequestAuthing&&t._movieinfo&&t._movieinfo.isVIP&&!t._movieinfo._hasSendSencondAuthRemote&&i>t._movieinfo.authRTime)try{var a=t._movieinfo.vidl.filter(function(e){return e.vd===t._movieinfo.vd})[0],n=function(e,t){for(var i,a=0;a<t.length;a++)if(e<=t[a].endTime){i=t[a];break}return i||(i=t[0]),i}(e,a.segments),r=n.__url,o=l.query2Json(r),s=l.filename(r);d(o,{filename:s,tvid:t._movieinfo.tvid,aid:t._movieinfo.albumId,shareFlag:1}),t._isRequestAuthing=!0,p.request(o,function(e){_.debug("second boss "),t._isRequestAuthing=!1,t._movieinfo._hasSendSencondAuthRemote=!0},function(){t._isRequestAuthing=!1,t._movieinfo._hasSendSencondAuthRemote=!0})}catch(e){_.error(e&&e.stack?e.stack:e)}},_noticeVidChanged:function(e){var t=this,i=void 0===e||e;t._vdSwitch=!1,i?(t.__switchToVd>0&&(t._vd=t.__switchToVd,t.__isManualAction&&o.write(o.PLAYER_VD_KEY,t._vd)),t.fire({type:c.NTF_VDChanged})):t.fire({type:c.NTF_VDChangeFail,data:t.__switchToVd}),t.__switchToVd=0,t.__isManualAction=!1},_noticeTvidChanged:function(){var e=this;e._vdSwitch=!1,_.log("notice tvid changed!"),e.fire({type:c.NTF_TVIDChanged})},_noticeDataPreloaded:function(){var e=this;e.fire({type:c.NTF_VRSPreloaded,data:e._preloadedMovieInfo})},_noticeReJointPreload:function(){var e=this;e.fire({type:c.NTF_ReJointPreload,data:e._preloadedMovieInfo})},_noticeDataStart:function(){var e=this;e.fire({type:c.NTF_VRSStart,data:e._movieinfo})},_noticeDataDone:function(){var e=this;e.fire({type:c.NTF_VRSDone,data:e._movieinfo}),e._preEngineMovieinfo&&e._noticeTvidChanged()},_noticeDataReady:function(){var e=this;e.fire({type:c.NTF_VRSPreReady,data:e._movieinfo}),e.fire({type:c.NTF_VRSReady,data:e._movieinfo})},_getIsTennisContent:function(){var e=this;if(e._movieinfo.vipTypes&&e._movieinfo.vipTypes.length>0)for(var t=0;t<e._movieinfo.vipTypes.length;t++)if(1==e._movieinfo.vipTypes[t])return!0;return!1},_noticeRecharge:function(e,t){var i=this;i._movieinfo.rc_code=e,i.pause(!1,!0),i.fire({type:c.NTF_Recharge,data:{tvid:i._movieinfo.tvid,vid:i._movieinfo.vid,code:e,isTennisContent:i._getIsTennisContent(),from:t||0,origin:i._param.origin||i._param.parentId,vipTypes:i._movieinfo.vipTypes}})},autoVdEnabled:function(){return!1},setAutoVdEnabled:function(e){},autoVdUsing:function(){return!1},setAutoVdUsing:function(e){},autoVdAlgot:function(){return""}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a=0,n="engine_events_";i.exports={Evt_StartFromHistory:n+ ++a,Evt_SkipHeader:n+ ++a,Evt_SkipTail:n+ ++a,Evt_StartShareTime:n+ ++a,Evt_PreloadAD:n+ ++a,Enjoy_Evt_PlayEnd:n+ ++a,Enjoy_Evt_PanleShow:n+ ++a}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(2),r=i(0),o=i(1),s=i(12),d=i(8),l=i(18),u=i(30),c=(new o("DataSegments"),[]),f=r("DataSegments",{extend:n,construct:function(){var e=this;e.length=0,e.firstCRUD=!0},methods:{setData:function(e){var t=this;c.splice(0,c.length);for(var i,a,n,r,o=0,s=null,d=e.length;o<d;o++)i=e[o],a=i.videoInfo,n=a.vidl.filter(function(e){return e.vid===a.vid}),n.length>0&&(s=n[0].rate),r={identifier:u.getIdentifier(a),order:i.order,rollType:function(e){var t="null",i=e.__gas.offset;return!0===e.ad&&(0===i?t="preroll":i>0&&(t="midroll")),t}(a),ad:a.ad,vip:a.vip,gas:a.__gas,episodeId:parseInt(a.ad?l.getEpisodeId(a.__gas.videoEventId):a.tvId,10),tvid:parseInt(a.tvId,10),vid:a.vid,rate:s,startTime:a.startTime,endTime:a.endTime,showStartTime:a.showStartTime,showEndTime:a.showEndTime},Object.defineProperty(r,"realStartTime",{get:function(){return this.realStartTime}.bind(i)}),Object.defineProperty(r,"realEndTime",{get:function(){return this.realEndTime}.bind(i)}),c.push(r);t.length=c.length,t._changed()},getData:function(){return c},update:function(){this.setData(this.proxy.getFragments())},setProxy:function(e){this.proxy=e},_change:function(){this.fire({type:"change",data:c})},_changed:function(){var e=this;e.firstCRUD=!1,e.fire({type:"changed",data:c})},getSegmentsByTvid:function(e){var t=[];return e=parseInt(e,10),c.forEach(function(i,a,n){i.tvid===e&&t.push(i)}),t},getSegmentByIdentifier:function(e){var t=null;this.update();for(var i=0;i<c.length;i++)if(c[i].identifier===e){t=c[i];break}return t},getSegmentByOrder:function(e){var t=null;if(this.update(),e>=0)for(var i=0,a=c.length;i<a&&(t=c[i],t.order!==e);i++)t=null;return t},getOrderById:function(e){var t=-1;this.update();for(var i=0;i<c.length;i++)if(c[i].identifier===e){t=c[i].order;break}return t},getIndex:function(e){var t=-1,i=e;this.update();for(var a,n=0;n<c.length;n++)if(a=c[n],d.isObject(a)&&d.isObject(i)&&a.identifier===i.identifier){t=n;break}return t},getAresPres:function(e){var t=[];e=parseInt(e,10),this.update();for(var i,a=0,n=c.length;a<n;a++)i=c[a],!0===i.ad&&"preroll"===i.rollType&&(isNaN(e)||null===e?t.push(i):parseInt(i.episodeId,10)===e&&t.push(i)),i=null;return t},getAresMids:function(e){var t=[];e=parseInt(e,10),this.update();for(var i,a=0,n=c.length;a<n;a++)i=c[a],!0===i.ad&&"midroll"===i.rollType&&(isNaN(e)||null===e?t.push(i):parseInt(i.episodeId,10)===e&&t.push(i)),i=null;return t},getFeaturesBySegment:function(e){var t=[];if(e){this.update();var i=function(e,t){return s(e+t)},a=i(e.tvid,e.vid);t=c.filter(function(e){return!e.ad&&a===i(e.tvid,e.vid)}).sort(function(e,t){return e.gas-t.gas})}return t},inFeaturesShowSection:function(e,t){var i=this,a=!1,n=i.getFeaturesBySegment(e);return n.length>0&&t>=n[0].showStartTime&&t<=n[n.length-1].showEndTime&&(a=!0),a},isFeatureFirstSegment:function(e){var t,i,a=this,n=!1,r=a.getFeaturesBySegment(e);return r.length>0&&(t=r[0],i=e.realStartTime,e.gas===t.gas&&(n=!0,n=null!==i&&!isNaN(i)&&i>=0?i===t.realStartTime:e.order===t.order&&e.vid===t.vid)),n},isFeatureEndSegment:function(e){var t,i,a=this,n=!1,r=a.getFeaturesBySegment(e);return r.length>0&&(t=r[r.length-1],i=e.realEndTime,e.gas===t.gas&&(n=!0,n=null!==i&&!isNaN(i)&&i>0?i===t.realEndTime:e.order===t.order&&e.vid===t.vid)),n},isEndSegment:function(e){var t,i=!1;return e&&(this.update(),t=c[c.length-1],i=e.gas===t.gas&&e.order===t.order),i}}});a.exports=new f}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(2),r=i(0),o=i(8),s=i(1),d=i(9),l=i(4),u=new s("PBProxy"),c=[],f=[],p=r("PBProxy",{extend:n,construct:function(){var e=this;e._p_=null,e._v_=null,e.version="",e._ready=!1,e.clearFragmentsFlag=!0,e._actions={}},methods:{__setVideo:function(e){this._v_=e},__setSDK:function(e,t){var i=this;i._p_=e,i.version=e.version,e.init(i._v_,i.__sdkListener.bind(i),u,d.getFluid()||d.getJsuid(),t),e.setLoad(!0),i._ready=!0,i.fire({type:"ready"})},__sdkListener:function(e,t,i){e=e||"",t="undefined"===t||void 0===t||null===t?"":t,i="undefined"===i||void 0===i||null===i?"":i;var a,n,r,o=this,s=e.split("_")[1]||"";"muted"!==s&&(o._state=s);var d={state:s,arg1:t,arg2:i};if("startFragment"===s||"endFragment"===s){var c=(t||"").toString().split("_");a=parseInt(c[0],10),n=c[1],r=parseInt(c[2],10),l(d,{vid:n,order:"number"==typeof a?a:o.getPlayOrder(),time:i},!0)}"progress"!=s&&u.debug("pbproxy state: "+s+", arg1: "+t+", arg2: "+i),"startFragment"===s&&o.hasFragment(n,r)&&o.fire({type:"orderChange",data:d}),("startFragment"!==s&&"endFragment"!==s||("startFragment"===s||"endFragment"===s)&&o.hasFragment(n,r))&&o.fire({type:"stateChange",data:d}),"endFragment"===s&&o.hasFragment(n,r)&&o.fire({type:"orderWillChange",data:d})},__setDispatchResult:function(e){u.log("call p2p -- ,params: func = dispatchResult(设置f4v信息)"),this._p_.dispatchResult=e},resetProxy:function(){var e=this;e.clearFragmentsFlag=!0,e._actions={},e.reset(null),e.reset(e._v_)},isReady:function(){return!!this._ready},ready:function(e){var t=this,i=function(){for(var e=0;e<c.length;e++)!function(e,t){setTimeout(function(){e[t].call()},0)}(c,e)};c.push(e),t._ready?i():t.un("ready").once("ready",function(){i()})},sleeping:function(){return!0===this._p_.__sleeping},getState:function(){return this._state||""},hasFragment:function(e,t){for(var i,a=!1,n=this.getFragments(),r=0;r<n.length;r++)if(i=n[r].videoInfo,i.vid===e&&i.index===t){a=!0;break}return a},getFragments:function(){var e=this;return e._p_?e._p_.fragments:[]},reset:function(e){var t=this;u.log("call p2p -- ,params: func = reset"),t._p_&&(t._p_.reset(e),t._p_.__sleeping=null==e)},fillFragments:function(e){var t=this;if(o.isArray(e)&&e.length>0){var i=t.getFragments();0===i.length||t.clearFragmentsFlag?(t.freshFragments(e,!1),t.seek(0,e[0].showStartTime,{run:!0}),t.hasAction("pause")||t.resume(),t.clearFragmentsFlag=!1):t.addFragment(e,i[i.length-1].order,Number.MAX_VALUE)}else u.warn("fillFragments params $fragmentList: "+e)},freshFragments:function(e,t,i,a){var n=this;n._p_&&(e=(e||[]).map(function(e){return l({},e,!0)}),n._p_.freshFragments.call(n._p_,e,t,i,a),f=e,n.fire({type:"fragmentsChange"}))},addFragment:function(e,t,i){var a=this;return a._p_&&(e=(e||[]).map(function(e){return l({},e,!0)}),a._p_.addFragment.call(a._p_,e,t,i),a.fire({type:"fragmentsChange"})),-1},removeFragment:function(e,t){var i=this;i._p_&&(u.debug("removeFragment, $start: "+e+", $length: "+t),i._p_.removeFragment(e,t),i.fire({type:"fragmentsChange"}))},seek:function(e,t,i){var a=this,n=l({run:!1,jump:!1},i||{},!0);t<0?u.error("the seek time ("+t+") is incorrect!"):a._p_&&a._p_.seek.call(a._p_,e,t,n)},resume:function(){var e=this;e._p_&&(e._actions.pause=!1,e._actions.play=!0,e._p_.resume())},pause:function(){var e=this;e._p_&&(e._actions.pause=!0,e._actions.play=!1,e._p_.pause())},getBuffer:function(){var e=this,t={};if(e._p_){var i=e._p_.bufferInfo;t={order:i.order,time:i.time}}return t},getPlayInfo:function(){var e=this;return e._p_?e._p_.playInfo:{}},getPlayOrder:function(){return this.getPlayInfo().order},getLastOrder:function(){var e=this.getFragments();return 0===e.length?0:e[e.length-1].order},getFragByOrder:function(e){for(var t,i=this.getFragments(),a=0;a<i.length;a++)if(i[a].order===e){t=i[a];break}return t},log:function(){var e=this;e._p_&&u.warn("enable pb log: "+e._p_.p2plog())},hasAction:function(e){return!0===this._actions[e]},isDone:function(){var e=this,t=!1;return e._p_&&(t=!!e._p_.done),t},switchPage:function(){var e=this,t=!1;return e._p_&&(t=!!e._p_.switchPage),t}}});a.exports=new p}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r=i(10),o=i(0),s=i(8),d=i(4),l=i(2),u=i(1),c=i(32),f=i(7),p=i(15),h=i(33),_=i(26),g=i(56),m=i(42),v=(i(57),i(30),i(29)),y=i(45),b=i(58),x=i(67),w=i(68),T=new u("DataProvider"),S={},k="",A=null,E=["313","391","392","393","411","412","413","414","491","492","493","501","502","1500","1501","1502","1503"],P=o("DataProvider",{extend:l,construct:function(e,t){var i=this;i._movieinfo={},i._movieinfo.tvid=e,i._movieinfo.vid=t,i._movieinfo.oldTvid=e,i.tryCount=0,i.maxTryCount=3,i.vmsErrorRetry=!1,i.vmsErrorEry=!0},methods:{_startRequest:function(){var e=this,t=e.tryCount>0;e.tryCount++;var i;return h.read(h.PLAYER_TEMP_VD_KEY)?(i=h.read(h.PLAYER_TEMP_VD_KEY),i=_.getNewVd(i)):(i=p.read(p.PLAYER_VD_KEY)||2,i=_.getNewVd(i)),T.info("load movieInfo from vrs,params: tvid = "+e._movieinfo.tvid+", vid = "+e._movieinfo.vid+", islogin = "+f.isLogin()+", vd = "+i),A=g.request({params:{tvid:e._movieinfo.tvid,vid:e._movieinfo.vid,vd:i,ppt:n.isPPT(),ost:n.ost(),tryCount:e.tryCount-1,switchvd:!1},hostUseIP:t},e._parse.bind(e),function(t){var i={A00001:2,A00302:30,A00301:30,U00001:22,P00001:101,P00002:102},a=t.code,n=t.data?t.data.st:"",r=t.hasOwnProperty("data")&&t.data.hasOwnProperty("retry")?t.data.retry:"";k="A00001"===a?"707":"A00302"===a?"708":"P00001"===a?"701":"P00002"===a?"702":a,T.info("load movieInfo from vrs, movieinfo error,params: vmsCode = "+t.code+", code = "+k),y.isEnjoyPlayer&&n&&(505==n||507==n)?e._reject(0,15,a,k,"",r):e._reject(0,i[a],a,k,"",r);var o=A.getReqParams();if(o){var s=o.tvId,d=o.sgti;v.sendErrorAuto(s,k,0,"",d)}})},_reject:function(e,t,i,a,n,r){T.warn("type:"+e+",e:"+t+",o:"+i);var o=this;o.fire({type:"reject",data:{type:e,code:t,originalCode:i,ec:a,vmsst:n,movieinfo:o._movieinfo,retry:r}})},_resolve:function(){var e=this;T.log("movieInfo baseinfo,params: tvid = "+e._movieinfo.tvid+", vid = "+e._movieinfo.vid+", isTryWatch(试看) = "+e._movieinfo.isTryWatch+", member(会员片源) = "+e._movieinfo.isVIP+", albumId = "+e._movieinfo.albumId+", channelID = "+e._movieinfo.cid+", qipuId = "+e._movieinfo.videoQipuId+", headTime(片头) = "+e._movieinfo.prelude.headTime+", tailTime(片尾) = "+e._movieinfo.prelude.tailTime+", duration(时长) = "+e._movieinfo.duration+", isTennisContent(网球会员内容) = "+e._getIsTennisContent()+", logoOpen(水印总开关) = "+e._movieinfo.logoOpen+", topLogoOpen(右上角) = "+e._movieinfo.topLogoOpen+", lowerLogoOpen(右下角) = "+e._movieinfo.lowerLogoOpen+", exclusive(独播) = "+e._movieinfo.exclusive+", qiyiProduced(自制) = "+e._movieinfo.qiyiProduced+", nextTvid = "+e._movieinfo.nextTvid+", nextVid = "+e._movieinfo.nextVid),T.log("movieInfo definition,params: current = "+e._movieinfo.vd+", user = "+n._vd),e.fire({type:"resolve",data:e._movieinfo})},_parse:function(e){var t=this;T.info("load movieInfo from vrs ok");var i,a="",o=A.getReqParams();o&&(i=o.tvid,a=o.sgti);var l=e.hasOwnProperty("data")&&e.data.hasOwnProperty("retry")?e.data.retry:"";try{var u=e.data;if(!function(e){if(null==e.data||!e.data.hasOwnProperty("st"))return T.error("movieinfo error,params:type = data.data null or st is lose"),k="103",t._reject(0,1,"dash_st_lose",k,"",l),v.sendErrorAuto(i,k,0,"",a),!1;var n=parseInt(e.data.st,10);if(y.isEnjoyPlayer()&&(505===n||506===n))return T.warn("站外禁播"),t._reject(0,15,"",k,"",l),!1;var r;if(!(100<n&&n<200)){switch(n){case 304:case 401:case 405:case 406:r=10;break;case 501:r=12;break;case 502:r=13;break;case 601:case 602:case 701:r=14;break;default:r=1}return k="104",T.error("movieinfo error,params: st = "+n),t._reject(0,r,e.code+"-"+n,k,n,l),v.sendErrorAuto(i,k,n,"",a),!1}return!0}(e))return;T.debug("dash.st checked"),t._movieinfo.isTryWatch=!1,t._movieinfo.previewTime=1/0,t._movieinfo.originalData=e,t._movieinfo.tvid=u.tvid,t._movieinfo.albumId=u.aid||"",t._movieinfo.cid=u.cid,t._movieinfo.sid=0,t._movieinfo.vipTypes=u.content.vipTypes,t._movieinfo.ugc=c.isUGC(t._movieinfo.tvid),t._movieinfo.isVIP=u.content.bossStatus>0,t._movieinfo.videoQipuId=u.tvid,t._movieinfo.prelude={headTime:u.p.bt,tailTime:u.p.et},t._movieinfo.qiyiProduced=1===u.content.isProduced,t._movieinfo.exclusive=1===u.content.exclusive,t._movieinfo.logoOpen=!0,t._movieinfo.topLogoOpen=!0,t._movieinfo.lowerLogoOpen=!0,u.p.lgh&&(t._movieinfo.lowerLogoOpen=-1==u.p.lgh.indexOf(2)&&-1==u.p.lgh.indexOf("2"),t._movieinfo.topLogoOpen=-1==u.p.lgh.indexOf(1)&&-1==u.p.lgh.indexOf("1"));var f=u.p.wmarkPos||0;if(t._movieinfo.logoOpen=-1!=f,t._movieinfo.vidl=[],u.program&&u.program.video){var p={vsInfo:u.program.video,isVIP:t._movieinfo.isVIP,tvid:t._movieinfo.tvid,cid:t._movieinfo.cid,sid:t._movieinfo.sid,albumId:t._movieinfo.albumId},h=Array.isArray(p.vsInfo)&&p.vsInfo.length>0&&"f4v"===p.vsInfo[0].ff?b.analyzeVds(p):x.analyzeVds(p);t._movieinfo.vidl=h,t._movieinfo.isAccurateTimeStamp=!!h.isAccurateTimeStamp,t._movieinfo.vidl.sort(function(e,t){return e.vd>t.vd}),t._movieinfo.vidl.unshift(t._movieinfo.vidl.pop())}t._movieinfo.audl={},u.program&&u.program.audio&&(t._movieinfo.audio=u.program.audio),t._movieinfo.duration=0,t._movieinfo.drmType=t._movieinfo.vidl.length>0?t._movieinfo.vidl[0].drmType:1;var _={};if(u.program&&u.program.stl&&u.program.stl.length>0)for(var g=u.program.stl,S=0;S<g.length;S++)1==parseInt(g[S].pre)&&(t._movieinfo.subtitlesUrl=s.protocolRevise(u.dstl)+g[S].xml),_[g[S].lid]=s.protocolRevise(u.dstl)+g[S].xml;t._movieinfo.subtitlesUrlMap=_,t._movieinfo.f4vInfo={};var E=e.data.p.pano;if(!E||2!=E.type&&3!=E.type&&4!=E.type?t._movieinfo.is3D=0:t._movieinfo.is3D=2,Object.defineProperty(t._movieinfo,"vd",{get:function(){return n._findBestPlayVd(null,this.vidl,"fs")}}),t._movieinfo.isVIP){var P={};if(t._movieinfo.vidl.length>0){var q=t._movieinfo.vidl.filter(function(e){return e.vd===t._movieinfo.vd});if(q.length>0){var I=q[0],L=I.segments[0].__url;P=r.query2Json(L);var D=r.filename(L);d(P,{filename:D,tvid:t._movieinfo.tvid,aid:t._movieinfo.albumId})}}var C=u.boss_ts?"boss_ts":"boss";u.hasOwnProperty(C)&&u[C].hasOwnProperty("code")?m.analyzeAuthData(P,u[C],function(e,i){t._vipAuthSuccess.bind(t)(e,i)},function(e,i,a){t._vipAuthFail.bind(t)(e,i,a)}):t._vipAuth(P)}else t._resolve(),t._movieinfo.audio&&(t._movieinfo.audl=w.analyzeAds(t._movieinfo))}catch(e){t._movieinfo=null,T.error(e.stack),t._reject(0,10000001,"vmserror",k,"",l)}},_getIsTennisContent:function(){var e=this;if(e._movieinfo.vipTypes&&e._movieinfo.vipTypes.length>0)for(var t=0;t<e._movieinfo.vipTypes.length;t++)if(1==e._movieinfo.vipTypes[t])return!0;return!1},_vipAuthSuccess:function(e,t){var i=this,a=m.getPreviewTime(e);i._movieinfo.isTryWatch=1===parseInt(t.data.prv,10),i._movieinfo.previewType=t.previewType,i._movieinfo.previewTime=0===a?1/0:a,i._movieinfo.authTipType=i._getIsTennisContent()?10:parseInt(t.data.tip_type,10),i._movieinfo.authRTime=60*t.data.rtime*1e3,T.log("check charge definition pass,params: isTryWatch = "+i._movieinfo.isTryWatch+", previewType = "+i._movieinfo.previewType+", previewTime = "+a),i._movieinfo.vidl.filter(function(e){return e.segments.map(function(e){return e._setBoss&&e._setBoss(t),e}),e.vd===i._movieinfo.vd}),i._movieinfo.audio&&(i._movieinfo.boss=t,i._movieinfo.audl=w.analyzeAds(i._movieinfo)),i._resolve()},_vipAuthFail:function(e,t,i){var a=this;if(a._movieinfo.isTryWatch=!1,i&&(a._movieinfo.previewType=i.previewType),T.log("check charge definition error,params: code = "+e+", msg = "+t),e){var n="8"+e.slice(-3);"Q00312"===e||"Q00311"===e||"Q00501"===e?a._reject(2,22,e,n):a._reject(1,e)}else a._reject(0,21,t,"8000")},_vipAuth:function(e){var t=this;m.request(e,function(e,i){t._vipAuthSuccess.bind(t)(e,i)},function(e,i,a){t._vipAuthFail.bind(t)(e,i,a)})}}});a.exports={setEngine:function(e){n=e},getPid:function(e,t){return e+"_"+t},getPromise:function(e){var t,i=e.split("_")[0],a=e.split("_")[1];return S[e]&&"pending"===S[e].st?t=S[e].pm:(S[e]={st:"pending",data:void 0,params:null,pm:null},t=new Promise(function(t,n){function r(){o=s._startRequest()}var o,s=new P(i,a);s.on("resolve",function(i){var a=i.data;t(a),S[e]&&(S[e].st="fulfilled",S[e].params=o.getReqParams(),S[e].data=a)}),s.on("reject",function(t){var i=t.data,a=i&&("P00001"===i.originalCode||"A00020"===i.originalCode)&&s.tryCount<s.maxTryCount;i.vmsst&&E.indexOf(i.vmsst.toString())>-1||i.hasOwnProperty("retry")&&1==i.retry?s.vmsErrorRetry=!0:s.vmsErrorRetry=!1,a?r():s.vmsErrorRetry&&s.vmsErrorEry?(s.vmsErrorEry=!1,r()):(n(i),S[e]&&(S[e].st="rejected",S[e].data=i))}),r()}),S[e].pm=t),t},isPending:function(e){return S[e]&&"pending"===S[e].st},hasPreload:function(e){return!(!S[e]||"fulfilled"!==S[e].st)},getPreloadData:function(e){return S[e].data},getParams:function(e){return S[e]?S[e].params:null},getData:function(e){return S[e].data},clearAll:function(){S={},A&&(A.setReqAbandoned(),A.getXhrRequest()&&A.getXhrRequest().abort()),T.info("clear data provider & abandon vms request.")}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(3),r=i(12),o=i(10),s=i(11),d=i(7),l=i(9),u=i(1),c=i(6),f=i(14),p=i(8),h=i(25),_=i(34),g=i(35),m=i(43),v=i(29),y=i(17),b=i(36),x=new u("mixer"),w=0;a.exports={request:function(e,t,i){var a,u=e.params,T=!!e.hostUseIP,S=null,k=e.params.tryCount||0,A=!1;return b.probeSupport().then(function(e){e&&e.drm&&e.drm["com.widevine.alpha"]?(m.openBit(1,42),x.log("dashremote feature open widevine")):m.closeBit(1,42),e&&e.drm&&e.drm["com.microsoft.playready"]&&(!n.browser.EDGE||18!=n.browser.version)?(m.openBit(4,5),x.log("dashremote feature open playready")):m.closeBit(4,5),d.getVipTypes(function(e){var b=u.tvid,E=u.vid,P=u.vd,q=u.ppt,I=u.ost,L=w>0?w:(new Date).getTime();w=0;var D=n.getPtid(c.isTWLocale());y.sTime_vms=new Date-y.pgct,v.sendVrsRequestPingback(),S=function(){var e={tvid:b,bid:P,vid:E,src:D,vt:0,rs:1,uid:d.getUid(),ori:"pcw",ps:u.switchvd?1:0,tm:L,qd_v:"1",k_uid:l.getFluid()||l.getJsuid(),pt:0,d:0,s:"",lid:"",cf:"",ct:"",authKey:r(r("")+L+b),k_tag:1,ost:I,ppt:q,dfp:h.get(),locale:c.isTraditionalChinese()?"zh_tw":"zh_cn",prio:u.prio||JSON.stringify({ff:"f4v",code:2}),pck:d.passportCookie(),k_err_retries:k};return(n.os.ios||n.os.android)&&(e.ori="h5"),u.src&&(e.src=u.src),u.preIdAll&&(e.preIdAll=u.preIdAll),u.lid&&(e.lid=u.lid,e.cf=2),-1!=e.prio.indexOf("m3u8")?e.k_ft1=m.getM3U8FT1():-1!=e.prio.indexOf("mp4")?e.k_ft1=m.getMP4FT1():(e.k_ft1=m.getFT1(),e.k_ft4=m.getFT4()),c.isTraditionalChinese()&&(e.locale="zh_tw"),_.isBoss()&&(e.vv="821d3c731e374feaa629dcdaab7c394b"),T&&(e.ecode="701"),e.bop=JSON.stringify({version:"7.0",dfp:h.get()}),e}();var C=function(n){if(A)return void x.log("start vms request is abandoned!!!");a=s.jsonp({url:n,params:S,memory:!0,timeout:5e3,beforeSend:function(t){var i=o.parse(t.url).host;e.forEach(function(e){t.url+="&ut="+e,p.isArray(S.ut)||(S.ut=[]),S.ut.push(parseInt(e,10))});var a="iloveiqiyi";try{var n=t.url.replace(new RegExp("^(http|https)://"+i,"ig"),"");T&&(n=n.replace("/3ea/420a8433732a6c99d1eae98fea69e55d","")),a=f.cmd5x(n)}catch(e){x.error("cmd5x: "+(e.message?e.message:e))}return t.url+="&vf="+a,x.log("load movieInfo from vrs, request,params: url = "+t.url),t},success:function(e){if(A)return void x.log("start vms request success callback is abandoned!!!");if(y.usedTime_vms=new Date-y.pgct-y.sTime_vms,v.sendVrsReadyPingback(y.usedTime_vms),e&&e.hasOwnProperty("code"))"A00000"===e.code?t(e):("A00020"===e.code&&e.tm&&(w=e.tm),i(e));else{var a={};a.code="P00002",i(a)}},failure:function(e){if(A)return void x.log("start vms request failure callback is abandoned!!!");x.error("dash fail raw json data->"+JSON.stringify(e));var t={};t.code="P00001",i(t)}})};T?s.ajax({url:g.vmsAccess,timeout:2e3,withCredentials:!1,success:function(e){if(e&&"string"==typeof e){var t=e.split(";"),i=Math.floor(Math.random()*t.length),a=t[i];C(g.vmsIPSuc.replace("{{IP}}",a))}else C(g.vmsIPFail)},failure:function(){C(g.vmsIPFail)}}):C(g.vmsUrl)})}),{getReqParams:function(){return S},getXhrRequest:function(){return a},setReqAbandoned:function(){A=!0}}}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(26);a.exports=n("Definition",{construct:function(e,t,i,a,n,o,s,d,l,u,c){var f=this;f.vd=e,f.bid=r.getNewVd(e),f.vid=t,f.duration=a,f.segments=n||[],f.realArea=o,f.isUsable=s,f.isLimit=d||!1,f.limitReason=l||[],f.fileFormat=i,f.m3u8=u,f.drmType=c||1},methods:{}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(1),r=i(26),o=i(57),s=i(30);new n("AnalyzeVidls");a.exports={analyzeVds:function(e,t){var i,a=e.vsInfo,n=e.isVIP,d=e.tvid,l=e.cid,u=e.sid||0,c=e.albumId;t||(i=[]);for(var f=[],p=0;p<a.length;p++){var h=0,_=a[p].fs,g=a[p].ff,m=0,v=a[p].vid,y=r.getOldVd(a[p].bid),b=a[p].s,x={},w=[],T=0;if(_){m=_.length;var S=a[p].scrsz.split("x");x={width:S[0],height:S[1]}}f.push({vid:v,rate:y});for(var k=0;k<m;k++){var A,E=_[k],P=E.s,q=E.d,I=E.l,L=E.b;A=P>-1?k>0&&0===P?h:P:h;var D=A+q,C=A,F=D,R=new s(!1,n,I,k,d,v,f,c,l,u,q,L,C,F,A,D);w.push(R),h+=q,k===m-1&&(T=P>-1?k>0&&0===P?h:P+q:h)}var O=!1,B=!0,N=[];void 0!==b&&(O=!0,B=0===parseInt(b,10),N=a[p].vut||[]);var M=new o(y,v,g,T,w,x,B,O,N);if(t)y==t&&w.length>0&&(i=M);else{for(var V=!1,U=0;U<i.length;U++)i[U].vd==M.vd&&(V=!0,0===i[U].segments.length&&M.segments.length>0&&(i[U]=M));V||i.push(M)}}return i}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t){function i(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var r=a(n);return[i].concat(n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"})).concat([r]).join("\n")}return[i].join("\n")}function a(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var a=i(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a}).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(a[r]=!0)}for(n=0;n<e.length;n++){var o=e[n];"number"==typeof o[0]&&a[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),t.push(o))}},t}},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a={};i.exports={getVars:function(){return a},setVars:function(e){a=e}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports=function(){var e=!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach,t=window.MediaSource||window.WebKitMediaSource,i=window.SourceBuffer||window.WebKitSourceBuffer,a=window.URL,n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');!i||i.prototype&&"function"==typeof i.prototype.appendBuffer&&i.prototype.remove;return e&&!!a&&!!n}()}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a={getVer:function(){var e="";try{e=navigator.plugins["Shockwave Flash"].description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){}}return"string"!=typeof e&&(e=""),(e||"0 r0").match(/\d+/g)},checkFlashLzma:function(){var e=a.getVer();return e.length>2&&(parseInt(e[0],10)>=12||11===parseInt(e[0],10)&&parseInt(e[1],10)>=4)},outsite:function(){var e,t=[];try{e=!window.parent.location.href}catch(i){for(0===t.length&&(e=!0);t.length;)if(-1===document.referrer.indexOf(t.pop())){e=!0;break}}return e+""}()};i.exports=a}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(2),r=i(0),o=i(9),s=i(1),d=i(48),l=function(){},u=new s("BaseAdapter"),c=r("BaseAdapter",{extend:n,construct:function(){var e=this;e.__canRecordEvents=!0,o.init(),e.eventsRecorder={},e.__evtRecorderTimer=setTimeout(function(){e.stopRecordEvents()},3e5);var t=e.fire;e.fire=function(i){t.call(e,i);var a=i.type;e.__canRecordEvents&&(e.eventsRecorder[a]||(e.eventsRecorder[a]=[]),"playerStateChange"===a?e.eventsRecorder[a].push(i):e.eventsRecorder[a]=[i])},e.isSmallWindow=null},methods:{load:function(e){u.info("js call func,params: type = load(加载视频), data = "+e),this._player.load(e)},stopRecordEvents:function(){var e=this;e.__canRecordEvents=!1,clearTimeout(e.__evtRecorderTimer),setTimeout(function(){e.eventsRecorder={}},1e4)},destroy:function(){var e=this;u.log("js call func,params: type = player destroy(销毁播放器)"),e._player.destroy(),e.fire({type:"destroy"}),n.clearAll()},play:function(){u.info("js call func,params: type = play(播放)"),this._player.play()},resume:function(){u.info("js call func,params: type = resume"),this._player.resume()},replay:function(){u.info("js call func,params: type = replay"),this._player.replay()},pause:function(){u.info("js call func,params: type = pause"),this._player.pause()},seek:function(e){u.info("js call func,params: type = seek, time = "+e),this._player.seek(e)},stop:function(){u.info("js call func,params: type = stop(停止播放)"),this._player.stop()},getPlayInfo:function(e){this._player.getPlayInfo(e)},getVideoInfo:function(e){this._player.getVideoInfo(e,this._tvid,this._videoid)},getPlayerId:function(){return this._player.getPlayerId()},setQiyiUserLogin:function(e){u.info("js call func,params: type = setQiyiUserLogin(修改登录状态), param = "+s.stringify(e)),this._player.setQiyiUserLogin(e)},switchVideo:function(e){u.info("js call func,params: type = switchVideo(影片切换), param = "+s.stringify(e)),e.tvid&&(e.tvid=d(e.tvid)),this._player.switchVideo(e)},switchNextVideo:function(){u.info("js call func,params: type = switchNextVideo(下一集)"),this._player.switchNextVideo()},switchPreVideo:function(){u.info("js call func,params: type = switchPreVideo(上一集)"),this._player.switchPreVideo()},addVideoList:function(e){u.info("js call func,params: type = addVideoList(添加联播列表)"),this._player.addVideoList(e)},removeVideoList:function(e){u.info("js call func,params: type = removeVideoList(从联播列表删除), data = "+e),this._player.removeVideoList(e)},setSmallWindowMode:function(e){var t=this;t.isSmallWindow!==e&&(u.info("js call func,params: type = setSmallWindowMode(设置小窗,1为小窗), data = "+e),t.isSmallWindow=e,t._player.setSmallWindowMode&&t._player.setSmallWindowMode(e))},jsNotifyAdManager:function(e){this._player.jsNotifyAdManager(e)},getQiyiPlayerLog:function(e){try{this._player.getQiyiPlayerLog(e)}catch(e){}},clearBanWord:function(){this._player.clearBanWord()},addBanWord:function(e){void 0!==e&&""!==e&&this._player.addBanWord(e)},removeBanWord:function(e){this._player.removeBanWord(e)},requestBarrageData:function(e){this._player.requestBarrageData({index:e})},notyfyADInfo:function(e){this._player.notyfyADInfo(e)},getIsInMainVideo:l,setCyclePlay:l,getQiyiPlayerInfo:l,getQiyiVideoInfo:l,setQiyiSubscribe:l,setLight:l,expand:l,setBarrageStatus:l,setSelfSendBarrageInfo:l,setBarrageSetting:l,setActivityNoticeInfo:l,zoomQiyiVideo:l,setTimeListener:l,getHasBarrageConfigInfo:l,getHasBarrageChannelConfigInfo:l,getHasBarrageGiftInfo:l,getCommentConfigInfo:l,setSubscribeInfo:l,setSubscribeStateChange:l,setContinuePlayState:l,getSwitchVideoType:l,forceToSaveCurVideoInfo:l,getContinueData:l,setQiyiVisits:l,initQiyiVideo:l,getQiyiPlayerType:l,setPlayerWebFullScreen:l,setPlayerFullScreen:l,setRightBarStatus:l}});a.exports=c}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r=i(22),o=i(1),s=new o("comscore"),d=!1,l=function(){return function(){return!n&&d&&(n=new ns_.ReducedRequirementsStreamingAnalytics({publisherId:"26181340"})),n}}();!function(){r.seriesLoadScripts("//static.iqiyi.com/js/player_v1/sdk/comscore.streaming.6.1.0.170130.min.js",function(e){e?d=!0:(d=!1,s.error("loader comscore sdk failed!"))})}(),a.exports={getInstance:l,playVideoContent:function(e,t){d&&l().playVideoContentPart(e,t)},playVideoAdvertisement:function(e,t){if(d){var i=e||{ns_st_cl:"0"};l().playVideoAdvertisement(i,t)}},stop:function(){d&&l().stop()},destroy:function(){n=null}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports={win:"01010031010000000000",win_tw:"01010031010010000000",Mac:"01080031010000000000",Mac_tw:"01080031010010000000",aPad:"03020031010000000000",aPad_tw:"03020031010010000000",iPad:"03030031010000000000",iPad_tw:"03030031010010000000",phone:"02020031010000000000",phone_tw:"02020031010010000000"}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(14),r=i(65),o=i(3),s=i(6),d="";a.exports={cmd5xtmts:n.cmd5xtmts,cmd5x:n.cmd5x,getSrc:function(){return d=o.browser.iPad?s.isTWLocale()?r.iPad_tw:r.iPad:o.os.mac?s.isTWLocale()?r.Mac_tw:r.Mac:o.os.androidTablet?s.isTWLocale()?r.aPad_tw:r.aPad:s.isTWLocale()?r.phone_tw:r.phone,s.isTWLocale()&&(d=o.getPtid(!0)),d}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r=i(1),o=i(26),s=i(57),d=i(36),l=new r("AnalyzeVidls");a.exports={analyzeVds:function(e,t){var i,a=e.vsInfo,r=(e.isVIP,e.tvid,e.cid,e.sid,e.albumId,null);n||(n=new d.manifestParser),t||(i=[]);for(var u=0;u<a.length;u++){var c=a[u],f=c.fs,p=c.ff,h=c.vid,_=o.getOldVd(c.bid),g=c.s,m=c.drmType,v={},y=[],b=c.duration||0,x="";if(f){f.length;var w=c.scrsz.split("x");v={width:w[0],height:w[1]}}switch(p){case"ts":"string"==typeof c.m3u8&&c.m3u8.length>0&&(x=c.m3u8,n.reset(),n.push({type:d.ManifestTypes.HLS,chunk:x}),n.end(),r=n.isAccurateTimeStamp,y=n.segments.map(function(e){return e.__url=e.uri.toString(),e}));break;case"m4s":if("string"==typeof c.m3u8&&c.m3u8.length>0){var T=JSON.parse(c.m3u8);Array.isArray(T.watermark_group)&&T.watermark_group.length>0&&(x=T.payload[T.watermark_group[0]],x.duration=c.duration,c.drm&&"A00000"===c.drm.code&&(x.drm={keySystemServer:c.drm.license_host},7===m?x.drm.keySystem="com.widevine.alpha":8===m&&(x.drm.keySystem="com.microsoft.playready"),l.log("analyze  drmType 7widevine/8 = "+m+",keySystem"+x.drm.keySystem+", server = "+x.drm.keySystemServer)),n.reset(),n.push({type:d.ManifestTypes.DASH,chunk:x}),n.end(),y=n.tracks.video.segments.map(function(e){return e.__url=e.uri.toString(),e}))}}var S=!1,k=!0,A=[];void 0!==g&&(S=!0,k=0===parseInt(g,10),A=c.vut||[]);var E=new s(_,h,p,b,y,v,k,S,A,x,m);if(t)_==t&&(i=E);else{for(var P=!1,q=0;q<i.length;q++)i[q].vd==E.vd&&(P=!0,0===i[q].segments.length&&E.segments.length>0&&(i[q]=E));P||i.push(E)}}return null!=r&&(i.isAccurateTimeStamp=r),i}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(9),r=i(10),o=i(14),s=(i(5),i(36),i(42)),d=i(66),l=i(75),u=window.location.protocol;a.exports={analyzeAds:function(e){var t={},i=[];t.types=[],t.audio={};for(var a=e.audio,n=0;n<a.length;n++){var r={};if(-1==i.indexOf(a[n].lid)&&(r.id=a[n].lid,r.type=l[r.id],r.ispre=1==a[n].ispre?1:0,1==a[n].ispre&&(e.currentLid=a[n].lid),i.push(a[n].lid),t.types.push(r)),a[n].fs){t.audio=a[n];for(var o=a[n].fs,s=0;s<o.length;s++)o[s].dpl=this.dispatchUrl(e,o[s].l)}}return t.types.sort(function(e,t){return e.id>t.id?1:-1}),t},dispatchUrl:function(e,t){var i=u+"//data.video.iqiyi.com/videos"+t,a=r.filename(i);if(e.isVIP){var l=e.boss.data.t||"",c=e.boss.data.u,f=o.cmd5x(l+a);i=i+"&t="+l+"&vid="+e.vid+"&ibt="+f+"&cid=afbe8fd3d73448c9&ib=4&ptime="+s.getPreviewTime(e.tvid)+"&QY00001="+c}else i=i+"&cross-domain=1&qyid="+(n.getFluid()||n.getJsuid())+"&qypid="+e.tvid+"_"+d.getSrc();return i}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=(i(5),i(3)),r=i(14),o=i(12),s=i(9),d=i(6),l=i(7),u=i(25);a.exports={getFLVContent:function(e,t){var i={};i.segments=[];for(var a=null,c=0;c<e.segments.length;c++)a={totalBytes:e.segments[c].size,startTime:e.segments[c].startTime/1e3,duration:(e.segments[c].endTime-e.segments[c].startTime)/1e3,dispatUrl:e.segments[c].__url,bossKey:""},e.segments[c].boss&&e.segments[c].boss.data&&"A00000"==e.segments[c].boss.code&&(a.bossKey=e.segments[c].boss.data.t),i.segments.push(a);return i.dispatchParams={movieIsMember:t.isVIP,communicationlId:"afbe8fd3d73448c9",tvid:t.tvid,vid:t.vid,albumId:t.albumId,QY00001:"",mi:"tv_"+t.albumId+"_"+t.tvid+"_"+t.vid,auth_ptime:t.previewTime,pf:n.getPtid(d.isTWLocale()),playerType:"main",currentDefinition:e.vd,key:""},e.segments.length>0&&e.segments[0].boss&&e.segments[0].boss.data&&"A00000"==e.segments[0].boss.code&&(i.dispatchParams.key=e.segments[0].boss.data.t,i.dispatchParams.QY00001=e.segments[0].boss.data.u),i.dispatcherFunc={cmd5x:r.cmd5x,md5:o,UUID:s,user:l,dfp:u,i18n:d},i},getFLVADContent:function(e){var t={};t.segments=[];for(var i=null,a=0;a<e.length;a++)i={totalBytes:e[a].size,startTime:e[a].startTime/1e3,duration:(e[a].endTime-e[a].startTime)/1e3,dispatUrl:e[a].__url,bossKey:"",isAd:e[a].ad,gas:e[a].__gas},t.segments.push(i);return t.dispatchParams={},t.dispatcherFunc={},t}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r=i(4),o=i(35),s=i(9),d=i(11),l=i(5),u=i(25),c=i(3),f=i(7),p=(i(14),i(6)),h=i(22),_=i(1),g=i(24),m=i(21),v=i(17),y=i(28),b="",x="",w=-1,T=!1,S={1:"303",2:"302",6:"304",11:"405",12:"401",13:"401",21:"302"},k="01010021010000000000",A=function(){c.browser.weixin?c.os.ios?k="02038001010000000000":c.os.android&&(k="02028001010000000000"):c.os.ios?k=c.os.iosMobile?"02030031010000000000":"03030021010000000000":c.os.android&&(k=c.os.androidMobile?"02020031010000000000":"03020021010000000000"),p.isTWLocale()&&(k=c.getPtid(!0))};A(),setTimeout(A,2e3);var E="1",P="10",q="101";c.browser.iPad?(E="2",P="20",q="202"):(c.os.ios||c.os.android)&&(E="2",P="20",q="201");var I=E+"_"+P+"_"+q,L="window";c.os.ios||c.os.mac?L="mac":c.os.android&&(L="android");var D="",C={},F=0,R=function(e){var t="";if(e.drmType)switch(e.drmType){case 7:t=1}return t},O=function(e){!function(e){N(e,function(){n.getVideoInfo(function(t){f.isVip(function(i){var a=n.getMovieInfo(),h={u:s.getFluid()||"",pu:f.getUid()||"",rn:Math.random(),p1:I,v:b,dfp:u.get()||"",ce:s.getWeid(),stime:(new Date).getTime(),c1:a.cid||"",r:t.tvid||"",ve:s.getEid(),ht:a.isVIP?1:0,pt:n.getCurrenttime(),hu:i?1:-1,isdm:F,duby:0,ra:D,clt:"",s2:"",s3:"",ps2:l.get("QC007")||"",ps3:"",ps4:"",stype:"",br:c.browser.userAgent,mod:p.local()||"",purl:window.location.href,tmplt:v.pageTmpltType,ptid:k,os:L,nu:s.getIsNewUser()?1:0,vfm:C.vfm||l.get("QP005")||"",coop:"",ispre:n.isTryWatch()?1:0,videotp:void 0!==a.is3D?a.is3D:"",drm:R(a),plyrv:"",rfr:window.document.referrer,fatherid:a.albumId||"",stauto:0,vvfrom:C.vvfrom||""};n.getPicInPic()?h.s3="80720_playerctrl_picinpic":h.s3=n.h5vars.vfrmrst||"",e&&e.t&&r(h,{pagev:n.h5vars.pagev||"",s4:n.h5vars.vfrmblk||""}),"QVS"===n.getEngineType()&&null!==n.getCurrManifestType()&&r(h,{mft:n.getCurrManifestType()});var _;_=g.isFullScreen()?4:m.isWebFullScreen()?7:n.isSmallWindowMode||n.getPicInPic()?2:3,r(h,{wint:_});var y,x=n.getEngineType().toLocaleLowerCase();if(x){switch(x){case"data":y=0;break;case"http":y=1;break;case"qvs":y=2}r(h,{engt:y})}var w=0,T=0,S=-1;if(navigator.connection){var A=navigator.connection.downlink,E=(navigator.connection.effectiveType||"").toLowerCase(),P=(navigator.connection.type||"").toLowerCase();switch(E){case"4g":T=18;break;case"3g":T=17;break;case"2g":T=16;break;case"slow-2g":T=14}switch(P){case"cellular":T=15;break;case"wifi":T=1;break;case"ethernet":T=13;break;case"bluetooth":T=21;break;case"wimax":T=22}if("QVS"===n.getEngineType()){var q=n.getDataBufferInfo();q&&(S=q.len)}w=A,r(h,{bw:w,ntwk:T,dl:S})}r(h,e),d.beacon(h,o.pingbackV6Url)})})})}(e)},B=function(e,t,i,a,n){var r={};r._bizType="vrs_logRecord",r.errorcode=t,r.st=i,r.tvid=e,r.version=b,r.f4v=a,r.sgti=n,r.log_content=_.getLog();for(var o=JSON.stringify(r),s=new Uint8Array(o.length),d=0;d<o.length;d++)s[d]=o.charCodeAt(d);var l=new XMLHttpRequest;l.open("POST","//tracker-sns.iqiyi.com/naja/log/collect_log"),l.send(s)},N=function(e,t){e&&parseInt(e.t,10)>0&&void 0===window.dfp?h.seriesLoadScripts("//security.iqiyi.com/static/cook/v1/cooksdk.js",function(e){e&&void 0!==window.dfp&&(u.setSDK(window.dfp),t())}):t()};a.exports={sendVrsRequestPingback:function(){O({t:"init"})},sendVrsReadyPingback:function(){O({t:"ready"})},sendADStartPlayPingback:function(){O({t:15})},sendStartPlayPingback:function(){O({t:1}),-1===w&&this.sendTimingPingback()},sendTimingPingback:function(){w=0;var e=0;clearTimeout(w);var t=!0,i=function(){n.getCurrStatus()===y.Status_Playing&&(e+=1e3,e%15e3==0&&t?(t=!1,O({t:2,tm:15})):e%3e4==0&&O({t:2,tm:30})),clearTimeout(w),w=setTimeout(i,1e3)};i()},sendEndPlayPingback:function(e){var t,i=n._playingSpend||0;switch(e){case 1:t=4;break;case 2:t=6;break;case 3:t=7;break;default:t=0}O({t:13,tm:i,endtp:t})},sendWaitingPingback:function(e){e?(T||(T=!0,O({t:8,jampt:"ad"})),this.sendErrorPlayPingback("","4016"),"QVS"===n.getEngineType()&&this.sendErrorPlayPingback("","QVS-4016")):(T||(T=!0,O({t:8,jampt:"video"})),this.sendErrorPlayPingback("","4015"),"QVS"===n.getEngineType()&&this.sendErrorPlayPingback("","QVS-4015"))},sendPlayingPingback:function(){T&&(T=!1)},sendErrorPlayPingback:function(e,t,i){O({t:0,ec:t||S[e],psrc:i||""})},sendProcessesTimePingback:function(){if(v.needRecord){v.needRecord=!1;var e={};e.t=10,v.usedTime_userInfo>0&&(e.tm1=v.usedTime_userInfo+","+v.sTime_userInfo),v.usedTime_P2PCore>0&&(e.tm2=v.usedTime_P2PCore+","+v.sTime_P2PCore),v.usedTime_history>0&&(e.tm7=v.usedTime_history+","+v.sTime_history),v.usedTime_pageShowVideo>0&&v.usedTime_pageShowVideo<12e4&&(e.tm8=v.usedTime_pageShowVideo+",0"),v.usedTime_showVideo>0&&v.usedTime_showVideo<6e4&&(e.tm9=v.usedTime_showVideo+","+v.sTime_showVideo),v.usedTime_vms>0&&(e.tm10=v.usedTime_vms+","+v.sTime_vms),v.usedTime_adInit>0&&(e.tm11=v.usedTime_adInit+","+v.sTime_adInit),v.usedTime_selfLoaded>0&&v.usedTime_selfLoaded<6e4&&(e.tm12=v.usedTime_selfLoaded+",0"),e.br=v.browserType||"",e.tmplt=v.pageTmpltType,e.re=window.screen.width+"*"+window.screen.height,O(e)}},init:function(e){w=0,n=e,b=n.holders.playerVersion,x="main"===n.holders.playerType?0:1},setCurrentVD:function(e){D=e},setPbInfo:function(e){C=e},setPbisdm:function(e){F=e},sendErrorAuto:B}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(2),r=i(0),o=i(8),s=[],d=[],l=r("StatusPool",{construct:function(){},extend:n,methods:{add:function(e,t){var i=this;if(o.isArray(e))for(var a=0;a<e.length;a++)i.add(e[a],t);else{var n=!0===t?d:s;-1===n.indexOf(e)&&n.push(e)}},remove:function(e){var t=this;if(o.isArray(e))for(var i=0;i<e.length;i++)t.remove(e[i]);else{var a=s.indexOf(e);a>-1&&s.splice(a,1)}},removeAll:function(){s.splice(0,s.length)},has:function(e){return s.concat(d).indexOf(e)>-1}}});a.exports=new l}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a=function(e){function t(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function i(e){return e.prefix}function a(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function n(e,t,i,a){for(var n=0;n<e.length;n++){var r=e[n];if("string"==typeof r){if(r==a)break}else if(r instanceof RegExp){if(r.test(a))break}else if("function"==typeof r&&r(t,i,a))break}return n!=e.length}function r(t,i,a){switch(e.arrayAccessForm){case"property":t[i]instanceof Array?t[i+"_asArray"]=t[i]:t[i+"_asArray"]=[t[i]]}!(t[i]instanceof Array)&&e.arrayAccessFormPaths.length>0&&n(e.arrayAccessFormPaths,t,i,a)&&(t[i]=[t[i]])}function o(e){var t=e.split(/[-T:+Z]/g),i=new Date(t[0],t[1]-1,t[2]),a=t[5].split(".");if(i.setHours(t[3],t[4],a[0]),a.length>1&&i.setMilliseconds(a[1]),t[6]&&t[7]){var n=60*t[6]+Number(t[7]);n=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*n:n),i.setMinutes(i.getMinutes()-n-i.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(i=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())));return i}function s(t,i,a){if(e.datetimeAccessFormPaths.length>0){var r=a.split(".#")[0];return n(e.datetimeAccessFormPaths,t,i,r)?o(t):t}return t}function d(t,i,a,r){return!(i==w.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||n(e.xmlElementsFilter,t,a,r)}function l(a,n){if(a.nodeType==w.DOCUMENT_NODE){for(var o=new Object,u=a.childNodes,c=0;c<u.length;c++){var f=u.item(c);if(f.nodeType==w.ELEMENT_NODE){var p=t(f);o[p]=l(f,p)}}return o}if(a.nodeType==w.ELEMENT_NODE){var o=new Object;o.__cnt=0;for(var u=a.childNodes,c=0;c<u.length;c++){var f=u.item(c),p=t(f);if(f.nodeType!=w.COMMENT_NODE){var h=n+"."+p;d(o,f.nodeType,p,h)&&(o.__cnt++,null==o[p]?(o[p]=l(f,h),r(o,p,h)):(null!=o[p]&&(o[p]instanceof Array||(o[p]=[o[p]],r(o,p,h))),o[p][o[p].length]=l(f,h)))}}for(var _=0;_<a.attributes.length;_++){var g=a.attributes.item(_);o.__cnt++,o[e.attributePrefix+g.name]=g.value}var m=i(a);return null!=m&&""!=m&&(o.__cnt++,o.__prefix=m),null!=o["#text"]&&(o.__text=o["#text"],o.__text instanceof Array&&(o.__text=o.__text.join("\n")),e.stripWhitespaces&&(o.__text=o.__text.trim()),delete o["#text"],"property"==e.arrayAccessForm&&delete o["#text_asArray"],o.__text=s(o.__text,p,n+"."+p)),null!=o["#cdata-section"]&&(o.__cdata=o["#cdata-section"],delete o["#cdata-section"],"property"==e.arrayAccessForm&&delete o["#cdata-section_asArray"]),0==o.__cnt&&"text"==e.emptyNodeForm?o="":1==o.__cnt&&null!=o.__text?o=o.__text:1!=o.__cnt||null==o.__cdata||e.keepCData?o.__cnt>1&&null!=o.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==o.__text||""==o.__text.trim())&&delete o.__text:o=o.__cdata,delete o.__cnt,!e.enableToStringFunc||null==o.__text&&null==o.__cdata||(o.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),o}if(a.nodeType==w.TEXT_NODE||a.nodeType==w.CDATA_SECTION_NODE)return a.nodeValue}function u(t,i,n,r){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+i;if(null!=n)for(var s=0;s<n.length;s++){var d=n[s],l=t[d];e.escapeMode&&(l=a(l)),o+=" "+d.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?o+='"'+l+'"':o+="'"+l+"'"}return o+=r?"/>":">"}function c(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function f(e,t){return-1!==e.indexOf(t,e.length-t.length)}function p(t,i){return!!("property"==e.arrayAccessForm&&f(i.toString(),"_asArray")||0==i.toString().indexOf(e.attributePrefix)||0==i.toString().indexOf("__")||t[i]instanceof Function)}function h(e){var t=0;if(e instanceof Object)for(var i in e)p(e,i)||t++;return t}function _(t,i,a){return 0==e.jsonPropertiesFilter.length||""==a||n(e.jsonPropertiesFilter,t,i,a)}function g(t){var i=[];if(t instanceof Object)for(var a in t)-1==a.toString().indexOf("__")&&0==a.toString().indexOf(e.attributePrefix)&&i.push(a);return i}function m(t){var i="";return null!=t.__cdata&&(i+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?i+=a(t.__text):i+=t.__text),i}function v(t){var i="";return t instanceof Object?i+=m(t):null!=t&&(e.escapeMode?i+=a(t):i+=t),i}function y(e,t){return""===e?t:e+"."+t}function b(e,t,i,a){var n="";if(0==e.length)n+=u(e,t,i,!0);else for(var r=0;r<e.length;r++)n+=u(e[r],t,g(e[r]),!1),n+=x(e[r],y(a,t)),n+=c(e[r],t);return n}function x(e,t){var i="";if(h(e)>0)for(var a in e)if(!p(e,a)&&(""==t||_(e,a,y(t,a)))){var n=e[a],r=g(n);if(null==n||void 0==n)i+=u(n,a,r,!0);else if(n instanceof Object)if(n instanceof Array)i+=b(n,a,r,t);else if(n instanceof Date)i+=u(n,a,r,!1),i+=n.toISOString(),i+=c(n,a);else{var o=h(n);o>0||null!=n.__text||null!=n.__cdata?(i+=u(n,a,r,!1),i+=x(n,y(t,a)),i+=c(n,a)):i+=u(n,a,r,!0)}else i+=u(n,a,r,!1),i+=v(n),i+=c(n,a)}return i+=v(e)}e=e||{},function(){void 0===e.escapeMode&&(e.escapeMode=!0),e.attributePrefix=e.attributePrefix||"_",e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1)}();var w={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;var i;if(window.DOMParser){var a=new window.DOMParser,n=null;if(!t)try{n=a.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){n=null}try{i=a.parseFromString(e,"text/xml"),null!=n&&i.getElementsByTagNameNS(n,"parsererror").length>0&&(i=null)}catch(e){i=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e);return i},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?o(e):e},this.xml2json=function(e){return l(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return x(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}};i.exports=a}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(2),r=i(0),o=i(1),s=i(46),d=new o("h5PlayerAPIProxy"),l=r("h5PlayerAPIProxy",{construct:function(){var e=this;e.__api_callbacks=[];var t=e.fire;e.fire=function(i){t.call(e,i),e.__api_callbacks.forEach(function(t){t.call(e,i)})},e.addCallback=function(e){this.__api_callbacks.push(e)}},extend:n,methods:{callJsDoSomething:function(e,t){d.log("call js setJsDoSomething: "+e);var i={};i.type="setJsDoSomething",i.data=t||{},i.data.origin=s.getVars().origin||"flash",i.data.handleType=e,this.fire(i)},callJsFindGoods:function(e){d.log("call js callJsFindGoods, time:: "+e);var t={};t.type="findGoods",t.data={origin:s.getVars().origin||"flash",time:e},this.fire(t)},callJsRequestVideoListByPage:function(e){d.log("call js requestVideoListByPage, pageno:: "+e);var t={};t.type="requestVideoListByPage",t.data={origin:s.getVars().origin||"flash",pageno:e},this.fire(t)},callJsRequestChangeVideo:function(e){d.log("call js requestChangeVideo, videoIndex:: "+e.pd);var t={};t.type="requestChangeVideo",t.data={origin:s.getVars().origin||"flash",pd:e.pd,vid:e.vid,tvid:e.tvid},this.fire(t)}}});a.exports=new l}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r=i(1),o=i(2),s=i(0),d=i(13),l=i(8),u=i(16).CORE_TYPES,c=new r("SkinBase"),f=!1,p=!1;a.exports=s("SkinBase",{construct:function(e,t,i,a){var n=this;n.core=i,n.view=a,n.videoWrapper=d(e),n.plgContainer=d(t);var r=function(){if(!0===p){p=!1;var e=n.plugins,t="";try{t="checkPlugin, disable in ad , enable not ad,params: isAd = "+n.core.isAd()+", name:"}catch(e){}for(var i=0;i<e.length;i++)t+=e[i].name+" ",n._checkPlugin(e[i]);c.info(t)}};i.on(u.NTF_VideoChange,function(){p=!0,f=!1,"HTTP"===i.getEngineType()&&r()}).on(u.Status_AdInit,function(){p=!0,f=!0,r()}).on(u.Status_AresPlay,function(){p=!0,f=!0,r()}).on(u.Status_AresEnded,function(){setTimeout(function(){p=!0,f=!1,r()},100)}).on(u.NTF_Error,function(e){var t=e.data||{},a=t.code;f!==i.isAd()&&(p=!0,f=i.isAd()),a&&r()});var o=0;i.on(u.NTF_TimeUpdate,function(){clearTimeout(o),o=setTimeout(function(){f!==i.isAd()&&(p=!0),f=i.isAd(),r()},0)}).on(u.NTF_AD_TimeUpdate,function(){clearTimeout(o),o=setTimeout(function(){f!==i.isAd()&&(p=!0),f=i.isAd(),r()},0)})},extend:o,props:{plugins:[],styleQueues:[],paramObject:{}},methods:{destroy:function(){if(n&&l.isArray(n.plugins)){for(var e=0;e<n.plugins.length;e++)try{n.plugins[e].destroy()}catch(e){}n.plugins.splice(0,n.plugins.length)}n=void 0},registerPlugins:function(e){n||(n=this);var t=n,i=t.core;e=e||[],e.forEach(function(e){try{var a=new e(t,i);if(!a.name)throw new Error("plugin name is null");a.init(),t._checkPlugin(a),t.plugins.push(a)}catch(e){c.error(e.stack)}})},loadSkin:function(e,t,i){var a=this;t&&i&&(n.paramObject[i]=t),new e(a.videoWrapper,a.plgContainer,a.core,n)},_checkPlugin:function(e){var t=this;switch(t.core.getEngineType()){case"DATA":f=t.core.isAd()}f?e.disable():e.enable()}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports={1:"国语",2:"粤语",3:"英语",4:"法语",5:"韩语",6:"日语",101:"南非荷兰语",102:"阿尔巴尼亚语",103:"阿拉伯语",104:"亚美尼亚语",105:"阿塞拜疆语",106:"白俄罗斯语",107:"波斯尼亚语",108:"保加利亚语",109:"缅甸语",111:"加泰罗尼亚语",112:"克罗地亚语",113:"捷克语",114:"丹麦语",115:"荷兰语",117:"爱沙尼亚语",118:"波斯语",119:"芬兰语",121:"盖尔语",122:"德语",123:"希腊语",124:"古吉拉特语",125:"希伯来语",126:"印地语",127:"匈牙利语",128:"冰岛语",129:"印度尼西亚语",130:"意大利语",132:"高棉语",134:"老挝语",135:"拉脱维亚语",136:"立陶宛语",137:"马其顿语",138:"马来西亚语",140:"蒙古语",141:"挪威语",142:"波兰语",143:"葡萄牙语",144:"旁遮普语",145:"罗马尼亚语",146:"俄语",147:"塞尔维亚语",148:"信德语",149:"斯洛伐克语",150:"斯洛文尼亚语",151:"索马里语",152:"西班牙语",153:"斯瓦西里语",154:"瑞典语",155:"泰米尔语",156:"鞑靼语",157:"泰语",158:"土耳其语",159:"乌克兰语",160:"乌尔都语",161:"越南语",162:"威尔士语",163:"意第绪语",164:"约鲁巴语",166:"四川话",167:"陕西话",168:"闽南语",169:"上海话",170:"其他"}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=window,r=i(77),o=i(22),s=n.QiyiPlayerConfig.H5_PLAYER_URL;Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,i=+arguments[1]||0;if(0===t||isNaN(i)||i>=t)return-1;for(i<0&&(i=t+i)<0&&(i=0);i<t;++i)if(this[i]===e)return i;return-1});var d=n.QiyiPlayerCallbacks||[],l=function(e){for(var t=0;t<d.length;t++)d[t].call(null,e);d=[]};d.length>0&&l(r);var u=function(e){if(e){this.isActived=!0;var t=function(e){var t=/\/.+_(\w+)\.js$/gi.exec(e);return t&&2===t.length?t[1]:""},i=function(e){var i=r.version,a=t(e);""!==a&&i!==a?(n.QiyiPlayerCallbacks=d,o.seriesLoadScripts(e,function(e){})):l(r)};-1===d.indexOf(e)&&d.push(e),n.QiyiPlayerConfig?i(s):o.seriesLoadScripts("//static.iqiyi.com/js/player/config/online.js",function(t){t?i(s):"function"==typeof e&&e(null)})}};a.exports={ready:u}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(3),r=(i(11),i(10)),o=i(61),s=i(5),d=i(6),l=i(1),u=i(78),c=(i(25),i(47)),f=i(79),p=i(48),h=i(41),_=i(46),g=i(49),m=i(80),v=i(117),y={},b=new l("PlayerManager"),x={},w=navigator.userAgent,T=function(e){return y[e]},S=function(e){var t=!0,i=e.tvid||"",a=e.vid||"",n=T(e.parentId);return e.hasOwnProperty("parentId")?null!=n?t=!1:""!==i&&""!==a||(t=!1):t=!1,t},k=function(e){var t=x[e]||[];x[e]=[];for(var i=0;i<t.length;i++)!function(e,t){setTimeout(function(){e[t].call()},0)}(t,i)},A=function(e,t){var i=T(e),a=x[e]||[];x[e]=a,a.push(t),i&&i.__loadsuccess&&k(e)};a.exports={createPlayer:function(e){b.log("createPlayer,params: "+l.stringify(e));var t=document.getElementById(e.parentId),i=_.mix(e,t),a=!1;if(!S(i))return null;i.tvid=p(i.tvid),i.local&&d.setLocale(i.local),i.ptid&&n.setPtid(i.ptid),i.width&&i.height&&(t.style.width=parseInt(i.width,10)+"px",t.style.height=parseInt(i.height,10)+"px");var x=r.query("__playertype__"),T=function(){return s.get("player_forcedType")||null}(),A=T||i.playerType||function(){var e=g.PlayerType_FlashVOD,t=!0===i.usevr||"true"===i.usevr,d=/chrome\/([\d\.]+) /gi.exec(w.toLowerCase());d=d?parseInt(d[1],10):0;var l=/firefox\/([\d\.]+)/gi.exec(w.toLowerCase());l=l?parseInt(l[1],10):0;var u=/Version\/([\d\.]+)/gi.exec(w.toLowerCase());u=u?parseFloat(u[1]):0;var f=function(){return o&&("true"===r.query("__playerp2p__")||(n.browser.CHROME&&d>=43||n.browser.FIREFOX&&l>=57)&&"1"!==s.get("QP004"))}();if(a=function(){return(n.browser.CHROME&&d>=43||n.browser.FIREFOX&&l>=57)&&!t}(),x)switch(x){case"h5":e=g.PlayerType_Html5VOD;break;case"flash":e=g.PlayerType_FlashVOD}else(n.os.ios||n.os.android||!t&&(f||c.flag()))&&(e=g.PlayerType_Html5VOD);return"1"===s.get("QP004")&&(e=g.PlayerType_FlashVOD),e}();i.plyct=+new Date,b.log("<APP>播放器类型： 点播 - "+A+", .v = "+h),b.log("initialize info,params: location = "+window.location.href+", env: "+w.toLowerCase()),b.log("initialize parameter,params: info =="+l.stringify(i));u.createhvt("UA-iqiyi-10000901",i.irs);var E;switch(A){case g.PlayerType_Html5VOD:s.set("QP001",1,{expires:31536e6,path:"/",domain:"iqiyi.com"}),E=new m(i);break;case g.PlayerType_FlashVOD:s.set("QP001",0,{expires:31536e6,path:"/",domain:"iqiyi.com"}),E=new v(i,a)}y[i.parentId]=E,E.on(g.QYPLAYER_LOAD_SUCCESS,function(e){E.__loadsuccess=!0;var t=e.data.playerId;k(t)});var P="";return E.on(g.QYPLAYER_STATE_CHANGE,function(e){var t=e.data.state.toLocaleLowerCase(),i={};switch(i.tvid=e.data.tvid||"",i.albumId=e.data.albumId||"",i.cid=e.data.cid||"",i.playerVersion=e.data.playerVersion||"",t){case g.QYPLAYER_STATUS_END_PLAY:var a,n=e.data.tvid;e.data.spend?(a=e.data.spend,i.duration=e.data.spend):a=e.data.prePlayingDuration,u.hvt_end(n,a),f.sendEndPlayPingback(i);break;case g.QYPLAYER_STATUS_START_PLAY:case g.QYPLAYER_STATUS_AD_START_PLAY:var r=e.data.tvid;r!==P&&(u.hvt_start(r),f.sendStartPlayPingback(i),P=r)}}),E.on(g.QYPLAYER_STATUS_DATA_READY,function(e){var t=e.data.tvid;u.hvt_init(t)}),E.on(g.QYPLAYER_VID_CHANGE,function(e){var t,i,a={};e.data.preMovieInfo?(t=e.data.preMovieInfo.tvid,i=e.data.preMovieInfo.spend,a.albumId=e.data.preMovieInfo.albumId||"",a.cid=e.data.preMovieInfo.cid||""):(t=e.data.preTvid,i=e.data.prePlayingDuration),a.playerVersion=e.data.playerVersion||"",a.tvid=t||"",a.duration=i||"",u.hvt_end(t,i),f.sendEndPlayPingback(a)}),E.on("destroy",function(){var e=this.getPlayerId();delete y[e]}),E},getPlayerById:function(e){return T(e)},destroyPlayer:function(e){T(e).destroy()},constantType:g,version:"{{PLAYER_HASH}}",ready:A}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(22);!function(){window.HyperVideoAnalyticsObjects=window.HyperVideoAnalyticsObjects||[],window.HyperVideoAnalyticsObjects.push("_hvt"),window._hvt=window._hvt||function(){return(window._hvt.q=window._hvt.q||[]).push(arguments)},n.seriesLoadScripts("//a.irs01.com/hvt.js?v=1.0",function(e){})}();var r=function(){return"function"==typeof _hvt&&o},o=!0;a.exports={createhvt:function(e,t){var i=e||"YOUR-UA";o=!(0===t||"0"===t),r()&&_hvt("create",i,{api_url:"//iqiyi.irs01.com/hvt",iframe_url:"//a.irs01.com/storage.html",swf_url:"//a.irs01.com/storage.swf#",storage_id:"_iwt_id"})},hvt_init:function(e){r()&&_hvt("init",{type:"manual"},{info:{v_id:e},upid:""})},hvt_start:function(e){r()&&_hvt("send","start",{info:{v_id:e},spend:0,upid:"",progress:""})},hvt_end:function(e,t){t=Math.ceil(t/1e3),r()&&_hvt("send","end",{info:{v_id:e},spend:t,upid:"",progress:""})},hvt_desctory:function(){r()&&_hvt("destroy")}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(4),r=i(9),o=i(11),s=i(3),d=i(6),l=window.location.protocol,u=l+"//msg.qy.net/v5/bi/opendata",c="01010021010000000000",f=function(){s.browser.weixin?s.os.ios?c="02038001010000000000":s.os.android&&(c="02028001010000000000"):s.os.ios?c=s.os.iosMobile?"02030031010000000000":"03030021010000000000":s.os.android&&(c=s.os.androidMobile?"02020031010000000000":"03020021010000000000"),d.isTWLocale()&&(c=s.getPtid(!0))};f(),setTimeout(f,2e3);var p="1",h="10",_="101";s.browser.iPad?(p="2",h="20",_="202"):(s.os.ios||s.os.android)&&(p="2",h="20",_="201");var g=p+"_"+h+"_"+_,m="";s.os.ios||s.os.mac?("mac",m=2):s.os.android&&("android",m=1);var v=function(e){!function(){var t={p1:g,flashuid:r.getFluid()||"",v:e.playerVersion,pkg:"",sid:r.getWeid(),sttime:"",os_t:m,os_v:navigator.platform||"",ua_model:"",brand:"",lang:navigator.language||navigator.browserLanguage,resolution:window.screen.width+"*"+window.screen.height,network:"",cell_id:"",gps_lon:"",gps_lat:"",ipv4:"",tvid:e.tvid||"",aid:e.albumId||"",cid:e.cid||"",pid:r.getEid(),duration:e.duration||"",rn:+new Date,rfr:window.document.referrer,url:window.location.href,br:s.browser.userAgent,ce:r.getWeid(),c2:""};n(t,e,!0),o.beacon(t,u)}()};a.exports={sendStartPlayPingback:function(e){e.type=3,e.sttime=Math.round((new Date).getTime()/1e3),v(e)},sendEndPlayPingback:function(e){e.type=4,e.sttime=Math.round((new Date).getTime()/1e3),v(e)}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(1),o=i(63),s=i(81),d=i(16).CORE_TYPES,l=i(23),u=i(49),c=new r("h5Adapter"),f=i(41);a.exports=n("H5Adapter",{construct:function(e){var t=this;t._player=new s(e);var i=function(e,i){i=i||{},i.state=e.toLocaleLowerCase(),c.info("call js, fire event,params: type = playerStateChange(状态改变), state = "+i.state),t.fire({type:u.QYPLAYER_STATE_CHANGE,data:i})},a=function(e,i){var a={};a.type=e,i&&(a.data=i),t.fire(a)},n=!1;t._player.on(d.NTF_StatusChanged,function(e){switch(e.data.state){case d.Status_AdStartPlay:i(u.QYPLAYER_STATUS_AD_START_PLAY,e.data);break;case d.Status_AdPlaying:i(u.QYPLAYER_STATUS_AD_PLAYING,e.data);break;case d.Status_AdPaused:i(u.QYPLAYER_STATUS_AD_PAUSED,e.data);break;case d.Status_Loadstart:c.info("call js, fire event,params: type = h5videoloadstart(视频开始加载)"),a(u.QYPLAYER_H5_VIDEO_LOADSTART);break;case d.Status_LoadedMetaData:c.info("call js, fire event,params: type = h5videoloadedmetadata(视频metadata数据已加载)"),a(u.QYPLAYER_H5_VIDEO_LOADEDMETADATA);break;case d.Status_StartPlay:i(u.QYPLAYER_STATUS_START_PLAY,e.data);break;case d.Status_Waiting:i(u.QYPLAYER_STATUS_WAITING,e.data);break;case d.Status_Paused:i(u.QYPLAYER_STATUS_PAUSED,e.data);break;case d.Status_Playing:i(u.QYPLAYER_STATUS_PLAYING,e.data);break;case d.Status_Stoped:i(u.QYPLAYER_STATUS_STOPED,e.data);break;case d.Status_End_Play:i(u.QYPLAYER_STATUS_END_PLAY,e.data);break;case d.Status_PlayError:i(u.QYPLAYER_STATUS_ERROR,e.data)}}),t._player.on(d.NTF_VRSReady,function(e){c.info("call js, fire event,params: type = dataready(数据信息已经准备好)"),a(u.QYPLAYER_STATUS_DATA_READY,e.data.data)}),t._player.on(d.NTF_CanPlayThrough,function(e){}),t._player.on(d.NTF_VolumeChanged,function(e){n&&(c.info("call js, fire event,params: type = h5volumechanged(音量修改)"),a(u.QYPLAYER_H5_VOLUME_CHANGED,e.data)),n=!0}),t._player.on(d.NTF_DurationChanged,function(e){c.info("call js, fire event,params: type = h5durationchanged(影片时长有修改)"),a(u.QYPLAYER_H5_DURATION_CHANGED,e.data)}),t._player.on(d.NTF_VideoChanged,function(e){c.info("call js, fire event,params: type = videoChanged(视频切换完成)"),a(u.QYPLAYER_VIDEO_CHANGE,e.data)}),t._player.on(d.NTF_VideoChange,function(e){c.info("call js, fire event,params: type = vidChanged(视频切换)");var t=e.data;t.playerVersion=f,a(u.QYPLAYER_VID_CHANGE,t)}),t._player.on(d.NTF_FollowUpNextLoad,function(e){c.info("call js, fire event,params: type = followUpNextLoad(继续加载后续结构)"),a(u.QYPLAYER_FOLLOW_UPNEXT_LOAD,e.data)}),t._player.on(d.NTF_AD_Start,function(e){c.info("call js, fire event,params: type = ADStart(广告开播)"),a(u.QYPLAYER_NOTIFY_AD_START,e.data)}),t._player.on(d.NTF_AD_End,function(e){c.info("call js, fire event,params: type = ADEnd(广告播放完成)"),a(u.QYPLAYER_NOTIFY_AD_END,e.data)}),t._player.on(d.Status_AresNoticeInfo,function(e){c.info("call js, fire event,params: type = AD notify info(广告通知的信息-只是转发)"+e.data.type),a(e.data.type,e.data.data)}),t._player.on(d.NTF_TimeUpdate,function(e){a(u.QYPLAYER_NOTIFY_TIMEUPDATE,e.data)}),t._player.on(d.NTF_Seeking,function(e){a(u.QYPLAYER_STATUS_SEEKING,e.data)}),t._player.on(u.QYPLAYER_DOSOMETHING,function(e){c.info("call js, fire event,params: type = setJsDoSomething(请求JS做某些操作), data = "+e.data),t.fire({type:u.QYPLAYER_DOSOMETHING,data:e.data})}),t._player.on(u.QYPLAYER_REQUEST_VIDEOLIST_BY_PAGE,function(e){c.info("call js, fire event,params: type = requestVideoListByPage(请求联播列表)"),t.fire({type:u.QYPLAYER_REQUEST_VIDEOLIST_BY_PAGE,data:e.data})}),t._player.on(u.QYPLAYER_REQUEST_CHANGE_VIDEO,function(e){c.info("call js, fire event,params: type = requestChangeVideo"),t.fire({type:u.QYPLAYER_REQUEST_CHANGE_VIDEO,data:e.data})}),t._player.on(d.NTF_Error,function(e){i(u.QYPLAYER_STATUS_ERROR,e.data),"A00011"===e.data.realcode&&(c.info("call js, fire event,params: type = recharge(请求JS充值)"),a(u.QYPLAYER_RECHARGE,{code:"Q00310",from:""}))}),t._player.on(d.NTF_Recharge,function(e){c.info("call js, fire event,params: type = recharge(请求JS充值)"),a(u.QYPLAYER_RECHARGE,e.data.data)}),t._player.on(u.QYPLAYER_FIND_GOODS,function(e){c.info("call js, fire event,params: type = findGoods(定位到商品)"),t.fire({type:u.QYPLAYER_FIND_GOODS,data:e.data})}),t._player.on(l.NTF_SHOW_LOGIN_PANEL,function(e){c.info("call js, fire event,params: type = showLoginPanel(弹出登录框)"),t.fire({type:u.QYPLAYER_SHOW_LOGIN_PANEL,data:e.data})}),setTimeout(function(){c.info("call js, fire event,params: type = playerLoadSuccess(播放器初始化完毕)"),a(u.QYPLAYER_LOAD_SUCCESS,{playerId:e.parentId}),c.info("call js, fire event,params: type = barrageAllowed(H5暂时不支持弹幕), enable = false"),a(u.QYPLAYER_BARRAGE_ALLOWED,{enable:!1})},0),t.barrageControlConfig={},t._player.on(l.NTF_Barrage_SetConfigInfo,function(e){c.info("call js, fire event,params: type = setHasBarrageConfigInfo(弹幕的云控配置)"),t.barrageControlConfig=e.data,t.firedBarrageControlConfig=!0,a(u.QYPLAYER_SET_BARRAGE_CONFIG_INFO,{configInfo:t.barrageControlConfig})}),t.barrageChannelConfig={},t._player.on(l.NTF_Barrage_SetChannelConfigInfo,function(e){c.info("call js, fire event,params: type = setHasBarrageChannelConfigInfo(弹幕的频道配置)"),t.barrageChannelConfig=e.data,t.firedBarrageChannelConfig=!0,a(u.QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO,{configInfo:t.barrageChannelConfig})}),t._player.on(l.NTF_Barrage_SetSwitch,function(e){e.data&&e.data.selfFire&&(c.info("call js, fire event,params: type = barrageStateChange(弹幕状态发生改变), isOpen = "+e.data.isOpen),t.fire({type:u.QYPLAYER_BARRAGE_STATE_CHANGE,data:{barrageState:!0===e.data.isOpen?1:0}}))}),t._player.on(l.NTF_WebFullScreen_BeforeChange,function(e){t.fire({type:u.QYPLAYER_WEBFULLSCREEN_BEFORE_CHANGE,data:"enter"===e.data})}),t._player.on(l.NTF_WebFullScreen_AfterChange,function(e){var i="enter"===e.data;c.info("call js, fire event,params: type = afterWebFullScreenChange(页面全屏改变), data = "+i),t.fire({type:u.QYPLAYER_WEBFULLSCREEN_AFTER_CHANGE,data:i})}),t._player.on(l.NTF_FullScreen_BeforeChange,function(e){t.fire({type:u.QYPLAYER_FULLSCREEN_BEFORE_CHANGE,data:"enter"===e.data})}),t._player.on(l.NTF_FullScreen_AfterChange,function(e){var i="enter"===e.data;c.info("call js, fire event,params: type = afterWebFullScreenChange(全屏改变), data = "+i),t.fire({type:u.QYPLAYER_FULLSCREEN_AFTER_CHANGE,data:i})}),t._player.on(l.NTF_Barrage_NotifyGiftInfo,function(e){c.info("call js, fire event,params: type = notifyGiftInfo(发现弹幕红包)"),t.barrageGiftInfo=e.data,t.firedBarrageGiftInfo=!0,t.fire({type:u.QYPLAYER_NOTIFY_GIFT_INFO,data:t.barrageGiftInfo})}),t._player.on(l.NTF_ScoreTask_ScoreChange,function(e){t.fire({type:u.QYPLAYER_NOTIFY_SCORECHANGE})}),t._player.on(l.NTF_FeedBack_Show,function(){t.fire({type:u.QYPLAYER_NOTIFY_FEEDBACK_SHOW})}),t._player.on(l.NTF_FeedBack_Hide,function(){t.fire({type:u.QYPLAYER_NOTIFY_FEEDBACK_HIDE})}),t._player.on(l.NTF_USER_SEEK,function(e){c.info("call js, fire event,params: type = userSeek"),t.fire({type:u.QYPLAYER_NOTIFY_USER_SEEK})}),t._player.on(l.NTF_Barrage_NotifyBarrageData,function(e){c.info("call js, fire event,params: type = userSeek"),t.fire({type:u.QYPLAYER_NOTIFY_BARRAGE_DATA,data:e.data})})},extend:o,methods:{getQiyiPlayerInfo:function(e){this._player.getQiyiPlayerInfo(e)},getQiyiPlayerType:function(e){return e&&"function"==typeof e&&e("h5"),"h5"},setBarrageStatus:function(e){this._player.setBarrageStatus(e)},setSelfSendBarrageInfo:function(e){this._player.setSelfSendBarrageInfo(e)},setBarrageSetting:function(e){this._player.setBarrageSetting(e)},setPlayerWebFullScreen:function(e){this._player.setPlayerWebFullScreen(e)},setPlayerFullScreen:function(e){this._player.setPlayerFullScreen(e)},getHasBarrageChannelConfigInfo:function(){this.firedBarrageChannelConfig&&this.fire({type:u.QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO,data:{configInfo:this.barrageChannelConfig}})},getHasBarrageConfigInfo:function(){this.firedBarrageControlConfig&&this.fire({type:u.QYPLAYER_SET_BARRAGE_CONFIG_INFO,data:{configInfo:this.barrageControlConfig}})},getHasBarrageGiftInfo:function(){var e=this;e.firedBarrageGiftInfo&&e.fire({type:u.QYPLAYER_NOTIFY_GIFT_INFO,data:e.barrageGiftInfo})},addPlayListView:function(e){this._player.addPlayListView(e)},getSwitchVideoType:function(e){this._player.getSwitchVideoType(e)},setRightBarStatus:function(e){this._player.setRightBarStatus(e)}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(2),r=i(0),o=i(7),s=i(24),d=i(40),l=i(21),u=i(1),c=i(50),f=i(3),p=i(13),h=i(41),_=i(16),g=i(100),m=i(23),v=i(16).CORE_TYPES,y=i(73),b=i(39),x=i(116),w=new u("h5Player");a.exports=r("h5Player",{construct:function(e){var t=this,i={playerVersion:h,playerType:"main"};t._playerId=e.parentId,t.__tidyVars(e);var a,n=document.getElementById(e.parentId),r=document.createElement("div");f.os.ios||f.os.android?(f.browser.iPad||f.os.androidTablet?r.innerHTML='<div class="iqp-player iqp-player-pad" tabindex="-1"></div>':r.innerHTML='<div class="iqp-player iqp-player-mobile" tabindex="-1"></div>',n.insertBefore(r.firstChild,null),r=null,a=n.querySelector(".iqp-player")):(r.innerHTML='<div class="iqp-player iqp-player-pc" tabindex="-1"></div>;',n.insertBefore(r.firstChild,null),r=null,a=n.querySelector(".iqp-player-pc"));var o=document.createElement("video");o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x-webkit-airplay","allow"),a.appendChild(o),(f.os.ios||f.os.android)&&(o.setAttribute("playsinline","true"),o.setAttribute("webkit-playsinline","true")),f.browser.iPhone&&p(o).addClass("iqp-hide-controls");var s=document.createElement("div");s.setAttribute("data-player-hook","plgcontainer"),a.appendChild(s);var l=document.createElement("div");l.setAttribute("data-cupid","container"),f.os.ios||a.appendChild(l),d.registElement(s);try{var u=n.querySelector('*[data-widget-layer="layer"]');u&&u.parentNode.removeChild(u)}catch(e){}t._core=new _(o,e,i),t._view=new g(a,s,t._core),"DATA"!==t._core.getEngineType()&&"QVS"!==t._core.getEngineType()||c.set(new x(l,t._core,t._view)),[v.NTF_StatusChanged,v.NTF_CanPlayThrough,v.NTF_VolumeChanged,v.NTF_DurationChanged,v.NTF_VRSStart,v.NTF_VRSReady,v.NTF_VideoChange,v.NTF_VideoChanged,v.NTF_Recharge,v.NTF_Error,v.NTF_AD_Start,v.NTF_AD_End,v.Status_AresNoticeInfo,v.NTF_FollowUpNextLoad,v.NTF_TimeUpdate,v.NTF_Seeking,v.NTF_PlayingFailByAutoPlay,v.NTF_AD_CloudPlay,v.NTF_AD_CloudPlayEnd,v.NTF_RateChanged].forEach(function(e){t._core.on(e,function(e){switch(e.type){case v.NTF_PlayingFailByAutoPlay:f.os.ios||f.os.android?t._core.pause(!0):(t._core.setMuted(!0),t._core.fire({type:v.NTF_VolumeChanged}))}t.fire(e)})}),t._view.on(m.NTF_SHOW_LOGIN_PANEL,function(e){t.fire({type:m.NTF_SHOW_LOGIN_PANEL,data:e.data})}),t._view.on(m.NTF_Barrage_SetConfigInfo,function(e){t.fire({type:m.NTF_Barrage_SetConfigInfo,data:e.data})}),t._view.on(m.NTF_Barrage_SetChannelConfigInfo,function(e){t.fire({type:m.NTF_Barrage_SetChannelConfigInfo,data:e.data})}),t._view.on(m.NTF_Barrage_SetSwitch,function(e){t.fire({type:m.NTF_Barrage_SetSwitch,data:e.data})}),t._view.on(m.NTF_WebFullScreen_BeforeChange,function(e){t.fire({type:m.NTF_WebFullScreen_BeforeChange,data:e.data})}),t._view.on(m.NTF_WebFullScreen_AfterChange,function(e){t.fire({type:m.NTF_WebFullScreen_AfterChange,data:e.data})}),t._view.on(m.NTF_FullScreen_BeforeChange,function(e){t.fire({type:m.NTF_FullScreen_BeforeChange,data:e.data})}),t._view.on(m.NTF_FullScreen_AfterChange,function(e){t.fire({type:m.NTF_FullScreen_AfterChange,data:e.data})}),t._view.on(m.NTF_Barrage_NotifyGiftInfo,function(e){t.fire({type:m.NTF_Barrage_NotifyGiftInfo,data:e.data})}),t._view.on(m.NTF_ScoreTask_ScoreChange,function(e){t.fire({type:m.NTF_ScoreTask_ScoreChange})}),t._view.on(m.NTF_FeedBack_Show,function(){t.fire({type:m.NTF_FeedBack_Show})}),t._view.on(m.NTF_FeedBack_Hide,function(){t.fire({type:m.NTF_FeedBack_Hide})}),t._view.on(m.NTF_USER_SEEK,function(e){t.fire({type:m.NTF_USER_SEEK})}),t._view.on(m.NTF_Barrage_NotifyBarrageData,function(e){t.fire({type:m.NTF_Barrage_NotifyBarrageData,data:e.data})}),y.addCallback(function(e){t.fire(e)}),t._core.load({tvid:e.tvid,vid:e.vid,cid:e.cid,imageLoader:e.imageLoader,autoplay:e.autoplay}),t._view.on(m.NTF_Barrage_ShowRulePage,function(e){b.getInterface().sendBarrageShowRulePagePingback()}),t._view.on(m.NTF_Barrage_ShowLike,function(e){b.getInterface().sendBarrageShowLikePingback()}),t._view.on(m.NTF_Barrage_ShowMoreLike,function(e){b.getInterface().sendBarrageShowLikePingback()}),t._view.on(m.NTF_Barrage_EnsureReport,function(e){b.getInterface().sendBarrageEnsureReportPingback()}),t._view.on(m.NTF_Barrage_ShowReport,function(e){b.getInterface().sendBarrageShowReportPingback()}),t._view.on(m.NTF_Barrage_ShowReport,function(e){b.getInterface().sendBarrageShowReportPingback()}),t._view.on(m.NTF_Barrage_ShowReport,function(e){b.getInterface().sendBarrageShowReportPingback()}),t._view.on(m.NTF_Barrage_ShowSystemBarrage,function(e){b.getInterface().sendShowSystemBarragePingback(e.data)}),t._view.on(m.NTF_Barrage_ClickSystemBarrage,function(e){b.getInterface().sendClickSystemBarragePingback(e.data)}),t._view.on(m.NTF_Barrage_ClickSystemBarrageButton,function(e){b.getInterface().sendClickSystemBarrageButtonPingback(e.data)}),t._view.on(m.NTF_SHOW_CONTROLBAR_PINGBACK,function(e){b.getInterface().sendShowControlBarPingback(e.data)}),t._view.on(m.NTF_SEEKBAR_HOVER,function(e){b.getInterface().sendSeekBarHoverPingback(e.data)}),t._view.on(m.NTF_SHOW_HEATMAP,function(e){b.getInterface().sendShowHeatMapPingback(e.data)}),t.__init()},extend:n,methods:{__init:function(){this._core.on(v.NTF_Recharge,function(){s.exit(),l.exit()})},__tidyVars:function(e){if(e){for(var t in e)/\.(swf|xml)/gi.test(e[t])&&delete e[t];w.log("vars:"+JSON.stringify(e))}},destroy:function(){var e=this;e._core.destroy(),e._view.destroy(),document.getElementById(e._playerId)&&(document.getElementById(e._playerId).innerHTML="")},load:function(e){e.tvid=e.tvId,delete e.tvId,this._core.load(e)},play:function(){this._core.play()},resume:function(){this._core.play()},replay:function(){this._core.refresh()},pause:function(){this._core.pause()},seek:function(e){this._core.seek(e)},getVideoInfo:function(e){return this._core.getVideoInfo(e)},getPlayInfo:function(e){var t=this,i=t._core,a=t._view.videoWrapper;i.getPlayInfo(function(t){var n={};n.tvid=t.tvid,n.vid=t.vid,n.cid=t.cid,n.albumId=t.albumId,n.categoryId=t.cid,n.currentTime=i.getCurrenttime(),n.totalDuration=1e3*i.getDuration(),n.currentDefination=t.rate,n.currentTrack="",n.currentStatus=i.getCurrStatus(),n.isTryWatch=i.isTryWatch()?"1":"0",n.isPause=i.isPaused()?"1":"0",i.getRealArea()?(n.width=parseInt(i.getRealArea().width),n.height=parseInt(i.getRealArea().height)):(n.width=a.width(),n.height=a.height()),n.vipTypes=i.getVipTypes(),n.playerVersion=t.playerVersion,e&&"function"==typeof e&&e(n)})},getPlayerId:function(){return this._playerId},setQiyiUserLogin:function(e){var t=this;o.setInfo(e),o.__isChangeVipState(function(e){e?setTimeout(function(){t._core.refresh()},200):t._core.getMovieInfo().isVIP&&setTimeout(function(){t._core.refresh()},200)})},addVideoList:function(e){this._core.addVideoList(e)},addPlayListView:function(e){this._core.addPlayListView(e)},removeVideoList:function(e){this._core.removeVideoList(e)},switchVideo:function(e){this._core.switchVideo(e)},switchNextVideo:function(){this._core.switchNextVideo(3)},switchPreVideo:function(){this._core.switchPreVideo()},jsNotifyAdManager:function(e){this._core.jsNotifyAdManager(e)},setSmallWindowMode:function(e){var t=this;e=parseInt(e,10),this._core.setSmallWindowMode(e),t.__smallWinStatus!==e&&(t.__smallWinStatus=e,t._view.fire({type:m.NTF_PlayerSmallWindowStatus,data:e}))},getQiyiPlayerInfo:function(e){this.getPlayInfo(e)},setPlayerWebFullScreen:function(e){this._view.fire({type:m.NTF_WebFullScreen_SetSwitch,data:e})},setPlayerFullScreen:function(e){this._view.fire({type:m.NTF_FullScreen_SetSwitch,data:e})},setBarrageStatus:function(e){this._view.fire({type:m.NTF_Barrage_SetSwitch,data:e})},setSelfSendBarrageInfo:function(e){this._view.fire({type:m.NTF_BarrageSelfSend,data:e})},setBarrageSetting:function(e){this._view.fire({type:m.NTF_BarrageSettingChange,data:e})},clearBanWord:function(){this._view.fire({type:m.NTF_Barrage_ClearBanWord,data:null})},addBanWord:function(e){this._view.fire({type:m.NTF_Barrage_AddBanWord,data:e})},removeBanWord:function(e){this._view.fire({type:m.NTF_Barrage_RemoveBanWord,data:e})},requestBarrageData:function(e){this._view.fire({type:m.NTF_Barrage_RequestBarrageData,data:e})},getQiyiPlayerLog:function(e){e(u.getLog())},getSwitchVideoType:function(e){e(this._core.getSwitchVideoType())},notyfyADInfo:function(e){var t=this._core.getAres();t&&t.emit(e.type,e.data)},setRightBarStatus:function(e){e&&e.type&&this._view.fire({type:m.NTF_RIGHTBAR_STATUS_CHANGED,data:e})}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r=i(2),o=i(0),s=i(32),d=(i(7),i(1)),l=i(3),u=i(4),c=i(10),f=i(5),p=i(8),h=i(6),_=i(61),g=(i(83),i(17)),m=i(50),v=i(64),y=i(47),b=(i(15),i(33)),x=i(48),w=i(84),T=i(89),S=i(93),k=i(28),A=i(96),E=i(45),P=i(34),q=i(60),I=i(97),L=i(98),D=i(29),C=i(70),F=i(71),R=i(99),O=i(44),B=i(43),N={},M=new d("core");a.exports=o("core",{construct:function(e,t,a){var r=this,o="",s=f.get("QP0016"),d=c.query("__playerengine__"),p=y.flag()&&y.canaryUserPercent(),v=!(l.os.ios||l.os.android),x=t.feedMode&&!0===t.feedMode;if(d?o=d:p&&v&&!x?(o="qvs",B.closeBit(1,37),B.openBit(4,3)):s&&(o=s),"qvs"===s&&f.remove("QP0016",{path:"/",domain:".iqiyi.com"}),"qvs"===o){var k=c.query("__qvs_manifest__");k&&("f4v"===k?B.closeBit(1,37):B.openBit(1,37))}r._plyct=t.plyct||+new Date,r.canFireVideoEvts=!0,r.autoplay="boolean"!=typeof t.autoplay||t.autoplay,r.h5vars=t,r.holders=u(E,a,!0),r._firstPlay=!0,r._ADfirstPlay=!0,r._vdsSwitch=!1,r._isSkipAD=!0,r._videolist=O.getVideoList(),r._movieinfo=null,r._skipHT=0,r._skipTT=0,r._aresloaded=!1,r._playingDuration=0,r._playingSpend=0,r._preplaying_spend=0,r._timeMark=0,r._loadTimePoint=0,r._switchVideoType=0,r._isNew=!0===t.isNew,r._isSource=t.isSource||"0",r.picInPic=!1,r.isPaoPaoFeed=t.isPaoPaoFeed,r.isSmallWindowMode=!1,r._preMovieInfo={tvid:t.tvid,vid:t.vid},r.__canGetVideoInfo=!1,q.setVars(t),D.init(r),C.init(r),setTimeout(function(){R.init(r)},0);var P=window.location.href;if(-1!==P.indexOf("vfm")){-1===P.indexOf("=")&&(P=decodeURIComponent(P));var L=c.query(P,"vfm");""!==L&&f.set("QP005",L)}switch(g.usedTime_selfLoaded=new Date-t.pgct,g.pgct=t.pgct||new Date,g.browserType=t.browserType,g.pageTmpltType=t.pageTmpltType,r.autoplay?g.sTime_showVideo=g.usedTime_selfLoaded:g.needRecord=!1,D.setPbInfo({vfm:t.vfm,vfrm:t.vfrm,vvfrom:t.videoIsFromQidan}),r.eventlog.vrspreready=!1,r._recorder=new I(r),b.remove(b.PLAYER_TEMP_VD_KEY),""===o&&(o=!_||!l.browser.CHROME&&!l.browser.FIREFOX||l.os.ios||l.os.android?_&&(B.hasBit(4,3)||B.hasBit(1,37)||B.hasBit(1,42))&&!l.os.ios&&!l.os.android?"qvs":"http":"data",l.os.android&&l.browser.CHROME&&l.browser.version>=67&&parseInt(l.os.version)>4&&h.isTWLocale()&&(o="data"),t.feedMode&&!0===t.feedMode&&(o="data",b.write(b.PLAYER_TEMP_VD_KEY,96))),o){case"qvs":r._engine=new S(e,r.h5vars);break;case"data":r._engine=new T(e,r.h5vars);break;case"http":r._engine=new w(e,r.h5vars);break;default:r._engine=new w(e,r.h5vars)}"qvs"==o&&y.canaryAutoVd()&&!h.isTWLocale()&&(r._engine.setAutoVdEnabled(!0),r._engine.setAutoVdUsing(!0)),M.log("core player createEngine,params: engine = "+r.getEngineType().toLowerCase()),r._engine._aresmw||"data"!==o&&"qvs"!==o||setTimeout(function(){r.setAresMW(m.get())},0),r._emitter=new A(r),r._engine.assemble(),("1"==t.isMute||t.masflag)&&r.setMuted(!0),n=i(h.isTraditionalChinese()?37:38)},extend:r,props:{eventlog:{},currStatus:"",errorcode:null},methods:{load:function(e){var t=this;t._movieinfo&&t._movieinfo.tvid==e.tvid&&t._movieinfo.vid===e.vid||(parseInt(e.tvid,10)<9e7&&M.error("Core Player load movie info error,params: msg = "+e.tvid+"is not invalid qipu id"),t._loadTimePoint=(new Date).getTime(),t._preMovieInfo=t._movieinfo,t._movieinfo=new L,t._movieinfo.tvid=e.tvid,t._movieinfo.vid=e.vid,t._movieinfo.imageLoader=e.imageLoader||"",t.adWholeCorner=!1,t.h5vars.share_sTime||t.h5vars.share_eTime||(t._st=!0),t._st||(t._movieinfo.share_start_time=t.h5vars.share_sTime&&parseInt(t.h5vars.share_sTime,10)<0?0:parseInt(t.h5vars.share_sTime),t._movieinfo.share_end_time=t.h5vars.share_eTime?parseInt(t.h5vars.share_eTime):void 0,t.h5vars.share_eTime&&!t.h5vars.share_sTime&&(t._movieinfo.share_end_time=parseInt(t.h5vars.share_eTime),t._movieinfo.share_start_time=0),t._st=!0),e.cid&&(t._movieinfo.adPlayerID=e.cid),t._movieinfo.ares=!p.isBool(e.ares)||e.ares,M.info("load movieInfo,info,params: tvid = "+t._movieinfo.tvid+",vid = "+t._movieinfo.vid+", adPlayer = "+e.ares),t._firstPlay=!0,t._ADfirstPlay=!0,t.setStartPlayTime(0),N.__sendTmtsRPB||(N.__sendTmtsRPB=!0),t._engine.updateMovieInfo(t._movieinfo))},checkPreload:function(){var e,t,i,a,n,r,o=this,s=o.getEngineType(),d=!0;"DATA"===s?(e=o.getMovieInfo(),t=o.getCurrenttime(),i=o.getDuration(),d=d&&!o.isAd(),d=d&&o.hasNextVideo(),d=d&&o._engine.pbDone(),d=d&&e.previewTime===1/0,(d=d&&i-t>=5)&&(a=o._getVideoIndexInList(e.tvid),-1===a&&(a=o._getVideoIndexInList(e.oldTvid)),n=o._videolist[a+1].tvid,r=o._videolist[a+1].vid,o._engine.preload(n,r))):"QVS"===s&&(e=o.getMovieInfo(),t=o.getCurrenttime(),i=o.getDuration(),d=d&&!o.isAd(),d=d&&o.hasNextVideo(),d=d&&o._engine.endOfDown(),d=d&&e.previewTime===1/0,(d=d&&i-t>=5)&&(a=o._getVideoIndexInList(e.tvid),-1===a&&(a=o._getVideoIndexInList(e.oldTvid)),n=o._videolist[a+1].tvid,r=o._videolist[a+1].vid,o._engine.preload(n,r)))},refresh:function(){var e,t,i,a=this;a._movieinfo&&(e=a._movieinfo.tvid,t=a._movieinfo.vid,i=a._movieinfo.adPlayerID,a._movieinfo=null,a._engine.clearData(),a._engine.reset(),M.log("Core Player refresh"),a.fire({type:k.NTF_VideoRefresh}),v.destroy(),a.load({tvid:e,vid:t,cid:i,autoplay:!0,ares:!0}))},setAres:function(e){this._engine.setAresSDK(e)},getAres:function(){return this._engine.getAresSDK()},setAresMW:function(e){this._engine.setAresMW(e)},getCurrentGas:function(){return this._engine.getCurrentGas()},abortAres:function(){this._engine.abortAres()},abortAllAres:function(e){this._engine._abortAllAres(e)},getEngineType:function(){var e="";return this._engine instanceof w?e="HTTP":this._engine instanceof T?e="DATA":this._engine instanceof S&&(e="QVS"),e},_getdata:function(){var e=this,t={},i=e.getMovieInfo();return t.tvid=i.tvid,t.vid=i.vid,t.albumId=i.albumId||"",t.cid=i.cid||"",t.duration=i.duration||"",t.privateVideo="0",t.origin="",t.playerVersion=e.holders.playerVersion,t},video:function(){return this._engine.video()},play:function(e){this._engine.play(e)},pause:function(e){this._engine.pause(e)},isPaused:function(){return this._engine.isPaused()},replay:function(){this._engine.replay()},seek:function(e,t,i){var a=this._engine.getDuration();M.log("Engine:seek("+e+"), duration ("+a+")"),this._engine.seek(e,t,i)},isSeeking:function(){return this._engine.isSeeking()},switchAutoChangeVd:function(e){var t=this;t.autoChangeVdinfo=e?{tvid:t.getMovieInfo().tvid}:{}},isAutoChangeVd:function(){var e=this;return e.getMovieInfo()&&e.autoChangeVdinfo&&e.getMovieInfo().tvid===e.autoChangeVdinfo.tvid},switchDefinition:function(e,t){var i=this;if((e!==i._engine.getCurrentVD()||i.autoVdUsing())&&(e!==i.autoVdValue()||!i.autoVdUsing()&&i.autoVdEnabled())){if(e===i.autoVdValue())return i._engine.switchVD(e,t),M.log("definition changed: "+e),i.fire({type:k.NTF_DefinitionSwitching,data:{vd:e,isManualAction:t}}),void i.fire({type:k.NTF_DefinitionSwitched,data:{curVD:e,success:!0,isManualAction:!0}});i._vdsSwitch=!0,i.fire({type:k.NTF_DefinitionSwitching,data:{vd:e,isManualAction:t}}),i.switchAutoChangeVd(!t),i._engine.switchVD(e,t)}},isSwitchingDefinition:function(){return this._vdsSwitch},switchAudioDefinition:function(e){var t=this;if("QVS"===t.getEngineType()){if(t._movieinfo.currentLid===e)return;t.fire({type:k.NTF_AudioSwitching,data:e}),t._engine.switchAD(e)}},getAudioTracks:function(){return this._engine.getAudioTracks()},setAudioTracks:function(e){},getBufferTime:function(){return this._engine.getBufferTime()},getCurrenttime:function(){return this._engine.getCurrenttime()},getPlayingDuration:function(){return this._playingDuration},getSkipHeaderTime:function(){return this._skipHT},getSkipTailTime:function(){return this._skipTT},isSkipPrelude:function(e,t){var i=P.isSkipPrelude();if("boolean"!=typeof e)return i;i!=e&&(P.isSkipPrelude(e),!0!==t&&this._engine.skipPrelude(e))},setStartPlayTime:function(e,t){this._engine.setStartPlayTime(e,t)},getStartPlayTime:function(){return this._engine.getStartPlayTime()},getEndPlayTime:function(){return this._engine.getEndPlayTime()},getDuration:function(){return this._engine.getDuration()},getVolume:function(){return this._engine.getVolume()},setVolume:function(e){this._engine.setVolume(e),this.video().muted=!1},setMuted:function(e){var t=this._engine.getVolume();this._tempvolume=t>0?t:this._tempvolume||.6,e?this._engine.setVolume(0):(this._engine.setVolume(this._tempvolume),this.video().muted=!1)},getVideoMuted:function(){return this.video().muted},getMuted:function(){return 0===this._engine.getVolume()},getVipTypes:function(){return this.getMovieInfo().vipTypes},getPlayInfo:function(e){var t=this;t._getpcall=t._getpcall||[],t._getpcall.push(e);var i=function(){var e={},i=t.getMovieInfo();e.tvid=i.tvid,e.vid=i.vid,e.cid=i.cid,e.albumId=i.albumId,e.duration=t._engine.getDuration(),e.playerVersion=t.holders.playerVersion,e.rate=t._engine.getCurrentVD(),e.vidl=t._engine.getVidl(),e.previewImageUrl=i.previewImageUrl,e.audl=i.audl;var a=t._getpcall.slice(0);t._getpcall=[];for(var n=0;n<a.length;n++)a[n]&&function(t){setTimeout(function(){t(e)},0)}(a[n]);a=null};t._movieinfo?i():t.on(k.NTF_VRSReady,i)},getCurrentVD:function(){return this._engine.getCurrentVD()},getRealArea:function(){return this._engine.getRealArea()},getMovieInfo:function(){return this._movieinfo||{}},_canGetVideoInfo:function(e){var t=this;t.__canGetVideoInfo=e,e&&t.getVideoInfo(function(e){e&&e.sid&&(t._movieinfo.sid=e.sid,t._movieinfo.albumId=e.sid)})},getVideoInfo:function(e){var t=this;if(!t.__canGetVideoInfo){var i=t.getMovieInfo();return void setTimeout(function(){e({tvid:i.tvid,vid:i.vid,albumId:i.albumId,cid:i.cid,vi:{vid:i.vid,videoQipuId:i.tvid}})},0)}var a=t._movieinfo||t._preMovieInfo;D.setCurrentVD(t._engine.getCurrentVD()),C.setCurrentVD(t._engine.getCurrentVD()),s.get({tvid:a.tvid,vid:a.vid,locale:h.isTraditionalChinese()?"zh_tw":""},function(t){e(t)})},getdefaultvds:function(){return[{vd:96,value:n.definition_name_limit},{vd:1,value:n.definition_name_standard},{vd:2,value:n.definition_name_high},{vd:3,value:n.definition_name_superhigh},{vd:4,value:n.definition_name_720p},{vd:5,value:n.definition_name_1080p},{vd:10,value:n.definition_name_4k},{vd:27,value:n.definition_name_1080P50},{vd:-1,value:n.definition_name_auto}]},getTypeByValue:function(e){for(var t,i=this.getdefaultvds(),a=0;a<i.length;a++)i[a].vd===e?t=i[a].value:i[a].value===e&&(t=i[a].vd);return t},autoVdValue:function(){return this._engine.autoVdValue},getSrc:function(){return this._engine.getSrc()},getCurrStatus:function(){return this.currStatus},isNew:function(){return this._isNew},isAd:function(){return this._engine.isAd()},getInfoFromVideoList:function(e,t){return O.getViFromVl(e,t)},_getVideoIndexInList:function(e){return O.getVideoIndexByTvid(e)},addVideoList:function(e){var t=this,i=e.list||[],a=O.addVideoList(i);t._videolist=O.getVideoList();var n=a.logList;a.listChanged&&(M.log("addVideoList: ["+n.join()+"]"),n.splice(0,n.length),t.fire({type:k.NTF_VideoListChanged,data:a.list}),t.checkPreload()),t.fire({type:k.NTF_ADDVideoList,data:e})},addPlayListView:function(e){var t=this;e.request=!0,t.fire({type:k.NTF_ADDVideoList,data:e})},removeVideoList:function(e){var t=this,i=e.list;O.removeVideoList(i),t._videolist=O.getVideoList(),t.fire({type:k.NTF_VideoListChanged,data:t._videolist}),t.fire({type:k.NTF_REMOVEVideoList,data:t._videolist})},_switchVideoAction:function(e){var t=this,i=!0===e.autoSwitch&&!!t._engine.hasPreload(e.tvid,e.vid);if(e.tvid=x(e.tvid),parseInt(e.tvid)===parseInt(t.getMovieInfo().tvid))return void M.info("switch video,params: data = "+d.stringify(e)+"    switch fail : Tvid is same");D.sendEndPlayPingback(i?1:2),C.sendEndPlayPingback(i?1:2);var a=t.getMovieInfo();e.tvid!==a.tvid&&(i||(t._engine.pause(),t._engine.clearData(),F.removeAll(),F.add(k.Status_Idle)),t._preplaying_spend=t._playingSpend,t._playingSpend=0,"DATA"===t.getEngineType()&&t._engine.hasSwitchPage()&&e.pageUrl&&(window.location.href=e.pageUrl),v.destroy(),function(){e.autoSwitch=i;var t="\nswitch video:"+d.stringify(e),a="\n"+new Array(t.length).join("-");M.log(a+t+a)}(),t.load({tvid:e.tvid,vid:e.vid,imageLoader:e.imageLoader}))},switchVideo:function(e){function t(){var e=i._switchActions.length;if(e>0){var t=i._switchActions[e-1];i._switchActions.splice(0,e),i._switchVideoAction(t)}}var i=this,a=i.getEngineType();if(e)switch(a){case"HTTP":i._switchVideoAction(e);break;case"DATA":i._switchActions=i._switchActions||[],i._switchActions.push(e),0===i._loadTimePoint||(new Date).getTime()-i._loadTimePoint>1e3?t():i._fixSwitchTimmer||(i._fixSwitchTimmer=setTimeout(function(){t(),i._fixSwitchTimmer=null},1e3));break;case"QVS":i._switchVideoAction(e)}},switchNextVideo:function(e){var t=this,i=t._getVideoIndexInList(t.getMovieInfo().tvid),a=t._videolist;if(t._switchVideoType=e,-1===i&&(i=t._getVideoIndexInList(t.getMovieInfo().oldTvid)),-1===i&&a.length>0||i>-1&&a[i+1]){var n=a[i+1].pageUrl?a[i+1].pageUrl:null;t.switchVideo({autoSwitch:0===e,tvid:a[i+1].tvid,vid:a[i+1].vid,imageLoader:a[i+1].imageLoader,pageUrl:n})}},switchPreVideo:function(){var e=this,t=e._getVideoIndexInList(e.getMovieInfo().tvid),i=e._videolist;-1===t&&(t=e._getVideoIndexInList(e.getMovieInfo().oldTvid)),t>-1&&i[t-1]&&e.switchVideo({tvid:i[t-1].tvid,vid:i[t-1].vid,imageLoader:i[t-1].imageLoader})},hasNextVideo:function(){var e=this,t=e.getMovieInfo(),i=e._getVideoIndexInList(t.tvid),a=e._videolist;return-1===i&&(i=e._getVideoIndexInList(t.oldTvid)),!!(-1===i&&a.length>0||i>-1&&a[i+1])},getNextVideo:function(){var e=this,t=e._getVideoIndexInList(e.getMovieInfo().tvid),i=e._videolist,a="",n="";if(-1===t&&(t=e._getVideoIndexInList(e.getMovieInfo().oldTvid)),-1===t&&i.length>0||t>-1&&i[t+1]){var r=i[t+1];a=r.imageUrl,n=r.title,M.log("nextVideoInfo: "+JSON.stringify(r))}return{imageUrl:a,title:n}},checkADSkipped:function(){return!!this._isSkipAD},getPoster:function(){var e=this,t="";return e.getVideoInfo(function(e){t=e.vpic}),t},pbVisualizer:function(){var e=this;"DATA"===e.getEngineType()&&e._engine.pbVisualizer()},pbLog:function(){var e=this;"DATA"===e.getEngineType()&&e._engine.pbLog()},pbVersion:function(){try{return this._engine.pbVersion()}catch(e){return""}},isTryWatch:function(){return this._engine.isTryWatch()},getPreviewType:function(){return parseInt(this.getMovieInfo().previewType||-1,10)},getPreviewTime:function(){return this._engine.getPreviewTime()},getPreviewTipType:function(){return parseInt(this.getMovieInfo().authTipType||-1,10)},getSwitchVideoType:function(){return this._switchVideoType},recharge:function(e,t){this._engine.recharge(e,t)},jsNotifyAdManager:function(e){var t=this,i=function(){t.fire({type:k.NTF_AD_NotifyManager,data:e})};t._aresloaded?i():t.on(k.Status_AdLoaded,function(){i()})},hasStatus:function(e){return F.has(e)},setPbisdm:function(e){D.setPbisdm(e)},destroy:function(){var e=this;e._engine.clearData(),e._engine.reset(),e._engine.destroy()},setHolder:function(e,t){this.holders[e]=t},blockVideoEvents:function(){this.canFireVideoEvts=!1},resumeVideoEvents:function(){this.canFireVideoEvts=!0},userGesturePlayed:function(){this._engine.userGesturePlayed()},getPlaybackRate:function(){return this._engine.getPlaybackRate()},setPlaybackRate:function(e){this._engine.setPlaybackRate(e)},getPageTmpltType:function(){return g.pageTmpltType},getCurrentDefinitionAd:function(){var e=this;return"DATA"===e.getEngineType()?e._engine.getDefinitionAd(e._movieinfo.videoQipuId):""},setInPicture:function(e){this.picInPic=e},getPicInPic:function(){return this.picInPic},getCurrManifestType:function(){var e=this;return"QVS"===e.getEngineType()?e._engine.getCurrManifestType():null},getDataBufferInfo:function(){var e=this;return"QVS"===e.getEngineType()?e._engine.getDataBufferInfo():null},setSmallWindowMode:function(e){var t=this;t.isSmallWindowMode=1===e},getDownloadSpeed:function(){var e=this;return"QVS"===e.getEngineType()?e._engine.getDownloadSpeed():null},autoVdEnabled:function(){return this._engine.autoVdEnabled()},autoVdUsing:function(){return this._engine.autoVdUsing()},autoVdAlgot:function(){return this._engine.autoVdAlgot()}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){i.exports=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)}()}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(1),o=i(18),s=i(8),d=i(7),l=i(22),u=i(5),c=i(3),f=i(32),p=i(6),h=i(15),_=i(33),g=i(26),m=i(10),v=i(4),y=i(51),b=i(87),x=i(88),w=i(20),T=i(19),S=i(27),k=i(44),A=new r("httpEngine"),E=null,P=!1;a.exports=n("httpEngine",{extend:y,construct:function(e,t){var i=this;Object.defineProperty(e,"playbackRate",{set:function(e){},get:function(){}}),i._video=e,i._sdkloaded=!1,b.init(i),i.tryCount=2},methods:{assemble:function(){this.fire({type:w.Status_Assembled,data:{}})},_loadAdSdk:function(){var e=this,t=e._param.h5AdPadSrc;"undefined"==typeof aresPad?t&&""!==t?l.seriesLoadScripts(t,function(t){t&&"undefined"!=typeof aresPad?(e.fire({type:"aresloaded"}),e._sdkloaded=!0,A.log("ares version: "+aresPad.version)):A.error("H5 http ad sdk load error!")}):A.error("params ares src is null. "):e._sdkloaded=!0},getAresSDK:function(){return this._aresdk},_initAres:function(e){var t,i,a=this,n=e||a._movieinfo,r=(k.getViFromVl(n.tvid,n.vid),navigator.userAgent.match(/miuivideo\//i)||c.os.android&&parseInt(c.os.version)>4&&navigator.userAgent.match(/MiuiBrowser/i));i=c.browser.iPad?"ipad":c.browser.iPhone?"iphone":c.os.androidTablet?"gpad":c.os.androidMobile?"gphone":"ipad";var s=c.browser.iPad||c.browser.iPhone||c.os.android&&parseFloat(c.os.version)>4||r?"m3u8":"mp4";a._pMode=s,t=c.browser.iPad?p.isTWLocale()?"qc_105136_100639":"qc_100001_100103":c.browser.iPhone?p.isTWLocale()?"qc_105136_100638":"qc_100001_100102":c.os.androidMobile?p.isTWLocale()?"qc_105136_100640":"qc_100001_100186":p.isTWLocale()?"qc_105136_101044":"qc_100001_101043",a._param.cid&&"qc_105045_100459"==a._param.cid&&(t=a._param.cid),f.get({tvid:n.tvid,vid:n.vid},function(e){d.isVip(function(r){var l=n.tvid+"",f={playerId:t,tvId:l,vId:n.vid,userId:u.get("QC006"),passportId:d.getUid(),resIndex:n.vd,albumId:e.albumId||"",deviceType:i,videoEventId:o.generate(l),location:location.href,channelId:e.cid||"",duration:n.duration||"",locale:a._param.local,formatType:s,isVip:r,passportCookie:d.passportCookie(),couponCode:a._param.cpnc||"",couponVer:a._param.cpnv||"",ptid:c.getPtid(p.isTWLocale())};window.CupidPadAdSdk&&(a._aresdk=new CupidPadAdSdk(a._video,f),a.fire({type:w.NTF_ARES_Load}))})})},_initAdEvents:function(){function e(e){t._movieinfo.ares&&t._initAres(e)}var t=this;t.on(w.NTF_MovieInfoChange,function(e){var i,a=e.data.preMovieInfo,n=e.data.curMovieInfo;if(a)try{i=o.getEventId(a.tvid),A.debug("stop ares-> "+a.tvid,"videoEventId->"+i),t.getAresSDK().stop({videoEventId:i})}catch(e){}else n&&(i=o.getEventId(n.tvid),A.debug("destroy ares by refresh player-> "+n.tvid,"videoEventId->"+i),t.getAresSDK().destroy({videoEventId:i}))}),t.on(w.NTF_VRSPreloaded,function(i){t._preMovieinfo=i.data,e(i.data)}),t.on(w.NTF_ARES_End,function(e){t._abortAllAres(),t.isPaused()&&t.play()})},_initares:function(){var e=this;e._loadAdSdk(),e._sdkloaded?e._initAres():e.on("aresloaded",function(){e._initAres()})},loadMovie:function(e,t){var i=this;i._vdSwitch?(i._adDuration=0,i._preIdAll="",i._loadVMSData(e,t)):(i._resetVideo(),i._initAresStage(e,t))},_initAresStage:function(e,t){var i=this;i._initares(),i._aresInit||(i._aresInit=!0,i._initAdEvents()),i.on(w.NTF_ARES_Load,function(){var a=i.getAresSDK();a&&(a.off("noad"),a.on("noad",function(a){i._ads=[],i._preIdAll="",i.adEnded=!0,i._isAd=!1,i._adDuration=0,i._loadVMSData(e,t)}),a.off("ready"),a.on("ready",function(a){i.adEnded=!1;var n=a.data,r=[];if(n&&n.duration&&n.ads){n.ads.forEach(function(e){e.tvid?r.push(e.tvid+"_"+e.vid+"_"):r.push(e.vid+"_")}),i._preIdAll=r.join("-"),i._adDuration=n.duration}n&&!n.duration&&n.ads&&(i._ads=n.ads),i._isAd=!0,i._loadVMSData(e,t)}),a.off("roll-ended"),a.on("roll-ended",function(){i.adEnded=!0,A.debug("ad notice roll-ended"),"m3u8"===i._pMode?(i._video.currentTime=i._adDuration,A.debug("skip ares ->"+i._adDuration)):i.fire({type:w.NTF_ARES_End})}))})},_loadVMSData:function(e,t){var i=this;i._noticeDataStart(),i._loadVMS(e,t,function(){i._vdSwitch?i.setSrc(i._movieinfo.url,0,i._vdSwitchVideoPaused):(i._noticeDataReady(),i._noticeDataDone())},function(){i._noticeDataDone()})},setSrc:function(e,t,i){var a=this,n=a._pMode||"";if("mp4"===n){a._isAd=1===parseInt(t,10);var r=a._isAd?0:a.getStartPlayTime();a._isAd||(A.log("continue play time: "+r),a.enableSeek()),a.setDecodeSrc(e,r)}if("m3u8"===n){var o=a._isAd?0:a.getStartPlayTime()+a._adDuration;A.log("continue play time: "+o),a.setDecodeSrc(e,o)}i?a.pause():a.play()},_resetVideo:function(){var e=this;e.pause(),e.setDecodeSrc("",0)},isAd:function(){return this._isAd},_switchVD:function(e){var t=this;P=!0,E=e.bid,t.loadMovie(t.getEngineMovieInfo().tvid,e.vid)},_loadVMS:function(e,t,i,a){var n=this,r=n._preIdAll||"";n._movieinfo.tvid=e,n._movieinfo.vid=t,n._movieinfo.oldTvid=e;var o,l;P?(o=E,l=n._movieinfo.url,P=!1):(_.read(_.PLAYER_TEMP_VD_KEY)?(o=_.read(_.PLAYER_TEMP_VD_KEY),n.fire({type:w.NTF_LoadTempVd,data:{userVd:h.read(h.PLAYER_VD_KEY)||2,tempVd:o}})):o=h.read(h.PLAYER_VD_KEY)||2,o=g.getNewVd(o));var u=navigator.userAgent.match(/miuivideo\//i)||c.os.android&&parseInt(c.os.version)>4&&navigator.userAgent.match(/MiuiBrowser/i),y=c.browser.iPad||c.browser.iPhone||c.os.android&&parseFloat(c.os.version)>4||u?"m3u8":"mp4",b=function(e){if(null==e.data||!e.data.hasOwnProperty("st"))return A.error("movieinfo error,params:type = data.data null or st is lose"),T(),!1;var t=parseInt(e.data.st,10);if(!(100<t&&t<200)){switch(t){case 304:case 401:case 405:case 406:case 501:case 502:case 601:case 602:case 701:T(t);break;default:T("DEFAULT_ST")}return A.error("movieinfo error,params: st = "+t),!1}return!0},T=function(e){if(e){var t={DEFAULT_ST:1,MISSPARAM:1,A02500:1,A02510:1,A02511:1,A02512:1,A00003:1,A00010:1,A00114:1,A00115:1,A00301:1,A00302:1,A02801:1,A00001:2,A00101:2,A00004:6,A00005:6,A02501:6,A02502:6,A02503:6,A02592:6,A00113:7,A02591:7,Q00201:11,Q00202:11,Q00203:11,A02593:11,PLATFORM_MISMATCH:12,A00110:12,A00111:13,A00116:14,A00117:14,A00002:21,A00011:21,A00013:21,A02601:21,A02602:21,Q00501:22,A02603:22,P00001:101,P00002:102,304:10,401:10,405:10,406:10,501:12,502:13,601:14,602:14,701:14};n.brokedown(t[e],"ENGINE_HTTP_"+e,"6000")}a&&a()};e&&t?(A.log("load movieInfo from vrs,params: tvid = "+e+", vid = "+t),x.request({params:{cupid:n._movieinfo.adPlayerID,tvid:e,vid:t,ppt:n.isPPT(),ost:n.ost(),preIdAll:r,tryCount:n.tryCount-1,vd:o,switchvd:!1,prio:JSON.stringify({ff:y,code:-1}),src:c.getPtid(p.isTWLocale())}},function(e){try{if(!b(e))return;var t=!1;A.log("load movieInfo from vrs ok"),n._movieinfo.tvid=e.data.tvid?e.data.tvid:n._movieinfo.tvid,n._movieinfo.albumId=e.data.aid||n._movieinfo.albumId||"",n._movieinfo.duration=0,n._movieinfo.cid=e.data.cid,n._movieinfo.clientIp="",n._movieinfo.ugc=f.isUGC(n._movieinfo.tvid),n._movieinfo.isVIP=e.data.content.bossStatus>0,n._movieinfo.adVids=e.data.adVids||[],n._movieinfo.vipTypes=e.data.content.vipTypes;var a=!1;if(n._movieinfo.vipTypes&&n._movieinfo.vipTypes.length>0)for(var r=0;r<n._movieinfo.vipTypes.length;r++)1==n._movieinfo.vipTypes[r]&&(a=!0);n._movieinfo.prelude={headTime:-1,tailTime:-1},n._movieinfo.qiyiProduced=1===e.data.content.isProduced,n._movieinfo.exclusive=1===e.data.content.exclusive,n._movieinfo.logoOpen=!0,n._movieinfo.lowerLogoOpen=!0,n._movieinfo.topLogoOpen=!0,e.data.p.lgh&&(n._movieinfo.lowerLogoOpen=-1==e.data.p.lgh.indexOf(2)&&-1==e.data.p.lgh.indexOf("2"),n._movieinfo.topLogoOpen=-1==e.data.p.lgh.indexOf(1)&&-1==e.data.p.lgh.indexOf("1"));var u=e.data.p.wmarkPos||0;if(n._movieinfo.logoOpen=-1!=u,e.data.boss_ts){var c=e.data.boss_ts,p=c.code;switch(p){case"A00000":n._movieinfo.isTryWatch=1===parseInt(c.data.prv,10),n._movieinfo.previewType=c.previewType,n._movieinfo.previewTime=n._movieinfo.isTryWatch&&"1"==c.previewType?60*parseInt(c.previewTime,10)*1e3:1/0,n._movieinfo.authTipType=c.data.tip_type;break;case"Q00311":case"Q00312":return n.brokedown(22),T(p);default:var h={};h.vipMode="httpMode",d.checkVip(function(){if(d.isBanned())return n.brokedown(22),T();n._noticeRecharge(p),t=!0},h)}}if(t)return T();if(a&&(n._movieinfo.authTipType=10),e.data.program&&e.data.program.video){for(var _,x,w=e.data.program.video,S=0,k=w.length;S<k;S++){_=w[S],_.scrsz&&(x=_.scrsz.split("x"));var q={vid:_.vid,vd:g.getOldVd(_.bid),bid:_.bid,realArea:{width:x?x[0]:0,height:x?x[1]:0}};_.url&&(n._movieinfo.url=s.protocolRevise(_.url),n._movieinfo.duration=_.duration,o=q.vd),"mp4"===y&&_.mp4Url&&(n._movieinfo.url=s.protocolRevise(_.mp4Url),n._movieinfo.duration=_.duration,o=q.vd),n._movieinfo.vidl.push(q)}n._movieinfo.vidl.sort(function(e,t){return e.vd>t.vd}),n._movieinfo.vidl.unshift(n._movieinfo.vidl.pop())}if(P&&E!=o&&(n._movieinfo.url=l,o=n._movieinfo.vd,n.__switchToVd=o),!n._movieinfo.url)return A.log("movieInfo definition Error! url is undefined!"),T(e.code);var I=n._vd;if(n._vd=o=n._findBestPlayVd(o||null),n._movieinfo.vd=o||"",A.log("movieInfo definition,params: current = "+n._movieinfo.vd+", user = "+I+", ad from vrs = "+e.data.vd),n._movieinfo.isVIP&&n._movieinfo.url){var L={},D=n._movieinfo.url;L=m.query2Json(D);var C=m.filename(D);v(L,{filename:C,tvid:n._movieinfo.tvid,aid:n._movieinfo.albumId})}}catch(t){return n._movieinfo=null,A.log("load movieInfo from vrs, movieinfo error,params: info = json error"),T(e.code)}var F=e.data.p.pano;if(F&&(2==F.type||3==F.type||4==F.type))return T("PLATFORM_MISMATCH");i&&(A.log("movieInfo baseinfo,params: tvid = "+n._movieinfo.tvid+", vid = "+n._movieinfo.vid+", isTryWatch(试看) = "+n._movieinfo.isTryWatch+", member(会员片源) = "+n._movieinfo.isVIP+", albumId = "+n._movieinfo.albumId+", channelID = "+n._movieinfo.cid+", qipuId = "+n._movieinfo.videoQipuId+", headTime(片头) = "+n._movieinfo.prelude.headTime+", tailTime(片尾) = "+n._movieinfo.prelude.tailTime+", duration(时长) = "+n._movieinfo.duration+", isTennisContent(网球会员内容) = "+n._getIsTennisContent()+", logoOpen(水印总开关) = "+n._movieinfo.logoOpen+", topLogoOpen(右上角) = "+n._movieinfo.topLogoOpen+", lowerLogoOpen(右下角) = "+n._movieinfo.lowerLogoOpen+", exclusive(独播) = "+n._movieinfo.exclusive+", qiyiProduced(自制) = "+n._movieinfo.qiyiProduced+", nextTvid = "+n._movieinfo.nextTvid+", nextVid = "+n._movieinfo.nextVid),i())},function(e){var t={A00001:2,A00302:30,A00301:30,U00001:22,P00001:101,P00002:102},i=e.code,a=e.data||{},n=a.st||"",r=t[i];A.info("load movieInfo from vrs, movieinfo error,params: vmsCode = "+r+", realCode = "+i+", st = "+n),i&&T(i),101!=n&&T(n),A.log("load movieInfo from vrs, movieinfo error,params: code = "+i)})):(A.log("load movieInfo from vrs, movieinfo error,params: info = miss tvid or vid"),T("MISSPARAM"))},_getCurrentGas:function(){return this._gas||{}},_abortAllAres:function(e){var t=this;if(A.info("ad play complete and play video"),t._movieinfo){t.getSrc()!==t._movieinfo.url&&function(){t.setSrc(t._movieinfo.url,0,!1)}()}},_clearData:function(){S.clearAll()},_checkStop:function(){var e=this,t=e._movieinfo;return e._checkAuthTime(t&&t.isVIP&&t.previewTime<1/0?t.previewTime+1:1e3*e.getCurrenttime())},_checkSeek:function(e){var t=this,i=t._getDecodeDuration();return t._checkAuthTime(1e3*e)&&(e<=i||i<=0)},getDuration:function(){var e=this,t=e._getDecodeDuration();return e._movieinfo&&e._movieinfo.duration&&0!==e._movieinfo.duration?t=e._movieinfo.duration:"m3u8"===e._pMode&&(t-=e._adDuration),t},getCurrenttime:function(){var e=this,t=e.getDuration(),i=e._video.currentTime||0;return"m3u8"===e._pMode&&(i-=e._adDuration),i=i<t||isNaN(t)?i:t},seek:function(e,t){var i,a=this,n=a._getDecodeDuration();if(i=e+a._adDuration,i>=n&&(i=n-.5),i==a._adDuration&&0!==i&&(i=a._adDuration+1),!a._checkSeek||!1!==a._checkSeek(i)){a.hasSeeking=!0;var r=a._video.seekable;1===r.length&&r.end(0)>=i?(t&&(a._currentManualAction=T.NTF_Seeking),isNaN(i)&&(i=0),i>=0&&i<=n&&(a._video.currentTime=i),a.isPaused()&&a.play()):setTimeout(function(){a.seek(i)},10)}}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(2),r=i(0),o=i(3),s=i(1),d=new s("video decoder"),l=i(19),u={};a.exports=r("decode",{construct:function(e){var t=this;t._video=e,t._curStatus="",t.hasSeeking=!1,t.seekableFlag=!0,t.__beforeSeekTime=0,t._userGesturePlayed=!1,t._currentManualAction=null,t._currentCodeActionList=[];var i=function(i){if(""!==e.src){var a=i.status;t.fire({type:l.NTF_StatusChanged,data:i}),t._curStatus=a,a===l.Status_Playing?t._playing=!0:t._playing=!1}},a=function(e){if(t._currentManualAction&&t._currentManualAction===e)return t._currentManualAction=null,l.Action_Type_Controls;if(-1!=t._currentCodeActionList.indexOf(e)){var i=t._currentCodeActionList.indexOf(e);return t._currentCodeActionList.splice(i,1),l.Action_Type_Code}return l.Action_Type_Native};t._canFireDecodeEvt=function(){return!0},t._setSrc=function(e){1===arguments.length&&(t.__beforeSeekTime=0,t._video.setAttribute("src",e),o.os.ios||t._video.load())},u.loadstart=function(){t.__beforeSeekTime=0,i({status:l.Status_Loadstart,actionType:l.Action_Type_Native})},e.addEventListener("loadstart",u.loadstart),u.error=function(e){t.__beforeSeekTime=0,i({status:l.Status_LoadFailed,actionType:l.Action_Type_Native})},e.addEventListener("error",u.error),u.stalled=function(e){i({status:l.Status_Stalled,actionType:l.Action_Type_Native})},e.addEventListener("stalled",u.stalled),u.loadedmetadata=function(){i({status:l.Status_LoadedMetaData,actionType:l.Action_Type_Native})},e.addEventListener("loadedmetadata",u.loadedmetadata),u.canplay=function(){i({status:l.Status_Canplay,actionType:l.Action_Type_Native})},e.addEventListener("canplay",u.canplay),u.pause=function(){t._canFireDecodeEvt()&&i({status:l.Status_Paused,actionType:a(l.Status_Paused)})},e.addEventListener("pause",u.pause),u.play=function(){t._canFireDecodeEvt()&&i({status:l.Status_Play,actionType:a(l.Status_Play)})},e.addEventListener("play",u.play),u.playing=function(){t._canFireDecodeEvt()&&(t.hasSeeking=!1,i({status:l.Status_Playing,actionType:l.Action_Type_Native}))},e.addEventListener("playing",u.playing),u.waiting=function(){t._canFireDecodeEvt()&&i({status:l.Status_Waiting,actionType:l.Action_Type_Native})},e.addEventListener("waiting",u.waiting),u.seeking=function(){if(t._canFireDecodeEvt()){o.os.ios||o.os.android||i({status:l.Status_Waiting,actionType:l.Action_Type_Code});var e={current:t.getCurrenttime(),duration:t.getDuration()};e.actionType=a(l.NTF_Seeking),t.fire({type:l.NTF_Seeking,data:e})}},e.addEventListener("seeking",u.seeking),u.ended=function(){if(!1===t.seekableFlag&&Math.abs(t._getDecodeDuration()-t.__beforeSeekTime)>2)return t._seek(t.__beforeSeekTime);t._canFireDecodeEvt()&&(t._checkStop&&!t._checkStop()||i({status:l.Status_Stoped,actionType:l.Action_Type_Native}))},e.addEventListener("ended",u.ended),u.canplaythrough=function(){t.fire({type:l.NTF_CanPlayThrough,data:{actionType:l.Action_Type_Native}})},e.addEventListener("canplaythrough",u.canplaythrough),u.volumechange=function(){t.fire({type:l.NTF_VolumeChanged,data:t._video.volume,actionType:l.Action_Type_Native})},e.addEventListener("volumechange",u.volumechange),u.ratechange=function(){t.fire({type:l.NTF_RateChanged,data:t._video.playbackRate,actionType:l.Action_Type_Native})},e.addEventListener("ratechange",u.ratechange),u.durationchange=function(){t._canFireDecodeEvt()&&t.fire({type:l.NTF_DurationChanged,data:t.getDuration(),actionType:l.Action_Type_Native})},e.addEventListener("durationchange",u.durationchange);var n=(new Date).getTime(),r=0;u.timeupdate=function(){var o=t.getCurrenttime(),s=t.getDuration();if(!e.seeking&&Math.abs(o-t.__beforeSeekTime)<1.2)t.__beforeSeekTime=o;else if(!1===t.seekableFlag)return t._seek(t.__beforeSeekTime);if(!("number"==typeof e.readyState&&e.readyState<=1||t.isPaused())){var d=(new Date).getTime();d-n>500&&(clearTimeout(r),n=d,r=setTimeout(function(){t.fire({type:l.NTF_TimeUpdate,data:{current:o,duration:s,actionType:l.Action_Type_Native}})},0)),t._playing||(t.hasSeeking=!1,t._canFireDecodeEvt()&&i({status:l.Status_Playing,actionType:a(l.Status_Playing)}))}},e.addEventListener("timeupdate",u.timeupdate),u.progress=function(){t._canFireDecodeEvt()&&t.fire({type:l.NTF_Progress,data:{buffer:t.getBufferTime(),actionType:l.Action_Type_Native}})},e.addEventListener("progress",u.progress),i({status:l.Status_Idle}),t._statusChanged=i,t._checkActionType=a},extend:n,methods:{video:function(){return this._video},removeAllEventsListener:function(){var e=this;e._video.removeEventListener("loadstart",u.loadstart),e._video.removeEventListener("error",u.error),e._video.removeEventListener("stalled",u.stalled),e._video.removeEventListener("loadedmetadata",u.loadedmetadata),e._video.removeEventListener("canplay",u.canplay),e._video.removeEventListener("pause",u.pause),e._video.removeEventListener("play",u.play),e._video.removeEventListener("playing",u.playing),e._video.removeEventListener("waiting",u.waiting),e._video.removeEventListener("seeking",u.seeking),e._video.removeEventListener("ended",u.ended),e._video.removeEventListener("canplaythrough",u.canplaythrough),e._video.removeEventListener("volumechange",u.volumechange),e._video.removeEventListener("durationchange",u.durationchange),e._video.removeEventListener("timeupdate",u.timeupdate),e._video.removeEventListener("progress",u.progress)},play:function(e){function t(){var e=i._video.play();if(void 0!==e){var t=new Promise(function(t,i){e.then(function(){t()})["catch"](function(e){d.warn(e.message),i(e)})});return t["catch"](function(e){d.warn(e)}),t}}var i=this;if(e?i._currentManualAction=l.Status_Play:i._currentCodeActionList.push(l.Status_Play),!o.os.ios&&!o.os.android)return t();i._userGesturePlayed?t():i.fire({type:l.NTF_NeedUserGesture4Playback})},pause:function(e,t){var i=this._video.networkState;(t||0!==i&&3!==i)&&(e?this._currentManualAction=l.Status_Paused:this._currentCodeActionList.push(l.Status_Paused),this._video.pause())},isPaused:function(){return this._video.paused},replay:function(){this._video.play(this._video.src)},seek:function(){var e=this;e.seekableFlag&&e._seek.apply(e,arguments)},_seek:function(e,t){var i=this;if(!i._checkSeek||!1!==i._checkSeek(e)){i.hasSeeking=!0;var a=i._video.seekable;1===a.length&&a.end(0)>e?(t?i._currentManualAction=l.NTF_Seeking:this._currentCodeActionList.push(l.NTF_Seeking),e>=0&&e<=i.getDuration()&&(i._video.currentTime=e),i.isPaused()&&i.play()):setTimeout(function(){i._seek(e)},10)}},isSeeking:function(){return this.hasSeeking},enableSeek:function(){this.seekableFlag=!0},disableSeek:function(){this.seekableFlag=!1},setDecodeSrc:function(e,t){var i=this;i._setSrc(e),d.debug("decode src current time :"+t);try{i._video.duration=0,i._video.buffered.length=0,t>0?i._video.addEventListener("loadedmetadata",function e(){t<i.getDuration()&&i._seek(t),i._video.removeEventListener("loadedmetadata",e)},!1):i._video.currentTime=0}catch(e){}},getSrc:function(){return this._video.src},getAudioTracks:function(){return this._video.audioTracks},setAudioTracks:function(e){},getBufferTime:function(){var e=this,t=0;return e._video.buffered.length>0&&(t=e._video.buffered.end(e._video.buffered.length-1)),t},getBuffered:function(){return this._video.buffered},getCurrenttime:function(){var e=this,t=e.getDuration(),i=this._video.currentTime||0;return i<t?i:t},getDuration:function(){return this._getDecodeDuration()},_getDecodeDuration:function(){return this._video.duration||0},getVolume:function(){return this._video.volume},setVolume:function(e){e>1&&(e=1),this._video.volume=e},setautoplay:function(e){this._autoplay=e,this._video.autoplay=this._autoplay},getautoplay:function(){return this._autoplay},userGesturePlayed:function(){this._userGesturePlayed=!0},getPlaybackRate:function(){return this._video.playbackRate},setPlaybackRate:function(e){this._video.playbackRate=e}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(2),o=i(1),s=i(19),d=i(20),l=(new o("BaseEngineEmitters"),n("BaseEngineEmitters",{extend:r,methods:{init:function(e){var t=this;t.engine=e,t._initFeatureDuration()},_initFeatureDuration:function(){var e,t=this.engine,i=function(){e=void 0,t._currentFeaturePlayingDuration=0};t.on(s.NTF_TimeUpdate,function(){if(!t.isAd()){var i=t.getCurrenttime(),a=i-e;e&&a>0&&(t._currentFeaturePlayingDuration+=1e3*a),e=i}}),t.on(s.NTF_Seeking,function(t){e=void 0}),t.on(d.Status_Destroy,function(){i()}),t.on(d.NTF_MovieInfoChange,function(){i()})}}}));a.exports=new l}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(2),o=i(1),s=(i(12),i(18),i(19)),d=(i(27),i(20)),l=new o("HEngineEmitters"),u=n("HEngineEmitters",{extend:r,methods:{init:function(e){var t=this;t.engine=e,t._engineEvents(),t._vrsEvents()},_engineEvents:function(){var e,t=this.engine,i=0;t.on(s.NTF_StatusChanged,function(a){var n=a.data.status;switch(n){case s.Status_LoadedMetaData:t._vdSwitch&&setTimeout(function(){t._noticeVidChanged()},200);break;case s.Status_LoadFailed:case s.Status_Stoped:var r=t._ads,u=t.getCurrentGas();r&&r.length>0&&t.isAd()&&(n===s.Status_LoadFailed&&l.warn("drop ares gas:"+o.stringify(r)),setTimeout(function(){for(i=0;i<r.length;i++)if((e=r[i])===u){i===r.length-1?t.fire({type:d.NTF_ARES_End,data:{}}):(t._gas=r[i+1],t.setSrc(r[i+1].url,1,!1));break}},0))}}),t.on(s.NTF_TimeUpdate,function(e){t.isAd()||t.enableSeek()}),t.on(s.NTF_NeedUserGesture4Playback,function(){t.fire({type:d.NTF_NeedUserGesture4Playback})}),t.on(d.Status_Destroy,function(){t._resetVideo()});var a=t._video;a.addEventListener("timeupdate",function(){if("m3u8"===t._pMode){var e=a.currentTime;parseInt(e,10)===t._adDuration&&(t.fire({type:s.NTF_StatusChanged,data:{status:s.Status_Playing}}),t.adEnded=!0),e<t._adDuration?t._isAd=!0:t._isAd=!1}}),a.addEventListener("seeking",function(){if("m3u8"===t._pMode){if(!t.adEnded&&!t.__fixedSeekAction)return t.__fixedSeekAction=!0,void(a.currentTime=0);t.__fixedSeekAction=!1}t.hasSeeking=!0})},_vrsEvents:function(){var e=this,t=e.engine;t.on(d.NTF_VRSReady,function(e){var i=e.data,a=(i.tvid,t.getAresSDK());if("mp4"===t._pMode&&(t._ads.length>0?(t.setSrc(t._ads[0].url,1,!1),t._gas=t._ads[0]):t.setSrc(t._movieinfo.url,0,!1)),"m3u8"===t._pMode&&t._movieinfo){t.getSrc()!==t._movieinfo.url&&t.setSrc(t._movieinfo.url,1,!1)}if(a&&t._movieinfo&&t._movieinfo.adVids.length>0){var n=t._movieinfo.adVids;l.info("notify CupidSdk removeInvalidAds vid->"+n),a.notifyCupidSdk("removeInvalidAd",{vid:n||[]}),t._adDuration&&(t._adDuration=t._adDuration-15*n.length,l.info("removeInvalidAd adDuration->"+t._adDuration))}})}}});a.exports=new u}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(3),r=i(12),o=i(10),s=i(11),d=i(7),l=i(9),u=i(1),c=i(6),f=i(14),p=i(8),h=i(25),_=(i(65),i(34)),g=i(35),m=i(43),v=i(29),y=i(17),b=new u("mixer"),x=0;a.exports={request:function(e,t,i){var a,u=e.params,w=!!e.hostUseIP,T=null,S=e.params.tryCount||0,k=!1;return d.getVipTypes(function(e){var A=u.tvid,E=u.vid,P=u.vd,q=u.ppt,I=u.ost,L=x>0?x:(new Date).getTime();x=0;y.sTime_vms=new Date-y.pgct,v.sendVrsRequestPingback(),T=function(){var e={tvid:A,bid:P,vid:E,src:n.getPtid(c.isTWLocale()),vt:0,rs:1,uid:d.getUid(),ori:"pcw",ps:u.switchvd?1:0,tm:L,qd_v:"1",k_uid:l.getFluid()||l.getJsuid(),pt:0,d:0,s:"",lid:"",cf:"",ct:"",authKey:r(r("")+L+A),k_tag:1,ost:I,ppt:q,dfp:h.get(),locale:c.isTraditionalChinese()?"zh_tw":"zh_cn",prio:u.prio||JSON.stringify({ff:"f4v",code:2}),pck:d.passportCookie(),k_err_retries:S};return(n.os.ios||n.os.android)&&(e.ori="h5"),u.src&&(e.src=u.src),u.preIdAll&&(e.preIdAll=u.preIdAll),u.lid&&(e.lid=u.lid,e.cf=2),-1!=e.prio.indexOf("m3u8")?e.k_ft1=m.getM3U8FT1():-1!=e.prio.indexOf("mp4")&&(e.k_ft1=m.getMP4FT1()),c.isTraditionalChinese()&&(e.locale="zh_tw"),_.isBoss()&&(e.vv="821d3c731e374feaa629dcdaab7c394b"),w&&(e.ecode="701"),e.bop=JSON.stringify({version:"7.0",dfp:h.get()}),e}();var D=function(n){if(k)return void b.log("start vms request is abandoned!!!");a=s.jsonp({url:n,params:T,memory:!0,timeout:5e3,beforeSend:function(t){var i=o.parse(t.url).host;e.forEach(function(e){t.url+="&ut="+e,p.isArray(T.ut)||(T.ut=[]),T.ut.push(parseInt(e,10))});var a="iloveiqiyi";try{var n=t.url.replace(new RegExp("^(http|https)://"+i,"ig"),"");w&&(n=n.replace("/3ea/420a8433732a6c99d1eae98fea69e55d","")),a=f.cmd5x(n)}catch(e){b.error("cmd5x: "+(e.message?e.message:e))}return t.url+="&vf="+a,b.log("load movieInfo from vrs, request,params: url = "+t.url),t},success:function(e){if(k)return void b.log("start vms request success callback is abandoned!!!");if(y.usedTime_vms=new Date-y.pgct-y.sTime_vms,v.sendVrsReadyPingback(y.usedTime_vms),e&&e.hasOwnProperty("code"))"A00000"===e.code?t(e):("A00020"===e.code&&e.tm&&(x=e.tm),i(e));else{var a={};a.code="P00002",i(a)}},failure:function(e){if(k)return void b.log("start vms request failure callback is abandoned!!!");b.error("dash fail raw json data->"+JSON.stringify(e));var t={};t.code="P00001",i(t)}})};w?s.ajax({url:g.vmsAccess,timeout:2e3,withCredentials:!1,success:function(e){if(e&&"string"==typeof e){var t=e.split(";"),i=Math.floor(Math.random()*t.length),a=t[i];D(g.vmsIPSuc.replace("{{IP}}",a))}else D(g.vmsIPFail)},failure:function(){D(g.vmsIPFail)}}):D(g.vmsUrl)}),{getReqParams:function(){return T},getXhrRequest:function(){return a},setReqAbandoned:function(){k=!0}}}}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(5),o=i(22),s=i(1),d=i(18),l=i(4),u=i(8),c=(i(50),i(7)),f=i(6),p=i(15),h=i(33),_=i(3),g=i(26),m=i(19),v=i(30),y=i(52),b=i(34),x=i(20),w=i(51),T=i(53),S=i(54),k=i(90),A=i(55),E=i(92),P=i(27),q=i(17),I=i(45),L=i(44),D=i(58),C=i(56),F=new s("DataEngine");a.exports=n("DataEngine",{extend:w,construct:function(e,t){var i=this;i._paused=!0,i._param=t,i._pburl=t.h5P2PUrl,i._vrs={},i._sdkloaded=!1,i._isSkipAD=!0,i._autoplay="boolean"!=typeof t.autoplay||t.autoplay,i._sdkType="pc",_.browser.CHROME&&_.os.android&&(i._sdkType="mobile"),E.init(i),A.setEngine(i),S.__setVideo(e),T.setProxy(S),S.on("fragmentsChange",function(){T.setData(S.getFragments())}),k.init(i,e),i._canFireDecodeEvt=function(){return!1},i._setForcedPlayerType=function(e){"LoaderState_error_idc"===e&&(r.remove("player_forcedType"),r.set("player_forcedType","flash_VOD",{expires:2592e5}),location.reload())},i._pb_=S},methods:{assemble:function(){var e=this;e._loadP2PSdk(),e._param.feedMode||e._loadAdSdk()},_loadP2PSdk:function(){var e=this,t=!1;"mobile"===e._sdkType&&(t=!0);var i=function(){var i=window.QIYI_HTML5_P2P_PlayBack_0001;i?(F.info("P2P core load ready"),e._pb_.__setSDK(i,t),e.fire({type:x.Status_Assembled,data:i}),e.__isAssembled=!0):F.info("P2P core load error")};window.QIYI_HTML5_P2P_PlayBack_0001?i():(F.info("P2P core start load,params:url = "+e._pburl),q.sTime_P2PCore=new Date-q.pgct,o.seriesLoadScripts(e._pburl,function(e){q.usedTime_P2PCore=new Date-q.sTime_P2PCore-q.pgct,i()}))},loadMovie:function(e,t){var i=this,a=A.getPid(e,t);i._noticeDataStart();var n=function(e){e.isPreload=!!e.isPreload,l(i._movieinfo,e,!0),i._movieinfo.vd=e.vd,i._vd=e.vd,i._setFragments(i._movieinfo.vidl.filter(function(e){return e.vd===i._vd})[0]),i.__isAssembled?i._noticeDataReady():i.on(x.Status_Assembled,function(e){i._noticeDataReady()}),i._noticeDataDone()};if(h.read(h.PLAYER_TEMP_VD_KEY)&&i.fire({type:x.NTF_LoadTempVd,data:{userVd:p.read(p.PLAYER_VD_KEY)||2,tempVd:h.read(h.PLAYER_TEMP_VD_KEY)}}),A.hasPreload(a)){var r=A.getPreloadData(a);n(r)}else A.getPromise(a).then(function(e){e.isPreload=!1,n(e)},function(e){switch(l(i._movieinfo,e.movieinfo,!0),e.type){case 0:i.brokedown(e.code,e.originalCode,e.ec,e.vmsst);break;case 1:i._noticeRecharge(e.code);break;case 2:i.brokedown(22);break;default:F.error(e&&e.stack?e.stack:e)}i._noticeDataDone()});i._aresInit||i._param.feedMode||(i._aresInit=!0,i._initAdEvents())},preload:function(e,t){var i=this,a=A.getPid(e,t),n=T.getSegmentsByTvid(e);P.valid(e,!0),h.read(h.PLAYER_TEMP_VD_KEY)&&i.fire({type:x.NTF_LoadTempVd,data:{userVd:p.read(p.PLAYER_VD_KEY)||2,tempVd:h.read(h.PLAYER_TEMP_VD_KEY)}}),A.hasPreload(a)?0===n.length&&i._noticeReJointPreload():A.getPromise(a).then(function(e){e.isPreload=!0,e.ares=!0,i._preloadedMovieInfo=e,i._noticeDataPreloaded()},function(e){F.warn("preload movie which requires auth: "+s.stringify(e))})},hasPreload:function(e,t){var i=A.getPid(e,t);return P.finishPres(e)&&A.hasPreload(i)&&T.getSegmentsByTvid(e).length>0},_clearData:function(){S.resetProxy(),P.clearAll(),A.clearAll()},_checkSkipHeadTime:function(e){var t=this,i=t._movieinfo;if(i){var a=t._skipHeadTvid,n=b.isSkipPrelude(),r=n&&i.prelude.headTime>0?1e3*i.prelude.headTime:-1;a!=i.tvid&&(i.share_start_time||0===t.share_start_time?t.fire({type:y.Evt_StartShareTime,data:{time:e}}):n&&e===r?(t._skipHeadTvid=i.tvid,F.log("skip prelude, pos: "+r+"!"),t.fire({type:y.Evt_SkipHeader,data:{time:e}})):!0!==t.__checkSkiped&&void 0===a&&e>0&&(t._skipHeadTvid=i.tvid,F.log("apply record, pos: "+e+"!"),t.fire({type:y.Evt_StartFromHistory,data:{time:e}}))),t.__checkSkiped=!0}},_checkSkipTailTime:function(e){var t=this,i=t._movieinfo;if(i&&i.prelude){var a=!!t._skipTailTipped,n=b.isSkipPrelude(),r=n&&i.prelude.tailTime>0?1e3*i.prelude.tailTime:-1;t._skipTailTvid!=i.tvid&&(t._skipTailTvid=i.tvid,t._skipTailTipped=!1);var o=S.getPlayOrder(),s=T.getSegmentByOrder(o);n&&r>0&&e<=r&&(e+15e3>=r?a||T.isFeatureEndSegment(s)&&s.showEndTime===r&&(t._skipTailTipped=!0,F.log("skip tail, cur:"+e+", tail: "+r+"!"),t.fire({type:y.Evt_SkipTail,data:{time:r}})):t._skipTailTipped=!1),T.isFeatureEndSegment(s)&&e+15e3>=s.showEndTime&&t.fire({type:y.Enjoy_Evt_PlayEnd,data:{mv:i}})}},isAd:function(e){var t=!1,i="number"==typeof e&&e>=0?e:S.getPlayOrder(),a=T.getSegmentByOrder(i);return a&&!0===a.ad&&(t=!0),t},_abortAllAres:function(e){var t=this,i="ad play complete and removeFragment,params: rollType = "+e;switch(e){case"preroll":setTimeout(function(){if(t._movieinfo){var e=T.getAresPres(t._movieinfo.tvid);e.length>0&&(F.debug("setsrc remove pres!"),i+=", start = "+e[0].order+", length = "+e.length,F.info(i),S.removeFragment(e[0].order,e.length))}},0);break;case"midroll":setTimeout(function(){if(t._movieinfo){var e=T.getAresMids(t._movieinfo.tvid);e.length>0&&(F.debug("setsrc remove mids!"),i+=", start = "+e[0].order+", length = "+e.length,F.info(i),S.removeFragment(e[0].order,e.length))}},0)}},_getCurrentGas:function(){var e=S.getPlayOrder();return this._getGasByOrder(e)},_getGasByOrder:function(e){e=parseInt(e,10);var t={},i=T.getSegmentByOrder(e);return i&&(t=i.ad?i.gas:{videoEventId:d.getEventId(i.tvid)}),t},_setFragments:function(e){this._segments=e.segments,this._duration=e.duration},_checkSegmentsInPreview:function(e,t){var i=this;return e=e||i.getEngineMovieInfo().previewTime,t=t||i._segments,t.filter(function(t,i,a){var n=t.startTime<e;if(i>0){var r=a[i-1];n=n&&r.endTime<e}return n})},_constructPlaySegments:function(e,t){var i,a,n=this,r=[],o=n._segments,d=t||n._movieinfo,c=d.previewTime;if(t&&(o=d.vidl.filter(function(e){return e.vd===d.vd})[0].segments),u.isArray(o)&&o.length>0){r=o.map(function(e){return l({},e,!0)}).filter(function(e,t,i){var a=e.startTime<c-3e4;if(t>0){var n=i[t-1];a=a&&n.endTime<c}return a});var f=n._getStartEndTimes(e,t);if(i=f.start_play_time,a=f.end_play_time,!isNaN(i)&&i>=0&&i<r[r.length-1].endTime&&(a!==1/0&&i>=a&&(a=r[r.length-1].endTime),r=r.filter(function(e,t,n){var r=n[t+1],o=e.startTime<a;return r&&i>=r.startTime&&(o=!1),o=o&&i<e.endTime}),r.length>0)){var p=r[0],h=r[r.length-1];a=a===1/0?h.endTime:a,n._movieinfo&&n._movieinfo.tvid===d.tvid&&(n._startPlayTime=i/1e3,n._endPlayTime=a/1e3),p.showStartTime=i,h.showEndTime=a}}return 0===r.length&&F.error("construct play segments fail, pos: "+i+", vmi"+(t?s.stringify(t):"")),r},_getStartEndTimes:function(e,t){var i,a,n=this,r=t||n._movieinfo,o=b.isSkipPrelude(),s=r.isPreload?0:1e3*n._startPlayTime,d=o&&r.prelude.headTime>0?1e3*r.prelude.headTime:0,l=o&&r.prelude.tailTime>0?1e3*r.prelude.tailTime:1/0;return i=isNaN(e)||null===e?r.share_start_time||0===r.share_start_time?1e3*parseInt(r.share_start_time):d>=s&&d>0?d:s:e,a=r.share_end_time&&r.share_end_time>=r.share_start_time?1e3*parseInt(r.share_end_time):l,i>1e3*parseInt(r.share_end_time)&&(a=l),{start_play_time:i,end_play_time:a}},_getVRSSegmentByPlayTime:function(e){for(var t,i=this,a=i._segments,n=0;n<a.length;n++)if(a[n+1]){if(e<a[n+1].startTime){t=a[n];break}}else t=a[n];return t},_switchVD:function(e){var t=this,i=function(){t._setFragments(e);var i=1e3*t.getStartPlayTime(),a=t.getBuffered(),n=0;if(a.length>0){n=1e3*(a.end(a.length-1)-w.prototype.getCurrenttime.call(t)),n<0&&(F.debug("buffered in video: "+n+"s"),n=0)}S.sleeping()&&t.pbReload();var r=t._constructPlaySegments(i);S.freshFragments(r,!0,0,i),t._switchDelayTimer=setTimeout(function(){"waiting"===S.getState()?t.once(m.NTF_TimeUpdate,function(){t._noticeVidChanged()}):t._noticeVidChanged()},n)};if(e.segments.length>0)i();else{var a=function(){t._noticeVidChanged(!1)},n=g.getNewVd(e.vd);F.info("switchVD, load movieInfo from vrs,params: tvid = "+t._tvid+", vid = "+t._vid+", islogin = "+c.isLogin()+", vd = "+n+"|"+e.vd),C.request({params:{tvid:t._movieinfo.tvid,vid:e.vid,vd:n,tryCount:0,switchvd:!0},hostUseIP:!1},function(n){if(n.hasOwnProperty("data")&&n.data.hasOwnProperty("st")){var r=parseInt(n.data.st,10);if(100<r&&r<200){var o={vsInfo:n.data.program.video,isVIP:t._movieinfo.isVIP,tvid:t._movieinfo.tvid,cid:t._movieinfo.cid,sid:t._movieinfo.sid,albumId:t._movieinfo.albumId},s=D.analyzeVds(o,e.vd);if(s){for(var d=0;d<t._movieinfo.vidl.length;d++)t._movieinfo.vidl[d].vd==s.vd&&(t._movieinfo.vidl[d]=s);e=s,i()}else a()}else a()}else a()},function(e){a()})}},play:function(e){var t=this;e?t._currentManualAction=m.Status_Play:t._currentCodeActionList.push(m.Status_Play),S.resume()},pause:function(e){var t=this;e?t._currentManualAction=m.Status_Paused:t._currentCodeActionList.push(m.Status_Paused),S.pause()},seek:function(e,t){var i=this;if(e*=1e3,i.hasSeeking=!0,i._checkAuthTime(e)){var a=i._getVRSSegmentByPlayTime(e);if(a){var n=v.getIdentifier(a),r=T.getSegmentByIdentifier(n);T.inFeaturesShowSection(r,e)||(S.freshFragments(i._constructPlaySegments(e),!1),r=T.getSegmentByIdentifier(n)),t?i._currentManualAction=m.NTF_Seeking:i._currentCodeActionList.push(m.NTF_Seeking);var o=!T.isFeatureEndSegment(r);S.seek(T.getOrderById(n),e,{jump:o}),i.play()}i._statusChanged({status:m.Status_Waiting,actionType:m.Action_Type_Code});var s={current:i.getCurrenttime(),duration:i.getDuration()};s.actionType=i._checkActionType(m.NTF_Seeking),i.fire({type:m.NTF_Seeking,data:s})}},isSeeking:function(){return!!this.hasSeeking},getBufferTime:function(){var e=this,t=0,i=S.getPlayInfo(),a=S.getBuffer(),n=i.order,r=a.order;if(t=a.time/1e3,e.isAd())r>n&&(t=e.getDuration());else if(r>n){var o,s=T.getSegmentByOrder(n),d=[];s&&(d=T.getFeaturesBySegment(s),d.length>0&&(o=d[d.length-1],r>o.order&&(t=e.getDuration())))}return t},getCurrenttime:function(){var e=this,t=e.getDuration(),i=S.getPlayInfo().time/1e3;return i<t||isNaN(t)?i:0},getDuration:function(){var e=this,t=0;if(e.isAd()){var i=S.getPlayInfo();t=i.segment&&!0===i.segment.done?i.segment.realEndTime/1e3:Number.NaN}else e._duration&&(t=e._duration/1e3||0);return t},isPaused:function(){return this._paused},pbLog:function(){S.log()},pbVisualizer:function(){k.toggle()},pbVersion:function(){return S.version},pbSleep:function(){S.reset(null)},pbReload:function(){S.reset(this._video)},pbDone:function(){return S.isDone()},hasSwitchPage:function(){return S.switchPage()},_removeAres:function(e){var t=parseInt(e,10),i=T.getSegmentByOrder(t),a=T.getSegmentByOrder(t+1);i&&i.ad&&(a?(F.debug("abortAres removeFragment "+t+", "+s.stringify(i)),S.removeFragment(i.order,1)):(F.warn("remove ares & reset pb, length is 1."),S.resetProxy()))},_abortAres:function(){var e=S.getPlayOrder();this._removeAres(e)},setAresSDK:function(e){var t=this,i=e.init;t._sdkloaded=!0,F.log("ares version: "+(e.version?e.version:"")),t._aressdk=e,t.fire({type:x.NTF_ARES_Load}),i.hijack||(e.init=function(a){i.call(e,a),t.fire({type:x.NTF_ARES_Init}),F.debug("ares init: "+s.stringify(a))},e.init.hijack=!0)},getAresSDK:function(){return this._aressdk},setAresMW:function(e){var t=this;t._aresmw=e,t.fire({type:"ares_mwready"}),e.bussiness.on("_playdata_",function(e){var i=e.data,a=i.videoEventId,n=d.getEpisodeId(a),r=P.valid(n);F.debug("ares mw load"+(r?"":" invalid")+":"+s.stringify(i)),r&&setTimeout(function(){t.fire({type:x.NTF_ARES_Gas,data:i||{}})},0)})},_loadAdSdk:function(){var e,t,i=this;"pc"==i._sdkType?(e="mars",t=i._param.h5adsrc):(e="aresPad",t=i._param.h5AdPadSrc),this._loadAdStart(e,t)},_loadAdStart:function(e,t){var i=this,a=t;void 0===window[e]?a&&""!==a?o.seriesLoadScripts(a,function(t){t&&void 0!==window[e]?(i.setAresSDK(window[e]),i.fire({type:"aresloaded"})):F.error("h5 data ad sdk load error!")}):F.error("params ares src is null. "):i.setAresSDK(window[e])},_initAdEvents:function(){function e(e){t._movieinfo.ares&&t.initares(e)}var t=this;t.on(x.NTF_MovieInfoChange,function(e){var i=e.data.preMovieInfo,a=e.data.curMovieInfo;if(i)try{F.debug("stop ares: "+i.tvid),t._aresmw._disableVideoOP=!0,t.getAresSDK().stop({videoEventId:d.getEventId(i.tvid)})}catch(e){}else a&&(F.debug("stop ares by refreshPlayer: "+a.tvid),t.getAresSDK().destroy({videoEventId:d.getEventId(a.tvid)}))}),t.on(x.NTF_TVIDChanged,function(e){t._aresmw._disableVideoOP=!1}),t.on(x.NTF_VRSReady,function(i){t._movieinfo=i.data,t._movieinfo.isPreload||e()}),t.on(x.NTF_VRSPreloaded,function(i){t._preMovieinfo=i.data,e(i.data)}),t.on(x.NTF_ARES_End,function(e){t._aresdone(e.data)})},_aresdone:function(e){var t=this,i=e.rollType;F.debug("ares done! "+(i?"("+i+")":"")),t._abortAllAres(i),(t._isSkipAD&&t._autoplay||!t._isSkipAD||_.os.ios||_.os.android)&&t.isPaused()&&(F.debug("manual play"),t.play())},initares:function(e){var t=this;t._sdkloaded&&t._aresmw?t._initAres(e):(t._aresSDKLoadPromise||(t._aresSDKLoadPromise=new Promise(function(e){t._sdkloaded?e():t.on("aresloaded",function(){e()})})),t._aresMWLoadPromise||(t._aresMWLoadPromise=new Promise(function(e){t._aresmw?e():t.on("ares_mwready",function(){e()})})),Promise.all([t._aresSDKLoadPromise,t._aresMWLoadPromise]).then(function(){t._initAres(e)}))},_initAres:function(e){var t,i=this,a=e||i._movieinfo,n=L.getViFromVl(a.tvid,a.vid);t=n&&n.cid?n.cid:i._param.cid||"",i._param.isCid||!_.os.android&&!_.os.ios||(t=navigator.userAgent.indexOf("MicroMessenger")>-1?"qc_105092_300416":"qc_100001_100103");var r=i._param.isSupportViewpoint||!1,o=i._param.site||"iqiyiw";c.isVip(function(e){i._aresmw._isVip=e;var n=i._aresmw.video(),s=(a.videoQipuId||a.tvid)+"",l={autoLoad:!0,autoRender:!0,isMacH5:!0,isPreload:!!a.isPreload,adPlayerId:t,episodeId:s,videoEventId:d.generate(s),videoDefinition:a.vd,showVoiceIcon:!(_.os.android||_.os.ios),videoMidware:i._aresmw,isVIP:e,isSupportViewpoint:r,site:o,locale:i._param.local,passportId:c.getUid(),passportCookie:c.passportCookie(),clientVersion:I.playerVersion,videoContainer:n,couponCode:i._param.cpnc||"",couponVer:i._param.cpnv||"",ptid:_.getPtid(f.isTWLocale())};"mobile"==i._sdkType&&(l.formatType="f4v",_.os.androidTablet?(l.deviceType="gpad",l.adPlayerId=f.isTWLocale()?"qc_105136_101044":"qc_100001_101043"):(l.deviceType="gphone",l.adPlayerId=f.isTWLocale()?"qc_105136_100640":"qc_100001_100186")),setTimeout(function(){i.getAresSDK().init(l)},0)})},getDefinitionAd:function(e){var t;return P.valid(e)&&(t=P.getDefinitionAd(e)),t},_getVDInfo:function(e){var t=this,i=e||t._movieinfo;return i.vidl.filter(function(a){return a.vd===(e?i.vd:t._vd)})[0]}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(1),o=i(8),s=i(2),d=i(13),l=i(15),u=i(91),c=i(53),f=i(54),p=new r("PBVisualizer"),h=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,_=window.cancelAnimationFrame||window.mozCancelAnimationFrame,g="QiyiPlayerVisualizer",m=n("PBVisualizer",{extend:s,construct:function(){var e=this;e._initShowFlag=1===parseInt(l.read(g),10),e._showFlag=e._initShowFlag;try{e._canvas=document.createElement("canvas"),e._canvas.width=450,e._canvas.height=150,e._canvasCTX=e._canvas.getContext("2d"),e._graphics=new u.Graphics(e._canvas),e._hide()}catch(e){}},methods:{init:function(e,t){var i=this;i._video=t,i._video.parentNode.appendChild(i._canvas),i._layout(),i._initShowFlag&&i._show()},_layout:function(){d(this._canvas).css("pointerEvents","none").css("width","auto").css("height","auto").css("position","absolute").css("zIndex","100000").css("top","15px").css("left","15px")},_drawOutline:function(){var e=this;e._canvasCTX.fillStyle="rgba(26,26,26, 0.8)",e._canvasCTX.clearRect(0,0,450,150),e._canvasCTX.fillRect(0,0,450,150),e._canvasCTX.fontSize="18px"},_drawCloseTip:function(){var e=this,t=this._graphics;e._canvasCTX.fillStyle="rgba(225, 225, 225, 1)",t.wrapText("[CTRL+ALT+F7 开启/关闭]",320,15,430,20)},_drawFace:function(e,t,i,a){var n=this._graphics,r=2*i,o=n.create(e,t,r,r);o.setColor("#000000"),o.fillCircle(0,0,i);o.setColor(a),o.fillCircle(1,1,i-1);var s=r/25,d=i-4*s,l=i+4*s-2*s,u=r/3;o.setStrokeColor("#000000"),o.drawCircle(d,u,s),o.drawCircle(l,u,s);var c=r/2,f=i-c/2,p=2*r/3;o.setStrokeColor("#000000"),o.drawLine(f,p,f+c,p)},_drawSynopsis:function(e){var t=this,i=t._graphics,a=f.isDone(),n=f.getPlayOrder(),r=0,o=e.map(function(e){var t=e.order,i=n===t?"▶":"",a="F";return e.ad&&(a="A"+e.rollType[0].toUpperCase(),r++),i+a+"-"+e.vid.slice(0,5)}),s=o.length>0?e[0].rate:"null",d="rate: "+s+", ",l=d;t._drawFace(10,4,10,a?"#699f00":"red"),t._canvasCTX.fillStyle="rgba(225, 225, 225, 1)",i.wrapText(l,35,15,430,20)},_drawProcess:function(e,t,i){var a=this,n=a._graphics,r=45,s=10,d=0,l=0,u=0,c=0,f=0,p=[],h=[],_=[];if(e.forEach(function(e,t,i){var a=e.tvid;0!==t&&i[t-1].tvid===a||(_=[],h.push(_)),_.push(e),0===t&&(l=e.startTime,u=e.showStartTime),t!==i.length-1&&p.push(e.endTime)}),h.map(function(e){var t=0,i=0,a=e[e.length-1],n=e[0];return n.startTime>-1&&a.startTime>-1?(i=a.endTime-n.startTime,t=a.showEndTime-n.showStartTime):i=e.reduce(function(e,t){return e.realEndTime+t.realEndTime},0),{du:i,showdu:t}}).forEach(function(e){c+=e.du,f+=e.showdu}),d=parseInt(f/c*430,10)||0,s+=parseInt((u-l)/c*430,10)||0,n.setStrokeColor("rgba(225, 225, 225, 1)"),n.drawRect(10,r,430,20),n.fillRect(s,r,d,20),p.forEach(function(e){var t=(e-l)/c*430+10;n.setStrokeColor("rgba(225, 255, 255, 1)"),n.drawLine(t,46,t,64),n.setColor("rgba(225, 225, 225, 1)"),n.textBaseline("bottom"),n.fillText(o.formatMilliseconds(e/1e3),t-16,41)}),e.length>0){var g=(i-l)/c*430+10,m=a._canvasCTX;m.beginPath();var v=parseInt(8/Math.tan(120*Math.PI/360),10);m.moveTo(g,66),m.lineTo(g+v,74),m.lineTo(g-v,74),m.fillStyle="black",m.fill(),m.closePath()}},_drawSegmentsText:function(e,t){var i=this,a=i._graphics,n=0,r=e.map(function(e){var i=e.order,a=t===i?"▶":"",r="F";return e.ad&&(r="A"+e.rollType[0].toUpperCase(),n++),a+r+"-"+e.vid.slice(0,5)}),o=r.length+"_"+n+", ";i._canvasCTX.fillStyle="rgba(225, 225, 225, 1)",a.wrapText(o+"["+r.join("_|_")+"]",10,90,430,20)},_show:function(){var e=this;e._showFlag=!0,d(e._canvas).css("display",""),e._requestID=h(function t(){e._update(),e._requestID=h(t)})},_hide:function(){var e=this;e._showFlag=!1,d(e._canvas).css("display","none"),_(e._requestID)},toggle:function(){var e=this;p.warn("toggle pb visualizer!"),e._showFlag?(l.remove(g),e._hide()):(l.write(g,1),e._show())},_update:function(){var e=this,t=c.getData(),i=f.getPlayInfo(),a=i.order,n=i.time;try{e._drawOutline(),e._drawSynopsis(t),e._drawCloseTip(t),e._drawProcess(t,a,n),e._drawSegmentsText(t,a),e._layout()}catch(e){}}}});a.exports=new m}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,i){var a={Rectangle:function(e,t,i,a){this.x=e,this.y=t,this.width=i,this.height=a,this.clone=function(){return new this.Rectangle(this.x,this.y,this.width,this.height)}},Graphics:function(e){function t(e,t,i){r.beginPath(),r.arc(o.x+e+i,o.y+t+i,i,0,2*Math.PI,!0),r.closePath()}function i(e,t,i){if(r.beginPath(),null!==e&&null!==t){var a=Math.min(i,Math.min(e.length,t.length));if(a>0)for(var n=0;n<i&&n<a;n++){var s=o.x+e[n],d=o.y+t[n];0===n?r.moveTo(s,d):r.lineTo(s,d)}}}var n="string"==typeof e?document.getElementById(e):e,r=n.getContext("2d"),o=new a.Rectangle(0,0);this.getCanvas=function(){return n},this.getContext=function(){return r},this.getWidth=function(){return n.width},this.getHeight=function(){return n.height},this.create=function(e,t,i,r){var o=new a.Graphics(n);return void 0!==e&&null!==e&&void 0!==t&&null!==t&&o.translate(e,t),o},this.setColor=function(e){r.fillStyle=e},this.getColor=function(){return r.fillStyle},this.setStrokeColor=function(e){r.strokeStyle=e},this.getStrokeColor=function(){return r.strokeStyle},this.textBaseline=function(e){r.textBaseline=e},this.clipRect=function(e,t,i,a){},this.fillRect=function(e,t,i,a){r.fillRect(o.x+e,o.y+t,i,a)},this.clearRect=function(e,t,i,a){r.clearRect(e,t,i,a)},this.drawRect=function(e,t,i,a){r.strokeRect(o.x+e,o.y+t,i,a)},this.fillCircle=function(e,i,a){t(e,i,a),r.fill()},this.drawCircle=function(e,i,a){t(e,i,a),r.stroke()},this.drawLine=function(e,t,i,a){r.beginPath(),r.moveTo(o.x+e,o.y+t),r.lineTo(o.x+i,o.y+a),r.stroke()},this.drawPolygon=function(e,t,a){a>0&&null!==e&&null!==t&&(i(e,t,a),r.stroke())},this.fillPolygon=function(e,t,a){a>0&&null!==e&&null!==t&&(i(e,t,a),r.fill())},this.translate=function(e,t){o.x=e,o.y=t},this.wrapText=function(e,t,i,a,n){var r=this,o=r.getContext(),s=e.split(""),d="";o.textBaseline="middle";for(var l=0;l<s.length;l++){var u=d+s[l]+"";o.measureText(u).width>a&&l>0?(o.fillText(d,t,i),d=s[l]+"",i+=n):d=u}o.fillText(d,t,i)},this.fillText=function(e,t,i){this.getContext().fillText(e,t,i)}}};i.exports=a}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(2),o=i(1),s=i(12),d=i(18),l=i(8),u=i(5),c=i(32),f=i(10),p=(i(47),i(30)),h=i(19),_=i(20),g=i(53),m=i(27),v=i(54),y=new o("DEngineEmitters"),b=n("DEngineEmitters",{extend:r,methods:{init:function(e){var t=this;t.engine=e,t._engineEvents(),t._episodeEvents(),t._vrsEvents(),t._providerEvents(),t.engine._param.feedMode||(t._aresEvents(),t._adSDKEvents())},_engineEvents:function(){var e=this,t=e.engine;t.on(h.NTF_TimeUpdate,function(){var e=1e3*t.getCurrenttime();t._checkAuthTime(e),t._checkSecondAuthTime(e),t._checkSkipTailTime(e)}),t.on(_.NTF_SetSkipPrelude,function(e){var i=1e3*t.getCurrenttime(),a=t._constructPlaySegments(i);v.freshFragments(a,!0,0,i)}),t.on(_.Status_Destroy,function(){m.destroy()})},_episodeEvents:function(){var e=this,t=e.engine;m.on("finishAddPres",function(e){var i=e.data,a=i.videoId,n=i.length,r=t._getCurrentGas(),o=d.getEpisodeId(r.videoEventId),s=t._constructPlaySegments(null,m.getInfo(a));a===o||0===n&&(void 0===o||isNaN(o))?y.debug(a+": concat cur episode"):y.debug(a+": concat preload episode"),v.fillFragments(s,v.getLastOrder(),Number.MAX_VALUE)})},_aresEvents:function(){var e=this,t=e.engine;t.on(_.NTF_ARES_Gas,function(e){var i=e.data,a=i.videoEventId,n=d.getEpisodeId(a),r=new p(!0,!1,i.file,i,n,s(i.id),[],"AD","AD","AD","AD",-1,0,-1,0,-1),l=0,u=0;if(0===i.offset)m.finishPres(n)?y.warn(n+": ignore ares gas, "+o.stringify(i)):(m.addPres(n,[r]),y.debug(n+": concat pre-ares!"),v.fillFragments([r]));else if(i.offset>0)if(t.getCurrenttime()<i.offset){var c=g.getAresMids(),f=c.length;if(c.length>0){var h=c[f-1];l=g.getIndex(h),u=Number.MAX_VALUE}else l=-1,u=1e3*i.offset;v.addFragment([r],l,u),m.addMids(n,[r])}else y.warn(n+":drop ares gas, "+o.stringify(i))}),t.on(_.NTF_ARES_GasFinish,function(e){var t=e.data,i=t.videoId;switch(t.rollType){case"preroll":m.finishPres(i,!0);break;case"midroll":m.finishMids(i,!0)}}),t.on(_.NTF_ARES_End,function(e){var t=e.data,i=t.rollType,a=t.videoId;switch(i){case"preroll":m.finishPres(a,!0);break;case"midroll":m.finishMids(a,!0)}})},_adSDKEvents:function(){var e=this,t=e.engine;t.on(_.NTF_ARES_Load,function(e){var i=t._aressdk;i&&(i.on("roll-play",function(e){var i=e.rollType,a=e.videoEventId,n=d.getEpisodeId(a),r=m.valid(n);y.debug("ares"+(r?"":" invalid")+" roll-play:"+o.stringify(e)),r&&t.fire({type:_.NTF_ARES_Play,data:{rollType:i,videoId:n}})}),i.on("roll-ended",function(e){var i=e.rollType,a=e.videoEventId,n=d.getEpisodeId(a),r=!t._movieinfo||t._movieinfo.tvid==n,s=m.valid(n)&&r;y.debug("ares"+(s?"":" invalid")+" roll-ended:"+o.stringify(e)+", videoId: "+n+", tvid: "+(t._movieinfo?t._movieinfo.tvid:"movieinfo_undefined")),s&&t.fire({type:_.NTF_ARES_End,agent:"ares",data:{rollType:i,videoId:n}})}),i.on("roll-load-finish",function(e){var i=e.rollType,a=e.videoEventId,n=d.getEpisodeId(a),r=m.valid(n);y.log("roll-load-finish"+(r?"":" invalid")+":"+o.stringify(e)),r&&setTimeout(function(){t.fire({type:_.NTF_ARES_GasFinish,data:{rollType:i,videoId:n}})},0)}),i.on("error",function(e){t.brokedown(7001,"P07001"),y.log("ad error"+o.stringify(e))}),i.on("adplayer_ad_info",function(e){e=e||{};var i=e.data.videoEventId,a=d.getEpisodeId(i),n=m.valid(a);y.debug("ares notice-info"+(n?"":" invalid")+":"+o.stringify(e)),n&&(l.isObject(e.definitionSwitchingAd)&&m.setDefinitionAd(a,e),t.fire({type:_.NTF_ARES_Info,data:e}))}),i.off("adplayer_ad_start"),i.on("adplayer_ad_start",function(e){t.fire({type:_.NTF_AD_Start,data:e})}),i.off("adplayer_ad_end"),i.on("adplayer_ad_end",function(e){t.fire({type:_.NTF_AD_End,data:e})}))})},_vrsEvents:function(){var e=this,t=e.engine;t.on(_.NTF_VRSPreloaded,function(e){var i=e.data,a=i.videoQipuId,n=t._constructPlaySegments(null,i);m.finishPres(a)&&!m.finishFeatures(a)&&(y.debug(a+": 预载直接拼Feature seg!"),v.fillFragments(n,v.getLastOrder(),Number.MAX_VALUE)),m.setInfo(a,i),m.freshFeatures(a,n),m.finishFeatures(a,!0)}),t.on(_.NTF_ReJointPreload,function(e){var i=e.data,a=i.videoQipuId;if(m.finishPres(a)&&m.finishFeatures(a)){var n=m.getPres(a),r=t._constructPlaySegments(null,i);y.debug(a+":rejoint preload, ares("+n.length+") & feature("+r.length+")!"),v.fillFragments(n.concat(r),v.getLastOrder(),Number.MAX_VALUE),m.setInfo(a,i),m.freshFeatures(a,r),m.finishFeatures(a,!0)}}),t.on(_.NTF_VRSReady,function(e){var i=e.data,a=i.videoQipuId,n=t._getVDInfo(),r=t._movieinfo;if("m4s"===n.fileFormat)return u.set("QP0016","qvs",{expires:864e5,path:"/",domain:".iqiyi.com"}),void c.get({tvid:r.tvid,vid:r.vid},function(e){if(!/demo\.iqiyi\.com/gi.test(window.location.href)&&e.vi.vu){var t=f.query("list");window.location.href=e.vi.vu+(t?"?list="+t:"")}else window.location.reload()});m.setInfo(a,i),i.ares&&t._param.feedMode+""!="true"||m.finishPres(a,!0),m.freshFeatures(a,t._checkSegmentsInPreview()),m.finishFeatures(a,!0)})},_providerEvents:function(){var e=this,t=e.engine;v.on("orderWillChange",function(e){var i=e.data.order,a=g.getSegmentByOrder(i),n=g.getSegmentByOrder(i+1),r=t._getGasByOrder(i);if(t.isAd()){var o=i>=0&&n&&!0===n.ad;a&&(o||t.fire({type:_.NTF_ARES_End,data:{videoId:d.getEpisodeId(r.videoEventId),rollType:a.rollType}}))}}),v.on("stateChange",function(e){var i,a,n=e.data;switch("endFragment"!==n.state&&"startFragment"!==n.state&&"playing"!==n.state&&"pause"!==n.state&&"stop"!==n.state&&"error"!==n.state||(t.hasSeeking=!1),n.state){case"endFragment":i=parseInt(n.order,10),a=g.getSegmentByOrder(i),t.isAd(i)?a.vid===n.vid&&(y.log("p2p state change -- ,params: type = endFragment, 在播碎片结束(广告)"),t._statusChanged({status:h.Status_Stoped})):g.isFeatureEndSegment(a)&&!g.isEndSegment(a)&&(Math.abs(n.time-a.realEndTime)<=2e3?(y.log("p2p state change -- ,params: type = endFragment, 在播碎片结束(正片最后一个碎片)"),t._statusChanged({status:h.Status_Stoped})):y.warn("p2p state change -- ,params: type = endFragment, data.time: "+n.time+"realEndTime: "+a.realEndTime));break;case"startFragment":i=parseInt(n.order,10),t.isAd(i)?t._paused||(y.log("p2p state change -- ,params: type = startFragment, 碎片播放开始(广告)"),t._statusChanged({status:h.Status_Play}),t._statusChanged({status:h.Status_Playing})):g.isFeatureFirstSegment(g.getSegmentByOrder(i))&&(y.log("p2p state change -- ,params: type = startFragment, 碎片播放开始(正片第一个碎片)"),t._statusChanged({status:h.Status_Play}),t._statusChanged({status:h.Status_Playing}),setTimeout(function(){v.isDone()&&t._statusChanged({status:h.Status_Loaddone})},200));break;case"loadState":if(t.isAd(n.arg1)&&l.isObject(n.arg2)){var r=n.arg2;"cache"===r.loadType&&"start"===r.activeType&&t._statusChanged({status:h.Status_Loadstart,eventOrigin:"ad",gas:t._getGasByOrder(n.arg1)})}break;case"playing":t._paused=!1,t._statusChanged({status:h.Status_Play,actionType:t._checkActionType(h.Status_Play)}),t._statusChanged({status:h.Status_Playing,actionType:t._checkActionType(h.Status_Playing)});break;case"pause":t._paused=!0,t._statusChanged({status:h.Status_Paused,actionType:t._checkActionType(h.Status_Paused)});break;case"waiting":case"seeking":t._paused=!0,t._statusChanged({status:h.Status_Waiting,actionType:t._checkActionType(h.Status_Waiting)});break;case"progress":t.fire({type:h.NTF_Progress,data:{buffer:t.getBufferTime()}});break;case"stop":t._paused=!0,t._checkAuthTime(t._movieinfo&&t._movieinfo.isVIP&&t._movieinfo.previewTime<1/0?t._movieinfo.previewTime+1:1e3*t.getCurrenttime())&&t._statusChanged({status:h.Status_Stoped});break;case"done":t._statusChanged({status:h.Status_Loaddone,actionType:!1});break;case"error":if(t._statusChanged({status:h.Status_LoadFailed,actionType:!1,gas:t._getGasByOrder(n.arg1)}),t.isAd(n.arg1))y.log("p2p state change -- ,params: type = error, (广告)"),t._removeAres(n.arg1);else switch(y.error("p2p state change -- ,params: type = error, 正片, arg2 = "+n.arg2+" (dispatch:调度出错<PB7001>,keyframe:数据验证失败<PB7002>,load:数据下载出错<PB7003>,hijack:视频下载劫持报错<PB7004>,data:数据结构错误<PB7005>,decoder:数据解码报错<PB7006>)"),n.arg2){case"dispatch":t.brokedown(201,"PB7001","7001");break;case"keyframe":t.brokedown(202,"PB7002","7002");break;case"load":t.brokedown(203,"PB7003","7003");break;case"hijack":t.brokedown(204,"PB7004","7004");break;case"data":t.brokedown(205,"PB7005","7005");break;case"decoder":t.brokedown(206,"PB7006","7006")}break;case"muted":t.fire({type:h.NTF_StatusChanged,data:{status:h.Status_Playing_Fail}})}}),v.on("orderChange",function(e){var i=e.data.order;if(t.isAd());else{var a=g.getSegmentByOrder(i);if(g.isFeatureFirstSegment(a))i>0&&(y.debug("playing at first feature segment, remove all segments before this segment!"),v.removeFragment(0,i),e.data.order=0),t._checkSkipHeadTime(a.showStartTime);else{var n=g.getAresPres(a.episodeId),r=g.getAresMids(a.episodeId);n.length>0&&(y.debug("remove all pres!"),v.removeFragment(n[0].order,n.length)),r.length>0&&(y.debug("remove all mids!"),v.removeFragment(r[0].order,r.length))}}})}}});a.exports=new b}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(5),o=i(22),s=i(1),d=i(18),l=i(4),u=(i(8),i(7)),c=i(3),f=i(26),p=i(15),h=i(33),_=i(6),g=i(45),m=i(19),v=i(52),y=i(34),b=i(20),x=i(51),w=i(17),T=i(44),S=i(94),k=i(55),A=i(95),E=i(27),P=i(67),q=i(58),I=i(68),L=i(56),D=i(36),C=i(69),F=new s("QVSEngine");D.Conf&&F.enabledFor(s.levels.DEBUG)&&(D.Conf.DEBUG=!0),D.logger&&(D.logger.enable=!0,D.logger=F),a.exports=n("QVSEngine",{extend:x,construct:function(e,t){var i=this;i.emitter=new A,i.p2p=new S,i.p2p.on("dashUpdated",function(e){if(void 0!==e.data.levelID&&void 0!==e.data.streamInfo){var t=e.data.levelID,a=JSON.parse(e.data.streamInfo);if(F.info(">>>> p2p dashUpdated , auto = "+i.autoVdUsing()+",vdlevel="+t+", dashtvid = "+a.data.tvid),a.data&&a.data.program.video.length>0&&!i.isAd()&&a.data.tvid==i._movieinfo.tvid){if(a.data.tvid!==i._movieinfo.tvid)return void F.info(">>>> p2p dashUpdated tvid is not current , current = "+i._movieinfo.tvid+", p2p = "+a.data.tvid);i._switchVD({vd:f.getOldVd(t),bid:t,fileFormat:a.data.program.video[0].ff},a)}else F.info("p2p dashUpdated error , streamInfo error or ad = "+i.isAd())}else F.info("p2p dashUpdated error , levelID or streamInfo is undefined")}),i._param=t,i._pburl=t.h5P2PABSUrl,i._vrs={},i._sdkloaded=!1,i._isSkipAD=!0,i._autoVdEnable=!1;var a=new D(e,{enableWorker:!0,switchVariantImmediate:!1,p2pLoader:i.p2p.enabled?i.p2p:null});window.qvs=this.qvs=a,i.p2p.__setQVS(this.qvs),i._canFireDecodeEvt=function(){return!1},i.emitter.init(i),k.setEngine(i)},methods:{assemble:function(){var e=this;e._checkAssembled()||(e.p2p.enabled&&e._loadP2PSdk(),e._loadAdSdk())},isAssembled:function(){var e=!this.p2p.enabled||this.p2p.isReady(),t=!!this.getAresSDK();return e&&t},_loadP2PSdk:function(){var e=this,t=function(){var t=window.QIYI_HTML5_P2P_PlayBack_0002;t?(F.info("P2P core load ready"),e.p2p.__setSDK(t,e.qvs),e._checkAssembled()):F.info("P2P core load error")};window.QIYI_HTML5_P2P_PlayBack_0002?t():(F.info("P2P core start load,params:url = "+e._pburl),w.sTime_P2PCore=new Date-w.pgct,o.seriesLoadScripts(e._pburl,function(e){w.usedTime_P2PCore=new Date-w.sTime_P2PCore-w.pgct,t()}))},_loadAdSdk:function(){var e=this,t=e._param.h5adsrc;"undefined"==typeof mars?t&&""!==t?o.seriesLoadScripts(t,function(t){t&&"undefined"!=typeof mars?(e.setAresSDK(mars),e.fire({type:"aresloaded"}),e._checkAssembled()):F.error("h5 data ad sdk load error!")}):F.error("params ares src is null. "):(e.setAresSDK(mars),e._checkAssembled())},_checkAssembled:function(){var e=this,t=e.isAssembled();return t&&e.fire({type:b.Status_Assembled}),t},loadMovie:function(e,t){var i=this,a=k.getPid(e,t);i._movieinfo.dataProviderPID=a,i._noticeDataStart();var n=function(e){e.isPreload=!!e.isPreload,l(i._movieinfo,e,!0),i._movieinfo.vd=e.vd,i._movieinfo.ok=!0,i._resetFLVDuration(),i._vd=e.vd,i.isAssembled()?(i._noticeDataReady(),i._noticeDataDone()):i.on(b.Status_Assembled,function(){i._noticeDataReady(),i._noticeDataDone()})};if(h.read(h.PLAYER_TEMP_VD_KEY)&&i.fire({type:b.NTF_LoadTempVd,data:{userVd:p.read(p.PLAYER_VD_KEY)||2,tempVd:h.read(h.PLAYER_TEMP_VD_KEY)}}),k.hasPreload(a)){var r=k.getData(a);n(r)}else k.getPromise(a).then(function(e){e.isPreload=!1,n(e)},function(e){switch(l(i._movieinfo,e.movieinfo,!0),e.type){case 0:i.qvs.reset(),i.brokedown(e.code,e.originalCode,e.ec,e.vmsst);break;case 1:i.qvs.reset(),i._noticeRecharge(e.code);break;case 2:i.qvs.reset(),i.brokedown(22);break;default:F.error(e&&e.stack?e.stack:e)}i._noticeDataDone()});i._aresInit||(i._aresInit=!0,i._initAdEvents())},preload:function(e,t){var i=this,a=k.getPid(e,t);E.valid(e,!0),k.hasPreload(a)||(h.read(h.PLAYER_TEMP_VD_KEY)&&i.fire({type:b.NTF_LoadTempVd,data:{userVd:p.read(p.PLAYER_VD_KEY)||2,tempVd:h.read(h.PLAYER_TEMP_VD_KEY)}}),k.getPromise(a).then(function(e){e.dataProviderPID=a,e.isPreload=!0,e.ares=!0,i._preloadedMovieInfo=e,i._noticeDataPreloaded()},function(e){F.warn("preload movie which requires auth: "+s.stringify(e))}))},hasPreload:function(e){var t=!1;return e+="",t=E.finishPres(e),t=t&&E.finishFeatures(e)},_getVDInfo:function(e){var t=this,i=e||t._movieinfo;return i.vidl.filter(function(a){return a.vd===(e?i.vd:t._vd)})[0]},_clearData:function(){clearTimeout(this._fireGasTimer),clearTimeout(this._fireGasFinishTimer),this.qvs.reset(),E.clearAll(),k.clearAll()},_checkSkipHeadTime:function(e){var t=this,i=t._movieinfo;if(e=Math.floor(e),i&&!i._hasTipPlayStartFrom){var a=t._skipHeadTvid;y.isSkipPrelude();if(i._hasTipPlayStartFrom=!0,a!=i.tvid)switch(i.playStartFrom){case"prelude":F.log("skip prelude, pos: "+e+"!"),t.fire({type:v.Evt_SkipHeader,data:{time:e}});break;case"share":F.log("apply share start, pos: "+e+"!"),t.fire({type:v.Evt_StartShareTime,data:{time:e}});break;case"history":F.log("apply record, pos: "+e+"!"),t.fire({type:v.Evt_StartFromHistory,data:{time:e}})}}},_checkSkipTailTime:function(e){var t=this,i=t._movieinfo;if(i&&i.prelude){var a=!!t._skipTailTipped,n=y.isSkipPrelude(),r=n&&i.prelude.tailTime>0?1e3*i.prelude.tailTime:-1;t._skipTailTvid!=i.tvid&&(t._skipTailTvid=i.tvid,t._skipTailTipped=!1),n&&r>0&&e<=r&&(e+15e3>=r?a||(t._skipTailTipped=!0,F.log("skip tail, cur:"+e+", tail: "+r+"!"),t.fire({type:v.Evt_SkipTail,data:{time:r}})):t._skipTailTipped=!1)}},isAd:function(){return this.qvs.isRolling},_abortAllAres:function(e){var t=this,i="abort all "+e+" roll";switch(e){case"preroll":case"midroll":setTimeout(function(){F.info(i),t.qvs.abortRollingStream()},0)}},_getCurrentGas:function(){return this.isAd()?this.qvs.getCurrentADGas():{videoEventId:d.getEventId(this._movieinfo.tvid)}},_constructPlayTimeRanges:function(e){var t,i=this,a=e||i._movieinfo,n=0,r=a.isPreload?0:i._startPlayTime,o=y.isSkipPrelude(),s=o&&a.prelude.headTime>0?a.prelude.headTime:0,d=o&&a.prelude.tailTime>0?a.prelude.tailTime:1/0;return t=d,r>0&&r+5<t&&(a.playStartFrom="history",n=r),s>0&&s>=n&&(a.playStartFrom="prelude",n=s),"number"==typeof a.share_start_time&&a.share_start_time>=0&&(n=parseInt(a.share_start_time),a.playStartFrom="share"),"number"==typeof a.share_start_time&&a.share_end_time&&a.share_end_time>=a.share_start_time&&(t=1e3*parseInt(a.share_end_time)),n>1e3*parseInt(a.share_end_time)&&(t=d),[[n,t]]},_getP2PTimeRange:function(e,t){var i=t[0][0],a=t[0][t[0].length-1],n=this.getCurrenttime();if("boolean"==typeof e.isAccurateTimeStamp&&!e.isAccurateTimeStamp){var r=this.qvs.config.hlsRangeTSTolerance;i=i-r>=0?i-r:0,a=a+r<=e.duration?a+r:a}return e.tvid==this._movieinfo.tvid&&n>=a&&(i=this.qvs.mediaBufferInfo.end,a=1/0),t=[[i,a]],F.info("=== top2p reset timerange = "+i+"-"+a),t},_switchVD:function(e,t){var i=this,a=i.qvs,n=function(){var n,r=e.m3u8;if(i.p2p.enabled&&!t&&e.vd===i.autoVdValue)return void i.p2p.setBitrate(i._movieinfo.tvid,e.vd);if(i.switchVmsRequest&&i.switchVmsResponse&&(e.requestParam=i.switchVmsRequest.getReqParams(),e.responseData=i.switchVmsResponse),-1!==e.vd){switch(e.fileFormat){case"m4s":n=D.ManifestTypes.DASH;break;case"ts":n=D.ManifestTypes.HLS;break;case"f4v":n=D.ManifestTypes.F4V,r=C.getFLVContent(e,i._movieinfo)}if(i.p2p.enabled&&(n===D.ManifestTypes.DASH||n===D.ManifestTypes.HLS)&&!t){var o=i._constructPlayTimeRanges(),s=o;n===D.ManifestTypes.HLS&&(s=i._getP2PTimeRange(i._movieinfo,o)),i.p2p.feed(e.requestParam,e.responseData,s,!0,e.bid)}if(a.switchVariant(n,r,!1),i.autoVdUsing()&&(i._vd=e.vd,F.log("definition changed: "+i._vd)),i.video().readyState<3)i.once(m.NTF_TimeUpdate,function(){i._noticeVidChanged()});else if(!i.autoVdUsing()){var d=parseInt(1e3*a.bufferInfo.media.len/i.getPlaybackRate()+"",10);F.log("will switch variant after: "+d/1e3+"s"),i._switchDelayTimer=setTimeout(function(){i._noticeVidChanged()},d)}}i.switchVmsRequest=i.switchVmsResponse=null},r=function(){i._noticeVidChanged(!1)},o=function(t){if(i.switchVmsResponse=t,t.hasOwnProperty("data")&&t.data.hasOwnProperty("st")){var a=parseInt(t.data.st,10);if(100<a&&a<200){var o,s={vsInfo:t.data.program.video,isVIP:i._movieinfo.isVIP,tvid:i._movieinfo.tvid,cid:i._movieinfo.cid,sid:i._movieinfo.sid,albumId:i._movieinfo.albumId};if(o="f4v"==e.fileFormat?q.analyzeVds(s,e.vd):P.analyzeVds(s,e.vd)){i._checkVipBoss(t.data,o);for(var d=0;d<i._movieinfo.vidl.length;d++)if(i._movieinfo.vidl[d].vd==o.vd){i._movieinfo.vidl[d]=o,void 0!==o.isAccurateTimeStamp&&(i._movieinfo.isAccurateTimeStamp=o.isAccurateTimeStamp);break}i._resetFLVDuration(),e=o,n()}else r()}else r()}else r()};if(void 0!==t)F.info("switchVD, from p2p, vd = "+e.vd),o(t);else if(e.m3u8&&e.responseData||-1===e.vd)F.info("switchVD, vd = "+e.vd),n();else{var s=f.getNewVd(e.vd);F.info("switchVD, load movieInfo from vrs,params: tvid = "+i._tvid+", vid = "+i._vid+", islogin = "+u.isLogin()+", vd = "+s+"|"+e.vd),i.switchVmsRequest=L.request({params:{tvid:i._movieinfo.tvid,vid:e.vid,vd:s,tryCount:0,switchvd:!0},hostUseIP:!1},function(e){o(e)},function(e){r()})}},switchAD:function(e){var t=this,i=t.qvs,a=t._movieinfo.audl.types;if(!(a.length<=1)){t._movieinfo.oldLid=t._movieinfo.currentLid||"";var n=p.read(p.PLAYER_VD_KEY)||2;n=f.getNewVd(n);for(var r=function(){t._movieinfo.currentLid=t._movieinfo.oldLid,t._noticeAudioChanged(!1),F.info("switch audio Fail!")},o=function(e,a){if(i.switchAudioVariant(e,!1),t.video().readyState<3)t.once(m.NTF_TimeUpdate,function(){t._movieinfo.currentLid=a,t._noticeAudioChanged()});else{var n=parseInt(1e3*i.bufferInfo.media.len+"",10);F.log("will switch variant after: "+n/1e3+"s"),t._switchDelayTimer=setTimeout(function(){t._movieinfo.currentLid=a,t._noticeAudioChanged()},n)}},s=0;s<a.length;s++)a[s].id===e&&(1!==a[s].ispre?function(){L.request({params:{tvid:t._movieinfo.tvid,vid:t._movieinfo.vid,vd:n,lid:e,tryCount:0,switchvd:!0},hostUseIP:!1},function(i){if(i.hasOwnProperty("data")&&i.data.hasOwnProperty("st")){var a=parseInt(i.data.st,10),n=i.data,s=n.boss_ts?"boss_ts":"boss";if(100<a&&a<200)if(n.program&&n.program.audio){if(n.hasOwnProperty(s)&&n[s].hasOwnProperty("code")){n[s].data;t._movieinfo.boss&&t._movieinfo.boss.data&&(t._movieinfo.boss=n[s])}t._movieinfo.audio=n.program.audio;var d=I.analyzeAds(t._movieinfo);t._movieinfo.audl=d,d&&d.audio?o(d.audio,e):r()}else r();else r()}else r()},function(e){r()})}():o(null,e))}},_noticeAudioChanged:function(e){var t=this;void 0===e||e?t.fire({type:b.NTF_AUDChanged}):t.fire({type:b.NTF_AUDChangeFail})},pause:function(e,t){var i=this;i._duringPlay&&!t||(e?i._currentManualAction=m.Status_Paused:i._currentCodeActionList.push(m.Status_Paused),x.prototype.pause.call(i,e,t))},seek:function(e,t,i){var a=this,n=a.qvs;e=parseFloat(e),a.hasSeeking=!0,a._checkAuthTime(1e3*e)&&(t?a._currentManualAction=m.NTF_Seeking:a._currentCodeActionList.push(m.NTF_Seeking),n.seek(e),a.isPaused()&&!i&&a.play())},isSeeking:function(){return!!this.hasSeeking},getBufferTime:function(){var e=this,t=0;if(e.isAd());else{t=e.qvs.bufferInfo.data.end}return t},getDataBufferInfo:function(){return this.qvs.bufferInfo.data},getCurrenttime:function(){var e,t=this,i=t.getDuration();return e=t.isAd()?t.qvs.currentTime:x.prototype.getCurrenttime.call(t),e<i||isNaN(i)?e:i},getDuration:function(){var e=this,t=0;return e.isAd()?t=e.qvs.datasource.duration:e._movieinfo&&e._movieinfo.isVIP&&e._movieinfo.isTryWatch&&e._getVDInfo()?t=e._getVDInfo().duration:e.qvs&&e.qvs.datasource&&(t=e.qvs.datasource.duration),t},pbLog:function(){},pbVersion:function(){return D.version},endOfDown:function(){return this.qvs.endOfDown},_removeAres:function(e){},_abortAres:function(){this.qvs.abortCurrentADGas()},setAresSDK:function(e){var t=this,i=e.init;t._sdkloaded=!0,F.log("ares version: "+mars.version),t._aressdk=e,t.fire({type:b.NTF_ARES_Load}),i.hijack||(e.init=function(a){i.call(e,a),t.fire({type:b.NTF_ARES_Init}),F.debug("ares init: "+s.stringify(a))},e.init.hijack=!0)},getAresSDK:function(){return this._aressdk},setAresMW:function(e){var t=this;t._aresmw=e,t.fire({type:"ares_mwready"}),e.bussiness.on("_playdata_",function(e){var i=e.data,a=i.videoEventId,n=d.getEpisodeId(a),r=E.valid(n)&&t._movieinfo&&t._movieinfo.ok;F.debug("ares mw load"+(r?"":" invalid")+":"+s.stringify(i)),r&&(t._fireGasTimer=setTimeout(function(){t.fire({type:b.NTF_ARES_Gas,data:i||{}})},0))})},_resetFLVDuration:function(){var e=this._movieinfo&&this._movieinfo.vidl&&this._movieinfo.vidl.length>0?this._movieinfo.vidl:null;if(e&&"f4v"==e[0].fileFormat)for(var t=0;t<e.length;t++)e[t].duration>0&&(e[t].duration=e[t].duration/1e3)},_checkVipBoss:function(e,t){if(this._movieinfo.isVIP){var i=e.boss_ts?"boss_ts":"boss";t.segments.map(function(t){return t.boss||(t.boss=e[i],t.boss.bossKeyTime=+new Date),t})}},_initAdEvents:function(){function e(e){t._movieinfo.ares&&t.initares(e)}var t=this;t.on(b.NTF_MovieInfoChange,function(e){var i=e.data.preMovieInfo,a=e.data.curMovieInfo;if(i)try{F.debug("stop ares: "+i.tvid),t._aresmw._disableVideoOP=!0,t.getAresSDK().stop({videoEventId:d.getEventId(i.tvid)})}catch(e){}else a&&(F.debug("stop ares by refreshPlayer: "+a.tvid),t.getAresSDK().destroy({videoEventId:d.getEventId(a.tvid)}))}),t.on(b.NTF_TVIDChanged,function(e){t._aresmw._disableVideoOP=!1}),t.on(b.NTF_VRSReady,function(i){t._movieinfo=i.data,t._movieinfo.isPreload||e()}),t.on(b.NTF_VRSPreloaded,function(i){t._preMovieinfo=i.data,e(i.data)}),t.on(b.NTF_ARES_End,function(e){t._aresdone(e.data)})},_aresdone:function(e){var t=this,i=e.rollType;F.debug("ares done! "+(i?"("+i+")":"")),t._abortAllAres(i),(t._isSkipAD&&t._autoplay||!t._isSkipAD||c.os.ios||c.os.android)&&t.isPaused()&&(F.debug("manual play"),t.play())},initares:function(e){var t=this;t._sdkloaded&&t._aresmw?t._initAres(e):(t._aresSDKLoadPromise||(t._aresSDKLoadPromise=new Promise(function(e){t._sdkloaded?e():t.on("aresloaded",function(){e()})})),t._aresMWLoadPromise||(t._aresMWLoadPromise=new Promise(function(e){t._aresmw?e():t.on("ares_mwready",function(){e()})})),Promise.all([t._aresSDKLoadPromise,t._aresMWLoadPromise]).then(function(){t._initAres(e)}))},_initAres:function(e){var t,i=this,a=e||i._movieinfo,n=T.getViFromVl(a.tvid,a.vid);t=n&&n.cid?n.cid:i._param.cid||"",i._param.isCid||!c.os.android&&!c.os.ios||(t=navigator.userAgent.indexOf("MicroMessenger")>-1?"qc_105092_300416":"qc_100001_100103");var r=i._param.isSupportViewpoint||!1,o=i._param.site||"iqiyiw";u.isVip(function(e){i._aresmw._isVip=e;var n=i._aresmw.video(),s=(a.videoQipuId||a.tvid)+"",l={autoLoad:!0,autoRender:!0,isMacH5:!0,isPreload:!!a.isPreload,adPlayerId:t,episodeId:s,videoEventId:d.generate(s),videoDefinition:a.vd,showVoiceIcon:!(c.os.android||c.os.ios),videoMidware:i._aresmw,isVIP:e,isSupportViewpoint:r,site:o,locale:i._param.local,passportId:u.getUid(),passportCookie:u.passportCookie(),clientVersion:g.playerVersion,videoContainer:n,couponCode:i._param.cpnc||"",couponVer:i._param.cpnv||"",ptid:c.getPtid(_.isTWLocale())};setTimeout(function(){i.getAresSDK().init(l)},0)})},getDefinitionAd:function(e){var t;return E.valid(e)&&(t=E.getDefinitionAd(e)),t},getCurrManifestType:function(){return this.qvs.currentManifestType},getDownloadSpeed:function(){return{downloadSpeed:this.p2p.stats().bandwidth}},autoVdEnabled:function(){return this.p2p&&this.p2p.enabled&&this._autoVdEnable&&this._movieinfo&&this._movieinfo.vidl&&this._movieinfo.vidl.length>0&&"f4v"!==this._movieinfo.vidl[0].fileFormat},setAutoVdEnabled:function(e){this._autoVdEnable=e},autoVdUsing:function(){return this._autoVdUsing&&this.autoVdEnabled()},setAutoVdUsing:function(e){r.set("QP0020",e?1:""),this._autoVdUsing=e},autoVdAlgot:function(){return this.setAutoVdUsing()?this.p2p.algot():""}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){function n(e){return e.tvid+="",e}var r=i(2),o=i(0),s=i(1),d=i(9),l=i(14),u=(i(10),i(5),i(4)),c=i(3),f=i(43),p=new s("P2PProxy"),h="p2p abs proxy ",_=o("P2PProxy",{extend:r,props:{enabled:!c.browser.WECHAT&&window.Map},construct:function(){var e=this;e._p_=null,e._currPlayId=void 0,e._nextPlayId=void 0,e._feeded=!1,e._seeked=!1,e._closed=!0},methods:{__setSDK:function(e){var t=this;t._p_=new e,t.init(),t.fire({type:"ready"})},__setQVS:function(e){this._q_=e},__setPlayId:function(e,t){e+="",t?this._currPlayId=e:this._nextPlayId=e},__getPlayId:function(e){return e?this._currPlayId:this._nextPlayId},__switchToNextTvid:function(){var e=this;e.enabled&&e._feeded&&e._nextPlayId&&(e._currPlayId=e._nextPlayId,e._nextPlayId=void 0,e._p_.seek(this._currPlayId))},isReady:function(){return!!this._p_},isClosed:function(){return this._closed},init:function(){function e(){var e={};if(r._q_){u(e,r._q_.mediaBufferInfo);var t=r._q_.dataBufferInfo;t&&null!==t.buffered&&(e.buffered.audio.end=t.buffered.audio.preEnd,e.buffered.video.end=t.buffered.video.preEnd)}return e}function t(){return r._q_.reBufTime}function i(){return r._q_.media.updating}function a(){return!r._q_.isRolling&&r._q_.datasource.playingStream&&r._q_.startPlayed}function n(e){r.fire({type:"dashUpdated",data:e})}var r=this,o={logger:p,uid:d.getFluid()||d.getJsuid(),getBufferFunc:e,encryptFunc:l.cmd5x,reBufTimeFunc:t,isMediaUpdatingFunc:i,canSwitchVd:a};r._p_.init(o,n)},getBuffTime:function(){var e={start:0,length:0};if(this._p_){var t=this._p_.getBuffTime();e.start=t.start,e.length=t.length}return e},setBitrate:function(e,t){var i=this;i.enabled&&(p.log(h+" setBitrate ,  tvid= "+e+", bitrate = "+t),i._p_.setBitrate(e.toString(),parseInt(t,10)))},feed:function(e,t,i,a,r){var o=this;if(o.enabled){if(o._closed=!1,f.hasBit(4,3)){var s=f.getFT4().toString(2).split("");if(s[s.length-3]=0,e.k_ft4=parseInt(s.join(""),2),!f.hasBit(1,37)){var d=f.getFT1().toString(2).split("");d[d.length-37]=1,e.k_ft1=parseInt(d.join(""),2)}}e=n(e),o.__setPlayId(e.tvid,a),p.log(h+" feed "+e.tvid+", isCurrent: "+a),o._p_.feed(e,JSON.stringify(t),i,a),o.setBitrate(e.tvid,r),o._feeded=!0}},seek:function(e){var t=this,i=t._currPlayId;t.enabled&&t._feeded&&(p.debug(h+"seek, tvid("+i+"), time("+e+")"),i&&("string"!=typeof i&&(i+=""),"number"==typeof e&&(e=parseFloat(e),t._p_.seek(i,e),t._seeked=!0)))},read:function(){return this.enabled&&this._feeded&&this._p_?this._p_.read():null},refreshLoadRange:function(e,t){this.enabled&&this._feeded&&this._p_&&this._p_.refreshLoadRange(e+"",t)},error:function(){return this._p_?this._p_.error:null},stats:function(){var e=0;if(this._p_){e=this._p_.stats.bandwidth}return{bandwidth:e}},algot:function(){return this._p_&&this.enabled&&this._feeded?this._p_.algorithmDes:""},close:function(){if(!this.enabled||!this._feeded)return null;this._p_&&(this._p_.close(),p.debug(h+"close"),this._closed=!0)}}});a.exports=_}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(2),o=i(1),s=i(12),d=i(18),l=i(8),u=i(36),c=i(19),f=i(20),p=i(27),h=i(55),_=i(69),g=i(30),m=new o("QVSEngineEmitters"),v=n("QVSEngineEmitters",{extend:r,methods:{init:function(e){var t=this;t.engine=e,e._needPlay=!0,t._onTimeUpdate=t._onTimeUpdate.bind(e),t._onDestroy=t._onDestroy.bind(e),t._onSetSkipPrelude=t._onSetSkipPrelude.bind(e),t._onMovieInfoChange=t._onMovieInfoChange.bind(e),t._onVRSReady=t._onVRSReady.bind(e),t._onVRSPreload=t._onVRSPreload.bind(e),t._onStatusChanged=t._onStatusChanged.bind(e),t._onMediaBufferCreated=t._onMediaBufferCreated.bind(e),t._onMediaFPSReport=t._onMediaFPSReport.bind(e),t._onDataSourceStageSwitching=t._onDataSourceStageSwitching.bind(e),t._onDataSourceStageSwitched=t._onDataSourceStageSwitched.bind(e),t._onQVSError=t._onQVSError.bind(e),t._onAudioTrackSwitchFailed=t._onAudioTrackSwitchFailed.bind(e),t._AudioTRackSwitchSuccessed=t._AudioTRackSwitchSuccessed.bind(e),e.on(c.NTF_TimeUpdate,t._onTimeUpdate),e.on(f.Status_Destroy,t._onDestroy),e.on(f.NTF_SetSkipPrelude,t._onSetSkipPrelude),e.on(f.NTF_VRSPreloaded,t._onVRSPreload),e.on(f.NTF_VRSReady,t._onVRSReady),e.on(f.NTF_MovieInfoChange,t._onMovieInfoChange),e.qvs.on(u.Events.ERROR,t._onQVSError),e.qvs.on(u.Events.STATE_CHANGE,t._onStatusChanged),e.qvs.on(u.Events.BUFFER_CREATED,t._onMediaBufferCreated),e.qvs.on(u.Events.FPS_REPORT,t._onMediaFPSReport),e.qvs.on(u.Events.DATA_STAGE_SWITCHING,t._onDataSourceStageSwitching),e.qvs.on(u.Events.DATA_STAGE_SWITCHED,t._onDataSourceStageSwitched),e.qvs.on(u.Events.AUDIO_TRACK_SWITCHED_FAILED,t._onAudioTrackSwitchFailed),e.qvs.on(u.Events.AUDIO_TRACK_SWITCHED_SUCCESSED,t._AudioTRackSwitchSuccessed),t._episodeEvents(),t._aresEvents(),t._adSDKEvents()},_onDestroy:function(){var e=this,t=e.emitter;e.un(c.NTF_TimeUpdate,t._onTimeUpdate),e.un(f.Status_Destroy,t._onDestroy),e.un(f.NTF_SetSkipPrelude,t._onSetSkipPrelude),e.un(f.NTF_VRSPreloaded,t._onVRSPreload),e.un(f.NTF_VRSReady,t._onVRSReady),e.un(f.NTF_MovieInfoChange,t._onMovieInfoChange),e.qvs.off(u.Events.ERROR,t._onQVSError),e.qvs.off(u.Events.STATE_CHANGE,t._onStatusChanged),e.qvs.off(u.Events.BUFFER_CREATED,t._onMediaBufferCreated),e.qvs.off(u.Events.DATA_STAGE_SWITCHING,t._onDataSourceStageSwitching),e.qvs.off(u.Events.DATA_STAGE_SWITCHED,t._onDataSourceStageSwitched),e.qvs.off(u.Events.AUDIO_TRACK_SWITCHED_FAILED,t._onAudioTrackSwitchFailed),e.qvs.off(u.Events.FPS_REPORT,t._onMediaFPSReport),e.p2p.close(),p.destroy(),e.qvs.destroy()},_onSetSkipPrelude:function(e){var t=this,i=t._constructPlayTimeRanges();t._skipTailTipped=!1,t.qvs.updateMediaRanges(i),t.p2p.refreshLoadRange(t._movieinfo.tvid,t._getP2PTimeRange(t._movieinfo,i))},_onStatusChanged:function(e){var t=this,i=e.state;switch("playing"!==i&&"pause"!==i&&"stop"!==i&&"error"!==i||(t.hasSeeking=!1),i){case"loadedmetadata":if(t._needPlay){t._needPlay=!1;var a=t.play();a&&(t._duringPlay=!0,a.then(function(){t._duringPlay=!1,m.log("Automatic playback started!")},function(e){var i=/the user didn't interact with the document first/gi;e&&("NotAllowedError"===e.name||e.message&&i.test(e.message))?(m.warn("Automatic playback failed, muted video and then try to play!"),t.video().muted=!0,t.play().then(function(){m.warn("Play muted playback successful!"),t._duringPlay=!1,t._statusChanged({status:c.Status_Playing_Fail})},function(){t._duringPlay=!1,t._needPlay=!0,m.warn("Play muted playback failed, & Show a UI element to let the user manually start playback.!"),t.fire({type:f.NTF_NeedUserGesture4Playback})})):(t._duringPlay=!1,t._needPlay=!0)}))}break;case"playing":t._paused=!1,t._statusChanged({status:c.Status_Play,actionType:t._checkActionType(c.Status_Play)}),t._statusChanged({status:c.Status_Playing,actionType:t._checkActionType(c.Status_Playing)});break;case"pause":t._paused=!0,t._statusChanged({status:c.Status_Paused,actionType:t._checkActionType(c.Status_Paused)});break;case"waiting":t._paused=!0,t._statusChanged({status:c.Status_Waiting,actionType:t._checkActionType(c.Status_Waiting)});break;case"seeking":t._paused=!0,t.fire({type:c.NTF_Seeking,data:{current:t.getCurrenttime(),duration:t.getDuration(),actionType:t._checkActionType(c.NTF_Seeking)}});break;case"progress":t.fire({type:c.NTF_Progress,data:{buffer:t.getBufferTime()}});break;case"eod":t._statusChanged({status:c.Status_Loaddone,actionType:!1});break;case"beforeended":t.qvs.media.loop=!!t._param.cyclePlay;break;case"ended":t._paused=!0,(t.isAd()||!t.isAd()&&t._checkAuthTime(t._movieinfo&&t._movieinfo.isVIP&&t._movieinfo.previewTime<1/0?t._movieinfo.previewTime+1:1e3*t.getCurrenttime()))&&t._statusChanged({status:c.Status_Stoped});break;case"loadstart":t.isAd()&&t._statusChanged({status:c.Status_Loadstart,eventOrigin:"ad",gas:e.gas})}},_onTimeUpdate:function(){var e=this;if(!e.isAd()){var t=1e3*e.getCurrenttime();e._checkAuthTime(t),e._checkSecondAuthTime(t),e._checkSkipHeadTime(t),e._checkSkipTailTime(t)}},_onVRSReady:function(e){var t=e.data,i=t.videoQipuId;p.setInfo(i,t),t.ares||p.finishPres(i,!0)},_concatCurFeature:function(e){var t=this.engine,i=t._getVDInfo();i.duration>0&&(t._movieinfo.duration=i.duration,t._startPlayTime>=t._movieinfo.duration&&(t._startPlayTime=0));var a=t._startPlayTime,n=t._constructPlayTimeRanges(),r=n[0][0],o=n[n.length-1][1],s=null;r<a&&a<o&&(s=a);var d,l=t._movieinfo.dataProviderPID,c=h.getParams(l),f=h.getData(l),g=i.m3u8,m=parseInt(i.bid,10);switch(i.requestParam=c,i.responseData=f.originalData,i.fileFormat){case"m4s":d=u.ManifestTypes.DASH;break;case"ts":d=u.ManifestTypes.HLS;break;case"f4v":d=u.ManifestTypes.F4V,g=_.getFLVContent(i,t._movieinfo)}if(t.p2p.enabled)if(d===u.ManifestTypes.F4V)t.p2p.isClosed()||t.p2p.close();else{var v=t.p2p.__getPlayId(!0),y=t.p2p.__getPlayId(!1),b=!!v&&v===e+"",x=t.p2p.isClosed()||!v||b;if(y!==e+""){var w=n;d===u.ManifestTypes.HLS&&(w=t._getP2PTimeRange(t._movieinfo,n)),t.p2p.feed(c,f.originalData,w,x,m),t.autoVdUsing()&&t.p2p.setBitrate(c.tvid,t.autoVdValue)}else t.autoVdUsing()&&t.p2p.setBitrate(e,t.autoVdValue);b&&t.p2p.seek(n[0][0]),x||t.p2p.__switchToNextTvid()}p.finishFeatures(e,!0),t.qvs.loadVariant(d,g,s,n)},_concatPreloadFeature:function(e){var t,i=this.engine,a=p.getInfo(e),n=i._constructPlayTimeRanges(a),r=i._getVDInfo(a),o=r.m3u8;switch(r.fileFormat){case"m4s":t=u.ManifestTypes.DASH;break;case"ts":t=u.ManifestTypes.HLS;break;case"f4v":t=u.ManifestTypes.F4V,o=_.getFLVContent(r,a)}var s=a.dataProviderPID,d=h.getParams(s),l=h.getData(s);if(i.p2p.enabled&&(t===u.ManifestTypes.DASH||t===u.ManifestTypes.HLS)){var c=n;t===u.ManifestTypes.HLS&&(c=i._getP2PTimeRange(a,n));var f=i.p2p.isClosed();i.p2p.feed(d,l.originalData,c,f,r.bid)}i.qvs.preloadVariant(t,o,null,n)},_onVRSPreload:function(e){var t=e.data,i=t.videoQipuId;p.setInfo(i,t),p.finishFeatures(i,!0)},_onMovieInfoChange:function(e){this._lastCheckSkipHeadTime=null},_onMediaBufferCreated:function(e){this._needPlay=!0},_onMediaFPSReport:function(e){},_onQVSError:function(e){var t=this,i=e.severity,a=e.category,n=e.code,r=e.data&&e.data.length>0&&e.data[0]?e.data[0].gas:null;i===u.Error.severity.CRITICAL&&(t._statusChanged({status:c.Status_LoadFailed,actionType:!1,gas:r||t._getCurrentGas()}),t.isAd()?m.log("qvs state change -- ,params: type = error, (广告)"):t.brokedown(301,"QVS-"+a+"-"+n,"QVS-"+n))},_onDataSourceStageSwitching:function(){var e=this;if(clearTimeout(e._switchDelayTimer),e._switchDelayTimer=null,e.switchVmsRequest&&e.switchVmsRequest){var t=e.switchVmsRequest.getXhrRequest();t&&t.abort&&t.abort()}e.autoVdUsing()&&e.p2p.setBitrate(e._movieinfo.tvid,e.autoVdValue),e.p2p.__switchToNextTvid(),e.p2p.seek(-1)},_onDataSourceStageSwitched:function(){var e=this;e.getCurrManifestType()!==u.ManifestTypes.F4V||e.isAd()||e.p2p.isClosed()||e.p2p.close()},_onAudioTrackSwitchFailed:function(){},_AudioTRackSwitchSuccessed:function(){},_episodeEvents:function(){var e=this,t=e.engine;p.on("finishAddPres",function(i){var a=i.data,n=a.videoId,r=a.length,o=t._getCurrentGas(),s=d.getEpisodeId(o.videoEventId);e._aresQvsVariant(n,null,!0,0,"preroll"),n===s||0===r&&(void 0===s||isNaN(s))?(m.debug(n+": concat cur episode"),e._concatCurFeature(n)):(m.debug(n+": concat preload episode"),e._concatPreloadFeature(n))}),p.on("finishAddMids",function(i){var a=i.data,n=a.videoId,r=a.length,o=t._getCurrentGas(),s=d.getEpisodeId(o.videoEventId);(n===s||0===r&&(void 0===s||isNaN(s)))&&e._aresQvsVariant(n,null,!0,0,"midroll")})},_aresQvsVariant:function(e,t,i,a,n){var r=this,s=u.ManifestTypes.F4V,d={};r.engine._getVDInfo();switch(s==u.ManifestTypes.F4V&&t&&(d=_.getFLVADContent([t])),n){case"preroll":d.rollType=u.RollTypes.PRE_ROLL;break;case"midroll":d.rollType=u.RollTypes.MID_ROLL}d.offset=a,d.done=i,m.debug("ares qvs ADVariant"+o.stringify(d)+",videoId="+e+",tvid="+r.engine._movieinfo.tvid),e==r.engine._movieinfo.tvid?r.engine.qvs.loadADVariant(s,d,i):r.engine.qvs.preloadADVariant(s,d,i)},_aresEvents:function(){var e=this,t=e.engine;t.on(f.NTF_ARES_Gas,function(i){var a=i.data,n=a.videoEventId,r=d.getEpisodeId(n),l=new g(!0,!1,a.file,a,r,s(a.id),[],"AD","AD","AD","AD",-1,0,-1,0,1e3*a.duration);0===a.offset?p.finishPres(r)?m.warn(r+": ignore ares gas, "+o.stringify(a)):(p.addPres(r,[l]),e._aresQvsVariant(r,l,!1,0,"preroll"),m.debug(r+": concat pre-ares!")):a.offset>0&&(t.getCurrenttime()<a.offset?(p.addMids(r,[l]),e._aresQvsVariant(r,l,!1,a.offset,"midroll")):m.warn(r+":drop ares gas, "+o.stringify(a)))}),t.on(f.NTF_ARES_GasFinish,function(e){var t,i=e.data,a=i.videoId;switch(i.rollType){case"preroll":t=p.finishPres(a),"boolean"!=typeof t||t||p.finishPres(a,!0);break;case"midroll":t=p.finishMids(a),"boolean"!=typeof t||t||p.finishMids(a,!0)}}),t.on(f.NTF_ARES_End,function(e){var t=e.data,i=t.rollType,a=t.videoId;switch(i){case"preroll":p.finishPres(a,!0);break;case"midroll":p.finishMids(a,!0)}})},_adSDKEvents:function(){var e=this,t=e.engine;t.on(f.NTF_ARES_Load,function(e){var i=t._aressdk;i&&(i.on("roll-play",function(e){var i=e.rollType,a=e.videoEventId,n=d.getEpisodeId(a),r=p.valid(n);m.debug("ares"+(r?"":" invalid")+" roll-play:"+o.stringify(e)),r&&t.fire({type:f.NTF_ARES_Play,data:{rollType:i,videoId:n}})}),i.on("roll-ended",function(e){var i=e.rollType,a=e.videoEventId,n=d.getEpisodeId(a),r=!t._movieinfo||t._movieinfo.tvid==n,s=p.valid(n)&&r;m.debug("ares"+(s?"":" invalid")+" roll-ended:"+o.stringify(e)+", videoId: "+n+", tvid: "+(t._movieinfo?t._movieinfo.tvid:"movieinfo_undefined")),s&&t.fire({type:f.NTF_ARES_End,agent:"ares",data:{rollType:i,videoId:n}})}),i.on("roll-load-finish",function(e){var i=e.rollType,a=e.videoEventId,n=d.getEpisodeId(a),r=p.valid(n)&&t._movieinfo&&t._movieinfo.ok;m.log("roll-load-finish"+(r?"":" invalid")+":"+o.stringify(e)),r&&(t._fireGasFinishTimer=setTimeout(function(){t.fire({type:f.NTF_ARES_GasFinish,data:{rollType:i,videoId:n}})},0))}),i.on("error",function(e){t.brokedown(7001,"P07001"),m.log("ad error"+o.stringify(e))}),i.on("adplayer_ad_info",function(e){e=e||{};var i=e.data.videoEventId,a=d.getEpisodeId(i),n=p.valid(a);m.debug("ares notice-info"+(n?"":" invalid")+":"+o.stringify(e)),n&&(l.isObject(e.definitionSwitchingAd)&&p.setDefinitionAd(a,e),t.fire({type:f.NTF_ARES_Info,data:e}))}),i.off("adplayer_ad_start"),i.on("adplayer_ad_start",function(e){m.log("ares notice-info adplayer_ad_start"),t.fire({type:f.NTF_AD_Start,data:e})}),i.off("adplayer_ad_end"),i.on("adplayer_ad_end",function(e){m.log("ares notice-info adplayer_ad_end"),t.fire({type:f.NTF_AD_End,data:e})}))})}}});a.exports=v}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(2),r=i(0),o=i(1),s=i(7),d=(i(4),i(19)),l=i(28),u=i(20),c=i(52),f=i(29),p=i(70),h=i(71),_=i(17),g={},m=!1,v=new o("coreEmitters");a.exports=r("coreEmitters",{construct:function(e){var t=this;t._initTypes.bind(e)(),t._initEvts.bind(e)(),s.beforeunloadListener(),window.addEventListener("beforeunload",function(){p.sendEndPlayPingback(3)})},extend:n,methods:{_initTypes:function(){function e(e){switch(e){case l.Status_StartPlay:h.add([l.Status_StartPlay],!0);break;case l.Status_Playing:h.add([l.Status_Play,l.Status_Playing]),h.remove([l.Status_Idle,l.Status_PlayError,l.Status_Stoped,l.Status_End_Play,l.Status_Paused,l.Status_Waiting]);break;case l.Status_Paused:h.add(l.Status_Paused),h.remove([l.Status_Idle,l.Status_Play,l.Status_Playing,l.Status_Waiting,l.Status_PlayError,l.Status_Stoped,l.Status_End_Play]);break;case l.Status_Waiting:h.add(l.Status_Waiting),h.remove([l.Status_Idle,l.Status_Play,l.Status_Playing,l.Status_Paused,l.Status_PlayError,l.Status_Stoped,l.Status_End_Play]);break;case l.Status_PlayError:h.add(l.Status_PlayError),h.remove([l.Status_Idle,l.Status_Play,l.Status_Playing]);break;case l.Status_Stoped:h.add(l.Status_Stoped),h.remove([l.Status_Idle,l.Status_Play,l.Status_Playing,l.Status_Waiting]);break;case l.Status_End_Play:h.add(l.Status_End_Play),h.remove([l.Status_Idle,l.Status_Play,l.Status_Playing,l.Status_Waiting])}}var t=this;t.waitingTimer=0;var i=t._engine;i.on(u.Status_Assembled,function(){i.__isAssembled=!0,i.on(d.NTF_StatusChanged,function(a){var n=t.isAd(),r=function(i,a,n){var r=t._getdata();r.state=i,a&&(r.actionType=a.actionType||d.Action_Type_Native,a.gas&&(r.gas=a.gas),a.spend&&(r.spend=a.spend)),!t.canFireVideoEvts||t.currStatus===i&&!0!==n||(e(i),t.currStatus=i,t.fire({type:l.NTF_StatusChanged,data:r}),v.debug("core status changed: "+i))};switch(a.data.status){case d.Status_Canplay:n&&r(l.Status_Ready,a.data);break;case d.Status_Loadstart:n||"ad"===a.data.eventOrigin?"ad"!==a.data.eventOrigin||"DATA"!==t.getEngineType()&&"QVS"!==t.getEngineType()?r(l.Status_AdLoadstart,a.data):r(l.Status_AdLoadstart,a.data,!0):("HTTP"===t.getEngineType()&&r(l.Status_Loadstart,a.data),s.tvid(t._movieinfo.tvid)),s.stopHeartBeat();break;case d.Status_Loaddone:"DATA"!==t.getEngineType()&&"QVS"!==t.getEngineType()||t.checkPreload();break;case d.Status_LoadedMetaData:n||r(l.Status_LoadedMetaData,a.data);break;case d.Status_Playing:g.__sendFirstFrameShow||(g.__sendFirstFrameShow=!0,_.usedTime_pageShowVideo=new Date-_.pgct,_.usedTime_showVideo=_.usedTime_pageShowVideo-_.usedTime_selfLoaded),g.__sendADStartPPB||(g.__sendADStartPPB=!0,f.sendADStartPlayPingback(),p.sendADStartPlayPingback()),n?(t._ADfirstPlay&&(t._ADfirstPlay=!1,t._canGetVideoInfo(!0),r(l.Status_AdStartPlay,a.data),_.usedTime_adInit=new Date-_.pgct-_.sTime_adInit,v.log("ad start play,params: info = cur ad!")),t._isSkipAD=!1,t._engine._isSkipAD=!1,r(l.Status_AdPlaying,a.data)):(t._firstPlay&&(f.sendTimingPingback(),p.sendTimingPingback(),t._firstPlay=!1,t._canGetVideoInfo(!0),r(l.Status_StartPlay,a.data)),t.currStatus!==l.Status_Waiting&&t.currStatus!==l.Status_Play||f.sendPlayingPingback(),g.__sendMovieFirstFrameShow||(g.__sendMovieFirstFrameShow=!0,f.sendStartPlayPingback(),p.sendStartPlayPingback()),r(l.Status_Playing,a.data),s.openHeartBeat()),s.updateVipTypes(),m||(m=!0,t.fire({type:l.NTF_FollowUpNextLoad,data:""})),clearTimeout(t.waitingTimer),t.waitingTimer=0;break;case d.Status_Stalled:n&&r(l.Status_AdStalled,a.data);break;case d.Status_Waiting:n?r(l.Status_AdWaiting,a.data):(t._timeMark=0,r(l.Status_Waiting,a.data),s.stopHeartBeat()),i.isSeeking()||(clearTimeout(t.waitingTimer),t.waitingTimer=0,t.waitingTimer=setTimeout(function(){f.sendWaitingPingback(n),p.sendWaitingPingback(n),clearTimeout(t.waitingTimer),t.waitingTimer=0},1500));break;case d.Status_Paused:n?r(l.Status_AdPaused,a.data):(t._timeMark=0,r(l.Status_Paused,a.data),s.stopHeartBeat());break;case d.Status_Stoped:if(clearTimeout(t.waitingTimer),t.waitingTimer=0,n)r(l.Status_AdPlayEnded,a.data);else if(t._timeMark=0,r(l.Status_Stoped,a.data),1===parseInt(t.h5vars.isLoop))if(t.hasNextVideo())t.switchNextVideo(0);else{var o=t._videolist;o.length>1?t.switchVideo({autoSwitch:!0,tvid:o[0].tvid,vid:o[0].vid,imageLoader:o[0].imageLoader}):t.refresh({tvid:t.h5vars.tvid,vid:t.h5vars.vid})}else t.h5vars.cyclePlay+""=="true"?t.refresh({tvid:t.h5vars.tvid,vid:t.h5vars.vid}):t.hasNextVideo()?t.switchNextVideo(0):(f.sendEndPlayPingback(1),p.sendEndPlayPingback(1),r(l.Status_End_Play,a.data));s.stopHeartBeat();break;case d.Status_LoadFailed:n?r(l.Status_AdError,a.data):(t._timeMark=0,r(l.Status_PlayError,a.data)),m||(m=!0,t.fire({type:l.NTF_FollowUpNextLoad,data:""})),s.stopHeartBeat();break;case d.Status_Play:r(l.Status_Play,a.data);break;case d.Status_Playing_Fail:t.fire({type:l.NTF_PlayingFailByAutoPlay,data:{}})}}),[[d.NTF_CanPlayThrough,l.NTF_CanPlayThrough,l.NTF_AD_CanPlayThrough],[d.NTF_VolumeChanged,l.NTF_VolumeChanged,l.NTF_AD_VolumeChanged],[d.NTF_DurationChanged,l.NTF_DurationChanged,l.NTF_AD_DurationChanged],[d.NTF_TimeUpdate,l.NTF_TimeUpdate,l.NTF_AD_TimeUpdate],[d.NTF_Progress,l.NTF_Progress,l.NTF_AD_Progress],[d.NTF_Seeking,l.NTF_Seeking,l.NTF_AD_Seeking],[d.NTF_RateChanged,l.NTF_RateChanged,l.NTF_AD_RateChanged]].forEach(function(e){e[0]==d.NTF_TimeUpdate?i.on(e[0],function(i){var a=(new Date).getTime();0===t._timeMark&&(t._timeMark=a),t.isAd()||t.currStatus==d.Status_Stalled||t.currStatus==d.Status_Waiting||t.currStatus==d.Status_Paused||t.currStatus==d.Status_Stoped||t.currStatus==d.Status_LoadFailed||(t._playingDuration+=a-t._timeMark,t._playingSpend+=a-t._timeMark),t._timeMark=a,t.fire({type:t.isAd()?e[2]:e[1],data:i.data})}):i.on(e[0],function(i){t.fire({type:t.isAd()?e[2]:e[1],data:i.data})})})}),i.on(u.NTF_NeedUserGesture4Playback,function(){t.fire({type:l.NTF_NeedUserGesture4Playback})}),i.on(u.NTF_ARES_Load,function(){t._aresloaded=!0,t.fire({type:l.Status_AdLoaded})}),i.on(u.NTF_ARES_Init,function(){t.fire({type:l.Status_AdInit})}),i.on(u.NTF_ARES_Play,function(e){t.fire({type:l.Status_AresPlay,data:e.data})}),i.on(u.NTF_ARES_End,function(e){v.log("ares end, agent: "+(e.agent?e.agent:"engine")),t.fire({type:l.Status_AresEnded,data:e.data||""})}),i.on(u.NTF_ARES_Info,function(e){var i=e.data||{};t._aresinfoed=i,t.fire({type:l.Status_AresNoticeInfo,data:e.data||""})}),i.on(u.NTF_AD_Start,function(e){e.data&&"13"==e.data.ctp&&(t.adWholeCorner=!0),t.fire({type:l.NTF_AD_Start,data:e.data||""})}),i.on(u.NTF_AD_End,function(e){t.fire({type:l.NTF_AD_End,data:e.data||""})}),i.on(u.NTF_ARES_CloudPlay,function(e){t.fire({type:l.NTF_AD_CloudPlay,data:e.data||""})}),i.on(u.NTF_ARES_CloudPlayEnd,function(e){t.fire({type:l.NTF_AD_CloudPlayEnd,data:e.data||""})}),i.on(u.NTF_VRSStart,function(e){t.fire({type:l.NTF_VRSStart,data:t._getdata()})}),i.on(u.NTF_VRSPreReady,function(e){function a(){t.fire({type:l.NTF_VRSPreReady}),t.eventlog.vrspreready=!0}i.__isAssembled?a():i.on(u.Status_Assembled,function e(){i.un(u.Status_Assembled,e),a()})}),i.on(u.NTF_VRSReady,function(e){function a(){t.fire({type:l.NTF_VRSReady,data:{data:t._getdata(),movieinfo:e.data}}),t.eventlog.vrsready=!0}function n(){var i=t.getStartPlayTime();e.data.originalData&&e.data.originalData.data.p.bt&&(i<10&&t.isSkipPrelude(),t._skipHT=e.data.originalData.data.p.bt,t._skipTT=e.data.originalData.data.p.et)}i.__isAssembled?(a(),n()):i.on(u.Status_Assembled,function(){a(),n()})}),i.on(u.NTF_VRSPreloaded,function(e){t.fire({type:l.NTF_VRSPreloaded,data:{movieinfo:e.data}})}),i.on(u.NTF_MovieInfoChange,function(){var e;t._preMovieInfo&&(e={tvid:parseInt(t._preMovieInfo.tvid,10),spend:parseInt(t._preplaying_spend,10),albumId:t._preMovieInfo.albumId||"",cid:t._preMovieInfo.cid||""},t._vdsSwitch=!1,t.fire({type:l.NTF_VideoChange,data:{preMovieInfo:e}})),g={}}),i.on(u.NTF_VDChanged,function(){t._vdsSwitch=!1;var e=i.getCurrentVD();v.log("definition changed: "+e),t.fire({type:l.NTF_DefinitionSwitched,data:{curVD:e,success:!0,isManualAction:!t.isAutoChangeVd()}}),t.switchAutoChangeVd(!1)}),i.on(u.NTF_VDChangeFail,function(e){t._vdsSwitch=!1,v.log("definition changeFail: "+e.data),t.fire({type:l.NTF_DefinitionSwitched,data:{curVD:e.data,success:!1,isManualAction:!t.isAutoChangeVd()}}),t.switchAutoChangeVd(!1)}),i.on(u.NTF_AUDChanged,function(){t.fire({type:l.NTF_AudioSwitched,data:{success:!0}})}),i.on(u.NTF_AUDChangeFail,function(e){t.fire({type:l.NTF_AudioSwitched,data:{success:!1}})}),i.on(u.NTF_TVIDChanged,function(){t.getVideoInfo(function(e){var i=t._getdata();i.vi=e.vi||{},i.vi.vid=i.vid,v.info("core videoChanged"),t.fire({type:l.NTF_VideoChanged,data:i})})}),i.on(u.NTF_Recharge,function(e){v.warn("notice recharge: "+o.stringify(e)),t.fire({type:l.NTF_Recharge,data:e}),m||(m=!0,t.fire({type:l.NTF_FollowUpNextLoad,data:""}))});var a=-1;i.on(u.NTF_LoadTempVd,function(e){var n=parseInt(e.data.userVd);i.once(d.NTF_TimeUpdate,function(){for(var e=!1,r=[],o=o||i.getVidl(),s=0;s<o.length;s++)r.push(o[s].vd),o[s].vd===n&&(e=!0);e||(n=-1!=r.indexOf(2)?2:-1!=r.indexOf(1)?1:-1!=r.indexOf(96)?96:o[o.length-1].vd),clearTimeout(a),a=setTimeout(function(){t.switchDefinition(n,!1)},5e3)})}),i.on(u.Status_Error,function(e){var i=t._getdata();i.code=e.data.code,i.realcode=e.data.realcode,i.ec=e.data.ec,i.vmsst=e.data.vmsst,i.code&&7001!==i.code&&f.sendErrorPlayPingback(i.code,i.ec,i.vmsst),t.fire({type:l.NTF_Error,data:i}),m||(m=!0,t.fire({type:l.NTF_FollowUpNextLoad,data:""})),t.errorcode=i})},_initEvts:function(){var e=this,t=e._engine;t.on(c.Evt_StartFromHistory,function(t){e.fire({type:l.Evt_StartFromHistory,data:t.data})}),t.on(c.Evt_SkipHeader,function(t){e.fire({type:l.Evt_SkipHeader,data:t.data})}),t.on(c.Evt_SkipTail,function(t){e.fire({type:l.Evt_SkipTailer,data:t.data})}),t.on(c.Evt_StartShareTime,function(t){e.fire({type:l.Evt_StartShareTime,data:t.data})}),t.on(c.Enjoy_Evt_PlayEnd,function(t){e.fire({type:l.Enjoy_Evt_PlayEnd,data:t.data})}),t.on(c.Enjoy_Evt_PanleShow,function(t){e.fire({type:l.Enjoy_Evt_PanleShow,data:t.data})})}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){function n(){return l.os.ios||l.os.android?d.getJsuid():d.getFluid()}var r=i(0),o=i(11),s=i(7),d=i(9),l=i(3),u=i(1),c=i(17),f=new u("recorder"),p=i(28);i(29);a.exports=r("Recorder",{construct:function(e){var t=this,i=!1;t._core=e,t._isSwitchingDefinition=!1;var a=function(){i||(i=!0,t._record())};e.on(p.NTF_StatusChanged,function(i){var a=i.data.state;if(a===p.Status_Playing&&t._startTimer(),a===p.Status_Paused||a===p.Status_Waiting||a===p.Status_Stoped){if(e.getCurrenttime()<=1&&a===p.Status_Waiting)return;if(Math.abs(e.getDuration()-e.getCurrenttime())<=1&&a!==p.Status_Stoped)return;t._stopTimer(),t._record(a===p.Status_Stoped)}}),e.on(p.NTF_Seeking,function(){e.isAd()||t._record()}),e.on(p.NTF_DefinitionSwitching,function(e){t._isSwitchingDefinition=!0}),e.on(p.NTF_DefinitionSwitched,function(e){t._isSwitchingDefinition=!1}).on(p.NTF_VideoChanged,function(e){t._isSwitchingDefinition=!1}),e.once(p.NTF_VRSStart,function(e){t._getCurrent(e.data.tvid)}),window.addEventListener("unload",a),window.addEventListener("beforeunload",a),window.addEventListener("pagehide",a)},methods:{_stopTimer:function(){var e=this;e._timer&&(clearInterval(e._timer),e._timer=null)},_startTimer:function(){var e=this;e._timer||(e._timer=setInterval(e._record.bind(e),12e4))},_getCurrent:function(e){function t(){var t=s.isLogin()?"//l-rcd.iqiyi.com/apis/qiyirc/getvplay":"//nl-rcd.iqiyi.com/apis/urc/getvplay",a={};a.tvId=e,a.agent_type=1,s.isLogin()||(a.ckuid=n()),c.sTime_history=new Date-c.pgct,o.jsonp({url:t,params:a,success:function(e){c.usedTime_history=new Date-c.sTime_history-c.pgct;var t=function(e){i._core.getMovieInfo().tvid==e.tvId&&(f.log("Movie History,params: isLogin = "+s.isLogin()+", time ="+e.videoPlayTime),i._setStartPlayTime(e.videoPlayTime))};e.data&&e.data.videoPlayTime>10&&(i._core.eventlog.vrspreready?t(e.data):i._core.once(p.NTF_VRSPreReady,function(){t(e.data)})),i._startTimer()}})}var i=this;i._isSwitchingDefinition||(e?t():i._core.getVideoInfo(function(e){t(e.tvid)}))},_setStartPlayTime:function(e){var t=this;f.log("play time point from record："+e),t._core.setStartPlayTime(e)},_record:function(e){var t=this;t._core.getVideoInfo(function(i){var a=s.isLogin()?"//l-rcd.iqiyi.com/apis/qiyirc/setrc.php":"//nl-rcd.iqiyi.com/apis/urc/setrc",r=l.browser.ipad||l.browser.ipod?21:11,d={tvId:i.tvid,terminalId:r,agent_type:1};s.isLogin()||(d.ckuid=n()),d.videoPlayTime=e?0:parseInt(t._core.getCurrenttime(),10)||0,(d.videoPlayTime>0&&Math.abs(t._core.getDuration()-d.videoPlayTime)>1&&!t._core.isAd()||e)&&(f.log("record history："+d.videoPlayTime+", duration: "+t._core.getDuration()+", tvid: "+d.tvId),o.jsonp({url:a,params:d}))})}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0);a.exports=n("movieinfo",{construct:function(){},methods:{tvid:"",vid:"",albumId:"",duration:0,adPlayerID:"",url:"",adUrl:"",adtype:"",vd:"",clientIp:"",cid:"",ugc:"",vidl:[],poster:"",oldTvid:"",subtitlesUrl:"",nextTvid:"",nextVid:"",vipTypes:"",isAccurateTimeStamp:""}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(64),r=(i(4),i(28)),o={},s=function(e){e.on(r.NTF_StatusChanged,function(t){switch(t.data.state){case r.Status_Playing:e.getVideoInfo(function(t){var i,a=1e3*e.getDuration();o.ns_st_en=t.vi.pd?t.vi.pd:"1",o.ns_st_pr=t.vi.an||t.vi.subt,o.ns_st_ep=o.ns_st_pr,o.ns_st_ge=t.vi.tg.split(" ").join(","),o.ns_st_ci=e.h5vars.tvid||0,o.c4=t.cid+"",o.ns_st_cl=a,o.ns_st_ia="0",o.ns_st_sn="*null",o.ns_st_ddt="*null",o.ns_st_tdt="*null",o.ns_st_st="iqiyi",o.ns_st_ce="1",o.ns_st_pu="*null",o.c3="*null",o.c6="*null",i=a>3e5&&ns_?ns_.ReducedRequirementsStreamingAnalytics.ContentType.LongFormOnDemand:ns_.ReducedRequirementsStreamingAnalytics.ContentType.ShortFormOnDemand,n.playVideoContent(o,i)});break;case r.Status_Paused:case r.Status_AdError:case r.Status_PlayError:case r.Status_AdPlayEnded:case r.Status_End_Play:n.stop()}}),e.on(r.Status_AresPlay,function(e){var t;switch(e.data.rollType){case"preroll":t=ns_.ReducedRequirementsStreamingAnalytics.AdType.LinearOnDemandPreRoll;break;case"midroll":t=ns_.ReducedRequirementsStreamingAnalytics.AdType.LinearOnDemandMidRoll;break;case"postroll":t=ns_.ReducedRequirementsStreamingAnalytics.AdType.LinearOnDemandPostRoll;break;default:t=ns_.ReducedRequirementsStreamingAnalytics.AdType.LinearOnDemandPreRoll}n.playVideoAdvertisement(null,t)})},d=function(){return o};a.exports={init:s,getMetaData:d}}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(3),o=i(13),s=i(101),d=i(104),l=i(108),u=i(109),c=i(111),f=i(74),p=i(113),h=i(114),_=i(115),g=i(39),m=i(16).CORE_TYPES;a.exports=n("h5View",{construct:function(){var e=this,t=[s,l,d];g.init(e.core),(r.os.ios||r.os.android)&&(t=[c,s,u,l]),e._loadCSS(),e.registerPlugins(t),e._loadSkins(),r.os.ios||r.os.android||e._loadPlayListSkin()},extend:f,methods:{_loadCSS:function(){var e,t=document.createElement("style");e=r.os.ios||r.os.android?r.browser.iPad||r.os.androidTablet?_:h:p,t.innerHTML=e,o("head").append(t)},_loadSkins:function(){var e=this;r.os.ios||r.os.android?i.e(1).then(i.bind(null,121)).then(function(t){e.loadSkin(t)}):i.e(0).then(i.bind(null,122)).then(function(t){e.loadSkin(t)})},_loadPlayListSkin:function(){var e=this,t=!1,a=!1,n=[];e.core.on(m.NTF_REMOVEVideoList,function(e){n=[]}),e.core.on(m.NTF_ADDVideoList,function(r){a||n.push(r),t||(t=!0,i.e(2).then(i.bind(null,123)).then(function(t){e.loadSkin(t,r.data,"playlist"),a=!0;for(var i=0;i<n.length;i++)e.core.fire({type:m.NTF_ADDVideoList,data:n[i].data})}),t=!0)})},sendUserActionPingback:function(e){return g.getInterface().sendUserActionPingback(e)}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r=i(31),o=i(3),s=i(0),d=i(13),l=i(6),u=i(40),c=i(24),f=i(21),p=i(1),h=(new p("PluginLoading"),i(102)),_=i(103),g=i(46),m=i(16).CORE_TYPES,v=i(23);a.exports=s("PluginLoading",{construct:function(){var e=this;e.name="loading";var t;t=o.os.ios||o.os.android?_:h;var a=d(e.wrapper).append(t);e.$container=a.find('[data-player-hook="videoLoading"]'),e.loading=a.find('[data-player-hook="videolayerLoading"]'),e._$loadingtext=e.$container.find('[data-player-hook="videoLoadingText"]'),e._$loadingDownloadSpeed=e.$container.find('[data-player-hook="loadingDownloadSpeed"]'),e._speedTimer=-1,n=i(l.isTraditionalChinese()?37:38),e.showBeginLoadingType="",e.isFadeOut=!1},extend:r,methods:{init:function(){var e=this,t=e.core,i=t.getEngineType(),a=!1;o.os.ios||o.os.android||t.autoplay?e.showBeginLoading():e.hideBeginLoading(),e._$loadingtext.html(n.loading_text);var r=function(){e.wrapper.width()>920?e.loading.addClass("iqp-player_w920"):e.loading.removeClass("iqp-player_w920")};u.on("resize",r),c.on("change",r),f.on("change",r),t.on(m.NTF_StatusChanged,function(i){switch(i.data.state){case m.Status_StartPlay:case m.Status_Playing:case m.Status_AdPlaying:case m.Status_AdStartPlay:case m.Status_End_Play:"image"==e.showBeginLoadingType?(e.isFadeOut=!0,e.fadeOut(e.$container[0],function(){e.hideLoading(),e.hideBeginLoading(),e.$container.css("opacity",1),e.isFadeOut=!1}),e.showBeginLoadingType=""):e.isFadeOut||(e.hideLoading(),e.hideBeginLoading());break;case m.Status_AdWaiting:case m.Status_Waiting:(o.os.ios||o.os.android)&&t.getCurrenttime()<1&&e.showLoading();break;case m.Status_Loadstart:o.os.ios||o.os.android||e.showLoading();break;case m.Status_Play:(o.os.ios||o.os.android)&&t.getCurrenttime()<1&&e.showLoading();break;case m.Status_PlayError:}}),t.on(m.NTF_VideoChange,function(t){e.showBeginLoading()}),t.on(m.NTF_DefinitionSwitched,function(t){e.hideBeginLoading()}),t.on(m.NTF_NeedUserGesture4Playback,function(t){e.hideBeginLoading()}),e.skin.once("bigplay:play",function(){a=!0,(o.os.ios||o.os.android)&&e.showBeginLoading()}),e.on(v.NTF_PLG_Enable,function(){("DATA"===i||"HTTP"===i&&a)&&t.isPaused()&&e.showLoading()})},showBeginLoading:function(){var e=this,t=l.isTraditionalChinese(),i=t?"_tw":"",a=g.getVars(),n=e.core.getMovieInfo(),r=n.tvid,o=n.vid,s=e.core.getInfoFromVideoList(r,o),d=n.tvid?n.imageLoader:a.imageLoader,u=!1,c=!1,f=!1;e.showBeginLoadingType="",s?s.isMember?u=!0:s.isQiyiProduced?c=!0:s.isExclusive&&(f=!0):"true"==a.isMember?u=!0:1==a.qiyiProduced?c=!0:1==a.exclusive&&(f=!0),e.beginloading=u?e.$container.find('[data-player-hook="videoLoadingVip'+i+'"]'):c?e.$container.find('[data-player-hook="videoLoadingQiyiProduced'+i+'"]'):f?e.$container.find('[data-player-hook="videoLoadingExclusive'+i+'"]'):e.$container.find('[data-player-hook="videoLoadingNormal'+i+'"]'),d&&(e.beginloading=e.$container.find('[data-player-hook="videoLoadingNormal_image"]'),e.beginloading.find(".loadingImage").attr("src",d),e.showBeginLoadingType="image"),clearInterval(e._speedTimer),"QVS"===e.core.getEngineType()&&(e.updateDownloadSpeed(),e._speedTimer=setInterval(e.updateDownloadSpeed.bind(e),1e3)),e._begineShow=!0,e.$container.show(),e.beginloading.show()},hideBeginLoading:function(){var e,t=this;if(t._begineShow=!1,t.$container.hide(),clearInterval(t._speedTimer),t._$loadingDownloadSpeed.html(""),t.beginloading&&(t.beginloading.hide(),e=o.os.ios||o.os.android?t.$container.find(".iqp-logo-loading"):t.$container.find(".videoLogo_loading")))for(var i=0;i<e.length;i++)d(e[i]).hide()},showLoading:function(){var e=this;if(!0!==e._begineShow){e.beginloading&&e.beginloading.hide();e.wrapper.width()>920?e.loading.addClass("iqp-player_w920"):e.loading.removeClass("iqp-player_w920"),clearInterval(e._speedTimer),"QVS"===e.core.getEngineType()&&(e.updateDownloadSpeed(),e._speedTimer=setInterval(e.updateDownloadSpeed.bind(e),1e3)),e.$container.show(),e.loading.show()}},hideLoading:function(){var e=this;clearInterval(e._speedTimer),e._$loadingDownloadSpeed.html(""),e.$container.hide(),e.loading.hide()},fadeOut:function(e,t){var i=this,a=1e3;e.style.display="",e.style.opacity=a/1e3;var n=function(){a-=80,e.style.opacity>=0?(e.style.opacity=a/1e3,window.requestAnimationFrame?requestAnimationFrame(n):setTimeout(n,16)):t.call(i)};n()},updateDownloadSpeed:function(){var e=this,t=e.core.getDownloadSpeed();t&&t.downloadSpeed&&(t=t.downloadSpeed,t=t===1/0?0:t>1e6?(t/1e6).toFixed(2)+"Mb/s":t>1e3?(t/1e3).toFixed(2)+"Kb/s":t>0?t.toFixed(2)+"b/s":0,e._$loadingDownloadSpeed.html(n.loading_download_speed+t))}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(){return'<div data-player-hook="videoLoading" style="pointer-events: none;position: absolute;top:0;left:0;height:100%;width:100%;z-index:99;"><svg class="iqp-svg-sprite" display="none" version="1.1" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><symbol id="iqp-svg-loading" viewBox="0 0 1024 1024"><path d="M950.857143 443.733333c-21.942857 0-41.447619-14.628571-46.32381-36.571428-48.761905-177.980952-209.67619-299.885714-392.533333-299.885715S168.228571 229.180952 119.466667 407.161905c-7.314286 26.819048-34.133333 41.447619-58.514286 34.133333-26.819048-7.314286-41.447619-34.133333-34.133333-58.514286C85.333333 163.352381 285.257143 9.752381 512 9.752381s426.666667 153.6 485.180952 373.028571c7.314286 26.819048-7.314286 53.638095-34.133333 58.514286-4.87619 2.438095-7.314286 2.438095-12.190476 2.438095zM512 1014.247619c-226.742857 0-426.666667-153.6-485.180952-373.028571-7.314286-26.819048 7.314286-53.638095 34.133333-58.514286 26.819048-7.314286 53.638095 9.752381 58.514286 34.133333 46.32381 177.980952 207.238095 302.32381 392.533333 302.32381s343.771429-124.342857 392.533333-302.32381c7.314286-26.819048 34.133333-41.447619 58.514286-34.133333 26.819048 7.314286 41.447619 34.133333 34.133333 58.514286-58.514286 219.428571-258.438095 373.028571-485.180952 373.028571z"></path></symbol></svg><svg display="none" version="1.1" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iqp-svg-sprite"><symbol id="iqp-svg-loading" viewBox="0 0 1024 1024"><path d="M950.857143 443.733333c-21.942857 0-41.447619-14.628571-46.32381-36.571428-48.761905-177.980952-209.67619-299.885714-392.533333-299.885715S168.228571 229.180952 119.466667 407.161905c-7.314286 26.819048-34.133333 41.447619-58.514286 34.133333-26.819048-7.314286-41.447619-34.133333-34.133333-58.514286C85.333333 163.352381 285.257143 9.752381 512 9.752381s426.666667 153.6 485.180952 373.028571c7.314286 26.819048-7.314286 53.638095-34.133333 58.514286-4.87619 2.438095-7.314286 2.438095-12.190476 2.438095zM512 1014.247619c-226.742857 0-426.666667-153.6-485.180952-373.028571-7.314286-26.819048 7.314286-53.638095 34.133333-58.514286 26.819048-7.314286 53.638095 9.752381 58.514286 34.133333 46.32381 177.980952 207.238095 302.32381 392.533333 302.32381s343.771429-124.342857 392.533333-302.32381c7.314286-26.819048 34.133333-41.447619 58.514286-34.133333 26.819048 7.314286 41.447619 34.133333 34.133333 58.514286-58.514286 219.428571-258.438095 373.028571-485.180952 373.028571z"></path></symbol></svg><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingVip"><div class="iqp-layer-con"><div class="iqp-logoload-box iqp-logoload-box-vip"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div><div class="iqp-down-speed"><p class="iqp-logoload-speed"  data-player-hook="loadingDownloadSpeed"></p></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingVip_tw"><div class="iqp-layer-con iqp-logo-loading-ft"><div class="iqp-logoload-box iqp-logoload-box-vip"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div><div class="iqp-down-speed"><p class="iqp-logoload-speed"  data-player-hook="loadingDownloadSpeed"></p></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingQiyiProduced"><div class="iqp-layer-con"><div class="iqp-logoload-box iqp-logoload-box-cp"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div><div class="iqp-down-speed"><p class="iqp-logoload-speed"  data-player-hook="loadingDownloadSpeed"></p></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingQiyiProduced_tw"><div class="iqp-layer-con iqp-logo-loading-ft"><div class="iqp-logoload-box iqp-logoload-box-cp"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div><div class="iqp-down-speed"><p class="iqp-logoload-speed"  data-player-hook="loadingDownloadSpeed"></p></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingExclusive"><div class="iqp-layer-con"><div class="iqp-logoload-box iqp-logoload-box-db"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div><div class="iqp-down-speed"><p class="iqp-logoload-speed"  data-player-hook="loadingDownloadSpeed"></p></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingExclusive_tw"><div class="iqp-layer-con iqp-logo-loading-ft"><div class="iqp-logoload-box iqp-logoload-box-db"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div><div class="iqp-down-speed"><p class="iqp-logoload-speed"  data-player-hook="loadingDownloadSpeed"></p></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingNormal_image"><img src="" class=\'loadingImage\' width="100%" height="100%"/><div class="iqp-btn-mid"><div class="iqp-mid-circle"><div class="iqp-mid-loading" ><svg aria-hidden="true" class="iqp-icon iqp-icon-loading"><use xlink:href="#iqp-svg-loading" class="iqp-svg-symbol iqp-svg-loading"></use></svg></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingNormal"><div class="iqp-layer-con"><div class="iqp-logoload-box"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div><div class="iqp-down-speed"><p class="iqp-logoload-speed"  data-player-hook="loadingDownloadSpeed"></p></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingNormal_tw"><div class="iqp-layer-con iqp-logo-loading-ft"><div class="iqp-logoload-box"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div><div class="iqp-down-speed"><p class="iqp-logoload-speed"  data-player-hook="loadingDownloadSpeed"></p></div></div></div></div><div class="iqp-layer iqp-layer-loading" data-player-hook="videolayerLoading" style="display: none; z-index: 80;"><div class="iqp-layer-con"><svg class="iqp-icon iqp-icon-loading" aria-hidden="true"><use xlink:href="#iqp-svg-loading"></use></svg></div></div></div>'}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(){return'<div data-player-hook="videoLoading" style="pointer-events: none;position: absolute;top:0;left:0;height:100%;width:100%;z-index:99;"><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingVip"><div class="iqp-layer-con"><div class="iqp-logoload-box iqp-logoload-box-vip"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingVip_tw"><div class="iqp-layer-con iqp-logo-loading-ft"><div class="iqp-logoload-box iqp-logoload-box-vip"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingQiyiProduced"><div class="iqp-layer-con"><div class="iqp-logoload-box iqp-logoload-box-cp"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingQiyiProduced_tw"><div class="iqp-layer-con iqp-logo-loading-ft"><div class="iqp-logoload-box iqp-logoload-box-cp"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingExclusive"><div class="iqp-layer-con"><div class="iqp-logoload-box iqp-logoload-box-db"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingExclusive_tw"><div class="iqp-layer-con iqp-logo-loading-ft"><div class="iqp-logoload-box iqp-logoload-box-db"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingNormal"><div class="iqp-layer-con"><div class="iqp-logoload-box"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div></div></div></div><div class="iqp-layer iqp-logo-loading" style="display: none;" data-player-hook="videoLoadingNormal_tw"><div class="iqp-layer-con iqp-logo-loading-ft"><div class="iqp-logoload-box"><div class="iqp-logoload-bg"></div><div class="iqp-logoload-line"></div></div></div></div><div class="iqp-layer iqp-layer-loading" data-player-hook="videolayerLoading" style="display: none; z-index: 80;"><div class="iqp-layer-con"><span class="iqp-gif-loading"></span><span data-player-hook="videoLoadingText">正在全力加载，请稍后…</span></div></div></div>'}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r=i(31),o=i(0),s=i(105),d=i(13),l=i(24),u=i(21),c=i(23),f=i(16).CORE_TYPES,p=i(106),h=i(1),_=i(40),g=i(6),m=i(5),v=new h("Subtitles"),y=i(39);a.exports=o("Subtitles",{construct:function(){var e=this;e.name="Subtitles",e.plgContainer.append(s),e.$plugin=e.plgContainer.find('[data-player-hook="subtitles"]'),e._text=e.$plugin.find('[data-player-hook="subtitles_text"]'),e._textCH=e.$plugin.find('[data-player-hook="subtitles_ch"]'),e._textEN=e.$plugin.find('[data-player-hook="subtitles_en"]'),e._curSubData={},e.$settingBox=null,e.$defaultSettingBox=null,e.$subtitlesSwitchBtn=null,e.$subtitlesSettingBtn=null,e.$subtitlesSetting=null,e.$subtitlesBack=null,e.$subtitlesFontsize=null,e.$subtitlesAlpha=null,e.$subtitlesLanguage=null,e.$subtitlesFontsizeSetting=null,e.$subtitlesAlphaSetting=null,e.$subtitlesLanguageSetting=null,e.$subtitlesCurrentFontsize=null,e.$subtitlesCurrentAlpha=null,e.$subtitlesCurrentLanguage=null,e._currentPanelType="default",e._currentFontsize=null,e._currentAlpha=null,e._currentLanguageId=null,e._currentSwitch=!0,e._hasSubtitles=!0,e._isLoadSettingBox=!1,e.idStringMap={1:["中文","中文"],2:["繁文","繁文"],3:["英文","英文"],4:["韩文","韓文"],5:["日文","日文"],6:["法文","法文"],7:["俄文","俄文"],8:["中英文","中英文"],9:["中韩文","中韓文"],10:["中日文","中日文"],11:["中法文","中法文"],12:["中俄文","中俄文"],13:["繁英文","繁英文"],14:["繁韩文","繁韓文"],15:["繁日文","繁日文"],16:["繁法文","繁法文"],17:["繁俄文","繁俄文"]},e._currentPercent=1},extend:r,methods:{init:function(){var e=this;e.$plugin.hide(),e.core.on(f.NTF_VideoChange,function(t){e._changeSize(),e.subtitlesData=null,e.$plugin.hide(),e._textCH&&e._textCH.html(""),e._textEN&&e._textEN.html("")}),e.core.on(f.NTF_VRSReady,function(t){e._setPluginData(),e._isLoadSettingBox&&(e._createLanguageList(),e._checkSubtitlesBtn(),e._updateCurrentSettingLabel())});var t=0;e.core.on(f.NTF_TimeUpdate,function(i){clearTimeout(t),t=setTimeout(function(){e._timeUpdate(i.data)},0)}),e.skin.on(c.NTF_SUBTITLES_REGISTER_DOM,function(t){e.$settingBox=t.data.dom,e._initSettingBoxEvent()}),l.on("change",e._changeSize.bind(e)),u.on("change",e._changeSize.bind(e)),_.on("resize",function(){e._changeSize()}),e.skin.on(c.NTF_VideoPercent_Changed,function(t){t.data&&t.data.percent&&(e._currentPercent=(parseInt(t.data.percent)||100)/100),e._changeSize()}),e._setFontsize(m.get("QP0017")||100),e._setAlpha(m.get("QP0018")||100),e._changeSize()},_setPluginData:function(){var e=this;e.core.getMovieInfo().subtitlesUrl?(e._hasSubtitles=!0,e.subtitlesData=new p,e.subtitlesData.updateSubtitlesUrl(e.core.getMovieInfo().subtitlesUrl)):(e._hasSubtitles=!1,e._currentPanelType="hidden",e._togglePanel()),e._checkSubtitlesBtn()},_timeUpdate:function(e){var t=this;if(t._currentSwitch&&!(t.subtitlesData&&t._curSubData&&1e3*e.current>=t._curSubData.st&&1e3*e.current<=t._curSubData.et)&&t.subtitlesData&&(t.$plugin.hide(),t._curSubData=t.subtitlesData.getDataByCurtime(1e3*e.current),t._curSubData)){var i,a=t._curSubData.sub.split("<br/>"),n=a[0],r=a[1],o=/^[\u4E00-\u9FA5]/.test(n.replace(/\s+/g,"").replace(/-/g,""));r&&(i=/^[\u4E00-\u9FA5]/.test(r.replace(/\s+/g,"").replace(/-/g,""))),r?0==(o^i)?(t._textCH.html(t._curSubData.sub),t._textEN.html("")):(t._textCH.html(n),t._textEN.html(r)):(t._textEN.html(""),t._textCH.html(n)),t.$plugin.show()}},_changeSize:function(){var e=this,t=e.wrapper.width(),i=e.wrapper.height(),a=parseInt(e.core.getRealArea().width),n=parseInt(e.core.getRealArea().height),r=parseInt(e._currentFontsize)/100,o=t/i,s=a/n,d={},l=e._currentPercent;o>s?(d.height=i,d.width=i/n*a):o<s?(d.width=t,d.height=t/a*n):(d.width=t,d.height=i),d.width=d.width*l,d.height=d.height*l,e._text.css("width",parseInt(.8*d.width)+"px"),e._textCH.css("font-size",parseInt(.0592*d.height*r)+"px"),e._textCH.css("line-height",parseInt(d.height*(.0592*r+.017))+"px"),e._textEN.css("font-size",.7*parseInt(.0592*d.height*r)+"px"),e._textEN.css("line-height",.7*parseInt(d.height*(.0592*r+.017))+"px");var u=parseInt(.036*d.height)+(i-d.height)/2;u<50&&(u=50),e.$plugin.css("bottom",u+"px")},_initSettingBoxEvent:function(){n=i(g.isTraditionalChinese()?37:38);var e=this;e.$defaultSettingBox=e.$settingBox.find('[data-player-hook="default_setting"]'),e.$subtitlesSwitchBtn=e.$settingBox.find('[data-player-hook="subtitles_switch"]'),e.$subtitlesSwitchButton=e.$subtitlesSwitchBtn.find(".iqp-set-switch"),e.$subtitlesSettingBtn=e.$settingBox.find('[data-player-hook="subtitles_setting"]'),e.$subtitlesSetting=e.$settingBox.find('[data-player-hook="subtitles_setting_list"]'),e.$subtitlesBack=e.$subtitlesSetting.find('[data-player-hook="subtitles_setting_list_back"]'),e.$subtitlesFontsize=e.$subtitlesSetting.find('[data-player-hook="subtitles_setting_list_fontsize"]'),e.$subtitlesAlpha=e.$subtitlesSetting.find('[data-player-hook="subtitles_setting_list_alpha"]'),e.$subtitlesLanguage=e.$subtitlesSetting.find('[data-player-hook="subtitles_setting_list_language"]'),e.$subtitlesFontsizeSetting=e.$settingBox.find('[data-player-hook="subtitles_fontsize_list"]'),e.$subtitlesAlphaSetting=e.$settingBox.find('[data-player-hook="subtitles_alpha_list"]'),e.$subtitlesLanguageSetting=e.$settingBox.find('[data-player-hook="subtitles_language_list"]'),e.$settingUls=e.$settingBox.find(".iqp-set-con"),e.$subtitlesCurrentFontsize=e.$subtitlesFontsize.find('[data-player-hook="subtitles_current_fontsize"]'),e.$subtitlesCurrentAlpha=e.$subtitlesAlpha.find('[data-player-hook="subtitles_current_alpha"]'),e.$subtitlesCurrentLanguage=e.$subtitlesLanguage.find('[data-player-hook="subtitles_current_language"]'),e._isLoadSettingBox=!0,e.$subtitlesSwitchBtn.find(".iqp-switch-txt").html(n.subtitles_switch),e.$subtitlesSettingBtn.find(".iqp-switch-txt").html(n.subtitles_setting),e.$subtitlesSetting.find(".iqp-arrow-tag").html(n.subtitles_back),e.$subtitlesFontsize.find(".iqp-switch-txt").html(n.subtitles_fontsize),e.$subtitlesAlpha.find(".iqp-switch-txt").html(n.subtitles_alpha),e.$subtitlesLanguage.find(".iqp-switch-txt").html(n.subtitles_language),e.$subtitlesFontsizeSetting.find(".iqp-arrow-tag").html(n.subtitles_fontsize),e.$subtitlesAlphaSetting.find(".iqp-arrow-tag").html(n.subtitles_alpha),e.$subtitlesLanguageSetting.find(".iqp-arrow-tag").html(n.subtitles_language),e._createLanguageList(),e.$subtitlesFontsizeSetting.find(".iqp-set-zimu").on("click",function(t){var i=d(t.target);i&&i.attr("data")&&(e.$subtitlesFontsizeSetting.find(".selected")&&e.$subtitlesFontsizeSetting.find(".selected").removeClass("selected"),i.addClass("selected"),e._setFontsize(i.attr("data").replace("fs",""),!0),e._updateCurrentSettingLabel())}),e.$subtitlesAlphaSetting.find(".iqp-set-zimu").on("click",function(t){var i=d(t.target);i&&i.attr("data")&&(e.$subtitlesAlphaSetting.find(".selected")&&e.$subtitlesAlphaSetting.find(".selected").removeClass("selected"),i.addClass("selected"),e._setAlpha(i.attr("data").replace("a",""),!0),e._updateCurrentSettingLabel())}),e.$subtitlesSwitchButton.on("click",function(){e._currentSwitch=!e._currentSwitch,e._currentSwitch?(e.$subtitlesSwitchBtn.removeClass("iqp-set-close"),e.$subtitlesSwitchBtn.find(".iqp-set-switch").removeClass("iqp-switch-close"),e.$subtitlesSwitchBtn.find(".iqp-set-switch").html(""),e.on(),y.getInterface().clickSubtitlesSwitch(1)):(e.$subtitlesSwitchBtn.addClass("iqp-set-close"),e.$subtitlesSwitchBtn.find(".iqp-set-switch").addClass("iqp-switch-close"),e.$subtitlesSwitchBtn.find(".iqp-set-switch").html(""),e.off(),y.getInterface().clickSubtitlesSwitch(2))}),e.$subtitlesSettingBtn.on("click",function(){y.getInterface().clickSubtitlesSetting(),e._currentPanelType="setting",e._togglePanel()}),e.$subtitlesFontsize.on("click",function(){y.getInterface().clickSubtitlesFontsizeSetting(),e._currentPanelType="fontsize",e._togglePanel()}),e.$subtitlesAlpha.on("click",function(){y.getInterface().clickSubtitlesAlphaSetting(),e._currentPanelType="alpha",e._togglePanel()}),e.$subtitlesLanguage.on("click",function(){y.getInterface().clickSubtitlesLanguageSetting(),e._currentPanelType="language",e._togglePanel()}),e.$subtitlesBack.on("click",function(){e._currentPanelType="default",e._togglePanel()}),e.$subtitlesFontsizeSetting.find(".iqp-zimu-title").on("click",function(t){e._currentPanelType="setting",e._togglePanel()}),e.$subtitlesAlphaSetting.find(".iqp-zimu-title").on("click",function(t){e._currentPanelType="setting",e._togglePanel()}),e.$subtitlesLanguageSetting.find(".iqp-zimu-title").on("click",function(t){e._currentPanelType="setting",e._togglePanel()}),e.skin.on(c.NTF_SHOW_SETTING_BOX,function(){e._currentPanelType="default",e._togglePanel()}),e._currentPanelType="default",e._togglePanel(),e._checkSubtitlesBtn(),e._updateCurrentSettingLabel()},_togglePanel:function(){var e=this;switch(e._currentPanelType){case"default":e.$defaultSettingBox.show(),e.$subtitlesSetting.addClass("dn"),e.$subtitlesFontsizeSetting.addClass("dn"),e.$subtitlesAlphaSetting.addClass("dn"),e.$subtitlesLanguageSetting.addClass("dn"),e.$settingUls.css("width","186px");break;case"setting":e.$defaultSettingBox.hide(),y.getInterface().showSubtitlesPanel1(),e.$subtitlesFontsizeSetting.addClass("dn"),e.$subtitlesAlphaSetting.addClass("dn"),e.$subtitlesLanguageSetting.addClass("dn"),e.$subtitlesSetting.removeClass("dn"),e.$settingUls.css("width","186px");break;case"fontsize":e.$defaultSettingBox.hide(),y.getInterface().showSubtitlesPanel2(),e.$subtitlesSetting.addClass("dn"),e.$subtitlesAlphaSetting.addClass("dn"),e.$subtitlesLanguageSetting.addClass("dn"),e.$subtitlesFontsizeSetting.removeClass("dn"),e.$settingUls.css("width","120px");break;case"alpha":e.$defaultSettingBox.hide(),y.getInterface().showSubtitlesPanel2(),e.$subtitlesSetting.addClass("dn"),e.$subtitlesFontsizeSetting.addClass("dn"),e.$subtitlesLanguageSetting.addClass("dn"),e.$subtitlesAlphaSetting.removeClass("dn"),e.$settingUls.css("width","120px");break;case"language":e.$defaultSettingBox.hide(),y.getInterface().showSubtitlesPanel2(),e.$subtitlesSetting.addClass("dn"),e.$subtitlesFontsizeSetting.addClass("dn"),e.$subtitlesAlphaSetting.addClass("dn"),e.$subtitlesLanguageSetting.removeClass("dn"),e.$settingUls.css("width","120px")}},_createLiTagString:function(e,t,i){return'<li class="iqp-set-item iqp-set-zimu'+(i=i?" selected":"")+'" data="'+t+'">'+e+"</li>"},_createLanguageList:function(){var e=this,t=e.core.getMovieInfo().subtitlesUrlMap,i=e.core.getMovieInfo().subtitlesUrl;e.$subtitlesLanguageSetting.find(".iqp-set-zimu").remove(),v.log("__SUBTITLES__: _createLanguageList, currentSubtitleUrl("+i+"), subtitlesUrlMap("+JSON.stringify(t)+")");for(var a in t){var n=!1;t[a]===i&&(e._currentLanguageId=a,n=!0),v.log("__SUBTITLES__: _createLanguageList "+e._getTextString(a)),e.$subtitlesLanguageSetting.append(e._createLiTagString(e._getTextString(a),"l"+a,n))}v.log("__SUBTITLES__: _createLanguageList END"),e.$subtitlesLanguageSetting.find(".iqp-set-zimu").on("click",function(t){var i=d(t.target);i&&i.attr("data")&&(e.$subtitlesLanguageSetting.find(".selected")&&e.$subtitlesLanguageSetting.find(".selected").removeClass("selected"),i.addClass("selected"),e._setLanguage(parseInt(i.attr("data").replace("l","")),!0))})},on:function(){this.$plugin.show()},off:function(){this.$plugin.hide()},_setFontsize:function(e,t){var i=this;i._currentFontsize=e,i._changeSize(),m.set("QP0017",e,{expires:31536e6,path:"/",domain:"iqiyi.com"}),t&&y.getInterface().clickSubtitlesFontsizeSetting(e)},_setAlpha:function(e,t){var i=this;e=parseInt(e),i._currentAlpha=e,i.$plugin.css("opacity",e/100),m.set("QP0018",e,{expires:31536e6,path:"/",domain:"iqiyi.com"}),t&&y.getInterface().clickSubtitlesAlphaSetting(e)},_setLanguage:function(e,t){var i=this,a=i.core.getMovieInfo().subtitlesUrlMap,n=a[e],r=i.core.getMovieInfo().subtitlesUrl;if(n){if(r===n)return void v.log("__SUBTITLES__: failed! same id!(%s)",e);var o=i._currentLanguageId,s=new p;s.on("successful",function(){i.core.getMovieInfo().subtitlesUrl=n,i._currentLanguageId=e,i._hasSubtitles=!0,i.subtitlesData=null,i.subtitlesData=s,i.skin.fire({type:c.NTF_Subtitles_Changed,data:{id:e,text:i._getTextString(e)}}),i.$subtitlesCurrentLanguage.html(i._getTextString(i._currentLanguageId))}),s.on("failed",function(){i.$subtitlesLanguageSetting.find('[data="l'+e+'"]').removeClass("selected"),i.$subtitlesLanguageSetting.find('[data="l'+o+'"]').addClass("selected"),i.skin.fire({type:c.NTF_Subtitles_ChangeFailed,data:{id:e,text:i._getTextString(e)}}),i.$subtitlesCurrentLanguage.html(i._getTextString(i._currentLanguageId))}),i.skin.fire({type:c.NTF_Subtitles_Changing,data:{id:e,text:i._getTextString(e)}}),s.updateSubtitlesUrl(n),t&&y.getInterface().changeSubtitlesLanguage(),v.log("__SUBTITLES__: update! subtitlesId(%s)",e)}else i._hasSubtitles=!1,v.log("__SUBTITLES__: ERROR! no such subtitlesId(%s)",e);i._checkSubtitlesBtn()},_checkSubtitlesBtn:function(){this._isLoadSettingBox&&(this._hasSubtitles?(this.$subtitlesSwitchBtn.removeClass("dn"),this.$subtitlesSettingBtn.removeClass("dn")):(this.$subtitlesSwitchBtn.addClass("dn"),this.$subtitlesSettingBtn.addClass("dn")))},_getTextString:function(e){var t=this,i=t.idStringMap[e+""];return i?g.isTraditionalChinese()?i[1]:i[0]:""},_updateCurrentSettingLabel:function(){var e=this;e.$subtitlesCurrentFontsize.html(e._currentFontsize+"%"),e.$subtitlesCurrentAlpha.html(e._currentAlpha+"%"),e.$subtitlesCurrentLanguage.html(e._getTextString(e._currentLanguageId)),e.$subtitlesFontsizeSetting.find(".selected")&&e.$subtitlesFontsizeSetting.find(".selected").removeClass("selected"),e.$subtitlesFontsizeSetting.find('[data="fs'+e._currentFontsize+'"]').addClass("selected"),e.$subtitlesAlphaSetting.find(".selected")&&e.$subtitlesAlphaSetting.find(".selected").removeClass("selected"),e.$subtitlesAlphaSetting.find('[data="a'+e._currentAlpha+'"]').addClass("selected")}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(){return'<div class="iqp-subtitle" data-player-hook="subtitles">\t\t<div class="plugin_inner" data-player-hook="subtitles_text">\t\t<div class="plugin_ch">\t\t\t<p data-player-hook="subtitles_ch"></p>\t\t\t<p class="plugin_eng" data-player-hook="subtitles_en"></p>\t\t</div>\t</div></div>'}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=(i(11),i(1),i(107)),o=i(8),s=i(72),d=i(2);a.exports=n("SubtitlesData",{construct:function(){var e=this;e.name="SubtitlesData",e.xmlparser=null,e._data=[],e.timer=-1},extend:d,methods:{updateSubtitlesUrl:function(e){var t=this;t.subtitlesUrl=e,t._requsetSubtitlesData()},_requsetSubtitlesData:function(){var e=this;e.subtitlesUrl?(r.load(e.subtitlesUrl,function(t,i){if(200==i.status){var a=t.response;if(a){var n=new Uint8Array(a),r=e.utf8ArrayToStr(n),d=(new s).xml_str2json(r);if(d&&d.xml&&d.xml.dia){if(o.isArray(d.xml.dia)){for(var l=0;l<d.xml.dia.length;l++)d.xml.dia[l].st&&d.xml.dia[l].et&&(d.xml.dia[l].st=parseInt(d.xml.dia[l].st,10),d.xml.dia[l].et=parseInt(d.xml.dia[l].et,10),d.xml.dia[l].sub=d.xml.dia[l].sub.replace(/\n/gi,"<br/>"));e._data=d.xml.dia}else d.xml.dia.sub=d.xml.dia.sub.replace(/(\r\n|\n|\r)/gm,"<br/>"),e._data=[d.xml.dia];e.changeSuccess()}else e.changeFailed()}else e.changeFailed()}else e.changeFailed()}),e.timer=setTimeout(e.changeFailed.bind(e),3e3)):e.changeFailed()},utf8ArrayToStr:function(e){var t,i,a,n,r,o;for(t="",a=e.length,i=0;i<a;)switch((n=e[i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(n);break;case 12:case 13:r=e[i++],t+=String.fromCharCode((31&n)<<6|63&r);break;case 14:r=e[i++],o=e[i++],t+=String.fromCharCode((15&n)<<12|(63&r)<<6|(63&o)<<0)}return t},getDataByCurtime:function(e){for(var t=this,i=0,a=t._data.length-1,n=0,r={};i<=a;){if(n=parseInt((i+a)/2,10),r=t._data[n],e>=r.st&&e<=r.et)return r;e<r.st?a=n-1:i=n+1}return null},changeSuccess:function(){clearTimeout(this.timer),this.fire({type:"successful"})},changeFailed:function(){this.fire({type:"failed"})}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=n("XMLParser",{methods:{parse:function(e){var t=null;if(!(window.DOMParser&&document.implementation&&document.implementation.createDocument))return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){}return t},load:function(e,t){var i=null;window.XMLHttpRequest&&(i=new XMLHttpRequest),null!=i&&(i.open("GET",e,!0),i.responseType="arraybuffer",i.send(null),i.onload=function(e){t(i,this)})}}});a.exports=new r}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=(i(13),i(21)),o=i(1),s=i(18),d=i(31),l=i(23),u=i(40),c=new o("ares");a.exports=n("PluginAD",{construct:function(){this.name="ad"},extend:d,methods:{init:function(){this._initEvents()},_initEvents:function(){var e=this;e.skin.on(l.NTF_DefinitionListShow,function(t){var i=e.core.getAres();i&&i.emit(i.DEFINITION_SWITCHING_SHOW)}),e.skin.on(l.NTF_DefinitionADShow,function(t){var i=t.data,a=e.core.getAres();a&&a.emit(a.IMPRESSION,{type:"definitionswitching",data:{id:i.id}})}),e.skin.on(l.NTF_DefinitionADClick,function(t){var i=t.data,a=e.core.getAres();a&&a.emit(a.CLICK,{type:"definitionswitching",data:{id:i.id}})}),r.on("change",function(){var t=e.core.getAres();t&&t.resize()}),u.on("resize",function(){var t=e.core.getAres();t&&"function"==typeof t.resize&&t.resize()})},destroy:function(){var e=this,t=e.core.getMovieInfo();e.core.getAres().destroy({videoEventId:s.getEventId(t.tvid)}),c.log("call ares: destory -> "+t.tvid)}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(31),r=i(0),o=i(13),s=i(3),d=i(39),l=i(16).CORE_TYPES,u=i(23),c=i(110);a.exports=r("BigPlay",{construct:function(){this.name="bigPlay"},extend:n,methods:{init:function(){var e=this,t=o(e.plgContainer);t.append(c),e.plgMustShow=!0,e.$plugin=t.find('[data-player-hook="bigplay"]'),e._bigplayBtn=e.$plugin.find('[data-player-hook="bigplaybtn"]'),e._bigwaitBtn=e.$plugin.find('[data-player-hook="bigwaitbtn"]'),e._bigreplayBtn=e.$plugin.find('[data-player-hook="replaybtn"]'),e._initEvents()},_initEvents:function(){var e=this,t=e.core,i=(e.skin.videoWrapper,s.browser.isTouch?"touchend":"click"),a=!1,n=function(){e._bigPlayHide(),t.resumeVideoEvents(),t.userGesturePlayed(),t.play(),d.getInterface().sendUserActionPingback("ply_play")};"HTTP"===t.getEngineType()&&t.blockVideoEvents(),t.on(l.NTF_NeedUserGesture4Playback,function(){e._bigPlayShow()}),e.$plugin.un(i).on(i,function(e){e.preventDefault(),n()}),e.skin.on(u.NTF_GESTURE_ASYNC_CONTROLS,function(t){e._bigPlayHide()}),e.core.on(l.NTF_StatusChanged,function(t){switch(t.data.state){case l.Status_End_Play:e._bigReplayBtnShow();break;case l.Status_Paused:case l.Status_AdPaused:e._bigPlayShow();break;case l.Status_Waiting:e._bigWaitShow();break;case l.Status_Playing:case l.Status_AdPlaying:e._bigPlayHide()}window.uniqy&&uniqy.videoPlayerPage&&"twChannelPage"===uniqy.videoPlayerPage?e.core.video().muted=!0:e.core.setVolume(1)}),e.skin.on(u.NTF_PlayerSmallWindowStatus,function(t){var i=1===t.data;a!==i&&(a=i,a?e._bigPlayHide():e.core.getCurrStatus()===l.Status_Paused&&e._bigPlayShow())}),e._bigreplayBtn.un(i).on(i,function(t){t.preventDefault(),e.core.refresh(),d.getInterface().sendUserActionPingback("ply_play")})},_bigPlayShow:function(){var e=this;e.$plugin.show(),e.$plugin.removeClass("iqp-btn-hide"),e._bigplayBtn.show(),e._bigreplayBtn.hide(),e._bigwaitBtn.hide()},_bigPlayHide:function(){var e=this;e.$plugin.hasClass("iqp-btn-hide")||(e.$plugin.addClass("iqp-btn-hide"),e._bigplayBtn.hide(),e._bigreplayBtn.hide(),e._bigwaitBtn.hide())},_bigWaitShow:function(){var e=this;e.$plugin.removeClass("iqp-btn-hide"),e.$plugin.show(),e._bigplayBtn.hide(),e._bigreplayBtn.hide(),e._bigwaitBtn.show()},_bigReplayBtnShow:function(){var e=this;e.$plugin.removeClass("iqp-btn-hide"),e._bigreplayBtn.show(),e._bigplayBtn.hide(),e._bigwaitBtn.hide()}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(){return'<div class="iqp-btn-mid" data-player-hook="bigplay"><div class="iqp-mid-circle" data-player-hook="bigplaybtn" style="display: none;"><svg aria-hidden="true"  class="iqp-icon iqp-icon-stop"><use xlink:href="#iqp-svg-stop" class="iqp-svg-symbol iqp-svg-stop"></use></svg></div><div class="iqp-mid-circle" data-player-hook="bigwaitbtn" style="display: none;"><div class="iqp-mid-loading" ><svg aria-hidden="true" class="iqp-icon iqp-icon-loading"><use xlink:href="#iqp-svg-loading" class="iqp-svg-symbol iqp-svg-loading"></use></svg></div></div><div class="iqp-mid-rt" data-player-hook="replaybtn" style="display: none;"><svg aria-hidden="true" class="iqp-icon iqp-icon-replay"><use xlink:href="#iqp-svg-replay" class="iqp-svg-symbol iqp-svg-replay"></use></svg><span class="iqp-mid-txt">重播</span></div></div>'}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(13),o=i(31),s=i(112);a.exports=n("svgIconMobile",{construct:function(){var e=this,t=r(e.plgContainer);e.name="svgIcon",e.$wrapper=t},extend:o,methods:{init:function(){this.$wrapper.html(s)}}})}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(){return'<svg display="none" version="1.1" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"class="iqp-svg-sprite"><symbol id="iqp-svg-forward" viewBox="0 0 1780 1024"><path d="M186.991304 1001.73913c-31.165217 0-66.782609-8.904348-97.947826-31.165217C35.617391 934.956522 0 872.626087 0 801.391304V222.608696c0-57.878261 22.26087-111.304348 62.330435-146.921739C102.4 35.617391 155.826087 17.808696 209.252174 22.26087c26.713043 4.452174 48.973913 13.356522 71.234783 26.713043l516.452173 289.391304c57.878261 35.617391 93.495652 102.4 93.495653 173.634783s-35.617391 138.017391-93.495653 173.634783L276.034783 975.026087c-26.713043 17.808696-57.878261 26.713043-89.043479 26.713043zM186.991304 178.086957c-13.356522 0-22.26087 4.452174-31.165217 13.356521-8.904348 4.452174-13.356522 13.356522-13.356522 31.165218v578.782608c0 22.26087 13.356522 35.617391 22.26087 40.069566 13.356522 8.904348 31.165217 8.904348 48.973913 0l520.904348-289.391305c17.808696-8.904348 17.808696-31.165217 17.808695-40.069565 0-8.904348 0-26.713043-22.260869-40.069565L213.704348 186.991304C204.8 178.086957 200.347826 178.086957 191.443478 178.086957h-4.452174zM1077.426087 1001.73913c-31.165217 0-66.782609-8.904348-97.947826-31.165217-57.878261-35.617391-89.043478-102.4-89.043478-173.634783V222.608696c0-57.878261 22.26087-111.304348 62.330434-146.921739 40.069565-40.069565 93.495652-57.878261 146.92174-53.426087 26.713043 4.452174 48.973913 13.356522 71.234782 26.713043l516.452174 289.391304c57.878261 35.617391 93.495652 102.4 93.495652 173.634783s-35.617391 138.017391-93.495652 173.634783l-520.904348 289.391304c-26.713043 17.808696-57.878261 26.713043-89.043478 26.713043z m0-823.652173c-13.356522 0-22.26087 4.452174-31.165217 13.356521-4.452174 4.452174-13.356522 17.808696-13.356522 31.165218v578.782608c0 22.26087 13.356522 35.617391 22.260869 40.069566 13.356522 8.904348 31.165217 8.904348 48.973913 0l520.904348-289.391305c17.808696-8.904348 17.808696-31.165217 17.808696-40.069565 0-8.904348 0-26.713043-22.26087-40.069565L1104.13913 186.991304c-8.904348-8.904348-13.356522-8.904348-22.260869-8.904347h-4.452174z"></path></symbol><symbol id="iqp-svg-fullscreen1" viewBox="0 0 16 16"><path d="M3.5,2.1h2.6c0.5,0,1-0.5,1-1s-0.5-1-1-1h-5c-0.5,0-1,0.5-1,1v5c0,0.5,0.5,1,1,1s1-0.5,1-1V3.5L5.5,7C6,7.4,6.7,7.5,7.1,7.1S7.4,6,7,5.5L3.5,2.1z"/></symbol><symbol id="iqp-svg-fullscreen2" viewBox="0 0 16 16"><path d="M14.9,8.9c-0.5,0-1,0.5-1,1v2.6l-3.3-3.3c-0.5-0.5-1.2-0.5-1.5-0.1l0,0c-0.4,0.4-0.3,1.1,0.1,1.5l3.3,3.3H9.9c-0.5,0-1,0.5-1,1s0.5,1,1,1h5c0.5,0,1-0.5,1-1v-5C15.9,9.4,15.5,8.9,14.9,8.9z"/></symbol><symbol id="iqp-svg-fullscreenno1" viewBox="0 0 16 16"><path d="M3.9,5.3H1.3c-0.5,0-1,0.5-1,1s0.5,1,1,1h5c0.5,0,1-0.5,1-1v-5c0-0.5-0.5-1-1-1s-1,0.5-1,1v2.6L1.9,0.5C1.4,0,0.7,0,0.3,0.3S0,1.4,0.5,1.9L3.9,5.3z"/></symbol><symbol id="iqp-svg-fullscreenno2" viewBox="0 0 16 16"><path d="M9.8,15.8c0.5,0,1-0.5,1-1v-2.6l3.3,3.3c0.5,0.5,1.2,0.5,1.5,0.1l0,0c0.4-0.4,0.3-1.1-0.1-1.5l-3.3-3.3h2.6c0.5,0,1-0.5,1-1s-0.5-1-1-1h-5c-0.5,0-1,0.5-1,1v5C8.8,15.4,9.3,15.8,9.8,15.8z"/></symbol><symbol id="iqp-svg-play" viewBox="0 0 1024 1024"><path d="M186.181818 0C134.981818 0 93.090909 41.890909 93.090909 93.090909v837.818182c0 51.2 41.890909 93.090909 93.090909 93.090909s93.090909-41.890909 93.090909-93.090909V93.090909c0-51.2-41.890909-93.090909-93.090909-93.090909zM837.818182 0c-51.2 0-93.090909 41.890909-93.090909 93.090909v837.818182c0 51.2 41.890909 93.090909 93.090909 93.090909s93.090909-41.890909 93.090909-93.090909V93.090909c0-51.2-41.890909-93.090909-93.090909-93.090909z"></path></symbol><symbol id="iqp-svg-pause" viewBox="0 0 1024 1024"><path d="M253.773913 1001.73913c-31.165217 0-66.782609-8.904348-97.947826-31.165217C102.4 934.956522 66.782609 872.626087 66.782609 801.391304V222.608696c0-57.878261 22.26087-111.304348 62.330434-146.921739C169.182609 35.617391 222.608696 17.808696 276.034783 22.26087c26.713043 4.452174 48.973913 13.356522 71.234782 26.713043l516.452174 289.391304c57.878261 35.617391 93.495652 102.4 93.495652 173.634783s-35.617391 138.017391-93.495652 173.634783L342.817391 975.026087c-26.713043 17.808696-57.878261 26.713043-89.043478 26.713043zM253.773913 178.086957c-13.356522 0-22.26087 4.452174-31.165217 13.356521-8.904348 4.452174-13.356522 13.356522-13.356522 31.165218v578.782608c0 22.26087 13.356522 35.617391 22.260869 40.069566 13.356522 8.904348 31.165217 8.904348 48.973914 0l520.904347-289.391305c17.808696-8.904348 17.808696-31.165217 17.808696-40.069565 0-8.904348 0-26.713043-22.26087-40.069565L280.486957 186.991304C271.582609 178.086957 267.130435 178.086957 258.226087 178.086957h-4.452174z"></path></symbol><symbol id="iqp-svg-next" viewBox="0 0 1152 1024"><path d="M185.6 0C140.8 0 96 19.2 57.6 57.6 19.2 96 0 147.2 0 211.2v601.6c0 76.8 32 140.8 89.6 179.2 32 19.2 64 32 96 32s64-6.4 89.6-25.6l524.8-300.8c57.6-38.4 96-108.8 96-185.6s-38.4-147.2-96-179.2L281.6 25.6C256 12.8 236.8 6.4 211.2 0h-25.6z m0 896c-6.4 0-19.2 0-25.6-6.4-19.2-19.2-32-44.8-32-76.8V211.2c0-25.6 6.4-51.2 25.6-64 6.4-12.8 19.2-19.2 32-19.2H192c6.4 0 12.8 6.4 19.2 6.4h6.4l518.4 300.8c19.2 19.2 32 44.8 32 76.8s-12.8 57.6-32 70.4l-518.4 300.8h-6.4c-6.4 12.8-12.8 12.8-25.6 12.8zM1088 0c-32 0-64 32-64 64v896c0 32 32 64 64 64s64-32 64-64V64c0-32-32-64-64-64z"></path></symbol><symbol id="iqp-svg-backward" viewBox="0 0 1780 1024"><path d="M1504.834783 975.026087l-520.904348-289.391304c-57.878261-35.617391-93.495652-102.4-93.495652-173.634783s35.617391-138.017391 93.495652-173.634783l516.452174-289.391304c22.26087-13.356522 44.521739-22.26087 71.234782-26.713043 53.426087-4.452174 106.852174 13.356522 146.921739 53.426087 40.069565 35.617391 62.330435 89.043478 62.330435 146.921739v578.782608c0 71.234783-35.617391 133.565217-89.043478 173.634783-31.165217 17.808696-62.330435 31.165217-97.947826 31.165217-31.165217-4.452174-62.330435-13.356522-89.043478-31.165217zM1589.426087 178.086957c-4.452174 0-13.356522 4.452174-22.26087 8.904347l-516.452174 289.391305c-17.808696 13.356522-22.26087 31.165217-22.260869 40.069565 0 8.904348 0 26.713043 17.808696 40.069565L1567.165217 845.913043c13.356522 8.904348 35.617391 8.904348 48.973913 0 8.904348-4.452174 22.26087-17.808696 22.26087-40.069565V222.608696c0-17.808696-8.904348-26.713043-13.356522-31.165218-8.904348-8.904348-17.808696-13.356522-31.165217-13.356521h-4.452174zM614.4 975.026087L93.495652 685.634783C35.617391 650.017391 0 583.234783 0 512s35.617391-138.017391 93.495652-173.634783l516.452174-289.391304c22.26087-13.356522 44.521739-22.26087 71.234783-26.713043 53.426087-4.452174 106.852174 13.356522 146.921739 53.426087 40.069565 35.617391 62.330435 89.043478 62.330435 146.921739v578.782608c0 71.234783-35.617391 133.565217-89.043479 173.634783-31.165217 17.808696-62.330435 31.165217-97.947826 31.165217-31.165217-4.452174-62.330435-13.356522-89.043478-31.165217zM698.991304 178.086957c-4.452174 0-13.356522 4.452174-22.260869 8.904347L160.278261 471.930435c-17.808696 13.356522-22.26087 31.165217-22.26087 40.069565 0 8.904348 0 26.713043 17.808696 40.069565l520.904348 289.391305c13.356522 8.904348 35.617391 8.904348 48.973913 0 8.904348-4.452174 22.26087-17.808696 22.260869-40.069566V222.608696c0-17.808696-8.904348-26.713043-13.356521-31.165218-8.904348-8.904348-17.808696-13.356522-31.165218-13.356521h-4.452174z"></path></symbol><symbol id="iqp-svg-stop" viewBox="0 0 1024 1024"><path d="M901.322569 370.311372L275.532 20.026085C169.265677-39.010761 39.384615 39.705034 39.384615 161.714516v700.570574C39.384615 984.294572 169.265677 1063.010367 275.532 1003.973521l625.790569-350.285287c110.202113-62.972636 110.202113-220.404226 0-283.376862z"></path></symbol><symbol id="iqp-svg-loading" viewBox="0 0 1024 1024"><path d="M950.857143 443.733333c-21.942857 0-41.447619-14.628571-46.32381-36.571428-48.761905-177.980952-209.67619-299.885714-392.533333-299.885715S168.228571 229.180952 119.466667 407.161905c-7.314286 26.819048-34.133333 41.447619-58.514286 34.133333-26.819048-7.314286-41.447619-34.133333-34.133333-58.514286C85.333333 163.352381 285.257143 9.752381 512 9.752381s426.666667 153.6 485.180952 373.028571c7.314286 26.819048-7.314286 53.638095-34.133333 58.514286-4.87619 2.438095-7.314286 2.438095-12.190476 2.438095zM512 1014.247619c-226.742857 0-426.666667-153.6-485.180952-373.028571-7.314286-26.819048 7.314286-53.638095 34.133333-58.514286 26.819048-7.314286 53.638095 9.752381 58.514286 34.133333 46.32381 177.980952 207.238095 302.32381 392.533333 302.32381s343.771429-124.342857 392.533333-302.32381c7.314286-26.819048 34.133333-41.447619 58.514286-34.133333 26.819048 7.314286 41.447619 34.133333 34.133333 58.514286-58.514286 219.428571-258.438095 373.028571-485.180952 373.028571z"></path></symbol><symbol id="iqp-svg-replay" viewBox="0 0 1025 1024"><path d="M607.085714 266.971429c-7.314286 32.914286 14.628571 62.171429 43.885715 69.485714l245.028571 54.857143c14.628571 3.657143 32.914286 0 43.885714-7.314286 14.628571-7.314286 21.942857-21.942857 25.6-36.571429L1024 102.4c3.657143-14.628571 0-32.914286-7.314286-43.885714-7.314286-14.628571-21.942857-21.942857-36.571428-25.6-14.628571-3.657143-32.914286 0-43.885715 7.314285-14.628571 7.314286-21.942857 21.942857-25.6 36.571429l-21.942857 91.428571C789.942857 62.171429 654.628571 0 512 0 230.4 0 0 230.4 0 512s230.4 512 512 512c223.085714 0 420.571429-142.628571 486.4-358.4 10.971429-29.257143-7.314286-62.171429-36.571429-69.485714-29.257143-10.971429-62.171429 7.314286-69.485714 36.571428-51.2 164.571429-204.8 277.942857-380.342857 277.942857C292.571429 910.628571 113.371429 731.428571 113.371429 512S292.571429 113.371429 512 113.371429c117.028571 0 223.085714 51.2 299.885714 135.314285L676.571429 219.428571c-32.914286-3.657143-65.828571 14.628571-69.485715 47.542858z"></path></symbol><symbol id="iqp-svg-vinv" viewBox="0 0 1280 1024"><path d="M454.4 896c38.4 0 64 25.6 64 64s-25.6 64-64 64H192c-108.8 0-192-83.2-192-192V192c0-108.8 83.2-192 192-192h896c108.8 0 192 83.2 192 192v128c0 38.4-25.6 64-64 64s-64-25.6-64-64V192c0-38.4-25.6-64-64-64H192c-38.4 0-64 25.6-64 64v640c0 38.4 25.6 64 64 64h262.4z"></path><path d="M768 448h320c108.8 0 192 83.2 192 192v192c0 108.8-83.2 192-192 192h-320c-108.8 0-192-83.2-192-192v-192c0-108.8 83.2-192 192-192z m0 128c-38.4 0-64 25.6-64 64v192c0 38.4 25.6 64 64 64h320c38.4 0 64-25.6 64-64v-192c0-38.4-25.6-64-64-64h-320z"></path></symbol><symbol id="iqp-svg-curve" viewBox="0 0 2420 1024"><path d="M1079.854545 1024c-195.490909 0-297.890909-130.327273-390.981818-242.036364-74.472727-93.090909-121.018182-148.945455-195.490909-148.945454-139.636364 0-279.272727 223.418182-316.509091 297.890909-18.618182 46.545455-74.472727 65.163636-121.018182 46.545454-46.545455-18.618182-65.163636-83.781818-46.545454-130.327272 18.618182-46.545455 214.109091-418.909091 502.690909-409.6C660.945455 446.836364 754.036364 558.545455 837.818182 660.945455c83.781818 102.4 148.945455 167.563636 251.345454 167.563636 139.636364 0 195.490909-139.636364 269.963637-363.054546 65.163636-204.8 148.945455-465.454545 418.909091-465.454545 251.345455 0 335.127273 158.254545 409.6 279.272727 46.545455 102.4 74.472727 139.636364 139.636363 139.636364 46.545455 0 93.090909 46.545455 93.090909 93.090909 0 55.854545-37.236364 93.090909-93.090909 93.090909-176.872727 0-242.036364-130.327273-307.2-232.727273-65.163636-121.018182-111.709091-186.181818-242.036363-186.181818-121.018182 0-167.563636 111.709091-251.345455 344.436364-74.472727 223.418182-158.254545 493.381818-446.836364 493.381818z"></path></symbol><symbol id="iqp-svg-close" viewBox="0 0 1024 1024"><path d="M622.276923 512l378.092308-378.092308c31.507692-31.507692 31.507692-78.769231 0-110.276923-31.507692-31.507692-78.769231-31.507692-110.276923 0L512 401.723077 133.907692 23.630769C102.4-7.876923 55.138462-7.876923 23.630769 23.630769c-31.507692 31.507692-31.507692 78.769231 0 110.276923l378.092308 378.092308-378.092308 378.092308c-31.507692 31.507692-31.507692 78.769231 0 110.276923 31.507692 31.507692 78.769231 31.507692 110.276923 0l378.092308-378.092308 378.092308 378.092308c31.507692 31.507692 78.769231 31.507692 110.276923 0 31.507692-31.507692 31.507692-78.769231 0-110.276923L622.276923 512z"fill=""></path></symbol></svg>'}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){t=e.exports=i(59)(void 0),t.push([e.i,'.iqp-player{position:relative;width:100%;height:100%;min-width:230px;overflow:hidden;text-align:left;white-space:normal;background:#000;color:#fff;font:12px/1.5 PingFangSC-Regular,Helvetica,Arial,Microsoft Yahei,sans-serif;z-index:0;user-select:none;outline:none;-webkit-font-smoothing:antialiased}.iqp-player svg{fill:currentColor;overflow:hidden}.iqp-player.iqp-full-screen50 video{width:50%!important;height:50%!important;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.iqp-player.iqp-web-screen{position:fixed;left:0;top:0;z-index:4201}.iqp-player *,.iqp-player :after,.iqp-player :before{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.iqp-player a,.iqp-player a:hover,.iqp-player a:visited{color:#fff;text-decoration:none!important}.iqp-player :focus,.iqp-player a:active{outline:0 none}.iqp-player img{border:none;vertical-align:top}.iqp-player ol,.iqp-player ul{list-style:none}.iqp-player h1,.iqp-player h2,.iqp-player h3,.iqp-player h4,.iqp-player h5,.iqp-player h6{font-size:100%;font-weight:400}.iqp-player em,.iqp-player i{font-style:normal}.iqp-player strong{font-weight:400}.iqp-player button,.iqp-player input,.iqp-player select,.iqp-player textarea{font-family:inherit;font-size:100%;-webkit-appearance:none}.iqp-player button:focus,.iqp-player input:focus,.iqp-player select:focus,.iqp-player textarea:focus{outline:none}.iqp-player .iqp-hide-controls::-webkit-media-controls-play-button,.iqp-player .iqp-hide-controls::-webkit-media-controls-start-playback-button{display:none!important;-webkit-appearance:none}.iqp-player .iqp-layer{position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;background-color:#000;z-index:100}.iqp-player .iqp-layer-con{position:absolute;width:100%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center}.dn{display:none!important}.iqp-svg-sprite{display:none;position:absolute;width:0;height:0;overflow:hidden}.iqp-logo-box{position:absolute;width:100%;height:100%;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.iqp-logo-box .iqp-logo-top{position:absolute;top:8%;right:5%;-webkit-animation:logoTopAnimation 240s linear both;animation:logoTopAnimation 240s linear both}.iqp-logo-box .iqp-logo-bottom{position:absolute;bottom:17%;right:20%}.iqp-logo-box .logoShowAnimation{-webkit-animation:iqp-show .5s linear both;animation:iqp-show .5s linear both}.iqp-logo-box .logoHideAnimation{-webkit-animation:iqp-hide .5s linear both;animation:iqp-hide .5s linear both}.iqp-poster{position:absolute;width:100%;height:100%;top:0;background-size:contain;background-position:50%;background-repeat:no-repeat}.iqp-frontpost{position:absolute;left:78px;bottom:82px;visibility:hidden}.iqp-frontpost:before{position:absolute;content:"";left:-48px;bottom:-12px;width:72px;height:80px;background:url(//www.iqiyipic.com/common/fix/iq-player/frontpost-logo.png) no-repeat;background-size:72px auto;-webkit-transform:scale(.1);transform:scale(.1)}.iqp-frontpost .iqp-frontpost-text{width:0;height:52px;padding-left:0;line-height:52px;white-space:nowrap;font-size:20px;color:#fff;text-shadow:0 2px 0 #0d7e36;background:url(//www.iqiyipic.com/common/fix/iq-player/frontpost-text.png) no-repeat;background-size:280px auto;overflow:hidden}.iqp-frontpost.frontpostIn{visibility:visible}.iqp-frontpost.frontpostIn:before{-webkit-transform:scale(1);transform:scale(1);transition:-webkit-transform .3s ease-out;transition:transform .3s ease-out;transition:transform .3s ease-out,-webkit-transform .3s ease-out}.iqp-frontpost.frontpostIn .iqp-frontpost-text{width:280px;padding-left:28px;transition:all .5s ease-in-out .3s}.iqp-full-screen .iqp-screen-top{position:absolute;top:0;color:#fff;font-size:16px;left:0;right:0;padding:20px 0 20px 20px;background-image:linear-gradient(0deg,rgba(26,26,26,0),#1a1a1a 125%)}.iqp-full-screen .iqp-screen-top .iqp-video-title{display:inline-block;margin-left:10px;font-size:20px;color:#fff!important}.iqp-full-screen .iqp-right-time{font-family:ds-digital;float:right;margin-right:30px;font-size:24px;color:#fff}.iqp-adjust-box{width:58px;float:right;margin-right:30px;margin-left:12px;color:#ddd;margin-top:4px;text-align:center}.iqp-adjust-box .iqp-icon{cursor:pointer}.iqp-adjust-box .iqp-icon:hover{color:#fff}.iqp-adjust-box .iqp-hover-tip{margin-left:-8px}.iqp-adjust-box .iqp-icon-screen100{width:49px;height:24px}.iqp-adjust-box .iqp-icon-screen50{width:47px;height:24px}.iqp-hover-tip{font-size:14px;color:#fff}.iqp-collect{width:58px;float:right;margin-right:12px;color:#ddd;margin-top:4px;text-align:center}.iqp-collect .iqp-icon-collect,.iqp-collect .iqp-icon-collected{width:24px;height:24px;cursor:pointer}.iqp-collect .iqp-icon-collect:hover{color:#fff}.iqp-collect .iqp-icon-collected.selected,.iqp-collect .iqp-icon-collected:hover{color:#00be06}.iqp-right-tip{padding:11px 20px;border-radius:20px;background-color:rgba(26,26,26,.9);color:#fff;font-size:14px;position:absolute;bottom:-30px;right:120px}.iqp-like{width:58px;float:right;margin-right:12px;color:#ddd;margin-top:6px;text-align:center}.iqp-like .iqp-like-con{width:24px;height:21px;display:inline-block;position:relative;cursor:pointer}.iqp-like .iqp-like-con.iqp-like-ani:before,.iqp-like .iqp-like-con.selected:before{content:"";width:45px;height:45px;position:absolute;left:-10px;top:-12px;background:url(//www.iqiyipic.com/common/fix/iq-player/iqp-img-liked.png);background-size:1125px auto}.iqp-like .iqp-like-con.iqp-like-ani .iqp-icon-like,.iqp-like .iqp-like-con.selected .iqp-icon-like{display:none}.iqp-like .iqp-like-con.iqp-like-ani:before{-webkit-animation:iqp-like .6s steps(25);animation:iqp-like .6s steps(25)}.iqp-like .iqp-icon-like{width:24px;height:23px;margin-top:-1px}.iqp-like .iqp-icon-like:hover{color:#fff}@-webkit-keyframes iqp-like{0%{background-position:0 0}to{background-position:-1125px 0}}@keyframes iqp-like{0%{background-position:0 0}to{background-position:-1125px 0}}.iqp-esc-screen{position:absolute;top:72px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);background:rgba(0,0,0,.6);font-size:16px;color:#fff;text-align:center;padding:10px 60px;border-radius:22px}.iqp-esc-screen .iqp-btn-esc{border:1px solid #fff;padding:0 5px;margin:0 8px;border-radius:2px;display:inline-block;line-height:20px}.iqp-bottom{position:absolute;left:0;bottom:0;width:100%;z-index:1}.iqp-control-tip{width:110px;padding:3px 6px;position:absolute;bottom:58px;font-size:12px;border-radius:2px;background-color:rgba(0,0,0,.8)}.iqp-player-mobile .iqp-bottom,.iqp-player-pad .iqp-bottom{bottom:-1px}.iqp-player-pc .iqp-bottom{z-index:99}.iqp-player-pc .iqp-bottom-hide .iqp-bottom{-webkit-animation:iqp-translatedown .2s forwards;animation:iqp-translatedown .2s forwards}.iqp-player-pc .iqp-bottom-hide .iqp-contrl-tip{bottom:49px}.iqp-player-pc .iqp-process-hidden .iqp-progress{bottom:0}.iqp-player-pc .iqp-process-hidden .iqp-contrl{display:none}.iqp-player-pc .iqp-process-hidden .iqp-contrl-tip{bottom:3px}.iqp-player-pc .iqp-progress__hover .iqp-filter{bottom:57px}.iqp-player-pc .iqp-progress__hover .iqp-filter .iqp-filter-tip{z-index:122}.iqp-player-pc .iqp-progress__hover .iqp-contrl-tip{bottom:58px}.iqp-filter{position:absolute;width:100%;bottom:44px;opacity:1;transition:bottom .2s,opacity .2s}.iqp-tip-stream{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:0;-webkit-flex:none;flex:none;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:340px;height:38px;padding-left:20px;font-size:0;background-image:linear-gradient(90deg,rgba(0,0,0,.9),rgba(0,0,0,.9) 45%,rgba(0,0,0,.16) 90%,transparent)}.iqp-tip-stream.iqp-tip-fixed{position:absolute;bottom:44px}.iqp-tip-stream.iqp-tip-sealoff{position:absolute;bottom:68px;z-index:100;width:480px}.iqp-tip-stream .iqp-stream-switch{font-size:14px}.iqp-tip-stream .iqp-stream-switch .em,.iqp-tip-stream .iqp-txt-selected,.iqp-tip-stream .iqp-txt-selected:hover{color:#00be06}.iqp-tip-stream .iqp-stream-close{margin-left:28px;font-size:27px;cursor:pointer;font-family:Arial,Microsoft Yahei;width:12px;height:12px}.iqp-player-pc .iqp-tip-stream{z-index:9}.iqp-player-pc .iqp-tip-stream .iqp-stream-close{width:11px;height:11px}.iqp-player-pc .iqp-tip-stream .iqp-stream-close:hover{color:#00be06}.iqp-progress{position:relative;width:100%;z-index:1}.iqp-progress .iqp-progress-bar{position:relative;width:100%;height:2px;background-color:hsla(0,0%,100%,.25);cursor:pointer}.iqp-progress .iqp-progress-load{position:absolute;bottom:0;height:100%;background-color:hsla(0,0%,100%,.6)}.iqp-progress .iqp-progress-play{position:absolute;bottom:0;height:100%;background-color:#00c000}.iqp-progress .iqp-progress-dot{position:absolute;width:14px;height:14px;top:-6px;margin-left:7px;border-radius:50%;background-color:#fff;box-shadow:0 0 6px 2px hsla(0,0%,100%,.3);-webkit-transform:scale(1);transform:scale(1);transition:-webkit-transform .15s ease-in-out;transition:transform .15s ease-in-out;transition:transform .15s ease-in-out,-webkit-transform .15s ease-in-out}.iqp-progress .iqp-dot-scale{-webkit-transform:scale(1.5);transform:scale(1.5)}.iqp-progress .iqp-skip-line{width:1px;height:16px;background:#fff;position:absolute;bottom:0;z-index:10;opacity:0}.iqp-player-pc .iqp-progress{z-index:5;height:16px}.iqp-player-pc .iqp-progress .iqp-progress-bar{position:absolute;bottom:0;height:3px}.iqp-player-pc .iqp-progress .iqp-progress-dot{width:16px;height:22px;top:-4px;border-radius:5px;margin-left:0;opacity:0;z-index:5}.iqp-player-pc .iqp-progress .iqp-skip-dot{padding:20px 0 0;width:6px;height:6px;position:absolute;bottom:0;left:43px;z-index:99}.iqp-player-pc .iqp-progress .iqp-skip-dot:before{content:"";width:6px;height:6px;border-radius:50%;background:#fff;position:absolute;bottom:5px;z-index:10;opacity:0}.iqp-player-pc .iqp-progress .iqp-filter-dot{width:5px;height:5px;border-radius:50%;background:#fff;position:absolute;bottom:5px;opacity:0}.iqp-player-pc .iqp-progress:hover{z-index:121}.iqp-player-pc .iqp-progress:hover .iqp-progress-bar{height:16px}.iqp-player-pc .iqp-progress:hover .iqp-progress-dot{-webkit-animation:iqp-show .2s forwards;animation:iqp-show .2s forwards}.iqp-player-pc .iqp-progress:hover .iqp-skip-line{opacity:1}.iqp-player-pc .iqp-progress:hover .iqp-filter-dot,.iqp-player-pc .iqp-progress:hover .iqp-skip-dot:before{opacity:1;transition:opacity .2s}.iqp-player-pc .iqp-progress .iqp-progress-bar,.iqp-player-pc .iqp-progress .iqp-progress-load,.iqp-player-pc .iqp-progress .iqp-progress-play{transition:height .2s}.iqp-preview{position:absolute}.iqp-preview .iqp-img-wrap{width:164px;background:#000;position:absolute;bottom:0;left:-82px}.iqp-preview .iqp-img-wrap .iqp-imgBg{width:160px;height:90px;background:url(//preimage1.iqiyipic.com/preimage/20180924/75/7e/v_119261728_m_611_160_90_4.jpg);margin-top:2px;margin-left:2px}.iqp-preview .iqp-title{line-height:17px;color:#fff;font-size:13px;padding:3px 6px 3px 10px;text-align:left}.iqp-preview .iqp-title.iqp-title-ad .iqp-time{display:inline-block;width:118px;vertical-align:middle;margin-right:0}.iqp-preview .iqp-title .iqp-preview-ad{display:inline-block;margin:2px 4px 0 -4px;height:30px;width:30px;border:2px solid #00be06;border-radius:50%}.iqp-preview .iqp-title .iqp-time{margin-right:4px}.iqp-preview .iqp-title .iqp-time.iqp-notitle{margin-right:0;text-align:center;display:block}.iqp-skip{width:124px;height:83px;position:absolute;bottom:16px;left:0;font-size:14px;color:#fff;text-align:center;background:rgba(0,0,0,.8);border-radius:6px}.iqp-skip .iqp-skip-title{padding-top:18px;padding-bottom:8px}.iqp-skip .iqp-skip-btn{color:#fff;display:inline-block}.iqp-skip .iqp-skip-btn.selected,.iqp-skip .iqp-skip-btn:hover{color:#00be06}.iqp-skip .iqp-skip-yes{margin-right:26px}.iqp-contrl{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;width:100%;height:42px;padding:0 10px;font-size:14px;z-index:120;color:#ddd;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.iqp-contrl:before{position:absolute;content:"";left:-1px;right:-1px;bottom:0;height:42px;background-image:linear-gradient(180deg,rgba(0,0,0,.33),rgba(0,0,0,.86));background-repeat:repeat-x;z-index:-1;opacity:.55}.iqp-contrl:after{display:none}.iqp-contrl .iqp-label,.iqp-contrl .iqp-label-svg{color:#ddd;white-space:nowrap}.iqp-contrl .iqp-label-svg{font-size:0}.iqp-contrl .iqp-time-display{float:left;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:0;-webkit-flex:none;flex:none;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:100%;margin:0 10px;white-space:nowrap}.iqp-contrl .iqp-time-cur{color:#fff}.iqp-contrl .iqp-time-cutline{margin:0 5px}.iqp-contrl .iqp-contrls-left,.iqp-contrl .iqp-contrls-right{position:relative;height:100%}.iqp-contrl .iqp-contrls-left{-webkit-flex-shrink:0;flex-shrink:0}.iqp-contrl .iqp-contrls-right{margin-left:10px}.iqp-contrl .iqp-contrls-right .iqp-btn{float:right}.iqp-contrl .iqp-btn{position:relative;float:left;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:0;-webkit-flex:none;flex:none;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:100%;margin:0 10px;cursor:pointer}.iqp-contrl .iqp-btn.selected .iqp-icon-close,.iqp-contrl .iqp-btn.selected .iqp-icon-player,.iqp-contrl .iqp-btn.selected .iqp-icon-pulldown,.iqp-contrl .iqp-btn.selected .iqp-icon-pullup,.iqp-contrl .iqp-btn:hover .iqp-icon-close,.iqp-contrl .iqp-btn:hover .iqp-icon-player,.iqp-contrl .iqp-btn:hover .iqp-icon-pulldown,.iqp-contrl .iqp-btn:hover .iqp-icon-pullup{color:#999}.iqp-contrl .iqp-btn:hover .iqp-icon,.iqp-contrl .iqp-btn:hover .iqp-label{color:#fff}.iqp-contrl .iqp-btn.selected .iqp-icon,.iqp-contrl .iqp-btn.selected .iqp-label{color:#00be06}.iqp-contrl .iqp-btn.iqp-btn-pause,.iqp-contrl .iqp-btn.iqp-btn-play{margin:0 9px}.iqp-contrl .iqp-btn.iqp-btn-next:hover .iqp-pop-next{display:block}.iqp-contrl .iqp-icon{width:16px;height:16px}.iqp-contrl .iqp-icon.iqp-icon-pause,.iqp-contrl .iqp-icon.iqp-icon-play{width:22px;height:22px}.iqp-contrl .iqp-icon.iqp-icon-next{width:18px;height:18px}.iqp-contrl .iqp-icon.iqp-icon-repeat{width:20px;height:20px}.iqp-contrl .iqp-icon.iqp-icon-vinv-pc,.iqp-contrl .iqp-icon.iqp-icon-webscreen,.iqp-contrl .iqp-icon.iqp-icon-webscreenno{width:18px;height:16px}.iqp-contrl .iqp-icon.iqp-icon-loading{width:36px;height:36px}.iqp-contrl .iqp-icon.iqp-icon-loading .iqp-loading-svg{-webkit-animation:iqp-rotate-360 .8s linear infinite;animation:iqp-rotate-360 .8s linear infinite;-webkit-transform-origin:center center;transform-origin:center center;fill:url(#iqp-loading-gradient)}.iqp-contrl .iqp-icon.iqp-icon-voice-status{margin-right:-4px;margin-left:-6px}.iqp-contrl .iqp-btn-set:hover .iqp-icon-set{-webkit-animation:iqp-rotate-90 .3s linear;animation:iqp-rotate-90 .3s linear}.iqp-contrl .iqp-btn-loading{margin:0 2px}.iqp-contrl .iqp-btn-fullscreen:hover .iqp-icon-fullscreen,.iqp-contrl .iqp-btn-fullscreen:hover .iqp-icon-fullscreenno{overflow:visible}.iqp-contrl .iqp-btn-fullscreen:hover .iqp-svg-fullscreen1,.iqp-contrl .iqp-btn-fullscreen:hover .iqp-svg-fullscreenno1{-webkit-animation:iqp-icon-screenB .6s linear;animation:iqp-icon-screenB .6s linear;-webkit-transform-origin:center center;transform-origin:center center}.iqp-contrl .iqp-btn-fullscreen:hover .iqp-svg-fullscreen2,.iqp-contrl .iqp-btn-fullscreen:hover .iqp-svg-fullscreenno2{-webkit-animation:iqp-icon-screenT .6s linear;animation:iqp-icon-screenT .6s linear;-webkit-transform-origin:center center;transform-origin:center center}.iqp-contrl .iqp-btn-webscreen:hover .iqp-svg-webscreen1,.iqp-contrl .iqp-btn-webscreen:hover .iqp-svg-webscreenno1{-webkit-animation:iqp-icon-webscreenOut .6s linear;animation:iqp-icon-webscreenOut .6s linear;-webkit-transform-origin:center center;transform-origin:center center}.iqp-contrl .iqp-btn-webscreen:hover .iqp-svg-webscreen2,.iqp-contrl .iqp-btn-webscreen:hover .iqp-svg-webscreenno2{-webkit-animation:iqp-icon-webscreenT .6s linear;animation:iqp-icon-webscreenT .6s linear;-webkit-transform-origin:center center;transform-origin:center center}.iqp-contrl .iqp-btn-webscreen:hover .iqp-svg-webscreen3,.iqp-contrl .iqp-btn-webscreen:hover .iqp-svg-webscreenno3{-webkit-animation:iqp-icon-webscreenB .6s linear;animation:iqp-icon-webscreenB .6s linear;-webkit-transform-origin:center center;transform-origin:center center}.iqp-contrl .iqp-btn-vinv-pc:hover .iqp-icon-vinv-pc{-webkit-animation:iqp-icon-vinv .6s ease both;animation:iqp-icon-vinv .6s ease both;-webkit-transform-origin:center center;transform-origin:center center}.iqp-contrl .iqp-btn-voice:hover .iqp-icon-voice-status .voice-status{-webkit-animation:iqp-icon-voice .8s ease both;animation:iqp-icon-voice .8s ease both;-webkit-transform-origin:center center;transform-origin:center center}.iqp-contrl .barrage-full-screen .barrage-input-box{height:28px}.iqp-contrl .fullScreen_danmu{padding-top:9px}.iqp-contrl .iqp-dot-rednew{position:absolute;width:6px;height:6px;top:7px;right:-6px;border-radius:50%;background-color:red}.iqp-contrl .iqp-pop-btn{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:30px;padding-bottom:15px}.iqp-contrl .iqp-btn-speed .iqp-pop-btn{left:auto;right:-46px;-webkit-transform:none;transform:none}@media screen and (max-width:1071px){.iqp-contrl .blankarea{display:none}}@-webkit-keyframes iqp-icon-voice{0%{-webkit-transform:scale(0);transform:scale(0)}20%{-webkit-transform:scale(1.1);transform:scale(1.1)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-icon-voice{0%{-webkit-transform:scale(0);transform:scale(0)}20%{-webkit-transform:scale(1.1);transform:scale(1.1)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes iqp-icon-screenT{0%{-webkit-transform:translate(0);transform:translate(0)}50%{-webkit-transform:translate(1px,1px);transform:translate(1px,1px)}66%{-webkit-transform:translate(0);transform:translate(0)}83%{-webkit-transform:translate(1px,1px);transform:translate(1px,1px)}to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes iqp-icon-screenT{0%{-webkit-transform:translate(0);transform:translate(0)}50%{-webkit-transform:translate(1px,1px);transform:translate(1px,1px)}66%{-webkit-transform:translate(0);transform:translate(0)}83%{-webkit-transform:translate(1px,1px);transform:translate(1px,1px)}to{-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes iqp-icon-screenB{0%{-webkit-transform:translate(0);transform:translate(0)}50%{-webkit-transform:translate(-1px,-1px);transform:translate(-1px,-1px)}66%{-webkit-transform:translate(0);transform:translate(0)}83%{-webkit-transform:translate(-1px,-1px);transform:translate(-1px,-1px)}to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes iqp-icon-screenB{0%{-webkit-transform:translate(0);transform:translate(0)}50%{-webkit-transform:translate(-1px,-1px);transform:translate(-1px,-1px)}66%{-webkit-transform:translate(0);transform:translate(0)}83%{-webkit-transform:translate(-1px,-1px);transform:translate(-1px,-1px)}to{-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes iqp-icon-webscreenT{0%{-webkit-transform:translate(0);transform:translate(0)}16%{-webkit-transform:translate(1px,1px);transform:translate(1px,1px)}50%{-webkit-transform:translate(0);transform:translate(0)}66%{-webkit-transform:translate(1px,1px);transform:translate(1px,1px)}83%,to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes iqp-icon-webscreenT{0%{-webkit-transform:translate(0);transform:translate(0)}16%{-webkit-transform:translate(1px,1px);transform:translate(1px,1px)}50%{-webkit-transform:translate(0);transform:translate(0)}66%{-webkit-transform:translate(1px,1px);transform:translate(1px,1px)}83%,to{-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes iqp-icon-webscreenB{0%{-webkit-transform:translate(0);transform:translate(0)}16%{-webkit-transform:translate(-1px,-1px);transform:translate(-1px,-1px)}50%{-webkit-transform:translate(0);transform:translate(0)}66%{-webkit-transform:translate(-1px,-1px);transform:translate(-1px,-1px)}83%,to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes iqp-icon-webscreenB{0%{-webkit-transform:translate(0);transform:translate(0)}16%{-webkit-transform:translate(-1px,-1px);transform:translate(-1px,-1px)}50%{-webkit-transform:translate(0);transform:translate(0)}66%{-webkit-transform:translate(-1px,-1px);transform:translate(-1px,-1px)}83%,to{-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes iqp-icon-webscreenOut{0%,16%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}66%{-webkit-transform:scale(1);transform:scale(1)}83%{-webkit-transform:scale(1.05);transform:scale(1.05)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-icon-webscreenOut{0%,16%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}66%{-webkit-transform:scale(1);transform:scale(1)}83%{-webkit-transform:scale(1.05);transform:scale(1.05)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes iqp-icon-vinv{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.1);transform:scale(1.1)}66%{-webkit-transform:scale(1);transform:scale(1)}83%{-webkit-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-icon-vinv{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.1);transform:scale(1.1)}66%{-webkit-transform:scale(1);transform:scale(1)}83%{-webkit-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(1);transform:scale(1)}}.iqp-pop-stream{font-size:14px;width:164px;padding:8px 0;border-radius:5px;background-color:rgba(0,0,0,.8);text-align:center}.iqp-pop-stream .iqp-txt-stream{padding:4px 0;color:#ddd}.iqp-pop-stream .iqp-txt-stream:hover .iqp-stream{color:#fff;-webkit-animation:iqp-fs-enlarge .2s ease-out forwards;animation:iqp-fs-enlarge .2s ease-out forwards}.iqp-pop-stream .iqp-txt-stream.selected .iqp-stream{color:#00be06}.iqp-pop-stream .iqp-stream{display:inline-block;height:32px;line-height:32px}.iqp-pop-stream .pw-videoIcon-1080P50,.iqp-pop-stream .pw-videoIcon-free,.iqp-pop-stream .pw-videoIcon-recommend,.iqp-pop-stream .pw-videoIcon-vip{width:32px;height:14px;display:inline-block;background:url(//www.iqiyipic.com/common/fix/iq-player/icon-qp-player.png) no-repeat;background-size:160px auto;position:relative;top:2px;margin-left:2px}.iqp-pop-stream .pw-videoIcon-vip{background-position:0 0}.iqp-pop-stream .pw-videoIcon-free{background-position:-34px 0}.iqp-pop-stream .pw-videoIcon-1080P50{width:54px;height:14px;background-position:-70px 0}.iqp-pop-stream .pw-videoIcon-recommend{background-position:-128px 0}.iqp-pop-stream .pw-videoIcon-vip-ft{background-position:0 -17px}.iqp-pop-stream .pw-videoIcon-free-ft{background-position:-34px -17px}.iqp-pop-stream .pw-videoIcon-recommend-ft{background-position:-128px -17px}.iqp-pop-stream .iqp-ad-box{width:120px;height:58px;margin-top:6px;overflow:hidden;display:inline-block;cursor:default;position:relative}.iqp-pop-stream .iqp-ad-box .iqp-ad-txt{width:28px;height:15px;border-radius:2px;background:#383838;color:#999;font-size:10px;text-align:center;line-height:14px;display:block;position:absolute;top:0;left:0}.iqp-pop-stream .iqp-ad-box .iqp-ad-img{width:100%}.iqp-pop-keyboard{position:absolute;top:50%;left:50%;margin-top:-50px;margin-left:-50px;z-index:1;width:100px;height:100px;line-height:100px;font-size:0;text-align:center;border-radius:50%;background-color:transparent;pointer-events:none;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.iqp-pop-keyboard .iqp-icon{vertical-align:middle}.iqp-pop-keyboard.iqp-pop-fasttrend{margin-left:-80px;width:160px;height:100px;line-height:normal;border-radius:10px;background-color:rgba(0,0,0,.7);display:block}.iqp-pop-keyboard.iqp-pop-fasttrend .iqp-icon{width:40px;height:23px;margin-top:26px;margin-bottom:8px}.iqp-pop-keyboard.iqp-pop-fasttrend .iqp-icon-fasttrend{margin-left:2px}.iqp-pop-keyboard.iqp-pop-fasttrend .iqp-icon-backward{margin-right:2px}.iqp-pop-keyboard.iqp-pop-fasttrend .iqp-time-fasttrend{font-size:16px}.iqp-pop-keyboard.iqp-keyboard-ani{-webkit-animation:iqp-keyboard-bg .6s linear 1 normal forwards;animation:iqp-keyboard-bg .6s linear 1 normal forwards;-webkit-transform-origin:center center;transform-origin:center center}.iqp-pop-keyboard.iqp-keyboard-ani .iqp-icon,.iqp-pop-keyboard.iqp-keyboard-ani .iqp-time-fasttrend{-webkit-animation:iqp-keyboard-icon .6s linear 1 normal forwards;animation:iqp-keyboard-icon .6s linear 1 normal forwards;-webkit-transform-origin:center center;transform-origin:center center}.iqp-pop-keyboard .iqp-icon-pause,.iqp-pop-keyboard .iqp-icon-play{width:28px;height:28px}.iqp-pop-keyboard .iqp-icon-link{width:32px;height:32px}.iqp-pop-keyboard .iqp-icon-voice,.iqp-pop-keyboard .iqp-icon-voice-status{width:28px;height:28px}.iqp-pop-keyboard .iqp-icon-voice{margin-right:-10px}.iqp-pop-keyboard .iqp-icon-backward,.iqp-pop-keyboard .iqp-icon-fasttrend{width:40px;height:23px}@-webkit-keyframes iqp-keyboard-bg{0%{-webkit-transform:scale(.5);transform:scale(.5)}12.5%{-webkit-transform:scale(1);transform:scale(1)}33%{background-color:rgba(0,0,0,.4)}to{-webkit-transform:scale(1.3);transform:scale(1.3);background-color:transparent}}@keyframes iqp-keyboard-bg{0%{-webkit-transform:scale(.5);transform:scale(.5)}12.5%{-webkit-transform:scale(1);transform:scale(1)}33%{background-color:rgba(0,0,0,.4)}to{-webkit-transform:scale(1.3);transform:scale(1.3);background-color:transparent}}@-webkit-keyframes iqp-keyboard-icon{0%{opacity:0;-webkit-transform:scale(1);transform:scale(1)}12.5%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-keyboard-icon{0%{opacity:0;-webkit-transform:scale(1);transform:scale(1)}12.5%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(1);transform:scale(1)}}.iqp-contrl-tip{font-size:12px;padding:3px 6px;border-radius:3px;background-color:rgba(0,0,0,.8);text-align:center;white-space:nowrap;position:absolute;bottom:44px;z-index:100}.iqp-contrl-tip.iqp-tip-ani{-webkit-animation:iqp-tip-ani .4s ease forwards;animation:iqp-tip-ani .4s ease forwards}@-webkit-keyframes iqp-tip-ani{0%{opacity:0}to{opacity:1;bottom:49px}}@keyframes iqp-tip-ani{0%{opacity:0}to{opacity:1;bottom:49px}}.iqp-center-tip{position:absolute;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:40px;padding:0 10px 0 15px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:59px;border-radius:5px;background-color:rgba(0,0,0,.7);font-size:0;z-index:10}.iqp-center-tip .iqp-center-tip-txt{font-size:14px}.iqp-center-tip .iqp-icon-close{box-sizing:content-box;width:10px;height:10px;padding:5px;margin-left:10px;cursor:pointer}.iqp-barrage-con{border:2px solid #fff;padding-right:22px;cursor:pointer}.barrage-item-avatar{border-radius:50%}.danmaku-item{display:inline-block;white-space:nowrap}.iqp-barrage-system{position:absolute;top:130px;left:200px}.iqp-barrage-system .system_barrageInner{position:relative;height:35px}.iqp-barrage-system .ststem_barLeft{position:absolute;left:0;top:0;z-index:5;width:35px;height:35px;border-radius:50%;background:#1db614;background-repeat:no-repeat;background-size:cover}.iqp-barrage-system .ststem_barRight{display:inline-block;width:24px;height:18px;background-position:-240px -90px;position:absolute;bottom:0;right:5px}.iqp-barrage-system .ststem_barCon{font-size:14px;height:28px;line-height:28px;border:1px solid #1db614;border-radius:30px;position:absolute;left:4px;top:5px;padding-left:42px;padding-right:40px;background:rgba(0,0,0,.4);z-index:1}.iqp-barrage-system .systemBar_conTxt{float:left;color:#fff}.iqp-barrage-system .sysBar_20 .system_barrageInner{height:46px}.iqp-barrage-system .sysBar_20 .ststem_barLeft{width:46px;height:46px}.iqp-barrage-system .sysBar_20 .ststem_barCon{height:36px;line-height:36px;font-size:20px;padding-left:47px;padding-right:50px;left:10px;top:8px}.iqp-barrage-system .sysBar_20 .ststem_barRight{width:30px;height:25px;background-position:-270px -90px}.iqp-barrage-system .sysBar_20 .system_noClick{padding-right:20px}.iqp-barrage-system .sysBar_30 .system_barrageInner{height:62px}.iqp-barrage-system .sysBar_30 .ststem_barLeft{width:62px;height:62px}.iqp-barrage-system .sysBar_30 .ststem_barCon{height:52px;line-height:52px;font-size:30px;padding-left:68px;padding-right:62px;top:8px}.iqp-barrage-system .sysBar_30 .ststem_barRight{width:43px;height:37px;background-position:-310px -90px;right:7px}.iqp-barrage-system .sysBar_30 .system_noClick{padding-right:22px}.iqp-barrage-system .system_noClick{padding-right:20px}.iqp-barrage-system .system_barPop{background:rgba(0,0,0,.2);padding:3px;border-radius:6px;width:372px;height:304px}.iqp-barrage-report{position:absolute;top:0;right:0;bottom:0;left:0}.iqp-barrage-report .report_loveAdd{width:52px;height:21px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/report_loveAdd.png) no-repeat}.iqp-barrage-report .report_love2{width:23px;height:20px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/report_love2.png) no-repeat}@-webkit-keyframes report_like{0%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg);opacity:.5;left:11px}44%{-webkit-transform:rotate(5deg);transform:rotate(5deg);bottom:4px;left:0;width:52px;height:21px}48%{-webkit-transform:rotate(10deg);transform:rotate(10deg);bottom:8px;opacity:.9;left:.6px;width:52px;height:21px}52%{-webkit-transform:rotate(12deg);transform:rotate(12deg);bottom:10px;opacity:.825;left:2px;width:52px;height:21px}56%{-webkit-transform:rotate(14deg);transform:rotate(14deg);bottom:14px;opacity:.75;left:4px;width:52px;height:21px}60%{-webkit-transform:rotate(16deg);transform:rotate(16deg);bottom:16px;opacity:.675;left:6px;width:52px;height:21px}64%{-webkit-transform:rotate(18deg);transform:rotate(18deg);bottom:18px;opacity:.6;left:8px;width:52px;height:21px}68%{-webkit-transform:rotate(20deg);transform:rotate(20deg);bottom:20px;opacity:.5;left:10px;width:52px;height:21px}76%{-webkit-transform:rotate(8deg);transform:rotate(8deg);bottom:26px;opacity:.3;left:9px;width:52px;height:21px}99%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg);bottom:40px;opacity:.06;left:4px;width:52px;height:21px}to{-webkit-transform:rotate(0deg);transform:rotate(0deg);bottom:0;opacity:0;left:0;width:40px;height:16px}}@keyframes report_like{0%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg);opacity:.5;left:11px}44%{-webkit-transform:rotate(5deg);transform:rotate(5deg);bottom:4px;left:0;width:52px;height:21px}48%{-webkit-transform:rotate(10deg);transform:rotate(10deg);bottom:8px;opacity:.9;left:.6px;width:52px;height:21px}52%{-webkit-transform:rotate(12deg);transform:rotate(12deg);bottom:10px;opacity:.825;left:2px;width:52px;height:21px}56%{-webkit-transform:rotate(14deg);transform:rotate(14deg);bottom:14px;opacity:.75;left:4px;width:52px;height:21px}60%{-webkit-transform:rotate(16deg);transform:rotate(16deg);bottom:16px;opacity:.675;left:6px;width:52px;height:21px}64%{-webkit-transform:rotate(18deg);transform:rotate(18deg);bottom:18px;opacity:.6;left:8px;width:52px;height:21px}68%{-webkit-transform:rotate(20deg);transform:rotate(20deg);bottom:20px;opacity:.5;left:10px;width:52px;height:21px}76%{-webkit-transform:rotate(8deg);transform:rotate(8deg);bottom:26px;opacity:.3;left:9px;width:52px;height:21px}99%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg);bottom:40px;opacity:.06;left:4px;width:52px;height:21px}to{-webkit-transform:rotate(0deg);transform:rotate(0deg);bottom:0;opacity:0;left:0;width:40px;height:16px}}@-webkit-keyframes report_likeMore{0%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg);opacity:.5;left:11px}44%{-webkit-transform:rotate(5deg);transform:rotate(5deg);left:0;width:24px;height:21px}48%{-webkit-transform:rotate(10deg);transform:rotate(10deg);bottom:8px;opacity:.9;left:.6px;width:24px;height:21px}52%{-webkit-transform:rotate(12deg);transform:rotate(12deg);bottom:10px;opacity:.825;left:2px;width:24px;height:21px}56%{-webkit-transform:rotate(14deg);transform:rotate(14deg);bottom:14px;opacity:.75;left:4px;width:24px;height:21px}60%{-webkit-transform:rotate(16deg);transform:rotate(16deg);bottom:16px;opacity:.675;left:6px;width:24px;height:21px}64%{-webkit-transform:rotate(18deg);transform:rotate(18deg);bottom:18px;opacity:.6;left:8px;width:24px;height:21px}68%{-webkit-transform:rotate(20deg);transform:rotate(20deg);bottom:20px;opacity:.5;left:10px;width:24px;height:21px}76%{-webkit-transform:rotate(8deg);transform:rotate(8deg);bottom:26px;opacity:.3;left:9px;width:24px;height:21px}99%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg);bottom:40px;opacity:.16;left:4px;width:24px;height:21px}to{-webkit-transform:rotate(0deg);transform:rotate(0deg);bottom:0;opacity:0;left:0;width:18px;height:16px}}@keyframes report_likeMore{0%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg);opacity:.5;left:11px}44%{-webkit-transform:rotate(5deg);transform:rotate(5deg);left:0;width:24px;height:21px}48%{-webkit-transform:rotate(10deg);transform:rotate(10deg);bottom:8px;opacity:.9;left:.6px;width:24px;height:21px}52%{-webkit-transform:rotate(12deg);transform:rotate(12deg);bottom:10px;opacity:.825;left:2px;width:24px;height:21px}56%{-webkit-transform:rotate(14deg);transform:rotate(14deg);bottom:14px;opacity:.75;left:4px;width:24px;height:21px}60%{-webkit-transform:rotate(16deg);transform:rotate(16deg);bottom:16px;opacity:.675;left:6px;width:24px;height:21px}64%{-webkit-transform:rotate(18deg);transform:rotate(18deg);bottom:18px;opacity:.6;left:8px;width:24px;height:21px}68%{-webkit-transform:rotate(20deg);transform:rotate(20deg);bottom:20px;opacity:.5;left:10px;width:24px;height:21px}76%{-webkit-transform:rotate(8deg);transform:rotate(8deg);bottom:26px;opacity:.3;left:9px;width:24px;height:21px}99%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg);bottom:40px;opacity:.16;left:4px;width:24px;height:21px}to{-webkit-transform:rotate(0deg);transform:rotate(0deg);bottom:0;opacity:0;left:0;width:18px;height:16px}}.iqp-report-pop{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;width:120px;height:110px;background:rgba(31,31,31,.9);border-radius:10px;font-size:16px;color:#fff}.iqp-report-pop .report_yIcon{width:48px;height:48px;display:inline-block;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/report_Yicon.png) no-repeat;margin-top:20px}.iqp-report-window{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:0;width:480px;height:350px;background:#fff;border:2px solid #e9e9e9}.iqp-report-window .report_wInner{border:1px solid #dbdbdb;width:478px;height:348px}.iqp-report-window .report_wHeader{height:38px;line-height:38px;background:#f2f2f2;position:relative;padding-left:20px;font-size:14px;color:#333}.iqp-report-window .report_closeBtn{position:absolute;top:13px;right:20px;width:14px;height:14px;display:block;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/report_closeBtn.png) no-repeat}.iqp-report-window .report_closeBtn:hover{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/report_closeBtnH.png) no-repeat}.iqp-report-window .report_wCon{padding:16px 30px 0}.iqp-report-window .re_top{position:relative;font-size:12px;color:#333}.iqp-report-window .re_top span{color:#000}.iqp-report-window .re_dmlyLink{position:absolute;right:0;font-size:12px;color:#00be06}.iqp-report-window .re_dmlyLink:hover{color:#00be06}.iqp-report-window .re_txt{font-size:12px;color:#666;margin-top:2px}.iqp-report-window .re_rebox{float:left;margin-bottom:10px;width:418px}.iqp-report-window .reBox_item{float:left;width:126px;margin-bottom:10px}.iqp-report-window .reItemW2{width:107px}.iqp-report-window .reItemW3{width:112px}.iqp-report-window .reItemW4{width:70px}.iqp-report-window .re_rideo{font-size:12px;color:#666!important;line-height:16px;display:block;height:16px}.iqp-report-window .re_rideo i{width:16px;height:16px;display:inline-block;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/re_rideoIcon.png) no-repeat;vertical-align:-3px;margin-right:6px}.iqp-report-window .re_rideo i:hover{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/re_rideoIconH.png) no-repeat}.iqp-report-window .re_rideo.selected i{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/re_rideoIconS.png) no-repeat;color:#666!important}.iqp-report-window .re_title{margin-top:10px;font-size:12px;color:#000;margin-bottom:7px;clear:both}.iqp-report-window .re_textareaBox{width:420px;height:60px;border:1px solid #ddd;padding:4px 5px;position:relative;margin-bottom:20px}.iqp-report-window .re_textarea{font-size:12px;color:#333;width:100%;height:50px;border:0;outline:none;resize:none}.iqp-report-window .re_text{position:absolute;bottom:0;right:5px;font-size:12px;color:#999}.iqp-report-window .re_btnBox{text-align:center}.iqp-report-window .re_btnBox .re_cancelBtn,.iqp-report-window .re_btnBox .re_submitBtn,.iqp-report-window .re_btnBox a{width:100px;height:30px;line-height:30px;box-sizing:border-box;font-size:14px;color:#999;border-radius:3px;border:1px solid #999;display:inline-block;background:#fff}.iqp-report-window .re_btnBox .re_submitBtn{border:1px solid #00be06;color:#fff;background:#00be06;margin-right:40px}.iqp-report-window .re_btnBox .re_submitBtn:hover{border:1px solid #00c806;background:#00c806;color:#fff}.iqp-report-window .re_cancelBtn:hover{border:1px solid #00c806;color:#00c806}.iqp-report-btn{position:absolute}.iqp-report-btn .report_btnInner{background:#eeeef2;border:1px solid #666;border-radius:6px;width:88px;height:69px;line-height:34px}.iqp-report-btn .reportBtn_arrowWrap{position:absolute}.iqp-report-btn .reportBtn_arrow,.iqp-report-btn .reportBtn_arrowInner{position:absolute;width:0;height:0;overflow:hidden;font-size:0;line-height:0}.iqp-report-btn .report_btnLink{font-size:18px;color:#666;display:block;text-align:center}.iqp-report-btn .report_btnLink:hover{color:#5aa700}.iqp-report-btn .report_btnLink:hover .report_icon{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/reportH_icon.png) no-repeat}.iqp-report-btn .report_icon{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/report_icon.png) no-repeat;width:22px;height:20px;display:inline-block;vertical-align:-4px;margin-right:5px}.iqp-report-btn .report_dz{border-bottom:1px solid #ccc}.iqp-report-btn .report_dz .report_icon{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/report_zanIcon.png) no-repeat;width:19px;height:19px}.iqp-report-btn .report_dz:hover .report_icon{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/report_zanIconH.png) no-repeat}.iqp-report-btn .reportBtn_top{top:0;left:50%;margin-left:-8px}.iqp-report-btn .reportBtn_top .reportBtn_arrow{border:8px dashed transparent;border-bottom:8px solid #666;bottom:0}.iqp-report-btn .reportBtn_top .reportBtn_arrowInner{border:8px dashed transparent;border-bottom:8px solid #eeeef2;bottom:-1px}.iqp-report-btn .reportBtn_topL{top:0;left:12px}.iqp-report-btn .reportBtn_topL .reportBtn_arrow{border:8px dashed transparent;border-bottom:8px solid #666;bottom:0}.iqp-report-btn .reportBtn_topL .reportBtn_arrowInner{border:8px dashed transparent;border-bottom:8px solid #eeeef2;bottom:-1px}.iqp-report-btn .reportBtn_topR{top:0;right:30px}.iqp-report-btn .reportBtn_topR .reportBtn_arrow{border:8px dashed transparent;border-bottom:8px solid #666;bottom:0}.iqp-report-btn .reportBtn_topR .reportBtn_arrowInner{border:8px dashed transparent;border-bottom:8px solid #eeeef2;bottom:-1px}.iqp-report-btn .reportBtn_bottom{bottom:0;left:50%;margin-left:-8px}.iqp-report-btn .reportBtn_bottom .reportBtn_arrow{border:8px dashed transparent;border-top:8px solid #666;top:0}.iqp-report-btn .reportBtn_bottom .reportBtn_arrowInner{border:8px dashed transparent;border-top:8px solid #eeeef2;top:-1px}.iqp-report-btn .reportBtn_bottomL{bottom:0;left:12px}.iqp-report-btn .reportBtn_bottomL .reportBtn_arrow{border:8px dashed transparent;border-top:8px solid #666;top:0}.iqp-report-btn .reportBtn_bottomL .reportBtn_arrowInner{border:8px dashed transparent;border-top:8px solid #eeeef2;top:-1px}.iqp-report-btn .reportBtn_bottomR{bottom:0;right:30px}.iqp-report-btn .reportBtn_bottomR .reportBtn_arrow{border:8px dashed transparent;border-top:8px solid #666;top:0}.iqp-report-btn .reportBtn_bottomR .reportBtn_arrowInner{border:8px dashed transparent;border-top:8px solid #eeeef2;top:-1px}.iqp-barrage-notice{background:rgba(0,0,0,.2);padding:3px;border-radius:6px;width:378px;height:310px}.iqp-barrage-notice .system_barPopInner{background:#fff;width:100%;height:100%;border-radius:6px}.iqp-barrage-notice .systemBar_top{background:#15c004;border-radius:6px 6px 0 0;width:100%;height:40px;position:relative}.iqp-barrage-notice .pw_videoIcon{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/icon-all.png)!important}.iqp-barrage-notice .systemBar_titleIcon{display:block;width:52px;height:40px;float:left;margin-left:12px;background-position:-180px -69px}.iqp-barrage-notice .systemBar_title{overflow:hidden;font-size:15px;color:#fff;padding-left:5px;line-height:36px;border-top:2px solid #37c401;border-bottom:2px solid #37c401;border-right:2px solid #37c401;border-radius:0 6px 0 0;background:#25a914}.iqp-barrage-notice .systemBar_close{display:block;width:32px;height:33px;position:absolute;top:2px;right:2px;background-position:-232px -57px}.iqp-barrage-notice .systemBar_close:hover{background-position:-264px -57px}.iqp-barrage-notice .systemBar_con{text-align:center}.iqp-barrage-notice .systemBar_img{width:310px;height:190px;overflow:hidden;display:inline-block;margin-top:14px;margin-bottom:10px;border-radius:3px}.iqp-barrage-notice .systemBar_img img{width:100%;height:100%}.iqp-barrage-notice .systemBar_conTitle{display:none;height:24px;line-height:24px;overflow:hidden;font-size:18px;color:#333;width:100%}.iqp-barrage-notice .systemBar_titleInfo{display:none;height:20px;line-height:20px;overflow:hidden;font-size:15px;color:#999;width:100%;margin-top:4px;margin-bottom:15px}.iqp-barrage-notice .systemBar_btn{display:inline-block;width:110px;height:36px;line-height:36px;font-size:15px;color:#fff;background:#00be06;border-radius:5px}.iqp-barrage-notice .systemBar_btn:hover{background:#00c806}.iqp-subtitle{width:100%;position:absolute;left:0;right:0;bottom:0}.iqp-subtitle .plugin_inner{text-align:center;color:#fff;margin:0 auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.iqp-subtitle .plugin_ch{font-family:\\\\9ED1\\4F53;overflow:hidden;text-shadow:1px 0 0 #000,-2px 2px 2px #000,0 1px 0 #000,0 -1px 0 #000}.iqp-subtitle .plugin_ch .plugin_eng{font-family:Helvetica}.iqp-box-integral{text-align:center;color:#fff}.iqp-box-integral .iqp-integral-inner{width:230px;height:84px;position:absolute;right:5px;bottom:62px;background-color:rgba(0,0,0,.8);border-radius:5px;box-shadow:0 2px 5px 0 rgba(0,0,0,.15);-webkit-animation:iqp-integral .7s ease;animation:iqp-integral .7s ease;z-index:97}.iqp-box-integral .iqp-integral-inner.iqp-integral-oneline{width:212px;height:40px}.iqp-box-integral .iqp-integral-inner.iqp-integral-oneline .iqp-integral-close{top:15px;right:10px}.iqp-box-integral .iqp-integral-inner.iqp-integral-oneline .iqp-integral-txt{margin-left:-20px;padding-top:0}.iqp-box-integral .iqp-integral-inner .iqp-integral-close{position:absolute;top:5px;right:5px;width:10px;height:10px;opacity:.8;cursor:pointer}.iqp-box-integral .iqp-integral-inner .iqp-integral-close:hover{color:#00be06}.iqp-box-integral .iqp-integral-inner .iqp-integral-txt{font-size:12px;line-height:40px;padding-top:10px;opacity:.8;color:#fff}.iqp-box-integral .iqp-integral-inner .iqp-integral-btn{border:2px solid #00be06;height:24px;line-height:22px;border-radius:12px;color:#00be06;width:74px;display:inline-block}.iqp-box-integral .iqp-integral-inner .iqp-integral-btn:hover{color:#fff;background:#00be06}@-webkit-keyframes iqp-integral{0%{right:-213px}to{right:5px}}@keyframes iqp-integral{0%{right:-213px}to{right:5px}}.iqp-ani-integral{width:106px;height:106px;position:absolute;right:30px;bottom:75px;z-index:97;-webkit-animation:integral-ani-all .1s linear forwards 8s;animation:integral-ani-all .1s linear forwards 8s;-webkit-transform-origin:center center;transform-origin:center center}.iqp-ani-integral:after{content:"";width:106px;height:106px;border-radius:50%;border:2px solid #16e01b;box-sizing:border-box;display:block;opacity:0;-webkit-animation:integral-ani-circle .48s linear forwards .56s;animation:integral-ani-circle .48s linear forwards .56s}.iqp-ani-integral .iqp-integral-bg{width:94px;height:94px;border-radius:50%;background:rgba(0,255,0,.2);font-size:0;margin:6px;float:left;-webkit-animation:integral-ani-bg 8s linear forwards;animation:integral-ani-bg 8s linear forwards}.iqp-ani-integral .iqp-integral-bg:after{content:"";width:10px;height:10px;border-radius:50%;background:linear-gradient(0deg,#16e01b 33%,#0f9 66%);opacity:0;-webkit-animation:integral-ani-round 2.8s linear forwards 1.08s;animation:integral-ani-round 2.8s linear forwards 1.08s;display:block;margin-top:10px;margin-left:6px;-webkit-transform-origin:42px 36px;transform-origin:42px 36px}.iqp-ani-integral .iqp-integral-aniin{width:84px;height:84px;border-radius:50%;background:linear-gradient(0deg,#00c000,#16e01b 75%);margin:5px;float:left}.iqp-ani-integral .iqp-integral-aniin:after{content:"";width:5px;height:5px;border-radius:50%;background:linear-gradient(0deg,#16e01b 33%,#0f9 66%);opacity:0;-webkit-animation:integral-ani-round 2.8s linear forwards 1.08s;animation:integral-ani-round 2.8s linear forwards 1.08s;display:block;margin-top:20px;margin-left:82px;-webkit-transform-origin:-40px 23px;transform-origin:-40px 23px}.iqp-ani-integral .iqp-integral-anicon{width:100%;line-height:26px;padding-top:14px;font-size:16px;float:left;text-align:center;-webkit-animation:integral-ani-con 8s linear forwards;animation:integral-ani-con 8s linear forwards;opacity:0}.iqp-ani-integral .iqp-integral-anitxt{font-size:14px;color:#fff}@-webkit-keyframes integral-ani-all{0%{width:106px}to{width:0}}@keyframes integral-ani-all{0%{width:106px}to{width:0}}@-webkit-keyframes integral-ani-bg{0%{-webkit-transform:scale(0);transform:scale(0)}5%{-webkit-transform:scale(1);transform:scale(1)}50%{margin-top:6px}52%{margin-top:2px}54%{margin-top:10px}56%{margin-top:3px}58%{margin-top:9px}60%{margin-top:4px}62%{-webkit-transform:scale(1);transform:scale(1);margin-top:6px}64%,to{-webkit-transform:scale(0);transform:scale(0)}}@keyframes integral-ani-bg{0%{-webkit-transform:scale(0);transform:scale(0)}5%{-webkit-transform:scale(1);transform:scale(1)}50%{margin-top:6px}52%{margin-top:2px}54%{margin-top:10px}56%{margin-top:3px}58%{margin-top:9px}60%{margin-top:4px}62%{-webkit-transform:scale(1);transform:scale(1);margin-top:6px}64%,to{-webkit-transform:scale(0);transform:scale(0)}}@-webkit-keyframes integral-ani-con{0%,5%{opacity:0}8%,63%{opacity:1}64%,to{opacity:0}}@keyframes integral-ani-con{0%,5%{opacity:0}8%,63%{opacity:1}64%,to{opacity:0}}@-webkit-keyframes integral-ani-round{0%{opacity:1;-webkit-transform:rotate(-1turn);transform:rotate(-1turn)}to{opacity:1;border-radius:50%}}@keyframes integral-ani-round{0%{opacity:1;-webkit-transform:rotate(-1turn);transform:rotate(-1turn)}to{opacity:1;border-radius:50%}}@-webkit-keyframes integral-ani-circle{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}20%{-webkit-transform:scale(1.01);transform:scale(1.01);opacity:.9}40%{-webkit-transform:scale(1.02);transform:scale(1.02);opacity:.7}60%{-webkit-transform:scale(1.03);transform:scale(1.03);opacity:.5}80%{-webkit-transform:scale(1.01);transform:scale(1.01);opacity:.3}to{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}@keyframes integral-ani-circle{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}20%{-webkit-transform:scale(1.01);transform:scale(1.01);opacity:.9}40%{-webkit-transform:scale(1.02);transform:scale(1.02);opacity:.7}60%{-webkit-transform:scale(1.03);transform:scale(1.03);opacity:.5}80%{-webkit-transform:scale(1.01);transform:scale(1.01);opacity:.3}to{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}.iqp-layer-error{font-size:14px;line-height:32px}.iqp-layer-error .iqp-layer-main{font-size:16px;padding-bottom:8px}.iqp-layer-error .iqp-layer-btn{display:inline-block;vertical-align:top;letter-spacing:0;padding:0 18px;margin:9px auto 6px;height:36px;line-height:36px;border-radius:18px;background-color:#00be06;color:#fff;text-align:center}.iqp-layer-error .iqp-txt-link,.iqp-layer-error .iqp-txt-link:hover,.iqp-layer-error .iqp-txt-link:visited{color:#999}.iqp-layer-error .iqp-error-code{position:absolute;display:inline-block;right:20px;bottom:11px;color:#999}.iqp-layer-error .iqp-panel-code{margin:8px 0 18px}.iqp-layer-error .iqp-panel-code .iqp-code-img{width:80px;height:80px;margin-bottom:12px}.iqp-layer-error .iqp-error-title{font-size:18px;color:#fff;line-height:26px}.iqp-player-pc .iqp-layer-error .iqp-layer-btn:hover{background-color:#00c806}.iqp-player-pc .iqp-layer-error .iqp-layer-btn:active{background-color:#00b606}.iqp-player-mobile .iqp-layer-error{font-size:12px;line-height:24px}.iqp-player-mobile .iqp-layer-error .iqp-layer-main{font-size:12px;padding-bottom:2px}.iqp-player-mobile .iqp-layer-error .iqp-layer-btn{padding:0 13px;margin:7px auto 5px;height:24px;line-height:24px;border-radius:12px}.iqp-player-mobile .iqp-layer-error .iqp-error-code{line-height:16px;right:10px;bottom:7px}@-webkit-keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes iqp-rotate-90{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}@keyframes iqp-rotate-90{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}@-webkit-keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@-webkit-keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@-webkit-keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@-webkit-keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}.iqp-layer-loading .iqp-icon-loading{color:#00be06;width:38px;height:38px;-webkit-animation:iqp-rotate-360 1s infinite;animation:iqp-rotate-360 1s infinite}.iqp-layer-loading.iqp-player_w920 .iqp-icon-loading{width:26px;height:26px}.iqp-player-pc .iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:350px;white-space:normal}.iqp-player-pc .iqp-logo-loading .iqp-logoload-bg{width:350px;height:114px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqp-znqy-loading.gif) no-repeat;margin-bottom:36px;margin-left:auto;margin-right:auto}.iqp-player-pc .iqp-logo-loading .iqp-logoload-line{width:300px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:300px 2px;margin-left:auto;margin-right:auto}.iqp-player-pc .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{width:170px;height:78px;background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png)}.iqp-player-pc .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{width:225px;height:71px;margin-bottom:20px;background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png)}.iqp-player-pc .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-line{width:270px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:auto}.iqp-player-pc .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{width:119px;height:106px;background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png)}.iqp-player-pc .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{width:260px;height:69px;margin-bottom:29px;background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png)}.iqp-down-speed{font-size:14px;color:#ddd;margin-top:26px}.iqp-layer-recommend{font-size:12px;color:#fff;z-index:97!important}.iqp-layer-recommend .iqp-recommend-container{overflow:hidden;position:absolute;top:50%;left:50%}.iqp-layer-recommend .playEndW812{width:812px;margin-left:-406px}.iqp-layer-recommend .playEndW650{width:650px;margin-left:-325px}.iqp-layer-recommend .playEndW486{width:486px;margin-left:-243px}.iqp-layer-recommend .playEndH369{height:369px;margin-top:-205px}.iqp-layer-recommend .playEndH276{height:276px;margin-top:-138px}.iqp-layer-recommend .playEndH183{height:183px;margin-top:-92px}.iqp-layer-recommend .iqp-end-ul{margin-left:-3px;margin-top:-3px}.iqp-layer-recommend .iqp-end-ul .iqp-end-list{width:160px;height:90px;margin-left:3px;margin-top:3px;float:left;overflow:hidden}.iqp-layer-recommend .iqp-end-ul .iqp-end-list:hover .iqp-end-title{display:none}.iqp-layer-recommend .iqp-end-ul .iqp-end-list:hover .iqp-end-titleLong{display:block}.iqp-layer-recommend .iqp-end-ul .iqp-end-bigList{width:323px;height:183px}.iqp-layer-recommend .iqp-end-ul .iqp-end-link{position:relative;display:block;width:100%;height:100%}.iqp-layer-recommend .iqp-end-ul .iqp-end-img{width:100%;height:100%;display:inline-block}.iqp-layer-recommend .iqp-end-ul .iqp-end-title{height:22px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.iqp-layer-recommend .iqp-end-ul .iqp-end-title,.iqp-layer-recommend .iqp-end-ul .iqp-end-titleLong{position:absolute;left:0;right:0;bottom:0;line-height:22px;background:rgba(0,0,0,.7);color:#fff;font-size:12px;padding:0 4px}.iqp-layer-recommend .iqp-end-ul .iqp-end-titleLong{display:none;height:auto}.iqp-pop-next{position:absolute;left:-60px;bottom:45px;width:270px;height:67px;background-color:rgba(26,26,26,.9);display:none}.iqp-pop-next .iqp-play-imgBg{width:120px;height:67px;float:left;background:#141414}.iqp-pop-next .iqp-play-imgBg .iqp-icon-tip{width:24px;height:24px;display:block;margin:22px auto 0;color:#666!important}.iqp-pop-next .iqp-play-imgBg .iqp-play-img{width:100%;height:100%}.iqp-pop-next .iqp-play-title{line-height:19px;font-size:12px;overflow:hidden;color:#fff;padding:0 10px;position:relative;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.iqp-pop-next .iqp-titie-next{color:#00be06;margin-right:6px}.iqp-pop-next.iqp-screen1300{width:498px;height:124px}.iqp-pop-next.iqp-screen1300 .iqp-play-imgBg{width:220px;height:124px}.iqp-pop-next.iqp-screen1300 .iqp-play-imgBg .iqp-icon-tip{width:44px;height:44px;margin:40px auto 0}.iqp-pop-next.iqp-screen1300 .iqp-play-title{line-height:30px;font-size:18px;padding:0 18px}.iqp-pop-set{font-size:14px;width:186px;height:200px;text-align:center;color:#ddd}.iqp-pop-set .iqp-set-con{width:186px;padding:14px 0;background-color:rgba(0,0,0,.8);border-radius:5px;position:absolute;bottom:15px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.iqp-pop-set .iqp-set-item{text-align:left;height:32px;line-height:32px;padding:0 20px}.iqp-pop-set .iqp-set-item:hover .iqp-switch-txt{color:#fff}.iqp-pop-set .iqp-set-item:hover .iqp-switch-close{border:2px solid #fff}.iqp-pop-set .iqp-set-item:hover .iqp-switch-close:before{background:#fff}.iqp-pop-set .iqp-set-item .iqp-set-switch{float:right;margin-top:6px;cursor:pointer;width:35px;height:20px;line-height:18px;border:2px solid #00be06;border-radius:10px;position:relative;padding:0 3px}.iqp-pop-set .iqp-set-item .iqp-set-switch:before{height:12px;width:12px;border-radius:50%;background:#00be06;content:"";display:block;position:absolute;right:3px;top:2px}.iqp-pop-set .iqp-set-item .iqp-switch-close{border:2px solid #aaa;text-align:right}.iqp-pop-set .iqp-set-item .iqp-switch-close:before{left:3px;background:#aaa}.iqp-pop-set .iqp-set-item .iqp-icon.iqp-icon-arrowleft,.iqp-pop-set .iqp-set-item .iqp-icon.iqp-icon-arrowright{width:14px;height:14px;vertical-align:-2px;color:#aaa}.iqp-pop-set .iqp-set-item .iqp-icon.iqp-icon-arrowleft{margin-right:6px}.iqp-pop-set .iqp-set-item .iqp-icon.iqp-icon-arrowright{float:right;margin:8px 0 0 6px}.iqp-pop-set .iqp-set-item .iqp-zimu-val{float:right;color:#999}.iqp-pop-set .iqp-set-item.iqp-set-zimu:hover,.iqp-pop-set .iqp-set-item.iqp-set-zimu:hover .iqp-icon,.iqp-pop-set .iqp-set-item.iqp-set-zimu:hover .iqp-zimu-val,.iqp-pop-set .iqp-set-item.iqp-zimu-title:hover,.iqp-pop-set .iqp-set-item.iqp-zimu-title:hover .iqp-icon,.iqp-pop-set .iqp-set-item.iqp-zimu-title:hover .iqp-zimu-val{color:#fff}.iqp-pop-set .iqp-set-item.iqp-set-zimu.selected,.iqp-pop-set .iqp-set-item.iqp-set-zimu.selected .iqp-icon,.iqp-pop-set .iqp-set-item.iqp-set-zimu.selected .iqp-zimu-val,.iqp-pop-set .iqp-set-item.iqp-zimu-title.selected,.iqp-pop-set .iqp-set-item.iqp-zimu-title.selected .iqp-icon,.iqp-pop-set .iqp-set-item.iqp-zimu-title.selected .iqp-zimu-val{color:#00be06}.iqp-pop-set .iqp-zimu-center{width:120px}.iqp-pop-set .iqp-zimu-center .iqp-set-item{text-align:center}.iqp-pop-set .iqp-zimu-center .iqp-set-item .iqp-icon-arrowleft{margin-left:-20px}.iqp-pop-set .iqp-zimu-title{height:38px;line-height:32px;border-bottom:1px solid #161516;margin-bottom:6px;font-size:0}.iqp-pop-set .iqp-zimu-title .iqp-arrow-tag{font-size:14px}.iqp-pop-voice{font-size:14px;width:39px;height:130px;border-radius:5px;background-color:rgba(0,0,0,.8);text-align:center}.iqp-pop-voice .iqp-voice-value{color:#fff;font-size:12px;padding-top:7px}.iqp-pop-voice .iqp-voice-box{height:94px;width:13px;display:inline-block;position:absolute;left:14px;top:26px;cursor:pointer}.iqp-pop-voice .iqp-voice-box .iqp-play-icon{width:3px;background:#00be06;position:absolute;left:5px;bottom:0;z-index:5;border-radius:2px}.iqp-pop-voice .iqp-voice-box .iqp-voice-btns{background-color:#fff;width:13px;height:10px;border-radius:4px;position:absolute;bottom:5px;z-index:5}.iqp-pop-voice .iqp-voice-box .iqp-voice-btns:hover{box-shadow:0 0 6px 4px hsla(0,0%,100%,.3)}.iqp-pop-voice .iqp-voice-box .iqp-voice-bg{height:94px;width:3px;background:#828282;position:absolute;left:5px;border-radius:2px}.iqp-pop-episode{position:absolute;right:-305px;top:0;bottom:0;font-size:14px;width:305px;background-color:rgba(26,26,26,.95);-webkit-font-smoothing:auto}.iqp-pop-episode .iqp-head-title{height:56px;line-height:56px;position:relative;padding-left:20px;border-bottom:1px solid #2a2929}.iqp-pop-episode .iqp-head-title .iqp-header-link{font-size:18px;color:#fff;display:block;cursor:default;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:30px}.iqp-pop-episode .iqp-head-title .iqp-icon-close{width:13px;height:13px;display:block;position:absolute;top:20px;right:15px;cursor:pointer}.iqp-pop-episode .iqp-head-title .iqp-icon-close:hover{color:#00be06}.iqp-pop-episode.iqp-xuanji-show{-webkit-animation:iqp-xuanji-show .7s ease forwards;animation:iqp-xuanji-show .7s ease forwards}.iqp-pop-episode.iqp-xuanji-hide{-webkit-animation:iqp-xuanji-hide .7s ease forwards;animation:iqp-xuanji-hide .7s ease forwards}@-webkit-keyframes iqp-xuanji-show{0%{right:-305px}to{right:0}}@keyframes iqp-xuanji-show{0%{right:-305px}to{right:0}}@-webkit-keyframes iqp-xuanji-hide{0%{right:0}to{right:-305px}}@keyframes iqp-xuanji-hide{0%{right:0}to{right:-305px}}.iqp-play-list{position:relative;height:calc(100% - 56px)}.iqp-play-list .iqp-list-ul{width:275px;padding-top:20px;position:absolute;left:20px;top:0}.iqp-play-list .iqp-list-item{position:relative;height:65px;margin-bottom:15px}.iqp-play-list .iqp-list-item.selected .iqp-title-link{color:#00be06}.iqp-play-list .iqp-list-item.selected .iqp-img-border{display:block}.iqp-play-list .iqp-list-item .iqp-mod-left{float:left;width:116px;margin-right:10px}.iqp-play-list .iqp-list-item .iqp-img-link{display:block;position:relative}.iqp-play-list .iqp-list-item .iqp-mod-img{width:116px;height:65px}.iqp-play-list .iqp-list-item .iqp-icon-tr{position:absolute;top:2px;right:2px;height:14px}.iqp-play-list .iqp-list-item .iqp-icon-br{position:absolute;bottom:2px;right:2px}.iqp-play-list .iqp-list-item .iqp-mod-label{display:inline-block;font-size:12px;line-height:20px;color:#fff;background:rgba(0,0,0,.6);padding:0 7px;border-radius:10px}.iqp-play-list .iqp-list-item .iqp-img-border{display:none;position:absolute;top:0;left:0;width:116px;height:65px;border:2px solid #00be06}.iqp-play-list .iqp-list-item .iqp-mod-right{overflow:hidden}.iqp-play-list .iqp-list-item .iqp-main-title{max-height:42px;margin-top:3px;overflow:hidden}.iqp-play-list .iqp-list-item .iqp-title-link{font-size:14px;line-height:20px;color:#999}.iqp-play-list .iqp-list-item .iqp-title-link:hover{color:#00be06}.iqp-play-list .iqp-list-item .iqp-sub-title{line-height:14px;margin-top:6px;font-size:0}.iqp-play-list .iqp-list-item .iqp-icon-clock{color:#999;margin-right:4px;vertical-align:top;width:14px;height:14px}.iqp-play-list .iqp-list-item .iqp-count{color:#666;font-size:12px;font-family:Arial}.iqp-play-list .iqp-scroll-bar{background-color:#333;width:7px;height:70px;border-radius:4px;cursor:pointer;position:absolute;top:0;right:3px}.iqp-play-list .iqp-scroll-bar:hover{background-color:#505050}.iqp-pop-speed{width:120px;padding:6px 0;border-radius:5px;text-align:center}.iqp-pop-speed,.iqp-pop-speed .iqp-pop-inner{background-color:rgba(0,0,0,.8)}.iqp-pop-speed .iqp-txt-speed{height:43px;line-height:43px;color:#ddd;font-size:14px}.iqp-pop-speed .iqp-txt-speed:hover{color:#fff;-webkit-animation:iqp-fs-enlarge .2s ease-out forwards;animation:iqp-fs-enlarge .2s ease-out forwards}.iqp-pop-speed .iqp-txt-speed.selected{color:#00be06}.iqp-right-click{width:172px;padding:14px 0;font-size:14px;color:#ddd;position:absolute;top:50%;left:50%;background-color:rgba(26,26,26,.96);border-radius:5px;z-index:3002}.iqp-right-click .iqp-click-item{height:47px;line-height:47px;padding-left:30px;cursor:pointer}.iqp-right-click .iqp-click-item:hover{color:#fff}.iqp-right-click .iqp-click-item.selected{color:#00be06}.iqp-right-click .iqp-click-item .iqp-icon{margin-right:10px;margin-top:14px;float:left}.iqp-right-click .iqp-click-item .iqp-icon-bug{width:18px;height:17px}.iqp-right-click .iqp-click-item .iqp-icon-link{width:18px;height:18px}.iqp-right-click .iqp-click-item .iqp-icon-shortcut{width:20px;height:17px}.iqp-right-click .iqp-click-item .iqp-icon-console{width:20px;height:18px}.iqp-short-cut{padding:36px 25px;font-size:0;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:rgba(26,26,26,.96);border-radius:5px;width:700px;height:448px;overflow:hidden;z-index:101}.iqp-short-cut.iqp-shortcut-nopic{width:420px}.iqp-short-cut .iqp-shortcut-title{margin-left:10px;margin-bottom:16px;font-size:16px;color:#fff}.iqp-short-cut .iqp-icon-close{width:14px;height:14px;position:absolute;top:20px;right:20px;cursor:pointer;color:#ddd}.iqp-short-cut .iqp-icon-close:hover{color:#fff}.iqp-shortcut-info{width:402px;display:inline-block;vertical-align:top;font-size:14px}.iqp-shortcut-info .iqp-shortcut-con{padding:0 15px;height:32px;line-height:32px;display:inline-block;border-radius:14px;margin-bottom:2px;color:#999;cursor:pointer}.iqp-shortcut-info .iqp-shortcut-con .iqp-shortcut-key{color:#fff}.iqp-shortcut-info .iqp-shortcut-con:hover{color:#fff;background-color:#2a2a2a}.iqp-shortcut-info .iqp-shortcut-con:hover .iqp-shortcut-key{color:#00be06}.iqp-shortcut-info .iqp-shortcut-leftlabel{width:174px;display:inline-block}.iqp-shortcut-pic{width:200px;height:238px;line-height:238px;font-size:0;border-radius:8px;background-color:#272727;margin:32px 14px 0 30px;text-align:center;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;float:right}.iqp-shortcut-pic:before{content:"";width:110px;height:110px;display:inline-block;vertical-align:middle;background:url(//www.iqiyipic.com/common/fix/iq-player/iqp-pic-shortcut.png);background-size:440px auto;background-position:0 0}.iqp-shortcut-pic.iqp-pic-num:before{background-position:0 0}.iqp-shortcut-pic.iqp-pic-home:before{background-position:-110px 0}.iqp-shortcut-pic.iqp-pic-speed:before{background-position:-220px 0}.iqp-shortcut-pic.iqp-pic-p:before{background-position:-330px 0}.iqp-shortcut-pic.iqp-pic-space:before{background-position:0 -110px}.iqp-shortcut-pic.iqp-pic-esc:before{background-position:-110px -110px}.iqp-shortcut-pic.iqp-pic-f:before{background-position:-220px -110px}.iqp-shortcut-pic.iqp-pic-m:before{background-position:-330px -110px}.iqp-shortcut-pic.iqp-pic-voice:before{background-position:0 -220px}.iqp-shortcut-pic.iqp-pic-fast:before{background-position:-110px -220px}.bottom-public{position:absolute;bottom:0;height:56px;width:100%;z-index:100}.bottom-public .btn-play{border:10px dashed transparent;border-left:15px solid #ababab;display:inline-block;left:20px;top:10px;position:absolute;outline:none}.bottom-public .btn-pause{display:inline-block;left:20px;top:13px}.bottom-public .btn-pause,.bottom-public .btn-pause:before{position:absolute;height:15px;width:2px;background-color:#ababab}.bottom-public .btn-pause:before{content:"";display:block;left:10px}.bottom-public .bottom-public_play,.bottom-public .bottom-public_voice{background:rgba(26,26,26,.8);width:36px;height:36px;border-radius:50%;position:absolute;text-align:left}.bottom-public .bottom-public_play{left:20px}.bottom-public .bottom-public_play .btn-play{left:12px;top:9px;transition:none;z-index:1}.bottom-public .bottom-public_play .btn-pause{left:12px;top:10px}.bottom-public .bottom-public_play .btn-pause,.bottom-public .bottom-public_play .btn-pause:before{opacity:1;-webkit-transform:scale(1);transform:scale(1)}.bottom-public .bottom-public_play:hover .btn-pause,.bottom-public .bottom-public_play:hover .btn-pause:before{background-color:#00be06}.bottom-public .bottom-public_play:hover .btn-play{border-left-color:#6cc900}.bottom-public .bottom-public_voice{left:74px;text-align:left}.bottom-public .bottom-public_voice i{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/icon-all.png) no-repeat;width:18px;height:14px;position:relative;display:inline-block;top:13px;cursor:pointer;left:5px}.bottom-public .bottom-public_voice .voice-big{left:1px;top:11px;width:26px;background-position:-65px 0!important}.bottom-public .bottom-public_voice .voice-no{left:10px;top:11px;background-position:0 0!important}.bottom-public .bottom-public_voice:hover .voice-big{background-position:-58px -180px!important;left:2px}.bottom-public .know-detail{padding:9px 15px;border-radius:30px;background:rgba(26,26,26,.8);display:block;float:right;color:#fff;margin-right:72px;line-height:18px;font-size:14px}.bottom-public .know-detail:hover{color:#57a900}.bottom-public .public-screen{background:rgba(26,26,26,.8);width:35px;height:35px;border-radius:50%;position:absolute;right:20px;text-align:left}.bottom-public .public-screen i{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/icon-all.png) no-repeat;width:20px;height:20px;display:inline-block;position:relative;top:7px;left:9px}.bottom-public .public-screen:hover .screen-small{background-position:0 -28px}.bottom-public .public-screen:hover .screen-all{background-position:-94px -28px}.bottom-public .public-screen .screen-small{background-position:-34px -28px}.bottom-public .public-screen .screen-all{background-position:-65px -28px}@font-face{font-family:ds-digital;src:url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.eot);src:url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.eot#iefix) format("embedded-opentype"),url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.woff) format("woff"),url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.ttf) format("truetype"),url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.svg#iconfont) format("svg")}',""])},function(e,t,i){t=e.exports=i(59)(void 0),t.push([e.i,'.iqp-player{position:relative;width:100%;height:100%;min-width:230px;overflow:hidden;text-align:left;white-space:normal;background:#000;color:#fff;font:12px/1.5 PingFangSC-Regular,Helvetica,Arial,Microsoft Yahei,sans-serif;z-index:0;user-select:none;outline:none;-webkit-font-smoothing:antialiased}.iqp-player svg{fill:currentColor;overflow:hidden}.iqp-player.iqp-full-screen50 video{width:50%!important;height:50%!important;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.iqp-player.iqp-full-screen75 video{width:75%!important;height:75%!important;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.iqp-player.iqp-web-screen{position:fixed;left:0;top:0;z-index:4201}.iqp-player *,.iqp-player :after,.iqp-player :before{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.iqp-player a,.iqp-player a:hover,.iqp-player a:visited{color:#fff;text-decoration:none!important}.iqp-player :focus,.iqp-player a:active{outline:0 none}.iqp-player img{border:none;vertical-align:top}.iqp-player ol,.iqp-player ul{list-style:none}.iqp-player h1,.iqp-player h2,.iqp-player h3,.iqp-player h4,.iqp-player h5,.iqp-player h6{font-size:100%;font-weight:400}.iqp-player em,.iqp-player i{font-style:normal}.iqp-player strong{font-weight:400}.iqp-player button,.iqp-player input,.iqp-player select,.iqp-player textarea{font-family:inherit;font-size:100%;-webkit-appearance:none}.iqp-player button:focus,.iqp-player input:focus,.iqp-player select:focus,.iqp-player textarea:focus{outline:none}.iqp-player .iqp-hide-controls::-webkit-media-controls-play-button,.iqp-player .iqp-hide-controls::-webkit-media-controls-start-playback-button{display:none!important;-webkit-appearance:none}.iqp-player .iqp-layer{position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;background-color:#000;z-index:100}.iqp-player .iqp-layer-con{position:absolute;width:100%;top:50%;transform:translateY(-50%);text-align:center}.dn{display:none!important}@keyframes iqp-rotate-360{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes iqp-rotate-90{0%{transform:rotate(0deg)}to{transform:rotate(90deg)}}@keyframes iqp-icon-scale{0%{transform:scale(1)}40%{transform:scale(1.2)}50%{transform:scale(1)}60%{transform:scale(1.2)}to{transform:scale(1)}}@keyframes iqp-icon-voice{0%{transform:scale(0)}20%{transform:scale(1.1)}50%{transform:scale(1)}60%{transform:scale(1.1)}to{transform:scale(1)}}@keyframes iqp-icon-screenT{0%{transform:translate(0)}25%{transform:translate(.8px,.6px)}50%{transform:translate(0)}75%{transform:translate(.8px,.6px)}to{transform:translate(0)}}@keyframes iqp-icon-screenB{0%{transform:translate(0)}25%{transform:translate(-.8px,-.6px)}50%{transform:translate(0)}75%{transform:translate(-.8px,-.6px)}to{transform:translate(0)}}@keyframes iqp-icon-screennoT{0%{transform:translate(0)}25%{transform:translate(.6px,.4px)}50%{transform:translate(0)}75%{transform:translate(.6px,.4px)}to{transform:translate(0)}}@keyframes iqp-icon-screennoB{0%{transform:translate(0)}25%{transform:translate(-.6px,-.4px)}50%{transform:translate(0)}75%{transform:translate(-.6px,-.4px)}to{transform:translate(0)}}@keyframes iqp-fasttrend-show{0%{transform:scale(0);background:transparent}to{transform:scale(1);background:rgba(0,0,0,.6)}}@keyframes iqp-fasttrend-hide{0%{transform:scale(1);background:rgba(0,0,0,.6)}99%{transform:scale(1.25);background:transparent}to{transform:scale(0)}}@keyframes iqp-fasttrend-arrow-left{0%,18%{transform:scale(1)}35%{transform:scale(.9)}50%,to{transform:scale(1)}}@keyframes iqp-fasttrend-arrow-right{0%{transform:scale(1)}18%{transform:scale(.9)}50%,to{transform:scale(1)}}@keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@keyframes iqp-translatedown{0%{transform:translateY(0)}to{transform:translateY(56px)}}@keyframes report_like{0%{transform:rotate(-10deg);opacity:.5;left:11px}44%{transform:rotate(5deg);bottom:4px;left:0;width:52px;height:21px}48%{transform:rotate(10deg);bottom:8px;opacity:.9;left:.6px;width:52px;height:21px}52%{transform:rotate(12deg);bottom:10px;opacity:.825;left:2px;width:52px;height:21px}56%{transform:rotate(14deg);bottom:14px;opacity:.75;left:4px;width:52px;height:21px}60%{transform:rotate(16deg);bottom:16px;opacity:.675;left:6px;width:52px;height:21px}64%{transform:rotate(18deg);bottom:18px;opacity:.6;left:8px;width:52px;height:21px}68%{transform:rotate(20deg);bottom:20px;opacity:.5;left:10px;width:52px;height:21px}76%{transform:rotate(8deg);bottom:26px;opacity:.3;left:9px;width:52px;height:21px}99%{transform:rotate(-10deg);bottom:40px;opacity:.06;left:4px;width:52px;height:21px}to{transform:rotate(0deg);bottom:0;opacity:0;left:0;width:40px;height:16px}}@keyframes report_likeMore{0%{transform:rotate(-10deg);opacity:.5;left:11px}44%{transform:rotate(5deg);left:0;width:24px;height:21px}48%{transform:rotate(10deg);bottom:8px;opacity:.9;left:.6px;width:24px;height:21px}52%{transform:rotate(12deg);bottom:10px;opacity:.825;left:2px;width:24px;height:21px}56%{transform:rotate(14deg);bottom:14px;opacity:.75;left:4px;width:24px;height:21px}60%{transform:rotate(16deg);bottom:16px;opacity:.675;left:6px;width:24px;height:21px}64%{transform:rotate(18deg);bottom:18px;opacity:.6;left:8px;width:24px;height:21px}68%{transform:rotate(20deg);bottom:20px;opacity:.5;left:10px;width:24px;height:21px}76%{transform:rotate(8deg);bottom:26px;opacity:.3;left:9px;width:24px;height:21px}99%{transform:rotate(-10deg);bottom:40px;opacity:.16;left:4px;width:24px;height:21px}to{transform:rotate(0deg);bottom:0;opacity:0;left:0;width:18px;height:16px}}.iqp-svg-sprite{display:none;position:absolute;width:0;height:0;overflow:hidden}.iqp-logo-box{position:absolute;width:100%;height:100%;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.iqp-logo-box .iqp-logo-top{position:absolute;top:8%;right:5%;-webkit-animation:logoTopAnimation 240s linear both;animation:logoTopAnimation 240s linear both}.iqp-logo-box .iqp-logo-bottom{position:absolute;bottom:17%;right:20%}.iqp-logo-box .logoShowAnimation{-webkit-animation:iqp-show .5s linear both;animation:iqp-show .5s linear both}.iqp-logo-box .logoHideAnimation{-webkit-animation:iqp-hide .5s linear both;animation:iqp-hide .5s linear both}.iqp-poster{height:100%;top:0;background-size:contain;background-position:50%;background-repeat:no-repeat}.iqp-bottom,.iqp-poster{position:absolute;width:100%}.iqp-bottom{left:0;bottom:0;z-index:1}.iqp-control-tip{width:110px;padding:3px 6px;position:absolute;bottom:58px;font-size:12px;border-radius:2px;background-color:rgba(0,0,0,.8)}.iqp-player-mobile .iqp-bottom,.iqp-player-pad .iqp-bottom{bottom:-1px}.iqp-player-pc .iqp-bottom{z-index:99}.iqp-player-pc .iqp-bottom-hide{-webkit-animation:iqp-translatedown .2s forwards;animation:iqp-translatedown .2s forwards}.iqp-player-pc .iqp-process-hidden .iqp-progress{bottom:0}.iqp-player-pc .iqp-process-hidden .iqp-contrl{display:none}.iqp-player-pc .iqp-process-hidden .iqp-contrl-tip{bottom:3px}.iqp-player-pc .iqp-progress__hover .iqp-filter{bottom:57px}.iqp-player-pc .iqp-progress__hover .iqp-filter .iqp-filter-tip{z-index:122}.iqp-player-pc .iqp-progress__hover .iqp-contrl-tip{bottom:58px}.iqp-layer-error{font-size:14px;line-height:32px}.iqp-layer-error .iqp-layer-main{font-size:16px;padding-bottom:8px}.iqp-layer-error .iqp-layer-btn{display:inline-block;vertical-align:top;letter-spacing:0;padding:0 18px;margin:9px auto 6px;height:36px;line-height:36px;border-radius:18px;background-color:#00be06;color:#fff;text-align:center}.iqp-layer-error .iqp-txt-link,.iqp-layer-error .iqp-txt-link:hover,.iqp-layer-error .iqp-txt-link:visited{color:#999}.iqp-layer-error .iqp-error-code{position:absolute;display:inline-block;right:20px;bottom:11px;color:#999}.iqp-layer-error .iqp-panel-code{margin:8px 0 18px}.iqp-layer-error .iqp-panel-code .iqp-code-img{width:80px;height:80px;margin-bottom:12px}.iqp-layer-error .iqp-error-title{font-size:18px;color:#fff;line-height:26px}.iqp-player-pc .iqp-layer-error .iqp-layer-btn:hover{background-color:#00c806}.iqp-player-pc .iqp-layer-error .iqp-layer-btn:active{background-color:#00b606}.iqp-player-mobile .iqp-layer-error{font-size:12px;line-height:24px}.iqp-player-mobile .iqp-layer-error .iqp-layer-main{font-size:12px;padding-bottom:2px}.iqp-player-mobile .iqp-layer-error .iqp-layer-btn{padding:0 13px;margin:7px auto 5px;height:24px;line-height:24px;border-radius:12px}.iqp-player-mobile .iqp-layer-error .iqp-error-code{line-height:16px;right:10px;bottom:7px}.iqp-layer-loading{text-align:center;font-size:14px;color:#999}.iqp-layer-loading .iqp-gif-loading{display:inline-block;vertical-align:middle;width:24px;height:24px;margin-right:10px;background:url(//www.iqiyipic.com/common/fix/iq-player/loading.gif) no-repeat}.iqp-player-mobile .iqp-layer-loading{font-size:12px}.iqp-player-mobile .iqp-gif-loading{width:18px;height:18px;margin-right:5px;background-size:18px 18px}.iqp-btn-mid{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);cursor:pointer;z-index:1}.iqp-btn-mid.iqp-btn-hide{-webkit-animation:iqp-hide .15s ease-in-out both;animation:iqp-hide .15s ease-in-out both}.iqp-btn-mid .iqp-mid-circle{width:70px;height:70px;border-radius:50%;background-color:rgba(0,0,0,.6)}.iqp-btn-mid .iqp-mid-rt{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:114px;height:60px;border-radius:5px;background-color:rgba(0,0,0,.6);font-size:0}.iqp-btn-mid .iqp-mid-rt .iqp-icon{position:relative;top:auto;left:auto;-webkit-transform:none;-ms-transform:none;transform:none}.iqp-btn-mid .iqp-icon{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.iqp-btn-mid .iqp-icon-stop{width:27px;height:27px;margin-left:3px}.iqp-btn-mid .iqp-icon-loading{width:41px;height:41px}.iqp-btn-mid .iqp-mid-loading{width:100%;height:100%;-webkit-animation:iqp-rotate-360 1s linear infinite;animation:iqp-rotate-360 1s linear infinite}.iqp-btn-mid .iqp-icon-replay{width:28px;height:28px;margin-right:10px}.iqp-btn-mid .iqp-mid-txt{font-size:18px}.iqp-player-mobile .iqp-btn-mid .iqp-mid-circle{width:52px;height:52px}.iqp-player-mobile .iqp-btn-mid .iqp-mid-rt{width:85.5px;height:45px;border-radius:4px}.iqp-player-mobile .iqp-btn-mid .iqp-icon-stop{width:20px;height:20px;margin-left:2px}.iqp-player-mobile .iqp-btn-mid .iqp-icon-loading{width:30px;height:30px}.iqp-player-mobile .iqp-btn-mid .iqp-icon-replay{width:20px;height:21px;margin-right:7.5px}.iqp-player-mobile .iqp-btn-mid .iqp-mid-txt{font-size:14px}.iqp-player-mobile .iqp-tip-stream{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:255px;height:31px;padding-left:10px;font-size:0;background-image:linear-gradient(90deg,rgba(0,0,0,.9),rgba(0,0,0,.9) 45%,rgba(0,0,0,.16) 90%,transparent);bottom:-6px}.iqp-player-mobile .iqp-tip-stream.iqp-tip-fixed{position:absolute;bottom:43px}.iqp-player-mobile .iqp-tip-stream .iqp-stream-switch{font-size:12px}.iqp-player-mobile .iqp-tip-stream .iqp-stream-switch .em,.iqp-player-mobile .iqp-tip-stream .iqp-txt-selected{color:#00be06}.iqp-player-mobile .iqp-tip-stream .iqp-stream-close{margin-left:9px;font-size:22px;cursor:pointer;font-family:Arial,Microsoft Yahei}.iqp-player-mobile .iqp-progress{position:relative;width:72%;padding:6px 0 7px;margin:0 auto 4px;cursor:pointer;z-index:1}.iqp-player-mobile .iqp-progress .iqp-progress-bar{position:relative;width:100%;height:2px;background-color:hsla(0,0%,100%,.25);cursor:pointer}.iqp-player-mobile .iqp-progress .iqp-progress-load{position:absolute;bottom:0;height:100%;background-color:hsla(0,0%,100%,.6)}.iqp-player-mobile .iqp-progress .iqp-progress-play{position:absolute;bottom:0;height:100%;background-color:#00c000}.iqp-player-mobile .iqp-progress .iqp-progress-dot{position:absolute;width:10px;height:12px;top:-5px;margin-left:5px;border-radius:3px;background-color:#fff;box-shadow:0 0 6px 2px hsla(0,0%,100%,.3);-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);transition:-webkit-transform .15s ease-in-out;transition:transform .15s ease-in-out;transition:transform .15s ease-in-out,-webkit-transform .15s ease-in-out}.iqp-player-mobile .iqp-progress .iqp-dot-scale{-webkit-transform:scale(1.5);-ms-transform:scale(1.5);transform:scale(1.5)}.iqp-player-mobile .iqp-contrl{position:relative;width:100%;height:30px;font-size:12px}.iqp-player-mobile .iqp-contrl:before{position:absolute;content:"";left:-1px;right:-1px;bottom:0;height:54px;background-image:linear-gradient(180deg,transparent,rgba(0,0,0,.86));background-repeat:repeat-x;z-index:-1}.iqp-player-mobile .iqp-contrl .iqp-contrls-left,.iqp-player-mobile .iqp-contrl .iqp-contrls-right{position:relative;height:100%}.iqp-player-mobile .iqp-contrl .iqp-contrls-left{float:left;width:56%}.iqp-player-mobile .iqp-contrl .iqp-contrls-right{float:right;width:44%}.iqp-player-mobile .iqp-contrl .iqp-contrls-right .iqp-btn{float:right}.iqp-player-mobile .iqp-contrl .iqp-contrls-right .iqp-btn:first-child{margin-right:0;padding-right:15px}.iqp-player-mobile .iqp-contrl .iqp-btn{position:relative;float:left;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;padding:0 9px 6px;margin:0 2.5px;cursor:pointer}.iqp-player-mobile .iqp-contrl .iqp-btn.iqp-btn-pause,.iqp-player-mobile .iqp-contrl .iqp-btn.iqp-btn-play{margin-left:0;padding-left:15px}.iqp-player-mobile .iqp-contrl .iqp-icon{width:14px;height:14px}.iqp-player-mobile .iqp-contrl .iqp-icon.iqp-icon-pause,.iqp-player-mobile .iqp-contrl .iqp-icon.iqp-icon-play{width:18px;height:18px}.iqp-player-mobile .iqp-contrl .iqp-icon.iqp-icon-next{width:15px;height:15px}.iqp-player-mobile .iqp-contrl .iqp-icon.iqp-icon-vinv{width:16px;height:16px}.iqp-player-mobile .iqp-contrl .iqp-time-display{float:left;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;padding:0 9px 6px;margin:0 2.5px;white-space:nowrap;color:#aaa;font-size:0}.iqp-player-mobile .iqp-contrl .iqp-time-cur,.iqp-player-mobile .iqp-contrl .iqp-time-cutline,.iqp-player-mobile .iqp-contrl .iqp-time-dur{font-size:12px}.iqp-player-mobile .iqp-contrl .iqp-time-cur{color:#fff}.iqp-player-mobile .iqp-contrl .iqp-time-cutline{margin:0 5px}.iqp-player-mobile .iqp-contrl .iqp-label{white-space:nowrap;padding:0 5px;font-size:13px}.iqp-player-mobile .iqp-contrl .iqp-dot-rednew{position:absolute;width:6px;height:6px;top:0;right:3px;border-radius:50%;background-color:red}.iqp-player-mobile .iqp-pop-stream{position:absolute;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);bottom:43px;font-size:12px;width:78px;padding:0;border-radius:5px;background-color:rgba(0,0,0,.8);text-align:center}.iqp-player-mobile .iqp-pop-stream .iqp-txt-stream{padding:13px 0 12px}.iqp-player-mobile .iqp-pop-stream .iqp-txt-stream.selected .iqp-stream{color:#00be06}.iqp-player-mobile .iqp-pop-stream .iqp-stream{display:block;height:16px;line-height:16px}.iqp-pop-trend{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:14px;width:200px;height:118px;border-radius:5px;background-color:rgba(0,0,0,.8);text-align:center}.iqp-pop-trend .iqp-box-flex{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.iqp-pop-trend .iqp-trend{height:63px}.iqp-pop-trend .iqp-icon{width:40px;height:23px;cursor:pointer}.iqp-pop-trend .iqp-trend-time{height:53px}.iqp-pop-trend .iqp-txt-selected{color:#00be06}.iqp-pop-trend .iqp-trend-progess{position:relative;width:160px;height:2px;margin:0 auto;border-radius:1px;background-color:#505050}.iqp-pop-trend .iqp-trend-now{position:absolute;left:0;top:0;height:100%;background-color:#00be06}.iqp-player-mobile .iqp-pop-trend{font-size:12px;width:150px;height:90px}.iqp-player-mobile .iqp-pop-trend .iqp-trend{height:48px}.iqp-player-mobile .iqp-pop-trend .iqp-icon{width:30px;height:17px}.iqp-player-mobile .iqp-pop-trend .iqp-trend-time{height:40px}.iqp-player-mobile .iqp-pop-trend .iqp-trend-progess{width:120px;height:2px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);text-align:center;font-size:0;width:263px;white-space:normal}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-bg{width:128px;height:59px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpz_loading180528.png) no-repeat;margin-bottom:27px;margin-left:auto;margin-right:auto;background-size:128px 59px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-line{width:225px;height:1.5px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:225px 1.5px;margin-left:auto;margin-right:auto}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-vip .iqp-logoload-bg{width:169px;height:53px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vip_loading.png) no-repeat;background-size:169px 53px;margin-bottom:15px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-vip .iqp-logoload-line{width:202.5px;height:1.5px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:202.5px 1.5px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-cp .iqp-logoload-bg{width:90px;height:80px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycp_loading180528.png) no-repeat;background-size:90px 80px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-db .iqp-logoload-bg{width:196px;height:52px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdb_loading180528.png) no-repeat;background-size:196px 52px;margin-bottom:22px}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png)}',""])},function(e,t,i){t=e.exports=i(59)(void 0),t.push([e.i,'.iqp-player{position:relative;width:100%;height:100%;min-width:230px;overflow:hidden;text-align:left;white-space:normal;background:#000;color:#fff;font:12px/1.5 PingFangSC-Regular,Helvetica,Arial,Microsoft Yahei,sans-serif;z-index:0;user-select:none;-webkit-font-smoothing:antialiased}.iqp-player svg{fill:currentColor;overflow:hidden}.iqp-player *,.iqp-player :after,.iqp-player :before{margin:0;padding:0;box-sizing:border-box}.iqp-player a,.iqp-player a:hover,.iqp-player a:visited{color:#fff;text-decoration:none!important}.iqp-player :focus,.iqp-player a:active{outline:0 none}.iqp-player img{border:none;vertical-align:top}.iqp-player ol,.iqp-player ul{list-style:none}.iqp-player h1,.iqp-player h2,.iqp-player h3,.iqp-player h4,.iqp-player h5,.iqp-player h6{font-size:100%;font-weight:400}.iqp-player em,.iqp-player i{font-style:normal}.iqp-player strong{font-weight:400}.iqp-player button,.iqp-player input,.iqp-player select,.iqp-player textarea{font-family:inherit;font-size:100%;-webkit-appearance:none}.iqp-player button:focus,.iqp-player input:focus,.iqp-player select:focus,.iqp-player textarea:focus{outline:none}.iqp-player .iqp-hide-controls::-webkit-media-controls-play-button,.iqp-player .iqp-hide-controls::-webkit-media-controls-start-playback-button{display:none!important;-webkit-appearance:none}.iqp-player .iqp-layer{position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;background-color:#000;z-index:100}.iqp-player .iqp-layer-con{position:absolute;width:100%;top:50%;transform:translateY(-50%);text-align:center}.dn{display:none!important}@keyframes iqp-rotate-360{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@keyframes iqp-hide{0%{opacity:1}to{opacity:0}}.iqp-svg-sprite{display:none;position:absolute;width:0;height:0;overflow:hidden}.iqp-logo-box{position:absolute;width:100%;height:100%;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.iqp-logo-box .iqp-logo-top{position:absolute;top:8%;right:5%;-webkit-animation:logoTopAnimation 240s linear both;animation:logoTopAnimation 240s linear both}.iqp-logo-box .iqp-logo-bottom{position:absolute;bottom:17%;right:20%}.iqp-logo-box .logoShowAnimation{-webkit-animation:iqp-show .5s linear both;animation:iqp-show .5s linear both}.iqp-logo-box .logoHideAnimation{-webkit-animation:iqp-hide .5s linear both;animation:iqp-hide .5s linear both}.iqp-poster{position:absolute;width:100%;height:100%;top:0;background-size:contain;background-position:50%;background-repeat:no-repeat}.iqp-btn-mid{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);cursor:pointer;z-index:1}.iqp-btn-mid.iqp-btn-hide{-webkit-animation:iqp-hide .15s ease-in-out both;animation:iqp-hide .15s ease-in-out both}.iqp-btn-mid .iqp-mid-circle{width:70px;height:70px;border-radius:50%;background-color:rgba(0,0,0,.6)}.iqp-btn-mid .iqp-mid-rt{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:114px;height:60px;border-radius:5px;background-color:rgba(0,0,0,.6);font-size:0}.iqp-btn-mid .iqp-mid-rt .iqp-icon{position:relative;top:auto;left:auto;-webkit-transform:none;-ms-transform:none;transform:none}.iqp-btn-mid .iqp-icon{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.iqp-btn-mid .iqp-icon-stop{width:27px;height:27px;margin-left:3px}.iqp-btn-mid .iqp-icon-loading{width:41px;height:41px}.iqp-btn-mid .iqp-mid-loading{width:100%;height:100%;-webkit-animation:iqp-rotate-360 1s linear infinite;animation:iqp-rotate-360 1s linear infinite}.iqp-btn-mid .iqp-icon-replay{width:28px;height:28px;margin-right:10px}.iqp-btn-mid .iqp-mid-txt{font-size:18px}.iqp-player-mobile .iqp-btn-mid .iqp-mid-circle{width:52px;height:52px}.iqp-player-mobile .iqp-btn-mid .iqp-mid-rt{width:85.5px;height:45px;border-radius:4px}.iqp-player-mobile .iqp-btn-mid .iqp-icon-stop{width:20px;height:20px;margin-left:2px}.iqp-player-mobile .iqp-btn-mid .iqp-icon-loading{width:30px;height:30px}.iqp-player-mobile .iqp-btn-mid .iqp-icon-replay{width:20px;height:21px;margin-right:7.5px}.iqp-player-mobile .iqp-btn-mid .iqp-mid-txt{font-size:14px}.iqp-bottom{position:absolute;left:0;bottom:0;width:100%;z-index:1}.iqp-player-mobile .iqp-bottom,.iqp-player-pad .iqp-bottom{bottom:-1px}.iqp-pop-trend{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:14px;width:200px;height:118px;border-radius:5px;background-color:rgba(0,0,0,.8);text-align:center}.iqp-pop-trend .iqp-box-flex{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.iqp-pop-trend .iqp-trend{height:63px}.iqp-pop-trend .iqp-icon{width:40px;height:23px;cursor:pointer}.iqp-pop-trend .iqp-trend-time{height:53px}.iqp-pop-trend .iqp-txt-selected{color:#00be06}.iqp-pop-trend .iqp-trend-progess{position:relative;width:160px;height:2px;margin:0 auto;border-radius:1px;background-color:#505050}.iqp-pop-trend .iqp-trend-now{position:absolute;left:0;top:0;height:100%;background-color:#00be06}.iqp-player-mobile .iqp-pop-trend{font-size:12px;width:150px;height:90px}.iqp-player-mobile .iqp-pop-trend .iqp-trend{height:48px}.iqp-player-mobile .iqp-pop-trend .iqp-icon{width:30px;height:17px}.iqp-player-mobile .iqp-pop-trend .iqp-trend-time{height:40px}.iqp-player-mobile .iqp-pop-trend .iqp-trend-progess{width:120px;height:2px}.iqp-layer-error{font-size:14px;line-height:32px}.iqp-layer-error .iqp-layer-main{font-size:16px;padding-bottom:8px}.iqp-layer-error .iqp-layer-btn{display:inline-block;vertical-align:top;letter-spacing:0;padding:0 18px;margin:9px auto 6px;height:36px;line-height:36px;border-radius:18px;background-color:#00be06;color:#fff;text-align:center}.iqp-layer-error .iqp-txt-link,.iqp-layer-error .iqp-txt-link:hover,.iqp-layer-error .iqp-txt-link:visited{color:#999}.iqp-layer-error .iqp-error-code{position:absolute;display:inline-block;right:20px;bottom:11px;color:#999}.iqp-player-mobile .iqp-layer-error{font-size:12px;line-height:24px}.iqp-player-mobile .iqp-layer-error .iqp-layer-main{font-size:12px;padding-bottom:2px}.iqp-player-mobile .iqp-layer-error .iqp-layer-btn{padding:0 13px;margin:7px auto 5px;height:24px;line-height:24px;border-radius:12px}.iqp-player-mobile .iqp-layer-error .iqp-error-code{line-height:16px;right:10px;bottom:7px}.iqp-layer-loading{text-align:center;font-size:14px;color:#999}.iqp-layer-loading .iqp-gif-loading{display:inline-block;vertical-align:middle;width:24px;height:24px;margin-right:10px;background:url(//www.iqiyipic.com/common/fix/iq-player/loading.gif) no-repeat}.iqp-player-mobile .iqp-layer-loading{font-size:12px}.iqp-player-mobile .iqp-gif-loading{width:18px;height:18px;margin-right:5px;background-size:18px 18px}.iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);text-align:center;font-size:0;width:350px;white-space:normal}.iqp-logo-loading .iqp-logoload-bg{width:170px;height:78px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpz_loading180528.png) no-repeat;margin-bottom:36px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logoload-line{width:300px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:300px 2px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logoload-box-vip .iqp-logoload-bg{width:225px;height:71px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vip_loading.png) no-repeat;margin-bottom:20px}.iqp-logo-loading .iqp-logoload-box-vip .iqp-logoload-line{width:270px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:auto}.iqp-logo-loading .iqp-logoload-box-cp .iqp-logoload-bg{width:119px;height:106px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycp_loading180528.png) no-repeat}.iqp-logo-loading .iqp-logoload-box-db .iqp-logoload-bg{width:260px;height:69px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdb_loading180528.png) no-repeat;margin-bottom:29px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png)}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png)}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png)}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png)}.iqp-player-mobile .iqp-logoload-box{width:263px}.iqp-player-mobile .iqp-logoload-bg{width:128px;height:59px;margin-bottom:27px;background-size:128px 59px}.iqp-player-mobile .iqp-logoload-line{width:225px;height:1.5px;background-size:225px 1.5px}.iqp-player-mobile .iqp-logoload-box-vip .iqp-logoload-bg{width:169px;height:53px;margin-bottom:15px;background-size:169px 53px}.iqp-player-mobile .iqp-logoload-box-vip .iqp-logoload-line{width:202.5px;height:1.5px;background-size:202.5px 1.5px}.iqp-player-mobile .iqp-logoload-box-cp .iqp-logoload-bg{width:90px;height:80px;background-size:90px 80px}.iqp-player-mobile .iqp-logoload-box-db .iqp-logoload-bg{width:196px;height:52px;margin-bottom:22px;background-size:196px 52px}.iqp-filter{position:absolute;width:100%;bottom:44px;opacity:1;transition:bottom .2s,opacity .2s}.iqp-filter .iqp-filter-tip{position:relative;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:40px;padding:0 10px 0 15px;margin-bottom:5px;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);border-radius:5px;background-color:rgba(0,0,0,.7);font-size:0;z-index:10}.iqp-filter .iqp-filter-tip-txt{font-size:14px}.iqp-filter .iqp-icon-curve{width:27px;height:11px;margin-right:10px}.iqp-filter .iqp-icon-close{box-sizing:content-box;width:10px;height:10px;padding:5px;margin-left:10px;cursor:pointer}.iqp-tip-stream{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:340px;height:38px;padding-left:20px;font-size:0;background-image:linear-gradient(90deg,rgba(0,0,0,.9),rgba(0,0,0,.9) 45%,rgba(0,0,0,.16) 90%,transparent)}.iqp-tip-stream.iqp-tip-fixed{position:absolute;bottom:44px}.iqp-tip-stream .iqp-stream-switch{font-size:14px}.iqp-tip-stream .iqp-stream-switch .em,.iqp-tip-stream .iqp-txt-selected{color:#00be06}.iqp-tip-stream .iqp-stream-close{margin-left:28px;font-size:27px;cursor:pointer;font-family:Arial,Microsoft Yahei}.iqp-progress{position:relative;width:100%;z-index:1}.iqp-progress .iqp-progress-bar{position:relative;width:100%;height:2px;background-color:hsla(0,0%,100%,.25);cursor:pointer}.iqp-progress .iqp-progress-load{position:absolute;bottom:0;height:100%;background-color:hsla(0,0%,100%,.6)}.iqp-progress .iqp-progress-play{position:absolute;bottom:0;height:100%;background-color:#00c000}.iqp-progress .iqp-progress-dot{position:absolute;width:14px;height:14px;top:-6px;margin-left:7px;border-radius:50%;background-color:#fff;box-shadow:0 0 6px 2px hsla(0,0%,100%,.3);-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);transition:-webkit-transform .15s ease-in-out;transition:transform .15s ease-in-out;transition:transform .15s ease-in-out,-webkit-transform .15s ease-in-out}.iqp-progress .iqp-dot-scale{-webkit-transform:scale(1.5);-ms-transform:scale(1.5);transform:scale(1.5)}.iqp-contrl{position:relative;width:100%;height:42px;padding:0 10px;font-size:14px}.iqp-contrl:before{position:absolute;content:"";left:-1px;right:-1px;bottom:0;height:108px;background-image:linear-gradient(180deg,transparent,rgba(0,0,0,.86));background-repeat:repeat-x;z-index:-1}.iqp-contrl .iqp-contrls-left,.iqp-contrl .iqp-contrls-right{position:relative;height:100%}.iqp-contrl .iqp-contrls-left{float:left;width:56%}.iqp-contrl .iqp-contrls-right{float:right;width:44%}.iqp-contrl .iqp-contrls-right .iqp-btn{float:right}.iqp-contrl .iqp-btn{position:relative;float:left;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;margin:0 10px;cursor:pointer}.iqp-contrl .iqp-btn.iqp-btn-pause,.iqp-contrl .iqp-btn.iqp-btn-play{margin:0 9px}.iqp-contrl .iqp-icon{width:16px;height:16px}.iqp-contrl .iqp-icon.iqp-icon-pause,.iqp-contrl .iqp-icon.iqp-icon-play{width:22px;height:22px}.iqp-contrl .iqp-icon.iqp-icon-next{width:18px;height:18px}.iqp-contrl .iqp-icon.iqp-icon-vinv{width:20px;height:20px}.iqp-contrl .iqp-time-display{float:left;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;margin:0 10px;white-space:nowrap;color:#aaa;font-size:0}.iqp-contrl .iqp-time-cur,.iqp-contrl .iqp-time-cutline,.iqp-contrl .iqp-time-dur{font-size:14px}.iqp-contrl .iqp-time-cur{color:#fff}.iqp-contrl .iqp-time-cutline{margin:0 5px}.iqp-contrl .iqp-label{white-space:nowrap;padding:0 10px}.iqp-contrl .iqp-dot-rednew{position:absolute;width:6px;height:6px;top:7px;right:-6px;border-radius:50%;background-color:red}.iqp-pop-stream{position:absolute;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);bottom:44px;font-size:14px;width:108px;padding:4px 0;border-radius:5px;background-color:rgba(0,0,0,.8);text-align:center}.iqp-pop-stream .iqp-txt-stream{padding:8px 0}.iqp-pop-stream .iqp-txt-stream.selected .iqp-stream{color:#00be06}.iqp-pop-stream .iqp-stream{display:block;height:32px;line-height:32px}',""])},function(e,t,i){var a;void 0!==(a=function(e,t,a){function n(){var e=new Date;return e.getFullYear()+""+(e.getMonth()+1)+e.getDate()}function r(){var e=c.read(v),t=n(),i=0;return e&&(e=e.split("|"),t=e[0],i=parseFloat(e[1])),{day:t,totalTime:i}}function o(e){var t=r(),i=n();t.day===i?t.totalTime+=e:t.totalTime=e,c.write(v,i+"|"+t.totalTime)}var s,d,l=i(0),u=i(2),c=i(15),f=i(1),p=i(24),h=i(21),_=i(7),g=i(9),m=i(16).CORE_TYPES,v="QiyiPlayerTimePlayedInDay",y=new f("AdApi"),b=l("adBussiness",{construct:function(e,t){var i=this;e.on(m.NTF_AD_NotifyManager,function(e){i.fire(e)})},extend:u,methods:{}}),x=l("adapi",{construct:function(e,t,i){var a,n=this;n._isVip=!1,n._disableVideoOP=!1,n._user=_,n.bussiness=new b(t,i),n._container=e,s=t,d=i;var r=function(e,t){var i={type:e,gas:n.getCurrentGas()};t&&(i.data=t,t.gas&&(i.gas=t.gas)),n.fire(i)};s.on(m.NTF_StatusChanged,function(e){switch(e.data.state){case m.Status_AdLoadstart:r("loadstart",e.data);break;case m.Status_Ready:r("ready",e.data);break;case m.Status_Play:r("play",e.data);break;case m.Status_AdPlaying:case m.Status_Playing:r("playing",e.data);break;case m.Status_AdPaused:case m.Status_Paused:r("pause",e.data);break;case m.Status_AdWaiting:case m.Status_Waiting:r("waiting",e.data);break;case m.Status_AdError:case m.Status_PlayError:r("error",e.data);break;case m.Status_AdStalled:r("stalled",e.data);break;case m.Status_AdPlayEnded:case m.Status_End_Play:r("ended",e.data)}});var l=0;s.on(m.NTF_AD_TimeUpdate,function(e){clearTimeout(l),l=setTimeout(function(){r("timeupdate",e.data)},0)}),s.on(m.NTF_Seeking,function(e){r("seeked",e.data)}),s.on(m.NTF_TimeUpdate,function(e){r("timeupdate",e.data);var i=t.getCurrenttime(),n=i-a;a&&n>0&&n<1&&o(n),a=i}),p.on("change",function(e){r("exit"===e.data?"exitfullscreen":"fullscreen")}),_.on("infoset",function(){_.isVip(function(e){n._isVip=e})})},extend:u,methods:{load:function(e){var t=this;e.file&&!isNaN(e.offset)&&e.offset>=0?t.bussiness.fire({type:"_playdata_",data:e}):y.warn("load error data parameter: "+f.stringify(e))},getEngineType:function(){var e=s.getEngineType().toLowerCase();return"qvs"===e&&(e="data"),e},getCurrentGas:function(){return s.getCurrentGas()},abort:function(){s.abortAres()},isVIP:function(){return this._isVip},getUserInfo:function(){var e=!1;return this._user.isVip(function(t){e=t}),{isVIP:e,passportCookie:this._user.passportCookie(),passportId:this._user.getUid(),isLogin:this._user.isLogin(),uaaUserId:g.getFluid()||g.getJsuid()}},adcontainer:function(){return this._container},video:function(){return s.video()},isPaused:function(){return s.isPaused()},play:function(e){this._disableVideoOP||s.play(e)},pause:function(e){this._disableVideoOP||s.pause(e)},addEventListener:function(e,t){this.on(e,t)},removeEventListener:function(e,t){this.un(e,t)},src:function(e){if(s){if(1!==arguments.length)return s.getSrc()||"";y.error("mw is not support set src!")}else y.error("core is null")},volume:function(e){if(s){if(!e)return s.getVolume();s.setVolume(e)}else y.error("core is null")},muted:function(e){if(s){if("boolean"!=typeof e)return s.getMuted();s.setMuted(e)}else y.error("core is null")},height:function(){return d?d.videoWrapper.height():0},width:function(){return d?d.videoWrapper.width():0},currentTime:function(){return s.getCurrenttime()},duration:function(){return s.getDuration()},buffered:function(){return s.getBufferTime()},sendUserActionPingback:function(e){d.sendUserActionPingback(e)},fullscreentoggle:function(){p.toggle()},isFullScreen:function(){return p.isFullScreen()},webfullscreentoggle:function(){h.toggle()},isWebFullScreen:function(){return h.isWebFullScreen()},videoPlayedDurationInDay:function(){return r().totalTime}}});a.exports=x}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(63),r=i(118),o=i(0),s=i(5),d=i(15),l=i(4),u=i(49),c=i(72),f=i(1),p=new f("FlashAdapter"),h=o("FlashAdapter",{construct:function(e,t){var i=this;i._videoid=e.vid,i._tvid=e.tvid,i._player=new r(e,t),i._isFirstWriteLog=!0,i.LOGGER_KEY="QiyiPlayerLogger",this._player.on(u.QYPLAYER_STATE_CHANGE,function(e){e=e||{},e.data=e.data||{};var t=e.data.state||"";e.data.vid!=i._videoid&&(i._videoid=e.data.vid,i._tvid=e.data.tvid,t.toLocaleLowerCase()==u.QYPLAYER_STATUS_LOAD_MOVIE&&i.getVideoInfo(function(e){p.info("call js, fire event,params: type = videoChanged(视频切换完成)"),i.fire({type:u.QYPLAYER_VIDEO_CHANGE,data:e})}),i.getPlayInfo(function(t){var a={};a.prePlayingDuration=t.prePlayingDuration,a.preTvid=t.preTvid,a.curPlayingDuration=t.curPlayingDuration,a.playerVersion=t.playerVersion,l(e.data,a),p.info("call js, fire event,params: type = vidChanged(视频切换)"),i.fire({type:u.QYPLAYER_VID_CHANGE,data:e.data})})),t.toLocaleLowerCase()==u.QYPLAYER_STATUS_DATA_READY&&i.getVideoInfo(function(e){p.info("call js, fire event,params: type = dataready(数据信息已经准备好)"),i.fire({type:u.QYPLAYER_STATUS_DATA_READY,data:e})}),t.toLocaleLowerCase()==u.QYPLAYER_STATUS_END_PLAY&&i.getPlayInfo(function(t){var i={};i.prePlayingDuration=t.prePlayingDuration,i.preTvid=t.preTvid,i.curPlayingDuration=t.curPlayingDuration,i.playerVersion=t.playerVersion,l(e.data,i)}),t.toLocaleLowerCase()==u.QYPLAYER_STATUS_START_PLAY&&i.getPlayInfo(function(t){i._timeMark=t.totaleDuration,l(e.data,t)}),t.toLocaleLowerCase()==u.QYPLAYER_STATUS_SEEKING&&i.fire({type:u.QYPLAYER_STATUS_SEEKING,data:{actionType:"controls",current:e.data.current,duration:e.data.duration}}),e.data.state&&(e.data.state=t.toLocaleLowerCase()),p.info("call js, fire event,params: type = playerStateChange(状态改变), state = "+t.toLocaleLowerCase()),i.fire({type:u.QYPLAYER_STATE_CHANGE,data:e.data})}),this._player.on(u.QYPLAYER_NEXT_VIDEO,function(e){p.info("call js, fire event,params: type = playnextvideo(点击下一集)"),i.fire({type:u.QYPLAYER_NEXT_VIDEO})}),this._player.on(u.QYPLAYER_SWITCH_PLAYER,function(e){s.set("QP004",0,{expires:288e5,path:"/",domain:"iqiyi.com"}),window.location.reload()}),this._player.on(u.QYPLAYER_LOAD_COMPLETE,function(e){e=e||{},e.data=e.data||{},p.info("call js, fire event,params: type = loadcomplete(加载完成)"),i.fire({type:u.QYPLAYER_LOAD_COMPLETE,data:e.data})}),this._player.on(u.QYPLAYER_SET_LIGHT,function(e){e=e||{},e.data=e.data||{};var t="false"==e.data.open;p.info("call js, fire event,params: type = setLight(开关灯), open = "+t),i.fire({type:u.QYPLAYER_SET_LIGHT,data:t})}),this._player.on(u.QYPLAYER_MOVETO_QITAN,function(){p.info("call js, fire event,params: type = moveToQitan(移动到评论)"),i.fire({type:u.QYPLAYER_MOVETO_QITAN})}),this._player.on(u.QYPLAYER_LOAD_SUCCESS,function(t){t.data=t.data||{},t.data.playerId=e.parentId,p.info("call js, fire event,params: type = playerLoadSuccess(播放器初始化完毕)"),i.fire({type:u.QYPLAYER_LOAD_SUCCESS,data:t.data})}),this._player.on(u.QYPLAYER_SHOW_LOGIN_PANEL,function(e){p.info("call js, fire event,params: type = showLoginPanel(弹出登录框)"),i.fire({type:u.QYPLAYER_SHOW_LOGIN_PANEL,data:e.data})}),this._player.on(u.QYPLAYER_EXPAND,function(e){p.info("call js, fire event,params: type = expand(将播放器放大展开)"),i.fire({type:u.QYPLAYER_EXPAND,data:e.data})}),this._player.on(u.QYPLAYER_AUTHENTICATION_RESULE,function(e){p.info("call js, fire event,params: type = authenticationResult(鉴权结果), isTryWatch = "+e.data.isTryWatch),i.fire({type:u.QYPLAYER_AUTHENTICATION_RESULE,data:{isTryWatch:"true"==e.data.isTryWatch,tvid:e.data.tvid}})}),this._player.on(u.QYPLAYER_RECHARGE,function(e){p.info("call js, fire event,params: type = recharge(请求JS充值)"),i.fire({type:u.QYPLAYER_RECHARGE,data:e.data})}),this._player.on(u.QYPLAYER_REFRESH_PAGE,function(){p.info("call js, fire event,params: type = refreshPage(刷新页面)"),i.fire({type:u.QYPLAYER_REFRESH_PAGE})}),this._player.on(u.QYPLAYER_DOWNLOAD,function(e){p.info("call js, fire event,params: type = download(离线下载)"),i.fire({type:u.QYPLAYER_DOWNLOAD,data:e.data})}),this._player.on(u.QYPLAYER_REQUEST_VIDEOLIST,function(e){p.info("call js, fire event,params: type = requestVideoList(请求联播列表)"),i.fire({type:u.QYPLAYER_REQUEST_VIDEOLIST,data:e})}),this._player.on(u.QYPLAYER_SWITCH_FULL_SCREEN,function(e){p.info("call js, fire event,params: type = switchFullScreen(全屏|普屏切换)"),i.fire({type:u.QYPLAYER_SWITCH_FULL_SCREEN,data:e.data.value})}),this._player.on(u.QYPLAYER_ADD_TO_TABLE,function(){p.info("call js, fire event,params: type = addToTable(追剧王--添加到桌面)"),i.fire({type:u.QYPLAYER_ADD_TO_TABLE})}),this._player.on(u.QYPLAYER_FOCUS_TIPS,function(e){p.info("call js, fire event,params: type = focusTips(播放到看点)"),i.fire({type:u.QYPLAYER_FOCUS_TIPS,data:e.data})}),this._player.on(u.QYPLAYER_FOCUS_UPLOADER,function(e){p.info("call js, fire event,params: type = focusUploader(获取订阅信息)"),i.fire({type:u.QYPLAYER_FOCUS_UPLOADER,data:e.data})}),this._player.on(u.QYPLAYER_FIND_GOODS,function(e){p.info("call js, fire event,params: type = findGoods(定位到商品)"),i.fire({type:u.QYPLAYER_FIND_GOODS,data:e.data})}),this._player.on(u.QYPLAYER_BARRAGE_REPLAY,function(e){p.info("call js, fire event,params: type = barrageReply(回复弹幕)"),i.fire({type:u.QYPLAYER_BARRAGE_REPLAY,data:e.data})}),this._player.on(u.QYPLAYER_BARRAGE_RECEIVE_DATA,function(e){p.info("call js, fire event,params: type = barrageReceiveData(收到服务器最新socket弹幕信息)"),i.fire({type:u.QYPLAYER_BARRAGE_RECEIVE_DATA,data:e.data})}),this._player.on(u.QYPLAYER_SET_BARRAGE_INTERACT_INFO,function(e){p.info("call js, fire event,params: type = setBarrageInteractInfo(收到服务器官弹互动信息数据)"),i.fire({type:u.QYPLAYER_SET_BARRAGE_INTERACT_INFO,data:e.data})}),this._player.on(u.QYPLAYER_SET_BARRAGE_CONFIG_INFO,function(e){p.info("call js, fire event,params: type = setHasBarrageConfigInfo(弹幕的云控配置)"),i.fire({type:u.QYPLAYER_SET_BARRAGE_CONFIG_INFO,data:e.data})}),this._player.on(u.QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO,function(e){p.info("call js, fire event,params: type = setHasBarrageChannelConfigInfo(弹幕的频道配置)"),i.fire({type:u.QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO,data:e.data})}),this._player.on(u.QYPLAYER_NOTIFY_GIFT_INFO,function(e){p.info("call js, fire event,params: type = notifyGiftInfo(发现弹幕红包)"),i.fire({type:u.QYPLAYER_NOTIFY_GIFT_INFO,data:{data:decodeURIComponent(e.data.data||"")}})}),this._player.on(u.QYPLAYER_NOTIFY_BARRAGE_DATA,function(e){p.info("call js, fire event,params: type = notifyBarrageData(发现弹幕数据)");var t={};e.data&&e.data.data&&(t=(new c).xml_str2json(decodeURIComponent(e.data.data))),i.fire({type:u.QYPLAYER_NOTIFY_BARRAGE_DATA,data:{data:t.danmu}})}),this._player.on(u.QYPLAYER_SHOW_DOWNLOAD_APPPOP,function(e){p.info("call js, fire event,params: type = showDownLoadAppPop(下载影音客户端)"),i.fire({type:u.QYPLAYER_SHOW_DOWNLOAD_APPPOP,data:e.data})}),i._player.on(u.QYPLAYER_NOTIFY_SCORECHANGE,function(e){i.fire({type:u.QYPLAYER_NOTIFY_SCORECHANGE})}),this._player.on(u.QYPLAYER_CHECK_CLIENT_INSTALL,function(e){p.info("call js, fire event,params: type = checkClientInstall(检测客户端)"),i.fire({type:u.QYPLAYER_CHECK_CLIENT_INSTALL,data:e.data})}),this._player.on(u.QYPLAYER_REQUEST_SEND_PINGBACK,function(e){p.info("call js, fire event,params: type = requestJSSendPB(请求JS发送pingback)"),i.fire({type:u.QYPLAYER_REQUEST_SEND_PINGBACK,data:e.data})}),this._player.on(u.QYPLAYER_DOSOMETHING,function(e){p.info("call js, fire event,params: type = setJsDoSomething(请求JS做某些操作)"),i.fire({type:u.QYPLAYER_DOSOMETHING,data:e.data})}),this._player.on(u.QYPLAYER_FOLLOW_UPNEXT_LOAD,function(e){p.info("call js, fire event,params: type = followUpNextLoad(继续加载后续结构)"),i.fire({type:u.QYPLAYER_FOLLOW_UPNEXT_LOAD,data:e.data})}),this._player.on(u.QYPLAYER_USER_CLICK_SCORE,function(e){p.info("call js, fire event,params: type = userClickScore(评分)"),i.fire({type:u.QYPLAYER_USER_CLICK_SCORE,data:e.data})}),this._player.on(u.QYPLAYER_BARRAGE_STATE_CHANGE,function(e){p.info("call js, fire event,params: type = barrageStateChange(弹幕状态发生改变)"),i.fire({type:u.QYPLAYER_BARRAGE_STATE_CHANGE,data:e.data})}),this._player.on(u.QYPLAYER_REQUEST_REWARD,function(e){p.info("call js, fire event,params: type = requestReward(请求打赏)"),i.fire({type:u.QYPLAYER_REQUEST_REWARD,data:e.data})}),this._player.on(u.QYPLAYER_COMMENT_ALLOWED,function(e){p.info("call js, fire event,params: type = commentAllowed(vrs的评论字段)"),i.fire({type:u.QYPLAYER_COMMENT_ALLOWED,data:e.data})}),this._player.on(u.QYPLAYER_NOTIFY_WRITE_FLASH_LOG,function(e){i._isFirstWriteLog?(d.write(i.LOGGER_KEY,e.data.logStr.join("\n")),i._isFirstWriteLog=!1):d.write(i.LOGGER_KEY,d.read(i.LOGGER_KEY)+"\n"+e.data.logStr.join("\n"))}),this._player.on(u.QYPLAYER_NOTIFY_AD_START,function(e){p.info("call js, fire event,params: type = ADStart(广告开播)"),i.fire({type:u.QYPLAYER_NOTIFY_AD_START,data:e.data})}),this._player.on(u.QYPLAYER_NOTIFY_AD_END,function(e){p.info("call js, fire event,params: type = ADEnd(广告播放完成)"),i.fire({type:u.QYPLAYER_NOTIFY_AD_END,data:e.data})}),this._player.on(u.QYPLAYER_NOTIFY_TIMEUPDATE,function(e){i.fire({type:u.QYPLAYER_NOTIFY_TIMEUPDATE,data:e.data})}),i._player.on(u.QYPLAYER_NOTIFY_AD_NOTIFY_INFO,function(e){p.info("call js, fire event,params: type = AD notify info(广告通知的信息-只是转发)"+e.data.type),i.fire({type:e.data.data.type,data:e.data.data.data})}),this._player.on(u.QYPLAYER_NOTIFY_FEEDBACK_SHOW,function(e){i.fire({type:u.QYPLAYER_NOTIFY_FEEDBACK_SHOW,data:e.data})}),this._player.on(u.QYPLAYER_NOTIFY_FEEDBACK_HIDE,function(e){i.fire({type:u.QYPLAYER_NOTIFY_FEEDBACK_HIDE,data:e.data})}),this._player.on(u.QYPLAYER_NOTIFY_USER_SEEK,function(e){i.fire({type:u.QYPLAYER_NOTIFY_USER_SEEK})}),this._player.on(u.QYPLAYER_BARRAGE_RECEIVE_DATA,function(e){i.fire({type:u.QYPLAYER_BARRAGE_RECEIVE_DATA,data:e.data})});!function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i)}(window,"beforeunload",function(){i._player.flashStopHeartBeat()})},extend:n,methods:{getIsInMainVideo:function(e){this._player.getIsInMainVideo(e)},setCyclePlay:function(e){p.info("js call func,params: type = setCyclePlay(是否联播), param = "+e),this._player.setCyclePlay(e)},getQiyiPlayerInfo:function(e){this._player.getQiyiPlayerInfo(e)},getQiyiVideoInfo:function(e){this._player.getQiyiVideoInfo(e)},setLight:function(e){p.info("js call func,params: type = setLight(开关灯)"),this._player.setLight(e)},expand:function(e){p.info("js call func,params: type = expand"),this._player.expand(e)},setBarrageStatus:function(e){p.info("js call func,params: type = setBarrageStatus(设置弹幕开关)"),this._player.setBarrageStatus(e)},setSelfSendBarrageInfo:function(e){this._player.setSelfSendBarrageInfo(e)},setBarrageSetting:function(e){this._player.setBarrageSetting(e)},setActivityNoticeInfo:function(e){this._player.setActivityNoticeInfo(e)},zoomQiyiVideo:function(e){this._player.zoomQiyiVideo(e)},setTimeListener:function(e){this._player.setTimeListener(e)},getHasBarrageConfigInfo:function(){this._player.getHasBarrageConfigInfo()},getHasBarrageChannelConfigInfo:function(){this._player.getHasBarrageChannelConfigInfo()},getHasBarrageGiftInfo:function(){this._player.getHasBarrageGiftInfo()},getCommentConfigInfo:function(){this._player.getCommentConfigInfo()},setContinuePlayState:function(e){p.info("js call func,params: type = setContinuePlayState"),this._player.setContinuePlayState(e)},getSwitchVideoType:function(e){this._player.getSwitchVideoType(e)},forceToSaveCurVideoInfo:function(e){this._player.forceToSaveCurVideoInfo(e)},getContinueData:function(e){this._player.getContinueData(e)},setQiyiVisits:function(e){this._player.setQiyiVisits(e)},initQiyiVideo:function(e){p.info("js call func,params: type = initQiyiVideo(初始化播放命令,用于账号封停,以非会员观看)"),this._player.initQiyiVideo(e)},getQiyiPlayerType:function(e){return e&&"function"==typeof e&&e("flash"),"flash"},setPlayerFullScreen:function(e){this._player.setPlayerFullScreen(e)}}});a.exports=h}.call(t,i,t,e))&&(e.exports=a)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Class=__webpack_require__(0),EmbedSwf=__webpack_require__(119),Dispatcher=__webpack_require__(2),VideoInfo=__webpack_require__(32),i18n=__webpack_require__(6),callSwf=function(e,t){var i=t.functionName,a=t.parameter,n=t.callback||function(){};e&&i&&e[i]&&n(void 0===a?e[i]():"[object Object]"==Object.prototype.toString.apply(a)||"[object Array]"==Object.prototype.toString.apply(a)?e[i](JSON.stringify(a)):e[i](a))},FlashPlayer=Class("FlashPlayer",{extend:Dispatcher,construct:function($param,isSupportHtml5){var _this=this,_embedSwf=new EmbedSwf;_this._swf=_embedSwf.embed($param,isSupportHtml5),_this._playerId=$param.parentId||"",_this._param=$param,_this._prevCalls=[],_this._firstTime=!0,_this._swf&&(_this._swf.fire=function(data){try{var ev=window.JSON?window.JSON.parse(data):eval("("+data+")");if(ev.data.origin&&ev.data.origin!=_this._swf.id)return;ev.type=ev.type,setTimeout(function(){try{_this.fire({type:ev.type,data:ev.data})}catch(e){}},0)}catch(e){return}})},methods:{destroy:function(){var e=this;e._swf.parentNode.removeChild(e._swf),e._swf=null},_flashcall:function(e,t,i){var a={callback:i,functionName:e,parameter:t};callSwf(this._swf,a)},load:function(e){this._flashcall("loadQiyiVideo",e)},play:function(){this._flashcall("playQiyiVideo")},resume:function(){this._flashcall("resumeQiyiVideo")},replay:function(){this._flashcall("replayQiyiVideo")},pause:function(){this._flashcall("pauseQiyiVideo")},seek:function(e){this._flashcall("seekQiyiVideo",e)},stop:function(){this._flashcall("stopQiyiVideo")},getPlayInfo:function(e){this._flashcall("getQiyiPlayerInfo",void 0,function(t){var i=t||"",a=i?JSON.parse(i.replace(/\r/g,"").replace(/\n/g,"")):"";a&&(a.currentTime=a.currentTime?a.currentTime/1e3:0,e(a))})},getVideoInfo:function(e,t,i){VideoInfo.get({tvid:t,vid:i,locale:i18n.isTraditionalChinese()?"zh_tw":""},e)},getIsInMainVideo:function(e){this._flashcall("getIsInMainVideo",void 0,e)},getPlayerId:function(){return this._playerId},setCyclePlay:function(){this._flashcall("setCyclePlay")},switchVideo:function(e){this._flashcall("switchVideo",e)},switchNextVideo:function(){this._flashcall("switchNextVideo")},switchPreVideo:function(){this._flashcall("switchPreVideo")},addVideoList:function(e){this._flashcall("addVideoList",e)},removeVideoList:function(e){this._flashcall("removeVideoList",e)},getQiyiPlayerInfo:function(e){this.getPlayInfo(e)},getQiyiVideoInfo:function(e){this._flashcall("getQiyiVideoInfo",void 0,e)},setQiyiUserLogin:function(e){this._flashcall("setQiyiUserLogin",e)},setLight:function(e){this._flashcall("setLight",e)},expand:function(e){this._flashcall("expand",e)},setBarrageStatus:function(e){this._flashcall("setBarrageStatus",e)},setSelfSendBarrageInfo:function(e){this._flashcall("setSelfSendBarrageInfo",e)},setSmallWindowMode:function(e){this._flashcall("setSmallWindowMode",e)},setBarrageSetting:function(e){this._flashcall("setBarrageSetting",e)},setActivityNoticeInfo:function(e){this._flashcall("setActivityNoticeInfo",e)},zoomQiyiVideo:function(e){this._flashcall("zoomQiyiVideo",e)},setTimeListener:function(e){this._flashcall("setTimeListener",e)},getHasBarrageConfigInfo:function(){this._flashcall("getHasBarrageConfigInfo")},getHasBarrageChannelConfigInfo:function(){this._flashcall("getHasBarrageChannelConfigInfo")},getHasBarrageGiftInfo:function(){this._flashcall("getHasBarrageGiftInfo")},getCommentConfigInfo:function(){this._flashcall("getCommentConfigInfo")},setContinuePlayState:function(e){this._flashcall("setContinuePlayState",e)},getSwitchVideoType:function(e){this._flashcall("getSwitchVideoType",void 0,e)},forceToSaveCurVideoInfo:function(e){this._flashcall("forceToSaveCurVideoInfo",e)},getContinueData:function(e){this._flashcall("getContinueData",e)},setQiyiVisits:function(e){this._flashcall("setQiyiVisits",e)},initQiyiVideo:function(e){this._flashcall("initQiyiVideo",e)},jsNotifyAdManager:function(e){this._flashcall("jsNotifyAdManager",e)},getQiyiPlayerLog:function(e){this._flashcall("getQiyiPlayerLog",void 0,e)},clearBanWord:function(){this._flashcall("clearBanWord")},addBanWord:function(e){e&&this._flashcall("addBanWord",e)},removeBanWord:function(e){e&&this._flashcall("removeBanWord",e)},setPlayerFullScreen:function(e){e&&this._flashcall("setPlayerFullScreen",e)},flashStopHeartBeat:function(){this._flashcall("stopHeartBeat")},notyfyADInfo:function(e){this._flashcall("notyfyADInfo",e)},requestBarrageData:function(e){this._flashcall("requestBarrageData",e)}}});module.exports=FlashPlayer}.call(exports,__webpack_require__,exports,module))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n,r=i(0),o=i(5),s=i(3),d=i(6),l=i(120),u=(i(62),s.browser),c=i(38),f=i(37),p=function(e,t,i){window.attachEvent?e.attachEvent("on"+t,i):window.addEventListener&&e.addEventListener(t,i)},h=r("EmbedSwf",{construct:function(){},methods:{embed:function(e,t){var i={};i.quality="high",i.allowScriptAccess="always",i.wmode=e.wmode?e.wmode:"opaque",i.align="middle",i.bgcolor="#000000",i.swLiveConnect="true",i.loop="true",i.play="true",i.DeviceFont="false",i.allowFullScreen="true",i.menu="true",i.flashVars="",(u.IE6||u.IE7||u.IE8)&&(i.movie=e.playerUrl),e.origin=e.origin||"swf_"+e.parentId,e.P00001=o.get("P00001")||"",e.fluid=o.get("QC005")||"",e.jsuid=o.get("QC006")||"",e.profileID=o.get("P00PRU")||"",e.profileCookie=o.get("P00007")||"",e.passportID=o.get("P00003")||"",e.vipuser=o.get("CM0001")||"",e.vv=o.get("QC004")||"",e.yhls=1*new Date+parseInt(1e11*Math.random(),10),e.playerCTime=e.plyct,e.pageCTime=e.pgct,e.webEventID=window.webEventID||"",e.tmplt=e.pageTmpltType||0,e.isSupportHtml5=t?"1":"0",e.definitionID=e.vid,e.tvId=e.tvid;for(var a=["tvid","vid","wmode"],r=0;r<a.length;r++)e.hasOwnProperty(a[r])&&delete e[a[r]];for(var s in e)void 0===e[s]||/^h5/gi.test(s)||(i.flashVars+=(/=/gi.test(i.flashVars)?"&":"")+s+"="+e[s]);var h=[];h.push('<object id="'+e.origin+'" height="100%" width="100%" data-player-playerbody="flash" '+(u.IE6||u.IE7?'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ':"")+'type="application/x-shockwave-flash" data="'+e.playerUrl+'">');for(var _ in i)i[_]&&h.push('<param name="',_,'" value="',i[_],'" />');var g="",m=document.getElementById(e.parentId);if(/micromessenger/.test(navigator.userAgent.toLowerCase()))g='<div style="background-color:#232323;width:100%;height:100%;position:absolute;top:0;left:0;z-index:100;"><div style="position:absolute;left:50%;margin-left:-180px;top:50%;margin-top:-40px;"><p style="text-align:center;margin-bottom:40px;color:#fff;">为保证观影体验，请使用系统浏览器观看视频。</p><p style="text-align:center;margin-bottom:40px;color:#fff;">或在微信客户端--通用设置中勾选”使用系统默认浏览器打开网页“。</p></div></div>';else{d.isTraditionalChinese()&&(c=f);var v={maintitle:"font-size:26px;margin-bottom:32px;font-weight:normal",tiptitle:"font-size:18px;margin-bottom:32px",iconflash:"width:124px;height:124px;border-radius:50%;display:block;margin:-6px auto 0;background:url(//www.iqiyipic.com/common/fix/iq-player/fla-player.png) no-repeat center;cursor:pointer;background-color:#131313",iconlink:"font-size:16px;color:#00be06;text-decoration:none;display:inline-block;margin-top:15px"},y={maintitle:"font-size:22px;margin-bottom:24px;font-weight:normal",tiptitle:"font-size:14px;margin-bottom:18px",iconflash:"width:100px;height:100px;border-radius:50%;display:block;margin:-2px auto 0;background:url(//www.iqiyipic.com/common/fix/iq-player/fla-player-l.png) no-repeat center;cursor:pointer;background-color:#131313",iconlink:"font-size:13px;color:#00be06;text-decoration:none;display:inline-block;margin-top:12px"},b=v;m.offsetWidth<=995&&(b=y),g+='<div style="position:absolute;top:0;left:0;right:0;bottom:0;background-color:#000;z-index:100">  <div style="text-align:center;overflow:hidden;position:absolute;width:100%;top:50%;margin-top:-115px;text-align:center;color:#ddd">    <h3 id="j_qpmaintitle" style="'+b.maintitle+'">'+c.error_maintitle+'</h3>\t<p id="j_qptiptitle" style="'+b.tiptitle+'">'+c.error_fltitle+'</p><a id="j_qpflashdown" href="//www.adobe.com/go/getflashplayer" target="_blank" onmouseover="this.style.backgroundColor=\'#171717\'" onmouseout="this.style.backgroundColor=\'#131313\'"style="'+b.iconflash+'"</a><a id="j_qpflashhelp" target="_blank" href="//help.iqiyi.com/questionInfo/4048.html" style="'+b.iconlink+'">'+c.error_fltip+"></a>  </div></div>"}h.push(g),h.push("</object>");var x=h.join(""),w=document.createElement("div");w.innerHTML=x;try{m.appendChild(w.firstChild),p(window,"resize",function(){var e=document.getElementById("j_qpflashdown");if(e){var t=document.getElementById("j_qpflashhelp"),i=document.getElementById("j_qpmaintitle"),a=document.getElementById("j_qptiptitle");m.offsetWidth<=995?(i.style.cssText=y.maintitle,a.style.cssText=y.tiptitle,e.style.cssText=y.iconflash,t.style.cssText=y.iconlink):(i.style.cssText=v.maintitle,a.style.cssText=v.tiptitle,e.style.cssText=v.iconflash,t.style.cssText=v.iconlink)}}),p(m,"click",function(e){e=e||event;var t=e.srcElement?e.srcElement:e.target,i=t.id;"j_qpflashdown"==i?l.cl("80720_errorpanel_flash"):"j_qpflashhelp"==i&&l.cl("80720_errorpanel_flash_explanation")}),l.pv("80720_errorpanel_flash"),n=document.getElementById(e.origin),n.loadSuccess=!1}catch(e){}return w=null,n}}});a.exports=h}.call(t,i,t,e))&&(e.exports=a)},function(e,t,i){var a;void 0!==(a=function(e,t,a){var n=i(0),r=i(4),o=i(11),s=i(5),d="http://msg.qy.net";"https:"==window.location.protocol&&(d="https://msg.qy.net");var l=n("PagePingBack",{construct:function(e,t){this.url=e||d+"/b",this.options=t||{}},methods:{pv:function(e,t){t=t||this.options,t.url=t.url||this.url,c({block:e,t:21},t)},cl:function(e,t){t=t||this.options,t.url=t.url||this.url;var i={t:20,rseat:e};r(i,t),!i.re&&window.document&&(i.re=[document.body.offsetWidth,document.body.offsetHeight].join("*")),c(i,t)}}}),u=new l,c=function(e,t){var i=t.url,a={pf:1,p:10,p1:101,p2:"1_10_101",jsuid:s.get("QC005"),u:s.get("QC005"),pu:s.get("P00003")};r(a,e),t.param&&"object"==typeof t.param&&(t.cover?a=t.param:r(a,t.param)),/^(http:|https:)?\/\/([\w.]+\/?)\S*$/.test(t.url)?i=t.url:t.url&&(i=d+t.url),o.beacon(a,i)};a.exports={create:function(e){return new l(e.url,e)},cl:function(e,t){u.cl(e,t)},pv:function(e,t){u.pv(e,t)}}}.call(t,i,t,e))&&(e.exports=a)}])});
//# EOF