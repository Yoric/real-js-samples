/*! mars 2019-02-15 03:02:10 */
!function(){if(!window.Mar){window.T0=(new Date).getTime(),window.Mar=function(){},Mar.stringify=function(a){function b(a){return'"'+a.replace(e,function(a){var b=f[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'}function c(a){return a<10?"0"+a:a}function d(a,e){var f,g,h,i,j=e[a],k=typeof j;switch(j&&"object"==typeof j&&"function"==typeof j.toJSON&&(j=j.toJSON(a),k=typeof j),k){case"string":return b(j);case"number":return isFinite(j)?String(j):"null";case"boolean":return String(j);case"object":if(!j)return"null";switch(Object.prototype.toString.call(j)){case"[object Date]":return isFinite(j.valueOf())?'"'+j.getUTCFullYear()+"-"+c(j.getUTCMonth()+1)+"-"+c(j.getUTCDate())+"T"+c(j.getUTCHours())+":"+c(j.getUTCMinutes())+":"+c(j.getUTCSeconds())+'Z"':"null";case"[object Array]":for(h=j.length,i=[],f=0;f<h;f++)i.push(d(f,j)||"null");return"["+i.join(",")+"]";default:i=[];for(f in j)Object.prototype.hasOwnProperty.call(j,f)&&(g=d(f,j),g&&i.push(b(f)+":"+g));return"{"+i.join(",")+"}"}}}if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(a);var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return d("",{"":a})},Mar.getUrlParam=function(){var a,b,c={},d=window.location.search.substring(1);if(d){a=d.split("&");for(var e=0,f=a.length;e<f;e++)b=a[e].split("="),c[b[0]]=b[1]}return c},Mar.getWapId=function(){function a(a){var b=document.getElementsByTagName("meta");for(i in b)if("undefined"!=typeof b[i].name&&b[i].name.toLowerCase()==a)return b[i].content;return null}var b=encodeURIComponent(a("vip-page-default-wapid"));return"null"!=b&&b?encodeURIComponent(b):""},Mar.getOSVersion=function(){function a(a,b){for(var c in b)if(b[c]==a)return c;return-1}var b,c,d,e,f,g=window.navigator.userAgent,h={os:"",ver:""};return b=g.match(/\(([^)]*)\)/),c=b[1],c&&c.match(/iPhone/i)?(h.os="IOS",e="OS"):(h.os="Android",e="Android"),d=c.split(" "),f=a(e,d),f!=-1&&(h.ver=d[++f],h.ver=h.ver&&h.ver.replace(/[_]/g,".")),h};var a;Mar.Base={},a=Mar.Base,a.local=document.location,a.domain=document.domain,a.docEle=document.documentElement,a.context="css1compat"===document.compatMode.toLowerCase()?document.body:a.docEle,a.monitor=window.screen,a.href=a.local.href,a.url=escape(a.href),a.wapId=window.Mar.getWapId(),a.osVersion=window.Mar.getOSVersion(),a.paramObj=window.Mar.getUrlParam(),a.pn=a.local.pathname.toLowerCase(),a.hn=a.local.hostname.toLowerCase(),a.ref=escape(document.referrer),a.cw=a.docEle.clientWidth,a.ch=a.docEle.clientHeight,a.res=a.monitor.width+"*"+a.monitor.height,a.col=a.monitor.colorDepth,a.w=a.context.width,a.h=a.context.height,a.nav=escape(navigator.userAgent.toLowerCase()),a.ce=navigator.cookieEnabled?1:0,a.title=escape(document.title)}}(),Mar.Util={detect:function(){var a,b,c,d=!1,e=window.navigator.userAgent;return/MSIE/.test(e)?(b="MSIE",/IEMobile/.test(e)&&(d=!0),c=/MSIE \d+[.]\d+/.exec(e)[0].split(" ")[1]):navigator.userAgent.match(/Trident.*rv[ :]*11\./)?(b="MSIE",c=11):/Chrome/.test(e)?(b="Chrome",c=/Chrome\/[\d\.]+/.exec(e)[0].split("/")[1]):/Opera/.test(e)?(b="Opera",(/mini/.test(e)||/Mobile/.test(e))&&(d=!0)):/Android/.test(e)?(b="Android Webkit Browser",d=!0):/Firefox/.test(e)?(b="Firefox",/Fennec/.test(e)&&(d=!0),c=/Firefox\/[\.\d]+/.exec(e)[0].split("/")[1]):/Safari/.test(e)&&(b="Safari",(/iPhone/.test(e)||/iPad/.test(e)||/iPod/.test(e))&&(d=!0)),c||(c=/Version\/[\.\d]+/.exec(e),c=c?c[0].split("/")[1]:void 0),a={browser:b,version:c,mobile:d}},isElement:function(a){return!(!a||"function"!=typeof HTMLElement&&"object"!=typeof HTMLElement||!(a instanceof HTMLElement))||!(!a||!a.nodeType||1!==a.nodeType)},getProtocal:function(){return document.location.href.toLowerCase().indexOf("https://")!==-1?"https://":"http://"},encryptCid:function(a){var b=a.split("_"),c=b[0],d=b[1];if(!c||!d)return a;for(var e=0,f=c.length,g=0;g<f;g++)e+=parseInt(c[g]);for(var h=e%32,i=e,j=d.length,g=0;g<j;g++)g!==h&&(i+=parseInt(d[g],16));var k=(i%16).toString(16);return c+"_"+d.substr(0,h)+k.toString()+d.substr(h+1,j)},getParameterByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.search);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))},getConfig:function(a){return"MarConfig"in window&&window.MarConfig&&window.MarConfig[a]?window.MarConfig[a]:""},pad:function(a,b){for(var c=a.toString().length;c<b;)a="0"+a,c++;return a},getDomain:function(){var a,b=document.domain.toLowerCase();return a=b.indexOf("vipshop.com")!==-1?"vipshop.com":b.indexOf("appvipshop.com")!==-1?"appvipshop.com":b.indexOf("vipglobal.hk")!==-1?"vipglobal.hk":b.indexOf("vpal.com")!==-1?"vpal.com":b.indexOf("ebatong.com")!==-1?"ebatong.com":"vip.com"},parseURL:function(a){var b=document.createElement("a");return b.href=a,{source:a,protocol:b.protocol.replace(":",""),host:b.hostname,port:b.port,query:b.search,params:function(){for(var a,c={},d=b.search.replace(/^\?/,"").split("&"),e=d.length,f=0;f<e;f++)d[f]&&(a=d[f].split("="),c[a[0]]=a[1]);return c}(),file:(b.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:b.hash.replace("#",""),path:b.pathname.replace(/^([^\/])/,"/$1"),relative:(b.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:b.pathname.replace(/^\//,"").split("/")}},getTimeSpan:function(){return parseInt(Mar.Util.getTimeSpanMillisecond()/1e3)},getTimeSpanMillisecond:function(){return(new Date).getTime()},Debounce:function(a,b,c){var d,e,f,g,h,i=Date.now||function(){return(new Date).getTime()},j=function(){var k=i()-g;k<b&&k>=0?d=setTimeout(j,b-k):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=i();var k=c&&!d;return d||(d=setTimeout(j,b)),k&&(h=a.apply(f,e),f=e=null),h}},getQueryStringByName:function(a,b){var c=b.match(new RegExp("[?&]"+a+"=([^&^#]+)","i"));return null==c||c.length<1?"":c[1]},getMetaByName:function(a){var b=document.getElementsByTagName("meta");for(i in b)if("undefined"!=typeof b[i].name&&b[i].name.toLowerCase()==a)return b[i].content;return null},isDetailPage:function(a){var b=!1;return!a||a.indexOf("shop.vipshop.com/detail")===-1&&a.indexOf("www.vip.com/detail")===-1&&a.indexOf("detail.vipglobal.hk")===-1||(b=!0),b}},Mar.Random={guid:function(){for(var a=0,b=[];a<8;)b.push((65536*(1+Math.random())|0).toString(16).substring(1)),a++;return b.join("").toUpperCase()},guid2:function(){function a(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},guid3:function(){function a(a,c,d){var e=b(a,16),f=new Array,g="",h=0;for(h=0;h<e.length;h++)f.push(e.substring(h,h+1));for(h=Math.floor(c/4);h<=Math.floor(d/4);h++)g+=f[h]&&""!=f[h]?f[h]:"0";return g}function b(a,b){return a.toString(b)}function c(a){return Math.floor(Math.random()*(a+1))}var d=new Date(1582,10,15,0,0,0,0),e=new Date,f=e.getTime()-d.getTime(),g=a(f,0,31),h=a(f,32,47),i=a(f,48,59)+"1",j=a(c(4095),0,7),k=a(c(4095),0,7),l=a(c(8191),0,7)+a(c(8191),8,15)+a(c(8191),0,7)+a(c(8191),8,15)+a(c(8191),0,15);return g+h+i+j+k+l},rand:function(a){var b="0123456789abcdef",c="",d=0;for(a=a||32;d<a;d++)c+=b.charAt(Math.ceil(1e8*Math.random())%b.length);return c}},Mar.Cookie={get:function(a){for(var b=document.cookie?document.cookie.split(";"):[],c=0;c<b.length;c++){var d=b[c].trim().split("="),e=d[0],f=unescape(d[1]);if(a===e)return f}},getAll:function(){for(var a={},b=document.cookie?document.cookie.split(";"):[],c=0;c<b.length;c++){var d=b[c].trim().split("="),e=d[0],f=unescape(d[1]);a[e]=f}return a},set:function(a,b,c){var d=Mar.Util.getDomain();0===c?document.cookie=a+"="+escape(b)+";path=/;domain=."+d:(date=new Date,date.setTime(date.getTime()+24*c*3600*1e3),document.cookie=a+"="+escape(b)+";expires="+date.toGMTString()+";path=/;domain=."+d)},del:function(a){var b=Mar.Util.getDomain();document.cookie=a+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; path=/;"+(b?"domain="+b:"")}},window.localStorage&&(Mar.Storage={set:function(a,b,c){var d=[];if(c){var e=(new Date).getTime();d.push({expires:e+1e3*c})}d.push(b),localStorage.setItem(a,Mar.stringify(d))},get:function(a){var b=localStorage.getItem(a);if(null==b||void 0==b)return b="";try{b=JSON.parse(b)}catch(a){}if("object"!=typeof b)return b;if("string"==$.type(b[0]))return b[0];if("object"==$.type(b))return b;var c=b[0]&&b[0].expires;if(c&&/^\d{13,}$/.test(c)){var d=(new Date).getTime();if(c<=d)return localStorage.removeItem(a),"";b.shift()}return b[0]},remove:function(a){localStorage.removeItem(a)}}),function(){Mar.PageIdIndex=0,Mar.PageId=Mar.PageId?Mar.PageId+"_"+ ++Mar.PageIdIndex:(new Date).getTime()+"_"+Mar.Random.guid3(),Mar._MyCid=null,Mar.Biz=function(){var a=Mar.Cookie,b=a.getAll,c=a.set,d=a.del,e=0,f=0,g=b(),h=g.mars_cid||g.cookie_id,i=g.mars_pid||g.page_id,j=g.mars_sid||Mar.Random.rand(),k=g.visit_id||Mar.Random.guid(),l=window.mars_var?Mar.stringify(window.mars_var):"-",m=g["WAP[p_wh]"],n=g["WAP[auth]"]||g.login_username,o=g["WAP[revision]"],p=g["WAP[p_wh]"],q=g.warehouse,r=g.WAP_ID,s=g["WAP[from]"],t=g.cps_u,u=g.m_vipruid;n&&(e=1),(!h||32!==(h+"").length&&46!==(h+"").length)&&(null!=Mar._MyCid?h=Mar._MyCid:(h=Mar.Util.encryptCid(Mar.Util.pad((new Date).getTime(),13)+"_"+Mar.Random.rand()),f=1,Mar._MyCid=h)),i=i||0,i++,d("cookie_id"),d("page_id"),c("mars_pid",i,732);var v=h.split("_")[0];return(new Date).getTime()+632448e5-v>0&&c("mars_cid",h,732),c("mars_sid",j,0),c("visit_id",k,.5/24),{cid:h,pid:i,sid:j,vid:k,wh:m,mvar:l,wapln:n,wapvs:o,wappwh:p,wapwh:q,wapid:r,wapfrom:s,cpsu:t,ruid:u,newbie:f,isLog:e,pageId:Mar.PageId}}}(),Mar._Request={send:function(a,b){var c=Mar.Base,d=Mar.Biz(),e=Mar.Util.getDomain(),f=Mar.Util.getProtocal()+"mar."+e+a+"&mars_cid="+d.cid+"&mars_sid="+d.sid+"&pi="+d.pid+"&mars_vid="+d.vid+"&mars_var="+d.mvar+"&lg="+d.isLog+"&wh="+d.wh+"&in="+d.newbie+"&sn="+d.orderId+"&url="+window.Mar._Request.fixUrlByCommonParas(c.url)+"&os="+c.osVersion.os+"&ver="+c.osVersion.ver+"&sr="+c.res+"&rf="+c.ref+"&bw="+c.cw+"&bh="+c.ch+"&sc="+c.col+"&bv="+c.nav+"&ce="+c.ce+"&vs=&title="+c.title+"&tab_page_id="+d.pageId+"&vip_qe="+d.vip_qe+"&vip_qt="+d.vip_qt+"&vip_xe="+d.vip_xe+"&vip_xt="+d.vip_xt;if(b&&(f+="&wap_ln="+d.wapln+"&wap_vs="+d.wapvs+"&wap_pwh="+d.wappwh+"&wap_wh="+d.wapwh+"&wap_id="+d.wapid+"&wap_from="+d.wapfrom+"&cps_u="+d.cpsu+"&m_vipruid="+d.ruid),f+="&r="+Math.random(),f.length<=6144){var g=new Image(1,1);g.onload=g.onerror=g.onabort=function(){g.onload=g.onerror=g.onabort=null,g=null},g.src=f}return Mar},sendDefineRequest:function(a){for(var b=0,c=a.length;b<c;b++){var d=new Image(1,1),e=/__TS__/g,f=a[b].replace(e,Date.now());d.onload=d.onerror=d.onabort=function(){d.onload=d.onerror=d.onabort=null,d=null},d.src=f}},fixUrlByCommonParas:function(a){var b="mars_",c=["width","height","area_id","net","vipruid","app_name","source","warehouse","app_version","client","mars_cid","mobile_platform","mobile_channel","idfv","protocol_version","tab_page_id"],d=window.Mar.Base.paramObj,e=unescape(a),f=e,g="",h=e.indexOf("#"),i=e.indexOf("?")>-1?"&":"?";if(h>-1&&(f=e.substr(0,h),g=e.substr(h)),window.localStorage)for(var j=0,k=c.length;j<k;j++){var l=c[j],m=Mar.Util.getParameterByName(l);if(""==m){if(m=Mar.Storage.get(b+l),""!=m){var n=f.indexOf("?")==-1?"?":"&";f=f+n+l+"="+m}}else Mar.Storage.set(b+l,m,3600)}return d&&!d.wapid&&""!=window.Mar.Base.wapId&&(f+=i+"wapid="+window.Mar.Base.wapId),e=f+g,escape(e)}},Mar.Request=Mar._Request.send,Mar.PV={init:function(){var a=this;this.sendPV("forward"),document.addEventListener("visibilitychange",function(){document.hidden||a.sendPV("backforward")});var b,c=window.performance.timing;return b=setInterval(function(){0!==c.loadEventEnd&&(clearInterval(b),Mar.PV.sendDomReady())},100),Mar},sendPV:function(a){var b=Mar.Cookie.get("mar_ref")||"";Mar._Request.send("/w?it="+window.T0+"&mar_ref="+b+"&action="+a,!0)},sendDomReady:function(){var a=Math.round(window.performance.timing.domContentLoadedEventEnd/1e3);Mar._Request.send("/v?it="+window.T0+"&dr="+a,!0)}},Mar.Seed={typeEnum:{inputbutton:"button",inputsubmit:"button",inputtext:"inputText",inputinput:"inputText",inputradio:"radio",inputcheckbox:"checkbox",adownload:"download",a:"link",span:"span",button:"button"},data:{page_type:"",page_id:""},init:function(){var a=this;return this.data.page_type=Mar.Util.getConfig("pageType"),""==this.data.page_type&&(this.data.page_type="unknown"),this.data.page_id=this.data.page_type+"_"+window.T0,$("body").delegate("[mars_sead]:not(select)","click",function(b){var c=$(this);a._onclick(c)}).delegate("select[mars_sead]","change",function(){a.request("select","change",$(this).attr("mars_sead"))}).delegate("[mars_exposure_clktrackers]","click",function(b){var c=$(this);a.selfDefineRequest(JSON.parse(c.attr("mars_exposure_clktrackers")))}),Mar},_onclick:function(a){var b,c,d,e=a[0].tagName.toLowerCase();"a"===e?(b=a.attr("href"),d=this.typeEnum[e+(b?this._isDownload(b.toLowerCase()):"")]):(b=a.attr("type"),c=this.typeEnum[e+(b?b.toLowerCase():"")],d=c?c:e),this.request(d,"click",a.attr("mars_sead"),a.attr("data_mars"))},selfDefineRequest:function(a){Mar._Request.sendDefineRequest(a)},request:function(a,b,c,d){this.requestUsePath("/b",a,b,c,d)},requestUsePath:function(a,b,c,d,e){var f=(new Date).getTime()-window.T0;Mar._Request.send(a+"?at="+f+"&et="+b+"&ed="+c+"&page_type="+this.data.page_type+"&page_id="+this.data.page_id+"&one="+encodeURIComponent(d)+"&data_mars="+(e||""),!0)},_isDownload:function(a){return/.*\.\w*$/.test(a)&&$.inArray(a.match(/\.(\w*)$/i)[1],["rar","zip","exe","doc","ppt","xls","docx","xlsx","pptx","sisx","apk"])!==-1?"download":""}},Mar.Screen={win:$(window),body:$("body"),screenHeight:0,config:{ExposureDom:$(window),frequency:2e3,getScreenCount:null},data:{exposureIndexObj:{},exposureIndex:[]},init:function(a){var b=this;$.extend(b.config,a),Mar.Util.isElement(b.config.ExposureDom)&&(this.config.ExposureDom=$(this.config.ExposureDom)),this.screenHeight=this.win.height(),this.bindEvent(),this.startTimer()},bindEvent:function(){var a=this;this.config.ExposureDom.on("scroll.mars",Mar.Util.Debounce(function(){a.getExposureScreen()},300))},getExposureScreen:function(){var a=Math.ceil(this.config.ExposureDom.scrollTop()/this.screenHeight);this.data.exposureIndexObj[a]||(this.data.exposureIndexObj[a]=!0,this.data.exposureIndex.push(a))},startTimer:function(){var a=this;a.getExposureScreen(),this.timer=setInterval(function(){a.data.exposureIndex.length>0&&a._request("setInterval")},this.config.frequency)},_request:function(a){var b="screen_expose",c=null==this.config.getScreenCount?Math.ceil(this.config.ExposureDom.height()/this.screenHeight):this.config.getScreenCount(),d={current_page_num:this.data.exposureIndex,total_page_num:c},e=JSON.stringify(d);Mar.Seed.requestUsePath("/b","link","screen",b,e),this.data.exposureIndex=[]}},Mar.Performance=function(a){var b,c,d,e=window.performance,f=a?0:1;return e&&(b=e.timing,f?d=setInterval(function(){0!==b.loadEventEnd&&(clearInterval(d),c=pfDataProcessing(e),sendData(c,f),setTimeout(function(){Mar.Performance(f)},2e3))},100):(c=pfDataProcessing(e),sendData(c,f))),Mar};var pfDataProcessing=function(a){var b,c=a.timing,d=a.navigation;b={navigation:c.loadEventEnd-c.navigationStart,unloadEvent:c.unloadEventEnd-c.unloadEventStart,redirect:c.redirectEnd-c.redirectStart,domainLookup:c.domainLookupEnd-c.domainLookupStart,connect:c.connectEnd-c.connectStart,request:c.responseEnd-c.requestStart,response:c.responseEnd-c.responseStart,domLoading:c.domInteractive-c.domLoading,domInteractive:c.domContentLoadedEventEnd-c.domInteractive,domContentLoaded:c.domContentLoadedEventEnd-c.domContentLoadedEventStart,domComplete:c.domComplete-c.domLoading,loadEvent:c.loadEventEnd-c.loadEventStart,fetch:c.responseEnd-c.fetchStart,type:d.type,timeTofirstByte:c.responseStart-c.navigationStart,appcache:c.domainLookupStart?c.domainLookupStart-c.fetchStart:c.connectStart?c.connectStart-c.fetchStart:c.requestStart-c.fetchStart};if(a.getEntries){for(var e=performance.getEntries(),f={},g=0,h=e.length;g<h;g++){var i=e[g];if(f[i.initiatorType]||void 0==i.initiatorType){if(f[i.initiatorType]){var j=f[i.initiatorType].n,k=f[i.initiatorType].t;f[i.initiatorType]={n:++j,t:Math.ceil(k+i.duration)}}}else f[i.initiatorType]={n:1,t:Math.ceil(i.duration)}}b.entriesTotal=e.length,b.initiatorType=Mar.stringify(f)}return b},sendData=function(a,b){Mar.Request("/a?ps_nav="+a.navigation+"&ps_ule="+a.unloadEvent+"&ps_rd="+a.redirect+"&ps_dlu="+a.domainLookup+"&ps_con="+a.connect+"&ps_req="+a.request+"&ps_resp="+a.response+"&ps_dl="+a.domLoading+"&ps_di="+a.domInteractive+"&ps_dcl="+a.domContentLoaded+"&ps_dc="+a.domComplete+"&ps_le="+a.loadEvent+"&ps_ft="+a.fetch+"&ps_ty="+a.type+"&ps_ttfb="+a.timeTofirstByte+"&ps_ac="+a.appcache+"&entry="+a.entriesTotal+"&enType="+a.initiatorType+"&isInit="+b||0)};!function(){Mar.Exposure=function(){var a,b=this,c="",d=encodeURIComponent(document.title),e=Mar.Util.getQueryStringByName("extra_banner",location.href),f=0,g=0,h=!1,i=0,j={},k=[],l={},m=[],n=0,o=0;e=""==e?0:e,this.Exposure._request=function(a,b){var h="mst"==c||"h5"==c?"special_slide_expose":"wap_brand_expose",i={page:d,wap_id:f.toString(),special_id:g.toString(),banner_id:e.toString(),item_cnt:k.length.toString(),item_list:k.join(","),browse_length:"request"==a?"0":n.toString(),browse_time:"request"==a?"0":o.toString(),expose_time:Mar.Util.getTimeSpan().toString(),source:a},l=JSON.stringify(i);Mar.Seed.request("link","scroll",h,l),j={},k=[],n=0,o=0},this.Exposure.afterGetData=function(a,b){k.length>10&&this._request(a,b),m.length>5&&(Mar.Seed.selfDefineRequest(m),m=[],l={})},this.Exposure.startTimer=function(){var b=this;a=setInterval(function(){k.length>0&&b._request("setInterval","0_0"),m.length>0&&(Mar.Seed.selfDefineRequest(m),m=[],l={})},2e3)},this.Exposure.endTimer=function(){clearInterval(a)},this.Exposure.getItemByArrModule=function(a,b){var d=!1,e={key:"",val:""},f=null,g=[];if(c=""==c?a[0]:c,""==c)return e;switch(c){case"wap":switch(a[1]){case"brands":g.push(0),g.push(a[6]?a[6]:""),d=!0;break;case"products":g.push(1),g.push(a[2]?a[2]:""),d=!0;break;case"specials":g.push(3),g.push(a[6]?a[6]:""),d=!0;break;case"operates":g.push(4),g.push(a[6]?a[6]:""),d=!0;break;case"adverts":g.push(5),g.push(a[6]?a[6]:""),d=!0}d&&g.push(b+1),g.push(a[7]?a[7].replace(new RegExp("_","gm"),"."):"");break;case"mst":case"h5":switch(a[1]){case"brands":g.push(0),g.push(a[2]?a[2]:""),d=!0;break;case"products":g.push(1),g.push(a[5]?a[5]:""),d=!0;break;case"specials":g.push(3),g.push(a[2]?a[2]:""),d=!0;break;case"operates":g.push(4),g.push(a[2]?a[2]:""),a[4]&&(f=a[4]),d=!0;break;case"adverts":g.push(5),g.push(a[2]?a[2]:""),d=!0;break;case"brandSn":g.push(6),g.push(a[2]?a[2]:""),d=!0;break;case"articles":g.push(7),g.push(a[2]?a[2]:""),d=!0;break;case"dOperates":g.push(8),g.push(a[2]?a[2]:""),d=!0;break;case"topic_in":g.push(9),g.push(a[2]?a[2]:""),d=!0}d&&g.push(a[3]?a[3].replace("_","."):""),null!=f&&g.push(f)}return d&&(e.key=g[1]+"&"+g[2],e.val=g.join("_")),e},this.Exposure.getDataList=function(a,b){var c=this;$("[mars_exposure_sead],[data-mars_exposure_sead]").each(function(d){var e,f=$(this).offset().top+$(this).height()/2,g=$(this);if(f>a&&f<=b){if(e=g.attr("mars_exposure_module")?g.attr("mars_exposure_module").split("|"):g.attr("data-mars_exposure_module")&&g.attr("data-mars_exposure_module").split("|"),!e)return;if("adverts"!=e[1]||"adverts"==e[1]&&g.hasClass("active")){var h=c.getItemByArrModule(e,d);""!=h.key&&void 0==j[h.key]&&(j[h.key]=h.val,k.push(h.val))}}}),$("[mars_exposure_imptrackers]").each(function(c){var d,e=$(this).offset().top+$(this).height()/2,f=$(this),g=f.attr("mars_exposure_imptrackers");if(e>a&&e<=b){if(d=g?JSON.parse(g):"",!d)return;void 0==l[g]&&(l[g]=1,m=m.concat(d))}})},this.Exposure.getData=function(b,c,d,e){var f=this;if(!h){h=!0,a&&f.endTimer(),i=Mar.Util.getTimeSpanMillisecond(),$("[mars_container_slice]").length?$("[mars_container_slice]").each(function(a){var b=$(this),e=b.offset().top;if(c=Mar.getDefaultScrollTop(),d=c+$(window).height(),e+b.height()>c&&e<=d){var g=e>c?e:c,h=e+b.height()>d?d:e+b.height();f.getDataList(g,h)}}):f.getDataList(c,d);var g=c+"_"+d;n+=Math.abs(this.lastTop-d),o+=Math.abs(this.lastDate-i),f.afterGetData(e,g),f.startTimer(),f.lastScrollTop=b,f.lastTop=d,f.lastDate=i,h=!1}},this.Exposure.request=function(b){function c(a,b){var c=d.getItemByArrModule(a,b);""!=c.key&&void 0==j[c.key]&&(j[c.key]=c.val,k.push(c.val))}var d=this;if(!h){if(h=!0,a&&d.endTimer(),i=Mar.Util.getTimeSpanMillisecond(),"string"==typeof b)c(b.split("|"),0);else for(var e=0,f=b.length;e<f;e++)c(b[e].split("|"),e);this.afterGetData("request","0_0"),d.startTimer(),d.lastDate=i,h=!1}},this.Exposure.getWinHeight=function(){var a;return this.winHeight>100?a=this.winHeight:(a=this.ExposureDom.height(),this.winHeight=a),a},this.Exposure.isFirst=!0,this.Exposure.opt={hasExposureDom:!1},this.Exposure.init=function(){var a=this;if(this.winHeight=null,"MarConfig"in window&&window.MarConfig&&window.MarConfig.ExposureDom?(a.opt.hasExposureDom=!0,a.ExposureDom=$(window.MarConfig.ExposureDom)):a.ExposureDom=$(window),"config"in window&&window.config&&window.config.data){if(f=void 0==window.config.data.id?0:window.config.data.id,0!=f){var b=Mar.Util.parseURL(location.href).host;f=b.split(".")[0]+"_"+f}g=void 0==window.config.data.build_id?0:window.config.data.build_id}this.getWinHeight(),this.lastTop=0,this.lastScrollTop=Mar.getScroll(a.opt),this.lastDate=Mar.Util.getTimeSpanMillisecond();var c;this.ExposureDom.on("touchstart.mars",function(){c&&clearTimeout(c);var b=Mar.getScroll(a.opt);a.isFirst=!1,b!=a.lastTop?a.onScroll("touchstart"):a.lastDate=Mar.Util.getTimeSpanMillisecond()}).on("scroll.mars",Mar.Util.Debounce(function(){c&&clearTimeout(c),a.onScroll("scroll")},300)),c=setTimeout(function(){var b=Mar.getScroll(a.opt),c=b+a.getWinHeight();a.getData(b,b,c,"init")},2e3)},this.Exposure.onScroll=function(a){var b,c,d=this,e=Mar.getScroll(d.opt);if(e>this.lastScrollTop)b=this.lastTop,c=e+this.getWinHeight();else{if(!(e<this.lastScrollTop))return;b=e,c=this.lastScrollTop}this.getData(e,b,c,a)},this.Exposure.restart=function(){this.init()},$(document).ready(function(){b.Exposure.init()}),this.Exposure.startTimer()},Mar.getDefaultScrollTop=function(){return document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body?document.body.scrollTop:0},Mar.getScroll=function(a){return a&&a.hasExposureDom?Mar.Exposure.ExposureDom[0].scrollTop:self.pageYOffset?self.pageYOffset:Mar.getDefaultScrollTop()}}(),function(){Mar.Performance().Exposure(),Mar.PV.init().Seed.init()}();