function asyncGeneratorStep(e,n,t,o,r,i,a){try{var c=e[i](a),s=c.value}catch(u){return void t(u)}c.done?n(s):Promise.resolve(s).then(o,r)}function _asyncToGenerator(e){return function(){var n=this,t=arguments;return new Promise(function(o,r){function i(e){asyncGeneratorStep(c,o,r,i,a,"next",e)}function a(e){asyncGeneratorStep(c,o,r,i,a,"throw",e)}var c=e.apply(n,t);i(void 0)})}}define(["common/user-agent-analyzer","common/moment","common/tracker","common/locator","common/config","vendors/domReady","vendors/dmp"],function(e,n,t,o,r,i){"use strict";function a(){var e=document.createElement("div");return e.innerHTML="&nbsp;",e.className="adsbox",document.body.appendChild(e),new Promise(function(n){window.setTimeout(function(){0===e.offsetHeight?n(!0):(e.parentNode.removeChild(e),n(!1))},100)})}function c(){return s.apply(this,arguments)}function s(){return s=_asyncToGenerator(regeneratorRuntime.mark(function e(){var i,c,s,u,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return i=e.sent,c=r.page.dmp,s=r.xiti.site,u=n().hour(),e.next=8,o.getIp(!0);case 8:m=e.sent,window._datapythagore=Object.assign({},window._datapythagore,c,{c_xtsite:t.getXtsite(s),c_s_device:d.device,c_s_orientation:window.innerHeight>window.innerWith?"portrait":"paysage",c_s_adblock:i?"1":"0",c_s_os:d.os,c_moment_jourdate:n().format("YYYY-MM-DD"),c_moment_journomme:n().format("dddd"),c_moment_heure:u.toString(),c_notifications_abonne:"",c_authenticated:"0",c_notifications_type:"notification web",c_aip:m}),document.referrer&&""!=document.referrer&&0==document.referrer.search(".lci.fr")&&(window._datapythagore.c_referer=document.referrer);case 11:case"end":return e.stop()}},e,this)})),s.apply(this,arguments)}function u(){window._satellite.pageBottom()}var d=e.analyze();return new Promise(function(e,n){i(function(){c().then(function(){u(),e()})["catch"](function(e){console.error("DMP initialization failed"),console.error(e),n(e)})})})});