/* 2019-02-18 10:55:25 */!function(e){function t(i){if(o[i])return o[i].exports;var s=o[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";o(12)();var i=o(4),s=o(2),n=i.makeNS(window,"YAHOO.JP.News.comment");s.extend(n,{TopView:o(13),ErrorView:o(29)})},,function(e,t){e.exports=_},,function(e,t,o){var i=o(2),s=function(){var e={},t=location.search.slice(1),o=t?t.split("&"):[];return i(o).each(function(t){var o=t.split("="),i=$.trim(o[0]),s="undefined"!=typeof o[1]?$.trim(decodeURIComponent(o[1])):"";e[i]=s}),function(t){return e[t]}}(),n=function(){var e=/^https?:\/\/[a-zA-Z0-9._-]+\.yahoo\.co\.jp(:[0-9]+)?$/,t=s("origin");return"*"===t?t:t&&e.test(t)?t:"https://headlines.yahoo.co.jp"}(),r=function(){var e=/^\/[a-zA-Z\/._-]+$/,t=s("iframe_path");return t&&e.test(t)?t:"/comment/communicateframe"}(),a=function(e,t,o){o=o||{};var s=i.template(e),n=$(s({message:t})).hide();return i.delay(function(){n.slideDown(500,function(){n.find("p").css({visibility:"visible",opacity:1}).animate({opacity:1},200,function(){o.onshow&&o.onshow()}).delay(3e3).animate({opacity:0},200),n.delay(3500).slideUp(500,function(){n.remove(),o.onhide&&o.onhide()})})}),n},l=e.exports={getParentOrigin:function(){return n},getGrandChildIframePath:function(){return r},getGetParam:s,disableLinksTemporarily:function(e,t){e.each(function(){var e=$(this),o=e.attr("href");e&&(e.removeAttr("href"),setTimeout(function(){e.attr("href",o)},t))})},makeNS:function(e,t){var o=t.split(".");return i.reduce(o,function(e,t){return e[t]||(e[t]={}),e[t]},e)},linkDataSec:function(){return function(e){var t=[];return{add:function(e){t.push({params:e})},get:function(){return 0===t.length?[]:[{mod:{name:e},links:t}]}}}}(),getRapidInstance:function(e,t,o){var n=i.extend({rpdprop:"news"},o||{}),r=s("bkt"),a=s("flt");return r&&(n.vtestid=r),a&&(n.v_pkjp=a),YAHOO.i13n.Beaconer({beacon_server:"ybx.yahoo.co.jp",https:!0,keys:n,link_data:t,spaceid:e})},sendViewBeacon:function(e,t,o){var i=l.getRapidInstance(e,t,o);i.doViewBeacon(0)},makeRandomString:function(){return Math.floor(1e9*Math.random()).toString(32)},sendGeneralPurposeBeacon:function(){function e(e,t){var o=$.param(i.extend({random:l.makeRandomString()},r.defaultParams,e)),s=new Image;s.onload=t||function(){},s.src=r.beaconEndPoint+"?"+o}var t={},o=s("bkt"),n=s("flt");o&&(t.vtestid=o),n&&(t.v_pkjp=n);var r={beaconEndPoint:"https://ybx.yahoo.co.jp/clear.gif",defaultParams:t};return e}(),resizePanel:function(e){var t,o,i,s=$(".panel","#"+e),n=$("#"+e);t=n.height()<365?n.height()-40+"px":"100%","smartphone"===this.device?(i=20,o=10):(i=50,o=30),s.css({position:"absolute",width:n.width()-i+"px",height:t,top:"-2px",left:o+"px"})},makeAlertForReaction:function(e,t){var o='<div class="reactionAlertBox"><p>{{=message}}</p></div>';return a(o,e,t||{})},makeAlertForInputForm:function(e,t){var o='<div class="msgBox"><div class="alertBox"><div class="alert"><p>{{=message}}</p></div></div>';return a(o,e,t||{})},showAlert:function(e){var t,i,s=o(5),n=this.model.page,r=function(){n.sendMessage({eventName:"adjustheight"})},a={onshow:r,onhide:r};this instanceof s?(i=$(".inputAreaHd",this.$el),t=l.makeAlertForInputForm(e,a),t.appendTo(i)):(i=$("root"===this.model.comment.get("type")?".root .votes-response":".votes-response",this.$el),t=l.makeAlertForReaction(e,a),t.insertAfter(i))},makeTwitterShareURL:function(e,t){var o="https://twitter.com/intent/tweet";return t=t||{},o+"?"+$.param({text:e,hashtags:t.hashtags,url:t.url,related:t.related})},makeFacebookShareURL:function(e){var t="https://www.facebook.com/sharer/sharer.php";return t+"?"+$.param({u:e})},openWindow:function(e,t,o){window.open(e,t,i.map(i.keys(o||{}),function(e){return e+"="+o[e]}).join(","))},isDefaultProfileIconPath:function(e){return 0===e.indexOf("https://s.yimg.jp/images/bloom/v201212/anonymous")},isiOS:function(){return navigator.userAgent.indexOf("iPhone")!==-1},isAndroid:function(){return navigator.userAgent.indexOf("Android")!==-1},trimText:function(e,t){e=e.replace(/<br \/>/g," ");var o=e.substr(0,t);return t<e.length?o+"...":e}}},function(e,t,o){"use strict";var i=o(4),s=o(2),n=o(6),r=(window.YAHOO,o(7)),a=i.getGetParam("bkt")||"",l=function(e){this.model=e.model,this.type=e.type,"new"===this.type?(this.$el=n("#inputarea-header"),this.$form=n("#textarea-header"),this.$compact=e.$compact):(this.$el=n("#"+this.model.comment.formId),this.$form=n("#"+this.model.comment.get("textAreaId"))),this.$count=n(" .count em",this.$el),this.$button=n(".btnSubmit",this.$el),n(".noticeSettingBox",this.$el).find('input[type="checkbox"]').on("change",n.proxy(function(){var e=n(".noticeSettingBox",this.$el).find('input[type="checkbox"]').prop("checked");this.model.form.set("mailOpt",e?"checked":"")},this)),this.model.form.get("isLogin")||n(".panel .cancel",this.$el).on("fastclick",n.proxy(function(e){if(e.preventDefault(),this.model.form.get("dispLoginPanel"))return!1;this.model.form.set("dispLoginPanel",!0),this.$el.hide(),n(".panel",this.$el).hide();var t="new"===this.type?"resizeLoginAlertPanel":"resizeLoginAlertPanel-"+this.model.comment.get("formId");this.model.page.hundleScreenEvent("window").off({eventName:t}),this.closeForm.call(this)},this)),n(".closeIconArea a",this.$el).on("click",n.proxy(function(e){e.preventDefault(),this.closeForm.call(this)},this)),n(".emoticonList ul li a",this.$el).on("fastclick",function(e){e.preventDefault(),n(this).closest("ul").find("li a").removeClass("selected"),n(this).attr("class","selected"),n(this).closest(".inputAreaMain").find(".selectIcName").text(n(this).text())});var t=function(e,t,o){return parseInt(e.css(t),10)||o},o=n("textarea",this.$el),l=t(o,"height",128),d=t(o,"lineHeight",21);o.css({minHeight:l+"px",height:"auto",lineHeight:d+"px"}),o.on("input",function(e){var t=20,o=n(e.target);o.height(l-t),o.height(Math.max(e.target.scrollHeight,l)-t)}),o.on("focus",n.proxy(function(){n(this.$form).parent().addClass("is-focus")},this)),o.on("blur",n.proxy(function(){n(this.$form).parent().removeClass("is-focus")},this)),o.on("change focus blur keyup",n.proxy(function(){this.model.form.validation(this.$form.val())},this)),this.model.form.bind("valid",n.proxy(function(e,t){t.status?("error"===this.$count.attr("class")&&this.$count.attr("class",""),this.$button.prop("disabled")===!0&&this.$button.prop("disabled",!1).removeClass("disabled").addClass("primary")):(0!==t.count&&this.$count.attr("class","error"),this.$button.prop("disabled")===!1&&this.$button.prop("disabled",!0).removeClass("primary").addClass("disabled")),setTimeout(n.proxy(function(){this.$count.text(t.count)},this),0)},this)),this.$button.on("fastclick",n.proxy(function(e){return e.preventDefault(),!this.model.form.get("sended")&&(!!this.model.form.get("formStatus")&&(this.model.form.set("sended",!0),this.$button.addClass("processing"),void this.model.form.set("post",{propertyId:this.model.page.get("propertyId"),type:this.type,comment:this.$el.find("textarea").val(),commentNum:this.model.page.get("totalCommentsNum"),parentId:"undefined"!=typeof this.model.comment?r.list.fetch(this.model.comment,"comments").root.commentId:"",articleId:this.model.page.get("articleId"),topicId:this.model.page.get("topicId"),setMail:this.model.form.get("setMail"),mailOpt:this.model.form.get("mailOpt"),mediaId:this.model.page.get("mediaId"),categoryId:this.model.page.get("categoryId"),payFlag:this.model.page.get("payFlag"),articleUrl:this.model.page.get("articleUrl"),articleTitle:this.model.page.get("articleTitle"),thumbnailUrl:this.model.page.get("thumbnailUrl"),crumb:this.model.page.get("crumb")},this)))},this)),this.model.form.bind("post",n.proxy(function(e,t){var o="result-"+(new Date).getTime(),r=s.template(n("#complete-template").html())({bucketId:a,type:"new"===this.type?"root":"child",id:o,previewComment:t.previewComment,profileImgUrl:this.model.form.get("profileImgUrl"),profileImgWidth:this.model.form.get("profileImgWidth"),profileImgHeight:this.model.form.get("profileImgHeight"),dispName:this.model.form.get("dispName"),wallUrl:this.model.form.get("wallUrl"),isDefaultProfileIconPath:i.isDefaultProfileIconPath(this.model.form.get("profileImgUrl"))});"new"===this.type?(n("#contentsWrapper .content .bd").size()||n("#contentsWrapper .content").html("").append('<div class="bd"><ul class="commentList" aria-live="polite" /></div>'),n("#contentsWrapper .content .bd:not(.author) .commentList:first").prepend(r)):(n(".response","#"+this.model.comment.get("id")).size()||n(".action","#"+this.model.comment.get("id")).after('<ul class="response" />'),n(".response .compactForm","#"+this.model.comment.get("id")).before(r)),this.closeForm.call(this,{option:"complete",id:o})},this)),this.model.form.bind("error",n.proxy(function(e,t){"smartphone"===this.model.page.device&&setTimeout(n.proxy(function(){this.model.page.sendMessage({eventName:"dispform",data:this.$el.offset().top})},this),300),setTimeout(n.proxy(function(){this.model.form.set("sended",!1)},this),4500),this.$button.removeClass("processing"),this.model.form.showAlert.call(this,t.message,"post")},this))};l.prototype={openForm:function(e){var t,o=0;"new"===e?(n("#inputarea-header").show(),this.model.form.get("isLogin")&&n("#textarea-header").focus(),this.model.page.resizePanel("inputarea-header"),t=n("#tabElem0")):"reply"===e&&(n("#"+this.model.comment.get("formId")).fadeIn("fast"),this.model.page.resizePanel(this.model.comment.get("formId")),this.model.form.get("isLogin")&&n("#"+this.model.comment.get("textAreaId")).focus(),t=n(".inputArea",this.$el)),o=t.offset().top,o<0&&(o*=-1),this.model.page.sendMessage({eventName:"dispform",data:o})},closeForm:function(e){var t=e||{};"complete"===t.option?(this.$button.removeClass("processing"),this.model.form.set("sended",!1),this.$el.remove(),setTimeout(n.proxy(function(){var e=n("#"+t.id).offset().top;e<0&&(e*=-1),this.model.page.sendMessage({eventName:"postcomment",data:e}),this.close()},this),300)):this.$el.hide(),this.model.comment&&n("#"+this.model.comment.get("id")).find(".compactForm").show(),"new"===this.type?(this.$compact.show(),this.model.form.set("loadedForm",!1,this)):(n(".reply","#"+this.model.comment.get("id")).removeClass("isShown"),this.model.comment.set("loadedReplyForm",!1,this))},close:function(){n(".panel",this.$el).off("fastclick",".cancel"),n(".closeIconArea a",this.$el).off("click"),n(".emoticonList ul li a",this.$el).off("fastclick"),n("textarea",this.$el).off("change focus blur keyup"),this.$button.off("fastclick"),n(".noticeSettingBox",this.$el).off("change"),this.model.form.unbind("post"),this.model.form.unbind("error"),this.model.form.unbind("valid"),this.model.form.trigger("delFormViewInstance"),this.model=null}},e.exports=l},function(e,t){e.exports=$},function(e,t,o){"use strict";var i=o(4),s=o(6),n=s,r=i.getGetParam("bkt")||"",a=i.getGetParam("flt")||"",l=i.getGetParam("grp")||"",d=o(8),m=function(e){var t=10;this.isVisible="boolean"!=typeof e.isVisible||e.isVisible,this.isBlock="boolean"==typeof e.isBlock&&e.isBlock,this.dispName=e.dispName||"anonymous",this.creatorId=e.creatorId||"anonymous",this.violationReportUrl=e.violationReportUrl,this.commentText=e.commentText,this.voted={done:!1,type:""},this.agree=e.agreePoint||0,this.disagree=e.disagreePoint||0,this.datetime={basic:e.basicDatetime||"",formatted:e.formattedDatetime||""},this.isAuthor=e.isAuthor||!1,this.isAuthor&&(this.authorId=e.authorId),this.profileImgUrl=e.profileImgUrl||"",this.profileImgWidth=e.profileImgWidth||"",this.profileImgHeight=e.profileImgHeight||"",this.wallUrl=e.wallUrl||"",this.permalinkUrl=e.permalinkUrl||"",this.parentId=e.parentId||!1,this.id=e.id||"",this.commentId=e.commentId||"",this.isMyself=e.isMyself,this.isLogin=e.isLogin,this.loginUrl=e.loginUrl,this.blockUser="",this.unblockUser="",this.profNmTag=e.profNmTag||"",this.profImgTag=e.profImgTag||"",this.hideBMsgTag=e.hideBMsgTag||"",this.hideKMsgTag=e.hideKMsgTag||"",this.blockMsgTag=e.blockMsgTag||"",this.violationTag=e.violationTag||"",this.pos=e.pos||0,this.isMyself?this.deleteFlag=!0:this.deleteFlag=!1,this.delDialog=!1,this.deleteFlag&&(this.deleted=!1),this.device=e.device,this.voteType={agreeDelete:"agree",disagreeDelete:"disagree"},this.parentId?this.type="child":(this.type="root",this.reply={resultNum:e.resultNum,fetchNum:t,startNum:e.resultNum-t+1,remaining:null},this.reply.resultNum>0&&(this.reply.remaining=this.reply.resultNum),this.reply.remaining<this.reply.fetchNum&&(this.reply.fetchNum=this.reply.remaining),this.loadedReplyForm=e.form||!1,this.formId=e.formId||!1,this.textAreaId=e.textAreaId||!1,this.formLoadErr=!1,this.loadMoreReplyErr=!1)};m.prototype={set:function(e,t,o){switch(e){case"agree":case"disagree":this.voted.done=!0,this.ajax({sendType:"vote",context:o,done:s.proxy(function(){this[e]=t,this.voted.type=e,this.trigger(e,{val:t})},this),fail:s.proxy(function(t,o,i){var s=n.Deferred();return"timeout"===i&&s.reject("timeout-"+e),s.promise()},this),attr:e});break;case"agreeDelete":case"disagreeDelete":this.ajax({sendType:"deleteCommentVote",context:o,done:s.proxy(function(){this[this.voteType[e]]=t,this.voted.type="",this.voted.done=!1,this.trigger(e,{val:t})},this),fail:s.proxy(function(t,o,i){var s=n.Deferred();return"timeout"===i&&s.reject("timeout-"+e),s.promise()},this),attr:e});break;case"deleted":this[e]=t,this.ajax({sendType:"delete",context:o,done:s.proxy(function(){this[e]=t,this.trigger("deleted")},this),fail:s.proxy(function(t,o,i){var s=n.Deferred();return this.deleted=!1,"timeout"===i&&s.reject("timeout-"+e),s.promise()},this)});break;case"loadedReplyForm":this[e]=t,t&&this.ajax({sendType:"loadedReplyForm",context:o,done:s.proxy(function(e){o.model.form.set("isLogin",e.isLogin).set("dispName",e.dispName).set("mailAddress",e.mailAddress).set("wallUrl",e.wallUrl).set("profileImgUrl",e.profileImgUrl).set("profileImgWidth",e.profileImgWidth).set("profileImgHeight",e.profileImgHeight).set("isSetMailFirst",e.isSetMailFirst).set("settingMailUrl",e.settingMailUrl).set("guid",e.guid).set("guideLine",e.guideLine).set("guideLineUrl",e.guideLineUrl).set("bcrumb",e.bcrumb),this.trigger("form")},this),fail:s.proxy(function(t,o,i){var s=n.Deferred();return this.loadedReplyForm=!1,this.formLoadErr=!0,"timeout"===i&&s.reject("timeout-"+e),s.promise()},this)});break;case"loadMoreReply":this.ajax({sendType:"loadMoreReply",context:o,done:s.proxy(function(e){var t=this.get("reply");t.remaining-=e.attr.totalResultsReturned,t.remaining<t.fetchNum&&(t.fetchNum=t.remaining),t.startNum>t.fetchNum?t.startNum-=t.fetchNum:t.startNum-=t.remaining,this.trigger("loadMoreReply",{content:e.list,remaining:t.remaining,resultNum:t.fetchNum})},this),fail:s.proxy(function(t,o,i){var s=n.Deferred();return this.loadMoreReplyErr=!0,"timeout"===i&&s.reject("timeout-"+e),s.promise()},this)});break;case"blockUser":case"unblockUser":this[e]=t,this.ajax({sendType:"block",context:o,done:s.proxy(function(){this.trigger(e,{val:t})},this),fail:s.proxy(function(t,o,i){var s=n.Deferred();return"timeout"===i&&s.reject("timeout-"+e),s.promise()},this),attr:e});break;default:this[e]=t}return this},get:function(e){return"undefined"!=typeof this[e]&&this[e]},ajax:function(e){var t="/comment/plugin/v1/Markup",o={vote:{type:"POST",url:t+"/PostCommentVotes/",data:{propertyId:e.context.model.page.get("propertyId"),topicId:e.context.model.page.get("topicId"),commentId:e.context.model.comment.get("commentId"),setValue:e.attr,ncrumb:e.context.model.page.get("ncrumb"),bkt:r,flt:a},dataType:"json",timeout:5e3,statusCode:{409:s.proxy(function(){this.trigger("error",{type:"vote-"+e.attr+"-done",message:"すでにクリックされています。"})},this),500:s.proxy(function(){this.trigger("error",{type:"vote-"+e.attr+"-fatal",message:"正常に処理できませんでした。しばらく時間をおいてからもう一度お試しください。"})},this)}},deleteCommentVote:{type:"POST",url:t+"/DeleteCommentVotes/",data:{propertyId:e.context.model.page.get("propertyId"),topicId:e.context.model.page.get("topicId"),commentId:e.context.model.comment.get("commentId"),setValue:e.attr,ncrumb:e.context.model.page.get("ncrumb"),bkt:r,flt:a},dataType:"json",timeout:5e3,statusCode:{500:s.proxy(function(){this.trigger("error",{type:"vote-"+e.attr+"-fatal",message:"正常に処理できませんでした。しばらく時間をおいてからもう一度お試しください。"})},this)}},loadedReplyForm:{type:"GET",url:t+"/CommentForm/",data:{doneUrl:e.context.model.page.get("doneUrl"),bkt:r,flt:a},dataType:"json",timeout:5e3,statusCode:{500:s.proxy(function(){this.trigger("error",{type:"loadedReplyForm-fatal",messages:"データを取得できませんでした。しばらく時間をおいてからもう一度お試しください。"})},this)},cache:!1},loadMoreReply:{type:"GET",url:t+"/ReplyCommentList/",data:{propertyId:e.context.model.page.get("propertyId"),topicId:e.context.model.page.get("topicId"),parentId:m.list.fetch(e.context.model.comment,"comments").root.commentId,startNum:e.context.model.comment.get("reply").startNum,resultNum:e.context.model.comment.get("reply").fetchNum,doneUrl:e.context.model.page.get("doneUrl"),bkt:r,flt:a,grp:l,pos:function(){var t="#"+e.context.model.comment.get("id"),o=s(t+" li.responseItem:eq(0)").attr("pos");return"undefined"!=typeof o?parseInt(s(t+" li.responseItem:eq(0)").attr("pos"),10):parseInt(s(t).attr("pos"),10)}},dataType:"json",timeout:5e3,statusCode:{500:s.proxy(function(){this.trigger("error",{type:"loadMoreReply-fatal",message:"データを取得できませんでした。しばらく時間をおいてからもう一度お試しください。"})},this)}},delete:{type:"POST",url:t+"/DeleteComment/",data:{propertyId:e.context.model.page.get("propertyId"),commentId:e.context.model.comment.get("commentId"),topicId:e.context.model.page.get("topicId"),crumb:e.context.model.page.get("crumb"),bkt:r,flt:a},dataType:"json",timeout:5e3,statusCode:{500:s.proxy(function(){this.trigger("error",{type:"delete-fatal",message:"削除できませんでした。<br>もう一度お試しください。"})},this)}},block:{type:"POST",url:t+"/BlockUserComments/",data:{creatorId:e.context.model.comment.get("creatorId"),setValue:e.attr,crumb:e.context.model.page.get("crumb"),bkt:r,flt:a},dataType:"json",timeout:5e3,statusCode:{500:s.proxy(function(t){var o="正常に処理できませんでした。しばらく時間をおいてからもう一度お試しください。";if(t.responseJSON&&t.responseJSON.isFull){var i=t.responseJSON.limitNum||100;o="設定数が上限に達しました。非表示設定できるユーザの数は"+i+"件までです。"}this.trigger("error",{type:"block-"+e.attr+"-fatal",message:o})},this)}}};s.when(s.ajax(o[e.sendType])).then(e.done,e.fail).fail(s.proxy(function(e){switch(e.split("-")[0]){case"timeout":this.trigger("error",{type:"timeout-"+e.split("-")[1],message:"通信エラーが発生しました。ブラウザの再読み込みをお願いします。"})}},this))},selector:function(){var e={root:{good:".root .good",bad:".root .bad",callDelDialog:".root .delete",del:".deleteDialog .okBtn",dispDelDialog:".deleteDialog",cancelDel:".deleteDialog .cancelBtn"},child:{good:".good",bad:".bad",callDelDialog:".delete",del:".deleteDialog .okBtn",dispDelDialog:".deleteDialog",cancelDel:".deleteDialog .cancelBtn"}};return e[this.type][arguments[0]]}},m.list=function(){var e=[];return{add:function(t){var o=s.proxy(function(t){var o;"root"!==t.get("type")?(o=this.fetch(t,"comments"),o?o.child.push(t):(e.push({root:null,child:[]}),e[e.length-1].child.push(t))):(o=this.fetch(t,"comments"),o?o.root=t:e.push({root:t,child:[]}))},this);if(t instanceof Array)for(var i=0;i<t.length;i++)o(t[i]);else o(t);return!0},del:function(e){this.fetch(e,"delete")},fetch:function(t,o){var i,s;switch(o){case"comments":for(i=0;i<e.length;i++)if(null!==e[i].root){if(e[i].root.id===(t.get("parentId")||t.get("id")))return e[i]}else for(s=0;s<e[i].child.length;s++)if(e[i].child[s].parentId===t.get("id"))return e[i];break;case"delete":default:if("root"===t.get("type")){for(i=0;i<e.length;i++)if(e[i].root.id===t.id)return"delete"===o&&e[i].child.length<1?!!e.splice(i,1).length:"delete"===o||e[i].root}else for(i=0;i<e.length;i++)if(e[i].root.id===t.parentId)for(s=0;s<e[i].child.length;s++)if(e[i].child[s].id===t.id)return"delete"===o?!!e[i].child.splice(s,1).length:e[i].child[s]}return!1},fetchAll:function(){if("root"===arguments[0]){for(var t=[],o=0;o<e.length;o++)t.push(e[o].root);return t}return e}}}(),m.add=function(e,t){var o=new m(t);this.list.add(o),this.trigger("add",{type:e,comment:o})},m.del=function(e){this.trigger("del",e)},s.extend(m,d,i),s.extend(m.prototype,d,i),e.exports=m},function(e,t,o){"use strict";var i=o(6);e.exports={bind:function(){this.o||(this.o=i({})),this.o.bind.apply(this.o,arguments)},trigger:function(){this.o||(this.o=i({})),this.o.trigger.apply(this.o,arguments)},unbind:function(){this.o||(this.o=i({})),this.o.unbind.apply(this.o,arguments)}}},,,,function(e,t,o){var i=o(6),s=null,n=null,r=null,a=null,l=null,d=null,m=/iPhone/i.test(navigator.userAgent);m&&"ontouchstart"in window?(s="touchstart",n="touchend",r="touchmove",a="touchstart",l="touchend",d=!0):(s="mousedown",n="mouseup",r="mousemove",a="mouseover",l="mouseout",d=!1),i.event.special.keepWatch={timeout:480,setup:function(){var e=i(this),t=this,o=e.val(),s=function(){t&&(o!==e.val()&&(o=e.val(),e.trigger("keepWatch")),setTimeout(s,i.event.special.keepWatch.timeout))};setTimeout(s,i.event.special.keepWatch.timeout)}},i.event.special.fastclick={distance:10,timeout:480,mousedown:s,mouseup:n,mousemove:r,mouseover:a,mouseout:l,setup:function(){var e=i(this),t=0;e.on("click",function(e){e.preventDefault()}),e.on(i.event.special.fastclick.mousedown,function(o){if(t=+new Date,!o.ctrlKey&&!("button"in o&&2===o.button||"which"in o&&3===o.which)){var s=0,n=0,r=null,a=!0,l=function(e){var t,o;d?(t=e.originalEvent.targetTouches[0].pageX,o=e.originalEvent.targetTouches[0].pageY):(t=e.pageX,o=e.pageY),(Math.abs(s-t)>i.event.special.fastclick.distance||Math.abs(n-o)>i.event.special.fastclick.distance)&&(a=!1)};d?(r=o.originalEvent.touches[0].target,s=o.originalEvent.targetTouches[0].pageX,n=o.originalEvent.targetTouches[0].pageY):(r=o.target,s=o.pageX,n=o.pageY),e.on(i.event.special.fastclick.mousemove,l).one(i.event.special.fastclick.mouseup,function(){e.off(i.event.special.fastclick.mousemove,l),a&&+new Date-t<=i.event.special.fastclick.timeout&&i(r).trigger("fastclick")})}})}},e.exports=function(){i.fn._hover=function(e){return"undefined"==typeof e&&(e=null),i(this).on(i.event.special.fastclick.mouseover,e,function(){i(this).addClass("hover")}).on(i.event.special.fastclick.mouseout,e,function(){i(this).removeClass("hover")}),this}}},function(e,t,o){"use strict";var i=o(4),s=o(2),n=o(6),r=i.getGetParam("bkt")||"",a=(o(14),window.YAHOO,o(15)),l=o(18),d=o(7),m=o(20),c=o(21),h=o(22),p=o(23),g=o(25),u=o(26),f=o(27),v=o(28),b=o(24),y=function(e){var t=this.page=new l(e.page);if(this.page.get("compact")===!0){n("body").addClass("compact");new v({page:t,model:new c({version:e.page.compactVersion}),defaultStatus:e.page.compactInitialView})}this.page.sendMessage({eventName:"init"});setInterval(function(){t.sendMessage({eventName:"adjustheight"})},100);s.templateSettings={interpolate:/\{\{\=(.+?)\}\}/g,evaluate:/\{\{(.+?)\}\}/g};new h({model:new a(e.page.announceBoard),prependTo:"#wrapper"});s.each(e.author,function(e){var o=new d(e);new p({model:o,page:t})});for(var o=0;o<e.comments.length;o++){var y=new d(e.comments[o]);d.list.add(y),new g({model:{comment:y,page:this.page,form:new m}})}if("full"===this.page.get("tmplType")){if(new u({model:{page:this.page}}),this.page.get("dispForm")){var k=new f({model:{page:this.page,form:new m},$el:n("#compactform-header"),$formAppendTarget:n("#comment-header")}),$=!i.isiOS()&&!i.isAndroid();$&&!s.isUndefined(i.getGetParam("expand_form"))&&k.expandForm()}d.bind("add",n.proxy(function(e,t){var o,a=t.comment;switch(t.type){case"addsNewly":o=s.template(n("#comment-newly-template").html()),new g({model:{comment:a,page:this.page,form:new m}});break;case"addsReplyNewly":o=s.template(n("#comment-reply-newly-template").html()),new g({model:{comment:a,page:this.page,form:new m}});break;case"loadMoreReply":o=s.template(n("#comment-template").html()),n(".viewMoreResponse","#"+a.get("parentId")).after(o({device:a.get("device"),bucketId:r,id:a.get("id"),agree:a.get("agree"),disagree:a.get("disagree"),voted:a.get("voted"),deleteFlag:a.get("deleteFlag"),dispName:a.get("dispName"),profileImgUrl:a.get("profileImgUrl"),isDefaultProfileIconPath:i.isDefaultProfileIconPath(a.get("profileImgUrl")),profileImgWidth:a.get("profileImgWidth"),profileImgHeight:a.get("profileImgHeight"),commentText:a.get("commentText"),dateBasic:a.get("datetime").basic,dateFormatted:a.get("datetime").formatted,isAuthor:a.get("isAuthor"),wallUrl:a.get("wallUrl"),violationReportUrl:a.get("violationReportUrl"),isVisible:a.get("isVisible"),isBlock:a.get("isBlock"),isLogin:a.get("isLogin"),loginUrl:a.get("loginUrl"),pos:a.get("pos"),profNmTag:a.get("profNmTag"),profImgTag:a.get("profImgTag"),hideBMsgTag:a.get("hideBMsgTag"),hideKMsgTag:a.get("hideKMsgTag"),blockMsgTag:a.get("blockMsgTag"),violationTag:a.get("violationTag")})),new g({model:{comment:a,page:this.page,form:new m}})}},this)),d.bind("del",n.proxy(function(e,t){var o=n("#"+t.id);"root"===t.type&&d.list.fetch(t,"comments").child.length?n(".action .root",o).html('<div class="deleted"><p>削除されたコメントです。</p></div>'):o.fadeOut("slow"),d.list.del(t)},this))}b.setLinkView(this)};e.exports=y},function(e,t,o){"use strict";function i(e){var t,o=s.extend({interval:50,watch:function(){},onChange:function(e,t){console.log(e,t)}},e),i=o.watch(),n=function(){var e=o.watch();e!==i&&(o.onChange(i,e),i=e)},r=function(){clearInterval(t)},a=function(){r(),t=setInterval(n,o.interval)};return a(),{stop:r,start:a}}var s=o(2);e.exports=i},function(e,t,o){function i(e){this.version=e.version,this.storage=r(s,this.version,{closed:!1}),this.disabled=this.storage.getItem("closed")||e.disabled,this.message=e.message,this.isCloseable=n.isAvailable()}var s="comment_announce_board",n=o(16),r=o(17);i.prototype.isClosed=function(){return!!this.disabled||this.storage.getItem("closed")},i.prototype.close=function(){this.storage.setItem("closed",!0)},e.exports=i},function(e,t){function o(){var e="__CHECK__";try{var t=window.localStorage;if("undefined"==typeof t)return!1;t.setItem(e,""),t.removeItem(e)}catch(e){return!1}return!0}function i(e){if(!o())return{setItem:function(){},getItem:function(){}};var t=window.localStorage,i=JSON.parse(t.getItem(e)||"{}");return{setItem:function(o,s){i[o]=s;try{t.setItem(e,JSON.stringify(i))}catch(e){}},getItem:function(e){return i[e]}}}e.exports={isAvailable:o,getStorage:i}},function(e,t,o){function i(e,t,o){var i;if(o=o||{},s.isAvailable()){var n=s.getStorage(e),r=n.getItem("version");if(!r||r<t){n.setItem("version",t);for(i in o)n.setItem(i,o[i])}return n}var a={version:t};for(i in o)a[i]=o[i];return{setItem:function(e,t){a[e]=t},getItem:function(e){return a[e]}}}var s=o(16);e.exports=i},function(e,t,o){"use strict";var i=o(4),s=o(6),n=o(19),r=o(8),a=function(e){this.YjAppHeader=e.appname,this.device=e.device||"pc",this.tmplType=e.tmplType,this.propertyId=e.propertyId,this.spaceId=e.spaceId,this.articleId=e.articleId,this.topicId=e.topicId,this.doneUrl=e.doneUrl,this.sortType=e.sortType||"sympathy",this.currentPage=1,this.dispForm=e.dispForm||!1,this.totalCommentsNum=e.totalCommentsNum||"",this.mediaId=e.mediaId||"",this.categoryId=e.categoryId||"",this.payFlag=e.payFlag||"",this.articleUrl=e.articleUrl||"",this.articleTitle=e.articleTitle||"",this.thumbnailUrl=e.thumbnailUrl||"",this.compact=e.compact||!1,this.compactInitialView=e.compactInitialView||"",this.compactVersion=1,this._bindedEvent={},this.crumb=e.crumb||"",this.ncrumb=e.ncrumb||"",this.iframeCommunicator=new n.Child({parentOrigin:i.getParentOrigin(),grandChildPath:i.getGrandChildIframePath(),messageParser:function(e){var t=e.split("-");return{event:t[0],data:t[1]}},messageMaker:function(e){switch(e.eventName){case"dispform":return"dispform-"+Math.ceil(e.data);case"postcomment":return"postcomment-"+Math.ceil(e.data);case"adjustheight":return"adjustheight-"+s("body").height();case"init":return"init-"+s("body").height();default:return e.eventName}}}),this.iframeCommunicator.receiver.on({view:function(t,o){var s={bkey:"newscmt",type:e.tmplType,pos:o,spaceid:e.spaceId,url:e.doneUrl};e.appname&&(s.appname=e.appname),i.sendGeneralPurposeBeacon(s)}})};a.prototype={set:function(e,t){switch(e){case"sortType":break;case"currentPage":break;default:this[e]=t}return this},get:function(e){return"undefined"!=typeof this[e]&&this[e]},ajax:function(){},sendMessage:function(e){this.iframeCommunicator.send(e)},hundleScreenEvent:function(e){var t,o=this;return t=function(e,t){for(var o=0;o<e.length;o++)switch(e[o].eventName.split("-")[0]){case"outerClick":var i=t.pageX||t.originalEvent.changedTouches[0].pageX,s=t.pageY||t.originalEvent.changedTouches[0].pageY,n=e[o].targetEl.offset(),r=n.top,a=r+e[o].targetEl.outerHeight(),l=n.left,d=l+e[o].targetEl.outerWidth();s>r&&s<a&&i>l&&i<d||e[o].callback.call(e[o].context,t,s,i);break;default:e[o].callback.call(e[o].context,t)}},{on:function(i){"undefined"==typeof o._bindedEvent[e]&&(o._bindedEvent[e]={}),"undefined"==typeof o._bindedEvent[e][i.eventType]&&(s("window"===e?window:e).on(i.eventType,s.proxy(function(s){t(o._bindedEvent[e][i.eventType].callbacks,s)},o)),o._bindedEvent[e][i.eventType]={callbacks:[]});for(var n=0;n<o._bindedEvent[e][i.eventType].callbacks.length;n++)if(o._bindedEvent[e][i.eventType].callbacks[n].eventName===i.eventName)return!1;o._bindedEvent[e][i.eventType].callbacks.push(i)},off:function(t){for(var i in o._bindedEvent[e])if(o._bindedEvent[e].hasOwnProperty(i)){if("undefined"==typeof o._bindedEvent[e][i])continue;for(var n=0;n<o._bindedEvent[e][i].callbacks.length;n++)if(o._bindedEvent[e][i].callbacks[n].eventName===t.eventName&&!o._bindedEvent[e][i].callbacks.splice(n,1).length)return!1;o._bindedEvent[e][i].callbacks.length<1&&(s("window"===e?window:e).off(i),o._bindedEvent[e][i]=void 0)}}}}},s.extend(a,r,i),s.extend(a.prototype,r,i),e.exports=a},function(e,t,o){"use strict";function i(e){var t=_.extend({parentOrigin:"null",grandChildPath:null,messageParser:function(e){return{event:"message",data:e}},messageMaker:function(){return arguments[0]}},e),o=$({}),i=function(){return n?function(e){var o=window.parent;o.postMessage(t.messageMaker(e),t.parentOrigin)}:function(e){var o=r(t.parentOrigin+t.grandChildPath,t.messageMaker(e));$("<iframe>").attr({width:0,height:0}).css({width:0,height:0}).attr("src",o).appendTo("body")}}(),a=function(e){var i=t.messageParser(e);o.trigger(i.event,i.data)};return new s({interval:50,watch:function(){return location.hash.substr(1)},onChange:function(e,t){a(t)}}),$(window).on("message",function(e){t.parentOrigin!==e.originalEvent.origin&&"*"!==t.parentOrigin||a(e.originalEvent.data)}),{send:i,receiver:o}}var s=o(14),n=!!window.postMessage,r=function(e,t){return e.split("#")[0]+"#"+t};e.exports={Child:i}},function(e,t,o){"use strict";var i=o(4),s=o(6),n=s,r=o(8),a=function(){this.limit=400,this.formStatus=!0,this.sended=!1,this.dispLoginPanel=!1,this.isLogin="",this.dispName="",this.wallUrl="",this.mailAddress="",this.profileImgUrl="",this.profileImgWidth="",this.profileImgHeight="",this.isSetMailFirst=!1,this.settingMailUrl="",this.setMail="",this.mailOpt="",this.guid="",this.guideLine="",this.guideLineUrl="",this.post={type:"",comment:"",commentNum:null,parentId:"",articleId:"",topicId:"",setMail:"",mailOpt:"",mediaId:null,categoryId:null,payFlag:null,articleUrl:null,articleTitle:null,thumbnailUrl:null,crumb:null},this._formViewInstance=null,this._scrollPos=null,this.loadedForm=!1,this.bind("change:isSetMailFirst",s.proxy(function(e,t){this.set("mailOpt",t?"checked":"")},this))};a.prototype={set:function(e,t,o){switch(e){case"post":this[e]=t,this.ajax({sendType:"post",context:o,done:s.proxy(function(e){this.trigger("post",e)},this),fail:s.proxy(function(t,o,i){var s=n.Deferred();return"timeout"===i&&s.reject("timeout-"+e),s.promise()},this)});break;case"loadedForm":this[e]=t,t&&this.ajax({sendType:"loadedForm",context:o,done:s.proxy(function(e){o.model.form.set("isLogin",e.isLogin).set("dispName",e.dispName).set("mailAddress",e.mailAddress).set("wallUrl",e.wallUrl).set("profileImgUrl",e.profileImgUrl).set("profileImgWidth",e.profileImgWidth).set("profileImgHeight",e.profileImgHeight).set("isSetMailFirst",e.isSetMailFirst).set("settingMailUrl",e.settingMailUrl).set("guid",e.guid).set("guideLine",e.guideLine).set("guideLineUrl",e.guideLineUrl).set("bcrumb",e.bcrumb),
this.trigger("form",e)},this),fail:s.proxy(function(t,o,i){var s=n.Deferred();return this.loadedForm=!1,"timeout"===i&&s.reject("timeout-"+e),s.promise()},this)});break;default:this[e]=t,this.trigger("change:"+e,t)}return this},get:function(e){return"undefined"!=typeof this[e]&&this[e]},validation:function(e){var t=e.length;this.formStatus=!0,(t>this.get("limit")||t<=0)&&(this.formStatus=!1),this.trigger("valid",{status:this.formStatus,count:t})},ajax:function(e){var t="/comment/plugin/v1/Markup",o={post:{type:"POST",url:t+"/PostComment/",data:e.context.model.form.get("post"),dataType:"json",timeout:5e3,statusCode:{400:s.proxy(function(){this.trigger("error",{type:"badrequest",message:"コメントを入力してください"})},this),401:s.proxy(function(){this.trigger("error",{type:"nologin",message:'コメントを投稿するにはYahoo! JAPAN IDでログインが必要です。<a href="https://login.yahoo.co.jp/config/login?.done='+e.context.model.page.get("doneUrl")+'&.src=yn" target="_parent">ログイン</a>'})},this),406:s.proxy(function(){this.trigger("error",{typr:"fatal",message:"返信コメントが上限に達しています。"})},this),409:s.proxy(function(){this.trigger("error",{typr:"fatal",message:"この記事には既にコメントを投稿済みです。同じ記事には1度しか投稿できません。"})},this),500:s.proxy(function(){this.trigger("error",{typr:"fatal",message:"コメントの投稿に失敗しました。"})},this)}},loadedForm:{type:"GET",url:t+"/CommentForm/",data:{doneUrl:e.context.model.page.get("doneUrl")},dataType:"json",timeout:5e3,statusCode:{500:s.proxy(function(){this.trigger("error",{type:"loadedForm-fatal",messages:"データを取得できませんでした。しばらく時間をおいてからもう一度お試しください。"})},this)},cache:!1}};s.when(s.ajax(o[e.sendType])).then(e.done,e.fail).fail(s.proxy(function(e){switch(e.split("-")[0]){case"timeout":this.trigger("error",{type:"timeout",message:"通信エラーが発生しました。ブラウザの再読み込みをお願いします。"})}},this))}},s.extend(a,r),s.extend(a.prototype,r,i),e.exports=a},function(e,t,o){function i(e){this.version=e.version,this.storage=n(s,this.version,{})}var s="comment_module_toggle",n=o(17);i.prototype.isOpen=function(){return this.storage.getItem("isOpen")},i.prototype.setClose=function(){this.storage.setItem("isOpen",!1)},i.prototype.setOpen=function(){this.storage.setItem("isOpen",!0)},e.exports=i},function(e,t,o){function i(e){this.model=e.model,this.prependTo=e.prependTo||"#wrapper",this.model.disabled||this.render()}var s=o(2),n=o(6);i.prototype.close=function(){this.model.close(),this.$el.remove()},i.prototype.render=function(){var e=s.template('<div class="noticeMd_Re">{{=message}}<div class="close"><a href="javascript:void(0);">閉じる</a></div></div>');this.$el=n(e({message:this.model.message})),this.$el.prependTo(this.prependTo);var t=n(".close",this.$el);this.model.isCloseable?t.on("click",n.proxy(function(){this.close()},this)):t.remove()},e.exports=i},function(e,t,o){"use strict";var i=o(4),s=o(6),n=i.getGetParam("bkt")||"",r=i.getGetParam("flt")||"",a=o(24),l=function(e){var t=e.model,o=e.page,l=s("#author"+t.get("id")),d={isEnabled:function(e){return"smartphone"===o.get("device")?e.parent(".evalMod_btn").is(".evalMod_btn-loading")||e.parent(".evalMod_btn").is(".evalMod_btn-disabled")||e.parent(".evalMod_btn").is(".evalMod_btn-active"):e.is(".processing")||e.is(".disabled")||e.is(".done")},startProcess:function(e){"smartphone"===o.get("device")?e.parent(".evalMod_btn").addClass("evalMod_btn-loading"):(e.addClass("processing"),s("em",e).empty(),s(".txt",e).text("処理中..."))},success:function(e,i){"smartphone"===o.get("device")?(e.parent(".evalMod_btn").removeClass("evalMod_btn-loading").addClass("evalMod_btn-disabled"),e.next().text(t.agree+1)):(e.removeClass("processing").addClass("done"),s(".txt",e).text(i)),s("em",e).empty().text(t.agree+1)},fail:function(e,i){"smartphone"===o.get("device")?e.parent(".evalMod_btn").removeClass("evalMod_btn-loading").addClass("evalMod_btn-disabled"):(e.removeClass("processing").addClass("disabled"),s(".txt",e).text(i)),s("em",e).html(t.get("agree"))}},m={isClosed:function(e){return e.hasClass("close")},isAnimating:function(e){return e.hasClass("processing")},open:function(e,t){e.removeClass("close").addClass("open processing"),t.show().animate({left:"0px",opacity:1},500,function(){e.removeClass("processing")})},close:function(e,t){e.removeClass("open").addClass("close processing"),t.animate({left:"-80px",opacity:0},500,function(){e.removeClass("processing"),s(this).hide()})}};s(".shareBtn",l).on("click",function(){var e=s(this),t=l.find(".shareSocalBtn ul");m.isAnimating(e)||(m.isClosed(e)?m.open(e,t):m.close(e,t))}),s(".moreAthrCmtText",l).on("click",function(){s(this).hide(),s(".hideAthrCmtText",l).show()}),s(".shareSocalBtn .fb",l).attr("href",i.makeFacebookShareURL(t.permalinkUrl)).on("click",function(e){e.preventDefault(),i.openWindow(s(this).attr("href"),"_blank",{width:468,height:497,menubar:"no",toolbar:"no",scrollbars:"yes"})});var c="【"+t.dispName+"さんのコメント】"+i.trimText(t.commentText,39)+" ▼"+o.articleTitle.substr(0,o.articleTitle.lastIndexOf("（"));s(".shareSocalBtn .tw",l).attr("href",i.makeTwitterShareURL(c,{url:t.permalinkUrl,hashtags:"",related:"YahooNewsTopics"})).on("click",function(e){e.preventDefault(),i.openWindow(s(this).attr("href"),"_blank",{width:568,height:450,menubar:"no",toolbar:"no",scrollbars:"yes"})}),s(".helpfulBtn,.evalMod_btn_text",l).on("click",function(){var m=s(this),c=s(".txt",m).text();if(!d.isEnabled(m)){d.startProcess(m);var h="/comment/plugin/v1/Markup";s.ajax({type:"POST",url:h+"/PostCommentVotes/",data:{propertyId:"sp_author",topicId:e.page.topicId,commentId:t.commentId,authorId:t.authorId,setValue:"agree",ncrumb:o.ncrumb,bkt:n,flt:r}}).done(function(){d.success(m,c),a.buttonClick("cmt_athr","hlpflbtn",l)}).fail(function(e){d.fail(m,c);var t=409===e.status?"すでにクリックされています。":"正常に処理できませんでした。しばらく時間をおいてからもう一度お試しください。",o=i.makeAlertForReaction(t);o.insertAfter(s(".root .reaction,.reactionBox",l))})}})};e.exports=l},function(e,t){function o(e){var t=[],o="full"===e.page.get("tmplType"),i="smartphone"===e.page.get("device");if(!o){var s=n();s._links.length>0&&t.push(s)}var d=r();d._links.length>0&&t.push(d);var m=a(o,i);m._links.length>0&&t.push(m);var c=l();c._links.length>0&&t.push(c),"undefined"!=typeof ins&&ins.beaconLinkViews(t,!1)}function i(){var e=[],t=l();e.push(t),"undefined"!=typeof ins&&ins.beaconLinkViews(e,!1)}function s(){var e=[],t=n();e.push(t),"undefined"!=typeof ins&&ins.beaconLinkViews(e,!1)}function n(){var e={};if(e.sec="cmthed",e._links=[],$(".commentToggle").length){var t={};t.pos=0,t.slk="",$(".commentToggle.toggleBtn a").addClass("rapid-noclick-resp"),$("a.commentToggleClose").addClass("rapid-noclick-resp"),$(".commentToggle a.off").length?(t.slk="opnmod",t._p=$(".commentToggle.toggleBtn a").attr("data-rapid_p")):$(".commentToggle a.on").length&&(t.slk="clsmod",t._p=$("a.commentToggleClose").attr("data-rapid_p")),e._links.push(t)}return e}function r(){var e={};return e.sec="cmt_athr",e._links=$("#contentsWrapper .bd.author .commentListItem").map(function(){var t=[],o=$(this).attr("pos"),i=$(".helpfulBtn,.evalMod_btn",this).attr("data-rapid_p"),s=m($(this).attr("id"),e.sec);return $(".helpfulBtn,.evalMod_btn",this).addClass("rapid-noclick-resp"),t.push({slk:"hlpflbtn",pos:o,cmt_id:s,_p:i}),t}).get(),e}function a(e,t){var o={};return o.sec="cmt",o._links=$("#contentsWrapper .bd:not(.author) .commentListItem").map(function(){var i=[],s=$(this).attr("pos"),n=m($(this).attr("id"),o.sec),r=$(".agreeBtn",this).attr("data-rapid_p"),a=$(".disagreeBtn",this).attr("data-rapid_p"),l=$(".agreeBtnCancel",this).attr("data-rapid_p"),d=$(".disagreeBtnCancel",this).attr("data-rapid_p"),c=0,h=0,p=!1;if("undefined"!=typeof $(".root .cmtDelete",this).attr("data-rapid_p")&&""!==n){p=!0;var g=$(".root .cmtDelete",this).attr("data-rapid_p")}return""===n||null==r?[]:(e&&(c=$(".expandBtn",this).attr("data-rapid_p"),h=$(".expandBtnClose",this).attr("data-rapid_p"),$(".expandBtn",this).addClass("rapid-noclick-resp"),$(".expandBtnClose",this).addClass("rapid-noclick-resp"),p&&($(".root .cmtDelete",this).addClass("rapid-noclick-resp"),i.push({slk:"delete",pos:s,_p:g})),t&&(i.push({slk:"opnre",pos:s,_p:c}),i.push({slk:"clsre",pos:s,_p:h}))),$(".agreeBtn",this).addClass("rapid-noclick-resp"),$(".disagreeBtn",this).addClass("rapid-noclick-resp"),$(".agreeBtnCancel",this).addClass("rapid-noclick-resp"),$(".disagreeBtnCancel",this).addClass("rapid-noclick-resp"),i.push({slk:"agbtn",pos:s,cmt_id:n,_p:r}),i.push({slk:"agbtn_cancel",pos:s,cmt_id:n,_p:l}),i.push({slk:"disbtn",pos:s,cmt_id:n,_p:a}),i.push({slk:"disbtn_cancel",pos:s,cmt_id:n,_p:d}),e&&!t&&(i.push({slk:"opnre",pos:s,_p:c}),i.push({slk:"clsre",pos:s,_p:h})),i)}).get(),o}function l(){var e={};return e.sec="rep",e._links=$("#contentsWrapper .bd:not(.author) .responseItem").map(function(){var t=[];if("responseItem repNew"!==$(this).attr("class"))return[];var o=$(this).attr("pos"),i=m($(this).attr("id"),e.sec),s=$(".agreeBtn",this).attr("data-rapid_p"),n=$(".agreeBtnCancel",this).attr("data-rapid_p"),r=$(".disagreeBtn",this).attr("data-rapid_p"),a=$(".disagreeBtnCancel",this).attr("data-rapid_p"),l=!1;if("undefined"!=typeof $(".cmtDelete",this).attr("data-rapid_p")&&""!==i){l=!0;var d=$(".cmtDelete",this).attr("data-rapid_p")}return null==s?[]:(l&&($(".cmtDelete",this).addClass("rapid-noclick-resp"),t.push({slk:"delete",pos:o,_p:d})),$(".agreeBtn",this).addClass("rapid-noclick-resp"),$(".disagreeBtn",this).addClass("rapid-noclick-resp"),$(".agreeBtnCancel",this).addClass("rapid-noclick-resp"),$(".disagreeBtnCancel",this).addClass("rapid-noclick-resp"),t.push({slk:"agbtn",pos:o,cmt_id:i,_p:s}),t.push({slk:"agbtn_cancel",pos:o,cmt_id:i,_p:n}),t.push({slk:"disbtn",pos:o,cmt_id:i,_p:r}),t.push({slk:"disbtn_cancel",pos:o,cmt_id:i,_p:a}),$(this).addClass("done"),t)}).get(),e}function d(e,t,o){var i=0,n=0;if(o){n=o.attr("pos");var r=o.attr("id")}var a={};switch(a.pos=n,t){case"hlpflbtn":i=$(".helpfulBtn,.evalMod_btn",o).attr("data-rapid_p"),a.cmt_id=m(r,e);break;case"agbtn":i=$(".agreeBtn",o).attr("data-rapid_p"),a.cmt_id=m(r,e);break;case"agbtn_cancel":i=$(".agreeBtnCancel",o).attr("data-rapid_p"),a.cmt_id=m(r,e);break;case"disbtn":i=$(".disagreeBtn",o).attr("data-rapid_p"),a.cmt_id=m(r,e);break;case"disbtn_cancel":i=$(".disagreeBtnCancel",o).attr("data-rapid_p"),a.cmt_id=m(r,e);break;case"opnre":i=$(".expandBtn",o).attr("data-rapid_p");case"clsre":i=$(".expandBtnClose",o).attr("data-rapid_p");break;case"opnmod":i=$(".commentToggle.toggleBtn a").attr("data-rapid_p"),s();break;case"clsmod":i=$("a.commentToggleClose").attr("data-rapid_p"),s();break;case"delete":i=$(".cmtDelete",o).attr("data-rapid_p"),a.cmt_id=m(r,e)}"undefined"!=typeof ins&&ins.beaconClick(e,t,i,a)}function m(e,t){var o="";switch(t){case"cmt":o=e?e.replace(/comment-/g,"").replace(/-/g,"."):"";break;case"rep":o=e?e.replace(/reply-/g,"").replace(/-/g,"."):"";break;case"cmt_athr":o=e?e.replace(/authorcomment-/g,"").replace(/-/g,"."):"";break;default:return e}return o}e.exports={setLinkView:o,setReplyLinkView:i,buttonClick:d}},function(e,t,o){"use strict";var i=o(4),s=o(2),n=o(6),r=(window.YAHOO,o(5)),a=o(7),l=i.getGetParam("bkt")||"",d=o(24),m=function(e){this.$el=n("#"+e.model.comment.id),this.model=e.model,this.reply_button_click=!1,"short"===this.model.page.get("tmplType")&&n(".moreUserCmtText",this.$el).on("click",function(){n(this).hide(),n(this).siblings(".hideUserCmtText").show()}),n("> .action .userControlBtn",this.$el).on("click",n.proxy(function(e){e.preventDefault(),n("> .userControlPanel",this.$el).toggle()},this)),n("> .userControlPanel .userBlock.blockable",this.$el).on("click",n.proxy(function(e){e.preventDefault(),n("> .userControlPanel",this.$el).hide(),this.model.comment.set("blockUser",{creatorId:this.model.comment.get("creatorId"),crumb:this.model.page.get("crumb")},this)},this)),this.model.comment.bind("blockUser",n.proxy(function(e,t){var o=n("> .action article",this.$el),i=n("> :not(.hideMes)",o),s=this.$el.attr("id").match(/comment-/)?"cmt":"rep",r=this.$el.attr("pos")||0,a="sec:"+s+";slk:unblock;pos:"+r+";",l=n('<p class="hideMes">今後このユーザーのコメントは表示されなくなります。<a href="javascript:void(0);" data-ylk="'+a+'">非表示を解除</a></p>');l.appendTo(o),"undefined"!=typeof ins&&ins.refreshModule("comment-list-item",!1),i.hide(),n("a",l).on("click",n.proxy(function(e){e.preventDefault(),i.show(),l.remove(),this.model.comment.set("unblockUser",{creatorId:this.model.comment.get("creatorId"),crumb:this.model.page.get("crumb")},this)},this))},this)),this.model.comment.bind("unblockUser",n.proxy(function(e,t){n("> .action article .hideMes").remove(),n("> .action article",this.$el).children().show()},this));var t="a:not(.done)",o="a.done";"smartphone"===this.model.page.get("device")&&(t="div:not(.done) a",o="div.done a"),n(this.model.comment.selector("good"),this.$el).on("fastclick",t,n.proxy(function(e){return e.preventDefault(),!this.model.comment.get("voted").done&&("smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .bad div ":".bad div",this.$el).addClass("disabled"):n("root"===this.model.comment.get("type")?".root .bad a ":".bad a",this.$el).addClass("disabled"),"smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .good div ":".good div",this.$el).addClass("processing"):n("root"===this.model.comment.get("type")?".root .good a ":".good a",this.$el).addClass("processing").find("em").html('<span class="txt">処理中...</span>'),void this.model.comment.set("agree",~~this.model.comment.get("agree")+1,this))},this)),n(this.model.comment.selector("bad"),this.$el).on("fastclick",t,n.proxy(function(e){return e.preventDefault(),!this.model.comment.get("voted").done&&("smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .good div ":".good div",this.$el).addClass("disabled"):n("root"===this.model.comment.get("type")?".root .good a ":".good a",this.$el).addClass("disabled"),"smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .bad div ":".bad div",this.$el).addClass("processing"):n("root"===this.model.comment.get("type")?".root .bad a ":".bad a",this.$el).addClass("processing").find("em").html('<span class="txt">処理中...</span>'),void this.model.comment.set("disagree",~~this.model.comment.get("disagree")+1,this))},this)),this.model.comment.bind("agree",n.proxy(function(e,t){"smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .good div":".good div",this.$el).removeClass("processing").addClass("done"):n("root"===this.model.comment.get("type")?".root .good a":".good a",this.$el).removeClass("processing").addClass("done"),"smartphone"===this.model.page.get("device")?n(this.model.comment.selector("good"),this.$el).find(".userNum").html(t.val):n(this.model.comment.selector("good"),this.$el).find(".votes-btn").html("<em>"+t.val+"</em>"),"root"===this.model.comment.get("type")?d.buttonClick("cmt","agbtn",this.$el):d.buttonClick("rep","agbtn",this.$el)},this)),this.model.comment.bind("disagree",n.proxy(function(e,t){"smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .bad div":".bad div",this.$el).removeClass("processing").addClass("done"):n("root"===this.model.comment.get("type")?".root .bad a":".bad a",this.$el).removeClass("processing").addClass("done"),"smartphone"===this.model.page.get("device")?n(this.model.comment.selector("bad"),this.$el).find(".userNum").html(t.val):n(this.model.comment.selector("bad"),this.$el).find(".votes-btn").html("<em>"+t.val+"</em>"),"root"===this.model.comment.get("type")?d.buttonClick("cmt","disbtn",this.$el):d.buttonClick("rep","disbtn",this.$el)},this)),n(this.model.comment.selector("good"),this.$el).on("fastclick",o,n.proxy(function(e){return e.preventDefault(),!!this.model.comment.get("voted").done&&("smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .good div ":".good div",this.$el).addClass("enabled"):n("root"===this.model.comment.get("type")?".root .good a ":".good a",this.$el).addClass("enabled"),"smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .good div ":".good div",this.$el).addClass("processing"):n("root"===this.model.comment.get("type")?".root .good a ":".good a",this.$el).addClass("processing").find("em").html('<span class="txt">処理中...</span>'),"smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .good div":".good div",this.$el).removeClass("done"):n("root"===this.model.comment.get("type")?".root .good a":".good a",this.$el).removeClass("done"),void this.model.comment.set("agreeDelete",~~this.model.comment.get("agree")-1,this))},this)),n(this.model.comment.selector("bad"),this.$el).on("fastclick",o,n.proxy(function(e){return e.preventDefault(),!!this.model.comment.get("voted").done&&("smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .bad div ":".bad div",this.$el).addClass("enabled"):n("root"===this.model.comment.get("type")?".root .bad a ":".bad a",this.$el).addClass("enabled"),"smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .bad div ":".bad div",this.$el).addClass("processing"):n("root"===this.model.comment.get("type")?".root .bad a ":".bad a",this.$el).addClass("processing").find("em").html('<span class="txt">処理中...</span>'),"smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .bad div":".bad div",this.$el).removeClass("done"):n("root"===this.model.comment.get("type")?".root .bad a":".bad a",this.$el).removeClass("done"),void this.model.comment.set("disagreeDelete",~~this.model.comment.get("disagree")-1,this))},this)),this.model.comment.bind("agreeDelete",n.proxy(function(e,t){"smartphone"===this.model.page.get("device")?(n("root"===this.model.comment.get("type")?".root .good div":".good div",this.$el).removeClass("processing").removeClass("done"),n("root"===this.model.comment.get("type")?".root .bad div ":".bad div",this.$el).removeClass("disabled")):(n("root"===this.model.comment.get("type")?".root .good a":".good a",this.$el).removeClass("processing").removeClass("done"),n("root"===this.model.comment.get("type")?".root .bad a ":".bad a",this.$el).removeClass("disabled")),"smartphone"===this.model.page.get("device")?n(this.model.comment.selector("good"),this.$el).find(".userNum").html(t.val):n(this.model.comment.selector("good"),this.$el).find(".votes-btn").html("<em>"+t.val+"</em>"),"root"===this.model.comment.get("type")?d.buttonClick("cmt","agbtn_cancel",this.$el):d.buttonClick("rep","agbtn_cancel",this.$el)},this)),this.model.comment.bind("disagreeDelete",n.proxy(function(e,t){"smartphone"===this.model.page.get("device")?(n("root"===this.model.comment.get("type")?".root .bad div":".bad div",this.$el).removeClass("processing").removeClass("done"),n("root"===this.model.comment.get("type")?".root .good div ":".good div",this.$el).removeClass("disabled")):(n("root"===this.model.comment.get("type")?".root .bad a":".bad a",this.$el).removeClass("processing").removeClass("done"),n("root"===this.model.comment.get("type")?".root .good a ":".good a",this.$el).removeClass("disabled")),"smartphone"===this.model.page.get("device")?n(this.model.comment.selector("bad"),this.$el).find(".userNum").html(t.val):n(this.model.comment.selector("bad"),this.$el).find(".votes-btn").html("<em>"+t.val+"</em>"),"root"===this.model.comment.get("type")?d.buttonClick("cmt","disbtn_cancel",this.$el):d.buttonClick("rep","disbtn_cancel",this.$el)},this)),"root"===this.model.comment.get("type")&&("full"===this.model.page.get("tmplType")&&(n(".reply a",this.$el).on("fastclick",n.proxy(function(e){e.preventDefault();var t,o=n(".response",this.$el),i=!o.is(":visible");if(n(".reply .expandBtn",this.$el).toggleClass("current",i).toggleClass("expandBtnClose",i).toggleClass("expandBtnOpen",!i),i){o.slideDown(),d.buttonClick("cmt","opnre",this.$el);var s=this;o.slideDown("400",function(){s.reply_button_click===!1&&0!==s.model.comment.get("reply").resultNum&&(s.reply_button_click=!0,n(".viewMoreResponse",s.$el).addClass("processing"),s.model.comment.set("loadMoreReply",null,s))})}else o.slideUp(),t=this.model.form.get("_formViewInstance"),t&&t.closeForm.call(t),d.buttonClick("cmt","clsre",this.$el)},this)),n(".textInput.loggedIn",this.$el).on("fastclick",n.proxy(function(){return!this.model.comment.get("formLoadErr")&&void(this.model.comment.get("loadedReplyForm")?(n(".reply",this.$el).removeClass("isShown"),n("#"+this.model.comment.formId).hide(),this.model.comment.set("loadedReplyForm",!1,this)):(n(".reply",this.$el).addClass("isShown"),this.model.comment.set("loadedReplyForm",!0,this)))},this))),this.model.comment.bind("form",n.proxy(function(){if(!(this.model.form.get("_formViewInstance")instanceof r)){var e=s.template(n("#form-template").html()),t=n(".response",this.$el),o=n(this.$el).attr("pos")?n(this.$el).attr("pos"):0;t.append(e({bucketId:l,id:this.model.comment.get("formId"),textAreaId:this.model.comment.get("textAreaId"),dispName:this.model.form.get("dispName")||"----",mailAddress:this.model.form.get("mailAddress")||!1,profileImgUrl:this.model.form.get("profileImgUrl")||"",isDefaultProfileIconPath:i.isDefaultProfileIconPath(this.model.form.get("profileImgUrl")),profileImgWidth:this.model.form.get("profileImgWidth")||"",profileImgHeight:this.model.form.get("profileImgHeight")||"",wallUrl:this.model.form.get("wallUrl")||"",isSetMailFirst:this.model.form.get("isSetMailFirst"),settingMailUrl:this.model.form.get("settingMailUrl")||"",guid:this.model.form.get("guid")||"",guideLine:this.model.form.get("guideLine")||"",guideLineUrl:this.model.form.get("guideLineUrl")||"",bcrumb:this.model.form.get("bcrumb")||"",doneUrl:this.model.page.get("doneUrl")||"",sec:"artres_f",slk:"reply",pos:o,categoryId:this.model.page.get("categoryId")})),this.model.form.set("_formViewInstance",new r({type:"reply",model:this.model})),"undefined"!=typeof ins&&ins.refreshModule("comment-list-item",!1),this.model.form.bind("delFormViewInstance",n.proxy(function(){this.model.form.set("_formViewInstance",null),this.model.form.unbind("delFormViewInstance")},this))}i.disableLinksTemporarily(n("a",this.$el),250),n(".compactForm",this.$el).hide(),this.model.page.hundleScreenEvent("window").on({eventType:"resize",eventName:"resizeLoginAlertPanel-"+this.model.comment.get("formId"),callback:function(){this.model.page.resizePanel(this.model.comment.get("formId"))},context:this}),this.model.form.get("_formViewInstance").openForm.call(this,"reply")},this)),this.model.comment.get("reply").resultNum>=1&&"full"===this.model.page.get("tmplType")&&(n(".viewMoreResponse a",this.$el).on("fastclick",n.proxy(function(e){if(e.preventDefault(),!n(".viewMoreResponse",this.$el).hasClass("processing")){if(this.model.comment.get("loadMoreReplyErr"))return!1;n(".viewMoreResponse",this.$el).addClass("processing"),this.model.comment.set("loadMoreReply",null,this)}},this)),this.model.comment.bind("loadMoreReply",n.proxy(function(e,t){var o=this.$el.find(".viewMoreResponse");n(".responseItem.repNew",this.$el).removeClass("repNew"),n(".viewMoreResponse",this.$el).removeClass("processing");for(var s=t.content.length-1;s>=0;s--)a.add("loadMoreReply",t.content[s]);"undefined"!=typeof ins&&ins.refreshModule("comment-list-item",!1),d.setReplyLinkView(),0!==this.model.comment.get("reply").remaining?n("a",o).find(".replyList_moreCount").text(t.remaining):(o.hide(),i.disableLinksTemporarily(n("a",this.$el),250))},this)))),this.model.comment.get("deleteFlag")===!0&&("full"===this.model.page.get("tmplType")&&n(this.model.comment.selector("callDelDialog"),this.$el).on("fastclick",n.proxy(function(e){e.preventDefault();var t;if(this.model.comment.get("loadedReplyForm")){if(t=this.model.form.get("_formViewInstance"),!t)return!1;t.closeForm.call(t)}var o=n(".action:first",this.$el),i=o.outerWidth(),r=o.outerHeight(),a=o.offset().left,m=s.template(n("#delete-dialog-template").html());o.parent().append(m({message:"このコメントを削除しますか？",bucketId:l})),n(this.model.comment.selector("del"),this.$el).on("fastclick",n.proxy(function(e){return e.preventDefault(),!this.model.comment.get("deleted")&&(this.model.comment.set("deleted",!0,this),void("root"===this.model.comment.get("type")?d.buttonClick("cmt","delete",this.$el):d.buttonClick("rep","delete",this.$el)))},this)),n(this.model.comment.selector("cancelDel"),this.$el).on("fastclick",n.proxy(function(e){e.preventDefault(),this.model.comment.set("delDialog",!0),this.model.page.hundleScreenEvent("html").off({eventName:"outerClick-"+this.model.comment.get("id")}),this.model.page.hundleScreenEvent("window").off({eventName:"resizeDialog-"+this.model.comment.get("id")}),n(this.model.comment.selector("del"),this.$el).off("fastclick"),n(this.model.comment.selector("cancelDel"),this.$el).off("fastclick"),n(this.model.comment.selector("dispDelDialog"),this.$el).remove()},this));var c={width:i+a+"px",height:r+"px"},h=n(this.model.comment.selector("dispDelDialog"),this.$el);n(" .mask",h).css(c),n(" table",h).css(c),h.css(c).fadeIn("fast"),this.model.comment.set("delDialog",!0,{}),this.model.page.hundleScreenEvent("html").on({eventType:"pc"===this.model.page.get("device")?"click":"touchend",eventName:"outerClick-"+this.model.comment.get("id"),targetEl:n("root"===this.model.comment.get("type")?".action .root":".action",this.$el),callback:function(){this.model.page.hundleScreenEvent("html").off({eventName:"outerClick-"+this.model.comment.get("id")}),this.model.page.hundleScreenEvent("window").off({eventName:"resizeDialog-"+this.model.comment.get("id")}),n(this.model.comment.selector("del"),this.$el).off("fastclick"),n(this.model.comment.selector("cancelDel"),this.$el).off("fastclick"),n(this.model.comment.selector("dispDelDialog"),this.$el).remove()},context:this}),this.model.page.hundleScreenEvent("window").on({eventType:"resize",eventName:"resizeDialog-"+this.model.comment.get("id"),callback:function(){var e="root"===this.model.comment.get("type")?n(".action .root",this.$el):n(".action",this.$el),t=e.outerWidth(),o=e.outerHeight(),i=e.offset().left,s=n(this.model.comment.selector("dispDelDialog"),this.$el),r={width:t+i+"px",height:o+"px"};n(".mask",s).css(r),n("table",s).css(r),s.css(r)},context:this})},this)),this.model.comment.bind("deleted",n.proxy(function(){a.del(this.model.comment),this.model.page.hundleScreenEvent("html").off({eventName:"outerClick-"+this.model.comment.get("id")}),this.model.page.hundleScreenEvent("window").off({eventName:"resizeDialog-"+this.model.comment.get("id")}),n(this.model.comment.selector("del"),this.$el).off("fastclick"),n(this.model.comment.selector("cancelDel"),this.$el).off("fastclick"),n(this.model.comment.selector("dispDelDialog"),this.$el).fadeOut("fast",function(){n(this).remove()}),this.close()},this))),this.model.comment.bind("error",n.proxy(function(e,t){var o=t.type.split("-"),i=n.proxy(function(){"agree"===o[1]?("smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .good div":".good div",this.$el).removeClass("processing").addClass("disabled"):n("root"===this.model.comment.get("type")?".root .good a":".good a",this.$el).removeClass("processing").addClass("disabled"),"smartphone"===this.model.page.get("device")?n(this.model.comment.selector("good"),this.$el).find(".userNum").html(this.model.comment.get("agree")):n(this.model.comment.selector("good"),this.$el).find(".votes-btn").html("<em>"+this.model.comment.get("agree")+"</em>")):"disagree"===o[1]?("smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .bad div":".bad div",this.$el).removeClass("processing").addClass("disabled"):n("root"===this.model.comment.get("type")?".root .bad a":".bad a",this.$el).removeClass("processing").addClass("disabled"),"smartphone"===this.model.page.get("device")?n(this.model.comment.selector("bad"),this.$el).find(".userNum").html(this.model.comment.get("disagree")):n(this.model.comment.selector("bad"),this.$el).find(".votes-btn").html("<em>"+this.model.comment.get("disagree")+"</em>")):"agreeDelete"===o[1]?("smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .good div":".good div",this.$el).removeClass("processing").addClass("disabled"):n("root"===this.model.comment.get("type")?".root .good a":".good a",this.$el).removeClass("processing").addClass("disabled"),"smartphone"===this.model.page.get("device")?n(this.model.comment.selector("good"),this.$el).find(".userNum").html(this.model.comment.get("agree")):n(this.model.comment.selector("good"),this.$el).find(".votes-btn").html("<em>"+this.model.comment.get("agree")+"</em>")):("smartphone"===this.model.page.get("device")?n("root"===this.model.comment.get("type")?".root .bad div":".bad div",this.$el).removeClass("processing").addClass("disabled"):n("root"===this.model.comment.get("type")?".root .bad a":".bad a",this.$el).removeClass("processing").addClass("disabled"),"smartphone"===this.model.page.get("device")?n(this.model.comment.selector("bad"),this.$el).find(".userNum").html(this.model.comment.get("disagree")):n(this.model.comment.selector("bad"),this.$el).find(".votes-btn").html("<em>"+this.model.comment.get("disagree")+"</em>"))},this),s=n.proxy(function(){n("#"+this.model.comment.formId).hide(),n(".reply",this.$el).removeClass("isShown"),setTimeout(n.proxy(function(){this.model.comment.set("formLoadErr",!1)},this),3800)},this);switch(o[0]){case"vote":i();break;case"delete":return n(this.model.comment.selector("dispDelDialog")+" p",this.$el).html(t.message),!1;case"loadedReplyForm":s();break;case"loadMoreReply":n(".viewMoreResponse",this.$el).removeClass("processing"),setTimeout(n.proxy(function(){this.model.comment.set("loadMoreReplyErr",!1)},this),3800);break;case"timeout":switch(o[1]){case"loadedReplyForm":s();break;case"loadMoreReply":setTimeout(n.proxy(function(){this.model.comment.set("loadMoreReplyErr",!1)},this),3800);break;case"agree":i();break;case"disagree":i();break;case"agreeDelete":i();break;case"disagreeDelete":i();break;case"deleted":return n(this.model.comment.selector("dispDelDialog")+" p",this.$el).html("通信エラーが発生しました。<br>ブラウザの再読み込みをお願いします。"),!1}}this.model.comment.showAlert.call(this,t.message)},this))};m.prototype={close:function(){n(this.model.comment.selector("good"),this.$el).off("fastclick"),n(this.model.comment.selector("bad"),this.$el).off("fastclick"),n(".reply a",this.$el).off("fastclick"),n(".replyToggle a",this.$el).off("fastclick"),n(".viewMoreResponse a",this.$el).off("fastclick"),n(this.model.comment.selector("callDelDialog"),this.$el).off("fastclick"),this.model=null}},e.exports=m},function(e,t,o){"use strict";var i=o(6),s=function(e){this.$el=i("#viewSwitchComment"),this.model=e.model||null,this.menuOpen=!1,"pc"!==this.model.page.get("device")&&i("dl .btnView",this.$el).on("fastclick",i.proxy(function(e){var t=i("ul",this.$el);e.preventDefault(),this.model.page.hundleScreenEvent("html").on({eventType:"touchend",eventName:"outerClick-sort",targetEl:t,callback:function(){var e=arguments[1],t=arguments[2],o=i(".btnView",this.$el),s=o.offset(),n=s.top,r=n+o.outerHeight(),a=s.left,l=a+o.outerWidth();return!(e>n&&e<r&&t>a&&t<l)&&(i("ul",this.$el).hide(),this.menuOpen=!1,i(".btnView",this.$el).removeClass("current"),void this.model.page.hundleScreenEvent("html").off({eventName:"outerClick-sort"}))},context:this}),t.toggle(),i(".btnView",this.$el).toggleClass("current"),this.menuOpen?(this.menuOpen=!1,this.model.page.hundleScreenEvent("html").off({eventName:"outerClick-sort"})):(t.find('li a[data-target="'+this.model.page.get("sortType")+'"]').addClass("current"),this.menuOpen=!0)},this))};e.exports=s},function(e,t,o){"use strict";var i=o(4),s=o(2),n=o(6),r=o(5),a=i.getGetParam("bkt")||"",l=function(e){this.model=e.model,this.$el=e.$el,this.$formAppendTarget=e.$formAppendTarget,n(".textInput.loggedIn",this.$el).on("fastclick",n.proxy(function(){s.delay(n.proxy(function(){this.model.form.set("loadedForm",!0,this)},this),200)},this)).on("click",function(e){
e.preventDefault()}),this.model.form.bind("form",n.proxy(function(){if(!(this.model.form.get("_formViewInstance")instanceof r)){var e=s.template(n("#form-template").html());this.$formAppendTarget.append(e({bucketId:a,id:"inputarea-header",textAreaId:"textarea-header",dispName:this.model.form.get("dispName")||"----",mailAddress:this.model.form.get("mailAddress")||!1,profileImgUrl:this.model.form.get("profileImgUrl")||"",isDefaultProfileIconPath:i.isDefaultProfileIconPath(this.model.form.get("profileImgUrl")),profileImgWidth:this.model.form.get("profileImgWidth")||"",profileImgHeight:this.model.form.get("profileImgHeight")||"",wallUrl:this.model.form.get("wallUrl")||"",isSetMailFirst:this.model.form.get("isSetMailFirst"),settingMailUrl:this.model.form.get("settingMailUrl")||"",guid:this.model.form.get("guid")||"",guideLine:this.model.form.get("guideLine")||"",guideLineUrl:this.model.form.get("guideLineUrl")||"",bcrumb:this.model.form.get("bcrumb")||"",doneUrl:this.model.page.get("doneUrl")||"",sec:"artcmt_f",slk:"comment",pos:0,categoryId:this.model.page.get("categoryId")})),this.model.form.set("_formViewInstance",new r({type:"new",model:this.model,$compact:this.$el})),ins.refreshModule("comment-header",!1),this.model.form.bind("delFormViewInstance",n.proxy(function(){this.model.form.set("_formViewInstance",null),this.model.form.unbind("delFormViewInstance")},this))}n("a",this.$formAppendTarget).each(function(){var e=n(this),t=250,o=e.attr("href");e.removeAttr("href"),setTimeout(function(){e.attr("href",o)},t)}),this.model.page.hundleScreenEvent("window").on({eventType:"resize",eventName:"resizeLoginAlertPanel",callback:function(){this.model.page.resizePanel("inputarea-header")},context:this}),n(".textareaBox").addClass("is-focus"),this.$el.hide(),this.model.form.get("_formViewInstance").openForm.call(this,"new")},this)),this.expandForm=n.proxy(function(){var e=this;window.setTimeout(function(){n(".textInput.loggedIn",e.$el).trigger("fastclick")},200)},this)};e.exports=l},function(e,t,o){function i(e){var t=this,o="";o=""!==e.defaultStatus?e.defaultStatus:e.model.isOpen()?"open":"close","close"===o?this.closeModule(e.model):this.openModule(e.model),s(".commentToggle").on("click",function(o){o.preventDefault(),s(".shortFrame").hasClass("hide")?(t.openModule(e.model),e.page.sendMessage({eventName:"openmodule"}),n.buttonClick("cmthed","opnmod",null)):(t.closeModule(e.model),e.page.sendMessage({eventName:"closemodule"}),n.buttonClick("cmthed","clsmod",null))})}var s=o(6),n=o(24);i.prototype.openModule=function(e){var t=s("a",".commentToggle");t.removeClass("off").addClass("on"),s(".shortFrame").removeClass("hide"),e.setOpen()},i.prototype.closeModule=function(e){var t=s("a",".commentToggle");t.removeClass("on").addClass("off"),s(".shortFrame").addClass("hide"),e.setClose()},e.exports=i},function(e,t,o){"use strict";function i(){var e=new n.Child({parentOrigin:s.getParentOrigin(),grandChildPath:s.getGrandChildIframePath()});e.send("init-"+$("body").height()),setInterval(function(){e.send("adjustheight-"+$("body").height())},100)}var s=o(4),n=o(19);e.exports=i}]);