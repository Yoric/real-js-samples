(function(n){"use strict";(function(){function u(n,t){var i=n.closest("div.card").data("assetid");i&&(t["ms.actioncardid"]=i,t["ms.svi"]="300")}function h(t){t.find(".ocSmartFeedbackBegin").hide();t.find(".ocSmartFeedbackReply").removeClass("ocHidden");n("#ocHelp").css("padding-bottom",n("#ocFooterWrapper").height()+"px");n("#supWrapperToPreventFeedbackFlickering").addClass("supFeedbackFullTextIsOpen")}function t(t){t.find(".ocFeedbackFinalThankYouMessage").removeClass("ocHidden");n("#supWrapperToPreventFeedbackFlickering").removeClass("supFeedbackFullTextIsOpen");n("#ocHelp").css("padding-bottom",n("#ocFooterWrapper").height()+"px");t.find(".feedbackThankYou").focus()}function o(n,t){if(typeof awa=="object"){var i={behavior:awa.behavior.VOTE,actionType:"CL",contentTags:{sat:n["ms.sva"],fbnm:"Feedback",fbid:1,areaName:"Feedback"}};s(t,i);window.awa.ct.capturePageAction(t,i)}}function e(t){if(typeof awa=="object"){var i=n('[name="feedbackText"]'),r={behavior:awa.behavior.SURVEYCOMPLETE,actionType:"CL",contentTags:{fbnm:"Feedback",fbid:2,areaName:"Feedback",vtbm:t["ms.svv"],sentscore:t["ms.sentimentScore"]}};s(i,r);window.awa.ct.capturePageAction(i,r)}}function s(n,t){var i=n.closest(".card").data("assetid");i!==null&&(t.contentTags.compID=i)}var i={f1:"f1",article:"article",search:"search"},r="",f;n.each(window.location.pathname.split("/"),function(n,t){return t=t.toLowerCase(),t===i.f1||t===i.article||t===i.search?(r=t,!1):void 0});n("#ocButtonSendNoComment").removeClass("ocHidden");f=!1;n(".smartFeedbackForm").on("click",".feedbackSelection",function(){var i=n(this),t=i.closest(".ocFB"),r={"ms.interactiontype":occe.constants.wedcs.interactionType.completedFinalStepInSeries,"ms.ea_action":"FeedbackControlRate","ms.svq":"1","wcs.cot":"1","wcs.et":"2","wcs.cn":i[0].innerText||""};u(i,r);i.attr("name")==="buttonYes"?(t.find(".ocFeedbackHeaderIfArticleHelpful").removeClass("ocHidden"),r["ms.sva"]="100"):(t.find(".ocFeedbackHeaderIfArticleNotHelpful").removeClass("ocHidden"),r["ms.sva"]="0",f=!0);o(r,n(this));h(t);t.find(".ocButtonSendComment")[0].scrollIntoView(!1);t.find(".ocSmartFeedbackTextArea").focus()}).submit(function(o){var h,s,l,c,a;o.preventDefault();h=n(this);s=h.closest(".ocFB");h.addClass("ocHidden");l=s.find(".ocSmartFeedbackTextArea").val();c={"ms.interactiontype":occe.constants.wedcs.interactionType.formSubmit,"ms.ea_action":"Comment","ms.svq":"2","ms.svv":l};u(h,c);h.data("sentiment-analysis")?(a=s.find("input[name=__RequestVerificationToken]").val(),t(s),n.ajax({type:"post",url:window.location.protocol+"//"+window.location.host+"/f1/sentimentService",data:{query:l,__RequestVerificationToken:a},success:function(u){c["ms.sentimentScore"]=u.Score||"unknown";e(c);OOGlobal&&OOGlobal.Culture&&OOGlobal.Culture.toLowerCase()==="en-us"&&(r===i.f1||r===i.article)&&f&&u.RedirectToSupport&&h.data("support-available")?n.ajax({url:"/home/chatLink",type:"POST",data:{issueDescription:l,__RequestVerificationToken:a},success:function(i){i.chatLink?(s.find(".smartFeedbackChatLink").attr("href","/home/chat?"+n.param({isFromFeedback:!0,query:l})),s.find(".ocFeedbackFinalThankYouMessage").addClass("ocHidden"),s.find(".ocFeedbackToChat").removeClass("ocHidden")):t(s)}}):t(s)},error:function(){t(s);e(c)}})):(t(s),e(c))});n(".smartFeedbackForm").on("click",".ocButtonSendNoComment",function(){var r=n(this).closest(".ocFB"),i;r.find(".smartFeedbackForm").addClass("ocHidden");t(r);i={"ms.interactiontype":occe.constants.wedcs.interactionType.formSubmit,"ms.ea_action":"Comment","ms.svq":"2","ms.svv":""};u(n(this),i);o(i,n(this))})})()})(jQuery),function(n){"use strict";n(function(){occe.Controls=occe.Controls||{};occe.Controls.Feedback=function(){function g(){c=n("#footerArea");r=n("#ocArticle");l=n("#supFeedbackWrapper");u=n("#supDisableStickyFeedbackButton");nt();u.click(function(){occe.SetCookie(p,"true");e=!0;a()});f.on("scroll resize",function(){t=y();o=b();i=h();n("#livefyre").length&&(s=k());v()});r.click(function(){i=h();v()})}function nt(){e=w();o=b();s=k();t=y();i=h()}function w(){return occe.GetCookie(p)==="true"}function b(){return occe.windowIsTabletSizeOrSmaller()}function k(){return c.offset().top-n(window).height()<=200}function a(){l.removeClass("supStickyFeedback");u.addClass("ocHidden")}function v(){var n=!i&&!e&&!o&&t&&!s;n?d():a()}function h(){return f.scrollTop()+f.height()>c.offset().top}function d(){l.addClass("supStickyFeedback");u.removeClass("ocHidden")}function y(){if(t)return!0;var n=f.scrollTop(),i=r.offset().top,u=r.height()/4;return n>i+u}var c,r="hello",l,u,f=n(window),p="userHasDisabledFeedbackStickiness",e,o,s,t,i;return{initializeControl:g,attachFeedbackAboveUniversalFooter:a,makeFeedbackSticky:d,hasUserDisabledFeedbackStickiness:w,hasUserSeenOneFourthOfArticle:y,updateFeedbackStickiness:v,isUniversalFooterVisible:h,setUserHasDisabledFeedbackStickiness:function(n){e=n},setUniversalFooterInViewport:function(n){i=n},setWindowTooTightForStickiness:function(n){o=n},setArticleTooShortForStickiness:function(n){s=n},setUserHasSeenOneFourthOfArticle:function(n){t=n}}}()})}(jQuery),function(n){"use strict";n(function(){occe.Controls.Feedback.initializeControl()})}(jQuery)