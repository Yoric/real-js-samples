define(["common/dmp-api"],function(e){"use strict";function t(){this.sizes={width:575,height:400},this.handleShareClick=this.handleShareClick.bind(this),window.sharer||this.init(),window.sharer=this}return t.prototype.init=function(){this.bindEvents(),this.bindEventsArticle()},t.prototype.bindEvents=function(){var e=Array.prototype.slice.call(document.querySelectorAll("[data-share]"));Array.prototype.forEach.call(e,function(e){e.addEventListener("click",this.handleShareClick,!0)}.bind(this))},t.prototype.bindEventsArticle=function(){var e=Array.prototype.slice.call(document.querySelectorAll(".main-page-entity > .sticky-social-block [data-share]"));Array.prototype.forEach.call(e,function(e){e.addEventListener("click",this.sendDmpRequest,!0)}.bind(this))},t.prototype.bindEventsSticky=function(){var e=Array.prototype.slice.call(document.querySelectorAll("body > .sticky-social-block [data-share]"));Array.prototype.forEach.call(e,function(e){e.addEventListener("click",this.handleShareClick,!0)}.bind(this))},t.prototype.sendDmpRequest=function(t){var n=Object.assign({},window._datapythagore,{c_reseau_social:t.currentTarget.getAttribute("data-share")});e.sendDmpRequest(n)},t.prototype.handleShareClick=function(e){e=e||window.event;var t={dualScreenLeft:void 0!==window.screenLeft?window.screenLeft:screen.left,dualScreenTop:void 0!==window.screenTop?window.screenTop:screen.top,width:window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height:window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height},n={width:this.sizes.width,height:this.sizes.height,url:e.currentTarget.getAttribute("data-href"),name:e.currentTarget.getAttribute("data-share"),position:{x:t.width/2-this.sizes.width/2+t.dualScreenLeft,y:t.height/2-this.sizes.height/2+t.dualScreenTop}},i="\n      status=1,\n      scrollbars=no,\n      width=".concat(n.width,",\n      height=").concat(n.height,",\n      left=").concat(n.position.x,"\n      top=").concat(n.position.y,",\n    ");n.options=i,this.openPopupInANewWindow(n.url)(n.name,n.options)},t.prototype.openPopupInANewWindow=function(e){return function(t,n){switch(t){case"facebook":window.open(e,t,n);break;case"linkedin":window.open(e,t,n);break;case"twitter":window.open(e.replace(/#/g,""),t,n);break;default:top.location.href=e}}},t});