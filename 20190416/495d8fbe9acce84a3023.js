pcodeStaticJsonp8158([20],{1015:function(t,i,e){"use strict";var n,s;Object.defineProperty(i,"__esModule",{value:!0});var r=e(112).on,o=e(256).hasImportantFlag,a=e(385).isInViewport,d=e(96).options,u="description",c="displayUrl",l="button",h="city",p="sitelink",f="refinement",m="addressAndPhone",g="disclaimer",y="age",b=((n={})[u]=2,n[c]=11,n[l]=12,n[h]=500,n[p]=501,n[f]=505,n[m]=509,n[g]=510,n[y]=511,n),v="logo",C="main",k=((s={})["icon"]=1,s[v]=2,s[C]=3,s),S=function(t){return t.split(/px\s?/g)},A=function(t){void 0===t&&(t="0px 0px 0px 0px");var i=S(t);return{top:Number(i[0]),right:Number(i[1]),bottom:Number(i[2]),left:Number(i[3])}},w={image:0,title:1,description:2,displayUrl:3,sitelink1:4,sitelink2:5,sitelink3:6,sitelink4:7,city:8,age:9,addressAndPhone:10,refinement1:11,refinement2:12,refinement3:13,refinement4:14,ctaText:15,disclaimer:16},I=function(t){void 0===t&&(t="0px");var i=S(t);return Number(i[0])},P={};function T(t){return e(185)(t)?e(10).map(t,T):e(89)(t)?e(867).mapObjectValues(t,T):e(113)(t)&&String(Number(t))===t?Number(t):t}var N=function(){function t(t,i,n,s,r,o,a){void 0===a&&(a={}),this.visibilityPortion=0,this.isContainingSafeFrame=!1,this.postMessId=e(1016).generateHexadecimalString(10),this.adtuneType="large",this.visibilityConfirmed=!1;var d=t.getSettings();this.language=t.getLanguage(),this.config=T(d.customBlockFormat),this.dataSource=t,this.blockId=s,this.safeFrameId="ya_custom_block_"+this.blockId+(o?"-"+o:""),this.layout=e(2).Layouts.WIDE,this.renderParams=a;var u=this.config.grid,c=u.row,l=u.col,h=this.config.layout,p=h.width,f=h.height;if(this.config&&this.config.styles){var m=this.config.styles,g=m.layouts,y=m.grid,b=m.label,v=g&&g[0]&&g[0].normal,C=A(v.margin),k=A(this.getCustomBlockProp(y,"padding")),S=2*I(this.getCustomBlockProp(y,"border")),w=I(this.getCustomBlockProp(b,"height"));p=l*(p+(C.left+C.right)+(k.left+k.right))+S,f=c*(f+(C.top+C.bottom)+(k.top+k.bottom))+S+w}this.limit=c*l,this.size={width:p,height:f};var P=document.getElementById(n);this.container=P&&e(69).getContainer(P,r),this.renderTo=n,this.createCustomBlockFormat(),this.html=this.prepareHtml();window;this.dataSource.setTesttagProps({layout:this.layout})}return t.prototype.isVisibilityConfirmed=function(){return this.visibilityConfirmed},t.prototype.createVisibilityConfirmer=function(){var t=this;null!==this.container&&(this.visibilityConfirmerInRtb=new(e(88))(this.container,function(){return t.confirmVisibilityInRtb()},{portion:e(388).getVisiblePortion(this.container,this.dataSource.hasCommonRtbVisibility()),delay:this.dataSource.getVisibilityTime()}),this.visibilityConfirmer=new(e(88))(this.container,function(){return t.confirmVisibility()},{portion:this.visibilityPortion,delay:this.dataSource.getVisibilityTime()}),this.renderParams.confirmAtOnce&&(this.visibilityConfirmed=!0,this.visibilityConfirmer.confirm(),this.visibilityConfirmerInRtb.confirm()))},t.prototype.destructor=function(){var t=this;this.visibilityConfirmer&&this.visibilityConfirmer.stop(),this.visibilityConfirmerInRtb&&this.visibilityConfirmerInRtb.stop(),this.isContainingSafeFrame&&this.destroySafeFrame(),e(24)(this.advList,function(i){t.dataSource.releaseAd(i.adId)})},t.prototype.render=function(){this.container&&this.renderSafeframe(this.container)},t.prototype.getMainCont=function(){return this.container},t.prototype.getDataSource=function(){return this.dataSource},t.prototype.getUsedAdvs=function(){return this.advList},t.prototype.isInViewport=function(){return a(this.container,e(2).REFRESH_VIEWPORT_VISIBLE_PART)},t.prototype.getTesttag=function(){return this.dataSource.getTesttag()},t.prototype.slideUp=function(t){e(119).slideUp(this.getMainCont()||this.safeframeContainer,t)},t.prototype.getCustomBlockProp=function(t,i){return t&&t.normal&&t.normal[i]},t.prototype.renderSafeframe=function(t){var i=P[this.renderTo];i&&e(86).nukeSafeframe(window,i),e(257).clearHTML(t),this.safeframeContainer=document.createElement("div"),t.appendChild(this.safeframeContainer),this.createPostmessageListener();var n=this.size,s=n.width,r=n.height,o=this.html,a=this.safeFrameId;e(86).initSafeframe(window,this.safeframeContainer,{width:s,height:r,html:o,id:a}),P[this.renderTo]=this.safeFrameId,this.isContainingSafeFrame=!0},t.prototype.prepareHtml=function(){return e(1017)({lang:e(191).getLangCode(this.language),preventMissClicksScript:e(196).getPreventMissClicksScript(),src:"https://yastatic.net/partner-code-bundles/4435/custom_block.js",postMessId:this.postMessId,config:JSON.stringify(this.config)})},t.prototype.createPostmessageListener=function(){var t=this;r(window,"message",function(i){var n=i.data;e(113)(n)&&n.indexOf(t.postMessId)>=0&&t.parseData(n)})},t.prototype.parseData=function(t){var i,n=this;try{i=JSON.parse(t)}catch(t){return void e(11).logger.warn(t,"CustomBlock::jsonParse")}if(i.id===this.postMessId){var s=i.message,r=i.adNumber,o=i.data;switch(s){case"onAdtuneButtonClick":e(151).onAdtuneClick();break;case"onAdtuneAnswerClick":var a=this.getAbuseUrl(r);e(151).chooseOption(o,a,this.adtuneType,function(){return n.getOptions()}),this.dataSource.abuseAd(o);break;case"onReady":this.afterRender()}}},t.prototype.confirmVisibility=function(){this.visibilityConfirmed=!0,this.dataSource.onConfirmVisibility(this.advList)},t.prototype.confirmVisibilityInRtb=function(){this.dataSource.confirmVisibilityInRtb()},t.prototype.destroySafeFrame=function(){e(86).nukeSafeframe(window,this.safeFrameId),this.isContainingSafeFrame=!1},t.prototype.filterRawAds=function(t){return t.slice(0,this.limit)},t.prototype.createCustomBlockFormat=function(){var t=this.dataSource.getFreeAds(),i=this.filterRawAds(t);this.advList=this.createAdvList(i),this.addAdvsToConfig(),this.addAdtune()},t.prototype.addAdtune=function(){for(var t=!1,i=0;i<this.advList.length;i++)if(void 0!==this.getAbuseUrl(i)){t=!0;break}var n=this.getOptions();t&&(this.config.adtune={tooltip:e(6).i18n("HIDE_AD",this.language),feedback:e(6).i18n("ADTUNE_TITLE_LARGE",this.language),greet:e(6).i18n("THANKS_AD_HIDDEN",this.language),options:n})},t.prototype.addAdvsToConfig=function(){var t=this,i=[];e(24)(this.advList,function(n){t.dataSource.captureAd(n.adId);var s,r=n.url,a=n.title,d=n.body,v=n.domain,A=n.region,I=n.sitelinks,P=n.age,T=n.warning,N=n.vcardUrl,M=n.addInfo,_=n.images,R=[{id:w.title,title:{text:a},link:{url:r}},{id:w.description,data:{type:b[u],value:d}},{id:w.displayUrl,data:{type:b[c],value:v},link:{url:r}},{id:w.addressAndPhone,data:{type:b[m],value:e(6).i18n("ADDRESS_AND_PHONE",1)},link:{url:N}},{id:w.city,data:{type:b[h],value:A}},{id:w.ctaText,data:{type:b[l],value:e(6).i18n("GO",1)},link:{url:r}}];if(P&&R.push({id:w.age,data:{type:b[y],value:P}}),R.push({id:w.disclaimer,data:{type:b[g],disclaimerType:o(n.bannerFlags)?"medicine":"common",value:T}}),e(185)(_)&&_.length>0){var B=120,O=t.config.styles&&t.config.styles.assets&&t.config.styles.assets[0]&&t.config.styles.assets[0].normal;O&&(s=O.width,B=Number(S(s)[0]));var V=t.getImage(_,B);R.push({id:w.image,img:{type:k[C],url:V.src,w:V.width,h:V.height},link:{url:r}})}e(185)(I)&&e(24)(I,function(t,i){var e=t.title,n=t.url;R.push({id:w["sitelink"+(i+1)],data:{type:b[p],value:e},link:{url:n}})}),e(89)(M)&&"callouts"===M.type&&e(185)(M.callouts_list)&&e(24)(M.callouts_list,function(t,i){i<4&&R.push({id:w["refinement"+(i+1)],data:{type:b[f],value:t}})}),i.push(R)},this),this.config.ads=i},t.prototype.getImage=function(t,i){var n=t[0],s=Math.abs(n[1]-i);return e(24)(t,function(t){(!n||!n[0]||Math.abs(t[1]-i)<s)&&(n=t,s=Math.abs(n[1]-i))}),{src:n[0],width:n[1],height:n[2]}},t.prototype.createAdvList=function(t){var i=this,n=e(10).map(t,function(t){return i.dataSource.prepareAd(t,{})},this);return e(23).filter(n,function(t){return Boolean(t)})},t.prototype.getAbuseUrl=function(t){return this.advList[t].abuseUrl},t.prototype.getOptions=function(){return d(this.language)[this.adtuneType]},t.prototype.afterRender=function(){this.renderParams.confirmByHandler||this.createVisibilityConfirmer()},t}();i.CustomBlock=N},1016:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.generateHexadecimalString=e(77).generateHexString},1017:function(t,i){t.exports=function(t){var i=[];return i.push('<!DOCTYPE html><html lang="',t.lang,'"><head><meta charset="UTF-8"><title></title></head><body id="customBanner">',t.preventMissClicksScript,'<script src="',t.src,'"><\/script><script>function postMess(message, adNumber, data) {var obj = {message: message,adNumber: adNumber,id: "',t.postMessId,'"};if (data) {obj["data"] = data;}window.parent.postMessage(JSON.stringify(obj), "*");}window.customBlock.create("customBanner",',t.config,',{onReady: function() {postMess("onReady")},onAdtuneButtonClick: function(adNumber) {postMess("onAdtuneButtonClick", adNumber)},onAdtuneAnswerClick: function(id, adNumber) {postMess("onAdtuneAnswerClick", adNumber, id)},});<\/script></body></html>'),i.join("")}},820:function(t,i,e){"use strict";t.exports=e(1015).CustomBlock},867:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.mapObjectValues=function(t,i){var n={};return e(49).getObjectKeys(t).forEach(function(e){n[e]=i(t[e],e)}),n}}});