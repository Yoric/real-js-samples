var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},function(){"use strict";var t=function(){this.init()};t.prototype={BRIDGEDATA:{},ENVDATA:{},PAGEDATA:{},INIT_PAGEDATA:{},COMPONENT:{},SET_PAGE_DATA_QUEUE:[],LOAD_DONE:!1,LOAD_DONE_LIST:[],LOAD_DONE_CHECK_TIME:200,LOAD_CHECK_TIMES:5,LOG_CNT_LIMIT:100,LOG_HISTORY:[],LOAD_TIMER:null,LOAD_QUEUE:{},LOAD_INTERVAL:500,LOAD_MOD_CHECK_TIMES:5,LOAD_MOD_CHECK_TIMES_CURR:5,init:function(){this.setBridgeData()},setBridgeData:function(){if(YAHOO.JP.trv.bridge){var t={},e=YAHOO.JP.trv.bridge;for(var a in e)t[a]=e[a];this.BRIDGEDATA=t}},getBridgeData:function(t){return!!t&&this.BRIDGEDATA[t]},initBuildData:function(t,e,a){this.initEnvData(t),this.initPageData(e),this.setUrlPageData(a),this.setInitialPageData()},initEnvData:function(t){var e={};for(var a in t)e[a]=t[a];this.ENVDATA=e},initPageData:function(t){if(!t)return!1;var e={};for(var a in t)e[a]={data:t[a],subscriber:[]};return e.central_load_done={data:!1,subscriber:[]},this.PAGEDATA=e,!0},setUrlPageData:function(t,e){var a={},i=e||location.href,r=i.split("?"),n=r[1]?r[1].split("&"):"",_=t&&t.param||"",s=t&&t.reg||"",o=t&&t.decd||"";if(n&&_)for(var l,c=0,u=n.length;c<u;c++)l=n[c].split("="),void 0!==_[l[0]]&&(a[l[0]]=l[1]||"");if(s)for(var c in s)i.match(c)&&(a[s[c]]=RegExp.$1);for(var c in a)this.PAGEDATA[c]&&(this.PAGEDATA[c].data=o[c]?decodeURIComponent(a[c]).split("+").join(" "):a[c])},setDefaultPageData:function(t){var e=this.PAGEDATA;for(var a in t)void 0!==e[a]&&(""!==e[a].data&&null!==e[a].data||(this.PAGEDATA[a].data=t[a]))},setInitialPageData:function(){this.INIT_PAGEDATA=$.extend(!0,{},this.PAGEDATA)},getInitialPageDataSet:function(t){if(!t)return!1;var e=this.INIT_PAGEDATA;for(var a in t)t[a]=e[a]&&e[a].data;return t},getEnvData:function(t){return!!t&&this.ENVDATA[t]},getPageData:function(t){return!!t&&(this.PAGEDATA[t]&&this.PAGEDATA[t].data)},getPageDataSet:function(t){if(!t)return!1;var e=this.PAGEDATA;for(var a in t)t[a]=e[a]&&e[a].data;return t},delegate:function(t){if("function"!=typeof t)return!1;this.extendMethod(t);var e=new t,a=e.COMPNAME;return!!a&&(!this.COMPONENT[a]&&(this.COMPONENT[a]={func:t,obj:e},!1===this.LOAD_DONE&&this.componentLoadCheck(),!0))},extendMethod:function(t){return t.prototype.centralSubscribe=function(t){e.subscribe.call(this,t)},t.prototype.centralSetPageData=function(t,a){e.setPageData(t,a,this.COMPNAME)},t.prototype.centralDone=function(){e.componentLoadDone(this.COMPNAME)},t.prototype.centralDoneCallback=function(t){e.subscribe.call(this,{dataname:"central_load_done",callback:$.proxy(t,this)})},t.prototype.centralInfoLog=function(t){e.infoLog(t)},t.prototype.centralErrorLog=function(t){e.errorLog(t)},t},subscribe:function(t){return!!t&&(!!t.dataname&&(void 0!==e.PAGEDATA[t.dataname]&&(!!this.COMPNAME&&(!(!t.callback||"function"!=typeof t.callback)&&(e.PAGEDATA[t.dataname].subscriber.push({compname:this.COMPNAME,callback:t.callback,times:t.times||null}),!0)))))},setPageData:function(t,e,a){if(!t)return!1;if(!a)return!1;if(!1===this.LOAD_DONE)return this.SET_PAGE_DATA_QUEUE.push({data:t,nopub:e,comp_name:a}),!0;for(var i in t){if(void 0===this.PAGEDATA[i])return!1;this.PAGEDATA[i].data=t[i],this.LOG_HISTORY.push("set -> k:"+i+", d:"+t[i]+", nopub:"+(e?"true":"false")+", comp:"+a),e||this.publish(i,a)}return!0},publish:function(t,e){if(!t)return!1;if(void 0===this.PAGEDATA[t])return!1;var a=this.PAGEDATA[t].subscriber,i=a.length;if(0===i)return!0;for(var r,n=this.PAGEDATA[t].data;i--&&(r=a[i],!(this.COMPONENT[r.compname]&&e!==r.compname&&(this.LOG_HISTORY.push("pub -> k:"+t+", d:"+n+", comp:"+r.compname),r.callback.call(this.COMPONENT[r.compname].obj,n),void 0!==r.times&&((r.times=r.times-1)||a.splice(i,1),i<=0)))););return!0},componentLoadDone:function(t){return!!t&&(this.LOAD_DONE_LIST.push(t),!0)},componentLoadCheck:function(){var t=function(){var e=this.COMPONENT,a=this.LOAD_DONE_LIST,i=0;for(var r in e)i++;if(i==a.length)return void this.componentLoadProc();if(0!==this.LOAD_CHECK_TIMES)this.LOAD_CHECK_TIMES--,this.CHECK_LOAD_TIMER=setTimeout($.proxy(t,this),this.LOAD_DONE_CHECK_TIME);else for(var r in e)$.inArray(r,a)};this.CHECK_LOAD_TIMER&&clearTimeout(this.CHECK_LOAD_TIMER),this.CHECK_LOAD_TIMER=setTimeout($.proxy(t,this),this.LOAD_DONE_CHECK_TIME)},componentLoadProc:function(){this.LOAD_DONE=!0;for(var t,e=this.SET_PAGE_DATA_QUEUE,a=0,i=e.length;a<i;a++)t=e[a],this.setPageData(t.data,!0,t.comp_name);var r={};r.central_load_done=!0,this.setPageData(r,!1,"central")},isLoadDone:function(){return this.LOAD_DONE},getDispatchLog:function(){return this.LOG_HISTORY},infoLog:function(t){this.checkLogger(),this.infoLog(t)},errorLog:function(t){this.checkLogger(),this.errorLog(t)},checkLogger:function(){var e=["info","error"],a=YAHOO.JP.trv.trvlogger&&this.getEnvData("LOG_API");a&&YAHOO.JP.trv.trvlogger.setApiUrl(this.getEnvData("LOG_API"));for(var i=e.length;i--;)!function(e,a){t.prototype[e+"Log"]=function(t){if(!t)return!1;if(a){if(this["LOG_"+e.toUpperCase()+"_CNT"]--<0)return;YAHOO.JP.trv.trvlogger&&YAHOO.JP.trv.trvlogger.sendLog("["+e.toUpperCase()+"]"+t)}}}(e[i],a),a&&(t.prototype["LOG_"+e[i].toUpperCase()+"_CNT"]=this.getEnvData("LOG_LIMIT")||this.LOG_CNT_LIMIT||1)},loadExec:function(t,e){if(this.LOAD_MOD_CHECK_TIMES_CURR=this.LOAD_MOD_CHECK_TIMES,this.LOAD_TIMER)return this.LOAD_QUEUE[t]?void this.LOAD_QUEUE[t].push(e):void(this.LOAD_QUEUE[t]=[e]);this.LOAD_QUEUE[t]=[e],this.LOAD_TIMER=setInterval($.proxy(this.loadTimer,this),this.LOAD_INTERVAL)},loadTimer:function(){var t,e,a=this.LOAD_QUEUE;if(!Object.keys(a).length)return clearInterval(this.LOAD_TIMER),void(this.LOAD_TIMER=null);try{for(var i in a){e=i.split("."),t=!1;for(var r=0,n=e.length;r<n&&e.slice(0,r+1).join(".");r++)t=!0;if(t){for(var r=a[i].length;r--;)a[i][r]();delete a[i]}}}catch(t){}return--this.LOAD_MOD_CHECK_TIMES_CURR?void 0:(clearInterval(this.LOAD_TIMER),void(this.LOAD_TIMER=null))},getUniqueID:function(){var t=1;return function(){return"uid_"+(new Date).getTime()+t++}}(),createUniqueElm:function(t){return $("<div />").html(t||"").attr("id",this.getUniqueID())},detectOuterClick:function(t,e){if(!t||"[object Array]"===Object.prototype.toString.call(t)&&!t.length)return!1;if(!e||"function"!=typeof e)return!1;"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var i=JSON.stringify(t),r=0,n=a.length;r<n;r++)if(JSON.stringify(a[r].id)==i)return!0;return a.push({id:t,callback:e}),!0},updateOuterClick:function(t,e){if(!t||!e)return!1;if("[object Array]"===Object.prototype.toString.call(e)&&!e.length)return!1;"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var i=JSON.stringify(t),r=a.length;r--;)if(JSON.stringify(a[r].id)==i)return a[r].id=e,!0;return!0},getElmPos:function(t){var e=t?t.split("#").join(""):"",a=$("#"+e);if(0===a.length)return{top:0,left:0,height:0,width:0};var i=a.offset(),r=a.outerHeight(),n=a.outerWidth();return{top:i.top,left:i.left,height:r,width:n}},rapid3BeaconClick:function(t,e,a){if(void 0===YAHOO.JP.trv.ins||!YAHOO.JP.trv.ins.beaconClick)return!1;if(!(t&&t instanceof jQuery))return!1;var i=this.get_ylk(t),r=i.sec||"",n=i.slk||"",_=t.data("rapid_p")||"";return delete i.sec,delete i.slk,YAHOO.JP.trv.ins.beaconClick(r,n,_,i,e,a),!0},get_ylk:function(t){for(var e,a=t.data("ylk")||"",i=a.split(";"),r={},n=0,_=i.length;n<_;++n)e=i[n].split(":"),2==e.length&&(r[e[0]]=e[1]);return r}},YAHOO.JP.trv.central=new t;var e=YAHOO.JP.trv.central,a=[];$(document).on("click.central",function(t){if(a.length){for(var e,i,r=$(t.target),n=[],_=0,s=a.length;_<s;_++){e=a[_].id,i=!1;for(var o=0,l=e.length;o<l;o++)if(r.closest("#"+e[o]).length){i=!0;break}i?n.push(a[_]):a[_].callback()}a=n}})}();var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},$(function(){"use strict";var t=function(){};t.prototype={API_URL:"",setApiUrl:function(t){return t?(this.API_URL=t,!0):(this.log("logger.setApiUrl : 引数が空です"),!1)},setOnerror:function(t){if(!this.API_URL)return this.log("logger.setOnerror : ログ集計APIのURLがセットされていない"),!1;if(!t||"function"!=typeof t)return this.log("logger.setOnerror : 引数がfunctionでない"),!1;var e=this;return window.onerror=function(a,i,r,n,_){e.onerrorFunc(t,a,i,r,n,_)},!0},onerrorFunc:function(t,e,a,i,r,n){var _={msg:t?t():"",url:a,line:i,syslog:e,trace:n&&n.stack?n.stack:""};(new Image).src=this.API_URL+this.logFormat(_)},sendLog:function(t){return this.API_URL?t?(("string"==typeof t||t instanceof String)&&(t={msg:t}),(new Image).src=this.API_URL+this.logFormat(t),!0):(this.log("logger.sendLog : 引数が空です"),!1):(this.log("logger.setOnerror : ログ集計APIのURLがセットされていない"),!1)},logFormat:function(t){var e=[],a=$.extend({type:"info",msg:"",line:"",syslog:"",trace:""},t);for(var i in a)e.push(i+"="+encodeURIComponent(a[i]));return"?"+e.join("&")},log:function(t){}},YAHOO.JP.trv.trvlogger=new t});var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},$(function(){"use strict";var t=function(e){return this instanceof t?this.init(e):new t(e)},e=$("body"),a=[],i={position:"absolute",display:"none",zIndex:99999},r={"max-height":"300px","min-width":"200px",overflow:"auto","overflow-x":"hidden","line-height":1.3,border:"1px solid #bbb","border-radius":"4px","word-break":"break-all","word-wrap":"break-word","font-family":'"メイリオ",Meiryo,"ヒラギノ角ゴ Pro W3","Hiragino Kaku Gothic Pro",Osaka,"ＭＳ Ｐゴシック","MS PGothic"',"font-size":"1rem",cursor:"pointer"},n=function(t){var e=$("#"+t),a=e.offset(),i=e.outerHeight();return{top:a.top+i,left:a.left}},_=function(){var t=1;return function(){return"pull"+(new Date).getTime()+t++}}();$(document).on("click.trvpulldown",function(t){for(var e,i,r=$(t.target),_=r.attr("id")||"",s=a.length;s--;)if(e=a[s],i=$("#"+e.pull),r.closest("#"+e.trgt).length||r.closest("#"+e.pull).length){if(e.is_disable)continue;if(e.is_cbox&&r.closest("#"+e.pull).length)continue;_==e.trgt&&e.is_h&&i.css(n(_)),i[i.is(":hidden")?"fadeIn":"fadeOut"]("fast")}else i.fadeOut("fast")}),t.prototype={TRGT_ID:"",WRAP_ID:"",TRGT_EL:"",WRAP_EL:"",INNER_EL:"",BASE_CLASS:"",WRAP_CLASS:"",INNER_CLASS:"",SELECTED_CLASS:"",HOVER_CLASS:"",SELECTED_CALLBACK:"",CUR_DATA:"",UNIT_PAD:"20",ELM_TYPE:"",BASE_TXT:"",PULLTXT_LEN:"",SWP_TXT:"",init:function(t){return t?"string"!=typeof t?(this.log("trvpulldown.init : ボックス要素IDが文字列で指定されていない"),!1):(t=t.split("#").join(""),this.TRGT_ID=t,this.TRGT_EL=$("#"+t),0===this.TRGT_EL.length?(this.log("trvpulldown.init : ボックス要素が画面にない"),!1):(this.makePullwrapper(this.getPulldownPos()),this.observeOuterClick(),this.setEventResize(),this)):(this.log("trvpulldown.init : ボックス要素IDが指定されていない"),!1)},getPulldownPos:function(t){return(t=t||this.TRGT_ID)?(t=t.split("#").join(""),0===$("#"+t).length?(this.log("trvpulldown.getPulldownPos : ボックス要素が画面に存在しない"),!1):n(t)):(this.log("trvpulldown.getPulldownPos : 引数が指定されていない"),!1)},makePullwrapper:function(t){if(!t)return this.log("trvpulldown.makePullwrapper : 表示位置データが未指定"),!1;var a=_(),r=$("<div />").attr("id",a).css(i).css(t).appendTo(e);return this.WRAP_ID=a,this.WRAP_EL=r,!0},makeInnerWrap:function(){var t=$("<div />").addClass(this.INNER_CLASS).appendTo(this.WRAP_EL);this.INNER_EL=t},observeOuterClick:function(){return this.TRGT_ID?this.WRAP_ID?(a.push({trgt:this.TRGT_ID,pull:this.WRAP_ID,is_h:!!$("#"+this.TRGT_ID).is(":hidden")}),!0):(this.log("trvpulldown.observeOuterClick : プルダウン要素IDが設定されていない"),!1):(this.log("trvpulldown.observeOuterClick : ボックス要素IDが設定されていない"),!1)},setEventResize:function(){$(window).on("load resize",$.proxy(function(){this.WRAP_EL.css(this.getPulldownPos())},this))},buildList:function(t){return t?t.data&&0!==t.data.length?t.callback&&"function"!=typeof t.callback?(this.log("trvpulldown.buildList : 指定コールバックが関数でない"),!1):(this.WRAP_CLASS=t.wrap_class||"",this.INNER_CLASS=t.inner_class||"",this.BASE_CLASS=t.nml_class||"",this.SELECTED_CLASS=t.cur_class||"",this.HOVER_CLASS=t.hvr_class||"",this.SELECTED_CALLBACK=t.callback||"",this.OFFSET=t.offset||"",this.BASE_TXT=t.def_text||"未定",this.PULLTXT_LEN=t.pulltxt_len||"",this.CUR_DATA="",this.makeListElm(t.data),this):(this.log("trvpulldown.buildList : リスト用データが引数として未指定"),!1):(this.log("trvpulldown.buildList : 引数未指定"),!1)},makeListElm:function(t){if(!t||0===t.length)return this.log("trvpulldown.makeListElm : 引数未指定"),!1;this.WRAP_EL.html(""),this.setWrapStyle(),this.INNER_CLASS&&this.makeInnerWrap();for(var e,a,i=$("<div />"),r=this.INNER_EL||this.WRAP_EL,n=t.length;n--;)e=t[n],a=i.clone().text(e.name).attr("val",e.val).addClass(this.BASE_CLASS).prependTo(r),e.dep>0&&a.css("padding-left","+="+this.UNIT_PAD*e.dep+"px"),e.issel&&(a.addClass(this.SELECTED_CLASS),this.CUR_DATA=e.val);var _=this;return r.off().on("click","[val]",function(t){_.setCurrentData($(t.target).attr("val"))}).on({mouseenter:function(){$(this).toggleClass(_.HOVER_CLASS)},mouseleave:function(){$(this).toggleClass(_.HOVER_CLASS)}},"[val]"),this.ELM_TYPE="list",this.updatePullsetType(this.WRAP_ID,!1),this.setCurrentListData("",!0),this.scrollToCurrent(),!0},buildCheckbox:function(t){return t?t.data&&0!==t.data.length?t.callback&&"function"!=typeof t.callback?(this.log("trvpulldown.buildCheckbox : 指定コールバックが関数でない"),!1):(this.WRAP_CLASS=t.wrap_class||"",this.INNER_CLASS=t.inner_class||"",this.SELECTED_CALLBACK=t.callback||"",this.OFFSET=t.offset||"",this.BASE_TXT=t.def_text||"未定",this.PULLTXT_LEN=t.pulltxt_len||"",this.CUR_DATA="",this.makeCheckboxElm(t.data),this):(this.log("trvpulldown.buildCheckbox : チェックボックス用データが引数として未指定"),!1):(this.log("trvpulldown.buildCheckbox : 引数未指定"),!1)},makeCheckboxElm:function(t){if(!t||0===t.length)return this.log("trvpulldown.makeCheckboxElm : 引数未指定"),!1;this.WRAP_EL.html(""),this.setWrapStyle(),this.INNER_CLASS&&this.makeInnerWrap();for(var e,a,i,r=$('<input type="checkbox" />'),n=$("<label></label>"),_=[],s=this.INNER_EL||this.WRAP_EL,o=t.length;o--;)e=t[o],a&&$("<br />").prependTo(s),a=n.clone().attr({val:e.val}).text(e.name).prependTo(s),i=r.clone().attr({name:e.grp,val:e.val,disp:e.name}).prependTo(s),e.issel&&(i.prop("checked",!0),_.push(e.val));return this.CUR_DATA=_.join(","),s.off().on("click","label",$.proxy(function(t){if(!0!==this.WRAP_EL.attr("trv-silent")){var e=$(t.target).attr("val"),a=this.WRAP_EL.find('input[val="'+e+'"]');a.prop("checked",!a.prop("checked")),this.setCurrentData("",!0)}},this)),this.ELM_TYPE="checkbox",this.updatePullsetType(this.WRAP_ID,!0),this.setCurrentCheckboxData("",!0),!0},setWrapStyle:function(){this.WRAP_CLASS?this.WRAP_EL.addClass(this.WRAP_CLASS):this.WRAP_EL.css(r);var t=this.OFFSET;t&&(t.top&&this.WRAP_EL.css("marginTop",t.top+"px"),t.left&&this.WRAP_EL.css("marginLeft",t.left+"px"))},updatePullsetType:function(t,e){for(var i,r=a.length;r--;)if(i=a[r],i.pull===t){a[r].is_cbox=e;break}},getCurrentData:function(){return this.CUR_DATA},getWrapperID:function(){return this.WRAP_ID},setCurrentData:function(t,e){return"list"===this.ELM_TYPE?(this.setCurrentListData(t),this):"checkbox"===this.ELM_TYPE?(this.setCurrentCheckboxData(t,e),this.SELECTED_CALLBACK&&this.SELECTED_CALLBACK(),this):(this.log("trvpulldown.setCurrentData : コンテンツタイプが未設定"),!1)},setCurrentListData:function(t,e){if(e)return this.CUR_DATA?void $("#"+this.TRGT_ID).text(this.formatStringLen(this.WRAP_EL.find('[val="'+this.CUR_DATA+'"]').text())):void $("#"+this.TRGT_ID).text(this.formatStringLen(this.BASE_TXT));this.WRAP_EL.find('[val="'+this.CUR_DATA+'"]').removeClass(this.SELECTED_CLASS);var a=this.WRAP_EL.find('[val="'+t+'"]');a.length>0?$("#"+this.TRGT_ID).text(this.formatStringLen(a.addClass(this.SELECTED_CLASS).text())):$("#"+this.TRGT_ID).text(this.BASE_TXT),this.CUR_DATA=t,this.SELECTED_CALLBACK&&this.SELECTED_CALLBACK()},setCurrentCheckboxData:function(t,e){if(e){var a=this.WRAP_EL.find("[val]:checked"),i=a.map(function(){return $(this).attr("disp")}).get(),t=a.map(function(){return $(this).attr("val")}).get();return $("#"+this.TRGT_ID).text(i.length?this.makeCheckboxSelectedText(i[0],i.length>1):this.BASE_TXT),void(this.CUR_DATA=t.length?t.join(","):"")}if(this.WRAP_EL.attr("trv-silent",!0),t=t?t.split(","):"")for(var r=t.length;r--;)this.WRAP_EL.find('[val="'+t[r]+'"]').prop("checked",!0);this.CUR_DATA=t;var n=this.WRAP_EL.find("[val]:checked").eq(0);$("#"+this.TRGT_ID).text(n?this.makeCheckboxSelectedText(n,t.length>1):this.BASE_TXT),this.WRAP_EL.attr("trv-silent",!1),this.SELECTED_CALLBACK&&this.SELECTED_CALLBACK()},makeCheckboxSelectedText:function(t,e){var a;return this.PULLTXT_LEN&&isFinite(1*this.PULLTXT_LEN)?(a=e?this.PULLTXT_LEN-2:this.PULLTXT_LEN,t.length>a?t.substr(0,a)+"..."+(e?" 他":""):t+(e?" 他":"")):t+(e?" 他":"")},formatStringLen:function(t){return t?this.PULLTXT_LEN&&isFinite(1*this.PULLTXT_LEN)?t.length<=this.PULLTXT_LEN?t:t.substr(0,this.PULLTXT_LEN)+"...":t:""},scrollToCurrent:function(){var t=this.getCurrentData();if(t&&this.INNER_EL){var e=this.WRAP_EL.css("visibility","hidden").show(),a=e.find('[val="'+t+'"]'),i=a.position().top;this.INNER_EL.scrollTop(i<100?0:i-60),e.hide().css("visibility","visible")}},clear:function(){return this.setCurrentData(),this},trigger:function(){return $("#"+this.TRGT_ID).click(),this},setDisable:function(t){return this.updateEnable(!0),this.SWP_TXT=$("#"+this.TRGT_ID).text(),$("#"+this.TRGT_ID).text(t?this.makeCheckboxSelectedText(t):"選択できません"),this},setEnable:function(t){return this.updateEnable(!1),t||$("#"+this.TRGT_ID).text(this.SWP_TXT),this},updateEnable:function(t){for(var e,i=a.length;i--;)if(e=a[i],e.trgt===this.TRGT_ID){a[i].is_disable=t;break}return this},log:function(t){}},YAHOO.JP.trv.trvpulldown=t});var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},$(function(){"use strict";var t=function(){this.init()};t.prototype={OBJMASTER:[],OBJLIST:[],TIMER_ID:"",INTEREVAL_TIME:1e3,OBSERVABLE_ATTR:"data-scroll-obsrv",init:function(){this.setEvent()},setEvent:function(){var t=$(window),e=this.OBJLIST;t.off("scroll.trvscroll load.trvscroll").on("scroll.trvscroll load.trvscroll",function(){if(!(e.length<=0))for(var a,i=t.scrollTop(),r=t.height(),n=e.length;n--&&(a=e[n],i<a.pos_y-a.offset-r||a.pos_y+a.obj_h<i||(a.callback(a.obj),e.splice(n,1),!(n<=0))););}),this.TIMER_ID=setInterval($.proxy(this.observeNewObj,this),this.INTEREVAL_TIME)},set:function(t){if(!t)return this.log("scroll.set : 引数未指定"),!1;if(!t.selector)return this.log("scroll.set : セレクタ未指定"),!1;if(!t.callback||"function"!=typeof t.callback)return this.log("scroll.set : コールバック指定が不正"),!1;this.OBJMASTER.push(t);var e=$(t.selector);return this.storeObserveObj(e,t),!0},observeNewObj:function(){for(var t,e,a=this.OBJMASTER,i=this.OBSERVABLE_ATTR,r=a.length;r--;)t=a[r],e=$(t.selector+":not(["+i+"])"),0!==e.length&&this.storeObserveObj(e,t)},storeObserveObj:function(t,e){var a=this.OBJLIST,i=this.OBSERVABLE_ATTR;t.each(function(){var t=$(this);a.unshift({pos_y:t.offset().top,obj_h:t.height(),offset:e.offsetY||0,obj:t,callback:e.callback}),t.attr(i,!0)})},updateObjPos:function(){for(var t,e,a=this.OBJLIST,i=a.length;i--;)t=a[i],t.pos_y,e=t.obj,a[i].pos_y=e.offset().top},checkScrollArea:function(t){var e=$(window),a=e.scrollTop(),i=e.height()+a;a<t.topPos&&i<t.topPos||a>t.bottomPos&&i>t.bottomPos?t.areaOutCallback():t.areaInCallback()},log:function(t){}},YAHOO.JP.trv.trvscroll=new t});var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},$(function(){"use strict";try{if(!("localStorage"in window)||null===window.localStorage)return}catch(t){return}if(JSON&&JSON.stringify&&JSON.parse){Date.now=Date.now?Date.now:function(){return(new Date).valueOf()};var t=function(e){return this instanceof t?this.init(e):new t(e)};t.prototype={LS_KEY:"",DATE_KEY:"i_date",init:function(t){return t?(this.LS_KEY="trv.ndhotel."+t,this):(this.log("localstorage.init : 引数が指定されていない"),!1)},set:function(t){if(!t)return this.log("localstorage.set : データが指定されていない"),!1;if(!$.isArray(t))return t instanceof Object||(t={data:t}),t[this.DATE_KEY]=Date.now(),localStorage[this.LS_KEY]=JSON.stringify(t),this;for(var e,a=[],i=t.length;i--;)e=t[i],e[this.DATE_KEY]||(e[this.DATE_KEY]=Date.now()),a.unshift(e);return localStorage[this.LS_KEY]=JSON.stringify(a),this},get:function(t){return t?localStorage[this.LS_KEY]:JSON.parse(localStorage[this.LS_KEY]||null)},push:function(t){if(!t)return this.log("localstorage.push : データが指定されていない"),!1;var e=localStorage[this.LS_KEY]||"";return e&&(e=JSON.parse(e)),$.isArray(e)||(e=[e]),t={data:t},t[this.DATE_KEY]=Date.now(),e.push(t),localStorage[this.LS_KEY]=JSON.stringify(e),this},clear:function(){return localStorage.removeItem(this.LS_KEY),this},getAfter:function(t){var e=JSON.parse(localStorage[this.LS_KEY]||null),a=this.DATE_KEY;if(!t||null===e)return[];if(!$.isArray(e))return this.isRange(e[a],t)?e:"";for(var i,r=[],n=e.length;n--;)i=e[n],this.isRange(i[a],t)&&r.unshift(i);return r},getSort:function(t,e,a){if(!t||0===t.length)return this.log("localstorage.getSort : データが指定されていない"),[];e=e||this.DATE_KEY,"asc"!==a&&"desc"!==a&&(a="asc");var i="desc"===a?-1:1;return t.sort(function(t,a){return t[e]<a[e]?-1*i:t[e]==a[e]?0:1*i}),t},isRange:function(t,e){var a=Math.floor(t/1e3);return Math.floor(Date.now()/1e3)-a<=e},log:function(t){}},YAHOO.JP.trv.localstorage=t}});var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},$(function(){if(history&&history.pushState&&history.replaceState&&void 0!==history.state){var t=!1,e=function(t){return this instanceof e?this.init(t):new e(t)};e.prototype={STATE_ARRAY:[],init:function(t){history.replaceState(t,null,location.href)},pushState:function(e,a,i){return i?(history.pushState(e,a,i),t=!0,this.STATE_ARRAY.push({action:"push",len:history.length,state:e,title:a,url:i}),!0):(this.log("history.pushState : urlが指定されていません"),!1)},replaceState:function(t,e,a){return a?(history.replaceState(t,e,a),!0):(this.log("history.replaceState : urlが指定されていません"),!1)},listen:function(e){var a=this;$(window).off("popstate").on("popstate",function(i){i.originalEvent.state&&(e&&t&&e(i.originalEvent.state),a.STATE_ARRAY.push({action:"pop",len:history.length,state:i.originalEvent.state}))})},debug:function(){},log:function(t){}},YAHOO.JP.trv.history=e}});var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},$(function(){"use strict";var t={position:"relative",margin:"100px auto 20px",width:"40px",height:"40px"},e={backgroundColor:"#fafafa",opacity:"0.5"},a={fontSize:"18px",textAlign:"center",color:"#666",letterSpacing:"1px"},i=function(){};i.prototype={STYLE_OBJ:{},VENDER:function(){return/webkit/i.test(navigator.appVersion)?"-webkit-":/firefox/i.test(navigator.userAgent)?"-moz-":"opera"in window?"-o-":""}(),toggleBuffer:function(t,e,a){function i(t,e){var a,i=!1;$(":hover").each(function(){return!(a=$(this).attr("id")||"")||(a==t||a==e?(i=!0,!1):void 0)}),i||$("#"+e).stop().fadeOut("fast")}return t&&e?(/^\d{3,4}$/.test(a)||(a=500),t=this._trimID(t),e=this._trimID(e),$("#"+t+", #"+e).off("mouseenter.lightux mouseleave.lightux").on({"mouseenter.lightux":$.proxy(function(){$("#"+e).stop().fadeIn("fast")},this),"mouseleave.lightux":$.proxy(function(){setTimeout(function(){i(t,e)},a)},this)}),function(t){return function(){$("#"+t).off("mouseenter.lightux mouseleave.lightux")}}(t)):(this.log("lightux.toggleBuffer : 対象要素未指定["+t+", "+e+"]"),function(){})},loadingBlock:function(t){if(!t)return this.log("lightux.loadingBlock : 引数未指定"),function(){};var a=$("#"+this._trimID(t.id));if(0===a.length)return this.log("lightux.loadingBlock : 対象要素未指定["+t.id+"]"),function(){};var i,r=this._getTargetSize(t.id,t.is_margin),n=this._makeLoadingWrapper({id:t.wrap_id||"",css:$.extend({},t.wrap_css,r),no_abs:t.no_abs||"",zindex:t.zindex||""}),_=$("<div />").css($.extend({},e,t.bg_css,r)),s=this._makeLoadInner(t.inner_css),o=this._makeLoadingText(t.text);switch(t.type){case"square":i=this._getSquareLoadinglayer(t.inner_css,t.elm_css);break;default:i=this._getCircleLoadinglayer(t.inner_css,t.elm_css)}return s.append(i).append(o),n.append(_).append(s).appendTo(a.css("position","relative")).fadeIn("slow",function(){t.callback&&t.callback()}),function(){n.fadeOut("slow")}},_getTargetSize:function(t,e){var a={height:"",width:""},i=$("#"+this._trimID(t));return 0===i.length?(this.log("lightux._getTargetSize : 対象要素未指定["+t+"]"),a):(e=!!e,a.height=i.outerHeight(e),a.width=i.outerWidth(e),a)},_makeLoadingWrapper:function(t){var e=$("<div />");return t=t||{},t.id&&e.attr("id",this._trimID(t.id)),t.css&&e.css(t.css),t.zindex&&e.css("z-index",t.zindex),!t.no_abs?e.css({position:"absolute",top:"0px"}):e.css("position","relative"),e.hide()},_makeLoadInner:function(t){return $("<div />").css($.extend({},{position:"absolute",top:"0px",left:"0px",width:"100%"},t||{})).attr("data-loading-unit","")},_getCircleLoadinglayer:function(e,a){var i={"0%, 100%":{transform:"scale(0.0)","-webkit-transform":"scale(0.0)"},"50%":{transform:"scale(1.0)","-webkit-transform":"scale(1.0)"}},r={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"#999",opacity:.6},n=$("<div />").css(t).css(e||{});$("<div />").css(r).css(a||{}).css(this.VENDER+"animation","sk-bounce 2.0s infinite ease-in-out").appendTo(n).clone().appendTo(n).css(this.VENDER+"animation-delay","-1.0s");var _=this._getStyle();try{_.insertRule(this._getKeyframeString(i,"sk-bounce"),_.cssRules.length)}catch(t){this.log("lightux._getLoadinglayer : キーフレーム定義追加エラー"),this.log(t)}return n},_getSquareLoadinglayer:function(e,a){for(var i={1:"0.2s",2:"0.3s",3:"0.4s",4:"0.1s",5:"0.2s",6:"0.3s",7:"0s",8:"0.1s",9:"0.2s"},r={"0%, 100%":{transform:"scale(0.0)","-webkit-transform":"scale(0.0)"},"50%":{transform:"scale(1.0)","-webkit-transform":"scale(1.0)"}},n={width:"33%",height:"33%",float:"left",backgroundColor:"#333"},_=$("<div />").css(t).css(e||{}),s=$("<div />").css(n).css(a||{}).css(this.VENDER+"animation","sk-cubeGridScaleDelay 1.3s infinite ease-in-out"),o=[s.css(this.VENDER+"animation-delay",i[1]).appendTo(_)],l=2;l<=9;l++)o.push(s.clone().css(this.VENDER+"animation-delay",i[l]).appendTo(_));var c=this._getStyle();try{c.insertRule(this._getKeyframeString(r,"sk-cubeGridScaleDelay"),c.cssRules.length)}catch(t){this.log("lightux._getLoadinglayer : キーフレーム定義追加エラー"),this.log(t)}return _},_getStyle:function(){var t=document.createElement("style");return t.rel="stylesheet",t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),this.STYLE_OBJ=t.sheet,this._getStyle=$.proxy(function(){return this.STYLE_OBJ},this),this.STYLE_OBJ},_getKeyframeString:function(t,e){var a=" @"+this.VENDER+"keyframes "+e,i=[];if(!t)return a+"{}";i.push("{");for(var r in t){i.push(r+" {");for(var n in t[r])i.push(n+":"+t[r][n]+";");i.push("}")}return i.push("}"),a+i.join("")},_makeLoadingText:function(t){return $("<div />").text(t||"読み込み中").css(a)},scrollFix:function(t){if(!t)return this.log("lightux.scrollFix : 引数未指定"),!1;if(!t.id)return this.log("lightux.scrollFix : 対象要素情報未指定"),!1;if(0===$(t.id).length)return this.log("lightux.scrollFix : 対象要素がない"),!1;if(void 0===t.positive_px||void 0===t.negative_px)return this.log("lightux.scrollFix : 発火スクロール量未指定"),!1;var e=$(t.id),a=!1,i=$(window);return e.css(t.css||{}).css("position","fixed").hide(),i.off("scroll."+t.id).on("scroll."+t.id,function(){!a&&i.scrollTop()>t.positive_px?(a=!0,t.positive_callback(e)):a&&i.scrollTop()<=t.negative_px&&(a=!1,t.negative_callback(e))}),e},_trimID:function(t){return($.trim(t)+"").split("#").join("")},log:function(t){}},YAHOO.JP.trv.lightux=new i});var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},$(function(){"use strict";var t=function(){};t.prototype={isTouchDevice:function(){return void 0!==window.ontouchstart}},YAHOO.JP.trv.device=new t});var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},YAHOO.JP.trv.util=function(t,e){var a=["日","月","火","水","木","金","土"],i={NEXT:"001",JTB:"002",RURUBU:"003",IKYU:"004",BR:"005",DYN:"006"},r={NOT_LOGIN:0,PUREMIUM_USER:1,NORMAL_USER:2};return{changeDate:function(t){if(!this.isString(t)||8!=t.length)return"";var e=(t.substr(0,4)+"/"+t.substr(4,2)+"/"+t.substr(6,2)).split("/");return new Date(e[0],e[1]-1,e[2])},addDateYMD:function(t,e){if(!this.isString(t))return"";var a=this.changeDate(t);return a.setDate(a.getDate()+e),this.getYMDFromDate(a)},addDate:function(t,e){if(!this.isDate(t)&&!this.isString(t))return null;/^\d{8}$/.test(t)&&(t=this.getFormatYMDSep(t));var a=new Date(t);return new Date(a.setDate(a.getDate()+e))},addMonths:function(t,e){if(!this.isDate(t)&&!this.isString(t))return null;/^\d{8}$/.test(t)&&(t=this.getFormatYMDSep(t));var a=new Date(t);return new Date(a.setMonth(a.getMonth()+e))},changeDateDispFmtStr:function(t){if(!this.isString(t)||8!=t.length)return"";var e=this.changeDate(t);return this.getFormatYMDSepWeek(e)},getDiffDays:function(t,e){if(!this.isDate(t)||!this.isDate(e))return 0;var a=t.getTime()-e.getTime();return Math.ceil(a/864e5)},getFormatYMDSep:function(t){return this.isString(t)&&8==t.length?t.replace(/(\d{4})(\d{2})(\d{2})/g,"$1/$2/$3"):""},getFormatYMDSepZeroNone:function(t){if(!this.isString(t)||8!=t.length)return"";var e="";return void 0!=t&&8==t.length&&(e=t.substr(0,4)+"/"+parseInt(t.substr(4,2))+"/"+parseInt(t.substr(6,2))),e},getFormatYMDSepWeek:function(t){return this.isDate(t)?t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+"("+a[t.getDay()]+")":""},getYMDFromDate:function(t){return this.isDate(t)?t.getFullYear()+""+("0"+(t.getMonth()+1)).slice(-2)+("0"+t.getDate()).slice(-2):""},formatDate:function(t,e){var a=t.split(e);return new Date(a[0],a[1]-1,a[2])},isString:function(t){return"[object String]"==Object.prototype.toString.call(t)},isNumber:function(t){return"[object Number]"==Object.prototype.toString.call(t)},isDate:function(t){return"[object Date]"==Object.prototype.toString.call(t)},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},isUndefinedOrNull:function(t){return void 0==t||null==t},isValue:function(t){return void 0!=t&&null!=t&&""!=t},isIkyu:function(t){return t==i.IKYU},isNext:function(t){return t==i.NEXT},isJtb:function(t){return t==i.JTB},isRurubu:function(t){return t==i.RURUBU},isBr:function(t){return t==i.BR},isDyn:function(t){return t==i.DYN},isStayMember:function(t){return!!(t.ci&&t.co&&t.adlt&&t.rm)},convertDataYlk:function(t){var e="";for(var a in t)e+=a+":"+t[a]+";";return e},getTpointInfo:function(t,e,a,i,n,_,s){var o=!1;this.isIkyu(e)&&2==n?o=!0:(this.isJtb(e)||this.isRurubu(e))&&!this.isStayMember(a)&&i&&(o=!0);var l=t,c=t;return this.isIkyu(e)&&(s==r.PUREMIUM_USER&&void 0!==_.total_point_rate?(l+=_.total_point_rate,c+=_.total_point_rate):c+=4),{normal_tpoint_rate:t,real_tpoint_rate:l,pre_tpoint_rate:c,is_max:o}},isImmediatediscount:function(t,e,a){return!(!this.isIkyu(t)||"0"==e||"1"!=a)},checkTpointRate:function(t,e,a){return a>=t&&a<=e},isCouponAvailable:function(t,e){return!this.isIkyu(t)||"0"!=e},getBathTax:function(t,e,a){var i=e.split(","),r=0;for(var n in i)r+=Number(i[n]);return t>0&&r>0&&(t=t*r*a),t},removeUrlParam:function(t){var e=document.location.search,a="",i=t;if(""!==e){for(var r=e.slice(1).split("&"),n=0;n<r.length;n++){r[n].split("=")[0]!==i&&(a+=""!==a?"&":"?",a+=r[n])}if(void 0!==YAHOO.JP.trv.history){YAHOO.JP.trv.history().replaceState(null,null,a)}}return this}}}(jQuery);var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},YAHOO.JP.trv.dp=YAHOO.JP.trv.dp||{},YAHOO.JP.trv.dp.util=function(t,e){return{CARRIER_JAL:"01",CARRIER_ANA:"02",USE_AIRLINE_JAL:0,USE_AIRLINE_ANA:1,USE_AIRLINE_DEFAULT:-1,CHECK_OUT_ADD_DAY:9,DEFAULT_SALE_PERIOD_ADD_MONTH:2,EXEC_NONE:0,EXEC_RUN:1,EXEC_END:2,EXEC_TIMEOUT:3,TRACKING_PARAM_SC_I:"sc_i=dom_to_dp",TRACKING_PARAM_SC_E:"sc_e=",MAX_SEARCH_CHECKOUT:3,MAX_SEARCH_STAYCOUNT:9,MAX_SEARCH_ROOM:6,MAX_SEARCH_PERSON:6,ONE_DAY_MSEC:864e5,SMOKING_CODE_UNSET:"0",SMOKING_CODE_NSMOKE:"1",SMOKING_CODE_SMOKE:"2",getMealTypeName:function(t){var e="";return"000"==t?e="食事なし":"001"==t?e="朝食付":"003"==t&&(e="夕朝食付"),e},getSmokingName:function(t){var e="";return t==this.SMOKING_CODE_NSMOKE?e="禁煙":t==this.SMOKING_CODE_SMOKE&&(e="喫煙"),e},getNoBathFlgName:function(t){var e=""
;return"0"==t?e="有り":"1"==t&&(e="無し"),e},getNoToiletFlgName:function(t){var e="";return"0"==t?e="有り":"1"==t&&(e="無し"),e},getDataTimeName:function(t){return YAHOO.JP.trv.util.isString(t)&&14==t.length?parseInt(t.substr(4,2))+"月"+parseInt(t.substr(6,2))+"日"+parseInt(t.substr(8,2))+"時":""},getDepDateName:function(t){return YAHOO.JP.trv.util.isString(t)&&8==t.length?parseInt(t.substr(4,2))+"/"+parseInt(t.substr(6,2))+"出発":""},getAirlinePrefName:function(t,e){return t+"("+e+")"},getDepRetAirlinePrefName:function(t,e){return YAHOO.JP.trv.util.isUndefinedOrNull(t)||YAHOO.JP.trv.util.isUndefinedOrNull(e)?"":this.getDepDateName(t.Date)+"　"+this.getAirlinePrefName(t.AirportName,t.AirportPrefName)+" ⇔ "+this.getAirlinePrefName(e.AirportName,e.AirportPrefName)},getMaxCutPlanName:function(t){return t.length>50?t.substring(0,50)+"…":t},isLSReadMode:function(){var t=YAHOO.JP.trv.central.getEnvData("LS_READ_MODE");return!(void 0!=t&&!t)},isJalSalesPeriod:function(t){if(!YAHOO.JP.trv.util.isDate(t))return!1;var e=!0,a=YAHOO.JP.trv.central.getPageData("dp_jal_air_sale_from"),i=YAHOO.JP.trv.central.getPageData("dp_jal_air_sale_to");if(""==a||""==i)e=!1;else{var r=YAHOO.JP.trv.util.changeDate(a),n=YAHOO.JP.trv.util.changeDate(i);(t<r||n<t)&&(e=!1)}return e},isAnaSalesPeriod:function(t){if(!YAHOO.JP.trv.util.isDate(t))return!1;var e=!0,a=YAHOO.JP.trv.central.getPageData("dp_ana_air_sale_from"),i=YAHOO.JP.trv.central.getPageData("dp_ana_air_sale_to");if(""==a||""==i)e=!1;else{var r=YAHOO.JP.trv.util.changeDate(a),n=YAHOO.JP.trv.util.changeDate(i);(t<r||n<t)&&(e=!1)}return e},getAPInfo:function(t){var e={};return t==this.USE_AIRLINE_DEFAULT?(e.list=this.getAirportList(),e.apList=this.getAirport()):t==this.USE_AIRLINE_JAL?(e.list=YAHOO.JP.trv.central.getBridgeData("DP_JAL_AIR_PORT_LIST"),e.apList=YAHOO.JP.trv.central.getBridgeData("DP_JAL_AIR_PORT")):t==this.USE_AIRLINE_ANA&&(e.list=YAHOO.JP.trv.central.getBridgeData("DP_ANA_AIR_PORT_LIST"),e.apList=YAHOO.JP.trv.central.getBridgeData("DP_ANA_AIR_PORT")),e},getAirportList:function(){var t=null;return YAHOO.JP.trv.central.getPageData("dp_use_airline")==this.USE_AIRLINE_JAL?t=YAHOO.JP.trv.central.getBridgeData("DP_JAL_AIR_PORT_LIST"):YAHOO.JP.trv.central.getPageData("dp_use_airline")==this.USE_AIRLINE_ANA&&(t=YAHOO.JP.trv.central.getBridgeData("DP_ANA_AIR_PORT_LIST")),t},getAirport:function(){var t=null;return YAHOO.JP.trv.central.getPageData("dp_use_airline")==this.USE_AIRLINE_JAL?t=YAHOO.JP.trv.central.getBridgeData("DP_JAL_AIR_PORT"):YAHOO.JP.trv.central.getPageData("dp_use_airline")==this.USE_AIRLINE_ANA&&(t=YAHOO.JP.trv.central.getBridgeData("DP_ANA_AIR_PORT")),t},getDefaultSalePeriod:function(){var t=new Date,e={};return e.from=YAHOO.JP.trv.util.getYMDFromDate(t),e.to=YAHOO.JP.trv.util.getYMDFromDate(YAHOO.JP.trv.util.addMonths(t,this.DEFAULT_SALE_PERIOD_ADD_MONTH)),e},getPeopleCount:function(t){var e=0;if(void 0==t)return e;var a=t.split(",");for(var i in a)e+=parseInt(a[i]);return e},getFirstPeopleCount:function(t){var e=0,a=t.split(",");return a.length>0&&(e=parseInt(a[0])),e},getRAParamUrl:function(t,e){var a=t.split("?"),i=a[0],r="";return r=2!=a.length?"?"+this.TRACKING_PARAM_SC_I:"?"+a[1]+"&"+this.TRACKING_PARAM_SC_I,""!=e&&(r+="&"+this.TRACKING_PARAM_SC_E+e),i+r},checkSearch:function(t){if(YAHOO.JP.trv.util.isUndefinedOrNull(t))return!1;if(""==t.ci||""==t.co)return!1;var e=new Date(YAHOO.JP.trv.util.getFormatYMDSep(t.ci)),a=new Date(YAHOO.JP.trv.util.getFormatYMDSep(t.co)),i=YAHOO.JP.trv.util.addDateYMD(YAHOO.JP.trv.util.getYMDFromDate(new Date),1);if(""==e||""==a)return!1;if(YAHOO.JP.trv.util.getYMDFromDate(e)<i)return!1;var r=YAHOO.JP.trv.util.addMonths(new Date,this.MAX_SEARCH_CHECKOUT);if(YAHOO.JP.trv.util.getYMDFromDate(a)>YAHOO.JP.trv.util.getYMDFromDate(r))return!1;if(Math.ceil((a-e)/this.ONE_DAY_MSEC)>this.MAX_SEARCH_STAYCOUNT)return!1;if(""==t.rm||t.rm>this.MAX_SEARCH_ROOM)return!1;var n=t.adlt.split(",");if(0==n.length)return!1;if(n[0]>this.MAX_SEARCH_PERSON)return!1;for(var _=n[0],s=parseInt(_),o=1;o<n.length;o++){if(_!=n[o])return!1;s+=parseInt(n[o])}return!(s>this.MAX_SEARCH_PERSON)},getSmokingClassName:function(t){var e="";return t==this.SMOKING_CODE_NSMOKE?e="nsmoke":t==this.SMOKING_CODE_SMOKE&&(e="smoke"),e}}}(jQuery);var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},YAHOO.JP.trv.checkincalendar=function(t,e){function a(e){t(n).text(YAHOO.JP.trv.util.getFormatYMDSepWeek(e)),t(r).val(YAHOO.JP.trv.util.getYMDFromDate(e)).change()}var i="",r="",n="",_=new Date,s=_.getFullYear()+1,o=_.getMonth()+1,l=new Date(s,o,0),c={mode:"range",minDate:"today",nextArrow:"",prevArrow:"",static:!0,maxDate:l,enable:[{from:"today",to:l}],locale:"ja",clickOpens:!1,onChange:function(e,i,n){var _=e;if(2==_.length){var s=YAHOO.JP.trv.util.formatDate(YAHOO.JP.trv.util.getFormatYMDSep(t(r).val()),"/");a(YAHOO.JP.trv.util.getYMDFromDate(_[0])==YAHOO.JP.trv.util.getYMDFromDate(s)?_[1]:_[0]),n.close(),n.clear()}else 0!=_.length&&(a(_[0]),n.close(),n.clear())},onOpen:function(e,a,i){var n=YAHOO.JP.trv.util.formatDate(YAHOO.JP.trv.util.getFormatYMDSep(t(r).val()),"/"),_=YAHOO.JP.trv.util.formatDate(YAHOO.JP.trv.util.getFormatYMDSep(t(r).attr("data-checkout")),"/");i.setDate([n,_],!1)},onClose:function(t,e,a){a.set("enable",[{from:"today",to:l}])}};return{init:function(e,a,_){r=_,n=e;var s="",o="";a.defaultDate?(s=YAHOO.JP.trv.util.formatDate(a.defaultDate[0],"/"),o=YAHOO.JP.trv.util.formatDate(a.defaultDate[1],"/")):(s=new Date,o=new Date(s.setDate(s.getDate()+1))),t(n).text(YAHOO.JP.trv.util.getFormatYMDSepWeek(s)),t(r).val(YAHOO.JP.trv.util.getYMDFromDate(s)),t(r).attr("data-checkout",YAHOO.JP.trv.util.getYMDFromDate(o)),defopt={defaultDate:[s,o]},Object.assign(c,defopt,a),i=flatpickr(e,c),t(".flatpickr-next-month").attr("id","idNextmonth"),t(".flatpickr-prev-month").attr("id","idPrevmonth"),t(e).off().on({click:function(t){i.open()}})},open:function(){i.open()},close:function(){i.close()}}}(jQuery);var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},YAHOO.JP.trv.checkoutcalendar=function(t,e){function a(e){t(n).text(YAHOO.JP.trv.util.getFormatYMDSepWeek(e)),t(r).val(YAHOO.JP.trv.util.getYMDFromDate(e)).change()}var i="",r="",n="",_=new Date,s=_.getFullYear()+1,o=_.getMonth()+1,l=new Date(s,o,0),c=15,u={mode:"range",minDate:"today",nextArrow:"",prevArrow:"",static:!0,maxDate:l,enable:[{from:"today",to:l}],locale:"ja",clickOpens:!1,onChange:function(e,i,n){var _=e,s=YAHOO.JP.trv.util.formatDate(YAHOO.JP.trv.util.getFormatYMDSep(t(r).attr("data-checkin")),"/");if(1==_.length)YAHOO.JP.trv.util.getYMDFromDate(_[0])!=YAHOO.JP.trv.util.getYMDFromDate(s)?(a(_[0]),n.close(),n.clear()):n.clear();else{var o=YAHOO.JP.trv.util.formatDate(YAHOO.JP.trv.util.getFormatYMDSep(t(r).val()),"/");n.setDate([s,o],!1)}},onOpen:function(e,a,i){var n=YAHOO.JP.trv.util.formatDate(YAHOO.JP.trv.util.getFormatYMDSep(t(r).val()),"/"),_=YAHOO.JP.trv.util.formatDate(YAHOO.JP.trv.util.getFormatYMDSep(t(r).attr("data-checkin")),"/");i.setDate([_,n],!1);var s=_.fp_incr(c);i.set("enable",[{from:_,to:s}]),i.jumpToDate(_),i.redraw()},onClose:function(t,e,a){a.set("enable",[{from:"today",to:l}])}};return{init:function(e,a,_,s){r=_,n=e,c=s;var o="",l="";a.defaultDate?(o=YAHOO.JP.trv.util.formatDate(a.defaultDate[0],"/"),l=YAHOO.JP.trv.util.formatDate(a.defaultDate[1],"/")):(o=new Date,l=new Date(o.setDate(o.getDate()+1))),t(n).text(YAHOO.JP.trv.util.getFormatYMDSepWeek(l)),t(r).val(YAHOO.JP.trv.util.getYMDFromDate(l)),t(r).attr("data-checkin",YAHOO.JP.trv.util.getYMDFromDate(o)),defopt={defaultDate:[o,l]},Object.assign(u,defopt,a),i=flatpickr(e,u),t(".flatpickr-next-month").attr("id","idNextmonth"),t(".flatpickr-prev-month").attr("id","idPrevmonth"),t(e).off().on({click:function(t){i.open()}})},open:function(){i.open()},close:function(){i.close()}}}(jQuery),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null,a=function(){this.init()};a.prototype={COMPNAME:"stamp_module",API_URL:"",APPID:"",STAMP_STICKY_SET_CLOSE_TIME_LS:"stamp_sticky_set_close_time",AJAX_OPTION:{type:"GET",cache:!1,timeout:1e4,async:!0,dataType:"json"},LOG_MSG:{err_api:"スタンプラリー情報取得APIの実行に失敗しました。",err_status:"スタンプラリー情報取得APIの処理中にエラーが発生しました。"},STAMP_PATTERN_ID_0:"#stampPattern0",STAMP_PATTERN_ID_1:"#stampPattern1",STAMP_PATTERN_ID_2:"#stampPattern2",STAMP_PATTERN_ID_3:"#stampPattern3",STAMP_STICKY_CLOSE_BUTTON:"#stampStickyClose",STAMP_STICKY_ID:"#stampSticky",STAMP_LINK_ID:"#stampLink",STAMP_TARGET_USER_FLG:"1",STAMP_TARGET_CONTROL_A:"2",STAMP_TARGET_CONTROL_B:"3",STAMP_INFO_API_STATUS_NOT_PROC:0,STAMP_INFO_API_STATUS_PROC:1,STAMP_INFO_API_STATUS_SUCCESS:2,STAMP_INFO_API_STATUS_ERROR:3,STAMP_INFO_API_RESULT_SUCCESS:"0",SEARCH_PARAM:{},CHECK_OUT_LAST_DAY:"20191001",SITE_CATALYST_USER_TYPE_VAL:{stamp_target_user:"stamp_test",stamp_target_control_a:"stamp_ctr_a",stamp_target_control_b:"stamp_ctr_b"},init:function(){this.isStamprallyDisp()&&(this.getInitialData(),this.setupEvent(),this.subscribe()),this.centralDone()},getInitialData:function(){this.API_URL=t.getBridgeData("STAMPRALLY_API_URL"),this.APPID=t.getBridgeData("EAPPID"),this.SEARCH_PARAM=$.extend({},t.getInitialPageDataSet(t.getEnvData("SEARCH_PARAM")))},setupEvent:function(){var t=this;$(this.STAMP_STICKY_ID).length&&$(this.STAMP_STICKY_CLOSE_BUTTON).off().on("click",$.proxy(function(){$(t.STAMP_STICKY_ID).hide(),t.isStampStickySetCloseTime()&&t.updateLocalStorageSetCloseTime()}))},subscribe:function(){var t=this;this.centralSubscribe({dataname:"stamp_info_refresh",callback:$.proxy(function(){t.dispStampInfo()},this)}),this.centralDoneCallback(this.readDoneFinish)},readDoneFinish:function(){try{this.isStampStickySetCloseTime()&&(e=YAHOO.JP.trv.localstorage(t.PAGEDATA.stamp_info_ls_name.data))}catch(t){}this.dispStampInfo()},dispStampInfo:function(){if((!t.PAGEDATA.stamp_info_checkout_period_check_stamp.data||this.isCheckoutPeriod())&&this.isStampInfoApiCheck())return this.isStampInfoApiResult()?void(t.PAGEDATA.stamp_info_api_result.data.status==this.STAMP_INFO_API_RESULT_SUCCESS&&t.PAGEDATA.stamp_info_api_result.data.target==this.STAMP_TARGET_USER_FLG&&this.setStamprallyBox(t.PAGEDATA.stamp_info_api_result.data)):void(this.isStampInfoApiProc()||this.getStamprallyBox())},dispSticky:function(t){if(this.isStampStickySetCloseTime())if(this.isDispSticky()){var e="";switch(t){case 0:e="stmp_0";break;case 1:e="stmp_1";break;case 2:e="stmp_2"}""!==e&&($(this.STAMP_LINK_ID).attr("data-ylk","rsec:stmp;slk:"+e+";pos:0;"),void 0!=YAHOO.JP.trv.ins&&YAHOO.JP.trv.ins.addModules(this.STAMP_STICKY_ID.replace("#",""))),$(this.STAMP_STICKY_ID).show()}else $(this.STAMP_STICKY_ID).hide()},isStampInfoApiProc:function(){return t.PAGEDATA.stamp_info_api_status.data!=this.STAMP_INFO_API_STATUS_NOT_PROC},isCheckoutPeriod:function(){return""!=YAHOO.JP.trv.util.changeDate(this.SEARCH_PARAM.co)&&this.SEARCH_PARAM.co<this.CHECK_OUT_LAST_DAY},isStampStickySetCloseTime:function(){return t.PAGEDATA.stamp_sticky_set_close_time.data},isDispSticky:function(){if(e&&e.get()){var t=e.get().stamp_sticky_set_close_time;if(!t)return!0;var a=new Date,i=new Date(t);if(i.setHours(i.getHours()+24),a<i)return!1}return!0},isStampInfoApiCheck:function(){return!!$(this.STAMP_PATTERN_ID_0).length},getStamprallyBox:function(){var t=this;this.updatePageDataStampInfoApiStatus(this.STAMP_INFO_API_STATUS_PROC);var e={eappid:this.APPID};$.ajax({type:this.AJAX_OPTION.type,url:this.API_URL,data:e,timeout:this.AJAX_OPTION.timeout,dataType:this.AJAX_OPTION.dataType,xhrFields:{withCredentials:!0},cache:!1}).done(function(e,a,i){e.status==t.STAMP_INFO_API_RESULT_SUCCESS&&e.target==t.STAMP_TARGET_USER_FLG?(t.setStamprallyBox(e),t.updatePageDataStampInfoApiResult(e),t.updatePageDataStampInfoApiStatus(t.STAMP_INFO_API_STATUS_SUCCESS)):(t.updatePageDataStampInfoApiStatus(t.STAMP_INFO_API_STATUS_ERROR),t.centralInfoLog(t.LOG_MSG.err_status)),e.status==t.STAMP_INFO_API_RESULT_SUCCESS&&t.setSiteCatalyst(e)}).fail(function(e,a,i){t.updatePageDataStampInfoApiStatus(t.STAMP_INFO_API_STATUS_ERROR),t.centralInfoLog(t.LOG_MSG.err_api)})},setStamprallyBox:function(t){var e=!1;t.couponUsedFlg?$(this.STAMP_PATTERN_ID_3).show():(0==t.count&&($(this.STAMP_PATTERN_ID_0).show(),e=!0),1==t.count&&($(this.STAMP_PATTERN_ID_1).show(),e=!0),2==t.count&&($(this.STAMP_PATTERN_ID_2).show(),e=!0)),e&&$(this.STAMP_STICKY_ID).length&&this.dispSticky(t.count)},setSiteCatalyst:function(t){if(void 0!==window.s&&"function"==typeof window.s.c_w){var e,a=t.couponUsedFlg?"y":"n",i=0==t.count?"n":t.count;switch(t.target){case this.STAMP_TARGET_USER_FLG:e=this.SITE_CATALYST_USER_TYPE_VAL.stamp_target_user;break;case this.STAMP_TARGET_CONTROL_A:e=this.SITE_CATALYST_USER_TYPE_VAL.stamp_target_control_a;break;case this.STAMP_TARGET_CONTROL_B:e=this.SITE_CATALYST_USER_TYPE_VAL.stamp_target_control_b;break;default:e=""}var t="stamp_campaign_test|"+a+"|"+i+"|unknown";""===window.s.c_r("aa_v93")&&""===window.s.c_r("aa_l1")&&(window.s.tlData={eVar93:t,list1:e},window.s.tl(!0,"o","1sttime_getstamprallyinfo"));var r=new Date,n=new Date(r.getTime()+18e5);window.s.c_w("aa_v93",t,n),window.s.c_w("aa_l1",e)}},updatePageDataStampInfoApiResult:function(t){this.centralSetPageData({stamp_info_api_result:t})},isStampInfoApiResult:function(){return""!=t.PAGEDATA.stamp_info_api_result.data},updatePageDataStampInfoApiStatus:function(t){this.centralSetPageData({stamp_info_api_status:t})},updateLocalStorageSetCloseTime:function(){if(e){var t={},a=new Date;t[this.STAMP_STICKY_SET_CLOSE_TIME_LS]=a,e.set(t)}},isStamprallyDisp:function(){var e=t.getBridgeData("STAMPRALLY_DISP");return void 0==e||"false"!=e}},t.delegate(a)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null;try{e=YAHOO.JP.trv.localstorage(t.getEnvData("LS_NAME"))}catch(t){}var a=function(){this.init()};a.prototype={COMPNAME:"dp_cal_arr",VIEW:"#dp_cal_arr",INPUT:"#dp_cal_arr_input",CI_DEFAULT_NUM:7,CO_DEFAULT_NUM:1,CO_SALE_PERIOD_MAX_NUM:9,STAY_MAX:9,SHOW_MONTHS:2,LOG_MSG:{err_cal_info:"カレンダーに必要な情報が設定されていません。"},init:function(){this.subscribe(),this.centralDone()},getDefaultCiCo:function(){var a=t.getPageData("dp_cond_upd"),i="",r="";if(a)i=t.getPageData("dhotel_ci"),r=t.getPageData("dhotel_co");else{if(YAHOO.JP.trv.dp.util.isLSReadMode()&&void 0!=e&&void 0!=e.get()){var n=e.get().dp_cal_dep;void 0!=n&&(i=n);var _=e.get().dp_cal_arr;void 0!=_&&(r=_)}if(""==i||""==r||i<=YAHOO.JP.trv.util.getYMDFromDate(new Date)){var s=YAHOO.JP.trv.util.addDate(new Date,this.CI_DEFAULT_NUM);i=YAHOO.JP.trv.util.getYMDFromDate(s),r=YAHOO.JP.trv.util.getYMDFromDate(YAHOO.JP.trv.util.addDate(s,this.CO_DEFAULT_NUM))}}return{ci:i,co:r}},getSaleTerm:function(e){var a="",i="";return e==YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL?(a=t.getPageData("dp_jal_air_sale_from"),i=t.getPageData("dp_jal_air_sale_to")):(a=t.getPageData("dp_ana_air_sale_from"),i=t.getPageData("dp_ana_air_sale_to")),{from:a,to:i}},getMinDate:function(t){var e=YAHOO.JP.trv.util.getYMDFromDate(YAHOO.JP.trv.util.addDate(new Date,1));return t<e?e:t},setCalendar:function(e){var a=this.getDefaultCiCo(),i=this.getSaleTerm(e),r=this.getMinDate(i.from);if(!(YAHOO.JP.trv.util.isValue(a.ci)&&YAHOO.JP.trv.util.isValue(a.co)&&YAHOO.JP.trv.util.isValue(i.from)&&YAHOO.JP.trv.util.isValue(i.to)&&YAHOO.JP.trv.util.isValue(r)))return void this.centralInfoLog(this.LOG_MSG.err_cal_info);if(a.ci<r)a.ci=r,a.co<=r&&(a.co=YAHOO.JP.trv.util.getYMDFromDate(YAHOO.JP.trv.util.addDate(r,1)));else if(a.ci>i.to){var n=YAHOO.JP.trv.util.addDate(new Date,this.CI_DEFAULT_NUM);a.ci=YAHOO.JP.trv.util.getYMDFromDate(n),a.co=YAHOO.JP.trv.util.getYMDFromDate(YAHOO.JP.trv.util.addDate(n,this.CO_DEFAULT_NUM))}var _=YAHOO.JP.trv.util.getYMDFromDate(YAHOO.JP.trv.util.addDate(i.to,this.CO_SALE_PERIOD_MAX_NUM));this.centralSetPageData({dp_cal_arr:a.co});var s={minDate:new Date(YAHOO.JP.trv.util.getFormatYMDSep(r)),maxDate:new Date(YAHOO.JP.trv.util.getFormatYMDSep(_)),defaultDate:[YAHOO.JP.trv.util.getFormatYMDSep(a.ci),YAHOO.JP.trv.util.getFormatYMDSep(a.co)],showMonths:this.SHOW_MONTHS,onDayCreate:function(e,a,i,r){var n=t.getBridgeData("holiday");if(n){n[YAHOO.JP.trv.util.getYMDFromDate(r.dateObj)]&&(r.className+=" publicHoliday")}}};YAHOO.JP.trv.checkoutcalendar.init(this.VIEW,s,this.INPUT,this.STAY_MAX)},bindEvent:function(){var t=this;$(t.INPUT).on("change",function(){var e=$(t.INPUT).val();t.centralSetPageData({dp_cal_arr:e})})},setCheckOutDay:function(t){$(this.VIEW).text(YAHOO.JP.trv.util.getFormatYMDSepWeek(t)),$(this.INPUT).val(YAHOO.JP.trv.util.getYMDFromDate(t)).change()},subscribe:function(){var e=this;return this.centralSubscribe({dataname:"dp_event_exec_upd_airline",callback:$.proxy(function(){var a=t.getPageData("dp_use_airline");e.bindEvent(),e.setCalendar(a)},this)}),this.centralSubscribe({dataname:"dp_cal_dep",callback:$.proxy(function(){var a=t.getPageData("dp_cal_dep"),i=t.getPageData("dp_cal_arr");$(e.INPUT).attr("data-checkin",a),a>=i?e.setCheckOutDay(YAHOO.JP.trv.util.addDate(a,1)):YAHOO.JP.trv.util.addDate(i,0).getTime()>YAHOO.JP.trv.util.addDate(a,e.STAY_MAX).getTime()&&e.setCheckOutDay(YAHOO.JP.trv.util.addDate(a,e.STAY_MAX))},this)}),this}},t.delegate(a)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null;try{e=YAHOO.JP.trv.localstorage(t.getEnvData("LS_NAME"))}catch(t){}var a=function(){this.init()};a.prototype={COMPNAME:"dp_cal_dep",VIEW:"#dp_cal_dep",INPUT:"#dp_cal_dep_input",CI_DEFAULT_NUM:7,CO_DEFAULT_NUM:1,SHOW_MONTHS:2,LOG_MSG:{err_cal_info:"カレンダーに必要な情報が設定されていません。"},init:function(){this.subscribe(),this.centralDone()},getDefaultCiCo:function(){var a=t.getPageData("dp_cond_upd"),i="",r="";if(a)i=t.getPageData("dhotel_ci"),r=t.getPageData("dhotel_co");else{if(YAHOO.JP.trv.dp.util.isLSReadMode()&&void 0!=e&&void 0!=e.get()){var n=e.get().dp_cal_dep;void 0!=n&&(i=n);var _=e.get().dp_cal_arr;void 0!=_&&(r=_)}if(""==i||""==r||i<=YAHOO.JP.trv.util.getYMDFromDate(new Date)){var s=YAHOO.JP.trv.util.addDate(new Date,this.CI_DEFAULT_NUM);i=YAHOO.JP.trv.util.getYMDFromDate(s),r=YAHOO.JP.trv.util.getYMDFromDate(YAHOO.JP.trv.util.addDate(s,this.CO_DEFAULT_NUM))}}return{ci:i,co:r}},getSaleTerm:function(e){var a="",i="";return e==YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL?(a=t.getPageData("dp_jal_air_sale_from"),i=t.getPageData("dp_jal_air_sale_to")):(a=t.getPageData("dp_ana_air_sale_from"),i=t.getPageData("dp_ana_air_sale_to")),{from:a,to:i}},getMinDate:function(t){var e=YAHOO.JP.trv.util.getYMDFromDate(YAHOO.JP.trv.util.addDate(new Date,1));return t<e?e:t},setCalendar:function(e){var a=this.getDefaultCiCo(),i=this.getSaleTerm(e),r=this.getMinDate(i.from);if(!(YAHOO.JP.trv.util.isValue(a.ci)&&YAHOO.JP.trv.util.isValue(a.co)&&YAHOO.JP.trv.util.isValue(i.from)&&YAHOO.JP.trv.util.isValue(i.to)&&YAHOO.JP.trv.util.isValue(r)))return void this.centralInfoLog(this.LOG_MSG.err_cal_info);if(a.ci<r)a.ci=r,a.co<=r&&(a.co=YAHOO.JP.trv.util.getYMDFromDate(YAHOO.JP.trv.util.addDate(r,1)));else if(a.ci>i.to){var n=YAHOO.JP.trv.util.addDate(new Date,this.CI_DEFAULT_NUM);a.ci=YAHOO.JP.trv.util.getYMDFromDate(n),a.co=YAHOO.JP.trv.util.getYMDFromDate(YAHOO.JP.trv.util.addDate(n,this.CO_DEFAULT_NUM))}this.centralSetPageData({dp_cal_dep:a.ci});var _={minDate:new Date(YAHOO.JP.trv.util.getFormatYMDSep(r)),maxDate:new Date(YAHOO.JP.trv.util.getFormatYMDSep(i.to)),defaultDate:[YAHOO.JP.trv.util.getFormatYMDSep(a.ci),YAHOO.JP.trv.util.getFormatYMDSep(a.co)],showMonths:this.SHOW_MONTHS,onDayCreate:function(e,a,i,r){var n=t.getBridgeData("holiday");if(n){n[YAHOO.JP.trv.util.getYMDFromDate(r.dateObj)]&&(r.className+=" publicHoliday")}}};YAHOO.JP.trv.checkincalendar.init(this.VIEW,_,this.INPUT)},setCheckin:function(t){$(this.INPUT).val(t)},setCheckout:function(t){$(this.INPUT).data("checkout",t)},bindEvent:function(){var t=this;$(t.INPUT).on("change",function(){var e=$(t.INPUT).val();t.centralSetPageData({dp_cal_dep:e})})},subscribe:function(){var e=this;return this.centralSubscribe({dataname:"dp_event_exec_upd_airline",callback:$.proxy(function(){var a=t.getPageData("dp_use_airline");e.bindEvent(),e.setCalendar(a)},this)}),this.centralSubscribe({dataname:"dp_cal_arr",callback:$.proxy(function(){var a=t.getPageData("dp_cal_arr");$(e.INPUT).attr("data-checkout",a)},this)}),this}},t.delegate(a)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=function(){this.init()};e.prototype={COMPNAME:"dp_ci",LABEL_ID:"#dp_ci_label",PULLDOWN_ID:"#dp_ci_pull",PULLDOWN_LI_ID:"#dp_ci_pull li",SELECTBOX_ID:"#dp_ci",LIST_ID:"#dp_ci_list",LIST_ELM:"#dp_ci_list li",PULLDOWN_PARTS:$("<li></li>"),START_DATE_ADD_DAY:7,END_DATE_ADD_DAY:1,init:function(){this.setupEvent(),this.subscribe(),this.centralDone()},setupEvent:function(){this.bindEvent()},bindEvent:function(){var t=this;$(t.SELECTBOX_ID).off().on("click",$.proxy(function(){$(t.PULLDOWN_ID).toggle()})),$(t.PULLDOWN_LI_ID).off().on("click",$.proxy(function(){$(t.PULLDOWN_LI_ID).removeClass("selected"),$(this).addClass("selected");var e=String($(this).data("ymd"));t.updatePageData(e),""==e?t.setLabel(""):t.setLabel(YAHOO.JP.trv.util.changeDateDispFmtStr(e))})),$(document).on({click:function(e){$(e.target).closest(t.PULLDOWN_ID).length||$(e.target).closest(t.SELECTBOX_ID).length||$(e.target).closest(t.LIST_ELM).length||$(t.PULLDOWN_ID).hide()}})},subscribe:function(){var t=this;this.centralSubscribe({dataname:"dp_cal_dep",callback:$.proxy(function(){t.subscribeCalSelect()},this)}),this.centralSubscribe({dataname:"dp_cal_arr",callback:$.proxy(function(){t.subscribeCalSelect()},this)})},subscribeCalSelect:function(){var e=t.getPageData("dp_cal_dep"),a=t.getPageData("dp_cal_arr");YAHOO.JP.trv.util.isValue(e)&&YAHOO.JP.trv.util.isValue(a)||(e=YAHOO.JP.trv.util.getYMDFromDate(new Date),e=YAHOO.JP.trv.util.addDateYMD(e,this.START_DATE_ADD_DAY),a=YAHOO.JP.trv.util.addDateYMD(e,this.END_DATE_ADD_DAY)),this.makePulldown(e,a,e),this.bindEvent(),this.updatePageData(e)},updatePageData:function(t){this.centralSetPageData({dp_ci:t})},setLabel:function(t){$(this.LABEL_ID).text(t)},makePulldown:function(t,e,a){var i=this.getFromToDateList(t,e);""==a?this.setLabel(""):this.setLabel(YAHOO.JP.trv.util.changeDateDispFmtStr(a)),$(this.LIST_ID).empty();for(var r in i){var n=YAHOO.JP.trv.util.getYMDFromDate(i[r]),_=this.PULLDOWN_PARTS.clone().attr({"data-ymd":n}).text(YAHOO.JP.trv.util.getFormatYMDSepWeek(i[r]));a==n&&_.removeClass("selected").addClass("selected"),$(this.LIST_ID).append(_)}},getFromToDateList:function(t,e){var a,i=[],r=YAHOO.JP.trv.util.changeDate(t),n=YAHOO.JP.trv.util.changeDate(e);if(""==r||""==n)return i;for(a=r;a<n;a.setDate(a.getDate()+1))i.push(new Date(a));return i}},t.delegate(e)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=function(){this.init()};e.prototype={COMPNAME:"dp_co",LABEL_ID:"#dp_co_label",PULLDOWN_ID:"#dp_co_pull",PULLDOWN_LI_ID:"#dp_co_pull li",SELECTBOX_ID:"#dp_co",LIST_ID:"#dp_co_list",LIST_ELM:"#dp_co_list li",PULLDOWN_PARTS:$("<li></li>"),START_DATE_ADD_DAY:7,END_DATE_ADD_DAY:1,init:function(){this.setupEvent(),this.subscribe(),this.centralDone()},setupEvent:function(){this.bindEvent()},bindEvent:function(){var t=this;$(t.SELECTBOX_ID).off().on("click",$.proxy(function(){$(t.PULLDOWN_ID).toggle()})),$(t.PULLDOWN_LI_ID).off().on("click",$.proxy(function(){$(t.PULLDOWN_LI_ID).removeClass("selected"),$(this).addClass("selected");var e=String($(this).data("ymd"));t.updatePageData(e),t.setLabel(YAHOO.JP.trv.util.changeDateDispFmtStr(e))})),$(document).on({click:function(e){$(e.target).closest(t.PULLDOWN_ID).length||$(e.target).closest(t.SELECTBOX_ID).length||$(e.target).closest(t.LIST_ELM).length||$(t.PULLDOWN_ID).hide()}})},subscribe:function(){var e=this;this.centralSubscribe({dataname:"dp_ci",callback:$.proxy(function(){var a=t.getPageData("dp_cal_arr"),i=t.getPageData("dp_ci"),r=t.getPageData("dp_co");!YAHOO.JP.trv.util.isValue(r)&&YAHOO.JP.trv.util.isValue(a)&&(r=a),a>r&&(r=a),i>r&&(a=YAHOO.JP.trv.util.addDateYMD(i,this.END_DATE_ADD_DAY));var n=i,_=a;YAHOO.JP.trv.util.isValue(n)&&YAHOO.JP.trv.util.isValue(_)||(n=YAHOO.JP.trv.util.getYMDFromDate(new Date),n=YAHOO.JP.trv.util.addDateYMD(n,this.START_DATE_ADD_DAY),_=YAHOO.JP.trv.util.addDateYMD(n,this.END_DATE_ADD_DAY)),YAHOO.JP.trv.util.isValue(n)&&(n=YAHOO.JP.trv.util.addDateYMD(n,1)),YAHOO.JP.trv.util.isValue(_)&&(_=YAHOO.JP.trv.util.addDateYMD(_,1)),e.makePulldown(n,_,a),e.updatePageData(a),e.bindEvent()},this)})},updatePageData:function(t){this.centralSetPageData({dp_co:t})},setLabel:function(t){$(this.LABEL_ID).text(t)},makePulldown:function(t,e,a){var i=this.getFromToDateList(t,e);""==a?this.setLabel(""):this.setLabel(YAHOO.JP.trv.util.changeDateDispFmtStr(a)),$(this.LIST_ID).empty();for(var r in i){var n=YAHOO.JP.trv.util.getYMDFromDate(i[r]),_=this.PULLDOWN_PARTS.clone().attr({"data-ymd":n}).text(YAHOO.JP.trv.util.getFormatYMDSepWeek(i[r]));a==n&&_.removeClass("selected").addClass("selected"),$(this.LIST_ID).append(_)}},getFromToDateList:function(t,e){var a,i=[],r=YAHOO.JP.trv.util.changeDate(t),n=YAHOO.JP.trv.util.changeDate(e);if(""==r||""==n)return i;for(a=r;a<n;a.setDate(a.getDate()+1))i.push(new Date(a));return i}},t.delegate(e)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null;try{e=YAHOO.JP.trv.localstorage(t.getEnvData("LS_NAME"))}catch(t){}var a=function(){this.init()};a.prototype={COMPNAME:"dp_g_from",LABEL_ID:"#dp_g_from_label",PULLDOWN_ID:"#dp_g_from_pull",PULLDOWN_LI_ID:"#dp_g_from_pull li",SELECTBOX_ID:"#dp_g_from",LIST_ID:"#dp_g_from_list",LIST_ELM:"#dp_g_from_list li",PULLDOWN_PARTS:$("<li></li>"),PULLDOWN_DETAIL_PARTS:$('<ul class="elRegionDetails"></ul>'),ALERT_ELE_ID:"dp_g_from_to_alert",DEF_TLC:"HND",INIT_FLG:!1,ALERT_AIRPORT_DISP_STYLE:"",ERR_MSG_AIRPORT_LIST_NOT_FOUND:"空港リスト情報の取得に失敗しました",ERR_MSG_AIRPORT_LIST_TCL_NOT_FOUND:"空港リスト情報に指定のTCL取得に失敗しました",ERR_MSG_AIRPORT_LIST_PREF_NOT_FOUND:"空港リスト情報に指定のPREF取得に失敗しました",init:function(){this.getInitialData(),this.setupEvent(),this.subscribe(),this.centralDone()},getInitialData:function(){this.ALERT_AIRPORT_DISP_STYLE=t.getEnvData("ALERT_AIRPORT_DISP_STYLE")},setupEvent:function(){this.bindEvent()},bindEvent:function(){var t=this;$(t.SELECTBOX_ID).off().on("click",$.proxy(function(){$(t.PULLDOWN_ID).toggle()})),$(t.PULLDOWN_LI_ID).off().on("click",$.proxy(function(){var e=String($(this).data("tlc"));""!=e&&(t.setSelectedItem(e),t.updatePageData(e),t.setLabel($(this).text()),t.dispAlertMsg())})),$(document).on({click:function(e){$(e.target).closest(t.PULLDOWN_ID).length||$(e.target).closest(t.SELECTBOX_ID).length||$(e.target).closest(t.LIST_ELM).length||$(t.PULLDOWN_ID).hide()}})},subscribe:function(){var e=this;this.centralSubscribe({dataname:"dp_event_exec_upd",callback:$.proxy(function(){this.INIT_FLG=!0},this)}),this.centralSubscribe({dataname:"dp_event_exec_upd_airline",callback:$.proxy(function(){var a;if(e.INIT_FLG){if(!0===t.getPageData("dp_cond_upd")){var i=t.getPageData("dhotel_pref_cd"),r=e.getLinkInfo(i);if(null==r)return void e.centralInfoLog(this.ERR_MSG_AIRPORT_LIST_PREF_NOT_FOUND);var n=r.tlc;n="HND"==n||"NRT"==n?"FUK":"HND",a=n}else a=e.getDefGFrom();e.INIT_FLG=!1}else a=e.getDefGFrom();e.makePulldown(-1,a),e.updatePageData(a),e.dispAlertMsg(),e.bindEvent()},this)})},setSelectedItem:function(t){for(var e=$(this.PULLDOWN_LI_ID),a=0;a<e.length;a++)e.eq(a).data("tlc")==t?e.eq(a).removeClass("selected").addClass("selected"):e.eq(a).removeClass("selected")},updatePageData:function(t){this.centralSetPageData({dp_g_from:t})},updatePageDataAlert:function(t){this.centralSetPageData({dp_airport_alert:t})},setLabel:function(t){$(this.LABEL_ID).text(t)},makePulldown:function(t,e){var a=YAHOO.JP.trv.dp.util.getAPInfo(t);if(void 0==a.list||void 0==a.apList)return void this.centralInfoLog(this.ERR_MSG_AIRPORT_LIST_NOT_FOUND);var i=this.DEF_TLC;""!=e&&a.apList.hasOwnProperty(e)&&(i=e);var r="";void 0!=a.apList[i]?r=a.apList[i].dspname:this.centralInfoLog(this.ERR_MSG_AIRPORT_LIST_TCL_NOT_FOUND),this.setLabel(r),$(this.LIST_ID).empty();for(var n in a.list){var _=a.list[n].tlc;if(""==_){var s=this.PULLDOWN_PARTS.clone().attr({"data-tlc":""}).text(a.list[n].dspname);s.addClass("elRegion"),this.makePulldownPrefList(s,a.list[n].pref_list,a.apList,i),$(this.LIST_ID).append(s)}else{var s=this.PULLDOWN_PARTS.clone().attr({"data-tlc":_}).text(a.apList[_].dspname);$(this.LIST_ID).append(s)}}this.setSelectedItem(i)},makePulldownPrefList:function(t,e,a,i){var r=this.PULLDOWN_DETAIL_PARTS.clone().attr({"data-tlc":""}).text("");$(t).append(r);for(var n in e){var _=e[n].tlc,s="";YAHOO.JP.trv.util.isUndefinedOrNull(a[_])||(s=a[_].dspname);var o=this.PULLDOWN_PARTS.clone().attr({"data-tlc":_}).text(s);_==i&&o.removeClass("selected").addClass("selected"),r.append(o)}},getLinkInfo:function(e){var a=YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL,i=t.getBridgeData("DP_JAL_MAP_PREF_AIR_PORT"),r=i[e];return YAHOO.JP.trv.util.isUndefinedOrNull(r)&&(i=t.getBridgeData("DP_ANA_MAP_PREF_AIR_PORT"),r=i[e],a=YAHOO.JP.trv.dp.util.USE_AIRLINE_ANA),YAHOO.JP.trv.util.isUndefinedOrNull(r)?null:{airline:String(a),tlc:r.tlc}},dispAlertMsg:function(){var e=document.getElementById(this.ALERT_ELE_ID),a="none",i=!1;t.getPageData("dp_g_from")==t.getPageData("dp_g_to")&&(i=!0,a=this.ALERT_AIRPORT_DISP_STYLE),void 0!=e&&(e.style.display=a,this.updatePageDataAlert(i))},getDefGFrom:function(){var t=this.DEF_TLC;if(this.INIT_FLG&&YAHOO.JP.trv.dp.util.isLSReadMode()&&void 0!=e&&void 0!=e.get()){var a=e.get().dp_g_from;void 0!=a&&(t=a)}return t}},t.delegate(a)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null;try{e=YAHOO.JP.trv.localstorage(t.getEnvData("LS_NAME"))}catch(t){}var a=function(){this.init()};a.prototype={COMPNAME:"dp_g_to",LABEL_ID:"#dp_g_to_label",PULLDOWN_ID:"#dp_g_to_pull",PULLDOWN_LI_ID:"#dp_g_to_pull li",SELECTBOX_ID:"#dp_g_to",LIST_ID:"#dp_g_to_list",LIST_ELM:"#dp_g_to_list li",PULLDOWN_PARTS:$("<li></li>"),PULLDOWN_DETAIL_PARTS:$('<ul class="elRegionDetails"></ul>'),ALERT_ELE_ID:"dp_g_from_to_alert",DEF_TLC:"CTS",DEF_ANA_TLC:"SPK",INIT_FLG:!1,ALERT_AIRPORT_DISP_STYLE:"",ERR_MSG_AIRPORT_LIST_NOT_FOUND:"空港リスト情報の取得に失敗しました",ERR_MSG_AIRPORT_LIST_TCL_NOT_FOUND:"空港リスト情報に指定のTCL取得に失敗しました",ERR_MSG_AIRPORT_LIST_PREF_NOT_FOUND:"空港リスト情報に指定のPREF取得に失敗しました",init:function(){this.getInitialData(),this.setupEvent(),this.subscribe(),this.centralDone()},getInitialData:function(){this.ALERT_AIRPORT_DISP_STYLE=t.getEnvData("ALERT_AIRPORT_DISP_STYLE")},setupEvent:function(){this.bindEvent()},bindEvent:function(){var t=this;$(t.SELECTBOX_ID).off().on("click",$.proxy(function(){$(t.PULLDOWN_ID).toggle()})),$(t.PULLDOWN_LI_ID).off().on("click",$.proxy(function(){var e=String($(this).data("tlc"));""!=e&&(t.setSelectedItem(e),t.updatePageData(e),t.setLabel($(this).text()),t.dispAlertMsg())})),$(document).on({click:function(e){$(e.target).closest(t.PULLDOWN_ID).length||$(e.target).closest(t.SELECTBOX_ID).length||$(e.target).closest(t.LIST_ELM).length||$(t.PULLDOWN_ID).hide()}})},subscribe:function(){var e=this;this.centralSubscribe({dataname:"dp_event_exec_upd",callback:$.proxy(function(){this.INIT_FLG=!0},this)}),this.centralSubscribe({dataname:"dp_event_exec_upd_airline",callback:$.proxy(function(){var a;if(e.INIT_FLG){if(!0===t.getPageData("dp_cond_upd")){var i=t.getPageData("dhotel_pref_cd"),r=e.getLinkInfo(i);if(null==r)return void e.centralInfoLog(this.ERR_MSG_AIRPORT_LIST_PREF_NOT_FOUND);a=r.tlc}else a=e.getDefGTo();e.INIT_FLG=!1}else a=e.getDefGTo();e.makePulldown(-1,a),e.updatePageData(a),e.dispAlertMsg(),e.bindEvent()},this)})},setSelectedItem:function(t){for(var e=$(this.PULLDOWN_LI_ID),a=0;a<e.length;a++)e.eq(a).data("tlc")==t?e.eq(a).removeClass("selected").addClass("selected"):e.eq(a).removeClass("selected")},updatePageData:function(t){this.centralSetPageData({dp_g_to:t})},updatePageDataAlert:function(t){this.centralSetPageData({dp_airport_alert:t})},setLabel:function(t){$(this.LABEL_ID).text(t)},makePulldown:function(t,e){var a=YAHOO.JP.trv.dp.util.getAPInfo(t);if(void 0==a.list||void 0==a.apList)return void this.centralInfoLog(this.ERR_MSG_AIRPORT_LIST_NOT_FOUND);var i=this.DEF_TLC;""!=e&&a.apList.hasOwnProperty(e)&&(i=e);var r=""
;void 0!=a.apList[i]?r=a.apList[i].dspname:this.centralInfoLog(this.ERR_MSG_AIRPORT_LIST_TCL_NOT_FOUND),this.setLabel(r),$(this.LIST_ID).empty();for(var n in a.list){var _=a.list[n].tlc;if(""==_){var s=this.PULLDOWN_PARTS.clone().attr({"data-tlc":""}).text(a.list[n].dspname);s.addClass("elRegion"),this.makePulldownPrefList(s,a.list[n].pref_list,a.apList,i),$(this.LIST_ID).append(s)}else{var s=this.PULLDOWN_PARTS.clone().attr({"data-tlc":_}).text(a.apList[_].dspname);$(this.LIST_ID).append(s)}}this.setSelectedItem(i)},makePulldownPrefList:function(t,e,a,i){var r=this.PULLDOWN_DETAIL_PARTS.clone().attr({"data-tlc":""}).text("");$(t).append(r);for(var n in e){var _=e[n].tlc,s="";YAHOO.JP.trv.util.isUndefinedOrNull(a[_])||(s=a[_].dspname);var o=this.PULLDOWN_PARTS.clone().attr({"data-tlc":_}).text(s);_==i&&o.removeClass("selected").addClass("selected"),r.append(o)}},getLinkInfo:function(e){var a=YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL,i=t.getBridgeData("DP_JAL_MAP_PREF_AIR_PORT"),r=i[e];return YAHOO.JP.trv.util.isUndefinedOrNull(r)&&(i=t.getBridgeData("DP_ANA_MAP_PREF_AIR_PORT"),r=i[e],a=YAHOO.JP.trv.dp.util.USE_AIRLINE_ANA),YAHOO.JP.trv.util.isUndefinedOrNull(r)?null:{airline:String(a),tlc:r.tlc}},dispAlertMsg:function(){var e=document.getElementById(this.ALERT_ELE_ID),a="none",i=!1;t.getPageData("dp_g_from")==t.getPageData("dp_g_to")&&(i=!0,a=this.ALERT_AIRPORT_DISP_STYLE),void 0!=e&&(e.style.display=a,this.updatePageDataAlert(i))},getDefGTo:function(){var a=this.DEF_TLC;if(this.INIT_FLG&&YAHOO.JP.trv.dp.util.isLSReadMode()&&void 0!=e&&void 0!=e.get()){var i=e.get().dp_g_to;void 0!=i&&(a=i)}else t.getPageData("dp_use_airline")==YAHOO.JP.trv.dp.util.USE_AIRLINE_ANA&&(a=this.DEF_ANA_TLC);return a}},t.delegate(a)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null;try{e=YAHOO.JP.trv.localstorage(t.getEnvData("LS_NAME"))}catch(t){}var a=function(){this.init()};a.prototype={COMPNAME:"dp_l_area",SELECTBOX_ID:"#dp_l_area",LABEL_ID:"#dp_l_area_label",PULLDOWN_ID:"#dp_l_area_pull",LIST_ID:"#dp_l_area_list",LIST_ELM:"#dp_l_area_list li",AJAX_OPTION:{},API_URL:"",APPID:"",PULLDOWN_PARTS:$("<li></li>"),INIT_FLG:!1,JAL_AREA:[],ANA_AREA:[],LOG_MSG:{err_api:"施設エリア取得APIの実行に失敗しました。",err_status:"施設エリア取得APIの処理中にエラーが発生しました。"},init:function(){this.getInitialData(),this.subscribe(),this.centralDone()},getInitialData:function(){this.JAL_AREA=t.getBridgeData("DP_JAL_AIR_PORT"),this.ANA_AREA=t.getBridgeData("DP_ANA_AIR_PORT"),this.API_URL=t.getBridgeData("DP_AREA_API_URL"),this.APPID=t.getBridgeData("DP_API_APPID"),this.AJAX_OPTION=t.getEnvData("DP_AJAX_OPTION")},setDefaultArea:function(){var a=t.getPageData("dp_cond_upd"),i="",r="";if(a){if(r=this.getLAreaFromAirport(),""==(i=this.getAreaName(r))){var n=$(this.LIST_ID).children();r=n.eq(0).data("cd"),i=this.getAreaName(r)}}else if(YAHOO.JP.trv.dp.util.isLSReadMode()&&void 0!=e&&void 0!=e.get()){var _=e.get().dp_l_area,s=e.get().dp_l_area_name;void 0!=_&&void 0!=s?(r=_,i=s):(r=this.getLAreaFromAirport(),i=this.getAreaName(r))}else r=this.getLAreaFromAirport(),i=this.getAreaName(r);this.updateArea(r,i)},getLAreaFromAirport:function(){var e=t.getPageData("dp_use_airline"),a=t.getPageData("dp_g_to"),i=[];return i=e==YAHOO.JP.trv.dp.util.USE_AIRLINE_ANA?this.ANA_AREA:this.JAL_AREA,YAHOO.JP.trv.util.isUndefinedOrNull(i[a])?"":i[a].larea},getPrefFromAirport:function(){var e=t.getPageData("dp_use_airline"),a=t.getPageData("dp_g_to"),i=[];return i=e==YAHOO.JP.trv.dp.util.USE_AIRLINE_ANA?this.ANA_AREA:this.JAL_AREA,YAHOO.JP.trv.util.isUndefinedOrNull(i[a])?"":i[a].pref},getAreaName:function(t){for(var e="",a=$(this.LIST_ID).children(),i=0;i<a.length;i++)if(a.eq(i).data("cd")==t){e=a.eq(i).text();break}return e},getAreaList:function(){var e=t.getPageData("dp_ll_area_pref"),a=this.setParams(e),i=this;$.ajax({type:i.AJAX_OPTION.type,url:i.API_URL,data:a,timeout:i.AJAX_OPTION.timeout,dataType:i.AJAX_OPTION.dataType}).done(function(t,e,a){i.isResultSetData(t)?i.createPulldown(t.ResultSet.Result[0].District[0].Pref[0].Wide):i.centralInfoLog(i.LOG_MSG.err_status)}).fail(function(t,e,a){i.centralInfoLog(i.LOG_MSG.err_api)})},isResultSetData:function(t){return!!(t&&t.ResultSet&&t.ResultSet.Status&&"1"==t.ResultSet.Status&&t.ResultSet.Result&&t.ResultSet.Result[0]&&t.ResultSet.Result[0].District&&t.ResultSet.Result[0].District[0]&&t.ResultSet.Result[0].District[0].Pref[0])},setParams:function(t){return{eappid:this.APPID,pref:t}},updateArea:function(t,e){for(var a=$(this.LIST_ID).children(),i=0;i<a.length;i++)a.eq(i).data("cd")==t?a.eq(i).removeClass("selected").addClass("selected"):a.eq(i).removeClass("selected");$(this.LABEL_ID).text(e),this.centralSetPageData({dp_l_area:t,dp_l_area_name:e})},checkPrefChg:function(){var e=this.getPrefFromAirport(),a=!0;return e==t.getPageData("dp_ll_area_pref")&&(a=!1),a},createPulldown:function(t){$(this.LIST_ID).empty();for(var e in t){var a=this.PULLDOWN_PARTS.clone().attr({"data-cd":t[e].Cd}).text(t[e].Name);$(this.LIST_ID).append(a)}if(this.INIT_FLG)this.setDefaultArea(),this.INIT_FLG=!1;else if(this.checkPrefChg())this.updateArea(t[0].Cd,t[0].Name);else{var i=this.getLAreaFromAirport(),r=this.getAreaName(i);this.updateArea(i,r)}this.bindEventPulldown()},bindEvent:function(){var t=this;$(t.SELECTBOX_ID).off().on("click",$.proxy(function(){$(t.PULLDOWN_ID).toggle()}))},bindEventPulldown:function(){var t=this;$(t.LIST_ELM).off().on("click",$.proxy(function(){var e=$(this).text(),a=$(this).data("cd");t.updateArea(a,e)})),$(document).on({click:function(e){$(e.target).closest(t.PULLDOWN_ID).length||$(e.target).closest(t.SELECTBOX_ID).length||$(e.target).closest(t.LIST_ELM).length||$(t.PULLDOWN_ID).hide()}})},subscribe:function(){var t=this;this.centralSubscribe({dataname:"dp_event_exec_upd",callback:$.proxy(function(){t.bindEvent(),t.INIT_FLG=!0},this)}),this.centralSubscribe({dataname:"dp_ll_area_pref_upd",callback:$.proxy(function(){this.getAreaList()},this)})}},t.delegate(a)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null;try{e=YAHOO.JP.trv.localstorage(t.getEnvData("LS_NAME"))}catch(t){}var a=function(){this.init()};a.prototype={COMPNAME:"dp_ll_area_pref",LABEL_ID:"#dp_ll_area_pref_label",PULLDOWN_ID:"#dp_ll_area_pref_pull",PULLDOWN_LI_ID_DD:"#dp_ll_area_pref_pull li dd",SELECTBOX_ID:"#dp_ll_area_pref",LIST_ID:"#dp_ll_area_pref_list",LIST_ELM:"#dp_ll_area_pref_list li",LIST_ELM_PREF:"#dp_ll_area_pref_list li dd",INIT_FLG:!1,init:function(){this.setupEvent(),this.subscribe(),this.centralDone()},setupEvent:function(){this.bindEvent()},bindEvent:function(){var t=this;$(t.SELECTBOX_ID).off().on("click",$.proxy(function(){$(t.PULLDOWN_ID).toggle()})),$(t.PULLDOWN_LI_ID_DD).off().on("click",$.proxy(function(){$(t.PULLDOWN_LI_ID_DD).removeClass("selected"),$(this).addClass("selected");var e=this.getAttribute("data-qs-val");t.updatePageData(e),t.setLabel(this.textContent)})),$(document).on({click:function(e){$(e.target).closest(t.PULLDOWN_ID).length||$(e.target).closest(t.SELECTBOX_ID).length||$(e.target).closest(t.LIST_ELM).length||$(t.PULLDOWN_ID).hide()}})},subscribe:function(){var e=this;this.centralSubscribe({dataname:"dp_event_exec_upd",callback:$.proxy(function(){this.INIT_FLG=!0},this)}),this.centralSubscribe({dataname:"dp_g_to",callback:$.proxy(function(){var a;this.INIT_FLG?(!0===t.getPageData("dp_cond_upd")?a=t.getPageData("dhotel_pref_cd"):""==(a=e.getDefPref())&&(a=e.getGToPref()),this.INIT_FLG=!1):a=e.getGToPref(),e.setSelectedItem(a),e.updatePageData(a),e.bindEvent()},this)})},getGToPref:function(){var e=t.getPageData("dp_g_to"),a=null;return a=t.getPageData("dp_use_airline")==YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL?t.getBridgeData("DP_JAL_AIR_PORT"):t.getBridgeData("DP_ANA_AIR_PORT"),YAHOO.JP.trv.util.isUndefinedOrNull(a[e])?"":a[e].pref},setSelectedItem:function(t){for(var e,a=$(this.LIST_ELM_PREF),i=0;i<a.length;i++)a.eq(i).data("qs-val")==t?(a.eq(i).removeClass("selected").addClass("selected"),e=a.eq(i).text()):a.eq(i).removeClass("selected");this.setLabel(e)},setLabel:function(t){$(this.LABEL_ID).text(t)},updatePageData:function(t){this.centralSetPageData({dp_ll_area_pref:t});var e=new Date;this.centralSetPageData({dp_ll_area_pref_upd:e})},getDefPref:function(){var t="";if(YAHOO.JP.trv.dp.util.isLSReadMode()&&void 0!=e&&void 0!=e.get()){var a=e.get().dp_ll_area_pref;void 0!=a&&(t=a)}return t}},t.delegate(a)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=function(){this.init()};e.prototype={COMPNAME:"dp_lodging_period",LABEL_ID:"dp_lodging_period",init:function(){this.subscribe(),this.centralDone()},subscribe:function(){var t=this;this.centralSubscribe({dataname:"dp_ci",callback:$.proxy(function(){t.dispLodgPeriod(t.getLodgPeriodMsg())},this)}),this.centralSubscribe({dataname:"dp_co",callback:$.proxy(function(){t.dispLodgPeriod(t.getLodgPeriodMsg())},this)})},dispLodgPeriod:function(t){null==t&&(t="");var e=document.getElementById(this.LABEL_ID);void 0!=e&&(e.firstChild.textContent=t)},getLodgPeriodMsg:function(){var e=t.getPageData("dp_ci"),a=t.getPageData("dp_co");return this.getLodgPeriodMsgInfo(e,a)},getLodgPeriodMsgSync:function(){var e=t.getPageData("dhotel_ci"),a=t.getPageData("dhotel_co");return this.getLodgPeriodMsgInfo(e,a)},getLodgPeriodMsgInfo:function(t,e){if(!YAHOO.JP.trv.util.isValue(t)||!YAHOO.JP.trv.util.isValue(e))return null;var a=YAHOO.JP.trv.util.changeDate(t);if(""==a)return null;var i=YAHOO.JP.trv.util.getDiffDays(YAHOO.JP.trv.util.changeDate(e),a),r=a.getMonth()+1+"月"+a.getDate()+"日から"+i+"泊";return this.updatePageData(i),r},updatePageData:function(t){this.centralSetPageData({dp_stay_count:t})}},t.delegate(e)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null;try{e=YAHOO.JP.trv.localstorage(t.getEnvData("LS_NAME"))}catch(t){}var a=function(){this.init()};a.prototype={COMPNAME:"dp_m_area",SELECTBOX_ID:"#dp_m_area",LABEL_ID:"#dp_m_area_label",PULLDOWN_ID:"#dp_m_area_pull",LIST_ID:"#dp_m_area_list",LIST_ELM:"#dp_m_area_list li",AJAX_OPTION:{},API_URL:"",APPID:"",PULLDOWN_PARTS:$("<li></li>"),LOG_MSG:{err_api:"施設エリア取得APIの実行に失敗しました。",err_status:"施設エリア取得APIの処理中にエラーが発生しました。"},init:function(){this.getInitialData(),this.setupEvent(),this.subscribe(),this.centralDone()},getInitialData:function(){this.API_URL=t.getBridgeData("DP_AREA_API_URL"),this.APPID=t.getBridgeData("DP_API_APPID"),this.AJAX_OPTION=t.getEnvData("DP_AJAX_OPTION")},setupEvent:function(){this.bindEvent()},getAreaList:function(){var e=t.getPageData("dp_l_area"),a=this.setParams(e),i=this;$.ajax({type:i.AJAX_OPTION.type,url:i.API_URL,data:a,timeout:i.AJAX_OPTION.timeout,dataType:i.AJAX_OPTION.dataType}).done(function(t,e,a){i.isResultSetData(t)?i.createPulldown(t.ResultSet.Result[0].District[0].Pref[0].Wide[0].Narrow):i.centralInfoLog(i.LOG_MSG.err_status)}).fail(function(t,e,a){i.centralInfoLog(i.LOG_MSG.err_api)})},isResultSetData:function(t){return!!(t&&t.ResultSet&&t.ResultSet.Status&&"1"==t.ResultSet.Status&&t.ResultSet.Result&&t.ResultSet.Result[0]&&t.ResultSet.Result[0].District&&t.ResultSet.Result[0].District[0]&&t.ResultSet.Result[0].District[0].Pref&&t.ResultSet.Result[0].District[0].Pref[0]&&t.ResultSet.Result[0].District[0].Pref[0].Wide[0])},setParams:function(t){return{eappid:this.APPID,wide:t}},updateArea:function(t,e){for(var a=$(this.LIST_ID).children(),i=0;i<a.length;i++)a.eq(i).data("cd")==t?a.eq(i).removeClass("selected").addClass("selected"):a.eq(i).removeClass("selected");$(this.LABEL_ID).text(e),this.centralSetPageData({dp_m_area:t,dp_m_area_name:e})},setDefaultArea:function(){var a=t.getPageData("dp_cond_upd"),i="指定なし",r="";if(!a&&YAHOO.JP.trv.dp.util.isLSReadMode()&&void 0!=e&&void 0!=e.get()){var n=e.get().dp_m_area,_=e.get().dp_m_area_name;void 0!=n&&void 0!=_&&(r=n,i=_)}this.updateArea(r,i)},createPulldown:function(t){$(this.LIST_ID).empty();var e=this.PULLDOWN_PARTS.clone().text("指定なし");$(this.LIST_ID).append(e);for(var a in t){var i=this.PULLDOWN_PARTS.clone().attr({"data-cd":t[a].Cd}).text(t[a].Name);$(this.LIST_ID).append(i)}this.INIT_FLG?(this.setDefaultArea(),this.INIT_FLG=!1):this.updateArea("","指定なし"),this.bindEventPulldown()},bindEvent:function(){var t=this;$(t.SELECTBOX_ID).off().on("click",$.proxy(function(){$(t.PULLDOWN_ID).toggle()}))},bindEventPulldown:function(){var t=this;$(t.LIST_ELM).off().on("click",$.proxy(function(){var e=$(this).text(),a=$(this).data("cd");t.updateArea(a,e)})),$(document).on({click:function(e){$(e.target).closest(t.PULLDOWN_ID).length||$(e.target).closest(t.SELECTBOX_ID).length||$(e.target).closest(t.LIST_ELM).length||$(t.PULLDOWN_ID).hide()}})},subscribe:function(){var t=this;this.centralSubscribe({dataname:"dp_event_exec_upd",callback:$.proxy(function(){t.bindEvent(),t.INIT_FLG=!0},this)}),this.centralSubscribe({dataname:"dp_l_area",callback:$.proxy(function(){this.getAreaList()},this)})}},t.delegate(a)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null;try{e=YAHOO.JP.trv.localstorage(t.getEnvData("LS_NAME"))}catch(t){}var a=function(){this.init()};a.prototype={COMPNAME:"dp_ret_g_from",LABEL_ID:"#dp_ret_g_from_label",PULLDOWN_ID:"#dp_ret_g_from_pull",PULLDOWN_LI_ID:"#dp_ret_g_from_pull li",SELECTBOX_ID:"#dp_ret_g_from",LIST_ID:"#dp_ret_g_from_list",LIST_ELM:"#dp_ret_g_from_list li",PULLDOWN_PARTS:$("<li></li>"),PULLDOWN_DETAIL_PARTS:$('<ul class="elRegionDetails"></ul>'),ALERT_ELE_ID:"dp_ret_g_from_to_alert",RET_AIRPORT_ID:"#dp_ret_g_from_to",CLASS_NAME_HIDE:"is_hide",DEF_TLC:"CTS",DEF_ANA_TLC:"SPK",ALERT_AIRPORT_DISP_STYLE:"",ERR_MSG_AIRPORT_LIST_NOT_FOUND:"空港リスト情報の取得に失敗しました",ERR_MSG_AIRPORT_LIST_TCL_NOT_FOUND:"空港リスト情報に指定のTCL取得に失敗しました",init:function(){this.getInitialData(),this.setupEvent(),this.subscribe(),this.centralDone()},getInitialData:function(){this.ALERT_AIRPORT_DISP_STYLE=t.getEnvData("ALERT_AIRPORT_DISP_STYLE")},setupEvent:function(){this.bindEvent()},bindEvent:function(){var t=this;$(t.SELECTBOX_ID).off().on("click",$.proxy(function(){$(t.PULLDOWN_ID).toggle()})),$(t.PULLDOWN_LI_ID).off().on("click",$.proxy(function(){var e=String($(this).data("tlc"));""!=e&&(t.setSelectedItem(e),t.updatePageData(e),t.setLabel($(this).text()),t.dispAlertMsg())})),$(document).on({click:function(e){$(e.target).closest(t.PULLDOWN_ID).length||$(e.target).closest(t.SELECTBOX_ID).length||$(e.target).closest(t.LIST_ELM).length||$(t.PULLDOWN_ID).hide()}})},subscribe:function(){var e=this;this.centralSubscribe({dataname:"dp_g_to",callback:$.proxy(function(){var a=t.getPageData("dp_g_to");e.makePulldown(-1,a),e.updatePageData(a),e.dispAlertMsg(),e.bindEvent()},this)})},setSelectedItem:function(t){for(var e=$(this.PULLDOWN_LI_ID),a=0;a<e.length;a++)e.eq(a).data("tlc")==t?e.eq(a).removeClass("selected").addClass("selected"):e.eq(a).removeClass("selected")},updatePageData:function(t){this.centralSetPageData({dp_ret_g_from:t})},updatePageDataAlert:function(t){this.centralSetPageData({dp_airport_alert_ret:t})},setLabel:function(t){$(this.LABEL_ID).text(t)},makePulldown:function(t,e){var a=YAHOO.JP.trv.dp.util.getAPInfo(t);if(void 0==a.list||void 0==a.apList)return void this.centralInfoLog(this.ERR_MSG_AIRPORT_LIST_NOT_FOUND);var i=this.DEF_TLC;""!=e&&a.apList.hasOwnProperty(e)&&(i=e);var r="";void 0!=a.apList[i]?r=a.apList[i].dspname:this.centralInfoLog(this.ERR_MSG_AIRPORT_LIST_TCL_NOT_FOUND),this.setLabel(r),$(this.LIST_ID).empty();for(var n in a.list){var _=a.list[n].tlc;if(""==_){var s=this.PULLDOWN_PARTS.clone().attr({"data-tlc":""}).text(a.list[n].dspname);s.addClass("elRegion"),this.makePulldownPrefList(s,a.list[n].pref_list,a.apList,i),$(this.LIST_ID).append(s)}else{var s=this.PULLDOWN_PARTS.clone().attr({"data-tlc":_}).text(a.apList[_].dspname);$(this.LIST_ID).append(s)}}this.setSelectedItem(i)},makePulldownPrefList:function(t,e,a,i){var r=this.PULLDOWN_DETAIL_PARTS.clone().attr({"data-tlc":""}).text("");$(t).append(r);for(var n in e){var _=e[n].tlc,s="";YAHOO.JP.trv.util.isUndefinedOrNull(a[_])||(s=a[_].dspname);var o=this.PULLDOWN_PARTS.clone().attr({"data-tlc":_}).text(s);_==i&&o.removeClass("selected").addClass("selected"),r.append(o)}},dispAlertMsg:function(){var e=document.getElementById(this.ALERT_ELE_ID),a="none",i=!1;t.getPageData("dp_ret_g_from")==t.getPageData("dp_ret_g_to")&&(i=!0,a=this.ALERT_AIRPORT_DISP_STYLE),void 0!=e&&($(this.RET_AIRPORT_ID).hasClass(this.CLASS_NAME_HIDE)||(e.style.display=a),this.updatePageDataAlert(i))},getDefGFrom:function(){var a=this.DEF_TLC;if(YAHOO.JP.trv.dp.util.isLSReadMode()&&void 0!=e&&void 0!=e.get()){var i=e.get().dp_ret_g_from;void 0!=i&&(a=i)}else t.getPageData("dp_use_airline")==YAHOO.JP.trv.dp.util.USE_AIRLINE_ANA&&(a=this.DEF_ANA_TLC);return a}},t.delegate(a)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null;try{e=YAHOO.JP.trv.localstorage(t.getEnvData("LS_NAME"))}catch(t){}var a=function(){this.init()};a.prototype={COMPNAME:"dp_ret_g_to",LABEL_ID:"#dp_ret_g_to_label",PULLDOWN_ID:"#dp_ret_g_to_pull",PULLDOWN_LI_ID:"#dp_ret_g_to_pull li",SELECTBOX_ID:"#dp_ret_g_to",LIST_ID:"#dp_ret_g_to_list",LIST_ELM:"#dp_ret_g_to_list li",PULLDOWN_PARTS:$("<li></li>"),ALERT_ELE_ID:"dp_ret_g_from_to_alert",RET_AIRPORT_ID:"#dp_ret_g_from_to",CLASS_NAME_HIDE:"is_hide",DEF_TLC:"HND",INIT_FLG:!1,ALERT_AIRPORT_DISP_STYLE:"",ERR_MSG_AIRPORT_LIST_TCL_NOT_FOUND:"空港リスト情報に指定のTCL取得に失敗しました",ERR_MSG_AIRPORT_LIST_PREF_NOT_FOUND:"空港リスト情報に指定のPREF取得に失敗しました",init:function(){this.getInitialData(),this.setupEvent(),this.subscribe(),this.centralDone()},getInitialData:function(){this.ALERT_AIRPORT_DISP_STYLE=t.getEnvData("ALERT_AIRPORT_DISP_STYLE")},setupEvent:function(){this.bindEvent()},bindEvent:function(){var t=this;$(t.SELECTBOX_ID).off().on("click",$.proxy(function(){$(t.PULLDOWN_ID).toggle()})),$(t.PULLDOWN_LI_ID).off().on("click",$.proxy(function(){var e=String($(this).data("tlc"));t.setSelectedItem(e),t.updatePageData(e),t.setLabel($(this).text()),t.dispAlertMsg()})),$(document).on({click:function(e){$(e.target).closest(t.PULLDOWN_ID).length||$(e.target).closest(t.SELECTBOX_ID).length||$(e.target).closest(t.LIST_ELM).length||$(t.PULLDOWN_ID).hide()}})},subscribe:function(){var e=this;this.centralSubscribe({dataname:"dp_event_exec_upd",callback:$.proxy(function(){this.INIT_FLG=!0},this)}),this.centralSubscribe({dataname:"dp_g_from",callback:$.proxy(function(){var a;if(e.INIT_FLG){if(!0===t.getPageData("dp_cond_upd")){var i=t.getPageData("dhotel_pref_cd"),r=e.getLinkInfo(i);if(null==r)return void e.centralInfoLog(this.ERR_MSG_AIRPORT_LIST_PREF_NOT_FOUND);var n=r.tlc;n="HND"==n||"NRT"==n?"FUK":"HND",a=n}else a=t.getPageData("dp_g_from");e.INIT_FLG=!1}else a=t.getPageData("dp_g_from");e.makePulldownMulti(a),e.updatePageData(a),e.dispAlertMsg(),e.bindEvent()},this)})},setSelectedItem:function(t){for(var e=$(this.PULLDOWN_LI_ID),a=0;a<e.length;a++)e.eq(a).data("tlc")==t?e.eq(a).removeClass("selected").addClass("selected"):e.eq(a).removeClass("selected")},updatePageData:function(t){this.centralSetPageData({dp_ret_g_to:t})},updatePageDataAlert:function(t){this.centralSetPageData({dp_airport_alert_ret:t})},setLabel:function(t){$(this.LABEL_ID).text(t)},makePulldownMulti:function(e){var a=null,i=null;t.getPageData("dp_use_airline")==YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL?(i=t.getBridgeData("DP_JAL_MULTI_AIR_PORT"),a=t.getBridgeData("DP_JAL_AIR_PORT")):t.getPageData("dp_use_airline")==YAHOO.JP.trv.dp.util.USE_AIRLINE_ANA&&(i=t.getBridgeData("DP_ANA_MULTI_AIR_PORT"),a=t.getBridgeData("DP_ANA_AIR_PORT"));var r="";if(void 0!=a[e].dspname?r=a[e].dspname:this.centralInfoLog(this.ERR_MSG_AIRPORT_LIST_TCL_NOT_FOUND),this.setLabel(r),$(this.LIST_ID).empty(),null!=a&&null!=i){var n=[];if(void 0==i[e])n.push(a[e]);else{var _=i[e].mtlc;for(var s in i)i[s].mtlc==_&&n.push(a[i[s].tlc])}for(var s in n){var o=n[s].tlc,l=this.PULLDOWN_PARTS.clone().attr({"data-tlc":o}).text(n[s].dspname);$(this.LIST_ID).append(l)}this.setSelectedItem(e)}},getLinkInfo:function(e){var a=YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL,i=t.getBridgeData("DP_JAL_MAP_PREF_AIR_PORT"),r=i[e];return YAHOO.JP.trv.util.isUndefinedOrNull(r)&&(i=t.getBridgeData("DP_ANA_MAP_PREF_AIR_PORT"),r=i[e],a=YAHOO.JP.trv.dp.util.USE_AIRLINE_ANA),YAHOO.JP.trv.util.isUndefinedOrNull(r)?null:{airline:String(a),tlc:r.tlc}},dispAlertMsg:function(){var e=document.getElementById(this.ALERT_ELE_ID),a="none",i=!1;t.getPageData("dp_ret_g_from")==t.getPageData("dp_ret_g_to")&&(i=!0,a=this.ALERT_AIRPORT_DISP_STYLE),void 0!=e&&($(this.RET_AIRPORT_ID).hasClass(this.CLASS_NAME_HIDE)||(e.style.display=a),this.updatePageDataAlert(i))},getDefGTo:function(){var t=this.DEF_TLC;if(this.INIT_FLG&&YAHOO.JP.trv.dp.util.isLSReadMode()&&void 0!=e&&void 0!=e.get()){var a=e.get().dp_ret_g_to;void 0!=a&&(t=a)}return t}},t.delegate(a)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null;try{e=YAHOO.JP.trv.localstorage(t.getEnvData("LS_NAME"))}catch(t){}var a=function(){this.init()};a.prototype={COMPNAME:"#dp_room_person",SELECTBOX_ID:"#dp_room_person",LABEL_ID:"#dp_room_person_label",BALLON_ID:"#dp_room_person_box",ROOM_SELECTBOX_ID:"#dp_room_label",ROOM_PULLDOWN_ID:"#dp_room_pulldown",ROOM_LIST_ID:"#dp_room_list",ROOM_LIST_ELM:"#dp_room_list li",ADULT_MINUS_ID:"#dp_adlt_minus",ADULT_PLUS_ID:"#dp_adlt_plus",ADULT_TEXT:"#dp_adlt_text",CHILD1011_MINUS_ID:"#dp_child1011_minus",CHILD1011_PLUS_ID:"#dp_child1011_plus",CHILD1011_TEXT:"#dp_child1011_text",CHILD69_MINUS_ID:"#dp_child69_minus",CHILD69_PLUS_ID:"#dp_child69_plus",CHILD69_TEXT:"#dp_child69_text",CHILD35FULL_MINUS_ID:"#dp_child35full_minus",CHILD35FULL_PLUS_ID:"#dp_child35full_plus",CHILD35FULL_TEXT:"#dp_child35full_text",CHILD35NO_MINUS_ID:"#dp_child35no_minus",CHILD35NO_PLUS_ID:"#dp_child35no_plus",CHILD35NO_TEXT:"#dp_child35no_text",CHILD35BED_MINUS_ID:"#dp_child35bed_minus",CHILD35BED_PLUS_ID:"#dp_child35bed_plus",CHILD35BED_TEXT:"#dp_child35bed_text",CHILD35MEAL_MINUS_ID:"#dp_child35meal_minus",CHILD35MEAL_PLUS_ID:"#dp_child35meal_plus",CHILD35MEAL_TEXT:"#dp_child35meal_text",CHILD2NO_MINUS_ID:"#dp_child2no_minus",CHILD2NO_PLUS_ID:"#dp_child2no_plus",CHILD2NO_TEXT:"#dp_child2no_text",CHILD2MEAL_MINUS_ID:"#dp_child2meal_minus",CHILD2MEAL_PLUS_ID:"#dp_child2meal_plus",CHILD2MEAL_TEXT:"#dp_child2meal_text",ALERT_ID:"#person_error",ALERT_CLOSE_ID:"#person_error_close",ROOM_PERSON_UPDATE_ID:"#room_person_update",MAX_PERSON:6,MAX_CHILD2:2,init:function(){this.subscribe(),this.centralDone()},updateRoom:function(t){this.selectedRoom(t),$(this.ROOM_SELECTBOX_ID).text(t),this.updateRoomChange(t)},updateRoomChange:function(t){var e=2;"1"!=t&&(e=1),this.updateAdult(e,!1),this.updateChild1011(0,!1),this.updateChild69(0,!1),this.updateChild35full(0,!1),this.updateChild35no(0,!1),this.updateChild35bed(0,!1),this.updateChild35meal(0,!1),this.updateChild2no(0,!1),this.updateChild2meal(0,!1)},updateAdult:function(t,e){if(e){if(parseInt($(this.ROOM_SELECTBOX_ID).text())*(t+parseInt($(this.CHILD1011_TEXT).val())+parseInt($(this.CHILD69_TEXT).val())+parseInt($(this.CHILD35FULL_TEXT).val())+parseInt($(this.CHILD35NO_TEXT).val())+parseInt($(this.CHILD35BED_TEXT).val())+parseInt($(this.CHILD35MEAL_TEXT).val()))>this.MAX_PERSON)return void $(this.ALERT_ID).show();var a=parseInt($(this.CHILD2NO_TEXT).val()),i=parseInt($(this.CHILD2MEAL_TEXT).val());if(t<1||t<a+i)return void $(this.ALERT_ID).show()}$(this.ADULT_TEXT).val(t)},updateChild1011:function(t,e){if(e){if(t<0)return void $(this.ALERT_ID).show();if(parseInt($(this.ROOM_SELECTBOX_ID).text())*(parseInt($(this.ADULT_TEXT).val())+t+parseInt($(this.CHILD69_TEXT).val())+parseInt($(this.CHILD35FULL_TEXT).val())+parseInt($(this.CHILD35NO_TEXT).val())+parseInt($(this.CHILD35BED_TEXT).val())+parseInt($(this.CHILD35MEAL_TEXT).val()))>this.MAX_PERSON)return void $(this.ALERT_ID).show()}$(this.CHILD1011_TEXT).val(t)},updateChild69:function(t,e){if(e){if(t<0)return void $(this.ALERT_ID).show();if(parseInt($(this.ROOM_SELECTBOX_ID).text())*(parseInt($(this.ADULT_TEXT).val())+parseInt($(this.CHILD1011_TEXT).val())+t+parseInt($(this.CHILD35FULL_TEXT).val())+parseInt($(this.CHILD35NO_TEXT).val())+parseInt($(this.CHILD35BED_TEXT).val())+parseInt($(this.CHILD35MEAL_TEXT).val()))>this.MAX_PERSON)return void $(this.ALERT_ID).show()}$(this.CHILD69_TEXT).val(t)},updateChild35full:function(t,e){if(e){if(t<0)return void $(this.ALERT_ID).show();if(parseInt($(this.ROOM_SELECTBOX_ID).text())*(parseInt($(this.ADULT_TEXT).val())+parseInt($(this.CHILD1011_TEXT).val())+parseInt($(this.CHILD69_TEXT).val())+t+parseInt($(this.CHILD35NO_TEXT).val())+parseInt($(this.CHILD35BED_TEXT).val())+parseInt($(this.CHILD35MEAL_TEXT).val()))>this.MAX_PERSON)return void $(this.ALERT_ID).show()}$(this.CHILD35FULL_TEXT).val(t)},updateChild35no:function(t,e){if(e){if(t<0)return void $(this.ALERT_ID).show();if(parseInt($(this.ROOM_SELECTBOX_ID).text())*(parseInt($(this.ADULT_TEXT).val())+parseInt($(this.CHILD1011_TEXT).val())+parseInt($(this.CHILD69_TEXT).val())+parseInt($(this.CHILD35FULL_TEXT).val())+t+parseInt($(this.CHILD35BED_TEXT).val())+parseInt($(this.CHILD35MEAL_TEXT).val()))>this.MAX_PERSON)return void $(this.ALERT_ID).show()}$(this.CHILD35NO_TEXT).val(t)},updateChild35bed:function(t,e){if(e){if(t<0)return void $(this.ALERT_ID).show();if(parseInt($(this.ROOM_SELECTBOX_ID).text())*(parseInt($(this.ADULT_TEXT).val())+parseInt($(this.CHILD1011_TEXT).val())+parseInt($(this.CHILD69_TEXT).val())+parseInt($(this.CHILD35FULL_TEXT).val())+parseInt($(this.CHILD35NO_TEXT).val())+t+parseInt($(this.CHILD35MEAL_TEXT).val()))>this.MAX_PERSON)return void $(this.ALERT_ID).show()}$(this.CHILD35BED_TEXT).val(t)},updateChild35meal:function(t,e){if(e){if(t<0)return void $(this.ALERT_ID).show();if(parseInt($(this.ROOM_SELECTBOX_ID).text())*(parseInt($(this.ADULT_TEXT).val())+parseInt($(this.CHILD1011_TEXT).val())+parseInt($(this.CHILD69_TEXT).val())+parseInt($(this.CHILD35FULL_TEXT).val())+parseInt($(this.CHILD35NO_TEXT).val())+parseInt($(this.CHILD35BED_TEXT).val())+t)>this.MAX_PERSON)return void $(this.ALERT_ID).show()}$(this.CHILD35MEAL_TEXT).val(t)},updateChild2no:function(t,e){if(e){if(t<0)return void $(this.ALERT_ID).show();var a=parseInt($(this.ADULT_TEXT).val()),i=parseInt($(this.CHILD2MEAL_TEXT).val());if(t+i>this.MAX_CHILD2||a<t+i)return void $(this.ALERT_ID).show()}$(this.CHILD2NO_TEXT).val(t)},updateChild2meal:function(t,e){if(e){if(t<0)return void $(this.ALERT_ID).show();var a=parseInt($(this.ADULT_TEXT).val()),i=parseInt($(this.CHILD2NO_TEXT).val());if(i+t>this.MAX_CHILD2||a<i+t)return void $(this.ALERT_ID).show()}$(this.CHILD2MEAL_TEXT).val(t)},updateRoomPerson:function(){var t=parseInt($(this.ROOM_SELECTBOX_ID).text()),e=parseInt($(this.ADULT_TEXT).val()),a=parseInt($(this.CHILD1011_TEXT).val()),i=parseInt($(this.CHILD69_TEXT).val()),r=parseInt($(this.CHILD35FULL_TEXT).val()),n=parseInt($(this.CHILD35NO_TEXT).val()),_=parseInt($(this.CHILD35BED_TEXT).val()),s=parseInt($(this.CHILD35MEAL_TEXT).val()),o=parseInt($(this.CHILD2NO_TEXT).val()),l=parseInt($(this.CHILD2MEAL_TEXT).val()),c=a+i+r+n+_+s+o+l,u=t+"部屋・大人"+e+"名・子供"+c+"名";$(this.LABEL_ID).text(u),this.centralSetPageData({dp_room_num:t,dp_adult_num:e,dp_child1011_num:a,dp_child69_num:i,dp_child35full_num:r,dp_child35no_num:n,dp_child35bed_num:_,dp_child35meal_num:s,dp_child2no_num:o,dp_child2meal_num:l}),$(this.BALLON_ID).hide(),$(this.ALERT_ID).hide()},dispRoomPersonFromPagedata:function(){var e=parseInt(t.getPageData("dp_room_num")),a=parseInt(t.getPageData("dp_adult_num")),i=parseInt(t.getPageData("dp_child1011_num")),r=parseInt(t.getPageData("dp_child69_num")),n=parseInt(t.getPageData("dp_child35full_num")),_=parseInt(t.getPageData("dp_child35no_num")),s=parseInt(t.getPageData("dp_child35bed_num")),o=parseInt(t.getPageData("dp_child35meal_num")),l=parseInt(t.getPageData("dp_child2no_num")),c=parseInt(t.getPageData("dp_child2meal_num")),u=i+r+n+_+s+o+l+c,d=e+"部屋・大人"+a+"名・子供"+u+"名";$(this.LABEL_ID).text(d),this.selectedRoom(e),$(this.ROOM_SELECTBOX_ID).text(e),$(this.ADULT_TEXT).val(a),$(this.CHILD1011_TEXT).val(i),$(this.CHILD69_TEXT).val(r),$(this.CHILD35FULL_TEXT).val(n),$(this.CHILD35NO_TEXT).val(_),$(this.CHILD35BED_TEXT).val(s),$(this.CHILD35MEAL_TEXT).val(o),$(this.CHILD2NO_TEXT).val(l),$(this.CHILD2MEAL_TEXT).val(c),$(this.ROOM_PULLDOWN_ID).hide()},selectedRoom:function(t){for(var e=$(this.ROOM_LIST_ID).children(),a=0;a<e.length;a++)e.eq(a).text()==t?e.eq(a).removeClass("selected").addClass("selected"):e.eq(a).removeClass("selected")},bindEvent:function(){var t=this;$(t.LABEL_ID).off().on("click",$.proxy(function(){$(t.BALLON_ID).toggle()})),$(t.ROOM_SELECTBOX_ID).off().on("click",$.proxy(function(){$(t.ROOM_PULLDOWN_ID).toggle()})),$(t.ROOM_LIST_ELM).off().on("click",$.proxy(function(){var e=$(this).text();t.updateRoom(e),$(t.ROOM_PULLDOWN_ID).hide()})),$(t.ADULT_MINUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.ADULT_TEXT).val());t.updateAdult(e-1,!0)})),$(t.ADULT_PLUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.ADULT_TEXT).val());t.updateAdult(e+1,!0)})),$(t.CHILD1011_MINUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD1011_TEXT).val());t.updateChild1011(e-1,!0)})),$(t.CHILD1011_PLUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD1011_TEXT).val());t.updateChild1011(e+1,!0)})),$(t.CHILD69_MINUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD69_TEXT).val());t.updateChild69(e-1,!0)})),$(t.CHILD69_PLUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD69_TEXT).val());t.updateChild69(e+1,!0)})),$(t.CHILD35FULL_MINUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD35FULL_TEXT).val());t.updateChild35full(e-1,!0)})),$(t.CHILD35FULL_PLUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD35FULL_TEXT).val());t.updateChild35full(e+1,!0)})),$(t.CHILD35NO_MINUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD35NO_TEXT).val());t.updateChild35no(e-1,!0)})),$(t.CHILD35NO_PLUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD35NO_TEXT).val());t.updateChild35no(e+1,!0)})),$(t.CHILD35BED_MINUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD35BED_TEXT).val());t.updateChild35bed(e-1,!0)})),$(t.CHILD35BED_PLUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD35BED_TEXT).val());t.updateChild35bed(e+1,!0)})),$(t.CHILD35MEAL_MINUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD35MEAL_TEXT).val());t.updateChild35meal(e-1,!0)})),$(t.CHILD35MEAL_PLUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD35MEAL_TEXT).val());t.updateChild35meal(e+1,!0)})),$(t.CHILD2NO_MINUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD2NO_TEXT).val());t.updateChild2no(e-1,!0)})),$(t.CHILD2NO_PLUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD2NO_TEXT).val());t.updateChild2no(e+1,!0)})),$(t.CHILD2MEAL_MINUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD2MEAL_TEXT).val());t.updateChild2meal(e-1,!0)})),$(t.CHILD2MEAL_PLUS_ID).off().on("click",$.proxy(function(){var e=parseInt($(t.CHILD2MEAL_TEXT).val());t.updateChild2meal(e+1,!0)})),$(t.ALERT_CLOSE_ID).off().on("click",$.proxy(function(){$(t.ALERT_ID).hide()})),$(t.ROOM_PERSON_UPDATE_ID).off().on("click",$.proxy(function(){t.updateRoomPerson()})),$(document).on({click:function(e){$(e.target).closest(t.BALLON_ID).length||$(e.target).closest(t.LABEL_ID).length||(t.dispRoomPersonFromPagedata(),$(t.BALLON_ID).hide())}})},setDefaultData:function(){var a=t.getPageData("dp_cond_upd"),i=1,r=2,n=0,_=0,s=0,o=0,l=0,c=0,u=0,d=0;if(a)i=t.getPageData("dhotel_rm"),r=t.getPageData("dhotel_adlt");else if(YAHOO.JP.trv.dp.util.isLSReadMode()&&void 0!=e&&void 0!=e.get()){var h=e.get().dp_room_num,A=e.get().dp_adult_num,p=e.get().dp_child1011_num,D=e.get().dp_child69_num,O=e.get().dp_child35full_num,P=e.get().dp_child35no_num,f=e.get().dp_child35bed_num,g=e.get().dp_child35meal_num,I=e.get().dp_child2no_num,L=e.get().dp_child2meal_num;void 0!=h&&void 0!=A&&void 0!=p&&void 0!=D&&void 0!=O&&void 0!=P&&void 0!=f&&void 0!=g&&void 0!=I&&void 0!=L&&(i=h,r=A,n=p,_=D,s=O,o=P,l=f,c=g,u=I,d=L)}this.updateRoom(i),this.updateAdult(r,!1),this.updateChild1011(n,!1),
this.updateChild69(_,!1),this.updateChild35full(s,!1),this.updateChild35no(o,!1),this.updateChild35bed(l,!1),this.updateChild35meal(c,!1),this.updateChild2no(u,!1),this.updateChild2meal(d,!1),this.updateRoomPerson()},subscribe:function(){var t=this;this.centralSubscribe({dataname:"dp_event_exec_upd",callback:$.proxy(function(){t.setDefaultData(),t.bindEvent()},this)})}},t.delegate(a)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=function(){this.init()};e.prototype={COMPNAME:"add_airticket",TAB_DUMMY_ID:"#add_airticket_dummy",TARGET_ID:"#add_airticket",TAB_HL_IDX:"#tab_domestic_air_hotel_idx",TAB_HL_LABEL:"#tab_domestic_air_hotel_label",TAB_HL_MY:"#tab_domestic_air_hotel",TAB_LINK_ID:"tab_domestic_air_hotel",MAX_STAY_COUNT:10,MAX_ROOM_COUNT:6,MAX_ADULT_COUNT:6,init:function(){this.setupEvent(),this.subscribe(),this.centralDone()},setupEvent:function(){var t=this;t.bindEventAddAirticket(),$(t.TAB_DUMMY_ID).off().on("click",$.proxy(function(){t.bindEventAddAirticket(),t.bindEventMouse(),t.setCondUpdateEvent(t),t.setAddAirticket()})),t.bindEventMouse(),t.setCondUpdateEvent(t),t.setAddAirticket()},subscribe:function(){var t=this;this.centralSubscribe({dataname:"dp_jal_air_sale_to",callback:$.proxy(function(){t.setAddAirticket()},this)}),this.centralSubscribe({dataname:"dp_ana_air_sale_to",callback:$.proxy(function(){t.setAddAirticket()},this)}),this.centralDoneCallback(this.readDoneFinish)},readDoneFinish:function(){$(this.TARGET_ID).length&&$(this.TAB_DUMMY_ID).click()},bindEventAddAirticket:function(){var t=this;t.updatePageDataAddAirticket(!1),$(t.TARGET_ID).off().on("click",$.proxy(function(){if(t.ADD_AIRTICKET_ENABLE){t.setTabDpHighlight(!1),t.updatePageDataAddAirticket(!0),t.updatePageDataLinkage();document.getElementById(t.TAB_LINK_ID).click()}}))},updatePageDataAddAirticket:function(t){this.centralSetPageData({add_airticket_flg:t})},updatePageDataLinkage:function(){var t=$('input:hidden[id="ci"]').val();this.centralSetPageData({dhotel_ci:t});var e=$('input:hidden[id="co"]').val();this.centralSetPageData({dhotel_co:e});var a=$('input:hidden[id="rm"]').val();this.centralSetPageData({dhotel_rm:a});var i=$('input:hidden[id="adlt"]').val();this.centralSetPageData({dhotel_adlt:i});var r=$('input:hidden[id="prfcd"]').val();this.centralSetPageData({dhotel_pref_cd:r})},bindEventMouse:function(){if(!YAHOO.JP.trv.device.isTouchDevice()){var t=this;$(t.TARGET_ID).on("mouseenter",$.proxy(function(){t.ADD_AIRTICKET_ENABLE&&t.setTabDpHighlight(!0)})),$(t.TARGET_ID).on("mouseleave",$.proxy(function(){t.ADD_AIRTICKET_ENABLE&&t.setTabDpHighlight(!1)}))}},setTabDpHighlight:function(t){t?($(this.TAB_HL_IDX).addClass("current"),$(this.TAB_HL_LABEL).css("display","flex"),$(this.TAB_HL_MY).css("display","none")):($(this.TAB_HL_IDX).removeClass("current"),$(this.TAB_HL_LABEL).css("display","none"),$(this.TAB_HL_MY).css("display","flex"))},setCondUpdateEvent:function(){var t=this;$("input:hidden[id='prfcd']").change(function(){t.setAddAirticket()}),$("input:hidden[id='llcd']").change(function(){t.setAddAirticket()}),$('input:hidden[id="lcd"]').change(function(){t.setAddAirticket()}),$('input:hidden[id="mcd"]').change(function(){t.setAddAirticket()}),$('input:hidden[id="ci"]').change(function(){t.setAddAirticket()}),$('input:hidden[id="co"]').change(function(){t.setAddAirticket()}),$('input:hidden[id="rm"]').change(function(){t.setAddAirticket()}),$('input:hidden[id="adlt"]').change(function(){t.setAddAirticket()}),$('input[id="setNoDate_01"]').change(function(){t.setAddAirticket()}),$('input[id="qs_freewordText"]').change(function(){t.setAddAirticket()})},setAddAirticket:function(){this.ADD_AIRTICKET_ENABLE=this.isActiveLinkage(),this.ADD_AIRTICKET_ENABLE?$(this.TARGET_ID).removeClass("off"):$(this.TARGET_ID).addClass("off")},isActiveLinkage:function(){if($('input[id="setNoDate_01"]').prop("checked"))return!1;if(""!=$("#qs_freewordText").val())return!1;if(!this.checkStayAndSalePeriod())return!1;if(!this.checkRoomAndAdltCount())return!1;var t=$('input:hidden[id="llcd"]').val();return!YAHOO.JP.trv.util.isValue(t)},checkStayAndSalePeriod:function(){var t=$('input:hidden[id="ci"]').val(),e=$('input:hidden[id="co"]').val();if(YAHOO.JP.trv.util.isValue(t)&&YAHOO.JP.trv.util.isValue(e)){var a=YAHOO.JP.trv.util.changeDate(t),i=YAHOO.JP.trv.util.changeDate(e);if(YAHOO.JP.trv.util.getDiffDays(i,a)>=this.MAX_STAY_COUNT)return!1;return!(YAHOO.JP.trv.util.addDate(YAHOO.JP.trv.util.getYMDFromDate(new Date),1)>a)&&this.checkSalePeriod(a,i)}return!1},checkSalePeriod:function(e,a){var i=$('input:hidden[id="prfcd"]').val(),r=!0,n=t.getBridgeData("DP_JAL_MAP_PREF_AIR_PORT")[i];if(YAHOO.JP.trv.util.isUndefinedOrNull(n)){if(n=t.getBridgeData("DP_ANA_MAP_PREF_AIR_PORT")[i],YAHOO.JP.trv.util.isUndefinedOrNull(n))return!1;r=!1}if(r){if(!YAHOO.JP.trv.dp.util.isJalSalesPeriod(e))return!1}else if(!YAHOO.JP.trv.dp.util.isAnaSalesPeriod(e))return!1;return!0},checkRoomAndAdltCount:function(){var t=$('input:hidden[id="rm"]').val(),e=$('input:hidden[id="adlt"]').val();if(YAHOO.JP.trv.util.isValue(t)&&t>YAHOO.JP.trv.util.MAX_ROOM_COUNT)return!1;if(YAHOO.JP.trv.util.isValue(e)){var a=e.split(","),i=0,r=0,n=0,_=!1;for(var s in a){if(r=parseInt(a[s]),n>0&&r!=n){_=!0;break}i+=r,n=r}if(_||i>this.MAX_ADULT_COUNT)return!1}return!0}},t.delegate(e)});var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{},YAHOO.JP.trv=YAHOO.JP.trv||{},$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null;try{e=YAHOO.JP.trv.localstorage(t.getEnvData("LS_NAME"))}catch(t){}var a=function(){this.init()};a.prototype={COMPNAME:"dp_search",BUTTON_ID:"#dp_search",CLASS_NAME_INACTIVE:"is_disabled",SEARCH_URL:"https://travel.yahoo.co.jp/dp",SEARCH_INFO_LIST:{dp_use_airline:{hisKey:"dp_use_airline",urlParam:""},dp_cal_dep:{hisKey:"dp_cal_dep",urlParam:"out_dep_date"},dp_cal_arr:{hisKey:"dp_cal_arr",urlParam:"in_dep_date"},dp_g_from:{hisKey:"dp_g_from",urlParam:"out_dep_airport_cd"},dp_g_to:{hisKey:"dp_g_to",urlParam:"out_arr_airport_cd"},dp_ret_g_from:{hisKey:"dp_ret_g_from",urlParam:"in_dep_airport_cd"},dp_ret_g_to:{hisKey:"dp_ret_g_to",urlParam:"in_arr_airport_cd"},dp_ll_area_pref:{hisKey:"dp_ll_area_pref",urlParam:""},dp_l_area:{hisKey:"dp_l_area",urlParam:""},dp_l_area_name:{hisKey:"dp_l_area_name",urlParam:""},dp_m_area:{hisKey:"dp_m_area",urlParam:""},dp_m_area_name:{hisKey:"dp_m_area_name",urlParam:""},dp_room_num:{hisKey:"dp_room_num",urlParam:"room_count"},dp_adult_num:{hisKey:"dp_adult_num",urlParam:"adult_count"},dp_child1011_num:{hisKey:"dp_child1011_num",urlParam:"child_a"},dp_child69_num:{hisKey:"dp_child69_num",urlParam:"child_b"},dp_child35full_num:{hisKey:"dp_child35full_num",urlParam:"child_c"},dp_child35meal_num:{hisKey:"dp_child35meal_num",urlParam:"child_d"},dp_child35bed_num:{hisKey:"dp_child35bed_num",urlParam:"child_e"},dp_child35no_num:{hisKey:"dp_child35no_num",urlParam:"child_f"},dp_child2meal_num:{hisKey:"dp_child2meal_num",urlParam:"child_di"},dp_child2no_num:{hisKey:"dp_child2no_num",urlParam:"child_fi"},dp_ci:{hisKey:"dp_ci",urlParam:"stay_date"},dp_co:{hisKey:"dp_co",urlParam:""},dp_stay_count:{hisKey:"dp_stay_cnt",urlParam:"stay_count"}},init:function(){this.setupEvent(),this.subscribe(),this.centralDone()},setupEvent:function(){var a=this;$(a.BUTTON_ID).off().on("click",$.proxy(function(){if(!$(a.BUTTON_ID).hasClass(a.CLASS_NAME_INACTIVE)){var i={};for(var r in a.SEARCH_INFO_LIST){var n=t.getPageData(r),_=a.SEARCH_INFO_LIST[r].hisKey;""!=_&&(i[_]=n)}e&&e.set(i);var s={};for(var r in a.SEARCH_INFO_LIST){var n=t.getPageData(r),o=a.SEARCH_INFO_LIST[r].urlParam;""!=o&&(s[o]=n)}a.airlineUltTransmission();var l=a.getUrl()+"/?"+$.param(s);window.location.href=l}}))},subscribe:function(){var t=this;this.centralSubscribe({dataname:"dp_event_exec_upd",callback:$.proxy(function(){this.setupEvent()},this)}),this.centralSubscribe({dataname:"dp_airport_alert",callback:$.proxy(function(){t.updateButtonDisabled()},this)}),this.centralSubscribe({dataname:"dp_airport_alert_ret",callback:$.proxy(function(){t.updateButtonDisabled()},this)}),this.centralSubscribe({dataname:"dp_l_area",callback:$.proxy(function(){t.updateButtonDisabled()},this)})},updateButtonDisabled:function(){!0===t.getPageData("dp_airport_alert")||!0===t.getPageData("dp_airport_alert_ret")||""==t.getPageData("dp_l_area")||void 0==t.getPageData("dp_l_area")?$(this.BUTTON_ID).removeClass(this.CLASS_NAME_INACTIVE).addClass(this.CLASS_NAME_INACTIVE):$(this.BUTTON_ID).removeClass(this.CLASS_NAME_INACTIVE)},getUrl:function(){var e=this.SEARCH_URL,a=t.getPageData("dp_use_airline"),i=t.getPageData("dp_ll_area_pref"),r=t.getPageData("dp_l_area"),n=t.getPageData("dp_m_area");return a==YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL?e+="/jal":e+="/ana",e=e+"/pref/"+i,e=e+"/area/"+r,void 0!=n&&""!=n&&(e=e+"/"+n),e},airlineUltTransmission:function(){var t=[];t.push({slk:"src_jaldp",pos:0}),t.push({slk:"src_anadp",pos:0}),void 0!=YAHOO.JP.trv.ins&&(YAHOO.JP.trv.ins.isModuleTracked("dp_search")?YAHOO.JP.trv.ins.refreshModule("dp_search"):YAHOO.JP.trv.ins.addModules("dp_search"));var e=$("[name=selectAirline]:checked").val(),a=1,i="";if("JAL"===e)a=1,i="src_jaldp";else if("ANA"===e){var a=2;i="src_anadp"}YAHOO.JP.trv.ins.beaconLinkViews([{sec:"nav_dp",_links:t}],!1),$.tvPg.rapid3.sendBeaconClick($("<div>").data("ylk","sec:nav_dp;slk:"+i+";pos:0").data("rapid_p",a))}},t.delegate(a)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=function(){this.init()};e.prototype={COMPNAME:"mod_el_point",TIMEOUT:"5000",RATE_MAX:"最大XX％",COUPONGETLIST_URL:"",COUPON_SUM:0,COUPON_EXPIRE_TXT:"最短予約期限：",COUPON_LINK:"https://my.travel.yahoo.co.jp/couponlist/?sc_i=usermod_couponlist",LOGIN_USER:0,LOGIN_URL:"https://login.yahoo.co.jp/config/login?.src=trv&.done=",REGIST_URL:"https://account.edit.yahoo.co.jp/registration?.src=trv&.done=",init:function(){this.getInitialData(),this.setupEvent(),this.subscribe(),this.centralDone()},getInitialData:function(){this.LOGIN_USER=t.getBridgeData("LOGIN_USER"),this.COUPONGETLIST_URL=t.getBridgeData("COUPONLIST_URL"),0==this.LOGIN_USER?this.set_guest_url():$("#mymodule_pointcoupon").hide()},setupEvent:function(){$("#md_mymodule").show()},set_guest_url:function(){var t=location.href;$("#mymodule_login_url").attr("href",encodeURI(this.LOGIN_URL+t)),$("#mymodule_regist_url").attr("href",encodeURI(this.REGIST_URL+t))},get_coupongetlist:function(){var t=this;$.ajax({type:"GET",url:this.COUPONGETLIST_URL,timeout:this.TIMEOUT,cache:!1,dataType:"json",data:{purge:"0",arf:"1",sof:"0",usf:"0"},xhrFields:{withCredentials:!0}}).done(function(e){void 0!=e.tac?t.create_coupon_text(e):(t.centralInfoLog("ユーザ保有クーポンリスト取得API 応答エラー："+e.code),$("#mymodule_pointcoupon").hide())}).fail(function(e){t.centralInfoLog("ユーザ保有クーポンリスト取得API アクセスエラー："+e.status),$("#mymodule_pointcoupon").hide()})},create_coupon_text:function(t){if(this.COUPON_SUM=t.list.length,this.COUPON_SUM>0){this.create_coupon_expire(t);var e=$("#mymodule_coupon_number");e[0].className="elCouponNumber",e.text(this.COUPON_SUM),e.href=this.COUPON_LINK,$("#mymodule_nocoupon").hide()}},create_coupon_expire:function(t){for(var e="",a="",i="",r=new Date,n=new Date(r.getFullYear()+"/"+(r.getMonth()+1)+"/"+r.getDate()),_=0;_<this.COUPON_SUM;_++)if(void 0!=t.list[_].cpnedt){var s=t.list[_].cpnedt;s=s.substr(0,4)+"/"+s.substr(4,2)+"/"+s.substr(6,2);var o=new Date(s);o<n?this.COUPON_SUM=this.COUPON_SUM-1:(""==e||o<e)&&(e=o)}if(void 0!=e){var l=Math.ceil((e-n)/864e5);if(0==l)a=this.COUPON_EXPIRE_TXT+"本日",i="elDeadline alert";else if(l<=7)a=this.COUPON_EXPIRE_TXT+l+"日後",i="elDeadline alert";else{var c=e.getFullYear(),u=("00"+(e.getMonth()+1)).slice(-2),d=("00"+e.getDate()).slice(-2);a=this.COUPON_EXPIRE_TXT+c+"/"+u+"/"+d,i="elDeadline"}var h=$("#mymodule_coupon_expire");h.text(a),h[0].className=i,h.show()}},update_mymodule_point:function(){var e=t.getPageData("mymodule_point_number");0!=e&&$("#mymodule_rate_main").text(e)},update_mymodule_max_point:function(){var e=t.getPageData("mymodule_max_point_number");0!=e&&($("#mymodule_rate_max").text(this.RATE_MAX.replace("XX",e)),$("#mymodule_max_number").text(e))},subscribe:function(){return this.centralSubscribe({dataname:"mymodule_point_number",callback:$.proxy(function(){this.update_mymodule_point()},this)}),this.centralSubscribe({dataname:"mymodule_max_point_number",callback:$.proxy(function(){this.update_mymodule_max_point()},this)}),this.centralDoneCallback(this.readDoneFinish),this},readDoneFinish:function(){void 0!=YAHOO.JP.trv.ins&&YAHOO.JP.trv.ins.addModules("md_mymodule"),this.update_mymodule_point(),this.update_mymodule_max_point()}},t.delegate(e)}),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=function(){this.init()};e.prototype={COMPNAME:"mod_rate_main",CAMPAIGN_URL:"api/top/campaign/masterinfo.jsonp",POINTX5:"3654",SUNDAY:"4070",CAMPAIGN_POINT_TMP:[],CAMPAIGN_ENTRY_URL:"api/top/campaign/register.jsonp",TIMEOUT:"5000",API_SUCCESS:"000000",EL_POINT_NUMBER:0,MAX_POINT_NUMBER:0,NOPRE_POINT_NUMBER:0,LOGIN_USER:0,CAMPAIGN_TO_TEXT:[],TODAY:new Date,CMP_POS:0,ENTRY_BUTTON_STATUS_CLICK:"1",init:function(){this.getInitialData(),this.setupEvent(),this.centralDone()},getInitialData:function(){this.LOGIN_USER=t.getBridgeData("LOGIN_USER"),this.CAMPAIGN_TO_TEXT[3654]=["5のつく日に予約で＋5％","https://travel.yahoo.co.jp/promo/points/pointx5/?sc_i=usermod_pointx5","https://travel.yahoo.co.jp/promo/points/pointx5/#search_plan"],this.CAMPAIGN_TO_TEXT[4070]=["日曜日に予約で＋5％","https://travel.yahoo.co.jp/promo/points/sunday/?sc_i=usermod_sunday","https://travel.yahoo.co.jp/promo/points/sunday/#search_plan"],0!=this.LOGIN_USER&&(this.EL_POINT_NUMBER=this.EL_POINT_NUMBER+1),this.MAX_POINT_NUMBER=this.MAX_POINT_NUMBER+1,1==this.LOGIN_USER?this.EL_POINT_NUMBER=this.EL_POINT_NUMBER+4:this.NOPRE_POINT_NUMBER=this.NOPRE_POINT_NUMBER+4,this.MAX_POINT_NUMBER=this.MAX_POINT_NUMBER+4,this.MAX_POINT_NUMBER=this.MAX_POINT_NUMBER+1},setupEvent:function(){this.get_campaign(),1==this.LOGIN_USER?this.entry_campaign_pre():this.set_nopre_point()},get_campaign:function(){var t=this,e=""+this.TODAY.getFullYear()+("0"+(this.TODAY.getMonth()+1)).slice(-2)+("0"+this.TODAY.getDate()).slice(-2)+"000000",a=0;1==this.LOGIN_USER&&(a=1);$.ajax({type:"GET",url:this.CAMPAIGN_URL,timeout:this.TIMEOUT,cache:!0,data:{reserve_date:e,granted_campaign_only_flg:a,entry_decision_flg:0},dataType:"jsonp"}).done(function(e){if(e.ResultSet.Status==t.API_SUCCESS){for(var a=e.ResultSet.Result.TargetCampaignList,i=0;i<a.length;i++)a[i].CampaignId==t.POINTX5&&(1==t.LOGIN_USER?t.set_campaign_pre(a[i]):t.set_campaign_nopre_guest(a[i]),t.CMP_POS++);for(var i=0;i<a.length;i++)a[i].CampaignId==t.SUNDAY&&(1==t.LOGIN_USER?t.set_campaign_pre(a[i]):t.set_campaign_nopre_guest(a[i]),t.CMP_POS++);1!=t.LOGIN_USER&&0==t.CMP_POS&&t.change_cmp_tag()}else t.centralInfoLog("キャンペーンマスタ情報取得API 応答エラー："+e.ResultSet.Status),1!=t.LOGIN_USER&&t.change_cmp_tag();void 0!=$("#mymodule_cmp_tag")&&$("#mymodule_cmp_tag").show(),t.set_el_point(),t.set_el_max_point(),1!=t.LOGIN_USER&&t.set_nopre_point()}).fail(function(e){t.centralInfoLog("キャンペーンマスタ情報取得API アクセスエラー："+e.status),1!=t.LOGIN_USER&&t.change_cmp_tag(),void 0!=$("#mymodule_cmp_tag")&&$("#mymodule_cmp_tag").show(),t.set_el_point(),t.set_el_max_point(),1!=t.LOGIN_USER&&t.set_nopre_point()})},set_campaign_pre:function(t){var e=t.CampaignId,a=parseInt(t.PointGrantRate);this.MAX_POINT_NUMBER=this.MAX_POINT_NUMBER+a,this.CAMPAIGN_POINT_TMP[e]=a;var i=$("#mymodule_tmp_box").clone(),r="mymodule_campaignbox"+e;i.attr("id",r),$("#mymodule_tmp_box").before(i),r="#"+r,$(r).find("#mymodule_temp_number").text(a);var n=this.CAMPAIGN_TO_TEXT[e][0],_=this.CAMPAIGN_TO_TEXT[e][1],s=i.find("#mymodule_temp_textlink");s.text(n),s.attr("href",_);var o="rsec:user_mod;slk:cmp;pos:"+this.CMP_POS+";";s.attr("data-ylk",o);var l=i.find("#mymodule_sch_plan");l.attr("href",this.CAMPAIGN_TO_TEXT[e][2]);var c="rsec:user_mod;slk:sch_cmp;pos:"+this.CMP_POS+";";if(l.attr("data-ylk",c),1==t.AlreadyEntryFlg)$(r).find("#mymodule_pre_already").show(),$(r).find("#mymodule_temp_number").parent()[0].className="elPointConditionNumber elMyMdCheck_check",this.EL_POINT_NUMBER=this.EL_POINT_NUMBER+parseInt(a);else{var u=$(r).find("#mymodule_pre_entry");u.attr("data-campaignid",e),i.find("#mymodule_temp_textlink").data("campaign_id",e);var d="rsec:user_mod;slk:ent_cmp;pos:"+this.CMP_POS+";";u.attr("data-ylk",d),u.show()}$(r).show()},set_campaign_nopre_guest:function(t){var e=t.CampaignId,a=parseInt(t.PointGrantRate);this.MAX_POINT_NUMBER=this.MAX_POINT_NUMBER+a,this.NOPRE_POINT_NUMBER=this.NOPRE_POINT_NUMBER+a,this.CAMPAIGN_POINT_TMP[e]=a;var i=$("#mymodule_tmp_box").clone(),r="mymodule_campaignbox"+e;i.attr("id",r),$("#mymodule_tmp_box").before(i),r="#"+r,$(r).find("#mymodule_temp_number").text(a+"％");var n=this.CAMPAIGN_TO_TEXT[e][0],_=this.CAMPAIGN_TO_TEXT[e][1],s=i.find("#mymodule_temp_textlink");s.text(n),s.attr("href",_);var o="rsec:user_mod;slk:cmp;pos:"+this.CMP_POS+";";s.attr("data-ylk",o),$(r).show()},change_cmp_tag:function(){$("#mymodule_nopre_cmp").unwrap(),$("#mymodule_nopre_cmp").unwrap(),$("#mymodule_nopre_cmp").attr("class","elPointCondition_right"),$("#mymodule_nopre_cmp_point").remove(),$("#mymodule_nopre_cmp_bal").parent().attr("class","elPointCondition_left"),$("#mymodule_nopre_cmp_bal").remove()},entry_campaign_pre:function(){var t=this;return $(document).on("click","[id^=mymodule_pre_entry]",$.proxy(function(e){var a=$(e.target),i=e.target.getAttribute("data-campaignid");if(void 0==i&&(i=e.target.parentElement.getAttribute("data-campaignid"),a=$(e.target).parent()),a.data("button_status")!==t.ENTRY_BUTTON_STATUS_CLICK){a.data("button_status",t.ENTRY_BUTTON_STATUS_CLICK);var r=""+this.TODAY.getFullYear()+("0"+(this.TODAY.getMonth()+1)).slice(-2)+("0"+this.TODAY.getDate()).slice(-2);$.ajax({type:"GET",url:t.CAMPAIGN_ENTRY_URL,timeout:t.TIMEOUT,cache:!1,dataType:"jsonp",data:{cid:i,entry_date:r}}).done(function(e){e.ResultSet.Status==t.API_SUCCESS?t.success_campaign_entry(i):(t.centralInfoLog("キャンペーンエントリーAPI 応答エラー："+e.ResultSet.Status),t.error_campaign_entry(i))}).fail(function(e){t.centralInfoLog("キャンペーンエントリーAPI アクセスエラー："+e.status),t.error_campaign_entry(i)})}},t)),this},success_campaign_entry:function(t){var e="#mymodule_campaignbox"+t,a=this.CAMPAIGN_POINT_TMP[t];$(e).find("#mymodule_pre_entry").hide(),$(e).find("#mymodule_pre_already").show(),$(e).find("#mymodule_temp_number").parent()[0].className="elPointConditionNumber elMyMdCheck_check",this.EL_POINT_NUMBER=this.EL_POINT_NUMBER+parseInt(a),this.set_el_point()},error_campaign_entry:function(t){var e="#mymodule_campaignbox"+t;$(e).find("#mymodule_pre_entry").hide(),$(e).find("#mymodule_pre_error").show()},set_el_point:function(){this.centralSetPageData({mymodule_point_number:this.EL_POINT_NUMBER})},set_el_max_point:function(){this.centralSetPageData({mymodule_max_point_number:this.MAX_POINT_NUMBER}),$("#loader").hide()},set_nopre_point:function(){$("#mymodule_nopre_number").text(this.NOPRE_POINT_NUMBER)}},t.delegate(e)}),function(t){"use strict";var e={BASE_URL:"https://travel.yahoo.co.jp/",LOG_API:"",DP_AJAX_OPTION:{type:"get",cache:!1,timeout:5e3,async:!0,dataType:"jsonp"},STATUS:{success:"000000",common_error:"200000",timeout_error:"004003"},SYNC_PARAM:{ci:"",co:"",adlt:"",qry:"",sgttyp:"",sgtcd:"",sgtnm:""},ROOTPATH:"/dhotel/",AREA:{LL:"search/area/ll",KC:"search/area/pref",SC:"search/area/city",LC:"search/area/l",MC:"search/area/m",EK:"search/eki",AP:"search/air",LM:"search/spot",SP:"search/onsen",HT:"shisetsu"},DECODE_PARAM:{},PC_TOP_PARAM:{storage_flg:!1},TAB_PARAM:{add_airticket_flg:!1,dhotel_ci:"",dhotel_co:"",dhotel_rm:0,dhotel_adlt:0,dhotel_pref_cd:"",dp_cond_upd:!1,dp_init_upd:!1,dp_event_exec_upd:"",dp_event_exec_upd_airline:"",dp_use_airline:0,dp_jal_air_sale_from:"",dp_jal_air_sale_to:"",dp_ana_air_sale_from:"",dp_ana_air_sale_to:"",dp_cal_dep:"",dp_cal_arr:"",dp_g_from:"",dp_g_to:"",dp_airport_alert:!1,dp_airport_alert_ret:!1,dp_ret_g_from:"",dp_ret_g_to:"",dp_ll_area_pref:"",dp_ll_area_pref_upd:"",dp_l_area:"",dp_l_area_name:"",dp_m_area:"",dp_m_area_name:"",dp_ci:"",dp_co:"",dp_room_num:0,dp_adult_num:0,dp_child1011_num:0,dp_child69_num:0,dp_child35full_num:0,dp_child35no_num:0,dp_child35bed_num:0,dp_child35meal_num:0,dp_child2no_num:0,dp_child2meal_num:0,dp_event_init:"",dp_stay_count:0,ALERT_AIRPORT_DISP_STYLE:"block"},LS_READ_MODE:!0,LS_NAME:"dp_search_history",ALERT_AIRPORT_DISP_STYLE:"block",MYMODULE:{mymodule_point_number:0,mymodule_max_point_number:0},STAMP_MODULE:{stamp_info_api_status:0,stamp_info_api_result:"",stamp_info_refresh:"",stamp_sticky_set_close_time:!1,stamp_info_ls_name:"stamp_rally",stamp_info_checkout_period_check:!1,stamp_info_checkout_period_check_stamp:!1}},a={param:e.SYNC_PARAM,reg:e.PC_TOP_PARAM},i=t.extend({},e.SYNC_PARAM,e.PC_TOP_PARAM,e.TAB_PARAM,e.MYMODULE,e.STAMP_MODULE,{co_user_set:"",dateperson:!1,prfcd:"13"},YAHOO.JP.trv.expagedata||{});YAHOO.JP.trv.central.initEnvData(e),YAHOO.JP.trv.central.initPageData(i),YAHOO.JP.trv.central.setUrlPageData(a)}(jQuery),$(function(){"use strict";var t=YAHOO.JP.trv.central,e=null;try{e=YAHOO.JP.trv.localstorage(t.getEnvData("LS_NAME"))}catch(t){}var a=function(){this.init()};a.prototype={COMPNAME:"tab_domestic_air_hotel",TAB_DUMMY_ID:"#tab_domestic_air_hotel_dummy",TAB_MY_READ_DONE_ID:"#dp_cal_dep",SALE_PERIOD_MSG_ID:"#dp_sale_period_msg",ALERT_CLOSE_ID:"#dp_g_from_to_alert_close",ALERT_CLOSE_RET_ID:"#dp_ret_g_from_to_alert_close",ALERT_ID:"dp_g_from_to_alert",ALERT_RET_ID:"dp_ret_g_from_to_alert",RET_AIRLINE_CHG_ID:"#dp_ret_g_chg",RET_AIRLINE_CHG_DISP_TARGET_ID:"#dp_ret_g_from_to",LODGING_DAY_CHG_ID:"#dp_lodging_day_chg",LODGING_DAY_CHG_DISP_TARGET_ID:"#dp_lodging_day",AL_JAL_ID:"#JAL",AL_ANA_ID:"#ANA",DOMESTIC_SYNC_AIRLINE:YAHOO.JP.trv.dp.util.USE_AIRLINE_DEFAULT,AJAX_OPTION:{},APPID:"",API_URL:"",JAL_SALE_PERIOD_API_ERR:!1,ANA_SALE_PERIOD_API_ERR:!1,SALE_PERIOD_API_EXEC:{jal:YAHOO.JP.trv.dp.util.EXEC_NONE,ana:YAHOO.JP.trv.dp.util.EXEC_NONE},LOG_MSG:{err_api:"航空会社販売期間取得APIの実行に失敗しました。",err_status:"航空会社販売期間取得APIの処理中にエラーが発生しました。",err_init_timeout:"航空会社販売期間取得APIの初期処理タイムアウトになりました。デフォルト販売期間を初期設定とします。"},getAnaTerm:function(){var t=this,e={eappid:t.APPID,carrier:YAHOO.JP.trv.dp.util.CARRIER_ANA};t.SALE_PERIOD_API_EXEC.ana=YAHOO.JP.trv.dp.util.EXEC_RUN,$.ajax({type:t.AJAX_OPTION.type,url:t.API_URL,data:e,timeout:t.AJAX_OPTION.timeout,dataType:t.AJAX_OPTION.dataType}).done(function(e,a,i){t.SALE_PERIOD_API_EXEC.ana=YAHOO.JP.trv.dp.util.EXEC_END,e&&e.ResultSet&&e.ResultSet.Status&&"1"==e.ResultSet.Status&&e.ResultSet.Result[0]?(t.centralSetPageData({dp_ana_air_sale_from:e.ResultSet.Result[0].From}),t.centralSetPageData({dp_ana_air_sale_to:e.ResultSet.Result[0].To}),t.ANA_SALE_PERIOD_API_ERR=!1,t.refreshSalePeriod(YAHOO.JP.trv.dp.util.USE_AIRLINE_ANA)):(t.ANA_SALE_PERIOD_API_ERR=!0,t.setDefaultAnaTerm(),t.centralInfoLog(t.LOG_MSG.err_status))}).fail(function(e,a,i){t.SALE_PERIOD_API_EXEC.ana=YAHOO.JP.trv.dp.util.EXEC_END,t.ANA_SALE_PERIOD_API_ERR=!0,t.setDefaultAnaTerm(),t.centralInfoLog(t.LOG_MSG.err_api)})},getJalTerm:function(){var t=this,e={eappid:t.APPID,carrier:YAHOO.JP.trv.dp.util.CARRIER_JAL};t.SALE_PERIOD_API_EXEC.jal=YAHOO.JP.trv.dp.util.EXEC_RUN,$.ajax({type:t.AJAX_OPTION.type,url:t.API_URL,data:e,timeout:t.AJAX_OPTION.timeout,dataType:t.AJAX_OPTION.dataType}).done(function(e,a,i){t.SALE_PERIOD_API_EXEC.jal=YAHOO.JP.trv.dp.util.EXEC_END,e&&e.ResultSet&&e.ResultSet.Status&&"1"==e.ResultSet.Status&&e.ResultSet.Result[0]?(t.centralSetPageData({dp_jal_air_sale_from:e.ResultSet.Result[0].From}),t.centralSetPageData({dp_jal_air_sale_to:e.ResultSet.Result[0].To}),t.JAL_SALE_PERIOD_API_ERR=!1,t.refreshSalePeriod(YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL)):(t.JAL_SALE_PERIOD_API_ERR=!0,t.setDefaultJalTerm(),t.centralInfoLog(t.LOG_MSG.err_status))}).fail(function(e,a,i){t.SALE_PERIOD_API_EXEC.jal=YAHOO.JP.trv.dp.util.EXEC_END,t.JAL_SALE_PERIOD_API_ERR=!0,t.setDefaultJalTerm(),t.centralInfoLog(t.LOG_MSG.err_api)})},setDefaultAnaTerm:function(){var t=YAHOO.JP.trv.dp.util.getDefaultSalePeriod();this.centralSetPageData({dp_ana_air_sale_from:t.from}),this.centralSetPageData({dp_ana_air_sale_to:t.to})},setDefaultJalTerm:function(){var t=YAHOO.JP.trv.dp.util.getDefaultSalePeriod();this.centralSetPageData({dp_jal_air_sale_from:t.from}),this.centralSetPageData({dp_jal_air_sale_to:t.to})},init:function(){this.getInitialData(),this.setupEvent(),this.subscribe(),this.centralDone()},getInitialData:function(){this.API_URL=t.getBridgeData("DP_SALE_API_URL"),this.APPID=t.getBridgeData("DP_API_APPID"),this.AJAX_OPTION=t.getEnvData("DP_AJAX_OPTION"),this.getJalTerm(),this.getAnaTerm()},setupEvent:function(){var t=this;$(t.TAB_DUMMY_ID).off().on("click",$.proxy(function(){t.procUpdateData(),t.bindEventAlert(),t.bindEventRadio(),t.bindEventRetAirportChg(),t.bindEventLodgingDayChg(),t.procDefAirlineSelect(t.DOMESTIC_SYNC_AIRLINE)}))},subscribe:function(){this.centralDoneCallback(this.readDoneFinish)},readDoneFinish:function(){$(this.TAB_MY_READ_DONE_ID).length&&(this.checkExceSalePeriodApi(),$(this.TAB_DUMMY_ID).click())},checkExceSalePeriodApi:function(){this.SALE_PERIOD_API_EXEC.jal!=YAHOO.JP.trv.dp.util.EXEC_END&&(this.centralInfoLog(this.LOG_MSG.err_init_timeout),this.SALE_PERIOD_API_EXEC.jal=YAHOO.JP.trv.dp.util.EXEC_TIMEOUT,this.setDefaultJalTerm()),this.SALE_PERIOD_API_EXEC.ana!=YAHOO.JP.trv.dp.util.EXEC_END&&(this.centralInfoLog(this.LOG_MSG.err_init_timeout),this.SALE_PERIOD_API_EXEC.ana=YAHOO.JP.trv.dp.util.EXEC_TIMEOUT,this.setDefaultAnaTerm())},refreshSalePeriod:function(e){var a=t.getPageData("dp_use_airline");a==e&&this.dispSalePeriod(a)},procUpdateData:function(){if(this.DOMESTIC_SYNC_AIRLINE=YAHOO.JP.trv.dp.util.USE_AIRLINE_DEFAULT,!0===t.getPageData("add_airticket_flg")){var e=t.getPageData("dhotel_pref_cd"),a=!1,i=t.getBridgeData("DP_JAL_MAP_PREF_AIR_PORT");if(!YAHOO.JP.trv.util.isUndefinedOrNull(i))for(var r in i)if(r==e){var n=YAHOO.JP.trv.util.changeDate(t.getPageData("dhotel_ci"));YAHOO.JP.trv.util.changeDate(t.getPageData("dhotel_co"));YAHOO.JP.trv.dp.util.isJalSalesPeriod(n)&&(a=!0);break}this.DOMESTIC_SYNC_AIRLINE=a?YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL:YAHOO.JP.trv.dp.util.USE_AIRLINE_ANA,this.updatePageDataCondUpd(!0)}else this.updatePageDataCondUpd(!1)},procDefAirlineSelect:function(t){this.updatePageDataExecUpd();var e=t;e==YAHOO.JP.trv.dp.util.USE_AIRLINE_DEFAULT&&(e=this.getDefUseAirline()),e==YAHOO.JP.trv.dp.util.USE_AIRLINE_ANA&&$(this.AL_ANA_ID).prop("checked",!0),this.setUseAirline(e)},updatePageDataExecUpd:function(){var t=new Date;this.centralSetPageData({dp_event_exec_upd:t})},bindEventRadio:function(){var t=this;$(t.AL_JAL_ID).off().on("change",$.proxy(function(){t.setUseAirline(YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL)})),$(t.AL_ANA_ID).off().on("change",$.proxy(function(){t.setUseAirline(YAHOO.JP.trv.dp.util.USE_AIRLINE_ANA)}))},updatePageDataCondUpd:function(t){this.centralSetPageData({dp_cond_upd:t})},bindEventAlert:function(){var t=this;$(t.ALERT_CLOSE_ID).off().on("click",$.proxy(function(){document.getElementById(t.ALERT_ID).style.display="none"})),$(t.ALERT_CLOSE_RET_ID).off().on("click",$.proxy(function(){document.getElementById(t.ALERT_RET_ID).style.display="none"}))},bindEventRetAirportChg:function(){var t=this;$(t.RET_AIRLINE_CHG_ID).off().on("click",$.proxy(function(){$(t.RET_AIRLINE_CHG_DISP_TARGET_ID).removeClass("is_hide"),this.parentNode.removeChild(this)}))},bindEventLodgingDayChg:function(){var t=this;$(t.LODGING_DAY_CHG_ID).off().on("click",$.proxy(function(){$(t.LODGING_DAY_CHG_DISP_TARGET_ID).removeClass("is_hide"),this.parentNode.removeChild(this)}))},setUseAirline:function(t){this.dispSalePeriod(t),this.centralSetPageData({dp_use_airline:t});var e=new Date;this.centralSetPageData({dp_event_exec_upd_airline:e})},getDefUseAirline:function(){var t=YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL;if(YAHOO.JP.trv.dp.util.isLSReadMode()&&void 0!=e&&void 0!=e.get()){var a=e.get().dp_use_airline;void 0!=a&&(t=a)}return t},dispSalePeriod:function(t){var e,a,i,r;t==YAHOO.JP.trv.dp.util.USE_AIRLINE_JAL?(e=YAHOO.JP.trv.central.PAGEDATA.dp_jal_air_sale_from.data,a=YAHOO.JP.trv.central.PAGEDATA.dp_jal_air_sale_to.data,i=this.JAL_SALE_PERIOD_API_ERR,r=this.SALE_PERIOD_API_EXEC.jal):(e=YAHOO.JP.trv.central.PAGEDATA.dp_ana_air_sale_from.data,a=YAHOO.JP.trv.central.PAGEDATA.dp_ana_air_sale_to.data,i=this.ANA_SALE_PERIOD_API_ERR,r=this.SALE_PERIOD_API_EXEC.ana);var n="";i||r==YAHOO.JP.trv.dp.util.EXEC_TIMEOUT||(n=YAHOO.JP.trv.util.getFormatYMDSepZeroNone(e)+"～"+YAHOO.JP.trv.util.getFormatYMDSepZeroNone(a)+" 出発のご予約が可能です。"),$(this.SALE_PERIOD_MSG_ID).text(n)}},t.delegate(a)});