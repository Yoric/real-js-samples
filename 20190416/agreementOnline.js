"use strict";(function(){function isInWX(){var ua=navigator.userAgent.toLowerCase();if(ua.match(/MicroMessenger/i)=="micromessenger"){document.body.innerText='亲，不支持微信扫码查看哦';if(window.stop){window.stop()}else{document.execCommand("Stop")}return true}return false}function isInMobile(){return/AppleWebKit.*Mobile/i.test(navigator.userAgent)}function getLocalStorageItem(key){return window.localStorage?window.localStorage.getItem(key):null}function setLocalStorageItem(key,data){window.localStorage&&window.localStorage.setItem(key,data)}function removeClass(className){var rmStr=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';className=typeof className==='string'?className.split(' '):[];className=className.filter(function(itm){return itm!==rmStr});return className.join(' ')}function getStyleRule(element,property){if(window.getComputedStyle){return window.getComputedStyle(element).getPropertyValue(property)}else{return element.currentStyle[property]}}function initDialog(){var needRemind=document.getElementById('needRemind').value;if(needRemind!=='y'){return}var revisionNum=document.getElementById('revisionNum').value;var agreementId=document.getElementById('agreementId').value;if(getLocalStorageItem("".concat(agreementId,"-").concat(revisionNum))==='y'){return}setLocalStorageItem("".concat(agreementId,"-").concat(revisionNum),'y');var remindContentHtml=document.getElementById('remindContentDiv').innerHTML;var dialogDiv=document.createElement('div');dialogDiv.className='dialog';dialogDiv.innerHTML="<div class=\"dialog-mask\"></div>\n                            <div class=\"dialog-box\">\n                              <div class=\"dialog-content\">\n                                <div class=\"dialog-body\">".concat(remindContentHtml,"</div>\n                                <div class=\"dialog-footer\">\n                                  <button type=\"button\" id=\"remindDialogBtn\" class=\"kuma-button kuma-button-primary\">确定</button>\n                                </div>\n                              </div>\n                            </div>");document.body.append(dialogDiv);document.body.style.overflow='hidden';document.getElementById('remindDialogBtn').addEventListener('click',function(e){dialogDiv.remove();document.body.style.overflow=''})}function initMenuTree(){var agrContent=document.querySelector('.agr-content');var agrTitles=agrContent.querySelectorAll('.setasthetitle');var menuTitles=[];var titleHtml='';var titleIndexHtml='';for(var i=0,len=agrTitles.length;i<len;i++){var element=agrTitles[i];if(element.innerText.replace(/\s+/g,'')){titleHtml+="<li title=\"".concat(element.innerText,"\" data-id=\"").concat(element.id,"\"><a href=\"#").concat(element.id,"\">").concat(element.innerText,"</a></li>");titleIndexHtml+="<li><i>".concat(i,"</i></li>")}}if(titleHtml){titleHtml="<div class=\"menu-tree-r\"><ul>".concat(titleHtml,"</ul></div>");titleIndexHtml="<div class=\"menu-tree-l\"><ul>".concat(titleIndexHtml,"</ul></div>");var wrapper=document.createElement('div');wrapper.innerHTML="<span id=\"menuTreeIcon\" class=\"menu-tree-icon menuTreeNav\"><b class=\"arrow-top\" id=\"menuTreeArrow\"><i class=\"top-arrow1\"></i><i class=\"top-arrow2\"></i></b></span>\n                          <div class=\"menu-tree clearfix\" id=\"menuTree\">".concat(titleIndexHtml+titleHtml,"</div>\n                          ");document.body.append(wrapper);initMenuTreeEvents()}}function initMenuTreeEvents(){var menuTreeEle=document.querySelector('.menu-tree-r ul');var menuTreeIcon=document.querySelector('#menuTreeIcon');var menuTreeArrow=document.querySelector('#menuTreeArrow');var menuTree=document.querySelector('#menuTree');if(menuTreeEle){menuTreeEle.addEventListener('click',function(e){var targetLi=e.target.tagName.toLowerCase()==='li'?e.target:e.target.parentNode;var menuLiEle=menuTreeEle.querySelectorAll('li');for(var i=0,len=menuLiEle.length;i<len;i++){menuLiEle[i].className=removeClass(menuLiEle[i].className,'mt-r-active')}targetLi.className=targetLi.className+' mt-r-active'})}if(menuTreeIcon){menuTreeIcon.addEventListener('click',function(e){if(getStyleRule(menuTree,'display')!=='none'){menuTreeArrow.style.display=menuTree.style.display='none'}else{menuTreeArrow.style.display=menuTree.style.display='block'}})}}window.onload=function(){if(!isInWX()&&!isInMobile()){initDialog();initMenuTree()}}})();