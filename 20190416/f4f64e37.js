var VolumeIconWithSliderBar;(function(n){function rt(){v||(v=!0,r(_w,tt,ut,!0))}function ut(){c=[];v=!1}var y="volsliderHandle",p="bg",w="cont",l="vol",o="mousemove",tt="unload",b="volumeIconWithSliderBar",s="undefined",e=typeof VideoRichHoverUtils!=s?VideoRichHoverUtils:null,k=typeof VRHConsts!=s?VRHConsts:null,a=typeof SmartEvent!=s?SmartEvent:null,t=typeof pMMUtils!=s?pMMUtils:null,h=!1,i=null,u=null,d=null,g=null,f=null,r=null,c=[],v=!1,nt;if(!h&&t&&t.gfbc&&t.sepd&&t.st&&e&&e.showElement&&e.showElement&&k&&a&&a.bind&&(i=t.gfbc,u=t.sepd,d=t.st,g=e.showElementFromList,f=e.showElement,r=a.bind,h=!0),h&&_w&&!_w[b]){_w[b]=n;function it(n,t,i,r,u,f,e,o){h&&n&&n.length>1&&(c[n]&&(c[n]=null),c[n]=new nt(t,i,r,u,f,e,o));return}rt();n.init=it}nt=function(){function n(n,e,s,h,c,a,v){var b=this,d;if(this.getVolumeCallBackFunction=null,this.isMuteCallBackFunction=null,this.setVolumeCallBackFunction=null,this.setLastStableVolumeCallBackFunction=null,this.setMuteCallBackFunction=null,this.muteHandle=null,this.enMuteInst=!1,this.instMeta=null,this.isDraggingVolumeBar=!1,this.eventBind=function(){b.setVolumeCallBackFunction&&(b.volumeSliderBarContainer&&(r(b.volumeSliderBarContainer,"mouseover",b.onVolumeMouseIn),r(b.volumeSliderBarContainer,"mouseout",b.onVolumeMouseOut),r(b.volumeHandler,"mouseup",b.stopDrag),r(b.volumeSliderBarContainer,"click",u)),b.sliderHandle&&r(b.sliderHandle,"mousedown",b.startDrag));b.muteHandle&&b.setMuteCallBackFunction&&r(b.muteHandle,"mouseup",b.muteHandler);sj_evt.bind(k.FallbackToNonSMTEvt,b.onFallbackToNonSMT)},this.onVolumeMouseIn=function(){b.volumeHandler&&b.volumeHandlerBackground&&b.sliderHandle&&(b.enableVolumeSlider(!0),b.getVolumeCallBackFunction&&b.setVolumeBarPosition(b.getVolumeCallBackFunction()))},this.onFallbackToNonSMT=function(){f(b.volumeControlContainer,!1)},this.onVolumeMouseOut=function(n){for(var t=sj_mo(n),i=!1;t;){if(t===b.volumeSliderBarContainer){i=!0;break}t=t.parentNode}if(!i){if(sj_ue(b.volumeSliderBarContainer,o,b.onDrag),!(b.volumeHandler&&b.volumeHandlerBackground&&b.sliderHandle))return;b.enableVolumeSlider(!1)}},this.enableVolumeSlider=function(n){n&&b.isMuteCallBackFunction()||(f(b.volumeHandler,n),f(b.volumeHandlerBackground,n),f(b.sliderHandle,n),f(b.sliderbar,n),b.updateVolBorderStyle(n))},this.updateVolBorderStyle=function(n){var r=i("bg",b.volumeControlContainer);!t.hc(r,"volnb")&&n?t.ac(r,"volnb"):t.hc(r,"volnb")&&!n&&t.rc(r,"volnb")},this.startDrag=function(n){return n!=null&&n.button==0&&(b.setLastStableVolume(n),sj_be(b.volumeSliderBarContainer,o,b.onDrag),b.isDraggingVolumeBar=!0),u(n)},this.stopDrag=function(n){return n!=null&&n.button==0&&(b.updateVolume(n),sj_ue(b.volumeSliderBarContainer,o,b.onDrag),b.isDraggingVolumeBar=!1),u(n)},this.onDrag=function(n){return n!=null&&n.button==0&&b.updateVolume(n),u(n)},this.muteHandler=function(n){if(n!=null&&n.button==0){if(b.isDraggingVolumeBar){b.isDraggingVolumeBar=!1;sj_ue(b.volumeSliderBarContainer,o,b.onDrag);t.sepd(n);return}b.setMuteCallBackFunction&&(b.setMuteCallBackFunction(),b.setVolumeIcon(),b.enableVolumeSlider(!0),b.setVolumeBarPosition(b.getVolumeCallBackFunction()))}return u(n)},this.setVolumeIcon=function(){if(b.getVolumeCallBackFunction&&b.isMuteCallBackFunction&&b.muteHandle&&b.muteHandle.firstChild){var n="volMuteIcon ";n+=b.getVolumeCallBackFunction()===0||b.isMuteCallBackFunction()?"vf":b.getVolumeCallBackFunction()<20?"vl":b.getVolumeCallBackFunction()>=20&&b.getVolumeCallBackFunction()<60?"vm":"vo";b.muteHandle.firstChild.className=n}},this.getVolumeCallBackFunction=a,this.isMuteCallBackFunction=v,this.setMuteCallBackFunction=c,this.setVolumeCallBackFunction=s,this.setLastStableVolumeCallBackFunction=h,this.instMeta=e,this.volumeControlContainer=i(l,n),d=new Array(0),this.volumeControlContainer){this.volumeSliderBarBackground=i(l+" "+p,this.volumeControlContainer);this.volumeSliderBarContainer=i(l+" "+w,this.volumeControlContainer);this.volumeSliderBarContainer&&this.volumeSliderBarBackground&&this.setVolumeCallBackFunction&&(this.volumeHandlerBackground=i(y+" "+p,this.volumeSliderBarContainer),this.volumeHandler=i(y+" "+w,this.volumeSliderBarContainer),this.sliderbar=i("vsb",this.volumeSliderBarContainer),this.sliderHandle=i("vsh",this.volumeSliderBarContainer),d.push(this.volumeSliderBarBackground),d.push(this.volumeSliderBarContainer));this.muteHandle=i("volMuteHandle",n);this.muteHandle&&this.setMuteCallBackFunction&&d.push(this.muteHandle);d.length>0&&d.push(this.volumeControlContainer);g(d,!0);this.setVolumeIcon();this.eventBind();return}}return n.prototype.updateVolume=function(n){var t=this.getVolumeValue(n);this.setVolumeBarPosition(t);this.setVolumeCallBackFunction&&(this.setVolumeCallBackFunction(t),this.setVolumeIcon())},n.prototype.getVolumeValue=function(n){var t=this.sliderbar.getBoundingClientRect();return 100-Math.max(0,Math.min(1,(n.clientY-t.top)/this.sliderbar.offsetHeight))*100},n.prototype.setLastStableVolume=function(n){var t=this.getVolumeValue(n);t>0&&this.setLastStableVolumeCallBackFunction&&this.setLastStableVolumeCallBackFunction(t)},n.prototype.setVolumeBarPosition=function(n){n<0||n>100||d(this.sliderHandle,Math.round(this.sliderbar.clientHeight*(100-n)/100)-this.sliderHandle.clientHeight/2)},n}()})(VolumeIconWithSliderBar||(VolumeIconWithSliderBar={}))