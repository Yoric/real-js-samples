!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/js/cmpld/",e(e.s=717)}({0:function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new l(t)}function i(t,e){return void 0===e&&(e=[]),a?(n=Function.prototype.bind).call.apply(n,[console[t],console].concat(e)):function(){};var n}function s(t,e){if(a){console.groupCollapsed(r(t).str());for(var n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];console.groupCollapsed(s),console.log.apply(console,e[s]),console.groupEnd()}console.groupEnd()}}function o(t){return(t>9?"":"0")+t}Object.defineProperty(e,"__esModule",{value:!0});var a=console&&console.groupCollapsed&&console.groupEnd&&console.log&&!1,l=function(){function t(t){var e=new Date;this.state={messages:t,prefix:"["+e.getHours()+":"+o(e.getMinutes())+":"+o(e.getSeconds())+"]",icon:"ü§ñ"}}return t.prototype.toArray=function(){var t=this.state;return[t.icon,t.prefix].concat(t.messages)},t.prototype.str=function(){return this.toArray().join(" ")},t.prototype.prefix=function(t){return this.state.prefix=t,this},t.prototype.log=function(){return this.state.icon="ü§ñ",this},t.prototype.info=function(){return this.state.icon="üíÅ‚Äç‚ôÇÔ∏è",this},t.prototype.error=function(){return this.state.icon="üí©",this},t.prototype.warn=function(){return this.state.icon="üò¢",this},t.prototype.icon=function(t){return this.state.icon=t,this},t}();e.FormatDescriptor=l,e.format=r,e.print={log:i("log",r().log().toArray()),info:i("info",r().info().toArray()),warn:i("warn",r().warn().toArray()),error:i("error",r().error().toArray()),groups:s}},1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COMPONENT_DELIMITER=",",e.COMPONENT_EVENT_DELIMITER=":",e.COMPONENT_NS_DELIMITER=".",e.COMPONENT_EL_DELIMITER=".",e.COMPONENT_DATA_BIND_DEF_DELIMITER="|",e.COMPONENT_DATA_BIND_EQ="=",e.COMPONENT_DATA_BIND_PROP_DELIMITER=";"},10:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DOM_DATA_COMPONENT_SEL="[data-mp]",e.DOM_DATA_COMPONENT_NAME_ATTR="data-mp",e.DOM_DATA_COMPONENT_EL_ATTR="data-mp-el",e.DOM_DATA_COMPONENT_STATE_ATTR="data-mp-state",e.DOM_DATA_COMPONENT_BIND_ATTR="data-mp-bind";var r;!function(t){t[t.STRING=0]="STRING",t[t.BOOLEAN=1]="BOOLEAN",t[t.NUMERIC=2]="NUMERIC"}(r=e.MPFProperty||(e.MPFProperty={}));var i;!function(t){t[t.STRING=0]="STRING",t[t.BOOLEAN=1]="BOOLEAN"}(i=e.MPFAttributeType||(e.MPFAttributeType={})),e.DOM_ELEMENT_ATTRIBUTES={required:i.BOOLEAN,checked:i.BOOLEAN,disabled:i.BOOLEAN,selected:i.BOOLEAN},e.DOM_ELEMENT_PROPERTIES={alt:r.STRING,id:r.STRING,name:r.STRING,innerHTML:r.STRING,src:r.STRING,style:r.STRING,textContent:r.STRING,title:r.STRING,for:r.STRING,value:r.STRING,colspan:r.NUMERIC,height:r.NUMERIC,maxlength:r.NUMERIC,rowspan:r.NUMERIC,width:r.NUMERIC}},104:function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(105)),r(n(122))},105:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,a)}l((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,s&&(o=2&n[0]?s.return:n[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,n[1])).done)return o;switch(s=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(o=l.trys,!(o=o.length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){l.label=n[1];break}if(6===n[0]&&l.label<o[1]){l.label=o[1],o=n;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(n);break}o[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],s=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,s,o,a,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},l=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o};Object.defineProperty(e,"__esModule",{value:!0});var u=n(14),c=n(106),h=n(31),p=n(108),d=n(111),f=n(13),m=n(26),g=n(114),_=n(116),v=n(117),w=n(121),y=n(13),b=n(27),P=n(28),C={sels:{answer:"js-survey__answer",answerInput:"js-survey__answer-input"},attrs:{exclude:"data-exclude",withInput:"data-with-input"}},S=-1,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._events={"submit:form":function(t){e.handleSubmit(t)},"click:button-reset":function(t){t.preventDefault(),e.reset()},"click:button-next":function(t){t.preventDefault();var n=e.getState(),r=n.currentIndex,s=n.survey,o=n.payload,a=r+1,l=s.questions[a];if(!l)return void e.vote(o);e.setState(function(t){return i({},t,{currentAnswer:null,currentIndex:a,currentQuestion:l,currentType:"question",hasUserInteractedWithSurvey:!0})})},"change:input":function(t){t.preventDefault();var n=C.attrs,r=t.target,i=r.getAttribute(n.exclude),s=r.getAttribute(n.withInput);if("checkbox"===r.type&&r.checked&&e.getElements("input").forEach(function(t){var e=t.getAttribute(n.exclude);(i&&!e||!i&&e)&&(t.checked=!1)}),s&&r.checked){var o=e.getElements("input-custom")[0];o&&o.focus()}},"click:input-custom":function(t){var e,n,r=C.sels,i=t.target,s=i.parentNode;if(null!==s){for(;"DIV"!==s.tagName||!s.classList.contains(r.answer);)s=s.parentNode;if(s){var o=s.getElementsByClassName(r.answerInput),l=Array.prototype.slice.call(o);try{for(var u=a(l),c=u.next();!c.done;c=u.next()){c.value.checked=!0}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}}i.focus()}}},e}return r(e,t),e.processDataBeforePost=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];if(Array.isArray(r)){var i=r.length;0!==i&&(e[n]=1===i?r[0]:r)}else(r||"number"==typeof r)&&(e[n]=r);return e},{})},e.prototype.handleQuizStepForm=function(t){var e=this.getState().survey,n=h.serializeObject(t),r=g.findAnswersIds(n),s=n.question[0],o=m.findItem(s,e.questions);if(o){if(0===Object.keys(r).length)return void this.setState(function(t){var e;return i({},t,{errors:(e={},e[s]=[f.errorRequired()],e),hasUserInteractedWithSurvey:!0})});var a=l(m.findItems(r,o.answers),1),u=a[0];if(u){var c=u.right?o.correct:o.incorrect;this.setState(function(t){return i({},t,{currentAnswer:c,currentType:"answer",errors:{},hasUserInteractedWithSurvey:!0,payload:i({},t.payload,g.packPayload(o,r))})})}}},e.prototype.handleSubmit=function(t){t.preventDefault&&t.preventDefault();var e=t.target,n=this.options.layout.type,r=this.type;if("step"!==n&&"sidebar"!==n||"poll"!==r&&"exam"!==r&&"survey"!==r){if("all"===n&&"poll"===r||"exam"===r||"survey"===r)throw new Error("not implemented");"quiz"===r&&this.handleQuizStepForm(e)}else this.handleSurveyStepForm(e)},e.prototype.handleSurveyStepForm=function(t){var e=this.getState(),n=e.currentIndex,r=e.payload,s=e.survey,o=s.questions,a=s.questionsById,l=h.serializeObject(t),u=l.question[0],c=a[u],p=g.findAnswersIds(l),f=(l.answer_custom||[]).filter(function(t){return t});if(c){var _=c.answers,v=c.options,w=!_||0===_.length,y=m.findItems(p,_),P=w?[]:d.validateAnswers(v,y,f);if(P.length)return void this.setState(function(t){var e,n;return i({},t,{errors:(e={},e[u]=P,e),formState:(n={},n[u]=g.saveQuestionState(p,f),n),hasUserInteractedWithSurvey:!0})});var C=i({},r,g.packPayload(c,p,f)),S=b.findNextQuestion(n,o,C);if(!S)return void this.vote(C);this.setState(function(t){return i({},t,{currentQuestion:S,currentIndex:m.itemIndex(S.id,o),errors:{},formState:{},hasUserInteractedWithSurvey:!0,payload:C})})}},Object.defineProperty(e.prototype,"type",{get:function(){var t=this.getState().survey;return t?t.type||"poll":"poll"},enumerable:!0,configurable:!0}),e.prototype.vote=function(t){return s(this,void 0,void 0,function(){var n,r,s,a;return o(this,function(o){switch(o.label){case 0:n=this.options.url,this.setState(function(e){return i({},e,{errors:{},formState:{},hasUserInteractedWithSurvey:!0,isBusy:!0,payload:t})}),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch(n,{credentials:"include",method:"POST",body:JSON.stringify(e.processDataBeforePost(t)),headers:{Accept:"application/json, application/xml, text/plain, text/html, *.*","Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}})];case 2:return r=o.sent(),[4,r.json()];case 3:return s=o.sent(),this.setState(function(t){var e=t.survey;if(s.error)return i({},t,{currentState:"ready",errors:{server:[s.message]},isBusy:!1});if((e.max_votes||0)>0){var n=_.readVotesCount(e.id);_.saveVotesCount(e.id,n+1)}return i({},t,{currentQuestion:null,currentState:"done",errors:{},isBusy:!1,survey:s,voteAttempts:_.getVoteAttempts(e.id,e.max_votes||0)})}),[3,5];case 4:return a=o.sent(),this.setState(function(t){return i({},t,{currentState:"ready",isBusy:!1,errors:{server:[y.errorServer500()]}})}),[3,5];case 5:return[2]}})})},e.prototype.scrollUp=function(){var t=this.getElements("scroll-anchor")[0],e=this.options.style.offsetTop;if(t)return void p.scrollTo(t.offsetTop+e);var n=this.$;p.scrollTo(n.offsetTop+e)},e.prototype.fetchSurvey=function(){return s(this,void 0,void 0,function(){var t,e,n,r,s,a;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,7,,8]),t=this.options.url,[4,fetch(t,{credentials:"include"})];case 1:return e=o.sent(),[4,e.json()];case 2:n=o.sent(),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,v.getAuth()];case 4:return r=o.sent(),[3,6];case 5:return s=o.sent(),console.error(s),r=null,[3,6];case 6:return this.setState(function(t){if(n.error)return i({},t,{currentState:"error",errors:{server:[n.message]}});var e=t.layout,s=c.parse(n.stop_date.rfc3339)||0,o=s>new Date,a=_.getVoteAttempts(n.id,n.max_votes);w.preload(n);var l=n.questions;return n.questionsById=b.mapToDictById(l),i({},t,{layout:i({},e,{showCounter:"survey"!==n.type}),authorized:!!r,currentQuestion:l[t.currentIndex],currentState:g.resolveSurveyInitialStateByType(n.type,o,a),isActive:o,survey:n,type:n.type,voteAttempts:a})}),[2,n];case 7:return a=o.sent(),console.error(a),this.setState(function(t){return i({},t,{currentState:"error",errors:{server:[a.message]}})}),[3,8];case 8:return[2]}})})},e.prototype.render=function(e,n){var r=this,i=this.options.style.allowScrollUp;if(t.prototype.render.call(this,e,n),n&&("done"===n.currentState&&this.options.onFinish(n,this.$),-1===["error","loading"].indexOf(n.currentState))){i&&n.hasUserInteractedWithSurvey&&-1!==["done","step","ready"].indexOf(n.currentState)&&this.scrollUp();var s=n.currentQuestion;!s||s.id===S||s.answers&&0!==s.answers.length||(S=s.id,setTimeout(function(){var t=r.$elements.form;t&&t[0]&&(P.log("–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∞–±–º–∏—Ç –≤–æ–ø—Ä–æ—Å–∞"),r.handleSubmit({target:t[0]}))},50))}},e.prototype.reset=function(){t.prototype.reset.call(this),this.setState(function(t){return i({},t,{hasUserInteractedWithSurvey:!0})})},e.prototype.init=function(){this.fetchSurvey()},e.prototype.getDefaultOptions=function(){return{onFinish:function(t,e){},style:{offsetTop:0,allowScrollUp:!0},layout:{type:"step",allowRepeat:!0,showIndex:!1,showResultIndex:!0,showCounter:!0,showHeader:!0,showResults:!0}}},e.prototype.getInitialState=function(){return{layout:this.options.layout,authorized:!1,voteAttempts:0,currentIndex:0,currentState:"loading",currentType:"question",errors:{},formState:{},isBusy:!1,hasUserInteractedWithSurvey:!1,payload:{json:1},survey:{}}},e.registryName="SurveyComponent",e}(u.TemplateComponent);e.SurveyComponent=T,u.registerComponent(T)},106:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(107))},107:function(t,e,n){"use strict";function r(t,n,r){void 0===r&&(r=1);var i=e.DATE_METHOD_MAP[n],s=i[0],o=i[1],a=Date.prototype[s],l=Date.prototype[o],u=new Date(t.getTime()),c=a.call(u);return l.call(u,c+r),u}function i(t){var e=Date.parse(t);if(NaN!==e)return new Date(e);for(var n=0,r=h;n<r.length;n++){var i=r[n],s=i.expr,o=i.pass;if(s.test(t))return o(s,t)}}function s(t){return 32-new Date(t.getFullYear(),t.getMonth(),32).getDate()}function o(t){var e=t.getDay()-1;return e<0?6:e}function a(t){var e=t.getDay();return 6===e||0===e}function l(t,e){return void 0===e&&(e=new Date),e.getTime()>t.getTime()}function u(t){return t%4==0&&t%100!=0||t%400==0}function c(t,e){var n=t.getDate()===e.getDate(),r=t.getMonth()===e.getMonth();return t.getFullYear()===e.getFullYear()&&r&&n}Object.defineProperty(e,"__esModule",{value:!0}),e.DATE_METHOD_MAP={date:["getDate","setDate"],year:["getFullYear","setFullYear"],hours:["getHours","setHours"],milliseconds:["getMilliseconds","setMilliseconds"],minutes:["getMinutes","setMinutes"],month:["getMonth","setMonth"],seconds:["getSeconds","setSeconds"],time:["getTime","setTime"]},e.shift=r;var h=[{expr:/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})([+-]\d{2}):(\d{2})$/,pass:function(t,e){var n=t.exec(e);if(null!==n){var r=n.slice(1).map(function(t){return parseInt(t,10)}),i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],u=r[5],c=r[6],h=r[7],p=(new Date).getTimezoneOffset()+60*c+h;return new Date(i,s-1,o,a,l-p,u)}}}];e.parse=i,e.daysInMonth=s,e.getDayOfWeek=o,e.isWeekend=a,e.isPast=l,e.isLeapYear=u,e.daysEq=c},108:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(109))},109:function(t,e,n){"use strict";function r(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n="easeOutSine");var r=i[n],a=window.scrollY,l=0;!function e(){l+=o;var n=l/.5,i=r(n);n<1?(s(e),window.scrollTo(0,a+(t-a)*i)):window.scrollTo(0,t)}()}Object.defineProperty(e,"__esModule",{value:!0});var i=n(110),s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},o=1/60;e.scrollTo=r},11:function(t,e,n){"use strict";function r(){return new Promise(function(t){for(var e=0,n=h;e<n.length;e++){(0,n[e])()}t(a({},c))})}function i(t){return a({},c[t])}function s(t,e){var n=function(){c[t]=a({},e)};return h.push(n),n}function o(t){for(var e=t.split(u.COMPONENT_NS_DELIMITER),n=e[0],r=e.slice(1),s={},o=0,a=r;o<a.length;o++){var c=a[o];s=l.deepMerge({},s,i(n)),n=""+n+u.COMPONENT_NS_DELIMITER+c}return l.deepMerge({},s,i(n))}var a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),u=n(1),c={},h=[];e.resolveConfigSetters=r,e.getConfig=i,e.setConfig=s,e.getConfigCollapsed=o},110:function(t,e,n){"use strict";function r(t){return function(e){return Math.pow(e,t)}}function i(t){return function(e){return 1-Math.abs(Math.pow(e-1,t))}}function s(t){var e=r(t),n=i(t);return function(t){return t<.5?e(2*t)/2:n(2*t-1)/2+.5}}function o(t){return Math.sin(t*l)}function a(t){return-.5*(Math.cos(Math.PI*t)-1)}Object.defineProperty(e,"__esModule",{value:!0});var l=Math.PI/2;e.linear=s(1),e.easeInQuad=r(2),e.easeOutQuad=i(2),e.easeInOutQuad=s(2),e.easeInCubic=r(3),e.easeOutCubic=i(3),e.easeInOutCubic=s(3),e.easeInQuart=r(4),e.easeOutQuart=i(4),e.easeInOutQuart=s(4),e.easeInQuint=r(5),e.easeOutQuint=i(5),e.easeInOutQuint=s(5),e.easeOutSine=o,e.easeInOutSine=a},111:function(t,e,n){"use strict";function r(t,e,n){if(!t)return[];var r=t.answer_required,o=t.min_answers,a=t.max_answers,l=t.user_input_min_length,u=t.user_input_max_length,c=e.length,h=o!==a;return[function(){return r&&h&&(c<o||c>a)?s.errorRange(o,a):null},function(){return r&&h&&c<o&&!a?s.errorAtLeastOne(o):null},function(){return r&&!h&&0===c?s.errorRequired():null},function(e){var o,a;try{for(var c=i(e),h=c.next();!h.done;h=c.next()){if(!h.value.id&&t.user_input_allowed){var p=n[0]||"";if(r&&0===p.length)return s.errorRequired();if(l>0){if(0===p.length||p.length<l)return s.errorMinLength(l);if(p.length>u)return s.errorMaxLength(u)}switch(t.user_input_allowed){case 1:var d=/(^[a-z–∞-—è\s]+$)/i;if(!d.test(p))return s.errorLettersOnly();break;case 2:var d=/(^[0-9]+$)/i;if(!d.test(p))return s.errorDigitsOnly()}}}}catch(t){o={error:t}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}return null}].reduce(function(t,n){var r=n(e);return null!==r?t.concat(r):t},[])}var i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(13);e.validateAnswers=r},112:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(113))},113:function(t,e,n){"use strict";function r(t,e){var n=e[0],r=e[1],i=e[2],s=Math.abs(t);return(s%=100)>=5&&s<=20?i:(s%=10,1===s?n:s>=2&&s<=4?r:i)}function i(t,e,n){return void 0===e&&(e=140),void 0===n&&(n=""),t.length<e?t:""+t.slice(0,e-n.length)+n}function s(t){return t.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(t,e){return 0==+t?"":0===e?t.toLowerCase():t.toUpperCase()}).replace(/[\-\.]/g,"")}function o(t){return t.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(t,e){return 0==+t?"":t.toUpperCase()}).replace(/[\-\.]/g,"")}Object.defineProperty(e,"__esModule",{value:!0}),e.plural=r,e.trunc=i,e.toCamelCase=s,e.toPascalCase=o},114:function(t,e,n){"use strict";function r(t,e,n){var r,i={},s=t.id,o=t.options;return o&&o.answer_range?(r=Object.assign({},e),delete r[0]):r=Object.keys(e).filter(function(t){return"0"!==t}),r&&(i[u.createQuestionKey(s)]=r),n&&(i[u.createQuestionKey(s,!0)]=n),i}function i(t,e){var n={};return Object.keys(t).forEach(function(r){r&&(n[r]={checked:!0},"string"==typeof t[r]&&(n[r].value=t[r]),"0"===r&&(n[r].value=e[0]))}),n}function s(t,e,n){var r=e&&n>0?"ready":"done",i=n>0?"ready":"done";return"poll"===t?r:"exam"===t||"survey"===t||"quiz"===t?e?i:"hidden":r}function o(t){return void 0===t&&(t={}),Object.keys(t).reduce(function(e,n){return"answer"===n?Object.assign(e,a.mapToDict(t[n],!0)):0===n.indexOf(l.prefixRangeAnswer)&&(e[n.replace(l.prefixRangeAnswer,"")]=t[n][0]),e},{})}Object.defineProperty(e,"__esModule",{value:!0});var a=n(26),l=n(13),u=n(27);e.packPayload=r,e.saveQuestionState=i,e.resolveSurveyInitialStateByType=s,e.findAnswersIds=o},115:function(t,e,n){"use strict";function r(t,e){s.log("–ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å "+t.id+"...");var n=t.answers;if(!n||0===n.length)return s.log(">>> –≤–æ–ø—Ä–æ—Å –±–µ–∑ –æ—Ç–≤–µ—Ç–æ–≤ (–≤–æ–ø—Ä–æ—Å-—Å—Å—ã–ª–∫–∞) ‚Äî –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å."),!0;if(u(n,e))return s.log(">>> –≤—Å–µ –æ—Ç–≤–µ—Ç—ã —Å–∫—Ä—ã—Ç—ã ‚Äî –ù–ï–õ–¨–ó–Ø –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å."),!1;if(!t.options)return s.log(">>> –Ω–µ—Ç —É—Å–ª–æ–≤–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"),!0;var r=t.options.show_condition;if(!r||!r.question)return s.log(">>> –Ω–µ—Ç —É—Å–ª–æ–≤–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"),!0;var o=r.question,a=i.createQuestionKey(o),c=e[a];return c?l.every(function(t){return t(r,c)}):(s.log(">>> –Ω–∞ –≤–æ–ø—Ä–æ—Å "+o+", —è–≤–ª—è—é—â–∏–π—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –Ω–µ—Ç –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî","–ù–ï–õ–¨–ó–Ø –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"),!1)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(27),s=n(28),o=function(t){return Array.isArray(t)?t.length:Object.keys(t).length},a=function(t,e){return!!e&&(Array.isArray(e)?-1!==e.indexOf(""+t):!!e[t]&&"0"!==e[t])},l=[function(t,e){var n=t.min_answers;if(!n)return!0;if(!e)return!1;var r=o(e),i=r>=(n||0);return s.log(">>> –º–∏–Ω–∏–º–∞–ª—å–Ω–æ —á–∏—Å–ª–æ –æ—Ç–≤–µ—Ç–æ–≤ "+n+",","–ø–æ–ª—É—á–µ–Ω–æ "+r+" ‚Äî",(i?"–º–æ–∂–Ω–æ":"–ù–ï–õ–¨–ó–Ø")+" –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"),i},function(t,e){if(!e)return!0;var n=t.max_answers;if(!n)return!0;var r=o(e),i=r<=(n||Number.POSITIVE_INFINITY);return s.log(">>> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –æ—Ç–≤–µ—Ç–æ–≤ "+n+",","–ø–æ–ª—É—á–µ–Ω–æ "+r+" ‚Äî",(i?"–º–æ–∂–Ω–æ":"–ù–ï–õ–¨–ó–Ø")+" –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"),i},function(t,e){if(!e)return!1;var n=t.checked_answer,r=!n||a(n,e);return s.log(">>> "+(r?"":"–Ω–µ ")+"–≤—ã–±—Ä–∞–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç —Å id "+n+" ‚Äî",(r?"–º–æ–∂–Ω–æ":"–ù–ï–õ–¨–ó–Ø")+" –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"),r}],u=function(t,e){var n=0;return t.every(function(t){if(t.disable_multiple)return 0===n&&(n++,!0);var r=t.show_condition;if(!r)return!1;var s=r.checked_answer,o=r.question;return!(!s||!o)&&!a(s,e[i.createQuestionKey(o)])})};e.checkIfCanShowQuestion=r},116:function(t,e,n){"use strict";function r(t,e){var n=a(t);localStorage.setItem(n,""+e)}function i(t){var e=a(t),n=localStorage.getItem(e);if(!n)return 0;var r=parseInt(n,10);return isNaN(r)?0:r}function s(t,e){return 0===e?1:e-i(t)}function o(t,e){if(0===e)return!0;var n=i(t);return 0===n||!(n>=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return"Survey:"+t};e.saveVotesCount=r,e.readVotesCount=i,e.getVoteAttempts=s,e.checkVotesCount=o},117:function(t,e,n){"use strict";function r(){return i(this,void 0,void 0,function(){return s(this,function(t){return null===a&&(a=o.getActiveUser()),[2,a]})})}var i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,a)}l((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,s&&(o=2&n[0]?s.return:n[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,n[1])).done)return o;switch(s=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(o=l.trys,!(o=o.length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){l.label=n[1];break}if(6===n[0]&&l.label<o[1]){l.label=o[1],o=n;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(n);break}o[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],s=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,s,o,a,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(e,"__esModule",{value:!0});var o=n(118),a=null;e.getAuth=r},118:function(t,e,n){"use strict";function r(t){return p?Object(h.d)(t):Object(h.c)(t)}function i(){return p?Object(h.a)().then(function(t){var e=t.status,n=t.accounts;d=n||[],f=p.activeUser()||"",m=e||""}).catch(function(t){return t}):Object(h.b)().then(function(t){var e=t.status,n=t.data;d=n&&n.list?n.list:[],f=n&&n.email?n.email:"",m=e||""}).catch(function(t){return t})}function s(){return i().then(function(){return d}).catch(function(t){return t})}function o(){return s().then(function(t){return t.filter(function(t){return t.active})[0]})}function a(){return i().then(function(){return!!f&&!0}).catch(function(t){return t})}function l(){return i().then(function(){return m}).catch(function(t){return t})}function u(t){return i().then(function(){if("function"!=typeof t||!f)throw new TypeError("First argument must be a function or the user is not allowed.");t(f)}).catch(function(t){return t})}function c(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i="function"==typeof t;return new Promise(function(s){u(function(o){o&&i?s(t()):e&&i?r(n):s(o)})})}Object.defineProperty(e,"__esModule",{value:!0}),e.getAccountsList=s,e.getActiveUser=o,e.isAuth=a,e.getStatus=l,e.onGetStatus=u,e.applyAuth=c;var h=n(119),p="undefined"!=typeof window?window.__PH:global.__PH,d=[],f="",m=""},119:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a}),n.d(e,"d",function(){return l}),n.d(e,"c",function(){return u});var r=n(120),i=n.n(r),s="undefined"!=typeof window?window.__PH:global.__PH,o=function(){var t="mail.ru"!==document.domain.split(".").slice(-2).join(".")?"https://portal.devmail.ru/NaviData":"https://portal.mail.ru/NaviData",e={data:{mac:1,ldata:1},timeout:3e3,jsonpCallback:"callback"};return i()(t,e).then(function(t){return t.json()})},a=function(){return new Promise(function(t,e){return s.loadAccountsList(function(n){return n?t(n):e()})})},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.authForm.show(t)},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.successPage?t.successPage:window.location;window.location="https://touch.mail.ru/cgi-bin/login?page=".concat(e)}},120:function(t,e,n){(function(t){!function(n,r){if("function"==typeof define&&define.amd)define(["exports","module"],r);else{r(e,t)}}(0,function(t,e){"use strict";function n(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function r(t){try{delete window[t]}catch(e){window[t]=void 0}}function i(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}function s(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=t,a=e.timeout||o.timeout,l=e.jsonpCallback||o.jsonpCallback,u=void 0;return new Promise(function(o,c){var h=e.jsonpCallbackFunction||n(),p=l+"_"+h;window[h]=function(t){o({ok:!0,json:function(){return Promise.resolve(t)}}),u&&clearTimeout(u),i(p),r(h)},s+=-1===s.indexOf("?")?"?":"&";var d=document.createElement("script");d.setAttribute("src",""+s+l+"="+h),e.charset&&d.setAttribute("charset",e.charset),d.id=p,document.getElementsByTagName("head")[0].appendChild(d),u=setTimeout(function(){c(new Error("JSONP request to "+t+" timed out")),r(h),i(p),window[h]=function(){r(h)}},a),d.onerror=function(){c(new Error("JSONP request to "+t+" failed")),r(h),i(p),u&&clearTimeout(u)}})}var o={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};e.exports=s})}).call(e,n(87)(t))},121:function(t,e,n){"use strict";function r(t){return o(this,void 0,void 0,function(){return a(this,function(e){return[2,new Promise(function(e){var n=new Image;n.onload=function(){e()},n.src=t})]})})}function i(t){if(t&&t.img&&t.img.src)return t.img.src}function s(t){return o(this,void 0,void 0,function(){var e,n,s,o,u,c,h,p,d;return a(this,function(a){s=[],o=t.questions;try{for(u=l(o),c=u.next();!c.done;c=u.next())h=c.value,s=s.concat(i(h)||[]),"quiz"===t.type&&(p=h.correct,d=h.incorrect,s=s.concat(i(p)||[]),s=s.concat(i(d)||[]))}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return[2,Promise.all(s.map(r))]})})}var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,a)}l((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,s&&(o=2&n[0]?s.return:n[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,n[1])).done)return o;switch(s=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(o=l.trys,!(o=o.length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){l.label=n[1];break}if(6===n[0]&&l.label<o[1]){l.label=o[1],o=n;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(n);break}o[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],s=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,s,o,a,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},l=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0}),e.preload=s},122:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version="3.2.4"},123:function(t,e,n){"use strict";var r=n(75),i=(n.n(r),n(74)),s=(n.n(i),n(124)),o=(n.n(s),n(76)),a=(n.n(o),n(125)),l=(n.n(a),n(77)),u=(n.n(l),n(126)),c=(n.n(u),n(127)),h=(n.n(c),n(128)),p=(n.n(h),n(129)),d=(n.n(p),n(78)),f=(n.n(d),n(130)),m=(n.n(f),n(79)),g=(n.n(m),n(80)),_=(n.n(g),n(81)),v=(n.n(_),n(82)),w=(n.n(v),n(83)),y=(n.n(w),n(131)),b=(n.n(y),n(132)),P=(n.n(b),n(133)),C=(n.n(P),n(134)),S=(n.n(C),n(135)),T=(n.n(S),n(136)),I=(n.n(T),n(84)),O=(n.n(I),n(137));n.n(O);window.ru.mail.asyncTemplates.prefetch("/bem/lady/web/web.bundles/ct-viewbox-popup/ct-viewbox-popup.xml.js"),window.ru.mail.asyncTemplates.prefetch("/bem/lady/web/web.bundles/ct-viewbox-previews/ct-viewbox-previews.xml.js"),window.ru.mail.asyncTemplates.prefetch("/bem/lady/web/web.bundles/ct-viewbox-slides/ct-viewbox-slides.xml.js"),window.ru.mail.asyncTemplates.prefetch("/bem/lady/web/web.bundles/ct-viewbox-slide-content/ct-viewbox-slide-content.xml.js"),window.ru.mail.asyncTemplates.prefetch("/bem/lady/web/web.bundles/ct-viewbox-more/ct-viewbox-more.xml.js"),window.ru.mail.asyncTemplates.prefetch("/bem/lady/web/web.bundles/ct-viewbox-forum/ct-viewbox-forum.xml.js"),window.ru.mail.asyncTemplates.prefetch("/bem/lady/web/web.bundles/ct-viewbox-recommended/ct-viewbox-recommended.xml.js")},124:function(t,e){!function(t,e,n,r){"use strict";var i=n.Basic.Constructors.getView,s=n.Basic.Extend,o=n.Basic.moduleOpts.setParams,a={cssSels:{Main:{Controls:null}},cssClss:{disabledControl:null},Attrs:{switchDirection:"data-direction"}};s(!0,n,{Modules:{GalleryControls:i(function(){var n=["prev","next"];return{_Handlers:{"dom:click:Main.Controls":"_onControlClick",model:{lastimage:"_onLastImage",imagechange:"_onImageChange"}},_Init:function(){null===this._elems.Controls&&r&&e.console.warn("GalleryControls: element 'Main.Controls' not found");var t=this._Model.getCurrentImage(),n=t.image,i=this._Model._Opts.Loop,s=0===n,o=n===t.setLength-1;(!i&&null!==n||s&&o)&&(s||o)&&this._onLastImage(o,s)},_onControlClick:function(t){var e=this._Model,r=t.currentTarget.getAttribute(this._Opts.Attrs.switchDirection)===n[1],i=e.getCurrentImage(),s=i.image;null===i.set&&e.changeSet(0),null===s&&(s=0,e.changeImage(s)),e.changeImage(s+(r?1:-1)),t.preventDefault()},_onLastImage:function(e,r){if(null!==this._elems.Controls){var i=this._Elems.Controls,s=this._Opts,o=s.cssClss.disabledControl,a=s.Attrs.switchDirection,l=t.map(n,function(t,n){return(0===n?r:e)?t:null});i.each(function(){var n=r&&e||-1!==l.indexOf(this.getAttribute(a));t(this).toggleClass(o,n)})}},_onImageChange:function(){this._elems.Controls&&this._Elems.Controls.removeClass(this._Opts.cssClss.disabledControl)}}}(),a,null,"GalleryControls")}}),o("GalleryControls",{acceptTypes:["Gallery"]})}(window.jQuery||window.$,window,window.ru.mail.cpf,window.DEBUG)},125:function(t,e){!function(t,e,n){var r=n.Basic,i=n.Modules,s="WritableGalleryPreviews",o=r.Constructors.getView(function(){function t(t){var e,n,r=this._previewsVersion,i=[];if(!isNaN(r)&&null!==r)for(var s=0;s<t.length;s++)e=t[s].versions[r],n=null,e?n=e.src:!0===this._Opts.ignoreVersionMiss&&(n="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),n&&i.push(n);return i}function n(n){var r=t.call(this,n),i=e.document.createElement("div");return i.innerHTML=this._Opts.Templates.previews({previews:r,current:this._Model.getCurrentImage().image}),i.childNodes}function r(){var t=this._Model._getSetImages(this._imagesSet),e=this._elems,r=e.previewsCont;t&&t.length>1&&(r.html(n.call(this,t)),e.Preview=r.find(this._Opts.cssSels.Main.Preview))}return{_Handlers:{model:{setchange:"_onSetChange"}},_Init:function(){var t=this._Opts,e=t.imagesSet;if(this._imagesSet=e=null===e?e:1*e,this._drawnSet=e||this._Model.getCurrentImage().set,this._previewsVersion=1*t.previewsVersion,isNaN(this._imagesSet))throw new TypeError('Wrong type of "imagesSet" option');r.call(this)},_onSetChange:function(t,e){var n=this._imagesSet;(null===n&&this._drawnSet!==e||n===e)&&(this._drawnSet=e,r.call(this))}}}(),{cssSels:{Main:{previewsCont:null}},previewsVersion:2,ignoreVersionMiss:!1,Templates:{previews:null}},i.GalleryPreviews,s);i[s]=o,r.moduleOpts.setParams(s,{acceptTypes:"Gallery"})}(window.jQuery,window,window.ru.mail.cpf)},126:function(t,e){!function(t,e,n){var r=n.Basic;r.Constructors.addPlugin("PopupGalleryView",function(){return{_initPopup:function(){return n.Tools.initModule(["GalleryControls",this._opts.controlsExt],this._elems.parent,null,null,[{type:"Gallery",instance:this._model}]),this._super.apply(this,arguments)}}}(),{controlsExt:"PopupGalleryView"},"Controls")}(window.jQuery,window,window.ru.mail.cpf)},127:function(t,e){!function(t,e,n){"use strict";var r=n.Basic.Constructors.addPlugin,i=n.Basic.debounce,s=n.Tools.initModule;r("PopupGalleryView",function(){function t(){var t=this._model.getCurrentImage(),e=t.setLength>1&&this._previews&&this._previews._Elems.Preview.length>0;this._opts.cssClss.hasPreviews?this._elems.parent.toggleClass(this._opts.cssClss.hasPreviews,e):this._elems.previewsCont.toggle(e)}function e(){var t=this._Elems.previewsCont,e=this._model.getCurrentImage(),n=this._previewsSlider;if(!n&&e.setLength>1&&t&&t.length&&(this._previews=s(["WritableGalleryPreviews",this._opts.previewExt],t,null,null,[{instance:this._model,type:"Gallery"}]),n=this._previewsSlider=s(["Slider",this._opts.previewSliderExt],t))){var r=i(n.update.bind(n,!0,!1,!0),500);r(),n.getFrames().find("img").each(function(){this.complete||(this.onload=r)})}}return{_Handlers:{model:{imagechange:function(t,e,n){var r=this._previewsSlider;this._isTargetImage(n)&&!this._setChanged&&r&&r.goToFrame(e,!this._state.visible)},setchange:function(n){this._isTargetImage(n)&&null!==this._Popup&&(this._previewsSlider?this._previewsSlider.update():e.call(this),t.call(this),this._setChanged=!0)}}},_initPopup:function(){return e.call(this),t.call(this),this._super.apply(this,arguments)},_showImageVersion:function(){this._super.apply(this,arguments),this._setChanged=!1},_processViewSizes:function(){var t=this._previewsSlider;this._super.apply(this,arguments),t&&t.update()}}}(),{cssSels:{Main:{previewsCont:null}},cssClss:{hasPreviews:null},previewSliderExt:"PopupGalleryViewPreviews",previewExt:"PopupGalleryView"},"SliderPreviews")}(window.jQuery,window,window.ru.mail.cpf)},128:function(t,e){!function(t,e){"use strict";function n(t){var e=this._trigger.bind(this);o(t,"string")&&setTimeout(function(){i.replaceState(null,a,t),e("urlchange",t)},1)}function r(t,e){var r=this._Opts.urlReplace,i=t[r.urlProp],s=i&&"#"!==i?i:l;r.canReplace&&(n.call(this,s),r.changeOriginalUrl&&0===e&&(l=s))}var i=t.history,s=e.Basic,o=s.typeOf,a=t.document.title,l=t.location.href,u={urlReplace:{urlProp:"share_url",canReplace:!0,changeOriginalUrl:!1}};i.replaceState&&s.Constructors.addPlugin("PopupGalleryView",{_Events:["urlchange"],_Handlers:{model:{imagechange:function(t,e,n){this._isTargetImage(n)&&this._state.visible&&r.call(this,t,n)}},hide:function(){this._Opts.urlReplace.canReplace&&n.call(this,l)},show:function(){this._Opts.urlReplace.canReplace&&r.call(this,this._Model.getImageProps(),0)}}},u,"UrlReplace")}(window,window.ru.mail.cpf)},129:function(t,e){!function(t,e,n){var r=n.Basic;r.Constructors.addPlugin("PopupGalleryView",function(){function t(t){var n,i,s,o=this._shareButtons,a=this._opts.viewShares;o&&(n=t[a.urlProp],s=r.typeOf(n,"string")&&n.length>0,i=s||!0!==a.hideWhenNoUrl,i&&(n=s?n:e.location.href,o.updateElementsSet(this._getViewParent()||this._elems.sharesCont),o.setUrl2Share(n,{Title:t.title||t.description},!1)),this._opts.cssClss.hideShares?this._elems.sharesCont.toggleClass(this._opts.cssClss.hideShares,!i):this._elems.sharesCont.toggle(i))}return{_Handlers:{model:{imageready:function(e,n,r,i){this._isTargetImage(r,i)&&this._state.visible&&t.call(this,e)}},show:function(){t.call(this,this._model.getImageProps())}},_initPopup:function(){var t=this._elems.sharesCont;return t&&t.length&&(this._shareButtons=n.Tools.initModule(["Shares",this._opts.sharesExt],t,{getCntOnInit:!1})),this._super.apply(this,arguments)}}}(),{cssSels:{Main:{sharesCont:null}},cssClss:{hideShares:"hidden"},sharesExt:"PopupGalleryView",viewShares:{urlProp:"share_url",hideWhenNoUrl:!0}},"Shares")}(window.jQuery,window,window.ru.mail.cpf)},13:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(112);e.DEBUG=!1,e.prefixRangeAnswer="range_",e.errorRequired=function(){return"–í–æ–ø—Ä–æ—Å —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –æ—Ç–≤–µ—Ç–∞"},e.errorRange=function(t,e){return"–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç "+t+" –¥–æ "+e+" "+r.plural(e,["–≤–∞—Ä–∏–∞–Ω—Ç","–≤–∞—Ä–∏–∞–Ω—Ç–∞","–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤"])+" –æ—Ç–≤–µ—Ç–∞"},e.errorAtLeastOne=function(t){return"–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã "+t+" "+r.plural(t,["–≤–∞—Ä–∏–∞–Ω—Ç","–≤–∞—Ä–∏–∞–Ω—Ç–∞","–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤"])+" –æ—Ç–≤–µ—Ç–∞"},e.errorMinLength=function(t){return"–°–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å –º–∏–Ω–∏–º—É–º –∏–∑ "+t+" "+r.plural(t,["—Å–∏–º–≤–æ–ª–∞","—Å–∏–º–≤–æ–ª–æ–≤","—Å–∏–º–≤–æ–ª–æ–≤"])},e.errorMaxLength=function(t){return"–°–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å –º–∞–∫—Å–∏–º—É–º –∏–∑ "+t+" "+r.plural(t,["—Å–∏–º–≤–æ–ª–∞","—Å–∏–º–≤–æ–ª–æ–≤","—Å–∏–º–≤–æ–ª–æ–≤"])},e.errorLettersOnly=function(){return"–°–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã"},e.errorDigitsOnly=function(){return"–°–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã"},e.errorServer500=function(){return"–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –∏ –º—ã –¥–µ–ª–∞–µ–º –≤—Å—ë –≤–æ–∑–º–æ–∂–Ω–æ–µ –¥–ª—è –µ—ë –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É"}},130:function(t,e){!function(t,e,n){var r=n.Basic,i=n.Tools.Images,s=r.Constructors.addPlugin,o={frameParams:{scrolling:"no",frameborder:0}};s("ImageView",function(){return i._addTypes({iframe:{exts:["html"],canPreload:!1}}),{_setImageToView:function(e,n,r){var i,s=this._opts;return r=this._super.apply(this,arguments),"iframe"===e.type&&(i=this._Model.getFromCache(e.src),i||(i=t("<iframe />").attr(s.frameParams).attr("src",e.src),this._Model.addToCache(i,e.src)),i.css(n).appendTo(r)),r}}}(),o,"Iframe")}(window.jQuery||window.$,window,window.ru.mail.cpf)},131:function(t,e){!function(t,e,n){"use strict";function r(){return!0}function i(t){if(a(t,"string"))return t;var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=t[n]);return e}function s(t){var e,r=t.split("."),i="";return r.forEach(function(t){t=i+t,e=n.Basic.Extend(!0,e||{},n.Basic.moduleOpts.get(t)),i=t+"."}),e}var o=n.Basic,a=o.typeOf,l={},u={cssSels:{Main:{container:".js-popup_banner"}},cssClss:{show:"viewbox__slide_side_show",loading:"viewbox__slide_side_loading",loadFail:""},bannerParams:{},bannerModuleName:"Slot",hasPlaceForBanner:r,minReloadDelay:1e3,showOnInit:!1,reloadOnRerun:!0,continuousMode:!0},c=function(){function t(){for(var t="",e=0;e<3;e++)t+=Math.round(1e10*Math.random()).toString(36);return t}var e={};return function(){for(var n=t();e[n];)n=t();return e[n]=!0,n}}(),h=function(t){var e,n=this._opts.cssClss,r=!0,i="";if(this._state.stateName!==t){switch(t){case"load":e="loading",i=n.loading;break;case"show":e="show",i=n.show;break;case"fail":e="loadFail",i=n.loadFail;break;case"hide":e="hide";break;default:r=!1}r&&(this._state.stateName=t,this._elems.parent.removeClass([n.show,n.loading,n.loadFail].join(" ")).addClass(i),this._trigger(e,{type:e}))}},p=function(){var t=this._state,e=t.loadPromise;return h.call(this,"load"),e||(e=n.Tools.loadSlot(d.call(this)).then(function(){t.loaded=!0}),f.call(this)),e},d=function(){var t=this._opts,e=s(t.bannerModuleName),n=e.slot||{},r=n.params||{};return{slot:t.bannerParams.id,failTimeout:e.failTimeout,blockSel:"#"+this._state.id,slotParams:{sz:n.sitezone||"",region:n.region||"",siteId:n.siteId||"",params:r},mimic:e.mimic}},f=function(){var t=this._state,e=l[t.cacheId];e||(e={timeout:null,canReload:!0},l[t.cacheId]=e),e.timeout&&clearTimeout(e.timeout),e.canReload=!1,e.timeout=setTimeout(function(){e.canReload=!0},this._opts.minReloadDelay)},m=o.Constructors.getView({_Events:["show","hide","loadFail","loading"],_Init:function(){var t=this._opts,e={loaded:!1,canReload:!0,id:c()};t.continuousMode&&(e.cacheId=i(t.bannerParams)),this._state=e,this._elems.container.prop("id",e.id),t.showOnInit&&this.show()},show:function(){if(!this.canShow())return void(this._opts.reloadOnRerun&&this.hide());var t=h.bind(this),e=this._state;e.loaded?this._opts.reloadOnRerun?this.reload():t("show"):p.call(this).then(function(){t(e.loaded?"show":"hide")},function(){t("fail")})},reload:function(){var t=this._state;t.loaded=!1,t.loadPromise=null,this.clear(),this.show()},hide:function(){h.call(this,"hide")},clear:function(){this._elems.container.children().detach()},canShow:function(){return!!this.hasPlaceForBanner()&&(!!this._state.loaded||(!this._opts.continuousMode||this.canReload()))},canReload:function(){return!this._opts.continuousMode||(!l[this._state.cacheId]||l[this._state.cacheId].canReload)},hasPlaceForBanner:function(){var t=this._opts.hasPlaceForBanner;return a(t,"function")||(t=r),t.call(this)}},u,null,"Banner");e.getNameSpace("Modules",n).Banner=m}(window.jQuery,window,window.ru.mail.cpf)},132:function(t,e){!function(t){"use strict";var e=t.Basic.moduleOpts.setParams;e("Gallery",{options:{imageProps:["original","download","share_url","description","title","galleryId","dots"],preloadDepth:2,_Handlers:{init:function(){setTimeout(function(){this.changeSet(0)}.bind(this))}},urlGallery:"/ajax/gallery/",gallerySplashCount:3,prepareGalleryData:function(t){var e=t.gallery;e&&(t.images=e)}}}),e("Gallery.Shot",{options:{gallerySplashCount:0}}),e("Gallery.SinglePhoto",{options:{gallerySplashCount:0}}),e("Gallery.Recipe",{options:{gallerySplashCount:0}})}(window.ru.mail.cpf)},133:function(t,e){!function(t){"use strict";var e=t.Basic.moduleOpts.setParams,n=t.Basic.Extend,r=t.Basic.Constructors._repo.get("GalleryPreviews");e("GalleryPreviews",{acceptTypes:["Gallery"],initializer:function(t,e,i,s){return s&&"images"in s&&(t.imagesSet=i.addImagesSet(n(!0,{},s))),new r(t,e,i)},options:{cssSels:{Main:{Preview:".js-preview-list__item"}},cssClss:{currentPreview:"cols__column_thumb_active"},Attrs:{imageVersions:["data-original","data-preview"],imageProps:{description:"data-descr",title:"data-title"}}}})}(window.ru.mail.cpf)},134:function(t,e){!function(t,e){"use strict";var n=e.Basic.Constructors.getView,r=e.Basic.moduleOpts.setParams;e.Tools.initModule;n({_Init:function(){var e=this._Elems.Parent.data("PopupGalleryView"),n=this._Opts.backUrl,r=this._Opts.currentImg;e&&n&&e.on("hide",function(){this.showLoading(),requestAnimationFrame(function(){t.location=n+"#photo"},this._Elems.Parent)}),r&&(this._Model.changeSet(0),this._Model.changeImage(parseInt(r,10)))}},{currentImg:null,backUrl:null},null,"GalleryShot"),r("GalleryShot",{acceptTypes:"Gallery",paramAttrs:{currentImg:"data-current-id",backUrl:"data-redirect-url"}}),r("PopupGalleryView",{options:{showOnChange:!0}})}(window,window.ru.mail.cpf)},135:function(t,e){!function(t,e,n){"use strict";function r(t,e){return t.replace(/(?:\/virtual_gallery(?:\/\d+)?)?\/?([?#]|$)/,"/virtual_gallery/"+e+"$1")}var i=n.Basic.moduleOpts.setParams,s=n.Tools.getTemplate;i("PopupGalleryView",{options:{cssSels:{Main:{imageView:".js-photo",imageNum:".js-photo_num",imagesTotal:".js-photos_cnt",previewsCont:".js-photo_slider",sizeCont:".js-photo_container",sharesCont:".js-photo_shares"},sizeReference:".js-size-reference",setProps:{title:".js-photo_title",note:".js-photo_note"}},cssClss:{Loading:"viewbox__slide_loading",Error:"viewbox__slide_error",hasPreviews:"viewbox_list",hideShares:"viewbox__slides_hide-shares"},showOnChange:!0,templates:{block:s("ct-viewbox-popup.xml"),frames:s("ct-viewbox-slides.xml"),splash:{articles:s("ct-viewbox-recommended.xml"),galleries:s("ct-viewbox-more.xml"),topics:s("ct-viewbox-forum.xml")}},splashBannerParams:{slotId:11269},setContSize:!1,showBanner:!0,imagesSet:null,imagesVersion:0,resizeView:!0,_Handlers:{model:{imageready:function(){var t=n.Tools.Counters.hitCntrsBlck,i=[];return function(n,s,o,a){if(n&&this._isTargetImage(o,a)&&this._Model.getCurrentImage().image===s&&this._state.visible){var l={};if(n.galleryId){if(-1===i.indexOf(n.galleryId))return void(i=i.concat([n.galleryId]));l.url=r(e.location.href,n.galleryId)}t(l)}}}(),setchange:function(t){var e=(t||{}).urlSplash;e&&this._model.setSplashUrl(e)}}}}}),i("PopupGalleryView.Article",{options:{_plugins:{Controls:!0,ImageViewSlider:!0,PopupImageSlider:!0,SliderPreviews:!0}}}),i("WritableGalleryPreviews.PopupGalleryView",{options:{previewsVersion:1,Templates:{previews:s("ct-viewbox-previews.xml")},cssSels:{Main:{previewsCont:".js-photo_slider_cont",Preview:".js-photo_preview"}},cssClss:{currentPreview:"viewbox__preview_active"}}}),i("Swipe.ImageViewSlider",{options:{}})}(window.jQuery,window,window.ru.mail.cpf)},136:function(t,e){!function(t,e,n){"use strict";n.Basic.moduleOpts.setParams}(window.jQuery,window,window.ru.mail.cpf)},137:function(t,e){!function(t,e,n){"use strict";var r=n.Basic.moduleOpts.setParams,i=n.Tools.initModules,s=!0;r("Banner.PopupGalleryView",{options:{_Handlers:{show:function(){i(this._elems.container)}},showOnInit:!1,minReloadDelay:2e3,bannerParams:{id:"1151",dataType:"rb"},bannerModuleName:"SlotView.mimic.1151",hasPlaceForBanner:function(){return!s||(s=!1,!1)}}})}(window.jQuery||window.$,window,window.ru.mail.cpf)},138:function(t,e,n){"use strict";var r=n(29),i=(n.n(r),n(63)),s=(n.n(i),n(64)),o=(n.n(s),n(65)),a=(n.n(o),n(68)),l=(n.n(a),n(69)),u=(n.n(l),n(70)),c=(n.n(u),n(71)),h=(n.n(c),n(66)),p=(n.n(h),n(67)),d=(n.n(p),n(72)),f=(n.n(d),n(73)),m=(n.n(f),n(51)),g=(n.n(m),n(60));n.n(g);window.ru.mail.asyncTemplates.prefetch("/bem/lady/web/web.bundles/ct-popup-warning/ct-popup-warning.xml.js")},14:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(32);e.init=r.init;var i=n(11);e.setConfig=i.setConfig;var s=n(17);e.registerComponent=s.registerComponent;var o=n(16);e.initAllComponents=o.initAllComponents,function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(39))},152:function(t,e,n){"use strict";n(153)},153:function(t,e,n){"use strict";var r=n(14),i=(n.n(r),n(104));n.n(i);!function(t,e){function n(t){(new Image).src=t+"?r="+Math.round(1e11*Math.random())}var i=e.Tools,s=i.initModules,o=i.getTemplate;Object(r.setConfig)("SurveyComponent",{options:{style:{offsetTop:0},template:r.TemplateComponent.getTemplate(o("ct-survey.xml")),onFinish:function(e,r){s(t(r));var i=r.getAttribute("data-finish-pixel-url");i&&n(i)}}}),Object(r.init)()}(window.$||window.jQuery,window.ru.mail.cpf)},16:function(t,e,n){"use strict";function r(t){var e=t.getAttribute(p.DOM_DATA_COMPONENT_STATE_ATTR)||"{}";try{return JSON.parse(e)||{}}catch(t){return d.print.warn('Unable to parse data "'+e+'"'),{}}}function i(t){var e=r(t);try{t.removeAttribute(p.DOM_DATA_COMPONENT_STATE_ATTR)}catch(t){d.print.warn('Unable to remove "'+p.DOM_DATA_COMPONENT_STATE_ATTR+'" attribute from node')}return e}function s(t){var e=/^([\w\.]+)\s+as\s+(\w+)$/gm,n=e.exec(t);return null!==n?{name:n[1].trim(),alias:n[2].trim()}:{name:t.trim(),alias:null}}function o(t,e){var n=s(e),r=n.name.split(h.COMPONENT_NS_DELIMITER),o=r[0],a=r.slice(1),l=f.getConfigCollapsed(n.name),p=c.getComponent(o);if(void 0===p)return d.print.warn("Component '"+o+"' was not found"),null;var m=i(t),g=m[o]||{},_=u.deepMerge({},l.initialState,g.state),v=u.deepMerge({},l.options,g.options);return new p(a.join(h.COMPONENT_NS_DELIMITER),v,_).mount(t).dispatch(n.alias||o)}function a(t){var e=t.getAttribute(p.DOM_DATA_COMPONENT_NAME_ATTR);if(!e)return[];for(var n=e.split(h.COMPONENT_DELIMITER),r=[],i=0,s=n;i<s.length;i++){var a=s[i],l=o(t,a);null!==l&&r.push(l)}return r}function l(t){if(!t)throw new Error("$root element not found");var e=t.querySelectorAll(p.DOM_DATA_COMPONENT_SEL),n=Array.prototype.slice.call(e);t.getAttribute(p.DOM_DATA_COMPONENT_NAME_ATTR)&&n.unshift(t);for(var r=[],i=0,s=n;i<s.length;i++){var o=s[i],l=a(o);r=r.concat(l)}return r}Object.defineProperty(e,"__esModule",{value:!0});var u=n(2),c=n(17),h=n(1),p=n(10),d=n(0),f=n(11);e.initComponents=a,e.initAllComponents=l},17:function(t,e,n){"use strict";function r(t){return(t.toString().match(/function (\w*)/)||[])[1]}function i(t){var e=t.registryName;if(!e){var n=r(t);throw new Error(o.format('Static property "registryName" is not defined for component "'+n+'"').error().str())}if(e in a)throw new Error(o.format("Component with name '"+e+"' is already registered").error().str());o.print.log('Registering "'+e+'"'),a[e]=t}function s(t){return a[t]}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),a={};e.registerComponent=i,e.getComponent=s},18:function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),s={templatesExt:".xml.js",templatesPath:"/bem",templatesNS:"fest"},o=function(){function t(){this._store=new i.Store("MPF_GLOBAL",s,this.dispatchStore.bind(this)),this._store.dispatch()}return t.prototype.dispatchStore=function(){},t.prototype.getState=function(){return this._store.read()},t.prototype.update=function(t){this._store.put(function(e){return r({},e,t)}),this._store.dispatch()},t}();e.ApplicationSettings=o,e.applicationSettings=new o},19:function(t,e,n){"use strict";function r(t){for(var e={},n={},r=0,i=Object.keys(t);r<i.length;r++){var s=i[r];"@"===s.charAt(0)?e[s]=t[s]:n[s]=t[s]}return{component:n,shared:e}}var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),o=n(35),a=n(37),l=!1,u={},c=new o.Emitter,h=new a.DevToolsExtension,p=function(){function t(t,e,n){var o=this;this._id=t,this._events=[],this._EVENT_CHANGE="CHANGE:"+t,this._EVENT_INIT="INIT:"+t;var a=r(e).component;if(u[t])return void s.print.warn("'"+t+"' is already connected");this.bind(n),u[t]=a,c.emit(this._EVENT_INIT,u[t]),l&&(s.print.groups("Store ("+this._EVENT_INIT+")",{initial:[a]}),h.subscribe(this._id,function(t){var e=o.read(),n=JSON.parse(t.state)[o._id];c.emit(o._EVENT_CHANGE,n,e),u[o._id]=n}),h.send(this._EVENT_INIT,i({},u)))}return t.hasEntity=function(t){return t in u},t.prototype.destroy=function(){var t=this;this._events.forEach(function(e){c.removeListener(t._EVENT_CHANGE,e)}),l&&h.remove(this._id),delete u[this._id]},t.prototype.dispatch=function(){c.emit(this._EVENT_CHANGE,u[this._id])},t.prototype.put=function(t){var e=this.read(),n=t(this.read()),o=r(e).component,a=r(n).component,p=Object.keys(o),d=Object.keys(a);0===p.length&&0===d.length||(u[this._id]=a,c.emit(this._EVENT_CHANGE,a,e),l&&(s.print.groups("Store ("+this._EVENT_CHANGE+")",{prev:[e],next:[a]}),h.send(this._EVENT_CHANGE,i({},u))))},t.prototype.read=function(){var t=u[this._id];return i({},t)},t.prototype.bind=function(t){this._events.push(t),c.on(this._EVENT_CHANGE,t)},t}();e.Store=p},2:function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(33)),r(n(34))},20:function(t,e,n){"use strict";function r(t){return"["+d.DOM_DATA_COMPONENT_EL_ATTR+'*="'+t+p.COMPONENT_EL_DELIMITER+'"]'}function i(t){return"["+d.DOM_DATA_COMPONENT_BIND_ATTR+'*="'+t+p.COMPONENT_DATA_BIND_DEF_DELIMITER+'"]'}function s(t){return function(t,e,n){}}function o(t,e,n){}var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(40),u=n(41),c=n(21),h=n(0),p=n(1),d=n(10);e.DOMEvent=s,e.DOMBind=o;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._events={},e}return a(e,t),Object.defineProperty(e.prototype,"$",{get:function(){if(!this._$root)throw new Error(h.format('Component "'+this.identity+'" not mounted').error().str());return this._$root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$elements",{get:function(){return this._collector.group(this.$,this.alias)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){null!==this._unbindEvents&&(this._unbindEvents(),this._unbindEvents=null),t.prototype.reset.call(this)},e.prototype.getElements=function(t){return this._collector.elements(this.$,t,this.alias)},e.prototype.mount=function(t){return this._$root||(this._$root=t),this},e.prototype.preDispatch=function(){var t=this;this._collector=new c.Collector(r(this.alias),d.DOM_DATA_COMPONENT_EL_ATTR);var e=u.eventsBinder(this.$,function(e){return t._collector.elements(t.$,e,t.alias)});this._unbindEvents=e(this._events),u.dataBinder(i(this.alias),d.DOM_DATA_COMPONENT_BIND_ATTR)(this,this._store.bind.bind(this._store),this.getState.bind(this))},e.prototype.postDispatch=function(){h.print.groups("Component ("+this.identity+")",{$:[this.$,this.$elements],options:[this.options],state:[this.getState()]})},e}(l.Component);e.DOMComponent=f},21:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(){function t(t,e){this.elSel=t,this.attrSel=e}return t.prototype.getName=function(t,e){var n=t.getAttribute(this.attrSel);return"string"==typeof n&&e?n.replace(""+e+r.COMPONENT_EL_DELIMITER,""):n},t.prototype.group=function(t,e){for(var n={},r=t.querySelectorAll(this.elSel),i=Array.prototype.slice.call(r),s=0,o=i;s<o.length;s++){var a=o[s],l=this.getName(a,e);null!==l&&(n[l]||(n[l]=[]),n[l]=n[l].concat(a))}return n},t.prototype.elements=function(t,e,n){var r=this,i=t.querySelectorAll(this.elSel);return Array.prototype.slice.call(i).filter(function(t){return r.getName(t,n)===e})},t}();e.Collector=i},22:function(t,e,n){"use strict";function r(t){var e,n=t.nodeName.toLowerCase(),r=a[n];return r&&void 0!==(e=r.getVal(t))?e:(e=t.value,"string"==typeof e?e.replace(/\r/g,""):null===e?void 0:e)}function i(t){throw new Error("to be done")}Object.defineProperty(e,"__esModule",{value:!0});var s=n(47),o=n(23),a={option:{getVal:function(t){var e=t.getAttribute("value");return null!==e?e:o.stripAndCollapse(o.getText(t))}},select:{getVal:function(t){for(var e=[],n=t.selectedIndex,i="select-one"===t.type,o=i?n+1:t.options.length,a=n<0?o:i?n:0;a<o;a++){var l=t.options[a],u=l.selected||a===n,c=l.disabled,h=l.parentNode,p=h.disabled,d=s.isNodeName(h,"optgroup");if(u&&!c&&(!p||!d)){var f=r(l);if(i)return f;e.push(f)}}return e},setVal:function(t,e){for(var n,r=[e],i=t.options.length;i--;){var s=t.options[i];(s.selected=-1!==r.indexOf(a.option.getVal(s)))&&(n=!0)}return n||(t.selectedIndex=-1),r}}};e.getValue=r,e.setValue=i},220:function(t,e,n){"use strict";n(52),n(123),n(86),n(152)},23:function(t,e,n){"use strict";function r(t){var e,n=t.nodeType,i="",s=0;if(n){if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=r(t)}else if(3===n||4===n)return t.nodeValue}else for(;e=t[s++];)i+=r(e);return i}function i(t){return(t.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")}Object.defineProperty(e,"__esModule",{value:!0}),e.getText=r,e.stripAndCollapse=i},24:function(t,e){!function(t,e,n){"use strict";var r=n.Basic,i={cssSels:{Main:{slider:".js-compare__separator",compareRegion:".js-compare__item",compareContent:".js-compare__size",sliding:".js-compare__sliding"}},cssClss:{animated:"compare__item_animated"},startOffset:"50",isVertical:!1},s=function(){function t(t,e){t.removeClass(e),this._state.animated=!1,this._swipe.pause(!1)}function r(t){return{x:t.pageX||t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:t.pageY||t.clientY+document.body.scrollTop+document.documentElement.scrollTop}}function i(t){if(!this._state.animated){if(!this._state.click)return void(this._state.click=!0);var e=this._elems.compareRegion.eq(0),n=this._opts.cssClss.animated;n&&(e.addClass(n).one(c,this.onAnimationEnd),this._swipe.pause(!0),this._state.animated=!0),o.call(this,r(t.originalEvent||t)[this._opts.isVertical?"y":"x"])}}function s(t,e){this._elems.sliding[t](e+"%")}function o(t){var n,r,i,o=!this._opts.isVertical,a=this._elems.parent,l=this.getOffset();o?(n="width",l=l.left):(n="height",l=l.top),r=a[n](),i=Math.min((t-l)/r*100,100),i==this._state.offset&&e.requestAnimationFrame(this.onAnimationEnd),this._state.offset=i,s.call(this,n,i)}function a(){this._elems.compareContent.css({width:"",height:""}),this._elems.parent.height(""),this._elems.sliding[this._opts.isVertical?"height":"width"]("")}function l(){a.call(this);for(var t,e,n,r,i=!this._opts.isVertical,s=this._elems.compareRegion.get(0).getBoundingClientRect(),o=this._elems.compareRegion.get(1).getBoundingClientRect(),l=this._elems.parent,u=["width","height"],c=0;c<u.length;c++)r=0===c,e=u[c],t=r===i,n=Math[t?"min":"max"](o[e],s[e],l[e]()),!r&&i?l[e](n):this._elems.compareContent[e](n)}function u(){var t=this._opts.isVertical?1:0;this._swipe=n.Tools.initModule("Swipe",this._elems.parent,{targetAxis:this._opts.isVertical?"y":"x",resetDelta:!0,_Handlers:{start:function(e,n){this._state.startFrom=n.from[t]}.bind(this),move:function(e){o.call(this,this._state.startFrom+e[t])}.bind(this),end:function(){this._state.startFrom=null,this._state.click=!1}.bind(this)}})}var c="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend";return{_Handlers:{dom:{"resize:window":function(){this.fixSizes()},click:i}},_Init:function(){var n=this._elems.compareRegion,r=this._opts.cssClss.animated;2!==n.length&&e.console.error("Wrong compare elems count"),r&&(this.onAnimationEnd=t.bind(this,n.eq(0),r)),this._state={animated:!1,startFrom:null,click:!0,offset:this._opts.startOffset};var i=n.find("img");i.length?Promise.all(i.toArray().map(function(t){return!0===t.complete?Promise.resolve():new Promise(function(e,n){t.onload=e,t.onerror=n})})).then(this.fixSizes.bind(this)):this.fixSizes.call(this),u.call(this)},getOffset:function(){var t=this._elems.parent.get(0).getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},fixSizes:function(){l.call(this),s.call(this,this._opts.isVertical?"height":"width",this._state.offset)}}}(),o=r.getView(s,i,null,"CompareSlider");n.Basic.moduleOpts.setParams("CompareSlider",{paramAttrs:{startOffset:"data-startfrom",isVertical:"data-vertical"}}),r.Extend(e.getNameSpace("Modules",n),{CompareSlider:o})}(window.jQuery||window.$,window,window.ru.mail.cpf)},26:function(t,e,n){"use strict";function r(t,e){return e.filter(function(e){return""+e.id==""+t})[0]}function i(t,e){return e.filter(function(e){return e.id in t&&"0"!==t[e.id]})}function s(t,e){var n=-1;return(t||[]).some(function(t,r){var i=e(t);return i&&(n=r),i}),n}function o(t,e){var n=""+t;return s(e,function(t){return""+t.id===n})}function a(t,e){return(t||[]).reduce(function(t,n){return t[n]=e,t},{})}Object.defineProperty(e,"__esModule",{value:!0}),e.findItem=r,e.findItems=i,e.findIndex=s,e.itemIndex=o,e.mapToDict=a},27:function(t,e,n){"use strict";function r(t,e){return"q_"+t+(e?"_":"")}function i(t,e,n){var r=c(t,e,n);if(!r)return l.log("–Ω–µ –Ω–∞—à–ª–∏ nextId"),null;var s=o.findItem(r,e);return s?a.checkIfCanShowQuestion(s,n)?s:i(o.itemIndex(s.id,e),e,n):(l.log("–Ω–µ –Ω–∞—à–ª–∏ –≤–æ–ø—Ä–æ—Å —Å id "+r),null)}function s(t){return t.reduce(function(t,e){return e.answers&&(e.answersById=s(e.answers)),t[e.id]=e,t},{})}Object.defineProperty(e,"__esModule",{value:!0});var o=n(26),a=n(115),l=n(28),u=function(t){return!!t&&(!Array.isArray(t)||0!==t.length)},c=function(t,e,n){if(e.length===t+1)return"";var i=e[t],s=i.answers,o=i.id,a=i.options;if(a){var c=a.next;if(c&&u(n[r(o,!0)]))return l.log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–∞–ª —Å–≤–æ–π –æ—Ç–≤–µ—Ç, –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ—Ö–æ–¥–∏–º —Å—é–¥–∞:",c),c}var h=n[r(o)];if(h){var p,d=Array.isArray(h);if(s.some(function(t){var e=t.next,n=t.id,r=d?-1!==h.indexOf(""+n):!(!e||!h[n]);return r&&(p=e),r}),p)return l.log("–ù–∞—à–ª–∏ —Å–ª–µ–¥—É—é—â–∏–π id –≤ –æ–ø—Ü–∏—è—Ö –æ—Ç–≤–µ—Ç–æ–≤:",p),p}var f=e[t+1].id;return l.log("–ë–µ—Ä–µ–º —Å–ª–µ–¥—É—é—â–∏–π –ø–æ –ø–æ—Ä—è–¥–∫—É –≤–æ–ø—Ä–æ—Å:",f),f};e.createQuestionKey=r,e.findNextQuestion=i,e.mapToDictById=s},28:function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.DEBUG&&console.log.apply(console,s([">>>"],t))}var i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(13);e.log=r},29:function(t,e){!function(t){"use strict";var e=t.getNameSpace,n=e("ru.mail.cpf",t),r=n.Basic,i=r.typeOf;r.Extend(e("Types.Object",n),function(){return{hasKeys:function t(e,n,r){var s,o,a=null==n;if(!a&&(r=i(r,"function")?r:Object.prototype.hasOwnProperty,!a))if(Array.isArray(n))for(s=0;(o=n[s++])&&(a=r.call(e,o)););else if(i(n,"object")){for(var l in n)if(!(a=r.call(e,l)&&t(e[l],n[l],r)))break}else a=r.call(e,n);return a},Equals:function t(){var e,r,s,o,a,l,u,c,h=Array.prototype.slice.call(arguments),p=[],d=!0,f=0;for(i(h[0],"array")&&(e=h.shift()),s=h.length;s--;){if(r=h[s],!i(r,"object"))return!1;for(var m in r)r.hasOwnProperty(m)&&p.indexOf(m)<0&&!(e&&e.indexOf(m)<0)&&p.push(m)}if(!p.length)return!0;for(;d&&(l=p[f++]);)for(s=0;s<h.length;s++){if(r=h[s],!r.hasOwnProperty(l)){d=!1;break}if(0===s)o=r[l],c=i(o);else if(a=r[l],(u=i(a))!==c||("array"==u?!n.Types.Array.isEqual(o,a):"object"==u?!t(o,a):o!=a)){d=!1;break}}return d}}}())}(new Function("return this")())},30:function(t,e){!function(t,e,n){"use strict";var r=n.Basic.typeOf,i=n.Basic.Extend,s=n.Basic.Constructors.getView,o=n.Basic.moduleOpts.setParams,a=e.getNameSpace,l={cssSels:{Main:{Btns:".js-shares_btn",Cnts:".js-shares_cnt",Total:".js-shares_total",countCont:null}},cssClss:{hideCount:"hidden_all",hidden:"hidden_all"},showCnt:!0,getCntOnInit:!0,typeAttr:"data-share",urlTypeParam:"social",url2Share:null,Counters:null,addParams:null,shareParams:{Title:null,Description:null,Image:null},prepareParams:function(t,e){var n=t.Tweet;"tw"==e&&n&&(t.Title=n)},ignoreMetaParams:navigator.userAgent.toLowerCase().indexOf("msie")>-1},u={my:{baseUrl:"//connect.mail.ru/",url:"share",count:"share_count?callback=1",countUseCallback:!0,getCount:function(t,e){var n;return t&&(n=t[e])&&n.shares||0},sizes:[550,340],params:{url:"share_url",title:"title",description:"description",image:"imageurl"},countParams:{url:"url_list",callback:"func"}},ok:{baseUrl:"//connect.ok.ru/",url:"dk?st.cmd=WidgetSharePreview",count:"dk?st.cmd=extLike",countUseCallback:!1,getCount:null,sizes:[550,320],params:{url:"st.shareUrl"},countParams:{url:"ref",id:"uid",callback:"callback"},serializeOptions:{getParamName:function(t,e){return t+"."+e}}},fb:{baseUrl:null,url:"//www.facebook.com/sharer.php",count:"//graph.facebook.com/",countUseCallback:!0,getCount:function(t){var e=0;return t&&t.share&&(e=t.share.share_count||e),e},sizes:[660,370],params:{url:"u"},countParams:{url:"id",callback:"callback"},addParams:{s:100}},vk:{baseUrl:"//vk.com/",url:"share.php",count:"share.php?act=count&format=json",countUseCallback:!1,getCount:null,sizes:[660,390],params:{url:"url",title:"title",description:"description",image:"image"},countParams:{url:"url",id:"index",callback:"callback"}},tw:{baseUrl:null,url:"https://twitter.com/share",count:null,countUseCallback:!0,getCount:null,sizes:[550,300],charsLimit:114,params:{url:"url",via:"via"},countParams:{url:"url",callback:"callback"}}},c=s(function(){var s=n.Types.String,o=s.Url,l=/cl(?:n|b|s|r)/i,c={title:"Title",description:"Description",image:"Image"},h={title:100,descr:500},p=["url","image","title","description"],d=function(){var t={};return function(e,n,i){n=r(n,"undefined")?this.url2Share:n;var s,a=e+n,l=t[a];return!i&&l?l:(l=o.getAbs(n),"object"==r(this._opts.urlParams)&&(l=o.addParams(this._opts.urlParams,l)),s=this._opts.urlTypeParam,l&&e?(null!==s&&(l=o.addParam(l,s||e,s?e:null)),a&&(t[a]=l),l):null)}}(),f=function(t,e){var n;if(e){if("object"==(n=r(e)))return e[t];if("string"==n)return e}},m=function(){var s,l={},c=function(t,e,n){var i,o;s&&(i=s[t])&&r(o=i[e],"function")&&(i[e]=null,o.call(null,n))},h=function(){var t={updateCount:function(t,e){c.apply(null,["ok",t,e])}},n={Share:{count:function(t,e){c.apply(null,["vk",t,e])}}};e.ODKL=i(e.ODKL,t),e.VK=i(e.VK,n)},p=function(t,e){var n=l[t];return e=d.apply(this,[t,e]),n&&n[e]},f=function(t){var e,n=this._elemsByType[t],r=n.Count;r&&r.length&&(e=isNaN(e=p.call(this,t))?0:e,r.text(e),this._opts.cssClss.hideCount?n.countCont.toggleClass(this._opts.cssClss.hideCount,0===e):n.countCont.toggle(e>0))},m=function(t,e,n){var i=l[e];isNaN(t*=1)||(r(i,"object")||(l[e]=i={}),i[n]=t,this._trigger("typeCount",e,t),n===d.call(this,e)&&f.call(this,e))},g=function(t,e){var i,o;return r(s,"object")||(o=a("Instances",n),o.oShareCallbacks?s=o.oShareCallbacks:o.oShareCallbacks=s={}),(i=s[t])instanceof Array||(i=s[t]=[]),i.push(e)-1},_=function(e){var n=this,r=u[e];if(null!==r.count){var i,s=r.countParams,a=r.countUseCallback,l=d.call(this,e),c={};c[s.url]=l,a||(c[s.id]=g.apply(this,[e,function(t){m.apply(n,[t,e,l])}])),s.url&&(c[s.callback]="?"),i=o.addParams(c,(r.baseUrl||"")+r.count,r.serializeOptions),h(),t.getJSON(i,a?function(t){var i=r.getCount(t,l);m.apply(n,[i,e,l])}:null)}};return{getTypeCount:function(t,e){var n=p.call(this,t);return isNaN(n)||!0===e?_.call(this,t):f.call(this,t),n},initCbcks:h}}(),g=m.getTypeCount,_=function(){var t=this.Types;if(t)for(var e=0;e<t.length;e++)g.call(this,t[e])},v=function(t,e){return t&&(e=t.add(e)),e},w=function(){var e=this._elems.Cnts,n=this._elems.countCont,r=this._opts,i=r.typeAttr,s=this._elemsByType={},o=this.Types=[];this._elems.Btns&&this._elems.Btns.toArray().forEach(function(a,l){var u,c=t(a),h=c.attr(i)||c.data("shareType"),p=s[h]={};h&&(-1===o.indexOf(h)&&o.push(h),c.removeAttr(i).data("shareType",h),p.Btn=v(p.Btn,c),r.showCnt&&e&&(u=e.eq(l),u.length&&(p.Count=v(p.Count,u),p.countCont=v(p.countCont,n&&n.eq(l)||u))))})},y=function(){function n(){var e={};return t("meta",document.head).each(function(){var t,n=this.getAttribute("property")||this.getAttribute("name");n&&("description"===n||(t=n.split(":"))&&2===t.length&&"og"===t.shift())&&(e[t&&t.shift()||n]=this.getAttribute("content"))}),e}var a=function t(n){var r=this,i=this._Timers.ppCheckTimer;i&&(clearTimeout(i),this.ppCheckTimer=null,g.call(this,n,!0)),this._Timers.ppCheckTimer=setTimeout(function(){var i;r._Timers.ppCheckTimer=null;try{r.curWin.closed?(i=g.call(r,n,!0),r._trigger("windowClose",n,i)):t.call(r,n)}catch(t){e.console.error(t)}},500)},m=function(t){var e,o,a,l,p,d=i({},this._shareParams),f=this._opts,m=d.via,g=f.prepareParams,_=!0!==f.ignoreMetaParams,v={},w=!1;if(r(g,"function")&&g.call(this,d,t),_&&(e=n()),"tw"!=t)for(var y in c)c.hasOwnProperty(y)&&(o=d[c[y]]||_&&e[y])&&((a=h[y])&&o.length>a&&(a-=3,o=o.substr(0,a)+(" "!=o.charAt(a)?"...":"")),v[y]=o,w=!0);else w=!0,l=d.Title||document.title,l=l.replace(/"/g,""),p=u[t].charsLimit,m&&(v.via=m,w=!0,p-=11+m.length),l.length>p&&(l=s.cutBySpace(l,p-3)+"..."),v.text=l;return w?v:null},_=function(){var t={};return function(e){var n,i,s,o,a=t[e];return a||(n=u[e],i=this._opts.Counters,s=(n.baseUrl||"")+n.url,i&&(o=f(e,i))&&(o="//r.mail.ru/"+(r(o,"string")&&l.test(o)?"":"cln")+o),t[e]=a=o?o+"/"+s.replace(/^(http(s)?:)?\/\//i,""):s,a)}}(),v=function(t){var e,n,r,s,a=this._opts.addParams,l=d.call(this,t),c=u[t],h=c.params,g=c.serializeOptions||{},v=c.addParams,w=_.call(this,t),y={};if(!l)return null;r=m.call(this,t),s=null!==r,y.url=l,s&&i(y,r);for(var b=0;b<p.length;b++)if(e=p[b],n=y[e]){delete y[e];var P=h[e];P&&(w=o.addParam(w,P,n,g))}return v&&i(y,v),a&&i(y,f(t,a)),o.addParams(y,w,g)},w=function(t){for(var e,n,r,i=[],s=0;s<t.length;s++)e=t[s],n=s?"height":"width",r=s?"top":"left",i.push(n+"="+e,r+"="+Math.max(0,Math.round(screen[n]/2-e/2)));return i.join(",")};return function(t){var n,r=v.call(this,t),i=u[t];if(r&&i){if(n=this.curWin)try{n.close()}catch(t){e.console.error(t)}this.curWin=e.open(r,"share",w(i.sizes)+",personalbar=0,toolbar=0,scrollbars=1,resizable=1"),a.call(this,t)}}}();return{_Events:["typeCount","windowClose"],_Handlers:{dom:{"click:Main.Btns":function(e){e.preventDefault();var n=t(e.currentTarget);y.call(this,n.data("shareType"))}}},_Init:function(){this.url2Share=this._opts.url2Share||t(e.document.head).find("link[rel=canonical]").attr("href")||e.location.href,this._shareParams=this._opts.shareParams,this._Timers={},w.apply(this),this._opts.showCnt&&!0===this._opts.getCntOnInit&&_.apply(this)},setUrl2Share:function(t,e,n){var s;t&&r(t,"string")&&(this.url2Share=t,e&&(r(n,"undefined")||n?this._shareParams=i(!0,{},e):this._shareParams=i(!0,this._shareParams,e)),this._opts.showCnt&&((s=this._elems.countCont||this._elems.Cnts)&&(this._opts.cssClss.hideCount?s.addClass(this._opts.cssClss.hideCount):s.hide()),_.apply(this)))},updateElementsSet:function(t){this._elems=function(t,e,n){return t.Main&&e.length&&Object.keys(t.Main).forEach(function(r){n[r]||(n[r]=e.find(t.Main[r]))}),n}(this._opts.cssSels,t,{parent:t}),w.apply(this)}}}(),l,null,"Shares");o("Shares",{options:{_Handlers:{typeCount:function(t,e){var n=this._totalCount=this._totalCount||{};n[t]=e;var r=0;for(var i in n)n.hasOwnProperty(i)&&(r+=n[i]);this._elems.Total&&(this._elems.Total.text(r),this._elems.Total.toggleClass(this._opts.cssClss.hidden,r<=0))}}},paramAttrs:{shareParams:{Tweet:"data-twshare"},url2Share:"data-url2share"}}),i(!0,e.getNameSpace("Modules",n),{Shares:c})}(window.jQuery,window,window.ru.mail.cpf)},31:function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(45)),r(n(46)),r(n(22)),r(n(23)),r(n(48))},32:function(t,e,n){"use strict";function r(t){return new Promise(function(e,n){return l?(s.print.warn("MPF is already started"),e()):(t&&a.applicationSettings.update(t),l=!0,o.resolveConfigSetters().then(function(t){var n=function(){s.print.info("MPF init. Env: production"),i.initAllComponents(document.body),e()};"complete"===document.readyState?n():document.addEventListener("DOMContentLoaded",n)}))})}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),s=n(0),o=n(11),a=n(18),l=!1;e.init=r},325:function(t,e,n){"use strict";var r=n(326),i=(n.n(r),n(327)),s=(n.n(i),n(328)),o=(n.n(s),n(329)),a=(n.n(o),n(330));n.n(a)},326:function(t,e){!function(t,e,n){"use strict";function r(t){var e=p.indexOf(t)>-1;return e&&h&&localStorage.setItem(u,t),e}function i(t,e){var n=r(t);return n&&e(t),n}var s,o,a,l=n.Basic,u="ru.mail.cpf.deviceType",c=e.Modernizr,h=c.localstorage,p=["tablet","laptop"],d=n.Tools.PubSub;h&&"20150730"!==localStorage.getItem("ru.mail.cpf.deviceType.version")&&(localStorage.removeItem(u),localStorage.removeItem("ru.mail.cpf.pointerType"),localStorage.setItem("ru.mail.cpf.deviceType.version","20150730")),l.Extend(!0,n,{Tools:{checkDeviceType:function(){return a||(a=new Promise(function(n){c.touch||c.touchevents?(s=h&&localStorage.getItem(u),l.typeOf(s,"string")&&i(s,n)||(o=navigator.userAgent.toLowerCase(),o.indexOf("ipad")>-1||o.indexOf("iphone")>-1?i("tablet",n):t(e).one("mouseover mouseout",function(t){(t.fromElement||t.relatedTarget)&&i("laptop",n)}))):i("laptop",n)})),a},detectPointerType:function(){function r(t){w|=t,Object.keys(g).forEach(function(t){var n=g[t],r=w&n.detected^w;n.detected|=w,r&&Object.keys(f).forEach(function(t){f[t].id&r&&e.setTimeout(d.publish.bind(d,n.message,t))}),n.detected===m&&l(t)}),y(w),P()}function i(){e.DEBUG&&(this._touchStartTs=(new Date).getTime()),v=!0,r(f.touch.id)}function s(){!v&&c&&r(f.mouse.id)}function o(t){var e=navigator.userAgent.toLowerCase(),n=!(!~e.indexOf("ipad")&&!~e.indexOf("iphone")),r=0;if(n&&(r|=f.mouse.id),t^f.touch.id)if(n||"ontouchstart"in document.documentElement)t^=f.touch.id;else try{document.createEvent("TouchEvent"),t^=f.touch.id}catch(t){}return y(t),{detectedTypes:t,forceDetect:r}}function a(t,e){var n=o(w);w=n.detectedTypes,e.detected|=n.forceDetect,g[t]=e,P()}function l(t){t?delete g[t]:g={},P()}function u(t){var e=t?m:0;return(t||"").split(" ").filter(function(t){return t}).forEach(function(t){var n=f[t]?f[t].id:0;e&=~n}),e}var c,p=t(document.documentElement),f={mouse:{id:1,handlers:function(t){t=t?"on":"off",p[t]("mouseover mouseout mousemove click",s)}},touch:{id:2,handlers:function(t){t=t?"on":"off",p[t]("touchstart",i),p[t]("touchend",b)}},keyboard:{id:4,handlers:function(){}}},m=Object.keys(f).reduce(function(t,e){return t|f[e].id},0),g={},_=0;t(document).ready(function(){c=!0});var v,w=h&&localStorage.getItem("ru.mail.cpf.pointerType");w=w?parseInt(w,10):0;var y=function(t){return function(e){h&&e!==t&&(localStorage.setItem("ru.mail.cpf.pointerType",e),t=e)}}(w),b=n.Basic.debounce(function(){v=!1},2e3),P=function(t){return function(){var e=Object.keys(g).reduce(function(t,e){return m&~g[e].detected|t},0);(e&=~w)&f.mouse.id&&!(f.mouse.id&w)&&(e|=f.touch.id);var n=t&e^e,r=t&e^t;return Object.keys(f).forEach(function(e){var i=f[e];i.id&n?(i.handlers(!0),t|=i.id):i.id&r&&(i.handlers(!1),t&=~i.id)}),t}}(0);return function(t){var e="deviceDetect"+ ++_;return a(_,{detected:u(t),message:e}),r(w),{cancel:l.bind(null,_),message:e}}}()}})}(window.jQuery,window,window.ru.mail.cpf)},327:function(t,e){!function(t,e){var n,r,i,s=e.requestAnimationFrame,o=!1,a=0,l=0,u=0,c=null,h=0,p=null,d=function(t){l+=t,h+=2*(l-u),u=l},f=function(){if(p&&p.isAnimated)return a=-n.scrollTop(),void(h=.1);(h<-.1||h>.1)&&(a+=h,a>0?a=h=0:a<r&&(h=0,a=r),n.scrollTop(-Math.round(a)),h*=.9,c&&c())},m=function t(){o&&(s(t),f())},g=function(t){t.preventDefault();var e=t.originalEvent,r=e.detail?-1*e.detail:e.wheelDelta/40,s=r<0?-1:1;s!=i&&(h=0,i=s),a=-n.scrollTop(),d(r)};t.fn.smoothWheel=function(){var i,s,h=t.extend({},arguments[0]),d=null!==h.isTouchDevice?h.isTouchDevice:"ontouchstart"in e;return p=h.globalState||null,d||(n=this.eq(0),i=n.get(0),n.on("mousewheel",g),s=function(){r=i.clientHeight-i.scrollHeight},l=u=i.scrollTop,a=-l,h.onRender&&(c=h.onRender),h.remove?(o=!1,n.off("mousewheel",g)):o||(s(),t(e).on("load resize",s),t(document).on("documentHeightChange",function(){e.requestAnimationFrame(s)}),o=!0,m())),this}}(window.jQuery,window,window.ru.mail.cpf)},328:function(t,e){/*! skrollr 0.6.26 (2014-06-08) | Alexander Prinzhorn - https://github.com/Prinzhorn/skrollr | Free to use under terms of MIT license */
!function(e,n,r){"use strict";function i(t){if(s=n.documentElement,o=n.body,U(),it=this,t=t||{},ut=t.constants||{},t.easing)for(var r in t.easing)q[r]=t.easing[r];gt=t.edgeStrategy||"set",at={beforerender:t.beforerender,render:t.render,keyframe:t.keyframe},lt=!1!==t.forceHeight,lt&&(Nt=t.scale||1),ct=t.mobileDeceleration||S,pt=!1!==t.smoothScrolling,dt=t.smoothScrollingDuration||T,ft={targetTop:it.getScrollTop()},Ht=(t.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||e.opera)})(),Ht?(ot=n.getElementById("skrollr-body"),ot&&rt(),W(),Ot(s,[w,P],[y])):Ot(s,[w,b],[y]),it.refresh(),wt(e,"resize orientationchange",function(){var t=s.clientWidth,e=s.clientHeight;(e!==Ft||t!==Bt)&&(Ft=e,Bt=t,Vt=!0)});var i=G();return function t(){K(),vt=i(t)}(),it}var s,o,a={get:function(){return it},init:function(t){return it||new i(t)},VERSION:"0.6.26"},l=Object.prototype.hasOwnProperty,u=e.Math,c=e.getComputedStyle,h="touchstart",p="touchmove",d="touchcancel",f="touchend",m="skrollable",g=m+"-before",_=m+"-between",v=m+"-after",w="skrollr",y="no-"+w,b=w+"-desktop",P=w+"-mobile",C="linear",S=.004,T=200,I="center",O="bottom",E="___skrollable_id",x=/^(?:input|textarea|button|select)$/i,j=/^\s+|\s+$/g,M=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,A=/\s*(@?[\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,N=/^(@?[a-z\-]+)\[(\w+)\]$/,k=/-([a-z0-9_])/g,D=function(t,e){return e.toUpperCase()},L=/[\-+]?[\d]*\.?[\d]+/g,B=/\{\?\}/g,F=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,V=/[a-z\-]+-gradient/g,R="",H="",U=function(){var t=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(c){var e=c(o,null);for(var n in e)if(R=n.match(t)||+n==n&&e[n].match(t))break;if(!R)return R=H="",r;R=R[0],"-"===R.slice(0,1)?(H=R,R={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[R]):H="-"+R.toLowerCase()+"-"}},G=function(){var t=e.requestAnimationFrame||e[R.toLowerCase()+"RequestAnimationFrame"],n=jt();return(Ht||!t)&&(t=function(t){var r=jt()-n,i=u.max(0,1e3/60-r);return e.setTimeout(function(){n=jt(),t()},i)}),t},z=function(){var t=e.cancelAnimationFrame||e[R.toLowerCase()+"CancelAnimationFrame"];return(Ht||!t)&&(t=function(t){return e.clearTimeout(t)}),t},q={begin:function(){return 0},end:function(){return 1},linear:function(t){return t},quadratic:function(t){return t*t},cubic:function(t){return t*t*t},swing:function(t){return-u.cos(t*u.PI)/2+.5},sqrt:function(t){return u.sqrt(t)},outCubic:function(t){return u.pow(t-1,3)+1},bounce:function(t){var e;if(.5083>=t)e=3;else if(.8489>=t)e=9;else if(.96208>=t)e=27;else{if(!(.99981>=t))return 1;e=91}return 1-u.abs(3*u.cos(1.028*t*e)/e)}};i.prototype.refresh=function(t){var e,i,s=!1;for(t===r?(s=!0,st=[],Rt=0,t=n.getElementsByTagName("*")):t.length===r&&(t=[t]),e=0,i=t.length;i>e;e++){var o=t[e],a=o,l=[],u=pt,c=gt,h=!1;if(s&&E in o&&delete o[E],o.attributes){for(var p=0,d=o.attributes.length;d>p;p++){var f=o.attributes[p];if("data-anchor-target"!==f.name)if("data-smooth-scrolling"!==f.name)if("data-edge-strategy"!==f.name)if("data-emit-events"!==f.name){var g=f.name.match(M);if(null!==g){var _={props:f.value,element:o,eventType:f.name.replace(k,D)};l.push(_);var v=g[1];v&&(_.constant=v.substr(1));var w=g[2];/p$/.test(w)?(_.isPercentage=!0,_.offset=(0|w.slice(0,-1))/100):_.offset=0|w;var y=g[3],b=g[4]||y;y&&"start"!==y&&"end"!==y?(_.mode="relative",_.anchors=[y,b]):(_.mode="absolute","end"===y?_.isEnd=!0:_.isPercentage||(_.offset=_.offset*Nt))}}else h=!0;else c=f.value;else u="off"!==f.value;else if(null===(a=n.querySelector(f.value)))throw'Unable to find anchor target "'+f.value+'"'}if(l.length){var P,C,S;!s&&E in o?(S=o[E],P=st[S].styleAttr,C=st[S].classAttr):(S=o[E]=Rt++,P=o.style.cssText,C=It(o)),st[S]={element:o,styleAttr:P,classAttr:C,anchorTarget:a,keyFrames:l,smoothScrolling:u,edgeStrategy:c,emitEvents:h,lastFrameIndex:-1},Ot(o,[m],[])}}}for(Ct(),e=0,i=t.length;i>e;e++){var T=st[t[e][E]];T!==r&&(Y(T),J(T))}return it},i.prototype.relativeToAbsolute=function(t,e,n){var r=s.clientHeight,i=t.getBoundingClientRect(),o=i.top,a=i.bottom-i.top;return e===O?o-=r:e===I&&(o-=r/2),n===O?o+=a:n===I&&(o+=a/2),0|(o+=it.getScrollTop())+.5},i.prototype.animateTo=function(t,e){e=e||{};var n=jt(),i=it.getScrollTop();return ht={startTop:i,topDiff:t-i,targetTop:t,duration:e.duration||1e3,startTime:n,endTime:n+(e.duration||1e3),easing:q[e.easing||C],done:e.done},ht.topDiff||(ht.done&&ht.done.call(it,!1),ht=r),it},i.prototype.stopAnimateTo=function(){ht&&ht.done&&ht.done.call(it,!0),ht=r},i.prototype.isAnimatingTo=function(){return!!ht},i.prototype.isMobile=function(){return Ht},i.prototype.setScrollTop=function(t,n){return mt=!0===n,Ht?Ut=u.min(u.max(t,0),At):e.scrollTo(0,t),it},i.prototype.getScrollTop=function(){return Ht?Ut:e.pageYOffset||s.scrollTop||o.scrollTop||0},i.prototype.getMaxScrollTop=function(){return At},i.prototype.on=function(t,e){return at[t]=e,it},i.prototype.off=function(t){return delete at[t],it},i.prototype.destroy=function(){z()(vt),bt(),Ot(s,[y],[w,b,P]);for(var t=0,e=st.length;e>t;t++)nt(st[t].element);s.style.overflow=o.style.overflow="",s.style.height=o.style.height="",ot&&a.setStyle(ot,"transform","none"),it=r,ot=r,at=r,lt=r,At=0,Nt=1,ut=r,ct=r,kt="down",Dt=-1,Bt=0,Ft=0,Vt=!1,ht=r,pt=r,dt=r,ft=r,mt=r,Rt=0,gt=r,Ht=!1,Ut=0,_t=r};var W=function(){var t,i,a,l,c,m,g,_,v,w,y,b;wt(s,[h,p,d,f].join(" "),function(e){var s=e.changedTouches[0];for(l=e.target;3===l.nodeType;)l=l.parentNode;switch(c=s.clientY,m=s.clientX,w=e.timeStamp,x.test(l.tagName)||e.preventDefault(),e.type){case h:t&&t.blur(),it.stopAnimateTo(),t=l,i=g=c,a=m,v=w;break;case p:x.test(l.tagName)&&n.activeElement!==l&&e.preventDefault(),_=c-g,b=w-y,it.setScrollTop(Ut-_,!0),g=c,y=w;break;default:case d:case f:var o=i-c,P=a-m;if(49>P*P+o*o){if(!x.test(t.tagName)){t.focus();var C=n.createEvent("MouseEvents");C.initMouseEvent("click",!0,!0,e.view,1,s.screenX,s.screenY,s.clientX,s.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),t.dispatchEvent(C)}return}t=r;var S=_/b;S=u.max(u.min(S,3),-3);var T=u.abs(S/ct),I=S*T+.5*ct*T*T,O=it.getScrollTop()-I,E=0;O>At?(E=(At-O)/I,O=At):0>O&&(E=-O/I,O=0),T*=1-E,it.animateTo(0|O+.5,{easing:"outCubic",duration:T})}}),e.scrollTo(0,0),s.style.overflow=o.style.overflow="hidden"},Q=function(){var t,e,n,r,i,o,a,l,c,h,p,d=s.clientHeight,f=St();for(l=0,c=st.length;c>l;l++)for(t=st[l],e=t.element,n=t.anchorTarget,r=t.keyFrames,i=0,o=r.length;o>i;i++)a=r[i],h=a.offset,p=f[a.constant]||0,a.frame=h,a.isPercentage&&(h*=d,a.frame=h),"relative"===a.mode&&(nt(e),a.frame=it.relativeToAbsolute(n,a.anchors[0],a.anchors[1])-h,nt(e,!0)),a.frame+=p,lt&&!a.isEnd&&a.frame>At&&(At=a.frame);for(At=u.max(At,Tt()),l=0,c=st.length;c>l;l++){for(t=st[l],r=t.keyFrames,i=0,o=r.length;o>i;i++)a=r[i],p=f[a.constant]||0,a.isEnd&&(a.frame=At-a.offset+p);t.keyFrames.sort(Mt)}},$=function(t,e){for(var n=0,r=st.length;r>n;n++){var i,s,o=st[n],u=o.element,c=o.smoothScrolling?t:e,h=o.keyFrames,p=h.length,d=h[0],f=h[h.length-1],w=d.frame>c,y=c>f.frame,b=w?d:f,P=o.emitEvents,C=o.lastFrameIndex;if(w||y){if(w&&-1===o.edge||y&&1===o.edge)continue;switch(w?(Ot(u,[g],[v,_]),P&&C>-1&&(Pt(u,d.eventType,kt),o.lastFrameIndex=-1)):(Ot(u,[v],[g,_]),P&&p>C&&(Pt(u,f.eventType,kt),o.lastFrameIndex=p)),o.edge=w?-1:1,o.edgeStrategy){case"reset":nt(u);continue;case"ease":c=b.frame;break;default:case"set":var S=b.props;for(i in S)l.call(S,i)&&(s=et(S[i].value),0===i.indexOf("@")?u.setAttribute(i.substr(1),s):a.setStyle(u,i,s));continue}}else 0!==o.edge&&(Ot(u,[m,_],[g,v]),o.edge=0);for(var T=0;p-1>T;T++)if(c>=h[T].frame&&h[T+1].frame>=c){var I=h[T],O=h[T+1];for(i in I.props)if(l.call(I.props,i)){var E=(c-I.frame)/(O.frame-I.frame);E=I.props[i].easing(E),s=tt(I.props[i].value,O.props[i].value,E),s=et(s),0===i.indexOf("@")?u.setAttribute(i.substr(1),s):a.setStyle(u,i,s)}P&&C!==T&&("down"===kt?Pt(u,I.eventType,kt):Pt(u,O.eventType,kt),o.lastFrameIndex=T);break}}},K=function(){Vt&&(Vt=!1,Ct());var t,e,n=it.getScrollTop(),i=jt();if(ht)i>=ht.endTime?(n=ht.targetTop,t=ht.done,ht=r):(e=ht.easing((i-ht.startTime)/ht.duration),n=0|ht.startTop+e*ht.topDiff),it.setScrollTop(n,!0);else if(!mt){var s=ft.targetTop-n;s&&(ft={startTop:Dt,topDiff:n-Dt,targetTop:n,startTime:Lt,endTime:Lt+dt}),ft.endTime>=i&&(e=q.sqrt((i-ft.startTime)/dt),n=0|ft.startTop+e*ft.topDiff)}if(Ht&&ot&&a.setStyle(ot,"transform","translate(0, "+-Ut+"px) "+_t),mt||Dt!==n){kt=n>Dt?"down":Dt>n?"up":kt,mt=!1;var o={curTop:n,lastTop:Dt,maxTop:At,direction:kt};!1!==(at.beforerender&&at.beforerender.call(it,o))&&($(n,it.getScrollTop()),Dt=n,at.render&&at.render.call(it,o)),t&&t.call(it,!1)}Lt=i},Y=function(t){for(var e=0,n=t.keyFrames.length;n>e;e++){for(var r,i,s,o,a=t.keyFrames[e],l={};null!==(o=A.exec(a.props));)s=o[1],i=o[2],r=s.match(N),null!==r?(s=r[1],r=r[2]):r=C,i=i.indexOf("!")?X(i):[i.slice(1)],l[s]={value:i,easing:q[r]};a.props=l}},X=function(t){var e=[];return F.lastIndex=0,t=t.replace(F,function(t){return t.replace(L,function(t){return t/255*100+"%"})}),H&&(V.lastIndex=0,t=t.replace(V,function(t){return H+t})),t=t.replace(L,function(t){return e.push(+t),"{?}"}),e.unshift(t),e},J=function(t){var e,n,r={};for(e=0,n=t.keyFrames.length;n>e;e++)Z(t.keyFrames[e],r);for(r={},e=t.keyFrames.length-1;e>=0;e--)Z(t.keyFrames[e],r)},Z=function(t,e){var n;for(n in e)l.call(t.props,n)||(t.props[n]=e[n]);for(n in t.props)e[n]=t.props[n]},tt=function(t,e,n){var r,i=t.length;if(i!==e.length)throw"Can't interpolate between \""+t[0]+'" and "'+e[0]+'"';var s=[t[0]];for(r=1;i>r;r++)s[r]=t[r]+(e[r]-t[r])*n;return s},et=function(t){var e=1;return B.lastIndex=0,t[0].replace(B,function(){return t[e++]})},nt=function(t,e){t=[].concat(t);for(var n,r,i=0,s=t.length;s>i;i++)r=t[i],(n=st[r[E]])&&(e?(r.style.cssText=n.dirtyStyleAttr,Ot(r,n.dirtyClassAttr)):(n.dirtyStyleAttr=r.style.cssText,n.dirtyClassAttr=It(r),r.style.cssText=n.styleAttr,Ot(r,n.classAttr)))},rt=function(){_t="translateZ(0)",a.setStyle(ot,"transform",_t);var t=c(ot),e=t.getPropertyValue("transform"),n=t.getPropertyValue(H+"transform");e&&"none"!==e||n&&"none"!==n||(_t="")};a.setStyle=function(t,e,n){var r=t.style;if("zIndex"===(e=e.replace(k,D).replace("-","")))r[e]=isNaN(n)?n:""+(0|n);else if("float"===e)r.styleFloat=r.cssFloat=n;else try{R&&(r[R+e.slice(0,1).toUpperCase()+e.slice(1)]=n),r[e]=n}catch(t){}};var it,st,ot,at,lt,ut,ct,ht,pt,dt,ft,mt,gt,_t,vt,wt=a.addEvent=function(t,n,r){var i=function(t){return t=t||e.event,t.target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1,t.defaultPrevented=!0}),r.call(this,t)};n=n.split(" ");for(var s,o=0,a=n.length;a>o;o++)s=n[o],t.addEventListener?t.addEventListener(s,r,!1):t.attachEvent("on"+s,i),Gt.push({element:t,name:s,listener:r})},yt=a.removeEvent=function(t,e,n){e=e.split(" ");for(var r=0,i=e.length;i>r;r++)t.removeEventListener?t.removeEventListener(e[r],n,!1):t.detachEvent("on"+e[r],n)},bt=function(){for(var t,e=0,n=Gt.length;n>e;e++)t=Gt[e],yt(t.element,t.name,t.listener);Gt=[]},Pt=function(t,e,n){at.keyframe&&at.keyframe.call(it,t,e,n)},Ct=function(){var t=it.getScrollTop();At=0,lt&&!Ht&&(o.style.height=""),Q(),lt&&!Ht&&(o.style.height=At+s.clientHeight+"px"),Ht?it.setScrollTop(u.min(it.getScrollTop(),At)):it.setScrollTop(t,!0),mt=!0},St=function(){var t,e,n=s.clientHeight,r={};for(t in ut)e=ut[t],"function"==typeof e?e=e.call(it):/p$/.test(e)&&(e=e.slice(0,-1)/100*n),r[t]=e;return r},Tt=function(){var t=ot&&ot.offsetHeight||0;return u.max(t,o.scrollHeight,o.offsetHeight,s.scrollHeight,s.offsetHeight,s.clientHeight)-s.clientHeight},It=function(t){var n="className";return e.SVGElement&&t instanceof e.SVGElement&&(t=t[n],n="baseVal"),t[n]},Ot=function(t,n,i){var s="className";if(e.SVGElement&&t instanceof e.SVGElement&&(t=t[s],s="baseVal"),i===r)return t[s]=n,r;for(var o=t[s],a=0,l=i.length;l>a;a++)o=xt(o).replace(xt(i[a])," ");o=Et(o);for(var u=0,c=n.length;c>u;u++)-1===xt(o).indexOf(xt(n[u]))&&(o+=" "+n[u]);t[s]=Et(o)},Et=function(t){return t.replace(j,"")},xt=function(t){return" "+t+" "},jt=Date.now||function(){return+new Date},Mt=function(t,e){return t.frame-e.frame},At=0,Nt=1,kt="down",Dt=-1,Lt=jt(),Bt=0,Ft=0,Vt=!1,Rt=0,Ht=!1,Ut=0,Gt=[];"function"==typeof define&&define.amd?define("skrollr",function(){return a}):void 0!==t&&t.exports?t.exports=a:e.skrollr=a}(window,document)},329:function(t,e){!function(t,e,n){"use strict";function r(t,e){var n="top:"+t+"px;";return e&&(n+="left:"+e+"px;"),n}function i(e){var n=this._Elems.Parent,i=this._Opts,s=i.Attrs,o=s.positionBottom,a=s.positionTop,l=n.offset().top,u=n.width(),h=n.height(),p=c.height(),m=t(document).height();this._layers.forEach(function(t){var e,n,i=t.layer,s=0;t.height=e=i.outerHeight(),t.width=n=i.outerWidth(),t.isCentered&&(s=Math.round((u-n)/2)),f||d?i.css("left",s):i.attr(o,r(h-e,s)).attr(a,r(0,s))}),this.bounds.min=Math.max(l-p,0),this.bounds.max=Math.min(l+h,Math.max(m-p,0)),this.bounds.range=this.bounds.max-this.bounds.min,f||!1===e||d||this._skrollr.refresh()}function s(){var t=this._Opts.idPrefix+(Math.random()+"").replace(".","");return this._Elems.Parent.prop("id",t),"#"+t}function o(t,e){var n=c.scrollTop()+(isNaN(e)?0:e),r=this._Opts.isSameScrollDirection?n-this.bounds.min:this.bounds.max-n,i=this.bounds.range&&r/this.bounds.range;i>=0&&i<=1&&i!==this.bounds.k&&(this._Elems.scrollCont.scrollTop(this._sizes.maxScroll*i),a.call(this,100*(1-i)),this.bounds.k=i),isNaN(e)&&g(o.bind(this))}function a(t){var e,n=this._customLayers,r=n.length;if(r)for(var i=0;i<r;i++)e=n[i],e.handler&&e.handler.call(this,e.element,t,e.data)}var l=n.Basic,u=l.typeOf,c=t(e),h=e.skrollr,p=e.Modernizr,d=p.touch||p.touchevents,f=p.csstransforms3d,m=/ipad|iphone|ipod/i.test(navigator.userAgent),g=e.requestAnimationFrame,_={cssSels:{Main:{layer:".js-parallax__layer",customLayer:".js-parallax__custom",baseLayer:".js-parallax__layer_base",scrollCont:".js-parallax__scroll"}},cssClss:{touchDevice:"p-parallax_touch"},Attrs:{anchorTarget:"data-anchor-target",layerIndex:"data-layer-index",layerCentered:"data-layer-centered",positionTop:"data-top-bottom",positionBottom:"data-bottom-top",scrollHandler:"data-scroll-handler"},scrollHandlers:{},idPrefix:"parallaxBlock_",onBeforeRefresh:null,isTouchDevice:null,isSameScrollDirection:!1,heightChangeEvent:"documentHeightChange",mouseWheelLimit:60,skrollrOpts:{forceHeight:!1,smoothScrolling:!1}},v=l.Constructors.getView({_Init:function(){var r=this,l=this._Opts,p=this._Elems,g=l.Attrs,_=p.Parent,v=g.layerIndex,w=g.anchorTarget,y=g.layerCentered,b=g.scrollHandler,P=_.prop("id"),C=P?"#"+P:s.call(this),S=[],T=[],I=n.Tools.Images.preloadImage,O=i.bind(this),E=Array.from(_.find("img")).map(function(t){return I(t.src)});d=u(l.isTouchDevice,"boolean")?l.isTouchDevice:d,p.layer.each(function(e,n){S.push({layer:t(n),isCentered:!!n.getAttribute(y)}),n.setAttribute(w,C),n.setAttribute(v,e)}),p.customLayer&&p.customLayer.each(function(t,e){var n=e.getAttribute(b),r=n&&l.scrollHandlers[n];r&&T.push({element:e,data:{},handler:r})}),this._layers=S,this._customLayers=T,this._sizes={},this.bounds={},Promise.all(E).then(function(){var n,i=0,s=t(document),u=l.mouseWheelLimit;if(O(!1),f&&!m)p.baseLayer.each(function(){i=Math.max(i,this.offsetHeight)}),r._sizes.maxScroll=i-p.Parent.height(),o.call(r),s.on("mousewheel",function(t){var e,i=t.originalEvent,a=i.deltaY;isNaN(a)&&(n?a=i.wheelDelta/-120*n:(e=c.scrollTop(),s.one("scroll",function(){n=Math.abs(c.scrollTop()-e)}),a=-i.wheelDelta)),Math.abs(a)>u&&o.call(r,null,a)});else if(d)_.addClass(l.cssClss.touchDevice);else{var g=h.get(),v=l.skrollrOpts;r._customLayers.length&&(v.beforerender=function(t){var e,n=r.bounds,i=t.curTop;i>n.min&&i<n.max&&(e=100*(i-n.min)/n.range,a.call(r,e))}),g?g.refresh():g=h.init(v),r._skrollr=g}c.on("resize",e.requestAnimationFrame.bind(null,O)).on("load",O),l.heightChangeEvent&&s.on(l.heightChangeEvent,O)},function(){})}},_,null,"ParallaxBlock");e.getNameSpace("Modules",n).ParallaxBlock=v,t.fn.ParallaxBlock=function(n){return e.DEBUG&&e.console.warn("–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Å—Ç–∞—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.\t\t\t\t–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–æ—á–Ω–æ —Å–º–µ–Ω–∏—Ç—å –µ–≥–æ –Ω–∞ –æ–±—ã—á–Ω–æ–µ, —Ç–∞–∫ –∫–∞–∫ —Å–∫–æ—Ä–æ —Å—Ç–∞—Ä–æ–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å"),this.each(function(){new v(n,t(this))})},l.moduleOpts.setParams("ParallaxBlock.Autoinit",{initializer:function(t,e){t.isTouchDevice.then(function(t){new v({isTouchDevice:t},e)})},options:{isTouchDevice:new Promise(function(t){t(!(e.Modernizr.csstransforms3d&&!d)&&n.Tools.checkDeviceType().then(function(t){return"tablet"===t}))})}})}(window.jQuery,window,window.ru.mail.cpf)},33:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},o=0,a=t;o<a.length;o++){var l=a[o];if("object"===r(l)&&null!==l)for(var u=Object.keys(l),c=0,h=u;c<h.length;c++){var p=h[c],d=l[p];if(d instanceof Date){var f=new Date;f.setTime(d.getTime()),n[p]=f}else d instanceof RegExp?n[p]=new RegExp(d):Array.isArray(d)?n[p]=Array.prototype.concat.call([],d):s(d)?n[p]=i(n[p],d):n[p]=d}}return n}Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){return null!==t&&void 0!==t&&"object"===r(t)&&!(t instanceof Promise)};e.deepMerge=i},330:function(t,e){!function(t,e,n){"use strict";function r(t){return-1!==h.indexOf(t)}function i(n){if(!f){f=!0,n=s.typeOf(n,"boolean")?n:null;var i=s.moduleOpts.getParams("ParallaxBlock")||{},l=a(!0,i,{isTouchDevice:n});p.each(function(e,n){var r=o(n)||{};new m(a(!0,{},l,r.parallaxOpts),t(n))}),c||r("firefox")||t(function(){(function(){var e=navigator.userAgent,n=-1==e.toLowerCase().indexOf("webkit")?"html":"body",r=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return r&&parseInt(r[2],10)>=61&&(n="html"),t(n)})().smoothWheel({isTouchDevice:n,globalState:e.getNameSpace("ru.mail.auto").State||null})})}}var s=n.Basic,o=s.getOptions,a=s.Extend,l=e.Modernizr,u=l.touch||l.touchevents,c=l.csstransforms3d,h=e.navigator.userAgent.toLowerCase(),p=t(".js-slot-parallax"),d=t(e),f=!1,m=n.Modules.ParallaxBlock,g=n.Tools.PubSub;p.length&&(c&&!u?i(!1):(n.Tools.checkDeviceType().then(function(t){u="tablet"==t,i(u)}),d.one("touchstart",i))),g&&g.subscribe("adqSlotAdded",function(e){t("["+e.data.idAttribute+'="'+e.data.id+'"]').find(".js-slot-parallax").length&&!f&&(f=!0,n.Tools.initModules(t(".js-slot-parallax"),{cssSels:{module:".js-slot-parallax"}}))})}(window.jQuery,window,window.ru.mail.cpf)},331:function(t,e,n){"use strict";var r=n(91),i=(n.n(r),n(92)),s=(n.n(i),n(94)),o=(n.n(s),n(332));n.n(o)},332:function(t,e){!function(t){t.setUID("ffb652b5f19cfbc0d886c893bb6c44cd"),t.setParams("big",{template:"ct-mywidget-big.xml",sdkParams:{preview:{width:450,height:252}}}),t.setParams("big-withSubscribe",{template:"ct-mywidget-big-subscribe.xml",sdkParams:{preview:{width:450,height:252}}}),t.setParams("big-withSubscribeLines",{template:"ct-mywidget-big-subscribe-lines.xml",sdkParams:{n:6,preview:{width:450,height:252}}}),t.setParams("recipe",{template:"ct-mywidget-recipe.xml",sdkParams:{n:5,preview:{width:300,height:210}}}),t.setParams("sidebar-recipe",{template:"ct-mywidget-sidebar-recipe.xml",sdkParams:{n:4,preview:{width:70,height:50}}}),t.setParams("sidebar-hide-article",{template:"ct-mywidget-sidebar-hide-article.xml",sdkParams:{n:4,preview:{height:67}}}),t.setParams("sidebar-hide-gallery",{template:"ct-mywidget-sidebar-hide-gallery.xml",sdkParams:{n:6,preview:{height:67}}}),t.setParams("sidebar-hide-small-gallery",{template:"ct-mywidget-sidebar-hide-gallery.xml",sdkParams:{n:4,preview:{height:67}}})}(window.mwManager)},34:function(t,e,n){"use strict";function r(t,e){return function e(n,r){if(0===r.length)return n!==t?n:null;var i=n[r[0]];return null===i||void 0===i?null:e(i,r.slice(1))}(t,e)}function i(t,e,n){return function t(e,n,r){return 1===n.length?(e[n[0]]=r,e[n[0]]):(null!==e[n[0]]&&void 0!==e[n[0]]||(e[n[0]]=e[n[0]]||{}),t(e[n[0]],n.slice(1),r))}(t,e,n),t}Object.defineProperty(e,"__esModule",{value:!0}),e.getIn=r,e.setIn=i},35:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(36),s=function(t){function e(){var e=t.call(this)||this;return e.emit("ready"),e}return r(e,t),e}(i.EventEmitter);e.Emitter=s},36:function(t,e,n){"use strict";function r(t){console&&console.warn&&console.warn(t)}function i(){i.init.call(this)}function s(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function o(t,e,n,i){var o,a,l;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(a=t._events,void 0===a?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),l=a[e]),void 0===l)l=a[e]=n,++t._eventsCount;else if("function"==typeof l?l=a[e]=i?[n,l]:[l,n]:i?l.unshift(n):l.push(n),(o=s(t))>0&&l.length>o&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=l.length,r(u)}return t}function a(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,g(this.listener,this.target,t))}function l(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=a.bind(r);return i.listener=n,r.wrapFn=i,i}function u(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):h(i,i.length)}function c(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function p(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function d(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}var f,m="object"==typeof Reflect?Reflect:null,g=m&&"function"==typeof m.apply?m.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};f=m&&"function"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var _=Number.isNaN||function(t){return t!==t};t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var v=10;Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(t){if("number"!=typeof t||t<0||_(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");v=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||_(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return s(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=i[t];if(void 0===a)return!1;if("function"==typeof a)g(a,this,e);else for(var l=a.length,u=h(a,l),n=0;n<l;++n)g(u[n],this,e);return!0},i.prototype.addListener=function(t,e){return o(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return o(this,t,e,!0)},i.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,l(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,l(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,r,i,s,o;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():p(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},i.prototype.listeners=function(t){return u(this,t,!0)},i.prototype.rawListeners=function(t){return u(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):c.call(t,e)},i.prototype.listenerCount=c,i.prototype.eventNames=function(){return this._eventsCount>0?f(this._events):[]}},37:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(38))},38:function(t,e,n){"use strict";function r(){return __REDUX_DEVTOOLS_EXTENSION__.connect()}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof __REDUX_DEVTOOLS_EXTENSION__,s=function(){function t(){var t=this;this.subscriptions={},i&&(this.devTools=r(),this.devTools.subscribe(function(e){if("DISPATCH"===e.type&&"JUMP_TO_STATE"===e.payload.type)for(var n=0,r=Object.keys(t.subscriptions);n<r.length;n++){var i=r[n];t.subscriptions[i](e)}}))}return t.prototype.subscribe=function(t,e){var n="handler_"+t;this.subscriptions[n]||(this.subscriptions[n]=e)},t.prototype.send=function(t,e){i&&this.devTools&&this.devTools.send(t,e)},t.prototype.remove=function(t){delete this.subscriptions["handler_"+t]},t}();e.DevToolsExtension=s},39:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(20);e.DOMComponent=r.DOMComponent,function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(44))},393:function(t,e,n){"use strict";n(325)},40:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(1),s=n(19),o=0,a=function(){function t(t,e,n){void 0===e&&(e={}),void 0===n&&(n={}),this._ns=t,this._id=++o,this._options=r.deepMerge({},this.getDefaultOptions(),e),this._initialState=r.deepMerge({},this.getInitialState(),n)}return t.prototype.init=function(){},t.prototype.getDefaultOptions=function(){return{}},t.prototype.getInitialState=function(){return{}},Object.defineProperty(t.prototype,"alias",{get:function(){var t=this.constructor;return this._alias||t.registryName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this._ns?""+this.alias+i.COMPONENT_NS_DELIMITER+this._ns:this.alias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identity",{get:function(){return""+this.ns+i.COMPONENT_NS_DELIMITER+this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.getState()},enumerable:!0,configurable:!0}),t.prototype.setState=function(t){return this._store.put(t)},t.prototype.getState=function(){return this._store.read()},t.prototype.update=function(t,e){},t.prototype.canDispatch=function(){return!s.Store.hasEntity(this.identity)},t.prototype.dispatchStore=function(t,e){this.shouldUpdate(t,e)&&this.update(t,e)},t.prototype.shouldUpdate=function(t,e){return!0},t.prototype.reset=function(){this._store.destroy(),this.dispatch(this._alias)},t.prototype.preDispatch=function(){},t.prototype.postDispatch=function(){},t.prototype.dispatch=function(t){return this.canDispatch()&&(this._alias=t,this._store=new s.Store(this.identity,this._initialState,this.dispatchStore.bind(this)),this.preDispatch(),this._store.dispatch(),this.postDispatch(),this.init()),this},t}();e.Component=a},41:function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(42)),r(n(43))},42:function(t,e,n){"use strict";function r(t,e){return t.split(e).map(function(t){return t.trim()})}function i(t,e){var n=new RegExp(e+"\\"+u.COMPONENT_DATA_BIND_DEF_DELIMITER,"g");return t.replace(n,"")}function s(t,e){return function(n){if(t in c.DOM_ELEMENT_PROPERTIES)n[t]=e;else if(t in c.DOM_ELEMENT_ATTRIBUTES)switch(c.DOM_ELEMENT_ATTRIBUTES[t]){case c.MPFAttributeType.BOOLEAN:e?n.setAttribute(t,t):n.removeAttribute(t);break;case c.MPFAttributeType.STRING:n.setAttribute(t,e)}else n.setAttribute(t,e)}}function o(t,e){var n=new a.Collector(t,e);return function(t,e,o){e(function(){for(var e=n.group(t.$,t.alias),a=Object.keys(e),c=0,h=a;c<h.length;c++)for(var p=h[c],d=i(p,t.alias),f=r(d,u.COMPONENT_DATA_BIND_PROP_DELIMITER),m=0,g=f;m<g.length;m++){var _=g[m],v=r(_,u.COMPONENT_DATA_BIND_EQ),w=v[0],y=v[1];if("function"!=typeof t[y])l.print.warn("Method '"+y+"' not found in '"+t.alias+"' for key '"+p+"'");else{var b=e[p],P=t[y].bind(t),C=o(),S=P(C);b.forEach(s(w,S))}}})}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(21),l=n(0),u=n(1),c=n(10);e.dataBinder=o},43:function(t,e,n){"use strict";function r(t){for(var e=Object.keys(t),n={},r=0,i=e;r<i.length;r++){var o=i[r],a=o.split(s.COMPONENT_EVENT_DELIMITER),l=a[0],u=a[1];n[l]||(n[l]=[]);var c={name:u,handler:t[o]};n[l]=n[l].concat(c)}return n}function i(t,e){var n={};return function(i){for(var s=r(i),a=Object.keys(s),l=0,u=a;l<u.length;l++){var c=u[l];!function(r){var i=function(n){for(var i=0,o=s[r];i<o.length;i++){var a=o[i],l=a.name,u=a.handler,c=n.target;if(null===c)return;for(var h=e(l);c!==t;){if(-1!==h.indexOf(c))return void u(n);c=c.parentNode}}},a=-1!==o.indexOf(r);t.addEventListener(r,i,a),n[r]={unbind:function(){t.removeEventListener(r,i)}}}(c)}return function(){for(var t=Object.keys(n),e=0,r=t;e<r.length;e++){var i=r[e];n[i].unbind(),delete n[i]}}}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),o=["focus","blur"];e.eventsBinder=i},44:function(t,e,n){"use strict";function r(t){return window[t]}function i(t){return Promise.resolve(t)}function s(t,e){var n=e||{},i=u.applicationSettings.getState(),s=i.templatesPath,o=i.templatesNS,a=i.templatesExt;if(!s)throw new Error(l.format('Invalid application settings: "templatesPath"').error().str());if(!o)throw new Error(l.format('Invalid application settings: "templatesNS"').error().str());var p=n.getName,d=n.getPath,f="function"==typeof p?p(t):h.getName(t),m="function"==typeof d?d(s,t,a):h.getPath(s,t,a);if(c[m])return c[m];var g=new Promise(function(t,e){var n=r(o);if(n&&n[f])return t(n[f]);var i=document.createElement("script");i.async=!0,i.type="text/javascript",i.src=m,i.addEventListener("load",function(){n&&n[f]?t(n[f]):e(new Error(l.format('Unable to read template "'+f+'"').error().str()))}),i.addEventListener("error",function(){e(new Error(l.format('Unable to load template from "'+f+'"').error().str()))}),document.head.appendChild(i)});return c[m]=g,g.then(function(t){return delete c[m],t})}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(20),l=n(0),u=n(18),c={},h={getPath:function(t,e,n){return t+"/"+e+"/"+e+n},getName:function(t){return t+".xml"}};e.resolveTemplate=function(t,e){return function(){return"function"==typeof t?i(t):"string"==typeof t?s(t,e):Promise.reject(new Error(l.format("Invalid template").error().str()))}};var p=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return o(n,t),n.prototype.update=function(e,n){var r=this;t.prototype.update.call(this,e,n),(0,this.options.template)().then(function(t){var e=r.getState();r.render(t,e)}).catch(function(t){l.print.warn(t.message)})},n.prototype.render=function(t,e){var n=t(e);this.$.innerHTML=n},n.getTemplate=e.resolveTemplate,n}(a.DOMComponent);e.TemplateComponent=p},45:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],s=0,o=t;s<o.length;s++){var a=o[s];if(a){var l=r(a);if("string"===l||"number"===l)n.push(""+a);else if(Array.isArray(a))n=n.concat(i.apply(void 0,a));else for(var u=0,c=Object.keys(a);u<c.length;u++){var h=c[u],p=a[h];p&&n.push(""+h)}}}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.classNames=i},46:function(t,e,n){"use strict";function r(t){return Array.from(t.elements).reduce(function(t,e){var n=e,r=n.name,i=n.nodeName,s=n.type,a=n.checked,l=null!==e.getAttribute("disabled"),u=/^(?:input|select|textarea|keygen)/i.test(i),c=/^(?:submit|button|image|reset|file)$/i.test(s),h=a||!/^(?:checkbox|radio)$/i.test(s);if(r&&!l&&u&&!c&&h){var p=o.getValue(e);if(null===p)return t;if(Array.isArray(p)){var d=p.map(function(t){return{name:r,value:t.replace(/\r?\n/g,"\r\n")}});return t.concat(d)}return t.concat({name:r,value:(p||"").replace(/\r?\n/g,"\r\n")})}return t},[])}function i(t){for(var e=r(t),n={},i=0,s=e;i<s.length;i++){var o=s[i];n[o.name]||(n[o.name]=[]),n[o.name]=n[o.name].concat(o.value)}return n}function s(t){return r(t).map(function(t){var e=t.name,n=t.value;return encodeURIComponent(e)+"="+encodeURIComponent(null===n?"":n)}).join("&")}Object.defineProperty(e,"__esModule",{value:!0});var o=n(22);e.serializeArray=r,e.serializeObject=i,e.serializeStr=s},47:function(t,e,n){"use strict";function r(t,e){return!!t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeName=r},48:function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={}),n=Object.assign({},i,n);var r;try{r=new Event(t,n)}catch(e){var s=n.bubbles,o=n.cancelable;r=document.createEvent("Event"),r.initEvent(t,s,o)}e.dispatchEvent(r)}Object.defineProperty(e,"__esModule",{value:!0});var i={bubbles:!1,cancelable:!1,composed:!1};e.triggerCustomEvent=r},49:function(t,e){!function(t,e){"use strict";var n=t.Basic.moduleOpts.setParams;n("Shares",{options:{getCntOnInit:!0,urlTypeParam:"social"}}),n("Shares.Poll",{options:{getCntOnInit:!0,urlTypeParam:"social",ignoreMetaParams:!0}}),n("Shares.Survey",{options:{getCntOnInit:!1,urlTypeParam:"social",ignoreMetaParams:!0}}),n("Shares.Compact",{options:{Handlers:{typeCount:function(t,e){var n=this._totalCount=this._totalCount||{};n[t]=e;var r=0;for(var i in n)n.hasOwnProperty(i)&&(r+=n[i]);var s=this.Elems.jTotal;s&&(s.text(r),s.toggleClass(this.Opts.cssClss.hidden,r<=0))}},showCnt:!0,getCntOnInit:!0,getUserText:function(t){if(t&&t.firstName){var n=this._opts.userText||"–ø–æ–¥–µ–ª–∏—Å—å —Å –¥—Ä—É–∑—å—è–º–∏!";return e("<span/>").append(e("<strong/>").text(t.firstName)).append(e("<span/>").text(", "+n))}return this._opts.userText?"–ü—Ä–∏–≤–µ—Ç, "+this._opts.userText:"–ü–æ–¥–µ–ª–∏—Å—å —Å –¥—Ä—É–∑—å—è–º–∏!"}}}),n("Shares.PopupGalleryView",{options:{ignoreMetaParams:!0,cssSels:{countCont:".js-shares_cnt_cont"}}}),n("Shares.Card",{options:{getCntOnInit:!1,showCnt:!1}})}(window.ru.mail.cpf,window.$||window.jQuery)},51:function(t,e){!function(t,e,n){"use strict";(0,n.Basic.moduleOpts.setParams)("AsyncForms",{options:{cssSels:{countdownCont:".js-countdown_cont"},cssClss:{serverError:"popup_error",fieldsError:"popup__form_error",sentSuccess:"popup_done"},popupOpts:{cssClss:{ppMdfr:"overlay_common-popup"}},validateOnChange:!1}}),t(".comments-listing").addAsyncForms(),t.fn.addAsyncForms=function(){return function(r,i){i=i||".js-show_form",this.on("click",i,function(i){i.preventDefault();var s=t(e.document.body).data("User");s&&s.checkUserInfo().then(function(e){if(e){var s=t(i.currentTarget);n.Tools.initModules(s,r).Show()}})})}}()}(window.jQuery||window.$,window,window.ru.mail.cpf)},52:function(t,e,n){"use strict";var r=n(30),i=(n.n(r),n(53)),s=(n.n(i),n(49));n.n(s)},53:function(t,e){!function(t,e,n){"use strict";var r=n.Tools.Auth,i=(e.__PH,n.Basic.Constructors.addPlugin),s={cssSels:{Main:{user:".js-shares_user"}},cssClss:{hidden:"hidden_all"},getUserText:function(){return"OH, HAI, %username%!"}};i("Shares",function(){var t=function(t){var e=this._opts.getUserText.bind(this),n=(t||[]).filter(function(t){return t.active})[0];if(n){var r=e(n);this.updateUserText(r)}},e=function(){var t=this._opts.getUserText.bind(this),e=t();this.updateUserText(e)};return{_Init:function(){this._elems.user&&r.getAccountsList().then(t.bind(this)).catch(e.bind(this))},updateUserText:function(t){this._elems.user.html(t),this._elems.user.removeClass(this._opts.cssClss.hidden)}}}(),s,"User")}(window.jQuery||window.$,window,window.ru.mail.cpf)},60:function(t,e){!function(t,e){"use strict";var n=t.getNameSpace("Basic",e),r=n.Extend,i={},s=n.Constructors.getModel(function(){return{_Init:function(){},getData:function(t){return this._Opts[t]}}}(),i,null,"Global");r(!0,t.getNameSpace("Modules",e),{Global:s})}(window,window.ru.mail.cpf)},63:function(t,e){!function(t,e){var n=e.Basic,r=t.getNameSpace("Instances",e),i=n.Extend,s=n.typeOf,o=n.Merge,a=e.Types,l=a.Object.Equals,u=a.String.Url.getParams,c=e.Comp.Methods.initCallbacks,h=t.history,p=t.location,d="state"in h&&h.state,f=n.getConstructor(function(){function e(t,e,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function n(t,e){e=e||this.State(),l(e,t)||this._fire("statechange",[e,t])}function a(){var t=p.hash,e=null;return t&&(t=t.substr("!"==t.charAt(1)?2:1),e=u(t)),this._State=e,e}function f(){var t=this.State();a.call(this),n.call(this,t)}function m(){this.supportHistoryAPI&&e("popstate",t,w.bind(this)),"onhashchange"in t&&e("hashchange",t,f.bind(this))}function g(){var t,e,n,r,i=this.State(),o=[],a=!1;delete i.__location;for(var l in i)if(i.hasOwnProperty(l))if(t=i[l],a=r=!isNaN(l.substr(l.length-1)),s(t,"array")){n=[];for(var u=0;u<t.length;u++)e=t[u],null!==e?(a=a||isNaN(e),n.push(e)):(n.length&&o.push(l+(a?"=":"")+encodeURIComponent(n.join(","))),o.push(l),n=[],a=r);n.length&&o.push(l+(a?"=":"")+n.join(","))}else{if(null===t){delete i[l];continue}a=a||isNaN(t),o.push(l+(a?"=":"")+encodeURIComponent(t))}return"#"+o.join("&")}function _(t,e,n,r){h[!0===r?"replaceState":"pushState"](t,n||null,e||null)}function v(t,e){var n=this.supportHistoryAPI,r=s(t,"object"),i=!n||!(r&&!0!==t.url),o=null,a=null;n&&(i||(o=t.url),a=r&&t.title),i&&(o=g.call(this)),n?_(this.State(),o,a,e):p[e?"replace":"assign"](p.href.split("#")[0]+o)}var w=function(t){var e=t.state;if(d&&d!=e)return void(d=null);var r=this.State();this._State=e||{},n.call(this,r)};return{_Init:function(){var t;if(r.stateObject)return r.stateObject;c.call(this,{Types:{statechange:{opts:{memory:1}}}}),(t=a.call(this))&&(d=t),n.call(this,null),m.call(this)},pushToState:function(t,e,r){var s=this.State(),a=this._State,l=t.__location,u=!0;if(!0===e)this._State=o(!0,a,t);else{for(var c in t)t.hasOwnProperty(c)&&(a&&a.hasOwnProperty(c)&&a[c]==t[c]||(u=!1));if(u)return;this._State=i(!0,a,t)}v.call(this,l,3==arguments.length&&r),n.call(this,s,a)},setStateKey:function(t,e,n,r){var i;s(t,"string")&&((i={})[t]=e,this.pushToState(i,n,r))},State:function(t,e,n){if(!s(t,"object"))return i(!0,{},this._State);this._State=t,!1!==e&&v.call(this,t.__location,!0!==n)},addBaseState:function(t){if(this.supportHistoryAPI&&!this._baseStateAdded){var e=this.State();for(var n in e)if(e.hasOwnProperty(n)){d&&!l(e,d)||(d=e,_(null,t||p.href.split("#").shift(),null,!0),v.call(this,e.__location),this._baseStateAdded=!0);break}}},supportHistoryAPI:!(!h||!h.pushState),back:function(){h.back()},forward:function(){h.forward()},go:function(t){h.go(t)}}}());r.stateObject=f()}(window,window.ru.mail.cpf)},64:function(t,e){!function(t,e){var n=t.getNameSpace("Basic",e).moduleOpts;n.set("Notification",null,{cssSels:{Main:{Head:".js-alert__head",Message:".js-alert__text_0"}}}),n.set("Notify",null,{blockSel:"#box-alert"})}(window,window.ru.mail.cpf)},65:function(t,e){!function(t,e,n){var r=n.Basic,i=r.moduleOpts,s=r.Extend,o=r.typeOf,a=n.Comp,l=r.getConstructor(function(){var r=a.jQuery.Tools,l=r.getElements,u=r.toggleElemsVal,c=n.Comp.Methods.initCallbacks,h=n.Tools.initModule,p={cssSels:{Main:{Head:null,Message:null,CountdownCont:null,CountdownMsg:null,CountdownTime:null}},onHide:null},d=function(t,e){function n(){var t=0==--i;e.call(null,t,i),r.tick=t?null:setTimeout(n,1e3)}var r=this._Timers,i=t+1;n()},f={jHead:"head",jMessage:"message",jCountdownMsg:"countdown"},m=function(){var t=this._Elems,e={};for(var n in f)f.hasOwnProperty(n)&&(e[n]=t[n]);return e},g=function(t){var e,n,r=this._Elems,i=r.jPopupBlock,s={elems:{},keys:{}};for(e in t)t.hasOwnProperty(e)&&(n=r[e],n||(r[e]=n=i.find(e)),s.elems[e]=n,s.keys[e]=e);return s},_=function(t){var e,n,r,i,a,l,c,h=t.extraElems,p=this._defaultTexts,d=this._Elems;h?(r=g.call(this,h),e=s({},this._textElems,r.elems),f=s({},f,r.keys),n=s({},t,h),delete n.extraElems):(e=this._textElems,n=t);for(var m in f)f.hasOwnProperty(m)&&(i=f[m],l=n[i],c=d[m],null===l&&(n[i]=p[i]),(a=e[m])?a.toggle(o(l,"string")&&0!==l.length):c&&!c.is(d.jMessage)&&c.hide());u(e,n,f)},v=function(t){var e=this._Timers;t||(this._fire("hide"),e.tick&&(clearTimeout(e.tick),e.tick=null))},w=function(){var n,r=this._Elems.jPopupBlock,i=this._popupInstance;if(i)return i;if(n={onShow:v.bind(this,!0),onHide:v.bind(this,!1)},t.fn.Popup)e.DEBUG&&e.console.warn("–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Å—Ç–∞—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.\t\t\t\t\t\t–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–æ—á–Ω–æ —Å–º–µ–Ω–∏—Ç—å –µ–≥–æ –Ω–∞ –æ–±—ã—á–Ω–æ–µ, —Ç–∞–∫ –∫–∞–∫ —Å–∫–æ—Ä–æ —Å—Ç–∞—Ä–æ–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å"),this._popupInstance=i=r.Popup(n).data("_popupObj");else if(t.fn.inPopup)e.DEBUG&&e.console.warn("–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Å—Ç–∞—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.\t\t\t\t\t\t–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–æ—á–Ω–æ —Å–º–µ–Ω–∏—Ç—å –µ–≥–æ –Ω–∞ –æ–±—ã—á–Ω–æ–µ, —Ç–∞–∫ –∫–∞–∫ —Å–∫–æ—Ä–æ —Å—Ç–∞—Ä–æ–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å"),this._popupInstance=i=r.inPopup(n);else if(this._popupInstance=i=h("Popup",r,n),!this._popupInstance)throw new Error("Popup: no popup installed");return i},y=function(t){w.call(this).Toggle(t)},b=function(t,e){var n=this._Elems.jCountdownTime;t?y.call(this,!1):n&&n.text(e)};return{_Init:function(t,e){var n,r,o;if(r=t.data("_notificationObj"))return r;e=s(!0,{},e,i.get("Notification")),this._Opts=n=s(!0,{},p,e),this._Elems=l(n.cssSels.Main,t,{jPopupBlock:t}),c.call(this,{Types:{hide:n.onHide}}),this._textElems=o=m.call(this),this._defaultTexts=u(o,null,f),this._Timers={}},Notify:function(t,e){var n=this._Elems.jCountdownCont,r=!isNaN(e);_.call(this,t),y.call(this,!0),n&&n.toggle(r),r&&d.call(this,e,b.bind(this))}}}()),u=function(){var e,n=function(){var e;return function(){var n,r,s,a;return e&&e.length||(n=i.get("Notify"))&&(r=n.blockSel||n.defBlockSel,s=n.blockTemplate,a=n.blockContSel,r?e=t(r):o(s,"function")&&a&&(e=t(s()).appendTo(a))),e}}();return function(t,r,i){var s;e||(s=n())&&s.length&&(e=l(s)),e&&(o(i,"function")&&e.once("hide",i),e.Notify(t,r))}}();s(e.getNameSpace("Comp.jQuery.Tools",n),{Notification:l,Notify:u,notifyByKey:function(){var e=n.Instances.stateObject;return function(n,r,i){e&&n instanceof Array&&r instanceof Array&&n.length==r.length&&t(function(){for(var t,s=e.State(),o=!1,a=0;a<n.length;a+=1)if(t=n[a],s.hasOwnProperty(t)){s[t]=null,o=!0,u(r[a],i);break}o&&e.pushToState(s,!1,!0)})}}()})}(window.jQuery,window,window.ru.mail.cpf)},66:function(t,e){!function(t,e,n){"use strict";var r=n.Basic,i=r.Extend,s=r.typeOf,o=(n.Tools.Cookie||t.cookie,n.Mixins),a=function(){var t={},e=new Promise(function(e,n){t.resolve=e,t.reject=n});return e.catch(function(){}),t.promise=function(){return e},t},l=r.getConstructor(function(){var u=n.Tools.Auth,c=r.moduleOpts,h={cssSels:{Items:null,complainBtn:null,complainBtnText:null},cssClss:{Button:{Complained:null,Avalible:null,Pending:null,Error:null}},uiTexts:{Button:{Complained:null,Avalible:null,Pending:null,Error:null}},forumParams:{topicId:null,forumId:null},cookieStoreParams:{path:null},itemIdAttr:"data-id",onComplain:null,reqUrl:null,useConfirm:!1,confirmMessage:"",oneInstance:!0,useContainer:!0,storePrefix:"comm"},p=function(){var n,r,i,o=!1;try{o="localStorage"in e&&null!==(n=e.localStorage)}catch(t){}return o||(r=t.cookie,i=function(e,n,i,s){var o=t.extend({expires:e?7:-1},s);r(n,i,o)},n={getItem:function(t){return r(t)},setItem:i.bind(null,!0),removeItem:i.bind(null,!1)}),function(t,e){var r=this._Opts.cookieStoreParams;if(null===e)n.removeItem(t,e,r);else{if(s(e,"undefined"))return n.getItem(t);n.setItem(t,e,r)}}}(),d=function(t,e,n){var r=!s(n,"boolean"),i=[this._Opts.storePrefix+t,e.topicId].join("/");if(r)return 1==p.call(this,i);p.call(this,i,n?1:null)},f=function(){var e=function(e,n,r){var i=this._Params,s=null;null!=r&&(s=t.extend({userId:r},i,n)),e.call(this,s)};return function(t,n){u.onGetStatus(e.bind(this,t,n))}}(),m=function(t,e){var n=this._Opts.transport||this.transport,r={rid:t,tid:e.topicId};return e.requestData&&i(r,e.requestData),n({url:this._Opts.reqUrl,dataType:"json",type:"post",data:r,secure:!0}).then(function(n){var r=e.oOnComplain;n.status?(d.call(this,t,e,!0),r.resolve({commentId:t,params:e})):r.reject("BAD_RESPONSE")}.bind(this),function(){e.oOnComplain.reject("HTTT_ERROR")})},g=function(t,e){var n,r,i,s=this._Opts,o=s.cssClss.Button,a=s.uiTexts.Button;if(t&&t.length){t.data("disabled","avalible"!=e);for(var l in o)o.hasOwnProperty(l)&&(r=e==l.toLowerCase(),t.toggleClass(o[l],r),r&&(n=l));n&&(i=a[n])&&t.find(s.cssSels.complainBtnText).text(i)}},_=function(e,n){var r=a();return n=t.extend({oOnComplain:r},n),f.call(this,function(t){null!==t?e&&!d.call(this,e,t)?(g.call(this,n.jBtn,"pending"),m.call(this,e,t)):r.reject("WRONG_OBJECT"):r.reject("NO_AUTH")},n),r.promise()},v=function(){var e=this,n=this._Opts,r=this._Elems.jList,i=n.cssSels,s=n.itemIdAttr;f.call(this,function(o){var a=n.useContainer?r.find(i.Items):r;null!=o&&a.each(function(){var n=t(this),r=n.attr(s),a=d.call(e,r,o);r&&g.call(e,n.find(i.complainBtn),a?"complained":"avalible")})})},w=function(n){var r=this,i=t(n.currentTarget),o=this._Opts,a=i.parents(o.cssSels.Items),l=a.attr(o.itemIdAttr);if(l&&!i.data("disabled")){if(n.preventDefault(),o.useConfirm&&!e.confirm(o.confirmMessage))return;_.call(this,l,{jBtn:i,jItem:a}).then(function(){var t=o.onComplain;s(t,"function")&&t.call(r),g.call(r,i,"complained")},function(t){"WRONG_OBJECT"!=t&&"NO_AUTH"!=t&&g.call(this,i,"error")}.bind(this))}},y=function(){var t=this._Opts.cssSels;this._Elems.jList.on("click",t.complainBtn,w.bind(this))};return{_mixins:[o.transport],_Init:function(e,n){var r,i;if(n=t.extend(!0,{},n,c.get("Complain")),r=t.extend(!0,{},h,n),r.oneInstance){if((i=e.data("_complainObj"))instanceof l)return i;e.data("_complainObj",this)}this._Elems={jList:e},this._Opts=r,this._Params=r.forumParams,v.call(this),y.call(this)}}}());t.fn.initComplain=function(t){return l(this,t),this}}(window.jQuery||window.$,window,window.ru.mail.cpf)},67:function(t,e){!function(t,e,n){var r,i,s,o=n.Basic,a=o.Extend,l=o.typeOf,u={complainOpts:{cssSels:{Items:".js-comments_comment",complainBtn:".js-comments_complaint",complainBtnText:".js-comments_complaint_text"},cssClss:{Button:{Complained:"comment__action_complaint_done",Avalible:"comment__action_complaint_active",Pending:"comment__action_complaint_loading",Error:"comment__action_complaint_error"}},uiTexts:{Button:{Complained:"–ñ–∞–ª–æ–±–∞ –ø—Ä–∏–Ω—è—Ç–∞. –°–ø–∞—Å–∏–±–æ!",Error:"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏"}},forumParams:{topicId:null},cookieStoreParams:{path:null},itemIdAttr:"data-id",reqUrl:null,useContainer:!1,oneInstance:!1},deleteOpts:{cssSels:{complainBtn:".js-comments_delete"},cssClss:{Button:{Complained:"comment__action_delete_done",Avalible:"comment__action_delete_active",Pending:"comment__action_delete_loading",Error:"comment__action_delete_error"}},uiTexts:{Button:{Complained:"–°–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ",Error:"–î–µ–π—Å—Ç–≤–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ"}},onComplain:function(){},storePrefix:"delete",useConfirm:!0,confirmMessage:"–£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?"},adminDeleteOpts:{cssSels:{complainBtn:".js-comments_admin_delete"},forumParams:{topicId:null,requestData:{action:"hide_reply_by_moderator"}}}},c=function(t){var e=this._Model._State.topicId;r&&e&&(r.forumParams.topicId=i.forumParams.topicId=s.forumParams.topicId=e),t.initComplain(r),t.initComplain(i),t.initComplain(s)},h=function(t){var e=t.pager;return{currentPage:e.currentPage,totalPages:e.totalPages,totalComments:e.commentsCount,commentsList:t.list}},p=function(t){var e=t.comments&&t.comments.list;return{commentsList:e&&e.length?e.map(function(t){return t.avatarSize=32,t}):[]}},d=function(t){var e=t.errors;if(e)if(e.form&&e.form.length)t.error={message:e.form[0]};else if(e.fields){var n=e.fields;for(var r in n)if(n.hasOwnProperty(r)&&n[r].length){t.error={message:n[r][0]};break}}else l(e,"string")&&(t.error={message:e});return t},f=o.getConstructor(function(){return{_Init:function(t){var e=a(!0,{},u,t);r=e.complainOpts,i=a(!0,{},r,e.deleteOpts,{reqUrl:e.deleteUrl}),s=a(!0,{},i,e.adminDeleteOpts,{reqUrl:e.adminUrl})},prepareComments:c,preparePageResponse:h,prepareHistoryResponse:p,preparePostCommentResponse:d}}());e.getNameSpace("Comp.jQuery.Comments",n).prepareComments=f}(window.jQuery||window.$,window,window.ru.mail.cpf)},68:function(t,e){!function(t,e,n){"use strict";var r=n.Basic,i=n.Comp,s=n.Tools,o=r.Extend,a=r.typeOf,l=i.Methods.initCallbacks,u=s.Auth.onGetStatus,c=n.Types.String.Url,h=c.addParams,p=c.getParams,d=n.Instances.stateObject,f=s.Cookie||t.cookie,m=function(){},g=r.getConstructor(function(){function n(t,e){var n=this._Opts.urlParams,r=n.extraParams&&n.extraParams.comments,i=n.lastParam,s=this._State,a={};return a[n.topicParam]=s.topicId,t==i?a[i]=1:a[n.pageParam]=e?Math.min(s.currentPage+1,s.totalPages):t,r&&o(a,r),h(a,n.commentsUrl)}function r(t){var n,r=parseInt(t.currentPage,10),i=this._Opts.urlParams.pageParam,s=e.location.href.replace(/[?#].*$/,""),a=p(s)||{};1!==r?a[i]=r:delete a[i],n={__location:{url:h(a,s,!0)}},o(!0,n,a),d.pushToState(n,!1,!0)}function c(t){t?this._AuthDeferred.resolve():(s.jQuery.showLoginPopup(),this._AuthDeferred.reject())}function g(t,e){var n=t?"errorRequest":"errorSend";this.reportError(this._Opts[n],e&&e.message),this._fire(n.toLowerCase(),[e||null])}function _(t){var e=this,n=this._Opts,r=n.preparePostCommentResponse,i=n.useNewApi&&a(f,"function")?{"X-CSRFToken":f("Mpop")}:{},s=function(t){if(n.useNewApi)t.topicId&&(e._State.topicId=t.topicId),t.status?e._fire("commentpost",[t]):g.call(e,!1,{message:t.msg,data:t});else{a(r,"function")&&(t=r(t));var i=t.comments;!t.error&&i.commentsList&&i.commentsList.length?(i.reply=t.reply,t.comments.topicId&&(e._State.topicId=t.comments.topicId),e._fire("commentpost",[i]),v.call(e,i)):g.call(e,!1,t.error)}};n.transport({url:n.urlParams.postUrl,data:t,dataType:"json",type:"POST",headers:i}).then(s,g.bind(e,!1))}function v(t,e){var n=this,r=this._State,i=parseInt(t.currentPage,10),s=parseInt(t.totalPages,10);r.currentPage=i,r.totalPages=s,r.totalComments=t.commentsCount,this._fire("beforegetpage",[t]),this._fire("getpage",[t]),t.isNext||this._fire("pagechange",[t]),a(e,"function")&&e.call(null,t),i==s&&(this.noRequest=!0,this.ignoreTimeout=setTimeout(function(){n.noRequest=!1},this._Opts.newRequestDelay))}var w={cssSels:{errorDescr:null},urlParams:{postUrl:null,commentsUrl:null,historyUrl:null,extraParams:{post:null,comments:null,history:null},topicParam:"tid",pageParam:"page",commentParam:"comment_id",lastParam:"last",lastPageVal:"last",replyToComment:"reply_",addComment:"add_comment",targetComment:"comment_"},transport:function(){return Promise.resolve(t.ajax.apply(null,arguments))},allowSetPage:!0,texts:null,commentsPerPage:25,newRequestDelay:6e4,currentPage:null,totalPages:null,topicId:null,onBeforeGetPage:null,onGetPage:null,onPageChange:null,onPageResize:null,onPost:null,onFormRequest:null,onAddForm:null,onStateChange:null,onScrollChange:null,errorSend:"sendError",errorRequest:"requestError",preparePageResponse:null,prepareHistoryResponse:null,useNewApi:!1};return{_Init:function(t){var n,i,s,a,u,c=d.State();this._Opts=n=o(!0,{},w,t),i=n.urlParams,u=parseInt(n.currentPage,10),this._State=s={currentPage:u,totalPages:parseInt(n.totalPages,10),totalComments:parseInt(n.totalComments,10),topicId:n.topicId,reply:i.addComment in c,comment:c[i.targetComment]},l.call(this,{Types:{beforegetpage:n.onBeforeGetPage,getpage:n.onGetPage,pagechange:n.onPageChange,pageresize:n.onPageResize,commentpost:n.onPost,formrequest:n.onFormRequest,addform:n.onAddForm,statechange:n.onStateChange,scrollchange:n.onScrollChange,errorsend:null,errorrequest:null,load:null}}),n.allowSetPage&&this.bind("pagechange",r),c[i.pageParam]&&this.getPage(c[i.pageParam]),isNaN(u)&&this.getPage(1),c[i.replyToComment]&&(s.reply=c[i.replyToComment]),s.reply&&(a=e.location,d.pushToState({__location:{url:a.pathname+a.search}},!1,!0))},getState:function(){return o({},this._State)},getPage:function(t,e,r){var i=this,s=this._Opts,o=s.preparePageResponse,l=function(n){var l=s.urlParams;if(a(o,"function")&&(n=o(n)),!n.currentPage||!parseInt(n.currentPage,10))return void g.call(i,!0);n.isNext=e,t!=l.lastParam&&t!=l.lastPageVal||(n.isLast=!0),i._fire("load",[!1]),v.call(i,n,r)};this._fire("load",[!0]),s.transport({url:n.call(this,t,e)}).then(l,g.bind(this))},getNextPage:function(t,e){var n=this._State;n.currentPage!=n.totalPages&&this.getPage(t,!0,e)},reportEvent:function(t,e){o(this._State,e),this._fire(t,[this.getState()]),delete this._State.message},reportError:function(t,e){var n,r=this._Opts,s=r.texts,o=r.cssSels.errorDescr;t in s&&(n=s[t],o&&e&&(n.extraElems={},n.extraElems[o]=e),i.jQuery.Tools.Notify(n))},getHistory:function(e,n,r){var i=this._Opts,s=i.urlParams,o=i.prepareHistoryResponse,l=g.bind(this),u={};u[s.topicParam]=this._State.topicId,u[s.commentParam]=e;var c=function(e){a(o,"function")&&(e=o(e));var i=e.commentsList;if(!i||!i.length)return void l(!0);Promise.resolve(r).then(function(){a(r,"function")&&(i=i.map(r)),a(n,"function")&&n.call(null,t.trim(i.join("")))})};i.transport({url:h(u,s.historyUrl)}).then(c,l)},postComment:function(t){a(t,"string")&&-1!==t.indexOf("&")&&(t=t.split("&").reduce(function(t,e){return e=e.split("="),e.length>1?t[e.shift()]=e.join("="):t[e[0]]="",t},{})),new Promise(function(t,e){this._AuthDeferred={resolve:t,reject:e}}.bind(this)).then(_.bind(this,t),m),u(c.bind(this))},getForm:function(t){new Promise(function(t,e){this._AuthDeferred={resolve:t,reject:e}}.bind(this)).then(this._fire.bind(this,"formrequest",[t]),m),u(c.bind(this))}}}());e.getNameSpace("Comp.jQuery.Comments",n).commentsManager=g}(window.jQuery,window,window.ru.mail.cpf)},69:function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e,r,i){"use strict";var s=r.Basic,o=s.typeOf,a=s.Extend,l=r.Tools,u=r.Comp.jQuery,c=l.Auth,h=u.Elems.jWindow,p=i&&i.csstransforms&&i.csstransitions;if(p)var d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"}[i.prefixed("transition")];var f=s.getConstructor(function(){function i(){var n=this,i=this._Elems,a=this._Opts,u=a.cssSels,c=u.Main,p=a.cssClss,d=this._Model,f=this._State,g=p.sending,_=i.jSubmit;d.bind("formrequest",y.bind(this)),d.bind("errorsend",function(){_.removeClass(g)}),d.bind("beforegetpage",function(t){t.isNext||i.jWanderForm.detach()}),d.bind("commentpost",function(){i.jSubmit.removeClass(g),i.jParent.find(c.textarea).val("").trigger("change"),i.jWanderForm.detach()}),a.handleScroll&&(d.bind("pageresize",function(t){var e=t.message;e&&!1===e.pagerFixationChanged||(f.wrapHeight=i.jWrap.outerHeight(),f.bFixForm=!0,v.call(n))}),d.bind("scrollchange",function(t){var e=t.scrollExcessBottom||0;f.scrollLimitTop=t.scrollLimitTop||0,f.scrollExcessBottom!=e&&(f.scrollExcessBottom=e,i.jFixedForm.css("bottom",e))}),r.Comp.jQuery.Tools.winHndlrs.attach(function(t,e,r){var s,o,l,u=i.jParent,c=!1;"resize"==r&&(l=u.offset(),o=i.jWrap,f.wrapWidth=u.parent().width(),f.wrapHeight=o.outerHeight(),f.wrapTop=o.offset().top,f.formLeft=l.left,c=!0),a.handleScroll&&!f.isFixed&&(s=(l||u.offset()).top-t.top-f.scrollLimitTop,d.reportEvent("scrollchange",{scrollExcessTop:s>0?0:s})),v.call(n,t,e,c)}),(h||t(e)).on("load",m.bind(n)),i.jFixedForm.on("mouseup",m.bind(n))),_.on("click",function(e){e.preventDefault();var n=this._Opts.cssSels,r=t(e.currentTarget),i=r.parents(n.form),l=a.beforeSubmit;r.hasClass(g)||Promise.resolve(o(l,"function")?l.call(this,i):null).then(function(t){if(!1!==t){var e=i.find(c.textarea),n=e.val(),o=n.length;o>=a.minLength?(r.addClass(g),a.showInlineError&&(i.removeClass(a.cssClss.formError),i.find(a.cssSels.errorTextEmpty).hide()),o>a.maxLength&&e.val(n.substr(0,a.maxLength)),d.postComment(s(i))):a.showInlineError?(i.addClass(a.cssClss.formError),i.find(a.cssSels.errorTextEmpty).show()):d.reportError(a.errorEmptyComment)}}.bind(this))}.bind(this)),i.jParent.on("click",u.authLink,function(t){var n,r=this.getAttribute("data-"+a.redirectDataAttr);r&&(n={returnPage:r,failPage:e.location.href}),l.jQuery.showLoginPopup(n||{}),t.preventDefault()}).on("click",u.rulesLink,function(e){var r=a.handleRulesLink;r?r.call(n,e,"form"):(e.preventDefault(),t(u.rulesPopup).Popup(null,"Show"))}),i.jTextarea.on("keydown",function(e){(e.ctrlKey||e.metaKey)&&13==e.which&&t(this).parents(u.form).find(u.Main.submit).trigger("click")});var b=i.jFixedForm.find(c.textarea);if(p.formShort){var P=w.bind(this,n);b.on("keyup change",function(){var e;return function(){var n=!t.trim(b.val());n!=e&&(e=n,P())}}())}}function s(t){var e={};return t.find(":input").each(function(t,n){n.name&&(e[n.name]=n.value)}),e}function m(){var t=this._State,n=this._Elems,r=n.jFixedForm.height();t.formHeight=r,this._Model.reportEvent("scrollchange",{scrollLimitBottom:r}),t.isFixed&&(n.jWrap[0].style[this._Opts.parentSizeProp]=r+"px");var i=document.createEvent("HTMLEvents");i.initEvent("resize",!0,!0),e.dispatchEvent(i)}function g(){return{width:h.width(),height:h.height()}}function _(){return{top:h.scrollTop(),left:h.scrollLeft()}}function v(t,e,n){n=n||!1;var r,i,s,o,a=this._State,l=this._Elems,u=this._Opts,c=l.jFixedForm,h=c.data("width"),p=a.formLeft;a.bFixForm&&(t||(t=_()),e||(e=g()),o=t.left,r=e.width,i=t.top<=a.wrapHeight+a.wrapTop-e.height+u.scrollCorrection,s=i?a.wrapWidth:"100%",s!=h&&(c.width(s).data("width",s),a.formHeight=c.height()),(a.isFixed!=i||n)&&(a.isFixed=i,a.winScrollLeft=o,c.toggleClass(u.cssClss.formFixed,i),c.css("left",i?p-o:0),l.jWrap[0].style[u.parentSizeProp]=i?a.formHeight+"px":0),a.winScrollLeft==o&&a.winWidth==r||(a.winScrollLeft=o,a.winWidth=r,c.css("left",i?p-o:0)))}function w(){var e=this._Opts.cssClss,n=e.Avatar,r=this._Opts.cssSels,i=this._Elems.jFixedForm,s=i.find(r.Main.textarea),o=i.find(r.Main.avatar),a=t.trim(s.val()),l=!a;e.formShort&&(i.toggleClass(e.formShort,l),p?i.one(d,m.bind(this)):m.call(this),l?o.removeClass(n.large).addClass(n.small):o.removeClass(n.small).addClass(n.large))}function y(t){var e=this._Opts,n=e.cssSels,r=e.beforeAddForm,i=e.afterAddForm;Promise.resolve(!o(r,"function")||r.call(this)).then(function(r){if(r){var s=this._Elems.jWanderForm,a=s.find(n.Main.textarea).val("").trigger("change");s.find(n.commentId).val(t.commentId),s.find(n.form).removeClass(e.cssClss.formError),t.formWrap.append(s),o(i,"function")&&i.call(this),setTimeout(function(){a.focus()},100),this._Model.reportEvent("addform",{activeComment:t.comment})}}.bind(this))}function b(t){function e(t){r.css({"background-image":"url("+t+")"})}var r=this._Elems.jAvatar,i=this._Opts.handleAvatarUrl,s="//cp-filin.mail.ru/pic?"+encodeURI("width=90&height=90&email="+t);if(t&&r&&r.length)if("function"==typeof i){var o=i.call(this,t);void 0===o||null===o?e(s):"string"==typeof o?e(o):"object"===n(o)&&("then"in o?o.then(function(t){e("string"==typeof t?t:s)}):e(s))}else e(s)}var P=u.Tools.getElements,C={cssSels:{Main:{fixedForm:".js-comments_form_fixed",wanderForm:".js-comments_form_wander",submit:".js-comments_form_submit",textarea:".js-comments_form_text",avatar:".js-avatar"},form:".js-comments_form",commentId:".js-comment_id",wrap:".js-comments",authLink:".js-comments_auth",rulesLink:".js-comments_rules",rulesPopup:"#box-notice",errorTextEmpty:".js-error-text_empty"},cssClss:{sending:"",formFixed:"",formShort:"",formError:"comment-form_error",Avatar:{small:"avatar_size_45",large:"avatar_size_90"}},redirectDataAttr:"redirect",parentSizeProp:"paddingBottom",minLength:2,maxLength:5e3,errorEmptyComment:"emptyComment",handleScroll:!0,scrollCorrection:0,beforeSubmit:null,beforeAddForm:null,afterAddForm:null,handleRulesLink:null};return{_Init:function(t,e,n){var r,s,o,l,u,h=t.data("_commentForm"),p=b.bind(this);if(h instanceof f)return h;t.data("_commentForm",this),this._Model=e,this._Opts=r=a(!0,{},C,n),this._Elems=s=P(r.cssSels.Main,t,{jParent:t,jWrap:t.find(r.cssSels.wrap).add(t.closest(r.cssSels.wrap)).eq(0)}),u=e.getState(),o=s.jWrap,this._State={bFixForm:!!r.commentsCount,wrapTop:o.offset().top,wrapHeight:o.outerHeight(),wrapWidth:t.parent().width(),formLeft:t.offset().left,formHeight:s.jFixedForm.height(),scrollLimitTop:u.scrollLimitTop||0,scrollExcessBottom:0},c.onGetStatus(p),c.on("authChange",p),i.call(this),w.call(this),!0===u.reply&&(l=s.jFixedForm.find(r.cssSels.Main.textarea),setTimeout(function(){l.focus()},500))}}}());t.fn.commentForm=function(n,r){return e.DEBUG&&e.console.warn("–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Å—Ç–∞—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.\t\t\t\t–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–æ—á–Ω–æ —Å–º–µ–Ω–∏—Ç—å –µ–≥–æ –Ω–∞ –æ–±—ã—á–Ω–æ–µ, —Ç–∞–∫ –∫–∞–∫ —Å–∫–æ—Ä–æ —Å—Ç–∞—Ä–æ–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å"),this.each(function(){new f(t(this),n,r)})},e.getNameSpace("Comp.jQuery.Comments",r).commentForm=f}(window.jQuery,window,window.ru.mail.cpf,window.Modernizr)},70:function(t,e){!function(t,e,n){"use strict";var r=n.Basic,i=r.Extend,s=r.typeOf,o=n.Tools,a=o.Auth,l=n.Comp.jQuery,u=l.Elems,c=o.jQuery.showLoginPopup,h=r.getConstructor(function(){function n(t){return t instanceof e.jQuery?t.is(":visible"):!(0===t.offsetWidth&&0===t.offsetHeight)}function r(){var e=this,r=this._Opts,i=this._Elems,o=i.jParent,a=i.jContainer,u=i.jLoading,h=this._Model,g=this._State,_=r.cssSels,v=r.cssClss,w=r.scrollBottom,y=_.comment,b=r.prepareComments;h.bind("getpage",m.bind(e)),h.bind("addform",function(n){var r=n.activeComment;r.addClass(v.showForm),d.call(e,r,!0),g.replyTo&&(g.replyTo=!1,t(p.bind(e,r))),e._Model.reportEvent("pageresize")}),u&&u.length&&h.bind("load",function(t){u.toggle(t)}),r.handleScroll&&(h.bind("statechange",function(t){var n=t.winHeightDelta;isNaN(n)||(e._State.winHeightDelta=n)}),h.bind("scrollchange",function(t){var e=t.scrollLimitBottom||0;g.scrollLimitBottom!=e&&(g.scrollLimitBottom=e)}),l.Tools.winHndlrs.attach(function(t,r,s){var l,u,c,p,d,f=t.top,m=e._Pages,v=m.length;if(n(a))if("scroll"==s){for(c=0;c<v&&null!==(l=m[c]);c++){if(u=l.data(),0===c&&(p=parseInt(u.page,10)),!(u.top<=f)){c==v-1&&f>g.top+g.height-r.height&&(p=parseInt(u.page,10));break}p=parseInt(u.page,10)}g.currentPage!=p&&(g.currentPage=p,h.reportEvent("pagechange",{currentPage:p})),!e._isPageRequested&&f>g.top+g.height-r.height-w&&(e._isPageRequested=!0,h.getNextPage(o.find(_.comment).last().data("id")))}else if(e._isPageRequested=!1,d=g.winHeightDelta||0,g.top=i.jContainer.offset().top,l)for(c=0;c<v;c++)l=m[c],l.data("top",l.offset().top-d)})),r.useNewApi&&h.bind("commentpost",function(n){var o,a=n.comment,l=e._State,u=r.prepareComments,c=r.commentTemplate;a&&(l.newComment=a.id),r.appendNewComment&&a?Promise.resolve(c).then(function(){o=t(c(a)),s(u,"function")&&u.call(e,o),r.insertToBegin?i.jContainer.prepend(o):i.jContainer.append(o),p.call(e,a.id)}):n.page&&h.getPage(n.page)}),o.on("click",_.replyBtn,function(e){e.preventDefault();var n=t(this),r=n.parents(y).eq(0);g.user?h.getForm({commentId:r.data("id"),formWrap:r.find(_.formContainer).last(),comment:r}):c({returnPage:n.attr("href")})}).on("click",_.parent,function(n){n.preventDefault(),d.call(e,f.call(e,t(this).parents(y),v.showParent))}).on("click",_.history,function(n){n.preventDefault();var i=t(this),o=i.parents(y),a=o.find(_.historyCont),l=i.data("threadLoaded"),u=v.showHistory;l?(f.call(e,o,u,!a.is(":visible")),d.call(e,o)):h.getHistory(o.data("id"),function(t){i.data("threadLoaded",!0),a.html(t);var n=a.find(_.comment).data("included",!0);s(b,"function")&&b.call(e,n),f.call(e,o,u,!0),d.call(e,o,!0)},r.commentTemplate)}).on("click",_.showMore,function(e){e.preventDefault(),t(this).parents(_.comment).addClass(v.showMore)}).on("click",_.rulesLink,function(n){var i=r.handleRulesLink;i?i.call(e,n,"list"):(n.preventDefault(),t(_.rulesPopup).Popup(null,"Show"))})}function o(t){return this._Elems.jContainer.find("#"+this._Opts.commentIdPrefix+t)}function p(t,e){isNaN(t)||(t=o.call(this,t)),t.length&&(!0===e&&d.call(this,t,e),this._Elems.jScrollBlock.animate({scrollTop:t.offset().top+this._Opts.scrollDeltaTop-(this._State.winHeightDelta||0)}))}function d(e,n){var r,i,o,a,l,c,h,p=this._Opts,d=this._Elems,f=p.cssClss,m=p.cssSels,g=f.active,_=f.showForm,v=e.data("included"),w=v?_:g+" "+_+" "+f.showHistory+" "+f.showParent,y=!1;s(n,"undefined")?e.find(m.parentCont+","+m.historyCont+",form").each(function(){if(t(this).is(":visible"))return y=!0,!1}):y=n,y&&d.jContainer.find("."+g+", ."+_).not(e).removeClass(w),v||e.toggleClass(g,y),y&&(a=u.jWindow,l=a.scrollTop(),r=e.offset().top,i=r+p.scrollDeltaTop,o=l+a.height()-this._State.scrollLimitBottom,c=e.outerHeight(),r+c>o&&(h=!0,a.scrollTop(l-o+r+c)),i<(h?a.scrollTop():l)&&a.scrollTop(i)),p.handleScroll&&this._Model.reportEvent("pageresize",{pageHeight:d.jParent.outerHeight()})}function f(t,e,n){var r=this._Opts.cssClss,i=r.showParent;return t.toggleClass(e,n).removeClass(e==i?r.showHistory:i)}function m(e){var n,r,i,o,a,l,c=this._Elems,h=this._Opts,p=c.jContainer,d=c.jCommentsCount,f=e.commentsList,m=c.jPagesContainer,g=c.jParent,_=u.jWindow,v=e.reply,w=c.jScrollBlock,y=h.prepareComments,b=h.commentTemplate;return!v&&this._State.newComment&&(v=this._State.newComment,delete this._State.newComment),e.topicId&&(this._State.topicId=e.topicId),Promise.resolve(b).then(function(){if(s(b,"function")&&(f=f.map(b)),a=t(t.trim(f.join(""))),l=a.eq(0).data("page",e.currentPage),s(y,"function")&&y.call(this,a),e.isNext)p.append(a),this._Pages.push(l.data("top",l.offset().top));else{p.empty().append(a),this._Pages=[l.data("top",l.offset().top)];var u=a.filter("[data-id="+v+"]");n=u.length?u.offset().top+u.outerHeight()-_.height()+h.scrollCorrectBottom:e.isLast||v?g.offset().top+g.outerHeight()-_.height()+h.scrollCorrectBottom:c.jPagesContainer.offset().top+h.scrollCorrectTop-(this._State.winHeightDelta||0),w.animate({scrollTop:n})}m.data("visible")||(m.data("visible",!0).show(),this._Model.reportEvent("pagechange",e)),v&&(i=h.cssClss.active,r=a.filter("#"+h.commentIdPrefix+v).addClass(i),setTimeout(function(){r.removeClass(i)},h.newCommentActiveTime)),h.handleScroll&&(this._Model.reportEvent("pageresize",{pageHeight:g.outerHeight(!0)}),_.trigger("scroll")),d&&(o=e.commentsCount,d.text(o),0===h.commentsCount&&(h.commentsCount=o,d.parents(h.cssSels.commentsCountWrap).show())),this._isPageRequested=!1,this._State.height=p.height()}.bind(this))}function g(n){var r,i=this._Opts,s=this._State,a=this._Model,l=s.replyToId;s.user=n,n?(this._Elems.jParent.addClass(i.cssClss.authorized),isNaN(l)||(s.replyToId=null,r=o.call(this,l),r.length&&(s.replyTo=!0,a.getForm({commentId:l,formWrap:r.find(i.cssSels.formContainer),comment:r})))):t(function(){if(l){s.replyToId=null;var t=e.location,n=a._Opts.urlParams,r=isNaN(l)?n.addComment:n.replyToComment+l,i=t.pathname+t.search+"#"+r;c({returnPage:i})}})}var _={cssSels:{Main:{container:".js-comments_list",commentsCount:".js-comments-cnt",pagesContainer:".js-comments_pages",loading:".js-comments_loading"},commentsCountWrap:".js-comments_cnt_wrp",comment:".js-comments_comment",history:".js-comments_history",parent:".js-comments_parent",historyCont:".js-comments_history_cont",parentCont:".js-comments_parent_cont",replyBtn:".js-comments_reply",formContainer:".js-comments_form_cont",rulesLink:".js-comments_rules",rulesPopup:"#box-notice",showMore:".js-comments_toggle"},cssClss:{loading:"",active:"",showHistory:"",showParent:"",showForm:"",authorized:"",showMore:""},prepareComments:null,newCommentActiveTime:3e3,commentIdPrefix:"comment_",currentPage:null,commentsCount:null,handleScroll:!0,scrollBottom:300,scrollDeltaTop:0,scrollCorrectTop:-1,scrollCorrectBottom:1,useNewApi:!1,appendNewComment:!1,insertToBegin:!1,handleRulesLink:null};return{_Init:function(e,n,o){var u,c,d,f,m,v,w,y,b,P=e.data("_commentsList"),C=this,S=n.getState(),T=g.bind(this);if(P instanceof h)return P;e.data("_commentsList",this),this._Model=n,this._Opts=u=i(!0,{},_,o),c=u.cssSels,this._Elems=d=l.Tools.getElements(c.Main,e,{jParent:e}),d.jScrollBlock=t("html, body"),f=d.jContainer,m=d.jPagesContainer,m.data("visible",m.is(":visible")),v=f.find(c.comment),w=v.eq(0),y=u.currentPage,this._State={top:f.offset().top,height:f.height(),currentPage:y,scrollLimitBottom:S.scrollLimitBottom||0,replyToId:S.reply},this._Pages=[w.length?w.data({top:w.offset().top,page:y}):null],b=u.prepareComments,s(b,"function")&&b.call(this,v),r.call(this),S.comment&&t(p.bind(C,S.comment,!0)),a.onGetStatus(T),a.on("authChange",T)}}}());t.fn.commentsList=function(n,r){return e.DEBUG&&e.console.warn("–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Å—Ç–∞—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.\t\t\t\t–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–æ—á–Ω–æ —Å–º–µ–Ω–∏—Ç—å –µ–≥–æ –Ω–∞ –æ–±—ã—á–Ω–æ–µ, —Ç–∞–∫ –∫–∞–∫ —Å–∫–æ—Ä–æ —Å—Ç–∞—Ä–æ–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å"),this.each(function(){new h(t(this),n,r)})},e.getNameSpace("Comments",l).commentsList=h}(window.jQuery,window,window.ru.mail.cpf)},71:function(t,e){!function(t,e,n){"use strict";var r=n.Basic,i=r.Extend,s=r.getConstructor(function(){function r(){var e,n=this,r=this._Model,i=this._Opts,s=this._Elems,a=this._State,u=s.jWrap,c=s.jWindow;r.bind("pagechange",function(t){var e=t.totalPages;a.currentPage=t.currentPage,a.totalPages=e,a.isHidden=1==e,h.call(n,t)}),r.bind("scrollchange",function(t){var e=t.scrollExcessTop||0;a.scrollLimitBottom=t.scrollLimitBottom||0,a.scrollExcessTop!=e&&(a.scrollExcessTop=e,s.jParent.css("top",e+(a.winHeightDelta||0)))}),r.bind("statechange",function(t){var e=t.winHeightDelta;isNaN(e)||(a.winHeightDelta=e,p.call(n,o(c),!0))}),m.winHndlrs.attach(function(t,i,s){var o,c;"scroll"==s?p.call(n,t):(e=u.offset(),a.wrapTop=e.top,a.wrapLeft=e.left,p.call(n,t,!0),o=d,l.call(n),o!=d&&h.call(n,a)),a.isFixed||(c=t.top+i.height-a.scrollLimitBottom-a.wrapHeight-a.wrapTop,r.reportEvent("scrollchange",{scrollExcessBottom:c>0?0:c}))}),s.jParent.on("click",i.cssSels.button,function(e){e.preventDefault();var r=t(this).data(),s=i.dataPropName;1!=r.disabled&&n._Model.getPage(r[s]||this.getAttribute("data-"+s))}),c.on("load",function(){a.wrapTop=u.offset().top})}function o(t){return{left:t.scrollLeft(),top:t.scrollTop()}}function a(t,e){var n=this._Opts,r=n.button,i=n.cssClss,s=r.tagName,o=document.createElement(s);return o.appendChild(document.createTextNode(t)),o.title=r.title+t,o.className=(e?r.className+" "+i.activePage:r.className)+" "+i.button,o.setAttribute("data-"+n.dataPropName,t),e&&o.setAttribute("data-disabled","1"),"a"==s&&(o.href="#"),o}function l(){var t=this._Elems;d=t.jBtnWrap.width()-t.jPrev.outerWidth(!0)-t.jNext.outerWidth(!0)-10}function u(e){var n,r=t("<div />").css({position:"absolute",visibility:"hidden"});return this._Elems.jContainer.append(r.append(a.call(this,e))),n=r.width(),r.remove(),n}function c(t,e,n){var r,i,s,o=[];e>=n?(r=1,i=n):e<3?1==n?r=i=1:t!=n?(r=t,i=t+1):(r=n-1,i=n):(s=(e-1)/2,t-s>0&&t+s<=n?(r=t-s,i=t+s):t-s<=0?(r=1,i=e):(r=n-e+1,i=n));for(var a=r;a<=i;a++)o.push(a);return o}function h(t){var e,n,r,i,s,l,h,f=this._Opts,m=this._Elems,g=m.jParent,_=m.jContainer,v=f.cssSels,w=document.createDocumentFragment(),y=parseInt(t.currentPage,10),b=parseInt(t.totalPages,10),P=y==b,C=1==y,S=f.dataPropName,T=f.cssClss,I=T.disabledStepBtn,O=T.disabledEndBtn;if(b<=1)return this._State.isHidden=!0,void(f.hiddenByClass&&g.addClass(f.cssClss.hidden)||g.hide());e=Math.min(Math.floor(d/u.call(this,Math.ceil(y+f.buttonsMax/2))),f.buttonsMax),e>3&&e%2==0&&e--,n=c(y,e,b),h=n.length;for(var E=0;E<h;E++)r=n[E],w.appendChild(a.call(this,r,r==y));_.empty().append(w),m.jNext.data(S,y+1).data("disabled",P?"1":"").toggleClass(I,P),m.jPrev.data(S,y-1).data("disabled",C?"1":"").toggleClass(I,C),i=m.jLast,i.data("disabled",P?"1":"").toggleClass(O,P),l=T.disabledEndNavBtn,l&&(s=v.navButton,i.find(s).toggleClass(l,P)),p.call(this,o(m.jWindow),!0),this._State.isHidden||g.is(":visible")||f.hiddenByClass&&g.removeClass(f.cssClss.hidden)||g.show()}function p(t,e){var n,r,i,s,o,a,l,u=this._State,c=u.winHeightDelta||0,h=u.wrapHeight+c,p=t.top,d=t.left,f=p>u.wrapTop-c,m=f!==u.isFixed,g=this._Elems,_=g.jParent,v=u.wrapLeft,w=u.scrollExcessTop||0;(!u.isHidden&&m||e)&&(g=this._Elems,n=this._Opts,r=n.cssClss,i=g.jWrap,u.winScrollLeft=d,o=f?{width:i.width(),top:c+w,left:v-d}:{width:"100%",top:0,left:0},_.toggleClass(r.fixed,f).css(o),i[0].style[n.parentSizeProp]=f&&_.is(":visible")?_.outerHeight(!0)+"px":0,u.isFixed=f,l=!(parseInt(u.currentPage,10)>1)&&!f,s=g.jFirst.data("disabled",l?"1":"").toggleClass(r.disabledEndBtn,l),a=r.disabledEndNavBtn,a&&s.find(n.cssSels.navButton).toggleClass(a,l),this._Model.reportEvent("pageresize",{message:{pagerFixationChanged:m}})),d!=u.winScrollLeft&&(u.winScrollLeft=d,_.css("left",f?v-d:0)),u.scrollLimitTop!=h&&(u.scrollLimitTop=h,this._Model.reportEvent("scrollchange",{scrollLimitTop:h}))}var d,f=n.Comp.jQuery,m=f.Tools,g={cssSels:{Main:{First:".js-first",Prev:".js-prev",Next:".js-next",Last:".js-last",Container:".js-comments_page_btn_cont",btnWrap:".js-comments_btnwrap"},button:".js-comments_paging_btn",navButton:".js-nav-button"},cssClss:{disabledEndBtn:"comment-nav__to__link_disabled",disabledEndNavBtn:null,disabledStepBtn:"comment-nav__pages__arr_off",activePage:"comment-nav__pages__link_on",fixed:"comment-controls_fixed",hidden:"hidden_all"},button:{tagName:"a",className:"",title:"–°—Ç—Ä–∞–Ω–∏—Ü–∞ "},parentSizeProp:"height",currentPage:null,totalPages:null,hiddenByClass:!1,dataPropName:"page",buttonsMax:9};return{_Init:function(n,o,a){var u,c,p,d,_,v,w=n.data("_commentsPaging");if(w instanceof s)return w;n.data("_commentsPaging",this),this._Model=o,this._Opts=u=i(!0,{},g,a),this._Elems=c=m.getElements(u.cssSels.Main,n,{jParent:n,jWindow:f.Elems.jWindow||t(e)}),c.jWrap=d=n.parent(),v=u.totalPages,_=d.offset(),this._State=p={wrapTop:_.top,wrapLeft:_.left,wrapHeight:n.outerHeight(),currentPage:u.currentPage,totalPages:v,isHidden:1==v,isFixed:!1,scrollLimitBottom:o.getState().scrollLimitBottom||0,scrollExcessTop:0,winHeightDelta:0},u.cssClss.button=u.cssSels.button.substr(1),1==v&&(u.hiddenByClass&&n.addClass(u.cssClss.hidden)||n.hide()),l.call(this),h.call(this,p),n.css("visibility","visible"),r.call(this)}}}());t.fn.commentsPaging=function(n,r){return e.DEBUG&&e.console.warn("–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Å—Ç–∞—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.\t\t\t\t–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–æ—á–Ω–æ —Å–º–µ–Ω–∏—Ç—å –µ–≥–æ –Ω–∞ –æ–±—ã—á–Ω–æ–µ, —Ç–∞–∫ –∫–∞–∫ —Å–∫–æ—Ä–æ —Å—Ç–∞—Ä–æ–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å"),this.each(function(){new s(t(this),n,r)})},e.getNameSpace("Comp.jQuery.Comments",n).commentsPaging=s}(window.jQuery,window,window.ru.mail.cpf)},717:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(220),n(138),n(393),n(331)},72:function(t,e){!function(t,e,n){"use strict";function r(e){if(!o){var n=t("<div />");o=s(["ShowPopup",e.popupExt],n,null,null,[{type:"ShowPopupModel",instance:s("ShowPopupModel",n,null,e.tplData)}])}o.show()}function i(t){return function(e){e.preventDefault(),r.call(this,t)}}var s=n.Tools.initModule,o=null;e.getNameSpace("Comp.jQuery.Comments",n).utils={getRulesHandler:i,defPreventer:function(t){t.preventDefault()}}}(window.jQuery,window,window.ru.mail.cpf)},73:function(t,e){!function(t,e,n){"use strict";function r(t){var e=n.Basic.getOptions(this._Elems.jParent[0]);return w[t]||(w[t]=v("Popup",null,{templates:{parent:g.warning}},e[t]))}var i=n.Comp.jQuery.Comments,s=t(".js-comments");if(s.length){var o,a,l=n.Basic.getOptions(s[0]),u=l.currentPage,c=l.totalPages,h=l.topicId,p=l.commentsCount,d=!!l.handleScroll,f=n.Tools,m=f.getTemplate,g={comment:m("ct-comment.xml"),warning:m("ct-popup-warning.xml")},_={noMobile:"nomobile",isBanned:"banned"},v=n.Tools.initModule,w={},y=i.utils,b=y.getRulesHandler({tplData:l.customData.rulesParams,popupExt:"CommentsRules"});a=i.prepareComments({complainOpts:{forumParams:{topicId:h},reqUrl:l.complainUrl},useContainer:!1,deleteUrl:l.deleteUrl,adminUrl:l.adminUrl});var P=i.commentsManager({cssSels:{errorDescr:".js-alert__text_0"},urlParams:{postUrl:l.postUrl,commentsUrl:l.commentsUrl+"?",historyUrl:l.historyUrl+"?",topicParam:"tid",commentParam:"rid",lastParam:null,replyToComment:"reply-",targetComment:"comment-"},transport:function(t){return t.secure=!0,f.transport(t)},commentsPerPage:l.perPage,currentPage:u,totalPages:c,topicId:h,texts:l.texts,preparePageResponse:a.preparePageResponse,prepareHistoryResponse:a.prepareHistoryResponse,preparePostCommentResponse:a.preparePostCommentResponse,useNewApi:!0}),C=s.attr("data-user-url"),S=function(){var e=null;return function(n){return e||Promise.resolve(t.ajax(n,null,{dataType:"json"})).then(function(t){if(t.status&&t.user)return e=t.user})}}();t(".js-comments_add").commentForm(P,{cssSels:{Main:{textarea:"textarea"},form:"form"},cssClss:{sending:"button_disabled",formFixed:d?"comment-form_state_fixed":null,formShort:d?"comment-form_state_short":null},handleScroll:d,commentsCount:p,handleRulesLink:y.defPreventer,scrollCorrection:0,showInlineError:!0,beforeSubmit:function(){return Promise.resolve(S(C)).then(function(t){return 0===t.is_mobile_verified?(r.call(this,_.noMobile).show(),!1):1===t.is_banned?(r.call(this,_.isBanned).show(),!1):void 0}.bind(this))}}),s.commentsList(P,{cssClss:{active:"comment_active",showHistory:"comment_tree",showParent:"comment_parent",showForm:"comment_form",authorized:"comments_authorized"},prepareComments:a.prepareComments,commentTemplate:g.comment,commentIdPrefix:"comment-",commentsCount:p,currentPage:u,handleScroll:d,scrollDeltaTop:-75,useNewApi:!0,handleRulesLink:b,appendNewComment:l.appendNewComment||!1}),o=t(".js-comments_paging"),o.commentsPaging(P,{currentPage:u,totalPages:c,cssClss:{disabledEndBtn:"comments-paging__end_disabled",disabledStepBtn:"comments-paging__nav_disabled",activePage:"comments-paging__item_active",fixed:"comments-paging_fixed"},button:{tagName:"a",className:"comments-paging__item",title:"–°—Ç—Ä–∞–Ω–∏—Ü–∞ "},parentSizeProp:"paddingTop"}),P.reportEvent("statechange",{winHeightDelta:0})}}(window.jQuery||window.$,window,window.ru.mail.cpf)},74:function(t,e,n){!function(t,e,n){var r=n.Basic,i=r.typeOf,s=r.Extend,o={cssSels:{Main:{imageView:null,imageNum:null,imagesTotal:null},reloadImage:".js-photo_reload",imageProps:null,setProps:null},cssClss:{Loading:null,Error:null},useClickHandler:!0,onImgClick:null,infoAppend:{},resizeView:!0,imagesSet:0,imagesVersion:0,flashParams:null},a=r.getView(function(){function n(e,n,r){var s,o,a,l,u,c,h=this._opts.infoAppend;Array.isArray(r)||(r=Object.keys(e));for(var p=r.length;p--;)(s=r[p])in e&&(o=e[s],i(o,"string")&&(o=this._getViewParent().find(o)),o instanceof t&&o.length&&(a=n[s],u=i(a),c=h[s],"boolean"===u?o.toggle(a):i(c,"function")?c.call(this,o,a):(l=null!==a&&"undefined"!==u&&!("string"===u&&0===a.length),o.toggle(l),l&&("A"===o.get(0).tagName?o.attr("href",a):o.html(a)))))}function r(e,n){return n?"nodeType"in n?t(n):n:e}var o=function(t){return"background-size"in t||"backgroundSize"in t}(document.createElement("div").style),a=["width","height"],l=a.reduce(function(t,e){return t[e]="",t},{});return{_Handlers:{dom:{"click:Main.imageView":"_onImageClick","click:reloadImage":function(t){this._model.reloadImage(this._model.getCurrentImage().image,this._opts.imagesVersion),t.preventDefault()}},model:{imagechange:"_onImageChange",imageready:"_onImageReady",imagefail:"_onImageFail",setchange:"_onSetChange"}},_Init:function(){var t=this._opts,e=t.imagesSet;if(this._imagesSet=null===e?e:1*e,this._imagesVersion=+t.imagesVersion,isNaN(this._imagesSet)||isNaN(this._imagesVersion))throw new TypeError("imagesSet");null!==e&&this._toggleSetInfo(this._Model.getSetParams(e),e)},_onSetChange:function(t,e){null===this._imagesSet&&this._toggleSetInfo(t,e)},_setImageToView:function(n,r,s){var o,a,l,u,c=this._opts,h=!0===c.resizeView,p=i(e.swfobject,"undefined")?null:e.swfobject,d=n.src;switch(s=this._getViewElement(s),s.empty(),n.type){case"pic":"IMG"===s.get(0).tagName?s.attr("src")!==d&&(u=s.clone(!0).attr("src",d),s.replaceWith(u),this._setViewElement(u)):(l={"background-image":"url("+d+")"},h&&"cover"!==s.css("background-size")&&(l["background-size"]=r.width+"px "+r.height+"px"),s.css(l));break;case"flash":if(!p)break;a=s.children(),a.length&&(o=a.attr("id"))||(o="flash_pic_"+(new Date).getTime(),t('<div id="'+o+'"></div>').appendTo(s)),p.embedSWF(d,o,r.width,r.height,"9.0.0",null,null,c.flashParams)}return u||s},_prepareViewElement:function(t,e){var n,r=null,i=1;e=this._getViewElement(e),e.css(l);for(var s=a.length;s--&&(n=a[s]);)i=Math.min(i,e[n]()/t[n]);if(i<1)for(r={},s=a.length;s--&&(n=a[s]);)r[n]=Math.round(t[n]*i);return r},_normilizeImageViewElem:function(e,n,r){r=this._getViewElement(r);var i,s=r.get(0),a="IMG"===s.tagName,l="pic"===e&&!a&&n&&!o,u=!l&&"pic"!=e&&a;return(l||u)&&(i=t(l?"<img>":"<div>").addClass(s.className),r.replaceWith(i),this._setViewElement(i)),i||r},_processViewSizes:function(t,e,n){n=this._getViewElement(n),n.css(e||l)},_getTargetElement:r,_getViewParent:function(t){return r(this._elems.parent,t)},_getViewElement:function(t){return r(this._elems.imageView,t)},_setViewElement:function(t){this._elems.imageView=t},_showImageVersion:function(t,e){var n=!0===this._opts.resizeView,r=this._prepareViewElement(t,e),i=r||{width:t.width,height:t.height};n&&(e=this._normilizeImageViewElem(t.type,null!==r,e)),e=this._setImageToView(t,i,e),n&&this._processViewSizes(t,i,e)},_switchViewState:function(t,e,n){var r=this._opts.cssClss;n=this._getViewParent(n),e=!t&&!0===e,r.Loading&&n.toggleClass(r.Loading,e),r.Error&&n.toggleClass(r.Error,t)},_onImageReady:function(t,e,n,r){this._isTargetImage(n,r)&&(this._switchViewState(!1,!1),this._showImageVersion(t.versions[r]))},_toggleImageInfo:function(t,e){var r=this._opts.cssSels.imageProps,s=this._Model.getImagePropsList(),o=this._elems.imageNum;o&&o.text(e+1),i(r,"object")&&n.call(this,r,t,s)},_toggleSetInfo:function(t,e){var r=s({total:this._Model._getSetImages(e).length},t),i=s({total:this._elems.imagesTotal},this._opts.cssSels.setProps);n.call(this,i,r)},_onImageChange:function(t,e,n){this._isTargetImage(n)&&(this._model.getImage(e,n,this._opts.imagesVersion)||this._switchViewState(!1,!0),this._toggleImageInfo(t,e))},_onImageFail:function(t,e,n){this._isTargetImage(e,n)&&this._switchViewState(!0)},_onImageClick:function(){var t=this._opts;t.useClickHandler&&(i(t.onImgClick,"function")?t.onImgClick.apply(this,arguments):(this._normalizeModelImage(),this._Model.nextImage()))},_isTargetImage:function(t,e){var n=this._imagesSet;return(null===n||t===n)&&(i(e,"undefined")||e===this._imagesVersion)},_normalizeModelImage:function(){var t=this._Model,e=t.getCurrentImage(),n=this._imagesSet;(null!==n&&e.set!=n||null===e.set)&&t.changeSet(n||0),null===e.image&&t.changeImage(0)},_createAdvertManager:function(){return null}}}(),o,null,"ImageView");r.Extend(!0,n,{Modules:{GalleryImageView:a}})}(window.jQuery||window.$,window,window.ru.mail.cpf)},75:function(t,e,n){!function(t,e){"use strict";var n=e.Basic,r=n.typeOf,i=n.Extend,s=e.Tools.Images,o={_Handlers:null,preloadDepth:null,preloadTimeout:2e4,Loop:!1,imageProps:null,urlSeparator:"|",imageType:"pic"},a=n.Constructors.getModel(function(){function t(t){this.loading=!0,t&&(this.width=t.width,this.height=t.height)}function e(){delete this.loading}function o(n,r){var i;return"loading"in n||(i=s.canPreload(n.type),i?(n.loading=s.preloadImage(n.src,r),n.loading.then(t.bind(n),e.bind(n))):n.loading=i),n.loading}function a(t,e){var n=this._Current;return n.image===t&&n.set===e}function l(t,e){var n,r,i=this._Opts.preloadDepth;if(i>0&&a.call(this,t,e)){n=this._getCurrentSetImages();for(var s=t+i;s>=t-i;s--)(r=this._getImageId(s))!=t&&this._startPreload(n[r],r,e)}}function u(t,e,n,r){if(a.call(this,e,n))if(void 0!==r){var i=this._getCurrentSetImages();this._trigger("imageready",i[e],e,n,t)}else this._trigger("imagefail",e,n,t)}function c(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.addImagesSet(t[e]);else r(t,"object")&&this.addImagesSet(t)}function h(t,e,n){var r,o=t.split(e),a=o[2],l={src:o[0],type:a};return a&&s.isTypeCorrect(a)||(l.type=a=s.getImageTypeFromUrl(o[0])||n),a?(r=o[1])&&(r=r.split("x")).length>1&&i(l,{width:1*r[0],height:1*r[1]}):l=null,l}function p(t){var e,n,s=[],o=this._Opts.urlSeparator,a=this._Opts.imageType;Array.isArray(t)||(t=[t]);for(var l=0;l<t.length;l++)e=t[l],(n=r(e,"object")?i({type:a},e):r(e,"string")&&e.length>0?h(e,o,a):null)&&s.push(n);return s}function d(t){var e=t.source;r(e,"object")&&(t.source=e=[e.name,e.href]),r(e,"string")&&(t.source=e=e.split("|")),Array.isArray(e)&&e[0]||delete t.source}function f(t){for(var e,n,i,s,o=[],a=this.getImagePropsList(),l=0;l<t.length;l++){if(e=t[l],s={},r(e,"object")){n=e.url||e.image;for(var u=a.length;u--;)i=a[u],e.hasOwnProperty(i)&&(s[i]=e[i]);"source"in s&&d(s)}else n=e;n=p.call(this,n),n.length&&(s.versions=n,o.push(s))}return o}function m(t,e,n,r){for(var i=this._isValidId(r),s=t.length;s--;){var o=u.bind(this,i?r:s,e,n);t[s].then(o,o)}}var g=["title","source","description"],_={};return{_Events:["setchange","setimageschange","imagechange","imageready","imagefail","imageloaded","imageloading","lastimage"],_Init:function(t){var e,n=this._Opts.imageProps,r=this._aImageProps=g.slice(0);if(this._setsParams=[],this._setsImages=[],this._Current={set:null,image:null},Array.isArray(n))for(var s=n.length;s--;)e=n[s],-1===r.indexOf(e)&&r.push(e);if(t&&t.images)c.call(this,t);else if(t&&t.imageSets){var o=i({},t);c.call(this,o.imageSets)}},_getSetImages:function(t){var e=this._setsImages,n=null;return null===t&&(t=this._Current.set),this._isAvailableId(t,e)&&(n=this._setsImages[t]),n},_preloadCurImage:function(t,e){var n=this._Current.set,r=this._startPreload(e,t,n),i=l.bind(this,t,n);return m.call(this,r,t,n),Promise.all(r).then(i,i)},_startPreload:function(t,e,n,r){for(var i,s,a,l=this._Opts.preloadTimeout,u=t.versions,c=[],h=0;h<u.length;h++)this._isValidId(r)&&h!==r||(s=u[h],a=!("loading"in s),i=Promise.resolve(o(s,l)),a&&(this._trigger("imageloading",t,e,n,h),i.then(this._trigger.bind(this,"imageloaded",t,e,n,h))),c.push(i));return c},_getImageId:function(t){var e,n=this._getCurrentSetImages(),r=(n&&n.length||0)-1;return!0===this._Opts.Loop?(e=r+1,(t%=e)<0&&(t+=e)):t=Math.max(0,Math.min(t,r)),t},_isValidId:function(t){return null!==t&&!isNaN(t)},_isAvailableId:function(t,e){return this._isValidId(t)&&t in e},_getCurrentSetImages:function(){return this._getSetImages(null)},_getCurrentSetParams:function(){return this.getSetParams(null)},getImageParams:function(t,e){return t=isNaN(t)?this._Current.set:+t,e=isNaN(e)?this._Current.image:+e,n.getByPath([t,e],this._setsImages)},getCurrentImageParams:function(){return this.getImageParams(this._Current.set,this._Current.image)},reloadImage:function(t,e,n){var r;this._isValidId(n)||(n=this._Current.set),this._isAvailableId(t,this._getCurrentSetImages())&&(r=this._startPreload(this.getImageParams(n,t),t,n,e),m.call(this,r,t,n,e))},addImagesSet:function(t){var e=this._setsParams,n=this._setsImages,r=t&&t.images,i=-1;return Array.isArray(r)&&(i=n.length,r=f.call(this,r,i),r.length?(n.push(r),delete t.images,e[i]=t):i=-1),i},addImages:function(t,e,n){var r=this._setsImages,s=!0;null===(e=this._isAvailableId(e,r)?e:this._Current.set)&&(e=this.addImagesSet({images:t}),s=!1);var o,a,l,u=r[e],c={imagesAdded:!1};return Array.isArray(t)&&(t=f.call(this,t,e),(l=t.length)&&(n?(o="unshift",c.indexFirst=0,c.indexLast=l-1):(o="push",a=u.length,c.indexFirst=a,c.indexLast=a+l-1),s&&Array.prototype[o].apply(u,t),i(c,{imagesAdded:!0,setLength:u.length,setId:e,newImages:t}),this._trigger("setimageschange",c))),c},changeSet:function(t){var e=this._Current,n=this._isAvailableId(t,this._setsImages)&&t!=e.set;return n&&(e.set=1*t,e.image=null,this._trigger("setchange",this._setsParams[t],t)),n},changeImage:function(t){var e,n,r,i=this._Current,s=this._getCurrentSetImages(),o=!1;return s&&this._isValidId(t)&&(t=+t,t=this._getImageId(t),(o=t!=i.image)&&(i.image=t,e=s[t],this._trigger("imagechange",e,t,i.set),!0!==this._Opts.Loop&&(n=t===s.length-1,r=0===t,(n||r)&&this._trigger("lastimage",n,r)),this._preloadCurImage(t,e))),o},nextImage:function(){return this.changeImage(this._Current.image+1)},prevImage:function(){return this.changeImage(this._Current.image-1)},getImagePropsList:function(){return this._aImageProps.slice(0)},getCurrentImage:function(){var t=this._Current,e=this._getCurrentSetImages();return{image:t.image,set:t.set,setLength:e&&e.length||0}},getImageProps:function(t,e){var n=this._Current,r=this._setsImages,s=null,o=this._isValidId,a=this._isAvailableId.bind(this);return t=o(t)?t:n.image,e=o(e)?e:n.set,a(e,r)&&a(t,r[e])&&(s=i(!0,{},r[e][t]),delete s.versions),s},getImage:function(t,e,n){var i=this._Current,s=!1;if(!this._isAvailableId(e,this._setsImages)&&null===(e=i.set))return null;var o=this._setsImages[e];this._isAvailableId(t,o)||(t=i.image);var a=o[t];return a&&this._isAvailableId(n,a.versions)&&(s=r(a.versions[n].loading,"boolean")),s?a:null},getSetParams:function(t){var e=this._setsParams,n=null;return null===t&&(t=this._Current.set),this._isAvailableId(t,e)&&(n=i(!0,{},e[t])),n},addToCache:function(t,e){e&&(_[e+""]=t)},getFromCache:function(t){return _[t+""]}}}(),o,null,"Gallery");i(t.getNameSpace("Modules",e),{Gallery:a})}(window,window.ru.mail.cpf)},76:function(t,e){!function(t,e,n){var r=n.Basic,i=r.Extend,s=r.typeOf,o=r.getOptions,a={cssSels:{Main:{Preview:".js-preview-list__item"}},cssClss:{currentPreview:null},Attrs:{imageVersions:null,imageProps:null,imageId:"data-image-id",imageSetId:"data-image-set"},imagesSet:null,addSetParams:null,useOnclickData:!1},l=r.Constructors.getView(function(){function t(t){for(var e,n,r,i,a,l,u=this._Opts,c=u.Attrs,h=this._Model.getImagePropsList(),p=c.imageVersions,d=c.imageProps,f=[],m=null,g=0;g<p.length;g++){a=p[g].split("|");for(var _=0;_<a.length;_++)if(e=t.getAttribute(a[_])){f.push(e);break}}if(f.length&&(m={url:f},s(d,"object")))for(var v=h.length;v--;)n=h[v],(r=d[n])&&(i=t.getAttribute(r))&&(m[n]=i);if(u.useOnclickData){l=o(t);for(var w in l)l.hasOwnProperty(w)&&-1!==h.indexOf(w)&&(m[w]=l[w])}return m}return{_Events:["previewClick"],_Handlers:{dom:{"click:Main.Preview":"_onPreviewClick"},model:{imagechange:"_onImageChange"}},_Init:function(){var t,e,n=this._Opts,r=this._Elems.Preview,s=this._Model,o=n.imagesSet;this._imagesSet=o,r&&r.length&&(t=this.getImagesFromElems(r),t.length&&(null!==o?s.addImages(t,o):(e=i({images:t},n.addSetParams),this._imagesSet=this._Model.addImagesSet(e))))},getSetId:function(){return this._imagesSet},getImagesFromElems:function(e){return e.toArray().map(t.bind(this)).filter(function(t){return null!==t})},_onPreviewClick:function(t){var e=t.currentTarget,n=this._opts.Attrs.imageId,r=this._opts.Attrs.imageSetId,i=e.getAttribute(n)||this._elems.Preview.index(e),s=e.getAttribute(r)||this._imagesSet;this._model.changeSet(s),this._model.changeImage(i),this._trigger("previewClick",{imageId:i,imageSetId:s}),t.preventDefault()},_onImageChange:function(t,e,n){var r=this._Opts.cssClss.currentPreview,i=this._imagesSet,s=this._Elems.Preview;s&&(null===i||n===i)&&r&&s.removeClass(r).eq(e).addClass(r)}}}(),a,null,"GalleryPreviews");r.moduleOpts.setParams("GalleryPreviews",{acceptTypes:"Gallery"}),i(!0,n,{Modules:{GalleryPreviews:l}})}(window.jQuery||window.$,window,window.ru.mail.cpf)},77:function(t,e){!function(t,e,n){var r=n.Basic,i=r.typeOf,s=e.getNameSpace("Modules",n),o=t(e),a=t(e.document),l=n.Modules.GalleryImageView,u=r.moduleOpts,c=u.setParams,h={cssSels:{sizeReference:null,Main:{sizeCont:null}},showOnChange:!1,showBanner:!0,sizeLimits:null,setContSize:!0,templates:{block:null},templatesData:{block:null},imagesVersion:1,imagesSet:null,Banner:null,bannerId:"default",usePopupLoading:!1,popupExt:"ImageView"},p=r.Constructors.getView(function(){function s(e,n){var r,o,a,l=i(e);switch(l){case"object":a=e instanceof t;case"array":if(e.length>1)for(var u=e.length;u--;)o=s(a?e.eq(u):e[u],n),r&&r>o||(r=o);else r=a?e[n]():s(e[0],n);break;case"number":r=e;break;case"function":r=e()}return r}function l(t,e){var n,r,i={};e=!0===e;for(var s=m.length;s--;)r=n=m[s],e&&(r="outer"+n.charAt(0).toUpperCase()+n.substring(1)),i[n]=t[r]();return i}function u(e,n){var i,s,o=this._opts.cssSels.sizeReference,a=this._elems,l=r.Extend({visibility:"hidden"},e),u=a.sizeReference;if(!o||u&&u.length||(u=n.parents(o).first()),u&&u.length)n.css(l);else{i=n.parents(),s=[];var c=i.filter(function(){var e="visible"!==t(this).css("overflow");return e&&s.push(this.scrollWidth-this.offsetWidth+this.scrollHeight-this.offsetHeight),e});n.css(l),u=c.filter(function(t){return s[t]<this.scrollWidth-this.offsetWidth+this.scrollHeight-this.offsetHeight}).first().children().filter(i),a.sizeReference=u}return u}function c(t){t=this._getViewElement(t);for(var e,n,r,i=this._opts.sizeLimits,c=l(o),h=u.call(this,c,t),p=l(h,!0),d={},f=m.length;f--;)e=m[f],r=Math["width"===e?"max":"min"](c[e],a[e]()),r-=p[e]-c[e],i&&i.hasOwnProperty(e)?(n=s(i[e],e),n=Math.max(n,r)):n=r,d[e]=n;return t.css({visibility:""}),d}function h(t,e){for(var n,r=c.call(this,e),i=null,s=1,o=m.length;o--&&(n=m[o]);)s=Math.min(s,r[n]/t[n]);if(s<1)for(i={},o=m.length;o--&&(n=m[o]);)i[n]=Math.round(t[n]*s);return i}function d(t){this._elems.sizeCont&&this._elems.sizeCont.width(""),p.prototype._parent._showImageVersion.apply(this,t)}function f(t){var e=t.keyCode,n=this._Model;this._state.visible&&(37===e?n.prevImage():39!==e&&32!==e||n.nextImage())}var m=["width","height"];return{_Handlers:{"dom:keydown:document":f},_Events:["show","hide"],_parentElement:function(){var e=null,n=this._opts;return i(n.templates.block,"function")&&(e=t(n.templates.block.call(this,n.templatesData.block||{}))),e},_Init:function(){this._state=r.Extend(!0,this._state||{},{visible:!1}),this._popup=null,this._elems.sizeCont||!1===this._opts.setContSize||(this._elems.sizeCont=this._elems.parent)},_prepareViewElement:function(t,e){var n;return this._state.visible&&(this._hideBanner(),n=h.call(this,t,e)),n},_switchViewState:function(t,e){e=!t&&!0===e,this._state.visible&&(p.prototype._parent._switchViewState.apply(this,arguments),!1!==this._opts.usePopupLoading&&(e?this._popup.getOverlay().showLoading():this._popup.getOverlay().toggleBlock(this._elems.parent)))},_onImageReady:function(t,e,n,r){this._isTargetImage(n,r)&&(this._state.image=t.versions[r],this._state.visible&&(this._resetReadyStateFor(t.versions[this._opts.imagesVersion]),this._opts.showBanner&&this._showBanner(),p.prototype._parent._onImageReady.apply(this,arguments)))},_onImageChange:function(t,n,r){var i=!0===this._opts.showOnChange,s=this._state,o=s.visible;this._isTargetImage(r)&&(delete s.image,e.cancelAnimationFrame(s.showRequest),o?p.prototype._parent._onImageChange.apply(this,arguments):i&&this.Show())},_initPopup:function(){this._popup=n.Tools.initModule(["Popup",this._opts.popupExt],this._elems.parent,{_Handlers:{show:this._onPopupToggle.bind(this,!0),hide:this._onPopupToggle.bind(this,!1)}})},_getPopupInstance:function(){var t=this._popup;return t||(this._initPopup(),t=this._popup),t},_onPopupToggle:function(t){var e,n,r,i=this._state,s=this._Model;i.visible=t,t?(e=s.getCurrentImage(),n=e.image,r=e.set,this._toggleSetInfo(s.getSetParams(r),r),this._toggleImageInfo(s._getCurrentSetImages()[n],n),"image"in i?this._showCurrentImage():this._switchViewState(!1,!0)):this._clearImageView(),this._trigger(t?"show":"hide")},_showCurrentImage:function(){this._showImageVersion(this._state.image)},_clearImageView:function(){this._getViewElement().empty()},_showImageVersion:function(){this._state.showRequest=e.requestAnimationFrame(d.bind(this,Array.prototype.slice.call(arguments)))},_processViewSizes:function(t,e){p.prototype._parent._processViewSizes.apply(this,arguments),this._elems.sizeCont&&this._elems.sizeCont.width(e.width)},_onImageClick:function(){this._normalizeModelImage(),this._model.nextImage()||this._getPopupInstance().hide()},_hideBanner:function(){var t=this._popup.getOverlay();t&&t.hideBanner&&t.hideBanner(this._opts.bannerId)},_showBanner:function(){if(this._opts.showBanner){var t=this._popup.getOverlay();t&&t.showBanner&&t.showBanner(this._opts.bannerId,!0)}},isVisible:function(){return!0===this._state.visible},Show:function(){this._normalizeModelImage(),this._getPopupInstance().show()},Hide:function(){this._getPopupInstance().hide()},showLoading:function(){this._getPopupInstance().getOverlay().showLoading()},addOptions:function(t){return i(t,"object")&&r.Extend(!0,this._opts,t),this}}}(),h,l,"PopupGalleryView");r.Constructors.getView({_Handlers:{"dom:click:showPopup":"_onShowClick"},_onShowClick:function(t){t.preventDefault();var e=this.getPopup();e&&e.Show()},getPopup:function(){var t=this._popupView;return t||(this._popupView=t=this._elems.Parent.data("PopupGalleryView")),t}},{cssSels:{showPopup:".js-show_photo"}},null,"ShowGalleryPopup"),c("ShowGalleryPopup",{acceptTypes:"Gallery"}),c("PopupGalleryView",{initializer:function(t,e,n){return new p(t,null,n)},acceptTypes:"Gallery"}),s.PopupGalleryView=p}(window.$,window,window.ru.mail.cpf)},78:function(t,e){!function(t,e,n){function r(){return i||(i=s(o)),i}var i,s=n.Tools.initModule,o="BannerController",a={usePopupLoading:!1,bannerExt:"PopupGalleryView"};n.Basic.Constructors.addPlugin("PopupGalleryView",function(){function t(){this._state.visible&&this._super.apply(this,arguments)}return{_Init:function(){this._elems.sizeCont=null},_onImageLoaded:t,_onImageChange:function(t,e,n){var r;this._isTargetImage(n)&&!this._state.visible&&this._opts.showOnChange&&(this.Show(),r=this._getImageFrames(e),this._slider.goToFrame(r.frame,!0)),this._super.apply(this,arguments)},_onPopupToggle:function(t){t&&(this._slider.update(!0,!1,!0),this._state.sliderSize=this._getSliderSizes()),this._super.apply(this,arguments),this._advertManager&&this._advertManager.reset()},_showCurrentImage:function(){var t=this._model.getCurrentImage().image;this._replaceImageFrames(t),this._slider.goToFrame(t,!0),this._super.apply(this,arguments)},_clearImageView:function(){var t,e=this._model.getCurrentImageParams();e&&(t=e.versions[this._opts.imagesVersion])&&delete this._state.imagesReady[t.src],this._super.apply(this,arguments)},_showBanner:function(){if(this._opts.showBanner){var t=this._model.getCurrentImage(),e=t&&this._getImageFrames(t.image);if(e){var n=this._model.getCurrentImageParams(),i=s(["Banner",this._opts.bannerExt],e.frame,null,null,[{instance:r(),type:o}]);this._resetReadyStateFor(n.versions[this._opts.imagesVersion]),i.show()}}}}}(),a,"PopupImageSlider")}(window.$,window,window.ru.mail.cpf)},79:function(t,e){!function(t,e,n){"use strict";var r=n.Basic.Constructors.addPlugin,i=n.Basic.Extend,s=n.Basic.debounce,o={cssSels:{Main:{slider:".js-image-slider"},slideContents:null},templates:{frames:n.Tools.getTemplate("ct-viewbox-slides.xml"),frameContents:n.Tools.getTemplate("ct-viewbox-slide-content.xml")},imageSliderExt:"ImageView"};r("ImageView",function(){function r(t,e,n){this._switchViewState(!1,!1,n.all),this._showImageVersion(t.versions[e],n.contents.find(this._opts.cssSels.Main.imageView))}function o(t){t=t||this._model._getCurrentSetParams();var e=this._opts.imagesVersion;return{params:t,images:(this._model._getCurrentSetImages()||[]).map(function(t){return i({},t,{targetVersion:t.versions[e]})})}}var a=function(t){var n=e.document.createElement("div"),r=o.call(this,t);n.innerHTML=this._opts.templates.frames(r),this._state=i({},this._state,{setImages:r,imageFrames:[],framesContent:[],imagesReady:{}}),this._slider.replaceFrames(n.children,0)};return{_Handlers:{model:{setchange:a,imageloaded:"_onImageLoaded",imageloading:function(t,e,n,r){var i=this._getImageFrames(e);this._isTargetImage(n,r)&&i&&this._switchViewState(!1,!0,i.all)}},dom:{"resize:window":s(function(){this._state.sliderSize=this._getSliderSizes()},100)}},_Init:function(){this._slider=n.Tools.initModule(["Slider",this._opts.imageSliderExt],this._elems.slider||this._elems.parent,{_Handlers:{beforeSlide:function(t){this._advertManager&&this._advertManager.beforeSlide(t)||this._replaceImageFrames(null,t)}.bind(this),slide:function(t){null!=(t=this._advertManager?this._advertManager.slide(t):t)&&(this._model.changeImage(t),this._replaceImageFrames(t,null))}.bind(this),swipeEnd:function(){this._state.sliderSwipe=!1}.bind(this),swipeStart:function(){this._state.sliderSwipe=!0}.bind(this),slideControlTap:function(){this._state.sliderTap=!0}.bind(this)}}),this._state=i(this._state||{},{imageFrames:[],setImages:o.call(this),sliderSwipe:!1,sliderTap:!1,sliderSize:this._getSliderSizes(),imagesReady:{}}),this._advertManager=this._createAdvertManager(),a.call(this)},_replaceImageFrames:function(t,e){var n,i,s,o=this._opts,a=this._model.getCurrentImage(),l=a.setLength,u=o.cssSels.slideContents,c=null!==t,h=o.imagesVersion;c&&(n=t-2,i=t+2);for(var p=0;p<l;p++){var d=this._getImageFrames(p),f=c&&p>=n&&p<=i||p===e;if(f)if("contents"in d){if(s=this._Model.getImageParams(null,p),(s=s&&s.versions[h])&&"iframe"===s.type){var m=d.contents.find(o.cssSels.Main.imageView);m.length&&"IMG"!==m.prop("tagName")&&!m.children().length&&m.append(this._Model.getFromCache(s.src))}s=null}else d=this._getFramesWithContents(p,d);var g=d.contents,_=d.all,v=g&&g.parent().length>0;f&&!v?(u&&(_=u.find(u)),g.each(function(t){_.eq(t).append(this)}),(s=this._model.getImage(p,a.setId,h))&&r.call(this,s,h,d)):c&&!f&&v&&g.detach()}},_getSliderSizes:function(){var t=this._elems.slider||this._elems.parent;return{width:t.width(),height:t.height()}},_getImageFrames:function(t){var e=this._state.imageFrames[t];return e||(e={frame:this._slider.getFrameByNo(t)},e.clones=this._slider.getFrameClones(e.frame),e.all=e.frame.add(e.clones),this._state.imageFrames[t]=e),e},_getFramesWithContents:function(n,r){void 0!==r&&null!==r||(r=this._getImageFrames(n));var s=r.contents;if(!s){var o=this._opts.templates.frameContents,a=i({image:n},this._state.setImages),l=e.document.createElement("div");l.innerHTML=o(a),s=t(Array.from(l.childNodes)).detach();for(var u=0;u<r.all.length;u++)u>0&&(s=s.add(s.eq(0).clone()));r.contents=s}return r},_onImageClick:function(){this._state.sliderSwipe||this._super.apply(this,arguments)},_onImageLoaded:function(t,e,n,i){var s=this._model.getCurrentImage().image;if(this._isTargetImage(n,i)&&e!==s){var o=this._getFramesWithContents(e);o.contents.parent().length||this._replaceImageFrames(s,e),r.call(this,t,i,o)}},_onImageChange:function(t,e,n){var r;this._isTargetImage(n)&&(this._replaceImageFrames(null,e),e!==this._slider.getFrameNo()&&(r=this._getImageFrames(e),this._slider.goToFrame(r.frame))),this._super.apply(this,arguments)},_getViewElement:function(t){var e=this._slider.getCurrentFrame(),n=e.find(this._opts.cssSels.Main.imageView);return this._getTargetElement(n,t)},_setViewElement:function(){},_getViewParent:function(t){return this._getTargetElement(this._slider.getCurrentFrame(),t)},_showImageVersion:function(t){var e=this._state.imagesReady[t.src],n=this._state.sliderSize;e&&e.height===n.height&&e.width===n.width||(this._super.apply(this,arguments),this._state.imagesReady[t.src]=i({},n))},_resetReadyStateFor:function(t){delete this._state.imagesReady[t.src]},_toggleImageInfo:function(){}}}(),o,"ImageViewSlider")}(window.$,window,window.ru.mail.cpf)},80:function(t,e){!function(t,e,n){"use strict";var r=n.Basic,i=r.typeOf,s=n.Types.String.Url.addParams,o={galleryId:null,urlSplash:null,urlGallery:null,urlParams:{galleryId:"id"},urlParamsStatic:{splash:null,gallery:null},getUrlParams:null,randomUrlParam:"",useGalleriesCache:!0,preloadSplash:!1,prepareGalleryData:null,prepareSplashData:null,gallerySplashCount:null},a=["loadStart","loadFinish","loadError","showSplash","splash"];r.Constructors.addPlugin("Gallery",{_Handlers:{setchange:"_onSetChange"},_Init:function(){this._resetSplashFlags(),this._galleriesCache={},this._addEventTypes(a),this._Current.galleryId=this._Opts.galleryId||null},setSplashUrl:function(t){this._opts.urlSplash=t,this._resetSplashFlags()},addImagesSet:function(){var t=this._super.apply(this,arguments);return-1!==t&&(this._setsParams[t].addLastFrame=!0),t},changeImage:function(t){var e,n,r=this._opts,i=this._Current,s=this._getCurrentSetImages(),o=!1,a=!!r.Loop,l=this._opts.gallerySplashCount,u=null===l;if(s&&this._isValidId(t)){t=+t;var c=this._getImageId(t),h=s[c];u?(e=this._showSplash&&t===s.length,n=e||!this._showSplash&&c===s.length-1):(e=this._showSplash&&t>=s.length,n=l>0?e&&t===s.length-1+l:c===s.length-1);var p=0===c;o=t<=s.length+l?(e?t:c)!=i.image:a&&c!==i.image,o&&(e?(i.image=t,this.getSplashData().then(this._trigger.bind(this,"splash")),this._trigger("showSplash",l?{imageId:t}:{})):(i.image=c,this._trigger("imagechange",h,c,i.set),this._preloadCurImage(c,h),this._showSplash&&r.preloadSplash&&!this._splashDataPromise&&this.loadSplash().then(function(t){this._showSplash=!!t}.bind(this)))),a||!n&&!p||this._trigger("lastimage",n,p)}return o},getSplashData:function(t){return this._splashDataPromise||this.loadSplash(t)},loadSplash:function(n){n=i(n,"undefined")?this._Current.galleryId:n;var r=this._Opts,o=this._trigger.bind(this),a=i(r.getUrlParams,"function")?r.getUrlParams.call(this,n):{};return a=t.extend({},r.urlParamsStatic.splash||{},a),r.randomUrlParam&&(a[r.randomUrlParam]=(Math.random()+"").split(".")[1]),this._trigger("loadStart","splash",n),this._splashDataPromise=fetch(s(a,r.urlSplash)).then(function(t){return o("loadFinish","splash",n),t.json()}).then(function(t){return i(r.prepareSplashData,"function")&&(t=r.prepareSplashData.call(this,t)),t}.bind(this)).catch(function(t){e.console.error(t),o("loadError","splash",n)}),this._splashDataPromise},loadGallery:function(n){var r=this._Opts,i={},o=null;return r.useGalleriesCache&&(o=(this._galleriesCache[n]||{}).storage),i[r.urlParams.galleryId]=n,this._trigger("loadStart","gallery",n),(o?Promise.resolve(o):fetch(s(t.extend({},r.urlParamsStatic.gallery,i),r.urlGallery)).then(function(t){return t.json()}).catch(function(t){e.console.error(t),this._trigger("loadError","gallery",n)}.bind(this))).then(function(t){return this._onGetGalleryInfo(n,t),t}.bind(this))},_getImageId:function(t){var e,n=this._getCurrentSetImages(),r=n&&n.length-1||0;return!0===this._Opts.Loop?(e=r+1,(t%=e)<0&&(t+=e)):t=Math.max(0,Math.min(t,r)),t},_onGetGalleryInfo:function(t,e){var n=this._Opts,r=this._galleriesCache,s=(r[t]||{}).setId;isNaN(s)&&(i(n.prepareGalleryData,"function")&&n.prepareGalleryData.call(this,e),s=this.addImagesSet(e),r[t]={setId:s,storage:e}),this._trigger("loadFinish","gallery",s,e),this.changeSet(s)&&this.changeImage(0)},_resetSplashFlags:function(){this._showSplash=!!this._opts.urlSplash,this._splashDataPromise=null},_onSetChange:function(t){this._resetSplashFlags(),t.id&&(this._Current.galleryId=t.id)}},o,"Ajax")}(window.$,window,window.ru.mail.cpf)},81:function(t,e,n){!function(t,e,n){"use strict";function r(){var t=this._elems.splash;if(!t||!t.length){if(t=this._elems.parent.find(this._opts.cssSels.Main.splash),!t.length)return null;this._elems.splash=t}return t}var i=n.Basic,s=i.getByPath,o=n.Tools.initModules,a=["splashShow"],l={cssSels:{Main:{splash:".js-splash"},restart:".js-splash__restart",galleryLink:".js-splash__item__link"},cssClss:{showSplash:"pbox_viewmore_preshown",showSplashBlock:"pbox_viewmore_shown",splashLoading:"splash_loading"},templates:{splash:null},attrs:{galleryId:"data-gallery-id",splashType:"data-splash-type"}};i.Constructors.addPlugin("PopupGalleryView",{_Handlers:{dom:{"click:restart":"_onRestartClick","click:galleryLink":"_onGalleryLinkClick"},model:{splash:"_onSplash",loadStart:"_onLoadStart",loadFinish:"_onLoadFinish",loadError:"_onLoadError"}},_Init:function(){this._addEventTypes(a)},_onRestartClick:function(t){t.preventDefault(),this._Model.changeImage(0)},_onGalleryLinkClick:function(t){var e=t.currentTarget.getAttribute(this._opts.attrs.galleryId);e&&this._Model.loadGallery(e),t.preventDefault()},_onImageChange:function(){var t;this._state.splashActive&&(this._state.splashActive=!1,t=this._opts.cssClss,this._elems.parent.removeClass(t.showSplash+" "+t.showSplashBlock),null!==this._elems.splash&&(this._elems.splash.empty(),this._elems.splash=null)),this._super.apply(this,arguments)},_onPopupToggle:function(t){var e,n,r;t&&(e=this._Model,r=e.getCurrentImage().image,n=e._getCurrentSetImages().length,r>=n&&e.changeImage(n-1)),this._super.apply(this,arguments)},_onSplash:function(n){var i=this._opts.attrs,a=this._opts.cssClss,l=this._opts.cssSels,u=this._elems.parent,c=r.call(this),h=this._slider.getCurrentFrame(),p=t(h).attr(i.splashType),d=s("_opts.templates.splash",this),f="function"==typeof d,m=f?c:d[p];this._state.splashActive=!0,m&&(f?c.append(this._opts.templates.splash(n)):(t(l.Main.splash).not(h).addClass(a.splashLoading),Promise.resolve(d[p]).then(function(e){t(h).html(e(n[p]))}).then(function(){o(h),t(h).removeClass(a.splashLoading)})),u.addClass(a.showSplash),a.showSplashBlock&&e.requestAnimationFrame(u.addClass.bind(u,a.showSplashBlock)),this._trigger("splashShow",c))},_onLoadStart:function(){},_onLoadFinish:function(){},_onLoadError:function(){}},l,"Splash")}(window.$,window,window.ru.mail.cpf)},82:function(t,e,n){!function(t,e,n){"use strict";function r(t){var e=this._opts,n=e.cssClss.Loading,r=e.attrs.slotId;return new Promise(function(n,i){var o=t.find(e.cssSels.splashSlot);o.length||i("cont");var a=o.eq(0),l=e.splashBannerParams.slotId||a.attr(r);l||i("slotId"),s({slot:l,container:a}).then(function(t){t?n():i("slotFail")}.bind(this),function(){i("slotFail")})}.bind(this)).then(function(){t.removeClass(n),this._trigger("splashBannerShow")}.bind(this),function(e){t.removeClass(n)}.bind(this))}var i=n.Basic,s=n.Tools.loadSlot,o=["splashBannerShow"],a={cssSels:{splashParent:".js-splash",splashSlot:".js-splash_slot"},attrs:{slotId:"data-slot-id"},splashBannerParams:{slodId:null}};i.Constructors.addPlugin("PopupGalleryView",{_Handlers:{model:{splashShow:"_onSplashShow",loadStart:"_onLoadSplashStart",loadFinish:"_onLoadSplashFinish",loadError:"_onLoadSplashError"}},_Init:function(){this._addEventTypes(o),this._state||(this._state={}),this._state.splashInited=!1},_onLoadSplashStart:function(t){if("splash"===t){var e=this,n=this._opts,i=this._state,s=this._model.getCurrentImage(),o=s&&this._getImageFrames(s.image);if(o){var a=o.frame,l=n.cssSels.splashParent,u=n.cssClss.Loading;a.is(l)&&(a.addClass(u),i.splashInited||(i.splashInited=!0,e.on("splashShow",r.bind(e))))}}},_onLoadSplashFinish:function(){},_onLoadSplashError:function(){}},a,"SplashBanner")}(window.jQuery,window,window.ru.mail.cpf)},83:function(t,e){!function(t,e){"use strict";var n=e.Basic.Constructors.addPlugin,r={};n("ImageView",function(){return{_Handlers:{model:{showSplash:function(e){var n=this._slider,r=e.imageId;n&&(r?(n.goToPage(r),n.getPagesCount()>r&&t(".js-photo_ctrl").removeClass("hidden_all")):n.goToPage(n.getPagesCount()-1))}}}}}(),r,"ImageViewSliderSplash")}(window.$,window.ru.mail.cpf)},84:function(t,e){!function(t,e,n){"use strict";(0,n.Basic.moduleOpts.setParams)("GalleryControls.PopupGalleryView",{options:{cssSels:{Main:{Controls:".js-photo_ctrl"}},cssClss:{disabledControl:"hidden_all"}}})}(window.jQuery,window,window.ru.mail.cpf)},86:function(t,e,n){"use strict";var r=n(24);n.n(r)},87:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},91:function(t,e){!function(t){if(!t.mwManager){var e=function(){function t(e,n){if(!e||"[object Object]"!==Object.prototype.toString.call(e))return void 0===e?n:e;n=n&&"[object Object]"===Object.prototype.toString.call(n)?n:{};for(var r=Object.keys(e),i=0,s=r.length;i<s;++i){var o=r[i];n[o]=t(e[o],n[o])}return n}function e(t){this._separator=t||".",this._paramsData={}}return e.prototype={constructor:e,set:function(e,n){this._paramsData[e||"*"]=t(n,this._paramsData[e||"*"])},get:function(e){return e&&"*"!==e?t(this._paramsData[e],this.get(e.substr(0,e.lastIndexOf(this._separator)))):t(this._paramsData["*"]||null)}},e}(),n=new e("."),r=t.mwManager={prefetch:function(e){var n=r.getInstData(e);!n||!t.myWidget||n.opts.skipUrlsFrom&&n.opts.skipUrlsFrom.length||t.myWidget.prefetch(n.cid,n.opts.sdkParams)},getInstData:function(t){if(!t)return null;var e=t.split(":"),r=e[0],i=e[1],s=n.get(r);return e[1]&&s?{tplName:r,opts:s,cid:i}:null},setParams:function(t,e){n.set(t,e)},setUID:function(t){this._uid=t},getUID:function(){return this._uid}};r.setParams("*",{sdkParams:{timeout:0}}),r.setParams("big",{template:"ct-mywidget-big.xml",sdkParams:{n:3,preview:{width:450,height:252,crop:!0},titleLength:77}}),r.setParams("small",{template:"ct-mywidget-small.xml",sdkParams:{n:3,preview:{width:140,height:100,crop:!0},titleLength:60}}),r.setParams("footer-preview",{template:"ct-mywidget-footer-preview.xml",sdkParams:{n:4,preview:{width:260,height:195,crop:!0},titleLength:55}}),r.setParams("footer-vertical",{template:"ct-mywidget-footer-vertical.xml",sdkParams:{n:4,preview:{width:140,height:100,crop:!0},titleLength:60}}),r.setParams("rb100",{template:"ct-mywidget-rb100.xml",sdkParams:{n:4,preview:{width:320,height:240,crop:!0},titleLength:80}}),r.setParams("article-teaser",{template:"ct-mywidget-article-teaser.xml",sdkParams:{n:1,preview:{width:160,height:95,crop:!0},titleLength:65}}),r.setParams("grid",{template:"ct-mywidget-grid.xml",sdkParams:{n:6,preview:{width:640,height:400,crop:!0},titleLength:80}}),r.setParams("touch-sect",{template:"ct-mywidget-touch-sect.xml",sdkParams:{n:3,preview:{width:160,height:114,crop:!0},titleLength:60}}),r.setParams("touch-rb100",{template:"ct-mywidget-touch-rb100.xml",sdkParams:{n:3,preview:{width:160,height:114,crop:!0},titleLength:80}}),r.setParams("touch-article-teaser",{template:"ct-mywidget-touch-article-teaser.xml",sdkParams:{n:1,preview:{width:160,height:114,crop:!0},titleLength:60}}),r.setParams("touch-article-gallery",{template:"ct-mywidget-touch-article-gallery.xml",sdkParams:{n:4,preview:{width:160,height:114,crop:!0},titleLength:60}})}}(window)},92:function(t,e,n){!function(t,e,r){"use strict";function i(t,e){t.forEach(function(t){t.status&&t.value&&t.value.data.list.forEach(function(t){e[t.original_url]=!0}),i(t.deps,e)})}function s(t,e){var n=this,r={};return i(e,r),n.opts.sdkParams.skipURLs=Object.keys(r),new Promise(function(e,r){t.get(n.cid,n.opts.sdkParams,function(t,n){e({data:t,callback:n})},r)})}function o(t,e){var n=e.data,r=e.callback;if(!(n&&n._id&&n.list&&n.list.length))return void a.call(this,t);var i=this._state.slots[t];i.loading=!1,i.data=n,i.callback=r,l.call(this,[t])}function a(t){var e=this._state.slots[t];e.loading=!1,e.error=!0;var n=this._opts,r=this._state;r.errorNotifyOnceCalled||(r.errorNotifyOnceCalled=!0,u(n.errorNotifyOnce),this._trigger("errorOnce")),u(n.errorNotify),this._trigger("error"),l.call(this,[t])}function l(t){for(var e={},n=0;n<t.length;++n){var r=this._state.slots[t[n]];r&&(e[t[n]]=r)}this._trigger("data",e)}function u(t){return t&&("function"==typeof t?t():c(t)),!!t}function c(t){(new Image).src="//rs.mail.ru/d"+t+".gif?r="+Math.round(1e11*Math.random())}var h=n(93),p=h(),d={errorNotify:null,errorNotifyOnce:null},f=null,m=r.Basic.getModel({_Events:["data","error","errorOnce"],_Init:function(){if(f)return f;f=this,this._state={slots:{},errorNotifyOnceCalled:!1}},requestContent:function(t,n,r){var i=this._state.slots[t];if(i){if(i.loading)return;if(!(r="all"===r||"error"===r&&i.error))return void l.call(this,[t])}else i=this._state.slots[t]={};i.loading=!0,i.error=null,i.data=null,i.callback=null,g(e.mwManager.getUID()).then(function(e){p.run(n.tplName,n.opts.skipUrlsFrom,s.bind(n,e)).then(o.bind(this,t),a.bind(this,t))}.bind(this))}},d,null,"MyWidgetModel");r.Basic.Extend(!0,e.getNameSpace("Modules",r),{MyWidgetModel:m});var g=function(){function t(t,n,r){var i="my-widget-script",s=document.getElementById(i);s||(s=document.createElement("script"),s.src="https://likemore-go.imgsmail.ru/widget.js",s.id=i,s.setAttribute("data-uid",t),document.head.appendChild(s)),s.addEventListener("load",function(){n(e.myWidget)}),s.addEventListener("error",r)}var n=null;return function(r){return n||(n=e.myWidget?Promise.resolve(e.myWidget):new Promise(t.bind(null,r))),n}}()}(window.jQuery||window.$,window,window.ru.mail.cpf)},93:function(t,e){var n=function(){function t(t,e){if(t===e)return!1;for(var n=e.r.id,r=0;r<t.srcDeps.length;++r){var i=t.srcDeps[r];if(i)if("."!==i.charAt(i.length-1)){if(i===n)return!0}else if(0===(n+".").indexOf(i))return!0}return!1}function e(t){return this.r.value=t,this.r.status=!0,this.r}function n(t){return this.r.error=t,this.r.status=!1,this.r}function r(t){(0,this.func)(t).then(this.resolve,this.reject),this.func=null}function i(){this._items=[],this._arch=[],this._run=this._run.bind(this),this._task=null}return i.prototype._run=function(){this._task=null;var e,n;for(e=0;e<this._items.length;++e){var i=[],s=this._items[e];for(n=0;n<this._arch.length;++n)t(s,this._arch[n])&&(s.r.deps.push(this._arch[n].r),i.push(this._arch[n].promise));for(n=0;n<this._items.length;++n)t(s,this._items[n])&&(s.r.deps.push(this._items[n].r),i.push(this._items[n].promise));Promise.all(i).then(r.bind(s))}this._arch.push.apply(this._arch,this._items),this._items.length=0},i.prototype.run=function(t,r,i){"function"==typeof r&&(i=r,r=null);var s,o={r:{id:t,deps:[]}};return r&&r.length?(this._task=this._task||Promise.resolve().then(this._run),this._items.push(o),o.srcDeps=r,o.func=i,s=new Promise(function(t,e){o.resolve=t,o.reject=e})):(s=i([]),this._arch.push(o)),o.promise=s.then(e.bind(o),n.bind(o)),s},function(){return new i}}();t.exports=n},94:function(t,e){!function(t,e,n){"use strict";function r(t){var e=t[this._state.id];!this._state.loaded&&e&&(this._state.loaded=!0,e.data&&i.call(this,e.data,e.callback))}function i(t,e){var n=this._state,r=n.templateData,i=n.config.opts.templateData;i&&("function"==typeof i&&(i=i.call(this,t)),r=o(!0,i,n.templateData)),Promise.resolve(n.template).then(function(i){n.container.html(i({data:t,templateData:r})),e()})}var s=n.Basic.moduleOpts.setParams,o=n.Basic.Extend,a={cssSels:{Main:{container:null}},cssClss:{loaded:null,empty:null},inst:null,canReload:"",template:null,sdkParams:null},l=n.Basic.getView({_Handlers:{model:{data:r}},_Init:function(t){var r=this._opts,i=e.mwManager;if(!r.inst)throw new Error("MyWidgetView: –Ω–µ —É–∫–∞–∑–∞–Ω inst");var s=i.getInstData(r.inst);if(s.opts.template=r.template||s.opts.template,r.sdkParams&&o(!0,s.opts.sdkParams,r.sdkParams),this._state={id:u(),config:s,loading:!1,loaded:!1,templateData:t||{}},this._state.container=this._elems.container&&this._elems.container.length?this._elems.container:this._elems.parent,this._state.template=n.Basic.typeOf(s.opts.template,"function")?s.opts.template.bind(this):n.Tools.getTemplate(s.opts.template),"function"!=typeof this._state.template)throw new TypeError("MyWidgetView: –Ω–µ –∑–∞–¥–∞–Ω —à–∞–±–ª–æ–Ω –¥–ª—è inst="+r.inst);this.reload()},reload:function(){var t=this._state;t.loaded=!1,this._model.requestContent(t.id,t.config,this._opts.canReload)}},a,null,"MyWidgetView");s("MyWidgetView",{acceptTypes:"MyWidgetModel",paramAttrs:{inst:"data-inst"}}),n.Basic.Extend(!0,e.getNameSpace("Modules",n),{MyWidgetView:l});var u=function(){var t=0;return function(){return(++t).toString(16)}}()}(window.jQuery||window.$,window,window.ru.mail.cpf)}})});
//# sourceMappingURL=page-article.js.map