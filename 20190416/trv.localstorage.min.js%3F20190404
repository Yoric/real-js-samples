var YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{};YAHOO.JP.trv=YAHOO.JP.trv||{};$(function(){try{if(!("localStorage" in window)||(window.localStorage===null)){return}}catch(b){return}if(!JSON||!JSON.stringify||!JSON.parse){return}Date.now=Date.now?Date.now:function(){return new Date().valueOf()};var a=function(c){return(this instanceof a)?this.init(c):new a(c)};a.prototype={LS_KEY:"",DATE_KEY:"i_date",init:function(c){if(!c){this.log("localstorage.init : 引数が指定されていない");return false}this.LS_KEY="trv.ndhotel."+c;return this},set:function(e){if(!e){this.log("localstorage.set : データが指定されていない");return false}if(!$.isArray(e)){if(!(e instanceof Object)){e={data:e}}e[this.DATE_KEY]=Date.now();localStorage[this.LS_KEY]=JSON.stringify(e);return this}var d=[];for(var c=e.length,f;c--;){f=e[c];if(!f[this.DATE_KEY]){f[this.DATE_KEY]=Date.now()}d.unshift(f)}localStorage[this.LS_KEY]=JSON.stringify(d);return this},get:function(c){if(c){return localStorage[this.LS_KEY]}return JSON.parse(localStorage[this.LS_KEY]||null)},push:function(c){if(!c){this.log("localstorage.push : データが指定されていない");return false}var d=localStorage[this.LS_KEY]||"";if(d){d=JSON.parse(d)}if(!$.isArray(d)){d=[d]}c={data:c};c[this.DATE_KEY]=Date.now();d.push(c);localStorage[this.LS_KEY]=JSON.stringify(d);return this},clear:function(){localStorage.removeItem(this.LS_KEY);return this},getAfter:function(c){var g=JSON.parse(localStorage[this.LS_KEY]||null),e=this.DATE_KEY;if(!c){return[]}if(!$.isArray(g)){return this.isRange(g[e],c)?g:""}var f=[];for(var d=g.length,h;d--;){h=g[d];if(this.isRange(h[e],c)){f.unshift(h)}}return f},getSort:function(f,e,c){if(!f||f.length===0){this.log("localstorage.getSort : データが指定されていない");return[]}e=e?e:this.DATE_KEY;if(!(c==="asc"||c==="desc")){c="asc"}var d=c==="desc"?-1:1;f.sort(function(h,g){if(h[e]<g[e]){return -1*d}else{if(h[e]==g[e]){return 0}else{return 1*d}}});return f},isRange:function(e,d){var f=Math.floor(e/1000),g=Math.floor(Date.now()/1000);return(g-f<=d)?true:false},log:function(c){console.log(c)}};YAHOO.JP.trv.localstorage=a});