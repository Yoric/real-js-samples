function setLiked(){$j(".votes-fav-wrap .thumbs-up").parent().addClass("active").removeAttr("onclick").off("click"),$j(".votes-fav-wrap .thumbs-up").next("span").text(WIDGET_RATINGS_LIKE_FAV.text1),$j(".votes-fav-wrap .thumbs-down").parent().addClass("disabled").removeClass("tooltipTrig").removeAttr("onclick").off("click")}function setDisliked(){$j(".votes-fav-wrap .thumbs-down").parent().addClass("active").removeAttr("onclick").off("click"),$j(".votes-fav-wrap .thumbs-up").next("span").addClass("downDisabled"),$j(".votes-fav-wrap .thumbs-up").parent().addClass("disabled").removeClass("tooltipTrig").removeAttr("onclick").off("click")}function player_rate(e){return e?ratingUp():ratingDown(),e}!function(){var e,r=LocalStorageManager.getInstance();if(r.get("videoRated"))var t=JSON.parse(decodeURIComponent(r.get("videoRated")));if(t&&t[WIDGET_RATINGS_LIKE_FAV.itemId]){(WIDGET_RATINGS_LIKE_FAV.saleVideo&&WIDGET_RATINGS_LIKE_FAV.canVote&&!WIDGET_RATINGS_LIKE_FAV.isPremium||!WIDGET_RATINGS_LIKE_FAV.saleVideo||WIDGET_RATINGS_LIKE_FAV.isPremium)&&(s({value:(e=(e=t[WIDGET_RATINGS_LIKE_FAV.itemId]).split("|"))[0],current:e[1]}.value),function(){var e,t=parseInt($j(".votes-count-container").find(".votesUp").text()),a=parseInt($j(".votes-count-container").find(".votesDown").text());e=0==t?0:parseInt(t/(t+a)*100);$j(".votes-count-container").find(".percent").text(e+"%"),$j(".rating-bar-container").find(".bar-thumbs-up").width(parseInt(e)+"%"),$j(".rating-bar-container").find(".bar-thumbs-down").width(100-parseInt(e)+"%")}());var a=document.getElementById("main-container");a&&MG_Utils.addClass(a,"videoVoted")}function o(e){var t=$j(e);if(!t.hasClass("active")){var a=t.hasClass("js-voteUp")?1:0;if($j(document).trigger("customVotePercent",a),s(a),$j.ajax({url:WIDGET_RATINGS_LIKE_FAV.voteUrl+"&current="+(a?WIDGET_RATINGS_LIKE_FAV.currentUp:WIDGET_RATINGS_LIKE_FAV.currentDown)+"&value="+a,type:"POST",success:function(e){e&&r.push("videoRated",e)}}),VIDEO_SHOW.isPremium){var o=1==a?"Like":"Dislike";videoEvent.Vote=o,mixpanel.track("Video Vote",videoEvent)}}}function s(e){e=parseInt(e);var t=[$j(".votesDown"),$j(".votesUp")],a=[$j(".js-voteDown"),$j(".js-voteUp")];if(t[e]){a[e].addClass("active");var o=parseInt(document.querySelector(".votes-count-container .votesDown").innerHTML),r=document.querySelectorAll(".rating-bar-container .rating-bar")[1];0<o&&r&&(MG_Utils.hasClass(r,"bar-no-votes")&&MG_Utils.removeClass(r,"bar-no-votes"),MG_Utils.hasClass(r,"bar-thumbs-down")||MG_Utils.addClass(r,"bar-thumbs-down")),a[e?0:1].removeClass("active")}}$j(".js-voteUp, .js-voteDown").on("click",function(){WIDGET_RATINGS_LIKE_FAV.saleVideo?WIDGET_RATINGS_LIKE_FAV.canVote?o(this):videoPurchaseFlow.triggerPurchaseFlow():o(this)})}();var $object_favorite=$j("#object_favorite"),isFavourite=WIDGET_RATINGS_LIKE_FAV.isFavourite;head.ready(document,function(){WIDGET_RATINGS_LIKE_FAV.loggedIn&&!WIDGET_RATINGS_LIKE_FAV.deleted?(isFavourite&&$j(".votes-fav-wrap .favorite-wrapper").addClass("active"),$j(".votes-fav-wrap .favorite-wrapper").on("click",function(){ga("send","event",WIDGET_RATINGS_LIKE_FAV.controllerUc+" Page","click","Favorite"),$j.ajax({type:"POST",url:WIDGET_RATINGS_LIKE_FAV.favouriteUrl,data:{id:WIDGET_RATINGS_LIKE_FAV.itemIdNum,token:WIDGET_RATINGS_LIKE_FAV.token,toggle:isFavourite?"0":"1"},beforeSend:function(){$j(".votes-fav-wrap .favorite-wrapper i").hide(),$j(".votes-fav-wrap .favorite-wrapper").append('<img class="favSpinner" src="'+WIDGET_RATINGS_LIKE_FAV.spinnerUrl+'" />')},success:function(e){if($j(".favSpinner").remove(),$j(".votes-fav-wrap .favorite-wrapper i").show(),e){var t=e;isFavourite="remove"==t.action?1:0,"false"==t.success?(yesNoModal.show(t.message),$j(".noBtn").addClass("hidden"),$j(".modal-title").html("Warning")):1==isFavourite?($j(".votes-fav-wrap .favorite-wrapper").addClass("active"),$j(".votes-fav-wrap .favorite-wrapper").data("title","Already in Favorites")):($j(".votes-fav-wrap .favorite-wrapper").removeClass("active"),$j(".votes-fav-wrap .favorite-wrapper").data("title","Add to Favorites"))}}})})):WIDGET_RATINGS_LIKE_FAV.loggedIn||$j(".votes-fav-wrap .favorite-wrapper").on("click",function(){signinbox.show(textPHTranslation.loginTitleVideo)})}),MG_Utils.domReady(function(){var e=document.querySelector(".js-voteDown"),t=document.querySelector(".votesDown");if(e&&t&&MG_Utils.hasClass(e,"active")&&0===parseInt(t.innerHTML)){t.innerHTML=1;var a=document.querySelectorAll(".rating-bar")[1];a&&MG_Utils.hasClass(a,"bar-no-votes")&&(MG_Utils.removeClass(a,"bar-no-votes"),MG_Utils.addClass(a,"bar-thumbs-down"))}});