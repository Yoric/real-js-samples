/* 2017-12-04 15:01:15 */"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){var r=t(4),o=t(2),i=t(3),a=t(5),c=(t(16).getLogger("ycdloader",r.logLevel),o.makeNameSpace(window,r.namespace.parent)),u=new a;o.extend(c,{configure:function(e){u.updateConfig(e)},showModule:function(e){var n=i.extend({},e);u.addModule(n)}})},function(e,n,t){var r;r=function(){return Function("return this")()}.call(n,t,n,e),!(void 0!==r&&(e.exports=r))},function(e,n,t){var r;r=function(){var e={extend:function(e){for(var n=[].slice.call(arguments,1),t=0;t<n.length;t++)for(var r in n[t])e[r]=n[t][r];return e}};return e.extend(e,{reduce:function(e,n,t){for(var r=t,o=0;o<e.length;o++)r=n(r,e[o],o,e);return r},map:function(e,n){for(var t=[],r=0;r<e.length;r++)t.push(n(e[r],r,e));return t},range:function(n,t){e.isUndefined(t)&&(t=n,n=0);for(var r=[],o=n;t>o;o++)r.push(o);return r},keys:function n(e){var n=[];for(var t in e)n.push(t);return n},isArray:function(e){return e instanceof Array},isUndefined:function(e){return"undefined"==typeof e},isObject:function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))},each:function(e,n){for(var t=0;t<e.length;t++)n(e[t],t,e)},filter:function(e,n){for(var t=[],r=0;r<e.length;r++)n(e[r],r,e)&&t.push(e[r]);return t},find:function(e,n){for(var t=0;t<e.length;t++)if(n(e[t],t,e))return e[t];return-1},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},makeNameSpace:function(n,t){var r=e.isArray(t)?t:t.split(".");return e.reduce(r,function(e,n){return e[n]||(e[n]={}),e[n]},n)},buildQuery:function(n){return e.map(e.keys(n),function(e){return e+"="+encodeURIComponent(n[e])}).join("&")},parseGetParam:function(n){var t={},r=n?n.split("&"):[];return e.each(r,function(n){var r=n.split("="),o=e.trim(r[0]),i=e.isUndefined(r[1])?"":e.trim(decodeURIComponent(r[1]));t[o]=i}),function(n,r,o){switch(arguments.length){case 3:return!e.isUndefined(t[n])&&r.test(t[n])?t[n]:o;case 1:return t[n];case 0:return t;default:throw"Invalid argument"}}},getOrigin:function(e){return e.split("/").slice(0,3).join("/")},template:function(n){var t=e.map(n.match(/\{:.*?\}/g),function(e){return e.substr(2,e.length-3)});return function(r){return e.reduce(t,function(e,n){var t="{:"+n+"}",o=r[n]||t;return e.split(t).join(o)},n)}}}),e}.call(n,t,n,e),!(void 0!==r&&(e.exports=r))},function(e){e.exports=$},function(e,n,t){var r;r=function(){var e="4.0.2",n=location.protocol+"//s.yimg.jp/images/ycd/lib/ycdloader/"+e,t=-1!==location.search.indexOf("ycd_log_debug")?"debug":"disable";return{logLevel:t,namespace:{parent:"YAHOO.JP.Ycd.recommend.loader",child:"YAHOO.JP.Ycd.recommend.child"},defaults:{grandChildPath:"/ycd/communicate",proxyURL:n+"/ycdproxy.html",timeout:1e4},taboolaLoader:{cdn:{taboola:"cdn-yjp.taboola.com",yj:"cdn-ycd.c.yimg.jp"},template:"//{:domain}/libtrc/{:dir_name}/loader.js",stub:n+"/taboola_loader_stub.min.js"}}}.call(n,t,n,e),!(void 0!==r&&(e.exports=r))},function(e,n,t){function r(e,n){for(var t in e)n[t]&&(e[t]=n[t])}function o(){this.placeholders=[],this.logger=t(16).getLogger("module-manager",i.logLevel),this.config={proxyURL:i.defaults.proxyURL,timeout:i.defaults.timeout,iframePath:i.defaults.grandChildPath,origin:a.getOrigin(d),grandChildCallbackNS:i.namespace.parent+".callback",directLoad:!1,useYcdn:!1,dirName:null,url:d,referrer:s.referrer,article:"auto"},this.beaconer=null}var i=t(4),a=t(2),c=t(6),u=t(7),l=t(17),s=window.location,d=s.href;$.extend(o.prototype,{moveURL:function(e,n){var t=navigator.userAgent,r=-1!==t.indexOf("iPhone")||-1!==t.indexOf("Android");n&&!r?window.open(e):s.href=e},updateConfig:function(e){r(this.config,e),!this.makeBeaconer&&e.rapid&&e.rapid.spaceId&&e.rapid.keys&&(this.makeBeaconer=l.init(e.rapid.spaceId,e.rapid.keys,e.rapid.https),this.logger.debug("beaconer initialized"))},findPlaceholder:function(e){for(var n=this.placeholders,t=0;t<n.length;t++)if(n[t].id===e)return n[t];return-1},getPlaceholder:function(e){var n=this.findPlaceholder(e);return-1===n&&(this.logger.debug("new placeholder: ",e),n=new u(e,this),this.placeholders.push(n)),n},addModule:function(e){this.logger.debug("new module: ",e.container,e),this.updateConfig(e);var n=this.getPlaceholder(e.into||e.container);n.dirName=e.dirName;var t=new c(e,n,this.logger);n.addModule(t)}}),e.exports=o},function(e,n,t){function r(e,n,t){this.placeholder=n,this.manager=n.manager,this.logger=t,this.config={mode:e.mode,placement:e.placement,container:e.container,sponsored_contents:e.sponsored_contents||!1,target_type:e.target_type||"mix"},this.rapid=e.rapid,this.beaconer=null,this.onload=e.onload||function(){},this.onerror=e.onerror||function(){}}{var o=t(3);t(4)}o.extend(r.prototype,{setArticleLength:function(e){this.logger.debug(this," has "+e+" articles"),this.rapid?(this.logger.debug(this," use rapid. sending beacon..."),this.beaconer=this.manager.makeBeaconer(this.rapid,e),this.beaconer.sendViewBeacon()):this.logger.debug(this," does not use rapid")},clickArticle:function(e,n){{var t=this,r=function(){return t.manager.moveURL(e,t.config.sponsored_contents)},o=navigator.userAgent;-1!==o.indexOf("iPhone"),-1!==o.indexOf("Android")}return this.config.sponsored_contents?void this.beaconer.sendClickBeacon(n,function(){}):void(this.beaconer?this.beaconer.sendClickBeacon(n,r):r())},getConfig:function(){return this.config}}),e.exports=r},function(e,n,t){function r(e,n){var r=this;if(this.manager=n,this.id=e,this.modules=[],this.$el=a("#"+e),this.delay=200,this.dirName=null,this.stopTimeout=null,this.logger=t(16).getLogger("placeholder:"+this.id,o.logLevel),i.extend(this,c),!this.$el.length)throw new Error("[ycdloader] #"+e+"が存在しません。");this.logger.debug("placeholder scheduled to load modules after ",this.delay,"ms"),s(function(){r.start(),r.stopTimeout=s(function(){r.trigger("placeholder-timeout")},r.manager.config.timeout)},this.delay),this.on({"module-loaded":function(e){var n=e.articleLength,t=r.findModule(e.container);if(-1===t)throw new Error("unknown module ",e.container);r.stopTimeout(),r.logger.debug(e.container,"is rendered"),t.setArticleLength(n)},"placeholder-timeout":function(){r.logger.error("placeholder timed out: ",r.id),i.each(r.modules,function(e){e.onerror()})},"click-article":function(e){var n=r.findModule(e.container),t=e.article,o=~~t.itemIndex+1,i=t.logger_url;if(-1===n)throw new Error("unknown module ",e.container);n.clickArticle(i,o),r.logger.debug(t,"is clicked")},"open-link":function(e){var n="true"===e.blank;r.logger.debug(e.url,"will be opened"),r.manager.moveURL(e.url,n)}})}var o=t(4),i=t(2),a=t(3),c=t(8),u=t(9),l=t(11),s=t(12),d=t(13);a.extend(r.prototype,{start:function(){this.logger.debug("placeholder",this.id,"started, includes ",this.modules.length,"modules"),this.manager.config.directLoad?this.withoutIframe():this.withIframe()},withIframe:function(){var e=this;this.logger.debug("make iframe into ","#"+this.id);var n=this.makeIframe();this.on({"change-height":function(t){var r=~~t.iframeHeight;n.height(r+"px"),e.logger.debug("adjusted height to",r+"px")},"placeholder-ready":function(){e.logger.debug(e.id,"ready, start to initialize"),e.sendMessage({type:"create-modules",dirName:e.dirName||e.manager.config.dirName,useYcdn:e.manager.config.useYcdn,article:e.manager.config.article,currentURL:e.manager.config.url,referrer:e.manager.config.referrer,modules:i.map(e.modules,function(e){return e.getConfig()})}),e.sendMessage({type:"flush-modules"})}}),new u.Parent({iframe:n,emitTo:this,callback:this.manager.config.grandChildCallbackNS,childOrigin:i.getOrigin(this.manager.config.proxyURL),messageParser:function(n){JSON||e.logger.error("JSON object is not defined");try{var t=JSON.parse(n)}catch(r){var t=!1}return{placeholder:t.placeholder,event:t.type,data:t}},messageMaker:function(n){if(!n.type)throw"Message type is not specified.";return e.logger.debug("send message to child: ",n),JSON.stringify(n)},messageFilter:function(n){return n.placeholder===e.id}})},withoutIframe:function(){var e,n=this;this.on({"placeholder-ready":function(){n.trigger("create-modules",{dirName:n.dirName||n.manager.config.dirName,useYcdn:n.manager.config.useYcdn,article:n.manager.config.article,currentURL:n.manager.config.url,referrer:n.manager.config.referrer,modules:i.map(n.modules,function(e){return e.getConfig()})}),n.trigger("flush-modules")},"create-modules":function(t){n.logger.debug("add modules",t.dirName,t.modules),e=e||d({dirName:t.dirName,useYcdn:t.useYcdn,article:t.article,currentURL:t.currentURL,referrer:t.referrer}),i.each(t.modules,function(t){var r=a("#"+t.container);if(0===r.length)throw"Not found container element #"+t.container;e.addModule({container:t.container,target_type:t.target_type||"mix",mode:t.mode,placement:t.placement,sponsored_contents:t.sponsored_contents||!1,onrender:function(){n.trigger("module-loaded",{articleLength:a(".videoCube",r).length,container:t.container})},onclick:function(e){n.logger.debug(t.container,"article is clicked",e),n.trigger("click-article",{container:t.container,article:e})},onclickLogo:function(e){n.logger.debug(t.container,"logo is clicked",e),n.trigger("open-link",{container:t.container,blank:!0,url:e})}})})}}),this.trigger("placeholder-ready")},makeIframe:function(){var e={placeholder:this.id,origin:this.manager.config.origin},n=i.parseGetParam(window.location.search.substr(1))(),t=i.filter(i.keys(n),function(e){return 0===e.indexOf("trc_")});i.each(t,function(t){e[t]=n[t]});var r=a('<iframe frameborder="0">').attr("src",this.manager.config.proxyURL+"?"+l.stringify(e)).appendTo(this.$el);return r.attr({width:"100%",height:0,scrolling:"no",marginheight:0,marginwidth:0}).css({overflow:"hidden",border:0,marginTop:0,marginLeft:0,marginRight:0,verticalAlign:"bottom"}),r},addModule:function(e){this.modules.push(e)},findModule:function(e){return i.find(this.modules,function(n){return n.config.container===e})}}),e.exports=r},function(e,n,t){var r,o;r=[t(2)],o=function(e){var n="*",t=function(e,n,t,r){var o=e.__events||(e.__events=[]);o.push({type:n,listener:t,options:r||{}})};return{on:function(n,r,o){if(e.isObject(arguments[0])){var i=arguments[0],a=this;e.each(e.keys(i),function(e){t(a,e,i[e],{})})}else t(this,n,r,o)},once:function(n,r){var o={once:!0};if(e.isObject(arguments[0])){var i=arguments[0],a=this;e.each(e.keys(i),function(e){t(a,e,i[e],o)})}else t(this,n,r,o)},trigger:function(t,r){var o=this.__events||(this.__events=[]),i=e.filter(o,function(e){var r=!e.options.once||e.options.once&&!e.executed;return(e.type===n||e.type===t)&&r}),a=this;e.each(i,function(e){e.type===n?e.listener.call(a,t,r):e.listener.call(a,r),e.executed=!0})}}}.apply(n,r),!(void 0!==o&&(e.exports=o))},function(e,n,t){var r,o;r=[t(1),t(3),t(10),t(2),t(8)],o=function(e,n,t,r,o){function i(t){var i=r.extend({iframe:null,emitTo:{},childOrigin:"*",forceIframe:!1,messageFilter:function(){return!0},messageParser:function(e){return{event:"message",data:e}},messageMaker:function(e){return e}},t),a=n(i.iframe),l=r.extend(i.emitTo,o);if(0===a.length)throw"No iframe";var d=a.get(0).contentWindow,f=i.emitTo.sendMessage=function(){return!i.forceIframe&&c?function(e){d.postMessage(i.messageMaker(e),i.childOrigin)}:function(e){var n=u(a.attr("src"),i.messageMaker(e));a.attr("src",n)}}(),g=function(e){var n=i.messageParser(e);i.messageFilter(n)&&l.trigger(n.event,n.data)};return i.callback&&s(i.callback,g),n(e).on("message",function(e){i.childOrigin===e.originalEvent.origin&&g(e.originalEvent.data)}),{send:f,receiver:l}}function a(n){var o=t.hash.slice(1),i=r.reduce(n.callback.split("."),function(e,n){return e[n]},e.parent.parent);i(o)}var c=!!e.postMessage,u=function(e,n){return e.split("#")[0]+"#"+n},l=function(e){return e&&e.trigger&&e.on},s=function(n,t){n=r.isArray(n)?n:n.split(".");var i=n.slice(-1)[0],a=r.makeNameSpace(e,n.slice(0,-1));l(a[i])||(a[i]=r.extend(function(e){a[i].trigger("*",e)},o)),a[i].on("*",function(e,n){t(n)})};return{Parent:i,GrandChild:a}}.apply(n,r),!(void 0!==o&&(e.exports=o))},function(e,n,t){var r;r=function(){return location}.call(n,t,n,e),!(void 0!==r&&(e.exports=r))},function(e){function n(e){var n=[];for(var t in e)n.push(t);return n}function t(e,n){for(var t=0;t<e.length;t++)n(e[t])}function r(e,n){for(var t=[],r=0;r<e.length;r++)t.push(n(e[r]));return t}function o(e){var n={},r=e?e.split("&"):[];return t(r,function(e){var t=e.split("="),r=t[0],o="undefined"!=typeof t[1]?decodeURIComponent(t[1]):"";n[r]=o}),n}function i(e){return r(n(e),function(n){return n+"="+encodeURIComponent(e[n])}).join("&")}e.exports={parse:o,stringify:i}},function(e,n,t){var r;r=function(){var e=function(e,n){var t=setTimeout(e,n);return function(){clearTimeout(t)}};return e}.call(n,t,n,e),!(void 0!==r&&(e.exports=r))},function(e,n,t){function r(e){if(!e.dirName)throw"No dirName parameter";var n=u.template(s.taboolaLoader.template)({dir_name:e.dirName,domain:e.useYcdn?s.taboolaLoader.cdn.yj:s.taboolaLoader.cdn.taboola}),t=l.ajaxSettings.cache||!1;l.ajaxSetup({cache:!0}),l("<script>").attr({src:n,async:!0}).insertAfter("script:first"),l.ajaxSetup({cache:t})}function o(e){var n=l("#"+e.container);n.on("click",".videoCube",function(){var t=l("a:first",this).attr("href");e.onclick({itemIndex:l(".videoCube",n).index(this),url:t,logger_url:t})})}function i(e){var n=l("#"+e.container);n.on("click",".logoDiv a",function(n){n.preventDefault(),e.onclickLogo&&e.onclickLogo(l(this).attr("href"))})}function a(e){var n=l("#"+e.container),t=e.onrender,r=f({initialValue:0,watch:function(){return l(".videoCube",n).length},onChange:function(){r.stop(),t()}})}function c(e){r(e);var n={article:e.article||"auto"};return e.currentURL&&(n.url=e.currentURL),e.referrer&&(n.referrer=e.referrer),window._taboola=window._taboola||[],window._taboola.push(n),{addModule:function(e){g.debug("AddModule: ",e),e.onrender&&(a(e),e.onrender=function(){}),window._taboola.push(e),e.sponsored_contents&&e.onclick&&(g.debug("add click event hander to ",e.container),o(e)),i(e)},flush:function(){window._taboola.push({flush:!0})}}}var u=t(2),l=t(3),s=t(4),d={urlTemplate:s.taboolaLoader.template,dirName:null,cdnDomain:s.taboolaLoader.cdn.taboola,currentURL:null},f=t(14),g=t(16).getLogger("taboola-module:",s.logLevel);e.exports=function(e){var n=u.extend(d,e);return c(n)}},function(e,n,t){var r,o;r=[t(2),t(15),t(12)],o=function(e,n,t){return function(r){var o,i=e.extend({interval:50,watch:function(){},onChange:function(){},compare:function(e,n){return e===n},startDelay:0,autoStart:!0},r),a=e.isUndefined(i.initialValue)?i.watch():i.initialValue,c=function(){var e=i.watch();i.compare(a,e)||(i.onChange(a,e),a=e)},u=function(){o&&o()},l=function(){u(),o=n(c,i.interval)};return i.autoStart&&t(l,i.startDelay),{stop:u,start:l}}}.apply(n,r),!(void 0!==o&&(e.exports=o))},function(e,n,t){var r;r=function(){var e=function(e,n){var t=setInterval(e,n);return function(){clearInterval(t)}};return e}.call(n,t,n,e),!(void 0!==r&&(e.exports=r))},function(e){function n(e,t){this.name=e,this.logLevel=t||n.logLevels.disable,this.handlers=[],this.handlers.push(function(e){var n=[].slice.call(arguments,1),t=["["+this.name+"]["+e+"]"].concat(n);console.log.apply(console,t)})}n.logLevels={debug:100,info:200,warn:300,error:400,critical:500,disable:1e3},n.prototype.addHandler=function(e){this.handlers.push(e)},n.prototype.log=function(e,t){var r=[e].concat([].slice.call(t,0)),o=n.logLevels[e];if(!(this.logLevel>o))for(var i=0;i<this.handlers.length;i++)this.handlers[i].apply(this,r)},n.prototype.debug=function(){this.log.call(this,"debug",arguments)},n.prototype.info=function(){this.log.call(this,"info",arguments)},n.prototype.warn=function(){this.log.call(this,"warn",arguments)},n.prototype.error=function(){this.log.call(this,"error",arguments)},n.prototype.critical=function(){this.log.call(this,"critical",arguments)},n.getLogger=function(e,t){return new n(e,n.logLevels[t])},e.exports=n},function(e,n,t){YAHOO.i13n.WEBWORKER_FILE="https://s.yimg.jp/images/ds/ult/ycd/rapidjp-1.0.0.js";var r=t(2),o=t(4),i=t(16).getLogger("beaconer",o.logLevel),a=function(e,n){return e>=1&&n>=e},c=function(e,n,t){return{sec:e,_links:r.map(r.range(1,t+1),function(e){return{slk:n,pos:e}})}},u=function(e,n,t){var t=t===!1?!1:!0,r={keys:n,spaceid:e,https:t},o=new YAHOO.i13n.JP.simpleRapid(r).initRapid();return function(e,n){var t=c(e.sec,e.slk,n);return{sendViewBeacon:function(){i.debug("sending beacon... ",JSON.stringify(t)),o.beaconLinkViews([t])},sendClickBeacon:function(t,r){return a(t,n)?void o.beaconClick(e.sec,e.slk,t,{pos:t},null,r):void r()}}}};e.exports={init:u}}]);