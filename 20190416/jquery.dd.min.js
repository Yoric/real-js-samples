(function(a){var q="",H=function(h,j){var i=this,j=a.extend({height:120,visibleRows:7,rowHeight:23,showIcon:!0,zIndex:9999,mainCSS:"dd",useSprite:!1,animStyle:"slideDown",onInit:"",style:""},j);this.ddProp={};var w="",p,x,y,r;p=!0;x=!1;y=null;var n=!1,H={postElementHolder:"_msddHolder",postID:"_msdd",postTitleID:"_title",postTitleTextID:"_titletext",postChildID:"_child",postAID:"_msa",postOPTAID:"_msopta",postInputID:"_msinput",postArrowID:"_arrow",postInputhidden:"_inp"},N=j.mainCSS;this.onActions=
{};var e=a(h).prop("id");if("undefined"==typeof e||0>=e.length)e="msdrpdd"+a.msDropDown.counter++,a(h).attr("id",e);var I=a(h).prop("style");j.style+=void 0==I?"":I;var z=a(h).children();if(n=1<a(h).prop("size")||!0==a(h).prop("multiple")?!0:!1)j.visibleRows=a(h).prop("size");var l={},A,E={},f=function(b){"undefined"==typeof E[b]&&(E[b]=document.getElementById(b));return E[b]},g=function(b){return e+H[b]},B=function(b,c,d,k){var m="",s="opt"==k?g("postOPTAID"):g("postAID"),c="opt"==k?s+"_"+c+"_"+
d:s+"_"+c,k=d="";!1!=j.useSprite?k=" "+j.useSprite+" "+b.className:(d=a(b).prop("title"),d=0==d.length?"":'<img src="'+d+'" align="absmiddle" /> ');var s=a(b).text(),f=a(b).val(),i=!0==a(b).prop("disabled")?"disabled":"enabled";l[c]={html:d+s,value:f,text:s,index:b.index,id:c};f=a(b).prop("style");a:{var b=b.index,h=a("#"+e+" option:selected");if(1<h.length)for(var n=0;n<h.length;n++){if(b==h[n].index){b=!0;break a}}else if(1==h.length&&h[0].index==b){b=!0;break a}b=!1}m=!0==b?m+('<a href="javascript:void(0);" class="selected '+
i+k+'"'):m+('<a  href="javascript:void(0);" class="'+i+k+'"');!1!==f&&void 0!==f&&(m+=" style='"+f+"'");return m+(' id="'+c+'">')+(d+'<span class="ddTitleText">'+s+"</span></a>")},O=function(){if(0==z.length)return"";var b="";g("postAID");g("postOPTAID");z.each(function(c){var d=z[c];if("OPTGROUP"==d.nodeName){b+="<div class='opta'>";b+="<span style='font-weight:bold;font-style:italic; clear:both;'>"+a(d).prop("label")+"</span>";var e=a(d).children();e.each(function(a){b+=B(e[a],c,a,"opt")});b+="</div>"}else b+=
B(d,c,"","")});return b},P=function(){g("postID");var b=g("postChildID"),a=j.style;sDiv="";sDiv+='<div id="'+b+'" class="ddChild"';sDiv=n?sDiv+(""!=a?' style="border-top:1px solid #c3c3c3;display:block;position:relative;'+a+'"':""):sDiv+(""!=a?' style="'+a+'"':"");return sDiv+=">"},Q=function(){var b=g("postTitleID"),c=g("postArrowID"),d=g("postTitleTextID");g("postInputhidden");var k="",m="";0<f(e).options.length&&(k=a("#"+e+" option:selected").text(),m=a("#"+e+" option:selected").prop("title"));
m=0==m.length||void 0==m||!1==j.showIcon||!1!=j.useSprite?"":'<img src="'+m+'" align="absmiddle" /> ';return'<div id="'+b+'" class="ddTitle">'+('<span id="'+c+'" class="arrow"></span><span class="ddTitleText" id="'+d+'">'+m+'<span class="ddTitleText">'+k+"</span></span></div>")},F=function(){var b=g("postChildID");a("#"+b+" a.enabled").unbind("click");a("#"+b+" a.enabled").bind("click",function(c){c.preventDefault();J(this);u();n||(a("#"+b).unbind("mouseover"),p=!1,c=!1==j.showIcon?a(this).text():
a(this).html(),t(c),i.close())})},U=function(){var b=!1,c=g("postID"),d=g("postTitleID");g("postTitleTextID");var k=g("postChildID");g("postArrowID");var m=a("#"+e).outerWidth(),m=m+2,f=j.style;0<a("#"+c).length&&(a("#"+c).remove(),b=!0);var h='<div id="'+c+'" class="'+N+'"',h=h+(""!=f?' style="'+f+'"':"")+">"+Q(),h=h+P(),h=h+O(),h=h+"</div></div>";!0==b?(f=g("postElementHolder"),a("#"+f).after(h)):a("#"+e).after(h);n&&(d=g("postTitleID"),a("#"+d).hide());a("#"+c).css("width",m+"px");a("#"+k).css("width",
m-2+"px");z.length>j.visibleRows?(m=parseInt(a("#"+k+" a:first").css("padding-bottom"))+parseInt(a("#"+k+" a:first").css("padding-top")),m=j.rowHeight*j.visibleRows-m,a("#"+k).css("height",m+"px")):n&&(m=a("#"+e).height(),a("#"+k).css("height",m+"px"));!1==b&&(R(),S(e));!0==a("#"+e).prop("disabled")&&a("#"+c).css("opacity",0.3);T();a("#"+d).bind("mouseover",function(){K(1)});a("#"+d).bind("mouseout",function(){K(0)});F();a("#"+k+" a.disabled").css("opacity",0.3);n&&a("#"+k).bind("mouseover",function(){if(!x){x=
true;a(document).bind("keydown",function(b){var a=b.keyCode;y=a;if(a==39||a==40){b.preventDefault();b.stopPropagation();C("next");u()}if(a==37||a==38){b.preventDefault();b.stopPropagation();C("previous");u()}})}});a("#"+k).bind("mouseout",function(){p=false;a(document).unbind("keydown");x=false;y=null});a("#"+d).bind("click",function(){p=false;if(a("#"+k+":visible").length==1)a("#"+k).unbind("mouseover");else{a("#"+k).bind("mouseover",function(){p=true});i.open()}});a("#"+d).bind("mouseout",function(){p=
false});j.showIcon&&!1!=j.useSprite&&D()},o=function(b){for(var a in l)if(l[a].index==b)return l[a];return-1},J=function(b){var c=g("postChildID");1==a("#"+c+" a.selected").length&&(w=a("#"+c+" a.selected").text());n||a("#"+c+" a.selected").removeClass("selected");var d=a("#"+c+" a.selected").prop("id");if(void 0!=d)var k=void 0==r||null==r?l[d].index:r;b&&!n&&a(b).addClass("selected");if(n)if(d=y,!0==a("#"+e).prop("multiple"))if(17==d)r=l[a(b).prop("id")].index,a(b).toggleClass("selected");else if(16==
d){a("#"+c+" a.selected").removeClass("selected");a(b).addClass("selected");b=a(b).prop("id");b=l[b].index;for(c=Math.min(k,b);c<=Math.max(k,b);c++)a("#"+o(c).id).addClass("selected")}else a("#"+c+" a.selected").removeClass("selected"),a(b).addClass("selected"),r=l[a(b).prop("id")].index;else a("#"+c+" a.selected").removeClass("selected"),a(b).addClass("selected"),r=l[a(b).prop("id")].index},S=function(b){f(b).refresh=function(){a("#"+b).msDropDown(j)}},T=function(){for(var b=g("postID"),c="focus,blur,change,click,dblclick,mousedown,mouseup,mouseover,mousemove,mouseout,keypress,keydown,keyup".split(","),
d=0;d<c.length;d++){var k=c[d];if(!0==v(k))switch(k){case "focus":a("#"+b).bind("mouseenter",function(){f(e).focus()});break;case "click":a("#"+b).bind("click",function(){a("#"+e).trigger("click")});break;case "dblclick":a("#"+b).bind("dblclick",function(){a("#"+e).trigger("dblclick")});break;case "mousedown":a("#"+b).bind("mousedown",function(){a("#"+e).trigger("mousedown")});break;case "mouseup":a("#"+b).bind("mouseup",function(){a("#"+e).trigger("mouseup")});break;case "mouseover":a("#"+b).bind("mouseover",
function(){a("#"+e).trigger("mouseover")});break;case "mousemove":a("#"+b).bind("mousemove",function(){a("#"+e).trigger("mousemove")});break;case "mouseout":a("#"+b).bind("mouseout",function(){a("#"+e).trigger("mouseout")})}}},R=function(){var b=g("postElementHolder");a("#"+e).after("<div class='ddOutOfVision' style='height:0px;overflow:hidden;position:absolute;' id='"+b+"'></div>");a("#"+e).appendTo(a("#"+b))},t=function(b){var c=g("postTitleTextID");a("#"+c).html(b)},C=function(b){var c=g("postChildID"),
d=a("#"+c+" a:visible"),e=d.length,f=a("#"+c+" a:visible").index(a("#"+c+" a.selected:visible")),i;switch(b){case "next":f<e-1&&(f++,i=d[f]);break;case "previous":f<e&&0<f&&(f--,i=d[f])}if("undefined"==typeof i)return!1;a("#"+c+" a.selected").removeClass("selected");a(i).addClass("selected");d=i.id;n||(e=!1==j.showIcon?l[d].text:a("#"+d).html(),t(e),D(l[d].index));"next"==b?parseInt(a("#"+d).position().top+a("#"+d).height())>=parseInt(a("#"+c).height())&&a("#"+c).scrollTop(a("#"+c).scrollTop()+a("#"+
d).height()+a("#"+d).height()):0>=parseInt(a("#"+d).position().top+a("#"+d).height())&&a("#"+c).scrollTop(a("#"+c).scrollTop()-a("#"+c).height()-a("#"+d).height())},D=function(b){if(!1!=j.useSprite){var c=g("postTitleTextID"),b="undefined"==typeof b?f(e).selectedIndex:b,b=f(e).options[b].className;if(0<b.length){var d=g("postChildID"),k=a("#"+d+" a."+b).prop("id"),b=a("#"+k).css("background-image"),d=a("#"+k).css("background-position"),k=a("#"+k).css("padding-left");void 0!=b&&a("#"+c).find(".ddTitleText").attr("style",
"background:"+b);void 0!=d&&a("#"+c).find(".ddTitleText").css("background-position",d);void 0!=k&&a("#"+c).find(".ddTitleText").css("padding-left",k);a("#"+c).find(".ddTitleText").css("background-repeat","no-repeat");a("#"+c).find(".ddTitleText").css("padding-bottom","2px")}}},u=function(){var b=g("postChildID"),c=a("#"+b+" a.selected");if(1==c.length){a("#"+b+" a.selected").text();var d=a("#"+b+" a.selected").prop("id");void 0!=d&&(f(e).selectedIndex=l[d].index);j.showIcon&&!1!=j.useSprite&&D()}else if(1<
c.length)for(b=0;b<c.length;b++)d=a(c[b]).prop("id"),d=l[d].index,f(e).options[d].selected="selected";c=f(e).selectedIndex;i.ddProp.selectedIndex=c},v=function(b){if(void 0!=a("#"+e).prop("on"+b))return!0;var c=a("#"+e).data("events");return c&&c[b]?!0:!1},V=function(){var b=g("postChildID");!0==v("change")&&(b=l[a("#"+b+" a.selected").prop("id")].text,a.trim(w)!==a.trim(b)&&""!==w&&a("#"+e).trigger("change"));!0==v("mouseup")&&a("#"+e).trigger("mouseup");!0==v("blur")&&a(document).bind("mouseup",
function(){a("#"+e).focus();a("#"+e)[0].blur();u();a(document).unbind("mouseup")})},K=function(b){var c=g("postArrowID");1==b?a("#"+c).css({backgroundPosition:"0 100%"}):a("#"+c).css({backgroundPosition:"0 0"})},W=function(){for(var b in f(e))"function"!=typeof f(e)[b]&&void 0!==f(e)[b]&&null!==f(e)[b]&&i.set(b,f(e)[b],!0)},G=function(){var b=g("postChildID"),c=g("postID"),d=a("#"+c).position(),e=a("#"+c).height(),f=a(window).height(),i=a(window).scrollTop(),c=a("#"+b).height(),h={zIndex:j.zIndex,
top:d.top+e+"px",display:"none"},l=j.animStyle,n=!1,o="noBorderTop";a("#"+b).removeClass("noBorderTop");a("#"+b).removeClass("borderTop");f+i<Math.floor(c+e+d.top)&&(b=d.top-c,0>d.top-c&&(b=10),h={zIndex:j.zIndex,top:b+"px",display:"none"},l="show",n=!0,o="borderTop");return{opp:n,ani:l,css:h,border:o}},L=function(){null!=i.onActions.onOpen&&eval(i.onActions.onOpen)(i)},M=function(){V();null!=i.onActions.onClose&&eval(i.onActions.onClose)(i)};this.open=function(){if(!(!0==i.get("disabled",!0)||0==
i.get("options",!0).length)){var b=g("postChildID");""!=q&&b!=q&&(a("#"+q).slideUp("fast"),a("#"+q).css({zIndex:"0"}));if("none"==a("#"+b).css("display")){w=l[a("#"+b+" a.selected").prop("id")].text;var c="";A=a("#"+b).height();a("#"+b+" a").show();a(document).bind("keydown",function(d){var g=d.keyCode;if(g==8){d.preventDefault();d.stopPropagation();c=c.length==0?"":c.substr(0,c.length-1)}switch(g){case 39:case 40:d.preventDefault();d.stopPropagation();C("next");break;case 37:case 38:d.preventDefault();
d.stopPropagation();C("previous");break;case 27:case 13:i.close();u();break;default:g>46&&(c=c+String.fromCharCode(g));var h;d=c.toLowerCase();if(d.length==0)h=-1;else{g="";for(h in l)l[h].text.toLowerCase().substr(0,d.length)==d&&(g=g+("#"+l[h].id+", "));h=g==""?-1:g}if(h!=-1){a("#"+b).css({height:"auto"});a("#"+b+" a").hide();a(h).show();h=G();a("#"+b).css(h.css);a("#"+b).css({display:"block"})}else{a("#"+b+" a").show();a("#"+b).css({height:A+"px"})}}if(v("keydown")==true)f(e).onkeydown()});a(document).bind("keyup",
function(){if(a("#"+e).prop("onkeyup")!=void 0)f(e).onkeyup()});a(document).bind("mouseup",function(){p==false&&i.close()});var d=G();a("#"+b).css(d.css);if(!0==d.opp)a("#"+b).css({display:"block"}),a("#"+b).addClass(d.border),L();else a("#"+b)[d.ani]("fast",function(){a("#"+b).addClass(d.border);L()});b!=q&&(q=b)}}};this.close=function(){var b=g("postChildID"),c=a("#"+g("postTitleID")).position().top;!0==G().opp?a("#"+b).animate({height:0,top:c},function(){a("#"+b).css({height:A+"px",display:"none"});
M()}):a("#"+b).slideUp("fast",function(){M();a("#"+b).css({zIndex:"0"});a("#"+b).css({height:A+"px"})});D();a(document).unbind("keydown");a(document).unbind("keyup");a(document).unbind("mouseup")};this.selectedIndex=function(b){if("undefined"==typeof b)return i.get("selectedIndex");i.set("selectedIndex",b)};this.debug=function(b){"undefined"==typeof b||!0==b?a(".ddOutOfVision").removeAttr("style"):a(".ddOutOfVision").attr("style","height:0px;overflow:hidden;position:absolute")};this.set=function(b,
c,d){if(void 0==b||void 0==c)throw{message:"set to what?"};i.ddProp[b]=c;if(!0!=d)switch(b){case "selectedIndex":-1!=o(c)&&(f(e)[b]=c,b=g("postChildID"),a("#"+b+" a.selected").removeClass("selected"),a("#"+o(c).id).addClass("selected"),c=o(f(e).selectedIndex).html,t(c));break;case "disabled":i.disabled(c,!0);break;case "multiple":f(e)[b]=c;if(n=0<a(h).prop("size")||!0==a(h).prop("multiple")?!0:!1)c=a("#"+e).height(),b=g("postChildID"),a("#"+b).css("height",c+"px"),c=g("postTitleID"),a("#"+c).hide(),
b=g("postChildID"),a("#"+b).css({display:"block",position:"relative"}),F();break;case "size":f(e)[b]=c;0==c&&(f(e).multiple=!1);n=0<a(h).prop("size")||!0==a(h).prop("multiple")?!0:!1;0==c?(c=g("postTitleID"),a("#"+c).show(),b=g("postChildID"),a("#"+b).css({display:"none",position:"absolute"}),c="",0<=f(e).selectedIndex&&(b=o(f(e).selectedIndex),c=b.html,J(a("#"+b.id))),t(c)):(c=g("postTitleID"),a("#"+c).hide(),b=g("postChildID"),a("#"+b).css({display:"block",position:"relative"}));break;default:try{f(e)[b]=
c}catch(k){}}};this.get=function(b,a){if(void 0==b&&void 0==a)return i.ddProp;if(void 0!=b&&void 0==a)return void 0!=i.ddProp[b]?i.ddProp[b]:null;if(void 0!=b&&void 0!=a)return f(e)[b]};this.visible=function(b){var c=g("postID");if(!0==b)a("#"+c).show();else if(!1==b)a("#"+c).hide();else return a("#"+c).css("display")};this.add=function(b,c){var d=b.text,h=void 0==b.value||null==b.value?d:b.value,i=void 0==b.title||null==b.title?"":b.title,j=void 0==c||null==c?f(e).options.length:c;f(e).options[j]=
new Option(d,h);""!=i&&(f(e).options[j].title=i);d=o(j);-1!=d?(j=B(f(e).options[j],j,"",""),a("#"+d.id).html(j)):(j=B(f(e).options[j],j,"",""),d=g("postChildID"),a("#"+d).append(j),F())};this.remove=function(b){f(e).remove(b);if(-1!=o(b)){a("#"+o(b).id).remove();for(var c in l)if(l[c].index==b){delete l[c];break}b=0;for(c in l)l[c].index=b,b++}0==f(e).length?t(""):(c=o(f(e).selectedIndex).html,t(c));i.set("selectedIndex",f(e).selectedIndex)};this.disabled=function(b,c){f(e).disabled=b;var d=g("postID");
!0==b?(a("#"+d).css("opacity",0.3),i.close()):!1==b&&a("#"+d).css("opacity",1);!0!=c&&i.set("disabled",b)};this.form=function(){return void 0==f(e).form?null:f(e).form};this.item=function(){if(1==arguments.length)return f(e).item(arguments[0]);if(2==arguments.length)return f(e).item(arguments[0],arguments[1]);throw{message:"An index is required!"};};this.namedItem=function(a){return f(e).namedItem(a)};this.multiple=function(a){if("undefined"==typeof a)return i.get("multiple");i.set("multiple",a)};
this.size=function(a){if("undefined"==typeof a)return i.get("size");i.set("size",a)};this.addMyEvent=function(a,c){i.onActions[a]=c};this.fireEvent=function(a){eval(i.onActions[a])(i)};(function(){U();W();i.set("version",a.msDropDown.version);i.set("author",a.msDropDown.author);""!=j.onInit&&eval(j.onInit)(i)})()};a.msDropDown={version:2.37,author:"Marghoob Suleman",counter:20,create:function(h,j){return a(h).msDropDown(j).data("dd")}};a.fn.extend({msDropDown:function(h){return this.each(function(){var j=
new H(this,h);a(this).data("dd",j)})}});"undefined"==typeof a.fn.prop&&(a.fn.prop=function(h){return a(this).attr(h)})})(jQuery);