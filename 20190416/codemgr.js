!function(){var o={hosts:{"promotionalads.yahoo.co.jp":!0,"tools.promo.yahoo.co.jp":!0,"secure.promotionalads.yahoo.co.jp":!1,"listing-yahoo.smartseminar.jp":!0,"signup.business.yahoo.co.jp":!0,"qa.marketing.yahoo.co.jp":!0,"marketing.yahoo.co.jp":!0,"topics.marketing.yahoo.co.jp":!0,"yahoojp-marketing.tumblr.com":!0,"topics-marketing.yahoo.co.jp":!0},promocode:"",joined:null,joinPromoCode:function(){var o=null==location.search.match(/^\?(.*)$/)?"":RegExp.$1,e=document.getElementsByTagName("a");return YAHOO.JP.listing_ad.setPromoCodes(e,o,"href"),e=document.getElementsByTagName("area"),YAHOO.JP.listing_ad.setPromoCodes(e,o,"href"),e=document.getElementsByTagName("embed"),YAHOO.JP.listing_ad.setPromoCodes(e,o,"src"),!0},setPromoCodes:function(o,e,t){var n,a,i,r,l,s,d,c,m,p=(YAHOO.JP.listing_ad.parsePromoCodeFromText(e),{protocol:/^(.*):(.*)$/,host:/^\/\/([^\/#\?]*)(.*)$/,path:/^([^\?]*)\?(.*)$/,query_o:/\Wo=([^&]*)\W/,fragment:/^([^#]*)#(.*)$/});for(i=0;i<o.length;i+=1)if(n=o[i],a=n.getAttribute(t),null!=a&&0!=a.length&&!a.match(/^#/)){if(r=null,p.protocol.test(a)){if(r=a.replace(p.protocol,"$1"),"http"!=r&&"https"!=r)continue;a=a.replace(p.protocol,"$2")}if(l=null,p.host.test(a)){if(l=a.replace(p.host,"$1"),!(l in YAHOO.JP.listing_ad.hosts))continue;a=a.replace(p.host,"$2")}YAHOO.JP.listing_ad.hosts[l]!==!1&&(s=null,p.fragment.test(a)&&(s=a.replace(p.fragment,"$2"),a=a.replace(p.fragment,"$1")),d=null,c=null,m=null,p.path.test(a)?(d=a.replace(p.path,"$1"),c=a.replace(p.path,"$2"),m=null==("?"+c+"?").match(p.query_o)?null:RegExp.$1):d=a,a="",null!=r&&(a+=r+":"),null!=l&&(a+="//"+l),null!=d&&d.length>0&&(a+=d),null==m?"string"==typeof e&&(a+=e.length>0?"?"+e:""):null==YAHOO.JP.listing_ad.parsePromoCodeFromText("o="+m)&&"string"==typeof e&&(a+=e.length>0?"?"+e:""),"string"==typeof c&&(a+=(a.match(/[?](.*)=(.*)/)?"&":"?")+c),null!=s&&(a+="#"+s),n.setAttribute(t,a))}},loadPromoCode:function(){return YAHOO.JP.listing_ad.joined=null,YAHOO.JP.listing_ad.parsePromoCodeFromText("o="+YAHOO.JP.listing_ad.promocode)?(YAHOO.JP.listing_ad.joined=YAHOO.JP.listing_ad.joinPromoCode(),YAHOO.JP.listing_ad.joined):(YAHOO.JP.listing_ad.promocode=null,"undefined"==typeof jQuery?(YAHOO.JP.listing_ad.joined=!0,!1):($.ajax({type:"GET",url:"//promotionalads-storage.yahoo.co.jp/code/promo",crossDomain:!0,data:"",xhrFields:{withCredentials:!0},dataType:"xml",success:YAHOO.JP.listing_ad.promoCodeLoadedHandler,withCredentials:!0,async:!0,cache:!1}),null))},savePromoCode:function(o){if(0!=o.length&&"undefined"!=typeof jQuery){$.ajax({type:"GET",url:"//promotionalads-storage.yahoo.co.jp/code/promo",crossDomain:!0,data:"o="+o,xhrFields:{withCredentials:!0},async:!0,cache:!1})}},promoCodeLoadedHandler:function(o){var e=YAHOO.JP.listing_ad.parsePromoCodeFromXHR(o);YAHOO.JP.listing_ad.promocode=e,YAHOO.JP.listing_ad.joined=YAHOO.JP.listing_ad.joinPromoCode()},parsePromoCodeFromXHR:function(o){var e=YAHOO.JP.listing_ad.parsePromoCodeFromText(location.search);return"undefined"==typeof jQuery?e:($(o).find("data").each(function(){var o=$(this).find("code").text();o.length>0&&(e=YAHOO.JP.listing_ad.parsePromoCodeFromText("o="+o))}),e)},parsePromoCodeFromText:function(o){var e=null;return("?"+o+"?").match(/[?&]o=(JP[0-9]{4}|JPHOME)[?&]/)&&(e=RegExp.$1),"string"==typeof e&&6==e.length?e:null},parseTrackingCodeFromText:function(o){var e=null;return("?"+o+"?").match(/[?&]o=(OM[0-9]{4}|OMHOME)[?&]/)&&(e=RegExp.$1),"string"==typeof e&&6==e.length?e:null},toTrackingCode:function(){return null!==YAHOO.JP.listing_ad.parsePromoCodeFromText("o="+YAHOO.JP.listing_ad.promocode)?YAHOO.JP.listing_ad.parseTrackingCodeFromText("o="+YAHOO.JP.listing_ad.promocode.replace("JP","OM")):null}},e=function(e){var t;return"undefined"!=typeof e?(t={},t[e]=o):t=o,t};"undefined"!=typeof this.YAHOO&&this.YAHOO?"undefined"==typeof this.YAHOO.JP?this.YAHOO.JP=e("listing_ad"):this.YAHOO.JP.listing_ad=e():this.YAHOO=function(){return{JP:e("listing_ad")}}()}();