"use strict";StackExchange.OpenIdConfirm=function(){var e=function(){$(".profile-picture-popup").fadeOutAndRemove(),$(document).unbind("click",t),$(document).unbind("keyup",n)},t=function(t){var n=$(t.target);n.hasClass("profile-picture-popup")||n.parents(".profile-picture-popup").length||e()},n=function(t){27==(t.keyCode||t.which)&&e()},i=function(i,r){var o=$(".js-change-picture");o.hasClass("s-btn")?o.addClass("is-loading"):StackExchange.helpers.addSpinner($("#change-picture-progress")),$.get("/users/new/popup/change-picture",{"currentPictureUrl":$("#profile-image").val(),"email":i,"authProvidedUrl":r},function(i){var r=$(i),a=$("#picture-popup");StackExchange.helpers.removeSpinner(),o.removeClass("is-loading"),r.find(".avatar-change").click(function(t){var n=$(this).find("img").attr("src").replace("?s=42","?s=128&g=1").replace("?sz=42","?sz=128");$("#profile-image").val(n),$(".picture-container img").attr("src",n),e(),t.preventDefault()}),r.find("#avatar-upload").click(function(){StackExchange.imageUploader.createImageUploadBackground(),StackExchange.imageUploader.uploadImageDialog(function(e){StackExchange.imageUploader.removeImageUploadBackground(),e&&($("#profile-image").val(e),$(".picture-container img").attr("src",e+"?s=128&g=1"))},"/upload/image?https=true"),e()}),r.find("#profile-picture-cancel").click(function(t){e(),t.preventDefault()}),a.empty(),r.appendTo(a),r.fadeIn("fast");var s=$(".js-change-picture").data("image-type"),c=r.find('a[data-profile-type="'+s+'"]');s&&c.length||(c=r),c.find(".badge-earned-check:first").show(),$(document).click(t),$(document).keyup(n)})},r=function(e,t,n){$(".js-change-picture").click(function(){i(e,t)});var r=$("input#display-name");if(r.length){$("#logout-user").submit(function(e){var t=r.val().length>0||confirm("You haven't chosen a display name, so the system will assign you a generic one. Do you wish to continue?");t||e.preventDefault()});var o;n||(r.on("focus paste",function(){var e=function(e){return e.pStart+"Display name can only"+e.pEnd+" "+e.listStart+" "+e.itemStart+"contain letters, digits, spaces, apostrophes, or hyphens"+e.itemEnd+" "+e.itemStart+"start with a letter or a digit"+e.itemEnd+" "+e.itemStart+"be 3 to 30 characters long"+e.itemEnd+" "+e.listEnd}({"pStart":"<p>","pEnd":"</p>","listStart":"<ul>","listEnd":"</ul>","itemStart":"<li>","itemEnd":"</li>"});o=StackExchange.helpers.showMessage(r,e,{"position":{"my":"left top","at":"right center"},"css":{"width":"120px;","color":"#fff"},"closeOthers":!1,"dismissable":!1,"type":"info"})}),r.on("blur",function(){o&&(o.remove(),o=null)}))}if(n){var a=$("input[name=WorkOrganization]");a.typeWatch({"highlight":!0,"wait":500,"captureLength":-1}),a.autocomplete("/search/company",{"max":6,"matchSubset":!0,"highlightItem":!0,"multiple":!1,"multipleSeparator":" ","matchContains":!0,"scroll":!0,"scrollHeight":300});var s=$("input[name=WorkRole]");s.typeWatch({"highlight":!0,"wait":500,"captureLength":-1}),s.autocomplete("/search/role",{"max":6,"matchSubset":!0,"highlightItem":!0,"multiple":!1,"multipleSeparator":" ","matchContains":!0,"scroll":!0,"scrollHeight":300}),$(".type-dev").on("click",function(){var e=this.getAttribute("id"),t=c(e);t&&t.removeClass("disabled-area").find('input[type="text"]').removeAttr("disabled").first().focus()});var c=function(e){var t=$("."+e+"-area");return t&&(t.is(":visible")||t.removeClass("hidden").siblings(".input-area").addClass("hidden")),t},l=$(".about-careers-msg"),u=!1;$(".about-careers").on("click",function(e){e.preventDefault(),$(this).toggleClass("active"),l.toggle(),u||(StackExchange.using("gps",function(){StackExchange.gps.track("signup_setprofile_why_careers.click",{})}),u=!0)});var d=$(".careers-email");$(".type-careers").on("click",function(){d.show()}),$(".type-careers-not").on("click",function(){d.hide()})}var f=function(e,t){e.data("entered")||(StackExchange.using("gps",function(){StackExchange.gps.track(t,{},!0)}),e.data("entered",!0))};$(".js-change-picture").click(function(e){f($(e.target),"signup_confirmation.photo.click")}),$("#confirm-submit").click(function(e){f($(e.target),"signup_confirmation.create.click")}),$(".privacy-policy-agreement").on("click","a[name=privacy],a[name=tos]",function(e){var t=$(e.target),n=t.attr("name");f(t,"signup_confirmation."+n+".click")}),$("#display-name").change(function(e){var t=$(e.target);t.val().length&&f(t,"signup_confirmation.name.entered")}),n&&($(".js-fav-tags").change(function(e){var t=$(e.target);if(t.val().length){var n=t.data("gps-name");f(t,"signup_confirmation."+n+".entered")}}),$(".js-job-search-status").change(function(e){var t=$(e.target);if(!t.data("entered")){var n=t.data("gps-name"),i="signup_confirmation."+n+".entered";StackExchange.using("gps",function(){StackExchange.gps.track(i,{},!0)}),t.data("entered",!0)}}))};return{"init":r}}();