if(void 0===YAHOO)var YAHOO={};YAHOO.i13n=YAHOO.i13n||{},YAHOO.i13n=function(){var e={},t={MAX_VALUE_LENGTH:300,LINK_TAG_LIST:["a","button","input"],logWarn:function(e){"undefined"==typeof console.warn&&(console.warn=console.log),console.warn(e)},logErr:function(e){"undefined"==typeof console.error&&(console.error=console.log),console.error(e)},isDebug:function(){return void 0!==t&&"undefined"!=typeof t.debug&&t.debug},logDebug:function(e){this.isDebug()&&console.log("Rapid : ["+(new Date).getTime()+"]"+e)},logTrace:function(e,t){this.isDebug()&&(console.log("Rapid : [TRACELOG]["+(new Date).getTime()+"]"+e),console.log(t))},isPlainObject:function(e){var t;return!(!e||"[object Object]"!==toString.call(e))&&(!(t=Object.getPrototypeOf(e))||"function"==typeof(this.hasOwn.call(t,"constructor")&&t.constructor))},isFunction:function(e){return"[object Function]"===t.type(e)},isDate:function(e){return"[object Date]"===t.type(e)},isArr:function(e){return"[object Array]"===t.type(e)},isStr:function(e){return"string"===t.type(e)},isNum:function(e){return"number"===t.type(e)&&isFinite(e)},isNumeric:function(e){return e-0===e&&(e+"").replace(/^\s+|\s+$/g,"").length>0},isObj:function(e){return e&&"object"==typeof e},isIE:navigator.userAgent.match(/MSIE\s[^;]*/)||navigator.userAgent.match(/Trident\/[^;]*/)?1:0,isEdge:navigator.userAgent.indexOf(" Edge/")>-1,type:function(e){return null===e?e+"":"object"==typeof e||"function"==typeof e?Object.prototype.toString.call(e)||"object":typeof e},extend:function(){var e,n,i,o,r,a,l=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof l&&(u=l,l=arguments[s]||{},s++),"object"==typeof l||t.isFunction(l)||(l={}),s===c&&(l=this,s--);s<c;s++)if(null!==(e=arguments[s]))for(n in e)e.hasOwnProperty(n)&&(i=l[n],l!==(o=e[n])&&(u&&o&&(t.isPlainObject(o)||(r=Array.isArray(o)))?(r?(r=!1,a=i&&Array.isArray(i)?i:[]):a=i&&t.isPlainObject(i)?i:{},l[n]=t.extend(u,a,o)):void 0!==o&&(l[n]=o)))},trim:function(e){return(e=null===e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")).replace(/[\u007f-\u00a0]|\s{2,}/g," ").replace(/\ufeff|\uffef|[\u0000-\u001f]|[\ue000-\uf8ff]/g,"")},getValueWithBounds:function(e,t,n){return e<t?t:e>n?n:e},getScrollbarWidthHeight:function(){var e=t.make("div");e.style.overflow="scroll",e.style.visibility="hidden",e.style.position="absolute",e.style.width="100px",e.style.height="100px",document.body.appendChild(e);var n={width:e.offsetWidth-e.clientWidth,height:e.offsetHeight-e.clientHeight};return t.rmBodyEl(e),n},make:function(e,n){var i=document.createElement(e);if(n&&t.isObj(n))for(var o in n)n.hasOwnProperty(o)&&i.setAttribute(o,n[o]);return i},rmBodyEl:function(e){document.body.removeChild(e)},hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},getAttribute:function(e,t){var n="";return document.documentElement.hasAttribute||"class"!==t||(t="className"),e&&e.getAttribute&&(n=e.getAttribute(t,2)),n},clref:function(e){if(0!==e.indexOf("http://")&&0!==e.indexOf("https://"))return"";var t=this.strip(e);return t.clean||t.url},toJSON:function(e){return JSON.stringify(e)},hasCC:function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<32||"="===n)return!0}return!1},isValidPair:function(e,n){return!!this.in_value_whitelist(e)||(!(e.length>8||n.length>this.MAX_VALUE_LENGTH)||(t.logWarn("Invalid key/value pair ("+e+"="+n+") Size must be < 8/300 respectively."),!1))},ser:function(e,n){if(!e)return"";void 0===n&&(n=!0);var i=[],o="";for(var r in e)if(t.hasOwn(e,r)){var a=r,l=e[r];if(null===a||null===l)continue;if(a+="",(l+="")&&!this.in_value_whitelist(a)&&l.length>this.MAX_VALUE_LENGTH&&(l=l.substring(0,this.MAX_VALUE_LENGTH)),!this.isValidPair(a,l))continue;if(!this.hasCC(a)&&!this.hasCC(l)){o="",""!==(l=this.trim(l))&&" "!==l||!n||(l="_");try{o=encodeURIComponent(a+""+l),o=o.replace(/'/g,"%27")}catch(s){o="_ERR_ENCODE_",t.logErr(s)}i.push(o)}}return i.join("%04")},in_value_whitelist:function(e){if(t.isIE&&t.ieV<=8)return!1;return-1!==["A_res","A_cmi","A_cma","A_utm"].indexOf(e)},rmProto:function(e){return e?"http://"===e.substr(0,7)?e.substr(7,e.length):"https://"===e.substr(0,8)?e.substr(8,e.length):e:""},rand:function(){for(var e=0,n="";e++<16;){var i=Math.floor(62*Math.random());n+=i<10?i:String.fromCharCode(i<36?i+55:i+61)}return n+t.tms().toString(36)},tms:function(){return+new Date},aug:function(e,t,n){if(t)for(var i in t)if(this.hasOwn(t,i)){if(n&&!n.call(null,i,t[i]))continue;e[i]=t[i]}},strip:function(e){for(var t={"/":"P",";":"1","?":"P","&":"1","#":"P"},n={url:e,clean:"",keys:[]},i=0;-1!==e.indexOf("_yl",i);){var o=e.indexOf("_yl",i);if(i<o&&(n.clean+=e.slice(i,o-1)),i=o+3,t[e.charAt(o-1)]&&"="===e.charAt(o+4)){n.ult=1;var r="_yl"+e.charAt(o+3),a="";for(o+=5;o<e.length&&!t[e.charAt(o)];o++)a+=e.charAt(o);n.keys.push(r),n[r]=a,t[e.charAt(o)]&&"P"===t[e.charAt(o)]&&(n.clean+=e.charAt(o)),i=o+1}else n.clean+=e.slice(o-1,i)}return n.ult&&(n.clean+=e.substr(i)),n},getXHR:function(){return new XMLHttpRequest},hasCORS:function(){return!(t.isIE&&t.ieV<10)&&("withCredentials"in new XMLHttpRequest||"undefined"!=typeof XDomainRequest)},COMPRESS_TYPE:{none:0,gzip:1,lzw:2,deflate:3},hasWorkers:function(){return!!window.Worker},getProtocol:function(){return void 0!==t&&t.yhlhttp?"http://":"https://"},on:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},off:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},async:function(e,t){return void 0!==t&&null!==t||(t=0),setTimeout(e,t)},hasClass:function(e,n){function i(e,i){var o,r=!1;return e&&n&&(o=t.getAttribute(e,"class")||"",r=n.exec?i.test(o):i&&(" "+o+" ").indexOf(" "+i+" ")>-1),r}if(this.isArr(n)){for(var o=0;o<n.length;o++)if(i(e,n[o]))return!0;return!1}return!!this.isStr(n)&&i(e,n)},extDomain:function(e){var t=e.match(/^https?:\/\/([^/?#]+)(?:[/?#]|$)/i);return t&&t[1]},screenPos:function(e){return screen?screen.width+(e||",")+screen.height:""},pos:function(e){var t=null,n=e.pageX,i=e.pageY;return this.isIE&&(t=function(){var e=document.documentElement,t=document.body;return e&&(e.scrollTop||e.scrollLeft)?[e.scrollTop,e.scrollLeft]:t?[t.scrollTop,t.scrollLeft]:[0,0]}()),n||0===n||(n=e.clientX||0,this.isIE&&(n+=t[1])),i||0===i||(i=e.clientY||0,this.isIE&&(i+=t[0])),n+","+i},getElementsByTagNames:function(e,t){e||(e=document);for(var n=[],i=0;i<this.LINK_TAG_LIST.length;i++)for(var o=e.getElementsByTagName(this.LINK_TAG_LIST[i]),r=0;r<o.length;r++){var a=o[r];t&&!t.call(0,a)||n.push(a)}return this.sort(n)},getElementsByTagNamesDOMParsing:function(e,n,i,o){function r(e){for(var t=0;t<this.LINK_TAG_LIST.length;t++)if(e.tagName&&e.tagName.toLowerCase()===this.LINK_TAG_LIST[t].toLowerCase())return!0;return!1}n||(n=document);var a=i||[],l=n.childNodes;if("true"!==this.getAttribute(n,e.conf.skip_attr))for(var s=0;s<l.length;s++){var c=l[s];r(c)&&(o&&!o.call(0,c)||a.push(c)),"true"!==this.getAttribute(c,e.conf.skip_attr)?a=this.getElementsByTagNamesDOMParsing(e,c,a,o):"true"===t.getAttribute(c,e.conf.skip_attr)&&a.push(c)}return this.sort(a)},sort:function(e){var t=e[0];return t?(t.sourceIndex?e.sort(function(e,t){return e.sourceIndex-t.sourceIndex}):t.compareDocumentPosition&&e.sort(function(e,t){return 3-(6&e.compareDocumentPosition(t))}),e):[]},getLinkContent:function(e){for(var t,n=0,i="";(t=e.childNodes[n])&&t;n++)1===t.nodeType&&("img"===t.nodeName.toLowerCase()&&(i+=(this.getAttribute(t,"alt")||"")+" "),i+=this.getLinkContent(t));return i},getLT:function(e,n){if(!e)return"_";var i="";return n=n.toLowerCase(),i="input"===e.nodeName.toLowerCase()?this.getAttribute(e,"value"):"text"===n?/KHTML/.test(navigator.userAgent)?e.textContent:e.innerText?e.innerText:e.textContent:"href"===n?this.rmProto(this.getAttribute(e,"href")):this.getAttribute(e,n)||"",""===(i=this.trim(i))&&(i=this.trim(this.getLinkContent(e))),i&&i.length>t.MAX_VALUE_LENGTH&&(i=i.substring(0,t.MAX_VALUE_LENGTH)),""===i?"_":i},getCompStyle:function(e,t){return"undefined"!=typeof window.getComputedStyle?window.getComputedStyle(e,t):(this.el=e,this.getPropertyValue=function(t){var n=/(¥-([a-z]){1})/g;return"float"===t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:0},this)},isAboveFoldArea:function(e,t){var n=this.getCompStyle(e);if("hidden"===n.getPropertyValue("visibility")||"none"===n.getPropertyValue("display"))return!1;var i,o,r=e.getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight,l=window.innerWidth||document.documentElement.clientWidth;if("undefined"==typeof r.height||"undefined"==typeof r.width?(i=Math.abs(r.bottom-r.top),o=Math.abs(r.right-r.left)):(i=r.height,o=r.width),document.documentElement.scrollWidth>document.documentElement.clientWidth&&(a-=t.height),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(l-=t.width),r.right<=0||r.bottom<=0||r.left>=l||r.top>=a)return!1;var s={};return s.top=r.top<0?0:r.top,s.left=r.left<0?0:r.left,s.bottom=r.bottom>a?a:r.bottom,s.right=r.right>l?l:r.right,s.width=s.right-s.left,s.height=s.bottom-s.top,o*i/2<=s.width*s.height},ltattr:function(e,n){return t.hasClass(e,"rapid_track_href")?"href":t.hasClass(e,"rapid_track_text")?"text":t.hasClass(e,"rapid_track_title")?"title":t.hasClass(e,"rapid_track_id")?"id":n}};return t.ieV=t.isIE?document.documentMode?document.documentMode:document.compatMode&&"CSS1Compat"===document.compatMode?7:5:null,t.extend(e,{Uploader:function(n){function i(e,i,o,r){function a(e,t,n){var i="select * from x where a = '"+e+"'";return(t?"q=":"")+(n?encodeURIComponent(i):i)}function l(e){var i=[t.getProtocol(),n.conf.yql_host,n.conf.yql_path,"?yhlVer=2&yhlClient=rapid&yhlS=",n.conf.spaceid,!0===n.conf.deb?"&yhlEnv=staging":"",!0===n.conf.deb||n.conf.ldbg?"&debug=true&diagnostics=true":"",t.isIE&&t.ieV?"&yhlUA=ie"+t.ieV:"","&format=json","&yhlCT=2","&yhlBTMS=",(new Date).valueOf(),"&yhlClientVer=",n.conf.version,"&yhlRnd=",t.rand(),"&yhlCompressed=",e||0].join("");return t.logDebug("[Yahoo.i13n.Uploader.getURI] result : "+i),i}function s(s,c){if(0===c&&(s=s.replace(/'/g,"\\'")),t.isDebug()&&t.logDebug("[Yahoo.i13n.Uploader.send.exec] A_sid : "+n.conf.keys.get("A_sid")),t.hasCORS()){t.logDebug("[Yahoo.i13n.Uploader.send.exec] this method is XHR transfer.");var u=t.getXHR(),d=l(c);u.open("POST",d,!0),u.withCredentials=!0,u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i&&t.isFunction(i)&&(u.timeout=n.conf.click_timeout),u.onload=u.ontimeout=u.onerror=u.onabort=function(){i&&t.isFunction(i)&&i.call(0,o,r)},u.send(a(s,!0,!0))}else{t.logDebug("[Yahoo.i13n.Uploader.send.exec] this method is to create Iframe and form submit.");var f="rapid_if_"+t.rand(),p="rapid_if_"+t.rand(),g=document.createElement("iframe"),h="application/x-www-form-urlencoded;charset=UTF-8",m=null,v=null,_=null,y=null;g.name=f;var b=function(){t.off(g,"load",b),t.async(function(){document.body.removeChild(g)})};g.setAttribute("style","display:none"),document.body.appendChild(g),(m=g.contentDocument||g.contentWindow.document).open(),m.close(),(v=m.createElement("form")).setAttribute("style","display:none"),v.id=p,v.method="POST",v.action=l(c),v.target=f,v.setAttribute("enctype",h),v.setAttribute("encoding",h),(_=m.createElement("input")).name="q",_.value=a(e,0,0),_.type="text",v.appendChild(_),(y=m.createElement("input")).type="submit",v.appendChild(y),m.body.appendChild(v),m.charset="UTF-8",t.on(g,"load",b),i&&t.isFunction(i)&&t.on(v,"submit",function(){i.call(0,o,r)}),y.click()}i&&t.isFunction(i)&&t.async(function(){i.call(0,o,r)},1e4)}function c(){f||(f=!0,s(e,0),t.logDebug("[Yahoo.i13n.Uploader.send] sent in failSend"))}var u=t.COMPRESS_TYPE[n.conf.compr_type];if(n.conf.compr_on&&t.hasWorkers()&&u>1&&e.length>2048){t.logDebug("[Yahoo.i13n.Uploader.send] Looking for worker:"+n.conf.webworker_file+", compr timeout:"+n.conf.compr_timeout);try{var d=new Worker(n.conf.webworker_file),f=!1,p=null;d.onerror=function(e){clearTimeout(p),c(),t.logWarn(e.message),d.terminate()},d.onmessage=function(e){clearTimeout(p),"Decompress fail"!==e.data&&"Compress fail"!==e.data&&0!==e.data.indexOf("error:")||(t.logDebug("[Yahoo.i13n.Uploader.send]"+e.data),c()),f||(f=!0,s(e.data,u)),d.terminate()},d.postMessage({type:u,json:e}),p=t.async(function(){c(),d.terminate()},n.conf.compr_timeout)}catch(g){t.logDebug("[Yahoo.i13n.Uploader.send]compression worker exception "+g),s(e,0)}}else s(e,0)}function o(e){var i={_pl:1,A_v:n.conf.version,A_jpv:n.conf.rapidjp_version},o=t.trim(t.clref(null!==n.conf.referrer?n.conf.referrer:document.referrer));o&&!1!==e&&(i._R=o),n.conf.ex&&(i._ex=1),i._bt||(i._bt="rapid");var r=window.location.protocol||"";return r=r.replace(/:$/,""),i.A_pr=r,i.A_tzoff=(new Date).getTimezoneOffset(),i.A_tzoff=i.A_tzoff?-1*i.A_tzoff/60:0,t.logDebug("[Yahoo.i13n.Uploader.createBP] result : "+i),i}function r(e,i){if(t.logTrace("[Yahoo.i13n.Uploader.redirect] sender ",e),i&&t.isFunction(i))i.call();else if(e.synch){if(e.targetElement)if(n.conf.click_postmsg.origin){var o=n.conf.click_postmsg.window||top,r=n.conf.click_postmsg.payload||{};r.href=e.targetElement.href,o.postMessage(t.toJSON(r),n.conf.click_postmsg.origin)}else if(t.isIE&&t.ieV>=11||t.isEdge)"complete"!==document.readyState&&history.pushState("",document.title),e.hasTargetTop?top.document.location=e.targetElement.href:e.hasTargetParent?parent.document.location=e.targetElement.href:document.location=e.targetElement.href;else{var a=e.targetElement.cloneNode(!0);if(a.dispatchEvent){var l=document.createEvent("MouseEvents");l.initEvent("click",!0,!1),a.dispatchEvent(l)}else a.click()}}else t.logDebug("[Yahoo.i13n.Uploader.redirect] synch "+e.synch)}function a(r,a){if(t.isIE&&t.ieV<=8)t.logDebug("[Yahoo.i13n.Uploader.send.exec] did not send. for unsupported browsers");else{t.logDebug("[Yahoo.i13n.Uploader.isendRapidPage]");var l=function(i,r){return t.logTrace("[Yahoo.i13n.Uploader.createPageJson] Modules ",i),t.logTrace("[Yahoo.i13n.Uploader.createPageJson] Parameter ",r),t.toJSON({bp:o(),r:[{t:"lv",s:n.conf.spaceid,pp:function(){var t=e.PageParams.makeFromPP(n.conf.keys);return r&&t.absorb(r),t.getAll()}(),_ts:Math.floor((new Date).valueOf()/1e3),lv:function(){var e=[],o=null;for(var r in i)if(t.hasOwn(i,r)&&(o=i[r])){var a=function(){function i(e,t){var n="_p"===e;return!!n||"sec"===e&&t!==a.m&&t!==l||"sec"!==e&&!n}function r(e,n){var i={};return t.isObj(e)?(t.aug(i,e,n),i):i}var a={m:t.trim(o.moduleName),l:[]};o.moduleNode&&(a.ylk=o.moduleNode.getAll());var l=e.ylk&&e.ylk.sec?e.ylk.sec:"",s=o.links;if(s)for(var c=0;c<s.length;c++)if(s[c])if(!n.conf.viewability||s[c].viewable){var u=s[c].data;u.length>t.MAX_VALUE_LENGTH&&(s[c].data=u.substring(0,t.MAX_VALUE_LENGTH));var d=r(s[c].data,i);a.l.push(d)}else t.logDebug("Skipping not viewable link: "+s[c].data.slk);return a}();a.l.length>0?e.push(a):t.logDebug('[Yahoo.i13n.Uploader.createPageRowMsg] Not capturing 0 links mod: "'+o.moduleName+'"')}return e}()}],yrid:n.conf.yrid,optout:n.conf.oo,nol:n.conf.nol})}(r,a);t.logTrace("[Yahoo.i13n.Uploader.isendRapidPage] Json ",l),i(l)}}function l(a,l){if(t.isIE&&t.ieV<=8)t.logDebug("[Yahoo.i13n.Uploader.send.exec] did not send. for unsupported browsers");else{t.logDebug("[Yahoo.i13n.Uploader.isendRapidClick]");var s=function(i){return t.logTrace("[Yahoo.i13n.Uploader.createClickJson] sender ",i),t.toJSON({bp:o(),r:[{t:"cl",s:n.conf.spaceid,pp:e.PageParams.makeFromPP(n.conf.keys).getAll(),_ts:Math.floor((new Date).valueOf()/1e3),ci:function(){var e={};i.targetObject&&i.targetObject.moduleNode&&(e=i.targetObject.moduleNode.getAll());for(var n in i.data)if(t.hasOwn(i.data,n)){var o=i.data[n];o.length>t.MAX_VALUE_LENGTH&&(i.data[n]=o.substring(0,t.MAX_VALUE_LENGTH)),"function"==typeof i.data[n]&&(i.data[n]=i.data[n].toString()),e[n]=i.data[n]}return e}()}],yrid:n.conf.yrid,optout:n.conf.oo,nol:n.conf.nol})}(a);t.logTrace("[Yahoo.i13n.Uploader.isendRapidClick] Json ",s),a.stop||function(e){e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}(a.event),i(s,r,a,l)}}function s(r,a,l){if(t.isIE&&t.ieV<=8)t.logDebug("[Yahoo.i13n.Uploader.send.exec] did not send. for unsupported browsers");else{t.logDebug("[Yahoo.i13n.Uploader.isendRapidEvent]");var s=function(i,r,a,l){var s=e.PageParams.makeFromPP(n.conf.keys).getAll();if(a=a||{},i){var c=YAHOO.i13n.EventTypes.getEventByName(i);a._E=c.getEventName(),r=a._E}else a._E=r||"_";l&&(a.outcm=l);for(var u in a)if(t.hasOwn(a,u)&&u.length>8)delete a[u];else{var d=a[u];d.length>t.MAX_VALUE_LENGTH&&(a[u]=d.substring(0,t.MAX_VALUE_LENGTH))}return t.extend(s,a),t.toJSON({bp:o(),r:[{t:"ev",s:n.conf.spaceid,pp:s,_ts:Math.floor((new Date).valueOf()/1e3)}],yrid:n.conf.yrid,optout:n.conf.oo,nol:n.conf.nol})}(0,r,a,l);t.logTrace("[Yahoo.i13n.Uploader.isendRapidEvent] Json ",s),i(s)}}return{sendRapidPage:function(e,n){t.logDebug("[Yahoo.i13n.Uploader.sendRapidPage]"),a(e,n)},sendRapidClick:function(e,n){t.logDebug("[Yahoo.i13n.Uploader.sendRapidClick]"),l(e,n)},sendRapidEvent:function(e,n,i,o){t.logDebug("[Yahoo.i13n.Uploader.sendRapidEvent]"),s(e,n,i)}}},Module:function(e,n,i,o,r){function a(e,t){return t>e.links.length?null:e.links[t-1]}function l(n,i,o,r,a,l,s,c){var u="",d=null,f=!s||t.isAboveFoldArea(r,c),p={viewable:f,data:{sec:i,_p:o}};return s&&t.aug(p.data,{A_lv:1}),l?(p.data.slk=a||"section",d=e.fn.getNode(r)):(r.setAttribute(e.conf.anc_pos_attr,o),s&&r.setAttribute(e.conf.anc_v9y_attr,f?"1":"0"),(u=t.getLT(r,n))&&""!==u?d=e.fn.getNode(r):u="_ELINK_",u="_",p.data.slk=a||u),null!==d&&t.aug(p.data,d.getAll()),p}function s(n){var i=[];d.linkpos=d.linkpos||1;for(var o=null,a=null!==d.moduleNode?d.moduleNode.map.sec:null,s=null!==d.moduleNode?d.moduleNode.map.slk:null,c=0;c<n.length;c++)if("div"===n[c].tagName.toLowerCase()){var f=n[c],p=e.fn.getNode(f);o=l(t.ltattr(u,e.conf.lt_attr),a||d.moduleName,1,f,p.map.slk||s,!0,d.useViewability,r),d.links[0]=o,i.push(o)}else{var g=n[c];o=l(t.ltattr(u,e.conf.lt_attr),a||d.moduleName,d.linkpos,g,s,0,d.useViewability,r),d.links[d.linkpos-1]=o,i.push(o),d.linkpos++}return"true"===t.getAttribute(u,e.conf.skip_attr)&&(o=l(t.ltattr(u,e.conf.lt_attr),a||d.moduleName,1,f,s,!0,d.useViewability,r),d.links[0]=o,i.push(o)),i}function c(n){function i(n,i,o){var r=i.target?i.target.toLowerCase():"_self";return"_self"!==r&&"_top"!==r&&"_parent"!==r&&window.name!==r||2===n.which||4===n.button||n.altKey||n.ctrlKey||n.shiftKey||n.metaKey||"on"===t.getAttribute(i,"data-nofollow")||t.getAttribute(i,"href")&&"javascript:"===t.getAttribute(i,"href").substr(0,11).toLowerCase()||t.hasClass(i,e.conf.nofollow_class)||t.hasClass(o,e.conf.nofollow_class)}var o=function(n){var i=n.target||n.srcElement;for(i&&3===i.nodeType&&(i=i.parentNode);i&&"a"!==i.nodeName.toLowerCase()&&"button"!==i.nodeName.toLowerCase()&&("input"!==i.nodeName.toLowerCase()||"submit"!==t.getAttribute(i,"type"))&&!t.hasClass(i,e.conf.nonanchor_track_class);)i=i.parentNode;return i}(n=n||event);if(o&&!t.hasClass(o,e.conf.no_click_listen)){var r=o.nodeName.toLowerCase(),l=t.getAttribute(o,e.conf.anc_pos_attr);if(null!==a(d,l)){var s={data:function(){var i=null;if(t.hasClass(o,e.conf.nonanchor_track_class)){i={pos:0,sec:d.moduleName,slk:"_"};var r=e.fn.getNode(o,1);r&&t.aug(i,r.getAll())}else i=a(d,l).data;if(!i.tar){var s=t.getAttribute(o,"href");s&&(i.tar=t.extDomain(s)),s&&i.tar||(i.tar=t.extDomain(e.conf.loc))}return i.tar_uri||(o.pathname?i.tar_uri=o.pathname.substring(0,t.MAX_VALUE_LENGTH):i.tar_uri=""),i.A_xy=t.pos(n),i.A_sr=t.screenPos(),"contextmenu"===n.type&&(i.A_cl=3),i}(),event:n,moduleElement:d.moduleElement,targetElement:o,targetObject:d,stop:i(n,o,d.moduleElement)||"input"===r||"button"===r,synch:!t.hasClass(o,e.conf.nonanchor_track_class)&&"input"!==r&&"button"!==r&&!i(n,o,d.moduleElement)&&"contextmenu"!==n.type,hasTargetTop:o&&o.target&&"_top"===o.target.toLowerCase(),hasTargetParent:o&&o.target&&"_parent"===o.target.toLowerCase()};e.variable.uploader.sendRapidClick(s)}}}t.logDebug("[Yahoo.i13n.Module]");var u=document.getElementById(i);if(!u)return t.logWarn("Specified module not in DOM: "+i),null;var d={useViewability:o,moduleNode:e.fn.getNode(u),links:[],moduleName:n,trackType:t.getAttribute(u,e.conf.track_type),moduleElement:u,clickEvent:c,setLink:s,link:l,linkpos:1};return t.logTrace("[Yahoo.i13n.Module] targetObject ",d),s(e.conf.parse_dom?t.getElementsByTagNamesDOMParsing(e,u):t.getElementsByTagNames(u)),t.on(u,"click",c),e.conf.track_right_click&&t.on(u,"contextmenu",c),t.logTrace("[Yahoo.i13n.Module] targetObject ",d),d},Node:function(){this.map={},this.count=0},PageParams:function(e){this.map={},this.count=0,e&&this.absorb(e)},MsgHeader:function(){},ViewabilityManager:function(e){function n(){return"undefined"!=typeof window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function i(){return"undefined"!=typeof window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}function o(){var t=n(),o=i(),r=-1===u?t-s:t-u,a=-1===d?o-c:o-d;(Math.abs(r)>e.conf.viewability_px||Math.abs(a)>e.conf.viewability_px||f)&&(e.variable.moduleList.sendViewability(),u=t,d=o,f=!1)}function r(){null!==a&&clearTimeout(a);(new Date).getTime()-l<e.conf.viewability_time&&(s=n(),c=i()),a=t.async(o,e.conf.viewability_time)}t.logDebug("[Yahoo.i13n.ViewabilityManager]");var a=null,l=(new Date).getTime(),s=n(),c=i(),u=-1,d=-1,f=!1;return e.variable.moduleList.refreshViewability=function(){f=!0,r()},t.on(window,"scroll",r),{reInit:function(){s=n(),c=i(),u=-1,d=-1,l=(new Date).getTime()},destroy:function(){t.off(window,"scroll",r)}}}}),e.MsgHeader.prototype={ser:function(){return t.ser(this.map)},set:function(e,n){var i=t.trim(n);t.isStr(i)&&(i=i.replace(/\\/g,"\\\\")),!t.in_value_whitelist(e)&&i.length>t.MAX_VALUE_LENGTH&&(i=i.substring(0,t.MAX_VALUE_LENGTH)),t.isValidPair(e,i)&&(this.map[t.trim(e)]=i,this.count++)},get:function(e){return this.map[e]},getAll:function(){return this.map},absorb:function(e){if(e&&t.isObj(e))for(var n in e)t.hasOwn(e,n)&&this.set(n,e[n])},absorb_filter:function(e,n){if(e&&t.isObj(e))for(var i in e)n&&!n.call(null,i)||t.hasOwn(e,i)&&this.set(i,e[i])},getSize:function(){return this.count}},e.PageParams.makeFromPP=function(){for(var t=new e.PageParams,n=arguments.length,i=0;i<n;i++)"undefined"!=typeof arguments[i]&&null!==arguments[i]&&t.absorb(arguments[i].getAll());return t},e.PageParams.prototype=new e.MsgHeader,e.PageParams.prototype.constructor=e.MsgHeader,e.Node.prototype=new e.MsgHeader,e.Node.prototype.constructor=e.MsgHeader,e.Module.List=function(n){var i={};return{add:function(e,n){i[t.trim(e)]=n},addRange:function(i,o){t.logDebug("[Yahoo.i13n.Module.List]");var r=t.isArr(i),a=o?t.getScrollbarWidthHeight():{},l=[];r||t.isStr(i)&&(i=new Array(i),r=!0);for(var s in i)if(t.hasOwn(i,s)){var c=r?i[s]:s,u=t.trim(i[s]);if(this.exists(c))t.logErr('add() called with prev processed id:"'+c+'"');else{var d=e.Module(n,u,c,o,a);d&&(this.add(c,d),l.push(d))}}return l},get:function(){return i},sendViewability:function(){function e(e,i){var o=function(e,n){e||(e=document);for(var i=[],o=e.getElementsByTagName("a"),r=0;r<o.length;r++){var a=o[r];n&&!n.call(0,a)||i.push(a)}return t.sort(i)}(e.moduleElement,function(o){if(!t.getAttribute(o,n.conf.anc_pos_attr)){e.linkpos++,o.setAttribute(n.conf.anc_pos_attr,e.linkpos);var r=e.link(t.ltattr(o,n.conf.lt_attr),e.moduleNode.map.sec||a,e.linkpos,o,e.moduleNode.map.slk,0,!1,i);e.links[e.linkpos-1]=r}return!("1"===t.getAttribute(o,n.conf.anc_v9y_attr)||!t.isAboveFoldArea(o,i)||(o.setAttribute(n.conf.anc_v9y_attr,"1"),0))});if(0!==o.length&&n.conf.USE_RAPID){var r=function(i,o){for(var r=[],l=0;l<i.length;l++){var s=i[l],c=t.getAttribute(s,n.conf.anc_pos_attr),u=e.link(t.ltattr(s,n.conf.lt_attr),e.moduleNode.map.sec||a,c,s,e.moduleNode.map.slk,0,!0,o);r.push(u)}return r}(o,i),l={};t.aug(l,e),l.links=r,n.variable.uploader.sendRapidPage([l])}}var o=function(){var e={};for(var t in i){var n=i[t];n.useViewability&&(e[t]=n)}return e}(),r=t.getScrollbarWidthHeight();for(var a in o)e(o[a],r)},refresh:function(e,o,r){function a(e){return!t.getAttribute(e,n.conf.anc_pos_attr)}var l=i[t.trim(e)];if(l){r.isRefreshed=!0;var s=document.getElementById(e),c=n.conf.parse_dom?t.getElementsByTagNamesDOMParsing(n,s,null,a):t.getElementsByTagNames(s,a),u=0;if(c.length>0){var d=l.setLink(c);if(u=c.length,l.useViewability){u=0;for(var f=0;f<d.length;f++)d[f].viewable&&u++}if(u>0&&(n.conf.USE_RAPID||r.event)){var p={};t.aug(p,l),o&&(p.links=d,n.variable.uploader.sendRapidPage([p],r.pp))}}}else t.logErr("refreshModule called on unknown section: "+e)},remove:function(e){var n=i[t.trim(e)];n&&(t.off(n.moduleElement,"click",n.clickEvent),delete i[t.trim(e)])},destroy:function(){for(var e in i)this.remove(e)},exists:function(e){return"undefined"!=typeof i[t.trim(e)]}}},t.extend(e,{initialize:function(n,i,o){function r(){var e=arguments.length;if(e<2)t.logErr("[Yahoo.i13n.Rapid.setValue] This parameter length is wrong.");else for(var n=i.conf,o=arguments[1],r=2;r<e;r++)"undefined"!=typeof arguments[r]&&(n[o]=arguments[r])}function a(e){var n=i.conf;n[e]=t.trim(n[e])}function l(){function o(e){var n=function(e){var n=l.loc,i=n.indexOf("?")+1,o=n.substring(i);o=o.split("&");for(var r=0;r<o.length;r++){var a=o[r].split("=");if(2===a.length&&t.trim(a[0])===e){var s=t.trim(a[1]);return s=s.replace(/[!@#$%^&*();:'",./<>?_=¥+¥-]/gi,"")}}return null}(e);return null!==n&&("true"===n||"1"===n)}var l=i.conf;for(var s in e.define)null!==s&&""!==s&&r(i,s,e.define[s]);for(s in l)null!==s&&""!==s&&r(i,s,n[s]);r(i,"loc",n.location,document.location.href),l.keys=function(){var i=new e.PageParams;return i.set("A_sid",YAHOO.i13n.A_SID||t.rand()),i.set("_w",t.rmProto(l.loc).substring(0,t.MAX_VALUE_LENGTH)),n.keys&&i.absorb(n.keys),i}(),r(i,"spaceid",l.override.spaceid,YAHOO.i13n.SPACEID),a(i),a(i),l.oo=n.oo?"1":"0",l.nol=n.nol?"1":"0",l.yql_enabled=!1!==n.yql_enabled,l.fing=1===n.use_fing,l.USE_RAPID=!1!==n.use_rapid,r(i,"linktrack_attribut",n.lt_attr),l.compr_on=!1!==n.compr_on,r(i,"webworker_file",YAHOO.i13n.WEBWORKER_FILE),r(i,"no_click_listen",n.rapid_noclick_resp),l.deb=!0===n.debug,l.ldbg=n.ldbg>0||o("yhldebug"),l.yhlhttp=o("yhlhttp")||!0===n.use_http,r(i,"addmod_timeout",n.addmodules_timeout),l.ult_token_capture="boolean"==typeof n.ult_token_capture&&n.ult_token_capture,l.dwell_on=!0===n.dwell_on,l.async_all_clicks=!0===n.async_all_clicks,l.apv=!1!==n.apv,l.apv_always_send=!0===n.apv_always_send,l.ex=!0===n.ex,l.persist_asid=!0===n.persist_asid,l.track_right_click=!0===n.track_right_click,l.parse_dom=!0===n.parse_dom,l.pageview_on_init=!1!==n.pageview_on_init,l.compr_timeout*=1,t.debug=l.ldbg,t.yhlhttp=l.yhlhttp,t.isNum(l.compr_timeout)?l.compr_timeout=t.getValueWithBounds(l.compr_timeout,300,700):l.compr_timeout=700,l.ldbg&&1e4!==l.click_timeout&&t.logWarn("[Yahoo.i13n.Rapid.initialize] Click timeout set to "+l.click_timeout+"ms (default 10000ms)"),n.apv_callback&&t.isFunction(n.apv_callback)&&r(i,"apv_callback",n.apv_callback)}function s(){i.variable.moduleList.destroy();var n=i.variable.moduleList.addRange(i.conf.tracked_mods,!1),r=i.variable.moduleList.addRange(i.conf.tracked_mods_viewability,i.conf.viewability);i.conf.USE_RAPID&&i.conf.pageview_on_init&&!o&&i.variable.uploader.sendRapidPage(n.concat(r)),function(e){function n(t){(document.addEventListener||t&&"load"===t.type||"complete"===document.readyState)&&(r=!0,i(),e.call(this))}function i(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",n,!1),window.removeEventListener("load",n,!1)):(document.detachEvent("onreadystatechange",n),window.detachEvent("onload",n))}function o(){if(!r){try{a.doScroll("left")}catch(n){return void t.async(o,50)}i(),e.call(this)}}t.logDebug("[Yahoo.i13n.Rapid.executeOnLoad]");var r=!1;if("complete"===document.readyState)t.async(n);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else{document.attachEvent("onreadystatechange",n),window.attachEvent("onload",n);var a=!1;try{a=null===window.frameElement&&document.documentElement}catch(l){t.logErr("[Yahoo.i13n.Rapid.executeOnLoad] e : "+l)}a&&a.doScroll&&o()}}(function(){i.variable.viewabilityManager=new e.ViewabilityManager(i)}),t.isFunction(i.conf.init_callbak)&&i.conf.init_callback()}n=n||{},i.conf={},l(),t.extend(i,{variable:{moduleList:new e.Module.List(i),uploader:new e.Uploader(i),viewabilityManager:null},fn:{inlineInit:function(){},inlineBeaconEvent:function(e,t,n,o){i.variable.uploader.sendRapidEvent(e,t,n,o)},inlineBeaconClick:function(e,n,o,r,a,l){!r&&a&&(r={}),a&&(r.outcm=a),i.variable.uploader.sendRapidClick(function(e,n,i,o,r){var l={outcome:a,event:null,moduleElement:null,targetElement:null,synch:!1,hasTargetTop:!1,hasTargetParent:!1};return l.data={sec:e,slk:n,_p:i},t.aug(l.data,o),l}(e,n,o,r),l)},inlineAddModules:function(e,n,o){var r={A_am:1};(o=o||{}).pp&&t.aug(r,o.pp),o.useViewability=o.useViewability||!1;var a=i.variable.moduleList.addRange(e,o.useViewability);i.conf.USE_RAPID&&a&&a.length>0&&i.variable.uploader.sendRapidPage(a,r)},inlineAddModulesWithViewability:function(e,t,n){(n=n||{}).useViewability=i.conf.viewability,this.inlineAddModules(e,t,n)},inlineRefreshModule:function(e,t,n,o){o=o||{};var r=!1!==n;i.variable.moduleList.refresh(e,r,o)},inlineRefreshViewability:function(){i.variable.moduleList.refreshViewability()},inlineRemoveModule:function(e){i.variable.moduleList.remove(e)},inlineIsModuleTracked:function(e){return i.variable.moduleList.exists(e)},inlineGetModulesInfo:function(){return i.variable.moduleList.get()},inlineDestroy:function(){i.variable.moduleList.destroy(),i.variable.viewabilityManager&&i.variable.viewabilityManager.destroy()},inlineReInit:function(t){e.initialize(t,i,!0)},inlineSetRapidAttribute:function(e){e.keys&&i.conf.keys.absorb(e.keys),e.spaceid&&(i.conf.spaceid=e.spaceid),e.referrer&&(i.conf.referrer=e.referrer.substring(0,t.MAX_VALUE_LENGTH)),e.A_sid&&(i.conf.keys.set("A_sid",e.A_sid),i.conf.persist_asid=!0),e.location&&(i.conf.loc=e.location,i.conf.keys.set("_w",t.rmProto(e.location).substring(0,t.MAX_VALUE_LENGTH)))},inlineClearRapidAttribute:function(t){for(var n in t)if("keys"===t[n]){var o=i.conf.keys.get("_w"),r=i.conf.keys.get("A_sid");i.conf.keys=new e.PageParams,i.conf.keys.set("_w",o),i.conf.keys.set("A_sid",r)}else"referrer"===t[n]?i.conf.referrer="":"A_sid"===t[n]?(i.conf.keys.set("A_sid",""),i.conf.persist_asid=!0):"location"===t[n]&&(i.conf.loc="",i.conf.keys.set("_w",""))},inlineGetCurrentSID:function(){return i.conf.keys.get("A_sid")},inlineBeaconLinkViews:function(n,o,r,a){var l={};if((r=r||{}).pp&&t.aug(l,r.pp),0!==n.length||r.event){for(var s=[],c=0;c<n.length;c++){var u=n[c],d=new e.Node;d.absorb_filter(u,function(e){return"sec"!==e&&"_links"!==e});for(var f=[],p=1,g=0;g<u._links.length;g++){var h=u._links[g],m={viewable:!0,data:{sec:u.sec,_p:p++,A_lv:2}};t.aug(m.data,h),f.push(m)}var v={moduleName:u.sec,moduleNode:d,links:f,identifier:u.sec};s.push(v)}i.conf.USE_RAPID&&s&&i.variable.uploader.sendRapidPage(s,l),a&&a.call()}},getNode:function(n,o){if(!n)return null;null===o&&(o=!1);var r=new e.Node,a=t.getAttribute(n,"data-action-outcome");a&&r.set("outcm",a);var l=t.getAttribute(n,"data-ylk");if(null===l||0===l.length)return r;for(var s=l.split(i.conf.ylk_pair_delim),c=0;c<s.length;c++){var u=s[c].split(i.conf.ylk_kv_delim);if(2===u.length){var d=u[0],f=u[1];null!==d&&""!==d&&null!==f&&(f.length>t.MAX_VALUE_LENGTH&&(f=f.substring(0,t.MAX_VALUE_LENGTH)),d.length<=8&&f.length<=t.MAX_VALUE_LENGTH&&("_p"!==d||o)&&r.set(d,f))}}return r},getEventMapping:function(e){return i.conf.eventMapping[e]}}}),s(),function(){function e(e,t,n){this.yqlid=e,this.eventName=t,this.spaceidPrefix=n}e.prototype={getYQLID:function(){return this.yqlid},getEventName:function(){return this.eventName}},i.conf.eventMapping={pageview:new e("pv","pageview",""),simple:new e("lv","event","P"),linkview:new e("lv","linkview","P"),richview:new e("richview","richview","R"),contentmodification:new e("richview","contentmodification","R"),dwell:new e("lv","dwell","D")}}(),t.logTrace("[Yahoo.i13n] conf",i.conf)},conf:{},define:{override:{},version:"4.0.2",rapidjp_version:"2.0.0",keys:null,referrer:null,spaceid:"0",yrid:"",oo:"0",nol:"0",yql_enabled:!1,fing:!1,USE_RAPID:!1,linktrack_attribut:"text",tracked_mods:[],tracked_mods_viewability:[],viewability:!1,viewability_time:300,viewability_px:50,lt_attr:"text",client_only:null,text_link_len:-1,yql_host:"logql.yahoo.co.jp",yql_path:"/v1/public/yql",click_timeout:1e4,compr_timeout:300,compr_on:!1,compr_type:"deflate",webworker_file:"rapidworker-1.2.js",nofollow_class:"rapidnofollow",no_click_listen:"rapid-noclick-resp",nonanchor_track_class:"rapid-nonanchor-lt",anc_pos_attr:"data-rapid_p",anc_v9y_attr:"data-v9y",deb:!1,ldbg:!1,addmod_timeout:300,ult_token_capture:!1,track_type:"data-tracktype",dwell_on:!1,async_all_clicks:!1,click_postmsg:{},apv:!1,apv_time:500,apv_px:500,apv_always_send:!1,apv_callback:null,ex:!1,persist_asid:!1,track_right_click:!1,skip_attr:"data-rapid-skip",parse_dom:!1,pageview_on_init:!1,perf_navigationtime:0,perf_commontime:null,perf_usertime:null,perf_resourcetime:0,sample:{},loc:null,init_callback:null,ylk_kv_delim:":",ylk_pair_delim:";",eventMapping:{},yhlhttp:!1}}),{EventTypes:{getEventByName:function(t){"use strict";return e.fn.getEventMapping(t)}},Rapid:function(t){"use strict";var n={};return e.initialize(t,n,!1),{init:function(){n.inlineInit()},beaconEvent:function(e,t,i,o){n.fn.inlineBeaconEvent(e,t,i,o)},beaconClick:function(e,t,i,o,r,a){n.fn.inlineBeaconClick(e,t,i,o,r,a)},addModules:function(e,t,i){n.fn.inlineAddModules(e,t,i)},addModulesWithViewability:function(e,t,i){n.fn.inlineAddModulesWithViewability(e,t,i)},refreshModule:function(e,t,i,o){n.fn.inlineRefreshModule(e,t,i,o)},refreshViewability:function(){n.fn.inlineRefreshViewability()},removeModule:function(e){n.fn.inlineRemoveModule(e)},isModuleTracked:function(e){return n.fn.inlineIsModuleTracked(e)},getModulesInfo:function(){return n.fn.inlineGetModulesInfo()},destroy:function(){n.fn.inlineDestroy()},reInit:function(e){n.fn.inlineReInit(e)},setRapidAttribute:function(e){n.fn.inlineSetRapidAttribute(e)},clearRapidAttribute:function(e){n.fn.inlineClearRapidAttribute(e)},getCurrentSID:function(){return n.fn.inlineGetCurrentSID()},beaconLinkViews:function(e,t,i,o){n.fn.inlineBeaconLinkViews(e,t,i,o)}}},JP:{simpleRapid:function(e){function t(e){return"string"==typeof e?e.replace(/\^/g,""):e}function n(e,n){e=t(e),n=t(n),""!==e&&""!==n&&(p[e]=n)}function i(e,n){var i,o;e=t(e);for(o in n)i=t(n[o]),""!==(o=t(o))&&""!==i&&(p[e][o]=i)}function o(){return r("Object",g)&&"function"==typeof g.init}function r(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&n===e}function a(e){var t,n,i=[];if(document.getElementsByClassName)i=document.getElementsByClassName(e);else if(r("String",e)){t=document.getElementsByTagName("*");for(var o=0;o<t.length;o++)r("String",n=t[o].className||t[o].getAttribute("class"))&&-1!==(" "+n+" ").indexOf(" "+e+" ")&&i.push(t[o])}return i}function l(e,t){var n;for(n in e)if(e[n]===t)return n;return-1}function s(e,t){var n,i,o={};if(r("Object",t))o=t;else if(r("Array",t))for(i in t)o[t[i]]=t[i];else o[t]=t;for(n in o)p[e][n]=o[n]}function c(e,n){e=t(e),n=t(n),""!==e&&""!==n&&-1!==l(p[e],n)&&p[e].splice(l(p[e],n),1)}function u(){return{tracked_mods:{},keys:{cl:h.screen.colorDepth,dspsize:h.screen.width+"x"+h.screen.height,enc:(m.characterSet||m.charset).toLowerCase(),os:function(){var e=navigator.userAgent;return e.match(/windows\sphone/i)?"windowsphone":e.match(/windows/i)?"windows":e.match(/iphone|ipad/i)?"ios":e.match(/mac|ppc/i)?"mac":e.match(/android/i)?"android":"other"}(),_sr:(h.innerWidth||m.documentElement.clientWidth)+"x"+(h.innerHeight||m.documentElement.clientHeight),_libn:"simplerapid",_libv:"1.1.0"},viewability:!1,viewability_time:1e3,tracked_mods_viewability:{},apv:!1,click_timeout:1e4,compr_on:r("String",YAHOO.i13n.WEBWORKER_FILE)||r("String",e.webworker_file)}}e=e||{};var d,f,p,g,h=window,m=document,v=m.location.toString().indexOf("yhldebug=1")>0;"undefined"!=typeof console&&"undefined"!=typeof console.log||(console={log:function(){}}),"undefined"==typeof console.error&&(console.error=console.log),"undefined"==typeof console.warn&&(console.warn=console.log),"undefined"!=typeof(p=u()).keys._do||isNaN(h.orientation)||(p.keys._do=Math.abs(h.orientation)/90%2),"undefined"!=typeof p.keys.dpr||isNaN(h.devicePixelRatio)||(p.keys.dpr=h.devicePixelRatio),i("keys",{metakwd:function(){for(var e=document.getElementsByTagName("meta"),t=0;t<e.length;t++)if("keywords"===e[t].getAttribute("name")&&"string"==typeof e[t].getAttribute("content"))return e[t].getAttribute("content");return""}()});for(d in e)if("keys"===d)for(f in e.keys)p.keys[f]=e.keys[f];else p[d]=e[d];return{setClickTimeout:function(e){return n("click_timeout",e),this},setModule:function(e){return s("tracked_mods",e),this},setSpaceid:function(e){return n("spaceid",e),this},startViewable:function(){return n("viewability",!0),this},stopViewable:function(){return n("viewability",!1),this},setViewableModule:function(e){return s("tracked_mods_viewability",e),this},setViewableTime:function(e){return n("viewability_time",e),this},setWebWorkerFilePath:function(e){return n("webworker_file",e),n("compr_on",!0),this},setRapidConf:function(e){var t;for(t in e)n(t,e[t]);return this},setActtype:function(e){return i("keys",{acttype:e}),this},setApptype:function(e){return i("keys",{apptype:e}),this},setAuthid:function(e){return i("keys",{auth_out:e}),this},setCategorypath:function(e){return i("keys",{cat_path:e}),this},setContentsid:function(e){return i("keys",{ctsid:e}),this},setConttype:function(e){return i("keys",{conttype:e}),this},setDevice:function(e){return i("keys",{device:e}),this},setMetakeyword:function(e){return i("keys",{metakwd:e}),this},setNonepv:function(e){return i("keys",{nonepv:e}),this},setOpttype:function(e){return i("keys",{opttype:e}),this},setPartner:function(e){return i("keys",{prtnr:e}),this},setPagetype:function(e){return i("keys",{pagetype:e}),this},setQuery:function(e){return i("keys",{query:e}),this},setService:function(e){return i("keys",{service:e}),this},setServiceid:function(e){return i("keys",{srvid:e}),this},setStatus:function(e){return i("keys",{status:e}),this},setPg:function(e){return i("keys",{pg:e}),this},setIns:function(e){return i("keys",{ins:e}),this},setUiid:function(e){return i("keys",{uiid:e}),this},setVtestid:function(e){return i("keys",{vtestid:e}),this},setVtgrpid:function(e){return i("keys",{vtgrpid:e}),this},setVpkjp:function(e){return i("keys",{v_pkjp:e}),this},trackedClass:function(e){var t,n=[];t=a(e=e||"tracked_mods");for(var i=0;i<t.length;i++)t[i].getAttribute("id")?n.push(t[i].getAttribute("id")):console.warn("simplerapid: Not found id to the specified element");return s("tracked_mods",n),this},trackedViewableClass:function(e){var t,n=[];t=a(e=e||"tracked_mods_viewability");for(var i=0;i<t.length;i++)t[i].getAttribute("id")?n.push(t[i].getAttribute("id")):console.warn("simplerapid: Not found id to the specified element");return s("tracked_mods_viewability",n),this},startGeolocation:function(e){return navigator.geolocation&&(e||(e={enableHighAccuracy:!0,timeout:1e4,maximumAge:0}),navigator.geolocation.getCurrentPosition(function(e){if(o()){var t={pp:{lat:e.coords.latitude,"long":e.coords.longitude,accuracy:e.coords.accuracy},event:{type:YAHOO.i13n.EventTypes.getEventByName("linkview")}};g.beaconLinkViews([],!1,t),v&&console.log("simplerapid: send geolocation")}else console.warn("simplerapid: rapid instance not found")},function(e){if(v)switch(e.code){case 1:console.warn("simplerapid: startGeolocation is permission denied");break;case 2:console.warn("simplerapid: startGeolocation is position unavailable");break;case 3:console.warn("simplerapid: startGeolocation is timeout")}},e)),this},setPageParam:function(e){return i("keys",e),this},addPageParam:function(e,t){var n={};return r("String",e)&&r("String",t)&&(n[e]=t,i("keys",n)),this},addRapidConf:function(e,t){return n(e,t),this},deleteRapidConf:function(e){return function(e){""!==(e=t(e))&&delete p[e]}(e),this},deleteModule:function(e){return c("tracked_mods",e),this},deleteViewableModule:function(e){return c("tracked_mods_viewability",e),this},deletePageParam:function(e){return function(e,n){e=t(e),n=t(n),""!==e&&""!==n&&delete p[e][n]}("keys",e),this},setRapidinstance:function(e){return r("Object",e)&&"function"==typeof e.init&&(g=e),this},setCallback:function(e){return"function"==typeof e&&n("init_callback",e),this},simpleBeaconClick:function(e,t,n){var i,a,l,s,c,u,d=[];if(o())if(r("Object",e)&&r("String",e.sec)){i=g.getModulesInfo();for(l in i)for(s in i[l].links)i[l].links[s].data.sec===e.sec&&d.push(i[l].links[s].data);if(0===d.length)u=!1;else for(var f=0;f<d.length;f++){u=!0;for(c in e){if("undefined"==typeof d[f][c]){u=!1;break}if(String(d[f][c])!==String(e[c])){u=!1;break}}if(u){a={};for(c in d[f])"slk"!==c&&"_p"!==c&&(a[c]=d[f][c]);g.beaconClick(e.sec,d[f].slk,d[f]._p,a,t,n);break}}!1===u&&console.warn("simplerapid: undefined link param in link view")}else console.warn("simplerapid: the simpleBeaconClick must specify the sec");else console.warn("simplerapid: undefined rapid instance")},refreshViewability:function(){o()&&"function"==typeof g.refreshViewability&&g.refreshViewability()},destroy:function(){YAHOO.i13n.JP.reSession(),p=u(),o()&&"function"==typeof g.destroy&&g.destroy()},initRapid:function(){if(v&&console.log(p),"undefined"!=typeof YAHOO.i13n.Rapid&&YAHOO.i13n.Rapid)return YAHOO.i13n.JP.rapid_conf=p,g=new YAHOO.i13n.Rapid(p)}}},reSession:function(){YAHOO.i13n.A_SID=function(){for(var e,t=0,n="",i=+new Date;t++<16;)n+=(e=Math.floor(62*Math.random()))<10?e:String.fromCharCode(e<36?e+55:e+61);return n+i.toString(36)}.apply()}}}}(),"undefined"!=typeof YAHOO.i13n.A_SID&&YAHOO.i13n.A_SID||YAHOO.i13n.JP.reSession();
