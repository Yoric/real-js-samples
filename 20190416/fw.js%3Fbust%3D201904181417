function asyncGeneratorStep(e,t,a,i,r,o,n){try{var s=e[o](n),d=s.value}catch(l){return void a(l)}s.done?t(d):Promise.resolve(d).then(i,r)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise(function(i,r){function o(e){asyncGeneratorStep(s,i,r,o,n,"next",e)}function n(e){asyncGeneratorStep(s,i,r,o,n,"throw",e)}var s=e.apply(t,a);o(void 0)})}}define(["vendors/ua-parser","common/scroller","common/user","vendors/domReady","common/cmp"],function(e,t,a,i,r){"use strict";function o(){var e=this;i(_asyncToGenerator(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getIABConsentString();case 2:a=t.sent,e.init(a);case 4:case"end":return t.stop()}},t,this)})))}return o.prototype.buidGlobalParams=function(t){var i=document.getElementById("fw-linktag-params"),r=new e,o=r.getDevice().type,n=r.getOS().name,s=r.getBrowser().name,d=function(){return"iOS"===n&&"mobile"===o&&s?"iphone_mobile_web":"iOS"===n&&"tablet"===o&&s?"ipad_mobile_web":"Android"===n&&"mobile"===o&&s?"android_phone_mobile_web":"Android"===n&&"tablet"===o&&s?"android_tablet_mobile_web":"Windows [Phone/Mobile]"===n&&"mobile"===o&&s?"windows_phone_mobile_web":"iOS"!==n||"mobile"!==o||s?"iOS"!==n||"tablet"!==o||s?"Android"!==n||"mobile"!==o||s?"Android"!==n||"tablet"!==o||s?!o&&s?"desktop":void 0:"android_tablet_app":"android_phone_app":"ipad_app":"iphone_app"},l=function(){var e="mobile";return window.innerWidth>=768&&(e=window.innerWidth>1024?"desktop":"tablet"),e};this.globalParams={browserName:s,channel:i.dataset.channel,mobileType:o,osName:n,screenFormat:l(),sitePage:i.dataset.sitepage,sitePageType:i.dataset.sitepagetype,videoId:i.dataset.videoid,flag:i.dataset.flag};var c="flag="+this.globalParams.flag+"&csid="+this.globalParams.channel+"_page_type_display_"+this.globalParams.sitePage+"_platform_"+d()+"_media_"+l()+"&caid="+this.globalParams.videoId+"&adobe_uuid="+window.__cmp_tools.getCookie("aam_uuid")+"&_fw_gdpr=1&_fw_gdpr_consent="+t,p=a.getCookie("aam_fw"),u=p||"";window._fw_linktag_params={scan_delay:i.dataset.scan,allow_rescan_after:i.dataset.rescan,server:i.dataset.server,network_id:i.dataset.networkid,profile:i.dataset.profile,other_global_params:c,key_values:u}},o.prototype.init=function(e){var t=this;this.buidGlobalParams(e);var i=this.globalParams.sitePage,r=this.globalParams.sitePageType,o=this.globalParams.screenFormat,n=["article","video","slideshow"];this.fwPos=[].slice.call(document.querySelectorAll("[data-pub]")),Array.prototype.forEach.call(this.fwPos,function(e){var t=e.getAttribute("data-pub"),s=JSON.parse(e.getAttribute("data-sizes"));if(s.availableFormats&&!s.availableFormats.includes("website")&&!s.availableFormats.includes(o))return void e.parentNode.removeChild(e);var d={};if("Top"===t&&"desktop"===o){var l="";l=n.includes(r)&&"video"===r?"video":n.includes(r)&&"video"!==r?"article":"other",d=s[o]["/"===i?"home":l]}else d=s[o];if(d&&d.fwid){if("interstitial_mobile"==d.fwid&&!a.comeFromSocialNetwork())return void e.parentNode.removeChild(e);var c=d.fwid,p=document.createElement("span");p.classList.add("_fwph");var u=c;p.setAttribute("id",u);var m=document.createElement("form");m.setAttribute("style","display:none");var f="_fw_form_"+c;m.setAttribute("id",f);var v=document.createElement("input"),h="_fw_input_"+c,y="ptgt=s&h="+d.height+"&w="+d.width+"&cd="+d.cd+"&slau="+d.adunit;v.setAttribute("type","hidden"),v.setAttribute("name",h),v.setAttribute("id",h),v.setAttribute("value",y),m.appendChild(v),p.appendChild(m);var g=document.createElement("span"),w="_fw_container_"+c;g.setAttribute("id",w),g.classList.add("_fw_container"),p.appendChild(g),e.appendChild(p)}}),window._fw_page_ready=!0,this.listenMsg(),this.waitAdsLoading(function(){t.resizeIframeGravity()}),require(["vendors/freewheel"],function(){window.resizeIframeGravity=function(){}})},o.prototype.waitAdsLoading=function(e){var t=Array.from(document.querySelectorAll("[data-pub]"));return Promise.all(t.map(function(t){return new Promise(function(e,a){var i=!1,r=new MutationObserver(function(a,r){t.style.maxHeight="850px",t.style.overflow="hidden",r.disconnect(),i=!0,e()});r.observe(t,{childList:!0,subtree:!0})}).then(function(){e()})}))},o.prototype.getFrameTarget=function(e){for(var t=document.getElementsByTagName("iframe"),a=0,i=t.length;a<i;a++)if(t[a].contentWindow===e.source)return t[a];return null},o.prototype.listenMsg=function(){var e=document.querySelector("body");document.querySelector("html");window.addEventListener("message",function(t){var a="string"==typeof t.data?t.data.split("@@")[0]:t.data;switch(a){case"resizeIframePub":console.log("resizeIframePub");var i=this.getFrameTarget(t);i&&(e.classList.add("noscroll"),e.classList.add("interstice"),e.classList.add("open"),i.style.position="fixed",i.style.top=0,i.style.left=0,i.style.bottom=0,i.style.right=0,i.style.zIndex=3e4,i.style.width="100%",i.style.height="100%");break;case"closeIframePub":var i=this.getFrameTarget(t);i&&(e.classList.remove("interstice"),e.classList.remove("open"),e.classList.remove("noscroll"),i.parentNode.removeChild(i));break;case"resizeMasthead":var i=this.getFrameTarget(t);i&&(i.style.height=t.data.split("@@")[1]||"auto",i.parentNode.style.height=t.data.split("@@")[1]||"auto")}}.bind(this))},o.prototype.resizeIframeGravity=function(){var e=document.getElementById("gravityFormat");if(e){var a=document.querySelector("body");a.classList.add("gravity");var i=document.querySelector(".pub-block-Top");i.style.display="none",e.classList.add("video-gravity");var r=a.firstChild;a.insertBefore(e,r);var o=document.createElement("span");o.classList.add("icon-arrow"),o.classList.add("gravity-arrow");var n=document.createElement("i");n.classList.add("closeAdGravity"),n.classList.add("fa"),n.classList.add("fa-times"),e.appendChild(o),e.appendChild(n);var s=document.querySelector(".wrapper-main"),d=e.querySelector("video");if("undefined"!=typeof d&&null!==d){d.width="100%",d.width="inherit",d.height="100%",d.style.height="100%";var l=0;e.style.position="fixed",e.style.background="black",e.style.left=0,e.style.bottom=0,e.style.right=0,e.style.zIndex=-0,e.style.width="100%",e.style.height=0;var c=d.offsetHeight;c>window.innerHeight-s.offsetTop&&(c=window.innerHeight-s.offsetTop),d.height=c+"px",e.style.height=c+"px",n.addEventListener("click",function(e){e.preventDefault(),f()}),o.addEventListener("click",function(e){e.preventDefault(),new t(document.body,c,300)},!1),s&&(l+=s.offsetTop,s.style.marginTop=c+"px"),e.style.top=l+"px",d.play();var p=!1,u=.15,m=function(t){if("undefined"!=typeof e&&null!==e){var a=(100-100*window.scrollY/c)/100;a<u&&!p?(p=!0,d.pause(),d.muted=!0):a>u&&p&&(p=!1,d.play(),d.muted=!1),a>=0?e.style.opacity=a:e.style.opacity=0}};window.addEventListener("scroll",m)}var f=function(){e&&(s.style.marginTop="0px",e.style.height=0,setTimeout(function(){console.log("timeout"),a.classList.remove("gravity"),e.parentNode.removeChild(e),o.parentNode.removeChild(o),n.parentNode.removeChild(n),window.removeEventListener("scroll",m)},1200))};d.addEventListener("ended",function(e){f(),d.removeEventListener("ended")})}},new o});