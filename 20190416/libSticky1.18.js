!function(t){"use strict";function i(t){if(t.isFocus)return!0;var i=t.stickyHeight,o=t.stickyPosition.stickyEnd-t.stickyPosition.stickyStart;return!(i>=w||i>=o||H<t.revertMinWidth)}function o(t,i,o,e,s,n){if(t.isFocus)return 0;var r=0,l=t.ignoreEvent,a=t.isSticky,c=t.isFirstScroll,u=t.revertMode,f=t.stickyDirection,p=t.stickyPosition.stickyStart,y=t.stickyPosition.stickyEnd,d=t.stickyPosition.stickyLast,h=t.stickyPosition.scrollStart,k=t.stickyPosition.breakValue,g=t.stickyHeight,v=function(){return"top"===f?1:-1}();if(l){if("scroll"===i)return null;if("start"===i)return 0}return"value"===i?a&&c?k-Math.abs($-h):null:"scroll"===i?!a||c||$<p?null:"scroll"===u&&0===o?null:n&&"bottom"===f&&$>d?$<e?o:(r=g+(d-$),r=r<0?0:r):(r=o+(e-$)*v,w<s&&(r+=(s-w)*v),"top"===f?(r=r<-1*g?-1*g:r,r=r>0?0:r):(r=r<0?0:r,r=r>g?g:r),r):"start"===i?$>=p&&$<y?0:null:"end"===i?a?n&&"bottom"===f&&$>d?null:$>=y?0:$>d?"scroll"===u&&Math.abs(o)>0&&!c?null:d-$:null:null:void 0}function e(t,i){if(void 0!==t){var o,e=c.attr("data-"+r+"-isSticky"),s=function(){return void 0===e?[]:e.split(",")}(),n=[],l=s.length;for(o=0;o<l;o++)s[o]!==t&&n.push(s[o]);i&&n.push(t),0===n.length?c.removeAttr("data-"+r+"-isSticky"):c.attr("data-"+r+"-isSticky",n.join(","))}}function s(t){var i,o,e=["ms","webkit"],s={},n=e.length;for(i in t)for(s[i]=t[i],o=0;o<n;o++)s["-"+e[o]+"-"+i]=t[i];return s}function n(i){var o=i.attr("data-"+r+"-parameter");if(void 0!==o){o=o.split(",");var e,s=o.length,n={};for(e=0;e<s;e++){var l=t.trim(o[e]).split(":");"true"===l[1]?l[1]=!0:"false"===l[1]?l[1]=!1:isNaN(Number(l[1]))||(l[1]=Number(l[1])),n[l[0]]=l[1]}t.extend(!0,i.data(r),n)}}var r="libSticky",l=t(window),a=t(document),c=t("body"),u="ontouchstart"in window,f=navigator.userAgent.toLocaleLowerCase(),p=void 0===navigator.vendor?"":navigator.vendor.toLocaleLowerCase(),y=function(){if(t('meta[name="viewport"]').length>0)for(var i=t('meta[name="viewport"]').attr("content").replace(/\s+/g,"").split(","),o=i.length,e=0;e<o;e++)if("user-scalable"===i[e].split("=")[0].toLowerCase())return i[e].split("=")[1].toLowerCase();return"yes"}(),d=function(){return f.indexOf("android 2.")>=0}(),h=function(){return!(!f.match("android")||!f.match("version/"))}(),k=function(){if(!u||f.match("android"))return 0;if(f.match("applewebkit")){var t=(f+";").replace(/ /g,";"),i=t.indexOf("applewebkit/")+"applewebkit/".length,o=t.indexOf(";",i);return parseFloat(t.substring(i,o))}return 0}(),g=function(){return!!k&&(k<600||void 0)}(),v=function(){return!("opacity"in document.body.style)}(),C=function(){return-1!==p.indexOf("google")}(),S=function(){return!!(p.match("google")&&f.match("mac os")&&u)}(),m=function(){var t=f.split("/").reverse()[0],i=document.body.style;return!(f.match("android")&&t<535)&&("transition"in i||"webkitTransition"in i||"msTransition"in i)}(),b="transitionend."+r+" webkitTransitionEnd."+r+" msTransitionEnd."+r,P=function(){return g?"touchmove":"scroll"}(),$=l.scrollTop(),w=l.innerHeight(),H=l.innerWidth(),T=a.height(),A={scroll:{},touchmove:{},resize:{}};!function(){var t,i,o="";o=g?"touchmove."+r+" resize."+r:"scroll."+r+" resize."+r,l.on(o,function(o){"resize"===o.type&&(H=l.innerWidth()),w=v?l.innerHeight():window.innerHeight,T=a.height(),$=l.scrollTop();var e=T-w;$=$<0?0:$,$=$>e?e:$;for(t in A[o.type])for(i in A[o.type][t])"function"==typeof A[o.type][t][i]&&A[o.type][t][i]()})}();var M={initialize:function(i){return this.each(function(){t(this).data(r,t.extend(!0,{stickyClass:"elSticky",clonedClass:"elCloned",hideClass:"elHide",openClass:"elOpen",closeClass:"elClose",showClass:"elShow",invisibleClass:"elInvisible",noSupportClass:"elNoSticky",anchorClass:"",id:t(this).attr("data-"+r+"-id"),revertMinWidth:0,$on:null,$off:null,$clone:null,$inputTarget:t("#shpWrapper"),$anchor:t(this).find('a[href^="#"][href!="#"]'),$anchorOff:t("[data-"+r+'-parts="anchorOff"]'),stickyHeight:0,stickyPosition:{stickyStart:null,stickyEnd:null,stickyLast:null,scrollStart:null,breakValue:null},offTargetHeight:null,isSticky:!1,isFirstScroll:null,ignoreEvent:!1,isFocus:!1,isInputMode:!0,forceTouchDevice:function(){return!u||"yes"!==y}(),forceAndroid2:!1,stickyMode:"sync",revertMode:function(){return void 0!==i&&void 0!==i.stickyMode&&"fade"===i.stickyMode?"scroll":"target"}(),fadeRatio:.15,inertiaRatio:function(){return u?1.5:.05}(),stickyDirection:"top",anchor:null,nowAnchor:null,inputSelector:['input[type="text"]','input[type="search"]','input[type="tel"]','input[type="email"]','input[type="password"]','input[type="datetime"]','input[type="date"]','input[type="month"]','input[type="week"]','input[type="time"]','input[type="number"]'],overlayClass:"mdOverlaySticky",overlayStyle:{position:"fixed",top:0,left:0,background:"rgba(0,0,0,.7)",width:"100%",height:"100%"},cloneAfter:null,stickyAfter:null,revertAfter:null,anchorChangeAfter:null},i));var o=t(this),e=o.data(r);return n(o),d&&!e.forceAndroid2?(o.toggleClass(e.noSupportClass,!0),void M.destroy.apply(o)):u&&!e.forceTouchDevice?(o.toggleClass(e.noSupportClass,!0),void M.destroy.apply(o)):(o.toggleClass(e.noSupportClass,!1),M.registerCallback.call(o,["cloneAfter","stickyAfter","revertAfter","anchorChangeAfter"]),null===e.$on?"fade"===e.stickyMode?e.$on=c:e.$on=o:0===e.$on.length&&(e.$on=c),null===e.$off?e.$off=c:0===e.$off.length&&(e.$off=c),M.cloneSticky.apply(o),M.updateProperty.apply(o),M.comparePosition.apply(o),M[e.stickyMode+"Sticky"].apply(o),M[e.revertMode+"Revert"].apply(o),M.adjustInput.apply(o),void M.trackAnchor.apply(o))})},scrollRevert:function(){var i=t(this),e=i.data(r),n=e.id,l=e.stickyDirection,a=e.invisibleClass,u=e.$off.get(0)===c.get(0),f=0,p=0,y=0,d=0,h=0,k=0,g=0,v=function(){f=o(e,"value"),p=o(e,"end",h,k,g,u),y=o(e,"scroll",h,k,g,u),p!==d&&(null===p?i.css(l,""):0===p?e.isSticky&&M.revertSticky.apply(i):i.css(l,p)),null===p&&(e.isFirstScroll?f<0&&(e.isFirstScroll=!1):y!==h&&(m?i.css(s({transform:"translateY("+y+"px)"})):Math.abs(y)===e.stickyHeight?i.toggleClass(a,!0):i.toggleClass(a,!1))),d=p,h=y,k=$,g=w};v(),A[P][n].scrollRevert=function(){v()}},targetRevert:function(){var i=t(this),e=i.data(r),s=e.id,n=e.stickyDirection,l=0,a=0,c=function(){l=o(e,"end"),l!==a&&(null===l?i.css(n,""):0===l?e.isSticky&&M.revertSticky.apply(i):i.css(n,l)),a=l};"body"!==e.$off.get(0).tagName.toLocaleLowerCase()&&(c(),A[P][s].targetRevert=function(){c()},A.resize[s].targetRevert=function(){c()})},fadeSticky:function(){var e=t(this),n=e.data(r),l=n.id,a=!1,c=function(){e.toggleClass(n.openClass,!1).toggleClass(n.showClass,!0),a=!1},u=function(){a=!1,M.revertSticky.apply(e),e.toggleClass(n.closeClass,!1).toggleClass(n.hideClass,!0)},f=function(){if(!i(n)||null===o(n,"start"))return void(n.isSticky&&(e.toggleClass(n.openClass,!1).toggleClass(n.showClass,!1).toggleClass(n.closeClass,!0),$<n.stickyPosition.stickyStart&&(n.isFirstScroll=null,e.css(s({transform:""}))),m?e.off(b).on(b,function(){e.off(b),u()}):u()));n.isSticky||a||(M.showSticky.apply(e),M.updateDelayProperty.apply(e),setTimeout(function(){if($>n.stickyPosition.stickyLast)return e.toggleClass(n.hideClass,!1).toggleClass(n.closeClass,!1),void c();e.toggleClass(n.hideClass,!1).toggleClass(n.closeClass,!1).toggleClass(n.openClass,!0),m?e.off(b).on(b,function(){e.off(b),c()}):c()},1e3/60))};e.toggleClass(n.hideClass,!0),f(),A[P][l].fadeSticky=function(){f()},A.resize[l].fadeSticky=function(){f()}},syncSticky:function(){var e=t(this),s=e.data(r),n=s.id,l=function(){if(!i(s)||null===o(s,"start"))return void(s.isSticky&&(M.revertSticky.apply(e),$<=s.stickyPosition.stickyStart&&(s.isFirstScroll=null)));s.isSticky||(M.showSticky.apply(e),M.updateDelayProperty.apply(e))};l(),"body"!==s.$on.get(0).tagName.toLocaleLowerCase()&&(A[P][n].syncSticky=function(){l()},A.resize[n].syncSticky=function(){l()})},cloneSticky:function(){var i,o=t(this),e=o.data(r),s=e.id;void 0===s&&(s=r+"-"+t("[data-"+r+"]").index(this),t(this).attr("data-"+r+"-id",s),e.id=s);for(i in A)A[i][s]={};e.$clone=o.clone().toggleClass(e.clonedClass,!0).insertAfter(o),M.applyCallback.call(o,["cloneAfter"])},showSticky:function(){var i=t(this),o=i.data(r),s=i.css("display");i.filter(":not(."+o.clonedClass+")").toggleClass(o.stickyClass,!0),v&&o.$clone.css("display",s),o.isSticky=!0,e(o.id,!0),M.applyCallback.call(i,["stickyAfter"])},revertSticky:function(){var i=t(this),o=i.data(r),n=[o.stickyClass,o.hideClass,o.openClass,o.closeClass,o.showClass].join(" ");o.isSticky&&(e(o.id,!1),o.$anchor.toggleClass(o.anchorClass,!1),i.css({top:"",position:""}).css(s({transform:""})).css(s({"transition-duration":""})).toggleClass(n,!1),v&&o.$clone.css("display",""),o.isSticky=!1,M.applyCallback.call(i,["revertAfter"]))},adjustInput:function(){var i,o,e,n=t(this),a=n.data(r),f=r+"-adjustInput",p=0,d=a.inputSelector.join(","),v=t(null),m=t(null),b=function(){a.isFocus&&(n.css({position:"absolute"}),o.css({position:"absolute"}),l.scrollTop(0))},P=function(){var t=null;n.css({position:""}),e.off("."+f),e.blur(),v.remove(),o.remove(),a.$inputTarget.css({"margin-top":""}),l.scrollTop(p),a.$clone.css({display:""}),a.isFocus=!1,M.updateSticky.apply(n),l.on("scroll."+f,function(){if(null===t)return void(t=$);l.off("."+f),a.ignoreEvent=!1})};0===n.find(d).length||!u||"yes"===y||g||S||!a.isInputMode||C||n.on("focus."+r,d,function(u){var y,d=parseInt(n.css("z-index"))-1;if(a.isSticky&&!a.isFocus){a.$clone.css({display:"none"}),a.isFocus=!0,a.ignoreEvent=!0,p=l.scrollTop(),e=t(u.target),l.scrollTop(p+w),a.$inputTarget.css({"margin-top":-1*p}),h||(v=t("<style data-"+r+'-parts="css">').append("html{height: 99.99%;} body{height: 99.99%; overflow: hidden}").appendTo(c)),0===t("."+a.overlayClass).length&&(o=t('<div class="'+a.overlayClass+'">').css(a.overlayStyle).css(function(){return d<0&&(n.css("z-index",2),d=1),{"z-index":d}}()).appendTo(c).on("touchmove."+f,function(t){t.preventDefault()}).on("touchend."+f,function(t){P(),t.preventDefault()})),e.on("blur."+f,function(){setTimeout(function(){P()},1e3/60)}),l.scrollTop(0),y=screen.availHeight-window.innerHeight,0===y&&(m=t("<div>").css({position:"absolute",top:0,left:0,height:"100%"}).appendTo(c),i=m.outerHeight(),m.remove());var g=n.css("display");k<603?n.css({display:"none"}):"inline-block"===g?n.css({display:"block"}):n.css({display:"inline-block"}),setTimeout(function(){if(n.css({display:g}),0===y){m=t("<div>").css({position:"absolute",top:0,left:0,height:"100%"}).appendTo(c);var o=i-m.outerHeight();return m.remove(),void n.css(s({transform:"translateY("+o+"px)"}))}n.offset().top!==$&&b()},1e3/60*50)}})},trackAnchor:function(){var i=t(this),o=i.data(r),e=o.$anchor,s=o.$anchorOff,n=o.id,l=[],a=0,c=null,u=function(){l=[],e.each(function(){var i=t(this),o=i.attr("href");0!==t(o).length&&l.push({id:o,top:Math.floor(t(o).offset().top)})}),s.each(function(){var i=t(this).offset().top;0!==i&&l.push({id:"anchorOff-"+String(i),top:Math.floor(i)})}),l.sort(function(t,i){return t.top<i.top?-1:t.top>i.top?1:0}),o.anchor=l},f=function(){var t,s=l.length;for(t=0;t<s;t++){if(0===t&&$<l[t].top){a=-1;break}if($>=l[t].top){if(t+1>=s){a=t;break}if($<l[t+1].top){a=t;break}}}if(!o.isSticky)return void(0!==c&&c!==s-1||(c=null));a!==c&&(e.toggleClass(o.anchorClass,!1),""!==o.anchorClass&&-1!==a&&-1===l[a].id.indexOf("anchorOff-")&&i.find("a[href="+l[a].id+"]").toggleClass(o.anchorClass,!0),o.nowAnchor=-1===a?{id:null,top:null}:l[a],c=a,M.applyCallback.call(i,["anchorChangeAfter"]))};0!==e.length&&(u(),f(),A.resize[n].trackAnchor=function(){u(),f()},A[P][n].trackAnchor=function(){f()})},applyCallback:function(i){var o,e=t(this),s=e.data(r),n=i.length;for(o=0;o<n;o++)!function(t){var i,o=t.length;for(i=0;i<o;i++)t[i].resolve||"function"==typeof t[i].handler&&t[i].handler()}(s[i[o]])},update:function(){var i=t(this);M.updateSticky.apply(i)},updateSticky:function(){var o,e,s=t(this),n=s.data(r);if(void 0!==n){o=n.id,M.revertSticky.apply(s);for(e in A)delete A[e][o],A[e][o]={};M.updateProperty.apply(s),M[n.stickyMode+"Sticky"].apply(s),M[n.revertMode+"Revert"].apply(s),M.trackAnchor.apply(s),i(n)||M.revertSticky.apply(s)}},updateDelayProperty:function(){var i=t(this),o=i.data(r);o.stickyHeight=i.outerHeight(),o.stickyPosition.stickyLast=o.stickyPosition.stickyEnd-o.stickyHeight,"bottom"===o.stickyDirection&&o.$off.get(0)===c.get(0)&&(o.stickyPosition.stickyLast-=w+w*o.inertiaRatio),o.stickyPosition.breakValue=a.height()*o.fadeRatio,"scroll"===o.revertMode&&null===o.isFirstScroll&&(o.stickyPosition.scrollStart=$,o.isFirstScroll=!0)},updateProperty:function(){var i,o=t(this),e=o.data(r),s=e.id,n=e.$on,l=e.$off,a=e.stickyDirection,c=n.get(0)===o.get(0),u=function(){l.is(":visible")?e.offTargetHeight=l.outerHeight():e.offTargetHeight=0,e.stickyHeight=o.outerHeight()},f=function(){if(!e.isFocus)return e.isSticky?(i=c?e.$clone:n,e.stickyPosition.stickyStart=i.offset().top):e.stickyPosition.stickyStart=n.offset().top,e.stickyPosition.stickyEnd=l.offset().top+e.offTargetHeight,"bottom"===a&&(e.stickyPosition.stickyStart+=-1*w+e.stickyHeight,e.stickyPosition.stickyEnd+=-1*w+e.stickyHeight),null===e.stickyPosition.stickyStart||null===e.stickyPosition.stickyEnd||void 0===e.stickyPosition.stickyStart||void 0===e.stickyPosition.stickyEnd?void M.destroy.apply(o):void 0};u(),f(),A.resize[s].updateProperty=function(){u(),f()}},comparePosition:function(){var i,o=t(this),e=o.data(r),s=e.id,n=e.$on,l=e.$off,a=e.stickyDirection,u=n.get(0)===o.get(0),f=e.offTargetHeight,p=function(){l.is(":visible")&&f!==l.outerHeight()&&(f=l.outerHeight()),e.isSticky?(i=u?e.$clone:n,e.stickyPosition.stickyStart=i.offset().top):e.stickyPosition.stickyStart=n.offset().top,e.stickyPosition.stickyEnd=l.offset().top+f,"bottom"===a&&(e.stickyPosition.stickyStart+=-1*w+e.stickyHeight,e.stickyPosition.stickyEnd+=-1*w+e.stickyHeight),e.stickyPosition.stickyLast=e.stickyPosition.stickyEnd-e.stickyHeight,"bottom"===a&&e.$off.get(0)===c.get(0)&&(e.stickyPosition.stickyLast-=w+w*e.inertiaRatio)};A[P][s].comparePosition=function(){p()}},destroy:function(){var i=t(this),o=i.data(r);void 0!==o&&(null!==o.$clone&&o.$clone.length>0&&o.$clone.remove(),i.find(o.inputSelector.join(",")).blur(),M.revertSticky.apply(i),i.removeData(r),delete A.resize[o.id],delete A[P][o.id])},updateCallback:function(i,o,e){var s,n,l,a,c,u=t(this),f=u.data(r);if(s=i.split(".")[0],n=void 0!==i.split(".")[1]?i.split(".")[1]:null,e=void 0!==e?e:"append",l=f[s],c=l.length,"resolve"===o){if(null===n)return;e="resolve"}if(null===n&&(n=c),o="function"==typeof o?o:null,"append"===e)l.push({id:n,handler:o,resolve:!1});else if("prepend"===e)l.unshift({id:n,handler:o,resolve:!1});else if("resolve"===e)for(a=0;a<c;a++)String(l[a].id)===String(n)&&(l[a].resolve=!0)},registerCallback:function(i){var o,e,s=t(this),n=s.data(r),l=i.length,a=null,c=!0;for(o=0;o<l;o++)e=i[o],a=null,c=!0,"function"==typeof n[e]&&(a=n[e],c=!1),n[e]=[{id:"initialize",handler:a,resolve:c}]}};t.fn[r]=function(t){return M[t]?M[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void 0:M.initialize.apply(this,arguments)}}(jQuery);