function newSmartSearch(){new nhn.common.atcmp.naver_web.Controller(__ghtAutoCompleteConfig).attach({onClickLog:function(e){__atcmpCR(e.event,e.element,e.name,e.order,"","")}})}function nx_js_load(e,t){var i=document.createElement("script");i.src=e,t&&(i.onloadDone=!1,i.onload=function(){i.onloadDone=!0,t(),i.onload=i.onreadystatechange=null},i.onreadystatechange=function(){"loaded"!==i.readyState&&"complete"!==i.readyState||i.onloadDone||i.onload()}),document.getElementsByTagName("head")[0].appendChild(i)}function nx_ime_load_fail(){alert("네트워크 상태가 안 좋아 한영입력기를 불러오지 못했습니다.\n잠시 후 다시 시도해 주세요.")}function nx_ime_load(e){return window.nx_kbd_toggle?void nx_kbd_toggle(e):void new $Ajax("https://ssl.pstatic.net/sstatic/au/outside/pc/ime/ime.contents_171011.js",{type:"jsonp",timeout:3,callbackid:"$get_ime",onload:function(t){var i=t.json();if(i){var s=$("_nx_kbd_style");s.styleSheet?s.styleSheet.cssText=i.ime_css:s.innerHTML=i.ime_css,$("_nx_kbd").innerHTML=i.ime_html,nx_js_load("https://ssl.pstatic.net/sstatic/au/outside/pc/ime/nhn.ime_search.js",function(){nx_kbd_toggle(e)})}else nx_ime_load_fail()},ontimeout:nx_ime_load_fail,onerror:nx_ime_load_fail}).request()}!function e(t,i,s){function n(l,o){if(!i[l]){if(!t[l]){var r="function"==typeof require&&require;if(!o&&r)return r(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+l+"'")}var h=i[l]={exports:{}};t[l][0].call(h.exports,function(e){var i=t[l][1][e];return n(i?i:e)},h,h.exports,e,t,i,s)}return i[l].exports}for(var a="function"==typeof require&&require,l=0;l<s.length;l++)n(s[l]);return n}({1:[function(e,t,i){nhn=window.nhn||{},nhn.common=nhn.common||{},nhn.common.atcmp=nhn.common.atcmp||{},nhn.common.atcmp.naver_web=nhn.common.atcmp.naver_web||{},nhn.common.atcmp.naver_web.Controller=$Class({$init:function(e){this._assign(e),this._initComponents()},_assign:function(e){this._htSvrInfo=e,this._ahtOption=e.ahtOption,this._aelForm=[],this._aelInput=[],this._aelViewToggleButton=[],this._aelView=[],this._asOrder=[];for(var t=0;t<this._ahtOption.length;t++)this._aelForm[t]=$(this._ahtOption[t].sFormId),this._aelInput[t]=$(this._ahtOption[t].sInputId),this._aelViewToggleButton[t]=$(this._ahtOption[t].sViewToggleButtonId),this._aelView[t]=$(this._ahtOption[t].sViewId),this._asOrder[t]=this._ahtOption[t].sOrder},_initComponents:function(){for(var e,t=0;t<this._ahtOption.length;t++)e=this._createAutocomoplete(this._aelForm[t],this._aelInput[t],this._aelViewToggleButton[t],this._aelView[t],this._asOrder[t]),this._assignGlobalVars(e,this._asOrder[t]),this._attachEvents(e,this._asOrder[t])},_createAutocomoplete:function(e,t,i,s,n){var a=this._htSvrInfo.sCookie,l=this._htSvrInfo.sFromWhere,o=this._htSvrInfo.nStrMax,r=this._htSvrInfo.bLogin,h=this._htSvrInfo.htApiUrl,_=this._htSvrInfo.htSmParam,c=this._htSvrInfo.htButtonImg,u=new nhn.AcInputManager(t),d=new nhn.AcDataManager(h.sAcKeyword,"jsonp","get",{frm:l,ans:h.sAcAnsType,run:"2",rev:"4",st:"100"}),m=new nhn.common.atcmp.naver_web.MyKeyword(s,t,e,h.sMyKeyword,n,_),g=new nhn.common.atcmp.naver_web.RecentKeyword(s,t,e,h.sMyKeyword,m,n,_),f={order:n,recent:g,strMax:o,login:r,htSm:_,ansType:h.sAcAnsType};c&&(f.buttonImg=c);var p=new nhn.common.atcmp.naver_web.View(s,i,f),v=new nhn.common.atcmp.naver_web.Plus(s,r,n);return new nhn.Autocomplete(u,d,p,{formId:e.id,cookieName:a,oPlus:v})},_assignGlobalVars:function(e,t){"desc"===t?window.smartSearchU=e:window.smartSearch=e},_attachEvents:function(e,t){e.attach({onClickLog:$Fn(this._onClickLog,this).bind(t),onSelect:$Fn(this._onSelect,this).bind(t),onShow:$Fn(this._onShow,this).bind(t),onUse:$Fn(this._onUse,this).bind(t),onUnuse:$Fn(this._onUnuse,this).bind(t)})},_onClickLog:function(e,t){this.fireEvent("onClickLog",t)},_onSelect:function(e){"desc"===e?this.fireEvent("onSelect",{elForm:this._aelForm[1],order:"desc"}):this.fireEvent("onSelect",{elForm:this._aelForm[0],order:"asc"})},_onShow:function(e){this.fireEvent("onShow",{sOrder:e})},_onUse:function(e){"desc"===e?"undefined"!=typeof smartSearch&&smartSearch.setUse(!0):"undefined"!=typeof smartSearchU&&smartSearchU.setUse(!0)},_onUnuse:function(e){"desc"===e?"undefined"!=typeof smartSearch&&smartSearch.setUse(!1):"undefined"!=typeof smartSearchU&&smartSearchU.setUse(!1)}}).extend(jindo.Component),nhn.AcViewManager=$Class({$init:function(e,t,i){this.el=e,this.wel=$Element(e),this.elBtn=t,t&&(this.welBtn=$Element(this.elBtn)),this.oOption={order:"asc",listSelector:"",listbox:"_resultBox",strMax:50,listMax:15,buttonImg:{show:"http://sstatic.naver.net/search/images11/btn_atcmp_up_on.gif",unuseShow:"http://sstatic.naver.net/search/images11/btn_atcmp_up_off.gif",hide:"http://sstatic.naver.net/search/images11/btn_atcmp_down_on.gif",unuse:"http://sstatic.naver.net/search/images11/btn_atcmp_down_off2.gif"}};for(var s in i)this.oOption[s]=i[s];this.oAgent=$Agent().navigator()},_getElement:function(){return this.el},_getWrappedElement:function(){return this.wel},_setAutocomplete:function(e){this.oAuto=e},_setInputManager:function(e){this.oIM=e},paint:function(e){},enter:function(e){},up:function(e){},down:function(e){},left:function(e){},right:function(e){},functionWithCtrl:function(e){},toggle:function(){this.wel.visible()?this.hide():this.show()},show:function(){if(!this.oAuto.isUse())return!1;if(this.oAuto.fireEvent("onShow")&&(this.wel.show(),this.setButtonImage("show"),"IFRAME"==this.wel.$value().tagName.toUpperCase())){var e=this.wel.$value().contentWindow.document.body,t=this.oAgent.ie?e.scrollHeight:e.clientHeight;this.wel.height(t)}},hide:function(){return!!this.oAuto.isUse()&&void(this.oAuto.fireEvent("onHide")&&(this.wel.hide(),this.setButtonImage("hide")))},isShow:function(){return this.wel.visible()},setButtonImage:function(e){if(this.welBtn){var t;t="IMG"==this.welBtn.$value().tagName.toUpperCase()?this.welBtn.$value():$$.getSingle("img",this.welBtn.$value()),t&&("show"==e?(t.src=this.oOption.buttonImg.show,t.title=t.alt="자동완성 접기"):"hide"==e?(t.src=this.oOption.buttonImg.hide,t.title=t.alt="자동완성 펼치기"):"unuse"==e?(t.src=this.oOption.buttonImg.unuse,t.title=t.alt="자동완성 켜기"):this.oOption.buttonImg[e]&&(t.src=this.oOption.buttonImg[e]))}}}),nhn.common.atcmp.naver_web.View=$Class({$init:function(){this.URL_BUTTON_WIDTH=7,this.HISTORY_ON="검색어저장 켜기",this.HISTORY_OFF="검색어저장 끄기",this.URL_CLASS="atcmp_quick",this.DEFAULT_CLASS="",this.EXPAND_CLASS="atcmp_expand",this.EXPAND_ON_CLASS="atcmp_expand_on",this.EXPAND_INIT_ON_CLASS="_expand_init_mark",this.RECENT_COOKIE_NAME="recent",this.RECENT_COOKIE_DOMAIN="naver.com",this._oRecent=this.oOption.recent,this._bLogin=this.oOption.login,this._welSelect=null,this._welSelectAnswer=null,this._welExpand=null,this._welMouseover=null,this._bFirstResultAnswer=!1,this._bPartialMatch=!1,this._bCorrectedQuery=!1,this._bMobile=function(){var e=$Agent()._navigator.userAgent,t=function(e,t){return(t||"").indexOf(e)>-1};return t("Mobile",e)||t("Android",e)||t("Nokia",e)||t("webOS",e)||t("Opera Mini",e)||t("BlackBerry",e)||t("Windows",e)&&t("PPC",e)||t("Smartphone",e)||t("IEMobile",e)||t("iPad",e)}(),this.elBtn&&($Fn(this._onClickBtn,this).attach(this.elBtn,"mousedown"),$Fn($Fn(function(e){e.key().enter&&this._onClickBtn(e)},this).bind(),this).attach(this.elBtn,"keydown")),$Cookie().get(this.RECENT_COOKIE_NAME)&&$Cookie().remove(this.RECENT_COOKIE_NAME,this.RECENT_COOKIE_DOMAIN)},_setElement:function(){this._welAtcmp=$Element($$.getSingle("._atcmp",this.el)),this._welAtcmpIng=$Element($$.getSingle("._atcmpIng",this.el)),this._welAtcmpStart=$Element($$.getSingle("._atcmpStart",this.el)),this._welAtcmpOff=$Element($$.getSingle("._atcmpOff",this.el)),this._welMyKeyword=$Element($$.getSingle("._keywords",this.el)),this._welWords=$Element($$.getSingle("._words",this._welAtcmp.$value())),this._welResult=$Element($$.getSingle("._atcmp_result_wrap",this._welWords.$value())),this._welAnswer=$Element($$.getSingle("._atcmp_answer_wrap",this._welWords.$value())),this._welAlert=$Element($$.getSingle("._alert",this.el)),this._welPlusAlert=$Element($$.getSingle("._plusAlert",this.el)),this._welPlus=$Element($$.getSingle("._plus",this.el)),this._aResultBox=$$("ul._resultBox",this._welAtcmp.$value()),this._aTemplate=[];for(var e=0;e<this._aResultBox.length;e++){var t=this._aResultBox[e];this._aTemplate[e]=t?this._getResultTemplateHtml():null}this._htHelpImg={},this._htHelpImg.helpimg1=$$.getSingle("._help_tooltip1",this.el),this._htHelpImg.helpimg2=$$.getSingle("._help_tooltip2",this.el),this._htHelpImg.helpimg3=$$.getSingle("._help_tooltip3",this.el),this._attachEvents()},_attachEvents:function(){this._bMobile?$Fn(this._onTouchStart,this).attach(this._welAtcmp,"touchstart"):$Fn(this._onMouseover,this).attach(this._welAtcmp,"mouseover"),$Fn(this._onClick,this).attach(this._welAtcmp,"click"),$Fn(this._onSubmit,this).attach($(this.oAuto.option("formId")),"submit");var e=$$(".funoff",this._welAtcmpOff.$value())[0];$Fn(this._onClickUse,this).attach(e,"click"),$Fn(this._onKeyDownByOffBtn,this).attach(e,"keydown");var t=$$("._help",this._welAtcmpOff.$value())[0];$Fn(this._onKeyDownByHelpBtn,this).attach(t,"keydown");var i=$$(".funoff",this._welAtcmp.$value())[0];$Fn($Fn(this._handleOffImg,this).bind("on","1"),this).attach(i,"mouseover"),$Fn($Fn(this._handleOffImg,this).bind("off"),this).attach(i,"mouseout"),$Fn(this._onClickUnUse,this).attach(i,"click"),$Fn(this._onKeyDownByOffBtn,this).attach(i,"keydown");var s=$$("._help",this._welAtcmp.$value())[0];$Fn(this._onKeyDownByHelpBtn,this).attach(s,"keydown");var n=$$(".funoff",this._welAtcmpIng.$value())[0];$Fn($Fn(this._handleOffImg,this).bind("on","2"),this).attach(n,"mouseover"),$Fn($Fn(this._handleOffImg,this).bind("off"),this).attach(n,"mouseout"),$Fn(this._onClickUnUse,this).attach(n,"click"),$Fn(this._onKeyDownByOffBtn,this).attach(n,"keydown");var a=$$("._help",this._welAtcmpIng.$value())[0];$Fn(this._onKeyDownByHelpBtn,this).attach(a,"keydown");var l=$$(".funoff",this._welAtcmpStart.$value())[0];$Fn($Fn(this._handleOffImg,this).bind("on","3"),this).attach(l,"mouseover"),$Fn($Fn(this._handleOffImg,this).bind("off"),this).attach(l,"mouseout"),$Fn(this._onClickUnUse,this).attach(l,"click"),$Fn(this._onKeyDownByOffBtn,this).attach(l,"keydown");var o=$$("._help",this._welAtcmpStart.$value())[0];if($Fn(this._onKeyDownByHelpBtn,this).attach(o,"keydown"),this._bLogin&&this._oRecent){var r=$$(".hisoff",this._welAtcmp.$value())[0];this._welHstBtn=$Element(r);var h=$$(".hisoff",this._welAtcmpIng.$value())[0];this._welIngHstBtn=$Element(h);var _=$$(".hisoff",this._welAtcmpStart.$value())[0],c=$$(".hisoff",this._welAtcmpOff.$value())[0];this._welOffHstBtn=$Element(c),$Fn(this._clickHistoryBtn,this).attach(r,"click"),$Fn(this._clickHistoryBtn,this).attach(h,"click"),$Fn(this._clickHistoryBtn,this).attach(_,"click"),$Fn(this._clickHistoryBtn,this).attach(c,"click")}var u=$$("._plusHelp",this._welPlus.$value())[0];$Fn(this._onKeyDownByPlusHelpBtn,this).attach(u,"keydown");var d=$$(".btn_turnoff",this._welPlus.$value())[0];$Fn(this._onKeyDownByPlusTurnOffBtn,this).attach(d,"keydown")},_paintStart:function(){this._nRecentCount=0,this._welAtcmp||this._setElement(),this._sUserQuery=this.oIM.getValue(),"desc"==this.oOption.order?this._updateSmParam("htyb"):this._updateSmParam("hty"),this._welSelect=null,this._welExpand=null,this._welMouseover=null,this._welSelectAnswer=null;for(var e=0;e<this._aResultBox.length;e++)this._aResultBox[e].style.display="none",this._aResultBox[e].innerHTML="";this._welWords.removeClass("expand"),this._bFirstResultAnswer=!1},_paintEnd:function(e){this._hideAllInnerLayer(),e>0?(e>0&&this._welWords.show(),this._welAtcmp.show(),this._bLogin&&this._oRecent&&this._showHistoryBtn(this._welHstBtn),this.show()):(!this._sUserQuery&&this._bLogin&&this._oRecent.isUse()?this._paintKeyword():this.hide(),this._disableStats()),this._adjustWordsAreaHeight(),setTimeout($Fn(function(){this._expandFirstResultAnswer(),this._adjustWordsAreaHeight(),this._adjustAnswerPostion()},this).bind(),50)},_hideAllInnerLayer:function(){this._welWords.hide(),this._welAtcmp.hide(),this._welAtcmpIng.hide(),this._welAtcmpStart.hide(),this._welAtcmpOff.hide(),this._welMyKeyword.hide(),this._welAlert.hide()},_expandFirstResultAnswer:function(){if(this._bFirstResultAnswer!==!1){var e=$$("."+this.EXPAND_INIT_ON_CLASS,this._welResult.$value());if(e.length>0){var t=this._isASC()?$Element(e[0]):$Element(e[e.length-1]);t.hasClass(this.EXPAND_CLASS)&&(this._welExpand=t,this._toggleExpandArea(t))}}},_adjustWordsAreaHeight:function(){var e=this._getResultBoxHeight(),t=this._welAnswer.height(),i=Math.max(e,t);this._welWords.height(i),this._adjustResultBoxHeight()},_getResultBoxHeight:function(){var e=0,t=0,i=$$("._item",this._welResult.$value()),s=i.length,n=8;return s>0&&(t=$Element(i[0]).height(),e=t*s+n),e+8},_adjustResultBoxHeight:function(){for(var e=null,t=0,i=0,s=0;s<this._aResultBox.length;s++){var n=0,a=$$("._item",this._aResultBox[s]),l=a.length,o=0;l>0&&(o=$Element(a[0]).height(),n=o*l,e=this._aResultBox[s],t=n,i+=n),$Element(this._aResultBox[s]).height(n)}if(null!==e){var r=this._welWords.height(),h=r-i;$Element(e).height(t+h)}},_toggleExpandArea:function(e){null!==e&&(e.hasClass(this.EXPAND_CLASS)?(e.addClass(this.EXPAND_ON_CLASS),this._welWords.addClass("expand")):this._welWords.removeClass("expand"))},_paintKeyword:function(){this._welMyKeyword.show(),this._oRecent.setAutocomplete(this.oAuto),this._oRecent.paint(),this.show()},paint:function(e){this._setExtData(e.sExt),this._paintStart();var t=e.query,i=e.answer,s=e.intend||[],n=e.data,a=this.oOption.listMax,l=this._getCount(n),o=a>l?l:a,r=1;this._bPartialMatch="1"===e.partial_match,this._bCorrectedQuery="1"===e.corrected_query;for(var h=0;h<n.length;h++){var _=[],c=this._aResultBox[h],u=this._aTemplate[h];if(n[h]&&c){for(var d=0;d<n[h].length;d++){$Element(this._aResultBox[h]).show();var m="string"==typeof n[h][d]||1===n[h][d].length?[n[h][d],"0"]:n[h][d],g=m[0],f=m[1],p=!1,v="";f?"1"===this.oOption.ansType?p="1"===f:"2"===this.oOption.ansType&&(p="1"===f||"2"===f):p=!1,p&&(1===r&&(this._bFirstResultAnswer=!0,v=this.EXPAND_INIT_ON_CLASS),r>1&&this._bFirstResultAnswer===!1&&"2"===f&&g===this._sUserQuery&&(this._bFirstResultAnswer=!0,v=this.EXPAND_INIT_ON_CLASS));var w=this._isURL(g),$={rank:r++,txt:this._trim(this._cutStr(g,this.oOption.strMax-(w?this.URL_BUTTON_WIDTH:0))),in_txt:this._trim(g),encoded:encodeURIComponent(g),url:w?0==g.search(/^(https?:\/\/)/)?g:"http://"+g:"",url_class:[p?this.EXPAND_CLASS:""," ",w?this.URL_CLASS:this.DEFAULT_CLASS," ",v].join("")};if(_[_.length]=this._applyTemplate(u,$,t),this._nRecentCount=r-1,r>o)break}"desc"==this.oOption.order?c.innerHTML=_.reverse().join(""):c.innerHTML=_.join("")}else c&&(c.innerHTML="");if(r>o)break}(!i&&!s||0===i.length&&0===s.length)&&(this._bFirstResultAnswer=!1),this._handleAnswer(i,s);var b=e.noresult;if(b){var y=$Element($$.getSingle("._passage",this._welAlert.$value())),C=$Element($$.getSingle("._link",this._welAlert.$value()));y&&y.html(b.passage),C&&C.attr("href",b.link),this._hideAllInnerLayer(),this._welAlert.show(),this.show()}else this._paintEnd(o)},_handleAnswer:function(e,t){if((e||t)&&null!==this._welAnswer){var i=[],s=!1;0!==e.length?(i=e,s=!0):(i=t,s=!1);for(var n=[],a=[],l="",o=0;o<i.length;o++)a=i[o],a&&(l=s?this._makeAnswerList(a):this._makeIntendList(a),l=l.replace(new RegExp("@rank@","g"),o+1),n[n.length]=l);this._welAnswer.$value().innerHTML=n.join(""),this._welSelectAnswer=null}},_makeAnswerList:function(e){for(var t=e[0],i=this._getAnswerTemplateHtml(t),s=0;s<e.length;s++)if("undefined"!=typeof e[s]){if(17==t&&5===s&&(i=i.replace(new RegExp("@display_link@","g"),e[s].replace(new RegExp("^(https|http)://","g"),""))),16==t&&1===s&&/(.*) \((.+)\)/.test(e[s])&&(i=i.replace("@keyword@",RegExp.$1),i=i.replace("@type@",RegExp.$2)),9==t&&12===s){var n=e[s];i=i.replace("@money@",n.toUpperCase())}if(9==t&&7===s||10==t&&5===s||11==t&&5===s){Date.now||(Date.now=function(){return(new Date).getTime()});var a=new $Date(Date.now()),l=e[s].match(/\d{2}\.\d{2}/i)[0].replace(/\./i,"-"),o=e[s].match(/\d{2}\:\d{2}/i)[0];i=i.replace("@fulldate@",a.year()+"-"+l+" "+o)}""===e[s]?(i=i.replace(new RegExp("@style"+s+"@","g"),"display:none"),i=i.replace(new RegExp("@image"+s+"@","g"),"")):(i=i.replace(new RegExp("@style"+s+"@","g"),""),i=i.replace(new RegExp("@image"+s+"@","g"),'<img src="@'+s+'@" width="35" height="44" alt="">')),i=i.replace(new RegExp("@"+s+"@","g"),e[s])}return i},_makeIntendList:function(e){var t=this._getIntendTemplateHtml();return t=t.replace("@query@",e.query),t=t.replace("@intend@",e.intend),t=t.replace("@transquery@",e.transQuery)},_getAnswerTemplateHtml:function(e){var t=document.getElementById("_atcmp_answer_"+e);return null===t&&(t=document.getElementById("_atcmp_answer_0")),t.innerHTML},_getIntendTemplateHtml:function(){var e=document.getElementById("_atcmp_intend");return e.innerHTML},_getResultTemplateHtml:function(){var e=document.getElementById("_atcmp_result_item_tpl");return null===e?"":e.innerHTML.replace(/^\s+|\s+$/g,"")},_adjustAnswerPostion:function(){if(null!==this._welExpand){var e=this._welExpand.$value().offsetTop,t=this._welResult.height(),i=this._welAnswer.height(),s=-8;t>i+e?this._welAnswer.css("top",e+s):(e=t-i,this._welAnswer.css("top",0>e?s:e))}},_setExtData:function(e){this._sExt=e},_getExtData:function(){return this._sExt},_getCount:function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].length;return t},_applyTemplate:function(e,t,i){for(var s in t)if(t.propertyIsEnumerable(s)){var n=t[s];"txt"==s?n=this._highlight(n,i):"in_txt"==s&&(n=this._escapeHTML(n)),e=e.replace(new RegExp("@"+s+"@","g"),n)}return e=t.txt==t.in_txt?e.replace(/title=\"\"/,""):e.replace(/title=\"\"/,'title="'+this._escapeHTML(t.in_txt)+'"')},_highlight:function(e,t){for(var i=0;i<t.length;i++){var s=this._makeStrong(this._escapeHTML(e),this._escapeHTML(t[i]));if(""!=s)return s}return e},_makeStrong:function(e,t){var i=new RegExp("[.*+?|()\\[\\]{}\\\\]","g"),s=t.replace(/()/g," ").replace(/^\s+|\s+$/g,""),n=s.match(/\S/g);null===n&&(n=[]);for(var a=[],l=0,o=n.length;o>l;l++)a.push(n[l].replace(/[\S]+/g,"["+n[l].toLowerCase().replace(i,"\\$&")+"|"+n[l].toUpperCase().replace(i,"\\$&")+"] ").replace(/[\s]+/g,"[\\s]*"));s="("+a.join("")+")";var r="",h="",_="",c=null,u=new RegExp(s);return u.test(e)&&(h=this._getHighlightTemplate(),r=e.replace(u,h),_=RegExp.$1,c=r.split(h),r=h.replace("@mismatch_before@",c[0]).replace("@match@",_).replace("@mismatch_after@",c[1])),r},_getHighlightTemplate:function(){var e=null;return e=this._bPartialMatch?document.getElementById("_atcmp_keyword_partial_match_highlight_tpl"):document.getElementById("_atcmp_keyword_highlight_tpl"),null===e?"":e.innerHTML.replace(/^\s+|\s+$/g,"")},_isURL:function(e){return/(^((https?):\/\/)?([a-z0-9-]+\.)+(edu|org|net|com|gov|info|coop|biz|kr|cn|de|es|eu|fr|hk|in|jp|us|uk|au|sg)([\/?]\S*)?)$/i.test(e)},_trim:function(e){return e.replace(/^\s+|\s+$/g,"")},_cutStr:function(e,t){for(var i=e.length,s=0,n=2,a=2,l=1,o=1,r=0;r<e.length;r++){var h=e.charAt(r).charCodeAt(0);if(s+=h>=44032&&552013>=h||h>=12593&&12643>=h?n:73==h&&74==h?l:h>=65&&90>=h?a:h>=97&&122>=h?l:o,Math.floor(s)>t){i=r;break}}return i<e.length?e.substring(0,i)+"...":e},_escapeHTML:function(e){var t={'"':"quot","&":"amp","<":"lt",">":"gt","'":"#39"};return e.replace(/[<>&"']/g,function(e){return t[e]?"&"+t[e]+";":e})},_indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]==t)return i;return-1},down:function(e){this._welMyKeyword.visible()||(this._clearUpdateUiThread(),this._isASC()?this._down(e):this._up(e))},up:function(e){this._welMyKeyword.visible()||(this._clearUpdateUiThread(),this._isASC()?this._up(e):this._down(e))},right:function(e){this.isShow()&&null!==this._welSelect&&null===this._welSelectAnswer&&this._welSelect.hasClass(this.EXPAND_CLASS)&&(e.stop(),this._selectAnswer(this._isASC()?this._getFirstAnswerItem():this._getLastAnswerItem()))},left:function(e){this.isShow()&&null!==this._welSelectAnswer&&(e.stop(),this._welSelectAnswer.removeClass("add_opt_on"),this._welSelectAnswer=null,this._selectResult(this._welSelect))},_onMouseover:function(e){var t=e.element.tagName.toUpperCase();if("A"===t||"SPAN"===t||"STRONG"===t){var i=this._findItemElement($Element(e.element));if(i)if(this._clearUpdateUiThread(),this._welMouseover&&this._welMouseover.removeClass("atcmp_on"),i.isChildOf(this._welResult.$value())){var s=this._welWords.hasClass("expand")?115:0;this._nSelectThread=setTimeout($Fn(function(){this._selectResultKeyword(i)},this).bind(),s),i.addClass("atcmp_on"),this._welMouseover=i}else i.isChildOf(this._welAnswer.$value())&&this._selectAnswerKeyword(i)}},_clearUpdateUiThread:function(){this._nSelectThread&&(clearTimeout(this._nSelectThread),this._nSelectThread=0),this._nExpandThread&&(clearTimeout(this._nExpandThread),this._nExpandThread=0)},_onTouchStart:function(e){var t=e.element,i=$Element(t);if(i.isChildOf(this._welResult.$value())){var s=this._findItemElement(i);null!==this._welSelect&&this._welSelect.$value()===s.$value()||(e.stop(),this._selectResult(s))}else if(i.isChildOf(this._welAnswer.$value())){var n=this._findItemElement(i);null!==this._welSelectAnswer&&this._welSelectAnswer.$value()===n.$value()||this._selectAnswer(n)}},_findItemElement:function(e){var t="_item";return e.hasClass(t)?e:e.parent(function(e){return e.hasClass(t)})[0]},_selectResult:function(e){e&&(this._selectResultKeyword(e),this._setParameterAll(),this._setQueryParameter())},_selectAnswer:function(e){e&&(this._selectAnswerKeyword(e),this._setParameterAll(),this._setQueryParameter())},_selectResultKeyword:function(e){if(null!==e)if(this._updateSelectedUi(e),this._setSelectTarget(e),e.hasClass(this.EXPAND_CLASS)){var t=this._welSelect.last().text();this.oAuto.requestAnswerByQuery(t,$Fn(function(e){this._handleAnswer(e.answer,e.intend),this._adjustWordsAreaHeight(),this._adjustAnswerPostion()},this).bind())}else this._welSelectAnswer=null},_updateSelectedUi:function(e){null!==e&&(this._welSelect?(this._welSelect.removeClass("atcmp_on"),this._welSelect.removeClass(this.EXPAND_ON_CLASS)):this._welExpand&&this._welExpand.removeClass(this.EXPAND_ON_CLASS),e.addClass("atcmp_on"),this._welWords.hasClass("expand")&&!e.hasClass(this.EXPAND_CLASS)?this._nExpandThread=setTimeout($Fn(function(){this._toggleExpandArea(e)},this).bind(),500):this._toggleExpandArea(e))},_setSelectTarget:function(e){this._welSelect=e,e.hasClass(this.EXPAND_CLASS)&&(this._welExpand=e)},_selectAnswerKeyword:function(e){if(null!==e)if(null!==this._welSelectAnswer&&this._welSelectAnswer.removeClass("add_opt_on"),e.addClass("add_opt_on"),this._welSelectAnswer=e,null===this._welSelect){var t=$$("."+this.EXPAND_CLASS,this._welAtcmp.$value())[0];if(t){var i=$Element(t);this._updateSelectedUi(i),this._setSelectTarget(i)}}else null!==this._welExpand&&(this._updateSelectedUi(this._welExpand),this._setSelectTarget(this._welExpand))},_down:function(e){if(!this.isShow()){var t=9;return t==e.key().keyCode||(this.oAuto.request(),!0)}if(e.stop(),null===this._welSelect){if(this._welAtcmpIng.visible()||this._welAtcmpStart.visible()||this._welAtcmpOff.visible()){var i=null;this._welAtcmpIng.visible()&&(i=this._welAtcmpIng),this._welAtcmpStart.visible()&&(i=this._welAtcmpStart),this._welAtcmpOff.visible()&&(i=this._welAtcmpOff);var s=$$("._atcmpBtnGroup a",i.$value());return void(this._isASC()?s[0].focus():s[s.length-1].focus())}return void this._selectResult(this._getFirstResultItem())}if(null===this._welSelectAnswer){var n=this._getNextResultItem();null!==n?this._selectResult(n):(this._sUserQuery&&this.oIM.setValue(this._sUserQuery),this._isASC()?$$.getSingle("._plus a",this.el).focus():$$.getSingle("._plus .btn_turnoff",this.el).focus())}else this._selectAnswer(this._getNextAnswerItem())},_up:function(e,t){if(!this.isShow()){var i=9;return i==e.key().keyCode,!0}if(e.stop(),null===this._welSelect)return void this._restoreUserQuery();if(null===this._welSelectAnswer){if(t){var s=this._getLastResultItem();return void this._selectResult(s)}var n=this._getPrevResultItem();null!==n?this._selectResult(n):this._restoreUserQuery()}else this._selectAnswer(this._getPrevAnswerItem())},_getFirstAnswerItem:function(){return this._getFirstItem(this._getAnswerItems())},_getLastAnswerItem:function(){return this._getLastItem(this._getAnswerItems())},_getNextAnswerItem:function(){return this._getNextItem(this._getAnswerItems(),this._welSelectAnswer)},_getPrevAnswerItem:function(){return this._getPrevItem(this._getAnswerItems(),this._welSelectAnswer)},_getAnswerItems:function(){var e=$$("._item",this._welAnswer.$value());return this._isASC()?e:e.reverse()},_getFirstResultItem:function(){return this._getFirstItem(this._getResultItems())},_getNextResultItem:function(){return this._getNextItem(this._getResultItems(),this._welSelect)},_getPrevResultItem:function(){return this._getPrevItem(this._getResultItems(),this._welSelect)},_getLastResultItem:function(){return this._getLastItem(this._getResultItems(),this._welSelect)},_getResultItems:function(){var e=$$("._item",this._welResult.$value());return this._isASC()?e:e.reverse()},_getFirstItem:function(e){return $Element(e[0])},_getLastItem:function(e){return $Element(e[e.length-1])},_getNextItem:function(e,t){var i=this._indexOf(e,t.$value());return e.length>i?$Element(e[i+1]):null},_getPrevItem:function(e,t){var i=this._indexOf(e,t.$value());return i>0?$Element(e[i-1]):null},_isASC:function(){return"desc"!==this.oOption.order},_onClick:function(e){var t=$Element(e.element);if(t.isChildOf(this._welWords.$value())&&this._welResult.$value()!==t.$value()&&null!==this._welSelect){if($Element(e.element).hasClass("mquick"))return void(this.oAuto.fireEvent("onDirect")?this._clickLog("desc"===this.oOption.order?"go2":"go1",e.element,e):e.stop());if(this._welSelectAnswer){var i=this._welSelectAnswer.attr("data-template_id");if("17"===i){var s=e.element;return"SPAN"==s.tagName.toUpperCase()&&(s=$Element(s).parent().$value()),void this._clickLog("ansdirect",s,e)}}this.oAuto.fireEvent("onSelect")&&(e.stopDefault(),this._welSelectAnswer||this._clickLog("autokeyword",e.element,e),this._setQueryParameter(),this._setParameterAll(),this._submit(),this._disableStats())}},_submit:function(){this.hide();var e=$(this.oAuto.option("formId"));e&&(this._onSubmit(),e.submit())},_onSubmit:function(){this._bLogin&&this._oRecent&&this._oRecent.preSubmit()},enter:function(e){if(this._welSelectAnswer){var t=this._welSelectAnswer.attr("data-template_id");if("17"===t){e.stop();var i=$$.getSingle("a",this._welSelectAnswer.$value());i&&(window.open(i.href,"_blank"),this._clickLog("ansdirect",i,e))}}},_setParameterAll:function(){this._setSmParameter(),this._enableStats()},_setQueryParameter:function(){this._welSelectAnswer?this.oIM.setValue(this._welSelectAnswer.attr("data-keyword")):this.oIM.setValue(this._welSelect.last().text())},_setSmParameter:function(){if(null===this._welSelect)"desc"==this.oOption.order?this._updateSmParam("htyb"):this._updateSmParam("hty");else if(null===this._welSelectAnswer){if(this._bPartialMatch)return void this._updateSmParam("pat");if(this._bCorrectedQuery)return void this._updateSmParam("mbk");"desc"==this.oOption.order?this._updateSmParam("btm"):this._updateSmParam("top")}else{var e=this._welSelectAnswer.attr("data-sm");this._updateSmParam(e)}},_enableStats:function(){var e=$(this.oAuto.option("formId"));e&&(e.acr.disabled=!1,e.acr.value=this._welSelect.attr("data-acr"),e.acq.disabled=!1,e.acq.value=this._sUserQuery,e.qdt.disabled=!1,e.qdt.value=0,this._welSelectAnswer?this._enableAnswerHiddenFields():this._disableAnswerHiddenFields())},_disableStats:function(){var e=$(this.oAuto.option("formId"));e&&(e.acr.value="",e.acr.disabled=!0,e.acq.value="",e.acq.disabled=!0,e.qdt.value=0,e.qdt.disabled=!0,this._disableAnswerHiddenFields())},_enableAnswerHiddenFields:function(){this._updateAnswerHiddenField(!1,"acir"),this._updateAnswerHiddenField(!1,"os"),this._updateAnswerHiddenField(!1,"bid"),this._updateAnswerHiddenField(!1,"eid"),this._updateAnswerHiddenField(!1,"pkid"),this._updateAnswerHiddenField(!1,"mra")},_disableAnswerHiddenFields:function(){this._updateAnswerHiddenField(!0,"acir"),this._updateAnswerHiddenField(!0,"os"),this._updateAnswerHiddenField(!0,"bid"),this._updateAnswerHiddenField(!0,"eid"),this._updateAnswerHiddenField(!0,"pkid"),this._updateAnswerHiddenField(!0,"mra")},_updateAnswerHiddenField:function(e,t){var i=["data-",t].join(""),s=e?"":this._welSelectAnswer.attr(i),n=$(this.oAuto.option("formId"));n[t].value=[s].join(""),n[t].disabled=""===s||e},_clickLog:function(e,t,i){this.oAuto.fireEvent("onClickLog",{name:e,element:t,event:i,order:this.oOption.order})},_updateSmParam:function(e){var t="",i=this._getExtData(),s="htSm";""===e?t="top_sug."+this._sAnswerLog:(t="1"!==i||"top"!==e&&"btm"!==e&&"pat"!==e&&"mbk"!==e&&"nlq"!==e&&"asgl"!==e&&"asga"!==e&&"aslt"!==e&&"aspl"!==e&&"astm"!==e&&"ast"!==e&&"ase"!==e&&"aswt"!==e&&"asiw"!==e&&"asis"!==e?this.oOption[s][e]:this.oOption[s].extension,"undefined"==typeof t&&(t=[this.oOption[s].prefix,".",e].join("")));var n=$(this.oAuto.option("formId"));n&&(n.sm.value=t)},functionWithCtrl:function(e){var t=e.key(),i=50,s=51,n=52,a=53;i==t.keyCode?(this.oAuto.unuse(!1),this.oAuto.request(),this._bLogin&&this._oRecent&&(this._oRecent.setAutocomplete(this.oAuto),this._oRecent.paint()),e.stop()):s==t.keyCode?(this.oAuto.use(),this.oIM.change(),e.stop()):n==t.keyCode?this._bLogin&&this._oRecent&&(this._welAtcmp||this._setElement(),this._oRecent.setAutocomplete(this.oAuto),this._oRecent.setUse(!1),this._welHstBtn.text(this.HISTORY_ON),this._oRecent.paint(),e.stop()):a==t.keyCode&&this._bLogin&&this._oRecent&&(this._welAtcmp||this._setElement(),this._oRecent.setAutocomplete(this.oAuto),this._oRecent.setUse(!0),this._welHstBtn.text(this.HISTORY_OFF),this._oRecent.paint(),e.stop())},show:function(){this.oAuto.fireEvent("onShow")&&(this.wel.visible()||this.wel.show(),this.oAuto.isUse()?this.setButtonImage("show"):this.setButtonImage("unuseShow"))},hide:function(){this._handleOffImg("off"),this._welAtcmp.hide(),this._welAtcmpIng.hide(),this._welAtcmpStart.hide(),this._welAtcmpOff.hide(),this._welMyKeyword.hide(),this._welPlusAlert&&this._welPlusAlert.hide(),this.oAuto.fireEvent("onHide")&&(this.wel.hide(),this.oAuto.isUse()?this.setButtonImage("hide"):this.setButtonImage("unuse"))},_restoreUserQuery:function(){this.hide(),this._sUserQuery&&this.oIM.setValue(this._sUserQuery)},setButtonImage:function(e){if(this.welBtn){var t;if(t="IMG"==this.welBtn.$value().tagName.toUpperCase()?this.welBtn.$value():$$.getSingle("img",this.welBtn.$value()))this._bLogin?"show"==e?(t.src=this.oOption.buttonImg.show,t.title=t.alt="접기"):"hide"==e?(t.src=this.oOption.buttonImg.hide,t.title=t.alt="펼치기"):"unuseShow"==e?(t.src=this.oOption.buttonImg.unuseShow,t.title=t.alt="접기"):"unuse"==e?(t.src=this.oOption.buttonImg.unuse,t.title=t.alt="펼치기"):this.oOption.buttonImg[e]&&(t.src=this.oOption.buttonImg[e]):"show"==e?(t.src=this.oOption.buttonImg.show,t.title=t.alt="자동완성 접기"):"hide"==e?(t.src=this.oOption.buttonImg.hide,t.title=t.alt="자동완성 펼치기"):"unuse"==e?(t.src=this.oOption.buttonImg.unuse,t.title=t.alt="자동완성 켜기"):this.oOption.buttonImg[e]&&(t.src=this.oOption.buttonImg[e]);else{var i="",s=$Element($$.getSingle("._btn_arw",this.elBtn));s&&(this._bLogin?"show"==e?(s.removeClass("fold"),s.removeClass("dim"),i="자동완성 접기"):"hide"==e?(s.addClass("fold"),s.removeClass("dim"),i="자동완성 펼치기"):"unuseShow"==e?(s.removeClass("fold"),s.addClass("dim"),i="접기"):"unuse"==e&&(s.addClass("fold"),s.addClass("dim"),i="펼치기"):"show"==e?(s.removeClass("fold"),s.removeClass("dim"),i="자동완성 접기"):"hide"==e?(s.addClass("fold"),s.removeClass("dim"),i="자동완성 펼치기"):"unuse"==e&&(s.addClass("dim"),i="자동완성 켜기"),$Element(s.query("._text")).text(i))}}},_handleOffImg:function(e,t){if(this._welAtcmp||this._setElement(),"on"==e){var i=t?t:1,s=this._htHelpImg["helpimg"+i];$Element(s).show()}else $Element(this._htHelpImg.helpimg1).hide(),$Element(this._htHelpImg.helpimg2).hide(),
$Element(this._htHelpImg.helpimg3).hide()},_showHistoryBtn:function(e){e.parent().addClass("on"),this._oRecent.isUse()?e.text(this.HISTORY_OFF):e.text(this.HISTORY_ON)},_clickHistoryBtn:function(e){e.stop(),this._oRecent.setAutocomplete(this.oAuto),this._oRecent.isUse()?(this._oRecent.setUse(!1),e.element.innerHTML=this.HISTORY_ON,this._clickLog("saveoff",e.element,e)):(this._oRecent.setUse(!0),e.element.innerHTML=this.HISTORY_OFF,this._clickLog("saveon",e.element,e)),this.hide()},_onClickUse:function(e){this.oAuto.isUse()||(this.oAuto.use(),this.oAuto.setButtonImage("show"),this.oAuto.request(),this._clickLog("sugon",e.element,e))},_onClickUnUse:function(e){this.oAuto.isUse()&&(this.oAuto.unuse(),this._clickLog("sugoff",e.element,e))},_onClickBtn:function(e){this._welAtcmp||this._setElement(),this.wel.visible()?this._clickLog("close",e.element,e):this._clickLog("expand",e.element,e),this._bLogin?this.wel.visible()?this.oAuto.hide():(this.oAuto.request(),this.oIM.getValue()?this.oAuto.isUse()?0===this._nRecentCount&&(this._welAtcmpIng.show(),this._bLogin&&this._oRecent&&this._showHistoryBtn(this._welIngHstBtn),this.show()):(this._welAtcmpOff.show(),this._bLogin&&this._oRecent&&this._showHistoryBtn(this._welOffHstBtn),this.show()):this._paintKeyword()):this.oAuto.isUse()?this.wel.visible()?this.oAuto.hide():(this.oAuto.request(),0===this._nRecentCount&&(this._welAtcmpIng.show(),this.oAuto.show())):(this.oAuto.use(),this.wel.visible()?this.oAuto.hide():(this.oAuto.request(),0===this._nRecentCount&&(this._welAtcmpStart.show(),this.oAuto.show()))),this.oIM.focus(),e.stop(),this._welAlert.visible()&&(this._hideAllInnerLayer(),this._welAlert.show())},_onKeyDownByOffBtn:function(e){var t=e.key(),i=9;i!=t.keyCode||i==t.keyCode&&t.shift||!(this._isASC()||this._welAtcmpIng.visible()||this._welAtcmpStart.visible()||this._welAtcmpOff.visible())||(this.hide(),this.oIM.focus(),e.stop())},_onKeyDownByHelpBtn:function(e){var t=e.key(),i=9;i==t.keyCode&&t.shift&&(!this._isASC()||this._welAtcmpIng.visible()||this._welAtcmpStart.visible()||this._welAtcmpOff.visible())&&(this.hide(),this.oIM.focus(),e.stop())},_onKeyDownByPlusHelpBtn:function(e){var t=e.key(),i=9;this._isASC()&&i==t.keyCode&&t.shift&&(this.oIM.focus(),this._up(e,!0),e.stop())},_onKeyDownByPlusTurnOffBtn:function(e){var t=e.key(),i=9;this._isASC()||i!=t.keyCode||i==t.keyCode&&t.shift||(this.oIM.focus(),this._up(e,!0),e.stop())}}).extend(nhn.AcViewManager),nhn.common.atcmp.naver_web.Plus=$Class({COOKIE:"NaverSuggestPlus",COOKIE_DOMAIN:"naver.com",COOKIE_EXPIRES:30,$init:function(e,t,i){this.welWrap=$Element(e);var s=$Element(e).query("._plus");s&&(this._sOrder=i,this._bLogin=t,this._assignElements(s),this._attachEvents(),this._onInit())},_assignElements:function(e){var t=$Element(e);this._welBase=t,this._welBtn=$Element(t.query("._plus_btn")),this._welBtnOn=$Element(this._welBtn.query(".btn_turnon")),this._welBtnOff=$Element(this._welBtn.query(".btn_turnoff")),this._welAlert=$Element(t.query("._plusAlert")),this._welClose=$Element(t.query("._close")),this._welLoginAlertContent=$Element(t.query("._login")),this._welLogoutAlertContent=$Element(t.query("._logout")),this._welLayer=$Element(this._welBase.parent().query("._words")),this._welLoginBtn=$Element(this._welLogoutAlertContent.queryAll("a")[0]),this._welHelp=$Element(this.welWrap.query("._help"))},_attachEvents:function(){$Fn(this._onClickOnBtn,this).attach(this._welBtnOn,"click"),$Fn(this._onClickOffBtn,this).attach(this._welBtnOff,"click"),$Fn(this._onClickCloseBtn,this).attach(this._welClose,"click"),$Fn(this._onKeyDownCloseBtn,this).attach(this._welClose,"keydown"),$Fn(this._onClickLogin,this).attach(this._welLoginBtn,"click")},_onInit:function(){this.disableButton()},_onClickOnBtn:function(e){if(e.stopDefault(),!$Element(e.element).hasClass("active")){if(!this._bLogin)return void this._showAlert();this._use(),this._showAlert()}},_onClickOffBtn:function(e){if(e.stopDefault(),!$Element(e.element).hasClass("active")){if(!this._bLogin)return void this._showAlert();this._unuse(),this._showAlert()}},_onClickCloseBtn:function(e){e.stopDefault(),this._welAlert.hide(),this._nRestoreHeight&&this._welLayer.height(this._nRestoreHeight),this._bLogin?this.isUse()?this._welBtnOn.$value().focus():this._welBtnOff.$value().focus():this._welBtnOn.$value().focus(),this._welAlert.attr("tabindex",null)},_onKeyDownCloseBtn:function(e){var t=e.key(),i=9;i!==t.keyCode||t.shift||(this._welAlert.hide(),this._nRestoreHeight&&this._welLayer.height(this._nRestoreHeight),this._bLogin?this.isUse()?this._welBtnOff.$value().focus():this._welHelp.$value().focus():this._welBtnOff.$value().focus(),this._welAlert.attr("tabindex",null),e.stop())},_onClickLogin:function(e){e.stopDefault(),$Cookie().remove(this.COOKIE,this.COOKIE_DOMAIN),document.location=this._welLoginBtn.attr("href")},_use:function(){this.enableButton(),$Cookie().remove(this.COOKIE,this.COOKIE_DOMAIN),this._updateList(),this._syncAnotherAutocompleteUi(!0)},_unuse:function(){this.disableButton(),$Cookie().set(this.COOKIE,"unuse",this.COOKIE_EXPIRES,this.COOKIE_DOMAIN),this._updateList(),this._syncAnotherAutocompleteUi(!1)},_updateList:function(){var e="asc"===this._sOrder?window.smartSearch:window.smartSearchU;e.request()},_syncAnotherAutocompleteUi:function(e){var t="desc"===this._sOrder?window.smartSearch:window.smartSearchU;t&&(e?t._oDM._oPlus.enableButton():t._oDM._oPlus.disableButton())},_showAlert:function(){this._nRestoreHeight=this._welLayer.height(),this._welLoginAlertContent.hide(),this._welLogoutAlertContent.hide(),this._bLogin?this._welLoginAlertContent.show():this._welLogoutAlertContent.show(),this._welAlert.show(),this._adjustWordsAreaHeight(),window.setTimeout($Fn(function(){this._welAlert.attr("tabindex",0),this._welAlert.$value().focus()},this).bind(),100)},_adjustWordsAreaHeight:function(){this._nAdjustHeightThread&&window.clearTimeout(this._nAdjustHeightThread),this._nAdjustHeightThread=window.setTimeout($Fn(function(){var e=this._welAlert.height(),t=this._welLayer.height();e>t&&this._welLayer.height(e+10)},this).bind(),55)},enableButton:function(){this._welBtnOn.addClass("active"),this._welBtnOff.removeClass("active")},disableButton:function(){this._welBtnOn.removeClass("active"),this._welBtnOff.addClass("active")},isUse:function(){return"unuse"!==$Cookie().get(this.COOKIE)},paint:function(e){this.isUse()&&this._bLogin?this.enableButton():this.disableButton(),this._adjustWordsAreaHeight()}}),nhn.common.atcmp.naver_web.RecentKeyword=$Class({MAX:10,AUTO_ON_BTN_MSG:"자동완성 켜기",AUTO_OFF_BTN_MSG:"자동완성 끄기",KEYWORD_ON_BTN_MGS:"검색어저장 켜기",KEYWORD_OFF_BTN_MGS:"검색어저장 끄기",COOKIE_NAME:"recent",COOKIE_DOMAIN:"naver.com",RECENT_TAB_INDEX:0,MY_TAB_INDEX:1,$init:function(e,t,i,s,n,a,l){this._elView=e,this._welView=$Element(this._elView),this._elInput=t,this._elForm=i,this._sURL=s,this._oMyKeyword=n,this._oMyKeyword.setRecent(this),this._bData=!1,this._nTabId=this.RECENT_TAB_INDEX,this._bReverse="desc"==a,this._sOrder=a,this.htSmParam=l,this._welSelect=null,this._oAgent=$Agent().navigator();var o=$Cookie().get(this.COOKIE_NAME);o&&($Cookie().remove(this.COOKIE_NAME,this.COOKIE_DOMAIN),this._add(o)),this._aData=[]},setAutocomplete:function(e){this._oAuto=e,this._oMyKeyword.setAutocomplete(e)},isUse:function(){var e=$Cookie().get("NaverSuggestUse");if(e){var t=e.split("&");if(t.length>1)return"use"==t[1]}return!0},use:function(){this.setUse(!0),this._oMyKeyword.paint(),this.paint()},unuse:function(){this.setUse(!1),this._oMyKeyword.paint(),this.paint()},setUse:function(e){var t=(this._oAuto.isUse()?"use&":"unuse&")+(e?"use":"unuse");$Cookie().set("NaverSuggestUse",t,21900,this.COOKIE_DOMAIN)},paint:function(){if(this._wel||this._setElement(),!this._bData)return void this._getRequest();if(this._nTabId==this.MY_TAB_INDEX)return void this._oMyKeyword.paint();var e=[],t=$A(this._oMyKeyword.getData()),i=this.isUse();if(i)for(var s=this._aData.length-1;s>=0;s--)e[e.length]=this._applyTemplate(this._sTemplate,this._aData[s],t);this._welSelect=null,this._bReverse?this._welList.html(e.reverse().join("")):this._welList.html(e.join("")),this._oAuto.isUse()?this._welAcOff.text(this.AUTO_OFF_BTN_MSG):this._welAcOff.text(this.AUTO_ON_BTN_MSG),i?this._welKeywordOff.text(this.KEYWORD_OFF_BTN_MGS):this._welKeywordOff.text(this.KEYWORD_ON_BTN_MGS),this._welList.hide(),this._welNone.hide(),this._welNoti.hide(),this._welOff.hide(),this._welFunHelp.hide(),e.length>0?(this._welList.show(),this._welNoti.show(),this._welDelMode.show()):(this._deleteDone(),i?this._welNone.show():this._welOff.show(),this._welDelMode.hide()),this._welView.show()},preSubmit:function(){this.isUse()&&("onpagehide"in window?$Fn(this._setRecentKeywordCookie,this).attach(window,"pagehide"):$Fn(this._setRecentKeywordCookie,this).attach(window,"unload"))},_setRecentKeywordCookie:function(){$Cookie().set(this.COOKIE_NAME,this._elInput.value,1,this.COOKIE_DOMAIN)},_add:function(e){var t=escape(e)+"&"+this._getDateString();return this._request("set",t),!0},_applyTemplate:function(e,t,i){var s=this._oMyKeyword.has(t.in_txt);e=e.replace(/@my@/g,s?"on":"off"),s&&(e=e.replace(/내 검색어 등록/,"내 검색어 해제"));for(var n in t)t.propertyIsEnumerable(n)&&(e=e.replace(new RegExp("@"+n+"@","g"),this._escapeHTML(t[n].replace(/\$/g,"$$$$"))));return e},_getRequest:function(){var e={cmd:"get",type:"jsonp",key:"recentkeyword,mykeyword",limit:this.MAX};if(!this._oGetAjax){var t=this;this._oGetAjax=new $Ajax(this._sURL,{type:"jsonp",method:"get",callbackid:"$3361",onload:function(e){var i=e.json();t._handleData(i)},onerror:function(e){t.onError()}})}this._oGetAjax.request(e)},_handleData:function(e){var t=[],i=e.keywords.length;if(e.keywords)for(var s=0;s<e.keywords.length;s++){var n="";try{n=decodeURIComponent(e.keywords[s])}catch(a){n=e.keywords[s]}t[s]={txt:n,rank:(i--).toString()}}this._oMyKeyword.setData(t),i=e.recentkeyword.length;for(var s=0;e.recentkeyword&&s<e.recentkeyword.length;s++){var l="";try{l=decodeURIComponent(e.recentkeyword[s])}catch(a){l=e.recentkeyword[s]}var o=l.split("&");if(o&&2==o.length){var r=unescape(o[0]);this._aData[s]={txt:r,date:o[1],in_txt:r,rank:(i--).toString()}}}this._bData=!0,this.paint()},_request:function(e,t,i){var s={type:"jsonp",key:"recentkeyword",limit:this.MAX};if(!this._oAjax){var n=this;this._oAjax=new $Ajax(this._sURL,{type:"jsonp",method:"get",callbackid:"$3361",onerror:function(e){n.onError()}})}s.cmd=e,("set"==e||"del"==e)&&(t&&(s.value=t),i&&(s.old_value=i),"set"==e&&(s.auto_remove=1)),this._oAjax.request(s)},onError:function(){this._wel||this._setElement(),this._oMyKeyword.onError(),this._aData=[],this._bData=!0,this._welNone.text("로그인 후 사용하실 수 있는 기능입니다."),this.paint()},_setElement:function(){var e=$$.getSingle("._keywords",this._elView);this._wel=$Element(e),this._welRecentTab=$Element($$.getSingle("._recentTab",this._elView)),this._welMyTab=$Element($$.getSingle("._myTab",this._elView));var t=$$.getSingle("._recent",this._elView);this._welRecent=$Element(t);var i=$$.getSingle("._my",this._elView);this._welMy=$Element(i),this._elList=$$.getSingle("ul",t),this._welList=$Element(this._elList),this._sTemplate=this._welList.$value().innerHTML.replace(/^\s+|\s+$/g,""),this._welList.$value().innerHTML="",this._welNone=$Element($$.getSingle("._recentNone",t)),this._welOff=$Element($$.getSingle("._offMsg",t)),this._welNoti=$Element($$.getSingle("._noti",e)),this._welBtnGroup=$Element($$.getSingle("._recentBtnGroup",e)),this._elDelMode=$$.getSingle("._delMode",this._welBtnGroup.$value()),this._welDelMode=$Element(this._elDelMode),this._elKeywordOff=$$.getSingle("._keywordOff",this._welBtnGroup.$value()),this._welKeywordOff=$Element(this._elKeywordOff),this._elAcOff=$$.getSingle("._acOff",this._welBtnGroup.$value()),this._welAcOff=$Element(this._elAcOff),this._welDelBtnGroup=$Element($$.getSingle("._recentDelBtnGroup",e)),this._elDelAll=$$.getSingle("._delAll",this._welDelBtnGroup.$value()),this._elDelDone=$$.getSingle("._delDone",this._welDelBtnGroup.$value()),this._welMyBtnGroup=$Element($$.getSingle("._myBtnGroup",e)),this._welFunHelp=$Element($$.getSingle("._help2",e)),this._attachEvent()},_attachEvent:function(){var e=this,t=this._wel.$value();t&&t.addEventListener&&t.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation()},!1),this._welList.delegate("mouseover","li",function(t){var i=jindo.$Element(t.element);e._welSelect&&e._welSelect.removeClass("atcmp_on"),i.addClass("atcmp_on"),e._welSelect=i}),this._welList.delegate("click","li",function(t){var i=jindo.$Element(t.element),s=i.last().text(),n=$Element(t._event.target?t._event.target:t._event.srcElement);n="a"==n.tag?n:$Element(n.query("! a")),n.hasClass("_myBtn")?e._toggleMyKeyword(t,s):n.hasClass("_del")?(e._delete(s),e._clickLog("rx",t.element,t)):(e._updateSmParam("hst"),e._select(s)),t.stop(),e._elInput.focus()}),$Fn(function(t){t.stop(),e._aData.length>0&&(e._deleteMode(),e._clickLog("rdel",t.element,t)),e._elInput.focus()}).attach(this._elDelMode,"click"),$Fn(function(t){var i=t.key(),s=9;s==i.keyCode&&i.shift&&(e._bReverse?(e._oAuto._oIM.setValue(""),e._oAuto._oIM._el.focus(),e._oAuto.hide()):(e._up(t,!0),t.stop()))}).attach(this._elDelMode,"keydown"),$Fn(function(t){t.stop(),e._deleteDone(),e._clickLog("rdelend",t.element,t),e._elInput.focus()}).attach(this._elDelDone,"click"),$Fn(function(t){t.stop(),e._deleteAll(),e._clickLog("ralldel",t.element,t),e._elInput.focus()}).attach(this._elDelAll,"click"),$Fn(function(t){t.stop(),e._nTabId=e.RECENT_TAB_INDEX,e._welMyTab.removeClass("on"),e._welRecentTab.addClass("on"),e._welMy.hide(),e._welRecent.show(),e._deleteDone(),e._welMyBtnGroup.hide(),e.paint(),e._elInput.focus(),e._clickLog("rtab",t.element,t)}).attach(this._welRecentTab.$value(),"click"),$Fn(function(t){t.stop(),e._nTabId=e.MY_TAB_INDEX,e._welRecentTab.removeClass("on"),e._welMyTab.addClass("on"),e._welRecent.hide(),e._welMy.show(),e._welMyBtnGroup.show(),e._welBtnGroup.hide(),e._welDelBtnGroup.hide(),e._oMyKeyword.paint(),e._elInput.focus(),e._clickLog("mytab",t.element,t)}).attach(this._welMyTab.$value(),"click"),$Fn(function(t){e._welFunHelp.hide(),t.stop(),e.isUse()?(e._oAuto.hide(),e.unuse(),e._welKeywordOff.text(e.KEYWORD_ON_BTN_MGS),e._clickLog("saveoff",t.element,t)):(e.use(),e._welKeywordOff.text(e.KEYWORD_OFF_BTN_MGS),e._clickLog("saveon",t.element,t)),e._elInput.focus()}).attach(this._elKeywordOff,"click"),$Fn(function(t){e.isUse()&&e._welFunHelp.show()}).attach(this._elKeywordOff,"mouseover"),$Fn(function(t){e._welFunHelp.hide()}).attach(this._elKeywordOff,"mouseout"),$Fn(function(t){var i=t.key(),s=9;s==i.keyCode&&i.shift&&e._bReverse&&(e._oAuto._oIM.setValue(""),e._oAuto._oIM._el.focus(),e._oAuto.hide())}).attach(this._elKeywordOff,"keydown"),$Fn(function(t){e._welFunHelp.hide(),t.stop(),e._oAuto.isUse()?(e._oAuto.unuse(!1),e._oAuto.setButtonImage("unuseShow"),e._welAcOff.text(e.AUTO_ON_BTN_MSG),e._clickLog("sugoff",t.element,t)):(e._oAuto.use(),e._oAuto.setButtonImage("show"),e._welAcOff.text(e.AUTO_OFF_BTN_MSG),e._clickLog("sugon",t.element,t)),e._elInput.focus()}).attach(this._elAcOff,"click"),$Fn(function(t){e._oAuto.isUse()&&e._welFunHelp.show()}).attach(this._elAcOff,"mouseenter"),$Fn(function(t){e._welFunHelp.hide()}).attach(this._elAcOff,"mouseout"),$Fn(function(t){var i=t.key(),s=9;s!=i.keyCode||s==i.keyCode&&i.shift||(e._bReverse?(e._oAuto._oIM._el.focus(),e._down()):(e._oAuto._oIM.setValue(""),e._oAuto.hide(),e._oAuto._oIM._el.focus()),t.stop())}).attach(this._elAcOff,"keydown"),$Fn(this._onKeydown,this).attach($Element(this._elInput),"keydown")},_deleteMode:function(){this._welList.addClass("u_t_del"),this._welBtnGroup.hide(),this._welDelBtnGroup.show()},_deleteDone:function(){this._welList.removeClass("u_t_del"),this._welDelBtnGroup.hide(),this._welBtnGroup.show()},_delete:function(e){for(var t=null,i=0;i<this._aData.length;i++)if(t=this._aData[i],t&&t.in_txt==e){this._request("del",escape(e)+"&"+t.date);break}if(t){var s=$A(this._aData);s=s.refuse(t),this._aData=s.$value()}return this.paint(),!0},_deleteAll:function(){return this._request("del"),this._aData=[],this.paint(),!0},_select:function(e){this.preSubmit(),this._elForm.acr.disabled=!1,this._elForm.acr.value=this._welSelect.attr("data-rank"),this._elInput.value=e,this._elForm.submit()},_toggleMyKeyword:function(e,t){var i=this._oMyKeyword.getData();this._oMyKeyword.has(t)?(this._clickLog("mydel",e.element,e),this._removeMyKeyword(t)):this._oMyKeyword.MAX<=i.length?(this._nTabId=this.MY_TAB_INDEX,this._welMyTab.addClass("on"),this._welRecentTab.removeClass("on"),this._welRecent.hide(),this._welMy.show(),this._welMyBtnGroup.show(),this._welBtnGroup.hide(),this._welDelBtnGroup.hide(),this._oMyKeyword.paint(),this._oMyKeyword.showMaxLayer()):(this._clickLog("myadd",e.element,e),this._addMyKeyword(t))},_addMyKeyword:function(e){this._oMyKeyword.add(e),this.paint()},_removeMyKeyword:function(e){this._oMyKeyword.remove(e),this.paint()},_onKeydown:function(e){if(this._wel.visible()&&this._welRecent.visible()){var t=e.key(),i=8,s=46,n=9;t.down||t.up||n==t.keyCode?(t.up||n==t.keyCode&&t.shift?this._up():this._down(),e.stop()):t.enter?this._updateSmParam("hst"):!t.shift||i!=t.keyCode&&s!=t.keyCode||window.confirm("검색어 기록을 전체 삭제하시겠습니까?")&&this._deleteAll()}},_up:function(e,t){var i=this._welSelect;i?(i.removeClass("atcmp_on"),i=this._getPrev(i)):i=this._getLast(),i?this._welNone!=i?(this._oAuto._oIM.setValue(i.last().text()),i.addClass("atcmp_on"),this._oAuto._oIM._el.focus()):this._elAcOff.focus():this._bReverse?(this._oAuto._oIM.setValue(""),this._elAcOff.focus()):(this._oAuto._oIM.setValue(""),this._oAuto.hide()),this._welSelect=i},_down:function(){var e=this._welSelect;e?(e.removeClass("atcmp_on"),e=this._getNext(e)):e=this._getFirst(),e?this._welNone!=e?(this._oAuto._oIM.setValue(e.last().text()),e.addClass("atcmp_on"),this._oAuto._oIM._el.focus()):this._elKeywordOff.focus():this._bReverse?(this._oAuto._oIM.setValue(""),this._oAuto._oIM._el.focus(),this._oAuto.hide()):(this._oAuto._oIM.setValue(""),this._elDelMode.focus()),this._welSelect=e},_getFirst:function(){return this._elList.childNodes.length?this._welList.first():this._welSelect?void 0:this._welNone},_getLast:function(){return this._elList.childNodes.length?this._welList.last():this._welSelect?void 0:this._welNone},_getNext:function(e){var t=this._welList;return e.isChildOf(t)?e.next():null},_getPrev:function(e){var t=this._welList;return e.isChildOf(t)?e.prev():null},_getDateString:function(){var e=new Date,t=e.getMonth()+1,i=e.getDate();return(t>=10?t:"0"+t)+"."+(i>=10?i:"0"+i)},_escapeHTML:function(e){var t={'"':"quot","&":"amp","<":"lt",">":"gt","'":"#39"},i=e.replace(/[<>&"']/g,function(e){return t[e]?"&"+t[e]+";":e});return i},_clickLog:function(e,t,i){var s="desc"===this._sOrder?smartSearchU:smartSearch;s.fireEvent("onClickLog",{name:e,element:t,event:i,order:this._sOrder})},_updateSmParam:function(e){var t=this.htSmParam[e],i=this._elForm;i&&(i.sm.value=t)}}),nhn.common.atcmp.naver_web.MyKeyword=$Class({MAX:10,AUTO_ON_BTN_MSG:"자동완성 켜기",AUTO_OFF_BTN_MSG:"자동완성 끄기",KEYWORD_ON_BTN_MGS:"검색어저장 켜기",KEYWORD_OFF_BTN_MGS:"검색어저장 끄기",$init:function(e,t,i,s,n,a){this._elView=e,this._welView=$Element(this._elView),this._elInput=t,this._elForm=i,this._sURL=s,this._bReverse="desc"==n,this._sOrder=n,this.htSmParam=a,this._oAgent=$Agent().navigator(),this._aData=[]},setAutocomplete:function(e){this._oAuto=e},setRecent:function(e){this._oRecent=e},setData:function(e){this._aData=e},getData:function(){return this._aData},paint:function(){this._wel||this._setElement();var e=[],t=this._oRecent.isUse();if(t)for(var i=this._aData.length-1;i>=0;i--)e[e.length]=this._applyTemplate(this._sRecentTemplate,this._aData[i]);this._welSelect=null,this._bReverse?this._welList.html(e.reverse().join("")):this._welList.html(e.join("")),this._oAuto.isUse()?this._welAcOff.text(this.AUTO_OFF_BTN_MSG):this._welAcOff.text(this.AUTO_ON_BTN_MSG),t?this._welKeywordOff.text(this.KEYWORD_OFF_BTN_MGS):this._welKeywordOff.text(this.KEYWORD_ON_BTN_MGS),this._welList.hide(),this._welNone.hide(),this._welNoti.hide(),this._welOff.hide(),e.length>0?(this._welList.show(),this._welNoti.show(),this._welDelAll.show()):(t?this._welNone.show():this._welOff.show(),this._welDelAll.hide())},add:function(e){var t=[].concat(this._aData);return this.has(e)?(this._request("set",e,e),t=this._refuseKeyword(t,e)):this._request("set",e),t.push({txt:e,rank:"1"}),this._aData=this._sortRankData(t),!0},remove:function(e){this._request("del",e);var t=[].concat(this._aData);return t=this._refuseKeyword(t,e),this._aData=this._sortRankData(t),!0},has:function(e){var t=$A(this._aData),i=!t.every(function(t,i,s){return t.txt!==e});return i},_refuseKeyword:function(e,t){var i=$A(e).filter(function(e,i,s){return e.txt!==t});return i.$value()},_sortRankData:function(e){for(var t=[],i=e.length,s=0;s<e.length;s++)t.push({txt:e[s].txt,rank:(i--).toString()});return t},showMaxLayer:function(){this._welMaxLayer.show();var e=this;window.setTimeout(function(){e._welMaxLayer.hide()},2e3)},_applyTemplate:function(e,t){for(var i in t)t.propertyIsEnumerable(i)&&(e=e.replace(new RegExp("@"+i+"@","g"),this._escapeHTML(t[i].replace(/\$/g,"$$$$"))));return e},_request:function(e,t,i){var s={type:"jsonp",key:"mykeyword",limit:this.MAX};if(!this._oAjax){var n=this;this._oAjax=new $Ajax(this._sURL,{type:"jsonp",method:"get",callbackid:"$3361",onerror:function(e){n._oRecent.onError()}})}s.cmd=e,("set"==e||"del"==e)&&(t&&(s.value=t),i&&(s.old_value=i)),this._oAjax.request(s)},onError:function(){this._wel||this._setElement(),this._aData=[],this._welNone.text("로그인 후 사용하실 수 있는 기능입니다."),this.paint()},_setElement:function(){var e=$$.getSingle("._keywords",this._elView);this._wel=$Element(e);var t=$$.getSingle("._my",this._elView);this._welMy=$Element(t),this._elList=$$.getSingle("ul",t),this._welList=$Element(this._elList),this._sRecentTemplate=this._welList.$value().innerHTML.replace(/^\s+|\s+$/g,""),this._welList.$value().innerHTML="",this._welNone=$Element($$.getSingle("._myNone",t)),this._welOff=$Element($$.getSingle("._offMsg",t)),this._welNoti=$Element($$.getSingle("._noti",e));var i=$$.getSingle("._maxLayer",e);this._welMaxLayer=$Element(i),this._elMaxLayerClose=$$.getSingle("._close",i);var s=$$.getSingle("._myBtnGroup",e);this._elDelAll=$$.getSingle("._delAll",s),this._welDelAll=$Element(this._elDelAll),this._elKeywordOff=$$.getSingle("._keywordOff",s),this._welKeywordOff=$Element(this._elKeywordOff),this._elAcOff=$$.getSingle("._acOff",s),this._welAcOff=$Element(this._elAcOff),this._welFunHelp=$Element($$.getSingle("._help2",e)),this._attachEvent()},_attachEvent:function(){var e=this;this._welList.delegate("mouseover","li",function(t){var i=jindo.$Element(t.element);e._welSelect&&e._welSelect.removeClass("atcmp_on"),i.addClass("atcmp_on"),e._welSelect=i}),this._welList.delegate("click","li",function(t){var i=jindo.$Element(t.element),s=i.last().text(),n=$Element(t._event.target?t._event.target:t._event.srcElement);n="a"==n.tag?n:$Element(n.query("! a")),n.hasClass("_myBtn")?(e._delete(s),e._clickLog("mydel",t.element,t)):(e._updateSmParam("my"),e._select(s)),t.stop(),e._elInput.focus()}),$Fn(function(t){t.stop(),e._deleteAll(),e._clickLog("myalldel",t.element,t),e._elInput.focus()}).attach(this._elDelAll,"click"),$Fn(function(t){var i=t.key(),s=9;s==i.keyCode&&i.shift&&(e._bReverse?(e._oAuto._oIM.setValue(""),e._oAuto._oIM._el.focus(),e._oAuto.hide()):(e._up(t),t.stop()))}).attach(this._elDelAll,"keydown"),$Fn(function(t){t.stop(),e._welMaxLayer.hide(),e._elInput.focus()}).attach(this._elMaxLayerClose,"click"),$Fn(function(t){e._welFunHelp.hide(),t.stop(),e._oRecent.isUse()?(e._oAuto.hide(),e._oRecent.unuse(),e._welKeywordOff.text(e.KEYWORD_ON_BTN_MGS),e._clickLog("saveoff",t.element,t)):(e._oRecent.use(),e._welKeywordOff.text(e.KEYWORD_OFF_BTN_MGS),e._clickLog("saveon",t.element,t)),e._elInput.focus()}).attach(this._elKeywordOff,"click"),$Fn(function(t){e._oRecent.isUse()&&e._welFunHelp.show()}).attach(this._elKeywordOff,"mouseover"),$Fn(function(t){e._welFunHelp.hide()}).attach(this._elKeywordOff,"mouseout"),$Fn(function(t){var i=t.key(),s=9;s==i.keyCode&&i.shift&&e._bReverse&&(e._oAuto._oIM.setValue(""),e._oAuto._oIM._el.focus(),e._oAuto.hide())}).attach(this._elKeywordOff,"keydown"),$Fn(function(t){e._welFunHelp.hide(),t.stop(),e._oAuto.isUse()?(e._oAuto.unuse(!1),e._oAuto.setButtonImage("unuseShow"),e._welAcOff.text(e.AUTO_ON_BTN_MSG),e._clickLog("sugoff",t.element,t)):(e._oAuto.use(),e._oAuto.setButtonImage("show"),e._welAcOff.text(e.AUTO_OFF_BTN_MSG),e._clickLog("sugon",t.element,t)),e._elInput.focus()}).attach(this._elAcOff,"click"),$Fn(function(t){var i=t.key(),s=9;s!=i.keyCode||s==i.keyCode&&i.shift||(e._bReverse?(e._oAuto._oIM._el.focus(),e._down()):(e._oAuto._oIM.setValue(""),e._oAuto.hide(),e._oAuto._oIM._el.focus()),t.stop())}).attach(this._elAcOff,"keydown"),$Fn(function(t){e._oAuto.isUse()&&e._welFunHelp.show()}).attach(this._elAcOff,"mouseenter"),$Fn(function(t){e._welFunHelp.hide()}).attach(this._elAcOff,"mouseout"),$Fn(this._onKeydown,this).attach(this._elInput,"keydown")},_delete:function(e){return this.remove(e),this.paint(),!0},_deleteAll:function(){return this._request("del"),this._aData=[],this.paint(),!0},_select:function(e){this._oRecent.preSubmit(),this._elForm.acr.disabled=!1,this._elForm.acr.value=this._welSelect.attr("data-rank"),this._elInput.value=e,this._elForm.submit()},_onKeydown:function(e){if(this._wel.visible()&&this._welMy.visible()){var t=e.key(),i=9;t.down||t.up||i==t.keyCode?(t.up||i==t.keyCode&&t.shift?this._up():this._down(),e.stop()):t.enter&&this._updateSmParam("my")}},_up:function(){var e=this._welSelect;e?(e.removeClass("atcmp_on"),e=this._getPrev(e)):e=this._getLast(),e?this._welNone!=e?(this._oAuto._oIM.setValue(e.last().text()),e.addClass("atcmp_on"),this._oAuto._oIM._el.focus()):this._elAcOff.focus():this._bReverse?(this._oAuto._oIM.setValue(""),this._elAcOff.focus()):(this._oAuto._oIM.setValue(""),this._oAuto.hide()),this._welSelect=e},_down:function(){var e=this._welSelect;e?(e.removeClass("atcmp_on"),e=this._getNext(e)):e=this._getFirst(),e?this._welNone!=e?(this._oAuto._oIM.setValue(e.last().text()),e.addClass("atcmp_on"),this._oAuto._oIM._el.focus()):this._elKeywordOff.focus():this._bReverse?(this._oAuto._oIM.setValue(""),this._oAuto._oIM._el.focus(),this._oAuto.hide()):(this._oAuto._oIM.setValue(""),this._elDelAll.focus()),this._welSelect=e},_getFirst:function(){return this._elList.childNodes.length?this._welList.first():this._welSelect?void 0:this._welNone},_getLast:function(){return this._elList.childNodes.length?this._welList.last():this._welSelect?void 0:this._welNone},_getNext:function(e){var t=this._welList;return e.isChildOf(t)?e.next():null},_getPrev:function(e){var t=this._welList;return e.isChildOf(t)?e.prev():null},_escapeHTML:function(e){var t={'"':"quot","&":"amp","<":"lt",">":"gt","'":"#39"},i=e.replace(/[<>&"']/g,function(e){return t[e]?"&"+t[e]+";":e});return i},_clickLog:function(e,t,i){var s="desc"===this._sOrder?smartSearchU:smartSearch;s.fireEvent("onClickLog",{name:e,element:t,event:i,order:this._sOrder})},_updateSmParam:function(e){var t=this.htSmParam[e],i=this._elForm;i&&(i.sm.value=t)}}),"undefined"==typeof nhn&&(nhn={}),nhn.Autocomplete=$Class({$init:function(e,t,i,s){this._oIM=e,this._oDM=t,this._oVM=i,this.option({cookieName:"autocomplete"}),this.option(s),this._bUse=this._initUse(),this._bUse||this._oVM.setButtonImage("unuse"),this._oIM._setAutocomplete(this),this._oIM._setDataManager(t),this._oIM._setViewManager(i),this._oDM._setAutocomplete(this),this._oDM._setViewManager(i),s&&this._oDM._setPlusManager(s.oPlus),this._oVM._setAutocomplete(this),this._oVM._setInputManager(e)},getViewManager:function(){return this._oVM},request:function(){this._oDM._request(this._oIM.getValue())},requestAnswerByQuery:function(e,t){this._oDM._requestAnswer(e,t)},doAction:function(){this._oIM.change()},show:function(){this._oVM.show()},hide:function(){this._oVM.hide()},use:function(){if(this.fireEvent("onUse")){var e=$Cookie().get(this.option("cookieName")),t="";if(e){var i=e.split("&");i.length>1&&(t="&"+i[1])}$Cookie().set(this.option("cookieName"),"use"+t,21900,"naver.com"),this._bUse=!0}},unuse:function(e){if(this.fireEvent("onUnuse")){(void 0==e||e)&&this.hide();var t=$Cookie().get(this.option("cookieName")),i="";if(t){var s=t.split("&");s.length>1&&(i="&"+s[1])}$Cookie().set(this.option("cookieName"),"unuse"+i,21900,"naver.com"),this._bUse=!1,this._oVM.setButtonImage("unuse")}},setUse:function(e){this._bUse=e,e||(this.hide(),this._oVM.setButtonImage("unuse"))},isUse:function(){return this._bUse},setButtonImage:function(e){this._oVM.setButtonImage(e)},_initUse:function(){var e=$Cookie().get(this.option("cookieName"));return!e||0==e.indexOf("use")}}).extend(jindo.Component),nhn.AcInputManager=$Class({$init:function(e){this._el=e,this._wel=$Element(this._el),this._oAgent=$Agent().navigator(),this._sValue=this._wel.text(),this._attachEvent()},getValue:function(){return this._wel.text()},setValue:function(e){this._sValue=e,this._wel.text(e)},selectValue:function(){this._wel.$value().select()},focus:function(){this._el.focus()},change:function(){this._oDM._request(this._wel.text())},_setAutocomplete:function(e){this._oAuto=e},_setDataManager:function(e){this._oDM=e},_setViewManager:function(e){this._oVM=e},_attachEvent:function(){$Fn(this._onFocus,this).attach($Element(this._el),"focus"),$Fn(this._onBlur,this).attach($Element(this._el),"blur"),$Fn(this._onKeyup,this).attach($Element(this._el),"keyup"),$Fn(this._onKeydown,this).attach($Element(this._el),"keydown"),$Fn(this._onClickDoc,this).attach(document,"mousedown"),this._oAgent.firefox&&(this._oItvID=window.setInterval($Fn(this._onWatch,this).bind(),200))},_onFocus:function(e){this._oAuto.fireEvent("onFocus"),this._oAgent.firefox||(this._oItvID&&window.clearInterval(this._oItvID),this._oItvID=window.setInterval($Fn(this._onWatch,this).bind(e),200))},_onBlur:function(e){this._oAuto.fireEvent("onBlur"),this._oAgent.firefox||this._oItvID&&(window.clearInterval(this._oItvID),this._oItvID=null)},_onKeyup:function(e){this._sValue!=this._wel.text()&&(this._sValue=this._wel.text(),this._onChange())},_onKeydown:function(e){var t=e.key(),i=9;if(t.down||t.up||i==t.keyCode){var s=!1;s=t.up||i==t.keyCode&&t.shift?this._oVM.up(e):this._oVM.down(e),s&&e.stop()}else t.enter?this._oVM.enter(e):t.right?this._oVM.right(e):t.left?this._oVM.left(e):t.ctrl&&this._oVM.functionWithCtrl(e)},_onWatch:function(e){this._sValue!=this._wel.text()&&(this._sValue=this._wel.text(),this._onChange())},_onChange:function(e){this._oDM._request(this._wel.text())},_onClickDoc:function(e){var t=e.element;if(t)if(t==this._el)this._oVM.isShow()?this._oVM.hide():(this._sValue=this._wel.text(),this._oDM._request(this._sValue)),e.stopBubble();else{var i=this._oVM._getWrappedElement();i.isParentOf(t)||this._oVM.hide()}}}),nhn.AcDataManager=$Class({$init:function(e,t,i,s){this._sURL=e,this._sType=t||"jsonp",this._sMethod=i||"get",this._htOption=s,this._oParam={q:null,q_enc:"UTF-8",st:100,frm:"test",r_format:"json",r_enc:"UTF-8",r_unicode:"0",t_koreng:"1"};for(var n in s)s.hasOwnProperty(n)&&(this._oParam[n]=s[n]);this._qeuryExp=this._oParam.q},_setAutocomplete:function(e){this._oAuto=e},_setViewManager:function(e){this._oVM=e},_setPlusManager:function(e){this._oPlus=e},_request:function(e){this._oPlus&&this._oPlus.isUse()?this._requestPlus(e):this._requestNormal(e)},_requestNormal:function(e){this._requestAjax(e,$Fn(function(e){this._oVM.paint(e),this._oPlus.paint&&this._oPlus.paint(e)},this).bind(),"_normal")},_requestPlus:function(e){this._requestAjax(e,$Fn(function(e){this._oVM.paint(e),this._oPlus.paint&&this._oPlus.paint(e)},this).bind(),"_plus")},_requestAnswer:function(e,t){this._requestAjax(e,t,"_answer")},_requestAjax:function(e,t,i){if(this._sMode=i,this._fCallback=t,this._sQuery=e.replace(/^(\s|　)+/g,""),!this._oAuto.isUse()||!this._sQuery)return this._oAjax&&this._oAjax.abort(),
void this._fCallback(this._remapData(null));var s=[e,i].join("");if(this._htCache){if(this._htCache[s]&&this._htCache.hasOwnProperty(s))return void this._fCallback(this._htCache[s])}else this._htCache={};if(!this._oAjax){var n=this;this._oAjax=new $Ajax(this._sURL,{type:this._sType,method:this._sMethod,callbackid:"$3361",onload:function(e){var t=e.json();n._handleJSON(n._sQuery,t,n._sMode)}})}this._qeuryExp?this._oParam.q=this._qeuryExp.replace("{query}",this._sQuery):this._oParam.q=this._sQuery,"_answer"===i?delete this._oParam.st:this._oParam.st=this._htOption.st,this._oParam.con="_plus"===i?1:0,this._oAjax.abort(),this._oAjax.request(this._oParam)},_handleJSON:function(e,t,i){try{var s=[e,i].join("");this._htCache[s]=this._remapData(t),this._fCallback(this._htCache[s])}catch(n){try{this._fCallback(this._remapData(null))}catch(n){}}},_remapData:function(e){var t=[],i=[],s=[],n=[],a="0",l=null,o="0",r="0";if(e){t=e.query,i=e.answer,s=e.intend,a=e.ext,l=e.noresult,o=e.partial_match,r=e.corrected_query;for(var h=0;h<e.items.length;h++){n[h]=[];var _=e.items[h];if(_.length>0)for(var c=0;c<_.length;c++)n[h][c]=1===_[c].length?_[c][0]:_[c]}}return{query:t,answer:i,intend:s,data:n,sExt:a,noresult:l,partial_match:o,corrected_query:r}}})},{}]},{},[1]),window.__atcmpCR=function(e,t,i,s,n,a){var l=__ghtAutoCompleteConfig.htAreaCode;if("undefined"!=typeof l[i]){var n=l[i][0],a=l[i][1];""!==n&&clickcr(t,n,a,"",e)}return!1},window.__ghtAutoCompleteConfig={bLogin:!!isLogin,sFromWhere:"nv",nStrMax:46,sCookie:"NaverSuggestUse",htApiUrl:{sMyKeyword:"https:"==window.location.protocol?"https://s.search.naver.com/n/mykeyword/search":"http://n.search.naver.com/mykeyword/search",sAcKeyword:("https:"==window.location.protocol?"https":"http")+"://ac.search.naver.com/nx/ac",sAcAnsType:"2"},ahtOption:[{sOrder:"asc",sFormId:"sform",sInputId:"query",sViewId:"autoFrame",sViewToggleButtonId:"nautocomplete"}],htAreaCode:{expand:["sch.expand","0"],close:["sch.close","0"],autokeyword:["",""],ansdirect:["sug.ansdirect",""],go1:["sug.go1",""],go2:["sug.go2",""],help:["sug.help",""],report:["sug.report",""],sugoff:["sug.sugoff",""],sugon:["sug.sugon",""],"plus.close":["sug.cxhide",""],"plus.login":["sug.cxlogin",""],"plus.detail":["sug.cxlink",""],"plus.help":["sug.cxhelp",""],"plus.use":["sug.cxon",""],"plus.unuse":["sug.cxoff",""],saveoff:["sug.saveoff",""],saveon:["sug.saveon",""],rtab:["sly.rtab",""],mytab:["sly.mytab",""],rx:["sly.rx",""],rdel:["sly.rdel",""],rdelend:["sly.rdelend",""],ralldel:["sly.ralldel",""],myalldel:["sly.myalldel",""],mydel:["sly.mydel",""],myadd:["sly.myadd",""]},htSmParam:{hty:"top_hty",hst:"top_sly.hst",my:"top_sly.my",prefix:"top_sug",top:"top_sug.pre",btm:"top_sug.pre",pat:"top_sug.pat",mbk:"top_sug.mbk",nlq:"top_sug.nlq",asgl:"top_sug.asgl",asga:"top_sug.asga",aslt:"top_sug.aslt",aspl:"top_sug.aspl",astm:"top_sug.astm",ast:"top_sug.ast",ase:"top_sug.ase",aswt:"top_sug.aswt",asiw:"top_sug.asiw",asis:"top_sug.asis"}},window.ac=new Object,ac.acHideAct=function(){"undefined"!=typeof smartSearch&&(smartSearch.hide(),smartSearch.fireEvent("onBlur"))};var MainFrame={isMinimeExpanded:!1,getJindoLibURL:function(){var e="https:"==window.location.protocol?"https":"http";return"/"!==jindoAll.charAt()?jindoAll:e+"://"+location.host+jindoAll},setMyExpandedLayerVisible:function(e){var t=$Element("minime");e?(t.css("background-color","#fff"),t.css("position","absolute"),t.css("height","428px"),$Element("ad_branding_hide").show(),$Element("veta_branding").hide(),$Element("da_brand").hide(),MainFrame.isMinimeExpanded=!0):(t.css("background-color",""),t.css("position","relative"),t.css("height","120px"),$Element("ad_branding_hide").hide(),$Element("veta_branding").show(),$Element("da_brand").show(),MainFrame.isMinimeExpanded=!1)},moveURL:function(e,t,i){return t?void window.open(e,t,i):void(location.href=e)},setNavermeNotiCnt:function(e){}},LoginCheck={init:function(){this.lockId="",this.nextLockId=""},nvLoginCheck:function(e,t){try{isLogin||(0==t?naver&&naver.main&&naver.main.FlashLoginArea&&(naver.main.FlashLoginArea.setActivate(!0),naver.main.FlashLoginArea.show()):naver&&naver.main&&naver.main.FlashLoginArea&&(naver.main.FlashLoginArea.hide(),naver.main.FlashLoginArea.setActivate(!1)))}catch(i){}}};LoginCheck.init(),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.CookieEditor=function(){function e(e){var t,i=e.key,s=e.value,n=e.type,a=e.expireDay||0;s&&n&&"raw"!==n?"array"===n?t=s.join(";"):"hash"===n&&(t=$Json(s).toString()):t=s,$Cookie().set(i,t,a)}function t(e){var t,i=e.key,s=e.type,n=$Cookie().get(i);return n&&s&&"raw"!==s?"array"===s?t=n.split(";"):"hash"===s&&(t=$Json(n).toObject()):t=n,t}function i(e){var t=e.key;$Cookie().remove(t)}return{set:e,get:t,remove:i}}(),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.ImageBinder=function(){function e(e){if(e){var t=e.queryAll("img[data-src]");for(var i in t){var s=t[i],n=s.attr("data-src");n&&(s.attr("src",n),s.attr("data-src",null))}}}return{update:e}}(),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.EllipsisText=function(){function e(){var e=$$("[data-max-bytes]");e.length<=0||$A(e).forEach(function(e){var t=$Element(e),i=parseInt(t.attr("data-max-bytes"),10),s=$S(t.html()),n=s.bytes();if(n>i){var a=s.bytes(i-3)+"...";t.html(a)}})}return{update:e}}();try{"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.nelo=function(){function e(e){i=!!e}function t(e){i&&(e.projectName="pc_main_front",e.projectVersion="1.0.0",e.body=e.body||"-",e.nnb=$Cookie().get("NNB")||"-",e.ua=navigator.userAgent||"-",e.url=location.href||"-",e.host=svr||"-",$Ajax("/nelo",{method:"post",postBody:"true",timeout:5}).request(e))}var i=!1;return $Element(window).attach("error",function(e){var i=e.$value()||{},s={};s.body=i.message||"-",s.lineno=i.lineno||-1,s.colno=i.colno||-1,s.filename=i.filename||"-",t(s)}),{setEnable:e,send:t}}()}catch(e){}"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.PageRefresh=function(){function e(){naver.main.CookieEditor.remove({key:a}),s(),i(6e5),t()}function t(){$Fn(function(e){i(18e5);var t=null;try{if(t=e.key(),t&&(t.alt||t.ctrl||t.shift||t.meta))return}catch(e){return}if(t){var n=$Element(document.activeElement);n&&"query"!==n.attr("id")&&"id"!==n.attr("id")&&"pw"!==n.attr("id")&&(n.hasClass("ts_s_input")||$A(l).indexOf(t.keyCode)>0&&("query"!=n.attr("id")&&($("query").value=""),scrollTo(0,0),s()))}}).attach(document,"keydown")}function i(e){clearTimeout(n),n=setTimeout(function(){naver.main.CookieEditor.set({key:a,value:"1"}),location.replace(self.location)},e)}function s(){var e=$Agent().os();e.iphone||e.ipad||e.android||setTimeout(function(){$("query").focus()},100)}var n,a="PM_CK_nrefreshx",l=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90];return{init:e,start:i}}(),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.Log=function(){function e(){t(),i(h,n())}function t(){$Element("PM_ID_ct").delegate("click","[data-clk]",function(e){var t=e.element,i=$Element(t),s=i.attr("data-clk"),n=i.attr("data-gdid"),a=i.attr("data-nclick");if("map.naverservice"==s&&(n=i.attr("name")),n=null==n?"":n,(i.hasClass("PM_CL_btnThemePrev")||i.hasClass("PM_CL_btnThemeNext"))&&(a=$Element($$.getSingle(".PM_CL_themeItem[aria-selected='true']")).attr("data-nclick")),null!==a&&a.length>0?(a=encodeURIComponent(JSON.stringify({lk:{n:""+a}})),clickcr(t,s,n,"","",0,a)):clickcr(t,s,n,"",""),_.test(s)){var l=naver.main.ThemecastNavi.getCurrentPanelCode();l&&naver.main.Panel.setSelectedPanel(l)}naver.main.PageRefresh.start(6e5)})}function i(e,t){t=t?t:{},t.act=e?e:h;var i=new Image;i.src=r+s("l",t),i.onload=function(){i.onload=null}}function s(e,t){var i="";if(t){i+=e,i+="?SOU&";for(var s in t)i+=s+"="+encodeURIComponent(t[s])+"&"}var n=(new Date).getTime();return i+="ts="+n,"undefined"!=typeof svr&&(i+="&svr="+svr),i+="&EOU"}function n(){var e={};return e.menuSetting=null==naver.main.Panel.getSubPanelList()?"OFF":"ON",e.menuOnList=a(naver.main.Panel.getPanelList()),e.menuOffList=a("ON"==e.menuSetting?naver.main.Panel.getUnsubPanelList():[]),e.svcOnList=a(naver.main.ServiceNavi.getServiceList()),e}function a(e){return null==e||e.length<=0?"":e.join(";")}var l="l.www.naver.com",o="https:"==window.location.protocol?"https":"http",r=o+"://"+l+"/",h="PC.lcs",_=/tcc_(.*)\.(.*)/;return{init:e}}(),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.AutoRolling=$Class({$init:function(e,t){this._defineVars(e,t),this._validate()&&(this._initDraw(),this._defineComponent(),this._attach(),this._start(this._nRollingTime))},_defineVars:function(e,t){this._elBase=e,this._oRolling,this._nTimer,this._nDuration=t&&!isNaN(t.duration)?t.duration:300,this._nRollingTime=t&&!isNaN(t.rollingTime)?t.rollingTime:3e3,this._nPrevIndex,this._bActivate=!0},_validate:function(){return $Element(this._elBase).first().child().length>1},_initDraw:function(){var e=$Element(this._elBase).first().first();e.parent().appendHTML(e.toString())},_defineComponent:function(){this._oRolling=new jindo.Rolling(this._elBase,{nDuration:this._nDuration,sDirection:"vertical"})},_attach:function(){$Fn(this._onMouseIn,this).attach(this._elBase,"mouseover"),$Fn(this._onMouseOut,this).attach(this._elBase,"mouseleave"),$Fn(this._onFocusin,this).attach(this._elBase,"focusin"),$Fn(this._onFocusout,this).attach(this._elBase,"focusout")},_start:function(e){var t=this._nRollingTime,i=this;this._stop(),this._oRolling.getItems().length-1===this._nPrevIndex?(this._updateDuration(0),this._oRolling.moveTo(0),this._nTimer=setTimeout(function(){i._updateDuration(i._nDuration),i._oRolling.moveBy(1),i._start(t),i._nPrevIndex=i._oRolling.getIndex()},50)):(this._updateDuration(this._nDuration),this._nTimer=setTimeout(function(){i._oRolling.moveBy(1),i._start(t),i._nPrevIndex=i._oRolling.getIndex()},e))},start:function(e){this._stop(),this._start(this._nRollingTime)},_updateDuration:function(e){this._oRolling.option({nDuration:e})},_stop:function(){clearInterval(this._nTimer)},_onMouseIn:function(e){this._bActivate&&(this._stop(),this.fireEvent("stop",{nIndex:this._getCurrentIndex(),bisMouseFocus:!0}))},_onMouseOut:function(e){this._bActivate&&this._start(this._nRollingTime)},_onFocusin:function(e){this._bActivate&&(this._stop(),this.fireEvent("stop",{nIndex:this._getCurrentIndex()}))},_onFocusout:function(e){this._bActivate&&this._start(this._nRollingTime)},_getCurrentIndex:function(){var e=this._oRolling.getItems().length-1,t=this._oRolling.getIndex();return t>=e&&(t=e-1),t},deactivate:function(){this._bActivate=!1},activate:function(){this._bActivate=!0}}).extend(jindo.Component),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.ServiceNavi=function(){function e(){E=$Element("PM_ID_ct"),A=$Element("PM_ID_btnServiceMore"),A.attach("click",h)}function t(e){return!(e.length<O)&&(!(e.length>F)&&(naver.main.CookieEditor.set({key:B,value:e,type:"array",expireDay:D}),!0))}function i(){var e=naver.main.CookieEditor.get({key:B,type:"array"});return null==e||!e.length||e.length<=0?[]:e}function s(){naver.main.CookieEditor.remove({key:B})}function n(){for(var e=$ElementList("a[name]",S),t=0;t<e.length();t++){var i=e.get(t);T.push({id:i.attr("name"),name:i.text()})}}function a(e){for(var t=0;t<T.length();t++)if(T.get(t).id==e)return T.get(t);return{}}function l(){var e=$Element("PM_ID_serviceEditArea"),t=$Element("PM_ID_btnArea1"),i=$Element("PM_ID_btnArea2");t.delegate("click",".PM_CL_btnServiceEdit",u),t.delegate("click",".PM_CL_btnServiceMoreClose",h),i.delegate("click",".PM_CL_btnServiceEditReset",v),i.delegate("click",".PM_CL_btnServiceEditCancel",w),i.delegate("click",".PM_CL_btnServiceEditOk",y),i.delegate("click",".PM_CL_btnServiceEditClose",h),e.delegate("click",".PM_CL_btnServiceCheck",k),$Element("PM_ID_serviceMoreArea").delegate("click",".PM_CL_serviceDimm",h),$Fn(o,this).attach($$.getSingle("#PM_ID_btnServiceMore"),"keydown"),$Fn(r,this).attach($$.getSingle("a",$("PM_ID_serviceAllArea")),"keydown")}function o(e){A.hasClass("an_fold")&&9==e.key().keyCode&&0==e.key().shift&&(e.stopDefault(),$$.getSingle("a",$("PM_ID_serviceAllArea")).focus())}function r(e){A.hasClass("an_fold")&&e.key().shift&&9==e.key().keyCode&&(e.stopDefault(),$$.getSingle("#PM_ID_btnServiceMore").focus())}function h(e){e.stopDefault(),A.hasClass("an_fold")?(A.query(".blind").text("더보기"),b(!1),A.removeClass("an_fold"),S.hide(),naver.main.FlashLoginArea.show(),$$.getSingle("#PM_ID_btnServiceMore").focus()):(A.query(".blind").text("접기"),c(),naver.main.FlashLoginArea.hide())}function _(){var e=$Element($$.getSingle(".PM_CL_gnbDefault")),t=$Element($$.getSingle(".PM_CL_gnbEdit")),i="",s="";$A(N).forEach(function(e){i+=V.process({aList:e}),s+=R.process({aList:e})}),e.html(i),t.html(s)}function c(){return x?(b(!1),A.addClass("an_fold"),void S.show()):void $Ajax("/sub/service_edit.html",{timeout:3,method:"get",onload:function(e){var t=e.text(),i=$Element($$.getSingle("div.container[role=main]",E));i.appendHTML(t),welNavi=$Element("PM_ID_serviceNavi"),S=$Element("PM_ID_serviceMoreArea"),L=$Element("PM_ID_serviceNaviEmpty"),_(),n(),A.addClass("an_fold"),S.show(),b(!1),l(),x=!0},onerror:function(){JEagleEyeClient.sendError("[service_edit] ajax fail(onerror)")},ontimeout:function(){JEagleEyeClient.sendError("[service_edit] ajax fail(ontimeout)")}}).request()}function u(e){e.stopDefault(),b(!0);for(var t=i(),s=0;s<L.child().length;s++)p(s,null);for(var s=0;s<t.length;s++)d(t[s],!0);0==t.length&&L.child()[0].addClass("an_pointer")}function d(e,t){var i=$Element($$.getSingle("li.PM_CL_btnServiceCheck>span>input[id=nsvc_"+e+"]")),s=P(),n=0;if(null!=i&&(i=i.prev(),!i.hasClass("radio-disabled"))){if(t){if(s.length()==F)return void alert("최대"+F+"개까지 설정할 수 있습니다.");m(e),p(s.length(),a(e)),n=s.length()+1}else{g(e);for(var l=s.refuse(e).$value(),o=0;o<L.child().length;o++)o<l.length?p(o,a(l[o])):p(o,null);n=l.length}n>=0&&n<5&&L.child()[n].addClass("an_pointer")}}function m(e){for(var t=$ElementList("li.PM_CL_btnServiceCheck>span>input[id=nsvc_"+e+"]"),i=0;i<t.length();i++)t.get(i).prev().addClass("radio-checked")}function g(e){for(var t=$ElementList("li.PM_CL_btnServiceCheck>span>input[id=nsvc_"+e+"]"),i=0;i<t.length();i++)t.get(i).prev().removeClass("radio-checked")}function f(e){var t=i();if(e.length()!=t.length)return!0;for(var s=0;s<t.length;s++)if(t[s]!=e.get(s))return!0;return!1}function p(e,t){var i,s=L.child()[e];i=null==t?M:I.process(t),s.html(i),s.removeClass("an_pointer")}function v(e){e.stopDefault(),alert("초기설정으로 돌아갑니다."),s(),C(),h(e)}function w(e){e.stopDefault(),b(!1)}function b(e){$Element($$.getSingle(".PM_CL_btnServiceEditOk")).removeClass("ss_btn_abled"),e?($Element("PM_ID_serviceAllArea").hide(),$Element("PM_ID_serviceEditArea").show(),welNavi.hide(),L.show(),$ElementList(".PM_CL_btnServiceCheck>span>span.radio-mark.radio-checked").removeClass("radio-checked")):($Element("PM_ID_serviceAllArea").show(),$Element("PM_ID_serviceEditArea").hide(),welNavi.show(),L.hide())}function y(e){e.stopDefault();var i=P();if(0==i.length())alert("선택된 메뉴가 없습니다. 초기설정으로 돌아갑니다."),s();else{if(i.length()<O)return alert("최소 "+O+"개 이상 설정해야합니다."),void clickcr(e.element,"edt.alr","","","");t(i.$value())}C(),h(e)}function C(){$Ajax("/nvfavorites",{timeout:3,method:"get",onload:function(e){var t=e.text();0==i().length?welNavi.removeClass("an_custom"):welNavi.addClass("an_custom"),welNavi.html(t)},onerror:function(){JEagleEyeClient.sendError("[THEMECAST] ajax fail(onerror) - url : "+sUrl)},ontimeout:function(){JEagleEyeClient.sendError("[THEMECAST] ajax fail(ontimeout) - url : "+sUrl)}}).request()}function k(e){e.stopDefault(),clickcr(e.element,"edt.check","","","");var t=$Element($$.getSingle("input",e.element));if(t){var i=t.attr("id"),s=i.split("_")[1];P().indexOf(s)<0?d(s,!0):d(s,!1),f(P())?$Element($$.getSingle(".PM_CL_btnServiceEditOk")).addClass("ss_btn_abled"):$Element($$.getSingle(".PM_CL_btnServiceEditOk")).removeClass("ss_btn_abled")}}function P(){for(var e=$A([]),t=L.child(),i=0;i<t.length;i++){var s=$Element($$.getSingle("span",t[i])).attr("data-id");s&&e.push(s)}return e}var E,A,S,L,I=$Template("<span data-id='{=id}' class='an_a mn_{=id}'><span class='an_icon'></span><span class='an_txt'>{=name}</span></span>"),M="<span class='an_empty'></span>",T=$A([]),x=!1,O=0,F=5,B="PM_CK_service",D=3650,N=[[{groupTitle:"ㄱ-ㄷ",groupMoreBtn:null,groupListClass:"ss_sl",groupItemClass:"ss_sa",groupItem:[{title:"가계부",editable:"Y",iconClass:"",badgeClass:"",name:"moneybook",url:"http://moneybook.naver.com/",clicklog:"map.moneybook"},{title:"그라폴리오",editable:"Y",iconClass:"",badgeClass:"",name:"grafolio",url:"https://www.grafolio.com/",clicklog:"map.grafolio"},{title:"날씨",editable:"Y",iconClass:"",badgeClass:"",name:"weather",url:"http://weather.naver.com/",clicklog:"map.weather"},{title:"네이버 예약",editable:"Y",iconClass:"",badgeClass:"",name:"booking",url:"http://booking.naver.com/booked/list",clicklog:"map.booking"},{title:"네이버 클라우드",editable:"Y",iconClass:"",badgeClass:"",name:"ndrive",url:"http://cloud.naver.com/",clicklog:"map.ndrive"},{title:"네이버 포스트",editable:"Y",iconClass:"",badgeClass:"",name:"post",url:"http://post.naver.com/",clicklog:"map.post"},{title:"뉴스",editable:"Y",iconClass:"",badgeClass:"",name:"news",url:"http://news.naver.com/",clicklog:"map.news"},{title:"데이터랩",editable:"Y",iconClass:"",badgeClass:"",name:"datalab",url:"http://datalab.naver.com/",clicklog:"map.datalab"}]}],[{groupTitle:"ㄹ-ㅅ",groupMoreBtn:null,groupListClass:"ss_sl",groupItemClass:"ss_sa",groupItem:[{title:"라인",editable:"Y",iconClass:"",badgeClass:"",name:"line",url:"http://line.me/",clicklog:"map.line"},{title:"만화/웹툰",editable:"Y",iconClass:"",badgeClass:"",name:"comic",url:"http://comic.naver.com/",clicklog:"map.webtoon"},{title:"메모",editable:"Y",iconClass:"",badgeClass:"",name:"memo",url:"http://memo.naver.com/",clicklog:"map.meno"},{title:"뮤직",editable:"Y",iconClass:"",badgeClass:"",name:"music",url:"http://music.naver.com",clicklog:"map.music"},{title:"밴드",editable:"Y",iconClass:"",badgeClass:"",name:"band",url:"http://band.us/",clicklog:"map.band"},{title:"부동산",editable:"Y",iconClass:"",badgeClass:"",name:"land",url:"http://land.naver.com/",clicklog:"map.land"},{title:"북마크",editable:"Y",iconClass:"",badgeClass:"",name:"bookmark",url:"http://bookmark.naver.com/",clicklog:"map.bookmark"},{title:"소프트웨어",editable:"Y",iconClass:"",badgeClass:"",name:"software",url:"http://software.naver.com/main.nhn",clicklog:"map.software"},{title:"스포츠",editable:"Y",iconClass:"",badgeClass:"",name:"sports",url:"http://sports.news.naver.com/",clicklog:"map.sports"},{title:"시리즈",editable:"Y",iconClass:"",badgeClass:"",name:"nstore",url:"http://series.naver.com",clicklog:"map.nstore"}]}],[{groupTitle:"ㅇ-ㅈ",groupMoreBtn:null,groupListClass:"ss_sl",groupItemClass:"ss_sa",groupItem:[{title:"알림",editable:"Y",iconClass:"",badgeClass:"",name:"me",url:"https://noti.naver.com/",clicklog:"map.notice"},{title:"영화",editable:"Y",iconClass:"",badgeClass:"",name:"movie",url:"http://movie.naver.com/",clicklog:"map.movie"},{title:"오디오클립",editable:"Y",iconClass:"",badgeClass:"",name:"audioclip",url:"http://audioclip.naver.com/",clicklog:"map.audioclip"},{title:"오피스",editable:"Y",iconClass:"",badgeClass:"",name:"office",url:"http://office.naver.com/",clicklog:"map.office"},{title:"웹소설",editable:"Y",iconClass:"",badgeClass:"",name:"webnovel",url:"http://novel.naver.com/webnovel/weekday.nhn",clicklog:"map.webnovel"},{title:"자동차",editable:"Y",iconClass:"",badgeClass:"",name:"auto",url:"http://auto.naver.com/",clicklog:"map.auto"},{title:"주소록",editable:"Y",iconClass:"",badgeClass:"",name:"contact",url:"http://contact.naver.com/",clicklog:"map.contact"},{title:"증권(금융)",editable:"Y",iconClass:"",badgeClass:"",name:"stock",url:"http://finance.naver.com/",clicklog:"map.stock"},{title:"지도",editable:"Y",iconClass:"",badgeClass:"",name:"map",url:"https://map.naver.com/",clicklog:"map.map"},{title:"지식백과",editable:"Y",iconClass:"",badgeClass:"",name:"terms",url:"http://terms.naver.com/",clicklog:"map.terms"}]}],[{groupTitle:"ㅊ-ㅎ",groupMoreBtn:null,groupListClass:"ss_sl",groupItemClass:"ss_sa",groupItem:[{title:"책",editable:"Y",iconClass:"",badgeClass:"",name:"book",url:"http://book.naver.com/",clicklog:"map.book"},{title:"캘린더",editable:"Y",iconClass:"",badgeClass:"",name:"calendar",url:"http://calendar.naver.com/",clicklog:"map.calendar"},{title:"폴라",editable:"Y",iconClass:"",badgeClass:"",name:"pholar",url:"http://www.pholar.co/info/pc",clicklog:"map.pholar"},{title:"항공권",editable:"Y",iconClass:"",badgeClass:"",name:"airticket",url:"http://store.naver.com/flights/",clicklog:"map.airticket"},{title:"호텔",editable:"Y",iconClass:"",badgeClass:"",name:"hotel",url:"http://store.naver.com/hotels/main",clicklog:"map.hotel"}]}],[{groupTitle:"A-Z",groupMoreBtn:null,groupListClass:"ss_sl",groupItemClass:"ss_sa",groupItem:[{title:"modoo![모두]",editable:"Y",iconClass:"",badgeClass:"",name:"modoo",url:"http://www.modoo.at/",clicklog:"map.modoo"},{title:"MY구독",editable:"Y",iconClass:"",badgeClass:"",name:"myfeed",url:"http://me.naver.com/tab/news.nhn",clicklog:"map.mysub"},{title:"PC게임",editable:"Y",iconClass:"",badgeClass:"",name:"ngame",url:"http://game.naver.com/",clicklog:"map.ngame"},{title:"TV연예",editable:"Y",iconClass:"",badgeClass:"",name:"entertain",url:"http://entertain.naver.com/home",clicklog:"map.entertain"},{title:"V LIVE",editable:"Y",iconClass:"",badgeClass:"",name:"v",url:"http://www.vlive.tv/",clicklog:"map.v"}]}],[{groupTitle:"사전",groupMoreBtn:{title:"사전 더보기",badgeClass:"",name:"dicall",url:"http://dic.naver.com/",clicklog:"map."},groupListClass:"ss_sl",groupItemClass:"ss_sa",groupItem:[{title:"사전",editable:"Y",iconClass:"",badgeClass:"",name:"dic",url:"http://dic.naver.com/",clicklog:"map.dic"},{title:"국어사전",editable:"Y",iconClass:"",badgeClass:"",name:"krdic",url:"http://krdic.naver.com/",clicklog:"map.krdic"},{title:"영어/영영사전",editable:"Y",iconClass:"",badgeClass:"",name:"endic",url:"http://endic.naver.com/",clicklog:"map.endic"},{title:"일본어사전",editable:"Y",iconClass:"",badgeClass:"",name:"jpdic",url:"http://jpdic.naver.com/",clicklog:"map.jpdic"},{title:"중국어사전",editable:"Y",iconClass:"",badgeClass:"",name:"cndic",url:"https://zh.dict.naver.com",clicklog:"map.cndic"},{title:"한자사전",editable:"Y",iconClass:"",badgeClass:"",name:"hanja",url:"http://hanja.naver.com/",clicklog:"map.hanja"}]}],[{groupTitle:"신규 서비스",groupMoreBtn:null,groupListClass:"ss_pl",groupItemClass:"ss_pa",groupItem:[{title:"VIBE",editable:"Y",iconClass:"ico_vibe",badgeClass:"",name:"vibe",url:"https://vibe.naver.com/",clicklog:"map.vibe"},{title:"네이버 알파",editable:"Y",iconClass:"ico_naveralpha",badgeClass:"",name:"naveralpha",url:"http://alpha.naver.com/",clicklog:"map.naveralpha"},{title:"타르트",editable:"Y",iconClass:"ico_tarte",badgeClass:"",name:"tarte",url:"https://alpha.naver.com/experiment/tarte",clicklog:"map.tarte"},{title:"스마트보드",editable:"Y",iconClass:"ico_smartboard",badgeClass:"",name:"smartboard",url:"http://keyboard.naver.com/",clicklog:"map.smartboard"},{title:"학술정보",editable:"Y",iconClass:"ico_academic",badgeClass:"",name:"academic",url:"http://academic.naver.com/",clicklog:"map.academic"},{title:"네이버 클로바",editable:"Y",iconClass:"ico_clova",badgeClass:"",name:"clova",url:"https://clova.ai/ko",clicklog:"map.clova"},{title:"웨일",editable:"Y",iconClass:"ico_whale",badgeClass:"",name:"whale",url:"http://whale.naver.com/",clicklog:"map.whale"},{title:"파파고",editable:"Y",iconClass:"ico_papago",badgeClass:"",name:"papago",url:"https://papago.naver.com/",clicklog:"map.papago"}]}]],V=$Template(['<div class="ss_svccol">',"{for num:item in aList}",'<h3 class="ss_stit">{=item.groupTitle}</h3>','<ul class="{=item.groupListClass}">',"{for num:groupItem in item.groupItem}",'<li class="ss_sitem">','<a href="{=groupItem.url}" name="{=groupItem.name}" class="{=item.groupItemClass}" data-clk="{=groupItem.clicklog}">','{if groupItem.iconClass != ""}','<span class="{=groupItem.iconClass}"></span>',"{/if}","{=groupItem.title}","</a>",'{if groupItem.badgeClass == "n"}','<span class="n" title="신규">신규</span>',"{/if}","</li>","{/for}","{if item.groupMoreBtn != null}",'<li class="ss_sitem">','<a href="{=item.groupMoreBtn.url}" name="{=item.groupMoreBtn.name}" class="ss_sa svc_more" data-clk="{=item.groupMoreBtn.clicklog}">','{=item.groupMoreBtn.title}<span class="svc_more_arrow"></span>',"</a>",'{if item.groupMoreBtn.badgeClass == "n"}','<span class="n" title="신규">신규</span>',"{/if}","</li>","{/if}","</ul>","{/for}","</div>"].join("")),R=$Template(['<div class="ss_svccol">',"{for num:item in aList}",'<h3 class="ss_stit">{=item.groupTitle}</h3>','<ul class="{=item.groupListClass}">',"{for num:groupItem in item.groupItem}","{if groupItem.editable}",'<li class="PM_CL_btnServiceCheck ss_sitem">','<span class="svc_radio radio-applied">','<span class="radio-mark{if groupItem.editable == "N"} radio-disabled{/if}"></span>','<input type="checkbox" id="nsvc_{=groupItem.name}" name="selmenu" class="input_check" value="">',"</span>",'<label for="nsvc_{=groupItem.name}">','{if groupItem.iconClass != ""}<span class="{=groupItem.iconClass}"></span>{/if}',"{=groupItem.title}","</label>","</li>","{else}",'<li class="ss_sitem">','<span class="ss_sa">{=groupItem.title}</span>',"</li>","{/if}","{/for}","</ul>","{/for}","</div>"].join("")),I=$Template("<span data-id='{=id}' class='an_a mn_{=id}'><span class='an_icon'></span><span class='an_txt'>{=name}</span></span>");return{init:e,getServiceList:i}}(),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.FlashLoginArea=function(){function e(){n&&s&&s.show()}function t(){n&&s&&s.hide()}function i(e){n=e}var s=$Element("flasharea"),n=!0;return{show:e,hide:t,setActivate:i}}(),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.CenterBanner=function(){function e(){n=$Element("promotion1"),n&&(a=n.attr("data-cookie"),$Element("promotion1_link").attach("click",t),$Element("promotion1_close").attach("click",i),naver.main.CookieEditor.get({key:a,type:"raw"})||n.show())}function t(e){s(1)}function i(e){e.stopDefault(),s(6),n.hide()}function s(e){naver.main.CookieEditor.set({key:a,value:"1",type:"raw",expireDay:e})}var n,a;return{init:e}}(),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.Panel=function(){function e(e){(!e||!e.length||e.length<=0)&&JEagleEyeClient.sendError("invalid panelListJson : "+panelListJson),k=e;for(var i=0;i<k.length;i++)T.push(k[i].code),k[i].isNewPanel=m(k[i].code);t(),$(),C(),naver.main.CookieEditor.remove({key:"PM_CK_unmarkNewBedgeEditButton"}),naver.main.CookieEditor.remove({key:"PM_CK_unmarkNewBedgePanel"})}function t(){var e=a(),t=[];if(null!=e&&e.length&&!(e.length<=0)){for(var s=0;s<e.length;s++){var l=e[s];null!=c(l)&&t.push(l)}return t.length<=0?void n():t.length<e.length?void i(t):void 0}}function i(e){if(e.length<=P)return void n();for(var t=0;t<e.length;t++)if($A(T).indexOf(e[t])<0)return!1;return naver.main.CookieEditor.set({key:E,value:e,type:"array",expireDay:I}),_(),!0}function s(){var e=a();return null==e||!e.length||e.length<=0?T:e}function n(){naver.main.CookieEditor.remove({key:E})}function a(){return naver.main.CookieEditor.get({key:E,type:"array"})}function l(){var e=a();if(null==e)return T;for(var t=[],i=0;i<T.length;i++)$A(e).indexOf(T[i])<0&&t.push(T[i]);return t}function o(e){if($A(T).indexOf(e)<0)return!1;var t=s();return!($A(t).indexOf(e)>=0)&&(t.push(e),i(t))}function r(e){var t=c(e);return null!=t&&(naver.main.CookieEditor.set({key:A,value:t.code,type:"raw",expireDay:M}),!0)}function h(){var e=naver.main.CookieEditor.get({key:A,type:"raw"});return null!=c(e)?e:null}function _(){return naver.main.CookieEditor.remove({key:A}),!0}function c(e){for(var t=0;t<k.length;t++)if(k[t].code==e)return k[t];return null}function u(){return T}function d(){return $A(k).filter(function(e){return m(e.code)})}function m(e){return g(e)<90}function g(e){var t=c(e);if(t&&t.openDate){try{var i=$Date(t.openDate)}catch(s){return}return i.compare($Date())/864e5}}function f(e){var t;e?(t=$A(),$A(e).forEach(function(e){t.push($Jindo.isString(e)?c(e):e)})):t=$A(k);var i=t.get(0);if(i)return t.forEach(function(e){e.openDate>i.openDate&&(i=e)}).get(0),i.openDate?i:null}function p(){return $A(naver.main.CookieEditor.get({key:L,type:"array"})||[])}function v(e){if(m(e)){var t=$A(p());t.indexOf(e)>=0||(t.push(e),naver.main.CookieEditor.set({key:L,value:t.$value(),type:"array",expireDay:parseInt(90-g(f(t).code))}))}}function w(){var e=$A(),t=p();return d().filter(function(e){return t.indexOf(e.code)==-1}).forEach(function(t){e.push(t.code)}),e}function $(){var e=f();if(e){var t=parseInt(g(e.code));y()&&t<=7||t>7&&b()}}function b(){var e=f();e?naver.main.CookieEditor.set({key:S,value:e.openDate,type:"raw",expireDay:parseInt(90-g(e.code))}):naver.main.CookieEditor.remove({key:S})}function y(){return naver.main.CookieEditor.get({key:S,type:"raw"})}function C(){var e=p(),t=e.filter(function(e){return m(e)});t.length()>0?naver.main.CookieEditor.set({key:L,value:t.$value(),type:"array",expireDay:parseInt(90-g(f(t).code))}):naver.main.CookieEditor.remove({key:L})}var k,P=0,E="PM_CK_panel",A="PM_CK_selectedPanel",S="PM_CK_latestPanelDate",L="PM_CK_readNewPanel",I=3650,M=1/24/60*10,T=[];return{init:e,setPanelList:i,getPanelList:s,getSubPanelList:a,getUnsubPanelList:l,getAllPanelList:u,clearPanelList:n,addPanel:o,setSelectedPanel:r,getSelectedPanel:h,clearSelectedPanel:_,findPanel:c,getUnreadNewPanelList:w,addReadNewPanel:v,getLatestOpenPanel:f,updateMyLatestPanelDate:b,getMyLatestPanelDate:y,compareOpenDate:g}}(),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.SchoolFixed=function(){function e(e){try{if(Number(e)>13)return}catch(s){return}null==naver.main.CookieEditor.get({key:t,type:i})&&"SCHOOL"==naver.main.ThemecastNavi.getCurrentPanelCode()&&naver.main.CookieEditor.set({key:t,value:"1",type:i,expireDay:1})}var t="PM_CK_sclFixed",i="raw";return{init:e}}(),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.ThemecastNavi=function(){function e(e){W=$Element("PM_ID_ct"),welThemArea=$Element("PM_ID_themeEdit"),G=$Element("PM_ID_themelist"),J=$Element($$.getSingle("ul",G)),te=J.html(),X=$Element("PM_ID_themecastNavi"),Q=$Element("PM_ID_themecastBody"),z=$Element($$.getSingle(".PM_CL_btnThemeEditOk")),welFlickContainer=$Element($$.getSingle(".flick-container",Q)),ie=$Template("PM_ID_themeNaviItem"),se=$Template("PM_ID_themeNaviEmptyItem"),ne=$Template("PM_ID_themeSubscribePopup"),oAdContent=new naver.main.adContent({sAdList:e.sAdList}),ae=e.bFlick,u(!0),ae&&naver.main.Panel.getPanelList().length>1&&n(),s(),he=!0,v(Q)}function t(){for(var e=15,t=0;t<ee.length();t++)e+=ee.get(t).width()+11;return e}function i(){for(var e=0;e<ee.length();e++)if("true"==$Element(ee.get(e)).attr("aria-selected"))return e;return 0}function s(){var e=$Element("themecast");e.delegate("click",".PM_CL_btnThemeNext",h),e.delegate("click",".PM_CL_btnThemePrev",_),e.delegate("click",".PM_CL_themeItem",L),e.delegate("click",".PM_CL_btnThemeEdit",w),e.delegate("click",".PM_CL_themeItem",L),e.delegate("click",".PM_CL_themeEditItem",P),e.delegate("click",".PM_CL_btnThemeEditCancel",x),e.delegate("click",".PM_CL_btnThemeEditOk",O),e.delegate("click",".PM_CL_btnThemeEditInit",F),e.delegate("click",".PM_CL_btnThemeEditShow",b),e.delegate("click",".PM_CL_themeItemSelect",M),e.delegate("click",".PM_CL_themeAddOk",B),e.delegate("click",".PM_CL_themeAddCancel",D),e.delegate("click",".PM_CL_btnThemeImport",N),e.delegate("click",".PM_CL_btnThemeSelectAll",q),e.delegate("click",".PM_CL_themeImportOk",K),e.delegate("click",".PM_CL_themeImportCancel",D)}function n(){welFlickContainer.append("<div class='flick-panel'>2</div>"),welFlickContainer.prepend("<div class='flick-panel'>0</div>");naver.main.Panel.getPanelList();f(a(),welFlickContainer.child()[2]),
f(l(),welFlickContainer.child()[0]),le=new jindo.m.Flicking(Q,{nDuration:300,nTotalContents:3,nDefaultIndex:1,bUseDiagonalTouch:!0,sClassPrefix:"flick-",sContentClass:"panel",bUseCircular:!0,bAutoSize:!0}).attach({afterFlicking:function(e){var t,i;e.bNext?(c(o(),!1),t=a(),i=le.getNextElement()):(c(r(),!1),t=l(),i=le.getPrevElement()),f(t,i),u(!0),welThemArea.attr("aria-hidden","true")}})}function a(){return naver.main.Panel.getPanelList()[o()]}function l(){return naver.main.Panel.getPanelList()[r()]}function o(){var e=naver.main.Panel.getPanelList();return oe==e.length-1?0:oe+1}function r(){var e=naver.main.Panel.getPanelList();return 0==oe?e.length-1:oe-1}function h(e){if(e.stopDefault(),he&&!re)if($ElementList(".area_alert_confirm").leave(),ae&&le)le.moveNext();else{welThemArea.attr("aria-hidden","true");var t;t=naver.main.Panel.getPanelList().length-1==oe?0:oe+1,c(t,!0)}}function _(e){if(e.stopDefault(),he&&!re)if($ElementList(".area_alert_confirm").leave(),ae&&le)le.movePrev();else{welThemArea.attr("aria-hidden","true");var t;t=0==oe?naver.main.Panel.getPanelList().length-1:oe-1,c(t,!0)}}function c(e,t){e>=ee.length()-1&&(e=ee.length()-1),e<0&&(e=0);var i=$Element(ee.get(oe));i.attr("aria-selected","false"),i.removeClass("tcc_on");var s=$Element(ee.get(e));s.attr("aria-selected","true"),s.addClass("tcc_on"),te=J.html();var n=e<=3?0:e-3;Z.moveTo(n);var a=$Element("PM_ID_themeNaviLeft"),l=$Element("PM_ID_themeNaviRight");if(ee.length()>9&&(0==n?(a.hide(),l.show()):n>=ee.length()-10?(a.show(),l.hide()):(a.show(),l.show())),oe=e,_e=!1,t){var o=s.attr("data-id");naver.main.Panel.setSelectedPanel(o),f(o)}m(),g(),naver.main.Panel.addReadNewPanel(i.attr("data-id"))}function u(e){e?(J.html(te),ee=$ElementList(".PM_CL_themeItem"),J.width(t()),Z||(Z=new jindo.Rolling(G,{nFPS:60,nDuration:200,sDirection:"horizontal",fEffect:jindo.Effect.linear}).attach({beforeMove:function(e){J.addClass("PM_CL_beforeMove")},afterMove:function(e){J.removeClass("PM_CL_beforeMove")}})),oe=i(),c(oe,!1),$ElementList(".PM_CL_btnThemeNext").removeClass("ac_disabled"),$ElementList(".PM_CL_btnThemePrev").removeClass("ac_disabled"),re=!1):($ElementList(".PM_CL_btnThemeNext").addClass("ac_disabled"),$ElementList(".PM_CL_btnThemePrev").addClass("ac_disabled"),d(naver.main.Panel.getSubPanelList()))}function d(e){var t;t=e?naver.main.Panel.getAllPanelList().length-e.length:naver.main.Panel.getAllPanelList().length;var i="";if(e)for(var s=0;s<e.length;s++){var n=naver.main.Panel.findPanel(e[s]);n&&(n.subscribed=!1,n&&(i+=ie.process(n)))}for(var s=0;s<t;s++)i+=se.process({first:0==s});var a=81*naver.main.Panel.getAllPanelList().length;J.html(i),J.width(a);var l=0;e&&(l=e.length-ce),$Element("PM_ID_themeNaviLeft").hide(),$Element("PM_ID_themeNaviRight").hide(),Z.moveTo(l)}function m(){var e=X.query(".PM_CL_btnThemeEdit");if(e.query(".PM_CL_markNewBedge")||0==Y()){if(0==Y()){var t=e.query(".PM_CL_markNewBedge");t&&t.parent().remove(t)}}else e.append($('<span class="ac_ico_new PM_CL_markNewBedge">new</span>'))}function g(){var e=naver.main.Panel.getUnreadNewPanelList();$A(ee.$value()).forEach(function(t){var i=e.indexOf(t.attr("data-id"))>=0,s=t.query(".PM_CL_markNewBedge");i&&s||(i&&!s?t.append($('<span class="ac_ico_new PM_CL_markNewBedge">new</span>')):!i&&s&&t.parent().remove(s))})}function f(e,t){var i="/nvthemecast_body?theme="+e;$Ajax(i,{timeout:3,method:"get",onload:function(e){var i=e.text();p(i,t)},onerror:function(){p("",t),JEagleEyeClient.sendError("[THEMECAST] ajax fail(onerror) - url : "+i)},ontimeout:function(){JEagleEyeClient.sendError("[THEMECAST] ajax fail(ontimeout) - url : "+i)}}).request()}function p(e,t){if(ae&&t)t.html(e);else{var i=$Element($$.getSingle("div.flick-panel",Q));i.html(e)}v(Q)}function v(e){naver.main.ImageBinder.update(e);var t=X.query(".tcc_on").attr("data-id");oAdContent.fireEval(t),naver.main.EllipsisText.update()}function w(e){if(e.stopDefault(),he){$ElementList(".area_alert_confirm").leave();var t=welThemArea.attr("aria-hidden");if("true"==t){y(!1);var i=$Element($$.getSingle("a[aria-selected=true]",J));i&&i.attr("aria-selected","false"),welThemArea.attr("aria-hidden","false")}else u(!0),welThemArea.attr("aria-hidden","true"),le&&le.activate();naver.main.Panel.updateMyLatestPanelDate(),m()}}function b(e){e.stopDefault(),le&&le.deactivate(),$ElementList(".area_alert_confirm").leave(),z.removeClass("at_btn_abled"),u(!1),y(!0)}function y(e,t){var i,s,n,a=$Element("PM_ID_themeEditItemList");e?(i=$Template("PM_ID_themeEditItem"),welThemArea.removeClass("area_themelist").addClass("area_themesetting"),$Element("PM_ID_btnBoxShortcut").hide(),$Element("PM_ID_btnBoxEdit").show(),$ElementList(".PM_CL_btnThemeNext").addClass("ac_disabled"),$ElementList(".PM_CL_btnThemePrev").addClass("ac_disabled"),a.attr("role",""),t?(s=naver.main.Panel.getAllPanelList(),n=[]):(s=naver.main.Panel.getSubPanelList(),n=naver.main.Panel.getUnsubPanelList())):(i=$Template("PM_ID_themeSelectItem"),welThemArea.addClass("area_themelist").removeClass("area_themesetting"),$Element("PM_ID_btnBoxShortcut").show(),$Element("PM_ID_btnBoxEdit").hide(),$ElementList(".PM_CL_btnThemeNext").removeClass("ac_disabled"),$ElementList(".PM_CL_btnThemePrev").removeClass("ac_disabled"),a.attr("role","tablist"),s=naver.main.Panel.getSubPanelList(),null==s?(s=naver.main.Panel.getPanelList(),n=[]):n=naver.main.Panel.getUnsubPanelList());var l="";if(s)for(var o=0;o<s.length;o++){var r=naver.main.Panel.findPanel(s[o]);r&&(r.subscribed=!0,r&&(l+=i.process(r)))}if(n)for(var o=0;o<n.length;o++){var r=naver.main.Panel.findPanel(n[o]);r.subscribed=!1,r&&(l+=i.process(r))}a.html(l),C(),re=e}function C(){var e=$ElementList("a.PM_CL_btnThemeImport");if(e&&!isLogin)for(var t=0;t<e.length();t++){var i=e.get(t);i.attach("mouseover",function(){$ElementList(".PM_CL_importMessage2").show()}),i.attach("mouseout",function(){$ElementList(".PM_CL_importMessage2").hide()})}}function k(e){var t=naver.main.Panel.getSubPanelList();if(t=t?t:[],e.length!=t.length)return!0;for(var i=0;i<t.length;i++)if(t[i]!=e[i])return!0;return!1}function P(e){e.stopDefault();var t=T(),i=S(e.element);i.hasClass("radio-checked")?t=$A(t).refuse(A(i)).$value():t.push(E(i)),k(t)?z.addClass("at_btn_abled"):z.removeClass("at_btn_abled"),d(t)}function E(e){var t=e.attr("data-id"),i=e.parent().parent();return i&&i.attr("aria-checked",!0),e.addClass("radio-checked"),t}function A(e){var t=e.attr("data-id"),i=e.parent().parent();return i&&i.attr("aria-checked",!1),e.removeClass("radio-checked"),t}function S(e){return $Element($$.getSingle(".PM_CL_themeItemCheck",e))}function L(e){if(e.stopDefault(),he){var t=$Element(e.element);if(!t.hasClass("tcc_on")){var i=I(t);i>=0&&($ElementList(".area_alert_confirm").leave(),welThemArea.attr("aria-hidden","true"),c(i,!0),ae&&le&&(f(a(),le.getNextElement()),f(l(),le.getPrevElement())))}}}function I(e){var t=e.attr("data-id");if(!t)return-1;for(var i=0;i<ee.length();i++)if($Element(ee.get(i)).attr("data-id")==t)return i;return-1}function M(e){e.stopDefault(),$ElementList(".area_alert_confirm").leave();var t=$Element(e.element);if("true"==t.attr("aria-selected"))return L(e),void welThemArea.attr("aria-hidden","true");var i=t.attr("data-id"),s=naver.main.Panel.findPanel(i);welThemArea.parent().appendHTML(ne.process(s))}function T(){for(var e=$$("span[data-id]",J),t=[],i=0;i<e.length;i++){var s=$Element(e[i]);t.push(s.attr("data-id"))}return t}function x(e){e.stopDefault(),le&&le.activate(),y(!1),u(!0);var t=$Element($$.getSingle("a[aria-selected=true]",J));t&&t.attr("aria-selected",!1)}function O(e){e.stopDefault();var t=T();(null==t||t.length<=0)&&(alert("선택된 메뉴가 없습니다. 초기 설정으로 돌아갑니다."),clickcr(e.element,"tca*l.noneok","","","")),naver.main.Panel.setPanelList(t);var i=naver.main.Panel.getPanelList()[0];naver.main.Panel.setSelectedPanel(i),location.href="/"}function F(e){e.stopDefault(),alert("초기설정으로 돌아갑니다."),naver.main.Panel.clearPanelList(),naver.main.Panel.clearSelectedPanel(),location.href="/"}function B(e){e.stopDefault();var t=$Element(e.element),i=t.attr("data-id");naver.main.Panel.addPanel(i),naver.main.Panel.setSelectedPanel(i),location.href="/"}function D(e){e.stopDefault(),$ElementList(".area_alert_confirm").leave()}function N(e){return e.stopDefault(),isLogin?re?void V():void welThemArea.parent().appendHTML($Template("PM_ID_themeImportPopup").process()):void(location.href=$Element(e.element).attr("data-login-url"))}function V(){H();var e="/setting/v2/"+naver.main.CookieEditor.get({key:"NNB",type:"raw"});$Ajax(e,{timeout:3,method:"get",onload:function(e){var t=e.json();t&&t.menu&&t.menu.data?R(t.menu.data):alert("모바일에 설정된 관심 주제가 없습니다!")},onerror:function(t){(t.status=204)?alert("모바일에 설정된 관심 주제가 없습니다!"):JEagleEyeClient.sendError("[THEMECAST] import ajax fail(onerror) - url : "+e)},ontimeout:function(){JEagleEyeClient.sendError("[THEMECAST] import ajax fail(ontimeout) - url : "+e)}}).request(),z.addClass("at_btn_abled")}function R(e){for(var t=[],i=0;i<e.length;i++){var s=$$.getSingle("span.PM_CL_themeItemCheck[data-id="+e[i]+"]",$Element("PM_ID_themeEditItemList"));s&&t.push(E($Element(s)))}d(t)}function q(e){e.stopDefault(),U();var t=T();k(t)?z.addClass("at_btn_abled"):z.removeClass("at_btn_abled")}function U(){for(var e=$ElementList(".PM_CL_themeEditItem"),t=T(),i=0;i<e.length();i++){var s=S(e.get(i).$value());0==s.hasClass("radio-checked")&&t.push(E(s))}d(t)}function H(){for(var e=$ElementList(".PM_CL_themeEditItem"),t=0;t<e.length();t++)A(S(e.get(t).$value()));d([])}function K(e){e.stopDefault(),b(e),V()}function j(){var e=$Element($$.getSingle(".PM_CL_themeItem.tcc_on",$Element("PM_ID_themelist")));return e?e.attr("data-id"):null}function Y(){var e=naver.main.Panel.getMyLatestPanelDate(),t=naver.main.Panel.getLatestOpenPanel();return!(naver.main.Panel.compareOpenDate(t.code)>90)&&(!!t&&e!=t.openDate)}var W,G,J,X,Q,z,Z,ee,te,ie,se,ne,ae,le,oe=0,re=!1,he=!1,_e=!0,ce=8;return{init:e,getCurrentPanelCode:j}}(),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.adContent=$Class({$init:function(e){this._initVars(e)},_initVars:function(e){var t=e.sAdList;this._htAdList=""===t?null:$Json(t).toObject()},fireEval:function(e){if(""!==e){var t;t=null!==this._htAdList?this._getAdDaDomId(e):this._getAdContentId(e.toLocaleLowerCase());var i=t+"_script",s=$Element(i);if(s){this._setAdContentStatus(s,t),window.eval(s.html());try{s.attr("data-eval",!0)}catch(n){JEagleEyeClient.sendError("[naver.main.adContent] fireEval("+e+"), adScript checking error")}}}},_getAdDaDomId:function(e){var t=(e.toLocaleUpperCase(),this._htAdList.body.adList),i=$A(t).filter(function(t){return t.menu===e}).get(0);return i?i.infoList[0].param.da_dom_id:null},_getAdContentId:function(e){var t="p_main_"+e;return t+="school"===e?"_01":"_00"},_setAdContentStatus:function(e,t){var i=$Element(t);e&&!i&&(i=e.prev(),i.attr("data-veta-preview",t),i.$value().id=t)}}).extend(jindo.Component),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.bestseller=function(){function e(){t()}function t(){a.delegate("click",".PM_PAGING_PREV",i),a.delegate("click",".PM_PAGING_NEXT",s)}function i(e){e.stopDefault();var t=$Element(e.element).parent().parent(),i=parseInt(t.attr("data-paging-index"),10),s=parseInt(t.attr("data-paging-count"),10);i=(i+(s-1))%s,n(i)}function s(e){e.stopDefault();var t=$Element(e.element).parent().parent(),i=parseInt(t.attr("data-paging-index"),10),s=parseInt(t.attr("data-paging-count"),10);i=(i+1)%s,n(i)}function n(e){for(var t=$ElementList($$(".PM_PAGING_CONT",a)),i=t.get(e),s=0;s<t.length();s++)s==e?i.show():t.get(s).hide()}var a=$Element("themecast");return{init:e}}(),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.Newsstand=$Class({$init:function(e){this._initVars(e),this._updateVars(e),this._initComponent(),this._start()},_initVars:function(e){this._elBase=$$.getSingle(".area_newsstand"),this._elThumbViewerBase=$$.getSingle("._PM_newsstand_thumb",this._elBase),this._elListViewerBase=$$.getSingle("._PM_newsstand_list",this._elBase),this._elInfoViewerBase=$$.getSingle("._PM_newsstand_info",this._elBase),this._elOptionBtnBase=$$.getSingle(".an_menulist_section2",this._elBase),this._elTotalCategory=$$.getSingle("[data-tab=total]",this._elBase),this._elMyCategory=$$.getSingle("[data-tab=my]",this._elBase),this._welPrevMouseoverItem,this._htPressInfo,this._sTplPressListNavi='<b class="aplc_current">{=currentPage}</b>/<b class="aplc_total">{=lastPage}</b>',this._sTplCategory=["{if bInvalid}",'<li class="aplc_item">','<a class="aplc_link is_disabled PM_CL_newsstand_disableSubscribe" href="#" data-clk="nsd_myn" >','<span class="aplc_name">{=htPress.name}</span>',"</a>","</li>","{else}",'<li class="aplc_item">','<a class="aplc_link" href="#" data-pid="{=htPress.pid}" data-clk="nsd_myn" >','<span class="aplc_name">{=htPress.name}</span>',"</a>","</li>","{/if}"].join(""),this._htOption=e,this._htPressPidCategory={},this._htTotalPress={total:[],my:[]},this._aInvalidPressPid=this._htOption.headlineList.invalid,this._aTotalThumbViewerPress=[],this._sUserInfoURL=e.userInfoURL,this._sNewsStandURL=e.newsStandURL,this._sNewsPaperURL=e.newspaperURL,this._bAbleMouseoverForSubscribe=!0,this._bAbleMouseoverForAutoRolling=!0,this._htViewerStatus={category:"total",total:{mode:"thumb",index:0},my:{mode:"list",index:0}},this._nTimer,this._aSubscribePressPid=[],this._oDataManager,this._oThumbViewer,this._oListViewer,this._oThumbFlicking,this._oListFlicking,this._oSubscribe},_updateVars:function(e){var t;e.newsCastInfo?t=e.newsCastInfo.split("@"):e.newsStandInfo&&!isLogin&&(t=e.newsStandInfo.split("@"));var i=$$.getSingle("._PM_newsstand_empty");t&&(this._htViewerStatus.category="my",i?($Element(this._elInfoViewerBase).show(),$Element(this._elListViewerBase).hide(),$Element(this._elOptionBtnBase).hide()):this._aSubscribePressPid=this._getSubscribePressPid(t[4].split("|")))},_initComponent:function(){new naver.main.AutoRolling($$.getSingle("._PM_newsstand_rolling")),this._oDataManager=new naver.main.NewsstandDataManager({headlineList:this._htOption.headlineList,pressCategory:this._htOption.pressCategory,rcode:this._htOption.rcode}),this._oThumbViewer=new naver.main.NewsstandThumbViewer({invalid:this._aInvalidPressPid,newsStandUrl:this._sNewsStandURL,newspaperUrl:this._sNewsPaperURL}),this._oListViewer=new naver.main.NewsstandListViewer({invalid:this._aInvalidPressPid}),this._oSubscribe=new naver.main.NewsstandSubscribe({elBase:this._elBase,userInfoURL:this._sUserInfoURL})},_start:function(){this._oDataManager.requestPressInfo($Fn(function(e){var t=e.htOriginalPressPidCategory;this._htPressPidCategory=e.htPressPidCategory,this._htTotalPress.total=e.aFilteredTotalPressOfLocalTarget,this._htTotalPress.my=e.aTotalPress;var i=Math.ceil(t.ct1.length/12);this._aTotalThumbViewerPress=this._htTotalPress.total.slice(0,18*i),"total"===this._htViewerStatus.category?(this._oThumbViewer.setPressData(this._aTotalThumbViewerPress),this._oListViewer.setPressData({data:this._htPressPidCategory,category:"total"}),this._htOption.isSupportedFlicking&&this._initThumbFlicking()):(this._updateViewerPressData(),this._moveMyPressTab(0),this._htOption.isSupportedFlicking&&this._initListFlicking()),this._autoRolling(),this._updateSubscribeStatus(),this._updateClickLogStatus(),this._attachEvent()},this).bind())},_attachEvent:function(){$Element(this._elBase).delegate("click","[data-custom-clk]",$Fn(this._onClickCustomClicklogLink,this).bind()),$Element(this._elBase).delegate("click","._PM_newsstand_total_type",$Fn(this._onClickTotalType,this).bind()),$Element(this._elBase).delegate("click","._PM_newsstand_my_type",$Fn(this._onClickMyType,this).bind()),$Element(this._elBase).delegate("click","._PM_newsstand_thumb_type",$Fn(this._onClickThumbType,this).bind()),$Element(this._elBase).delegate("click","._PM_newsstand_list_type",$Fn(this._onClickListType,this).bind()),$Element(this._elBase).delegate("click","._PM_newsstand_prev",$Fn(this._onClickPrev,this).bind()),$Element(this._elBase).delegate("click","._PM_newsstand_next",$Fn(this._onClickNext,this).bind()),$Element(this._elThumbViewerBase).delegate("mouseleave",".api_item",$Fn(this._onMouseleaveItemInList,this).bind()),$Element(this._elThumbViewerBase).delegate("mouseover",".api_item",$Fn(this._onMouseoverItemInList,this).bind()),$Element(this._elThumbViewerBase).delegate("click",".api_link",$Fn(this._onClickItemInList,this).bind()),$Fn(this._onMouseover,this).attach(this._elBase,"mouseenter"),$Fn(this._onMouseout,this).attach(this._elBase,"mouseleave"),$Element(this._elTotalCategory).delegate("click","[data-category]",$Fn(this._onClickTotalCategory,this).bind()),$Element(this._elMyCategory).delegate("click","[data-pid]",$Fn(this._onClickMyCategory,this).bind()),this._oSubscribe.attach({subscribe:$Fn(this._onSubscribe,this).bind(),clickUnsubscribeInfo:$Fn(this._onClickUnsubscribeInfo,this).bind(),clickUnsubscribeOk:$Fn(this._onClickUnsubscribeOk,this).bind(),clickUnsubscribeNo:$Fn(this._onClickUnsubscribeNo,this).bind(),clickDisabledSubscribe:$Fn(this._onClickDisabledSubscribe,this).bind(),unsubscribe:$Fn(this._onUnsubscribe,this).bind()})},_onMouseover:function(e){this._bAbleMouseoverForAutoRolling&&(this._bAbleMouseoverForAutoRolling=!1)},_onMouseout:function(e){$Element(this._elBase).isParentOf(e.relatedElement)||(this._bAbleMouseoverForAutoRolling=!0)},_onClickCustomClicklogLink:function(e){var t=e.element,i=$Element(t),s=i.attr("data-custom-clk"),n=i.attr("data-aid");this._stopRolling(),n?this._fireArticleClickLog(i,s,n):clickcr(t,s,"","","")},_onMouseleaveItemInList:function(e){this._bAbleMouseoverForSubscribe&&this._welPrevMouseoverItem&&this._welPrevMouseoverItem.removeClass("is_selected")},_onMouseoverItemInList:function(e){var t=$Element(e.element);this._showInnerLayerOfSelectedTarget(t)},_onClickItemInList:function(e){e.stopDefault();var t=$Element(e.element).parent();this._showInnerLayerOfSelectedTarget(t)},_onClickTotalType:function(e){if(e.stopDefault(),"total"!==this._htViewerStatus.category){this._htViewerStatus.category="total",this._htViewerStatus[this._htViewerStatus.category].mode="thumb",$Element($$.getSingle("._PM_newsstand_total_type")).addClass("is_selected"),$Element($$.getSingle("._PM_newsstand_my_type")).removeClass("is_selected"),$Element($$.getSingle("._PM_newsstand_thumb_type")).addClass("is_selected"),$Element($$.getSingle("._PM_newsstand_list_type")).removeClass("is_selected"),this._oThumbViewer.setPressData(this._aTotalThumbViewerPress),this._oListViewer.setPressData({data:this._htPressPidCategory,category:"total"});var t=this._oThumbViewer.getInitPage({index:this._htViewerStatus[this._htViewerStatus.category].index});this._htViewerStatus[this._htViewerStatus.category].index=t.index,this._drawThumbViewer(t),this._autoRolling()}},_onClickMyType:function(e){e.stopDefault(),"my"!==this._htViewerStatus.category&&this._moveMyPressTab(0)},_onClickThumbType:function(e){if(e.stopDefault(),"thumb"!==this._htViewerStatus[this._htViewerStatus.category].mode){this._htViewerStatus[this._htViewerStatus.category].mode="thumb",$Element($$.getSingle("._PM_newsstand_thumb_type")).addClass("is_selected"),$Element($$.getSingle("._PM_newsstand_list_type")).removeClass("is_selected");var t=this._oThumbViewer.getInitPage({index:this._htViewerStatus[this._htViewerStatus.category].index});this._htViewerStatus[this._htViewerStatus.category].index=t.index,this._drawThumbViewer(t),this._autoRolling()}},_onClickListType:function(e){e.stopDefault(),"list"!==this._htViewerStatus[this._htViewerStatus.category].mode&&("my"===this._htViewerStatus.category?this._moveMyPressTab(0):(this._htViewerStatus[this._htViewerStatus.category].mode="list",$Element($$.getSingle("._PM_newsstand_thumb_type")).removeClass("is_selected"),$Element($$.getSingle("._PM_newsstand_list_type")).addClass("is_selected"),this._oListViewer.requestInitPage({index:0,onload:$Fn(this._drawListViewer,this).bind()}),this._autoRolling()))},_onClickPrev:function(e){if(e.stopDefault(),"thumb"===this._htViewerStatus[this._htViewerStatus.category].mode)if(this._oThumbFlicking)this._oThumbFlicking.movePrev(0);else{var t=this._oThumbViewer.getPrevPage({index:this._htViewerStatus[this._htViewerStatus.category].index});this._drawThumbViewer(t),this._htViewerStatus[this._htViewerStatus.category].index=t.index}else this._oListFlicking?this._oListFlicking.movePrev(0):this._oListViewer.requestPrevPage({onload:$Fn(function(e){this._drawListViewer(e,!0)},this).bind()});this._autoRolling()},_onClickNext:function(e){if(e.stopDefault(),"thumb"===this._htViewerStatus[this._htViewerStatus.category].mode)if(this._oThumbFlicking)this._oThumbFlicking.moveNext(0);else{var t=this._oThumbViewer.getNextPage({index:this._htViewerStatus[this._htViewerStatus.category].index});this._drawThumbViewer(t),this._htViewerStatus[this._htViewerStatus.category].index=t.index}else this._oListFlicking?this._oListFlicking.moveNext(0):this._oListViewer.requestNextPage({onload:$Fn(function(e){this._drawListViewer(e,!0)},this).bind()});this._autoRolling()},_onClickTotalCategory:function(e){e.stopDefault();var t=(e.element,$Element(e.element).attr("data-category"));this._oListViewer.setPressData({data:this._htPressPidCategory,category:t}),this._oListViewer.requestInitPage({index:0,onload:$Fn(this._drawListViewer,this).bind()})},_onClickMyCategory:function(e){e.stopDefault();var t=$Element(e.element).attr("data-pid"),i=$A(this._aSubscribePressPid).indexOf(t);this._oListViewer.requestInitPage({index:i,onload:$Fn(this._drawListViewer,this).bind()})},_onSubscribe:function(e){this._stopRolling(),this._aSubscribePressPid.push(e.pid),this._oSubscribe.showSubscribeLayer(this._htViewerStatus[this._htViewerStatus.category].mode,e.el),setTimeout($Fn(function(){this._oSubscribe.leaveSubscribeLayer(),this._moveMyPressTab(this._aSubscribePressPid.length-1,!0)},this).bind(),500)},_onClickUnsubscribeInfo:function(e){this._bAbleMouseoverForSubscribe&&(this._stopRolling(),this._bAbleMouseoverForSubscribe=!1,this._oSubscribe.showUnsubscribeLayer(this._htViewerStatus[this._htViewerStatus.category].mode,this._htTotalPress[this._htViewerStatus.category],e.pid,e.el))},_onClickUnsubscribeOk:function(e){this._bAbleMouseoverForSubscribe=!0,this._oSubscribe.unsubscribePress(e.pid)},_onClickUnsubscribeNo:function(e){this._bAbleMouseoverForSubscribe=!0,this._destroyUnsubscribeLayer(),this._autoRolling()},_onClickDisabledSubscribe:function(e){this._bAbleMouseoverForSubscribe&&(this._stopRolling(),this._bAbleMouseoverForSubscribe=!1,this._oSubscribe.showDisabledSubscribeLayer(this._htViewerStatus[this._htViewerStatus.category].mode,e.el))},_onUnsubscribe:function(e){var t=e.pid;if(this._aSubscribePressPid=$A(this._aSubscribePressPid).refuse(t).$value(),"my"===this._htViewerStatus.category)if(this._updateViewerPressData(),"thumb"===this._htViewerStatus[this._htViewerStatus.category].mode){var i=this._oThumbViewer.getInitPage({index:this._htViewerStatus[this._htViewerStatus.category].index});this._drawThumbViewer(i),this._htViewerStatus[this._htViewerStatus.category].index=i.index}else this._moveMyPressTab(0);this._destroyUnsubscribeLayer(),this._updateSubscribeStatus(),this._updateClickLogStatus()},_fireArticleClickLog:function(e,t,i){var s=e.attr("data-pid");clickcr(e.$value(),t,"","","","",this._getParamForNewsstand(s,i))},_getParamForNewsstand:function(e,t){return JSON.stringify({lk:{subscription:$A(this._aSubscribePressPid).indexOf(e)>=0,oid:e,aid:t}})},_showInnerLayerOfSelectedTarget:function(e){this._bAbleMouseoverForSubscribe&&(this._welPrevMouseoverItem&&this._welPrevMouseoverItem.removeClass("is_selected"),this._welPrevMouseoverItem=e,e.hasClass("PM_CL_disabled")||e.addClass("is_selected"))},_drawThumbViewer:function(e){$Element(this._elThumbViewerBase).show(),$Element(this._elListViewerBase).hide(),$Element(this._elInfoViewerBase).hide(),$Element(this._elOptionBtnBase).show();var t=$Element($("<div>"+e.html+"</div>"));$Element($$.getSingle(".api_list")).html(t.html()),this._destroyUnsubscribeLayer(),this._updateSubscribeStatus(),this._updateClickLogStatus(),"my"===this._htViewerStatus.category&&this._aSubscribePressPid.length<1&&($Element(this._elThumbViewerBase).hide(),$Element(this._elOptionBtnBase).hide(),$Element(this._elInfoViewerBase).show()),this._htOption.isSupportedFlicking&&this._initThumbFlicking()},_drawListViewer:function(e,t){var i=$Element($$.getSingle(".flick-panel",this._elListViewerBase));i.html(e.html),this._oListViewer.setEllipsis(i),"total"===this._htViewerStatus.category?($A($ElementList($$("[data-category]")).removeClass("is_selected").$value()).forEach($Fn(function(t){var i="";$Element(t).attr("data-category")===e.category&&($Element(t).addClass("is_selected"),i=$Template(this._sTplPressListNavi).process({currentPage:e.index+1,lastPage:e.lastIndex+1})),$Element($$.getSingle(".aplc_paging",t)).html(i)},this).bind()),$Element(this._elListViewerBase).show(),$Element(this._elOptionBtnBase).show(),$Element(this._elTotalCategory).show(),$Element(this._elMyCategory).hide()):this._aSubscribePressPid.length<1?($Element(this._elListViewerBase).hide(),$Element(this._elInfoViewerBase).show(),$Element(this._elOptionBtnBase).hide()):($Element(this._elListViewerBase).show(),$Element(this._elInfoViewerBase).hide(),$Element(this._elOptionBtnBase).show(),$Element(this._elTotalCategory).hide(),$Element(this._elMyCategory).html(this._getMyCategoryHTML()),this._invalidatedSubscribePressPid()||$Element(this._elMyCategory).child()[e.index].query("[data-pid]").addClass("is_selected"),$Element(this._elMyCategory).show(),t&&($$.getSingle(".is_selected",this._elMyCategory),this._updateScrollFocus($$.getSingle(".is_selected",this._elMyCategory)))),this._destroyUnsubscribeLayer(),this._updateSubscribeStatus(),this._updateClickLogStatus(),$Element(this._elThumbViewerBase).hide(),this._htOption.isSupportedFlicking&&this._initListFlicking()},_getMyCategoryHTML:function(){var e="",t=this;return $A(this._aSubscribePressPid).forEach(function(i){var s;$A(t._htTotalPress[t._htViewerStatus.category]).forEach(function(e){e.pid===i&&(s=e,$A.Break())}),s&&(e+=$Template(t._sTplCategory).process({htPress:s,bInvalid:$A(t._aInvalidPressPid).indexOf(s.pid)>=0}))}),e},_moveMyPressTab:function(e,t){this._htViewerStatus.category="my",this._htViewerStatus[this._htViewerStatus.category].mode="list",$Element($$.getSingle("._PM_newsstand_total_type")).removeClass("is_selected"),$Element($$.getSingle("._PM_newsstand_my_type")).addClass("is_selected"),$Element($$.getSingle("._PM_newsstand_thumb_type")).removeClass("is_selected"),$Element($$.getSingle("._PM_newsstand_list_type")).addClass("is_selected"),this._updateViewerPressData(),$Element(this._elThumbViewerBase).hide(),this._aSubscribePressPid.length<1?($Element(this._elInfoViewerBase).show(),$Element(this._elListViewerBase).hide(),$Element(this._elOptionBtnBase).hide()):this._invalidatedSubscribePressPid()?this._drawListViewer({html:this._oListViewer.getErrorPage()}):this._oListViewer.requestInitPage({index:e,onload:$Fn(function(e){this._drawListViewer(e,t)},this).bind()}),this._autoRolling()},_invalidatedSubscribePressPid:function(){var e=this._aSubscribePressPid.concat(),t=this._aInvalidPressPid.concat(),i=e.concat(t);return $A(i).unique().length()===t.length},_updateViewerPressData:function(){var e=this._aSubscribePressPid;this._oListViewer.setPressData({data:{my:e},category:"my"});var t=[],i=this;$A(e).forEach(function(e){$A(i._htTotalPress[i._htViewerStatus.category]).forEach(function(i){i.pid===e&&(t.push(i),$A.Break())})}),this._oThumbViewer.setPressData(t)},_getValidatedPidList:function(){var e=[];$A(this._aSubscribePressPid).forEach(function(t){e.push({pid:t})});var t=this._oDataManager.getValidatedPidList(e),i=[],s=[];return $A(this._htTotalPress[this._htViewerStatus.category]).forEach(function(e){$A(t).indexOf(e.pid)>=0&&i.push(e.pid)}),$A(t).forEach(function(e){$A(i).indexOf(e)>=0&&s.push(e)}),s},_updateSubscribeStatus:function(){var e=this;$A($$("[data-pid]",this._elBase)).forEach(function(t){var i=$Element(t);(i.hasClass("_PM_newsstand_unsubscribe")||i.hasClass("_PM_newsstand_subscribe"))&&(i.hide(),$A(e._aSubscribePressPid).indexOf(i.attr("data-pid"))>-1?i.hasClass("_PM_newsstand_unsubscribe")&&i.show("inline-block"):i.hasClass("_PM_newsstand_subscribe")&&i.show("inline-block"))})},_updateClickLogStatus:function(){var e="data-all-clk",t="data-my-clk",i="my"===this._htViewerStatus.category?t:e;$A($$("["+i+"]",this._elBase)).forEach(function(s){var n=$Element(s);n.attr("data-custom-clk",n.attr(i)),n.attr(e,null),n.attr(t,null)})},_destroyUnsubscribeLayer:function(){this._bAbleMouseoverForSubscribe=!0,this._oSubscribe.leaveSubscribeLayer()},_autoRolling:function(){"thumb"===this._htViewerStatus[this._htViewerStatus.category].mode?this._autoRollingThumbViewer():this._autoRollingListViewer()},_autoRollingListViewer:function(){this._stopRolling();var e=this;this._nTimer=setInterval(function(){e._bAbleMouseoverForAutoRolling&&(e._oListFlicking?e._oListFlicking.moveNext(0):e._oListViewer.requestNextPage({onload:$Fn(function(t){e._drawListViewer(t,!0)},e).bind()}))},2e4)},_autoRollingThumbViewer:function(){this._stopRolling();var e=this;this._nTimer=setInterval(function(){if(e._bAbleMouseoverForAutoRolling)if(e._oThumbFlicking)e._oThumbFlicking.moveNext(0);else{var t=e._oThumbViewer.getNextPage({index:e._htViewerStatus[e._htViewerStatus.category].index});e._drawThumbViewer(t),e._htViewerStatus[e._htViewerStatus.category].index=t.index}},15e3)},_stopRolling:function(){clearInterval(this._nTimer)},_initThumbFlicking:function(){if(!this._oThumbFlicking){var e=$Element($$.getSingle(".flick-container",this._elThumbViewerBase));e.append('<div class="flick-panel" style="position:absolute;top:0;left:0;width:100%;height:100%"></div>'),e.prepend('<div class="flick-panel" style="position:absolute;top:0;left:0;width:100%;height:100%"></div>');var t,i=this;this._oThumbFlicking=new jindo.m.Flicking($$.getSingle(".flick-view",this._elThumbViewerBase),{nDuration:300,nTotalContents:3,nDefaultIndex:1,bUseDiagonalTouch:!0,sClassPrefix:"flick-",sContentClass:"panel",bUseCircular:!0,bAutoSize:!0}).attach({afterFlicking:function(e){t=e.bLeft?i._oThumbViewer.getNextPage({index:i._htViewerStatus[i._htViewerStatus.category].index}):i._oThumbViewer.getPrevPage({index:i._htViewerStatus[i._htViewerStatus.category].index}),i._htViewerStatus[i._htViewerStatus.category].index=t.index,i._drawSideThumbPanel({htNext:i._oThumbViewer.getNextPage({index:i._htViewerStatus[i._htViewerStatus.category].index}),htPrev:i._oThumbViewer.getPrevPage({index:i._htViewerStatus[i._htViewerStatus.category].index})})}})}"my"===this._htViewerStatus.category&&this._aSubscribePressPid.length<=18?this._oThumbFlicking.deactivate():this._oThumbFlicking.activate(),this._drawSideThumbPanel({htNext:this._oThumbViewer.getNextPage({index:this._htViewerStatus[this._htViewerStatus.category].index}),htPrev:this._oThumbViewer.getPrevPage({index:this._htViewerStatus[this._htViewerStatus.category].index})})},_drawSideThumbPanel:function(e){this._destroyUnsubscribeLayer(),this._oThumbFlicking.getNextElement().html('<ul class="api_list">'+e.htNext.html+"</ul>"),this._oThumbFlicking.getPrevElement().html('<ul class="api_list">'+e.htPrev.html+"</ul>")},_initListFlicking:function(){if(!this._oListFlicking){var e=$Element($$.getSingle(".flick-container",this._elListViewerBase));e.append('<div class="flick-panel" style="position:absolute;top:0;left:0;width:100%;height:100%"></div>'),e.prepend('<div class="flick-panel" style="position:absolute;top:0;left:0;width:100%;height:100%"></div>');var t=this;this._oListFlicking=new jindo.m.Flicking($$.getSingle(".flick-view",this._elListViewerBase),{nDuration:300,nTotalContents:3,nDefaultIndex:1,bUseDiagonalTouch:!0,sClassPrefix:"flick-",sContentClass:"panel",bUseCircular:!0,bAutoSize:!0}).attach({afterFlicking:function(e){var i;i=e.bLeft?t._oListViewer.getNextPageStatus():t._oListViewer.getPrevPageStatus(),t._oListViewer.setPageStatus({
nIndex:i.nIndex,sType:i.sType}),t._drawListViewerCategory({bFocus:!0,nIndex:i.nIndex,nLastIndex:i.nLastIndex,sCategory:i.sType}),t._drawSideListPanel()}})}this._drawSideListPanel(),"my"===this._htViewerStatus.category&&this._aSubscribePressPid.length<=1?this._oListFlicking.deactivate():this._oListFlicking.activate()},_drawSideListPanel:function(){this._destroyUnsubscribeLayer();var e=this._oListViewer.getPrevPageStatus();this._oListViewer.requestPage({nIndex:e.nIndex,sType:e.sType,onload:$Fn(function(e){this._drawListFlickingContentsViewer({response:e,elTarget:this._oListFlicking.getPrevElement()})},this).bind()});var t=this._oListViewer.getNextPageStatus();this._oListViewer.requestPage({nIndex:t.nIndex,sType:t.sType,onload:$Fn(function(e){this._drawListFlickingContentsViewer({response:e,elTarget:this._oListFlicking.getNextElement()})},this).bind()})},_drawListFlickingContentsViewer:function(e){var t=e.response,i=e.elTarget,s=e.htCategory;"my"===this._htViewerStatus.category&&this._aSubscribePressPid.length<1?($Element(this._elListViewerBase).hide(),$Element(this._elOptionBtnBase).hide(),$Element(this._elInfoViewerBase).show()):($Element(i).html(t.html),$Element(this._elThumbViewerBase).hide(),$Element(this._elInfoViewerBase).hide(),$Element(this._elListViewerBase).show(),$Element(this._elOptionBtnBase).show(),this._updateSubscribeStatus(),this._updateClickLogStatus(),s&&this._drawListViewerCategory(s))},_drawListViewerCategory:function(e){var t=e.bFocus,i=e.nIndex,s=e.nLastIndex,n=e.sCategory;if("total"===this._htViewerStatus.category)$A($ElementList($$("[data-category]")).removeClass("is_selected").$value()).forEach($Fn(function(e){var t="";$Element(e).attr("data-category")===n&&($Element(e).addClass("is_selected"),t=$Template(this._sTplPressListNavi).process({currentPage:i+1,lastPage:s+1})),$Element($$.getSingle(".aplc_paging",e)).html(t)},this).bind()),$Element(this._elTotalCategory).show(),$Element(this._elMyCategory).hide();else{if(!this._aSubscribePressPid||this._aSubscribePressPid.length<=0)return;$Element(this._elMyCategory).html(this._getMyCategoryHTML()),$Element(this._elMyCategory).child()[i].query("[data-pid]").addClass("is_selected"),t&&($$.getSingle(".is_selected",this._elMyCategory),this._updateScrollFocus($$.getSingle(".is_selected",this._elMyCategory))),$Element(this._elTotalCategory).hide(),$Element(this._elMyCategory).show()}},_updateScrollFocus:function(e){var t=$Element(e).parent().$value(),i=$$.getSingle("! [data-tab]",t),s=i.scrollTop,n=t.offsetTop,a=$Element(i).height(),l=$Element(t).height();s>n?i.scrollTop=n:n-s>a-l&&(i.scrollTop=n-a+l)},_getSubscribePressPid:function(e){var t=[],i=this._htOption.headlineList,s=i.pid.concat(i.amigo,i.invalid);return $A(e).forEach(function(e){$A(s).indexOf(e)>=0&&t.push(e)}),t}}),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.NewsstandThumbViewer=$Class({$init:function(e){this._initVars(e)},_initVars:function(e){this._nLastIndex,this._aPressList=[];var t=e.newsStandUrl;e.newspaperUrl;this._aInvalidPressPid=e.invalid,this._sTemplate=["{for idx:press in pressList}",'{if press.pid != "add"}','{if press.amigo=="Y" || press.viewer=="N" || press.invalid =="Y"}','<li id="NS_{=press.pid}" class="api_item PM_CL_disabled" data-status=noami" data-pid="{=press.pid}">','<a href="#" class="api_link PM_CL_newsstand_disableSubscribe" aria-haspopup="true" aria-disabled="true">','<img src="{=press.img}" height="24" alt="{=press.name}" class="api_logo">',"</a>","</li>","{else}",'<li id="NS_{=press.pid}" class="api_item" data-pid="{=press.pid}">','<a href="http://'+t+'/?list={=press.mainCate}&pcode={=press.pid}" class="api_link" aria-haspopup="true" target="_blank">','<img src="{=press.img}" height="24" alt="{=press.name}" class="api_logo">',"</a>",'<div class="api_popup_btn_set" role="alertdialog">','<div class="api_pbs_inner">','\n\t<a href="#" class="api_pbs_btn _PM_newsstand_subscribe" role="button" data-pid="{=press.pid}" data-clk="nsd_all*p.sub">구독</a>','\n\t<a href="#" class="api_pbs_btn _PM_newsstand_unsubscribe" role="button" data-pid="{=press.pid}" data-clk="nsd_myn*p.sub">해지</a>','\n\t<a href="http://'+t+'/?list={=press.mainCate}&pcode={=press.pid}" class="api_pbs_btn api_pbs_lb" role="button" target="_blank" data-all-clk="nsd_all*p.logo" data-my-clk="nsd_myn*p.logo">기사보기</a>',"</div>","</div>","</li>","{/if}","{else}",'<li id="_add" class="api_item disabled"></li>',"{/if}","{/for}"].join("")},setPressData:function(e){this._aPressList=e,this._nLastIndex=Math.ceil(this._aPressList.length/18)-1},getInitPage:function(e){var t=e&&e.index?e.index:0;return{index:t,html:this._getThumbViewerHTML({index:t})}},getPrevPage:function(e){var t=e.index;t--,t<0&&(t=this._nLastIndex);var i=this._getThumbViewerHTML({index:t});return{index:t,html:i}},getNextPage:function(e){var t,i=e.index;i++,i>this._nLastIndex&&(i=0);var t=this._getThumbViewerHTML({index:i});return{index:i,html:t}},_getThumbViewerHTML:function(e){for(var t=(e.index+1,18),i=this._aPressList,s=e.index*t,n=Math.min((e.index+1)*t,i.length),a=[],l=this,o=s;o<n;o++)a.push(i[o]);a.length>t&&(a=a.slice(0,t)),$A(a).forEach(function(e){$A(l._aInvalidPressPid).indexOf(e.pid)>=0&&(e.invalid="Y")});var r={pressList:a};return $Template(this._sTemplate).process(r)}}),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.NewsstandListViewer=$Class({$init:function(e){this._initVars(e)},_initVars:function(e){this._sType,this._htTotalPress={},this._nIndex,this._htCachedPage={},this._aInvalidPressPid=e.invalid,this._sTplError='<div class="an_nopress_view"><div class="anv_wrap anv_nobtns"><em class="anv_tit">해당 언론사 사정으로 접근이 일시 제한됩니다.</em></div></div>',this._nLoofCount=0},setPressData:function(e){this._htTotalPress=e.data,this._nIndex=0,this._sType="total"===e.category?$H(this._htTotalPress).keys()[0]:e.category},setPageStatus:function(e){this._nIndex=e.nIndex,this._sType=e.sType},requestInitPage:function(e){this._nIndex=e.index,this._drawPage(e)},requestNextPage:function(e){this._drawNextPage(e)},requestPrevPage:function(e){this._drawPrevPage(e)},requestPage:function(e){this._drawPage(e)},getPrevPageStatus:function(){var e=this._nIndex,t=this._sType;if(e>0)e--;else{if(this._isFirstCategory()){var i=$H(this._htTotalPress).keys();t=i[i.length-1]}else t=this._getPrevCategory();e=this._htTotalPress[t].length-1}return{nIndex:e,sType:t,nLastIndex:this._htTotalPress[t].length-1}},getNextPageStatus:function(){var e=this._nIndex,t=this._sType;return e<this._htTotalPress[t].length-1?e++:(t=this._isLastCategory()?$H(this._htTotalPress).keys()[0]:this._getNextCategory(),e=0),{nIndex:e,sType:t,nLastIndex:this._htTotalPress[t].length-1}},getCurrentPageStatus:function(){return{nIndex:this._nIndex,sType:this._sType,nLastIndex:this._htTotalPress[this._sType].length-1}},getErrorPage:function(){return this._sTplError},_drawNextPage:function(e){this._nIndex<this._htTotalPress[this._sType].length-1?this._nIndex++:(this._isLastCategory()?this._sType=$H(this._htTotalPress).keys()[0]:this._sType=this._getNextCategory(),this._nIndex=0),this._nLoofCount>this._htTotalPress[this._sType].length-1||(this._validatedPress()?this._drawPage(e):(this._nLoofCount+=1,this._drawNextPage(e)))},_drawPrevPage:function(e){if(this._nIndex>0)this._nIndex--;else{if(this._isFirstCategory()){var t=$H(this._htTotalPress).keys();this._sType=t[t.length-1]}else this._sType=this._getPrevCategory();this._nIndex=this._htTotalPress[this._sType].length-1}this._nLoofCount>this._htTotalPress[this._sType].length-1||(this._validatedPress()?this._drawPage(e):(this._nLoofCount+=1,this._drawPrevPage(e)))},_drawPage:function(e){e.sType?e.sType:this._sType,isNaN(e.nIndex)?this._nIndex:e.nIndex;this._validatedPress(e)?this._requestPage(e):this._drawNextPage(e)},_requestPage:function(e){var t=e.sType?e.sType:this._sType,i=isNaN(e.nIndex)?this._nIndex:e.nIndex,s=this._htTotalPress[t][i];if(this._nLoofCount=0,s)if(this._htCachedPage[s])e&&e.onload({html:this._htCachedPage[s],index:i,lastIndex:this._htTotalPress[t].length-1,category:t});else{var n="/nvnewsstand?"+s,a=this,l=$Ajax(n,{timeout:5,method:"get",onload:function(n){a._htCachedPage[s]=n.text(),e&&e.onload({html:n.text(),index:i,lastIndex:a._htTotalPress[t].length-1,category:t})},onerror:function(){JEagleEyeClient.sendError("[NEWSSTAND] 언론사 헤드라인 정보 로딩 실패: "+n)},ontimeout:function(){JEagleEyeClient.sendError("[NEWSSTAND] 언론사 헤드라인 정보 로딩 timeout: "+n)}});l.request()}else e&&e.onload({html:"",index:i,lastIndex:this._htTotalPress[t].length-1,category:t})},_validatedPress:function(e){var t=e&&e.sType?e.sType:this._sType,i=e&&!isNaN(e.nIndex)?e.nIndex:this._nIndex,s=this._htTotalPress[t][i];return $A(this._aInvalidPressPid).indexOf(s)<0},_isLastCategory:function(){var e=this._getCategoryAndIndex();return e.nTargetIndex===$H(this._htTotalPress).length()-1},_isFirstCategory:function(){var e=this._getCategoryAndIndex();return 0===e.nTargetIndex},_getNextCategory:function(){var e=this._getCategoryAndIndex();return e.aKey[e.nTargetIndex+1]},_getPrevCategory:function(){var e=this._getCategoryAndIndex();return e.aKey[e.nTargetIndex-1]},_getCategoryAndIndex:function(){var e=$H(this._htTotalPress).keys(),t=$A(e).indexOf(this._sType);return{aKey:e,nTargetIndex:t}},setEllipsis:function(e){var t=e.query(".apln_nt_text");if(t){var i=t.text(),s=this._getEllipsisText(t.html(),2,160,"...");i!==s&&t.html(s)}},_getEllipsisText:function(e,t,i,s){var n="String"!=typeof e?e.toString():e,a=parseInt(t*i,10),l=s||"",o=[],r="",h=$Element($$.getSingle(".PM_CL_newsstandEllipsis"));h?h.empty():(h=$Element('<div class="PM_CL_newsstandEllipsis"><p class="apln_nt_link apln_nt_text"></div>'),h.css({position:"absolute",top:"-1000px",left:"-1000px"}),h.prependTo(document.body));for(var _=0,c=n.length;_<c;_++)if(r=n.charAt(_)," "===r?o.push(";"):o.push(r),h.text(o.join("")+l),h.width()>a)return n.substring(0,o.length-1)+l;return n}}),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.NewsstandDataManager=$Class({$init:function(e){this._initVars(e)},_initVars:function(e){this._htHeadlineList=e.headlineList,this._htPressCategory=e.pressCategory,this._htPressInfo={},this._sRcode=e.rcode},requestPressInfo:function(e){if(this._htPressCategory)this._onLoadAjax(this._htPressCategory,e);else{var t=this;$Ajax("/include/newsstand/press_info.json",{timeout:5,method:"get",onload:function(i){t._onLoadAjax(i.json(),e)},onerror:function(){JEagleEyeClient.sendError("[NEWSSTAND] 언론사 정보 ajax 실패 : ")},ontimeout:function(){JEagleEyeClient.sendError("[NEWSSTAND] 언론사 정보 로딩 timeout: ")}}).request()}},_onLoadAjax:function(e,t){this._htPressCategory=e;var i=this._getEditedPressTable();t({htOriginalPressPidCategory:this._htPressCategory,htPressPidCategory:this._getPressPidCategory(),aTotalPress:this._getTotalPress(i),aFilteredTotalPressOfLocalTarget:this._getFilteredTotalPressOfLocalTarget(i)})},_getPressPidCategory:function(){var e,t={},i=this;return $H(this._htPressCategory).forEach(function(e,s){t[s]=$A(i._getValidatedPidList(e)).shuffle().$value()}),e=$H(t),e.remove("ct1"),t=e.$value()},_getValidatedPidList:function(e){for(var t=[],i=0;i<e.length;i++){var s=e[i].pid;this._isHeadlinePress(s)&&t.push(s)}return t},getValidatedPidList:function(e){return this._getValidatedPidList(e)},_isHeadlinePress:function(e){for(var t=this._htHeadlineList,i=t.pid.concat(t.amigo,t.invalid),s=0;s<i.length;s++)if(e==i[s])return!0;return!1},_isHeadlineAmigo:function(e){for(var t=this._htHeadlineList,i=0;i<t.amigo.length;i++)if(e==t.amigo[i])return!0;return!1},_getTotalPress:function(e){var t=[],i=[];return t=t.concat(e.aFirstPress,e.aMajorPress,e.aSubPress,e.aLocalPress),$A(t).filter(function(e){return!($A(i).indexOf(e.pid)>=0)&&(i.push(e.pid),!0)}).$value()},_getFilteredTotalPressOfLocalTarget:function(e){return this._getCombinedPressInfo(e.aFirstPress,e.aMajorPress,e.aSubPress,e.aFilteredLocalPress)},_getFirstPagePid:function(){var e=[],t=$Element($$.getSingle("._PM_newsstand_thumb"));return $A(t.queryAll(".api_item[data-pid]")).forEach(function(t){e.push(t.attr("data-pid"))}),e},_getEditedPressTable:function(){var e=this._getFirstPagePid(),t=this._htPressCategory,i=this._sRcode?this._sRcode.slice(0,2):"",s=this._getValidatedPidList(t.ct1),n=s.concat(e),a=t.ct2.concat(t.ct3,t.ct4,t.ct5,t.ct6,t.ct7),l=$A(t.ct8).filter(function(e){var t=!1;return i?$A(e.local).forEach(function(e){e.code===i&&(t=!0,$A.Break())}):t=!0,t}).$value();return{aFirstPress:this._getFirstPress(t.ct1.concat(a,t.ct8),e),aMajorPress:this._getEditedPressInfo(t.ct1,e),aSubPress:this._getEditedPressInfo(a,n),aLocalPress:this._getEditedPressInfo(t.ct8,n),aFilteredLocalPress:this._getEditedPressInfo(l,n)}},_getUniquePressList:function(e){for(var t=[],i=e.length,s=0;s<i;s++){for(var n=0;n<t.length&&e[s].pid!==t[n].pid;n++);n>=t.length&&(t[n]=e[s])}return t},_getPressInfo:function(e){var t=this._htPressCategory;for(var i in t)for(var s=t[i],n=0,a=s.length;n<a;n++)if(s[n].pid==e)return s[n];return null},_getFirstPress:function(e,t){var i=[];return $A(t).forEach(function(t){$A(e).forEach(function(e){e.pid===t&&(i.push(e),$A.Break())})}),i},_getEditedPressInfo:function(e,t){var i=this._validatedPressList(e),s=$A(i).shuffle().filter($Fn(function(e){if(!this._isContains(t,e.pid))return!0},this).bind());return s.$value()},_isContains:function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i]==t)return!0;return!1},_validatedPressList:function(e){for(var t=[],i=0,s=e.length;i<s;i++){var n=e[i];"string"==typeof n&&(n=this._getPressInfo(n)),t.push(n)}return t},_getCombinedPressInfo:function(e,t,i,s){for(var n=[],a=t.concat(),l=i.concat(),o=s.concat(),r=Math.ceil((a.length+l.length+o.length)/18)-1,h=0;h<r;h++){var _=[],c=[],u=[];if(a.length>0&&(_=a.splice(0,12)),o.length>0&&(u=o.splice(0,2)),l.length>0){var d=18-(_.length+u.length);c=l.splice(0,d)}_.length+c.length+u.length<18&&(u=u.concat(o),o=[]),n=n.concat(_,c,u)}return e.concat(n)}}),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.NewsstandSubscribe=$Class({$init:function(e){this._initVars(e),this._updateVars(e),this._attachEvent()},_initVars:function(e){this._elBase=e.elBase,this._htMySubscribe={bNewsstand:!1,bNewscast:!1},this._sUserInfoURL=e.userInfoURL,this._welLayer=$Element($$.getSingle(".PM_CL_newsstand_layer")),this._sTplDimmed='<div class="_PM_newsstand_unsubscribe_no an_dimmed"></div>',this._sTplSubscribe=['<div class="_PM_newsstand_add_layer an_popup_add {=positionClass}" role="alertdialog">','<p class="an_pa_words">MY뉴스에 추가되었습니다.</p>',"</div>"].join(""),this._sTplUnsubscribe=['<div class="_PM_newsstand_unsubscribe_popup an_popup_cancel {=positionClass}" role="alertdialog" style="display:block">','<p class="an_pc_words"><span class="an_pc_name">{=htPress.name}</span>을(를)<br>구독해지 하시겠습니까?</p>','<a href="#" class="_PM_newsstand_unsubscribe_ok an_pc_btn" role="button" data-pid={=htPress.pid} data-custom-clk="nsd_myn*a.usdone">확인</a> ','<a href="#" class="_PM_newsstand_unsubscribe_no an_pc_btn" role="button" data-custom-clk="nsd_myn*a.uscancel">취소</a>','<a href="#" class="_PM_newsstand_unsubscribe_no an_btn_close" role="button" data-custom-clk="nsd_myn*a.usclose"><span class="blind">구독해지 닫기</span><span class="an_ico_close"></span></a>',"</div>"].join(""),this._sTplDisableSubscribe=['<div class="an_popup_disable {=positionClass}" role="alertdialog">','<p class="an_pc_words">해당 언론사 사정으로<br>접근이 일시 제한됩니다.</p>','<a href="#" class="an_pc_btn _PM_newsstand_unsubscribe_no" role="button">확인</a>','<a href="#" class="an_btn_close _PM_newsstand_unsubscribe_no" role="button"><span class="blind">접근제한 안내 닫기</span><span class="an_ico_close"></span></a>',"</div>"].join("")},_updateVars:function(e){isLogin?this._htMySubscribe.bNewscast=!0:this._htMySubscribe.bNewsstand=!0},_attachEvent:function(){$Element(this._elBase).delegate("click","._PM_newsstand_subscribe",$Fn(this._onClickSubscribe,this).bind()),$Element(this._elBase).delegate("click","._PM_newsstand_unsubscribe",$Fn(this._onClickUnsubscribe,this).bind()),$Element(this._elBase).delegate("click","._PM_newsstand_unsubscribe_ok",$Fn(this._onClickUnsubscribeOk,this).bind()),$Element(this._elBase).delegate("click","._PM_newsstand_unsubscribe_no",$Fn(this._onClickUnsubscribeNo,this).bind()),$Element(this._elBase).delegate("click",".PM_CL_newsstand_disableSubscribe",$Fn(this._onClickDisableSubscribe,this).bind())},_onClickSubscribe:function(e){e.stopDefault();var t=e.element,i=$Element(t).attr("data-pid");this._subscribePress(i,t)},_onClickUnsubscribe:function(e){e.stopDefault();var t=e.element,i=$Element(t).attr("data-pid");this.fireEvent("clickUnsubscribeInfo",{pid:i,el:t})},_onClickUnsubscribeOk:function(e){e.stopDefault();var t=e.element,i=$Element(t).attr("data-pid");this.fireEvent("clickUnsubscribeOk",{pid:i,el:t})},_onClickUnsubscribeNo:function(e){e.stopDefault(),this.fireEvent("clickUnsubscribeNo")},_onClickDisableSubscribe:function(e){e.stopDefault();var t=e.element,i=$Element(t).attr("data-pid");this.fireEvent("clickDisabledSubscribe",{pid:i,el:t})},_subscribePress:function(e,t){var i;i=this._htMySubscribe.bNewscast?"/api/newscast/mynews/add.jsonp?pressId="+e:"/api/newsstand/mynews/addPress.jsonp?pressId="+e;var s=this;$Ajax(i,{type:"jsonp",timeout:5,onload:function(i){var n=i.json();"success"==n.result?s.fireEvent("subscribe",{pid:e,el:t}):JEagleEyeClient.sendError("[NewsStand] Mynews add failed  :"+n.reason)},onerror:function(e){JEagleEyeClient.sendError("[NewsStand] Mynews add failed(error) : "+e.text())},ontimeout:function(e){JEagleEyeClient.sendError("[NewsStand] Mynews add failed(timeout)")}}).request()},showSubscribeLayer:function(e,t){var i,s="";if("thumb"===e){i=$Element($$.getSingle("! .api_item",t));var n=$A($$(".api_item",".api_list"));s=this._getPositionClass(n.indexOf(i.$value()))}else i=$Element(t).parent();var a=$Template(this._sTplSubscribe).process({positionClass:s});this._welLayer.html(this._sTplDimmed+a)},showUnsubscribeLayer:function(e,t,i,s){var n,a="";if("thumb"===e){n=$Element($$.getSingle("! .api_item",s));var l=$A($$(".api_item",".api_list"));a=this._getPositionClass(l.indexOf(n.$value()))}else n=$Element(s).parent();var o;$A(t).forEach(function(e){e.pid===i&&(o=e,$A.Break())});var r=$Template(this._sTplUnsubscribe).process({positionClass:a,htPress:o});this._welLayer.html(this._sTplDimmed+r)},showDisabledSubscribeLayer:function(e,t){var i,s="";if("thumb"===e){i=$Element($$.getSingle("! .api_item",t));var n=$A($$(".api_item",".api_list"));s=this._getPositionClass(n.indexOf(i.$value()))}else i=$Element(t).parent();var a=$Template(this._sTplDisableSubscribe).process({positionClass:s});this._welLayer.html(this._sTplDimmed+a),setTimeout(function(){$$.getSingle("a._PM_newsstand_unsubscribe_no").focus()},0)},unsubscribePress:function(e){var t;t=this._htMySubscribe.bNewscast?"/api/newscast/mynews/del.jsonp?pressId="+e:"/api/newsstand/mynews/deletePress.jsonp?pressId="+e;var i=this;$Ajax(t,{type:"jsonp",timeout:5,onload:function(t){var s=t.json();"success"==s.result?i.fireEvent("unsubscribe",{pid:e}):JEagleEyeClient.sendError("[NewsStand] Mynews delete failed  :"+s.reason)},onerror:function(e){JEagleEyeClient.sendError("[NewsStand] Mynews delete failed(error) : "+e.text())},ontimeout:function(e){JEagleEyeClient.sendError("[NewsStand] Mynews delete failed(timeout)")}}).request()},_getPositionClass:function(e){var t="";return t="an_pos"+(e+1)},leaveSubscribeLayer:function(){this._welLayer.html("")}}).extend(jindo.Component),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.Timesquare=$Class({$init:function(e){this._initVars(e),this._initDraw(),this._attachEvent(),this._initComponent()},_initVars:function(e){this._elBase=$$.getSingle("._PM_timesquare_wrapper"),this._aOrderedPanel=e.aOrderedPanel,this._htOption=e,this._nIndex=this._getInitIndex(),this._nLastIndex=this._aOrderedPanel.length-1,this._htCachedPage={},this._sSelectedLanguageType=naver.main.CookieEditor.get({key:"PM_CK_conversation_language"})||"en",this._sTplNavi='<b class="hp_curr">{=currentPage}</b>/<span class="hp_total">{=total}</span>',this._oFilcking},_initDraw:function(){this._drawNavi(),this._htOption.isSupportedFlicking&&this._initFlicking()},_initComponent:function(){new naver.main.TimesquareWeatherCard({elBase:this._elBase}).attach({updatePage:$Fn(function(){this._requestPage({bForceUpdate:!0,nIndex:this._nIndex,onload:$Fn(function(e){this._drawTitle(e.html),this._drawList(this._getCenterPage(),e.html),this._drawNavi()},this).bind()})},this).bind()}),new naver.main.TimesquareConversationCard({elBase:this._elBase}).attach({updatePage:$Fn(function(){this._requestPage({bForceUpdate:!0,nIndex:this._nIndex,onload:$Fn(function(e){this._drawTitle(e.html),this._drawList(this._getCenterPage(),e.html),this._drawNavi()},this).bind()})},this).bind()}),new naver.main.TimesquareStockCard({elBase:this._elBase})},_attachEvent:function(){$Element(this._elBase).delegate("click","[data-custom-clk]",$Fn(this._onClickLink,this).bind()),$Element(this._elBase).delegate("click","._PM_timesquare_prev",$Fn(this._onClickPrev,this).bind()),$Element(this._elBase).delegate("click","._PM_timesquare_next",$Fn(this._onClickNext,this).bind())},_onClickLink:function(e){var t=e.element,i=$Element(t),s=i.attr("data-custom-clk");clickcr(t,s,"","","")},_onClickPrev:function(e){e.stopDefault(),this._oFlicking?this._oFlicking.movePrev(0):this._requestPage({nIndex:this._getPrevIndex(),onload:$Fn(function(e){this._nIndex=e.index;var t=$Element($$.getSingle(".flick-panel[data-code]",this._elBase));this._drawTitle(e.html),this._drawList(t,e.html),this._drawNavi()},this).bind()})},_onClickNext:function(e){if(e.stopDefault(),this._oFlicking)this._oFlicking.moveNext(0);else{var t=this._getNextIndex();this._requestPage({nIndex:t,onload:$Fn(function(e){this._nIndex=e.index;var t=$Element($$.getSingle(".flick-panel[data-code]",this._elBase));this._drawTitle(e.html),this._drawList(t,e.html),this._drawNavi()},this).bind()})}},_onClickLangType:function(e){e.stopDefault();var t=$Element($$.getSingle('.flick-panel[data-code="conversation"]',this._elBase));t.first().hide(),t.append(this._getLanguateTypeHTML())},_onClickLangClose:function(e){e.stopDefault();var t=$Element($$.getSingle('.flick-panel[data-code="conversation"]',this._elBase));$Element($$.getSingle("._PM_timesquare_lang_layer",t)).leave(),t.first().show()},_onClickLangOption:function(e){e.stopDefault(),this._sSelectedLanguageType=$Element(e.element).attr("data-lang"),naver.main.CookieEditor.set({key:"PM_CK_conversation_language",value:this._sSelectedLanguageType}),this._requestPage({bForceUpdate:!0,nIndex:this._nIndex,onload:$Fn(function(e){var t=$Element($$.getSingle(".flick-panel[data-code]",this._elBase));this._drawTitle(e.html),this._drawList(t,e.html),this._drawNavi()},this).bind()})},_getCenterPage:function(){var e;return e=this._oFlicking?this._oFlicking.getElement():$Element($$.getSingle(".flick-panel[data-code]",this._elBase))},_getInitIndex:function(){var e,t=$Element($$.getSingle("[data-code]",this._elBase)).attr("data-code");return $A(this._aOrderedPanel).forEach(function(i,s){i.code===t&&(e=s,$A.Break())}),e},_drawNavi:function(){var e=$$.getSingle("._PM_timesquare_navi",this._elBase);$Element(e).html($Template(this._sTplNavi).process({currentPage:this._nIndex+1,total:this._aOrderedPanel.length}))},_drawTitle:function(e){var t=$Element(e),i=t.query("._PM_timesquare_info");$Element(this._elBase).query("._PM_timesquare_info").html(i.html())},_drawList:function(e,t){var i=$Element(t),s=i.query("._PM_timesquare_list");e.attr("data-code",s.attr("data-code")),e.html(s.html()),this._htOption.isSupportedFlicking||naver.main.CookieEditor.set({key:"PM_CK_selectedTimesquare",value:s.attr("data-code"),expireDay:1/24/6})},_getPrevIndex:function(){var e=this._nIndex;return e--,e<0&&(e=this._nLastIndex),e},_getNextIndex:function(){var e=this._nIndex;return e++,e>this._nLastIndex&&(e=0),e},_requestPage:function(e){var t=this._getCategory(e.nIndex),i=!!e.bForceUpdate;if(!i&&this._htCachedPage[t])e.onload({html:this._htCachedPage[t],index:e.nIndex,lastIndex:this._nLastIndex});else{var s="/nvtimesquare?"+t,n=this,a=$Ajax(s,{timeout:5,method:"get",onload:function(i){n._htCachedPage[t]=i.text(),e.onload({html:i.text(),index:e.nIndex,lastIndex:n._nLastIndex})},onerror:function(){JEagleEyeClient.sendError("[naver.main.Timesquare] 로딩 실패: "+s)},ontimeout:function(){JEagleEyeClient.sendError("[naver.main.Timesquare] 로딩 timeout: "+s)}});a.request()}},_getCategory:function(e){return this._aOrderedPanel[e].code},_getLanguateTypeHTML:function(){return $Template(this._sTplLanguageType).process({type:this._sSelectedLanguageType})},_initFlicking:function(){var e=$Element($$.getSingle(".flick-container",this._elBase));e.append('<div class="flick-panel" style="position:absolute;top:0;left:0;width:100%;height:100%"></div>'),e.prepend('<div class="flick-panel" style="position:absolute;top:0;left:0;width:100%;height:100%"></div>');var t=this;this._oFlicking=new jindo.m.Flicking($$.getSingle(".flick-view",this._elBase),{nDuration:300,nTotalContents:3,nDefaultIndex:1,bUseDiagonalTouch:!0,sClassPrefix:"flick-",sContentClass:"panel",bUseCircular:!0,bAutoSize:!0}).attach({afterFlicking:function(e){var i;i=e.bLeft?t._getNextIndex():t._getPrevIndex();var s=this.getElement();t._requestPage({nIndex:i,onload:function(e){t._nIndex=e.index,t._drawTitle(e.html),t._drawNavi(),t._drawSidePanel(),naver.main.CookieEditor.set({key:"PM_CK_selectedTimesquare",value:s.attr("data-code"),expireDay:1/24/6})}})}}),this._drawSidePanel()},_drawSidePanel:function(){this._requestPage({nIndex:this._getPrevIndex(),onload:$Fn(function(e){this._drawList(this._oFlicking.getPrevElement(),e.html)},this).bind()}),this._requestPage({nIndex:this._getNextIndex(),onload:$Fn(function(e){this._drawList(this._oFlicking.getNextElement(),e.html)},this).bind()})}}),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.TimesquareWeatherCard=$Class({$init:function(e){this._initVars(e),this._setFromCookie(),this._attachEvent()},_initVars:function(e){this._elBase=e.elBase,this.domestic={level1Arr:[{code:"01",name:"강원도"},{code:"02",name:"경기도"},{code:"03",name:"경상남도"},{code:"04",name:"경상북도"},{code:"05",name:"광주광역시"},{code:"06",name:"대구광역시"},{code:"07",name:"대전광역시"},{code:"08",name:"부산광역시"},{code:"09",name:"서울특별시"},{code:"17",name:"세종특별자치시"},{code:"10",name:"울산광역시"},{code:"11",name:"인천광역시"},{code:"12",name:"전라남도"},{code:"13",name:"전라북도"},{code:"14",name:"제주도"},{code:"15",name:"충청남도"},{code:"16",name:"충청북도"}],level2Map:{},level3Map:{}},this.world,this.level0={},this.level1={},this.level2={},this.level3={},this._sTplRegionSelectLayer=['<div class="section_timesquare _PM_timesquare_weather_layer">','<div class="setting_layer sl_weather" role="alertdialog" style="display:block;">','<div class="sl_head">','<ol class="sl_hlist _PM_timesquare_weather_loc_title"></ol>','<a class="sl_btn_close _PM_timesquare_weather_close" href="#" data-custom-clk="squ_wea.close">','<i class="sl_ico_close" aria-hidden="true"></i><span class="blind">레이어 닫기</span>',"</a>","</div>",'<ul class="sl_list _PM_timesquare_weather_loc_list" aria-label="날씨 지역 설정"></ul>',"</div>","</div>"].join("")},_setFromCookie:function(){var e=naver.main.CookieEditor.get({key:"PM_CK_selectedRegion",type:"hash"});if(e&&(this.level0=e.level0,this.level1=e.level1,this.level2=e.level2,this.level3=e.level3,this.isWorld()&&!this.world)){var t=this,i=$Ajax("/include/timesquare/weatherLife/world.json",{timeout:3,onload:function(e){t.world=e.json()},onerror:function(){}});i.request()}},_attachEvent:function(){$Element(this._elBase).delegate("click","._PM_timesquare_weather_loc",$Fn(this._onClickWeatherRegion,this).bind()),$Element(this._elBase).delegate("click","._PM_timesquare_weather_close",$Fn(this._onClickWeatherRegionClose,this).bind()),$Element(this._elBase).delegate("click","._PM_timesquare_weather_loc_list a",$Fn(this._onClickWeatherRegionOption,this).bind()),$Element(this._elBase).delegate("click","._PM_timesquare_weather_loc_title  a",$Fn(this._onClickWeatherRegionTitle,this).bind())},_onClickWeatherRegion:function(e){e.stopDefault();var t=$Element(this._elBase);t.first().hide(),t.append(this._getRegionSelectLayerHTML()),this._updateRegionSelectLayer()},_onClickWeatherRegionClose:function(e){e.stopDefault(),this._deleteLayer()},_onClickWeatherRegionTitle:function(e){e.stopDefault();var t=$Element(e.element);if(!t.hasClass("is_selected")){var i=parseInt(t.attr("data-level"),10);switch(this.level3={},i){case 0:this.level2={},this.level1={},this._showLevel0List();break;case 1:this.level2={},this.isWorld()?this._showWorldLevel1List():this._showDomesticLevel1List();break;case 2:this.isWorld()||this._showDomesticLevel2List()}this._updateTitle(!0)}},_onClickWeatherRegionOption:function(e){e.stopDefault();var t=$Element(e.element),i=parseInt(t.attr("data-level"),10),s=t.attr("data-code"),n=t.attr("data-name");switch(i){case 0:this.level0.code=s,this.level0.name=n,this._updateTitle(),this.isWorld()?this._showWorldLevel1List():this._showDomesticLevel1List();break;case 1:this.level1.code=s,this.level1.name=n,this.isWorld()?this._showWorldLevel2List():this._showDomesticLevel2List(),this._updateTitle();break;case 2:this.level2.code=s,this.level2.name=n,this.isWorld()?(this._setCookie(s),this.fireEvent("updatePage"),this._deleteLayer()):(this._updateTitle(),this._showDomesticLevel3List());break;case 3:this.level3.code=s,this.level3.name=n,this._setCookie(s),this.fireEvent("updatePage"),this._deleteLayer()}},_getRegionSelectLayerHTML:function(){return $Template(this._sTplRegionSelectLayer).process()},_updateRegionSelectLayer:function(){this._updateTitle(),!this.isWorld()&&this.level3.code?this._showDomesticLevel3List():this.isWorld()&&this.level2.code?this._showWorldLevel2List():this._showLevel0List()},isWorld:function(){return!(!this.level0.code||2!=this.level0.code)},_updateTitle:function(e){var t=0,i=this.level0,s=this.level1,n=this.level2,a=this.level3,l="",o=this.isWorld();l+='<li class="sl_hitem"><a class="sl_tit_link" href="#" data-level="0" data-custom-clk="squ_wea.area">',l+=o?"해외":"국내",l+="</a></li>",(s.code||i.code&&!e)&&(l+='<li class="sl_hitem"><div class="sl_ico_arrow"></div><a class="sl_tit_link" href="#" data-level="1" data-custom-clk="squ_wea.area">',l+=s.name?s.name:o?"국가":"광역시/도",l+="</a></li>",t=1),""!=n.name&&(n.code||s.code&&!e)&&(l+='<li class="sl_hitem"><div class="sl_ico_arrow"></div><a class="sl_tit_link" href="#" data-level="2" data-custom-clk="squ_wea.area">',l+=n.name?n.name:o?"도시":"시/군구",l+="</a></li>",t=2),!o&&(a.code||n.code&&!e)&&(l+='<li class="sl_hitem"><div class="sl_ico_arrow"></div><a class="sl_tit_link" href="#" data-level="3" data-custom-clk="squ_wea.area">',l+=a.name?a.name:"동/읍/면",l+="</a></li>",t=3);var r=$Element("<div>"+l+"</div>");r.query("[data-level="+t+"]").addClass("is_selected"),$Element($$.getSingle("._PM_timesquare_weather_loc_title")).html(r.html())},_showLevel0List:function(){var e="";e=this.isWorld()?['<li class="sl_item"><a class="sl_link" href="#" data-level="0" data-code="1" data-name="국내" data-custom-clk="squ_wea.area">국내</a></li>','<li class="sl_item"><a class="sl_link is_selected" href="#" data-level="0" data-code="2" data-name="해외" data-custom-clk="squ_wea.area">해외</a></li>'].join(""):['<li class="sl_item"><a class="sl_link is_selected" href="#" data-level="0" data-code="1" data-name="국내" data-custom-clk="squ_wea.area">국내</a></li>','<li class="sl_item"><a class="sl_link" href="#" data-level="0" data-code="2" data-name="해외" data-custom-clk="squ_wea.area">해외</a></li>'].join(""),this._updateList(e,this.level0.code)},_showDomesticLevel1List:function(){var e=this.domestic.level1Arr,t=this.getListHtml(1,e);this._updateList(t,this.level1.code)},_showDomesticLevel2List:function(){var e=this.level1.code,t=this.domestic.level2Map;if(t[e]){var i=this.getListHtml(2,t[e]);this._updateList(i,this.level2.code),1==t[e].length&&""==t[e][0].name&&(this.level2.code=t[e][0].code,this.level2.name=t[e][0].name,this._showDomesticLevel3List());
}else{var s=this,n=$Ajax("/include/timesquare/weatherLife/"+e+".json",{timeout:3,onload:function(i){t[e]=i.json().lowerList;var n=s.getListHtml(2,t[e]);s._updateList(n,s.level2.code),1==t[e].length&&""==t[e][0].name&&(s.level2.code=t[e][0].code,s.level2.name=t[e][0].name,s._showDomesticLevel3List())},onerror:function(){}});n.request()}},_showDomesticLevel3List:function(){var e=this.level2.code,t=this.domestic.level3Map;if(t[e]){var i=this.getListHtml(3,t[e]);this._updateList(i,this.level3.code)}else{var s=this,n=$Ajax("/include/timesquare/weatherLife/"+e+".json",{timeout:3,onload:function(i){t[e]=i.json().lowerList;var n=s.getListHtml(3,t[e]);s._updateList(n,s.level3.code)},onerror:function(){}});n.request()}},getListHtml:function(e,t){var i="";for(var s in t){var n=t[s];i+='<li class="sl_item"><a class="sl_link" href="#" data-level="'+e+'"data-code="'+n.code+'" data-name="'+n.name+'" data-custom-clk="squ_wea.area">'+n.name+"</a></li>"}return i},_showWorldLevel1List:function(){var e="";if(this.world){for(var t in this.world){var i=this.world[t].worldRegionCategory;e+='<li class="sl_item"><a class="sl_link" href="#" data-level="1" data-code="'+i.regionCode+'" data-name="'+i.countryName+'" data-custom-clk="squ_wea.area">'+i.countryName+"</a></li>"}this._updateList(e,this.level1.code)}else{var s=this,n=$Ajax("/include/timesquare/weatherLife/world.json",{timeout:3,onload:function(t){s.world=t.json();for(var i in s.world){var n=s.world[i].worldRegionCategory;e+='<li class="sl_item"><a class="sl_link" href="#" data-level="1" data-code="'+n.regionCode+'" data-name="'+n.countryName+'" data-custom-clk="squ_wea.area">'+n.countryName+"</a></li>"}s._updateList(e,s.level1.code)},onerror:function(){}});n.request()}},_showWorldLevel2List:function(){var e="",t=null;for(var i in this.world){var s=this.world[i].worldRegionCategory;if(s.regionCode==this.level1.code){t=this.world[i].cityRegionCode;break}}if(null!=t){for(var i in t){var n=t[i];e+='<li class="sl_item"><a class="sl_link" href="#" data-level="2" data-code="'+n.regionCode+'" data-name="'+n.cityName+'" data-custom-clk="squ_wea.area">'+n.cityName+"</a></li>"}this._updateList(e,this.level2.code)}},_updateList:function(e,t){var i=$Element("<div>"+e+"</div>");t&&i.query("[data-code="+t+"]").addClass("is_selected"),$Element($$.getSingle("._PM_timesquare_weather_loc_list")).html(i.html())},_setCookie:function(e){var t={};t.level0=this.level0,t.level1=this.level1,t.level2=this.level2,t.level3=this.level3,naver.main.CookieEditor.set({key:"PM_CK_selectedRegion",value:t,type:"hash",expireDay:365}),naver.main.CookieEditor.set({key:"PM_CK_selectedRcode",value:e,expireDay:365})},_deleteLayer:function(){var e=$Element(this._elBase);$Element($$.getSingle("._PM_timesquare_weather_layer",e)).leave(),e.first().show("block")}}).extend(jindo.Component),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.TimesquareConversationCard=$Class({$init:function(e){this._initVars(e),this._attachEvent()},_initVars:function(e){this._elBase=e.elBase,this._sSelectedLanguageType=naver.main.CookieEditor.get({key:"PM_CK_conversation_language"})||"en",this._sTplLanguageType=['<div class="section_timesquare _PM_timesquare_lang_layer">','<div class="type_conv">','<div class="setting_layer" role="alertdialog">','<div class="sl_head">','<div class="sl_tit_link">','<h4 class="sl_tit">학습 언어설정</h4>',"</div>",'<a class="sl_btn_close _PM_timesquare_lang_close" href="#" data-custom-clk="squ_lan.close">','<i class="sl_ico_close" aria-hidden="true"></i>','<span class="blind">레이어 닫기</span>',"</a>","</div>",'<ul class="sl_list" aria-label="사용가능 언어목록">','<li class="sl_item"><a class="sl_link{if type =="en"} is_selected{/if} _PM_timesquare_lang_option" href="#" data-lang="en" data-custom-clk="squ_lan.eng">영어</a></li>','<li class="sl_item"><a class="sl_link{if type =="cn"} is_selected{/if} _PM_timesquare_lang_option" href="#" data-lang="cn" data-custom-clk="squ_lan.chi">중국어</a></li>','<li class="sl_item"><a class="sl_link{if type =="jp"} is_selected{/if} _PM_timesquare_lang_option" href="#" data-lang="jp" data-custom-clk="squ_lan.jap">일본어</a></li>',"</ul>","</div>","</div>","</div>"].join("")},_attachEvent:function(){$Element(this._elBase).delegate("click","._PM_timesquare_lang_type",$Fn(this._onClickLangType,this).bind()),$Element(this._elBase).delegate("click","._PM_timesquare_lang_close",$Fn(this._onClickLangClose,this).bind()),$Element(this._elBase).delegate("click","._PM_timesquare_lang_option",$Fn(this._onClickLangOption,this).bind())},_onClickLangType:function(e){e.stopDefault();var t=$Element(this._elBase);t.first().hide(),t.append(this._getLanguateTypeHTML())},_onClickLangClose:function(e){e.stopDefault(),this._closeLayer()},_onClickLangOption:function(e){e.stopDefault(),this._sSelectedLanguageType=$Element(e.element).attr("data-lang"),naver.main.CookieEditor.set({key:"PM_CK_conversation_language",value:this._sSelectedLanguageType,expireDay:365}),this._closeLayer(),this.fireEvent("updatePage")},_getLanguateTypeHTML:function(){return $Template(this._sTplLanguageType).process({type:this._sSelectedLanguageType})},_closeLayer:function(){var e=$Element(this._elBase);$Element($$.getSingle("._PM_timesquare_lang_layer",e)).leave(),e.first().show()}}).extend(jindo.Component),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.TimesquareStockCard=$Class({$init:function(e){this._initVars(e),this._attachEvent()},_initVars:function(e){this._elBase=e.elBase},_attachEvent:function(){$Element(this._elBase).delegate("click",'.flick-panel[data-code="finance"] .ts_s_btn',$Fn(this._onClickSubmit,this).bind()),$Element(this._elBase).delegate("submit",'.flick-panel[data-code="finance"] .PM_CL_timesquareStockForm',$Fn(this._onClickSubmit,this).bind())},_onClickSubmit:function(e){e.stopDefault();var t=$$.getSingle('.flick-panel[data-code="finance"] .ts_s_input',this._elBase),i="";i=""!==t.value?"https://finance.naver.com/search/search.nhn?command=main&ref=top_search&encoding=UTF-8&query="+encodeURIComponent(t.value):"http://finance.naver.com/",location.href=i}}),"undefined"==typeof naver&&(naver={}),naver.main=naver.main||{},naver.main.RealtimeKeyword=$Class({$init:function(){this._initVars(),this._initDraw(),this._initComponent(),this._attachEvent(),this._updateHref()},_initVars:function(){this._elBase=$$.getSingle(".PM_CL_realtimeKeyword_base"),this._welRollingBase=$Element($$.getSingle(".PM_CL_realtimeKeyword_rolling_base",this._elBase)),this._welListBase=$Element($$.getSingle(".PM_CL_realtimeKeyword_list_base",this._elBase)),this._oAutoRolling,this._nFocusIndex,this._elFocus},_initDraw:function(){var e=$Date(svt.slice(0,4),1*svt.slice(4,6)-1,svt.slice(6,8),svt.slice(8,10),svt.slice(10,12),svt.slice(12,14)),t=this._welListBase.query("[data-time]");if(t){var i=t.attr("data-time");if(i){var s=$Date(i.slice(0,4),1*i.slice(4,6)-1,i.slice(6,8),i.slice(8,10),i.slice(10,12),i.slice(12,14)),n=(e.time()-s.time())/1e3;if(n>60){var a='<p class="ah_error">일시적 오류로 최신 정보를 제공할 수 없습니다.</p>';t.before(a)}}}},_initComponent:function(){var e=$$.getSingle(".PM_CL_realtimeKeyword_rolling",this._elBase),t=this;this._oAutoRolling=new naver.main.AutoRolling(e).attach({stop:function(e){this.deactivate(),t._drawViewer("list"),t._nFocusIndex=e.nIndex,t._drawList(e.bisMouseFocus)}})},_attachEvent:function(){var e=this._welListBase.queryAll("a");$Fn(this._onMouseOut,this).attach(this._welListBase.$value(),"mouseleave"),$Fn(this._rankTitleKeyDown,this).attach(e[0],"keydown"),$Fn(this._rankMoreKeyDown,this).attach(e[e.length-1],"keydown"),this._welListBase.delegate("click",".ah_tab_btn",$Fn(this._onClickTab,this).bind())},_rankTitleKeyDown:function(e){if(e.key().shift&&9==e.key().keyCode){var t=this;setTimeout(function(){$$.getSingle("#PM_ID_btnServiceMore").focus(),t._drawViewer("rolling"),t._oAutoRolling.activate(),t._oAutoRolling.start(0)},0)}},_rankMoreKeyDown:function(e){9==e.key().keyCode&&0==e.key().shift&&(this._drawViewer("rolling"),this._oAutoRolling.activate(),this._oAutoRolling.start(0))},_updateHref:function(){var e=naver.main.CookieEditor.get({key:"nx_ssl"}),t=$A($Element(this._elBase).queryAll("a[data-ssl]"));t.forEach(function(t){var i=$Element(t);"2"===e&&i.attr("href",i.attr("data-ssl")),i.attr("data-ssl",null)})},_onMouseOut:function(e){var t=e.relatedElement;t&&$$.getSingle("! .PM_CL_realtimeKeyword_list_base",e.relatedElement)||(this._drawViewer("rolling"),this._oAutoRolling.activate(),this._oAutoRolling.start(0))},_onClickTab:function(e){e.stopDefault();var t=$Element(e.element),i=t.attr("data-tab");this._drawList(!1,i)},_drawViewer:function(e){this._welRollingBase.attr("aria-hidden",!0),this._welListBase.attr("aria-hidden",!0),"list"===e?(naver.main.FlashLoginArea.hide(),this._welListBase.attr("aria-hidden",!1)):"rolling"===e&&(naver.main.FlashLoginArea.show(),this._welRollingBase.attr("aria-hidden",!1))},_drawList:function(e,t){var i,s=this._nFocusIndex;i=t?t:s<10?"1to10":"11to20",$ElementList(this._welListBase.queryAll("[data-list]")).hide(),$Element(this._welListBase.query("[data-list="+i+"]")).show("block"),$ElementList(this._welListBase.queryAll(".ah_tab_btn")).removeClass("ah_tab_on");var n=$Element(this._welListBase.query("[data-tab="+i+"]"));n.addClass("ah_tab_on");var a=$Element(this._welListBase.query(".PM_CL_realtimeKeyword_sublist_heading"));a&&a.text("급상승 검색어 "+n.text());var l=$ElementList(this._welListBase.queryAll("[data-order]"));if(0!==l.length()){l.removeClass("ah_on");var o=l.get(s);o.addClass("ah_on"),e||this._welListBase.queryAll("a")[0].$value().focus()}}}).extend(jindo.Component);