!function(a,b){if("function"==typeof define&&define.amd)define(["../../../../../../../../.","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice;b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;i<k;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;l<m;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;m<n;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return!!this.hasChanged()&&c.clone(this.changed);var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return!!b.set(b.parse(c,a),a)&&(d&&d(b,c,a),void b.trigger("sync",b,c,a))},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),!(c.isObject(b)&&!i.set(b,d))&&(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return!d||(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1)}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;e<f;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!(o||!u||!w)&&[];for(e=0,f=a.length;e<f;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;e<f;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;e<f;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;e<f;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;e<f;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){if(null!=a)return this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a,b){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){if(a.setRequestHeader("X-HTTP-Method-Override",f),h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:/%/.test(a)?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||e<=7);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b!==this.fragment&&(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b});var go=go||{};go.utils=function(){var a=Number.EPSILON||2.220446049250313e-16,b=function(a,b,c,d,e){"string"!=typeof d&&(d="m"),"number"!=typeof e&&(e=0);var f=a/b,g={w:c,h:c};switch(d){case"m":f>1?g.h=Math.round(g.w/f):f<1&&(g.w=Math.round(g.h*f));break;case"l":f>1?g.w=Math.round(g.h*f):f<1&&(g.h=Math.round(g.w/f));break;case"w":g.h=Math.round(g.w/f);break;case"h":g.w=Math.round(g.h*f)}return e>0&&(g.w=Math.min(g.w,e),g.h=Math.min(g.h,e)),g},c=function(a,b){pxt("jserrcapt","web"),"prod"!==STP.environment&&console.error(a),STP.ravenDSN&&Raven.captureException(a,{extra:b,tags:{exception:"caught"}})},d=function(a,b){if("string"!=typeof b&&(b=":"),a=parseInt(a),isNaN(a))return"";var c="",d=a%60,e=Math.floor(a/60)%60,f=Math.floor(a/3600);return f>0&&(c+=(f<10?"0":"")+f+b),c+=(e<10?"0":"")+e+b+(d<10?"0":"")+d},e=function(a,b,c){if(a=parseFloat(a),isNaN(a))return"";"number"!=typeof b&&(b=-1);var d=a%1;if(!d&&b<=0)return parseInt(a).toString();var e=a.toFixed(Math.abs(b));return c&&0!==b&&(e=e.replace(/0+$/g,"").replace(/\.$/,"")),e},f=function(a,b){if(isNaN(a))return"не число";var c=a<0?"-":"";if(!isFinite(a))return c+"∞";b=b||{},_.defaults(b,{useGrouping:!0,thousandSeparator:" ",decimalSeparator:",",minimumIntegerDigits:1,minimumFractionDigits:0,maximumFractionDigits:3}),b.maximumFractionDigits<b.minimumFractionDigits&&(b.maximumFractionDigits=b.minimumFractionDigits);var d=a.toFixed(b.maximumFractionDigits).split(".");1===d.length&&d.push(""),d[0].length<b.minimumIntegerDigits&&(d[0]=new Array(b.minimumIntegerDigits-d[0].length+1).join("0")+d[0]),b.useGrouping&&(d[0]=d[0].replace(/\B(?=(\d{3})+(?!\d))/g,b.thousandSeparator)),d[1]=d[1].replace(/0+$/g,""),d[1].length<b.minimumFractionDigits?d[1]+=new Array(b.minimumFractionDigits-d[1].length+1).join("0"):d[1].length>b.maximumFractionDigits&&(d[1]=Number(c+"0."+d[1]).toFixed(b.maximumFractionDigits).split(".")[1]);var e=d[0];return d[1].length&&(e+=b.decimalSeparator+d[1]),e},g=function(a,b){var c=10*b;return Math.floor(a*c)/c},h=function(a,b,c,d){if(a=parseInt(a),"string"==typeof d){var e=[b,c,d],f=[2,0,1,1,1,2],g=Math.abs(a)%100;return e[g>4&&g<20?2:f[g%10<5?g%10:5]]}return 1===Math.abs(a)?b:c},i=function(a,b,c,d,e){return a=parseFloat(a),"string"==typeof e&&Number(a)===a&&a%1>0?e:h(a,b,c,d)},j=function(a,b,c,d){var e,f,i,j,k="",l=1e3,m=["тыс.","млн","млрд","трлн"],n=1,o=1;if(a=parseInt(a,10),!isNaN(a)){if(a>=l)for(e=l,j=0;j<m.length;j++){if(a<e*l){f=a/e,k=j<n?Math.floor(f):g(f,o).toLocaleString(),k+=" "+m[j];break}e*=l}else k=a;b&&c&&d&&(i=a>l?d:h(a,b,c,d),k+=" "+i)}return k},k=function(a,b,c){if("number"!=typeof b&&(b=0),"string"!=typeof c&&(c="common"),a=parseFloat(a),isNaN(a))return"";var d;return d="common"===c?Math.round:Math[c],d(a*Math.pow(10,b))/Math.pow(10,b)},l=function(a,b,c,d){if(!a)return"";if("number"!=typeof b&&(b=255),"string"!=typeof d&&(d="…"),a=String(a),a.length<=b)return a;if(c)return a.substr(0,b)+d;var e=a.substr(0,b).lastIndexOf(" "),f=e>0?a.slice(0,e):a;return f.length<b&&(f+=" "),f+d},m=function(a,b,c,d){return a?("number"!=typeof b&&(b=255),"string"!=typeof d&&(d="…"),c||(d=" "+d),a=String(a),$.truncate(a,{words:!c,length:b+1,ellipsis:d})):""};m.safe=!0;var n=function(a,b){if(a.length>b){for(var c=a.split(""),d=0,e=0;e<c.length&&!(e>=b&&d>0);e++)" "==c[e]&&(d=e);return d>0&&(c[d]="<br>"),c.join("")}return a},o=function(a){return a.replace(/%(u[\da-f]{4}|[\da-f]{2})/gi,function(a){return String.fromCharCode(parseInt(a.substring(a.length>3?2:1),16))})},p=function(a,b){var c={pretty:!1,stripwww:!1,level:null};"object"==typeof b&&_.extend(c,b);var d=new URI(String(a)),e=d.hostname();if(!e)return"";var f=e.split(".");return c.stripwww&&"www"===f[0]&&f.length>2&&f.splice(0,1),null!==c.level&&"number"==typeof c.level&&0!==c.level&&f.length>Math.abs(c.level)&&(f=c.level<0?f.slice(0,Math.abs(c.level)):f.slice(-c.level)),e=f.join("."),c.pretty&&(e=punycode.toUnicode(e)),e},q=function(a){if("object"==typeof a){var b=new URI("?");return b.escapeQuerySpace(!1),b.setSearch(a),b.query()}return URI.encode(a)};q.safe=!0;var r=function(a,b,c,d){var e=new URI(a),f=e.hostname(),g=s(b,c,d);return e.escapeQuerySpace(!1),f&&"mail.ru"!==f&&f.indexOf(".mail.ru",f.length-".mail.ru".length)===-1?e.setSearch(_.extend({},g)):e.setSearch(_.extend({},go.paramsSticky,g)),e.href()},s=function(a,b,c){var d=["q","nosp","advs","ge","file","site","sf"],e={},f={};if(b)for(var g=b.join(" "),h=0;h<d.length;h++)d[h]in go.paramsCommon&&g.indexOf(d[h])!==-1&&(e[d[h]]=go.paramsCommon[d[h]]);c?(go.paramsCommon=e,f=$.extend(go.paramsCommon,a)):f=$.extend({},e,a);for(var i in f)null!==f[i]&&"undefined"!=typeof f[i]||delete f[i];return f},t=function(a,b){if(!a)return"";var c={scheme:"http",stripscheme:!0,stripwww:!1,stripport:!1,stripauth:!0,stripfrag:!0,strippath:!1};"object"==typeof b&&_.extend(c,b);var d="",e=new URI(String(a).replace(/\+/g,"%20")),f=e.hostname();if(f){c.stripscheme||(d+=c.scheme+"://"),c.stripauth||(d+=URI.decode(URI.buildUserinfo({username:e.username(),password:e.password()})));var g=f.split(".");c.stripwww&&"www"===g[0]&&g.length>2&&(f=f.substr(4)),d+=punycode.toUnicode(f)}if(!c.stripport){var h=e.port();h&&(d+=":"+h)}if(!c.strippath){var i=e.path(),j=e.search(),k=e.fragment();try{i=URI.decode(i),j=URI.decode(j),k=URI.decode(k)}catch(l){}(i&&"/"!==i||j||k)&&(d+=i?i:"/"),j&&(d+=j),!c.stripfrag&&k&&(d+="#"+k)}return d},u=function(a){for(var b=o("%u0402%u0403%u201A%u0453%u201E%u2026%u2020%u2021%u20AC%u2030%u0409%u2039%u040A%u040C%u040B%u040F%u0452%u2018%u2019%u201C%u201D%u2022%u2013%u2014%u0000%u2122%u0459%u203A%u045A%u045C%u045B%u045F%u00A0%u040E%u045E%u0408%u00A4%u0490%u00A6%u00A7%u0401%u00A9%u0404%u00AB%u00AC%u00AD%u00AE%u0407%u00B0%u00B1%u0406%u0456%u0491%u00B5%u00B6%u00B7%u0451%u2116%u0454%u00BB%u0458%u0405%u0455%u0457"),c=function(a){return a>=192&&a<=255?String.fromCharCode(a-192+1040):a>=128&&a<=191?b.charAt(a-128):String.fromCharCode(a)},d="",e=0;e<a.length;e++)d+=c(a.charCodeAt(e));return d},v=function(a){for(var b={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,127:127,1027:129,8225:135,1046:198,8222:132,1047:199,1168:165,1048:200,1113:154,1049:201,1045:197,1050:202,1028:170,160:160,1040:192,1051:203,164:164,166:166,167:167,169:169,171:171,172:172,173:173,174:174,1053:205,176:176,177:177,1114:156,181:181,182:182,183:183,8221:148,187:187,1029:189,1056:208,1057:209,1058:210,8364:136,1112:188,1115:158,1059:211,1060:212,1030:178,1061:213,1062:214,1063:215,1116:157,1064:216,1065:217,1031:175,1066:218,1067:219,1068:220,1069:221,1070:222,1032:163,8226:149,1071:223,1072:224,8482:153,1073:225,8240:137,1118:162,1074:226,1110:179,8230:133,1075:227,1033:138,1076:228,1077:229,8211:150,1078:230,1119:159,1079:231,1042:194,1080:232,1034:140,1025:168,1081:233,1082:234,8212:151,1083:235,1169:180,1084:236,1052:204,1085:237,1035:142,1086:238,1087:239,1088:240,1089:241,1090:242,1036:141,1041:193,1091:243,1092:244,8224:134,1093:245,8470:185,1094:246,1054:206,1095:247,1096:248,8249:139,1097:249,1098:250,1044:196,1099:251,1111:191,1055:207,1100:252,1038:161,8220:147,1101:253,8250:155,1102:254,8216:145,1103:255,1043:195,1105:184,1039:143,1026:128,1106:144,8218:130,1107:131,8217:146,1108:186,1109:190},c=[],d=0;d<a.length;d++){var e=a.charCodeAt(d);e in b?c.push("%"+b[e].toString(16)):c.push("%3F")}return c.join("").toUpperCase()},w=function(){var a,b=function(){var a=$.Deferred();if(null===document.getElementById("dgLoader")){var b=document.createElement("script");b.src="//maps.api.2gis.ru/2.0/loader.js?pkg=full",b.type="text/javascript",b.id="dgLoader",b.setAttribute("data-id","dgLoader"),b.onload=function(){c(a)},b.onerror=function(){a.reject()};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)}else c(a);return a.promise()},c=function(a){"DG"in window?a.resolve():a.reject()};return function(){return a||(a=b()),a}}(),x=function(){var a,b=function(){var a=$.Deferred();if(null===document.getElementById("waLoader")){var b=document.createElement("script");b.src="//img.imgsmail.ru/webim/agent/release/loader.js?branch=wa-750",b.type="text/javascript",b.id="waLoader",b.setAttribute("data-id","waLoader"),b.onload=function(){c(a)},b.onerror=function(){a.reject()};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)}else c(a);return a.promise()},c=function(a){"WebAgent"in window?a.resolve():a.reject()};return function(){return a||(a=b()),a}}(),y=function(b,c,d){return d=d||0,Math.abs(b-c)-d<a},z=function(a){function b(a){var b="";return a.forEach(function(a,c){return"00:00"===a.from&&"24:00"===a.to?void(b="круглосуточно"):(b+=c?", ":"",void(b+=a.from+"-"+a.to))}),b}function c(a,b,c){var d=a;return d+=a!==b?"-"+b:"","пн"===a&&"вс"===b&&(d="ежедневно"),d+=" ("+c+")"}var d="",e="",f="";return a.forEach(function(g,h){if(0===h)f=b(g.val),e=g.day;else{var i=b(g.val);if(i!==f){var j=a[h-1].day;d+=c(e,j,f)+", ",f=i,e=g.day}h===a.length-1&&(d+=c(e,g.day,f))}}),d};return{calcSizes:b,captureException:c,duration:d,floatformat:e,formatnumber:f,formatNumberToShortText:j,plural:h,floatplural:i,round:k,truncate:l,htmltruncate:m,ellipsisHelper:n,urldomain:p,urlFor:r,unescape:o,urlForObj:s,urlescape:q,urlpretty:t,win2utf:u,utf2win:v,load2gisMap:w,loadWebAgent:x,approxeq:y,scheduleToStr:z}}(),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("../lib/swig");"function"==typeof window.define&&"object"==typeof window.define.amd?window.define("swig",[],function(){return d}):window.swig=d},{"../lib/swig":9}],2:[function(a,b,c){var d=a("./utils"),e={full:["January","February","March","April","May","June","July","August","September","October","November","December"],abbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},f={full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],alt:{"-1":"Yesterday",0:"Today",1:"Tomorrow"}};c.tzOffset=0,c.DateZ=function(){var a={"default":["getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","toISOString","toGMTString","toUTCString","valueOf","getTime"],z:["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getYear","toDateString","toLocaleDateString","toLocaleTimeString"]},b=this;b.date=b.dateZ=arguments.length>1?new Date(Date.UTC.apply(Date,arguments)+6e4*(new Date).getTimezoneOffset()):1===arguments.length?new Date(new Date(arguments[0])):new Date,b.timezoneOffset=b.dateZ.getTimezoneOffset(),d.each(a.z,function(a){b[a]=function(){return b.dateZ[a]()}}),d.each(a["default"],function(a){b[a]=function(){return b.date[a]()}}),this.setTimezoneOffset(c.tzOffset)},c.DateZ.prototype={getTimezoneOffset:function(){return this.timezoneOffset},setTimezoneOffset:function(a){return this.timezoneOffset=a,this.dateZ=new Date(this.date.getTime()+6e4*this.date.getTimezoneOffset()-6e4*this.timezoneOffset),this}},c.d=function(a){return(a.getDate()<10?"0":"")+a.getDate()},c.D=function(a){return f.abbr[a.getDay()]},c.j=function(a){return a.getDate()},c.l=function(a){return f.full[a.getDay()]},c.N=function(a){var b=a.getDay();return b>=1?b:7},c.S=function(a){var b=a.getDate();return b%10===1&&11!==b?"st":b%10===2&&12!==b?"nd":b%10===3&&13!==b?"rd":"th"},c.w=function(a){return a.getDay()},c.z=function(a,b,d){var e=a.getFullYear(),f=new c.DateZ(e,a.getMonth(),a.getDate(),12,0,0),g=new c.DateZ(e,0,1,12,0,0);return f.setTimezoneOffset(b,d),g.setTimezoneOffset(b,d),Math.round((f-g)/864e5)},c.W=function(a){var b,c=new Date(a.valueOf()),d=(a.getDay()+6)%7;return c.setDate(c.getDate()-d+3),b=c.valueOf(),c.setMonth(0,1),
4!==c.getDay()&&c.setMonth(0,1+(4-c.getDay()+7)%7),1+Math.ceil((b-c)/6048e5)},c.F=function(a){return e.full[a.getMonth()]},c.m=function(a){return(a.getMonth()<9?"0":"")+(a.getMonth()+1)},c.M=function(a){return e.abbr[a.getMonth()]},c.n=function(a){return a.getMonth()+1},c.t=function(a){return 32-new Date(a.getFullYear(),a.getMonth(),32).getDate()},c.L=function(a){return 29===new Date(a.getFullYear(),1,29).getDate()},c.o=function(a){var b=new Date(a.valueOf());return b.setDate(b.getDate()-(a.getDay()+6)%7+3),b.getFullYear()},c.Y=function(a){return a.getFullYear()},c.y=function(a){return a.getFullYear().toString().substr(2)},c.a=function(a){return a.getHours()<12?"am":"pm"},c.A=function(a){return a.getHours()<12?"AM":"PM"},c.B=function(a){var b,c=a.getUTCHours();return c=23===c?0:c+1,b=Math.abs((60*(60*c+a.getUTCMinutes())+a.getUTCSeconds())/86.4).toFixed(0),"000".concat(b).slice(b.length)},c.g=function(a){var b=a.getHours();return 0===b?12:b>12?b-12:b},c.G=function(a){return a.getHours()},c.h=function(a){var b=a.getHours();return(b<10||12<b&&22>b?"0":"")+(b<12?b:b-12)},c.H=function(a){var b=a.getHours();return(b<10?"0":"")+b},c.i=function(a){var b=a.getMinutes();return(b<10?"0":"")+b},c.s=function(a){var b=a.getSeconds();return(b<10?"0":"")+b},c.O=function(a){var b=a.getTimezoneOffset();return(b<0?"-":"+")+(b/60<10?"0":"")+Math.abs(b/60)+"00"},c.Z=function(a){return 60*a.getTimezoneOffset()},c.c=function(a){return a.toISOString()},c.r=function(a){return a.toUTCString()},c.U=function(a){return a.getTime()/1e3}},{"./utils":26}],3:[function(a,b,c){function d(a){var b=this,c={};return e.isArray(a)?e.map(a,function(a){return b.apply(null,arguments)}):"object"==typeof a?(e.each(a,function(a,d){c[d]=b.apply(null,arguments)}),c):void 0}var e=a("./utils"),f=a("./dateformatter");c.addslashes=function(a){var b=d.apply(c.addslashes,arguments);return void 0!==b?b:a.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"')},c.capitalize=function(a){var b=d.apply(c.capitalize,arguments);return void 0!==b?b:a.toString().charAt(0).toUpperCase()+a.toString().substr(1).toLowerCase()},c.date=function(a,b,c,d){var e,g=b.length,h=new f.DateZ(a),i=0,j="";for(c&&h.setTimezoneOffset(c,d),i;i<g;i+=1)e=b.charAt(i),"\\"===e?(i+=1,j+=i<g?b.charAt(i):e):j+=f.hasOwnProperty(e)?f[e](h,c,d):e;return j},c["default"]=function(a,b){return"undefined"==typeof a||!a&&"number"!=typeof a?b:a},c.escape=function(a,b){var e,f=d.apply(c.escape,arguments),g=a,h=0;if(void 0!==f)return f;if("string"!=typeof a)return a;switch(f="",b){case"js":for(g=g.replace(/\\/g,"\\u005C"),h;h<g.length;h+=1)e=g.charCodeAt(h),e<32?(e=e.toString(16).toUpperCase(),e=e.length<2?"0"+e:e,f+="\\u00"+e):f+=g[h];return f.replace(/&/g,"\\u0026").replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\'/g,"\\u0027").replace(/"/g,"\\u0022").replace(/\=/g,"\\u003D").replace(/-/g,"\\u002D").replace(/;/g,"\\u003B");default:return g.replace(/&(?!amp;|lt;|gt;|quot;|#39;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}},c.e=c.escape,c.first=function(a){if("object"==typeof a&&!e.isArray(a)){var b=e.keys(a);return a[b[0]]}return"string"==typeof a?a.substr(0,1):a[0]},c.groupBy=function(a,b){if(!e.isArray(a))return a;var c={};return e.each(a,function(a){if(a.hasOwnProperty(b)){var d=a[b];e.extend({},a);delete a[b],c[d]||(c[d]=[]),c[d].push(a)}}),c},c.join=function(a,b){if(e.isArray(a))return a.join(b);if("object"==typeof a){var c=[];return e.each(a,function(a){c.push(a)}),c.join(b)}return a},c.json=function(a,b){return JSON.stringify(a,null,b||0)},c.json_encode=c.json,c.last=function(a){if("object"==typeof a&&!e.isArray(a)){var b=e.keys(a);return a[b[b.length-1]]}return"string"==typeof a?a.charAt(a.length-1):a[a.length-1]},c.lower=function(a){var b=d.apply(c.lower,arguments);return void 0!==b?b:a.toString().toLowerCase()},c.raw=function(a){return c.safe(a)},c.raw.safe=!0,c.replace=function(a,b,c,d){var e=new RegExp(b,d);return a.replace(e,c)},c.reverse=function(a){return c.sort(a,!0)},c.safe=function(a){return a},c.safe.safe=!0,c.sort=function(a,b){var c;if(e.isArray(a))c=a.sort();else switch(typeof a){case"object":c=e.keys(a).sort();break;case"string":return c=a.split(""),b?c.reverse().join(""):c.sort().join("")}return c&&b?c.reverse():c||a},c.striptags=function(a){var b=d.apply(c.striptags,arguments);return void 0!==b?b:a.toString().replace(/(<([^>]+)>)/gi,"")},c.title=function(a){var b=d.apply(c.title,arguments);return void 0!==b?b:a.toString().replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},c.uniq=function(a){var b;return a&&e.isArray(a)?(b=[],e.each(a,function(a){b.indexOf(a)===-1&&b.push(a)}),b):""},c.upper=function(a){var b=d.apply(c.upper,arguments);return void 0!==b?b:a.toString().toUpperCase()},c.url_encode=function(a){var b=d.apply(c.url_encode,arguments);return void 0!==b?b:encodeURIComponent(a)},c.url_decode=function(a){var b=d.apply(c.url_decode,arguments);return void 0!==b?b:decodeURIComponent(a)}},{"./dateformatter":2,"./utils":26}],4:[function(a,b,c){function d(a){var b;return e.some(g,function(c){return e.some(c.regex,function(d){var e,f=a.match(d);if(f)return e=f[c.idx||0].replace(/\s*$/,""),e=c.hasOwnProperty("replace")&&c.replace.hasOwnProperty(e)?c.replace[e]:e,b={match:e,type:c.type,length:f[0].length},!0})}),b||(b={match:a,type:f.UNKNOWN,length:a.length}),b}var e=a("./utils"),f={WHITESPACE:0,STRING:1,FILTER:2,FILTEREMPTY:3,FUNCTION:4,FUNCTIONEMPTY:5,PARENOPEN:6,PARENCLOSE:7,COMMA:8,VAR:9,NUMBER:10,OPERATOR:11,BRACKETOPEN:12,BRACKETCLOSE:13,DOTKEY:14,ARRAYOPEN:15,CURLYOPEN:17,CURLYCLOSE:18,COLON:19,COMPARATOR:20,LOGIC:21,NOT:22,BOOL:23,ASSIGNMENT:24,METHODOPEN:25,UNKNOWN:100},g=[{type:f.WHITESPACE,regex:[/^\s+/]},{type:f.STRING,regex:[/^""/,/^".*?[^\\]"/,/^''/,/^'.*?[^\\]'/]},{type:f.FILTER,regex:[/^\|\s*(\w+)\(/],idx:1},{type:f.FILTEREMPTY,regex:[/^\|\s*(\w+)/],idx:1},{type:f.FUNCTIONEMPTY,regex:[/^\s*(\w+)\(\)/],idx:1},{type:f.FUNCTION,regex:[/^\s*(\w+)\(/],idx:1},{type:f.PARENOPEN,regex:[/^\(/]},{type:f.PARENCLOSE,regex:[/^\)/]},{type:f.COMMA,regex:[/^,/]},{type:f.LOGIC,regex:[/^(&&|\|\|)\s*/,/^(and|or)\s+/],idx:1,replace:{and:"&&",or:"||"}},{type:f.COMPARATOR,regex:[/^(===|==|\!==|\!=|<=|<|>=|>|in\s|gte\s|gt\s|lte\s|lt\s)\s*/],idx:1,replace:{gte:">=",gt:">",lte:"<=",lt:"<"}},{type:f.ASSIGNMENT,regex:[/^(=|\+=|-=|\*=|\/=)/]},{type:f.NOT,regex:[/^\!\s*/,/^not\s+/],replace:{not:"!"}},{type:f.BOOL,regex:[/^(true|false)\s+/,/^(true|false)$/],idx:1},{type:f.VAR,regex:[/^[a-zA-Z_$]\w*((\.\$?\w*)+)?/,/^[a-zA-Z_$]\w*/]},{type:f.BRACKETOPEN,regex:[/^\[/]},{type:f.BRACKETCLOSE,regex:[/^\]/]},{type:f.CURLYOPEN,regex:[/^\{/]},{type:f.COLON,regex:[/^\:/]},{type:f.CURLYCLOSE,regex:[/^\}/]},{type:f.DOTKEY,regex:[/^\.(\w+)/],idx:1},{type:f.NUMBER,regex:[/^[+\-]?\d+(\.\d+)?/]},{type:f.OPERATOR,regex:[/^(\+|\-|\/|\*|%)/]}];c.types=f,c.read=function(a){for(var b,c,e=0,f=[];e<a.length;)b=a.substring(e),c=d(b),e+=c.length,f.push(c);return f}},{"./utils":26}],5:[function(a,b,c){var d=a("__browserify_process"),e=a("fs"),f=a("path");b.exports=function(a,b){var c={};return b=b||"utf8",a=a?f.normalize(a):null,c.resolve=function(b,c){return c=a?a:c?f.dirname(c):d.cwd(),f.resolve(c,b)},c.load=function(a,d){if(!e||d&&!e.readFile||!e.readFileSync)throw new Error("Unable to find file "+a+" because there is no filesystem to read from.");return a=c.resolve(a),d?void e.readFile(a,b,d):e.readFileSync(a,b)},c}},{__browserify_process:31,fs:28,path:29}],6:[function(a,b,c){c.fs=a("./filesystem"),c.memory=a("./memory")},{"./filesystem":5,"./memory":7}],7:[function(a,b,c){var d=a("path"),e=a("../utils");b.exports=function(a,b){var c={};return b=b?d.normalize(b):null,c.resolve=function(a,c){return c=b?b:c?d.dirname(c):"/",d.resolve(c,a)},c.load=function(b,c){var d,f;return f=[b,b.replace(/^(\/|\\)/,"")],d=a[f[0]]||a[f[1]],d||e.throwError('Unable to find template "'+b+'".'),c?void c(null,d):d},c}},{"../utils":26,path:29}],8:[function(a,b,c){function d(a){return a.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}function e(a,b,c,d,e){this.out=[],this.state=[],this.filterApplyIdx=[],this._parsers={},this.line=d,this.filename=e,this.filters=b,this.escape=c,this.parse=function(){var b=this;return b._parsers.start&&b._parsers.start.call(b),f.each(a,function(c,d){var e=a[d-1];if(b.isLast=d===a.length-1,e)for(;e.type===h.WHITESPACE;)d-=1,e=a[d-1];b.prevToken=e,b.parseToken(c)}),b._parsers.end&&b._parsers.end.call(b),b.escape&&(b.filterApplyIdx=[0],"string"==typeof b.escape?(b.parseToken({type:h.FILTER,match:"e"}),b.parseToken({type:h.COMMA,match:","}),b.parseToken({type:h.STRING,match:String(c)}),b.parseToken({type:h.PARENCLOSE,match:")"})):b.parseToken({type:h.FILTEREMPTY,match:"e"})),b.out}}var f=a("./utils"),g=a("./lexer"),h=g.types,i=["break","case","catch","continue","debugger","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with"];e.prototype={on:function(a,b){this._parsers[a]=b},parseToken:function(a){var b,c=this,d=c._parsers[a.type]||c._parsers["*"],e=a.match,g=c.prevToken,i=g?g.type:null,j=c.state.length?c.state[c.state.length-1]:null;if(!d||"function"!=typeof d||d.call(this,a))switch(j&&g&&j===h.FILTER&&i===h.FILTER&&a.type!==h.PARENCLOSE&&a.type!==h.COMMA&&a.type!==h.OPERATOR&&a.type!==h.FILTER&&a.type!==h.FILTEREMPTY&&c.out.push(", "),j&&j===h.METHODOPEN&&(c.state.pop(),a.type!==h.PARENCLOSE&&c.out.push(", ")),a.type){case h.WHITESPACE:break;case h.STRING:c.filterApplyIdx.push(c.out.length),c.out.push(e.replace(/\\/g,"\\\\"));break;case h.NUMBER:case h.BOOL:c.filterApplyIdx.push(c.out.length),c.out.push(e);break;case h.FILTER:c.filters.hasOwnProperty(e)&&"function"==typeof c.filters[e]||f.throwError('Invalid filter "'+e+'"',c.line,c.filename),c.escape=!c.filters[e].safe&&c.escape,c.out.splice(c.filterApplyIdx[c.filterApplyIdx.length-1],0,'_filters["'+e+'"]('),c.state.push(a.type);break;case h.FILTEREMPTY:c.filters.hasOwnProperty(e)&&"function"==typeof c.filters[e]||f.throwError('Invalid filter "'+e+'"',c.line,c.filename),c.escape=!c.filters[e].safe&&c.escape,c.out.splice(c.filterApplyIdx[c.filterApplyIdx.length-1],0,'_filters["'+e+'"]('),c.out.push(")");break;case h.FUNCTION:case h.FUNCTIONEMPTY:c.out.push("((typeof _ctx."+e+' !== "undefined") ? _ctx.'+e+" : ((typeof "+e+' !== "undefined") ? '+e+" : _fn))("),c.escape=!1,a.type===h.FUNCTIONEMPTY?c.out[c.out.length-1]=c.out[c.out.length-1]+")":c.state.push(a.type),c.filterApplyIdx.push(c.out.length-1);break;case h.PARENOPEN:c.state.push(a.type),c.filterApplyIdx.length?(c.out.splice(c.filterApplyIdx[c.filterApplyIdx.length-1],0,"("),g&&i===h.VAR?(b=g.match.split(".").slice(0,-1),c.out.push(" || _fn).call("+c.checkMatch(b)),c.state.push(h.METHODOPEN),c.escape=!1):c.out.push(" || _fn)("),c.filterApplyIdx.push(c.out.length-3)):(c.out.push("("),c.filterApplyIdx.push(c.out.length-1));break;case h.PARENCLOSE:b=c.state.pop(),b!==h.PARENOPEN&&b!==h.FUNCTION&&b!==h.FILTER&&f.throwError("Mismatched nesting state",c.line,c.filename),c.out.push(")"),c.filterApplyIdx.pop(),b!==h.FILTER&&c.filterApplyIdx.pop();break;case h.COMMA:j!==h.FUNCTION&&j!==h.FILTER&&j!==h.ARRAYOPEN&&j!==h.CURLYOPEN&&j!==h.PARENOPEN&&j!==h.COLON&&f.throwError("Unexpected comma",c.line,c.filename),j===h.COLON&&c.state.pop(),c.out.push(", "),c.filterApplyIdx.pop();break;case h.LOGIC:case h.COMPARATOR:g&&i!==h.COMMA&&i!==a.type&&i!==h.BRACKETOPEN&&i!==h.CURLYOPEN&&i!==h.PARENOPEN&&i!==h.FUNCTION||f.throwError("Unexpected logic",c.line,c.filename),c.out.push(a.match);break;case h.NOT:c.out.push(a.match);break;case h.VAR:c.parseVar(a,e,j);break;case h.BRACKETOPEN:!g||i!==h.VAR&&i!==h.BRACKETCLOSE&&i!==h.PARENCLOSE?(c.state.push(h.ARRAYOPEN),c.filterApplyIdx.push(c.out.length)):c.state.push(a.type),c.out.push("[");break;case h.BRACKETCLOSE:b=c.state.pop(),b!==h.BRACKETOPEN&&b!==h.ARRAYOPEN&&f.throwError("Unexpected closing square bracket",c.line,c.filename),c.out.push("]"),c.filterApplyIdx.pop();break;case h.CURLYOPEN:c.state.push(a.type),c.out.push("{"),c.filterApplyIdx.push(c.out.length-1);break;case h.COLON:j!==h.CURLYOPEN&&f.throwError("Unexpected colon",c.line,c.filename),c.state.push(a.type),c.out.push(":"),c.filterApplyIdx.pop();break;case h.CURLYCLOSE:j===h.COLON&&c.state.pop(),c.state.pop()!==h.CURLYOPEN&&f.throwError("Unexpected closing curly brace",c.line,c.filename),c.out.push("}"),c.filterApplyIdx.pop();break;case h.DOTKEY:(!g||i!==h.VAR&&i!==h.BRACKETCLOSE&&i!==h.DOTKEY&&i!==h.PARENCLOSE&&i!==h.FUNCTIONEMPTY&&i!==h.FILTEREMPTY&&i!==h.CURLYCLOSE)&&f.throwError('Unexpected key "'+e+'"',c.line,c.filename),c.out.push("."+e);break;case h.OPERATOR:c.out.push(" "+e+" "),c.filterApplyIdx.pop()}},parseVar:function(a,b,c){var d=this;return b=b.split("."),i.indexOf(b[0])!==-1&&f.throwError('Reserved keyword "'+b[0]+'" attempted to be used as a variable',d.line,d.filename),d.filterApplyIdx.push(d.out.length),c===h.CURLYOPEN?(b.length>1&&f.throwError("Unexpected dot",d.line,d.filename),void d.out.push(b[0])):void d.out.push(d.checkMatch(b))},checkMatch:function(a){function b(b){var c=b+e,d=a,g="";return g="(typeof "+c+' !== "undefined" && '+c+" !== null",f.each(d,function(a,b){0!==b&&(g+=" && "+c+"."+a+" !== undefined && "+c+"."+a+" !== null",c+="."+a)}),g+=")"}function c(c){return"("+b(c)+" ? "+c+a.join(".")+' : "")'}var d,e=a[0];return d="("+b("_ctx.")+" ? "+c("_ctx.")+" : "+c("")+")","("+d+" !== null ? "+d+' : "" )'}},c.parse=function(a,b,i,j,k){function l(a,b){var c,d,h=g.read(f.strip(a));return c=new e(h,k,p,b,i.filename),d=c.parse().join(""),c.state.length&&f.throwError('Unable to parse "'+a+'"',b,i.filename),{compile:function(){return"_output += "+d+";\n"}}}function m(b,c){var d,l,m,n,o,q,r;if(f.startsWith(b,"end")){if(r=J[J.length-1],r&&r.name===b.split(/\s+/)[0].replace(/^end/,"")&&r.ends){switch(r.name){case"autoescape":p=i.autoescape;break;case"raw":N=!1}return void J.pop()}N||f.throwError('Unexpected end of tag "'+b.replace(/^end/,"")+'"',c,i.filename)}if(!N){switch(m=b.split(/\s+(.+)?/),n=m.shift(),j.hasOwnProperty(n)||f.throwError('Unexpected tag "'+b+'"',c,i.filename),d=g.read(f.strip(m.join(" "))),l=new e(d,k,(!1),c,i.filename),o=j[n],o.parse(m[1],c,l,h,J,i,a)||f.throwError('Unexpected tag "'+n+'"',c,i.filename),l.parse(),q=l.out,n){case"autoescape":p="false"!==q[0]&&q[0];break;case"raw":N=!0}return{block:!!j[n].block,compile:o.compile,args:q,content:[],ends:o.ends,name:n}}}function n(a){return"string"==typeof a&&(a=a.replace(/\s*$/,"")),a}b=b.replace(/\r\n/g,"\n");var o,p=i.autoescape,q=i.tagControls[0],r=i.tagControls[1],s=i.varControls[0],t=i.varControls[1],u=d(q),v=d(r),w=d(s),x=d(t),y=new RegExp("^"+u+"-?\\s*-?|-?\\s*-?"+v+"$","g"),z=new RegExp("^"+u+"-"),A=new RegExp("-"+v+"$"),B=new RegExp("^"+w+"-?\\s*-?|-?\\s*-?"+x+"$","g"),C=new RegExp("^"+w+"-"),D=new RegExp("-"+x+"$"),E=i.cmtControls[0],F=i.cmtControls[1],G="[\\s\\S]*?",H=new RegExp("("+u+G+v+"|"+w+G+x+"|"+d(E)+G+d(F)+")"),I=1,J=[],K=null,L=[],M={},N=!1;return c.parseVariable=l,f.each(b.split(H),function(a){var b,c,d,e,g;if(a){if(!N&&f.startsWith(a,s)&&f.endsWith(a,t))d=C.test(a),o=D.test(a),b=l(a.replace(B,""),I);else if(f.startsWith(a,q)&&f.endsWith(a,r))d=z.test(a),o=A.test(a),b=m(a.replace(y,""),I),b&&("extends"===b.name?K=b.args.join("").replace(/^\'|\'$/g,"").replace(/^\"|\"$/g,""):b.block&&!J.length&&(M[b.args.join("")]=b)),N&&!b&&(b=a);else if(N||!f.startsWith(a,E)&&!f.endsWith(a,F))b=o?a.replace(/^\s*/,""):a,o=!1;else if(f.startsWith(a,E)&&f.endsWith(a,F))return;d&&L.length&&(e=L.pop(),"string"==typeof e?e=n(e):e.content&&e.content.length&&(g=n(e.content.pop()),e.content.push(g)),L.push(e)),b&&(J.length?J[J.length-1].content.push(b):L.push(b),b.name&&b.ends&&J.push(b),c=a.match(/\n/g),I+=c?c.length:0)}}),{name:i.filename,parent:K,tokens:L,blocks:M}},c.compile=function(a,b,d,e){var g="",h=f.isArray(a)?a:a.tokens;return f.each(h,function(a){var f;return"string"==typeof a?void(g+='_output += "'+a.replace(/\\/g,"\\\\").replace(/\n|\r/g,"\\n").replace(/"/g,'\\"')+'";\n'):(f=a.compile(c.compile,a.args?a.args.slice(0):[],a.content?a.content.slice(0):[],b,d,e),void(g+=f||""))}),g}},{"./lexer":4,"./utils":26}],9:[function(a,b,c){function d(){return""}function e(a){if(a){if(f.each(["varControls","tagControls","cmtControls"],function(b){if(a.hasOwnProperty(b)){if(!f.isArray(a[b])||2!==a[b].length)throw new Error('Option "'+b+'" must be an array containing 2 different control strings.');if(a[b][0]===a[b][1])throw new Error('Option "'+b+'" open and close controls must not be the same.');f.each(a[b],function(a,c){if(a.length<2)throw new Error('Option "'+b+'" '+(c?"open ":"close ")+'control must be at least 2 characters. Saw "'+a+'" instead.')})}}),a.hasOwnProperty("cache")&&a.cache&&"memory"!==a.cache&&(!a.cache.get||!a.cache.set))throw new Error("Invalid cache option "+JSON.stringify(a.cache)+' found. Expected "memory" or { get: function (key) { ... }, set: function (key, value) { ... } }.');if(a.hasOwnProperty("loader")&&a.loader&&(!a.loader.load||!a.loader.resolve))throw new Error("Invalid loader option "+JSON.stringify(a.loader)+" found. Expected { load: function (pathname, cb) { ... }, resolve: function (to, from) { ... } }.")}}var f=a("./utils"),g=a("./tags"),h=a("./filters"),i=a("./parser"),j=a("./dateformatter"),k=a("./loaders");c.version="1.4.2";var l,m={autoescape:!0,varControls:["{{","}}"],tagControls:["{%","%}"],cmtControls:["{#","#}"],locals:{},cache:"memory",loader:k.fs()};c.setDefaults=function(a){e(a),l.options=f.extend(l.options,a)},c.setDefaultTZOffset=function(a){j.tzOffset=a},c.Swig=function(a){function b(a){return a&&a.locals?f.extend({},p.options.locals,a.locals):p.options.locals}function c(a){return a=a||{},a.hasOwnProperty("cache")&&!a.cache||!p.options.cache}function j(a,b){if(!c(b))return"memory"===p.options.cache?p.cache[a]:p.options.cache.get(a)}function k(a,b,d){if(!c(b))return"memory"===p.options.cache?void(p.cache[a]=d):void p.options.cache.set(a,d)}function l(a,b){return f.map(b,function(b){var c=b.args?b.args.join(""):"";return"block"===b.name&&a[c]&&(b=a[c]),b.content&&b.content.length&&(b.content=l(a,b.content)),b})}function n(a,b){var c=[];f.each(a,function(a){c.push(a)}),f.each(c.reverse(),function(a){"block"!==a.name&&b.unshift(a)})}function o(a,b){for(var c,d,e,g=a.parent,h=[],i=[];g;){if(!b||!b.filename)throw new Error('Cannot extend "'+g+'" because current template has no filename.');if(c=c||b.filename,c=p.options.loader.resolve(g,c),d=j(c,b)||p.parseFile(c,f.extend({},b,{filename:c})),g=d.parent,h.indexOf(c)!==-1)throw new Error('Illegal circular extends of "'+c+'".');h.push(c),i.push(d)}for(e=i.length,e=i.length-2;e>=0;e-=1)i[e].tokens=l(i[e].blocks,i[e+1].tokens),n(i[e].blocks,i[e].tokens);return i}e(a),this.options=f.extend({},m,a||{}),this.cache={},this.extensions={};var p=this,q=g,r=h;this.invalidateCache=function(){"memory"===p.options.cache&&(p.cache={})},this.setFilter=function(a,b){if("function"!=typeof b)throw new Error('Filter "'+a+'" is not a valid function.');r[a]=b},this.setTag=function(a,b,c,d,e){if("function"!=typeof b)throw new Error('Tag "'+a+'" parse method is not a valid function.');if("function"!=typeof c)throw new Error('Tag "'+a+'" compile method is not a valid function.');q[a]={parse:b,compile:c,ends:d||!1,block:!!e}},this.setExtension=function(a,b){p.extensions[a]=b},this.parse=function(a,c){e(c);var d,g=b(c),h={};for(d in c)c.hasOwnProperty(d)&&"locals"!==d&&(h[d]=c[d]);return c=f.extend({},p.options,h),c.locals=g,i.parse(this,a,c,q,r)},this.parseFile=function(a,b){var c;return b||(b={}),a=p.options.loader.resolve(a,b.resolveFrom),c=p.options.loader.load(a),b.filename||(b=f.extend({filename:a},b)),p.parse(c,b)},this.precompile=function(a,b){var c,d=p.parse(a,b),e=o(d,b);e.length&&(d.tokens=l(d.blocks,e[0].tokens),n(d.blocks,d.tokens));try{c=new Function("_swig","_ctx","_filters","_utils","_fn",'  var _ext = _swig.extensions,\n    _output = "";\n'+i.compile(d,e,b)+"\n  return _output;\n")}catch(g){f.throwError(g,null,b.filename)}return{tpl:c,tokens:d}},this.render=function(a,b){return p.compile(a,b)()},this.renderFile=function(a,b,c){return c?void p.compileFile(a,{},function(a,d){var e;if(a)return void c(a);try{e=d(b)}catch(f){return void c(f)}c(null,e)}):p.compileFile(a)(b)},this.compile=function(a,c){function e(a){var b;return b=a&&h?f.extend({},g,a):a&&!h?a:!a&&h?g:{},i.tpl(p,b,r,f,d)}var g,h,i,l=c?c.filename:null,m=l?j(l,c):null;return m?m:(g=b(c),h=f.keys(g).length,i=this.precompile(a,c),f.extend(e,i.tokens),l&&k(l,c,e),e)},this.compileFile=function(a,b,c){var d,e;return b||(b={}),a=p.options.loader.resolve(a,b.resolveFrom),b.filename||(b=f.extend({filename:a},b)),(e=j(a,b))?c?void c(null,e):e:c?void p.options.loader.load(a,function(a,d){if(a)return void c(a);var e;try{e=p.compile(d,b)}catch(f){return void c(f)}c(a,e)}):(d=p.options.loader.load(a),p.compile(d,b))},this.run=function(a,c,e){var g=b({locals:c});return e&&k(e,{},a),a(p,g,r,f,d)}},l=new c.Swig,c.setFilter=l.setFilter,c.setTag=l.setTag,c.setExtension=l.setExtension,c.parseFile=l.parseFile,c.precompile=l.precompile,c.compile=l.compile,c.compileFile=l.compileFile,c.render=l.render,c.renderFile=l.renderFile,c.run=l.run,c.invalidateCache=l.invalidateCache,c.loaders=k},{"./dateformatter":2,"./filters":3,"./loaders":6,"./parser":8,"./tags":20,"./utils":26}],10:[function(a,b,c){var d=a("../utils"),e=["html","js"];c.compile=function(a,b,c,d,e,f){return a(c,d,e,f)},c.parse=function(a,b,c,f,g,h){var i;return c.on("*",function(a){return i||a.type!==f.BOOL&&(a.type!==f.STRING||e.indexOf(a.match)!==-1)?void d.throwError('Unexpected token "'+a.match+'" in autoescape tag',b,h.filename):(this.out.push(a.match),void(i=!0))}),!0},c.ends=!0},{"../utils":26}],11:[function(a,b,c){c.compile=function(a,b,c,d,e){return a(c,d,e,b.join(""))},c.parse=function(a,b,c){return c.on("*",function(a){this.out.push(a.match)}),!0},c.ends=!0,c.block=!0},{}],12:[function(a,b,c){c.compile=function(){return"} else {\n"},c.parse=function(a,b,c,d,e){return c.on("*",function(a){throw new Error('"else" tag does not accept any tokens. Found "'+a.match+'" on line '+b+".")}),e.length&&"if"===e[e.length-1].name}},{}],13:[function(a,b,c){var d=a("./if").parse;c.compile=function(a,b){return"} else if ("+b.join(" ")+") {\n"},c.parse=function(a,b,c,e,f){var g=d(a,b,c,e,f);return g&&f.length&&"if"===f[f.length-1].name}},{"./if":17}],14:[function(a,b,c){c.compile=function(){},c.parse=function(){return!0},c.ends=!1},{}],15:[function(a,b,c){var d=a("../filters");c.compile=function(a,b,c,d,e,f){var g=b.shift().replace(/\($/,""),h='(function () {\n  var _output = "";\n'+a(c,d,e,f)+"  return _output;\n})()";return")"===b[b.length-1]&&b.pop(),b=b.length?", "+b.join(""):"",'_output += _filters["'+g+'"]('+h+b+");\n"},c.parse=function(a,b,c,e){function f(a){if(!d.hasOwnProperty(a))throw new Error('Filter "'+a+'" does not exist on line '+b+".")}var g;return c.on(e.FUNCTION,function(a){return!!g||(g=a.match.replace(/\($/,""),f(g),this.out.push(a.match),void this.state.push(a.type))}),c.on(e.VAR,function(a){return!!g||(g=a.match,f(g),void this.out.push(g))}),!0},c.ends=!0},{"../filters":3}],16:[function(a,b,c){var d="_ctx.",e=d+"loop";c.compile=function(a,b,c,f,g,h){var i,j=b.shift(),k="__k",l=(d+"__loopcache"+Math.random()).replace(/\./g,"");return b[0]&&","===b[0]&&(b.shift(),k=j,j=b.shift()),i=b.join(""),["(function () {\n","  var __l = "+i+', __len = (_utils.isArray(__l) || typeof __l === "string") ? __l.length : _utils.keys(__l).length;\n',"  if (!__l) { return; }\n","    var "+l+" = { loop: "+e+", "+j+": "+d+j+", "+k+": "+d+k+" };\n","    "+e+" = { first: false, index: 1, index0: 0, revindex: __len, revindex0: __len - 1, length: __len, last: false };\n","  _utils.each(__l, function ("+j+", "+k+") {\n","    "+d+j+" = "+j+";\n","    "+d+k+" = "+k+";\n","    "+e+".key = "+k+";\n","    "+e+".first = ("+e+".index0 === 0);\n","    "+e+".last = ("+e+".revindex0 === 0);\n","    "+a(c,f,g,h),"    "+e+".index += 1; "+e+".index0 += 1; "+e+".revindex -= 1; "+e+".revindex0 -= 1;\n","  });\n","  "+e+" = "+l+".loop;\n","  "+d+j+" = "+l+"."+j+";\n","  "+d+k+" = "+l+"."+k+";\n","  "+l+" = undefined;\n","})();\n"].join("")},c.parse=function(a,b,c,d){var e,f;return c.on(d.NUMBER,function(a){var c=this.state.length?this.state[this.state.length-1]:null;if(!f||c!==d.ARRAYOPEN&&c!==d.CURLYOPEN&&c!==d.CURLYCLOSE&&c!==d.FUNCTION&&c!==d.FILTER)throw new Error('Unexpected number "'+a.match+'" on line '+b+".");return!0}),c.on(d.VAR,function(a){return!(!f||!e)||(this.out.length||(e=!0),void this.out.push(a.match))}),c.on(d.COMMA,function(a){return!e||this.prevToken.type!==d.VAR||void this.out.push(a.match)}),c.on(d.COMPARATOR,function(a){if("in"!==a.match||!e)throw new Error('Unexpected token "'+a.match+'" on line '+b+".");f=!0,this.filterApplyIdx.push(this.out.length)}),!0},c.ends=!0},{}],17:[function(a,b,c){c.compile=function(a,b,c,d,e,f){return"if ("+b.join(" ")+") { \n"+a(c,d,e,f)+"\n}"},c.parse=function(a,b,c,d){if("undefined"==typeof a)throw new Error("No conditional statement provided on line "+b+".");return c.on(d.COMPARATOR,function(a){if(this.isLast)throw new Error('Unexpected logic "'+a.match+'" on line '+b+".");if(this.prevToken.type===d.NOT)throw new Error('Attempted logic "not '+a.match+'" on line '+b+". Use !(foo "+a.match+") instead.");this.out.push(a.match),this.filterApplyIdx.push(this.out.length)}),c.on(d.NOT,function(a){if(this.isLast)throw new Error('Unexpected logic "'+a.match+'" on line '+b+".");this.out.push(a.match)}),c.on(d.BOOL,function(a){this.out.push(a.match)}),c.on(d.LOGIC,function(a){if(!this.out.length||this.isLast)throw new Error('Unexpected logic "'+a.match+'" on line '+b+".");this.out.push(a.match),this.filterApplyIdx.pop()}),!0},c.ends=!0},{}],18:[function(a,b,c){var d=a("../utils");c.compile=function(a,b){var c=b.pop(),e="_ctx."+c+' = {};\n  var _output = "";\n',f=d.map(b,function(a){return{ex:new RegExp("_ctx."+a.name,"g"),re:"_ctx."+c+"."+a.name}});return d.each(b,function(a){var b=a.compiled;d.each(f,function(a){b=b.replace(a.ex,a.re)}),e+=b}),e},c.parse=function(b,c,e,f,g,h,i){var j,k,l=a("../parser").compile,m={resolveFrom:h.filename},n=d.extend({},h,m);return e.on(f.STRING,function(a){var b=this;if(!j)return j=i.parseFile(a.match.replace(/^("|')|("|')$/g,""),m).tokens,void d.each(j,function(a){var c,d="";a&&"macro"===a.name&&a.compile&&(c=a.args[0],d+=a.compile(l,a.args,a.content,[],n)+"\n",b.out.push({compiled:d,name:c}))});throw new Error("Unexpected string "+a.match+" on line "+c+".")}),e.on(f.VAR,function(a){var b=this;if(!j||k)throw new Error('Unexpected variable "'+a.match+'" on line '+c+".");if("as"!==a.match)return k=a.match,b.out.push(k),!1}),!0},c.block=!0},{"../parser":8,"../utils":26}],19:[function(a,b,c){var d="ignore",e="missing",f="only";c.compile=function(a,b){var c=b.shift(),d=b.indexOf(f),g=d!==-1&&b.splice(d,1),h=(b.pop()||"").replace(/\\/g,"\\\\"),i=b[b.length-1]===e&&b.pop(),j=b.join("");return(i?"  try {\n":"")+"_output += _swig.compileFile("+c+', {resolveFrom: "'+h+'"})('+(g&&j?j:j?"_utils.extend({}, _ctx, "+j+")":"_ctx")+");\n"+(i?"} catch (e) {}\n":"")},c.parse=function(a,b,c,g,h,i){var j,k;return c.on(g.STRING,function(a){return!!j||(j=a.match,void this.out.push(j))}),c.on(g.VAR,function(a){if(!j)return j=a.match,!0;if(!k&&"with"===a.match)return void(k=!0);if(k&&a.match===f&&"with"!==this.prevToken.match)return void this.out.push(a.match);if(a.match===d)return!1;if(a.match===e){if(this.prevToken.match!==d)throw new Error('Unexpected token "'+e+'" on line '+b+".");return this.out.push(a.match),!1}if(this.prevToken.match===d)throw new Error('Expected "'+e+'" on line '+b+' but found "'+a.match+'".');return!0}),c.on("end",function(){this.out.push(i.filename||null)}),!0}},{}],20:[function(a,b,c){c.autoescape=a("./autoescape"),c.block=a("./block"),c["else"]=a("./else"),c.elseif=a("./elseif"),c.elif=c.elseif,c["extends"]=a("./extends"),c.filter=a("./filter"),c["for"]=a("./for"),c["if"]=a("./if"),c["import"]=a("./import"),c.include=a("./include"),c.macro=a("./macro"),c.parent=a("./parent"),c.raw=a("./raw"),c.set=a("./set"),c.spaceless=a("./spaceless")},{"./autoescape":10,"./block":11,"./else":12,"./elseif":13,"./extends":14,"./filter":15,"./for":16,"./if":17,"./import":18,"./include":19,"./macro":21,"./parent":22,"./raw":23,"./set":24,"./spaceless":25}],21:[function(a,b,c){c.compile=function(a,b,c,d,e,f){var g=b.shift();return"_ctx."+g+" = function ("+b.join("")+') {\n  var _output = "",\n    __ctx = _utils.extend({}, _ctx);\n  _utils.each(_ctx, function (v, k) {\n    if (["'+b.join('","')+'"].indexOf(k) !== -1) { delete _ctx[k]; }\n  });\n'+a(c,d,e,f)+"\n _ctx = _utils.extend(_ctx, __ctx);\n  return _output;\n};\n_ctx."+g+".safe = true;\n"},c.parse=function(a,b,c,d){var e;return c.on(d.VAR,function(a){if(a.match.indexOf(".")!==-1)throw new Error('Unexpected dot in macro argument "'+a.match+'" on line '+b+".");this.out.push(a.match)}),c.on(d.FUNCTION,function(a){e||(e=a.match,this.out.push(e),this.state.push(d.FUNCTION))}),c.on(d.FUNCTIONEMPTY,function(a){e||(e=a.match,this.out.push(e))}),c.on(d.PARENCLOSE,function(){if(!this.isLast)throw new Error("Unexpected parenthesis close on line "+b+".")}),c.on(d.COMMA,function(){return!0}),c.on("*",function(){}),!0},c.ends=!0,c.block=!0},{}],22:[function(a,b,c){c.compile=function(a,b,c,d,e,f){if(!d||!d.length)return"";var g,h,i=b[0],j=!0,k=d.length,l=0;for(l;l<k;l+=1)if(g=d[l],g.blocks&&g.blocks.hasOwnProperty(f)&&j&&i!==g.name)return h=g.blocks[f],h.compile(a,[f],h.content,d.slice(l+1),e)+"\n"},c.parse=function(a,b,c,d,e,f){return c.on("*",function(a){throw new Error('Unexpected argument "'+a.match+'" on line '+b+".")}),c.on("end",function(){this.out.push(f.filename)}),!0}},{}],23:[function(a,b,c){c.compile=function(a,b,c,d,e,f){return a(c,d,e,f)},c.parse=function(a,b,c){return c.on("*",function(a){throw new Error('Unexpected token "'+a.match+'" in raw tag on line '+b+".")}),!0},c.ends=!0},{}],24:[function(a,b,c){c.compile=function(a,b){return b.join(" ")+";\n"},c.parse=function(a,b,c,d){var e,f="";return c.on(d.VAR,function(a){return e?void(e+="_ctx."+a.match):!!c.out.length||void(f+=a.match)}),c.on(d.BRACKETOPEN,function(a){return!(!e&&!this.out.length)||void(e=a.match)}),c.on(d.STRING,function(a){return!(e&&!this.out.length)||void(e+=a.match)}),c.on(d.BRACKETCLOSE,function(a){return!(e&&!this.out.length)||(f+=e+a.match,void(e=void 0))}),c.on(d.DOTKEY,function(a){return!e&&!f||void(f+="."+a.match)}),c.on(d.ASSIGNMENT,function(a){if(this.out.length||!f)throw new Error('Unexpected assignment "'+a.match+'" on line '+b+".");this.out.push("_ctx."+f),this.out.push(a.match),this.filterApplyIdx.push(this.out.length)}),!0},c.block=!0},{}],25:[function(a,b,c){var d=a("../utils");c.compile=function(a,b,c,e,f,g){function h(a){return d.map(a,function(a){return a.content||"string"!=typeof a?(a.content=h(a.content),a):a.replace(/^\s+/,"").replace(/>\s+</g,"><").replace(/\s+$/,"")})}return a(h(c),e,f,g)},c.parse=function(a,b,c){return c.on("*",function(a){throw new Error('Unexpected token "'+a.match+'" on line '+b+".")}),!0},c.ends=!0},{"../utils":26}],26:[function(a,b,c){var d;c.strip=function(a){return a.replace(/^\s+|\s+$/g,"")},c.startsWith=function(a,b){return 0===a.indexOf(b)},c.endsWith=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},c.each=function(a,b){var c,e;if(d(a))for(c=0,e=a.length,c;c<e&&b(a[c],c,a)!==!1;c+=1);else for(c in a)if(a.hasOwnProperty(c)&&b(a[c],c,a)===!1)break;return a},c.isArray=d=Array.hasOwnProperty("isArray")?Array.isArray:function(a){return!!a&&("object"==typeof a&&Object.prototype.toString.call(a).indexOf()!==-1)},c.some=function(a,b){var e,f,g=0;if(d(a))for(f=a.length,g;g<f&&!(e=b(a[g],g,a));g+=1);else c.each(a,function(c,d){return e=b(c,d,a),!e});return!!e},c.map=function(a,b){var c,e=0,f=[];if(d(a))for(c=a.length,e;e<c;e+=1)f[e]=b(a[e],e);else for(e in a)a.hasOwnProperty(e)&&(f[e]=b(a[e],e));return f},c.extend=function(){
var a,b,c=arguments,d=c[0],e=c.length>1?Array.prototype.slice.call(c,1):[],f=0,g=e.length;for(f;f<g;f+=1){b=e[f]||{};for(a in b)b.hasOwnProperty(a)&&(d[a]=b[a])}return d},c.keys=function(a){return a?Object.keys?Object.keys(a):c.map(a,function(a,b){return b}):[]},c.throwError=function(a,b,c){throw b&&(a+=" on line "+b),c&&(a+=" in file "+c),new Error(a+".")}},{}],27:[function(a,b,c){function d(a){return"[object Array]"===j.call(a)}function e(a,b){var c;if(null===a)c={__proto__:null};else{if("object"!=typeof a)throw new TypeError("typeof prototype["+typeof a+"] != 'object'");var d=function(){};d.prototype=a,c=new d,c.__proto__=a}return"undefined"!=typeof b&&Object.defineProperties&&Object.defineProperties(c,b),c}function f(a){return"object"!=typeof a&&"function"!=typeof a||null===a}function g(a){if(f(a))throw new TypeError("Object.keys called on a non-object");var b=[];for(var c in a)k.call(a,c)&&b.push(c);return b}function h(a){if(f(a))throw new TypeError("Object.getOwnPropertyNames called on a non-object");var b=g(a);return c.isArray(a)&&c.indexOf(a,"length")===-1&&b.push("length"),b}function i(a,b){return{value:a[b]}}var j=Object.prototype.toString,k=Object.prototype.hasOwnProperty;c.isArray="function"==typeof Array.isArray?Array.isArray:d,c.indexOf=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1},c.filter=function(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c},c.forEach=function(a,b,c){if(a.forEach)return a.forEach(b,c);for(var d=0;d<a.length;d++)b.call(c,a[d],d,a)},c.map=function(a,b){if(a.map)return a.map(b);for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=b(a[d],d,a);return c},c.reduce=function(a,b,c){if(a.reduce)return a.reduce(b,c);var d,e=!1;2<arguments.length&&(d=c,e=!0);for(var f=0,g=a.length;g>f;++f)a.hasOwnProperty(f)&&(e?d=b(d,a[f],f,a):(d=a[f],e=!0));return d},"b"!=="ab".substr(-1)?c.substr=function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}:c.substr=function(a,b,c){return a.substr(b,c)},c.trim=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},c.bind=function(){var a=Array.prototype.slice.call(arguments),b=a.shift();if(b.bind)return b.bind.apply(b,a);var c=a.shift();return function(){b.apply(c,a.concat([Array.prototype.slice.call(arguments)]))}},c.create="function"==typeof Object.create?Object.create:e;var l="function"==typeof Object.keys?Object.keys:g,m="function"==typeof Object.getOwnPropertyNames?Object.getOwnPropertyNames:h;if((new Error).hasOwnProperty("description")){var n=function(a,b){return"[object Error]"===j.call(a)&&(b=c.filter(b,function(a){return"description"!==a&&"number"!==a&&"message"!==a})),b};c.keys=function(a){return n(a,l(a))},c.getOwnPropertyNames=function(a){return n(a,m(a))}}else c.keys=l,c.getOwnPropertyNames=m;if("function"==typeof Object.getOwnPropertyDescriptor)try{Object.getOwnPropertyDescriptor({a:1},"a"),c.getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor}catch(o){c.getOwnPropertyDescriptor=function(a,b){try{return Object.getOwnPropertyDescriptor(a,b)}catch(c){return i(a,b)}}}else c.getOwnPropertyDescriptor=i},{}],28:[function(a,b,c){},{}],29:[function(a,b,c){function d(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}var e=a("__browserify_process"),f=a("util"),g=a("_shims"),h=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(a){return h.exec(a).slice(1)};c.resolve=function(){for(var a="",b=!1,c=arguments.length-1;c>=-1&&!b;c--){var h=c>=0?arguments[c]:e.cwd();if(!f.isString(h))throw new TypeError("Arguments to path.resolve must be strings");h&&(a=h+"/"+a,b="/"===h.charAt(0))}return a=d(g.filter(a.split("/"),function(a){return!!a}),!b).join("/"),(b?"/":"")+a||"."},c.normalize=function(a){var b=c.isAbsolute(a),e="/"===g.substr(a,-1);return a=d(g.filter(a.split("/"),function(a){return!!a}),!b).join("/"),a||b||(a="."),a&&e&&(a+="/"),(b?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(g.filter(a,function(a,b){if(!f.isString(a))throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=i(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=i(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return i(a)[3]}},{__browserify_process:31,_shims:27,util:30}],30:[function(a,b,c){function d(a,b){var d={seen:[],stylize:f};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),o(b)?d.showHidden=b:b&&c._extend(d,b),u(d.showHidden)&&(d.showHidden=!1),u(d.depth)&&(d.depth=2),u(d.colors)&&(d.colors=!1),u(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=e),h(d,a,d.depth)}function e(a,b){var c=d.styles[b];return c?"["+d.colors[c][0]+"m"+a+"["+d.colors[c][1]+"m":a}function f(a,b){return a}function g(a){var b={};return G.forEach(a,function(a,c){b[a]=!0}),b}function h(a,b,d){if(a.customInspect&&b&&z(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d);return s(e)||(e=h(a,e,d)),e}var f=i(a,b);if(f)return f;var o=G.keys(b),p=g(o);if(a.showHidden&&(o=G.getOwnPropertyNames(b)),0===o.length){if(z(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(v(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(x(b))return a.stylize(Date.prototype.toString.call(b),"date");if(y(b))return j(b)}var r="",t=!1,u=["{","}"];if(n(b)&&(t=!0,u=["[","]"]),z(b)){var w=b.name?": "+b.name:"";r=" [Function"+w+"]"}if(v(b)&&(r=" "+RegExp.prototype.toString.call(b)),x(b)&&(r=" "+Date.prototype.toUTCString.call(b)),y(b)&&(r=" "+j(b)),0===o.length&&(!t||0==b.length))return u[0]+r+u[1];if(d<0)return v(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var A;return A=t?k(a,b,d,p,o):o.map(function(c){return l(a,b,d,p,c,t)}),a.seen.pop(),m(A,r,u)}function i(a,b){if(u(b))return a.stylize("undefined","undefined");if(s(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return r(b)?a.stylize(""+b,"number"):o(b)?a.stylize(""+b,"boolean"):p(b)?a.stylize("null","null"):void 0}function j(a){return"["+Error.prototype.toString.call(a)+"]"}function k(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)F(b,String(g))?f.push(l(a,b,c,d,String(g),!0)):f.push("");return G.forEach(e,function(e){e.match(/^\d+$/)||f.push(l(a,b,c,d,e,!0))}),f}function l(a,b,c,d,e,f){var g,i,j;if(j=G.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?i=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(i=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),i||(G.indexOf(a.seen,j.value)<0?(i=p(c)?h(a,j.value,null):h(a,j.value,c-1),i.indexOf("\n")>-1&&(i=f?i.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+i.split("\n").map(function(a){return"   "+a}).join("\n"))):i=a.stylize("[Circular]","special")),u(g)){if(f&&e.match(/^\d+$/))return i;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+i}function m(a,b,c){var d=0,e=G.reduce(a,function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function n(a){return G.isArray(a)}function o(a){return"boolean"==typeof a}function p(a){return null===a}function q(a){return null==a}function r(a){return"number"==typeof a}function s(a){return"string"==typeof a}function t(a){return"symbol"==typeof a}function u(a){return void 0===a}function v(a){return w(a)&&"[object RegExp]"===C(a)}function w(a){return"object"==typeof a&&a}function x(a){return w(a)&&"[object Date]"===C(a)}function y(a){return w(a)&&"[object Error]"===C(a)}function z(a){return"function"==typeof a}function A(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function B(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.binarySlice}function C(a){return Object.prototype.toString.call(a)}function D(a){return a<10?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),I[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=a("_shims"),H=/%[sdj%]/g;c.format=function(a){if(!s(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(d(arguments[c]));return b.join(" ")}for(var c=1,e=arguments,f=e.length,g=String(a).replace(H,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(e[c++]);case"%d":return Number(e[c++]);case"%j":try{return JSON.stringify(e[c++])}catch(b){return"[Circular]"}default:return a}}),h=e[c];c<f;h=e[++c])g+=p(h)||!w(h)?" "+h:" "+d(h);return g},c.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=n,c.isBoolean=o,c.isNull=p,c.isNullOrUndefined=q,c.isNumber=r,c.isString=s,c.isSymbol=t,c.isUndefined=u,c.isRegExp=v,c.isObject=w,c.isDate=x,c.isError=y,c.isFunction=z,c.isPrimitive=A,c.isBuffer=B;var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=function(a,b){a.super_=b,a.prototype=G.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},c._extend=function(a,b){if(!b||!w(b))return a;for(var c=G.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}},{_shims:27}],31:[function(a,b,c){var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.binding=function(a){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(a){throw new Error("process.chdir is not supported")}},{}]},{},[1]),function(){"use strict";var a=function(a){return new Date(1e3*parseInt(a))},b=function(a){return go.utils.formatnumber(parseInt(a))},c=null;"undefined"!=typeof STP&&STP.localtime&&(c=STP.localtime),swig.setFilter("date_full",timeUtils.dateFull),swig.setFilter("day_month",timeUtils.dayMonth),swig.setFilter("duration",go.utils.duration),swig.setFilter("formatnumber",go.utils.formatnumber),swig.setFilter("formatnumbertoshorttext",go.utils.formatNumberToShortText),swig.setFilter("floatformat",go.utils.floatformat),swig.setFilter("floatplural",go.utils.floatplural),swig.setFilter("fromtimestamp",a),swig.setFilter("htmltruncate",go.utils.htmltruncate),swig.setFilter("numformat",b),swig.setFilter("plural",go.utils.plural),swig.setFilter("round",go.utils.round),swig.setFilter("time_chrono",timeUtils.chrono),swig.setFilter("time_news",_.partial(timeUtils.news,_,c)),swig.setFilter("time_social",_.partial(timeUtils.social,_,c)),swig.setFilter("truncate",go.utils.truncate),swig.setFilter("urldomain",go.utils.urldomain),swig.setFilter("urlescape",go.utils.urlescape),swig.setFilter("u",go.utils.urlescape),swig.setFilter("urlpretty",go.utils.urlpretty)}(),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):a.jQuery?a.jQuery:a.Zepto)}(this,function(a,b){a.fn.jPlayer=function(c){var d="jPlayer",e="string"==typeof c,f=Array.prototype.slice.call(arguments,1),g=this;return c=!e&&f.length?a.extend.apply(null,[!0,c].concat(f)):c,e&&"_"===c.charAt(0)?g:(e?this.each(function(){var e=a(this).data(d),h=e&&a.isFunction(e[c])?e[c].apply(e,f):e;if(h!==e&&h!==b)return g=h,!1}):this.each(function(){var b=a(this).data(d);b?b.option(c||{}):a(this).data(d,new a.jPlayer(c,this))}),g)},a.jPlayer=function(b,c){if(arguments.length){this.element=a(c),this.options=a.extend(!0,{},this.options,b);var d=this;this.element.bind("remove.jPlayer",function(){d.destroy()}),this._init()}},"function"!=typeof a.fn.stop&&(a.fn.stop=function(){}),a.jPlayer.emulateMethods="load play pause",a.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",a.jPlayer.emulateOptions="muted volume",a.jPlayer.reservedEvent="ready flashreset resize repeat error warning",a.jPlayer.event={},a.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){a.jPlayer.event[this]="jPlayer_"+this}),a.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],a.jPlayer.pause=function(){a.jPlayer.prototype.destroyRemoved(),a.each(a.jPlayer.prototype.instances,function(a,b){b.data("jPlayer").status.srcSet&&b.jPlayer("pause")})},a.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var c=function(){this.init()};c.prototype={init:function(){this.options={timeFormat:a.jPlayer.timeFormat}},time:function(a){a=a&&"number"==typeof a?a:0;var b=new Date(1e3*a),c=b.getUTCHours(),d=this.options.timeFormat.showHour?b.getUTCMinutes():b.getUTCMinutes()+60*c,e=this.options.timeFormat.showMin?b.getUTCSeconds():b.getUTCSeconds()+60*d,f=this.options.timeFormat.padHour&&c<10?"0"+c:c,g=this.options.timeFormat.padMin&&d<10?"0"+d:d,h=this.options.timeFormat.padSec&&e<10?"0"+e:e,i="";return i+=this.options.timeFormat.showHour?f+this.options.timeFormat.sepHour:"",i+=this.options.timeFormat.showMin?g+this.options.timeFormat.sepMin:"",i+=this.options.timeFormat.showSec?h+this.options.timeFormat.sepSec:""}};var d=new c;a.jPlayer.convertTime=function(a){return d.time(a)},a.jPlayer.uaBrowser=function(a){var b=a.toLowerCase(),c=/(webkit)[ \/]([\w.]+)/,d=/(opera)(?:.*version)?[ \/]([\w.]+)/,e=/(msie) ([\w.]+)/,f=/(mozilla)(?:.*? rv:([\w.]+))?/,g=c.exec(b)||d.exec(b)||e.exec(b)||b.indexOf("compatible")<0&&f.exec(b)||[];return{browser:g[1]||"",version:g[2]||"0"}},a.jPlayer.uaPlatform=function(a){var b=a.toLowerCase(),c=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/,d=/(ipad|playbook)/,e=/(android)/,f=/(mobile)/,g=c.exec(b)||[],h=d.exec(b)||!f.exec(b)&&e.exec(b)||[];return g[1]&&(g[1]=g[1].replace(/\s/g,"_")),{platform:g[1]||"",tablet:h[1]||""}},a.jPlayer.browser={},a.jPlayer.platform={};var e=a.jPlayer.uaBrowser(navigator.userAgent);e.browser&&(a.jPlayer.browser[e.browser]=!0,a.jPlayer.browser.version=e.version);var f=a.jPlayer.uaPlatform(navigator.userAgent);f.platform&&(a.jPlayer.platform[f.platform]=!0,a.jPlayer.platform.mobile=!f.tablet,a.jPlayer.platform.tablet=!!f.tablet),a.jPlayer.getDocMode=function(){var b;return a.jPlayer.browser.msie&&(document.documentMode?b=document.documentMode:(b=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(b=7))),b},a.jPlayer.browser.documentMode=a.jPlayer.getDocMode(),a.jPlayer.nativeFeatures={init:function(){var a,b,c,d=document,e=d.createElement("video"),f={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},g=["w3c","moz","webkit","webkitVideo","ms"];for(this.fullscreen=a={support:{w3c:!!d[f.w3c[0]],moz:!!d[f.moz[0]],webkit:"function"==typeof d[f.webkit[3]],webkitVideo:"function"==typeof e[f.webkitVideo[2]],ms:"function"==typeof e[f.ms[2]]},used:{}},b=0,c=g.length;b<c;b++){var h=g[b];if(a.support[h]){a.spec=h,a.used[h]=!0;break}}if(a.spec){var i=f[a.spec];a.api={fullscreenEnabled:!0,fullscreenElement:function(a){return a=a?a:d,a[i[1]]},requestFullscreen:function(a){return a[i[2]]()},exitFullscreen:function(a){return a=a?a:d,a[i[3]]()}},a.event={fullscreenchange:i[4],fullscreenerror:i[5]}}else a.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},a.event={}}},a.jPlayer.nativeFeatures.init(),a.jPlayer.focus=null,a.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON",a.jPlayer.pxtPlay=!0,a.jPlayer.pxtStop=!0,a.jPlayer.pxtAuto=!1;var g=function(b){var c,d=a.jPlayer.focus;d&&(a.each(a.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(a,d){if(b.target.nodeName.toUpperCase()===d.toUpperCase())return c=!0,!1}),c||a.each(d.options.keyBindings,function(c,e){if(e&&a.isFunction(e.fn)&&("number"==typeof e.key&&b.which===e.key||"string"==typeof e.key&&b.key===e.key))return b.preventDefault(),e.fn(d),!1}))};a.jPlayer.keys=function(b){var c="keydown.jPlayer";a(document.documentElement).unbind(c),b&&a(document.documentElement).bind(c,g)},a.jPlayer.keys(!0),a.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",artist:".jp-artist",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution",mainTopBlock:".jp-top",errorMessage:".jp-message"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(b){b.jPlayer.options.loop?a(this).unbind(".jPlayerRepeat").bind(a.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){a(this).jPlayer("play")}):a(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(a){a.status.paused?a.play():a.pause()}},fullScreen:{key:70,fn:function(a){(a.status.video||a.options.audioFullScreen)&&a._setOption("fullScreen",!a.options.fullScreen)}},muted:{key:77,fn:function(a){a._muted(!a.options.muted)}},volumeUp:{key:190,fn:function(a){a.volume(a.options.volume+.1)}},volumeDown:{key:188,fn:function(a){a.volume(a.options.volume-.1)}},loop:{key:76,fn:function(a){a._loop(!a.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},errorMessage:!1,status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var c=this;if(a.jPlayer.pxtPlay=!0,this.element.empty(),this.status=a.extend({},this.status),this.internal=a.extend({},this.internal),this.options.timeFormat=a.extend({},a.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=a.jPlayer.platform.ipad||a.jPlayer.platform.iphone||a.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!a.jPlayer.focus&&(a.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN},a.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),a.each(this.options.supplied.toLowerCase().split(","),function(b,d){var e=d.replace(/^\s+|\s+$/g,"");if(c.format[e]){var f=!1;a.each(c.formats,function(a,b){if(e===b)return f=!0,!1}),f||c.formats.push(e)}}),a.each(this.options.solution.toLowerCase().split(","),function(b,d){var e=d.replace(/^\s+|\s+$/g,"");if(c.solution[e]){var f=!1;a.each(c.solutions,function(a,b){if(e===b)return f=!0,!1}),f||c.solutions.push(e)}}),a.each(this.options.auroraFormats.toLowerCase().split(","),function(b,d){var e=d.replace(/^\s+|\s+$/g,"");if(c.format[e]){var f=!1;a.each(c.aurora.formats,function(a,b){if(e===b)return f=!0,!1}),f||c.aurora.formats.push(e)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=a.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=a.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:b}),this.internal.video=a.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:b}),this.internal.flash=a.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:b,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=a.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:b}),a.each(a.jPlayer.event,function(a,d){c.options[a]!==b&&(c.element.bind(d+".jPlayer",c.options[a]),c.options[a]=b)}),this.require.audio=!1,this.require.video=!1,a.each(this.formats,function(a,b){c.require[c.format[b].media]=!0}),this.require.video?this.options=a.extend(!0,{},this.optionsVideo,this.options):this.options=a.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),a.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){c.status.video&&!c.status.waitForPlay||c.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=a("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){c._trigger(a.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},a.each(this.formats,function(b,d){c.html.canPlay[d]=c.html[c.format[d].media].available&&""!==c.htmlElement[c.format[d].media].canPlayType(c.format[d].codec),c.aurora.canPlay[d]=a.inArray(d,c.aurora.formats)>-1,c.flash.canPlay[d]=c.format[d].flashCanPlay&&c.flash.available}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,a.each(this.solutions,function(b,d){if(0===b)c[d].desired=!0;else{var e=!1,f=!1;a.each(c.formats,function(a,b){c[c.solutions[0]].canPlay[b]&&("video"===c.format[b].media?f=!0:e=!0)}),c[d].desired=c.require.audio&&!e||c.require.video&&!f}}),this.html.support={},this.aurora.support={},this.flash.support={},a.each(this.formats,function(a,b){c.html.support[b]=c.html.canPlay[b]&&c.html.desired,c.aurora.support[b]=c.aurora.canPlay[b]&&c.aurora.desired,c.flash.support[b]=c.flash.canPlay[b]&&c.flash.desired}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,a.each(this.solutions,function(b,d){a.each(c.formats,function(a,b){if(c[d].support[b])return c[d].used=!0,!1})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:a.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:a.jPlayer.errorMsg.NO_SOLUTION,hint:a.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var d,e="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(a.jPlayer.browser.msie&&(Number(a.jPlayer.browser.version)<9||a.jPlayer.browser.documentMode<9)){var f='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>',g=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+e+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];d=document.createElement(f);for(var h=0;h<g.length;h++)d.appendChild(document.createElement(g[h]))}else{var i=function(a,b,c){var d=document.createElement("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)};d=document.createElement("object"),d.setAttribute("id",this.internal.flash.id),d.setAttribute("name",this.internal.flash.id),d.setAttribute("data",this.internal.flash.swf),d.setAttribute("type","application/x-shockwave-flash"),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("tabindex","-1"),i(d,"flashvars",e),i(d,"allowscriptaccess","always"),i(d,"bgcolor",this.options.backgroundColor),i(d,"wmode",this.options.wmode)}this.element.append(d),this.internal.flash.jq=a(d)}this.html.used&&!this.flash.used?this.status.playbackRateEnabled=this._testPlaybackRate("audio"):this.status.playbackRateEnabled=!1,this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=a("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=a("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){c._trigger(a.jPlayer.event.click)}))),this.aurora.used,this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){c.internal.ready=!0,c.version.flash="n/a",c._trigger(a.jPlayer.event.repeat),c._trigger(a.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),a.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),a.each(this.css.jq,function(a,b){b.length&&b.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),
this===a.jPlayer.focus&&(a.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},destroyRemoved:function(){var b=this;a.each(this.instances,function(a,c){b.element!==c&&(c.data("jPlayer")||(c.jPlayer("destroy"),delete b.instances[a]))})},enable:function(){},disable:function(){},_testCanPlayType:function(a){try{return a.canPlayType(this.format.mp3.codec),!0}catch(b){return!1}},_testPlaybackRate:function(a){var b,c=.5;a="string"==typeof a?a:"audio",b=document.createElement(a);try{return"playbackRate"in b&&(b.playbackRate=c,b.playbackRate===c)}catch(d){return!1}},_uaBlocklist:function(b){var c=navigator.userAgent.toLowerCase(),d=!1;return a.each(b,function(a,b){if(b&&b.test(c))return d=!0,!1}),d},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(b,c){var d=this;b.preload=this.options.preload,b.muted=this.options.muted,b.volume=this.options.volume,this.status.playbackRateEnabled&&(b.defaultPlaybackRate=this.options.defaultPlaybackRate,b.playbackRate=this.options.playbackRate),b.addEventListener("progress",function(){c.gate&&(d.internal.cmdsIgnored&&this.readyState>0&&(d.internal.cmdsIgnored=!1),d._getHtmlStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.progress))},!1),b.addEventListener("loadeddata",function(){c.gate&&(d.androidFix.setMedia=!1,d.androidFix.play&&(d.androidFix.play=!1,d.play(d.androidFix.time)),d.androidFix.pause&&(d.androidFix.pause=!1,d.pause(d.androidFix.time)),d._trigger(a.jPlayer.event.loadeddata))},!1),b.addEventListener("timeupdate",function(){c.gate&&(d._getHtmlStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.timeupdate))},!1),b.addEventListener("durationchange",function(){c.gate&&(d._getHtmlStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.durationchange))},!1),b.addEventListener("play",function(){c.gate&&(d._updateButtons(!0),d._html_checkWaitForPlay(),d._trigger(a.jPlayer.event.play))},!1),b.addEventListener("playing",function(){c.gate&&(d._updateButtons(!0),d._seeked(),d._trigger(a.jPlayer.event.playing))},!1),b.addEventListener("pause",function(){c.gate&&(d._updateButtons(!1),d._trigger(a.jPlayer.event.pause))},!1),b.addEventListener("waiting",function(){c.gate&&(d._seeking(),d._trigger(a.jPlayer.event.waiting))},!1),b.addEventListener("seeking",function(){c.gate&&(d._seeking(),d._trigger(a.jPlayer.event.seeking))},!1),b.addEventListener("seeked",function(){c.gate&&(d._seeked(),d._trigger(a.jPlayer.event.seeked))},!1),b.addEventListener("volumechange",function(){c.gate&&(d.options.volume=b.volume,d.options.muted=b.muted,d._updateMute(),d._updateVolume(),d._trigger(a.jPlayer.event.volumechange))},!1),b.addEventListener("ratechange",function(){c.gate&&(d.options.defaultPlaybackRate=b.defaultPlaybackRate,d.options.playbackRate=b.playbackRate,d._updatePlaybackRate(),d._trigger(a.jPlayer.event.ratechange))},!1),b.addEventListener("suspend",function(){c.gate&&(d._seeked(),d._trigger(a.jPlayer.event.suspend))},!1),b.addEventListener("ended",function(){a.jPlayer.pxtStop&&(pxt("cl_music","stop",location.href,a.jPlayer.mediaCurrent.title,a.jPlayer.mediaCurrent.artist,a.jPlayer.mediaCurrent.number,a.jPlayer.mediaCurrent.sub_number),a.jPlayer.pxtStop=!1),c.gate&&(a.jPlayer.browser.webkit||(d.htmlElement.media.currentTime=0),d.htmlElement.media.pause(),d._updateButtons(!1),d._getHtmlStatus(b,!0),d._updateInterface(),d._trigger(a.jPlayer.event.ended))},!1),b.addEventListener("error",function(b){var e=null;b.target.error&&b.target.error.code&&(e=b.target.error.code),c.gate&&(d._updateButtons(!1),d._seeked(),d.status.srcSet&&(clearTimeout(d.internal.htmlDlyCmdId),d.status.waitForLoad=!0,d.status.waitForPlay=!0,d.status.video&&!d.status.nativeVideoControls&&d.internal.video.jq.css({width:"0px",height:"0px"}),d._validString(d.status.media.poster)&&!d.status.nativeVideoControls&&d.internal.poster.jq.show(),d.css.jq.videoPlay.length&&d.css.jq.videoPlay.show(),d._error({type:a.jPlayer.error.URL,context:d.status.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL,errCode:e})))},!1),a.each(a.jPlayer.htmlEvent,function(e,f){b.addEventListener(this,function(){c.gate&&d._trigger(a.jPlayer.event[f])},!1)})},_addAuroraEventListeners:function(b,c){var d=this;b.volume=100*this.options.volume,b.on("progress",function(){c.gate&&(d.internal.cmdsIgnored&&this.readyState>0&&(d.internal.cmdsIgnored=!1),d._getAuroraStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.progress),b.duration>0&&d._trigger(a.jPlayer.event.timeupdate))},!1),b.on("ready",function(){c.gate&&d._trigger(a.jPlayer.event.loadeddata)},!1),b.on("duration",function(){c.gate&&(d._getAuroraStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.durationchange))},!1),b.on("end",function(){c.gate&&(d._updateButtons(!1),d._getAuroraStatus(b,!0),d._updateInterface(),d._trigger(a.jPlayer.event.ended))},!1),b.on("error",function(){c.gate&&(d._updateButtons(!1),d._seeked(),d.status.srcSet&&(d.status.waitForLoad=!0,d.status.waitForPlay=!0,d.status.video&&!d.status.nativeVideoControls&&d.internal.video.jq.css({width:"0px",height:"0px"}),d._validString(d.status.media.poster)&&!d.status.nativeVideoControls&&d.internal.poster.jq.show(),d.css.jq.videoPlay.length&&d.css.jq.videoPlay.show(),d._error({type:a.jPlayer.error.URL,context:d.status.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(a,b){var c=0,d=0,e=0,f=0;isFinite(a.duration)&&(this.status.duration=a.duration),c=a.currentTime,d=this.status.duration>0?100*c/this.status.duration:0,"object"==typeof a.seekable&&a.seekable.length>0?(e=this.status.duration>0?100*a.seekable.end(a.seekable.length-1)/this.status.duration:100,f=this.status.duration>0?100*a.currentTime/a.seekable.end(a.seekable.length-1):0):(e=100,f=d),b&&(c=0,f=0,d=0),this.status.seekPercent=e,this.status.currentPercentRelative=f,this.status.currentPercentAbsolute=d,this.status.currentTime=c,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=a.videoWidth,this.status.videoHeight=a.videoHeight,this.status.readyState=a.readyState,this.status.networkState=a.networkState,this.status.playbackRate=a.playbackRate,this.status.ended=a.ended},_getAuroraStatus:function(a,b){var c=0,d=0,e=0,f=0;this.status.duration=a.duration/1e3,c=a.currentTime/1e3,d=this.status.duration>0?100*c/this.status.duration:0,a.buffered>0?(e=this.status.duration>0?a.buffered*this.status.duration/this.status.duration:100,f=this.status.duration>0?c/(a.buffered*this.status.duration):0):(e=100,f=d),b&&(c=0,f=0,d=0),this.status.seekPercent=e,this.status.currentPercentRelative=f,this.status.currentPercentAbsolute=d,this.status.currentTime=c,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_resetStatus:function(){this.status=a.extend({},this.status,a.jPlayer.prototype.status)},_trigger:function(b,c,d){var e=a.Event(b);e.jPlayer={},e.jPlayer.version=a.extend({},this.version),e.jPlayer.options=a.extend(!0,{},this.options),e.jPlayer.status=a.extend(!0,{},this.status),e.jPlayer.html=a.extend(!0,{},this.html),e.jPlayer.aurora=a.extend(!0,{},this.aurora),e.jPlayer.flash=a.extend(!0,{},this.flash),c&&(e.jPlayer.error=a.extend({},c)),d&&(e.jPlayer.warning=a.extend({},d)),this.element.trigger(e)},jPlayerFlashEvent:function(b,c){if(b===a.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var d=this.status.currentTime,e=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),d>0&&(e?this.pause(d):this.play(d))}this._trigger(a.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=c.version,this.version.needFlash!==this.version.flash&&this._error({type:a.jPlayer.error.VERSION,context:this.version.flash,message:a.jPlayer.errorMsg.VERSION+this.version.flash,hint:a.jPlayer.errorHint.VERSION}),this._trigger(a.jPlayer.event.repeat),this._trigger(b);if(this.flash.gate)switch(b){case a.jPlayer.event.progress:this._getFlashStatus(c),this._updateInterface(),this._trigger(b);break;case a.jPlayer.event.timeupdate:this._getFlashStatus(c),this._updateInterface(),this._trigger(b);break;case a.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(b);break;case a.jPlayer.event.pause:this._updateButtons(!1),this._trigger(b);break;case a.jPlayer.event.ended:this._updateButtons(!1),this._trigger(b);break;case a.jPlayer.event.click:this._trigger(b);break;case a.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:a.jPlayer.error.URL,context:c.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL});break;case a.jPlayer.event.seeking:this._seeking(),this._trigger(b);break;case a.jPlayer.event.seeked:this._seeked(),this._trigger(b);break;case a.jPlayer.event.ready:break;default:this._trigger(b)}return!1},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent,this.status.currentPercentRelative=a.currentPercentRelative,this.status.currentPercentAbsolute=a.currentPercentAbsolute,this.status.currentTime=a.currentTime,this.status.duration=a.duration,this.status.remaining=a.duration-a.currentTime,this.status.videoWidth=a.videoWidth,this.status.videoHeight=a.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(a){a===b?a=!this.status.paused:this.status.paused=!a,a?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(a?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));var a="";this.css.jq.currentTime.length&&(a=this._convertTime(this.status.currentTime),a!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)));var b="",c=this.status.duration,d=this.status.remaining;this.css.jq.duration.length&&("string"==typeof this.status.media.duration?b=this.status.media.duration:("number"==typeof this.status.media.duration&&(c=this.status.media.duration,d=c-this.status.currentTime),b=this.options.remainingDuration?(d>0?"-":"")+this._convertTime(d):this._convertTime(c)),b!==this.css.jq.duration.text()&&this.css.jq.duration.text(b))},_convertTime:c.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.aurora.active=!1,this.flash.active=!1},_escapeHtml:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(a){var b=document.createElement("div");return b.innerHTML='<a href="'+this._escapeHtml(a)+'">x</a>',b.firstChild.href},_absoluteMediaUrls:function(b){var c=this;return a.each(b,function(a,d){d&&c.format[a]&&"data:"!==d.substr(0,5)&&(b[a]=c._qualifyURL(d))}),b},addStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[a])},removeStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[a])},setMedia:function(b){var c=this,d=!1,e=this.status.media.poster!==b.poster;this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,b=this._absoluteMediaUrls(b),a.each(this.formats,function(e,f){var g="video"===c.format[f].media;if(a.each(c.solutions,function(e,h){if(c[h].support[f]&&c._validString(b[f])){var i="html"===h,j="aurora"===h;return g?(i?(c.html.video.gate=!0,c._html_setVideo(b),c.html.active=!0):(c.flash.gate=!0,c._flash_setVideo(b),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.show(),c.status.video=!0):(i?(c.html.audio.gate=!0,c._html_setAudio(b),c.html.active=!0,a.jPlayer.platform.android&&(c.androidFix.setMedia=!0)):j?(c.aurora.gate=!0,c._aurora_setAudio(b),c.aurora.active=!0):(c.flash.gate=!0,c._flash_setAudio(b),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.hide(),c.status.video=!1),d=!0,!1}}),d)return!1}),d?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(b.poster)&&(e?this.htmlElement.poster.src=b.poster:this.internal.poster.jq.show()),"string"==typeof b.title&&(this.css.jq.title.length&&this.css.jq.title.html(b.title),b.artist?this.css.jq.artist.html(b.artist):this.css.jq.artist.html(""),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",b.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",b.title)),this.status.srcSet=!0,this.status.media=a.extend({},b),this._updateButtons(!1),this._updateInterface(),this._trigger(a.jPlayer.event.setmedia)):this._error({type:a.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:a.jPlayer.errorMsg.NO_SUPPORT,hint:a.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(a.jPlayer.focus=this)},play:function(b){var c="object"==typeof b;if(c&&this.options.useStateClassSkin&&!this.status.paused)this.pause(b);else if(b="number"==typeof b?b:NaN,this.status.srcSet)if(this.focus(),this.html.active){if(a.jPlayer.pxtPlay){a.jPlayer.mediaCurrent=this.status.media;var d=a.jPlayer.pxtAuto?"auto":"click";pxt("cl_music","play",location.href,this.status.media.title,this.status.media.artist,this.status.media.number,this.status.media.sub_number,d),a.jPlayer.pxtPlay=!1,a.jPlayer.pxtStop=!0}this.errorMessage&&(this.css.jq.mainTopBlock.show(),this.css.jq.errorMessage.hide(),this.errorMessage=!1),this._html_play(b)}else this.aurora.active?this._aurora_play(b):this.flash.active&&this._flash_play(b);else this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(a){a="number"==typeof a?a:NaN,this.status.srcSet?this.html.active?this._html_pause(a):this.aurora.active?this._aurora_pause(a):this.flash.active&&this._flash_pause(a):this._urlNotSetError("pause")},tellOthers:function(b,c){var d=this,e="function"==typeof c,f=Array.prototype.slice.call(arguments);"string"==typeof b&&(e&&f.splice(1,1),a.jPlayer.prototype.destroyRemoved(),a.each(this.instances,function(){d.element!==this&&(e&&!c.call(this.data("jPlayer"),d)||this.jPlayer.apply(this,f))}))},pauseOthers:function(a){this.tellOthers("pause",function(){return this.status.srcSet},a)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,0,100),this.status.srcSet?this.html.active?this._html_playHead(a):this.aurora.active?this._aurora_playHead(a):this.flash.active&&this._flash_playHead(a):this._urlNotSetError("playHead")},_muted:function(a){this.mutedWorker(a),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},a)},mutedWorker:function(b){this.options.muted=b,this.html.used&&this._html_setProperty("muted",b),this.aurora.used&&this._aurora_mute(b),this.flash.used&&this._flash_mute(b),this.html.video.gate||this.html.audio.gate||(this._updateMute(b),this._updateVolume(this.options.volume),this._trigger(a.jPlayer.event.volumechange))},mute:function(a){var c="object"==typeof a;c&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(a=a===b||!!a,this._muted(a))},unmute:function(a){a=a===b||!!a,this._muted(!a)},_updateMute:function(a){a===b&&(a=this.options.muted),a?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):a?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(a){this.volumeWorker(a),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},a)},volumeWorker:function(b){b=this._limitValue(b,0,1),this.options.volume=b,this.html.used&&this._html_setProperty("volume",b),this.aurora.used&&this._aurora_volume(b),this.flash.used&&this._flash_volume(b),this.html.video.gate||this.html.audio.gate||(this._updateVolume(b),this._trigger(a.jPlayer.event.volumechange))},volumeBar:function(b){if(this.css.jq.volumeBar.length){var c=a(b.currentTarget),d=c.offset(),e=b.pageX-d.left,f=c.width(),g=c.height()-b.pageY+d.top,h=c.height();this.options.verticalVolume?this.volume(g/h):this.volume(e/f)}this.options.muted&&this._muted(!1)},_updateVolume:function(a){a===b&&(a=this.options.volume),a=this.options.muted?0:a,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*a+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(b){var c=this;this.options.cssSelectorAncestor=b,this._removeUiClass(),this.ancestorJq=b?a(b):[],b&&1!==this.ancestorJq.length&&this._warning({type:a.jPlayer.warning.CSS_SELECTOR_COUNT,context:b,message:a.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:a.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),a.each(this.options.cssSelector,function(a,b){c._cssSelector(a,b)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(b,c){var d=this;if("string"==typeof c)if(a.jPlayer.prototype.options.cssSelector[b]){if(this.css.jq[b]&&this.css.jq[b].length&&this.css.jq[b].unbind(".jPlayer"),this.options.cssSelector[b]=c,this.css.cs[b]=this.options.cssSelectorAncestor+" "+c,c?this.css.jq[b]=a(this.css.cs[b]):this.css.jq[b]=[],this.css.jq[b].length&&this[b]){var e=function(c){c.preventDefault(),d[b](c),d.options.autoBlur?a(this).blur():a(this).focus()};this.css.jq[b].bind("click.jPlayer",e)}c&&1!==this.css.jq[b].length&&this._warning({type:a.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[b],message:a.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[b].length+" found for "+b+" method.",hint:a.jPlayer.warningHint.CSS_SELECTOR_COUNT})}else this._warning({type:a.jPlayer.warning.CSS_SELECTOR_METHOD,context:b,message:a.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:a.jPlayer.warningHint.CSS_SELECTOR_METHOD});else this._warning({type:a.jPlayer.warning.CSS_SELECTOR_STRING,context:c,message:a.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:a.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(a){this.options.toggleDuration&&(this.options.captureDuration&&a.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(b){if(this.css.jq.seekBar.length){var c=a(b.currentTarget),d=c.offset(),e=b.pageX-d.left,f=c.width(),g=100*e/f;this.playHead(g)}},playbackRate:function(a){this._setOption("playbackRate",a)},playbackRateBar:function(b){if(this.css.jq.playbackRateBar.length){var c,d,e=a(b.currentTarget),f=e.offset(),g=b.pageX-f.left,h=e.width(),i=e.height()-b.pageY+f.top,j=e.height();c=this.options.verticalPlaybackRate?i/j:g/h,d=c*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate,this.playbackRate(d)}},_updatePlaybackRate:function(){var a=this.options.playbackRate,b=(a-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*b+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(b){if(a.jPlayer.mediaCurrent)var c=a.jPlayer.mediaCurrent.title,d=a.jPlayer.mediaCurrent.artist,e=a.jPlayer.mediaCurrent.number,f=a.jPlayer.mediaCurrent.sub_number;else var c=this.css.jq.title.html(),d=this.css.jq.artist.html(),e=1,f=1;pxt("cl_music","repeat",location.href,c,d,e,f);var g="object"==typeof b;g&&this.options.useStateClassSkin&&this.options.loop?this._loop(!1):this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(b){this.options.loop!==b&&(this.options.loop=b,this._updateButtons(),this._trigger(a.jPlayer.event.repeat))},option:function(c,d){var e=c;if(0===arguments.length)return a.extend(!0,{},this.options);if("string"==typeof c){var f=c.split(".");if(d===b){for(var g=a.extend(!0,{},this.options),h=0;h<f.length;h++){if(g[f[h]]===b)return this._warning({type:a.jPlayer.warning.OPTION_KEY,context:c,message:a.jPlayer.warningMsg.OPTION_KEY,hint:a.jPlayer.warningHint.OPTION_KEY}),b;g=g[f[h]]}return g}e={};for(var i=e,j=0;j<f.length;j++)j<f.length-1?(i[f[j]]={},i=i[f[j]]):i[f[j]]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(b,c){var d=this;switch(b){case"volume":this.volume(c);break;case"muted":this._muted(c);break;case"globalVolume":this.options[b]=c;break;case"cssSelectorAncestor":this._cssSelectorAncestor(c);break;case"cssSelector":a.each(c,function(a,b){d._cssSelector(a,b)});break;case"playbackRate":this.options[b]=c=this._limitValue(c,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",c),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[b]=c=this._limitValue(c,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",c),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[b]=c=this._limitValue(c,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[b]=c=this._limitValue(c,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[b]!==c){var e=a.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!e||e&&!this.status.waitForPlay)&&(e||(this.options[b]=c),c?this._requestFullscreen():this._exitFullscreen(),e||this._setOption("fullWindow",c))}break;case"fullWindow":this.options[b]!==c&&(this._removeUiClass(),this.options[b]=c,this._refreshSize());break;case"size":this.options.fullWindow||this.options[b].cssClass===c.cssClass||this._removeUiClass(),this.options[b]=a.extend({},this.options[b],c),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[b].cssClass!==c.cssClass&&this._removeUiClass(),this.options[b]=a.extend({},this.options[b],c),this._refreshSize();break;case"autohide":this.options[b]=a.extend({},this.options[b],c),this._updateAutohide();break;case"loop":this._loop(c);break;case"remainingDuration":this.options[b]=c,this._updateInterface();break;case"toggleDuration":this.options[b]=c;break;case"nativeVideoControls":this.options[b]=a.extend({},this.options[b],c),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[b]=a.extend({},this.options[b],c),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[b]=a.extend({},this.options[b],c),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[b]!==c&&(this.options[b]=c,c?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[b]=a.extend({},this.options[b],c);break;case"keyEnabled":this.options[b]=c,c||this!==a.jPlayer.focus||(a.jPlayer.focus=null);break;case"keyBindings":this.options[b]=a.extend(!0,{},this.options[b],c);break;case"audioFullScreen":this.options[b]=c;break;case"autoBlur":this.options[b]=c}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(a.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var a=this,b="mousemove.jPlayer",c=".jPlayerAutohide",d=b+c,e=function(b){var c,d,e=!1;"undefined"!=typeof a.internal.mouse?(c=a.internal.mouse.x-b.pageX,d=a.internal.mouse.y-b.pageY,e=Math.floor(c)>0||Math.floor(d)>0):e=!0,a.internal.mouse={x:b.pageX,y:b.pageY},e&&a.css.jq.gui.fadeIn(a.options.autohide.fadeIn,function(){clearTimeout(a.internal.autohideId),a.internal.autohideId=setTimeout(function(){a.css.jq.gui.fadeOut(a.options.autohide.fadeOut)},a.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(c),this.css.jq.gui.unbind(c),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind(d,e),this.css.jq.gui.bind(d,e),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(a){var b="object"==typeof a;b&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var b=this,c=a.jPlayer.nativeFeatures.fullscreen;c.api.fullscreenEnabled&&c.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){b._fullscreenchange()}),document.addEventListener(c.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var b=a.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(b.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!a.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var b=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],c=a.jPlayer.nativeFeatures.fullscreen;c.used.webkitVideo&&(b=this.htmlElement.video),c.api.fullscreenEnabled&&c.api.requestFullscreen(b)},_exitFullscreen:function(){var b,c=a.jPlayer.nativeFeatures.fullscreen;c.used.webkitVideo&&(b=this.htmlElement.video),c.api.fullscreenEnabled&&c.api.exitFullscreen(b)},_html_initMedia:function(b){var c=a(this.htmlElement.media).empty();a.each(b.track||[],function(a,b){var d=document.createElement("track");d.setAttribute("kind",b.kind?b.kind:""),d.setAttribute("src",b.src?b.src:""),d.setAttribute("srclang",b.srclang?b.srclang:""),d.setAttribute("label",b.label?b.label:""),b.def&&d.setAttribute("default",b.def),c.append(d)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(a.jPlayer.event.timeupdate)},_html_setFormat:function(b){var c=this;a.each(this.formats,function(a,d){if(c.html.support[d]&&b[d])return c.status.src=b[d],c.status.format[d]=!0,c.status.formatType=d,!1})},_html_setAudio:function(a){this._html_setFormat(a),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(a)},_html_setVideo:function(a){this._html_setFormat(a),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(a.poster)?a.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(a)},_html_resetMedia:function(){
this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var b=this,c=this.htmlElement.media;if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=a;else if(isNaN(a))c.play();else{this.internal.cmdsIgnored&&c.play();try{if(c.seekable&&!("object"==typeof c.seekable&&c.seekable.length>0))throw 1;c.currentTime=a,c.play()}catch(d){return void(this.internal.htmlDlyCmdId=setTimeout(function(){b.play(a)},250))}}this._html_checkWaitForPlay()},_html_pause:function(a){var b=this,c=this.htmlElement.media;if(this.androidFix.play=!1,a>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),c.pause(),this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=a;else if(!isNaN(a))try{if(c.seekable&&!("object"==typeof c.seekable&&c.seekable.length>0))throw 1;c.currentTime=a}catch(d){return void(this.internal.htmlDlyCmdId=setTimeout(function(){b.pause(a)},250))}a>0&&this._html_checkWaitForPlay()},_html_playHead:function(a){var b=this,c=this.htmlElement.media;this._html_load();try{if("object"==typeof c.seekable&&c.seekable.length>0)c.currentTime=a*c.seekable.end(c.seekable.length-1)/100;else{if(!(c.duration>0)||isNaN(c.duration))throw"e";c.currentTime=a*c.duration/100}}catch(d){return void(this.internal.htmlDlyCmdId=setTimeout(function(){b.playHead(a)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(a,b){this.html.audio.available&&(this.htmlElement.audio[a]=b),this.html.video.available&&(this.htmlElement.video[a]=b)},_aurora_setAudio:function(b){var c=this;a.each(this.formats,function(a,d){if(c.aurora.support[d]&&b[d])return c.status.src=b[d],c.status.format[d]=!0,c.status.formatType=d,!1}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(b){this.status.waitForLoad||isNaN(b)||this.aurora.player.seek(b),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(a.jPlayer.event.play)},_aurora_pause:function(b){isNaN(b)||this.aurora.player.seek(1e3*b),this.aurora.player.pause(),b>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(a.jPlayer.event.pause)},_aurora_playHead:function(a){this.aurora.player.duration>0&&this.aurora.player.seek(a*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(a){this.aurora.player.volume=100*a},_aurora_mute:function(a){a?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=a},_flash_setAudio:function(b){var c=this;try{a.each(this.formats,function(a,d){if(c.flash.support[d]&&b[d]){switch(d){case"m4a":case"fla":c._getMovie().fl_setAudio_m4a(b[d]);break;case"mp3":c._getMovie().fl_setAudio_mp3(b[d]);break;case"rtmpa":c._getMovie().fl_setAudio_rtmp(b[d])}return c.status.src=b[d],c.status.format[d]=!0,c.status.formatType=d,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(d){this._flashError(d)}},_flash_setVideo:function(b){var c=this;try{a.each(this.formats,function(a,d){if(c.flash.support[d]&&b[d]){switch(d){case"m4v":case"flv":c._getMovie().fl_setVideo_m4v(b[d]);break;case"rtmpv":c._getMovie().fl_setVideo_rtmp(b[d])}return c.status.src=b[d],c.status.format[d]=!0,c.status.formatType=d,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(d){this._flashError(d)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(a){this._flashError(a)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(a){this._flashError(a)}this.status.waitForLoad=!1},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(b){this._flashError(b)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(b){this._flashError(b)}a>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(b){this._flashError(b)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(b){this._flashError(b)}},_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(b){this._flashError(b)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var a,b=0;if(window.ActiveXObject)try{if(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var c=a.GetVariable("$version");c&&(c=c.split(" ")[1].split(","),b=parseInt(c[0],10)+"."+parseInt(c[1],10))}}catch(d){}else navigator.plugins&&navigator.mimeTypes.length>0&&(a=navigator.plugins["Shockwave Flash"],a&&(b=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")));return 1*b},_checkForFlash:function(a){var b=!1;return this._getFlashPluginVersion()>=a&&(b=!0),b},_validString:function(a){return a&&"string"==typeof a},_limitValue:function(a,b,c){return a<b?b:a>c?c:a},_urlNotSetError:function(b){this._error({type:a.jPlayer.error.URL_NOT_SET,context:b,message:a.jPlayer.errorMsg.URL_NOT_SET,hint:a.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(b){var c;c=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:a.jPlayer.error[c],context:this.internal.flash.swf,message:a.jPlayer.errorMsg[c]+b.message,hint:a.jPlayer.errorHint[c]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(b){var c=a.extend({},STP.currentMedia,this.status.media);if(b.type===a.jPlayer.error.NO_SOLUTION)this.css.jq.errorMessage.removeClass("jp-message_other"),this.css.jq.errorMessage.addClass("jp-message_unsupported"),pxt("emu");else{this.css.jq.errorMessage.removeClass("jp-message_unsupported"),this.css.jq.errorMessage.addClass("jp-message_other");var d=this.html.used?1:0,e=this.flash.used?1:0,f=this.aurora.used?1:0;pxt("em","err",c.mp3,c.title,c.artist,c.number,c.sub_number,b.errCode,b.type,d,e,f)}this.css.jq.mainTopBlock.hide(),this.css.jq.errorMessage.show(),this.errorMessage=!0,this._trigger(a.jPlayer.event.error,b),this.options.errorAlerts&&this._alert("Error!"+(b.message?"\n"+b.message:"")+(b.hint?"\n"+b.hint:"")+"\nContext: "+b.context)},_warning:function(c){this._trigger(a.jPlayer.event.warning,b,c),this.options.warningAlerts&&this._alert("Warning!"+(c.message?"\n"+c.message:"")+(c.hint?"\n"+c.hint:"")+"\nContext: "+c.context)},_alert:function(a){var b="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(b):alert(b)},_emulateHtmlBridge:function(){var b=this;a.each(a.jPlayer.emulateMethods.split(/\s+/g),function(a,c){b.internal.domNode[c]=function(a){b[c](a)}}),a.each(a.jPlayer.event,function(c,d){var e=!0;a.each(a.jPlayer.reservedEvent.split(/\s+/g),function(a,b){if(b===c)return e=!1,!1}),e&&b.element.bind(d+".jPlayer.jPlayerHtml",function(){b._emulateHtmlUpdate();var a=document.createEvent("Event");a.initEvent(c,!1,!0),b.internal.domNode.dispatchEvent(a)})})},_emulateHtmlUpdate:function(){var b=this;a.each(a.jPlayer.emulateStatus.split(/\s+/g),function(a,c){b.internal.domNode[c]=b.status[c]}),a.each(a.jPlayer.emulateOptions.split(/\s+/g),function(a,c){b.internal.domNode[c]=b.options[c]})},_destroyHtmlBridge:function(){var b=this;this.element.unbind(".jPlayerHtml");var c=a.jPlayer.emulateMethods+" "+a.jPlayer.emulateStatus+" "+a.jPlayer.emulateOptions;a.each(c.split(/\s+/g),function(a,c){delete b.internal.domNode[c]})}},a.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},a.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+a.jPlayer.prototype.version.script+" needs Jplayer.swf version "+a.jPlayer.prototype.version.needFlash+" but found "},a.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},a.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},a.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},a.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}}),function(a,b){jPlayerPlaylist=function(b,c,d,e){var f=this;this.current=e,this.loop=!1,this.loopTrack=!1,this.shuffled=!1,this.removing=!1,this.cssSelector=a.extend({},this._cssSelector,b),this.options=a.extend(!0,{keyBindings:{next:{key:221,fn:function(){f.next()}},previous:{key:219,fn:function(){f.previous()}},shuffle:{key:83,fn:function(){f.shuffle()}}},stateClass:{shuffled:"jp-state-shuffled"}},this._options,d),this.playlist=[],this.original=[],this._initPlaylist(c),this.cssSelector.details=this.cssSelector.cssSelectorAncestor+" .jp-details",this.cssSelector.playlist=this.cssSelector.cssSelectorAncestor+" .jp-playlist",this.cssSelector.next=this.cssSelector.cssSelectorAncestor+" .jp-next",this.cssSelector.previous=this.cssSelector.cssSelectorAncestor+" .jp-previous",this.cssSelector.shuffle=this.cssSelector.cssSelectorAncestor+" .jp-shuffle",this.cssSelector.shuffleOff=this.cssSelector.cssSelectorAncestor+" .jp-shuffle-off",this.cssSelector.scroller=this.cssSelector.cssSelectorAncestor+" .scroller",this.options.cssSelectorAncestor=this.cssSelector.cssSelectorAncestor,this.options.repeat=function(a){var b=a.jPlayer.options.loop;b&&d.loopTrack?f.loopTrack=d.loopTrack:(f.loopTrack=!1,f.loop=b)},a(this.cssSelector.jPlayer).bind(a.jPlayer.event.ready,function(){f._init()}),a(this.cssSelector.jPlayer).bind(a.jPlayer.event.ended,function(){f.next()}),a(this.cssSelector.jPlayer).bind(a.jPlayer.event.play,function(){a(this).jPlayer("pauseOthers")}),a(this.cssSelector.jPlayer).bind(a.jPlayer.event.resize,function(b){b.jPlayer.options.fullScreen?a(f.cssSelector.details).show():a(f.cssSelector.details).hide()}),a(this.cssSelector.previous).click(function(a){a.preventDefault(),f.previous(),f.blur(this)}),a(this.cssSelector.next).click(function(a){a.preventDefault(),f.next(),f.blur(this)}),a(this.cssSelector.shuffle).click(function(b){b.preventDefault(),f.shuffled&&a(f.cssSelector.jPlayer).jPlayer("option","useStateClassSkin")?f.shuffle(!1):f.shuffle(!0),f.blur(this)}),a(this.cssSelector.shuffleOff).click(function(a){a.preventDefault(),f.shuffle(!1),f.blur(this)}).hide(),this.options.fullScreen||a(this.cssSelector.details).hide(),a(this.cssSelector.playlist+" ul").empty(),this._createItemHandlers(),a(this.cssSelector.jPlayer).jPlayer(this.options)},jPlayerPlaylist.prototype={_cssSelector:{jPlayer:"#jquery_jplayer_1",cssSelectorAncestor:"#jp_container_1"},_options:{playlistOptions:{autoPlay:!1,loopOnPrevious:!1,shuffleOnLoop:!0,enableRemoveControls:!1,displayTime:"slow",addTime:"fast",removeTime:"fast",shuffleTime:"slow",itemClass:"jp-playlist-item",playBtn:"jp-play-btn",freeGroupClass:"jp-free-media",freeItemClass:"jp-playlist-item-free",removeItemClass:"jp-playlist-item-remove",statePlaying:"jp-state-playing"}},option:function(a,c){if(c===b)return this.options.playlistOptions[a];switch(this.options.playlistOptions[a]=c,a){case"enableRemoveControls":this._updateControls();break;case"itemClass":case"freeGroupClass":case"freeItemClass":case"removeItemClass":this._refresh(!0),this._createItemHandlers()}return this},_init:function(){var a=this;this._refresh(function(){a.options.playlistOptions.autoPlay&&a.play(a.current)})},_initPlaylist:function(b){this.shuffled=!1,this.removing=!1,this.original=a.extend(!0,[],b),this._originalPlaylist()},_originalPlaylist:function(){var b=this;this.playlist=[],a.each(this.original,function(a){b.playlist[a]=b.original[a]})},_refresh:function(b){var c=this;if(b&&!a.isFunction(b))a(this.cssSelector.playlist+" ul").empty(),a.each(this.playlist,function(b){a(c.cssSelector.playlist+" ul").append(c._createListItem(c.playlist[b]))}),this._updateControls();else{var d=a(this.cssSelector.playlist+" ul").children().length?this.options.playlistOptions.displayTime:0;a(this.cssSelector.playlist+" ul").slideUp(d,function(){var d=a(this);a(this).empty(),a.each(c.playlist,function(a){d.append(c._createListItem(c.playlist[a]))}),c._updateControls(),a.isFunction(b)&&b(),c.playlist.length?a(this).show():a(this).show()})}},_createListItem:function(a){var b="<li><div>";return b+='<a title="Воспроизвести" data-title="'+a.title+'"'+(a.artist?'data-artist="'+a.artist+'"':"")+' data-number="'+a.number+'" data-subnumber="'+a.sub_number+'" href="javascript:;" class="'+this.options.playlistOptions.itemClass+'" tabindex="0"><div class="jp-play-bar"></div><i class="'+this.options.playlistOptions.playBtn+'"  ></i><div class="jp-playlist-about">'+(a.artist?'<span class="jp-playlist-artist">'+a.artist+" — </span>":"")+a.title+'</div><div class="jp-playlist-duration">'+a.duration+"</div></a>",b+="</div></li>"},_createItemHandlers:function(){var b=this;a(this.cssSelector.playlist).off("click","a."+this.options.playlistOptions.itemClass).on("click","a."+this.options.playlistOptions.itemClass,function(c){c.preventDefault();var d=a(this).parent().parent().index(),e=a(b.cssSelector.cssSelectorAncestor).hasClass(b.options.playlistOptions.statePlaying);b.current!==d?b.play(d):e?c.target.className===b.options.playlistOptions.playBtn&&b.pause():(a(b.cssSelector.jPlayer).data("jPlayer").status.srcSet||b.select(b.current),a(b.cssSelector.jPlayer).jPlayer("play")),b.blur(this)}),a(this.cssSelector.playlist).off("click","a."+this.options.playlistOptions.freeItemClass).on("click","a."+this.options.playlistOptions.freeItemClass,function(c){c.preventDefault(),a(this).parent().parent().find("."+b.options.playlistOptions.itemClass).click(),b.blur(this)}),a(this.cssSelector.playlist).off("click","a."+this.options.playlistOptions.removeItemClass).on("click","a."+this.options.playlistOptions.removeItemClass,function(c){c.preventDefault();var d=a(this).parent().parent().index();b.remove(d),b.blur(this)})},_updateControls:function(){this.options.playlistOptions.enableRemoveControls?a(this.cssSelector.playlist+" ."+this.options.playlistOptions.removeItemClass).show():a(this.cssSelector.playlist+" ."+this.options.playlistOptions.removeItemClass).hide(),this.shuffled?a(this.cssSelector.jPlayer).jPlayer("addStateClass","shuffled"):a(this.cssSelector.jPlayer).jPlayer("removeStateClass","shuffled"),a(this.cssSelector.shuffle).length&&a(this.cssSelector.shuffleOff).length&&(this.shuffled?(a(this.cssSelector.shuffleOff).show(),a(this.cssSelector.shuffle).hide()):(a(this.cssSelector.shuffleOff).hide(),a(this.cssSelector.shuffle).show()))},_highlight:function(c){this.playlist.length&&c!==b&&(a(this.cssSelector.playlist+" .jp-playlist-current").removeClass("jp-playlist-current"),a(this.cssSelector.playlist+" li:nth-child("+(c+1)+")").addClass("jp-playlist-current").find(".jp-playlist-item").addClass("jp-playlist-current"))},setPlaylist:function(a){this._initPlaylist(a),this._init()},add:function(b,c){a(this.cssSelector.playlist+" ul").append(this._createListItem(b)).find("li:last-child").hide().slideDown(this.options.playlistOptions.addTime),this._updateControls(),this.original.push(b),this.playlist.push(b),c?this.play(this.playlist.length-1):1===this.original.length&&this.select(0)},remove:function(c){var d=this;return c===b?(this._initPlaylist([]),this._refresh(function(){a(d.cssSelector.jPlayer).jPlayer("clearMedia")}),!0):!this.removing&&(c=c<0?d.original.length+c:c,0<=c&&c<this.playlist.length&&(this.removing=!0,a(this.cssSelector.playlist+" li:nth-child("+(c+1)+")").slideUp(this.options.playlistOptions.removeTime,function(){if(a(this).remove(),d.shuffled){var b=d.playlist[c];a.each(d.original,function(a){if(d.original[a]===b)return d.original.splice(a,1),!1}),d.playlist.splice(c,1)}else d.original.splice(c,1),d.playlist.splice(c,1);d.original.length?c===d.current?(d.current=c<d.original.length?d.current:d.original.length-1,d.select(d.current)):c<d.current&&d.current--:(a(d.cssSelector.jPlayer).jPlayer("clearMedia"),d.current=0,d.shuffled=!1,d._updateControls()),d.removing=!1})),!0)},select:function(b){b=b<0?this.original.length+b:b,0<=b&&b<this.playlist.length?(this.current=b,this._highlight(b),STP.currentMedia=this.playlist[this.current],a(this.cssSelector.jPlayer).jPlayer("setMedia",STP.currentMedia)):this.current=0},play:function(c){var d=a("."+this.options.playlistOptions.itemClass).eq(c),e=a.jPlayer.pxtAuto?"auto":"click";this.loopTrack&&"click"!==e||(pxt("cl_music","other",location.href,d.data("title"),d.data("artist"),d.data("number"),d.data("subnumber"),e),a.jPlayer.pxtPlay=!0),c=c<0?this.original.length+c:c,0<=c&&c<this.playlist.length?this.playlist.length&&(this.select(c),a(this.cssSelector.jPlayer).jPlayer("play")):c===b&&a(this.cssSelector.jPlayer).jPlayer("play")},pause:function(){a(this.cssSelector.jPlayer).jPlayer("pause")},next:function(){a.jPlayer.pxtAuto=!0;var b=this.current+1<this.playlist.length?this.current+1:0,c=a(this.cssSelector.scroller).scrollTop(),d=a(this.cssSelector.scroller).find("li").height(),e=parseInt(a(this.cssSelector.scroller).height()/d);this.loop&&(0===b&&this.shuffled&&this.options.playlistOptions.shuffleOnLoop&&this.playlist.length>1?this.shuffle(!0,!0):this.play(b)),this.loopTrack?this.play(this.current):b>0&&this.play(b),c<d*b+d/1.5&&c+e*d>d*b+d/1.5||(0==b&&this.loop?a(this.cssSelector.scroller).scrollTop(0):0!=b&&a(this.cssSelector.scroller).scrollTop(b*d-e*d+d)),a.jPlayer.pxtAuto=!1},previous:function(){var a=this.current-1>=0?this.current-1:this.playlist.length-1;(this.loop&&this.options.playlistOptions.loopOnPrevious||a<this.playlist.length-1)&&this.play(a)},shuffle:function(c,d){var e=this;c===b&&(c=!this.shuffled),(c||c!==this.shuffled)&&a(this.cssSelector.playlist+" ul").slideUp(this.options.playlistOptions.shuffleTime,function(){e.shuffled=c,c?e.playlist.sort(function(){return.5-Math.random()}):e._originalPlaylist(),e._refresh(!0),d||!a(e.cssSelector.jPlayer).data("jPlayer").status.paused?e.play(0):e.select(0),a(this).slideDown(e.options.playlistOptions.shuffleTime)})},blur:function(b){a(this.cssSelector.jPlayer).jPlayer("option","autoBlur")&&a(b).blur()}}}(jQuery);var go=go||{};!function(){"use strict";go.ResultModel=Backbone.Model.extend({myViewName:function(){return go.ResultView},initialize:function(){var a=this.attributes;if(a.image&&"microdata"==a.image_source&&a.image.width&&a.image.height&&(a.image.max_width=138,a.image.max_height=77,a.image.img_size=go.utils.calcSizes(a.image.width,a.image.height,a.image.max_width,"w"),a.image.height>a.image.max_height?a.image.img_size=go.utils.calcSizes(a.image.width,a.image.height,a.image.max_height,"h"):a.image.margin_h=Math.floor((a.image.max_height-a.image.height)/2)),a.microdata_video&&"upload_ts"in a.microdata_video){var b=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"];a.microdata_video.time_upload=a.microdata_video.upload_date.date+" "+b[a.microdata_video.upload_date.month-1]+" "+a.microdata_video.upload_date.year+" г."}a.favicon_hr&&1==STP.hidpi?a.favicon_result=a.favicon_hr:a.favicon&&(a.favicon_result=a.favicon);var c=!window.STP.noAdblock;c&&(a.redir_url+="&detected=1"),this.get("address")&&this.set("address",this.get("address")[0])},defaults:{passage:"Найден по ссылке"}})}();var go=go||{};!function(){"use strict";go.CarouselModel=Backbone.Model.extend({initialize:function(){var a=this.get("infocard_query");a&&(this.set("tUrlObj",go.utils.urlForObj({q:a,nosp:1,infcmix:this.get("infcmix")})),this.set("tUrl",go.utils.urlFor(STP.location,this.get("tUrlObj")))),this.get("items").forEach(function(a,b){a.id=b,a.cUrlObj=go.utils.urlForObj({q:a.query||a.title,nosp:1,infcmix:a.infcmix}),a.cUrl=go.utils.urlFor(STP.location,a.cUrlObj),a.titleBr=go.utils.ellipsisHelper(a.title,14)})}})}();var go=go||{};!function(){"use strict";go.AdBottomModel=Backbone.Model.extend({initialize:function(){var a=this,b="//favicon.yandex.net/favicon/";a.get("bottom").forEach(function(c,d){b+="fav_domain"in c?c.fav_domain:c.idna_domain,a.get("bottom").length-1!==d&&(b+="/"),c.number=d+1}),a.set("position","bottom"),a.set("prefix","a260219d"),a.set("ico",b),a.set("icoClass",a.get("prefix")+"__ficon_bottom")}})}();var go=go||{};!function(){"use strict";go.AdSideModel=Backbone.Model.extend({initialize:function(){this.get("side").forEach(function(a,b){a.number=b+1}),this.set("position","side"),this.set("prefix","a260219d")}})}();var go=go||{};!function(){"use strict";go.AdTopModel=Backbone.Model.extend({initialize:function(){var a=this,b="//favicon.yandex.net/favicon/";a.get("top").forEach(function(c,d){b+="fav_domain"in c?c.fav_domain:c.idna_domain,a.get("top").length-1!==d&&(b+="/"),c.number=d+1}),a.set("position","top"),a.set("prefix","a260219d"),a.set("ico",b),a.set("icoClass",a.get("prefix")+"__ficon_top"),a.set("isVisibleVcard",!0)}})}();var go=go||{};!function(){"use strict";go.FooterWidgetModel=Backbone.Model.extend({initialize:function(){var a=this;setTimeout(function(){a.variables={session:$.cookie.get("widget_session"),loginMail:$.cookie.get("login_mail"),userMail:__PH.activeUser()||null,host:STP.stepanHost,userSexParam:STP.user_sex?"&gender="+STP.user_sex:"",userAgeParam:STP.user_age?"&age="+STP.user_age:"",hidpiParam:1==STP.hidpi?"&preset=web_kabarga":"&preset=web_main",ie9:"msie"===STP.detector_browser&&9===STP.detector_version},a.variables.userMail||(a.variables.userSexParam="",a.variables.userAgeParam=""),a.variables.loginMail!==a.variables.userMail&&a.variables.session?a.getSession():a.variables.session?a.getRecommend():a.getSession()},0)},getSession:function(){var a=this;$.ajax({dataType:a.variables.ie9?"jsonp":"json",url:a.variables.host+"/serp?query_type=login&no_cookies=1",timeout:5e3,xhrFields:{withCredentials:!0}}).done(function(b){0!==b.error_code&&pxt("stperr",b.error_code),b.session&&(a.variables.session=b.session,$.cookie.set("widget_session",a.variables.session,{expires:30}),a.variables.userMail?$.cookie.set("login_mail",a.variables.userMail,{expires:30}):$.cookie.remove("login_mail"),a.getRecommend())}).error(function(a){pxt("stperr",a.status,a.statusText)})},getRecommend:function(){var a=this,b=0,c={},d=[],e=a.variables.host+"/serp?query_type=recommends&no_cookies=1&n=8"+a.variables.hidpiParam+a.variables.userSexParam+a.variables.userAgeParam+"&session="+encodeURIComponent(a.variables.session);$.ajax({dataType:a.variables.ie9?"jsonp":"json",url:e,timeout:5e3,xhrFields:{withCredentials:!0}}).done(function(e){if(0!=e.error_code&&pxt("stperr",e.error_code),"feed"in e&&0!==e.feed.length&&e.session){a.variables.session=e.session,$.cookie.set("widget_session",e.session,{expires:30});for(var f=0;f<e.sources.length;f++)c[e.sources[f].source_id]={},c[e.sources[f].source_id].cat_id=e.sources[f].category_id,c[e.sources[f].source_id].title=e.sources[f].title;for(var g=0;g<e.feed.length;g++){if(d[b]={},d[b].url=e.feed[g].content.url,d[b].redirect_url=e.feed[g].content.redirect_url,d[b].images=e.feed[g].content.pictures[0],d[b].title=e.feed[g].content.title?e.feed[g].content.title:c[e.feed[g].content.source_id].title,"rb_ad"===e.feed[g].type)d[b].pretty_url=e.feed[g].content.domain;else{var h=new URI(e.feed[g].content.url);d[b].pretty_url=h.hostname().indexOf("www.")!=-1?h.hostname().split("www.")[1]:h.hostname()}b+=1}a.set("items",d),go.dispatcher.trigger("footerWidgetModel_ready")}}).error(function(a){pxt("stperr",a.status,a.statusText)})}})}();var go=go||{};!function(){"use strict";go.InfocardModel=Backbone.Model.extend({variable:{containerHeight:201},defaults:{infocard:{}},initialize:function(){var a=this,b=!1;a.variable.iUrl=go.utils.urlFor("/search_images",{q:STP.qswap,frm:"web"});var c=Array.concat([],this.get("results"));c.forEach(function(c){var d=document.documentMode,e=/msie [\w.]+/,f=e.exec(navigator.userAgent.toLowerCase())&&(!d||d<=9);f&&"trailer"in c&&delete c.trailer,c.show_mode&&a.set("show_mode",c.show_mode),"images"==c.smack_type&&(c.images_query&&(a.variable.iUrl=go.utils.urlFor("/search_images",{q:c.images_query,frm:"web"})),a.images(c),b=!0),"infocard"==c.smack_type&&("frames"in c&&a.framesUnshift(c.frames,b,c.trailer||!1),"image"in c&&(c.image.iUrl="source"in c.image?c.image.source:a.variable.iUrl),"image"in c&&("frames"in c||b)&&a.imageUnshift(c.image),"summary"in c&&a.description(c.summary),"series"in c&&a.handleSeries(c.series),"carousels"in c&&a.carousel(c.carousels),"properties_table"in c&&a.propertiesTable(c.properties_table),"social_networks"in c&&(c.social_networks=a.socialNetworks(c.social_networks)),a.set("infocard",c)),"companies"==c.object_type&&a.set("company",c),"companies_list"==c.object_type&&a.set("companiesData",c),"recipes"==c.smack_type&&a.set("recipes",c)})},images:function(a){a.iUrl=this.variable.iUrl;for(var b=0;b<a.results.length;b++)a.results[b].iUrl=this.variable.iUrl+"#urlhash="+a.results[b].urlhash;this.set("images",a)},imageUnshift:function(a){var b={iUrl:a.iUrl,image:{orig_url:a.orig_url},thumb:{width:a.width,height:a.height,url:a.local_url}};this.get("images").results.unshift(b)},framesUnshift:function(a,b,c){var d,e=this,f=[],g={};a.forEach(function(a,b){d=0===b?e.variable.containerHeight:Math.round(e.variable.containerHeight/1.5),g={iUrl:a.source,image:{orig_url:a.orig_url},thumb:{width:a.width,height:a.height,url:a.local_url+"&h="+d}},c&&0===b&&(g.trailer=c.url),f.push(g)}),b?e.get("images").results=f.concat(e.get("images").results):(e.set("images",{iUrl:e.variable.iUrl,results:f,smack_type:"images"}),e.get("results").unshift(e.get("images")))},description:function(a){var b=STP.experiments.srch46407?420:310;a.text.length>b&&(a.text_hide=!0)},handleSeries:function(a){var b=this;"seasons"in a&&a.seasons.forEach(function(c,d){c.active&&b.set("seasons_active",d),c.id=d,c.number=parseInt(c.caption),c.urlObj=go.utils.urlForObj({q:c.query,infcmix:a.infcmix}),c.url=go.utils.urlFor(STP.location,c.urlObj)}),"episodes"in a&&a.episodes.forEach(function(c,d){c.active&&b.set("episodes_active",d),c.id=d,c.number=parseInt(c.caption),c.urlObj=go.utils.urlForObj({q:c.query,infcmix:a.infcmix}),c.url=go.utils.urlFor(STP.location,c.urlObj)})},carousel:function(a){a.forEach(function(a,b){a.items.length>10&&(a.items.length=10),a.items.forEach(function(a,b){a.id=b,a.cUrlObj=go.utils.urlForObj({q:a.query||a.title,nosp:1,infcmix:a.infcmix}),a.cUrl=go.utils.urlFor(STP.location,a.cUrlObj),a.titleBr=go.utils.ellipsisHelper(a.title,12)}),a.extend&&a.extend.query&&(a.ctUrlObj=go.utils.urlForObj($.extend({nosp:1,q:a.extend.query},a.extend)),delete a.ctUrlObj.query,a.id=b,a.ctUrl=go.utils.urlFor(STP.location,a.ctUrlObj))})},propertiesTable:function(a){a.forEach(function(a,b){a.query&&(a.id=b,a.pUrlObj=go.utils.urlForObj({q:a.query,nosp:1,infcmix:a.infcmix}),a.pUrl=go.utils.urlFor(STP.location,a.pUrlObj)),a.items&&a.items.forEach(function(a,c){a.query&&(a.id=b+":"+c,a.pUrlObj=go.utils.urlForObj({q:a.query,nosp:1,infcmix:a.infcmix}),a.pUrl=go.utils.urlFor(STP.location,a.pUrlObj))})})},socialNetworks:function(a){var b={facebook:"fb",twitter:"tw",instagram:"i",vk:"vk",myspace:"m",last_fm:"l",youtube:"y",livejournal:"lj",tumblr:"t",snapchat:"s",flickr:"fl",linkedin:"li"};return a.filter(function(a){return/facebook|twitter|instagram|vk|myspace|last_fm|linkedin|youtube|livejournal|tumblr|snapchat|flickr/.test(a.name)&&a.url}).map(function(a){return{name:a.name,pixel:"sc_"+b[a.name],url:a.url}})},getInfoPropertyItem:function(a){var b=this.get("infocard"),c=(a||"").split(":"),d=c[0],e=c[1];if(d&&e&&"properties_table"in b){var f=b.properties_table[d];if(f&&f.items&&f.items[e])return f.items[e]}return null},getInfoProperty:function(a){var b=this.get("infocard");return a&&"properties_table"in b?b.properties_table[a]:null},initSmackImages:function(a){var b=this.get("images"),c={},d=0;if(b&&b.results){for(var e=0;e<a.length;e++){var f=a[e],g=this.getSmackImages(b.results,{containerWidth:f,containerHeight:this.variable.containerHeight,margin:2,minImageWidth:40,rowsAmount:2});if(null===g){c={},d=0;break}c[f]=g,d=Math.max(d,g.count)}if(c[a[a.length-1]]&&b&&"results"in b){var h=c[a[a.length-1]].main.width>=a[a.length-1]/2;(b.results.length>2&&b.results.length<5&&h||b.results.length>=5)&&(this.set("smack_images_presets",c),this.set("smack_images",b.results.slice(0,d)))}}},getSmackImages:function(a,b){function c(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}var d=.3;a=a.map(function(a){return{width:a.thumb.width,height:a.thumb.height}});var e,f,g=Math.floor(b.containerWidth),h=Math.floor(b.containerHeight),i=Math.floor(b.margin),j=Math.floor(b.minImageWidth),k=Math.floor(b.rowsAmount);if(!(g>0&&h>0))return null;if(a.length<3)return null;if(!(i>=0))return null;if(!(j>1))return null;if(!(k>0))return null;if(2*j+i>g)return null;e=Math.floor(h/a[0].height*a[0].width),f=g>=500?250:g>=400?200:180;for(var l=90,m=STP.experiments.srch46407?2:0,n={height:h,width:e>l?Math.min(e,f)-m:l-m,marginRight:m,isShrunk:e>f+5||e<l+5},o=a.slice(1),p=new Array(k),q=g-n.width-m,r=h-i*(k-1),s=this.scaleIntegerValues(c(r/k,k),r),t=o,u=1,v=0;v<k&&t.length>0;v++){
var w=s[v],x=t.slice(0,t.length-k+v+1).map(function(a){return{height:w,width:w/a.height*a.width}}),y=this.getRowImages(x,q,i,d);t=t.slice(y.length),p[v]=this.fitImagesHorizontal(y,q-i*y.length),u+=y.length}return{count:u,main:n,rows:p}},getRowImages:function(a,b,c,d){if(!a||!a.length)return[];for(var e=[],f=b,g=0;g<a.length&&f>0;g++)e.push($.extend({},a[g])),f-=a[g].width+c;if(e.length>1){var h=-f,i=h/(b+h);i>d&&(e.length=e.length-1)}return e},fitImagesHorizontal:function(a,b){return this.scaleIntegerValues(a.map(function(a){return a.width}),b).map(function(b,c){return{height:a[c].height,width:b}})},scaleIntegerValues:function(a,b){function c(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b}if(a.length>b)throw Error("`values` count is bigger than `targetSum`");for(var d=c(a),e=b-d,f=new Array(a.length),g=0;g<a.length;g++)f[g]=Math.max(1,Math.round(a[g]+a[g]/d*e));var h=c(f);if(h!==b)for(var i=b-h,j=parseInt(i/f.length),k=i%f.length,l=0===k?null:f.map(function(a,b){return{index:b,value:a}}).sort(k>0?function(a,b){return a.value-b.value}:function(a,b){return b.value-a.value}).map(function(a){return a.index}),g=0;g<f.length;g++)f[g]+=j,null!==l&&g+1<=Math.abs(k)&&(f[l[g]]+=k<0?-1:1);return f}})}();var go=go||{};!function(){"use strict";go.LikemoreModel=Backbone.Model.extend({initialize:function(a){var b=this,c=new URI(a.url),d="https://likemore-fe.go.mail.ru",e="",f="";go.paramsCommon&&"likemore_env"in go.paramsCommon&&"t"===go.paramsCommon.likemore_env&&(d="http://likemore-fe.st.mail.ru");var g=d+"/goserp/?referer="+c.host()+"&use_escaping=0&n=4";$.ajax({dataType:"jsonp",url:g}).done(function(c){if(!c)return void pxt("likemore_empty",g,go.utils.urlpretty(a.url,{stripwww:!0,strippath:!0}));for(var d=0;d<c.pxt.length;d++)"werror"in c.pxt[d]&&(e=c.pxt[d].werror),"wshow"in c.pxt[d]&&(f=c.pxt[d].wshow);if(0!==c.error_code){var h=new Image;return h.src=e,void pxt("likemore_error",g,c.error_code,go.utils.urlpretty(a.url,{stripwww:!0,strippath:!0}))}c.list.length<4||(b.set("imgW",1==STP.hidpi?"&w=244&q=100":"&w=122&q=100"),b.set("list",c.list),b.set("pxt",f),go.dispatcher.trigger("likemoreModel_ready"))})}})}();var go=go||{};!function(){"use strict";go.MapPopupModel=Backbone.Model.extend({myViewName:function(){return go.MapPopupView},initialize:function(){this.set("address",""),this.set("number",0),this.set("link","")}})}();var go=go||{};!function(){"use strict";go.AfishaModel=Backbone.Model.extend({myViewName:function(){return go.AfishaView}})}();var go=go||{};!function(){"use strict";go.AnswerModel=Backbone.Model.extend({myViewName:function(){return go.AnswerView},initialize:function(){this.set("urlVert",go.utils.urlFor("/search_otvet",{q:STP.qswap,frm:"web"}));for(var a=0;a<this.get("results").length;a++)this.get("results")[a].time&&STP.localtime&&(this.get("results")[a].timeConvert=timeUtils.social(this.get("results")[a].time,STP.localtime))}})}();var go=go||{};!function(){"use strict";go.CalendarModel=Backbone.Model.extend({SHOW_MONTHS:3,COUNTRY_NAMES:{RUS:"России",UKR:"Украины",BYR:"Беларуси",KZT:"Казахстана"},WEEKDAY_NAMES:["ПН","ВТ","СР","ЧТ","ПТ","СБ","ВС"],MONTHS_NAMES:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],myViewName:function(){return go.CalendarView},initialize:function(){var a=new Date(1e3*STP.localtime);this.set("current_month",a.getMonth()),this.set("current_date",a.getDate()),this.set("month",this.get("month")-1),this.set("show_months",this.SHOW_MONTHS),this.set("scroll_month",this.get("month")<12-this.SHOW_MONTHS?this.get("month"):12-this.SHOW_MONTHS);var b={};if(this.get("country")in this.COUNTRY_NAMES){this.set("country_name",this.COUNTRY_NAMES[this.get("country")]);for(var c,d,e=this.get("dates")[this.get("country")],f=["holydays","shortdays","workdays"],g=0;g<e.length;g++){for(b[e[g].year]={},d=0;d<12;d++)b[e[g].year][d]={};for(c=0;c<f.length;c++)if(f[c]in e[g])for(d=0;d<e[g][f[c]].length;d++)b[e[g].year][e[g][f[c]][d][0]-1][f[c]]=e[g][f[c]][d][1]}}else{for(var h=new Date(1e3*STP.localtime).getFullYear();h>=2010;)b[h--]=null;this.set("country_name","")}this.set("calendar",b),this.set("year_list",_.keys(b).sort())},getCalendarData:function(a){var b=this.get("calendar");return b[this.get("year")]?b[this.get("year")][a]:{}},getMonthName:function(a){return this.MONTHS_NAMES[a]},getWeekdayName:function(a){return this.WEEKDAY_NAMES[a]},getWeekday:function(a){return a.getDay()>0?a.getDay()-1:6},daysInMonth:function(a){return new Date(this.get("year"),a+1,0).getDate()},weeksInMonth:function(a){var b=new Date(this.get("year"),a,1),c=new Date(this.get("year"),a+1,0);return Math.ceil(this.getWeekday(b)+c.getDate()/7)},firstWeekdayInMonth:function(a){return this.getWeekday(new Date(this.get("year"),a,1))}})}();var go=go||{};!function(){"use strict";var a=Backbone.Model.extend({initialize:function(){this.set("input_value",go.utils.floatformat(this.get("input").value,-5)),this.set("output_value",this.get("output").value),this.set("input_unit",this.get("input")),this.set("output_unit",this.get("output")),this.on("change:input_value change:input_unit change:output_unit",_.bind(this.convert,this))},getMainUnits:function(){return!1},getInputNumber:function(){return""===this.get("input_value")?0:parseFloat(this.get("input_value").replace(/,/g,"."))},convert:function(a,b,c){if(!c.noConvert){var d=this.getInputNumber(),e=this.get("input_unit").rate/this.get("output_unit").rate;this.set("output_value",e*d,{silent:!0}),this.trigger("change:output_value")}}});go.CurrencyConverterModel=a.extend({MAIN_CURRENCIES:["RUB","USD","EUR"],INPUT_REGEXP:/^\d*([\.\,]\d*)?$/,myViewName:function(){return go.CurrencyConverterView},initialize:function(){a.prototype.initialize.apply(this,arguments);for(var b=this.get("currency"),c=[],d=[],e=0;e<b.length;e++)this.MAIN_CURRENCIES.indexOf(b[e].code)===-1?c.push(b[e]):d.push(b[e]);var f=function(a,b){return a=a.firstname.toLowerCase(),b=b.firstname.toLowerCase(),a<b?-1:a>b?1:0};c.sort(f),d.sort(f),this.set("units",c),this.set("main_units",d)},getUnits:function(){return this.get("units")},getMainUnits:function(){return this.get("main_units")},validate:function(a){if(""!==a.input_value&&!this.INPUT_REGEXP.test(a.input_value))return"invalid input"}}),go.MeasureConverterModel=a.extend({INPUT_REGEXP:/^\d*([\.\,]\d*)?$/,TEMP_INPUT_REGEXP:/^[-]?\d*([\.\,]\d*)?$/,myViewName:function(){return go.MeasureConverterView},initialize:function(){a.prototype.initialize.apply(this,arguments);for(var b=this.get("measures"),c={},d={},e=0;e<b.length;e++)d[b[e].type]=b[e].units,c[b[e].type]=b[e].type_ru;this.set("types",c),this.set("units",d),this.on("change:measure_type",_.bind(function(){this.isValid()&&""!==this.get("input_value")||this.set("input_value","1",{noConvert:!0});for(var a=this.getUnits(),b=0;b<a.length;b++)if(1===a[b].rate){this.set("input_unit",a[b],{noConvert:!0}),this.set("output_unit",a[b+1]);break}},this))},getUnits:function(){return this.get("units")[this.get("measure_type")]},getMeasureTypeName:function(){return this.get("types")[this.get("measure_type")]},validate:function(a){var b;if(b="temp"===a.measure_type?""===a.input_value||this.TEMP_INPUT_REGEXP.test(a.input_value):""===a.input_value||this.INPUT_REGEXP.test(a.input_value),!b)return"invalid input"},convert:function(b,c,d){"temp"===this.get("measure_type")?d.noConvert||this.convertTemperature():a.prototype.convert.apply(this,arguments)},convertTemperature:function(){var a=this.getInputNumber();switch(this.get("input_unit").code){case"1":switch(this.get("output_unit").code){case"1":this.set("output_value",a);break;case"2":this.set("output_value",a+273.15);break;case"3":this.set("output_value",9*a/5+32)}break;case"2":switch(this.get("output_unit").code){case"1":this.set("output_value",a-273.15);break;case"2":this.set("output_value",a);break;case"3":this.set("output_value",9*(a-273.15)/5+32)}break;case"3":switch(this.get("output_unit").code){case"1":this.set("output_value",5*(a-32)/9);break;case"2":this.set("output_value",5*(a-32)/9+273.15);break;case"3":this.set("output_value",a)}}}})}();var go=go||{};!function(){"use strict";go.DrugsModel=Backbone.Model.extend({myViewName:function(){return go.DrugsView}})}();var go=go||{};!function(){"use strict";go.FactsModel=Backbone.Model.extend({myViewName:function(){return go.FactsView}})}();var go=go||{};!function(){"use strict";go.GamesModel=Backbone.Model.extend({PREVIEW_WIDTH:120,myViewName:function(){return go.GamesView},initialize:function(){var a=this.attributes;a.preview&&a.preview.local_url&&(a.preview.local_url=go.utils.urlFor(a.preview.local_url,{w:this.PREVIEW_WIDTH}))}})}();var go=go||{};!function(){"use strict";go.HealthConsultationsModel=Backbone.Model.extend({myViewName:function(){return go.HealthConsultationsView},initialize:function(){var a=this.get("results")||[],b=_.head(a);b&&this.set("first_item",{title:b.title,url:b.question_url,question:b.question,answer:b.answer})}})}();var go=go||{};!function(){"use strict";go.HowtosModel=Backbone.Model.extend({MAX_TEXT_LENGTH:750,MAX_ITEMS:4,myViewName:function(){return go.HowtosView},initialize:function(){var a,b=[],c=[],d=0;if(this.has("answer"))for(a=0;a<this.get("answer").length&&a<this.MAX_ITEMS;a++){if(d+this.get("answer")[a].length>this.MAX_TEXT_LENGTH){b.push(go.utils.htmltruncate(this.get("answer")[a],this.MAX_TEXT_LENGTH-d,!0,"..."));break}b.push(this.get("answer")[a]),d+=this.get("answer")[a].length}if(this.set("answer",b),d=0,this.has("answer_text"))for(a=0;a<this.get("answer_text").length&&a<this.MAX_ITEMS;a++){if(d+this.get("answer_text")[a].length>this.MAX_TEXT_LENGTH){c.push(go.utils.htmltruncate(this.get("answer_text")[a],this.MAX_TEXT_LENGTH-d,!0,"..."));break}c.push(this.get("answer_text")[a]),d+=this.get("answer_text")[a].length}this.set("answer_text",c)}})}();var go=go||{};!function(){"use strict";go.ImagesModel=Backbone.Model.extend({myViewName:function(){return go.ImagesView},initialize:function(){var a,b,c,d=this.attributes,e={},f=1.2,g=.33,h=1,i=0,j=0,k=10;if(this.set("urlVertical",go.utils.urlFor("/search_images",{q:STP.qswap,frm:"web"})),d.results=d.results.slice(0,k),d.rich&&1==d.number){a=[1,.5,.5,.5,.5,.5,.5,.5],b=200,c=200;for(var l=0;l<d.results.length;l++)if(d.results[l].thumb.height>=c){if(0==l)break;var m=d.results[l];d.results.splice(l,1),d.results.unshift(m);break}}else a=[1,1,1,1,1,1,1,1],b=126,c=120;d.cssMaxHeight=c+"px";for(var n=0;n<d.results.length;n++){d.rich&&1==d.number?d.results[n].number=n+1:e=go.utils.calcSizes(d.results[n].thumb.width,d.results[n].thumb.height,c,"h"),h=a[n]||h;var o=e.w||d.results[n].thumb.width,p=e.h||d.results[n].thumb.height,q=4*(1/h-1),r=h<1?h*f:1,s=Math.round(h*(c-q)),t=Math.round(s/p*o),u=Math.round(o*r),v=b*h,w=u>t?u:t,x=t>v?v:t;w>v&&h<1&&(w=Math.max(v,t/s*c*h));var y=Math.round(s*(w/t)),z=Math.round(s-y),A=Math.round(x-w);w=Math.round(w),d.results[n].cssWidthImg=w,d.results[n].cssMarginTopImg=Math.round(z*g),d.results[n].cssMarginLeftImg=Math.round(A/2),d.results[n].cssWidthLink=w+A,d.results[n].cssHeightLink=y+z,d.results[n].thumb.url=d.results[n].thumb.url+"&q=90&w="+(w>100?w:100)*(1==STP.hidpi?2:1),d.results[n].urlVerticalHash=this.get("urlVertical")+"#urlhash="+d.results[n].urlhash,d.rich&&1==d.number&&0!=n&&(n%2!=0&&(j=0,i=0),n%2==0&&d.results[n].cssWidthLink>i&&(d.results[n].cssWidthLink>j&&(d.results[n-1].cssWidthImg=j=d.results[n].cssWidthLink),d.results[n-1].cssWidthLink=d.results[n].cssWidthLink,d.results[n-1].cssMarginLeftImg=(d.results[n].cssWidthLink-j)/2),n%2==0&&d.results[n].cssWidthLink<i&&(d.results[n].cssWidthLink=i),n%2!=0&&(j=w,i=d.results[n].cssWidthLink))}}})}();var go=go||{};!function(){"use strict";go.InfocardFactModel=Backbone.Model.extend({myViewName:function(){return go.InfocardFactView},initialize:function(){var a=this.attributes,b=170,c={};a.parent_query&&(a.parent_query_url=go.utils.urlFor("/search",{q:a.parent_query,infcmix:a.infcmix,nosp:1})),a.fact&&a.fact.query&&(a.fact.query_url=go.utils.urlFor("/search",{q:a.fact.query,infcmix:a.fact.infcmix,nosp:1})),a.fact.title.length>190&&(a.fact.title_hide=!0),a.image&&(a.fact.image=a.image),a.fact.image&&(c=go.utils.calcSizes(a.fact.image.width,a.fact.image.height,b,"m"),a.fact.image.width=c.w,a.fact.image.bgHeight=c.h)}})}();var go=go||{};!function(){"use strict";go.MapModel=Backbone.Model.extend({myViewName:function(){return go.MapView},initialize:function(){if(this.has("results")&&this.get("results").length){var a=this.get("results")[0];this.set("description",a.description),"Organization"===this.get("map_type")?(this.set("city",a.city),parseInt(this.get("total"))<=50&&this.set("items",this.get("results").slice(0,6))):"Address"===this.get("map_type")&&(this.set("title",this.get("results")[0].title),this.set("hl_title",this.get("results")[0].hl_title))}}}),go.MapModelOrganizationsUpdate=Backbone.Model.extend({parse:function(a,b){if(200==parseInt(a.meta.code)){var c=this,d={},e=17,f=[],g=20,h=a.result.items,i=function(a){if(a){var b=new URI("//stat.api.2gis.ru/").setSearch({action:"reg_impression",v:"2.0",hash:a});$.ajax(b.toString())}};if(h){var j=h.length;return j>g&&h.splice(g,j),_.each(h,function(a,b){var d=new URI("https://2gis.ru/"),g="center/"+a.point.lon+","+a.point.lat+"/zoom/"+e,h=a.id.split("_")[0],i="";d.pathname("/city/"+a.region_id+"/search/"+c.get("what")+"/firm/"+h+"/tabs/firms"),d.query({queryState:g}),a.adm_div.length&&a.adm_div.forEach(function(a){"city"==a.type&&(i=a.name)}),f.push({address:a.address_name,city:i,hash:a.id.split("_")[1],hl_address:a.address_name,hl_title:a.name,id:h,latitude:a.point.lat,longitude:a.point.lon,number:b+1,title:a.name,url:d.toString(),zoom:e})}),d.response_code=a.meta.code,d.results=f,i(_.head(f).hash),d}}}})}();var go=go||{};!function(){"use strict";go.MarketModel=Backbone.Model.extend({myViewName:function(){return go.MarketView}})}();var go=go||{};!function(){"use strict";go.MarketModelModel=Backbone.Model.extend({myViewName:function(){return go.MarketModelView}})}();var go=go||{};!function(){"use strict";go.MusicModel=Backbone.Model.extend({myViewName:function(){return go.MusicView},initialize:function(){var a=this.attributes;if(a.isSmallPlaylist=!1,a.dataPlayList={},a.proto_tracklist.length<=5&&(a.isSmallPlaylist=!0),"track"==a.subtype)a.dataPlayList[0]={},a.dataPlayList[0].duration=go.utils.duration(a.active_track.duration),a.dataPlayList[0].durationms=a.active_track.duration,a.dataPlayList[0].mp3=a.active_track.mp3_url,a.dataPlayList[0].title=a.active_track.name,a.dataPlayList[0].artist=a.active_track.author,a.dataPlayList[0].number=a.number,a.dataPlayList[0].sub_number=1,a.currentItem=0;else for(var b=0;b<a.proto_tracklist.length;b++)a.dataPlayList[b]={},a.dataPlayList[b].duration=go.utils.duration(a.proto_tracklist[b].duration),a.dataPlayList[b].durationms=a.proto_tracklist[b].duration,a.dataPlayList[b].mp3=a.proto_tracklist[b].mp3_url,a.dataPlayList[b].title=a.proto_tracklist[b].name,a.dataPlayList[b].artist=a.proto_tracklist[b].author,a.dataPlayList[b].number=a.number,a.dataPlayList[b].sub_number=b+1,a.proto_tracklist[b].active&&(a.currentItem=b)}})}();var go=go||{};!function(){"use strict";go.NewsModel=Backbone.Model.extend({myViewName:function(){return go.NewsView}})}();var go=go||{};!function(){"use strict";go.NewsTextModel=Backbone.Model.extend({myViewName:function(){return go.NewsTextView}})}();var go=go||{};!function(){"use strict";go.OsminoModel=Backbone.Model.extend({myViewName:function(){return go.OsminoView},initialize:function(){var a=[];switch(this.has("android")&&(this.get("android").vending_url&&(a.push({url:this.get("android").vending_url,pxt:"android_play-url",name:"Google Play"}),this.set("title_pxt","android_play-title")),this.get("android").osmino_url&&(a.push({url:this.get("android").osmino_url,pxt:"android_osmino-url",name:"Osmino Store"}),this.set("title_pxt","android_osmino-title"))),this.has("ios")&&(a.push({url:this.get("ios").url,pxt:"ios-url",name:"App Store"}),this.has("title_pxt")||this.set("title_pxt","ios-title")),a.length&&(this.set("app_urls",a),this.has("url")||this.set("url",a[0].url)),this.get("text_type")){case"film":this.set("headline","фильм на мобильном бесплатно");break;case"recipe":this.set("headline","рецепт на мобильном бесплатно");break;case"handbook":this.set("headline","узнать в мобильном приложении");break;case"book":this.set("headline","читать на мобильном бесплатно");break;case"music":this.set("headline","слушать на мобильном бесплатно");break;case"news":this.set("headline","новости на мобильном бесплатно");break;default:this.set("headline","мобильное приложение")}}})}();var go=go||{};!function(){"use strict";go.PersonModel=Backbone.Model.extend({IMG_MAX_SIZE:72,myViewName:function(){return go.PersonView},initialize:function(){var a=this.get("results");this.set("collapsed",a.length>4),this.set("row_number",Math.ceil(a.length/2)),this.set("soc_icons",["ok","my","vk","mk","fb","tw"]);for(var b,c=0;c<a.length;c++)a[c].avatar&&(b=go.utils.calcSizes(a[c].avatar.width,a[c].avatar.height,this.IMG_MAX_SIZE,"l"),a[c].avatar.left=-Math.floor((b.w-this.IMG_MAX_SIZE)/2),a[c].avatar.src=go.utils.urlFor(a[c].avatar.local_url,b)),a[c].info1=[],a[c].location&&a[c].info1.push(a[c].location),a[c].age&&a[c].info1.push(a[c].age+go.utils.plural(a[c].age," год"," года"," лет")),a[c].info2=[],a[c].edu&&a[c].info2.push(a[c].edu[0].name),a[c].work&&a[c].info2.push(a[c].work[0].name)}})}();var go=go||{};!function(){"use strict";go.RecipesModel=Backbone.Model.extend({IMG_MAX_SIZE:120,myViewName:function(){return go.RecipesView},initialize:function(){var a=this.get("results");this.set("collapsed",a.length>3);for(var b=0;b<a.length;b++){var c=a[b];c.image_url&&(c.size=go.utils.calcSizes(c.image_width,c.image_height,this.IMG_MAX_SIZE),c.src=go.utils.urlFor(c.image_url,c.size))}}})}();var go=go||{};!function(){"use strict";go.SportModel=Backbone.Model.extend({myViewName:function(){return go.SportView}})}();var go=go||{};!function(){"use strict";go.SpritzeModel=Backbone.Model.extend({IMG_WIDTH:120,NO_IMG_TYPES:["spritze.auto-vendor","spritze.lady-fashion","spritze.lady-treatment"],myViewName:function(){return go.SpritzeView},initialize:function(){var a=this.get("smack_type"),b="",c="",d=[];switch(a){case"spritze.horoscope-common":case"spritze.horoscope-sign":case"spritze.horoscope-cmn":c="&nbsp;&mdash; Гороскопы&nbsp;Mail.Ru","spritze.horoscope-common"===a&&(b="<b>Гороскоп</b> ");break;case"spritze.dream-book":case"spritze.dream-term":c="&nbsp;&mdash; Сонник&nbsp;Mail.Ru";break;case"spritze.cocktail":c="&nbsp;&mdash; Рецепты&nbsp;Mail.Ru";break;case"spritze.celebrities":c="&nbsp;&mdash; Афиша&nbsp;Mail.Ru";break;case"spritze.auto-model-geo":case"spritze.auto-model-common":case"spritze.auto-reviews":d=_.head(this.get("extra")&&this.get("extra").review_list),d&&(this.set("rating",{stars:d.stars/10,max:5}),this.set("reviews_text",d.text),this.set("reviews_about",[d.title,d.user,d.added].join(", "))),b="Отзывы о ",c=" Cars&nbsp;Mail.Ru",this.set("spritze_prefix_title",b+this.get("title")+"&nbsp;&mdash;"),this.set("spritze_suffix",c);break;case"spritze.auto-vendor":c="&nbsp;&mdash; Cars&nbsp;Mail.Ru";break;case"spritze.deseasescmn":case"spritze.deseasesmsk":case"spritze.symptoms":c="&nbsp;&mdash; Здоровье&nbsp;Mail.Ru";break;case"spritze.lady-treatment":c="&nbsp;&mdash; Красота&nbsp;Mail.Ru";break;case"spritze.lady-fashion":c="&nbsp;&mdash; Мода&nbsp;Mail.Ru";break;case"spritze.realty-base":c="&nbsp;&mdash; Недвижимость&nbsp;Mail.Ru";break;case"spritze.tv-programm":b="Телеканал &laquo;",c="&raquo;&nbsp;&mdash; Телепрограмма&nbsp;Mail.Ru";break;case"spritze.job-employer":b="Компания &laquo;",c="&raquo;&nbsp;&mdash; Работа&nbsp;Mail.Ru";break;case"spritze.job-career":var e,f=this.get("extra");e=f&&f.count_all?"&nbsp;("+f.count_all+"&nbsp;"+go.utils.plural(f.count_all,"предложение","предложения","предложений")+")":"",c=e+"&nbsp;&mdash; Работа&nbsp;Mail.Ru";break;case"spritze.metro":var f=this.get("extra");f&&f.reg_name&&(c="&nbsp;"+f.reg_name);break;case"spritze.names":b="Значение имени ",c="&nbsp;&mdash; Имена&nbsp;Mail.Ru"}this.set("spritze_title",b+this.get("title")+c),this.set("spritze_url","href="+this.get("url")+" target=_blank");var g=this.get("preview");if(this.set("is_spritze_img",g&&g.width>0&&this.NO_IMG_TYPES.indexOf(a)===-1),this.get("is_spritze_img")){var h=Math.min(g.width,this.IMG_WIDTH);g.local_url?this.set("spritze_img",'<img src="'+g.local_url+"&w="+h+'">'):this.set("spritze_img",""),this.get("spritze_img")&&h&&!this.get("spritze_padding")&&this.set("spritze_padding","style=margin-left:"+(h+15)+"px;")}}})}();var go=go||{};!function(){"use strict";go.TodayModel=Backbone.Model.extend({INTERVAL:1e3,myViewName:function(){return go.TodayView},initialize:function(){this.on("change:timestamp",_.bind(this.setToday,this)),this.set("timestamp",new Date(this.get("date")).getTime()),this.timer=setInterval(_.bind(this.incrTimestamp,this),this.INTERVAL),this.on("remove",_.bind(this.clearTimer,this))},clearTimer:function(){clearInterval(this.timer)},incrTimestamp:function(){this.set("timestamp",this.get("timestamp")+this.INTERVAL)},setToday:function(){this.set("today",this.getTodayItem(new Date(this.get("timestamp")),this.get("today_type")))},getTodayItem:function(a,b){function c(a){return a<10?"0"+a:a}var d,e="Воскресенье Понедельник Вторник Среда Четверг Пятница Суббота Воскресенье",f="Январь Февраль Март Апрель Май Июнь Июль Август Сентябрь Октябрь Ноябрь Декабрь",g="января февраля марта апреля мая июня июля августа сентября октября ноября декабря";switch(b){case"dw":return[e.split(" ")[a.getDay()],this.getTodayItem(a,"m d")+" "+this.getTodayItem(a,"y")+" г."];case"d":case"m d":return a.getDate()+" "+this.getTodayItem(a,"mm");case"y":return a.getFullYear();case"m":return f.split(" ")[a.getMonth()];case"mm":return g.split(" ")[a.getMonth()];case"nm":return a.getMonth()+1+" месяц";case"t":var h=STP.geoNameLocative?"Точное время в "+STP.geoNameLocative:"";return[h,c(a.getHours())+":"+c(a.getMinutes())+":"+c(a.getSeconds())];case"c":return Math.ceil(a.getFullYear()/100)+" век";case"d t":return this.getTodayItem(a,"d")+", "+this.getTodayItem(a,"t");case"d dw":return this.getTodayItem(a,"d")+", "+this.getTodayItem(a,"dw");case"d m y":return this.getTodayItem(a,"m d")+" "+this.getTodayItem(a,"y");case"dyn":return d=new Date(a.getFullYear(),0,1),Math.floor((a-d)/864e5)+1;case"wyn":d=new Date(a.getFullYear(),0,1);var i=d.getDay();return i=0===i?7:i,Math.ceil((this.getTodayItem(a,"dyn")-(8-i))/7)+1;case"dy":return this.getTodayItem(a,"dyn")+" день года";case"wy":return this.getTodayItem(a,"wyn")+" неделя года"}return""}})}();var go=go||{};!function(){"use strict";go.VideoModel=Backbone.Model.extend({myViewName:function(){return go.VideoView},initialize:function(){var a=200,b=10;4==STP.user_split&&(a=180);var c=this.get("results"),d=c.length;d>b&&this.set("results",c.slice(0,b)),this.set("urlVert",go.utils.urlFor("/search_video",{q:STP.qswap,frm:"ws_t"}));for(var e=0;e<c.length;e++){var f=c[e];f.player?f.video_url=go.utils.urlFor("/search_video",{q:STP.qswap,frm:"ws_p",d:f.id,sig:f.sig,s:f.source_name},["nosp"]):f.video_url=f.url,f.preview&&("local_url"in f.preview?f.preview.img_url=go.utils.urlFor(f.preview.local_url,{w:a}):f.preview.img_url=f.preview.url)}}})}();var go=go||{};!function(){"use strict";go.VideoPlayerModel=Backbone.Model.extend({myViewName:function(){return go.VideoPlayerView},defaults:{isShow:!0},initialize:function(){var a=305,b=625,c=200,d=this.get("video");this.set({item:d});var e=d.preview;e.width<280?this.model.set({isShow:!1}):(e.top=Math.round((b*e.height/e.width-a)/2),e.top=e.top<0?0:e.top),d.player?d.video_url=go.utils.urlFor("/search_video",{q:STP.qswap,frm:"ws_p",d:d.id,sig:d.sig,s:d.source_name},["nosp"]):d.video_url=d.url,d.preview&&("local_url"in d.preview?(d.preview.img_url=go.utils.urlFor(d.preview.local_url,{w:c}),d.preview.img_url_big=go.utils.urlFor(d.preview.local_url,{w:b})):(d.preview.img_url=d.preview.url,d.preview.img_url_big=d.preview.url))}})}();var go=go||{};!function(){"use strict";go.WeatherModel=Backbone.Model.extend({myViewName:function(){return go.WeatherView}})}();var go=go||{};!function(){"use strict";go.AutoModel=go.SpritzeModel.extend({myViewName:function(){return go.AutoView}})}();var go=go||{};!function(){"use strict";go.AutoReviewsModel=go.SpritzeModel.extend({myViewName:function(){return go.AutoReviewsView}})}();var go=go||{};!function(){"use strict";go.DeseasesModel=go.SpritzeModel.extend({MAX_TEXT_LENGTH:750,MAX_ITEMS:4,myViewName:function(){return go.DeseasesView},initialize:function(){go.SpritzeModel.prototype.initialize.apply(this,arguments);var a,b=this.attributes,c=[],d=0;if(b.extra.symptoms_list||b.extra.causes_list){var e=b.extra.symptoms_list||b.extra.causes_list;for(a=0;a<e.length&&a<this.MAX_ITEMS;a++){if(d+e[a].title.length>this.MAX_TEXT_LENGTH){c.push(go.utils.htmltruncate(e[a].title,this.MAX_TEXT_LENGTH-d,!0,"..."));break}c.push(e[a].title),d+=e[a].title.length}}this.set("answerList",c)}})}();var go=go||{};!function(){"use strict";go.EmergencyModel=go.SpritzeModel.extend({myViewName:function(){return go.EmergencyView}})}();var go=go||{};!function(){"use strict";var a="[ABCEHKMOPTXYabcehkmoptxyАВЕКМНОРСТХУавекмнорстху]",b="[0-9]",c=[new RegExp("^"+b),new RegExp("^"+a)],d=[new RegExp("^"+b+"{10}$"),new RegExp("^"+b+"{2}"+a+"{2}"+b+"{6}$"),new RegExp("^"+b+"{2}"+a+"{1}"+b+"{7}$"),new RegExp("^"+b+"{3}"+a+"{1}"+b+"{6}$")],e=[new RegExp("^"+a+b+"{3}"+a+"{2}"+b+"{2,3}$"),new RegExp("^"+a+"{2}"+b+"{3}"+b+"{2,3}$"),new RegExp("^"+a+"{2}"+b+"{4}"+b+"{2,3}$"),new RegExp("^"+b+"{3}"+a+"{2}"+b+"{2,3}$"),new RegExp("^"+a+"{2}"+b+"{3}"+a+b+"{2,3}$"),new RegExp("^"+a+b+"{4}"+a+b+"{2,3}$"),new RegExp("^"+b+"{3}"+a+b+"{2,3}$"),new RegExp("^"+b+"{4}"+a+b+"{2,3}$"),new RegExp("^"+b+"{4}"+a+"{2}"+b+"{2,3}$")];go.GibddModel=go.SpritzeModel.extend({initialize:function(){go.SpritzeModel.prototype.initialize.apply(this,arguments),this.set("gibddSts",""),this.set("gibddStsMaxLength",10),this.set("isValidSts",!0),this.set("gibddNumber",""),this.set("gibddNumberMaxLength",9),this.set("isValidNumber",!0)},myViewName:function(){return go.GibddView},inputFilter:function(a){return a.split("").map(function(a){var b=c.some(function(b){return b.test(a)});return b?a:""}).join("")},validate:function(){var a=this.validateSts();!this.get("isValidSts")&&a&&this.trigger("change:sts",!0),this.set("isValidSts",a);var b=this.validateNumber();!this.get("isValidNumber")&&b&&this.trigger("change:number",!0),this.set("isValidNumber",b),this.trigger("change:btn",a&&b)},validateSts:function(){var a=this.get("gibddSts");if(!(a.length<1))return d.some(function(b){return b.test(a)})},validateNumber:function(){var a=this.get("gibddNumber");if(!(a.length<1))return e.some(function(b){return b.test(a)})}})}();var go=go||{};!function(){"use strict";go.LangModel=go.SpritzeModel.extend({myViewName:function(){return go.LangView}})}();var go=go||{};!function(){"use strict";go.LivechatModel=go.SpritzeModel.extend({myViewName:function(){return go.LivechatView},initialize:function(){for(var a=1,b=1,c=[{title:"Купить квартиру",type:"kv"},{title:"Купить квартиру в новостройке",type:"kv_new"},{title:"Купить квартиру в ипотеку",type:"kv_ipot"}];b<=c.length;)a*=b,b++;var d=this.permutation(c),e=STP.user_split%a;this.set("results",d[e]),window.WebAgent&&"API"in window.WebAgent?this.set("ready",!0):this.set("ready",!1)},permutation:function(a){if(a.length>1){for(var b=a[0],c=this.permutation(a.slice(1)),d=[],e=c[0].length,f=0;f<c.length;f++)for(var g=0;g<=e;g++)d.push(c[f].slice(0,g).concat(b,c[f].slice(g)));return d}return[a]}})}();var go=go||{};!function(){"use strict";go.MetroModel=go.SpritzeModel.extend({myViewName:function(){return go.MetroView}})}();var go=go||{};!function(){"use strict";go.RecipeModel=go.SpritzeModel.extend({myViewName:function(){return go.RecipeView}})}();var go=go||{};!function(){"use strict";go.SymptomsModel=go.SpritzeModel.extend({myViewName:function(){return go.SymptomsView},initialize:function(){go.SpritzeModel.prototype.initialize.apply(this,arguments);var a=this.get("extra");a&&a.first_question_choices.length>0&&this.set("questions_choices",!0)}})}();var go=go||{};!function(){"use strict";go.TvProgrammModel=go.SpritzeModel.extend({myViewName:function(){return go.TvProgrammView}})}();var go=go||{};!function(){"use strict";go.AdvSearch=Backbone.View.extend({tagName:"div",template:"blocks/adv_search.tmpl",events:{"click #AdvSearchSubmit":"submit","click #AdvSearchReset":"reset","click .js-adv-search__geo-item":"changeGeoType","click .js-adv-search__filter-item":"changeFileType","keydown #AdvSearchSite":"submitKey"},init:function(){var a=this;a.fields={},a.elems={},a.elems.activeClass="adv-search__link_active",a.elems.defGeoClass="js-adv-search__geo-item_def",a.elems.q=$("#q"),a.elems.$window=$(window),a.elems.$button=$(".js-button"),a.elems.$advSearch=a.$el.find(".adv-search"),a.elems.$inputs=a.$el.find(".js-adv-search__input"),a.elems.$geoFilter=a.$el.find("#AdvSearchGeo"),a.elems.$fileFilter=a.$el.find("#AdvSearchFile"),a.elems.$siteInput=a.$el.find("#AdvSearchSite"),a.elems.$suggestsLink=a.$el.find("#AdvSearchSuggests"),a.elems.$inputs.each(function(){a.fields[this.name]=this.value}),go.SuggestsSettings.start(a.elems.$suggestsLink),"sgsettings"in go.paramsCommon&&go.firstRender&&a.elems.$suggestsLink.trigger("click"),a.elems.$window.on("mouseup",function(b){a.elems.$advSearch.is(":hidden")||a.elems.$button.is(b.target)||a.elems.$button.has(b.target).length>0||a.elems.$advSearch.is(b.target)||0!==a.elems.$advSearch.has(b.target).length||a.toggle()})},changeGeoType:function(a){a.preventDefault();var b=$(a.currentTarget);b.hasClass(this.elems.activeClass)?(b.removeClass(this.elems.activeClass),this.fields.ge=""):(this.elems.$geoFilter.find("."+this.elems.activeClass).removeClass(this.elems.activeClass),b.addClass(this.elems.activeClass),this.fields.ge=b.attr("data-value"))},changeFileType:function(a){a.preventDefault();var b=$(a.currentTarget);b.hasClass(this.elems.activeClass)?(b.removeClass(this.elems.activeClass),this.fields.file=""):(this.elems.$fileFilter.find("."+this.elems.activeClass).removeClass(this.elems.activeClass),b.addClass(this.elems.activeClass),this.fields.file=b.attr("data-value"))},submit:function(a){if(a.preventDefault(),this.elems.$siteInput.val().length){var b=this.elems.$siteInput.val().trim();/^(?:(http|https|ftp):\/\/)?(?:www\.)?([^\/]+)(.*?)$/i.exec(b)&&RegExp.$2&&(b=RegExp.$2),this.elems.$siteInput.val(b)}this.fields.site=this.elems.$siteInput.val();var c=go.utils.urlFor(STP.location,$.extend({},this.fields,{q:this.elems.q.val(),sbmt:Date.now()}),["advs","ge","file","site"],!0);Backbone.history.navigate(c,{trigger:!0})},submitKey:function(a){13==a.keyCode&&this.submit(a)},reset:function(){this.elems.$geoFilter.find("."+this.elems.activeClass).removeClass(this.elems.activeClass),this.elems.$geoFilter.find("."+this.elems.defGeoClass).addClass(this.elems.activeClass),this.fields.ge="",this.elems.$fileFilter.find("."+this.elems.activeClass).removeClass(this.elems.activeClass),this.fields.file="",this.elems.$siteInput.val("")},toggle:function(){this.elems.$advSearch.is(":visible")?("advs"in go.paramsCommon&&delete go.paramsCommon.advs,"file"in go.paramsCommon&&delete go.paramsCommon.file,"site"in go.paramsCommon&&delete go.paramsCommon.site,this.elems.$advSearch.hide()):(this.elems.$inputs.each(function(){$(this).removeAttr("disabled")}),$.extend(go.paramsCommon,this.fields),this.elems.$advSearch.show())},render:function(){return this.$el.html(swig.renderFile(this.template,this.model)),this}})}();var go=go||{};!function(){"use strict";go.CarouselView=Backbone.View.extend({tagName:"div",className:"carousels",template:"blocks/carousel.tmpl",events:{"click .js-carousels__title-link":"clickTitle","click .js-carousel-link":"clickItem","click .js-carousel-left":"clickLeft","click .js-carousel-right":"clickRight",resize:"onResize"},elems:function(){this.$leftArrow=this.$el.find(".js-carousel-left"),
this.$rightArrow=this.$el.find(".js-carousel-right"),this.$items=this.$el.find(".js-carousel-link"),this.$item=this.$items.eq(0),this.selectClass="carousel__link_select",this.$itemSelect=this.$el.find("."+this.selectClass),this.$scroll=this.$el.find(".js-carousel-scroll")},render:function(){return this.$el.html(swig.renderFile(this.template,this.model.toJSON())),this.elems(),setTimeout(_.bind(function(){STP.carouselLeft=STP.carouselLeft?STP.carouselLeft:0;var a=this.$itemSelect.length?this.$itemSelect.offset().left:0,b=this.$scroll.width();a+3*this.$item.width()>b&&0===STP.carouselLeft&&this.$scroll.scrollLeft(a-parseInt($(".carousel__item").css("marginLeft"))),this.$scroll[0].scrollWidth>b&&this.$rightArrow.addClass("m_active")},this),0),this.$scroll.on("scroll",_.bind(this.scrollCarousel,this)),this.$el.find(".carousel__img[data-src]").each(function(){var a=$(this),b=new Image;b.onload=function(){a.is("img")?a.attr("src",b.src):a.css("background-image","url("+b.src+")")},b.onerror=function(){a.addClass("crsl-stub_common")},b.src=a.attr("data-src")}),this.initCardView(),this},onResize:function(){this.initCardView(),this.isCardView||this.scrollCarousel()},initCardView:function(){var a=$(window).width(),b=this.model.get("items").length;this.isCardView=a<=1366&&b<4||a>1366&&b<5,this.$el.find(".js-carousel").toggleClass("carousel_card-view",this.isCardView)},scrollCarousel:function(){if(this.$scroll){var a=this.$scroll.width(),b=this.$scroll.scrollLeft(),c=this.$scroll[0].scrollWidth;this.$leftArrow.toggle(0!==b),this.$rightArrow.toggle(a<c),this.$rightArrow.toggleClass("m_active",!go.utils.approxeq(c-a,b,1)),STP.carouselLeft=b}},selectItem:function(){for(var a={},b="carousel__link_select",c=$("."+b),d=c.data("id"),e=0;e<this.model.get("items").length;e++)if(this.model.get("items")[e].is_active){a=this.model.get("items")[e];break}d!==a.id&&($(".js-carousel-link").removeClass(b),$("[data-id = "+a.id+"]").addClass(b),$(".js-carousel-scroll").scrollLeft((c.width()+parseInt(c.parent().css("marginRight")))*a.id))},clickItem:function(a){a.preventDefault();var b=$(a.currentTarget),c=this.model.get("items")[b.data("id")];this.$items.removeClass(this.selectClass),b.addClass(this.selectClass),go.paramsCommon=c.cUrlObj,Backbone.history.navigate(c.cUrl,{trigger:!0})},clickLeft:function(){var a=120*Math.round((this.$scroll.scrollLeft()-600)/120)+40;a<240&&(a=0),this.$scroll.stop().animate({scrollLeft:a},250,"swing")},clickRight:function(){if(this.$rightArrow.hasClass("m_active")){pxt("carousel",null,"arr");var a=120*Math.round((this.$scroll.scrollLeft()+600)/120)+40;this.$scroll.stop().animate({scrollLeft:a},250,"swing")}},clickTitle:function(a){a.preventDefault(),go.paramsCommon=this.model.get("tUrlObj"),Backbone.history.navigate(this.model.get("tUrl"),{trigger:!0})}})}();var go=go||{};!function(){"use strict";go.AdBottomView=Backbone.View.extend({tagName:"div",className:"a260219d",template:"blocks/dir_bottom.tmpl",events:{"click .js-ad-label":"pxtLabel","mousedown .a260219d_tobm .a260219d__app-icon":"pxtIcon","mousedown .a260219d_tobm .a260219d__ficon":"pxtFavicon","mousedown .a260219d_tobm .a260219d__ltl-lkl":"pxtTitle","mousedown .a260219d_tobm .a260219d__rlu":"pxtUrl","mousedown .a260219d_tobm .a260219d__sitelinks-link":"pxtSitelinks","mousedown .a260219d_tobm .a260219d__app-action":"pxtAction"},initialize:function(){pxt("ya_d_show_direct",this.model.get("bottom").length,this.marketRatingAds())},pxtLabel:function(a){var b=$(a.currentTarget);pxt("ya_d","direct","label"),b.attr("href","http://sales.mail.ru/ru/russia/search/latest/"),setTimeout(function(){b.attr("href","")},10)},pxtIcon:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","direct","icon",this.model.get("bottom")[b-1].domain,b,this.hasHighMarketRating(b-1))},pxtFavicon:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","direct","favicon",this.model.get("bottom")[b-1].domain,b,this.hasHighMarketRating(b-1))},pxtTitle:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","direct","title",this.model.get("bottom")[b-1].domain,b,this.hasHighMarketRating(b-1))},pxtUrl:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","direct","domain",this.model.get("bottom")[b-1].domain,b,this.hasHighMarketRating(b-1))},pxtSitelinks:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","direct","sitelink",this.model.get("bottom")[b-1].domain,b,this.hasHighMarketRating(b-1))},pxtAction:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","direct","btn",this.model.get("bottom")[b-1].domain,b,this.hasHighMarketRating(b-1))},render:function(){var a=this.model.toJSON(),b=!window.STP.noAdblock;if(b&&a.bottom&&a.bottom.length>0){var c=a.bottom,d="&detected=1";c.forEach(function(a){a.redir_call_url&&(a.redir_call_url+=d),a.redir_path_url&&(a.redir_path_url+=d),a.redir_url&&(a.redir_url+=d),a.redir_vcard_url&&(a.redir_vcard_url+=d),a.sitelinks&&a.sitelinks.length>0&&a.sitelinks.forEach(function(a){a.redir_url&&(a.redir_url+=d)})})}return this.$el.html(swig.renderFile(this.template,a)),this},hasHighMarketRating:function(a){return"undefined"!=typeof this.model.get("bottom")[a].market_rating&&this.model.get("bottom")[a].market_rating>=4?1:0},marketRatingAds:function(){var a=[];return this.model.get("bottom").forEach(function(b,c){this.hasHighMarketRating(c)&&a.push(c+1)}.bind(this)),a.join(",")}})}();var go=go||{};!function(){"use strict";go.AdSideView=Backbone.View.extend({tagName:"div",className:"a260219d_right-tt",template:"blocks/dir_side.tmpl",events:{"click .a260219d_right .a260219d__link":"pxtRight","mousedown .a260219d_right .a260219d__app-icon":"pxtIcon","mousedown .a260219d_right .a260219d__ltl-lkl":"pxtTitle","mousedown .a260219d_right .a260219d__rlu":"pxtUrl","mousedown .a260219d_right .a260219d__sitelinks-link":"pxtSitelinks","mousedown .a260219d_right .a260219d__app-action":"pxtAction"},initialize:function(){pxt("ya_d_show_direct_right",this.model.get("side").length)},pxtRight:function(a){var b=$(a.currentTarget);pxt("ya_d","direct_right","head"),b.attr("href","http://sales.mail.ru/ru/russia/search/latest/"),setTimeout(function(){b.attr("href","")},10)},pxtIcon:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","direct_right","icon",this.model.get("side")[b-1].domain,b)},pxtTitle:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","direct_right","title",this.model.get("side")[b-1].domain,b)},pxtUrl:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","direct_right","domain",this.model.get("side")[b-1].domain,b)},pxtSitelinks:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","direct_right","sitelink",this.model.get("side")[b-1].domain,b)},pxtAction:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","direct_right","btn",this.model.get("side")[b-1].domain,b)},render:function(){var a=this.model.toJSON(),b=!window.STP.noAdblock;if(b&&a.side&&a.side.length>0){var c=a.side,d="&detected=1";c.forEach(function(a){a.redir_call_url&&(a.redir_call_url+=d),a.redir_path_url&&(a.redir_path_url+=d),a.redir_url&&(a.redir_url+=d),a.redir_vcard_url&&(a.redir_vcard_url+=d),a.sitelinks&&a.sitelinks.length>0&&a.sitelinks.forEach(function(a){a.redir_url&&(a.redir_url+=d)})})}return this.$el.html(swig.renderFile(this.template,a)),this}})}();var go=go||{};!function(){"use strict";go.AdTopView=Backbone.View.extend({tagName:"div",className:"a260219d",template:"blocks/dir_top.tmpl",events:{"click .js-ad-label":"pxtLabel","mousedown .a260219d_ptpo .a260219d__app-icon":"pxtIcon","mousedown .a260219d_ptpo .a260219d__ficon":"pxtFavicon","mousedown .a260219d_ptpo .a260219d__ltl-lkl":"pxtTitle","mousedown .a260219d_ptpo .a260219d__rlu":"pxtUrl","mousedown .a260219d_ptpo .a260219d__sitelinks-link":"pxtSitelinks","mousedown .a260219d_ptpo .a260219d__app-action":"pxtAction"},initialize:function(){pxt("ya_d_show_premium",this.model.get("top").length,this.marketRatingAds())},pxtLabel:function(a){var b=$(a.currentTarget);pxt("ya_d","premium","label"),b.attr("href","http://sales.mail.ru/ru/russia/search/latest/"),setTimeout(function(){b.attr("href","")},10)},pxtIcon:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","premium","icon",this.model.get("top")[b-1].domain,b,this.hasHighMarketRating(b-1))},pxtFavicon:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","premium","favicon",this.model.get("top")[b-1].domain,b,this.hasHighMarketRating(b-1))},pxtTitle:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","premium","title",this.model.get("top")[b-1].domain,b,this.hasHighMarketRating(b-1))},pxtUrl:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","premium","domain",this.model.get("top")[b-1].domain,b,this.hasHighMarketRating(b-1))},pxtSitelinks:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","premium","sitelink",this.model.get("top")[b-1].domain,b,this.hasHighMarketRating(b-1))},pxtAction:function(a){var b=$(a.currentTarget).data("number");pxt("ya_d","premium","btn",this.model.get("top")[b-1].domain,b,this.hasHighMarketRating(b-1))},render:function(){var a=this.model.toJSON(),b=!window.STP.noAdblock;if(b&&a.top&&a.top.length>0){var c=a.top,d="&detected=1";c.forEach(function(a){a.redir_call_url&&(a.redir_call_url+=d),a.redir_path_url&&(a.redir_path_url+=d),a.redir_url&&(a.redir_url+=d),a.redir_vcard_url&&(a.redir_vcard_url+=d),a.sitelinks&&a.sitelinks.length>0&&a.sitelinks.forEach(function(a){a.redir_url&&(a.redir_url+=d)})})}return this.$el.html(swig.renderFile(this.template,a)),this},hasHighMarketRating:function(a){return"undefined"!=typeof this.model.get("top")[a].market_rating&&this.model.get("top")[a].market_rating>=4?1:0},marketRatingAds:function(){var a=[];return this.model.get("top").forEach(function(b,c){this.hasHighMarketRating(c)&&a.push(c+1)}.bind(this)),a.join(",")}})}();var go=go||{};!function(){"use strict";go.FooterView=Backbone.View.extend({tagName:"div",className:"footer__wrap",template:"blocks/footer.tmpl",render:function(){return this.$el.html(swig.renderFile(this.template,this.model)),this}})}();var go=go||{};!function(){"use strict";go.FooterWidgetView=Backbone.View.extend({tagName:"div",className:"footer-blocks",template:"blocks/footer_widget.tmpl",events:{"mousedown a":"handleDown"},handleDown:function(a){var b=$(a.currentTarget),c=b.data("redir");c&&b.attr("href",c)},render:function(){return this.$el.html(swig.renderFile(this.template,this.model.toJSON())),this}})}();var go=go||{};!function(){"use strict";go.LikemoreView=Backbone.View.extend({tagName:"div",className:"mywidget",template:"blocks/likemore.tmpl",events:{"mousedown .mywidget__block a":"clickItem"},initialize:function(){var a=new Image;a.src=this.model.get("pxt"),pxt("likemore_show",this.model.get("url"),go.utils.urlpretty(this.model.get("url"),{stripwww:!0,strippath:!0}))},render:function(){return this.$el.html(swig.renderFile(this.template,this.model.toJSON())),this},clickItem:function(a){for(var b=$(a.currentTarget),c=new Image,d=this.model.get("list")[b.data("number")-1].content.pxt,e=0;e<d.length;e++)"wclick"in d[e]&&(c.src=d[e].wclick)}})}();var go=go||{};!function(){"use strict";go.MapPopupView=Backbone.View.extend({tagName:"div",className:"js-map-popup",template:"blocks/map_popup.tmpl",variable:{ZOOM:15,MAP_ID:"map-popup-2gis",POPUP_SHOW:"-100%",POPUP_HIDE:"-9999px",EVENT_ENTER:"addressLink:enter",EVENT_LEAVE:"addressLink:leave"},initialize:function(a){function b(){return DG.map(f.variable.MAP_ID,{center:[55.752517,37.623349],zoom:f.variable.ZOOM,dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,geoclicker:!1,zoomControl:!1,fullscreenControl:!1})}var c,d,e,f=this,g=!1,h={},i=_.bind(this.openExternLink,f);f.listenTo(f.model,"change:address",f.renderAddress),Backbone.on(f.variable.EVENT_ENTER,function(a,j){function k(){var a=f.elem.$popup.height()||220;m.offset().top<a+100?f.elem.$popup.addClass("map-popup-reverse"):f.elem.$popup.removeClass("map-popup-reverse"),m.append(f.$el)}function l(){f.model.set("address",n),k(m),f.elem.$map.addClass("map-popup-2gis-hide"),f.elem.$loader.show(),f.elem.$message.hide(),e&&e.abort(),e=f.loadMapMarker(c,n,h)}var m=a.find(".js-result__address"),n=j.address,o=j.number;f.elem.$link.on("click",i),f.model.set("number",o),pxt("map_popup","map_open",o),f.$el.css("top",f.variable.POPUP_SHOW),d=go.utils.load2gisMap(),g?l():d.done(function(){DG.then(function(){g||(c=b()),g=!0,l()})}).fail(function(){f.$el.css("top",f.variable.POPUP_HIDE),Backbone.off(f.variable.EVENT_ENTER),Backbone.off(f.variable.EVENT_LEAVE)})}),Backbone.on(f.variable.EVENT_LEAVE,function(){f.elem.$link.off("click",i),f.$el.css("top",f.variable.POPUP_HIDE)})},onAfterRender:function(){this.elem={$map:this.$el.find("#"+this.variable.MAP_ID),$popup:this.$el.find(".map-popup"),$title:this.$el.find(".map-popup__title"),$link:this.$el.find(".map-popup__link"),$loader:this.$el.find(".map-popup__loader"),$message:this.$el.find(".map-popup__message")},this.elem.$message.hide(),this.elem.$loader.hide()},openExternLink:function(){pxt("map_popup","map_link",this.model.get("number"),this.model.get("link"),"extern")},render:function(){return this.$el.html(swig.renderFile(this.template,this.model.get("address"))),this.onAfterRender(),this},renderAddress:function(){this.elem.$title.text(this.model.get("address").address.replace(/<\/?.>/g,""))},renderPopupLink:function(a){this.elem.$link.attr("href",a)},loadMapMarker:function(a,b,c){function d(a){k.elem.$message.show(),k.elem.$loader.hide()}function e(a,b){if(!(null!==b&&"result"in b&&"items"in b.result))return d(),null;var c=b.result.items[0];if(null===c.geometry.selection)return d(),null;f=DG.Wkt.toPoints(c.geometry.selection),h=f[0],g=f[1];var e=new URI("https://2gis.ru/"),j="center/"+h+","+g+"/zoom/"+k.variable.ZOOM;e.pathname("/city/"+c.region_id+"/search/"+l),e.query({queryState:j}),k.model.set("link",e.toString()),k.renderPopupLink(e.toString()),i=DG.marker([g,h]),a.addLayer(i),a.panTo([g,h]),k.elem.$map.removeClass("map-popup-2gis-hide"),k.elem.$loader.hide()}var f,g,h,i,j,k=this,l=b.address.replace(/<\/?.>/g,""),m=escape(l),n=k.model.get("number");if(b.latitude&&b.longitude&&(j=b.longitude+","+b.latitude),void 0!==c[m])return void e(a,c[m]);var o={key:"ruiwwm3389",fields:"items.geometry.selection,items.region_id"};return j?o.point=j:o.q=l,DG.ajax({url:"//catalog.api.2gis.ru/2.0/geo/search",data:o,type:"GET",success:function(b){"undefined"!=typeof i&&a.removeLayer(i),b.result&&"items"in b.result?(c[m]=b,pxt("map_popup","map_success",n)):(c[m]=null,pxt("map_popup","map_error",n)),e(a,c[m])},error:function(a){"aborted"!==a&&d()}})}})}();var go=go||{};!function(){"use strict";go.MistypeView=Backbone.View.extend({tagName:"div",className:"mistype js-kb-mistype",template:"blocks/mistype.tmpl",events:{"click .js-mistype":"click1","click .js-mistype2":"click2"},click1:function(a){a.preventDefault(),go.paramsCommon=this.newParams,Backbone.history.navigate(this.model.url,{trigger:!0})},click2:function(a){a.preventDefault(),go.paramsCommon=this.newParams2,Backbone.history.navigate(this.model.url2,{trigger:!0})},render:function(){var a=["advs","file","site"];if("SPCH_AUTO"==this.model.message||"SPCH_SUGG_REQUERY"==this.model.message){if("SPCH_AUTO"==this.model.message)var b="auto";if("SPCH_SUGG_REQUERY"==this.model.message)var b="req";this.newParams=go.utils.urlForObj({q:this.model.orig,nosp:1,fr_spc:b},a)}else"SPCH_SUGG"==this.model.message?this.newParams=go.utils.urlForObj({q:this.model.value,fr_spc:"sugg"},a):"SPCH_MIX"==this.model.message&&(this.newParams=go.utils.urlForObj({q:this.model.value,fr_spc:"mix"},a),this.newParams2=go.utils.urlForObj({q:this.model.orig,nosp:1,fr_spc:"mix"},a),this.model.url2=go.utils.urlFor(STP.location,this.newParams2,a));return this.model.url=go.utils.urlFor(STP.location,this.newParams,a),this.$el.html(swig.renderFile(this.template,this.model)),this}})}();var go=go||{};!function(){"use strict";go.notFoundView=Backbone.View.extend({tagName:"div",className:"not-found",template:"blocks/not_found.tmpl",events:{"click #js-symbols-share span":"clickShare","click #js-symbols-list a":"clickSymbol"},initialize:function(){var a="☃|☄|☏|☠|☭|☢|☣|☯|☮|♡|";this.elems={},this.model.funSymbols=a.split(/\|/).slice(0,-1),this.model.funSmiles=[";)",";-)",":-)",":)"],this.model.isFunny=a.indexOf(STP.query)!==-1||this.model.funSmiles.indexOf(STP.query)!==-1},render:function(){return this.$el.html(swig.renderFile(this.template,this.model)),this.model.isFunny&&this.notFoundFuny(),this},notFoundFuny:function(){var a=this;this.elems.fun_block=this.$el.find("#js-fun-block"),this.elems.share=this.$el.find("#js-symbols-share"),document.title=STP.query+" - Поиск Mail.Ru",setTimeout(function(){a.elems.fun_block.addClass("no-anim")},6e4),pxt.add("egg",{args:[]}),pxt("egg",STP.query)},clickShare:function(){this.elems.share.hasClass("symbols-share-input")?(this.elems.fun_block.removeClass("no-anim"),this.elems.fun_block.removeClass("share-block"),this.elems.share.removeClass("symbols-share-input"),this.elems.share.find("input").remove()):(this.elems.fun_block.addClass("no-anim"),this.elems.fun_block.addClass("share-block"),this.elems.share.addClass("symbols-share-input"),this.elems.share.append('<input type="text" value="'+location.href+'"/>'),this.elems.share.find("input").select())},clickSymbol:function(a){a.preventDefault(),go.paramsCommon={q:$(a.currentTarget).html()};var b=go.utils.urlFor(STP.location,go.paramsCommon);Backbone.history.navigate(b,{trigger:!0})}})}();var go=go||{};!function(){"use strict";go.SlotProjView=Backbone.View.extend({tagName:"div",className:"responses__pxtRBMail",events:{"mousedown a":"linkClick"},linkClick:function(){pxt("b",this.href)},render:function(){return this.$el.html(this.model),this}})}();var go=go||{};!function(){"use strict";go.Router=Backbone.Router.extend({routes:{"search?*path":"goSearch","wlsearch?*path":"goSearch","*other":"notFoundUrl"},goSearch:function(a){go.currentUrl=a,go.firstRender||setTimeout(function(){go.serpView.getResults()},0)},notFoundUrl:function(){console.log("ошибка роутера")}})}();var go=go||{};go.templates={"blocks/address.tmpl":'<div class="result__address"> {%- if address.address -%} <div class="js-result__address"> {%- if address.map_url -%} <a href="{{ address.map_url }}" class="result__address__address" target="_blank" {% if address_pxt %}{{ address_pxt|safe }}{% else %}data-pxt="mm|{{ url }}|{{ number }}"{% endif %}> <i class="result__address__map-icon"> <svg сlass="icon-svg" viewBox="0 0 9 12"><path d="M7.96 3.1A3.76 3.76 0 0 0 4.49.75a3.77 3.77 0 0 0-3.74 3.8 3.81 3.81 0 0 0 .96 2.54l2.78 3.67L7.36 7l.19-.25a3.8 3.8 0 0 0 .41-3.65z"/></svg> </i> {{ address.address|safe }} </a> {%- else -%} <div class="result__address__address"> <i class="result__address__map-icon"> <svg сlass="icon-svg" viewBox="0 0 9 12"><path d="M7.96 3.1A3.76 3.76 0 0 0 4.49.75a3.77 3.77 0 0 0-3.74 3.8 3.81 3.81 0 0 0 .96 2.54l2.78 3.67L7.36 7l.19-.25a3.8 3.8 0 0 0 .41-3.65z"/></svg> </i> {{ address.address|safe }} </div> {%- endif -%} </div> {%- endif -%} {%- if address.phone -%} <div class="result__address__phone"> <i class="result__address__phone-icon"> <svg class="icon-svg" viewBox="0 0 8 12"><path d="M2 0h4a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2C0 .9.9 0 2 0zm0 1a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2zm2 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg> </i> {{ address.phone|safe }} </div> {%- endif -%} </div> ',"blocks/adv_search.tmpl":'<div class="adv-search js-is-not-scrollable{% if params.common.advs == 1 %} adv-search_show{% endif %}"> <header class="adv-search__header"> <h2 class="adv-search__title">Расширенный поиск</h2> {% if STP.mail -%} <a id="AdvSearchSuggests" class="adv-search__suggests">Настроить подсказки</a> {%- endif %} </header> {% if geo and geo.current and geo.current.name %} {% set geo_selected = geo.select %} {% set geo_select = geo.select or geo.current %} <section class="adv-search__section"> <h3 class="adv-search__heading">Поиск по региону</h3> <ul id="AdvSearchGeo" class="adv-search__filter"> <li class="js-kb-opt adv-search__filter-item"> <a class="js-adv-search__geo-item js-adv-search__geo-item_def adv-search__link adv-search__link_radio{% if not geo_selected %} adv-search__link_active{% endif %}" href="#" data-value="" data-pxt="srl|any|[href]"> <span class="adv-search__radio-btn"></span> Весь интернет </a> </li> <li class="js-kb-opt adv-search__filter-item"> <a class="js-adv-search__geo-item adv-search__link adv-search__link_radio{% if geo_selected %} adv-search__link_active{% endif %}" href="#" data-value="{{ geo_select.id }}" data-pxt="sge|{{ geo_select.id }}|[href]"> <span class="adv-search__radio-btn"></span> {{ geo_select.name }} </a> </li> </ul> </section> {% endif %} <section class="adv-search__section"> <h3 class="adv-search__heading">Поиск по файлам</h3> {% set file_types = [ [\'doc\', \'DOC\', \'Microsoft Word\'], [\'xls\', \'XLS\', \'Microsoft Excel\'], [\'ppt\', \'PPT\', \'Microsoft Power Point\'], [\'pdf\', \'PDF\', \'Adobe Acrobat\'], ] %} <ul id="AdvSearchFile" class="js-adv-search__filter adv-search__filter"> {% for item in file_types %} <li class="adv-search__filter-item adv-search__filter-file"> <a class="js-adv-search__filter-item adv-search__link adv-search__link_file{% if params.common.file == item[0] %} adv-search__link_active{% endif %}" href="#" data-value="{{ item[0] }}" title="{{ item[2] }}">{{ item[1] }}</a> </li> {% endfor %} </ul> <input type="hidden" name="file" class="js-adv-search__input" value="{{ params.common.file }}" {% if params.common.advs != 1 %}disabled{% endif %}> </section> <section class="adv-search__section"> <label class="adv-search__heading" for="ASW-site">Поиск по сайту</label> <input type="text" name="site" class="js-adv-search__input adv-search__input" id="AdvSearchSite" value="{{ params.common.site }}" placeholder="Введите сайт" {% if params.common.advs != 1 %}disabled{% endif %}> </section> <footer class="adv-search__footer"> <button type="button" id="AdvSearchSubmit" class="adv-search__btn adv-search__btn_primary" data-pxt="find|web|advs">Применить</button> <button type="button" id="AdvSearchReset" class="adv-search__btn">Сбросить</button> <input type="hidden" value="1" class="js-adv-search__input" name="advs"{% if params.common.advs != 1 %} disabled="disabled"{% endif %}> </footer> </div> ',"blocks/alqs.tmpl":'<h3>Также ищут</h3> <ul class="alqs-col"> {% for item in alqs %} <li class="alqs-item"> <a id="alqs_{{ loop.index }}" data-pxt="alqs|[href]|{{ loop.index }}" href="{{ item.url }}">{{ item.hl_query|safe }}</a> </li> {% if not loop.first and not loop.last and loop.index == Math.ceil(loop.length/2) %} </ul> <ul class="alqs-col"> {% endif %} {% endfor %} </ul> <div class="clearfix"></div> ',"blocks/antirobot.tmpl":'<div class="antirobot antirobot_container" id="antirobot"> <p>Мы ограничили ваш доступ к Поиску, т.к. считаем, что запросы, поступившие с вашего IP-адреса, похожи на автоматические.</p> <p>Чтобы продолжить поиск, введите символы с картинки:</p> <table class="antirobot__table"> <tr> <td class="antirobot__img-cell"> <img class="antirobot__img" src="/ar_captcha?id={{ antirobot.qid }}" width="281" height="71" alt=""> </td> <td> <form class="js-antirobot-form" action="/ar" method="post"> {% if antirobot.dest %} <input type="hidden" name="dest" value="{{ antirobot.dest }}"> {% endif %} <input type="hidden" name="ajax" value="1"> <input type="hidden" name="q" value="{{ q }}"> <input type="hidden" name="sqid" value="{{ antirobot.qid }}" class="js-antirobot-qid"> <input type="text" maxlength="6" name="SequreWord" class="antirobot__sequre-word" autocomplete="off"><br> <input type="submit" value="Продолжить"> </form> </td> </tr> </table> <p class="antirobot__error">Код был введен неправильно. Попробуйте снова.</p> <p>Кстати, не забудьте проверить свой компьютер на наличие вирусов, т.к. такая ситуация может возникать из-за вредоносной программы, установленной на вашем компьютере.</p> <p>Если после ввода символов с картинки, ничего не произошло, то проверьте включены ли <a href="https://help.mail.ru/mail-help/helpful/cookies">файлы куки</a>.</p> <p>По всем возникшим вопросам пишите в нашу <a href="/support">службу технической поддержки</a>.</p> </div> ',"blocks/carousel.tmpl":'{% if infocard_title -%} <div class="carousels__title"> {%- if tUrl -%} <a data-pxt="carousel|[href]|ttl" class="carousels__title-main js-carousels__title-link" href="{{ tUrl }}">{{ infocard_title }}</a> {%- else -%} <span class="carousels__title-main">{{ infocard_title }}</span> {%- endif -%} {%- if subtitle -%} <span class="carousels__title-sub">{{ subtitle }}</span> {%- endif -%} </div> {%- endif %} <div id="carousel-{{ view }}" class="carousel js-carousel"> <div data-pxt="carousel|[href]|arl" class="js-carousel-left carousel__arrow carousel__arrow_left"><i></i></div> <div class="js-carousel-scroll carousel__scroll"> {% for item in items %} {%- if item.category == \'film.film\' or item.category == \'tv.tv_program\' -%} {%- set stub_type = \'film\' -%} {%- elif item.category == \'people.person\' or item.category == \'fictional_universe.fictional_character\' -%} {%- set stub_type = \'person\' -%} {%- elif item.category == \'book.written_work\' -%} {%- set stub_type = \'book\' -%} {%- elif item.category == \'organization.organization\' -%} {%- set stub_type = \'org\' -%} {%- elif item.category == \'food.food\' -%} {%- set stub_type = \'food\' -%} {%- else -%} {%- set stub_type = \'\' -%} {%- endif -%} {%- if not (item.image and item.image.local_url) -%} {%- set stub_active = true -%} {%- else -%} {%- set stub_active = false -%} {%- endif -%}  {%- if item.image.width and item.image.width > 0 and item.image.height and item.image.height > 0 -%} {%- set image_ratio = item.image.width / item.image.height -%} {%- else -%} {%- set image_ratio = 2 -%} {%- endif -%} {%- if view == \'horizontal\' and image_ratio > 0.85 -%} {%- set image_query = \'h=140\' -%} {%- elif view == \'horizontal\' and image_ratio < 0.85 -%} {%- set image_query = \'w=140\' -%} {%- elif view == \'vertical\' and image_ratio > 0.85 -%} {%- set image_query = \'h=200\' -%} {%- else -%} {%- set image_query = \'w=140\' -%} {%- endif -%}  <div class="carousel__item"> <a data-pxt="carousel|[href]|item|{{ loop.index }}" class="js-carousel-link carousel__link{% if item.is_active %} carousel__link_select{% endif %}" href="{{ item.cUrl }}" data-id="{{ item.id }}"> <div class="carousel__img-wrap"> <div class="carousel__img{% if stub_type %} crsl-stub_{{ stub_type }}{% endif %}{% if item.gender %} crsl-stub_{{ item.gender }}{% endif %}{% if stub_active %} crsl-stub_common{% endif %}" {% if not stub_active %} data-src="{{ item.image.local_url }}&amp;{{ image_query }}&amp;q=100"{% endif %}> </div> <div class="carousel__info"> {% if item.title %}<div class="carousel__title">{% if item.titleBr %}{{ item.titleBr|safe }}{% else %}{{ item.title|safe }}{% endif %}</div>{% endif %} {% if item.subtitle %}<div class="carousel__sttl">{{ item.subtitle|safe }}</div>{% endif %} </div> <div class="carousel__img-border"></div> <div class="carousel__img-gradient"></div> <div class="carousel__img-gradient-hover"></div> </div> </a> </div> {% endfor %} </div> <div class="js-carousel-right carousel__arrow carousel__arrow_right"><i></i></div> </div> ',"blocks/dir_bottom.tmpl":'<div class="{{ prefix }}_tobm"> <style> .{{ icoClass }} { background-image: url(\'{{ ico }}\'); background-repeat: no-repeat; } </style> <div class="{{ prefix }}__wwp"> {% for advert in bottom %} {% include "dir_item.tmpl" %} {% endfor %} </div> </div> ',"blocks/dir_item.tmpl":'{% macro highlighting(loop) %}{% for item in loop %}{% if item.hl %}{{ \'<b>\'|safe }}{% endif %}{{ item.text|safe }}{% if item.hl %}{{ \'</b>\'|safe }}{% endif %}{% endfor %}{% endmacro %} <div class="{{ prefix }}__tiem{% if position and loop.index %} js-{{ prefix }}__tiem_{{ position }}_{{ loop.index }}{% endif %}" {% if position %}data-p="{{ position }}"{% endif %} {% if loop.index %}data-i="{{ loop.index }}"{% endif %}> {% if advert.icon_y150 %} <a data-number="{{ advert.number }}" href="{{ advert.redir_url }}" target="_blank"><img class="{{ prefix }}__app-icon" src="{{ advert.icon_y150.url }}"></a> <div class="{{ prefix }}__img-wrapper"> {% endif %} {% if advert.title and advert.title.length > 0 %} <h3 class="{{ prefix }}__ltl"> {% if position != \'side\' and not advert.block_favicon %} <a target="_blank" href="{{ advert.redir_url }}" class="{{ prefix }}__ficon{% if icoClass %} {{ icoClass }}{% endif %}" style="background-position: 0px -{{ (loop.index - 1) * 16 }}px" data-number="{{ advert.number }}"></a> {% endif %} <a class="{{ prefix }}__ltl-lkl" target="_blank" data-number="{{ advert.number }}" href="{{ advert.redir_url }}">{{ highlighting(advert.title) }}</a> </h3> {% endif %} {% if advert.domain or advert.path and advert.redir_path_url %} <div class="data-container"> {% if position != \'side\' -%} <a class="js-ad-label {{ prefix }}__ad-label" href="" target="_blank">Реклама</a> {%- endif %} <a class="{{ prefix }}__rlu" target="_blank" data-number="{{ advert.number }}" href="{% if position != \'side\' and advert.path and advert.redir_path_url %}{{ advert.redir_path_url }}{% else %}{{ advert.redir_url }}{% endif %}"> {% if position != \'side\' and advert.path and advert.redir_path_url %} {{ highlighting(advert.path) }} {% elif advert.hldomain and advert.hldomain.length > 0 %} {{ highlighting(advert.hldomain) }} {% else %} {{ advert.domain }} {% endif %} </a> {% if position == \'side\' %} {% if advert.region %} <span class="{{ prefix }}__region">{{ advert.region }}</span> {% endif %} {% if advert.age %} <span class="{{ prefix }}__info">{{ advert.age }}</span> {% endif %} {% if advert.warning %} <span class="{{ prefix }}__info">{{ advert.warning|safe }}</span> {% endif %} {% endif %} </div> {% endif %} {% if advert.rating %} <div class="{{ prefix }}__app-stars"><div class="{{ prefix }}__app-rate {{ prefix }}__app-rate_{{ advert.rating|default(0) * 10 }}"></div></div> {% endif %} {% if advert.review_count %} <span class="{{ prefix }}__app-count">{{ advert.review_count }}&nbsp;{{ advert.review_count|plural(\'оценка\', \'оценки\', \'оценок\') }}</span> {% endif %} {% if advert.price %} <div class="{{ prefix }}__app-price">{{ advert.price }}&nbsp;{% if advert.price_currency_symbol %}{{ advert.price_currency_symbol }}{% elseif advert.price_currency_code %}{{ advert.price_currency_code }}{% endif %} </div> {% endif %} {% if advert.text and advert.text.length > 0 %} <div class="{{ prefix }}__ttex"> {{ highlighting(advert.text) }} </div> {% endif %} {% if advert.sitelinks and not (loop.length == 1 and advert.sitelinks.length % 2 == 0 and position == \'top\') and advert.sitelinks.length > 0 and position != \'side\' %} <ul class="{{ prefix }}__sitelinks"> {% for link in advert.sitelinks %} {% if link.title.length > 0 and link.redir_url %} <li class="{{ prefix }}__sitelinks-item"> <a class="{{ prefix }}__sitelinks-link" target="_blank" data-number="{{ advert.number }}" href="{{ link.redir_url }}">{{ highlighting(link.title) }}</a> </li> {% endif %} {% endfor %} </ul> {% endif %} {% if position != \'side\' %} <div class="bottom-info"> {% if advert.vcard_url and isVisibleVcard %} <a data-pxt="ya_d|premium|cnt_data_vcard|[href]|{{advert.number}}" href="{{advert.vcard_url}}" class="contact-link" rel="noopener nofollow" target="_blank" > Контактные данные </a> {% endif %} {% if advert.market_rating and advert.market_rating >= 4 %} <span class="{{ prefix }}__rating-max"><span class="{{ prefix }}__rating-current {{ prefix }}__rating-current--stars-{{ advert.market_rating }}"></span></span><span class="{{ prefix }}__rating-title">Рейтинг магазина</span> {% endif %} {% if advert.region %} <span class="{{ prefix }}__region">{{ advert.region }}</span> {% endif %} {% if advert.subway_station %} <span class="{{ prefix }}__region">м.&nbsp;{{ advert.subway_station }}</span> {% endif %} {% if advert.phone and not (advert.vcard_url and isVisibleVcard) %} <span class="{{ prefix }}__region">{{ advert.phone }}</span> {% endif %} {% if advert.working_time %} <span class="{{ prefix }}__region">{{ advert.working_time }}</span> {% endif %} {% if advert.age %} <span class="{{ prefix }}__info">{{ advert.age }}</span> {% endif %} {% if advert.warning %} <span class="{{ prefix }}__info">{{ advert.warning|safe }}</span> {% endif %} </div> {% endif %} {% if advert.sitelinks and (loop.length == 1 and advert.sitelinks.length % 2 == 0 and position == \'top\') and advert.sitelinks.length > 0 and position != \'side\' %} <div class="{{ prefix }}__sitelinks-rich"> <ul> {% for link in advert.sitelinks %} {% if link.title.length > 0 and link.redir_url %} <li class="{{ prefix }}__sitelinks-rich_line"> <a class="{{ prefix }}__sitelinks-link" target="_blank" data-number="{{ advert.number }}" href="{{ link.redir_url }}">{{ highlighting(link.title) }}</a> </li> {% if not loop.first and not loop.last %} {% if loop.index % 2 == 0 %}</ul><ul>{% endif %} {% endif %} {% endif %} {% endfor %} </ul> <div class="clearfix"></div> </div> {% endif %} {% if advert.icon_y150 %} </div> {% endif %} {% if advert.call_to_action and advert.redir_call_to_action_url %} <a class="{{ prefix }}__app-action" data-number="{{ advert.number }}" href="{{ advert.redir_call_to_action_url }}" target="_blank">{{ advert.call_to_action }}</a> {% endif %} </div> ',
"blocks/dir_rtb.tmpl":'<!-- Yandex.RTB {{ id }} --> <div id="yandex_rtb_{{ id }}" class="yandex-rtb yandex-rtb_{{ block }}"{% if handleBorders %} style="display: none;"{% endif %}></div> <script type="text/javascript"> (function(w, d, n, s, t) { var onFinish = function() { {% if handleBorders %} var $ad = $(\'#yandex_rtb_{{ id }}\'); var block = \'{{ block }}\'; if (!$ad.is(\':empty\')) { $ad.css(\'display\', \'\'); } if (!$ad.is(\':visible\') || !$ad.height()/* null|0 */) { $ad.hide(); } {% endif %} }; w[n] = w[n] || []; w[n].push(function() { Ya.Context.AdvManager.render({ blockId: "{{ id }}", renderTo: "yandex_rtb_{{ id }}", onRender: onFinish, async: true }, onFinish); }); t = d.getElementsByTagName("script")[0]; s = d.createElement("script"); s.type = "text/javascript"; s.src = "//an.yandex.ru/system/context.js"; s.async = true; s.onerror = onFinish; t.parentNode.insertBefore(s, t); })(this, this.document, "yandexContextAsyncCallbacks"); </script> ',"blocks/dir_side.tmpl":'<div class="{{ prefix }}_right"> <div class="{{ prefix }}__wwp"> <div class="{{ prefix }}__link-wrap"> <a class="{{ prefix }}__link" href="" target="_blank">Директ</a> </div> {% for advert in side %} {% include "dir_item.tmpl" %} {% endfor %} </div> </div> ',"blocks/dir_top.tmpl":'<div class="{{ prefix }}_ptpo"> <style> .{{ icoClass }} { background-image: url(\'{{ ico }}\'); background-repeat: no-repeat; } </style> <div class="{{ prefix }}__wwp"> {% for advert in top %} {% include "dir_item.tmpl" %} {% endfor %} </div> </div> ',"blocks/footer.tmpl":'<ul class="footer__links"> <li><a id="footer-help" data-pxt="ftr|help|[href]" href="https://help.mail.ru/go-help/">Помощь</a></li> <li><a id="footer-support" data-pxt="ftr|fb|[href]" href="https://help.mail.ru/go-support/">Служба поддержки</a></li> <li><a id="footer-addurl" data-pxt="ftr|addurl|[href]" href="https://webmaster.mail.ru/">Вебмастер</a></li> </ul> ',"blocks/footer_widget.tmpl":'<div class="footer-blocks__header"> <a class="footer-blocks__logo" data-pxt="ftrwdg|head|[href]|extern" href="https://widget.my.com" target="_blank"></a> <div class="footer-blocks__title"><span>Мы вам ещё покажем</span></div> </div> <ul{% if items.length < 8 %} class="footer-block-one"{% endif %}> {% for item in items %} <li class="footer-block"> <a class="footer-block__link" href="{{ item.url }}" data-pxt="ftrwdg|item|{{ item.url }}|extern|{{ loop.index }}" data-redir="{{ item.redirect_url }}" target="_blank"> <div class="footer-block__pic" style="background-image:url(\'{{ item.images.preview }}\');"></div> <div class="footer-block__url">{{ item.pretty_url }}</div> <div class="footer-block__ttl">{{ item.title|truncate(75, true, \'...\') }}</div> </a> </li> {% endfor %} </ul> <div class="footer-blocks__button"><a data-pxt="ftrwdg|btn|[href]" href="/">Смотреть еще</a></div>',"blocks/infocard-v2.tmpl":' {% macro data_pxt(smack_type, click) %}data-pxt="clr_{{ smack_type }}|[href]|{{ click }}"{% endmacro %} {% macro data_pxt_list(smack_type, click, type, loop) %}data-pxt="clr_{{ smack_type }}_list|{{ type }}|[href]|{{ click }}{% if loop %}|{{ loop.index }}{% endif %}"{% endmacro %} {% macro data_pxt_list_ex(smack_type, click, type, loop) %}data-pxt="clr_{{ smack_type }}_list|{{ type }}|[href]|{{ click }}|extern{% if loop %}|{{ loop.index }}{% endif %}"{% endmacro %} {% macro propTableItem(smackType, category, propItem, loop, nbsp) -%} {%- if propItem.query -%} <a {{ data_pxt(smackType, \'plink\') }} class="js-icard-info__prop-link icard-info__prop-link" data-id="{{ propItem.id }}" href="{{ propItem.pUrl }}">{{ propItem.title }}</a>{%- if propItem.subtitle -%}&nbsp;({{ propItem.subtitle }}){%- endif -%}{%- if not loop.last -%},{%- if nbsp -%}<span class="icard-hidden-content__hide-on-show">&nbsp;</span>{%- endif -%}{%- endif -%} {%- else -%} {{ propItem.title }}{%- if propItem.subtitle -%}&nbsp;({{ propItem.subtitle }}){%- endif -%}{%- if not loop.last -%},{%- if nbsp -%}<span class="icard-hidden-content__hide-on-show">&nbsp;</span>{%- endif -%}{%- endif -%} {%- endif -%} {%- endmacro %} {%- set has_smack_images = smack_images and smack_images.length > 0 -%} <div id="icard" class="icard"> {% for item in results %} {%- set show_mode = \'off\' -%} {% if item.show_mode %} {%- set show_mode = item.show_mode -%} {%- endif -%} {% if item.smack_type == \'images\' and has_smack_images %} {%- set itemImages = item -%} {% endif %} {% if item.smack_type == \'infocard\' %} {% if item.show_mode and item.show_mode != \'off\' %} <div class="icard-info{% if item.carousels.length == 0 %} icard-info--full-border{% endif %}"> {% if not has_smack_images and item.image and item.image.local_url %} <div class="icardMainImage js-react"></div> {% endif %} {% if item.title %} <div class="icardHeader js-react"></div> {% endif %} {% if item.watch %} <div class="icardVideoPlayer js-react"></div> {% endif %} {% if not item.watch and itemImages %} <div class="icardImages js-react"></div> {% endif %} <div class="infocardInfo js-react"></div> {% if item.series %} <div class="icard-series"> {% if item.series.seasons %} <div class="icardSeasons js-react"></div> {% endif %} {% if item.series.episodes %} <div class="icardEpisodes js-react"></div> {% endif %} </div> {% endif %} <div class="clear"></div> </div> {% endif %} {% if item.carousels %} <div class="card-crsl-container"> {% for crsl in item.carousels %} {% set isCrslItemsMoreThanTen = crsl.items.length >= 10 %} <div class="icard-crsl icard-crsl--{{ crsl.category }} js-icard-crsl"> <div id="js-crsl_{{ crsl.id }}" class="icard-crsl__{{ crsl.view }}" data-carousel-id="{{ crsl.id }}"> {% if crsl.ctUrl %} <h3 class="icard-crsl__title"> <span class="icard-crsl__link js-icard-crsl__tlink"> <a {{ data_pxt_list(item.smack_type, \'title\', crsl.category) }} href="{{ crsl.ctUrl }}" class="icard-crsl__link-txt">{{ crsl.title }}</a> </span> {% if isCrslItemsMoreThanTen %} <a {{ data_pxt_list(item.smack_type, \'title\', crsl.category) }} href="{{ crsl.ctUrl }}" class="icard-crsl__more">Ещё</a> {% endif %} </h3> {% else %} <div class="icard-crsl__title">{{ crsl.title }}</div> {% endif %} <div class="carousel carousel--icard carousel--icard-{{ crsl.view }}"> <div class="carousel__prev"> <i class="carousel__icon-arrow js-carousel-prev" {{ data_pxt_list(item.smack_type, \'arl\', crsl.category or item.smack_type) }}> <svg class="carousel__svg" width="10" height="8"><path d="M.3 3.29l3.03-3a1 1 0 0 1 1.4 0 .98.98 0 0 1 0 1.4L3.4 3H9A1 1 0 0 1 10 4a1 1 0 0 1-1 .99H3.4L4.73 6.3a.98.98 0 0 1 0 1.4 1 1 0 0 1-1.4 0l-3.03-3V4.7a.98.98 0 0 1 0-1.4V3.3z"></path></svg> </i> </div> <div class="carousel__next"> <i class="carousel__icon-arrow m_active js-carousel-next"> <svg class="carousel__svg" width="10" height="8"><path d="M10.04 3.29l-3.02-3a1 1 0 0 0-1.41 0 .98.98 0 0 0 0 1.4L6.94 3h-5.6a1 1 0 0 0-1 .99 1 1 0 0 0 1 .99h5.6L5.61 6.3a.98.98 0 0 0 0 1.4 1 1 0 0 0 1.4 0l3.03-3 .01-.01a.98.98 0 0 0 0-1.4l-.01-.01z"></path></svg> </i> </div> <div class="carousel__container"> <ul class="carousel__sliders" id="js-icard-crsl__items"> {% for bl in crsl.items -%} {%- if bl.image_url -%} {%- set item_img = bl.image_url -%} {%- elseif bl.image and bl.image.local_url -%} {%- set item_img = bl.image.local_url -%} {%- else -%} {%- set item_img = false -%} {%- endif -%} {%- if bl.category == \'film.film\' or bl.category == \'tv.tv_program\' -%} {%- set stub_type = \'film\' -%} {%- elif bl.category == \'people.person\' or bl.category == \'fictional_universe.fictional_character\' -%} {%- set stub_type = \'person\' -%} {%- elif bl.category == \'book.written_work\' -%} {%- set stub_type = \'book\' -%} {%- elif bl.category == \'organization.organization\' -%} {%- set stub_type = \'org\' -%} {%- elif bl.category == \'food.food\' -%} {%- set stub_type = \'food\' -%} {%- else -%} {%- set stub_type = \'\' -%} {%- endif -%}  {%- if bl.image.width and bl.image.width > 0 and bl.image.height and bl.image.height > 0 -%} {%- set image_ratio = bl.image.width / bl.image.height -%} {%- else -%} {%- set image_ratio = 2 -%} {%- endif -%} {%- if crsl.view == \'horizontal\' and image_ratio > 0.79 -%} {%- set image_query = \'h=103\' -%} {%- elif crsl.view == \'horizontal\' and image_ratio < 0.79 -%} {%- set image_query = \'w=103\' -%} {%- elif crsl.view == \'vertical\' and image_ratio > 0.79 -%} {%- set image_query = \'h=130\' -%} {%- else -%} {%- set image_query = \'w=103\' -%} {%- endif -%}  <li class="carousel__slide"> <div class="icard-crsl-data icard-crsl-data--{{crsl.view}}" title="{{ bl.title }}"> <a class="icard-crsl-data__link js-icard-crsl__link" {% if bl.cUrl %}href="{{ bl.cUrl }}" data-id="{{ bl.id }}" {{ data_pxt_list(item.smack_type, \'item\', crsl.category or item.smack_type, loop) }}{% else %}href="{{ bl.url }}" target="_blank" {{ data_pxt_list_ex(item.smack_type, \'item\', crsl.category or item.smack_type, loop) }}{% endif %}> <div class="icard-crsl-data__preview{% if stub_type %} icard-data-stub_{{ stub_type }}{% endif %}{% if bl.gender %} icard-data-stub_{{ bl.gender }}{% endif %}{% if not item_img %} icard-data-stub_common{% endif %} js-preview" {% if item_img %} data-src="{{ item_img }}&amp;{{ image_query }}&amp;q=100"{% endif %}> </div> <div class="icard-crsl-data__caption"> {% if bl.title %}<div class="icard-crsl-data__title">{% if bl.titleBr %}{{ bl.titleBr|safe }}{% else %}{{ bl.title|safe }}{% endif %}</div>{% endif %} {% if bl.subtitle %}<div class="icard-crsl-data__subtitle">{{ bl.subtitle|safe }}</div>{% endif %} {% if bl.url %}<div class="icard-crsl-data__domain">{{ bl.url|urldomain }}</div>{% endif %} </div> </a> </div> </li> {%- endfor %} {% if isCrslItemsMoreThanTen %} <li class="carousel__slide"> <a class="more-content more-content--icard more-content--icard-{{crsl.view}}" href="{{ crsl.ctUrl }}" {{ data_pxt_list(item.smack_type, \'more\', crsl.category) }} target="_blank"> Ещё </a> </li> {% endif %} </ul> </div> </div> <div class="clear"></div> </div> </div> {% endfor %} </div> {% endif %} {% elif item.object_type == \'companies\' %} {%- set show_mode = true -%} <div class="icard-companies"> <div class="icard-info__header"> <div class="icard-info__header-caption"> {% if item.name %} <div class="icard-info__ttl">{{ item.name }}</div> {% endif %} {% if item.descr %} <div class="icard-info__subttl">{{ item.descr }}</div> {% endif %} </div> <div class="icard-companies__header-buttons"> {% if (item.sites and item.sites.length) %} <a target="_blank" data-pxt="clr_company|site|[href]|extern" rel="noopener" href="{{ item.sites[0].url }}">Сайт</a> {% endif %} {% if (item.map.route) %} <a target="_blank" data-pxt="clr_company|addr|[href]|extern" rel="noopener" href="{{ item.map.route }}">Как добраться</a> {% endif %} </div> </div> {% if item.image or item.map %} <div class="icard-companies__middle-block"> {% if item.image %} <a href="{{ item.image.source }}" class="icard-companies__middle-block-photo" target="_blank" data-pxt="clr_company|img|[href]|extern" rel="noopener" title="Еще {{ item.image.count }} фото"> <div class="icard-companies__middle-block-photo-img" style="background-image:url(\'{{ item.image.url }}\')"></div> <div class="icard-companies__middle-block-photo-backdrop"> <div class="icard-companies__middle-block-photo-text"> Еще {{ item.image.count }} фото </div> </div> </a> {% endif %} {% if item.map %} <a href="{{ item.map.url }}" target="_blank" data-pxt="clr_company|map|[href]|extern" rel="noopener" class="icard-companies__middle-block-map" {% if not item.image %} style="width:100%;" {% endif %} > <div id="js-icard-companies__middle-block-map" style="width: 100%; height: 100%; cursor:pointer;"></div> <div class="icard-companies__middle-block-map-hover"></div> </a> {% endif %} </div> {% endif %} <div class="icard-info__props"> {% if (item.address and item.map.url) %} <div class="icard-info__prop"> <b>Адрес</b> <a href="{{ item.map.url }}" title="{{ item.address }}" class="icard-info__prop-cat-link" target="_blank" data-pxt="clr_company|plink|[href]|extern" rel="noopener"> {{ item.address }} </a> </div> {% endif %} {% if (item.metro and item.metro.length) %} <div class="icard-info__prop"> <b>Метро</b> {% for metro in item.metro %} <span class="icard-info__prop-metro"> <span style="background-color:{{ metro.color }}" class="icard-info__prop-metro-icon"></span>{{ metro.name }} </span> {% endfor %} </div> {% endif %} {% if (item.phones and item.phones.length) %} <div class="icard-info__prop"> <b>Телефон</b> {% for phone in item.phones %}{% if not loop.first %}, {% endif %}<span style="display: inline-block">{{ phone }}</span>{% endfor %} </div> {% endif %} {% if (item.sites and item.sites.length) %} <div class="icard-info__prop"> <b>Сайт</b> {% for site in item.sites %}{% if not loop.first %}, {% endif %}<a class="icard-info__prop-site-link" target="_blank" data-pxt="clr_company|plink|[href]|extern" rel="noopener" href="{{ site.url }}">{{ site.text }}</a>{% endfor %} </div> {% endif %} {% if (item.schedule and item.schedule.hours and item.schedule.hours.length) %} <div class="icard-info__prop"> <b>Время работы</b> {{ go.utils.scheduleToStr(item.schedule.hours) }} </div> {% endif %} {% if (item.services and item.services.length) %} <div class="icard-info__prop"> <b>Услуги</b> {% for service in item.services %}{% if not loop.first %}, {% endif %}{{ service }}{% endfor %} </div> {% endif %} </div> </div> {% elif item.object_type == \'companies_list\' %} {%- set show_mode = true -%} <div class="icardCompaniesList js-react"></div> {% endif %} {% if show_mode and show_mode != \'off\' %} <div class="infocard-footer-border infocard-footer-{{item.number}} js-react"></div> {% endif %} {% if item.smack_type == \'infocard.hint\' %} <div class="icardHint js-react"></div> {% endif%} {% endfor %} </div> <div class="icardVideoModal js-react"></div> ',"blocks/infocard.tmpl":' {% macro data_pxt(smack_type, click) %}data-pxt="clr_{{ smack_type }}|[href]|{{ click }}"{% endmacro %} {% macro data_pxt_list(smack_type, click, type, loop) %}data-pxt="clr_{{ smack_type }}_list|{{ type }}|[href]|{{ click }}{% if loop %}|{{ loop.index }}{% endif %}"{% endmacro %} {% macro data_pxt_list_ex(smack_type, click, type, loop) %}data-pxt="clr_{{ smack_type }}_list|{{ type }}|[href]|{{ click }}|extern{% if loop %}|{{ loop.index }}{% endif %}"{% endmacro %} {% macro propTableItem(smackType, category, propItem, loop, nbsp) -%} {%- if propItem.query -%} <a {{ data_pxt(smackType, \'plink\') }} class="js-icard-info__prop-link icard-info__prop-link" data-id="{{ propItem.id }}" href="{{ propItem.pUrl }}">{{ propItem.title }}</a>{%- if propItem.subtitle -%}&nbsp;({{ propItem.subtitle }}){%- endif -%}{%- if not loop.last -%},{%- if nbsp -%}<span class="icard-hidden-content__hide-on-show">&nbsp;</span>{%- endif -%}{%- endif -%} {%- else -%} {{ propItem.title }}{%- if propItem.subtitle -%}&nbsp;({{ propItem.subtitle }}){%- endif -%}{%- if not loop.last -%},{%- if nbsp -%}<span class="icard-hidden-content__hide-on-show">&nbsp;</span>{%- endif -%}{%- endif -%} {%- endif -%} {%- endmacro %} {%- set has_smack_images = smack_images and smack_images.length > 0 -%} <div id="icard"> {% for item in results %} {%- set show_mode = \'off\' -%} {% if item.show_mode %} {%- set show_mode = item.show_mode -%} {%- endif -%} {% if item.smack_type == \'images\' and has_smack_images %} <div id="js-icard-imgs" class="icard-imgs"> <div class="icard-imgs__in"> {% for img in smack_images -%} {%- if loop.first -%} {%- set image_click_px=\'imgb\' -%} {%- else -%} {%- set image_click_px=\'imgs\' -%} {%- endif -%} <a {%- if img.trailer -%} id="js-icard-trailer" data-pxt="clr_{{ item.smack_type }}|{{ img.trailer }}|trlr" {%- else -%} {{ data_pxt(item.smack_type, image_click_px) }} {%- endif -%} class="js-icard-imgs-img icard-imgs__img" href="{{ img.iUrl }}" target="_blank" style="background-image: url(\'{{ img.thumb.url }}\');"> {%- if img.trailer -%} <i class="icard-imgs__play"></i> <span>Трейлер</span> {%- endif -%} {%- if loop.first -%} <div class="icard-imgs__blur" style="background-image: url(\'{{ img.thumb.url }}\');"></div> <div class="icard-imgs__blur-bg"></div> {%- endif -%} </a> {%- endfor %} {% if item.iUrl %}<a {{ data_pxt(item.smack_type, \'next\') }} class="js-icard-imgs-next icard-imgs__next" href="{{ item.iUrl }}" target="_blank"><i></i><span>Больше картинок</span></a>{% endif %} </div> </div> {% endif %} {% if item.smack_type == \'infocard\' %} <div class="icard-info"> {% if item.show_mode and item.show_mode != \'off\' %} {% if not has_smack_images and item.image and item.image.local_url %} <div class="icard-info__img"><a {{ data_pxt(item.smack_type, \'img\') }} target="_blank" href="{{ item.image.iUrl }}"><img id="js-icard-main-img" src="{{ item.image.local_url }}&amp;q=100" /></a></div> {% endif %} {%- set has_socials = item.social_networks and item.social_networks.length > 0 -%} <div class="icard-info__header{% if has_socials %} icard-info__header_with-socials{% endif %}"> <div class="icard-info__header-caption"> {% if item.title %} <div class="icard-info__ttl {% if isSmallTitle %} icard-info__ttl-small {% endif %}">{{ item.title }}</div> {% if has_socials -%} <div class="icard-info__socials"> {% for social in item.social_networks -%} <a class="icard-info__socials-item icard-info__social_{{ social.name }}" data-pxt="clr_infocard|[href]|{{ social.pixel }}|extern" href="{{ social.url }}" target="_blank"></a> {%- endfor %} </div> {%- endif %} {% endif %} {% if item.subtitle %}<div class="icard-info__subttl">{{ item.subtitle }}</div>{% endif %} </div> {% if item.ratings -%} <div class="icard-info__ratings"> {% for prop in item.ratings -%} {%- set rating_stars = prop.value|round(1, \'common\') -%} {% if (prop.type == \'kinopoisk\' or prop.type == \'imdb\' or prop.type == \'kinomailru\') and rating_stars >= 0 and rating_stars !== \'\' -%} <div class="icard-info__rating icard-info__rating_{{ prop.type }}"> <span class="snippet-rating"> <div title="Рейтинг: {{ rating_stars }} из 10" class="snippet-rating__stars" style="width:{{ rating_stars * 10 }}%"></div> </span> {% if prop.source -%} <a class="icard-info__rating-logo" data-pxt="clr_{{ item.smack_type }}|[href]|rat|extern" target="_blank" href="{{ prop.source }}">{{ prop.name }}</a> <i class="icard-info__rating-value">{{ (rating_stars+\'\').replace(\'.\', \',\') }}</i> {%- else -%} <span class="icard-info__rating-logo">{{ prop.name }}</span> <i class="icard-info__rating-value">{{ (rating_stars+\'\').replace(\'.\', \',\') }}</i> {%- endif %} </div> {%- endif %} {%- endfor %} </div> {%- endif %} <div class="clear"></div> </div> {% if item.summary %} {% if item.summary.text -%} <div class="icard-info__txt icard-hidden-content js-icard-hidden-content{% if not item.summary.text_hide %} m_show_content{% endif %}"> <div class="icard-hidden-content__sum"> {{ item.summary.text }} {% if item.summary.source and item.summary.source_url -%} <span class="icard-info__src"><a data-pxt="clr_{{ item.smack_type }}|[href]|src|extern" target="_blank" href="{{ item.summary.source_url }}">{{ item.summary.source }}</a></span> {%- endif %} </div> {% if item.summary.text_hide -%} <div data-pxt="clr_infocard_im|txt" class="icard-hidden-content__click js-icard__click">Читать дальше<i></i></div> {%- endif %} </div> {%- endif %} {% endif %} {% if item.properties_table %} <div class="icard-info__props"> {% for prop in item.properties_table -%} {%- set propIndex = loop.index -%} <div id="js-{{ prop.category }}" class="icard-info__prop{% if prop.items and prop.items.length > 5 %} icard-hidden-content js-icard-hidden-content{% endif %}"> {% if prop.query -%} <a {{ data_pxt(item.smack_type, \'pcatlink\') }} data-id="{{ prop.id }}" class="js-icard-info__prop-cat-link icard-info__prop-cat-link" href="{{ prop.pUrl }}"><b>{% if prop.title %}{{ prop.title }}: {% endif %}</b></a> {%- else -%} <b>{% if prop.title %}{{ prop.title }}: {% endif %}</b> {%- endif %} {% for propItem in prop.items -%} {% if loop.index < 5 or prop.items.length <= 5 -%} {{ propTableItem(item.smack_type, prop.category, propItem, loop) }} {%- elif loop.index == 5 -%} <span class="icard-nowrap"> {{ propTableItem(item.smack_type, prop.category, propItem, loop, 1) }}<span class="icard-hidden-content__trigger js-icard__click"><span class="icard-hidden-content__more-icon" data-pxt="clr_infocard_im|prop|{{ propIndex }}"><i></i></span></span> </span> {%- else -%} <span class="icard-hidden-content__payload"> {{ propTableItem(item.smack_type, prop.category, propItem, loop) }} </span> {%- endif %} {%- endfor %} </div> {%- endfor %} </div> {% endif %} {% endif %} {% if item.series %} <div class="icard-series"> {% if item.series.seasons %} <div class="icard-series-group" id="icard-season"> <div class="icard-series-group__ttl">Сезон</div> <div class="icard-series-group__block"> <div class="icard-series-group__navig icard-series-group__navig_left" id="js-icard-series-seasons-navig-left"> <div class="icard-series-group__navig-svg-wrapper"> <svg class="icard-series-group__navig-svg" width="12px" height="20px" viewBox="0 0 12 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g id="350_series_2" transform="translate(-1230.000000, -550.000000)"> <g id="season" transform="translate(878.000000, 519.000000)"> <g id="Group-3" transform="translate(358.000000, 41.000000) scale(-1, 1) translate(-358.000000, -41.000000) translate(342.000000, 25.000000)"> <path d="M21.9090953,16.0097291 L22.0200005,16.1206343 L12.1211766,26.0194582 L10,23.8982816 L17.8885525,16.0097291 L10,8.12117655 L12.1211766,6 L22.0200005,15.8988239 L21.9090953,16.0097291 Z" id="Combined-Shape"></path> </g> </g> </g> </svg> </div> <div class="icard-series-group__navig-gradient icard-series-group__navig-gradient_left"> </div> </div> <div class="icard-series-group__items-wrapper"> <div class="icard-series-group__items" id="js-icard-series-seasons"> {% for item in item.series.seasons %} {% if item.active %} <span class="icard-series-group__item icard-series-group__item_active" data-id="{{ item.id }}">{{ item.number }}</span> {%- else -%} <a class="icard-series-group__item" href="{{ item.url }}" data-id="{{ item.id }}">{{ item.number }}</a> {% endif %} {% endfor %} </div> </div> <div class="icard-series-group__navig icard-series-group__navig_right" id="js-icard-series-seasons-navig-right"> <div class="icard-series-group__navig-gradient icard-series-group__navig-gradient_right"> </div> <div class="icard-series-group__navig-svg-wrapper"> <svg class="icard-series-group__navig-svg" width="12px" height="20px" viewBox="0 0 12 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g id="350_series_2" transform="translate(-1230.000000, -550.000000)"> <g id="season" transform="translate(878.000000, 519.000000)"> <g id="Group-3" transform="translate(342.000000, 25.000000)"> <path d="M21.9090953,16.0097291 L22.0200005,16.1206343 L12.1211766,26.0194582 L10,23.8982816 L17.8885525,16.0097291 L10,8.12117655 L12.1211766,6 L22.0200005,15.8988239 L21.9090953,16.0097291 Z" id="Combined-Shape"></path> </g> </g> </g> </svg> </div> </div> </div> </div> {% endif %} {% if item.series.episodes %} <div class="icard-series-group" id="icard-episodes"> <div class="icard-series-group__ttl">Серия</div> <div class="icard-series-group__block"> <div class="icard-series-group__navig icard-series-group__navig_left" id="js-icard-series-episodes-navig-left"> <div class="icard-series-group__navig-svg-wrapper"> <svg class="icard-series-group__navig-svg" width="12px" height="20px" viewBox="0 0 12 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g id="350_series_2" transform="translate(-1230.000000, -550.000000)"> <g id="season" transform="translate(878.000000, 519.000000)"> <g id="Group-3" transform="translate(358.000000, 41.000000) scale(-1, 1) translate(-358.000000, -41.000000) translate(342.000000, 25.000000)"> <path d="M21.9090953,16.0097291 L22.0200005,16.1206343 L12.1211766,26.0194582 L10,23.8982816 L17.8885525,16.0097291 L10,8.12117655 L12.1211766,6 L22.0200005,15.8988239 L21.9090953,16.0097291 Z" id="Combined-Shape"></path> </g> </g> </g> </svg> </div> <div class="icard-series-group__navig-gradient icard-series-group__navig-gradient_left"> </div> </div> <div class="icard-series-group__items-wrapper"> <div class="icard-series-group__items" id="js-icard-series-episodes"> {% for item in item.series.episodes %} {% if item.active %} <span class="icard-series-group__item icard-series-group__item_active" data-id="{{ item.id }}">{{ item.number }}</span> {%- else -%} <a class="icard-series-group__item" href="{{ item.url }}" data-id="{{ item.id }}">{{ item.number }}</a> {% endif %} {% endfor %} </div> </div> <div class="icard-series-group__navig icard-series-group__navig_right" id="js-icard-series-episodes-navig-right"> <div class="icard-series-group__navig-gradient icard-series-group__navig-gradient_right"> </div> <div class="icard-series-group__navig-svg-wrapper"> <svg class="icard-series-group__navig-svg" width="12px" height="20px" viewBox="0 0 12 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g id="350_series_2" transform="translate(-1230.000000, -550.000000)"> <g id="season" transform="translate(878.000000, 519.000000)"> <g id="Group-3" transform="translate(342.000000, 25.000000)"> <path d="M21.9090953,16.0097291 L22.0200005,16.1206343 L12.1211766,26.0194582 L10,23.8982816 L17.8885525,16.0097291 L10,8.12117655 L12.1211766,6 L22.0200005,15.8988239 L21.9090953,16.0097291 Z" id="Combined-Shape"></path> </g> </g> </g> </svg> </div> </div> </div> </div> {% endif %} </div> {% endif %} {% if item.carousels %} <div class="clear"></div> {% for crsl in item.carousels %} <div class="icard-crsl js-icard-crsl"> <div id="js-crsl_{{ crsl.id }}" class="icard-crsl__{{ crsl.view }}" data-carousel-id="{{ crsl.id }}"> {% if crsl.ctUrl %} <div class="icard-crsl__title"> <a {{ data_pxt_list(item.smack_type, \'title\', crsl.category) }} class="icard-crsl__link js-icard-crsl__tlink" href="{{ crsl.ctUrl }}">{{ crsl.title }}</a> </div> {% else %} <div class="icard-crsl__title">{{ crsl.title }}</div> {% endif %} <div class="icard-crsl__wrapper icard-crsl__wrapper-{{ crsl.category }}"> <div class="icard-crsl__navi"> <div {{ data_pxt_list(item.smack_type, \'arl\', crsl.category or item.smack_type) }} class="icard-crsl__left js-carousel-prev"> <i></i> </div> <ul class="icard-crsl__items" id="js-icard-crsl__items"> {% for bl in crsl.items -%} {%- if bl.image_url -%} {%- set item_img = bl.image_url -%} {%- elseif bl.image and bl.image.local_url -%} {%- set item_img = bl.image.local_url -%} {%- else -%} {%- set item_img = false -%} {%- endif -%} {%- if bl.category == \'film.film\' or bl.category == \'tv.tv_program\' -%} {%- set stub_type = \'film\' -%} {%- elif bl.category == \'people.person\' or bl.category == \'fictional_universe.fictional_character\' -%} {%- set stub_type = \'person\' -%} {%- elif bl.category == \'book.written_work\' -%} {%- set stub_type = \'book\' -%} {%- elif bl.category == \'organization.organization\' -%} {%- set stub_type = \'org\' -%} {%- elif bl.category == \'food.food\' -%} {%- set stub_type = \'food\' -%} {%- else -%} {%- set stub_type = \'\' -%} {%- endif -%}  {%- if bl.image.width and bl.image.width > 0 and bl.image.height and bl.image.height > 0 -%} {%- set image_ratio = bl.image.width / bl.image.height -%} {%- else -%} {%- set image_ratio = 2 -%} {%- endif -%} {%- if crsl.view == \'horizontal\' and image_ratio > 0.79 -%} {%- set image_query = \'h=103\' -%} {%- elif crsl.view == \'horizontal\' and image_ratio < 0.79 -%} {%- set image_query = \'w=103\' -%} {%- elif crsl.view == \'vertical\' and image_ratio > 0.79 -%} {%- set image_query = \'h=130\' -%} {%- else -%} {%- set image_query = \'w=103\' -%} {%- endif -%}  <li class="icard-crsl__item"> <a class="js-icard-crsl__link" {% if bl.cUrl %}href="{{ bl.cUrl }}" data-id="{{ bl.id }}" {{ data_pxt_list(item.smack_type, \'item\', crsl.category or item.smack_type, loop) }}{% else %}href="{{ bl.url }}" target="_blank" {{ data_pxt_list_ex(item.smack_type, \'item\', crsl.category or item.smack_type, loop) }}{% endif %}> <div class="icard-crsl__img{% if stub_type %} icard-stub_{{ stub_type }}{% endif %}{% if bl.gender %} icard-stub_{{ bl.gender }}{% endif %}{% if not item_img %} icard-stub_common{% endif %} js-preview" {% if item_img %} data-src="{{ item_img }}&amp;{{ image_query }}&amp;q=100"{% endif %}> </div> {% if bl.title %}<div class="icard-crsl__ttl">{% if bl.titleBr %}{{ bl.titleBr|safe }}{% else %}{{ bl.title|safe }}{% endif %}</div>{% endif %} {% if bl.subtitle %}<div class="icard-crsl__sttl">{{ bl.subtitle|safe }}</div>{% endif %} {% if bl.url %}<div class="icard-crsl__domain">{{ bl.url|urldomain }}</div>{% endif %} </a> </li> {%- endfor %} </ul> <div class="icard-crsl__right js-carousel-next"> <i></i> <i></i> </div> </div> </div> <div class="clear"></div> </div> </div> {% endfor %} {% endif %} </div> {% elif item.object_type == \'companies\' %} {%- set show_mode = true -%} <div class="icard-companies"> <div class="icard-info__header"> <div class="icard-info__header-caption"> {% if item.name %} <div class="icard-info__ttl">{{ item.name }}</div> {% endif %} {% if item.descr %} <div class="icard-info__subttl">{{ item.descr }}</div> {% endif %} </div> <div class="icard-companies__header-buttons"> {% if (item.sites and item.sites.length) %} <a target="_blank" data-pxt="clr_company|site|[href]|extern" rel="noopener" href="{{ item.sites[0].url }}">Сайт</a> {% endif %} {% if (item.map.route) %} <a target="_blank" data-pxt="clr_company|addr|[href]|extern" rel="noopener" href="{{ item.map.route }}">Как добраться</a> {% endif %} </div> </div> {% if item.image or item.map %} <div class="icard-companies__middle-block"> {% if item.image %} <a href="{{ item.image.source }}" class="icard-companies__middle-block-photo" target="_blank" data-pxt="clr_company|img|[href]|extern" rel="noopener" title="Еще {{ item.image.count }} фото"> <div class="icard-companies__middle-block-photo-img" style="background-image:url(\'{{ item.image.url }}\')"></div> <div class="icard-companies__middle-block-photo-backdrop"> <div class="icard-companies__middle-block-photo-text"> Еще {{ item.image.count }} фото </div> </div> </a> {% endif %} {% if item.map %} <a href="{{ item.map.url }}" target="_blank" data-pxt="clr_company|map|[href]|extern" rel="noopener" class="icard-companies__middle-block-map" {% if not item.image %} style="width:100%;" {% endif %} > <div id="js-icard-companies__middle-block-map" style="width: 100%; height: 100%; cursor:pointer;"></div> <div class="icard-companies__middle-block-map-hover"></div> </a> {% endif %} </div> {% endif %} <div class="icard-info__props"> {% if (item.address and item.map.url) %} <div class="icard-info__prop"> <b>Адрес</b> <a href="{{ item.map.url }}" title="{{ item.address }}" class="icard-info__prop-cat-link" target="_blank" data-pxt="clr_company|plink|[href]|extern" rel="noopener"> {{ item.address }} </a> </div> {% endif %} {% if (item.metro and item.metro.length) %} <div class="icard-info__prop"> <b>Метро</b> {% for metro in item.metro %} <span class="icard-info__prop-metro"> <span style="background-color:{{ metro.color }}" class="icard-info__prop-metro-icon"></span>{{ metro.name }} </span> {% endfor %} </div> {% endif %} {% if (item.phones and item.phones.length) %} <div class="icard-info__prop"> <b>Телефон</b> {% for phone in item.phones %}{% if not loop.first %}, {% endif %}<span style="display: inline-block">{{ phone }}</span>{% endfor %} </div> {% endif %} {% if (item.sites and item.sites.length) %} <div class="icard-info__prop"> <b>Сайт</b> {% for site in item.sites %}{% if not loop.first %}, {% endif %}<a class="icard-info__prop-site-link" target="_blank" data-pxt="clr_company|plink|[href]|extern" rel="noopener" href="{{ site.url }}">{{ site.text }}</a>{% endfor %} </div> {% endif %} {% if (item.schedule and item.schedule.hours and item.schedule.hours.length) %} <div class="icard-info__prop"> <b>Время работы</b> {{ go.utils.scheduleToStr(item.schedule.hours) }} </div> {% endif %} {% if (item.services and item.services.length) %} <div class="icard-info__prop"> <b>Услуги</b> {% for service in item.services %}{% if not loop.first %}, {% endif %}{{ service }}{% endfor %} </div> {% endif %} </div> </div> {% elif item.object_type == \'companies_list\' %} {%- set show_mode = true -%} <div class="icardCompaniesList js-react"></div> {% endif %} {% if show_mode and show_mode != \'off\' %} <div class="infocard-footer-{{item.number}} js-react"></div> {% endif %} {% if item.smack_type == \'infocard.hint\' %} <div class="icardHint js-react"> </div> {% endif %} {% endfor %} </div> <div class="icardVideoModal js-react"></div> ',
"blocks/likemore.tmpl":'<div class="mywidget__top"> <div class="mywidget__header">Популярные статьи</div> <a data-pxt="cl_likemore|[href]|logo|{{ url|urlpretty({stripwww: true, strippath: true}) }}|extern|{{ number }}" href="https://widget.my.com" target="_blank"><span class="mywidget__logo"></span></a> </div> <div class="mywidget__content"> {% for item in list %} {% if loop.index < 5 %} <div class="mywidget__block"> <a data-number="{{ loop.index }}" data-pxt="cl_likemore|[href]|item|{{ item.content.url|urlpretty({stripwww: true, strippath: true}) }}|extern|{{ number }}|{{ loop.index }}" class="mywidget__link" href="{{ item.content.url }}" target="_blank" rel="noopener"> <div class="mywidget__pic" style="background-image:url(\'{{ item.content.preview.url + imgW }}\');"></div> <div class="mywidget__ttl">{{ item.content.title }}</div> </a> </div> {% endif %} {% endfor %} </div>',"blocks/map_popup.tmpl":'<div class="map-popup"> Адрес:<br> <span class="map-popup__title">{{address|safe}}</span> <span class="map-popup__title-suffix">&nbsp;&mdash; Карты&nbsp;2GIS</span> <div class="map-popup__loader"><i></i></div> <div class="map-popup__message"><span>Адрес не найден</span></div> <a target="_blank" class="map-popup__link"> <div id="map-popup-2gis" class="map-popup-2gis"></div> </a> </div> ',"blocks/mistype.tmpl":'<div class="mistype__block"> {% if message == \'SPCH_AUTO\' or message == \'SPCH_SUGG_REQUERY\' %} <div class="mistype__auto"> Исправлена опечатка: <a class="mistype__link light-link js-mistype" data-pxt="mstp|nosp|[href]" href="{{ url }}" >{{ hlorig|safe }}</a> <a class="mistype__btn js-mistype" data-pxt="mstp|nosp_cancel|[href]" href="{{ url }}">Отменить</a> </div> {% elif message == \'SPCH_SUGG\' %} <div class="mistype__suggest"> Вероятно, вы искали: <a class="mistype__link mistype__link_style light-link js-mistype" data-pxt="mstp|spc|[href]" href="{{ url }}">{{ hlvalue|safe }}</a> <a class="mistype__btn js-mistype" data-pxt="mstp|spc_yes|[href]" href="{{ url }}">Да</a> </div> {% elif message == \'SPCH_MIX\' %} Добавлены результаты по запросу: <a class="light-link js-mistype" data-pxt="mstp|spmixf|[href]" href="{{ url }}">{{ hlvalue|safe }}</a><br> Искать только: <a class="light-link js-mistype2" data-pxt="mstp|spmixs|[href]" href="{{ url2 }}">{{ orig }}</a> {% endif %} </div> ',"blocks/not_found.tmpl":'{% if isFunny %} <div class="fun-block" id="js-fun-block"> <div class="fun-symbols"> <div class="fun-symbol">{{ STP.query }}</div> </div> <div class="symbols-list-block"> <hr> <div class="symbols-list" id="js-symbols-list"> {% for item in funSymbols %} <a href="{{ STP.location }}?q={{ encodeURI(item) }}" {% if STP.query == item %}class="current"{% endif %}>{{ item }}</a> {% endfor %} </div> <div class="symbols-share" id="js-symbols-share"><span>Поделиться</span></div> </div> </div> {% else %} <h2 class="not-found__title">По данному запросу ничего не найдено</h2> <ul class="not-found__list"> <li>Возможно, что в запросе одно или несколько слов написаны неправильно.</li> <li>Попробуйте задать другой запрос.</li> <li>Перейдите на главную страницу <a class="never-visited" href="/">Поиск Mail.Ru</a>.</li> </ul> {% endif %} {% if isFunny %} {% set Anim = \'1\' %} {% set AnimFunc = \'2s\' %} <style> html { overflow: hidden; } #layout-rightcol { display: none; } {% if STP.query == \'♡\' %} @keyframes fun-ani { 50% {transform: scale(1.5);} } @-moz-keyframes fun-ani { 50% {-moz-transform: scale(1.5);} } @-webkit-keyframes fun-ani { 50% {-webkit-transform: scale(1.5);} } {% set AnimFunc =\'.7s cubic-bezier(0.7, 0.0, 0.7, 1.0)\' %} {% elif STP.query == \'☏\' %} @keyframes fun-ani { 0% {transform: rotate(-3deg); margin-top: -5px;} 50% {transform: rotate(3deg); margin-top: 10px;} 100% {transform: rotate(-3deg); margin-top: 5px;} } @-moz-keyframes fun-ani { 0% {-moz-transform: rotate(-3deg); margin-top: -5px;} 50% {-moz-transform: rotate(3deg); margin-top: 10px;} 100% {-moz-transform: rotate(-3deg); margin-top: 5px;} } @-webkit-keyframes fun-ani { 0% {-webkit-transform: rotate(-3deg); margin-top: -5px;} 50% {-webkit-transform: rotate(3deg); margin-top: 10px;} 100% {-webkit-transform: rotate(-3deg); margin-top: 5px;} } {% set AnimFunc =\'.2s linear\' %} {% elif STP.query == \'☄\' %} @keyframes fun-ani { 0% {transform: rotate(180deg); left: 150px; top: 0;} 25% {top: -50px;} 50% {transform: rotate(0deg); left: -150px;} 75% {top: 50px;} 100% {transform: rotate(-180deg); left: 150px; top: 0;} } @-moz-keyframes fun-ani { 0% {-moz-transform: rotate(180deg); left: 150px; top: 0;} 25% {top: -50px;} 50% {-moz-transform: rotate(0deg); left: -150px;} 75% {top: 50px;} 100% {-moz-transform: rotate(-180deg); left: 150px; top: 0;} } @-webkit-keyframes fun-ani { 0% {-webkit-transform: rotate(180deg); left: 150px; top: 0;} 25% {top: -50px;} 50% {-webkit-transform: rotate(0deg); left: -150px;} 75% {top: 50px;} 100% {-webkit-transform: rotate(-180deg); left: 150px; top: 0;} } {% set AnimFunc =\'3s linear\' %} {% elif STP.query == \'☯\' %} @keyframes fun-ani { 0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);} } @-moz-keyframes fun-ani { 0% {-moz-transform: rotate(0deg);} 100% {-moz-transform: rotate(360deg);} } @-webkit-keyframes fun-ani { 0% {-webkit-transform: rotate(0deg);} 100% {-webkit-transform: rotate(360deg);} } {% set AnimFunc =\'2s linear\' %} {% elif STP.query == \'☭\' %} @keyframes fun-ani { 0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);} } @-moz-keyframes fun-ani { 0% {-moz-transform: rotate(0deg);} 100% {-moz-transform: rotate(360deg);} } @-webkit-keyframes fun-ani { 0% {-webkit-transform: rotate(0deg);} 100% {-webkit-transform: rotate(360deg);} } {% else %} @keyframes fun-ani { 0% {transform: rotate(-20deg);} 25% {transform: scale(1.3);} 50% {transform: rotate(20deg);} 75% {transform: scale(1.3);} 100% {transform: rotate(-20deg);} } @-moz-keyframes fun-ani { 0% {-moz-transform: rotate(-20deg);} 25% {-moz-transform: scale(1.3);} 50% {-moz-transform: rotate(20deg);} 75% {-moz-transform: scale(1.3);} 100% {-moz-transform: rotate(-20deg);} } @-webkit-keyframes fun-ani { 0% {-webkit-transform: rotate(-20deg);} 25% {-webkit-transform: scale(1.3);} 50% {-webkit-transform: rotate(20deg);} 75% {-webkit-transform: scale(1.3);} 100% {-webkit-transform: rotate(-20deg); } } {% endif %} .fun-block { width: 530px; } .fun-symbols { z-index: 1; position: relative; height: 400px; {% if funSmiles.indexOf(STP.query+\'|\') !== -1 or STP.query == \':-)\' %} -moz-transform: rotate(90deg); -ms-transform: rotate(90deg); -webkit-transform: rotate(90deg); -o-transform: rotate(90deg); transform: rotate(90deg); {% endif %} } .fun-symbol { position: absolute; top: 50px; height: 400px; width: 530px; font-family: Helvetica,Arial; /* SRCH-37105 На маках emoji максимальные размеры, при привышении которых пропадают. Абсолютные размеры решают проблему */ font-size: 25vh; text-shadow: 0 0 1px; text-align: center; vertical-align: middle; cursor: default; {% if Anim == \'1\' %} -webkit-animation: fun-ani {{ AnimFunc }} infinite; -moz-animation: fun-ani {{ AnimFunc }} infinite; animation: fun-ani {{ AnimFunc }} infinite; {% if STP.query == \'♡\' %} color: #fff; font-size: 1px !important; background: url("/static/web/img/not_found_funny/heart.png") no-repeat scroll 134px 63px transparent {% else %} color: #0857A6; {% endif %} {% else %} color: #eee; {% endif %} } .no-anim .fun-symbol { -webkit-animation: none; -moz-animation: none; animation: none; } .symbols-list { z-index: 3; position: relative; } .symbols-share span { border-bottom: 1px dotted #999; color: #555555; cursor: pointer; margin-top: 9px; z-index: 5; position: relative; } .symbols-share-input { width: 100%; border: 0 none; cursor: default; } .symbols-share-input input { margin-left: 5px; width: 40%; } .symbols-list a, .symbols-list a:visited { text-decoration: none; font-size: 30px; color: #999; margin: 0 5px; } .symbols-list a:hover, .symbols-list a.current { color: #555; } .symbols-list-block { text-align: center; opacity: 0; -webkit-transition-duration: .7s; -moz-transition-duration: .7s; -ms-transition-duration: .7s; -o-transition-duration: .7s; transition-duration: .7s; -webkit-transition-property: opacity; -moz-transition-property: opacity; -ms-transition-property: opacity; -o-transition-property: opacity; transition-property: opacity; } .share-block .symbols-list-block, .fun-block:hover .symbols-list-block { opacity: 1; } hr { border-color: #fff; border-style: solid; border-width: 1px 0 0; font-size: 0; height: 15px; margin: 15px 0 0; overflow: hidden; position: relative; -moz-box-shadow: #e8e8e8 0 -1px 0; -webkit-box-shadow: #e8e8e8 0 -1px 0; -o-box-shadow: #e8e8e8 0 -1px 0; box-shadow: #e8e8e8 0 -1px 0; } .ieb9 hr { border-color: #ccc; height: 4px; } </style> {% endif %} ',"blocks/rating.tmpl":'{% include "rating_stars.tmpl" %} {% include "rating_text.tmpl" %}',"blocks/rating_stars.tmpl":'{% if rating and rating.stars >= 0 %} {% set rating_stars = rating.stars %} {% elif microdata_video and microdata_video.rating_stars %} {% set rating_stars = microdata_video.rating_stars %} {% else %} {% set rating_stars = \'\' %} {% endif %} {% if rating_stars and (rating or microdata_video) %} {% set rating_max = rating.max|default(\'10\') %} {% else %} {% set rating_max = \'\' %} {% endif %} {% set has_rating_votes = rating and rating.count > 0 and not microdata_video %} {%- if rating_stars >= 0 and rating_max -%} <span class="snippet-rating"> <div title="Рейтинг: {{ rating_stars }} из {{ rating_max }}" class="snippet-rating__stars" style="width: {{ (rating_stars * 10 / rating_max) * 10 }}%"></div> </span> {% endif %} ',"blocks/rating_text.tmpl":' {%- if rating_stars >= 0 and rating_max -%} <span class="snippet-rating-text"><span class="snippet-rating-text__stat"><span class="snippet-rating-text__stat-points">{{ rating_stars }}</span><span class="snippet-rating-text__stat-total"> из {{ rating_max }}</span></span> {%- if has_rating_votes -%}<span class="snippet-rating-text__stat-separator">|</span><span class="snippet-rating-text__votes">{{ rating.count|formatnumbertoshorttext(\'голос\', \'голоса\', \'голосов\') }}</span>{%- endif -%}</span> {% endif %}',"blocks/sitelinks.tmpl":'{% macro sl_pxt(loop) %}data-pxt="c4_{{ sitelinks_type }}|[href]|sl|extern|{{ number }}{% if loop %}|{{ loop.index }}|{{ loop.length }}{% endif %}"{% endmacro %} {% if sitelinks and sitelinks_type %} {% if sitelinks_type == \'sitelinks_rich\' and is_navig %} <div class="snippet-sitelinks-rich"> <ul> {% for item in sitelinks %} <li class="snippet-sitelinks__line"> <a target="_blank" rel="noopener" {% if smack_type %}{{ data_pxt(\'sl\', loop) }}{% elif sitelinks_type %}{{ sl_pxt(loop) }}{% endif %} href="{{ item.url }}">{{ item.title|htmltruncate(30, true, \'...\')|safe }}</a> <div class="snippet-sitelinks__text"> {{ item.snippet }} </div> </li> {% if not loop.first and not loop.last %} {% if loop.index % 2 == 0 %}</ul><ul>{% endif %} {% endif %} {% endfor %} </ul> <div class="clearfix"></div> </div> {% elif sitelinks_type == \'wikipedia\' and number == 1 or sitelinks_type == \'sitelinks\' and is_navig or button %} <div class="snippet-sitelinks"> <ul> {% for item in sitelinks %} {% if loop.length <= 3 and not button %} <li class="snippet-sitelinks__line"> <a target="_blank" rel="noopener" {% if smack_type %}{{ data_pxt(\'sl\', loop) }}{% elif sitelinks_type %}{{ sl_pxt(loop) }}{% endif %} href="{{ item.url }}">{{ item.title|htmltruncate(30, true, \'...\')|safe }}</a> </li> {% else %} <li> <a target="_blank" rel="noopener" {% if smack_type %}{{ data_pxt(\'sl\', loop) }}{% elif sitelinks_type %}{{ sl_pxt(loop) }}{% endif %} href="{{ item.url }}">{{ item.title|htmltruncate(30, true, \'...\')|safe }}</a> </li> {% if not loop.first and not loop.last %} {% if loop.index == Math.ceil(loop.length/2) %}</ul><ul>{% endif %} {% endif %} {% endif %} {% endfor %} </ul> <div class="clearfix"></div> </div> {% else %} <div class="snippet-sitelinks snippet-sitelinks_inline"> <ul> {% for item in sitelinks %} {% set slUrl = item.url %} <li> <a target="_blank" rel="noopener" {% if smack_type %}{{ data_pxt(\'sl\', loop) }}{% elif sitelinks_type %}{{ sl_pxt(loop) }}{% endif %} href="{{ slUrl }}">{{ item.title|htmltruncate(30, true, \'...\')|safe }}</a> </li> {% endfor %} </ul> </div> {% endif %} {% endif %} ',"result.tmpl":'{% macro data_pxt(name) %}data-pxt="{{ name }}|{{ orig_url }}|{{ number }}|extern"{% endmacro %}  {% if video_torrents %} {% set prefix = \'_video_torrents\' %} {% elif microdata_video and microdata_video.type == 0 %} {% set prefix = \'_microdata_video\' %} {% elif microdata_video and microdata_video.type == 1 %} {% set prefix = \'_video_hosting\' %} {% elif title_source == \'wikipedia\' or url.indexOf(\'ru.wikipedia.org\') !== -1 %} {% set prefix = \'_wiki\' %} {% else %} {% set prefix = \'\' %} {% endif %}  {% if is_malware %} <a target="_blank" href="https://help.mail.ru/go-help/harm" class="result__malware-link"> {% if STP.detector_result == \'PC\' %}Сайт может нанести вред вашему компьютеру {% else %}Сайт может нанести вред вашему компьютеру или мобильному устройству {% endif %} </a> {% endif %}  {% if image and image_source == "wikipedia" %} <div class="result__person__img"> <a href="{{ url }}" data-redir="{{ redir_url }}" {{ data_pxt(\'c4i\' + prefix) }} target="_blank"> <img src="{% if image.local_url %}{{ image.local_url }}&w=120{% else %}{{ image.url }}{% endif %}" alt=""> </a> </div> <div class="result__person__content"> {% endif %} {% if image and image_source == "microdata" and microdata_video.type == 1 and image.width >= image.max_width %} {% set image_microdata = true %} <div class="result__microdata_video__img"> <a href="{{ url }}" data-redir="{{ redir_url }}" {{ data_pxt(\'c4\' + prefix) }} target="_blank"> {% if microdata_video.duration_time %}<span class="result__microdata_video__duration">{{ microdata_video.duration_time|duration }}</span>{% endif %} <img src="{% if image.local_url %}{{ image.local_url }}&w={{ image.img_size.w }}&h={{ image.img_size.h }}{% else %}{{ image.url }}{% endif %}" alt=""{% if image.margin_h %} style="margin-top: {{ image.margin_h }}px;"{% endif %}> </a> </div> <div class="result__microdata_video__content"> {% endif %}   <h3 class="result__title"> {% if mime %}<a href="{{ url }}" data-redir="{{ redir_url }}" target="_blank" class="result__title-mime result__title-mime_{{ mime_ext }} js-mime-{{ mime_ext }}" title="[{{ mime_ext }}]" data-pxt="c5|mime|{{ orig_url }}|{{ number }}"></a>{% endif %} <a class="light-link" href="{{ url }}" data-url="{{ url }}" data-redir="{{ redir_url }}" {{ data_pxt(\'c4\' + prefix) }} target="_blank"{% if person %} itemprop="name"{% endif %}> {% if title %} {{ title|safe }} {% else %} {{ url|urlpretty|truncate(55, true, \'...\') }} {% endif %} </a> </h3> <div class="block-info-serp{% if is_malware %} result__malware{% endif %}">  {% if favicon_result && not mime %}<a class="block-info__favicon" href="{{ url }}" data-redir="{{ redir_url }}" {{ data_pxt(\'c4\' + prefix) }} target="_blank"> <img src=\'data:image/png;base64,{{ favicon_result }}\'></a>{% endif %} <span class="block-info-serp__left"> {% if breadcrumbs %}  <span class="block-info-serp__url"> {% for bc in breadcrumbs %}<a class="block-info-serp__link" href="{{ bc.url }}" data-pxt="{{ \'c4s\' + prefix }}|[href]|{{ number }}|extern|{{ loop.index }}" target="_blank">{{ bc.title|safe }}</a>{% if not loop.last %}<span class="block-info-serp__mark">›</span>{% endif %}{% endfor %} </span> {% else %}  <a class="block-info-serp__url block-info-serp__link" href="{{ url }}" data-redir="{{ redir_url }}" {{ data_pxt(\'c4s\' + prefix) }} target="_blank"> {% if hl_url %}{{ hl_url|safe }}{% else %}{{ url|urlpretty({stripwww: true})|truncate(35, true, \'...\') }}{% endif %} </a> {% endif %} {% if passage and saved_url %} <span class="block-info-icon-down iconDown-{{number}} js-react"></span> {% endif %} {% if instagram and instagram.verified %} <span class="verifiedMark-{{number}} js-react"></span> {% endif %}  {% if pub_time %} <span class="block-info__pub-time">{{ pub_time|time_news }}</span> {% elif firstmeet %} <span class="block-info__pub-time">{{ firstmeet|time_news }}</span> {% elif otvet and otvet.date %} <span class="block-info__pub-time">{{ otvet.date|time_social }}</span> {% endif %} </span> <div class="clearfix"></div> </div>  {% if video_torrents %} {% if video_torrents.size or video_torrents.quality or video_torrents.format or video_torrents.translate %} {% set res = video_torrents %} <div class="snippet-video_torrents snippet-meta"> {% if res.quality or res.format or res.size %} {% if res.quality %}<span>{{ res.quality }}</span> {% endif %} {% if res.format %}Формат: <span>{{ res.format }}</span> {% endif %} {% if res.size %}Размер: <span> {% if res.size/1024/1024/1024 > 1 %} {{ (res.size/1024/1024/1024)|round(1).toString()|replace("\\.", ",") }} Гб {% else %} {{ (res.size/1024/1024)|round }} Мб {% endif %} </span> {% endif %} {% endif %} {% if res.translate %}Перевод: <span>{{ res.translate }}</span>{% endif %} </div> {% endif %} {% endif %}  {% if classified and classified.db %} <div class="snippet-classified_redirects snippet-meta"> {%- if classified.price -%}<span>Цена: {{ classified.price }}</span>{%- endif -%} {%- if classified.salary -%}<span>Зарплата: {{ classified.salary }}</span>{%- endif -%} {%- if classified.salary_expectation -%}<span>Зарплата: {{ classified.salary_expectation }}</span>{%- endif -%} {%- if classified.location -%}<span>Город: {{ classified.location }}</span>{%- endif -%} {%- if classified.employer -%}<span>Работодатель: {{ classified.employer|safe }}</span>{%- endif -%} {%- if classified.applicant -%}<span>Соискатель: {{ classified.applicant|safe }}</span>{%- endif -%} </div> {% endif %}  {% if recipe and recipe.ingredients %} <div class="smack-recipes__txt">{{ recipe.ingredients|htmltruncate(90, true)|safe }}</div> {% endif %}  {% if microdata_video and microdata_video.type == 0 %} {% if microdata_video.genre or microdata_video.director or microdata_video.actors %} {% set has_meta = true %} {% set has_movie_meta = true %} {% endif %} {% elif microdata_video and microdata_video.type == 1 %} {% if microdata_video.author or microdata_video.views_count or microdata_video.upload_ts %} {% set has_meta = true %} {% set has_youtube_meta = true %} {% endif %} {% endif %} {%- if has_meta or rating or twitter -%} <div class="snippet-meta">  {% if has_movie_meta %} {% if microdata_video.genre %}<span>{{ microdata_video.genre|safe|capitalize }}. </span>{% endif %} {% if microdata_video.duration_time and (microdata_video.genre or microdata_video.director) %}<span>{{ (microdata_video.duration_time/60)|round }} мин. </span>{% endif %} {% if microdata_video.director %}Режиссер: <span>{{ microdata_video.director|safe }}. </span>{% endif %} {% if microdata_video.actors %}В ролях: <span>{{ microdata_video.actors|safe|htmltruncate(75, true) }}.</span>{% endif %}  {% elif has_youtube_meta %} <span> {% if microdata_video.author %}{{ microdata_video.author|safe }}{% if microdata_video.upload_ts or microdata_video.views_count %}, {% endif %}{% endif %} {% if microdata_video.upload_ts %}{{ microdata_video.time_upload }}{% if microdata_video.views_count %}, {% endif %}{% endif %} {% if microdata_video.views_count %}{{ microdata_video.views_count|numformat|safe + \' просмотров\' }}{% endif %} </span>  {% elif twitter %} {% if twitter.tweets %} <span>Твиты: {{ twitter.tweets }}.</span> {% endif %} {% if twitter.following %} <span>Читаемые: {{ twitter.following }}.</span> {% endif %} {% if twitter.followers %} <span>Читатели: {{ twitter.followers }}.</span> {% endif %} {% endif %} </div> {%- endif -%}  {% if last_posts and last_posts_type == "blogs_sitelinks" %} <div class="blog-sitelinks"> <ul> {% for slink in last_posts %} {% if loop.index < 4 %} <li class="js-blog-slink"> <a href="{{ slink.url }}" target="_blank"{% if slink.title.length > 72 %} title="{{ slink.title }}"{% endif %} data-pxt="c4_blink|[href]|{{ number }}|{{ loop.index }}"> {{ slink.title|htmltruncate(72, true, \'...\')|safe }} </a> {% if slink.time %}<span>{{ slink.time|time_social }}</span>{% endif %} <div>{{ slink.text|htmltruncate(145, true, \'...\')|safe }}</div> </li> {% endif %} {% endfor %} </ul> </div> {% elif instagram and instagram.last_posts %} <div class="instagramCarousel-{{number}} js-react"></div> {% else %}  {% if (passage and not person) or (passage and person and url.indexOf(\'ru.wikipedia.org\') !== -1) %} <div class="result__snp"> {{ passage|safe }} {% if page_address and not (address and address.address) %} <br>{{ page_address|safe }} {% endif %} </div> {% endif %} {% endif %}  <div class="result_rating"> {% include "blocks/rating.tmpl" %} </div>  {% if last_posts and last_posts_type == "news_sitelinks" %} <div class="snippet-news-sitelinks"> <ul> {% for item in last_posts %} <li> <span class="snippet-sitelinks__time">{{ item.time|time_chrono }}</span> <a title="{{ item.title }}" target="_blank" data-pxt="c4_nlink|[href]|{{ loop.index }}" href="{{ item.url }}">{{ item.title|safe }}</a> <div class="snippet-sitelinks__shadow"><div></div></div> </li> {% endfor %} </ul> </div> {% endif %}  {% if address %} {% include "blocks/address.tmpl" %} {% endif %}  {% if button %}  {% if sitelinks_type != \'sitelinks_rich\' %} <div class="snippet__button snippet__button_{{ button.type }}"> {% if button.title %} <a href="{{ button.url }}" target="_blank" {% if button.type==\'download\' %} data-pxt="cl_{{ button.type }}_button|{{ button.platform }}|[href]|{{ number }}|extern"> {% else %} data-pxt="cl_{{ button.type }}_button|[href]|{{ number }}|extern"> {% endif %} <i class="snippet__button-icon"></i>{{ button.title }}</a> {% endif %} {% if button.line1 %}<div class="snippet__button__firsline">{{ button.line1 }}</div>{% endif %} {% if button.line2 %}<div class="snippet__button__secondline">{{ button.line2 }}</div>{% endif %} </div> {% endif %} {% endif %}  {% if modelslinks %} <div class="snippet-auto__sitelinks"> <ul> {% for slink in modelslinks %} <li> <div>{% if slink.key %}{{ slink.key }}{% endif %}</div> <a data-pxt="cl_automaker|[href]|{{ number }}|{{ loop.index }}" href="{{ slink.url }}" target="_blank">{{ slink.title|safe }}</a> </li> {% if slink.break %}</ul><ul>{% endif %} {% endfor %} </ul> </div> {% endif %}  {% if community %} {% if community_type == \'vkgroups_fast\' or community_type == \'vkgroups\' %}{% set pxt_name = \'c4_vklink\' %} {% elif community_type == \'odnoklassniki_001\' or community_type == \'odnoklassniki_002\' %}{% set pxt_name = \'c4_oklink\' %} {% endif %} <div class="community-latest"> {% for post in community %} {% if loop.index <= 3 %} <div class="community-post{% if loop.last %}_last{% endif %}"> <a href="{{ post.url }}" target="_blank" class="community-post__link" data-pxt="{{ pxt_name }}|[href]|{{ number }}|{{ loop.index }}|{{ community_type }}">{{ post.text|htmltruncate(72, true, "...")|safe }}</a> <span class="community-post__date">{% if post.timestamp %}{{ post.timestamp|time_social }}{% endif %} </span> </div> {% endif %} {% endfor %} </div> {% endif %}  {% if site_search %} <div class="navig-search{% if last_posts_type == "news_sitelinks" %} navig-search_slink{% endif %}" id="js-navig-search"> <form> <i></i> <input autocomplete="off" data-pxt="cl_sitesearch|focus|{{ number }}" maxlength="200" id="js-navig-search__field" type="text" {% if site_search.search_param %}name="{{ site_search.search_param }}"{% endif %} value="{{ site_search.placeholder }}"> </form> </div> <div class="clearfix"></div> {% endif %}  {% include "blocks/sitelinks.tmpl" %}  {% if person %} {% if person.location %}<div itemprop="homeLocation" class="result__person__description">{{ person.location|safe }}</div>{% endif %} {% if person.status %}<div class="result__person__description">{{ person.status|safe }}</div>{% endif %} {% if person.birthday %}<div itemprop="birthDate" class="result__person__description">{{ person.birthday|safe }}</div>{% endif %} {% if person.edu %} <div class="result__person__description"> {% for item in person.edu %} {% if loop.index < 4 %}<span itemprop="alumniOf">{{ item|safe }}</span>{% if loop.length > 1 and not loop.last and loop.index != 3 %}<br>{% endif %}{% endif %} {% endfor %} </div> {% endif %} {% if person.contact %}<div class="result__person__description">Контакты: <span itemprop="contactPoint">{{ person.contact|safe }}</span></div>{% endif %} {% if url.indexOf(\'ru.wikipedia.org\') === -1 and not person.location and not person.status and not person.birthday and not person.edu and not person.contact %} <div class="result__person__description">Пользователь не указал или скрыл информацию о себе.</div> {% endif %} {% endif %}  {% if is_likemore %} <div class="js-likemore"></div> {% endif %}  {% if image and image_source == "wikipedia" or image_microdata %} </div> {% endif %} <div class="clearfix"></div> '};try{rT.profile("jsinit")}catch(e){}var go=go||{};!function(){"use strict";STP.ravenDSN&&(Raven.config(STP.ravenDSN,{whitelistUrls:[/^https?\:\/\/[^\/]*(go|st)\.mail\.ru\/(static|_st)/i,/^https?\:\/\/[^\/]+go\.devmail\.ru\/(static|_st)/i,/^https?\:\/\/go\d*\.imgsmail\.ru\/_st\//i],shouldSendCallback:function(a){return a.extra["session:duration"]<6e5}}).setExtraContext({qid:STP.qid,user_type:STP.userType,geo:STP.geo,adblock:!STP.noAdblock}).setUserContext({id:STP.mrcu,email:STP.email}).install(),$(document).on("ravenHandle",function(){pxt("jserr","web")}).on("ravenSuccess",function(){pxt("jserrsent","web")})),$(document).on("headerReady",function(){try{STP.pfmTmplStart=performance.now()}catch(a){}swig.setDefaults({loader:swig.loaders.memory(go.templates)}),swig.setDefaultTZOffset((new Date).getTimezoneOffset()),SearchFormSuggest.init(),Header.init(),window.hotKeyUsage(),FoundCount.init();var b=window.location.pathname+window.location.search;try{decodeURI(b)}catch(a){if(b=go.utils.win2utf(go.utils.unescape(b)),!window.history||!window.history.replaceState)return void window.location.replace(encodeURI(b));window.history.replaceState({},document.title,encodeURI(b))}new go.Router,Backbone.history.start({pushState:!0,hashChange:!1,root:"/"}),go.dispatcher=_.clone(Backbone.Events),go.serpView=new go.SerpView,PageReloader.initDeferred()}),$(window).on("load",function(){performanceLogger()})}();try{rT.profile("jsinit")}catch(e){}