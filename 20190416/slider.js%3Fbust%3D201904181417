define([],function(){"use strict";function t(t){if("undefined"!=typeof t){var e={prefix:"product-carousel",zone:"",title:"",isTouch:i(),scrollPerPage:!1,dragging:!1,paginationEnabled:!1,navigationEnabled:!1,draggingDisabled:!1,contentIsSmallerThanViewport:!1,linkHasBeenClicked:!1,link:!1,resistanceCoef:20,minSwipeDistance:8,easing:"ease",speed:500,refreshRate:16,index:0,maxIndex:0,offset:0,maxOffset:0,dragStartX:0,dragStartY:0,dragMomentum:0,dragOffset:0,itemWidth:0,itemsLength:0,itemsPerBreakpoint:{mobile:1,phablet:2,tablet:2,laptop:3,desktop:4},startTime:0,stopEventPropagation:!0};Object.assign(this,e,t),this.init()}}"undefined"==typeof HTMLCollection.prototype.forEach&&(HTMLCollection.prototype.forEach=Array.prototype.forEach);var i=function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0},e=function(t,i,e){var s;return function(){var n=this,o=function(){s=null,e||t.apply(n)},r=e&&!s;clearTimeout(s),s=setTimeout(o,i),r&&t.apply(n)}},s={onwebkittransitionstart:"webkitTransitionStart",onmoztransitionstart:"transitionstart",onotransitionstart:"oTransitionStart otransitionstart",ontransitionstart:"transitionstart"},n={onwebkittransitionend:"webkitTransitionEnd",onmoztransitionend:"transitionend",onotransitionend:"oTransitionEnd otransitionend",ontransitionend:"transitionend"},o=function(){for(var t in s)if(t in window)return s[t]},r=function(){for(var t in n)if(t in window)return n[t]};return t.prototype.addMultipleListeners=function(t,i,e,s,n){if(!(i instanceof Array))throw'addMultipleListeners: please supply an array of eventstrings (like ["click","mouseover"])';for(var o=function(t){e.apply(this,n&&n instanceof Array?n:[])},r=0;r<i.length;r+=1)t.addEventListener(i[r],o,s)},t.prototype.removeClass=function(t,i){var e;if(window.DOMTokenList)t.classList.remove(i);else{if(null===t.getAttribute("class"))return;e=t.getAttribute("class").replace(i,""),t.setAttribute("class",e)}},t.prototype.addClass=function(t,i){var e;if(window.DOMTokenList)for(var s=0;s<i.length;s++)t.classList.add(i[s]);else null===t.getAttribute("class")&&t.setAttribute("class",""),e=t.getAttribute("class"),e=""===t.getAttribute("class")?i.join(" "):e+" "+i.join(" "),t.setAttribute("class",e)},t.prototype.paginationInfos=function(){for(var t=[],i=0;i<=this.maxIndex;)this.itemWidth*i*this.itemsPerSlide()*-1<this.maxOffset?t.push({index:i,left:this.maxOffset}):t.push({index:i,left:this.itemWidth*i*this.itemsPerSlide()*-1}),i+=1;return t},t.prototype.showPagination=function(){return this.paginationEnabled&&this.itemsPerSlide()>1&&this.itemsLength>0},t.prototype.showNavigation=function(){return this.navigationEnabled&&!this.contentIsSmallerThanViewport&&this.itemsLength>0},t.prototype.transitionStyle=function(){return this.speed/1e3+"s "+this.easing+" transform"},t.prototype.updateNavigationAndList=function(){var t=(this.offset+this.dragOffset)*-1,i=this.rootElement.querySelector("."+this.prefix+"__left-btn"),e=this.rootElement.querySelector("."+this.prefix+"__right-btn");this.showNavigation()&&(null!==i&&(i.disabled=t>=0),null!==e&&(e.disabled=t===this.maxOffset)),this.updateListElementStyles(t)},t.prototype.updateListElementStyles=function(t){this.listElement.style.transform="translate("+t+"px, 0)",this.listElement.style.transition=this.dragging?"none":this.transitionStyle()},t.prototype.updateListElementClasses=function(){this.draggingDisabled?this.addClass(this.listElement,[this.prefix+"__list--disabled"]):this.removeClass(this.listElement,this.prefix+"__list--disabled"),this.scrollPerPage?this.removeClass(this.listElement,"fixed-size"):this.addClass(this.listElement,["fixed-size"])},t.prototype.snapToPosition=function(){this.offset+=Math.max(-this.itemsPerSlide()+1,Math.min(Math.round(this.dragMomentum),this.itemsPerSlide()-1))*this.itemWidth;var t=this.scrollPerPage?this.itemWidth*this.itemsPerSlide():this.itemWidth;this.offset=t*Math.round(this.offset/t),this.offset=Math.max(0,Math.min(this.offset,this.maxOffset*-1)),this.index=this.scrollPerPage?Math.round(this.offset/this.itemWidth/this.itemsPerSlide()):Math.round(this.offset/this.itemWidth)},t.prototype.onLeftClick=function(){this.setCarousel(),this.index-=1;var t=this.itemWidth*this.index*this.itemsPerSlide();t*-1>=0?(this.offset=0,this.index=0):this.offset=t},t.prototype.onRightClick=function(){this.setCarousel(),this.index+=1;var t=this.itemWidth*this.index*this.itemsPerSlide();t*-1<this.maxOffset?(this.offset=this.maxOffset*-1,this.index=this.maxIndex):this.offset=t},t.prototype.goTo=function(){this.setCarousel(),this.index=parseInt(idx,10);var t=this.itemWidth*this.index*this.itemsPerSlide();t*-1>=0?(this.offset=0,this.index=0):t*-1<this.maxOffset?(this.offset=this.maxOffset*-1,this.index=this.maxIndex):this.offset=t},t.prototype.onTransitionStart=function(){},t.prototype.onTransitionEnd=function(){},t.prototype.onClickLink=function(t){t.preventDefault()},t.prototype.onMouseDown=function(t){var i=t.target.tagName;"A"===i&&(t.preventDefault(),t.stopPropagation(),this.linkHasBeenClicked=!0,this.link=t.target,this.link.addEventListener("click",this.onClickLink)),this.stopEventPropagation&&t.stopPropagation(),this.viewport.addEventListener(this.moveEvent,this.onMouseMoveBinding,!0),this.viewport.addEventListener(this.endEvent,this.onMouseUpBinding,!0),this.isTouch||this.viewport.addEventListener("mouseleave",this.onMouseUpBinding,!0),this.startTime=t.timeStamp,this.dragging=!0,this.dragStartX=this.isTouch?t.touches[0].clientX:t.clientX,this.dragStartY=this.isTouch?t.touches[0].clientY:t.clientY},t.prototype.onMouseMove=function(t){var i=this.isTouch?t.touches[0].clientX:t.clientX,e=this.isTouch?t.touches[0].clientY:t.clientY,s=this.dragStartX-i,n=this.dragStartY-e;if(this.updateListElementClasses(),this.draggingDisabled=!0,!(this.isTouch&&Math.abs(s)<Math.abs(n))){t.stopImmediatePropagation(),this.dragOffset=s;var o=this.offset+this.dragOffset;o<0?this.dragOffset=-Math.sqrt(-this.resistanceCoef*this.dragOffset):o>this.maxOffset*-1&&(this.dragOffset=Math.sqrt(this.resistanceCoef*this.dragOffset)),this.updateNavigationAndList()}},t.prototype.onMouseUp=function(t){var i=this.isTouch?t.changedTouches[0].clientX:t.clientX,e=this.dragStartX-i,s=0;this.dragMomentum=e/(t.timeStamp-this.startTime),0!==this.minSwipeDistance&&Math.abs(e)>=this.minSwipeDistance&&(s=this.scrollPerPage?this.itemWidth*this.itemsPerSlide():this.itemWidth,this.dragOffset+=Math.sign(e)*(s/2)),0===this.dragOffset&&this.linkHasBeenClicked?(this.link.removeEventListener("click",this.onClickLink),this.link.click()):(this.linkHasBeenClicked=!1,this.link=void 0),this.offset+=this.dragOffset,this.dragging=!1,this.dragOffset=0,this.snapToPosition(),this.viewport.removeEventListener(this.moveEvent,this.onMouseMoveBinding,!0),this.viewport.removeEventListener(this.endEvent,this.onMouseUpBinding,!0),this.isTouch||this.viewport.removeEventListener("mouseleave",this.onMouseUpBinding,!0),this.draggingDisabled=!1,this.updateNavigationAndList(),this.updateListElementClasses()},t.prototype.onResize=function(){return this.setCarousel(),this.dragging=!0,this.snapToPosition(),this.contentIsSmallerThanViewport?(this.offset=0,this.index=0,void this.updateNavigationAndList()):(this.offset=this.itemWidth*this.index*this.itemsPerSlide(),this.offset*-1<this.maxOffset?(this.offset=this.maxOffset*-1,void this.updateNavigationAndList()):void(this.offset*-1>=0&&(this.offset=0,this.index=0,this.updateNavigationAndList())))},t.prototype.getBreakpoint=function(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;return t>480&&t<=768?"phablet":t>768&&t<=1024?"tablet":t>1024&&t<=1280?"laptop":t>1280?"desktop":"mobile"},t.prototype.itemsPerSlide=function(){return this.scrollPerPage?this.itemsPerBreakpoint[this.getBreakpoint()]:1},t.prototype.getStyle=function(t){return window.getComputedStyle?getComputedStyle(t,null):t.currentStyle},t.prototype.getActualWitdh=function(t){var i=this.getStyle(t),e=t.offsetWidth,s=parseFloat(i.marginLeft)+parseFloat(i.marginRight),n=parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth);return e+s+n},t.prototype.getPadding=function(t){var i=this.getStyle(t);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)},t.prototype.setCarousel=function(){var t=this,i=this.getActualWitdh(this.viewport),e=Array.from(this.rootElement.querySelectorAll("."+this.prefix+"__list-item")),s=e.reduce(function(i,e){return i+t.getActualWitdh(e)},0)+this.getPadding(this.listElement),n=this.rootElement.querySelector("."+this.prefix+"__list-item");this.itemsLength=e.length,this.scrollPerPage&&this.itemsLength>this.itemsPerSlide()?n.width=i/this.itemsPerSlide()+"px":this.itemWidth=this.getActualWitdh(n),this.maxOffset=i-s,this.contentIsSmallerThanViewport=s<=i,this.maxIndex=Math.abs(Math.floor(this.maxOffset/(this.itemWidth*this.itemsPerSlide()))),this.offset=this.itemWidth*this.index*this.itemsPerSlide(),this.dragging=!1,this.contentIsSmallerThanViewport===!0?this.viewport.removeEventListener(this.startEvent,this.onMouseDownBinding,!0):this.viewport.addEventListener(this.startEvent,this.onMouseDownBinding,!0),this.offset*-1<this.maxOffset&&(this.index=this.maxIndex)},t.prototype.wrapListIntoViewport=function(t){var i=document.createElement("div");return i.classList.add(this.prefix+"__viewport"),t.parentNode.insertBefore(i,t),i.appendChild(t),i},t.prototype.init=function(){this.rootElement=this.element,this.listElement=this.rootElement.querySelector("ul"),this.viewport=this.wrapListIntoViewport(this.listElement),this.onMouseDownBinding=this.onMouseDown.bind(this),this.onMouseMoveBinding=this.onMouseMove.bind(this),this.onMouseUpBinding=this.onMouseUp.bind(this),this.onResizeBinding=this.onResize.bind(this),this.onTransitionStartBinding=this.onTransitionStart.bind(this),this.onTransitionEndBinding=this.onTransitionEnd.bind(this),this.startEvent=this.isTouch?"touchstart":"mousedown",this.moveEvent=this.isTouch?"touchmove":"mousemove",this.endEvent=this.isTouch?"touchend":"mouseup",this.addMultipleListeners(window,["orientationchange","resize"],e(this.onResizeBinding,this.refreshRate),!1),this.transitionstart=o(),this.listElement.addEventListener(this.transitionstart,this.onTransitionStartBinding),this.transitionend=r(),this.listElement.addEventListener(this.transitionend,this.onTransitionEndBinding),this.updateListElementClasses(),this.onResize()},t});