function iOSversion(){if(/iP(hone|od|ad)/.test(window.navigator.platform)){var e=window.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}}function iOSversion2(){if(/iPad|iPhone|iPod/.test(window.navigator.userAgent)&&!window.MSStream)return!0}if(ver=iOSversion(),ver2=iOSversion2(),"undefined"!=typeof ver&&5<=ver[0])var define=null;if("undefined"!=typeof ver2&&!0===ver2)var define=null;!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e,document):"function"==typeof define&&define.amd?define(null,function(){t(e,document)}):e.rangetouch=t(e,document)}("undefined"!=typeof window?window:this,function(h,f){"use strict";var p={enabled:!0,addCSS:!0,thumbWidth:15,selectors:{range:'[type="range"]',disabled:".rangetouch--disabled"},events:{start:"touchstart",move:"touchmove",end:"touchend"}};function n(e,t,n){e.addEventListener(t,n,!1)}function _(e,t){if(t<1){var n=(i=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(i[1]?i[1].length:0)-(i[2]?+i[2]:0)):0;return parseFloat(e.toFixed(n))}var i;return Math.round(e/t)*t}function i(e){var t,n,i,r,a,s,o,l,u,c,d;p.enabled&&"range"===e.target.type&&((t=e.target)instanceof HTMLElement&&!t.matches(p.selectors.disabled)&&!t.disabled)&&(e.preventDefault(),e.target.value=(r=(n=e).target,a=n.changedTouches[0],s=parseFloat(r.getAttribute("min"))||0,o=parseFloat(r.getAttribute("max"))||100,l=parseFloat(r.getAttribute("step"))||1,u=o-s,c=r.getBoundingClientRect(),d=100/c.width*(p.thumbWidth/2)/100,(i=100/c.width*(a.clientX-c.left))<0?i=0:100<i&&(i=100),i<50?i-=(100-2*i)*d:50<i&&(i+=2*(i-50)*d),s+_(u*(i/100),l)),function(e,t,n){if(e&&t){var i;"function"==typeof h.CustomEvent?i=h.CustomEvent:(i=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=f.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}).prototype=h.Event.prototype;var r=new i(t,{bubbles:!0,detail:n});e.dispatchEvent(r)}}(e.target,e.type===p.events.end?"change":"input"))}return function(){if("ontouchstart"in f.documentElement){if(p.addCSS){var e=f.styleSheets;(e.length?e[0]:((t=f.createElement("style")).appendChild(f.createTextNode("")),f.head.appendChild(t),t.sheet)).insertRule([p.selectors.range,":not(",p.selectors.disabled,")"].join("")+" { user-select: none; -webkit-user-select: none; touch-action: manipulation; }",0)}var t;n(f.body,p.events.start,i),n(f.body,p.events.move,i),n(f.body,p.events.end,i)}}(),{set:function(e,t){p[e]=t}}});var define=null;!function a(s,o,l){function u(n,e){if(!o[n]){if(!s[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=o[n]={exports:{}};s[n][0].call(r.exports,function(e){var t=s[n][1][e];return u(t||e)},r,r.exports,a,s,o,l)}return o[n].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){"use strict";var o,i,l,r,u,c={encode:function(e){for(var t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):(i<2048?t.push(192|i>>6):(i<65536?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|63&i>>12)),t.push(128|63&i>>6)),t.push(128|63&i))}return t},decode:function(e){for(var t=[],n=0;n<e.length;){var i=e[n++];i<128||(i<224?i=(31&i)<<6:(i<240?i=(15&i)<<12:(i=(7&i)<<18,i|=(63&e[n++])<<12),i|=(63&e[n++])<<6),i|=63&e[n++]),t.push(String.fromCharCode(i))}return t.join("")}},d={};o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){for(var t=0,n=[],i=0|e.length/3;0<i--;){var r=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(o.charAt(63&r>>18)),n.push(o.charAt(63&r>>12)),n.push(o.charAt(63&r>>6)),n.push(o.charAt(63&r))}if(2==e.length-t){r=(e[t]<<16)+(e[t+1]<<8);n.push(o.charAt(63&r>>18)),n.push(o.charAt(63&r>>12)),n.push(o.charAt(63&r>>6)),n.push("=")}else if(1==e.length-t){r=e[t]<<16;n.push(o.charAt(63&r>>18)),n.push(o.charAt(63&r>>12)),n.push("==")}return n.join("")},l=function(){for(var e=[],t=0;t<o.length;++t)e[o.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),r=function(e){for(var t=0,n=[],i=0|e.length/4;0<i--;){var r=(l[e.charCodeAt(t)]<<18)+(l[e.charCodeAt(t+1)]<<12)+(l[e.charCodeAt(t+2)]<<6)+l[e.charCodeAt(t+3)];n.push(255&r>>16),n.push(255&r>>8),n.push(255&r),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n},u={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},d.decodeArray=function(e){var t=r(e);return new Uint8Array(t)},d.encodeASCII=function(e){var t=u.encode(e);return i(t)},d.decodeASCII=function(e){var t=r(e);return u.decode(t)},d.encode=function(e){var t=c.encode(e);return i(t)},d.decode=function(e){var t=r(e);return c.decode(t)},void 0!==n&&(n.decode=d.decode,n.decodeArray=d.decodeArray)},{}],2:[function(e,t,n){"use strict";!function(e){var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)},a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},s={17:2,18:4,21:6,22:8,23:10,19:13,20:15},l={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},c=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},h=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},f=function(e,t,n,i,r){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1};f.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var t=function(e,t,n,i,r,a){this.uchar=e||" ",this.penState=new f(t,n,i,r,a)};t.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var i=function(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new t);this.pos=0,this.currPenState=new f};i.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(d.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(d.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){144<=e&&this.backSpace();var t=o(e);32<=this.pos?d.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var r=function(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new i);this.currRow=14,this.nrRollUpRows=null,this.reset()};r.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){d.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){d.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var i=e.indent,r=Math.max(i-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){d.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){d.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),d.log("INFO","Rolling up")}else d.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;r<15;r++){var a=this.rows[r].getTextString();a&&(i=r+1,e?t.push("Row "+i+': "'+a+'"'):t.push(a.trim()))}return 0<t.length&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var p=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new r,this.nonDisplayedMemory=new r,this.lastOutputScreen=new r,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,d.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";d.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(d.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){d.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){d.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){d.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){d.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){d.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){d.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){d.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){d.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){d.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){d.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){d.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(d.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,d.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){d.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=46<=e,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}d.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=d.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var _=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new p(1,t),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};_.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,i,r,a=!1;this.lastTime=e,d.setTime(e);for(var s=0;s<t.length;s+=2)if(i=127&t[s],r=127&t[s+1],0!==i||0!==r){if(d.log("DATA","["+h([t[s],t[s+1]])+"] -> ("+h([i,r])+")"),(n=this.parseCmd(i,r))||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n)if(a=this.parseChars(i,r))if(this.currChNr&&0<=this.currChNr)this.channels[this.currChNr-1].insertChars(a);else d.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,d.log("WARNING","Couldn't parse cleaned data "+h([i,r])+" orig: "+h([t[s],t[s+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null;if(!((20===e||28===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,d.log("DEBUG","Repeated command ("+h([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var i=this.channels[n-1];return 20===e||28===e?32===t?i.cc_RCL():33===t?i.cc_BS():34===t?i.cc_AOF():35===t?i.cc_AON():36===t?i.cc_DER():37===t?i.cc_RU(2):38===t?i.cc_RU(3):39===t?i.cc_RU(4):40===t?i.cc_FON():41===t?i.cc_RDC():42===t?i.cc_TR():43===t?i.cc_RTD():44===t?i.cc_EDM():45===t?i.cc_CR():46===t?i.cc_ENM():47===t&&i.cc_EOC():i.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;return(17===e||25===e)&&32<=t&&t<=47&&((n=17===e?1:2)!==this.currChNr?(d.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].cc_MIDROW(t),d.log("DEBUG","MIDROW ("+h([e,t])+")"),!0))},parsePAC:function(e,t){var n,i=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,!(this.lastCmdB=null);n=e<=23?1:2,i=64<=t&&t<=95?1===n?a[e]:l[e]:1===n?s[e]:u[e];var r=this.interpretPAC(i,t);return this.channels[n-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=95<t?t-96:t-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},parseChars:function(e,t){var n=null,i=null,r=null;if(17<=(r=25<=e?(n=2,e-8):(n=1,e))&&r<=19){var a=t;a=17===r?t+80:18===r?t+112:t+144,d.log("INFO","Special char '"+o(a)+"' in channel "+n),i=[a]}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var s=h(i);d.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},parseBackgroundAttributes:function(e,t){var n,i,r;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=c[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),r=e<24?1:2,this.channels[r-1].setBkgData(n),this.lastCmdA=null,!(this.lastCmdB=null))},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};e.logger=d,e.PenState=f,e.CaptionScreen=r,e.Cea608Parser=_,e.findCea608Nalus=function(e,t,n){for(var i=0,r=t,a=[],s=function(e,t,n,i){if(4!==e||t<8)return null;var r=n.getUint8(i),a=n.getUint16(i+1),s=n.getUint32(i+3),o=n.getUint8(i+7);return 181==r&&49==a&&1195456820==s&&3==o};r<t+n;){if(i=e.getUint32(r),6==(31&e.getUint8(r+4)))for(var o=r+5,l=-1;o<r+4+i-1;){l=0;for(var u=255;255===u;)l+=u=e.getUint8(o),o++;var c=0;for(u=255;255===u;)c+=u=e.getUint8(o),o++;s(l,c,e,o)&&a.push([o,c]),o+=c}r+=i+4}return a},e.extractCea608DataFromRange=function(e,t){var n=t[0],i=[[],[]];n+=8;var r=31&e.getUint8(n);n+=2;for(var a=0;a<r;a++){var s=e.getUint8(n),o=4&s,l=3&s;n++;var u=e.getUint8(n);n++;var c=e.getUint8(n);n++,o&&(127&u)+(127&c)!=0&&(0===l?(i[0].push(u),i[0].push(c)):1===l&&(i[1].push(u),i[1].push(c)))}return i}}(void 0===n?(void 0).cea608parser={}:n)},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(u){var c,e,t;for(c=[],t=0,e=u.length;t<e;t+=1)u[t].isRoot?c.push("root"):c.push(u[t].name);var l=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},d=function(e,t,n){var i,r,a,s,o;if(null!==e&&0!==e.length)for(i=0,r=e.length;i<r;i+=1)a=e[i],t.hasOwnProperty(a.name)&&(n.hasOwnProperty(a.name)?a.merge&&(s=t[a.name],o=n[a.name],"object"==typeof s&&"object"==typeof o?l(s,o):null!=a.mergeFunction?n[a.name]=a.mergeFunction(s,o):n[a.name]=s+o):n[a.name]=t[a.name])},h=function e(t,n){var i,r,a,s,o,l,u,c=t;if(null!==c.children&&0!==c.children.length)for(i=0,r=c.children.length;i<r;i+=1)if(l=c.children[i],n.hasOwnProperty(l.name))if(l.isArray)for(a=0,s=(o=n[l.name+"_asArray"]).length;a<s;a+=1)u=o[a],d(c.properties,n,u),e(l,u);else u=n[l.name],d(c.properties,n,u),e(l,u)};return{run:function e(t){var n,i,r,a,s,o,l;if(null===t)return t;if("object"!=typeof t)return t;for(n=0,i=c.length;n<i;n+=1)"root"===c[n]&&(s=u[n],h(s,o=t));for(a in t)if(t.hasOwnProperty(a)&&"__children"!=a){if(-1!==(r=c.indexOf(a)))if((s=u[r]).isArray)for(n=0,i=(l=t[a+"_asArray"]).length;n<i;n+=1)o=l[n],h(s,o);else o=t[a],h(s,o);e(t[a])}return t}}},t.exports=n.default},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(S){S=S||{},void 0===S.escapeMode&&(S.escapeMode=!0),void 0===S.attributePrefix&&(S.attributePrefix="_"),S.arrayAccessForm=S.arrayAccessForm||"none",S.emptyNodeForm=S.emptyNodeForm||"text",void 0===S.enableToStringFunc&&(S.enableToStringFunc=!0),S.arrayAccessFormPaths=S.arrayAccessFormPaths||[],void 0===S.skipEmptyTextNodesForObj&&(S.skipEmptyTextNodesForObj=!0),void 0===S.stripWhitespaces&&(S.stripWhitespaces=!0),S.datetimeAccessFormPaths=S.datetimeAccessFormPaths||[],void 0===S.useDoubleQuotes&&(S.useDoubleQuotes=!1),S.xmlElementsFilter=S.xmlElementsFilter||[],S.jsonPropertiesFilter=S.jsonPropertiesFilter||[],void 0===S.keepCData&&(S.keepCData=!1),void 0===S.ignoreRoot&&(S.ignoreRoot=!1);var R={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function b(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function l(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function I(e,t,n,i){for(var r=0;r<e.length;r++){var a=e[r];if("string"==typeof a){if(a==i)break}else if(a instanceof RegExp){if(a.test(i))break}else if("function"==typeof a&&a(t,n,i))break}return r!=e.length}function C(e,t,n){switch(S.arrayAccessForm){case"property":e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]]}!(e[t]instanceof Array)&&0<S.arrayAccessFormPaths.length&&I(S.arrayAccessFormPaths,e,t,n)&&(e[t]=[e[t]])}function P(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");if(n.setHours(t[3],t[4],i[0]),1<i.length&&n.setMilliseconds(i[1]),t[6]&&t[7]){var r=60*t[6]+Number(t[7]);r=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*r:r),n.setMinutes(n.getMinutes()-r-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function w(e,t){if(e.nodeType==R.DOCUMENT_NODE){for(var n=new Object,i=e.childNodes,r=0;r<i.length;r++)(s=i[r]).nodeType==R.ELEMENT_NODE&&(S.ignoreRoot?n=w(s):(n={})[o=b(s)]=w(s));return n}if(e.nodeType==R.ELEMENT_NODE){(n=new Object).__cnt=0;var a=[];for(i=e.childNodes,r=0;r<i.length;r++){var s,o=b(s=i[r]);if(s.nodeType!=R.COMMENT_NODE){var l=t+"."+o;if(E=n,y=s.nodeType,T=o,A=l,!(y==R.ELEMENT_NODE&&0<S.xmlElementsFilter.length)||I(S.xmlElementsFilter,E,T,A))if(n.__cnt++,null==n[o]){var u=w(s,l);("#text"!=o||/[^\s]/.test(u))&&((c={})[o]=u,a.push(c)),n[o]=u,C(n,o,l)}else{var c;null!=n[o]&&(n[o]instanceof Array||(n[o]=[n[o]],C(n,o,l))),u=w(s,l),("#text"!=o||/[^\s]/.test(u))&&((c={})[o]=u,a.push(c)),n[o][n[o].length]=u}}}n.__children=a;for(var d=b(e),h=0;h<e.attributes.length;h++){var f=e.attributes[h];n.__cnt++;for(var p=f.value,_=0,g=S.matchers.length;_<g;_++){var m=S.matchers[_];m.test(f,d)&&(p=m.converter(f.value))}n[S.attributePrefix+f.name]=p}var v=e.prefix;return null!=v&&""!=v&&(n.__cnt++,n.__prefix=v),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),S.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==S.arrayAccessForm&&delete n["#text_asArray"],n.__text=function(e,t,n){if(0<S.datetimeAccessFormPaths.length){var i=n.split(".#")[0];return I(S.datetimeAccessFormPaths,e,t,i)?P(e):e}return e}(n.__text,o,t+"."+o)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==S.arrayAccessForm&&delete n["#cdata-section_asArray"]),0==n.__cnt&&"text"==S.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||S.keepCData?1<n.__cnt&&null!=n.__text&&S.skipEmptyTextNodesForObj&&(S.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!S.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}if(e.nodeType==R.TEXT_NODE||e.nodeType==R.CDATA_SECTION_NODE)return e.nodeValue;var E,y,T,A}function u(e,t,n,i){var r="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var a=0;a<n.length;a++){var s=n[a],o=e[s];S.escapeMode&&(o=l(o)),r+=" "+s.substr(S.attributePrefix.length)+"=",S.useDoubleQuotes?r+='"'+o+'"':r+="'"+o+"'"}return r+=i?"/>":">"}function c(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function d(e,t){return"property"==S.arrayAccessForm&&(n=t.toString(),i="_asArray",-1!==n.indexOf(i,n.length-i.length))||0==t.toString().indexOf(S.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function;var n,i}function h(e){var t=0;if(e instanceof Object)for(var n in e)d(e,n)||t++;return t}function f(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(S.attributePrefix)&&t.push(n);return t}function p(e){var t,n,i="";return e instanceof Object?i+=(n="",null!=(t=e).__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(S.escapeMode?n+=l(t.__text):n+=t.__text),n):null!=e&&(S.escapeMode?i+=l(e):i+=e),i}function _(e,t){return""===e?t:e+"."+t}function g(e,t,n,i){var r="";if(0==e.length)r+=u(e,t,n,!0);else for(var a=0;a<e.length;a++)r+=u(e[a],t,f(e[a]),!1),r+=m(e[a],_(i,t)),r+=c(e[a],t);return r}function m(e,t){var n,i,r,a="";if(0<h(e))for(var s in e)if(!d(e,s)&&(""==t||(n=e,r=_(t,i=s),0==S.jsonPropertiesFilter.length||""==r||I(S.jsonPropertiesFilter,n,i,r)))){var o=e[s],l=f(o);null==o||null==o?a+=u(o,s,l,!0):o instanceof Object?o instanceof Array?a+=g(o,s,l,t):o instanceof Date?(a+=u(o,s,l,!1),a+=o.toISOString(),a+=c(o,s)):0<h(o)||null!=o.__text||null!=o.__cdata?(a+=u(o,s,l,!1),a+=m(o,_(t,s)),a+=c(o,s)):a+=u(o,s,l,!0):(a+=u(o,s,l,!1),a+=p(o),a+=c(o,s))}return a+=p(e)}this.parseXmlString=function(e){var t,n=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;if(window.DOMParser){var i=new window.DOMParser,r=null;if(!n)try{r=i.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){r=null}try{t=i.parseFromString(e,"text/xml"),null!=r&&0<t.getElementsByTagNameNS(r,"parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?P(e):e},this.xml2json=function(e){return w(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return m(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}},t.exports=n.default},{}],5:[function(u,e,c){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(c,"__esModule",{value:!0});var n=t(u(52)),i=t(u(104)),r=t(u(73)),a=t(u(54)),s=u(11),o="undefined"!=typeof window&&window||e,l=o.dashjs;l||(l=o.dashjs={}),l.MediaPlayer=n.default,l.Protection=i.default,l.MetricsReporting=r.default,l.MediaPlayerFactory=a.default,l.Version=(0,s.getVersionString)(),c.default=l,c.MediaPlayer=n.default,c.Protection=i.default,c.MetricsReporting=r.default,c.MediaPlayerFactory=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{104:104,11:11,52:52,54:54,73:73}],6:[function(e,t,n){var r={parseBuffer:function(e){return new a(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(s.prototype._boxProcessors[e]=t)},createFile:function(){return new a},createBox:function(e,t,n){var i=s.create(e);return t&&t.append(i,n),i},createFullBox:function(e,t,n){var i=r.createBox(e,t,n);return i.version=0,i.flags=0,i},Utils:{}};r.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var i=[],r=0;if("utf-8"===n)for(;r<e.byteLength;){var a=e.getUint8(r++);a<128||(a<224?a=(31&a)<<6:(a<240?a=(15&a)<<12:(a=(7&a)<<18,a|=(63&e.getUint8(r++))<<12),a|=(63&e.getUint8(r++))<<6),a|=63&e.getUint8(r++)),i.push(String.fromCharCode(a))}else for(;r<e.byteLength;)i.push(String.fromCharCode(e.getUint8(r++)));return i.join("")},r.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):(i<2048?t.push(192|i>>6):(i<65536?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|63&i>>12)),t.push(128|63&i>>6)),t.push(128|63&i))}return t},r.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var i,r=-1;if("number"==typeof n)r=n;else{if("string"==typeof n)i=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);i=n.type}for(var a=0;a<e.boxes.length;a++)if(i===e.boxes[a].type){r=a+1;break}}e.boxes.splice(r,0,t)}else e.boxes.push(t)},void 0!==n&&(n.parseBuffer=r.parseBuffer,n.addBoxProcessor=r.addBoxProcessor,n.createFile=r.createFile,n.createBox=r.createBox,n.createFullBox=r.createFullBox,n.Utils=r.Utils),r.Cursor=function(e){this.offset=void 0===e?0:e};var a=function(e){this._cursor=new r.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};a.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},a.prototype.fetchAll=function(e,t){var n=[];return a._sweep.call(this,e,n,t),n},a.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=s.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},a._sweep=function(e,t,n){for(var i in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;a._sweep.call(this.boxes[i],e,t,n)}},a.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,e=this._cursor.offset=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},a.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)};var s=function(){this._cursor=new r.Cursor};s.parse=function(e){var t=new s;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},s.create=function(e){var t=new s;return t.type=e,t.boxes=[],t},s.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],s.prototype._boxProcessors={},s.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},s.prototype._procFieldArray=function(e,t,n,i){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e][r]=this._readField(n,i);else for(r=0;r<this[e].length;r++)this._writeField(n,i,this[e][r])},s.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},s.prototype._procEntries=function(e,t,n){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e].push({}),n.call(this,this[e][i]);else for(i=0;i<t;i++)n.call(this,this[e][i])},s.prototype._procSubEntries=function(e,t,n,i){var r;if(this._parsing)for(e[t]=[],r=0;r<n;r++)e[t].push({}),i.call(this,e[t][r]);else for(r=0;r<n;r++)i.call(this,e[t][r])},s.prototype._procEntryField=function(e,t,n,i){this._parsing?e[t]=this._readField(n,i):this._writeField(n,i,e[t])},s.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(s.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},s.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},s.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var i=this._raw.getInt32(n),r=this._raw.getInt32(n+4);t=i*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},s.prototype._readUint=function(e){var t,n,i=null,r=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:i=this._raw.getUint8(r);break;case 16:i=this._raw.getUint16(r);break;case 24:i=((t=this._raw.getUint16(r))<<8)+(n=this._raw.getUint8(r+2));break;case 32:i=this._raw.getUint32(r);break;case 64:t=this._raw.getUint32(r),n=this._raw.getUint32(r+4),i=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,i},s.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var i=this._readUint(8);t+=String.fromCharCode(i)}return t},s.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},s.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},s.prototype._readData=function(e){var t=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset),n=new DataView(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n},s.prototype._readUTF8String=function(){var e=this._readData();return r.Utils.dataViewToString(e)},s.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},s.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},s.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(s.parse(this))},s.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},s.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},s.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},s.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var i=Math.floor(t/Math.pow(2,32)),r=t-i*Math.pow(2,32);this._rawo.setUint32(n,i),this._rawo.setUint32(n+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},s.prototype._writeUint=function(e,t){if(this._rawo){var n,i,r=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(r,t);break;case 16:this._rawo.setUint16(r,t);break;case 24:n=(16776960&t)>>8,i=255&t,this._rawo.setUint16(r,n),this._rawo.setUint8(r+2,i);break;case 32:this._rawo.setUint32(r,t);break;case 64:i=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(r,n),this._rawo.setUint32(r+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},s.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},s.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},s.prototype._writeTemplate=function(e,t){var n=Math.floor(t),i=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,i)},s.prototype._writeData=function(e){if(e instanceof Array&&(e=new DataView(Uint8Array.from(e).buffer)),e instanceof Uint8Array&&(e=new DataView(e.buffer)),this._rawo){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.byteLength;n++)this._rawo.setUint8(t+n,e.getUint8(n));this._cursor.offset+=e.byteLength}else this.size+=e.byteLength},s.prototype._writeUTF8String=function(e){var t=r.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)n.setUint8(i,t[i]);else this.size+=t.length},s.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},s.prototype._boxProcessors.avc1=s.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},s.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},s.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},s.prototype._boxProcessors.emsg=function(){this._procFullBox(),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("message_data","data",-1)},s.prototype._boxProcessors.free=s.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},s.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},s.prototype._boxProcessors.ftyp=s.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},s.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},s.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},s.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},s.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},s.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},s.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},s.prototype._boxProcessors.mp4a=s.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},s.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},s.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},s.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},s.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},s.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},s.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},s.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},s.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},s.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},s.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},s.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},s.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},s.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},s.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},s.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},s.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},s.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},s.prototype._boxProcessors["url "]=s.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},s.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},s.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},s.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},s.prototype._boxProcessors.vtte=function(){}},{}],7:[function(e,t,n){var i=n.decimalAdjust=function(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))};t.exports={round10:function(e,t){return i("round",e,t)},floor10:function(e,t){return i("floor",e,t)},ceil10:function(e,t){return i("ceil",e,t)}},t.exports.polyfill=function(){Math.round10||(Math.round10=t.exports.round10),Math.floor10||(Math.floor10=t.exports.floor10),Math.ceil10||(Math.ceil10=t.exports.ceil10)}},{}],8:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=i(e(9)),o=i(e(13)),r=i(e(10));function a(){var e,t=this.context,n=(0,s.default)(t).getInstance(),i=void 0,r=void 0,a=void 0;return e={log:function(){var t="",e=null;r&&(e=(new Date).getTime(),t+="["+(e-a)+"]"),0<t.length&&(t+=" "),Array.apply(null,arguments).forEach(function(e){t+=e+" "}),i&&console.log(t),n.trigger(o.default.LOG,{message:t})},setLogTimestampVisible:function(e){r=e},setLogToBrowserConsole:function(e){i=e},getLogToBrowserConsole:function(){return i}},r=i=!0,a=(new Date).getTime(),e}a.__dashjs_factory_name="Debug",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,13:13,9:9}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){var a={};function s(e,n,i){var r=-1;return a[e]&&a[e].some(function(e,t){if(e&&e.callback===n&&(!i||i===e.scope))return r=t,!0}),r}return{on:function(n,e,t){var i=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if(!n)throw new Error("event type cannot be null or undefined");if(!e||"function"!=typeof e)throw new Error("listener must be a function: "+e);if(!(0<=s(n,e,t))){a[n]=a[n]||[];var r={callback:e,scope:t,priority:i};a[n].some(function(e,t){if(e&&i>e.priority)return a[n].splice(t,0,r),!0})||a[n].push(r)}},off:function(e,t,n){if(e&&t&&a[e]){var i=s(e,t,n);i<0||(a[e][i]=null)}},trigger:function(e,t){if(e&&a[e]){if((t=t||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,a[e]=a[e].filter(function(e){return e}),a[e].forEach(function(e){if(e)return e.callback.call(e.scope,t)})}},reset:function(){a={}}}}s.__dashjs_factory_name="EventBus";var o=a.default.getSingletonFactory(s);o.EVENT_PRIORITY_LOW=0,o.EVENT_PRIORITY_HIGH=5e3,n.default=o,t.exports=n.default},{10:10}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){var o=void 0,e=[],a=[];function i(e,t){for(var n in a){var i=a[n];if(i.context===e&&i.name===t)return i.instance}return null}function r(e,t,n,i){var r=l(n)[e];if(r){var a=r.instance;if(!r.override)return a.apply({context:n,factory:o},i);for(var s in a=a.apply({context:n,factory:o,parent:t},i))t.hasOwnProperty(s)&&(t[s]=a[s])}return t}function l(t){var n=void 0;return e.forEach(function(e){e===t&&(n=e)}),n||(n=e.push(t)),n}return o={extend:function(e,t,n,i){var r=l(i);!r[e]&&t&&(r[e]={instance:t,override:n})},getSingletonInstance:i,setSingletonInstance:function(e,t,n){for(var i in a){var r=a[i];if(r.context===e&&r.name===t)return void(a[i].instance=n)}a.push({name:t,context:e,instance:n})},getSingletonFactory:function(n){return function(e){var t=void 0;return void 0===e&&(e={}),{getInstance:function(){return t||(t=i(e,n.__dashjs_factory_name)),t||(t=r(n.__dashjs_factory_name,n.apply({context:e},arguments),e,arguments),a.push({name:n.__dashjs_factory_name,context:e,instance:t})),t}}}},getClassFactory:function(t){return function(e){return void 0===e&&(e={}),{create:function(){return r(t.__dashjs_factory_name,t.apply({context:e},arguments),e,arguments)}}}}}}();n.default=i,t.exports=n.default},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=function(){return i};var i="2.5.0"},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(14),a=(i=r)&&i.__esModule?i:{default:i},s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),t}();n.default=s,t.exports=n.default},{14:14}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(12),a=(i=r)&&i.__esModule?i:{default:i},s=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),t}());n.default=s,t.exports=n.default},{12:12}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,i=!!t&&t.publicOnly;for(var r in e)!e.hasOwnProperty(r)||this[r]&&!n||i&&-1===e[r].indexOf("public_")||(this[r]=e[r])}}}]),e}();n.default=r,t.exports=n.default},{}],15:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=i(e(175)),c=i(e(170)),d=i(e(172)),h=i(e(169)),f=i(e(42)),r=i(e(10)),p=i(e(2)),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e(20));function a(){var g=void 0,a=void 0,m=void 0;function s(e,t){return t.getRepresentationForQuality(e.quality)}function l(e){return m&&e&&m[e.streamInfo.id]?m[e.streamInfo.id][e.index]:null}function v(e){for(var t=a.length,n=0;n<t;n++){var i=a[n];if(e.id===i.id)return i}return null}function r(e,t){var n=new u.default,i=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],r=g.getRepresentationFor(t.index,i);return n.id=t.id,n.quality=t.index,n.bandwidth=g.getBandwidth(r),n.DVRWindow=t.segmentAvailabilityRange,n.fragmentDuration=t.segmentDuration||(t.segments&&0<t.segments.length?t.segments[0].duration:NaN),n.MSETimeOffset=t.MSETimeOffset,n.useCalculatedLiveEdgeTime=t.useCalculatedLiveEdgeTime,n.mediaInfo=E(e,t.adaptation),n}function E(e,t){var n,i=new c.default,r=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];return i.id=t.id,i.index=t.index,i.type=t.type,i.streamInfo=o(e,t.period),i.representationCount=g.getRepresentationCount(r),i.lang=g.getLanguageForAdaptation(r),n=g.getViewpointForAdaptation(r),i.viewpoint=n?n.value:void 0,i.accessibility=g.getAccessibilityForAdaptation(r).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==p.default&&(n=t?"cea-608:"+t:"cea-608",i.embeddedCaptions=!0),n}),i.audioChannelConfiguration=g.getAudioChannelConfigurationForAdaptation(r).map(function(e){return e.value}),i.roles=g.getRolesForAdaptation(r).map(function(e){return e.value}),i.codec=g.getCodec(r),i.mimeType=g.getMimeType(r),i.contentProtection=g.getContentProtectionData(r),i.bitrateList=g.getBitrateListForAdaptation(r),i.contentProtection&&i.contentProtection.forEach(function(e){e.KID=g.getKID(e)}),i.isText=g.getIsTextTrack(i.mimeType),i}function y(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type="embeddedText",e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=t+" "+n,e.roles=["caption"]}function o(e,t){var n=new d.default;return n.id=t.id,n.index=t.index,n.start=t.start,n.duration=t.duration,n.manifestInfo=i(e,t.mpd),n.isLast=1===e.Period_asArray.length||Math.abs(n.start+n.duration-n.manifestInfo.duration)<1,n.isFirst=1===e.Period_asArray.length||g.getRegularPeriods(e,g.getMpd(e))[0].id===t.id,n}function i(e,t){var n=new h.default;return n.DVRWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=g.getDuration(e),n.isDynamic=g.getIsDynamic(e),n}return{initialize:function(){a=[],m={}},convertDataToTrack:r,convertDataToMedia:E,convertDataToStream:o,getDataForTrack:s,getDataForMedia:l,getDataForStream:v,getStreamsInfo:function(e){if(!e)return null;var t=[],n=g.getMpd(e);a=g.getRegularPeriods(e,n),m={};for(var i=0,r=a.length;i<r;i++)t.push(o(e,a[i]));return t},getManifestInfo:function(e){return i(e,g.getMpd(e))},getMediaInfoForType:function(e,t,n){var i=g.getAdaptationForType(e,t.index,n,t);if(!i)return null;var r=v(t),a=r.id,s=g.getIndexForAdaptation(i,e,t.index);return m[a]=m[a]||g.getAdaptationsForPeriod(e,r),E(e,m[a][s])},getAllMediaInfoForType:function(e,t,n){var i,r,a,s,o,l,u=v(t),c=u.id,d=g.getAdaptationsForType(e,t.index,"embeddedText"!==n?n:"video"),h=[];if(!d)return h;for(m[c]=m[c]||g.getAdaptationsForPeriod(e,u),s=0,l=d.length;s<l;s++){if(i=d[s],a=g.getIndexForAdaptation(i,e,t.index),r=E(e,m[c][a]),"embeddedText"===n){var f=r.accessibility.length;for(o=0;o<f;o++)if(r){var p=r.accessibility[o];if(0===p.indexOf("cea-608:")){var _=p.substring(8).split(";");if("CC"===_[0].substring(0,2))for(o=0;o<_.length;o++)r||(r=E.call(this,e,m[c][a])),y(r,_[o].substring(0,3),_[o].substring(4)),h.push(r),r=null;else for(o=0;o<_.length;o++)r||(r=E.call(this,e,m[c][a])),y(r,"CC"+(o+1),_[o]),h.push(r),r=null}else 0===p.indexOf("cea-608")&&(y(r,"CC1","eng"),h.push(r),r=null)}}r&&"embeddedText"!==n&&h.push(r)}return h},getCurrentRepresentationInfo:function(e,t){var n=t.getCurrentRepresentation();return n?r(e,n):null},getRepresentationInfoForQuality:function(e,t,n){var i=t.getRepresentationForQuality(n);return i?r(e,i):null},updateData:function(e,t){var n,i,r=v(t.getStreamInfo()),a=t.getMediaInfo(),s=l(a),o=t.getType();i=(n=a.id)?g.getAdaptationForId(n,e,r.index):g.getAdaptationForIndex(a.index,e,r.index),t.getRepresentationController().updateData(i,s,o)},getInitRequest:function(e,t){var n=e.getRepresentationController().getRepresentationForQuality(t);return e.getIndexHandler().getInitRequest(n)},getNextFragmentRequest:function(e,t){var n=s(t,e.getRepresentationController());return e.getIndexHandler().getNextSegmentRequest(n)},getFragmentRequestForTime:function(e,t,n,i){var r=s(t,e.getRepresentationController());return e.getIndexHandler().getSegmentRequestForTime(r,n,i)},generateFragmentRequestForTime:function(e,t,n){var i=s(t,e.getRepresentationController());return e.getIndexHandler().generateSegmentRequestForTime(i,n)},getIndexHandlerTime:function(e){return e.getIndexHandler().getCurrentTime()},setIndexHandlerTime:function(e,t){return e.getIndexHandler().setCurrentTime(t)},getEventsFor:function(e,t,n){var i=[];return t instanceof d.default?i=g.getEventsForPeriod(e,v(t)):t instanceof c.default?i=g.getEventStreamForAdaptationSet(e,l(t)):t instanceof u.default&&(i=g.getEventStreamForRepresentation(e,s(t,n.getRepresentationController()))),i},getEvent:function(e,t,n){var i=new f.default,r=e.scheme_id_uri,a=e.value,s=e.timescale,o=e.presentation_time_delta,l=e.event_duration,u=e.id,c=e.message_data,d=n*s+o;return t[r]?(i.eventStream=t[r],i.eventStream.value=a,i.eventStream.timescale=s,i.duration=l,i.id=u,i.presentationTime=d,i.messageData=c,i.presentationTimeDelta=o,i):null},setConfig:function(e){e&&e.dashManifestModel&&(g=e.dashManifestModel)},reset:function(){a=[],m={}},metricsList:_}}a.__dashjs_factory_name="DashAdapter",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,169:169,170:170,172:172,175:175,2:2,20:20,42:42}],16:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var w=i(e(166)),O=i(e(165)),D=e(182),N=i(e(13)),M=i(e(9)),r=i(e(10)),L=i(e(8)),x=i(e(159)),k=i(e(46)),F=e(36),U=i(e(35));function a(t){var n=this.context,l=(0,L.default)(n).getInstance().log,u=(0,M.default)(n).getInstance(),s=(0,x.default)(n).getInstance(),a=t.segmentBaseLoader,c=t.timelineConverter,r=t.dashMetrics,o=t.metricsModel,d=t.baseURLController,e=void 0,h=void 0,f=void 0,p=void 0,_=void 0,i=void 0,g=void 0,m=void 0,v=void 0;function E(e,t,n){var i,r,a=d.resolve(n.path);return a&&t!==a.url&&s.isRelative(t)?(i=a.url,r=a.serviceLocation,t&&(i=s.resolve(t,i))):i=t,!s.isRelative(i)&&(e.url=i,e.serviceLocation=r,!0)}function y(e){var t=!1;if(p||h!==e.availableSegmentsNumber){var n=(0,F.getSegmentByIndex)(h,e);if(n){var i=n.presentationStartTime-e.adaptation.period.start,r=e.adaptation.period.duration;l(e.segmentInfoType+": "+i+" / "+r),t=("SegmentTimeline"!==e.segmentInfoType||!p)&&r<=i}}else t=!0;return t}function T(e){return v.getSegments(e,f,h,A)}function A(e,t){if((e.segments=t)&&0<t.length&&(g=isNaN(g)?t[0].presentationStartTime:Math.min(t[0].presentationStartTime,g)),p&&isNaN(c.getExpectedLiveEdge())){var n=t[t.length-1].presentationStartTime,i=o.getMetricsFor("stream");c.setExpectedLiveEdge(n),o.updateManifestUpdateInfo(r.getCurrentManifestUpdate(i),{presentationStartTime:n})}}function S(e){if(!e)throw new O.default("no representation");return e.segments=null,T(e),e}function R(e,t,n){var i,r,a,s,o,l=t.segments,u=l?l.length:null,c=-1;if(l&&0<u)for(o=0;o<u;o++)if(a=(r=l[o]).presentationStartTime,s=r.duration,a<=e+(i=null==n?s/2:n)&&e-i<a+s){c=r.availabilityIdx;break}return c}function b(e){if(null==e)return null;var t,n=new w.default,i=e.representation,r=i.adaptation.period.mpd.manifest.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index].Representation_asArray[i.index].bandwidth,a=e.media;return a=(0,F.replaceTokenForTemplate)(a,"Number",e.replacementNumber),a=(0,F.replaceTokenForTemplate)(a,"Time",e.replacementTime),a=function(e,t){if(null===t||null===e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)}(a=(0,F.replaceTokenForTemplate)(a,"Bandwidth",r),i.id),a=(t=a)?t.split("$$").join("$"):t,n.mediaType=_,n.type=D.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=e.mediaRange,n.startTime=e.presentationStartTime,n.duration=e.duration,n.timescale=i.timescale,n.availabilityStartTime=e.availabilityStartTime,n.availabilityEndTime=e.availabilityEndTime,n.wallStartTime=e.wallStartTime,n.quality=i.index,n.index=e.availabilityIdx,n.mediaInfo=m.getMediaInfo(),n.adaptationIndex=i.adaptation.index,E(n,a,i)?n:void 0}function I(e,t,n){var i,r=h,a=!!n&&n.keepIdx,s=n?n.timeThreshold:null,o=!(!n||!n.ignoreIsFinished);return e?(f!==t&&l("Getting the request for "+_+" time : "+(f=t)),T(e),(h=R(t,e,s))<0&&(T(e),h=R(t,e,s)),0<h&&l("Index for "+_+" time "+t+" is "+h),!o&&y(e)?((i=new w.default).action=w.default.ACTION_COMPLETE,i.index=h,i.mediaType=_,i.mediaInfo=m.getMediaInfo(),l("Signal complete.",i)):i=b((0,F.getSegmentByIndex)(h,e)),a&&0<=r&&(h="SegmentTimeline"===e.segmentInfoType&&p?h:r),i):null}function C(e){var t=e.representation;t.segments&&u.trigger(N.default.REPRESENTATION_UPDATED,{sender:this,representation:t})}function P(e){if(!e.error&&_===e.mediaType){var t,n,i,r,a=e.segments,s=e.representation,o=[],l=0;for(t=0,n=a.length;t<n;t++)i=a[t],r=(0,F.getTimeBasedSegment)(c,p,s,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,l),o.push(r),r=null,l++;s.segmentAvailabilityRange={start:o[0].presentationStartTime,end:o[n-1].presentationStartTime},s.availableSegmentsNumber=n,A(s,o),k.default.hasInitialization(s)&&u.trigger(N.default.REPRESENTATION_UPDATED,{sender:this,representation:s})}}return e={initialize:function(e){_=(m=e).getType(),p=m.isDynamic(),v=(0,U.default)(n).create(t,p)},getStreamProcessor:function(){return m},getInitRequest:function(e){return e?function(e,t){var n=new w.default,i=e.adaptation.period,r=i.start;if(n.mediaType=t,n.type=D.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=c.calcAvailabilityStartTimeFromPresentationTime(r,i.mpd,p),n.availabilityEndTime=c.calcAvailabilityEndTimeFromPresentationTime(r+i.duration,i.mpd,p),n.quality=e.index,n.mediaInfo=m.getMediaInfo(),n.representationId=e.id,E(n,e.initialization,e))return n}(e,_):null},getSegmentRequestForTime:I,getNextSegmentRequest:function(e){var t,n;return e&&-1!==h?(f=null,l("Getting the next request at index: "+ ++h),y(e)?((t=new w.default).action=w.default.ACTION_COMPLETE,t.index=h,t.mediaType=_,t.mediaInfo=m.getMediaInfo(),l("Signal complete.")):(T(e),t=b(n=(0,F.getSegmentByIndex)(h,e)),!n&&p&&h--),t):null},generateSegmentRequestForTime:function(e,t){var n=(e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start)/2;return e.segments=null,e.segmentAvailabilityRange={start:t-n,end:t+n},I(e,t,{keepIdx:!1,ignoreIsFinished:!0})},updateRepresentation:function(e,t){var n,i=k.default.hasInitialization(e),r=k.default.hasSegments(e);if(e.segmentDuration||e.segments||S(e),e.segmentAvailabilityRange=null,e.segmentAvailabilityRange=c.calcSegmentAvailabilityRange(e,p),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)return n=new O.default(1,"no segments are available yet",{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void u.trigger(N.default.REPRESENTATION_UPDATED,{sender:this,representation:e,error:n});t||(h=-1),e.segmentDuration&&S(e),i||a.loadInitialization(e),r||a.loadSegments(e,_,e.indexRange),i&&r&&u.trigger(N.default.REPRESENTATION_UPDATED,{sender:this,representation:e})},setCurrentTime:function(e){i=e},getCurrentTime:function(){return i},getCurrentIndex:function(){return h},getEarliestTime:function(){return g},reset:function(){i=0,f=g=NaN,h=-1,m=_=p=v=null,u.off(N.default.INITIALIZATION_LOADED,C,e),u.off(N.default.SEGMENTS_LOADED,P,e)}},h=-1,i=0,g=NaN,u.on(N.default.INITIALIZATION_LOADED,C,e),u.on(N.default.SEGMENTS_LOADED,P,e),e}a.__dashjs_factory_name="DashHandler";var s=r.default.getClassFactory(a);s.SEGMENTS_UNAVAILABLE_ERROR_CODE=1,n.default=s,t.exports=n.default},{10:10,13:13,159:159,165:165,166:166,182:182,35:35,36:36,46:46,8:8,9:9}],17:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var c=e(182),d=i(e(98)),h=i(e(22)),r=i(e(10)),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e(20)),p=e(7);function a(){var l=this.context,r=(0,d.default)(l).getInstance();function n(e){return t(e,f.BUFFER_LEVEL)}function a(e){if(null===e)return null;var t,n=e.HttpList,i=null;if(null===n||n.length<=0)return null;for(t=n.length-1;0<=t;){if(n[t].responsecode){i=n[t];break}t--}return i}function s(e){return null===e?[]:e.HttpList?e.HttpList:[]}function t(e,t){if(null===e)return null;var n=e[t];if(null===n)return null;var i=n.length;return i<=0?null:n[i-1]}function o(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),i=0,r=n.length;i<r;i++){var a=n[i],s=a.indexOf(": ");0<s&&(t[a.substring(0,s)]=a.substring(s+2))}return t}function u(e,t,n){var i,r,a,s,o;if(e)for(i=e.AdaptationSet_asArray,s=0;s<i.length;s+=1)for(a=i[s].Representation_asArray,o=0;o<a.length;o+=1)if(t===(r=a[o]).id)return n?o:r;return null}return{getBandwidthForRepresentation:function(e,t){var n;return null===(n=u(r.getValue().Period_asArray[t],e))?null:n.bandwidth},getIndexForRepresentation:function(e,t){var n,i=r.getValue().Period_asArray[t];return null===(n=u(i,e,!0))?-1:n},getMaxIndexForBufferType:function(e,t){return function(e,t){var n,i,r,a,s,o;if(!e||!t)return-1;for(i=e.AdaptationSet_asArray,a=0;a<i.length;a+=1)if(n=i[a],r=n.Representation_asArray,s=n,o=t,(0,h.default)(l).getInstance().getIsTypeOf(s,o))return r.length;return-1}(r.getValue().Period_asArray[t],e)},getCurrentRepresentationSwitch:function(e){return t(e,f.TRACK_SWITCH)},getLatestBufferLevelVO:n,getCurrentBufferLevel:function(e){var t=n(e);return t?(0,p.round10)(t.level/1e3,-3):0},getCurrentHttpRequest:a,getHttpRequests:s,getCurrentDroppedFrames:function(e){return t(e,f.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return t(e,f.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return t(e,f.DVR_INFO)},getCurrentManifestUpdate:function(e){return t(e,f.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){if(null===e)return null;var n,i=a(e);return null===i||null===i._responseHeaders?null:void 0===(n=o(i._responseHeaders))[t]?null:n[t]},getLatestMPDRequestHeaderValueByID:function(e,t){var n,i,r,a={};if(null===e)return null;for(r=(n=s(e)).length-1;0<=r;r--)if((i=n[r]).type===c.HTTPRequest.MPD_TYPE){a=o(i._responseHeaders);break}return void 0===a[t]?null:a[t]},getRequestsQueue:function(e){return e.RequestsQueue}}}a.__dashjs_factory_name="DashMetrics",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,182:182,20:20,22:22,7:7,98:98}],18:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(157)),R=i(e(47)),a=i(e(165)),l=i(e(152)),_=i(e(13)),u=i(e(9)),c=i(e(147)),s=i(e(10)),d=i(e(8)),g=e(182),m=i(e(166)),v=i(e(57));function o(){var e=this.context,A=(0,d.default)(e).getInstance().log,h=(0,u.default)(e).getInstance(),t=void 0,S=void 0,n=void 0,i=void 0,s=void 0,f=void 0;function p(e){if(e.url){var t=new m.default;return t.type=e.init?g.HTTPRequest.INIT_SEGMENT_TYPE:g.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function o(e,t,n){e?h.trigger(_.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):h.trigger(_.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new a.default(null,"error loading segments",null)})}return{setConfig:function(e){e.baseURLController&&(f=e.baseURLController),e.metricsModel&&(i=e.metricsModel)},initialize:function(){t=(0,l.default)(e).getInstance(),S=(0,c.default)(e).getInstance(),n=(0,r.default)(e).getInstance(),s=(0,v.default)(e).create({errHandler:t,metricsModel:i,requestModifier:n})},loadInitialization:function o(l,e){var u=null,c=null,t=f.resolve(l.path),d=e||{init:!0,url:t?t.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};A("Start searching for initialization.");var n=p(d);s.load({request:n,success:function(e){var t,n,i,r,a,s;d.bytesLoaded=d.range.end,c=S.parse(e),r=(t=c).getBox("ftyp"),a=t.getBox("moov"),s=null,A("Searching for initialization."),a&&a.isComplete&&(n=r?r.offset:a.offset,i=a.offset+a.size-1,A("Found the initialization.  Range: "+(s=n+"-"+i))),(u=s)?(l.range=u,h.trigger(_.default.INITIALIZATION_LOADED,{representation:l})):(d.range.end=d.bytesLoaded+d.bytesToLoad,o(l,d))},error:function(){h.trigger(_.default.INITIALIZATION_LOADED,{representation:l})}}),A("Perform init search: "+d.url)},loadSegments:function _(g,m,e,t,v){if(e&&(void 0===e.start||void 0===e.end)){var n=e?e.toString().split("-"):null;e=n?{start:parseFloat(n[0]),end:parseFloat(n[1])}:null}v=v||o;var E=null,y=null,i=!!e,r=f.resolve(g.path),T={init:!1,url:r?r.url:void 0,range:i?e:{start:0,end:1500},searching:!i,bytesLoaded:t?t.bytesLoaded:0,bytesToLoad:1500},a=p(T);s.load({request:a,success:function(e){var t=T.bytesToLoad,n=e.byteLength;if(T.bytesLoaded=T.range.end-T.range.start,E=S.parse(e),(y=E.getBox("sidx"))&&y.isComplete){var i,r,a=y.references;if(null!=a&&0<a.length&&(i=1===a[0].reference_type),i){var s,o,l,u;A("Initiate multiple SIDX load."),T.range.end=T.range.start+y.size;var c=[],d=0,h=(y.offset||T.range.start)+y.size,f=function(e){e?(c=c.concat(e),o<=++d&&v(c,g,m)):v(null,g,m)};for(s=0,o=a.length;s<o;s++)u=(l=h)+a[s].referenced_size-1,h+=a[s].referenced_size,_(g,null,{start:l,end:u},T,f)}else A("Parsing segments from SIDX."),r=function(e,t){for(var n,i,r,a,s=e.references,o=s.length,l=e.timescale,u=e.earliest_presentation_time,c=t.range.start+e.offset+e.first_offset+e.size,d=[],h=0;h<o;h++)r=s[h].subsegment_duration,a=s[h].referenced_size,(n=new R.default).duration=r,n.startTime=u,n.timescale=l,i=c+a-1,n.mediaRange=c+"-"+i,d.push(n),u+=r,c+=a;return d}(y,T),v(r,g,m)}else{if(y)T.range.start=y.offset||T.range.start,T.range.end=T.range.start+(y.size||t);else{if(n<T.bytesLoaded)return void v(null,g,m);var p=E.getLastBox();p&&p.size?(T.range.start=p.offset+p.size,T.range.end=T.range.start+t):T.range.end+=t}_(g,m,T.range,T,v)}},error:function(){v(null,g,m)}}),A("Perform SIDX load: "+T.url)},reset:function(){s.abort(),n=S=t=s=null}}}o.__dashjs_factory_name="SegmentBaseLoader",n.default=s.default.getSingletonFactory(o),t.exports=n.default},{10:10,13:13,147:147,152:152,157:157,165:165,166:166,182:182,47:47,57:57,8:8,9:9}],19:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var c=i(e(13)),r=i(e(9)),y=i(e(151)),a=i(e(10)),s=i(e(8)),d=i(e(152)),h=i(e(157)),f=i(e(47)),T=e(182),A=i(e(166)),S=i(e(57));function o(){var e,p=this.context,_=(0,s.default)(p).getInstance().log,o=(0,r.default)(p).getInstance(),g=void 0,t=void 0,n=void 0,i=void 0,m=void 0,l=void 0;function v(e,t,n,i){var r,a,s=void 0,o=void 0,l=void 0,u=void 0,c=void 0,d=void 0;for(o=[],u=0,a=(r=function(e){var t,n=[],i=void 0,r=void 0,a=(0,y.default)(p).create({data:e}),s=void 0;for(a.consumeTag(g.Segment.Cues),t=a.getMatroskaCodedNum();a.moreData()&&a.consumeTagAndSize(g.Segment.Cues.CuePoint,!0);){for((i={}).CueTime=a.parseTag(g.Segment.Cues.CuePoint.CueTime),i.CueTracks=[];a.moreData()&&a.consumeTagAndSize(g.Segment.Cues.CuePoint.CueTrackPositions,!0);){if((r={}).Track=a.parseTag(g.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===r.Track)throw new Error("Cue track cannot be 0");r.ClusterPosition=a.parseTag(g.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),a.getPos()+4>t||!a.consumeTag(g.Segment.Cues.CuePoint.CueTrackPositions.CueBlockNumber,!0)||(s=a.getMatroskaCodedNum(),r.BlockNumber=a.getMatroskaUint(s)),i.CueTracks.push(r)}if(0===i.CueTracks.length)throw new Error("Mandatory cuetrack not found");n.push(i)}if(0===n.length)throw new Error("mandatory cuepoint not found");return n}(e)).length;u<a;u+=1)l=new f.default,s=0,s=u<r.length-1?r[u+1].CueTime-r[u].CueTime:i-r[u].CueTime,l.duration=s,l.startTime=r[u].CueTime,l.timescale=1e3,c=r[u].CueTracks[0].ClusterPosition+t,d=u<r.length-1?r[u+1].CueTracks[0].ClusterPosition+t-1:n-1,l.mediaRange=c+"-"+d,o.push(l);return _("Parsed cues: "+o.length+" cues."),o}function u(e,t,n){e?o.trigger(c.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):o.trigger(c.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new Error(null,"error loading segments",null)})}function E(e){var t=new A.default;return t.type=e.init?T.HTTPRequest.INIT_SEGMENT_TYPE:T.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}return e={setConfig:function(e){if(!e.baseURLController||!e.metricsModel)throw new Error("Missing config parameter(s)");l=e.baseURLController,i=e.metricsModel},initialize:function(){t=(0,d.default)(p).getInstance(),n=(0,h.default)(p).getInstance(),m=(0,S.default)(p).create({errHandler:t,metricsModel:i,requestModifier:n})},loadInitialization:function(e,t){var n=null,i=l.resolve(e.path),r=i?i.url:void 0,a=e.range.split("-"),s=t||{range:{start:parseFloat(a[0]),end:parseFloat(a[1])},request:n,url:r,init:!0};_("Start loading initialization."),n=E(s),m.load({request:n,success:function(){o.trigger(c.default.INITIALIZATION_LOADED,{representation:e})},error:function(){o.trigger(c.default.INITIALIZATION_LOADED,{representation:e})}}),_("Perform init load: "+s.url)},loadSegments:function(t,n,i,r){var e=null,a=l.resolve(t.path),s=a?a.url:void 0;r=r||u,e=E({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:e,url:s,init:!1}),_("Parsing ebml header"),m.load({request:e,success:function(e){!function(e,t,n,i){var r,a=(0,y.default)(p).create({data:e}),s=void 0,o=void 0,l=n.split("-"),u=null,c={url:t,range:{start:parseFloat(l[0]),end:parseFloat(l[1])},request:u},d=void 0;for(_("Parse EBML header: "+c.url),a.skipOverElement(g.EBML),a.consumeTag(g.Segment),d=a.getMatroskaCodedNum(),d+=a.getPos(),r=a.getPos();a.moreData()&&!a.consumeTagAndSize(g.Segment.Info,!0);)if(!(a.skipOverElement(g.Segment.SeekHead,!0)||a.skipOverElement(g.Segment.Tracks,!0)||a.skipOverElement(g.Segment.Cues,!0)||a.skipOverElement(g.Void,!0)))throw new Error("no valid top level element found");for(;void 0===s;){var h=a.getMatroskaCodedNum(!0),f=a.getMatroskaCodedNum();switch(h){case g.Segment.Info.Duration.tag:s=a[g.Segment.Info.Duration.parse](f);break;default:a.setPos(a.getPos()+f)}}u=E(c),m.load({request:u,success:function(e){o=v(e,r,d,s),i(o)},error:function(){_("Download Error: Cues "+c.url),i(null)}}),_("Perform cues load: "+c.url+" bytes="+c.range.start+"-"+c.range.end)}(e,s,i,function(e){r(e,t,n)})},error:function(){r(null,t,n)}})},reset:function(){_=n=t=null}},g={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"},CueBlockNumber:{tag:21368}}}}},Void:{tag:236,required:!0}},e}o.__dashjs_factory_name="WebmSegmentBaseLoader",n.default=a.default.getSingletonFactory(o),t.exports=n.default},{10:10,13:13,151:151,152:152,157:157,166:166,182:182,47:47,57:57,8:8,9:9}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.TCP_CONNECTION="TcpList";n.HTTP_REQUEST="HttpList";n.TRACK_SWITCH="RepSwitchList";n.BUFFER_LEVEL="BufferLevel";n.BUFFER_STATE="BufferState";n.DVR_INFO="DVRInfo";n.DROPPED_FRAMES="DroppedFrames";n.SCHEDULING_INFO="SchedulingInfo";n.REQUESTS_QUEUE="RequestsQueue";n.MANIFEST_UPDATE="ManifestUpdate";n.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo";n.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo";n.PLAY_LIST="PlayList";n.DVB_ERRORS="DVBErrors"},{}],21:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(22)),u=i(e(17)),D=i(e(38)),N=i(e(59)),M=i(e(67)),L=i(e(98)),x=i(e(100)),k=i(e(150)),F=i(e(165)),U=i(e(9)),V=i(e(13)),B=i(e(53)),r=i(e(10)),j=i(e(46));function a(){var h=1,e=this.context,f=(0,U.default)(e).getInstance(),n=void 0,p=void 0,c=void 0,_=void 0,g=void 0,m=void 0,v=void 0,E=void 0,d=void 0,y=void 0,T=void 0,A=void 0,t=void 0,r=void 0,S=void 0,R=void 0;function b(){return _}function I(){return m}function C(){var e=new Date,t=I(),n=1e3*y.getTime();A.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function P(){var e=r.calcSegmentAvailabilityRange(m,v.isDynamic());A.addDVRInfo(v.getType(),y.getTime(),v.getStreamInfo().manifestInfo,e)}function w(e){return g[e]}function O(e){var t=e;_=!1,f.trigger(B.default.AST_IN_FUTURE,{delay:t}),setTimeout(function(){if(!b()){_=!0,f.trigger(V.default.DATA_UPDATE_STARTED,{sender:n}),g.forEach(function(e){e.segmentAvailabilityRange=null});for(var e=0;e<g.length;e++)d.updateRepresentation(g[e],!0)}},t)}function i(e){if(e.sender.getStreamProcessor()===v&&b()){var t,n,i,r=e.representation,a=A.getMetricsFor("stream"),s=A.getMetricsFor(I().adaptation.type),o=R.getCurrentManifestUpdate(a),l=!1,u=0;if("dynamic"===r.adaptation.period.mpd.manifest.type){var c=r.segmentAvailabilityRange.end-r.segmentAvailabilityRange.start;u=1e3*(y.computeLiveDelay(m.segmentDuration,v.getStreamInfo().manifestInfo.DVRWindowSize)-c)}if(0<u)return P(),O(u),n=new F.default(h,"Segments update failed",null),void f.trigger(V.default.DATA_UPDATE_COMPLETED,{sender:this,data:p,currentRepresentation:m,error:n});if(o){for(var d=0;d<o.trackInfo.length;d++)if((t=o.trackInfo[d]).index===r.index&&t.mediaType===v.getType()){l=!0;break}l||A.addManifestUpdateRepresentationInfo(o,r.id,r.index,r.adaptation.period.index,v.getType(),r.presentationTimeOffset,r.startNumber,r.segmentInfoType)}(function(){for(var e=0,t=g.length;e<t;e++){var n=g[e].segmentInfoType;if(null===g[e].segmentAvailabilityRange||!j.default.hasInitialization(g[e])||("SegmentBase"===n||"BaseURL"===n)&&!g[e].segments)return!1}return!0})()&&(_=!1,E.setPlaybackQuality(v.getType(),v.getStreamInfo(),(i=m,g.indexOf(i))),A.updateManifestUpdateInfo(o,{latency:m.segmentAvailabilityRange.end-y.getTime()}),R.getCurrentRepresentationSwitch(s)||C(),f.trigger(V.default.DATA_UPDATE_COMPLETED,{sender:this,data:p,currentRepresentation:m}))}}function a(e){e.isDynamic&&function(e){for(var t,n=0,i=g.length;n<i;n++)(t=g[n]).segmentAvailabilityRange=r.calcSegmentAvailabilityRange(t,e)}(e.isDynamic)}function s(e){e.sender.getStreamProcessor()===v&&P()}function o(e){e.mediaType===v.getType()&&v.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality&&(m=w(e.newQuality),t.setSavedBitrateSettings(e.mediaType,m.bandwidth),C())}return n={initialize:function(e){d=(v=e).getIndexHandler()},setConfig:function(e){e.abrController&&(E=e.abrController)},getData:function(){return p},getDataIndex:function(){return c},isUpdating:b,updateData:function(e,t,n){var i,r,a,s=null,o=v.getStreamInfo(),l=E.getTopQualityIndexFor(n,o.id);if(_=!0,f.trigger(V.default.DATA_UPDATE_STARTED,{sender:this}),r=t,a=T.getValue(),c=S.getIndexForAdaptation(p,a,r.period.index),g=S.getRepresentationsForAdaptation(a,r),l<(i=null===p&&"fragmentedText"!==n?(s=E.getAverageThroughput(n)||E.getInitialBitrateFor(n,o),E.getQualityForBitrate(v.getMediaInfo(),s)):E.getQualityFor(n,o))&&(i=l),m=w(i),p=e,"video"!==n&&"audio"!==n&&"fragmentedText"!==n)return _=!1,void f.trigger(V.default.DATA_UPDATE_COMPLETED,{sender:this,data:p,currentRepresentation:m});for(var u=0;u<g.length;u++)d.updateRepresentation(g[u],!0)},getStreamProcessor:function(){return v},getCurrentRepresentation:I,getRepresentationForQuality:w,reset:function(){f.off(V.default.QUALITY_CHANGE_REQUESTED,o,n),f.off(V.default.REPRESENTATION_UPDATED,i,n),f.off(V.default.WALLCLOCK_TIME_UPDATED,a,n),f.off(V.default.BUFFER_LEVEL_UPDATED,s,n),c=-1,_=!(p=null),g=[],R=S=r=t=A=T=y=E=null}},c=-1,_=!(p=null),g=[],E=(0,N.default)(e).getInstance(),y=(0,M.default)(e).getInstance(),T=(0,L.default)(e).getInstance(),A=(0,x.default)(e).getInstance(),t=(0,k.default)(e).getInstance(),r=(0,D.default)(e).getInstance(),S=(0,l.default)(e).getInstance(),R=(0,u.default)(e).getInstance(),f.on(V.default.QUALITY_CHANGE_REQUESTED,o,n),f.on(V.default.REPRESENTATION_UPDATED,i,n),f.on(V.default.WALLCLOCK_TIME_UPDATED,a,n),f.on(V.default.BUFFER_LEVEL_UPDATED,s,n),n}a.__dashjs_factory_name="RepresentationController",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,100:100,13:13,150:150,165:165,17:17,22:22,38:38,46:46,53:53,59:59,67:67,9:9,98:98}],22:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var T=i(e(46)),A=i(e(40)),S=i(e(45)),a=i(e(44)),R=i(e(48)),b=i(e(38)),I=i(e(65)),C=i(e(15)),P=i(e(42)),w=i(e(41)),O=i(e(43)),D=i(e(159)),r=i(e(10));function s(){var e=this.context,c=(0,b.default)(e).getInstance(),u=(0,I.default)(e).getInstance(),d=(0,C.default)(e).getInstance(),s=(0,D.default)(e).getInstance();function o(e,t){var n,i,r,a=!1,s=!1,o=e.ContentComponent_asArray,l="text"!==t?new RegExp(t):new RegExp("(vtt|ttml)");if(0<e.Representation_asArray.length&&e.Representation_asArray[0].hasOwnProperty("codecs")){var u=e.Representation_asArray[0].codecs;if(0===u.search("stpp")||0===u.search("wvtt"))return"fragmentedText"===t}if(o){if(1<o.length)return"muxed"===t;o[0]&&o[0].contentType===t&&(s=a=!0)}if(e.hasOwnProperty("mimeType")&&(a=l.test(e.mimeType),s=!0),!s)for(n=0,i=e.Representation_asArray.length;!s&&n<i;)(r=e.Representation_asArray[n]).hasOwnProperty("mimeType")&&(a=l.test(r.mimeType),s=!0),n++;return a}function l(e){return o(e,"audio")}function h(e){return o(e,"video")}function f(e){return o(e,"fragmentedText")}function p(e){return o(e,"muxed")}function _(e){return"text/vtt"===e||"application/ttml+xml"===e}function t(e){return e.hasOwnProperty("Role_asArray")?e.Role_asArray:[]}function g(e){return t(e).filter(function(e){return"main"===e.value})[0]}function n(){return function(e,t){return e.bandwidth-t.bandwidth}}function m(e){return void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e}function v(e,t,n){var i,r,a=e.Period_asArray[t].AdaptationSet_asArray,s=[];for(i=0,r=a.length;i<r;i++)o(a[i],n)&&s.push(m(a[i]));return s}function E(e){var t=!1;return e.hasOwnProperty("type")&&(t="dynamic"===e.type),t}function i(e,t){var n=!1;return e.profiles&&0<e.profiles.length&&(n=-1!==e.profiles.indexOf(t)),n}function y(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=S.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty("id")&&"__proto__"!==e.id&&(n=e.id),n}function r(e,t){var n=[];if(!e)return n;for(var i=0;i<e.length;i++){var r=new O.default;if(r.timescale=1,r.representation=t,!e[i].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");r.schemeIdUri=e[i].schemeIdUri,e[i].hasOwnProperty("timescale")&&(r.timescale=e[i].timescale),e[i].hasOwnProperty("value")&&(r.value=e[i].value),n.push(r)}return n}return{getIsTypeOf:o,getIsAudio:l,getIsVideo:h,getIsText:function(e){return o(e,"text")},getIsMuxed:p,getIsTextTrack:_,getIsFragmentedText:f,getIsMain:g,getLanguageForAdaptation:function(e){var t="";return e.hasOwnProperty("lang")&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e.hasOwnProperty("Viewpoint")?e.Viewpoint:null},getRolesForAdaptation:t,getAccessibilityForAdaptation:function(e){return e.hasOwnProperty("Accessibility_asArray")?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e.hasOwnProperty("AudioChannelConfiguration_asArray")?e.AudioChannelConfiguration_asArray:[]},processAdaptation:m,getAdaptationForIndex:function(e,t,n){return t.Period_asArray[n].AdaptationSet_asArray[e]},getIndexForAdaptation:function(e,t,n){var i,r,a=t.Period_asArray[n].AdaptationSet_asArray;for(i=0,r=a.length;i<r;i++)if(a[i]===e)return i;return-1},getAdaptationForId:function(e,t,n){var i,r,a=t.Period_asArray[n].AdaptationSet_asArray;for(i=0,r=a.length;i<r;i++)if(a[i].hasOwnProperty("id")&&a[i].id===e)return a[i];return null},getAdaptationsForType:v,getAdaptationForType:function(e,t,n,i){var r=v(e,t,n);if(!r||0===r.length)return null;if(1<r.length&&i)for(var a=u.getCurrentTrackFor(n,i),s=d.getAllMediaInfoForType(e,i,n),o=0,l=r.length;o<l;o++){if(a&&u.isTracksEqual(a,s[o]))return r[o];if(g(r[o]))return r[o]}return r[0]},getCodec:function(e){var t=e.Representation_asArray[0];return t.mimeType+';codecs="'+t.codecs+'"'},getMimeType:function(e){return e.Representation_asArray[0].mimeType},getKID:function(e){return e&&e.hasOwnProperty("cenc:default_KID")?e["cenc:default_KID"]:null},getContentProtectionData:function(e){return e&&e.hasOwnProperty("ContentProtection_asArray")&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:E,getIsDVR:function(e){var t,n=E(e);return t=!isNaN(e.timeShiftBufferDepth),n&&t},getIsOnDemand:function(e){return i(e,"urn:mpeg:dash:profile:isoff-on-demand:2011")},getIsDVB:function(e){return i(e,"urn:dvb:dash:profile:dvb-dash:2014")},getDuration:function(e){return e.hasOwnProperty("mediaPresentationDuration")?e.mediaPresentationDuration:Number.MAX_VALUE},getBandwidth:function(e){return e.bandwidth},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e.hasOwnProperty("minimumUpdatePeriod")&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getRepresentationCount:function(e){return e.Representation_asArray.length},getBitrateListForAdaptation:function(e){if(!e||!e.Representation_asArray||!e.Representation_asArray.length)return null;for(var t=m(e).Representation_asArray,n=t.length,i=[],r=0;r<n;r++)i.push({bandwidth:t[r].bandwidth,width:t[r].width||0,height:t[r].height||0});return i},getRepresentationFor:function(e,t){return t.Representation_asArray[e]},getRepresentationsForAdaptation:function(e,t){for(var n,i,r,a,s,o=m(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index]),l=[],u=0;u<o.Representation_asArray.length;u++)a=o.Representation_asArray[u],(n=new T.default).index=u,n.adaptation=t,a.hasOwnProperty("id")&&(n.id=a.id),a.hasOwnProperty("codecs")&&(n.codecs=a.codecs),a.hasOwnProperty("codecPrivateData")&&(n.codecPrivateData=a.codecPrivateData),a.hasOwnProperty("bandwidth")&&(n.bandwidth=a.bandwidth),a.hasOwnProperty("width")&&(n.width=a.width),a.hasOwnProperty("height")&&(n.height=a.height),a.hasOwnProperty("maxPlayoutRate")&&(n.maxPlayoutRate=a.maxPlayoutRate),a.hasOwnProperty("SegmentBase")?(r=a.SegmentBase,n.segmentInfoType="SegmentBase"):a.hasOwnProperty("SegmentList")?(r=a.SegmentList).hasOwnProperty("SegmentTimeline")?(n.segmentInfoType="SegmentTimeline",(!(s=r.SegmentTimeline.S_asArray[r.SegmentTimeline.S_asArray.length-1]).hasOwnProperty("r")||0<=s.r)&&(n.useCalculatedLiveEdgeTime=!0)):(n.segmentInfoType="SegmentList",n.useCalculatedLiveEdgeTime=!0):a.hasOwnProperty("SegmentTemplate")?((r=a.SegmentTemplate).hasOwnProperty("SegmentTimeline")?(n.segmentInfoType="SegmentTimeline",(!(s=r.SegmentTimeline.S_asArray[r.SegmentTimeline.S_asArray.length-1]).hasOwnProperty("r")||0<=s.r)&&(n.useCalculatedLiveEdgeTime=!0)):n.segmentInfoType="SegmentTemplate",r.hasOwnProperty("initialization")&&(n.initialization=r.initialization.split("$Bandwidth$").join(a.bandwidth).split("$RepresentationID$").join(a.id))):n.segmentInfoType="BaseURL",r&&(r.hasOwnProperty("Initialization")?(i=r.Initialization).hasOwnProperty("sourceURL")?n.initialization=i.sourceURL:i.hasOwnProperty("range")&&(n.range=i.range):a.hasOwnProperty("mimeType")&&_(a.mimeType)&&(n.range=0),r.hasOwnProperty("timescale")&&(n.timescale=r.timescale),r.hasOwnProperty("duration")&&(n.segmentDuration=r.duration/n.timescale),r.hasOwnProperty("startNumber")&&(n.startNumber=r.startNumber),r.hasOwnProperty("indexRange")&&(n.indexRange=r.indexRange),r.hasOwnProperty("presentationTimeOffset")&&(n.presentationTimeOffset=r.presentationTimeOffset/n.timescale)),n.MSETimeOffset=c.calcMSETimeOffset(n),n.path=[t.period.index,t.index,u],l.push(n);return l},getAdaptationsForPeriod:function(e,t){for(var n,i,r=e.Period_asArray[t.index],a=[],s=0;s<r.AdaptationSet_asArray.length;s++)i=r.AdaptationSet_asArray[s],n=new A.default,i.hasOwnProperty("id")&&(n.id=i.id),n.index=s,n.period=t,p(i)?n.type="muxed":l(i)?n.type="audio":h(i)?n.type="video":f(i)?n.type="fragmentedText":n.type="text",a.push(n);return a},getRegularPeriods:function(e,t){var n,i,r=E(e),a=[],s=null,o=null,l=null,u=null;for(i=0,n=e.Period_asArray.length;i<n;i++)(o=e.Period_asArray[i]).hasOwnProperty("start")?(u=new S.default).start=o.start:null!==s&&o.hasOwnProperty("duration")&&null!==l?((u=new S.default).start=l.start+l.duration,u.duration=o.duration):0!==i||r||((u=new S.default).start=0),null!==l&&isNaN(l.duration)&&(l.duration=u.start-l.start),null!==u&&(u.id=y(o,i)),null!==u&&o.hasOwnProperty("duration")&&(u.duration=o.duration),null!==u&&(u.index=i,u.mpd=t,a.push(u),s=o,l=u),u=o=null;return 0===a.length||null!==l&&isNaN(l.duration)&&(l.duration=function(e,t){var n=E(e),i=void 0;if(e.mediaPresentationDuration)i=e.mediaPresentationDuration;else if(t.duration)i=t.duration;else{if(!n)throw new Error("Must have @mediaPresentationDuratio on MPD or an explicit @duration on the last period.");i=Number.POSITIVE_INFINITY}return i}(e,l)-l.start),a},getMpd:function(e){var t=new a.default;return(t.manifest=e).hasOwnProperty("availabilityStartTime")?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty("availabilityEndTime")&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty("minimumUpdatePeriod")&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty("mediaPresentationDuration")&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty("suggestedPresentationDelay")&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty("timeShiftBufferDepth")&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty("maxSegmentDuration")&&(t.maxSegmentDuration=e.maxSegmentDuration),t},getEventsForPeriod:function(e,t){var n=e.Period_asArray[t.index].EventStream_asArray,i=[];if(n)for(var r=0;r<n.length;r++){var a=new O.default;if(a.period=t,a.timescale=1,!n[r].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");a.schemeIdUri=n[r].schemeIdUri,n[r].hasOwnProperty("timescale")&&(a.timescale=n[r].timescale),n[r].hasOwnProperty("value")&&(a.value=n[r].value);for(var s=0;s<n[r].Event_asArray.length;s++){var o=new P.default;o.presentationTime=0,o.eventStream=a,n[r].Event_asArray[s].hasOwnProperty("presentationTime")&&(o.presentationTime=n[r].Event_asArray[s].presentationTime),n[r].Event_asArray[s].hasOwnProperty("duration")&&(o.duration=n[r].Event_asArray[s].duration),n[r].Event_asArray[s].hasOwnProperty("id")&&(o.id=n[r].Event_asArray[s].id),i.push(o)}}return i},getEventStreams:r,getEventStreamForAdaptationSet:function(e,t){return t&&e?r(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index].InbandEventStream_asArray,null):[]},getEventStreamForRepresentation:function(e,t){return r(e.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].InbandEventStream_asArray,t)},getUTCTimingSources:function(e){var t=E(e),n=e.hasOwnProperty("availabilityStartTime"),i=e.UTCTiming_asArray,r=[];return(t||n)&&i&&i.forEach(function(e){var t=new R.default;e.hasOwnProperty("schemeIdUri")&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value.toString(),r.push(t)))}),r},getBaseURLsFromElement:function(i){var r=[],e=i.BaseURL_asArray||[i.baseUri],a=!1;return e.some(function(e){if(e){var t=new w.default,n=e.__text||e;return s.isRelative(n)&&(a=!0,i.baseUri&&(n=i.baseUri+n)),t.url=n,e.hasOwnProperty("serviceLocation")&&e.serviceLocation.length?t.serviceLocation=e.serviceLocation:t.serviceLocation=n,e.hasOwnProperty("dvb:priority")&&(t.dvb_priority=e["dvb:priority"]),e.hasOwnProperty("dvb:weight")&&(t.dvb_weight=e["dvb:weight"]),r.push(t),a}}),r},getRepresentationSortFunction:n,getLocation:function(e){return e.hasOwnProperty("Location")&&(e.Location=e.Location_asArray[0]),e.Location}}}s.__dashjs_factory_name="DashManifestModel",n.default=r.default.getSingletonFactory(s),t.exports=n.default},{10:10,15:15,159:159,38:38,40:40,41:41,42:42,43:43,44:44,45:45,46:46,48:48,65:65}],23:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(152)),a=i(e(10)),d=i(e(8)),h=i(e(3)),f=i(e(4)),p=i(e(32)),_=i(e(30)),g=i(e(29)),m=i(e(31)),v=i(e(26)),E=i(e(27));function s(){var e,t=this.context,s=(0,d.default)(t).getInstance().log,o=(0,r.default)(t).getInstance(),l=void 0,u=void 0,c=void 0;return e={parse:function(t,e){var n;try{var i=window.performance.now();if(!(n=u.xml_str2json(t)))throw new Error("parser error");var r=window.performance.now();c.run(n);var a=window.performance.now();e.setMatchers(l),e.setIron(c),s("Parsing complete: ( xml2json: "+(r-i).toPrecision(3)+"ms, objectiron: "+(a-r).toPrecision(3)+"ms, total: "+((a-i)/1e3).toPrecision(3)+"s)")}catch(e){return o.manifestError("parsing the manifest failed","parse",t,e),null}return n}},l=[new _.default,new g.default,new m.default,new p.default],u=new f.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:l}),c=new h.default([new v.default,new E.default]),e}s.__dashjs_factory_name="DashParser",n.default=a.default.getClassFactory(s),t.exports=n.default},{10:10,152:152,26:26,27:27,29:29,3:3,30:30,31:31,32:32,4:4,8:8}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var i=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n;this._name=e,this._merge=void 0!==t?t:(n=e)&&n.length&&n.charAt(0)===n.charAt(0).toUpperCase()}return r(i,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),i}();n.default=i,t.exports=n.default},{}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r,a=e(24),o=(r=a)&&r.__esModule?r:{default:r},s=function(){function s(e,t,n,i,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this._name=e||"",this._properties=[],this._children=n||[],this._isRoot=i||!1,this._isArray=r||!0,Array.isArray(t)&&t.forEach(function(e){a._properties.push(new o.default(e))})}return i(s,[{key:"name",get:function(){return this._name}},{key:"isRoot",get:function(){return this._isRoot}},{key:"isArray",get:function(){return this._isArray}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),s}();n.default=s,t.exports=n.default},{24:24}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(25),a=(i=r)&&i.__esModule?i:{default:i},s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=["profiles","width","height","sar","frameRate","audioSamplingRate","mimeType","segmentProfiles","codecs","maximumSAPPeriod","startWithSAP","maxPlayoutRate","codingDependency","scanType","FramePacking","AudioChannelConfiguration","ContentProtection","EssentialProperty","SupplementalProperty","InbandEventStream"];(function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}})(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"AdaptationSet",e,[new a.default("Representation",e,[new a.default("SubRepresentation",e)])])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),t}();n.default=s,t.exports=n.default},{25:25}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(25),a=(i=r)&&i.__esModule?i:{default:i},s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=["SegmentBase","SegmentTemplate","SegmentList"];(function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}})(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"Period",e,[new a.default("AdaptationSet",e,[new a.default("Representation",e)])])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),t}();n.default=s,t.exports=n.default},{25:25}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._test=e,this._converter=t}return i(n,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),n}();n.default=r,t.exports=n.default},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(28),a=(i=r)&&i.__esModule?i:{default:i},s=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return s.test(e.value)},function(e){var t=s.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0),t[9]&&t[10]){var i=60*parseInt(t[9],10)+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*i*60*1e3}return new Date(n)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),t}();n.default=o,t.exports=n.default},{28:28}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(28),a=(i=r)&&i.__esModule?i:{default:i},s=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){for(var t=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],n=t.length,i=0;i<n;i++)if(e.nodeName===t[i])return s.test(e.value);return!1},function(e){var t=s.exec(e),n=31536e3*parseFloat(t[2]||0)+2592e3*parseFloat(t[4]||0)+86400*parseFloat(t[6]||0)+3600*parseFloat(t[8]||0)+60*parseFloat(t[10]||0)+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),t}();n.default=o,t.exports=n.default},{28:28}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(28),a=(i=r)&&i.__esModule?i:{default:i},s=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return s.test(e.value)},function(e){return parseFloat(e)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),t}();n.default=o,t.exports=n.default},{28:28}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(28),a=(i=r)&&i.__esModule?i:{default:i},s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e,t){var n={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value","id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};if(n.hasOwnProperty(t)){var i=n[t];return void 0!==i&&0<=i.indexOf(e.name)}return!1},function(e){return String(e)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),t}();n.default=s,t.exports=n.default},{28:28}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){var A=void 0;return{getSamplesInfo:function(e){var t,n,i,r,a,s,o,l,u,c,d=A.parse(e),h=d.getBox("tfhd"),f=d.getBox("tfdt"),p=d.getBox("trun"),_=d.getBox("moof"),g=d.getBox("mfhd"),m=d.getBox("subs");c=g.sequence_number,n=p.sample_count,r=f.baseMediaDecodeTime,u=(h.base_data_offset||0)+(p.data_offset||0),a=[];var v=-1,E=-1;for(o=0;o<n;o++){t=void 0!==(s=p.samples[o]).sample_duration?s.sample_duration:h.default_sample_duration,i=void 0!==s.sample_size?s.sample_size:h.default_sample_size;var y={dts:r,cts:r+(void 0!==s.sample_composition_time_offset?s.sample_composition_time_offset:0),duration:t,offset:_.offset+u,size:i,subSizes:[i]};if(m&&(v<m.entry_count&&E<o&&(v++,E+=m.entries[v].sample_delta),o==E)){y.subSizes=[];var T=m.entries[v];for(l=0;l<T.subsample_count;l++)y.subSizes.push(T.subsamples[l].subsample_size)}a.push(y),u+=i,r+=t}return{sampleList:a,sequenceNumber:c,totalDuration:r-f.baseMediaDecodeTime}},getMediaTimescaleFromMoov:function(e){var t=A.parse(e).getBox("mdhd");return t?t.timescale:NaN},setConfig:function(e){e&&e.boxParser&&(A=e.boxParser)}}}s.__dashjs_factory_name="FragmentedTextBoxParser",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i},g=e(36);function s(e,p){var _=e.timelineConverter;return{getSegments:function(e,t,n,i){var r,a,s,o,l,u,c,d=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,h=d.SegmentURL_asArray.length,f=[];for(c=e.startNumber,o=(0,g.decideSegmentListRangeForTemplate)(_,p,e,t,n,i),l=Math.max(o.start,0),u=Math.min(o.end,d.SegmentURL_asArray.length-1),r=l;r<=u;r++)s=d.SegmentURL_asArray[r],(a=(0,g.getIndexBasedSegment)(_,p,e,r)).replacementTime=(c+r-1)*e.segmentDuration,a.media=s.media?s.media:"",a.mediaRange=s.mediaRange,a.index=s.index,a.indexRange=s.indexRange,f.push(a),a=null;return e.availableSegmentsNumber=h,f}}}s.__dashjs_factory_name="ListSegmentsGetter";var o=a.default.getClassFactory(s);n.default=o,t.exports=n.default},{10:10,36:36}],35:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),a=i(e(39)),s=i(e(37)),o=i(e(34));function l(e,t){var n,i=this.context,h=void 0,f=void 0,p=void 0;return n={getSegments:function(e,t,n,i,r){var a,s=e.segmentInfoType;return"SegmentBase"!==s&&"BaseURL"!==s&&(o=e,l=n,d=o.segments,!d||0===d.length||(c=d[0].availabilityIdx,u=d[d.length-1].availabilityIdx,l<c||u<l))?("SegmentTimeline"===s?a=h.getSegments(e,t,n,r):"SegmentTemplate"===s?a=f.getSegments(e,t,n,r):"SegmentList"===s&&(a=p.getSegments(e,t,n,r)),i&&i(e,a)):a=e.segments,a;var o,l,u,c,d}},h=(0,a.default)(i).create(e,t),f=(0,s.default)(i).create(e,t),p=(0,o.default)(i).create(e,t),n}l.__dashjs_factory_name="SegmentsGetter";var u=r.default.getClassFactory(l);n.default=u,t.exports=n.default},{10:10,34:34,37:37,39:39}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.replaceTokenForTemplate=g,n.getIndexBasedSegment=function(e,t,n,i){var r,a,s,o;a=n.segmentDuration,isNaN(a)&&(a=n.adaptation.period.duration);return s=n.adaptation.period.start+i*a,o=s+a,(r=new p.default).representation=n,r.duration=a,r.presentationStartTime=s,r.mediaStartTime=e.calcMediaTimeFromPresentationTime(r.presentationStartTime,n),r.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(r.presentationStartTime,n.adaptation.period.mpd,t),r.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(o,n.adaptation.period.mpd,t),r.wallStartTime=e.calcWallTimeForSegment(r,t),r.replacementNumber=_(r,i),r.availabilityIdx=i,r},n.getTimeBasedSegment=function(e,t,n,i,r,a,s,o,l){var u,c,d,h=i/a,f=Math.min(r/a,n.adaptation.period.mpd.maxSegmentDuration);return u=e.calcPresentationTimeFromMediaTime(h,n),c=u+f,(d=new p.default).representation=n,d.duration=f,d.mediaStartTime=h,d.presentationStartTime=u,d.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,d.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(c,n.adaptation.period.mpd,t),d.wallStartTime=e.calcWallTimeForSegment(d,t),d.replacementTime=i,d.replacementNumber=_(d,l),s=g(s=g(s,"Number",d.replacementNumber),"Time",d.replacementTime),d.media=s,d.mediaRange=o,d.availabilityIdx=l,d},n.getSegmentByIndex=m,n.decideSegmentListRangeForTimeline=function(e,t,n,i,r){var a,s,o=r||10,l=Number.POSITIVE_INFINITY;return!t||e.isTimeSyncCompleted()?!t&&n||i<0?null:(a=Math.max(i-2,0),s=Math.min(i+o,l),{start:a,end:s}):{start:0,end:l}},n.decideSegmentListRangeForTemplate=function(e,t,n,i,r,a){var s,o,l=n.segmentDuration,u=n.adaptation.period.mpd.manifest.minBufferTime,c=n.segmentAvailabilityRange,d={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,c.start),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,c.end)},h=n.segments,f=2*l,p=a||Math.max(2*u,10*l),_=NaN,g=null;if(d.start=Math.max(d.start,0),t&&!e.isTimeSyncCompleted())return s=Math.floor(d.start/l),o=Math.floor(d.end/l),{start:s,end:o};_=h&&0<h.length?(g=m(r,n),g?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,g.presentationStartTime):0<r?r*l:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,i)):0<r?r*l:t?d.end:d.start;return s=Math.floor(Math.max(_-f,d.start)/l),o=Math.floor(Math.min(s+p/l,d.end/l)),{start:s,end:o}};var i,r=e(47),p=(i=r)&&i.__esModule?i:{default:i};function d(e,t){for(;e.length<t;)e="0"+e;return e}function _(e,t){return e.representation.startNumber+t}function g(e,t,n){var i,r,a,s,o,l,u=t.length,c="%0".length;if(!e)return e;for(;;){if((i=e.indexOf("$"+t))<0)return e;if((r=e.indexOf("$",i+u))<0)return e;if(i<(a=e.indexOf("%0",i+u))&&a<r)switch(s=e.charAt(r-1),o=parseInt(e.substring(a+c,r-1),10),s){case"d":case"i":case"u":l=d(n.toString(),o);break;case"x":l=d(n.toString(16),o);break;case"X":l=d(n.toString(16),o).toUpperCase();break;case"o":l=d(n.toString(8),o);break;default:return e}else l=n;e=e.substring(0,i)+l+e.substring(r+1)}}function m(e,t){if(!t||!t.segments)return null;var n,i,r=t.segments.length;if(e<r&&(n=t.segments[e])&&n.availabilityIdx===e)return n;for(i=0;i<r;i++)if((n=t.segments[i])&&n.availabilityIdx===e)return n;return null}},{47:47}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i},m=e(36);function s(e,_){var g=e.timelineConverter;return{getSegments:function(e,t,n,i){var r,a,s,o,l,u=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,c=e.segmentDuration,d=e.segmentAvailabilityRange,h=[],f=null,p=null;for(l=e.startNumber,s=(r=isNaN(c)&&!_?{start:l,end:l}:(0,m.decideSegmentListRangeForTemplate)(g,_,e,t,n,i)).start,o=r.end,a=s;a<=o;a++)(p=(0,m.getIndexBasedSegment)(g,_,e,a)).replacementTime=(l+a-1)*e.segmentDuration,f=u.media,f=(0,m.replaceTokenForTemplate)(f,"Number",p.replacementNumber),f=(0,m.replaceTokenForTemplate)(f,"Time",p.replacementTime),p.media=f,h.push(p),p=null;return isNaN(c)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((d.end-d.start)/c),h}}}s.__dashjs_factory_name="TemplateSegmentsGetter";var o=a.default.getClassFactory(s);n.default=o,t.exports=n.default},{10:10,36:36}],38:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=i(e(9)),c=i(e(13)),r=i(e(10));function a(){var e=this.context,t=(0,u.default)(e).getInstance(),r=void 0,o=void 0,n=void 0;function i(e){r=e}function a(e,t,n,i){return i?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-r)):t.availabilityStartTime}function l(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*r)/1e3}function s(e){o||void 0!==e.offset&&(i(e.offset/1e3),o=!0)}return{initialize:function(){r=0,o=!1,n=NaN,t.on(c.default.TIME_SYNCHRONIZATION_COMPLETED,s,this)},isTimeSyncCompleted:function(){return o},setTimeSyncCompleted:function(e){o=e},getClientTimeOffset:function(){return r},setClientTimeOffset:i,getExpectedLiveEdge:function(){return n},setExpectedLiveEdge:function(e){n=e},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return a.call(this,e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return a.call(this,e,t,n,!0)},calcPresentationTimeFromWallTime:l,calcPresentationTimeFromMediaTime:function(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMpdRelativeTimeFromPeriodRelativeTime:function(e,t){return t+e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var n=e.adaptation.period,i={start:n.start,end:n.start+n.duration};if(!t)return i;if(!o&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var r=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),a=l(new Date,n),s=n.start+n.duration;return i.start=Math.max(a-n.mpd.timeShiftBufferDepth,n.start),i.end=s<=a&&a-r<s?s-r:a-r,i},calcWallTimeForSegment:function(e,t){var n,i,r;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,i=e.presentationStartTime+n,r=new Date(e.availabilityStartTime.getTime()+1e3*i)),r},calcMSETimeOffset:function(e){var t=e.presentationTimeOffset;return e.adaptation.period.start-t},reset:function(){t.off(c.default.TIME_SYNCHRONIZATION_COMPLETED,s,this),r=0,o=!1,n=NaN}}}a.__dashjs_factory_name="TimelineConverter",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,13:13,9:9}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i},D=e(36);function s(e,w){var O=e.timelineConverter;return{getSegments:function(r,e,t,n){var i,a,s,o,l,u,c,d,h,f,p,_,g,m,v=r.adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].SegmentTemplate||r.adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].SegmentList,E=v.SegmentTimeline,y=v.SegmentURL_asArray,T=0<r.availableSegmentsNumber,A=0,S=0,R=-1,b=[],I=!1,C=function(e,t){var n=v.media,i=e.mediaRange;return y&&(n=y[t].media||"",i=y[t].mediaRange),(0,D.getTimeBasedSegment)(O,w,r,A,e.d,m,n,i,R)};for(m=r.timescale,i=E.S_asArray,(h=(0,D.decideSegmentListRangeForTimeline)(O,w,e,t,n))?(_=h.start,g=h.end):p=O.calcMediaTimeFromPresentationTime(e||0,r),s=0,o=i.length;s<o;s++){if(u=0,(a=i[s]).hasOwnProperty("r")&&(u=a.r),a.hasOwnProperty("t")&&(S=(A=a.t)/m),u<0){if((d=i[s+1])&&d.hasOwnProperty("t"))c=d.t/m;else{var P=r.segmentAvailabilityRange?r.segmentAvailabilityRange.end:O.calcSegmentAvailabilityRange(r,w).end;c=O.calcMediaTimeFromPresentationTime(P,r),r.segmentDuration=a.d/m}u=Math.ceil((c-S)/(a.d/m))-1}if(f){if(T)break;R+=u+1}else for(l=0;l<=u;l++){if(R++,h){if(g<R){if(f=!0,T)break;continue}_<=R&&b.push(C(a,R))}else{if(10<b.length){if(f=!0,T)break;continue}I?b.push(C(a,R)):S>=p-a.d/m*1.5&&(I=!0,b.push(C(a,R)))}S=(A+=a.d)/m}}return T||(r.availableSegmentsNumber=R+1),b}}}s.__dashjs_factory_name="TimelineSegmentsGetter";var o=a.default.getClassFactory(s);n.default=o,t.exports=n.default},{10:10,36:36}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.period=null,this.index=-1,this.type=null},t.exports=n.default},{}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t||"",this.serviceLocation=n||t||"",this.dvb_priority=i||1,this.dvb_weight=r||1};i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,n.default=i,t.exports=n.default},{}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},t.exports=n.default},{}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""},t.exports=n.default},{}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},t.exports=n.default},{}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};i.DEFAULT_ID="defaultId",n.default=i,t.exports=n.default},{}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.maxPlayoutRate=NaN}return i(e,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||("BaseURL"!==e.segmentInfoType||"SegmentBase"!==e.segmentInfoType)&&null!==e.range}},{key:"hasSegments",value:function(e){return"BaseURL"!==e.segmentInfoType&&"SegmentBase"!==e.segmentInfoType&&!e.indexRange}}]),e}();n.default=r,t.exports=n.default},{}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null},t.exports=n.default},{}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],49:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(57)),l=i(e(167)),u=i(e(165)),c=i(e(9)),d=i(e(13)),r=i(e(10));function a(e){var t=this.context,r=(0,c.default)(t).getInstance(),a=void 0,s=void 0;return a={checkForExistence:function(t){var e=function(e){r.trigger(d.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e})};if(t){var n=new l.default(t.url);s.load({request:n,success:function(){e(!0)},error:function(){e(!1)}})}else e(!1)},load:function(n){var i=function(e,t){r.trigger(d.default.LOADING_COMPLETED,{request:n,response:e||null,error:t||null,sender:a})};n?s.load({request:n,progress:function(){r.trigger(d.default.LOADING_PROGRESS,{request:n})},success:function(e){i(e)},error:function(e,t,n){i(void 0,new u.default(1,n,t))}}):i(void 0,new u.default(2,"request is null"))},abort:function(){s&&s.abort()},reset:function(){s&&(s.abort(),s=null)}},s=(0,o.default)(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),a}a.__dashjs_factory_name="FragmentLoader";var s=r.default.getClassFactory(a);s.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=1,s.FRAGMENT_LOADER_ERROR_NULL_REQUEST=2,n.default=s,t.exports=n.default},{10:10,13:13,165:165,167:167,57:57,9:9}],50:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(72)),a=i(e(57)),s=i(e(159)),o=i(e(152)),g=i(e(173)),m=i(e(165)),v=e(182),l=i(e(9)),E=i(e(13)),u=i(e(10)),y=i(e(23));function c(e){var u=this.context,c=(0,l.default)(u).getInstance(),d=(0,s.default)(u).getInstance(),h=(0,o.default)(u).getInstance(),t=void 0,n=void 0,f=void 0,p=void 0,_=e.mssHandler;function i(e){c.trigger(E.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return t={load:function(l){var e=new g.default(l,v.HTTPRequest.MPD_TYPE);n.load({request:e,success:function(e,t,n){var i,r,a,s;if(n.responseURL&&n.responseURL!==l?(r=d.parseBaseUrl(n.responseURL),i=n.responseURL):(d.isRelative(l)&&(l=d.resolve(l,window.location.href)),r=d.parseBaseUrl(l)),null===p&&(s=null,p=-1<(a=e).indexOf("SmoothStreamingMedia")?(_?(s=_.createMssParser(),_.registerEvents()):h.manifestError("manifest type unsupported","createParser"),s):-1<a.indexOf("MPD")?(0,y.default)(u).create():s),null!==p){var o=p.parse(e,f);o?(o.url=i||l,o.originalUrl||(o.originalUrl=o.url),o.baseUri=r,o.loadedTime=new Date,f.resolveManifestOnLoad(o)):c.trigger(E.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m.default(1,"parsing failed")})}else c.trigger(E.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m.default(1,"Failed detecting manifest type: "+l)})},error:function(e,t,n){c.trigger(E.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m.default(2,"Failed loading manifest: "+l+", "+n)})}})},reset:function(){c.off(E.default.XLINK_READY,i,t),f&&(f.reset(),f=null),n&&(n.abort(),n=null),_&&_.reset()}},c.on(E.default.XLINK_READY,i,t),n=(0,a.default)(u).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),f=(0,r.default)(u).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),p=null,t}c.__dashjs_factory_name="ManifestLoader";var d=u.default.getClassFactory(c);d.MANIFEST_LOADER_ERROR_PARSING_FAILURE=1,d.MANIFEST_LOADER_ERROR_LOADING_FAILURE=2,n.default=d,t.exports=n.default},{10:10,13:13,152:152,159:159,165:165,173:173,182:182,23:23,57:57,72:72,9:9}],51:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=i(e(9)),T=i(e(13)),r=i(e(10)),A=i(e(99)),S=i(e(8));function a(){var t=this.context,i=(0,S.default)(t).getInstance().log,r=(0,y.default)(t).getInstance(),a=void 0,n=void 0,s=void 0,o=void 0,l=void 0,u=void 0,c=void 0,d=void 0;function e(){null!==n&&(clearInterval(n),n=null)}function h(){e(),isNaN(a)||(i("Refresh manifest in "+a+" seconds."),n=setTimeout(_,1e3*a))}function f(){o=!0;var e=u.getValue(),t=e.url,n=c.getLocation(e);n&&(t=n),l.load(t)}function p(e){u.setValue(e);var t=new Date,n=(t.getTime()-e.loadedTime.getTime())/1e3;a=c.getManifestUpdatePeriod(e,n),r.trigger(T.default.MANIFEST_UPDATED,{manifest:e}),i("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),s||h()}function _(){s&&!d.getScheduleWhilePaused()||o||f()}function g(e){e.error||p(e.manifest)}function m(){s=!1,h()}function v(){s=!0,e()}function E(){o=!1}return{initialize:function(e){l=e,a=NaN,n=null,s=!(o=!1),d=(0,A.default)(t).getInstance(),r.on(T.default.STREAMS_COMPOSED,E,this),r.on(T.default.PLAYBACK_STARTED,m,this),r.on(T.default.PLAYBACK_PAUSED,v,this),r.on(T.default.INTERNAL_MANIFEST_LOADED,g,this)},setManifest:function(e){p(e)},getManifestLoader:function(){return l},refreshManifest:f,setConfig:function(e){e&&(e.manifestModel&&(u=e.manifestModel),e.dashManifestModel&&(c=e.dashManifestModel))},reset:function(){r.off(T.default.PLAYBACK_STARTED,m,this),r.off(T.default.PLAYBACK_PAUSED,v,this),r.off(T.default.STREAMS_COMPOSED,E,this),r.off(T.default.INTERNAL_MANIFEST_LOADED,g,this),e(),o=!(s=!0),a=NaN,d=null}}}a.__dashjs_factory_name="ManifestUpdater",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,13:13,8:8,9:9,99:99}],52:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ee=i(e(48)),te=i(e(67)),ne=i(e(70)),ie=i(e(65)),re=i(e(50)),ae=i(e(155)),se=i(e(152)),oe=i(e(148)),le=i(e(145)),ue=i(e(69)),ce=i(e(157)),de=i(e(143)),he=i(e(101)),fe=i(e(98)),pe=i(e(99)),_e=i(e(100)),ge=i(e(59)),me=i(e(71)),ve=i(e(130)),Ee=i(e(102)),ye=i(e(66)),Te=i(e(60)),Ae=i(e(8)),Se=i(e(9)),Re=i(e(13)),be=i(e(53)),Ie=i(e(10)),Ce=e(11),Pe=i(e(15)),we=i(e(22)),Oe=i(e(17)),De=i(e(38));function r(){var e,s="You must first call play() to init playback before calling this method",t="You must first call attachView() to set the video element before calling this method",n="You must first call attachSource() with a valid source before calling this method",i="MediaPlayer not initialized!",o=this.context,a=(0,Se.default)(o).getInstance(),r=(0,Ae.default)(o).getInstance(),l=r.log,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,_=void 0,g=void 0,m=void 0,v=void 0,E=void 0,y=void 0,T=void 0,A=void 0,S=void 0,R=void 0,b=void 0,I=void 0,C=void 0,P=void 0,w=void 0;function O(){return!!P&&!!u}function D(){if(!h)throw s;return b.isPaused()}function N(e){var t=Q();if(!t)return 0;var n=t.range.start+e;return n>t.range.end&&(n=t.range.end),n}function M(e){if(!h)throw s;var t=q().currentTime;if(void 0!==e)t=R.getTimeRelativeToStreamId(t,e);else if(b.getIsDynamic()){var n=Q();t=null===n?0:L()-(n.range.end-n.time)}return t}function L(){if(!h)throw s;var e=q().duration;if(b.getIsDynamic()){var t,n=Q();if(!n)return 0;e=(t=n.range.end-n.range.start)<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize}return e}function x(){return(0,Ce.getVersionString)()}function k(e){f=e}function F(){return I}function U(e){return y.getReadOnlyMetricsFor(e)}function V(e){if(!h)throw s;var t=R.getActiveStreamInfo();return t?_.getTracksFor(e,t):[]}function B(e,t){j(e,t);var n=new ee.default;n.schemeIdUri=e,n.value=t,T.getUTCTimingSources().push(n)}function j(n,i){var r=T.getUTCTimingSources();r.forEach(function(e,t){e.schemeIdUri===n&&e.value===i&&r.splice(t,1)})}function H(){B(pe.default.DEFAULT_UTC_TIMING_SOURCE.scheme,pe.default.DEFAULT_UTC_TIMING_SOURCE.value)}function Y(e,t){T.setXHRWithCredentialsForType(e,t)}function q(){if(!P)throw t;return P.getElement()}function K(e){if(!d)throw i;P=null,e&&((P=(0,Ee.default)(o).getInstance()).initialize(),P.setElement(e),X(),function(){if(m)return;var e=dashjs.MetricsReporting;if("function"!=typeof e)return;var t=e(o).create();m=t.createMetricsReporting({log:l,eventBus:a,mediaElement:q(),dashManifestModel:C,metricsModel:y})}(),function(){if(v)return;var e=dashjs.MssHandler;"function"!=typeof e||(v=e(o).create({eventBus:a,mediaPlayerModel:T}))}()),W()}function G(e){if(!d)throw i;if("string"==typeof e){var t=(0,he.default)(o).getInstance();t.initialize(),u=t.parseURI(e)}else u=e;W()}function W(){h&&(h=!1,E.reset(),R.reset(),b.reset(),p.reset(),_.reset(),w.reset(),m=R=null),O()&&$()}function z(){return(0,re.default)(o).create({errHandler:A,metricsModel:y,requestModifier:(0,ce.default)(o).getInstance(),mssHandler:v})}function X(){if(g)return g;var e=dashjs.Protection;if("function"!=typeof e)return null;var t=e(o).create();return Re.default.extend(e.events),be.default.extend(e.events,{publicOnly:!0}),g=t.createProtectionSystem({log:l,videoModel:P,capabilities:S,eventBus:a,adapter:E})}function Q(){var e=y.getReadOnlyMetricsFor("video")||y.getReadOnlyMetricsFor("audio");return I.getCurrentDVRInfo(e)}function J(e){var t=Q();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function Z(){if(!h)throw s;var e=R.getActiveStreamInfo();return e?R.getStreamById(e.id):null}function $(){var e;h||(h=!0,l("Playback Initialized"),(e=(0,ve.default)(o).getInstance()).initialize(),(0,ue.default)(o).getInstance().setConfig({dashManifestModel:C}),_.initialize(),_.setConfig({errHandler:A}),(R=(0,ne.default)(o).getInstance()).setConfig({capabilities:S,manifestLoader:z(),manifestModel:(0,fe.default)(o).getInstance(),dashManifestModel:C,protectionController:g,adapter:E,metricsModel:y,dashMetrics:I,liveEdgeFinder:(0,ae.default)(o).getInstance(),mediaSourceController:(0,ye.default)(o).getInstance(),timeSyncController:(0,me.default)(o).getInstance(),baseURLController:(0,Te.default)(o).getInstance(),errHandler:A,timelineConverter:(0,De.default)(o).getInstance()}),R.initialize(f,c),p.setConfig({abrRulesCollection:e,streamController:R}),(w=(0,de.default)(o).getInstance()).setConfig({errHandler:A,dashManifestModel:C,mediaController:_,streamController:R,videoModel:P}),"string"==typeof u?R.load(u):R.loadWithManifest(u))}return f=!(h=d=!(e={initialize:function(e,t,n){S=(0,oe.default)(o).getInstance(),A=(0,se.default)(o).getInstance(),S.supportsMediaSource()?d||(d=!0,p=(0,ge.default)(o).getInstance(),b=(0,te.default)(o).getInstance(),(_=(0,ie.default)(o).getInstance()).initialize(),C=(0,we.default)(o).getInstance(),I=(0,Oe.default)(o).getInstance(),(y=(0,_e.default)(o).getInstance()).setConfig({adapter:((E=(0,Pe.default)(o).getInstance()).initialize(),E.setConfig({dashManifestModel:C}),E)}),H(),k(void 0===n||n),e&&K(e),t&&G(t),l("[dash.js "+x()+"] MediaPlayer has been initialized")):A.capabilityError("mediasource")},on:function(e,t,n){a.on(e,t,n)},off:function(e,t,n){a.off(e,t,n)},extend:function(e,t,n){Ie.default.extend(e,t,n,o)},attachView:K,attachSource:G,isReady:O,play:function(){if(!h)throw s;(!f||D()&&h)&&b.play()},isPaused:D,pause:function(){if(!h)throw s;b.pause()},isSeeking:function(){if(!h)throw s;return b.isSeeking()},isDynamic:function(){if(!h)throw s;return b.getIsDynamic()},seek:function(e){if(!h)throw s;var t=b.getIsDynamic()?N(e):e;b.seek(t)},setMute:function(e){if(!P)throw t;q().muted=e},isMuted:function(){if(!P)throw t;return q().muted},setVolume:function(e){if(!P)throw t;q().volume=e},getVolume:function(){if(!P)throw t;return q().volume},time:M,duration:L,timeAsUTC:function(){if(!h)throw s;return M()<0?NaN:J(M())},durationAsUTC:function(){if(!h)throw s;return J(L())},getActiveStream:Z,getDVRWindowSize:function(){var e=Q();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:N,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(i<10?"0"+i.toString():i.toString())},formatUTC:function(e,t,n){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],r=new Date(1e3*e),a=r.toLocaleDateString(t),s=r.toLocaleTimeString(t,{hour12:n});return i?s+" "+a:s},getVersion:x,getDebug:function(){return r},getBufferLength:function(e){var t=["video","audio","fragmentedText"];if(e){if(-1===t.indexOf(e))return l("Warning  - getBufferLength requested for invalid type"),NaN;var n=F().getCurrentBufferLevel(U(e));return n||NaN}return t.map(function(e){return 0<V(e).length?F().getCurrentBufferLevel(U(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)})},getVideoModel:function(){if(!P)throw t;return P},getVideoContainer:function(){return P?P.getVideoContainer():null},getTTMLRenderingDiv:function(){return P?P.getTTMLRenderingDiv():null},getVideoElement:q,getSource:function(){if(!u)throw n;return u},setLiveDelayFragmentCount:function(e){T.setLiveDelayFragmentCount(e)},setLiveDelay:function(e){T.setLiveDelay(e)},getLiveDelay:function(){return T.getLiveDelay()},useSuggestedPresentationDelay:function(e){T.setUseSuggestedPresentationDelay(e)},enableLastBitrateCaching:function(e,t){T.setLastBitrateCachingInfo(e,t)},enableLastMediaSettingsCaching:function(e,t){T.setLastMediaSettingsCachingInfo(e,t)},setMaxAllowedBitrateFor:function(e,t){p.setMaxAllowedBitrateFor(e,t)},getMaxAllowedBitrateFor:function(e){return p.getMaxAllowedBitrateFor(e)},setMinAllowedBitrateFor:function(e,t){p.setMinAllowedBitrateFor(e,t)},getMinAllowedBitrateFor:function(e){return p.getMinAllowedBitrateFor(e)},setMaxAllowedRepresentationRatioFor:function(e,t){p.setMaxAllowedRepresentationRatioFor(e,t)},getMaxAllowedRepresentationRatioFor:function(e){return p.getMaxAllowedRepresentationRatioFor(e)},setAutoPlay:k,getAutoPlay:function(){return f},setScheduleWhilePaused:function(e){T.setScheduleWhilePaused(e)},getScheduleWhilePaused:function(){return T.getScheduleWhilePaused()},getDashMetrics:F,getMetricsFor:U,getQualityFor:function(e){if(!h)throw s;return p.getQualityFor(e,R.getActiveStreamInfo())},setQualityFor:function(e,t){if(!h)throw s;p.setPlaybackQuality(e,R.getActiveStreamInfo(),t)},updatePortalSize:function(){p.setElementSize(),p.setWindowResizeEventCalled(!0)},getLimitBitrateByPortal:function(){return p.getLimitBitrateByPortal()},setLimitBitrateByPortal:function(e){p.setLimitBitrateByPortal(e)},getUsePixelRatioInLimitBitrateByPortal:function(){return p.getUsePixelRatioInLimitBitrateByPortal()},setUsePixelRatioInLimitBitrateByPortal:function(e){p.setUsePixelRatioInLimitBitrateByPortal(e)},setTextTrack:function(e){if(!h)throw s;void 0===w&&(w=(0,de.default)(o).getInstance());for(var t=q().textTracks,n=t.length,i=0;i<n;i++){var r=t[i],a=e===i?"showing":"hidden";r.mode!==a&&(r.mode=a)}w.setTextTrack()},getBitrateInfoListFor:function(e){if(!h)throw s;var t=Z();return t?t.getBitrateListFor(e):[]},setInitialBitrateFor:function(e,t){p.setInitialBitrateFor(e,t)},getInitialBitrateFor:function(e){if(!h)throw s;return p.getInitialBitrateFor(e)},setInitialRepresentationRatioFor:function(e,t){p.setInitialRepresentationRatioFor(e,t)},getInitialRepresentationRatioFor:function(e){return p.getInitialRepresentationRatioFor(e)},getStreamsFromManifest:function(e){if(!h)throw s;return E.getStreamsInfo(e)},getTracksFor:V,getTracksForTypeFromManifest:function(e,t,n){if(!h)throw s;return(n=n||E.getStreamsInfo(t)[0])?E.getAllMediaInfoForType(t,n,e):[]},getCurrentTrackFor:function(e){if(!h)throw s;var t=R.getActiveStreamInfo();return t?_.getCurrentTrackFor(e,t):null},setInitialMediaSettingsFor:function(e,t){_.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){return _.getInitialSettings(e)},setCurrentTrack:function(e){if(!h)throw s;_.setTrack(e)},getTrackSwitchModeFor:function(e){return _.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){_.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){_.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){return _.getSelectionModeForInitialTrack()},getAutoSwitchQuality:function(){return p.getAutoSwitchBitrateFor("video")||p.getAutoSwitchBitrateFor("audio")},setAutoSwitchQuality:function(e){p.setAutoSwitchBitrateFor("video",e),p.setAutoSwitchBitrateFor("audio",e)},setFastSwitchEnabled:function(e){T.setFastSwitchEnabled(e)},getFastSwitchEnabled:function(){return T.getFastSwitchEnabled()},getAutoSwitchQualityFor:function(e){return p.getAutoSwitchBitrateFor(e)},setAutoSwitchQualityFor:function(e,t){p.setAutoSwitchBitrateFor(e,t)},enableBufferOccupancyABR:function(e){T.setBufferOccupancyABREnabled(e)},setBandwidthSafetyFactor:function(e){T.setBandwidthSafetyFactor(e)},getBandwidthSafetyFactor:function(){return T.getBandwidthSafetyFactor()},setAbandonLoadTimeout:function(e){T.setAbandonLoadTimeout(e)},retrieveManifest:function(e,n){var i=z(),r=this;a.on(Re.default.INTERNAL_MANIFEST_LOADED,function e(t){t.error?n(null,t.error):n(t.manifest),a.off(Re.default.INTERNAL_MANIFEST_LOADED,e,r),i.reset()},r);var t=(0,he.default)(o).getInstance();t.initialize(),i.load(t.parseURI(e))},addUTCTimingSource:B,removeUTCTimingSource:j,clearDefaultUTCTimingSources:function(){T.setUTCTimingSources([])},restoreDefaultUTCTimingSources:H,setBufferToKeep:function(e){T.setBufferToKeep(e)},setBufferPruningInterval:function(e){T.setBufferPruningInterval(e)},setStableBufferTime:function(e){T.setStableBufferTime(e)},setBufferTimeAtTopQuality:function(e){T.setBufferTimeAtTopQuality(e)},setFragmentLoaderRetryAttempts:function(e){T.setFragmentRetryAttempts(e)},setFragmentLoaderRetryInterval:function(e){T.setFragmentRetryInterval(e)},setXHRWithCredentials:function(e){Y(void 0,e)},setXHRWithCredentialsForType:Y,getXHRWithCredentialsForType:function(e){return T.getXHRWithCredentialsForType(e)},setBufferTimeAtTopQualityLongForm:function(e){T.setBufferTimeAtTopQualityLongForm(e)},setLongFormContentDurationThreshold:function(e){T.setLongFormContentDurationThreshold(e)},setRichBufferThreshold:function(e){T.setRichBufferThreshold(e)},getProtectionController:function(){return X()},attachProtectionController:function(e){g=e},setProtectionData:function(e){c=e},enableManifestDateHeaderTimeSource:function(e){T.setUseManifestDateHeaderTimeSource(e)},displayCaptionsOnTop:function(e){var t=(0,le.default)(o).getInstance();t.setConfig({videoModel:P}),t.initialize(),t.displayCConTop(e)},attachVideoContainer:function(e){if(!P)throw t;P.setVideoContainer(e)},attachTTMLRenderingDiv:function(e){if(!P)throw t;P.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=NaN;return w&&(e=w.getCurrentTrackIdx()),e},reset:function(){G(null),K(null),g=c=null}})),E=c=g=null,Re.default.extend(be.default),T=(0,pe.default)(o).getInstance(),e}r.__dashjs_factory_name="MediaPlayer";var a=Ie.default.getClassFactory(r);a.events=be.default,n.default=a,t.exports=n.default},{10:10,100:100,101:101,102:102,11:11,13:13,130:130,143:143,145:145,148:148,15:15,152:152,155:155,157:157,17:17,22:22,38:38,48:48,50:50,53:53,59:59,60:60,65:65,66:66,67:67,69:69,70:70,71:71,8:8,9:9,98:98,99:99}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(14),a=(i=r)&&i.__esModule?i:{default:i},s=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.STREAM_INITIALIZED="streamInitialized",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),t}());n.default=s,t.exports=n.default},{14:14}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(52),a=(i=r)&&i.__esModule?i:{default:i};var s=function(){var o="application/dash+xml";function l(e,t,n){if(!e||"VIDEO"!==e.nodeName)return null;if(e._dashjs_player)return e._dashjs_player;var i,r=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==o})[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return n=n||{},(i=(0,a.default)(n).create()).initialize(e,t.src,e.autoplay),i.getDebug().log("Converted "+r+" to dash.js player and added content: "+t.src),e._dashjs_player=i}function u(e){for(var t=!0;t;){var n=e;if(t=!1,"video"===n.nodeName.toLowerCase())return n;e=n.parentNode,t=!0}}return{create:l,createAll:function(e,t){var n=[];e=e||"[data-dashjs-player]";for(var i=(t=t||document).querySelectorAll(e),r=0;r<i.length;r++){var a=l(i[r],null);n.push(a)}var s=t.querySelectorAll('source[type="'+o+'"]');for(r=0;r<s.length;r++)a=l(u(s[r]),null),n.push(a);return n}}}(),o=void 0;!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?s.createAll():o=window.setInterval(function(){window.dashjs&&(window.clearInterval(o),s.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),s.createAll()})),n.default=s,t.exports=n.default},{52:52}],55:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var B=i(e(155)),j=i(e(56)),H=i(e(65)),Y=i(e(63)),q=i(e(64)),K=i(e(59)),G=i(e(102)),W=i(e(100)),z=i(e(67)),X=i(e(16)),Q=i(e(18)),J=i(e(19)),Z=i(e(17)),$=i(e(9)),ee=i(e(13)),te=i(e(8)),r=i(e(10)),ne=i(e(143));function a(e){var i=1,d=this.context,o=(0,te.default)(d).getInstance().log,r=(0,$.default)(d).getInstance(),h=e.manifestModel,a=e.manifestUpdater,f=e.adapter,s=e.capabilities,l=e.errHandler,p=e.timelineConverter,_=e.baseURLController,g=void 0,m=void 0,u=void 0,c=void 0,v=void 0,E=void 0,y=void 0,T=void 0,A=void 0,S=void 0,R=void 0,b=void 0,I=void 0,C=void 0,P=void 0,w=void 0;function t(){for(var e=m.length,t=0;t<e;t++)m[t].reset();c=u=!(m=[]),C&&C.clear(),r.off(ee.default.CURRENT_TRACK_CHANGED,N,g)}function n(){R&&(R.pause(),R=null),I&&(I.reset(),I=null),t(),l=o=s=f=h=a=P=b=null,T=y=!1,E={},r.off(ee.default.DATA_UPDATE_COMPLETED,U,g),r.off(ee.default.BUFFERING_COMPLETED,F,g),r.off(ee.default.KEY_ERROR,O,g),r.off(ee.default.SERVER_CERTIFICATE_UPDATED,O,g),r.off(ee.default.LICENSE_REQUEST_COMPLETE,O,g),r.off(ee.default.KEY_SYSTEM_SELECTED,O,g),r.off(ee.default.KEY_SESSION_CREATED,O,g)}function O(e){e.error&&(l.mediaKeySessionError(e.error),o(e.error),n())}function D(e,t,n){var i,r,a=e.type;if("muxed"===a&&e)return o(r="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),l.manifestError(r,"multiplexedrep",h.getValue()),!1;if("text"===a||"fragmentedText"===a||"embeddedText"===a)return!0;if(i=e.codec,o(a+" codec: "+i),e.contentProtection&&!s.supportsEncryptedMedia())l.capabilityError("encryptedmedia");else if(!s.supportsCodec((0,G.default)(d).getInstance().getElement(),i))return r=a+"Codec ("+i+") is not supported.",l.manifestError(r,"codec",n),o(r),!1;return!0}function N(e){if(e.newMediaInfo.streamInfo.id===v.id){var t,n=!!(t=e.oldMediaInfo)&&V().filter(function(e){return e.getType()===t.type})[0];if(n){var i=R.getTime(),r=n.getBuffer(),a=e.newMediaInfo,s=h.getValue(),o=m.indexOf(n),l=n.getMediaSource();"fragmentedText"!==a.type?(n.reset(!0),M(a,s,l,{buffer:r,replaceIdx:o,currentTime:i}),R.seek(R.getTime())):n.updateMediaInfo(s,a)}}}function M(e,t,n,i){var r,a,s,o=(0,j.default)(d).create({indexHandler:(r=e,a="webm"===r.mimeType.split("/")[1].toLowerCase()?(0,J.default)(d).getInstance():(0,Q.default)(d).getInstance(),a.setConfig({baseURLController:_,metricsModel:(0,W.default)(d).getInstance()}),a.initialize(),(0,X.default)(d).create({segmentBaseLoader:a,timelineConverter:p,dashMetrics:(0,Z.default)(d).getInstance(),metricsModel:(0,W.default)(d).getInstance(),baseURLController:_})),timelineConverter:p,adapter:f,manifestModel:h}),l=f.getAllMediaInfoForType(t,v,e.type);if(o.initialize("text"===(s=e).type?s.mimeType:s.type,I,n,g,C),P.updateTopQualityIndex(e),i?(o.setBuffer(i.buffer),o.getIndexHandler().setCurrentTime(i.currentTime),m[i.replaceIdx]=o):m.push(o),"text"===e.type||"fragmentedText"===e.type){for(var u,c=0;c<l.length;c++)l[c].index===e.index&&(u=c),o.updateMediaInfo(t,l[c]);"fragmentedText"===e.type&&o.updateMediaInfo(t,l[u])}else o.updateMediaInfo(t,e)}function L(e,t){var n=h.getValue(),i=f.getAllMediaInfoForType(n,v,e),r=null;if(i&&0!==i.length){for(var a=0,s=i.length;a<s;a++)if(r=i[a],"embeddedText"===e)w.addEmbeddedTrack(r);else{if(!D(r,0,n))continue;b.isMultiTrackSupportedByType(r.type)&&b.addTrack(r,v)}"embeddedText"!==e&&0!==b.getTracksFor(e,v).length&&(b.checkInitialMediaSettingsForType(e,v),M(b.getCurrentTrackFor(e,v),n,t))}else o("No "+e+" data.")}function x(){for(var e=m.length,t=!!E.audio||!!E.video?new Error(i,"Data update failed",null):null,n=0;n<e;n++)if(m[n].isUpdating()||y)return;T=!0,c&&(A&&A.initialize(h.getValue(),k("audio"),k("video")),r.trigger(ee.default.STREAM_INITIALIZED,{streamInfo:v,error:t}))}function k(e){for(var t=m.length,n=null,i=0;i<t;i++)if((n=m[i]).getType()===e)return n.getMediaInfo();return null}function F(e){if(e.streamInfo===v){for(var t=V(),n=t.length,i=0;i<n;i++)if(!t[i].isBufferingCompleted())return;r.trigger(ee.default.STREAM_BUFFERING_COMPLETED,{streamInfo:v})}}function U(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===v&&(E[t.getType()]=e.error,x())}function V(){for(var e,t,n=m.length,i=[],r=0;r<n;r++)"audio"!==(e=(t=m[r]).getType())&&"video"!==e&&"fragmentedText"!==e||i.push(t);return i}return g={initialize:function(e,t){v=e,(A=t)&&(r.on(ee.default.KEY_ERROR,O,g),r.on(ee.default.SERVER_CERTIFICATE_UPDATED,O,g),r.on(ee.default.LICENSE_REQUEST_COMPLETE,O,g),r.on(ee.default.KEY_SYSTEM_SELECTED,O,g),r.on(ee.default.KEY_SESSION_CREATED,O,g))},activate:function(e){u||(r.on(ee.default.CURRENT_TRACK_CHANGED,N,g),function(e){var t,n=h.getValue();if((C=(0,Y.default)(d).getInstance()).initialize(),C.setConfig({manifestModel:h,manifestUpdater:a}),t=f.getEventsFor(n,v),C.addInlineEvents(t),y=!0,L("video",e),L("audio",e),L("text",e),L("fragmentedText",e),L("embeddedText",e),L("muxed",e),function(){for(var e=0,t=m.length;e<t;e++)m[e].createBuffer()}(),y=!(c=!0),0===m.length){var i="No streams to play.";l.manifestError(i,"nostreams",n),o(i)}else S.initialize(p,m[0]),x()}(e),u=!0)},deactivate:t,getDuration:function(){return v.duration},getStartTime:function(){return v.start},getStreamIndex:function(){return v.index},getId:function(){return v.id},getStreamInfo:function(){return v},hasMedia:function(e){return null!==k(e)},getBitrateListFor:function(e){var t=k(e);return P.getBitrateList(t)},startEventController:function(){C&&C.start()},isActivated:function(){return u},isInitialized:function(){return T},updateData:function(e){o("Manifest updated... updating data system wide.");var t=h.getValue();if(T=!(y=!(u=!1)),v=e,C){var n=f.getEventsFor(t,v);C.addInlineEvents(n)}for(var i=0,r=m.length;i<r;i++){var a=m[i],s=f.getMediaInfoForType(t,v,a.getType());P.updateTopQualityIndex(s),a.updateMediaInfo(t,s)}y=!1,x()},reset:n,getProcessors:V},c=u=!(m=[]),v=null,T=y=!(E={}),S=(0,B.default)(d).getInstance(),R=(0,z.default)(d).getInstance(),P=(0,K.default)(d).getInstance(),b=(0,H.default)(d).getInstance(),I=(0,q.default)(d).create(),w=(0,ne.default)(d).getInstance(),r.on(ee.default.BUFFERING_COMPLETED,F,g),r.on(ee.default.DATA_UPDATE_COMPLETED,U,g),g}a.__dashjs_factory_name="Stream",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,100:100,102:102,13:13,143:143,155:155,16:16,17:17,18:18,19:19,56:56,59:59,63:63,64:64,65:65,67:67,8:8,9:9}],56:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var A=i(e(59)),S=i(e(62)),R=i(e(70)),b=i(e(65)),I=i(e(142)),C=i(e(68)),P=i(e(99)),w=i(e(100)),O=i(e(49)),D=i(e(157)),N=i(e(69)),M=i(e(143)),L=i(e(22)),x=i(e(17)),k=i(e(21)),F=i(e(152)),r=i(e(10));function a(e){var t,s=this.context,o=e.indexHandler,l=e.timelineConverter,u=e.adapter,c=e.manifestModel,d=void 0,n=void 0,h=void 0,i=void 0,f=void 0,p=void 0,_=void 0,g=void 0,m=void 0,v=void 0,E=void 0,y=void 0,T=void 0;return t={initialize:function(e,t,n,i,r){h=e,p=r,E=t,d=(f=i).getStreamInfo().manifestInfo.isDynamic,o.initialize(this),(_=(0,A.default)(s).getInstance()).initialize(h,this),a=e,g="video"===a||"audio"===a?(0,S.default)(s).create({metricsModel:(0,w.default)(s).getInstance(),manifestModel:c,sourceBufferController:(0,N.default)(s).getInstance(),errHandler:(0,F.default)(s).getInstance(),streamController:(0,R.default)(s).getInstance(),mediaController:(0,b.default)(s).getInstance(),adapter:u,textController:(0,M.default)(s).getInstance()}):(0,I.default)(s).create({type:a,metricsModel:(0,w.default)(s).getInstance(),manifestModel:c,sourceBufferController:(0,N.default)(s).getInstance(),errHandler:(0,F.default)(s).getInstance(),streamController:(0,R.default)(s).getInstance(),mediaController:(0,b.default)(s).getInstance(),adapter:u,textController:(0,M.default)(s).getInstance()}),m=(0,C.default)(s).create({metricsModel:(0,w.default)(s).getInstance(),manifestModel:c,adapter:u,dashMetrics:(0,x.default)(s).getInstance(),dashManifestModel:(0,L.default)(s).getInstance(),timelineConverter:l,mediaPlayerModel:(0,P.default)(s).getInstance()}),g.initialize(h,n,this),m.initialize(h,this),y=(0,O.default)(s).create({metricsModel:(0,w.default)(s).getInstance(),errHandler:(0,F.default)(s).getInstance(),requestModifier:(0,D.default)(s).getInstance()}),(T=m.getFragmentModel()).setLoader(y),(v=(0,k.default)(s).create()).initialize(this);var a},isUpdating:function(){return v.isUpdating()},getType:function(){return h},getBufferController:function(){return g},getABRController:function(){return _},getFragmentLoader:function(){return y},getFragmentModel:function(){return T},getScheduleController:function(){return m},getEventController:function(){return p},getFragmentController:function(){return E},getRepresentationController:function(){return v},getIndexHandler:function(){return o},getCurrentRepresentationInfo:function(){return u.getCurrentRepresentationInfo(c.getValue(),v)},getRepresentationInfoForQuality:function(e){return u.getRepresentationInfoForQuality(c.getValue(),v,e)},isBufferingCompleted:function(){return g.getIsBufferingCompleted()},createBuffer:function(){return g.getBuffer()||g.createBuffer(n)},getStreamInfo:function(){return f?f.getStreamInfo():null},updateMediaInfo:function(e,t){t===n||t&&n&&t.type!==n.type||(n=t),-1===i.indexOf(t)&&i.push(t),u.updateData(e,this)},getMediaInfoArr:function(){return i},getMediaInfo:function(){return n},getMediaSource:function(){return g.getMediaSource()},getBuffer:function(){return g.getBuffer()},setBuffer:function(e){g.setBuffer(e)},start:function(){m.start()},stop:function(){m.stop()},isDynamic:function(){return d},reset:function(e){o.reset(),g&&(g.reset(e),g=null),m&&(m.reset(),m=null),v&&(v.reset(),v=null),i=[],h=n=d=f=p=y=E=null}},i=[],t}a.__dashjs_factory_name="StreamProcessor",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,100:100,142:142,143:143,152:152,157:157,17:17,21:21,22:22,49:49,59:59,62:62,65:65,68:68,69:69,70:70,99:99}],57:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var a=e(182),s=i(e(10)),o=i(e(99)),l=i(e(152));function u(e){var t,n,i=this.context,m=(0,o.default)(i).getInstance(),v=e.errHandler,E=e.metricsModel,y=e.requestModifier,T=void 0,A=void 0,S=void 0,R=void 0;return t={load:function(e){e.request&&function e(n,t){var i,r=n.request,a=new XMLHttpRequest,s=[],o=!0,l=!0,u=new Date,c=u,d=0,h=function(e){l=!1,r.requestStartDate=u,r.requestEndDate=new Date,r.firstByteDate=r.firstByteDate||u,r.checkExistenceOnly||E.addHttpRequest(r.mediaType,null,r.type,r.url,a.responseURL||null,r.serviceLocation||null,r.range||null,r.requestStartDate,r.firstByteDate,r.requestEndDate,a.status,r.duration,a.getAllResponseHeaders(),e?s:null)},f=function(){-1!==T.indexOf(a)&&(T.splice(T.indexOf(a),1),l&&(h(!1),0<t?(t--,S.push(setTimeout(function(){e(n,t)},m.getRetryIntervalForType(r.type)))):(v.downloadError(R[r.type],r.url,r),n.error&&n.error(r,"error",a.statusText),n.complete&&n.complete(r,a.statusText))))};try{var p=y.modifyRequestURL(r.url),_=r.checkExistenceOnly?"HEAD":"GET";a.open(_,p,!0),r.responseType&&(a.responseType=r.responseType),r.range&&a.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=u),(a=y.modifyRequestHeader(a)).withCredentials=m.getXHRWithCredentialsForType(r.type),a.onload=function(){200<=a.status&&a.status<=299&&(h(!0),n.success&&n.success(a.response,a.statusText,a),n.complete&&n.complete(r,a.statusText))},a.onloadend=f,a.onerror=f,a.onprogress=function(e){var t=new Date;o&&(o=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(r.firstByteDate=t)),e.lengthComputable&&(r.bytesLoaded=e.loaded,r.bytesTotal=e.total),s.push({s:c,d:t.getTime()-c.getTime(),b:[e.loaded?e.loaded-d:0]}),c=t,d=e.loaded,n.progress&&n.progress()};var g=(new Date).getTime();isNaN(r.delayLoadingTime)||g>=r.delayLoadingTime?(T.push(a),a.send()):(i={xhr:a},A.push(i),i.delayTimeout=setTimeout(function(){if(-1!==A.indexOf(i)){A.splice(A.indexOf(i),1);try{T.push(i.xhr),i.xhr.send()}catch(e){i.xhr.onerror()}}},r.delayLoadingTime-g))}catch(e){a.onerror()}}(e,m.getRetryAttemptsForType(e.request.type))},abort:function(){S.forEach(function(e){return clearTimeout(e)}),S=[],A.forEach(function(e){return clearTimeout(e.delayTimeout)}),A=[],T.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}),T=[]}},T=[],A=[],S=[],r(n={},a.HTTPRequest.MPD_TYPE,l.default.DOWNLOAD_ERROR_ID_MANIFEST),r(n,a.HTTPRequest.XLINK_EXPANSION_TYPE,l.default.DOWNLOAD_ERROR_ID_XLINK),r(n,a.HTTPRequest.INIT_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_INITIALIZATION),r(n,a.HTTPRequest.MEDIA_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),r(n,a.HTTPRequest.INDEX_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),r(n,a.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),r(n,a.HTTPRequest.OTHER_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),R=n,t}u.__dashjs_factory_name="XHRLoader";var c=s.default.getClassFactory(u);n.default=c,t.exports=n.default},{10:10,152:152,182:182,99:99}],58:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(165)),r=i(e(57)),u=e(182),c=i(e(173)),d=i(e(9)),h=i(e(13)),a=i(e(10));function s(e){var a="urn:mpeg:dash:resolve-to-zero:2013",t=this.context,s=(0,d.default)(t).getInstance(),o=(0,r.default)(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier});return{load:function(n,i,r){var t=function(e,t){i.resolved=!0,i.resolvedContent=e||null,s.trigger(h.default.XLINK_ELEMENT_LOADED,{element:i,resolveObject:r,error:e||t?null:new l.default(1,"Failed loading Xlink element: "+n)})};if(n===a)t(null,!0);else{var e=new c.default(n,u.HTTPRequest.XLINK_TYPE);o.load({request:e,success:function(e){t(e)},error:function(){t(null)}})}},reset:function(){o&&(o.abort(),o=null)}}}s.__dashjs_factory_name="XlinkLoader";var o=a.default.getClassFactory(s);o.XLINK_LOADER_ERROR_LOADING_FAILURE=1,n.default=o,t.exports=n.default},{10:10,13:13,165:165,173:173,182:182,57:57,9:9}],59:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var W=i(e(163)),z=i(e(150)),X=i(e(99)),Q=i(e(97)),J=i(e(9)),Z=i(e(13)),$=i(e(53)),r=i(e(10)),ee=i(e(98)),te=i(e(22)),ne=i(e(102)),ie=i(e(127)),re=i(e(128)),ae=i(e(129)),se=i(e(126)),oe=i(e(100)),le=i(e(17)),ue=i(e(8)),ce="abandonload",de="allowload";function a(){var e,c=this.context,d=(0,ue.default)(c).getInstance(),h=d.log,f=(0,J.default)(c).getInstance(),p=void 0,o=void 0,n=void 0,l=void 0,_=void 0,a=void 0,s=void 0,i=void 0,u=void 0,g=void 0,m=void 0,v=void 0,r=void 0,E=void 0,y=void 0,T=void 0,A=void 0,S=void 0,R=void 0,b=void 0,I=void 0,C=void 0,P=void 0,w=void 0,O=void 0,D=void 0;function t(){n={video:!0,audio:!0},l={},_={},a={},s={},i={},g={},u={},r=v=!(P={}),void 0===E&&(E=!1),I=(0,z.default)(c).getInstance(),b=(0,X.default)(c).getInstance(),A=(0,ee.default)(c).getInstance(),S=(0,te.default)(c).getInstance(),R=(0,ne.default)(c).getInstance(),O=(0,oe.default)(c).getInstance(),D=(0,le.default)(c).getInstance(),(new Date).getTime()/1e3}function N(e){"video"===e.mediaType&&(C=e.newQuality,w.push(C,R.getPlaybackQuality()))}function M(e,t){return l[t]=l[t]||{},l[t].hasOwnProperty(e)||(l[t][e]=0),function(e,t){if("video"!==t||!v||!u[t])return e;E||K();var n=A.getValue(),i=S.getAdaptationForType(n,0,t).Representation,r=e;if(0<y&&0<T){for(;0<r&&i[r]&&y<i[r].width&&y-i[r-1].width<i[r].width-y;)r-=1;i.length-2>=r&&i[r].width===i[r+1].width&&(r=Math.min(e,r+1))}return r}(function(e,t,n){var i=k(t);if(isNaN(i)||1<=i||i<0)return e;return Math.min(e,Math.round(n*i))}(function(e,t){var n=e;if(!u[t])return n;var i=x(t);if(i){var r=j(u[t].getMediaInfo(),i);n=Math.max(e,r)}var a=L(t);if(a){var s=j(u[t].getMediaInfo(),a);n=Math.min(n,s)}return n}(l[t][e],e),e,l[t][e]),e)}function L(e){return a.hasOwnProperty("max")&&a.max.hasOwnProperty(e)?a.max[e]:NaN}function x(e){return a.hasOwnProperty("min")&&a.min.hasOwnProperty(e)?a.min[e]:NaN}function k(e){return s.hasOwnProperty("max")&&s.max.hasOwnProperty(e)?s.max[e]:1}function F(e){return n[e]}function U(e,t,n,i){var r=t.id,a=q(e,t);if(!(null!==n&&!isNaN(n)&&n%1==0))throw new Error("argument is not an integer");var s=M(e,r);n!==a&&0<=n&&n<=s&&V(e,t,a,n,s,i)}function V(e,t,n,i,r,a){if(d.getLogToBrowserConsole()){var s=D.getCurrentBufferLevel(O.getReadOnlyMetricsFor(e));h("AbrController ("+e+") switch from "+n+" to "+i+"/"+r+" (buffer: "+s+")\n"+JSON.stringify(a))}var o,l,u;o=e,l=t.id,u=i,_[l]=_[l]||{},_[l][o]=u,f.trigger(Z.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:t,oldQuality:n,newQuality:i,reason:a})}function B(e,t){g[e].state=t}function j(e,t,n){if(n&&u[e.type].getCurrentRepresentationInfo()&&u[e.type].getCurrentRepresentationInfo().fragmentDuration){n/=1e3;var i=u[e.type].getCurrentRepresentationInfo().fragmentDuration;if(i<n)return 0;t*=1-n/i}var r=H(e);if(!r||0===r.length)return 0;for(var a=r.length-1;0<=a;a--){if(1e3*t>=r[a].bitrate)return a}return 0}function H(e){if(!e||!e.bitrateList)return null;for(var t,n=e.bitrateList,i=e.type,r=[],a=0,s=n.length;a<s;a++)(t=new W.default).mediaType=i,t.qualityIndex=a,t.bitrate=n[a].bandwidth,t.width=n[a].width,t.height=n[a].height,r.push(t);return r}function Y(e){var t=O.getReadOnlyMetricsFor(e),n=D.getCurrentBufferLevel(t),i=0<t.BufferState.length?t.BufferState[t.BufferState.length-1]:null,r=!1;return i&&n>i.target&&(r=n>i.target+b.getRichBufferThreshold()),r}function q(e,t){var n=t.id;return _[n]=_[n]||{},_[n].hasOwnProperty(e)||(_[n][e]=0),_[n][e]}function K(){var e=R.getElement();if(void 0!==e){var t=r&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;y=e.clientWidth*t,T=e.clientHeight*t}}function G(e){var t=e.request.mediaType;if(F(t)){var n=u[t].getScheduleController();if(!n)return;var i=(0,ie.default)(c).create({streamProcessor:u[t],currentRequest:e.request,currentValue:q(t,o.getActiveStreamInfo()),hasRichBuffer:Y(t)}),r=p.shouldAbandonFragment(i);if(r.value>re.default.NO_CHANGE){var a=n.getFragmentModel(),s=a.getRequests({state:Q.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0];s&&(a.abortRequests(),B(t,ce),P[t].reset(),P[t].push({oldValue:q(t,o.getActiveStreamInfo()),newValue:r.value,confidence:1,reason:r.reason}),U(t,o.getActiveStreamInfo(),r.value,r.reason),f.trigger(Z.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:u[t],request:s,mediaType:t}),clearTimeout(m),m=setTimeout(function(){B(t,de),m=null},b.getAbandonLoadTimeout()))}}}return e={isPlayingAtTopQuality:function(e){var t=e.id,n=q("audio",e),i=q("video",e);return n===M("audio",t)&&i===M("video",t)},updateTopQualityIndex:function(e){var t,n,i,r=e.type,a=e.streamInfo.id,s=e.representationCount-1;return t=r,i=s,l[n=a]=l[n]||{},l[n][t]=i,s},getAverageThroughput:function(e){return i[e]},getBitrateList:H,getQualityForBitrate:j,getMaxAllowedBitrateFor:L,getMinAllowedBitrateFor:x,setMaxAllowedBitrateFor:function(e,t){a.max=a.max||{},a.max[e]=t},setMinAllowedBitrateFor:function(e,t){a.min=a.min||{},a.min[e]=t},getMaxAllowedRepresentationRatioFor:k,setMaxAllowedRepresentationRatioFor:function(e,t){s.max=s.max||{},s.max[e]=t},getInitialBitrateFor:function(e){var t=I.getSavedBitrateSettings(e);if(!a.hasOwnProperty(e))if(s.hasOwnProperty(e)){var n=A.getValue(),i=S.getAdaptationForType(n,0,e).Representation;if(Array.isArray(i)){var r=Math.max(Math.round(i.length*s[e])-1,0);a[e]=i[r].bandwidth}else a[e]=0}else isNaN(t)?a[e]="video"===e?1e3:100:a[e]=t;return a[e]},setInitialBitrateFor:function(e,t){a[e]=t},getInitialRepresentationRatioFor:function(e){return s.hasOwnProperty(e)?s[e]:null},setInitialRepresentationRatioFor:function(e,t){s[e]=t},setAutoSwitchBitrateFor:function(e,t){n[e]=t},getAutoSwitchBitrateFor:F,setLimitBitrateByPortal:function(e){v=e},getLimitBitrateByPortal:function(){return v},getUsePixelRatioInLimitBitrateByPortal:function(){return r},setUsePixelRatioInLimitBitrateByPortal:function(e){r=e},getQualityFor:q,getAbandonmentStateFor:function(e){return g[e].state},setAbandonmentStateFor:B,setPlaybackQuality:U,getPlaybackQuality:function(e){var t=e.getType(),n=e.getStreamInfo(),i=n.id,r=q(t,n),a=(0,ie.default)(c).create({streamProcessor:e,currentValue:r,playbackIndex:C,switchHistory:P[t],droppedFramesHistory:w,hasRichBuffer:Y(t)});if(w&&w.push(C,R.getPlaybackQuality()),F(t)){var s=M(t,i),o=p.getMaxQuality(a),l=o.value;if(s<l&&(l=s),P[t].push({oldValue:r,newValue:l}),l>re.default.NO_CHANGE&&l!=r)(g[t].state===de||r<l)&&V(t,n,r,l,s,o.reason);else if(d.getLogToBrowserConsole()){var u=D.getCurrentBufferLevel(O.getReadOnlyMetricsFor(t));h("AbrController ("+t+") stay on "+r+"/"+s+" (buffer: "+u+")")}}},setAverageThroughput:function(e,t){i[e]=t},getTopQualityIndexFor:M,setElementSize:K,setWindowResizeEventCalled:function(e){E=e},initialize:function(e,t){P[e]=(0,ae.default)(c).create(),u[e]=t,g[e]=g[e]||{},g[e].state=de,f.on(Z.default.LOADING_PROGRESS,G,this),"video"==e&&(f.on($.default.QUALITY_CHANGE_RENDERED,N,this),w=(0,se.default)(c).create(),K())},setConfig:function(e){e&&(e.abrRulesCollection&&(p=e.abrRulesCollection),e.streamController&&(o=e.streamController))},reset:function(){f.off(Z.default.LOADING_PROGRESS,G,this),f.off($.default.QUALITY_CHANGE_RENDERED,N,this),w=C=void 0,clearTimeout(m),m=null,t()}},t(),e}a.__dashjs_factory_name="AbrController";var s=r.default.getSingletonFactory(a);s.ABANDON_LOAD=ce,s.QUALITY_DEFAULT=0,n.default=s,t.exports=n.default},{10:10,100:100,102:102,126:126,127:127,128:128,129:129,13:13,150:150,163:163,17:17,22:22,53:53,8:8,9:9,97:97,98:98,99:99}],60:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(96)),l=i(e(146)),u=i(e(159)),c=i(e(41)),r=i(e(10)),d=i(e(9)),h=i(e(13));function a(){var e=void 0,t=this.context,n=(0,d.default)(t).getInstance(),i=(0,u.default)(t).getInstance(),r=void 0,a=void 0;function s(e){r.invalidateSelectedIndexes(e.entry)}return e={reset:function(){r.reset(),a.reset()},initialize:function(e){var t;t=e,r.update(t),a.chooseSelectorFromManifest(t)},resolve:function(e){var t=r.getForPath(e).reduce(function(e,t){var n=a.select(t);return n?(i.isRelative(n.url)?e.url=i.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e):new c.default},new c.default);if(!i.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(r=e.baseURLTreeModel),e.baseURLSelector&&(a=e.baseURLSelector)}},r=(0,o.default)(t).create(),a=(0,l.default)(t).create(),n.on(h.default.SERVICE_LOCATION_BLACKLIST_CHANGED,s,e),e}a.__dashjs_factory_name="BaseURLController",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,13:13,146:146,159:159,41:41,9:9,96:96}],61:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),o=i(e(9));function a(e){var t=[],n=(0,o.default)(this.context).getInstance(),i=e.updateEventName,r=e.loadFailedEventName;function a(e){-1===t.indexOf(e)&&(t.push(e),n.trigger(i,{entry:e}))}function s(e){e.error&&a(e.request.serviceLocation)}return function(){r&&n.on(r,s,this)}(),{add:a,contains:function(e){return!!(t.length&&e&&e.length)&&-1!==t.indexOf(e)},reset:function(){t=[]}}}a.__dashjs_factory_name="BlackListController",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,9:9}],62:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var re=i(e(97)),ae=i(e(99)),se=i(e(69)),oe=i(e(59)),le=i(e(67)),ue=i(e(65)),ce=i(e(9)),de=i(e(13)),he=i(e(147)),r=i(e(10)),fe=i(e(8)),pe=i(e(153)),_e="bufferLoaded",ge="bufferStalled";function a(e){var h=this.context,r=(0,fe.default)(h).getInstance().log,a=(0,ce.default)(h).getInstance(),t=e.metricsModel,u=e.manifestModel,s=e.sourceBufferController,n=e.errHandler,i=e.streamController,o=e.mediaController,f=e.adapter,l=e.textController,c=void 0,d=void 0,p=void 0,_=void 0,g=void 0,m=void 0,v=void 0,E=void 0,y=void 0,T=void 0,A=void 0,S=void 0,R=void 0,b=void 0,I=void 0,C=void 0,P=void 0,w=void 0,O=void 0,D=void 0,N=void 0,M=void 0;function L(e){e.fragmentModel===w.getFragmentModel()&&(r("Init fragment finished loading saving to",y+"'s init cache"),M.save(e.chunk),k(e.chunk))}function x(e){if(e.fragmentModel===w.getFragmentModel()){var t=e.chunk,n=t.bytes,i=t.quality,r=w.getRepresentationInfoForQuality(i),a=u.getValue(),s=f.getEventsFor(a,r.mediaInfo,w),o=f.getEventsFor(a,r,w);if(s&&0<s.length||o&&0<o.length){var l=function(e,t,n,i){var r=Math.max(isNaN(t.startTime)?0:t.startTime,0),a=[],s=[];C=!1;for(var o=n.concat(i),l=0,u=o.length;l<u;l++)a[o[l].schemeIdUri]=o[l];for(var c=(0,he.default)(h).getInstance().parse(e).getBoxes("emsg"),l=0,u=c.length;l<u;l++){var d=f.getEvent(c[l],a,r);d&&s.push(d)}return s}(n,w.getFragmentModel().getRequests({state:re.default.FRAGMENT_MODEL_EXECUTED,quality:i,index:t.index})[0],s,o);w.getEventController().addInbandEvents(l)}t.bytes=function(e){if(!C)return e;var t=e.length,n=Math.pow(256,2),i=Math.pow(256,3),r=new Uint8Array(e.length),a=0,s=0;for(;a<t;){var o=String.fromCharCode(e[a+4],e[a+5],e[a+6],e[a+7]),l=e[a]*i+e[a+1]*n+256*e[a+2]+1*e[a+3];if("emsg"!=o)for(var u=a;u<a+l;u++)r[s]=e[u],s++;a+=l}return r.subarray(0,s)}(n),k(t)}}function k(e){b=!0,S=e,s.append(T,e),"video"===e.mediaInfo.type&&a.trigger(de.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function F(e){if(T===e.buffer){if(e.error||!G())return e.error.code===se.default.QUOTA_EXCEEDED_ERROR_CODE&&(g=.8*s.getTotalBufferedTime(T)),void(e.error.code!==se.default.QUOTA_EXCEEDED_ERROR_CODE&&G()||(a.trigger(de.default.QUOTA_EXCEEDED,{sender:c,criticalBufferLevel:g}),z(W())));S&&!isNaN(S.index)&&(v=Math.max(S.index,v),Y());var t=s.getAllRanges(T);if(t&&0<t.length)for(var n=0,i=t.length;n<i;n++)r("Buffered Range for type:",y,":",t.start(n)," - ",t.end(n));B(),b=!1,S&&a.trigger(de.default.BYTES_APPENDED,{sender:c,quality:S.quality,startTime:S.start,index:S.index,bufferedRanges:t})}}function U(e){d!==e.newQuality&&y===e.mediaType&&w.getStreamInfo().id===e.streamInfo.id&&(Q(w.getRepresentationInfoForQuality(e.newQuality).MSETimeOffset),d=e.newQuality)}function V(){E=Number.POSITIVE_INFINITY,p=!1,B()}function B(){j(),H()}function j(){P&&(_=s.getBufferLength(T,P.getTime()),a.trigger(de.default.BUFFER_LEVEL_UPDATED,{sender:c,bufferLevel:_}),q())}function H(){w&&i&&w.getStreamInfo().id===i.getActiveStreamInfo().id&&(t.addBufferState(y,A,D.getBufferTarget()),t.addBufferLevel(y,new Date,1e3*_))}function Y(){E-1<=v&&!p&&(p=!0,a.trigger(de.default.BUFFERING_COMPLETED,{sender:c,streamInfo:w.getStreamInfo()}))}function q(){K(_<.5&&!p?ge:_e)}function K(e){A===e||"fragmentedText"===y&&l.getAllTracksAreDisabled()||(A=e,H(),a.trigger(de.default.BUFFER_LEVEL_STATE_CHANGED,{sender:c,state:e,mediaType:y,streamInfo:w.getStreamInfo()}),a.trigger(e===_e?de.default.BUFFER_LOADED:de.default.BUFFER_EMPTY,{mediaType:y}),r(e===_e?"Got enough buffer to start.":"Waiting for more buffer before starting playback."))}function G(){return s.getTotalBufferedTime(T)<g}function W(e){if(!T)return null;var t=P.getTime(),n=w.getFragmentModel().getRequests({state:re.default.FRAGMENT_MODEL_EXECUTED,time:t,threshold:e})[0],i=s.getBufferRange(T,t),r=n&&!isNaN(n.startTime)?n.startTime:Math.floor(t);return null===i&&0<T.buffered.length&&(r=T.buffered.end(T.buffered.length-1)),{start:T.buffered.start(0),end:r}}function z(e){e&&T&&s.remove(T,e.start,e.end,m)}function X(e){T===e.buffer&&(I&&(I=!1),j(),a.trigger(de.default.BUFFER_CLEARED,{sender:c,from:e.from,to:e.to,hasEnoughSpaceToAppend:G()}))}function Q(e){T&&T.timestampOffset!==e&&!isNaN(e)&&(T.timestampOffset=e)}function J(e){e.sender.getStreamProcessor()!==w||e.error||Q(e.currentRepresentation.MSETimeOffset)}function Z(e){e.fragmentModel===w.getFragmentModel()&&(E=e.request.index,Y())}function $(e){T&&e.newMediaInfo.type===y&&e.newMediaInfo.streamInfo.id===w.getStreamInfo().id&&o.getSwitchMode(y)===ue.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&z(W(0))}function ee(){++R*(N.getWallclockTimeUpdateInterval()/1e3)>=N.getBufferPruningInterval()&&!b&&(R=0,function(){if(T&&"fragmentedText"!==y){var e=T.buffered.length?T.buffered.start(0):0,t=P.getTime()-e-N.getBufferToKeep();0<t&&(r("pruning buffer: "+t+" seconds."),I=!0,s.remove(T,0,Math.round(e+t),m))}}())}function te(){q()}function ne(e){T=e}function ie(e){m=e}return c={initialize:function(e,t,n){y=e,ie(t),w=n,N=(0,ae.default)(h).getInstance(),P=(0,le.default)(h).getInstance(),O=(0,oe.default)(h).getInstance(),M=(0,pe.default)(h).getInstance(),D=w.getScheduleController(),d=O.getQualityFor(y,w.getStreamInfo()),a.on(de.default.DATA_UPDATE_COMPLETED,J,this),a.on(de.default.INIT_FRAGMENT_LOADED,L,this),a.on(de.default.MEDIA_FRAGMENT_LOADED,x,this),a.on(de.default.QUALITY_CHANGE_REQUESTED,U,this),a.on(de.default.STREAM_COMPLETED,Z,this),a.on(de.default.PLAYBACK_PROGRESS,B,this),a.on(de.default.PLAYBACK_TIME_UPDATED,B,this),a.on(de.default.PLAYBACK_RATE_CHANGED,te,this),a.on(de.default.PLAYBACK_SEEKING,V,this),a.on(de.default.WALLCLOCK_TIME_UPDATED,ee,this),a.on(de.default.CURRENT_TRACK_CHANGED,$,this,ce.default.EVENT_PRIORITY_HIGH),a.on(de.default.SOURCEBUFFER_APPEND_COMPLETED,F,this),a.on(de.default.SOURCEBUFFER_REMOVE_COMPLETED,X,this)},createBuffer:function(e){if(!e||!m||!w)return null;var t=null;try{(t=s.createSourceBuffer(m,e))&&t.hasOwnProperty("initialize")&&t.initialize(y,this)}catch(e){n.mediaSourceError("Error creating "+y+" source buffer.")}return ne(t),Q(w.getRepresentationInfoForQuality(d).MSETimeOffset),t},getType:function(){return y},getStreamProcessor:function(){return w},setStreamProcessor:function(e){w=e},getBuffer:function(){return T},setBuffer:ne,getBufferLevel:function(){return _},getCriticalBufferLevel:function(){return g},setMediaSource:ie,getMediaSource:function(){return m},getIsBufferingCompleted:function(){return p},switchInitData:function(e,t){var n=M.extract(e,t);n?k(n):a.trigger(de.default.INIT_REQUESTED,{sender:c})},reset:function(e){a.off(de.default.DATA_UPDATE_COMPLETED,J,this),a.off(de.default.QUALITY_CHANGE_REQUESTED,U,this),a.off(de.default.INIT_FRAGMENT_LOADED,L,this),a.off(de.default.MEDIA_FRAGMENT_LOADED,x,this),a.off(de.default.STREAM_COMPLETED,Z,this),a.off(de.default.CURRENT_TRACK_CHANGED,$,this),a.off(de.default.PLAYBACK_PROGRESS,B,this),a.off(de.default.PLAYBACK_TIME_UPDATED,B,this),a.off(de.default.PLAYBACK_RATE_CHANGED,te,this),a.off(de.default.PLAYBACK_SEEKING,V,this),a.off(de.default.WALLCLOCK_TIME_UPDATED,ee,this),a.off(de.default.SOURCEBUFFER_APPEND_COMPLETED,F,this),a.off(de.default.SOURCEBUFFER_REMOVE_COMPLETED,X,this),g=Number.POSITIVE_INFINITY,A=ge,d=oe.default.QUALITY_DEFAULT,E=Number.POSITIVE_INFINITY,v=0,I=b=p=!1,D=O=w=P=S=null,e||(s.abort(m,T),s.removeSourceBuffer(m,T)),T=null}},d=oe.default.QUALITY_DEFAULT,p=!1,_=0,g=Number.POSITIVE_INFINITY,v=0,E=Number.POSITIVE_INFINITY,T=null,R=0,C=I=b=!(A=ge),c}a.__dashjs_factory_name="BufferController";var s=r.default.getClassFactory(a);s.BUFFER_LOADED=_e,s.BUFFER_EMPTY=ge,n.default=s,t.exports=n.default},{10:10,13:13,147:147,153:153,59:59,65:65,67:67,69:69,8:8,9:9,97:97,99:99}],63:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var m=i(e(67)),r=i(e(10)),v=i(e(8)),E=i(e(9));function a(){var u="urn:mpeg:dash:event:2012",c=1,e=this.context,d=(0,v.default)(e).getInstance().log,h=(0,E.default)(e).getInstance(),i=void 0,r=void 0,f=void 0,t=void 0,n=void 0,p=void 0,_=void 0,g=void 0,a=void 0;function s(){null!==t&&a&&(clearInterval(t),t=null,a=!1)}function o(){l(r),l(i),function(){if(f)for(var e=g.getTime(),t=Object.keys(f),n=0;n<t.length;n++){var i=t[n],r=f[i];null!==r&&(r.duration+r.presentationTime)/r.eventStream.timescale<e&&(d("Remove Event "+i+" at time "+e),r=null,delete f[i])}}()}function l(e){var t,n,i,r=g.getTime();if(e)for(var a=Object.keys(e),s=0;s<a.length;s++){var o=a[s],l=e[o];void 0!==l&&(0===(t=l.presentationTimeDelta/l.eventStream.timescale)||t<=r)&&(d("Start Event "+o+" at "+r),0<l.duration&&(f[o]=l),l.eventStream.schemeIdUri==u&&l.eventStream.value==c?(i=n=void 0,n=p.getValue(),i=n.url,n.hasOwnProperty("Location")&&(i=n.Location),d("Refresh manifest @ "+i),_.getManifestLoader().load(i)):h.trigger(l.eventStream.schemeIdUri,{event:l}),delete e[o])}}return{initialize:function(){a=!1,i={},r={},f={},t=null,(n=100)/1e3,g=(0,m.default)(e).getInstance()},addInlineEvents:function(e){if(i={},e)for(var t=0;t<e.length;t++){var n=e[t];i[n.id]=n,d("Add inline event with id "+n.id)}d("Added "+e.length+" inline events")},addInbandEvents:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.id in r?d("Repeated event with id "+n.id):(r[n.id]=n,d("Add inband event with id "+n.id))}},clear:s,start:function(){d("Start Event Controller"),a||isNaN(n)||(a=!0,t=setInterval(o,n))},setConfig:function(e){e&&(e.manifestModel&&(p=e.manifestModel),e.manifestUpdater&&(_=e.manifestUpdater))},reset:function(){s(),g=f=r=i=null}}}a.__dashjs_factory_name="EventController",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,67:67,8:8,9:9}],64:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e(182),p=i(e(164)),a=i(e(97)),s=i(e(100)),o=i(e(9)),_=i(e(13)),l=i(e(10)),u=i(e(8));function c(){var n=this.context,c=(0,u.default)(n).getInstance().log,d=(0,o.default)(n).getInstance(),e=void 0,h=void 0;function f(e){return e&&e.type&&e.type===r.HTTPRequest.INIT_SEGMENT_TYPE}function t(e){if(h[e.request.mediaType]===e.sender){var t=e.request,n=e.response,i=f(t),r=t.mediaInfo.streamInfo;if(n&&r){var a,s,o,l,u=(a=n,s=t,o=r.id,(l=new p.default).streamId=o,l.mediaInfo=s.mediaInfo,l.segmentType=s.type,l.start=s.startTime,l.duration=s.duration,l.end=l.start+l.duration,l.bytes=a,l.index=s.index,l.quality=s.quality,l.representationId=s.representationId,l);d.trigger(i?_.default.INIT_FRAGMENT_LOADED:_.default.MEDIA_FRAGMENT_LOADED,{chunk:u,fragmentModel:e.sender})}else c("No "+t.mediaType+" bytes to push or stream is inactive.")}}return e={getModel:function(e){var t=h[e];return t||(t=(0,a.default)(n).create({metricsModel:(0,s.default)(n).getInstance()}),h[e]=t),t},isInitializationRequest:f,reset:function(){for(var e in d.off(_.default.FRAGMENT_LOADING_COMPLETED,t,this),h)h[e].reset();h={}}},h={},d.on(_.default.FRAGMENT_LOADING_COMPLETED,t,e),e}c.__dashjs_factory_name="FragmentController",n.default=l.default.getClassFactory(c),t.exports=n.default},{10:10,100:100,13:13,164:164,182:182,8:8,9:9,97:97}],65:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var A=i(e(13)),S=i(e(9)),r=i(e(10)),R=i(e(8)),b=i(e(143)),I=i(e(150)),C="neverReplace",P="alwaysReplace",w="highestBitrate",O="widestRange",D=w;function a(){var e=this.context,a=(0,R.default)(e).getInstance().log,l=(0,S.default)(e).getInstance(),t=(0,b.default)(e).getInstance(),u=(0,I.default)(e).getInstance(),c=void 0,n=void 0,i=void 0,d=void 0,r=[P,C],s=[w,O];function o(){c={},n={audio:null,video:null},d={audio:P,video:C}}function h(e,t){if(!e||!t)return[];var n=t.id;return c[n]&&c[n][e]?c[n][e].list:[]}function f(e,t){return!e||!t||t&&!c[t.id]?null:c[t.id][e].current}function p(e){if(e){var t=e.type,n=e.streamInfo,i=n.id,r=f(t,n);if(c[i]&&c[i][t]&&(!r||!E(e,r))){c[i][t].current=e,r&&l.trigger(A.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:r,newMediaInfo:e,switchMode:d[t]});var a,s,o=(s={lang:(a=e).lang,viewpoint:a.viewpoint,roles:a.roles,accessibility:a.accessibility,audioChannelConfiguration:a.audioChannelConfiguration}).lang||s.viewpoint||s.role&&0<s.role.length||s.accessibility&&0<s.accessibility.length||s.audioChannelConfiguration&&0<s.audioChannelConfiguration.length?s:null;o&&c[i][t].storeLastSettings&&(o.roles&&(o.role=o.roles[0],delete o.roles),o.accessibility&&(o.accessibility=o.accessibility[0]),o.audioChannelConfiguration&&(o.audioChannelConfiguration=o.audioChannelConfiguration[0]),u.setSavedMediaSettings(t,o))}}}function _(e,t){e&&t&&(n[e]=t)}function g(e){return e?n[e]:null}function m(){return i||D}function v(e){return"audio"===e||"video"===e||"text"===e||"fragmentedText"===e}function E(e,t){var n=e.id===t.id,i=e.viewpoint===t.viewpoint,r=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),s=e.accessibility.toString()===t.accessibility.toString(),o=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&i&&r&&a&&s&&o}function y(t,e){var n=!t.lang||t.lang===e.lang,i=!t.viewpoint||t.viewpoint===e.viewpoint,r=!t.role||!!e.roles.filter(function(e){return e===t.role})[0],a=!t.accessibility||!!e.accessibility.filter(function(e){return e===t.accessibility})[0],s=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0];return n&&i&&r&&a&&s}function T(e){var t=m(),n=[],i=function(e){var t,n=0,i=[];return e.forEach(function(e){t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),n<t?(n=t,i=[e]):t===n&&i.push(e)}),i},r=function(e){var t,n=0,i=[];return e.forEach(function(e){t=e.representationCount,n<t?(n=t,i=[e]):t===n&&i.push(e)}),i};switch(t){case w:1<(n=i(e)).length&&(n=r(n));break;case O:1<(n=r(e)).length&&(n=i(e));break;default:a("track selection mode is not supported: "+t)}return n[0]}return{initialize:o,checkInitialMediaSettingsForType:function(e,t){var n=g(e),i=h(e,t),r=[];"fragmentedText"!==e?(n||_(e,n=u.getSavedMediaSettings(e)),i&&0!==i.length&&(n&&i.forEach(function(e){y(n,e)&&r.push(e)}),0===r.length?p(T(i)):1<r.length?p(T(r)):p(r[0]))):p(i[0])},addTrack:function(e){var t=e?e.type:null,n=e?e.streamInfo.id:null,i=g(t);return!(!e||!v(t)||(c[n]=c[n]||{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null}},0<=c[n][t].list.indexOf(e)||(c[n][t].list.push(e),i&&y(i,e)&&!f(t,e.streamInfo)&&p(e),0)))},getTracksFor:h,getCurrentTrackFor:f,isCurrentTrack:function(e){var t=e.type,n=e.streamInfo.id;return c[n]&&c[n][t]&&E(c[n][t].current,e)},setTrack:p,setInitialSettings:_,getInitialSettings:g,setSwitchMode:function(e,t){-1!==r.indexOf(t)?d[e]=t:a("track switch mode is not supported: "+t)},getSwitchMode:function(e){return d[e]},setSelectionModeForInitialTrack:function(e){-1!==s.indexOf(e)?i=e:a("track selection mode is not supported: "+e)},getSelectionModeForInitialTrack:m,isMultiTrackSupportedByType:v,isTracksEqual:E,setConfig:function(e){e&&e.errHandler&&e.errHandler},reset:function(){o(),t.reset()}}}a.__dashjs_factory_name="MediaController";var s=r.default.getSingletonFactory(a);s.TRACK_SWITCH_MODE_NEVER_REPLACE=C,s.TRACK_SWITCH_MODE_ALWAYS_REPLACE=P,s.TRACK_SELECTION_MODE_HIGHEST_BITRATE=w,s.TRACK_SELECTION_MODE_WIDEST_RANGE=O,s.DEFAULT_INIT_TRACK_SELECTION_MODE=D,n.default=s,t.exports=n.default},{10:10,13:13,143:143,150:150,8:8,9:9}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){return{createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n},detachMediaSource:function(e){e.setSource(null)},setDuration:function(e,t){return e.duration!=t&&(e.duration=t),e.duration},signalEndOfStream:function(e){var t=e.sourceBuffers,n=t.length,i=0;if("open"===e.readyState){for(;i<n;i++){if(t[i].updating)return;if(0===t[i].buffered.length)return}e.endOfStream()}}}}s.__dashjs_factory_name="MediaSourceController",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],67:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var Q=i(e(62)),J=i(e(101)),Z=i(e(99)),$=i(e(9)),ee=i(e(13)),r=i(e(10)),te=i(e(8));function a(){var e,o=this.context,t=(0,te.default)(o).getInstance().log,n=(0,$.default)(o).getInstance(),i=void 0,l=void 0,r=void 0,a=void 0,s=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,_=void 0,g=void 0,m=void 0,v=void 0,E=void 0,y=void 0;function T(){p=NaN,v=_=null,y=!1,g={},E=(f=0,Z.default)(o).getInstance()}function A(e){!v&&e.fromStreamInfo&&g[e.fromStreamInfo.id]&&delete g[e.fromStreamInfo.id]}function S(){var e=D(!0),t=v?e-m.start:0;return e+(m.duration-t)-P()}function R(){if(i){i.autoplay=!0;var e=i.play();e&&"undefined"!=typeof Promise&&e instanceof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&n.trigger(ee.default.PLAYBACK_NOT_ALLOWED),t("Caught pending play exception - continuing ("+e+")")})}else y=!0}function b(){if(i)return i.paused}function I(){i&&(i.pause(),i.autoplay=!1)}function C(e){h&&(t("Requesting seek to time: "+e),h.setCurrentTime(e))}function P(){if(i)return i.currentTime}function w(){if(i)return i.playbackRate}function O(){if(i)return i.ended}function D(e){var t=void 0,n=(0,J.default)(o).getInstance().getURIFragmentData(),i=parseInt(n.s,10),r=parseInt(n.t,10),a=NaN;if(e||(a=isNaN(i)?r:i),v)!isNaN(a)&&1262304e3<a&&(t=a-m.manifestInfo.availableFrom.getTime()/1e3,(p<t||t<p-m.manifestInfo.DVRWindowSize)&&(t=null)),t=t||p;else if(!isNaN(a)&&a<Math.max(m.manifestInfo.duration,m.duration)&&0<=a)t=a;else{var s=g[m.id];void 0===s&&(s=l.getActiveStreamCommonEarliestTime()),t=Math.max(s,m.start)}return t}function N(){if(null===_){_=setInterval(function(){n.trigger(ee.default.WALLCLOCK_TIME_UPDATED,{isDynamic:v,time:new Date})},E.getWallclockTimeUpdateInterval())}}function M(){clearInterval(_),_=null}function L(){if(!b()&&v&&0!==i.readyState){var e=P(),t=function(e){var t,n=a.getReadOnlyMetricsFor("video")||a.getReadOnlyMetricsFor("audio"),i=s.getCurrentDVRInfo(n),r=i?i.range:null;if(!r)return NaN;if(e>r.end)t=Math.max(r.end-2*m.manifestInfo.minBufferTime,r.start);else{if(!(e<r.start))return e;t=r.start}return t}(e);!isNaN(t)&&t!==e&&C(t)}}function x(e){if(!e.error){var t=d.convertDataToTrack(u.getValue(),e.currentRepresentation).mediaInfo.streamInfo;m.id===t.id&&(m=t,L())}}function k(){n.trigger(ee.default.CAN_PLAY)}function F(){t("Native video element event: play"),L(),N(),n.trigger(ee.default.PLAYBACK_STARTED,{startTime:P()})}function U(){t("Native video element event: playing"),n.trigger(ee.default.PLAYBACK_PLAYING,{playingTime:P()})}function V(){t("Native video element event: pause"),n.trigger(ee.default.PLAYBACK_PAUSED,{ended:O()})}function B(){var e=P();t("Seeking to: "+e),N(),n.trigger(ee.default.PLAYBACK_SEEKING,{seekTime:e})}function j(){t("Native video element event: seeked"),n.trigger(ee.default.PLAYBACK_SEEKED)}function H(){var e=P();e!==f&&(f=e,n.trigger(ee.default.PLAYBACK_TIME_UPDATED,{timeToEnd:S(),time:e}))}function Y(){n.trigger(ee.default.PLAYBACK_PROGRESS)}function q(){var e=w();t("Native video element event: ratechange: ",e),n.trigger(ee.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function K(){var e;t("Native video element event: loadedmetadata"),(!v&&m.isFirst||r.isTimeSyncCompleted())&&0<(e=D(!1))&&(C(e),t("Starting playback at offset: "+e)),n.trigger(ee.default.PLAYBACK_METADATA_LOADED),N()}function G(){t("Native video element event: ended"),I(),M(),n.trigger(ee.default.PLAYBACK_ENDED)}function W(e){var t=e.target||e.srcElement;n.trigger(ee.default.PLAYBACK_ERROR,{error:t.error})}function z(e){var t=e.bufferedRanges;if(t&&t.length){var n=Math.max(t.start(0),m.start),i=void 0===g[m.id]?n:Math.max(g[m.id],n);i!==g[m.id]&&(!v&&D(!0)<i&&P()<i&&C(i),g[m.id]=i)}}function X(e){e.streamInfo.id===m.id&&h.setStallState(e.mediaType,e.state===Q.default.BUFFER_EMPTY)}return e={initialize:function(e){m=e,(i=h.getElement()).addEventListener("canplay",k),i.addEventListener("play",F),i.addEventListener("playing",U),i.addEventListener("pause",V),i.addEventListener("error",W),i.addEventListener("seeking",B),i.addEventListener("seeked",j),i.addEventListener("timeupdate",H),i.addEventListener("progress",Y),i.addEventListener("ratechange",q),i.addEventListener("loadedmetadata",K),i.addEventListener("ended",G),v=m.manifestInfo.isDynamic,p=m.start,n.on(ee.default.DATA_UPDATE_COMPLETED,x,this),n.on(ee.default.BYTES_APPENDED,z,this),n.on(ee.default.BUFFER_LEVEL_STATE_CHANGED,X,this),n.on(ee.default.PERIOD_SWITCH_STARTED,A,this),y&&(y=!1,R())},setConfig:function(e){e&&(e.streamController&&(l=e.streamController),e.timelineConverter&&(r=e.timelineConverter),e.metricsModel&&(a=e.metricsModel),e.dashMetrics&&(s=e.dashMetrics),e.manifestModel&&(u=e.manifestModel),e.dashManifestModel&&(c=e.dashManifestModel),e.adapter&&(d=e.adapter),e.videoModel&&(h=e.videoModel))},getStreamStartTime:D,getTimeToStreamEnd:S,isPlaybackStarted:function(){return 0<P()},getStreamId:function(){return m.id},getTime:P,getPlaybackRate:w,getPlayedRanges:function(){if(i)return i.played},getEnded:O,getIsDynamic:function(){return v},setLiveStartTime:function(e){p=e},getLiveStartTime:function(){return p},computeLiveDelay:function(e,t){var n=c.getMpd(u.getValue()),i=void 0;i=E.getUseSuggestedPresentationDelay()&&n.hasOwnProperty("suggestedPresentationDelay")?n.suggestedPresentationDelay:E.getLiveDelay()?E.getLiveDelay():isNaN(e)?2*m.manifestInfo.minBufferTime:e*E.getLiveDelayFragmentCount();var r=Math.max(t-10,t/2);return Math.min(i,r)},play:R,isPaused:b,pause:I,isSeeking:function(){if(i)return i.seeking},seek:C,reset:function(){h&&i&&(n.off(ee.default.DATA_UPDATE_COMPLETED,x,this),n.off(ee.default.BUFFER_LEVEL_STATE_CHANGED,X,this),n.off(ee.default.BYTES_APPENDED,z,this),M(),i.removeEventListener("canplay",k),i.removeEventListener("play",F),i.removeEventListener("playing",U),i.removeEventListener("pause",V),i.removeEventListener("error",W),i.removeEventListener("seeking",B),i.removeEventListener("seeked",j),i.removeEventListener("timeupdate",H),i.removeEventListener("progress",Y),i.removeEventListener("ratechange",q),i.removeEventListener("loadedmetadata",K),i.removeEventListener("ended",G)),v=i=m=h=null,T()}},T(),e}a.__dashjs_factory_name="PlaybackController",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,101:101,13:13,62:62,8:8,9:9,99:99}],68:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var pe=e(184),_e=i(e(67)),ge=i(e(59)),me=i(e(62)),ve=i(e(65)),Ee=i(e(138)),ye=i(e(139)),Te=i(e(143)),Ae=i(e(97)),Se=i(e(69)),Re=i(e(155)),be=i(e(9)),Ie=i(e(13)),r=i(e(10)),Ce=i(e(70)),Pe=i(e(8));function a(e){var t,a=this.context,r=(0,Pe.default)(a).getInstance().log,n=(0,be.default)(a).getInstance(),s=e.metricsModel,i=e.manifestModel,o=e.adapter,l=e.dashMetrics,u=e.dashManifestModel,c=e.timelineConverter,d=e.mediaPlayerModel,h=void 0,f=void 0,p=void 0,_=void 0,g=void 0,m=void 0,v=void 0,E=void 0,y=void 0,T=void 0,A=void 0,S=void 0,R=void 0,b=void 0,I=void 0,C=void 0,P=void 0,w=void 0,O=void 0,D=void 0,N=void 0,M=void 0,L=void 0,x=void 0,k=void 0,F=void 0,U=void 0;function V(){_&&!D.getIsBufferingCompleted()&&(fe(),m=!1,g&&(g=!1),H(0),r("Schedule controller starting for "+h))}function B(){m||(m=!0,clearTimeout(S),r("Schedule controller stopping for "+h))}function j(){if(!(m||T||!D||b.isPaused()&&!L)){var e,t;e=1.5*_.fragmentDuration,(t=f.getRequests({state:Ae.default.FRAGMENT_MODEL_EXECUTED,time:b.getTime()+e,threshold:0})[0])&&-1===U.indexOf(t)&&!u.getIsTextTrack(h)&&(!I.isCurrentTrack(t.mediaInfo)||d.getFastSwitchEnabled()&&t.quality<_.quality&&D.getBufferLevel()>=e&&C.getAbandonmentStateFor(h)!==ge.default.ABANDON_LOAD?(K(t),r("Reloading outdated fragment at index: ",t.index)):t.quality>_.quality&&ce(b.getTime()+D.getBufferLevel()));var n=0<U.length;if(n||function(e,t){k[t]=k[t]||{};var n=C.getTopQualityIndexFor(e,t);return k[t][e]!=n&&(r("Top quality"+e+" index has changed from "+k[t][e]+" to "+n),k[t][e]=n,!0)}(_.mediaInfo.type,P.getStreamInfo().id)||N.execute(P,h,w.isVideoTrackPresent())){var i=function(){if(_.quality!==F)F=_.quality,D.switchInitData(P.getStreamInfo().id,_.id);else{var e=U.shift();if(O.isInitializationRequest(e))D.switchInitData(e.mediaInfo.streamInfo.id,e.representationId);else{var t=M.execute(P,e);t?f.executeRequest(t):(T=!1,H(500))}}};T=!0,n||C.getPlaybackQuality(P),i()}else H(500)}}function H(e){clearTimeout(S),S=setTimeout(j,e)}function Y(e){e.sender&&e.sender.getStreamProcessor()===P&&q(_.quality)}function q(e){F=e;var t=o.getInitRequest(P,e);t&&(T=!0,f.executeRequest(t))}function K(e){U.push(e)}function G(e){if(h===e.mediaType&&P.getStreamInfo().id===e.streamInfo.id){if(null==(_=P.getRepresentationInfoForQuality(e.newQuality)))throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");he(new Date,pe.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),fe()}}function W(e){if(b){var t=f.getRequests({state:Ae.default.FRAGMENT_MODEL_EXECUTED,time:b.getTime(),threshold:0})[0];t&&b.getTime()>=t.startTime&&(t.quality!==x&&e&&n.trigger(Ie.default.QUALITY_CHANGE_RENDERED,{mediaType:h,oldQuality:x,newQuality:t.quality}),x=t.quality)}}function z(e){e.error||e.sender.getStreamProcessor()!==P||(_=o.convertDataToTrack(i.getValue(),e.currentRepresentation))}function X(e){e.error||P.getStreamInfo().id!==e.streamInfo.id||(_=P.getCurrentRepresentationInfo(),p&&g&&(c.setTimeSyncCompleted(!0),function(){var e=(0,Re.default)(a).getInstance().getLiveEdge(),t=_.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,n=e-b.computeLiveDelay(_.fragmentDuration,t),i=o.getFragmentRequestForTime(P,_,n,{ignoreIsFinished:!0});R=b.getLiveStartTime(),(isNaN(R)||i.startTime>R)&&(b.setLiveStartTime(i.startTime),R=i.startTime);var r=l.getCurrentManifestUpdate(s.getMetricsFor("stream"));s.updateManifestUpdateInfo(r,{currentTime:R,presentationStartTime:e,latency:e-R,clientTimeOffset:c.getClientTimeOffset()})}()),m&&V())}function Q(e){e.fragmentModel===f&&(B(),T=!1,r("Stream is complete"))}function J(e){e.sender===f&&(u.getIsTextTrack(h)&&(T=!1),e.error&&e.request.serviceLocation&&!m&&(K(e.request),T=!1,H(0)))}function Z(){W(!0)}function $(e){e.sender.getStreamProcessor()===P&&(T=!1,H(0))}function ee(e){e.streamProcessor===P&&(K(e.request),T=!1,H(0))}function te(e){e.sender.getStreamProcessor()===P&&B()}function ne(e){e.sender.getStreamProcessor()===P&&(f.removeExecutedRequestsBeforeTime(e.to),e.hasEnoughSpaceToAppend&&m&&V())}function ie(e){e.sender.getStreamProcessor()!==P||e.state!==me.default.BUFFER_EMPTY||b.isSeeking()||(r("Buffer is empty! Stalling!"),he(new Date,pe.PlayListTrace.REBUFFERING_REASON))}function re(e){e.sender.getStreamProcessor()===P&&B()}function ae(){f.abortRequests(),B()}function se(e){e.sender.getStreamProcessor()===P&&q(e.index)}function oe(){!m&&L||V()}function le(e){R=e.seekTime,de(0),m&&V();var t=l.getCurrentManifestUpdate(s.getMetricsFor("stream")),n=_.DVRWindow?_.DVRWindow.end-b.getTime():NaN;s.updateManifestUpdateInfo(t,{latency:n})}function ue(e){E&&(E.playbackspeed=e.playbackRate.toString())}function ce(e){R=e}function de(e){A=e}function he(e,t){if(v&&!1===y){var n=E.start,i=e.getTime()-n.getTime();E.duration=i,E.stopreason=t,v.trace.push(E),y=!0}}function fe(){v&&!0===y&&_&&(y=!1,(E=new pe.PlayListTrace).representationid=_.id,E.start=new Date,E.mstart=1e3*b.getTime(),E.playbackspeed=b.getPlaybackRate().toString())}return t={initialize:function(e,t){h=e,P=t,b=(0,_e.default)(a).getInstance(),I=(0,ve.default)(a).getInstance(),C=(0,ge.default)(a).getInstance(),w=(0,Ce.default)(a).getInstance(),O=P.getFragmentController(),D=P.getBufferController(),f=O.getModel(h),p=P.isDynamic(),L=d.getScheduleWhilePaused(),N=(0,Ee.default)(a).create({dashMetrics:l,metricsModel:s,textController:(0,Te.default)(a).getInstance()}),M=(0,ye.default)(a).create({adapter:o,sourceBufferController:(0,Se.default)(a).getInstance(),textController:(0,Te.default)(a).getInstance()}),u.getIsTextTrack(h)&&n.on(Ie.default.TIMED_TEXT_REQUESTED,se,this),n.on(Ie.default.QUALITY_CHANGE_REQUESTED,G,this),n.on(Ie.default.DATA_UPDATE_STARTED,te,this),n.on(Ie.default.DATA_UPDATE_COMPLETED,z,this),n.on(Ie.default.FRAGMENT_LOADING_COMPLETED,J,this),n.on(Ie.default.STREAM_COMPLETED,Q,this),n.on(Ie.default.STREAM_INITIALIZED,X,this),n.on(Ie.default.BUFFER_LEVEL_STATE_CHANGED,ie,this),n.on(Ie.default.BUFFER_CLEARED,ne,this),n.on(Ie.default.BYTES_APPENDED,$,this),n.on(Ie.default.INIT_REQUESTED,Y,this),n.on(Ie.default.QUOTA_EXCEEDED,re,this),n.on(Ie.default.PLAYBACK_SEEKING,le,this),n.on(Ie.default.PLAYBACK_STARTED,oe,this),n.on(Ie.default.PLAYBACK_RATE_CHANGED,ue,this),n.on(Ie.default.PLAYBACK_TIME_UPDATED,Z,this),n.on(Ie.default.URL_RESOLUTION_FAILED,ae,this),n.on(Ie.default.FRAGMENT_LOADING_ABANDONED,ee,this)},getStreamProcessor:function(){return P},getSeekTarget:function(){return R},setSeekTarget:ce,getFragmentModel:function(){return f},setTimeToLoadDelay:de,getTimeToLoadDelay:function(){return A},replaceRequest:K,start:V,stop:B,reset:function(){n.off(Ie.default.DATA_UPDATE_STARTED,te,this),n.off(Ie.default.DATA_UPDATE_COMPLETED,z,this),n.off(Ie.default.BUFFER_LEVEL_STATE_CHANGED,ie,this),n.off(Ie.default.QUALITY_CHANGE_REQUESTED,G,this),n.off(Ie.default.FRAGMENT_LOADING_COMPLETED,J,this),n.off(Ie.default.STREAM_COMPLETED,Q,this),n.off(Ie.default.STREAM_INITIALIZED,X,this),n.off(Ie.default.QUOTA_EXCEEDED,re,this),n.off(Ie.default.BYTES_APPENDED,$,this),n.off(Ie.default.BUFFER_CLEARED,ne,this),n.off(Ie.default.INIT_REQUESTED,Y,this),n.off(Ie.default.PLAYBACK_RATE_CHANGED,ue,this),n.off(Ie.default.PLAYBACK_SEEKING,le,this),n.off(Ie.default.PLAYBACK_STARTED,oe,this),n.off(Ie.default.PLAYBACK_TIME_UPDATED,Z,this),n.off(Ie.default.URL_RESOLUTION_FAILED,ae,this),n.off(Ie.default.FRAGMENT_LOADING_ABANDONED,ee,this),u.getIsTextTrack(h)&&n.off(Ie.default.TIMED_TEXT_REQUESTED,se,this),B(),W(!1),T=!1,A=0,R=NaN,v=b=null},setPlayList:function(e){v=e},getBufferTarget:function(){return N.getBufferTarget(P,h,w.isVideoTrackPresent())},finalisePlayList:function(e,t){he(e,t),v=null}},g=!0,k={},U=[],m=!(x=F=NaN),T=!(y=!(E=v=null)),A=0,R=NaN,t}a.__dashjs_factory_name="ScheduleController",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,13:13,138:138,139:139,143:143,155:155,184:184,59:59,62:62,65:65,67:67,69:69,70:70,8:8,9:9,97:97}],69:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(143)),u=i(e(165)),c=i(e(9)),d=i(e(13)),r=i(e(10));function a(){var r=this.context,a=(0,c.default)(r).getInstance();function s(e,t,n){var i,r,a=null,s=0,o=0,l=null,u=null,c=0,d=n||.15;try{a=e.buffered}catch(e){return null}if(null!=a){for(r=0,i=a.length;r<i;r++)if(s=a.start(r),o=a.end(r),null===l)c=Math.abs(s-t),s<=t&&t<o?(l=s,u=o):c<=d&&(l=s,u=o);else{if(!((c=s-u)<=d))break;u=o}if(null!==l)return{start:l,end:u}}return null}function f(e){try{return e.buffered}catch(e){return null}}function o(t,n){var i,r=function(){t.updating||(clearInterval(i),n())};if(t.updating)if("function"==typeof t.addEventListener)try{t.addEventListener("updateend",function e(){t.updating||(t.removeEventListener("updateend",e,!1),n())},!1)}catch(e){i=setInterval(r,50)}else i=setInterval(r,50);else n()}return{append:function(t,e){var n=e.bytes,i="append"in t?"append":"appendBuffer"in t?"appendBuffer":null,r="Object"===Object.prototype.toString.call(t).slice(8,-1);i&&o(t,function(){try{r?t[i](n,e):t[i](n),o(t,function(){a.trigger(d.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:t,bytes:n})})}catch(e){a.trigger(d.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:t,bytes:n,error:new u.default(e.code,e.message,null)})}})},remove:function(t,n,i,e){o(t,function(){try{0<=n&&n<i&&"ended"!==e.readyState&&t.remove(n,i),o(t,function(){a.trigger(d.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:t,from:n,to:i})})}catch(e){a.trigger(d.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:t,from:n,to:i,error:new u.default(e.code,e.message,null)})}})},abort:function(e,t){try{"open"===e.readyState?t.abort():t.setTextTrack&&"ended"===e.readyState&&t.abort()}catch(e){}},createSourceBuffer:function(e,t){var n=t.codec,i=null;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new u.default("not really supported");i=e.addSourceBuffer(n)}catch(e){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw e;i=(0,l.default)(r).getInstance().getTextSourceBuffer()}return i},removeSourceBuffer:function(e,t){try{e.removeSourceBuffer(t)}catch(e){}},getBufferRange:s,getAllRanges:f,getTotalBufferedTime:function(e){var t,n,i=f(e),r=0;if(!i)return r;for(n=0,t=i.length;n<t;n++)r+=i.end(n)-i.start(n);return r},getBufferLength:function(e,t,n){var i;return null===(i=s(e,t,n))?0:i.end-t},getRangeDifference:function(e,t){if(!t)return null;var n,i,r,a,s,o,l,u,c=f(t);if(!c)return null;for(var d=0,h=c.length;d<h;d++){if(s=e.length>d?{start:e.start(d),end:e.end(d)}:null,n=c.start(d),i=c.end(d),!s)return u={start:n,end:i};if(r=s.start===n,a=s.end===i,!r||!a){if(r)u={start:s.end,end:i};else{if(!a)return u={start:n,end:i};u={start:n,end:s.start}}return o=e.length>d+1?{start:e.start(d+1),end:e.end(d+1)}:null,l=d+1<h?{start:c.start(d+1),end:c.end(d+1)}:null,!o||l&&l.start===o.start&&l.end===o.end||(u.end=o.start),u}}return null},setConfig:function(e){e&&e.dashManifestModel&&e.dashManifestModel}}}a.__dashjs_factory_name="SourceBufferController";var s=r.default.getSingletonFactory(a);s.QUOTA_EXCEEDED_ERROR_CODE=22,n.default=s,t.exports=n.default},{10:10,13:13,143:143,165:165,9:9}],70:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ee=i(e(67)),te=i(e(55)),ne=i(e(51)),ie=i(e(9)),re=i(e(13)),ae=i(e(101)),se=i(e(102)),oe=i(e(99)),r=i(e(10)),le=e(184),ue=i(e(8)),ce=i(e(153));function a(){var n=.1,u=this.context,c=(0,ue.default)(u).getInstance().log,o=(0,ie.default)(u).getInstance(),i=void 0,l=void 0,d=void 0,r=void 0,h=void 0,f=void 0,p=void 0,_=void 0,g=void 0,a=void 0,s=void 0,m=void 0,v=void 0,E=void 0,y=void 0,T=void 0,A=void 0,S=void 0,R=void 0,b=void 0,I=void 0,C=void 0,P=void 0,w=void 0,O=void 0,D=void 0,N=void 0,M=void 0,L=void 0,x=void 0,k=void 0,F=void 0;function U(e){if(z()){var t=D.getPlaybackQuality();t&&_.addDroppedFrames("video",t)}N.isSeeking()||e.timeToEnd<=n&&Y()}function V(e){var t=function(e){var t=0,n=null,i=A.length;0<i&&(t+=A[0].getStartTime());for(var r=0;r<i;r++)if(n=A[r],t+=n.getDuration(),e<t)return n;return null}(e.seekTime);t&&t!==S?(Q(le.PlayListTrace.END_OF_PERIOD_STOP_REASON),q(S,t,e.seekTime)):Q(le.PlayListTrace.USER_REQUEST_STOP_REASON),J(le.PlayList.SEEK_START_REASON)}function B(){x?(x=!1,J(le.PlayList.INITIAL_PLAYOUT_START_REASON)):L&&(L=!1,J(le.PlayList.RESUME_FROM_PAUSE_START_REASON))}function j(e){e.ended||(L=!0,Q(le.PlayListTrace.USER_REQUEST_STOP_REASON))}function H(){var e=t().isLast;O&&e&&s.signalEndOfStream(O)}function Y(){var e=function(){if(S){var e=(t=S.getStreamInfo().start,n=S.getStreamInfo().duration,{v:A.filter(function(e){return e.getStreamInfo().start===t+n})[0]});if("object"==typeof e)return e.v}var t,n}();e&&q(S,e,NaN),Q(e?le.PlayListTrace.END_OF_PERIOD_STOP_REASON:le.PlayListTrace.END_OF_CONTENT_STOP_REASON)}function q(e,t,n){!C&&t&&e!==t&&(C=!0,o.trigger(re.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),e&&e.deactivate(),S=t,N.initialize(S.getStreamInfo()),function(n){var i=void 0;function r(){var e,t;c("MediaSource is open!"),window.URL.revokeObjectURL(i),O.removeEventListener("sourceopen",r),O.removeEventListener("webkitsourceopen",r),e=S.getStreamInfo().manifestInfo.duration,t=s.setDuration(O,e),c("Duration successfully set to: "+t),function(e){S.activate(O),x?F=X():isNaN(e)?(t=N.getStreamStartTime(!0),S.getProcessors().forEach(function(e){p.setIndexHandlerTime(e,t)}),N.seek(t)):N.seek(e);var t;S.startEventController(),(I||!x)&&N.play();C=!1,o.trigger(re.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:S.getStreamInfo()})}(n)}O?s.detachMediaSource(D):O=s.createMediaSource();O.addEventListener("sourceopen",r,!1),O.addEventListener("webkitsourceopen",r,!1),i=s.attachMediaSource(O,D),c("MediaSource attached to element.  Waiting on open...")}(n))}function K(e){for(var t=0,n=A.length;t<n;t++)if(A[t].getId()===e.id)return A[t];return null}function G(){var e=h.getValue();R&&(o.trigger(re.default.PROTECTION_CREATED,{controller:R,manifest:e}),R.setMediaElement(D.getElement()),b&&R.setProtectionData(b)),function(t){try{var e=p.getStreamsInfo(t);if(0===e.length)throw new Error("There are no streams");var n=g.getCurrentManifestUpdate(_.getMetricsFor("stream"));_.updateManifestUpdateInfo(n,{currentTime:N.getTime(),buffered:D.getElement().buffered,presentationStartTime:e[0].start,clientTimeOffset:T.getClientTimeOffset()});for(var i=0,r=e.length;i<r;i++){var a=e[i],s=K(a);s?s.updateData(a):(s=(0,te.default)(u).create({manifestModel:h,manifestUpdater:d,adapter:p,timelineConverter:T,capabilities:l,errHandler:y,baseURLController:v}),A.push(s),s.initialize(a,R)),_.addManifestUpdateStreamInfo(n,a.id,a.index,a.start,a.duration)}S||q(null,A[0],NaN),o.trigger(re.default.STREAMS_COMPOSED)}catch(e){y.manifestError(e.message,"nostreamscomposed",t),w=!0,$()}}(e)}function W(e){if(e.error)w=!0,$();else{var t,n,i=e.manifest,r=p.getStreamsInfo(i)[0],a=p.getMediaInfoForType(i,r,"video")||p.getMediaInfoForType(i,r,"audio");a&&(t=p.getDataForMedia(a),(n=f.getRepresentationsForAdaptation(i,t)[0].useCalculatedLiveEdgeTime)&&(c("SegmentTimeline detected using calculated Live Edge Time"),M.setUseManifestDateHeaderTimeSource(!1)));var s=f.getUTCTimingSources(e.manifest),o=!f.getIsDynamic(i)||n?s:s.concat(M.getUTCTimingSources()),l=(0,ae.default)(u).getInstance().isManifestHTTPS();o.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===oe.default.DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(l?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),l?"https://":"http://"),c("Matching default timing source protocol to manifest protocol: ",e.value))}),v.initialize(i),m.setConfig({metricsModel:_,dashMetrics:g}),m.initialize(o,M.getUseManifestDateHeaderTimeSource())}}function z(){return void 0===F&&(F=X()),F}function X(){var t=!1;return S.getProcessors().forEach(function(e){"video"===e.getMediaInfo().type&&(t=!0)}),t}function Q(n,i){i=i||new Date,k&&(S&&S.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.finalisePlayList(i,n)}),_.addPlayList(k),k=null)}function J(e){(k=new le.PlayList).start=new Date,k.mstart=1e3*N.getTime(),k.starttype=e,S&&S.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(k)})}function Z(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}P=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),c("Video Element Error: "+t),e.error&&c(e.error),y.mediaSourceError(t),$()}}function t(){return S?S.getStreamInfo():null}function $(){m.reset(),Q(P||w?le.PlayListTrace.FAILURE_STOP_REASON:le.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=A.length;e<t;e++){A[e].reset(P)}A=[],o.off(re.default.PLAYBACK_TIME_UPDATED,U,this),o.off(re.default.PLAYBACK_SEEKING,V,this),o.off(re.default.PLAYBACK_ERROR,Z,this),o.off(re.default.PLAYBACK_STARTED,B,this),o.off(re.default.PLAYBACK_PAUSED,j,this),o.off(re.default.PLAYBACK_ENDED,Y,this),o.off(re.default.MANIFEST_UPDATED,W,this),o.off(re.default.STREAM_BUFFERING_COMPLETED,H,this),v.reset(),d.reset(),_.clearAllCurrentMetrics(),h.setValue(null),r.reset(),T.reset(),a.reset(),p.reset(),E.reset(),S=null,w=P=C=!1,L=!(x=!(F=void 0)),O&&(s.detachMediaSource(D),O=null),D=null,R&&(R.setMediaElement(null),b=R=null,h.getValue()&&o.trigger(re.default.PROTECTION_DESTROYED,{data:h.getValue().url})),o.trigger(re.default.STREAM_TEARDOWN_COMPLETE)}return i={initialize:function(e,t){I=e,b=t,T.initialize(),E=(0,ce.default)(u).getInstance(),(d=(0,ne.default)(u).getInstance()).setConfig({manifestModel:h,dashManifestModel:f}),d.initialize(r),D=(0,se.default)(u).getInstance(),(N=(0,ee.default)(u).getInstance()).setConfig({streamController:i,timelineConverter:T,metricsModel:_,dashMetrics:g,manifestModel:h,dashManifestModel:f,adapter:p,videoModel:D}),o.on(re.default.TIME_SYNCHRONIZATION_COMPLETED,G,this),o.on(re.default.PLAYBACK_SEEKING,V,this),o.on(re.default.PLAYBACK_TIME_UPDATED,U,this),o.on(re.default.PLAYBACK_ENDED,Y,this),o.on(re.default.PLAYBACK_ERROR,Z,this),o.on(re.default.PLAYBACK_STARTED,B,this),o.on(re.default.PLAYBACK_PAUSED,j,this),o.on(re.default.MANIFEST_UPDATED,W,this),o.on(re.default.STREAM_BUFFERING_COMPLETED,H,this)},getAutoPlay:function(){return I},getActiveStreamInfo:t,isStreamActive:function(e){return S.getId()===e.id},isVideoTrackPresent:z,getStreamById:function(t){return A.filter(function(e){return e.getId()===t})[0]},getTimeRelativeToStreamId:function(e,t){for(var n=null,i=0,r=0,a=null,s=A.length,o=0;o<s;o++){if(r=(n=A[o]).getStartTime(),a=n.getDuration(),Number.isFinite(r)&&(i=r),n.getId()===t)return e-i;Number.isFinite(a)&&(i+=a)}return null},load:function(e){r.load(e)},loadWithManifest:function(e){d.setManifest(e)},getActiveStreamCommonEarliestTime:function(){var t=[];return S.getProcessors().forEach(function(e){t.push(e.getIndexHandler().getEarliestTime())}),Math.min.apply(Math,t)},setConfig:function(e){e&&(e.capabilities&&(l=e.capabilities),e.manifestLoader&&(r=e.manifestLoader),e.manifestModel&&(h=e.manifestModel),e.dashManifestModel&&(f=e.dashManifestModel),e.protectionController&&(R=e.protectionController),e.adapter&&(p=e.adapter),e.metricsModel&&(_=e.metricsModel),e.dashMetrics&&(g=e.dashMetrics),e.liveEdgeFinder&&(a=e.liveEdgeFinder),e.mediaSourceController&&(s=e.mediaSourceController),e.timeSyncController&&(m=e.timeSyncController),e.baseURLController&&(v=e.baseURLController),e.errHandler&&(y=e.errHandler),e.timelineConverter&&(T=e.timelineConverter))},reset:$},R=null,A=[],M=(0,oe.default)(u).getInstance(),w=P=!(x=!(L=C=!(I=!(k=null)))),i}a.__dashjs_factory_name="StreamController",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,101:101,102:102,13:13,153:153,184:184,51:51,55:55,67:67,8:8,9:9,99:99}],71:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var T=i(e(165)),A=i(e(9)),S=i(e(13)),r=i(e(10)),R=i(e(8));function a(){var e=this.context,s=(0,R.default)(e).getInstance().log,i=(0,A.default)(e).getInstance(),o=void 0,n=void 0,l=void 0,u=void 0,c=void 0,d=void 0;function h(e){n=e}function r(e){e}function f(e){o=e}function a(e){var t,n,i,r=Date.parse(e);return isNaN(r)&&(i=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e),t=Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10),i[6]&&(parseInt(i[6],10)||0),i[7]&&1e3*parseFloat(i[7])||0),i[9]&&i[10]&&(n=60*parseInt(i[9],10)+parseInt(i[10],10),t+=("+"===i[8]?-1:1)*n*60*1e3),r=new Date(t).getTime()),r}function p(e){return Date.parse(e)}function _(e){return Date.parse(e)}function g(e,t,n){n()}function m(e,t,n){var i=a(e);isNaN(i)?n():t(i)}function v(n,e,i,t,r){var a,s,o=!1,l=new XMLHttpRequest,u=r?"HEAD":"GET",c=e.match(/\S+/g);e=c.shift(),a=function(){o||(o=!0,c.length?v(n,c.join(" "),i,t,r):t())},s=function(){var e,t;200===l.status&&(e=r?l.getResponseHeader("Date"):l.response,t=n(e),isNaN(t)||(i(t),o=!0))},l.open(u,e),l.timeout=5e3,l.onload=s,l.onloadend=a,l.send()}function E(e,t,n){v(_,e,t,n,!0)}function y(e,t,n){h(!1),i.trigger(S.default.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new T.default(1):null})}return{initialize:function(e,t){l=t,o=0,n=!1,u={"urn:mpeg:dash:utc:http-head:2014":E,"urn:mpeg:dash:utc:http-xsdate:2014":v.bind(null,a),"urn:mpeg:dash:utc:http-iso:2014":v.bind(null,p),"urn:mpeg:dash:utc:direct:2014":m,"urn:mpeg:dash:utc:http-head:2012":E,"urn:mpeg:dash:utc:http-xsdate:2012":v.bind(null,a),"urn:mpeg:dash:utc:http-iso:2012":v.bind(null,p),"urn:mpeg:dash:utc:direct:2012":m,"urn:mpeg:dash:utc:http-ntp:2014":g,"urn:mpeg:dash:utc:ntp:2014":g,"urn:mpeg:dash:utc:sntp:2014":g},n||(function e(t,n){var i=n||0,r=t[i],a=function(e,t){var n,i,r,a=!e||!t;a&&l?(n=c.getReadOnlyMetricsFor("stream"),i=d.getLatestMPDRequestHeaderValueByID(n,"Date"),r=null!==i?new Date(i).getTime():Number.NaN,isNaN(r)?y(!0):(f(r-(new Date).getTime()),y(!1,r/1e3,o))):y(a,e,t)};h(!0),r?u.hasOwnProperty(r.schemeIdUri)?u[r.schemeIdUri](r.value,function(e){var t=(new Date).getTime(),n=e-t;f(n),s("Local time:      "+new Date(t)),s("Server time:     "+new Date(e)),s("Difference (ms): "+n),a(e,n)},function(){e(t,i+1)}):e(t,i+1):(f(0),a())}(e),r(!0))},getOffsetToDeviceTimeMs:function(){return o},setConfig:function(e){e&&(e.metricsModel&&(c=e.metricsModel),e.dashMetrics&&(d=e.dashMetrics))},reset:function(){r(!1),h(!1)}}}a.__dashjs_factory_name="TimeSyncController";var s=r.default.getSingletonFactory(a);s.TIME_SYNC_FAILED_ERROR_CODE=1,s.HTTP_TIMEOUT_MS=5e3,n.default=s,t.exports=n.default},{10:10,13:13,165:165,8:8,9:9}],72:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=i(e(58)),_=i(e(9)),g=i(e(13)),r=i(e(10)),m=i(e(4)),v=i(e(159)),E="onLoad",y="Period",T="AdaptationSet",A="EventStream";function a(e){var t=this.context,r=(0,_.default)(t).getInstance(),o=(0,v.default)(t).getInstance(),n=void 0,i=void 0,l=void 0,u=void 0,a=void 0,c=void 0;function s(e,t,n){var i,r,a,s={};for(s.elements=e,s.type=t,s.resolveType=n,0===s.elements.length&&h(s),a=0;a<s.elements.length;a++)i=s.elements[a],r=o.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,c.load(r,i,s)}function d(e){var t,n,i,r="";t=e.element,n=e.resolveObject,t.resolvedContent&&(i=t.resolvedContent.indexOf(">")+1,r=t.resolvedContent.substr(0,i)+"<response>"+t.resolvedContent.substr(i)+"</response>",t.resolvedContent=a.xml_str2json(r)),function(e){var t;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0}(n)&&h(n)}function h(e){var t,n,i=[];if(function(e){var t,n,i,r,a,s,o=[];for(r=e.elements.length-1;0<=r;r--){if(t=e.elements[r],n=t.type+"_asArray",t.resolvedContent){if(t.resolvedContent)for(a=0;a<t.resolvedContent[n].length;a++)i=t.resolvedContent[n][a],o.push(i)}else delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],o.push(t.originalContent);for(t.parentElement[n].splice(t.index,1),s=0;s<o.length;s++)t.parentElement[n].splice(t.index+s,0,o[s]);o=[]}0<e.elements.length&&l.run(u)}(e),"onActuate"===e.resolveType&&r.trigger(g.default.XLINK_READY,{manifest:u}),e.resolveType===E)switch(e.type){case y:for(t=0;t<u.Period_asArray.length;t++)(n=u.Period_asArray[t]).hasOwnProperty(T+"_asArray")&&(i=i.concat(f(n[T+"_asArray"],n,T,E))),n.hasOwnProperty(A+"_asArray")&&(i=i.concat(f(n[A+"_asArray"],n,A,E)));s(i,T,E);break;case T:r.trigger(g.default.XLINK_READY,{manifest:u})}}function f(e,t,n,i){var r,a,s,o=[];for(a=e.length-1;0<=a;a--)(r=e[a]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===r["xlink:href"]&&e.splice(a,1);for(a=0;a<e.length;a++)(r=e[a]).hasOwnProperty("xlink:href")&&r.hasOwnProperty("xlink:actuate")&&r["xlink:actuate"]===i&&(s={url:r["xlink:href"],parentElement:t,type:n,index:a,resolveType:i,originalContent:r,resolvedContent:null,resolved:!1},o.push(s));return o}return n={resolveManifestOnLoad:function(e){a=new m.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:i}),s(f((u=e).Period_asArray,u,y,E),y,E)},setMatchers:function(e){i=e},setIron:function(e){l=e},reset:function(){r.off(g.default.XLINK_ELEMENT_LOADED,d,n),c&&(c.reset(),c=null)}},r.on(g.default.XLINK_ELEMENT_LOADED,d,n),c=(0,p.default)(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),n}a.__dashjs_factory_name="XlinkController",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,13:13,159:159,4:4,58:58,9:9}],73:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(87)),a=i(e(74)),s=i(e(75)),o=i(e(80)),l=i(e(85)),u=i(e(10));function c(){var t=this.context;return{createMetricsReporting:function(e){return(0,r.default)(t).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel}),(0,s.default)(t).create(e)},getReportingFactory:function(){return(0,l.default)(t).getInstance()},getMetricsHandlerFactory:function(){return(0,o.default)(t).getInstance()}}}c.__dashjs_factory_name="MetricsReporting";var d=u.default.getClassFactory(c);d.events=a.default,n.default=d,t.exports=n.default},{10:10,74:74,75:75,80:80,85:85,87:87}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(14),a=(i=r)&&i.__esModule?i:{default:i},s=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),t}());n.default=s,t.exports=n.default},{14:14}],75:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=i(e(76)),l=i(e(89)),r=i(e(10)),u=i(e(74)),c=i(e(13));function a(r){var a={},s=this.context,t=r.eventBus;function e(e){if(!e.error){var i=Object.keys(a);(0,l.default)(s).getInstance({dashManifestModel:r.dashManifestModel}).getMetrics(e.manifest).forEach(function(e){var t=JSON.stringify(e);if(a.hasOwnProperty(t))i.splice(t,1);else try{var n=(0,o.default)(s).create(r);n.initialize(e),a[t]=n}catch(e){}}),i.forEach(function(e){a[e].reset(),delete a[e]}),t.trigger(u.default.METRICS_INITIALISATION_COMPLETE)}}function n(){Object.keys(a).forEach(function(e){a[e].reset()}),a={}}return t.on(c.default.MANIFEST_UPDATED,e),t.on(c.default.STREAM_TEARDOWN_COMPLETE,n),{}}a.__dashjs_factory_name="MetricsCollectionController",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,13:13,74:74,76:76,89:89}],76:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),o=i(e(78)),l=i(e(79)),u=i(e(77));function a(t){var n=void 0,i=void 0,r=void 0,a=this.context;function s(){n&&n.reset(),i&&i.reset(),r&&r.reset()}return{initialize:function(e){try{(r=(0,o.default)(a).create({mediaElement:t.mediaElement})).initialize(e.Range),(i=(0,l.default)(a).create({log:t.log})).initialize(e.Reporting,r),(n=(0,u.default)(a).create({log:t.log,eventBus:t.eventBus})).initialize(e.metrics,i)}catch(e){throw s(),e}},reset:s}}a.__dashjs_factory_name="MetricsController",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,77:77,78:78,79:79}],77:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(80)),r=i(e(10)),l=i(e(53));function s(e){var s=[],t=void 0,n=this.context,i=e.eventBus,o=(0,a.default)(n).getInstance({log:e.log,eventBus:e.eventBus});function r(t){s.forEach(function(e){e.handleNewMetric(t.metric,t.value,t.mediaType)})}return t={initialize:function(e,a){e.split(",").forEach(function(e,t,n){var i;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var r=n[t+1];r&&-1===r.indexOf("(")&&-1!==r.indexOf(")")&&(e+=","+r,delete n[t+1])}(i=o.create(e,a))&&s.push(i)}),i.on(l.default.METRIC_ADDED,r,t),i.on(l.default.METRIC_UPDATED,r,t)},reset:function(){i.off(l.default.METRIC_ADDED,r,t),i.off(l.default.METRIC_UPDATED,r,t),s.forEach(function(e){return e.reset()}),s=[]}}}s.__dashjs_factory_name="MetricsHandlersController",n.default=r.default.getClassFactory(s),t.exports=n.default},{10:10,53:53,80:80}],78:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),l=i(e(149));function a(e){var t,a=!1,n=this.context,s=void 0,o=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;s.add(t,n)}),a=!!e[0]._useWallClockTime)},reset:function(){s.clear()},isEnabled:function(){var e,t=s.length;if(!t)return!0;e=a?(new Date).getTime()/1e3:o.currentTime;for(var n=0;n<t;n+=1){var i=s.start(n),r=s.end(n);if(i<=e&&e<r)return!0}return!1}},s=(0,l.default)(n).create(),t}a.__dashjs_factory_name="RangeController",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,149:149}],79:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),a=i(e(85));function s(e){var i=[],r=(0,a.default)(this.context).getInstance({log:e.log});return{initialize:function(e,n){e.some(function(e){var t=r.create(e,n);if(t)return i.push(t),!0})},reset:function(){i.forEach(function(e){return e.reset()}),i=[]},report:function(t,n){i.forEach(function(e){return e.report(t,n)})}}}s.__dashjs_factory_name="ReportingController",n.default=r.default.getClassFactory(s),t.exports=n.default},{10:10,85:85}],80:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),u=i(e(81)),c=i(e(82)),d=i(e(84)),h=i(e(83));function a(r){var a=r.log,s=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,o=this.context,l={BufferLevel:u.default,DVBErrors:c.default,HttpList:d.default,PlayList:h.default,RepSwitchList:h.default,TcpList:h.default};return{create:function(e,t){var n,i=e.match(s);if(i){try{(n=l[i[1]](o).create({eventBus:r.eventBus})).initialize(i[1],t,i[3],i[5])}catch(e){n=null,a("MetricsHandlerFactory: Could not create handler for type "+i[1]+" with args "+i[3]+", "+i[5]+" ("+e.message+")")}return n}},register:function(e,t){l[e]=t},unregister:function(e){delete l[e]}}}a.__dashjs_factory_name="MetricsHandlerFactory",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,81:81,82:82,83:83,84:84}],81:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),c=i(e(88));function a(){var i=void 0,r=void 0,a=void 0,s=void 0,t=void 0,e=this.context,o=(0,c.default)(e).getInstance(),l=[];function u(){var e=function(){try{return Object.keys(l).map(function(e){return l[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&t!==e.t&&(t=e.t,i.report(a,e))}return{initialize:function(e,t,n){t&&(r=o.validateN(n),i=t,a=o.reconstructFullMetricName(e,n),s=setInterval(u,r))},reset:function(){clearInterval(s),r=0,t=i=s=null},handleNewMetric:function(e,t,n){"BufferLevel"===e&&(l[n]=t)}}}a.__dashjs_factory_name="BufferLevelHandler",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,88:88}],82:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),a=i(e(74));n.default=r.default.getClassFactory(function(e){var n=void 0,i=e.eventBus;function r(){i.off(a.default.METRICS_INITIALISATION_COMPLETE,r,this),i.trigger(a.default.BECAME_REPORTING_PLAYER)}return{initialize:function(e,t){t&&(n=t,i.on(a.default.METRICS_INITIALISATION_COMPLETE,r,this))},reset:function(){n=null},handleNewMetric:function(e,t){"DVBErrors"===e&&n&&n.report(e,t)}}}),t.exports=n.default},{10:10,74:74}],83:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){var n=void 0,i=void 0;return{initialize:function(e,t){n=e,i=t},reset:function(){i=null,n=void 0},handleNewMetric:function(e,t){e===n&&i&&i.report(n,t)}}}s.__dashjs_factory_name="GenericMetricHandler",n.default=a.default.getClassFactory(s),t.exports=n.default},{10:10}],84:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),d=i(e(88));function a(){var r=void 0,a=void 0,s=void 0,o=void 0,l=void 0,n=[],u=(0,d.default)(this.context).getInstance();function c(){var e=n;e.length&&r&&r.report(o,e),n=[]}return{initialize:function(e,t,n,i){t&&(a=u.validateN(n),r=t,i&&i.length&&(s=i),o=u.reconstructFullMetricName(e,n,i),l=setInterval(c,a))},reset:function(){clearInterval(l),n=[],r=s=a=l=null},handleNewMetric:function(e,t){"HttpList"===e&&(s&&s!==t.type||n.push(t))}}}a.__dashjs_factory_name="HttpListHandler",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,88:88}],85:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),s=i(e(86));function a(e){var i={"urn:dvb:dash:reporting:2014":s.default},r=this.context,a=e.log;return{create:function(t,e){var n;try{(n=i[t.schemeIdUri](r).create()).initialize(t,e)}catch(e){n=null,a("ReportingFactory: could not create Reporting with schemeIdUri "+t.schemeIdUri+" ("+e.message+")")}return n},register:function(e,t){i[e]=t},unregister:function(e){delete i[e]}}}a.__dashjs_factory_name="ReportingFactory",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,86:86}],86:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),d=i(e(90)),h=i(e(91));function a(){var e=this.context,i=(0,d.default)(e).getInstance(),r=(0,h.default)(e).getInstance(),a=!0,s=!1,o=!1,l=null,u=null,t=!0,c=[];return{report:function(n,e){Array.isArray(e)||(e=[e]),s&&u.isEnabled()&&e.forEach(function(e){var t=i.serialise(e);a&&"DVBErrors"!==n&&(t="metricname="+n+"&"+t),function(e,t,n){var i=new XMLHttpRequest,r=function(){var e=c.indexOf(i);-1!==e&&(c.splice(e,1),200<=i.status&&i.status<300?t&&t():n&&n())};c.push(i);try{i.open("GET",e),i.onloadend=r,i.onerror=r,i.send()}catch(e){i.onerror()}}(t=l+"?"+t,null,function(){s=!1})})},initialize:function(e,t){var n;if(u=t,!(l=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");o||((n=e["dvb:probability"]||e["dvb:priority"]||0)&&(1e3===n||n/1e3>=r.random())&&(s=!0),o=!0)},reset:function(){t||(c.forEach(function(e){return e.abort()}),c=[]),s=o=!1,u=l=null}}}a.__dashjs_factory_name="DVBReporting",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,90:90,91:91}],87:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=i(e(92)),f=i(e(13)),p=i(e(53)),_=i(e(74)),r=i(e(10));function a(e){var t=void 0,n=e.eventBus,i=e.metricsModel,r=void 0;function a(e){var t=new h.default;if(r){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=r.originalUrl||r.url),t.terror||(t.terror=new Date),i.addDVBErrors(t)}}function s(e){e.error||(r=e.manifest)}function o(e){a({errorcode:h.default.BASE_URL_CHANGED,servicelocation:e.entry})}function l(){a({errorcode:h.default.BECAME_REPORTER})}function u(e){switch(e.metric){case"HttpList":(0===(t=e.value).responsecode||400<=t.responsecode||t.responsecode<100||600<=t.responsecode)&&a({errorcode:t.responsecode||h.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation})}var t}function c(e){var t;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=h.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=h.default.CORRUPT_MEDIA_OTHER;break;default:return}a({errorcode:t})}function d(){n.on(f.default.MANIFEST_UPDATED,s,t),n.on(f.default.SERVICE_LOCATION_BLACKLIST_CHANGED,o,t),n.on(p.default.METRIC_ADDED,u,t),n.on(p.default.METRIC_UPDATED,u,t),n.on(p.default.PLAYBACK_ERROR,c,t),n.on(_.default.BECAME_REPORTING_PLAYER,l,t)}return t={initialise:d,reset:function(){n.off(f.default.MANIFEST_UPDATED,s,t),n.off(f.default.SERVICE_LOCATION_BLACKLIST_CHANGED,o,t),n.off(p.default.METRIC_ADDED,u,t),n.off(p.default.METRIC_UPDATED,u,t),n.off(p.default.PLAYBACK_ERROR,c,t),n.off(_.default.BECAME_REPORTING_PLAYER,l,t)}},d(),t}a.__dashjs_factory_name="DVBErrorsTranslator",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,13:13,53:53,74:74,92:92}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){return{reconstructFullMetricName:function(e,t,n){var i=e;return t&&(i+="("+t,n&&n.length&&(i+=","+n),i+=")"),i},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}s.__dashjs_factory_name="HandlerHelpers",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],89:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(93)),s=i(e(94)),l=i(e(95)),r=i(e(10));function o(e){var o=e.dashManifestModel;return{getMetrics:function(r){var t=[];return r.Metrics_asArray&&r.Metrics_asArray.forEach(function(e){var i=new a.default,n=o.getIsDynamic(r);e.hasOwnProperty("metrics")&&(i.metrics=e.metrics,e.Range_asArray&&e.Range_asArray.forEach(function(e){var t=new s.default;t.starttime=function(e,t,n){var i,r,a=o.getMpd(e),s=0;return t?s=a.availabilityStartTime.getTime()/1e3:(i=this.getRegularPeriods(e,a)).length&&(s=i[0].start),r=s,n&&n.hasOwnProperty("starttime")&&(r+=n.starttime),r}(r,n,e),e.hasOwnProperty("duration")?t.duration=e.duration:t.duration=o.getDuration(r),t._useWallClockTime=n,i.Range.push(t)}),e.Reporting_asArray&&(e.Reporting_asArray.forEach(function(e){var t=new l.default;if(e.hasOwnProperty("schemeIdUri")){for(var n in t.schemeIdUri=e.schemeIdUri,e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.Reporting.push(t)}}),t.push(i)))}),t}}}o.__dashjs_factory_name="ManifestParsing",n.default=r.default.getSingletonFactory(o),t.exports=n.default},{10:10,93:93,94:94,95:95}],90:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){return{serialise:function n(e){var t,i,r=[],a=[];for(t in e)if(e.hasOwnProperty(t)&&0!==t.indexOf("_")){if(null==(i=e[t])&&(i=""),Array.isArray(i)){if(!i.length)continue;a=[],i.forEach(function(e){var t="Object"!==Object.prototype.toString.call(e).slice(8,-1);a.push(t?e:n(e))}),i=a.map(encodeURIComponent).join(",")}else"string"==typeof i?i=encodeURIComponent(i):i instanceof Date?i=i.toISOString():"number"==typeof i&&(i=Math.round(i));r.push(t+"="+i)}return r.join("&")}}}s.__dashjs_factory_name="MetricSerialiser",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){var e,i=window.crypto||window.msCrypto,t=Uint32Array,r=Math.pow(2,8*t.BYTES_PER_ELEMENT)-1,n=10,a=void 0,s=void 0;function o(){i&&(a||(a=new t(n)),i.getRandomValues(a),s=0)}return e={random:function(e,t){var n;return e||(e=0),t||(t=1),i?(s===a.length&&o(),n=a[s]/r,s+=1):n=Math.random(),n*(t-e)+e}},o(),e}s.__dashjs_factory_name="RNG",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],92:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};i.SSL_CONNECTION_FAILED_PREFIX="SSL",i.DNS_RESOLUTION_FAILED="C00",i.HOST_UNREACHABLE="C01",i.CONNECTION_REFUSED="C02",i.CONNECTION_ERROR="C03",i.CORRUPT_MEDIA_ISOBMFF="M00",i.CORRUPT_MEDIA_OTHER="M01",i.BASE_URL_CHANGED="F00",i.BECAME_REPORTER="S00",n.default=i,t.exports=n.default},{}],93:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics="",this.Range=[],this.Reporting=[]},t.exports=n.default},{}],94:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},t.exports=n.default},{}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],96:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(22)),u=i(e(156)),r=i(e(10)),c=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={baseUrls:t||null,selectedIdx:n||NaN},this.children=[]};function a(){var e,r=void 0,t=this.context,a=(0,l.default)(t).getInstance(),s=(0,u.default)(t).getInstance();function o(e,t,n){var i=a.getBaseURLsFromElement(n);e[t]?s.areSimpleEquivalent(i,e[t].data.baseUrls)||(e[t].data.baseUrls=i,e[t].data.selectedIdx=NaN):e[t]=new c(i)}return e={reset:function(){r=new c},update:function(e){var t,n;t=e,n=a.getBaseURLsFromElement(t),s.areSimpleEquivalent(n,r.data.baseUrls)||(r.data.baseUrls=n,r.data.selectedIdx=NaN),t.Period_asArray&&t.Period_asArray.forEach(function(e,i){o(r.children,i,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,n){o(r.children[i].children,n,e),e.Representation_asArray&&e.Representation_asArray.sort(a.getRepresentationSortFunction()).forEach(function(e,t){o(r.children[i].children[n].children,t,e)})})})},getForPath:function(e){var t=r,n=[t.data];return e.forEach(function(e){(t=t.children[e])&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(t){!function t(n,e){var i=e||r;n(i.data),i.children&&i.children.forEach(function(e){return t(n,e)})}(function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=NaN)})}},r=new c,e}a.__dashjs_factory_name="BaseURLTreeModel",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,156:156,22:22}],97:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var d=i(e(9)),h=i(e(13)),r=i(e(10)),f=i(e(166)),p=i(e(8)),_="loading",g="executed";function a(e){var t=this.context,n=(0,p.default)(t).getInstance().log,i=(0,d.default)(t).getInstance(),r=e.metricsModel,a=void 0,s=void 0,o=void 0,l=void 0;function u(e,t){r.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),r.addRequestsQueue(e.mediaType,o,s)}function c(e){e.sender===l&&(o.splice(o.indexOf(e.request),1),e.response&&!e.error&&s.push(e.request),u(e.request,e.error?"failed":g),i.trigger(h.default.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}return a={setLoader:function(e){l=e},getRequests:function(r){var e=r.state instanceof Array?r.state:[r.state],a=[];return e.forEach(function(e){var t,n,i=function(e){var t=void 0;switch(e){case _:t=o;break;case g:t=s;break;default:t=[]}return t}(e);a=a.concat((t=i,(n=r).hasOwnProperty("time")?[function(e,t,n){for(var i=e.length-1;0<=i;i--){var r=e[i],a=r.startTime,s=a+r.duration;if(n=void 0!==n?n:r.duration/2,!isNaN(a)&&!isNaN(s)&&a<=t+n&&t-n<s||isNaN(a)&&isNaN(t))return r}return null}(t,n.time,n.threshold)]:t.filter(function(e){for(var t in n)if("state"!==t&&n.hasOwnProperty(t)&&e[t]!=n[t])return!1;return!0})))}),a},isFragmentLoaded:function(o){var l;return l=!1,s.some(function(e){if(a=o,s=e,!isNaN(a.index)&&a.startTime===s.startTime&&a.adaptationIndex===s.adaptationIndex||(i=o,r=e,isNaN(i.index)&&isNaN(r.index)&&i.quality===r.quality)||(n=e,(t=o).action===f.default.ACTION_COMPLETE&&t.action===n.action))return l=!0;var t,n,i,r,a,s}),l},removeExecutedRequestsBeforeTime:function(t){s=s.filter(function(e){return isNaN(e.startTime)||e.startTime>=t})},abortRequests:function(){l.abort(),o=[]},executeRequest:function(e){switch(e.action){case f.default.ACTION_COMPLETE:s.push(e),u(e,g),i.trigger(h.default.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case f.default.ACTION_DOWNLOAD:u(e,_),o.push(e),t=e,i.trigger(h.default.FRAGMENT_LOADING_STARTED,{sender:a,request:t}),l.load(t);break;default:n("Unknown request action.")}var t},reset:function(){i.off(h.default.LOADING_COMPLETED,c,this),l&&(l.reset(),l=null),s=[],o=[]}},l=null,s=[],o=[],i.on(h.default.LOADING_COMPLETED,c,a),a}a.__dashjs_factory_name="FragmentModel";var s=r.default.getClassFactory(a);s.FRAGMENT_MODEL_LOADING=_,s.FRAGMENT_MODEL_EXECUTED=g,s.FRAGMENT_MODEL_CANCELED="canceled",s.FRAGMENT_MODEL_FAILED="failed",n.default=s,t.exports=n.default},{10:10,13:13,166:166,8:8,9:9}],98:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(9)),a=i(e(13)),s=i(e(10));function o(){var e=this.context,t=(0,r.default)(e).getInstance(),n=void 0;return{getValue:function(){return n},setValue:function(e){(n=e)&&t.trigger(a.default.MANIFEST_LOADED,{data:e})}}}o.__dashjs_factory_name="ManifestModel",n.default=s.default.getSingletonFactory(o),t.exports=n.default},{10:10,13:13,9:9}],99:[function(e,t,n){"use strict";function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i},C=e(182);function s(){var e,t,n,i=void 0,r=void 0,a=void 0,s=void 0,o=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,_=void 0,g=void 0,m=void 0,v=void 0,E=void 0,y=void 0,T=void 0,A=void 0,S=void 0,R=void 0,b=void 0;return e={setBufferOccupancyABREnabled:function(e){S=e},getBufferOccupancyABREnabled:function(){return S},setBandwidthSafetyFactor:function(e){v=e},getBandwidthSafetyFactor:function(){return v},setAbandonLoadTimeout:function(e){E=e},getAbandonLoadTimeout:function(){return E},setLastBitrateCachingInfo:function(e,t){d.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(d.ttl=t)},getLastBitrateCachingInfo:function(){return d},setLastMediaSettingsCachingInfo:function(e,t){h.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(h.ttl=t)},getLastMediaSettingsCachingInfo:function(){return h},setStableBufferTime:function(e){f=e},getStableBufferTime:function(){return isNaN(f)?b?20:12:f},setBufferTimeAtTopQuality:function(e){p=e},getBufferTimeAtTopQuality:function(){return p},setBufferTimeAtTopQualityLongForm:function(e){_=e},getBufferTimeAtTopQualityLongForm:function(){return _},setLongFormContentDurationThreshold:function(e){g=e},getLongFormContentDurationThreshold:function(){return g},setRichBufferThreshold:function(e){m=e},getRichBufferThreshold:function(){return m},setBufferToKeep:function(e){u=e},getBufferToKeep:function(){return u},setBufferPruningInterval:function(e){c=e},getBufferPruningInterval:function(){return c},setFragmentRetryAttempts:function(e){y[C.HTTPRequest.MEDIA_SEGMENT_TYPE]=e},getFragmentRetryAttempts:function(){return y[C.HTTPRequest.MEDIA_SEGMENT_TYPE]},setRetryAttemptsForType:function(e,t){y[e]=t},getRetryAttemptsForType:function(e){return y[e]},setFragmentRetryInterval:function(e){T[C.HTTPRequest.MEDIA_SEGMENT_TYPE]=e},getFragmentRetryInterval:function(){return T[C.HTTPRequest.MEDIA_SEGMENT_TYPE]},setRetryIntervalForType:function(e,t){T[e]=t},getRetryIntervalForType:function(e){return T[e]},setWallclockTimeUpdateInterval:function(e){A=e},getWallclockTimeUpdateInterval:function(){return A},setScheduleWhilePaused:function(e){l=e},getScheduleWhilePaused:function(){return l},getUseSuggestedPresentationDelay:function(){return r},setUseSuggestedPresentationDelay:function(e){r=e},setLiveDelayFragmentCount:function(e){s=e},getLiveDelayFragmentCount:function(){return s},getLiveDelay:function(){return o},setLiveDelay:function(e){o=e},setUseManifestDateHeaderTimeSource:function(e){i=e},getUseManifestDateHeaderTimeSource:function(){return i},setUTCTimingSources:function(e){a=e},getUTCTimingSources:function(){return a},setXHRWithCredentialsForType:function t(e,n){e?R[e]=!!n:Object.keys(R).forEach(function(e){t(e,n)})},getXHRWithCredentialsForType:function(e){var t=R[e];return void 0===t?R.default:t},setFastSwitchEnabled:function(e){b=e},getFastSwitchEnabled:function(){return b},reset:function(){}},d={enabled:(a=[],!(b=S=!(l=i=!(r=!1)))),ttl:36e4},h={enabled:!0,ttl:36e4},s=4,o=void 0,f=NaN,p=c=u=30,_=60,g=600,m=20,v=.9,E=1e4,R={default:!(A=50)},I(t={},C.HTTPRequest.MPD_TYPE,3),I(t,C.HTTPRequest.XLINK_EXPANSION_TYPE,1),I(t,C.HTTPRequest.MEDIA_SEGMENT_TYPE,3),I(t,C.HTTPRequest.INIT_SEGMENT_TYPE,3),I(t,C.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),I(t,C.HTTPRequest.INDEX_SEGMENT_TYPE,3),I(t,C.HTTPRequest.OTHER_TYPE,3),y=t,I(n={},C.HTTPRequest.MPD_TYPE,500),I(n,C.HTTPRequest.XLINK_EXPANSION_TYPE,500),I(n,C.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),I(n,C.HTTPRequest.INIT_SEGMENT_TYPE,1e3),I(n,C.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),I(n,C.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),I(n,C.HTTPRequest.OTHER_TYPE,1e3),T=n,e}s.__dashjs_factory_name="MediaPlayerModel";var o=a.default.getSingletonFactory(s);o.DEFAULT_UTC_TIMING_SOURCE={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},n.default=o,t.exports=n.default},{10:10,182:182}],100:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(171)),c=i(e(188)),v=e(182),f=i(e(185)),p=i(e(178)),_=i(e(179)),E=i(e(180)),y=i(e(181)),T=e(183),A=i(e(187)),S=i(e(9)),R=i(e(186)),b=i(e(13)),r=i(e(10)),I=i(e(177));function a(){var e,r=1e3,t=this.context,i=(0,S.default)(t).getInstance(),g=void 0,n=void 0;function a(){i.trigger(b.default.METRICS_CHANGED)}function s(e){i.trigger(b.default.METRIC_CHANGED,{mediaType:e}),a()}function u(e,t,n){i.trigger(b.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),s(e)}function d(e,t,n){i.trigger(b.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),s(e)}function o(e){var t;return n.hasOwnProperty(e)?t=n[e]:(t=new l.default,n[e]=t),t}function h(e,t,n){var i=o(e);i[t].push(n),i[t].length>r&&i[t].shift()}function m(e,t,n){h(e,t,n),d(e,t,n)}return e={metricsChanged:a,metricChanged:s,metricUpdated:u,metricAdded:d,clearCurrentMetricsForType:function(e){delete n[e],s(e)},clearAllCurrentMetrics:function(){n={},a()},getReadOnlyMetricsFor:function(e){return n.hasOwnProperty(e)?n[e]:null},getMetricsFor:o,addTcpConnection:function(e,t,n,i,r,a){var s=new c.default;return s.tcpid=t,s.dest=n,s.topen=i,s.tclose=r,s.tconnect=a,m(e,g.metricsList.TCP_CONNECTION,s),s},addHttpRequest:function e(t,n,i,r,a,s,o,l,u,c,d,h,f,p){var _=new v.HTTPRequest;return a&&a!==r&&(e(t,null,i,r,null,null,o,l,null,null,null,h,null,null),_.actualurl=a),_.tcpid=n,_.type=i,_.url=r,_.range=o,_.trequest=l,_.tresponse=u,_.responsecode=d,_._tfinish=c,_._stream=t,_._mediaduration=h,_._responseHeaders=f,_._serviceLocation=s,p?p.forEach(function(e){var t,n,i,r,a;t=_,n=e.s,i=e.d,r=e.b,(a=new v.HTTPRequestTrace).s=n,a.d=i,a.b=r,t.trace.push(a),t.interval||(t.interval=0),t.interval+=i}):(delete _.interval,delete _.trace),m(t,g.metricsList.HTTP_REQUEST,_),_},addRepresentationSwitch:function(e,t,n,i,r){var a=new f.default;return a.t=t,a.mt=n,a.to=i,r?a.lto=r:delete a.lto,m(e,g.metricsList.TRACK_SWITCH,a),a},addBufferLevel:function(e,t,n){var i=new p.default;return i.t=t,i.level=n,m(e,g.metricsList.BUFFER_LEVEL,i),i},addBufferState:function(e,t,n){var i=new _.default;return i.target=n,i.state=t,m(e,g.metricsList.BUFFER_STATE,i),i},addDVRInfo:function(e,t,n,i){var r=new E.default;return r.time=t,r.range=i,r.manifestInfo=n,m(e,g.metricsList.DVR_INFO,r),r},addDroppedFrames:function(e,t){var n=new y.default,i=o(e).DroppedFrames;return n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,0<i.length&&i[i.length-1]==n?i[i.length-1]:(m(e,g.metricsList.DROPPED_FRAMES,n),n)},addSchedulingInfo:function(e,t,n,i,r,a,s,o,l){var u=new A.default;return u.mediaType=e,u.t=t,u.type=n,u.startTime=i,u.availabilityStartTime=r,u.duration=a,u.quality=s,u.range=o,u.state=l,m(e,g.metricsList.SCHEDULING_INFO,u),u},addRequestsQueue:function(e,t,n){var i=new R.default;i.loadingRequests=t,i.executedRequests=n,o(e).RequestsQueue=i,d(e,g.metricsList.REQUESTS_QUEUE,i)},addManifestUpdate:function(e,t,n,i,r,a,s,o,l,u){var c=new T.ManifestUpdate;return c.mediaType=e,c.type=t,c.requestTime=n,c.fetchTime=i,c.availabilityStartTime=r,c.presentationStartTime=a,c.clientTimeOffset=s,c.currentTime=o,c.buffered=l,c.latency=u,h("stream","ManifestUpdate",c),d(e,g.metricsList.MANIFEST_UPDATE,c),c},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];u(e.mediaType,g.metricsList.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,i,r){if(e){var a=new T.ManifestUpdateStreamInfo;return a.id=t,a.index=n,a.start=i,a.duration=r,e.streamInfo.push(a),u(e.mediaType,g.metricsList.MANIFEST_UPDATE_STREAM_INFO,e),a}return null},addManifestUpdateRepresentationInfo:function(e,t,n,i,r,a,s,o){if(e){var l=new T.ManifestUpdateTrackInfo;return l.id=t,l.index=n,l.streamIndex=i,l.mediaType=r,l.startNumber=s,l.fragmentInfoType=o,l.presentationTimeOffset=a,e.trackInfo.push(l),u(e.mediaType,g.metricsList.MANIFEST_UPDATE_TRACK_INFO,e),l}return null},addPlayList:function(e){return e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,m("stream",g.metricsList.PLAY_LIST,e),e},addDVBErrors:function(e){return m("stream",g.metricsList.DVB_ERRORS,e),e},updateBolaState:function(e,t){var n=new I.default;return n._s=t,o(e).BolaState=[n],d(e,"BolaState",n),n},setConfig:function(e){e&&e.adapter&&(g=e.adapter)}},n={},e}a.__dashjs_factory_name="MetricsModel",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,13:13,171:171,177:177,178:178,179:179,180:180,181:181,182:182,183:183,185:185,186:186,187:187,188:188,9:9}],101:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(176)),a=i(e(10));function s(){var l=void 0,u=void 0,c=void 0;return{initialize:function(){l=new r.default,u=[],c=!1},parseURI:function(e){if(!e)return null;var i=[],t=new RegExp(/[?]/),n=new RegExp(/[#]/),r=new RegExp(/^(https:)?\/\//i),a=t.test(e),s=n.test(e);function o(e,t,n,i){var r=i[0].split(/[=]/);return i.push({key:r[0],value:r[1]}),i.shift(),i}return c=r.test(e),e.split(/[?#]/).map(function(e,t,n){return 0<t&&(a&&0===u.length?u=n[t].split(/[&]/):s&&(i=n[t].split(/[&]/))),n}),0<u.length&&(u=u.reduce(o,null)),0<i.length&&(i=i.reduce(o,null)).forEach(function(e){l[e.key]=e.value}),e},getURIFragmentData:function(){return l},getURIQueryData:function(){return u},isManifestHTTPS:function(){return c}}}s.__dashjs_factory_name="URIQueryAndFragmentModel",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10,176:176}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){var l=void 0,t=void 0,n=void 0,u=void 0,c=void 0;function i(){l.playbackRate=c||1,l.removeEventListener("canplay",i)}function d(e){l&&(l.readyState<=2&&0<e?l.addEventListener("canplay",i):l.playbackRate=e)}return{initialize:function(){u=[]},setCurrentTime:function(t){if(l.currentTime!=t)try{l.currentTime=t}catch(e){0===l.readyState&&e.code===e.INVALID_STATE_ERR&&setTimeout(function(){l.currentTime=t},400)}},setStallState:function(e,t){var n,i,r,a,s,o;o=e,t?(s=void 0,null===(a=o)||l.seeking||-1!==u.indexOf(a)||(u.push(a),1===u.length&&((s=document.createEvent("Event")).initEvent("waiting",!0,!1),c=l.playbackRate,d(0),l.dispatchEvent(s)))):(n=o,i=u.indexOf(n),r=void 0,null!==n&&(-1!==i&&u.splice(i,1),0<u.length==0&&0===l.playbackRate&&(d(c||1),l.paused||((r=document.createEvent("Event")).initEvent("playing",!0,!1),l.dispatchEvent(r)))))},getElement:function(){return l},setElement:function(e){(l=e).preload="auto"},setSource:function(e){e?l.src=e:(l.removeAttribute("src"),l.load())},getSource:function(){return l.src},getVideoContainer:function(){return n},setVideoContainer:function(e){n=e},getTTMLRenderingDiv:function(){return t},setTTMLRenderingDiv:function(e){(t=e).style.position="absolute",t.style.display="flex",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.top=0,t.style.left=0},getPlaybackQuality:function(){var e="webkitDroppedFrameCount"in l&&"webkitDecodedFrameCount"in l,t=null;return"getVideoPlaybackQuality"in l?t=l.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:l.webkitDroppedFrameCount,totalVideoFrames:l.webkitDroppedFrameCount+l.webkitDecodedFrameCount,creationTime:new Date}),t}}}s.__dashjs_factory_name="VideoModel",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],103:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var i,a=e(1),s=(i=a)&&i.__esModule?i:{default:i},o=function(){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i)}return r(i,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var i=e[n];"urn:mpeg:dash:mp4protection:2011"===i.schemeIdUri.toLowerCase()&&"cenc"===i.value.toLowerCase()&&(t=i)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),i=n.getUint8(t);return t+=20,0<i&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,t){var n=i.parsePSSHList(t);return n.hasOwnProperty(e.uuid.toLowerCase())?n[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e){return"pssh"in e?s.default.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];for(var t=new DataView(e),n={},i=0;;){var r,a,s,o=i;if(i>=t.buffer.byteLength)break;if(r=i+t.getUint32(i),i+=4,1886614376===t.getUint32(i))if(i+=4,0===(a=t.getUint8(i))||1===a){var l,u;for(i++,i+=3,s="",l=0;l<4;l++)s+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=4,s+="-",l=0;l<2;l++)s+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,s+="-",l=0;l<2;l++)s+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,s+="-",l=0;l<2;l++)s+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,s+="-",l=0;l<6;l++)s+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;i+=6,s=s.toLowerCase(),t.getUint32(i),i+=4,n[s]=t.buffer.slice(o,r),i=r}else i=r;else i=r}return n}}]),i}();n.default=o,t.exports=n.default},{1:1}],104:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var c=i(e(106)),d=i(e(107)),r=i(e(105)),h=i(e(112)),f=i(e(113)),p=i(e(111)),a=i(e(10)),_=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],g=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function s(){var l=this.context;function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("function"==typeof e[i[Object.keys(i)[0]]])return i}return null}return{createProtectionSystem:function(e){var t=null,n=(0,d.default)(l).getInstance();n.setConfig({log:e.log}),n.initialize();var i,r,a,s,o=(r=(i=e).log,a=i.eventBus,void 0!==(s=i.videoModel.getElement()).onencrypted&&void 0!==s.mediaKeys&&void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?(r("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,h.default)(l).create({log:r,eventBus:a})):u(s,g)?(r("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,f.default)(l).create({log:r,eventBus:a,api:u(s,g)})):u(s,_)?(r("EME detected on this user agent! (ProtectionModel_01b)"),(0,p.default)(l).create({log:r,eventBus:a,api:u(s,_)})):(r("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null));return!t&&o&&(t=(0,c.default)(l).create({protectionModel:o,protectionKeyController:n,adapter:e.adapter,eventBus:e.eventBus,log:e.log}),e.capabilities.setEncryptedMediaSupported(!0)),t}}}s.__dashjs_factory_name="Protection";var o=a.default.getClassFactory(s);o.events=r.default,n.default=o,t.exports=n.default},{10:10,105:105,106:106,107:107,111:111,112:112,113:113}],105:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(14),a=(i=r)&&i.__esModule?i:{default:i},s=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),t}());n.default=s,t.exports=n.default},{14:14}],106:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var b=i(e(103)),I=i(e(13)),C=i(e(124)),P=i(e(123)),r=i(e(10)),a=i(e(104));function s(e){var t,g=e.protectionKeyController,m=e.protectionModel,s=e.adapter,v=e.eventBus,E=e.log,h=void 0,f=void 0,p=void 0,y=void 0,o=void 0,_=void 0,T=void 0,A=void 0;function S(e){var t=b.default.getPSSHForKeySystem(A,e);if(t){for(var n=m.getAllInitData(),i=0;i<n.length;i++)if(g.initDataEquals(t,n[i]))return void E("DRM: Ignoring initData because we have already seen it!");try{m.createKeySession(t,_)}catch(e){v.trigger(I.default.KEY_SESSION_CREATED,{data:null,error:"Error creating key session! "+e.message})}}else v.trigger(I.default.KEY_SESSION_CREATED,{data:null,error:"Selected key system is "+A.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!"})}function n(e){e?(m.setMediaElement(e),v.on(I.default.NEED_KEY,r,this),v.on(I.default.INTERNAL_KEY_MESSAGE,i,this)):null===e&&(m.setMediaElement(e),v.off(I.default.NEED_KEY,r,this),v.off(I.default.INTERNAL_KEY_MESSAGE,i,this))}function l(n,i){var r=this,e=[],t=[];p&&t.push(new C.default(p.codec,T)),f&&e.push(new C.default(f.codec,T));var a,s=new P.default(e,t,"optional","temporary"===_?"optional":"required",[_]),o=[];if(A)for(a=0;a<n.length;a++){if(A===n[a].ks)if("break"===function(){o.push({ks:n[a].ks,configs:[s]});return v.on(I.default.KEY_SYSTEM_ACCESS_COMPLETE,function e(t){v.off(I.default.KEY_SYSTEM_ACCESS_COMPLETE,e,r),t.error?i||v.trigger(I.default.KEY_SYSTEM_SELECTED,{error:"DRM: KeySystem Access Denied! -- "+t.error}):(E("DRM: KeySystem Access Granted"),v.trigger(I.default.KEY_SYSTEM_SELECTED,{data:t.data}),S(n[a].initData))},r),m.requestKeySystemAccess(o),"break"}())break}else if(void 0===A){A=null,h.push(n);for(var l=0;l<n.length;l++)o.push({ks:n[l].ks,configs:[s]});var u,c=function e(t){v.off(I.default.KEY_SYSTEM_ACCESS_COMPLETE,e,r),t.error?(A=void 0,v.off(I.default.INTERNAL_KEY_SYSTEM_SELECTED,d,r),i||v.trigger(I.default.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: KeySystem Access Denied! -- "+t.error})):(u=t.data,E("DRM: KeySystem Access Granted ("+u.keySystem.systemString+")!  Selecting key system..."),m.selectKeySystem(u))},d=function e(t){if(v.off(I.default.INTERNAL_KEY_SYSTEM_SELECTED,e,r),v.off(I.default.KEY_SYSTEM_ACCESS_COMPLETE,c,r),t.error)A=void 0,i||v.trigger(I.default.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: Error selecting key system! -- "+t.error});else{A=m.getKeySystem(),v.trigger(I.default.KEY_SYSTEM_SELECTED,{data:u});for(var n=0;n<h.length;n++)for(a=0;a<h[n].length;a++)if(A===h[n][a].ks){S(h[n][a].initData);break}}};v.on(I.default.INTERNAL_KEY_SYSTEM_SELECTED,d,r),v.on(I.default.KEY_SYSTEM_ACCESS_COMPLETE,c,r),m.requestKeySystemAccess(o)}else h.push(n)}function R(e,t){v.trigger(I.default.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function i(e){if(E("DRM: onKeyMessage"),e.error)E(e.error);else{var t=e.data;v.trigger(I.default.KEY_MESSAGE,{data:t});var n,i,r=t.messageType?t.messageType:"license-request",a=t.message,s=t.sessionToken,o=(n=null,i=A.systemString,y&&(n=i in y?y[i]:null),n),l=A.systemString,u=g.getLicenseServer(A,o,r),c={sessionToken:s,messageType:r};if(!u)return E("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+s.getSessionID()),void R(c);if(g.isClearKey(A)){var d=g.processClearKeyLicenseRequest(o,a);if(d)return E("DRM: ClearKey license request handled by application!"),R(c),void m.updateKeySession(s,d)}var h=new XMLHttpRequest,f=null;if(o&&o.serverURL){var p=o.serverURL;"string"==typeof p&&""!==p?f=p:"object"==typeof p&&p.hasOwnProperty(r)&&(f=p[r])}else o&&o.laURL&&""!==o.laURL?f=o.laURL:(f=A.getLicenseServerURLFromInitData(b.default.getPSSHData(s.initData)))||(f=e.data.laURL);if(f=u.getServerURLFromMessage(f,a,r)){h.open(u.getHTTPMethod(r),f,!0),h.responseType=u.getResponseType(l,r),h.onload=function(){200==this.status?(R(c),m.updateKeySession(s,u.getLicenseMessage(this.response,l,r))):R(c,"DRM: "+l+' update, XHR status is "'+this.statusText+'" ('+this.status+"), expected to be 200. readyState is "+this.readyState+".  Response is "+(this.response?u.getErrorResponse(this.response,l,r):"NONE"))},h.onabort=function(){R(c,"DRM: "+l+' update, XHR aborted. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)},h.onerror=function(){R(c,"DRM: "+l+' update, XHR error. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)};var _=function(e){var t;if(e)for(t in e)"authorization"===t.toLowerCase()&&(h.withCredentials=!0),h.setRequestHeader(t,e[t])};o&&_(o.httpRequestHeaders),_(A.getRequestHeadersFromMessage(a)),o&&o.withCredentials&&(h.withCredentials=!0),h.send(A.getLicenseRequestFromMessage(a))}else R(c,"DRM: No license server URL specified!")}}function r(e){if(E("DRM: onNeedKey"),"cenc"===e.key.initDataType){var t=e.key.initData;ArrayBuffer.isView(t)&&(t=t.buffer),E("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(t)));var n=g.getSupportedKeySystems(t,y);0!==n.length?l(n,!1):E("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else E("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}return t={initialize:function(e,t,n){if(!o){var i;t||n||(i=s.getStreamsInfo(e)[0]),f=t||(i?s.getMediaInfoForType(e,i,"audio"):null);var r=(p=n||(i?s.getMediaInfoForType(e,i,"video"):null))||f,a=g.getSupportedKeySystemsFromContentProtection(r.contentProtection);a&&0<a.length&&l(a,!0),o=!0}},createKeySession:S,loadKeySession:function(e){m.loadKeySession(e)},removeKeySession:function(e){m.removeKeySession(e)},closeKeySession:function(e){m.closeKeySession(e)},setServerCertificate:function(e){m.setServerCertificate(e)},setMediaElement:n,setSessionType:function(e){_=e},setRobustnessLevel:function(e){T=e},setProtectionData:function(e){y=e},reset:function(){n(null),A=void 0,m&&(m.reset(),m=null)}},g.getKeySystems(),o=!(h=[]),_="temporary",T="",I.default.extend(a.default.events),t}s.__dashjs_factory_name="ProtectionController",n.default=r.default.getClassFactory(s),t.exports=n.default},{10:10,103:103,104:104,123:123,124:124,13:13}],107:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(103)),a=i(e(108)),s=i(e(110)),u=i(e(109)),c=i(e(115)),d=i(e(116)),h=i(e(117)),f=i(e(114)),r=i(e(10));function o(){var r=this.context,n=void 0,o=void 0,i=void 0;return{initialize:function(){var e;o=[],e=(0,u.default)(r).getInstance(),o.push(e),e=(0,s.default)(r).getInstance(),o.push(e),e=(0,a.default)(r).getInstance(),o.push(e),i=e},isClearKey:function(e){return e===i},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new Uint8Array(e),i=new Uint8Array(t),r=0;r<n.length;r++)if(n[r]!==i[r])return!1;return!0},getKeySystems:function(){return o},getKeySystemBySystemString:function(e){for(var t=0;t<o.length;t++)if(o[t].systemString===e)return o[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t,n,i,r,a=[];if(e)for(i=0;i<o.length;++i)for(n=o[i],r=0;r<e.length;++r)if((t=e[r]).schemeIdUri.toLowerCase()===n.schemeIdURI){var s=n.getInitData(t);s&&a.push({ks:o[i],initData:s})}return a},getSupportedKeySystems:function(e,t){var n,i=[],r=l.default.parsePSSHList(e);for(n=0;n<o.length;++n){var a=o[n].systemString,s=!t||a in t;o[n].uuid in r&&s&&i.push({ks:o[n],initData:r[o[n].uuid]})}return i},getLicenseServer:function(e,t,n){if("license-release"===n||"individualization-request"===n)return null;var i=null;return t&&t.hasOwnProperty("drmtoday")?i=(0,c.default)(r).getInstance():"com.widevine.alpha"===e.systemString?i=(0,h.default)(r).getInstance():"com.microsoft.playready"===e.systemString?i=(0,d.default)(r).getInstance():"org.w3.clearkey"===e.systemString&&(i=(0,f.default)(r).getInstance()),i},processClearKeyLicenseRequest:function(e,t){try{return i.getClearKeysFromProtectionData(e,t)}catch(e){return n("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&e.log&&(n=e.log)}}}o.__dashjs_factory_name="ProtectionKeyController",n.default=r.default.getSingletonFactory(o),t.exports=n.default},{10:10,103:103,108:108,109:109,110:110,114:114,115:115,116:116,117:117}],108:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(121)),u=i(e(118)),r=i(e(103)),a=i(e(10)),s="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b";function o(){return{uuid:s,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:"org.w3.clearkey",getInitData:function(e){return r.default.parseInitDataFromContentProtection(e)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),r=[],a=0;a<i.kids.length;a++){var s=i.kids[a],o=e.clearkeys.hasOwnProperty(s)?e.clearkeys[s]:null;if(!o)throw new Error("DRM: ClearKey keyID ("+s+") is not known!");r.push(new l.default(s,o))}n=new u.default(r)}return n}}}o.__dashjs_factory_name="KeySystemClearKey",n.default=a.default.getSingletonFactory(o),t.exports=n.default},{10:10,103:103,118:118,121:121}],109:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var c=i(e(103)),r=i(e(165)),a=i(e(10)),d=i(e(1)),s="9a04f079-9840-4286-ab92-e65be0885f95";function o(){var u="utf16";return{uuid:s,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:"com.microsoft.playready",getInitData:function(e){var t,n,i,r,a,s=new Uint8Array([112,115,115,104,0,0,0,0]),o=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=0,u=null;if("pssh"in e)return c.default.parseInitDataFromContentProtection(e);if("pro"in e)u=d.default.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;u=d.default.decodeArray(e.prheader.__text)}return t=u.length,n=4+s.length+o.length+4+t,i=new ArrayBuffer(n),r=new Uint8Array(i),(a=new DataView(i)).setUint32(l,n),l+=4,r.set(s,l),l+=s.length,r.set(o,l),l+=o.length,a.setUint32(l,t),l+=4,r.set(u,l),l+=t,r.buffer},getRequestHeadersFromMessage:function(e){var t,n,i={},r=new DOMParser,a="utf16"===u?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,a);for(var s=(n=r.parseFromString(t,"application/xml")).getElementsByTagName("name"),o=n.getElementsByTagName("value"),l=0;l<s.length;l++)i[s[l].childNodes[0].nodeValue]=o[l].childNodes[0].nodeValue;return i.hasOwnProperty("Content")&&(i["Content-Type"]=i.Content,delete i.Content),i},getLicenseRequestFromMessage:function(e){var t,n,i=null,r=new DOMParser,a="utf16"===u?new Uint16Array(e):new Uint8Array(e);if(t=String.fromCharCode.apply(null,a),(n=r.parseFromString(t,"application/xml")).getElementsByTagName("Challenge")[0]){var s=n.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;s&&(i=d.default.decode(s))}return i},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),i=6,r=new DOMParser,a=0;a<n;a++){var s=t.getUint16(i,!0);i+=2;var o=t.getUint16(i,!0);if(i+=2,1===s){var l=e.slice(i,i+o),u=String.fromCharCode.apply(null,new Uint16Array(l)),c=r.parseFromString(u,"application/xml");if(c.getElementsByTagName("LA_URL")[0]){var d=c.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(d)return d}if(c.getElementsByTagName("LUI_URL")[0]){var h=c.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(h)return h}}else i+=o}return null},setPlayReadyMessageFormat:function(e){if("utf8"!==e&&"utf16"!==e)throw new r.default("Illegal PlayReady message format! -- "+e);u=e}}}o.__dashjs_factory_name="KeySystemPlayReady",n.default=a.default.getSingletonFactory(o),t.exports=n.default},{1:1,10:10,103:103,165:165}],110:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(103)),a=i(e(10)),s="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function o(){return{uuid:s,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:"com.widevine.alpha",getInitData:function(e){return r.default.parseInitDataFromContentProtection(e)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null}}}o.__dashjs_factory_name="KeySystemWidevine",n.default=a.default.getSingletonFactory(o),t.exports=n.default},{10:10,103:103}],111:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var m=i(e(107)),v=i(e(125)),E=i(e(119)),y=i(e(120)),T=i(e(123)),A=i(e(122)),S=i(e(13)),R=i(e(152)),r=i(e(10));function a(e){var t,n=this.context,h=e.eventBus,a=e.log,s=e.api,f=void 0,r=void 0,p=void 0,o=void 0,l=void 0,u=void 0,c=void 0,i=void 0;function d(e){f[s.cancelKeyRequest](r.systemString,e.sessionID)}function _(e,t){if(t&&e){for(var n=e.length,i=0;i<n;i++)if(e[i].sessionID==t)return e[i];return null}return null}function g(){f.removeEventListener(s.keyerror,i),f.removeEventListener(s.needkey,i),f.removeEventListener(s.keymessage,i),f.removeEventListener(s.keyadded,i)}return t={getAllInitData:function(){for(var e=[],t=0;t<l.length;t++)e.push(l[t].initData);for(t=0;t<u.length;t++)e.push(u[t].initData);return e},requestKeySystemAccess:function(e){var t=f;t||(t=document.createElement("video"));for(var n=!1,i=0;i<e.length;i++)for(var r=e[i].ks.systemString,a=e[i].configs,s=null,o=0;o<a.length;o++){var l=a[o].videoCapabilities;if(l&&0!==l.length){s=[];for(var u=0;u<l.length;u++)""!==t.canPlayType(l[u].contentType,r)&&s.push(l[u])}if(s&&(!s||0!==s.length)){n=!0;var c=new T.default(null,s),d=p.getKeySystemBySystemString(r);h.trigger(S.default.KEY_SYSTEM_ACCESS_COMPLETE,{data:new A.default(d,c)});break}}n||h.trigger(S.default.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return r},selectKeySystem:function(e){r=e.keySystem,h.trigger(S.default.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){f!==e&&(f&&g(),(f=e)&&(f.addEventListener(s.keyerror,i),f.addEventListener(s.needkey,i),f.addEventListener(s.keymessage,i),f.addEventListener(s.keyadded,i),h.trigger(S.default.VIDEO_ELEMENT_SELECTED)))},createKeySession:function(e){if(!r)throw new Error("Can not create sessions until you have selected a key system");if(c||0===u.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return l.push(t),f[s.generateKeyRequest](r.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionID;if(p.isClearKey(r))for(var i=0;i<t.keyPairs.length;i++)f[s.addKey](r.systemString,t.keyPairs[i].key,t.keyPairs[i].keyID,n);else f[s.addKey](r.systemString,new Uint8Array(t),e.initData,n)},closeKeySession:d,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},reset:function(){f&&g();for(var e=0;e<u.length;e++)d(u[e]);h.trigger(S.default.TEARDOWN_COMPLETE)}},r=f=null,l=[],u=[],p=(0,m.default)(n).getInstance(),o=(0,R.default)(n).getInstance(),i={handleEvent:function(e){var t=null;switch(e.type){case s.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;h.trigger(S.default.NEED_KEY,{key:new v.default(n,"cenc")});break;case s.keyerror:if((t=_(u,e.sessionId))||(t=_(l,e.sessionId)),t){var i="";switch(e.errorCode.code){case 1:i+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:i+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:i+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:i+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:i+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:i+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain."}i+="  System Code = "+e.systemCode,h.trigger(S.default.KEY_ERROR,{data:new E.default(t,i)})}else a("No session token found for key error");break;case s.keyadded:(t=_(u,e.sessionId))||(t=_(l,e.sessionId)),t?(a("DRM: Key added."),h.trigger(S.default.KEY_ADDED,{data:t})):a("No session token found for key added");break;case s.keymessage:if((c=null!==e.sessionId&&void 0!==e.sessionId)?!(t=_(u,e.sessionId))&&0<l.length&&(t=l.shift(),u.push(t),t.sessionID=e.sessionId):0<l.length&&(t=l.shift(),u.push(t),0!==l.length&&o.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),t){var r=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=r,h.trigger(S.default.INTERNAL_KEY_MESSAGE,{data:new y.default(t,r,e.defaultURL)})}else a("No session token found for key message")}}},t}a.__dashjs_factory_name="ProtectionModel_01b",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,107:107,119:119,120:120,122:122,123:123,125:125,13:13,152:152}],112:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=i(e(107)),_=i(e(125)),g=i(e(119)),m=i(e(120)),v=i(e(122)),E=i(e(13)),r=i(e(10));function a(e){var t,r,a,s,o,l,i,n=this.context,u=e.eventBus,c=e.log;function d(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function h(e){for(var t=0;t<o.length;t++)if(o[t]===e){o.splice(t,1);break}}function f(e,t,n){var i={session:e,initData:t,handleEvent:function(e){switch(e.type){case"keystatuseschange":u.trigger(E.default.KEY_STATUSES_CHANGED,{data:this});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;u.trigger(E.default.INTERNAL_KEY_MESSAGE,{data:new m.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getSessionType:function(){return n}};return e.addEventListener("keystatuseschange",i),e.addEventListener("message",i),e.closed.then(function(){h(i),c("DRM: Session closed.  SessionID = "+i.getSessionID()),u.trigger(E.default.KEY_SESSION_CLOSED,{data:i.getSessionID()})}),o.push(i),i}return t={getAllInitData:function(){for(var e=[],t=0;t<o.length;t++)e.push(o[t].initData);return e},requestKeySystemAccess:function(e){!function e(t,n){var i,r,a;r=t[i=n].ks,a=t[i].configs,navigator.requestMediaKeySystemAccess(r.systemString,a).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,n=new v.default(r,t);n.mksa=e,u.trigger(E.default.KEY_SYSTEM_ACCESS_COMPLETE,{data:n})}).catch(function(){++i<t.length?e(t,i):u.trigger(E.default.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied!"})})}(e,0)},getKeySystem:function(){return r},selectKeySystem:function(t){t.mksa.createMediaKeys().then(function(e){r=t.keySystem,s=e,a&&a.setMediaKeys(s),u.trigger(E.default.INTERNAL_KEY_SYSTEM_SELECTED)}).catch(function(){u.trigger(E.default.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})},setMediaElement:function(e){a!==e&&(a&&(a.removeEventListener("encrypted",l),a.setMediaKeys(null)),(a=e)&&(a.addEventListener("encrypted",l),s&&a.setMediaKeys(s)))},setServerCertificate:function(e){if(!r||!s)throw new Error("Can not set server certificate until you have selected a key system");s.setServerCertificate(e).then(function(){c("DRM: License server certificate successfully updated."),u.trigger(E.default.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){u.trigger(E.default.SERVER_CERTIFICATE_UPDATED,{error:"Error updating server certificate -- "+e.name})})},createKeySession:function(e,t){if(!r||!s)throw new Error("Can not create sessions until you have selected a key system");var n=s.createSession(t),i=f(n,e,t);n.generateRequest("cenc",e).then(function(){c("DRM: Session created.  SessionID = "+i.getSessionID()),u.trigger(E.default.KEY_SESSION_CREATED,{data:i})}).catch(function(e){h(i),u.trigger(E.default.KEY_SESSION_CREATED,{data:null,error:"Error generating key request -- "+e.name})})},updateKeySession:function(t,e){var n=t.session;i.isClearKey(r)&&(e=e.toJWK()),n.update(e).catch(function(e){u.trigger(E.default.KEY_ERROR,{data:new g.default(t,"Error sending update() message! "+e.name)})})},loadKeySession:function(n){if(!r||!s)throw new Error("Can not load sessions until you have selected a key system");var i=s.createSession();i.load(n).then(function(e){if(e){var t=f(i);c("DRM: Session created.  SessionID = "+t.getSessionID()),u.trigger(E.default.KEY_SESSION_CREATED,{data:t})}else u.trigger(E.default.KEY_SESSION_CREATED,{data:null,error:"Could not load session! Invalid Session ID ("+n+")"})}).catch(function(e){u.trigger(E.default.KEY_SESSION_CREATED,{data:null,error:"Could not load session ("+n+")! "+e.name})})},removeKeySession:function(t){t.session.remove().then(function(){c("DRM: Session removed.  SessionID = "+t.getSessionID()),u.trigger(E.default.KEY_SESSION_REMOVED,{data:t.getSessionID()})},function(e){u.trigger(E.default.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionID()+"). "+e.name})})},closeKeySession:function(t){d(t).catch(function(e){h(t),u.trigger(E.default.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionID()+") "+e.name})})},reset:function(){var t,e=o.length;if(0!==e)for(var n=function(e){h(e),0===o.length&&(a?(a.removeEventListener("encrypted",l),a.setMediaKeys(null).then(function(){u.trigger(E.default.TEARDOWN_COMPLETE)})):u.trigger(E.default.TEARDOWN_COMPLETE))},i=0;i<e;i++)!function(e){t.session.closed.then(function(){n(e)}),d(t).catch(function(){n(e)})}(t=o[i]);else u.trigger(E.default.TEARDOWN_COMPLETE)}},s=a=r=null,o=[],i=(0,p.default)(n).getInstance(),l={handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;u.trigger(E.default.NEED_KEY,{key:new _.default(t,e.initDataType)})}}}},t}a.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,107:107,119:119,120:120,122:122,125:125,13:13}],113:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=i(e(107)),f=i(e(125)),m=i(e(119)),v=i(e(120)),E=i(e(123)),y=i(e(122)),T=i(e(13)),r=i(e(10));function a(e){var t,n=this.context,p=e.eventBus,a=e.log,_=e.api,i=void 0,s=void 0,o=void 0,l=void 0,u=void 0,r=void 0,g=void 0;function c(e){var t=e.session;t.removeEventListener(_.error,e),t.removeEventListener(_.message,e),t.removeEventListener(_.ready,e),t.removeEventListener(_.close,e);for(var n=0;n<u.length;n++)if(u[n]===e){u.splice(n,1);break}t[_.release]()}function d(){var e=null,t=function(){i.removeEventListener("loadedmetadata",e),i[_.setMediaKeys](o),p.trigger(T.default.VIDEO_ELEMENT_SELECTED)};1<=i.readyState?t():(e=t.bind(this),i.addEventListener("loadedmetadata",e))}return t={getAllInitData:function(){for(var e=[],t=0;t<u.length;t++)e.push(u[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++)for(var i=e[n].ks.systemString,r=e[n].configs,a=null,s=null,o=0;o<r.length;o++){var l=r[o].audioCapabilities,u=r[o].videoCapabilities;if(l&&0!==l.length){a=[];for(var c=0;c<l.length;c++)window[_.MediaKeys].isTypeSupported(i,l[c].contentType)&&a.push(l[c])}if(u&&0!==u.length){s=[];for(var d=0;d<u.length;d++)window[_.MediaKeys].isTypeSupported(i,u[d].contentType)&&s.push(u[d])}if(!(!a&&!s||a&&0===a.length||s&&0===s.length)){t=!0;var h=new E.default(a,s),f=g.getKeySystemBySystemString(i);p.trigger(T.default.KEY_SYSTEM_ACCESS_COMPLETE,{data:new y.default(f,h)});break}}t||p.trigger(T.default.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return s},selectKeySystem:function(e){try{o=e.mediaKeys=new window[_.MediaKeys](e.keySystem.systemString),s=e.keySystem,l=e,i&&d(),p.trigger(T.default.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){p.trigger(T.default.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+s.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(e){i!==e&&(i&&i.removeEventListener(_.needkey,r),(i=e)&&(i.addEventListener(_.needkey,r),o&&d()))},createKeySession:function(e){if(!s||!o||!l)throw new Error("Can not create sessions until you have selected a key system");var t=null;if(null!==l.ksConfiguration.videoCapabilities&&0<l.ksConfiguration.videoCapabilities.length&&(t=l.ksConfiguration.videoCapabilities[0]),null===t&&null!==l.ksConfiguration.audioCapabilities&&0<l.ksConfiguration.audioCapabilities.length&&(t=l.ksConfiguration.audioCapabilities[0]),null===t)throw new Error("Can not create sessions for unknown content types.");var n=t.contentType,i=o.createSession(n,new Uint8Array(e)),r={session:i,initData:e,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case _.error:p.trigger(T.default.KEY_ERROR,{data:new m.default(this,"KeyError")});break;case _.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;p.trigger(T.default.INTERNAL_KEY_MESSAGE,{data:new v.default(this,t,e.destinationURL)});break;case _.ready:a("DRM: Key added."),p.trigger(T.default.KEY_ADDED);break;case _.close:a("DRM: Session closed.  SessionID = "+this.getSessionID()),p.trigger(T.default.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}};i.addEventListener(_.error,r),i.addEventListener(_.message,r),i.addEventListener(_.ready,r),i.addEventListener(_.close,r),u.push(r),a("DRM: Session created.  SessionID = "+r.getSessionID()),p.trigger(T.default.KEY_SESSION_CREATED,{data:r})},updateKeySession:function(e,t){var n=e.session;g.isClearKey(s)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))},closeKeySession:c,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},reset:function(){try{for(var e=0;e<u.length;e++)c(u[e]);i&&i.removeEventListener(_.needkey,r),p.trigger(T.default.TEARDOWN_COMPLETE)}catch(e){p.trigger(T.default.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}},l=o=s=i=null,u=[],g=(0,h.default)(n).getInstance(),r={handleEvent:function(e){switch(e.type){case _.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;p.trigger(T.default.NEED_KEY,{key:new f.default(t,"cenc")})}}}},t}a.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,107:107,119:119,120:120,122:122,123:123,125:125,13:13}],114:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=i(e(121)),o=i(e(118)),r=i(e(10));function a(){return{getServerURLFromMessage:function(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var i=0;i<n.kids.length;i++)e+=n.kids[i]+"&";return e=e.substring(0,e.length-1)},getHTTPMethod:function(){return"GET"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var i=e.keys[n],r=i.kid.replace(/=/g,""),a=i.k.replace(/=/g,"");t.push(new s.default(r,a))}return new o.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}a.__dashjs_factory_name="ClearKey",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,118:118,121:121}],115:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),a=i(e(1));function s(){var n={"com.widevine.alpha":{responseType:"json",getLicenseMessage:function(e){return a.default.decodeArray(e.license)},getErrorResponse:function(e){return e}},"com.microsoft.playready":{responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}};return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return n[e].responseType},getLicenseMessage:function(e,t){return n[t].getLicenseMessage(e)},getErrorResponse:function(e,t){return n[t].getErrorResponse(e)}}}s.__dashjs_factory_name="DRMToday",n.default=r.default.getSingletonFactory(s),t.exports=n.default},{1:1,10:10}],116:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}s.__dashjs_factory_name="PlayReady",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],117:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}s.__dashjs_factory_name="Widevine",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],118:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function n(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}return i(n,[{key:"toJWK",value:function(){var e,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var i={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(i)}this.type&&(n.type=this.type);var r=JSON.stringify(n),a=r.length,s=new ArrayBuffer(a),o=new Uint8Array(s);for(e=0;e<a;e++)o[e]=r.charCodeAt(e);return s}}]),n}();n.default=r,t.exports=n.default},{}],119:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionToken=t,this.error=n},t.exports=n.default},{}],120:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionToken=t,this.message=n,this.defaultURL=i,this.messageType=r||"license-request"},t.exports=n.default},{}],121:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyID=t,this.key=n},t.exports=n.default},{}],122:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keySystem=t,this.ksConfiguration=n},t.exports=n.default},{}],123:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,i,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=i,this.persistentState=r,this.sessionTypes=a},t.exports=n.default},{}],124:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentType=t,this.robustness=n},t.exports=n.default},{}],125:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData=t,this.initDataType=n},t.exports=n.default},{}],126:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){var r=[],a=0,s=0;return{push:function(e,t){var n=t.droppedVideoFrames-a;a=t.droppedVideoFrames;var i=t.totalVideoFrames-s;s=t.totalVideoFrames,r[e]?(r[e].droppedVideoFrames+=n,r[e].totalVideoFrames+=i):r[e]={droppedVideoFrames:n,totalVideoFrames:i}},getFrameHistory:function(){return r},reset:function(e){r=[],a=e.droppedVideoFrames,s=e.totalVideoFrames}}}s.__dashjs_factory_name="DroppedFramesHistory";var o=a.default.getClassFactory(s);n.default=o,t.exports=n.default},{10:10}],127:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(e){var t=e.streamProcessor.getCurrentRepresentationInfo(),n=e.streamProcessor,i=e.currentValue,r=e.playbackIndex,a=e.switchHistory,s=e.droppedFramesHistory,o=e.currentRequest,l=e.hasRichBuffer;return{getCurrentValue:function(){return i},getManifestInfo:function(){return t.mediaInfo.streamInfo.manifestInfo},getMediaInfo:function(){return t.mediaInfo},getPlaybackIndex:function(){return r},getDroppedFramesHistory:function(){return s},getCurrentRequest:function(){return o},getSwitchHistory:function(){return a},getStreamInfo:function(){return t.mediaInfo.streamInfo},getStreamProcessor:function(){return n},getTrackInfo:function(){return t},hasRichBuffer:function(){return l}}}s.__dashjs_factory_name="RulesContext",n.default=a.default.getClassFactory(s),t.exports=n.default},{10:10}],128:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(e,t){return{value:void 0===e?-1:e,reason:void 0===t?null:t}}s.__dashjs_factory_name="SwitchRequest";var o=a.default.getClassFactory(s);o.NO_CHANGE=-1,n.default=o,t.exports=n.default},{10:10}],129:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){var s=[],o=[];return{push:function(e){s[e.oldValue]||(s[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=e.newValue-e.oldValue,n=t<0?1:0,i=n?-t:0,r=n?0:1;if(s[e.oldValue].drops+=n,s[e.oldValue].dropSize+=i,s[e.oldValue].noDrops+=r,o.push({idx:e.oldValue,noDrop:r,drop:n,dropSize:i}),8<o.length){var a=o.shift();s[a.idx].drops-=a.drop,s[a.idx].dropSize-=a.dropSize,s[a.idx].noDrops-=a.noDrop}},getSwitchRequests:function(){return s},reset:function(){s=[],o=[]}}}s.__dashjs_factory_name="SwitchRequestHistory";var o=a.default.getClassFactory(s);n.default=o,t.exports=n.default},{10:10}],130:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=i(e(137)),o=i(e(135)),l=i(e(131)),u=i(e(134)),c=i(e(136)),d=i(e(133)),h=i(e(132)),f=i(e(99)),p=i(e(100)),_=i(e(17)),r=i(e(10)),g=i(e(128)),m="qualitySwitchRules",v="abandonFragmentRules";function a(){var n=this.context,i=void 0,r=void 0;function e(e){return e.filter(function(e){return e.value>g.default.NO_CHANGE})}function a(e){if(0!==e.length)return e.reduce(function(e,t){return e.value<t.value?e:t})}return{initialize:function(){i=[],r=[];var e=(0,p.default)(n).getInstance(),t=(0,_.default)(n).getInstance();(0,f.default)(n).getInstance().getBufferOccupancyABREnabled()?(i.push((0,d.default)(n).create({metricsModel:e,dashMetrics:t})),r.push((0,h.default)(n).create({metricsModel:e,dashMetrics:t}))):(i.push((0,s.default)(n).create({metricsModel:e,dashMetrics:t})),i.push((0,o.default)(n).create({metricsModel:e})),i.push((0,c.default)(n).create()),i.push((0,u.default)(n).create()),r.push((0,l.default)(n).create()))},getRules:function(e){switch(e){case m:return i;case v:return r;default:return null}},getMaxQuality:function(t){return a(e(i.map(function(e){return e.getMaxIndex(t)})))||(0,g.default)(n).create()},shouldAbandonFragment:function(t){return a(e(r.map(function(e){return e.shouldAbandon(t)})))||(0,g.default)(n).create()}}}a.__dashjs_factory_name="ABRRulesCollection";var E=r.default.getSingletonFactory(a);E.QUALITY_SWITCH_RULES=m,E.ABANDON_FRAGMENT_RULES=v,n.default=E,t.exports=n.default},{10:10,100:100,128:128,131:131,132:132,133:133,134:134,135:135,136:136,137:137,17:17,99:99}],131:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var I=i(e(128)),r=i(e(99)),a=i(e(17)),s=i(e(100)),o=i(e(10)),l=i(e(8));function C(){var _=1.8,g=500,m=5,v=this.context,E=(0,l.default)(v).getInstance().log,y=void 0,T=void 0,A=void 0,S=void 0,R=void 0,b=void 0;function e(){y={},T={},A=[],S=(0,r.default)(v).getInstance(),R=(0,a.default)(v).getInstance(),b=(0,s.default)(v).getInstance()}var t={shouldAbandon:function(e){var t,n,i,r,a=e.getMediaInfo(),s=a.type,o=e.getCurrentRequest(),l=(0,I.default)(v).create(I.default.NO_CHANGE,{name:C.__dashjs_factory_name});if(!isNaN(o.index)){if(i=s,r=o.index,y[i]=y[i]||{},y[i][r]=y[i][r]||{},S.getStableBufferTime()<R.getCurrentBufferLevel(b.getReadOnlyMetricsFor(s)))return l;var u=y[s][o.index];if(null===u||null===o.firstByteDate||T.hasOwnProperty(u.id))return l;if(void 0===u.firstByteTime&&(A[s]=[],u.firstByteTime=o.firstByteDate.getTime(),u.segmentDuration=o.duration,u.bytesTotal=o.bytesTotal,u.id=o.index),u.bytesLoaded=o.bytesLoaded,u.elapsedTime=(new Date).getTime()-u.firstByteTime,0<u.bytesLoaded&&0<u.elapsedTime&&(t=s,n=Math.round(8*u.bytesLoaded/u.elapsedTime),A[t]=A[t]||[],A[t].push(n)),A[s].length>=m&&u.elapsedTime>g&&u.bytesLoaded<u.bytesTotal){var c=A[s].reduce(function(e,t){return e+t},0);if(u.measuredBandwidthInKbps=Math.round(c/A[s].length),u.estimatedTimeOfDownload=+(8*u.bytesTotal/u.measuredBandwidthInKbps/1e3).toFixed(2),u.estimatedTimeOfDownload<u.segmentDuration*_||0===e.getTrackInfo().quality)return l;if(!T.hasOwnProperty(u.id)){var d=e.getStreamProcessor().getABRController(),h=u.bytesTotal-u.bytesLoaded,f=d.getBitrateList(a),p=d.getQualityForBitrate(a,u.measuredBandwidthInKbps*S.getBandwidthSafetyFactor());u.bytesTotal*f[p].bitrate/f[d.getQualityFor(s,a.streamInfo)].bitrate<h&&(l.value=p,l.reason.throughput=u.measuredBandwidthInKbps,l.reason.fragmentID=u.id,T[u.id]=u,E("AbandonRequestsRule ( ",s,"frag id",u.id,") is asking to abandon and switch to quality to ",p," measured bandwidth was",u.measuredBandwidthInKbps),delete y[s][u.id])}}else u.bytesLoaded===u.bytesTotal&&delete y[s][u.id]}return l},reset:function(){e()}};return e(),t}C.__dashjs_factory_name="AbandonRequestsRule",n.default=o.default.getClassFactory(C),t.exports=n.default},{10:10,100:100,128:128,17:17,8:8,99:99}],132:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var K=i(e(128)),r=i(e(99)),a=i(e(10)),s=i(e(8)),G=i(e(133));function W(e){var t,U=500,V=200,B=this.context,j=(0,s.default)(B).getInstance().log,H=e.dashMetrics,Y=e.metricsModel,q=void 0;return t={shouldAbandon:function(e){var t=e.getMediaInfo().type,n=Y.getReadOnlyMetricsFor(t),i=e.getCurrentRequest(),r=(0,K.default)(B).create(K.default.NO_CHANGE,{name:W.__dashjs_factory_name});if(0===n.BolaState.length)return j("WARNING: executing BolaAbandonRule before initializing BolaRule"),q[t]=null,r;var a,s,o,l=n.BolaState[0]._s,u=i.index,c=i.quality;if(isNaN(u)||0===c||(a=u,s=c,(o=q[t])&&a===o.index&&!(s<o.quality))||!i.firstByteDate)return r;var d=Date.now()-i.firstByteDate.getTime(),h=i.bytesLoaded,f=i.bytesTotal,p=f-h,_=i.duration,g=H.getCurrentBufferLevel(n)?H.getCurrentBufferLevel(n):0,m=g+l.placeholderBuffer,v=8*h/(.001*d),E=l.bandwidthSafetyFactor*v,y=.001*(i.firstByteDate.getTime()-i.requestStartDate.getTime());y<.001*V&&(y=.001*V);var T=y+8*f/E,A="";G.default.BOLA_DEBUG&&(A="index="+u+" quality="+c+" bytesLoaded/bytesTotal="+h+"/"+f+" bufferLevel="+g+" timeSince1stByte="+(d/1e3).toFixed(3)+" estThroughput="+(E/1e6).toFixed(3)+" latency="+y.toFixed(3));var S=f*l.bitrates[0]/l.bitrates[c],R=p-y*E/8;if(R<1&&(R=1),d<U||p<=S||g>l.bufferTarget||R<=S||T<=_)return r;var b=m-y;b<0&&(b=0);for(var I=0;I+1<c&&f*l.bitrates[I+1]/l.bitrates[c]<R;)++I;var C=c;if(l.state===G.default.BOLA_STATE_STARTUP)for(var P=C=0;P<=I&&!(E<8*(S=f*l.bitrates[P]/l.bitrates[c])/_);++P)C=P;else{var w=(l.Vp*(l.utilities[c]+l.gp)-b)/R;for(P=0;P<=I;++P)S=f*l.bitrates[P]/l.bitrates[c],w<(k=(l.Vp*(l.utilities[P]+l.gp)-b)/S)&&(C=P,w=k)}var O=l.rebufferSafetyFactor*v*(g-y)/8;if(C===c&&O<R&&(C=I),C===c)return r;for(;0<C&&!((S=f*l.bitrates[C]/l.bitrates[c])<=O);)--C;var D,N,M=NaN;if(0<C){var L=l.utilities[C],x=l.utilities[C-1],k=l.bitrates[C],F=l.bitrates[C-1];M=l.Vp*((k*x-F*L)/(k-F)+l.gp)}else L=l.utilities[0],x=l.utilities[1],k=l.bitrates[0],F=l.bitrates[1],M=l.Vp*((k*x-F*L)/(k-F)+l.gp),M-=_;return M<m&&(l.placeholderBuffer=M-g,l.placeholderBuffer<0&&(l.placeholderBuffer=0)),l.lastQuality=C,Y.updateBolaState(t,l),G.default.BOLA_DEBUG&&j("BolaDebug "+t+" BolaAbandonRule abandon to "+C+" - "+A),D=u,N=c,q[t]={index:D,quality:N},r.value=C,r.reason.state=l.state,r.reason.throughput=v,r.reason.bufferLevel=g,r.reason.bytesLoaded=i.bytesLoaded,r.reason.bytesTotal=i.bytesTotal,r.reason.elapsedTimeMs=d,r},reset:function(){q={}}},q={},(0,r.default)(B).getInstance(),t}W.__dashjs_factory_name="BolaAbandonRule",n.default=a.default.getClassFactory(W),t.exports=n.default},{10:10,128:128,133:133,8:8,99:99}],133:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var k=i(e(128)),r=i(e(10)),u=i(e(99)),c=e(182),d=i(e(15)),h=i(e(9)),f=i(e(13)),p=i(e(8)),F=0,U=1,V=2,B=!1,j=10,H=30,Y=.5;function q(e){var T=2,A=3,S=this.context,R=(0,p.default)(S).getInstance().log,b=e.dashMetrics,I=e.metricsModel,t=(0,h.default)(S).getInstance(),n=void 0,C=void 0,i=void 0,P=void 0,w=void 0,O=void 0,D=void 0;function r(){C={},i={},P={},w=[],O=(0,u.default)(S).getInstance(),D=(0,d.default)(S).getInstance(),t.on(f.default.BUFFER_EMPTY,a,n),t.on(f.default.PLAYBACK_SEEKING,s,n),t.on(f.default.PERIOD_SWITCH_STARTED,o,n),t.on(f.default.MEDIA_FRAGMENT_LOADED,l,n)}function N(e,t,n,i){var r=NaN;if(i?(r=0,i.forEach(function(e,t){e>i[r]&&(r=t)})):(i=n.map(function(e){return Math.log(e)}),r=i.length-1),0===r)return null;var a=1-i[0]+(i[r]-i[0])/(t/e-1),s=e/(i[0]+a-1);return{utilities:i,gp:a,Vp:s}}function M(e,t){for(var n=b.getHttpRequests(e),i=[],r=n.length-1;0<=r&&i.length<t;--r){var a=n[r];a.type===c.HTTPRequest.MEDIA_SEGMENT_TYPE&&a._tfinish&&a.tresponse&&a.trace&&i.push(a)}return i}function L(e,t,n){var i=M(e,t);if(0===i.length)return 0;for(var r=0,a="",s=0;s<i.length;++s){var o=.001*(i[s]._tfinish.getTime()-i[s].trequest.getTime()),l=8*i[s].trace.reduce(function(e,t){return e+t.b[0]},0);B&&(a+=" "+(1e-6*l).toFixed(3)+"/"+o.toFixed(3)+"="+(1e-6*l/o).toFixed(3)+"Mbps"),r+=o/l}return B&&R("BolaDebug "+n+" BolaRule recent throughput = "+(i.length/(1e6*r)).toFixed(3)+"Mbps:"+a),i.length/r}function x(e,n){var i=0;return e.bitrates.some(function(e,t){return n<e||(i=t,!1)}),i}function a(){B&&R("BolaDebug BUFFER_EMPTY"),w.forEach(function(e){var t=I.getReadOnlyMetricsFor(e);if(0!==t.BolaState.length){var n=t.BolaState[0]._s;n.state===V&&(n.placeholderBuffer=0,I.updateBolaState(e,n))}})}function s(e){B&&R("BolaDebug PLAYBACK_SEEKING "+e.seekTime.toFixed(3)),w.forEach(function(e){var t=I.getReadOnlyMetricsFor(e);if(0!==t.BolaState.length){var n=t.BolaState[0]._s;n.state!==F&&(n.state=U),I.updateBolaState(e,n)}}),i={},P={}}function o(){}function l(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=e.chunk.mediaInfo.type,n=e.chunk.start;void 0===t||isNaN(n)||(n<=i[t]?P[t]=!0:(P[t]=!1,i[t]=n))}}return n={getMaxIndex:function(e){var t=e.getStreamProcessor();t.getScheduleController().setTimeToLoadDelay(0);var n=(0,k.default)(S).create(k.default.NO_CHANGE,{name:q.__dashjs_factory_name}),i=e.getMediaInfo().type,r=I.getReadOnlyMetricsFor(i);if(0===r.BolaState.length){B&&R("BolaDebug "+i+"\nBolaDebug "+i+" BolaRule for state=- fragmentStart="+D.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var a=function(e){var t={},n=e.getMediaInfo(),i=e.getStreamProcessor(),r=e.getStreamInfo(),a=e.getTrackInfo(),s=i.isDynamic(),o=r.manifestInfo.duration,l=a.fragmentDuration,u=n.bitrateList.map(function(e){return e.bandwidth}),c=N(j,H,u,null);if(null===c)return t.state=F,t;if(t.state=U,t.bitrates=u,t.utilities=c.utilities,t.Vp=c.Vp,t.gp=c.gp,t.isDynamic=s,t.movieDuration=o,t.fragmentDuration=l,t.bandwidthSafetyFactor=O.getBandwidthSafetyFactor(),t.rebufferSafetyFactor=Y,t.bufferTarget=O.getStableBufferTime(),t.lastQuality=0,t.placeholderBuffer=0,t.throughputCount=s?T:A,B){for(var d="",h=0;h<u.length;++h){var f=c.utilities[h],p=u[h],_=0;if(0<h){var g=c.utilities[h-1],m=u[h-1];_=c.Vp*((g*p-f*m)/(p-m)+c.gp)}var v=c.Vp*(f+c.gp);d+="\n"+h+":"+(1e-6*u[h]).toFixed(3)+"Mbps "+_.toFixed(3)+"/"+v.toFixed(3)}R("BolaDebug "+n.type+" bitrates"+d)}return t}(e);I.updateBolaState(i,a);var s=0;if(a.state!==F){w.push(i);var o=L(r,a.throughputCount,i);if(0===o)return B&&R("BolaDebug "+i+" BolaRule quality unchanged for INITIALIZE"),n;s=x(a,o*a.bandwidthSafetyFactor),a.lastQuality=s,n.value=s,n.reason.state=a.state,n.reason.throughput=o}return B&&R("BolaDebug "+i+" BolaRule quality "+s+" for INITIALIZE"),n}var l=r.BolaState[0]._s;if(l.state===F)return B&&R("BolaDebug "+i+" BolaRule quality 0 for ONE_BITRATE"),n;var u=l.bitrates,c=l.utilities;B&&R("BolaDebug "+i+"\nBolaDebug "+i+" EXECUTE BolaRule for state="+l.state+" fragmentStart="+D.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var d=b.getCurrentBufferLevel(r)?b.getCurrentBufferLevel(r):0,h=L(r,l.throughputCount,i);d<=.1&&(l.placeholderBuffer=0);var f=function(e,t){var n=Date.now(),i=C[t],r=P[t],a=NaN;if(C[t]=n,P[t]=!1,!r){var s=M(e,1);0<s.length&&n<(a=s[0]._tfinish.getTime())&&(a=n)}var o=0;return o=r||a<i?n-i:n-a,isNaN(o)||o<=0?0:.001*o}(r,i);0<f&&(l.placeholderBuffer+=f),l.placeholderBuffer<0&&(l.placeholderBuffer=0);var p=d+l.placeholderBuffer,_=function(e,t){for(var n=e.bitrates.length,i=NaN,r=NaN,a=0;a<n;++a){var s=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(r)||r<=s)&&(r=s,i=a)}return i}(l,p);if(B&&R("BolaDebug "+i+" BolaRule bufferLevel="+d.toFixed(3)+"(+"+l.placeholderBuffer.toFixed(3)+"="+p.toFixed(3)+") recentThroughput="+(1e-6*h).toFixed(3)+" tentativeQuality="+_),l.state===U){var s=x(l,h*l.bandwidthSafetyFactor);if(d>l.fragmentDuration/Y){l.state=V;for(var g=0,m=0;m<s;++m){var v=l.Vp*(l.gp+(u[s]*c[m]-u[m]*c[s])/(u[s]-u[m]));g<v&&(g=v)}d<g&&(l.placeholderBuffer=g-d)}return B&&R("BolaDebug "+i+" BolaRule quality "+s+" for STARTUP"),l.lastQuality=s,I.updateBolaState(i,l),n.value=s,n.reason.state=U,n.reason.throughput=h,n}if(_>l.lastQuality&&(s=x(l,h))<_&&(s<l.lastQuality&&(s=l.lastQuality),_=s),0<h)for(var E=Y*h*d/l.fragmentDuration;0<_&&u[_]>E;)--_;var y=0;return 0<(y=p-l.Vp*(c[_]+l.gp))&&(y>l.placeholderBuffer?(y-=l.placeholderBuffer,l.placeholderBuffer=0):(l.placeholderBuffer-=y,y=0)),0<y?_===u.length-1?y=0:t.getScheduleController().setTimeToLoadDelay(1e3*y):y=0,l.lastQuality=_,I.updateBolaState(i,l),n.value=_,n.reason.state=l.state,n.reason.throughput=h,n.reason.bufferLevel=d,B&&R("BolaDebug "+i+" BolaRule quality "+_+" delay="+y.toFixed(3)+" for STEADY"),n},reset:function(){t.off(f.default.BUFFER_EMPTY,a,n),t.off(f.default.PLAYBACK_SEEKING,s,n),t.off(f.default.PERIOD_SWITCH_STARTED,o,n),t.off(f.default.MEDIA_FRAGMENT_LOADED,l,n),r()}},r(),n}q.__dashjs_factory_name="BolaRule";var a=r.default.getClassFactory(q);a.BOLA_STATE_ONE_BITRATE=F,a.BOLA_STATE_STARTUP=U,a.BOLA_STATE_STEADY=V,a.BOLA_DEBUG=B,n.default=a,t.exports=n.default},{10:10,128:128,13:13,15:15,182:182,8:8,9:9,99:99}],134:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),d=i(e(128)),a=i(e(8));function s(){var o=this.context,l=(0,a.default)(o).getInstance().log,u=.15,c=375;return{getMaxIndex:function(e){var t=e.getDroppedFramesHistory();if(t){for(var n=t.getFrameHistory(),i=0,r=0,a=d.default.NO_CHANGE,s=1;s<n.length;s++)if(n[s]&&(i=n[s].droppedVideoFrames,r=n[s].totalVideoFrames,c<r&&u<i/r)){l("DroppedFramesRule, index: "+(a=s-1)+" Dropped Frames: "+i+" Total Frames: "+r);break}return(0,d.default)(o).create(a,{droppedFrames:i})}return(0,d.default)(o).create()}}}s.__dashjs_factory_name="DroppedFramesRule";var o=r.default.getClassFactory(s);n.default=o,t.exports=n.default},{10:10,128:128,8:8}],135:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=i(e(62)),r=i(e(9)),a=i(e(13)),s=i(e(10)),o=i(e(8)),_=i(e(128));function l(e){var l=this.context,u=(0,o.default)(l).getInstance().log,t=(0,r.default)(l).getInstance(),c=e.metricsModel,n=void 0,d=void 0,h=void 0,f=void 0;function i(){d={}}return n={getMaxIndex:function(e){var t,n,i=(new Date).getTime(),r=e.getMediaInfo().type,a=c.getReadOnlyMetricsFor(r),s=0<a.BufferState.length?a.BufferState[a.BufferState.length-1]:null,o=(0,_.default)(l).create();return i-h<f||null===s||(t=r,n=s.state,d[t]=d[t]||{},(d[t].state=n)!==p.default.BUFFER_LOADED||d[t].firstBufferLoadedEvent||(d[t].firstBufferLoadedEvent=!0),s.state===p.default.BUFFER_EMPTY&&void 0!==d[r].firstBufferLoadedEvent&&(u("Switch to index 0; buffer is empty."),o.value=0,o.reason="InsufficientBufferRule: Buffer is empty"),h=i),o},reset:function(){t.off(a.default.PLAYBACK_SEEKING,i,n),d={},h=0}},d={},h=0,f=1e3,t.on(a.default.PLAYBACK_SEEKING,i,n),n}l.__dashjs_factory_name="InsufficientBufferRule",n.default=s.default.getClassFactory(l),t.exports=n.default},{10:10,128:128,13:13,62:62,8:8,9:9}],136:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),a=i(e(8)),d=i(e(128));function s(){var o=this.context,l=(0,a.default)(o).getInstance().log,u=.075,c=6;return{getMaxIndex:function(e){for(var t=e.getSwitchHistory().getSwitchRequests(),n=0,i=0,r=0,a=(0,d.default)(o).create(),s=0;s<t.length;s++)if(void 0!==t[s]&&(n+=t[s].drops,i+=t[s].noDrops,r+=t[s].dropSize,c<=n+i&&u<n/i)){a.value=0<s?s-1:0,a.reason={index:a.value,drops:n,noDrops:i,dropSize:r},l("Switch history rule index: "+a.value+" samples: "+(n+i)+" drops: "+n);break}return a}}}s.__dashjs_factory_name="SwitchRequest";var o=r.default.getClassFactory(s);n.default=o,t.exports=n.default},{10:10,128:128,8:8}],137:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var M=i(e(62)),L=i(e(59)),r=i(e(99)),x=e(182),a=i(e(10)),s=i(e(8)),k=i(e(128));function o(e){var l=20,u=3,c=4,T=c,A=50,S=5,R=50,d=1.3,h=1.3,b=this.context,I=(0,s.default)(b).getInstance().log,C=e.dashMetrics,P=e.metricsModel,w=void 0,O=void 0,f=void 0;function t(){w=[],O=[],f=(0,r.default)(b).getInstance()}function D(e){var t=void 0;return O[e]&&0<O[e].length&&(t=O[e].reduce(function(e,t){return e+t})/O[e].length),t}function N(e,t){var n,i,r,a,s=(n=e,i=t,r=Math.min(w[n].length,i?u:c),1<(a=w[n].slice(-1*r,w[n].length)).length&&a.reduce(function(e,t){return(e*h<=t||t*d<=e)&&r++,t}),r=Math.min(w[n].length,r),w[n].slice(-1*r,w[n].length)),o=0;0<s.length&&(o=s.reduce(function(e,t){return e+t},0)/s.length);return w[e].length>=l&&w[e].shift(),o/1e3*f.getBandwidthSafetyFactor()}var n={getMaxIndex:function(e){var t=e.getMediaInfo(),n=t.type,i=P.getReadOnlyMetricsFor(n),r=e.getStreamProcessor(),a=r.getABRController(),s=r.isDynamic(),o=C.getCurrentHttpRequest(i),l=0<i.BufferState.length?i.BufferState[i.BufferState.length-1]:null,u=e.hasRichBuffer(),c=(0,k.default)(b).create();if(!i||!o||o.type!==x.HTTPRequest.MEDIA_SEGMENT_TYPE||!l||u)return c;var d,h,f=void 0,p=void 0;if(o.trace&&o.trace.length){p=o.tresponse.getTime()-o.trequest.getTime()||1,f=o._tfinish.getTime()-o.tresponse.getTime()||1;var _=o.trace.reduce(function(e,t){return e+t.b[0]},0),g=Math.round(8*_/(f/1e3)),m=void 0,v=void 0;v=function(e,t,n){var i=!1;if(e<R&&(i=!0),!i)switch(n){case"video":i=t<A;break;case"audio":i=t<S}return i}(p,f,n)?w[n]&&O[n]?(m=N(n,s),D(n)):(m=g/1e3,p):(h=g,w[d=n]=w[d]||[],w[d].push(h),m=N(n,s),y=p,O[E=n]||(O[E]=[]),O[E].push(y),O[E].length>T&&O[E].shift(),D(n)),a.setAverageThroughput(n,m),a.getAbandonmentStateFor(n)!==L.default.ABANDON_LOAD&&(l.state===M.default.BUFFER_LOADED||s)&&(c.value=a.getQualityForBitrate(t,m,v),r.getScheduleController().setTimeToLoadDelay(0),I("ThroughputRule requesting switch to index: ",c.value,"type: ",n,"Average throughput",Math.round(m),"kbps"),c.reason={throughput:m,latency:v})}var E,y;return c},reset:function(){t()}};return t(),n}o.__dashjs_factory_name="ThroughputRule",n.default=a.default.getClassFactory(o),t.exports=n.default},{10:10,128:128,182:182,59:59,62:62,8:8,99:99}],138:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(99)),a=i(e(10));function s(e){var t=this.context,o=e.dashMetrics,l=e.metricsModel,u=e.textController,c=void 0;function i(e,t,n){var i=NaN,r=e.getCurrentRepresentationInfo();if("fragmentedText"===t)i=u.getAllTracksAreDisabled()?0:r.fragmentDuration;else if("audio"===t&&n){var a=o.getCurrentBufferLevel(l.getReadOnlyMetricsFor("video"));i=Math.floor(Math.max(a,r.fragmentDuration))}else{var s=r.mediaInfo.streamInfo;if(e.getABRController().isPlayingAtTopQuality(s))i=s.manifestInfo.duration>=c.getLongFormContentDurationThreshold()?c.getBufferTimeAtTopQualityLongForm():c.getBufferTimeAtTopQuality();else i=c.getStableBufferTime()}return i}var n={execute:function(e,t,n){return o.getCurrentBufferLevel(l.getReadOnlyMetricsFor(t))<i(e,t,n)},getBufferTarget:i};return c=(0,r.default)(t).getInstance(),n}s.__dashjs_factory_name="BufferLevelRule",n.default=a.default.getClassFactory(s),t.exports=n.default},{10:10,99:99}],139:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(8)),a=i(e(10));function s(e){var t=this.context,d=(0,r.default)(t).getInstance().log,h=e.adapter,f=e.sourceBufferController,p=e.textController;return{execute:function(e,t){var n=e.getCurrentRepresentationInfo(),i=n.mediaInfo.type,r=e.getScheduleController(),a=r.getSeekTarget(),s=!isNaN(a),o=e.getBuffer(),l=s?a:h.getIndexHandlerTime(e);if(isNaN(l)||"fragmentedText"===i&&p.getAllTracksAreDisabled())return null;if(s&&r.setSeekTarget(NaN),o){var u=f.getBufferRange(e.getBuffer(),l);null!==u&&(d("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end.",l," was changed to ",u.end),l=u.end)}var c=void 0;return t?(l=t.startTime+t.duration/2,c=h.getFragmentRequestForTime(e,n,l,{timeThreshold:0,ignoreIsFinished:!0})):((c=h.getFragmentRequestForTime(e,n,l,{keepIdx:!s}))&&e.getFragmentModel().isFragmentLoaded(c)&&(c=h.getNextFragmentRequest(e,n)),c&&(h.setIndexHandlerTime(e,c.startTime+c.duration),c.delayLoadingTime=(new Date).getTime()+r.getTimeToLoadDelay(),r.setTimeToLoadDelay(0))),c}}}s.__dashjs_factory_name="NextFragmentRequestRule",n.default=a.default.getClassFactory(s),t.exports=n.default},{10:10,8:8}],140:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){var V=0;function B(e){for(var t="",n=0;n<e.length;++n){t+=e[n].uchar}return t.length-t.replace(/^\s+/,"").length}function i(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function j(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?i(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?i(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}return{createHTMLCaptionsFromScreen:function(e,t,n,i){var r=null,a=!1,s=-1,o={start:t,end:n,spans:[]},l="style_cea608_white_black",u={},c={},d=[],h=void 0,f=void 0;for(h=0;h<15;++h){var p=i.rows[h],_="",g=null;if(!1===p.isEmpty()){var m=B(p.chars);null===r&&(r={x:m,y1:h,y2:h+1,p:[]}),m!==s&&a&&(r.p.push(o),o={start:t,end:n,spans:[]},r.y2=h,r.name="region_"+r.x+"_"+r.y1+"_"+r.y2,!1===u.hasOwnProperty(r.name)?(d.push(r),u[r.name]=r):u[r.name].p.contat(r.p),r={x:m,y1:h,y2:h+1,p:[]});for(var v=0;v<p.chars.length;++v){var E=p.chars[v],y=E.penState;if(null===g||!y.equals(g)){0<_.trim().length&&(o.spans.push({name:l,line:_,row:h}),_="");var T="style_cea608_"+y.foreground+"_"+y.background;y.underline&&(T+="_underline"),y.italics&&(T+="_italics"),c.hasOwnProperty(T)||(c[T]=JSON.parse(JSON.stringify(y))),g=y,l=T}_+=E.uchar}0<_.trim().length&&o.spans.push({name:l,line:_,row:h}),a=!0,s=m}else a=!1,s=-1,r&&(r.p.push(o),o={start:t,end:n,spans:[]},r.y2=h,r.name="region_"+r.x+"_"+r.y1+"_"+r.y2,!1===u.hasOwnProperty(r.name)?(d.push(r),u[r.name]=r):u[r.name].p.contat(r.p),r=null)}r&&(r.p.push(o),r.y2=h+1,r.name="region_"+r.x+"_"+r.y1+"_"+r.y2,!1===u.hasOwnProperty(r.name)?(d.push(r),u[r.name]=r):u[r.name].p.contat(r.p),r=null);var A,S=[];for(h=0;h<d.length;++h){var R=d[h],b="sub_cea608_"+V++,I=document.createElement("div");I.id=b;var C="left: "+3.125*(A=R).x+"%; top: "+6.66*A.y1+"%; width: "+(100-3.125*A.x)+"%; height: "+6.66*Math.max(A.y2-1-A.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;";I.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+C;var P=document.createElement("div");P.className="paragraph bodyStyle",P.style.cssText=j(e);var w=document.createElement("div");w.className="cueUniWrapper",w.style.cssText="unicode-bidi: normal; direction: ltr;";for(var O=0;O<R.p.length;++O){var D=R.p[O],N=0;for(f=0;f<D.spans.length;++f){var M=D.spans[f];if(0<M.line.length){if(0!==f&&N!=M.row){var L=document.createElement("br");L.className="lineBreak",w.appendChild(L)}var x=!1;N===M.row&&(x=!0),N=M.row;var k=c[M.name],F=document.createElement("span");F.className="spanPadding "+M.name+" customSpanColor",F.style.cssText=j(e,k),0!==f&&x?f===D.spans.length-1?F.textContent=M.line.replace(/\s+$/g,""):F.textContent=M.line:0===f&&1<D.spans.length&&M.row===D.spans[1].row?F.textContent=M.line.replace(/^\s+/g,""):F.textContent=M.line.trim(),w.appendChild(F)}}}P.appendChild(w),I.appendChild(P);var U={bodyStyle:["%",90]};for(f in c)c.hasOwnProperty(f)&&(U[f]=["%",90]);S.push({type:"html",start:t,end:n,cueHTMLElement:I,cueID:b,cellResolution:[32,15],isFromCEA608:!0,regions:d,regionID:R.name,videoHeight:e.videoHeight,videoWidth:e.videoWidth,fontSize:U,lineHeight:{},linePadding:{}})}return S}}}s.__dashjs_factory_name="EmbeddedTextHtmlRender",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],141:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var g=i(e(9)),m=i(e(13)),r=i(e(10)),v=i(e(153));function a(e){var i=this.context,r=(0,g.default)(i).getInstance(),a=e.sourceBufferController,t=e.errHandler,s=void 0,n=void 0,o=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0;function f(e){l=e}function p(e){e.sender.getStreamProcessor()===d&&r.trigger(m.default.TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}function _(e){e.fragmentModel===d.getFragmentModel()&&e.chunk.bytes&&a.append(u,e.chunk)}return s={initialize:function(e,t,n){c=e,f(t),(d=n).getRepresentationController(),h=(0,v.default)(i).getInstance()},createBuffer:function(e){try{u=a.createSourceBuffer(l,e),o||(u.hasOwnProperty("initialize")&&u.initialize(c,this),o=!0)}catch(e){t.mediaSourceError("Error creating "+c+" source buffer.")}return u},getType:function(){return c},getStreamProcessor:function(){return d},setStreamProcessor:function(e){d=e},getBuffer:function(){return u},setBuffer:function(e){u=e},getBufferLevel:function(){return 0},getCriticalBufferLevel:function(){return 0},setMediaSource:f,getMediaSource:function(){return l},getIsBufferingCompleted:function(){return n},switchInitData:function(e,t){var n=h.extract(e,c,t);n?a.append(n):r.trigger(m.default.INIT_REQUESTED,{sender:s})},reset:function(e){r.off(m.default.DATA_UPDATE_COMPLETED,p,this),r.off(m.default.INIT_FRAGMENT_LOADED,_,this),e||(a.abort(l,u),a.removeSourceBuffer(l,u))}},function(){d=c=u=l=null,n=o=!1,r.on(m.default.DATA_UPDATE_COMPLETED,p,this),r.on(m.default.INIT_FRAGMENT_LOADED,_,this)}(),s}a.__dashjs_factory_name="NotFragmentedTextBufferController",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,13:13,153:153,9:9}],142:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),a=i(e(62)),s=i(e(141));function o(e){var t,n,i=this.context,r=void 0;return t={initialize:function(e,t,n){return r.initialize(e,t,n)},createBuffer:function(e){return r.createBuffer(e)},getType:function(){return r.getType()},getStreamProcessor:function(){r.getStreamProcessor()},setStreamProcessor:function(e){r.setStreamProcessor(e)},getBuffer:function(){return r.getBuffer()},setBuffer:function(e){r.setBuffer(e)},getBufferLevel:function(){return r.getBufferLevel()},getCriticalBufferLevel:function(){return r.getCriticalBufferLevel()},setMediaSource:function(e){r.setMediaSource(e)},getMediaSource:function(){return r.getMediaSource()},getIsBufferingCompleted:function(){return r.getIsBufferingCompleted()},switchInitData:function(e,t){r.switchInitData(e,t)},reset:function(e){r.reset(e)}},r="fragmentedText"===(n=e).type?(0,a.default)(i).create({metricsModel:n.metricsModel,manifestModel:n.manifestModel,sourceBufferController:n.sourceBufferController,errHandler:n.errHandler,streamController:n.streamController,mediaController:n.mediaController,adapter:n.adapter,textController:n.textController}):(0,s.default)(i).create({errHandler:n.errHandler,sourceBufferController:n.sourceBufferController}),t}o.__dashjs_factory_name="TextBufferController",n.default=r.default.getClassFactory(o),n.default=r.default.getClassFactory(o),t.exports=n.default},{10:10,141:141,62:62}],143:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),o=i(e(144)),l=i(e(145)),u=i(e(160)),c=i(e(158));function a(){var e,t=this.context,p=void 0,n=void 0,i=void 0,r=void 0,_=void 0,g=void 0,m=void 0,v=void 0,a=void 0,s=void 0;return e={setConfig:function(e){e&&(e.errHandler&&(i=e.errHandler),e.dashManifestModel&&(r=e.dashManifestModel),e.mediaController&&(_=e.mediaController),e.videoModel&&(g=e.videoModel),e.streamController&&(m=e.streamController),e.textTracks&&(v=e.textTracks),e.vttParser&&(a=e.vttParser),e.ttmlParser&&(s=e.ttmlParser),p.setConfig({errHandler:i,dashManifestModel:r,mediaController:_,videoModel:g,streamController:m,textTracks:v,vttParser:a,ttmlParser:s}))},getTextSourceBuffer:function(){return p},getAllTracksAreDisabled:function(){return n},addEmbeddedTrack:function(e){p.addEmbeddedTrack(e)},setTextTrack:function(){for(var e=p.getConfig(),t=e.fragmentModel,n=e.embeddedTracks,i=e.isFragmented,r=e.fragmentedTracks,a=e.allTracksAreDisabled,s=g.getElement().textTracks,o=s.length,l=o-n.length,u=v.getCurrentTrackIdx(),c=0;c<o;c++){var d=s[c];if(a="showing"!==d.mode,"showing"===d.mode){if(u!==c&&(v.setCurrentTrackIdx(c),v.addCaptions(c,0,null),i&&c<l)){var h=_.getCurrentTrackFor("fragmentedText",m.getActiveStreamInfo()),f=r[c];f!==h&&(t.abortRequests(),v.deleteTrackCues(h),_.setTrack(f),p.setCurrentFragmentedTrackIdx(c))}break}}a&&v.setCurrentTrackIdx(-1)},getCurrentTrackIdx:function(){return p.getConfig().textTracks.getCurrentTrackIdx()},reset:function(){n=!1,p.resetEmbedded()}},v=(0,l.default)(t).getInstance(),a=(0,u.default)(t).getInstance(),s=(0,c.default)(t).getInstance(),p=(0,o.default)(t).getInstance(),v.initialize(),n=!1,e}a.__dashjs_factory_name="TextController",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,144:144,145:145,158:158,160:160}],144:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var re=i(e(174)),f=i(e(33)),p=i(e(147)),_=i(e(149)),r=i(e(10)),g=i(e(8)),m=i(e(102)),v=i(e(145)),E=i(e(140)),ae=i(e(6)),se=i(e(2)),y=i(e(9)),T=i(e(13));function a(){var a=this.context,U=(0,g.default)(a).getInstance().log,e=(0,y.default)(a).getInstance(),s=!1,V=void 0,B=void 0,o=void 0,l=void 0,j=void 0,n=void 0,i=void 0,H=void 0,Y=void 0,q=void 0,K=void 0,u=void 0,G=void 0,W=void 0,c=void 0,z=void 0,d=void 0,X=void 0,Q=void 0,J=void 0,Z=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0;function t(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&r(t.bytes,t)}function h(){J=[],Y=[],z=(0,m.default)(a).getInstance(),(q=(0,v.default)(a).getInstance()).setConfig({videoModel:z}),q.initialize(),V=(0,p.default)(a).getInstance(),(H=(0,f.default)(a).getInstance()).setConfig({boxParser:V}),K=!1,te=[],ee=[],s=!($=Q=null),ne=(Z=0,E.default)(a).getInstance(),e.on(T.default.VIDEO_CHUNK_RECEIVED,t,this)}function r(e,t){var n,i,r,a,s,o,l=t.mediaInfo,u=l.type,c=l.mimeType,d=l.codec||c;if(d){if("fragmentedText"===u)if(G)if(i=H.getSamplesInfo(e).sampleList,!X&&0<i.length&&(X=i[0].cts-t.start*W),0<=d.search("stpp"))for(j=null!==j?j:ie(d),r=0;r<i.length;r++){var h=i[r],f=h.cts,p=f-X;this.buffered.add(p/W,(p+h.duration)/W);var _=new DataView(e,h.offset,h.subSizes[0]);o=ae.default.Utils.dataViewToString(_,"utf-8");var g=[],m=h.offset+h.subSizes[0];for(a=1;a<h.subSizes.length;a++){var v=new Uint8Array(e,m,h.subSizes[a]),E=String.fromCharCode.apply(null,v);g.push(E),m+=h.subSizes[a]}try{n=j.parse(o,f/W,(f+h.duration)/W,g),q.addCaptions(Q,X/W,n)}catch(e){U("TTML parser error: "+e.message)}}else{var y=[];for(r=0;r<i.length;r++){var T=i[r];T.cts-=X,this.buffered.add(T.cts/W,(T.cts+T.duration)/W);var A=e.slice(T.offset,T.offset+T.size),S=ae.default.parseBuffer(A);for(a=0;a<S.boxes.length;a++){var R=S.boxes[a];if(U("VTT box1: "+R.type),"vtte"!==R.type&&"vttc"===R.type)for(U("VTT vttc boxes.length = "+R.boxes.length),s=0;s<R.boxes.length;s++){var b=R.boxes[s];if(U("VTT box2: "+b.type),"payl"===b.type){var I=b.cue_text;U("VTT cue_text = "+I);var C=T.cts/W,P=(T.cts+T.duration)/W;y.push({start:C,end:P,data:I,styles:{}}),U("VTT "+C+"-"+P+" : "+I)}}}}0<y.length&&q.addCaptions(Q,0,y)}else{for(G=!0,r=0;r<Y.length;r++)F(null,Y[r]);W=H.getMediaTimescaleFromMoov(e)}else if("text"===u){_=new DataView(e,0,e.byteLength);o=ae.default.Utils.dataViewToString(_,"utf-8");try{F(n=ie(d).parse(o),l)}catch(e){B.timedTextError(e,"parse",o)}}else if("video"===u)if("InitializationSegment"===t.segmentType){if(0===Z)for(Z=H.getMediaTimescaleFromMoov(e),r=0;r<J.length;r++)F(null,J[r])}else{if(0===Z)return void U("CEA-608: No timescale for embeddedTextTrack yet");var w=function(e,r){return function(e,t,n){var i=null;i=z.getTTMLRenderingDiv()?ne.createHTMLCaptionsFromScreen(z.getElement(),e,t,n):[{start:e,end:t,data:n.getDisplayText(),styles:{}}],i&&q.addCaptions(r,0,i)}},O=H.getSamplesInfo(e).sequenceNumber;if(!te[0]&&!te[1]){var D=void 0,N=void 0;for(r=0;r<J.length;r++){if("CC1"===J[r].id?(0,N=q.getTrackIdxForId("CC1")):"CC3"===J[r].id&&(1,N=q.getTrackIdxForId("CC3")),-1===N)return void U("CEA-608: data before track is ready.");D=w(0,N),te[r]=new se.default.Cea608Parser(r,{newCue:D},null)}}if(Z&&-1==ee.indexOf(O)){if(null!==$&&O!==$+1)for(r=0;r<te.length;r++)te[r]&&te[r].reset();for(var M=function(e){var t=V.parse(e),n=t.getBox("moof"),i=t.getBox("tfdt"),r=t.getBox("tfhd"),a=t.getBoxes("trun"),s=null;if(0===a.length)return null;s=a[0],1<a.length&&U("Warning: Too many truns");for(var o=n.offset+s.data_offset,l=s.sample_count,u=o,c=i.baseMediaDecodeTime,d=new DataView(e),h={startTime:null,endTime:null,fields:[[],[]]},f=0,p=0;p<l;p++){var _=s.samples[p];void 0===_.sample_duration&&(_.sample_duration=r.default_sample_duration),void 0===_.sample_size&&(_.sample_size=r.default_sample_size),void 0===_.sample_composition_time_offset&&(_.sample_composition_time_offset=0);for(var g=c+f+_.sample_composition_time_offset,m=se.default.findCea608Nalus(d,u,_.sample_size),v=0;v<m.length;v++)for(var E=se.default.extractCea608DataFromRange(d,m[v]),y=0;y<2;y++)0<E[y].length&&h.fields[y].push([g,E[y]]);f+=_.sample_duration,u+=_.sample_size}h.fields[0].sort(function(e,t){return e[0]-t[0]}),h.fields[1].sort(function(e,t){return e[0]-t[0]});var T=c+f;return h.startTime=c,h.endTime=T,h}(e),L=0;L<te.length;L++){var x=M.fields[L],k=te[L];if(k){for(r=0;r<x.length;r++)k.addData(x[r][0]/Z,x[r][1]);M.endTime&&k.cueSplitAtTime(M.endTime/Z)}}$=O,ee.push(O)}}}else U("No text type defined");function F(e,t){var n,i,r=new re.default,a={subtitle:"subtitles",caption:"captions"};r.captionData=e,r.lang=t.lang,r.label=t.id,r.index=t.index,r.isTTML=(n=!1,t.codec&&0<=t.codec.search("stpp")&&(n=!0),t.mimeType&&0<=t.mimeType.search("ttml")&&(n=!0),n),r.video=z.getElement(),r.defaultTrack=function(e){var t=!1;1<J.length&&e.isEmbedded?t=e.id&&"CC1"===e.id:1===J.length?e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===J.length&&(t=e.index===Y[0].index);return t}(t),r.isFragmented=K,r.isEmbedded=!!t.isEmbedded,r.kind=i=(i=0<t.roles.length?a[t.roles[0]]:a.caption)===a.caption||i===a.subtitle?i:a.caption,r.roles=t.roles;var s=(Y?Y.length:0)+J.length;q.addTextTrack(r,s)}}function ie(e){var t;return 0<=e.search("vtt")?t=n:(0<=e.search("ttml")||0<=e.search("stpp"))&&(t=i).setConfig({videoModel:z}),t}return{initialize:function(e,t){G=!1,W=NaN,c=[],X=u=j=null,s||h();var n=t.getStreamProcessor();if(Y=n.getMediaInfoArr(),q.setConfig({videoModel:z}),q.initialize(),K=!o.getIsTextTrack(e),V=(0,p.default)(a).getInstance(),(H=(0,f.default)(a).getInstance()).setConfig({boxParser:V}),K){u=n.getFragmentModel(),this.buffered=(0,_.default)(a).create(),c=l.getTracksFor("fragmentedText",d.getActiveStreamInfo());for(var i=l.getCurrentTrackFor("fragmentedText",d.getActiveStreamInfo()),r=0;r<c.length;r++)if(c[r]===i){Q=r;break}}},append:r,abort:function(){q.deleteAllTextTracks(),G=K=!1,W=NaN,c=[],s=!1,J=d=z=u=q=Y=H=j=null},addEmbeddedTrack:function(e){s||h(),"CC1"===e.id||"CC3"===e.id?J.push(e):U("Warning: Embedded track "+e.id+" not supported!")},resetEmbedded:function(){e.off(T.default.VIDEO_CHUNK_RECEIVED,t,this),null!==q&&q.deleteAllTextTracks(),s=!1,J=[],te=[null,null],ee=[],$=null},setConfig:function(e){e&&(e.errHandler&&(B=e.errHandler),e.dashManifestModel&&(o=e.dashManifestModel),e.mediaController&&(l=e.mediaController),e.videoModel&&(z=e.videoModel),e.streamController&&(d=e.streamController),e.textTracks&&(q=e.textTracks),e.vttParser&&(n=e.vttParser),e.ttmlParser&&(i=e.ttmlParser))},getConfig:function(){return{errHandler:B,dashManifestModel:o,mediaController:l,videoModel:z,fragmentModel:u,streamController:d,textTracks:q,isFragmented:K,embeddedTracks:J,fragmentedTracks:c}},setCurrentFragmentedTrackIdx:function(e){Q=e}}}a.__dashjs_factory_name="TextSourceBuffer",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,102:102,13:13,140:140,145:145,147:147,149:149,174:174,2:2,33:33,6:6,8:8,9:9}],145:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=i(e(9)),D=i(e(13)),r=i(e(10)),N=i(e(8));function a(){var e=this.context,o=(0,s.default)(e).getInstance(),l=(0,N.default)(e).getInstance().log,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,_=void 0,g=void 0,m=void 0,v=void 0,E=void 0,y=void 0,T=void 0,A=void 0,S=void 0,R=void 0;function b(e){var t=h[e].kind,n=void 0!==h[e].label?h[e].label:h[e].lang,i=h[e].lang,r=T?document.createElement("track"):d.addTextTrack(t,n,i);return T&&(r.kind=t,r.label=n,r.srclang=i),r}function I(){var e=this.getCurrentTextTrack();if(e&&"html"===e.renderingType){var t=d.clientWidth/d.clientHeight,n=!1;e.isFromCEA608&&(t=3.5/3,n=!0);var i=function(e,t,n,i,r,a){var s=0,o=0;n/i<e/t?s=(o=t)/i*n:o=(s=e)/n*i;var l=0,u=0,c=0,d=0;return u=r<s/o?(l=(e-(c=(d=o)/(1/r)))/2,0):(l=0,(t-(d=(c=s)/r))/2),a?{x:l+.1*c,y:u+.1*d,w:.8*c,h:.8*d}:{x:l,y:u,w:c,h:d}}.call(this,d.clientWidth,d.clientHeight,d.videoWidth,d.videoHeight,t,n),r=i.w,a=i.h;if(r!=m||a!=v){_=i.x,g=i.y,m=r,v=a,E.style.left=_+"px",E.style.top=g+"px",E.style.width=m+"px",E.style.height=v+"px";for(var s=0;e.activeCues&&s<e.activeCues.length;++s){var o=e.activeCues[s];o.scaleCue(o)}A&&document[A]||S?E.style.zIndex=R:E.style.zIndex=null}}}function C(e,t){return Math.round(.01*e*t).toString()+"px"}function P(e){var t=m,n=v;if(t*n!=0&&e.layout){var i=e.layout,r=C(i.left,t),a=C(i.top,n),s=C(i.width,t),o=C(i.height,n);E.style.left=r,E.style.top=a,E.style.width=s,E.style.height=o;var l=E.firstChild;l&&l.style&&(l.style.left="0px",l.style.top="0px",l.style.width=s,l.style.height=o,A&&document[A]||S?l.style.zIndex=R:l.style.zIndex=null)}}function w(e){var t,n,i,r,a,s=v,o=[m/e.cellResolution[0],s/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t)){n=(e.linePadding[t]*o[0]).toString();for(var l=document.getElementsByClassName("spanPadding"),u=0;u<l.length;u++)l[u].style.cssText=l[u].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n),l[u].style.cssText=l[u].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.fontSize)for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?i=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(i=e.fontSize[t][1]),n=(i*o[1]).toString(),a="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph");for(var c=0;c<a.length;c++)a[c].style.cssText=a[c].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?r=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(r=e.lineHeight[t][1]),n=(r*o[1]).toString(),a=document.getElementsByClassName(t);for(var d=0;d<a.length;d++)a[d].style.cssText=a[d].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}}function O(e){(p=e,a.call(this),0<=e)?"html"===d.textTracks[e].renderingType?function(){if(!T)return;var e=document.getElementById("native-cue-style");if(e)return;(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet;d.id?t.insertRule("#"+d.id+"::cue {background: transparent}",0):0!==d.classList.length?t.insertRule("."+d.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0)}.call(this):t.call(this):t.call(this)}function i(e){return d.textTracks[e]}function r(e){if(e.cues){for(var t=e.cues,n=t.length-1;0<=n;n--)e.removeCue(t[n]);e.mode="disabled"}}function t(){if(T){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}}function a(){if(E)for(;E.firstChild;)E.removeChild(E.firstChild)}return{initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(u=window.VTTCue||window.TextTrackCue,h=[],f=[],v=m=g=_=0,y=E=null,S=!(p=-1),R=2147483647,T=!!navigator.userAgent.match(/Chrome/)&&!navigator.userAgent.match(/Edge/),void 0!==document.fullscreenElement?A="fullscreenElement":void 0!==document.webkitIsFullScreen?A="webkitIsFullScreen":document.msFullscreenElement?A="msFullscreenElement":document.mozFullScreen&&(A="mozFullScreen"))},displayCConTop:function(e){S=e,E&&!document[A]&&(E.style.zIndex=e?R:null)},addTextTrack:function(e,t){if(h.length!==t){if(h.push(e),void 0===d&&(d=e.video),h.length===t){h.sort(function(e,t){return e.index-t.index}),E=c.getTTMLRenderingDiv();for(var n=-1,i=0;i<h.length;i++){var r=b.call(this,i);f.push(r),h[i].defaultTrack&&(r.default=!0,n=i),T&&d.appendChild(r);var a=d.textTracks[i];a.nonAddedCues=[],E&&(h[i].isTTML||h[i].isEmbedded)?a.renderingType="html":a.renderingType="default",this.addCaptions(i,0,h[i].captionData),o.trigger(D.default.TEXT_TRACK_ADDED)}if(O.call(this,n),0<=n){for(var s=0;s<d.textTracks.length;s++)d.textTracks[s].mode=s===n?"showing":"hidden";this.addCaptions(n,0,null)}o.trigger(D.default.TEXT_TRACKS_ADDED,{index:p,tracks:h})}}else l("Trying to add too many tracks.")},addCaptions:function(e,t,n){var i=0<=e?d.textTracks[e]:null,r=this;if(i)if("showing"===i.mode){if(n||(n=i.nonAddedCues,i.nonAddedCues=[]),n&&0!==n.length)for(var a in n){var s,o=n[a];i.cellResolution=o.cellResolution,i.isFromCEA608=o.isFromCEA608,y||"html"!==o.type&&"image"!==o.type||(y=setInterval(I.bind(this),500)),"image"===o.type?((s=new u(o.start-t,o.end-t,"")).image=o.data,s.id=o.id,s.size=0,s.type="image",s.layout=o.layout,s.scaleCue=P.bind(r),s.onenter=function(){if(E&&"showing"===i.mode){var e=new Image;e.id="ttmlImage_"+this.id,e.src=this.image,e.style.cssText="pointer-events: none; display: block; visibility: visible !important; position: relative !important;",E.appendChild(e),P.call(r,this)}},s.onexit=function(){if(E)for(var e=E.childNodes,t=0;t<e.length;t++)e[t].id==="ttmlImage_"+this.id&&E.removeChild(e[t])}):"html"===o.type?((s=new u(o.start-t,o.end-t,"")).cueHTMLElement=o.cueHTMLElement,s.regions=o.regions,s.regionID=o.regionID,s.cueID=o.cueID,s.videoWidth=o.videoWidth,s.videoHeight=o.videoHeight,s.cellResolution=o.cellResolution,s.fontSize=o.fontSize,s.lineHeight=o.lineHeight,s.linePadding=o.linePadding,s.scaleCue=w.bind(r),E.style.left=_+"px",E.style.top=g+"px",E.style.width=m+"px",E.style.height=v+"px",s.onenter=function(){"showing"===i.mode&&(l("Cue "+this.startTime+"-"+this.endTime+" : "+this.cueHTMLElement.id+" : "+this.cueHTMLElement.innerText),E.appendChild(this.cueHTMLElement),w.call(r,this))},s.onexit=function(){for(var e=E.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&E.removeChild(e[t])}):(s=new u(o.start-t,o.end-t,o.data),o.styles&&(void 0!==o.styles.align&&"align"in s&&(s.align=o.styles.align),void 0!==o.styles.line&&"line"in s&&(s.line=o.styles.line),void 0!==o.styles.position&&"position"in s&&(s.position=o.styles.position),void 0!==o.styles.size&&"size"in s&&(s.size=o.styles.size))),i.addCue(s)}}else n&&0<n.length&&(i.nonAddedCues=i.nonAddedCues.concat(n))},getTextTrack:i,getCurrentTextTrack:function(){return 0<=p?d.textTracks[p]:null},getCurrentTrackIdx:function(){return p},setCurrentTrackIdx:O,getTrackIdxForId:function(e){for(var t=-1,n=0;n<d.textTracks.length;n++)if(d.textTracks[n].label===e){t=n;break}return t},deleteTrackCues:r,deleteAllTextTracks:function(){for(var e=f.length,t=0;t<e;t++)if(T)d.removeChild(f[t]);else{var n=i.call(this,t);n.nonAddedCues=[],r.call(this,n)}f=[],h=[],y&&(clearInterval(y),y=null),a.call(this)},deleteTextTrack:function(e){d.removeChild(f[e]),f.splice(e,1)},setConfig:function(e){e&&e.videoModel&&(c=e.videoModel)}}}a.__dashjs_factory_name="TextTracks",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,13:13,8:8,9:9}],146:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=i(e(9)),u=i(e(13)),c=i(e(22)),d=i(e(61)),h=i(e(162)),f=i(e(161)),r=i(e(10)),p="Failed to resolve a valid URL";function a(){var e,t=this.context,r=(0,l.default)(t).getInstance(),n=(0,c.default)(t).getInstance(),i=void 0,a=void 0,s=void 0,o=void 0;return e={chooseSelectorFromManifest:function(e){o=n.getIsDVB(e)?s:a},select:function(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var i=o.select(t);if(i)return e.selectedIdx=t.indexOf(i),i;r.trigger(u.default.URL_RESOLUTION_FAILED,{error:new Error(1,p)})},reset:function(){i.reset()},setConfig:function(e){e.selector&&(o=e.selector)}},i=(0,d.default)(t).create({updateEventName:u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,loadFailedEventName:u.default.FRAGMENT_LOADING_COMPLETED}),a=(0,f.default)(t).create({blacklistController:i}),s=(0,h.default)(t).create({blacklistController:i}),o=a,e}a.__dashjs_factory_name="BaseURLSelector";var s=r.default.getClassFactory(a);s.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=1,s.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=p,n.default=s,t.exports=n.default},{10:10,13:13,161:161,162:162,22:22,61:61,9:9}],147:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(154)),a=i(e(10)),s=i(e(6));function o(){var i=this.context;return{parse:function(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=s.default.parseBuffer(e),n=(0,r.default)(i).create();return n.setData(t),n}}}o.__dashjs_factory_name="BoxParser",n.default=a.default.getSingletonFactory(o),t.exports=n.default},{10:10,154:154,6:6}],148:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){var e,t=void 0;return t=!(e={supportsMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsEncryptedMedia:function(){return t},supportsCodec:function(e,t){var n=e.canPlayType(t);return"probably"===n||"maybe"===n},setEncryptedMediaSupported:function(e){t=e}}),e}s.__dashjs_factory_name="Capabilities",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],149:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){return{customTimeRangeArray:[],length:0,add:function(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],i=this.customTimeRangeArray[t];return n.start<=i.start&&i.start<=n.end&&n.end<=i.end?(n.end=i.end,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&i.end<=n.end?(n.start=i.start,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&n.end<=i.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=i.start&&i.start<=n.end&&i.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return this.customTimeRangeArray[e].start},end:function(e){return this.customTimeRangeArray[e].end}}}s.__dashjs_factory_name="CustomTimeRanges",n.default=a.default.getClassFactory(s),t.exports=n.default},{10:10}],150:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),a=i(e(99)),u=i(e(8)),c=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],d="dashjs_?_bitrate",h="dashjs_?_settings",f="localStorage";function s(){var e,t=this.context,s=(0,u.default)(t).getInstance().log,n=void 0,o=void 0;function i(e){if(void 0!==n)return n;n=!1;var t;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return s("Warning: DOMStorage access denied: "+e.message),n}if(!t||e!==f&&"sessionStorage"!==e)return n;try{t.setItem("1","1"),t.removeItem("1"),n=!0}catch(e){s("Warning: DOMStorage is supported, but cannot be used: "+e.message)}return n}function r(){return 6e5*Math.round((new Date).getTime()/6e5)}function l(e,t){return i(e)&&o["get"+t+"CachingInfo"]().enabled}return e={getSavedBitrateSettings:function(e){var t=NaN;if(l(f,"LastBitrate")){var n=d.replace(/\?/,e),i=JSON.parse(localStorage.getItem(n))||{},r=(new Date).getTime()-parseInt(i.timestamp,10)>=o.getLastBitrateCachingInfo().ttl||!1,a=parseInt(i.bitrate,10);isNaN(a)||r?r&&localStorage.removeItem(n):s("Last saved bitrate for "+e+" was "+(t=a))}return t},setSavedBitrateSettings:function(e,t){if(l(f,"LastBitrate")&&t){var n=d.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t/1e3,timestamp:r()}))}catch(e){s(e.message)}}},getSavedMediaSettings:function(e){if(!l(f,"LastMediaSettings"))return null;var t=h.replace(/\?/,e),n=JSON.parse(localStorage.getItem(t))||{},i=(new Date).getTime()-parseInt(n.timestamp,10)>=o.getLastMediaSettingsCachingInfo().ttl||!1,r=n.settings;return i&&(localStorage.removeItem(t),r=null),r},setSavedMediaSettings:function(e,t){if(l(f,"LastMediaSettings")){var n=h.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:r()}))}catch(e){s(e.message)}}},isSupported:i},o=(0,a.default)(t).getInstance(),i(f)&&c.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){s(e.message)}}}),e}s.__dashjs_factory_name="DOMStorage";var o=r.default.getSingletonFactory(s);n.default=o,t.exports=n.default},{10:10,8:8,99:99}],151:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),s=i(e(165));function a(e){var n=void 0,o=new DataView(e.data),l=0;function r(e,t){var n=!0,i=0;if(void 0===t&&(t=!1),i=16777215<e.tag?(o.getUint32(l)!==e.tag&&(n=!1),4):65535<e.tag?(256*o.getUint16(l)+o.getUint8(l+2)!==e.tag&&(n=!1),3):255<e.tag?(o.getUint16(l)!==e.tag&&(n=!1),2):(o.getUint8(l)!==e.tag&&(n=!1),1),!n&&e.required&&!t)throw new s.default("required tag not found");return n&&(l+=i),n}function a(e){var t=1,n=128,i=-1,r=0,a=o.getUint8(l),s=void 0;for(s=0;s<8;s+=1){if((a&n)===n){r=void 0===e?a&~n:a,i=s;break}n>>=1}for(s=0;s<i;s+=1,t+=1)r=r<<8|255&o.getUint8(l+t);return l+=t,r}return n={getPos:function(){return l},setPos:function(e){l=e},consumeTag:r,consumeTagAndSize:function(e,t){var n=r(e,t);return n&&a(),n},parseTag:function(e){var t;return r(e),t=a(),n[e.parse](t)},skipOverElement:function(e,t){var n=r(e,t),i=void 0;return n&&(i=a(),l+=i),n},getMatroskaCodedNum:a,getMatroskaFloat:function(e){var t=void 0;switch(e){case 4:t=o.getFloat32(l),l+=4;break;case 8:t=o.getFloat64(l),l+=8}return t},getMatroskaUint:function(e){var t=0,n=void 0;for(n=0;n<e;n+=1)t<<=8,t|=255&o.getUint8(l+n);return l+=e,t},moreData:function(){return l<o.byteLength}}}a.__dashjs_factory_name="EBMLParser",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,165:165}],152:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e(9)),s=i(e(13)),r=i(e(10));function o(){var e=this.context,r=(0,a.default)(e).getInstance();return{capabilityError:function(e){r.trigger(s.default.ERROR,{error:"capability",event:e})},downloadError:function(e,t,n){r.trigger(s.default.ERROR,{error:"download",event:{id:e,url:t,request:n}})},manifestError:function(e,t,n,i){r.trigger(s.default.ERROR,{error:"manifestError",event:{message:e,id:t,manifest:n,event:i}})},timedTextError:function(e,t,n){r.trigger(s.default.ERROR,{error:"cc",event:{message:e,id:t,cc:n}})},mediaSourceError:function(e){r.trigger(s.default.ERROR,{error:"mediasource",event:e})},mediaKeySessionError:function(e){r.trigger(s.default.ERROR,{error:"key_session",event:e})},mediaKeyMessageError:function(e){r.trigger(s.default.ERROR,{error:"key_message",event:e})}}}o.__dashjs_factory_name="ErrorHandler";var l=r.default.getSingletonFactory(o);l.CAPABILITY_ERROR_MEDIASOURCE="mediasource",l.CAPABILITY_ERROR_MEDIAKEYS="mediakeys",l.DOWNLOAD_ERROR_ID_MANIFEST="manifest",l.DOWNLOAD_ERROR_ID_SIDX="SIDX",l.DOWNLOAD_ERROR_ID_CONTENT="content",l.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",l.DOWNLOAD_ERROR_ID_XLINK="xlink",l.MANIFEST_ERROR_ID_CODEC="codec",l.MANIFEST_ERROR_ID_PARSE="parse",l.MANIFEST_ERROR_ID_NOSTREAMS="nostreams",l.TIMED_TEXT_ERROR_ID_PARSE="parse",n.default=l,t.exports=n.default},{10:10,13:13,9:9}],153:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){var i={};return{save:function(e){var t=e.streamId,n=e.representationId;i[t]=i[t]||{},i[t][n]=e},extract:function(e,t){return i&&i[e]&&i[e][t]?i[e][t]:null},reset:function(){i={}}}}s.__dashjs_factory_name="InitCache",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],154:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var v=i(e(168)),r=i(e(10));function a(){var s=void 0,r=void 0,a=void 0,o=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,_=void 0;function t(e){for(var t,n=s.fetchAll(e),i=[],r=0,a=n.length;r<a;r++)(t=m(n[r]))&&i.push(t);return i}function g(e,t,n){for(var i in n)t[i]=e[n[i]]}function m(e){if(!e)return null;var t,n,i=new v.default;switch(g(e,i,r),e.hasOwnProperty("_incomplete")&&(i.isComplete=!e._incomplete),i.type){case"sidx":if(g(e,i,a),i.references)for(t=0,n=i.references.length;t<n;t++)g(e.references[t],i.references[t],o);break;case"emsg":g(e,i,l);break;case"mdhd":g(e,i,u);break;case"mfhd":g(e,i,c);break;case"subs":g(e,i,d);break;case"tfhd":g(e,i,h);break;case"tfdt":g(e,i,f);break;case"trun":if(g(e,i,p),i.samples)for(t=0,n=i.samples.length;t<n;t++)g(e.samples[t],i.samples[t],_)}return i}return r={offset:"_offset",size:"size",type:"type"},a={references:"references",timescale:"timescale",earliest_presentation_time:"earliest_presentation_time",first_offset:"first_offset"},o={reference_type:"reference_type",referenced_size:"referenced_size",subsegment_duration:"subsegment_duration"},l={id:"id",value:"value",timescale:"timescale",scheme_id_uri:"scheme_id_uri",presentation_time_delta:"presentation_time_delta",event_duration:"event_duration",message_data:"message_data"},u={timescale:"timescale"},c={sequence_number:"sequence_number"},d={entry_count:"entry_count",entries:"entries"},h={base_data_offset:"base_data_offset",sample_description_index:"sample_description_index",default_sample_duration:"default_sample_duration",default_sample_size:"default_sample_size",default_sample_flags:"default_sample_flags",flags:"flags"},f={version:"version",baseMediaDecodeTime:"baseMediaDecodeTime",flags:"flags"},p={sample_count:"sample_count",first_sample_flags:"first_sample_flags",data_offset:"data_offset",flags:"flags",samples:"samples"},_={sample_size:"sample_size",sample_duration:"sample_duration",sample_composition_time_offset:"sample_composition_time_offset"},{getBox:function(e){return e&&s&&s.boxes&&0!==s.boxes.length?m(s.fetch(e)):null},getBoxes:t,setData:function(e){s=e},getLastBox:function(){if(!s||!s.boxes||!s.boxes.length)return null;var e=t(s.boxes[s.boxes.length-1].type);return e[e.length-1]},getOffset:function(){return s._cursor.offset}}}a.__dashjs_factory_name="IsoFile",n.default=r.default.getClassFactory(a),t.exports=n.default},{10:10,168:168}],155:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){var n=void 0,i=void 0;return{initialize:function(e,t){n=e,i=t},getLiveEdge:function(){var e=i.getCurrentRepresentationInfo(),t=e.DVRWindow.end;return e.useCalculatedLiveEdgeTime&&(t=n.getExpectedLiveEdge(),n.setClientTimeOffset(t-e.DVRWindow.end)),t},reset:function(){i=n=null}}}s.__dashjs_factory_name="LiveEdgeFinder";var o=a.default.getSingletonFactory(s);n.default=o,t.exports=n.default},{10:10}],156:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){return{areSimpleEquivalent:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}}}s.__dashjs_factory_name="ObjectUtils",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],157:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}s.__dashjs_factory_name="RequestModifier",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],158:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),a=i(e(4)),s=i(e(8));function o(){var e,t=this.context,Te=(0,s.default)(t).getInstance().log,r=void 0,Ae=void 0,Se=void 0,Re=void 0,be=void 0,Ie=void 0,Ce=void 0,Pe=void 0,we=void 0,_=void 0,g=void 0,m=void 0,v=void 0,E=void 0,l=void 0,u=void 0,Oe=void 0,De=void 0,n=0;function Ne(e){return e.hasOwnProperty("begin")&&e.hasOwnProperty("end")?[ke(e.begin),ke(e.end)]:null}function Me(){var e="cue_TTML_"+n;return n++,e}function Le(e,t,n){var i=[],r=[],a=[];function s(e,t){if(e.hasOwnProperty(t)){var n=e[t];r.indexOf(n)<0&&r.push(n)}}for(var o=0;o<e.length;o++){var l=e[o];s(l,"begin"),s(l,"end")}if(0===r.length)return a;if(void 0!==t&&void 0!==n){for(o=0;o<r.length;o++){var u=ke(r[o]);t<u&&u<n&&i.push(u)}i.push(t),i.push(n)}else for(o=0;o<r.length;o++)i.push(ke(r[o]));i.sort(function(e,t){return e-t});for(o=0;o<i.length-1;o++)a.push([i[o],i[o+1]]);return a}function xe(e,t){var n=!0;if(e.hasOwnProperty("span")){var i=Ne(e.span);null!==i&&(n=i[0]<t[1]&&i[1]>t[0])}return n}function ke(e){var t,n,i;if(!r.test(e))return NaN;if(t=e.split(":"),n=3600*parseFloat(t[0])+60*parseFloat(t[1])+parseFloat(t[2]),t[3]){if(!(i=Ae.tt.frameRate)||isNaN(i))return NaN;n+=parseFloat(t[3])/i}return n}function Fe(t,n){var e=Object.keys(t).filter(function(e){return("xmlns"===e.split(":")[0]||"xmlns"===e.split(":")[1])&&t[e]===n}).map(function(e){return e.split(":")[2]||e.split(":")[1]});return 1!=e.length?null:e[0]}function y(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function T(e){var t=e.slice(1).match(/.{2}/g),n=parseFloat(parseInt(parseInt(t[3],16)/255*1e3,10)/1e3);return"rgba("+t.slice(0,3).map(function(e){return parseInt(e,16)}).join(",")+","+n+");"}function A(e){var t,n;return t=e.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),n=parseInt(t[t.length-1],10)/255,"rgba("+t[0]+","+t[1]+","+t[2]+","+n+");"}function Ue(e,t){for(var n=0;n<t.length;n++)if(-1<t[n].indexOf(e))return!0;return!1}function Ve(e,t){for(var n=0;n<t.length;n++)if(-1<t[n].indexOf(e))return t[n];return null}function Be(e,t){t.splice(t.indexOf(Ve(e,t)),1)}function je(e,t){for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++)e[n]&&-1<e[n].split(":")[0].indexOf(t[i].split(":")[0])&&e.splice(n,1);return e.concat(t)}function S(e){var t=new Array(2),n=-1===e.indexOf(":")?0:e.indexOf(":"),i=void 0;return-1===e.indexOf("%")?-1===e.indexOf("c")?-1===e.indexOf("p")?t[0]=t[1]=null:(t[0]="p",i=e.indexOf("p")):(t[0]="c",i=e.indexOf("c")):(t[0]="%",i=e.indexOf("%")),t[1]=e.slice(n,i),t}function He(e,i,r){var a=[];return e.match(/\S+/g).forEach(function(e){var t=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i["xml:id"]===t||i.id===t)return i}return null}(Se,e);if(t){var n=function(e,t,n){var i,r,a,s=[];for(var o in e)if(e.hasOwnProperty(o)){var l=o.replace("ebutts:","");e[l=y(l=(l=l.replace("xml:","")).replace("tts:",""))]=e[o],delete e[o]}if("line-padding"in e){var u=parseFloat(e["line-padding"].slice(e["line-padding"].indexOf(":")+1,e["line-padding"].indexOf("c")));"id"in e&&(Ce[e.id]=u);var c=u*t[0]+"px;";s.push("padding-left:"+c),s.push("padding-right:"+c)}if("font-size"in e){var d=S(e["font-size"]),h=parseFloat(d[1]);"id"in e&&(be[e.id]=d),"%"===d[0]?i=h/100*t[1]+"px;":"c"===d[0]&&(i=h*t[1]+"px;"),s.push("font-size:"+i)}if("line-height"in e)if("normal"===e["line-height"])s.push("line-height: normal;");else{var f=S(e["line-height"]),p=parseFloat(f[1]);"id"in e&&(Ie[e.id]=f),"%"===f[0]?r=p/100*t[1]+"px;":"c"===f[0]&&(r=p*t[1]+"px;"),s.push("line-height:"+r)}return"font-family"in e&&(e["font-family"]in _?s.push(_[e["font-family"]]):s.push("font-family:"+e["font-family"]+";")),"text-align"in e&&e["text-align"]in g&&(s.push(g[e["text-align"]][0]),s.push(g[e["text-align"]][1])),"multi-row-align"in e&&(Ue("text-align",s)&&"auto"!=e["multi-row-align"]&&Be("text-align",s),e["multi-row-align"]in m&&s.push(m[e["multi-row-align"]])),"background-color"in e&&(a=-1<e["background-color"].indexOf("#")&&e["background-color"].length-1==8?T(e["background-color"]):-1<e["background-color"].indexOf("rgba")?A(e["background-color"]):e["background-color"]+";",s.push("background-color: "+a)),"color"in e&&(a=-1<e.color.indexOf("#")&&e.color.length-1==8?T(e.color):-1<e.color.indexOf("rgba")?A(e.color):e.color+";",s.push("color: "+a)),"wrap-option"in e&&(e["wrap-option"]in v?s.push(v[e["wrap-option"]]):s.push("white-space:"+e["wrap-option"])),"unicode-bidi"in e&&(e["unicode-bidi"]in E?s.push(E[e["unicode-bidi"]]):s.push("unicode-bidi:"+e["unicode-bidi"])),"font-style"in e&&s.push("font-style:"+e["font-style"]+";"),"font-weight"in e&&s.push("font-weight:"+e["font-weight"]+";"),"direction"in e&&s.push("direction:"+e.direction+";"),"text-decoration"in e&&s.push("text-decoration:"+e["text-decoration"]+";"),n&&(s=s.concat(qe(e,t))),Ae.tt.hasOwnProperty("xml:space")&&"preserve"===Ae.tt["xml:space"]&&s.push("white-space: pre;"),s}(JSON.parse(JSON.stringify(t)),i,r);a=a.concat(n)}}),a}function Ye(e,t){var n=/([\d\.]+)(%|px)\s+([\d\.]+)(%|px)/;if("tts:extent"in e&&"tts:origin"in e){var i=n.exec(e["tts:extent"]),r=n.exec(e["tts:origin"]);if(null===i||null===r)return Te("Bad extent or origin: "+e["tts:extent"]+" "+e["tts:origin"]),null;var a=parseFloat(i[1]),s=parseFloat(i[3]),o=parseFloat(r[1]),l=parseFloat(r[3]);if(t){var u=n.exec(t);if(null===u||"px"!==u[2]||"px"!==u[4])return Te("Bad tt.extent: "+t),null;var c=parseFloat(u[1]),d=parseFloat(u[3]);"px"===i[2]&&(a=a/c*100),"px"===i[4]&&(s=s/d*100),"px"===r[2]&&(o=o/c*100),"px"===r[4]&&(l=l/d*100)}return{left:o,top:l,width:a,height:s}}return null}function qe(e,t){var n=[];for(var i in e){var r=i.replace("tts:","");e[r=y(r=r.replace("xml:",""))]=e[i],r!==i&&delete e[i]}if("extent"in e){var a=e.extent.split(/\s/);n.push("width: "+a[0]+";"),n.push("height: "+a[1]+";")}if("origin"in e){var s=e.origin.split(/\s/);n.push("left: "+s[0]+";"),n.push("top: "+s[1]+";")}if("display-align"in e&&n.push(l[e["display-align"]]),"writing-mode"in e&&n.push(u[e["writing-mode"]]),"style"in e){var o=He(e.style,t,!0);n=n.concat(o)}return"padding"in e&&n.push("padding:"+e.padding+";"),"overflow"in e&&n.push("overflow:"+e.overflow+";"),"show-background"in e&&n.push("show-background:"+e["show-background"]+";"),"id"in e&&n.push("regionID:"+e.id+";"),n}function Ke(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i["xml:id"]===t||i.id===t)return i}return null}function Ge(e,i){var r=[];return e.match(/\S+/g).forEach(function(e){var t=Ke(Re,e);if(t){var n=qe(JSON.parse(JSON.stringify(t)),i);r=r.concat(n)}}),r}function We(e,t){for(var n=Ve("padding-left",t),i=Ve("padding-right",t),s=n.concat(" "+i+" "),o="",l="",u="",c=Array.prototype.slice.call(e.children),r=e.getElementsByClassName("lineBreak")[0],a=c.indexOf(r),d=[];-1!=a;)d.push(a),a=c.indexOf(r,a+1);var h="</span>",f="<br>",p='<span class="spanPadding" style="-webkit-box-decoration-break: clone; box-decoration-break: clone; ';if(d.length)d.forEach(function(e,t){if(0===t){for(var n="",i=0;i<e;i++)o+=c[i].outerHTML,0===i&&(n=s.concat(c[i].style.cssText));o=p+n+'">'+o}for(var r="",a=e+1;a<c.length;a++)l+=c[a].outerHTML,a===c.length-1&&(r+=s.concat(c[a].style.cssText));l=p+r+'">'+l,o&&l&&t===d.length-1?u+=o+h+f+l+h:o&&l&&t!==d.length-1?u+=o+h+f+l+h+f:o&&!l?u+=o+h:!o&&l&&t===d.length-1?u+=l+h:!o&&l&&t!==d.length-1&&(u+=l+h+f)});else{for(var _="",g=0;g<c.length;g++)_+=c[g].style.cssText;u=p+s+_+'">'+e.innerHTML+h}return u}function ze(e,s){var o=document.createElement("div");return e.forEach(function(e){if(!e.hasOwnProperty("metadata"))if(e.hasOwnProperty("span")){var r=e.span.__children,a=document.createElement("span");if(e.span.hasOwnProperty("style")){var t=He(e.span.style,s);a.className="spanPadding "+e.span.style,a.style.cssText=t.join(" ")}r.forEach(function(e){if(!r.hasOwnProperty("metadata"))if(e.hasOwnProperty("#text")){var t=document.createTextNode(e["#text"]);a.appendChild(t)}else if("br"in e){a.hasChildNodes()&&o.appendChild(a);var n=document.createElement("br");n.className="lineBreak",o.appendChild(n);var i=document.createElement("span");i.className=a.className,i.style.cssText=a.style.cssText,a=i}}),o.appendChild(a)}else if(e.hasOwnProperty("br")){var n=document.createElement("br");n.className="lineBreak",o.appendChild(n)}else if(e.hasOwnProperty("#text")){var i=document.createElement("span");i.textContent=e["#text"],o.appendChild(i)}}),o}function Xe(e,t){for(var n in t)t.hasOwnProperty(n)&&(Ue(n,e)||e.push(n+":"+t[n]))}return e={parse:function(e,t,n,i){var r,a,s=void 0,o=void 0,l=void 0,u="";if(!(Ae=De.xml_str2json(e)))throw new Error("TTML document could not be parsed");if(Oe.getTTMLRenderingDiv()&&(o="html"),!(s=Ae.tt))throw new Error("TTML document lacks tt element");var c=Fe(s,"http://www.w3.org/ns/ttml");if(c&&function e(t,n){for(var i in t)if(t.hasOwnProperty(i)){if(("object"==typeof t[i]||t[i]instanceof Object)&&!Array.isArray(t[i]))e(t[i],n);else if(Array.isArray(t[i]))for(var r=0;r<t[i].length;r++)e(t[i][r],n);var a=n+":",s=i.indexOf(a);if(0<=s){var o=i.slice(s+a.length);t[o]=t[i],delete t[i]}}}(s,c),a=s["tts:extent"],!(r=s.head))throw new Error("TTML document lacks head element");r.layout&&(Re=r.layout.region_asArray),r.styling&&(Se=r.styling.style_asArray);var d={};if(i)for(l=0;l<i.length;l++){var h="urn:mpeg:14496-30:subs:"+(l+1).toString(),f="data:image/png;base64,"+btoa(i[l]);d[h]=f}if(r.metadata){var p=r.metadata.image_asArray;if(p)for(l=0;l<p.length;l++)h="#"+p[l]["xml:id"],f="data:image/"+p[l].imagetype.toLowerCase()+";base64,"+p[l].__text,d[h]=f}if(!s.body)throw new Error("TTML document lacks body element");var _=Ae.tt.hasOwnProperty("ttp:cellResolution")?Ae.tt["ttp:cellResolution"].split(" ").map(parseFloat):[32,15],g=Oe.getElement().clientWidth,m=Oe.getElement().clientHeight,v=[g/_[0],m/_[1]];we["font-size"]=v[1]+"px;";var E=[];if(Re)for(l=0;l<Re.length;l++)E.push(qe(JSON.parse(JSON.stringify(Re[l])),v));var y=Fe(Ae.tt,"http://www.w3.org/ns/ttml#parameter");s.hasOwnProperty(y+":frameRate")&&(s.frameRate=parseInt(s[y+":frameRate"],10));for(var T,A,S,R,b,I,C,P,w,O=[],D=s.body_asArray[0].__children,N=0;N<D.length;N++){var M,L=D[N].div;if(null===(M=Ne(L))){var x=L.p_asArray;if(null===M&&(!x||0===x.length))return Te(u="TTML has div that contains no timing and no paragraphs."),O;for(var k=0;k<x.length;k++){var F=x[k],U=F.span_asArray,V=[];if(F.hasOwnProperty("begin")&&F.hasOwnProperty("end")){var B=(A=t,S=n,w=P=C=I=b=R=void 0,P=ke((T=F).begin),w=ke(T.end),R=P,void 0!==(b=A)&&R<b&&(R=b),P=R,I=w,void 0!==(C=S)&&C<I&&(I=C),w=I,void 0!==A&&void 0!==S&&(w<A||S<P)?(Te("TTML: Cue "+P+"-"+w+" outside interval "+A+"-"+S),null):[P,w]);null!==B&&V.push(B)}else V=Le(U,t,n);if(0!==V.length)for(var j=F.__children,H=0;H<V.length;H++){for(var Y=V[H],q=[],K=0;K<j.length;K++){var G=j[K];xe(G,Y)&&q.push(G)}if(0!==q.length)if("html"===o){Ie={},Ce={},be={};var W=(pe=L,_e=v,ve=me=ge=void 0,ve=[],Ee=F.region,(ye=pe.region)&&(ge=Ge(ye,_e)),Ee?(me=ve.concat(Ge(Ee,_e)),ve=ge?je(ge,me):me):ge&&(ve=ge),Xe(ve,Pe),ve),z=(ae=v,fe=ue=le=oe=se=void 0,ue=[],ce=F.style,de=Ae.tt.body.style,he=Ae.tt.body.div.style,fe="",de&&(se=He(de,ae),fe="paragraph "+de),he&&(oe=He(he,ae),se?(oe=je(se,oe),fe+=" "+he):fe="paragraph "+he),ce?(le=He(ce,ae),se&&oe?(ue=je(oe,le),fe+=" "+ce):se?(ue=je(se,le),fe+=" "+ce):oe?(ue=je(oe,le),fe+=" "+ce):(ue=le,fe="paragraph "+ce)):se&&!oe?ue=se:!se&&oe&&(ue=oe),Xe(ue,we),[ue,fe]),X=z[1];z=z[0];var Q=document.createElement("div");Q.className=X;var J=ze(q,v);J.className="cueDirUniWrapper",Ue("unicode-bidi",z)&&(J.style.cssText+=Ve("unicode-bidi",z),Be("unicode-bidi",z)),Ue("direction",z)&&(J.style.cssText+=Ve("direction",z),Be("direction",z)),Ue("padding-left",z)&&Ue("padding-right",z)&&(J.innerHTML=We(J,z)),Ue("padding-left",z)&&Ue("padding-right",z)&&(Be("padding-left",z),Be("padding-right",z));var Z="";if(Ue("regionID",W)){var $=Ve("regionID",W);Z=$.slice($.indexOf(":")+1,$.length-1)}z&&(Q.style.cssText=z.join(" ")+"display:flex;"),W&&(W=W.join(" ")),Q.appendChild(J);var ee=document.createElement("div");ee.appendChild(Q),ee.id=Me(),ee.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+W,0===Object.keys(be).length&&(be.defaultFontSize="100"),O.push({start:Y[0],end:Y[1],type:"html",cueHTMLElement:ee,regions:E,regionID:Z,cueID:ee.id,videoHeight:m,videoWidth:g,cellResolution:_,fontSize:be||{defaultFontSize:"100"},lineHeight:Ie,linePadding:Ce})}else{var te="",ne=q;ne.length&&ne.forEach(function(e){if(e.hasOwnProperty("span")){var t=e.span.__children;t.forEach(function(e){t.hasOwnProperty("metadata")||(e.hasOwnProperty("#text")?te+=e["#text"].replace(/[\r\n]+/gm," ").trim():"br"in e&&(te+="\n"))})}else e.hasOwnProperty("br")?te+="\n":te+=e["#text"].replace(/[\r\n]+/gm," ").trim()}),O.push({start:Y[0],end:Y[1],data:te,type:"text"})}}else u="TTML: Empty paragraph"}}else{var ie=void 0;L.region&&(ie=Ye(Ke(Re,L.region),a)),ie||(ie=Ye(L,a));var re=L["smpte:backgroundImage"];void 0!==re&&void 0!==d[re]&&O.push({start:M[0],end:M[1],id:Me(),data:d[re],type:"image",layout:ie})}}var ae,se,oe,le,ue,ce,de,he,fe;var pe,_e,ge,me,ve,Ee,ye;if(""!==u&&Te(u),0<O.length)return O;throw new Error(u)},setConfig:function(e){e&&e.videoModel&&(Oe=e.videoModel)}},r=/^([0-9][0-9]+):([0-5][0-9]):([0-5][0-9])|(60)(\.([0-9])+)?$/,be={},Ie={},Ce={},Pe={top:"auto;",left:"auto;",width:"90%;",height:"10%;","align-items":"flex-start;",overflow:"visible;","-ms-writing-mode":"lr-tb, horizontal-tb;","-webkit-writing-mode":"horizontal-tb;","-moz-writing-mode":"horizontal-tb;","writing-mode":"horizontal-tb;"},we={color:"rgb(255,255,255);",direction:"ltr;","font-family":"monospace, sans-serif;","font-style":"normal;","line-height":"normal;","font-weight":"normal;","text-align":"start;","justify-content":"flex-start;","text-decoration":"none;","unicode-bidi":"normal;","white-space":"normal;",width:"100%;"},_={monospace:"font-family: monospace;",sansSerif:"font-family: sans-serif;",serif:"font-family: serif;",monospaceSansSerif:"font-family: monospace, sans-serif;",monospaceSerif:"font-family: monospace, serif;",proportionalSansSerif:"font-family: Arial;",proportionalSerif:"font-family: Times New Roman;",default:"font-family: monospace, sans-serif;"},g={right:["justify-content: flex-end;","text-align: right;"],start:["justify-content: flex-start;","text-align: start;"],center:["justify-content: center;","text-align: center;"],end:["justify-content: flex-end;","text-align: end;"],left:["justify-content: flex-start;","text-align: left;"]},m={start:"text-align: start;",center:"text-align: center;",end:"text-align: end;",auto:""},v={wrap:"white-space: normal;",noWrap:"white-space: nowrap;"},E={normal:"unicode-bidi: normal;",embed:"unicode-bidi: embed;",bidiOverride:"unicode-bidi: bidi-override;"},l={before:"align-items: flex-start;",center:"align-items: center;",after:"align-items: flex-end;"},u={lrtb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rltb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;unicode-bidi: bidi-override;",tbrl:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;",tblr:"-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;-webkit-text-orientation: upright;text-orientation: upright;",lr:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rl:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;",tb:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;"},De=new a.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,matchers:[]}),e}o.__dashjs_factory_name="TTMLParser",n.default=r.default.getSingletonFactory(o),t.exports=n.default},{10:10,4:4,8:8}],159:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(){var n=void 0,i=/^[a-z][a-z0-9+\-.]*:/i,t=/^https?:\/\//i,r=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,e=function(t,e){try{return new window.URL(t,e).toString()}catch(e){return t}},a=function(e,t){var n=s;if(!t)return e;if(!u(e))return e;c(e)&&(n=o),d(e)&&(n=l);var i=n(t),r="/"!==i.charAt(i.length-1)&&"/"!==e.charAt(0)?"/":"";return[i,e].join(r)};function s(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function o(e){var t=e.match(r);return t?t[1]:""}function l(e){var t=e.match(i);return t?t[0]:""}function u(e){return!i.test(e)}function c(e){return u(e)&&"/"===e.charAt(0)}function d(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y"),n=e}catch(e){}finally{n=n||a}}(),{parseBaseUrl:s,parseOrigin:o,parseScheme:l,isRelative:u,isPathAbsolute:c,isSchemeRelative:d,isHTTPURL:function(e){return t.test(e)},resolve:function(e,t){return n(e,t)}}}s.__dashjs_factory_name="URLUtils",n.default=a.default.getSingletonFactory(s),t.exports=n.default},{10:10}],160:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e(10)),s=i(e(8));function a(){var e,t=this.context,h=(0,s.default)(t).getInstance().log,f=void 0,p=void 0,_=void 0,a=void 0;function g(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function m(e){var t,n,i=e.split(p),r=i[1].split(a);return r.shift(),i[1]=r[0],r.shift(),{cuePoints:i,styles:(t=r,n={},t.forEach(function(e){if(1<e.split(/:/).length){var t=e.split(/:/)[1];t&&-1!=t.search(/%/)&&(t=parseInt(t.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(n.align=t),(e.match(/line/)||e.match(/L/))&&(n.line=t),(e.match(/position/)||e.match(/P/))&&(n.position=t),(e.match(/size/)||e.match(/S/))&&(n.size=t)}}),n)}}function v(e,t){for(var n,i=t,r="",a="";""!==e[i]&&i<e.length;)i++;if(1<(n=i-t))for(var s=0;s<n;s++){if((a=e[t+s]).match(p)){r="";break}r+=a,s!==n-1&&(r+="\n")}else(a=e[t]).match(p)||(r=a);return r}return e={parse:function(e){var t,n,i=[];t=(e=e.split(f)).length,n=-1;for(var r=0;r<t;r++){var a=e[r];if(0<a.length&&"WEBVTT"!==a&&a.match(p)){var s=m(a),o=s.cuePoints,l=s.styles,u=v(e,r+1),c=g(o[0].replace(_,"")),d=g(o[1].replace(_,""));!isNaN(c)&&!isNaN(d)&&n<=c&&c<d?""!==u?(n=c,i.push({start:c,end:d,data:u,styles:l})):h("Skipping cue due to empty/malformed cue text"):h("Skipping cue due to incorrect cue timing")}}return i}},f=/(?:\r\n|\r|\n)/gm,p=/-->/,_=/(^[\s]+|[\s]+$)/g,a=/\s\b/g,e}a.__dashjs_factory_name="VTTParser",n.default=r.default.getSingletonFactory(a),t.exports=n.default},{10:10,8:8}],161:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(e){var i=e.blacklistController;return{select:function(e){var t,n=0;return e&&e.some(function(e,t){return n=t,!i.contains(e.serviceLocation)})&&(t=e[n]),t}}}s.__dashjs_factory_name="BasicSelector",n.default=a.default.getClassFactory(s),t.exports=n.default},{10:10}],162:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(10),a=(i=r)&&i.__esModule?i:{default:i};function s(e){var n=e.blacklistController;return{select:function(e){return e&&function(e){var n,t,i=0,r=[],a=0;if((t=e.sort(function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n}).filter(function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority})).length)return 1<t.length&&(t.forEach(function(e){i+=e.dvb_weight,r.push(i)}),n=Math.floor(Math.random()*(i-1)),r.every(function(e,t){return a=t,!(n<e)})),t[a]}((t=[],e.filter(function(e){return!n.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)}).filter(function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)})));var t}}}s.__dashjs_factory_name="DVBSelector",n.default=a.default.getClassFactory(s),t.exports=n.default},{10:10}],163:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.qualityIndex=NaN},t.exports=n.default},{}],164:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null},t.exports=n.default},{}],165:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=n||null,this.data=i||null},t.exports=n.default},{}],166:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",n.default=i,t.exports=n.default},{}],167:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(166),a=(i=r)&&i.__esModule?i:{default:i},s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),t}();n.default=s,t.exports=n.default},{166:166}],168:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=NaN,this.type=null,this.size=NaN,this.isComplete=!0},t.exports=n.default},{}],169:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null},t.exports=n.default},{}],170:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null},t.exports=n.default},{}],171:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[],this.BolaState=[]},t.exports=n.default},{}],172:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isFirst=!0},t.exports=n.default},{}],173:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(166),a=(i=r)&&i.__esModule?i:{default:i},s=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.url=e||null,this.type=t||null,this.mediaType="stream",this.responseType="text"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a["default"]),n}();n.default=s,t.exports=n.default},{166:166}],174:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.video=null,this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1},t.exports=n.default},{}],175:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},t.exports=n.default},{}],176:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null},t.exports=n.default},{}],177:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._s=void 0},t.exports=n.default},{}],178:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.level=null},t.exports=n.default},{}],179:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=e(62),a=(i=r)&&i.__esModule?i:{default:i};n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=a.default.BUFFER_EMPTY},t.exports=n.default},{62:62}],180:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.range=null,this.manifestInfo=null},t.exports=n.default},{}],181:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.droppedFrames=null},t.exports=n.default},{}],182:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function e(){i(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null};r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.OTHER_TYPE="other",n.HTTPRequest=r,n.HTTPRequestTrace=function e(){i(this,e),this.s=null,this.d=null,this.b=[]}},{}],183:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});n.ManifestUpdate=function e(){i(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.trackInfo=[]},n.ManifestUpdateStreamInfo=function e(){i(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},n.ManifestUpdateTrackInfo=function e(){i(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},{}],184:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function e(){i(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};r.INITIAL_PLAYOUT_START_REASON="initial_playout",r.SEEK_START_REASON="seek",r.RESUME_FROM_PAUSE_START_REASON="resume",r.METRICS_COLLECTION_START_REASON="metrics_collection_start";var a=function e(){i(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",n.PlayList=r,n.PlayListTrace=a},{}],185:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null},t.exports=n.default},{}],186:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadingRequests=[],this.executedRequests=[]},t.exports=n.default},{}],187:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},t.exports=n.default},{}],188:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null},t.exports=n.default},{}]},{},[5]),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DashjsDnaWrapper=t():e.DashjsDnaWrapper=t()}(this,function(){return function(n){function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var r={};return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist",i(i.s=65)}([function(e,t){var n=e.exports={version:"2.6.2"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n in s){var i=s[n];if(i.context===e&&i.name===t)return i.instance}return null}function r(e,t){return t[e]}function n(e,t,n){e in n&&(n[e]=t)}function a(e,t,n){var i=void 0,r=e.__dashjs_factory_name,a=t[r];if(a){var s=a.instance;if(!a.override)return s.apply({context:t,factory:l},n);for(var o in i=e.apply({context:t},n),s=s.apply({context:t,factory:l,parent:i},n))i.hasOwnProperty(o)&&(i[o]=s[o])}else i=e.apply({context:t},n);return i.getClassName=function(){return r},i}var l=void 0,s=[],o={},u={};return l={extend:function(e,t,n,i){!i[e]&&t&&(i[e]={instance:t,override:n})},getSingletonInstance:i,setSingletonInstance:function(e,t,n){for(var i in s){var r=s[i];if(r.context===e&&r.name===t)return void(s[i].instance=n)}s.push({name:t,context:e,instance:n})},getSingletonFactory:function(n){var e=r(n.__dashjs_factory_name,o);return e||(e=function(e){var t=void 0;return void 0===e&&(e={}),{getInstance:function(){return t||(t=i(e,n.__dashjs_factory_name)),t||(t=a(n,e,arguments),s.push({name:n.__dashjs_factory_name,context:e,instance:t})),t}}},o[n.__dashjs_factory_name]=e),e},getSingletonFactoryByName:function(e){return r(e,o)},updateSingletonFactory:function(e,t){n(e,t,o)},getClassFactory:function(t){var e=r(t.__dashjs_factory_name,u);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return a(t,e,arguments)}}},u[t.__dashjs_factory_name]=e),e},getClassFactoryByName:function(e){return r(e,u)},updateClassFactory:function(e,t){n(e,t,u)}}}();t.default=i,e.exports=t.default},function(e,t,n){var _=n(3),g=n(0),m=n(44),v=n(9),E=n(7),y=function(e,t,n){var i,r,a,s=e&y.F,o=e&y.G,l=e&y.S,u=e&y.P,c=e&y.B,d=e&y.W,h=o?g:g[t]||(g[t]={}),f=h.prototype,p=o?_:l?_[t]:(_[t]||{}).prototype;for(i in o&&(n=t),n)(r=!s&&p&&void 0!==p[i])&&E(h,i)||(a=r?p[i]:n[i],h[i]=o&&"function"!=typeof p[i]?n[i]:c&&r?m(a,_):d&&p[i]==a?function(i){var e=function(e,t,n){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(e);case 2:return new i(e,t)}return new i(e,t,n)}return i.apply(this,arguments)};return e.prototype=i.prototype,e}(a):u&&"function"==typeof a?m(Function.call,a):a,u&&((h.virtual||(h.virtual={}))[i]=a,e&y.R&&f&&!f[i]&&v(f,i,a)))};y.F=1,y.G=2,y.S=4,y.P=8,y.B=16,y.W=32,y.U=64,y.R=128,e.exports=y},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(48),r=n(28);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(14),r=n(45),a=n(27),s=Object.defineProperty;t.f=n(6)?Object.defineProperty:function(e,t,n){if(i(e),t=a(t,!0),i(n),r)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(11)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){var i=n(5),r=n(20);e.exports=n(6)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(31)("wks"),r=n(22),a=n(3).Symbol,s="function"==typeof a;(e.exports=function(e){return i[e]||(i[e]=s&&a[e]||(s?a:r)("Symbol."+e))}).store=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(126),a=(i=r)&&i.__esModule?i:{default:i},s=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}());t.default=s,e.exports=t.default},function(e,t,n){var i=n(10);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var i=n(47),r=n(32);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function i(){function a(e,n,i){var r=-1;return s[e]&&s[e].some(function(e,t){if(e&&e.callback===n&&(!i||i===e.scope))return r=t,!0}),r}var s={};return{on:function(n,e,t){var i=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if(!n)throw new Error("event type cannot be null or undefined");if(!e||"function"!=typeof e)throw new Error("listener must be a function: "+e);if(!(0<=a(n,e,t))){s[n]=s[n]||[];var r={callback:e,scope:t,priority:i};s[n].some(function(e,t){if(e&&i>e.priority)return s[n].splice(t,0,r),!0})||s[n].push(r)}},off:function(e,t,n){if(e&&t&&s[e]){var i=a(e,t,n);i<0||(s[e][i]=null)}},trigger:function(e,t){if(e&&s[e]){if((t=t||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,s[e]=s[e].filter(function(e){return e}),s[e].forEach(function(e){return e&&e.callback.call(e.scope,t)})}},reset:function(){s={}}}}Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="EventBus";var o=s.default.getSingletonFactory(i);o.EVENT_PRIORITY_LOW=0,o.EVENT_PRIORITY_HIGH=5e3,s.default.updateSingletonFactory(i.__dashjs_factory_name,o),t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){i(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null};r.GET="GET",r.HEAD="HEAD",r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.OTHER_TYPE="other",t.HTTPRequest=r,t.HTTPRequestTrace=function e(){i(this,e),this.s=null,this.d=null,this.b=[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return i(e,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight"}}]),e}());t.default=r,e.exports=t.default},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=!0},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(74)),a=i(n(85)),s="function"==typeof a.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};t.default="function"==typeof a.default&&"symbol"===s(r.default)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":void 0===e?"undefined":s(e)}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(54),a=(i=r)&&i.__esModule?i:{default:i};t.default=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,a.default)(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=function(){function n(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this._test=e,this._converter=t}return i(n,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),n}();t.default=r,e.exports=t.default},function(e,t,n){e.exports={default:n(67),__esModule:!0}},function(e,t,n){var r=n(10);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?i:n)(e)}},function(e,t,n){var i=n(31)("keys"),r=n(22);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(0),r=n(3),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(21)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(28);e.exports=function(e){return Object(i(e))}},function(e,t){e.exports={}},function(e,t,i){var r=i(14),a=i(79),s=i(32),o=i(30)("IE_PROTO"),l=function(){},u=function(){var e,t=i(46)("iframe"),n=s.length;for(t.style.display="none",i(80).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[s[n]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(l.prototype=r(e),n=new l,l.prototype=null,n[o]=e):n=u(),void 0===t?n:a(n,t)}},function(e,t,n){var i=n(5).f,r=n(7),a=n(12)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},function(e,t,n){t.f=n(12)},function(e,t,n){var i=n(3),r=n(0),a=n(21),s=n(38),o=n(5).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=a?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},function(e,t,n){var i=n(16),r=n(20),a=n(4),s=n(27),o=n(7),l=n(45),u=Object.getOwnPropertyDescriptor;t.f=n(6)?u:function(e,t){if(e=a(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(o(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return i(e,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.UTF8="utf-8",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)"}}]),e}());t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.code=t||null,this.message=n||null,this.data=i||null},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=new s.default;t&&t.modifyRequestHeader();var i=(0,a.default)({},n.headers);return e.range&&(i.Range="bytes="+e.range),i}Object.defineProperty(t,"__esModule",{value:!0}),t.getHeadersForRequest=t.getFetchConfig=void 0;var a=i(n(26)),s=i(n(145));t.getFetchConfig=function(e,t,n){var i;return i="function"==typeof t.getXHRWithCredentialsForType?t.getXHRWithCredentialsForType(e.type):t.getXHRWithCredentials(),{url:n.modifyRequestURL(e.url),headers:r(e,n),withCredentials:!!i}},t.getHeadersForRequest=r},function(e,t,n){var a=n(69);e.exports=function(i,r,e){if(a(i),void 0===r)return i;switch(e){case 1:return function(e){return i.call(r,e)};case 2:return function(e,t){return i.call(r,e,t)};case 3:return function(e,t,n){return i.call(r,e,t,n)}}return function(){return i.apply(r,arguments)}}},function(e,t,n){e.exports=!n(6)&&!n(11)(function(){return 7!=Object.defineProperty(n(46)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(10),r=n(3).document,a=i(r)&&i(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},function(e,t,n){var s=n(7),o=n(4),l=n(71)(!1),u=n(30)("IE_PROTO");e.exports=function(e,t){var n,i=o(e),r=0,a=[];for(n in i)n!=u&&s(i,n)&&a.push(n);for(;t.length>r;)s(i,n=t[r++])&&(~l(a,n)||a.push(n));return a}},function(e,t,n){var i=n(49);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";var E=n(21),y=n(2),T=n(51),A=n(9),S=n(35),R=n(78),b=n(37),I=n(52),C=n(12)("iterator"),P=!([].keys&&"next"in[].keys()),w=function(){return this};e.exports=function(e,t,n,i,r,a,s){R(n,t,i);var o,l,u,c=function(e){if(!P&&e in p)return p[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},d=t+" Iterator",h="values"==r,f=!1,p=e.prototype,_=p[C]||p["@@iterator"]||r&&p[r],g=_||c(r),m=r?h?c("entries"):g:void 0,v="Array"==t&&p.entries||_;if(v&&(u=I(v.call(new e)))!==Object.prototype&&u.next&&(b(u,d,!0),E||"function"==typeof u[C]||A(u,C,w)),h&&_&&"values"!==_.name&&(f=!0,g=function(){return _.call(this)}),E&&!s||!P&&!f&&p[C]||A(p,C,g),S[t]=g,S[d]=w,r)if(o={values:h?g:c("values"),keys:a?g:c("keys"),entries:m},s)for(l in o)l in p||T(p,l,o[l]);else y(y.P+y.F*(P||f),t,o);return o}},function(e,t,n){e.exports=n(9)},function(e,t,n){var i=n(7),r=n(34),a=n(30)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var i=n(47),r=n(32).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){e.exports={default:n(95),__esModule:!0}},function(p9b,q9b,r9b){window,p9b.exports=function(n){function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var i={};return r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=116)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),a=(i=r)&&i.__esModule?i:{default:i};t.default=(0,a.default)({STOPPED:"onStopped",MEDIA_ELEMENT_ATTACHED:"onMediaElementAttached",MEDIA_ELEMENT_DETACHED:"onMediaElementDetached",MEDIA_MAP_CREATED:"onMediaMapCreated",MEDIA_MAP_PROCESSED:"onMediaMapProcessed",MEDIA_SEGMENT_REQUESTED:"onMediaSegmentRequested",MEDIA_SEGMENT_FETCHED:"onMediaSegmentFetched",MEDIA_SEGMENT_CONSUMED:"onMediaSegmentConsumed",MEDIA_ENDED:"onMediaEnded",DISTRIBUTOR_ANSWERED:"onDistributorAnswered",DISTRIBUTOR_ANSWER_HANDLED:"onDistributorAnswerHandled",MODULE_CONF_INJECTED:"onModuleconfInjected",LOCAL_CONF_UPDATED:"onLocalConfUpdated",SUBNET_MATCHER_ANSWERED:"onSubnetMatcherAnswered",DNA_CLIENT_LOAD_CONDITION_REACHED:"onDnaClientLoadConditionReached",COMPASS_LOADED:"onCompassLoaded",DNA_CLIENT_LOADED:"onDnaClientLoaded",BACKEND_URLS_CHANGED:"onBackendUrlsChanged",ROUTER_AZ_CHANGED:"onRouterAzChanged",STOP_REPORTING_TRAFFIC:"stopReportingTraffic",RESTART_REPORTING_TRAFFIC:"restartReportingTraffic",NETWORK_TYPE_CHANGED:"networkTypeChanged",CDN_TIMING_EVENT:"cdnTimingEvent",CDN_DOWNLOAD_ERROR:"cdnDownloadError"}),e.exports=t.default},function(e,t){var n=e.exports={version:"2.6.2"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(81),a=(i=r)&&i.__esModule?i:{default:i};t.default=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,a.default)(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}()},function(e,t,n){var _=n(5),g=n(2),m=n(13),v=n(14),E=n(16),y=function(e,t,n){var i,r,a,s=e&y.F,o=e&y.G,l=e&y.S,u=e&y.P,c=e&y.B,d=e&y.W,h=o?g:g[t]||(g[t]={}),f=h.prototype,p=o?_:l?_[t]:(_[t]||{}).prototype;for(i in o&&(n=t),n)(r=!s&&p&&void 0!==p[i])&&E(h,i)||(a=r?p[i]:n[i],h[i]=o&&"function"!=typeof p[i]?n[i]:c&&r?m(a,_):d&&p[i]==a?function(i){var e=function(e,t,n){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(e);case 2:return new i(e,t)}return new i(e,t,n)}return i.apply(this,arguments)};return e.prototype=i.prototype,e}(a):u&&"function"==typeof a?m(Function.call,a):a,u&&((h.virtual||(h.virtual={}))[i]=a,e&y.R&&f&&!f[i]&&v(f,i,a)))};y.F=1,y.G=2,y.S=4,y.P=8,y.B=16,y.W=32,y.U=64,y.R=128,e.exports=y},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(58)("wks"),r=n(38),a=n(5).Symbol,s="function"==typeof a;(e.exports=function(e){return i[e]||(i[e]=s&&a[e]||(s?a:r)("Symbol."+e))}).store=i},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(9),r=n(78),a=n(53),s=Object.defineProperty;t.f=n(10)?Object.defineProperty:function(e,t,n){if(i(e),t=a(t,!0),i(n),r)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(7);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports={default:n(126),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInterval=function(e,t){return new r(e,t,i.TIMER_TYPE.INTERVAL)},t.createTimeout=function(e,t){return new r(e,t,i.TIMER_TYPE.TIMEOUT)};var i=n(89),r=n(135)},function(e,t,n){var a=n(25);e.exports=function(i,r,e){if(a(i),void 0===r)return i;switch(e){case 1:return function(e){return i.call(r,e)};case 2:return function(e,t){return i.call(r,e,t)};case 3:return function(e,t,n){return i.call(r,e,t,n)}}return function(){return i.apply(r,arguments)}}},function(e,t,n){var i=n(8),r=n(26);e.exports=n(10)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(54),r=n(55);e.exports=function(e){return i(r(e))}},function(e,t,n){e.exports={default:n(123),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={Methods:{GET:"GET",POST:"POST"},ResponseTypes:{JSON:"json",ARRAY_BUFFER:"arraybuffer"},ReadyStates:{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},Errors:{INVALID_STATUS:"Response status is not part of valid status codes",REQUEST_ABORTED:"Request has been aborted",REQUEST_ERROR:"An error occured while sending the request",REQUEST_TIMEOUT:"Request timeout"}},e.exports=t.default},function(e,t,n){var i=n(79),r=n(59);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){"use strict";var i=n(138)(!0);n(67)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){e.exports={}},function(e,t,n){e.exports={default:n(164),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(36),a=(i=r)&&i.__esModule?i:{default:i};t.default=a.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=!0},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var i=n(55);e.exports=function(e){return Object(i(e))}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(136)),a=i(n(144)),s="function"==typeof a.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};t.default="function"==typeof a.default&&"symbol"===s(r.default)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":void 0===e?"undefined":s(e)}},function(e,t,n){var i=n(8).f,r=n(16),a=n(6)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},function(e,t,n){n(142);for(var i=n(5),r=n(14),a=n(22),s=n(6)("toStringTag"),o="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<o.length;l++){var u=o[l],c=i[u],d=c&&c.prototype;d&&!d[s]&&r(d,s,u),a[u]=a.Array}},function(e,t,n){var h=n(13),f=n(98),p=n(99),_=n(9),g=n(37),m=n(71),v={},E={};(t=e.exports=function(e,t,n,i,r){var a,s,o,l,u=r?function(){return e}:m(e),c=h(n,i,t?2:1),d=0;if("function"!=typeof u)throw TypeError(e+" is not iterable!");if(p(u)){for(a=g(e.length);d<a;d++)if((l=t?c(_(s=e[d])[0],s[1]):c(e[d]))===v||l===E)return l}else for(o=u.call(e);!(s=o.next()).done;)if((l=f(o,c,s.value,t))===v||l===E)return l}).BREAK=v,t.RETURN=E},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isNumeric=t.Delta=void 0;var r=i(n(0)),a=i(n(3)),s=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;(0,r.default)(this,t),this.Mt=e}return t.prototype.calcDelta=function(e){var t=e-this.Mt;return this.Mt=e,t},t.prototype.override=function(e){this.Mt=e},(0,a.default)(t,[{key:"lastValue",get:function(){return this.Mt}}]),t}();t.Delta=s,t.isNumeric=function(e){return"number"==typeof e&&!isNaN(e)}},function(e,t,n){e.exports={default:n(118),__esModule:!0}},function(e,t,n){var i=n(56),r=Math.min;e.exports=function(e){return 0<e?r(i(e),9007199254740991):0}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){var i=n(38)("meta"),r=n(7),a=n(16),s=n(8).f,o=0,l=Object.isExtensible||function(){return!0},u=!n(15)(function(){return l(Object.preventExtensions({}))}),c=function(e){s(e,i,{value:{i:"O"+ ++o,w:{}}})},d=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},getWeak:function(e,t){if(!a(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},onFreeze:function(e){return u&&d.NEED&&l(e)&&!a(e,i)&&c(e),e}}},function(e,t,i){"use strict";(function(a){function f(e){var t,n=a&&a.location||{},i={},r=typeof(e=e||n);if("blob:"===e.protocol)i=new _(unescape(e.pathname),{});else if("string"===r)for(t in i=new _(e,{}),o)delete i[t];else if("object"===r){for(t in e)t in o||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=s.test(e.href))}return i}function p(e){var t=n.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function _(e,t,n){if(!(this instanceof _))return new _(e,t,n);var i,r,a,s,o,l,u=v.slice(),c=typeof t,d=this,h=0;for("object"!==c&&"string"!==c&&(n=t,t=null),n&&"function"!=typeof n&&(n=m.parse),t=f(t),i=!(r=p(e||"")).protocol&&!r.slashes,d.slashes=r.slashes||i&&t.slashes,d.protocol=r.protocol||t.protocol||"",e=r.rest,r.slashes||(u[3]=[/(.*)/,"pathname"]);h<u.length;h++)"function"!=typeof(s=u[h])?(a=s[0],l=s[1],a!=a?d[l]=e:"string"==typeof a?~(o=e.indexOf(a))&&(e="number"==typeof s[2]?(d[l]=e.slice(0,o),e.slice(o+s[2])):(d[l]=e.slice(o),e.slice(0,o))):(o=a.exec(e))&&(d[l]=o[1],e=e.slice(0,o.index)),d[l]=d[l]||i&&s[3]&&t[l]||"",s[4]&&(d[l]=d[l].toLowerCase())):e=s(e);n&&(d.query=n(d.query)),i&&t.slashes&&"/"!==d.pathname.charAt(0)&&(""!==d.pathname||""!==t.pathname)&&(d.pathname=function(e,t){for(var n="/".split("/").slice(0,-1).concat(e.split("/")),i=n.length,r=n[i-1],a=!1,s=0;i--;)"."===n[i]?n.splice(i,1):".."===n[i]?(n.splice(i,1),s++):s&&(0===i&&(a=!0),n.splice(i,1),s--);return a&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(d.pathname,t.pathname)),g(d.port,d.protocol)||(d.host=d.hostname,d.port=""),d.username=d.password="",d.auth&&(s=d.auth.split(":"),d.username=s[0]||"",d.password=s[1]||""),d.origin=d.protocol&&d.host&&"file:"!==d.protocol?d.protocol+"//"+d.host:"null",d.href=d.toString()}var g=i(130),m=i(131),n=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,v=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],o={hash:1,query:1};_.prototype={set:function(e,t,n){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||m.parse)(t)),i[e]=t;break;case"port":i[e]=t,g(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(t){var r="pathname"===e?"/":"#";i[e]=t.charAt(0)!==r?r+t:t}else i[e]=t;break;default:i[e]=t}for(var a=0;a<v.length;a++){var s=v[a];s[4]&&(i[s[1]]=i[s[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=m.stringify);var t,n=this,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var r=i+(n.slashes?"//":"");return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(r+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(r+=n.hash),r}},_.extractProtocol=p,_.location=f,_.qs=m,e.exports=_}).call(this,i(61))},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(31),a=(i=r)&&i.__esModule?i:{default:i};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,a.default)(t))&&"function"!=typeof t?e:t}},function(e,t,i){var r=i(9),a=i(140),s=i(59),o=i(57)("IE_PROTO"),l=function(){},u=function(){var e,t=i(52)("iframe"),n=s.length;for(t.style.display="none",i(93).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[s[n]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(l.prototype=r(e),n=new l,l.prototype=null,n[o]=e):n=u(),void 0===t?n:a(n,t)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(151)),a=i(n(155)),s=i(n(31));t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,s.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){}},function(e,t,n){var r=n(27),a=n(6)("toStringTag"),s="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:s?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n){"use strict";function i(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,t,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,i||e,r),s=f?f+t:t;return e.Dt[s]?e.Dt[s].fn?e.Dt[s]=[e.Dt[s],a]:e.Dt[s].push(a):(e.Dt[s]=a,e.Nt++),e}function u(e,t){0==--e.Nt?e.Dt=new i:delete e.Dt[t]}function a(){this.Dt=new i,this.Nt=0}var s=Object.prototype.hasOwnProperty,f="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(f=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this.Nt)return n;for(t in e=this.Dt)s.call(e,t)&&n.push(f?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var t=f?f+e:e,n=this.Dt[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,a=new Array(r);i<r;i++)a[i]=n[i].fn;return a},a.prototype.listenerCount=function(e){var t=f?f+e:e,n=this.Dt[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,r,a){var s=f?f+e:e;if(!this.Dt[s])return!1;var o,l,u=this.Dt[s],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,r),!0;case 6:return u.fn.call(u.context,t,n,i,r,a),!0}for(l=1,o=new Array(c-1);l<c;l++)o[l-1]=arguments[l];u.fn.apply(u.context,o)}else{var d,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!o)for(d=1,o=new Array(c-1);d<c;d++)o[d-1]=arguments[d];u[l].fn.apply(u[l].context,o)}}return!0},a.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,n,i){var r=f?f+e:e;if(!this.Dt[r])return this;if(!t)return u(this,r),this;var a=this.Dt[r];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||u(this,r);else{for(var s=0,o=[],l=a.length;s<l;s++)(a[s].fn!==t||i&&!a[s].once||n&&a[s].context!==n)&&o.push(a[s]);o.length?this.Dt[r]=1===o.length?o[0]:o:u(this,r)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=f?f+e:e,this.Dt[t]&&u(this,t)):(this.Dt=new i,this.Nt=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=f,a.EventEmitter=a,e.exports=a},function(e,t,n){e.exports={default:n(185),__esModule:!0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(197)),r=i(n(0)),o=i(n(105)),l=i(n(19)),u=i(n(202)),c=i(n(210)),d=i(n(211)),h=n(50),f=n(44),a=function(){function n(e,t){(0,r.default)(this,n),this.jt=e,this.kt=t}return n.prototype.getRequest=function(t,n,i,e){var r=this,a=function(){var e=o.default.merge({responseType:l.default.ResponseTypes.JSON,validStatusCodes:[].concat((0,s.default)((0,h.range)(200,206)),[304]),timeout:0,withCredentials:!1,headers:{},events:{onprogress:f.noop}},i);return new u.default(t,n,e,r.jt,r.kt.CDN_ABORT_ERROR_TIME_THRESHOLD)};if(e){if(e.MIN_FACTOR)return new c.default(a(),e);if(e.RETRY)return new d.default(a(),e);throw new Error("Unsupported retryConfig")}return a()},n}();t.default=a,e.exports=t.default},function(e,t,n){e.exports={default:n(203),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toDecimal=function(e,t){return parseFloat(e.toFixed(t))},t.range=function(e,t){for(var n=[],i=e<=t?1:-1,r=Math.min(e*i,t*i),a=Math.max(e*i,t*i),s=r;s<=a;s++)n.push(s*i);return n},t.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},t.randomInRange=function(e,t){return Math.random()*(t-e)+e}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(1)),s={IDLE:"idle",ARMED:"armed",TRIGGERED:"triggered",DISPOSED:"disposed"},o=function(){function t(e){(0,r.default)(this,t),this.Lt="idle",this.jt=e}return t.prototype.isConditionMet=function(){return!1},t.prototype.arm=function(){if("idle"!==this.Lt&&"triggered"!==this.Lt)throw new Error("Attempt to arm the trigger that is neither idle nor triggered.");this.Pt(),this.Lt="armed",this.checkTrigger()},t.prototype.Pt=function(){},t.prototype.checkTrigger=function(){"armed"===this.Lt&&this.isConditionMet()&&(this.Lt="triggered",this.jt.emit(a.default.DNA_CLIENT_LOAD_CONDITION_REACHED))},t.prototype.dispose=function(){this.Lt="disposed",this.jt=null},t}();o.States=s,t.default=o,e.exports=t.default},function(e,t,n){var i=n(7),r=n(5).document,a=i(r)&&i(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},function(e,t,n){var r=n(7);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(27);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?i:n)(e)}},function(e,t,n){var i=n(58)("keys"),r=n(38);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(2),r=n(5),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(28)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),a=(i=r)&&i.__esModule?i:{default:i};t.default=(0,a.default)({DASH:"dash",HLS:"hls",SMOOTH:"smooth",UNKNNOWN:"unknown"}),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),a=(i=r)&&i.__esModule?i:{default:i};t.default=(0,a.default)({MANIFEST:"manifest",MEDIA_SEGMENT:"mediaSegment",INIT_SEGMENT:"initSegment",OTHER:"other"}),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),a=(i=r)&&i.__esModule?i:{default:i};t.default=(0,a.default)({EMERGENCY_TRACK_SWITCH:"onEmergencyTrackSwitch",PLAYBACK_ERROR:"onPlaybackError",TRACK_SWITCH:"onTrackSwitch",TRACK_CHANGE_EVENT:"onTrackChange"}),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(3)),s=function(){function i(e,t,n){(0,r.default)(this,i),this.Ut=e,this.Ft=t,this.Bt=n}return(0,a.default)(i,[{key:"message",get:function(){return this.Ut}},{key:"status",get:function(){return this.Ft}},{key:"readyState",get:function(){return this.Bt}}]),i}();t.default=s,e.exports=t.default},function(e,t,n){var i=n(133),r=n(134),a=r;a.v1=i,a.v4=r,e.exports=a},function(e,t,n){"use strict";var E=n(28),y=n(4),T=n(92),A=n(14),S=n(22),R=n(139),b=n(32),I=n(141),C=n(6)("iterator"),P=!([].keys&&"next"in[].keys()),w=function(){return this};e.exports=function(e,t,n,i,r,a,s){R(n,t,i);var o,l,u,c=function(e){if(!P&&e in p)return p[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},d=t+" Iterator",h="values"==r,f=!1,p=e.prototype,_=p[C]||p["@@iterator"]||r&&p[r],g=_||c(r),m=r?h?c("entries"):g:void 0,v="Array"==t&&p.entries||_;if(v&&(u=I(v.call(new e)))!==Object.prototype&&u.next&&(b(u,d,!0),E||"function"==typeof u[C]||A(u,C,w)),h&&_&&"values"!==_.name&&(f=!0,g=function(){return _.call(this)}),E&&!s||!P&&!f&&p[C]||A(p,C,g),S[t]=g,S[d]=w,r)if(o={values:h?g:c("values"),keys:a?g:c("keys"),entries:m},s)for(l in o)l in p||T(p,l,o[l]);else y(y.P+y.F*(P||f),t,o);return o}},function(e,t,n){t.f=n(6)},function(e,t,n){var i=n(5),r=n(2),a=n(28),s=n(68),o=n(8).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=a?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},function(e,t){},function(e,t,n){var i=n(45),r=n(6)("iterator"),a=n(22);e.exports=n(2).getIteratorMethod=function(e){if(null!=e)return e[r]||e["@@iterator"]||a[i(e)]}},function(e,t,n){e.exports={default:n(166),__esModule:!0}},function(e,t,n){var r=n(14);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={WEB_DESKTOP:"web-desktop",WEB_MOBILE:"web-mobile",ANDROID:"android",IOS:"ios",CHROMECAST:"chromecast",ANDROID_WEBVIEW:"android-webview",UNKNOWN_NATIVE:"unknown-native",UNKNOWN:"unknown",LG_WEB:"lg-web",DESKTOP_ELECTRON:"desktop-electron"},e.exports=t.default},function(e,t,n){"use strict";function i(e){var n,i;this.promise=new e(function(e,t){if(void 0!==n||void 0!==i)throw TypeError("Bad Promise constructor");n=e,i=t}),this.resolve=r(n),this.reject=r(i)}var r=n(25);e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),r=i(n(3)),a=function(){function a(e,t,n,i,r){(0,s.default)(this,a),this.xt=e,this.Gt=t,this.Ht=n,this.Vt=i,this.Wt=r}return(0,r.default)(a,[{key:"url",get:function(){return this.Wt}},{key:"requestStats",get:function(){return{startTimestamp:this.xt,firstByteReceivedTimestamp:this.Gt,endTimestamp:this.Ht,bytesReceived:this.Vt}}}]),a}();t.default=a,e.exports=t.default},function(e,t,n){e.exports=!n(10)&&!n(15)(function(){return 7!=Object.defineProperty(n(52)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var s=n(16),o=n(17),l=n(121)(!1),u=n(57)("IE_PROTO");e.exports=function(e,t){var n,i=o(e),r=0,a=[];for(n in i)n!=u&&s(i,n)&&a.push(n);for(;t.length>r;)s(i,n=t[r++])&&(~l(a,n)||a.push(n));return a}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(81),a=(i=r)&&i.__esModule?i:{default:i};t.default=function(e,t,n){return t in e?(0,a.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){e.exports={default:n(124),__esModule:!0}},function(k,e,t){"use strict";(function(e){function s(e){return decodeURIComponent(e.replace(/\+/g," "))}function f(e){var t,n=("undefined"!=typeof window?window:void 0!==a?a:"undefined"!=typeof self?self:{}).location||{},i={},r=typeof(e=e||n);if("blob:"===e.protocol)i=new _(unescape(e.pathname),{});else if("string"===r)for(t in i=new _(e,{}),u)delete i[t];else if("object"===r){for(t in e)t in u||(i[t]=e[t]);void 0===i.i&&(i.i=l.test(e.href))}return i}function p(e){var t=n.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",i:!!t[2],s:t[3]}}function _(e,t,n){if(!(this instanceof _))return new _(e,t,n);var i,r,a,s,o,l,u=v.slice(),c=typeof t,d=this,h=0;for("object"!==c&&"string"!==c&&(n=t,t=null),n&&"function"!=typeof n&&(n=m.parse),t=f(t),i=!(r=p(e||"")).protocol&&!r.i,d.i=r.i||i&&t.i,d.protocol=r.protocol||t.protocol||"",e=r.s,r.i||(u[3]=[/(.*)/,"pathname"]);h<u.length;h++)"function"!=typeof(s=u[h])?(a=s[0],l=s[1],a!=a?d[l]=e:"string"==typeof a?~(o=e.indexOf(a))&&(e="number"==typeof s[2]?(d[l]=e.slice(0,o),e.slice(o+s[2])):(d[l]=e.slice(o),e.slice(0,o))):(o=a.exec(e))&&(d[l]=o[1],e=e.slice(0,o.index)),d[l]=d[l]||i&&s[3]&&t[l]||"",s[4]&&(d[l]=d[l].toLowerCase())):e=s(e);n&&(d.t=n(d.t)),i&&t.i&&"/"!==d.pathname.charAt(0)&&(""!==d.pathname||""!==t.pathname)&&(d.pathname=function(e,t){for(var n="/".split("/").slice(0,-1).concat(e.split("/")),i=n.length,r=n[i-1],a=!1,s=0;i--;)"."===n[i]?n.splice(i,1):".."===n[i]?(n.splice(i,1),s++):s&&(0===i&&(a=!0),n.splice(i,1),s--);return a&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(d.pathname,t.pathname)),g(d.port,d.protocol)||(d.host=d.hostname,d.port=""),d.username=d.password="",d.o&&(s=d.o.split(":"),d.username=s[0]||"",d.password=s[1]||""),d.origin=d.protocol&&d.host&&"file:"!==d.protocol?d.protocol+"//"+d.host:"null",d.href=d.toString()}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},g=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},o=Object.prototype.hasOwnProperty,m={stringify:function(e,t){t=t||"";var n,i,r=[];for(i in"string"!=typeof t&&(t="?"),e)o.call(e,i)&&((n=e[i])||null!=n&&!isNaN(n)||(n=""),r.push(encodeURIComponent(i)+"="+encodeURIComponent(n)));return r.length?t+r.join("&"):""},parse:function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,i={};t=n.exec(e);){var r=s(t[1]),a=s(t[2]);r in i||(i[r]=a)}return i}},n=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,l=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,v=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,t:1};_.prototype={set:function(e,t,n){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||m.parse)(t)),i[e]=t;break;case"port":i[e]=t,g(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.i=!n;break;case"pathname":case"hash":if(t){var r="pathname"===e?"/":"#";i[e]=t.charAt(0)!==r?r+t:t}else i[e]=t;break;default:i[e]=t}for(var a=0;a<v.length;a++){var s=v[a];s[4]&&(i[s[1]]=i[s[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=m.stringify);var t,n=this,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var r=i+(n.i?"//":"");return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.host+n.pathname,(t="object"==typeof n.t?e(n.t):n.t)&&(r+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(r+=n.hash),r}},_.u=p,_.location=f,_.h=m;var r,t,c=_,d=function(){function e(e,t){if(t<=0||1<=t)throw new RangeError('"weight" option should be > 0 and < 1: '+t);this.l=e,this.weight=t}return e.prototype.update=function(e){this.l=(1-this.weight)*this.l+this.weight*e},Object.defineProperty(e.prototype,"value",{get:function(){return this.l},enumerable:!0,configurable:!0}),e}(),h=function(){function e(e,t,n){var i=this;this.v=t,this.interfaces=n,this.refresh=function(){i.C*=1-i.v.ERROR_HANDICAP_DECREASE_RATE},this.p=new d(e,this.v.ERROR_RATE_EWMA_WEIGHT),this.C=0,this.v.ENABLE_INITIAL_ERROR_HANDICAP&&this.A(),this.m=this.interfaces.timerFactory.createInterval(this.refresh,1e3)}return e.prototype.dispose=function(){this.m.clear()},e.prototype._=function(){this.p.update(0)},e.prototype.g=function(){this.A(),this.p.update(1)},e.prototype.R=function(){return Math.pow(this.v.ERROR_HANDICAP_BASE,this.C)},Object.defineProperty(e.prototype,"errorRate",{get:function(){return this.p.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorHandicapPower",{get:function(){return this.C},enumerable:!0,configurable:!0}),e.prototype.A=function(){this.C=Math.min(this.C+Math.pow(this.v.ERROR_PERCENTAGE_BASE,100*this.p.value),this.v.ERROR_HANDICAP_POWER_CAP)},e}(),E=function(){function e(e,t,n,i,r){this.v=i,this.interfaces=r,this.S=0,this.O=null,this.T=null,this.I=e,this.D=this.P=t,this.M=new h(n,i,r)}return e.prototype.dispose=function(){this.M.dispose()},e.prototype.update=function(e,t){this.O?this.O.update(e):this.O=new d(e,this.v.TTFB_EWMA_COEFF),this.T?this.T.update(t):this.T=new d(t,this.v.BANDWIDTH_EWMA_COEFF),this.M._()},e.prototype.N=function(e){this.S++;var t=1/this.S;this.D=t*this.P*e+(1-t)*this.D},e.prototype.j=function(){this.M.g()},Object.defineProperty(e.prototype,"ttfb",{get:function(){return this.O?this.O.value:this.I},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bandwidth",{get:function(){return this.T?this.T.value:this.D},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorRate",{get:function(){return this.M.errorRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorHandicap",{get:function(){return this.M.R()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorHandicapPower",{get:function(){return this.M.errorHandicapPower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"L",{get:function(){return this.bandwidth/this.errorHandicap},enumerable:!0,configurable:!0}),e}(),y=function(){function e(){this.requestCount=0,this.errorCount=0,this.downloadedBytes=0,this.downloadedTime=0,this.ttfbSum=0}return e.prototype.U=function(e,t,n){this.requestCount++,this.downloadedBytes+=e,this.downloadedTime+=t,this.ttfbSum+=n},e.prototype.j=function(){this.requestCount++,this.errorCount++},e}(),T=function(){function e(e,t,n){this.v=t,this.interfaces=n,this.q=[],this.H=[],this.id=e.id,this.host=e.host,this.name=e.name,this.businessScore=e.businessScore,this.qosScore=new E(t.DEFAULT_TTFB,e.bandwidth,e.errorRate,t,n),this.stats=new y}return e.prototype.dispose=function(){this.qosScore.dispose()},e.prototype.F=function(e){var t=0,n=e.bytesReceived,i=Math.max(e.firstByteReceivedTimestamp-e.startTimestamp,0),r=Math.max(e.endTimestamp-e.startTimestamp,0);if(0<r&&n>=this.v.BANDWIDTH_MIN_BYTES_THRESHOLD){var a=8*n/r;t=a/this.qosScore.D,this.qosScore.update(i,a)}return this.stats.U(e.bytesReceived,r,i),this.q.push({ts:Date.now(),requestStats:e}),this.q.length>this.v.CDN_REPORT_MAX_LOG_LENGTH&&this.q.shift(),{B:t}},e.prototype.W=function(e){0<e.B&&e.B>=this.v.BANDWIDTH_SCALING_RATIO_THRESHOLD&&this.qosScore.N(e.B)},e.prototype.G=function(e){this.qosScore.j(),this.stats.j(),this.H.push({ts:Date.now(),httpError:e}),this.H.length>this.v.CDN_REPORT_MAX_LOG_LENGTH&&this.H.shift()},e.prototype.k=function(e){var t=new c(e);return t.set("host",this.host),t.href},Object.defineProperty(e.prototype,"L",{get:function(){return this.qosScore.L*this.businessScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"X",{get:function(){return{name:this.name,bandwidth:this.qosScore.bandwidth,businessScore:this.businessScore,requestSuccessTs:this.q.slice(),requestErrorTs:this.H.slice(),debug:{ttfb:this.qosScore.ttfb,errorHandicap:this.qosScore.errorHandicap,errorRate:this.qosScore.errorRate,errorHandicapPower:this.qosScore.errorHandicapPower,qosScore:this.qosScore.L,globalScore:this.L}}},enumerable:!0,configurable:!0}),e}(),A=function(){function e(e){this.v=e,this.switchCount=0,this.riskyCount=0,this.Y=-1}return e.prototype.K=function(e,t){this.Y!==e&&(0<=this.Y&&this.switchCount++,this.Y=e),t[e]<=t.reduce(function(e,t){return Math.max(e,t)})*this.v.RISKY_PICK_SCORE_RATIO_THRESHOLD&&this.riskyCount++},e}(),S=function(){function e(e,t,n){this.v=t,this.Z=new Map;for(var i=0,r=e;i<r.length;i++){var a=r[i];null!==a.host&&this.Z.set(a.host,new T(a,t,n))}this.stats=new A(t)}return e.prototype.dispose=function(){for(var e=0,t=Array.from(this.Z.values());e<t.length;e++)t[e].dispose();this.Z.clear()},e.prototype.$=function(e){return this.Z.get(e)||null},e.prototype.V=function(e){var t=new c(e);return this.$(t.host)},e.prototype.J=function(){var e=this.tt;if(0===e.length)return null;for(var t=Math.random(),n=0;n<e.length&&t>=e[n];)t-=e[n],n++;var i=this.nt.map(function(e){return e.L});return this.stats.K(n,i),this.nt[n]},Object.defineProperty(e.prototype,"nt",{get:function(){return Array.from(this.Z.values())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tt",{get:function(){var t=this,n=this.nt.map(function(e){return e.L}).map(function(e){return Math.pow(e,t.v.CAUTIOUSNESS)}),i=n.reduce(function(e,t){return e+t},0);return n.map(function(e){return i?e/i:1/n.length})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"X",{get:function(){var n=this.tt;return this.nt.map(function(e,t){return i({},e.X,{probability:n[t]})})},enumerable:!0,configurable:!0}),e}(),R=function(){function e(e){void 0===e&&(e=0),this.value=e}return e.prototype.it=function(e){var t=e-this.value;return this.value=e,t},e.prototype.et=function(e){this.value=e},Object.defineProperty(e.prototype,"rt",{get:function(){return this.value},enumerable:!0,configurable:!0}),e}(),b=function(){function e(e){this.st=e,this.downloadedBytes=new R,this.downloadedTime=new R,this.requestCount=new R,this.errorCount=new R,this.ttfbSum=new R}return e.prototype.ot=function(){var e=this.st,t=e.id,n=e.stats;return{id:t,downloadedBytes:this.downloadedBytes.it(n.downloadedBytes),downloadedTime:this.downloadedTime.it(n.downloadedTime),requestCount:this.requestCount.it(n.requestCount),errorCount:this.errorCount.it(n.errorCount),ttfbSum:this.ttfbSum.it(n.ttfbSum)}},e}(),I=function(){function e(e,t){this.ut=e,this.v=t,this.ht=e.nt.map(function(e){return new b(e)})}return e.prototype.ot=function(){return{compass:{cdns:this.ht.map(function(e){return{id:(t=e.ot()).id,bytes:t.downloadedBytes,dTime:t.downloadedTime,sCount:t.requestCount,seCount:t.errorCount,ttfb:t.ttfbSum};var t})}}},e}(),C=function(){function e(e,t){this.ut=e,this.v=t,this.switchCount=new R,this.riskyCount=new R,this.downloadedBytes=new R,this.downloadedTime=new R,this.requestCount=new R,this.errorCount=new R,this.ttfbSum=new R,this.ht=e.nt.map(function(e){return new b(e)})}return e.prototype.ot=function(){var e=this.ct(function(e){return e.stats.downloadedBytes}),t=this.ct(function(e){return e.stats.downloadedTime}),n=this.ct(function(e){return e.stats.requestCount}),i=this.ct(function(e){return e.stats.errorCount}),r=this.ct(function(e){return e.stats.ttfbSum}),a=this.ut.stats;return{compass:{confLabel:this.v.CONF_LABEL,switchCount:this.switchCount.it(a.switchCount),riskyCount:this.riskyCount.it(a.riskyCount),downloadedBytes:this.downloadedBytes.it(e),downloadedTime:this.downloadedTime.it(t),requestCount:this.requestCount.it(n),errorCount:this.errorCount.it(i),ttfbSum:this.ttfbSum.it(r),cdns:this.ht.map(function(e){return e.ot()})}}},e.prototype.ct=function(e){return this.ut.nt.map(e).reduce(function(e,t){return e+t},0)},e}(),P=function(){function e(e,t){this.ut=e,this.v=t}return e.prototype.ot=function(){return{compass:{confLabel:this.v.CONF_LABEL}}},e}(),w=function(){function e(e,t){this.at=new I(e,t),this.ft=new C(e,t),this.lt=new P(e,t)}return e.prototype.dt=function(e){switch(e){case"traffic":return this.at.ot();case"stats":return this.ft.ot();case"control":return this.lt.ot();default:return{}}},e}(),O=function(){function e(e,t,n){var i=this;this.scoreProvider=e,this.interfaces=t,this.v=n,this.ut=null,this.bt=null,this.vt=!1,this.scoreProvider.fetch().then(function(e){i.vt||(i.ut=new S(e,n,t),i.bt=new w(i.ut,n))}).catch(function(e){i.vt||t.errorFunnel.notify("Failed to fetch CDN scores",e.toString())})}return e.prototype.dispose=function(){this.vt=!0,this.ut&&this.ut.dispose(),this.scoreProvider.dispose()},e.prototype.reportCdnSuccess=function(e,t){if(this.ut){var n=this.ut.V(e);if(n)for(var i=n.F(t),r=0,a=this.ut.nt;r<a.length;r++){var s=a[r];s!=n&&s.W(i)}}},e.prototype.reportCdnError=function(e,t){if(this.ut){var n=this.ut.V(e);n&&n.G(t)}},e.prototype.getUpdatedUrl=function(e){if(this.ut){var t=this.ut.J();if(t)return t.k(e)}return e},e.prototype.getAnalytics=function(e){return this.bt?this.bt.dt(e):{}},Object.defineProperty(e.prototype,"stats",{get:function(){return{cdnList:this.ut?this.ut.X:[]}},enumerable:!0,configurable:!0}),e}(),D={CONF_LABEL:"default",CITRIX_API_URL:"//hopx.cedexis.com/zones/1/customers",COMPASS_API_URL:"https://backend.dna-delivery.com/compass/cdns",REQUEST_RETRY:{COMPASS:{TIMEOUT:1e4,MIN_DELAY:3e4,MAX_DELAY:3e5,MIN_FACTOR:2,MAX_FACTOR:2.4},CITRIX:{TIMEOUT:1e4,MIN_DELAY:3e4,MAX_DELAY:3e5,MIN_FACTOR:2,MAX_FACTOR:2.4}},DEFAULT_TTFB:0,DEFAULT_BANDWIDTH:1e5,DEFAULT_ERROR_RATE:0,DEFAULT_BUSINESS_SCORE:1,ERROR_RATE_EWMA_WEIGHT:.01,ERROR_HANDICAP_BASE:10,ERROR_HANDICAP_POWER_CAP:100,ERROR_PERCENTAGE_BASE:2,ERROR_HANDICAP_DECREASE_RATE:.005,ENABLE_INITIAL_ERROR_HANDICAP:!1,TTFB_EWMA_COEFF:.25,BANDWIDTH_EWMA_COEFF:.25,BANDWIDTH_MIN_BYTES_THRESHOLD:4e4,BANDWIDTH_SCALING_RATIO_THRESHOLD:0,CAUTIOUSNESS:3,RISKY_PICK_SCORE_RATIO_THRESHOLD:.5,CDN_REPORT_MAX_LOG_LENGTH:50,CITRIX_ERROR_RATE_SCALING_RATIO:1};(t=r||(r={})).CITRIX="citrix",t.NPAW="npaw",t.DEFAULT="default";var N=function(){function e(e,t,n){var i=e.id,r=e.host,a=e.name,s=e.businessScore,o=e.bandwidth,l=e.errorRate;this.interfaces=n,this.id=i,this.host=this.wt(r),this.name=a,this.businessScore=this.Ct(s,0,1,t.DEFAULT_BUSINESS_SCORE,"business score"),this.bandwidth=this.Ct(o,0,1/0,t.DEFAULT_BANDWIDTH,"bandwidth"),this.errorRate=this.Ct(l,0,1,t.DEFAULT_ERROR_RATE,"errorRate")}return e.prototype.wt=function(e){var t=e;-1===t.indexOf("//")&&(t="//"+t);var n=new c(t);return n.pathname&&"/"!==n.pathname?(this.interfaces.errorFunnel.notifyError(new Error("COMPASS: CDN url '"+e+"' is unsupported. Contains path")),null):n.host||null},e.prototype.Ct=function(e,t,n,i,r){return e<t||n<e?(this.interfaces.errorFunnel.notifyError(new Error("COMPASS: Unexpected value for initial "+r+": "+e)),i):e},e}(),M=function(){function e(e,t,n,i){this.streamrootKey=e,this.pt=t,this.interfaces=n,this.v=i,this.At=null}return e.prototype.fetch=function(){var c=this;return new Promise(function(u,t){var e=c.v.COMPASS_API_URL+"?customerId="+encodeURIComponent(c.streamrootKey)+"&cdnListName="+encodeURIComponent(c.pt),n={timeout:c.v.REQUEST_RETRY.COMPASS.TIMEOUT},i=c.v.REQUEST_RETRY.COMPASS,r=c.interfaces.httpRequestFactory;c.At=r.getRequest("GET",e,n,i),c.At.isStreamroot=!0,c.At.send().then(function(e){for(var t=[],n=0,i=e.cdns;n<i.length;n++){var r=i[n],a=r.id,s=r.url,o=r.name,l=r.businessScore;t.push(new N({id:a,host:s,name:o,businessScore:l,bandwidth:c.v.DEFAULT_BANDWIDTH,errorRate:c.v.DEFAULT_ERROR_RATE},c.v,c.interfaces))}u(t)}).catch(function(e){t(new Error("Request to Compass service failed. Status: "+e.status+" "+e.message))})})},e.prototype.dispose=function(){this.At&&(this.At.abort(),this.At=null)},e}(),L=function(){function e(e,t,n){this.Et=e,this.interfaces=t,this.v=n,this.At=null}return e.prototype._t=function(){return this.v.CITRIX_API_URL+"/"+this.Et.citrixCustomerID+"/apps/"+this.Et.citrixAppID+"/decision"},e.prototype.gt=function(e,t,n){return void 0!==e&&void 0!==e[t]?e[t]:(this.interfaces.errorFunnel.notifyError(new Error("Missing property "+t+" from Citrix API response")),n)},e.prototype.fetch=function(){var p=this;return new Promise(function(f,t){var e=p._t(),n={timeout:p.v.REQUEST_RETRY.CITRIX.TIMEOUT},i=p.v.REQUEST_RETRY.CITRIX,r=p.interfaces.httpRequestFactory;p.At=r.getRequest("GET",e,n,i),p.At.isStreamroot=!0,p.At.send().then(function(e){for(var t=[],n=0,i=e.providers;n<i.length;n++){var r=i[n],a=r.host,s=r.custom,o=r.provider,l=o,u=o,c=p.gt(s,"bandwidth",p.v.DEFAULT_BANDWIDTH),d=parseFloat(p.gt(s,"bizScore",p.v.DEFAULT_BUSINESS_SCORE)),h=p.gt(s,"avail",100*(1-p.v.DEFAULT_ERROR_RATE));t.push(new N({id:l,host:a,name:u,businessScore:d,bandwidth:c,errorRate:(100-h)*p.v.CITRIX_ERROR_RATE_SCALING_RATIO/100},p.v,p.interfaces))}f(t)}).catch(function(e){t(new Error("Request to Citrix service failed. Status: "+e.status+" "+e.message))})})},e.prototype.dispose=function(){this.At&&(this.At.abort(),this.At=null)},e}(),x=function(){function t(){}return Object.defineProperty(t,"version",{get:function(){return"0.2.1"},enumerable:!0,configurable:!0}),t.prototype.streamrootKey=function(e){return this.Rt=e,this},t.prototype.interfaces=function(e){return this.St=i({},e),this},t.prototype.config=function(e){return this.yt=i({},D),e.CONF_LABEL?this.Ot(this.yt,e,"",this.St.errorFunnel):this.St&&this.St.errorFunnel.notify("Missing CONF_LABEL for Compass","Injected conf has no CONF_LABEL parameter."),this},t.prototype.cdnList=function(e){return this.Tt=e,this},t.prototype.scoreProvider=function(e,t){switch(e){case r.CITRIX:this.It=new L(t,this.St,this.yt);break;default:throw new Error("Score provider not implemented")}return this},t.prototype.build=function(){return this.It||(this.It=new M(this.Rt,this.Tt||"default",this.St,this.yt)),new O(this.It,this.St,this.yt)},t.prototype.Ot=function(n,i,r,a){var s=this;Object.keys(i).forEach(function(e){var t=""===r?e:r+"."+e;void 0!==n[e]?"object"!=typeof i[e]||Array.isArray(i[e])?n[e]=i[e]:s.Ot(n[e],i[e],t,a):a&&a.notify("Unknown parameter "+t+" for Compass","Injected parameter "+t+" does not exist in default conf.")})},t.newBuilder=function(e){return new t},t}();k.exports=x}).call(this,t(61))},function(e,t,n){var r=n(4),a=n(2),s=n(15);e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*s(function(){n(1)}),"Object",i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),a=(i=r)&&i.__esModule?i:{default:i};t.default=(0,a.default)({ARRAY_BUFFER:"arraybuffer",TEXT:"text"}),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(24)),r=i(n(0)),c=n(86),d=i(n(1)),h=i(n(63)),a=i(n(19)),f=(i(n(65)),i(n(87)),i(n(88))),s=function(){function n(e,t){(0,r.default)(this,n),this.qt=e,this.zt=t,this.Yt={responseType:t.responseType,withCredentials:t.withCredentials||!1,headers:t.headers||{},events:{onprogress:this.Kt.bind(this)}},this.xt=0,this.Xt=null,this.Qt=0}return n.prototype.fetch=function(s){var o=this;this.$t=s,this.xt=Date.now();var l=this.qt.httpRequestFactory.getRequest(a.default.Methods.GET,this.zt.url,this.Yt);return l.send().then(function(e){o.Jt();var t=e instanceof f.default?e.data.buffer:e,n=t instanceof ArrayBuffer?t.byteLength:t.length,i={timeElapsed:Date.now()-o.xt,latency:o.Qt,lengthComputable:!0,loaded:n,total:n};o.zt.contentType===h.default.MEDIA_SEGMENT&&o.qt.eventBus.emit(d.default.MEDIA_SEGMENT_FETCHED,o.zt,t),s.onSuccess((0,u.default)({},o.zt,{responseURL:l.responseURL}),t,i);var r=o.qt.segmentBaseAdapter;if(null!=r&&t instanceof ArrayBuffer){var a=(0,c.findSidx)(new Uint8Array(t));null!=a&&r.submitIndexSegment(o.zt.url,a)}},function(e){if(s.onError){var t={status:e.status,message:e.message};s.onError(o.zt,t)}}),l},n.prototype.Kt=function(e){if(this.zt&&this.$t){var t=this.zt,n=this.$t;this.Jt();var i={timeElapsed:Date.now()-this.xt,latency:this.Qt,lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total};n.onProgress&&n.onProgress(t,i)}},n.prototype.Jt=function(){null===this.Xt&&(this.Xt=Date.now(),this.Qt=this.Xt-this.xt)},n}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function d(e){for(var t=f[3],n=0,i=0;i<e.length;i++)n+=t*e[i],t/=f[1];return n}function r(e){var t=d(e.subarray(0,4));return 1<t?t:0===t?e.byteLength:null}function a(e){for(var t=e.subarray(4,8),n="",i=0;i<t.length;i++){var r=t[i];if(r<97||122<r)return null;n+=String.fromCharCode(r)}return n}function h(e){var t=r(e),n=a(e);return null!==t&&t<=e.byteLength&&"sidx"===n}Object.defineProperty(t,"__esModule",{value:!0});var f=[1,256,65536,1<<24];t.findSidx=function(e){for(var t=e;0<t.length;){var n=r(t),i=a(t);if(null===n||null===i)break;if(n>e.byteLength)break;if("styp"===i||"moof"===i||"mdat"===i)break;if("sidx"===i)return t;t=t.subarray(n)}return null},t.isSidx=h,t.parse=function(e,t){if(void 0===t&&(t=0),h(e)){var n=8,i=e.subarray(n,n+1)[0];if(n+=8,0<i)throw new Error("64-bit offsets not supported.");var r=d(e.subarray(n,n+4));if(n+=4,0===r)throw new Error("Timescale can not be zero");var a=d(e.subarray(n,n+4))/r;n+=4;var s=t+d(e.subarray(n,n+4));n+=6;var o=function(e){for(var t=f[1],n=0,i=0;i<e.length;i++)n+=t*e[i],t/=f[1];return n}(e.subarray(n,n+2));n+=2;for(var l=[];0<o;){if(n>=e.byteLength)throw new Error("Parsed past end-of-data.");var u=d(e.subarray(n,n+4));n+=4,u&1<<31&&(u&=~(1<<31));var c=d(e.subarray(n,n+4))/r;l.push([s,a,c]),s+=u,a+=c,n+=8,o--}return e.byteLength,l}throw new Error("Input data is not a sidx MP4 box.")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(3)),s=function(){function i(e,t,n){(0,r.default)(this,i),this.Zt=e,this.tn=t,this.nn=n}return(0,a.default)(i,[{key:"lengthComputable",get:function(){return this.Zt}},{key:"loaded",get:function(){return this.tn}},{key:"total",get:function(){return this.nn}}]),i}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(3)),s=function(){function n(e){if((0,r.default)(this,n),"number"==typeof e)this.data=new Uint8Array(e);else{if(!(e instanceof ArrayBuffer))throw new Error(n.ERR_WRONG_PARAM_TYPE);this.data=new Uint8Array(e)}}return n.prototype.getBinaryData=function(e,t){return new n(this.data.slice(e,e+t).buffer)},n.prototype.setBinaryData=function(e,t){if(e){if(t+e.byteLength>this.data.byteLength)throw new RangeError("Trying to write past expected byteLength in setBinaryData");0===t&&e.byteLength===this.data.byteLength?this.data=e.data:this.data.set(e.data,t)}},n.prototype.equals=function(e){return!1},n.prototype.destroy=function(){},(0,a.default)(n,[{key:"byteLength",get:function(){return this.data.byteLength}}]),n}();s.ERR_CANNOT_SET_BYTE_LENGTH="Cannot manually set the byteLength",s.ERR_WRONG_PARAM_TYPE="Wrong parameter in BinaryDataInterface Constructor",t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TIMER_TYPE=t.AbstractTimer=void 0;var r=i(n(0)),a=i(n(3)),s=i(n(66)),o={TIMEOUT:0,INTERVAL:1},l=function(){function i(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o.TIMEOUT;(0,r.default)(this,i),this.in="timer-"+s.default.v4(),this.en=this.in,this.rn=e,this.sn=t,this.un=n,this.hn=n===o.INTERVAL}return i.prototype.clear=function(){throw new Error("Cannot call abstract method")},(0,a.default)(i,[{key:"id",get:function(){return this.in}},{key:"name",set:function(e){this.en=e},get:function(){return this.en}}]),i}();t.AbstractTimer=l,t.TIMER_TYPE=o},function(a,e,t){(function(e){var t,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);t=function(){return n.getRandomValues(i),i}}if(!t){var r=new Array(16);t=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}a.exports=t}).call(this,t(61))},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}},function(e,t,n){e.exports=n(14)},function(e,t,n){var i=n(5).document;e.exports=i&&i.documentElement},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var i=n(27);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(79),r=n(59).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(29),r=n(26),a=n(17),s=n(53),o=n(16),l=n(78),u=Object.getOwnPropertyDescriptor;t.f=n(10)?u:function(e,t){if(e=a(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(o(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){var a=n(9);e.exports=function(e,t,n,i){try{return i?t(a(n)[0],n[1]):t(n)}catch(t){var r=e.return;throw void 0!==r&&a(r.call(e)),t}}},function(e,t,n){var i=n(22),r=n(6)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[r]===e)}},function(e,t,n){"use strict";var i=n(5),r=n(2),a=n(8),s=n(10),o=n(6)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:i[e];s&&t&&!t[o]&&a.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i=n(7);e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){e.exports={default:n(182),__esModule:!0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(0)),s=i(n(3)),o=i(n(46)),l=i(n(104)),u=i(n(106)),c=i(n(193)),d=i(n(196)),h=i(n(48)),f=i(n(212)),p=i(n(213)),_=i(n(214)),g=i(n(215)),m=i(n(112)),v=i(n(217)),E=i(n(219)),y=i(n(220)),T=window.document.currentScript&&window.document.currentScript.src?window.document.currentScript.src:null,r=function(){function r(e,t,n,i){(0,a.default)(this,r),this.peerAgentCounter=0,this.parserAdapter=null,this.streamrootKey=e,this.cn=t,this.eventBus=new o.default,this.environment=new u.default,this.dnaConfig=new d.default(n),this.configManager=new l.default(e,t,this.dnaConfig,i||"",T),this.httpRequestFactory=new h.default(this.eventBus,this.configManager.conf),this.errorFunnel=new c.default(this),this.errorFunnel.setCustomer(this.configManager.getStreamrootKey()),this.errorFunnel.setScriptOrigin(T),this.an=new E.default(this),this.clear()}return r.prototype.dispose=function(){this.networkTypeStats&&this.networkTypeStats.dispose(),this.an.dispose(),this.ln&&this.ln.dispose(),this.configManager.clear()},r.prototype.clear=function(){this.parserAdapter&&delete this.parserAdapter,this.configManager.clear(),this.costStats=new f.default,this.backendStats=new p.default,this.mediaEngineStats&&this.mediaEngineStats.dispose(),this.mediaEngineStats=new _.default(this.eventBus,this.configManager),this.ln&&this.ln.dispose(),this.ln=new y.default(this.cn,this.configManager.conf,this.errorFunnel,this.mediaEngineStats),this.networkTypeStats&&this.networkTypeStats.dispose(),this.networkTypeStats=new v.default(this.eventBus,this.an.currentType),this.bitrateStats&&this.bitrateStats.dispose(),this.bitrateStats=new g.default(this.eventBus,this.configManager),this.transferStats&&this.transferStats.dispose(),this.transferStats=new m.default(this.eventBus),this.segmentBaseAdapter&&(this.segmentBaseAdapter.dispose(),delete this.segmentBaseAdapter)},(0,s.default)(r,[{key:"hasDistributorResponded",get:function(){return this.configManager.hasDistributorResponded()}},{key:"currentNetworkType",get:function(){return this.an.currentType}}]),r}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(47)),l=i(n(31)),r=i(n(24)),u=i(n(0)),a=i(n(40)),c=i(n(187)),d=i(n(105)),h=n(188),f=i(n(62)),p=i(n(189)),_=i(n(190)),s=function(){function s(e,t,n,i,r){(0,u.default)(this,s),this.dn=null,this.vn={},this.wn=e,this.cn=t,this.pn=n,this.bn=this.mn(n),this.En=this.yn(n);var a=t.getMediaEngineName()+" "+t.getMediaEngineVersion();this.gn=a.substring(0,30),this.Tn=i.substring(0,15),this.On=r,this.clear()}return s.prototype.clear=function(){this.An="",this.Mn=null,this.Sn=null,this.Rn=!1,this.Cn=!1,this.Dn=!1,this.conf=d.default.deepCopy(c.default)},s.prototype.setStreamType=function(e){switch(e){case f.default.HLS:this.Nn=f.default.HLS;break;case f.default.DASH:this.Nn=f.default.DASH;break;case f.default.SMOOTH:this.Nn=f.default.SMOOTH;break;default:this.Nn=f.default.UNKNOWN}},s.prototype.setContentUrl=function(e){this.jn=e,this.An=this.In(e),this.Mn=this.kn(e),this.Sn=this.Ln(e)},s.prototype.setIntegrationVersion=function(e){this.Pn=e},s.prototype.setPeerAgentVersion=function(e){this.Un=e},s.prototype.setCompassVersion=function(e){this.Fn=e},s.prototype.setAz=function(e){this.Bn=(0,h.removeTrailingSlash)(e)},s.prototype.setDistributorResponse=function(e){this.xn=e,this.Rn=this.Gn(),this.Cn=this.Hn()},s.prototype.setSiteId=function(e){this.Vn=e},s.prototype.isLive=function(){return this.Dn},s.prototype.isContentActivated=function(){if(this.xn&&this.xn.backendCounts){var e=this.xn.backendCounts,t=e.contentActivated,n=e.usageQuotaReached;return!this.xn.bypassed&&!n&&t}return!1},s.prototype.isRampUpActivated=function(){return this.Rn},s.prototype.isActivated=function(){return this.isContentActivated()&&this.isRampUpActivated()&&!this.conf.QOS_P2P_DISABLED},s.prototype.isCompassPropertyActivated=function(){return!!(this.xn&&this.xn.compass&&this.xn.compass.backendCounts)&&!this.xn.compass.backendCounts.usageQuotaReached},s.prototype.isCompassRampUpActivated=function(){return this.Cn},s.prototype.isCompassActivated=function(){return this.isCompassPropertyActivated()&&this.isCompassRampUpActivated()&&!this.conf.QOS_COMPASS_DISABLED},s.prototype.hasDistributorResponded=function(){return void 0!==this.xn},s.prototype.getActivationStatus=function(){if(void 0===this.xn)return p.default.UNKNOWN;var e=this.xn.backendCounts,t=e.contentActivated,n=e.usageQuotaReached;return this.xn.bypassed?p.default.DEACTIVATED_BY_BYPASS:n?p.default.DEACTIVATED_BY_USAGE_QUOTA:t?this.Rn?this.conf.QOS_P2P_DISABLED?p.default.QOS_TESTER:p.default.ACTIVATED:p.default.DEACTIVATED_BY_RAMP_UP:p.default.DEACTIVATED_BY_CONTENT},s.prototype.getStreamrootKey=function(){return this.wn},s.prototype.getContentId=function(){return this.An},s.prototype.getSiteId=function(){return this.pn.siteId||this.Vn||null},s.prototype.getProperty=function(){return this.Mn||"default"},s.prototype.getCompassProperty=function(){return this.Sn||"default"},s.prototype.getBackendHost=function(){return this.bn},s.prototype.getBackendUrls=function(){return{trackerUrl:this.getTrackerUrl(),signalingUrl:this.getSignalingUrl()}},s.prototype.getPropertyParameters=function(){var e=this.xn.propertyParameters,t=this.getProperty();return(0,r.default)({},e,{requested:t})},s.prototype.getCompassPropertyParameters=function(){var e=(this.xn.compass?this.xn.compass:{}).propertyParameters;return(0,r.default)({},e)},s.prototype.getVersions=function(){return{wrapperVersion:this.Tn,mediaEngineTag:this.gn,streamrooterVersion:"1.4.3",integrationVersion:this.Pn||"",peerAgentVersion:this.Un||"",compassVersion:this.Fn||"",integrationTag:"w"+this.Tn+"-s1.4.3"}},s.prototype.getParserOptions=function(){return{ssaiEnabled:!!this.xn.propertyParameters.ssaiEnabled,ssaiProvider:this.xn.propertyParameters.ssaiProvider}},s.prototype.getHostingOption=function(){return this.pn.libPath?{libPath:this.pn.libPath}:this.pn.libHost?{libHost:this.pn.libHost}:{defaultDnaClientUrl:"https://cdn.streamroot.io/dna-client/1.4.3/dna-client.js"}},s.prototype.getAsyncLoadingOption=function(){return this.En},s.prototype.getDeliveryMethod=function(){return this.On||""},s.prototype.getContentUrl=function(){return this.jn},s.prototype.getStreamType=function(){return this.Nn},s.prototype.setStreamInfo=function(e){this.Dn=e.isLive(),e.getStreamInfo?this.vn=e.getStreamInfo():this.vn={}},s.prototype.getStreamInfo=function(){return this.vn},s.prototype.getAbrStrategy=function(){return this.cn.getPlayerInfo().abrStrategy||"unknown"},s.prototype.getMediaEngineInfo=function(){return{name:this.cn.getMediaEngineName(),version:this.cn.getMediaEngineVersion()}},s.prototype.getPlayerInfo=function(){var e=this.cn.getPlayerInfo().playerInfo;return null!=e&&"object"===(void 0===e?"undefined":(0,l.default)(e))&&"string"==typeof e.name&&"string"==typeof e.version?e:null},s.prototype.getLatency=function(){return this.cn.getLatency()||0},s.prototype.getRouterUrl=function(){return this.Wn("/router/az","https")},s.prototype.getSubnetMatcherUrl=function(){return this.Wn("/subnetMatcher/siteId","https")},s.prototype.getDistributorUrl=function(){return this.qn("distributor","https")},s.prototype.getTrackerUrl=function(){var e=this.xn.backendPaths.trackerPath;return this.qn(e,"https")},s.prototype.getSignalingUrl=function(){var e=this.getPropertyParameters().customSignalingUrl;if(e&&0<e.length){var t=new a.default((0,h.addTrailingSlash)(e),{});return(t=this.zn(t,"wss")).toString()}var n=this.xn.backendPaths.signalingPath;return this.qn(n,"wss")},s.prototype.getAnalyticsUrl=function(){var e=this.xn.backendPaths.klaraPath;return this.qn(e,"https")},s.prototype.injectConf=function(e,t){e.CONF_LABEL?this.Yn(this.conf,e,"",t):t&&t.notify("Missing CONF_LABEL","Injected conf has no CONF_LABEL parameter");var n=this.conf.QOS_REF_PERCENTAGE;n===parseFloat(n)&&100*Math.random()<n&&(this.conf.QOS_P2P_DISABLED=!0);var i=this.conf.QOS_COMPASS_REF_PERCENTAGE;i===parseFloat(i)&&100*Math.random()<i&&(this.conf.QOS_COMPASS_DISABLED=!0);var r=100*Math.random();this.isRampUpActivated()||this.isCompassRampUpActivated()?(this.conf.ANALYTICS.ENABLE_STATS_SENDER=r<=this.conf.ANALYTICS.STATS_SENDER_PERCENTAGE,this.conf.ANALYTICS.ENABLE_CONTROL_SENDER=r<=this.conf.ANALYTICS.CONTROL_SENDER_PERCENTAGE,this.isActivated()&&(this.conf.ANALYTICS.ENABLE_CONNECTIONS_SENDER=r<=this.conf.ANALYTICS.CONNECTIONS_SENDER_PERCENTAGE)):(this.conf.ANALYTICS.ENABLE_STATS_SENDER=r<=this.conf.ANALYTICS.RAMP_UP_STATS_SENDER_PERCENTAGE,this.conf.ANALYTICS.ENABLE_CONTROL_SENDER=r<=this.conf.ANALYTICS.RAMP_UP_CONTROL_SENDER_PERCENTAGE)},s.prototype.mn=function(e){var t=void 0;return-1!==(t=e.backendHost?e.backendHost:e.backendUrl?e.backendUrl:"backend.dna-delivery.com").indexOf("//")?new a.default(t).host:(0,h.removeTrailingSlash)(t)},s.prototype.yn=function(e){return null!==e.fragmentsFetchedBeforeLoad&&0!==e.fragmentsFetchedBeforeLoad?_.default.SEGMENT_TRIGGER:null!==e.secondsPrebufferedBeforeLoad?_.default.BUFFER_TRIGGER:_.default.IMMEDIATE_TRIGGER},s.prototype.zn=function(e,t){return e.protocol=e.protocol||t,e.slashes=!0,e},s.prototype.Wn=function(e,t){var n=void 0;return n="/"===e.charAt(0)?new a.default(""+this.bn+e,{}):-1<this.Bn.indexOf("//")?new a.default(this.Bn+"/"+e,{}):new a.default(""+this.bn+this.Bn+"/"+e,{}),(n=this.zn(n,t)).toString()},s.prototype.qn=function(e,t){return this.Wn((0,h.addTrailingSlash)(e),t)},s.prototype.In=function(e){if(this.pn.contentIdGenerator){var t=this.pn.contentIdGenerator(e);if("string"!=typeof t||""===t)throw new Error("DnaConfig.contentIdGenerator should return a non-empty string");return t}return this.Kn(e)},s.prototype.Kn=function(e){var t=new a.default(e);return t.host+t.pathname},s.prototype.kn=function(e){if(this.pn.property){if("string"==typeof this.pn.property)return this.pn.property;var t=this.pn.property(e);if("string"!=typeof t||""===t)throw new Error("DnaConfig.property should return a non-empty string");return t}return null},s.prototype.Ln=function(e){if(this.pn.compassProperty){if("string"==typeof this.pn.compassProperty)return this.pn.compassProperty;var t=this.pn.compassProperty(e);if("string"!=typeof t||""===t)throw new Error("DnaConfig.property should return a non-empty string");return t}return null},s.prototype.Gn=function(){if(this.isContentActivated()&&this.xn&&this.xn.propertyParameters){var e=this.xn.propertyParameters.activationRatio;return Math.random()<e}return!1},s.prototype.Hn=function(){if(this.isCompassPropertyActivated()&&this.xn&&this.xn.compass&&this.xn.compass.propertyParameters){var e=this.xn.compass.propertyParameters.activationRatio;return Math.random()<e}return!1},s.prototype.Yn=function(n,i,r,a){var s=this;(0,o.default)(i).forEach(function(e){var t=""===r?e:r+"."+e;void 0!==n[e]?"object"!==(0,l.default)(i[e])||Array.isArray(i[e])?n[e]=i[e]:s.Yn(n[e],i[e],t,a):a&&a.notify("Unknown parameter "+t,"Injected parameter "+t+" does not exist in default conf.")})},s}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(18)),s=i(n(47)),a=i(n(36));t.default={merge:function(e,t){return(0,a.default)(e,t)},omit:function(e,t){for(var n={},i=(0,s.default)(e),r=0;r<i.length;r++){var a=i[r];t!==a&&(n[a]=e[a])}return n},deepCopy:function(e){return JSON.parse((0,r.default)(e))}},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(191)),s=i(n(75)),o=function(){function t(){(0,r.default)(this,t);var e=window&&window.navigator?window.navigator.userAgent:"";this.Xn=(new a.default).setUA(e).getResult()}return t.prototype.getPlatform=function(){var e=this.Xn,t=e.ua,n=e.device,i=e.os;return t?-1!==t.indexOf("CrKey")?s.default.CHROMECAST:/electron\//i.test(t)?s.default.DESKTOP_ELECTRON:/web0s; linux\/smarttv/i.test(t)?s.default.LG_WEB:"mobile"===n.type||"tablet"===n.type||"console"===n.type||"Android"===i.name||"iOS"===i.name?this.Qn()?s.default.ANDROID_WEBVIEW:s.default.WEB_MOBILE:s.default.WEB_DESKTOP:s.default.UNKNOWN},t.prototype.getJavaScriptEngine=function(){return this.Xn.browser},t.prototype.getOperatingSystem=function(){return this.Xn.os},t.prototype.getBrowserName=function(){return this.Xn.browser.name},t.prototype.getBrowserVersion=function(){return this.Xn.browser.version},t.prototype.getOperatingSystemName=function(){return this.Xn.os.name},t.prototype.Qn=function(){var e=this.Xn.ua;if(/Android.* Chrome\/[0-9.]+ /.test(e)){if(-1!==e.indexOf("wv"))return!0;if(/ Version\/[0-9]+\.[0.9]+ /.test(e))return!0}return!1},t}();t.default=o,e.exports=t.default},function(e,t,n){var a=n(6)("iterator"),s=!1;try{var i=[7][a]();i.return=function(){s=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!s)return!1;var n=!1;try{var i=[7],r=i[a]();r.next=function(){return{done:n=!0}},i[a]=function(){return r},e(i)}catch(e){}return n}},function(e,t,n){var r=n(9),a=n(25),s=n(6)("species");e.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||null==(n=r(i)[s])?t:a(n)}},function(e,t,n){var i,r,a,s=n(13),o=n(205),l=n(93),u=n(52),c=n(5),d=c.process,h=c.setImmediate,f=c.clearImmediate,p=c.MessageChannel,_=c.Dispatch,g=0,m={},v=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},E=function(e){v.call(e.data)};h&&f||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++g]=function(){o("function"==typeof e?e:Function(e),t)},i(g),g},f=function(e){delete m[e]},"process"==n(27)(d)?i=function(e){d.nextTick(s(v,e,1))}:_&&_.now?i=function(e){_.now(s(v,e,1))}:p?(a=(r=new p).port2,r.port1.onmessage=E,i=s(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",E,!1)):i="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(s(v,e,1),0)}),e.exports={set:h,clear:f}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var i=n(9),r=n(7),a=n(76);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(3)),s=i(n(1));i(n(77));var o=function(){function t(e){var n=this;(0,r.default)(this,t),this.$n=0,this.Jn=0,this.Zn=function(e){var t=e.requestStats;n.$n+=t.bytesReceived,n.Jn+=Math.max(t.endTimestamp-t.startTimestamp,0)},this.jt=e,this.jt.on(s.default.CDN_TIMING_EVENT,this.Zn)}return t.prototype.dispose=function(){this.jt.removeListener(s.default.CDN_TIMING_EVENT,this.Zn)},(0,a.default)(t,[{key:"cdnDownloaded",get:function(){return this.$n}},{key:"cdnDownloadedTime",get:function(){return this.Jn}}]),t}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),a=(i=r)&&i.__esModule?i:{default:i};t.default=(0,a.default)({WIFI_AND_ETHERNET:"wifiEthernet",CELLULAR_AND_OTHERS:"cellularOther",UNKNOWN:"unknown",NONE:"none"}),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),a=(i=r)&&i.__esModule?i:{default:i};t.default=(0,a.default)({STREAMROOTER:"web-sdk",PEERAGENT:"peer-agent",COMPASS:"compass"}),e.exports=t.default},function(e,t,n){"use strict";function i(t,e){Object.defineProperty(e,"dnaDownloadEnabled",{get:function(){return t.dnaDownloadAllowed},set:function(e){t.dnaDownloadAllowed=e}}),Object.defineProperty(e,"dnaUploadEnabled",{get:function(){return t.dnaUploadAllowed},set:function(e){t.dnaUploadAllowed=e}}),Object.defineProperty(e,"dnaDownloadAllowed",{get:function(){return t.dnaDownloadAllowed},set:function(e){t.dnaDownloadAllowed=e}}),Object.defineProperty(e,"dnaUploadAllowed",{get:function(){return t.dnaUploadAllowed},set:function(e){t.dnaUploadAllowed=e}}),Object.defineProperty(e,"dnaUploadOnWifiEthernetAllowed",{get:function(){return t.dnaUploadOnWifiEthernetAllowed},set:function(e){t.dnaUploadOnWifiEthernetAllowed=e}}),Object.defineProperty(e,"dnaDownloadOnWifiEthernetAllowed",{get:function(){return t.dnaDownloadOnWifiEthernetAllowed},set:function(e){t.dnaDownloadOnWifiEthernetAllowed=e}}),Object.defineProperty(e,"dnaUploadOnCellularAllowed",{get:function(){return t.dnaUploadOnCellularAllowed},set:function(e){t.dnaUploadOnCellularAllowed=e}}),Object.defineProperty(e,"dnaDownloadOnCellularAllowed",{get:function(){return t.dnaDownloadOnCellularAllowed},set:function(e){t.dnaDownloadOnCellularAllowed=e}}),Object.defineProperty(e,"transferStatus",{get:function(){return t.transferStatus}}),Object.defineProperty(e,"id",{get:function(){return t.id}}),Object.defineProperty(e,"stats",{get:function(){return t.stats}}),Object.defineProperty(e,"status",{get:function(){return t.status}}),Object.defineProperty(e,"versions",{get:function(){return t.versions}})}Object.defineProperty(t,"__esModule",{value:!0}),t.mapPublicAPI=i,t.mapIntegrationInterface=function(e,t){i(e,t),t.attachMediaElement=e.attachMediaElement.bind(e),t.detachMediaElement=e.detachMediaElement.bind(e)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(117)),s=n(115),o=function e(){(0,r.default)(this,e);var t=function(e,t){function n(){e.apply(this,t)}return n.prototype=e.prototype,new n}(a.default,arguments);this.load=t.load.bind(t),this.fetch=t.fetch.bind(t),this.stop=t.stop.bind(t),this.destroy=t.destroy.bind(t),this.attachMediaElement=t.attachMediaElement.bind(t),this.detachMediaElement=t.detachMediaElement.bind(t),this.mapIntegrationInterface=s.mapIntegrationInterface.bind(this,t),Object.defineProperty(this,"abr",{get:function(){return t.abr}}),(0,s.mapPublicAPI)(t,this)};o.StreamTypes=a.default.StreamTypes,o.ContentTypes=a.default.ContentTypes,o.ResponseTypes=a.default.ResponseTypes,o.Events=a.default.Events,o.Errors=a.default.Errors,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(24)),s=i(n(18)),o=i(n(80)),l=i(n(0)),u=i(n(3)),c=i(n(82)),d=i(n(1)),a=i(n(62)),h=i(n(63)),f=i(n(84)),p=i(n(64)),_=i(n(128)),g=i(n(129)),m=i(n(180)),v=n(181),E=i(n(103)),y=i(n(85)),T=i(n(221)),A=i(n(226)),S=i(n(227)),R=i(n(228)),b=i(n(229)),I=i(n(240)),C=n(244),P=n(249),w=n(251),O=n(252),D=i(n(253)),N=i(n(114));(0,w.setupNamespace)();var M=function(){function a(e,t,n,i){var r=this;if((0,l.default)(this,a),this.ti=null,this.ni=null,this.ii=null,this.ei=null,this.ri=null,this.si=null,this.dn=null,this.oi=null,this.tn=!1,this.ui=!1,this.hi=0,this.ci=!0,this.ai=!0,this.fi=null,this.li=null,this.di=null,this.vi=null,this.wi=null,this.pi=function(){r.si&&r.si.setBackendUrlsAndConnect(r.qt.configManager.getBackendUrls())},this.bi=function(){var e=!1;r.qt.configManager.isActivated()?(r.ri?r.mi():r.ii&&r.ii.arm(),e=!0):(r.ui=!0,r.Ei.clear()),r.qt.configManager.isCompassActivated()&&(r.qt.configManager.setCompassVersion(c.default.version),r.qt.eventBus.emit(d.default.COMPASS_LOADED),e=!0),e||r.yi()},this.gi=function(){r.Ti(),r.ri||r.ei?r.qt.errorFunnel.notifyError(new Error("Trying to load dna-client while either dnaClient or asyncLoader are already present")):(r.ei=new A.default(r.qt),r.ei.load())},this.Oi=function(e){r.ri=e,r.qt.configManager.setPeerAgentVersion(r.ri.peerAgentVersion),r.mi()},this.Ai=function(e){if(!r.ui){if(r.dn){if(r.dn.manifestUrl!==e.manifestUrl)return r.qt.errorFunnel.notify("Unexpected Media Map change","New Media Map created while Streamrooter was still running with a previous one, possibly new content downloaded without calling load first."),void r.stop();r.qt.errorFunnel.notify("Possible media engine error recovery","Media Map with same manifest URL created while Streamrooter was still running with a previous one"),r.Mi(),r.dn=null}r.dn=e,r.qt.configManager.setStreamInfo(e),r.qt.eventBus.emit(d.default.MEDIA_MAP_PROCESSED)}},this.Si=function(e){if(e[N.default.PEERAGENT]){var t=e[N.default.PEERAGENT];r.Ri(t.config,t.isClustered)}e[N.default.COMPASS]&&r.Ci(e[N.default.COMPASS].config)},this.Di=function(e){if(e&&r.dn){var t=r.dn.getTrackViewByIdentifier(e);t?r.cn.emit(p.default.TRACK_CHANGE_EVENT,(0,o.default)({},t.type,t)):r.qt.errorFunnel.notify("TrackView not found in Media Map","Unable to find TrackView with identifier="+(0,s.default)(e))}},this.Ni=function(){r.si&&(r.si.networkType=r.qt.currentNetworkType)},this.ji=function(){r.si&&(r.si.dnaDownloadAllowed=r.ci,r.si.dnaUploadAllowed=r.ai,null!==r.fi&&(r.si.dnaDownloadOnWifiEthernetAllowed=r.fi),null!==r.li&&(r.si.dnaUploadOnWifiEthernetAllowed=r.li),null!==r.di&&(r.si.dnaDownloadOnCellularAllowed=r.di),null!==r.vi&&(r.si.dnaUploadOnCellularAllowed=r.vi))},this.wn=e,this.cn=t,i&&"string"!=typeof i)throw new TypeError("wrapperVersion should be a string");this.qt=new E.default(e,t,n,i),this.Ei=new g.default(this.qt),this.Ii=new S.default,this.ki=new I.default(this.qt,this.cn),this.qt.eventBus.on(d.default.DISTRIBUTOR_ANSWER_HANDLED,this.bi),this.qt.eventBus.on(d.default.MODULE_CONF_INJECTED,this.Si),this.qt.eventBus.on(d.default.DNA_CLIENT_LOAD_CONDITION_REACHED,this.gi),this.qt.eventBus.on(d.default.DNA_CLIENT_LOADED,this.Oi),this.qt.eventBus.on(d.default.MEDIA_MAP_CREATED,this.Ai),this.qt.eventBus.on(d.default.BACKEND_URLS_CHANGED,this.pi),this.qt.eventBus.on(d.default.NETWORK_TYPE_CHANGED,this.Ni),this.cn.on(p.default.TRACK_SWITCH,this.Di),this.Li=(0,P.abrInterfaceGenerator)(this),this.ii=(0,C.createTrigger)(this.qt.eventBus,this.qt.dnaConfig),(0,w.addToStreamrootInstances)(this)}return a.prototype.load=function(e,t){if(this.tn&&this.stop(),(0,O.isP2PEnabled)(this.qt.environment)){this.tn=!0,this.ui=!1,this.jn=e,this.Nn=t,this.hi=0,this.qt.configManager.setContentUrl(e),this.qt.configManager.setStreamType(t);var n=this.qt.configManager.getContentId();this.qt.errorFunnel.setMetadata({stream:n}),this.ni=new T.default(this.qt),this.ni.call()}},a.prototype.fetch=function(e,t){(0,v.assertContentAndResponseType)(e);var n=this.qt.configManager;if(this.tn){var i=null;switch(e.contentType){case h.default.MEDIA_SEGMENT:if(this.qt.eventBus.emit(d.default.MEDIA_SEGMENT_REQUESTED),this.dn){var r=this.dn,a=e.headers&&e.headers.Range?e.headers.Range:void 0;(i=r.getSegmentViewByUrl(e.url,a))&&this.qt.eventBus.emit(d.default.MEDIA_SEGMENT_CONSUMED,i)}this.wi&&(e.url=this.wi.getUpdatedUrl(e.url));break;case h.default.INIT_SEGMENT:this.wi&&(e.url=this.wi.getUpdatedUrl(e.url));break;case h.default.MANIFEST:this.wi&&n.conf.COMPASS_ENABLE_MANIFEST_URL&&(e.url=this.wi.getUpdatedUrl(e.url));break;default:this.wi&&n.conf.COMPASS_ENABLE_OTHER_URL&&(e.url=this.wi.getUpdatedUrl(e.url))}if(!this.ui){if(e.contentType===h.default.MANIFEST)return this.Ei.fetchManifest(e,t);if(e.contentType===h.default.MEDIA_SEGMENT){var s=this.si;if(s){if(i){var o=new m.default(e,t);return s.getSegment(e,o,i)}this.qt.errorFunnel.notify("Falling back to CDN download","Segment view not found in Media Map")}}}return new y.default(this.qt,e).fetch(t)}return this.qt.errorFunnel.notify("Unexpected call to fetch","fetch() was called before load()"),new y.default(this.qt,e).fetch(t)},a.prototype.attachMediaElement=function(e){e!==this.oi&&(this.oi=e,this.si&&(this.si.mediaElement=e),this.qt.eventBus.emit(d.default.MEDIA_ELEMENT_ATTACHED,e))},a.prototype.detachMediaElement=function(){null!==this.oi&&(this.oi=null,this.si&&(this.si.mediaElement=null),this.qt.eventBus.emit(d.default.MEDIA_ELEMENT_DETACHED))},a.prototype.Ti=function(){this.ii&&(this.ii.dispose(),this.ii=null)},a.prototype.Pi=function(){this.ei&&(this.ei.dispose(),this.ei=null),this.ri=null},a.prototype.Mi=function(){var e=this.si;e?(this.Ii.incrementHistorical(e.stats),this.ti&&this.ti.detachProvider(e),e.dispose(),this.si=null):this.Ii.incrementHistorical(new R.default(this.qt.transferStats))},a.prototype.Ui=function(){this.wi&&(this.ti&&this.ti.detachProvider(this.wi),this.wi.dispose(),this.wi=null)},a.prototype.stop=function(){this.tn=!1,this.dn=null,this.Ei.clear(),this.qt.clear(),this.Mi(),this.Ui(),this.ni&&(this.ni.dispose(),this.ni=null),this.ti&&(this.ti.dispose(),this.ti=null),this.qt.eventBus.emit(d.default.STOPPED)},a.prototype.destroy=function(){(0,w.removeFromStreamrootInstances)(this),this.tn&&this.stop(),this.Ti(),this.Pi(),this.ki.dispose(),this.qt.eventBus.removeListener(d.default.DISTRIBUTOR_ANSWER_HANDLED,this.bi),this.qt.eventBus.removeListener(d.default.MODULE_CONF_INJECTED,this.Si),this.qt.eventBus.removeListener(d.default.DNA_CLIENT_LOAD_CONDITION_REACHED,this.gi),this.qt.eventBus.removeListener(d.default.DNA_CLIENT_LOADED,this.Oi),this.qt.eventBus.removeListener(d.default.MEDIA_MAP_CREATED,this.Ai),this.qt.eventBus.removeListener(d.default.BACKEND_URLS_CHANGED,this.pi),this.qt.eventBus.removeListener(d.default.NETWORK_TYPE_CHANGED,this.Ni),this.cn.removeListener(p.default.TRACK_SWITCH,this.Di),this.qt.dispose()},a.prototype.yi=function(){this.ti||(this.ti=new b.default(this.qt,this.ki),this.ti.sendSupportPayload()),this.ni&&(this.ni.dispose(),this.ni=null)},a.prototype.mi=function(){if(this.ri){var e=this.ri.createParserAdapter(this.Nn,this.qt.configManager.getParserOptions());this.qt.parserAdapter=e,this.Ei.setParserAdapter(e,this.Nn),this.qt.configManager.setIntegrationVersion(e.integrationVersion)}else this.qt.errorFunnel.notifyError(new Error("DNA Client must be loaded before ParserAdapter is created"))},a.prototype.Ri=function(e,t){var n=this.dn,i=this.ri,r=this.qt.parserAdapter;if(n)if(i)if(r){var a={streamrootKey:this.wn,streamType:this.Nn,contentId:this.qt.configManager.getContentId(),backendUrls:this.qt.configManager.getBackendUrls(),siteId:this.qt.configManager.getSiteId(),propertyParameters:this.qt.configManager.getPropertyParameters(),versions:this.qt.configManager.getVersions(),injectedConf:{isClustered:t,config:e},interfaces:{playerInterface:this.cn,mediaMap:n,environment:this.qt.environment,errorFunnel:this.qt.errorFunnel,qosAnalytics:this.ki,externalEventBus:this.qt.eventBus,SegmentViewClass:r.SegmentView,httpRequestFactory:this.qt.httpRequestFactory},networkType:this.qt.currentNetworkType};this.si&&this.Mi(),this.si=i.createPeerAgent(a),this.oi&&(this.si.mediaElement=this.oi),this.Fi(this.si),this.ji(),this.qt.peerAgentCounter++}else this.qt.errorFunnel.notifyError(new Error("ParserAdapter must be created before PeerAgent"));else this.qt.errorFunnel.notifyError(new Error("DNA Client must be loaded before PeerAgent is created"));else this.qt.errorFunnel.notifyError(new Error("MediaMap must be created before PeerAgent"))},a.prototype.Ci=function(e){this.wi&&this.Ui(),this.wi=new D.default(this.qt,e),this.Fi(this.wi)},a.prototype.Fi=function(e){this.ti||(this.ti=new b.default(this.qt,this.ki)),this.ti.attachProvider(e)},(0,u.default)(a,[{key:"peerAgent",get:function(){return this.si}},{key:"abr",get:function(){return new this.Li}},{key:"dnaDownloadAllowed",get:function(){return this.ci},set:function(e){this.ci=e,this.ji()}},{key:"dnaUploadAllowed",get:function(){return this.ai},set:function(e){this.ai=e,this.ji()}},{key:"dnaDownloadOnWifiEthernetAllowed",get:function(){return null!==this.fi?this.fi:this.qt.hasDistributorResponded?!!this.qt.configManager.getPropertyParameters().wifiEthernetDownload:null},set:function(e){this.fi=e,this.ji()}},{key:"dnaUploadOnWifiEthernetAllowed",get:function(){return null!==this.li?this.li:this.qt.hasDistributorResponded?!!this.qt.configManager.getPropertyParameters().wifiEthernetUpload:null},set:function(e){this.li=e,this.ji()}},{key:"dnaDownloadOnCellularAllowed",get:function(){return null!==this.di?this.di:this.qt.hasDistributorResponded?!!this.qt.configManager.getPropertyParameters().cellularOtherDownload:null},set:function(e){this.di=e,this.ji()}},{key:"dnaUploadOnCellularAllowed",get:function(){return null!==this.vi?this.vi:this.qt.hasDistributorResponded?!!this.qt.configManager.getPropertyParameters().cellularOtherUpload:null},set:function(e){this.vi=e,this.ji()}},{key:"transferStatus",get:function(){return this.si?this.si.transferStatus:{effectiveDownloadAllowed:!1,effectiveUploadAllowed:!1}}},{key:"id",get:function(){return this.qt.dnaConfig.id}},{key:"stats",get:function(){var e=this.si?this.si.stats:new R.default(this.qt.transferStats),t=this.Ii.get(e),n=this.wi?{compass:this.wi.stats}:{};return(0,r.default)({},t,n)}},{key:"status",get:function(){return{confLabel:(this.si?this.si.stats:new R.default(this.qt.transferStats)).confLabel}}},{key:"versions",get:function(){return{streamrooter:"1.4.3",peerAgent:this.si?this.si.version:null,wrapper:this.qt.configManager.getVersions().wrapperVersion}}}]),a}();M.StreamTypes=a.default,M.ContentTypes=h.default,M.ResponseTypes=f.default,M.Events=p.default,M.Errors=_.default,t.default=M,e.exports=t.default},function(e,t,n){n(119),e.exports=n(2).Object.assign},function(e,t,n){var i=n(4);i(i.S+i.F,"Object",{assign:n(120)})},function(e,t,n){"use strict";var h=n(20),f=n(60),p=n(29),_=n(30),g=n(54),r=Object.assign;e.exports=!r||n(15)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=r({},e)[n]||Object.keys(r({},t)).join("")!=i})?function(e,t){for(var n=_(e),i=arguments.length,r=1,a=f.f,s=p.f;r<i;)for(var o,l=g(arguments[r++]),u=a?h(l).concat(a(l)):h(l),c=u.length,d=0;d<c;)s.call(l,o=u[d++])&&(n[o]=l[o]);return n}:r},function(e,t,n){var l=n(17),u=n(37),c=n(122);e.exports=function(o){return function(e,t,n){var i,r=l(e),a=u(r.length),s=c(n,a);if(o&&t!=t){for(;s<a;)if((i=r[s++])!=i)return!0}else for(;s<a;s++)if((o||s in r)&&r[s]===t)return o||s||0;return!o&&-1}}},function(e,t,n){var i=n(56),r=Math.max,a=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):a(e,t)}},function(e,t,n){var i=n(2),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,t,n){n(125);var i=n(2).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(4);i(i.S+i.F*!n(10),"Object",{defineProperty:n(8).f})},function(e,t,n){n(127),e.exports=n(2).Object.freeze},function(e,t,n){var i=n(7),r=n(39).onFreeze;n(83)("freeze",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),a=(i=r)&&i.__esModule?i:{default:i};t.default=(0,a.default)({ERR_INVALID_STREAM:"errorInvalidStream",ERR_INVALID_STREAMROOT_KEY:"errorInvalidStreamrootKey",ERR_NOT_SUPPORTED_STREAM:"errorNotSupportedStream"}),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),u=i(n(40)),a=i(n(1)),c=i(n(62)),s=i(n(85)),d=(n(132),n(12)),h=i(n(159)),o=function(){function t(e){(0,r.default)(this,t),this.Bi=!1,this.qt=e,this.xi=null,this.Gi=null,this.Hi=[],this.dn=null}return t.prototype.setParserAdapter=function(e,t){if(this.xi)throw Error("Attempted to set the parser adapter twice");e.onMediaMapCreated=this.Ai.bind(this),this.xi=e,this.Nn=t,this.Vi()},t.prototype.clear=function(){this.Gi&&(this.Gi.clear(),this.Gi=null),this.xi=null,this.Hi=[],this.dn=null},t.prototype.fetchManifest=function(e,o){var l=this,t={onSuccess:function(e,t,n){var i=new u.default(e.responseURL||e.url,window.location.href).href,r=l.xi;r&&0===l.Hi.length?((0,d.createTimeout)(function(){o.onSuccess(e,t,n)},0),r.updateManifest(t,i)):(l.Wi({manifest:t,url:i}),o.onSuccess(e,t,n));var a=l.qt.configManager.getStreamType()===c.default.DASH,s=!l.Bi&&!l.qt.segmentBaseAdapter;a&&s&&(/<SegmentBase/.test(t)&&(l.qt.segmentBaseAdapter=new h.default(l.qt)),l.Bi=!0)},onError:o.onError||void 0,onProgress:o.onProgress||void 0};return new s.default(this.qt,e).fetch(t)},t.prototype.Wi=function(e){this.Nn===c.default.DASH?this.Hi=[e]:this.Nn===c.default.HLS&&0<this.Hi.length?this.Hi.splice(1,0,e):this.Hi.push(e)},t.prototype.Vi=function(){var r=this;0<this.Hi.length&&(this.Gi=(0,d.createTimeout)(function(){if(r.Gi=null,r.Nn===c.default.HLS&&r.dn&&r.dn.isLive())r.Hi=[];else{var e=r.xi;if(e&&0<r.Hi.length){var t=r.Hi.shift(),n=t.manifest,i=t.url;e.updateManifest(n,i),r.Vi()}}},0))},t.prototype.Ai=function(e){this.dn=e,this.qt.eventBus.emit(a.default.MEDIA_MAP_CREATED,e)},t}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";function s(e){return decodeURIComponent(e.replace(/\+/g," "))}var a=Object.prototype.hasOwnProperty;t.stringify=function(e,t){t=t||"";var n,i,r=[];for(i in"string"!=typeof t&&(t="?"),e)a.call(e,i)&&((n=e[i])||null!=n&&!isNaN(n)||(n=""),r.push(encodeURIComponent(i)+"="+encodeURIComponent(n)));return r.length?t+r.join("&"):""},t.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,i={};t=n.exec(e);){var r=s(t[1]),a=s(t[2]);r in i||(i[r]=a)}return i}},function(e,t,n){},function(e,t,n){var i=n(90),f=n(91),r=i(),p=[1|r[0],r[1],r[2],r[3],r[4],r[5]],_=16383&(r[6]<<8|r[7]),g=0,m=0;e.exports=function(e,t,n){var i=t&&n||0,r=t||[],a=void 0!==(e=e||{}).clockseq?e.clockseq:_,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),o=void 0!==e.nsecs?e.nsecs:m+1,l=s-g+(o-m)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||g<s)&&void 0===e.nsecs&&(o=0),1e4<=o)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=s,_=a;var u=(1e4*(268435455&(s+=122192928e5))+(m=o))%4294967296;r[i++]=u>>>24&255,r[i++]=u>>>16&255,r[i++]=u>>>8&255,r[i++]=255&u;var c=s/4294967296*1e4&268435455;r[i++]=c>>>8&255,r[i++]=255&c,r[i++]=c>>>24&15|16,r[i++]=c>>>16&255,r[i++]=a>>>8|128,r[i++]=255&a;for(var d=e.node||p,h=0;h<6;++h)r[i+h]=d[h];return t||f(r)}},function(e,t,n){var s=n(90),o=n(91);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var a=0;a<16;++a)t[i+a]=r[a];return t||o(r)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var s=i(n(0)),o=i(n(41)),l=i(n(43)),r=i(n(158)),a=n(89),u=n(44),c=null,d={},h={},f=function(r){function a(e,t,n){(0,s.default)(this,a);var i=(0,o.default)(this,r.call(this,e,t,n));return i.qi(),i}return(0,l.default)(a,r),a.prototype.qi=function(){var t=this;if(c){var e=this.hn?"setInterval":"setTimeout";c.postMessage({command:e,id:this.in,time:this.sn}),d[this.in]=this.rn}else this.hn?h[this.in]=setTimeout(function e(){h[t.in]=setTimeout(e,t.sn),t.rn()},this.sn):h[this.in]=setTimeout(function(){t.rn(),t.rn=u.noop},this.sn)},a.prototype.clear=function(){c?(delete d[this.in],c.postMessage({command:"clear",id:this.in})):(clearTimeout(h[this.in]),delete h[this.in]),this.rn=u.noop},a}(a.AbstractTimer);try{window.Worker&&((c=new window.Worker(URL.createObjectURL(new Blob(["("+r.default.toString()+")()"],{type:"text/javascript"})))).onmessage=function(e){var t=e.data,n=t.id,i=t.command;d[n]&&(d[n](),"triggerTimeout"===i&&delete d[n])},c.onerror=function(){})}catch(e){}e.exports=f},function(e,t,n){e.exports={default:n(137),__esModule:!0}},function(e,t,n){n(21),n(33),e.exports=n(68).f("iterator")},function(e,t,n){var l=n(56),u=n(55);e.exports=function(o){return function(e,t){var n,i,r=String(u(e)),a=l(t),s=r.length;return a<0||s<=a?o?"":void 0:(n=r.charCodeAt(a))<55296||56319<n||a+1===s||(i=r.charCodeAt(a+1))<56320||57343<i?o?r.charAt(a):n:o?r.slice(a,a+2):i-56320+(n-55296<<10)+65536}}},function(e,t,n){"use strict";var i=n(42),r=n(26),a=n(32),s={};n(14)(s,n(6)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(s,{next:r(1,n)}),a(e,t+" Iterator")}},function(e,t,n){var s=n(8),o=n(9),l=n(20);e.exports=n(10)?Object.defineProperties:function(e,t){o(e);for(var n,i=l(t),r=i.length,a=0;a<r;)s.f(e,n=i[a++],t[n]);return e}},function(e,t,n){var i=n(16),r=n(30),a=n(57)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){"use strict";var i=n(143),r=n(94),a=n(22),s=n(17);e.exports=n(67)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t,n){e.exports={default:n(145),__esModule:!0}},function(e,t,n){n(146),n(70),n(149),n(150),e.exports=n(2).Symbol},function(e,t,n){"use strict";var i=n(5),s=n(16),r=n(10),a=n(4),o=n(92),l=n(39).KEY,u=n(15),c=n(58),d=n(32),h=n(38),f=n(6),p=n(68),_=n(69),g=n(147),m=n(95),v=n(9),E=n(7),y=n(17),T=n(53),A=n(26),S=n(42),R=n(148),b=n(97),I=n(8),C=n(20),P=b.f,w=I.f,O=R.f,D=i.Symbol,N=i.JSON,M=N&&N.stringify,L=f("_hidden"),x=f("toPrimitive"),k={}.propertyIsEnumerable,F=c("symbol-registry"),U=c("symbols"),V=c("op-symbols"),B=Object.prototype,j="function"==typeof D,H=i.QObject,Y=!H||!H.prototype||!H.prototype.findChild,q=r&&u(function(){return 7!=S(w({},"a",{get:function(){return w(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=P(B,t);i&&delete B[t],w(e,t,n),i&&e!==B&&w(B,t,i)}:w,K=function(e){var t=U[e]=S(D.prototype);return t._k=e,t},G=j&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},W=function(e,t,n){return e===B&&W(V,t,n),v(e),t=T(t,!0),v(n),s(U,t)?(n.enumerable?(s(e,L)&&e[L][t]&&(e[L][t]=!1),n=S(n,{enumerable:A(0,!1)})):(s(e,L)||w(e,L,A(1,{})),e[L][t]=!0),q(e,t,n)):w(e,t,n)},z=function(e,t){v(e);for(var n,i=g(t=y(t)),r=0,a=i.length;r<a;)W(e,n=i[r++],t[n]);return e},X=function(e){var t=k.call(this,e=T(e,!0));return!(this===B&&s(U,e)&&!s(V,e))&&(!(t||!s(this,e)||!s(U,e)||s(this,L)&&this[L][e])||t)},Q=function(e,t){if(e=y(e),t=T(t,!0),e!==B||!s(U,t)||s(V,t)){var n=P(e,t);return!n||!s(U,t)||s(e,L)&&e[L][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=O(y(e)),i=[],r=0;n.length>r;)s(U,t=n[r++])||t==L||t==l||i.push(t);return i},Z=function(e){for(var t,n=e===B,i=O(n?V:y(e)),r=[],a=0;i.length>a;)!s(U,t=i[a++])||n&&!s(B,t)||r.push(U[t]);return r};j||(o((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=h(0<arguments.length?arguments[0]:void 0),n=function(e){this===B&&n.call(V,e),s(this,L)&&s(this[L],t)&&(this[L][t]=!1),q(this,t,A(1,e))};return r&&Y&&q(B,t,{configurable:!0,set:n}),K(t)}).prototype,"toString",function(){return this._k}),b.f=Q,I.f=W,n(96).f=R.f=J,n(29).f=X,n(60).f=Z,r&&!n(28)&&o(B,"propertyIsEnumerable",X,!0),p.f=function(e){return K(f(e))}),a(a.G+a.W+a.F*!j,{Symbol:D});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)f($[ee++]);for(var te=C(f.store),ne=0;te.length>ne;)_(te[ne++]);a(a.S+a.F*!j,"Symbol",{for:function(e){return s(F,e+="")?F[e]:F[e]=D(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),a(a.S+a.F*!j,"Object",{create:function(e,t){return void 0===t?S(e):z(S(e),t)},defineProperty:W,defineProperties:z,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),N&&a(a.S+a.F*(!j||u(function(){var e=D();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(E(t)||void 0!==e)&&!G(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!G(t))return t}),i[1]=t,M.apply(N,i)}}),D.prototype[x]||n(14)(D.prototype,x,D.prototype.valueOf),d(D,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,t,n){var o=n(20),l=n(60),u=n(29);e.exports=function(e){var t=o(e),n=l.f;if(n)for(var i,r=n(e),a=u.f,s=0;r.length>s;)a.call(e,i=r[s++])&&t.push(i);return t}},function(e,t,n){var i=n(17),r=n(96).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?function(e){try{return r(e)}catch(e){return s.slice()}}(e):r(i(e))}},function(e,t,n){n(69)("asyncIterator")},function(e,t,n){n(69)("observable")},function(e,t,n){e.exports={default:n(152),__esModule:!0}},function(e,t,n){n(153),e.exports=n(2).Object.setPrototypeOf},function(e,t,n){var i=n(4);i(i.S,"Object",{setPrototypeOf:n(154).set})},function(e,t,r){var n=r(7),i=r(9),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,i){try{(i=r(13)(Function.call,r(97).f(Object.prototype,"__proto__").set,2))(e,[]),n=!(e instanceof Array)}catch(e){n=!0}return function(e,t){return a(e,t),n?e.__proto__=t:i(e,t),e}}({},!1):void 0),check:a}},function(e,t,n){e.exports={default:n(156),__esModule:!0}},function(e,t,n){n(157);var i=n(2).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(4);i(i.S,"Object",{create:n(42)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var s={};self.onmessage=function(e){var t,n=e.data,i=n.command,r=n.id,a=n.time;switch(i){case"setTimeout":s[r]=setTimeout((t=r,function(){self.postMessage({id:t,command:"triggerTimeout"}),delete s[t]}),a);break;case"setInterval":s[r]=setTimeout(function e(t,n){return function(){self.postMessage({id:t,command:"triggerInterval"}),s[t]=setTimeout(e(t,n),n)}}(r,a),a);break;case"clear":clearTimeout(s[r]),delete s[r]}}},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(160)),c=i(n(23)),r=i(n(72)),a=i(n(0)),s=i(n(40)),o=n(86),d=i(n(1)),l=function(){function t(e){var l=this;(0,a.default)(this,t),this.zi=new r.default,this.Yi=function(){var e=!0,t=!1,n=void 0;try{for(var i,r=(0,c.default)(l.zi.entries());!(e=(i=r.next()).done);e=!0){var a=(0,u.default)(i.value,2),s=a[0],o=a[1];if(!l.qt.parserAdapter)return void l.qt.errorFunnel.notifyError(new Error("Parser adapter not available after MEDIA_MAP_CREATED is raised."));l.qt.parserAdapter.setSegmentOffsetListForTrack(s,o)}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}l.zi.clear()},this.qt=e,this.qt.eventBus.once(d.default.MEDIA_MAP_CREATED,this.Yi)}return t.prototype.submitIndexSegment=function(e,t){try{var n=new s.default(e),i=n.host+n.pathname,r=(0,o.parse)(new Uint8Array(t));this.qt.parserAdapter?this.qt.parserAdapter.setSegmentOffsetListForTrack(i,r):this.zi.set(i,r)}catch(e){this.qt.errorFunnel.notifyError(e)}},t.prototype.dispose=function(){this.qt.eventBus.off(d.default.MEDIA_MAP_CREATED,this.Yi),this.zi.clear()},t}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(161)),l=i(n(23));t.default=function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=(0,l.default)(e);!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){e.exports={default:n(162),__esModule:!0}},function(e,t,n){n(33),n(21),e.exports=n(163)},function(e,t,n){var i=n(45),r=n(6)("iterator"),a=n(22);e.exports=n(2).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||a.hasOwnProperty(i(t))}},function(e,t,n){n(33),n(21),e.exports=n(165)},function(e,t,n){var i=n(9),r=n(71);e.exports=n(2).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,n){n(70),n(21),n(33),n(167),n(173),n(176),n(178),e.exports=n(2).Map},function(e,t,n){"use strict";var i=n(168),r=n(101);e.exports=n(169)("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=i.getEntry(r(this,"Map"),e);return t&&t.v},set:function(e,t){return i.def(r(this,"Map"),0===e?0:e,t)}},i,!0)},function(e,t,n){"use strict";var s=n(8).f,o=n(42),l=n(73),u=n(13),c=n(74),d=n(34),i=n(67),r=n(94),a=n(100),h=n(10),f=n(39).fastKey,p=n(101),_=h?"_s":"size",g=function(e,t){var n,i=f(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,a,n,i){var r=e(function(e,t){c(e,r,a,"_i"),e._t=a,e._i=o(null),e._f=void 0,e._l=void 0,e[_]=0,null!=t&&d(t,n,e[i],e)});return l(r.prototype,{clear:function(){for(var e=p(this,a),t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[_]=0},delete:function(e){var t=p(this,a),n=g(t,e);if(n){var i=n.n,r=n.p;delete t._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),t._f==n&&(t._f=i),t._l==n&&(t._l=r),t[_]--}return!!n},forEach:function(e){p(this,a);for(var t,n=u(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!g(p(this,a),e)}}),h&&s(r.prototype,"size",{get:function(){return p(this,a)[_]}}),r},def:function(e,t,n){var i,r,a=g(e,t);return a?a.v=n:(e._l=a={i:r=f(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=a),i&&(i.n=a),e[_]++,"F"!==r&&(e._i[r]=a)),e},getEntry:g,setStrong:function(e,n,t){i(e,n,function(e,t){this._t=p(e,n),this._k=t,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?r(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,r(1))},t?"entries":"values",!t,!0),a(n)}}},function(e,t,n){"use strict";var d=n(5),h=n(4),f=n(39),p=n(15),_=n(14),g=n(73),m=n(34),v=n(74),E=n(7),y=n(32),T=n(8).f,A=n(170)(0),S=n(10);e.exports=function(n,e,t,i,r,a){var s=d[n],o=s,l=r?"set":"add",u=o&&o.prototype,c={};return S&&"function"==typeof o&&(a||u.forEach&&!p(function(){(new o).entries().next()}))?(o=e(function(e,t){v(e,o,n,"_c"),e._c=new s,null!=t&&m(t,r,e[l],e)}),A("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(i){var r="add"==i||"set"==i;i in u&&(!a||"clear"!=i)&&_(o.prototype,i,function(e,t){if(v(this,o,i),!r&&a&&!E(e))return"get"==i&&void 0;var n=this._c[i](0===e?0:e,t);return r?this:n})}),a||T(o.prototype,"size",{get:function(){return this._c.size}})):(o=i.getConstructor(e,n,r,l),g(o.prototype,t),f.NEED=!0),y(o,n),c[n]=o,h(h.G+h.W+h.F,c),a||i.setStrong(o,n,r),o}},function(e,t,n){var E=n(13),y=n(54),T=n(30),A=n(37),i=n(171);e.exports=function(d,e){var h=1==d,f=2==d,p=3==d,_=4==d,g=6==d,m=5==d||g,v=e||i;return function(e,t,n){for(var i,r,a=T(e),s=y(a),o=E(t,n,3),l=A(s.length),u=0,c=h?v(e,l):f?v(e,0):void 0;u<l;u++)if((m||u in s)&&(r=o(i=s[u],u,a),d))if(h)c[u]=r;else if(r)switch(d){case 3:return!0;case 5:return i;case 6:return u;case 2:c.push(i)}else if(_)return!1;return g?-1:p||_?_:c}}},function(e,t,n){var i=n(172);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){var i=n(7),r=n(95),a=n(6)("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var i=n(4);i(i.P+i.R,"Map",{toJSON:n(174)("Map")})},function(e,t,n){var i=n(45),r=n(175);e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,n){var i=n(34);e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},function(e,t,n){n(177)("Map")},function(e,t,n){"use strict";var i=n(4);e.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(179)("Map")},function(e,t,n){"use strict";var i=n(4),s=n(25),o=n(13),l=n(34);e.exports=function(e){i(i.S,e,{from:function(e){var t,n,i,r,a=arguments[1];return s(this),(t=void 0!==a)&&s(a),null==e?new this:(n=[],t?(i=0,r=o(a,arguments[2],2),l(e,!1,function(e){n.push(r(e,i++))})):l(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0));i(n(65)),t.default=function e(a,s){(0,r.default)(this,e),this.onSuccess=function(e,t,n){var i=e.data.buffer.slice(0),r={timeElapsed:t.cdnDuration+t.p2pDuration,latency:t.latency||0,lengthComputable:!0,loaded:i.byteLength,total:i.byteLength};s.onSuccess(a,i,r)},this.onError=function(e,t){var n={status:e.status,message:e.message};s.onError&&s.onError(a,n)},this.onProgress=function(e,t){var n={timeElapsed:e.cdnDuration+e.p2pDuration,latency:e.latency||0,lengthComputable:e.lengthComputable||!1,loaded:e.cdnDownloaded+e.p2pDownloaded,total:e.total||0};s.onProgress&&s.onProgress(a,n)}},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.assertContentAndResponseType=void 0;var r=i(n(102)),a=i(n(63)),s=i(n(84));t.assertContentAndResponseType=function(e){var t=e.contentType,n=e.responseType;if(-1===(0,r.default)(a.default).indexOf(t))throw new TypeError("Invalid FetchConfig: '"+t+"' is not a valid ContentType");if(-1===(0,r.default)(s.default).indexOf(n))throw new TypeError("Invalid FetchConfig: '"+n+"' is not a valid ResponseType");switch(t){case a.default.MEDIA_SEGMENT:case a.default.INIT_SEGMENT:if(n!==s.default.ARRAY_BUFFER)throw new TypeError("Invalid FetchConfig: ContentTypes MEDIA_SEGMENT and INIT_SEGMENT are only compatible with ResponseType ARRAY_BUFFER");break;case a.default.MANIFEST:if(n!==s.default.TEXT)throw new TypeError("Invalid FetchConfig: ContentType MANIFEST is only compatible with ResponseType TEXT")}}},function(e,t,n){n(183),e.exports=n(2).Object.values},function(e,t,n){var i=n(4),r=n(184)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){var l=n(20),u=n(17),c=n(29).f;e.exports=function(o){return function(e){for(var t,n=u(e),i=l(n),r=i.length,a=0,s=[];a<r;)c.call(n,t=i[a++])&&s.push(o?[t,n[t]]:n[t]);return s}}},function(e,t,n){n(186),e.exports=n(2).Object.keys},function(e,t,n){var i=n(30),r=n(20);n(83)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={CONF_LABEL:"default",ANALYTICS:{TRAFFIC_INTERVAL_ARRAY:function(e,t,n){for(var i=[],r=5e3;r<12e4;r+=1e4)i.push(r);return i.push(12e4),i}(),STATS_INTERVAL:12e4,CONTROL_INTERVAL:6e5,CONNECTIONS_INTERVAL:3e5,STATS_SENDER_PERCENTAGE:100,CONTROL_SENDER_PERCENTAGE:100,CONNECTIONS_SENDER_PERCENTAGE:1,RAMP_UP_STATS_SENDER_PERCENTAGE:10,RAMP_UP_CONTROL_SENDER_PERCENTAGE:10,ENABLE_STATS_SENDER:!1,ENABLE_CONTROL_SENDER:!1,ENABLE_CONNECTIONS_SENDER:!1,REQUESTED_SEGMENTS_COUNT_TO_SEND_CONFIG:2},ERRORS:{API_KEY:"8b7816ec573ca40bb9ec856f646f08c5",HANDLER:"xhr",STAGES:["staging","qa","production"]},ENABLE_PLAYBACK_ERROR_LOGGING:!1,QOS_REF_PERCENTAGE:0,QOS_COMPASS_REF_PERCENTAGE:0,QOS_P2P_DISABLED:!1,QOS_COMPASS_DISABLED:!1,ROUTER_POLL_INTERVAL:9e5,REQUEST_RETRY:{ROUTER:{TIMEOUT:1e4,MIN_DELAY:3e4,MAX_DELAY:3e5,MIN_FACTOR:2,MAX_FACTOR:2.4},DISTRIBUTOR:{TIMEOUT:1e4,MIN_DELAY:5e3,MAX_DELAY:18e4,MIN_FACTOR:2,MAX_FACTOR:2.4},COMPASS:{TIMEOUT:1e4,MIN_DELAY:5e3,MAX_DELAY:18e4,MIN_FACTOR:2,MAX_FACTOR:2.4},SUBNET_MATCHER:{TIMEOUT:1e4,MIN_DELAY:5e3,MAX_DELAY:18e4,MIN_FACTOR:2,MAX_FACTOR:2.4},ANALYTICS:{TIMEOUT:3e3,RETRY:3,RETRY_DELAY:1e4}},CDN_ABORT_ERROR_TIME_THRESHOLD:1e3,COMPASS_ENABLE_MANIFEST_URL:!0,COMPASS_ENABLE_OTHER_URL:!1};t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return e.substring(e.length-t.length,e.length)===t}Object.defineProperty(t,"__esModule",{value:!0}),t.endsWith=i,t.addTrailingSlash=function(e){return i(e,"/")?e:e+"/"},t.removeTrailingSlash=function(e){return i(e,"/")?e.slice(0,-1):e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),a=(i=r)&&i.__esModule?i:{default:i};t.default=(0,a.default)({UNKNOWN:"unknown",DEACTIVATED_BY_BYPASS:"deactivatedByBypass",DEACTIVATED_BY_USAGE_QUOTA:"deactivatedByUsageQuota",DEACTIVATED_BY_CONTENT:"deactivatedByContent",DEACTIVATED_BY_RAMP_UP:"deactivatedByRampUp",QOS_TESTER:"qosTester",ACTIVATED:"activated"}),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),a=(i=r)&&i.__esModule?i:{default:i};t.default=(0,a.default)({SEGMENT_TRIGGER:"segmentTrigger",BUFFER_TRIGGER:"bufferTrigger",IMMEDIATE_TRIGGER:"immediateTrigger"}),e.exports=t.default},function(g,m,v){var E;!function(r,e){"use strict";var t="model",n="name",i="type",a="vendor",s="version",o="mobile",l="tablet",u={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},c={rgx:function(e,t){for(var n,i,r,a,s,o,l=0;l<t.length&&!s;){var u=t[l],c=t[l+1];for(n=i=0;n<u.length&&!s;)if(s=u[n++].exec(e))for(r=0;r<c.length;r++)o=s[++i],"object"==typeof(a=c[r])&&0<a.length?2==a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,o):this[a[0]]=a[1]:3==a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=o?o.replace(a[1],a[2]):void 0:this[a[0]]=o?a[1].call(this,o,a[2]):void 0:4==a.length&&(this[a[0]]=o?a[3].call(this,o.replace(a[1],a[2])):void 0):this[a]=o||void 0;l+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&0<t[n].length){for(var i=0;i<t[n].length;i++)if(u.has(t[n][i],e))return"?"===n?void 0:n}else if(u.has(t[n],e))return"?"===n?void 0:n;return e}},d={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},h={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[n,s],[/(opios)[\/\s]+([\w\.]+)/i],[[n,"Opera Mini"],s],[/\s(opr)\/([\w\.]+)/i],[[n,"Opera"],s],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[n,s],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[n,"IE"],s],[/(edge)\/((\d+)?[\w\.]+)/i],[n,s],[/(yabrowser)\/([\w\.]+)/i],[[n,"Yandex"],s],[/(puffin)\/([\w\.]+)/i],[[n,"Puffin"],s],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[n,"UCBrowser"],s],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],s],[/(micromessenger)\/([\w\.]+)/i],[[n,"WeChat"],s],[/(QQ)\/([\d\.]+)/i],[n,s],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[n,s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[s,[n,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[s,[n,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[s,[n,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[n,/(.+)/,"$1 WebView"],s],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[n,/(.+(?:g|us))(.+)/,"$1 $2"],s],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[s,[n,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[n,s],[/(dolfin)\/([\w\.]+)/i],[[n,"Dolphin"],s],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[n,"Chrome"],s],[/(coast)\/([\w\.]+)/i],[[n,"Opera Coast"],s],[/fxios\/([\w\.-]+)/i],[s,[n,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[s,[n,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[s,n],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[n,"GSA"],s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[n,[s,c.str,d.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[n,s],[/(navigator|netscape)\/([\w\.-]+)/i],[[n,"Netscape"],s],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[n,s]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",u.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",u.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",u.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[t,a,[i,l]],[/applecoremedia\/[\w\.]+ \((ipad)/],[t,[a,"Apple"],[i,l]],[/(apple\s{0,1}tv)/i],[[t,"Apple TV"],[a,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[a,t,[i,l]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[t,[a,"Amazon"],[i,l]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[t,c.str,d.device.amazon.model],[a,"Amazon"],[i,o]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[t,a,[i,o]],[/\((ip[honed|\s\w*]+);/i],[t,[a,"Apple"],[i,o]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[a,t,[i,o]],[/\(bb10;\s(\w+)/i],[t,[a,"BlackBerry"],[i,o]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[t,[a,"Asus"],[i,l]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[a,"Sony"],[t,"Xperia Tablet"],[i,l]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[t,[a,"Sony"],[i,o]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[a,t,[i,"console"]],[/android.+;\s(shield)\sbuild/i],[t,[a,"Nvidia"],[i,"console"]],[/(playstation\s[34portablevi]+)/i],[t,[a,"Sony"],[i,"console"]],[/(sprint\s(\w+))/i],[[a,c.str,d.device.sprint.vendor],[t,c.str,d.device.sprint.model],[i,o]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[a,t,[i,l]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[a,[t,/_/g," "],[i,o]],[/(nexus\s9)/i],[t,[a,"HTC"],[i,l]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[t,[a,"Huawei"],[i,o]],[/(microsoft);\s(lumia[\s\w]+)/i],[a,t,[i,o]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[t,[a,"Microsoft"],[i,"console"]],[/(kin\.[onetw]{3})/i],[[t,/\./g," "],[a,"Microsoft"],[i,o]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[t,[a,"Motorola"],[i,o]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[t,[a,"Motorola"],[i,l]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[a,u.trim],[t,u.trim],[i,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[t,/^/,"SmartTV"],[a,"Samsung"],[i,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[t,[a,"Sharp"],[i,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[a,"Samsung"],t,[i,l]],[/smart-tv.+(samsung)/i],[a,[i,"smarttv"],t],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[a,"Samsung"],t,[i,o]],[/sie-(\w+)*/i],[t,[a,"Siemens"],[i,o]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[a,"Nokia"],t,[i,o]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[t,[a,"Acer"],[i,l]],[/android.+([vl]k\-?\d{3})\s+build/i],[t,[a,"LG"],[i,l]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[a,"LG"],t,[i,l]],[/(lg) netcast\.tv/i],[a,t,[i,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[t,[a,"LG"],[i,o]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[t,[a,"Lenovo"],[i,l]],[/linux;.+((jolla));/i],[a,t,[i,o]],[/((pebble))app\/[\d\.]+\s/i],[a,t,[i,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[a,t,[i,o]],[/crkey/i],[[t,"Chromecast"],[a,"Google"]],[/android.+;\s(glass)\s\d/i],[t,[a,"Google"],[i,"wearable"]],[/android.+;\s(pixel c)\s/i],[t,[a,"Google"],[i,l]],[/android.+;\s(pixel xl|pixel)\s/i],[t,[a,"Google"],[i,o]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[t,/_/g," "],[a,"Xiaomi"],[i,o]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[t,/_/g," "],[a,"Xiaomi"],[i,l]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[t,[a,"Meizu"],[i,l]],[/android.+a000(1)\s+build/i],[t,[a,"OnePlus"],[i,o]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[t,[a,"RCA"],[i,l]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[t,[a,"Dell"],[i,l]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[t,[a,"Verizon"],[i,l]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[a,"Barnes & Noble"],t,[i,l]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[t,[a,"NuVision"],[i,l]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[a,"ZTE"],t,[i,l]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[t,[a,"Swiss"],[i,o]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[t,[a,"Swiss"],[i,l]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[t,[a,"Zeki"],[i,l]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[a,"Dragon Touch"],t,[i,l]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[t,[a,"Insignia"],[i,l]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[t,[a,"NextBook"],[i,l]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[a,"Voice"],t,[i,o]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[a,"LvTel"],t,[i,o]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[t,[a,"Envizen"],[i,l]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[a,t,[i,l]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[t,[a,"MachSpeed"],[i,l]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[a,t,[i,l]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[t,[a,"Rotor"],[i,l]],[/android.+(KS(.+))\s+build/i],[t,[a,"Amazon"],[i,l]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[a,t,[i,l]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[i,u.lowerize],a,t],[/(android.+)[;\/].+build/i],[t,[a,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[s,[n,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[n,s],[/rv\:([\w\.]+).*(gecko)/i],[s,n]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[n,s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[n,[s,c.str,d.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[n,"Windows"],[s,c.str,d.os.windows.version]],[/\((bb)(10);/i],[[n,"BlackBerry"],s],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[n,s],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[n,"Symbian"],s],[/\((series40);/i],[n],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[n,"Firefox OS"],s],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[n,s],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[n,"Chromium OS"],s],[/(sunos)\s?([\w\.]+\d)*/i],[[n,"Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[n,s],[/(haiku)\s(\w+)/i],[n,s],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[s,/_/g,"."],[n,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[n,"Mac OS"],[s,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[n,s]]},f=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof f))return new f(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?u.extend(h,t):h;return this.getBrowser=function(){var e={name:void 0,version:void 0};return c.rgx.call(e,n,i.browser),e.major=u.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return c.rgx.call(e,n,i.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return c.rgx.call(e,n,i.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return c.rgx.call(e,n,i.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return c.rgx.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};f.VERSION="0.7.17",f.BROWSER={NAME:n,MAJOR:"major",VERSION:s},f.CPU={ARCHITECTURE:"architecture"},f.DEVICE={MODEL:t,VENDOR:a,TYPE:i,CONSOLE:"console",MOBILE:o,SMARTTV:"smarttv",TABLET:l,WEARABLE:"wearable",EMBEDDED:"embedded"},f.ENGINE={NAME:n,VERSION:s},f.OS={NAME:n,VERSION:s},void 0!==m?(void 0!==g&&g.exports&&(m=g.exports=f),m.UAParser=f):v(192)?void 0===(E=function(){return f}.call(m,v,m,g))||(g.exports=E):r&&(r.UAParser=f);var p=r&&(r.jQuery||r.Zepto);if(void 0!==p){var _=new f;p.ua=_.getResult(),p.ua.get=function(){return _.getUA()},p.ua.set=function(e){_.setUA(e);var t=_.getResult();for(var n in t)p.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(t,e){(function(e){t.exports=e}).call(this,{})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(36)),s=i(n(0)),o=i(n(194)),l=i(n(195)),u=i(n(1)),r=function(){function r(e){var t=this,n=e.eventBus,i=e.configManager;(0,s.default)(this,r),this.On=null,this.Ki={},this.Xi=function(){t.kt.ERRORS&&(o.default.apiKey=t.kt.ERRORS.API_KEY,o.default.notifyHandler=t.kt.ERRORS.HANDLER,o.default.notifyReleaseStages=t.kt.ERRORS.STAGES,o.default.disableLog=!0,o.default.releaseStage="production",o.default.autoNotify=!1,o.default.appVersion="1.4.3".split("-")[0])},this.Qi=function(e){e.filename&&e.filename===t.On&&t.notifyError(new l.default(e))},this.jt=n,this.kt=i.conf,this.jt.on(u.default.LOCAL_CONF_UPDATED,this.Xi),window.addEventListener("error",this.Qi),this.Xi()}return r.prototype.dispose=function(){this.jt.removeListener(u.default.LOCAL_CONF_UPDATED,this.Xi),window.removeEventListener("error",this.Qi)},r.prototype.notify=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"warning";n.match(/^(warning|info|error)$/)||(n="warning"),o.default.notify(e,t,this.Ki,n)},r.prototype.notifyError=function(e,t){o.default.notifyException(e,{groupingHash:t||e.message})},r.prototype.setMetadata=function(e){(0,a.default)(this.Ki,e),o.default.metaData=this.Ki},r.prototype.setScriptOrigin=function(e){this.On=e},r.prototype.setCustomer=function(e){o.default.userId=e},r}();t.default=r,e.exports=t.default},function(r,c,e){"use strict";var A,t,n=e(31),S=(t=n)&&t.__esModule?t:{default:t};!function(e){function t(){u=!1}function d(e){var t=f("disableLog"),n=window.console;void 0===n||void 0===n.log||t||n.log("[Bugsnag] "+e)}function h(e,t,n){if(null==t)return e;if(n>=f("maxDepth",v))return"[RECURSIVE]";for(var i in e=e||{},t)if(t.hasOwnProperty(i))try{t[i].constructor===Object?e[i]=h(e[i],t[i],n+1||1):e[i]=t[i]}catch(n){e[i]=t[i]}return e}function f(e,t){i=i||{};var n=void 0!==g[e]?g[e]:i[e.toLowerCase()];return"false"===n&&(n=!1),void 0!==n?n:t}function s(e,t){var n,i=f("apiKey");if(((n=i)&&n.match(E)||(d("Invalid API key '"+n+"'"),0))&&m){m-=1;var r=f("releaseStage","production"),a=f("notifyReleaseStages");if(a){for(var s=!1,o=0;o<a.length;o++)if(r===a[o]){s=!0;break}if(!s)return}var l=[e.name,e.message,e.stacktrace].join("|");if(l!==_){_=l;var u={notifierVersion:T,apiKey:i,projectRoot:f("projectRoot")||window.location.protocol+"//"+window.location.host,context:f("context")||window.location.pathname,userId:f("userId"),user:f("user"),metaData:h(h({},f("metaData")),t),releaseStage:r,appVersion:f("appVersion"),url:window.location.href,userAgent:navigator.userAgent,language:navigator.language||navigator.userLanguage,severity:e.severity,name:e.name,message:e.message,stacktrace:e.stacktrace,file:e.file,lineNumber:e.lineNumber,columnNumber:e.columnNumber,payloadVersion:"2"},c=g.beforeNotify;if("function"==typeof c&&!1===c(u,u.metaData))return;if(0===u.lineNumber&&/Script error\.?/.test(u.message))return d("Ignoring cross-domain script error. See https://bugsnag.com/docs/notifiers/js/cors");!function(e,t){if(e+="?"+function e(t,n,i){if(i>=f("maxDepth",v))return encodeURIComponent(n)+"=[RECURSIVE]";i=i+1||1;try{if(window.Node&&t instanceof window.Node)return encodeURIComponent(n)+"="+encodeURIComponent(p(t));var r=[];for(var a in t)if(t.hasOwnProperty(a)&&null!=a&&null!=t[a]){var s=n?n+"["+a+"]":a,o=t[a];r.push("object"===(void 0===o?"undefined":(0,S.default)(o))?e(o,s,i):encodeURIComponent(s)+"="+encodeURIComponent(o))}return r.join("&")}catch(e){return encodeURIComponent(n)+"="+encodeURIComponent(""+e)}}(t)+"&ct=img&cb="+(new Date).getTime(),"undefined"!=typeof BUGSNAG_TESTING&&g.testRequest)g.testRequest(e,t);else if("xhr"===f("notifyHandler")){var n=new XMLHttpRequest;n.open("GET",e,!0),n.send()}else(new Image).src=e}(f("endpoint")||y,u)}}}function o(){var e,t;try{throw new Error("")}catch(n){e="<generated>\n",t=l(n)}if(!t){e="<generated-ie>\n";var n=[];try{for(var i=arguments.callee.caller.caller;i&&n.length<10;){var r=a.test(i.toString())&&RegExp.$1||"[anonymous]";n.push(r),i=i.caller}}catch(e){d(e)}t=n.join("\n")}return e+t}function l(e){return e.stack||e.backtrace||e.stacktrace}function p(e){if(e){var t=e.attributes;if(t){for(var n="<"+e.nodeName.toLowerCase(),i=0;i<t.length;i++)t[i].value&&"null"!==t[i].value.toString()&&(n+=" "+t[i].name+'="'+t[i].value+'"');return n+">"}return e.nodeName}}var _,g={},m=10,v=5;g.noConflict=function(){return void 0===(window.Bugsnag=e)&&delete window.Bugsnag,g},g.refresh=function(){m=10},g.notifyException=function(e,t,n,i){var r,a;e&&(t&&"string"!=typeof t&&(n=t,t=void 0),n||(n={}),r=n,(a=function(){var e=document.currentScript||void 0;if(!e&&u){var t=document.scripts||document.getElementsByTagName("script");e=t[t.length-1]}return e}())&&(r.script={src:a.src,content:f("inlineScript",!0)?a.innerHTML:""}),s({name:t||e.name,message:e.message||e.description,stacktrace:l(e)||o(),file:e.fileName||e.sourceURL,lineNumber:e.lineNumber||e.line,columnNumber:e.columnNumber?e.columnNumber+1:void 0,severity:i||"warning"},n))},g.notify=function(e,t,n,i){s({name:e,message:t,stacktrace:o(),file:window.location.toString(),lineNumber:1,severity:i||"warning"},n)};var u="complete"!==document.readyState;document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!0),window.addEventListener("load",t,!0)):window.attachEvent("onload",t);var i,E=/^[0-9a-f]{32}$/i,a=/function\s*([\w\-$]+)?\s*\(/i,y="https://notify.bugsnag.com/js",T="2.5.0",n=document.getElementsByTagName("script");n[n.length-1];if(window.atob&&window.ErrorEvent)try{new window.ErrorEvent("test").colno}catch(e){}window.Bugsnag=g,void 0===(A=function(){return g}.apply(c,[]))||(r.exports=A)}(window.Bugsnag)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};t.default=function e(t){(0,a.default)(this,e),this.message=t.error.message,this.stacktrace=t.error.stack,this.fileName=t.filename,this.lineNumber=t.lineno,this.columnNumber=t.colno?t.colno:void 0},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(66));t.default=function e(t){if((0,r.default)(this,e),(t=t||{}).id&&"string"!=typeof t.id)throw new TypeError("DnaConfig.id should be a string");if(t.contentIdGenerator&&"function"!=typeof t.contentIdGenerator)throw new TypeError("DnaConfig.contentIdGenerator should be a function");if(""===t.property||t.property&&"string"!=typeof t.property&&"function"!=typeof t.property)throw new TypeError("DnaConfig.property should be a string or a function");if(""===t.compassProperty||t.compassProperty&&"string"!=typeof t.compassProperty&&"function"!=typeof t.compassProperty)throw new TypeError("DnaConfig.compassProperty should be a string or a function");if(t.libPath&&"string"!=typeof t.libPath)throw new TypeError("DnaConfig.libPath should be a string");if(t.libHost&&"string"!=typeof t.libHost)throw new TypeError("DnaConfig.libHost should be a string");if(t.libPath&&t.libHost)throw new TypeError("libPath and libHost are mutually exclusive: only one can be defined in dnaConfig");if(t.backendUrl&&"string"!=typeof t.backendUrl)throw new TypeError("DnaConfig.backendUrl should be a string");if(t.backendHost&&"string"!=typeof t.backendHost)throw new TypeError("DnaConfig.backendHost should be a string");if(t.siteId&&"string"!=typeof t.siteId)throw new TypeError("DnaConfig.siteId should be a string");if(t.fragmentsFetchedBeforeLoad&&"number"!=typeof t.fragmentsFetchedBeforeLoad)throw new TypeError("DnaConfig.fragmentsFetchedBeforeLoad should be a number");if(t.secondsPrebufferedBeforeLoad&&"number"!=typeof t.secondsPrebufferedBeforeLoad)throw new TypeError("DnaConfig.secondsPrebufferedBeforeLoad should be a number");if("number"==typeof t.fragmentsFetchedBeforeLoad&&"number"==typeof t.secondsPrebufferedBeforeLoad)throw new Error("fragmentsFetchedBeforeLoad and secondsPrebufferedBeforeLoad cannot be set at the same time");this.id=t.id||a.default.v4(),this.contentIdGenerator=t.contentIdGenerator||null,this.property=t.property||null,this.compassProperty=t.compassProperty||null,this.libPath=t.libPath||null,this.libHost=t.libHost||null,this.siteId=t.siteId||null,this.backendUrl=t.backendUrl||null,this.backendHost=t.backendHost||null,this.fragmentsFetchedBeforeLoad="number"==typeof t.fragmentsFetchedBeforeLoad?t.fragmentsFetchedBeforeLoad:null,this.secondsPrebufferedBeforeLoad="number"==typeof t.secondsPrebufferedBeforeLoad?t.secondsPrebufferedBeforeLoad:null},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(198),a=(i=r)&&i.__esModule?i:{default:i};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,a.default)(e)}},function(e,t,n){e.exports={default:n(199),__esModule:!0}},function(e,t,n){n(21),n(200),e.exports=n(2).Array.from},function(e,t,n){"use strict";var h=n(13),i=n(4),f=n(30),p=n(98),_=n(99),g=n(37),m=n(201),v=n(71);i(i.S+i.F*!n(107)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,r,a=f(e),s="function"==typeof this?this:Array,o=arguments.length,l=1<o?arguments[1]:void 0,u=void 0!==l,c=0,d=v(a);if(u&&(l=h(l,2<o?arguments[2]:void 0,2)),null==d||s==Array&&_(d))for(n=new s(t=g(a.length));c<t;c++)m(n,c,u?l(a[c],c):a[c]);else for(r=d.call(a),n=new s;!(i=r.next()).done;c++)m(n,c,u?p(r,l,[i.value,c],!0):i.value);return n.length=c,n}})},function(e,t,n){"use strict";var i=n(8),r=n(26);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(47)),o=i(n(49)),s=i(n(0)),l=i(n(3)),u=i(n(19)),c=i(n(65)),d=i(n(77)),h=i(n(87)),f=i(n(88)),p=n(12),_=i(n(1)),a=function(){function a(e,t,n,i,r){(0,s.default)(this,a),this.$i=!1,this.Ji=0,this.Zi=0,this.te=0,this.ne=0,this.ie=e,this.Wt=t,this.Yt=n,this.jt=i,this.ee=r,this.re()}return a.prototype.send=function(){var e=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,r=arguments[1];return new o.default(function(t,n){e.se(i).then(function(e){t(e)}).catch(function(e){r&&r(e),n(e)})})},a.prototype.abort=function(){this.$i=!0,this.oe.abort()},a.prototype.reset=function(){this.re()},a.prototype.re=function(){this.oe=new XMLHttpRequest,this.oe.open(this.ie,this.Wt,!0),this.oe.responseType=this.Yt.responseType,this.oe.withCredentials=this.Yt.withCredentials;for(var e=(0,r.default)(this.Yt.headers),t=0,n=e.length;t<n;t++){var i=e[t];this.oe.setRequestHeader(i,this.Yt.headers[i])}this.$i=!1},a.prototype.se=function(a){var s=this;return new o.default(function(e,t){var n=!1,i=function(e){s.ue||n||(s.jt.emit(_.default.CDN_DOWNLOAD_ERROR,{url:s.Wt,error:e}),n=!0),t(e)},r=function(){var e=new c.default(u.default.Errors.REQUEST_ABORTED,s.oe.status,s.oe.readyState);0===s.ne&&s.ee&&Date.now()-s.Ji>=s.ee?i(e):t(e)};s.$i?r():s.Yt.timeout&&(s.he=(0,p.createTimeout)(function(){s.abort(),i(new c.default(u.default.Errors.REQUEST_TIMEOUT,s.oe.status,s.oe.readyState))},s.Yt.timeout)),s.oe.onloadend=function(){s.$i?r():s.oe.readyState===u.default.ReadyStates.DONE?-1<s.Yt.validStatusCodes.indexOf(s.oe.status)?(s.te=Date.now(),s.Zi||(s.Zi=Date.now()),s.ue||"arraybuffer"!==s.oe.responseType||s.jt.emit(_.default.CDN_TIMING_EVENT,new d.default(s.Ji,s.Zi,s.te,s.oe.response.byteLength,s.Wt)),e(s.oe.response instanceof ArrayBuffer?new f.default(s.oe.response):s.oe.response)):i(new c.default(u.default.Errors.INVALID_STATUS,s.oe.status,s.oe.readyState)):i(new c.default(u.default.Errors.REQUEST_ERROR,s.oe.status,s.oe.readyState))},s.oe.onprogress=function(e){s.Zi||(s.Zi=Date.now()),s.ne+=e.loaded;var t=new h.default(e.lengthComputable,e.loaded,e.total);s.Yt.events.onprogress(t)},s.oe.onerror=function(){i(new c.default(u.default.Errors.REQUEST_ERROR,s.oe.status,s.oe.readyState))},s.Ji=Date.now(),s.oe.send(a)})},(0,l.default)(a,[{key:"isStreamroot",set:function(e){this.ue=e}},{key:"responseURL",get:function(){return this.oe&&this.oe.readyState===u.default.ReadyStates.DONE&&this.oe.responseURL?this.oe.responseURL:null}}]),a}();t.default=a,e.exports=t.default},function(e,t,n){n(70),n(21),n(33),n(204),n(208),n(209),e.exports=n(2).Promise},function(e,t,n){"use strict";var i,r,a,s,o=n(28),l=n(5),u=n(13),c=n(45),d=n(4),h=n(7),f=n(25),p=n(74),_=n(34),g=n(108),m=n(109).set,v=n(206)(),E=n(76),y=n(110),T=n(207),A=n(111),S=l.TypeError,R=l.process,b=R&&R.versions,I=b&&b.v8||"",C=l.Promise,P="process"==c(R),w=function(){},O=r=E.f,D=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[n(6)("species")]=function(e){e(w,w)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(w)instanceof t&&0!==I.indexOf("6.6")&&-1===T.indexOf("Chrome/66")}catch(e){}}(),N=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},M=function(c,t){if(!c._n){c._n=!0;var n=c._c;v(function(){for(var l=c._v,u=1==c._s,e=0;n.length>e;)!function(e){var t,n,i,r=u?e.ok:e.fail,a=e.resolve,s=e.reject,o=e.domain;try{r?(u||(2==c._h&&k(c),c._h=1),!0===r?t=l:(o&&o.enter(),t=r(l),o&&(o.exit(),i=!0)),t===e.promise?s(S("Promise-chain cycle")):(n=N(t))?n.call(t,a,s):a(t)):s(l)}catch(e){o&&!i&&o.exit(),s(e)}}(n[e++]);c._c=[],c._n=!1,t&&!c._h&&L(c)})}},L=function(a){m.call(l,function(){var e,t,n,i=a._v,r=x(a);if(r&&(e=y(function(){P?R.emit("unhandledRejection",i,a):(t=l.onunhandledrejection)?t({promise:a,reason:i}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",i)}),a._h=P||x(a)?2:1),a._a=void 0,r&&e.e)throw e.v})},x=function(e){return 1!==e._h&&0===(e._a||e._c).length},k=function(t){m.call(l,function(){var e;P?R.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},F=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},U=function(e){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw S("Promise can't be resolved itself");(n=N(e))?v(function(){var t={_w:i,_d:!1};try{n.call(e,u(U,t,1),u(F,t,1))}catch(e){F.call(t,e)}}):(i._v=e,i._s=1,M(i,!1))}catch(e){F.call({_w:i,_d:!1},e)}}};D||(C=function(e){p(this,C,"Promise","_h"),f(e),i.call(this);try{e(u(U,this,1),u(F,this,1))}catch(e){F.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(73)(C.prototype,{then:function(e,t){var n=O(g(this,C));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=P?R.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new i;this.promise=e,this.resolve=u(U,e,1),this.reject=u(F,e,1)},E.f=O=function(e){return e===C||e===s?new a(e):r(e)}),d(d.G+d.W+d.F*!D,{Promise:C}),n(32)(C,"Promise"),n(100)("Promise"),s=n(2).Promise,d(d.S+d.F*!D,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(o||!D),"Promise",{resolve:function(e){return A(o&&this===s?C:this,e)}}),d(d.S+d.F*!(D&&n(107)(function(e){C.all(e).catch(w)})),"Promise",{all:function(e){var s=this,t=O(s),o=t.resolve,l=t.reject,n=y(function(){var i=[],r=0,a=1;_(e,!1,function(e){var t=r++,n=!1;i.push(void 0),a++,s.resolve(e).then(function(e){n||(n=!0,i[t]=e,--a||o(i))},l)}),--a||o(i)});return n.e&&l(n.v),t.promise},race:function(e){var t=this,n=O(t),i=n.reject,r=y(function(){_(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var o=n(5),l=n(109).set,u=o.MutationObserver||o.WebKitMutationObserver,c=o.process,d=o.Promise,h="process"==n(27)(c);e.exports=function(){var n,i,r,e=function(){var e,t;for(h&&(e=c.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t()}catch(e){throw n?r():i=void 0,e}}i=void 0,e&&e.enter()};if(h)r=function(){c.nextTick(e)};else if(!u||o.navigator&&o.navigator.standalone)if(d&&d.resolve){var t=d.resolve(void 0);r=function(){t.then(e)}}else r=function(){l.call(o,e)};else{var a=!0,s=document.createTextNode("");new u(e).observe(s,{characterData:!0}),r=function(){s.data=a=!a}}return function(e){var t={fn:e,next:void 0};i&&(i.next=t),n||(n=t,r()),i=t}}},function(e,t,n){var i=n(5).navigator;e.exports=i&&i.userAgent||""},function(e,t,n){"use strict";var i=n(4),r=n(2),a=n(5),s=n(108),o=n(111);i(i.P+i.R,"Promise",{finally:function(t){var n=s(this,r.Promise||a.Promise),e="function"==typeof t;return this.then(e?function(e){return o(n,t()).then(function(){return e})}:t,e?function(e){return o(n,t()).then(function(){throw e})}:t)}})},function(e,t,n){"use strict";var i=n(4),r=n(76),a=n(110);i(i.S,"Promise",{try:function(e){var t=r.f(this),n=a(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(18)),s=i(n(49)),r=i(n(0)),o=i(n(3)),l=n(50),u=n(12),c=n(44),d=function(){function n(e,t){(0,r.default)(this,n),this.ce=0,this.ae=e,this.fe=t}return n.prototype.send=function(i,r){var n=this;return new s.default(function(t,e){n.le=function(){var n=this,e="function"==typeof i?i():i;"string"!=typeof e&&(e=(0,a.default)(e)),this.ae.send(e).then(function(e){t(e)}).catch(function(e){if(r&&r(e),!n.$i){0===n.ce&&(n.ce=n.fe.MIN_DELAY/n.fe.MIN_FACTOR);var t=(0,l.randomInRange)(n.fe.MIN_FACTOR,n.fe.MAX_FACTOR);n.ce=(0,l.clamp)(n.ce*t,n.fe.MIN_DELAY,n.fe.MAX_DELAY),n.de=(0,u.createTimeout)(function(){n.ae.reset(),n.le()},n.ce)}})}.bind(n),n.le()})},n.prototype.abort=function(){this.$i=!0,this.de&&(this.de.clear(),this.de=null,this.le=c.noop),this.ae.abort()},n.prototype.reset=function(){this.$i=!1,this.de&&(this.de.clear(),this.de=null,this.le=c.noop),this.ce=0,this.ae.reset()},(0,o.default)(n,[{key:"isStreamroot",set:function(e){this.ae.isStreamroot=e}}]),n}();t.default=d,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(49)),r=i(n(0)),s=i(n(3)),o=n(12),l=n(44),u=function(){function n(e,t){(0,r.default)(this,n),this.ve=0,this.ae=e,this.fe=t}return n.prototype.send=function(e,r){var t=this;return new a.default(function(n,i){t.le=function(){var t=this;this.ae.send(e).then(function(e){n(e)}).catch(function(e){r&&r(e),t.$i||(t.ve!==t.fe.RETRY?(t.ve++,t.de=(0,o.createTimeout)(function(){t.ae.reset(),t.le()},t.fe.RETRY_DELAY)):i(e))})}.bind(t),t.le()})},n.prototype.abort=function(){this.$i=!0,this.de&&(this.de.clear(),this.de=null,this.le=l.noop),this.ae.abort()},n.prototype.reset=function(){this.$i=!1,this.de&&(this.de.clear(),this.de=null,this.le=l.noop),this.ve=0,this.ae.reset()},(0,s.default)(n,[{key:"isStreamroot",set:function(e){this.ae.isStreamroot=e}}]),n}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};t.default=function e(){(0,a.default)(this,e),this.routerRequestsCount=0,this.routerRequestsVolume=0,this.routerResponsesVolume=0,this.distributorRequestsCount=0,this.distributorRequestsVolume=0,this.distributorResponsesVolume=0,this.subnetMatcherRequestsCount=0,this.subnetMatcherRequestsVolume=0,this.subnetMatcherResponsesVolume=0,this.usagePayloadsCount=0,this.usagePayloadsVolume=0,this.researchPayloadsVolume=0},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};t.default=function e(){(0,a.default)(this,e),this.routerErrors=0,this.azChanges=0,this.distributorErrors=0,this.subnetMatcherErrors=0},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(3)),s=i(n(1));i(n(104));var o=function(){function n(e,t){var i=this;(0,r.default)(this,n),this.we=0,this.pe=0,this.playbackErrorCount=0,this.Ai=function(e){i.dn=e},this.be=function(e){var t=i.dn&&e?i.dn.getSegmentDuration(e):0;if(0<t)i.we+=t,i.pe=t;else if(0<i.pe)i.we+=i.pe;else{var n=i.me.getStreamInfo().segmentDuration;n&&(i.we+=n,i.pe=n)}},this.jt=e,this.me=t,this.jt.on(s.default.MEDIA_MAP_CREATED,this.Ai),this.jt.on(s.default.MEDIA_SEGMENT_CONSUMED,this.be)}return n.prototype.dispose=function(){this.jt.removeListener(s.default.MEDIA_SEGMENT_CONSUMED,this.be),this.jt.removeListener(s.default.MEDIA_MAP_CREATED,this.Ai)},(0,a.default)(n,[{key:"durationConsumed",get:function(){return this.we}}]),n}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),o=i(n(1)),l=i(n(216)),r=function(){function a(e,t){var n=this,i=t.conf;(0,s.default)(this,a),this.Ee=0,this.Ai=function(e){n.dn=e},this.ye=function(e){if(n.dn&&e&&"video"===e.trackView.type&&"function"==typeof n.dn.getTrackBitrate){var t=n.dn.getTrackBitrate(e.trackView);n.Ee!==t&&(n._e.updateMetric(t),n.Ee=t)}},this.jt=e,this.jt.on(o.default.MEDIA_MAP_CREATED,this.Ai),this.jt.on(o.default.MEDIA_SEGMENT_CONSUMED,this.ye);var r=Math.max(i.ANALYTICS.TRAFFIC_INTERVAL_ARRAY[i.ANALYTICS.TRAFFIC_INTERVAL_ARRAY.length-1],i.ANALYTICS.STATS_INTERVAL);this._e=new l.default(2*r)}return a.prototype.dispose=function(){this.jt.removeListener(o.default.MEDIA_SEGMENT_CONSUMED,this.ye),this.jt.removeListener(o.default.MEDIA_MAP_CREATED,this.Ai)},a.prototype.getAverageBitrate=function(e){return Math.round(this._e.getAverage(e))},a}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=function(){function t(e){(0,a.default)(this,t),this.ge=[{value:0,timeStamp:Date.now()}],this.Te=e}return t.prototype.updateMetric=function(e){this.ge.push({value:e,timeStamp:Date.now()})},t.prototype.getAverage=function(e){if(this.ge.length<1)return 0;var t=Date.now(),n=Math.max(t-Math.min(e,this.Te),this.ge[0].timeStamp),i=0,r=t,a=void 0,s=void 0,o=void 0,l=void 0;for(s=this.ge.length-1;0<=s&&((a=this.ge[s]).timeStamp<=n?(l=r-n,o=!0):l=r-a.timeStamp,i+=a.value*l,r=a.timeStamp,!o);s--);var u=t-this.Te;a&&a.timeStamp<u&&(a.timeStamp=u,0<s&&this.ge.splice(0,s));var c=t-n;return 0<c?i/c:0},t}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(3)),s=(i(n(46)),i(n(1))),o=i(n(218)),l=i(n(113)),u=function(){function i(e,t){var n=this;(0,r.default)(this,i),this.Ni=function(e){n.Oe.setState(e)},this.jt=e,this.jt.on(s.default.NETWORK_TYPE_CHANGED,this.Ni),this.Oe=new o.default(l.default),this.Oe.setState(t)}return i.prototype.dispose=function(){this.jt.removeListener(s.default.NETWORK_TYPE_CHANGED,this.Ni),this.Oe.dispose()},i.prototype.Ae=function(e){return this.Oe.getStats()[e].timeSpent},(0,a.default)(i,[{key:"timeSpentOnWifi",get:function(){return this.Ae(l.default.WIFI_AND_ETHERNET)}},{key:"timeSpentOnCellular",get:function(){return this.Ae(l.default.CELLULAR_AND_OTHERS)}},{key:"timeSpentWithoutNetwork",get:function(){return this.Ae(l.default.NONE)}}]),i}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(47)),a=i(n(102)),s=i(n(0)),o=function(){function i(e){(0,s.default)(this,i),this.Me={},this.Se=(0,a.default)(e);for(var t=(0,r.default)(e),n=0;n<t.length;n++)this.Me[e[t[n]]]={count:0,timeSpent:0}}return i.prototype.getStats=function(){return this.Re(this.Lt),this.Me},i.prototype.setState=function(e){e!==this.Lt&&(this.Se.indexOf(e)<0||(this.Ce(this.Lt),this.Lt=e,this.De(this.Lt)))},i.prototype.pause=function(){this.Ce(this.Lt)},i.prototype.resume=function(){this.De(this.Lt)},i.prototype.dispose=function(){this.pause()},i.prototype.Ce=function(e){e&&(this.Re(e),this.Me[e].startTimeStamp=null)},i.prototype.Re=function(e){if(e){var t=this.Me[e],n=Date.now();t.timeSpent+=(n-t.startTimeStamp)/1e3,t.startTimeStamp=n}},i.prototype.De=function(e){if(e){var t=this.Me[e];t.count++,t.startTimeStamp=Date.now()}},i}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(0)),s=i(n(3)),o=i(n(113)),l=i(n(75)),u=i(n(1)),c={ethernet:o.default.WIFI_AND_ETHERNET,cellular:o.default.CELLULAR_AND_OTHERS,bluetooth:o.default.CELLULAR_AND_OTHERS,mixed:o.default.CELLULAR_AND_OTHERS,none:o.default.NONE,wifi:o.default.WIFI_AND_ETHERNET,wimax:o.default.CELLULAR_AND_OTHERS},r=function(){function r(e){var t=this,n=e.eventBus,i=e.environment;(0,a.default)(this,r),this.Ne="",this.je=function(){var e=void 0;window.navigator.connection&&"string"==typeof window.navigator.connection.type&&(e=c[window.navigator.connection.type]),e=e||t.Ie(),t.Ne!==e&&(t.Ne=e,t.jt.emit(u.default.NETWORK_TYPE_CHANGED,e))},this.jt=n,this.ke=i,this.je(),window.navigator.connection&&window.navigator.connection.addEventListener("change",this.je)}return r.prototype.dispose=function(){window.navigator.connection&&window.navigator.connection.removeEventListener("change",this.je)},r.prototype.Ie=function(){var e=this.ke.getPlatform();return e===l.default.WEB_MOBILE||e===l.default.ANDROID_WEBVIEW?o.default.CELLULAR_AND_OTHERS:o.default.WIFI_AND_ETHERNET},(0,s.default)(r,[{key:"currentType",get:function(){return this.Ne}}]),r}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),o=i(n(64)),r=function(){function a(e,t,n,i){var r=this;(0,s.default)(this,a),this.Le=function(e){if(r.Pe.playbackErrorCount++,r.kt.ENABLE_PLAYBACK_ERROR_LOGGING&&"string"==typeof e&&""!==e){var t=e.substring(0,125);r.Ue.notifyError(new Error("Playback error: "+t))}},this.cn=e,this.kt=t,this.Ue=n,this.Pe=i,this.cn.on(o.default.PLAYBACK_ERROR,this.Le)}return a.prototype.dispose=function(){this.cn.removeListener(o.default.PLAYBACK_ERROR,this.Le)},a}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=(i(n(103)),i(n(222))),s=i(n(223)),o=i(n(224)),l=i(n(1)),u=i(n(114)),c=function(){function n(e){var t=this;(0,r.default)(this,n),this.Fe=null,this.Be=null,this.xe=function(e){t.qt.configManager.setAz(e),t.Fe?t.qt.eventBus.emit(l.default.BACKEND_URLS_CHANGED):(t.Fe=new s.default(t.qt),t.Fe.call())},this.Ge=function(e){t.qt.configManager.setDistributorResponse(e),t.qt.configManager.isContentActivated()?t.Fe&&t.Fe.fetchInjectedConf(u.default.STREAMROOTER,"1.4.3"):t.qt.eventBus.emit(l.default.DISTRIBUTOR_ANSWER_HANDLED)},this.Si=function(e){e[u.default.STREAMROOTER]&&(t.qt.configManager.injectConf(e[u.default.STREAMROOTER].config,t.qt.errorFunnel),t.qt.eventBus.emit(l.default.LOCAL_CONF_UPDATED))},this.He=function(){t.qt.configManager.getPropertyParameters().subnetMatching?(t.Be||(t.Be=new o.default(t.qt)),t.Be.call()):t.qt.eventBus.emit(l.default.DISTRIBUTOR_ANSWER_HANDLED)},this.Ve=function(e){t.qt.configManager.setSiteId(e.siteId),t.qt.eventBus.emit(l.default.DISTRIBUTOR_ANSWER_HANDLED)},this.We=function(){var e=t.qt.configManager.getVersions().peerAgentVersion;t.Fe&&t.Fe.fetchInjectedConf(u.default.PEERAGENT,e)},this.qe=function(){var e=t.qt.configManager.getVersions().compassVersion;t.Fe&&t.Fe.fetchInjectedConf(u.default.COMPASS,e)},this.qt=e,this.ze=new a.default(e),this.qt.eventBus.on(l.default.ROUTER_AZ_CHANGED,this.xe),this.qt.eventBus.on(l.default.DISTRIBUTOR_ANSWERED,this.Ge),this.qt.eventBus.on(l.default.MODULE_CONF_INJECTED,this.Si),this.qt.eventBus.on(l.default.LOCAL_CONF_UPDATED,this.He),this.qt.eventBus.on(l.default.SUBNET_MATCHER_ANSWERED,this.Ve),this.qt.eventBus.on(l.default.MEDIA_MAP_PROCESSED,this.We),this.qt.eventBus.on(l.default.COMPASS_LOADED,this.qe)}return n.prototype.dispose=function(){this.qt.eventBus.removeListener(l.default.ROUTER_AZ_CHANGED,this.xe),this.qt.eventBus.removeListener(l.default.DISTRIBUTOR_ANSWERED,this.Ge),this.qt.eventBus.removeListener(l.default.MODULE_CONF_INJECTED,this.Si),this.qt.eventBus.removeListener(l.default.LOCAL_CONF_UPDATED,this.He),this.qt.eventBus.removeListener(l.default.SUBNET_MATCHER_ANSWERED,this.Ve),this.qt.eventBus.removeListener(l.default.MEDIA_MAP_PROCESSED,this.We),this.qt.eventBus.removeListener(l.default.COMPASS_LOADED,this.qe),this.Fe&&this.Fe.dispose(),this.Be&&this.Be.dispose(),this.ze.dispose()},n.prototype.call=function(){this.ze.call()},n}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(18)),c=i(n(0)),r=i(n(3)),d=(i(n(46)),i(n(1))),h=i(n(19)),a=(i(n(48)),n(12)),s=function(){function l(e){var a=this,t=e.eventBus,n=e.configManager,i=e.httpRequestFactory,r=e.costStats,s=e.backendStats,o=e.errorFunnel;(0,c.default)(this,l),this.Bn=null,this.Ye=function(){a.Ke&&a.Ke.abort();var e={streamrootKey:a.me.getStreamrootKey(),content:a.me.getContentId()},t={timeout:a.me.conf.REQUEST_RETRY.ROUTER.TIMEOUT,headers:{"Content-Type":"application/json"}},n=(0,u.default)(e),i=a.me.conf.REQUEST_RETRY.ROUTER,r=a.me.getRouterUrl();a.Xe.routerRequestsCount++,a.Xe.routerRequestsVolume+=n.length,a.Ke=a.Qe.getRequest(h.default.Methods.POST,r,t,i),a.Ke.isStreamroot=!0,a.Ke.send(n,function(){a.$e.routerErrors++}).then(function(e){a.Ke=null,a.Xe.routerResponsesVolume+=(0,u.default)(e).length,a.Bn!==e.path&&(a.Bn&&a.$e.azChanges++,a.Bn=e.path,a.jt.emit(d.default.ROUTER_AZ_CHANGED,a.Bn)),a.Je()}).catch(function(e){a.Ke=null,a.Ue.notify("Request to router failed",e.status+" "+e.message,"error")})},this.He=function(){a.me.conf.ROUTER_POLL_INTERVAL!==a.Ze&&(a.Ze=a.me.conf.ROUTER_POLL_INTERVAL,a.Je())},this.jt=t,this.me=n,this.Qe=i,this.Xe=r,this.$e=s,this.Ue=o,this.Ze=n.conf.ROUTER_POLL_INTERVAL,this.jt.on(d.default.LOCAL_CONF_UPDATED,this.He)}return l.prototype.dispose=function(){this.tr&&(this.tr.clear(),this.tr=null),this.Ke&&(this.Ke.abort(),this.Ke=null),this.jt.removeListener(d.default.LOCAL_CONF_UPDATED,this.He)},l.prototype.call=function(){this.Ye()},l.prototype.Je=function(){this.tr&&this.tr.clear(),this.tr=(0,a.createTimeout)(this.Ye,this.Ze)},(0,r.default)(l,[{key:"az",get:function(){return this.Bn}}]),l}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(80)),d=i(n(18)),a=i(n(23)),u=i(n(72)),h=i(n(0)),f=(i(n(46)),i(n(1))),p=i(n(19));i(n(48));var r=function(){function l(e){var t=e.eventBus,n=e.configManager,i=e.environment,r=e.httpRequestFactory,a=e.costStats,s=e.backendStats,o=e.errorFunnel;(0,h.default)(this,l),this.Ke=null,this.nr=new u.default,this.jt=t,this.me=n,this.ke=i,this.Qe=r,this.Xe=a,this.$e=s,this.Ue=o}return l.prototype.dispose=function(){this.Ke&&(this.Ke.abort(),this.Ke=null);var e=!0,t=!1,n=void 0;try{for(var i,r=(0,a.default)(this.nr.values());!(e=(i=r.next()).done);e=!0)i.value.abort()}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}this.nr.clear()},l.prototype.call=function(){var t=this;this.Ke&&this.Ke.abort();var e=this.me.getDistributorUrl()+"v1/config/web",n=this.me.getVersions().integrationTag,i={streamrootKey:this.me.getStreamrootKey(),content:this.me.getContentId(),property:this.me.getProperty(),compassProperty:this.me.getCompassProperty(),deviceInfo:{platform:this.ke.getPlatform(),browserName:this.ke.getBrowserName(),browserVersion:this.ke.getBrowserVersion(),os:this.ke.getOperatingSystemName(),integrationTag:n}},r={timeout:this.me.conf.REQUEST_RETRY.DISTRIBUTOR.TIMEOUT,headers:{"Content-Type":"application/json"}},a=(0,d.default)(i),s=this.me.conf.REQUEST_RETRY.DISTRIBUTOR;this.Xe.distributorRequestsCount++,this.Xe.distributorRequestsVolume+=a.length,this.Ke=this.Qe.getRequest(p.default.Methods.POST,e,r,s),this.Ke.isStreamroot=!0,this.Ke.send(a,function(){t.$e.distributorErrors++}).then(function(e){t.Ke=null,t.Xe.distributorResponsesVolume+=(0,d.default)(e).length,t.jt.emit(f.default.DISTRIBUTOR_ANSWERED,e)}).catch(function(e){t.Ke=null,t.Ue.notify("Injected conf request to distributor failed",e.status+" "+e.message,"error")})},l.prototype.fetchInjectedConf=function(t,e){var n=this,i=this.nr.get(t);i&&i.abort();var r=this.me.getDistributorUrl()+"v1/injectedConf2",a={streamrootKey:this.me.getStreamrootKey(),deviceFamily:this.ke.getPlatform(),modules:(0,c.default)({},t,e)},s={timeout:this.me.conf.REQUEST_RETRY.DISTRIBUTOR.TIMEOUT,headers:{"Content-Type":"application/json"}},o=(0,d.default)(a),l=this.me.conf.REQUEST_RETRY.DISTRIBUTOR;this.Xe.distributorRequestsCount++,this.Xe.distributorRequestsVolume+=o.length;var u=this.Qe.getRequest(p.default.Methods.POST,r,s,l);u.isStreamroot=!0,u.send(o).then(function(e){n.nr.delete(t),n.Xe.distributorResponsesVolume+=(0,d.default)(e).length,n.jt.emit(f.default.MODULE_CONF_INJECTED,e)}).catch(function(e){n.nr.delete(t),n.Ue.notify("Injected conf request to distributor failed",e.status+" "+e.message,"error")}),this.nr.set(t,u)},l}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var p=i(n(18)),r=i(n(0)),_=i(n(1)),g=i(n(19)),a=n(225),s=function(){function t(e){(0,r.default)(this,t),this.Ke=null,this.qt=e}return t.prototype.dispose=function(){this.Ke&&(this.Ke.abort(),this.Ke=null)},t.prototype.call=function(){var t=this;(0,a.getLocalIpv4Addresses)(function(e){t.Ye(e)})},t.prototype.Ye=function(e){var t=this;this.Ke&&this.Ke.abort();var n=this.qt,i=n.configManager,r=n.backendStats,a=n.costStats,s=n.httpRequestFactory,o=n.eventBus,l=n.errorFunnel,u=i.getSubnetMatcherUrl(),c={srKey:i.getStreamrootKey(),privateIPAddresses:e},d={timeout:i.conf.REQUEST_RETRY.SUBNET_MATCHER.TIMEOUT,headers:{"Content-Type":"application/json"}},h=(0,p.default)(c),f=i.conf.REQUEST_RETRY.SUBNET_MATCHER;a.distributorRequestsCount++,a.distributorRequestsVolume+=h.length,this.Ke=s.getRequest(g.default.Methods.POST,u,d,f),this.Ke.isStreamroot=!0,this.Ke.send(h,function(){r.subnetMatcherErrors++}).then(function(e){t.Ke=null,a.subnetMatcherResponsesVolume+=(0,p.default)(e).length,o.emit(_.default.SUBNET_MATCHER_ANSWERED,e)}).catch(function(e){t.Ke=null,l.notify("Request to subnet matcher failed",e.status+" "+e.message,"error")})},t}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalIpv4Addresses=function(n){var e=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(e&&e.prototype.createDataChannel){var i=new e({iceServers:[]}),r=[],a=/[0-9]{1,3}(?:\.[0-9]{1,3}){3}/g;i.onicecandidate=function(e){if(e.candidate){var t=a.exec(e.candidate.candidate);t&&r.push(t[0])}else i.close(),n(r)},i.onnegotiationneeded=function(){try{i.createOffer().then(function(e){return i.setLocalDescription(e)}).catch(function(){i.close(),n([])})}catch(e){i.close(),n([])}},i.createDataChannel("dummy")}else n([])}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(49)),s=i(n(0)),o=i(n(40)),l=i(n(1)),r=function(){function r(e){var t=e.eventBus,n=e.dnaConfig,i=e.errorFunnel;(0,s.default)(this,r),this.jt=t,this.pn=n,this.Ue=i,this.ir=null}return r.prototype.load=function(){var t=this,n=this.er();this.rr(n).then(function(){if(!window["sr-dna-client"])throw new Error("The script is not a DNA Client bundle");t.sr(window["sr-dna-client"])}).catch(function(e){t.Ue.notify("Unable to load the DNA Client",e.message+" (url="+n+")","error")})},r.prototype.er=function(){if(this.pn.libPath)return this.pn.libPath+"/dna-client.js";if(this.pn.libHost){var e=new o.default("https://cdn.streamroot.io/dna-client/1.4.3/dna-client.js");return e.set("host",this.pn.libHost),e.href}return"https://cdn.streamroot.io/dna-client/1.4.3/dna-client.js"},r.prototype.rr=function(n){var i=document.createElement("script");return this.ir=i,document.body&&document.body.appendChild(i),new a.default(function(e,t){i.onload=function(){e()},i.onerror=function(){t(new Error("Failed to load the script"))},i.src=n})},r.prototype.sr=function(e){var t=new e;this.jt.emit(l.default.DNA_CLIENT_LOADED,t)},r.prototype.dispose=function(){document.body&&this.ir&&(document.body.removeChild(this.ir),this.ir=null)},r}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=function(){function e(){(0,a.default)(this,e),this.or=0,this.ur=0,this.hr=0}return e.prototype.cr=function(e){return{dnaDownload:this.or+e.p2p,cdnDownload:this.ur+e.cdn,dnaUpload:this.hr+e.upload}},e.prototype.ar=function(e){return{dnaDownload:e.p2p,cdnDownload:e.cdn,dnaUpload:e.upload}},e.prototype.lr=function(e){return{dnaSources:e.peers}},e.prototype.incrementHistorical=function(e){this.or+=e.p2p,this.ur+=e.cdn,this.hr+=e.upload},e.prototype.get=function(e){return{allContents:this.cr(e),currentContent:this.ar(e),realtime:this.lr(e)}},e}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0));i(n(112)),t.default=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;(0,r.default)(this,e),this.p2p=0,this.cdn=0,this.upload=0,this.peers=0,this.confLabel="",t&&(this.cdn=t.cdnDownloaded)},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(230)),s=i(n(231)),o=i(n(236)),l=i(n(237)),u=i(n(238)),c=i(n(239)),d=i(n(1)),h=n(12),f=function(){function i(e,t){var n=this;(0,r.default)(this,i),this.dr=[],this.vr=null,this.wr=!1,this.pr=0,this.br=0,this.mr=function(){n.wr=!0},this.Er=function(){n.wr=!1},this.yr=function(){++n.br===n.me.conf.ANALYTICS.REQUESTED_SEGMENTS_COUNT_TO_SEND_CONFIG&&n.sendSupportPayload()},this._r=function(){n.wr||n.gr("traffic","traffic-v2")},this.Tr=function(){n.gr("stats","stats")},this.Or=function(){n.gr("control","stats/control")},this.Ar=function(){n.gr("connections","stats/connections")},this.jt=e.eventBus,this.me=e.configManager,this.Mr=new s.default(e,t),this.Sr=new o.default(e),this.Rr=new l.default(e,this.Sr,this.dr),this.Cr=new c.default,this.me.isLive()&&(this.vr=new u.default(e.eventBus,t.mediaElement)),this.jt.on(d.default.STOP_REPORTING_TRAFFIC,this.mr),this.jt.on(d.default.RESTART_REPORTING_TRAFFIC,this.Er),this.jt.on(d.default.MEDIA_SEGMENT_REQUESTED,this.yr),this.re()}return i.prototype.attachProvider=function(e){e&&-1===this.dr.indexOf(e)&&this.dr.push(e)},i.prototype.sendSupportPayload=function(){this.Rr.sendPayload()},i.prototype.detachProvider=function(e){if(e){var t=this.dr.indexOf(e);-1<t&&this.dr.splice(t,1)}},i.prototype.re=function(){(this.me.isContentActivated()||this.me.isCompassRampUpActivated())&&(this.me.conf.ANALYTICS.ENABLE_STATS_SENDER&&this.Dr(),this.me.conf.ANALYTICS.ENABLE_CONTROL_SENDER&&this.Nr(),this.me.conf.ANALYTICS.ENABLE_CONNECTIONS_SENDER&&this.jr(),(this.me.isRampUpActivated()||this.me.isCompassRampUpActivated())&&(this.Ir(),this.jt.on(d.default.MEDIA_ENDED,this._r),window.addEventListener("beforeunload",this._r)),this.attachProvider(this.Mr))},i.prototype.dispose=function(){this.Cr.clearAll(),this.vr&&this.vr.dispose(),this.jt.removeListener(d.default.STOP_REPORTING_TRAFFIC,this.mr),this.jt.removeListener(d.default.RESTART_REPORTING_TRAFFIC,this.Er),this.jt.removeListener(d.default.MEDIA_SEGMENT_FETCHED,this.yr),this.jt.removeListener(d.default.MEDIA_ENDED,this._r),window.removeEventListener("beforeunload",this._r)},i.prototype.Ir=function(){var e=this;if(this.pr<this.me.conf.ANALYTICS.TRAFFIC_INTERVAL_ARRAY.length-1){var t=(0,h.createTimeout)(function(){e._r(),e.Ir()},this.me.conf.ANALYTICS.TRAFFIC_INTERVAL_ARRAY[this.pr]);this.Cr.register(t),this.pr++}else{var n=this.me.conf.ANALYTICS.TRAFFIC_INTERVAL_ARRAY[this.me.conf.ANALYTICS.TRAFFIC_INTERVAL_ARRAY.length-1],i=(0,h.createInterval)(this._r,n);this.Cr.register(i)}},i.prototype.Dr=function(){var e=(0,h.createInterval)(this.Tr,this.me.conf.ANALYTICS.STATS_INTERVAL);this.Cr.register(e)},i.prototype.Nr=function(){var e=(0,h.createInterval)(this.Or,this.me.conf.ANALYTICS.CONTROL_INTERVAL);this.Cr.register(e)},i.prototype.jr=function(){var e=(0,h.createInterval)(this.Ar,this.me.conf.ANALYTICS.CONNECTIONS_INTERVAL);this.Cr.register(e)},i.prototype.gr=function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n;if(0!==this.dr.length){var t=this.dr.reduce(function(e,t){return(0,a.default)(e,t.getAnalytics(n))},{});this.Sr.send(t,e)}},i}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function _(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,a,s,o,l=!0,u=!1,c=void 0;try{for(var d,h=(0,m.default)(n);!(l=(d=h.next()).done);l=!0){var f=d.value;if(g(f))for(var p in f)"__proto__"!==p&&(r=e,a=f[p],o=r[s=p],g(a)&&g(o)?_(o,a):r[s]=a)}}catch(e){u=!0,c=e}finally{try{!l&&h.return&&h.return()}finally{if(u)throw c}}return e}function g(e){return"function"==typeof e||"object"===(void 0===e?"undefined":(0,r.default)(e))&&null!==e&&!Array.isArray(e)}var r=i(n(31)),m=i(n(23));e.exports=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(232)),s=i(n(233)),o=i(n(234)),l=i(n(235)),u=function(){function n(e,t){(0,r.default)(this,n),this.kr=new a.default(e,t),this.Lr=new s.default(e,t),this.Pr=new o.default(e),this.Ur=new l.default(e)}return n.prototype.dispose=function(){},n.prototype.getAnalytics=function(e){return this.Fr(e)},n.prototype.Fr=function(e){switch(e){case"traffic":return this.kr.calculatePayload();case"stats":return this.Lr.calculatePayload();case"control":return this.Pr.calculatePayload();case"support":return this.Ur.calculatePayload();default:return{}}},n}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),s=(i=r)&&i.__esModule?i:{default:i},o=n(35),a=function(){function a(e,t){var n=e.configManager,i=e.transferStats,r=e.bitrateStats;(0,s.default)(this,a),this.Br=new o.Delta,this.xr=new o.Delta,this.$n=new o.Delta,this.Jn=new o.Delta,this.Gr=new o.Delta,this.Hr=new o.Delta,this.Vr=new o.Delta,this.me=n,this.Wr=i,this.qr=r,this.ki=t,this.zr=Date.now()}return a.prototype.calculatePayload=function(){var e=this.Yr(),t=this.ki.getQoSAnalytics(),n=t?Math.round(1e3*Math.max(this.Br.calcDelta(t.timeSpentPlaying),0)):0,i=t?Math.round(1e3*Math.max(this.xr.calcDelta(t.timeSpentRebuffering),0)):0,r={timespan:e,live:this.me.isLive(),bitrate:this.qr.getAverageBitrate(e),played:0<n?n:void 0,buffered:0<i?i:void 0,dna:void 0,compass:void 0};if(this.me.conf.QOS_P2P_DISABLED){var a=this.$n.calcDelta(this.Wr.cdnDownloaded);r.dna={cdn:a,p2p:0,upload:0}}if(this.me.conf.QOS_COMPASS_DISABLED){var s={id:"sr-default",bytes:this.$n.calcDelta(this.Wr.cdnDownloaded),dTime:this.Jn.calcDelta(this.Wr.cdnDownloadedTime)};r.compass={cdns:[s]}}return this.Kr(),r},a.prototype.Yr=function(){return Date.now()-this.zr},a.prototype.Kr=function(){this.zr=Date.now()},a}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(24)),u=i(n(0)),c=n(35),r=n(50),a=function(){function l(e,t){var n=e.configManager,i=e.transferStats,r=e.backendStats,a=e.bitrateStats,s=e.mediaEngineStats,o=e.networkTypeStats;(0,u.default)(this,l),this.$n=new c.Delta,this.Jn=new c.Delta,this.we=new c.Delta,this.Xr=new c.Delta,this.Qr=new c.Delta,this.$r=new c.Delta,this.Jr=new c.Delta,this.Zr=new c.Delta,this.ns=new c.Delta,this.es=new c.Delta,this.me=n,this.Wr=i,this.$e=r,this.qr=a,this.Pe=s,this.rs=o,this.ki=t,this.ss=Date.now(),this.zr=Date.now()}return l.prototype.calculatePayload=function(){var e=this.Yr(),t=this.me.getVersions(),n=t.mediaEngineTag,i=t.integrationTag,r=this.us(),a=this.es.calcDelta(this.Pe.playbackErrorCount),s=(0,o.default)({timespan:e,sessionDuration:this.hs(),live:this.me.isLive(),qosTester:this.me.conf.QOS_P2P_DISABLED,compassQosTester:this.me.conf.QOS_COMPASS_DISABLED,rampUpActivated:this.me.isRampUpActivated(),sdkConfLabel:this.me.conf.CONF_LABEL,mediaEngine:n,integrationTag:i,siteId:this.me.getSiteId()||void 0,bitrate:this.qr.getAverageBitrate(e),transfers:this.cs(),backend:this.as(),qos:this.ki.getFormattedQoSAnalytics(),options:void 0},r,{aggPlaybackErrorCount:this.Pe.playbackErrorCount,playbackErrorCount:a});return this.me.isLive()&&(s.latency=this.me.getLatency()),this.me.conf.QOS_P2P_DISABLED&&(s.options={p2pDownloadAlwaysOn:!1,p2pUploadAlwaysOn:!1}),this.Kr(),s},l.prototype.cs=function(){var e=this.Wr,t=this.$n.calcDelta(e.cdnDownloaded);return{cdnDownloaded:t,cdnDownloadedTime:this.Jn.calcDelta(this.Wr.cdnDownloadedTime),cdnUseful:t,cdnConsumed:t,durationConsumed:this.we.calcDelta(this.Pe.durationConsumed)}},l.prototype.as=function(){var e=this.$e;return{routerErrors:this.Xr.calcDelta(e.routerErrors),azChanges:this.Qr.calcDelta(e.azChanges),distributorErrors:this.$r.calcDelta(e.distributorErrors)}},l.prototype.us=function(){return{timeSpentOnWifi:(0,r.toDecimal)(this.Jr.calcDelta(this.rs.timeSpentOnWifi),2),timeSpentOnCellular:(0,r.toDecimal)(this.Zr.calcDelta(this.rs.timeSpentOnCellular),2),timeSpentWithoutNetwork:(0,r.toDecimal)(this.ns.calcDelta(this.rs.timeSpentWithoutNetwork),2)}},l.prototype.hs=function(){return Date.now()-this.ss},l.prototype.Yr=function(){return Date.now()-this.zr},l.prototype.Kr=function(){this.zr=Date.now()},l}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=n(35),o=function(){function i(e){var t=e.configManager,n=e.costStats;(0,a.default)(this,i),this.fs=new s.Delta,this.ls=new s.Delta,this.ds=new s.Delta,this.vs=new s.Delta,this.ws=new s.Delta,this.ps=new s.Delta,this.bs=new s.Delta,this.ms=new s.Delta,this.Es=new s.Delta,this.ys=new s.Delta,this.gs=new s.Delta,this.Ts=new s.Delta,this.me=t,this.Xe=n,this.ss=Date.now(),this.zr=Date.now()}return i.prototype.calculatePayload=function(){var e=this.Yr(),t=this.me.getVersions(),n=t.mediaEngineTag,i=t.integrationTag,r={timespan:e,sessionDuration:this.hs(),live:this.me.isLive(),qosTester:this.me.conf.QOS_P2P_DISABLED,compassQosTester:this.me.conf.QOS_COMPASS_DISABLED,sdkConfLabel:this.me.conf.CONF_LABEL,mediaEngine:n,integrationTag:i,cost:this.Os()};return this.Kr(),r},i.prototype.Os=function(){var e=this.Xe;return{routerRequestsCount:this.fs.calcDelta(e.routerRequestsCount),routerRequestsVolume:this.ls.calcDelta(e.routerRequestsVolume),routerResponsesVolume:this.ds.calcDelta(e.routerResponsesVolume),distributorRequestsCount:this.vs.calcDelta(e.distributorRequestsCount),distributorRequestsVolume:this.ws.calcDelta(e.distributorRequestsVolume),distributorResponsesVolume:this.ps.calcDelta(e.distributorResponsesVolume),subnetMatcherRequestsCount:this.bs.calcDelta(e.subnetMatcherRequestsCount),subnetMatcherRequestsVolume:this.ms.calcDelta(e.subnetMatcherRequestsVolume),subnetMatcherResponsesVolume:this.Es.calcDelta(e.subnetMatcherResponsesVolume),usagePayloadsCount:this.ys.calcDelta(e.usagePayloadsCount),usagePayloadsVolume:this.gs.calcDelta(e.usagePayloadsVolume),researchPayloadsVolume:this.Ts.calcDelta(e.researchPayloadsVolume)}},i.prototype.hs=function(){return Date.now()-this.ss},i.prototype.Yr=function(){return Date.now()-this.zr},i.prototype.Kr=function(){this.zr=Date.now()},i}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=function(){function n(e){var t=e.configManager;(0,a.default)(this,n),this.me=t}return n.prototype.calculatePayload=function(){return{}},n}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(18)),u=i(n(36)),o=i(n(0)),c=i(n(66)),d=i(n(19));i(n(48));var r=function(){function s(e){var t=e.configManager,n=e.environment,i=e.httpRequestFactory,r=e.costStats,a=e.errorFunnel;(0,o.default)(this,s),this.me=t,this.ke=n,this.Qe=i,this.Xe=r,this.Ue=a,this.As=c.default.v4()}return s.prototype.send=function(e,t){var n=this;(0,u.default)(e,{customer:this.me.getStreamrootKey(),content:this.me.getContentId(),token:this.As,platform:this.ke.getPlatform()});var i=(0,l.default)(e);switch(t?t.split("/").pop():""){case"traffic-v2":this.Xe.usagePayloadsCount++,this.Xe.usagePayloadsVolume+=i.length;break;default:this.Xe.researchPayloadsVolume+=i.length}var r=""+this.me.getAnalyticsUrl()+t,a={timeout:this.me.conf.REQUEST_RETRY.ANALYTICS.TIMEOUT,headers:{"Content-Type":"application/json"}},s=this.me.conf.REQUEST_RETRY.ANALYTICS,o=this.Qe.getRequest(d.default.Methods.POST,r,a,s);o.isStreamroot=!0,o.send(i).catch(function(e){n.Ue.notify("Could not send analytics payload",e.status+" "+e.message,"warning")})},s}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var S=i(n(23)),R=i(n(24)),s=i(n(0)),r=function(){function a(e,t,n){var i=e.configManager,r=e.peerAgentCounter;(0,s.default)(this,a),this.Ms=!1,this.me=i,this.Sr=t,this.dr=n,this.Ss=r}return a.prototype.sendPayload=function(){if(!this.Ms){var e=this.me.getPropertyParameters(),t={requestedProperty:e.requested,usedProperty:e.name,ssaiEnabled:e.ssaiEnabled,activationRatio:e.activationRatio,superSeederRatio:e.superSeederRatio,wifiEthernetUpload:e.wifiEthernetUpload,wifiEthernetDownload:e.wifiEthernetDownload,cellularOtherUpload:e.cellularOtherUpload,cellularOtherDownload:e.cellularOtherDownload},n=this.me.getStreamInfo(),i=n.segmentDuration,r=n.playListLength,a=n.trackCount,s={contentUrl:this.me.getContentUrl(),segmentDuration:i,playlistLength:r,videoFormat:this.me.getStreamType(),formatDetails:void 0,live:this.me.isLive(),dvr:void 0,trackCount:a,subtitles:void 0,multiAudio:void 0,latency:this.me.getLatency(),parsingDuration:void 0,abrStrategy:this.me.getAbrStrategy()},o=this.me.getVersions().integrationTag,l=this.me.getMediaEngineInfo(),u={ssai:void 0,cdn:void 0,mediaEngine:l.name,mediaEngineVersion:l.version,player:void 0,playerVersion:void 0},c=this.me.getPlayerInfo();null!=c&&(u.player=c.name,u.playerVersion=c.version);var d=(0,R.default)({backendHost:this.me.getBackendHost()},this.me.getBackendUrls()),h={integrationTag:o,deliveryMethod:this.me.getDeliveryMethod(),sdkConfLabel:this.me.conf.CONF_LABEL},f={asyncLoadingOption:this.me.getAsyncLoadingOption(),siteId:this.me.getSiteId()||void 0,hostingOption:this.me.getHostingOption(),bundleId:void 0},p={href:window&&window.location?window.location.href:"",origin:window?window.origin:"",referrer:document?document.referrer:""},_={activationStatus:this.me.getActivationStatus(),properties:t,media:s,videoWorkflow:u,backend:d,srElements:h,srOptions:f,webSite:p,peerAgentCounter:this.Ss,statsSender:this.me.conf.ANALYTICS.ENABLE_STATS_SENDER,controlSender:this.me.conf.ANALYTICS.ENABLE_CONTROL_SENDER,connectionsSender:this.me.conf.ANALYTICS.ENABLE_CONNECTIONS_SENDER},g={},m=!0,v=!1,E=void 0;try{for(var y,T=(0,S.default)(this.dr);!(m=(y=T.next()).done);m=!0){var A=y.value;g=(0,R.default)({},g,A.getAnalytics("support"))}}catch(e){v=!0,E=e}finally{try{!m&&T.return&&T.return()}finally{if(v)throw E}}_.srElements=(0,R.default)({},_.srElements,g),this.Sr.send(_,"support"),this.Ms=!0}},a}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(1)),s=n(12),o=function(){function n(e,t){(0,r.default)(this,n),l.call(this),this.oi=t,this.jt=e,this.oi&&(this.Rs=(0,s.createInterval)(this.Cs,100)),this.jt.on(a.default.MEDIA_ELEMENT_ATTACHED,this.Ds),this.jt.on(a.default.MEDIA_ELEMENT_DETACHED,this.Ns)}return n.prototype.dispose=function(){this.jt.removeListener(a.default.MEDIA_ELEMENT_ATTACHED,this.Ds),this.jt.removeListener(a.default.MEDIA_ELEMENT_DETACHED,this.Ns),this.oi=null,this.Rs&&(this.Rs.clear(),this.Rs=null)},n}(),l=function(){var i=this;this.oi=null,this.Rs=null,this.Ds=function(e){i.oi=e,i.Rs||(i.Rs=(0,s.createInterval)(i.Cs,100))},this.Ns=function(){i.oi=null,i.Rs&&(i.Rs.clear(),i.Rs=null)},this.Cs=function(){if(i.oi){var e=i.oi,t=e.duration,n=e.currentTime;t&&t-n<.3&&(i.jt.emit(a.default.MEDIA_ENDED),i.dispose())}}};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(23)),r=i(n(72)),a=i(n(0)),o=function(){function e(){(0,a.default)(this,e),this.js=new r.default}return e.prototype.register=function(e){var t=e.name;return!this.js.has(t)&&(this.js.set(t,e),!0)},e.prototype.registerAs=function(e,t){return!this.js.has(e)&&(t.name=e,this.js.set(e,t),!0)},e.prototype.clear=function(e){return!!e&&this.clearNamedTimer(e.name)},e.prototype.clearNamedTimer=function(e){var t=this.js.get(e);return!!t&&(t.clear(),this.js.delete(t.name))},e.prototype.clearAll=function(){var e=!0,t=!1,n=void 0;try{for(var i,r=(0,s.default)(this.js.values());!(e=(i=r.next()).done);e=!0){var a=i.value;this.clear(a)}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}},e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),r=i(n(3)),o=i(n(241)),l=i(n(242)),u=i(n(64)),c=i(n(1)),d=i(n(243)),h=n(12),a=function(){function a(e,t){var n=this,i=e.eventBus,r=e.environment;(0,s.default)(this,a),this.oi=null,this.Is=null,this.Ds=function(e){n.Is&&e===n.oi?n.Is.attach():(n.Is&&n.Is.dispose(),n.oi=e,n.Is=new o.default(e,h.createInterval),n.ks.reset())},this.Ns=function(){n.Is&&n.Is.detach()},this.Di=function(){n.Ls++},this.Ps=function(){n.Us++},this.Fs=function(){if(n.Is){var e=n.Is.getQoSAnalytics();n.Bs.updateMetric(e.bufferHealth)}},this.jt=i,this.cn=t,this.ks=new l.default(r),this.Bs=new d.default,this.Ls=-1,this.Us=0,this.cn.on(u.default.TRACK_SWITCH,this.Di),this.cn.on(u.default.EMERGENCY_TRACK_SWITCH,this.Ps),this.jt.on(c.default.MEDIA_ELEMENT_ATTACHED,this.Ds),this.jt.on(c.default.MEDIA_ELEMENT_DETACHED,this.Ns),this.xs=(0,h.createInterval)(this.Fs,1e3)}return a.prototype.getQoSAnalytics=function(){return this.Is?this.Is.getQoSAnalytics():null},a.prototype.getFormattedQoSAnalytics=function(){if(!this.Is)return{};var e=this.Is.getQoSAnalytics();return e.averageBufferHealth=this.Bs.getAverage(),this.ks.format(e,this.Ls,this.Us)},a.prototype.dispose=function(){this.cn.removeListener(u.default.EMERGENCY_TRACK_SWITCH,this.Ps),this.cn.removeListener(u.default.TRACK_SWITCH,this.Di),this.jt.removeListener(c.default.MEDIA_ELEMENT_ATTACHED,this.Ds),this.jt.removeListener(c.default.MEDIA_ELEMENT_DETACHED,this.Ns),this.xs.clear(),this.oi=null,this.Is&&(this.Is.dispose(),this.Is=null)},(0,r.default)(a,[{key:"mediaElement",get:function(){return this.oi}}]),a}();t.default=a,e.exports=t.default},function(ibd,jbd,kbd){"undefined"!=typeof self&&self,ibd.exports=function(n){function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var r={};return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IDLE:"IDLE",PLAYING:"PLAYING",SEEKING:"SEEKING",BUFFERING:"BUFFERING",BUFFERING_WITH_BUFFER:"BUFFERING_WITH_BUFFER",PAUSED:"PAUSED",ENDED:"ENDED"},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(2)),a=i(n(3)),s=i(n(5)),o=i(n(6)),l=i(n(7)),u={ATTACHED:"ATTACHED",DETACHED:"DETACHED",DISPOSED:"DISPOSED"},c=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.Lt=u.ATTACHED,this.Gs=new r.default,this.Hs=new a.default(e,this.Gs,t||o.default),this.Oe=new s.default(this.Gs),this.Vs=new l.default(e,this.Oe)}return n.prototype.getQoSAnalytics=function(){return this.Vs.getAnalytics()},n.prototype.attach=function(){this.Lt===u.DETACHED&&(this.Lt=u.ATTACHED,this.Hs.resume(),this.Oe.resume())},n.prototype.detach=function(){this.Lt===u.ATTACHED&&(this.Lt=u.DETACHED,this.Hs.pause(),this.Oe.pause())},n.prototype.dispose=function(){this.Lt=u.DISPOSED,this.Hs.dispose(),this.Oe.dispose()},n}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.Ws=[],this.gotoIdle()}return e.prototype.zs=function(e){var t=this;this.Lt!==e&&(this.Ys=this.Lt,this.Lt=e,this.Ws.forEach(function(e){e(t.Lt,t.Ys)}))},e.prototype.gotoIdle=function(){this.zs(a.default.IDLE)},e.prototype.gotoPlaying=function(){this.zs(a.default.PLAYING)},e.prototype.gotoSeeking=function(){this.zs(a.default.SEEKING)},e.prototype.gotoBuffering=function(){this.zs(a.default.BUFFERING)},e.prototype.gotoBufferingWithBuffer=function(){this.zs(a.default.BUFFERING_WITH_BUFFER)},e.prototype.gotoPaused=function(){this.zs(a.default.PAUSED)},e.prototype.gotoEnded=function(){this.zs(a.default.ENDED)},e.prototype.getState=function(){return this.Lt},e.prototype.addObserver=function(e){this.Ws.indexOf(e)<0&&this.Ws.push(e)},e.prototype.removeObserver=function(e){var t=this.Ws.indexOf(e);-1<t&&this.Ws.splice(t,1)},e.prototype.isIdle=function(){return this.Lt===a.default.IDLE},e.prototype.isPlaying=function(){return this.Lt===a.default.PLAYING},e.prototype.isSeeking=function(){return this.Lt===a.default.SEEKING},e.prototype.isBuffering=function(){return this.Lt===a.default.BUFFERING},e.prototype.isBufferingWithBuffer=function(){return this.Lt===a.default.BUFFERING_WITH_BUFFER},e.prototype.isPaused=function(){return this.Lt===a.default.PAUSED},e.prototype.isEnded=function(){return this.Lt===a.default.ENDED},e}();t.default=s,e.exports=t.default},function(r,a,e){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0});var t=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),n=-1!==(!e&&window&&window.navigator?window.navigator.userAgent:"").indexOf("CrKey")?300:100,i=function(){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.Ks=n,this.Xs=e,this.Gs=t,this.Qs=0,this.resume()}return i.prototype.dispose=function(){this.pause()},i.prototype.pause=function(){this.Rs.clear()},i.prototype.resume=function(){this.Rs=this.Ks(this.$s.bind(this),n)},i.prototype.Js=function(){for(var e=this.Xs.currentTime,t=this.Xs.buffered,n=0;n<t.length;n++)if(t.start(n)<=e&&e<=t.end(n))return t.end(n)-e;return 0},i.prototype.$s=function(){var e=this.Xs.duration-this.Xs.currentTime,t=Math.abs(this.Xs.currentTime-this.Qs);isNaN(t)?this.Gs.gotoIdle():this.Xs.seeking?this.Gs.gotoSeeking():this.Xs.paused?this.Gs.isIdle()||(!isNaN(e)&&e<.3?this.Gs.gotoEnded():this.Gs.gotoPaused()):0<t?this.Gs.gotoPlaying():this.Gs.isIdle()||this.Gs.isSeeking()||(this.Js()<1?this.Gs.gotoBuffering():this.Gs.gotoBufferingWithBuffer()),this.Qs=this.Xs.currentTime},t(i,null,[{key:"BUFFERING_WITH_BUFFER_THRESHOLD",get:function(){return 1}}]),i}();a.default=i,r.exports=a.default}).call(a,e(4))},function(Fcd,Gcd){var Hcd;Hcd=function(){return this}();try{Hcd=Hcd||Function("return this")()||eval("this")}catch(Fcd){"object"==typeof window&&(Hcd=window)}Fcd.exports=Hcd},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=function(){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.Gs=e,this.Me={};for(var t=Object.keys(a.default),n=0;n<t.length;n++)this.Me[a.default[t[n]]]={count:0,timeSpent:0};this.resume(),this.Zs=this.to.bind(this),this.Gs.addObserver(this.Zs)}return i.prototype.getStats=function(){return this.no&&this.Re(this.Gs.getState()),this.Me},i.prototype.pause=function(){this.no=!1,this.Ce(this.Gs.getState())},i.prototype.resume=function(){this.no=!0,this.De(this.Gs.getState())},i.prototype.dispose=function(){this.pause(),this.Gs.removeObserver(this.Zs)},i.prototype.to=function(e,t){this.Ce(t),this.De(e)},i.prototype.Ce=function(e){this.Re(e),this.Me[e].startTimeStamp=null},i.prototype.Re=function(e){var t=this.Me[e],n=Date.now();t.timeSpent+=(n-t.startTimeStamp)/1e3,t.startTimeStamp=n},i.prototype.De=function(e){var t=this.Me[e];t.count++,t.startTimeStamp=Date.now()},i}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new i(e,t)};var i=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.rn=e,this.sn=t,this.tr=this.qi()}return n.prototype.qi=function(){return setInterval(this.rn,this.sn)},n.prototype.clear=function(){clearInterval(this.tr)},n}();e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=n(8),o=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.Xs=e,this.Oe=t,this.io=0}return n.prototype.eo=function(){var e=0;return 0<(e=this.Xs.getVideoPlaybackQuality?this.Xs.getVideoPlaybackQuality().droppedVideoFrames||0:this.Xs.webkitDroppedFrameCount||this.Xs.droppedFrameCount||0)&&(this.io=e),this.io},n.prototype.getAnalytics=function(){var e=this.Oe.getStats(),t=this.eo();return{bufferHealth:(0,s.getBufferedAmount)(this.Xs),droppedFrameCount:t,timeSpentIdle:e[a.default.IDLE].timeSpent,timeSpentPlaying:e[a.default.PLAYING].timeSpent,timeSpentPaused:e[a.default.PAUSED].timeSpent,timeSpentSeeking:e[a.default.SEEKING].timeSpent,timeSpentEnded:e[a.default.ENDED].timeSpent,rebufferingCount:e[a.default.BUFFERING].count,timeSpentRebuffering:e[a.default.BUFFERING].timeSpent,rebufferingCountWithBuffer:e[a.default.BUFFERING_WITH_BUFFER].count,timeSpentRebufferingWithBuffer:e[a.default.BUFFERING_WITH_BUFFER].timeSpent}},n}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getBufferedAmount:function(e){if(null==e)return 0;for(var t=e.buffered,n=e.currentTime,i=n,r=0;r<t.length;r++)t.start(r)<i+.3&&t.end(r)>i&&(i=t.end(r));return Math.max(i-n,0)}},e.exports=t.default}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=n(35),f=n(50),o=function(){function t(e){(0,a.default)(this,t),this.ke=e,this.reset()}return t.prototype.reset=function(){this.ro=new s.Delta,this.so=new s.Delta,this.oo=new s.Delta,this.uo=new s.Delta,this.ho=new s.Delta,this.co=new s.Delta,this.ao=new s.Delta,this.fo=new s.Delta,this.lo=new s.Delta,this.do=new s.Delta(Date.now()),this.vo=new s.Delta,this.wo=new s.Delta,this.po=new s.Delta},t.prototype.bo=function(e,t,n,i,r){var a=this.do.calcDelta(Date.now()),s=this.fo.calcDelta(e)/(a/6e4),o=this.lo.calcDelta(t)/(a/6e4),l=this.vo.calcDelta(n)/(a/6e4),u=this.wo.calcDelta(i)/(a/6e4),c=this.po.calcDelta(r)/(a/6e4),d=this.ke.getJavaScriptEngine(),h="Safari"===d.name||"Mobile Safari"===d.name;return{rebufferingCPM:(0,f.toDecimal)(s,2),rebufferingWithBufferCPM:(0,f.toDecimal)(o,2),droppedFrameCPM:h?0:(0,f.toDecimal)(l,2),trackSwitchCPM:(0,f.toDecimal)(u,2),emergencyTrackSwitchCPM:(0,f.toDecimal)(c,2)}},t.prototype.format=function(e,t,n){e.droppedFrameCount<this.vo.lastValue&&this.vo.override(e.droppedFrameCount);var i=this.bo(e.rebufferingCount,e.rebufferingCountWithBuffer,e.droppedFrameCount,t,n);return{rebufferingCPM:i.rebufferingCPM,rebufferingWithBufferCPM:i.rebufferingWithBufferCPM,droppedFrameCPM:i.droppedFrameCPM,trackSwitchCPM:i.trackSwitchCPM,emergencyTrackSwitchCPM:i.emergencyTrackSwitchCPM,timeSpentIdle:(0,f.toDecimal)(this.ro.calcDelta(e.timeSpentIdle),2),timeSpentPlaying:(0,f.toDecimal)(this.so.calcDelta(e.timeSpentPlaying),2),timeSpentPaused:(0,f.toDecimal)(this.oo.calcDelta(e.timeSpentPaused),2),timeSpentEnded:(0,f.toDecimal)(this.ao.calcDelta(e.timeSpentEnded),2),timeSpentRebuffering:(0,f.toDecimal)(this.uo.calcDelta(e.timeSpentRebuffering),2),timeSpentRebufferingWithBuffer:(0,f.toDecimal)(this.ho.calcDelta(e.timeSpentRebufferingWithBuffer),2),timeSpentSeeking:(0,f.toDecimal)(this.co.calcDelta(e.timeSpentSeeking),2),startupTime:e.startupTime,endedOnce:e.endedOnce,sampledBufferHealth:(0,f.toDecimal)(e.bufferHealth,1),averageBufferHealth:(0,f.toDecimal)(e.averageBufferHealth,1)}},t}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=n(35),o=function(){function t(){(0,a.default)(this,t);var e=Date.now();this.mo=0,this.Eo=0,this.yo=new s.Delta(e),this._o=new s.Delta(e)}return t.prototype.getAverage=function(){var e=this.getIntegral();return e.intervalLength?e.value/e.intervalLength:e.value},t.prototype.getIntegral=function(){var e=Date.now(),t=this.yo.calcDelta(e),n=this._o.calcDelta(e);this.mo+=this.Eo*t;var i=this.mo;return this.mo=0,{value:i,intervalLength:n}},t.prototype.updateMetric=function(e){var t=Date.now(),n=this.yo.calcDelta(t);this.mo+=this.Eo*n,this.Eo=e},t}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createTrigger=function(e,t){return null!==t.fragmentsFetchedBeforeLoad&&0!==t.fragmentsFetchedBeforeLoad?new a.default(e,t.fragmentsFetchedBeforeLoad):null!==t.secondsPrebufferedBeforeLoad?new s.default(e,t.secondsPrebufferedBeforeLoad):new r.default(e)},i(n(51));var r=i(n(245)),a=i(n(246)),s=i(n(247))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(41)),s=i(n(43)),o=function(t){function n(e){return(0,r.default)(this,n),(0,a.default)(this,t.call(this,e))}return(0,s.default)(n,t),n.prototype.isConditionMet=function(){return!0},n}(i(n(51)).default);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(0)),s=i(n(41)),o=i(n(43)),r=i(n(51)),l=i(n(1)),u=function(i){function r(e,t){(0,a.default)(this,r);var n=(0,s.default)(this,i.call(this,e));return n.To=t,n.Oo(),n.Ao=n.Mo.bind(n),n.jt.on(l.default.MEDIA_SEGMENT_FETCHED,n.Ao),n.So=n.Ro.bind(n),n.jt.on(l.default.STOPPED,n.So),n}return(0,o.default)(r,i),r.prototype.isConditionMet=function(){return this.Co<=0},r.prototype.dispose=function(){this.jt.removeListener(l.default.MEDIA_SEGMENT_FETCHED,this.Ao),this.jt.removeListener(l.default.STOPPED,this.So),i.prototype.dispose.call(this)},r.prototype.Mo=function(){this.Co--,this.checkTrigger()},r.prototype.Ro=function(){this.Oo()},r.prototype.Oo=function(){this.Co=this.To},r}(r.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(0)),s=i(n(41)),o=i(n(43)),r=i(n(51)),l=i(n(1)),u=n(248),c=n(12),d=function(i){function r(e,t){(0,a.default)(this,r);var n=(0,s.default)(this,i.call(this,e));return n.oi=null,n.Do=t,n.No=n.Ds.bind(n),n.jt.on(l.default.MEDIA_ELEMENT_ATTACHED,n.No),n.jo=n.Io.bind(n),n.jt.on(l.default.DNA_CLIENT_LOAD_CONDITION_REACHED,n.jo),n}return(0,o.default)(r,i),r.prototype.isConditionMet=function(){return(0,u.getBufferedAmount)(this.oi)>=this.Do||null!==this.ko&&this.ko<=Date.now()},r.prototype.dispose=function(){this.Lo(),this.ko=null,this.oi=null,this.jt.removeListener(l.default.MEDIA_ELEMENT_ATTACHED,this.No),this.jt.removeListener(l.default.DNA_CLIENT_LOAD_CONDITION_REACHED,this.jo),i.prototype.dispose.call(this)},r.prototype.Pt=function(){this.Lo(),this.tr=(0,c.createInterval)(this.checkTrigger.bind(this),100),this.ko=Date.now()+3e4},r.prototype.Lo=function(){this.tr&&(this.tr.clear(),this.tr=null)},r.prototype.Ds=function(e){this.oi=e,this.checkTrigger()},r.prototype.Io=function(){this.Lo()},r}(r.default);t.default=d,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBufferedAmount=function(e){if(!e)return 0;for(var t=e.buffered,n=e.currentTime,i=n,r=0;r<t.length;r++)t.start(r)<i+.3&&t.end(r)>i&&(i=t.end(r));return i-n}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.abrInterfaceGenerator=void 0;var r=i(n(0)),a=i(n(3)),s=i(n(250));t.abrInterfaceGenerator=function(t){return function(){function e(){(0,r.default)(this,e)}return(0,a.default)(e,[{key:"nextSegmentPrebuffered",get:function(){return t.peerAgent?t.peerAgent.nextSegmentPrebuffered:new s.default}}]),e}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};t.default=function e(){(0,a.default)(this,e),this.video=!1,this.audio=!1},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeFromStreamrootInstances=t.addToStreamrootInstances=t.setupNamespace=void 0;var i=n(115);t.setupNamespace=function(){window.Streamroot=window.Streamroot||{},window.Streamroot.instances=window.Streamroot.instances||[]},t.addToStreamrootInstances=function(e){if(window.Streamroot.instances){var t={};(0,i.mapPublicAPI)(e,t),window.Streamroot.instances.push(t)}},t.removeFromStreamrootInstances=function(e){if(window.Streamroot.instances)for(var t=0;t<window.Streamroot.instances.length;t++)if(window.Streamroot.instances[t].id===e.id){window.Streamroot.instances.splice(t,1);break}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){return!!(window.RTCPeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection)}Object.defineProperty(t,"__esModule",{value:!0}),t.isP2PEnabled=t.isP2PAvailable=void 0,i(n(106));var a=i(n(75));t.isP2PAvailable=r,t.isP2PEnabled=function(e){return!(!r()||(t=e).getPlatform()===a.default.UNKNOWN||"Edge"===t.getJavaScriptEngine().name);var t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(0)),r=i(n(3)),d=i(n(82)),h=i(n(254)),f=n(12),a=function(){function u(e,t){(0,c.default)(this,u);var n=e.configManager.getStreamrootKey(),i={createTimeout:f.createTimeout,createInterval:f.createInterval},r={httpRequestFactory:e.httpRequestFactory,errorFunnel:e.errorFunnel,timerFactory:i},a=e.configManager.getCompassPropertyParameters(),s=a.cdnListName,o=a.cdnScoreProvider,l=d.default.newBuilder().streamrootKey(n).interfaces(r).config(t).cdnList(s);"citrix"===o.name&&l.scoreProvider("citrix",o.credentials),this.Po=l.build(),this.Uo=new h.default(this.Po,e.eventBus)}return u.prototype.dispose=function(){this.Uo.dispose(),this.Po.dispose(),this.Po=null,this.jt=null},u.prototype.getUpdatedUrl=function(e){return this.Po.getUpdatedUrl(e)},u.prototype.getAnalytics=function(e){return this.Po.getAnalytics(e)},(0,r.default)(u,[{key:"stats",get:function(){return this.Po.stats}}]),u}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(1));i(n(77));var s=function(){function n(e,t){var i=this;(0,r.default)(this,n),this.Fo=function(e){i.Po.reportCdnSuccess(e.url,e.requestStats)},this.Bo=function(e){var t=e.url,n=e.error;i.Po.reportCdnError(t,n)},this.Po=e,this.jt=t,this.jt.on(a.default.CDN_TIMING_EVENT,this.Fo),this.jt.on(a.default.CDN_DOWNLOAD_ERROR,this.Bo)}return n.prototype.dispose=function(){this.jt.removeListener(a.default.CDN_TIMING_EVENT,this.Fo),this.jt.removeListener(a.default.CDN_DOWNLOAD_ERROR,this.Bo),this.jt=null,this.Po=null},n}();t.default=s,e.exports=t.default}])},function(e,t,n){e.exports={default:n(106),__esModule:!0}},function(e,t,n){var r=n(2),a=n(0),s=n(11);e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*s(function(){n(1)}),"Object",i)}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(54),a=(i=r)&&i.__esModule?i:{default:i};t.default=function(e,t,n){return t in e?(0,a.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.context,r=(0,a.default)(e).getInstance();return{capabilityError:function(e){r.trigger(s.default.ERROR,{error:"capability",event:e})},downloadError:function(e,t,n){r.trigger(s.default.ERROR,{error:"download",event:{id:e,url:t,request:n}})},manifestError:function(e,t,n,i){r.trigger(s.default.ERROR,{error:"manifestError",event:{message:e,id:t,manifest:n,event:i}})},timedTextError:function(e,t,n){r.trigger(s.default.ERROR,{error:"cc",event:{message:e,id:t,cc:n}})},mediaSourceError:function(e){r.trigger(s.default.ERROR,{error:"mediasource",event:e})},mediaKeySessionError:function(e){r.trigger(s.default.ERROR,{error:"key_session",event:e})},mediaKeyMessageError:function(e){r.trigger(s.default.ERROR,{error:"key_message",event:e})},error:function(e){r.trigger(s.default.ERROR,{error:e})}}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(17)),s=i(n(13)),o=i(n(1));r.__dashjs_factory_name="ErrorHandler",t.default=o.default.getSingletonFactory(r),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(133),a=(i=r)&&i.__esModule?i:{default:i},s=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_MANIFEST="manifest",this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_CONTENT="content",this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.DOWNLOAD_ERROR_ID_XLINK="xlink",this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : "}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}());t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(41)),a=i(n(134)),s=function(e){function n(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.url=e||null,this.type=t||null,this.mediaType=r.default.STREAM,this.responseType=""}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),n}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(S){function R(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function l(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function b(e,t,n,i){for(var r=0;r<e.length;r++){var a=e[r];if("string"==typeof a){if(a==i)break}else if(a instanceof RegExp){if(a.test(i))break}else if("function"==typeof a&&a(t,n,i))break}return r!=e.length}function I(e,t,n){switch(S.arrayAccessForm){case"property":e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]]}!(e[t]instanceof Array)&&0<S.arrayAccessFormPaths.length&&b(S.arrayAccessFormPaths,e,t,n)&&(e[t]=[e[t]])}function C(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");if(n.setHours(t[3],t[4],i[0]),1<i.length&&n.setMilliseconds(i[1]),t[6]&&t[7]){var r=60*t[6]+Number(t[7]);r=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*r:r),n.setMinutes(n.getMinutes()-r-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function P(e,t){if(e.nodeType==w.DOCUMENT_NODE){for(var n=new Object,i=e.childNodes,r=0;r<i.length;r++)(s=i[r]).nodeType==w.ELEMENT_NODE&&(S.ignoreRoot?n=P(s):(n={})[o=R(s)]=P(s));return n}if(e.nodeType==w.ELEMENT_NODE){(n=new Object).__cnt=0;var a=[];for(i=e.childNodes,r=0;r<i.length;r++){var s,o=R(s=i[r]);if(s.nodeType!=w.COMMENT_NODE){var l=t+"."+o;if(E=n,y=s.nodeType,T=o,A=l,!(y==w.ELEMENT_NODE&&0<S.xmlElementsFilter.length)||b(S.xmlElementsFilter,E,T,A))if(n.__cnt++,null==n[o]){var u=P(s,l);("#text"!=o||/[^\s]/.test(u))&&((c={})[o]=u,a.push(c)),n[o]=u,I(n,o,l)}else{var c;null!=n[o]&&(n[o]instanceof Array||(n[o]=[n[o]],I(n,o,l))),u=P(s,l),("#text"!=o||/[^\s]/.test(u))&&((c={})[o]=u,a.push(c)),n[o][n[o].length]=u}}}n.__children=a;for(var d=R(e),h=0;h<e.attributes.length;h++){var f=e.attributes[h];n.__cnt++;for(var p=f.value,_=0,g=S.matchers.length;_<g;_++){var m=S.matchers[_];m.test(f,d)&&(p=m.converter(f.value))}n[S.attributePrefix+f.name]=p}var v=e.prefix;return null!=v&&""!=v&&(n.__cnt++,n.__prefix=v),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),S.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==S.arrayAccessForm&&delete n["#text_asArray"],n.__text=function(e,t,n){if(0<S.datetimeAccessFormPaths.length){var i=n.split(".#")[0];return b(S.datetimeAccessFormPaths,e,t,i)?C(e):e}return e}(n.__text,o,t+"."+o)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==S.arrayAccessForm&&delete n["#cdata-section_asArray"]),0==n.__cnt&&"text"==S.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||S.keepCData?1<n.__cnt&&null!=n.__text&&S.skipEmptyTextNodesForObj&&(S.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!S.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}var E,y,T,A;if(e.nodeType==w.TEXT_NODE||e.nodeType==w.CDATA_SECTION_NODE)return e.nodeValue}function u(e,t,n,i){var r="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var a=0;a<n.length;a++){var s=n[a],o=e[s];S.escapeMode&&(o=l(o)),r+=" "+s.substr(S.attributePrefix.length)+"=",S.useDoubleQuotes?r+='"'+o+'"':r+="'"+o+"'"}return r+(i?"/>":">")}function c(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function d(e,t){return!!("property"==S.arrayAccessForm&&(n=t.toString(),i="_asArray",-1!==n.indexOf(i,n.length-i.length))||0==t.toString().indexOf(S.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function);var n,i}function h(e){var t=0;if(e instanceof Object)for(var n in e)d(e,n)||t++;return t}function f(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(S.attributePrefix)&&t.push(n);return t}function p(e){var t,n,i="";return e instanceof Object?i+=(n="",null!=(t=e).__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(S.escapeMode?n+=l(t.__text):n+=t.__text),n):null!=e&&(S.escapeMode?i+=l(e):i+=e),i}function _(e,t){return""===e?t:e+"."+t}function g(e,t,n,i){var r="";if(0==e.length)r+=u(e,t,n,!0);else for(var a=0;a<e.length;a++)r+=u(e[a],t,f(e[a]),!1),r+=m(e[a],_(i,t)),r+=c(e[a],t);return r}function m(e,t){var n,i,r,a="";if(0<h(e))for(var s in e)if(!d(e,s)&&(""==t||(n=e,r=_(t,i=s),0==S.jsonPropertiesFilter.length||""==r||b(S.jsonPropertiesFilter,n,i,r)))){var o=e[s],l=f(o);null==o||null==o?a+=u(o,s,l,!0):o instanceof Object?o instanceof Array?a+=g(o,s,l,t):o instanceof Date?(a+=u(o,s,l,!1),a+=o.toISOString(),a+=c(o,s)):0<h(o)||null!=o.__text||null!=o.__cdata?(a+=u(o,s,l,!1),a+=m(o,_(t,s)),a+=c(o,s)):a+=u(o,s,l,!0):(a+=u(o,s,l,!1),a+=p(o),a+=c(o,s))}return a+p(e)}void 0===(S=S||{}).escapeMode&&(S.escapeMode=!0),void 0===S.attributePrefix&&(S.attributePrefix="_"),S.arrayAccessForm=S.arrayAccessForm||"none",S.emptyNodeForm=S.emptyNodeForm||"text",void 0===S.enableToStringFunc&&(S.enableToStringFunc=!0),S.arrayAccessFormPaths=S.arrayAccessFormPaths||[],void 0===S.skipEmptyTextNodesForObj&&(S.skipEmptyTextNodesForObj=!0),void 0===S.stripWhitespaces&&(S.stripWhitespaces=!0),S.datetimeAccessFormPaths=S.datetimeAccessFormPaths||[],void 0===S.useDoubleQuotes&&(S.useDoubleQuotes=!1),S.xmlElementsFilter=S.xmlElementsFilter||[],S.jsonPropertiesFilter=S.jsonPropertiesFilter||[],void 0===S.keepCData&&(S.keepCData=!1),void 0===S.ignoreRoot&&(S.ignoreRoot=!1);var w={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){if(window.ActiveXObject||window,void 0===e)return null;var t;if(window.DOMParser){var n=new window.DOMParser;try{0<(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?C(e):e},this.xml2json=function(e){return P(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return m(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}},e.exports=t.default},function(e,t,n){"use strict";function i(){function r(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function a(e){var t=e.match(d);return t?t[1]:""}function s(e){var t=e.match(i);return t?t[0]:""}function o(e){return!i.test(e)}function l(e){return o(e)&&"/"===e.charAt(0)}function u(e){return 0===e.indexOf("//")}var n=void 0,i=/^[a-z][a-z0-9+\-.]*:/i,t=/^https?:\/\//i,c=/^https:\/\//i,d=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,e=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}},h=function(e,t){var n=r;if(!t)return e;if(!o(e))return e;l(e)&&(n=a),u(e)&&(n=s);var i=n(t);return[i,e].join("/"!==i.charAt(i.length-1)&&"/"!==e.charAt(0)?"/":"")};return function(){try{new window.URL("x","http://y"),n=e}catch(e){}finally{n=n||h}}(),{parseBaseUrl:r,parseOrigin:a,parseScheme:s,isRelative:o,isPathAbsolute:l,isSchemeRelative:u,isHTTPURL:function(e){return t.test(e)},isHTTPS:function(e){return c.test(e)},resolve:function(e,t){return n(e,t)}}}Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="URLUtils",t.default=s.default.getSingletonFactory(i),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=n(143),s=(i=r)&&i.__esModule?i:{default:i},o=function(){function r(e,t,n){var i=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,r),this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(t)&&t.forEach(function(e){i._properties.push(new s.default(e))})}return a(r,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),r}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(8)),o=i(n(66)),l=n(149);t.default=function e(t,n,i,r){(0,s.default)(this,e);var a=new o.default(t,n,i,r);"function"==typeof a.streamrooter.mapIntegrationInterface?a.streamrooter.mapIntegrationInterface(this):(0,l.mapStreamrooterInterface)(this,a.streamrooter),this.stop=function(){a.stop()},this.destroy=function(){a.destroy()}},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(26)),o=i(n(23)),l=i(n(8)),r=i(n(24)),u=i(n(55)),c=i(n(97)),d=i(n(98)),h=i(n(123)),f=i(n(125)),p=i(n(146)),_=i(n(147)),g=i(n(148)),a=function(){function a(e,t,n,i){(0,l.default)(this,a),this.config={autoPlayerResetDetection:!0},this.playerActive=!1,this._currentManifest=null,"object"===(void 0===i?"undefined":(0,o.default)(i))&&(0,s.default)(this.config,i);var r=new d.default(e,this);this.streamrooter=new u.default(t,r,n,"1.1.19"),this._playerVersion=new c.default(e.getVersion()),this._overrideAttachSourceAndInitialize(e,this.streamrooter),this._overrideDashManifestModel(e),this._overrideABRRules(e,this.streamrooter),this._overrideLoaders(e,this.streamrooter)}return(0,r.default)(a,[{key:"_overrideAttachSourceAndInitialize",value:function(n,i){function r(e){!s.config.autoPlayerResetDetection&&s._currentManifest&&s._currentManifest===e||(s._currentManifest=e,i.load(e,i.constructor.StreamTypes.DASH));try{var t=n.getVideoElement();t&&i.attachMediaElement(t)}catch(e){}s.playerActive=!0}function a(e){i.attachMediaElement(e)}var s=this,t=n.attachSource;n.attachSource=function(e){"string"==typeof e?r(e):e||s._stop(),t.apply(n,arguments)};var o=n.attachView;n.attachView=function(e){a(e),o.apply(n,arguments)};var l=n.initialize;n.initialize=function(e,t){a(e),"string"==typeof t?r(t):t||s._stop(),l.apply(n,arguments)};var e=n.reset;n.reset=function(){s._stop(),e.apply(n,arguments)}}},{key:"_overrideABRRules",value:function(e,t){e.extend("ThroughputRule",new h.default(t,this._playerVersion.isGTEv2_6).SRThroughputRule,!0)}},{key:"_overrideDashManifestModel",value:function(e){e.extend("DashManifestModel",_.default,!0)}},{key:"_overrideLoaders",value:function(e,t){e.extend("ManifestLoader",new f.default(t).SRManifestLoader,!0),e.extend("FragmentLoader",new p.default(t).SRFragmentLoader,!0),this._playerVersion.isGTEv2_6&&e.extend("XHRLoader",new g.default(t).SRXHRLoader,!0)}},{key:"_stop",value:function(){this.config.autoPlayerResetDetection&&this.streamrooter.stop(),this.playerActive=!1}},{key:"stop",value:function(){this.streamrooter.stop(),this.playerActive=!1,this._currentManifest=null}},{key:"destroy",value:function(){this.streamrooter.destroy()}}]),a}();t.default=a,e.exports=t.default},function(e,t,n){n(68),e.exports=n(0).Object.assign},function(e,t,n){var i=n(2);i(i.S+i.F,"Object",{assign:n(70)})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var h=n(15),f=n(33),p=n(16),_=n(34),g=n(48),r=Object.assign;e.exports=!r||n(11)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=r({},e)[n]||Object.keys(r({},t)).join("")!=i})?function(e,t){for(var n=_(e),i=arguments.length,r=1,a=f.f,s=p.f;r<i;)for(var o,l=g(arguments[r++]),u=a?h(l).concat(a(l)):h(l),c=u.length,d=0;d<c;)s.call(l,o=u[d++])&&(n[o]=l[o]);return n}:r},function(e,t,n){var l=n(4),u=n(72),c=n(73);e.exports=function(o){return function(e,t,n){var i,r=l(e),a=u(r.length),s=c(n,a);if(o&&t!=t){for(;s<a;)if((i=r[s++])!=i)return!0}else for(;s<a;s++)if((o||s in r)&&r[s]===t)return o||s||0;return!o&&-1}}},function(e,t,n){var i=n(29),r=Math.min;e.exports=function(e){return 0<e?r(i(e),9007199254740991):0}},function(e,t,n){var i=n(29),r=Math.max,a=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):a(e,t)}},function(e,t,n){e.exports={default:n(75),__esModule:!0}},function(e,t,n){n(76),n(81),e.exports=n(38).f("iterator")},function(e,t,n){"use strict";var i=n(77)(!0);n(50)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var l=n(29),u=n(28);e.exports=function(o){return function(e,t){var n,i,r=String(u(e)),a=l(t),s=r.length;return a<0||s<=a?o?"":void 0:(n=r.charCodeAt(a))<55296||56319<n||a+1===s||(i=r.charCodeAt(a+1))<56320||57343<i?o?r.charAt(a):n:o?r.slice(a,a+2):i-56320+(n-55296<<10)+65536}}},function(e,t,n){"use strict";var i=n(36),r=n(20),a=n(37),s={};n(9)(s,n(12)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(s,{next:r(1,n)}),a(e,t+" Iterator")}},function(e,t,n){var s=n(5),o=n(14),l=n(15);e.exports=n(6)?Object.defineProperties:function(e,t){o(e);for(var n,i=l(t),r=i.length,a=0;a<r;)s.f(e,n=i[a++],t[n]);return e}},function(e,t,n){var i=n(3).document;e.exports=i&&i.documentElement},function(e,t,n){n(82);for(var i=n(3),r=n(9),a=n(35),s=n(12)("toStringTag"),o="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<o.length;l++){var u=o[l],c=i[u],d=c&&c.prototype;d&&!d[s]&&r(d,s,u),a[u]=a.Array}},function(e,t,n){"use strict";var i=n(83),r=n(84),a=n(35),s=n(4);e.exports=n(50)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(86),__esModule:!0}},function(e,t,n){n(87),n(92),n(93),n(94),e.exports=n(0).Symbol},function(e,t,n){"use strict";var i=n(3),s=n(7),r=n(6),a=n(2),o=n(51),l=n(88).KEY,u=n(11),c=n(31),d=n(37),h=n(22),f=n(12),p=n(38),_=n(39),g=n(89),m=n(90),v=n(14),E=n(10),y=n(4),T=n(27),A=n(20),S=n(36),R=n(91),b=n(40),I=n(5),C=n(15),P=b.f,w=I.f,O=R.f,D=i.Symbol,N=i.JSON,M=N&&N.stringify,L=f("_hidden"),x=f("toPrimitive"),k={}.propertyIsEnumerable,F=c("symbol-registry"),U=c("symbols"),V=c("op-symbols"),B=Object.prototype,j="function"==typeof D,H=i.QObject,Y=!H||!H.prototype||!H.prototype.findChild,q=r&&u(function(){return 7!=S(w({},"a",{get:function(){return w(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=P(B,t);i&&delete B[t],w(e,t,n),i&&e!==B&&w(B,t,i)}:w,K=function(e){var t=U[e]=S(D.prototype);return t._k=e,t},G=j&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},W=function(e,t,n){return e===B&&W(V,t,n),v(e),t=T(t,!0),v(n),s(U,t)?(n.enumerable?(s(e,L)&&e[L][t]&&(e[L][t]=!1),n=S(n,{enumerable:A(0,!1)})):(s(e,L)||w(e,L,A(1,{})),e[L][t]=!0),q(e,t,n)):w(e,t,n)},z=function(e,t){v(e);for(var n,i=g(t=y(t)),r=0,a=i.length;r<a;)W(e,n=i[r++],t[n]);return e},X=function(e){var t=k.call(this,e=T(e,!0));return!(this===B&&s(U,e)&&!s(V,e))&&(!(t||!s(this,e)||!s(U,e)||s(this,L)&&this[L][e])||t)},Q=function(e,t){if(e=y(e),t=T(t,!0),e!==B||!s(U,t)||s(V,t)){var n=P(e,t);return!n||!s(U,t)||s(e,L)&&e[L][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=O(y(e)),i=[],r=0;n.length>r;)s(U,t=n[r++])||t==L||t==l||i.push(t);return i},Z=function(e){for(var t,n=e===B,i=O(n?V:y(e)),r=[],a=0;i.length>a;)!s(U,t=i[a++])||n&&!s(B,t)||r.push(U[t]);return r};j||(o((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=h(0<arguments.length?arguments[0]:void 0),n=function(e){this===B&&n.call(V,e),s(this,L)&&s(this[L],t)&&(this[L][t]=!1),q(this,t,A(1,e))};return r&&Y&&q(B,t,{configurable:!0,set:n}),K(t)}).prototype,"toString",function(){return this._k}),b.f=Q,I.f=W,n(53).f=R.f=J,n(16).f=X,n(33).f=Z,r&&!n(21)&&o(B,"propertyIsEnumerable",X,!0),p.f=function(e){return K(f(e))}),a(a.G+a.W+a.F*!j,{Symbol:D});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)f($[ee++]);for(var te=C(f.store),ne=0;te.length>ne;)_(te[ne++]);a(a.S+a.F*!j,"Symbol",{for:function(e){return s(F,e+="")?F[e]:F[e]=D(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),a(a.S+a.F*!j,"Object",{create:function(e,t){return void 0===t?S(e):z(S(e),t)},defineProperty:W,defineProperties:z,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),N&&a(a.S+a.F*(!j||u(function(){var e=D();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(E(t)||void 0!==e)&&!G(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!G(t))return t}),i[1]=t,M.apply(N,i)}}),D.prototype[x]||n(9)(D.prototype,x,D.prototype.valueOf),d(D,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,t,n){var i=n(22)("meta"),r=n(10),a=n(7),s=n(5).f,o=0,l=Object.isExtensible||function(){return!0},u=!n(11)(function(){return l(Object.preventExtensions({}))}),c=function(e){s(e,i,{value:{i:"O"+ ++o,w:{}}})},d=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},getWeak:function(e,t){if(!a(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},onFreeze:function(e){return u&&d.NEED&&l(e)&&!a(e,i)&&c(e),e}}},function(e,t,n){var o=n(15),l=n(33),u=n(16);e.exports=function(e){var t=o(e),n=l.f;if(n)for(var i,r=n(e),a=u.f,s=0;r.length>s;)a.call(e,i=r[s++])&&t.push(i);return t}},function(e,t,n){var i=n(49);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(4),r=n(53).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?function(e){try{return r(e)}catch(e){return s.slice()}}(e):r(i(e))}},function(e,t){},function(e,t,n){n(39)("asyncIterator")},function(e,t,n){n(39)("observable")},function(e,t,n){n(96);var i=n(0).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(2);i(i.S+i.F*!n(6),"Object",{defineProperty:n(5).f})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(8)),a=i(n(24)),s=function(){function n(e){(0,r.default)(this,n);var t=e.split(".");this._major=Number(t[0]),this._minor=Number(t[1]),this._patch=Number(t[2])}return(0,a.default)(n,[{key:"major",get:function(){return this._major}},{key:"minor",get:function(){return this._minor}},{key:"patch",get:function(){return this._patch}},{key:"isGTEv2_6",get:function(){return 2<this.major||2===this.major&&6<=this.minor}}]),n}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(99)),a=i(n(23)),s=i(n(102)),o=i(n(56)),l=i(n(8)),u=i(n(24)),c=i(n(108)),d=i(n(109)),h=i(n(113)),f=i(n(55)),p=i(n(121)),_=i(n(41)),g=i(n(122)),m=function(e){function i(e,t){(0,l.default)(this,i);var n=(0,c.default)(this,(i.__proto__||(0,o.default)(i)).call(this));return n._player=e,n._wrapper=t,n._registerPlayerEvents(),n}return(0,h.default)(i,e),(0,u.default)(i,[{key:"on",value:function(e,t){-1<(0,s.default)(f.default.Events).indexOf(e)&&(0,d.default)(i.prototype.__proto__||(0,o.default)(i.prototype),"on",this).call(this,e,t)}},{key:"removeListener",value:function(e,t){-1<(0,s.default)(f.default.Events).indexOf(e)&&(0,d.default)(i.prototype.__proto__||(0,o.default)(i.prototype),"removeListener",this).call(this,e,t)}},{key:"getBufferTarget",value:function(){return null}},{key:"setBufferTarget",value:function(e){this._dashjsBufferTime=e,this._wrapper.playerActive&&(this._player.setStableBufferTime(this._dashjsBufferTime),this._player.setBufferTimeAtTopQuality(this._dashjsBufferTime),this._player.setBufferTimeAtTopQualityLongForm(this._dashjsBufferTime))}},{key:"getPlayerInfo",value:function(){var e={bufferBasedABR:"function"==typeof this._player.getABRStrategy&&(this._player.getABRStrategy()===_.default.ABR_STRATEGY_BOLA||this._player.getABRStrategy()===_.default.ABR_STRATEGY_DYNAMIC),abrStrategy:"function"==typeof this._player.getABRStrategy?this._player.getABRStrategy():"unknown"};return null!=this._wrapper.config&&"object"===(0,a.default)(this._wrapper.config)&&(e.playerInfo=this._wrapper.config.playerInfo),e}},{key:"getLatency",value:function(){if(!this._manifest||"dynamic"!==this._manifest.type)return 0;if("function"==typeof this._player.getCurrentLiveLatency)return Number(this._player.getCurrentLiveLatency())||0;var e=this._player.time(),t=this._player.duration();return(0,r.default)(e)||0===e||(0,r.default)(t)||0===t?0:Number(Math.max(t-e,0).toFixed(3))}},{key:"getMediaEngineName",value:function(){return"dash.js"}},{key:"getMediaEngineVersion",value:function(){return this._player.getVersion()}},{key:"_registerPlayerEvents",value:function(){var n=this,e=dashjs.MediaPlayer.events.QUALITY_CHANGE_START||dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,t=dashjs.MediaPlayer.events.FRAGMENT_LOADING_ABANDONED||"fragmentLoadingAbandoned",i=dashjs.MediaPlayer.events.MANIFEST_LOADED,r=dashjs.MediaPlayer.events.ERROR,a=dashjs.MediaPlayer.events.PLAYBACK_ERROR;if(void 0===e)throw new Error("Can't find neither QUALITY_CHANGE_START nor QUALITY_CHANGE_REQUESTED dash.js event.");if(void 0===t)throw new Error("Can't find FRAGMENT_LOADING_ABANDONED dash.js event.");if(void 0===i)throw new Error("Can't find MANIFEST_LOADED dash.js event.");if(void 0===r||void 0===a)throw new Error("Can't find ERROR or PLAYBACK_ERROR dash.js event.");this._player.on(e,this._onQualityChanged,this),this._player.on(t,this._onFragLoadingAbandoned,this),this._player.on(i,function(e){var t=e.data;n._manifest=t}),this._player.on(a,this._onError,this),this._player.on(r,this._onError,this)}},{key:"_onError",value:function(e){"object"===(0,a.default)(e.error)&&(e.event=e.error,e.error="DashJsError");var t=e.event&&e.event.message||"Unknown error",n="["+e.error+"] "+t;this.emit(f.default.Events.PLAYBACK_ERROR,n)}},{key:"_onQualityChanged",value:function(e){var t=e.mediaType,n=e.streamInfo,i=e.newQuality;if(this._player.isReady()){var r=this._player.getCurrentTrackFor(t).bitrateList[i];if(n&&r){var a=new g.default(n.id,n.start,r.id);this.emit(f.default.Events.TRACK_SWITCH,a)}}}},{key:"_onFragLoadingAbandoned",value:function(){this.emit(f.default.Events.EMERGENCY_TRACK_SWITCH)}}]),i}(p.default);t.default=m,e.exports=t.default},function(e,t,n){e.exports={default:n(100),__esModule:!0}},function(e,t,n){n(101),e.exports=n(0).Number.isNaN},function(e,t,n){var i=n(2);i(i.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){e.exports={default:n(103),__esModule:!0}},function(e,t,n){n(104),e.exports=n(0).Object.values},function(e,t,n){var i=n(2),r=n(105)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){var l=n(15),u=n(4),c=n(16).f;e.exports=function(o){return function(e){for(var t,n=u(e),i=l(n),r=i.length,a=0,s=[];a<r;)c.call(n,t=i[a++])&&s.push(o?[t,n[t]]:n[t]);return s}}},function(e,t,n){n(107),e.exports=n(0).Object.getPrototypeOf},function(e,t,n){var i=n(34),r=n(52);n(57)("getPrototypeOf",function(){return function(e){return r(i(e))}})},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(23),a=(i=r)&&i.__esModule?i:{default:i};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,a.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=i(n(56)),l=i(n(110));t.default=function e(t,n,i){null===t&&(t=Function.prototype);var r=(0,l.default)(t,n);if(void 0===r){var a=(0,o.default)(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}},function(e,t,n){e.exports={default:n(111),__esModule:!0}},function(e,t,n){n(112);var i=n(0).Object;e.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var i=n(4),r=n(40).f;n(57)("getOwnPropertyDescriptor",function(){return function(e,t){return r(i(e),t)}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(114)),a=i(n(118)),s=i(n(23));t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,s.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(115),__esModule:!0}},function(e,t,n){n(116),e.exports=n(0).Object.setPrototypeOf},function(e,t,n){var i=n(2);i(i.S,"Object",{setPrototypeOf:n(117).set})},function(e,t,r){var n=r(10),i=r(14),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,i){try{(i=r(44)(Function.call,r(40).f(Object.prototype,"__proto__").set,2))(e,[]),n=!(e instanceof Array)}catch(e){n=!0}return function(e,t){return a(e,t),n?e.__proto__=t:i(e,t),e}}({},!1):void 0),check:a}},function(e,t,n){e.exports={default:n(119),__esModule:!0}},function(e,t,n){n(120);var i=n(0).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(2);i(i.S,"Object",{create:n(36)})},function(e,t,n){"use strict";function i(){i.init.call(this)}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function r(e,t,n,i){var r,a,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]),void 0===s)s=a[t]=n,++e._eventsCount;else if("function"==typeof s?s=a[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),0<(r=l(e))&&s.length>r&&!s.warned){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=s.length,console&&console.warn}return e}function a(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,h(this.listener,this.target,e))}.bind(i);return r.listener=n,i.wrapFn=r}function s(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):c(r,r.length)}function o(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function c(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}var u,d="object"==typeof Reflect?Reflect:null,h=d&&"function"==typeof d.apply?d.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};u=d&&"function"==typeof d.ownKeys?d.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var f=Number.isNaN||function(e){return e!=e};((e.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var p=10;Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(e){if("number"!=typeof e||e<0||f(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");p=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||f(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var a;if(0<t.length&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var o=r[e];if(void 0===o)return!1;if("function"==typeof o)h(o,this,t);else{var l=o.length,u=c(o,l);for(n=0;n<l;++n)h(u[n],this,t)}return!0},i.prototype.on=i.prototype.addListener=function(e,t){return r(this,e,t,!1)},i.prototype.prependListener=function(e,t){return r(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,a(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,a(this,e,t)),this},i.prototype.off=i.prototype.removeListener=function(e,t){var n,i,r,a,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},i.prototype.listeners=function(e){return s(this,e,!0)},i.prototype.rawListeners=function(e){return s(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):o.call(e,t)},i.prototype.listenerCount=o,i.prototype.eventNames=function(){return 0<this._eventsCount?u(this._events):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(8),a=(i=r)&&i.__esModule?i:{default:i};t.default=function e(t,n,i){(0,a.default)(this,e),this.periodId=t,this.periodStart=n,this.representationId=i},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(124),a=(i=r)&&i.__esModule?i:{default:i};t.default=function(o,l){var e=dashjs.FactoryMaker,u=void 0;u=e?e.getClassFactoryByName("SwitchRequest"):a.default,this.SRThroughputRule=function(){var a=this.parent.getMaxIndex,s=this.context;return{getMaxIndex:function(e){var t=a(e),n=e.getMediaInfo().type,i=e.getCurrentValue?e.getCurrentValue():e.getAbrController().getQualityFor(n);if("video"!==n&&"audio"!==n)return t;var r=l?"quality":"value";return t[r]<i&&o.abr.nextSegmentPrebuffered[n]&&((t=u(s).create())[r]=i),t}}}},e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n){var i;return n!==(i=o.DEFAULT)&&n!==o.STRONG&&n!==o.WEAK||(i=n),{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:i}}Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),s=(r=a)&&r.__esModule?r:{default:r},o={DEFAULT:.5,STRONG:1,WEAK:0};i.__dashjs_factory_name="SwitchRequest";var l=s.default.getClassFactory(i);l.NO_CHANGE=-1,l.PRIORITY=o,s.default.updateClassFactory(i.__dashjs_factory_name,l),t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(58)),o=i(n(17)),I=i(n(13)),l=i(n(59)),u=i(n(128)),C=i(n(135)),c=i(n(63)),P=n(18),w=i(n(61)),O=i(n(42)),D=n(43);t.default=function(b){this.SRManifestLoader=function(h){function e(e){p.trigger(I.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}var t,f=this.context,n=this.factory,i=this.parent,p=n.getSingletonInstance(f,"EventBus"),r=(0,o.default)(f).getInstance(),_=(0,c.default)(f).getInstance(),g=h.mediaPlayerModel||n.getSingletonInstance(f,"MediaPlayerModel"),m=void 0,v=void 0,E=void 0,y=void 0,T=void 0,A=void 0,S=void 0,R=h.errHandler,a={load:function(e){v=g.getRetryAttemptsForType(P.HTTPRequest.MPD_TYPE),function n(s){var e=function(e,t,n){var i=e.responseURL||e.url;if(!S){var r=void 0;if(_.isRelative(i)&&(s=_.resolve(i,window.location.href)),r=_.parseBaseUrl(i),null===A&&(A=-1<t.indexOf("MPD")?(0,C.default)(f).create({errorHandler:R}):null),null===A)return void p.trigger(I.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new O.default(1,"Failed detecting manifest type: "+i)});var a=A.parse(t,T);a?(a.url=i,a.originalUrl||(a.originalUrl=a.url),a.hasOwnProperty("Location")&&(r=_.parseBaseUrl(a.manifest.Location_asArray[0])),a.baseUri=r,a.loadedTime=new Date,T.resolveManifestOnLoad(a)):p.trigger(I.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new O.default(1,"parsing failed")})}},t=function(e,t){S||(0<v?(v--,E.push(setTimeout(function(){n(s)},g.getRetryIntervalForType(P.HTTPRequest.MPD_TYPE)))):(R.downloadError(y[P.HTTPRequest.MPD_TYPE],s,new w.default(s,P.HTTPRequest.MPD_TYPE)),p.trigger(I.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new O.default(2,"Failed loading manifest: "+e.url+", "+t.message)})))},i={onSuccess:e,onError:t},r=(0,D.getFetchConfig)({url:s,type:P.HTTPRequest.MPD_TYPE},g,h.requestModifier),a=r.withCredentials,o=r.headers,l=r.url,u=b.constructor.ContentTypes.MANIFEST,c=b.constructor.ResponseTypes.TEXT,d={headers:o,withCredentials:a,url:l,contentType:u,responseType:c};m=b.fetch(d,i)}(e)},reset:function(){S=!0,v=0,E.forEach(function(e){return clearTimeout(e)}),E=[],r.off(I.default.XLINK_READY,e,i),T&&(T.reset(),T=null),m&&(m.abort(),m=null)}};return E=[],t={},(0,s.default)(t,P.HTTPRequest.MPD_TYPE,l.default.DOWNLOAD_ERROR_ID_MANIFEST),(0,s.default)(t,P.HTTPRequest.XLINK_EXPANSION_TYPE,l.default.DOWNLOAD_ERROR_ID_XLINK),(0,s.default)(t,P.HTTPRequest.INIT_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_INITIALIZATION),(0,s.default)(t,P.HTTPRequest.MEDIA_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),(0,s.default)(t,P.HTTPRequest.INDEX_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),(0,s.default)(t,P.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),(0,s.default)(t,P.HTTPRequest.OTHER_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),y=t,r.on(I.default.XLINK_READY,e,i),T=(0,u.default)(f).create({errHandler:R,metricsModel:h.metricsModel,mediaPlayerModel:g,requestModifier:h.requestModifier}),A=null,a}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(127),a=(i=r)&&i.__esModule?i:{default:i},s=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,i=!!t&&t.publicOnly;for(var r in e)!e.hasOwnProperty(r)||this[r]&&!n||i&&-1===e[r].indexOf("public_")||(this[r]=e[r])}}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){function r(e,t,n){var i={},r=void 0,a=void 0;i.elements=e,i.type=t,i.resolveType=n,0===i.elements.length&&o(i);for(var s=0;s<i.elements.length;s++)r=i.elements[s],a=l.isHTTPURL(r.url)?r.url:r.originalContent.BaseURL+r.url,f.load(a,r,i)}function t(e){var t,n=void 0,i="";if(n=e.element,t=e.resolveObject,n.resolvedContent){var r=0;0===n.resolvedContent.indexOf("<?xml")&&(r=n.resolvedContent.indexOf("?>")+2),i=n.resolvedContent.substr(0,r)+"<response>"+n.resolvedContent.substr(r)+"</response>",n.resolvedContent=h.xml_str2json(i)}(function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0})(t)&&o(t)}function o(e){var t=[],n=void 0,i=void 0;if(function(e){var t=[],n=void 0,i=void 0,r=void 0,a=void 0,s=void 0,o=void 0;for(a=e.elements.length-1;0<=a;a--){if(n=e.elements[a],i=n.type+"_asArray",n.resolvedContent){if(n.resolvedContent)for(s=0;s<n.resolvedContent[i].length;s++)r=n.resolvedContent[i][s],t.push(r)}else delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);for(n.parentElement[i].splice(n.index,1),o=0;o<t.length;o++)n.parentElement[i].splice(n.index+o,0,t[o]);t=[]}0<e.elements.length&&c.run(d)}(e),"onActuate"===e.resolveType&&s.trigger(g.default.XLINK_READY,{manifest:d}),e.resolveType===y)switch(e.type){case E.default.PERIOD:for(n=0;n<d[E.default.PERIOD+"_asArray"].length;n++)(i=d[E.default.PERIOD+"_asArray"][n]).hasOwnProperty(E.default.ADAPTATION_SET+"_asArray")&&(t=t.concat(a(i[E.default.ADAPTATION_SET+"_asArray"],i,E.default.ADAPTATION_SET,y))),i.hasOwnProperty(E.default.EVENT_STREAM+"_asArray")&&(t=t.concat(a(i[E.default.EVENT_STREAM+"_asArray"],i,E.default.EVENT_STREAM,y)));r(t,E.default.ADAPTATION_SET,y);break;case E.default.ADAPTATION_SET:s.trigger(g.default.XLINK_READY,{manifest:d})}}function a(e,t,n,i){var r=[],a=void 0,s=void 0,o=void 0;for(s=e.length-1;0<=s;s--)(a=e[s]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===a["xlink:href"]&&e.splice(s,1);for(s=0;s<e.length;s++)(a=e[s]).hasOwnProperty("xlink:href")&&a.hasOwnProperty("xlink:actuate")&&a["xlink:actuate"]===i&&(o={url:a["xlink:href"],parentElement:t,type:n,index:s,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1},r.push(o));return r}e=e||{};var n=this.context,s=(0,_.default)(n).getInstance(),l=(0,v.default)(n).getInstance(),i=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0;return i={resolveManifestOnLoad:function(e){h=new m.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:u}),r(a((d=e).Period_asArray,d,E.default.PERIOD,y),E.default.PERIOD,y)},setMatchers:function(e){e&&(u=e)},setIron:function(e){e&&(c=e)},reset:function(){s.off(g.default.XLINK_ELEMENT_LOADED,t,i),f&&(f.reset(),f=null)}},s.on(g.default.XLINK_ELEMENT_LOADED,t,i),f=(0,p.default)(n).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),i}Object.defineProperty(t,"__esModule",{value:!0});var p=i(n(129)),_=i(n(17)),g=i(n(13)),a=i(n(1)),m=i(n(62)),v=i(n(63)),E=i(n(19)),y="onLoad";r.__dashjs_factory_name="XlinkController",t.default=a.default.getClassFactory(r),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e=e||{};var a="urn:mpeg:dash:resolve-to-zero:2013",t=this.context,s=(0,h.default)(t).getInstance(),o=(0,u.default)(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier});return{load:function(n,i,r){var t=function(e,t){i.resolved=!0,i.resolvedContent=e||null,s.trigger(f.default.XLINK_ELEMENT_LOADED,{element:i,resolveObject:r,error:e||t?null:new l.default(p.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,p.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+n)})};if(n===a)t(null,!0);else{var e=new d.default(n,c.HTTPRequest.XLINK_EXPANSION_TYPE);o.load({request:e,success:function(e){t(e)},error:function(){t(null)}})}},reset:function(){o&&(o.abort(),o=null)}}}Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(42)),u=i(n(130)),c=n(18),d=i(n(61)),h=i(n(17)),f=i(n(13)),a=i(n(1)),p=i(n(60));r.__dashjs_factory_name="XlinkLoader",t.default=a.default.getClassFactory(r),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){e=e||{};var t,n,i,E=this.context,y=e.errHandler,T=e.metricsModel,A=e.mediaPlayerModel,S=e.requestModifier,R=e.boxParser,b=e.useFetch||!1,I=void 0,C=void 0,P=void 0,w=void 0,O=void 0;return t={load:function(e){e.request&&function e(n,t){var i=n.request,r=[],a=!0,s=!0,o=new Date,l=o,u=0,c=void 0;if(!S||!T||!y)throw new Error("config object is not correct or missing");var d=function(e){s=!1,i.requestStartDate=o,i.requestEndDate=new Date,i.firstByteDate=i.firstByteDate||o,i.checkExistenceOnly||T.addHttpRequest(i.mediaType,null,i.type,i.url,c.response?c.response.responseURL:null,i.serviceLocation||null,i.range||null,i.requestStartDate,i.firstByteDate,i.requestEndDate,c.response?c.response.status:null,i.duration,c.response&&c.response.getAllResponseHeaders?c.response.getAllResponseHeaders():c.response?c.response.responseHeaders:[],e?r:null)},h=function(){-1!==I.indexOf(c)&&(I.splice(I.indexOf(c),1),s&&(d(!1),0<t?(t--,P.push(setTimeout(function(){e(n,t)},A.getRetryIntervalForType(i.type)))):(y.downloadError(w[i.type],i.url,i),y.error(new L.default(O[i.type],i.url+" is not available",{request:i,response:c.response})),n.error&&n.error(i,"error",c.response.statusText),n.complete&&n.complete(i,c.response.statusText))))},f=void 0;f=b&&window.fetch&&"arraybuffer"===i.responseType?(0,N.default)(E).create({requestModifier:S,boxParser:R}):(0,D.default)(E).create({requestModifier:S,boxParser:R});var p=S.modifyRequestURL(i.url),_=i.checkExistenceOnly?M.HTTPRequest.HEAD:M.HTTPRequest.GET,g=A.getXHRWithCredentialsForType(i.type);c={url:p,method:_,withCredentials:g,request:i,onload:function(){200<=c.response.status&&c.response.status<=299&&(d(!0),n.success&&n.success(c.response.response,c.response.statusText,c.response.responseURL),n.complete&&n.complete(i,c.response.statusText))},onend:h,onerror:h,progress:function(e){var t=new Date;a&&(a=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(i.firstByteDate=t)),e.lengthComputable&&(i.bytesLoaded=e.loaded,i.bytesTotal=e.total),e.noTrace||(r.push({s:l,d:e.time?e.time:t.getTime()-l.getTime(),b:[e.loaded?e.loaded-u:0]}),l=t,u=e.loaded),n.progress&&e&&n.progress(e)},onabort:function(){n.abort&&n.abort(i)},loader:f};var m,v=(new Date).getTime();isNaN(i.delayLoadingTime)||v>=i.delayLoadingTime?(I.push(c),f.load(c)):(m={httpRequest:c},C.push(m),m.delayTimeout=setTimeout(function(){if(-1!==C.indexOf(m)){C.splice(C.indexOf(m),1);try{o=new Date,l=o,I.push(m.httpRequest),f.load(m.httpRequest)}catch(e){m.httpRequest.onerror()}}},i.delayLoadingTime-v))}(e,A.getRetryAttemptsForType(e.request.type))},abort:function(){P.forEach(function(e){return clearTimeout(e)}),P=[],C.forEach(function(e){return clearTimeout(e.delayTimeout)}),C=[],I.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e),e.onabort()}),I=[]}},I=[],C=[],P=[],r(n={},M.HTTPRequest.MPD_TYPE,o.default.DOWNLOAD_ERROR_ID_MANIFEST),r(n,M.HTTPRequest.XLINK_EXPANSION_TYPE,o.default.DOWNLOAD_ERROR_ID_XLINK),r(n,M.HTTPRequest.INIT_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_INITIALIZATION),r(n,M.HTTPRequest.MEDIA_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT),r(n,M.HTTPRequest.INDEX_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT),r(n,M.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT),r(n,M.HTTPRequest.OTHER_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT),w=n,r(i={},M.HTTPRequest.MPD_TYPE,o.default.DOWNLOAD_ERROR_ID_MANIFEST_CODE),r(i,M.HTTPRequest.XLINK_EXPANSION_TYPE,o.default.DOWNLOAD_ERROR_ID_XLINK_CODE),r(i,M.HTTPRequest.INIT_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),r(i,M.HTTPRequest.MEDIA_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),r(i,M.HTTPRequest.INDEX_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),r(i,M.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),r(i,M.HTTPRequest.OTHER_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),O=i,t}Object.defineProperty(t,"__esModule",{value:!0});var D=i(n(131)),N=i(n(132)),M=n(18),s=i(n(1)),o=i(n(60)),L=i(n(42));a.__dashjs_factory_name="HTTPLoader";var l=s.default.getClassFactory(a);t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){var r=(e=e||{}).requestModifier;return{load:function(e){var t=new Date,n=e.request,i=new XMLHttpRequest;i.open(e.method,e.url,!0),n.responseType&&(i.responseType=n.responseType),n.range&&i.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=t),r&&(i=r.modifyRequestHeader(i)),i.withCredentials=e.withCredentials,i.onload=e.onload,i.onloadend=e.onend,i.onerror=e.onerror,i.onprogress=e.progress,i.onabort=e.onabort,i.send(),e.response=i},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}}}Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="XHRLoader";var o=s.default.getClassFactory(i);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){function _(t,e){t.reader.read().then(e).catch(function(e){t.onerror&&200===t.response.status&&t.onerror(e)})}function g(r,t){if(1<(r=r.filter(function(e){return e.bytes>t/4/r.length})).length){var e=(a=0,s=(r[r.length-1].ts-r[0].ts)/r.length,r.forEach(function(e,t){var n=r[t+1];if(n){var i=n.ts-e.ts;a+=i<s?i:0}}),{v:a});if("object"==typeof e)return e.v}var a,s;return null}var a=(e=e||{}).requestModifier,m=e.boxParser;return{load:function(p){var e=new Date,t=p.request,n=new Headers;t.range&&n.append("Range","bytes="+t.range),t.requestStartDate||(t.requestStartDate=e),a&&a.modifyRequestHeader({setRequestHeader:function(e,t){n.append(e,t)}});var i=void 0;"function"==typeof window.AbortController&&(i=new AbortController,p.abortController=i);var r={method:p.method,headers:n,credentials:p.withCredentials?"include":void 0,signal:i?i.signal:void 0};fetch(p.url,r).then(function(e){p.response||(p.response={}),p.response.status=e.status,p.response.statusText=e.statusText,p.response.responseURL=e.url,e.ok||p.onerror();var t="",n=!0,i=!1,r=void 0;try{for(var a,s=e.headers.keys()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;t+=o+": "+e.headers.get(o)+"\n"}}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}if(p.response.responseHeaders=t,!e.body)return e.arrayBuffer().then(function(e){var t={loaded:(p.response.response=e).byteLength,total:e.byteLength,stream:!1};p.progress(t),p.onload(),p.onend()});var l=parseInt(e.headers.get("Content-Length"),10),u=0,c=!1,d=new Uint8Array,h=0;p.reader=e.body.getReader();var f=[];_(p,function e(t){var n=t.value;if(t.done)return d&&(p.progress({loaded:u,total:isNaN(l)?u:l,lengthComputable:!0,time:g(f,u),stream:!0}),p.response.response=d.buffer),p.onload(),void p.onend();if(n&&0<n.length){d=function(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(d,n),u+=n.length,f.push({ts:Date.now(),bytes:n.length});var i=m.findLastTopIsoBoxCompleted(["moov","mdat"],d,h);if(i.found){var r=i.lastCompletedOffset+i.size,a=void 0;d=r===d.length?(a=d,new Uint8Array):(a=new Uint8Array(d.subarray(0,r)),d.subarray(r)),p.progress({data:a.buffer,lengthComputable:!1,noTrace:!0}),h=0}else h=i.lastCompletedOffset,c||(p.progress({lengthComputable:!1,noTrace:!0}),c=!0)}_(p,e)})}).catch(function(e){p.onerror&&p.onerror(e)})},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel()}catch(e){}},calculateDownloadedTime:g}}Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="FetchLoader";var o=s.default.getClassFactory(i);t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,i=!!t&&t.publicOnly;for(var r in e)!e.hasOwnProperty(r)||this[r]&&!n||i&&-1===e[r].indexOf("public_")||(this[r]=e[r])}}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e,t=this.context,a=void 0,n=void 0,s=void 0,o=void 0;return e={parse:function(e){var t,n=window.performance.now();if(!(t=s.xml_str2json(e)))throw new Error("parsing the manifest failed");var i=window.performance.now();o.run(t);var r=window.performance.now();return a.info("Parsing complete: ( xml2json: "+(i-n).toPrecision(3)+"ms, objectiron: "+(r-i).toPrecision(3)+"ms, total: "+((r-n)/1e3).toPrecision(3)+"s)"),t},getMatchers:function(){return n},getIron:function(){return o}},a=(0,l.default)(t).getInstance().getLogger(e),n=[new h.default,new f.default,new p.default,new d.default],s=new c.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),o=(0,u.default)(t).create({adaptationset:new _.default,period:new g.default}),e}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(1)),l=i(n(136)),u=i(n(137)),c=i(n(62)),d=i(n(138)),h=i(n(139)),f=i(n(140)),p=i(n(141)),_=i(n(142)),g=i(n(144));r.__dashjs_factory_name="DashParser",t.default=a.default.getClassFactory(r),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function i(e,t){var n="",i=null;u&&(i=(new Date).getTime(),n+="["+(i-d)+"]"),c&&t&&t.getClassName&&(n+="["+t.getClassName()+"]",t.getType&&(n+="["+t.getType()+"]")),0<n.length&&(n+=" ");for(var r=arguments.length,a=Array(2<r?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];Array.apply(null,a).forEach(function(e){n+=e+" "}),l[e]&&e<=h&&l[e](n),o.trigger(f.default.LOG,{message:n,level:e})}var t,n=this.context,o=(0,a.default)(n).getInstance(),l=[],u=void 0,c=void 0,d=void 0,h=void 0;return t={getLogger:function(e){return{fatal:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[p,this].concat(t))}.bind(e),error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[_,this].concat(t))}.bind(e),warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[g,this].concat(t))}.bind(e),info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[m,this].concat(t))}.bind(e),debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[v,this].concat(t))}.bind(e)}},setLogTimestampVisible:function(e){u=e},setCalleeNameVisible:function(e){c=e},setLogToBrowserConsole:function(e){h=e?v:0},getLogToBrowserConsole:function(){return 0!==h},setLogLevel:function(e){h=e},getLogLevel:function(){return h}},c=u=!0,h=g,d=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(l[p]=e(window.console.error),l[_]=e(window.console.error),l[g]=e(window.console.warn),l[m]=e(window.console.info),l[v]=e(window.console.debug)),t}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(17)),f=i(n(13)),s=i(n(1)),p=1,_=2,g=3,m=4,v=5;r.__dashjs_factory_name="Debug";var o=s.default.getSingletonFactory(r);o.LOG_LEVEL_NONE=0,o.LOG_LEVEL_FATAL=p,o.LOG_LEVEL_ERROR=_,o.LOG_LEVEL_WARNING=g,o.LOG_LEVEL_INFO=m,o.LOG_LEVEL_DEBUG=v,s.default.updateSingletonFactory(r.__dashjs_factory_name,o),t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(c){function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function u(e,t,n){for(var i=0,r=e.length;i<r;++i){var a=e[i];if(t[a.name])if(n[a.name]){if(a.merge){var s=t[a.name],o=n[a.name];"object"==typeof s&&"object"==typeof o?l(s,o):n[a.name]=s+o}}else n[a.name]=t[a.name]}}function d(e,t){for(var n=0,i=e.children.length;n<i;++n){var r=e.children[n],a=t[r.name+"_asArray"];if(a)for(var s=0,o=a.length;s<o;++s){var l=a[s];u(e.properties,t,l),d(r,l)}}}return{run:function(e){if(null===e||"object"!=typeof e)return e;if("period"in c)for(var t=c.period,n=e.Period_asArray,i=0,r=n.length;i<r;++i){var a=n[i];if(d(t,a),"adaptationset"in c){var s=a.AdaptationSet_asArray;if(s)for(var o=c.adaptationset,l=0,u=s.length;l<u;++l)d(o,s[l])}}return e}}}Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),s=(r=a)&&r.__esModule?r:{default:r};i.__dashjs_factory_name="ObjectIron";var o=s.default.getClassFactory(i);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(25)),s=i(n(19)),o=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e,t){var n,i=(a(n={},s.default.MPD,[s.default.ID,s.default.PROFILES]),a(n,s.default.PERIOD,[s.default.ID]),a(n,s.default.BASE_URL,[s.default.SERVICE_LOCATION,s.default.BYTE_RANGE]),a(n,s.default.SEGMENT_BASE,[s.default.INDEX_RANGE]),a(n,s.default.INITIALIZATION,[s.default.RANGE]),a(n,s.default.REPRESENTATION_INDEX,[s.default.RANGE]),a(n,s.default.SEGMENT_LIST,[s.default.INDEX_RANGE]),a(n,s.default.BITSTREAM_SWITCHING,[s.default.RANGE]),a(n,s.default.SEGMENT_URL,[s.default.MEDIA_RANGE,s.default.INDEX_RANGE]),a(n,s.default.SEGMENT_TEMPLATE,[s.default.INDEX_RANGE,s.default.MEDIA,s.default.INDEX,s.default.INITIALIZATION_MINUS,s.default.BITSTREAM_SWITCHING_MINUS]),a(n,s.default.ASSET_IDENTIFIER,[s.default.VALUE,s.default.ID]),a(n,s.default.EVENT_STREAM,[s.default.VALUE]),a(n,s.default.ADAPTATION_SET,[s.default.PROFILES,s.default.MIME_TYPE,s.default.SEGMENT_PROFILES,s.default.CODECS,s.default.CONTENT_TYPE]),a(n,s.default.FRAME_PACKING,[s.default.VALUE,s.default.ID]),a(n,s.default.AUDIO_CHANNEL_CONFIGURATION,[s.default.VALUE,s.default.ID]),a(n,s.default.CONTENT_PROTECTION,[s.default.VALUE,s.default.ID]),a(n,s.default.ESSENTIAL_PROPERTY,[s.default.VALUE,s.default.ID]),a(n,s.default.SUPPLEMENTAL_PROPERTY,[s.default.VALUE,s.default.ID]),a(n,s.default.INBAND_EVENT_STREAM,[s.default.VALUE,s.default.ID]),a(n,s.default.ACCESSIBILITY,[s.default.VALUE,s.default.ID]),a(n,s.default.ROLE,[s.default.VALUE,s.default.ID]),a(n,s.default.RATING,[s.default.VALUE,s.default.ID]),a(n,s.default.VIEWPOINT,[s.default.VALUE,s.default.ID]),a(n,s.default.CONTENT_COMPONENT,[s.default.CONTENT_TYPE]),a(n,s.default.REPRESENTATION,[s.default.ID,s.default.DEPENDENCY_ID,s.default.MEDIA_STREAM_STRUCTURE_ID]),a(n,s.default.SUBSET,[s.default.ID]),a(n,s.default.METRICS,[s.default.METRICS_MINUS]),a(n,s.default.REPORTING,[s.default.VALUE,s.default.ID]),n);if(i.hasOwnProperty(t)){var r=i[t];return void 0!==r&&0<=r.indexOf(e.name)}return!1},function(e){return String(e)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(25)),a=i(n(41)),s=i(n(19)),o=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,l=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){for(var t=[s.default.MIN_BUFFER_TIME,s.default.MEDIA_PRESENTATION_DURATION,s.default.MINIMUM_UPDATE_PERIOD,s.default.TIMESHIFT_BUFFER_DEPTH,s.default.MAX_SEGMENT_DURATION,s.default.MAX_SUBSEGMENT_DURATION,a.default.SUGGESTED_PRESENTATION_DELAY,s.default.START,a.default.START_TIME,s.default.DURATION],n=t.length,i=0;i<n;i++)if(e.nodeName===t[i])return o.test(e.value);return!1},function(e){var t=o.exec(e),n=31536e3*parseFloat(t[2]||0)+2592e3*parseFloat(t[4]||0)+86400*parseFloat(t[6]||0)+3600*parseFloat(t[8]||0)+60*parseFloat(t[10]||0)+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(25),a=(i=r)&&i.__esModule?i:{default:i},s=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,o=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return s.test(e.value)},function(e){var t=s.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0),t[9]&&t[10]){var i=60*parseInt(t[9],10)+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*i*60*1e3}return new Date(n)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(25),a=(i=r)&&i.__esModule?i:{default:i},s=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,o=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return s.test(e.value)},function(e){return parseFloat(e)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(64)),a=i(n(19)),s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[a.default.PROFILES,a.default.WIDTH,a.default.HEIGHT,a.default.SAR,a.default.FRAMERATE,a.default.AUDIO_SAMPLING_RATE,a.default.MIME_TYPE,a.default.SEGMENT_PROFILES,a.default.CODECS,a.default.MAXIMUM_SAP_PERIOD,a.default.START_WITH_SAP,a.default.MAX_PLAYOUT_RATE,a.default.CODING_DEPENDENCY,a.default.SCAN_TYPE,a.default.FRAME_PACKING,a.default.AUDIO_CHANNEL_CONFIGURATION,a.default.CONTENT_PROTECTION,a.default.ESSENTIAL_PROPERTY,a.default.SUPPLEMENTAL_PROPERTY,a.default.INBAND_EVENT_STREAM];(function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}})(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,a.default.ADAPTATION_SET,e,[new r.default(a.default.REPRESENTATION,e,[new r.default(a.default.SUB_REPRESENTATION,e)])])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=function(){function n(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._name=e,this._merge=(t=e)&&t.length&&t.charAt(0)===t.charAt(0).toUpperCase()}return i(n,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),n}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(64)),a=i(n(19)),s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[a.default.SEGMENT_BASE,a.default.SEGMENT_TEMPLATE,a.default.SEGMENT_LIST];(function(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,n=s,i=!0,o=u=void 0}})(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,a.default.PERIOD,e,[new r.default(a.default.ADAPTATION_SET,e,[new r.default(a.default.REPRESENTATION,e)])])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(8)),a=i(n(24)),s=function(){function e(){(0,r.default)(this,e),this._headers={}}return(0,a.default)(e,[{key:"setRequestHeader",value:function(e,t){this._headers[e]=t}},{key:"headers",get:function(){return this._headers}}]),e}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(58)),o=i(n(26)),D=i(n(13)),l=i(n(59)),N=n(18),M=n(43);t.default=function(w){function O(e,t,n){var i,r,a=Date.now();if(t.firstByteDate=t.firstByteDate||t.requestStartDate,t.requestEndDate=new Date(a),0!==e.timeElapsed){t.requestStartDate=new Date(a-e.timeElapsed);var s=e.latency||Math.min(50,(t.requestEndDate-t.requestStartDate)/2);t.firstByteDate=new Date(t.requestStartDate.getTime()+s),i=n,r=e.timeElapsed,(0,o.default)([],i).forEach(function(e){e.s=new Date(e.s.getTime()-r)})}}this.SRFragmentLoader=function(e){function t(){P||(P=!0,C=0,b.forEach(function(e){return clearTimeout(e)}),b=[],R&&(S&&v.trigger(D.default.LOADING_ABANDONED,{request:S,mediaType:S.mediaType,sender:m}),R.abort()),R=null)}var n,i=this.context,r=this.factory,m=this.parent,v=r.getSingletonInstance(i,"EventBus"),E=e.errHandler,y=e.requestModifier,T=e.metricsModel,A=e.mediaPlayerModel||r.getSingletonInstance(i,"MediaPlayerModel"),S=void 0,R=void 0,b=void 0,I=void 0,C=void 0,P=void 0,a={load:function(e){C=A.getRetryAttemptsForType(e.type),function n(i){if(P=!1,i){(S=i).requestStartDate=new Date;var r=[],a=i.requestStartDate,s=0,o=function(e,t,n){T.addHttpRequest(i.mediaType,null,i.type,i.url,null,i.serviceLocation||null,i.range||null,i.requestStartDate,i.firstByteDate,i.requestEndDate,t,i.duration,"Content-Length: "+n,e?r:null)},e=function(e,t,n){P||(O(n,i,r),o(!0,200,n.total),v.trigger(D.default.LOADING_COMPLETED,{request:i,response:t,sender:m}))},t=function(e,t){if(!P){var n=new Date;i.firstByteDate=i.firstByteDate||n,t.lengthComputable&&(i.bytesLoaded=t.loaded,i.bytesTotal=t.total),r.push({s:a,d:n.getTime()-a.getTime(),b:[t.loaded?t.loaded-s:0]}),a=n,s=t.loaded,v.trigger(D.default.LOADING_PROGRESS,{request:i})}},l=function(e,t){P||(o(!1,t.status),0<C?(C--,b.push(setTimeout(function(){n(i)},A.getRetryIntervalForType(i.type)))):(E.downloadError(I[i.type],i.url,i),v.trigger(D.default.LOADING_COMPLETED,{request:i,error:new Error(1,"failed loading fragment"),sender:m})))},u=(0,M.getFetchConfig)(i,A,y),c=u.withCredentials,d=u.headers,h=u.url,f=void 0;switch(i.type){case N.HTTPRequest.INIT_SEGMENT_TYPE:f=w.constructor.ContentTypes.INIT_SEGMENT;break;case N.HTTPRequest.MEDIA_SEGMENT_TYPE:f=w.constructor.ContentTypes.MEDIA_SEGMENT;break;default:f=w.constructor.ContentTypes.OTHER}var p=w.constructor.ResponseTypes.ARRAY_BUFFER,_={headers:d,withCredentials:c,url:h,contentType:f,responseType:p},g={onSuccess:e,onProgress:t,onError:l};R=w.fetch(_,g)}else v.trigger(D.default.LOADING_COMPLETED,{request:void 0,error:new Error(2,"request is null")})}(e)},abort:t,reset:function(){t()}};return b=[],n={},(0,s.default)(n,N.HTTPRequest.MPD_TYPE,l.default.DOWNLOAD_ERROR_ID_MANIFEST),(0,s.default)(n,N.HTTPRequest.XLINK_EXPANSION_TYPE,l.default.DOWNLOAD_ERROR_ID_XLINK),(0,s.default)(n,N.HTTPRequest.INIT_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_INITIALIZATION),(0,s.default)(n,N.HTTPRequest.MEDIA_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),(0,s.default)(n,N.HTTPRequest.INDEX_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),(0,s.default)(n,N.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),(0,s.default)(n,N.HTTPRequest.OTHER_TYPE,l.default.DOWNLOAD_ERROR_ID_CONTENT),I=n,a}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var s=this.parent;return{getBitrateListForAdaptation:function(e){if(!e||!e.Representation_asArray||!e.Representation_asArray.length)return null;for(var t=((a=e)&&void 0!==a.Representation_asArray&&null!==a.Representation_asArray&&a.Representation_asArray.sort(s.getRepresentationSortFunction()),a).Representation_asArray,n=t.length,i=[],r=0;r<n;r++){if(!t[r].id)throw new Error('Representation should have a "id" property');i.push({bandwidth:t[r].bandwidth,width:t[r].width||0,height:t[r].height||0,scanType:t[r].scanType||null,id:t[r].id})}var a;return i}}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n(18),d=n(43);t.default=function(u){this.SRXHRLoader=function(e){var a=(e=e||{}).requestModifier,s=void 0,o=void 0,l=!1;return{load:function(n){var e=new Date,t=n.request;t.requestStartDate||(t.requestStartDate=e);var i={};if(n.method||(n.method=t.checkExistenceOnly?"HEAD":"GET"),n.onload||!n.success&&!n.complete||(n.onload=function(){200<=i.status&&i.status<=299&&(n.success&&n.success(i.response,i.statusText,i),n.complete&&n.complete(t,i.statusText))}),!n.onabort&&n.abort&&(n.onabort=function(){n.abort(t,i.status)}),!n.onerror&&n.error&&(n.onerror=function(){n.error(t,"error",i.statusText),n.complete&&config.complete(t,i.statusText)}),s="GET"===n.method&&t.type===c.HTTPRequest.MEDIA_SEGMENT_TYPE&&t.range&&"arraybuffer"===t.responseType){i={};var r={url:t.url,headers:(0,d.getHeadersForRequest)(t,a),withCredentials:n.withCredentials,contentType:u.constructor.ContentTypes.MEDIA_SEGMENT,responseType:u.constructor.ResponseTypes.ARRAY_BUFFER};o=u.fetch(r,{onError:function(e,t){i.status=t.status,i.statusText=t.message,l?n.onabort&&n.onabort():n.onerror&&n.onerror(),n.onend&&n.onend()},onSuccess:function(e,t){i.status=200,i.statusText="OK",i.response=t,n.onload&&n.onload(),n.onend&&n.onend()},onProgress:function(e,t){n.progress&&n.progress(t)}}),n.response=i}else(i=new XMLHttpRequest).open(n.method,n.url,!0),t.responseType&&(i.responseType=t.responseType),t.range&&i.setRequestHeader("Range","bytes="+t.range),a&&(i=a.modifyRequestHeader(i)),i.withCredentials=n.withCredentials,i.onload=n.onload,i.onloadend=n.onend,i.onerror=n.onerror,i.onprogress=n.progress,i.onabort=n.onabort,i.send(),n.response=i},abort:function(e){if(s)o&&(l=!0,o.abort());else{var t=e.response;t.onloadend=void 0,t.onerror=void 0,t.onprogress=void 0,t.abort()}}}}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapStreamrooterInterface=function(e,t){e.attachMediaElement=t.attachMediaElement.bind(t),e.detachMediaElement=t.detachMediaElement.bind(t),Object.defineProperty(e,"dnaDownloadEnabled",{get:function(){return t.dnaDownloadEnabled},set:function(e){t.dnaDownloadEnabled=e}}),Object.defineProperty(e,"dnaUploadEnabled",{get:function(){return t.dnaUploadEnabled},set:function(e){t.dnaUploadEnabled=e}}),Object.defineProperty(e,"id",{get:function(){return t.id}}),Object.defineProperty(e,"stats",{get:function(){return t.stats}}),Object.defineProperty(e,"status",{get:function(){return t.status}}),Object.defineProperty(e,"versions",{get:function(){return t.versions}})}}])});var define=null;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.videojs=t()}(this,function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n,f="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},i={},r=(Object.freeze||Object)({default:i}),a=r&&i||r,s=void 0!==e?e:"undefined"!=typeof window?window:{};"undefined"!=typeof document?n=document:(n=s["__GLOBAL_DOCUMENT_CACHE@4"])||(n=s["__GLOBAL_DOCUMENT_CACHE@4"]=a);var o,l,u,c,h=n,d=f.navigator&&f.navigator.userAgent||"",p=/AppleWebKit\/([\d.]+)/i.exec(d),_=p?parseFloat(p.pop()):null,g=/iPad/i.test(d),m=/iPhone/i.test(d)&&!g,v=/iPod/i.test(d),E=m||g||v,y=(o=d.match(/OS (\d+)_/i))&&o[1]?o[1]:null,T=/Android/i.test(d),A=function(){var e=d.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),S=T&&/webkit/i.test(d)&&A<2.3,R=T&&A<5&&_<537,b=/Firefox/i.test(d),I=/Edge/i.test(d),C=!I&&/Chrome/i.test(d),P=(l=d.match(/Chrome\/(\d+)/))&&l[1]?parseFloat(l[1]):null,w=/MSIE\s8\.0/.test(d),O=(u=/MSIE\s(\d+)\.\d/.exec(d),!(c=u&&parseFloat(u[1]))&&/Trident\/7.0/i.test(d)&&/rv:11.0/.test(d)&&(c=11),c),D=/Safari/i.test(d)&&!C&&!T&&!I,N=D||E,M=ie()&&("ontouchstart"in f||f.DocumentTouch&&f.document instanceof f.DocumentTouch),L=ie()&&"backgroundSize"in f.document.createElement("video").style,x=(Object.freeze||Object)({IS_IPAD:g,IS_IPHONE:m,IS_IPOD:v,IS_IOS:E,IOS_VERSION:y,IS_ANDROID:T,ANDROID_VERSION:A,IS_OLD_ANDROID:S,IS_NATIVE_ANDROID:R,IS_FIREFOX:b,IS_EDGE:I,IS_CHROME:C,CHROME_VERSION:P,IS_IE8:w,IE_VERSION:O,IS_SAFARI:D,IS_ANY_SAFARI:N,TOUCH_ENABLED:M,BACKGROUND_SIZE_SUPPORTED:L}),k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},U=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},V=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},B=function(e,t){return e.raw=t,e},j=Object.prototype.toString,H=function(e){return K(e)?Object.keys(e):[]};function Y(t,n){H(t).forEach(function(e){return n(t[e],e)})}function q(n){for(var e=arguments.length,t=Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Object.assign?Object.assign.apply(Object,[n].concat(t)):(t.forEach(function(e){e&&Y(e,function(e,t){n[t]=e})}),n)}function K(e){return!!e&&"object"===(void 0===e?"undefined":k(e))}function G(e){return K(e)&&"[object Object]"===j.call(e)&&e.constructor===Object}var W=void 0,z="all",X=[],Q=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!!O&&O<11,i=W.levels[z],r=new RegExp("^("+i+")$");"log"!==e&&t.unshift(e.toUpperCase()+":"),X&&X.push([].concat(t)),t.unshift("VIDEOJS:");var a=f.console&&f.console[e];a&&i&&r.test(e)&&(n&&(t=t.map(function(t){if(K(t)||Array.isArray(t))try{return JSON.stringify(t)}catch(e){return String(t)}return String(t)}).join(" ")),a.apply?a[Array.isArray(t)?"apply":"call"](f.console,t):a(t))};(W=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];Q("log",t)}).levels={all:"log|warn|error",error:"error",off:"",warn:"warn|error",DEFAULT:z},W.level=function(e){if("string"==typeof e){if(!W.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');z=e}return z},W.history=function(){return X?[].concat(X):[]},W.history.clear=function(){X&&(X.length=0)},W.history.disable=function(){null!==X&&(X.length=0,X=null)},W.history.enable=function(){null===X&&(X=[])},W.error=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Q("error",t)},W.warn=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Q("warn",t)};var J=W;var Z=function(e){for(var t="",n=0;n<arguments.length;n++)t+=e[n].replace(/\n\r?\s*/g,"")+(arguments[n+1]||"");return t};function $(e,t){if(!e||!t)return"";if("function"!=typeof f.getComputedStyle)return e.currentStyle[t]||"";var n=f.getComputedStyle(e);return n?n[t]:""}var ee=B(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function te(e){return"string"==typeof e&&/\S/.test(e)}function ne(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function ie(){return h===f.document&&void 0!==h.createElement}function re(e){return K(e)&&1===e.nodeType}function ae(i){return function(e,t){if(!te(e))return h[i](null);te(t)&&(t=h.querySelector(t));var n=re(t)?t:h;return n[i]&&n[i](e)}}function se(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3],r=h.createElement(e);return Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(J.warn(Z(ee,e,t)),r.setAttribute(e,t)):"textContent"===e?oe(r,t):r[e]=t}),Object.getOwnPropertyNames(t).forEach(function(e){r.setAttribute(e,t[e])}),i&&Ie(r,i),r}function oe(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function le(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function ue(e,t){return ne(t),e.classList?e.classList.contains(t):(n=t,new RegExp("(^|\\s)"+n+"($|\\s)")).test(e.className);var n}function ce(e,t){return e.classList?e.classList.add(t):ue(e,t)||(e.className=(e.className+" "+t).trim()),e}function de(e,t){return e.classList?e.classList.remove(t):(ne(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function he(e,t,n){var i=ue(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!i),n!==i)return n?ce(e,t):de(e,t),e}function fe(n,i){Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];null==t||!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})}function pe(e){var t={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&0<e.attributes.length)for(var i=e.attributes,r=i.length-1;0<=r;r--){var a=i[r].name,s=i[r].value;"boolean"!=typeof e[a]&&-1===n.indexOf(","+a+",")||(s=null!==s),t[a]=s}return t}function _e(e,t){return e.getAttribute(t)}function ge(e,t,n){e.setAttribute(t,n)}function me(e,t){e.removeAttribute(t)}function ve(){h.body.focus(),h.onselectstart=function(){return!1}}function Ee(){h.onselectstart=function(){return!0}}function ye(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),n.height||(n.height=parseFloat($(e,"height"))),n.width||(n.width=parseFloat($(e,"width"))),n}}function Te(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=h.documentElement,i=h.body,r=n.clientLeft||i.clientLeft||0,a=f.pageXOffset||i.scrollLeft,s=t.left+a-r,o=n.clientTop||i.clientTop||0,l=f.pageYOffset||i.scrollTop,u=t.top+l-o;return{left:Math.round(s),top:Math.round(u)}}function Ae(e,t){var n={},i=Te(e),r=e.offsetWidth,a=e.offsetHeight,s=i.top,o=i.left,l=t.pageY,u=t.pageX;return t.changedTouches&&(u=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(s-l+a)/a)),n.x=Math.max(0,Math.min(1,(u-o)/r)),n}function Se(e){return K(e)&&3===e.nodeType}function Re(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function be(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),re(e)||Se(e)?e:"string"==typeof e&&/\S/.test(e)?h.createTextNode(e):void 0}).filter(function(e){return e})}function Ie(t,e){return be(e).forEach(function(e){return t.appendChild(e)}),t}function Ce(e,t){return Ie(Re(e),t)}var Pe=ae("querySelector"),we=ae("querySelectorAll"),Oe=(Object.freeze||Object)({isReal:ie,isEl:re,createEl:se,textContent:oe,prependTo:le,hasClass:ue,addClass:ce,removeClass:de,toggleClass:he,setAttributes:fe,getAttributes:pe,getAttribute:_e,setAttribute:ge,removeAttribute:me,blockTextSelection:ve,unblockTextSelection:Ee,getBoundingClientRect:ye,findPosition:Te,getPointerPosition:Ae,isTextNode:Se,emptyEl:Re,normalizeContent:be,appendContent:Ie,insertContent:Ce,$:Pe,$$:we}),De=1;function Ne(){return De++}var Me={},Le="vdata"+(new Date).getTime();function xe(e){var t=e[Le];return t||(t=e[Le]=Ne()),Me[t]||(Me[t]={}),Me[t]}function ke(e){var t=e[Le];return!!t&&!!Object.getOwnPropertyNames(Me[t]).length}function Fe(t){var e=t[Le];if(e){delete Me[e];try{delete t[Le]}catch(e){t.removeAttribute?t.removeAttribute(Le):t[Le]=null}}}function Ue(e,t){var n=xe(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&Fe(e)}function Ve(t,n,e,i){e.forEach(function(e){t(n,e,i)})}function Be(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var i=e||f.event;for(var r in e={},i)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&i.preventDefault||(e[r]=i[r]));if(e.target||(e.target=e.srcElement||h),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var a=h.documentElement,s=h.body;e.pageX=e.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var je=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){je=!0}});f.addEventListener("test",null,e)}catch(e){}}();var He=["touchstart","touchmove"];function Ye(s,e,t){if(Array.isArray(e))return Ve(Ye,s,e,t);var o=xe(s);if(o.handlers||(o.handlers={}),o.handlers[e]||(o.handlers[e]=[]),t.guid||(t.guid=Ne()),o.handlers[e].push(t),o.dispatcher||(o.disabled=!1,o.dispatcher=function(e,t){if(!o.disabled){e=Be(e);var n=o.handlers[e.type];if(n)for(var i=n.slice(0),r=0,a=i.length;r<a&&!e.isImmediatePropagationStopped();r++)try{i[r].call(s,e,t)}catch(e){J.error(e)}}}),1===o.handlers[e].length)if(s.addEventListener){var n=!1;je&&-1<He.indexOf(e)&&(n={passive:!0}),s.addEventListener(e,o.dispatcher,n)}else s.attachEvent&&s.attachEvent("on"+e,o.dispatcher)}function qe(t,e,n){if(ke(t)){var i=xe(t);if(i.handlers){if(Array.isArray(e))return Ve(qe,t,e,n);var r=function(e){i.handlers[e]=[],Ue(t,e)};if(e){var a=i.handlers[e];if(a)if(n){if(n.guid)for(var s=0;s<a.length;s++)a[s].guid===n.guid&&a.splice(s--,1);Ue(t,e)}else r(e)}else for(var o in i.handlers)r(o)}}}function Ke(e,t,n){var i=ke(e)?xe(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t&&(t={type:t,target:e}),t=Be(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)Ke.call(null,r,t,n);else if(!r&&!t.defaultPrevented){var a=xe(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function Ge(t,n,i){if(Array.isArray(n))return Ve(Ge,t,n,i);var e=function e(){qe(t,n,e),i.apply(this,arguments)};e.guid=i.guid=i.guid||Ne(),Ye(t,n,e)}var We=(Object.freeze||Object)({fixEvent:Be,on:Ye,off:qe,trigger:Ke,one:Ge}),ze=!1,Xe=void 0,Qe=function(){if(ie()){var e=h.getElementsByTagName("video"),t=h.getElementsByTagName("audio"),n=[];if(e&&0<e.length)for(var i=0,r=e.length;i<r;i++)n.push(e[i]);if(t&&0<t.length)for(var a=0,s=t.length;a<s;a++)n.push(t[a]);if(n&&0<n.length)for(var o=0,l=n.length;o<l;o++){var u=n[o];if(!u||!u.getAttribute){Je(1);break}void 0===u.player&&null!==u.getAttribute("data-setup")&&Xe(u)}else ze||Je(1)}};function Je(e,t){t&&(Xe=t),f.setTimeout(Qe,e)}ie()&&"complete"===h.readyState?ze=!0:Ge(f,"load",function(){ze=!0});var Ze=function(e){var t=h.createElement("style");return t.className=e,t},$e=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},et=function(e,t,n){t.guid||(t.guid=Ne());var i=function(){return t.apply(e,arguments)};return i.guid=n?n+"_"+t.guid:t.guid,i},tt=function(t,n){var i=Date.now();return function(){var e=Date.now();n<=e-i&&(t.apply(void 0,arguments),i=e)}},nt=function(){};nt.prototype.allowedEvents_={},nt.prototype.addEventListener=nt.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Ye(this,e,t),this.addEventListener=n},nt.prototype.removeEventListener=nt.prototype.off=function(e,t){qe(this,e,t)},nt.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Ge(this,e,t),this.addEventListener=n},nt.prototype.dispatchEvent=nt.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=Be(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Ke(this,e)};var it=function(t){return t instanceof nt||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},rt=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},at=function(e){if(!e.nodeName&&!it(e))throw new Error("Invalid target; must be a DOM node or evented object.")},st=function(e){if(!rt(e))throw new Error("Invalid event type; must be a non-empty string or array.")},ot=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},lt=function(e,t){var n=t.length<3||t[0]===e||t[0]===e.eventBusEl_,i=void 0,r=void 0,a=void 0;return a=n?(i=e.eventBusEl_,3<=t.length&&t.shift(),r=t[0],t[1]):(i=t[0],r=t[1],t[2]),at(i),st(r),ot(a),{isTargetingSelf:n,target:i,type:r,listener:a=et(e,a)}},ut=function(e,t,n,i){at(e),e.nodeName?We[t](e,n,i):e[t](n,i)},ct={on:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=lt(this,n),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(ut(s,"on",o,l),!a){var u=function(){return e.off(s,o,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,ut(this,"on","dispose",u),ut(s,"on","dispose",c)}},one:function(){for(var r=this,e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=lt(this,t),a=i.isTargetingSelf,s=i.target,o=i.type,l=i.listener;if(a)ut(s,"one",o,l);else{var u=function e(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];r.off(s,o,e),l.apply(null,n)};u.guid=l.guid,ut(s,"one",o,u)}},off:function(e,t,n){if(!e||rt(e))qe(this.eventBusEl_,e,t);else{var i=e,r=t;at(i),st(r),ot(n),n=et(this,n),this.off("dispose",n),i.nodeName?(qe(i,r,n),qe(i,"dispose",n)):it(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function(e,t){return Ke(this.eventBusEl_,e,t)}};function dt(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(t){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=se("span",{className:"vjs-event-bus"});return q(e,ct),e.on("dispose",function(){return e.off()}),e}var ht={state:{},setState:function(e){var n=this;"function"==typeof e&&(e=e());var i=void 0;return Y(e,function(e,t){n.state[t]!==e&&((i=i||{})[t]={from:n.state[t],to:e}),n.state[t]=e}),i&&it(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function ft(e,t){return q(e,ht),e.state=q({},e.state,t),"function"==typeof e.handleStateChanged&&it(e)&&e.on("statechanged",e.handleStateChanged),e}function pt(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function _t(){for(var n={},e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.forEach(function(e){e&&Y(e,function(e,t){G(e)?(G(n[t])||(n[t]={}),n[t]=_t(n[t],e)):n[t]=e})}),n}var gt=function(){function u(e,t,n){if(F(this,u),!e&&this.play?this.player_=e=this:this.player_=e,this.options_=_t({},this.options_),t=this.options_=_t(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+Ne()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),dt(this,{eventBusKey:this.el_?"el_":null}),ft(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}return u.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Fe(this.el_),this.el_=null)},u.prototype.player=function(){return this.player_},u.prototype.options=function(e){return J.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e&&(this.options_=_t(this.options_,e)),this.options_},u.prototype.el=function(){return this.el_},u.prototype.createEl=function(e,t,n){return se(e,t,n)},u.prototype.localize=function(e,r){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e,n=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),a=i&&i[n],s=n&&n.split("-")[0],o=i&&i[s],l=t;return a&&a[e]?l=a[e]:o&&o[e]&&(l=o[e]),r&&(l=l.replace(/\{(\d+)\}/g,function(e,t){var n=r[t-1],i=n;return void 0===n&&(i=e),i})),l},u.prototype.contentEl=function(){return this.contentEl_||this.el_},u.prototype.id=function(){return this.id_},u.prototype.name=function(){return this.name_},u.prototype.children=function(){return this.children_},u.prototype.getChildById=function(e){return this.childIndex_[e]},u.prototype.getChild=function(e){if(e)return e=pt(e),this.childNameIndex_[e]},u.prototype.addChild=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.children_.length,i=void 0,r=void 0;if("string"==typeof e){r=pt(e);var a=t.componentClass||r;t.name=r;var s=u.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,t)}else i=e;if(this.children_.splice(n,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(r=r||i.name&&pt(i.name()))&&(this.childNameIndex_[r]=i),"function"==typeof i.el&&i.el()){var o=this.contentEl().children[n]||null;this.contentEl().insertBefore(i.el(),o)}return i},u.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;0<=n;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},u.prototype.initChildren=function(){var r=this,i=this.options_.children;if(i){var a=this.options_,e=void 0,n=u.getComponent("Tech");(e=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var t=void 0,n=void 0;return n="string"==typeof e?i[t=e]||r.options_[t]||{}:(t=e.name,e),{name:t,opts:n}}).filter(function(e){var t=u.getComponent(e.opts.componentClass||pt(e.name));return t&&!n.isTech(t)}).forEach(function(e){var t=e.name,n=e.opts;if(void 0!==a[t]&&(n=a[t]),!1!==n){!0===n&&(n={}),n.playerOptions=r.options_.playerOptions;var i=r.addChild(t,n);i&&(r[t]=i)}})}},u.prototype.buildCSSClass=function(){return""},u.prototype.ready=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e&&(this.isReady_?t?e.call(this):this.setTimeout(e,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e)))},u.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},u.prototype.$=function(e,t){return Pe(e,t||this.contentEl())},u.prototype.$$=function(e,t){return we(e,t||this.contentEl())},u.prototype.hasClass=function(e){return ue(this.el_,e)},u.prototype.addClass=function(e){ce(this.el_,e)},u.prototype.removeClass=function(e){de(this.el_,e)},u.prototype.toggleClass=function(e,t){he(this.el_,e,t)},u.prototype.show=function(){this.removeClass("vjs-hidden")},u.prototype.hide=function(){this.addClass("vjs-hidden")},u.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},u.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},u.prototype.getAttribute=function(e){return _e(this.el_,e)},u.prototype.setAttribute=function(e,t){ge(this.el_,e,t)},u.prototype.removeAttribute=function(e){me(this.el_,e)},u.prototype.width=function(e,t){return this.dimension("width",e,t)},u.prototype.height=function(e,t){return this.dimension("height",e,t)},u.prototype.dimensions=function(e,t){this.width(e,!0),this.height(t)},u.prototype.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+pt(e)],10)},u.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof f.getComputedStyle){var n=f.getComputedStyle(this.el_);t=n.getPropertyValue(e)||n[e]}if(0===(t=parseFloat(t))){var i="offset"+pt(e);t=this.el_[i]}return t},u.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},u.prototype.currentWidth=function(){return this.currentDimension("width")},u.prototype.currentHeight=function(){return this.currentDimension("height")},u.prototype.focus=function(){this.el_.focus()},u.prototype.blur=function(){this.el_.blur()},u.prototype.emitTapEvents=function(){var t=0,i=null,r=void 0;this.on("touchstart",function(e){1===e.touches.length&&(i={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=(new Date).getTime(),r=!0)}),this.on("touchmove",function(e){if(1<e.touches.length)r=!1;else if(i){var t=e.touches[0].pageX-i.pageX,n=e.touches[0].pageY-i.pageY;10<Math.sqrt(t*t+n*n)&&(r=!1)}});var e=function(){r=!1};this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(i=null)===r&&((new Date).getTime()-t<200&&(e.preventDefault(),this.trigger("tap")))})},u.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t=et(this.player(),this.player().reportUserActivity),n=void 0;this.on("touchstart",function(){t(),this.clearInterval(n),n=this.setInterval(t,250)});var e=function(e){t(),this.clearInterval(n)};this.on("touchmove",t),this.on("touchend",e),this.on("touchcancel",e)}},u.prototype.setTimeout=function(e,t){e=et(this,e);var n=f.setTimeout(e,t),i=function(){this.clearTimeout(n)};return i.guid="vjs-timeout-"+n,this.on("dispose",i),n},u.prototype.clearTimeout=function(e){f.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},u.prototype.setInterval=function(e,t){e=et(this,e);var n=f.setInterval(e,t),i=function(){this.clearInterval(n)};return i.guid="vjs-interval-"+n,this.on("dispose",i),n},u.prototype.clearInterval=function(e){f.clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},u.prototype.requestAnimationFrame=function(e){var t=this;if(this.supportsRaf_){e=et(this,e);var n=f.requestAnimationFrame(e),i=function(){return t.cancelAnimationFrame(n)};return i.guid="vjs-raf-"+n,this.on("dispose",i),n}return this.setTimeout(e,1e3/60)},u.prototype.cancelAnimationFrame=function(e){if(this.supportsRaf_){f.cancelAnimationFrame(e);var t=function(){};return t.guid="vjs-raf-"+e,this.off("dispose",t),e}return this.clearTimeout(e)},u.registerComponent=function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var n=u.getComponent("Tech"),i=n&&n.isTech(t),r=u===t||u.prototype.isPrototypeOf(t.prototype);if(i||!r){var a=void 0;throw a=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+e+'"; '+a+".")}e=pt(e),u.components_||(u.components_={});var s=u.getComponent("Player");if("Player"===e&&s&&s.players){var o=s.players,l=Object.keys(o);if(o&&0<l.length&&l.map(function(e){return o[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return u.components_[e]=t},u.getComponent=function(e){if(e)return e=pt(e),u.components_&&u.components_[e]?u.components_[e]:void 0},u}();function mt(e,t,n,i){return function(e,t,n){if("number"!=typeof t||t<0||n<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,i,n.length-1),n[i][t]}function vt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:mt.bind(null,"start",0,e),end:mt.bind(null,"end",1,e)}}function Et(e,t){return Array.isArray(e)?vt(e):void 0===e||void 0===t?vt():vt([[e,t]])}function yt(e,t){var n=0,i=void 0,r=void 0;if(!t)return 0;e&&e.length||(e=Et(0,0));for(var a=0;a<e.length;a++)i=e.start(a),t<(r=e.end(a))&&(r=t),n+=r-i;return n/t}gt.prototype.supportsRaf_="function"==typeof f.requestAnimationFrame&&"function"==typeof f.cancelAnimationFrame,gt.registerComponent("Component",gt);for(var Tt={},At=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],St=At[0],Rt=void 0,bt=0;bt<At.length;bt++)if(At[bt][1]in h){Rt=At[bt];break}if(Rt)for(var It=0;It<Rt.length;It++)Tt[St[It]]=Rt[It];function Ct(e){if(e instanceof Ct)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:K(e)&&("number"==typeof e.code&&(this.code=e.code),q(this,e)),this.message||(this.message=Ct.defaultMessages[this.code]||"")}Ct.prototype.code=0,Ct.prototype.message="",Ct.prototype.status=null,Ct.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Ct.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Pt=0;Pt<Ct.errorTypes.length;Pt++)Ct[Ct.errorTypes[Pt]]=Pt,Ct.prototype[Ct.errorTypes[Pt]]=Pt;var wt=function(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(e){i=e}return[i,n]};var Ot=function(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,n){return i[t]&&(e[t]=i[t]),e},{cues:i.cues&&Array.prototype.map.call(i.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},Dt=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=Ot(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(Ot))},Nt=function(e,n){return e.forEach(function(e){var t=n.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),n.textTracks()},Mt="vjs-modal-dialog",Lt=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=se("div",{className:Mt+"-content"},{role:"document"}),n.descEl_=se("p",{className:Mt+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),oe(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}return U(r,i),r.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.prototype.buildCSSClass=function(){return Mt+" vjs-hidden "+i.prototype.buildCSSClass.call(this)},r.prototype.handleKeyPress=function(e){27===e.which&&this.closeable()&&this.close()},r.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},r.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},r.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",et(this,this.handleKeyPress)),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},r.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",et(this,this.handleKeyPress)),e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.prototype.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close)}!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},r.prototype.fill=function(){this.fillWith(this.content())},r.prototype.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),Ce(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)},r.prototype.empty=function(){this.trigger("beforemodalempty"),Re(this.contentEl()),this.trigger("modalempty")},r.prototype.content=function(e){return void 0!==e&&(this.content_=e),this.content_},r.prototype.conditionalFocus_=function(){var e=h.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus(),this.on(h,"keydown",this.handleKeyDown))},r.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(h,"keydown",this.handleKeyDown)},r.prototype.handleKeyDown=function(e){if(9===e.which){for(var t=this.focusableEls_(),n=this.el_.querySelector(":focus"),i=void 0,r=0;r<t.length;r++)if(n===t[r]){i=r;break}h.activeElement===this.el_&&(i=0),e.shiftKey&&0===i?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||i!==t.length-1||(t[0].focus(),e.preventDefault())}},r.prototype.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof f.HTMLAnchorElement||e instanceof f.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof f.HTMLInputElement||e instanceof f.HTMLSelectElement||e instanceof f.HTMLTextAreaElement||e instanceof f.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof f.HTMLIFrameElement||e instanceof f.HTMLObjectElement||e instanceof f.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},r}(gt);Lt.prototype.options_={pauseOnOpen:!0,temporary:!0},gt.registerComponent("ModalDialog",Lt);var xt=function(a){function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;F(this,s);var n=V(this,a.call(this));if(!t&&(t=n,w))for(var i in t=h.createElement("custom"),s.prototype)"constructor"!==i&&(t[i]=s.prototype[i]);t.tracks_=[],Object.defineProperty(t,"length",{get:function(){return this.tracks_.length}});for(var r=0;r<e.length;r++)t.addTrack(e[r]);return V(n,t)}return U(s,a),s.prototype.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},s.prototype.removeTrack=function(e){for(var t=void 0,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack"})},s.prototype.getTrackById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},s}(nt);for(var kt in xt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},xt.prototype.allowedEvents_)xt.prototype["on"+kt]=null;var Ft=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},Ut=function(s){function o(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];F(this,o);for(var n=void 0,i=t.length-1;0<=i;i--)if(t[i].enabled){Ft(t,t[i]);break}if(w){for(var r in n=h.createElement("custom"),xt.prototype)"constructor"!==r&&(n[r]=xt.prototype[r]);for(var a in o.prototype)"constructor"!==a&&(n[a]=o.prototype[a])}return(n=e=V(this,s.call(this,t,n))).changing_=!1,V(e,n)}return U(o,s),o.prototype.addTrack=function(e){var t=this;e.enabled&&Ft(this,e),s.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("enabledchange",function(){t.changing_||(t.changing_=!0,Ft(t,e),t.changing_=!1,t.trigger("change"))})},o}(xt),Vt=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},Bt=function(s){function o(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];F(this,o);for(var n=void 0,i=t.length-1;0<=i;i--)if(t[i].selected){Vt(t,t[i]);break}if(w){for(var r in n=h.createElement("custom"),xt.prototype)"constructor"!==r&&(n[r]=xt.prototype[r]);for(var a in o.prototype)"constructor"!==a&&(n[a]=o.prototype[a])}return(n=e=V(this,s.call(this,t,n))).changing_=!1,Object.defineProperty(n,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),V(e,n)}return U(o,s),o.prototype.addTrack=function(e){var t=this;e.selected&&Vt(this,e),s.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("selectedchange",function(){t.changing_||(t.changing_=!0,Vt(t,e),t.changing_=!1,t.trigger("change"))})},o}(xt),jt=function(a){function s(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];F(this,s);var n=void 0;if(w){for(var i in n=h.createElement("custom"),xt.prototype)"constructor"!==i&&(n[i]=xt.prototype[i]);for(var r in s.prototype)"constructor"!==r&&(n[r]=s.prototype[r])}return e=V(this,a.call(this,t,n)),V(n=e,n)}return U(s,a),s.prototype.addTrack=function(e){a.prototype.addTrack.call(this,e),e.addEventListener("modechange",et(this,function(){this.trigger("change")}));-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",et(this,function(){this.trigger("selectedlanguagechange")}))},s}(xt),Ht=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];F(this,a);var t=this;if(w)for(var n in t=h.createElement("custom"),a.prototype)"constructor"!==n&&(t[n]=a.prototype[n]);t.trackElements_=[],Object.defineProperty(t,"length",{get:function(){return this.trackElements_.length}});for(var i=0,r=e.length;i<r;i++)t.addTrackElement_(e[i]);if(w)return t}return a.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},a.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},a.prototype.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},a}(),Yt=function(){function i(e){F(this,i);var t=this;if(w)for(var n in t=h.createElement("custom"),i.prototype)"constructor"!==n&&(t[n]=i.prototype[n]);if(i.prototype.setCues_.call(t,e),Object.defineProperty(t,"length",{get:function(){return this.length_}}),w)return t}return i.prototype.setCues_=function(e){var t=this.length||0,n=0,i=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)},i.prototype.getCueById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},i}(),qt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Kt={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Gt={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Wt={disabled:"disabled",hidden:"hidden",showing:"showing"},zt=function(o){function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};F(this,l);var t=V(this,o.call(this)),n=t;if(w)for(var i in n=h.createElement("custom"),l.prototype)"constructor"!==i&&(n[i]=l.prototype[i]);var r={id:e.id||"vjs_track_"+Ne(),kind:e.kind||"",label:e.label||"",language:e.language||""},a=function(e){Object.defineProperty(n,e,{get:function(){return r[e]},set:function(){}})};for(var s in r)a(s);return V(t,n)}return U(l,o),l}(nt),Xt=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=h.createElement("a");n.href=e;var i=""===n.host&&"file:"!==n.protocol,r=void 0;i&&((r=h.createElement("div")).innerHTML='<a href="'+e+'"></a>',n=r.firstChild,r.setAttribute("style","display:none; position:absolute;"),h.body.appendChild(r));for(var a={},s=0;s<t.length;s++)a[t[s]]=n[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),i&&h.body.removeChild(r),a},Qt=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(t)return t.pop().toLowerCase()}return""},Jt=function(e){var t=f.location,n=Xt(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},Zt=(Object.freeze||Object)({parseUrl:Xt,getAbsoluteURL:function(e){if(!e.match(/^https?:\/\//)){var t=h.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},getFileExtension:Qt,isCrossOrigin:Jt}),$t=function(e){var t=en.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},en=Object.prototype.toString;var tn=t(function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}}),nn=function(e,t,n){if(!$t(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this);"[object Array]"===rn.call(e)?function(e,t,n){for(var i=0,r=e.length;i<r;i++)an.call(e,i)&&t.call(n,e[i],i,e)}(e,t,n):"string"==typeof e?function(e,t,n){for(var i=0,r=e.length;i<r;i++)t.call(n,e.charAt(i),i,e)}(e,t,n):function(e,t,n){for(var i in e)an.call(e,i)&&t.call(n,e[i],i,e)}(e,t,n)},rn=Object.prototype.toString,an=Object.prototype.hasOwnProperty;var sn=function(e){if(!e)return{};var a={};return nn(tn(e).split("\n"),function(e){var t,n=e.indexOf(":"),i=tn(e.slice(0,n)).toLowerCase(),r=tn(e.slice(n+1));void 0===a[i]?a[i]=r:(t=a[i],"[object Array]"===Object.prototype.toString.call(t)?a[i].push(r):a[i]=[a[i],r])}),a},on=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)ln.call(n,i)&&(e[i]=n[i])}return e},ln=Object.prototype.hasOwnProperty;var un=dn;function cn(e,t,n){var i=e;return $t(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=on(t,{uri:e}),i.callback=n,i}function dn(e,t,n){return hn(t=cn(e,t,n))}function hn(i){if(void 0===i.callback)throw new Error("callback argument missing");var r=!1,a=function(e,t,n){r||(r=!0,i.callback(e,t,n))};function t(e){return clearTimeout(l),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,a(e,_)}function e(){if(!s){var e;clearTimeout(l),e=i.useXDR&&void 0===o.status?200:1223===o.status?204:o.status;var t=_,n=null;return 0!==e?(t={body:function(){var e=void 0;if(e=o.response?o.response:o.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}(o),p)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:e,method:c,headers:{},url:u,rawRequest:o},o.getAllResponseHeaders&&(t.headers=sn(o.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),a(n,t,t.body)}}var n,s,o=i.xhr||null;o||(o=i.cors||i.useXDR?new dn.XDomainRequest:new dn.XMLHttpRequest);var l,u=o.url=i.uri||i.url,c=o.method=i.method||"GET",d=i.body||i.data,h=o.headers=i.headers||{},f=!!i.sync,p=!1,_={body:void 0,headers:{},statusCode:0,method:c,url:u,rawRequest:o};if("json"in i&&!1!==i.json&&(p=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===i.json?d:i.json))),o.onreadystatechange=function(){4===o.readyState&&setTimeout(e,0)},o.onload=e,o.onerror=t,o.onprogress=function(){},o.onabort=function(){s=!0},o.ontimeout=t,o.open(c,u,!f,i.username,i.password),f||(o.withCredentials=!!i.withCredentials),!f&&0<i.timeout&&(l=setTimeout(function(){if(!s){s=!0,o.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},i.timeout)),o.setRequestHeader)for(n in h)h.hasOwnProperty(n)&&o.setRequestHeader(n,h[n]);else if(i.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(o.responseType=i.responseType),"beforeSend"in i&&"function"==typeof i.beforeSend&&i.beforeSend(o),o.send(d||null),o}dn.XMLHttpRequest=f.XMLHttpRequest||function(){},dn.XDomainRequest="withCredentials"in new dn.XMLHttpRequest?dn.XMLHttpRequest:f.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(i){dn["delete"===i?"del":i]=function(e,t,n){return(t=cn(e,t,n)).method=i.toUpperCase(),hn(t)}});var fn=function(e,t){var n=new f.WebVTT.Parser(f,f.vttjs,f.WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<i.length&&(f.console&&f.console.groupCollapsed&&f.console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach(function(e){return J.error(e)}),f.console&&f.console.groupEnd&&f.console.groupEnd()),n.flush()},pn=function(d){function h(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(F(this,h),!t.tech)throw new Error("A tech was not provided.");var n=_t(t,{kind:Gt[t.kind]||"subtitles",language:t.language||t.srclang||""}),i=Wt[n.mode]||"disabled",r=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(i="hidden");var a=e=V(this,d.call(this,n));if(a.tech_=n.tech,w)for(var s in h.prototype)"constructor"!==s&&(a[s]=h.prototype[s]);a.cues_=[],a.activeCues_=[];var o=new Yt(a.cues_),l=new Yt(a.activeCues_),u=!1,c=et(a,function(){this.activeCues,u&&(this.trigger("cuechange"),u=!1)});return"disabled"!==i&&a.tech_.ready(function(){a.tech_.on("timeupdate",c)},!0),Object.defineProperty(a,"default",{get:function(){return r},set:function(){}}),Object.defineProperty(a,"mode",{get:function(){return i},set:function(e){var t=this;Wt[e]&&("showing"===(i=e)&&this.tech_.ready(function(){t.tech_.on("timeupdate",c)},!0),this.trigger("modechange"))}}),Object.defineProperty(a,"cues",{get:function(){return this.loaded_?o:null},set:function(){}}),Object.defineProperty(a,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return l;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];r.startTime<=e&&r.endTime>=e?t.push(r):r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e&&t.push(r)}if(u=!1,t.length!==this.activeCues_.length)u=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(u=!0);return this.activeCues_=t,l.setCues_(this.activeCues_),l},set:function(){}}),n.src?(a.src=n.src,function(e,r){var t={uri:e},n=Jt(e);n&&(t.cors=n),un(t,et(this,function(e,t,n){if(e)return J.error(e,t);if(r.loaded_=!0,"function"!=typeof f.WebVTT){if(r.tech_){var i=function(){return fn(n,r)};r.tech_.on("vttjsloaded",i),r.tech_.on("vttjserror",function(){J.error("vttjs failed to load, stopping trying to process "+r.src),r.tech_.off("vttjsloaded",i)})}}else fn(n,r)}))}(n.src,a)):a.loaded_=!0,V(e,a)}return U(h,d),h.prototype.addCue=function(e){var t=e;if(f.vttjs&&!(e instanceof f.vttjs.VTTCue)){for(var n in t=new f.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},h.prototype.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},h}(zt);pn.prototype.allowedEvents_={cuechange:"cuechange"};var _n=function(s){function o(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};F(this,o);var n=_t(t,{kind:Kt[t.kind]||""}),i=e=V(this,s.call(this,n)),r=!1;if(w)for(var a in o.prototype)"constructor"!==a&&(i[a]=o.prototype[a]);return Object.defineProperty(i,"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,V(e,i)}return U(o,s),o}(zt),gn=function(s){function o(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};F(this,o);var n=_t(t,{kind:qt[t.kind]||""}),i=e=V(this,s.call(this,n)),r=!1;if(w)for(var a in o.prototype)"constructor"!==a&&(i[a]=o.prototype[a]);return Object.defineProperty(i,"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),V(e,i)}return U(o,s),o}(zt),mn=function(s){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};F(this,o);var t=V(this,s.call(this)),n=void 0,i=t;if(w)for(var r in i=h.createElement("custom"),o.prototype)"constructor"!==r&&(i[r]=o.prototype[r]);var a=new pn(e);return i.kind=a.kind,i.src=a.src,i.srclang=a.language,i.label=a.label,i.default=a.default,Object.defineProperty(i,"readyState",{get:function(){return n}}),Object.defineProperty(i,"track",{get:function(){return a}}),n=0,a.addEventListener("loadeddata",function(){n=2,i.trigger({type:"load",target:i})}),w?V(t,i):t}return U(o,s),o}(nt);mn.prototype.allowedEvents_={load:"load"},mn.NONE=0,mn.LOADING=1,mn.LOADED=2,mn.ERROR=3;var vn={audio:{ListClass:Ut,TrackClass:_n,capitalName:"Audio"},video:{ListClass:Bt,TrackClass:gn,capitalName:"Video"},text:{ListClass:jt,TrackClass:pn,capitalName:"Text"}};Object.keys(vn).forEach(function(e){vn[e].getterName=e+"Tracks",vn[e].privateName=e+"Tracks_"});var En={remoteText:{ListClass:jt,TrackClass:pn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Ht,TrackClass:mn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},yn=_t(vn,En);En.names=Object.keys(En),vn.names=Object.keys(vn),yn.names=[].concat(En.names).concat(vn.names);var Tn=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function An(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Sn(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function Rn(){this.values=Tn(null)}function bn(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(n);if(2===s.length)t(s[0],s[1])}}function In(t,e,a){var n,i,s,r=t;function o(){var e=Sn(t);if(null===e)throw new An(An.Errors.BadTimeStamp,"Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function l(){t=t.replace(/^\s+/,"")}if(l(),e.startTime=o(),l(),"--\x3e"!==t.substr(0,3))throw new An(An.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),l(),e.endTime=o(),l(),n=t,i=e,s=new Rn,bn(n,function(e,t){switch(e){case"region":for(var n=a.length-1;0<=n;n--)if(a[n].id===t){s.set(e,a[n].region);break}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),r=i[0];s.integer(e,r),s.percent(e,r)&&s.set("snapToLines",!1),s.alt(e,r,["auto"]),2===i.length&&s.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=t.split(","),s.percent(e,i[0]),2===i.length&&s.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),i.region=s.get("region",null),i.vertical=s.get("vertical",""),i.line=s.get("line","auto"),i.lineAlign=s.get("lineAlign","start"),i.snapToLines=s.get("snapToLines",!0),i.size=s.get("size",100),i.align=s.get("align","middle"),i.position=s.get("position",{start:0,left:0,middle:50,end:100,right:100},i.align),i.positionAlign=s.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},i.align)}((An.prototype=Tn(Error.prototype)).constructor=An).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Rn.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var Cn={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},Pn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},wn={v:"title",lang:"lang"},On={rt:"ruby"};function Dn(a,n){function e(){if(!n)return null;var e,t=n.match(/^([^<]*)(<[^>]+>?)?/);return e=t[1]?t[1]:t[2],n=n.substr(e.length),e}function t(e){return Cn[e]}function i(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],t);return e}function r(e,t){var n=Pn[e];if(!n)return null;var i=a.document.createElement(n);i.localName=n;var r=wn[e];return r&&t&&(i[r]=t.trim()),i}for(var s,o,l,u=a.document.createElement("div"),c=u,d=[];null!==(s=e());)if("<"!==s[0])c.appendChild(a.document.createTextNode(i(s)));else{if("/"===s[1]){d.length&&d[d.length-1]===s.substr(2).replace(">","")&&(d.pop(),c=c.parentNode);continue}var h,f=Sn(s.substr(1,s.length-2));if(f){h=a.document.createProcessingInstruction("timestamp",f),c.appendChild(h);continue}var p=s.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(h=r(p[1],p[3])))continue;if(o=c,On[(l=h).localName]&&On[l.localName]!==o.localName)continue;p[2]&&(h.className=p[2].substr(1).replace("."," ")),d.push(p[1]),c.appendChild(h),c=h}return u}var Nn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Mn(e){for(var t=0;t<Nn.length;t++){var n=Nn[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function Ln(){}function xn(e,t,n){var i=/MSIE\s8\.0/.test(navigator.userAgent),r="rgba(255, 255, 255, 1)",a="rgba(0, 0, 0, 0.8)";i&&(r="rgb(255, 255, 255)",a="rgb(0, 0, 0)"),Ln.call(this),this.cue=t,this.cueDiv=Dn(e,t.text);var s={color:r,backgroundColor:a,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};i||(s.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",s.unicodeBidi="plaintext"),this.applyStyles(s,this.cueDiv),this.div=e.document.createElement("div"),s={textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},i||(s.direction=function(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}function a(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var i=n.match(/^.*(\n|\r)/);return i?i[e.length=0]:n}return"ruby"===t.tagName?a(e):t.childNodes?(r(e,t),a(e)):void 0}for(r(t,e);n=a(t);)for(var i=0;i<n.length;i++)if(Mn(n.charCodeAt(i)))return"rtl";return"ltr"}(this.cueDiv),s.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(s),this.div.appendChild(this.cueDiv);var o=0;switch(t.positionAlign){case"start":o=t.position;break;case"middle":o=t.position-t.size/2;break;case"end":o=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(o,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(o,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function kn(e){var t,n,i,r,a=/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var s=(s=e.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();e=e.div.getBoundingClientRect(),t=s?Math.max(s[0]&&s[0].height||0,e.height/s.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight,a&&!this.lineHeight&&(this.lineHeight=13)}function Fn(e,t,o,l){var n=new kn(t),i=t.cue,r=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}(i),a=[];if(i.snapToLines){var s;switch(i.vertical){case"":a=["+y","-y"],s="height";break;case"rl":a=["+x","-x"],s="width";break;case"lr":a=["-x","+x"],s="width"}var u=n.lineHeight,c=u*Math.round(r),d=o[s]+u,h=a[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),r<0&&(c+=""===i.vertical?o.height:o.width,a=a.reverse()),n.move(h,c)}else{var f=n.lineHeight/o.height*100;switch(i.lineAlign){case"middle":r-=f/2;break;case"end":r-=f}switch(i.vertical){case"":t.applyStyles({top:t.formatStyle(r,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(r,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(r,"%")})}a=["+y","-x","+x","-y"],n=new kn(t)}var p=function(e,t){for(var n,i=new kn(e),r=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(o,t[a])||e.within(o)&&e.overlapsAny(l);)e.move(t[a]);if(e.within(o))return e;var s=e.intersectPercentage(o);s<r&&(n=new kn(e),r=s),e=new kn(i)}return n||i}(n,a);t.move(p.toCSSCompatValues(o))}function Un(){}Ln.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},Ln.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(xn.prototype=Tn(Ln.prototype)).constructor=xn,kn.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},kn.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},kn.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},kn.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},kn.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},kn.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},kn.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},kn.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},Un.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Un.convertCueToDOMTree=function(e,t){return e&&t?Dn(e,t):null};Un.processCues=function(i,r,e){if(!i||!r||!e)return null;for(;e.firstChild;)e.removeChild(e.firstChild);var a=i.document.createElement("div");if(a.style.position="absolute",a.style.left="0",a.style.right="0",a.style.top="0",a.style.bottom="0",a.style.margin="1.5%",e.appendChild(a),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(r)){var s=[],o=kn.getSimpleBoxPosition(a),l={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var e,t,n=0;n<r.length;n++)t=r[n],e=new xn(i,t,l),a.appendChild(e.div),Fn(0,e,o,s),t.displayState=e.div,s.push(kn.getSimpleBoxPosition(e))}()}else for(var t=0;t<r.length;t++)a.appendChild(r[t].displayState)},(Un.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof An))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var a=this;function t(){for(var e=a.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,a.buffer=e.substr(t),n}function n(e){e.match(/X-TIMESTAMP-MAP/)?bn(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":n=t,i=new Rn,bn(n,function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",Sn(t))}},/[^\d]:/,/,/),a.ontimestampmap&&a.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})}var n,i},/=/):bn(e,function(e,t){switch(e){case"Region":!function(e){var r=new Rn;if(bn(e,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var i=new Rn;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;r.set(e+"X",i.get("x")),r.set(e+"Y",i.get("y"));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id")){var t=new(a.vttjs.VTTRegion||a.window.VTTRegion);t.width=r.get("width",100),t.lines=r.get("lines",3),t.regionAnchorX=r.get("regionanchorX",0),t.regionAnchorY=r.get("regionanchorY",100),t.viewportAnchorX=r.get("viewportanchorX",0),t.viewportAnchorY=r.get("viewportanchorY",100),t.scroll=r.get("scroll",""),a.onregion&&a.onregion(t),a.regionList.push({id:r.get("id"),region:t})}}(t)}},/:/)}e&&(a.buffer+=a.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===a.state){if(!/\r\n|\n/.test(a.buffer))return this;var r=(i=t()).match(/^WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new An(An.Errors.BadSignature);a.state="HEADER"}for(var s=!1;a.buffer;){if(!/\r\n|\n/.test(a.buffer))return this;switch(s?s=!1:i=t(),a.state){case"HEADER":/:/.test(i)?n(i):i||(a.state="ID");continue;case"NOTE":i||(a.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){a.state="NOTE";break}if(!i)continue;if(a.cue=new(a.vttjs.VTTCue||a.window.VTTCue)(0,0,""),a.state="CUE",-1===i.indexOf("--\x3e")){a.cue.id=i;continue}case"CUE":try{In(i,a.cue,a.regionList)}catch(e){a.reportOrThrowError(e),a.cue=null,a.state="BADCUE";continue}a.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(s=!0)){a.oncue&&a.oncue(a.cue),a.cue=null,a.state="ID";continue}a.cue.text&&(a.cue.text+="\n"),a.cue.text+=i;continue;case"BADCUE":i||(a.state="ID");continue}}}catch(e){a.reportOrThrowError(e),"CUETEXT"===a.state&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state="INITIAL"===a.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new An(An.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var Vn=Un,Bn={"":!0,lr:!0,rl:!0},jn={start:!0,middle:!0,end:!0,left:!0,right:!0};function Hn(e){return"string"==typeof e&&(!!jn[e.toLowerCase()]&&e.toLowerCase())}function Yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function qn(e,t,n){var i=this,r=/MSIE\s8\.0/.test(navigator.userAgent),a={};r?i=document.createElement("custom"):a.enumerable=!0,i.hasBeenReset=!1;var s="",o=!1,l=e,u=t,c=n,d=null,h="",f=!0,p="auto",_="start",g=50,m="middle",v=50,E="middle";if(Object.defineProperty(i,"id",Yn({},a,{get:function(){return s},set:function(e){s=""+e}})),Object.defineProperty(i,"pauseOnExit",Yn({},a,{get:function(){return o},set:function(e){o=!!e}})),Object.defineProperty(i,"startTime",Yn({},a,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",Yn({},a,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",Yn({},a,{get:function(){return c},set:function(e){c=""+e,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",Yn({},a,{get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",Yn({},a,{get:function(){return h},set:function(e){var t,n="string"==typeof(t=e)&&!!Bn[t.toLowerCase()]&&t.toLowerCase();if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");h=n,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",Yn({},a,{get:function(){return f},set:function(e){f=!!e,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",Yn({},a,{get:function(){return p},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",Yn({},a,{get:function(){return _},set:function(e){var t=Hn(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",Yn({},a,{get:function(){return g},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",Yn({},a,{get:function(){return m},set:function(e){var t=Hn(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",Yn({},a,{get:function(){return v},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",Yn({},a,{get:function(){return E},set:function(e){var t=Hn(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),i.displayState=void 0,r)return i}qn.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Kn=qn,Gn={"":!0,up:!0};function Wn(e){return"number"==typeof e&&0<=e&&e<=100}var zn=function(){var t=100,n=3,i=0,r=100,a=0,s=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!Wn(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return n},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");n=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!Wn(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!Wn(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!Wn(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!Wn(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){var t,n="string"==typeof(t=e)&&!!Gn[t.toLowerCase()]&&t.toLowerCase();if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");o=n}}})},Xn=t(function(e){var t=e.exports={WebVTT:Vn,VTTCue:Kn,VTTRegion:zn};f.vttjs=t,f.WebVTT=t.WebVTT;var n=t.VTTCue,i=t.VTTRegion,r=f.VTTCue,a=f.VTTRegion;t.shim=function(){f.VTTCue=n,f.VTTRegion=i},t.restore=function(){f.VTTCue=r,f.VTTRegion=a},f.VTTCue||t.shim()});var Qn=function(t){function r(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};F(this,r),n.reportTouchActivity=!1;var i=V(this,t.call(this,null,n,e));return i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),yn.names.forEach(function(e){var t=yn[e];n&&n[t.getterName]&&(i[t.privateName]=n[t.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===n["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)}),!1===n.nativeCaptions||!1===n.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==n.nativeCaptions&&!0!==n.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new yn.text.ListClass,i.initTrackListeners(),n.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}return U(r,t),r.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},r.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},r.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(et(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},r.prototype.onDurationChange=function(e){this.duration_=this.duration()},r.prototype.buffered=function(){return Et(0,0)},r.prototype.bufferedPercent=function(){return yt(this.buffered(),this.duration_)},r.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},r.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},r.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.prototype.dispose=function(){this.clearTracks(vn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},r.prototype.clearTracks=function(e){var r=this;(e=[].concat(e)).forEach(function(e){for(var t=r[e+"Tracks"]()||[],n=t.length;n--;){var i=t[n];"text"===e&&r.removeRemoteTextTrack(i),t.removeTrack(i)}})},r.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},r.prototype.reset=function(){},r.prototype.error=function(e){return void 0!==e&&(this.error_=new Ct(e),this.trigger("error")),this.error_},r.prototype.played=function(){return this.hasStarted_?Et(0,0):Et()},r.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.prototype.initTrackListeners=function(){var r=this;vn.names.forEach(function(e){var t=vn[e],n=function(){r.trigger(e+"trackchange")},i=r[t.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),r.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})},r.prototype.addWebVttScript_=function(){var e=this;if(!f.WebVTT)if(h.body.contains(this.el())){if(!this.options_["vtt.js"]&&G(Xn)&&0<Object.keys(Xn).length)return void this.trigger("vttjsloaded");var t=h.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),f.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},r.prototype.emulateTextTracks=function(){var e=this,n=this.textTracks(),t=this.remoteTextTracks(),i=function(e){return n.addTrack(e.track)},r=function(e){return n.removeTrack(e.track)};t.on("addtrack",i),t.on("removetrack",r),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},s=function(){a();for(var e=0;e<n.length;e++){var t=n[e];t.removeEventListener("cuechange",a),"showing"===t.mode&&t.addEventListener("cuechange",a)}};s(),n.addEventListener("change",s),n.addEventListener("addtrack",s),n.addEventListener("removetrack",s),this.on("dispose",function(){t.off("addtrack",i),t.off("removetrack",r),n.removeEventListener("change",s),n.removeEventListener("addtrack",s),n.removeEventListener("removetrack",s);for(var e=0;e<n.length;e++){n[e].removeEventListener("cuechange",a)}})},r.prototype.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;var s=new yn.text.TrackClass(r);return a.addTrack(s),s}(this,e,t,n)},r.prototype.createRemoteTextTrack=function(e){var t=_t(e,{tech:this});return new En.remoteTextEl.TrackClass(t)},r.prototype.addRemoteTextTrack=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],i=this.createRemoteTextTrack(t);return!0!==n&&!1!==n&&(J.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),n=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==n&&this.ready(function(){return e.autoRemoteTextTracks_.addTrack(i.track)}),i},r.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},r.prototype.getVideoPlaybackQuality=function(){return{}},r.prototype.setPoster=function(){},r.prototype.playsinline=function(){},r.prototype.setPlaysinline=function(){},r.prototype.canPlayType=function(){return""},r.canPlayType=function(){return""},r.canPlaySource=function(e,t){return r.canPlayType(e.type)},r.isTech=function(e){return e.prototype instanceof r||e instanceof r||e===r},r.registerTech=function(e,t){if(r.techs_||(r.techs_={}),!r.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!r.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!r.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=pt(e),r.techs_[e]=t,"Tech"!==e&&r.defaultTechOrder_.push(e),t},r.getTech=function(e){if(e)return e=pt(e),r.techs_&&r.techs_[e]?r.techs_[e]:f&&f.videojs&&f.videojs[e]?(J.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),f.videojs[e]):void 0},r}(gt);yn.names.forEach(function(e){var t=yn[e];Qn.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Qn.prototype.featuresVolumeControl=!0,Qn.prototype.featuresFullscreenResize=!1,Qn.prototype.featuresPlaybackRate=!1,Qn.prototype.featuresProgressEvents=!1,Qn.prototype.featuresTimeupdateEvents=!1,Qn.prototype.featuresNativeTextTracks=!1,Qn.withSourceHandlers=function(r){r.registerSourceHandler=function(e,t){var n=r.sourceHandlers;n||(n=r.sourceHandlers=[]),void 0===t&&(t=n.length),n.splice(t,0,e)},r.canPlayType=function(e){for(var t=r.sourceHandlers||[],n=void 0,i=0;i<t.length;i++)if(n=t[i].canPlayType(e))return n;return""},r.selectSourceHandler=function(e,t){for(var n=r.sourceHandlers||[],i=0;i<n.length;i++)if(n[i].canHandleSource(e,t))return n[i];return null},r.canPlaySource=function(e,t){var n=r.selectSourceHandler(e,t);return n?n.canHandleSource(e,t):""};["seekable","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(e){var t=r.selectSourceHandler(e,this.options_);t||(r.nativeSourceHandler?t=r.nativeSourceHandler:J.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),t!==r.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=t.handleSource(e,this,this.options_),this.on("dispose",this.disposeSourceHandler)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},gt.registerComponent("Tech",Qn),Qn.registerTech("Tech",Qn),Qn.defaultTechOrder_=[];var Jn={};function Zn(e,t,n){e.setTimeout(function(){return function n(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];var r=arguments[2];var a=arguments[3];var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];var o=5<arguments.length&&void 0!==arguments[5]&&arguments[5];var t=e[0],l=e.slice(1);if("string"==typeof t)n(i,Jn[t],r,a,s,o);else if(t){var u=t(a);u.setSource(q({},i),function(e,t){if(e)return n(i,l,r,a,s,o);s.push(u),n(t,i.type===t.type?l:Jn[t.type],r,a,s,o)})}else l.length?n(i,l,r,a,s,o):o?r(i,s):n(i,Jn["*"],r,a,s,!0)}(t,Jn[t.type],n,e)},1)}var $n={buffered:1,currentTime:1,duration:1,seekable:1,played:1},ei={setCurrentTime:1};function ti(n){return function(e,t){return t[n]?t[n](e):e}}var ni=function(u){function c(e,t,n){F(this,c);var i=_t({createEl:!1},t),r=V(this,u.call(this,e,i,n));if(t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(var a=0,s=t.playerOptions.techOrder;a<s.length;a++){var o=pt(s[a]),l=Qn.getTech(o);if(o||(l=gt.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}return r}return U(c,u),c}(gt);gt.registerComponent("MediaLoader",ni);var ii=function(r){function i(e,t){F(this,i);var n=V(this,r.call(this,e,t));return n.emitTapEvents(),n.enable(),n}return U(i,r),i.prototype.createEl=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};t=q({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&J.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=q({role:"button","aria-live":"polite"},n),this.tabIndex_=t.tabIndex;var i=r.prototype.createEl.call(this,e,t,n);return this.createControlTextEl(i),i},i.prototype.createControlTextEl=function(e){return this.controlTextEl_=se("span",{className:"vjs-control-text"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},i.prototype.controlText=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.el();if(!e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,oe(this.controlTextEl_,n),this.nonIconControl||t.setAttribute("title",n)},i.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},i.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},i.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},i.prototype.handleClick=function(e){},i.prototype.handleFocus=function(e){Ye(h,"keydown",et(this,this.handleKeyPress))},i.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.trigger("click")):r.prototype.handleKeyPress&&r.prototype.handleKeyPress.call(this,e)},i.prototype.handleBlur=function(e){qe(h,"keydown",et(this,this.handleKeyPress))},i}(gt);gt.registerComponent("ClickableComponent",ii);var ri=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.update(),e.on("posterchange",et(n,n.update)),n}return U(r,i),r.prototype.dispose=function(){this.player().off("posterchange",this.update),i.prototype.dispose.call(this)},r.prototype.createEl=function(){var e=se("div",{className:"vjs-poster",tabIndex:-1});return L||(this.fallbackImg_=se("img"),e.appendChild(this.fallbackImg_)),e},r.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},r.prototype.setSrc=function(e){if(this.fallbackImg_)this.fallbackImg_.src=e;else{var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t}},r.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},r}(ii);gt.registerComponent("PosterImage",ri);var ai={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function si(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}function oi(e,t,n){try{e.style[t]=n}catch(e){return}}var li=function(r){function a(n,e,t){F(this,a);var i=V(this,r.call(this,n,e,t));return n.on("loadstart",et(i,i.toggleDisplay)),n.on("texttrackchange",et(i,i.updateDisplay)),n.on("loadstart",et(i,i.preselectTrack)),n.ready(et(i,function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",et(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}})),i}return U(a,r),a.prototype.preselectTrack=function(){for(var e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage,i=void 0,r=void 0,a=void 0,s=0;s<t.length;s++){var o=t[s];n&&n.enabled&&n.language===o.language?o.kind===n.kind?a=o:a||(a=o):n&&!n.enabled?r=i=a=null:o.default&&("descriptions"!==o.kind||i?o.kind in e&&!r&&(r=o):i=o)}a?a.mode="showing":r?r.mode="showing":i&&(i.mode="showing")},a.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},a.prototype.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},a.prototype.clearDisplay=function(){"function"==typeof f.WebVTT&&f.WebVTT.processCues(f,[],this.el_)},a.prototype.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var t=null,n=null,i=e.length;i--;){var r=e[i];"showing"===r.mode&&("descriptions"===r.kind?t=r:n=r)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))},a.prototype.updateForTrack=function(e){if("function"==typeof f.WebVTT&&e.activeCues){for(var t=this.player_.textTrackSettings.getValues(),n=[],i=0;i<e.activeCues.length;i++)n.push(e.activeCues[i]);f.WebVTT.processCues(f,n,this.el_);for(var r=n.length;r--;){var a=n[r];if(a){var s=a.displayState;if(t.color&&(s.firstChild.style.color=t.color),t.textOpacity&&oi(s.firstChild,"color",si(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(s.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&oi(s.firstChild,"backgroundColor",si(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?oi(s,"backgroundColor",si(t.windowColor,t.windowOpacity)):s.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===t.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===t.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===t.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),t.fontPercent&&1!==t.fontPercent){var o=f.parseFloat(s.style.fontSize);s.style.fontSize=o*t.fontPercent+"px",s.style.height="auto",s.style.top="auto",s.style.bottom="2px"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=ai[t.fontFamily])}}}},a}(gt);gt.registerComponent("TextTrackDisplay",li);var ui=function(e){function t(){return F(this,t),V(this,e.apply(this,arguments))}return U(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},t}(gt);gt.registerComponent("LoadingSpinner",ui);var ci=function(t){function e(){return F(this,e),V(this,t.apply(this,arguments))}return U(e,t),e.prototype.createEl=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};e="button",t=q({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),n=q({type:"button","aria-live":"polite"},n);var i=gt.prototype.createEl.call(this,"button",t,n);return this.createControlTextEl(i),i},e.prototype.addChild=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this.constructor.name;return J.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),gt.prototype.addChild.call(this,e,t)},e.prototype.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},e.prototype.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},e.prototype.handleKeyPress=function(e){32!==e.which&&13!==e.which&&t.prototype.handleKeyPress.call(this,e)},e}(ii);gt.registerComponent("Button",ci);var di=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-big-play-button"},r.prototype.handleClick=function(e){var t=this.player_.play();if(!(this.mouseused_&&e.clientX&&e.clientY)){var n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(i){var r=function(){return i.focus()};if(t&&t.then){t.then(r,function(){})}else this.setTimeout(r,1)}else this.player_.focus()}},r.prototype.handleKeyPress=function(e){this.mouseused_=!1,i.prototype.handleKeyPress.call(this,e)},r.prototype.handleMouseDown=function(e){this.mouseused_=!0},r}(ci);di.prototype.controlText_="Play Video",gt.registerComponent("BigPlayButton",di);var hi=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.controlText(t&&t.controlText||n.localize("Close")),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-close-button "+i.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},r}(ci);gt.registerComponent("CloseButton",hi);var fi=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.on(e,"play",n.handlePlay),n.on(e,"pause",n.handlePause),n.on(e,"ended",n.handleEnded),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-play-control "+i.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},r.prototype.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},r.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},r.prototype.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay")},r}(ci);function pi(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e;e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),(r=0<r||0<s?r+":":"")+(i=((r||10<=a)&&i<10?"0"+i:i)+":")+(n=n<10?"0"+n:n)}fi.prototype.controlText_="Play",gt.registerComponent("PlayToggle",fi);var _i=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.throttledUpdateContent=tt(et(n,n.updateContent),25),n.on(e,"timeupdate",n.throttledUpdateContent),n}return U(r,i),r.prototype.createEl=function(){var e=i.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=se("div",{className:"vjs-current-time-display"},{"aria-live":"off"},se("span",{className:"vjs-control-text",textContent:this.localize("Current Time")})),this.updateTextNode_(),e.appendChild(this.contentEl_),e},r.prototype.updateTextNode_=function(){this.textNode_&&this.contentEl_.removeChild(this.textNode_),this.textNode_=h.createTextNode(" "+(this.formattedTime_||"0:00")),this.contentEl_.appendChild(this.textNode_)},r.prototype.updateContent=function(e){var t=pi(this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.player_.duration());t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},r}(gt);gt.registerComponent("CurrentTimeDisplay",_i);var gi=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.throttledUpdateContent=tt(et(n,n.updateContent),25),n.on(e,["durationchange","loadedmetadata","timeupdate"],n.throttledUpdateContent),n}return U(r,i),r.prototype.createEl=function(){var e=i.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=se("div",{className:"vjs-duration-display"},{"aria-live":"off"},se("span",{className:"vjs-control-text",textContent:this.localize("Duration Time")})),this.updateTextNode_(),e.appendChild(this.contentEl_),e},r.prototype.updateTextNode_=function(){this.textNode_&&this.contentEl_.removeChild(this.textNode_),this.textNode_=h.createTextNode(" "+(this.formattedTime_||"0:00")),this.contentEl_.appendChild(this.textNode_)},r.prototype.updateContent=function(e){var t=this.player_.duration();t&&this.duration_!==t&&(this.duration_=t,this.formattedTime_=pi(t),this.requestAnimationFrame(this.updateTextNode_))},r}(gt);gt.registerComponent("DurationDisplay",gi);var mi=function(e){function t(){return F(this,t),V(this,e.apply(this,arguments))}return U(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(gt);gt.registerComponent("TimeDivider",mi);var vi=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.throttledUpdateContent=tt(et(n,n.updateContent),25),n.on(e,["timeupdate","durationchange"],n.throttledUpdateContent),n}return U(r,i),r.prototype.createEl=function(){var e=i.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=se("div",{className:"vjs-remaining-time-display"},{"aria-live":"off"},se("span",{className:"vjs-control-text",textContent:this.localize("Remaining Time")})),this.updateTextNode_(),e.appendChild(this.contentEl_),e},r.prototype.updateTextNode_=function(){this.textNode_&&this.contentEl_.removeChild(this.textNode_),this.textNode_=h.createTextNode(" -"+(this.formattedTime_||"0:00")),this.contentEl_.appendChild(this.textNode_)},r.prototype.updateContent=function(e){if(this.player_.duration()){var t=pi(this.player_.remainingTime());t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))}},r}(gt);gt.registerComponent("RemainingTimeDisplay",vi);var Ei=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}return U(r,i),r.prototype.createEl=function(){var e=i.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=se("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},r.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},r}(gt);gt.registerComponent("LiveDisplay",Ei);var yi=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on("focus",n.handleFocus),n.on("blur",n.handleBlur),n.on("click",n.handleClick),n.on(e,"controlsvisible",n.update),n.playerEvent&&n.on(e,n.playerEvent,n.update),n}return U(r,i),r.prototype.createEl=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return t.className=t.className+" vjs-slider",t=q({tabIndex:0},t),n=q({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),i.prototype.createEl.call(this,e,t,n)},r.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;e.preventDefault(),ve(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},r.prototype.handleMouseMove=function(e){},r.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Ee(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},r.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var n=(100*e).toFixed(2)+"%",i=t.el().style;return this.vertical()?i.height=n:i.width=n,e}}},r.prototype.calculateDistance=function(e){var t=Ae(this.el_,e);return this.vertical()?t.y:t.x},r.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},r.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},r.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},r.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},r.prototype.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},r}(gt);gt.registerComponent("Slider",yi);var Ti=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.partEls_=[],n.on(e,"progress",n.update),n}return U(r,i),r.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},r.prototype.update=function(e){var t=this.player_.buffered(),n=this.player_.duration(),i=this.player_.bufferedEnd(),r=this.partEls_,a=function(e,t){var n=e/t||0;return 100*(1<=n?1:n)+"%"};this.el_.style.width=a(i,n);for(var s=0;s<t.length;s++){var o=t.start(s),l=t.end(s),u=r[s];u||(u=this.el_.appendChild(se()),r[s]=u),u.style.left=a(o,i),u.style.width=a(l-o,i)}for(var c=r.length;c>t.length;c--)this.el_.removeChild(r[c-1]);r.length=t.length},r}(gt);gt.registerComponent("LoadProgressBar",Ti);var Ai=function(e){function t(){return F(this,t),V(this,e.apply(this,arguments))}return U(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},t.prototype.update=function(e,t,n){var i=ye(this.el_),r=ye(this.player_.el()),a=e.width*t;if(r&&i){var s=e.left-r.left+a,o=e.width-a+(r.right-e.right),l=i.width/2;s<l?l+=l-s:o<l&&(l=o),l<0?l=0:l>i.width&&(l=i.width),this.el_.style.right="-"+l+"px",oe(this.el_,n)}},t}(gt);gt.registerComponent("TimeTooltip",Ai);var Si=function(e){function t(){return F(this,t),V(this,e.apply(this,arguments))}return U(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.update=function(n,i){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e=pi(r.player_.scrubbing()?r.player_.getCache().currentTime:r.player_.currentTime(),r.player_.duration()),t=r.getChild("timeTooltip");t&&t.update(n,i,e)})},t}(gt);Si.prototype.options_={children:[]},O&&!(8<O)||E||T||Si.prototype.options_.children.push("timeTooltip"),gt.registerComponent("PlayProgressBar",Si);var Ri=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.update=tt(et(n,n.update),25),n}return U(r,i),r.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.prototype.update=function(n,i){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e=r.player_.duration(),t=pi(i*e,e);r.el_.style.left=n.width*i+"px",r.getChild("timeTooltip").update(n,i,t)})},r}(gt);Ri.prototype.options_={children:["timeTooltip"]},gt.registerComponent("MouseTimeDisplay",Ri);var bi=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.update=tt(et(n,n.update),50),n.on(e,["timeupdate","ended"],n.update),n}return U(r,i),r.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},r.prototype.update=function(){var e=i.prototype.update.call(this),t=this.player_.duration(),n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();return this.el_.setAttribute("aria-valuenow",(100*e).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[pi(n,t),pi(t,t)],"{1} of {2}")),this.bar.update(ye(this.el_),e),e},r.prototype.getPercent=function(){var e=(this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime())/this.player_.duration();return 1<=e?1:e},r.prototype.handleMouseDown=function(e){this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),i.prototype.handleMouseDown.call(this,e)},r.prototype.handleMouseMove=function(e){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)},r.prototype.handleMouseUp=function(e){i.prototype.handleMouseUp.call(this,e),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},r.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},r.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},r.prototype.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},r.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.handleAction(e)):i.prototype.handleKeyPress&&i.prototype.handleKeyPress.call(this,e)},r}(yi);bi.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},O&&!(8<O)||E||T||bi.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),bi.prototype.playerEvent="timeupdate",gt.registerComponent("SeekBar",bi);var Ii=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.handleMouseMove=tt(et(n,n.handleMouseMove),25),n.on(n.el_,"mousemove",n.handleMouseMove),n.throttledHandleMouseSeek=tt(et(n,n.handleMouseSeek),25),n.on(["mousedown","touchstart"],n.handleMouseDown),n}return U(r,i),r.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},r.prototype.handleMouseMove=function(e){var t=this.getChild("seekBar"),n=t.getChild("mouseTimeDisplay"),i=t.el(),r=ye(i),a=Ae(i,e).x;1<a?a=1:a<0&&(a=0),n&&n.update(r,a)},r.prototype.handleMouseSeek=function(e){this.getChild("seekBar").handleMouseMove(e)},r.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},r.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},r}(gt);Ii.prototype.options_={children:["seekBar"]},gt.registerComponent("ProgressControl",Ii);var Ci=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.on(e,"fullscreenchange",n.handleFullscreenChange),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+i.prototype.buildCSSClass.call(this)},r.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},r.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},r}(ci);Ci.prototype.controlText_="Fullscreen",gt.registerComponent("FullscreenToggle",Ci);var Pi=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},wi=function(e){function t(){return F(this,t),V(this,e.apply(this,arguments))}return U(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(gt);gt.registerComponent("VolumeLevel",wi);var Oi=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.on("slideractive",n.updateLastVolume_),n.on(e,"volumechange",n.updateARIAAttributes),e.ready(function(){return n.updateARIAAttributes()}),n}return U(r,i),r.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},r.prototype.handleMouseMove=function(e){this.checkMuted(),this.player_.volume(this.calculateDistance(e))},r.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},r.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},r.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},r.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},r.prototype.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},r.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},r.prototype.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},r}(yi);Oi.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Oi.prototype.playerEvent="volumechange",gt.registerComponent("VolumeBar",Oi);var Di=function(i){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};F(this,r),t.vertical=t.vertical||!1,(void 0===t.volumeBar||G(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical);var n=V(this,i.call(this,e,t));return Pi(n,e),n.throttledHandleMouseMove=tt(et(n,n.handleMouseMove),25),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}return U(r,i),r.prototype.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},r.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},r.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},r.prototype.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},r}(gt);Di.prototype.options_={children:["volumeBar"]},gt.registerComponent("VolumeControl",Di);var Ni=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return Pi(n,e),n.on(e,["loadstart","volumechange"],n.update),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-mute-control "+i.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},r.prototype.update=function(e){this.updateIcon_(),this.updateControlText_()},r.prototype.updateIcon_=function(){var e=this.player_.volume(),t=3;0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)de(this.el_,"vjs-vol-"+n);ce(this.el_,"vjs-vol-"+t)},r.prototype.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},r}(ci);Ni.prototype.controlText_="Mute",gt.registerComponent("MuteToggle",Ni);var Mi=function(i){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};F(this,r),void 0!==t.inline?t.inline=t.inline:t.inline=!0,(void 0===t.volumeControl||G(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline);var n=V(this,i.call(this,e,t));return Pi(n,e),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.muteToggle,"focus",n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n.on(n.muteToggle,"blur",n.sliderInactive_),n}return U(r,i),r.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},r.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},r.prototype.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},r}(gt);Mi.prototype.options_={children:["muteToggle","volumeControl"]},gt.registerComponent("VolumePanel",Mi);var Li=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return t&&(n.menuButton_=t.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyPress),n}return U(r,i),r.prototype.addItem=function(t){this.addChild(t),t.on("click",et(this,function(e){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==t.name()&&this.menuButton_.focus())}))},r.prototype.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=se(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=i.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Ye(t,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),t},r.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},r.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},r.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},r.prototype.focus=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},r}(gt);gt.registerComponent("Menu",Li);var xi=function(r){function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};F(this,a);var n=V(this,r.call(this,e,t));n.menuButton_=new ci(e,t),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var i=ci.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+i,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"focus",n.handleFocus),n.on(n.menuButton_,"blur",n.handleBlur),n.on("keydown",n.handleSubmenuKeyPress),n}return U(a,r),a.prototype.update=function(){var e=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},a.prototype.createMenu=function(){var e=new Li(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=se("li",{className:"vjs-menu-title",innerHTML:pt(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),le(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},a.prototype.createItems=function(){},a.prototype.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},a.prototype.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+ci.prototype.buildCSSClass()+" "+r.prototype.buildCSSClass.call(this)},a.prototype.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+r.prototype.buildCSSClass.call(this)},a.prototype.controlText=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(e,t)},a.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",et(this,function(e){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},a.prototype.focus=function(){this.menuButton_.focus()},a.prototype.blur=function(){this.menuButton_.blur()},a.prototype.handleFocus=function(){Ye(h,"keydown",et(this,this.handleKeyPress))},a.prototype.handleBlur=function(){qe(h,"keydown",et(this,this.handleKeyPress))},a.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},a.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus()))},a.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),this.menu.focus())},a.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},a.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},a.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},a}(gt);gt.registerComponent("MenuButton",xi);var ki=function(a){function s(e,t){F(this,s);var n=t.tracks,i=V(this,a.call(this,e,t));if(i.items.length<=1&&i.hide(),!n)return V(i);var r=et(i,i.update);return n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),i.player_.on("ready",r),i.player_.on("dispose",function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)}),i}return U(s,a),s}(xi);gt.registerComponent("TrackButton",ki);var Fi=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.selectable=t.selectable,n.selected(t.selected),n.selectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitem"),n}return U(r,i),r.prototype.createEl=function(e,t,n){return this.nonIconControl=!0,i.prototype.createEl.call(this,"li",q({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},t),n)},r.prototype.handleClick=function(e){this.selected(!0)},r.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(" ")))},r}(ii);gt.registerComponent("MenuItem",Fi);var Ui=function(l){function u(e,t){F(this,u);var n=t.track,i=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected="showing"===n.mode;var r=V(this,l.call(this,e,t));r.track=n;var a=et(r,r.handleTracksChange),s=et(r,r.handleSelectedLanguageChange);if(e.on(["loadstart","texttrackchange"],a),i.addEventListener("change",a),i.addEventListener("selectedlanguagechange",s),r.on("dispose",function(){i.removeEventListener("change",a),i.removeEventListener("selectedlanguagechange",s)}),void 0===i.onchange){var o=void 0;r.on(["tap","click"],function(){if("object"!==k(f.Event))try{o=new f.Event("change")}catch(e){}o||(o=h.createEvent("Event")).initEvent("change",!0,!0),i.dispatchEvent(o)})}return r}return U(u,l),u.prototype.handleClick=function(e){var t=this.track.kind,n=this.track.kinds,i=this.player_.textTracks();if(n||(n=[t]),l.prototype.handleClick.call(this,e),i)for(var r=0;r<i.length;r++){var a=i[r];a===this.track&&-1<n.indexOf(a.kind)?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled")}},u.prototype.handleTracksChange=function(e){this.selected("showing"===this.track.mode)},u.prototype.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},u}(Fi);gt.registerComponent("TextTrackMenuItem",Ui);var Vi=function(i){function r(e,t){F(this,r),t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0;var n=V(this,i.call(this,e,t));return n.selected(!0),n}return U(r,i),r.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(-1<this.options_.kinds.indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}this.selected(n)},r.prototype.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(-1<["captions","descriptions","subtitles"].indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},r}(Ui);gt.registerComponent("OffTextTrackMenuItem",Vi);var Bi=function(n){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return F(this,i),t.tracks=e.textTracks(),V(this,n.call(this,e,t))}return U(i,n),i.prototype.createItems=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ui,n=void 0;this.label_&&(n=this.label_+" off"),e.push(new Vi(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a=i[r];if(-1<this.kinds_.indexOf(a.kind)){var s=new t(this.player_,{track:a,selectable:!0});s.addClass("vjs-"+a.kind+"-menu-item"),e.push(s)}}return e},i}(ki);gt.registerComponent("TextTrackButton",Bi);var ji=function(s){function o(e,t){F(this,o);var n=t.track,i=t.cue,r=e.currentTime();t.selectable=!0,t.label=i.text,t.selected=i.startTime<=r&&r<i.endTime;var a=V(this,s.call(this,e,t));return a.track=n,a.cue=i,n.addEventListener("cuechange",et(a,a.update)),a}return U(o,s),o.prototype.handleClick=function(e){s.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},o.prototype.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},o}(Fi);gt.registerComponent("ChaptersTrackMenuItem",ji);var Hi=function(i){function r(e,t,n){return F(this,r),V(this,i.call(this,e,t,n))}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildWrapperCSSClass.call(this)},r.prototype.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),i.prototype.update.call(this)},r.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},r.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var n=e[t];if(n.kind===this.kind_)return n}},r.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(pt(this.kind_))},r.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),i.prototype.createMenu.call(this)},r.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;n<i;n++){var r=t[n],a=new ji(this.player_,{track:this.track_,cue:r});e.push(a)}return e},r}(Bi);Hi.prototype.kind_="chapters",Hi.prototype.controlText_="Chapters",gt.registerComponent("ChaptersButton",Hi);var Yi=function(s){function o(e,t,n){F(this,o);var i=V(this,s.call(this,e,t,n)),r=e.textTracks(),a=et(i,i.handleTracksChange);return r.addEventListener("change",a),i.on("dispose",function(){r.removeEventListener("change",a)}),i}return U(o,s),o.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,i=0,r=t.length;i<r;i++){var a=t[i];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},o.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildCSSClass.call(this)},o.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildWrapperCSSClass.call(this)},o}(Bi);Yi.prototype.kind_="descriptions",Yi.prototype.controlText_="Descriptions",gt.registerComponent("DescriptionsButton",Yi);var qi=function(i){function r(e,t,n){return F(this,r),V(this,i.call(this,e,t,n))}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildWrapperCSSClass.call(this)},r}(Bi);qi.prototype.kind_="subtitles",qi.prototype.controlText_="Subtitles",gt.registerComponent("SubtitlesButton",qi);var Ki=function(i){function r(e,t){F(this,r),t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem";var n=V(this,i.call(this,e,t));return n.addClass("vjs-texttrack-settings"),n.controlText(", opens "+t.kind+" settings dialog"),n}return U(r,i),r.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},r}(Ui);gt.registerComponent("CaptionSettingsMenuItem",Ki);var Gi=function(i){function r(e,t,n){return F(this,r),V(this,i.call(this,e,t,n))}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-captions-button "+i.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+i.prototype.buildWrapperCSSClass.call(this)},r.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||(e.push(new Ki(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,e)},r}(Bi);Gi.prototype.kind_="captions",Gi.prototype.controlText_="Captions",gt.registerComponent("CaptionsButton",Gi);var Wi=function(r){function e(){return F(this,e),V(this,r.apply(this,arguments))}return U(e,r),e.prototype.createEl=function(e,t,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),i+="</span>",r.prototype.createEl.call(this,e,q({innerHTML:i},t),n)},e}(Ui);gt.registerComponent("SubsCapsMenuItem",Wi);var zi=function(i){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};F(this,r);var n=V(this,i.call(this,e,t));return n.label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions"),n.menuButton_.controlText(pt(n.label_)),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildWrapperCSSClass.call(this)},r.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||(e.push(new Ki(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=i.prototype.createItems.call(this,e,Wi)},r}(Bi);zi.prototype.kinds_=["captions","subtitles"],zi.prototype.controlText_="Subtitles",gt.registerComponent("SubsCapsButton",zi);var Xi=function(s){function o(e,t){F(this,o);var n=t.track,i=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled;var r=V(this,s.call(this,e,t));r.track=n;var a=et(r,r.handleTracksChange);return i.addEventListener("change",a),r.on("dispose",function(){i.removeEventListener("change",a)}),r}return U(o,s),o.prototype.handleClick=function(e){var t=this.player_.audioTracks();s.prototype.handleClick.call(this,e);for(var n=0;n<t.length;n++){var i=t[n];i.enabled=i===this.track}},o.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},o}(Fi);gt.registerComponent("AudioTrackMenuItem",Xi);var Qi=function(n){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return F(this,i),t.tracks=e.audioTracks(),V(this,n.call(this,e,t))}return U(i,n),i.prototype.buildCSSClass=function(){return"vjs-audio-button "+n.prototype.buildCSSClass.call(this)},i.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+n.prototype.buildWrapperCSSClass.call(this)},i.prototype.createItems=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var i=t[n];e.push(new Xi(this.player_,{track:i,selectable:!0}))}return e},i}(ki);Qi.prototype.controlText_="Audio Track",gt.registerComponent("AudioTrackButton",Qi);var Ji=function(a){function s(e,t){F(this,s);var n=t.rate,i=parseFloat(n,10);t.label=n,t.selected=1===i,t.selectable=!0;var r=V(this,a.call(this,e,t));return r.label=n,r.rate=i,r.on(e,"ratechange",r.update),r}return U(s,a),s.prototype.handleClick=function(e){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},s.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},s}(Fi);Ji.prototype.contentElType="button",gt.registerComponent("PlaybackRateMenuItem",Ji);var Zi=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.updateVisibility(),n.updateLabel(),n.on(e,"loadstart",n.updateVisibility),n.on(e,"ratechange",n.updateLabel),n}return U(r,i),r.prototype.createEl=function(){var e=i.prototype.createEl.call(this);return this.labelEl_=se("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},r.prototype.buildCSSClass=function(){return"vjs-playback-rate "+i.prototype.buildCSSClass.call(this)},r.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+i.prototype.buildWrapperCSSClass.call(this)},r.prototype.createMenu=function(){var e=new Li(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;0<=n;n--)e.addChild(new Ji(this.player(),{rate:t[n]+"x"}));return e},r.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},r.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),i=n[0],r=0;r<n.length;r++)if(n[r]>t){i=n[r];break}this.player().playbackRate(i)},r.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},r.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},r.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},r.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},r}(xi);Zi.prototype.controlText_="Playback Rate",gt.registerComponent("PlaybackRateMenuButton",Zi);var $i=function(e){function t(){return F(this,t),V(this,e.apply(this,arguments))}return U(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(gt);gt.registerComponent("Spacer",$i);var er=function(t){function e(){return F(this,e),V(this,t.apply(this,arguments))}return U(e,t),e.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML="&nbsp;",e},e}($i);gt.registerComponent("CustomControlSpacer",er);var tr=function(e){function t(){return F(this,t),V(this,e.apply(this,arguments))}return U(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},t}(gt);tr.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},gt.registerComponent("ControlBar",tr);var nr=function(i){function r(e,t){F(this,r);var n=V(this,i.call(this,e,t));return n.on(e,"error",n.open),n}return U(r,i),r.prototype.buildCSSClass=function(){return"vjs-error-display "+i.prototype.buildCSSClass.call(this)},r.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},r}(Lt);nr.prototype.options_=_t(Lt.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),gt.registerComponent("ErrorDisplay",nr);var ir="vjs-text-track-settings",rr=["#000","Black"],ar=["#00F","Blue"],sr=["#0FF","Cyan"],or=["#0F0","Green"],lr=["#F0F","Magenta"],ur=["#F00","Red"],cr=["#FFF","White"],dr=["#FF0","Yellow"],hr=["1","Opaque"],fr=["0.5","Semi-Transparent"],pr=["0","Transparent"],_r={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[rr,cr,ur,or,ar,dr,lr,sr]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[hr,fr,pr]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[cr,rr,ur,or,ar,dr,lr,sr]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[hr,fr]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[pr,fr,hr]}};function gr(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}_r.windowColor.options=_r.backgroundColor.options;var mr=function(i){function r(e,t){F(this,r),t.temporary=!1;var n=V(this,i.call(this,e,t));return n.updateDisplay=et(n,n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=se("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===t.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),Y(_r,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}return U(r,i),r.prototype.createElSelect_=function(e){var n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"label",r=_r[e],a=r.id.replace("%s",this.id_);return["<"+t+' id="'+a+'" class="'+("label"===t?"vjs-label":"")+'">',this.localize(r.label),"</"+t+">",'<select aria-labelledby="'+i+" "+a+'">'].concat(r.options.map(function(e){var t=a+"-"+e[1];return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+i+" "+a+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},r.prototype.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},r.prototype.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},r.prototype.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},r.prototype.createElColors_=function(){return se("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},r.prototype.createElFont_=function(){return se("div",{className:'vjs-track-settings-font">',innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},r.prototype.createElControls_=function(){var e=this.localize("restore all settings to the default values");return se("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},r.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},r.prototype.label=function(){return this.localize("Caption Settings Dialog")},r.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},r.prototype.buildCSSClass=function(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},r.prototype.getValues=function(){var s=this;return function(n,i){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return H(n).reduce(function(e,t){return i(e,n[t],t)},e)}(_r,function(e,t,n){var i,r,a=(i=s.$(t.selector),r=t.parser,gr(i.options[i.options.selectedIndex].value,r));return void 0!==a&&(e[n]=a),e},{})},r.prototype.setValues=function(n){var i=this;Y(_r,function(e,t){!function(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(gr(e.options[i].value,n)===t){e.selectedIndex=i;break}}(i.$(e.selector),n[t],e.parser)})},r.prototype.setDefaults=function(){var n=this;Y(_r,function(e){var t=e.hasOwnProperty("default")?e.default:0;n.$(e.selector).selectedIndex=t})},r.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(f.localStorage.getItem(ir))}catch(e){J.warn(e)}e&&this.setValues(e)},r.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?f.localStorage.setItem(ir,JSON.stringify(e)):f.localStorage.removeItem(ir)}catch(e){J.warn(e)}}},r.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},r.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(h,"keydown",this.handleKeyDown);var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},r}(Lt);gt.registerComponent("TextTrackSettings",mr);var vr=B(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),Er=function(c){function d(e,t){F(this,d);var n=V(this,c.call(this,e,t)),i=e.source,r=!1;if(i&&(n.el_.currentSrc!==i.src||e.tag&&3===e.tag.initNetworkState_)?n.setSource(i):n.handleLateInit_(n.el_),n.el_.hasChildNodes()){for(var a=n.el_.childNodes,s=a.length,o=[];s--;){var l=a[s];"track"===l.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(l),n.remoteTextTracks().addTrack(l.track),n.textTracks().addTrack(l.track),r||n.el_.hasAttribute("crossorigin")||!Jt(l.src)||(r=!0)):o.push(l))}for(var u=0;u<o.length;u++)n.el_.removeChild(o[u])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&r&&J.warn(Z(vr)),n.restoreMetadataTracksInIOSNativePlayer_(),(M||m||R)&&!0===e.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}return U(d,c),d.prototype.dispose=function(){d.disposeMediaElement(this.el_),c.prototype.dispose.call(this)},d.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var i=this.textTracks(),r=void 0,e=function(){r=[];for(var e=0;e<i.length;e++){var t=i[e];"metadata"===t.kind&&r.push({track:t,storedMode:t.mode})}};e(),i.addEventListener("change",e);var t=function e(){for(var t=0;t<r.length;t++){var n=r[t];"disabled"===n.track.mode&&n.track.mode!==n.storedMode&&(n.track.mode=n.storedMode)}i.removeEventListener("change",e)};this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",e),i.removeEventListener("change",t),i.addEventListener("change",t)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",e),i.addEventListener("change",e),i.removeEventListener("change",t)})},d.prototype.proxyNativeTracks_=function(){var s=this;vn.names.forEach(function(e){var t=vn[e],r=s.el()[t.getterName],a=s[t.getterName]();if(s["featuresNative"+t.capitalName+"Tracks"]&&r&&r.addEventListener){var i={change:function(e){a.trigger({type:"change",target:a,currentTarget:a,srcElement:a})},addtrack:function(e){a.addTrack(e.track)},removetrack:function(e){a.removeTrack(e.track)}},n=function(){for(var e=[],t=0;t<a.length;t++){for(var n=!1,i=0;i<r.length;i++)if(r[i]===a[t]){n=!0;break}n||e.push(a[t])}for(;e.length;)a.removeTrack(e.shift())};Object.keys(i).forEach(function(t){var n=i[t];r.addEventListener(t,n),s.on("dispose",function(e){return r.removeEventListener(t,n)})}),s.on("loadstart",n),s.on("dispose",function(e){return s.off("loadstart",n)})}})},d.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),d.disposeMediaElement(e),e=t}else{e=h.createElement("video");var n=_t({},this.options_.tag&&pe(this.options_.tag));M&&!0===this.options_.nativeControlsForTouch||delete n.controls,fe(e,q(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&ge(e,"preload",this.options_.preload);for(var i=["loop","muted","playsinline","autoplay"],r=i.length-1;0<=r;r--){var a=i[r],s=this.options_[a];void 0!==s&&(s?ge(e,a,a):me(e,a),e[a]=s)}return e},d.prototype.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var i=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},d.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){J(e,"Video is not ready. (Video.js)")}},d.prototype.duration=function(){var t=this;if(this.el_.duration===1/0&&T&&C&&0===this.el_.currentTime){return this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN}return this.el_.duration||NaN},d.prototype.width=function(){return this.el_.offsetWidth},d.prototype.height=function(){return this.el_.offsetHeight},d.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)})}},d.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=f.navigator&&f.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},d.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},d.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},d.prototype.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},d.prototype.reset=function(){d.resetMediaElement(this.el_)},d.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},d.prototype.setControls=function(e){this.el_.controls=!!e},d.prototype.addTextTrack=function(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):c.prototype.addTextTrack.call(this,e,t,n)},d.prototype.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return c.prototype.createRemoteTextTrack.call(this,e);var t=h.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t},d.prototype.addRemoteTextTrack=function(e,t){var n=c.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},d.prototype.removeRemoteTextTrack=function(e){if(c.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),n=t.length;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])},d.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),f.performance&&"function"==typeof f.performance.now?e.creationTime=f.performance.now():f.performance&&f.performance.timing&&"number"==typeof f.performance.timing.navigationStart&&(e.creationTime=f.Date.now()-f.performance.timing.navigationStart),e},d}(Qn);if(ie()){Er.TEST_VID=h.createElement("video");var yr=h.createElement("track");yr.kind="captions",yr.srclang="en",yr.label="English",Er.TEST_VID.appendChild(yr)}Er.isSupported=function(){try{Er.TEST_VID.volume=.5}catch(e){return!1}return!(!Er.TEST_VID||!Er.TEST_VID.canPlayType)},Er.canPlayType=function(e){return Er.TEST_VID.canPlayType(e)},Er.canPlaySource=function(e,t){return Er.canPlayType(e.type)},Er.canControlVolume=function(){try{var e=Er.TEST_VID.volume;return Er.TEST_VID.volume=e/2+.1,e!==Er.TEST_VID.volume}catch(e){return!1}},Er.canControlPlaybackRate=function(){if(T&&C&&P<58)return!1;try{var e=Er.TEST_VID.playbackRate;return Er.TEST_VID.playbackRate=e/2+.1,e!==Er.TEST_VID.playbackRate}catch(e){return!1}},Er.supportsNativeTextTracks=function(){return N},Er.supportsNativeVideoTracks=function(){return!(!Er.TEST_VID||!Er.TEST_VID.videoTracks)},Er.supportsNativeAudioTracks=function(){return!(!Er.TEST_VID||!Er.TEST_VID.audioTracks)},Er.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Er.prototype.featuresVolumeControl=Er.canControlVolume(),Er.prototype.featuresPlaybackRate=Er.canControlPlaybackRate(),Er.prototype.movingMediaElementInDOM=!E,Er.prototype.featuresFullscreenResize=!0,Er.prototype.featuresProgressEvents=!0,Er.prototype.featuresTimeupdateEvents=!0,Er.prototype.featuresNativeTextTracks=Er.supportsNativeTextTracks(),Er.prototype.featuresNativeVideoTracks=Er.supportsNativeVideoTracks(),Er.prototype.featuresNativeAudioTracks=Er.supportsNativeAudioTracks();var Tr=Er.TEST_VID&&Er.TEST_VID.constructor.prototype.canPlayType,Ar=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,Sr=/^video\/mp4/i;Er.patchCanPlayType=function(){4<=A&&!b?Er.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&Ar.test(e)?"maybe":Tr.call(this,e)}:S&&(Er.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&Sr.test(e)?"maybe":Tr.call(this,e)})},Er.unpatchCanPlayType=function(){var e=Er.TEST_VID.constructor.prototype.canPlayType;return Er.TEST_VID.constructor.prototype.canPlayType=Tr,e},Er.patchCanPlayType(),Er.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Er.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){Er.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Er.prototype["set"+pt(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){Er.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){Er.prototype["set"+pt(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(e){Er.prototype[e]=function(){return this.el_[e]()}}),Qn.withSourceHandlers(Er),Er.nativeSourceHandler={},Er.nativeSourceHandler.canPlayType=function(e){try{return Er.TEST_VID.canPlayType(e)}catch(e){return""}},Er.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Er.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=Qt(e.src);return Er.nativeSourceHandler.canPlayType("video/"+n)}return""},Er.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Er.nativeSourceHandler.dispose=function(){},Er.registerSourceHandler(Er.nativeSourceHandler),Qn.registerTech("Html5",Er);var Rr=B(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),br=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","resize","volumechange","texttrackchange"],Ir=function(c){function d(e,t,n){if(F(this,d),e.id=e.id||"vjs_video_"+Ne(),(t=q(d.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var i=e.closest("[lang]");i&&(t.language=i.getAttribute("lang"))}else for(var r=e;r&&1===r.nodeType;){if(pe(r).hasOwnProperty("lang")){t.language=r.getAttribute("lang");break}r=r.parentNode}var a=V(this,c.call(this,null,t,n));if(a.isReady_=!1,!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=e,a.tagAttributes=e&&pe(e),a.language(a.options_.language),t.languages){var s={};Object.getOwnPropertyNames(t.languages).forEach(function(e){s[e.toLowerCase()]=t.languages[e]}),a.languages_=s}else a.languages_=d.prototype.options_.languages;a.cache_={},a.poster_=t.poster||"",a.controls_=!!t.controls,a.cache_.lastVolume=1,e.controls=!1,a.scrubbing_=!1,a.el_=a.createEl(),dt(a,{eventBusKey:"el_"});var o=_t(a.options_);if(t.plugins){var l=t.plugins;Object.keys(l).forEach(function(e){if("function"!=typeof this[e])throw new Error('plugin "'+e+'" does not exist');this[e](l[e])},a)}a.options_.playerOptions=o,a.middleware_=[],a.initChildren(),a.isAudio("audio"===e.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),E||a.addClass("vjs-workinghover"),d.players[a.id_]=a;var u="6.2.8".split(".")[0];return a.addClass("vjs-v"+u),a.userActive(!0),a.reportUserActivity(),a.listenForUserActivity_(),a.on("fullscreenchange",a.handleFullscreenChange_),a.on("stageclick",a.handleStageClick_),a.changingSrc_=!1,a}return U(d,c),d.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),d.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),c.prototype.dispose.call(this)},d.prototype.createEl=function(){var e=this.tag,t=void 0,n=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");t=this.el_=n?e.parentNode:c.prototype.createEl.call(this,"div"),e.setAttribute("tabindex","-1"),e.removeAttribute("width"),e.removeAttribute("height");var i=pe(e);if(Object.getOwnPropertyNames(i).forEach(function(e){"class"===e?t.className+=" "+i[e]:t.setAttribute(e,i[e])}),e.playerId=e.id,e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused"),!0!==f.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Ze("vjs-styles-dimensions");var r=Pe(".vjs-styles-defaults"),a=Pe("head");a.insertBefore(this.styleEl_,r?r.nextSibling:a.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var s=e.getElementsByTagName("a"),o=0;o<s.length;o++){var l=s.item(o);ce(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!n&&e.parentNode.insertBefore(t,e),le(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_=t},d.prototype.width=function(e){return this.dimension("width",e)},d.prototype.height=function(e){return this.dimension("height",e)},d.prototype.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t)this[n]=void 0;else{var i=parseFloat(t);if(isNaN(i))return void J.error('Improper value "'+t+'" supplied for for '+e);this[n]=i}this.updateStyleEl_()},d.prototype.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},d.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},d.prototype.updateStyleEl_=function(){if(!0!==f.VIDEOJS_NO_DYNAMIC_STYLE){var e=void 0,t=void 0,n=void 0,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=i[1]/i[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),$e(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var a="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,o=this.tech_&&this.tech_.el();o&&(0<=a&&(o.width=a),0<=s&&(o.height=s))}},d.prototype.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=pt(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(Qn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a={source:t,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"]};yn.names.forEach(function(e){var t=yn[e];a[t.getterName]=n[t.privateName]}),q(a,this.options_[i]),q(a,this.options_[r]),q(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(a.startTime=this.cache_.currentTime);var s=Qn.getTech(e);if(!s)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new s(a),this.tech_.ready(et(this,this.handleTechReady_),!0),Nt(this.textTracksJson_||[],this.tech_),br.forEach(function(e){n.on(n.tech_,e,n["handleTech"+pt(e)+"_"])}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||le(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},d.prototype.unloadTech_=function(){var n=this;yn.names.forEach(function(e){var t=yn[e];n[t.privateName]=n[t.getterName]()}),this.textTracksJson_=Dt(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},d.prototype.tech=function(e){return void 0===e&&J.warn(Z(Rr)),this.tech_},d.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},d.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},d.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused())try{delete this.tag.poster}catch(e){J("deleting tag.poster throws in some browsers",e)}},d.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},d.prototype.hasStarted=function(e){if(void 0===e)return!!this.hasStarted_;this.hasStarted_!==e&&((this.hasStarted_=e)?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},d.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},d.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},d.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},d.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},d.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},d.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},d.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},d.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(J.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},d.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},d.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},d.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},d.prototype.handleTechClick_=function(e){0===e.button&&this.controls()&&(this.paused()?this.play():this.pause())},d.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},d.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},d.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},d.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},d.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},d.prototype.handleStageClick_=function(){this.reportUserActivity()},d.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},d.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},d.prototype.handleTechTextData_=function(){var e=null;1<arguments.length&&(e=arguments[1]),this.trigger("textdata",e)},d.prototype.getCache=function(){return this.cache_},d.prototype.techCall_=function(r,a){this.ready(function(){if(r in ei)return e=this.middleware_,t=this.tech_,i=a,t[n=r](e.reduce(ti(n),i));var e,t,n,i;try{this.tech_&&this.tech_[r](a)}catch(e){throw J(e),e}},!0)},d.prototype.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in $n)return e=this.middleware_,n=this.tech_,i=t,e.reduceRight(ti(i),n[i]());try{return this.tech_[t]()}catch(e){throw void 0===this.tech_[t]?J("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e):"TypeError"===e.name?(J("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1):J(e),e}}var e,n,i},d.prototype.play=function(){if(this.changingSrc_)this.ready(function(){var e=this.techGet_("play");void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})});else{if(this.isReady_&&(this.src()||this.currentSrc()))return this.techGet_("play");this.ready(function(){this.tech_.one("loadstart",function(){var e=this.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})})})}},d.prototype.pause=function(){this.techCall_("pause")},d.prototype.paused=function(){return!1!==this.techGet_("paused")},d.prototype.played=function(){return this.techGet_("played")||Et(0,0)},d.prototype.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},d.prototype.currentTime=function(e){if(void 0===e)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;this.techCall_("setCurrentTime",e)},d.prototype.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},d.prototype.remainingTime=function(){return this.duration()-this.currentTime()},d.prototype.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=Et(0,0)),e},d.prototype.bufferedPercent=function(){return yt(this.buffered(),this.duration())},d.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return t<n&&(n=t),n},d.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},d.prototype.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},d.prototype.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},d.prototype.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},d.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},d.prototype.isFullscreen=function(e){if(void 0===e)return!!this.isFullscreen_;this.isFullscreen_=!!e},d.prototype.requestFullscreen=function(){var n=Tt;this.isFullscreen(!0),n.requestFullscreen?(Ye(h,n.fullscreenchange,et(this,function e(t){this.isFullscreen(h[n.fullscreenElement]),!1===this.isFullscreen()&&qe(h,n.fullscreenchange,e),this.trigger("fullscreenchange")})),this.el_[n.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},d.prototype.exitFullscreen=function(){var e=Tt;this.isFullscreen(!1),e.requestFullscreen?h[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},d.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=h.documentElement.style.overflow,Ye(h,"keydown",et(this,this.fullWindowOnEscKey)),h.documentElement.style.overflow="hidden",ce(h.body,"vjs-full-window"),this.trigger("enterFullWindow")},d.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},d.prototype.exitFullWindow=function(){this.isFullWindow=!1,qe(h,"keydown",this.fullWindowOnEscKey),h.documentElement.style.overflow=this.docOrigOverflow,de(h.body,"vjs-full-window"),this.trigger("exitFullWindow")},d.prototype.canPlayType=function(e){for(var t=void 0,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],a=Qn.getTech(r);if(a||(a=gt.getComponent(r)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else J.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},d.prototype.selectSource=function(e){var n,i=this,t=this.options_.techOrder.map(function(e){return[e,Qn.getTech(e)]}).filter(function(e){var t=e[0],n=e[1];return n?n.isSupported():(J.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(e,n,i){var r=void 0;return e.some(function(t){return n.some(function(e){if(r=i(t,e))return!0})}),r},a=function(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}};return(this.options_.sourceOrder?r(e,t,(n=a,function(e,t){return n(t,e)})):r(t,e,a))||!1},d.prototype.src=function(e){var r=this;if(void 0===e)return this.cache_.src;var a=function t(e){if(Array.isArray(e)){var n=[];e.forEach(function(e){e=t(e),Array.isArray(e)?n=n.concat(e):K(e)&&n.push(e)}),e=n}else e="string"==typeof e&&e.trim()?[{src:e}]:K(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[e]:[];return e}(e);a.length?(this.cache_.sources=a,this.changingSrc_=!0,this.cache_.source=a[0],Zn(this,a[0],function(e,t){var n,i;if(r.middleware_=t,r.src_(e))return 1<a.length?r.src(a.slice(1)):(r.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void r.triggerReady());r.changingSrc_=!1,r.cache_.src=e.src,n=t,i=r.tech_,n.forEach(function(e){return e.setTech&&e.setTech(i)})})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},d.prototype.src_=function(e){var t,n,i=this.selectSource([e]);return!i||(t=i.tech,n=this.techName_,pt(t)!==pt(n)?(this.changingSrc_=!0,this.loadTech_(i.tech,i.source)):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),"auto"===this.options_.preload&&this.load()},!0),!1)},d.prototype.load=function(){this.techCall_("load")},d.prototype.reset=function(){this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},d.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},d.prototype.currentSource=function(){return this.cache_.source||{}},d.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},d.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},d.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},d.prototype.autoplay=function(e){return void 0!==e?(this.techCall_("setAutoplay",e),void(this.options_.autoplay=e)):this.techGet_("autoplay",e)},d.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},d.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},d.prototype.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),this.poster_=e,this.techCall_("setPoster",e),this.trigger("posterchange")},d.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},d.prototype.controls=function(e){return void 0!==e?(e=!!e,void(this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),e?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())))):!!this.controls_},d.prototype.usingNativeControls=function(e){return void 0!==e?(e=!!e,void(this.usingNativeControls_!==e&&((this.usingNativeControls_=e)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))))):!!this.usingNativeControls_},d.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new Ct(e),this.addClass("vjs-error"),J.error("(CODE:"+this.error_.code+" "+Ct.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},d.prototype.reportUserActivity=function(e){this.userActivity_=!0},d.prototype.userActive=function(e){if(void 0===e)return this.userActive_;(e=!!e)!==this.userActive_&&((this.userActive_=e)?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")))},d.prototype.listenForUserActivity_=function(){var t=void 0,n=void 0,i=void 0,r=et(this,this.reportUserActivity);this.on("mousedown",function(){r(),this.clearInterval(t),t=this.setInterval(r,250)}),this.on("mousemove",function(e){e.screenX===n&&e.screenY===i||(n=e.screenX,i=e.screenY,r())}),this.on("mouseup",function(e){r(),this.clearInterval(t)}),this.on("keydown",r),this.on("keyup",r);var a=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;0<e&&(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},d.prototype.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},d.prototype.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},d.prototype.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},d.prototype.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},d.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},d.prototype.removeRemoteTextTrack=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).track,t=void 0===e?arguments[0]:e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},d.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},d.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},d.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},d.prototype.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},d.prototype.languages=function(){return _t(d.prototype.options_.languages,this.languages_)},d.prototype.toJSON=function(){var e=_t(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];(i=_t(i)).player=void 0,e.tracks[n]=i}return e},d.prototype.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var i=new Lt(this,t);return this.addChild(i),i.on("dispose",function(){n.removeChild(i)}),i.open(),i},d.getTagSettings=function(e){var t={sources:[],tracks:[]},n=pe(e),i=n["data-setup"];if(ue(e,"vjs-fluid")&&(n.fluid=!0),null!==i){var r=wt(i||"{}"),a=r[0],s=r[1];a&&J.error(a),q(n,s)}if(q(t,n),e.hasChildNodes())for(var o=e.childNodes,l=0,u=o.length;l<u;l++){var c=o[l],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(pe(c)):"track"===d&&t.tracks.push(pe(c))}return t},d.prototype.flexNotSupported_=function(){var e=h.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},d}(gt);yn.names.forEach(function(e){var t=yn[e];Ir.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Ir.players={};var Cr=f.navigator;Ir.prototype.options_={techOrder:Qn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:Cr&&(Cr.languages&&Cr.languages[0]||Cr.userLanguage||Cr.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Ir.prototype[e]=function(){return this.techGet_(e)}}),br.forEach(function(e){Ir.prototype["handleTech"+pt(e)+"_"]=function(){return this.trigger(e)}}),gt.registerComponent("Player",Ir);var Pr="plugin",wr="activePlugins_",Or={},Dr=function(e){return Or.hasOwnProperty(e)},Nr=function(e){return Dr(e)?Or[e]:void 0},Mr=function(e,t){e[wr]=e[wr]||{},e[wr][t]=!0},Lr=function(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},xr=function(r,a){return a.prototype.name=r,function(){Lr(this,{name:r,plugin:a,instance:null},!0);for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=new(Function.prototype.bind.apply(a,[null].concat([this].concat(t))));return this[r]=function(){return i},Lr(this,i.getEventHash()),i}},kr=function(){function a(e){if(F(this,a),this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,dt(this),delete this.trigger,ft(this,this.constructor.defaultState),Mr(e,this.name),this.dispose=et(this,this.dispose),e.on("dispose",this.dispose)}return a.prototype.getEventHash=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e.name=this.name,e.plugin=this.constructor,e.instance=this,e},a.prototype.trigger=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Ke(this.eventBusEl_,e,this.getEventHash(t))},a.prototype.handleStateChanged=function(e){},a.prototype.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[wr][e]=!1,this.player=this.state=null,t[e]=xr(e,Or[e])},a.isBasic=function(e){var t="string"==typeof e?Nr(e):e;return"function"==typeof t&&!a.prototype.isPrototypeOf(t.prototype)},a.registerPlugin=function(e,t){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+(void 0===e?"undefined":k(e))+".");if(Dr(e))J.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(Ir.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+(void 0===t?"undefined":k(t))+".");var n,i,r;return Or[e]=t,e!==Pr&&(a.isBasic(t)?Ir.prototype[e]=(n=e,i=t,r=function(){Lr(this,{name:n,plugin:i,instance:null},!0);var e=i.apply(this,arguments);return Mr(this,n),Lr(this,{name:n,plugin:i,instance:e}),e},Object.keys(i).forEach(function(e){r[e]=i[e]}),r):Ir.prototype[e]=xr(e,t)),t},a.deregisterPlugin=function(e){if(e===Pr)throw new Error("Cannot de-register base plugin.");Dr(e)&&(delete Or[e],delete Ir.prototype[e])},a.getPlugins=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(Or),n=void 0;return e.forEach(function(e){var t=Nr(e);t&&((n=n||{})[e]=t)}),n},a.getPluginVersion=function(e){var t=Nr(e);return t&&t.VERSION||""},a}();kr.getPlugin=Nr,kr.BASE_PLUGIN_NAME=Pr,kr.registerPlugin(Pr,kr),Ir.prototype.usingPlugin=function(e){return!!this[wr]&&!0===this[wr][e]},Ir.prototype.hasPlugin=function(e){return!!Dr(e)};function Fr(e,n,t){var i=void 0;if("string"==typeof e){var r=Fr.getPlayers();if(0===e.indexOf("#")&&(e=e.slice(1)),r[e])return n&&J.warn('Player "'+e+'" is already initialised. Options will not be applied.'),t&&r[e].ready(t),r[e];i=Pe("#"+e)}else i=e;if(!i||!i.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");if(i.player||Ir.players[i.playerId])return i.player||Ir.players[i.playerId];n=n||{},Fr.hooks("beforesetup").forEach(function(e){var t=e(i,_t(n));K(t)&&!Array.isArray(t)?n=_t(n,t):J.error("please return an object in beforesetup hooks")});var a=new(gt.getComponent("Player"))(i,n,t);return Fr.hooks("setup").forEach(function(e){return e(a)}),a}if("undefined"==typeof HTMLVideoElement&&ie()&&(h.createElement("video"),h.createElement("audio"),h.createElement("track")),Fr.hooks_={},Fr.hooks=function(e,t){return Fr.hooks_[e]=Fr.hooks_[e]||[],t&&(Fr.hooks_[e]=Fr.hooks_[e].concat(t)),Fr.hooks_[e]},Fr.hook=function(e,t){Fr.hooks(e,t)},Fr.removeHook=function(e,t){var n=Fr.hooks(e).indexOf(t);return!(n<=-1)&&(Fr.hooks_[e]=Fr.hooks_[e].slice(),Fr.hooks_[e].splice(n,1),!0)},!0!==f.VIDEOJS_NO_DYNAMIC_STYLE&&ie()){var Ur=Pe(".vjs-styles-defaults");if(!Ur){Ur=Ze("vjs-styles-defaults");var Vr=Pe("head");Vr&&Vr.insertBefore(Ur,Vr.firstChild),$e(Ur,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n      \n\n      .vjs-modal-dialog,.vjs-big-play-button,.vjs-control-bar {\n        display: none\n      }\n    ")}}return Je(1,Fr),Fr.VERSION="6.2.8",Fr.options=Ir.prototype.options_,Fr.getPlayers=function(){return Ir.players},Fr.players=Ir.players,Fr.getComponent=gt.getComponent,Fr.registerComponent=function(e,t){Qn.isTech(t)&&J.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),gt.registerComponent.call(gt,e,t)},Fr.getTech=Qn.getTech,Fr.registerTech=Qn.registerTech,Fr.use=function(e,t){Jn[e]=Jn[e]||[],Jn[e].push(t)},Fr.browser=x,Fr.TOUCH_ENABLED=M,Fr.extend=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=function(){e.apply(this,arguments)},i={};for(var r in"object"===(void 0===t?"undefined":k(t))?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):"function"==typeof t&&(n=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":k(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)}(n,e),i)i.hasOwnProperty(r)&&(n.prototype[r]=i[r]);return n},Fr.mergeOptions=_t,Fr.bind=et,Fr.registerPlugin=kr.registerPlugin,Fr.plugin=function(e,t){return J.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),kr.registerPlugin(e,t)},Fr.getPlugins=kr.getPlugins,Fr.getPlugin=kr.getPlugin,Fr.getPluginVersion=kr.getPluginVersion,Fr.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),Fr.options.languages=_t(Fr.options.languages,((n={})[e]=t,n)),Fr.options.languages[e]},Fr.log=J,Fr.createTimeRange=Fr.createTimeRanges=Et,Fr.formatTime=pi,Fr.parseUrl=Xt,Fr.isCrossOrigin=Jt,Fr.EventTarget=nt,Fr.on=Ye,Fr.one=Ge,Fr.off=qe,Fr.trigger=Ke,Fr.xhr=un,Fr.TextTrack=pn,Fr.AudioTrack=_n,Fr.VideoTrack=gn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){Fr[e]=function(){return J.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Oe[e].apply(null,arguments)}}),Fr.computedStyle=$,Fr.dom=Oe,Fr.url=Zt,Fr}),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(this,function(){return function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}return r.m=n,r.c=i,r.p="",r(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(1)),a=i(n(2)),s=n(21),o=i(n(22)),l=i(n(23));function i(e){return e&&e.__esModule?e:{default:e}}var u=void 0,c=!1,d=function(){function i(e,t,n){(0,r.default)(this,i),n=n||t.options_,e.src&&(this.el_=t.el(),this.player_=videojs(n.playerId),this.protection_=e&&e.protection,this.tech_=t,this.onCertificateError=this.onCertificateError.bind(this),this.onCertificateLoad=this.onCertificateLoad.bind(this),this.onKeySessionWebkitKeyAdded=this.onKeySessionWebkitKeyAdded.bind(this),this.onKeySessionWebkitKeyError=this.onKeySessionWebkitKeyError.bind(this),this.onKeySessionWebkitKeyMessage=this.onKeySessionWebkitKeyMessage.bind(this),this.onLicenseError=this.onLicenseError.bind(this),this.onLicenseLoad=this.onLicenseLoad.bind(this),this.onVideoError=this.onVideoError.bind(this),this.onVideoWebkitNeedKey=this.onVideoWebkitNeedKey.bind(this),t.isReady_=!1,this.src(e),t.triggerReady())}return(0,a.default)(i,null,[{key:"setLogToBrowserConsole",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];c=e}}]),(0,a.default)(i,[{key:"createKeySession",value:function(e,t){if(this.log("createKeySession()"),!this.el_.webkitKeys){if(!WebKitMediaKeys.isTypeSupported(e,"video/mp4"))throw new Error("Key System not supported");this.el_.webkitSetMediaKeys(new WebKitMediaKeys(e))}if(!this.el_.webkitKeys)throw new Error("Could not create MediaKeys");var n=this.el_.webkitKeys.createSession("video/mp4",t);if(!n)throw new Error("Could not create key session");return n}},{key:"fetchCertificate",value:function(e){var t=this,n=e.callback;this.log("fetchCertificate()");var i=this.protection_.certificateUrl,r=new XMLHttpRequest;r.responseType="arraybuffer",r.addEventListener("error",this.onCertificateError,!1),r.addEventListener("load",function(e){t.onCertificateLoad(e,{callback:n})},!1),r.open("GET",i,!0),r.send()}},{key:"fetchLicense",value:function(e){var t=e.target,n=e.message;this.log("fetchLicense()");var i=this.protection_.licenseUrl,r=new XMLHttpRequest;r.responseType="arraybuffer",r.session=t,r.addEventListener("error",this.onLicenseError,!1),r.addEventListener("load",this.onLicenseLoad,!1),r.open("POST",i,!0),r.setRequestHeader("Content-type","application/octet-stream"),r.send(n)}},{key:"getErrorResponse",value:function(e){return e?String.fromCharCode.apply(null,new Uint8Array(e)):"NONE"}},{key:"hasProtection",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.certificateUrl,n=e.keySystem,i=e.licenseUrl;return this.log("hasProtection()"),t&&n&&i}},{key:"log",value:function(){var e;c&&(e=console).log.apply(e,arguments)}},{key:"onCertificateError",value:function(){this.log("onCertificateError()"),this.player_.error({code:0,message:"Failed to retrieve the server certificate."})}},{key:"onCertificateLoad",value:function(e,t){var n=t.callback;this.log("onCertificateLoad()");var i=e.target,r=i.response;200===i.status?(u=new Uint8Array(r),n()):this.onRequestError(e.target,l.default.FETCH_CERTIFICATE)}},{key:"onRequestError",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?l.default.UNKNOWN:arguments[1];this.log("onRequestError()");var n=t+" - DRM: com.apple.fps.1_0 update, \n      XHR status is '"+e.statusText+"("+e.status+")', expected to be 200. \n      readyState is '"+e.readyState+"'. \n      Response is "+this.getErrorResponse(e.response);this.player_.error({code:0,message:n})}},{key:"onKeySessionWebkitKeyAdded",value:function(){this.log("onKeySessionWebkitKeyAdded()"),this.log("Decryption key was added to the session.")}},{key:"onKeySessionWebkitKeyError",value:function(){this.log("onKeySessionWebkitKeyError()"),this.player_.error({code:0,message:"A decryption key error was encountered."})}},{key:"onKeySessionWebkitKeyMessage",value:function(e){this.log("onKeySessionWebkitKeyMessage()");var t=e.message,n=e.target;this.fetchLicense({message:t,target:n})}},{key:"onLicenseError",value:function(){this.log("onLicenseError()"),this.player_.error({code:0,message:"The license request failed."})}},{key:"onLicenseLoad",value:function(e){this.log("onLicenseLoad()");var t=e.target,n=t.response,i=t.session;200===t.status?i.update(new Uint8Array(n)):this.onRequestError(e.target,l.default.FETCH_LICENCE)}},{key:"onVideoError",value:function(){this.log("onVideoError()"),this.player_.error({code:0,message:"A video playback error occurred."})}},{key:"onVideoWebkitNeedKey",value:function(e){this.log("onVideoWebkitNeedKey()");var t=this.protection_.keySystem,n=(0,s.getHostnameFromURI)((0,s.arrayToString)(e.initData)),i=(0,o.default)(e.initData,n,u),r=this.createKeySession(t,i);r.contentId=n,r.addEventListener("webkitkeyadded",this.onKeySessionWebkitKeyAdded,!1),r.addEventListener("webkitkeyerror",this.onKeySessionWebkitKeyError,!1),r.addEventListener("webkitkeymessage",this.onKeySessionWebkitKeyMessage,!1)}},{key:"src",value:function(e){var t=this,n=e.src;this.hasProtection(this.protection_)?(this.el_.addEventListener("webkitneedkey",this.onVideoWebkitNeedKey,!1),u?this.tech_.src(n):this.fetchCertificate({callback:function(){t.tech_.src(n)}})):this.tech_.src(n)}}]),i}();videojs.fairplaySourceHandler=function(){return{canHandleSource:function(e){if(!window.WebKitMediaKeys)return"";var t=e&&e.protection&&e.protection.keySystem;return WebKitMediaKeys.isTypeSupported(t,"video/mp4")?"probably":""},handleSource:function(e,t,n){return new d(e,t,n)},canPlayType:function(e){return videojs.fairplaySourceHandler.canPlayType(e)}}},videojs.fairplaySourceHandler.canPlayType=function(e){return/application\/x-mpegURL/i.test(e)?"maybe":""},window.MediaSource&&videojs.getTech("Html5").registerSourceHandler(videojs.fairplaySourceHandler(),0),videojs.Html5Fairplay=d,t.default=d},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(3),a=(i=r)&&i.__esModule?i:{default:i};t.default=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,a.default)(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}()},function(e,t,n){e.exports={default:n(4),__esModule:!0}},function(e,t,n){n(5);var i=n(8).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(6);i(i.S+i.F*!n(16),"Object",{defineProperty:n(12).f})},function(e,t,n){var _=n(7),g=n(8),m=n(9),v=n(11),E="prototype",y=function(e,t,n){var i,r,a,s=e&y.F,o=e&y.G,l=e&y.S,u=e&y.P,c=e&y.B,d=e&y.W,h=o?g:g[t]||(g[t]={}),f=h[E],p=o?_:l?_[t]:(_[t]||{})[E];for(i in o&&(n=t),n)(r=!s&&p&&void 0!==p[i])&&i in h||(a=r?p[i]:n[i],h[i]=o&&"function"!=typeof p[i]?n[i]:c&&r?m(a,_):d&&p[i]==a?function(i){var e=function(e,t,n){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(e);case 2:return new i(e,t)}return new i(e,t,n)}return i.apply(this,arguments)};return e[E]=i[E],e}(a):u&&"function"==typeof a?m(Function.call,a):a,u&&((h.virtual||(h.virtual={}))[i]=a,e&y.R&&f&&!f[i]&&v(f,i,a)))};y.F=1,y.G=2,y.S=4,y.P=8,y.B=16,y.W=32,y.U=64,y.R=128,e.exports=y},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var a=n(10);e.exports=function(i,r,e){if(a(i),void 0===r)return i;switch(e){case 1:return function(e){return i.call(r,e)};case 2:return function(e,t){return i.call(r,e,t)};case 3:return function(e,t,n){return i.call(r,e,t,n)}}return function(){return i.apply(r,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(12),r=n(20);e.exports=n(16)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(13),r=n(15),a=n(19),s=Object.defineProperty;t.f=n(16)?Object.defineProperty:function(e,t,n){if(i(e),t=a(t,!0),i(n),r)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(14);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(16)&&!n(17)(function(){return 7!=Object.defineProperty(n(18)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=!n(17)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(14),r=n(7).document,a=i(r)&&i(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},function(e,t,n){var r=n(14);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayToString=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},t.base64DecodeUint8Array=function(e){for(var t=atob(e),n=t.length,i=new Uint8Array(new ArrayBuffer(n)),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i},t.base64EncodeUint8Array=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=void 0,i=void 0,r=void 0,a=void 0,s=void 0,o=void 0,l=void 0,u=0,c="";for(;u<e.length;)n=e[u++],i=u<e.length?e[u++]:Number.NaN,r=u<e.length?e[u++]:Number.NaN,a=n>>2,s=(3&n)<<4|i>>4,o=(15&i)<<2|r>>6,l=63&r,isNaN(i)?o=l=64:isNaN(r)&&(l=64),c+=t.charAt(a)+t.charAt(s)+t.charAt(o)+t.charAt(l);return c},t.getHostnameFromURI=function(e){var t=document.createElement("a");return t.href=e,t.hostname},t.stringToArray=function(e){for(var t=e.length,n=new ArrayBuffer(2*t),i=new Uint16Array(n),r=0;r<t;r++)i[r]=e.charCodeAt(r);return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){"string"==typeof t&&(t=(0,u.stringToArray)(t));var i=e.byteLength+4+t.byteLength+4+n.byteLength,r=0,a=new ArrayBuffer(i),s=new DataView(a),o=new Uint8Array(a,r,e.byteLength);o.set(e),r+=o.byteLength,s.setUint32(r,t.byteLength,!0),r+=4;var l=new Uint16Array(a,r,t.length);return l.set(t),r+=l.byteLength,s.setUint32(r,n.byteLength,!0),r+=4,new Uint8Array(a,r,n.byteLength).set(n),new Uint8Array(a,0,a.byteLength)};var u=n(21)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={FETCH_CERTIFICATE:"FETCH CERTIFICATE",FETCH_LICENCE:"FETCH LICENCE",UNKNOWN:"UNKNOWN"}}])}),function(){var U="SDK_"+"6.28.0-57ec8198-201903111607".replace(/[^\w]/g,"_"),w="undefined"!=typeof window?window:"undefined"!=typeof GLOBAL?GLOBAL:this;w.tv=w.tv||{},w.tv.freewheel=w.tv.freewheel||{},w.tv.freewheel[U]=function(w){var a={version:"js-6.28.0-57ec8198-201903111607"};return"undefined"!=typeof window&&(window._fw_admanager=window._fw_admanager||{},window._fw_admanager.version=a.version),a.LOG_LEVEL_QUIET=0,a.LOG_LEVEL_INFO=1,a.LOG_LEVEL_DEBUG=2,a.setLogLevel=function(e){if(a.warn=a.log=a.debug=function(){},"undefined"!=typeof console){try{window.localStorage&&window.localStorage.getItem("fwLogLevel")&&-1<window.localStorage.getItem("fwLogLevel")&&(e=window.localStorage.getItem("fwLogLevel"))}catch(e){console.warn(">FW Common.setLogLevel"+e.description)}e>a.LOG_LEVEL_QUIET&&(a.log=function(){console.log(">FW "+(new Date).toTimeString().substr(3,6)+Array.prototype.slice.call(arguments).join(" "))},a.warn=function(){console.warn(">FW "+(new Date).toTimeString().substr(3,6)+Array.prototype.slice.call(arguments).join(" "))},e>a.LOG_LEVEL_INFO&&(a.debug=function(){console.log(">FW "+(new Date).toTimeString().substr(3,6)+Array.prototype.slice.call(arguments).join(" "))}))}},a.setLogLevel(a.LOG_LEVEL_INFO),a.log("FreeWheel Integration Runtime",a.version),a.proxyUrl=null,a.proxyAuthenticationParameter=null,a.setProxy=function(e){a.proxyUrl="string"==typeof e?("/"!==e.charAt(e.length-1)&&(e+="/"),e):null},a.setProxyAuthenticationParameter=function(e,t){a.proxyAuthenticationParameter=2<=arguments.length&&e?{key:e,value:t||""}:null},a.checkUserAgent=function(t){a.PLATFORM_IS_WINDOWSPHONE=-1<t.search("windows phone"),a.PLATFORM_IS_IPAD=-1<t.search("ipad"),a.PLATFORM_IS_IPHONE_IPOD=-1<t.search("iphone")||-1<t.search("ipod"),a.PLATFORM_IS_CHROMECAST=-1<t.search("crkey");var e,n,i,r,s=function(e){return(e=t.match(e))&&0<e.length?1*(e=e[0].match(/\d+/g))[0]+.1*e[1]:0};a.PLATFORM_IE_MOBILE_VERSION=s(/iemobile\/\d+\.\d+/),a.PLATFORM_IOS_VERSION=s(/os \d+_\d+/),s=-1<t.indexOf("transformer")?3.2:s(/android \d+\.\d+/),a.PLATFORM_ANDROID_VERSION=s,a.PLATFORM_IS_SAFARI=0<a.PLATFORM_IOS_VERSION&&-1<t.search("applewebkit")||0===a.PLATFORM_ANDROID_VERSION&&t.search("chrome")<0&&-1<t.search("safari"),a.PLATFORM_IS_CHROME=t.search("edge")<0&&-1<t.search("chrome"),a.PLATFORM_IS_FIREFOX=-1<t.search("firefox"),a.PLATFORM_IS_MOBILE=0<a.PLATFORM_IOS_VERSION||0<a.PLATFORM_ANDROID_VERSION,a.PLATFORM_BROWSER_VERSION=(r="",-1!==(n=(e=t).indexOf("opr/"))?r=e.substring(n+4):-1!==(n=e.indexOf("opera"))?(r=e.substring(n+6),-1!==(n=e.indexOf("version"))&&(r=e.substring(n+8))):-1!==(n=e.indexOf("rv:"))?r=e.substring(n+3):-1!==(n=e.indexOf("msie"))?r=e.substring(n+5):-1!==(n=e.indexOf("edge"))?r=e.substring(n+5):-1!==(n=e.indexOf("chrome"))?r=e.substring(n+7):-1!==(n=e.indexOf("safari"))?(r=e.substring(n+7),-1!==(n=e.indexOf("version"))&&(r=e.substring(n+8))):-1!==(n=e.indexOf("firefox"))?r=e.substring(n+8):e.lastIndexOf(" ")+1<(n=e.lastIndexOf("/"))&&(r=e.substring(n+1)),-1!==(i=r.indexOf(";"))&&(r=r.substring(0,i)),-1!==(i=r.indexOf(" "))&&(r=r.substring(0,i)),(e=parseInt(""+r,10))?e:0),a.PLATFORM_ID=a.PLATFORM_IS_MOBILE?0<a.PLATFORM_ANDROID_VERSION?"Android"+a.PLATFORM_ANDROID_VERSION:a.PLATFORM_IS_IPAD?"iPad"+a.PLATFORM_IOS_VERSION:a.PLATFORM_IS_IPHONE_IPOD?"iPhone"+a.PLATFORM_IOS_VERSION:"UnknownMobile":"Desktop",a.log("Device:",a.PLATFORM_ID,"PLATFORM_IS_SAFARI:",a.PLATFORM_IS_SAFARI,"PLATFORM_IS_CHROME:",a.PLATFORM_IS_CHROME)},a.checkUserAgent(navigator.userAgent.toLowerCase()),a.PLATFORM_EVENT_CLICK=a.PLATFORM_IS_MOBILE?"touchend":"click",a.MOBILE_EVENT_DRAG="touchmove",a.PLATFORM_SEND_REQUEST_BY_FORM=!1,a.PLATFORM_HIDE_AND_SHOW_CONTENT_VIDEO_BY_MOVE_POSITION=3.1<=a.PLATFORM_ANDROID_VERSION,a.PLATFORM_HIDE_AND_SHOW_CONTENT_VIDEO_BY_SET_DISPLAY=!0,a.PLATFORM_SUPPORT_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT=a.PLATFORM_IS_IPAD||a.PLATFORM_IS_IPHONE_IPOD,a.PLATFORM_AUTO_SEEK_AFTER_MIDROLL=a.PLATFORM_IS_IPAD,a.PLATFORM_NOT_SUPPORT_OVERLAY_AD=a.PLATFORM_IS_IPHONE_IPOD||0<a.PLATFORM_ANDROID_VERSION&&a.PLATFORM_ANDROID_VERSION<3.1||a.PLATFORM_IS_WINDOWSPHONE,a.PLATFORM_FILL_VIDEO_POOL_FOR_MIDROLL=4.2<=a.PLATFORM_IOS_VERSION,a.PLATFORM_NOT_SUPPORT_MIDROLL_AD=2.2<=a.PLATFORM_ANDROID_VERSION&&a.PLATFORM_ANDROID_VERSION<=3||9<=a.PLATFORM_IE_MOBILE_VERSION,a.PLATFORM_NOT_SUPPORT_VIDEO_AD=0<a.PLATFORM_ANDROID_VERSION&&a.PLATFORM_ANDROID_VERSION<=2.1,a.PLATFORM_DETECT_FULL_SCREEN_FOR_MIDROLL=a.PLATFORM_IS_IPAD&&4.2<=a.PLATFORM_IOS_VERSION,a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO=a.PLATFORM_IS_IPHONE_IPOD&&a.PLATFORM_IOS_VERSION<10||a.PLATFORM_IS_WINDOWSPHONE||a.PLATFORM_IS_CHROMECAST,a.PLATFORM_NOT_FIRE_CLICK_WHEN_AD_VIDEO_PAUSED=3.1<=a.PLATFORM_ANDROID_VERSION||10<=a.PLATFORM_IOS_VERSION,a.PLATFORM_WAIT_WHEN_AD_VIDEO_TIMEOUT=0<a.PLATFORM_ANDROID_VERSION&&a.PLATFORM_ANDROID_VERSION<=3,a.PLATFORM_VIDEO_DOESNOT_SUPPORT_TIMEUPDATE=9<=a.PLATFORM_IE_MOBILE_VERSION,a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL=0<a.PLATFORM_IOS_VERSION&&a.PLATFORM_IOS_VERSION<4.2&&4<=a.PLATFORM_IOS_VERSION,a.PLATFORM_NOT_WAIT_FOR_ERROR_WHEN_PLAY_DUMMY_VIDEO_FOR_PREROLL=!1,a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT=0===a.PLATFORM_IOS_VERSION||4<=a.PLATFORM_IOS_VERSION&&a.PLATFORM_IOS_VERSION<4.2,a.PLATFORM_NOT_SUPPORT_OVERLAY_CLICK_WHEN_CONTROLS_IS_TRUE=a.PLATFORM_IS_IPAD,a.PLATFORM_BLOCKS_AUTOPLAY=a.PLATFORM_IS_MOBILE||a.PLATFORM_IS_SAFARI||a.PLATFORM_IS_CHROME&&(0<a.PLATFORM_ANDROID_VERSION||64<=a.PLATFORM_BROWSER_VERSION),a.RENDERER_STATE_INIT=1,a.RENDERER_STATE_STARTING=2,a.RENDERER_STATE_STARTED=3,a.RENDERER_STATE_COMPLETING=4,a.RENDERER_STATE_COMPLETED=5,a.RENDERER_STATE_FAILED=6,a.TRANSLATOR_STATE_INIT=a.RENDERER_STATE_INIT,a.TRANSLATOR_STATE_STARTING=a.RENDERER_STATE_STARTING,a.TRANSLATOR_STATE_STARTED=a.RENDERER_STATE_STARTED,a.TRANSLATOR_STATE_COMPLETING=a.RENDERER_STATE_COMPLETING,a.TRANSLATOR_STATE_COMPLETED=a.RENDERER_STATE_COMPLETED,a.TRANSLATOR_STATE_FAILED=a.RENDERER_STATE_FAILED,a.EVENT_AD="adEvent",a.EVENT_AD_BUFFERING_START="adBufferingStart",a.EVENT_AD_BUFFERING_END="adBufferingEnd",a.EVENT_SLOT_IMPRESSION="slotImpression",a.EVENT_SLOT_END="slotEnd",a.EVENT_AD_INITIATED="adInitiated",a.EVENT_AD_IMPRESSION="defaultImpression",a.EVENT_AD_IMPRESSION_END="adEnd",a.EVENT_AD_QUARTILE="quartile",a.EVENT_AD_FIRST_QUARTILE="firstQuartile",a.EVENT_AD_MIDPOINT="midPoint",a.EVENT_AD_THIRD_QUARTILE="thirdQuartile",a.EVENT_AD_SKIPPED="adSkipped",a.EVENT_AD_COMPLETE="complete",a.EVENT_AD_CLICK="defaultClick",a.EVENT_AD_MUTE="_mute",a.EVENT_AD_UNMUTE="_un-mute",a.EVENT_AD_COLLAPSE="_collapse",a.EVENT_AD_EXPAND="_expand",a.EVENT_AD_PAUSE="_pause",a.EVENT_AD_RESUME="_resume",a.EVENT_AD_REWIND="_rewind",a.EVENT_AD_ACCEPT_INVITATION="_accept-invitation",a.EVENT_AD_CLOSE="_close",a.EVENT_AD_MINIMIZE="_minimize",a.EVENT_ERROR="_e_unknown",a.EVENT_RESELLER_NO_AD="resellerNoAd",a.EVENT_AD_MEASUREMENT="concreteEvent",a.EVENT_EXTENSION_LOADED="extensionLoaded",a.EVENT_AD_VOLUME_CHANGE="adVolumeChange",a.EVENT_AD_AUTO_PLAY_BLOCKED="videoAutoPlayBlocked",a.INFO_KEY_CUSTOM_ID="customId",a.INFO_KEY_MODULE_TYPE="moduleType",a.MODULE_TYPE_EXTENSION="extension",a.MODULE_TYPE_RENDERER="renderer",a.MODULE_TYPE_TRANSLATOR="translator",a.INFO_KEY_ERROR_CODE="errorCode",a.INFO_KEY_ERROR_INFO="errorInfo",a.INFO_KEY_ERROR_MODULE="errorModule",a.INFO_KEY_VAST_ERROR_CODE="vastErrorCode",a.ERROR_IO="_e_io",a.ERROR_TIMEOUT="_e_timeout",a.ERROR_NULL_ASSET="_e_null-asset",a.ERROR_ADINSTANCE_UNAVAILABLE="_e_adinst-unavail",a.ERROR_UNKNOWN="_e_unknown",a.ERROR_MISSING_PARAMETER="_e_missing-param",a.ERROR_NO_AD_AVAILABLE="_e_no-ad",a.ERROR_PARSE="_e_parse",a.ERROR_INVALID_VALUE="_e_invalid-value",a.ERROR_INVALID_SLOT="_e_invalid-slot",a.ERROR_NO_RENDERER="_e_no-renderer",a.ERROR_DEVICE_LIMIT="_e_device-limit",a.ERROR_3P_COMPONENT="_e_3p-comp",a.ERROR_UNSUPPORTED_3P_FEATURE="_e_unsupp-3p-feature",a.ERROR_SECURITY="_e_security",a.ERROR_UNMATCHED_SLOT_SIZE="_e_slot-size-unmatch",a.INFO_KEY_URL="url",a.INFO_KEY_SHOW_BROWSER="showBrowser",a.INFO_KEY_CUSTOM_EVENT_NAME="customEventName",a.INFO_KEY_NEED_EMPTY_CT="needEmptyCT",a.INFO_KEY_CONCRETE_EVENT_ID="concreteEventId",a.EVENT_TYPE_CLICK_TRACKING="CLICKTRACKING",a.EVENT_TYPE_IMPRESSION="IMPRESSION",a.EVENT_TYPE_CLICK="CLICK",a.EVENT_TYPE_STANDARD="STANDARD",a.EVENT_TYPE_GENERIC="GENERIC",a.EVENT_TYPE_ERROR="ERROR",a.EVENT_VIDEO_VIEW="videoView",a.SHORT_EVENT_TYPE_IMPRESSION="i",a.SHORT_EVENT_TYPE_CLICK="c",a.SHORT_EVENT_TYPE_STANDARD="s",a.SHORT_EVENT_TYPE_ERROR="e",a.INIT_VALUE_ZERO="0",a.INIT_VALUE_ONE="1",a.INIT_VALUE_TWO="2",a.INFO_KEY_PARAMETERS="parameters",a.URL_PARAMETER_KEY_ET="et",a.URL_PARAMETER_KEY_CN="cn",a.URL_PARAMETER_KEY_INIT="init",a.URL_PARAMETER_KEY_CT="ct",a.URL_PARAMETER_KEY_METR="metr",a.URL_PARAMETER_KEY_CR="cr",a.URL_PARAMETER_KEY_KEY_VALUE="kv",a.URL_PARAMETER_KEY_ERROR_INFO="additional",a.URL_PARAMETER_KEY_ERROR_MODULE="renderer",a.URL_PARAMETER_KEY_CREATIVE_RENDITION_ID="reid",a.URL_PARAMETER_KEY_CONCRETE_EVENT_ID="creid",a.CAPABILITY_SLOT_TEMPLATE="sltp",a.CAPABILITY_DISPLAY_REFRESH="rfnt",a.CAPABILITY_MULTIPLE_CREATIVE_RENDITIONS="emcr",a.CAPABILITY_RECORD_VIDEO_VIEW="exvt",a.CAPABILITY_CHECK_COMPANION="cmpn",a.CAPABILITY_CHECK_TARGETING="targ",a.CAPABILITY_RESET_EXCLUSIVITY="rste",a.CAPABILITY_FALLBACK_UNKNOWN_ASSET="unka",a.CAPABILITY_FALLBACK_UNKNOWN_SITE_SECTION="unks",a.CAPABILITY_FALLBACK_ADS="fbad",a.CAPABILITY_SLOT_CALLBACK="slcb",a.CAPABILITY_NULL_CREATIVE="nucr",a.CAPABILITY_AUTO_EVENT_TRACKING="aeti",a.CAPABILITY_RENDERER_MANIFEST="rema",a.CAPABILITY_REQUIRE_VIDEO_CALLBACK="vicb",a.CAPABILITY_SKIP_AD_SELECTION="skas",a.SLOT_TYPE_TEMPORAL="temporal",a.SLOT_TYPE_VIDEOPLAYER_NONTEMPORAL="videoPlayerNonTemporal",a.SLOT_TYPE_SITESECTION_NONTEMPORAL="siteSectionNonTemporal",a.TIME_POSITION_CLASS_PREROLL="PREROLL",a.TIME_POSITION_CLASS_MIDROLL="MIDROLL",a.TIME_POSITION_CLASS_POSTROLL="POSTROLL",a.TIME_POSITION_CLASS_OVERLAY="OVERLAY",a.TIME_POSITION_CLASS_DISPLAY="DISPLAY",a.TIME_POSITION_CLASS_PAUSE_MIDROLL="PAUSE_MIDROLL",a.EVENT_REQUEST_INITIATED="onRequestInitiated",a.EVENT_REQUEST_COMPLETE="onRequestComplete",a.EVENT_SLOT_STARTED="onSlotStarted",a.EVENT_SLOT_ENDED="onSlotEnded",a.EVENT_CONTENT_VIDEO_PAUSED="contentVideoPaused",a.EVENT_CONTENT_VIDEO_RESUMED="contentVideoResumed",a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST="contentVideoPauseRequest",a.EVENT_CONTENT_VIDEO_RESUME_REQUEST="contentVideoResumeRequest",a.CAPABILITY_STATUS_OFF=0,a.CAPABILITY_STATUS_ON=1,a.PARAMETER_LEVEL_PROFILE=0,a.PARAMETER_LEVEL_GLOBAL=1,a.PARAMETER_LEVEL_OVERRIDE=5,a.PARAMETER_ENABLE_FORM_TRANSPORT="sdk.enableFormTransport",a.PARAMETER_DESIRED_BITRATE="desiredBitrate",a.PARAMETER_VIDEO_POOL_SIZE="sdk.videoPoolSize",a.PARAMETER_PAGE_SLOT_CONTENT_TYPE="sdk.pageSlotContentType",a.PARAMETER_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT="PARAMETER_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT",a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT="extension.ad.control.clickElement",a.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED="extension.contentVideo.enabled",a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME="extension.contentVideo.respondPauseResume",a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SEEK_BACK="extension.contentVideo.autoSeekBack",a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE="extension.contentVideo.autoSourceRestore",a.PARAMETER_EXTENSION_VIDEO_STATE_ENABLED="extension.videoState.enabled",a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT="renderer.video.startDetectTimeout",a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT="renderer.video.progressDetectTimeout",a.PARAMETER_RENDERER_VIDEO_ANDROID_DELAY="renderer.video.android.delay",a.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE="renderer.video.displayControlsWhenPause",a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION="renderer.video.clickDetection",a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED="renderer.video.playAfterStalled",a.PARAMETER_EXTENSION_SURVEY_ENABLED="extension.survey.enabled",a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE="autoPauseAdOnVisibilityChange",a.PARAMETER_DISABLE_CORS_ENFORCEMENT="disableCORSEnforcement",a.PARAMETER_RENDERER_DISPLAY_COAD_SCRIPT_NAME="renderer.html.coadScriptName",a.PARAMETER_RENDERER_HTML_SHOULD_BACKGROUND_TRANSPARENT="renderer.html.isBackgroundTransparent",a.PARAMETER_RENDERER_HTML_SHOULD_END_AFTER_DURATION="renderer.html.shouldEndAfterDuration",a.PARAMETER_RENDERER_HTML_AD_LOAD_TIMEOUT="renderer.html.adLoadTimeout",a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE="renderer.html.placementType",a.PARAMETER_RENDERER_HTML_BOOTSTRAP="renderer.html.bootstrap",a.PARAMETER_RENDERER_HTML_PRIMARY_ANCHOR="renderer.html.primaryAnchor",a.PARAMETER_RENDERER_HTML_MARGIN_WIDTH="renderer.html.marginWidth",a.PARAMETER_RENDERER_HTML_MARGIN_HEIGHT="renderer.html.marginHeight",a.PARAMETER_VPAID_CREATIVE_TIMEOUT_DELAY="renderer.vpaid.creativeTimeoutDelay",a.PARAMETER_VAST_TIMEOUT_IN_MILLISECONDS="translator.vast.timeoutInMilliseconds",a.PARAMETER_VAST_MAX_WRAPPER_COUNT="translator.vast.maxWrapperCount",a.VAST_DEFAULT_MAX_WRAPPER_COUNT=5,a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INLINE="inline",a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INTERSTITIAL="interstitial",a.PARAMETER_RENDERER_HTML_BASEUNIT_INTERSTITIAL="app-interstitial",a.PARAMETER_USE_CMP="useCMP",a.ID_TYPE_FW=1,a.ID_TYPE_CUSTOM=2,a.ID_TYPE_GROUP=3,a.VIDEO_STATE_PLAYING=1,a.VIDEO_STATE_PAUSED=2,a.VIDEO_STATE_STOPPED=3,a.VIDEO_STATE_COMPLETED=4,a.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED=1,a.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED=2,a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE=3,a.VIDEO_ASSET_AUTO_PLAY_TYPE_NON_AUTO_PLAY=3,a.VIDEO_ASSET_DURATION_TYPE_EXACT="exact",a.VIDEO_ASSET_DURATION_TYPE_VARIABLE="variable",a.ADUNIT_PREROLL="preroll",a.ADUNIT_MIDROLL="midroll",a.ADUNIT_POSTROLL="postroll",a.ADUNIT_OVERLAY="overlay",a.ADUNIT_STREAM_PREROLL="stream_preroll",a.ADUNIT_STREAM_POSTROLL="stream_postroll",a.SLOT_LOCATION_PLAYER="player",a.SLOT_LOCATION_EXTERNAL="external",a.SLOT_OPTION_INITIAL_AD_STAND_ALONE=0,a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL=1,a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_ONLY=2,a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_STAND_ALONE=3,a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_THEN_STAND_ALONE=4,a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE=5,a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE=6,a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE_IF_TEMPORAL=7,a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE_IF_TEMPORAL=8,a.REQUEST_MODE_ON_DEMAND="on-demand",a.REQUEST_MODE_LIVE="live",a.MINIMUM_VAST_VERSION_SUPPORTED=2,a.MAXIMUM_VAST_VERSION_SUPPORTED=4,a.ERROR_VAST_XML_PARSING="100",a.ERROR_VAST_SCHEMA_VALIDATION="101",a.ERROR_VAST_VERSION_NOT_SUPPORTED="102",a.ERROR_VAST_TRACKING_ERROR="200",a.ERROR_VAST_LINEARITY_NOT_MATCH="201",a.ERROR_VAST_NO_AD="303",a.ERROR_VAST_WRAPPER_LIMIT_REACH="302",a.ERROR_VAST_URI_TIMEOUT="301",a.ERROR_VAST_GENERAL_LINEAR_ERROR="400",a.ERROR_VAST_NON_LINEAR_GENERAL_ERROR="500",a.ERROR_VAST_COMPANION_GENERAL_ERROR="600",a.ERROR_VAST_GENERAL_VPAID_ERROR="901",a.Util={canPlayVideoType:function(e){if(a.PLATFORM_IS_SAFARI&&("video/ogg"===e||"video/webm"===e))return!1;if(1<a.PLATFORM_ANDROID_VERSION&&"video/m4v"===e)return!0;if("video/3gp"===e&&(e="video/3gpp"),3<=a.PLATFORM_ANDROID_VERSION&&"video/3gpp"===e)return!0;var t=document.createElement("video");return!!t.canPlayType&&!(!t.canPlayType(e)&&!t.canPlayType(e.replace("/","/x-")))},str2bool:function(e){return!!e&&("true"===(e=a.Util.trim(e).toLowerCase())||"yes"===e||"on"===e||"1"===e)},trim:function(e){return"string"!=typeof e?e.toString():e.replace(/^\s+|\s+$/g,"")},isBlank:function(e){return!e||""===a.Util.trim(e)},encodeToHex:function(e){for(var t="",n=0;n<e.length;n++){for(var i=e.charCodeAt(n).toString(16).toUpperCase();i.length<4;)i="0"+i;t+="\\u"+i.toUpperCase()}return t},forEachOnArray:function(e,t,n){var i;if(null==e)throw new TypeError(" array is null or not defined");var r=(e=Object(e)).length>>>0;if("[object Function]"!=={}.toString.call(t))throw new TypeError(t+" is not a function");for(n&&(i=n),n=0;n<r;){if(n in e){var a=e[n];t.call(i,a,n,e)}n++}},mixin:function(e,t){for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e},copy:function(e){return a.Util.mixin({},e)},bind:function(e,t){var n=t,i=Array.prototype.slice.call(arguments);return i.shift(),n=i.shift(),function(){return n.apply(e,i.concat(Array.prototype.slice.call(arguments)))}},getObject:function(e,t,n){if(!e)return null;e=e.split("."),t=t||window;for(var i,r=0;t&&(i=e[r]);r++)t=i in t?t[i]:n?t[i]={}:void 0;return t},buildNode:function(b,c,d,e,f){a.debug("Util.buildNode"),d||(d=document),b.innerHTML=c||"",b=b.getElementsByTagName("script");var g=d.getElementsByTagName("head")[0];for(c=0;c<b.length;++c)if(a.PLATFORM_IS_FIREFOX||b[c].src){var h=d.createElement("script");b[c].charset&&(h.charset=b[c].charset),b[c].src&&(h.src=b[c].src),b[c].innerHTML&&(h.innerHTML=b[c].innerHTML),h.onload=h.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||g.removeChild(h)};try{g.appendChild(h)}catch(e){a.warn("load script err: "+e)}}else h=b[c].innerHTML,e&&(h=h.replace(/var fw_scope = document;/,"var fw_scope="+e+";")),f&&(h=h.replace(/var fw_scope_window = window;/,"var fw_scope_window="+f+";")),eval(h)},replacePageSlot:function(e,t,n){var i,r=e;a.debug("Util.replacePageSlot("+Array.prototype.slice.call(arguments).join(",")+")");try{var s=document.getElementById(r)?document:parent.document.getElementById(r)?parent.document:null,o=document.getElementById(r)?"window":parent.document.getElementById(r)?"parent":null}catch(e){o=s=null}if(!s)for(var l=0;l<window.frames.length;l++)try{window.frames[l].document.getElementById(r)&&(s=window.frames[l].document,o="window.frames["+l+"]")}catch(e){a.warn(e)}if(o&&(i=o+".document"),a.log("replacing slot "+r+" in frame "+i),!s)throw"Slot element not found: "+r;r=n?s.getElementById(n):s.getElementById("_fw_container_"+r),a.Util.buildNode(r,t,s,i,o)},transformUrlToProxy:function(e){if(null==a.proxyUrl)return e;var t=a.proxyUrl.replace("$","$$");return e=e.replace(/https?:\/\//,t),a.proxyAuthenticationParameter&&(e=a.Util.setParameterInURL(e,a.proxyAuthenticationParameter.key,a.proxyAuthenticationParameter.value)),e},pingURLWithImage:function(e){new Image(1,1).src=a.Util.transformUrlToProxy(e)},pingURLWithForm:function(e,t,n){n=n?"_fw_request":"_fw_cb",null==t&&(t=Math.random());var i=document.createElement("iframe");i.name=n+"_iframe_"+t,i.id=n+"_iframe_"+t,i.style.position="absolute",i.style.left="-10000px",i.style.width="1px",i.style.visibility="hidden";var r=document.createElement("form");r.action=a.Util.transformUrlToProxy(e),r.id=n+"_form_"+t,r.target=i.id,r.method="post",r.style.position="absolute",r.style.left="-10000px",r.style.width="1px",r.style.visibility="hidden",document.body&&(document.body.appendChild(i),document.body.appendChild(r),r.submit(),document.body.removeChild(r))},pingURLWithScript:function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.src=a.Util.transformUrlToProxy(e),n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||t.removeChild(n)},t.appendChild(n)},pingURL:function(e){a.debug("send callback: "+e),e&&(a.PLATFORM_SEND_REQUEST_BY_FORM?a.Util.pingURLWithForm(e,null,!1):a.Util.pingURLWithImage(e))},pingURLs:function(e){for(var t=0;t<e.length;t++)a.Util.pingURL(e[t])},setParameterInURL:function(e,t,n){if(!e||!t||null==n)return null;var i=!1;if(e=e.split("?"),n=encodeURIComponent(n),e[1]){for(var r=e[1].split("&"),a=0;a<r.length;++a){var s=r[a].split("=");if(s[0]===t){r[a]=s[0]+"="+n,i=!0;break}}s=r.join("&"),i||(s=t+"="+n+"&"+s)}else s=t+"="+n;return e[0]+"?"+s},getParameterInURL:function(e,t){if(!e||!t)return null;if((e=e.split("?"))[1]){e=e[1].split("&");for(var n=0;n<e.length;++n){var i=e[n].split("=");if(i[0]===t&&!a.Util.isBlank(i[1]))return decodeURIComponent(i[1])}}return null},isParameterInURL:function(e,t){if(!e||!t)return!1;if((e=e.split("?"))[1]){e=e[1].split("&");for(var n=0;n<e.length;++n)if(e[n].split("=")[0]===t)return!0}return!1},flashVersion:function(){var e="0,0,0,0";if(null!=navigator.plugins&&0<navigator.plugins.length){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"])try{var t=navigator.plugins["Shockwave Flash"+(navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"")].description.split(" "),n=t[2].split("."),i=n[0],r=n[1],s=t[3];""===s&&(s=t[4]),"d"===s[0]?s=s.substring(1):"r"===s[0]&&(0<(s=s.substring(1)).indexOf("d")&&(s=s.substring(0,s.indexOf("d")))),e=i+","+r+","+s+",0"}catch(e){a.warn("Flash detection failed on navigator method")}}else try{var o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7").GetVariable("$version").split(" ")[1].split(",");3===o.length?e=o.join(",")+",0":4===o.length&&(e=o.join(","))}catch(e){a.warn("Flash detection failed on ActiveX method")}return e},xmlToJson:function(e){var t={};if(!e)return null;if(1===e.nodeType){if(0<e.attributes.length){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var i=e.attributes.item(n);t["@attributes"][i.nodeName]=i.nodeValue}}}else 3===e.nodeType?t=e.nodeValue:4===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes()){for(n=0;n<e.childNodes.length;n++){var r=(i=e.childNodes.item(n)).nodeName;if(void 0===t[r])t[r]=a.Util.xmlToJson(i);else{if(void 0===t[r].length||"string"==typeof t[r]){var s=t[r];t[r]=[],t[r].push(s)}t[r].push(a.Util.xmlToJson(i))}}void 0!==t["#cdata-section"]?(t.value=t["#cdata-section"],t.value.constructor===Array&&(t.value=t.value.join(""))):t["#text"]&&(t.value=t["#text"])}return t},lazyJavaScriptLoad:function(e,t){var n=document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script");i.type="text/javascript",i.src=e,t&&(i.attachEvent&&!window.opera?i.onreadystatechange=function(){"loaded"!==i.readyState&&"complete"!==i.readyState||(n.removeChild(i),i.onreadystatechange=null,t())}:i.addEventListener("load",function(){n.removeChild(i),t()},!1)),n.insertBefore(i,n.firstChild)},getViewport:function(){var e=0,t=0;return void 0!==window.innerWidth?(e=window.innerWidth,t=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.getElementsByTagName("body")&&document.getElementsByTagName("body")[0]&&(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),{width:e,height:t,offsetX:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,offsetY:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}},getAbsoluteUrl:function(e,t){if(e=a.Util.trim(e),-1!==(t=a.Util.trim(t)).indexOf("://"))return t;var n=e.substring(0,e.indexOf("://"));if(0===t.indexOf("//"))return n+":"+t;n=e.indexOf("/",e.indexOf("://")+5);var i=e;return-1!==n&&(i=e.substring(0,n)),0===t.indexOf("/")?i+t:(n=e.lastIndexOf("#"),i=e,-1!==n&&(i=e.substring(0,n)),0===t.indexOf("#")?i+t:(i=e.indexOf("?"),n=e,-1!==i&&(n=e.substring(0,i)),0===t.indexOf("?")?n+t:(n=-1!==(i=-1===i?e.lastIndexOf("/"):n.lastIndexOf("/"))?e.substring(0,i+1):n+"/")+t))},secondsToHms:function(e){e=isNaN(Number(e))?0:Number(e);var t=Math.floor(e%3600/60),n=Math.round(e%3600%60);return("0"+Math.floor(e/3600)).slice(-2)+":"+("0"+t).slice(-2)+":"+("0"+n).slice(-2)},getFixedDigitRandomNumber:function(e){return e=isNaN(Number(e))?0:Number(e),Math.floor(9*Math.random()*Math.pow(10,e-1)+Math.pow(10,e-1))},getDateStringInISOFormat:function(e){return e instanceof Date&&!isNaN(e.valueOf())?e.toISOString():null}},a.MediaState=function(){},a.MediaState.prototype={},a.MediaState.prototype.constructor=a.MediaState,a.Util.mixin(a.MediaState.prototype,{play:function(e){a.debug(this._name+" play("+e+")")},pause:function(e){a.debug(this._name+" pause("+e+")")},complete:function(e){a.debug(this._name+" complete("+e+")")}}),a.MediaInitState=function(){this._name="MediaInitState"},a.MediaInitState.prototype=new a.MediaState,a.MediaInitState.prototype.constructor=a.MediaInitState,a.Util.mixin(a.MediaInitState.prototype,{play:function(e){a.debug(this._name+" play("+e+")"),e.setMediaState(a.MediaPlayingState.instance),"function"==typeof e.onStartPlaying&&e.onStartPlaying()}}),a.MediaInitState.instance=new a.MediaInitState,a.MediaPlayingState=function(){this._name="MediaPlayingState"},a.MediaPlayingState.prototype=new a.MediaState,a.MediaPlayingState.prototype.constructor=a.MediaPlayingState,a.Util.mixin(a.MediaPlayingState.prototype,{pause:function(e){a.debug(this._name+" pause("+e+")"),e.setMediaState(a.MediaPausedState.instance),"function"==typeof e.onPausePlaying&&e.onPausePlaying()},complete:function(e){a.debug(this._name+" complete("+e+")"),e.setMediaState(a.MediaEndState.instance),"function"==typeof e.onCompletePlaying&&e.onCompletePlaying()}}),a.MediaPlayingState.instance=new a.MediaPlayingState,a.MediaPausedState=function(){this._name="MediaPausedState"},a.MediaPausedState.prototype=new a.MediaState,a.MediaPausedState.prototype.constructor=a.MediaPausedState,a.Util.mixin(a.MediaPausedState.prototype,{play:function(e){a.debug(this._name+" play("+e+")"),e.setMediaState(a.MediaPlayingState.instance),"function"==typeof e.onResumePlaying&&e.onResumePlaying()},complete:function(e){a.debug(this._name+" complete("+e+")"),e.setMediaState(a.MediaEndState.instance),"function"==typeof e.onCompletePlaying&&e.onCompletePlaying()}}),a.MediaPausedState.instance=new a.MediaPausedState,a.MediaReplayingState=function(){this._name="MediaReplayingState"},a.MediaReplayingState.prototype=new a.MediaState,a.MediaReplayingState.prototype.constructor=a.MediaReplayingState,a.Util.mixin(a.MediaReplayingState.prototype,{pause:function(e){a.debug(this._name+" pause("+e+")"),e.setMediaState(a.MediaReplayPausedState.instance),"function"==typeof e.onPausePlaying&&e.onPausePlaying()},complete:function(e){a.debug(this._name+" complete("+e+")"),e.setMediaState(a.MediaEndState.instance),"function"==typeof e.onCompleteReplaying&&e.onCompleteReplaying()}}),a.MediaReplayingState.instance=new a.MediaReplayingState,a.MediaReplayPausedState=function(){this._name="MediaReplayPausedState"},a.MediaReplayPausedState.prototype=new a.MediaState,a.MediaReplayPausedState.prototype.constructor=a.MediaReplayPausedState,a.Util.mixin(a.MediaReplayPausedState.prototype,{play:function(e){a.debug(this._name+" play("+e+")"),e.setMediaState(a.MediaReplayingState.instance),"function"==typeof e.onResumePlaying&&e.onResumePlaying()},complete:function(e){a.debug(this._name+" complete("+e+")"),e.setMediaState(a.MediaEndState.instance),"function"==typeof e.onCompleteReplaying&&e.onCompleteReplaying()}}),a.MediaReplayPausedState.instance=new a.MediaReplayPausedState,a.MediaEndState=function(){this._name="MediaEndState"},a.MediaEndState.prototype=new a.MediaState,a.MediaEndState.prototype.constructor=a.MediaEndState,a.Util.mixin(a.MediaEndState.prototype,{play:function(e){a.debug(this._name+" play("+e+")"),e.setMediaState(a.MediaReplayingState.instance),"function"==typeof e.onStartReplaying&&e.onStartReplaying()}}),a.MediaEndState.instance=new a.MediaEndState,a.RendererState=function(){},a.RendererState.prototype={},a.RendererState.prototype.constructor=a.RendererState,a.Util.mixin(a.RendererState.prototype,{start:function(e){a.debug(this._name+" start() rendererController = "+e)},notifyStarted:function(e){a.debug(this._name+" notifyStarted() rendererController = "+e)},stop:function(e){a.debug(this._name+" stop() rendererController = "+e)},complete:function(e){a.debug(this._name+" complete() rendererController = "+e)},notifyCompleted:function(e){a.debug(this._name+" notifyCompleted() rendererController = "+e)},fail:function(e){a.debug(this._name+" fail() rendererController = "+e),e.setRendererState(a.RendererFailedState.instance),e.getAdInstance().complete()}}),a.RendererInitState=function(){this._name="RendererInitState"},a.RendererInitState.prototype=new a.RendererState,a.RendererInitState.prototype.constructor=a.RendererInitState,a.RendererInitState.instance=new a.RendererInitState,a.Util.mixin(a.RendererInitState.prototype,{start:function(e){a.debug(this._name+" start()"),e.setRendererState(a.RendererStartingState.instance),e.getRenderer().start(e)},stop:function(e){a.debug(this._name+" stop()"),e.setRendererState(a.RendererCompletingState.instance),e.getRendererState().notifyCompleted(e)}}),a.RendererStartingState=function(){this._name="RendererStartingState"},a.RendererStartingState.prototype=new a.RendererState,a.RendererStartingState.prototype.constructor=a.RendererStartingState,a.RendererStartingState.instance=new a.RendererStartingState,a.Util.mixin(a.RendererStartingState.prototype,{notifyStarted:function(e){a.debug(this._name+" notifyStarted()"),e.setRendererState(a.RendererStartedState.instance),e.getAdInstance().play()},stop:function(e){a.debug(this._name+" stop()"),"function"==typeof e.getRenderer().stop&&(e.setRendererState(a.RendererCompletingState.instance),e.getRenderer().stop())}}),a.RendererStartedState=function(){this._name="RendererStartedState"},a.RendererStartedState.prototype=new a.RendererState,a.RendererStartedState.prototype.constructor=a.RendererStartedState,a.RendererStartedState.instance=new a.RendererStartedState,a.Util.mixin(a.RendererStartedState.prototype,{complete:function(e){a.debug(this._name+" complete()"),e.setRendererState(a.RendererCompletingState.instance)},stop:function(e){a.debug(this._name+" stop()"),"function"==typeof e.getRenderer().stop&&(e.setRendererState(a.RendererCompletingState.instance),!1===e.getRenderer().stop()&&e.getAdInstance().fakeComplete())}}),a.RendererCompletingState=function(){this._name="RendererCompletingState"},a.RendererCompletingState.prototype=new a.RendererState,a.RendererCompletingState.prototype.constructor=a.RendererCompletingState,a.RendererCompletingState.instance=new a.RendererCompletingState,a.Util.mixin(a.RendererCompletingState.prototype,{notifyCompleted:function(e){a.debug(this._name+" notifyCompleted()"),e.setRendererState(a.RendererCompletedState.instance),e.getAdInstance().complete()}}),a.RendererCompletedState=function(){this._name="RendererCompletedState"},a.RendererCompletedState.prototype=new a.RendererState,a.RendererCompletedState.prototype.constructor=a.RendererCompletedState,a.RendererCompletedState.instance=new a.RendererCompletedState,a.RendererFailedState=function(){this._name="RendererFailedState"},a.RendererFailedState.prototype=new a.RendererState,a.RendererFailedState.prototype.constructor=a.RendererFailedState,a.RendererFailedState.instance=new a.RendererFailedState,a.HTMLRenderer=function(){this._rendererController=null},a.HTMLRenderer.prototype={start:function(e){this._rendererController=e,this._rendererController.getAdInstance().getSlot().getBase()?this._setupParameters()&&(this._render(),this._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)):this._onRendererFailed(a.ERROR_INVALID_SLOT,"slot base is empty")},pause:function(){this.log("pause"),this.shouldEndAfterDuration&&this.timer&&this.timer.pause()},resume:function(){this.log("resume"),this.shouldEndAfterDuration&&this.timer&&this.timer.start()},stop:function(){return this.log("stop isMRAIDAd:"+this.isMRAIDAd+" tpc:"+this._tpc+" interstitial:"+this.shouldKeepInterstitial),this._stop()},_stop:function(){if(this.log("_stop isMRAIDAd:"+this.isMRAIDAd+" tpc:"+this._tpc+" interstitial:"+this.shouldKeepInterstitial),!this.isMRAIDAd&&this._tpc===a.TIME_POSITION_CLASS_DISPLAY&&!this.shouldKeepInterstitial)return!1;this._cleanup(),this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)},resize:function(){var e=this._rendererController.getAdInstance(),t=e.getSlot().getBase();e.getSlot().getTimePositionClass()===a.TIME_POSITION_CLASS_OVERLAY?!this.isMRAIDAd||this.isMRAIDAd&&this.mraid.state===this.mraid.STATEDEFAULT?(e="_fw_ad_container_html_"+e.getSlot().getCustomId()+"_",(e=document.getElementById(e)).style.width=t.style.width||"100%",e.style.height=t.style.height||"100%",this._layoutOverlayAd(this.defaultAdElement)):this.log("Cannot resize an MRAID ad that is not in the default state"):this.log("Cannot resize a non-overlay ad")},_cleanup:function(){if(this.log("_cleanup"),this.timer&&(this.timer.stop(),this.timer=null),this.adLoadTimeoutTimer&&(this.adLoadTimeoutTimer.stop(),this.adLoadTimeoutTimer=null),window.removeEventListener?(document.removeEventListener("touchmove",this.touchMoveDisabler,!1),window.removeEventListener("message",this.messageHandlerFunc,!1),window.removeEventListener("resize",this.viewportChangeFunc,!1),window.removeEventListener("scroll",this.viewportChangeFunc,!1)):window.detachEvent&&(window.detachEvent("onmessage",this.messageHandlerFunc),window.detachEvent("onresize",this.viewportChangeFunc),window.detachEvent("onscroll",this.viewportChangeFunc)),this.isMRAIDAd&&(this.mraid.inExpandedState()&&(this.log("stopping with expanded state, invoke close()"),this._mraidClose()),this.mraid.inDefaultState()))return this.log("stopping with default state, invoke close()"),void this._mraidClose();if(this.expandedAdElement){var i=this.expandedAdElement.parentNode;this.expandedAdElement._fw_closeButton&&i.removeChild(this.expandedAdElement._fw_closeButton),i.removeChild(this.expandedAdElement),this.expandedAdElement===this.defaultAdElement&&(this.defaultAdElementContainer===this.defaultAdElement&&(this.defaultAdElementContainer=null),this.defaultAdElement=null),this.expandedAdElement=null}if(this.expandedLightbox&&((i=this.expandedLightbox.parentNode).removeChild(this.expandedLightbox),this.expandedLightbox=null),this.defaultAdElement){i=this.defaultAdElement.parentNode;var r=this.defaultAdElement;r.style.display="none",i!==this._rendererController.getAdInstance().getSlot().getBase()&&window.setTimeout(function(){for(var e=i&&i.childNodes||[],t=0;t<e.length;t++){var n=e[t];n===r&&i.removeChild(n)}},200),this.defaultAdElementContainer===this.defaultAdElement&&(this.defaultAdElementContainer=null),this.defaultAdElement=null}this.defaultAdElementContainer&&((i=this.defaultAdElementContainer.parentNode).removeChild(this.defaultAdElementContainer),this.defaultAdElementContainer=null),(this.shouldPauseContentWhenStart||this.isInterstitialNow&&!this.isMRAIDAd)&&this._rendererController.requestContentStateChange(!1)},_setupParameters:function(){var e=this._rendererController.getAdInstance(),t=e.getSlot().getTimePositionClass();this._tpc=t;var n,i=e.getActiveCreativeRendition();if(e=i.getBaseUnit(),i=i.getCreativeApi(),a.PLATFORM_NOT_SUPPORT_OVERLAY_AD&&t===a.TIME_POSITION_CLASS_OVERLAY)return this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"Overlay not supported on this device."),!1;if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&(t===a.TIME_POSITION_CLASS_MIDROLL||t===a.TIME_POSITION_CLASS_PAUSE_MIDROLL))return this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"Midroll, pause_midroll not supported on this device."),!1;if(a.PLATFORM_IS_IPHONE_IPOD)switch(t){case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_PAUSE_MIDROLL:case a.TIME_POSITION_CLASS_OVERLAY:return this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"Midroll, pause_midroll and overlay ads are not supported on iPod, iPhone."),!1;case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF)}if(this.adLoadTimeout=5,(n=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_AD_LOAD_TIMEOUT))&&(this.adLoadTimeout=0<Number(n)?Number(n):this.adLoadTimeout),this.shouldKeepInterstitial=!1,(n=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE))?this.shouldKeepInterstitial=n===a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INTERSTITIAL:"string"==typeof e&&(this.shouldKeepInterstitial=e.toLowerCase()===a.PARAMETER_RENDERER_HTML_BASEUNIT_INTERSTITIAL),this.isInterstitialNow=this.shouldKeepInterstitial,this.shouldPauseContentWhenStart=!1,this.shouldPauseContentWhenExpandOrClick=!this.shouldKeepInterstitial&&(t===a.TIME_POSITION_CLASS_DISPLAY||t===a.TIME_POSITION_CLASS_OVERLAY),this.shouldBackgroundTransparent=!1,void 0!==(n=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_SHOULD_BACKGROUND_TRANSPARENT))&&null!=n&&(this.shouldBackgroundTransparent=a.Util.str2bool(n)),this.shouldEndAfterDuration=t!==a.TIME_POSITION_CLASS_DISPLAY||this.shouldKeepInterstitial,void 0!==(n=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_SHOULD_END_AFTER_DURATION))&&null!=n&&(this.shouldEndAfterDuration=a.Util.str2bool(n)),this.coadScriptName=this._rendererController.getParameter(a.PARAMETER_RENDERER_DISPLAY_COAD_SCRIPT_NAME),this.coadScriptName||(this.coadScriptName=this._rendererController.getParameter("coad_script_name")),this.primaryAnchor=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_PRIMARY_ANCHOR)||"bc",this.marginWidth=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_MARGIN_WIDTH)||0,this.marginHeight=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_MARGIN_HEIGHT)||0,this.bootstrap=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_BOOTSTRAP),e=a.Util.getViewport(),this.defaultExpandWidth=e.width,this.defaultExpandHeight=e.height,this.isMRAIDAd="MRAID-1.0"===i,this.mraid=new function(e){this.STATELOADING="loading",this.STATEDEFAULT="default",this.STATEEXPANDED="expanded",this.STATEHIDDEN="hidden",this._renderer=e,this._state=this.STATELOADING,this._useCustomClose=!1,this.viewable=this.expandIsModal=!0,this._baseUrlExpanded=this._baseUrlDefault="",(e=Object.defineProperty||function(e,t,n){n.get&&e.__defineGetter__(t,n.get),n.set&&e.__defineSetter__(t,n.set)})(this,"baseUrl",{get:function(){return this.inExpandedState()&&this._baseUrlExpanded||this._baseUrlDefault},set:function(e){this.inExpandedState()?this._baseUrlExpanded=e:(this._baseUrlDefault=e,this._baseUrlExpanded="")}}),e(this,"useCustomClose",{get:function(){return this._useCustomClose},set:function(e){this._useCustomClose===!e&&(this._useCustomClose=!!e,this.pushData())}}),e(this,"placementType",{get:function(){return this._renderer.shouldKeepInterstitial?"interstitial":"inline"}}),e(this,"expandWidth",{get:function(){return this._renderer.requestedExpandWidth&&this._renderer.requestedExpandWidth<this._renderer.defaultExpandWidth?this._renderer.requestedExpandWidth:this._renderer.defaultExpandWidth}}),e(this,"expandHeight",{get:function(){return this._renderer.requestedExpandHeight&&this._renderer.requestedExpandHeight<this._renderer.defaultExpandHeight?this._renderer.requestedExpandHeight:this._renderer.defaultExpandHeight}}),e(this,"state",{get:function(){return this._state},set:function(e){this.log("mraid.state change "+this.state+" => "+e),this.state!==e&&(this._renderer.shouldPauseContentWhenExpandOrClick&&(e===this.STATEEXPANDED?this._renderer._rendererController.requestContentStateChange(!0):this.inExpandedState()&&this._renderer._rendererController.requestContentStateChange(!1)),e===this.STATEEXPANDED?(this._renderer.expandedAdElement?this._renderer._rendererController.processEvent({name:a.EVENT_AD_ACCEPT_INVITATION}):(this._renderer.expandedAdElement=this._renderer.defaultAdElement,this._renderer._rendererController.processEvent({name:a.EVENT_AD_EXPAND})),this._renderer.presentInterstitial(),this._renderer.shouldEndAfterDuration&&this._renderer.timer.pause()):e===this.STATEDEFAULT&&(this._renderer.shouldKeepInterstitial?(this._renderer.expandedAdElement=this._renderer.defaultAdElement,this._renderer.presentInterstitial()):(this.inExpandedState()&&(this._renderer.expandedAdElement!==this._renderer.defaultAdElement?this._renderer._rendererController.processEvent({name:a.EVENT_AD_CLOSE}):this._renderer._rendererController.processEvent({name:a.EVENT_AD_COLLAPSE})),this._renderer.expandedAdElement=null,this._renderer.presentInline()),this._renderer.shouldEndAfterDuration&&this._renderer.timer.start()),this._state=e,this.pushData(),e===this.STATEHIDDEN&&this._renderer.stop())}}),this.inLoadingState=function(){return this.state===this.STATELOADING},this.inDefaultState=function(){return this.state===this.STATEDEFAULT},this.inExpandedState=function(){return this.state===this.STATEEXPANDED},this.inHiddenState=function(){return this.state===this.STATEHIDDEN},this.pushData=function(){var e='mraid._Update("'+this.state+'", '+this.viewable+', "'+this.placementType+'", '+this.expandWidth+", "+this.expandHeight+", "+this.useCustomClose+", "+this.expandIsModal+")";this.log("mraid.pushData: going to invoke on iframe with "+e),this._renderer.defaultAdElement?(this._renderer.defaultAdElement.contentWindow.postMessage("fwsdk-bounce:"+e,"*"),this._renderer.expandedAdElement&&this._renderer.expandedAdElement!==this._renderer.defaultAdElement&&this._renderer.expandedAdElement.contentWindow.postMessage("fwsdk-bounce:"+e,"*")):this.warn("_mraidPushData: no iframe suitable to send "+e)},this.log=function(e){this._renderer.log(e)},this.warn=function(e){this._renderer.warn(e)}}(this),this.onLoadFunc=a.Util.bind(this,function(){this.adLoadTimeoutTimer&&(this.adLoadTimeoutTimer.stop(),this.adLoadTimeoutTimer=null),this.timer&&this.shouldEndAfterDuration&&this.timer.start()}),this.touchMoveDisabler=function(e){e.preventDefault()},this.log("setting parameters, adLoadTimeout: "+this.adLoadTimeout+", isMRAIDAd: "+this.isMRAIDAd+", shouldKeepInterstitial: "+this.shouldKeepInterstitial+", shouldEndAfterDuration: "+this.shouldEndAfterDuration+", shouldPauseContentWhenStart: "+this.shouldPauseContentWhenStart+", shouldPauseContentWhenExpandOrClick: "+this.shouldPauseContentWhenExpandOrClick+", shouldBackgroundTransparent: "+this.shouldBackgroundTransparent+", defaultExpandWidth: "+this.defaultExpandWidth+", defaultExpandHeight: "+this.defaultExpandHeight+", coadScriptName: "+this.coadScriptName+", primaryAnchor: "+this.primaryAnchor+", marginWidth: "+this.marginWidth+", marginHeight: "+this.marginHeight+", bootstrap: "+this.bootstrap),this.shouldKeepInterstitial){if(t===a.TIME_POSITION_CLASS_OVERLAY)return this._onRendererFailed(a.ERROR_INVALID_SLOT,"Interstitial ad is not supported in overlay slot."),!1}else!this.isMRAIDAd||a.PLATFORM_IS_IPHONE_IPOD&&t!==a.TIME_POSITION_CLASS_DISPLAY||(this._rendererController.setCapability(a.EVENT_AD_ACCEPT_INVITATION,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_CLOSE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_COLLAPSE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_EXPAND,a.CAPABILITY_STATUS_ON));return!0},_render:function(){this.log("_render");var b=this._rendererController.getAdInstance(),c=b.getSlot(),d=c.getTimePositionClass(),e=c.getBase(),f=b.getActiveCreativeRendition(),g=f.getDuration(),h=f.getPrimaryCreativeRenditionAsset();b=h.getUrl();var k=h.getContent();if(d===a.TIME_POSITION_CLASS_DISPLAY&&(e.innerHTML=""),this.timer=new a.Timer(g,a.Util.bind(this,this._stop)),this.coadScriptName&&"function"==typeof window[this.coadScriptName])this.defaultAdElement=window[this.coadScriptName](k,b,f.getHeight(),f.getWidth(),h.getMimeType(),c.getCustomId()),this.timer&&this.shouldEndAfterDuration&&this.timer.start();else{if(g=document.createElement("span"),g.id="_fw_ad_container_html_"+c.getCustomId()+"_",g.style.position="relative"===e.style.position?"absolute":"relative",g.style.display="inline-block",g.style.margin="0px",g.style.padding="0px",g.style.width=e.style.width||"100%",g.style.height=e.style.height||"100%",g.style.top=g.style.left="0px",e.appendChild(g),this.defaultAdElementContainer=g,!b&&!k)return this._onRendererFailed(a.ERROR_NULL_ASSET,"Empty URL and empty content"),void this._stop();if("text/html_lit_nowrapper"===f.getContentType()||"text/html_lit_js_wc_nw"===f.getContentType()){if(this.isMRAIDAd||this.isInterstitialNow)return this._onRendererFailed(a.ERROR_INVALID_VALUE,""),void this._stop();if(!k)return this._onRendererFailed(a.ERROR_NULL_ASSET,"Empty content"),void this._stop();this.defaultAdElement=g,this.defaultAdElement.innerHTML=k,c=this.defaultAdElement.getElementsByTagName("script");var m=document.getElementsByTagName("head")[0];for(e=0;e<c.length;++e)if(c[e].src){var n=document.createElement("script");n.src=c[e].src,c[e].charset&&(n.charset=c[e].charset),c[e].innerHTML&&(n.innerHTML=c[e].innerHTML),n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||m.removeChild(n)},m.appendChild(n)}else n=c[e].innerHTML,eval(n);return this.presentInline(),void this.onLoadFunc()}f=document.createElement("iframe"),f.id="_fw_ad_container_iframe_"+c.getCustomId()+"_"+Math.random(),f.attachEvent?f.attachEvent("onload",this.onLoadFunc):f.onload=this.onLoadFunc,this.defaultAdElement=f,this.defaultAdElementContainer.appendChild(f),this._fillAdNode(f,b,k),this.isMRAIDAd&&(this.adLoadTimeoutTimer=new a.Timer(this.adLoadTimeout,a.Util.bind(this,function(){this._onRendererFailed(a.ERROR_TIMEOUT,"Loading MRAID Ad timed out"),d!==a.TIME_POSITION_CLASS_DISPLAY&&this.isMRAIDAd&&!this.mraid.inLoadingState()?this._mraidClose():this._stop()})),this.adLoadTimeoutTimer.start())}this.defaultAdElement||(c=e.getElementsByTagName("iframe"))&&0<c.length&&(this.defaultAdElement=c[c.length-1]),this.defaultAdElement?(this.defaultAdElement.frameBorder="0",this.shouldBackgroundTransparent&&(this.defaultAdElement.allowTransparency="true",this.defaultAdElement.style["background-color"]="rgba(255,255,255,0)"),this.isInterstitialNow?(this.expandedAdElement=this.defaultAdElement,this.presentInterstitial()):this.presentInline(),this.messageHandlerFunc=a.Util.bind(this,this._onWindowMessageReceived),this.viewportChangeFunc=a.Util.bind(this,function(){this.viewportChangeFuncTimer&&window.clearTimeout(this.viewportChangeFuncTimer),this.viewportChangeFuncTimer=window.setTimeout(a.Util.bind(this,this._onViewportResizeScroll),200)}),window.addEventListener?(window.addEventListener("message",this.messageHandlerFunc,!1),window.addEventListener("resize",this.viewportChangeFunc,!1),window.addEventListener("scroll",this.viewportChangeFunc,!1)):window.attachEvent&&(window.attachEvent("onmessage",this.messageHandlerFunc),window.attachEvent("onresize",this.viewportChangeFunc),window.attachEvent("onscroll",this.viewportChangeFunc))):this.isMRAIDAd&&(this._onRendererFailed(a.ERROR_UNKNOWN,"Failed to find iframe in slotBase for MRAID ad"),this._stop())},_layoutOverlayAd:function(e){this.log("_layoutOverlayAd");var t=this._rendererController.getAdInstance(),n=t.getSlot(),i=n.getVideoDisplaySize().width;n=n.getVideoDisplaySize().height;var r=t.getActiveCreativeRendition();switch(t=r.getWidth()||240,r=r.getHeight()||50,e.style.width=Math.min(t,i)+"px",e.style.height=Math.min(r,n)+"px",e.style.left=e.style.top=e.style.right=e.style.bottom="",this.primaryAnchor){case"tl":case"lt":e.style.top=this.marginHeight+"px",e.style.left=this.marginWidth+"px";break;case"tr":case"rt":e.style.top=this.marginHeight+"px",e.style.right=this.marginWidth+"px";break;case"bl":case"lb":e.style.bottom=this.marginHeight+"px",e.style.left=this.marginWidth+"px";break;case"br":case"rb":e.style.bottom=this.marginHeight+"px",e.style.right=this.marginWidth+"px";break;case"tc":case"ct":e.style.top=this.marginHeight+"px",e.style.left=.5*Math.max(0,i-t)+"px";break;case"lm":case"ml":e.style.left=this.marginWidth+"px",e.style.top=.5*Math.max(0,n-r)+"px";break;case"rm":case"mr":e.style.right=this.marginWidth+"px",e.style.top=.5*Math.max(0,n-r)+"px";break;case"mc":case"cm":case"c":case"m":e.style.left=.5*Math.max(0,i-t)+"px",e.style.top=.5*Math.max(0,n-r)+"px";break;default:case"bc":case"cb":e.style.bottom=this.marginHeight+"px",e.style.left=.5*Math.max(0,i-t)+"px"}},_fillAdNode:function(e,t,n){if(this.log("_fillAdNode, url:"+t+", content:"+(n?"<omited>":"<empty>")),t)e.src=t;else{if(!n)return this._onRendererFailed(a.ERROR_NULL_ASSET,"Empty URL and content"),!1;(e=e.contentWindow?e.contentWindow.document:e.contentDocument.document?e.contentDocument.document:e.contentDocument).open(),e.write(n),e.close()}return!0},presentInline:function(){this.log("presentInline"),this.isInterstitialNow=!1;var e=this.defaultAdElement;if(e){var t=this._rendererController.getAdInstance(),n=t.getSlot(),i=n.getTimePositionClass(),r=n.getWidth(),s=n.getHeight(),o=n.getVideoDisplaySize().width;n=n.getVideoDisplaySize().height;var l=t.getActiveCreativeRendition();switch(t=l.getWidth(),l=l.getHeight(),e.scrolling="no",e.style.overflow="hidden",i){case a.TIME_POSITION_CLASS_DISPLAY:e.style.position="",e.style.background=this.shouldBackgroundTransparent?"transparent":"",e.style.left="0px",e.style.top="0px",e.style.width=(t||r)+"px",e.style.height=(l||s)+"px";break;case a.TIME_POSITION_CLASS_OVERLAY:e.style.position="absolute",e.style.background=this.shouldBackgroundTransparent?"transparent":"white",this._layoutOverlayAd(e);break;default:e.style.position="absolute",e.style.background=this.shouldBackgroundTransparent?"transparent":"white",e.style.left="0px",e.style.top="0px",e.style.width=o+"px",e.style.height=n+"px"}}},presentInterstitial:function(){if(this.log("presentInterstitial, defaultExpandWidth: "+this.defaultExpandWidth+", defaultExpandHeight: "+this.defaultExpandHeight+", this.mraid.expandWidth: "+this.mraid.expandWidth+", this.mraid.expandHeight: "+this.mraid.expandHeight+", (Math.max(0, this.defaultExpandWidth - this.mraid.expandWidth) / 2) = "+Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+", (Math.max(0, this.defaultExpandHeight - this.mraid.expandHeight) / 2) = "+Math.max(0,this.defaultExpandHeight-this.mraid.expandHeight)/2),this.expandedAdElement){this.isInterstitialNow=!0,document.addEventListener&&(document.removeEventListener("touchmove",this.touchMoveDisabler,!1),document.addEventListener("touchmove",this.touchMoveDisabler,!1));var e=this.expandedAdElement.parentNode;if(this.expandedLightbox||(this.expandedLightbox=document.createElement("div"),this.expandedLightbox.style.background="black",this.expandedLightbox.style.opacity=.8,this.expandedLightbox.style.position="fixed",this.expandedLightbox.style.top="0px",this.expandedLightbox.style.left="0px",this.expandedLightbox.style.zIndex=this.expandedLightbox.style["z-index"]=9999,e.appendChild(this.expandedLightbox)),this.expandedLightbox.style.width=this.defaultExpandWidth+"px",this.expandedLightbox.style.height=this.defaultExpandHeight+"px",this.expandedAdElement.frameBorder="0",this.expandedAdElement.scrolling="no",this.expandedAdElement.style.position="fixed",this.expandedAdElement.style.overflow="hidden",this.expandedAdElement.style.top=this.expandedAdElement.top=Math.max(0,this.defaultExpandHeight-this.mraid.expandHeight)/2+"px",this.expandedAdElement.style.left=this.expandedAdElement.left=Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+"px",this.expandedAdElement.style.width=this.expandedAdElement.width=this.mraid.expandWidth+"px",this.expandedAdElement.style.height=this.expandedAdElement.height=this.mraid.expandHeight+"px",this.expandedAdElement.style.zIndex=this.expandedAdElement.style["z-index"]=1e4,this.log("presentInterstitial, expanded ad element size: (top, left, width, height) = ("+this.expandedAdElement.top+", "+this.expandedAdElement.left+", "+this.expandedAdElement.width+", "+this.expandedAdElement.height+")"),this.isMRAIDAd){var t=this.expandedAdElement._fw_closeButton;t||((t=document.createElement("div")).addEventListener?t.addEventListener("click",a.Util.bind(this,function(){this._mraidClose()})):t.attachEvent&&t.attachEvent("onclick",a.Util.bind(this,function(){this._mraidClose()})),t.style.position="fixed",t.style.margin="0px",t.style.padding="0px",t.style.width="25px",t.style.height="25px",t.style.zIndex=t.style["z-index"]=10001,e.appendChild(t),this.expandedAdElement._fw_closeButton=t),t.style.top=this.expandedAdElement.style.top,t.style.left=Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+this.mraid.expandWidth-25+"px",t.innerHTML=this.mraid.useCustomClose?0<a.PLATFORM_ANDROID_VERSION?"   ":"":0<a.PLATFORM_ANDROID_VERSION&&a.PLATFORM_ANDROID_VERSION<=3?'<img style="width:25px; height:25px; border:0" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4xJREFUeNrMmjFv2kAUxw/IUAZUw4AqJjIxMAQJ9sIHgDYLUqfSBTowJBudAmOnNCNeAitLyVgxxNlBgk+QTKgb6UQHhr7nniNj8PmM3zk86XQZOPt+ee/e+9+dI4zQms1mGTpsb6EVXH42h/YHmqHrukH17kjAiWvQfYT2gfeH2BjaHfYA9hwqCABkobvik9eI/qkIMYB2A0BPSkG4By44hErrQfvhx0MRn/F/Cy3LwjH0yhfZdRSThOhyCI2FZ/iuRrFYjMxmMyMwCEDc8nB6LSsDTBZg7g4GAYj7ANmI0gpeMDEPTxwDhBRMzAXiGrqv7PgMYTSA+eWZtQACvfCTHbedQzYbu4LwOvHolp3q9TorlUpsuVyyfr/P1us16ezi8TirVqtmP5lMzPcIiuepvc5EHT+4doPIZDImhPV3q9UyX0hl+MxOp2O+I5/Ps1qt5pWat4py1CE7Gm4jnf99Sph9z5Lw9gWf845HhLJjtVqx0WhEDuMGgaElYVdbWYuTDbxGYcwiELreskQiwXK5HFssFmyz2ZBA4PoTrA9nFhtCFnu2PCJdL6bTKYlnCCCYfe4WyGc/I4PCEEK8zD3Cw+rxkPjGDIMp2Rl+otRMDGHZaZRvTQ8yv55RBGEKSwQ5C/IEWRiFEGhnMVj1naCbJa9slk6nVUKg/T2h2iyhZywZ4/RCMplUCWFW+hPBsQ0ZjFMhEEOY9SRKLUv3rRnFEHtFI4nhRPelX1xH2FQYOYjf9EsJ8qQSQqVqth8dkYGI6oQK1awExKvYUQlNL5CFSghq1exiCwQxVEOEAGPEYFPyG2QKniS+CWNTRL05w7DSdf2blX7HYe7siD0ztteRm7B3doQww5c9Ow+vspcKRvHXbrfJBCBBmOH13XdnZe95jcKzJmoVK/KMhPV2JAq/UDG8TgJVCEA3GAlvGG5a61JGpmM4UKtYJ4zEs7fmuu8Qu8vU3xEK12EqlXJV0FZIgTe6QhAOcx/kUEKxYUhVZGX8Oft/sX9sNudz2zHXW13wCm6B71m4F6AiwyuECnhj7mtjxQdUKPcrQdStCELoEZtnNO6ZwiuGU8Xr4wE/HwzgJVDY19T49cOlzA9jsk/EC0iQMQ/cM+9C8MIngOjLDjj0o5oGrzVZBWsBa8TA78Cgnznh3QQe6we9j0cpPnTe1IYG4kgIZR5273mvCdIohg6G6TzI5O32T4ABAPsBS28k7apdAAAAAElFTkSuQmCC">':'<img style="width:25px; height:25px; border:0" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwIiB5PSIwIiB3aWR0aD0iNDAwcHgiIGhlaWdodD0iNDAwcHgiIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA0MDAgNDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48Y2lyY2xlIGZpbGw9IiM2NjY2NjYiIGN4PSIyMDAuMTM5IiBjeT0iMTk5Ljg2IiByPSIxOTcuODYiLz48cGF0aCBmaWxsPSIjRjBGMEYwIiBzdHJva2U9IiNGMEYwRjAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTExNC44NjUsMzAzLjY0NGMtNi4yMjYsNi4yMjctMTUuMzYzLDcuMTg2LTIwLjQwNywyLjE0NGwtMC41MjItMC41MjJjLTUuMDQzLTUuMDQzLTQuMDgzLTE0LjE4LDIuMTQ0LTIwLjQwN0wyODQuODYsOTYuMDc4YzYuMjI2LTYuMjI3LDE1LjM2Mi03LjE4NiwyMC40MDUtMi4xNDRsMC41MjIsMC41MjFjNS4wNDMsNS4wNDIsNC4wODMsMTQuMTc5LTIuMTQ0LDIwLjQwOEwxMTQuODY1LDMwMy42NDR6Ii8+PHBhdGggZmlsbD0iI0YwRjBGMCIgc3Ryb2tlPSIjRjBGMEYwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0zMDcuODE5LDI4OC42NjZjNS4xNTMsNS4xNTgsNS4wNDgsMTMuNjI0LTAuMjQxLDE4LjkxMWwwLDBjLTUuMjg4LDUuMjg5LTEzLjc1Miw1LjM5My0xOC45MDksMC4yNEw5MS45MDYsMTExLjA1NWMtNS4xNTYtNS4xNTYtNS4wNDgtMTMuNjIzLDAuMjQtMTguOTFsMCwwYzUuMjktNS4yODksMTMuNzU1LTUuMzk2LDE4LjkxMS0wLjI0MUwzMDcuODE5LDI4OC42NjZ6Ii8+PC9zdmc+">'}this.isMRAIDAd||this._rendererController.requestContentStateChange(!0)}},_onWindowMessageReceived:function(e){if(this.defaultAdElement&&(e.source===this.defaultAdElement.contentWindow||this.expandedAdElement&&e.source===this.expandedAdElement.contentWindow)){this.log("_onWindowMessageReceived, event.data:"+e.data+", event.origin:"+e.origin);var t=e.data.toString().split(":");if(t&&2<=t.length&&"fwsdk-invoke"===t[0]){var n=t[1];if((t=t.slice(2))&&0<t.length){for(var i=0;i<t.length;i++)t[i]=decodeURIComponent(t[i]);1===t.length&&(t=t[0])}else t=null;"iframe_ready"===n?(this.onLoadFunc&&e.source===this.defaultAdElement.contentWindow&&this.defaultAdElement!==this.expandedAdElement&&this.onLoadFunc(),t&&(t=a.Util.trim(t))&&this.isMRAIDAd&&(this.mraid.baseUrl=t),this.bootstrap&&e.source.postMessage("fwsdk-bounce:"+this.bootstrap,e.origin),e.source.postMessage('fwsdk-bounce:mraid._messagingModel = "postMessage"',e.origin),this.isMRAIDAd&&(e.source===this.defaultAdElement.contentWindow&&this.shouldPauseContentWhenStart&&this._rendererController.requestContentStateChange(!0),this.mraid.inLoadingState()?this.mraid.state=this.mraid.STATEDEFAULT:this.expandedAdElement&&e.source===this.expandedAdElement.contentWindow&&this.mraid.pushData())):this.isMRAIDAd?this._mraidMethods(n,t):"close"===n&&this._stop()}}},_mraidMethods:function(e,t){if(e&&this.isMRAIDAd)switch(this.log("_mraidMethods("+e+", "+t+")"),e){case"open":"string"==typeof t?this._mraidOpen(t):2<=t.length&&this._mraidOpen(t[0],a.Util.str2bool(t[1]));break;case"close":this._mraidClose();break;case"expand":this._mraidExpand(t);break;case"useCustomClose":t&&0<t.length?this.mraid.useCustomClose=a.Util.str2bool(t):this.warn("Invalid parameter to useCustomClose");break;case"setExpandProperties":if(!t)break;this.requestedExpandWidth=Number(t[0]),this.requestedExpandHeight=Number(t[1]),this.requestedExpandWidth&&this.requestedExpandHeight&&(this.requestedExpandWidth!==this.defaultExpandWidth||this.requestedExpandHeight!==this.defaultExpandHeight)||(this.requestedExpandHeight=this.requestedExpandWidth=0),this.mraid.useCustomClose=a.Util.str2bool(t[2]),this.requestedExpandWidth===this.mraid.expandWidth&&this.requestedExpandHeight===this.mraid.expandHeight||this.mraid.pushData();break;case"log":this.log("MRAID log:"+t);break;default:this.warn("Unknown MRAID function call: "+e+" with param:"+t)}},_mraidOpen:function(e,t){this.log("_mraidOpen("+e+"), baseUrl:"+this.mraid.baseUrl+", absolute Url"+(e=a.Util.getAbsoluteUrl(this.mraid.baseUrl,e))),e&&"string"==typeof e&&0<e.length?((t||void 0===t)&&window.open(e),this._rendererController.processEvent({name:a.EVENT_AD_CLICK,info:{showBrowser:!1,url:e}})):this.warn("_mraidOpen: url required for open")},_mraidClose:function(){if(this.log("_mraidClose, current state: "+this.mraid.state),this.mraid.inExpandedState()){window.removeEventListener&&document.removeEventListener("touchmove",this.touchMoveDisabler,!1);var e=this.expandedAdElement,t=this.expandedAdElement._fw_closeButton;this.expandedAdElement._fw_closeButton=null;var n=this.expandedAdElement.parentNode;this.mraid.state=this.mraid.STATEDEFAULT,this.expandedLightbox&&(n.removeChild(this.expandedLightbox),this.expandedLightbox=null),e!==this.defaultAdElement&&(e.style.display="hidden",window.setTimeout(function(){n.removeChild(e)},50)),n.removeChild(t)}else this.mraid.inDefaultState()?this.mraid.state=this.mraid.STATEHIDDEN:this.warn("_mraidClose: close() is only valid when in expanded/default state")},_mraidExpand:function(e){if(this.log("_mraidExpand, current state: "+this.mraid.state),this.mraid.inDefaultState())if(this.shouldKeepInterstitial)this.warn("_mraidExpand: expand() is only valid for inline ad");else{if(e){var t=document.createElement("iframe"),n=a.Util.getAbsoluteUrl(this.mraid.baseUrl,e);this.shouldBackgroundTransparent&&(t.allowTransparency="true",t.style["background-color"]="rgba(255,255,255,0)"),(this.defaultAdElementContainer||this.defaultAdElement.parentNode).appendChild(t),this.expandedAdElement=t,this.log("_mraidExpand("+e+"), baseUrl:"+this.mraid.baseUrl+", absolute Url"+n),this._fillAdNode(t,n,null)}this.mraid.state=this.mraid.STATEEXPANDED,this.isInterstitialNow=!0,this._onViewportResizeScroll()}else this.warn("_mraidExpand: expand() is only valid when in default state")},_onViewportResizeScroll:function(){var e=a.Util.getViewport();this.defaultExpandWidth=e.width,this.defaultExpandHeight=e.height,this.isInterstitialNow&&this.presentInterstitial()},log:function(e){var t=this._rendererController.getAdInstance().getSlot();a.log("HTMLRenderer["+t+"]\t"+e)},warn:function(e){var t=this._rendererController.getAdInstance().getSlot();a.warn("HTMLRenderer["+t+"]\t"+e)},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){return this.timer?this.timer.getPlayheadTime():-1},getDuration:function(){return this.timer?this.timer.getDuration():-1},_onRendererFailed:function(e,t,n){var i={};i[a.INFO_KEY_ERROR_MODULE]="HTMLRenderer",i[a.INFO_KEY_ERROR_CODE]=e,this._rendererController.getAdInstance().getSlot().getTimePositionClass()===a.TIME_POSITION_CLASS_OVERLAY?n||(n=a.ERROR_VAST_NON_LINEAR_GENERAL_ERROR):this._rendererController.getAdInstance().getSlot().getTimePositionClass()!==a.TIME_POSITION_CLASS_DISPLAY||n||(n=a.ERROR_VAST_COMPANION_GENERAL_ERROR),n&&(i[a.INFO_KEY_VAST_ERROR_CODE]=n),t&&(i[a.INFO_KEY_ERROR_INFO]=t),this._rendererController.handleStateTransition(a.RENDERER_STATE_FAILED,i)}},a.HTMLRenderer.prototype.constructor=a.HTMLRenderer,a.Ad=function(){this._id=null,this._creatives=[],this._noLoad=!1,this._soAdUnit=null,this._isRequiredToShow=!1},a.Ad.prototype={isRequiredToShow:function(){return this._isRequiredToShow},parse:function(e){if(e){this._id=e.adId||null,this._noLoad=e.noLoad,this._soAdUnit=e.adUnit,e.hasOwnProperty("required")&&(this._isRequiredToShow=e.required);var t=0;for(e=e.creatives||[];t<e.length;t++){var n=e[t],i=new a.Creative;i.parse(n),this._creatives.push(i)}}},getSoAdUnit:function(){return this._soAdUnit},getId:function(){return this._id},getNoLoad:function(){return this._noLoad},getCreative:function(e){for(var t=0;t<this._creatives.length;t++)if(this._creatives[t].getId()===e)return this._creatives[t];return null},addCreativeRendition:function(){var e=new a.Creative;return this._creatives.push(e),e}},a.Ad.prototype.constructor=a.Ad,a.Creative=function(){this._duration=this._baseUnit=this._id=null,this._parameters={},this._creativeRenditions=[]},a.Creative.prototype={getId:function(){return this._id},getBaseUnit:function(){return this._baseUnit},getDuration:function(){return this._duration},getParameter:function(e){return this._parameters[e]},setParameter:function(e,t){null==t?delete this._parameters[e]:this._parameters[e]=t},parse:function(e){if(e){if(this._id=e.creativeId||null,this._baseUnit=e.baseUnit||null,this._duration=1*e.duration,e.parameters)if(e.parameters.constructor===Array)for(var t=0,n=e.parameters||[];t<n.length;t++){var i=n[t];this._parameters[i.name]=i.value}else"object"==typeof e.parameters&&(this._parameters=a.Util.copy(e.parameters));for(t=0,n=e.creativeRenditions||[];t<n.length;t++){for(var r in i=n[t],(e=new a.CreativeRendition).parse(i),e.setDuration(this._duration),e.setBaseUnit(this._baseUnit),this._parameters)this._parameters.hasOwnProperty(r)&&e.setParameter(r,this._parameters[r]);this._creativeRenditions.push(e)}}},getAllCreativeRenditions:function(){return this._creativeRenditions},addCreativeRendition:function(e){this._creativeRenditions.push(e)},getEligibleCreativeRenditionsForAdInstance:function(e){var t,n=[],i=[];for(t=0;t<this._creativeRenditions.length;t++){var r=this._creativeRenditions[t];r.getId()===e._creativeRenditionId&&r.getReplicaId()===e._replicaId&&n.push(r),""===r.getReplicaId()&&i.push(r)}return 0===n.length?i:n},cloneForTranslation:function(){var e=new a.Creative;return e.parse({creativeId:this._id,baseUnit:this._baseUnit,duration:this._duration,parameters:a.Util.copy(this._parameters)}),e}},a.Creative.prototype.constructor=a.Creative,a.CreativeRendition=function(){this._id=null,this._creativeApi="None",this._baseUnit=null,this._replicaId="",this._height=this._width=this._preference=this._wrapperUrl=this._wrapperType=this._contentType=null,this._parameters={},this._primaryCreativeRenditionAsset=null,this._otherCreativeRenditionAssets=[],this._universalAdId=this._duration=null},a.CreativeRendition.prototype={getId:function(){return this._id},getCreativeApi:function(){return this._creativeApi},setCreativeApi:function(e){this._creativeApi=e||"None"},getReplicaId:function(){return this._replicaId},getContentType:function(){return this._contentType?this._contentType:this._primaryCreativeRenditionAsset&&this._primaryCreativeRenditionAsset.getContentType()?this._primaryCreativeRenditionAsset.getContentType():null},setContentType:function(e){this._contentType=e},getWrapperType:function(){return this._wrapperType},setWrapperType:function(e){this._wrapperType=e},getWrapperUrl:function(){return this._wrapperUrl},setWrapperUrl:function(e){this._wrapperUrl=e},getBaseUnit:function(){return this._baseUnit},setBaseUnit:function(e){this._baseUnit=e},getPreference:function(){return this._preference},setPreference:function(e){this._preference=e},getWidth:function(){return this._width},setWidth:function(e){this._width=e},getHeight:function(){return this._height},setHeight:function(e){this._height=e},getDuration:function(){return this._duration},setDuration:function(e){this._duration=e},getParameter:function(e){return this._parameters[e]},setParameter:function(e,t){null==t?delete this._parameters[e]:this._parameters[e]=t},getUniversalAdId:function(){return this._universalAdId},setUniversalAdId:function(e){this._universalAdId=e},getPrimaryCreativeRenditionAsset:function(){return this._primaryCreativeRenditionAsset},getOtherCreativeRenditionAssets:function(){return this._otherCreativeRenditionAssets.slice()},addCreativeRenditionAsset:function(e,t){var n=new a.CreativeRenditionAsset;return n.setName(e),t?this._primaryCreativeRenditionAsset=n:this._otherCreativeRenditionAssets.push(n),n},parse:function(e){if(e){this._id=e.creativeRenditionId||null,this._creativeApi=e.creativeApi||"None",this._replicaId=e.hasOwnProperty("adReplicaId")?e.adReplicaId:"",this._contentType=e.contentType||null,this._wrapperType=e.wrapperType||null,this._wrapperUrl=e.wrapperUrl||null,this._preference=1*e.preference,this._width=1*e.width,this._height=1*e.height;for(var t,n=0,i=e.parameters||[];n<i.length;n++)t=i[n],this._parameters[t.name]=t.value;for(this._primaryCreativeRenditionAsset=new a.CreativeRenditionAsset,this._primaryCreativeRenditionAsset.parse(e.asset),n=0,i=e.otherAssets||[];n<i.length;n++)t=i[n],(e=new a.CreativeRenditionAsset).parse(t),this._otherCreativeRenditionAssets.push(e)}}},a.CreativeRendition.prototype.constructor=a.CreativeRendition,a.CreativeRenditionAsset=function(){this._bytes=this._mimeType=this._contentType=this._content=this._url=this._name=this._id=null},a.CreativeRenditionAsset.prototype={getName:function(){return this._name},setName:function(e){this._name=e},getUrl:function(){return this._url},setUrl:function(e){this._url=e},getContent:function(){return this._content},setContent:function(e){this._content=e},getContentType:function(){return this._contentType},setContentType:function(e){this._contentType=e},getMimeType:function(){return this._mimeType},setMimeType:function(e){this._mimeType=e},getBytes:function(){return this._bytes},setBytes:function(e){this._bytes=e},parse:function(e){e&&(this._id=e.id||null,this._name=e.name||null,this._url=e.url||null,this._content=e.content||null,this._contentType=e.contentType||null,this._mimeType=e.mimeType||null,this._bytes=1*e.bytes)}},a.CreativeRenditionAsset.prototype.constructor=a.CreativeRenditionAsset,a.AdInstance=function(e){this._context=e,this._creativeRenditionId=this._creativeId=this._soAdUnit=this._adId=this._slot=null,this._replicaId="",this._primaryCreativeRendition=this._creative=null,this._creativeRenditions=[],this._noLoad=!1,this._companionAdInstances=[],this._eventCallbacks=[],this._externalEventCallbackUrlsDictionary={},this._rendererController=new a.RendererController(e,this),this._timer=new a.Timer,this._metr=0,this._state=a.MediaInitState.instance,this._isStartSuccessfully=this._translated=this._isImpressionSent=this._isInitiatedSent=!1,this._lastDurationFromRenderer=-1,this._slotCustomId=this._parentAdInstancesGroup=null,this._isSkipped=!1,this._wrapperCount=0},a.AdInstance.prototype={},a.AdInstance.prototype.constructor=a.AdInstance,a.METR_MASK_QUARTILE=0,a.METR_MASK_MIDPOINT=1,a.METR_MASK_COMPLETE=2,a.METR_MASK_VOLUME=3,a.METR_MASK_SIZE=4,a.METR_MASK_CONTROL=5,a.METR_MASK_REWIND=6,a.METR_MASK_ACCEPT_INVITATION=7,a.METR_MASK_CLOSE=8,a.METR_MASK_MINIMIZE=9,a.METR_MASK_CLICK=10,a.AdInstance._metrDictionary={},a.AdInstance._metrDictionary[a.EVENT_AD_FIRST_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_THIRD_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_QUARTILE]=1<<a.METR_MASK_QUARTILE|1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE,a.AdInstance._metrDictionary[a.EVENT_AD_MIDPOINT]=1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE,a.AdInstance._metrDictionary[a.EVENT_AD_COMPLETE]=1<<a.METR_MASK_COMPLETE,a.AdInstance._metrDictionary[a.EVENT_AD_MUTE]=1<<a.METR_MASK_VOLUME,a.AdInstance._metrDictionary[a.EVENT_AD_UNMUTE]=1<<a.METR_MASK_VOLUME,a.AdInstance._metrDictionary[a.EVENT_AD_COLLAPSE]=1<<a.METR_MASK_SIZE,a.AdInstance._metrDictionary[a.EVENT_AD_EXPAND]=1<<a.METR_MASK_SIZE,a.AdInstance._metrDictionary[a.EVENT_AD_PAUSE]=1<<a.METR_MASK_CONTROL,a.AdInstance._metrDictionary[a.EVENT_AD_RESUME]=1<<a.METR_MASK_CONTROL,a.AdInstance._metrDictionary[a.EVENT_AD_REWIND]=1<<a.METR_MASK_REWIND,a.AdInstance._metrDictionary[a.EVENT_AD_ACCEPT_INVITATION]=1<<a.METR_MASK_ACCEPT_INVITATION,a.AdInstance._metrDictionary[a.EVENT_AD_CLOSE]=1<<a.METR_MASK_CLOSE,a.AdInstance._metrDictionary[a.EVENT_AD_MINIMIZE]=1<<a.METR_MASK_MINIMIZE,a.AdInstance._metrDictionary[a.EVENT_AD_CLICK]=1<<a.METR_MASK_CLICK,a.Util.mixin(a.AdInstance.prototype,{getAdId:function(){return this._adId},getUniversalAdId:function(){return this.getActiveCreativeRendition()?this.getActiveCreativeRendition().getUniversalAdId():null},getSoAdUnit:function(){return this._soAdUnit},getEventCallbackUrls:function(e,t){var n=[],i=t===a.EVENT_TYPE_CLICK,r=t===a.EVENT_TYPE_CLICK_TRACKING;return(e=a.EventCallback.getEventCallback(this._eventCallbacks,e,r?a.EVENT_TYPE_CLICK:t))&&((t={})[a.INFO_KEY_NEED_EMPTY_CT]=!0,i?e._showBrowser&&n.push(e.getUrl(t)):r&&e._showBrowser||n.push(e.getUrl(t)),i||(n=n.concat(e.getTrackingUrls()))),n},addEventCallbackUrls:function(e,t,n){n&&this._isValidEventNameAndType(e,t)&&(this._externalEventCallbackUrlsDictionary[t+"-"+e]=this.getExternalEventCallbackUrls(e,t).concat(n))},setClickThroughUrl:function(e,t){t&&this._isValidEventNameAndType(e,a.EVENT_TYPE_CLICK)&&(e=this.getEventCallback(e,a.EVENT_TYPE_CLICK))&&(a.Util.isParameterInURL(e._url,a.URL_PARAMETER_KEY_CR)||(e._url=e._url+"&"+a.URL_PARAMETER_KEY_CR+"="),e._url=a.Util.setParameterInURL(e._url,a.URL_PARAMETER_KEY_CR,t),e._showBrowser=!0)},addCreativeRendition:function(){var e=new a.CreativeRendition;return e.parse({creativeRenditionId:this._creativeRenditionId,adReplicaId:this._replicaId,preference:0}),e.setBaseUnit(this._creative.getBaseUnit()),e.setDuration(this._creative.getDuration()),this._creativeRenditions.push(e),this.isPlaceholder()&&(this._noLoad=!1),e},getRendererController:function(){return this._rendererController},getSlot:function(){return this._slot||(this._slot=this._context._adResponse.getSlotByCustomId(this._slotCustomId)),this._slot},getCompanionSlots:function(){for(var e=[],t=0;t<this._companionAdInstances.length;t++)e.push(this._companionAdInstances[t]._slot);return e},getActiveCreativeRendition:function(){return this._primaryCreativeRendition},setActiveCreativeRendition:function(e){e?(-1===this._creativeRenditions.indexOf(e)&&this._creativeRenditions.push(e),this._primaryCreativeRendition=e,this._creativeRenditionId=e.getId()):a.warn("AdInstance.setActiveCreativeRendition","rendition is null")},getAllCreativeRenditions:function(){var e=this._creativeRenditions.slice();e.sort(function(e,t){return t.getPreference()-e.getPreference()});var t=e.indexOf(this._primaryCreativeRendition);return-1<t&&(e.splice(t,1),e.unshift(this._primaryCreativeRendition)),e},getRenderableCreativeRenditions:function(){var e=this._creativeRenditions.slice().sort(function(e,t){return t.getPreference()-e.getPreference()}).filter(function(e){return this._rendererController.rendererMatch(e)},this),t=e.indexOf(this._primaryCreativeRendition);return-1<t&&(e.splice(t,1),e.unshift(this._primaryCreativeRendition)),e},getPlayheadTime:function(){var e=-1;if(this._rendererController.getRenderer()&&"function"==typeof this._rendererController.getRenderer().getPlayheadTime)try{e=this._rendererController.getRenderer().getPlayheadTime()}catch(e){a.warn("AdInstance.getPlayheadTime",e.description)}return e},getDuration:function(){var e=-1;return this._rendererController.getRenderer()&&"function"==typeof this._rendererController.getRenderer().getDuration&&(this._lastDurationFromRenderer=e=this._rendererController.getRenderer().getDuration()),-1===e&&(e=-1<this._lastDurationFromRenderer?this._lastDurationFromRenderer:this.getActiveCreativeRendition().getDuration()),e},parse:function(e){if(e){var t,n;this._adId=e.adId||null,this._creativeId=e.creativeId||null,this._creativeRenditionId=e.creativeRenditionId||null,this._replicaId=e.hasOwnProperty("replicaId")?e.replicaId:"",this._noLoad=this._context._adResponse.getAd(this._adId).getNoLoad(),this._soAdUnit=this._context._adResponse.getAd(this._adId).getSoAdUnit(),this._creative=this._context._adResponse.getCreative(this._adId,this._creativeId),this._creativeRenditions=this._creative.getEligibleCreativeRenditionsForAdInstance(this);var i=0;for(t=e.eventCallbacks||[];i<t.length;i++){var r=t[i];(n=a.EventCallback.newEventCallback(this._context,r.name,r.type))&&(n._adInstance=this,n.parse(r),this._eventCallbacks.push(n))}for(i=0,t=e.companionAds||[];i<t.length;++i)(r=t[i])&&r.adSlotCustomId&&((n=new a.AdInstance(this._context))._slotCustomId=r.adSlotCustomId,n.parse(r),this._companionAdInstances.push(n));for(i=0,t=e.fallbackAds||[];i<t.length;++i)r=t[i],n=new a.AdInstance(this._context),this._parentAdInstancesGroup.push(n),n._slot=this._slot,n._parentAdInstancesGroup=this._parentAdInstancesGroup,n.parse(r);0<this._creativeRenditions.length&&(this._primaryCreativeRendition=this._creativeRenditions[0])}},play:function(){if(a.log("AdInstance.play "+this._slotCustomId),this._timer.tick(),this.processEvent(a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION),this._isStartSuccessfully||(a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]&&this._context.dispatchEvent(a.EVENT_AD_IMPRESSION,{adInstance:this,slotCustomId:this._slotCustomId}),this._isStartSuccessfully=!0),this._state.play(this),this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]===a.MODULE_TYPE_RENDERER)for(var e=0;e<this._companionAdInstances.length;e++)this._companionAdInstances[e].isPlaceholder()||this._companionAdInstances[e].getSlot().playCompanionAds(this._companionAdInstances[e])},pause:function(){a.log("AdInstance.pause "+this._slotCustomId),this._isStartSuccessfully?this._rendererController&&this._rendererController.pause():a.log("Ad hasn't started yet. Ignore.")},resume:function(){a.log("AdInstance.resume"+this._slotCustomId),this._isStartSuccessfully?this._rendererController&&this._rendererController.resume():a.log("Ad hasn't started yet. Ignore.")},skip:function(){a.log("AdInstance.skip"),"VPAID"!==this.getActiveCreativeRendition().getCreativeApi()?(this._isSkipped=!0,this.processEvent(a.EVENT_AD_SKIPPED,a.EVENT_TYPE_GENERIC),this.stop()):a.log("VPAID creative, skip has been implemented inside of VPAID")},stop:function(){a.log("AdInstance.stop"),this._rendererController.stop()},fakeComplete:function(){this._slot.getTimePositionClass()===a.TIME_POSITION_CLASS_DISPLAY&&(this._isStartSuccessfully=!1,this._slot.playNextAdInstance())},complete:function(){this._isStartSuccessfully&&(this.processEvent(a.EVENT_AD_IMPRESSION_END,a.EVENT_TYPE_IMPRESSION),a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]&&this._context.dispatchEvent(a.EVENT_AD_IMPRESSION_END,{adInstance:this})),this._state.complete(this),this._rendererController._restorePlaceholdersForHybrid(),this._rendererController.setRenderer(null),this._isStartSuccessfully=!1,this._slot.playNextAdInstance()},isStarted:function(){return this._isStartSuccessfully},onStartPlaying:function(){a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]?this._isImpressionSent=!0:this._translated=!0},onCompletePlaying:function(){},onStartReplaying:function(){},onCompleteReplaying:function(){},getEventCallback:function(e,t){return a.EventCallback.getEventCallback(this._eventCallbacks,e,t)},processEvent:function(e,t,n,i){var r=!0;return t=this.getEventCallback(e,t),e===a.EVENT_AD_IMPRESSION&&this._isStartSuccessfully&&(t=this.getEventCallback(a.EVENT_ERROR,a.EVENT_TYPE_ERROR),r=!(n={errorInfo:"Trying to send defaultImpression multiple times"})),t?i||t.process(n):r=!1,e===a.EVENT_AD_CLICK&&this._context.dispatchEvent(a.EVENT_AD_CLICK,{adInstance:this}),(e!==a.EVENT_AD_IMPRESSION&&e!==a.EVENT_AD_IMPRESSION_END||a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE])&&(i={subType:e,adInstance:this,slot:this._slot},e===a.EVENT_ERROR&&(i[a.INFO_KEY_ERROR_CODE]=n[a.INFO_KEY_ERROR_CODE],i[a.INFO_KEY_ERROR_INFO]=n[a.INFO_KEY_ERROR_INFO],i[a.INFO_KEY_ERROR_MODULE]=n[a.INFO_KEY_ERROR_MODULE]),e===a.EVENT_AD_MEASUREMENT&&(i[a.INFO_KEY_CONCRETE_EVENT_ID]=n[a.INFO_KEY_CONCRETE_EVENT_ID]),this._context.dispatchEvent(a.EVENT_AD,i)),r},setVolume:function(e){a.debug("AdInstance.setVolume("+e+")"),this.isStarted()&&"function"==typeof this._rendererController.getRenderer().setVolume&&this._rendererController.getRenderer().setVolume(e)},setMetr:function(e,t){var n=a.AdInstance._metrDictionary[e],i=t;n&&(e===a.EVENT_AD_CLICK&&(i=!t),this._metr=i===a.CAPABILITY_STATUS_ON||!0===i?this._metr|n:this._metr&~n)},getExternalEventCallbackUrls:function(e,t){return(this._externalEventCallbackUrlsDictionary[t+"-"+e]||[]).slice()},reset:function(){this._rendererController.reset();for(var e=0;e<this._companionAdInstances.length;e++){var t=this._companionAdInstances[e];t._state!==a.MediaPlayingState.instance&&t._state!==a.MediaReplayingState.instance||t.stop(),t._rendererController.reset()}},cloneForTranslation:function(){var e=new a.AdInstance(this._context);e._adId=this._adId,e._creativeId=this._creativeId,e._creative=this._creative.cloneForTranslation(),e._creativeRenditionId=this._creativeRenditionId,e._isInitiatedSent=this._isInitiatedSent,e._noLoad=this._noLoad,e._slot=this.getSlot(),e._soAdUnit=this.getSoAdUnit(),e._replicaId=this._replicaId,e._wrapperCount=this._wrapperCount;for(var t=0;t<this._eventCallbacks.length;t++){var n=this._eventCallbacks[t].copy();(n._adInstance=e)._eventCallbacks.push(n)}for(e._externalEventCallbackUrlsDictionary=a.Util.copy(this._externalEventCallbackUrlsDictionary),t=0;t<this._companionAdInstances.length;t++)this._companionAdInstances[t].isPlaceholder()?e._companionAdInstances.push(this._companionAdInstances[t].cloneForTranslation()):e._companionAdInstances.push(this._companionAdInstances[t]);return e},isPlaceholder:function(){return this._noLoad},setMediaState:function(e){this._state=e},_isValidEventNameAndType:function(e,t){return!a.Util.isBlank(e)&&!a.Util.isBlank(t)&&(t===a.EVENT_TYPE_CLICK||t===a.EVENT_TYPE_CLICK_TRACKING||t===a.EVENT_TYPE_IMPRESSION&&(e===a.EVENT_AD_IMPRESSION||e===a.EVENT_AD_FIRST_QUARTILE||e===a.EVENT_AD_MIDPOINT||e===a.EVENT_AD_THIRD_QUARTILE||e===a.EVENT_AD_COMPLETE)||t===a.EVENT_TYPE_STANDARD&&(e===a.EVENT_AD_PAUSE||e===a.EVENT_AD_RESUME||e===a.EVENT_AD_REWIND||e===a.EVENT_AD_MUTE||e===a.EVENT_AD_UNMUTE||e===a.EVENT_AD_COLLAPSE||e===a.EVENT_AD_EXPAND||e===a.EVENT_AD_MINIMIZE||e===a.EVENT_AD_CLOSE||e===a.EVENT_AD_ACCEPT_INVITATION)||t===a.EVENT_TYPE_ERROR&&e===a.EVENT_ERROR)},isPlayable:function(){var e=!(this._rendererController.getRendererState()===a.RendererFailedState.instance&&!this._isImpressionSent);return e?(e=e&&!this._translated)||a.debug("AdInstance.isPlayable returning false translated:",this._translated):a.debug("AdInstance.isPlayable returning false isImpressionSent:",this._isImpressionSent),e},toString:function(){return"[AdInstance "+this._adId+"]"},getCompanionAdInstances:function(){for(var e=[],t=0;t<this._companionAdInstances.length;++t)this._companionAdInstances[t].isPlaceholder()||e.push(this._companionAdInstances[t]);return e},isRequiredToShow:function(){return this._context._adResponse.getAd(this._adId).isRequiredToShow()},incrementWrapperCount:function(){this._wrapperCount++},getWrapperCount:function(){return this._wrapperCount}}),a.AdManager=function(){var t=this;this._context=this.newContext(),this._context.addEventListener(a.EVENT_REQUEST_COMPLETE,function(e){t.onRequestComplete(e)}),this._networkId=this._serverURL="",this._onRequestComplete=this._location=null},a.AdManager.prototype={getVersion:function(){if(a.version){var e=a.version.match(/^js-(\d)\.(\d)\.(\d).(\d)/)||a.version.match(/^js-(\d)\.(\d)\.(\d)/)||a.version.match(/^js-(\d)\.(\d)/);if(null!=e&&0<e.length){for(var t=0,n=0;n<e.length-1;n++)t+=e[e.length-n-1]<<(n<<3);return t}if(0===a.version.indexOf("js-master"))return 4294967295}return 0},setNetwork:function(e){if(a.debug("AdManager.setNetwork("+Array.prototype.slice.call(arguments).join(",")+")"),0<1*e){for(var t in this._networkId=1*e,a._instanceQueue)if(a._instanceQueue.hasOwnProperty(t)){var n=a._instanceQueue[t];n&&n._videoAsset._videoPlayPending&&n._videoAsset.play()}}else a.warn("AdManager.setNetwork","valid networkId required")},setServerURL:function(e){a.debug("AdManager.setServerURL("+Array.prototype.slice.call(arguments).join(",")+")"),a.warn("AdManager.setServerURL method is DEPRECATED, use AdManager.setServer instead."),this.setServer(e)},setServer:function(e){if(a.debug("AdManager.setServer("+Array.prototype.slice.call(arguments).join(",")+")"),e&&"string"==typeof e){for(var t in this._serverURL=e,a._instanceQueue)if(a._instanceQueue.hasOwnProperty(t)){var n=a._instanceQueue[t];n&&n._videoAsset._videoPlayPending&&n._videoAsset.play()}}else a.warn("AdManager.setServer","server url required")},setLocation:function(e){a.debug("AdManager.setLocation("+Array.prototype.slice.call(arguments).join(",")+")"),this._location=e},newContext:function(){return a.debug("AdManager.newContext("+Array.prototype.slice.call(arguments).join(",")+")"),new a.Context(this)},newContextWithContext:function(e){a.debug("AdManager.newContextWithContext("+Array.prototype.slice.call(arguments).join(",")+")");var t=this.cloneContext(e);t._temporalSlotBase=e._temporalSlotBase,e.getContentVideoElement()&&(t.setContentVideoElement(e.getContentVideoElement()),delete t._temporalSlotBase["_fw_contentVideo_"+e._instanceId]),t._videoDisplaySize=e._videoDisplaySize,t._overriddenAdRenderers=e._overriddenAdRenderers,t._currentContentPlayheadTime=e._currentContentPlayheadTime,t.startSubsession(e._adRequest._subsessionToken),t.setRequestMode(e._adRequest._requestMode),t._adRequest._compatibleDimensions=e._adRequest._compatibleDimensions,t._adRequest._keyValues=e._adRequest._keyValues,t._videoAsset._state=e._videoAsset._state,t._videoAsset._callbackTimer=e._videoAsset._callbackTimer,t._videoAsset._videoPlayPending=e._videoPlayPending,t._videoAsset._requestedVideoViewUrl=e._videoAsset._requestedVideoViewUrl,t._videoAsset._delay=e._videoAsset._delay,t._videoAsset._durationType=e._videoAsset._durationType;var n,i=e._extensionManager.extensions;for(n in i)i.hasOwnProperty(n)&&t.loadExtension(i[n]);return this._context=t},setParameter:function(e,t,n){a.debug("AdManager.setParameter("+Array.prototype.slice.call(arguments).join(",")+")"),this._context.setParameter(e,t,n)},getParameter:function(e){return this._context.getParameter(e)},submitRequest:function(e,t){a.debug("AdManager.submitRequest()"),e&&"function"==typeof e?this._onRequestComplete=e:a.warn("AdManager.submitRequest(): callback function required"),this._context.submitRequest(t/1e3)},onRequestComplete:function(e){a.debug("AdManager.onRequestComplete("+Array.prototype.slice.call(arguments).join(",")+")"),this._onRequestComplete&&(this._onRequestComplete({success:e.success,response:e.response}),this._onRequestComplete=null)},registerVideoDisplayBase:function(e){a.debug("AdManager.registerVideoDisplayBase("+Array.prototype.slice.call(arguments).join(",")+")"),this._context.registerVideoDisplayBase(e)},setVideoAsset:function(e,t){a.debug("AdManager.setVideoAsset("+Array.prototype.slice.call(arguments).join(",")+")"),this._context.setVideoAsset(e,t)},setSiteSection:function(e){a.debug("AdManager.setSiteSection("+Array.prototype.slice.call(arguments).join(",")+")"),this._context.setSiteSection(e)},addKeyValue:function(e,t){a.debug("AdManager.addKeyValue("+Array.prototype.slice.call(arguments).join(",")+")"),this._context.addKeyValue(e,t)},setVideoDisplayCompatibleSizes:function(e){a.debug("AdManager.setVideoDisplayCompatibleSizes("+Array.prototype.slice.call(arguments).join(",")+")"),this._context.setVideoDisplayCompatibleSizes(e)},playSlots:function(e,t){var n=e;a.warn("AdManager.playSlots() has DEPRECATED, use tv.freewheel.SDK.Slot.Play() instead"),a.debug("AdManager.playSlots("+e+")"),"string"==typeof e&&(n=e.toUpperCase()),this._playSlots(n,t)},_playSlots:function(e,t){var n,i=t;if("function"!=typeof i&&(i=function(){}),this._context._adResponse){var r=[];t=this._context.getTemporalSlots();for(var s=0;s<t.length;++s){var o=t[s];(Math.abs(o.getTimePosition()-e)<.1||e===o.getTimePositionClass())&&r.push(o)}if(0===r.length)a.warn("AdManager.playSlots","no slot matches",e),i();else if(e===a.TIME_POSITION_CLASS_OVERLAY)for(s=0;s<r.length;s++)!function(t){if(!t._onContentVideoTimeUpdate){var n=this._context.getContentVideoElement(),i=t._onContentVideoTimeUpdate=function(e){a.log("_onContentVideoTimeUpdate: event.type = "+e.type),!n.paused&&!0!==n._fw_videoAdPlaying&&0<=n.currentTime-t.getTimePosition()&&n.currentTime-t.getTimePosition()<1&&(n.removeEventListener("timeupdate",i,!1),t._play(function(){var e=setInterval(function(){!n.paused&&2<Math.abs(n.currentTime-t.getTimePosition())&&(n.addEventListener("timeupdate",i,!1),clearInterval(e))},1e3)}))};n.addEventListener("timeupdate",i,!1)}}(r[s]);else(n=r.shift())?n._play(i):i()}else a.warn("AdManager._playSlots","request is not completed"),i()},dispose:function(){a.debug("AdManager.dispose()"),this._context.dispose(),this._onRequestComplete=null},cloneContext:function(e){var t,n=this.newContext(),i=e._adRequest._capabilities._capabilities;for(t in i)i.hasOwnProperty(t)&&n.setCapability(t,i[t]);return n.setProfile(e._adRequest._playerProfile),n.setSiteSection(e._ss_id,e._ss_networkId,e._ss_pageViewRandom,e._ss_idType,e._ss_fallbackId),n.setVideoAsset(e._va_id,e._va_duration,e._va_networkId,e._va_location,e._va_autoPlayType,e._va_viewRandom,e._va_idType,e._va_fallbackId,e._va_durationType),n.setVisitor(e._adRequest._visitorCustomId,e._adRequest._visitorIpV4Address),n}},a.AdManager.prototype.constructor=a.AdManager,a.AdRequest=function(e){this._context=e,this._capabilities=new a.Capabilities,this._keyValues=[],this._playerProfile="",this._compatibleDimensions=null,this._temporalSlots=[],this._siteSectionId=this._siteSectionCustomId="",this._siteSectionNetworkId=0,this._siteSectionFallbackId="",this._siteSectionViewRandom=0,this._requestMode=this._visitorIpV4Address=this._visitorCustomId="",this._subsessionToken=this._requestDuration=0,this._candidateAdIds=[],this._slotScanner=new a.PageSlotScanner(e),this._urlParams={},this._urlKeyValues=[],this._customInfo="",this._gdprParams=null},a.AdRequest.prototype={setCapability:function(e,t){this._capabilities.setCapability(e,t)},addKeyValue:function(e,t){"string"!=typeof e||"string"!=typeof t||0===e.length?a.warn("AdRequest.addKeyValue:","key and value required"):(e=encodeURIComponent(e)+"="+encodeURIComponent(t),this._keyValues.indexOf(e)<0&&this._keyValues.push(e))},setProfile:function(e){"string"!=typeof e?a.warn("AdRequest.setProfile:","player profile required"):this._playerProfile=e},setVideoDisplayCompatibleSizes:function(e){if(e&&e.length){for(var t=[],n={},i=0;i<e.length;++i)if(a.debug("dimension is:",e[i].width,"X",e[i].height),0<e[i].width&&0<e[i].height){var r=e[i].width+","+e[i].height;null==n[r]&&(n[r]="",t.push(r))}0<t.length&&(this._compatibleDimensions=t.join("|"))}else a.warn("AdRequest.setVideoDisplayCompatibleSizes:","compatible dimensions required")},setSiteSection:function(e,t,n,i,r){if(e){switch(i){case a.ID_TYPE_FW:this._siteSectionId=e;break;case a.ID_TYPE_GROUP:this._siteSectionId="g"+e;break;default:this._siteSectionCustomId=e}0<1*t&&(this._siteSectionNetworkId=1*t),0<1*n&&(this._siteSectionViewRandom=1*n),"number"==typeof r&&0<r?this._siteSectionFallbackId=""+r:"string"==typeof r&&(this._siteSectionFallbackId=r.trim())}else a.warn("AdRequest.setSiteSection: id required")},setVisitor:function(e,t){"string"!=typeof e?a.warn("AdRequest.setVisitor:","customId required"):(this._visitorCustomId=e,"string"==typeof t&&""!==t&&(this._visitorIpV4Address=t))},setRequestMode:function(e){e!==a.REQUEST_MODE_ON_DEMAND&&e!==a.REQUEST_MODE_LIVE?a.warn("AdRequest.setRequestMode:","unknown mode: "+e):(this._requestMode=e,this._requestMode===a.REQUEST_MODE_LIVE&&0===this._subsessionToken&&this.setSubsessionToken(1e4*Math.random()+1))},setRequestDuration:function(e){"number"!=typeof e?a.warn("AdRequest.setRequestDuration:","request duration required"):(e<0&&(a.warn("AdRequest.setRequestDuration:","requestDuration is negative, reset it to 0"),e=0),this._requestDuration=e)},addCandidateAd:function(e){"number"!=typeof e?a.warn("AdRequest.addCandidateAd:","candidate ad ID required"):e<0?a.warn("AdRequest.addCandidateAd","invalid ad ID, ignore"):this._candidateAdIds.push(e)},addTemporalSlot:function(e,t,n,i,r,s,o,l,u){if(a.Util.isBlank(e)||a.Util.isBlank(t)||n<0)a.warn("AdRequest.addTemporalSlot:","invalid parameters");else{for(var c=0;c<this._temporalSlots.length;c++)if(this._temporalSlots[c].getCustomId()===e)return void a.warn("AdRequest.addTemporalSlot:","slot with custom Id: "+e+" is already added, ignoring the duplicate addition");(c=new a.Slot(this._context)).setCustomId(e),c.setAdUnit(t),c.setTimePosition(n),c.setSlotProfile(i),c.setCuepointSequence(1*r),c.setMaxDuration(s),c.setMinDuration(o),c.setAcceptContentType(l),c.setSignalId(u),this._temporalSlots.push(c)}},setSubsessionToken:function(e){this._subsessionToken=e},scanPageSlots:function(){this._slotScanner.scanPageSlots()},generateTypeBRequestUrl:function(){var e=this._context._adManager._serverURL.split("?"),t=e[0],n=[/fwmrm\.net$/,/fwmrm\.net\/$/,/fwmrm\.net\/ad$/,/fwmrm\.net\/ad\/$/,/fwmrm\.net\/ad\/g$/,/fwmrm\.net\/ad\/g\/$/,/fwmrm\.net\/ad\/g\/1$/];if(0===t.indexOf("http://")||0===t.indexOf("https://"))for(var i=0;i<n.length;++i)if(t.match(n[i])){t=t.slice(0,t.indexOf("fwmrm.net")+9)+"/ad/g/1";break}return this.parseQueryStr(e.slice(1).join("?")),e=this.generateGlobalParametersQueryStr()+";"+this.generateKeyValuesStr()+";",this._capabilities.getCapability(a.CAPABILITY_SKIP_AD_SELECTION)&&1===this._capabilities.getCapability(a.CAPABILITY_SKIP_AD_SELECTION)||(e+=this.generateSlotsTypeBStr()),a.Util.isBlank(this._customInfo)||(e+=";"+this._customInfo),t+"?"+e},generateVideoViewRequestUrlWithDummyContextInstanceId:function(e){this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_ON),this._context.setCapability(a.CAPABILITY_SKIP_AD_SELECTION,a.CAPABILITY_STATUS_ON);var t=this.generateTypeBRequestUrl();return t=a.Util.setParameterInURL(t,"cbfn","tv.freewheel.SDK._instanceQueue['Context_"+e+"']._videoAsset.requestComplete"),a.debug("generateVideoViewRequestUrlWithDummyContextInstanceId():"+t),this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_UNSET),this._context.setCapability(a.CAPABILITY_SKIP_AD_SELECTION,a.CAPABILITY_STATUS_UNSET),t},parseQueryStr:function(e){var t=e;if(a.debug("AdRequest.parseQueryStr("+Array.prototype.slice.call(arguments).join(",")+")"),this._urlParams={},this._urlKeyValues=[],this._customInfo="",t){var n;if(";"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),(t=t.split(";"))[0]){var i=t[0].split("&");for(n=0;n<i.length;++n){var r=i[n].split("=");2===r.length&&(this._urlParams[r[0]]=r[1])}}if(t[1])for(i=t[1].split("&"),n=0;n<i.length;++n)this._urlKeyValues.push(i[n]);t[2]&&(this._customInfo=t.slice(2).join(";"))}},generateGlobalParametersQueryStr:function(){a.debug("AdRequest.generateGlobalParametersQueryStr");var e=this._context.getParameter("wrapperVersion");e=[["prof",this._playerProfile,"string"],["nw",this._context._adManager._networkId,"number"],["caid",this._context._videoAsset._customId,"string"],["asid",this._context._videoAsset._id,"string"],["vdur",this._context._videoAsset._duration,"number"],["asnw",this._context._videoAsset._networkId,"number"],["asml",this._context._videoAsset._location,"string"],["vprn",this._context._videoAsset._viewRandom,"number"],["afid",this._context._videoAsset._fallbackId,"string"],["vdty",this._context._videoAsset._durationType,"string"],["vtpo",this._context._videoAsset._currentTpos,"number"],["csid",this._siteSectionCustomId,"string"],["ssid",this._siteSectionId,"string"],["ssnw",this._siteSectionNetworkId,"number"],["pvrn",this._siteSectionViewRandom,"number"],["sfid",this._siteSectionFallbackId,"string"],["vcid",this._visitorCustomId,"string"],["mode",this._requestMode,"string"],["vrdu",this._requestDuration,"number"],["ssto",this._subsessionToken,"number"],["cd",this._compatibleDimensions||this.detectScreenDimension(),"string"],["vclr",a.version+(e?","+e:""),"string"],["resp",a.PLATFORM_SEND_REQUEST_BY_FORM?"json2":"json","string"],["orig",window.location.protocol+"//"+window.location.host,"string"],["cbfn","tv.freewheel.SDK._instanceQueue['Context_"+this._context._instanceId+"'].requestComplete","string"],["vip",this._visitorIpV4Address,"string"],["cana",this._candidateAdIds.join(","),"string"]];for(var t=0;t<e.length;t++){var n=e[t];switch(n[2]){case"string":a.Util.isBlank(n[1])||(this._urlParams[n[0]]=encodeURIComponent(n[1]));break;case"number":0<n[1]&&(this._urlParams[n[0]]=n[1])}}for(var i in e="",this._urlParams)this._urlParams.hasOwnProperty(i)&&(e+=i+"="+this._urlParams[i]+"&");switch(e=e.substring(0,e.length-1),0<this._slotScanner._candidateAds.length&&(null==this._capabilities._capabilities[a.CAPABILITY_CHECK_COMPANION]&&this._capabilities.setCapability(a.CAPABILITY_CHECK_COMPANION,a.CAPABILITY_STATUS_ON),null==this._capabilities._capabilities[a.CAPABILITY_CHECK_TARGETING]&&this._capabilities.setCapability(a.CAPABILITY_CHECK_TARGETING,a.CAPABILITY_STATUS_OFF)),this._context._videoAsset._eventCallback||this._context._videoAsset._requestedVideoViewUrl||!this._context._videoAsset._id&&!this._context._videoAsset._customId||this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_ON),this._capabilities._capabilities[a.CAPABILITY_DISPLAY_REFRESH]&&this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_OFF),e=this._capabilities.parseCapabilities(e),this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_UNSET),this._context._videoAsset._autoPlayType){case a.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED:i="+play+uapl";break;case a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE:i="-play";break;default:i="+play-uapl"}return e.replace(/flag=/,"flag="+encodeURIComponent(i))},generateKeyValuesStr:function(){a.debug("AdRequest.generateKeyValuesStr");var e=a.Util.flashVersion();e=this._keyValues.concat(["_fw_h_x_flash_version="+encodeURIComponent(e),"_fw_dpr="+(void 0===window.devicePixelRatio?"1":window.devicePixelRatio.toFixed(2).toString())]);for(var t=0;t<this._urlKeyValues.length;t++){var n=this._urlKeyValues[t];e.indexOf(n)<0&&e.push(n)}return(t=this._context._adManager._location)&&e.push("ltlg="+encodeURIComponent(Math.round(1e4*t.coords.latitude)/1e4+","+Math.round(1e4*t.coords.longitude)/1e4)),e.join("&")},generateSlotsTypeBStr:function(){a.debug("AdRequest.generateSlotsTypeBStr");for(var e="",t=[],n=0;n<this._temporalSlots.length;n++){var i=this._temporalSlots[n];i=[["slid",i.getCustomId(),"string"],["slau",i.getAdUnit(),"string"],["ptgt","a","string"],["tpos",i.getTimePosition(),"number"],["cpsq",i.getCuepointSequence(),"number"],["envp",i.getSlotProfile(),"string"],["maxd",i.getMaxDuration(),"number"],["mind",i.getMinDuration(),"number"],["prct",i.getAcceptContentType(),"string"],["sgid",i.getSignalId(),"string"]];for(var r=[],s=0;s<i.length;s++){var o=i[s];switch(o[2]){case"string":a.Util.isBlank(o[1])||r.push(o[0]+"="+encodeURIComponent(o[1]));break;case"number":-1<["cpsq","maxd","mind"].indexOf(o[0])?0<o[1]&&r.push(o[0]+"="+o[1]):0<=o[1]&&r.push(o[0]+"="+o[1])}}t.push(r.join("&"))}return 0<t.length&&(e=t.join(";")+";"),e+this._slotScanner.slotsToTypeBStr()},detectScreenDimension:function(){return a.debug("AdRequest.detectScreenDimension:",screen.width+","+screen.height),screen.width+","+screen.height},useCMP:function(t){a.debug("AdRequest.useCMP"),this.fetchGDPRData();var n=this;setTimeout(function(){var e=n.getGDPRData();e&&(n.addKeyValue("_fw_gdpr",e._fw_gdpr.toString()),n.addKeyValue("_fw_gdpr_consent",e._fw_gdpr_consent)),n._context.submitRequest(t)},500)},fetchGDPRData:function(){a.debug("AdRequest.fetchGDPRData"),this._gdprParams={_fw_gdpr:"",_fw_gdpr_consent:""};var e=this.getTopMostWindow().__cmp;if("function"==typeof e)try{var n=this;e("getConsentData",null,function(e,t){t?(null!=(t=e.gdprApplies)?"boolean"==typeof t?n._gdprParams._fw_gdpr=t?1:0:(n._gdprParams._fw_gdpr=t.toString(),a.warn("VendorConsentData's gdprApplies value is malformed.")):a.warn("VendorConsentData's gdprApplies value is missing."),null!=(e=e.consentData)?"string"==typeof e?n._gdprParams._fw_gdpr_consent=e:(n._gdprParams._fw_gdpr_consent=e.toString(),a.warn("VendorConsentData's consentData value is malformed.")):a.warn("VendorConsentData's consentData value is missing.")):a.warn("Cannot retrieve gdpr params from CMP.")},this)}catch(e){a.warn("AdRequest.fetchGDPRData "+e.description)}else a.warn("CMP function cannot be found. _fw_gdpr: "+this._gdprParams._fw_gdpr+", _fw_gdpr_consent: "+this._gdprParams._fw_gdpr_consent)},getGDPRData:function(){return a.debug("AdRequest.getGDPR"),this._gdprParams},getTopMostWindow:function(){a.debug("AdRequest.getTopMostWindow");var e=window;try{for(;e!=top;)e.parent.location.href.length&&(e=e.parent)}catch(e){a.warn("Adrequest.getTopMostWindow "+e.description)}return e}},a.AdResponse=function(e){this._context=e},a.AdResponse.prototype={},a.AdResponse.prototype.constructor=a.AdResponse,a.Util.mixin(a.AdResponse.prototype,{parse:function(e,t){var n;this._data=e,this._temporalSlots=[],this._videoPlayerNonTemporalSlots=[],this._siteSectionNonTemporalSlots=[],this._profileParameters={},this._ads=[],this._siteSectionCustomId=a.Util.getObject("siteSection.customId",e)||"",this._adRenderers=[];var i=a.Util.getObject("parameters",e)||[];for(n=0;n<i.length;++n){var r=i[n];this._profileParameters[r.name]=r.value}for(this._adRenderers=a.Util.getObject("rendererManifest.adRenderers.adRenderer",e)||[],n=0;n<this._adRenderers.length;n++)void 0!==this._adRenderers[n].adUnit&&(this._adRenderers[n].baseUnit=this._adRenderers[n].adUnit,delete this._adRenderers[n].adUnit);for(i=a.Util.getObject("ads.ads",e)||[],n=0;n<i.length;++n)(r=new a.Ad(this._context)).parse(i[n]),this._ads.push(r);for(i=a.Util.getObject("siteSection.videoPlayer.videoAsset.adSlots",e)||[],n=0;n<i.length;++n)(r=new a.Slot(this._context)).setType(a.SLOT_TYPE_TEMPORAL),r.setBase(t),r.parse(i[n]),this._temporalSlots.push(r);for(i=a.Util.getObject("siteSection.videoPlayer.adSlots",e)||[],n=0;n<i.length;++n)(r=new a.Slot(this._context)).setType(a.SLOT_TYPE_VIDEOPLAYER_NONTEMPORAL),r.setTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY),r.parse(i[n]),this._initSlotData(r),this._videoPlayerNonTemporalSlots.push(r);for(i=a.Util.getObject("siteSection.adSlots",e)||[],n=0;n<i.length;++n)(r=new a.Slot(this._context)).setType(a.SLOT_TYPE_SITESECTION_NONTEMPORAL),r.setTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY),r.parse(i[n]),this._initSlotData(r),this._siteSectionNonTemporalSlots.push(r);e=a.Util.getObject("siteSection.videoPlayer.videoAsset",e)||{},this._context._videoAsset.parse(e)},getCreative:function(e,t){return(e=this.getAd(e))?e.getCreative(t):null},getAd:function(e){for(var t=0;t<this._ads.length;t++){var n=this._ads[t];if(n.getId()===e)return n}return null},getTemporalSlots:function(){return this._temporalSlots},getSiteSectionNonTemporalSlots:function(){return this._siteSectionNonTemporalSlots},getVideoPlayerNonTemporalSlots:function(){return this._videoPlayerNonTemporalSlots},getSiteSectionCustomId:function(){return this._siteSectionCustomId},getSlotByCustomId:function(e){for(var t=0;t<this._temporalSlots.length;++t)if(this._temporalSlots[t].getCustomId()===e)return this._temporalSlots[t];for(t=0;t<this._videoPlayerNonTemporalSlots.length;++t)if(this._videoPlayerNonTemporalSlots[t].getCustomId()===e)return this._videoPlayerNonTemporalSlots[t];for(t=0;t<this._siteSectionNonTemporalSlots.length;++t)if(this._siteSectionNonTemporalSlots[t].getCustomId()===e)return this._siteSectionNonTemporalSlots[t];return a.warn("getSlotByCustomId(): not found",e),null},_initSlotData:function(e){for(var t=!1,n=0;n<this._context._adRequest._slotScanner._knownSlots.length;n++){var i=this._context._adRequest._slotScanner._knownSlots[n];if(e.getCustomId()===i.id&&i.element){e.setWidth(i.width),e.setHeight(i.height),e.setBase(i.element),e.setAcceptCompanion(i.acceptCompanion),e.setInitialAdOption(i.initialAdOption),t=!0;break}}return t||a.warn("Failed to init slot "+e.getCustomId()),t}}),a.Capabilities=function(){this._capabilities={},this.init()},a.Capabilities.prototype={init:function(){for(var e=[a.CAPABILITY_SLOT_TEMPLATE,a.CAPABILITY_MULTIPLE_CREATIVE_RENDITIONS,a.CAPABILITY_FALLBACK_UNKNOWN_ASSET,a.CAPABILITY_FALLBACK_UNKNOWN_SITE_SECTION,a.CAPABILITY_FALLBACK_ADS,a.CAPABILITY_SLOT_CALLBACK,a.CAPABILITY_NULL_CREATIVE,a.CAPABILITY_AUTO_EVENT_TRACKING,a.CAPABILITY_RENDERER_MANIFEST],t=0;t<e.length;t++)this._capabilities[e[t]]=a.CAPABILITY_STATUS_ON},setCapability:function(e,t){this._capabilities[e]=t},getCapability:function(e){return this._capabilities[e]},parseCapabilities:function(e){var t,n="";for(t in this._capabilities)if(this._capabilities.hasOwnProperty(t)){switch(this._capabilities[t]){case a.CAPABILITY_STATUS_ON:n+="+"+t;break;case a.CAPABILITY_STATUS_OFF:n+="-"+t}e=e.replace(new RegExp("(%2B|-|\\+)"+t,"g"),"")}return n=encodeURIComponent(n),-1<e.indexOf("flag=")?e.replace(/flag=/,"flag="+n):e+"&flag="+n}},a.ContentVideoExtension=function(){this.autoSourceRestore=this.respondPauseResume=!0,this._originalTime=0,this._contentVideoControls=this._contentVideoSrc=null},a.ContentVideoExtension.prototype={_isEnabled:function(){var e=this._context.getParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED);return(null==e||!0===a.Util.str2bool(e))&&null!=this._context.getContentVideoElement()},_getBooleanParameter:function(e,t){return null==(e=this._context.getParameter(e))&&(e=t),a.Util.str2bool(e)},init:function(e){a.debug("ContentVideoExtension.init(context)"),this._context=e,this._fixContentVideoCurrentTime=a.Util.bind(this,function(e){if(a.log("_fixContentVideoCurrentTime: event = "+e.type),!(this._context.getContentVideoElement().currentTime<=0||this._context.getContentVideoElement().seekable.length<=0)&&(this._context.getContentVideoElement().removeEventListener("timeupdate",this._fixContentVideoCurrentTime,!1),0<this._context.getContentVideoElement().currentTime&&this._context.getContentVideoElement().currentTime<1&&1<this._originalTime)){a.log("ContentVideoExtension: seeking to original time",this._originalTime);try{this._context.getContentVideoElement().currentTime=this._originalTime}catch(e){a.warn("ContentVideoExtension: seek error")}}}),this._pause=a.Util.bind(this,function(e){a.log("_pause: event = "+e.type),this._isEnabled()?this._respondPauseResume()&&(a.debug("ContentVideoExtension: EVENT_CONTENT_VIDEO_PAUSE_REQUEST pausing content video",this._context.getContentVideoElement().src),this._originalTime=this._context.getContentVideoElement().currentTime,this._context.getContentVideoElement().pause()):a.debug("ContentVideoExtension: extension is not enabled, do nothing.")}),this._resume=a.Util.bind(this,function(e){a.log("_resume: event = "+e.type),this._isEnabled()?this._respondPauseResume()&&(a.debug("ContentVideoExtension: EVENT_CONTENT_VIDEO_RESUME_REQUEST resume content video",this._context.getContentVideoElement().src),!this._context._videoAsset||null!=this._context._videoAsset._state&&this._context._videoAsset._state!==a.VIDEO_STATE_COMPLETED?(a.log("ContentVideoExtension: resume content video"),this._context.getContentVideoElement().play(),a.PLATFORM_AUTO_SEEK_AFTER_MIDROLL&&!0===this._getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SEEK_BACK,!0)&&this._context.getContentVideoElement().addEventListener("timeupdate",this._fixContentVideoCurrentTime,!1)):a.warn("ContentVideoExtension: video state is uninitialized or completed, skip resume.")):a.debug("ContentVideoExtension: extension is not enabled, do nothing.")}),this._onAttach=a.Util.bind(this,function(e){if(this._isEnabled()){if(this._autoSourceRestore())switch(e.slot.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:a.debug("ContentVideoExtension: store current content video src",this._context.getContentVideoElement().src),this._contentVideoSrc=this._context.getContentVideoElement().src,this._contentVideoControls=this._context.getContentVideoElement().controls,this._context.getContentVideoElement().paused||this._context.getContentVideoElement().pause()}}else a.debug("ContentVideoExtension: extension is not enabled, do nothing.")}),this._onDetach=a.Util.bind(this,function(e){if(this._isEnabled()){if(this._autoSourceRestore())switch(e=e.slot.getTimePositionClass(),e){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:a.debug("ContentVideoExtension: restore content video src to",this._contentVideoSrc),this._context.getContentVideoElement().src!==this._contentVideoSrc&&(this._context.getContentVideoElement().src=this._contentVideoSrc),this._context.getContentVideoElement().controls=this._contentVideoControls,e===a.TIME_POSITION_CLASS_PREROLL&&this._context.getContentVideoElement().load()}}else a.debug("ContentVideoExtension: extension is not enabled, do nothing.")}),a.debug("ContentVideoExtension: enabling content video pause resume request handling."),this._context.addEventListener(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this._pause),this._context.addEventListener(a.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this._resume),a.debug("ContentVideoExtension: enabling content video source management."),this._context.addEventListener(a.EVENT_SLOT_STARTED,this._onAttach),this._context.addEventListener(a.EVENT_SLOT_ENDED,this._onDetach)},_respondPauseResume:function(){return this._getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME,!0)},_autoSourceRestore:function(){return this._getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE,!0)},dispose:function(){a.debug("ContentVideoExtension.dispose()"),this._context&&(this._context.removeEventListener(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this._pause),this._context.removeEventListener(a.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this._resume),this._context.removeEventListener(a.EVENT_SLOT_STARTED,this._onAttach),this._context.removeEventListener(a.EVENT_SLOT_ENDED,this._onDetach),this._context=null)}},a.ContentVideoExtension.prototype.constructor=a.ContentVideoExtension,a._instanceCounter=0,a._instanceQueue={},a.Context=function(e){this._adManager=e,this._eventDispatcher=new a.EventDispatcher,this._adRequest=new a.AdRequest(this),this._adResponse=null,this._videoAsset=new a.VideoAsset(this),this._temporalSlotBase=null,this._videoDisplaySize={},this._globalLevelParameterDictionary={},this._overrideLevelParameterDictionary={},this._globalLevelParameterDictionary[a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE]=!0,this._globalLevelParameterDictionary[a.PARAMETER_DISABLE_CORS_ENFORCEMENT]=!0,this._globalLevelParameterDictionary[a.PARAMETER_USE_CMP]=!0,this._rendererManifest={},this._overriddenAdRenderers=[],this._extensionManager=new a.ExtensionManager(this),this._totalSetDisplaySizeCount=this._autoSetDisplaySizeCount=this._requestState=0,this._instanceId=a._instanceCounter,a._instanceQueue["Context_"+a._instanceCounter]=this,a._instanceCounter++,this._contentVideoAttached=!1,this._currentContentPlayheadTime=0,this._ss_id="",this._ss_networkId=this._ss_pageViewRandom=0,this._ss_idType=a.ID_TYPE_CUSTOM,this._va_location=this._va_networkId=this._va_duration=this._va_id=this._ss_fallbackId="",this._va_autoPlayType=a.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED,this._va_fallbackId="",this._va_viewRandom=0,this._va_idType=a.ID_TYPE_CUSTOM,this._va_durationType=a.VIDEO_ASSET_DURATION_TYPE_EXACT,this._isRefreshRequest=!1,this._refreshSlots=[],this._adVolume=1,this._onVolumeChange=this.__onVolumeChange.bind(this),this.cmpChecked=!1},a.Context.prototype={getAdVolume:function(){return this._adVolume},setAdVolume:function(e){if(a.debug("Context.setAdVolume",e),this.getContentVideoElement())if("number"!=typeof e||e<0||1<e)a.debug("Invalid volume: "+e);else if((a.PLATFORM_IS_IPHONE_IPOD||a.PLATFORM_IS_IPAD)&&0<e&&e<1)a.debug("iOS doesn't allow volume values other than 0 and 1, ignore.");else if(e===this._adVolume)a.debug("Volume did not change, ignore.");else{this._adVolume=e,e=this.getTemporalSlots();for(var t=0;t<e.length;++t){var n=e[t];if(n.getType()===a.SLOT_TYPE_TEMPORAL&&n.getState()!==a.MediaInitState.instance&&n.getState()!==a.MediaEndState.instance&&(n=n.getCurrentAdInstance())){n.setVolume(this._adVolume);break}}}else a.debug("No video element set, ignore.")},__onVolumeChange:function(e){a.debug("Context._onVolumeChange(): event = "+e.type),a.debug("Context._onVolumeChange(): video element is muted: "+this.getContentVideoElement().muted),0!==this._adVolume||this.getContentVideoElement().muted?this.setAdVolume(this.getContentVideoElement().muted?0:this.getContentVideoElement().volume):this.setAdVolume(this.getContentVideoElement().volume)},addRenderer:function(e,t,n,i,r,a,s){this._overriddenAdRenderers.push({url:e,baseUnit:t,contentType:n,creativeApi:a,slotType:i,soAdUnit:r,parameter:s})},setCapability:function(e,t){a.debug("Context.setCapability",e,t),this._adRequest.setCapability(e,t)},addKeyValue:function(e,t){a.debug("Context.addKeyValue",e,t),this._adRequest.addKeyValue(e,t)},setParameter:function(e,t,n){if(a.debug("Context.setParameter",e,t,n),n===a.PARAMETER_LEVEL_GLOBAL)n=this._globalLevelParameterDictionary;else{if(n!==a.PARAMETER_LEVEL_OVERRIDE)return;n=this._overrideLevelParameterDictionary}null==t?delete n[e]:n[e]=t},getParameter:function(e){return e?this._overrideLevelParameterDictionary.hasOwnProperty(e)?this._overrideLevelParameterDictionary[e]:this._adResponse&&this._adResponse._profileParameters.hasOwnProperty(e)?this._adResponse._profileParameters[e]:this._globalLevelParameterDictionary.hasOwnProperty(e)?this._globalLevelParameterDictionary[e]:null:null},setVideoState:function(e){a.debug("Context.setVideoState",e),this._videoAsset.setVideoState(e)},registerVideoDisplayBase:function(e){if(a.debug("Context.registerVideoDisplayBase",e),e&&"string"==typeof e){if(this._temporalSlotBase&&this._temporalSlotBase.id===e){a.debug("Context.registerVideoDisplayBase","register the same display base, will only change size");var t=this._temporalSlotBase.getElementsByTagName("video")}else{if(this._temporalSlotBase&&this.getContentVideoElement().removeEventListener("volumechange",this._onVolumeChange),this._temporalSlotBase=document.getElementById(e),!this._temporalSlotBase)return void a.warn("Context.registerVideoDisplayBase","could not get element",e);if(0===(t=this._temporalSlotBase.getElementsByTagName("video")).length)return a.warn("Context.registerVideoDisplayBase","could not get video element from",e),void(this._temporalSlotBase=null);this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]=t[0],this.getContentVideoElement().addEventListener("volumechange",this._onVolumeChange),this._adVolume=t[0].muted?0:t[0].volume}this._setVideoDisplaySizeByContentVideo(t[0])}else a.warn("Context.registerVideoDisplayBase","id required")},setContentVideoElement:function(e){if(a.debug("Context.setContentVideoElement()"),e&&e.parentNode){var t=this._temporalSlotBase;this._temporalSlotBase=e.parentNode,this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]===e?a.debug("Context.setContentVideoElement","set the same video in same div, will only change size"):(t&&t["_fw_contentVideo_"+this._instanceId]&&t["_fw_contentVideo_"+this._instanceId].removeEventListener("volumechange",this._onVolumeChange),this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]=e,this.getContentVideoElement().addEventListener("volumechange",this._onVolumeChange),this._adVolume=this.getContentVideoElement().muted?0:this.getContentVideoElement().volume),this._setVideoDisplaySizeByContentVideo(e)}else a.warn("Context.setContentVideoElement","contentVideo and contentVideo.parentNode is required")},getContentVideoElement:function(){return this._temporalSlotBase?this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]:(a.warn("SlotBase is null"),null)},setVideoDisplaySize:function(e,t,n,i,r){a.debug("Context.setVideoDisplaySize("+Array.prototype.slice.call(arguments).join(",")+")"),this._totalSetDisplaySizeCount++,this._videoDisplaySize={left:e,top:t,width:n,height:i,position:r};for(var s=this.getTemporalSlots(),o=0;o<s.length;++o){var l=s[o];if(l.setWidth(n),l.setHeight(i),l.getState()===a.MediaPlayingState.instance||l.getState()===a.MediaReplayingState.instance){(s=l.getCurrentAdInstance())&&((s=s.getRendererController().getRenderer())&&s.resize?s.resize():a.debug("renderer do not support resize"));break}}},getVideoDisplaySize:function(){function e(e){return e=parseInt(e,10),isNaN(e)&&(e=0),e}return this._videoDisplaySize.left=e(this._videoDisplaySize.left),this._videoDisplaySize.right=e(this._videoDisplaySize.right),this._videoDisplaySize.width=e(this._videoDisplaySize.width),this._videoDisplaySize.height=e(this._videoDisplaySize.height),this._videoDisplaySize},setVideoDisplayCompatibleSizes:function(e){a.debug("Context.setVideoDisplayCompatibleSizes",e),this._adRequest.setVideoDisplayCompatibleSizes(e)},resize:function(e,t){if(a.debug("Context.resize("+Array.prototype.slice.call(arguments).join(",")+")"),!this._temporalSlotBase)return a.warn("SlotBase is null"),null;this.setVideoDisplaySize(this._videoDisplaySize.left,this._videoDisplaySize.right,e,t,this._videoDisplaySize.position)},setProfile:function(e){a.debug("Context.setProfile",e),this._adRequest.setProfile(e)},setVideoAsset:function(e,t,n,i,r,s,o,l,u){a.debug("Context.setVideoAsset("+Array.prototype.slice.call(arguments).join(",")+")"),this._videoAsset.setVideoAsset(e,t,n,i,r,s,o,l,u),this._va_id=e,this._va_duration=t,this._va_networkId=n,this._va_location=i,this._va_autoPlayType=r,this._va_viewRandom=s,this._va_idType=o,this._va_fallbackId=l,this._va_durationType=u},setVideoAssetCurrentTimePosition:function(e){a.debug("Context.setVideoAssetCurrentTimePosition("+e+")"),this._videoAsset.setVideoAssetCurrentTimePosition(e)},setSiteSection:function(e,t,n,i,r){a.debug("Context.setSiteSection("+Array.prototype.slice.call(arguments).join(",")+")"),this._adRequest.setSiteSection(e,t,n,i,r),this._ss_id=e,this._ss_networkId=t,this._ss_pageViewRandom=n,this._ss_idType=i,this._ss_fallbackId=r},setVisitor:function(e,t){a.debug("Context.setVisitor("+Array.prototype.slice.call(arguments).join(",")+")"),this._adRequest.setVisitor(e,t)},startSubsession:function(e){a.debug("Context.startSubsession("+e+")"),this._adRequest.setSubsessionToken(e)},setRequestMode:function(e){a.debug("Context.setRequestMode("+e+")"),this._adRequest.setRequestMode(e)},setRequestDuration:function(e){a.debug("Context.setRequestDuration("+e+")"),this._adRequest.setRequestDuration(e)},addCandidateAd:function(e){a.debug("Context.addCandidateAd("+e+")"),this._adRequest.addCandidateAd(e)},addTemporalSlot:function(e,t,n,i,r,s,o,l,u){a.debug("Context.addTemporalSlot("+Array.prototype.slice.call(arguments).join(",")+")"),this._adRequest.addTemporalSlot(e,t,n,i,r,s,o,l,u)},getTemporalSlots:function(){return this._adResponse?this._adResponse._temporalSlots.slice():[]},getSlotByCustomId:function(e){return this._adResponse?this._adResponse.getSlotByCustomId(e):null},getSlotsByTimePositionClass:function(e){var t,n=[];if(this._adResponse){for(t=0;t<this._adResponse._temporalSlots.length;t++)this._adResponse._temporalSlots[t].getTimePositionClass()===e&&n.push(this._adResponse._temporalSlots[t]);for(t=0;t<this._adResponse._siteSectionNonTemporalSlots.length;t++)this._adResponse._siteSectionNonTemporalSlots[t].getTimePositionClass()===e&&n.push(this._adResponse._siteSectionNonTemporalSlots[t]);for(t=0;t<this._adResponse._videoPlayerNonTemporalSlots.length;t++)this._adResponse._videoPlayerNonTemporalSlots[t].getTimePositionClass()===e&&n.push(this._adResponse._videoPlayerNonTemporalSlots[t])}return n},checkCMP:function(e){a.debug("Context.checkCMP"),this.cmpChecked=!0,this._adRequest.useCMP(e)},submitRequest:function(e){if(1==this.getParameter(a.PARAMETER_USE_CMP)&&0==this.cmpChecked)this.checkCMP(e);else if(a.debug("Context.submitRequest",l),this.dispatchEvent(a.EVENT_REQUEST_INITIATED,{}),this._requestState)a.warn("Context.submitRequest: request already submitted");else if(a.Util.isBlank(this._adManager._serverURL))a.warn("Context.submitRequest: serverURL is not set");else{if(this._requestState=1,this._adRequest.scanPageSlots(),this._isRefreshRequest){var t,n,i={};for(l=[],t=0;t<this._refreshSlots.length;t++){var r=this._refreshSlots[t];if(void 0!==this._adRequest._slotScanner._slots[r]){i[r]=this._adRequest._slotScanner._slots[r];var s=i[r].split("&");for(n=0;n<s.length;n++)-1!==s[n].search("flag")&&(s[n]="flag=-cmpn");i[r]=s.join("&")}for(n=0;n<this._adRequest._slotScanner._knownSlots.length;n++)this._adRequest._slotScanner._knownSlots[n].id===r&&((s=this._adRequest._slotScanner._knownSlots[n]).acceptCompanion=!1,s.initialAdOption=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,l.push(s))}this._adRequest._slotScanner._slots=i,this._adRequest._slotScanner._knownSlots=l}this.getParameter(a.PARAMETER_ENABLE_FORM_TRANSPORT)&&(a.debug("Context.submitRequest: enabling Safari transport mechanism globally"),a.PLATFORM_SEND_REQUEST_BY_FORM=!0),".js"!==(i=this._adManager._serverURL).substring(i.length-3,i.length)&&(i=this._adRequest.generateTypeBRequestUrl());var o=this,l=e;("number"!=typeof l||l<=0||!l)&&(l=5),setTimeout(function(){1===o._requestState&&(a.warn("Context.submitRequest: request timeout"),o.requestComplete(null))},1e3*l),a.log("Context.submitRequest: sending request to",i,"timeout",l),a.PLATFORM_SEND_REQUEST_BY_FORM?(a.debug("Context.submitRequest:","use json2"),a.Util.pingURLWithForm(i,this._instanceId,!0),o._onMessagePosted=function(e){"object"==typeof e.data&&e.data.hasOwnProperty("cbfn")&&-1<e.data.cbfn.indexOf("['Context_"+o._instanceId+"']")&&o.requestComplete(e.data.response)},window.addEventListener("message",o._onMessagePosted,!1)):a.Util.pingURLWithScript(i)}},requestComplete:function(e){if(1!==this._requestState)a.warn("ad request complete after timeout"),this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!1});else{if(this._requestState=2,a.debug("Context.requestComplete"),a.PLATFORM_SEND_REQUEST_BY_FORM){window.removeEventListener("message",this._onMessagePosted,!1);var t=document.getElementById("_fw_request_iframe_"+this._instanceId);document.body.removeChild(t)}if(null!=e){a._instanceQueue["Context_"+this._instanceId]=null,this._adResponse=new a.AdResponse(this),this._adResponse.parse(e,this._temporalSlotBase),a.log("Ad request succeeded"),t=(this._adResponse._profileParameters.autoloadExtensions||"").split(",");for(var n=0;n<t.length;n++){var i=t[n].trim();a.log("Loading extension: "+i),this.loadExtension(i)}for(this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!0,response:e}),t=this._adResponse.getSiteSectionNonTemporalSlots(),e=0;e<t.length;++e)a.log("Auto play site section nonTemporal slots"),t[e].play();for(t=this._adResponse.getVideoPlayerNonTemporalSlots(),e=0;e<t.length;++e)a.log("Auto play video player nonTemporal slots"),t[e].play()}else a.warn("Ad request failed"),this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!1})}},addEventListener:function(e,t){a.debug("Context.addEventListener",e),this._eventDispatcher.addEventListener(e,t)},removeEventListener:function(e,t){a.debug("Context.removeEventListener",e),this._eventDispatcher.removeEventListener(e,t)},dispatchEvent:function(e,t){if(a.log("Context.dispatchEvent",e),e===a.EVENT_SLOT_STARTED){var n=t.slot.getTimePositionClass();n!==a.TIME_POSITION_CLASS_PREROLL&&n!==a.TIME_POSITION_CLASS_MIDROLL&&n!==a.TIME_POSITION_CLASS_POSTROLL||(this._contentVideoAttached=!0,this._markCurrentContentPlayheadTime())}else e===a.EVENT_SLOT_ENDED&&((n=t.slot.getTimePositionClass())===a.TIME_POSITION_CLASS_PREROLL||n===a.TIME_POSITION_CLASS_MIDROLL||n===a.TIME_POSITION_CLASS_POSTROLL)&&(this._contentVideoAttached=!1);(t=t||{}).type=e,(t.target=this)._eventDispatcher.dispatchEvent(t)},dispose:function(){if(a.debug("Context.dispose"),this.setVideoState(a.VIDEO_STATE_STOPPED),this._adResponse){if(this._temporalSlotBase){for(var e=0,t=this._adResponse._temporalSlots||[];e<t.length;++e){var n=t[e];if(n._onContentVideoTimeUpdate){var i=this._temporalSlotBase["_fw_contentVideo_"+this._instanceId];i&&i.removeEventListener("timeupdate",n._onContentVideoTimeUpdate,!1),n._onContentVideoTimeUpdate=null}}this.getContentVideoElement().removeEventListener("volumechange",this._onVolumeChange),this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]=null}this._isRefreshRequest=!1,this._refreshSlots=[],this._extensionManager.dispose(),this._extensionManager=null}},loadExtension:function(e){this._extensionManager.load(e,this)},_markCurrentContentPlayheadTime:function(){var e=this._temporalSlotBase["_fw_contentVideo_"+this._instanceId].currentTime;0<e&&(this._currentContentPlayheadTime=e)},_getContentPlayheadTime:function(){var e=-1;return!this._contentVideoAttached&&this._temporalSlotBase&&this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]&&(e=this._temporalSlotBase["_fw_contentVideo_"+this._instanceId].currentTime),0<e?e:this._currentContentPlayheadTime},_requestContentVideoToPauseBySlot:function(e){this._videoAsset.requestPauseBySlot(e)},_requestContentVideoToResumeBySlot:function(e){this._videoAsset.requestResumeBySlot(e)},_setVideoDisplaySizeByContentVideo:function(e){if(this._autoSetDisplaySizeCount===this._totalSetDisplaySizeCount){var t=e.style.left,n=e.style.top,i=e.offsetWidth?e.offsetWidth:e.style.pixelWidth,r=e.offsetHeight?e.offsetHeight:e.style.pixelHeight;e=e.style.position,this._autoSetDisplaySizeCount++,this.setVideoDisplaySize(t,n,i,r,e)}},_replacePageSlot:function(b,c){var d;a.debug("fw replace %s",b);try{var e=document.getElementById(b)?document:parent.document.getElementById(b)?parent.document:null,f=document.getElementById(b)?"window":parent.document.getElementById(b)?"parent":null}catch(t){f=e=null}if(!e)for(var g=0;g<window.frames.length;g++)try{window.frames[g].document.getElementById(b)&&(e=window.frames[g].document,f="window.frames["+g+"]")}catch(e){a.debug(e)}if(f&&(d=f+".document"),a.debug("fw replacing slot %s in frame %s",b,d),!e)throw"Slot element not found: "+b;g=e.getElementById("_fw_container_"+b),g.innerHTML=c,c=g.getElementsByTagName("script");var h=e.getElementsByTagName("head")[0];for(g=0;g<c.length;++g)if(a.PLATFORM_IS_FIREFOX||c[g].src){var k=e.createElement("script");c[g].charset&&(k.charset=c[g].charset),c[g].src&&(k.src=c[g].src),c[g].innerHTML&&(k.innerHTML=c[g].innerHTML),k.onload=k.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||h.removeChild(k)},a.debug("fw append script for %s",b),h.appendChild(k)}else k=c[g].innerHTML,k=k.replace(/var fw_scope = document;/,"var fw_scope="+d+";"),k=k.replace(/var fw_scope_window = window;/,"var fw_scope_window="+f+";"),a.debug("fw eval in %s for %s, %s",d,b,k),eval(k);a.debug("fw finish replace %s",b)}},a.Context.prototype.constructor=a.Context,a.DisplayRefreshExtension=function(){this.REFRESH_TYPE_NONE="refresh_none",this.REFRESH_TYPE_AD="refresh_ad",this.REFRESH_TYPE_TIME="refresh_time",this.REPLACE_TYPE_NONE="replace_none",this.REPLACE_TYPE_BLANK="replace_blank",this.REPLACE_TYPE_AD="replace_ad",this._subContext=null,this._displaySlots=[],this._companionSlots=[],this._keyValues=[],this._globalParameters=[],this._overrideParameters=[],this._refreshType=this.REFRESH_TYPE_NONE,this._replaceType=this.REPLACE_TYPE_NONE,this._refreshInterval=0,this._refreshTimer=null,this._firstTemporalAd=!0,this._REQUEST_TIME_OUT=5},a.DisplayRefreshExtension.prototype={init:function(e){this._context=e,a.debug("DisplayRefreshExtension.init(context)"),this._onRendererEvent=a.Util.bind(this,function(e){a.debug("DisplayRefreshExtension._onRendererEvent()"),e.subType===a.EVENT_AD_IMPRESSION&&this._onAdStarted(e)}),this._onSlotEnded=a.Util.bind(this,function(e){var t=e.slot.getTimePositionClass();if(e=e.slot,a.debug("DisplayRefreshExtension._onSlotEnded()",e,t),null!=e&&t!==a.TIME_POSITION_CLASS_DISPLAY&&0!==e.getAdInstances().length)if(this._refreshType===this.REFRESH_TYPE_AD)this._resetSubContext(),this._refreshSlots(this._displaySlots);else if(this._refreshType===this.REFRESH_TYPE_TIME){this._resetSubContext(),this._refreshSlots(this._displaySlots);var n=this;this._refreshTimer=setInterval(function(){a.debug("DisplayRefreshExtension._onTimeout()"),n._resetSubContext(),n._refreshSlots(n._displaySlots)},1e3*this._refreshInterval)}}),this._onRequestComplete=a.Util.bind(this,function(e){if(a.debug("DisplayRefreshExtension._onRequestComplete()"),e.success){switch(this._context.getParameter("refreshType")){case"ad":this._refreshType=this.REFRESH_TYPE_AD;break;case"time":this._refreshInterval=this._context.getParameter("refreshInterval"),this._refreshType=0<this._refreshInterval?this.REFRESH_TYPE_TIME:this.REFRESH_TYPE_NONE;break;default:this._refreshType=this.REFRESH_TYPE_NONE}switch(this._context.getParameter("replaceMissingCompanion")){case"blank":this._replaceType=this.REPLACE_TYPE_BLANK;break;case"ad":this._replaceType=this.REPLACE_TYPE_AD;break;default:this._replaceType=this.REPLACE_TYPE_NONE}if(this._refreshType!==this.REFRESH_TYPE_NONE||this._replaceType!==this.REPLACE_TYPE_NONE){if(this._displaySlots=this._context.getSlotsByTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY),this._companionSlots=this._displaySlots.filter(function(e){return e.getAcceptCompanion()}),this._keyValues=this._context._adRequest._keyValues,this._globalParameters=this._context._globalLevelParameterDictionary,this._overrideParameters=this._context._overrideLevelParameterDictionary,this._firstTemporalAd=!0,this._context.addEventListener(a.EVENT_AD,this._onRendererEvent),this._context.addEventListener(a.EVENT_SLOT_ENDED,this._onSlotEnded),this._refreshType===this.REFRESH_TYPE_TIME){var t=this;this._refreshTimer=setInterval(function(){a.debug("DisplayRefreshExtension._onTimeout()"),t._resetSubContext(),t._refreshSlots(t._displaySlots)},1e3*this._refreshInterval)}}else this._refreshTimer&&clearInterval(this._refreshTimer)}else a.debug("DisplayRefreshExtension: request complete failed")}),this._context.addEventListener(a.EVENT_REQUEST_COMPLETE,this._onRequestComplete)},_resetSubContext:function(){a.debug("DisplayRefreshExtension._resetSubContext()"),this._subContext=this._context._adManager.cloneContext(this._context),this._subContext._extensionManager._displayRefreshExtension.dispose(),this._subContext._extensionManager._videoStateExtension.dispose(),this._subContext.setCapability(a.CAPABILITY_SLOT_TEMPLATE,a.CAPABILITY_STATUS_OFF),this._subContext.setCapability(a.CAPABILITY_DISPLAY_REFRESH,a.CAPABILITY_STATUS_ON),this._playRefreshedSlots=a.Util.bind(this,function(e){if(a.debug("DisplayRefreshExtension._playRefreshedSlots()"),e.success){e=this._subContext.getSlotsByTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY);for(var t=0;t<e.length;t++)e[t].play()}else a.debug("DisplayRefreshExtension._playRefreshedSlots(): subContext refresh request error:",e)}),this._subContext.addEventListener(a.EVENT_REQUEST_COMPLETE,this._playRefreshedSlots);for(var e=this._subContext._adRequest._keyValues,t=0;t<this._keyValues.length;t++)e.indexOf(this._keyValues[t])<0&&e.push(this._keyValues[t]);for(var n in this._globalParameters)this._globalParameters.hasOwnProperty(n)&&this._subContext.setParameter(n,this._globalParameters[n],a.PARAMETER_LEVEL_GLOBAL);for(n in this._overrideParameters)this._overrideParameters.hasOwnProperty(n)&&this._subContext.setParameter(n,this._overrideParameters[n],a.PARAMETER_LEVEL_OVERRIDE)},_onAdStarted:function(e){a.debug("DisplayRefreshExtension._onAdStarted()");var t=e.adInstance.getSlot();if(a.debug("DisplayRefreshExtension._onAdStarted(): slot: ",t," | timePositionClass:",t.getTimePositionClass()),null!=t&&t.getTimePositionClass()!==a.TIME_POSITION_CLASS_DISPLAY&&(this._resetSubContext(),this._refreshTimer&&clearInterval(this._refreshTimer),this._replaceType!==this.REPLACE_TYPE_NONE)){e=e.adInstance,t=t.getAdInstances();for(var n=0;n<t.length;n++)e.getAdId()===t[n].getAdId()&&this._checkMissingCompanionForAd(e)}},_checkMissingCompanionForAd:function(e){a.debug("DisplayRefreshExtension._checkMissingCompanionForAd()",e);var t,n=this._companionSlots.slice();for(e=e.getCompanionAdInstances(),t=0;t<e.length;t++){var i=n.indexOf(e[t].getSlot());-1<i&&n.splice(i,1)}if(this._firstTemporalAd&&(this._firstTemporalAd=!1,n=n.filter(function(e){if(e.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_ONLY&&e.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_STAND_ALONE&&e.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_THEN_STAND_ALONE&&e.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE&&e.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE_IF_TEMPORAL)return a.debug("DisplayRefreshExtension._checkMissingCompanionForAd(): firstCompanionAsInitial false in slot ",e.getCustomId()),!0;for(var t=e.getAdInstances(),n=0;n<t.length;n++)if(!t[n].isPlaceholder())return a.debug("DisplayRefreshExtension._checkMissingCompanionForAd(): first companion found in slot ",e.getCustomId()),!1;return a.debug("DisplayRefreshExtension._checkMissingCompanionForAd(): firstCompanionAsInitial true, no ad in slot ",e.getCustomId()),!0})),this._replaceType===this.REPLACE_TYPE_BLANK)for(t=0;t<n.length;t++)n[t].stop(),this._subContext._replacePageSlot(n[t].getCustomId(),"");else this._replaceType===this.REPLACE_TYPE_AD&&this._refreshSlots(n)},_refreshSlots:function(e){if(a.debug("DisplayRefreshExtension._refreshSlots()",e),null!=e&&0!==e.length){for(var t=0;t<e.length;t++)e[t].stop(),this._subContext._refreshSlots.push(e[t].getCustomId());this._subContext._isRefreshRequest=!0,this._subContext.submitRequest(this._REQUEST_TIME_OUT)}},dispose:function(){a.debug("DisplayRefreshExtension.dispose()"),this._context&&(this._context.removeEventListener(a.EVENT_REQUEST_COMPLETE,this._onRequestComplete),this._context.removeEventListener(a.EVENT_SLOT_ENDED,this._onSlotEnded),this._context.removeEventListener(a.EVENT_AD,this._onRendererEvent),this._context=null),this._subContext&&(this._subContext.removeEventListener(a.EVENT_REQUEST_COMPLETE,this._playRefreshedSlots),this._subContext=null),this._displaySlots=[],this._companionSlots=[],this._keyValues=[],this._globalParameters=[],this._overrideParameters=[],this._refreshType=this.REFRESH_TYPE_NONE,this._replaceType=this.REPLACE_TYPE_NONE,this._refreshInterval=0,this._refreshTimer&&clearInterval(this._refreshTimer),this._refreshTimer=null,this._firstTemporalAd=!0}},a.DisplayRefreshExtension.prototype.constructor=a.DisplayRefreshExtension,a.EventCallback=function(e){this._url=this._name=this._type=null,this._showBrowser=!1,this._trackingUrls=[],this._adInstance=this._slot=null,this._context=e},a.EventCallback.prototype={},a.EventCallback.prototype.constructor=a.EventCallback,a.EventCallback.getEventCallback=function(e,t,n){for(var i,r=0;r<e.length;r++)if((i=e[r])._name===t&&i._type===n)return i;for(r=0;r<e.length;r++)if((i=e[r])._type===a.EVENT_TYPE_GENERIC)return(t=a.EventCallback.newEventCallback(i._context,t,n))&&(t._url=i._url,t._slot=i._slot,t._adInstance=i._adInstance,e.push(t)),t;return null},a.EventCallback.newEventCallback=function(e,t,n){if(n===a.EVENT_TYPE_GENERIC)e=new a.EventCallback(e);else if(n===a.EVENT_TYPE_ERROR)e=new a.ErrorEventCallback(e);else if(n===a.EVENT_TYPE_CLICK)e=new a.AdClickEventCallback(e);else if(n===a.EVENT_TYPE_STANDARD)e=new a.AdStandardEventCallback(e);else if(t===a.EVENT_SLOT_IMPRESSION||t===a.EVENT_SLOT_END)e=new a.SlotImpressionEventCallback(e);else if(t===a.EVENT_AD_IMPRESSION||t===a.EVENT_AD_IMPRESSION_END)e=new a.AdImpressionEventCallback(e);else if(t===a.EVENT_VIDEO_VIEW)e=new a.VideoViewEventCallback(e);else if(t===a.EVENT_RESELLER_NO_AD)e=new a.ResellerNoAdEventCallback(e);else{if(t!==a.EVENT_AD_FIRST_QUARTILE&&t!==a.EVENT_AD_MIDPOINT&&t!==a.EVENT_AD_THIRD_QUARTILE&&t!==a.EVENT_AD_COMPLETE)return null;e=new a.AdQuartileEventCallback(e)}return e._name=t,e._type=n,e},a.EventCallback.getShortType=function(e){var t="";switch(e){case a.EVENT_TYPE_IMPRESSION:t=a.SHORT_EVENT_TYPE_IMPRESSION;break;case a.EVENT_TYPE_CLICK:t=a.SHORT_EVENT_TYPE_CLICK;break;case a.EVENT_TYPE_STANDARD:t=a.SHORT_EVENT_TYPE_STANDARD;break;case a.EVENT_TYPE_ERROR:t=a.SHORT_EVENT_TYPE_ERROR}return t},a.Util.mixin(a.EventCallback.prototype,{parse:function(e){if(e){this._usage=e.use,this._type=e.type,this._name=e.name,this._url=e.url,this._showBrowser=e.showBrowser,this._trackingUrls=[];var t=0;for(e=e.trackingUrls||[];t<e.length;t++)this._trackingUrls.push(e[t].value)}},copy:function(){var e=new this.constructor(this._context);return e._type=this._type,e._name=this._name,e._url=this._url,e._showBrowser=this._showBrowser,e._trackingUrls=this._trackingUrls.slice(),e._slot=this._slot,e._adInstance=this._adInstance,e},getUrl:function(e){var t=this._replaceMacrosInUrl(this._url,e);return t=this._name===a.EVENT_AD_MEASUREMENT?(t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_ET,a.SHORT_EVENT_TYPE_IMPRESSION),a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CONCRETE_EVENT_ID,e[a.INFO_KEY_CONCRETE_EVENT_ID])):a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_ET,a.EventCallback.getShortType(this._type)),t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CN,this._name),this._adInstance&&0<this._adInstance._creativeRenditionId&&(t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CREATIVE_RENDITION_ID,this._adInstance._creativeRenditionId)),t},getTrackingUrls:function(e){var t=this._trackingUrls;if(this._adInstance){var n=this._type;n===a.EVENT_TYPE_CLICK&&(n=a.EVENT_TYPE_CLICK_TRACKING),t=t.concat(this._adInstance.getExternalEventCallbackUrls(this._name,n))}n=[];for(var i=0;i<t.length;i++){var r=a.Util.trim(this._replaceMacrosInUrl(t[i],e));a.Util.isBlank(r)||n.push(r)}return n},process:function(e){e=e||{},this._processTrackingUrls(e),a.Util.pingURL(this.getUrl(e))},_processTrackingUrls:function(e){this._shouldSkipSendingTrackingAndExternalUrls()||a.Util.pingURLs(this.getTrackingUrls(e))},_shouldSkipSendingTrackingAndExternalUrls:function(){return!1},_needEmptyCT:function(e){var t=!1;return e&&!0===e[a.INFO_KEY_NEED_EMPTY_CT]&&(t=!0),t},_getAdPlayheadTime:function(){var e=-1;return this._adInstance&&(e=this._adInstance.getPlayheadTime()),e},_getCreativeAssetLocation:function(){var e=null;return this._adInstance&&this._adInstance.getActiveCreativeRendition()&&this._adInstance.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset()&&(e=this._adInstance.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset().getUrl()),e},_getParameter:function(e){return this._adInstance?this._adInstance._rendererController.getParameter(e):this._slot?this._slot.getParameter(e):this._context.getParameter(e)},_replaceVASTMacro:function(e,t,n){return a.log("replace VAST Macro: url=",e+", macro="+t+", value="+n),e&&t&&(n=encodeURIComponent(n||""),e=(e=e.replace("["+t+"]",n)).replace("%5B"+t+"%5D",n)),e},_replaceMacrosInUrl:function(t,e){if(a.Util.isBlank(t))return t;e&&e[a.INFO_KEY_VAST_ERROR_CODE]&&(t=this._replaceVASTMacro(t,"ERRORCODE",e[a.INFO_KEY_VAST_ERROR_CODE])),this._getCreativeAssetLocation()&&(t=this._replaceVASTMacro(t,"ASSETURI",this._getCreativeAssetLocation()));var i=this._context._getContentPlayheadTime();this._adInstance&&(e=null!=i&&0<=Number(i)?a.Util.secondsToHms(i):"",t=this._replaceVASTMacro(t,"CONTENTPLAYHEAD",e),t=this._replaceVASTMacro(t,"CACHEBUSTING",a.Util.getFixedDigitRandomNumber(8)),t=this._replaceVASTMacro(t,"TIMESTAMP",a.Util.getDateStringInISOFormat(new Date))),t=t.replace(/#(ce?)\{([^\}]+)\}/g,a.Util.bind(this,function(e,t,n){switch(a.log("matchedSubString"+e),e="ce"===t,t=null,n){case"ad.playheadTime":t=0<=(n=this._getAdPlayheadTime())?Math.round(n)+"":"";break;case"content.playheadTime":t=0<=i?Math.round(i)+"":"";break;case"creative.assetLocation":t=this._getCreativeAssetLocation();break;default:0===n.indexOf("parameter.")&&(t=this._getParameter(n.substr(10)))}return a.Util.isBlank(t)&&(t=""),e?encodeURIComponent(t):t})),e="";try{e=a.Util.getParameterInURL(t,a.URL_PARAMETER_KEY_CR)}catch(e){return a.warn(e),t}return a.Util.isBlank(e)||(t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CR,this._replaceMacrosInUrl(e))),t}}),a.AdClickEventCallback=function(e){a.EventCallback.call(this,e)},a.AdClickEventCallback.prototype=new a.EventCallback,a.AdClickEventCallback.prototype.constructor=a.AdClickEventCallback,a.Util.mixin(a.AdClickEventCallback.prototype,{getUrl:function(e){var t=a.EventCallback.prototype.getUrl.call(this,e);return e[a.INFO_KEY_URL]&&(a.Util.isParameterInURL(t,a.URL_PARAMETER_KEY_CR)||(t=t+"&"+a.URL_PARAMETER_KEY_CR+"="),t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CR,e[a.INFO_KEY_URL])),t},process:function(e){e=e||{};var t=this.getUrl(e),n=!0===this._showBrowser;n=e.hasOwnProperty(a.INFO_KEY_SHOW_BROWSER)?!0===e[a.INFO_KEY_SHOW_BROWSER]:n,e[a.INFO_KEY_URL]&&(n=!0),n&&!a.Util.isBlank(t)?(window.open(t),this._processTrackingUrls(e)):a.EventCallback.prototype.process.call(this,e)}}),a.AdImpressionEventCallback=function(e){a.EventCallback.call(this,e)},a.AdImpressionEventCallback.prototype=new a.EventCallback,a.AdImpressionEventCallback.prototype.constructor=a.AdImpressionEventCallback,a.Util.mixin(a.AdImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:function(){return this._getInitValue()!==a.INIT_VALUE_ONE},_getInitValue:function(){return this._adInstance.getSlot().isPauseSlot()||!this._processed?a.INIT_VALUE_ONE:a.INIT_VALUE_TWO},getUrl:function(e){var t=a.EventCallback.prototype.getUrl.call(this,e);return t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_METR,this._adInstance._metr),this._name!==a.EVENT_AD_IMPRESSION&&(t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CT,this._needEmptyCT(e)?"":this._adInstance._timer.tick())),a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_INIT,this._getInitValue())},process:function(e){a.MODULE_TYPE_TRANSLATOR!==this._adInstance.getRendererController().getRenderer().info()[a.INFO_KEY_MODULE_TYPE]&&(a.EventCallback.prototype.process.call(this,e),this._processed=!0)}}),a.AdQuartileEventCallback=function(e){a.EventCallback.call(this,e)},a.AdQuartileEventCallback.prototype=new a.EventCallback,a.AdQuartileEventCallback.prototype.constructor=a.AdQuartileEventCallback,a.Util.mixin(a.AdQuartileEventCallback.prototype,{getUrl:function(e){var t=a.EventCallback.prototype.getUrl.call(this,e);return t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_METR,this._adInstance._metr),a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CT,this._needEmptyCT(e)?"":this._adInstance._timer.tick())},process:function(e){this._processed||(a.EventCallback.prototype.process.call(this,e),this._processed=!0)}}),a.AdStandardEventCallback=function(e){a.EventCallback.call(this,e)},a.AdStandardEventCallback.prototype=new a.EventCallback,a.AdStandardEventCallback.prototype.constructor=a.AdStandardEventCallback,a.ErrorEventCallback=function(e){a.EventCallback.call(this,e)},a.ErrorEventCallback.prototype=new a.EventCallback,a.ErrorEventCallback.prototype.constructor=a.ErrorEventCallback,a.Util.mixin(a.ErrorEventCallback.prototype,{getUrl:function(e){var t=a.EventCallback.prototype.getUrl.call(this,e),n=e[a.INFO_KEY_ERROR_CODE];n||(n=a.ERROR_UNKNOWN);var i=e[a.INFO_KEY_ERROR_INFO];return i||(i=""),(e=e[a.INFO_KEY_ERROR_MODULE])||(e=""),t=a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_CN,n),a.Util.setParameterInURL(t,a.URL_PARAMETER_KEY_KEY_VALUE,encodeURIComponent(a.URL_PARAMETER_KEY_ERROR_MODULE)+"="+encodeURIComponent(e)+"&"+encodeURIComponent(a.URL_PARAMETER_KEY_ERROR_INFO)+"="+a.PLATFORM_ID+"/"+encodeURIComponent(i))}}),a.ResellerNoAdEventCallback=function(e){a.EventCallback.call(this,e)},a.ResellerNoAdEventCallback.prototype=new a.EventCallback,a.ResellerNoAdEventCallback.prototype.constructor=a.ResellerNoAdEventCallback,a.Util.mixin(a.ResellerNoAdEventCallback.prototype,{}),a.SlotImpressionEventCallback=function(e){a.EventCallback.call(this,e)},a.SlotImpressionEventCallback.prototype=new a.EventCallback,a.SlotImpressionEventCallback.prototype.constructor=a.SlotImpressionEventCallback,a.Util.mixin(a.SlotImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:function(){return this._getInitValue()!==a.INIT_VALUE_ONE},_getInitValue:function(){return this._slot.isPauseSlot()||!this._processed?a.INIT_VALUE_ONE:a.INIT_VALUE_TWO},getUrl:function(e){return e=a.EventCallback.prototype.getUrl.call(this,e),a.Util.setParameterInURL(e,a.URL_PARAMETER_KEY_INIT,this._getInitValue())},process:function(e){a.EventCallback.prototype.process.call(this,e),this._processed=!0}}),a.VideoViewEventCallback=function(e){a.EventCallback.call(this,e)},a.VideoViewEventCallback.prototype=new a.EventCallback,a.VideoViewEventCallback.prototype.constructor=a.VideoViewEventCallback,a.Util.mixin(a.VideoViewEventCallback.prototype,{_getInitValue:function(){return this._processed?a.INIT_VALUE_ZERO:a.INIT_VALUE_ONE},_getCTValue:function(){return this._context._videoAsset.getPlayheadTime()},getUrl:function(e){return e=a.EventCallback.prototype.getUrl.call(this,e),e=a.Util.setParameterInURL(e,a.URL_PARAMETER_KEY_INIT,this._getInitValue()),a.Util.setParameterInURL(e,a.URL_PARAMETER_KEY_CT,this._getCTValue())},_shouldSkipSendingTrackingAndExternalUrls:function(){return this._processed},process:function(e){a.EventCallback.prototype.process.call(this,e),this._processed=!0}}),a.EventDispatcher=function(){this._listeners={}},a.EventDispatcher.prototype={addEventListener:function(e,t){void 0===this._listeners[e]&&(this._listeners[e]=[]),this._listeners[e].push(t)},dispatchEvent:function(t){if("string"==typeof t&&(t={type:t}),t.target||(t.target=this),t.type&&this._listeners[t.type]instanceof Array)for(var e=this._listeners[t.type],n=0,i=e.length;n<i;n++)try{e[n]&&e[n].call(this,t)}catch(e){a.warn("EventDispatcher.dispatchEvent",t.type,e)}},removeEventListener:function(e,t){if(this._listeners[e]instanceof Array){var n=this._listeners[e];if(null==t)this._listeners[e]=[];else{e=0;for(var i=n.length;e<i;e++)if(n[e]===t){n.splice(e,1);break}}}}},a.EventDispatcher.prototype.constructor=a.EventDispatcher,a.ExtensionManager=function(e){this._extensions={},this._context=e,this._surveyExtension=new a.SurveyExtension,this._surveyExtension.init(e),this._videoStateExtension=new a.VideoStateExtension,this._videoStateExtension.init(e),this._displayRefreshExtension=new a.DisplayRefreshExtension,this._displayRefreshExtension.init(e),this._contentVideoExtension=new a.ContentVideoExtension,this._contentVideoExtension.init(e)},a.ExtensionManager.prototype={_scriptLoaded:function(e){if(null==this._extensions[e])this._loadFail(e,"Extension supposed to be loaded but not found");else{var t=a.Util.getObject(e);"function"!=typeof t?this._loadFail(e,"Script loaded but extension class not found"):"function"==typeof(t=new t).init&&"function"==typeof t.dispose?(a.log("Extension loaded: "+e),t.init(this._context),this._context.dispatchEvent(a.EVENT_EXTENSION_LOADED,{success:!0,moduleName:e})):this._loadFail(e,"Extension loaded but is not supported")}},_getExtensionNameFromUrl:function(e){for(var t,n,i=/(?!.*\.{2})(?:[\\/\?=#])([a-z][\w\.]+)(?:\.js(#|\?|$))/gi;null!=(t=i.exec(e));)n=t;return n?n[1]:null},_loadFail:function(e,t){a.log("Extension failed to load. "+e+" : "+t),this._context.dispatchEvent(a.EVENT_EXTENSION_LOADED,{success:!1,errorVal:t,moduleName:e})},load:function(e){if(e){var t=this._getExtensionNameFromUrl(e);if(null==t)this._loadFail(t,"Extension name not exsit in the Url. Url: "+e);else if(this._extensions[t]===e)a.log("Extension is already loaded"),this._loadFail(t,"Extension is already loaded");else{var n=1*this._context.getParameter("moduleLoadTimeout")||6e4,i=!1,r=this,s=window.setTimeout(function(){i=!0,r._loadFail(t,"Timeout occured while loading extension. Url: "+e)},n);a.Util.lazyJavaScriptLoad(e,function(){a.log("async load extension successful, URL:"+e),window.clearTimeout(s),i?(a.debug("Extension loaded after timeout, do nothing."),r._loadFail(t,"Timeout occured while loading extension. Url: "+e)):(r._extensions[t]=e,r._scriptLoaded(t))})}}else this._loadFail(t,"Url cannot be empty")},dispose:function(){this._extensions=null,this._surveyExtension.dispose(),this._surveyExtension=null,this._displayRefreshExtension.dispose(),this._displayRefreshExtension=null,this._videoStateExtension.dispose(),this._videoStateExtension=null,this._contentVideoExtension.dispose(),this._context=this._contentVideoExtension=null}},a.ExtensionManager.prototype.constructor=a.ExtensionManager,a.HTMLAdGenerator={log:function(e){a.log("HTMLAdGenerator\t"+e)},getExtension:function(e){return e&&(e=e.match(/^[^?]+\/[^?.]*(\.\w+)+/))?e[e.length-1].slice(1):""},generateAd:function(e,t,n,i,r,s,o){a.HTMLAdGenerator.log("generatorAd("+[].slice.call(arguments,0).join(",")+")");var l=s,u=!1;switch(null==l&&(u=!0,l=a.HTMLAdGenerator.getExtension(e).toLowerCase()),l){case"jpeg":case"jpg":case"gif":case"png":case"image/jpeg":case"image/jpg":case"image/gif":case"image/png":case"image/bmp":l=a.HTMLAdGenerator.generateImageHTML(e,t);break;case"swf":case"application/x-shockwave-flash":l=a.HTMLAdGenerator.generateFlashHTML(e,t,n,i,r);break;case"script":case"js":case"text/javascript":case"text/js_ref":case"application/x-javascript":l=a.HTMLAdGenerator.generateScriptHTML(e,n,i,r);break;case"iframe":case"html":case"htm":case"text/html":case"text/html_doc_ref":case"text/html_lit_nowrapper":case"text/html_doc_lit_mobile":l=a.HTMLAdGenerator.generateIFrameHTML(e,t,n,i,r);break;default:l=u?a.HTMLAdGenerator.generateIFrameHTML(e,t,n,i,r):a.HTMLAdGenerator.generateAd(e,t,n,i,r,null,o)}return"text/html_doc_lit_mobile"===o?a.HTMLAdGenerator.htmlLitToHTMLDocLitMobile(l):l},generateImageHTML:function(e,t){return a.HTMLAdGenerator.log("generateImageHTML"),t?'<a rel="noopener noreferrer" href="'+t+'" target="_blank"><img src="'+e+'" border="0" /></a>':'<img src="'+e+'" border="0" />'},generateFlashHTML:function(e,t,n,i,r){a.HTMLAdGenerator.log("generateFlashHTML");var s=e;return t&&0<t.length&&(s+=-1===e.indexOf("?")?"?":"&",s+="clickTag="+encodeURIComponent(t)),e='<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"WIDTH="'+i+'" HEIGHT="'+r+'" id="'+n+'_external_ad"><PARAM NAME=movie VALUE="'+s+'"/><PARAM NAME=quality VALUE=high/><PARAM NAME=bgcolor VALUE=#FFFFFF/><PARAM NAME="allowScriptAccess" VALUE="always"/><PARAM NAME="loop" VALUE="true"/>',(e+='<EMBED src="'+s+'" ')+'quality=high bgcolor=#FFFFFF WIDTH="'+i+'" HEIGHT="'+r+'"NAME="'+n+'_external_video" ALIGN="" TYPE="application/x-shockwave-flash"PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED></OBJECT>'},generateIFrameHTML:function(e,t,n,i,r){return a.HTMLAdGenerator.log("generateIFrameHTML"),'<iframe height="'+r+'" width="'+i+'" frameborder="0" scrolling="no" allowtransparency="true" leftmargin="0" rightmargin="0" marginwidth="0" marginheight="0" src="'+e+'"></iframe>'},docLitToHTMLLit:function(e,t,n,i){return a.HTMLAdGenerator.log("docLitToHTMLLit"),'<iframe id="_fw_frame_'+t+'" width="'+n+'" height="'+i+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no"></iframe><script language="javascript" type="text/javascript" id="_fw_container_js_'+t+"\">if(!fw_targets) {var fw_targets = [];}var _fw_wr;var fw_scope = document;var fw_content = '"+a.Util.encodeToHex(e)+"';var trgtFrm = fw_scope.getElementById(\"_fw_frame_"+t+'");trgtFrm = (trgtFrm.contentWindow) ? trgtFrm.contentWindow : (trgtFrm.contentDocument.document) ? trgtFrm.contentDocument.document : trgtFrm.contentDocument;fw_targets["'+t+'"] = trgtFrm;if(navigator.userAgent.match(/\\bMSIE\\b/) || navigator.userAgent.match(/\\bOpera\\b/)){trgtFrm.document.open();trgtFrm.document.write(fw_content);setTimeout(function(){fw_close(fw_targets["'+t+'"])}, 7500);} else if (navigator.userAgent.match(/\\bFirefox\\b/)) {if(true && fw_content.length < 2000){var ec = escape(fw_content);var fw_iframe_url = "http://m2.feiwei.tv/g/lib/template/echo.html?s="+ec;fw_scope.getElementById("_fw_frame_'+t+'").src = fw_iframe_url;} else {trgtFrm.document.open();trgtFrm.document.write(fw_content);trgtFrm.document.close();}} else {trgtFrm.document.open();trgtFrm.document.write(fw_content);trgtFrm.document.close();}function fw_close(theFrame){theFrame.document.close();}<\/script>'},htmlLitToDocLit:function(e){return a.HTMLAdGenerator.log("htmlLitToDocLit"),'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Advertisement</title></head><body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">'+e+"</body></html>"},wrapUnsafeHTML:function(e,t,n,i){return a.HTMLAdGenerator.htmlLitToHTMLDocLitMobile(a.HTMLAdGenerator.docLitToHTMLLit(a.HTMLAdGenerator.htmlLitToDocLit(e),t,n,i))},wrapJSCode:function(e,t,n,i){return a.HTMLAdGenerator.wrapUnsafeHTML('<script language="javascript" type="text/javascript">'+e+"<\/script>",t,n,i)},generateScriptHTML:function(e,t,n,i){return a.HTMLAdGenerator.log("generateScriptHTML"),a.HTMLAdGenerator.wrapUnsafeHTML('<script language="javascript" type="text/javascript" src="'+e+'"><\/script>',t,n,i)},htmlLitToHTMLDocLitMobile:function(e){return a.HTMLAdGenerator.log("htmlLitToHTMLDocLitMobile"),'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta name = "viewport" content = "initial-scale = 1.0, target-densitydpi = device-dpi" /><title>Advertisement</title><script type="text/javascript">window._fw_page_url = "";<\/script></head><body style="margin:0px;background-color:transparent;">'+e+"</body></html>"}},a.NullRenderer=function(){this._rendererController=null},a.NullRenderer.prototype={start:function(e){this._rendererController=e,this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF),this._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED),this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){return-1},getDuration:function(){return-1}},a.NullRenderer.prototype.constructor=a.NullRenderer,a.PageSlotScanner=function(e){this.OPTION_INIT=1,this.OPTION_FCAI=2,this.OPTION_NIIC=4,this.OPTION_NOSA=8,this.OPTION_NSIT=16,this._knownSlots=[],this._slots={},this._candidateAds=[],this._slotOptionFound=!1,this._context=e},a.PageSlotScanner.prototype={isSlotDuplicate:function(e){for(var t=0;t<this._knownSlots.length;++t)if(this._knownSlots[t].id===e)return!0;return!1},findPageSlotByScope:function(e){var t=e.document;if(t){var n=/(^|\s)_fwph(\s|$)/,i=t.getElementsByTagName("span");for(e._fw_admanager||(e._fw_admanager={}),e._fw_admanager.pageScanState=!0,e=0;e<i.length;++e){var r,s=i[e];if(n.test(s.className)&&(s=s.getAttribute("id"),(r=t.getElementById("_fw_input_"+s))&&!this.isSlotDuplicate(s)&&(r=r.getAttribute("value")))){";"!==r.charAt(r.length-1)&&(r+=";");var o=(r=r.split(";"))[r.length-2],l=!1;-1!==o.search("lo=i")&&(l=!0);var u=!1;-1!==o.search("prct=")&&(u=!0),o.search("flag=")<0&&(o+="&flag="),o.search("ptgt=")<0&&(o="ptgt=s&"+o),r=[];var c,d,h=o.split("&");o=!0;for(var f=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,p=0;p<h.length;++p){var _=h[p].split("=");if(2===_.length){if(_[1]=decodeURIComponent(_[1]),"ssct"===_[0]){if(u)continue;u=!0,_[0]="prct"}"flag"===_[0]?(-1===_[1].search(/[-\+]cmpn/)&&(_[1]+="+cmpn"),"+"!==_[1].charAt(0)&&"-"!==_[1].charAt(0)&&(_[1]="+"+_[1]),l&&-1===_[1].search("-init")&&(_[1]+="-init"),-1!==_[1].search("-nrpl")&&(_[1]=_[1].replace("-nrpl","+cmpn")),-1!==_[1].search("-cmpn")&&(o=!1),f=this._getInitialOption(_[1]),this._slotOptionFound||(f=l?a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL:a.SLOT_OPTION_INITIAL_AD_STAND_ALONE)):"w"===_[0]?c=Number(_[1]):"h"===_[0]?d=Number(_[1]):"cana"===_[0]&&this._addCandidateAds(_[1]),_=encodeURIComponent(_[0])+"="+encodeURIComponent(_[1]),r.push(_)}}u||""==this._context.getParameter(a.PARAMETER_PAGE_SLOT_CONTENT_TYPE)||(l=this._context.getParameter(a.PARAMETER_PAGE_SLOT_CONTENT_TYPE)||"text/html_doc_lit_mobile,text/html_doc_ref",r.push("prct="+encodeURIComponent(l))),(l=t.getElementById("_fw_container_"+s))?(this._slots[s]=r.join("&")+";",this._knownSlots.push({id:s,width:c,height:d,element:l,acceptCompanion:o,initialAdOption:f})):a.warn("Failed to find container for slot "+s)}}}},scanPageSlots:function(){for(var e=0;e<window.frames.length;++e)try{a.debug("scanPageSlots in frame",e),this.findPageSlotByScope(window.frames[e])}catch(e){a.debug("PageSlotScanner: scanPageSlots exception "+e)}try{window.parent&&window.parent!==window&&(a.debug("scanPageSlots in parent frame"),this.findPageSlotByScope(window.parent))}catch(e){a.debug("PageSlotScanner: scanPageSlots exception "+e)}try{a.debug("scanPageSlots in current window"),this.findPageSlotByScope(window)}catch(e){a.debug("PageSlotScanner: scanPageSlots exception "+e)}},slotsToTypeBStr:function(){var e,t="";for(e in this._slots)if(this._slots.hasOwnProperty(e)){var n=this._slots[e];-1===n.search("slid=")&&(n="slid="+encodeURIComponent(e)+"&"+n),";"!==(t+=n).charAt(t.length-1)&&(t+=";")}return t&&(t=t.substring(0,t.length-1)),t},_addCandidateAds:function(e){e=e.split(",");for(var t=0;t<e.length;t++){var n=parseInt(e[t],10);0<n&&this._candidateAds.push(n)}},_parseFlags:function(e){var t=[],n=[],i="",r=!0;e+="+";for(var a=0;a<e.length;++a){var s=e.charAt(a);switch(s){case"+":case"-":""!==i&&((r?t:n).push(i),i=""),r="+"===s;break;default:i+=s}}return[t,n]},_getInitialOption:function(e){var t=!0,n=!1,i=0;e=this._parseFlags(e);for(var r=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,s=0;s<e.length;++s)for(var o=0;o<e[s].length;++o)switch(e[s][o].toString().toLowerCase()){case"cmpn":t=0===s;break;case"nrpl":t=0!==s;break;case"init":i=0===s?i&~this.OPTION_INIT:i|this.OPTION_INIT,n=!0;break;case"fcai":i=0===s?i|this.OPTION_FCAI:i&~this.OPTION_FCAI,n=!0;break;case"niic":i=0===s?i|this.OPTION_NIIC:i&~this.OPTION_NIIC,n=!0;break;case"nosa":i=0===s?i|this.OPTION_NOSA:i&~this.OPTION_NOSA,n=!0;break;case"nsit":i=0===s?i|this.OPTION_NSIT:i&~this.OPTION_NSIT,n=!0}switch(a.debug("PageSlotScanner: _getInitialOption: acceptCompanion = "+t),i){case 0:n&&(r=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE);break;case 1:r=a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL;break;case 3:r=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_ONLY;break;case 2:r=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_STAND_ALONE;break;case 6:r=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_THEN_STAND_ALONE;break;case 8:r=a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE;break;case 10:r=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE;break;case 16:r=a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE_IF_TEMPORAL;break;case 18:r=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE_IF_TEMPORAL;break;default:r=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE}return this._slotOptionFound=n,r}},a.PageSlotScanner.prototype.constructor=a.PageSlotScanner,a.RendererController=function(v,E){var t=null,n=null,y={},i=a.RendererInitState.instance,l={},u=[],T=0;return{getAdInstance:function(){return E},getContext:function(){return v},getRendererState:function(){return i},processEvent:function(e){var t=e.name;if(t===a.RENDERER_STATE_STARTED||t===a.RENDERER_STATE_COMPLETING||t===a.RENDERER_STATE_COMPLETED||t===a.RENDERER_STATE_FAILED)this.handleStateTransition(t,e.info);else{var n=this._inferEventType(t);if(n&&(n===a.EVENT_TYPE_CLICK&&e.info&&e.info[a.INFO_KEY_CUSTOM_EVENT_NAME]&&(t=e.info[a.INFO_KEY_CUSTOM_EVENT_NAME]),t!==a.EVENT_AD_MEASUREMENT||e.info[a.INFO_KEY_CONCRETE_EVENT_ID])){var i=t===a.EVENT_AD_INITIATED||t===a.EVENT_AD_BUFFERING_START||t===a.EVENT_AD_BUFFERING_END||t===a.EVENT_AD_VOLUME_CHANGE||e.info&&e.info.hasOwnProperty("apiOnly")&&e.info.apiOnly;E.processEvent(t,n,e.info,i)}}},handleStateTransition:function(e,t){switch(e){case a.RENDERER_STATE_STARTED:i.notifyStarted(this);break;case a.RENDERER_STATE_COMPLETING:i.complete(this);break;case a.RENDERER_STATE_COMPLETED:i.complete(this),i.notifyCompleted(this);break;case a.RENDERER_STATE_FAILED:if(E.getSlot()._clearScheduledAdInstance(),t||(t={}),a.warn("FAIL",", FW ErrorModule:",t[a.INFO_KEY_ERROR_MODULE],", FW ErrorCode:",t[a.INFO_KEY_ERROR_CODE],", FW ErrorInfo:",t[a.INFO_KEY_ERROR_INFO],", VAST ErrorCode:",t[a.INFO_KEY_VAST_ERROR_CODE]),(e=E.processEvent(a.EVENT_ERROR,a.EVENT_TYPE_ERROR,t))||a.debug("No EVENT_ERROR callback found"),t)switch(t[a.INFO_KEY_ERROR_CODE]){case a.ERROR_NO_AD_AVAILABLE:case a.ERROR_PARSE:(e=E.processEvent(a.EVENT_RESELLER_NO_AD,a.EVENT_TYPE_IMPRESSION))||a.debug("No EVENT_RESELLER_NO_AD callback found.")}i.fail(this);break;default:a.debug("Unknown event received",e)}},setCapability:function(e,t){E.setMetr(e,t)},getVersion:function(){return v._adManager.getVersion()},getParameter:function(e){if(!e)return null;if(v._overrideLevelParameterDictionary.hasOwnProperty(e))return v._overrideLevelParameterDictionary[e];if(E.getActiveCreativeRendition()&&void 0!==E.getActiveCreativeRendition().getParameter(e))return E.getActiveCreativeRendition().getParameter(e);var t=E._creative;return t&&void 0!==t.getParameter(e)?t.getParameter(e):void 0!==E.getSlot().getParameter(e)?E.getSlot().getParameter(e):v._adResponse._profileParameters.hasOwnProperty(e)?v._adResponse._profileParameters[e]:v._globalLevelParameterDictionary.hasOwnProperty(e)?v._globalLevelParameterDictionary[e]:y&&y.hasOwnProperty(e)?y[e]:null},getCompanionSlots:function(){for(var e=[],t=E._companionAdInstances,n=0;n<t.length;n++)t[n].isPlaceholder()&&e.push(t[n].getSlot());return e},createNullDrivingAdInstance:function(){var e=E.getSlot().scheduleAdInstance();return e.addCreativeRendition().setContentType("null/null"),e},scheduleAdInstances:function(e){var t,n=[],i=null;if(0===(e=e||[]).length)return n;for(t=0;t<e.length;t++)e[t].getCustomId()===E.getSlot().getCustomId()&&(i=E.getSlot().scheduleAdInstance());if(!i)if(this.isTranslator())i=this.createNullDrivingAdInstance();else{if(!this.isRenderer())return n;i=E}for(var r=0;r<e.length;r++){if(e[r].getCustomId()===E.getSlot().getCustomId())i!==E&&n.push(i);else for(var a=0,s=i._companionAdInstances;a<s.length;a++)if(t=s[a],e[r]===t.getSlot()){if(this.isTranslator())n.push(t);else if(this.isRenderer()&&t.isPlaceholder()){var o=t.cloneForTranslation();i===E&&(l[o]=t),s[a]=o,n.push(o),u.push(o)}break}n.length<=r&&n.push(null)}return n},commitAdInstance:function(){if(this.isRenderer()&&E.isStarted()){for(var e=0;e<u.length;e++){var t=u[e];t&&t.getSlot().playCompanionAds(t)}u=[]}else a.warn("Skipping RendererController.commitAdInstance when called with driving ad not started or completed.")},isRenderer:function(){return t&&a.MODULE_TYPE_RENDERER===t.info()[a.INFO_KEY_MODULE_TYPE]},isTranslator:function(){return t&&a.MODULE_TYPE_TRANSLATOR===t.info()[a.INFO_KEY_MODULE_TYPE]},playable:function(){return i===a.RendererInitState.instance},reset:function(){i=a.RendererInitState.instance},play:function(){for(var e=E.getRenderableCreativeRenditions()||[],t=null,n=0;n<e.length;n++){var i=e[n];if(t=this._matchRendererClassName(i)){E.setActiveCreativeRendition(i);break}}0===T&&this._actualPlay(t)},_actualPlay:function(e){(n=a.Util.getObject(e)||a.Util.getObject(w+"."+e))&&(t=new n),t?i.start(this):this.handleStateTransition(a.RENDERER_STATE_FAILED,{errorCode:a.ERROR_NO_RENDERER,errorInfo:"Renderer class <"+e+"> not found"})},dispatchEvent:function(e,t){v.dispatchEvent(e,t)},requestContentStateChange:function(e){e?v._requestContentVideoToPauseBySlot(E.getSlot()):v._requestContentVideoToResumeBySlot(E.getSlot())},getRenderer:function(){return t},setRenderer:function(e){t=e},setRendererState:function(e){i=e},getContentVideoElement:function(){return v.getContentVideoElement()},_restorePlaceholdersForHybrid:function(){if(l&&this.isRenderer()){for(var e=[],t=0;t<E._companionAdInstances.length;t++){var n=E._companionAdInstances[t],i=l[n];i?e.push(i):e.push(n)}E._companionAdInstances=e}0<u.length&&this.isRenderer()&&(u=[])},rendererMatch:function(e){return!n||n===a.Util.getObject(this._matchRendererClassName(e))},_matchRendererClassName:function(e){function t(e,t,n){if(a.debug("matching "+e+" within "+t),!t)return!0;if((t=t.split(","))[t.length-1]||t.pop(),n){for(e=e.toLowerCase(),n=0;n<t.length;n++)if(e===t[n].toLowerCase())return!0;return a.debug("not match"),!1}return(t=0<=t.indexOf(e))||a.debug("not match"),t}var n=e.getPrimaryCreativeRenditionAsset().getContentType(),i=e.getContentType(),r=e.getWrapperType(),s=e.getCreativeApi(),o=e.getBaseUnit(),l=E.getSoAdUnit(),u=E.getSlot(),c=u.getType();if(u=u.getTimePositionClass(),a.debug("match renderer for creativeRendition:"+e.getId()),a.debug("slot type:"+c),a.Util.isBlank(i)&&a.Util.isBlank(r))return a.warn("renderer not match due to both contentType and wrapperType are empty"),null;var d=v._rendererManifest["*"];if(d||(d=v._rendererManifest[r]),d||(d=v._rendererManifest[i]),!d){c=v._overriddenAdRenderers.concat(v._adResponse._adRenderers);for(var h=0;h<c.length;h++){var f=c[h],p=!f.contentType;if(p||(r?p=t(r,f.contentType,!0):(n&&(p=t(n,f.contentType,!0)),p||(p=t(i,f.contentType,!0)))),p)if((p=!f.creativeApi)||(p=t(s,f.creativeApi)),p){if(f.baseUnit&&!t(o,f.baseUnit))a.debug("can't match renderer "+f.url+" due to baseUnit not match for creativeRendition:"+e.getId());else if(f.soAdUnit&&!t(l,f.soAdUnit))a.debug("can't match renderer "+f.url+" due to soAdUnit not match for creativeRendition:"+e.getId());else if(f.slotType&&!t(u.toUpperCase(),f.slotType.toUpperCase()))a.debug("can't match renderer "+f.url+" due to slotType not match for creativeRendition:"+e.getId());else if(a.debug("renderer "+f.url+" matched for creativeRendition:"+e.getId()),f.url){-1!==(e=(d=f.url).indexOf("?"))&&(d=d.substring(0,e)),-1!==(e=d.lastIndexOf("/"))&&(d=d.substring(e+1)),-1!==(e=d.lastIndexOf(".js"))&&(d=d.substring(0,e));var _={};if(f.parameter)for(e=[].concat(f.parameter),n=0;n<e.length;n++)if(e[n].hasOwnProperty("name"))_[e[n].name]=e[n].value;else for(var g in e[n])e[n].hasOwnProperty(g)&&(_[g]=e[n][g]);if(a.Util.getObject(w+"."+d)&&(d=w+"."+d),a.Util.getObject(d))y=_,T=0;else{if(0<T)break;var m=this;g=1*this.getContext().getParameter("moduleLoadTimeout")||6e4,T=window.setTimeout(function(){T=-1,m.handleStateTransition(a.RENDERER_STATE_FAILED,{errorCode:a.ERROR_NO_RENDERER,errorInfo:"Load renderer timeout, URL:"+f.url})},g),a.Util.lazyJavaScriptLoad(f.url,function(){a.log("async load renderer successful, URL:"+f.url),-1===T?a.debug("renderer loaded after timeout. WILL NOT PLAY."):(window.clearTimeout(T),T=0,y=_,m._actualPlay(d))})}break}}else a.debug("can't match renderer "+f.url+" due to creative api not match for creativeRendition:"+e.getId());else a.debug("can't match renderer "+f.url+" due to contentType not match for creativeRendition:"+e.getId())}}return d||(a.Util.isBlank(r)&&"null/null"===i?w+".NullRenderer":null)},_inferEventType:function(e){return e===a.EVENT_ERROR?a.EVENT_TYPE_ERROR:e===a.EVENT_AD_CLICK?a.EVENT_TYPE_CLICK:e===a.EVENT_AD_IMPRESSION||e===a.EVENT_AD_FIRST_QUARTILE||e===a.EVENT_AD_MIDPOINT||e===a.EVENT_AD_THIRD_QUARTILE||e===a.EVENT_AD_COMPLETE||e===a.EVENT_RESELLER_NO_AD?a.EVENT_TYPE_IMPRESSION:e===a.EVENT_AD_PAUSE||e===a.EVENT_AD_RESUME||e===a.EVENT_AD_REWIND||e===a.EVENT_AD_MUTE||e===a.EVENT_AD_UNMUTE||e===a.EVENT_AD_COLLAPSE||e===a.EVENT_AD_EXPAND||e===a.EVENT_AD_MINIMIZE||e===a.EVENT_AD_CLOSE||e===a.EVENT_AD_ACCEPT_INVITATION?a.EVENT_TYPE_STANDARD:e===a.EVENT_AD_MEASUREMENT||e===a.EVENT_AD_VOLUME_CHANGE||e===a.EVENT_AD_BUFFERING_START||e===a.EVENT_AD_BUFFERING_END||a.EVENT_AD_INITIATED||a.EVENT_AD_AUTO_PLAY_BLOCKED?a.EVENT_TYPE_GENERIC:null},pause:function(){a.log("RendererController.pause"),t&&"function"==typeof t.pause?t.pause():a.log("Renderer.pause() is not implemented.")},resume:function(){a.log("RendererController.resume"),t&&"function"==typeof t.resume?t.resume():a.log("Renderer.resume() is not implemented.")},stop:function(){a.log("RendererController.stop"),0<T&&(T=-1),i.stop(this)}}},a.RenditionSelector=function(e,t,n,i){this._targetByterate=e,this._arWeight=t,this._pxWeight=n,this._conversionFactor=i},a.RenditionSelector.prototype={getBestFitRendition:function(e,n,i){var r=this;if(e.reverse(),!(e=e.filter(function(e){return e&&e.getPrimaryCreativeRenditionAsset()&&(e.getPrimaryCreativeRenditionAsset().getUrl()||e.getPrimaryCreativeRenditionAsset().getContent())&&a.Util.canPlayVideoType(e.getPrimaryCreativeRenditionAsset().getMimeType())}).sort(function(e,t){return r.getBitrate(e)-r.getBitrate(t)})).length)return null;var t=Number.MAX_VALUE,s=e.filter(function(e){return e=r.getBitrate(e),t=e<t?e:t,e<=r._targetByterate});return s.length||(s=e.filter(function(e){return r.getBitrate(e)<=t})),s.sort(function(e,t){return r.compareVisualMetrics(e,t,n,i)}).pop()},compareVisualMetrics:function(e,t,n,i){var r=this.calculateVisualRatios(e.getWidth(),e.getHeight(),n,i);return i=this.calculateVisualRatios(t.getWidth(),t.getHeight(),n,i),!r&&i?-1:r&&!i?1:r&&i&&(n=this._conversionFactor*this._arWeight*Math.log(i.arRatio),i=this._pxWeight*Math.log(i.pixelation),r=this.findDistance(this._conversionFactor*this._arWeight*Math.log(r.arRatio),this._pxWeight*Math.log(r.pixelation),0,0),(n=this.findDistance(n,i,0,0))!==r)?n-r:e.getPreference()-t.getPreference()},calculateVisualRatios:function(e,t,n,i){if(0<e&&0<t&&0<n&&0<i){var r=e/t,a=n/i;return a<r?i=n/r:n=i*r,{arRatio:r/a,pixelation:e*t/(n*i)}}return null},findDistance:function(e,t,n,i){return isNaN(e)||isNaN(n)||isNaN(t)||isNaN(i)?NaN:Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))},getBitrate:function(e){var t=e.getDuration();return(e=e.getPrimaryCreativeRenditionAsset().getBytes())&&t&&!isNaN(e)&&!isNaN(t)&&0<e&&0<t?8*e/1e3/t:-1}},a.RenditionSelector.prototype.constructor=a.RenditionSelector,a.Slot=function(s){var t,o,n,i,l,r,u,c,d="",h=null,f=null,p=null,_=null,g=[],m=[],v={},E=null,y=a.MediaInitState.instance,T=0,A=null,S=0,R=0,b=[],I=null,C=!1,P=!1,w=!0,O=[],D=!1;return{setAutoPlayBlocked:function(e){D=e},getSlotProfile:function(){return f},setSlotProfile:function(e){f=e},setMediaState:function(e){y=e},setParameter:function(e,t){null==t?delete v[e]:v[e]=t},getParameter:function(e){if(e&&v.hasOwnProperty(e))return v[e]},getAdCount:function(){return g.length},setCustomId:function(e){d=e},getCustomId:function(){return d},setAdUnit:function(e){l=e},getAdUnit:function(){return l},setType:function(e){h=e},getType:function(){return h},setTimePosition:function(e){o=e},getTimePosition:function(){return o},setTimePositionClass:function(e){A=e&&e.toUpperCase()},getTimePositionClass:function(){return A},setWidth:function(e){n=e},getWidth:function(){return A!==a.TIME_POSITION_CLASS_DISPLAY?n||s.getVideoDisplaySize().width:n},setHeight:function(e){i=1*e},getHeight:function(){return A!==a.TIME_POSITION_CLASS_DISPLAY?i||s.getVideoDisplaySize().height:i},setBase:function(e){t=e},getBase:function(){return t},setCuepointSequence:function(e){r=1*e?1*e:0},getCuepointSequence:function(){return r},getVideoDisplaySize:function(){return s.getVideoDisplaySize()},setMaxDuration:function(e){S=1*e?1*e:0},getMaxDuration:function(){return S},setMinDuration:function(e){R=1*e?1*e:0},getMinDuration:function(){return R},setAcceptContentType:function(e){if(e&&e.trim()){e=e.split(",");for(var t=0;t<e.length;t++)b.push(e[t].trim())}},setSignalId:function(e){e&&e.trim()&&(I=e)},getSignalId:function(){return I},getAcceptContentType:function(){return b.join(",")},parse:function(e){if(e){d=e.customId,o=1*e.timePosition,A=e.timePositionClass&&e.timePositionClass.toUpperCase()||A,l=e.adUnit,null==(I=e.signalId)&&(I=e.outSignalId);for(var t,n=0,i=e.eventCallbacks||[];n<i.length;n++){t=i[n];var r=a.EventCallback.newEventCallback(s,t.name,t.type);r&&(r._slot=this,r.parse(t),m.push(r))}for(n=0,i=e.selectedAds||[];n<i.length;n++)t=i[n],e=[],r=new a.AdInstance(s),e.push(r),r._slot=this,r._slotCustomId=d,r._parentAdInstancesGroup=e,r.parse(t),g.push(e)}},getCurrentAdInstance:function(){return p},isPauseSlot:function(){return A===a.TIME_POSITION_CLASS_PAUSE_MIDROLL},play:function(e){if(D)a.log("Resuming previously blocked video ad now."),D=!1,s.getContentVideoElement()&&s.getContentVideoElement().play();else{for(var t=this.getAdInstances(),n=0;n<t.length;n++)t[n]._isSkipped=!1;A!==a.TIME_POSITION_CLASS_DISPLAY||w?(a.log("Slot.play",A),C=!1,A===a.TIME_POSITION_CLASS_DISPLAY&&1<g.length&&g.splice(0,g.length-1),this._play(e)):(a.log("Slot is invisible. Push the play operation to the queue."),O.push({operation:this.play,argument:e}))}},stop:function(){a.log("Slot.stop",A),A===a.TIME_POSITION_CLASS_DISPLAY&&(O=[]),y===a.MediaInitState.instance||y===a.MediaEndState.instance?a.log("Slot.stop, not start or already end, ignore"):(C=!0,p?p.stop():a.warn("Slot.stop, no _currentAdInstance, ignore"))},pause:function(){a.log("Slot.pause"),A!==a.TIME_POSITION_CLASS_DISPLAY?p&&p.pause():a.log("Not a temporal slot. Ignore.")},resume:function(){a.log("Slot.resume"),A!==a.TIME_POSITION_CLASS_DISPLAY?p&&p.resume():a.log("Not a temporal slot. Ignore.")},skipCurrentAd:function(){a.log("Slot.skipCurrentAd ",p),p?p.skip():a.log("Slot.skipCurrentAd, no _currentAdInstance, ignore")},setVisible:function(e){if(A!==a.TIME_POSITION_CLASS_DISPLAY)a.log("Slot.setVisible is only for display ads.");else if(a.log("Slot.setVisible",e),w!==e&&(w=e))for(;0<O.length;)(e=O.pop()).operation&&e.operation.call(this,e.argument)},_play:function(e){E=E||e,y.play(this)},onStartPlaying:function(){this._onStartPlaying()},onStartReplaying:function(){this._onStartPlaying()},onCompletePlaying:function(){this._onCompletePlaying()},onCompleteReplaying:function(){this._onCompletePlaying()},playNextAdInstance:function(){a.log("Slot.playNextAdInstance ",A),this._playNextAdInstance()||y.complete(this)},scheduleAdInstance:function(){return _=p.cloneForTranslation()},_clearScheduledAdInstance:function(){_=null},_onStartPlaying:function(){A===a.TIME_POSITION_CLASS_MIDROLL&&0<g.length&&s._requestContentVideoToPauseBySlot(this);var e=a.EventCallback.getEventCallback(m,a.EVENT_SLOT_IMPRESSION,a.EVENT_TYPE_IMPRESSION);e&&e.process(),this.dispatchSlotEvent(a.EVENT_SLOT_STARTED),this.playNextAdInstance()},dispatchSlotEvent:function(e){P||s.dispatchEvent(e,{slot:this})},_onCompletePlaying:function(){E&&E(),E=null,O=[];var e=a.EventCallback.getEventCallback(m,a.EVENT_SLOT_END,a.EVENT_TYPE_IMPRESSION);e&&e.process(),p=null,this.dispatchSlotEvent(a.EVENT_SLOT_ENDED),A===a.TIME_POSITION_CLASS_MIDROLL&&0<g.length&&s._requestContentVideoToResumeBySlot(this)},_playNextAdInstance:function(){return!(C||y!==a.MediaPlayingState.instance&&y!==a.MediaReplayingState.instance)&&(this._commitScheduledAdInstance(),!!(p=this._nextPlayableAdInstance())&&(p.reset(),p._isInitiatedSent||(p.getRendererController().processEvent({name:a.EVENT_AD_INITIATED}),p._isInitiatedSent=!0),p.getRendererController().play(),!0))},_commitScheduledAdInstance:function(){if(_){var e=p._parentAdInstancesGroup.indexOf(p);0<=e&&(_._parentAdInstancesGroup=p._parentAdInstancesGroup,p._parentAdInstancesGroup.splice(e,1,_),_=null)}},_nextPlayableAdInstance:function(){if(p){var e=p._parentAdInstancesGroup,t=e.indexOf(p),n=g.indexOf(e);0<=n&&0<=t&&(p._isImpressionSent||p._isSkipped||t===e.length-1)&&n++}else n=0;if(n<0||n>=g.length)return null;var i;if(y===a.MediaPlayingState.instance){for(e=g[n],i=0;i<e.length;i++)if((t=e[i]).getRendererController().playable())return t}else if(y===a.MediaReplayingState.instance)for(;n<g.length;n++){for(e=g[n],i=0;i<e.length;i++)if((t=e[i])._isImpressionSent)return t;for(i=0;i<e.length;i++)if((t=e[i]).getRendererController().getRendererState()!==a.RendererFailedState.instance&&!t._translated)return t}return null},toString:function(){return"[Slot "+d+"]"},getAdInstances:function(){for(var e=[],t=0;t<g.length;++t)for(var n=g[t],i=0;i<n.length;++i){var r=n[i];if(r.isPlayable()){e.push(r);break}}return e},getPlayheadTime:function(){for(var e=0,t=this.getAdInstances(),n=0;n<t.length;++n){if(t[n]===p){-1<(t=p.getPlayheadTime())&&(e+=t);break}var i=t[n].getDuration();-1<i&&(e+=i)}return T&&T<e&&(e=T),e},getTotalDuration:function(){if(h!==a.SLOT_TYPE_TEMPORAL)return-1;for(var e=0,t=this.getAdInstances(),n=0;n<t.length;++n){var i=t[n].getDuration();-1<i&&(e+=i)}return T=e},playCompanionAds:function(e){a.log("Slot.playCompanionAds");var t=[];(e._parentAdInstancesGroup=t).push(e),g.push(t),P=!0,p&&this.stop(),this.play()},getState:function(){return y},setAcceptCompanion:function(e){u=e},getAcceptCompanion:function(){return u},setInitialAdOption:function(e){c=e},getInitialAdOption:function(){return c}}},a.SurveyExtension=function(){this._surveyPingedIds=[]},a.SurveyExtension.prototype={init:function(e){this._context=e,a.log("SurveyExtension.init("+Array.prototype.slice.call(arguments).join(",")+")"),this._onAdStarted=a.Util.bind(this,function(t){if(this._parameters=this._getParameters(),this._parameters.enabled){a.log("SurveyExtension.onAdStarted()");var e=t.adInstance;if(-1<this._surveyPingedIds.indexOf(e.getAdId()))a.log("won't pingback survey since it has been pinged back");else{var n=e._creative.getParameter("_fw_survey_url");if(n)try{a.log("append"+n+" to head");var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",n),i.appendChild(r),this._surveyPingedIds.push(e.getAdId())}catch(e){a.warn("Append survey to head",t.type,e)}}}}),this._context.addEventListener(a.EVENT_AD_IMPRESSION,this._onAdStarted)},dispose:function(){a.log("SurveyExtension.dispose()"),this._context.removeEventListener(a.EVENT_AD_IMPRESSION,this._onAdStarted),this._parameters=this._onAdStarted=null},_getParameters:function(){var e={};return e.enabled="false"!==this._context.getParameter(a.PARAMETER_EXTENSION_SURVEY_ENABLED),a.log(e),e}},a.SurveyExtension.prototype.constructor=a.SurveyExtension,a.Timer=function(e,t){this._lastTickDate=new Date,this._duration=e||-1,this._playheadTime=-1,this._callback=t,this._state=-1},a.Timer.prototype={},a.Timer.prototype.constructor=a.Timer,a.Util.mixin(a.Timer.prototype,{tick:function(){var e=new Date,t=Math.round((e.getTime()-this._lastTickDate.getTime())/1e3);return this._lastTickDate=e,t},start:function(){if(0!==this._state){2!==this._state&&-1!==this._playheadTime||(this._playheadTime=0),this._state=0,this._timeStamp=new Date,this._timeouter&&(window.clearTimeout(this._timeouter),this._timeouter=null);var e=this,t=1e3*(this._duration-this._playheadTime);t<0||(this._timeouter=window.setTimeout(function(){e.stop(),e._playheadTime=e._duration,e._callback&&e._callback()},t))}},pause:function(){0===this._state&&(this._state=1,this._timeouter&&(window.clearTimeout(this._timeouter),this._timeouter=null),this._playheadTime=(new Date-this._timeStamp)/1e3+this._playheadTime)},stop:function(){this._state=2,this._timeouter&&(window.clearTimeout(this._timeouter),this._timeouter=null),this._playheadTime=(new Date-this._timeStamp)/1e3+this._playheadTime},getPlayheadTime:function(){return 0===this._state?(new Date-this._timeStamp)/1e3+this._playheadTime:this._playheadTime},getCTValue:function(){return(new Date-this._timeStamp)/1e3},getDuration:function(){return this._duration}}),a.VastTranslator=function(){this._rendererController=this._request=null},a.VastTranslator.prototype={start:function(t){function h(e){a.log("VastTranslator\t"+e)}function f(e){a.warn("VastTranslator\t"+e)}function s(t,e){!function(e,t){if(e)if(e.length&&"string"!=typeof e)for(var n=0;n<e.length;n++)t(e[n].value);else e.value&&t(e.value)}(e,function(e){e&&t.push(e)})}function p(e){if(!e)return!1;for(var t=0;t<r.length;t++)if(a.Util.trim(r[t]).toLowerCase()===a.Util.trim(e).toLowerCase())return!0;return!1}function _(e){return e?("string"!=typeof e&&(e=e.toString()),-1<(e=a.Util.trim(e)).indexOf("://")?e:null):null}function g(e){this.code=this.url=null,this.height=this.width=NaN,this.resourceType=this.creativeType=null,this.bitrate=NaN,this.creativeApi=null,this.ad=e,this.clickThrough=null,this.clickTrackings=[],this.customClicks=[],this.creativeData=null}function e(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.replay=[],this.fullscreen=[],this.expand=[],this.collapse=[],this.acceptInvitation=[],this.stop=[]}function n(e){this._impressions=[],this.clickThrough=null,this.clickTrackings=[],this.customClicks=[],this.creativeData=null,this.sequence=-1,this.universalAdId=null,this.vastRenditions=[],this.duration=NaN,this.adp=e,this.isDrivingAd=!1}function o(e){n.call(this,e)}function m(e){n.call(this,e)}function v(e){n.call(this,e)}function u(){}function l(e,t,n,i){if(e&&i&&0<i.length){h("augmentCallbacks("+t+", "+n+", "+i+")");for(var r=e.getEventCallbackUrls(t,n),a=0;a<r.length;a++)-1<i.indexOf(r[a])&&(h("augmentCallbacks() url = "+r[a]),i.unshift(r[a]));e.addEventCallbackUrls(t,n,i)}else h("augmentCallbacks("+t+", "+n+", "+i+"), empty callbacks")}function E(e,t){h("initErrorTrackings()"),e&&t&&l(e,a.EVENT_ERROR,a.EVENT_TYPE_ERROR,t.errorTrackings)}function y(e,t){h("initTrackingEvents()"),t&&e&&(l(e,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,t.creativeView),l(e,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,t.start),l(e,a.EVENT_AD_FIRST_QUARTILE,a.EVENT_TYPE_IMPRESSION,t.firstQuartile),l(e,a.EVENT_AD_MIDPOINT,a.EVENT_TYPE_IMPRESSION,t.midpoint),l(e,a.EVENT_AD_THIRD_QUARTILE,a.EVENT_TYPE_IMPRESSION,t.thirdQuartile),l(e,a.EVENT_AD_COMPLETE,a.EVENT_TYPE_IMPRESSION,t.complete),l(e,a.EVENT_AD_MUTE,a.EVENT_TYPE_STANDARD,t.mute),l(e,a.EVENT_AD_UNMUTE,a.EVENT_TYPE_STANDARD,t.unmute),l(e,a.EVENT_AD_PAUSE,a.EVENT_TYPE_STANDARD,t.pause),l(e,a.EVENT_AD_RESUME,a.EVENT_TYPE_STANDARD,t.resume),l(e,a.EVENT_AD_REWIND,a.EVENT_TYPE_STANDARD,t.rewind),l(e,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,t.fullscreen),l(e,a.EVENT_AD_COLLAPSE,a.EVENT_TYPE_STANDARD,t.collapse),l(e,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,t.expand),l(e,a.EVENT_AD_CLOSE,a.EVENT_TYPE_STANDARD,t.stop),l(e,a.EVENT_AD_ACCEPT_INVITATION,a.EVENT_TYPE_STANDARD,t.acceptInvitation))}function T(e,t,n,i,r){if(h("initClickAndImpressionEvents"),e){if(t&&e.setClickThroughUrl(a.EVENT_AD_CLICK,t),n&&0<n.length&&l(e,a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK_TRACKING,n),i&&0<i.length)for(t=0;t<i.length;t++)i[t].url&&l(e,i[t].id,a.EVENT_TYPE_CLICK_TRACKING,[i[t].url]);r&&l(e,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,r)}}function c(e,t){if(h("initTemporalAdInstance"),e||f("initTemporalAdInstance: Invalid adInstance"),t.selectedDrivingAd){t.surveyUrl&&e._creative.setParameter("_fw_survey_url",t.surveyUrl);var n=t.selectedDrivingAd,i=t.selectedDrivingRenditions;h("vastRenditions:"+i);for(var r=4===C,a=0;a<i.length;a++){var s=e.addCreativeRendition(),o=s.addCreativeRenditionAsset("VAST_CRA",!0),l=i[a];e:{var u=l.creativeType;switch(u){case"video/mp4":u="video/mp4-h264";break e;case"video/3gp":u="video/3gpp"}}if(h("initTemporalAdInstance() set rendition/asset [vastRd.creativeApi,vastAd.duration,vastRd.width,vastRd.height,vastRd.url,assetContentType,vastRd.creativeType] =  "+[l.creativeApi,n.duration,l.width,l.height,l.url,u,l.creativeType]),s.setCreativeApi(l.creativeApi),isNaN(n.duration)||s.setDuration(n.duration),l.width&&!isNaN(l.width)&&s.setWidth(l.width),l.height&&!isNaN(l.height)&&s.setHeight(l.height),n.universalAdId&&s.setUniversalAdId(n.universalAdId),l.url&&o.setUrl(l.url),l.code&&o.setContent(l.code),o.setMimeType(l.creativeType),"static"===l.resourceType&&"text/html"===l.creativeType?o.setContentType("text/html_doc_ref"):"application/x-javascript"===l.creativeType||"application/javascript"===l.creativeType?o.setContentType("text/js_ref"):"iframe"===l.resourceType?o.setContentType("text/html_doc_ref"):"text/html"===l.creativeType||"text/html_doc_ref"===l.creativeType?o.setContentType("text/html_doc_ref"):"text/html_doc_lit_mobile"===l.creativeType?o.setContentType("text/html_doc_lit_mobile"):r||p(u)?(o.setContentType("text/html_doc_lit_mobile"),o.setUrl(null),o.setContent(A(e,I.getCustomId(),n,l,"text/html_doc_lit_mobile"))):o.setContentType(u),n.creativeData&&0!==n.creativeData.length&&(h("initTemporalAdInstance(), set asset parameter creativeData:"+n.creativeData),s.setParameter("creativeData",n.creativeData)),r||p(u)||(l=l.bitrate,!isNaN(l)&&0<l&&o.setBytes(1e3*l*n.duration/8)),u=w,o=O,l=!1,s.getContentType()&&u){var c=s.getContentType().toLowerCase(),d=u.toLowerCase();c===d?l=!0:(0===c.indexOf("video/mp4")&&0===d.indexOf("video/mp4")||"application/javascript"===d&&"text/js_ref"===c)&&(s.setContentType(u),l=!0)}u=!1,s.getCreativeApi()&&o&&((c=s.getCreativeApi().toLowerCase())===(d=o.toLowerCase())?u=!0:0===c.indexOf("mraid")&&0===d.indexOf("mraid")&&(u=!0,s.setCreativeApi(o))),l&&u?s.setPreference(10):u?s.setPreference(6):l?s.setPreference(5):s.setPreference(0),h("adjustMatchedRendition "+s.getId()+", contentType "+s.getContentType()+", creativeAPI "+s.getCreativeApi()+", preference "+s.getPreference())}y(e,n.trackingEvents),E(e,t),T(e,r?i[0].clickThrough:n.clickThrough,n.clickTrackings,n.customClicks,n.impressions)}else(s=e.addCreativeRendition()).setContentType("null/null"),(o=s.addCreativeRenditionAsset("VAST_CRA",!0)).setContentType("null/null")}function A(e,t,n,i,r){return h("getCoadHTML, ad id = "+e.getAdId()),i.url&&0<i.url.length?((n=i.clickThrough)&&0<n.length&&e.setClickThroughUrl(a.EVENT_AD_CLICK,n),e=e.getEventCallbackUrls(a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK)[0],a.HTMLAdGenerator.generateAd(i.url,e,t,i.width,i.height,i.creativeType,r)):i.code&&0<i.code.length?"script"===i.resourceType||"text/javascript"===i.resourceType||"text/js_ref"===i.resourceType||"application/x-javascript"===i.resourceType?a.HTMLAdGenerator.wrapJSCode(i.code,t,i.width,i.height):a.HTMLAdGenerator.wrapUnsafeHTML(i.code,t,i.width,i.height):null}function d(e,t,n,i){h("initPageAdInstance ad:"+t.getAdId());var r=n.vastRenditions[0];if(r.url||r.code){var s=t.addCreativeRendition(),o=s.addCreativeRenditionAsset("VAST_CRA",!0);s.setCreativeApi(r.creativeApi),s.setWidth(r.width),s.setHeight(r.height),"static"===r.resourceType&&"text/html"===r.creativeType||"iframe"===r.resourceType?(o.setContentType("text/html_doc_ref"),o.setUrl(r.url)):"HTML"===r.resourceType?(o.setContentType("text/html_doc_lit_mobile"),o.setContent(a.HTMLAdGenerator.wrapUnsafeHTML(r.code,e.getCustomId(),r.width,r.height))):(o.setContentType("text/html_doc_lit_mobile"),o.setContent(A(t,e.getCustomId(),n,r,"text/html_doc_lit_mobile"))),o.setMimeType("text/html")}else h("initPageAdInstance will add a tracking only companion ad");y(t,n.trackingEvents),E(t,i),T(t,r.clickThrough,r.clickTrackings,r.customClicks,n.impressions)}function i(e){if(200===e.status)if(e.responseXML){var t=(new u).parseAdData(e.responseXML);if(t){if(h("scheduleVastAds"),t&&0!==t.length)if(e=t[0].selectedPackage,t=t[0].redirectPackage,e||t){if(!e&&t){h("scheduleVastAds(), no ads scheduled, redirect to downstream Secondary Ad Server"),h("scheduleRedirect");var n=[];(e=[]).push(I),n.push({});for(var i=P,r=t.selectedCompanionAds,s=0;s<i.length;s++){var o=i[s];r&&r[o.getCustomId()]&&(e.push(o),n.push(r[o.getCustomId()]))}for((i=b._rendererController.scheduleAdInstances(e))&&0<i.length&&((s=(r=i[0]).addCreativeRendition()).setWrapperUrl(a.Util.transformUrlToProxy(t.tagUrl)),s.setWrapperType(D),s.setContentType(w),s.setCreativeApi(O),y(r,t.getTrackingEventsOfWrapper()),E(r,t),T(r,t.getClickThroughOfWrapper(),t.getClickTrackingsOfWrapper(),t.getCustomClicksOfWrapper(),t.getImpressionOfWrapper())),h("scheduleRedirect, schedule companion for redirect ad "+t),s=1;s<i.length;s++)(r=i[s])&&((o=n[s])instanceof v&&d(e[s],r,o,t))}else if(e){for(h("scheduleVastAds(), ads returned from vast response, going to schedule them"),e.selectedDrivingAd?(h("scheduleVastAds(), ads returned from vast response, going to schedule them with driving ad"),e.selectedDrivingAd.isDrivingAd=!0):h("scheduleVastAds(), ads returned from vast response, going to schedule them without driving ad"),h("scheduleAdPackage()"),n=[],(t=[]).push(I),e.selectedDrivingAd&&n.push(e.selectedDrivingAd),i=P,r=e.selectedCompanionAds,s=0;s<i.length;s++)o=i[s],r&&r[o.getCustomId()]&&(t.push(o),n.push(r[o.getCustomId()]));if(0<(r=b._rendererController.scheduleAdInstances(t)).length){for(h("scheduleAdPackage, scheduled "+r.length+" ads"+e.selectedDrivingAd?"":", 1 of it is nullAd for pure companion ad schedule"),e.selectedDrivingAd||h("Driving ad is not selected, will create a dummy null ad."),e.selectedDrivingAd||(t.shift(),c(r.shift(),e)),s=0;s<r.length;s++)if(o=r[s]){var l=n[s];l instanceof v?d(t[s],o,l,e):c(o,e)}!e.selectedDrivingAd&&0<i.length&&0<e.companionAds.length&&0===n.length&&(h("found empty companion slots and companion ads in package, but none of them matches slot size"),b.onTranslatorFailed(a.ERROR_UNMATCHED_SLOT_SIZE))}else h("scheduleAdPackage, no ad scheduled.")}}else h("scheduleVastAds(), no ads from vast response!!!"),S?4!==C?b.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"Expecting linear ad but returned non-linear ad",a.ERROR_VAST_LINEARITY_NOT_MATCH):b.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"Expecting non-linear ad but returned linear ad",a.ERROR_VAST_LINEARITY_NOT_MATCH):b.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"wrapperUrl="+M);else h("no ads for scheduleVastAds");b._request=null,b._rendererController.handleStateTransition(a.TRANSLATOR_STATE_STARTED),b._rendererController.handleStateTransition(a.TRANSLATOR_STATE_COMPLETED)}}else b.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+M,a.ERROR_VAST_XML_PARSING);else 400<=e.status&&b.onTranslatorFailed(a.ERROR_IO,"wrapperUrl="+M)}this._rendererController=t;var r="image/gif image/jpeg image/png text/html text/javascript text/html_doc_ref text/html_doc_lit_mobile application/x-javascript application/javascript".split(" "),S=!1,R=this._rendererController.getAdInstance(),b=this,I=R.getSlot(),C=function(){if(!I)return 1;switch(I.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_POSTROLL:return 2;case a.TIME_POSITION_CLASS_OVERLAY:return 4;case a.TIME_POSITION_CLASS_DISPLAY:return I&&!I.getBase()?8:1;default:return 1}}(),P=this._rendererController.getCompanionSlots().filter(function(e){if(!e)return!1;switch(e.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_PAUSE_MIDROLL:case a.TIME_POSITION_CLASS_POSTROLL:return!1;default:return!0}});h("Checking CompanionSlots, length = "+P.length+", this._rendererController.getCompanionSlots().length = "+this._rendererController.getCompanionSlots().length+", AdInstance.getCompanionSlots.length = "+R.getCompanionSlots().length);var w=R.getActiveCreativeRendition().getContentType(),O=R.getActiveCreativeRendition().getCreativeApi()||"None";this.log("ExpectedDrivingContentType:"+w+", ExpectedDrivingAPI:"+O);var D=R.getActiveCreativeRendition().getWrapperType();(g.prototype={init:function(e,t,n,i,r,a,s,o){var l;if(this.log("init("+[].slice.call(arguments,0).join(",")+")"),this.url=e,this.width=1*t,this.height=1*n,this.creativeType=i,this.resourceType=r,this.bitrate=a,(l=s)&&0!==l.length)switch(l.toLowerCase()){case"flashvar":case"flashvars":l="clickTag";break;case"vpaid":l="VPAID";break;case"mraid":l="MRAID-1.0"}else l="None";this.creativeApi=l,this.code=o||null},log:function(e){a.log("VastTranslator.VastRendition\t"+e)},toString:function(){var e,t=[];for(e in this)this.hasOwnProperty(e)&&"function"!=typeof this[e]&&"ad"!==e&&t.push(e+":"+this[e]);return t.join(",")}}).constructor=g,n.prototype={parse:function(e){if(this.log("parse()"),e.Duration)if(e.Duration.value){var t=/(\d+):(\d+):(\d+)/.exec(e.Duration.value);t?this.duration=3600*t[1]+60*t[2]+1*t[3]:this.warn("Failed to parse duration value for creative "+e)}else this.warn("No duration value set for creative "+e);e.VideoClicks&&(e.VideoClicks=[].concat(e.VideoClicks),a.Util.forEachOnArray(e.VideoClicks,function(e){var t;if(e.ClickThrough&&e.ClickThrough.value&&(this.clickThrough=_(e.ClickThrough.value)),e.ClickTracking){e.ClickTracking=[].concat(e.ClickTracking);for(var n=0;n<e.ClickTracking.length;n++)(t=_(e.ClickTracking[n].value))&&this.clickTrackings.push(t)}if(e.CustomClick)for(e.CustomClick=[].concat(e.CustomClick),n=0;n<e.CustomClick.length;n++){var i=null;e.CustomClick[n]["@attributes"]&&(i=e.CustomClick[n]["@attributes"].id),(t=_(e.CustomClick[n].value))&&this.customClicks.push({id:i,url:t})}},this)),e.MediaFiles&&e.MediaFiles.MediaFile&&(e.MediaFiles.MediaFile=[].concat(e.MediaFiles.MediaFile),a.Util.forEachOnArray(e.MediaFiles.MediaFile,function(e){var t=_(e.value),n=NaN,i=NaN,r=null,a="None",s=NaN;e["@attributes"]&&(n=e["@attributes"].width||NaN,i=e["@attributes"].height||NaN,r=e["@attributes"].type,a=e["@attributes"].apiFramework||"None",s=e["@attributes"].bitrate||NaN),t&&-1!==t.indexOf(":")?((e=new g(this)).init(t,n,i,r,"",s,a,null),e.clickThrough=this.clickThrough,this.vastRenditions.push(e),(isNaN(n)||isNaN(i))&&this.log("continue with missing [width,height]"+[n,i])):this.warn("will ignore this mediaFile because some required field is missing [url,width,height]:"+[t,n,i])},this)),e.TrackingEvents&&this.parseTrackingEvents(e.TrackingEvents,this.setTrackingEvents()),e.AdParameters&&(this.log("parse() got AdParameters:"+e.AdParameters.value),this.creativeData=e.AdParameters.value),e.Companion&&(e.Companion=[].concat(e.Companion),a.Util.forEachOnArray(e.Companion,function(e){var t=null,n=null,i="",r="",s=null,o=null,l=!1;e.CompanionClickThrough&&(r=_(e.CompanionClickThrough.value)),e.StaticResource&&(t=_(e.StaticResource.value),e.StaticResource["@attributes"]&&(n=e.StaticResource["@attributes"].creativeType),i="static"),e.IFrameResource&&(t=_(e.IFrameResource.value))&&(n="text/html_doc_ref",i="iframe"),e.HTMLResource&&(s=e.HTMLResource["#cdata-section"]||"",s=a.Util.trim(s))&&(n="text/html_doc_lit_mobile",i="HTML"),e.TrackingEvents&&(o=e.TrackingEvents);var u=new v(this.adp);if(u.sequence=this.sequence,u.clickThrough=r,o&&u.parseTrackingEvents(o,u.setTrackingEvents()),e["@attributes"]){o=e["@attributes"].width||NaN;var c=e["@attributes"].height||NaN;if(e=e["@attributes"].apiFramework||"None",(t&&-1!==t.indexOf(":")||s)&&!isNaN(o)&&!isNaN(c)&&p(n)||this.adp.isWrapper){var d=new g(u);d.init(t,o,c,n,i,NaN,e,s),d.clickThrough=r,u.vastRenditions.push(d)}else l=!0,this.warn("will ignore this rendition because some required fields is missing or incompatible [creativeType,url,code,width,height]:"+[n,t,s,o,c])}else this.adp.isWrapper||(l=!0,this.warn("for InLine ad package, No attributes found for the Companion ads:"+e));l?this.adp.isWrapper&&this.adp.companionAds.push(u):this.adp.companionAds.push(u)},this)),e.NonLinear&&(e.NonLinear=[].concat(e.NonLinear),a.Util.forEachOnArray(e.NonLinear,function(e){var t=null,n=null,i="",r="",s="",o=null,l=!1;e.AdParameters&&(s=e.AdParameters.value),e.NonLinearClickThrough&&(r=_(e.NonLinearClickThrough.value)),e.StaticResource&&(t=_(e.StaticResource.value),e.StaticResource["@attributes"]&&(n=e.StaticResource["@attributes"].creativeType),i="static"),e.IFrameResource&&(t=_(e.IFrameResource.value),n="text/html_doc_ref",i="iframe"),e.HTMLResource&&(o=e.HTMLResource["#cdata-section"]||"",o=a.Util.trim(o),n="text/html_doc_lit_mobile",i="HTML");var u=new m(this.adp);if(u.sequence=this.sequence,u.clickThrough=r,u._trackingEvents=this._trackingEvents,s&&(u.creativeData=s),e["@attributes"]){s=e["@attributes"].width||NaN;var c=e["@attributes"].height||NaN;if(e=e["@attributes"].apiFramework||"None",!t&&!o||isNaN(s)||isNaN(c)||!p(n))l=!0,this.warn("will ignore this rendition because some required fields is missing or incompatible:[creativeType,url,code,width,height]:"+[n,t,o,s,c]);else{var d=new g(u);d.init(t,s,c,n,i,NaN,e,o),d.clickThrough=r,u.vastRenditions.push(d)}}else this.adp.isWrapper||(l=!0,this.warn("for InLine ad package, No attributes found for the NonLinear ads:"+e));this.adp.nonLinearAds.push(u),l?this.adp.isWrapper&&this.adp.nonLinearAds.push(u):this.adp.nonLinearAds.push(u)},this))},parseLinears:function(e){2!==C?(this.log("TargetAdType != TARGET_LINEAR, skipping parse"),S=!0):this.parse(e)},parseNonLinears:function(e){4!==C?(this.log("TargetAdType != TARGET_NONLINEAR, skipping parse"),S=!0):this.parse(e)},parseCompanionAds:function(e){this.parse(e)},setTrackingEvents:function(){return this._trackingEvents||(this._trackingEvents=new e),this._trackingEvents},parseTrackingEvents:function(e,n){this.log("parseTrackingEvents"),e.Tracking&&(e.Tracking=[].concat(e.Tracking),a.Util.forEachOnArray(e.Tracking,function(e){var t=e["@attributes"].event;if(e=_(e.value))switch(t){case"creativeView":case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":case"mute":case"unmute":case"pause":case"resume":case"rewind":case"replay":case"fullscreen":case"expand":case"collapse":case"acceptInvitation":case"stop":n[t].push(e);break;case"close":n.stop.push(e)}},this))},toString:function(){return this.constructor.name+", renditions:"+this.vastRenditions},log:function(e){a.log("VastTranslator."+this.constructor.name+"\t"+e)},warn:function(e){a.warn("VastTranslator."+this.constructor.name+"\t"+e)}},(t=Object.defineProperty||function(e,t,n){n.get&&e.__defineGetter__(t,n.get),n.set&&e.__defineSetter__(t,n.set)})(n.prototype,"trackingEvents",{get:function(){return this.log("get trackingEvents()"),this._trackingEvents?this._trackingEvents:this.isDrivingAd?this.adp.trackingEvents:null}}),t(n.prototype,"impressions",{set:function(e){this._impressions=e},get:function(){return this.isDrivingAd?this._impressions.concat(this.adp.impressions):this._impressions}}),(o.prototype=new(n.prototype.constructor=n)).constructor=o,(m.prototype=new n).constructor=m,(v.prototype=new n).getPrimaryRendition=function(){return this.vastRenditions[0]||null},t(v.prototype,"impressions",{get:function(){return 8===C?this._impressions.concat(this.adp.impressions):this._impressions}}),v.prototype.constructor=v;var N=function(){this.impressions=[],this.errorTrackings=[],this.linearAds=[],this.nonLinearAds=[],this.companionAds=[],this.extensions=[],this.tagUrl="",this.isWrapper=!1,this.surveyUrl=null,this.selectedDrivingRenditions=[],this.selectedDrivingAd=null,this.selectedCompanionAds={}};(N.prototype={parse:function(e){if(this.log("parse("+e+")"),e)if(this.isWrapper||e.Creatives&&e.Creatives.Creative){e.Creatives=e.Creatives||[],s(this.impressions,e.Impression),s(this.extensions,e.Extensions),s(this.errorTrackings,e.Error),this.isWrapper&&e.VASTAdTagURI&&(this.tagUrl=e.VASTAdTagURI.value||""),e.Survey&&e.Survey.value&&0<e.Survey.value.length&&(this.surveyUrl=e.Survey.value),e.Creatives.Creative=e.Creatives.Creative?[].concat(e.Creatives.Creative):[];for(var t=0;t<e.Creatives.Creative.length;t++){var n=e.Creatives.Creative[t],i=-1;if(n["@attributes"]&&(i=n["@attributes"].sequence||-1,i*=1),n.Linear){var r=new o(this);r.sequence=i,r.parseLinears(n.Linear),this.linearAds.push(r)}else n.NonLinearAds?((r=new m(this)).sequence=i,r.parseNonLinears(n.NonLinearAds)):n.CompanionAds&&((r=new v(this)).sequence=i,r.parseCompanionAds(n.CompanionAds));r&&n.UniversalAdId?(r.universalAdId={idRegistry:n.UniversalAdId["@attributes"].idRegistry,idValue:n.UniversalAdId["@attributes"].idValue},this.log("Universal Ad ID with idRegistry "+r.universalAdId.idRegistry+" and idValue "+r.universalAdId.idValue)):this.log("No Universal Ad ID is present in the VAST response.")}}else this.warn("parse(): no creative found!");else this.warn("parse(): empty adpackage")},testAndUpdatePackageForTemporalSlot:function(e){if(this.log("testAndUpdatePackageForTemporalSlot("+e+")"),(e=e?this.linearAds:this.nonLinearAds).length<1)return!1;this.log("testAndUpdatePackageForTemporalSlot(), ads.length = "+e.length);var t=!1;if(!t)for(var n=0;n<e.length;n++){var i=this.findRenditionGroupByContentType(e[n]);if(0<i.length){this.log("testAndUpdatePackageForTemporalSlot() : found driving ad and renditions group: "+i),this.selectedDrivingRenditions=i,this.selectedDrivingAd=e[n],t=!0;break}}return t},testAndUpdatePackageForPageSlots:function(e){var t=!1,n=this.companionAds,i=P.slice(0);if(this.log("testAndUpdatePackageForPageSlots("+e+"), ads are "+n.join(",")+", slots are "+i.join(",")),e){if(0<(e=this.matchAdsToSlots(n,i)).length)for(t=!0,n=0;n<e.length;n++){var r=(i=e[n]).ad;this.selectedCompanionAds[i.slot.getCustomId()]=r}}else 1===(e=this.matchAdsToSlots(n,[I])).length?(t=!0,this.selectedDrivingAd=e[0].ad):this.selectedDrivingAd=null;return t},renditionFitsInSlot:function(e,t){return!!e&&(e.width<=t.getWidth()&&e.height<=t.getHeight())},calcDeadSpaceRatio:function(e,t){return(e=e.getPrimaryRendition())?(this.log("ad w,h  slot w,h"+[e.width,e.height,t.getWidth(),t.getHeight()]),this.renditionFitsInSlot(e,t)?1-e.width*e.height/t.getWidth()*t.getHeight():1):0},matchAdsToSlots:function(e,t){this.log("matchAdsToSlots(ads="+e.join(",")+", slots="+t.join(",")+")");for(var n=[],i=null,r=null,a=1,s=0;s<e.length;s++)for(var o=e[s],l=0;l<t.length;l++){var u=t[l],c=this.calcDeadSpaceRatio(o,u);c<a&&(i=o,r=u,a=c)}return null!=i&&(n.push({ad:i,slot:r}),e.splice(e.indexOf(i),1),t.splice(t.indexOf(r),1),n=n.concat(this.matchAdsToSlots(e,t))),this.log("matchAdsToSlots: winningAd:"+i+" winningSlot:"+r+" ratio:"+a),n},getAllRenditions:function(e){return e.vastRenditions},findRenditionGroupByContentType:function(e){this.log("findRenditionGroupByContentType:"+e);var t=[];if(e instanceof o&&isNaN(e.duration))return this.warn("findRenditionGroupByContentType(), duration of linear ad is NaN, will not used for scheduling"),t;for(var n=this.getAllRenditions(e),i=0;i<n.length;i++){var r=n[i];if(e instanceof o){if(null==r.creativeType||""===a.Util.trim(r.creativeType)){this.warn("findRenditionGroupByContentType, the contentType "+r.creativeType+" not supported for linearAd");continue}}else if(!p(r.creativeType)){this.warn("findRenditionGroupByContentType, the contentType "+r.creativeType+" not supported for non-linearAd");continue}t.push(r)}return t},formalizeString:function(e){return e?a.Util.trim(e).toLowerCase():""},getAdsByTargetType:function(){this.log("getAdsByTargetType");var e=[];switch(C){case 8:e=this.companionAds;break;case 2:e=this.linearAds;break;case 4:e=this.nonLinearAds}for(var t=0;t<e.length;t++)e[t].isDrivingAd=!0;return e},getImpressionOfWrapper:function(){this.log("getImpressionOfWrapper");for(var e=this.getAdsByTargetType(),t=null,n=0;n<e.length;n++){var i=e[n];if(i&&i._impressions&&0<i._impressions.length){t=i._impressions;break}}return t||(t=this.impressions),t},getTrackingEventsOfWrapper:function(){this.log("getTrackingEventsOfWrapper");for(var e=this.getAdsByTargetType(),t=null,n=0;n<e.length;n++){var i=e[n];if(i&&i._trackingEvents){t=i._trackingEvents;break}}return t},getClickThroughOfWrapper:function(){this.log("getClickThroughOfWrapper");for(var e=this.getAdsByTargetType(),t=null,n=0;n<e.length;n++){var i=e[n];if(i){i.clickThrough&&(t=i.clickThrough),i=i.vastRenditions;for(var r=0;r<i.length;r++){var a=i[r];if(a.clickThrough){t=a.clickThrough;break}}if(t)break}}return t},getClickTrackingsOfWrapper:function(){this.log("getClickTrackingsOfWrapper");for(var e=this.getAdsByTargetType(),t=null,n=0;n<e.length;n++){var i=e[n];if(i){i.clickTrackings&&0<i.clickTrackings.length&&(t=i.clickTrackings),i=i.vastRenditions;for(var r=0;r<i.length;r++){var a=i[r];if(a.clickTrackings&&0<a.clickTrackings.length){t=a.clickTrackings;break}}if(t)break}}return t},getCustomClicksOfWrapper:function(){this.log("getCustomClicksOfWrapper");for(var e=this.getAdsByTargetType(),t=null,n=0;n<e.length;n++){var i=e[n];if(i){i.customClicks&&0<i.customClicks.length&&(t=i.customClicks),i=i.vastRenditions;for(var r=0;r<i.length;r++){var a=i[r];if(a.customClicks&&0<a.customClicks.length){t=a.customClicks;break}}if(t)break}}return t},testWrapperForRedirect:function(){return this.log("testAndUpdateWrapperForRedirect()"),this.tagUrl&&0<this.tagUrl.length},log:function(e){a.log("VastTranslator.VastAdPackage\t"+e)},warn:function(e){a.warn("VastTranslator.VastAdPackage\t"+e)}}).constructor=N,u.prototype={getVastVersion:function(e){return this.log("getVastVersion("+e+")"),e&&0!==e.indexOf(".")?0<e.indexOf(".")?parseInt(e.substring(0,e.indexOf("."))):parseInt(e):-1},parseAdData:function(e){this.log("parseAdData()");var t,n={};n.selectedPackage=null,n.redirectPackage=null;var i=a.Util.xmlToJson(e);if(i)if(i.VAST&&i.VAST["@attributes"])if(this.getVastVersion(i.VAST["@attributes"].version)<a.MINIMUM_VAST_VERSION_SUPPORTED||this.getVastVersion(i.VAST["@attributes"].version)>a.MAXIMUM_VAST_VERSION_SUPPORTED)b.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+M,a.ERROR_VAST_VERSION_NOT_SUPPORTED);else{if(i.VAST.Ad){i.VAST.Ad=[].concat(i.VAST.Ad);var r=[];for(e=[],t=0;t<i.VAST.Ad.length;t++){var s=new N;s.isWrapper=!!i.VAST.Ad[t].Wrapper,s.isWrapper?(s.parse(i.VAST.Ad[t].Wrapper),e.push(s)):(s.parse(i.VAST.Ad[t].InLine),r.push(s))}if(i=!1,0===r.length&&0===e.length)return this.log("parseAdData(): no ads from vast response!!!"),[n];for(this.log("parseAdData(): "+r.length+"inline ads, "+e.length+" wrapper ads."),s=null,t=0;t<r.length;t++)if(this.selectUsableAdsForDrivingSlot(r[t])){this.log("parseAdData(): package for driving slot is found!!!"),s=r[t];break}if(t=0<P.length&&R.getSlot().getTimePositionClass()!==a.TIME_POSITION_CLASS_DISPLAY,s)t&&this.selectUsableAdsCompanionSlots(s)&&this.log("parseAdData(): companion ads are found for companion slots, with driving slot"),n.selectedPackage=s;else if(t){t=!1;for(var o=0;o<r.length;o++)s=r[o],this.selectUsableAdsCompanionSlots(s)&&(this.log("parseAdData(): companion ads are found for companion slots,without driving slot"),n.selectedPackage=s,t=!0);t||(this.log("parseAdData(): companion ads are not found for companion slots,without driving slot"),i=!0)}else this.log("parseAdData(): no usable ads found in vast response!!!"),i=!0;if(i&&0<e.length)for(r=0;r<e.length;r++)if(this.testWrapperForRedirect(e[r])){n.redirectPackage=e[r],R.incrementWrapperCount(),this.selectUsableAdsCompanionSlots(e[r])&&this.log("parseAdData(): companion ads are found for wrapper ad");break}return[n]}i.VAST.Error&&l(R,a.EVENT_ERROR,a.EVENT_TYPE_ERROR,i.VAST.Error.value),b.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"wrapperUrl="+M,a.ERROR_VAST_NO_AD)}else b.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+M,a.ERROR_VAST_SCHEMA_VALIDATION);else b.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+M,a.ERROR_VAST_XML_PARSING)},selectUsableAdsForDrivingSlot:function(e){switch(this.log("selectUsableAdsForDrivingSlot()"),C){case 2:e=this.testAndUpdatePackageForTemporalSlot(e,!0);break;case 4:e=this.testAndUpdatePackageForTemporalSlot(e,!1);break;case 8:e=this.testAndUpdatePackageForPageSlots(e,!1);break;default:e=!1}return e},selectUsableAdsCompanionSlots:function(e){return this.log("selectUsableAdsCompanionSlots(pk)"),this.testAndUpdatePackageForPageSlots(e,!0)},testAndUpdatePackageForTemporalSlot:function(e,t){return this.log("testAndUpdatePackageForTemporalSlot(pk,isLinear), isLinear = "+t),e.testAndUpdatePackageForTemporalSlot(t)},testAndUpdatePackageForPageSlots:function(e,t){return this.log("testAndUpdatePackageForPageSlots(pk,isCompanion) isCompanion = "+t),e.testAndUpdatePackageForPageSlots(t)},testWrapperForRedirect:function(e){return this.log("testWrapperForRedirect(pk)"),e.testWrapperForRedirect()},log:function(e){a.log("VastTranslator.VastParser\t"+e)},warn:function(e){a.warn("VastTranslator.VastParser\t"+e)}};var M=R.getActiveCreativeRendition().getWrapperUrl();if(t=R.getActiveCreativeRendition().getWrapperType(),h("AdInstance.getActiveCreativeRendition().getWrapperUrl()="+M+", getWrapperType()="+t),0!==t.indexOf("external/vast-"))b.onTranslatorFailed(a.ERROR_NO_RENDERER,"wrapperType="+t+";wrapperUrl="+M,a.ERROR_VAST_TRACKING_ERROR);else if(M&&0!==M.length){var L=a.VAST_DEFAULT_MAX_WRAPPER_COUNT;if((t=this._rendererController.getParameter(a.PARAMETER_VAST_MAX_WRAPPER_COUNT))&&0<Number(t)&&(L=Number(t)),R.getWrapperCount()>=L)b.onTranslatorFailed(a.ERROR_IO,"maximum wrapper limit is reached "+R.getWrapperCount(),a.ERROR_VAST_WRAPPER_LIMIT_REACH);else{L=this._rendererController.getParameter("translator.vast.asyncLoad"),h("will load vast xml, asyncAjax:"+(L=!0===a.Util.str2bool(L)));var x=this._rendererController.getParameter("translator.vast.loadWithCookie");x=!0===a.Util.str2bool(x);var k=null,F=5e3;(t=this._rendererController.getParameter(a.PARAMETER_VAST_TIMEOUT_IN_MILLISECONDS))&&0<Number(t)&&(F=Number(t));try{window.XDomainRequest?(k=new XDomainRequest,L=!0):(k=new XMLHttpRequest).withCredentials=x,b._request=k,L?(k.open("GET",M),window.XDomainRequest?k.onload=function(){var e=new ActiveXObject("Microsoft.XMLDOM");e.async=!1,e.loadXML(k.responseText),k.responseXML=e,k.status=200,i(k)}:(k.timeout=F,k.onreadystatechange=function(){4===k.readyState&&i(k)}),k.ontimeout=function(){b.onTranslatorFailed(a.ERROR_TIMEOUT,"wrapperUrl="+M+" timed out.",a.ERROR_VAST_URI_TIMEOUT)},k.onerror=function(){window.XDomainRequest&&(k.status=0),0===k.status?(f("CORS error"),b.onTranslatorFailed(a.ERROR_SECURITY,"wrapperUrl="+M)):(f("exception:"+k.statusText),b.onTranslatorFailed(a.ERROR_UNKNOWN,"wrapperUrl="+M+";exception="+k.statusText))},k.send()):(k.open("GET",M,!1),k.send(),i(k))}catch(e){if(t=!1,window.XMLHttpRequestException){if(e instanceof XMLHttpRequestException)switch(e.code){case XMLHttpRequestException.NETWORK_ERR:t=!0}}else e.code===DOMException.NETWORK_ERR&&(f("CORS in IE10"),t=!0);t?(f("CORS error:"+e),b.onTranslatorFailed(a.ERROR_SECURITY,"wrapperUrl="+M)):(f("exception:"+e),b.onTranslatorFailed(a.ERROR_UNKNOWN,"wrapperUrl="+M+";exception="+e))}}}else b.onTranslatorFailed(a.ERROR_NULL_ASSET,"wrapperUrl="+M,a.ERROR_VAST_TRACKING_ERROR)},info:function(){return{moduleType:a.MODULE_TYPE_TRANSLATOR}},log:function(e){a.log("VastTranslator\t"+e)},warn:function(e){a.warn("VastTranslator\t"+e)},getPlayheadTime:function(){return-1},getDuration:function(){return-1},stop:function(){a.debug("VastTranslator stop"),this._request&&(this._request.abort(),a.log("VastTranslator Stop: request aborted")),this._request=null,this._rendererController&&this._rendererController.handleStateTransition(a.TRANSLATOR_STATE_COMPLETED)},onTranslatorFailed:function(e,t,n){this._request&&(this._request=null);var i={};i[a.INFO_KEY_ERROR_MODULE]="VastTranslator",i[a.INFO_KEY_ERROR_CODE]=e,i[a.INFO_KEY_VAST_ERROR_CODE]=n,t&&(i[a.INFO_KEY_ERROR_INFO]=t),this._rendererController.handleStateTransition(a.TRANSLATOR_STATE_FAILED,i)}},a.VastTranslator.prototype.constructor=a.VastTranslator,a.VideoAsset=function(e){this._defaultTimeouts=[5,10,15,30,60,120,180,300],this._context=e,this._internalState=a.MediaInitState.instance,this._eventCallback=this._state="",this._callbackTimer=null,this._requestedVideoViewUrl=this._videoPlayPending=!1,this._dummyInstanceId="",this._delay=0,this._location=this._networkId=this._duration=this._customId=this._id="",this._autoPlayType=null,this._fallbackId="",this._viewRandom=0,this._durationType=null,this._currentTpos=0},a.VideoAsset.prototype={setVideoAsset:function(e,t,n,i,r,s,o,l,u){if(e){switch(o){case a.ID_TYPE_FW:o=this._id!==e,this._id=e;break;case a.ID_TYPE_GROUP:o=this._id!=="g"+e,this._id="g"+e;break;default:o=this._customId!==e,this._customId=e}o&&(this._eventCallback=""),"number"==typeof t&&(this._duration=Math.round(10*t)/10),0<1*n&&(this._networkId=1*n),"string"==typeof i&&(this._location=i),"number"==typeof r&&(this._autoPlayType=r),0<1*s&&(this._viewRandom=1*s),"number"==typeof l&&0<l?this._fallbackId=""+l:"string"==typeof l&&(this._fallbackId=l.trim()),u!==a.VIDEO_ASSET_DURATION_TYPE_EXACT&&u!==a.VIDEO_ASSET_DURATION_TYPE_VARIABLE||(this._durationType=u),this._videoPlayPending&&this.play()}else a.warn("AdRequest.setVideoAsset","id is required.")},setVideoAssetCurrentTimePosition:function(e){!e||e<0?a.warn("AdRequest.setVideoAssetCurrentTimePosition","valid timePosition is required"):this._currentTpos=e},setVideoState:function(e){e===a.VIDEO_STATE_PLAYING?(this._state===a.VIDEO_STATE_PAUSED&&this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_RESUMED),this.play()):e===a.VIDEO_STATE_PAUSED||e===a.VIDEO_STATE_STOPPED?(this.pause(),e===a.VIDEO_STATE_PAUSED&&this._state===a.VIDEO_STATE_PLAYING&&this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_PAUSED)):e===a.VIDEO_STATE_COMPLETED&&this.complete(),this._state=e},callback:function(e){this._eventCallback?this._eventCallback.process():e=!0,e||((e=this._defaultTimeouts.shift())||(e=300),this._callbackTimer=new a.Timer(e,a.Util.bind(this,this.callback)),this._callbackTimer.start())},getPlayheadTime:function(){var e=this._delay;return this._delay=0,e+=this._callbackTimer?this._callbackTimer.getCTValue():0,Math.floor(e)},play:function(){this._context._adManager._serverURL&&this._context._adManager._networkId&&(this._id||this._customId)?this._eventCallback?(this._videoPlayPending=!1,this._internalState.play(this)):this._requestedVideoViewUrl||(this._requestedVideoViewUrl=!0,this.requestForVideoViewCallback(),this._callbackTimer||(this._callbackTimer=new a.Timer,this._callbackTimer.tick())):(a.warn("Server URL or Network ID or Video Asset id/customId is not set, delay video asset state change until these are provided."),this._videoPlayPending=!0,this._callbackTimer||(this._callbackTimer=new a.Timer,this._callbackTimer.tick()))},pause:function(){this._internalState.pause(this)},complete:function(){this._internalState.complete(this)},onStartPlaying:function(){this.callback()},onStartReplaying:function(){this.callback()},onPausePlaying:function(){this.callback(!0),this._callbackTimer.pause()},onResumePlaying:function(){this._callbackTimer.start()},onCompletePlaying:function(){this.callback(!0),this._callbackTimer.stop(),this._callbackTimer=null,this._eventCallback="",this._requestedVideoViewUrl=!1},onCompleteReplaying:function(){this.onCompletePlaying()},setMediaState:function(e){this._internalState=e},requestPauseBySlot:function(e){a.debug("requestPauseBySlot"),this._internalState===a.MediaPlayingState.instance||this._internalState===a.MediaReplayingState.instance?this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,{slot:e}):a.debug("Not sending content pause request because content video state is",JSON.stringify(this._internalState))},requestResumeBySlot:function(e){a.debug("requestResumeBySlot"),this._internalState===a.MediaPausedState.instance||this._internalState===a.MediaReplayPausedState.instance?this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_RESUME_REQUEST,{slot:e}):a.debug("Not sending content resume request because content video state is ",JSON.stringify(this._internalState))},requestForVideoViewCallback:function(){var e=new a.Context(this._context._adManager);(e._videoAsset=this)._dummyInstanceId=e._instanceId,e=this._context._adRequest.generateVideoViewRequestUrlWithDummyContextInstanceId(e._instanceId);var t=this;a.PLATFORM_SEND_REQUEST_BY_FORM?(a.debug("Context.submitRequest:","use json2"),a.Util.pingURLWithForm(e,this._dummyInstanceId,!0),t._onMessagePosted=function(e){"object"==typeof e.data&&e.data.hasOwnProperty("cbfn")&&-1<e.data.cbfn.indexOf("['Context_"+this._dummyInstanceId+"']")&&t.requestComplete(e.data.response)},window.addEventListener("message",t._onMessagePosted,!1)):a.Util.pingURLWithScript(e)},requestComplete:function(e){if(this._delay=this._callbackTimer.tick(),this._callbackTimer=null,a.PLATFORM_SEND_REQUEST_BY_FORM){window.removeEventListener("message",this._onMessagePosted,!1);var t=document.getElementById("_fw_request_iframe_"+this._dummyInstanceId);document.body.removeChild(t)}null!=e?(a._instanceQueue["Context_"+this._dummyInstanceId]=null,this.parse(a.Util.getObject("siteSection.videoPlayer.videoAsset",e)||{}),this.play()):a.warn("Failed to get video view callback url.")},parse:function(e){if(e){this._customId=e.customId,this._networkId=parseInt(e.networkId);for(var t=0,n=e.eventCallbacks||[];t<n.length;t++){e=n[t];var i=a.EventCallback.newEventCallback(this._context,e.name,e.type);if(i&&e.name===a.EVENT_VIDEO_VIEW){i.parse(e),this._eventCallback=i,a.debug("Parsed video view url: "+this._eventCallback._url);break}}}}},a.VideoRenderer=function(){this._adVideo=null,this._duration=this._playheadTime=-1,this._dragging=this._stopInvoked=this._isEnded=!1,this._volume=1,this._rendererController=null,this._isBuffering=!1,this._autoPauseAdOnVisibilityChange=!0},a.VideoRenderer.prototype={pause:function(){this._rendererController&&this._rendererController.processEvent({name:a.EVENT_AD_PAUSE}),this._adVideo&&!this._adVideo.paused&&this._adVideo.pause()},resume:function(){this._rendererController&&this._rendererController.processEvent({name:a.EVENT_AD_RESUME}),this._adVideo&&this._adVideo.paused&&this._adVideo.play()},start:function(e){this._rendererController=e;var t=(e=this._rendererController.getAdInstance()).getSlot(),n=this,i=!1,r=!1,s=!1;if(this._autoPauseAdOnVisibilityChange=this._rendererController.getParameter(a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE),a.PLATFORM_NOT_SUPPORT_VIDEO_AD)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,t.getTimePositionClass());else if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&t.getTimePositionClass()===a.TIME_POSITION_CLASS_MIDROLL)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"midroll");else{a.log("VideoRenderer.start",t.getTimePositionClass(),e);var o=this._rendererController.getContentVideoElement(),l=t.getVideoDisplaySize().width,u=t.getVideoDisplaySize().height,c=e.getRenderableCreativeRenditions(),d=(l=new a.RenditionSelector(this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE)||1e3,this._rendererController.getParameter("arWeight")||1,this._rendererController.getParameter("pxWeight")||1,.2).getBestFitRendition(c,l,u))?l.getPrimaryCreativeRenditionAsset():null;if(d&&c.length)if(d.getUrl()){e.setActiveCreativeRendition(l),a.log("VideoRenderer.start selected rendition is:",d.getUrl()),this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);var h=!a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO;h||this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF);var f=a.PLATFORM_EVENT_CLICK,p=a.MOBILE_EVENT_DRAG;a.debug("VideoRenderer","use content video element"),o.controls=!1,this._adVideo=o;var _=null,g=null,m=null;this._volume=this._rendererController.getContext().getAdVolume(),this._adVideo.volume=this._volume,this._adVideo.muted=0===this._volume;var v=function(e){a.debug("VideoRenderer.checkTimeUpdate timeout"),N(e)},E=function(){g&&(clearTimeout(g),g=null)},y=a.Util.bind(this,function(e){a.debug("onAdVideoBufferEmpty(): Ad video event "+e.type),null!=(e=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED))&&!1!==a.Util.str2bool(e)&&(a.debug("play the ad immediately after the stalled event"),o&&o._fw_videoAdPlaying&&o.play())}),T=function(e){n._isBuffering||(n._isBuffering=!0,n._rendererController.processEvent({name:a.EVENT_AD_BUFFERING_START}),a.debug("onAdVideoBufferingStarted(): Ad video event "+e.type))},A=function(e){n._isBuffering&&(n._isBuffering=!1,n._rendererController.processEvent({name:a.EVENT_AD_BUFFERING_END}),a.debug("onAdVideoBufferingEnded(): Ad video event "+e.type))};e=this._rendererController.getParameter(a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT);var S=null;e&&(S=document.getElementById(e)),S||(S=o);var R,b=a.Util.bind(this,function(e){if(o.paused&&a.PLATFORM_NOT_FIRE_CLICK_WHEN_AD_VIDEO_PAUSED)o.play();else{var t=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION);null==t&&(t="true"),!1!==a.Util.str2bool(t)&&(r?(a.debug("Ad video event "+e.type),this._dragging?this._dragging=!1:this._rendererController.processEvent({name:a.EVENT_AD_CLICK})):a.debug("Ad not started, ignore click."))}}),I=a.Util.bind(this,function(e){a.debug("Ad video event "+e.type),this._dragging=!0}),C=function(e){if(a.debug("Ad video event "+e.type+" ended: "+o.ended+" playing:"+o._fw_videoAdPlaying),o.ended&&Math.abs(o.duration-o.currentTime)<.2||!o._fw_videoAdPlaying)R=setTimeout(function(){a.warn("Force ad video end bc ad paused with ended = true"),e.type="ended",D(e)},200);else{var t=n._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE);null==t&&(t="true"),!1===a.Util.str2bool(t)?a.debug("Pause controls disabled"):o.controls=!0,E()}},P=function(e){a.debug("Ad video event "+e.type),o.controls=!1},w=0,O=function(e){a.debug("Ad video event "+e.type),o.currentTime<=0?a.debug("VideoRenderer.onAdVideoTimeUpdate currentTime is less than or 0"):(E(),o.paused||(e=n._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT)||8e3,g=setTimeout(v,e,e+"ms timeout when playing")),r||(r=!0,n._playheadTime=o.currentTime,n._playheadTime<0&&(n._playheadTime=0),_&&(clearTimeout(_),_=null),n._quartileTimerId=setInterval(function(){var e=o.currentTime,t=o.duration;0<e&&(n._playheadTime=e),0<t&&(n._duration=t),"number"!=typeof e||"number"!=typeof t||m||(.25*t<=e&&w<1&&(n._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),w=1),.5*t<=e&&w<2&&(n._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),w=2),.75*t<=e&&w<3&&(clearInterval(n._quartileTimerId),n._quartileTimerId=null,n._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),w=3))},1e3),n._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)))};this.dispose=a.Util.bind(this,function(){D()});var D=function(e){var t=m;e&&e.type&&(a.debug("Ad video event "+e.type),"error"===e.type&&(a.warn(e.target.src),a.warn(e.target.currentSrc),A(e))),E(),_&&(clearTimeout(_),_=null),h&&(S.removeEventListener(f,b,!1),S.removeEventListener(p,I,!1)),R&&(clearTimeout(R),R=null),M&&n._autoPauseAdOnVisibilityChange&&(document.removeEventListener("visibilitychange",M,!1),M=null),o.removeEventListener("ended",D,!1),o.removeEventListener("error",D,!0),o.removeEventListener("pause",C,!1),o.removeEventListener("playing",P,!1),o.removeEventListener("timeupdate",O,!1),o.removeEventListener("stalled",y,!1),o.removeEventListener("waiting",T,!1),o.removeEventListener("canplay",A,!1),o.paused||(a.debug("try pausing video before complete"),o.pause()),e&&"error"===e.type&&(t="video error",(e=o.error||e.target.error)&&(t="error:"+e+",code:"+e.code)),t||(n._isEnded=!0),a.log("VideoRenderer.complete"),i||(i=!0,delete o._fw_videoAdPlaying,n._adVideo=null,n._quartileTimerId&&(clearInterval(n._quartileTimerId),n._quartileTimerId=null),t?n._onRendererFailed(null,t):(n._stopInvoked||(o.currentTime>=.25*o.duration&&w<1&&(n._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),w=1),o.currentTime>=.5*o.duration&&w<2&&(n._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),w=2),o.currentTime>=.75*o.duration&&w<3&&(n._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),w=3),o.currentTime>=o.duration-.5&&w<4&&(n._rendererController.processEvent({name:a.EVENT_AD_COMPLETE}),w=4)),n._stopInvoked=!1,n._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED))),n._rendererController=null},N=function(e){m=e,a.warn(m),a.PLATFORM_WAIT_WHEN_AD_VIDEO_TIMEOUT||D()},M=function(e){a.log("onVisibilityChange:"+(document.hidden?"invisible":"visible")),document.hidden?o&&!o.paused&&(o.pause(),s=!0,n._rendererController&&n._rendererController.processEvent({name:a.EVENT_AD_PAUSE}),_&&(clearTimeout(_),_=null)):o&&o.paused&&s&&(o.play(),s=!1,n._rendererController&&n._rendererController.processEvent({name:a.EVENT_AD_RESUME}),r||!o._fw_fromVideoPool&&!a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT||(e=n._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5e3,_=setTimeout(N,e,e+"ms timeout before playing")))},L=!(o._fw_videoAdPlaying=!0),x=function(){if(!L){if(L=!0,h&&(S.addEventListener(f,b,!1),S.addEventListener(p,I,!1)),o.addEventListener("ended",D,!1),o.addEventListener("error",D,!0),o.addEventListener("pause",C,!1),o.addEventListener("playing",P,!1),o.addEventListener("timeupdate",O,!1),o.addEventListener("stalled",y,!1),o.addEventListener("waiting",T,!1),o.addEventListener("canplay",A,!1),o.src=d.getUrl(),a.log("VideoRenderer play video ad "+o.src),o.load(),o._fw_fromVideoPool||a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT){var e=n._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5e3;_=setTimeout(N,e,e+"ms timeout before playing")}a.PLATFORM_VIDEO_DOESNOT_SUPPORT_TIMEUPDATE&&n._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED),e=100,0<a.PLATFORM_ANDROID_VERSION&&(e=n._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_ANDROID_DELAY)||100),setTimeout(function(){var e=o.play();e&&a.PLATFORM_BLOCKS_AUTOPLAY&&e.catch(function(e){(e&&"AbortError"===e.name||"NotAllowedError"===e.name)&&(a.warn("Blocked by browser, need player to display a start button. Details: %o",e),_&&(clearTimeout(_),_=null),t.setAutoPlayBlocked(!0),n._rendererController.processEvent({name:a.EVENT_AD_AUTO_PLAY_BLOCKED,info:{apiOnly:!0}}))}),document.hidden&&o&&n._autoPauseAdOnVisibilityChange&&(a.log("VideoRenderer pause ad when tab is invisible."),o&&!o.paused&&(o.pause(),s=!0,n._rendererController&&n._rendererController.processEvent({name:a.EVENT_AD_PAUSE})),_&&(clearTimeout(_),_=null))},e),n._autoPauseAdOnVisibilityChange&&document.addEventListener("visibilitychange",M,!1)}};a.VideoRenderer._fw_playedDummyVideo||t.getTimePositionClass()!==a.TIME_POSITION_CLASS_PREROLL||!a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL||/\.webm$/.test(d.getUrl())?x():(a.VideoRenderer._fw_playedDummyVideo=!0,a.debug("play dummy video for iOS 3.2-4.1"),o.src="http://127.0.0.1:1/404.mp4",o.load(),o.play(),o._fw_videoAdPlaying=!0,o.addEventListener("error",function(){event.target.removeEventListener("error",o,!0),x()},!0),setTimeout(x,a.PLATFORM_NOT_WAIT_FOR_ERROR_WHEN_PLAY_DUMMY_VIDEO_FOR_PREROLL?500:5e3))}else this._onRendererFailed(a.ERROR_NULL_ASSET);else this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"no compatible asset")}},stop:function(){a.debug("VideoRenderer stop"),this._stopInvoked=!0,this._adVideo&&(this._adVideo._fw_videoAdPlaying=!1,this._adVideo.pause(),this.dispose()),this._rendererController=null},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){if(this._isEnded&&0<this._duration)return this._duration;if(this._adVideo){var e=this._adVideo.currentTime;if(0<e)return e}return this._playheadTime},getDuration:function(){return this._duration},setVolume:function(e){a.debug("VideoRenderer setVolume("+e+")"),this._adVideo?(this._adVideo.volume=e,this._adVideo.muted=0===e,this._volume!==e&&this._rendererController.processEvent({name:a.EVENT_AD_VOLUME_CHANGE}),0===this._volume&&0!==e?this._rendererController.processEvent({name:a.EVENT_AD_UNMUTE}):0!==this._volume&&0===e&&this._rendererController.processEvent({name:a.EVENT_AD_MUTE}),this._volume=e):a.debug("VideoRenderer ad video is null, ignore.")},_onRendererFailed:function(e,t,n){var i={};i[a.INFO_KEY_ERROR_MODULE]="VideoRenderer",i[a.INFO_KEY_ERROR_CODE]=e,n||(n=a.ERROR_VAST_GENERAL_LINEAR_ERROR),i[a.INFO_KEY_VAST_ERROR_CODE]=n,t&&(i[a.INFO_KEY_ERROR_INFO]=t),this._rendererController.handleStateTransition(a.RENDERER_STATE_FAILED,i)}},a.VideoRenderer.prototype.constructor=a.VideoRenderer,a.VideoStateExtension=function(){},a.VideoStateExtension.prototype={_enabled:function(){if(null==this._context)return!1;var e=this._context.getParameter(a.PARAMETER_EXTENSION_VIDEO_STATE_ENABLED);return null==e&&(e="false"),!0===a.Util.str2bool(e)},init:function(e){this._context=e,this._enabled()?this._context.setVideoState(a.VIDEO_STATE_PLAYING):a.log("VideoStateExtension is disabled.")},dispose:function(){this._context=null}},a.VideoStateExtension.prototype.constructor=a.VideoStateExtension,a.VPAIDWrapper=function(){this._creative=null,this._timeoutInMs=0,this._eventHandlers={},this._timeoutTimer=null,this._timeoutOperation="",this.timeoutReached=!1,this._visibilityChangeListener=null,this._creativePausedByTabSwitch=!1,this._autoPauseAdOnVisibilityChange=!0,this._loadIntervalTimer=null,this._isCORSEnforcementDisabled=!0},a.VPAIDWrapper.prototype={_isCreativeFunctionInvokable:function(e){return!!this._creative&&((e=this._creative[e])&&"function"==typeof e)},checkVPAIDInterface:function(e){for(var t={passed:!0,missingInterfaces:""},n=e.length-1;0<=n;n--)this._isCreativeFunctionInvokable(e[n])||(t.passed=!1,t.missingInterfaces+=e[n]+" ");return t},loadCreativeAsset:function(n){a.log("loadCreativeAsset("+n+")");var e=document.getElementById("vpaidFrame"),i=document.createElement("iframe");if(i.id="vpaidFrame",null==e?document.body.appendChild(i):document.body.replaceChild(i,e),i.width=0,i.height=0,i.style.display="none",i.contentWindow.document.open(),this._isCORSEnforcementDisabled){a.log("CORS Enforcement Disabled"),i.contentWindow.document.write('<script type="text/javascript" src="'+n+'"> <\/script>'),i.contentWindow.document.close(),this._timeoutOperation="loadCreativeAsset",this._waitForTimeout();var r=this;this._loadIntervalTimer=setInterval(function(){var e=document.getElementById("vpaidFrame").contentWindow.getVPAIDAd;e&&"function"==typeof e&&(clearInterval(r._loadIntervalTimer),void 0===(e=e())?a.debug("getVPAIDAd() returns undefined value"):null==e?a.debug("getVPAIDAd() returns null"):(r._creative=e,r._eventHandlers.CreativeAssetLoaded()))},200)}else{i.contentWindow.document.close(),this._timeoutOperation="loadCreativeAsset",r=this;var s=new XMLHttpRequest;s.open("GET",n),s.timeout=r._timeoutInMs,s.onreadystatechange=function(){if(4==s.readyState)if(200===s.status)try{i.contentWindow.eval(s.responseText);var e=i.contentWindow.getVPAIDAd;if(!e||"function"!=typeof e)throw"getVPAIDAd() funtion does not exist";var t=e();if(void 0===t)throw"getVPAIDAd() returns undefined value";if(null==t)throw"getVPAIDAd() returns null";r._creative=t,r._eventHandlers.CreativeAssetLoaded()}catch(e){a.warn(e),r._eventHandlers.loaderror(a.ERROR_3P_COMPONENT,"Creative is not VPAID: "+e)}else 400<=s.status&&r._eventHandlers.loaderror(a.ERROR_IO,"creativeUrl="+n+"; status code="+s.status+"; status text="+s.statusText)},s.ontimeout=function(){r._eventHandlers.timeout.call()},s.onerror=function(){0===s.status?(a.warn("CORS error"),r._eventHandlers.loaderror(a.ERROR_SECURITY,"creativeUrl="+n+";cors error")):(a.warn("exception:"+s.statusText),r._eventHandlers.loaderror(a.ERROR_IO,"creativeUrl="+n+";exception="+s.statusText))},s.send()}},setCallbacksForCreative:function(e,t){for(var n in e)e.hasOwnProperty(n)&&this._creative.subscribe(e[n],n,t)},removeCallbacksForCreative:function(e){for(var t in e)e.hasOwnProperty(t)&&this._creative.unsubscribe(e[t],t)},handshakeVersion:function(e){return a.log("VPAID Creative: handshakeVersion("+e+")"),this._creative.handshakeVersion(e)},initAd:function(e,t,n,i,r,s){a.log("VPAID Creative: initAd()"),this._timeoutOperation="initAd",this._waitForTimeout(),this._creative.initAd(e,t,n,i,r,s)},startAd:function(){a.log("VPAID Creative: startAd()"),this._timeoutOperation="startAd",this._waitForTimeout(),this._creative.startAd(),document.hidden&&this._autoPauseAdOnVisibilityChange&&(a.log("VPAIDRenderer pause ad when tab is invisible"),this._creative.pauseAd(),this._creativePausedByTabSwitch=!0)},stopAd:function(){a.log("VPAID Creative: stopAd()"),"startAd"===this._timeoutOperation?(clearTimeout(this._timeoutTimer),this._timeoutOperation="startAd and stopAd"):this._timeoutOperation+="stopAd",this._creative&&(this._waitForTimeout(),this._creative.stopAd())},canPauseAd:function(){return this._isCreativeFunctionInvokable("pauseAd")},canResumeAd:function(){return this._isCreativeFunctionInvokable("resumeAd")},canResizeAd:function(){return this._isCreativeFunctionInvokable("resizeAd")},pauseAd:function(){this.canPauseAd()&&(a.log("VPAID Creative: pauseAd()"),this._creative.pauseAd())},resumeAd:function(){this.canResumeAd()&&(a.log("VPAID Creative: resumeAd()"),this._creative.resumeAd())},resizeAd:function(e,t,n){this.canResizeAd()?(a.log("VPAID Creative: resizeAd()"),this._creative.resizeAd(e,t,n)):a.log("The creative is not able to resize")},getAdVolume:function(){return this._isCreativeFunctionInvokable("getAdVolume")?this._creative.getAdVolume():-1},setAdVolume:function(e){this._isCreativeFunctionInvokable("setAdVolume")&&this._creative.setAdVolume(e)},getAdExpanded:function(){return!!this._isCreativeFunctionInvokable("getAdExpanded")&&this._creative.getAdExpanded()},getAdRemainingTime:function(){return this._isCreativeFunctionInvokable("getAdRemainingTime")?this._creative.getAdRemainingTime():-1},getAdDuration:function(){return this._isCreativeFunctionInvokable("getAdDuration")?this._creative.getAdDuration():-1},getAdLinear:function(){return this._creative.getAdLinear()},getAdCompanions:function(){return this._isCreativeFunctionInvokable("getAdCompanions")?this._creative.getAdCompanions():""},setTimeoutValueInMs:function(e){this._timeoutInMs=e},cancelTimeoutEvent:function(){a.log("cancelTimeoutEvent");var e="startAd and stopAd"!==this._timeoutOperation;if(clearTimeout(this._timeoutTimer),!e){this._timeoutOperation="startAd";var t=this;setTimeout(function(){t._eventHandlers&&t._eventHandlers.timeout&&t._eventHandlers.timeout.call()},500)}},addEventListener:function(e,t){this._eventHandlers[e]=t},removeEventListener:function(e){this._eventHandlers[e]=null},_waitForTimeout:function(){if(a.log("Wait for "+this._timeoutOperation+" for "+this._timeoutInMs+"ms"),this._eventHandlers.timeout){var e=this;this._timeoutTimer=setTimeout(function(){e.timeoutReached||(e.timeoutReached=!0),"startAd"===e._timeoutOperation?e.stopAd():("loadCreativeAsset"===e._timeoutOperation&&clearInterval(e._loadIntervalTimer),e._eventHandlers&&e._eventHandlers.timeout&&e._eventHandlers.timeout.call())},this._timeoutInMs)}},getTimeoutOperation:function(){return this._timeoutOperation}},a.VPAIDWrapper.prototype.constructor=a.VPAIDWrapper,a.VPAIDRenderer=function(){this._rendererController=null,this._isCORSEnforcementDisabled=!0,this.vpaidCreative=null,this.vpaidVolume=this.vpaidDuration=-1,this.creativeEventCallbacks={},this.isMuted=!1,this.adPlaybackState="",this.creativeTimeoutDelayInMs=1e4,this.vpaidDesiredBitrate=268,this.vpaidViewmode="normal",this.playheadTime=0,this.videoBase=document.createElement("div"),this.videoParent=null,this.SUPPORTED_CREATIVE_VPAID_VERSION_MIN=this.PLAYER_VPAID_VERSION=2},a.VPAIDRenderer.prototype={},a.VPAIDRenderer.prototype.constructor=a.VPAIDRenderer,a.VPAIDRenderer.VastCompanion=function(e,t,n,i){this._width=e,this._height=t,this._apiFramework=n,this._xmlNode=i},a.VPAIDRenderer.VastCompanion.prototype={getWidth:function(){return this._width},getHeight:function(){return this._height},_isValidResource:function(e,t){return"StaticResource"===e&&t["@attributes"].creativeType||"IFrameResource"===e&&t.value||"HTMLResource"===e&&t.value},hasValidRendtions:function(){for(var e in this._xmlNode)if(this._xmlNode.hasOwnProperty(e)&&("StaticResource"===e||"IFrameResource"===e||"HTMLResource"===e))for(var t=[].concat(this._xmlNode[e]),n=t.length-1;0<=n;n--)if(this._isValidResource(e,t[n]))return!0;return!1},translateToAdInstance:function(e){var t;if(this._xmlNode.CompanionClickThrough&&e.setClickThroughUrl(a.EVENT_AD_CLICK,this._xmlNode.CompanionClickThrough.value),this._xmlNode.TrackingEvents){var n=this._xmlNode.TrackingEvents;if(n.Tracking){var i=[];for(t=(n=[].concat(n.Tracking)).length-1;0<=t;t--)"creativeView"===n[t]["@attributes"].event&&i.push(n[t].value);0<i.length&&e.addEventCallbackUrls(a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,i)}}for(var r in this._xmlNode)if(this._xmlNode.hasOwnProperty(r)&&("StaticResource"===r||"IFrameResource"===r||"HTMLResource"===r))for(t=(n=[].concat(this._xmlNode[r])).length-1;0<=t;t--)if(this._isValidResource(r,n[t])){i=n[t];var s=e.addCreativeRendition();s.setWidth(this._width),s.setHeight(this._height),s.setCreativeApi("None");var o=s.addCreativeRenditionAsset("VPAIDAsset"+t,!0);o.setContentType("text/html_doc_lit_mobile"),o.setMimeType("text/html");var l,u=e.getEventCallbackUrls(a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK)[0],c=r;if("HTMLResource"===c)o.setContent(a.HTMLAdGenerator.wrapUnsafeHTML(i.value,e.getSlot().getCustomId(),this._width,this._height));else"IFrameResource"===c?l="iframe":"StaticResource"===c&&(l=this._xmlNode.creativeType),o.setContent(a.HTMLAdGenerator.generateAd(i.value,u,e.getSlot().getCustomId(),this._width,this._height,l,o.getContentType()));a.debug("rendtion width: "+s.getWidth()+" height:"+s.getHeight()+" asset content:"+o.getContent())}}},a.VPAIDRenderer.VastCompanion.prototype.constructor=a.VPAIDRenderer.VastCompanion,a.VPAIDRenderer.VastAdSelect=function(){},a.VPAIDRenderer.VastAdSelect.prototype={_getDeadSpaceRatio:function(e,t){var n=e.getWidth();e=e.getHeight();var i=t.getWidth();t=t.getHeight();var r=1;return n<=i&&e<=t&&(r=1-n*e/(i*t)),a.debug("computing dead space ratio ("+r+") for slot "+i+"x"+t+" and ad "+n+"x"+e),r},matchAdsWithSlots:function(e,t){var n;for(a.log("VPAIDRenderer: Matching ads with slots"),n=0;n<t.length;++n)t[n].matched=!1;var i=[],r=[];for(n=0;n<e.length;n++)for(var s=0;s<t.length;s++)r.push({ratio:this._getDeadSpaceRatio(e[n],t[s]),adIndex:n,slotIndex:s});for(r.sort(function(e,t){return e.ratio-t.ratio}),n=0;n<r.length&&1!==r[n].ratio;n++){var o=e[(s=r[n]).adIndex],l=t[s.slotIndex];o.matched||l.matched||(a.log("Winning ratio:"+s.ratio+" Winning ad:"+o.getWidth()+"x"+o.getHeight()+" for slot:"+l.getWidth()+"x"+l.getHeight()),i.push({ad:o,slot:l}),o.matched=!0,l.matched=!0)}return i}},a.VPAIDRenderer.VastAdSelect.prototype.constructor=a.VPAIDRenderer.VastAdSelect,a.Util.mixin(a.VPAIDRenderer.prototype,{_initParams:function(){var e=this._rendererController.getParameter(a.PARAMETER_VPAID_CREATIVE_TIMEOUT_DELAY);this._isCORSEnforcementDisabled=this._rendererController.getParameter(a.PARAMETER_DISABLE_CORS_ENFORCEMENT),e&&0<Number(e)&&(this.creativeTimeoutDelayInMs=Number(e)),a.log("initParams(), creative timeout delay in miliseconds:"+this.creativeTimeoutDelayInMs),e=parseFloat(this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE)),this.vpaidDesiredBitrate=0<e?e:this.vpaidDesiredBitrate,a.log("initParams(), desired bitrate: "+this.vpaidDesiredBitrate)},_failWithError:function(e,t,n){var i={};i[a.INFO_KEY_ERROR_MODULE]="VPAIDRenderer",i[a.INFO_KEY_ERROR_CODE]=e,n||(n=a.ERROR_VAST_GENERAL_VPAID_ERROR),i[a.INFO_KEY_VAST_ERROR_CODE]=n,t&&(i[a.INFO_KEY_ERROR_INFO]=t),this._rendererController.handleStateTransition(a.RENDERER_STATE_FAILED,i),this.dispose()},onCreativeLoadError:function(e,t){a.log("VPAIDRenderer: onCreativeLoadError()"),this.vpaidCreative.cancelTimeoutEvent(),this._failWithError(e,t)},onCreativeTimeout:function(){a.log("VPAIDRenderer: onCreativeTimeout()");var e=this.vpaidCreative.getTimeoutOperation();this._failWithError(a.ERROR_TIMEOUT,"loadCreativeAsset"!==e?"Creative function "+e+" timeout":"load creative asset timeout")},setVolume:function(e){a.log("VPAIDRenderer: setVolume("+e+")"),this.vpaidCreative&&this.vpaidCreative.setAdVolume(e)},onAdVolumeChange:function(){a.log("VPAIDRenderer: onAdVolumeChange()");var e=this.vpaidCreative.getAdVolume();e<0||1<e?a.log("Invalid ad volume value"):(this.isMuted&&2<100*e?(this.isMuted=!1,this._rendererController.processEvent({name:a.EVENT_AD_UNMUTE})):!this.isMuted&&100*e<2&&(this.isMuted=!0,this._rendererController.processEvent({name:a.EVENT_AD_MUTE})),this._rendererController.processEvent({name:a.EVENT_AD_VOLUME_CHANGE}))},onAdExpandedChange:function(){a.log("VPAIDRenderer: onAdExpandedChange()"),this.vpaidCreative.getAdExpanded()?this._rendererController.processEvent({name:a.EVENT_AD_EXPAND}):this._rendererController.processEvent({name:a.EVENT_AD_COLLAPSE})},onAdDurationChange:function(){a.log("VPAIDRenderer: onAdDurationChange(): duration changed to "+this.vpaidCreative.getAdDuration())},onAdClickThru:function(e,t,n){a.log("VPAIDRenderer: onAdClickThru() with url:"+e+" id:"+t+" playerHandles:"+n),(t={name:a.EVENT_AD_CLICK,info:{}}).info[a.INFO_KEY_SHOW_BROWSER]=!0===n,!0===n?e?(a.log("onAdClickThru(): open window with overrided url"),t.info[a.INFO_KEY_URL]=e):a.log("onAdClickThru(): open window with url booked in MRM UI or VAST clickthru url"):a.log("onAdClickThru(): send click tracking"),this._rendererController.processEvent(t)},onCreativeAssetLoaded:function(){a.log("VPAIDRenderer: onCreativeAssetLoaded()"),this.vpaidCreative.cancelTimeoutEvent();var e,t=this,n=function(){var e=t.vpaidCreative.handshakeVersion(t.PLAYER_VPAID_VERSION.toFixed(1));return e?!(parseFloat(e)<t.SUPPORTED_CREATIVE_VPAID_VERSION_MIN)||(t._failWithError(a.ERROR_INVALID_VALUE,"Only support creatives with VPAID version >= "+t.SUPPORTED_CREATIVE_VPAID_VERSION_MIN.toFixed(1)),!1):(t._failWithError(a.ERROR_3P_COMPONENT,"Cannot get VPAID version from the creative"),!1)};if((e=t.vpaidCreative.checkVPAIDInterface("handshakeVersion initAd startAd stopAd subscribe unsubscribe getAdLinear".split(" "))).passed||t._failWithError(a.ERROR_3P_COMPONENT,"Missing interfaces in the VPAID creative: "+e.missingInterfaces),e.passed&&n()){t.creativeEventCallbacks={AdStarted:t.onAdStarted,AdStopped:t.onAdStopped,AdSkipped:t.onAdSkipped,AdLoaded:t.onAdLoaded,AdLinearChange:t.onAdLinearChange,AdSizeChange:t.onAdSizeChange,AdExpandedChange:t.onAdExpandedChange,AdDurationChange:t.onAdDurationChange,AdVolumeChange:t.onAdVolumeChange,AdImpression:t.onAdImpression,AdClickThru:t.onAdClickThru,AdVideoFirstQuartile:t.onAdVideoFirstQuartile,AdVideoMidpoint:t.onAdVideoMidpoint,AdVideoThirdQuartile:t.onAdVideoThirdQuartile,AdVideoComplete:t.onAdVideoComplete,AdUserAcceptInvitation:t.onAdUserAcceptInvitation,AdUserMinimize:t.onAdUserMinimize,AdUserClose:t.onAdUserClose,AdPaused:t.onAdPaused,AdPlaying:t.onAdResumed,AdError:t.onAdError,AdLog:t.onAdLog},t.vpaidCreative.setCallbacksForCreative(t.creativeEventCallbacks,t),this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_EXPAND,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_CLOSE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_MINIMIZE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_ACCEPT_INVITATION,a.CAPABILITY_STATUS_ON),(n=this.rendition?this.rendition.getParameter("creativeData"):null)||(n=this.rendition?this.rendition.getParameter("VPAID_creativeData"):null),n&&(n=a.Util.trim(n)),n={AdParameters:n};var i=this._rendererController.getAdInstance().getSlot();this.videoBase.style.width="0px",this.videoBase.style.height="0px",this.videoBase.style.zIndex="100000",this.videoBase.style.position="absolute",this.videoBase.style.left=this._rendererController.getContentVideoElement().style.left,this.videoBase.style.top=this._rendererController.getContentVideoElement().style.top,this.videoBase.className="fw_vpaid_slot",this.videoParent=i.getBase();var r=this._rendererController.getContentVideoElement();if("nodeType"in r&&0<r.nodeType)try{this.videoParent.insertBefore(this.videoBase,this._rendererController.getContentVideoElement())}catch(e){this.videoParent.insertBefore(this.videoBase,this.videoParent.firstChild)}else this.videoParent.insertBefore(this.videoBase,this.videoParent.firstChild);r={slot:this.videoBase,videoSlot:this._rendererController.getContentVideoElement(),videoSlotCanAutoPlay:!0};var s=i.getWidth();i=i.getHeight(),s&&i||!this.rendition||(s=this.rendition.getWidth(),i=this.rendition.getHeight()),this.vpaidCreative.initAd(s,i,this.vpaidViewmode,this.vpaidDesiredBitrate,n,r)}},onAdLoaded:function(){a.log("VPAIDRenderer: onAdLoaded()"),this.vpaidCreative.cancelTimeoutEvent(),a.log("Ad duration:"+this.getDuration());var r=this,e=function(e,t){var n=t;if(a.debug(n.length+" companion slots to fill."),0!==n.length&&0!==e.length){var i=(new a.VPAIDRenderer.VastAdSelect).matchAdsWithSlots(e,n);if(0!==i.length){for(e=[],n=[],t=i.length-1;0<=t;t--)e.push(i[t].ad),n.push(i[t].slot);for(t=(n=r._rendererController.scheduleAdInstances(n)).length-1;0<=t;t--)e[t].translateToAdInstance(n[t])}}},t=function(e){if(!e)return a.log("The adCompanions property is empty."),null;if(a.log("parsing adCompanions: "+e),window.DOMParser)var t=(new DOMParser).parseFromString(e,"text/xml");else(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e);if(!(e=a.Util.xmlToJson(t))||!e.CompanionAds||!e.CompanionAds.Companion)return a.log("No companion ads found in parsed xml"),[];t=[];for(var n=(e=[].concat(e.CompanionAds.Companion)).length-1;0<=n;n--){var i=e[n];if(i["@attributes"]){var r=i["@attributes"].width,s=i["@attributes"].height;if(!r||!s||r<0||s<0)a.log("Missing width/height for companion.");else{var o=i["@attributes"].apiFramework||"";a.debug("Companion "+r+"x"+s+" api:"+o),(i=new a.VPAIDRenderer.VastCompanion(r,s,o,i)).hasValidRendtions()&&t.push(i)}}}return t}(r.vpaidCreative.getAdCompanions());t&&0<t.length?e(t,this._rendererController.getCompanionSlots()):a.log("VPAIDAdRenderer: No companions from VPAID creative."),e=this._rendererController.getAdInstance()._context.getAdVolume(),!this.isMuted&&100*e<2&&(this.isMuted=!0),this.setVolume(e),this.vpaidCreative.startAd()},onVisibilityChange:function(){a.log("onVisibilityChange:"+(document.hidden?"invisible":"visible")),a.log("Current playback state:"+this.adPlaybackState),document.hidden&&"playing"===this.adPlaybackState?(a.log("Pause the VPAID creative"),this.vpaidCreative.pauseAd(),this.vpaidCreative._creativePausedByTabSwitch=!0):!document.hidden&&"paused"===this.adPlaybackState&&this.vpaidCreative._creativePausedByTabSwitch&&(a.log("Resume the VPAID creative"),this.vpaidCreative.resumeAd(),this.vpaidCreative._creativePausedByTabSwitch=!1)},onAdStarted:function(){a.log("VPAIDRenderer: onAdStarted()"),this.vpaidCreative.timeoutReached?a.log("VPAID ad has already failed due to timeout. The AdStarted event will not be handled."):(this.vpaidCreative.cancelTimeoutEvent(),this.vpaidCreative._autoPauseAdOnVisibilityChange&&(this._visibilityChangeListener=this.onVisibilityChange.bind(this),document.addEventListener("visibilitychange",this._visibilityChangeListener,!1)))},onAdStopped:function(){a.log("VPAIDRenderer: onAdStopped()"),this.vpaidCreative?(this.vpaidCreative.cancelTimeoutEvent(),this.timePositionClass===a.TIME_POSITION_CLASS_OVERLAY&&this.vpaidCreative.getAdLinear()&&this._rendererController.requestContentStateChange(!1),this.vpaidCreative&&!this.vpaidCreative.timeoutReached&&(this.adPlaybackState?(this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED),this.dispose()):(a.warn("Expecting AdStarted and AdImpression events but got AdStopped event instead. Fail."),this._failWithError(a.ERROR_3P_COMPONENT,"Expecting AdStarted and AdImpression events from the VPAID creative but got AdStopped event instead")))):a.log("The VPAID creative has been disposed. Return.")},onAdImpression:function(){if(a.log("VPAIDRenderer: onAdImpression()"),this.vpaidCreative.timeoutReached)a.log("VPAID ad has already failed due to timeout. The AdImpression event will not be handled.");else{var e=this.vpaidCreative.getAdVolume();this.isMuted=0<e&&100*e<=2,this.adPlaybackState="playing",this._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)}},onAdLinearChange:function(){a.log("VPAIDRenderer: onAdLinearChange()");var e=this.vpaidCreative.getAdLinear();e?a.log("onAdLinearChange(): non-linear click to linear -> request content video to pause"):a.log("onAdLinearChange(): linear back to non-linear -> request content video to resume"),this._rendererController.requestContentStateChange(e)},onAdSizeChange:function(){a.log("VPAIDRenderer: onAdSizeChange()")},onAdPaused:function(){a.log("VPAIDRenderer: onAdPaused()"),"playing"===this.adPlaybackState&&this._rendererController.processEvent({name:a.EVENT_AD_PAUSE}),this.adPlaybackState="paused"},onAdResumed:function(){a.log("VPAIDRenderer: onAdResumed()"),"paused"===this.adPlaybackState&&this._rendererController.processEvent({name:a.EVENT_AD_RESUME}),this.adPlaybackState="playing"},onAdSkipped:function(){a.log("VPAIDRenderer: onAdSkipped()"),this.dispose(),this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)},onAdVideoFirstQuartile:function(){a.log("VPAIDRenderer: onAdVideoFirstQuartile()"),this._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE})},onAdVideoMidpoint:function(){a.log("VPAIDRenderer: onAdVideoMidpoint()"),this._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT})},onAdVideoThirdQuartile:function(){a.log("VPAIDRenderer: onAdVideoThirdQuartile()"),this._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE})},onAdVideoComplete:function(){a.log("VPAIDRenderer: onAdVideoComplete"),this._rendererController.processEvent({name:a.EVENT_AD_COMPLETE})},onAdUserAcceptInvitation:function(){a.log("VPAIDRenderer: onAdUserAcceptInvitation()"),this._rendererController.processEvent({name:a.EVENT_AD_ACCEPT_INVITATION})},onAdUserClose:function(){a.log("VPAIDRenderer: onAdUserClose()"),this._rendererController.processEvent({name:a.EVENT_AD_CLOSE})},onAdUserMinimize:function(){a.log("VPAIDRenderer: onAdUserMinimize()"),this._rendererController.processEvent({name:a.EVENT_AD_MINIMIZE})},onAdLog:function(e){a.log("VPAIDRenderer: onAdLog: "+e)},onAdError:function(e){a.log("VPAIDRenderer: onAdError(): "+e),this._failWithError(a.ERROR_3P_COMPONENT,"AdError event:"+e)},start:function(e){if(a.log("VPAIDRenderer start()"),this._rendererController=e,this.timePositionClass=this._rendererController.getAdInstance().getSlot().getTimePositionClass(),this.rendition=this._rendererController.getAdInstance().getActiveCreativeRendition(),this._initParams(),e=(e=this.rendition?this.rendition.getPrimaryCreativeRenditionAsset():null)?e.getUrl():null){this.vpaidCreative=new a.VPAIDWrapper,this.vpaidCreative._autoPauseAdOnVisibilityChange=this._rendererController.getParameter(a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE),this.vpaidCreative._isCORSEnforcementDisabled=this._isCORSEnforcementDisabled,this.vpaidCreative.setTimeoutValueInMs(this.creativeTimeoutDelayInMs),this.vpaidCreative.addEventListener("loaderror",this.onCreativeLoadError.bind(this)),this.vpaidCreative.addEventListener("timeout",this.onCreativeTimeout.bind(this)),this.vpaidCreative.addEventListener("CreativeAssetLoaded",this.onCreativeAssetLoaded.bind(this));try{this.vpaidCreative.loadCreativeAsset(e)}catch(e){a.warn(e),this._isCORSEnforcementDisabled?(this._failWithError(a.ERROR_UNKNOWN,"Error when loading creative"+e),this.cancelTimeoutEvent()):that._eventHandlers.loaderror(a.ERROR_UNKNOWN,"Error when loading creative: "+e)}}else this._failWithError(a.ERROR_NULL_ASSET,"Creative asset url cannot be null")},stop:function(){a.log("VPAIDRenderer stop()"),this.vpaidCreative.stopAd()},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){var e=this.vpaidCreative.getAdDuration(),t=this.vpaidCreative.getAdRemainingTime();return 0<=e&&0<=t&&(this.playheadTime=e-t),this.playheadTime<0&&(this.playheadTime=-1),this.playheadTime},getDuration:function(){var e=this.vpaidCreative.getAdDuration();return 0<=e?e:-1},pause:function(){a.log("VPAIDRenderer pause()"),this._rendererController.processEvent({name:a.EVENT_AD_PAUSE}),this.vpaidCreative.canPauseAd()?"playing"===this.adPlaybackState&&(this.adPlaybackState="pausing",this.vpaidCreative.pauseAd()):a.log("The creative is not able to pause")},resume:function(){a.log("VPAIDRenderer resume()"),this._rendererController.processEvent({name:a.EVENT_AD_RESUME}),this.vpaidCreative.canResumeAd()?"paused"===this.adPlaybackState&&(this.adPlaybackState="resuming",this.vpaidCreative.resumeAd()):a.log("The creative is not able to resume")},dispose:function(){a.log("VPAIDRenderer dispose()"),this.vpaidCreative&&(this.videoParent&&(this.videoParent.removeChild(this.videoBase),this.videoParent=null),this._visibilityChangeListener&&this.vpaidCreative._autoPauseAdOnVisibilityChange&&(a.log("remove visibilitychange listener"),document.removeEventListener("visibilitychange",this._visibilityChangeListener,!1)),this.vpaidCreative.removeCallbacksForCreative(this.creativeEventCallbacks),this.vpaidCreative.removeEventListener("timeout"),this.vpaidCreative.removeEventListener("loaderror"),this.vpaidCreative=null)},resize:function(){a.log("VPAIDAdRenderer resize()");var e=this._rendererController.getAdInstance().getSlot(),t=e.getWidth();e=e.getHeight(),a.log("VPAIDRenderer new size width:"+t+" height:"+e),this.vpaidCreative.resizeAd(t,e,this.vpaidViewmode)}}),a},w.tv.freewheel.SDK||(w.tv.freewheel.SDK=w.tv.freewheel[U]("tv.freewheel.SDK"))}();var define=null,eStatTag=function(e){"use strict";function o(e){b&&(console.debug?console.debug("eStat - "+e):console.log&&console.log("eStat - "+e))}function n(e){console.error?console.error("eStat - "+e):console.log&&console.log("eStat - "+e)}function s(){var e="",t=(window.location!==window.parent.location?document.referrer:document.location).toString();(t=t.replace(/^https?:\/\//,"").split("/"))[0].match(/:/g)?e=t[0].split(":")[0]:e=t[0];return e}function l(){var e="",t=document.referrer;return"redirection"===w.implementation&&(t=function(){for(var e="",t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");if("cks"===i[0]&&"-1"!==i[1])return e=t[n].substring(4),document.cookie="cks=-1;",e}return r="",a=document.URL,a.match(/__cks_=/g)&&(r=a.match(/__cks_=([^&]+)/g)[0].split("=")[1]),r||(w.implementation="",l());var r,a}()),"frame"===w.implementation&&(t=s()),t&&(e="&r="+c(t)),e}function i(){if(!R)return"";var e="";return"",e+=w.serial+"?v="+O+"&tn=JS"+function(){var e="",t=!0,n=["domain","measure"];if(e+=u("levels"),"streaming"===w.measure){n.push("page");for(var i=["cmsPS","cmsPO","cmsOP","cmsMV","cmsEV"],r=0;r<i.length;r++)e+="&"+i[r]+"="+w.streaming[i[r]]}else n.push("streaming"),n.push("page"),e+=u("segments"),e+=u("criteria");for(var a in C)if("exclude"!==C[a]){for(var s=0;s<n.length;s++)n[s]===a&&(t=!1);t&&(e+=u(a)),t=!0}return e}()+"&sch="+N+"&scw="+M+"&scp="+k+"&vh="+L+"&vw="+x+"&enc="+U+"&n="+Math.round(1e9*Math.random())+w.domain+w.referer,void 0!==X&&(e+=X),e}function u(e){if(!(e in w))return"";var t="",n="",i="";if("string"==typeof C[e])t+="&"+(n=C[e])+"="+c(w[e]);else for(i in void 0===C[e]?n=C[w.measure][e]:"object"==typeof C[e]&&(n=C[e]),n)w[e][i]&&"exclude"!==n[i]&&(t+="&"+n[i]+"="+c(w[e][i]));return t}function c(e){var t="";e&&(256<encodeURIComponent(e).length&&o(S.max256+" "+e.substring(0,20)),t=encodeURIComponent(e).substring(0,256));return t}function d(e){if(e){if(W||"page"===w.measure){void 0!==w.measureNodesURL?e=w.measureNodesURL+e:"page"===w.measure?e=j+e:"streaming"===w.measure&&(e=B+e),"streaming"===w.measure&&(G++,e=e+"&cmsVI="+w.streaming.cmsVI+"&cmsRK="+G,12===w.streaming.cmsPS&&(G=0,W=!1),"restricted"===w.streaming.access&&(R=!1,K.stop(),o(S.accesRestricted)));var t=document.createElement("img"),n=e.split("&"),i=n[0].split("?");n.push(i[1]),n.splice(0,1);var r=i[0];n.sort();for(var a="?",s=0;s<n.length;s++)r+=a+n[s],a="&";t.src=r,o(S.requestSend+e),"streaming"===w.measure&&(w.streaming.cmsOP=w.streaming.cmsPO)}else setTimeout(function(){d(e)},500);return!0}}function r(e){return 12===w.streaming.cmsPS?(d(e),void(z=null)):(z||(d(e),window.setTimeout(function(){!function(){if(z&&z.firstPS!==z.cmsPS){w.streaming.cmsEV="state",w.streaming.cmsPS=z.cmsPS,w.streaming.cmsPO=z.cmsPO,w.streaming.cmsOP=z.cmsOP,w.streaming.cmsVI=z.cmsVI;var e=i();d(e)}z=null}()},1e3),(z=[]).firstPS=w.streaming.cmsPS),z.cmsPS=w.streaming.cmsPS,z.cmsPO=w.streaming.cmsPO,z.cmsOP=w.streaming.cmsOP,void(z.cmsVI=w.streaming.cmsVI))}function a(){w.streaming.cmsMV=D,isNaN(w.streaming.cmsPO)&&(w.streaming.cmsPO=0),w.streaming.cmsOP=w.streaming.cmsPO,q!==[]&&K.stop(),K.launch()}function h(){w.streaming.cmsVI=Math.floor(1e17*Math.random()%0x8db076000000000),w.streaming.access="full",B=V,function(){setTimeout(function(){W=!0},2e3);var e=(void 0!==w.authURL?w.authURL:F+"auth.estat.com/")+w.serial;if(I)P?I.onload=E:I.onreadystatechange=function(){4===I.readyState&&E()},I.open("GET",e,!0),I.send();else{var t=function(){var e=[eS_access,eS_host,cmsVI];v(e)},n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e+".js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i),n.addEventListener?n.addEventListener("load",function(){t()},!1):n.onreadystatechange=function(){n.readyState in{complete:1,loaded:1}&&t()}}}(),"automatic"===w.implementation&&(o(S.automaticModeActivated),f())}function t(){var e=w.streaming.am_TS_cb;w.streaming.am_TS_cb=(new Date).getTime();var t=1,n=0;w.streaming.am_newPosition=_(),0!==e&&(n=w.streaming.am_newPosition-w.streaming.am_oldPosition,t=(w.streaming.am_TS_cb-e)/1e3),1==w.streaming.am_isPlaying?t+.9<n||n<0?(A("pause",Math.round(w.streaming.am_oldPosition)),A("play",g())):0===n&&(A("pause",g()),w.streaming.am_isPlaying=0):0<n&&n<=t+.9&&(A("play",Math.round(w.streaming.am_oldPosition)),w.streaming.am_isPlaying=1),w.streaming.am_oldPosition=w.streaming.am_newPosition}function f(){w.streaming.am_cb||(w.streaming.am_oldPosition=0,w.streaming.am_newPosition=0,w.streaming.am_isPlaying=-1,w.streaming.am_TS_cb=0,w.streaming.am_cb=setInterval(t,1e3))}function p(){K.stop(),w.streaming.cmsPS=12,r(i()),w.streaming.cmsVI=0,w.streaming.cmsPO=0,w.streaming.cmsOP=0}function _(){var e="0";if("replay"===w.streaming.diffusion&&!w.streaming.wasTimeshifting){if(e=w.streaming.callbackPosition(w.streaming.playerObj),!isNaN(e))return e;o(S.positionFail+e)}return e}function g(){return Math.round(_())}function m(){w.streaming.cmsEV="polling",w.streaming.cmsPO=g(),z&&(w.streaming.cmsPS=z.firstPS),d(i())}function v(e){G||(w.streaming.access=e[0].split("=")[1]||e[0],B=e[1].split("=")[1]||e[1],"denied"===w.streaming.access?(R=!1,n(S.accesDenied)):(e[2].split("=")[1]?w.streaming.cmsVI=e[2].split("=")[1].replace(/\"/g,""):w.streaming.cmsVI=e[2],W=!0))}function E(){200===I.status?v(I.responseText.split("|")):401===I.status&&(w.streaming.access="denied",R=!1,n(S.accesDenied))}function y(e){return function(e){var t="";try{t=new window.ActiveXObject(e)}catch(e){}return t}(e)?e:""}function T(e,t){var n,i=!1;for(var r in e)if("object"!=typeof e[r])(t||"measure"!==r&&"serial"!==r)&&(w[r]=e[r],i=!0);else for(var a in e[r])w[r]||(w[r]={}),("streamName"!==a||5!==w.streaming.cmsPS&&7!==w.streaming.cmsPS)&&(w[r][a]=e[r][a],i=!0);return w.domain=(n="",w.domain&&!w.domain.match("&"+C.domain+"=")?"&"+C.domain+"="+c(w.domain):(n="frame"===w.implementation?s():document.domain)?"&"+C.domain+"="+c(n):n),w.referer=l(),i}function A(e,t){if(!("play"===e|"pause"===e|"stop"===e))return n(S.wrongParameter),!1;switch(w.streaming.cmsEV="state",void 0===t||isNaN(t)||"live"===w.streaming.diffusion?w.streaming.cmsPO=g():w.streaming.cmsPO=Math.round(t),e){case"play":if(function(){"denied"!==w.streaming.access&&(R=!0);var e=[];e.live=1,e.replay=1,e.timeshifting=1,w.streaming.diffusion&&e[w.streaming.diffusion]||(n(S.noDiffusionType),R=!1),w.streaming.playerName||(n(S.noPlayerName),R=!1),w.streaming.streamName||(n(S.noStreamName),R=!1),"replay"!==w.streaming.diffusion||w.streaming.wasTimeshifting||w.streaming.callbackPosition||(n(S.noCallBack),R=!1)}(),!R||5===w.streaming.cmsPS)break;w.streaming.cmsPS=5,G||(w.streaming.cmsVI||h(),a()),r(i());break;case"pause":if(!R||7===w.streaming.cmsPS||0===G)break;"timeshifting"===w.streaming.diffusion?(p(),w.streaming.diffusion="replay",w.streaming.wasTimeshifting=!0):(w.streaming.cmsPS=7,G||(w.streaming.cmsVI||h(),a()),r(i()));break;case"stop":if(!R||!G){R&&!G&&n(S.wrongFirstParameter);break}p();break;default:return!1}return!0}var S={requestSend:"INFO: Request sended : ",automaticModeActivated:"INFO: automatic mode activated",automaticModeImpossible:"ERROR: the automatic mode is not available for live or timeshift stream",accesRestricted:"WARNING: your account is not allowed to send more than one request by session to our servers. Please contact our client service to change its rights",max256:"WARNING: the maximum number of characters is limited to 256, the sended data will be truncated",positionFail:"WARNING: return value of the position function must be an int or a float",cannotUsePost:"WARNING: post() mathod cannot be called in a streaming context",cannotUseNotify:"WARNING: the notifyPlayer() cannot be called in a non streaming context",automaticNoNotify:"WARNING: the notifyPlayer() cannot be called with play or pause in an automatic mode",noInit:"ERROR: you must pass a JSON object as a parameter to the contructor \n\n1 - you have to create a JSON object \n\nvar mySettings = {\n\tserial:'monSerial',\n\t...,\n\tlevels:{\n\t\tlevel_1:'mon niveau1'\n\t}\n\t... \n}\n\n2 - Instantiate the measure object with your JSON object as parameter\n\n var monTag = new eStatTag(mySettings);",noMeasure:"ERROR: you must specify the type of measure you want {measure:'streaming|page'}",noSerial:"ERROR: you must specify the serial number in which you want to send the measure {serial:XXXXXXX}",noCallBack:"ERROR: you must specify the position callback",noStreamInfo:"ERROR: you must specify the streaming informations\n\nvar confStreamingAnalyticsMediametrie = {\n\tstreaming:{\n\t\tdatas...\n\t}\n}",noDiffusionType:"ERROR: you must specify the diffusion mode\n\nvar confStreamingAnalyticsMediametrie = {\n\tstreaming:{\n\t\tdiffusion:'live||replay||timeShift'...\n\t}\n}",noPlayerName:"ERROR: you must specify a name for your player\n\nvar confStreamingAnalyticsMediametrie= {\n\tstreaming{\n\t\tplayerName:'jwplayer|html5...'\n\t}\n}",noStreamName:"ERROR: you must specify a name for your stream\n\nvar confStreamingAnalyticsMediametrie= {\n\tstreaming{\n\t\tstreamName:'myStream'\n\t}\n}",streamingAndCriteria:"ERROR: streaming measure doesn't accept criteria variable",accesDenied:"ERROR: your account is not allowed to send requests to our servers. Please contact our client service to change its rights",streamingAndSegments:"ERROR: streaming measure doesn't accept segments variable",wrongParameter:"ERROR: the notifyPlayer() function only accept values play, pause or stop as first parameter",wrongFirstParameter:"ERROR: the notifyPlayer() function only accept values play or pause as first parameter"},R=!0,b=!1;!function(e){if(!e)return n(S.noInit),R=!1;if(e.hasOwnProperty("serial")&&e.serial||(n(S.noSerial),R=!1),(!e.hasOwnProperty("measure")||"page"!==e.measure&&"streaming"!==e.measure)&&(n(S.noMeasure),R=!1),b=e.hasOwnProperty("debug")&&("true"===e.debug||!0===e.debug),"streaming"===e.measure){if(e.hasOwnProperty("streaming")){var t={live:1,replay:1,timeshifting:1};e.streaming.hasOwnProperty("diffusion")&&t.hasOwnProperty(e.streaming.diffusion)||(n(S.noDiffusionType),R=!1),e.streaming.hasOwnProperty("playerName")&&e.streaming.playerName||(n(S.noPlayerName),R=!1),"replay"===e.streaming.diffusion&&(e.streaming.hasOwnProperty("callbackPosition")&&e.streaming.callbackPosition||(n(S.noCallBack),R=!1)),e.hasOwnProperty("implementation")&&"automatic"===e.implementation&&"replay"!==e.streaming.diffusion&&(o(S.automaticModeImpossible),R=!1)}else n(S.noStreamInfo),R=!1;e.hasOwnProperty("criteria")&&(n(S.streamingAndCriteria),R=!1),e.hasOwnProperty("segments")&&(n(S.streamingAndSegments),R=!1)}}(e);var I,C={measure:{page:"exclude",streaming:"exclude"},serial:"exclude",implementation:"exclude",authURL:"exclude",measureNodesURL:"exclude",crmID:"crmid",uid:"uid",domain:"dom",master:"g",wrapper:"w",page:{levels:{level_1:"c",level_2:"p",level_3:"l3",level_4:"l4"},criteria:{critere_1:"c1",critere_2:"c2",critere_3:"c3",critere_4:"c4",critere_5:"c5"},segments:{segment_1:"seg1",segment_2:"seg2",segment_3:"seg3",segment_4:"seg4",segment_5:"seg5",segment_6:"seg6",segment_7:"seg7",segment_8:"seg8"}},streaming:{levels:{level_1:"cmsS3",level_2:"cmsS2",level_3:"cmsS1",level_4:"cmsS4",level_5:"cmsS5"},diffusion:"exclude",streamName:"cmsSN",streamURL:"cmsME",streamGenre:"cmsGR",streamDuration:"cmsDU",playerName:"cmsPL",playerVersion:"cmsPV",pluginName:"pn",pluginVersion:"pv"},newLevels:{newLevel_1:"ml1",newLevel_2:"ml2",newLevel_3:"ml3",newLevel_4:"ml4",newLevel_5:"ml5",newLevel_6:"ml6",newLevel_7:"ml7",newLevel_8:"ml8",newLevel_9:"ml9",newLevel_10:"ml10",newLevel_11:"ml11"},mediaInfo:{mediaContentId:"msCid",mediaDiffMode:"msDm",mediaChannel:"msCh"},netMeasurement:"miCh"},P=!!window.XDomainRequest,w={},O="5.4.0",D=5,N=screen.height,M=screen.width,L=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,x=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,k=screen.colorDepth,F="https:"===document.location.protocol?"https://":"http://",U=document.characterSet||document.charset,V=F+"mesure.streaming.estat.com/m/web/",B="",j=F+"prof.estat.com/m/web/";I=function(){var e=null;if(P)e=new window.XDomainRequest;else for(var t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=0;n<t.length;n++)try{e=t[n]();break}catch(e){}return e}();var H,Y,q=[],K={launch:function(){q[0]=window.setTimeout(function(){m()},1e4),q[1]=window.setTimeout(function(){m()},2e4),q[2]=window.setTimeout(function(){m()},4e4),q[3]=window.setInterval(function(){m()},6e4)},stop:function(){for(var e=0;e<3;e++)window.clearTimeout(q[e]);window.clearInterval(q[3]),q=[]}},G=0,W=!1,z=null,X=(Y="",Y+=screen.width+"x"+screen.height+"x"+screen.colorDepth+"|",Y+=(H=new RegExp("/[0-9]+(.[0-9]+)*/","g"),navigator.userAgent.replace(H,"")+"|"),Y+=function(e){var t="",n="";if(navigator.appName.match("/Internet Explorer/g")){n=["wmplayer.ocx","QuickTime.QuickTime","ShockwaveFlash.ShockwaveFlash","VideoLAN.VLCPlugin","AgControl.AgControl","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","AcroPDF.PDF","PDF.PdfCtrl","SWCtl.SWCtl"];for(var i=0;i<n.length;i++)t+=y(n[i])+e}else if(n=navigator.plugins)for(var r=0;r<n.length;r++){var a=n[r];t||(t+=e),t+=a.name;for(var s=0;s<a.length;s++)t||(t+=e),t+=a[s].type}return t}("|")+"|",Y+=navigator.cookieEnabled?"Yes":"No",X="&ck2="+function(e){var t,n,i,r,a,s,o,l,u;for(t=3&e.length,n=e.length-t,i=u,u=3735928559,a=3432918353,s=461845907,l=0;l<n;)o=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,i=27492+(65535&(r=5*(65535&(i=(i^=o=(65535&(o=(o=(65535&o)*a+(((o>>>16)*a&65535)<<16)&4294967295)<<15|o>>>17))*s+(((o>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(r>>>16)&65535)<<16);switch(o=0,t){case 3:o^=(255&e.charCodeAt(l+2))<<16;break;case 2:o^=(255&e.charCodeAt(l+1))<<8;break;case 1:i^=o=(65535&(o=(o=(65535&(o^=255&e.charCodeAt(l)))*a+(((o>>>16)*a&65535)<<16)&4294967295)<<16|o>>>16))*s+(((o>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}(Y));return T(e,!0),"streaming"===w.measure&&R&&h(),{setDebug:function(e){return b=e},post:function(){return o("INFO: Call post method"),"page"!==w.measure?(o(S.cannotUsePost),!1):(d(i()),!0)},set:function(e){o("INFO: Call set method");return T(e)},notifyPlayer:function(e,t){var n="INFO: Call notifyPlayer method with state : "+e;return t&&(n=n+" and position :"+t),o(n),"streaming"!==w.measure?(o(S.cannotUseNotify),!1):"automatic"===w.implementation&&"stop"!==e?(o(S.automaticNoNotify),!1):("automatic"===w.implementation&&(t||(t=g()),delete w.streaming.am_isPlaying,delete w.streaming.am_newPosition,delete w.streaming.am_oldPosition,delete w.streaming.am_TS_cb,clearInterval(w.streaming.am_cb),delete w.streaming.am_cb,f()),!!A(e,t)||void 0)}}};!function(r,d){"use strict";var h="function",e="undefined",t="model",n="name",i="type",a="vendor",s="version",o="architecture",l="console",u="mobile",c="tablet",f="smarttv",p="wearable",_={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:d},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},g={rgx:function(e,t){for(var n,i,r,a,s,o,l=0;l<t.length&&!s;){var u=t[l],c=t[l+1];for(n=i=0;n<u.length&&!s;)if(s=u[n++].exec(e))for(r=0;r<c.length;r++)o=s[++i],"object"==typeof(a=c[r])&&0<a.length?2==a.length?typeof a[1]==h?this[a[0]]=a[1].call(this,o):this[a[0]]=a[1]:3==a.length?typeof a[1]!==h||a[1].exec&&a[1].test?this[a[0]]=o?o.replace(a[1],a[2]):d:this[a[0]]=o?a[1].call(this,o,a[2]):d:4==a.length&&(this[a[0]]=o?a[3].call(this,o.replace(a[1],a[2])):d):this[a]=o||d;l+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&0<t[n].length){for(var i=0;i<t[n].length;i++)if(_.has(t[n][i],e))return"?"===n?d:n}else if(_.has(t[n],e))return"?"===n?d:n;return e}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},v={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[n,s],[/(opios)[\/\s]+([\w\.]+)/i],[[n,"Opera Mini"],s],[/\s(opr)\/([\w\.]+)/i],[[n,"Opera"],s],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[n,s],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[n,"IE"],s],[/(edge)\/((\d+)?[\w\.]+)/i],[n,s],[/(yabrowser)\/([\w\.]+)/i],[[n,"Yandex"],s],[/(puffin)\/([\w\.]+)/i],[[n,"Puffin"],s],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[n,"UCBrowser"],s],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],s],[/(micromessenger)\/([\w\.]+)/i],[[n,"WeChat"],s],[/(QQ)\/([\d\.]+)/i],[n,s],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[n,s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[s,[n,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[s,[n,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[s,[n,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[n,/(.+)/,"$1 WebView"],s],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[n,/(.+(?:g|us))(.+)/,"$1 $2"],s],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[s,[n,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[n,s],[/(dolfin)\/([\w\.]+)/i],[[n,"Dolphin"],s],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[n,"Chrome"],s],[/(coast)\/([\w\.]+)/i],[[n,"Opera Coast"],s],[/fxios\/([\w\.-]+)/i],[s,[n,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[s,[n,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[s,n],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[n,"GSA"],s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[n,[s,g.str,m.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[n,s],[/(navigator|netscape)\/([\w\.-]+)/i],[[n,"Netscape"],s],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[n,s]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[o,"amd64"]],[/(ia32(?=;))/i],[[o,_.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[o,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[o,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[o,/ower/,"",_.lowerize]],[/(sun4\w)[;\)]/i],[[o,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[o,_.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[t,a,[i,c]],[/applecoremedia\/[\w\.]+ \((ipad)/],[t,[a,"Apple"],[i,c]],[/(apple\s{0,1}tv)/i],[[t,"Apple TV"],[a,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[a,t,[i,c]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[t,[a,"Amazon"],[i,c]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[t,g.str,m.device.amazon.model],[a,"Amazon"],[i,u]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[t,a,[i,u]],[/\((ip[honed|\s\w*]+);/i],[t,[a,"Apple"],[i,u]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[a,t,[i,u]],[/\(bb10;\s(\w+)/i],[t,[a,"BlackBerry"],[i,u]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[t,[a,"Asus"],[i,c]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[a,"Sony"],[t,"Xperia Tablet"],[i,c]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[t,[a,"Sony"],[i,u]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[a,t,[i,l]],[/android.+;\s(shield)\sbuild/i],[t,[a,"Nvidia"],[i,l]],[/(playstation\s[34portablevi]+)/i],[t,[a,"Sony"],[i,l]],[/(sprint\s(\w+))/i],[[a,g.str,m.device.sprint.vendor],[t,g.str,m.device.sprint.model],[i,u]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[a,t,[i,c]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[a,[t,/_/g," "],[i,u]],[/(nexus\s9)/i],[t,[a,"HTC"],[i,c]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[t,[a,"Huawei"],[i,u]],[/(microsoft);\s(lumia[\s\w]+)/i],[a,t,[i,u]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[t,[a,"Microsoft"],[i,l]],[/(kin\.[onetw]{3})/i],[[t,/\./g," "],[a,"Microsoft"],[i,u]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[t,[a,"Motorola"],[i,u]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[t,[a,"Motorola"],[i,c]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[a,_.trim],[t,_.trim],[i,f]],[/hbbtv.+maple;(\d+)/i],[[t,/^/,"SmartTV"],[a,"Samsung"],[i,f]],[/\(dtv[\);].+(aquos)/i],[t,[a,"Sharp"],[i,f]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[a,"Samsung"],t,[i,c]],[/smart-tv.+(samsung)/i],[a,[i,f],t],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[a,"Samsung"],t,[i,u]],[/sie-(\w+)*/i],[t,[a,"Siemens"],[i,u]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[a,"Nokia"],t,[i,u]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[t,[a,"Acer"],[i,c]],[/android.+([vl]k\-?\d{3})\s+build/i],[t,[a,"LG"],[i,c]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[a,"LG"],t,[i,c]],[/(lg) netcast\.tv/i],[a,t,[i,f]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[t,[a,"LG"],[i,u]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[t,[a,"Lenovo"],[i,c]],[/linux;.+((jolla));/i],[a,t,[i,u]],[/((pebble))app\/[\d\.]+\s/i],[a,t,[i,p]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[a,t,[i,u]],[/crkey/i],[[t,"Chromecast"],[a,"Google"]],[/android.+;\s(glass)\s\d/i],[t,[a,"Google"],[i,p]],[/android.+;\s(pixel c)\s/i],[t,[a,"Google"],[i,c]],[/android.+;\s(pixel xl|pixel)\s/i],[t,[a,"Google"],[i,u]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[t,/_/g," "],[a,"Xiaomi"],[i,u]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[t,/_/g," "],[a,"Xiaomi"],[i,c]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[t,[a,"Meizu"],[i,c]],[/android.+a000(1)\s+build/i],[t,[a,"OnePlus"],[i,u]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[t,[a,"RCA"],[i,c]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[t,[a,"Dell"],[i,c]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[t,[a,"Verizon"],[i,c]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[a,"Barnes & Noble"],t,[i,c]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[t,[a,"NuVision"],[i,c]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[a,"ZTE"],t,[i,c]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[t,[a,"Swiss"],[i,u]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[t,[a,"Swiss"],[i,c]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[t,[a,"Zeki"],[i,c]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[a,"Dragon Touch"],t,[i,c]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[t,[a,"Insignia"],[i,c]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[t,[a,"NextBook"],[i,c]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[a,"Voice"],t,[i,u]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[a,"LvTel"],t,[i,u]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[t,[a,"Envizen"],[i,c]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[a,t,[i,c]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[t,[a,"MachSpeed"],[i,c]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[a,t,[i,c]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[t,[a,"Rotor"],[i,c]],[/android.+(KS(.+))\s+build/i],[t,[a,"Amazon"],[i,c]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[a,t,[i,c]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[i,_.lowerize],a,t],[/(android.+)[;\/].+build/i],[t,[a,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[s,[n,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[n,s],[/rv\:([\w\.]+).*(gecko)/i],[s,n]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[n,s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[n,[s,g.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[n,"Windows"],[s,g.str,m.os.windows.version]],[/\((bb)(10);/i],[[n,"BlackBerry"],s],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[n,s],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[n,"Symbian"],s],[/\((series40);/i],[n],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[n,"Firefox OS"],s],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[n,s],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[n,"Chromium OS"],s],[/(sunos)\s?([\w\.]+\d)*/i],[[n,"Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[n,s],[/(haiku)\s(\w+)/i],[n,s],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[s,/_/g,"."],[n,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[n,"Mac OS"],[s,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[n,s]]},E=function(e,t){if("object"==typeof e&&(t=e,e=d),!(this instanceof E))return new E(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?_.extend(v,t):v;return this.getBrowser=function(){var e={name:d,version:d};return g.rgx.call(e,n,i.browser),e.major=_.major(e.version),e},this.getCPU=function(){var e={architecture:d};return g.rgx.call(e,n,i.cpu),e},this.getDevice=function(){var e={vendor:d,model:d,type:d};return g.rgx.call(e,n,i.device),e},this.getEngine=function(){var e={name:d,version:d};return g.rgx.call(e,n,i.engine),e},this.getOS=function(){var e={name:d,version:d};return g.rgx.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};E.VERSION="0.7.17",E.BROWSER={NAME:n,MAJOR:"major",VERSION:s},E.CPU={ARCHITECTURE:o},E.DEVICE={MODEL:t,VENDOR:a,TYPE:i,CONSOLE:l,MOBILE:u,SMARTTV:f,TABLET:c,WEARABLE:p,EMBEDDED:"embedded"},E.ENGINE={NAME:n,VERSION:s},E.OS={NAME:n,VERSION:s},typeof exports!==e?(typeof module!==e&&module.exports&&(exports=module.exports=E),exports.UAParser=E):typeof define===h&&define.amd?define(function(){return E}):r&&(r.UAParser=E);var y=r&&(r.jQuery||r.Zepto);if(typeof y!==e){var T=new E;y.ua=T.getResult(),y.ua.get=function(){return T.getUA()},y.ua.set=function(e){T.setUA(e);var t=T.getResult();for(var n in t)y.ua[n]=t[n]}}}("object"==typeof window?window:this),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.youbora=t():e.youbora=t()}(window,function(){return function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=29)}([function(e,t,n){var i=n(4),s=n(10),o={_emitter:new i,on:function(){o._emitter.on.apply(o._emitter,arguments)},off:function(){o._emitter.off.apply(o._emitter,arguments)},emit:function(){o._emitter.emit.apply(o._emitter,arguments)},Level:{SILENT:6,ERROR:5,WARNING:4,NOTICE:3,DEBUG:2,VERBOSE:1},Event:{LOG:"log"},logLevel:5,plainLogs:!1,report:function(e,t,n){if(console&&console.log){n=n||"darkcyan";var i,r={5:"e",4:"w",3:"n",2:"d",1:"v"}[t=t||o.Level.NOTICE],a="[Youbora]"+o._getCurrentTime()+" "+r+":";this.emit("log",{level:t,msg:e,prefix:a}),o.logLevel<=t&&(o.plainLogs||document.documentMode?o._plainReport(e,a):(i=t===o.Level.ERROR&&console.error?console.error:t===o.Level.WARNING&&console.warn?console.warn:t===o.Level.DEBUG&&console.debug?console.debug:console.log,a="%c"+a,s(e)?(e.splice(0,0,a,"color: "+n),i.apply(console,e)):i.call(console,a,"color: "+n,e)))}},_getCurrentTime:function(){var e=new Date;return"["+("0"+e.getDate()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"."+("00"+e.getMilliseconds()).slice(-3)+"]"},_plainReport:function(e,t){if(e instanceof Array)for(var n in e)o._plainReport(e[n],t);else"string"==typeof e?console.log(t+" "+e):(console.log(t+" <next line>"),console.log(e))},error:function(){o.report([].slice.call(arguments),o.Level.ERROR,"darkred")},warn:function(){o.report([].slice.call(arguments),o.Level.WARNING,"darkorange")},notice:function(){o.report([].slice.call(arguments),o.Level.NOTICE,"darkgreen")},debug:function(){o.report([].slice.call(arguments),o.Level.DEBUG,"indigo")},verbose:function(){o.report([].slice.call(arguments),o.Level.VERBOSE,"navy")},loadLevelFromUrl:function(){if("undefined"!=typeof window&&window.location&&window.location.search){var e=/\?.*&*youbora-debug=(.+)/i.exec(window.location.search);null!==e&&(o.logLevel=e[1]),null!==/\?.*&*youbora-debug=plain/i.exec(window.location.search)&&(o.plainLogs=!0)}}};e.exports=o},function(e,t,n){var r=n(16),a=n(32),i=function(){};i.prototype={constructor:function(){}},i.extend=function(e,t){var n,i=this;return n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},r(n,i,t),n.prototype=a(i.prototype),e&&r(n.prototype,e),(n.prototype.constructor=n).__super__=i.prototype,n},e.exports=i},function(e,t,n){var a=n(0),i={stripProtocol:function(t){try{return t.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(e){return a.warn(e),t}},addProtocol:function(e,t){try{return!0===t?"https://"+e:0===window.location.protocol.indexOf("http")?"//"+e:"http://"+e}catch(e){return a.warn(e),"http://localhost/"}},parseNumber:function(e,t){return!isNaN(e)&&0<=e&&e!==1/0&&e!==-1/0&&null!=e?e:t},logAllEvents:function(e,t,n){try{if(a.logLevel<=a.Level.DEBUG){n=n||function(e){a.debug("Event: "+e.type)};var i=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];t&&(i=null===t[0]?(t.shift(),t):i.concat(t));for(var r=0;r<i.length;r++)"function"==typeof e?e.call(window,i[r],n):e.on?e.on(i[r],n):e.addEventListener&&e.addEventListener(i[r],n)}}catch(e){a.error(e)}},buildRenditionString:function(e,t,n){1===arguments.length&&(n=e,t=e=null);var i="";return e&&t&&(i=e+"x"+t),"number"!=typeof n||NaN==n||n<1?i:(i&&(i+="@"),(i+=n<1e3?Math.round(n)+"bps":n<1e6?(n=Math.round(n/1e3))+"Kbps":(n=Math.round(n/1e4)/100)+"Mbps")||null)},buildErrorParams:function(e,t,n,i){if("object"==typeof e)return e;var r={};return r.errorCode=e||"FAILURE",r.msg=t||r.errorCode,r.errorMetadata=n,r.errorLevel=i,r},assign:n(16),isArray:n(10)};e.exports=i},function(e,t){e.exports={Service:{DATA:"/data",INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_BLOCKED:"/adBlocked",EVENT:"/infinity/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"},WillSendEvent:{WILL_SEND_INIT:"will-send-init",WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop",WILL_SEND_AD_CLICK:"will-send-ad-click",WILL_SEND_AD_ERROR:"will-send-ad-error",WILL_SEND_AD_BLOCKED:"will-send-ad-blocked",WILL_SEND_SESSION_START:"will-send-session-start",WILL_SEND_SESSION_STOP:"will-send-session-stop",WILL_SEND_NAV:"will-send-nav",WILL_SEND_BEAT:"will-send-beat",WILL_SEND_EVENT:"will-send-event",WILL_SEND_OFFLINE_EVENTS:"will-send-offline-events"}}},function(e,t,n){var i=n(1),r=n(10),a=i.extend({on:function(e,t){if(this._listeners=this._listeners||{},"function"==typeof t)return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this},off:function(e,t){if(this._listeners=this._listeners||{},this._listeners[e]){var n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}return this},emit:function(e,t){return this._listeners=this._listeners||{},t=t||{},r(this._listeners[e])&&this._listeners[e].forEach(this._eachCallback.bind(this,e,t)),r(this._listeners["*"])&&this._listeners["*"].forEach(this._eachCallback.bind(this,e,t)),this},_eachCallback:function(e,t,n){"function"==typeof n&&n({type:e,data:t,target:this})}});e.exports=a},function(e,t,n){var i=n(1),r=n(0),a=n(2),s=i.extend({constructor:function(e,t,n,i){this.xhr=this.createXHR(),this.host=e||"",this.service=t||"",this.params=n||{},this.options=a.assign({},s.defaultOptions,i),this.retries=0,this.options.cache||this.setParam("timemark",(new Date).getTime())},createXHR:function(){try{return XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return r.error(e),{}}},getXHR:function(){return this.xhr},getUrl:function(){return this.host+this.service+this.getParamString()},on:function(e,t,n){return this.xhr.addEventListener(e,t.bind(this,this,n)),this},off:function(e,t){return this.xhr.removeEventListener(e,t),this},getParamString:function(){try{var e="?";for(var t in this.params){var n=this.params[t];if(null!==n&&"object"==typeof n){var i=JSON.stringify(n);"{}"!==i&&(e+=encodeURIComponent(t)+"="+encodeURIComponent(i)+"&")}else null!=n&&""!==n&&(e+=encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")}return e.slice(0,-1)}catch(e){return r.error(e),""}},getParam:function(e){return this.params[e]},setParam:function(e,t){return this.params[e]=t,this},setBody:function(e){this.body=e},send:function(){try{if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,this.options.requestHeaders[e]);for(var t in 0<this.options.retryAfter&&0<this.options.maxRetries&&0===this.retries&&this.on(s.Event.ERROR,function(){this.retries>=this.options.maxRetries?r.error('Aborting failed request "'+this.service+'". Max retries reached.'):(r.warn('YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms."),setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter))}.bind(this)),r.logLevel<=r.Level.VERBOSE&&r.verbose("XHR Req: "+this.getUrl()),s._globalListeners)s._globalListeners[t].forEach(function(e){this.on(t,e)}.bind(this));return this.xhr.send(this.body)}catch(e){r.error(e)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},defaultOptions:{method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(e,t){s._globalListeners[e]=s._globalListeners[e]||[],s._globalListeners[e].push(t)},offEvery:function(e,t){if(s._globalListeners[e]){var n=s._globalListeners[e].indexOf(t);-1!==n&&s._globalListeners[e].splice(n,1)}}});e.exports=s},function(e,t,n){var i=n(4).extend({constructor:function(){this._isBusy=!0,this._sendRequest=!0,this.transformName="Transform"},parse:function(e){},isBlocking:function(e){return this._isBusy},done:function(){this._isBusy=!1,this.emit(i.Event.DONE)},hasToSend:function(e){return this._sendRequest},getState:function(){return this._sendRequest?this._isBusy?this.STATE_BLOCKED:this.STATE_NO_BLOCKED:this.STATE_OFFLINE}},{STATE_OFFLINE:2,STATE_BLOCKED:1,STATE_NO_BLOCKED:0,Event:{DONE:"done"}});e.exports=i},function(e,t,n){var i=n(1).extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(e){var t=(new Date).getTime();if(this.startTime){e&&!this.stopTime&&(this.stopTime=t);var n=this.pausetime?t-this.pausetime:0,i=this.stopTime?this.stopTime:t;return this.offset-n+(i-this.startTime)}return-1},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pausetime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var e=new i;return e.startTime=this.startTime,e.stopTime=this.stopTime,e.offset=this.offset,e}});e.exports=i},function(e,t,n){e.exports=n(30).version},function(e,t,n){var i=n(4),r=n(0),a=n(2),s=n(17),o=n(8),l=n(45),u=n(46),c=n(28),d=i.extend({constructor:function(e){this.flags=new u,this.chronos=new l,this.monitor=null,this.plugin=null,this.player=null,this.setPlayer(e),this.tag=this.player,r.notice("Adapter "+this.getVersion()+" with Lib "+o+" is ready.")},setPlayer:function(e){this.player&&this.unregisterListeners(),this.player="string"==typeof e?document.getElementById(e):e,this.player&&(this.initializeAdapter(),this.registerListeners())},initializeAdapter:function(){},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){this.monitor&&this.monitor.stop(),this.fireStop(),this.unregisterListeners(),this.player=null,this.tag=null},monitorPlayhead:function(e,t,n){var i=0;e&&(i|=c.Type.BUFFER),t&&(i|=c.Type.SEEK),this.monitor=new c(this,i,n)},getPlayhead:function(){return null},getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){return null},getDroppedFrames:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getThroughput:function(){return null},getRendition:function(){return null},getTitle:function(){return null},getTitle2:function(){return null},getIsLive:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return o+"-generic-js"},getPosition:function(){return null},getCdnTraffic:function(){return s.getCdnTraffic()},getP2PTraffic:function(){return s.getP2PTraffic()},getUploadTraffic:function(){return s.getUploadTraffic()},getIsP2PEnabled:function(){return s.getIsP2PEnabled()},getHouseholdId:function(){return null},getLatency:function(){return null},getPacketLoss:function(){return null},getPacketSent:function(){return null},fireInit:function(e){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||this.flags.isInited||(this.chronos.total.start(),this.chronos.join.start(),this.emit(d.Event.INIT,{params:e}),this.flags.isInited=!0)},fireStart:function(e){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||(this.flags.isStarted=!0,this.flags.isInited||(this.chronos.total.start(),this.chronos.join.start()),this.emit(d.Event.START,{params:e}),this.flags.isInited=!1)},fireJoin:function(e){!this.flags.isStarted&&!this.flags.isInited||this.flags.isJoined||(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),this.emit(d.Event.JOIN,{params:e}))},firePause:function(e){this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),this.emit(d.Event.PAUSE,{params:e}))},fireResume:function(e){this.flags.isJoined&&this.flags.isPaused&&(this.flags.isPaused=!1,this.chronos.pause.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(d.Event.RESUME,{params:e}))},fireBufferBegin:function(e,t){if(this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!t)return;r.notice("Converting current buffer to seek"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();this.flags.isBuffering=!0,this.emit(d.Event.BUFFER_BEGIN,{params:e})}},fireBufferEnd:function(e){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(d.Event.BUFFER_END,{params:e}))},cancelBuffer:function(e){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},fireSeekBegin:function(e,t){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===t)return;r.notice("Converting current buffer to seek"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();this.flags.isSeeking=!0,this.emit(d.Event.SEEK_BEGIN,{params:e})}},fireSeekEnd:function(e){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(d.Event.SEEK_END,{params:e}))},cancelSeek:function(e){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireStop:function(e){(this.flags.isStarted||this.flags.isInited)&&(this.monitor&&this.monitor.stop(),this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),this.emit(d.Event.STOP,{params:e}),this.plugin&&this.plugin._adapter&&this.plugin._adapter.flags.isEnded&&!this.plugin._adapter.flags.isStopped&&(0===this.plugin.options["ad.afterStop"]?this.plugin.fireStop():this.plugin.options["ad.afterStop"]--),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset())},fireCasted:function(e){e||(e={}),e.casted=!0,this.fireStop(e)},fireError:function(e,t,n,i){var r=a.buildErrorParams(e,t,n,i);this.emit(d.Event.ERROR,{params:r})},fireNoServedAd:function(e,t,n,i){var r=a.buildErrorParams(e,t,n,i);r.errorSeverity="AdsNotServed",this.emit(d.Event.ERROR,{params:r})},fireFatalError:function(e,t,n,i){this.monitor&&this.monitor.stop(),this.fireError(e,t,n,i),this.fireStop()},fireClick:function(e){"string"==typeof e&&(e={url:e}),this.emit(d.Event.CLICK,{params:e})},fireBlocked:function(e){this.emit(d.Event.BLOCKED,{params:e})},fireSkip:function(e){e.skipped=!0,this.fireStop(e)}},{Event:{START:"start",JOIN:"join",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",STOP:"stop",CLICK:"click",BLOCKED:"blocked"},AdPosition:{PREROLL:"pre",MIDROLL:"mid",POSTROLL:"post"}});e.exports=d},function(e,t){e.exports=function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){var i=n(1),r=n(7),a=i.extend({constructor:function(e,t){this.callback=e,this.interval=t||5e3,this.isRunning=!1,this._timer=null,this.chrono=new r},start:function(){this.isRunning=!0,this._setTick()},stop:function(){this.isRunning=!1,this._timer&&clearTimeout(this._timer)},_setTick:function(){this.chrono.start(),this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}});e.exports=a},function(e,t,n){var i=n(1),r=n(0),a=n(5),s=n(6),o=i.extend({constructor:function(e){this.transforms=[],this.pluginRef=e,this._requests=[]},sendRequest:function(e,t,n){e&&("function"==typeof t&&e.on(a.Event.SUCCESS,t,n),this._registerRequest(e))},buildRequest:function(e,t,n,i){var r=new a(e,t,n=n||{});"function"==typeof i&&r.on(a.Event.SUCCESS,i),this._registerRequest(r)},addTransform:function(e){e.parse&&e.isBlocking?(this.transforms.push(e),e.on(s.Event.DONE,this._processRequests.bind(this))):r.warn(e+" is not a valid RequestTransform.")},removeTransform:function(e){var t=this.transforms.indexOf(e);-1!==t?this.transforms.splice(t,1):r.warn("Trying to remove unexisting Transform '"+e+"'.")},_registerRequest:function(e){this._requests.push(e),this._processRequests()},_processRequests:function(){var e=this._requests;this._requests=[];for(var t=[];e.length;){var n=e.shift(),i=this._transform(n);i===s.STATE_NO_BLOCKED?(this.pluginRef&&(n.host=this.pluginRef.getHost()),n.send()):i===s.STATE_BLOCKED&&t.push(n)}for(;t.length;)this._requests.push(t.shift())},_transform:function(t){var n=s.STATE_NO_BLOCKED;return this.transforms.forEach(function(e){e.isBlocking(t)?n=s.STATE_BLOCKED:(e.parse(t),e.getState()!==s.STATE_OFFLINE||(n=s.STATE_OFFLINE))}),n}});e.exports=o},function(e,t,n){var i=n(1),r=n(0),a=i.extend({constructor:function(e,t){this.prefix=e||"youbora",this.forceCookies=t||!1},setLocal:function(e,t){try{return this.forceCookies||"undefined"==typeof localStorage||!localStorage?this._setCookie(this.prefix+"."+e,t):localStorage.setItem(this.prefix+"."+e,t)}catch(e){r.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},getLocal:function(e){try{return this.forceCookies||"undefined"==typeof localStorage||!localStorage?this._getCookie(this.prefix+"."+e):localStorage.getItem(this.prefix+"."+e)}catch(e){r.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},removeLocal:function(e){try{return this.forceCookies||"undefined"==typeof localStorage||!localStorage?this._removeCookie(this.prefix+"."+e):localStorage.removeItem(this.prefix+"."+e)}catch(e){r.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},setSession:function(e,t){try{return this.forceCookies||"undefined"==typeof sessionStorage||!sessionStorage?this._setCookie(this.prefix+".session."+e,t):sessionStorage.setItem(this.prefix+"."+e,t)}catch(e){r.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},getSession:function(e){try{return this.forceCookies||"undefined"==typeof sessionStorage||!sessionStorage?this._getCookie(this.prefix+".session."+e):sessionStorage.getItem(this.prefix+"."+e)}catch(e){r.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},removeSession:function(e){try{return this.forceCookies||"undefined"==typeof sessionStorage||!sessionStorage?this._removeCookie(this.prefix+".session."+e):sessionStorage.removeItem(this.prefix+"."+e)}catch(e){r.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},_setCookie:function(e,t){document.cookie=e+"="+t+";"},_getCookie:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null},_removeCookie:function(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}});e.exports=a},function(e,t,n){var i=n(1),o=n(0),r=["accountCode","username","anonymousUser","rendition","player","title","title2","live","mediaDuration","mediaResource","transactionCode","properties","cdn","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","obfuscateIp","p2pEnabled","pluginVersion","pluginInfo","isp","connectionType","ip","deviceCode","preloadDuration","referer","userType","streamingProtocol","householdId","experiments","npawFingerprint","smartswitchConfigCode","smartswitchGroupCode","smartswitchContractCode"],a=["playhead","adTitle","adPosition","adDuration","adCampaign","adResource","adPlayerVersion","adProperties","adAdapterVersion","extraparam1","extraparam2","extraparam3","extraparam4","extraparam5","extraparam6","extraparam7","extraparam8","extraparam9","extraparam10"],l=i.extend({constructor:function(e){this._plugin=e,this._adNumber=0,this.lastSent={}},fetchParams:function(e,t,n){e=e||{},t=t||[];for(var i=0;i<t.length;i++){var r=t[i];if(!e[r]){var a=l.getters[r];if(this._plugin[a]){var s=this._plugin[a]();null===s||n&&this.lastSent[r]===s||(e[r]=s,this.lastSent[r]=s)}else o.warn("Trying to call undefined getter "+r+":"+a)}}return e},buildBody:function(e){return this.fetchParams(null,l.bodyParams[e],!1)},buildParams:function(e,t){return e=e||{},this.fetchParams(e,l.params[t],!1),this.fetchParams(e,l.differentParams[t],!0),e},getNewAdNumber:function(){var e=this.lastSent.adNumber;return e&&this.lastSent.adPosition===this._plugin.getAdPosition()?e+=1:e=1,this.lastSent.adNumber=e},getChangedEntities:function(){return this.fetchParams({},l.differentParams.entities,!0)}},{params:{"/data":["system","pluginVersion","requestNumber","username","isInfinity"],"/init":r,"/start":r,"/joinTime":["joinDuration","playhead","mediaDuration"],"/pause":["playhead"],"/resume":["pauseDuration","playhead"],"/seek":["seekDuration","playhead"],"/bufferUnderrun":["bufferDuration","playhead"],"/error":["player"].concat(r),"/stop":["bitrate","playhead","pauseDuration"],"/adInit":a,"/adStart":a,"/adJoin":["playhead","adPosition","adJoinDuration","adPlayhead"],"/adPause":["playhead","adPosition","adPlayhead"],"/adResume":["playhead","adPosition","adPlayhead","adPauseDuration"],"/adBufferUnderrun":["playhead","adPosition","adPlayhead","adBufferDuration"],"/adStop":["playhead","adPosition","adPlayhead","adBitrate","adTotalDuration","pauseDuration"],"/adClick":["playhead","adPosition","adPlayhead"],"/adError":a,"/adBlocked":a,"/ping":["droppedFrames","playrate","cdnDownloadedTraffic","p2pDownloadedTraffic","uploadTraffic","latency","packetLoss","packetSent"],"/infinity/session/start":["accountCode","username","anonymousUser","navContext","route","page","npawFingerprint","referer","referral","language","deviceCode"],"/infinity/session/stop":[],"/infinity/session/nav":["navContext","route","page"],"/infinity/session/beat":[],"/infinity/event":["accountCode","navContext"],"/offlineEvents":{}},bodyParams:{"/offlineEvents":["viewJson"]},differentParams:{entities:["rendition","title","title2","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","cdn","nodeHost","nodeType","nodeTypeString"]},getters:{requestNumber:"getRequestNumber",playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",pluginVersion:"getPluginVersion",userType:"getUserType",streamingProtocol:"getStreamingProtocol",obfuscateIp:"getObfuscateIp",householdId:"getHouseholdId",latency:"getLatency",packetLoss:"getPacketLoss",packetSent:"getPacketSent",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",param11:"getExtraparam11",param12:"getExtraparam12",param13:"getExtraparam13",param14:"getExtraparam14",param15:"getExtraparam15",param16:"getExtraparam16",param17:"getExtraparam17",param18:"getExtraparam18",param19:"getExtraparam19",param20:"getExtraparam20",extraparam1:"getAdExtraparam1",extraparam2:"getAdExtraparam2",extraparam3:"getAdExtraparam3",extraparam4:"getAdExtraparam4",extraparam5:"getAdExtraparam5",extraparam6:"getAdExtraparam6",extraparam7:"getAdExtraparam7",extraparam8:"getAdExtraparam8",extraparam9:"getAdExtraparam9",extraparam10:"getAdExtraparam10",adPosition:"getAdPosition",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adCampaign:"getAdCampaign",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceCode:"getDeviceCode",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",anonymousUser:"getAnonymousUser",preloadDuration:"getPreloadDuration",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",referral:"getReferral",language:"getLanguage",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString",route:"getReferer",navContext:"getContext",page:"getPageName",cdnDownloadedTraffic:"getCdnTraffic",p2pDownloadedTraffic:"getP2PTraffic",p2pEnabled:"getIsP2PEnabled",uploadTraffic:"getUploadTraffic",viewJson:"getOfflineView",experiments:"getExperiments",npawFingerprint:"getFingerprint",isInfinity:"getIsInfinity",smartswitchConfigCode:"getSmartswitchConfigCode",smartswitchGroupCode:"getSmartswitchGroupCode",smartswitchContractCode:"getSmartswitchContractCode"}});e.exports=l},function(e,t,n){var i=n(4),r=n(12),a=i.extend({constructor:function(e){this._plugin=e,this._plugin.storage&&(this._plugin.storage.removeLocal("infinityStarted"),this._plugin.storage.removeLocal("infinityStopped"))},andBeyond:function(){a.prototype.begin.apply(this,arguments)},begin:function(e,t){this._comm=new r(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._plugin&&this._plugin.storage&&"function"==typeof this._plugin.storage.getLocal&&(this._registeredProperties=this._plugin.storage.getLocal("inifnityRegisteredProperties")),t||this._plugin.getIsSessionExpired()||!this._plugin.storage.getLocal("infinityStarted")?this.fireSessionStart(e,t):(this.fireNav(e),this._sendExtraBeat())},_generateNewContext:function(){var e=btoa((new Date).getTime());this._plugin.storage.setSession("context",e)},_setLastActive:function(){this._firstActive||(this._firstActive=this.getFirstActive()),this._plugin.storage.setLocal("lastactive",(new Date).getTime()),this._plugin.storage.setSession("lastactive",(new Date).getTime())},getFirstActive:function(){return Number(this._plugin.getLastActive())||0},getComm:function(){return this._comm},fireSessionStart:function(e,t){this._plugin.storage.setLocal("infinityStarted","true"),this._plugin.storage.removeLocal("infinityStopped"),this.infinityStarted=!0,this.infinityStopped=!1,this._generateNewContext(),this._plugin.viewTransform._parentId=t,this.emit(a.Event.SESSION_START,this._getParamsJson(e,null,null,!0,!0)),this._setLastActive()},fireSessionStop:function(e){this.infinityStopped=!0,this.emit(a.Event.SESSION_STOP,e),this._plugin.storage.removeLocal("data"),this._plugin.storage.removeLocal("session"),this._plugin.storage.removeLocal("lastactive"),this._plugin.storage.removeSession("data"),this._plugin.storage.removeSession("session"),this._plugin.storage.removeSession("lastactive")},newSession:function(e,t){this.fireSessionStop(),this._plugin.storage.removeLocal("data"),this._plugin.setOptions(e),this._plugin.restartViewTransform(),this.fireSessionStart(t)},fireNav:function(e){this.isActive()&&(this._plugin.getContext()||this._generateNewContext(),this.emit(a.Event.NAV,this._getParamsJson(e,null,null,!0)))},_sendExtraBeat:function(){var e=(new Date).getTime();if(this._plugin&&this._plugin._beat){var t=this._plugin._beat.chrono.startTime?e-this._plugin._beat.chrono.startTime:0;this._plugin._sendBeat(t),this._plugin._beat.chrono.startTime=e}this._setLastActive()},fireEvent:function(e,t,n){this.emit(a.Event.EVENT,this._getParamsJson(t,n,e)),this._setLastActive()},register:function(e,t){this._registeredProperties={dimensions:e,values:t},this._plugin.storage.setLocal("inifnityRegisteredProperties",JSON.stringify(this._registeredProperties))},registerOnce:function(e,t){this._registeredProperties||this.register(e,t)},unregister:function(){this._registeredProperties=null,this._plugin.storage.removeLocal("inifnityRegisteredProperties")},_getParamsJson:function(e,t,n,i,r){var a={};if(n&&(a.name=n),a.dimensions=e||{},a.values=t||{},this._registeredProperties){for(var s in this._registeredProperties.dimensions)a.dimensions[s]=this._registeredProperties.dimensions[s];for(var s in this._registeredProperties.values)a.values[s]=this._registeredProperties.values[s]}var o={params:a};return i&&(o.params.dimensions.page&&(o.params.page=o.params.dimensions.page,delete o.params.dimensions.page),o.params.dimensions.route&&(o.params.route=o.params.dimensions.route,delete o.params.dimensions.route),r||delete o.params.dimensions,delete o.params.values),o},isActive:function(){var e=(new Date).getTime();return null!=this._plugin.storage.getLocal("infinityStarted")&&!this._plugin.storage.getLocal("infinityStopped")||Number(this._plugin.getLastActive())+this._plugin.sessionExpire>e}},{Event:{NAV:"nav",SESSION_START:"sessionStart",SESSION_STOP:"sessionStop",BEAT:"beat",EVENT:"event"}});e.exports=a},function(e,t){e.exports=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}},function(e,t){var n={getCdnTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)t+=Streamroot.peerAgents[e].stats.cdn;return t}if(Streamroot.instances&&0<Streamroot.instances.length)return t=0,Streamroot.instances.forEach(function(e){t+=e.stats.currentContent.cdnDownload}),t}if("undefined"!=typeof peer5&&peer5.getStats)return peer5.getStats().totalHttpDownloaded;if("undefined"!=typeof teltoo&&teltoo.getStats){var n=teltoo.getStats();return n.totalReceivedBytes-n.p2pReceivedBytes}return null},getP2PTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)Streamroot.peerAgents[e].isP2PEnabled&&(t+=Streamroot.peerAgents[e].stats.p2p);return t}if(Streamroot.instances&&0<Streamroot.instances.length)return t=0,Streamroot.instances.forEach(function(e){t+=e.stats.currentContent.dnaDownload}),t}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PDownloaded:"undefined"!=typeof teltoo&&teltoo.getStats?teltoo.getStats().p2pReceivedBytes:null},getUploadTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)Streamroot.peerAgents[e].isP2PEnabled&&(t+=Streamroot.peerAgents[e].stats.upload);return t}if(Streamroot.instances&&0<Streamroot.instances.length)return t=0,Streamroot.instances.forEach(function(e){t+=e.stats.currentContent.dnaUpload}),t}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PUploaded:null},getIsP2PEnabled:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=!1;for(var e in Streamroot.peerAgents)t=t||Streamroot.peerAgents[e].isP2PEnabled;return t}if(Streamroot.instances&&0<Streamroot.instances.length)return t=!1,Streamroot.instances.forEach(function(e){t=t||e.dnaDownloadEnabled||e.dnaUploadEnabled}),t}return"undefined"!=typeof peer5&&peer5.isEnabled?peer5.isEnabled():null}};e.exports=n},function(e,t,n){var i=n(5),r=n(6),a=n(0),s=n(2),o=n(3),l=r.extend({constructor:function(e,t){r.prototype.constructor.apply(this,arguments),this.response={},this._viewIndex=(new Date).getTime(),this._session=t,this._httpSecure=e.options.httpSecure,this._plugin=e,this.transformName="View"},init:function(){if(this._plugin.options&&this._plugin.options.offline)return this.response.host="OFFLINE",this.response.code="OFFLINE",this.response.pingTime=60,this.response.beatTime=60,this.done(),null;if((new Date).getTime()<this._plugin.sessionExpire+(Number(this._plugin.getDataTime())||0)&&this._plugin.getStoredData())return this.setData(this._plugin.getStoredData()),null;var e=o.Service.DATA,t={apiVersion:"v7",outputformat:"json"};null!==(t=this._plugin.requestBuilder.buildParams(t,e))&&(a.notice(e+" "+t.system),"nicetest"===t.system&&a.error("No accountCode has been set. Please set your accountCode inside plugin's options."),new i(this._plugin.getHost(),e,t).on(i.Event.SUCCESS,this._receiveData.bind(this)).on(i.Event.ERROR,this._failedData.bind(this)).send())},setData:function(e){try{var t=JSON.parse(e);this.response.msg=e,this.response.host=s.addProtocol(t.q.h,this._httpSecure),this.response.code=t.q.c,this.response.pingTime=t.q.pt||5,this.response.beatTime=t.q.i&&t.q.i.bt||30,this.response.sessionExpire=t.q.i&&t.q.i.exp||300,this._plugin.storage.setLocal("sessionExpire",this.response.sessionExpire),this.done()}catch(e){a.error("Fastdata response is invalid.")}},_receiveData:function(e,t){var n=e.getXHR().response;this.setData(n)},_failedData:function(e,t){a.error("Fastdata request has failed.")},nextView:function(){return this._viewIndex=(new Date).getTime(),this.getViewCode()},getViewCode:function(){return this.response.code+"_"+this._viewIndex},getSessionId:function(){return this._session},setSessionId:function(e){this._session=e},getParentIdVideo:function(){return this._session},getParentIdSession:function(){return this._parentId},setParentId:function(e){this._parentId=e},getSessionRoot:function(){return this._plugin.infinity&&this._plugin.infinity.isActive()?this._session:null},setSessionRoot:function(e){this._session=e},parse:function(e){e.host=e.host||this.response.host,e.params.sessionRoot=e.params.sessionRoot||this.getSessionRoot(),e.service!==o.Service.PING&&e.service!==o.Service.START||(e.params.pingTime=e.params.pingTime||this.response.pingTime),o.Service.SESSION_STOP===e.service&&(e.params.sessionRoot=this._session),-1===[o.Service.NAV,o.Service.SESSION_START,o.Service.SESSION_STOP,o.Service.EVENT,o.Service.BEAT].indexOf(e.service)?e.params.code=e.params.code||this.getViewCode():(e.params.sessionId=e.params.sessionId||this.getSessionId(),e.params.sessionRoot||(e.params.sessionRoot=e.params.sessionId)),o.Service.BEAT===e.service&&(e.params.sessions='["'+(e.params.sessionId||this.getSessionId())+'"]'),-1!==[o.Service.START,o.Service.INIT,o.Service.ERROR].indexOf(e.service)&&this._plugin.storage.getLocal("infinityStarted")&&(e.params.parentId=e.params.parentId||this.getParentIdVideo(),e.params.navContext=e.params.navContext||this._plugin.getContext()),o.Service.SESSION_START===e.service&&(e.params.parentId=e.params.parentId||this.getParentIdSession())}});e.exports=l},function(e,t,n){var i=n(6),r=n(20),a=n(21),s=n(22),o=n(0),l=n(3),u=i.extend({constructor:function(e){u.__super__.constructor.apply(this,arguments),this.isDone=!1,this._plugin=e,this._realResource=null,this._initResource=null,this._cdnName=null,this._cdnNodeHost=null,this._cdnNodeTypeString=null,this._cdnNodeType=null,this._responses={},this._isBusy=!1,this.transformName="Resource"},getResource:function(){return this._plugin&&this._plugin.options&&this._plugin.options["content.resource"]&&!this._plugin.options["parse.locationHeader"]&&!this._plugin.options["parse.hls"]?this._plugin.options["content.resource"]:this._realResource||this._initResource},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(e){this._isBusy||this.isDone||(this._isBusy=!0,this._initResource=e,this._hlsEnabled=this._plugin.isParseHls(),this._cdnEnabled=this._plugin.isParseCdnNode(),this._locHeaderEnabled=this._plugin.isLocHeader(),this._cdnList=this._plugin.getParseCdnNodeList().slice(),this._cdnNameHeader=this._plugin.getParseCdnNodeNameHeader(),a.setBalancerHeaderName(this._cdnNameHeader),this._setTimeout(),this._locHeaderEnabled&&this._parseLocHeader(),this._hlsEnabled?this._parseHLS():this._cdnEnabled?this._parseCDN():this.done())},done:function(){this.isDone=!1,i.prototype.done.apply(this,arguments)},_setTimeout:function(){this._parseTimeout=setTimeout(function(){this._isBusy&&(this.done(),o.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))}.bind(this),3e3)},_parseLocHeader:function(){var e=new s;e.parse(this._initResource),e.on(s.Event.DONE,function(){this._realResource=e.getResource(),this.done()}.bind(this))},_parseHLS:function(){var e=new r;e.on(r.Event.DONE,function(){this._realResource=e.getResource(),this._cdnEnabled?this._parseCDN():this.done()}.bind(this)),e.parse(this._initResource)},_parseCDN:function(){if(0<this._cdnList.length){var e=this._cdnList.shift();if(this.getNodeHost())return;var t=a.create(e);t?(t.on(a.Event.DONE,function(){this._responses=t.getResponses(),this._cdnName=t.getParsedCdnName(),this._cdnNodeHost=t.getParsedNodeHost(),this._cdnNodeTypeString=t.getParsedNodeTypeString(),this._cdnNodeType=t.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()}.bind(this)),t.parse(this.getResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(e){if(e.service===l.Service.START){var t=this._plugin.requestBuilder.lastSent;t.mediaResource=e.params.mediaResource=this.getResource(),this._cdnEnabled&&(t.cdn=e.params.cdn=e.params.cdn||this.getCdnName(),t.nodeHost=e.params.nodeHost=this.getNodeHost(),t.nodeType=e.params.nodeType=this.getNodeType(),t.nodeTypeString=e.params.nodeTypeString=this.getNodeTypeString())}}});e.exports=u},function(e,t,n){var s=n(5),i=n(4),o=n(0),r=i.extend({constructor:function(){this._realResource=null},done:function(){this.emit(r.Event.DONE)},parse:function(e,t){t=t||"";try{var n=/((\S*?)(\.m3u8|\.m3u|\.ts|\.mp4)((\?|\;)\S*|\n|\r|$))/i.exec(e)}catch(e){o.warn("Parse HLS Regex failed",e),this.done()}if(null!==n){var i=n[1].trim(),r=t.lastIndexOf("/");if(0!==i.indexOf("http")&&-1!==r&&(i=t.slice(0,r)+"/"+i),".m3u8"===n[3]||".m3u"===n[3]){var a=new s(i,null,null,{cache:!0});a.on(s.Event.SUCCESS,function(e){this.parse(e.getXHR().responseText,n[2])}.bind(this)),a.on(s.Event.ERROR,function(e){this.done()}.bind(this)),a.send()}else this._realResource=i,this.done()}else this.done()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});e.exports=r},function(e,t,n){var i=n(4),r=n(0),a=n(2),s=n(5),o=i.extend({constructor:function(e){this._options=a.assign({cdnName:null,parsers:[],requestHeaders:{},parseType:function(){return 0}},e),this._responses={}},done:function(){this.emit(o.Event.DONE)},addParser:function(e){return this._options.parsers.push(e),this},setCdnName:function(e){return this._options.cdnName=e,this},setRequestHeader:function(e,t){return this._options.requestHeaders[e]=t,this},setParseType:function(e){return this._options.parseType=e,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(e,t){this._responses=t||{};var n=JSON.stringify(this._options.requestHeaders);this._responses[n]?this._parseResponse(this._responses[n]):this._requestResponse(e)},_requestResponse:function(e){var t=JSON.stringify(this._options.requestHeaders),n=new s(e,null,null,{method:"HEAD",maxRetries:0,requestHeaders:this._options.requestHeaders});n.on(s.Event.SUCCESS,function(e){this._responses[t]=e.getXHR().getAllResponseHeaders(),this._parseResponse(this._responses[t])}.bind(this)),n.on(s.Event.ERROR,function(e){this.done()}.bind(this)),n.send()},_parseResponse:function(e){this._options.parsers.forEach(function(n){e.split("\n").forEach(function(e){var t=e.indexOf(":");-1!==t&&e.slice(0,t)===n.headerName&&this._executeParser(n,e.slice(t+1))}.bind(this))}.bind(this)),this.done()},_executeParser:function(e,t){try{var n=e.regex.exec(t.trim());if(null!==n)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),e.element){case o.ElementType.HOST:this._cdnNodeHost=n[1];break;case o.ElementType.TYPE:this._cdnNodeTypeString=n[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case o.ElementType.HOST_AND_TYPE:this._cdnNodeHost=n[1],this._cdnNodeTypeString=n[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case o.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=n[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=n[2];break;case o.ElementType.NAME:this._cdnName=n[1].toUpperCase()}}catch(e){r.warn("CDN parsing for "+this._options.cdnName+" could not parse header value "+t)}}},{Event:{DONE:"done"},ElementType:{HOST:"host",TYPE:"type",HOST_AND_TYPE:"host+type",TYPE_AND_HOST:"type+host",NAME:"name"},_cdnConfigs:{},setBalancerHeaderName:function(e){o._cdnConfigs.Balancer.parsers[0].headerName=e},create:function(e){if(o._cdnConfigs[e])return new o(o._cdnConfigs[e]);r.warn("Tried to create an unexisting CdnParser named "+e)},add:function(e,t){o._cdnConfigs[e]=t}});o.add("Level3",n(33)),o.add("Cloudfront",n(34)),o.add("Akamai",n(35)),o.add("Highwinds",n(36)),o.add("Fastly",n(37)),o.add("Balancer",n(38)),e.exports=o},function(e,t,n){var i=n(4),r=(n(0),n(2),n(5)),a=i.extend({constructor:function(){this._realResource=null},done:function(){this.emit(a.Event.DONE)},parse:function(e){var t=new r(e,null,null,{method:"HEAD",maxRetries:0,requestHeaders:{},cache:!0});t.on(r.Event.SUCCESS,function(e){this._realResource=e.getXHR().responseURL,this.done()}.bind(this)),t.on(r.Event.ERROR,function(e){this.done()}.bind(this)),t.send()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});e.exports=a},function(e,t,n){n(5);var i=n(6),r=(n(0),n(2),n(3),i.extend({constructor:function(e,t){this._sendRequest=!1,this._isBusy=!1,this.plugin=e,this.session=t,this.transformName="Offline"},parse:function(e){e&&this.plugin.offlineStorage.addEvent(e.service,e.params)},hasToSend:function(e){return!1},getState:function(){return i.STATE_OFFLINE}}));e.exports=r},function(e,t,n){var i=n(1).extend({constructor:function(e){this.enabled=!0,this.httpSecure=null,this.host="nqs.nice264.com",this.accountCode="nicetest",this.username=null,this.anonymousUser=null,this.obfuscateIp=!1,this.userType=null,this.offline=!1,this.referer=null,this.experiments=[],this["parse.hls"]=!1,this["parse.cdnNameHeader"]="x-cdn-forward",this["parse.cdnNode"]=!1,this["parse.cdnNode.list"]=["Akamai","Cloudfront","Level3","Fastly","Highwinds"],this["parse.locationHeader"]=!1,this["network.ip"]=null,this["network.isp"]=null,this["network.connectionType"]=null,this["device.code"]=null,this["content.transactionCode"]=null,this["content.resource"]=null,this["content.isLive"]=null,this["content.isLive.noSeek"]=!1,this["content.title"]=null,this["content.title2"]=null,this["content.duration"]=null,this["content.fps"]=null,this["content.bitrate"]=null,this["content.throughput"]=null,this["content.rendition"]=null,this["content.cdn"]=null,this["content.cdnNode"]=null,this["content.cdnType"]=null,this["content.metadata"]={},this["content.streamingProtocol"]=null,this["ad.metadata"]={},this["ad.campaign"]=null,this["ad.resource"]=null,this["ad.title"]=null,this["ad.ignore"]=!1,this["ad.afterStop"]=0,this["background.enabled"]=!0,this["background.settings"]=null,this["background.settings.android"]="stop",this["background.settings.iphone"]="stop",this["background.settings.desktop"]=null,this["background.settings.tv"]="stop",this["smartswitch.configCode"]=null,this["smartswitch.groupCode"]=null,this["smartswitch.contractCode"]=null,this["extraparam.1"]=null,this["extraparam.2"]=null,this["extraparam.3"]=null,this["extraparam.4"]=null,this["extraparam.5"]=null,this["extraparam.6"]=null,this["extraparam.7"]=null,this["extraparam.8"]=null,this["extraparam.9"]=null,this["extraparam.10"]=null,this["extraparam.11"]=null,this["extraparam.12"]=null,this["extraparam.13"]=null,this["extraparam.14"]=null,this["extraparam.15"]=null,this["extraparam.16"]=null,this["extraparam.17"]=null,this["extraparam.18"]=null,this["extraparam.19"]=null,this["extraparam.20"]=null,this["ad.extraparam.1"]=null,this["ad.extraparam.2"]=null,this["ad.extraparam.3"]=null,this["ad.extraparam.4"]=null,this["ad.extraparam.5"]=null,this["ad.extraparam.6"]=null,this["ad.extraparam.7"]=null,this["ad.extraparam.8"]=null,this["ad.extraparam.9"]=null,this["ad.extraparam.10"]=null,this.isInfinity=null,this.forceInit=!1,this.setOptions(e)},setOptions:function(e,t){if(t=t||this,void 0!==e)for(var n in e)"object"==typeof t[n]&&null!==t[n]?this.setOptions(e[n],t[n]):t[n]=e[n]}});e.exports=i},function(e,t,n){var i=n(1).extend({constructor:function(e){this.plugin=e,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(e){this.isBackgroundDetectorStarted?e!=this.windowObject&&(this.stopDetection(),this.isBackgroundDetectorStarted=!1,this.startDetection(e)):(e&&(this.windowObject=e),this.windowObject&&this.windowObject.document&&(this.isBackgroundDetectorStarted=!0,this.windowObject.document.addEventListener("visibilitychange",this.listenerReference)))},stopDetection:function(){this.isBackgroundDetectorStarted&&(this.windowObject.document.removeEventListener("visibilitychange",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1,this.windowObject="undefined"!=typeof window?window:void 0},_visibilityListener:function(e){if("hidden"===this.windowObject.document.visibilityState){if(this.isInBackground=!0,"string"==typeof(n=this._getSettings())){switch(n){case"stop":this._fireStop();break;case"pause":this._firePause()}if(null!=this.plugin.storage.getLocal("infinityStarted")&&!this.plugin.storage.getLocal("infinityStopped")){this.lastBeatTime=(new Date).getTime();var t=this.plugin._beat.chrono.startTime?this.lastBeatTime-this.plugin._beat.chrono.startTime:0;this.plugin._sendBeat(t),this.plugin._beat.stop()}}}else if("visible"===this.windowObject.document.visibilityState){var n;if(this.isInBackground=!1,"string"==typeof(n=this._getSettings())&&n&&null!=this.plugin.storage.getLocal("infinityStarted")&&!this.plugin.storage.getLocal("infinityStopped")){var i=(new Date).getTime();i-this.lastBeatTime<this.plugin.sessionExpire?(this.plugin._sendBeat(i-this.lastBeatTime),this.plugin._beat.start()):(this.plugin.restartViewTransform(),this.plugin.infinity.begin())}}},_getSettings:function(){return"string"==typeof this.plugin.options["background.settings"]&&this.plugin.options["background.settings"]?this.plugin.options["background.settings"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options["background.settings.tv"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options["background.settings.desktop"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options["background.settings.android"]:this.plugin.deviceDetector.isIphone()?this.plugin.options["background.settings.iphone"]:void 0},_firePause:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded?this.adsAdapter.firePause():this.contentAdapter&&this.contentAdapter.flags.isStarted&&!this.contentAdapter.flags.isEnded&&this.contentAdapter.firePause()},_fireStop:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded&&this.adsAdapter.fireStop(),this.contentAdapter?this.contentAdapter.fireStop({end:!0}):this.plugin.fireStop({end:!0})},canBlockStartCalls:function(){return this.plugin.backgroundDetector.isInBackground&&!0===this.plugin.options["background.enabled"]&&this.plugin.backgroundDetector._getSettings()}});e.exports=i},function(e,t,n){var i=n(1).extend({constructor:function(){"undefined"!=typeof navigator&&navigator.userAgent&&(this._isSmartTV=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTV&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTV)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTV}});e.exports=i},function(e,t,n){var i=n(42),r=n(1),a=n(43),s=r.extend({constructor:function(e){this.plugin=e,this.dataExtractor=new i,this.key=this.getPreviousKey()},generateHashKey:function(){if(!this.key){var e=this.dataExtractor.getAllData();this.key=this._hashFunction(e),this.plugin.storage.setLocal("youboraFingerprint",this.key)}},getKey:function(){return this.key||this.generateHashKey(),this.key},_hashFunction:function(e){var t;return t="string"!=typeof e?JSON.stringify(e):e,a(t)},_reset:function(){this.key=void 0},getPreviousKey:function(){return this.plugin.storage.getLocal("youboraFingerprint")}});e.exports=s},function(e,t,n){var i=n(1),r=n(11),a=n(7),s=i.extend({constructor:function(e,t,n){this._adapter=e,this._seekEnabled=t&s.Type.SEEK,this._bufferEnabled=t&s.Type.BUFFER,n=n||800,this._chrono=new a,(this._lastPlayhead=0)<n&&(this._timer=new r(this.progress.bind(this),n))},start:function(){this._timer.start()},stop:function(){this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var e=this._chrono.stop();this._chrono.start();var t=e*s.kBUFFER_THRESHOLD_RATIO,n=e*s.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!=this._adapter.getPlayrate()&&(t*=this._adapter.getPlayrate(),n*=this._adapter.getPlayrate());var i=this._getPlayhead(),r=1e3*Math.abs(this._lastPlayhead-i);r<t?this._bufferEnabled&&0<this._lastPlayhead&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking&&this._adapter.fireBufferBegin(null,!1):n<r?this._seekEnabled&&0<this._lastPlayhead&&this._adapter.fireSeekBegin(null,!1):(this._seekEnabled&&this._adapter.fireSeekEnd(),this._bufferEnabled&&this._adapter.fireBufferEnd()),this._lastPlayhead=i},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2});e.exports=s},function(e,t,n){var i=r,r={noConflict:function(){return r=i,this}};r.VERSION=n(8),r.polyfills=n(31),r.Object=n(1),r.Emitter=n(4),r.Log=n(0),r.Log.loadLevelFromUrl(),r.Util=n(2),r.HybridNetwork=n(17),r.Chrono=n(7),r.Timer=n(11),r.Constants=n(3),r.Request=n(5),r.Communication=n(12),r.Transform=n(6),r.ViewTransform=n(18),r.ResourceTransform=n(19),r.CdnParser=n(21),r.HlsParser=n(20),r.OfflineParser=n(23),r.LocationheaderParser=n(22),r.Options=n(24),r.Plugin=n(39),r.Storage=n(13),r.RequestBuilder=n(14),r.PlayheadMonitor=n(28),r.Adapter=n(9),r.StandardAdapter=n(55),r.adapters={},r.Infinity=n(15),r.BackgroundDetector=n(25),r.DeviceDetector=n(26),r.Fingerprint=n(27),r.registerAdapter=function(e,t){this.adapters[e]=t}.bind(r),r.unregisterAdapter=function(e){this.adapters[e]=null}.bind(r),e.exports=r},function(e){e.exports={name:"youboralib",type:"lib",tech:"js",author:"Jordi Aguilar",version:"6.4.12",built:"2018-12-21",repo:"https://bitbucket.org/npaw/lib-plugin-js.git"}},function(e,t){e.exports=function(){Function.prototype.bind=Function.prototype.bind||function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice,n=t.call(arguments,1),i=this,r=function(){},a=function(){return i.apply(this instanceof r?this:e||window,n.concat(t.call(arguments)))};return r.prototype=this.prototype,a.prototype=new r,a},Array.prototype.forEach=Array.prototype.forEach||function(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function!");for(var n=this.length,i=0;i<n;i++)e.call(t,this[i],i,this)}}},function(e,t){var n=function(){};e.exports=function(e){if(1<arguments.length)throw Error("Second argument not supported");if(null===e)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof e)throw TypeError("Argument must be an object");return n.prototype=e,new n}},function(e,t){e.exports={cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-Diag",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-Diag":"host"},parseType:function(e){if(e){if(0===e.indexOf("TCP_HIT")||0===e.indexOf("TCP_MEM_HIT")||0===e.indexOf("TCP_IMS_HIT"))return 1;if(0===e.indexOf("TCP_MISS"))return 2}return 0}}},function(e,t){e.exports={cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(e){switch(e){case"Hit":return 1;case"Miss":return 2;default:return 0}}}},function(e,t){e.exports={cdnName:"AKAMAI",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom\s.+\(.+\/(.+)\).*/}],parseType:function(e){switch(e){case"TCP_HIT":return 1;case"TCP_MISS":return 2;default:return 0}}}},function(e,t){e.exports={cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(e){switch(e){case"c":case"x":return 1;default:return 2}}}},function(e,t){e.exports={cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(e){switch(e){case"HIT":return 1;case"MISS":return 2;default:return 0}}}},function(e,t){e.exports={parsers:[{element:"name",headerName:null,regex:/(.+)/}]}},function(e,t,n){var i=n(4),r=n(11),a=n(7),d=n(3),s=n(2),h=n(5),o=n(12),l=n(40),u=n(18),c=n(19),f=n(23),p=n(24),_=n(13),g=n(41),m=n(14),v=n(15),E=n(25),y=n(26),T=n(27),A=i.extend({constructor:function(e,t){this.infinity=new v(this),this.isInitiated=!1,this.isPreloading=!1,this.preloadChrono=new a,this.initChrono=new a,this.storage=new _,this.offlineStorage=new g,this.options=new p(e),this._adapter=null,this._adsAdapter=null,this._ping=new r(this._sendPing.bind(this),5e3),this._beat=new r(this._sendBeat.bind(this),3e4),this.sessionExpire=1e3*Number(this.storage.getLocal("sessionExpire"))||3e5,this.requestBuilder=new m(this),this.resourceTransform=new c(this),this.lastEventTime=null,t&&this.setAdapter(t),this.restartViewTransform(),this._initInfinity(),this.deviceDetector=new y,this.backgroundDetector=new E(this),this.fingerprint=new T(this),this.options["background.enabled"]&&this.backgroundDetector.startDetection()},restartViewTransform:function(){this.viewTransform=new u(this),this.viewTransform.on(u.Event.DONE,this._receiveData.bind(this)),this.getIsDataExpired()||this.storage.getLocal("accCode")!==this.options.accountCode&&this.storage.getSession("accCode")!==this.options.accountCode?(this.storage.removeLocal("data"),this.storage.removeLocal("session"),this.storage.removeSession("data"),this.storage.removeSession("session"),this.storage.removeLocal("infinityStarted"),this.storage.removeLocal("infinityStopped"),this.viewTransform.init()):this.viewTransform.setData(this.getStoredData())},_receiveData:function(e){this._ping.interval=1e3*e.target.response.pingTime,this._beat.interval=1e3*e.target.response.beatTime,this.sessionExpire=1e3*e.target.response.sessionExpire,this.storage.setLocal("data",e.target.response.msg),this.storage.setLocal("dataTime",(new Date).getTime()),this.storage.setSession("data",e.target.response.msg),this.storage.setSession("dataTime",(new Date).getTime()),this.storage.setLocal("accCode",this.options.accountCode),this.storage.setSession("accCode",this.options.accountCode),this.getIsSessionExpired()?(this.viewTransform.setSessionId(this.viewTransform.response.code),this.storage.setLocal("session",this.viewTransform.response.code),this.storage.setSession("session",this.viewTransform.response.code)):this.viewTransform.setSessionId(this.getSessionId())},_reset:function(){this._stopPings(),this.resourceTransform=new c(this),this._adapter&&this._adapter.flags.reset(),this.isInitiated=!1,this.isStarted=!1,this.isPreloading=!1,this.preloadChrono.reset(),this.initChrono.reset()},_send:function(e,t,n,i,r,a,s){var o=(new Date).getTime();this.lastEventTime&&o>this.lastEventTime+6e5&&this.viewTransform.nextView(),this.lastEventTime=t===d.Service.STOP?null:o,n=this.requestBuilder.buildParams(n,t),this.getIsLive()&&(n.mediaDuration=void 0,n.playhead=void 0);var l={params:n,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(e,l),this._comm&&(null!==n||void 0!==r)&&this.options.enabled){this.lastServeiceSent=t;var u={};void 0!==r&&"GET"!=r&&(u.method=r);var c=new h(null,t,n,u);i&&c.setBody(i),this._comm.sendRequest(c,a,s)}},_initComm:function(){this.resourceTransform.init(this.getResource()),this._comm=new o,this._comm.addTransform(new l),this._comm.addTransform(this.viewTransform),this.options&&this.options.offline?this._comm.addTransform(new f(this)):this._comm.addTransform(this.resourceTransform)},getComm:function(){return this._comm},setOptions:function(e){e&&(this.options.setOptions(e),"boolean"==typeof e["background.enabled"]&&(e["background.enabled"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection()))},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})}},{Event:d.WillSendEvent});s.assign(A.prototype,n(44)),s.assign(A.prototype,n(47)),s.assign(A.prototype,n(48)),s.assign(A.prototype,n(49)),s.assign(A.prototype,n(50)),s.assign(A.prototype,n(51)),s.assign(A.prototype,n(52)),s.assign(A.prototype,n(53)),s.assign(A.prototype,n(54)),e.exports=A},function(e,t,n){var i=n(6),r=n(3),a=i.extend({_services:[r.Service.INIT,r.Service.START,r.Service.OFFLINE_EVENTS],isBlocking:function(e){if(this._isBusy&&null!=e)if(-1!==this._services.indexOf(e.service))this.done();else if(e.service===r.Service.ERROR)return!1;return i.prototype.isBlocking.apply(this,arguments)}});e.exports=a},function(e,t,n){var i=n(1),r=n(13),a=i.extend({constructor:function(){this.storage=new r("youboraOffline"),this.actualView=null,this.viewList=[],this.givenIds=[],this._getOldViewList()},_newView:function(){var e=this._getValidId();this.storage.setLocal(e,""),this.viewList.push(e),this.storage.setLocal("views",this.viewList),this.actualView=e},addEvent:function(e,t){if("/start"===e&&this._newView(),"/init"===e)return null;if(!this.actualView)return null;var n='{"request":"'+e.slice(1)+'",';for(var i in n+='"unixtime":'+Date.now()+",",t){if(void 0===t[i])break;n+='"'+i+'":',"code"===i?n+='"CODE_PLACEHOLDER",':"sessionId"===i?n+='"SESSION_PLACEHOLDER",':"parentId"===i?n+='"PARENT_PLACEHOLDER",':"sessionRoot"===i?n+='"ROOT_PLACEHOLDER",':"string"==typeof t[i]?n+='"'+t[i]+'",':"object"==typeof t[i]?n+='"'+JSON.stringify(t[i]).replace(/"/g,'\\"')+'",':n+=t[i]+","}n=n.slice(0,-1),n+="}";var r=this.storage.getLocal(this.actualView);""!=r&&(r+=","),this.storage.setLocal(this.actualView,r+n)},getView:function(){if(this.viewList.length>this.givenIds.length)for(var e=0;;){var t=this.viewList[e];if(!this.givenIds.includes(t))return this.givenIds.push(t),["["+this.storage.getLocal(t)+"]",t];e++}return[null,null]},removeView:function(e){this.storage.removeLocal(e);var t=this.viewList.indexOf(e);-1!==t&&this.viewList.splice(t,1),-1!==(t=this.givenIds.indexOf(e))&&this.givenIds.splice(t,1),this.storage.setLocal("views",this.viewList.toString()),e===this.actualView&&(this.actualView=null)},_getOldViewList:function(){var e="";this.storage.getLocal("views")?e=this.storage.getLocal("views"):this.storage.setLocal("views",""),""===e?this.viewList=[]:"function"==typeof e.split&&(this.viewList=e.split(","))},_getValidId:function(){var e=Math.floor(1e8*Math.random()).toString();return 0<=this.viewList.indexOf(e)?this._getValidId():e},sent:function(){this.givenIds=[]}});e.exports=a},function(e,t,n){var i=n(1).extend({constructor:function(e){this.plugin=e},getAllData:function(){var e={};return e.userAgent=this.getUserAgent(),e.threads=this.getVirtualCores(),e.language=this.getLanguage(),e.langList=this.getAvailableLanguages(),e.resolution=this.getResolution(),e.colorDepth=this.getColorDepth(),e.deviceMemory=this.getMemory(),e.touchscreen=this.getTouchscreen(),e.localStorage=this.getLocalStorage(),e.sessionStorage=this.getSessionStorage(),e.cookiesAvailable=this.getCookiesAvailable(),e.flashAvailable=this.getHasFlash(),e.timeZone=this.getTimeZone(),e.plugins=this.getPluginList(),e},getUserAgent:function(){return this._navigatorCheck()?navigator.userAgent:null},getVirtualCores:function(){return this._navigatorCheck()?navigator.hardwareConcurrency:null},getLanguage:function(){return this._navigatorCheck()?navigator.language:null},getAvailableLanguages:function(){return this._navigatorCheck()?navigator.languages:null},getResolution:function(){return this._navigatorCheck()&&navigator.screen?navigator.screen.width.toString()+navigator.screen.height.toString():null},getColorDepth:function(){return this._navigatorCheck()&&navigator.screen?navigator.screen.colorDepth:null},getMemory:function(){return this._navigatorCheck()?navigator.deviceMemory:null},getTouchscreen:function(){return this._navigatorCheck()?navigator.maxTouchPoints:null},getLocalStorage:function(){return"undefined"!=typeof localStorage},getSessionStorage:function(){return"undefined"!=typeof sessionStorage},getCookiesAvailable:function(){return!!this._navigatorCheck()&&navigator.cookieEnabled},getHasFlash:function(){return!!this._navigatorCheck()&&(void 0!==navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]||window.ActiveXObject&&0!=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))},getPluginList:function(){if(!this._navigatorCheck()||!navigator.plugins||0===navigator.plugins.length)return null;for(var e="",t=0;t<navigator.plugins.length;t++)e+=navigator.plugins[t].description+" "+navigator.plugins[t].filename+" "+navigator.plugins[t].name+" ";return e},getTimeZone:function(){return(new Date).getTimezoneOffset().toString()},_navigatorCheck:function(){return"undefined"!=typeof navigator}});e.exports=i},function(e,t){e.exports=function(e){function o(e,t){return e<<t|e>>>32-t}function l(e,t){var n,i,r,a,s;return r=2147483648&e,a=2147483648&t,s=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(i=1073741824&t)?2147483648^s^r^a:n|i?1073741824&s?3221225472^s^r^a:1073741824^s^r^a:s^r^a}function t(e,t,n,i,r,a,s){return l(o(e=l(e,l(l(t&n|~t&i,r),s)),a),t)}function n(e,t,n,i,r,a,s){return l(o(e=l(e,l(l(t&i|n&~i,r),s)),a),t)}function i(e,t,n,i,r,a,s){return l(o(e=l(e,l(l(t^n^i,r),s)),a),t)}function r(e,t,n,i,r,a,s){return l(o(e=l(e,l(l(n^(t|~i),r),s)),a),t)}function a(e){var t,n="",i="";for(t=0;t<=3;t++)n+=(i="0"+(e>>>8*t&255).toString(16)).substr(i.length-2,2);return n}var s,u,c,d,h,f,p,_,g,m=Array();for(m=function(e){for(var t,n=e.length,i=n+8,r=16*((i-i%64)/64+1),a=Array(r-1),s=0,o=0;o<n;)s=o%4*8,a[t=(o-o%4)/4]=a[t]|e.charCodeAt(o)<<s,o++;return s=o%4*8,a[t=(o-o%4)/4]=a[t]|128<<s,a[r-2]=n<<3,a[r-1]=n>>>29,a}(e=function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):(127<i&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t}(e)),f=1732584193,p=4023233417,_=2562383102,g=271733878,s=0;s<m.length;s+=16)p=r(p=r(p=r(p=r(p=i(p=i(p=i(p=n(p=n(p=n(p=t(p=t(p=t(c=p,_=t(d=_,g=t(h=g,f=t(u=f,p,_,g,m[s+0],7,3614090360),p,_,m[s+1],12,3905402710),f,p,m[s+2],17,606105819),g,f,m[s+3],22,3250441966),_=t(_,g=t(g,f=t(f,p,_,g,m[s+4],7,4118548399),p,_,m[s+5],12,1200080426),f,p,m[s+6],17,2821735955),g,f,m[s+7],22,4249261313),_=t(_,g=t(g,f=t(f,p,_,g,m[s+8],7,1770035416),p,_,m[s+9],12,2336552879),f,p,m[s+10],17,4294925233),g,f,m[s+11],22,2304563134),_=n(_=t(_,g=t(g,f=t(f,p,_,g,m[s+12],7,1804603682),p,_,m[s+13],12,4254626195),f,p,m[s+14],17,2792965006),g=n(g,f=n(f,p=t(p,_,g,f,m[s+15],22,1236535329),_,g,m[s+1],5,4129170786),p,_,m[s+6],9,3225465664),f,p,m[s+11],14,643717713),g,f,m[s+0],20,3921069994),_=n(_,g=n(g,f=n(f,p,_,g,m[s+5],5,3593408605),p,_,m[s+10],9,38016083),f,p,m[s+15],14,3634488961),g,f,m[s+4],20,3889429448),_=n(_,g=n(g,f=n(f,p,_,g,m[s+9],5,568446438),p,_,m[s+14],9,3275163606),f,p,m[s+3],14,4107603335),g,f,m[s+8],20,1163531501),_=i(_=n(_,g=n(g,f=n(f,p,_,g,m[s+13],5,2850285829),p,_,m[s+2],9,4243563512),f,p,m[s+7],14,1735328473),g=i(g,f=i(f,p=n(p,_,g,f,m[s+12],20,2368359562),_,g,m[s+5],4,4294588738),p,_,m[s+8],11,2272392833),f,p,m[s+11],16,1839030562),g,f,m[s+14],23,4259657740),_=i(_,g=i(g,f=i(f,p,_,g,m[s+1],4,2763975236),p,_,m[s+4],11,1272893353),f,p,m[s+7],16,4139469664),g,f,m[s+10],23,3200236656),_=i(_,g=i(g,f=i(f,p,_,g,m[s+13],4,681279174),p,_,m[s+0],11,3936430074),f,p,m[s+3],16,3572445317),g,f,m[s+6],23,76029189),_=r(_=i(_,g=i(g,f=i(f,p,_,g,m[s+9],4,3654602809),p,_,m[s+12],11,3873151461),f,p,m[s+15],16,530742520),g=r(g,f=r(f,p=i(p,_,g,f,m[s+2],23,3299628645),_,g,m[s+0],6,4096336452),p,_,m[s+7],10,1126891415),f,p,m[s+14],15,2878612391),g,f,m[s+5],21,4237533241),_=r(_,g=r(g,f=r(f,p,_,g,m[s+12],6,1700485571),p,_,m[s+3],10,2399980690),f,p,m[s+10],15,4293915773),g,f,m[s+1],21,2240044497),_=r(_,g=r(g,f=r(f,p,_,g,m[s+8],6,1873313359),p,_,m[s+15],10,4264355552),f,p,m[s+6],15,2734768916),g,f,m[s+13],21,1309151649),_=r(_,g=r(g,f=r(f,p,_,g,m[s+4],6,4149444226),p,_,m[s+11],10,3174756917),f,p,m[s+2],15,718787259),g,f,m[s+9],21,3951481745),f=l(f,u),p=l(p,c),_=l(_,d),g=l(g,h);return(a(f)+a(p)+a(_)+a(g)).toLowerCase()}},function(e,t,n){var i=n(0),r=n(3),a=n(9),s={setAdapter:function(e){e.plugin?i.warn("Adapters can only be added to a single plugin"):(this.removeAdapter(),(this._adapter=e).plugin=this,e.on(a.Event.INIT,this._initListener.bind(this)),e.on(a.Event.START,this._startListener.bind(this)),e.on(a.Event.JOIN,this._joinListener.bind(this)),e.on(a.Event.PAUSE,this._pauseListener.bind(this)),e.on(a.Event.RESUME,this._resumeListener.bind(this)),e.on(a.Event.SEEK_BEGIN,this._seekBeginListener.bind(this)),e.on(a.Event.SEEK_END,this._seekEndListener.bind(this)),e.on(a.Event.BUFFER_BEGIN,this._bufferBeginListener.bind(this)),e.on(a.Event.BUFFER_END,this._bufferEndListener.bind(this)),e.on(a.Event.ERROR,this._errorListener.bind(this)),e.on(a.Event.STOP,this._stopListener.bind(this)),e.on(a.Event.CLICK,this._clickListener.bind(this)),e.on(a.Event.BLOCKED,this._blockedListener.bind(this)))},getAdapter:function(){return this._adapter},removeAdapter:function(){this._adapter&&(this._adapter.dispose(),this._adapter.plugin=null,this._adapter.off(a.Event.INIT,this._initListener),this._adapter.off(a.Event.START,this._startListener),this._adapter.off(a.Event.JOIN,this._joinListener),this._adapter.off(a.Event.PAUSE,this._pauseListener),this._adapter.off(a.Event.RESUME,this._resumeListener),this._adapter.off(a.Event.SEEK_BEGIN,this._seekBeginListener),this._adapter.off(a.Event.SEEK_END,this._seekEndListener),this._adapter.off(a.Event.BUFFER_BEGIN,this._bufferBeginListener),this._adapter.off(a.Event.BUFFER_END,this._bufferEndListener),this._adapter.off(a.Event.ERROR,this._errorListener),this._adapter.off(a.Event.STOP,this._stopListener),this._adapter=null)},_initListener:function(e){if(!this._adapter||!this._adapter.flags.isInited){this.isInitiated&&this.lastServeiceSent!==r.Service.ERROR||(this.viewTransform.nextView(),this._initComm(),this._startPings());var t=e.data.params||{};this.isInitiated=!0,this._adapter?(this._adapter.flags.isInited=!0,this._adapter.chronos.join.start()):this.initChrono.start(),this._send(r.WillSendEvent.WILL_SEND_INIT,r.Service.INIT,t),i.notice(r.Service.INIT+" "+(t.title||t.mediaResource)),this._adSavedError()}},_startListener:function(e){this.isInitiated||(this.viewTransform.nextView(),this._initComm(),this._startPings());var t=e.data.params||{},n=this.getResource()&&"boolean"==typeof this.getIsLive()&&(this.getIsLive()||"number"==typeof this.getDuration()&&0<this.getDuration())&&this.getTitle();this.options.forceInit&&(n=!1),!n||this._adapter.flags.isInited||this.isInitiated?this._adapter.flags.isInited||this.isInitiated||(this.isInitiated=!0,this._adapter.flags.isInited=!0,this._adapter.chronos.join.start(),this._send(r.WillSendEvent.WILL_SEND_START,r.Service.INIT,t),this._adSavedError(),i.notice(r.Service.INIT+" "+(t.title||t.mediaResource))):(this._send(r.WillSendEvent.WILL_SEND_START,r.Service.START,t),this._adSavedError(),i.notice(r.Service.START+" "+(t.title||t.mediaResource)),this.isStarted=!0,this.isInitiated&&0!=this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime))},_joinListener:function(e){var t=e.data.params||{};this._adsAdapter&&this._adsAdapter.flags.isStarted?(this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0):(this.isInitiated&&!this.isStarted&&(0!=this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime),this._adsAdapter&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+(this._adsAdapter.totalPrerolls||0),(new Date).getTime()),this._adsAdapter.totalPrerolls=0),this._send(r.WillSendEvent.WILL_SEND_START,r.Service.START,t),this._adSavedError(),i.notice(r.Service.START+" "+(t.title||t.mediaResource)),this.isStarted=!0),t=e.data.params||{},this._send(r.WillSendEvent.WILL_SEND_JOIN,r.Service.JOIN,t),i.notice(r.Service.JOIN+" "+t.joinDuration+"ms"))},_pauseListener:function(e){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var t=e.data.params||{};this._send(r.WillSendEvent.WILL_SEND_PAUSE,r.Service.PAUSE,t),i.notice(r.Service.PAUSE+" at "+t.playhead+"s")},_resumeListener:function(e){var t=e.data.params||{};this._send(r.WillSendEvent.WILL_SEND_RESUME,r.Service.RESUME,t),i.notice(r.Service.RESUME+" "+t.pauseDuration+"ms"),this._adapter.chronos.pause.reset()},_seekBeginListener:function(e){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),i.notice("Seek Begin")},_seekEndListener:function(e){var t=e.data.params||{};this._send(r.WillSendEvent.WILL_SEND_SEEK,r.Service.SEEK,t),i.notice(r.Service.SEEK+" to "+t.playhead+" in "+t.seekDuration+"ms")},_bufferBeginListener:function(e){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),i.notice("Buffer Begin")},_bufferEndListener:function(e){var t=e.data.params||{};this._send(r.WillSendEvent.WILL_SEND_BUFFER,r.Service.BUFFER,t),i.notice(r.Service.BUFFER+" to "+t.playhead+" in "+t.bufferDuration+"ms")},_errorListener:function(e){this._blockError(e.data.params)||(this.fireError(e.data.params||{}),this._adSavedError())},_blockError:function(e){var t=Date.now();return this._lastErrorParams&&this._lastErrorParams.errorCode===e.errorCode&&this._lastErrorParams.msg===e.msg&&this._lastErrorTime+5e3>t?(this._lastErrorTime=t,!0):(this._lastErrorTime=t,this._lastErrorParams=e,!1)},_stopListener:function(e){this.fireStop(e.data.params||{})},_clickListener:function(e){i.warn("You have sent a CLICK event from the content adapter. Such events must be fired from ads adapters, so it will be ignored.")},_blockedListener:function(e){i.warn("You have sent a BLOCKED event from the content adapter. Such events must be fired from ads adapters, so it will be ignored.")}};e.exports=s},function(e,t,n){var i=n(1),r=n(7),a=i.extend({constructor:function(){this.reset()},reset:function(){this.join=new r,this.seek=new r,this.pause=new r,this.buffer=new r,this.total=new r}});e.exports=a},function(e,t,n){var i=n(1).extend({constructor:function(){this.reset()},reset:function(){this.isInited=!1,this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isEnded=!1,this.isStopped=!1}});e.exports=i},function(e,t,n){var i=n(2),r=n(8),a={getHost:function(){var e=this.options.host;return this.viewTransform&&this.viewTransform.response&&this.viewTransform.response.host&&(e=this.viewTransform.response.host),i.addProtocol(i.stripProtocol(e),this.options.httpSecure)},getUserType:function(){return this.options.userType},isParseHls:function(){return this.options["parse.hls"]},isParseCdnNode:function(){return this.options["parse.cdnNode"]},isLocHeader:function(){return this.options["parse.locationHeader"]},getParseCdnNodeList:function(){return this.options["parse.cdnNode.list"]},getParseCdnNodeNameHeader:function(){return this.options["parse.cdnNameHeader"]},getObfuscateIp:function(){return this.options.obfuscateIp},getExtraparam1:function(){return this.options["extraparam.1"]},getExtraparam2:function(){return this.options["extraparam.2"]},getExtraparam3:function(){return this.options["extraparam.3"]},getExtraparam4:function(){return this.options["extraparam.4"]},getExtraparam5:function(){return this.options["extraparam.5"]},getExtraparam6:function(){return this.options["extraparam.6"]},getExtraparam7:function(){return this.options["extraparam.7"]},getExtraparam8:function(){return this.options["extraparam.8"]},getExtraparam9:function(){return this.options["extraparam.9"]},getExtraparam10:function(){return this.options["extraparam.10"]},getExtraparam11:function(){return this.options["extraparam.11"]},getExtraparam12:function(){return this.options["extraparam.12"]},getExtraparam13:function(){return this.options["extraparam.13"]},getExtraparam14:function(){return this.options["extraparam.14"]},getExtraparam15:function(){return this.options["extraparam.15"]},getExtraparam16:function(){return this.options["extraparam.16"]},getExtraparam17:function(){return this.options["extraparam.17"]},getExtraparam18:function(){return this.options["extraparam.18"]},getExtraparam19:function(){return this.options["extraparam.19"]},getExtraparam20:function(){return this.options["extraparam.20"]},getAdExtraparam1:function(){return this.options["ad.extraparam.1"]},getAdExtraparam2:function(){return this.options["ad.extraparam.2"]},getAdExtraparam3:function(){return this.options["ad.extraparam.3"]},getAdExtraparam4:function(){return this.options["ad.extraparam.4"]},getAdExtraparam5:function(){return this.options["ad.extraparam.5"]},getAdExtraparam6:function(){return this.options["ad.extraparam.6"]},getAdExtraparam7:function(){return this.options["ad.extraparam.7"]},getAdExtraparam8:function(){return this.options["ad.extraparam.8"]},getAdExtraparam9:function(){return this.options["ad.extraparam.9"]},getAdExtraparam10:function(){return this.options["ad.extraparam.10"]},getPluginInfo:function(){return{lib:r,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()}},getIp:function(){return this.options["network.ip"]},getIsp:function(){return this.options["network.isp"]},getConnectionType:function(){return this.options["network.connectionType"]},getDeviceCode:function(){return this.options["device.code"]},getAccountCode:function(){return this.options.accountCode},getUsername:function(){return this.options.username},getAnonymousUser:function(){return this.options.anonymousUser},getReferer:function(){if(this.options.referer)return this.options.referer;var e="";return"undefined"!=typeof window&&window.location&&(e=window.location.href),e},getReferral:function(){return"undefined"!=typeof window&&window.document?window.document.referrer:null},getLanguage:function(){return"undefined"!=typeof navigator?navigator.language:null},getNodeHost:function(){return this.options["content.cdnNode"]||this.resourceTransform.getNodeHost()},getNodeType:function(){return this.options["content.cdnType"]||this.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getOfflineView:function(){return this.offlineStorage.getView()},getExperiments:function(){return 0<this.options.experiments.length?this.options.experiments:null},getFingerprint:function(){return this.fingerprint.getKey()},getIsInfinity:function(){return this.options.isInfinity},getSmartswitchConfigCode:function(){return this.options["smartswitch.configCode"]},getSmartswitchGroupCode:function(){return this.options["smartswitch.groupCode"]},getSmartswitchContractCode:function(){return this.options["smartswitch.contractCode"]}};e.exports=a},function(e,t,n){var i=n(0),r=n(2),a=n(8),s={getPlayhead:function(){var e=0;if(this._adapter)try{e=this._adapter.getPlayhead()}catch(e){i.warn("An error occurred while calling getPlayhead",e)}return r.parseNumber(e,0)},getPlayrate:function(){var e=0;if(this._adapter)try{e=this._adapter.getPlayrate(),this._adapter.flags&&this._adapter.flags.isPaused&&(e=0)}catch(e){i.warn("An error occured while calling getPlayrate",e)}return e},getFramesPerSecond:function(){var e=this.options["content.fps"];if(null===e&&this._adapter)try{e=this._adapter.getFramesPerSecond()}catch(e){i.warn("An error occured while calling getFramesPerSecond",e)}return e},getDroppedFrames:function(){var e=null;if(this._adapter)try{e=this._adapter.getDroppedFrames()}catch(e){i.warn("An error occured while calling getDroppedFrames",e)}return e||(e=this.getWebkitDroppedFrames()),r.parseNumber(e,0)},getWebkitDroppedFrames:function(){return this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount?this._adapter.tag.webkitDroppedFrameCount:null},getDuration:function(){var e=this.options["content.duration"];if(null===e&&this._adapter)try{e=this._adapter.getDuration()}catch(e){i.warn("An error occured while calling getDuration",e)}return 0===e&&(e=null),r.parseNumber(Math.round(e),null)},getBitrate:function(){var e=this.options["content.bitrate"];if(null===e&&this._adapter){try{e=this._adapter.getBitrate()}catch(e){i.warn("An error occured while calling getBitrate",e)}e&&-1!==e||(e=this.getWebkitBitrate())}return r.parseNumber(e,-1)},getWebkitBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var e=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var t=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;e=Math.round(t/this.viewTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}},getThroughput:function(){var e=this.options["content.throughput"];if(null===e&&this._adapter)try{e=this._adapter.getThroughput()}catch(e){i.warn("An error occured while calling getThroughput",e)}return r.parseNumber(e,-1)},getRendition:function(){var e=this.options["content.rendition"];if(null===e&&this._adapter)try{e=this._adapter.getRendition()}catch(e){i.warn("An error occured while calling getRendition",e)}return e},getTitle:function(){var e=this.options["content.title"];if(null===e&&this._adapter)try{e=this._adapter.getTitle()}catch(e){i.warn("An error occured while calling getTitle",e)}return e},getTitle2:function(){var e=this.options["content.title2"];if(null===e&&this._adapter)try{e=this._adapter.getTitle2()}catch(e){i.warn("An error occured while calling getTitle2",e)}return e},getIsLive:function(){var e=this.options["content.isLive"];if(null===e&&this._adapter)try{e=this._adapter.getIsLive()}catch(e){i.warn("An error occured while calling getIsLive",e)}return e||!1},getResource:function(){var e=null;return!this.resourceTransform.isBlocking()&&this.resourceTransform.isDone&&(e=this.resourceTransform.getResource()),e||this.getOriginalResource()},getOriginalResource:function(){var t=null;if(null===(t=this.options["content.resource"])&&this._adapter)try{t=this._adapter.getResource()}catch(e){i.warn("An error occured while calling getResource",e),t=null}return t||null},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){var e="";if(this._adapter)try{e=this._adapter.getPlayerVersion()}catch(e){i.warn("An error occured while calling getPlayerVersion",e)}return e},getPlayerName:function(){var e="";if(this._adapter)try{e=this._adapter.getPlayerName()}catch(e){i.warn("An error occured while calling getPlayerName",e)}return e},getCdn:function(){var e=null;return this.resourceTransform.isBlocking()||(e=this.resourceTransform.getCdnName()),e||this.options["content.cdn"]},getPluginVersion:function(){var e=this.getAdapterVersion();return e||(e=a+"-adapterless"),e},getAdapterVersion:function(){var e=null;if(this._adapter)try{e=this._adapter.getVersion()}catch(e){i.warn("An error occured while calling getPluginVersion",e)}return e},getCdnTraffic:function(){var e=null;if(this._adapter)try{e=this._adapter.getCdnTraffic()}catch(e){i.warn("An error occured while calling getCdnTraffic",e)}return e},getP2PTraffic:function(){var e=null;if(this._adapter)try{e=this._adapter.getP2PTraffic()}catch(e){i.warn("An error occured while calling getP2PTraffic",e)}return e},getUploadTraffic:function(){var e=null;if(this._adapter)try{e=this._adapter.getUploadTraffic()}catch(e){i.warn("An error occured while calling getUploadTraffic",e)}return e},getIsP2PEnabled:function(){var e=null;if(this._adapter)try{e=this._adapter.getIsP2PEnabled()}catch(e){i.warn("An error occured while calling getIsP2PEnabled",e)}return e},getStreamingProtocol:function(){var e=this.options["content.streamingProtocol"];return"string"!=typeof e?null:"HDS"!=(e=e.toUpperCase())&&"HLS"!=e&&"MSS"!=e&&"DASH"!=e&&"RTMP"!=e&&"RTP"!=e&&"RTSP"!=e?(i.warn("Streaming protocol "+e+" is not a valid value"),null):e},getHouseholdId:function(){var e=null;if(this._adapter)try{e=this._adapter.getHouseholdId()}catch(e){i.warn("An error occurred while calling getHouseholdId",e)}return e},getLatency:function(){var e=null;if(this._adapter)try{e=this._adapter.getLatency()}catch(e){i.warn("An error occurred while calling getLatency",e)}return e},getPacketLoss:function(){var e=null;if(this._adapter)try{e=this._adapter.getPacketLoss()}catch(e){i.warn("An error occurred while calling getPacketLoss",e)}return e},getPacketSent:function(){var e=null;if(this._adapter)try{e=this._adapter.getPacketSent()}catch(e){i.warn("An error occurred while calling getPacketSent",e)}return e},getPreloadDuration:function(){return this.preloadChrono.getDeltaTime(!1)},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0}};e.exports=s},function(e,t,n){var i=n(0),r=n(3),a=n(9),s={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(e){e.plugin?i.warn("Adapters can only be added to a single plugin"):(this.removeAdsAdapter(),(e.plugin=this)._adsAdapter=e,this._adsAdapter.on(a.Event.INIT,this._adInitListener.bind(this)),this._adsAdapter.on(a.Event.START,this._adStartListener.bind(this)),this._adsAdapter.on(a.Event.JOIN,this._adJoinListener.bind(this)),this._adsAdapter.on(a.Event.PAUSE,this._adPauseListener.bind(this)),this._adsAdapter.on(a.Event.RESUME,this._adResumeListener.bind(this)),this._adsAdapter.on(a.Event.BUFFER_BEGIN,this._adBufferBeginListener.bind(this)),this._adsAdapter.on(a.Event.BUFFER_END,this._adBufferEndListener.bind(this)),this._adsAdapter.on(a.Event.STOP,this._adStopListener.bind(this)),this._adsAdapter.on(a.Event.ERROR,this._adErrorListener.bind(this)),this._adsAdapter.on(a.Event.CLICK,this._adClickListener.bind(this)),this._adsAdapter.on(a.Event.BLOCKED,this._adBlockedListener.bind(this)))},removeAdsAdapter:function(){this._adsAdapter&&(this._adsAdapter.dispose(),this._adsAdapter.plugin=null,this._adsAdapter.off(a.Event.INIT,this._adInitListener),this._adsAdapter.off(a.Event.START,this._adStartListener),this._adsAdapter.off(a.Event.JOIN,this._adJoinListener),this._adsAdapter.off(a.Event.PAUSE,this._adPauseListener),this._adsAdapter.off(a.Event.RESUME,this._adResumeListener),this._adsAdapter.off(a.Event.BUFFER_BEGIN,this._adBufferBeginListener),this._adsAdapter.off(a.Event.BUFFER_END,this._adBufferEndListener),this._adsAdapter.off(a.Event.STOP,this._adStopListener),this._adsAdapter.off(a.Event.ERROR,this._adErrorListener),this._adsAdapter.off(a.Event.CLICK,this._adClickListener),this._adsAdapter.off(a.Event.BLOCKED,this._adBlockedListener),this._adsAdapter=null)},_adInitListener:function(e){this._adapter?(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this._adapter.flags.isInited||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit(),this.adInitSent=!0;var t=e.data.params||{};t.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_START,r.Service.AD_INIT,t),i.notice(r.Service.AD_INIT+" "+t.adPosition+t.adNumber+" at "+t.playhead+"s")},_adStartListener:function(e){this._adapter?(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this._adapter.flags.isInited||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit();var t=e.data.params||{};this._adsAdapter.flags.isInited?t.adNumber=this.requestBuilder.lastSent.adNumber:t.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||((this.getAdResource()||this.getAdTitle())&&"number"==typeof this.getAdDuration()?(this.adStartSent=!0,this._send(r.WillSendEvent.WILL_SEND_AD_START,r.Service.AD_START,t),i.notice(r.Service.AD_START+" "+t.adPosition+t.adNumber+" at "+t.playhead+"s")):this._adsAdapter.flags.isInited||(this.adInitSent=!0,this._send(r.WillSendEvent.WILL_SEND_AD_INIT,r.Service.AD_INIT,t),i.notice(r.Service.AD_INIT+" "+t.adPosition+t.adNumber+" at "+t.playhead+"s")))},_adJoinListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber,this.options["ad.ignore"]||!this.adInitSent||this.adStartSent||(this._send(r.WillSendEvent.WILL_SEND_AD_START,r.Service.AD_START,t),i.notice(r.Service.AD_START+" "+t.adPosition+t.adNumber+" at "+t.playhead+"s")),this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_JOIN,r.Service.AD_JOIN,t),i.notice(r.Service.AD_JOIN+" "+t.adJoinDuration+"ms"),this.adInitSent=!1,this.adStartSent=!1},_adPauseListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_PAUSE,r.Service.AD_PAUSE,t),i.notice(r.Service.AD_PAUSE+" at "+t.adPlayhead+"s")},_adResumeListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_RESUME,r.Service.AD_RESUME,t),i.notice(r.Service.AD_RESUME+" "+t.adPauseDuration+"ms")},_adBufferBeginListener:function(e){i.notice("Ad Buffer Begin"),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_BUFFER,r.Service.AD_BUFFER,t),i.notice(r.Service.AD_BUFFER+" "+t.adBufferDuration+"ms")},_adStopListener:function(e){this._adsAdapter.totalPrerolls=(this._adsAdapter.totalPrerolls||0)+this._adsAdapter.chronos.total.getDeltaTime();var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_STOP,r.Service.AD_STOP,t),i.notice(r.Service.AD_STOP+" "+t.adTotalDuration+"ms")},_adErrorListener:function(e){var t=e.data.params||{};return!this._adapter||this._adapter.flags.isStarted||this._adapter.flags.isInited||this.isInitiated?this._blockAdError(e.data.params)?null:(this._adsAdapter&&(this._adsAdapter.flags.isStarted||this._adsAdapter.flags.isInited)?t.adNumber=this.requestBuilder.lastSent.adNumber:t.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_ERROR,r.Service.AD_ERROR,t),void i.notice(r.Service.AD_ERROR)):(this._savedAdError=e,null)},_adSavedError:function(){this._savedAdError&&(this._adErrorListener(this._savedAdError),this._savedAdError=null)},_blockAdError:function(e){var t=Date.now();return this._lastAdErrorParams&&this._lastAdErrorParams.errorCode===e.errorCode&&this._lastAdErrorParams.msg===e.msg&&this._lastAdErrorTime+5e3>t?(this._lastAdErrorTime=t,!0):(this._lastAdErrorTime=t,this._lastAdErrorParams=e,!1)},_adClickListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.lastSent.adNumber,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_CLICK,r.Service.AD_CLICK,t),i.notice(r.Service.AD_CLICK)},_adBlockedListener:function(e){var t=e.data.params||{};t.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_BLOCKED,r.Service.AD_BLOCKED,t),i.notice(r.Service.AD_BLOCKED)}};e.exports=s},function(e,t,n){var i=n(0),r=n(2),a={getAdPlayerVersion:function(){var e="";if(this._adsAdapter)try{e=this._adsAdapter.getPlayerVersion()}catch(e){i.warn("An error occured while calling getAdPlayerVersion",e)}return e},getAdPosition:function(){var e="pre";if(this._adsAdapter)try{e=this._adsAdapter.getPosition()}catch(e){i.warn("An error occured while calling getAdPosition",e)}return!e&&this._adapter&&(e=this._adapter.flags.isJoined?"mid":"pre"),e},getAdPlayhead:function(){var e=null;if(this._adsAdapter)try{e=this._adsAdapter.getPlayhead()}catch(e){i.warn("An error occured while calling getAdPlayhead",e)}return r.parseNumber(e,0)},getAdDuration:function(){var e=null;if(this._adsAdapter)try{e=this._adsAdapter.getDuration()}catch(e){i.warn("An error occured while calling getAdDuration",e)}return r.parseNumber(e,0)},getAdBitrate:function(){var e=null;if(this._adsAdapter){try{e=this._adsAdapter.getBitrate()}catch(e){i.warn("An error occured while calling getAdBitrate",e)}e&&-1!==e||(e=this.getWebkitAdBitrate())}return r.parseNumber(e,-1)},getWebkitAdBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var e=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var t=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;e=Math.round(t/this.viewTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}},getAdTitle:function(){var e=null;if(this.options["ad.title"])return this.options["ad.title"];if(this._adsAdapter)try{e=this._adsAdapter.getTitle()}catch(e){i.warn("An error occured while calling getAdTitle",e)}return e},getAdResource:function(){var e=null;if(this.options["ad.resource"])return this.options["ad.resource"];if(this._adsAdapter)try{e=this._adsAdapter.getResource()}catch(e){i.warn("An error occured while calling getAdResource",e)}return e},getAdCampaign:function(){return this.options["ad.campaign"]?this.options["ad.campaign"]:null},getAdAdapterVersion:function(){var e=null;if(this._adsAdapter)try{e=this._adsAdapter.getVersion()}catch(e){i.warn("An error occured while calling getAdsAdapterVersion",e)}return e},getAdMetadata:function(){return this.options["ad.metadata"]},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1}};e.exports=a},function(e,t,n){var i=n(0),r=n(3),a={_startPings:function(){this._ping.isRunning||this._ping.start()},_stopPings:function(){this._ping.stop()},_sendPing:function(e){var t={diffTime:e,entities:this.requestBuilder.getChangedEntities()};this._adapter&&(t=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(t,["pauseDuration"]):this.requestBuilder.fetchParams(t,["bitrate","throughput","fps"]),this._adapter.flags.isJoined&&(t=this.requestBuilder.fetchParams(t,["playhead"])),this._adapter.flags.isBuffering&&(t=this.requestBuilder.fetchParams(t,["bufferDuration"])),this._adapter.flags.isSeeking&&(t=this.requestBuilder.fetchParams(t,["seekDuration"])),this._adsAdapter&&!this.options["ad.ignore"]&&(this._adsAdapter.flags.isStarted&&(t=this.requestBuilder.fetchParams(t,["adPlayhead"]),t=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(t,["adPauseDuration"]):this.requestBuilder.fetchParams(t,["adBitrate"])),this._adsAdapter.flags.isBuffering&&(t=this.requestBuilder.fetchParams(t,["adBufferDuration"])))),this._send(r.WillSendEvent.WILL_SEND_PING,r.Service.PING,t),i.verbose(r.Service.PING)}};e.exports=a},function(e,t,n){var a=n(0),s=n(2),o=n(3),i=(n(14),n(6)),r={firePreloadBegin:function(){this.isPreloading||(this.isPreloading=!0,this.preloadChrono.start())},firePreloadEnd:function(){this.isPreloading&&(this.isPreloading=!1,this.preloadChrono.stop())},fireInit:function(e){this.isInitiated||this.getAdapter()&&(!this.getAdapter()||this.getAdapter().flags.isInited||this.getAdapter().flags.isStarted)||(this.viewTransform.nextView(),this._initComm(),this._startPings(),this.initChrono.start(),this.isInitiated=!0,e=e||{},this._send(o.WillSendEvent.WILL_SEND_INIT,o.Service.INIT,e),this._adSavedError(),a.notice(o.Service.INIT+" "+(e.title||e.mediaResource)))},fireError:function(e,t,n,i){this.isInitiated||this.getAdapter()&&(this.getAdapter().flags.isStarted||this.getAdapter().flags.isInited)||this.viewTransform.nextView(),this._comm||this._initComm();var r=s.buildErrorParams(e,t,n,i);this._send(o.WillSendEvent.WILL_SEND_ERROR,o.Service.ERROR,r),this._adSavedError(),a.notice(o.Service.ERROR+" "+r.errorLevel+" "+r.errorCode),"fatal"===r.errorLevel&&(this._reset(),this.viewTransform.nextView())},fireFatalError:function(e,t,n){this.options["ad.afterStop"]=0,this.fireError(e,t,n,"fatal"),this._adapter?this._adapter.fireStop():this.fireStop()},fireStop:function(e){e&&void 0!==e.end&&e.end&&(e.end=void 0,this.options["ad.afterStop"]=0),this._adsAdapter||(this.options["ad.afterStop"]=0),0===this.options["ad.afterStop"]&&(this._adapter&&(this._adapter.flags.isStopped=!0),e=e||{},this._send(o.WillSendEvent.WILL_SEND_STOP,o.Service.STOP,e),a.notice(o.Service.STOP+" at "+e.playhead+"s"),this._reset())},fireOfflineEvents:function(e){this.options&&!this.options.offline?this._adapter&&(this._adapter.flags.isStarted||this._adapter.flags.isInited)||this._adsAdapter&&(this._adsAdapter.flags.isStarted||this._adsAdapter.flags.isInited)?a.error("Adapters have to be stopped"):(this._offlineParams=e,this.viewTransform.response.code&&this.viewTransform.response.host?this._generateAndSendOffline():(this.offlineReference=this._generateAndSendOffline.bind(this),this.viewTransform.on(i.Event.DONE,this.offlineReference))):a.error("To send offline events, offline option must be disabled")},_generateAndSendOffline:function(){var e=this._offlineParams;for(this._initComm();;){var t=this.requestBuilder.buildBody(o.Service.OFFLINE_EVENTS).viewJson;if(null===t[0])break;var n=this.viewTransform.nextView(),i=t[0].replace(/CODE_PLACEHOLDER/g,n.toString()).replace(/,"sessionId":"SESSION_PLACEHOLDER"/g,"").replace(/,"sessionRoot":"ROOT_PLACEHOLDER"/g,"").replace(/,"parentId":"PARENT_PLACEHOLDER"/g,"");this._send(o.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,o.Service.OFFLINE_EVENTS,e,i,"POST",function(e,t){this.offlineStorage.removeView(t.offlineId)}.bind(this),{offlineId:t[1]})}this.offlineStorage.sent(),this._offlineParams=null}};e.exports=r},function(e,t,n){var i=n(3),r=n(0),a=n(5),s=n(15),o={_initInfinity:function(){this.infinity.on(s.Event.NAV,this._navListener.bind(this)),this.infinity.on(s.Event.SESSION_START,this._sessionStartListener.bind(this)),this.infinity.on(s.Event.SESSION_STOP,this._sessionStopListener.bind(this)),this.infinity.on(s.Event.EVENT,this._eventListener.bind(this))},_sendInfinity:function(e,t,n){var i={params:n=this.requestBuilder.buildParams(n,t),plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};this.emit(e,i),this.infinity._comm&&null!==n&&this.options.enabled&&(this.lastServeiceSent=t,this.infinity._comm.sendRequest(new a(null,t,n)))},_navListener:function(e){var t=e.data.params||{};this._sendInfinity(i.WillSendEvent.WILL_SEND_NAV,i.Service.NAV,t),this._beat.isRunning||this._beat.start(),r.notice(i.Service.NAV+" "+t.route)},_sessionStartListener:function(e){var t=e.data.params||{};this._sendInfinity(i.WillSendEvent.WILL_SEND_SESSION_START,i.Service.SESSION_START,t),this._beat.isRunning||this._beat.start(),r.notice(i.Service.SESSION_START+" "+t.route)},_sessionStopListener:function(e){var t=e.data.params||{};this._sendInfinity(i.WillSendEvent.WILL_SEND_SESSION_STOP,i.Service.SESSION_STOP,t),this._beat.isRunning&&this._beat.stop(),r.notice(i.Service.SESSION_STOP+" "+t.route)},_eventListener:function(e){var t=e.data.params||{};this._sendInfinity(i.WillSendEvent.WILL_SEND_EVENT,i.Service.EVENT,t),r.notice(i.Service.EVENT+" "+t.name)},_sendBeat:function(e){var t={diffTime:e,sessions:[this.getSessionId()]};this._sendInfinity(i.WillSendEvent.WILL_SEND_BEAT,i.Service.BEAT,t),this.infinity&&this.infinity._setLastActive(),r.verbose(i.Service.BEAT)}};e.exports=o},function(e,t){var n={getContext:function(){return this.storage.getSession("context")},getSessionId:function(){return this.storage.getSession("session")||this.storage.getLocal("session")},getStoredData:function(){return this.storage.getSession("data")||this.storage.getLocal("data")},getDataTime:function(){return this.storage.getSession("dataTime")||this.storage.getLocal("dataTime")},getLastActive:function(){return this.storage.getSession("lastactive")||this.storage.getLocal("lastactive")},setStoredData:function(e){this.storage.setLocal("data",e),this.storage.setSession("data",e)},setSessionId:function(e){this.storage.setLocal("session",e),this.storage.setSession("session",e)},setDataTime:function(e){this.storage.setLocal("dataTime",e),this.storage.setSession("dataTime",e)},setLastActive:function(e){this.storage.setLocal("lastactive",e),this.storage.setSession("lastactive",e)},getPageName:function(){if(document&&document.title)return document.title},getIsSessionExpired:function(){var e=(new Date).getTime();return!this.getSessionId()||this.infinity.getFirstActive()<e-this.sessionExpire},getIsDataExpired:function(){var e=(new Date).getTime();return!this.getStoredData()||this.infinity.getFirstActive()<e-this.sessionExpire}};e.exports=n},function(e,t,n){var i=n(9),c=n(2),r=i.extend({getListenersList:function(){},registerListeners:function(){if(this._registeredListeners&&0!=this._registeredListeners.length)return null;var e=this.getListenersList();for(var t in this._registeredListeners=[],e){var n=e[t].object;n||(n=this.player);var i=e[t].suscriber;i||("function"==typeof n.addEventListener?i="addEventListener":"function"==typeof n.on&&(i="on"));var r=e[t].unsuscriber;r||("function"==typeof n.removeEventListener?r="removeEventListener":"function"==typeof n.off&&(r="off"));var a=e[t].events,s=[];for(var o in a)s.push(o);for(var l in"addEventListener"===i||"on"===i?c.logAllEvents(n,[null].concat(s)):c.logAllEvents(n[i],[null].concat(s)),a)if(a[l]){this._registeredListeners.push([n,r,l,a[l].bind(this)]);var u=this._registeredListeners.length-1;n[i](l,this._registeredListeners[u][3])}}},unregisterListeners:function(){if(this.monitor.stop(),0===this._registeredListeners.length)return null;for(var e in this._registeredListeners){var t=this._registeredListeners[e],n=t[0],i=t[1],r=t[2],a=t[3];n[i](r,a)}this._registeredListeners=[]}});e.exports=r}])}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.youbora=t():e.youbora=t()}(window,function(){return function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e){e.exports={name:"html5",type:"adapter",tech:"js",author:"Jordi Aguilar",version:"6.4.2",built:"2018-12-21",repo:"https://bitbucket.org/npaw/html5-adapter-js.git",libVersion:"6.4.5",features:{buffer:"monitor",seek:"native",getters:["getPlayhead","getDuration","getIsLive","getResource"]},ads:[]}},function(e,t,n){var i=n(0);youbora.adapters.Html5=youbora.StandardAdapter.extend({getVersion:function(){return i.version+"-"+i.name+"-"+i.tech},getPlayhead:function(){return this.player.currentTime},getDuration:function(){return this.player.duration},getResource:function(){return this.player.currentSrc},getIsLive:function(){return!1},getPlayerName:function(){return"html5"},getPlayerVersion:function(){return this.getPlayerName()},initializeAdapter:function(){this.monitorPlayhead(!0,!1)},getListenersList:function(){return[{events:{play:this.playListener,timeupdate:this.timeupdateListener,pause:this.pauseListener,playing:this.playingListener,error:this.errorListener,seeking:this.seekingListener,seeked:this.seekedListener,ended:this.endedListener,canplay:null,buffering:null,waiting:null,abort:null,seek:null,stalled:null,dispose:null,loadeddata:null,loadstart:null}}]},playListener:function(e){this.fireStart()},timeupdateListener:function(e){.1<this.getPlayhead()&&(this.fireStart(),this.fireJoin())},pauseListener:function(e){this.firePause()},playingListener:function(e){this.fireResume()},errorListener:function(e){this.fireError()},seekingListener:function(e){this.fireSeekBegin()},seekedListener:function(e){this.fireSeekEnd()},endedListener:function(e){this.fireStop()}}),e.exports=youbora.adapters.Html5},function(e,t,n){n(1),e.exports=youbora}])}),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(window,function(){return function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){youbora.registerAdapter("Freewheel",n(1))},function(e,t,n){var i=n(2);youbora.adapters.Freewheel=youbora.Adapter.extend({getVersion:function(){return i.version+"-"+i.name+"-"+i.tech},getPlayhead:function(){if(this.slot){var e=this.slot.getAdInstances();if(e){var t=(this.plugin.requestBuilder.lastSent.adNumber||1)-1;if(e[t]&&e[t].getPlayheadTime)return e[t].getPlayheadTime()}}return null},getDuration:function(){if(this.slot){var e=this.slot.getAdInstances();if(e){var t=(this.plugin.requestBuilder.lastSent.adNumber||1)-1;if(e[t]&&e[t].getDuration)return e[t].getDuration()}}return null},getTitle:function(){return this.titles?this.titles[(this.plugin.requestBuilder.lastSent.adNumber||1)-1]._adId:"unknown"},getResource:function(){return this.player.originalSource?this.player.originalSource:this.plugin.getAdapter()?this.plugin.getAdapter().getResource():null},getPlayerVersion:function(){return tv.freewheel.SDK.version},getPlayerName:function(){return"Freewheel"},getPosition:function(){return this.position},registerListeners:function(){for(var e in this.canRemoveListeners=!0,this.events=tv.freewheel.SDK,this.references=[],this.references[this.events.EVENT_AD]=this.logListener.bind(this),this.references[this.events.EVENT_ERROR]=this.errorListener.bind(this),this.references[this.events.EVENT_SLOT_STARTED]=this.slotListener.bind(this),this.references[this.events.EVENT_SLOT_ENDED]=this.closeListener.bind(this),this.references)this.player.currentAdContext.addEventListener(e,this.references[e])},unregisterListeners:function(){if(this.player&&this.references){for(var e in this.references)this.player.currentAdContext.removeEventListener(e,this.references[e]);this.references=[]}},logListener:function(e){if(youbora.Log.debug(e.subType),e.errorCode||e.errorInfo||e.errorModule)this.errorListener(e);else switch(e.subType){case this.events.EVENT_AD_PAUSE:this.pauseListener(e);break;case this.events.EVENT_AD_RESUME:this.resumeListener(e);break;case this.events.EVENT_AD_IMPRESSION_END:this.endedListener(e);break;case this.events.EVENT_AD_INITIATED:this.playListener(e);break;case this.events.EVENT_AD_IMPRESSION:this.playingListener(e);break;case this.events.EVENT_AD_SKIPPED:this.skipListener(e);break;case this.events.EVENT_SLOT_STARTED:this.slotListener(e);break;case this.events.EVENT_AD_CLOSE:case this.events.EVENT_SLOT_ENDED:this.closeListener(e);break;case this.events.EVENT_AD_CLICK:this.clickListener(e)}},slotListener:function(e){this.slot=e.slot;var t=e.slot.getTimePositionClass();this.disable=!1,"POSTROLL"===t?this.position="post":"MIDROLL"===t?this.position="mid":"PREROLL"===t?(this.position="pre",this.plugin.getAdapter()&&this.plugin.getAdapter().flags.isJoined&&(this.position="mid")):this.disable=!0,this.disable||(this.titles=e.slot.getAdInstances(),this.plugin.getAdapter()&&this.canRemoveListeners&&(this.canRemoveListeners=!1,this.plugin.getAdapter().unregisterListeners(),this.plugin.getAdapter().firePause()),this.plugin.fireInit(),this.fireInit())},playListener:function(e){if(this.disable)return null;this.fireStart()},playingListener:function(e){if(this.disable)return null;this.fireStart(),this.fireJoin()},pauseListener:function(e){this.firePause()},resumeListener:function(e){this.playListener(),this.fireResume()},endedListener:function(e){this.fireStop()},skipListener:function(e){this.fireStop({skipped:!0})},clickListener:function(e){var t=e.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0];this.fireClick({url:t})},closeListener:function(e){this.register(),"post"!==this.position||this.disable||this.plugin.fireStop({end:!0})},errorListener:function(e){this.fireError(e.errorCode||e.subType,e.errorInfo),this.fireStop(),this.register()},register:function(e){this.plugin.getAdapter()&&!this.canRemoveListeners&&(this.plugin.getAdapter().registerListeners(),this.plugin.getAdapter().fireResume(),this.canRemoveListeners=!0)},changeVideo:function(e){(this.flags.isStarted||this.flags.isInited)&&(this.fireStop(),this.plugin.fireStop({end:!0}),this.register())}}),e.exports=youbora.adapters.Freewheel},function(e){e.exports={name:"freewheel",type:"adapter",tech:"js",author:"Jesus Lopez",version:"6.4.1",built:"2018-12-21",repo:"https://bitbucket.org/npaw/freewheel-adapter-js",libVersion:"^6.4.9",features:{buffer:"monitor",seek:"monitor",getters:["getPlayhead","getDuration","getTitle","getResource","getPosition"]},ads:[]}}])}),function(e,t){"use strict";function n(e,t){function n(){}n.prototype=e;var i=new n;for(var r in t)i[r]=t[r];return t.toString!==Object.prototype.toString&&(i.toString=t.toString),i}var o=function(){};o.__name__=!0,o.__format_get=function(e,t){switch(t){case"%":return"%";case"A":return o.DAY_NAMES[e.getDay()];case"B":return o.MONTH_NAMES[e.getMonth()];case"C":return d.lpad(fe.string(e.getFullYear()/100|0),"0",2);case"D":return o.__format(e,"%m/%d/%y");case"F":return o.__format(e,"%Y-%m-%d");case"I":case"l":var n=e.getHours()%12;return d.lpad(fe.string(0==n?12:n),"I"==t?"0":" ",2);case"M":return d.lpad(fe.string(e.getMinutes()),"0",2);case"R":return o.__format(e,"%H:%M");case"S":return d.lpad(fe.string(e.getSeconds()),"0",2);case"T":return o.__format(e,"%H:%M:%S");case"Y":return fe.string(e.getFullYear());case"a":return o.DAY_SHORT_NAMES[e.getDay()];case"b":case"h":return o.MONTH_SHORT_NAMES[e.getMonth()];case"d":return d.lpad(fe.string(e.getDate()),"0",2);case"e":return fe.string(e.getDate());case"H":case"k":return d.lpad(fe.string(e.getHours()),"H"==t?"0":" ",2);case"m":return d.lpad(fe.string(e.getMonth()+1),"0",2);case"n":return"\n";case"p":return 11<e.getHours()?"PM":"AM";case"r":return o.__format(e,"%I:%M:%S %p");case"s":return fe.string(e.getTime()/1e3|0);case"t":return"\t";case"u":var i=e.getDay();return 0==i?"7":null==i?"null":""+i;case"w":return fe.string(e.getDay());case"y":return d.lpad(fe.string(e.getFullYear()%100),"0",2);default:throw new Me("Date.format %"+t+"- not implemented yet.")}},o.__format=function(e,t){for(var n="",i=0;;){var r=t.indexOf("%",i);if(r<0)break;var a=r-i;n+=null==a?l.substr(t,i,null):l.substr(t,i,a),n+=fe.string(o.__format_get(e,l.substr(t,r+1,1))),i=r+2}var s=t.length-i;return n+=null==s?l.substr(t,i,null):l.substr(t,i,s)},o.format=function(e,t){return o.__format(e,t)};var _=function(e,t){this.r=new RegExp(e,t.split("u").join(""))};_.__name__=!0,_.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},matched:function(e){if(null!=this.r.m&&0<=e&&e<this.r.m.length)return this.r.m[e];throw new Me("EReg::matched")},split:function(e){var t="#__delim__#";return e.replace(this.r,t).split(t)},__class__:_};var l=function(){};l.__name__=!0,l.cca=function(e,t){var n=e.charCodeAt(t);if(n==n)return n},l.substr=function(e,t,n){if(null==n)n=e.length;else if(n<0){if(0!=t)return"";n=e.length+n}return e.substr(t,n)},l.remove=function(e,t){var n=e.indexOf(t);return-1!=n&&(e.splice(n,1),!0)},l.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var g=function(){};g.__name__=!0,g.exists=function(e,t){for(var n=ke(e)();n.hasNext();)if(t(n.next()))return!0;return!1},g.count=function(e,t){var n=0;if(null==t)for(var i=ke(e)();i.hasNext();)i.next(),++n;else for(var r=ke(e)();r.hasNext();)t(r.next())&&++n;return n};var i=function(){this.length=0};i.__name__=!0,i.prototype={iterator:function(){return new a(this.h)},__class__:i};var r=function(){};r.__name__=!0,r.prototype={__class__:r};var a=function(e){this.head=e};a.__name__=!0,a.prototype={hasNext:function(){return null!=this.head},next:function(){var e=this.head.item;return this.head=this.head.next,e},__class__:a};var s=function(){this.listenerObjectArray=[]};s.__name__=!0,s.prototype={addEventListener:function(e,t,n){null==n&&(n=!1),null!=e&&null!=t&&this.listenerObjectArray.push({event:e,funct:t,autoKill:n})},removeEventListener:function(e,t){for(var n=0,i=this.listenerObjectArray;n<i.length;){var r=i[n];++n,r.event!=e||r.funct!=t&&null!=t||l.remove(this.listenerObjectArray,r)}},dispatchEvent:function(e,t,n){for(var i=0,r=this.listenerObjectArray;i<r.length;){var a=r[i];++i,a.event==e&&(a.funct(e,t,n),a.autoKill&&this.removeEventListener(a.event,a.funct))}},__class__:s};var de=function(){s.call(this),this.currentProgress=0};de.__name__=!0,de.__super__=s,de.prototype=n(s.prototype,{get_currentState:function(){return this.currentState},set_currentState:function(e){return this.currentState=e},__class__:de,__properties__:{set_currentState:"set_currentState",get_currentState:"get_currentState"}});var u=function(e){var t,n,i,r,a,s,o,l,u,c,d,h,f,p,_,g,m,v,E,y;(this.dvrPauseTimerDelayMs=1e3,this.dvrPaused=!1,this.streamLostRetryAttempt=0,de.call(this),null==e)?n=null:n=!!e.__properties__&&(t=e.__properties__.get_debug)?e[t]():e.debug;if("1"==n)for(var T=0,A=he.fields(e);T<A.length;){var S=A[T];++T,be.trace("config",{fileName:"PlayerCompute.hx",lineNumber:80,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new",customParams:[" "+S+":"+fe.string(he.field(e,S))]})}null==e?a=null:a=!!e.__properties__&&(r=e.__properties__.get_os)?e[r]():e.os;if(null!=a){var R,b;if(null==e)b=null;else b=!!e.__properties__&&(R=e.__properties__.get_os)?e[R]():e.os;i=""==b}else i=!0;if(i){var I,C,P,w=Te.getOS();if(!!e.__properties__&&(I=e.__properties__.set_os)?e[I](w):e.os=w,null==e)P=null;else P=!!e.__properties__&&(C=e.__properties__.get_debug)?e[C]():e.debug;"1"==P&&be.trace("no OS supplied in config - using : '"+w+"'",{fileName:"PlayerCompute.hx",lineNumber:91,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"})}null==e?l=null:l=!!e.__properties__&&(o=e.__properties__.get_device)?e[o]():e.device;if(null!=l){var O,D;if(null==e)D=null;else D=!!e.__properties__&&(O=e.__properties__.get_device)?e[O]():e.device;s=""==D}else s=!0;if(s){var N,M,L,x=Te.getDevice();if(!!e.__properties__&&(N=e.__properties__.set_device)?e[N](x):e.device=x,null==e)L=null;else L=!!e.__properties__&&(M=e.__properties__.get_debug)?e[M]():e.debug;"1"==L&&be.trace("no device in config - using : '"+x+"'",{fileName:"PlayerCompute.hx",lineNumber:101,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"})}"1"==he.field(e,"mute")&&Te.isIOS()&&(!!e.__properties__&&(u=e.__properties__.set_mute)?e[u]("0"):e.mute="0");if(null!=he.field(e,"paramsTags")){var k=he.field(e,"paramsTags"),F=decodeURIComponent(k.split("+").join(" "));F=JSON.parse(F);var U,V={};V.name=F.name,V.level2=F.level2,!!e.__properties__&&(U=e.__properties__.set_paramsTags)?e[U](V):e.paramsTags=V}else{var B;!!e.__properties__&&(B=e.__properties__.set_paramsTags)?e[B](""):e.paramsTags=""}null==e?h=null:h=!!e.__properties__&&(d=e.__properties__.get_forceTouchSupport)?e[d]():e.forceTouchSupport;if("1"!=h)if(Te.isMobileTab()){var j,H,Y=window.document.documentElement;if(null==Y)H=null;else H=!!Y.__properties__&&(j=Y.__properties__.get_ontouchstart)?Y[j]():Y.ontouchstart;c=null!=H}else c=!1;else c=!0;if(c){var q,K=window.document.documentElement;!!K.__properties__&&(q=K.__properties__.set_ontouchstart)?K[q](function(){}):K.ontouchstart=function(){}}null==e?p=null:p=!!e.__properties__&&(f=e.__properties__.get_t)?e[f]():e.t;if(null!=p){var G,W;if(null==e)W=null;else W=!!e.__properties__&&(G=e.__properties__.get_t)?e[G]():e.t;this.currentProgress=ye.tcInToSeconds(W)}null==e?m=null:m=!!e.__properties__&&(g=e.__properties__.get_debug)?e[g]():e.debug;if("1"==m){var z,X;if(null==e)X=null;else X=!!e.__properties__&&(z=e.__properties__.get_traceua)?e[z]():e.traceua;_="1"==X}else _=!1;(_&&(be.trace("--------------------",{fileName:"PlayerCompute.hx",lineNumber:138,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"}),be.trace("\tisAndroid ? "+fe.string(Te.isAndroid()),{fileName:"PlayerCompute.hx",lineNumber:139,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"}),be.trace("\tisIOS ? "+fe.string(Te.isIOS()),{fileName:"PlayerCompute.hx",lineNumber:140,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"}),be.trace("\tisIPad ? "+fe.string(Te.isIPad()),{fileName:"PlayerCompute.hx",lineNumber:141,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"}),be.trace("\tisIPhone ? "+fe.string(Te.isIPhone()),{fileName:"PlayerCompute.hx",lineNumber:142,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"}),be.trace("\tisMobileTab ? "+fe.string(Te.isMobileTab()),{fileName:"PlayerCompute.hx",lineNumber:143,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"}),be.trace("\tisMSIEandNoMSE ? "+fe.string(Te.isMSIEandNoMSE()),{fileName:"PlayerCompute.hx",lineNumber:144,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"}),be.trace("\tisSafari ? "+fe.string(Te.isSafari()),{fileName:"PlayerCompute.hx",lineNumber:145,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"}),be.trace("\tisSamsungBrowser ? "+fe.string(Te.isSamsungBrowser()),{fileName:"PlayerCompute.hx",lineNumber:146,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"}),be.trace("\tisWindows ? "+fe.string(Te.isWindows()),{fileName:"PlayerCompute.hx",lineNumber:147,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"}),be.trace("--------------------",{fileName:"PlayerCompute.hx",lineNumber:148,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"new"})),Te.isMobileTab()||Te.isSafari())&&(!!e.__properties__&&(v=e.__properties__.set_autoStart)?e[v]("0"):e.autoStart="0");(this.config=e,this.set_currentState(pe.WAITING_STATE),_e.getInstance().setLocale(_e.getCurrentBrowserAcceptLanguageAsBCP47()),null==e)?y=null:y=!!e.__properties__&&(E=e.__properties__.get_mediaID)?e[E]():e.mediaID;var Q,J,Z=this.config;null==Z?J=null:J=!!Z.__properties__&&(Q=Z.__properties__.get_width)?Z[Q]():Z.width;var $,ee,te=this.config;null==te?ee=null:ee=!!te.__properties__&&($=te.__properties__.get_height)?te[$]():te.height;var ne,ie,re=this.config;null==re?ie=null:ie=!!re.__properties__&&(ne=re.__properties__.get_container)?re[ne]():re.container;var ae,se,oe=this.config;null==oe?se=null:se=!!oe.__properties__&&(ae=oe.__properties__.get_cssPath)?oe[ae]():oe.cssPath;this.htmlHelper=new me(y,J,ee,ie,se),this.currentVideoElement=this.htmlHelper.videoElement;var le,ue=this.config,ce=this.htmlHelper.getContainer();!!ue.__properties__&&(le=ue.__properties__.set_container)?ue[le](ce):ue.container=ce,Ee.registerPlayer(this)};u.__name__=!0,u.__super__=de,u.prototype=n(de.prototype,{initAnalytics:function(e){if(null==this.analyticsManager){var t,n=this.config,i=this.currentVideoElement;!!n.__properties__&&(t=n.__properties__.set_videoElement)?n[t](i):n.videoElement=i;var r,a=this.config,s=x.getInstance(this.htmlHelper.getContainer().id);!!a.__properties__&&(r=a.__properties__.set_adManager)?a[r](s):a.adManager=s,this.analyticsManager=new Y(e,this.config)}},clearCatalog:function(){null!=this.currentCatalog&&(this.currentCatalog.removeEventListener($.LOADED,Ve(this,this.catalogCompleteHandler)),this.currentCatalog.removeEventListener($.UPDATED,Ve(this,this.catalogUpdateHandler)),this.currentCatalog.removeEventListener($.IO_ERROR,Ve(this,this.catalogErrorHandler)),this.currentCatalog.removeEventListener($.TITLE_CHANGED,Ve(this,this.catalogMediaTitleChangeHandler)),this.currentCatalog.removeEventListener($.EMID_CHANGED,Ve(this,this.catalogEmIdChangeHandler)),this.currentCatalog=null)},computeCatalog:function(e){if(null==e||""==e)return this.currentCatalog=new ee(this.config),this.initErrorSkin(),this.htmlHelper.showErrorNotice(_e.getInstance().getText(C.CONTENU_INDISPONIBLE)),void this.analyticsManager.errorHandler(_e.getInstance().getText(C.CONTENU_INDISPONIBLE),"216");this.clearCatalog();var t=new ee(this.config);t.addEventListener($.LOADED,Ve(this,this.catalogCompleteHandler)),t.addEventListener($.UPDATED,Ve(this,this.catalogUpdateHandler)),t.addEventListener($.IO_ERROR,Ve(this,this.catalogErrorHandler)),t.addEventListener($.TITLE_CHANGED,Ve(this,this.catalogMediaTitleChangeHandler)),t.addEventListener($.EMID_CHANGED,Ve(this,this.catalogEmIdChangeHandler)),t.load(e)},catalogUpdateHandler:function(e,t){t.set_fw(this.checkFWOverrides(t.get_fw())),t.set_richmedia(this.checkRichMediaOverrides(t.get_richmedia())),t.set_media(this.checkMediaOverrides(t.get_media())),t.set_streamroot(this.checkStreamrootOverrides(t.get_streamroot())),t.set_yb(this.checkYouboraOverrides(t.get_yb(),t)),this.currentCatalog=t,null!=this.analyticsManager&&this.analyticsManager.updateCatalog(this.currentCatalog)},catalogErrorHandler:function(e,t,n){this.get_currentState()==pe.WAITING_STATE&&(this.currentCatalog=t,this.initErrorSkin()),null!=this.analyticsManager&&this.analyticsManager.errorHandler(_e.getInstance().getText(C.CONTENU_INDISPONIBLE),"251"),this.htmlHelper.showErrorNotice(_e.getInstance().getText(C.CONTENU_INDISPONIBLE))},catalogCompleteHandler:function(e,t){if(t.set_fw(this.checkFWOverrides(t.get_fw())),t.set_richmedia(this.checkRichMediaOverrides(t.get_richmedia())),t.set_media(this.checkMediaOverrides(t.get_media())),t.set_streamroot(this.checkStreamrootOverrides(t.get_streamroot())),t.set_yb(this.checkYouboraOverrides(t.get_yb(),t)),this.currentCatalog=t,null==this.analyticsManager&&this.initAnalytics(this.currentCatalog),null==this.currentSkin)this.initSkin();else if("live"==this.currentCatalog.get_media().type){var n,i,r=this.currentSkin,a=this.currentCatalog.get_media();if(null==a)i=null;else i=!!a.__properties__&&(n=a.__properties__.get_channel)?a[n]():a.channel;r.setChannel(i)}if(null!=this.currentCatalog.get_richmedia()&&(this.currentCatalog.get_richmedia().paramsTags=he.field(this.config,"paramsTags")),null==this.currentCatalog.get_media())return this.initErrorSkin(),null!=this.analyticsManager&&this.analyticsManager.errorHandler(_e.getInstance().getText(C.CONTENU_INDISPONIBLE),"283"),this.htmlHelper.showErrorNotice(_e.getInstance().getText(C.CONTENU_INDISPONIBLE)),void this.set_currentState(pe.BLOCKED_STATE);if(null!=this.currentCatalog.get_media().error_desc)return"GEOBLOCK"==this.currentCatalog.get_media().error_desc&&(this.currentCatalog.get_media().error_desc=_e.getInstance().getText(C.GEOBLOCK_MESSAGE)),this.initErrorSkin(),null!=this.analyticsManager&&this.analyticsManager.errorHandler(_e.getInstance().getText(C.CONTENU_INDISPONIBLE),"297"),this.htmlHelper.showErrorNotice(this.currentCatalog.get_media().error_desc),void this.set_currentState(pe.BLOCKED_STATE);Ee.dispatchEvent(ve.onReady,he.field(this.config,"container")),X.getInstance(this.currentCatalog.get_mediaID()).init(this.currentCatalog,b.VERSION),X.getInstance(this.currentCatalog.get_mediaID()).sendTracker(G.Ready,W.Media,z.NA,"0","0"),this.htmlHelper.hideErrorNotice();var s,o,l=this.config;null==l?o=null:o=!!l.__properties__&&(s=l.__properties__.get_autoStart)?l[s]():l.autoStart;"1"!=o?this.initWaitingSkin():this.firstPlay(this.currentCatalog)},catalogMediaTitleChangeHandler:function(e,t){Ee.dispatchEvent(ve.onMediaTitleChange,he.field(this.config,"container"),t)},catalogEmIdChangeHandler:function(e,t){Ee.dispatchEvent(ve.onMediaChange,he.field(this.config,"container"),t)},checkMediaOverrides:function(e){return null==e?null:("live"==e.type&&null!=e.preview&&0==e.preview.indexOf("//")&&(e.preview="https:"+e.preview),e)},checkRichMediaOverrides:function(e){if(null==e)return null;var t,n,i,r,a=this.config;null==a?i=null:i=!!a.__properties__&&(n=a.__properties__.get_xitiSiteID)?a[n]():a.xitiSiteID;if(null!=i){var s,o,l=this.config;if(null==l)o=null;else o=!!l.__properties__&&(s=l.__properties__.get_xitiSiteID)?l[s]():l.xitiSiteID;t=""!=o}else t=!1;if(t){var u,c,d=this.config;if(null==d)c=null;else c=!!d.__properties__&&(u=d.__properties__.get_xitiSiteID)?d[u]():d.xitiSiteID;e.site=c}var h,f,p,_=this.config;null==_?f=null:f=!!_.__properties__&&(h=_.__properties__.get_urlPage)?_[h]():_.urlPage;if(null!=f){var g,m,v=this.config;if(null==v)m=null;else m=!!v.__properties__&&(g=v.__properties__.get_urlPage)?v[g]():v.urlPage;r=""!=m}else r=!1;if(r){var E,y,T=this.config;if(null==T)y=null;else y=!!T.__properties__&&(E=T.__properties__.get_urlPage)?T[E]():T.urlPage;e.webdomain=y}var A,S,R=this.config;null==R?S=null:S=!!R.__properties__&&(A=R.__properties__.get_paramsTags)?R[A]():R.paramsTags;if(null!=S){var b,I,C=this.config;if(null==C)I=null;else I=!!C.__properties__&&(b=C.__properties__.get_paramsTags)?C[b]():C.paramsTags;p=""!=I}else p=!1;if(p){var P,w,O=this.config;if(null==O)w=null;else w=!!O.__properties__&&(P=O.__properties__.get_paramsTags)?O[P]():O.paramsTags;e.paramsTags=w}return e},checkFWOverrides:function(e){var t,n,i=this.config;null==i?n=null:n=!!i.__properties__&&(t=i.__properties__.get_noAd_test)?i[t]():i.noAd_test;if("1"==n)return null;if(null==e)return null;var r,a,s=this.config;null==s?a=null:a=!!s.__properties__&&(r=s.__properties__.get_fw_test)?s[r]():s.fw_test;if("1"==a)e.id=506335,e.profile="506335:tf1_html5_test",e.url="https://7b9df.v.fwmrm.net";else{var o,l,u=this.config;if(null==u)l=null;else l=!!u.__properties__&&(o=u.__properties__.get_fw_live)?u[o]():u.fw_live;"1"==l&&(e.id=506334,e.profile="506334:tf1_html5_live",e.url="https://7b9de.v.fwmrm.net")}return e},checkStreamrootOverrides:function(e){var t,n,i=this.config;null==i?n=null:n=!!i.__properties__&&(t=i.__properties__.get_noStreamroot)?i[t]():i.noStreamroot;return"1"==n?null:e},checkYouboraOverrides:function(e,t){return null!=t.get_media()&&null!=t.get_media().error_code&&""!=t.get_media().error_code?null:e},computeDelivery:function(e,t,n){null==t&&(t=0),this.htmlHelper.showSpinner(),this.get_currentState()==pe.AD_STATE&&this.analyticsManager.sendStop(),null==this.delivery&&(this.delivery=new re,this.delivery.addEventListener(ie.LOADED,Ve(this,this.deliveryLoadedHandler)),this.delivery.addEventListener(ie.ERROR,Ve(this,this.deliveryErrorHandler)));var i,r,a=this.config;null==a?r=null:r=!!a.__properties__&&(i=a.__properties__.get_context)?a[i]():a.context;var s,o,l=this.config;null==l?o=null:o=!!l.__properties__&&(s=l.__properties__.get_preprodDelivery)?l[s]():l.preprodDelivery;null!=this.currentCatalog.get_delivery()?this.delivery.forceDelivery(this.currentCatalog.get_delivery()):this.delivery.requestFromId(e,r,n,t,-1,"1"==o),null==this.youbora&&(this.youbora=new ue(this.currentCatalog,null,this.config),this.analyticsManager.addEventListener(H.ON_CHAPTER_CHANGED,Ve(Fe=this.youbora,Fe.onChapterChanged)),this.analyticsManager.addEventListener(H.ERROR,Ve(Fe=this.youbora,Fe.errorHandler)))},deliveryErrorHandler:function(e,t){var n="";n=null!=t&&null!=t.get_delivery()&&null!=t.get_delivery().error&&""!=t.get_delivery().error?t.get_delivery().error:_e.getInstance().getText(C.CONTENU_INDISPONIBLE),this.initErrorSkin(),this.htmlHelper.hideSpinner(),this.htmlHelper.showErrorNotice(n),this.set_currentState(pe.BLOCKED_STATE),this.analyticsManager.errorHandler(n,"449"),this.analyticsManager.sendStop()},deliveryLoadedHandler:function(e,t){var n={};n.url=t.get_delivery().url,n.tcIn=this.currentProgress,n.drmData={widevine:this.currentCatalog.get_media().id,playready:this.currentCatalog.get_media().id,fairplay:this.currentCatalog.get_media().id},n.catalogStreamroot=this.currentCatalog.get_streamroot(),n.engineType=t.get_delivery().engineType,n.streamType=this.currentCatalog.get_media().type,n.autoplay=!0;var i,r,a=this.config;null==a?r=null:r=!!a.__properties__&&(i=a.__properties__.get_mediaID)?a[i]():a.mediaID;n.mediaID=fe.string(r),"live"==this.currentCatalog.get_media().type?(null==this.currentLiveAPI||this.currentLiveAPI.enabled||Ie.delay(Ve(Fe=this.currentLiveAPI,Fe.refresh),500),null!=this.currentLiveAPI&&this.currentLiveAPI.enabled?(n.tcIn=this.dvrTimeshiftOffset,this.startDVR(),Ie.delay(Ve(Fe=this.currentLiveAPI,Fe.refresh),500)):(this.set_currentState(pe.LIVE_STATE),this.initSkinLIVE())):(null==this.currentCatalog.get_media()||null!=this.currentCatalog.get_media().duration&&0!=this.currentCatalog.get_media().duration||null==t.get_delivery()||null==t.get_delivery().duration||(this.currentCatalog.get_media().duration=t.get_delivery().duration),this.set_currentState(pe.MEDIA_STATE),this.initSkinVOD()),this.analyticsManager.sendPlay();var s,o,l=null,u=this.config;null==u?o=null:o=!!u.__properties__&&(s=u.__properties__.get_forceEngine)?u[s]():u.forceEngine;"videojs"==o?l=m.VIDEOJS:(Te.isSamsungBrowser()||Te.isSafari()&&n.engineType==m.HLS)&&(l=m.VIDEOJS),this.initMediaEngine(n,l),x.getInstance(this.htmlHelper.getContainer().id).setMediaPlay(),y.getInstance(this.currentVideoElement).setPlay()},firstPlay:function(e){var o=this;null!=this.currentSkin&&this.initWaitingSkinNoPlayLarge(),Ee.dispatchEvent(ve.onStart,he.field(this.config,"container"));var t,n=this.config;!!n.__properties__&&(t=n.__properties__.set_autoStart)?n[t]("1"):n.autoStart="1";var i,r,a=this.config;null==a?r=null:r=!!a.__properties__&&(i=a.__properties__.get_adInsert_test)?a[i]():a.adInsert_test;if("1"==r&&(window.document.onkeyup=function(e){switch(e.keyCode){case 81:var t,n,i=o.config;if(null==i)n=null;else n=!!i.__properties__&&(t=i.__properties__.get_adInsertDuration)?i[t]():i.adInsertDuration;var r,a,s=o.config;if(null==s)a=null;else a=!!s.__properties__&&(r=s.__properties__.get_adInsertCode)?s[r]():s.adInsertCode;o.engineAdInsertHandler(v.AD_INSERT,{duration:n,id:a});break;case 87:o.adInsertOutHandler2()}}),null!=e.get_fw())this.computeFW(e.get_fw(),this.config);else{var s,l,u=this.config;if(null==u)l=null;else l=!!u.__properties__&&(s=u.__properties__.get_mediaID)?u[s]():u.mediaID;var c,d,h=this.currentProgress,f=this.config;if(null==f)d=null;else d=!!f.__properties__&&(c=f.__properties__.get_token)?f[c]():f.token;this.computeDelivery(l,h,d)}},computeFW:function(e,t){var n;this.htmlHelper.showSpinner(),!!t.__properties__&&(n=t.__properties__.set_autoStart)?t[n]("1"):t.autoStart="1",x.getInstance(this.htmlHelper.getContainer().id).addEventListener(M.REQUEST_AD_COMPLETE,Ve(this,this.requestAdCompleteHandler),!0),x.getInstance(this.htmlHelper.getContainer().id).addEventListener(M.LINEAR_AD,Ve(this,this.linearAdHandler)),x.getInstance(this.htmlHelper.getContainer().id).addEventListener(M.SLOT_START,Ve(this,this.slotStartHandler)),x.getInstance(this.htmlHelper.getContainer().id).addEventListener(M.SLOT_COMPLETE,Ve(this,this.slotCompleteHandler)),x.getInstance(this.htmlHelper.getContainer().id).addEventListener(M.AD_START,Ve(this,this.adStartHandler)),x.getInstance(this.htmlHelper.getContainer().id).addEventListener(M.AD_COMPLETE,Ve(this,this.adCompleteHandler)),x.getInstance(this.htmlHelper.getContainer().id).addEventListener(M.AD_ERROR,Ve(this,this.adErrorHandler)),x.getInstance(this.htmlHelper.getContainer().id).addEventListener(M.AD_CLICKED,Ve(this,this.adClickedHandler)),x.getInstance(this.htmlHelper.getContainer().id).addEventListener(M.AUTOPLAY_FAILED,Ve(this,this.adAutoplayFailed)),x.getInstance(this.htmlHelper.getContainer().id).requestAd(this.currentCatalog.get_fw(),t),null==this.youbora&&(this.youbora=new ue(this.currentCatalog,x.getInstance(this.htmlHelper.getContainer().id),this.config))},engineAdInsertHandler:function(e,t){if(this.get_currentState()!=pe.AD_STATE&&!this.adInsertInProgress&&!this.dvrCurrentlyOffset)if(parseFloat(t.duration)<=3500){var n,i=this.config;"1"==(null==i?null:!!i.__properties__&&(n=i.__properties__.get_debug)?i[n]():i.debug)&&be.trace(" - no adInsert for this duration: "+t.duration,{fileName:"PlayerCompute.hx",lineNumber:639,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"engineAdInsertHandler"})}else if(null!=this.currentCatalog.get_fw()){this.adInsertInProgress=!0,y.getInstance(this.currentVideoElement).removeEventListener(v.STOP,Ve(this,this.engineStopHandler)),y.getInstance(this.currentVideoElement).setStop(),this.clearMediaEngine();var r,a,s=Math.round(parseFloat(t.duration)),o=this.config;if(null==o)a=null;else a=!!o.__properties__&&(r=o.__properties__.get_adInsertExitImage)?o[r]():o.adInsertExitImage;if(null==a)this.createAdInsertTimer(s);else{var l,u,c,d=this.config;if(null==d)c=null;else c=!!d.__properties__&&(u=d.__properties__.get_adInsertExitImage)?d[u]():d.adInsertExitImage;if(null!=c){var h,f,p=this.config;if(null==p)f=null;else f=!!p.__properties__&&(h=p.__properties__.get_adInsertExitEvent)?p[h]():p.adInsertExitEvent;l=null==f}else l=!1;l&&this.createAdInsertTimer(s)}var _={duration:fe.string(s-4e3),id:t.id};x.getInstance(this.htmlHelper.getContainer().id).requestAdInsert(this.currentCatalog.get_fw(),this.config,_)}},engineAdInsertExitHandler:function(e,t){var n,i,r=this.config;null==r?i=null:i=!!r.__properties__&&(n=r.__properties__.get_adInsertExitEvent)?r[n]():r.adInsertExitEvent;null!=i&&this.adInsertOutHandler2()},createAdInsertTimer:function(e){this.adInsertEndingTimestamp=(new Date).getTime()+e,this.adInsertTimer=new Ie(e),this.adInsertTimer.run=Ve(this,this.adInsertTimeoutHandler)},clearAdInsertTimer:function(){null!=this.adInsertTimer&&(this.adInsertTimer.stop(),this.adInsertTimer.run=null,this.adInsertTimer=null,this.adInsertInProgress=!1)},adInsertBeginExitPad:function(){var e,t,n=this.config;null==n?t=null:t=!!n.__properties__&&(e=n.__properties__.get_adInsertExitImage)?n[e]():n.adInsertExitImage;"1"==t?this.adInsertStartMutedLive():this.adInsertStartJingleOut()},adInsertStartMutedLive:function(){this.htmlHelper.showAdInsertPreview(this.currentCatalog.get_media().preview);var e,t=this.config;!!t.__properties__&&(e=t.__properties__.set_mute)?t[e]("1"):t.mute="1";var n,i,r=this.config;null==r?i=null:i=!!r.__properties__&&(n=r.__properties__.get_mediaID)?r[n]():r.mediaID;var a,s,o=this.currentProgress,l=this.config;null==l?s=null:s=!!l.__properties__&&(a=l.__properties__.get_token)?l[a]():l.token;this.computeDelivery(i,o,s)},adInsertStartJingleOut:function(){if(!this.adInsertJingleOutInProgress){this.adInsertJingleOutInProgress=!0;var e={};e.url=this.currentCatalog.get_fw().jingleOutPath,e.engineType=m.NATIF,this.initMediaEngine(e),this.initLiveAdSkin(),y.getInstance(this.currentVideoElement).removeEventListener(v.STOP,Ve(this,this.engineStopHandler)),y.getInstance(this.currentVideoElement).addEventListener(v.STOP,Ve(this,this.adInsertJingleEnded))}},adInsertJingleEnded:function(e,t){this.adInsertInProgress&&this.adInsertTimeoutHandler()},adInsertTimeoutHandler:function(){this.clearAdInsertTimer(),this.adInsertJingleOutInProgress&&y.getInstance(this.currentVideoElement).removeEventListener(v.STOP,Ve(this,this.adInsertJingleEnded)),this.get_currentState()==pe.AD_STATE?this.adInsertOutHandler1():this.adInsertOutHandler2()},adInsertOutHandler1:function(){this.adInsertJingleOutInProgress=!1,this.slotCompleteHandler(M.SLOT_COMPLETE)},adInsertOutHandler2:function(){this.htmlHelper.hideAdInsertPreview(),this.htmlHelper.hideAdsNotice(),this.currentSkin.setUnMute()},requestAdCompleteHandler:function(e,t){x.getInstance(this.htmlHelper.getContainer().id).setProgress(0)},linearAdHandler:function(e,t){var n,i,r=this.config;null==r?i=null:i=!!r.__properties__&&(n=r.__properties__.get_noPreAd)?r[n]():r.noPreAd;if(!!(1==i&&"PREROLL"==t.getTimePositionClass())||"POSTROLL"==t.getTimePositionClass())this.slotCompleteHandler(M.SLOT_COMPLETE);else{this.get_currentState()!=pe.MEDIA_STATE&&this.get_currentState()!=pe.LIVE_STATE&&this.get_currentState()!=pe.DVR_STATE||(this.set_currentState(pe.WAITING_STATE),this.analyticsManager.sendPause(!0)),this.clearMediaEngine(),this.initWaitingSkinNoPlayLarge(),this.set_currentState(pe.AD_STATE);var a={};a.slot=t,a.autoplay=!0;var s,o,l=this.config;if(null==l)o=null;else o=!!l.__properties__&&(s=l.__properties__.get_mute)?l[s]():l.mute;a.mute="1"==o,null!=this.aFWEngine&&(this.aFWEngine.destroy(),this.aFWEngine=null),this.aFWEngine=new A(null,a);var u,c,d=this.config;if(null==d)c=null;else c=!!d.__properties__&&(u=d.__properties__.get_debug)?d[u]():d.debug;"1"==c&&be.trace(">>"+fe.string(this.aFWEngine.currentType)+"<<",{fileName:"PlayerCompute.hx",lineNumber:831,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"linearAdHandler"}),this.analyticsManager.setModeAd(),null!=t.getCurrentAdInstance()&&null!=this.youbora&&this.youbora.setAdTitle("adID:"+fe.string(t.getCurrentAdInstance().getAdId()))}},adStartHandler:function(e,t){if("DISPLAY"!=t){"live"==this.currentCatalog.get_media().type&&"MIDROLL"==t?this.initLiveAdSkin():this.initAdSkin();var n,i,r=this.config;if(null==r)i=null;else i=!!r.__properties__&&(n=r.__properties__.get_mute)?r[n]():r.mute;"1"==i&&null!=this.currentSkin&&this.currentSkin.setMute(),this.adCompleteFlag=!1,this.htmlHelper.hideSpinner(),this.adInsertInProgress&&this.htmlHelper.hideAdsNotice();var a,s,o=x.getInstance(this.htmlHelper.getContainer().id).getCurrentAdCount(),l=this.config;if(null==l)s=null;else s=!!l.__properties__&&(a=l.__properties__.get_debug)?l[a]():l.debug;"1"==s&&be.trace("START : "+t+" -> #"+o,{fileName:"PlayerCompute.hx",lineNumber:903,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"adStartHandler"}),this.analyticsManager.setRollType(t),this.analyticsManager.setAdCount(o),this.analyticsManager.sendPlay(),null!=this.youbora&&this.youbora.sendAdPlay()}},adCompleteHandler:function(e,t){if(!this.adCompleteFlag){this.adCompleteFlag=!0;var n,i,r=x.getInstance(this.htmlHelper.getContainer().id).getCurrentAdCount(),a=this.config;if(null==a)i=null;else i=!!a.__properties__&&(n=a.__properties__.get_debug)?a[n]():a.debug;"1"==i&&be.trace("END : "+t+" -> #"+r,{fileName:"PlayerCompute.hx",lineNumber:924,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"adCompleteHandler"}),this.analyticsManager.sendStop(),t==L.PREROLL[0]&&Ee.dispatchEvent(ve.onAdPrerollStop,he.field(this.config,"container")),t==L.MIDROLL[0]&&Ee.dispatchEvent(ve.onAdMidrollStop,he.field(this.config,"container")),Ee.dispatchEvent(ve.clearCompanion,he.field(this.config,"container")),this.currentSkin.setSize(this.htmlHelper.getCurrentWidth(),this.htmlHelper.getCurrentHeight()),this.htmlHelper.cleanVideoElementStyle()}},slotStartHandler:function(e,t){Ee.dispatchEvent(ve.onSlotStart,he.field(this.config,"container")),this.set_currentState(pe.AD_STATE),this.aFWEngine.setPlay()},slotCompleteHandler:function(e,t){if(!this.adInsertJingleOutInProgress){if(this.get_currentState()==pe.AD_STATE){var n,i,r=this.config;if(null==r)i=null;else i=!!r.__properties__&&(n=r.__properties__.get_noAd_test)?r[n]():r.noAd_test;if("1"!=i&&Ee.dispatchEvent(ve.onSlotStop,he.field(this.config,"container")),Ee.dispatchEvent(ve.clearCompanion,he.field(this.config,"container")),"live"==this.currentCatalog.get_media().type&&null!=t&&"PREROLL"==t){var a,s=this.config;!!s.__properties__&&(a=s.__properties__.set_noPreAd)?s[a]("1"):s.noPreAd="1"}}if(this.adInsertInProgress)this.adInsertBeginExitPad();else if(this.get_currentState()!=pe.LIVE_STATE&&this.get_currentState()!=pe.MEDIA_STATE&&this.get_currentState()!=pe.DVR_STATE){var o,l,u=this.config;if(null==u)l=null;else l=!!u.__properties__&&(o=u.__properties__.get_mediaID)?u[o]():u.mediaID;var c,d,h=this.currentProgress,f=this.config;if(null==f)d=null;else d=!!f.__properties__&&(c=f.__properties__.get_token)?f[c]():f.token;this.computeDelivery(l,h,d)}}},adErrorHandler:function(e,t){"ERROR_3P_COMPONENT"!=t.message&&this.analyticsManager.errorAdHandler(t.message,t.code)},adClickedHandler:function(e,t){this.adInsertInProgress||this.setPause()},adAutoplayFailed:function(){this.initWaitingSkin()},initMediaEngine:function(e,t){null!=e?this.currentEngineAtom=e:e=this.currentEngineAtom,this.clearMediaEngine(),this.analyticsManager.onEngineTypeSwitch(e.engineType,null,e.url),y.getInstance(this.currentVideoElement,e,!0,t),y.getInstance(this.currentVideoElement).addEventListener(v.STOP,Ve(this,this.engineStopHandler)),y.getInstance(this.currentVideoElement).addEventListener(v.SEEKED,Ve(this,this.engineSeekedHandler)),y.getInstance(this.currentVideoElement).addEventListener(v.SEEKING,Ve(this,this.engineSeekingHandler)),y.getInstance(this.currentVideoElement).addEventListener(v.PROGRESS,Ve(this,this.engineProgressHandler)),y.getInstance(this.currentVideoElement).addEventListener(v.BITRATE_CHANGE,Ve(this,this.engineBitrateChangeHandler)),y.getInstance(this.currentVideoElement).addEventListener(v.AD_INSERT,Ve(this,this.engineAdInsertHandler)),y.getInstance(this.currentVideoElement).addEventListener(v.AD_INSERT_EXIT,Ve(this,this.engineAdInsertExitHandler)),y.getInstance(this.currentVideoElement).addEventListener(v.ENGINE_FAILED,Ve(this,this.engineFailedHandler)),y.getInstance(this.currentVideoElement).addEventListener(v.STREAM_LOST,Ve(this,this.streamLostHandler)),y.getInstance(this.currentVideoElement).addEventListener(v.AUTOPLAY_FAILED,Ve(this,this.engineAutoplayFailed)),this.analyticsManager.setModeMedia(),y.getInstance(this.currentVideoElement).init();var n,i,r=this.config;null==r?i=null:i=!!r.__properties__&&(n=r.__properties__.get_debug)?r[n]():r.debug;if("1"==i&&be.trace(">>"+fe.string(y.getInstance(this.currentVideoElement).currentType)+"<<",{fileName:"PlayerCompute.hx",lineNumber:1032,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"initMediaEngine"}),this.analyticsManager.setMediaDiffusionType(e.engineType),t==m.VIDEOJS){var a=this.htmlHelper.getContainer().getElementsByTagName("video")[0].parentElement;x.getInstance(this.htmlHelper.getContainer().id).updateDisplayBase(a),this.htmlHelper.hideSpinner(),this.currentSkin.attachToElement(this.htmlHelper.getContainer().getElementsByClassName("vjs-tech")[0])}this.currentSkin.setPlay()},engineFailedHandler:function(e,t){if(null!=this.currentEngineAtom&&this.currentEngineAtom.engineType==m.NATIF){var n,i,r=this.currentEngineAtom.engineType[0]+" engine failed : media not supported in this browser",a=this.config;if(null==a)i=null;else i=!!a.__properties__&&(n=a.__properties__.get_debug)?a[n]():a.debug;return"1"==i&&be.trace(r,{fileName:"PlayerCompute.hx",lineNumber:1063,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"engineFailedHandler"}),this.youbora.fatalErrorHandler(e,r),void this.showEngineFailScreen()}var s,o,l=this.config;null==l?o=null:o=!!l.__properties__&&(s=l.__properties__.get_debug)?l[s]():l.debug;"1"==o&&be.trace(this.currentEngineAtom.engineType[0]+" engine failed : attempting fallback to native engine",{fileName:"PlayerCompute.hx",lineNumber:1073,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"engineFailedHandler"}),this.currentEngineAtom.autoplay=!0,this.currentEngineAtom.engineType=m.NATIF,this.initMediaEngine(null,null)},engineAutoplayFailed:function(e,t){this.initWaitingSkin()},showEngineFailScreen:function(){var e=this;this.clearMediaEngine(),this.htmlHelper.hideSpinner(),this.currentSkin.setSource(null),this.initErrorSkin(),Ie.delay(function(){e.htmlHelper.showErrorNotice(_e.getInstance().getText(C.CONTENU_INDISPONIBLE))},100),this.analyticsManager.errorHandler(_e.getInstance().getText(C.CONTENU_INDISPONIBLE),"1040"),this.analyticsManager.sendStop()},clearMediaEngine:function(){null!=y.getInstance(this.currentVideoElement)&&(y.getInstance(this.currentVideoElement).removeEventListener(v.STOP,Ve(this,this.engineStopHandler)),y.getInstance(this.currentVideoElement).removeEventListener(v.SEEKED,Ve(this,this.engineSeekedHandler)),y.getInstance(this.currentVideoElement).removeEventListener(v.SEEKING,Ve(this,this.engineSeekingHandler)),y.getInstance(this.currentVideoElement).removeEventListener(v.PROGRESS,Ve(this,this.engineProgressHandler)),y.getInstance(this.currentVideoElement).removeEventListener(v.BITRATE_CHANGE,Ve(this,this.engineBitrateChangeHandler)),y.getInstance(this.currentVideoElement).removeEventListener(v.AD_INSERT,Ve(this,this.engineAdInsertHandler)),y.getInstance(this.currentVideoElement).removeEventListener(v.AD_INSERT_EXIT,Ve(this,this.engineAdInsertExitHandler)),y.getInstance(this.currentVideoElement).removeEventListener(v.ENGINE_FAILED,Ve(this,this.engineFailedHandler)),y.getInstance(this.currentVideoElement).removeEventListener(v.STREAM_LOST,Ve(this,this.streamLostHandler)),y.getInstance(this.currentVideoElement).removeEventListener(v.STOP,Ve(this,this.adInsertJingleEnded)),y.getInstance(this.currentVideoElement).removeEventListener(v.AUTOPLAY_FAILED,Ve(this,this.engineAutoplayFailed)),y.getInstance(this.currentVideoElement).reset(),y.clearInstance(this.currentVideoElement))},enginePlayHandler:function(e,t){var n,i,r=this.config;null==r?i=null:i=!!r.__properties__&&(n=r.__properties__.get_autoStart)?r[n]():r.autoStart;"1"!=i?this.firstPlay(this.currentCatalog):this.get_currentState()!=pe.WAITING_STATE&&(this.analyticsManager.sendPlay(),null!=this.youbora&&this.get_currentState()==pe.AD_STATE&&this.youbora.sendAdPlay()),this.get_currentState()==pe.DVR_STATE&&this.dvrResume()},enginePauseHandler:function(e,t){this.get_currentState()==pe.DVR_STATE&&this.dvrPause(),null!=this.youbora&&this.get_currentState()==pe.AD_STATE&&this.youbora.sendAdPause(),this.analyticsManager.sendPause()},engineSeekedHandler:function(e,t){"live"!=this.currentCatalog.get_media().type&&this.analyticsManager.sendSeeked(t)},engineSeekingHandler:function(e,t){"live"!=this.currentCatalog.get_media().type&&this.get_currentState()!=pe.AD_STATE&&(this.analyticsManager.sendSeeking(t),this.htmlHelper.showSpinner())},streamLostHandler:function(e,t){if(this.get_currentState()!=pe.DVR_STATE||!this.dvrPaused){this.streamLostRetryAttempt++;var n,i,r=this.config;if(null==r)i=null;else i=!!r.__properties__&&(n=r.__properties__.get_debug)?r[n]():r.debug;if("1"==i&&be.trace("stream lost : "+this.streamLostRetryAttempt+"/3",{fileName:"PlayerCompute.hx",lineNumber:1178,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"streamLostHandler"}),3<=this.streamLostRetryAttempt||1==t){var a,s,o=this.config;if(null==o)s=null;else s=!!o.__properties__&&(a=o.__properties__.get_debug)?o[a]():o.debug;return"1"==s&&be.trace("...max retries reached. Sorry, giving up.",{fileName:"PlayerCompute.hx",lineNumber:1184,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"streamLostHandler"}),this.youbora.fatalErrorHandler(e,"STREAM LOST AND MAX RETRIES REACHED"),void this.showEngineFailScreen()}this.youbora.errorHandler(e,"STREAM LOST : RETRYING");var l,u,c=this.config;if(null==c)u=null;else u=!!c.__properties__&&(l=c.__properties__.get_mediaID)?c[l]():c.mediaID;var d,h,f=this.currentProgress,p=this.config;if(null==p)h=null;else h=!!p.__properties__&&(d=p.__properties__.get_token)?p[d]():p.token;this.computeDelivery(u,f,h)}},engineProgressHandler:function(e,t){y.getInstance(this.currentVideoElement).engineAtom.engineType!=m.NATIF&&this.adInsertInProgress?this.clearAdInsertTimer():this.htmlHelper.hideAdsNotice(),0!=t&&(this.streamLostRetryAttempt=0),this.currentProgress=t,this.htmlHelper.hideSpinner(),this.htmlHelper.hideErrorNotice(),0!=t&&x.getInstance(this.htmlHelper.getContainer().id).setProgress(t),x.getInstance(this.htmlHelper.getContainer().id).setProgress(t),this.get_currentState()!=pe.MEDIA_STATE&&this.get_currentState()!=pe.LIVE_STATE||(this.analyticsManager.setProgress(t),null!=this.youbora&&this.youbora.setMediaProgress(t)),this.get_currentState()==pe.DVR_STATE&&this.setDVRProgress(null)},engineBitrateChangeHandler:function(e,t){this.analyticsManager.setBitrate(t)},engineStopHandler:function(e,t){if(this.get_currentState()!=pe.WAITING_STATE){this.analyticsManager.sendStop(),Ee.dispatchEvent(ve.onMediaStop,he.field(this.config,"container")),null!=this.youbora&&this.youbora.setMediaProgress(0),this.clearMediaEngine();var n,i=this.config;!!i.__properties__&&(n=i.__properties__.set_autoStart)?i[n](1):i.autoStart=1;var r,a,s=this.config;if(null==s)a=null;else a=!!s.__properties__&&(r=s.__properties__.get_context)?s[r]():s.context;if(-1!=fe.string(a).toLowerCase().indexOf("oneinfo")){var o,l=this.config;!!l.__properties__&&(o=l.__properties__.set_noPreAd)?l[o]("1"):l.noPreAd="1"}this.set_currentState(pe.WAITING_STATE),this.currentProgress=0,x.getInstance(this.htmlHelper.getContainer().id).removeEventListener(M.REQUEST_AD_COMPLETE,Ve(this,this.requestAdCompleteHandler)),x.getInstance(this.htmlHelper.getContainer().id).removeEventListener(M.LINEAR_AD,Ve(this,this.linearAdHandler)),x.getInstance(this.htmlHelper.getContainer().id).removeEventListener(M.SLOT_START,Ve(this,this.slotStartHandler)),x.getInstance(this.htmlHelper.getContainer().id).removeEventListener(M.SLOT_COMPLETE,Ve(this,this.slotCompleteHandler)),x.getInstance(this.htmlHelper.getContainer().id).removeEventListener(M.AD_START,Ve(this,this.adStartHandler)),x.getInstance(this.htmlHelper.getContainer().id).removeEventListener(M.AD_COMPLETE,Ve(this,this.adCompleteHandler)),x.getInstance(this.htmlHelper.getContainer().id).removeEventListener(M.AD_ERROR,Ve(this,this.adErrorHandler)),x.getInstance(this.htmlHelper.getContainer().id).removeEventListener(M.AD_CLICKED,Ve(this,this.adClickedHandler)),x.getInstance(this.htmlHelper.getContainer().id).removeEventListener(M.AUTOPLAY_FAILED,Ve(this,this.adAutoplayFailed)),x.clearInstance(this.htmlHelper.getContainer().id),this.initRestartSkin(),this.currentSkin.addEventListener(ae.play,Ve(this,this.engineRestartHandler)),this.currentSkin.addEventListener(ae.restart,Ve(this,this.engineRestartHandler))}},engineRestartHandler:function(e,t){this.currentSkin.removeEventListener(ae.play,Ve(this,this.engineRestartHandler)),this.currentSkin.removeEventListener(ae.restart,Ve(this,this.engineRestartHandler)),this.get_currentState()==pe.WAITING_STATE&&this.firstPlay(this.currentCatalog)},initErrorSkin:function(){null==this.currentSkin&&this.initSkin(),null!=this.currentLiveAPI&&(this.currentLiveAPI.destroy(),this.stopDVR()),this.currentSkin.toggleDVR(!1),this.currentSkin.setClickToPlay(!1),this.currentSkin.setControls(se.ERROR),this.htmlHelper.setAdMode(!1),this.htmlHelper.setControlBackground(!1)},initWaitingSkinNoPlayLarge:function(){this.currentSkin.toggleDVR(!1),this.currentSkin.setClickToPlay(!0),this.currentSkin.setAutohideControls(!1),this.currentSkin.setControls(se.BLANK),this.currentSkin.toggleControls(!1),this.currentSkin.setSeekEnabled(!1),this.currentSkin.setPoster("data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7"),this.htmlHelper.setAdMode(!1),this.htmlHelper.setControlBackground(!1)},initWaitingSkin:function(){var e=se.WAITING_VOD;"live"==this.currentCatalog.get_media().type&&(e=se.WAITING_LIVE),this.htmlHelper.hideSpinner(),this.currentSkin.toggleDVR(!1),this.currentSkin.setClickToPlay(!0),this.currentSkin.setAutohideControls(!1),this.currentSkin.setControls(e),this.currentSkin.toggleControls(!0),this.currentSkin.setSeekEnabled(!1),this.htmlHelper.setAdMode(!1);var t="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7";null!=this.currentCatalog.get_media()&&null!=this.currentCatalog.get_media().preview&&(t=this.currentCatalog.get_media().preview),this.currentSkin.setPoster(t)},initRestartSkin:function(){this.currentSkin.toggleDVR(!1),this.currentSkin.setClickToPlay(!0),this.currentSkin.setAutohideControls(!1),this.currentSkin.setControls(se.RESTART),this.currentSkin.setSeekEnabled(!1),this.htmlHelper.setAdMode(!1);var e="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7";null!=this.currentCatalog.get_media()&&null!=this.currentCatalog.get_media().preview&&(e=this.currentCatalog.get_media().preview),this.currentSkin.setPoster(e)},initAdSkin:function(){this.currentSkin.toggleDVR(!1),this.currentSkin.setAutohideControls(!1),this.currentSkin.setControls(se.ADS),this.currentSkin.toggleControls(!0),this.currentSkin.setSeekEnabled(!1),this.htmlHelper.setAdMode(!0)},initLiveAdSkin:function(){this.currentSkin.toggleDVR(!1),this.currentSkin.setClickToPlay(!1),this.currentSkin.setAutohideControls(!1),this.currentSkin.setControls(se.AD_INSERT),this.currentSkin.toggleControls(!0),this.currentSkin.setSeekEnabled(!1),this.htmlHelper.setControlBackground(!1)},initSkinVOD:function(){this.currentSkin.setClickToPlay(!0),this.currentSkin.setAutohideControls(!0),this.currentSkin.toggleDVR(!1),this.currentSkin.setControls(se.VOD),this.currentSkin.setSeekEnabled(!0),this.htmlHelper.setAdMode(!1),this.currentSkin.setDuration(this.currentCatalog.get_media().duration)},initSkinDVR:function(){var e,t,n=this.currentSkin,i=this.currentCatalog.get_media();null==i?t=null:t=!!i.__properties__&&(e=i.__properties__.get_channel)?i[e]():i.channel;n.setChannel(t),this.currentSkin.setClickToPlay(!0),this.currentSkin.setAutohideControls(!0),this.currentSkin.setControls(se.DVR),this.currentSkin.toggleDVR(!0),this.currentSkin.setSeekEnabled(!1),this.htmlHelper.setAdMode(!1)},initSkinLIVE:function(){this.currentSkin.toggleDVR(!1);var e,t,n=this.currentSkin,i=this.currentCatalog.get_media();null==i?t=null:t=!!i.__properties__&&(e=i.__properties__.get_channel)?i[e]():i.channel;n.setChannel(t),this.currentSkin.setClickToPlay(!1),this.currentSkin.setAutohideControls(!0),this.currentSkin.setControls(se.LIVE),this.currentSkin.toggleDVR(!1),this.currentSkin.setSeekEnabled(!1),this.htmlHelper.setAdMode(!1)},initSkin:function(){this.clearSkin();var e,t,n=0,i=this.currentCatalog.get_media();null==i?t=null:t=!!i.__properties__&&(e=i.__properties__.get_duration)?i[e]():i.duration;null!=t&&(n=Math.round(this.currentCatalog.get_media().duration));var r,a,s=this.currentVideoElement,o=this.config;null==o?a=null:a=!!o.__properties__&&(r=o.__properties__.get_svgPath)?o[r]():o.svgPath;var l,u,c=this.htmlHelper.getContainer().id,d=this.config;null==d?u=null:u=!!d.__properties__&&(l=d.__properties__.get_newSkin)?d[l]():d.newSkin;this.currentSkin=oe.get(s,a,n,c,"1"==u),this.currentSkin.setAutohideControls(!0);var h,f,p=this.currentSkin,_=this.currentCatalog.get_media();null==_?f=null:f=!!_.__properties__&&(h=_.__properties__.get_channel)?_[h]():_.channel;p.setChannel(f);var g="",m="";if(null!=this.currentCatalog.get_media()&&null!=this.currentCatalog.get_media().embed&&(null!=this.currentCatalog.get_media().embed.iframe&&(g='<iframe src="https://www.tf1.fr/embedplayer/'+this.currentCatalog.get_media().id+'" frameborder="0" style="width: WIDTHpx; height: HEIGHTpx;"></iframe>'),null!=this.currentCatalog.get_media().embed.permalink&&(m=this.currentCatalog.get_media().embed.permalink)),""==m){var v,E=this.config;if(null==E)m=null;else m=!!E.__properties__&&(v=E.__properties__.get_urlPage)?E[v]():E.urlPage}this.currentSkin.setShareURLs(g,m),this.currentSkin.addEventListener(ae.play,Ve(this,this.enginePlayHandler)),this.currentSkin.addEventListener(ae.pause,Ve(this,this.enginePauseHandler)),this.currentSkin.addEventListener(ae.resize,Ve(this,this.onSkinResize)),this.currentSkin.addEventListener(ae.userClickPlay,Ve(this,this.userClickPlayHandler)),this.currentSkin.addEventListener(ae.userClickPause,Ve(this,this.userClickPauseHandler)),this.currentSkin.addEventListener(ae.userVolumeChange,Ve(this,this.userClickVolumeChangeHandler)),this.currentSkin.addEventListener(ae.dvrSeek,Ve(this,this.onDVRSeek)),this.currentSkin.addEventListener(ae.dvrPOIClick,Ve(this,this.onDVRPOIClick)),this.currentSkin.addEventListener(ae.dvrSeekMinus,Ve(this,this.onDVRSeekMinus)),this.currentSkin.addEventListener(ae.dvrSeekPlus,Ve(this,this.onDVRSeekPlus)),this.currentSkin.addEventListener(ae.dvrSeekRetourDirect,Ve(this,this.onDVRSeekRetourDirect));var y="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7";null!=this.currentCatalog.get_media()&&null!=this.currentCatalog.get_media().preview&&(y=this.currentCatalog.get_media().preview),this.currentSkin.setPoster(y);var T,A,S=this.config;null==S?A=null:A=!!S.__properties__&&(T=S.__properties__.get_mute)?S[T]():S.mute;"1"==A&&this.currentSkin.setMute();var R,b,I=this.config;null==I?b=null:b=!!I.__properties__&&(R=I.__properties__.get_newSkin)?I[R]():I.newSkin;"1"==b&&this.htmlHelper.setNewSkin(!0);var C,P=this.config,w=this.htmlHelper.getUpdatedVideoContainerID();!!P.__properties__&&(C=P.__properties__.set_fwTarget)?P[C](w):P.fwTarget=w},clearSkin:function(){null!=this.currentSkin&&(this.currentSkin.removeEventListener(ae.play,Ve(this,this.enginePlayHandler)),this.currentSkin.removeEventListener(ae.pause,Ve(this,this.enginePauseHandler)),this.currentSkin.removeEventListener(ae.resize,Ve(this,this.onSkinResize)),this.currentSkin.removeEventListener(ae.userClickPlay,Ve(this,this.userClickPlayHandler)),this.currentSkin.removeEventListener(ae.userClickPause,Ve(this,this.userClickPauseHandler)),this.currentSkin.removeEventListener(ae.userVolumeChange,Ve(this,this.userClickVolumeChangeHandler)),this.currentSkin.removeEventListener(ae.dvrSeek,Ve(this,this.onDVRSeek)),this.currentSkin.removeEventListener(ae.dvrPOIClick,Ve(this,this.onDVRPOIClick)),this.currentSkin.removeEventListener(ae.dvrSeekMinus,Ve(this,this.onDVRSeekMinus)),this.currentSkin.removeEventListener(ae.dvrSeekPlus,Ve(this,this.onDVRSeekPlus)),this.currentSkin.removeEventListener(ae.dvrSeekRetourDirect,Ve(this,this.onDVRSeekRetourDirect)),this.currentSkin.removeEventListener(ae.ended,Ve(this,this.adInsertJingleEnded)),this.currentSkin.destroy(),this.currentSkin=null)},userClickVolumeChangeHandler:function(e,t){var n,i=this.config,r=t?"1":"0";!!i.__properties__&&(n=i.__properties__.set_mute)?i[n](r):i.mute=r},onSkinResize:function(e,t){x.getInstance(this.htmlHelper.getContainer().id).setSize(this.currentVideoElement.offsetWidth,this.currentVideoElement.offsetHeight),t?Ee.dispatchEvent(ve.onEnterFullscreen,he.field(this.config,"container")):Ee.dispatchEvent(ve.onExitFullscreen,he.field(this.config,"container"))},userClickPlayHandler:function(){Ee.dispatchEvent(ve.onUserPlay,he.field(this.config,"container"))},userClickPauseHandler:function(){Ee.dispatchEvent(ve.onUserPause,he.field(this.config,"container")),this.aFWEngine.setPause()},setPlay:function(){this.get_currentState()!=pe.WAITING_STATE?this.get_currentState()!=pe.LIVE_STATE&&this.get_currentState()!=pe.MEDIA_STATE&&this.get_currentState()!=pe.DVR_STATE||null==this.currentVideoElement?this.get_currentState()!=pe.AD_STATE||null==this.currentSkin||this.adInsertInProgress||(this.aFWEngine.setPlay(),this.currentSkin.setPlay()):y.getInstance(this.currentVideoElement).setPlay():Te.isSafari()||Te.isIOS()||this.firstPlay(this.currentCatalog)},setPause:function(){this.get_currentState()==pe.MEDIA_STATE&&null!=this.currentVideoElement?y.getInstance(this.currentVideoElement).setPause():this.get_currentState()!=pe.AD_STATE||null==this.currentSkin||this.adInsertInProgress||(this.aFWEngine.setPause(),this.currentSkin.setPause()),this.get_currentState()==pe.DVR_STATE&&y.getInstance(this.currentVideoElement).setPause()},setSeek:function(e){this.get_currentState()==pe.MEDIA_STATE&&null!=this.currentVideoElement&&y.getInstance(this.currentVideoElement).setSeek(e),this.get_currentState()==pe.DVR_STATE&&y.getInstance(this.currentVideoElement).setSeek(e)},setVolume:function(e){null!=this.currentSkin&&this.currentSkin.setVolume(e)},setMute:function(){if(null!=this.currentSkin&&this.currentSkin.setMute(),Te.isIOS())this.get_currentState()==pe.AD_STATE&&null!=this.aFWEngine?this.aFWEngine.setMute(!0):null!=this.currentVideoElement&&y.getInstance(this.currentVideoElement).setMute(!0);else{var e,t=this.config;!!t.__properties__&&(e=t.__properties__.set_mute)?t[e]("1"):t.mute="1"}},setUnMute:function(){if(null==this.currentSkin||this.adInsertInProgress||this.currentSkin.setUnMute(),Te.isIOS())this.get_currentState()==pe.AD_STATE&&null!=this.aFWEngine?this.aFWEngine.setMute(!1):null!=this.currentVideoElement&&y.getInstance(this.currentVideoElement).setMute(!1);else{var e,t=this.config;!!t.__properties__&&(e=t.__properties__.set_mute)?t[e]("0"):t.mute="0"}},setMedia:function(){var e,t,n=this.config;null==n?t=null:t=!!n.__properties__&&(e=n.__properties__.get_debug)?n[e]():n.debug;"1"==t&&be.trace("not implemented",{fileName:"PlayerCompute.hx",lineNumber:1658,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"setMedia"})},getMediaProgrammeInfo:function(){return this.currentCatalog.get_content()},setMediaID:function(e){var t,n=this.config;!!n.__properties__&&(t=n.__properties__.set_mediaID)?n[t](e):n.mediaID=e,this.reinitialize()},setConfig:function(e){var t,n,i=["container","svgPath","cssPath","fwTarget","os","device","paramsTags","context","environment","debug","noAd_test"],r=this.config;null==r?n=null:n=!!r.__properties__&&(t=r.__properties__.get_debug)?r[t]():r.debug;for(var a="1"==n,s=0,o=he.fields(this.config);s<o.length;){var l=o[s];++s,-1==i.indexOf(l)?(a&&be.trace("-"+l,{fileName:"PlayerCompute.hx",lineNumber:1689,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"setConfig"}),he.deleteField(this.config,l)):a&&be.trace("keep: "+l,{fileName:"PlayerCompute.hx",lineNumber:1683,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"setConfig"})}for(var u=0,c=he.fields(e);u<c.length;){var d=c[u];++u,a&&be.trace("+"+d,{fileName:"PlayerCompute.hx",lineNumber:1697,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"setConfig"});var h,f,p=this.config;if(null==e)f=null;else f=!!e.__properties__&&(h=e.__properties__["get_"+d])?e[h]():e[d];var _,g=f;!!p.__properties__&&(_=p.__properties__["set_"+d])?p[_](g):p[d]=g}this.reinitialize()},reinitialize:function(){this.engineStopHandler(v.STOP),he.deleteField(this.config,"noPreAd");var e,t,n=this.config;null==n?t=null:t=!!n.__properties__&&(e=n.__properties__.get_t)?n[e]():n.t;if(null!=t){var i,r,a=this.config;if(null==a)r=null;else r=!!a.__properties__&&(i=a.__properties__.get_t)?a[i]():a.t;this.currentProgress=ye.tcInToSeconds(r)}null!=this.analyticsManager&&(this.analyticsManager=null),this.initWaitingSkin();var s,o,l=this.config;null==l?o=null:o=!!l.__properties__&&(s=l.__properties__.get_mediaID)?l[s]():l.mediaID;this.computeCatalog(o)},setFocusIn:function(){var e;if(this.get_currentState()!=pe.AD_STATE||this.adInsertInProgress)e=!1;else{var t,n,i=this.config;if(null==i)n=null;else n=!!i.__properties__&&(t=i.__properties__.get_disableFocusEvents)?i[t]():i.disableFocusEvents;e="1"!=n}e&&this.setPlay()},setFocusOut:function(){var e;if(this.get_currentState()!=pe.AD_STATE||this.adInsertInProgress)e=!1;else{var t,n,i=this.config;if(null==i)n=null;else n=!!i.__properties__&&(t=i.__properties__.get_disableFocusEvents)?i[t]():i.disableFocusEvents;e="1"!=n}e&&this.setPause()},getProgress:function(){return null==y.getInstance(this.currentVideoElement)?-1:y.getInstance(this.currentVideoElement).progress},getProgressUTC:function(){return null==y.getInstance(this.currentVideoElement)?-1:y.getInstance(this.currentVideoElement).progressUTC},getId:function(){return null==this.currentCatalog?null:this.currentCatalog.get_media().id},getTitle:function(){return null==this.currentCatalog?null:this.currentCatalog.get_media().title},getProgramme:function(){return this.getTitle()},getNormalizeTitle:function(){return null==this.currentCatalog?null:null!=this.currentCatalog.get_media().title?this.currentCatalog.get_media().title:null!=this.currentCatalog.get_yb()?this.currentCatalog.get_yb().media.title:null},getVolume:function(){return null==y.getInstance(this.currentVideoElement)?-1:this.currentSkin.isMuted()?-1:this.currentSkin.getVolume()},getState:function(){return fe.string(this.get_currentState())+""},getContainer:function(){return he.field(this.config,"container")},getAd:function(){return x.getInstance(this.htmlHelper.getContainer().id).getAdInfo()},getDuration:function(){try{return this.currentCatalog.get_media().duration}catch(e){return-1}},dispatchEvent:function(e,t,n){if((this.lastEvent!=e||e==ve.saveDMP)&&!((this.lastEvent=e)==ve.onAdStop&&this.lastEvent==ve.onSlotStop||e==ve.onAdPause&&this.lastEvent!=ve.onAdPlay))for(var i=0,r=this.listenerObjectArray;i<r.length;){var a=r[i];++i,fe.string(a.event)==e[0]&&(a.funct(e[0],this,t),a.autoKill&&this.removeEventListener(a.event,a.funct))}},getDurationUTC:function(){return y.getInstance(this.currentVideoElement).durationAsUTC()},startDVR:function(){var e,t=this.config;!!t.__properties__&&(e=t.__properties__.set_liveEnrichi)?t[e]("1"):t.liveEnrichi="1",this.initSkinDVR(),this.set_currentState(pe.DVR_STATE),this.analyticsManager.setLiveEnrichiEnabled(!0)},stopDVR:function(){he.deleteField(this.config,"liveEnrichi"),this.analyticsManager.setLiveEnrichiEnabled(!1),this.currentSkin.clearPOIs(),this.dvrTimeshiftOffset=null,this.killDVRPauseTimer(),this.set_currentState(pe.LIVE_STATE),this.initSkinLIVE()},dvrPause:function(){this.dvrPaused=!0,null==this.dvrPauseTimer&&(this.dvrTimeshiftOffset=this.htmlHelper.videoElement.currentTime,this.dvrPauseStartTime=this.getDurationUTC(),this.dvrPauseTimer=new Ie(this.dvrPauseTimerDelayMs),this.dvrPauseTimer.run=Ve(this,this.dvrUpdateWhilePaused))},killDVRPauseTimer:function(){null!=this.dvrPauseTimer&&(this.dvrPauseTimer.stop(),this.dvrPauseTimer=null,this.dvrPauseStartTime=null),this.dvrPaused=!1},dvrUpdateWhilePaused:function(){this.dvrPauseStartTime+=this.dvrPauseTimerDelayMs/1e3,this.setDVRProgress(this.dvrPauseStartTime)},dvrResume:function(){this.killDVRPauseTimer()},setDVRProgress:function(e){var t=this.currentLiveAPI.startTimeStamp,n=this.currentLiveAPI.endTimeStamp-t,i=this.getDurationUTC()-t;null!=e&&(i=e-t);var r=this.getProgressUTC()-t;this.analyticsManager.setLiveEnrichiPlayheadOffset(Math.round(i),Math.round(r)),null!=this.dvrTimeshiftOffset?(this.dvrTimeshiftOffset=this.htmlHelper.videoElement.currentTime,this.currentSkin.setTimeswitchedOffset("-"+ye.secondsToLiveOffset(Math.round(i-r))),this.dvrCurrentlyOffset=!0):1==this.dvrCurrentlyOffset&&1!=this.dvrCurrentOffsetResetTimerActive&&(this.dvrCurrentOffsetResetTimerActive=!0,Ie.delay(Ve(this,this.resetDVRCurrentlyOffset),3e3)),this.currentSkin.setLiveProgressPercent(i/n*100),this.currentSkin.setTimeswitchedProgressPercent(r/n*100)},resetDVRCurrentlyOffset:function(){this.dvrCurrentlyOffset=!1,this.dvrCurrentOffsetResetTimerActive=!1},onDVRSeekMinus:function(e,t){Te.isIPad()?this.setSeek(this.getProgress()-10):this.htmlHelper.videoElement.currentTime-=10,this.dvrTimeshiftOffset=this.htmlHelper.videoElement.currentTime,0==this.dvrPaused&&this.htmlHelper.showSpinner(),this.analyticsManager.registerLiveEnrichiClickEvent("timelineLess")},onDVRSeekPlus:function(e,t){be.trace("Seek plus : getDurationUTC: "+this.getDurationUTC(),{fileName:"PlayerCompute.hx",lineNumber:1992,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"onDVRSeekPlus"}),be.trace("Seek plus : getProgressUTC: "+this.getProgressUTC(),{fileName:"PlayerCompute.hx",lineNumber:1993,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"onDVRSeekPlus"}),be.trace("delta : "+(this.getDurationUTC()-this.getProgressUTC()),{fileName:"PlayerCompute.hx",lineNumber:1994,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"onDVRSeekPlus"}),this.getDurationUTC()-this.getProgressUTC()<11||(Te.isIPad()?this.setSeek(this.getProgress()+10):this.htmlHelper.videoElement.currentTime+=10,this.dvrTimeshiftOffset=this.htmlHelper.videoElement.currentTime,0==this.dvrPaused&&this.htmlHelper.showSpinner(),this.analyticsManager.registerLiveEnrichiClickEvent("timelineMore"))},onDVRSeekRetourDirect:function(e,t){var n=this.currentLiveAPI.startTimeStamp,i=this.currentLiveAPI.endTimeStamp-n;this.onDVRSeek(ae.dvrSeek,(this.getDurationUTC()-n-22)/i*100),this.dvrTimeshiftOffset=null,this.currentSkin.setTimeswitchedOffset(""),0==this.dvrPaused?this.htmlHelper.showSpinner():(this.dvrResume(),this.currentSkin.setPlay()),this.analyticsManager.registerLiveEnrichiClickEvent("retourDirect")},onDVRSeek:function(e,t,n){var i=this.currentLiveAPI.startTimeStamp,r=(this.currentLiveAPI.endTimeStamp-i)/100*t,a=i-this.getManifestAvailabilityStartTime()+r;r>this.getDurationUTC()-i?this.onDVRSeekRetourDirect(ae.dvrSeekRetourDirect):(this.dvrTimeshiftOffset=a,this.setSeek(a),0==this.dvrPaused&&this.htmlHelper.showSpinner(),n||this.analyticsManager.registerLiveEnrichiClickEvent("timeline"))},onDVRPOIClick:function(e,t,n){this.analyticsManager.registerLiveEnrichiClickEvent(t),this.onDVRSeek(ae.dvrSeek,n,!0)},onLiveAPIUpdated:function(e,t){this.adInsertInProgress||this.get_currentState()!=pe.WAITING_STATE&&this.get_currentState()!=pe.AD_STATE&&(0!=this.currentLiveAPI.enabled||this.get_currentState()!=pe.DVR_STATE?(1==this.currentLiveAPI.enabled&&this.get_currentState()!=pe.DVR_STATE&&this.startDVR(),this.updateLiveAPIPOI(t.pois)):this.stopDVR())},updateLiveAPIPOI:function(e){if(this.currentLiveAPI.enabled&&(this.currentSkin.clearPOIs(),0!=e.length)){for(var t=this.currentLiveAPI.startTimeStamp,n=this.currentLiveAPI.endTimeStamp-t,i=0;i<e.length;){var r=e[i];++i,r.percentPosition=(ye.iso8601ToTimestamp(r.tcin)-t)/n*100}e.sort(Ve(this,this.sortPOI));for(var a=0,s=!0,o=0;o<e.length;){var l=e[o];++o;var u=ye.iso8601ToTimestamp(l.tcin);u<0||(s=!(0!=a&&u-a<=90)||!s,l.offsetUp=s,a=u,this.currentSkin.setPOI(l))}}},sortPOI:function(e,t){return Math.floor(e.percentPosition)==Math.floor(t.percentPosition)?0:Math.floor(e.percentPosition)>Math.floor(t.percentPosition)?1:-1},toggleLiveEnrichi:function(e){if(this.get_currentState()!=pe.WAITING_STATE)0!=e?this.get_currentState()!=pe.WAITING_STATE&&this.get_currentState()!=pe.AD_STATE&&this.startDVR():this.stopDVR();else{var t,n=this.config;"1"==(null==n?null:!!n.__properties__&&(t=n.__properties__.get_debug)?n[t]():n.debug)&&be.trace("config, liveEnrichi:enabled",{fileName:"PlayerCompute.hx",lineNumber:2204,className:"fr.tf1.etf1.core.PlayerCompute",methodName:"toggleLiveEnrichi"});var i,r=this.config;!!r.__properties__&&(i=r.__properties__.set_liveEnrichi)?r[i]("1"):r.liveEnrichi="1"}},getManifestAvailabilityStartTime:function(){return y.getInstance(this.currentVideoElement).get_manifestAvailabilityStartTime()},__class__:u});var c=e.TF1Player=function(e){window.console.log("%cTF1PLAYER : "+b.VERSION,"color: #bada55"),e=ye.parseArguments(e,window.location.search),e=ye.parseArguments(e,window.location.hash),u.call(this,e);var t,n,i=this.config;null==i?n=null:n=!!i.__properties__&&(t=i.__properties__.get_mediaID)?i[t]():i.mediaID;u.prototype.computeCatalog.call(this,n)};c.__name__=!0,c.main=function(){},c.__super__=u,c.prototype=n(u.prototype,{setPlay:function(){u.prototype.setPlay.call(this)},setPause:function(){u.prototype.setPause.call(this)},setSeek:function(e){u.prototype.setSeek.call(this,e)},setVolume:function(e){u.prototype.setVolume.call(this,e)},setMute:function(){u.prototype.setMute.call(this)},setUnMute:function(){u.prototype.setUnMute.call(this)},setMedia:function(){u.prototype.setMedia.call(this)},setConfig:function(e){u.prototype.setConfig.call(this,e)},setMediaID:function(e){u.prototype.setMediaID.call(this,e)},getMediaProgrammeInfo:function(){return u.prototype.getMediaProgrammeInfo.call(this)},setFocusIn:function(){u.prototype.setFocusIn.call(this)},setFocusOut:function(){u.prototype.setFocusOut.call(this)},__class__:c}),Math.__name__=!0;var he=function(){};he.__name__=!0,he.field=function(e,t){try{return e[t]}catch(e){return null}},he.fields=function(e){var t=[];if(null!=e){var n=Object.prototype.hasOwnProperty;for(var i in e)"__id__"!=i&&"hx__closures__"!=i&&n.call(e,i)&&t.push(i)}return t},he.compare=function(e,t){return e==t?0:t<e?1:-1},he.isEnumValue=function(e){return null!=e&&null!=e.__enum__},he.deleteField=function(e,t){return!!Object.prototype.hasOwnProperty.call(e,t)&&(delete e[t],!0)};var fe=function(){};fe.__name__=!0,fe.string=function(e){return Le.__string_rec(e,"")},fe.parseInt=function(e){var t=parseInt(e,10);return 0!=t||120!=l.cca(e,1)&&88!=l.cca(e,1)||(t=parseInt(e)),isNaN(t)?null:t};var d=function(){};d.__name__=!0,d.lpad=function(e,t,n){if(t.length<=0)return e;for(;e.length<n;)e=t+e;return e};var b=function(){};b.__name__=!0,b.prototype={__class__:b};var pe={__ename__:!0,__constructs__:["WAITING_STATE","STOP_STATE","MEDIA_STATE","AD_STATE","DVR_STATE","LIVE_STATE","BLOCKED_STATE"],WAITING_STATE:["WAITING_STATE",0]};(pe.WAITING_STATE.__enum__=pe).STOP_STATE=["STOP_STATE",1],(pe.STOP_STATE.__enum__=pe).MEDIA_STATE=["MEDIA_STATE",2],(pe.MEDIA_STATE.__enum__=pe).AD_STATE=["AD_STATE",3],(pe.AD_STATE.__enum__=pe).DVR_STATE=["DVR_STATE",4],(pe.DVR_STATE.__enum__=pe).LIVE_STATE=["LIVE_STATE",5],(pe.LIVE_STATE.__enum__=pe).BLOCKED_STATE=["BLOCKED_STATE",6],pe.BLOCKED_STATE.__enum__=pe;var m={__ename__:!0,__constructs__:["DASH","SHAKA","FREEWHEEL","NATIF","HLS","VIDEOJS","ENGINE_MANAGER"],DASH:["DASH",0]};(m.DASH.__enum__=m).SHAKA=["SHAKA",1],(m.SHAKA.__enum__=m).FREEWHEEL=["FREEWHEEL",2],(m.FREEWHEEL.__enum__=m).NATIF=["NATIF",3],(m.NATIF.__enum__=m).HLS=["HLS",4],(m.HLS.__enum__=m).VIDEOJS=["VIDEOJS",5],(m.VIDEOJS.__enum__=m).ENGINE_MANAGER=["ENGINE_MANAGER",6],m.ENGINE_MANAGER.__enum__=m;var h={__ename__:!0,__constructs__:["VOD","LIVE"],VOD:["VOD",0]};(h.VOD.__enum__=h).LIVE=["LIVE",1],h.LIVE.__enum__=h;var v={__ename__:!0,__constructs__:["PLAY","PAUSE","SEEKED","SEEKING","STOP","WAIT","PROGRESS","BITRATE_CHANGE","AD_INSERT","AD_INSERT_EXIT","ENGINE_FAILED","STREAM_LOST","AUTOPLAY_FAILED"],PLAY:["PLAY",0]};(v.PLAY.__enum__=v).PAUSE=["PAUSE",1],(v.PAUSE.__enum__=v).SEEKED=["SEEKED",2],(v.SEEKED.__enum__=v).SEEKING=["SEEKING",3],(v.SEEKING.__enum__=v).STOP=["STOP",4],(v.STOP.__enum__=v).WAIT=["WAIT",5],(v.WAIT.__enum__=v).PROGRESS=["PROGRESS",6],(v.PROGRESS.__enum__=v).BITRATE_CHANGE=["BITRATE_CHANGE",7],(v.BITRATE_CHANGE.__enum__=v).AD_INSERT=["AD_INSERT",8],(v.AD_INSERT.__enum__=v).AD_INSERT_EXIT=["AD_INSERT_EXIT",9],(v.AD_INSERT_EXIT.__enum__=v).ENGINE_FAILED=["ENGINE_FAILED",10],(v.ENGINE_FAILED.__enum__=v).STREAM_LOST=["STREAM_LOST",11],(v.STREAM_LOST.__enum__=v).AUTOPLAY_FAILED=["AUTOPLAY_FAILED",12],v.AUTOPLAY_FAILED.__enum__=v;var f=function(){},p={__ename__:f.__name__=!0,__constructs__:["ENGINE_TYPE_SWITCH"],ENGINE_TYPE_SWITCH:["ENGINE_TYPE_SWITCH",0]};p.ENGINE_TYPE_SWITCH.__enum__=p;var E=function(e,t){s.call(this),this.currentType=e,this.engineAtom=t};E.__name__=!0,E.__super__=s,E.prototype=n(s.prototype,{setMedia:function(e,t,n){null==n&&(n=0),null==t&&(t=!0)},formatDRM:function(e){return null==e?null:(null!=e.widevine&&0!=(e.widevine+"").indexOf("http")&&(e.widevine="https://drm-wide.tf1.fr/proxy?id="+e.widevine),null!=e.playready&&0!=(e.playready+"").indexOf("http")&&(e.playready="https://drm-play.tf1.fr/playready/rightsmanager.asmx?id="+e.playready),null!=e.fairplay&&0!=(e.fairplay+"").indexOf("http")&&(e.fairplay="https://drm-fair.tf1.fr/acquire?id="+e.fairplay),e)},setDRMData:function(e){},setPlay:function(){this.startCheckVideo()},setPause:function(){this.stopCheckVideo()},setStop:function(){this.stopCheckVideo()},setSeek:function(e){},getDVRWindowSize:function(){return-1},getDVRSeekOffset:function(e){return-1},duration:function(){return-1},durationAsUTC:function(){return-1},setVolume:function(e){},setMute:function(e){},skipAd:function(){},init:function(){},getStreamType:function(){if(null==this.engineAtom)return null;var e=this.engineAtom.streamType;return null==e?h.VOD:"live"==e?h.LIVE:h.VOD},reset:function(){},startCheckVideo:function(){null==this.videoRetryTimer&&(this.videoProgress=-1,this.videoRetryCount=5,this.videoRetryTimer=new Ie(1e3),this.videoRetryTimer.run=Ve(this,this.checkVideoWorking))},checkVideoWorking:function(){this.videoProgress!=this.progressUTC?(this.videoRetryCount=5,this.videoProgress=this.progressUTC):this.videoRetryCount<=0?(this.stopCheckVideo(),this.dispatchEvent(v.STREAM_LOST)):this.videoRetryCount--},stopCheckVideo:function(){null!=this.videoRetryTimer&&this.videoRetryTimer.stop(),this.videoRetryTimer=null},get_manifestAvailabilityStartTime:function(){return""},getLibInstance:function(){return null},__class__:E,__properties__:{get_manifestAvailabilityStartTime:"get_manifestAvailabilityStartTime"}});var y=function(){E.call(this,m.ENGINE_MANAGER,null)};y.__name__=!0,y.main=function(){},y.getCount=function(){return null==y.instances?0:g.count(y.instances)},y.clearInstance=function(e){if(null!=y.instances){var t;if(null!=e){var n=e.id,i=y.instances;t=null!=Xe[n]?i.existsReserved(n):i.h.hasOwnProperty(n)}else t=!1;t&&y.instances.remove(e.id)}},y.getInstance=function(e,t,n,i){if(null==n&&(n=!1),null==y.instances&&(y.instances=new Ne),null==e||null==e.id)return null;n&&y.instances.remove(e.id);var r=e.id,a=y.instances;if(null==(null!=Xe[r]?a.getReserved(r):a.h[r])){if(null==t)return null;var s=y.getNewEngineByAtom(e,t,i),o=e.id,l=y.instances;null!=Xe[o]?l.setReserved(o,s):l.h[o]=s,s.dispatchEvent(p.ENGINE_TYPE_SWITCH,{engineType:i})}var u=e.id,c=y.instances;return null!=Xe[u]?c.getReserved(u):c.h[u]},y.getNewEngineByAtom=function(e,t,n){if(null==t||null==e)return null;if(null!=t.slot)return new A(e,t);if(null!=t.url)switch(null==n&&(n=t.engineType),n[1]){case 0:case 1:return new T(e,t);case 2:return new A(e,t);case 3:case 4:return new S(e,t);case 5:return new R(e,t);case 6:return null}return null},y.__super__=E,y.prototype=n(E.prototype,{__class__:y});var T=function(e,t){E.call(this,m.DASH,t);var n,i,r=(this.targetDiv=e).parentElement;null==r?i=null:i=!!r.__properties__&&(n=r.__properties__.get_dashMediaPlayer)?r[n]():r.dashMediaPlayer;if(null!=i){var a,s,o=e.parentElement;if(null==o)s=null;else s=!!o.__properties__&&(a=o.__properties__.get_dashMediaPlayer)?o[a]():o.dashMediaPlayer;this.dashMediaPlayer=s;var l,u,c=e.parentElement;if(null==c)u=null;else u=!!c.__properties__&&(l=c.__properties__.get_streamrootDNAWrapper)?c[l]():c.streamrootDNAWrapper;this.streamrootDNAWrapper=u}else{this.dashMediaPlayer=dashjs.MediaPlayer().create(),this.dashMediaPlayer.getDebug().setLogToBrowserConsole(!1);try{this.initStreamrootDNA(this.dashMediaPlayer,t)}catch(e){}this.dashMediaPlayer.initialize();var d,h=e.parentElement,f=this.dashMediaPlayer;!!h.__properties__&&(d=h.__properties__.set_dashMediaPlayer)?h[d](f):h.dashMediaPlayer=f;var p,_=e.parentElement,g=this.streamrootDNAWrapper;!!_.__properties__&&(p=_.__properties__.set_streamrootDNAWrapper)?_[p](g):_.streamrootDNAWrapper=g}this.dashMediaPlayer.getPlaybackRate=Ve(this,this.getPlaybackRate),this.initListeners(),this.dashMediaPlayer.attachView(e),this.setDRMData(t.drmData),this.dashMediaPlayer.useSuggestedPresentationDelay(!0),this.dashMediaPlayer.setAutoSwitchQualityFor("audio",!1),this.dashMediaPlayer.setAutoSwitchQualityFor("video",!0),this.setMedia(t.url,!1,t.tcIn)};T.__name__=!0,T.main=function(){},T.__super__=E,T.prototype=n(E.prototype,{scteEventHandler:function(e){this.dispatchEvent(v.AD_INSERT,e.event)},getPlaybackRate:function(){try{return this.dashMediaPlayer.getVideoElement().playbackRate}catch(e){return-1}},initStreamrootDNA:function(e,t){if(null!=t.catalogStreamroot&&null!=t.catalogStreamroot.streamrootKey){var n={};n.property=Ve(this,this.getStreamTypeAsString),n.contentIdGenerator=Ve(this,this.getCurrentAtomMediaID),null!=t.catalogStreamroot.backendUrl&&(n.backendUrl=t.catalogStreamroot.backendUrl),null!=t.catalogStreamroot.backendHost&&(n.backendHost=t.catalogStreamroot.backendHost);var i={autoPlayerResetDetection:!1};this.streamrootDNAWrapper=new DashjsDnaWrapper(e,t.catalogStreamroot.streamrootKey,n,i)}},getCurrentAtomMediaID:function(){return this.engineAtom.mediaID+"_dash"},getStreamTypeAsString:function(){var e=E.prototype.getStreamType.call(this);return null!=e?e[0]:"unknown"},initListeners:function(){this.dashMediaPlayer.on("urn:scte:scte35:2013:xml",Ve(this,this.scteEventHandler),null),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.AST_IN_FUTURE,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.BUFFER_EMPTY,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.BUFFER_LEVEL_STATE_CHANGED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.BUFFER_LOADED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.CAN_PLAY,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.ERROR,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.FRAGMENT_LOADING_ABANDONED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.MANIFEST_LOADED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.METRIC_UPDATED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PERIOD_SWITCH_COMPLETED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PERIOD_SWITCH_STARTED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_ENDED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_ERROR,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_NOT_ALLOWED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_PAUSED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_PLAYING,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_RATE_CHANGED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_SEEKED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_SEEKING,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_STARTED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_TIME_UPDATED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.on(dashjs.MediaPlayer.events.TEXT_TRACK_ADDED,Ve(this,this.onDashMediaPlayerEvent))},removeListeners:function(){this.dashMediaPlayer.off(dashjs.MediaPlayer.events.AST_IN_FUTURE,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.BUFFER_EMPTY,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.BUFFER_LEVEL_STATE_CHANGED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.BUFFER_LOADED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.CAN_PLAY,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.ERROR,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.FRAGMENT_LOADING_ABANDONED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.MANIFEST_LOADED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.METRIC_UPDATED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PERIOD_SWITCH_COMPLETED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PERIOD_SWITCH_STARTED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PLAYBACK_ENDED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PLAYBACK_ERROR,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PLAYBACK_NOT_ALLOWED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PLAYBACK_PAUSED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PLAYBACK_PLAYING,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PLAYBACK_RATE_CHANGED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PLAYBACK_SEEKED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PLAYBACK_SEEKING,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PLAYBACK_STARTED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.PLAYBACK_TIME_UPDATED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.STREAM_INITIALIZED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED,Ve(this,this.onDashMediaPlayerEvent)),this.dashMediaPlayer.off(dashjs.MediaPlayer.events.TEXT_TRACK_ADDED,Ve(this,this.onDashMediaPlayerEvent))},onDashMediaPlayerEvent:function(e){var t,n;null==e?n=null:n=!!e.__properties__&&(t=e.__properties__.get_type)?e[t]():e.type;var i=n;if(i==dashjs.MediaPlayer.events.ERROR)this.dispatchEvent(v.STREAM_LOST);else if(i==dashjs.MediaPlayer.events.MANIFEST_LOADED)this.manifestAvailabilityStartTime=e.data.availabilityStartTime;else if(i==dashjs.MediaPlayer.events.PLAYBACK_PLAYING)E.prototype.setPlay.call(this),this.dispatchEvent(v.PLAY,null);else if(i==dashjs.MediaPlayer.events.PLAYBACK_PAUSED)E.prototype.setPause.call(this),this.dispatchEvent(v.PAUSE,null);else if(i==dashjs.MediaPlayer.events.PLAYBACK_ENDED)E.prototype.setStop.call(this),this.dispatchEvent(v.STOP,null),null!=this.streamrootDNAWrapper&&(this.streamrootDNAWrapper.stop(),this.dashMediaPlayer.reset(),he.deleteField(this.targetDiv.parentElement,"dashMediaPlayer"),he.deleteField(this.targetDiv.parentElement,"streamrootDNAWrapper"));else if(i!=dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED||null==this.userStartTime)if(i==dashjs.MediaPlayer.events.PLAYBACK_TIME_UPDATED)this.progress=this.dashMediaPlayer.time(),this.progressUTC=this.dashMediaPlayer.timeAsUTC(),this.dispatchEvent(v.PROGRESS,this.progress);else if(i==dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED){var r,a;if(null==e)a=null;else a=!!e.__properties__&&(r=e.__properties__.get_newQuality)?e[r]():e.newQuality;var s=a,o=this.dashMediaPlayer.getBitrateInfoListFor("video");null!=o&&null!=o[s]&&this.dispatchEvent(v.BITRATE_CHANGE,o[s].bitrate)}else i==dashjs.MediaPlayer.events.PLAYBACK_SEEKED?this.dispatchEvent(v.SEEKED,this.dashMediaPlayer.time()):i==dashjs.MediaPlayer.events.PLAYBACK_SEEKING?this.dispatchEvent(v.SEEKING,this.dashMediaPlayer.time()):i==dashjs.MediaPlayer.events.STREAM_INITIALIZED&&null!=this.userStartTime?"live"!=this.engineAtom.streamType?(this.dashMediaPlayer.getVideoElement().currentTime=this.userStartTime,this.userStartTime=null):this.dashMediaPlayer.play():i==dashjs.MediaPlayer.events.CAN_PLAY?this.dispatchEvent(v.WAIT,null):i==dashjs.MediaPlayer.events.PLAYBACK_NOT_ALLOWED&&this.dispatchEvent(v.AUTOPLAY_FAILED,null)},init:function(){E.prototype.init.call(this),null==this.dashMediaPlayer&&this.dispatchEvent(v.ENGINE_FAILED,0)},setMedia:function(e,t,n){if(null==n&&(n=0),null==t&&(t=!0),null!=this.dashMediaPlayer&&null!=e){this.dashMediaPlayer.setAutoPlay(!1);try{this.dashMediaPlayer.attachSource(e)}catch(e){be.trace("Failed initialising media player. This usually means your system doesn't support Media Source Extensions.",{fileName:"DashEngine.hx",lineNumber:372,className:"fr.tf1.etf1.core.engine.dash.DashEngine",methodName:"setMedia"}),this.dashMediaPlayer=null,this.dispatchEvent(v.STREAM_LOST,!0)}0!=n&&(this.userStartTime=n)}},setDRMData:function(e){null!=this.dashMediaPlayer&&null!=e&&(e=E.prototype.formatDRM.call(this,e),this.dashMediaPlayer.setProtectionData({"com.widevine.alpha":{serverURL:e.widevine},"com.microsoft.playready":{serverURL:e.playready}}))},setPlay:function(){null!=this.dashMediaPlayer&&(E.prototype.setPlay.call(this),this.dashMediaPlayer.play())},setPause:function(){null!=this.dashMediaPlayer&&(E.prototype.setPause.call(this),this.dashMediaPlayer.pause())},setSeek:function(e){null!=this.dashMediaPlayer&&(E.prototype.setSeek.call(this,e),this.engineAtom.streamType.toLowerCase()==h.LIVE[0].toLowerCase()?Le.__cast(this.targetDiv,HTMLVideoElement).currentTime=e:this.dashMediaPlayer.seek(e))},getDVRSeekOffset:function(e){return null==this.dashMediaPlayer?-1:(E.prototype.getDVRSeekOffset.call(this,e),this.dashMediaPlayer.getDVRSeekOffset(e))},duration:function(){return this.dashMediaPlayer.duration()},durationAsUTC:function(){return this.dashMediaPlayer.durationAsUTC()},getDVRWindowSize:function(){return null==this.dashMediaPlayer?-1:(E.prototype.getDVRWindowSize.call(this),this.dashMediaPlayer.getDVRWindowSize())},setStop:function(){null!=this.dashMediaPlayer&&(E.prototype.setStop.call(this),this.dashMediaPlayer.attachSource(null))},reset:function(){null!=this.dashMediaPlayer&&(E.prototype.reset.call(this),this.removeListeners(),null!=this.streamrootDNAWrapper&&this.streamrootDNAWrapper.detachMediaElement(),this.dashMediaPlayer.reset())},get_manifestAvailabilityStartTime:function(){return this.manifestAvailabilityStartTime/1e3},getLibInstance:function(){return null!=this.dashMediaPlayer?this.dashMediaPlayer:null},__class__:T});var A=function(e,t){E.call(this,m.FREEWHEEL,t),this.slot=t.slot,this.base=this.slot.getBase(),null!=this.base&&(this.base.addEventListener("play",Ve(this,this.playHandler)),this.base.addEventListener("_pause",Ve(this,this.pauseHandler)),this.base.addEventListener("stop",Ve(this,this.stopHandler))),t.mute&&this.setMute(!0),t.autoplay&&this.setPlay()};A.__name__=!0,A.__super__=E,A.prototype=n(E.prototype,{setPlay:function(){null!=this.slot&&(this.paused?this.slot.resume():this.slot.play(),E.prototype.setPlay.call(this),this.dispatchEvent(v.PLAY,null))},setPause:function(){if(null!=this.slot)try{E.prototype.setPause.call(this),this.dispatchEvent(v.PAUSE,null),this.slot.pause(),this.paused=!0}catch(e){}},skipAd:function(){null!=this.slot&&this.slot.skipCurrentAd()},setVolume:function(e){if(null!=this.slot){E.prototype.setVolume.call(this,e);try{this.slot.getCurrentAdInstance()._context.setAdVolume(e)}catch(e){}}},setMute:function(e){if(null!=this.slot){E.prototype.setMute.call(this,e);try{var t=this.slot.getCurrentAdInstance()._context;e&&t.setAdVolume(0)}catch(e){}}},playHandler:function(e,t){this.lastPlayEvent!=v.PLAY&&(this.lastPlayEvent=v.PLAY,this.dispatchEvent(v.PLAY,null))},pauseHandler:function(e,t){this.lastPlayEvent!=v.PAUSE&&(this.lastPlayEvent=v.PAUSE,this.dispatchEvent(v.PAUSE,null))},stopHandler:function(e,t){this.lastPlayEvent=v.STOP},destroy:function(){null!=this.slot&&(null!=this.base&&(this.base.removeEventListener("play",Ve(this,this.playHandler)),this.base.removeEventListener("_pause",Ve(this,this.pauseHandler)),this.base.removeEventListener("stop",Ve(this,this.stopHandler)),this.base=null),this.listenerObjectArray.splice(0,this.listenerObjectArray.length),this.listenerObjectArray=null,this.slot.stop(),this.slot.skipCurrentAd(),this.slot=null)},__class__:A});var S=function(e,t){this.tmpTcIn=0,E.call(this,m.NATIF,t);try{this.targetVideoElement=Le.__cast(e,HTMLVideoElement)}catch(e){}null!=this.targetVideoElement&&(this.initListeners(),this.setMedia(t.url,t.autoplay,t.tcIn))};S.__name__=!0,S.__super__=E,S.prototype=n(E.prototype,{initListeners:function(){this.targetVideoElement.addEventListener(f.canplay,Ve(this,this.onVideoEvent)),this.targetVideoElement.addEventListener(f.playing,Ve(this,this.onVideoEvent)),this.targetVideoElement.addEventListener(f.pause,Ve(this,this.onVideoEvent)),this.targetVideoElement.addEventListener(f.seeked,Ve(this,this.onVideoEvent)),this.targetVideoElement.addEventListener(f.seeking,Ve(this,this.onVideoEvent)),this.targetVideoElement.addEventListener(f.timeupdate,Ve(this,this.onVideoEvent)),this.targetVideoElement.addEventListener(f.ended,Ve(this,this.onVideoEvent)),this.targetVideoElement.addEventListener(f.loadstart,Ve(this,this.onVideoEvent)),this.targetVideoElement.addEventListener(f.error,Ve(this,this.onVideoEvent))},onVideoEvent:function(e,t){e.type==f.canplay?0!=this.tmpTcIn&&(this.setSeek(this.tmpTcIn),this.tmpTcIn=0):e.type==f.loadstart?this.targetVideoElement.play():e.type==f.playing?this.dispatchEvent(v.PLAY,null):e.type==f.pause?this.dispatchEvent(v.PAUSE,null):e.type==f.seeked?this.dispatchEvent(v.SEEKED,this.targetVideoElement.currentTime):e.type==f.seeking?this.dispatchEvent(v.SEEKING,this.targetVideoElement.currentTime):e.type==f.ended?this.dispatchEvent(v.STOP,null):e.type==f.timeupdate?(this.progress=this.targetVideoElement.currentTime,this.progressUTC=this.targetVideoElement.currentTime,this.dispatchEvent(v.PROGRESS,this.progress)):e.type==f.error&&null!=e.target&&null!=e.target.error&&(e.target.error.code==e.target.error.MEDIA_ERR_ABORTED?(be.trace("video playback aborted",{fileName:"NatifEngine.hx",lineNumber:88,className:"fr.tf1.etf1.core.engine.natif.NatifEngine",methodName:"onVideoEvent"}),this.dispatchEvent(v.STREAM_LOST)):e.target.error.code==e.target.error.MEDIA_ERR_NETWORK?(be.trace("video streaming failed due to a network error",{fileName:"NatifEngine.hx",lineNumber:94,className:"fr.tf1.etf1.core.engine.natif.NatifEngine",methodName:"onVideoEvent"}),this.dispatchEvent(v.STREAM_LOST)):e.target.error.code==e.target.error.MEDIA_ERR_DECODE?(be.trace("error decoding media stream",{fileName:"NatifEngine.hx",lineNumber:100,className:"fr.tf1.etf1.core.engine.natif.NatifEngine",methodName:"onVideoEvent"}),this.dispatchEvent(v.ENGINE_FAILED)):e.target.error.code==e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED&&(be.trace("video format not supported",{fileName:"NatifEngine.hx",lineNumber:106,className:"fr.tf1.etf1.core.engine.natif.NatifEngine",methodName:"onVideoEvent"}),this.dispatchEvent(v.ENGINE_FAILED,!0)))},setMedia:function(e,t,n){null==n&&(n=0),null==t&&(t=!0),null!=this.targetVideoElement&&(0!=n&&(this.tmpTcIn=n),this.targetVideoElement.autoplay=!0,this.targetVideoElement.src=e,this.targetVideoElement.play())},setPlay:function(){null!=this.targetVideoElement&&(E.prototype.setPlay.call(this),this.targetVideoElement.play())},setPause:function(){null!=this.targetVideoElement&&(E.prototype.setPause.call(this),this.targetVideoElement.pause())},setSeek:function(e){null!=this.targetVideoElement&&(E.prototype.setSeek.call(this,e),this.targetVideoElement.currentTime=Math.round(e))},durationAsUTC:function(){var e=(new Date).valueOf()/1e3;return 0==this.engineAtom.mediaID.indexOf("L_")?e-20:e+this.targetVideoElement.duration},getLibInstance:function(){return null!=this.targetVideoElement?this.targetVideoElement.id:null},__class__:S});var R=function(e,t){this.tmpTcIn=0,this.simulatedManifestStartTime=0,E.call(this,m.VIDEOJS,t),this.videoElement=Le.__cast(e,HTMLVideoElement),this.videoJSPlayer=new videojs(this.videoElement.id),this.videoJSPlayer.ready(Ve(this,this.onVideoJSReadyCallback))};R.__name__=!0,R.__super__=E,R.prototype=n(E.prototype,{onVideoJSReadyCallback:function(e){this.createListeners(),this.setMedia(this.engineAtom.url,this.engineAtom.autoplay,this.engineAtom.tcIn)},createListeners:function(){this.videoJSPlayer.on("loadstart",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("waiting",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("canplay",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("canplaythrough",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("playing",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("ended",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("seeking",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("seeked",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("play",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("firstplay",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("pause",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("durationchange",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("fullscreenchange",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("error",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("loadedmetadata",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("posterchange",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("textdata",Ve(this,this.onVideoJSEvent)),this.videoJSPlayer.on("timeupdate",Ve(this,this.onVideoJSEvent))},removeListeners:function(){this.videoJSPlayer.off("loadstart"),this.videoJSPlayer.off("waiting"),this.videoJSPlayer.off("canplay"),this.videoJSPlayer.off("canplaythrough"),this.videoJSPlayer.off("playing"),this.videoJSPlayer.off("ended"),this.videoJSPlayer.off("seeking"),this.videoJSPlayer.off("seeked"),this.videoJSPlayer.off("play"),this.videoJSPlayer.off("firstplay"),this.videoJSPlayer.off("pause"),this.videoJSPlayer.off("durationchange"),this.videoJSPlayer.off("fullscreenchange"),this.videoJSPlayer.off("error"),this.videoJSPlayer.off("loadedmetadata"),this.videoJSPlayer.off("posterchange"),this.videoJSPlayer.off("textdata"),this.videoJSPlayer.off("timeupdate")},onVideoJSEvent:function(e){switch(e.type){case"canplaythrough":0!=this.tmpTcIn&&(this.setSeek(this.tmpTcIn),this.tmpTcIn=0),0==this.simulatedManifestStartTime&&this.simulateManifestStartTime();break;case"ended":E.prototype.setStop.call(this),this.dispatchEvent(v.STOP,null);break;case"error":this.dispatchEvent(v.ENGINE_FAILED,null);break;case"loadedmetadata":this.simulateManifestStartTime();break;case"pause":E.prototype.setPause.call(this),this.dispatchEvent(v.PAUSE,null);break;case"play":E.prototype.setPlay.call(this),this.dispatchEvent(v.PLAY,null);break;case"seeked":case"seeking":this.progress=this.videoJSPlayer.currentTime(),this.dispatchEvent(v.SEEKING,this.progress);break;case"timeupdate":this.progress=this.videoJSPlayer.currentTime(),this.progressUTC=this.progressToUTC(this.videoJSPlayer.currentTime()),isFinite(this.videoJSPlayer.duration())||this.calculateLiveDuration(),this.dispatchEvent(v.PROGRESS,this.progress)}},calculateLiveDuration:function(){if(0!=this.videoJSPlayer.seekable().length){var e=this.videoJSPlayer.seekable().start(0),t=this.videoJSPlayer.seekable().end(0);if(e!=t)try{var n=t-e-5;0<=n&&n!=this.lastDuration?(this.videoJSPlayer.duration(n),this.lastDuration=n):isFinite(this.lastDuration)&&this.videoJSPlayer.duration(this.lastDuration)}catch(e){}}},simulateManifestStartTime:function(){if(0!=this.videoJSPlayer.currentTime()){var e=(new Date).valueOf();e/=1e3,e-=20,this.simulatedManifestStartTime=Math.round(e-this.videoJSPlayer.currentTime())}},progressToUTC:function(e){return this.simulatedManifestStartTime+e},setMedia:function(e,t,n){if(null==n&&(n=0),null==t&&(t=!0),null!=this.videoJSPlayer){var i={src:e,type:"application/x-mpegURL",protection:this.generateFairplayObject()};this.videoJSPlayer.src(i),0!=n&&(this.tmpTcIn=n),this.setPlay()}},generateFairplayObject:function(){var e=E.prototype.formatDRM.call(this,this.engineAtom.drmData);return null!=e&&null!=e.fairplay?{keySystem:"com.apple.fps.1_0",certificateUrl:"https://drm-fair.tf1.fr/certificate.der",licenseUrl:e.fairplay}:null},setPlay:function(){null!=this.videoJSPlayer&&null!=this.videoElement&&(E.prototype.setPlay.call(this),this.videoJSPlayer.play())},setPause:function(){null!=this.videoJSPlayer&&null!=this.videoElement&&(E.prototype.setPause.call(this),this.videoJSPlayer.pause())},setSeek:function(e){null!=this.videoJSPlayer&&(E.prototype.setSeek.call(this,e),this.videoJSPlayer.currentTime(Math.round(e)))},durationAsUTC:function(){var e=(new Date).valueOf()/1e3;return 0==this.engineAtom.mediaID.indexOf("L_")?e-20:e+this.videoJSPlayer.duration()},setStop:function(){null!=this.videoJSPlayer&&(E.prototype.setStop.call(this),this.videoJSPlayer.src({type:null,src:null,protection:null}))},reset:function(){},get_manifestAvailabilityStartTime:function(){return this.simulatedManifestStartTime},getLibInstance:function(){return null!=this.videoJSPlayer?this.videoJSPlayer:null},__class__:R});var _e=function(){s.call(this),this.dictionariesMap=new we};_e.__name__=!0,_e.getInstance=function(){return null==_e.instance&&(_e.instance=new _e),_e.instance},_e.getCurrentBrowserAcceptLanguageAsBCP47=function(){return P.fr_FR},_e.__super__=s,_e.prototype=n(s.prototype,{getDictionary:function(e){switch(e[1]){case 0:return(new O).dictionary;case 1:return(new D).dictionary;case 2:return(new N).dictionary}},setLocale:function(e){if(!this.dictionariesMap.exists(e)){var t=this.getDictionary(e);if(null==t)return!1;this.dictionariesMap.set(e,t)}return this.currentDictionary=this.dictionariesMap.get(e),this.dispatchEvent(I.ON_LANGUAGE_CHANGE,e),!0},getText:function(e,t){if(null==this.currentDictionary)return"---";var n=this.currentDictionary.get(e);return null==n?"---":(null!=t&&(n=ye.findAndReplace(n,t)),n)},__class__:_e});var I={__ename__:!0,__constructs__:["ON_LANGUAGE_CHANGE"],ON_LANGUAGE_CHANGE:["ON_LANGUAGE_CHANGE",0]};I.ON_LANGUAGE_CHANGE.__enum__=I;var C={__ename__:!0,__constructs__:["VOTRE_VIDEO_DANS_UN_INSTANT","VOTRE_VIDEO_DANS_N_SECONDES","GEOBLOCK_MESSAGE","CONTENU_INDISPONIBLE"],VOTRE_VIDEO_DANS_UN_INSTANT:["VOTRE_VIDEO_DANS_UN_INSTANT",0]};(C.VOTRE_VIDEO_DANS_UN_INSTANT.__enum__=C).VOTRE_VIDEO_DANS_N_SECONDES=["VOTRE_VIDEO_DANS_N_SECONDES",1],(C.VOTRE_VIDEO_DANS_N_SECONDES.__enum__=C).GEOBLOCK_MESSAGE=["GEOBLOCK_MESSAGE",2],(C.GEOBLOCK_MESSAGE.__enum__=C).CONTENU_INDISPONIBLE=["CONTENU_INDISPONIBLE",3],C.CONTENU_INDISPONIBLE.__enum__=C;var P={__ename__:!0,__constructs__:["default_default","en_GB","fr_FR"],default_default:["default_default",0]};(P.default_default.__enum__=P).en_GB=["en_GB",1],(P.en_GB.__enum__=P).fr_FR=["fr_FR",2],P.fr_FR.__enum__=P;var w=function(){};w.__name__=!0,w.prototype={__class__:w};var O=function(){this.dictionary=new we,this.store(C.VOTRE_VIDEO_DANS_UN_INSTANT,"--soon--"),this.store(C.VOTRE_VIDEO_DANS_N_SECONDES,"--{0} seconds--"),this.store(C.GEOBLOCK_MESSAGE,"--soon--")};O.__name__=!0,O.prototype={store:function(e,t){this.dictionary.set(e,t)},__class__:O};var D=function(){O.call(this),O.prototype.store.call(this,C.VOTRE_VIDEO_DANS_N_SECONDES,"Your video in {0} seconds"),O.prototype.store.call(this,C.GEOBLOCK_MESSAGE,"Sorry, this video is not available in your current location."),O.prototype.store.call(this,C.CONTENU_INDISPONIBLE,"Sorry, this video is not available.")};D.__name__=!0,D.__super__=O,D.prototype=n(O.prototype,{__class__:D});var N=function(){O.call(this),O.prototype.store.call(this,C.VOTRE_VIDEO_DANS_N_SECONDES,"votre video dans {0} secondes"),O.prototype.store.call(this,C.VOTRE_VIDEO_DANS_UN_INSTANT,"PUB : Votre vidéo dans un instant"),O.prototype.store.call(this,C.GEOBLOCK_MESSAGE,"Ce contenu est indisponible dans votre région"),O.prototype.store.call(this,C.CONTENU_INDISPONIBLE,"Ce contenu est indisponible")};N.__name__=!0,N.__super__=O,N.prototype=n(O.prototype,{__class__:N});var M={__ename__:!0,__constructs__:["REQUEST_AD_COMPLETE","LINEAR_AD","AD_ERROR","SLOT_START","SLOT_COMPLETE","AD_START","AD_COMPLETE","AD_CLICKED","AUTOPLAY_FAILED"],REQUEST_AD_COMPLETE:["REQUEST_AD_COMPLETE",0]};(M.REQUEST_AD_COMPLETE.__enum__=M).LINEAR_AD=["LINEAR_AD",1],(M.LINEAR_AD.__enum__=M).AD_ERROR=["AD_ERROR",2],(M.AD_ERROR.__enum__=M).SLOT_START=["SLOT_START",3],(M.SLOT_START.__enum__=M).SLOT_COMPLETE=["SLOT_COMPLETE",4],(M.SLOT_COMPLETE.__enum__=M).AD_START=["AD_START",5],(M.AD_START.__enum__=M).AD_COMPLETE=["AD_COMPLETE",6],(M.AD_COMPLETE.__enum__=M).AD_CLICKED=["AD_CLICKED",7],(M.AD_CLICKED.__enum__=M).AUTOPLAY_FAILED=["AUTOPLAY_FAILED",8],M.AUTOPLAY_FAILED.__enum__=M;var L={__ename__:!0,__constructs__:["PREROLL","MIDROLL","POSTROLL"],PREROLL:["PREROLL",0]};(L.PREROLL.__enum__=L).MIDROLL=["MIDROLL",1],(L.MIDROLL.__enum__=L).POSTROLL=["POSTROLL",2],L.POSTROLL.__enum__=L;var x=function(){s.call(this)};x.__name__=!0,x.getInstance=function(e){null==x.instancesMap&&(x.instancesMap=new Ne);var t=x.instancesMap;if(!(null!=Xe[e]?t.existsReserved(e):t.h.hasOwnProperty(e))){var n=x.instancesMap,i=new F,r=n;null!=Xe[e]?r.setReserved(e,i):r.h[e]=i}var a=x.instancesMap;return x.currentAdManager=null!=Xe[e]?a.getReserved(e):a.h[e],x.currentAdManager},x.clearInstance=function(e){null!=x.currentAdManager&&x.currentAdManager.dispose();var t=x.instancesMap;(null!=Xe[e]?t.existsReserved(e):t.h.hasOwnProperty(e))||x.instancesMap.remove(e),x.currentAdManager=null},x.__super__=s,x.prototype=n(s.prototype,{requestAd:function(e,t){null==e||null==x.currentAdManager?this.dispatchEvent(M.SLOT_COMPLETE):this.init(e,t)},requestAdInsert:function(e,t,n){null==e||null==x.currentAdManager?this.dispatchEvent(M.SLOT_COMPLETE):this.initAdInsert(e,t,n)},init:function(e,t){},initAdInsert:function(e,t,n){},setProgress:function(e){},setSize:function(e,t){},updateDisplayBase:function(e){},skipAd:function(){},setMediaPlay:function(){},setMediaPause:function(){},setMediaStop:function(){},setMediaComplete:function(){},forceNextSlot:function(){},refreshDisplayBase:function(){},getCurrentAdCount:function(){return-1},getAdInfo:function(){return-1},dispose:function(){},__class__:x});var k=function(){x.call(this)};k.__name__=!0,k.__super__=x,k.prototype=n(x.prototype,{init:function(e,t){x.prototype.init.call(this,e,t),this.catalogFW=e,this.initialisationData=t,this.prerollCount=0,this.midrollCount=0,this.postrollCount=0,this.storedSlots=new Oe,null!=e&&this.prepareFWTags()},prepareFWTags:function(){var e=this.initialisationData.channelFW,t=this.initialisationData.whereFW,n=this.initialisationData.whatFW,i=this.catalogFW.profile,r=this.initialisationData.device;"smarttv"==r.toLowerCase()&&(r="desktop");var a=this.generateFreewheelPlatformValue(r,this.initialisationData.os),s=this.catalogFW.channel;null!=e&&""!=e&&(s=e);var o=this.catalogFW.page,l=new RegExp("_html5_","".split("u").join(""));this.fwProfile=i.replace(l,"_html5_"+r+"_");var u=s+"_page_type_"+o+"_platform_"+a+"_media_"+r;null!=t&&""!=t&&(u=t),this.fwWhere=u;var c=this.catalogFW.asset;if(null!=n&&""!=n&&(c=n),"1"==this.initialisationData.isTrust&&(c="contenu_espace_confiance"),this.fwWhat=c,this.fwTarget=this.initialisationData.fwTarget,null!=this.initialisationData.userDMP&&""!=this.initialisationData.userDMP&&(this.userDMP=ye.queryStringToObject(this.initialisationData.userDMP)),null!=this.initialisationData.hawkeye&&""!=this.initialisationData.hawkeye&&(this.userHawkeye=ye.queryStringToObject(this.initialisationData.hawkeye)),null!=this.initialisationData.userAM&&""!=this.initialisationData.userAM&&(this.userAM=ye.queryStringToObject(this.initialisationData.userAM)),null!=this.initialisationData.userBonsai&&""!=this.initialisationData.userBonsai){var d=this.initialisationData.userBonsai;this.userBonsai=ye.processKeyValuePairsBySerializedJson(decodeURIComponent(d.split("+").join(" ")))}null!=this.initialisationData.userGDPR&&""!=this.initialisationData.userGDPR&&(this.userGDPR=ye.queryStringToObject(this.initialisationData.userGDPR))},generateFreewheelPlatformValue:function(e,t){var n="";if("desktop"==e)n="desktop";else if("mobile"==e||"tablet"==e){var i=new Ne;null!=Xe.mobile_microsoft?i.setReserved("mobile_microsoft","windows_phone"):i.h.mobile_microsoft="windows_phone",null!=Xe.mobile_win?i.setReserved("mobile_win","windows_phone"):i.h.mobile_win="windows_phone",null!=Xe.mobile_mac?i.setReserved("mobile_mac","iphone"):i.h.mobile_mac="iphone",null!=Xe.mobile_apple?i.setReserved("mobile_apple","iphone"):i.h.mobile_apple="iphone",null!=Xe.mobile_ios?i.setReserved("mobile_ios","iphone"):i.h.mobile_ios="iphone",null!=Xe.mobile_google?i.setReserved("mobile_google","android_phone"):i.h.mobile_google="android_phone",null!=Xe.mobile_android?i.setReserved("mobile_android","android_phone"):i.h.mobile_android="android_phone",null!=Xe.mobile_chrome?i.setReserved("mobile_chrome","android_phone"):i.h.mobile_chrome="android_phone",null!=Xe.mobile_linux?i.setReserved("mobile_linux","linux_phone"):i.h.mobile_linux="linux_phone",null!=Xe.mobile_unknown?i.setReserved("mobile_unknown","unknown_phone"):i.h.mobile_unknown="unknown_phone",null!=Xe.tablet_microsoft?i.setReserved("tablet_microsoft","windows_tablet"):i.h.tablet_microsoft="windows_tablet",null!=Xe.tablet_win?i.setReserved("tablet_win","windows_tablet"):i.h.tablet_win="windows_tablet",null!=Xe.tablet_mac?i.setReserved("tablet_mac","ipad"):i.h.tablet_mac="ipad",null!=Xe.tablet_apple?i.setReserved("tablet_apple","ipad"):i.h.tablet_apple="ipad",null!=Xe.tablet_ios?i.setReserved("tablet_ios","ipad"):i.h.tablet_ios="ipad",null!=Xe.tablet_google?i.setReserved("tablet_google","android_tablet"):i.h.tablet_google="android_tablet",null!=Xe.tablet_android?i.setReserved("tablet_android","android_tablet"):i.h.tablet_android="android_tablet",null!=Xe.tablet_chrome?i.setReserved("tablet_chrome","android_tablet"):i.h.tablet_chrome="android_tablet",null!=Xe.tablet_linux?i.setReserved("tablet_linux","linux_tablet"):i.h.tablet_linux="linux_tablet",null!=Xe.tablet_unknown?i.setReserved("tablet_unknown","unknown_tablet"):i.h.tablet_unknown="unknown_tablet";var r=e+"_"+t;if(null==(n=null!=Xe[r]?i.getReserved(r):i.h[r])){var a=e+"_unknown";n=null!=Xe[a]?i.getReserved(a):i.h[a]}n+="_mobile_web"}else n=e+"_"+t;return n},clearSlots:function(){for(var e=this.storedSlots.iterator();e.hasNext();){var t=e.next();this.storedSlots.remove(t)}},storeSlotsByTimePosition:function(e){if(0!=e.length){this.clearSlots();for(var t=0;t<e.length;){var n=e[t];if(++t,0!=n.getAdCount()){var i=this.storedSlots,r=n.getTimePosition();i.h[r]=n}}this.traceSlots()}else this.onSlotEnded(L.PREROLL)},onSlotStarted:function(e){},onSlotEnded:function(e){},onAdEvent:function(e){},onAdClick:function(e){this.dispatchEvent(M.AD_CLICKED,e)},onAdPause:function(e){},onAdResume:function(e){},onAdImpression:function(e){switch(e){case"MIDROLL":this.currentRollType=L.MIDROLL,this.midrollCount++;break;case"POSTROLL":this.currentRollType=L.POSTROLL,this.postrollCount++;break;case"PREROLL":this.currentRollType=L.PREROLL,this.prerollCount++}this.dispatchEvent(M.AD_START,e)},onAdImpressionEnd:function(e){this.dispatchEvent(M.AD_COMPLETE,e)},onAutoplayBlocked:function(){this.dispatchEvent(M.AUTOPLAY_FAILED)},onAdError:function(e,t){var n={};n.code=e,n.message=t,this.dispatchEvent(M.AD_ERROR,n)},setProgress:function(e){if(null!=this.storedSlots){var t=0|e;this.storedSlots.h.hasOwnProperty(t)?(this.dispatchEvent(M.LINEAR_AD,this.storedSlots.h[t]),this.storedSlots.remove(t)):0==e&&this.dispatchEvent(M.SLOT_COMPLETE)}},forceNextSlot:function(){if(null!=this.storedSlots)for(var e=this.storedSlots.iterator();e.hasNext();){var t=e.next(),n=t.getTimePosition();if(0!=n)return this.dispatchEvent(M.LINEAR_AD,t),this.storedSlots.remove(n),void this.traceSlots()}},traceSlots:function(){var e,t,n=this.initialisationData;null==n?t=null:t=!!n.__properties__&&(e=n.__properties__.get_debug)?n[e]():n.debug;if("1"==t&&null!=this.storedSlots){0==g.count(this.storedSlots)&&be.trace("----- FW ---\x3e 0  ads",{fileName:"FreewheelCommon.hx",lineNumber:295,className:"fr.tf1.etf1.core.module.ads.freewheel.FreewheelCommon",methodName:"traceSlots"});for(var i=this.storedSlots.iterator();i.hasNext();){var r=i.next(),a=r.getTimePosition(),s=ye.secondsToHumanReadable(a);be.trace("----- FW ---\x3e "+r.getTimePositionClass()+" : "+fe.string(r.getAdCount())+" ads  @ "+a+"s ("+s+")",{fileName:"FreewheelCommon.hx",lineNumber:301,className:"fr.tf1.etf1.core.module.ads.freewheel.FreewheelCommon",methodName:"traceSlots"})}}},getCurrentAdCount:function(){var e=this.currentRollType;if(null==e)return-1;switch(e[1]){case 0:return this.prerollCount;case 1:return this.midrollCount;case 2:return this.postrollCount}},__class__:k});var F=function(){k.call(this),window.tv.freewheel.SDK.setLogLevel(window.tv.freewheel.SDK.LOG_LEVEL_QUIET),this.jsLib=new window.tv.freewheel.SDK.AdManager};F.__name__=!0,F.__super__=k,F.prototype=n(k.prototype,{init:function(e,t){k.prototype.init.call(this,e,t),null!=e?(this.jsLib.setNetwork(this.catalogFW.id),this.jsLib.setServer(this.catalogFW.url),this.jsContext=this.currentAdContext=this.createContext(),this.jsContext.addEventListener(window.tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,Ve(this,this.requestCompleteHandler)),this.jsContext.submitRequest()):this.dispatchEvent(M.SLOT_COMPLETE)},initAdInsert:function(e,t,n){var i,r,a=this.initialisationData;null==a?r=null:r=!!a.__properties__&&(i=a.__properties__.get_debug)?a[i]():a.debug;if("1"==r&&(be.trace("------------",{fileName:"Freewheel_JS.hx",lineNumber:150,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"initAdInsert"}),be.trace("AdInsert",{fileName:"Freewheel_JS.hx",lineNumber:151,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"initAdInsert"}),be.trace(" -> duration: "+n.duration+" ("+ye.secondsToHumanReadable(parseFloat(n.duration)/1e3|0)+")",{fileName:"Freewheel_JS.hx",lineNumber:152,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"initAdInsert"}),be.trace(" -> id: "+n.id,{fileName:"Freewheel_JS.hx",lineNumber:153,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"initAdInsert"}),be.trace("------------",{fileName:"Freewheel_JS.hx",lineNumber:154,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"initAdInsert"})),k.prototype.init.call(this,e,t),null!=e){this.jsLib.setNetwork(this.catalogFW.id),this.jsLib.setServer(this.catalogFW.url),this.jsAdInsertContext=this.currentAdContext=this.createContext();var s=Math.round(parseFloat(n.duration)/1e3),o=new RegExp("_platform_","g".split("u").join(""));this.jsAdInsertContext.setSiteSection(this.fwWhere.replace(o,"_"+n.id+"_platform_")),this.jsAdInsertContext.addTemporalSlot("mid",window.tv.freewheel.SDK.ADUNIT_MIDROLL,0,null,1,s,s),this.jsAdInsertContext.setVideoAsset(this.fwWhat,this.catalogFW.duration,this.catalogFW.id,null,null,null,null,null,window.tv.freewheel.SDK.VIDEO_ASSET_DURATION_TYPE_VARIABLE),this.jsAdInsertContext.addEventListener(window.tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,Ve(this,this.adInsertionRequestCompleteHandler)),this.jsAdInsertContext.setRequestMode(window.tv.freewheel.SDK.REQUEST_MODE_LIVE),this.jsAdInsertContext.setRequestDuration(s),this.jsAdInsertContext.submitRequest()}else this.dispatchEvent(M.SLOT_COMPLETE)},createContext:function(){var e=this.jsLib.newContext();if(e.setProfile(this.fwProfile),e.setSiteSection(this.fwWhere),e.setVideoAsset(this.fwWhat,this.catalogFW.duration),e.setParameter(window.tv.freewheel.SDK.PARAMETER_DISABLE_CORS_ENFORCEMENT,!0,window.tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),e.setParameter(window.tv.freewheel.SDK.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE,!1,window.tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),e.setParameter(window.tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,window.tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),e.registerVideoDisplayBase(this.fwTarget),null!=this.userDMP)for(var t=this.userDMP.keys();t.hasNext();){var n=t.next(),i=this.userDMP;e.addKeyValue(n,null!=Xe[n]?i.getReserved(n):i.h[n])}if(null!=this.userHawkeye)for(var r=this.userHawkeye.keys();r.hasNext();){var a=r.next(),s=this.userHawkeye;e.addKeyValue(a,null!=Xe[a]?s.getReserved(a):s.h[a])}if(null!=this.userAM)for(var o=this.userAM.keys();o.hasNext();){var l=o.next(),u=this.userAM;e.addKeyValue(l,null!=Xe[l]?u.getReserved(l):u.h[l])}if(null!=this.userBonsai)for(var c=this.userBonsai.keys();c.hasNext();){var d=c.next(),h=this.userBonsai;e.addKeyValue(d,null!=Xe[d]?h.getReserved(d):h.h[d])}if(null!=this.userGDPR)for(var f=this.userGDPR.keys();f.hasNext();){var p=f.next(),_=this.userGDPR;e.addKeyValue(p,null!=Xe[p]?_.getReserved(p):_.h[p])}return e.addEventListener(window.tv.freewheel.SDK.EVENT_SLOT_STARTED,Ve(this,this.onSlotStarted)),e.addEventListener(window.tv.freewheel.SDK.EVENT_SLOT_ENDED,Ve(this,this.onSlotEnded)),e.addEventListener(window.tv.freewheel.SDK.EVENT_AD,Ve(this,this.adEventHandler)),e.addEventListener(window.tv.freewheel.SDK.EVENT_AD_PAUSE,Ve(this,this.adPauseResumeEventHandler)),e.addEventListener(window.tv.freewheel.SDK.EVENT_AD_RESUME,Ve(this,this.adPauseResumeEventHandler)),e.addEventListener(window.tv.freewheel.SDK.EVENT_AD_CLICK,Ve(this,this.onAdClick)),e.addEventListener(window.tv.freewheel.SDK.EVENT_AD_IMPRESSION,Ve(this,this.onAdImpression)),e.addEventListener(window.tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,Ve(this,this.onAdImpressionEnd)),e},adEventHandler:function(e){var t,n,i,r;null==e?n=null:n=!!e.__properties__&&(t=e.__properties__.get_subType)?e[t]():e.subType;(n==window.tv.freewheel.SDK.EVENT_AD_AUTO_PLAY_BLOCKED&&this.onAutoplayBlocked(),null==e)?r=null:r=!!e.__properties__&&(i=e.__properties__.get_subType)?e[i]():e.subType;if(r==window.tv.freewheel.SDK.EVENT_ERROR){var a="----",s=e.errorCode;switch(e.errorCode){case"_e_3p-comp":s="ERROR_3P_COMPONENT",a="-3058";break;case"_e_adinst-unavail":s="ADINST_UNAVAIL",a="-177";break;case"_e_device-limit":s="ERROR_DEVICE_LIMIT",a="-3060";break;case"_e_external-interface":s="EXTERNAL_INTERFACE",a="-175";break;case"_e_in-app-view":s="IN_APP_VIEW",a="-183";break;case"_e_invalid-value":s="ERROR_INVALID_VALUE",a="-3056";break;case"_e_io":s="ERROR_IO",a="-3050";break;case"_e_missing-param":s="ERROR_MISSING_PARAMETER",a="-3053";break;case"_e_no-ad":s="ERROR_NO_AD_AVAILABLE",a="-3054";break;case"_e_no-renderer":s="NO_RENDERER",a="-179";break;case"_e_null-asset":s="ERROR_NULL_ASSET",a="-3051";break;case"_e_parse":s="ERROR_PARSE",a="-3055";break;case"_e_really-no-ad":s="NO_AD",a="-173";break;case"_e_renderer-init":s="RENDERER_INIT",a="-181";break;case"_e_security":s="ERROR_SECURITY",a="-3061";break;case"_e_timeout":s="ERROR_TIMEOUT",a="-3032";break;case"_e_unknown":s="ERROR_UNKNOWN",a="-3052";break;case"_e_unsupp-3p-feature":s="ERROR_UNSUPPORTED_3P_FEATURE",a="-3059"}k.prototype.onAdError.call(this,a,s)}},adPauseResumeEventHandler:function(e){var t,n,i=this.initialisationData;null==i?n=null:n=!!i.__properties__&&(t=i.__properties__.get_debug)?i[t]():i.debug;"1"==n&&(be.trace("adPauseResumeEventHandler",{fileName:"Freewheel_JS.hx",lineNumber:284,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"adPauseResumeEventHandler"}),be.trace(e,{fileName:"Freewheel_JS.hx",lineNumber:285,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"adPauseResumeEventHandler"}))},errorHandler:function(e){var t,n,i=this.initialisationData;null==i?n=null:n=!!i.__properties__&&(t=i.__properties__.get_debug)?i[t]():i.debug;"1"==n&&be.trace(e,{fileName:"Freewheel_JS.hx",lineNumber:293,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"errorHandler"})},requestCompleteHandler:function(e){if(this.jsContext.removeEventListener(window.tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,Ve(this,this.requestCompleteHandler)),!e.success)return k.prototype.onAdError.call(this,"-260","FW_ADREQUEST_FAIL"),void this.dispatchEvent(M.SLOT_COMPLETE);0!=this.jsContext.getTemporalSlots().length&&k.prototype.storeSlotsByTimePosition.call(this,this.jsContext.getTemporalSlots()),this.dispatchEvent(M.REQUEST_AD_COMPLETE)},adInsertionRequestCompleteHandler:function(e){if(this.jsAdInsertContext.removeEventListener(window.tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,Ve(this,this.adInsertionRequestCompleteHandler)),!e.success)return k.prototype.onAdError.call(this,"276","FW_ADINSERT_REQUEST_FAIL"),void this.dispatchEvent(M.SLOT_COMPLETE);var t=null;if(0!=this.jsAdInsertContext.getTemporalSlots().length){var n,i,r=(t=this.jsAdInsertContext.getTemporalSlots()[0]).getTimePosition(),a=ye.secondsToHumanReadable(r),s=this.initialisationData;if(null==s)i=null;else i=!!s.__properties__&&(n=s.__properties__.get_debug)?s[n]():s.debug;"1"==i&&be.trace("----- FW ---\x3e "+fe.string(t.getTimePositionClass())+" : "+fe.string(t.getAdCount())+" ads  @ "+r+"s ("+a+")",{fileName:"Freewheel_JS.hx",lineNumber:336,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"adInsertionRequestCompleteHandler"})}null!=t&&0<t.getAdCount()?this.dispatchEvent(M.LINEAR_AD,this.jsAdInsertContext.getTemporalSlots()[0]):this.dispatchEvent(M.SLOT_COMPLETE)},onMediaStateChange:function(e){null!=this.jsContext&&this.lastMediaState!=e&&(this.jsContext.setVideoState(e),this.lastMediaState=e)},onSlotStarted:function(e){if(e.slot.getTimePositionClass()!=window.tv.freewheel.SDK.TIME_POSITION_CLASS_DISPLAY){var t,n,i=this.initialisationData;if(null==i)n=null;else n=!!i.__properties__&&(t=i.__properties__.get_debug)?i[t]():i.debug;if("1"==n&&e.slot.getTimePositionClass()!=window.tv.freewheel.SDK.ADUNIT_PREROLL){var r=e.slot.getTimePosition(),a=ye.secondsToHumanReadable(r);be.trace("onSlotStarted : "+fe.string(e.slot.getTimePositionClass())+" : "+fe.string(e.slot.getAdCount())+" ads  @ "+r+"s ("+a+")",{fileName:"Freewheel_JS.hx",lineNumber:367,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"onSlotStarted"})}k.prototype.onSlotStarted.call(this,e.slot.getTimePositionClass()),this.dispatchEvent(M.SLOT_START)}},onSlotEnded:function(e){if(e.slot.getTimePositionClass()!=window.tv.freewheel.SDK.TIME_POSITION_CLASS_DISPLAY){var t,n,i=this.initialisationData;if(null==i)n=null;else n=!!i.__properties__&&(t=i.__properties__.get_debug)?i[t]():i.debug;"1"==n&&be.trace("onSlotEnded : "+fe.string(e.slot.getTimePositionClass()),{fileName:"Freewheel_JS.hx",lineNumber:383,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"onSlotEnded"}),k.prototype.onSlotEnded.call(this,e.slot.getTimePositionClass()),this.dispatchEvent(M.SLOT_COMPLETE,e.slot.getTimePositionClass())}},onAdImpression:function(e){k.prototype.onAdImpression.call(this,e.adInstance.getSlot().getTimePositionClass());var t,n,i=this.initialisationData;null==i?n=null:n=!!i.__properties__&&(t=i.__properties__.get_debug)?i[t]():i.debug;if("1"==n){var r=e.adInstance.getSlot().getCurrentAdInstance();be.trace("--\x3e id : "+fe.string(r.getAdId()),{fileName:"Freewheel_JS.hx",lineNumber:399,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"onAdImpression"}),be.trace("--\x3e type : "+fe.string(r.getActiveCreativeRendition().getCreativeApi()),{fileName:"Freewheel_JS.hx",lineNumber:400,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"onAdImpression"}),be.trace("--\x3e duration : "+fe.string(r.getActiveCreativeRendition().getDuration()),{fileName:"Freewheel_JS.hx",lineNumber:401,className:"fr.tf1.etf1.core.module.ads.freewheel.Freewheel_JS",methodName:"onAdImpression"})}},onAdImpressionEnd:function(e){k.prototype.onAdImpressionEnd.call(this,e.adInstance.getSlot().getTimePositionClass())},onAutoplayBlocked:function(){k.prototype.onAutoplayBlocked.call(this)},setMediaPlay:function(){this.onMediaStateChange(window.tv.freewheel.SDK.VIDEO_STATE_PLAYING)},setMediaPause:function(){this.onMediaStateChange(window.tv.freewheel.SDK.VIDEO_STATE_PAUSED)},setMediaStop:function(){this.onMediaStateChange(window.tv.freewheel.SDK.VIDEO_STATE_STOPPED)},setMediaComplete:function(){this.onMediaStateChange(window.tv.freewheel.SDK.VIDEO_STATE_COMPLETED)},updateDisplayBase:function(e){null!=this.jsContext&&this.jsContext.registerVideoDisplayBase(e.id),null!=this.jsAdInsertContext&&this.jsAdInsertContext.registerVideoDisplayBase(e.id),this.lastDisplayBase=e},refreshDisplayBase:function(){null!=this.lastDisplayBase&&this.updateDisplayBase(this.lastDisplayBase)},setSize:function(e,t){null!=this.jsContext&&this.jsContext.resize(e,t),null!=this.jsAdInsertContext&&this.jsAdInsertContext.resize(e,t)},skipAd:function(){},dispose:function(){k.prototype.dispose.call(this),null!=this.jsContext&&(this.jsContext.dispose(),this.jsContext=null),null!=this.jsAdInsertContext&&(this.jsAdInsertContext.dispose(),this.jsAdInsertContext=null)},getAdInfo:function(){if(null==this.storedSlots)return 0;for(var e=0,t=0,n=this.storedSlots.iterator();n.hasNext();){var i=n.next();i.getTimePositionClass()==window.tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL&&(e=1),i.getTimePositionClass()==window.tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL&&(t=1)}return 1==t&&0==e?3:e+t},__class__:F});var U={__ename__:!0,__constructs__:["AD","MEDIA"],AD:["AD",0]};(U.AD.__enum__=U).MEDIA=["MEDIA",1],U.MEDIA.__enum__=U;var V={__ename__:!0,__constructs__:["PREROLL","MIDROLL","POSTROLL"],PREROLL:["PREROLL",0]};(V.PREROLL.__enum__=V).MIDROLL=["MIDROLL",1],(V.MIDROLL.__enum__=V).POSTROLL=["POSTROLL",2],V.POSTROLL.__enum__=V;var B={__ename__:!0,__constructs__:["EVENT_PLAY","EVENT_PAUSE","EVENT_SEEK","EVENT_STOP"],EVENT_PLAY:["EVENT_PLAY",0]};(B.EVENT_PLAY.__enum__=B).EVENT_PAUSE=["EVENT_PAUSE",1],(B.EVENT_PAUSE.__enum__=B).EVENT_SEEK=["EVENT_SEEK",2],(B.EVENT_SEEK.__enum__=B).EVENT_STOP=["EVENT_STOP",3],B.EVENT_STOP.__enum__=B;var j=function(e,t){this.catalog=e,this.context=t,this.currentAdCount=0};j.__name__=!0,j.prototype={updateCatalog:function(e){},sendPlay:function(){},sendPause:function(){},sendStop:function(){},sendSeeked:function(e){},sendSeeking:function(e){},setProgress:function(e){this.playheadTime=e},getProgress:function(){return this.playheadTime},setBitrate:function(e){null==e&&(e=-1)},setBuffering:function(e){},setModeAd:function(){this.currentMode!=U.AD&&(0<this.playheadTime&&this.lastPlaybackEvent!=B.EVENT_STOP&&this.sendPause(),this.currentMode=U.AD,this.lastPlaybackEvent=null)},setModeMedia:function(){this.currentMode!=U.MEDIA&&(this.currentMode=U.MEDIA,this.currentRollType=null,this.lastPlaybackEvent=null)},setAdSource:function(e){},setAdTitle:function(e){},setMediaStream:function(e){},errorHandler:function(e,t){},errorAdHandler:function(e,t){},onChapterChange:function(e){null==e&&(e=0)},updateMediaTitle:function(e,t){},printStatus:function(){},setRollType:function(e){switch(e){case"MIDROLL":this.currentRollType=V.MIDROLL;break;case"POSTROLL":this.currentRollType=V.POSTROLL;break;case"PREROLL":this.currentRollType=V.PREROLL}},setAdCount:function(e){this.currentAdCount=e},setStopped:function(){this.lastPlaybackEvent=B.EVENT_STOP},setLiveEnrichiEnabled:function(e){},setLiveEnrichiPlayheadOffset:function(e,t){},registerLiveEnrichiClickEvent:function(e){},setAdManagerReference:function(e){this.adManager=e},setMediaDiffusionType:function(e){},onEngineTypeSwitch:function(e,t,n){},toggleYBListeners:function(e){},__class__:j};var H={__ename__:!0,__constructs__:["ON_CHAPTER_CHANGED","ERROR"],ON_CHAPTER_CHANGED:["ON_CHAPTER_CHANGED",0]};(H.ON_CHAPTER_CHANGED.__enum__=H).ERROR=["ERROR",1],H.ERROR.__enum__=H;var Y=function(e,t){if(s.call(this),this.catalog=e,this.context=t,this.initChapterManager(this.catalog.get_media().chapters),this.pauseDelay=1e3,this.analyticsArray=[],"false"!=this.context.metricsConsent&&0!=this.context.metricsConsent){var n=this.context.disableEstat,i=this.context.disableXiti;1!=n&&"true"!=n&&1!=n&&"1"!=n&&this.analyticsArray.push(new K(this.catalog,t)),1!=i&&"true"!=i&&1!=i&&"1"!=i&&this.analyticsArray.push(new J(this.catalog,t))}this.analyticsArray.push(new Z(this.catalog,t))};Y.__name__=!0,Y.main=function(){},Y.__super__=s,Y.prototype=n(s.prototype,{initChapterManager:function(e){null!=this.chapterManager&&(this.chapterManager.removeEventListener(ce.ON_CHAPTER_CHANGED,Ve(this,this.onChapterChange)),this.chapterManager=null),this.chapterManager=new ge(e),this.chapterManager.hasChapters&&this.chapterManager.addEventListener(ce.ON_CHAPTER_CHANGED,Ve(this,this.onChapterChange))},dmpProgress:function(e){if(!(this.currentMode!=U.MEDIA||e<0)){var t=0|e;t%2==0&&t!=this.lastDMPProgressTime&&(this.lastDMPProgressTime=t,Ee.dispatchEvent(ve.saveDMP,he.field(this.context,"container"),t))}},updateCatalog:function(e){for(var t=0,n=this.analyticsArray;t<n.length;){var i=n[t];++t,i.updateCatalog(e)}},sendPlay:function(){null!=this.pauseTimer&&this.reallySendPause();for(var e=0,t=this.analyticsArray;e<t.length;){var n=t[e];++e,n.sendPlay()}},sendPause:function(e){null==e&&(e=!1),e?this.reallySendPause():null==this.pauseTimer&&(this.pauseTimer=new Ie(this.pauseDelay),this.pauseTimer.run=Ve(this,this.reallySendPause))},reallySendPause:function(){null!=this.pauseTimer&&this.pauseTimer.stop(),this.pauseTimer=null;for(var e=0,t=this.analyticsArray;e<t.length;){var n=t[e];++e,n.sendPause()}},sendStop:function(){null!=this.pauseTimer&&(this.pauseTimer.stop(),this.pauseTimer=null);for(var e=0,t=this.analyticsArray;e<t.length;){var n=t[e];++e,n.sendStop(),n.setRollType(null)}},sendSeeking:function(e){for(var t=0,n=this.analyticsArray;t<n.length;){var i=n[t];++t,i.sendSeeking(e)}},sendSeeked:function(e){for(var t=0,n=this.analyticsArray;t<n.length;){var i=n[t];++t,i.sendSeeked(e),i.setProgress(e)}},setProgress:function(e){for(var t=0,n=this.analyticsArray;t<n.length;){var i=n[t];++t,i.setProgress(e)}this.chapterManager.setProgress(e),this.dmpProgress(e)},setBitrate:function(e){null==e&&(e=-1);for(var t=0,n=this.analyticsArray;t<n.length;)++t},setBuffering:function(e){for(var t=0,n=this.analyticsArray;t<n.length;)++t},setModeMedia:function(){this.currentMode=U.MEDIA;for(var e=0,t=this.analyticsArray;e<t.length;){var n=t[e];++e,n.setModeMedia()}},setModeAd:function(){this.currentMode=U.AD;for(var e=0,t=this.analyticsArray;e<t.length;){var n=t[e];++e,n.setModeAd()}},setAdSource:function(e){for(var t=0,n=this.analyticsArray;t<n.length;)++t},setMediaStream:function(e){for(var t=0,n=this.analyticsArray;t<n.length;)++t},setAdTitle:function(e){for(var t=0,n=this.analyticsArray;t<n.length;)++t},errorHandler:function(e,t){for(var n=0,i=this.analyticsArray;n<i.length;)++n;this.dispatchEvent(H.ERROR,t+" : "+e)},errorAdHandler:function(e,t){for(var n=0,i=this.analyticsArray;n<i.length;)++n},onChapterChange:function(e,t){this.dispatchEvent(H.ON_CHAPTER_CHANGED,this.catalog.get_media().chapters[t].title);for(var n=0,i=this.analyticsArray;n<i.length;){var r=i[n];++n,r.onChapterChange(t)}},printStatus:function(){for(var e=0,t=this.analyticsArray;e<t.length;){var n=t[e];++e,n.printStatus()}},setRollType:function(e){for(var t=0,n=this.analyticsArray;t<n.length;){var i=n[t];++t,i.setRollType(e)}},setAdCount:function(e){for(var t=0,n=this.analyticsArray;t<n.length;){var i=n[t];++t,i.setAdCount(e)}},setLiveEnrichiEnabled:function(e){for(var t=0,n=this.analyticsArray;t<n.length;){var i=n[t];++t,i.setLiveEnrichiEnabled(e)}},setLiveEnrichiPlayheadOffset:function(e,t){for(var n=0,i=this.analyticsArray;n<i.length;){var r=i[n];++n,r.setLiveEnrichiPlayheadOffset(e,t)}},registerLiveEnrichiClickEvent:function(e){for(var t=0,n=this.analyticsArray;t<n.length;){var i=n[t];++t,i.registerLiveEnrichiClickEvent(e)}},setAdManagerReference:function(e){for(var t=0,n=this.analyticsArray;t<n.length;){var i=n[t];++t,i.setAdManagerReference(e)}},setMediaDiffusionType:function(e){for(var t=0,n=this.analyticsArray;t<n.length;)++t},onEngineTypeSwitch:function(e,t,n){for(var i=0,r=this.analyticsArray;i<r.length;)++i},toggleYBListeners:function(e){for(var t=0,n=this.analyticsArray;t<n.length;)++t},__class__:Y});var q=e.EStat=function(e,t){j.call(this,e,t),this.context=t,this.catalog=e};q.__name__=!0,q.main=function(){},q.getInstance=function(e,t,n){null==q.instanceMap&&(q.instanceMap=new Ne);var i=q.instanceMap;if(!(null!=Xe[e]?i.existsReserved(e):i.h.hasOwnProperty(e))){var r=q.instanceMap,a=new K(t,n),s=r;null!=Xe[e]?s.setReserved(e,a):s.h[e]=a}var o=q.instanceMap;return null!=Xe[e]?o.getReserved(e):o.h[e]},q.__super__=j,q.prototype=n(j.prototype,{convertPlaylistIDs:function(){var e=this.catalog.get_mediametrie().chapters;if(null!=e&&0!=e.length){var t=new RegExp("\\[?PLAYLISTID\\]?","g".split("u").join("")),n=this.context.playlistID;null==n&&(n="null");for(var i=0;i<e.length;){var r=e[i];++i,r.estatTitle=r.estatTitle.replace(t,n)}}},constructGenre:function(){var e=this.context.device,t=this.context.environment,n=ye.osToPlatform(this.context.os);return"tablet"==e&&(e="tablette"),null==this.context.environment&&null!=this.context.environnement&&(t=this.context.environnement),null==t&&(t="browsing"),e+"_"+t+"_"+n+"_html5"},getEStatFriendlyEvent:function(e){switch(e[1]){case 0:return"play";case 1:return"pause";case 2:return"seek";case 3:return"stop"}},onChapterChange:function(e){null==e&&(e=0)},sendPlay:function(){},sendPause:function(){},sendSeeked:function(e){},sendStop:function(){},printStatus:function(){var e="\tESTAT";this.currentMode==U.AD&&(e="\tESTAT : MODE AD"),this.currentMode==U.MEDIA&&(e+=" : MODE MEDIA"),e+=" : "+fe.string(this.lastPlaybackEvent),be.trace(e,{fileName:"EStat.hx",lineNumber:115,className:"fr.tf1.etf1.core.module.analytics.mediametrie.EStat",methodName:"printStatus"})},__class__:q});var K=function(e,t){q.call(this,e,t),null!=this.catalog&&0!=he.fields(this.catalog.get_mediametrie()).length&&(this.estatTitle=this.catalog.get_mediametrie().chapters[0].estatTitle,null!=this.catalog.get_mediametrie().chapters&&q.prototype.convertPlaylistIDs.call(this),this.createConfig(),null==this.estatLibrary&&null!=this.estatJSConfig&&(this.estatLibrary=new eStatTag(this.estatJSConfig)))};K.__name__=!0,K.__super__=q,K.prototype=n(q.prototype,{createConfig:function(e){null==e&&(e=0);var t=b.VERSION,n=this.catalog.get_mediametrie().chapters[e],i="live"==this.catalog.get_media().type?"live":"replay",r=n.estatTitle,a=0|this.catalog.get_media().duration,s=q.prototype.constructGenre.call(this);this.estatJSConfig={serial:this.catalog.get_mediametrie().id,measure:"streaming",streaming:{broadcasting:i,diffusion:i,callbackPosition:Ve(this,this.getProgress),playerObj:{},playerName:"CoreHaxe",streamName:r,streamDuration:a,playerVersion:t,streamGenre:s},levels:{level_1:n.estatS1,level_2:n.estatS2,level_3:n.estatS3,level_4:n.estatS4,level_5:n.estatS5},newLevels:{newLevel_4:this.context.urlPage},mediaInfo:{mediaContentId:this.catalog.get_mediametrie().estatMsCid,mediaDiffMode:this.catalog.get_mediametrie().estatMsDm,mediaChannel:this.catalog.get_mediametrie().estatMsCh}}},sendEvent:function(e){null!=this.estatLibrary&&this.currentMode!=U.AD&&(this.estatLibrary.notifyPlayer(q.prototype.getEStatFriendlyEvent.call(this,e),q.prototype.getProgress.call(this)),this.lastPlaybackEvent=e)},updateCatalog:function(e){if(null!=this.estatLibrary)if(null!=e.get_mediametrie()){var t=e.get_mediametrie().chapters[0].estatTitle;this.estatTitle!=t&&(this.sendStop(),this.catalog.set_mediametrie(e.get_mediametrie()),this.estatTitle=t,this.createConfig(),this.estatLibrary.set({levels:this.estatJSConfig.levels,streaming:this.estatJSConfig.streaming}),this.sendPlay())}else this.sendStop()},onChapterChange:function(e){if(null==e&&(e=0),null!=this.estatLibrary){var t=this.catalog.get_mediametrie().chapters[e];if(null!=t){var n={level_1:t.estatS1,level_2:t.estatS2,level_3:t.estatS3,level_4:t.estatS4,level_5:t.estatS5},i=this.lastPlaybackEvent;this.sendStop(),this.estatJSConfig.levels=n,this.estatJSConfig.streaming.streamName=t.estatTitle,this.estatLibrary.set({levels:this.estatJSConfig.levels,streaming:this.estatJSConfig.streaming}),this.sendEvent(i),this.chapterChanged=!0}}},setProgress:function(e){q.prototype.setProgress.call(this,e)},setModeMedia:function(){q.prototype.setModeMedia.call(this)},sendPlay:function(){this.lastPlaybackEvent!=B.EVENT_PLAY&&this.sendEvent(B.EVENT_PLAY)},sendPause:function(){this.lastPlaybackEvent==B.EVENT_PLAY&&("live"!=this.catalog.get_media().type?this.sendEvent(B.EVENT_PAUSE):this.sendEvent(B.EVENT_STOP))},sendSeeking:function(e){var t=this.lastPlaybackEvent;this.sendPause(),this.lastPlaybackEvent=t},sendSeeked:function(e){if(this.chapterChanged)return this.chapterChanged=!1,void this.setProgress(e);this.lastPlaybackEvent==B.EVENT_PAUSE?(this.setProgress(e),this.sendEvent(B.EVENT_PAUSE)):this.lastPlaybackEvent==B.EVENT_PLAY&&(this.setProgress(e),this.sendEvent(B.EVENT_PLAY))},sendStop:function(){this.lastPlaybackEvent!=B.EVENT_STOP&&this.sendEvent(B.EVENT_STOP)},setLiveEnrichiEnabled:function(e){if(q.prototype.setLiveEnrichiEnabled.call(this,e),null!=this.estatJSConfig){var t,n,i=this.estatJSConfig;if(null==i)n=null;else n=!!i.__properties__&&(t=i.__properties__.get_streaming)?i[t]():i.streaming;var r=e?"timeshifting":"live";if(n.diffusion!=r){n.diffusion=r;var a,s=this.estatJSConfig;!!s.__properties__&&(a=s.__properties__.set_streaming)?s[a](n):s.streaming=n;var o=this.lastPlaybackEvent;this.sendPause(),this.sendEvent(B.EVENT_PAUSE),this.estatLibrary.set({streaming:this.estatJSConfig.streaming}),null!=o&&o!=B.EVENT_PLAY||this.sendPlay()}}},setLiveEnrichiPlayheadOffset:function(e,t){var n,i,r=this.estatJSConfig;null==r?i=null:i=!!r.__properties__&&(n=r.__properties__.get_mediaInfo)?r[n]():r.mediaInfo;var a=null;if((a=60<e-t?"TIMESHIFTING":"LIVE")!=i.mediaDiffMode){var s=this.lastPlaybackEvent;i.mediaDiffMode=a;var o,l=this.estatJSConfig;!!l.__properties__&&(o=l.__properties__.set_mediaInfo)?l[o](i):l.mediaInfo=i,this.sendStop(),this.estatLibrary.set({mediaInfo:this.estatJSConfig.mediaInfo}),s==B.EVENT_PAUSE?(this.sendPlay(),this.sendPause()):this.sendPlay()}},__class__:K});var G={__ename__:!0,__constructs__:["Starting","Ready","Waiting","Play","Pause","Buffering","Ended","Error"],Starting:["Starting",0]};(G.Starting.__enum__=G).Ready=["Ready",1],(G.Ready.__enum__=G).Waiting=["Waiting",2],(G.Waiting.__enum__=G).Play=["Play",3],(G.Play.__enum__=G).Pause=["Pause",4],(G.Pause.__enum__=G).Buffering=["Buffering",5],(G.Buffering.__enum__=G).Ended=["Ended",6],(G.Ended.__enum__=G).Error=["Error",7],G.Error.__enum__=G;var W={__ename__:!0,__constructs__:["AD","Media"],AD:["AD",0]};(W.AD.__enum__=W).Media=["Media",1],W.Media.__enum__=W;var z={__ename__:!0,__constructs__:["NA","START","SM"],NA:["NA",0]};(z.NA.__enum__=z).START=["START",1],(z.START.__enum__=z).SM=["SM",2],z.SM.__enum__=z;var X=function(){this.trackerObj=new Ne};X.__name__=!0,X.getInstance=function(e){e="_"+e,null==X.instanceMap&&(X.instanceMap=new Ne);var t=X.instanceMap;if(!(null!=Xe[e]?t.existsReserved(e):t.h.hasOwnProperty(e))){var n=new X,i=X.instanceMap;null!=Xe[e]?i.setReserved(e,n):i.h[e]=n}var r=X.instanceMap;return null!=Xe[e]?r.getReserved(e):r.h[e]},X.prototype={init:function(e,t){this.postObject={},this.postObject.video_id=e.media.id,this.postObject.title=e.media.title,this.postObject.duration=e.media.duration,this.postObject.owner=e.media.owner,this.postObject.client="html5",this.postObject.version=t},sendTracker:function(e,t,n,i,r){null!=this.postObject&&(this.postObject.player_state=fe.string(e),this.postObject.evType=fe.string(t),this.postObject.qos_event=fe.string(n),this.postObject.data01=i,this.postObject.data02=r,Ee.requestFile("//logs-qos.tf1.fr/logs",null,null,JSON.stringify(this.postObject)))},__class__:X};var Q=function(e,t){j.call(this,e,t),this.catalog=e,this.context=t,this.preCount=1,this.midCount=1,this.endCount=1};Q.__name__=!0,Q.main=function(){},Q.getInstance=function(e,t,n){null==Q.instanceMap&&(Q.instanceMap=new Ne);var i=Q.instanceMap;if(!(null!=Xe[e]?i.existsReserved(e):i.h.hasOwnProperty(e))){var r=Q.instanceMap,a=new J(t,n),s=r;null!=Xe[e]?s.setReserved(e,a):s.h[e]=a}var o=Q.instanceMap;return null!=Xe[e]?o.getReserved(e):o.h[e]},Q.__super__=j,Q.prototype=n(j.prototype,{getRMFriendlyAdCount:function(){if(null!=this.currentRollType){if(this.currentRollType==V.MIDROLL&&"live"==this.catalog.get_media().type.toLowerCase())return"pub_adswitch_"+this.midCount;switch(this.currentRollType[1]){case 0:return"pub_pre_"+this.preCount;case 1:return"pub_mid_"+this.midCount;case 2:return"pub_post_"+this.endCount}}return"null"},getRMFriendlyEventType:function(e){switch(e[1]){case 0:return"play";case 1:return"pause";case 2:return"move";case 3:return"stop"}},replaceContentType:function(e,t){null==e&&(e="");var n=this.context.playlistID;null==n&&(n="null");var i=new RegExp("\\[?PLAYLISTID\\]?","g".split("u").join(""));e=e.replace(i,n);var r=new RegExp("\\[?CONTENTTYPE\\]?","g".split("u").join(""));return e.replace(r,t)},printStatus:function(){var e="\tRICHMEDIA";this.currentMode==U.AD&&0!=this.currentAdCount?e="\tRICHMEDIA : MODE AD : "+this.getRMFriendlyAdCount():this.currentMode==U.MEDIA&&(e="\tRICHMEDIA : MODE MEDIA : "+this.catalog.get_richmedia().mediaLabel.contentType),e+=" : "+fe.string(this.lastPlaybackEvent),be.trace(e,{fileName:"RichMedia.hx",lineNumber:106,className:"fr.tf1.etf1.core.module.analytics.richmedia.RichMedia",methodName:"printStatus"})},sendPlay:function(){},sendPause:function(){},sendSeeked:function(e){},sendStop:function(){},__class__:Q});var J=function(e,t){if(Q.call(this,e,t),null!=this.catalog.get_richmedia()){this.currentRichMediaLabel=this.catalog.get_richmedia().mediaLabel;null!=window.ATInternet&&null!=window.ATInternet.Tracker||(function(){var e,o={site:553584,log:"logc169",logSSL:"logs1169",domain:"xiti.com",secure:!0,pixelPath:"/hit.xiti",disableCookie:!1,cookieSecure:!1,cookieDomain:"",preview:!1,plgs:["Campaigns","Clicks","ClientSideUserId","ContextVariables","IdentifiedVisitor","MvTesting","Page","RichMedia"],lazyLoadingPath:"",documentLevel:"document",redirect:!1,activateCallbacks:!0,medium:"",ignoreEmptyChapterValue:!1,base64Storage:!1};(e=window).ATInternet=e.ATInternet||{},e.ATInternet.Tracker=e.ATInternet.Tracker||{},e.ATInternet.Tracker.Plugins=e.ATInternet.Tracker.Plugins||{},window.ATInternet.Utils=new function(){var s=this;s.cloneSimpleObject=function e(t,n){if("object"!=typeof t||null===t||t instanceof Date)return t;var i,r=new t.constructor||t.constructor();for(i in t)t.hasOwnProperty(i)&&(void 0===i||n&&void 0===t[i]||(r[i]=e(t[i])));return r},s.jsonSerialize=function(e){return"undefined"!=typeof JSON&&JSON.stringify?JSON.stringify(e):function e(t){var n=typeof t;if("object"!==n||null===t)return"string"===n&&(t='"'+t+'"'),String(t);var i,r,a=[],s=t&&t.constructor===Array;for(i in t)t.hasOwnProperty(i)&&"function"!=(n=typeof(r=t[i]))&&"undefined"!==n&&("string"===n?r='"'+r.replace(/[^\\]"/g,'\\"')+'"':"object"===n&&null!==r&&(r=e(r)),a.push((s?"":'"'+i+'":')+String(r)));return(s?"[":"{")+String(a)+(s?"]":"}")}(e)},s.jsonParse=function(e){try{return"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):null===e?e:"string"==typeof e&&new Function("return "+e)()}catch(e){return null}},s.arrayIndexOf=function(e,t){return Array.indexOf?e.indexOf(t):function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(1<arguments.length&&((i=Number(arguments[1]))!=i?i=0:0!=i&&1/0!=i&&-1/0!=i&&(i=(0<i||-1)*Math.floor(Math.abs(i)))),n<=i)return-1;for(i=0<=i?i:Math.max(n-Math.abs(i),0);i<n;i++)if(i in t&&t[i]===e)return i;return-1}.apply(e,[t])},s.genGuid=function(e){var t,n=new Date,i=function(e){return(e-=100*Math.floor(e/100))<10?"0"+e:e};return i(n.getHours())+""+i(n.getMinutes())+i(n.getSeconds())+(t=e-6,Math.floor(Math.random()*Math.pow(10,t)))},s.getObjectKeys=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n},s.completeFstLevelObj=function(e,t,n){if(e){if(t)for(var i in t)!t.hasOwnProperty(i)||e[i]&&!n||(e[i]=t[i])}else e=t;return e},s.isPreview=function(){return window.navigator&&"preview"===window.navigator.loadPurpose},s.isPrerender=function(t){var n,e=!1,i=["webkit","ms"];if("prerender"===document.visibilityState)n="visibilitychange";else for(var r=0;r<i.length;r++)"prerender"===document[i[r]+"VisibilityState"]&&(n=i[r]+"visibilitychange");if(void 0!==n){var a=function(e){t(e),s.removeEvtListener(document,n,a)};s.addEvtListener(document,n,a),e=!0}return e};var t=s.addEvtListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)};s.removeEvtListener=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},s.loadScript=function(e,i){var r;i=i||function(){},(r=document.createElement("script")).type="text/javascript",r.src=e.url,r.async=!1,r.defer=!1,r.onload=r.onreadystatechange=function(e){("load"===(e=e||window.event).type||/loaded|complete/.test(r.readyState)&&(!document.documentMode||document.documentMode<9))&&(r.onload=r.onreadystatechange=r.onerror=null,i(null,e))},r.onerror=function(e,t,n){r.onload=r.onreadystatechange=r.onerror=null,i({msg:"script not loaded",event:e})};var t=document.head||document.getElementsByTagName("head")[0];t.insertBefore(r,t.lastChild)},s.hashcode=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t=(t<<5)-t+e.charCodeAt(n))&t;return t},s.setLocation=function(e){var t=e.location;e=window[e.target]||window,t&&(e.location.href=t)},s.dispatchCallbackEvent=function(e){var t=document.createEvent("Event");t.initEvent("ATCallbackEvent",!0,!0),t.name=e,document.dispatchEvent(t)},s.addCallbackEvent=function(e){document.createEvent("Event").initEvent("ATCallbackEvent",!0,!0),t(document,"ATCallbackEvent",e)}};var l=function(c){var i=this,d=function(e,t,n){return{param:e="&"+e+"=",paramSize:e.length,str:t,strSize:t.length,truncate:n}},h=function(e,t){var n,i="",r=0,a=!0;for(n in e)if(e.hasOwnProperty(n)){var s=e[n];if(s){a=!1;var o=t-r;if(!(s.strSize+s.paramSize<o)){s.truncate?(i+=s.param+s.str.substr(0,o),e[n].str=s.str.substr(o,s.strSize-1),e[n].strSize=e[n].str.length):s.strSize+s.paramSize>t&&(c.emit("Tracker:Hit:Build:Error",{lvl:"ERROR",msg:'Too long parameter "'+s.param+'"',details:{value:s.str}}),e[n].str=e[n].str.substr(0,t-s.paramSize-1),e[n].strSize=e[n].str.length);break}i+=s.param+s.str,r+=s.strSize+s.paramSize,a=!(e[n]=void 0)}else a=!0}return[i,a?null:e]},f=["ati","atc","pdtl","stc","dz"],n=function(t,n,a){var e,i,r,s,o,l,u;e=function(e,r){e?a&&a(e):function(e,t,n){var i,r=function(e){if(e==={})return"";var t,n,i,r,a=[],s=0,o=!(t={}),l=void 0;for(r in e)if(e.hasOwnProperty(r)){var u=e[r].value;"function"==typeof u&&(u=u()),u=u instanceof Array?u.join(e[r].options.separator||","):"object"==typeof u?window.ATInternet.Utils.jsonSerialize(u):void 0===u?"undefined":u.toString(),e[r].options.encode&&(u=encodeURIComponent(u));var c=d(r,u,-1<window.ATInternet.Utils.arrayIndexOf(f,r));if(s+=c.paramSize+c.strSize,e[r].options.last)1490<u.length&&u.substr(0,1490),n=r,i=c;else if(t[r]=c,1500<t[r].paramSize+t[r].strSize&&!t[r].truncate){o=!0,l=r;break}}if(n&&(t[n]=i),e=(t=[t,s,o,l])[0],t[2])(e=e[t=t[3]]).str=e.str.substr(0,1450),e.strSize=1450,(s={}).mherr=d("mherr","1",!1),s[t]=e,a.push(h(s,1500)[0]);else if(null===(t=h(e,1500))[1])a=t[0];else for(a.push(t[0]);null!==t[1];)t=h(e,1500),a.push(t[0]);return a},a="";if(c.buffer.presentInFilters(t,"hitType")||(t=c.buffer.addInFilters(t,"hitType",["page"])),t=c.buffer.addInFilters(t,"hitType",["all"]),e){for(i in t=c.buffer.addInFilters(t,"permanent",!0),t=c.buffer.get(t,!0),e)e.hasOwnProperty(i)&&(t[i]={value:e[i],options:{}});a=r(t)}else for(i in a=r(t=c.buffer.get(t,!0)),t)t.hasOwnProperty(i)&&!t[i].options.permanent&&c.buffer.del(i);n&&n(a)}(t,n,function(e){var t=[],n=window.ATInternet.Utils.genGuid(13);if(e instanceof Array)if(1===e.length)t.push(r+"&mh=1-2-"+n+e[0]);else for(var i=1;i<=e.length;i++)t.push(r+"&mh="+i+"-"+e.length+"-"+n+e[i-1]);else t.push(r+e);a&&a(null,t)})},i=c.getConfig("secure"),r="https:"===document.location.protocol,r=i||r?c.getConfig("logSSL"):c.getConfig("log"),s=c.getConfig("baseURL"),o=c.getConfig("domain"),l=c.getConfig("pixelPath"),u=c.getConfig("site"),(s||r&&o&&l)&&u?e&&e(null,(s||(i?"https://":"//")+r+"."+o+l)+"?s="+u):e&&e({message:"Config error"})};i.send=function(e,t){n(e,t,function(e,t){if(e)c.emit("Tracker:Hit:Build:Error",{lvl:"ERROR",msg:e.message,details:{hits:t}});else for(var n=0;n<t.length;n++)i.sendUrl(t[n])})},i.sendUrl=function(e){var t=function(t,n){return function(e){c.emit(t,{lvl:-1===t.indexOf("Error")?"INFO":"ERROR",details:{hit:n,event:e}})}},n=new Image;n.onload=t("Tracker:Hit:Sent:Ok",e),n.onerror=t("Tracker:Hit:Sent:Error",e),n.src=e}},u=function(){function s(e,t,n){for(var i=[],r=0;r<e.length;r++)e[r].callback(t,n),e[r].singleUse||i.push(e[r]);return i}var i={};this.on=function(e,t,n){return n=n||!1,function e(t,n,i,r){var a=t.shift();return"*"===a?(n["*"]=n["*"]||[],n["*"].push({callback:i,singleUse:r}),n["*"].length-1):0===t.length?e([a,"*"],n,i,r):(n["*"]=n["*"]||[],n[a]=n[a]||{},e(t,n[a],i,r))}(e.split(":"),i,t,n)},this.emit=function(e,t){i["*"]&&(i["*"]=s(i["*"],e,t)),function e(t,n,i,r){var a=n.shift();"*"!==a&&(0===n.length?e(t,[a,"*"],i,r):i[a]&&(i[a]["*"]=s(i[a]["*"],t,r),e(t,n,i[a],r)))}(e,e.split(":"),i,t)}},c=function(o){var l={},n={},i=0,u={},c=0,t=this.load=function(e,t){return"function"==typeof t?void 0===o.getConfig.plgAllowed||0===o.getConfig.plgAllowed.length||-1<o.getConfig.plgAllowed.indexOf(e)?(l[e]=new t(o),n[e]&&l[e]&&(n[e]=!1,i--,l[e+"_ll"]&&r(e+"_ll"),0===i&&o.emit("Tracker:Plugin:Lazyload:File:Complete",{lvl:"INFO",msg:"LazyLoading triggers are finished"})),o.emit("Tracker:Plugin:Load:"+e+":Ok",{lvl:"INFO"})):o.emit("Tracker:Plugin:Load:"+e+":Error",{lvl:"ERROR",msg:"Plugin not allowed",details:{}}):o.emit("Tracker:Plugin:Load:"+e+":Error",{lvl:"ERROR",msg:"not a function",details:{obj:t}}),o},r=this.unload=function(e){return l[e]?(l[e]=void 0,o.emit("Tracker:Plugin:Unload:"+e+":Ok",{lvl:"INFO"})):o.emit("Tracker:Plugin:Unload:"+e+":Error",{lvl:"ERROR",msg:"not a known plugin"}),o},d=this.isLazyloading=function(e){return e?!0===n[e]:0!==i},h=function(e){n[e]=!0,i++,ATInternet.Utils.loadScript({url:o.getConfig("lazyLoadingPath")+e+".js"})},f=function(e){return!l[e]&&!d(e)&&!!l[e+"_ll"]};this.isExecWaitingLazyloading=function(){return 0!==c},o.exec=this.exec=function(e,t,n,i){var r=null,a=function(e,t,n,i){t=t.split("."),l[e]&&l[e][t[0]]&&(r=1<t.length&&l[e][t[0]][t[1]]?l[e][t[0]][t[1]].apply(l[e],n):l[e][t[0]].apply(l[e],n)),i&&i(r)},s=function(t,e,n,i){var r;u[r=t]?u[r]++:u[r]=1,c++,o.onTrigger("Tracker:Plugin:Load:"+t+":Ok",function(){a(t,e,n,function(e){u[t]--,0===--c&&o.emit("Tracker:Plugin:Lazyload:Exec:Complete",{lvl:"INFO",msg:"All exec waiting for lazyloading are done"}),i&&i(e)})},!0)};f(e)?(s(e,t,n,i),h(e)):d(e)?s(e,t,n,i):a(e,t,n,i)},this.waitForDependencies=function(e,r){var t,a=function(e){for(var t={mcount:0,plugins:{}},n=0;n<e.length;n++)l.hasOwnProperty(e[n])||(t.mcount++,t.plugins[e[n]]=!0);return t}(e);if(0===a.mcount)o.emit("Tracker:Plugin:Dependencies:Loaded",{lvl:"INFO",details:{dependencies:e}}),r();else for(var n in a.plugins)a.plugins.hasOwnProperty(n)&&(o.emit("Tracker:Plugin:Dependencies:Error",{lvl:"WARNING",msg:"Missing plugin "+n}),o.onTrigger("Tracker:Plugin:Load:"+n,function(e,t){var n=e.split(":"),i=n[3];"Ok"===n[4]&&(a.plugins[i]=!1,0==--a.mcount&&r())},!0),f(t=n)&&h(t))},this.init=function(){for(var e in ATInternet.Tracker.pluginProtos)ATInternet.Tracker.pluginProtos.hasOwnProperty(e)&&t(e,ATInternet.Tracker.pluginProtos[e])}},d=function(n){var r={};this.init=function(){if(n.getConfig("activateCallbacks")){var i=n.getConfig("callbacks");!function(){if(void 0!==i&&i.include instanceof Array)for(var e=0;e<i.include.length;e++)ATInternet.Callbacks&&ATInternet.Callbacks.hasOwnProperty(i.include[e])&&(r[i.include[e]]={function:ATInternet.Callbacks[i.include[e]]},ATInternet.Tracker.callbackProtos[i.include[e]]||(ATInternet.Tracker.callbackProtos[i.include[e]]=r[i.include[e]]));else for(e in ATInternet.Callbacks)ATInternet.Callbacks.hasOwnProperty(e)&&(r[e]={function:ATInternet.Callbacks[e]},ATInternet.Tracker.callbackProtos[e]||(ATInternet.Tracker.callbackProtos[e]=r[e]));if(void 0!==i&&i.exclude instanceof Array)for(e=0;e<i.exclude.length;e++)r[i.exclude[e]]&&(r[i.exclude[e]]=void 0);for(var t in r)r.hasOwnProperty(t)&&r[t]&&a(t,r[t].function)}(),ATInternet.Utils.addCallbackEvent(function(e){if(e.name){var t=!0;if(void 0!==i&&(i.include instanceof Array&&-1===ATInternet.Utils.arrayIndexOf(i.include,e.name)&&(t=!1),i.exclude instanceof Array&&-1!==ATInternet.Utils.arrayIndexOf(i.exclude,e.name)&&(t=!1)),ATInternet.Callbacks&&ATInternet.Callbacks.hasOwnProperty(e.name)){var n={};n[e.name]={function:ATInternet.Callbacks[e.name]},t&&a(e.name,n[e.name].function),ATInternet.Tracker.callbackProtos[e.name]||(ATInternet.Tracker.callbackProtos[e.name]=n[e.name])}}})}};var a=this.load=function(e,t){return"function"==typeof t?(new t(n),n.emit("Tracker:Callback:Load:"+e+":Ok",{lvl:"INFO",details:{obj:t}})):n.emit("Tracker:Callback:Load:"+e+":Error",{lvl:"ERROR",msg:"not a function",details:{obj:t}}),n}},h=function(e){var u={};this.set=function(e,t,n){(n=n||{}).hitType=n.hitType||["page"],u[e]={value:t,options:n}};var a=function(e,t,n){return(e=window.ATInternet.Utils.cloneSimpleObject(e[t]))&&!n?e.value:e};this.get=function(e,t){var n={};if("string"==typeof e)n=a(u,e,t);else for(var i=function e(t,n){if(!(t&&n instanceof Array&&t instanceof Array))return[];if(0===t.length)return n;var i,r=t[0],a=[],s=window.ATInternet.Utils.cloneSimpleObject(t);s.shift();for(var o=0;o<n.length;o++)if("object"!=typeof r[1])u[n[o]]&&u[n[o]].options[r[0]]===r[1]&&a.push(n[o]);else{i=r[1].length;for(var l=0;l<i;l++)if(u[n[o]]&&u[n[o]].options[r[0]]instanceof Array&&0<=window.ATInternet.Utils.arrayIndexOf(u[n[o]].options[r[0]],r[1][l])){a.push(n[o]);break}}return e(s,a)}(e,window.ATInternet.Utils.getObjectKeys(u)),r=0;r<i.length;r++)n[i[r]]=a(u,i[r],t);return n},this.presentInFilters=function e(t,n){return!(!t||0===t.length)&&(t[0][0]===n||e(t.slice(1),n))},this.addInFilters=function e(t,n,i,r){if(!t||0===t.length)return r?[]:[[n,i]];var a=t[0][0],s=t[0][1];return a===n&&(s instanceof Array&&!(-1<window.ATInternet.Utils.arrayIndexOf(s,i[0]))&&s.push(i[0]),r=!0),[[a,s]].concat(e(t.slice(1),n,i,r))},this.del=function(e){u[e]=void 0},this.clear=function(){u={}}};ATInternet.Tracker.Tag=function(e,t,n){t=t||{};var r=this;r.version="5.6.0";var i=window.ATInternet.Utils.cloneSimpleObject(t);r.triggers=new u(r),r.emit=r.triggers.emit,r.onTrigger=r.triggers.on;var a,s=window.ATInternet.Utils.cloneSimpleObject(o)||{};for(a in e)e.hasOwnProperty(a)&&(s[a]=e[a]);r.getConfig=function(e){return s[e]},r.setConfig=function(e,t,n){void 0!==s[e]&&n||(r.emit("Tracker:Config:Set:"+e,{lvl:"INFO",details:{bef:s[e],aft:t}}),s[e]=t)},r.configPlugin=function(e,t,n){for(var i in s[e]=s[e]||{},t)t.hasOwnProperty(i)&&void 0===s[e][i]&&(s[e][i]=t[i]);return n&&(n(s[e]),r.onTrigger("Tracker:Config:Set:"+e,function(e,t){n(t.details.aft)})),s[e]},r.getContext=function(e){return i[e]},r.setContext=function(e,t){r.emit("Tracker:Context:Set:"+e,{lvl:"INFO",details:{bef:i[e],aft:t}}),i[e]=t},r.delContext=function(e,t){if(r.emit("Tracker:Context:Deleted:"+e+":"+t,{lvl:"INFO",details:{key1:e,key2:t}}),e)i.hasOwnProperty(e)&&(t?i[e]&&i[e].hasOwnProperty(t)&&(i[e][t]=void 0):i[e]=void 0);else if(t)for(var n in i)i.hasOwnProperty(n)&&i[n]&&i[n].hasOwnProperty(t)&&(i[n][t]=void 0)},r.plugins=new c(r),r.buffer=new h(r),r.setParam=r.buffer.set,r.getParams=function(e){return r.buffer.get(e,!1)},r.getParam=r.buffer.get,r.delParam=r.buffer.del,r.builder=new l(r),r.sendHit=r.builder.send,r.sendUrl=r.builder.sendUrl,r.callbacks=new d(r),r.setParam("ts",function(){return(new Date).getTime()},{permanent:!0,hitType:["all"]}),r.getConfig("disableCookie")&&r.setParam("idclient","xxxxxx-NO",{permanent:!0,hitType:["all"]}),r.getConfig("medium")&&r.setParam("medium",r.getConfig("medium"),{permanent:!0,hitType:["all"]}),r.plugins.init(),r.callbacks.init(),ATInternet.Tracker.instances.push(r),r.emit("Tracker:Ready",{lvl:"INFO",msg:"Tracker initialized",details:{tracker:r,args:{config:e,context:t,callback:n}}}),n&&n(r)},ATInternet.Tracker.instances=[],ATInternet.Tracker.pluginProtos={},ATInternet.Tracker.addPlugin=function(e,t){if(t=t||ATInternet.Tracker.Plugins[e],!ATInternet.Tracker.pluginProtos[e]){ATInternet.Tracker.pluginProtos[e]=t;for(var n=0;n<ATInternet.Tracker.instances.length;n++)ATInternet.Tracker.instances[n].plugins.load(e,t)}},ATInternet.Tracker.delPlugin=function(e){if(ATInternet.Tracker.pluginProtos[e]){ATInternet.Tracker.pluginProtos[e]=void 0;for(var t=0;t<ATInternet.Tracker.instances.length;t++)ATInternet.Tracker.instances[t].plugins.unload(e)}},ATInternet.Tracker.callbackProtos={}}.call(window),function(){var e={lifetime:30,lastPersistence:!0,listEventsForExec:[],domainAttribution:!0,info:!0},t=30,I=30;window.ATInternet.Tracker.Plugins.Campaigns=function(r){r.setConfig("visitLifetime",t,!0),r.setConfig("redirectionLifetime",I,!0);var i,a,s={};r.configPlugin("Campaigns",e,function(e){s=e});var o,l,u,c,d,h,f,p,_,g,m,v,E,n,y=function(e,t,n){var i=null;return r.plugins.exec(e,t,n,function(e){i=e}),i},T=function(e,t){return y("Cookies",e,t)},A=function(e,t){return y("Utils",e,t)},S=function(e,t){var n=T(a,[[e]]);return null!==n?!("object"!=typeof n||n instanceof Array):(T(i,[e,{},t]),!0)},R=function(e,t){var n=r.getContext("campaigns")||{};n[e]=t,r.setContext("campaigns",n)},b=function(e){i="set"+(s.domainAttribution?"":"Private"),a="get"+(s.domainAttribution?"":"Private"),o=T(a,[["atredir","gopc"]]),l=T(a,[["atredir","gopc_err"]]),u=T(a,[["atredir","camp"]]),T("del",[["atredir","gopc"]]),T("del",[["atredir","gopc_err"]]),T("del",[["atredir","camp"]]),c=T(a,[["atsession","histo_camp"]]),d=T(a,[["atreman","camp"]]),h=T(a,[["atreman","date"]]);var t,n=A("getLocation",[]);(f=A("getQueryStringValue",["xtor",n]),p=A("getQueryStringValue",["xtdt",n]),_=A("getQueryStringValue",["xts",n]),g=r.getContext("forcedCampaign"),m=!!r.getConfig("redirect"),(v=!!(f&&p&&_))&&(n=(new Date).getTime()/6e4,E=!m&&_!==r.getConfig("site")||n-p<0||n-p>=r.getConfig("visitLifetime")),n=g||u||f,m&&n&&S("atredir",{path:"/",end:r.getConfig("redirectionLifetime")})&&(T(i,[["atredir","camp"],n]),T(i,[["atredir","gopc"],!g&&(u?o:!!v)]),T(i,[["atredir","gopc_err"],!g&&(u?l:!!E)])),!m&&d&&(R("xtor",d),n=(new Date).getTime()/36e5,n=Math.floor(n-h),R("roinbh",0<=n?n:0)),m||(n=void 0,n=u?o?g||n:g||u:v?g||n:g||f||n,c&&c instanceof Array&&-1<c.indexOf(n)&&(n=void 0),n&&R("xto",n)),m||g)||(u?l&&(t=u):E&&(t=f),t&&R("pgt",t));m||!(t=u?g||u:g||f||void 0)||!g&&!u&&v&&E||!g&&u&&o&&l||((!c||c instanceof Array&&c.indexOf(t)<0)&&S("atsession",{path:"/",session:60*r.getConfig("visitLifetime")})&&T(i,[["atsession","histo_camp"],c&&c.push(t)?c:[t]]),d&&!s.lastPersistence||!S("atreman",{path:"/",session:86400*s.lifetime})||(T(i,[["atreman","camp"],t]),T(i,[["atreman","date"],(new Date).getTime()/36e5]))),r.emit("Campaigns:"+e,{lvl:"INFO"})};n=["Cookies","Utils"],-1===ATInternet.Utils.arrayIndexOf(r.getConfig("plgs"),"BackwardCompat")?r.plugins.waitForDependencies(n,function(){b("process2:done")}):r.onTrigger("BackCampaigns:process2:done",function(e,t){r.plugins.waitForDependencies(n,function(){b("process1:done")})},!0)},window.ATInternet.Tracker.addPlugin("Campaigns")}.call(window),function(){window.ATInternet.Tracker.Plugins.Clicks=function(i){var r=function(e){var t="";switch(e){case"exit":t="S";break;case"download":t="T";break;case"action":t="A";break;case"navigation":t="N"}return t},a=function(e){var t=e.name;return i.exec("Utils","manageChapters",[e,"chapter",3],function(e){t=e+(t||"")}),t},s=function(e){var t={p:a(e),s2:e.level2||"",click:r(e.type)||""},n=i.getContext("page")||{};t.pclick=a(n),t.s2click=n.level2||"",e.customObject&&i.exec("Utils","customObjectToString",[e.customObject],function(e){t.stc=e}),i.sendHit(t,[["hitType",["click"]]])};i.click={},i.clickListener=this.clickListener={},i.click.send=this.send=function(e){var t=!0;return i.plugins.exec("TechClicks","manageClick",[e.elem],function(e){t=e}),s(e),t},i.clickListener.send=this.clickListener.send=function(t){var n;t.elem&&(i.plugins.exec("TechClicks","isFormSubmit",[t.elem],function(e){n=e?"submit":"click"}),ATInternet.Utils.addEvtListener(t.elem,n,function(e){i.plugins.exec("TechClicks","manageClick",[t.elem,e]),s(t)}))},i.click.set=this.set=function(e){i.dispatchSubscribe("click"),i.setContext("click",{name:a(e),level2:e.level2||"",customObject:e.customObject}),i.setParam("click",r(e.type)||"",{hitType:["click"]})},i.click.onDispatch=this.onDispatch=function(){var e={hitType:["click"]};i.setParam("p",i.getContext("click").name,e),i.setParam("s2",i.getContext("click").level2,e);var t=i.getContext("click").customObject;t&&i.setParam("stc",t,{hitType:["click"],encode:!0}),t=i.getContext("page")||{},i.setParam("pclick",a(t),e),i.setParam("s2click",t.level2||"",e),i.sendHit(null,[["hitType",["click"]]]),i.setContext("click",void 0)}},window.ATInternet.Tracker.addPlugin("Clicks")}.call(window),function(){var e={clientSideMode:"required",userIdCookieDuration:397,userIdExpirationMode:"fixed",info:!0};window.ATInternet.Tracker.Plugins.ClientSideUserId=function(i){var r={},n=void 0,a=null;i.configPlugin("ClientSideUserId",e,function(e){r=e});var s=function(e,t){i.setParam("idclient",e,{permanent:!0,hitType:["all"]}),o(e,t)},o=function(t,n){if("relative"===r.userIdExpirationMode||"fixed"===r.userIdExpirationMode&&null===a){var e=new Date;e.setTime(e.getTime()+864e5*r.userIdCookieDuration),i.exec("Cookies","set",["atuserid",t,{end:e,path:"/"}]),i.exec("Cookies","get",["atuserid",!0],function(e){n||t===e||i.setParam("idclient",t+"-NO",{permanent:!0,hitType:["all"]})})}},l=function(){var e=!1;if("required"===r.clientSideMode){var t=navigator.userAgent;(/Safari/.test(t)&&!/Chrome/.test(t)||/iPhone|iPod|iPad/.test(t))&&(e=!0)}else"always"===r.clientSideMode&&(e=!0);return e};i.plugins.waitForDependencies(["Cookies"],function(){n=i.getContext("userIdentifier"),i.exec("Cookies","get",["atuserid"],function(e){a=e});var e="";if(l()){var t=!1;void 0!==n?(e=n,t=!0):e=null!==a?a:ATInternet.Utils.genGuid(13),s(e,t)}i.emit("ClientSideUserId:Ready",{lvl:"INFO",details:{clientSideMode:r.clientSideMode,userIdFromContext:n,userIdFromCookie:a,userId:e}})}),i.clientSideUserId={},i.clientSideUserId.set=function(e){l()&&s(e,!0)}},window.ATInternet.Tracker.addPlugin("ClientSideUserId")}.call(window),function(){var e={domainAttribution:!0,info:!0},t=30;window.ATInternet.Tracker.Plugins.ContextVariables=function(s){var r="",a=null,o="",l="",u={};s.configPlugin("ContextVariables",e,function(e){u=e}),s.setConfig("redirectionLifetime",t,!0);var c=function(e,t){return n="Utils",i=e,r=t,a=null,s.plugins.exec(n,i,r,function(e){a=e}),a;var n,i,r,a},d=function(e,t){var n=null;return s.plugins.exec("Cookies",e,t,function(e){n=e}),n};s.plugins.waitForDependencies(["Cookies","Utils"],function(){o="set"+(u.domainAttribution?"":"Private"),l="get"+(u.domainAttribution?"":"Private");var e,t=c("getLocation",[]);if(r=c("getQueryStringValue",["xtref",t]),s.getConfig("redirect")){var n;t=c("getDocumentLevel",[]);if(n=t=r||t.referrer||"acc_dir"){n={path:"/",end:s.getConfig("redirectionLifetime")};var i=d(l,[["atredir"]]);n=null!==i?!("object"!=typeof i||i instanceof Array):(d(o,["atredir",{},n]),!0)}n&&d(o,[["atredir","ref"],t])}else{a=d(l,[["atredir","ref"]]),d("del",[["atredir","ref"]]),s.setParam("vtag",s.version,{permanent:!0,hitType:["all"]}),s.setParam("ptag","js",{permanent:!0,hitType:["all"]}),t="";try{t+=window.screen.width+"x"+window.screen.height+"x"+window.screen.pixelDepth+"x"+window.screen.colorDepth}catch(t){}s.setParam("r",t,{permanent:!0,hitType:["all"]}),t="",window.innerWidth?t+=window.innerWidth+"x"+window.innerHeight:document.body.offsetWidth&&(t+=document.body.offsetWidth+"x"+document.body.offsetHeight),s.setParam("re",t,{permanent:!0,hitType:["all"]}),s.setParam("hl",function(){var e=new Date;return e.getHours()+"x"+e.getMinutes()+"x"+e.getSeconds()},{permanent:!0,hitType:["all"]}),s.setParam("lng",navigator.language||navigator.userLanguage,{permanent:!0,hitType:["all"]}),t=window.ATInternet.Utils.genGuid(13),s.setParam("idp",t,{permanent:!0,hitType:["page","clickzone"]}),s.setParam("jv",navigator.javaEnabled()?"1":"0",{hitType:["page"]}),t=c("getDocumentLevel",[]),s.setParam("ref",(e=t,("acc_dir"===r?"":r||("acc_dir"===a?"":a||e.referrer)).replace(/[<>]/g,"").substring(0,1600).replace(/&/g,"$")),{permanent:!0,last:!0,hitType:["page"]})}s.emit("ContextVariables:Ready",{lvl:"INFO"})})},window.ATInternet.Tracker.addPlugin("ContextVariables")}.call(window),function(){window.ATInternet.Tracker.Plugins.Cookies=function(s){var a={},u={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,i,r,a,s,o="",l=0;for(e=u._utf8_encode(e);l<e.length;)r=(t=e.charCodeAt(l++))>>2,t=(3&t)<<4|(n=e.charCodeAt(l++))>>4,a=(15&n)<<2|(i=e.charCodeAt(l++))>>6,s=63&i,isNaN(n)?a=s=64:isNaN(i)&&(s=64),o=o+this._keyStr.charAt(r)+this._keyStr.charAt(t)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return o},decode:function(e){var t,n,i,r,a,s="",o=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");o<e.length;)t=(t=this._keyStr.indexOf(e.charAt(o++)))<<2|(n=this._keyStr.indexOf(e.charAt(o++)))>>4,n=(15&n)<<4|(r=this._keyStr.indexOf(e.charAt(o++)))>>2,i=(3&r)<<6|(a=this._keyStr.indexOf(e.charAt(o++))),s+=String.fromCharCode(t),64!=r&&(s+=String.fromCharCode(n)),64!=a&&(s+=String.fromCharCode(i));return u._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):(127<i&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t,n,i,r="",a=0;a<e.length;)(t=e.charCodeAt(a))<128?(r+=String.fromCharCode(t),a++):191<t&&t<224?(n=e.charCodeAt(a+1),r+=String.fromCharCode((31&t)<<6|63&n),a+=2):(n=e.charCodeAt(a+1),i=e.charCodeAt(a+2),r+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&i),a+=3);return r}},n=this.getCookie=function(e){return!s.getConfig("disableCookie")&&e&&"string"==typeof e&&(e=RegExp("(?:^| )"+e+"=([^;]+)").exec(document.cookie)||null)?(e=e[1],e=s.getConfig("base64Storage")?u.decode(e):decodeURIComponent(e)):null},i=this.setCookie=function(e,t,n){if(s.getConfig("disableCookie")||!e||"string"!=typeof e||"string"!=typeof t)return null;var i=s.getConfig("cookieDomain");if(t=(e+="=")+(t=s.getConfig("base64Storage")?u.encode(t):encodeURIComponent(t)),e=!1,n){e=n.secure;var r=n.end,a=n.domain;n=n.path,t=(t+=r?"function"==typeof r.toGMTString?";expires="+r.toGMTString():"number"==typeof r?";max-age="+r.toString():"":"")+(i||a?";domain="+(a||i):"")+(n&&"string"==typeof n?";path="+n:"")}return t+=(i=s.getConfig("cookieSecure")||e)&&"boolean"==typeof i?";secure":"",document.cookie=t,!0},o=function(e){var t=null;return(e=n(e))&&(t=ATInternet.Utils.jsonParse(e)),t},l=function(e){return i(e.name,ATInternet.Utils.jsonSerialize(e),e.options)?e:null},r=function(e,t,n){var i=null;return!n&&a[e]?i=a[e]:(i=o(e))&&(i.options.session&&l(i),a[e]=i),i?t?(e=null,!i||"object"!=typeof i.val||i.val instanceof Array||void 0===i.val[t]||(e=i.val[t]),e):i.val:null},c=function(e,t,n,i){var r=null;return t?(r=o(e))&&((r=!(i=r)||"object"!=typeof i.val||i.val instanceof Array?null:(i.val[t]=n,i))&&(r=l(r))):(t=i=i||{},(i={}).name=e,i.val=n,t.session&&"number"==typeof t.session&&(t.end=t.session),i.options=t,r=l(i)),r&&(a[e]=r),r?r.val:null},t=function(e,t){t?c(e,t,void 0):(a[e]=void 0,i(e,"",{end:0}))},d=this.get=function(e,t){return t=t||!1,e instanceof Array&&2===e.length?r(e[0],e[1],t):r(e,void 0,t)};this.getPrivate=function(e,t){return t=t||!1,e instanceof Array?e[0]+=s.getConfig("site"):e+=s.getConfig("site"),d(e,t)};var h=this.set=function(e,t,n){return e instanceof Array?c(e[0],e[1],t):c(e,null,t,n)};this.setPrivate=function(e,t,n){return e instanceof Array?e[0]+=s.getConfig("site"):e+=s.getConfig("site"),h(e,t,n)};var f=this.del=function(e){return e instanceof Array?t(e[0],e[1]):t(e)};this.delPrivate=function(e){return e instanceof Array?e[0]+=s.getConfig("site"):e+=s.getConfig("site"),f(e)},this.cacheInvalidation=function(){a={}}},window.ATInternet.Tracker.addPlugin("Cookies")}.call(window),function(){var e={lifetime:182,domainAttribution:!0,info:!0},v=30;window.ATInternet.Tracker.Plugins.IdentifiedVisitor=function(s){var i=null,r=null,a=null,t=null,o="",l="",u=null,c=null,d="",h="",n={};s.configPlugin("IdentifiedVisitor",e,function(e){n=e}),s.setConfig("redirectionLifetime",v,!0);var f=function(e,t){return n="Utils",i=e,r=t,a=null,s.plugins.exec(n,i,r,function(e){a=e}),a;var n,i,r,a},p=function(e,t){var n=null;return s.plugins.exec("Cookies",e,t,function(e){n=e}),n},_=function(e,t){var n=p(h,[[e]]);return null!==n?!("object"!=typeof n||n instanceof Array):(p(d,[e,{},t]),!0)},g=function(e,t){_("atidvisitor",{path:"/",session:86400*n.lifetime})&&p(d,[["atidvisitor",e],t])},m=function(e,t){s.setParam(e,t,{hitType:["all"],permanent:!0}),g(e,t)};s.plugins.waitForDependencies(["Cookies","Utils"],function(){d="set"+(n.domainAttribution?"":"Private"),h="get"+(n.domainAttribution?"":"Private");var e=f("getLocation",[]);o=f("getQueryStringValue",["xtat",e]),l=f("getQueryStringValue",["xtan",e]),s.getConfig("redirect")?(o||l)&&_("atredir",{path:"/",end:s.getConfig("redirectionLifetime")})&&(l&&p(d,[["atredir","an"],l]),o&&p(d,[["atredir","at"],o])):(u=p(h,[["atredir","at"]]),c=p(h,[["atredir","an"]]),p("del",[["atredir","at"]]),p("del",[["atredir","an"]]),i=p(h,[["atidvisitor","at"]]),r=p(h,[["atidvisitor","an"]]),a=p(h,[["atidvisitor","ac"]]),t=p(h,[["atidvisitor","vrn"]]),function(){var e=function(e,t){/-/.test(t)?(e.category=t.split("-")[0],e.id=t.split("-")[1]):e.id=t},t={category:"",id:""};e(t,l||c);var n={category:"",id:""};e(n,o||u),n.id?(n.category&&m("ac",n.category),m("at",n.id)):i&&s.setParam("at",i,{hitType:["all"],permanent:!0}),t.id?(t.category&&m("ac",t.category),m("an",t.id)):r&&s.setParam("anc",a+"-"+r,{hitType:["all"],permanent:!0})}(),e="-"+s.getConfig("site")+"-",RegExp(e).test(t)||(g("vrn",t=(t||"")+e),(e=s.getContext("page")||{}).vrn=1,s.setContext("page",e))),s.emit("IdentifiedVisitor:Ready",{lvl:"INFO",details:{cookieRedirectTextual:u,cookieRedirectNumeric:c,cookieTextual:i,cookieNumeric:r,cookieCategory:a,cookieVrn:t}})}),s.identifiedVisitor={},s.identifiedVisitor.set=this.set=function(e){var t=e.id;e=e.category,"number"==typeof t?m("an",t.toString()):m("at",t),void 0!==e&&m("ac",e)},s.identifiedVisitor.unset=this.unset=function(){for(var e=["an","at","ac"],t=0;t<e.length;t++)s.exec("Cookies","set",[["atidvisitor",e[t],{path:"/"}],void 0]),s.delParam(e[t]);s.delParam("anc")}},window.ATInternet.Tracker.addPlugin("IdentifiedVisitor")}.call(window),function(){window.ATInternet.Tracker.Plugins.MvTesting=function(i){var n=0,r=function(e,t){var n="";return e.hasOwnProperty(t)&&(n=void 0===(n=e[t])?"":n+""),n},a=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},s=function(e){return"object"==typeof e&&!(e instanceof Array)};i.mvTesting={},i.mvTesting.set=function(e){if(s(e)&&!a(e)){i.dispatchSubscribe("mvTesting");var t=r(e,"test"),n=r(e,"waveId");e=r(e,"creation"),i.setParam("abmvc",t+"-"+n+"-"+e,{hitType:["mvtesting"]})}},i.mvTesting.add=function(e){if(s(e)&&!a(e)){i.dispatchSubscribe("mvTesting");var t=r(e,"variable");e=r(e,"version"),n++,i.setParam("abmv"+n,t+"-"+e,{hitType:["mvtesting"]})}},i.mvTesting.onDispatch=function(){var e,t,n=i.getContext("page")||{};i.setParam("p",(t=(e=n).name,i.exec("Utils","manageChapters",[e,"chapter",3],function(e){t=e+(t||"")}),t),{hitType:["mvtesting"]}),i.setParam("s2",n.level2||"",{hitType:["mvtesting"]}),i.setParam("type","mvt",{hitType:["mvtesting"]}),i.sendHit(null,[["hitType",["mvtesting"]]])}},window.ATInternet.Tracker.addPlugin("MvTesting")}.call(window),function(){window.ATInternet.Tracker.Plugins.Page=function(o){var r=["pageId","chapterLabel","update"],a=["pid","pchap","pidt"],s=["page","site"],l=["f","x"],u=function(e){var t=e.name;return o.exec("Utils","manageChapters",[e,"chapter",3],function(e){t=e+(t||"")}),t},c=function(e,t,n){return t?e=t:e||void 0===n||(e=n),e},d=function(e,t,n){t.hasOwnProperty(n)&&(e[n]=c(e[n],t[n]))},h=function(t){ATInternet.Utils.isPreview()&&!o.getConfig("preview")||ATInternet.Utils.isPrerender(function(e){t(e)})||t()},f=function(e,t,n){if(t)for(var i=0;i<s.length;i++)if(t.hasOwnProperty(s[i])&&t[s[i]])for(var r in t[s[i]])t[s[i]].hasOwnProperty(r)&&(n?e[l[i]+r]=t[s[i]][r]:o.setParam(l[i]+r,t[s[i]][r]))},p=function(e,t,n){if(t){o.exec("Utils","manageChapters",[t,"chapter",3],function(e){e&&(t.chapterLabel=e.replace(/::$/gi,""))});for(var i=0;i<a.length;i++)t.hasOwnProperty(r[i])&&(n?e[a[i]]=t[r[i]]:o.setParam(a[i],t[r[i]]))}},_=function(e,t,n){if(t&&t.keywords instanceof Array){var i=t.keywords.length;if(0<i){for(var r="",a=0;a<i;a++)r+="["+t.keywords[a]+"]"+(a<i-1?"|":"");n?e.tag=r:o.setParam("tag",r)}}},g=function(e,t,n){if(t){var i,r=function(e){return e||"0"};i=r(t.category1)+"-",i+=r(t.category2)+"-",i+=r(t.category3),n?e.ptype=i:o.setParam("ptype",i)}},m=function(e,t,n){if(t)for(var i in t)t.hasOwnProperty(i)&&void 0!==t[i]&&(n?e[i]=t[i]:o.setParam(i,t[i]))};o.customVars=this.customVars={},o.customVars.set=this.customVars.set=function(e){var t=o.getContext("page")||{},n=t.customVars;if(n){if(e)for(var i in e)e.hasOwnProperty(i)&&(n[i]=ATInternet.Utils.completeFstLevelObj(n[i],e[i],!0))}else n=e;t.customVars=n,o.setContext("page",t)},o.dynamicLabel=this.dynamicLabel={},o.dynamicLabel.set=this.dynamicLabel.set=function(e){var t=o.getContext("page")||{};t.dynamicLabel=ATInternet.Utils.completeFstLevelObj(t.dynamicLabel,e,!0),o.setContext("page",t)},o.tags=this.tags={},o.tags.set=this.tags.set=function(e){var t=o.getContext("page")||{};t.tags=ATInternet.Utils.completeFstLevelObj(t.tags,e,!0),o.setContext("page",t)},o.customTreeStructure=this.customTreeStructure={},o.customTreeStructure.set=this.customTreeStructure.set=function(e){var t=o.getContext("page")||{};t.customTreeStructure=ATInternet.Utils.completeFstLevelObj(t.customTreeStructure,e,!0),o.setContext("page",t)},o.page={},o.page.reset=this.reset=function(){o.setContext("page",void 0)},o.page.set=this.set=function(e){o.dispatchSubscribe("page");var t=o.getContext("page")||{};t.name=c(t.name,e.name,""),t.level2=c(t.level2,e.level2,""),d(t,e,"chapter1"),d(t,e,"chapter2"),d(t,e,"chapter3"),t.customObject=ATInternet.Utils.completeFstLevelObj(t.customObject,e.customObject,!0),o.setContext("page",t)},o.page.send=this.send=function(e){var t={p:u(e),s2:e.level2||""},n=!0,i=e.customObject;if(i){var r=o.getParam("stc",!0);if(r&&r.options.permanent){var a=r?r.options.hitType:[],s=ATInternet.Utils.arrayIndexOf;-1==s(a,"page")&&-1==s(a,"all")||(i=ATInternet.Utils.completeFstLevelObj(r.value||{},i,!0))}o.exec("Utils","customObjectToString",[i],function(e){t.stc=e})}return(i=o.getContext("page")||{}).vrn&&(t.vrn=i.vrn,i.vrn=void 0,o.setContext("page",i)),void 0!==(r=o.getContext("InternalSearch")||{}).keyword&&(t.mc=ATInternet.Utils.cloneSimpleObject(r.keyword),void 0!==r.resultPageNumber&&(t.np=ATInternet.Utils.cloneSimpleObject(r.resultPageNumber)),o.setContext("InternalSearch",void 0)),ATInternet.Utils.isPreview()&&o.getConfig("preview")&&(t.pvw=1),f(t,e.customVars,!0),p(t,e.dynamicLabel,!0),_(t,e.tags,!0),g(t,e.customTreeStructure,!0),r=o.getContext("campaigns")||{},m(t,r,!0),o.setContext("campaigns",void 0),o.exec("TechClicks","manageClick",[e.elem],function(e){n=e}),h(function(){o.sendHit(t)}),i.name=c(i.name,e.name,""),i.level2=c(i.level2,e.level2,""),d(i,e,"chapter1"),d(i,e,"chapter2"),d(i,e,"chapter3"),o.setContext("page",i),n},o.page.onDispatch=this.onDispatch=function(){var e=o.getContext("page")||{},t=o.getContext("InternalSearch")||{};o.setParam("p",u(e)),o.setParam("s2",e.level2||""),e.vrn&&(o.setParam("vrn",e.vrn),e.vrn=void 0,o.setContext("page",e)),void 0!==t.keyword&&(o.setParam("mc",ATInternet.Utils.cloneSimpleObject(t.keyword)),void 0!==t.resultPageNumber&&o.setParam("np",ATInternet.Utils.cloneSimpleObject(t.resultPageNumber)),o.setContext("InternalSearch",void 0)),ATInternet.Utils.isPreview()&&o.getConfig("preview")&&o.setParam("pvw",1),f(null,e.customVars,!1),p(null,e.dynamicLabel,!1),_(null,e.tags,!1),g(null,e.customTreeStructure,!1),t=o.getContext("campaigns")||{},m(null,t,!1),o.setContext("campaigns",void 0);e=e.customObject;var n=[["hitType",["page"]]];if(e)if(t=o.getParam("stc",!0)){var i=t.options.hitType||[],r=-1!=(r=ATInternet.Utils.arrayIndexOf)(i,"page")||-1!=r(i,"all");i=t.options.permanent;r?((r=ATInternet.Utils.cloneSimpleObject(t)).value=ATInternet.Utils.completeFstLevelObj(r.value||{},e,!0),o.setParam("stc",r.value,{encode:!0}),h(function(){o.sendHit(null,n)}),i&&o.setParam("stc",t.value,t.options)):(o.setParam("stc",e,{encode:!0}),h(function(){o.sendHit(null,n)}),o.setParam("stc",t.value,t.options))}else o.setParam("stc",e,{encode:!0}),h(function(){o.sendHit(null,n)});else h(function(){o.sendHit(null,n)})}},window.ATInternet.Tracker.addPlugin("Page")}.call(window),function(){window.ATInternet.Tracker.Plugins.RichMedia=function(o){var a=new function(){this._timeout={},this.setTimeout=function(e,t,n){this._timeout[e]=this._timeout[e]||{},this._timeout[e][t]=window.setTimeout(function(){o.richMedia.send({action:"refresh",playerId:e,mediaLabel:t})},1e3*n)},this.setTimeoutObject=function(e,t,n){if(this._timeout[e]=this._timeout[e]||{},void 0===this._timeout[e][t]){var i,r=[];for(i in n)n.hasOwnProperty(i)&&r.push({delay:d(i,0),refresh:d(n[i],5)});r.sort(function(e,t){return e.delay<t.delay?-1:e.delay>t.delay?1:0}),this._timeout[e][t]={arrObj:r}}if(0<(n=this._timeout[e][t]).arrObj.length&&(r=n.arrObj[0].delay,i=n.arrObj[0].refresh,"number"==typeof r&&"number"==typeof i&&0<i)){n[r]=n[r]||{};var a=void 0;void 0!==n.arrObj[1]&&(a=n.arrObj[1].delay);var s=0;void 0===a?s=1:"number"==typeof n[r].num?s=Math.max(n[r].num-1,0):"number"==typeof a&&(s=Math.floor(60*(a-r)/i)),0<(n[r].num=s)?n[r].timeout=window.setTimeout(function(){o.richMedia.send({action:"refresh",playerId:e,mediaLabel:t})},1e3*i):void 0!==n[r].timeout&&(window.clearTimeout(n[r].timeout),n[r].timeout=void 0,n.arrObj.splice(0,1),window.setTimeout(function(){o.richMedia.send({action:"refresh",playerId:e,mediaLabel:t})},1e3*i)),this._timeout[e][t]=n}},this.clearTimeout=function(e,t){if(this._timeout[e]=this._timeout[e]||{},"object"==typeof this._timeout[e][t]){for(var n in this._timeout[e][t])if(this._timeout[e][t].hasOwnProperty(n)){var i=this._timeout[e][t][n].num;void 0!==i&&0<i&&(window.clearTimeout(this._timeout[e][t][n].timeout),this._timeout[e][t][n].timeout=void 0)}}else window.clearTimeout(this._timeout[e][t])},this.removePlayer=function(e){for(var t in this._timeout[e])this._timeout[e].hasOwnProperty(t)&&(this.clearTimeout(e,t),o.richMedia.send({action:"stop",playerId:e,mediaLabel:t}));this._timeout[e]={}},this.removeAll=function(){for(var e in this._timeout)this._timeout.hasOwnProperty(e)&&this.removePlayer(e);this._timeout={}}},s=new function(){this._media=function(){this.m9=this.m6=this.m5=this.m1=this.rfsh=this.buf=this.a=this.p=this.clnk=this.s2=this.plyr=this.type=""},this._mediaAll={},this.setMediaProperty=function(e,t,n,i){this._mediaAll[e]=this._mediaAll[e]||{},this._mediaAll[e][t]=this._mediaAll[e][t]||new this._media,this._mediaAll[e][t][n]=i},this.getMediaProperty=function(e,t,n){return this._mediaAll[e]&&this._mediaAll[e][t]?this._mediaAll[e][t][n]:""},this.removePlayer=function(e){this._mediaAll[e]={}},this.removeAll=function(){this._mediaAll={}}},l=function(e,t,n){var i=e[n]||"";return o.exec("Utils","manageChapters",[e,t,3],function(e){i=e+i}),i},u=function(e,t,n,i){return"boolean"==typeof e[t]&&e[t]&&(n=i),n},c=function(e){var t=0;return/^(\-|\+)?([0-9]+)$/.test(e)&&(t=Number(e)),t},d=function(e,t){var n=parseInt(e,10);return n?Math.max(n,t):0};o.richMedia={},o.richMedia.add=this.add=function(e){var t=c((e=e||{}).playerId),n=l(e,"mediaTheme","mediaLabel"),i=u(e,"isBuffering","0","1"),r=u(e,"isEmbedded","int","ext");s.setMediaProperty(t,n,"plyr",t),s.setMediaProperty(t,n,"type",e.mediaType||""),s.setMediaProperty(t,n,"s2",e.mediaLevel2||""),s.setMediaProperty(t,n,"p",n),s.setMediaProperty(t,n,"clnk",e.previousMedia||""),s.setMediaProperty(t,n,"a",e.action||""),s.setMediaProperty(t,n,"buf",i),s.setMediaProperty(t,n,"rfsh",e.refreshDuration||""),s.setMediaProperty(t,n,"m1",e.duration||""),s.setMediaProperty(t,n,"m5",r),s.setMediaProperty(t,n,"m6",e.broadcastMode||""),s.setMediaProperty(t,n,"m9",e.webdomain||"")},o.richMedia.remove=this.remove=function(e){a.removePlayer(e),s.removePlayer(e)},o.richMedia.removeAll=this.removeAll=function(){a.removeAll(),s.removeAll()},o.richMedia.send=this.send=function(e){var t=c((e=e||{}).playerId),n=l(e,"mediaTheme","mediaLabel"),i={},r=u(e,"isBuffering","0","1");i.type=s.getMediaProperty(t,n,"type"),i.plyr=t,i.p=n,i.a=e.action||"",i.s2=s.getMediaProperty(t,n,"s2"),i.m1=s.getMediaProperty(t,n,"m1"),i.m5=s.getMediaProperty(t,n,"m5"),i.m6=s.getMediaProperty(t,n,"m6"),"play"!==i.a&&"info"!==i.a||(i.buf=r,e=o.getContext("page")||{},i.prich=l(e,"chapter","name"),i.s2rich=e.level2||"",i.clnk=s.getMediaProperty(t,n,"clnk"),i.m9=encodeURIComponent(s.getMediaProperty(t,n,"m9"))),o.sendHit(i,[["hitType",["richmedia"]]]),"pause"!==i.a&&"stop"!==i.a||a.clearTimeout(t,n),"play"!==i.a&&"refresh"!==i.a||("object"==typeof(i=s.getMediaProperty(t,n,"rfsh"))?a.setTimeoutObject(t,n,i):0!==(i=d(i,5))&&a.setTimeout(t,n,i))}},window.ATInternet.Tracker.addPlugin("RichMedia")}.call(window),function(){var e={clicksAutoManagementEnabled:!0,clicksAutoManagementTimeout:500,info:!1};window.ATInternet.Tracker.Plugins.TechClicks=function(a){var s,o;a.configPlugin("TechClicks",e,function(e){s=e.clicksAutoManagementEnabled,o=e.clicksAutoManagementTimeout}),this.deactivateAutoManagement=function(){s=!1};var l=function(e){switch(e.target){case"_top":window.top.location.href=e.url;break;case"_parent":window.parent.location.href=e.url;break;default:window.location.href=e.url}},u=function(e){var t=e.timeout;e.mailto?setTimeout(function(){window.location.href=e.mailto},t):e.form?setTimeout(function(){e.form.submit()},t):e.url&&setTimeout(function(){l({url:e.url,target:e.target})},t)};this.manageClick=function(e,t){if(s&&e){var n;e:{for(n=e;n;){if("function"==typeof n.getAttribute&&("_blank"===n.getAttribute("target")||"no"===n.getAttribute("data-atclickmanagement"))){n=!0;break e}n=n.parentNode}n=e;for(var i,r=window.location.href;n;){if((i=n.href)&&0<i.indexOf("#")&&r.substring(0,0<r.indexOf("#")?r.indexOf("#"):r.length)===i.substring(0,i.indexOf("#"))){n=!0;break e}n=n.parentNode}n=!1}if(r=function(e){for(;e;){if(e.href){if(0<=e.href.indexOf("mailto:"))return"mailto";if(0===e.href.indexOf("http"))return"redirection"}else if("FORM"===e.nodeName)return"form";e=e.parentNode}return!1}(e),!n&&r){switch(r){case"mailto":!function(e){var t=e;for(e=t.timeoutonly;t&&!(t.href&&0<=t.href.indexOf("mailto:"));)t=t.parentNode;t&&(e||a.onTrigger("Tracker:Hit:Sent:Ok",function(){window.location.href=t.href}),u({mailto:t.href,timeout:o}))}(e);break;case"form":!function(e){var t=e;for(e=t.timeoutonly;t&&"FORM"!==t.nodeName;)t=t.parentNode;t&&(e||a.onTrigger("Tracker:Hit:Sent:Ok",function(){t.submit()}),u({form:t,timeout:o}))}(e);break;case"redirection":!function(e){for(var t,n="_self",i=e.timeoutonly;e;){if(e.href&&0===e.href.indexOf("http")){t=e.href.split('"').join('\\"'),n=e.target?e.target:n;break}e=e.parentNode}t&&(i||a.onTrigger("Tracker:Hit:Sent:Ok",function(){l({url:t,target:n})}),u({url:t,target:n,timeout:o}))}(e);break;default:return!0}return t&&!t.defaultPrevented&&t.preventDefault(),!1}}return!0}},window.ATInternet.Tracker.addPlugin("TechClicks")}.call(window),function(){window.ATInternet.Tracker.Plugins.Utils=function(o){var e=this,a={};e.getQueryStringValue=function(e,t){var n=window.ATInternet.Utils.hashcode(t).toString();if(!a[n]){a[n]={};var i=RegExp("[&#?]{1}([^&=#?]*)=([^&#]*)?","g"),r=i.exec(t);if(null!==r)for(;null!==r;)a[n][r[1]]=r[2],r=i.exec(t)}return a[n].hasOwnProperty(e)?a[n][e]:null},e.customObjectToString=function(e){return encodeURIComponent(window.ATInternet.Utils.jsonSerialize(e))},e.manageChapters=function(e,t,n){var i=o.getConfig("ignoreEmptyChapterValue"),r="";if(e){n=parseInt(n,10);for(var a=1;a<n+1;a++){var s=e[t+a]||"";r=i?r+(s?s+"::":""):r+(e.hasOwnProperty(t+a)?s+"::":"")}}return r},e.getDocumentLevel=function(){var e=o.getConfig("documentLevel");return e.indexOf(".")<0?window[e]||document:(e=e.split("."),window[e[0]][e[1]]||document)},e.getLocation=function(){return e.getDocumentLevel().location.href},o.dispatchIndex={},o.dispatchStack=[],o.dispatchEventFor={};var n=0;o.dispatchSubscribe=function(e){return!o.dispatchIndex[e]&&(o.dispatchStack.push(e),o.dispatchIndex[e]=!0)},o.dispatchSubscribed=function(e){return!0===o.dispatchIndex[e]},o.addSpecificDispatchEventFor=function(e){return!o.dispatchEventFor[e]&&(o.dispatchEventFor[e]=!0,n++,!0)},o.processSpecificDispatchEventFor=function(e){o.dispatchEventFor[e]&&(o.dispatchEventFor[e]=!1,0==--n&&(o.dispatchEventFor={},o.emit("Tracker:Plugin:SpecificEvent:Exec:Complete",{lvl:"INFO"})))},o.dispatch=function(){var e=function(){for(;0<o.dispatchStack.length;){var e=o.dispatchStack.pop();o[e].onDispatch()}o.dispatchIndex={},o.delContext(void 0,"customObject")},t=function(){o.plugins.isExecWaitingLazyloading()?o.onTrigger("Tracker:Plugin:Lazyload:Exec:Complete",function(){e()},!0):e()};0===n?t():o.onTrigger("Tracker:Plugin:SpecificEvent:Exec:Complete",function(){t()},!0)},o.dispatchRedirect=function(e){var t=!0;return e&&e.elem&&(e.elem.timeoutonly=!0,o.plugins.exec("TechClicks","manageClick",[e.elem],function(e){t=e})),o.dispatch(),t}},window.ATInternet.Tracker.addPlugin("Utils")}.call(window),"function"==typeof window.ATInternet.onTrackerLoad&&window.ATInternet.onTrackerLoad()),this.initConfig();var n=[];try{var i,r,a,s,o=window;if(null==o)r=null;else r=!!o.__properties__&&(i=o.__properties__.get_ATInternet)?o[i]():o.ATInternet;if(null==r)s=null;else s=!!r.__properties__&&(a=r.__properties__.get_Tracker)?r[a]():r.Tracker;var l,u,c=s;if(null==c)u=null;else u=!!c.__properties__&&(l=c.__properties__.get_instances)?c[l]():c.instances;n=u}catch(e){e instanceof Me&&(e=e.val),be.trace(e,{fileName:"RichMedia_JS.hx",lineNumber:107,className:"fr.tf1.etf1.core.module.analytics.richmedia.RichMedia_JS",methodName:"new"})}if(null==n||0==n.length){var d=new ATInternet.Tracker.Tag({site:this.catalog.get_richmedia().site});(this.richMediaTag=d).page.set(this.config.paramsTags),this.richmediaObj=d.richMedia}else{var h=window.ATInternet.Tracker.instances[0];(this.richMediaTag=h).page.set(this.config.paramsTags),this.richmediaObj=h.richMedia}}};J.__name__=!0,J.__super__=Q,J.prototype=n(Q.prototype,{initConfig:function(){this.config={mediaType:"video",playerId:o.format(new Date,"%s")+fe.string(99*Math.random()|0),isEmbedded:this.catalog.get_richmedia().isEmbedded,broadcastMode:this.catalog.get_richmedia().broadcastMode,mediaLabel:this.replaceContentType(this.currentRichMediaLabel.label,this.currentRichMediaLabel.contentType),mediaLevel2:this.catalog.get_richmedia().mediaLevel2,refreshDuration:this.catalog.get_richmedia().refreshDuration,duration:this.catalog.get_richmedia().duration,webdomain:this.catalog.get_richmedia().webdomain},null==this.catalog.get_richmedia().paramsTags?this.config.paramsTags={name:"",level2:""}:this.config.paramsTags=this.catalog.get_richmedia().paramsTags},updateMediaLabel:function(){if(null!=this.config){var e=this.currentRichMediaLabel.contentType+"||"+this.currentRichMediaLabel.contentType;this.currentMode==U.AD&&(e=Q.prototype.getRMFriendlyAdCount.call(this)+"||"+this.currentRichMediaLabel.contentType),this.config.mediaLabel=this.replaceContentType(this.currentRichMediaLabel.label,e)}},sendEvent:function(e){null!=this.richmediaObj&&null!=this.config&&(this.richmediaObj.add(this.config),this.richmediaObj.send({action:Q.prototype.getRMFriendlyEventType.call(this,e),playerId:this.config.playerId,mediaLabel:this.config.mediaLabel}),this.lastPlaybackEvent=e)},updateCatalog:function(e){if(null!=this.catalog.get_richmedia()){var t=new RegExp(".*::","g".split("u").join(""));this.config.mediaLabel.replace(t,"")!=e.get_richmedia().mediaLabel.label.replace(t,"")&&(this.sendPause(),this.catalog.set_richmedia(e.get_richmedia()),this.currentRichMediaLabel=this.catalog.get_richmedia().mediaLabel,this.config={mediaType:"video",playerId:o.format(new Date,"%s")+fe.string(99*Math.random()|0),isEmbedded:this.catalog.get_richmedia().isEmbedded,broadcastMode:this.catalog.get_richmedia().broadcastMode,mediaLabel:this.replaceContentType(this.currentRichMediaLabel.label,this.currentRichMediaLabel.contentType),mediaLevel2:this.catalog.get_richmedia().mediaLevel2,refreshDuration:this.catalog.get_richmedia().refreshDuration,duration:this.catalog.get_richmedia().duration,webdomain:this.catalog.get_richmedia().webdomain,paramsTags:this.catalog.get_richmedia().paramsTags},this.updateMediaLabel(),this.sendPlay())}else this.sendStop()},setModeAd:function(){this.currentMode==U.MEDIA&&1<this.playheadTime&&this.lastPlaybackEvent!=B.EVENT_STOP&&this.sendPause(),Q.prototype.setModeAd.call(this),this.updateMediaLabel()},setModeMedia:function(){Q.prototype.setModeMedia.call(this),this.updateMediaLabel()},setRollType:function(e){Q.prototype.setRollType.call(this,e),this.updateMediaLabel()},setAdCount:function(e){Q.prototype.setAdCount.call(this,e),this.updateMediaLabel()},sendPlay:function(){this.currentMode==U.AD&&null==this.currentRollType||this.lastPlaybackEvent!=B.EVENT_PLAY&&(this.currentMode!=U.MEDIA&&this.lastPlaybackEvent!=B.EVENT_PAUSE&&this.updateMediaLabel(),this.sendEvent(B.EVENT_PLAY),this.liveEnrichiEnabled&&this.registerLiveEnrichiClickEvent("playPause"))},sendPause:function(){this.lastPlaybackEvent!=B.EVENT_PAUSE&&null!=this.lastPlaybackEvent&&(this.sendEvent(B.EVENT_PAUSE),this.liveEnrichiEnabled&&this.registerLiveEnrichiClickEvent("playPause"))},sendSeeked:function(e){var t=this.lastPlaybackEvent;if(null!=t)switch(this.sendEvent(B.EVENT_SEEK),this.setProgress(e),t[1]){case 0:this.sendPlay();break;case 1:this.sendPause();break;default:return}},sendStop:function(){if(this.lastPlaybackEvent!=B.EVENT_STOP){this.sendEvent(B.EVENT_STOP),Q.prototype.setStopped.call(this);var e=this.currentRollType;if(null!=e)switch(e[1]){case 0:this.preCount++;break;case 1:this.midCount++;break;case 2:this.endCount++}}},setLiveEnrichiEnabled:function(e){Q.prototype.setLiveEnrichiEnabled.call(this,e),this.liveEnrichiEnabled=e},registerLiveEnrichiClickEvent:function(e){if(this.liveEnrichiEnabled&&null!=this.richMediaTag){Q.prototype.registerLiveEnrichiClickEvent.call(this,e);var t=null;if(null!=e){switch(e){case"Blessure":t="blessure";break;case"But":t="but";break;case"Carton Rouge":t="carton-rouge";break;case"Occasion":t="action-forte";break;case"playPause":t="play-pause";break;case"retourDirect":t="retour-direct";break;case"slideUp":t="slide-up";break;case"timeline":t="timeline";break;case"timelineLess":t="timeshifting-moins";break;case"timelineMore":t="timeshifting-plus"}var n="direct-"+fe.string(this.context.mediaID).substring(2)+"::"+t;this.richMediaTag.click.send({elem:this,name:n,level2:103,type:"action"})}}},__class__:J});var Z=function(e,t){j.call(this,e,t),this.catalog=e,this.context=t};Z.__name__=!0,Z.__super__=j,Z.prototype=n(j.prototype,{sendPlay:function(){this.lastPlaybackEvent!=B.EVENT_PLAY&&(this.currentMode==U.AD?Ee.dispatchEvent(ve.onAdPlay,he.field(this.context,"container")):Ee.dispatchEvent(ve.onMediaPlay,he.field(this.context,"container")))},sendPause:function(){this.lastPlaybackEvent!=B.EVENT_PAUSE&&(this.currentMode==U.AD?Ee.dispatchEvent(ve.onAdPause,he.field(this.context,"container")):Ee.dispatchEvent(ve.onMediaPause,he.field(this.context,"container")))},sendSeeked:function(e){this.currentMode!=U.AD&&Ee.dispatchEvent(ve.onSeeked,he.field(this.context,"container"))},sendStop:function(){this.lastPlaybackEvent!=B.EVENT_STOP&&(this.currentMode==U.AD?Ee.dispatchEvent(ve.onAdStop,he.field(this.context,"container")):Ee.dispatchEvent(ve.onMediaStop,he.field(this.context,"container")))},__class__:Z});var $={__ename__:!0,__constructs__:["LOADED","IO_ERROR","UPDATED","TITLE_CHANGED","EMID_CHANGED"],LOADED:["LOADED",0]};($.LOADED.__enum__=$).IO_ERROR=["IO_ERROR",1],($.IO_ERROR.__enum__=$).UPDATED=["UPDATED",2],($.UPDATED.__enum__=$).TITLE_CHANGED=["TITLE_CHANGED",3],($.TITLE_CHANGED.__enum__=$).EMID_CHANGED=["EMID_CHANGED",4],$.EMID_CHANGED.__enum__=$;var ee=function(e){if(s.call(this),this.config=e,this.currentMediaID=e.mediaID,this.isLoaded=!1,this.currentPath="https://player.tf1.fr/mediainfocombo/",this.currentArg="?",null!=he.field(e,"context")){var t=he.field(e,"context");"SYNDICATION"==t&&(t="syndication"),this.currentArg+="context="+t}1==he.field(e,"debug")&&(this.currentArg+="&debug=1")};ee.__name__=!0,ee.__super__=s,ee.prototype=n(s.prototype,{load:function(e){null==this.get_media()?(null!=e&&(this.currentMediaID=e),null==this.currentIP?this.requestGeolock():this.requestMediaID()):this.dispatchEvent($.LOADED,this)},requestGeolock:function(){Ee.requestFile("https://delivery.tf1.fr/restrictions.xml",Ve(this,this.geolockSuccess),Ve(this,this.geolockError))},geolockSuccess:function(e){var t=new RegExp("[\r\n]*","g".split("u").join(""));e=e.replace(t,"");var n=new _(".*<pays>|</pays>.*","g");this.currentCountry=e.replace(n.r,""),n=new _(".*<clientIP>|</clientIP>.*","g"),this.currentIP=e.replace(n.r,""),this.requestMediaID()},geolockError:function(e){this.currentIP="0.0.0.0",this.currentCountry="--",this.requestMediaID()},requestMediaID:function(){Ee.requestFile(this.currentPath+this.currentMediaID+this.currentArg,Ve(this,this.onSuccess),Ve(this,this.onError))},onError:function(e){this.dispatchEvent($.IO_ERROR,this,e)},onSuccess:function(e){var t=JSON.parse(e);Ee.dispatchEvent(ve.onMediaInfoFetched,he.field(this.config,"container"),t),this.set_media(this.computeMeta(t)),this.set_content(t.content),this.set_mediametrie(t.mediametrie),this.set_richmedia(t.richmedia),this.set_fw(t.fw),this.set_yb(t.yb),this.set_streamroot(t.streamroot),this.set_delivery(t.delivery),this.isLoaded?this.dispatchEvent($.UPDATED,this):(this.isLoaded=!0,this.dispatchEvent($.LOADED,this)),null!=this.get_media()&&(null!=this.get_content()&&(this.get_content().slug=this.get_content().title,this.get_content().title=this.get_media().title),null==this.currentMediaTitle?(this.currentMediaTitle=this.get_media().title,this.dispatchEvent($.TITLE_CHANGED,this.currentMediaTitle)):this.currentMediaTitle!=this.get_media().title&&(this.currentMediaTitle=this.get_media().title,this.dispatchEvent($.TITLE_CHANGED,this.currentMediaTitle)),null==this.currentEmId?(this.currentEmId=this.get_media().emId,null!=this.currentEmId&&this.dispatchEvent($.EMID_CHANGED,this.buildMediaChangeArgs())):this.currentEmId!=this.get_media().emId&&(this.currentEmId=this.get_media().emId,this.dispatchEvent($.EMID_CHANGED,this.buildMediaChangeArgs())),"live"==this.get_media().type&&Ie.delay(Ve(this,this.requestMediaID),6e4))},buildMediaChangeArgs:function(){var e={};e.emId=this.currentEmId,e.title=this.currentMediaTitle,e.slug=null;try{var t=this.get_mediametrie().chapters[0].estatS2;e.slug=l.substr(t,0,t.lastIndexOf("_"))}catch(e){e instanceof Me&&(e=e.val),be.trace(e,{fileName:"Catalog.hx",lineNumber:357,className:"fr.tf1.etf1.core.module.catalog.Catalog",methodName:"buildMediaChangeArgs"})}return e},computeMeta:function(e){var t=e.media;return null==t||(null!=he.field(t,"geoList")&&-1==he.field(t,"geoList").indexOf(this.currentCountry)&&(t.error_code="00",t.error_desc="GEOBLOCK"),t.userCountry=this.currentCountry,t.userIp=this.currentIP,null==he.field(t,"skin")&&(t.skin="default")),t},get_media:function(){return this.media},set_media:function(e){return this.media=e,this.get_media()},get_content:function(){return this.content},set_content:function(e){return this.content=e,this.get_content()},set_mediametrie:function(e){return this.mediametrie=e,this.get_mediametrie()},get_mediametrie:function(){return this.mediametrie},set_richmedia:function(e){return this.richmedia=e,this.get_richmedia()},get_richmedia:function(){return this.richmedia},get_fw:function(){return this.fw},set_fw:function(e){return this.fw=e,this.get_fw()},set_streamroot:function(e){return this.streamroot=e,this.get_streamroot()},get_yb:function(){return this.yb},set_yb:function(e){return this.yb=e,this.get_yb()},get_streamroot:function(){return this.streamroot},get_mediaID:function(){return this.currentMediaID},set_delivery:function(e){return this.delivery=e,this.get_delivery()},get_delivery:function(){return this.delivery},__class__:ee,__properties__:{set_delivery:"set_delivery",get_delivery:"get_delivery",set_streamroot:"set_streamroot",get_streamroot:"get_streamroot",set_yb:"set_yb",get_yb:"get_yb",set_fw:"set_fw",get_fw:"get_fw",set_richmedia:"set_richmedia",get_richmedia:"get_richmedia",set_mediametrie:"set_mediametrie",get_mediametrie:"get_mediametrie",set_content:"set_content",get_content:"get_content",set_media:"set_media",get_media:"get_media",get_mediaID:"get_mediaID"}});var te={__ename__:!0,__constructs__:["LOADED","IO_ERROR"],LOADED:["LOADED",0]};(te.LOADED.__enum__=te).IO_ERROR=["IO_ERROR",1],te.IO_ERROR.__enum__=te;var ne=function(e){if(this.enabled=!1,this.loaded=!1,s.call(this),"L_TF1"==e.mediaID)this.channel="tf1";else{if("L_TMC"!=e.mediaID)return;this.channel="tmc"}var t,n;null==e?n=null:n=!!e.__properties__&&(t=e.__properties__.get_device)?e[t]():e.device;var i;if("mobile"!=n)if("tablet"==n){var r,a;if(null==e)a=null;else a=!!e.__properties__&&(r=e.__properties__.get_os)?e[r]():e.os;i="ios"==a}else i=!1;else i=!0;i||(this.hostURL="https://mytf1-middle.tf1.fr/mytf1_prod/live-poi/pois/",null!=e.liveAPI&&("int"==e.liveAPI?this.hostURL="https://int-middle-apps.etf1.tf1.fr/mytf1_int1/live-poi/pois/":"val"==e.liveAPI?this.hostURL="https://val-mytf1-middle.etf1.tf1.fr/mytf1_val1/live-poi/pois/":"local"==e.liveAPI&&(this.hostURL="http://localhost:88/util/live_api/liveapi_active.json?active=1&")),this.context=e,this.liveAPIContent=this.createDefaultEmptyAPI(),this.load())};ne.__name__=!0,ne.__super__=s,ne.prototype=n(s.prototype,{createDefaultEmptyAPI:function(){return{pois:null,timelineStart:null,timelineEnd:null,pollDelay:0,devices:null}},delayedReload:function(){var e=this.get_liveAPIContent().pollDelay;0!=e&&null!=e&&(e<3&&(e=3),Ie.delay(Ve(this,this.load),1e3*e|0))},processJSON:function(e){var t,n,i,r,a,s,o,l,u,c;null==e?n=null:n=!!e.__properties__&&(t=e.__properties__.get_pois)?e[t]():e.pois;(this.get_liveAPIContent().pois=n,null==e)?r=null:r=!!e.__properties__&&(i=e.__properties__.get_timelineStart)?e[i]():e.timelineStart;(this.get_liveAPIContent().timelineStart=r,null==e)?s=null:s=!!e.__properties__&&(a=e.__properties__.get_timelineEnd)?e[a]():e.timelineEnd;(this.get_liveAPIContent().timelineEnd=s,null==e)?l=null:l=!!e.__properties__&&(o=e.__properties__.get_pollDelay)?e[o]():e.pollDelay;(this.get_liveAPIContent().pollDelay=l,null==e)?c=null:c=!!e.__properties__&&(u=e.__properties__.get_devices)?e[u]():e.devices;return this.get_liveAPIContent().devices=c,this.startTimeStamp=ye.iso8601ToTimestamp(this.get_liveAPIContent().timelineStart),this.endTimeStamp=ye.iso8601ToTimestamp(this.get_liveAPIContent().timelineEnd),null!=this.get_liveAPIContent().devices&&null!=this.get_liveAPIContent().devices.web&&0<this.get_liveAPIContent().devices.web.pollDelay&&(this.get_liveAPIContent().pollDelay=this.get_liveAPIContent().devices.web.pollDelay),this.get_liveAPIContent()},load:function(){Ee.requestFile(this.hostURL+this.channel,Ve(this,this.loadSuccess),Ve(this,this.loadError))},loadError:function(e){this.dispatchEvent(te.IO_ERROR,e),null!=this.get_liveAPIContent().pollDelay&&0!=this.get_liveAPIContent().pollDelay||(this.get_liveAPIContent().pollDelay=600),this.delayedReload()},loadSuccess:function(e){if(this.processJSON(JSON.parse(e)),null!=this.get_liveAPIContent().devices&&null!=this.get_liveAPIContent().devices.web&&0==this.get_liveAPIContent().devices.web.enable)return this.enabled=!1,void(0!=this.get_liveAPIContent().pollDelay&&(this.dispatchEvent(te.LOADED,this.get_liveAPIContent()),this.delayedReload()));if(null==this.get_liveAPIContent().devices&&0==this.get_liveAPIContent().pollDelay)return this.enabled=!1,void this.dispatchEvent(te.LOADED,this.get_liveAPIContent());var t=(new Date).valueOf();(t=Math.round(t/1e3))>this.startTimeStamp&&t<this.endTimeStamp?this.enabled=!0:this.enabled=!1,this.dispatchEvent(te.LOADED,this.get_liveAPIContent()),this.delayedReload()},get_liveAPIContent:function(){return this.liveAPIContent},refresh:function(){null!=this.get_liveAPIContent()&&this.dispatchEvent(te.LOADED,this.get_liveAPIContent())},destroy:function(){this.enabled=!1,this.get_liveAPIContent().pollDelay=null},__class__:ne,__properties__:{get_liveAPIContent:"get_liveAPIContent"}});var ie={__ename__:!0,__constructs__:["LOADED","ERROR"],LOADED:["LOADED",0]};(ie.LOADED.__enum__=ie).ERROR=["ERROR",1],ie.ERROR.__enum__=ie;var re=function(){s.call(this)};re.__name__=!0,re.__super__=s,re.prototype=n(s.prototype,{requestFromId:function(e,t,n,i,r,a){null==a&&(a=!1),null==r&&(r=-1),null==i&&(i=0),null==this.currentContext||null==this.currentId||this.currentContext!=this.computeDeliveryContext(t)||this.currentId!=e?(this.deliveryHost="https://delivery.tf1.fr/",a&&(this.deliveryHost="https://predelivery.tf1.fr/"),this.currentContext=this.computeDeliveryContext(t),this.currentId=e,this.currentPostfix="",null!=n&&(this.currentPostfix+="token="+n+"&"),0!=i&&(this.currentPostfix+="tcIn="+i+"&"),-1!=r&&(this.currentPostfix+="tcOut="+r+"&"),""!=this.currentPostfix&&(this.currentPostfix="?"+this.currentPostfix),this.callNewDelivery()):s.prototype.dispatchEvent.call(this,ie.LOADED,this)},computeDeliveryContext:function(e){var t=e.toLowerCase();return-1!=t.indexOf("mytf1")?"mytf1":-1!=t.indexOf("oneinfo")?"lci":-1!=t.indexOf("tfoumax")?"tfoumax":"syndication"},callNewDelivery:function(){Ee.requestFile(this.deliveryHost+this.currentContext+"-wrd/"+this.currentId+this.currentPostfix,Ve(this,this.newDeliveryComplete),Ve(this,this.newDeliveryError))},newDeliveryComplete:function(e){this.delivery=JSON.parse(e),"hls"==this.get_delivery().format.toLowerCase()?this.get_delivery().engineType=m.HLS:this.get_delivery().engineType=m.DASH,""!=this.get_delivery().error?this.newDeliveryError(e):s.prototype.dispatchEvent.call(this,ie.LOADED,this)},computeLiveEvent:function(e){switch(e){case"L_EVT1":this.get_delivery().url="http://watlivhlshdsevt1-lh.akamaihd.net/i/live_1@141628/master.m3u8";break;case"L_EVT2":this.get_delivery().url="http://watlivhlshdsevt2-lh.akamaihd.net/i/live_1@141629/master.m3u8";break;case"L_EVT3":this.get_delivery().url="http://watlivhlshdsevt3-lh.akamaihd.net/i/live_1@141630/master.m3u8";break;case"L_EVT4":case"L_EVT5":this.get_delivery().url="http://watlivhlshdsevt4-lh.akamaihd.net/i/live_1@141631/master.m3u8";break;case"L_EVT6":this.get_delivery().url="http://etflivhlshdsevt2-lh.akamaihd.net/i/live_1@141602/master.m3u8";break;case"L_EVT7":this.get_delivery().url="http://etflivhlshdsevt3-lh.akamaihd.net/i/live_1@141603/master.m3u8";break;case"L_EVT8":this.get_delivery().url="http://multiplatform-f.akamaihd.net/i/multi/april11/hdworld/hdworld_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,.mp4.csmil/master.m3u8";break;case"L_EVT9":this.get_delivery().url="http://multiplatform-f.akamaihd.net/i/multi/will/bunny/big_buck_bunny_,640x360_400,640x360_700,640x360_1000,950x540_1500,.f4v.csmil/master.m3u8"}this.get_delivery().engineType=m.HLS,this.get_delivery().error=null,s.prototype.dispatchEvent.call(this,ie.LOADED,this)},newDeliveryError:function(e){s.prototype.dispatchEvent.call(this,ie.ERROR,this)},get_delivery:function(){return this.delivery},forceDelivery:function(e){var t,n,i="";null==e?n=null:n=!!e.__properties__&&(t=e.__properties__.get_error)?e[t]():e.error;var r,a,s,o,l,u,c,d,h=n;(null==h&&(h=""),i+="{",null==e)?a=null:a=!!e.__properties__&&(r=e.__properties__.get_code)?e[r]():e.code;(i+='"code":'+fe.string(a),i+=",",i+='"error":"'+h+'"',i+=",",null==e)?o=null:o=!!e.__properties__&&(s=e.__properties__.get_url)?e[s]():e.url;(i+='"url":"'+fe.string(o)+'"',i+=",",null==e)?u=null:u=!!e.__properties__&&(l=e.__properties__.get_country)?e[l]():e.country;(i+='"country":"'+fe.string(u)+'"',i+=",",null==e)?d=null:d=!!e.__properties__&&(c=e.__properties__.get_format)?e[c]():e.format;i+='"format":"'+fe.string(d)+'"',i+="}",this.newDeliveryComplete(i)},__class__:re,__properties__:{get_delivery:"get_delivery"}});var ae={__ename__:!0,__constructs__:["userClickPlay","userClickPause","userVolumeChange","setup","ready","canplay","canplaythrough","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","seeked","seeking","stalled","timeupdate","volumechange","waiting","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","destroyed","restart","playlistclick","resize","dvrSeek","dvrSeekMinus","dvrSeekPlus","dvrSeekRetourDirect","dvrPOIClick"],userClickPlay:["userClickPlay",0]};(ae.userClickPlay.__enum__=ae).userClickPause=["userClickPause",1],(ae.userClickPause.__enum__=ae).userVolumeChange=["userVolumeChange",2],(ae.userVolumeChange.__enum__=ae).setup=["setup",3],(ae.setup.__enum__=ae).ready=["ready",4],(ae.ready.__enum__=ae).canplay=["canplay",5],(ae.canplay.__enum__=ae).canplaythrough=["canplaythrough",6],(ae.canplaythrough.__enum__=ae).emptied=["emptied",7],(ae.emptied.__enum__=ae).ended=["ended",8],(ae.ended.__enum__=ae).error=["error",9],(ae.error.__enum__=ae).loadeddata=["loadeddata",10],(ae.loadeddata.__enum__=ae).loadedmetadata=["loadedmetadata",11],(ae.loadedmetadata.__enum__=ae).loadstart=["loadstart",12],(ae.loadstart.__enum__=ae).pause=["pause",13],(ae.pause.__enum__=ae).play=["play",14],(ae.play.__enum__=ae).playing=["playing",15],(ae.playing.__enum__=ae).progress=["progress",16],(ae.progress.__enum__=ae).seeked=["seeked",17],(ae.seeked.__enum__=ae).seeking=["seeking",18],(ae.seeking.__enum__=ae).stalled=["stalled",19],(ae.stalled.__enum__=ae).timeupdate=["timeupdate",20],(ae.timeupdate.__enum__=ae).volumechange=["volumechange",21],(ae.volumechange.__enum__=ae).waiting=["waiting",22],(ae.waiting.__enum__=ae).enterfullscreen=["enterfullscreen",23],(ae.enterfullscreen.__enum__=ae).exitfullscreen=["exitfullscreen",24],(ae.exitfullscreen.__enum__=ae).captionsenabled=["captionsenabled",25],(ae.captionsenabled.__enum__=ae).captionsdisabled=["captionsdisabled",26],(ae.captionsdisabled.__enum__=ae).destroyed=["destroyed",27],(ae.destroyed.__enum__=ae).restart=["restart",28],(ae.restart.__enum__=ae).playlistclick=["playlistclick",29],(ae.playlistclick.__enum__=ae).resize=["resize",30],(ae.resize.__enum__=ae).dvrSeek=["dvrSeek",31],(ae.dvrSeek.__enum__=ae).dvrSeekMinus=["dvrSeekMinus",32],(ae.dvrSeekMinus.__enum__=ae).dvrSeekPlus=["dvrSeekPlus",33],(ae.dvrSeekPlus.__enum__=ae).dvrSeekRetourDirect=["dvrSeekRetourDirect",34],(ae.dvrSeekRetourDirect.__enum__=ae).dvrPOIClick=["dvrPOIClick",35],ae.dvrPOIClick.__enum__=ae;var se={__ename__:!0,__constructs__:["BLANK","ERROR","WAITING_VOD","WAITING_LIVE","WAITING_MOBILETAB","ADS","AD_INSERT","LIVE","VOD","VOD_MOBILETAB","DVR","RESTART"],BLANK:["BLANK",0]};(se.BLANK.__enum__=se).ERROR=["ERROR",1],(se.ERROR.__enum__=se).WAITING_VOD=["WAITING_VOD",2],(se.WAITING_VOD.__enum__=se).WAITING_LIVE=["WAITING_LIVE",3],(se.WAITING_LIVE.__enum__=se).WAITING_MOBILETAB=["WAITING_MOBILETAB",4],(se.WAITING_MOBILETAB.__enum__=se).ADS=["ADS",5],(se.ADS.__enum__=se).AD_INSERT=["AD_INSERT",6],(se.AD_INSERT.__enum__=se).LIVE=["LIVE",7],(se.LIVE.__enum__=se).VOD=["VOD",8],(se.VOD.__enum__=se).VOD_MOBILETAB=["VOD_MOBILETAB",9],(se.VOD_MOBILETAB.__enum__=se).DVR=["DVR",10],(se.DVR.__enum__=se).RESTART=["RESTART",11],se.RESTART.__enum__=se;var oe=function(){s.call(this)};oe.__name__=!0,oe.get=function(e,t,n,i,r){null==r&&(r=!1),null==n&&(n=0);var a=null;return a={direct:!1,controls:oe.desktopControls.get(se.BLANK),duration:n,hideControls:!1,newSkin:r},null!=t&&(a.iconUrl=t,a.loadSprite=!0),new le(e,a)},oe.__super__=s,oe.prototype=n(s.prototype,{getControls:function(e){return null==this.controls&&(this.controls=oe.oldControls),this.controls.get(e)},setPlay:function(){},setPause:function(){},setPoster:function(e){},setSource:function(e){},toggleCaptions:function(e){},toggleControls:function(e){},toggleDVR:function(e){},setPOI:function(e){},clearPOIs:function(){},setTimeswitchedProgressPercent:function(e){},setLiveProgressPercent:function(e){},setTimeswitchedOffset:function(e){},setDuration:function(e){},attachToElement:function(e){},destroy:function(){},setMute:function(){},isMuted:function(){return!0},getVolume:function(){return-1},setUnMute:function(){},setVolume:function(e){},setSize:function(e,t){},setNewSkin:function(e){0==e?this.controls=oe.oldControls:Te.isMobileTab()?this.controls=oe.mobileTabControls:this.controls=oe.desktopControls},setControls:function(e){},setAutohideControls:function(e){},setClickToPlay:function(e){},setSeekEnabled:function(e){},setShareURLs:function(e,t){},setChannel:function(e){},__class__:oe});var le=function(e,t){oe.call(this);var n,i;n="undefined"!=typeof window?window:this,i=function(pe,_e){var ge,me={x:0,y:0},ve={enabled:!0,debug:!1,autoplay:!1,loop:!1,seekTime:10,volume:10,volumeMin:0,volumeMax:10,volumeStep:1,duration:null,share:null,newSkin:!1,displayDuration:!0,loadSprite:!0,playerContainer:null,shareTimerAutoUpdate:!1,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/2.0.18/plyr.svg",blankUrl:"https://cdn.plyr.io/static/blank.mp4",clickToPlay:!0,hideControls:!0,seekEnabled:!1,showPosterOnEnd:!1,disableContextMenu:!0,keyboardShorcuts:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},selectors:{html5:"video, audio",embed:"[data-type]",editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{seek:'[data-plyr="seek"]',play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',forward:'[data-plyr="fast-forward"]',share:'[data-plyr="share"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',fullscreen:'[data-plyr="fullscreen"]',dvrSeek:'[data-plyr="dvrseek"]',dvrSeekMinus:'[data-plyr="minus10"]',dvrSeekPlus:'[data-plyr="plus10"]',dvrRetourDirect:'[data-plyr="retourDirect"]'},volume:{input:'[data-plyr="volume"]',display:".plyr__volume--display"},poi:{container:".plyr__dvr__poi__container"},progress:{container:".plyr__progress",buffer:".plyr__progress--buffer",played:".plyr__progress--played"},sharepanel:{container:".popin__share",closeButton:".close__popin__share",mobileCloseButton:".popin__mobile__share__close",shareTimeCheckbox:".shareTimeCheckbox",shareTimeStart:".shareTimeStart",title__share:".title__share",shareEmbedCopy:".shareEmbedCopy",shareEmbedInput:".shareEmbedInput",shareUrlInput:".shareUrlInput",shareUrlCopyMobile:".shareUrlCopyMobile",shareWidth:".shareWidth",shareHeight:".shareHeight",social__icons:".social__icons"},dvr:{container:"plyr__dvr",progress:"plyr__dvr__progress__container",virtual:".plyr__dvr__progress--virtual",live:".plyr__dvr__progress--live",offsetTimer:".plyr__dvr__offsetTimer",overlay:".plyr__controls__overlay"},captions:".plyr__captions",currentTime:".plyr__time--current",duration:".plyr__time--duration"},classes:{setup:"plyr--setup",ready:"plyr--ready",videoWrapper:"plyr__video-wrapper",embedWrapper:"plyr__video-embed",type:"plyr--{0}",stopped:"plyr--stopped",playing:"plyr--playing",muted:"plyr--muted",share:"plyr--share",dvr:"plyr--dvr",dvrOffset:"plyr--dvr--offset",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback",active:"plyr--fullscreen-active"},tabFocus:"tab-focus"},captions:{defaultActive:!1},fullscreen:{enabled:!0,fallback:!0,allowAudio:!1},storage:{enabled:!0,key:"plyr",dontStoreVolume:!1},controls:["play-large","play","progress","current-time","share","mute","volume","captions","fullscreen"],i18n:{restart:"Restart",rewind:"Rewind {seektime} secs",play:"Play",pause:"Pause",forward:"Forward {seektime} secs",played:"played",buffered:"buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",toggleMute:"Toggle Mute",toggleShare:"Toggle Share",toggleCaptions:"Toggle Captions",toggleFullscreen:"Toggle Fullscreen",frameTitle:"Player for {title}"},types:{embed:["youtube","vimeo","soundcloud"],html5:["video","audio"]},urls:{vimeo:{api:"https://player.vimeo.com/api/player.js"},youtube:{api:"https://www.youtube.com/iframe_api"},soundcloud:{api:"https://w.soundcloud.com/player/api.js"},embed:"",urlPage:""},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,forward:null,mute:null,volume:null,captions:null,fullscreen:null,dvrSeek:null,dvrSeekMinus:null,dvrSeekPlus:null,dvrRetourDirect:null},events:["ready","ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied"],logPrefix:"[Plyr]"};function Ee(){var e,t,n,i=navigator.userAgent,r=navigator.appName,a=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10),o=!1,l=!1,u=!1,c=!1;return-1!==navigator.appVersion.indexOf("Windows NT")&&-1!==navigator.appVersion.indexOf("rv:11")?(o=!0,r="IE",a="11"):-1!==(t=i.indexOf("MSIE"))?(o=!0,r="IE",a=i.substring(t+5)):-1!==(t=i.indexOf("Chrome"))?(u=!0,r="Chrome",a=i.substring(t+7)):-1!==(t=i.indexOf("Safari"))?(c=!0,r="Safari",a=i.substring(t+7),-1!==(t=i.indexOf("Version"))&&(a=i.substring(t+8))):-1!==(t=i.indexOf("Firefox"))?(l=!0,r="Firefox",a=i.substring(t+8)):(e=i.lastIndexOf(" ")+1)<(t=i.lastIndexOf("/"))&&(r=i.substring(e,t),a=i.substring(t+1),r.toLowerCase()===r.toUpperCase()&&(r=navigator.appName)),-1!==(n=a.indexOf(";"))&&(a=a.substring(0,n)),-1!==(n=a.indexOf(" "))&&(a=a.substring(0,n)),s=parseInt(""+a,10),isNaN(s)&&(a=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10)),{name:r,version:s,isIE:o,isFirefox:l,isChrome:u,isSafari:c,isIos:/(iPad|iPhone|iPod)/g.test(navigator.platform),isIphone:/(iPhone|iPod)/g.test(navigator.userAgent),isTouch:"ontouchstart"in _e.documentElement}}function ye(e){if(!_e.querySelectorAll('script[src="'+e+'"]').length){var t=_e.createElement("script");t.src=e;var n=_e.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}}function Te(e,t){return Array.prototype.indexOf&&-1!==e.indexOf(t)}function Ae(e,t,n){return e.replace(new RegExp(t.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),n)}function Se(e,t){e.length||(e=[e]);for(var n=e.length-1;0<=n;n--){var i=0<n?t.cloneNode(!0):t,r=e[n],a=r.parentNode,s=r.nextSibling;return i.appendChild(r),s?a.insertBefore(i,s):a.appendChild(i),i}}function Re(e){e&&e.parentNode.removeChild(e)}function be(e,t){e.insertBefore(t,e.firstChild)}function Ie(e,t){for(var n in t)e.setAttribute(n,Ue.boolean(t[n])&&t[n]?"":t[n])}function Ce(e,t,n){var i=_e.createElement(e);Ie(i,n),be(t,i)}function Pe(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(/\s+/g," ").replace(" "+t+" ","");e.className=i+(n?" "+t:"")}}function we(e,t){return!!e&&(e.classList?e.classList.contains(t):new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className))}function Oe(e,t){var n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(e){return-1!==[].indexOf.call(_e.querySelectorAll(e),this)}).call(e,t)}function De(t,e,n,i,r){n&&Ne(t,e,function(e){n.apply(t,[e])},r),Ne(t,e,function(e){i.apply(t,[e])},r)}function l(e,t,n,i,r){var a=t.split(" ");if(Ue.boolean(r)||(r=!1),e instanceof NodeList)for(var s=0;s<e.length;s++)e[s]instanceof Node&&l(e[s],t,n,i);else for(var o=0;o<a.length;o++)e[i?"addEventListener":"removeEventListener"](a[o],n,r)}function Ne(e,t,n,i){e&&l(e,t,n,!0,i)}function Me(e,t,n,i){e&&l(e,t,n,!1,i)}function Le(e,t,n,i){if(e&&t){Ue.boolean(n)||(n=!1);var r=new CustomEvent(t,{bubbles:n,detail:i});e.dispatchEvent(r)}}function xe(e,t){if(e)return t=Ue.boolean(t)?t:!e.getAttribute("aria-pressed"),e.setAttribute("aria-pressed",t),t}function ke(e,t){return 0===e||0===t||isNaN(e)||isNaN(t)?0:(e/t*100).toFixed(2)}function Fe(){var e=arguments;if(e.length){if(1===e.length)return e[0];for(var t=Array.prototype.shift.call(e),n=e.length,i=0;i<n;i++){var r=e[i];for(var a in r)r[a]&&r[a].constructor&&r[a].constructor===Object?(t[a]=t[a]||{},Fe(t[a],r[a])):t[a]=r[a]}return t}}var Ue={object:function(e){return null!==e&&"object"==typeof e},array:function(e){return null!==e&&"object"==typeof e&&e.constructor===Array},number:function(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"==typeof e&&e.constructor===Number)},string:function(e){return null!==e&&("string"==typeof e||"object"==typeof e&&e.constructor===String)},boolean:function(e){return null!==e&&"boolean"==typeof e},nodeList:function(e){return null!==e&&e instanceof NodeList},htmlElement:function(e){return null!==e&&e instanceof HTMLElement},function:function(e){return null!==e&&"function"==typeof e},undefined:function(e){return null!==e&&void 0===e}};var Ve={supported:function(){try{pe.localStorage.setItem("___test","OK");var e=pe.localStorage.getItem("___test");return pe.localStorage.removeItem("___test"),"OK"===e}catch(e){return!1}return!1}()};function c(n,c){var r,d=this,a={},i=(d.media=n).cloneNode(!0);function h(e,t,n,i){Le(e,t,n,Fe({},i,{plyr:r}))}function e(e,t){c.debug&&pe.console&&(t=Array.prototype.slice.call(t),Ue.string(c.logPrefix)&&c.logPrefix.length&&t.unshift(c.logPrefix),console[e].apply(console,t))}var u=function(){e("log",arguments)},f=function(){e("warn",arguments)};function s(){return{url:c.iconUrl,absolute:0===c.iconUrl.indexOf("http")||d.browser.isIE&&!pe.svg4everybody}}function t(){if(d.supported.full&&("audio"!==d.type||c.fullscreen.allowAudio)&&c.fullscreen.enabled){var e=ge.supportsFullScreen;e||c.fullscreen.fallback&&!function(){try{return pe.self!==pe.top}catch(e){return!0}}()?(u((e?"Native":"Fallback")+" fullscreen enabled"),e||Pe(d.container,c.classes.fullscreen.fallback,!0),Pe(d.container,c.classes.fullscreen.enabled,!0)):u("Fullscreen not supported and fallback disabled"),d.buttons&&d.buttons.fullscreen&&xe(d.buttons.fullscreen,!1),y()}}function o(e){var t=E(c.selectors.sharepanel.shareTimeCheckbox);c.shareTimerAutoUpdate&&null!=t&&!we(t,"checked")&&null==E(".isMobileTab .popin__share")&&(E(c.selectors.sharepanel.shareTimeStart).value=function(e){var t=parseInt(e/60,10),n=parseInt(e%60,10),i=!1;n<10&&(n="0"+n);59<t&&(i=parseInt(t/60,10),t-=60*i);t<10&&(t="0"+t);i&&i<10&&(i="0"+i);return(i?i+":":"")+t+":"+n}(Math.round(e)))}function p(){null!=c.urls.urlPage&&""!=c.urls.urlPage||(c.urls.urlPage=pe.document.location.href);var e,t,n,i=E(c.selectors.sharepanel.shareEmbedInput);if(null!=i){var r=E(c.selectors.sharepanel.shareWidth).value,a=E(c.selectors.sharepanel.shareHeight).value;i.value=(e=c.urls.embed,t=r,n=a,null!=e&&""!=e?e.replace("http://www.wat.tv","//www.tf1.fr").replace("WIDTH",t).replace("HEIGHT",n):"")}var s=E(c.selectors.sharepanel.shareUrlInput);if(null!=s){var o=E(c.selectors.sharepanel.shareTimeStart),l=E(c.selectors.sharepanel.title__share);null!=o&&0!=o.value&&we(l,"checked")?(s.value=c.urls.urlPage+"#t="+function(e){if(""===e)return 0;var t,n,i=e.split(":"),r=0;3===i.length&&(r=parseInt(i[0],10),n=parseInt(i[1],10),t=parseInt(i[2],10));2===i.length&&(n=parseInt(i[0],10),t=parseInt(i[1],10));1===i.length&&(t=i[0]);return 3600*r+60*n+t}(o.value),we(o,"focusRunOnce")||s.focus()):s.value=c.urls.urlPage}}function _(e,t){var n,i,r="_hiddenCopyText_",a="INPUT"===e.tagName||"TEXTAREA"===e.tagName;if(a)n=(s=e).selectionStart,i=e.selectionEnd;else{if(!(s=_e.getElementById(r))){var s=_e.createElement("textarea");s.style.position="absolute",s.style.left="-9999px",s.style.top="0",s.id=r,_e.body.appendChild(s)}s.textContent=e.textContent}var o,l=_e.activeElement;s.focus(),s.setSelectionRange(0,s.value.length);try{o=_e.execCommand("copy")}catch(e){o=!1}if(l&&"function"==typeof l.focus&&l.focus(),a?e.setSelectionRange(n,i):s.textContent="",t&&o){var u=t.innerHTML;t.innerHTML="Copié",setTimeout(function(){t.innerHTML=u},2e3)}return o}function l(){if("video"===d.type){E(c.selectors.captions)||d.videoContainer.insertAdjacentHTML("afterbegin",'<div class="'+c.selectors.captions.replace(".","")+'"></div>'),d.usingTextTracks=!1,d.media.textTracks&&(d.usingTextTracks=!0);for(var e,t="",n=d.media.childNodes,i=0;i<n.length;i++)"track"===n[i].nodeName.toLowerCase()&&("captions"!==(e=n[i].kind)&&"subtitles"!==e||(t=n[i].getAttribute("src")));if(d.captionExists=!0,""===t?(d.captionExists=!1,u("No caption track found")):u("Caption track found; URI: "+t),d.captionExists){for(var r=d.media.textTracks,a=0;a<r.length;a++)r[a].mode="hidden";if(function(){if(!d.buttons.captions)return;Pe(d.container,c.classes.captions.enabled,!0);var e=d.storage.captionsEnabled;Ue.boolean(e)||(e=c.captions.defaultActive);e&&(Pe(d.container,c.classes.captions.active,!0),xe(d.buttons.captions,!0))}(),(d.browser.isIE&&10<=d.browser.version||d.browser.isFirefox&&31<=d.browser.version)&&(u("Detected browser with known TextTrack issues - using manual fallback"),d.usingTextTracks=!1),d.usingTextTracks){u("TextTracks supported");for(var s=0;s<r.length;s++){var o=r[s];"captions"!==o.kind&&"subtitles"!==o.kind||Ne(o,"cuechange",function(){this.activeCues[0]&&"text"in this.activeCues[0]?g(this.activeCues[0].getCueAsHTML()):g()})}}else if(u("TextTracks not supported so rendering captions manually"),d.currentCaption="",d.captions=[],""!==t){var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState)if(200===l.status){var e,t,n=l.responseText,i="\r\n";-1===n.indexOf(i+i)&&(i=-1!==n.indexOf("\r\r")?"\r":"\n"),e=n.split(i+i);for(var r=0;r<e.length;r++){t=e[r],d.captions[r]=[];var a=t.split(i),s=0;-1===a[s].indexOf(":")&&(s=1),d.captions[r]=[a[s],a[s+1]]}d.captions.shift(),u("Successfully loaded the caption file via AJAX")}else f(c.logPrefix+"There was a problem loading the caption file via AJAX")},l.open("get",t,!0),l.send()}}else Pe(d.container,c.classes.captions.enabled)}}function g(e){var t=E(c.selectors.captions),n=_e.createElement("span");t.innerHTML="",Ue.undefined(e)&&(e=""),Ue.string(e)?n.innerHTML=e.trim():n.appendChild(e),t.appendChild(n);t.offsetHeight}function m(e){function t(e,t){var n=[];n=e.split(" --\x3e ");for(var i=0;i<n.length;i++)n[i]=n[i].replace(/(\d+:\d+:\d+\.\d+).*/,"$1");return function(e){{if(null==e)return 0;var t=[],n=[];return t=e.split(","),n=t[0].split(":"),Math.floor(60*n[0]*60)+Math.floor(60*n[1])+Math.floor(n[2])}}(n[t])}function n(e){return t(e,1)}if(!d.usingTextTracks&&"video"===d.type&&d.supported.full&&(d.subcount=0,e=Ue.number(e)?e:d.media.currentTime,d.captions[d.subcount])){for(;n(d.captions[d.subcount][0])<e.toFixed(1);)if(d.subcount++,d.subcount>d.captions.length-1){d.subcount=d.captions.length-1;break}d.media.currentTime.toFixed(1)>=t(d.captions[d.subcount][0],0)&&d.media.currentTime.toFixed(1)<=n(d.captions[d.subcount][0])?(d.currentCaption=d.captions[d.subcount][1],g(d.currentCaption)):g()}}function v(e){return null==d.container&&null!=d.media&&(d.container=d.media.parentNode),d.container.querySelectorAll(e)}function E(e){return v(e)[0]}function y(){var e=v("input:not([disabled]), button:not([disabled])"),t=e[0],n=e[e.length-1];Ne(d.container,"keydown",function(e){9===e.which&&d.isFullscreen&&(e.target!==n||e.shiftKey?e.target===t&&e.shiftKey&&(e.preventDefault(),n.focus()):(e.preventDefault(),t.focus()))})}function T(e,t){if(Ue.string(t))Ce(e,d.media,{src:t});else if(t.constructor===Array)for(var n=t.length-1;0<=n;n--)Ce(e,d.media,t[n])}function A(){if(c.loadSprite){var e=s();e.absolute?(u("AJAX loading absolute SVG sprite"+(d.browser.isIE?" (due to IE)":"")),Be(e.url,"sprite-plyr")):u("Sprite will be used as external resource directly")}var t,n=c.html;if(u("Injecting custom controls"),n||(n=function(){var e=[],t=s(),n=(t.absolute?"":t.url)+"#"+c.iconPrefix;if(Te(c.controls,"share")&&e.push('<div class="popin__share">','<div class="title__share">',"<label>",'<input type="checkbox" class="shareTimeCheckbox">',"<span>Démarrer la vidéo à :</span>",'<input type="text" class="shareTimeStart" value="00:00">',"</label>",'<button class="button__close close__popin__share"></button>',"</div>",'<div class="content__share">',"<div>",'<h4 class="desktopContentShareTitle">Partager sur</h4>','<p class="mobileContentShareTitle">Partager cette vidéo sur :</p>','<div class="part__share">','<ul class="social__share">','<li><button class="social__icons facebook" data-href="//www.facebook.com/sharer.php?u="></button></li>','<li><button class="social__icons twitter" data-href="//twitter.com/intent/tweet?url="></button></li>','<li><button class="social__icons google" data-href="//plus.google.com/share?url="></button></li>','<li><button class="shareUrlCopyMobile">copier le lien</button></li>',"</ul>","<label>",'<input type="text" class="shareUrlInput">','<button class="shareUrlCopy" style="display: none">Copier</button>',"</label>",'<div class="spacer"></div>','<button class="popin__mobile__share__close">Fermer</button>',"</div>","</div>",'<div class="div__share">',"<h4>Intégrer</h4>",'<div class="part__share">',"<label>",'<textarea class="shareEmbedInput" name="textareaEmbed"></textarea>','<button class="shareEmbedCopy">Copier</button>','<div class="spacer"></div>',"</label>","</div>",'<div class="part__share" style="margin: 1.5em 0 0">',"<label>","<span>Taille :</span>",'<input type="text" class="shareWidth" value="640">',"<span> x </span>",'<input type="text" class="shareHeight" value="360">',"<span>px</span>","</label>","</div>","</div>","</div>","</div>"),Te(c.controls,"play-large")&&(Te(c.controls,"dvr")?e.push('<button type="button" data-plyr="play" class="plyr__play-large">','<span class="plyr__sr-only">'+c.i18n.play+"</span>","</button>"):e.push('<button type="button" data-plyr="play" class="plyr__play-large">','<svg><use xlink:href="'+n+'-play" /></svg>','<span class="plyr__sr-only">'+c.i18n.play+"</span>","</button>")),Te(c.controls,"play-large-mobile")&&(Te(c.controls,"dvrSeekMinus")&&e.push('<button class="mobileTabMinus10" type="button" data-plyr="minus10"></button>'),e.push('<button type="button" data-plyr="pause" class="plyr__play-large mobile">','<svg><use xlink:href="'+n+'-pause" /></svg>','<span class="plyr__sr-only">'+c.i18n.pause+"</span>","</button>"),e.push('<button type="button" data-plyr="play" class="plyr__play-large mobile">','<svg><use xlink:href="'+n+'-play" /></svg>','<span class="plyr__sr-only">'+c.i18n.play+"</span>","</button>"),Te(c.controls,"dvrSeekPlus")&&e.push('<button class="mobileTabPlus10" type="button" data-plyr="plus10"></button>')),Te(c.controls,"restart-large")&&(Te(c.controls,"dvr")?e.push('<button type="button" data-plyr="play" class="plyr__play-large plyr__restart-large">','<span class="plyr__sr-only">'+c.i18n.play+"</span>","</button>"):e.push('<button type="button" data-plyr="play" class="plyr__play-large plyr__restart-large">','<svg><use xlink:href="'+n+'-restart" /></svg>','<span class="plyr__sr-only">'+c.i18n.play+"</span>","</button>")),e.push('<div class="plyr__controls">'),Te(c.controls,"dvr")&&e.push('<div class="plyr__dvr">','<div class="plyr__dvr__poi__container"></div>','<div class="plyr__dvr__progress__container" data-plyr="dvrseek">','<div class="plyr__dvr__progress--virtual"></div>','<div class="plyr__dvr__progress--bg"></div>','<div class="plyr__dvr__progress--live"></div>',"</div>","</div>"),Te(c.controls,"restart")&&e.push('<button type="button" data-plyr="restart">','<svg><use xlink:href="'+n+'-restart" /></svg>','<span class="plyr__sr-only">'+c.i18n.restart+"</span>","</button>"),Te(c.controls,"liveLogo")&&e.push('<span class="direct-text">',"Direct","</span>",'<span class="channel-logo svg-'+c.channel+'">',"</span>"),Te(c.controls,"rewind")&&e.push('<button type="button" data-plyr="rewind">','<svg><use xlink:href="'+n+'-rewind" /></svg>','<span class="plyr__sr-only">'+c.i18n.rewind+"</span>","</button>"),Te(c.controls,"dvrSeekMinus")&&e.push('<button type="button" data-plyr="minus10"></button>'),Te(c.controls,"play")&&Te(c.controls,"dvr")&&e.push('<button type="button" data-plyr="play">','<span class="plyr__sr-only">'+c.i18n.play+"</span>","</button>",'<button type="button" data-plyr="pause">','<span class="plyr__sr-only">'+c.i18n.pause+"</span>","</button>"),Te(c.controls,"play")&&!Te(c.controls,"dvr")){var i=Te(c.controls,"ads")?"isAd":"";e.push('<button class="'+i+'" type="button" data-plyr="play">','<svg><use xlink:href="'+n+'-play" /></svg>','<span class="plyr__sr-only">'+c.i18n.play+"</span>","</button>",'<button class="'+i+'" type="button" data-plyr="pause">','<svg><use xlink:href="'+n+'-pause" /></svg>','<span class="plyr__sr-only">'+c.i18n.pause+"</span>","</button>")}return Te(c.controls,"dvrSeekPlus")&&e.push('<button type="button" data-plyr="plus10"></button>'),Te(c.controls,"fast-forward")&&e.push('<button type="button" data-plyr="fast-forward">','<svg><use xlink:href="'+n+'-fast-forward" /></svg>','<span class="plyr__sr-only">'+c.i18n.forward+"</span>","</button>"),Te(c.controls,"progress")&&(e.push('<span class="plyr__progress">','<label for="seek{id}" class="plyr__sr-only">Seek</label>','<input id="seek{id}" class="plyr__progress--seek" type="range" min="0" max="100" step="0.1" value="0" data-plyr="seek">','<progress class="plyr__progress--played" max="100" value="0" role="presentation"></progress>','<progress class="plyr__progress--buffer" max="100" value="0">',"<span>0</span>% "+c.i18n.buffered,"</progress>"),c.tooltips.seek&&e.push('<span class="plyr__tooltip"><span class="plyr__tooltip__text">00:00</span></span>'),e.push("</span>")),Te(c.controls,"live")&&c.newSkin?(e.push('<div class="plyr__time__container live">'),e.push('<span class="plyr__time">DIRECT</span>')):e.push('<div class="plyr__time__container">'),Te(c.controls,"current-time")&&e.push('<span class="plyr__time">','<span class="plyr__sr-only">'+c.i18n.currentTime+"</span>",'<span class="plyr__time--current">00:00</span>',"</span>"),Te(c.controls,"duration")&&e.push('<span class="plyr__time">','<span class="plyr__sr-only">'+c.i18n.duration+"</span>",'<span class="plyr__time--duration">00:00</span>',"</span>"),e.push("</div>"),!c.direct&&Te(c.controls,"share")&&e.push('<button class="share-btn" type="button" data-plyr="share">','<svg class="icon--share"><use xlink:href="'+n+'-partage" /></svg>',"</button>"),Te(c.controls,"mute")&&Te(c.controls,"dvr")&&e.push('<button type="button" data-plyr="mute">','<span class="icon--muted"></span>','<span class="icon--not--muted"></span>','<span class="plyr__sr-only">'+c.i18n.toggleMute+"</span>","</button>"),Te(c.controls,"mute")&&!Te(c.controls,"dvr")&&e.push('<button type="button" data-plyr="mute">','<svg class="icon--muted"><use xlink:href="'+n+'-muted" /></svg>','<svg class="icon--not--muted"><use xlink:href="'+n+'-volume" /></svg>','<span class="plyr__sr-only">'+c.i18n.toggleMute+"</span>","</button>"),Te(c.controls,"volume")&&e.push('<span class="plyr__volume">','<label for="volume{id}" class="plyr__sr-only">'+c.i18n.volume+"</label>",'<input id="volume{id}" class="plyr__volume--input" type="range" min="'+c.volumeMin+'" max="'+c.volumeMax+'" value="'+c.volume+'" data-plyr="volume">','<progress class="plyr__volume--display" max="'+c.volumeMax+'" value="'+c.volumeMin+'" role="presentation"></progress>',"</span>"),Te(c.controls,"captions")&&e.push('<button type="button" data-plyr="captions">','<svg class="icon--captions-on"><use xlink:href="'+n+'-captions-on" /></svg>','<svg><use xlink:href="'+n+'-captions-off" /></svg>','<span class="plyr__sr-only">'+c.i18n.toggleCaptions+"</span>","</button>"),Te(c.controls,"fullscreen")&&Te(c.controls,"dvr")&&e.push('<button type="button" data-plyr="fullscreen">','<span class="icon--exit-fullscreen"></span>','<span class="icon--enter-fullscreen"></span>','<span class="plyr__sr-only">'+c.i18n.toggleFullscreen+"</span>","</button>"),Te(c.controls,"fullscreen")&&!Te(c.controls,"dvr")&&e.push('<button type="button" data-plyr="fullscreen">','<svg class="icon--exit-fullscreen"><use xlink:href="'+n+'-exit-fullscreen" /></svg>','<svg><use xlink:href="'+n+'-enter-fullscreen" /></svg>','<span class="plyr__sr-only">'+c.i18n.toggleFullscreen+"</span>","</button>"),e.push("</div>"),e.push('<div class="plyr__controls__overlay"></div>'),e.join("")}()),n=Ae(n=Ae(n,"{seektime}",c.seekTime),"{id}",Math.floor(1e4*Math.random())),c.title&&(n=Ae(n,"{title}",c.title)),Ue.string(c.selectors.controls.container)&&(t=_e.querySelector(c.selectors.controls.container)),Ue.htmlElement(t)||(t=d.container),t.insertAdjacentHTML("beforeend",n),c.tooltips.controls)for(var i=v([c.selectors.controls.wrapper," ",c.selectors.labels," .",c.classes.hidden].join("")),r=i.length-1;0<=r;r--){var a=i[r];Pe(a,c.classes.hidden,!1),Pe(a,c.classes.tooltip,!0)}}function S(){Pe(d.container,c.selectors.container.replace(".",""),d.supported.full)}function R(e){e&&Te(c.types.html5,d.type)?d.media.setAttribute("controls",""):d.media.removeAttribute("controls")}function b(e){var t=c.i18n.play;if(Ue.string(c.title)&&c.title.length&&(t+=", "+c.title,d.container.setAttribute("aria-label",c.title)),d.supported.full&&d.buttons.play)for(var n=d.buttons.play.length-1;0<=n;n--)d.buttons.play[n].setAttribute("aria-label",t);Ue.htmlElement(e)&&e.setAttribute("title",c.i18n.frameTitle.replace("{title}",c.title))}function I(e){Ve.supported&&c.storage.enabled&&(Fe(d.storage,e),null!=e.volume&&c.storage.dontStoreVolume||pe.localStorage.setItem(c.storage.key,JSON.stringify(d.storage)))}function C(){if(d.media){if(d.supported.full&&(Pe(d.container,c.classes.type.replace("{0}",d.type),!0),Te(c.types.embed,d.type)&&Pe(d.container,c.classes.type.replace("{0}","video"),!0),Pe(d.container,c.classes.stopped,c.autoplay),Pe(d.container,c.classes.isIos,d.browser.isIos),Pe(d.container,c.classes.isTouch,d.browser.isTouch),"video"===d.type)){var e=_e.createElement("div");e.setAttribute("class",c.classes.videoWrapper),Se(d.media,e),d.videoContainer=e,d.videoContainer.insertAdjacentHTML("afterbegin",'<div class="ads__timer"><p>PUB : Votre vidéo dans un instant</p></div>');var t=[];t.push('<div class="player__spinner" hidden="">'),c.newSkin?(t.push('<div class="bounce1"></div>'),t.push('<div class="bounce2"></div>'),t.push('<div class="bounce3"></div>')):t.push("<div></div>"),t.push("</div>"),d.videoContainer.insertAdjacentHTML("afterbegin",t.join(""))}Ee().isIphone&&Ne(d.media,"play",P),Te(c.types.embed,d.type)&&function(){var e,t=_e.createElement("div"),n=d.type+"-"+Math.floor(1e4*Math.random());switch(d.type){case"youtube":r=d.embedId,e=r.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)?RegExp.$2:r;break;case"vimeo":i=d.embedId,e=i.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:i;break;default:e=d.embedId}var i;var r;for(var a=v('[id^="'+d.type+'-"]'),s=a.length-1;0<=s;s--)Re(a[s]);if(Pe(d.media,c.classes.videoWrapper,!0),Pe(d.media,c.classes.embedWrapper,!0),"youtube"===d.type)d.media.appendChild(t),t.setAttribute("id",n),Ue.object(pe.YT)?O(e,t):(ye(c.urls.youtube.api),pe.onYouTubeReadyCallbacks=pe.onYouTubeReadyCallbacks||[],pe.onYouTubeReadyCallbacks.push(function(){O(e,t)}),pe.onYouTubeIframeAPIReady=function(){pe.onYouTubeReadyCallbacks.forEach(function(e){e()})});else if("vimeo"===d.type)if(d.supported.full?d.media.appendChild(t):t=d.media,t.setAttribute("id",n),Ue.object(pe.Vimeo))D(e,t);else{ye(c.urls.vimeo.api);var o=pe.setInterval(function(){Ue.object(pe.Vimeo)&&(pe.clearInterval(o),D(e,t))},50)}else if("soundcloud"===d.type){var l=_e.createElement("iframe");l.loaded=!1,Ne(l,"load",function(){l.loaded=!0}),Ie(l,{src:"https://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/"+e,id:n}),t.appendChild(l),d.media.appendChild(t),pe.SC||ye(c.urls.soundcloud.api);var u=pe.setInterval(function(){pe.SC&&l.loaded&&(pe.clearInterval(u),function(){d.embed=pe.SC.Widget(this),d.embed.bind(pe.SC.Widget.Events.READY,function(){d.media.play=function(){d.embed.play(),d.media.paused=!1},d.media.pause=function(){d.embed.pause(),d.media.paused=!0},d.media.stop=function(){d.embed.seekTo(0),d.embed.pause(),d.media.paused=!0},d.media.paused=!0,d.media.currentTime=0,d.embed.getDuration(function(e){d.media.duration=e/1e3,w()}),d.embed.getPosition(function(e){d.media.currentTime=e,h(d.media,"timeupdate")}),d.embed.bind(pe.SC.Widget.Events.PLAY,function(){d.media.paused=!1,h(d.media,"play"),h(d.media,"playing")}),d.embed.bind(pe.SC.Widget.Events.PAUSE,function(){d.media.paused=!0,h(d.media,"pause")}),d.embed.bind(pe.SC.Widget.Events.PLAY_PROGRESS,function(e){d.media.seeking=!1,d.media.currentTime=e.currentPosition/1e3,h(d.media,"timeupdate")}),d.embed.bind(pe.SC.Widget.Events.LOAD_PROGRESS,function(e){d.media.buffered=e.loadProgress,h(d.media,"progress"),1===parseInt(e.loadProgress)&&h(d.media,"canplaythrough")}),d.embed.bind(pe.SC.Widget.Events.FINISH,function(){d.media.paused=!0,h(d.media,"ended")})})}.call(l))},50)}}()}else f("No media element found!")}function P(e){h(d.media,"iPhoneFirstClick",!0),Me(d.media,"play",P),d.media.controls=null}function w(){d.supported.full&&(he(),fe()),b(E("iframe"))}function O(e,t){d.embed=new pe.YT.Player(t.id,{videoId:e,playerVars:{autoplay:c.autoplay?1:0,controls:d.supported.full?0:1,rel:0,showinfo:0,iv_load_policy:3,cc_load_policy:c.captions.defaultActive?1:0,cc_lang_pref:"en",wmode:"transparent",modestbranding:1,disablekb:1,origin:"*"},events:{onError:function(e){h(d.container,"error",!0,{code:e.data,embed:e.target})},onReady:function(e){var t=e.target;d.media.play=function(){t.playVideo(),d.media.paused=!1},d.media.pause=function(){t.pauseVideo(),d.media.paused=!0},d.media.stop=function(){t.stopVideo(),d.media.paused=!0},d.media.duration=t.getDuration(),d.media.paused=!0,d.media.currentTime=0,d.media.muted=t.isMuted(),"function"==typeof t.getVideoData&&(c.title=t.getVideoData().title),d.supported.full&&d.media.querySelector("iframe").setAttribute("tabindex","-1"),w(),h(d.media,"timeupdate"),h(d.media,"durationchange"),pe.clearInterval(a.buffering),a.buffering=pe.setInterval(function(){d.media.buffered=t.getVideoLoadedFraction(),(null===d.media.lastBuffered||d.media.lastBuffered<d.media.buffered)&&h(d.media,"progress"),d.media.lastBuffered=d.media.buffered,1===d.media.buffered&&(pe.clearInterval(a.buffering),h(d.media,"canplaythrough"))},200)},onStateChange:function(e){var t=e.target;switch(pe.clearInterval(a.playing),e.data){case 0:d.media.paused=!0,h(d.media,"ended");break;case 1:d.media.paused=!1,d.media.seeking&&h(d.media,"seeked"),d.media.seeking=!1,h(d.media,"play"),h(d.media,"playing"),a.playing=pe.setInterval(function(){d.media.currentTime=t.getCurrentTime(),h(d.media,"timeupdate")},100),d.media.duration!==t.getDuration()&&(d.media.duration=t.getDuration(),h(d.media,"durationchange"));break;case 2:d.media.paused=!0,h(d.media,"pause")}h(d.container,"statechange",!1,{code:e.data})}}})}function D(e,t){var n={loop:c.loop,autoplay:c.autoplay,byline:!1,portrait:!1,title:!1,speed:!0,transparent:0};var i,r=(i=n,Object.keys(i).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(i[e])}).join("&")),a=_e.createElement("iframe"),s="https://player.vimeo.com/video/"+e+"?"+r;a.setAttribute("src",s),a.setAttribute("allowfullscreen",""),t.appendChild(a),d.embed=new pe.Vimeo.Player(a),d.media.play=function(){d.embed.play(),d.media.paused=!1},d.media.pause=function(){d.embed.pause(),d.media.paused=!0},d.media.stop=function(){d.embed.stop(),d.media.paused=!0},d.media.paused=!0,d.media.currentTime=0,w(),d.embed.getCurrentTime().then(function(e){d.media.currentTime=e,h(d.media,"timeupdate")}),d.embed.getDuration().then(function(e){d.media.duration=e,h(d.media,"durationchange")}),d.embed.on("loaded",function(){Ue.htmlElement(d.embed.element)&&d.supported.full&&d.embed.element.setAttribute("tabindex","-1")}),d.embed.on("play",function(){d.media.paused=!1,h(d.media,"play"),h(d.media,"playing")}),d.embed.on("pause",function(){d.media.paused=!0,h(d.media,"pause")}),d.embed.on("timeupdate",function(e){d.media.seeking=!1,d.media.currentTime=e.seconds,h(d.media,"timeupdate")}),d.embed.on("progress",function(e){d.media.buffered=e.percent,h(d.media,"progress"),1===parseInt(e.percent)&&h(d.media,"canplaythrough")}),d.embed.on("seeked",function(){d.media.seeking=!1,h(d.media,"seeked"),h(d.media,"play")}),d.embed.on("ended",function(){d.media.paused=!0,h(d.media,"ended")})}function N(){if("play"in d.media){var e=d.media.play();void 0!==e&&e.then(function(){}).catch(function(e){console.debug(e)})}}function M(){"pause"in d.media&&d.media.pause()}function L(e){return Ue.boolean(e)||(e=d.media.paused),e?N():M(),e}function x(e){c.seekEnabled&&(Ue.number(e)||(e=c.seekTime),F(d.media.currentTime-e))}function k(e){c.seekEnabled&&(Ue.number(e)||(e=c.seekTime),F(d.media.currentTime+e))}function F(e){if(c.seekEnabled){var t=0,n=d.media.paused,i=U();Ue.number(e)?t=e:Ue.object(e)&&Te(["input","change"],e.type)&&(t=e.target.value/e.target.max*i),t<0?t=0:i<t&&(t=i),ae(t);try{d.media.currentTime=t.toFixed(4)}catch(e){}if(Te(c.types.embed,d.type)){switch(d.type){case"youtube":d.embed.seekTo(t);break;case"vimeo":d.embed.setCurrentTime(t.toFixed(0));break;case"soundcloud":d.embed.seekTo(1e3*t)}n&&M(),h(d.media,"timeupdate"),d.media.seeking=!0,h(d.media,"seeking")}u("Seeking to "+d.media.currentTime+" seconds"),m(t)}}function U(){var e=parseInt(c.duration),t=0;return null===d.media.duration||isNaN(d.media.duration)||(t=d.media.duration),isNaN(e)?t:e}function V(){Pe(d.container,c.classes.playing,!d.media.paused),Pe(d.container,c.classes.stopped,d.media.paused),oe(d.media.paused)}function B(e){var t=ge.supportsFullScreen;if(t){if(!e||e.type!==ge.fullScreenEventName)return ge.isFullScreen(d.container)?ge.cancelFullScreen():(me={x:pe.pageXOffset||0,y:pe.pageYOffset||0},ge.requestFullScreen(d.container)),void(d.isFullscreen=ge.isFullScreen(d.container));d.isFullscreen=ge.isFullScreen(d.container)}else d.isFullscreen=!d.isFullscreen,_e.body.style.overflow=d.isFullscreen?"hidden":"";Pe(d.container,c.classes.fullscreen.active,d.isFullscreen),y(d.isFullscreen),d.buttons&&d.buttons.fullscreen&&xe(d.buttons.fullscreen,d.isFullscreen),h(d.container,d.isFullscreen?"enterfullscreen":"exitfullscreen",!0),!d.isFullscreen&&t&&pe.scrollTo(me.x,me.y)}function j(e){var t=c.classes.share+"--visible";d.isShareActive=null==d.isShareActive||0==d.isShareActive,c.shareTimerAutoUpdate=d.isShareActive,Pe(d.container,t,d.isShareActive),Pe(E(c.selectors.sharepanel.title__share),"checked",!1)}function H(e){var t=e.offsetX/d.buttons.dvrSeek.offsetWidth*100;h(d.container,"dvrSeek",!1,{offsetPercent:t})}function Y(e){h(d.container,"dvrSeekMinus")}function q(e){h(d.container,"dvrSeekPlus")}function K(e){h(d.container,"dvrSeekRetourDirect")}function G(e){var t=e.target.offsetLeft/d.buttons.dvrSeek.offsetWidth*100,n=e.target.getAttribute("data-type");h(d.container,"dvrPOIClick",!1,{offsetPercent:t,poiEventType:n})}function W(e,t){if(t&&(c.storage.dontStoreVolume=t),Ue.boolean(e)||(e=!d.media.muted),d.buttons&&xe(d.buttons.mute,e),d.media.muted=e,0===d.media.volume&&z(c.volume),Te(c.types.embed,d.type)){switch(d.type){case"youtube":d.embed[d.media.muted?"mute":"unMute"]();break;case"vimeo":case"soundcloud":d.embed.setVolume(d.media.muted?0:parseFloat(c.volume/c.volumeMax))}h(d.media,"volumechange")}}function z(e){var t=c.volumeMax,n=c.volumeMin;if(Ue.undefined(e)&&(e=d.storage.volume),(null===e||isNaN(e))&&(e=c.volume),t<e&&(e=t),e<n&&(e=n),d.media.volume=parseFloat(e/t),d.volume.display&&(d.volume.display.value=e),Te(c.types.embed,d.type)){switch(d.type){case"youtube":d.embed.setVolume(100*d.media.volume);break;case"vimeo":case"soundcloud":d.embed.setVolume(d.media.volume)}h(d.media,"volumechange")}0===e?d.media.muted=!0:d.media.muted&&0<e&&W()}function X(e){var t=d.media.muted?0:d.media.volume*c.volumeMax;Ue.number(e)||(e=c.volumeStep),z(t+e)}function Q(e){var t=d.media.muted?0:d.media.volume*c.volumeMax;Ue.number(e)||(e=c.volumeStep),z(t-e)}function J(){var e=d.media.muted?0:d.media.volume*c.volumeMax;d.supported.full&&(d.volume.input&&(d.volume.input.value=e),d.volume.display&&(d.volume.display.value=e)),I({volume:e}),Pe(d.container,c.classes.muted,0===e),d.supported.full&&d.buttons.mute&&xe(d.buttons.mute,0===e)}function Z(e){d.supported.full&&d.buttons.captions&&(Ue.boolean(e)||(e=-1===d.container.className.indexOf(c.classes.captions.active)),d.captionsEnabled=e,xe(d.buttons.captions,d.captionsEnabled),Pe(d.container,c.classes.captions.active,d.captionsEnabled),h(d.container,d.captionsEnabled?"captionsenabled":"captionsdisabled",!0),I({captionsEnabled:d.captionsEnabled}))}function $(e){var t="waiting"===e.type;clearTimeout(a.loading),a.loading=setTimeout(function(){Pe(d.container,c.classes.loading,t),oe(t)},t?250:0)}function ee(e){if(d.supported.full){var t,n=d.progress.played,i=0,r=U();if(e)switch(e.type){case"timeupdate":case"seeking":if(d.controls.pressed)return;i=ke(d.media.currentTime,r),"timeupdate"===e.type&&d.buttons.seek&&(d.buttons.seek.value=i);break;case"playing":case"progress":n=d.progress.buffer,i=(t=d.media.buffered)&&t.length?ke(t.end(0),r):Ue.number(t)?100*t:0}te(n,i)}}function te(e,t){if(d.supported.full){if(Ue.undefined(t)&&(t=0),Ue.undefined(e)){if(!d.progress||!d.progress.buffer)return;e=d.progress.buffer}Ue.htmlElement(e)?e.value=t:e&&(e.bar&&(e.bar.value=t),e.text&&(e.text.innerHTML=t))}}function ne(e,t){if(t){isNaN(e)&&(e=0),d.secs=parseInt(e%60),d.mins=parseInt(e/60%60),d.hours=parseInt(e/60/60%60);var n=0<parseInt(U()/60/60%60);d.secs=("0"+d.secs).slice(-2),d.mins=("0"+d.mins).slice(-2),t.innerHTML=(n?d.hours+":":"")+d.mins+":"+d.secs}}function ie(){if(d.supported.full){var e=U()||0;!d.duration&&c.displayDuration&&d.media.paused&&ne(e,d.currentTime),d.duration&&ne(e,d.duration),se()}}function re(e){ne(d.media.currentTime,d.currentTime),e&&"timeupdate"===e.type&&d.media.seeking||(ee(e),o(d.media.currentTime))}function ae(e){Ue.number(e)||(e=0);var t=ke(e,U());d.progress&&d.progress.played&&(d.progress.played.value=t),d.buttons&&d.buttons.seek&&(d.buttons.seek.value=t)}function se(e){var t=U();if(c.tooltips.seek&&d.progress.container&&0!==t){var n=d.progress.container.getBoundingClientRect(),i=0,r=c.classes.tooltip+"--visible";if(e)i=100/n.width*(e.pageX-n.left);else{if(!we(d.progress.tooltip,r))return;i=d.progress.tooltip.style.left.replace("%","")}i<0?i=0:100<i&&(i=100),ne(t/100*i,d.progress.tooltip.querySelector(".plyr__tooltip__text"));var a,s=d.progress.tooltip.offsetWidth/2,o=d.progress.tooltip.querySelector(".plyr__tooltip__text"),l=100/n.width*s,u=100-l;o.style.left=u<i?(a=100-i,n.width/100*a-s+"px"):i<l?(a=0-i,s+1+n.width/100*a+"px"):"0",d.progress.tooltip.style.left=i+"%",e&&Te(["mouseenter","mouseleave"],e.type)&&Pe(d.progress.tooltip,r,"mouseenter"===e.type)}}function oe(e){if(c.hideControls&&"audio"!==d.type){var t=0,n=!1,i=e,r=we(d.container,c.classes.loading);if(Ue.boolean(e)||(e&&e.type?(n="enterfullscreen"===e.type,i=Te(["mousemove","touchstart","mouseenter","touchend","focus"],e.type),Te(["mousemove","touchmove"],e.type)&&(t=2e3),"focus"===e.type&&(t=3e3)):i=we(d.container,c.classes.hideControls)),pe.clearTimeout(a.hover),i||d.media.paused||r){if(c.newSkin&&0==d.media.currentTime||Pe(d.container,c.classes.hideControls,!1),d.media.paused||r)return;Pe(d.container,c.classes.hideControls,!1),d.browser.isTouch&&(t=3e3)}i&&d.media.paused||(a.hover=pe.setTimeout(function(){(d.controls.pressed||d.controls.hover||d.isShareActive)&&!n||Pe(d.container,c.classes.hideControls,!0)},t))}}function le(){Pe(E("."+c.classes.tabFocus),c.classes.tabFocus,!1)}function ue(){c.hideControls&&d.browser.isTouch&&!d.media.paused||(d.media.paused?N():d.media.ended?(F(),N()):M())}function ce(){var e=d.browser.isIE?"change":"input";function t(){var e=L(),t=d.buttons[e?"play":"pause"],n=d.buttons[e?"pause":"play"];if(n&&(n=1<n.length?n[n.length-1]:n[0]),n){var i=we(t,c.classes.tabFocus);setTimeout(function(){n.focus(),i&&(Pe(t,c.classes.tabFocus,!1),Pe(n,c.classes.tabFocus,!0))},100)}}function i(){var e=_e.activeElement;return e=e&&e!==_e.body?_e.querySelector(":focus"):null}function r(e){return e.keyCode?e.keyCode:e.which}if(c.keyboardShorcuts.focused){var a=null;c.keyboardShorcuts.global&&Ne(pe,"keydown keyup",function(e){var t=r(e),n=i();1!==He().length||!Te([48,49,50,51,52,53,54,56,57,75,77,70,67],t)||Ue.htmlElement(n)&&Oe(n,c.selectors.editable)||s(e)}),Ne(d.container,"keydown keyup",s)}function s(e){var t=r(e),n="keydown"===e.type,i=n&&t===a;if(Ue.number(t)&&(!d.isShareActive||39!=t&&37!=t))if(n){switch(Te([32,75,38,40,77,39,37,70,67],t)&&(e.preventDefault(),e.stopPropagation()),t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:break;case 32:case 75:i||L();break;case 38:X();break;case 40:Q();break;case 77:i||W();break;case 39:k();break;case 37:x();break;case 70:B();break;case 67:i||Z()}!ge.supportsFullScreen&&d.isFullscreen&&27===t&&B(),a=t}else a=null}for(var n in Ne(pe,"keyup",function(e){var t=r(e),n=i();9===t&&function(e){for(var t in d.buttons){var n=d.buttons[t];if(Ue.nodeList(n))for(var i=0;i<n.length;i++)Pe(n[i],c.classes.tabFocus,n[i]===e);else Pe(n,c.classes.tabFocus,n===e)}}(n)}),Ne(_e.body,"click",le),d.buttons){var o=d.buttons[n];Ne(o,"blur",function(){Pe(o,"tab-focus",!1)})}De(d.buttons.play,"click",c.listeners.play,t),De(d.buttons.pause,"click",c.listeners.pause,t),De(d.buttons.restart,"click",c.listeners.restart,F),De(d.buttons.rewind,"click",c.listeners.rewind,x),De(d.buttons.forward,"click",c.listeners.forward,k),De(d.buttons.seek,e,c.listeners.seek,F),De(d.volume.input,e,c.listeners.volume,function(){z(d.volume.input.value)}),De(d.buttons.share,"click",c.listeners.share,j),De(d.buttons.dvrSeek,"click",c.listeners.dvrSeek,H),De(d.buttons.dvrSeekMinus,"click",c.listeners.dvrSeekMinus,Y),De(d.buttons.dvrSeekPlus,"click",c.listeners.dvrSeekPlus,q),De(d.buttons.dvrRetourDirect,"click",c.listeners.dvrRetourDirect,K),De(d.buttons.mute,"click",c.listeners.mute,W),De(d.buttons.fullscreen,"click",c.listeners.fullscreen,B),ge.supportsFullScreen&&Ne(_e,ge.fullScreenEventName,B),De(d.buttons.captions,"click",c.listeners.captions,Z),Ne(d.progress.container,"mouseenter mouseleave mousemove",se),c.hideControls&&(Ne(d.container,"mouseenter mouseleave mousemove touchstart touchend touchcancel touchmove enterfullscreen",oe),Ne(d.controls,"mouseenter mouseleave",function(e){d.controls.hover="mouseenter"===e.type}),Ne(d.controls,"mousedown mouseup touchstart touchend touchcancel",function(e){d.controls.pressed=Te(["mousedown","touchstart"],e.type)}),Ne(d.controls,"focus blur",oe,!0)),Ne(d.volume.input,"wheel",function(e){e.preventDefault();var t=e.webkitDirectionInvertedFromDevice,n=c.volumeStep/5;(e.deltaY<0||0<e.deltaX)&&(t?Q(n):X(n)),(0<e.deltaY||e.deltaX<0)&&(t?X(n):Q(n))})}function de(e,t){if(!d.init)return null;switch(d.type){case"youtube":pe.clearInterval(a.buffering),pe.clearInterval(a.playing),d.embed.destroy(),n();break;case"vimeo":d.embed.unload().then(n),a.cleanUp=pe.setTimeout(n,200);break;case"video":case"audio":R(!0),n()}function n(){clearTimeout(a.cleanUp),Ue.boolean(t)||(t=!0),Ue.function(e)&&e.call(i),t&&(d.init=!1,d.container.parentNode.replaceChild(i,d.container),d.container=null,_e.body.style.overflow="",Me(_e.body,"click",le),h(i,"destroyed",!0))}}function he(){if(!d.supported.full)return f("Basic support only",d.type),Re(E(c.selectors.controls.wrapper)),Re(E(c.selectors.buttons.play)),Re(E(c.selectors.buttons.dvrSeekMinus)),Re(E(c.selectors.buttons.dvrSeekPlus)),void R(!0);var e=!v(c.selectors.controls.wrapper).length;e&&A(),function(){try{return d.controls=E(c.selectors.controls.wrapper),d.buttons={},d.buttons.seek=E(c.selectors.buttons.seek),d.buttons.play=v(c.selectors.buttons.play),d.buttons.pause=E(c.selectors.buttons.pause),d.buttons.restart=E(c.selectors.buttons.restart),d.buttons.rewind=E(c.selectors.buttons.rewind),d.buttons.forward=E(c.selectors.buttons.forward),d.buttons.fullscreen=E(c.selectors.buttons.fullscreen),d.buttons.dvrSeek=E(c.selectors.buttons.dvrSeek),d.buttons.dvrSeekMinus=E(c.selectors.buttons.dvrSeekMinus),d.buttons.dvrSeekPlus=E(c.selectors.buttons.dvrSeekPlus),d.buttons.dvrRetourDirect=E(c.selectors.buttons.dvrRetourDirect),d.buttons.share=E(c.selectors.buttons.share),d.buttons.mute=E(c.selectors.buttons.mute),d.buttons.captions=E(c.selectors.buttons.captions),d.progress={},d.progress.container=E(c.selectors.progress.container),d.progress.buffer={},d.progress.buffer.bar=E(c.selectors.progress.buffer),d.progress.buffer.text=d.progress.buffer.bar&&d.progress.buffer.bar.getElementsByTagName("span")[0],d.progress.played=E(c.selectors.progress.played),d.progress.tooltip=d.progress.container&&d.progress.container.querySelector("."+c.classes.tooltip),d.volume={},d.volume.input=E(c.selectors.volume.input),d.volume.display=E(c.selectors.volume.display),d.duration=E(c.selectors.duration),d.currentTime=E(c.selectors.currentTime),d.seekTime=v(c.selectors.seekTime),d.share=E(c.selectors.sharepanel.container),!0}catch(e){return f("It looks like there is a problem with your controls HTML"),R(!0),!1}}()&&(e&&ce(),function(){if(Ne(d.media,"timeupdate seeking",re),Ne(d.media,"timeupdate",m),Ne(d.media,"durationchange loadedmetadata",ie),Ne(d.media,"ended",function(){"video"===d.type&&c.showPosterOnEnd&&("video"===d.type&&g(),F(),d.media.load())}),Ne(d.media,"progress playing",ee),Ne(d.media,"volumechange",J),Ne(d.media,"play pause ended",V),Ne(d.media,"waiting canplay seeked",$),!c.clickToPlay){if(!(e=E("."+c.classes.videoWrapper)))return;e.style.cursor="initial",Me(e,"click",ue)}if(c.clickToPlay&&"audio"!==d.type){var e;if(!(e=E("."+c.classes.videoWrapper)))return;Ne(e,"click",ue)}c.disableContextMenu&&Ne(d.media,"contextmenu",function(e){e.preventDefault()}),Ne(d.media,c.events.concat(["keyup","keydown"]).join(" "),function(e){h(d.container,e.type,!0)})}(),R(),t(),function(){var e=E(c.selectors.sharepanel.closeButton);null!=e&&e.addEventListener("click",function(){j()});var t=E(c.selectors.sharepanel.mobileCloseButton);null!=t&&t.addEventListener("click",function(){j()});var n=E(c.selectors.sharepanel.shareTimeCheckbox);null!=n&&(n.addEventListener("click",function(){var e=E(c.selectors.sharepanel.title__share);Pe(e,"checked",!we(e,"checked")),Pe(l,"focusRunOnce",!1),c.shareTimerAutoUpdate=!we(e,"checked"),p()}),n.addEventListener("change",function(){var e=E(c.selectors.sharepanel.title__share);c.shareTimerAutoUpdate=!we(e,"checked"),p()}));var i=E(c.selectors.sharepanel.shareEmbedCopy);null!=i&&i.addEventListener("click",function(){p(),_(E(c.selectors.sharepanel.shareEmbedInput),i)});var r=E(c.selectors.sharepanel.shareUrlCopyMobile),a=E(c.selectors.sharepanel.shareUrlInput);null!=a&&a.addEventListener("click",function(){this.select()}),null!=r&&r.addEventListener("click",function(){p(),_(a,r)});var s=E(".isMobileTab "+c.selectors.sharepanel.shareUrlInput);null!=s&&s.addEventListener("click",function(){s.select()});var o=[].slice.call(v(".social__icons"));null!=o&&o.forEach(function(t){t.addEventListener("click",function(){var e=t.getAttribute("data-href")+escape(E(".shareUrlInput").value);pe.open(e,"_blank")})});var l=E(c.selectors.sharepanel.shareTimeStart);null!=l&&(l.addEventListener("click",function(){c.shareTimerAutoUpdate=!1,Pe(E(c.selectors.sharepanel.title__share),"checked",!0),p()}),l.addEventListener("change",function(){p()}),l.addEventListener("input",function(){p()}),l.addEventListener("focusout",function(){var e=E(c.selectors.sharepanel.shareUrlInput);e.focus(),we(l,"focusRunOnce")||(e.scrollLeft=e.scrollWidth,Pe(l,"focusRunOnce",!0))})),p(),c.shareTimerAutoUpdate=!1}(),l(),z(),J(),re(),V(),ie())}function fe(){pe.setTimeout(function(){h(d.media,"ready")},0),Pe(d.media,ve.classes.setup,!0),Pe(d.container,c.classes.ready,!0),d.media.plyr=r,c.autoplay&&N()}return u("Config",c),r={getOriginal:function(){return i},getContainer:function(){return d.container},getEmbed:function(){return d.embed},getMedia:function(){return d.media},setMedia:function(e){d.media=e,he()},setClickToPlay:function(e){c.clickToPlay=e},setNewSkin:function(e){c.newSkin=e},setControls:function(e){c.controls=e,Re(E(c.selectors.controls.wrapper)),Re(E(c.selectors.sharepanel.container)),Re(E(c.selectors.buttons.play)),Re(E(c.selectors.buttons.pause)),Re(E(c.selectors.buttons.dvrSeekPlus)),Re(E(c.selectors.buttons.dvrSeekMinus)),Re(E(c.selectors.dvr.container)),Re(E(c.selectors.dvr.overlay)),he()},setAutohideControls:function(e){c.hideControls=e,Pe(d.container,c.classes.hideControls,e)},setSeekEnabled:function(e){c.seekEnabled=e},setShareURLs:function(e,t){c.urls.embed=e,c.urls.urlPage=t,p()},setChannel:function(e){c.channel=e},setLiveProgressPercent:function(e){E(c.selectors.dvr.live).style.width=e+"%"},setTimeswitchedProgressPercent:function(e){E(c.selectors.dvr.virtual).style.left=e+"%"},setTimeswitchedOffset:function(e){var t=c.classes.dvrOffset+"--visible";d.isDVROffsetActive=0<e.length,Pe(d.container,t,d.isDVROffsetActive),E(c.selectors.dvr.offsetTimer).innerHTML=e},getType:function(){return d.type},getDuration:U,setDuration:function(e){c.duration=e,h(d.media,"durationchange")},getCurrentTime:function(){return d.media.currentTime},getVolume:function(){return d.media.volume},isMuted:function(){return d.media.muted},isReady:function(){return we(d.container,c.classes.ready)},isLoading:function(){return we(d.container,c.classes.loading)},isPaused:function(){return d.media.paused},on:function(e,t){return Ne(d.container,e,t),this},play:N,pause:M,stop:function(){M(),F()},restart:F,rewind:x,forward:k,seek:F,source:function(e){if(Ue.undefined(e)){var t;switch(d.type){case"youtube":t=d.embed.getVideoUrl();break;case"vimeo":d.embed.getVideoUrl.then(function(e){t=e});break;case"soundcloud":d.embed.getCurrentSound(function(e){t=e.permalink_url});break;default:t=d.media.currentSrc}return t||""}!function(t){if(!(Ue.object(t)&&"sources"in t&&t.sources.length))return f("Invalid source format");Pe(d.container,c.classes.ready,!1),M(),ae(),te(),function(){if(Te(c.types.html5,d.type)){for(var e=d.media.querySelectorAll("source"),t=0;t<e.length;t++)Re(e[t]);d.media.setAttribute("src",c.blankUrl),d.media.load(),u("Cancelled network requests")}}(),de(function(){if(d.embed=null,Re(d.media),"video"===d.type&&d.videoContainer&&Re(d.videoContainer),d.container&&d.container.removeAttribute("class"),"type"in t&&(d.type=t.type,"video"===d.type)){var e=t.sources[0];"type"in e&&Te(c.types.embed,e.type)&&(d.type=e.type)}switch(d.supported=je(d.type),d.type){case"video":d.media=_e.createElement("video");break;case"audio":d.media=_e.createElement("audio");break;case"youtube":case"vimeo":case"soundcloud":d.media=_e.createElement("div"),d.embedId=t.sources[0].src}be(d.container,d.media),Ue.boolean(t.autoplay)&&(c.autoplay=t.autoplay),Te(c.types.html5,d.type)&&(c.crossorigin&&d.media.setAttribute("crossorigin",""),c.autoplay&&d.media.setAttribute("autoplay",""),"poster"in t&&d.media.setAttribute("poster",t.poster),c.loop&&d.media.setAttribute("loop","")),Pe(d.container,c.classes.fullscreen.active,d.isFullscreen),Pe(d.container,c.classes.captions.active,d.captionsEnabled),S(),Te(c.types.html5,d.type)&&T("source",t.sources),C(),Te(c.types.html5,d.type)&&("tracks"in t&&T("track",t.tracks),d.media.load()),(Te(c.types.html5,d.type)||Te(c.types.embed,d.type)&&!d.supported.full)&&(he(),fe()),c.title=t.title,b()},!1)}(e)},poster:function(e){"video"===d.type&&d.media.setAttribute("poster",e)},setVolume:z,togglePlay:L,toggleMute:W,toggleCaptions:Z,toggleDVR:function(e){var t=c.classes.dvr+"--visible";d.isDVRActive=e,Pe(d.container,t,d.isDVRActive)},setPOI:function(e){var t=E(c.selectors.poi.container),n="plyr__dvr__poi";e.offsetUp||(n+=" poi--offset--down");var i=_e.createElement("div"),r={class:n,"data-tcin":e.tcin,"data-title":encodeURIComponent(e.label),"data-type":e.type,style:"background-image:url("+e.iconUrl+");left:"+e.percentPosition+"%;"};Ce("div",i,{class:"plyr__dvr__poi__line"}),Ne(i,"click",G,!1),Ie(i,r),be(t,i)},clearPOIs:function(){var e=E(c.selectors.poi.container);if(e){var t=e.getElementsByClassName("plyr__dvr__poi");if(t&&0==t.length)return;for(var n in t)"object"==typeof t[n]&&Me(t[n],"click",G);e.innerHTML=""}},toggleFullscreen:B,toggleControls:oe,isFullscreen:function(){return d.isFullscreen||!1},support:function(e){return function(e,t){var n=e.media;if("video"===e.type)switch(t){case"video/webm":return!(!n.canPlayType||!n.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/,""));case"video/mp4":return!(!n.canPlayType||!n.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""));case"video/ogg":return!(!n.canPlayType||!n.canPlayType('video/ogg; codecs="theora"').replace(/no/,""))}else if("audio"===e.type)switch(t){case"audio/mpeg":return!(!n.canPlayType||!n.canPlayType("audio/mpeg;").replace(/no/,""));case"audio/ogg":return!(!n.canPlayType||!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""));case"audio/wav":return!(!n.canPlayType||!n.canPlayType('audio/wav; codecs="1"').replace(/no/,""))}return!1}(d,e)},destroy:de},function(){if(d.init)return;if(ge=function(t){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",element:null,prefix:""},n="webkit o moz ms khtml".split(" ");if(Ue.undefined(_e.cancelFullScreen))for(var i=0,r=n.length;i<r;i++){if(e.prefix=n[i],!Ue.undefined(_e[e.prefix+"CancelFullScreen"])){e.supportsFullScreen=!0;break}if(!Ue.undefined(_e.msExitFullscreen)&&_e.msFullscreenEnabled){e.prefix="ms",e.supportsFullScreen=!0;break}}else e.supportsFullScreen=!0;return e.supportsFullScreen&&(e.fullScreenEventName="ms"===e.prefix?"MSFullscreenChange":e.prefix+"fullscreenchange",e.isFullScreen=function(e){switch(Ue.undefined(e)&&(e=_e.body),null!=t&&(e=_e.getElementById(t)),this.prefix){case"":return _e.fullscreenElement===e;case"moz":return _e.mozFullScreenElement===e;default:return _e[this.prefix+"FullscreenElement"]===e}},e.requestFullScreen=function(e){return null!=t&&(e=_e.getElementById(t)),Ue.undefined(e)&&(e=_e.body),""===this.prefix?e.requestFullScreen():e[this.prefix+("ms"===this.prefix?"RequestFullscreen":"RequestFullScreen")]()},e.cancelFullScreen=function(){return""===this.prefix?_e.cancelFullScreen():_e[this.prefix+("ms"===this.prefix?"ExitFullscreen":"CancelFullScreen")]()},e.element=function(){return""===this.prefix?_e.fullscreenElement:_e[this.prefix+"FullscreenElement"]}),e}(c.playerContainer),d.browser=Ee(),Ue.htmlElement(d.media)){var e;d.storage={},Ve.supported&&c.storage.enabled&&(pe.localStorage.removeItem("plyr-volume"),(e=pe.localStorage.getItem(c.storage.key))&&(/^\d+(\.\d+)?$/.test(e)?I({volume:parseFloat(e)}):d.storage=JSON.parse(e)));var t=n.tagName.toLowerCase();"div"===t?(d.type=n.getAttribute("data-type"),d.embedId=n.getAttribute("data-video-id"),n.removeAttribute("data-type"),n.removeAttribute("data-video-id")):(d.type=t,c.crossorigin=null!==n.getAttribute("crossorigin"),c.autoplay=c.autoplay||null!==n.getAttribute("autoplay"),c.loop=c.loop||null!==n.getAttribute("loop")),d.supported=je(d.type),d.supported.basic&&(d.container=Se(n,_e.createElement("div")),d.container.setAttribute("tabindex",0),S(),u(d.browser.name+" "+d.browser.version),C(),(Te(c.types.html5,d.type)||Te(c.types.embed,d.type)&&!d.supported.full)&&(he(),fe(),b()),d.init=!0)}}(),d.init?r:null}function Be(e,t){var n=new XMLHttpRequest;if(!Ue.string(t)||!Ue.htmlElement(_e.querySelector("#"+t))){var i=_e.createElement("div");i.setAttribute("hidden",""),Ue.string(t)&&i.setAttribute("id",t),_e.body.insertBefore(i,_e.body.childNodes[0]),"withCredentials"in n&&(n.open("GET",e,!0),n.onload=function(){i.innerHTML=n.responseText},n.send())}}function je(e){var t=Ee(),n=t.isIE&&t.version<=9,i=t.isIos,r=t.isIphone,a=!!_e.createElement("audio").canPlayType,s=!!_e.createElement("video").canPlayType,o=!1,l=!1;switch(e){case"video":l=(o=s)&&!n;break;case"audio":l=(o=a)&&!n;break;case"vimeo":o=!0,l=!n&&!i;break;case"youtube":o=!0,l=!n&&!i,i&&!r&&10<=t.version&&(l=!0);break;case"soundcloud":o=!0,l=!n&&!r;break;default:l=(o=a&&s)&&!n}return{basic:o,full:l}}function He(e){if(Ue.string(e)?e=_e.querySelector(e):Ue.undefined(e)&&(e=_e.body),Ue.htmlElement(e)){var t=e.querySelectorAll("."+ve.classes.setup),n=[];return Array.prototype.slice.call(t).forEach(function(e){Ue.object(e.plyr)&&n.push(e.plyr)}),n}return[]}return{setup:function(e,o){var n=[],l=[],t=[ve.selectors.html5,ve.selectors.embed].join(",");if(Ue.string(e)?e=_e.querySelectorAll(e):Ue.htmlElement(e)?e=[e]:Ue.nodeList(e)||Ue.array(e)||Ue.string(e)||(Ue.undefined(o)&&Ue.object(e)&&(o=e),e=_e.querySelectorAll(t)),Ue.nodeList(e)&&(e=Array.prototype.slice.call(e)),!je().basic||!e.length)return!1;function i(e,t){we(t,ve.classes.hook)||n.push({target:e,media:t})}for(var r=0;r<e.length;r++){var a=e[r],s=a.querySelectorAll(t);if(s.length)for(var u=0;u<s.length;u++)i(a,s[u]);else Oe(a,t)&&i(a,a)}return n.forEach(function(e){var t=e.target,n=e.media,i={};try{i=JSON.parse(t.getAttribute("data-plyr"))}catch(e){}var r=Fe({},ve,o,i);if(!r.enabled)return null;var a=new c(n,r);if(Ue.object(a)){if(r.debug){var s=r.events.concat(["setup","statechange","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled"]);Ne(a.getContainer(),s.join(" "),function(e){console.log([r.logPrefix,"event:",e.type].join(" "),e.detail.plyr)})}Le(a.getContainer(),"setup",!0,{plyr:a}),l.push(a)}}),l},supported:je,loadSprite:Be,get:He}},"object"==typeof module&&"object"==typeof module.exports?module.exports=i(n,document):n.plyr=i(n,document),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}();try{var r,a;if(this.aPlyr=plyr.setup(e,t)[0],null==t)a=null;else a=!!t.__properties__&&(r=t.__properties__.get_newSkin)?t[r]():t.newSkin;this.setNewSkin("1"==a),this.createListeners()}catch(e){e instanceof Me&&(e=e.val),be.trace(e,{fileName:"PlyrManager.hx",lineNumber:35,className:"fr.tf1.etf1.core.module.skin.plyr.PlyrManager",methodName:"new"})}};le.__name__=!0,le.__super__=oe,le.prototype=n(oe.prototype,{createListeners:function(){this.aPlyr.on("playlistclick",Ve(this,this.onSkinEvent)),this.aPlyr.on("click",Ve(this,this.onSkinEvent)),this.aPlyr.on("setup",Ve(this,this.onSkinEvent)),this.aPlyr.on("ready",Ve(this,this.onSkinEvent)),this.aPlyr.on("canplay",Ve(this,this.onSkinEvent)),this.aPlyr.on("canplaythrough",Ve(this,this.onSkinEvent)),this.aPlyr.on("emptied",Ve(this,this.onSkinEvent)),this.aPlyr.on("ended",Ve(this,this.onSkinEvent)),this.aPlyr.on("error",Ve(this,this.onSkinEvent)),this.aPlyr.on("loadeddata",Ve(this,this.onSkinEvent)),this.aPlyr.on("loadedmetadata",Ve(this,this.onSkinEvent)),this.aPlyr.on("loadstart",Ve(this,this.onSkinEvent)),this.aPlyr.on("pause",Ve(this,this.onSkinEvent)),this.aPlyr.on("play",Ve(this,this.onSkinEvent)),this.aPlyr.on("playing",Ve(this,this.onSkinEvent)),this.aPlyr.on("seeked",Ve(this,this.onSkinEvent)),this.aPlyr.on("seeking",Ve(this,this.onSkinEvent)),this.aPlyr.on("stalled",Ve(this,this.onSkinEvent)),this.aPlyr.on("volumechange",Ve(this,this.onSkinEvent)),this.aPlyr.on("waiting",Ve(this,this.onSkinEvent)),this.aPlyr.on("enterfullscreen",Ve(this,this.onSkinEvent)),this.aPlyr.on("exitfullscreen",Ve(this,this.onSkinEvent)),this.aPlyr.on("captionsenabled",Ve(this,this.onSkinEvent)),this.aPlyr.on("captionsdisabled",Ve(this,this.onSkinEvent)),this.aPlyr.on("destroyed",Ve(this,this.onSkinEvent)),this.aPlyr.on("iPhoneFirstClick",Ve(this,this.onSkinEvent)),this.aPlyr.on("dvrSeek",Ve(this,this.onSkinEvent)),this.aPlyr.on("dvrSeekPlus",Ve(this,this.onSkinEvent)),this.aPlyr.on("dvrSeekMinus",Ve(this,this.onSkinEvent)),this.aPlyr.on("dvrSeekRetourDirect",Ve(this,this.onSkinEvent)),this.aPlyr.on("dvrPOIClick",Ve(this,this.onSkinEvent))},onSkinEvent:function(e){e.type;switch(e.type){case"click":try{var t,n;if(null==e)n=null;else n=!!e.__properties__&&(t=e.__properties__.get_srcElement)?e[t]():e.srcElement;var i=n.dataset.plyr,r=e.target.parentElement.dataset.plyr,a=e.target.parentElement.parentElement.dataset.plyr;if("play"==i||"play"==r||"play"==a)return void this.dispatchEvent(ae.userClickPlay);if("pause"==i||"pause"==r||"pause"==a)return void this.dispatchEvent(ae.userClickPause);if("restart"==i||"restart"==r||"restart"==a)return void this.dispatchEvent(ae.restart);var s=["volume","mute"];if(-1!=s.indexOf(i)||-1!=s.indexOf(r)||-1!=s.indexOf(a))return void this.dispatchEvent(ae.userVolumeChange,this.isMuted())}catch(e){}this.dispatchEvent(ae.playlistclick,e.target.parentElement.id);break;case"dvrPOIClick":this.dispatchEvent(ae.dvrPOIClick,e.detail.poiEventType,e.detail.offsetPercent);break;case"dvrSeek":this.dispatchEvent(ae.dvrSeek,e.detail.offsetPercent);break;case"dvrSeekMinus":this.dispatchEvent(ae.dvrSeekMinus);break;case"dvrSeekPlus":this.dispatchEvent(ae.dvrSeekPlus);break;case"dvrSeekRetourDirect":this.dispatchEvent(ae.dvrSeekRetourDirect);break;case"ended":this.dispatchEvent(ae.ended);break;case"enterfullscreen":Ie.delay(Ve(this,this.delayedEnterFullscreen),100);break;case"exitfullscreen":Ie.delay(Ve(this,this.delayedExitFullscreen),100);break;case"iPhoneFirstClick":this.dispatchEvent(ae.play);break;case"pause":this.dispatchEvent(ae.pause);break;case"play":this.dispatchEvent(ae.play);break;case"playlistclick":break;case"progress":case"timeupdate":": "+e.detail.plyr.getCurrentTime()}},delayedEnterFullscreen:function(){this.dispatchEvent(ae.resize,!0)},delayedExitFullscreen:function(){this.dispatchEvent(ae.resize,!1)},setPlay:function(){null!=this.aPlyr&&this.aPlyr.play()},setPause:function(){null!=this.aPlyr&&this.aPlyr.pause()},setPoster:function(e){null!=this.aPlyr&&this.aPlyr.poster(e)},setMute:function(){null!=this.aPlyr&&(this.aPlyr.isMuted()||this.aPlyr.toggleMute(!0,!0))},isMuted:function(){return null==this.aPlyr||this.aPlyr.isMuted()},getVolume:function(){return null==this.aPlyr?-1:this.aPlyr.getVolume()},setUnMute:function(){null!=this.aPlyr&&this.aPlyr.toggleMute(!1,!0)},setVolume:function(e){null!=this.aPlyr&&this.aPlyr.setVolume(10*e|0)},setSource:function(e){null!=this.aPlyr&&("string"==typeof e?this.aPlyr.source({type:"video",sources:[{src:e,type:"video/mp4"}]}):this.aPlyr.source(e))},toggleCaptions:function(e){null!=this.aPlyr&&this.aPlyr.toggleCaptions(e)},toggleControls:function(e){null!=this.aPlyr&&this.aPlyr.toggleControls(e)},destroy:function(){null!=this.aPlyr&&(this.aPlyr.destroy(),oe.prototype.destroy.call(this),this.aPlyr=null)},setSize:function(e,t){null!=this.aPlyr&&Te.isMobileTab()&&(this.aPlyr.getMedia().style.cssText="width:"+e+"px;height:"+t+"px;")},attachToElement:function(e){null!=this.aPlyr&&this.aPlyr.setMedia(e)},setNewSkin:function(e){null!=this.aPlyr&&(oe.prototype.setNewSkin.call(this,e),this.aPlyr.setNewSkin(e))},setControls:function(e){null!=this.aPlyr&&this.aPlyr.setControls(oe.prototype.getControls.call(this,e))},toggleDVR:function(e){null!=this.aPlyr&&this.aPlyr.toggleDVR(e)},setPOI:function(e){null!=this.aPlyr&&this.aPlyr.setPOI(e)},clearPOIs:function(){null!=this.aPlyr&&this.aPlyr.clearPOIs()},setTimeswitchedProgressPercent:function(e){null!=this.aPlyr&&this.aPlyr.setTimeswitchedProgressPercent(e)},setTimeswitchedOffset:function(e){null!=this.aPlyr&&this.aPlyr.setTimeswitchedOffset(e)},setLiveProgressPercent:function(e){null!=this.aPlyr&&this.aPlyr.setLiveProgressPercent(e)},setDuration:function(e){null!=this.aPlyr&&null!=e&&this.aPlyr.setDuration(e)},setAutohideControls:function(e){null!=this.aPlyr&&this.aPlyr.setAutohideControls(e)},setClickToPlay:function(e){null!=this.aPlyr&&this.aPlyr.setClickToPlay(e)},setSeekEnabled:function(e){null!=this.aPlyr&&this.aPlyr.setSeekEnabled(e)},setShareURLs:function(e,t){null!=this.aPlyr&&this.aPlyr.setShareURLs(e,t)},setChannel:function(e){null!=this.aPlyr&&(null==e&&(e="tf1"),"nt1"==e&&(e="tfx"),"hd1"==e&&(e="tf1-series-films"),this.aPlyr.setChannel(e))},__class__:le});var ue=function(e,t,n){if(this.adPaused=!1,this.mediaProgress=0,null!=e.get_yb()&&(this.catalog=e,this.config=n,this.adManager=t,1==n.debug&&(window.youbora.Log.logLevel=1),null!=this.catalog&&null!=this.catalog.get_delivery()&&(this.mediaResource=this.catalog.get_delivery().url),this.plugin=new window.youbora.Plugin(this.buildYouboraConstructorOptions()),this.plugin.getPlayerName=Ve(this,this.getPlayerName),this.plugin.getPlayerVersion=Ve(this,this.getPlayerVersion),this.adapter=new youbora.adapters.Html5(this.config.videoElement),this.adapter.unregisterListeners(),this.adapter.errorListener=Ve(this,this.adapterErrorListener),this.adapter.getPlayhead=Ve(this,this.getMediaPlayhead),this.adapter.getResource=Ve(this,this.getMediaResource),this.adapter.getRendition=Ve(this,this.getRendition),this.adapter.getThroughput=Ve(this,this.getThroughput),this.adapter.getBitrate=Ve(this,this.getBitrate),this.adapter.registerListeners(),this.plugin.setAdapter(this.adapter),null!=t&&(this.adsAdapter=new youbora.adapters.Freewheel(t),this.adsAdapter.unregisterListeners(),this.adsAdapter.errorListener=Ve(this,this.adsAdapterErrorListener),this.adsAdapter.slotListener=Ve(this,this.slotListener),this.adsAdapter.getResource=Ve(this,this.getAdResource),this.adsAdapter.closeListener=Ve(this,this.closeListener),this.adsAdapter.getPlayhead=Ve(this,this.getAdPlayhead),this.adsAdapter.registerListeners(),this.plugin.setAdsAdapter(this.adsAdapter),null!=t.fwProfile&&null!=t.fwWhere))){var i={"ad.campaign":fe.string(t.fwProfile)+":"+fe.string(t.fwWhere)};this.plugin.setOptions(i)}};ue.__name__=!0,ue.prototype={adsAdapterErrorListener:function(e){this.adsAdapter.fireError(e.errorCode||e.subType,e.errorInfo),this.adsAdapter.fireStop()},adapterErrorListener:function(e){try{if(4==e.currentTarget.error.code&&"MEDIA_ELEMENT_ERROR: Empty src attribute"==e.currentTarget.error.message||-1!=e.currentTarget.error.message.indexOf("MediaLoadInvalidURI"))return}catch(e){}this.adapter.fireError()},slotListener:function(e){this.adsAdapter.slot=e.slot;var t=e.slot.getTimePositionClass();this.adsAdapter.disable=!1,"DISPLAY"!=t&&("POSTROLL"==t?this.adsAdapter.position="post":"MIDROLL"==t?this.adsAdapter.position="mid":"PREROLL"==t?(this.adsAdapter.position="pre",this.adsAdapter.plugin.getAdapter()&&this.adsAdapter.plugin.getAdapter().flags.isJoined&&(this.adsAdapter.position="mid")):this.adsAdapter.disable=!0,this.adsAdapter.disable||(this.adsAdapter.titles=e.slot.getAdInstances(),this.adsAdapter.plugin.getAdapter()&&this.adsAdapter.canRemoveListeners&&(this.adsAdapter.canRemoveListeners=!1,this.adsAdapter.plugin.getAdapter().unregisterListeners(),this.adsAdapter.plugin.getAdapter().firePause()),this.adsAdapter.plugin.fireInit(),this.adsAdapter.fireInit()))},closeListener:function(e){"DISPLAY"!=e.slot.getTimePositionClass()&&(this.adsAdapter.register(),"post"!=this.adsAdapter.position||this.adsAdapter.disable||this.adsAdapter.plugin.fireStop({end:!0}))},getPlayerName:function(){return"TF1PlayerHTML5"},getPlayerVersion:function(){return b.VERSION},getMediaPlayhead:function(){return this.mediaProgress},getMediaResource:function(){return this.mediaResource},getAdResource:function(){return this.config.videoElement.currentSrc},getAdPlayhead:function(){var e=0;try{e=this.config.videoElement.currentTime}catch(e){}return e},getRendition:function(){var e="";try{var t=this.adapter.player.parentElement.dashMediaPlayer,n=t.getQualityFor("video"),i=t.getBitrateInfoListFor("video")[n];e=youbora.Util.buildRenditionString(i.width,i.height,i.bitrate)}catch(e){}return""!=e?e:null},getThroughput:function(){var e=-1;try{if(this.adapter.getCdnTraffic()&&0!=this.adapter.getCdnTraffic()){this.adapter.lastDataValue||(this.adapter.lastDataValue=0);var t=this.adapter.lastDataValue,n=this.adapter.getCdnTraffic(),i=this.adapter.getP2PTraffic();return this.adapter.lastDataValue=n+i,e=Math.round((this.adapter.lastDataValue-t)/(this.adapter.plugin._ping.interval/1e3))}if(!this.adapter.throughput){var r=this.adapter.player.parentElement.dashMediaPlayer,a=r.getMetricsFor("video"),s=r.getDashMetrics().getHttpRequests(a);if(null==s||0==s.length)return e=-1;for(var o=0,l=0,u=0,c=s.length;u<c;){var d=s[u++];if("MediaSegment"==d.type&&200<=d.responsecode&&d.responsecode<400&&"video"==d._stream){var h=new _("Content-Length: (.+)","i");if(h.match(d._responseHeaders)){var f=(d.interval-(d.tresponse-d.trequest))/1e3;o+=parseFloat(h.matched(1))/f*8,++l}}}0==o&&(e=-1),this.adapter.throughput=o/l}e=this.adapter.throughput}catch(e){}return e},getBitrate:function(){var e=-1;try{var t=this.adapter.player.parentElement.dashMediaPlayer,n=t.getQualityFor("video");e=t.getBitrateInfoListFor("video")[n].bitrate}catch(e){}return e},buildYouboraConstructorOptions:function(){var e=this.catalog.get_yb();e.media.isLive&&0!=e.media.duration&&(e.media.duration=0);for(var t,n,i,r,a,s,o,l,u={accountCode:e.accountCode,enabled:e.enableAnalytics,username:e.username,"content.transactionCode":e.transactionCode,"content.title":e.media.title,"content.duration":e.media.duration,"content.isLive":e.media.isLive,"content.metadata":{content_id:e.properties.content_id,genre:e.properties.genre,language:e.properties.language,year:e.properties.year,owner:e.properties.owner},"ad.campaign":e.ads.campaign},c=1;c<10;){var d,h,f=c++,p=e.extraParams,_="param"+f;if(null==p)h=null;else h=!!p.__properties__&&(d=p.__properties__["get_"+_])?p[d]():p[_];if("null"!=(t=fe.string(h))){var g,m="extraparam."+f;!!u.__properties__&&(g=u.__properties__["set_"+m])?u[g](t):u[m]=t}}null==u?i=null:i=!!u.__properties__&&(n=u.__properties__["get_extraparam.4"])?u[n]():u["extraparam.4"];null==i&&(!!u.__properties__&&(r=u.__properties__["set_extraparam.4"])?u[r]("HTML5"):u["extraparam.4"]="HTML5");null==u?s=null:s=!!u.__properties__&&(a=u.__properties__["get_extraparam.5"])?u[a]():u["extraparam.5"];if(null==s){var v,E,y=this.config;if(null==y)E=null;else E=!!y.__properties__&&(v=y.__properties__.get_device)?y[v]():y.device;var T,A="unknown";switch(E.toLowerCase()){case"desktop":A="DESKTOP";break;case"mobile":A="MOBILE";break;case"tablet":case"tablette":A="TABLETTE";break;case"tv":A="TV"}!!u.__properties__&&(T=u.__properties__["set_extraparam.5"])?u[T](A):u["extraparam.5"]=A}null==u?l=null:l=!!u.__properties__&&(o=u.__properties__["get_extraparam.11"])?u[o]():u["extraparam.11"];if(null==l){var S,R=b.VERSION;!!u.__properties__&&(S=u.__properties__["set_extraparam.11"])?u[S](R):u["extraparam.11"]=R}return u},sendAdPlay:function(){null!=this.adsAdapter&&this.adPaused&&(this.adPaused=!1,this.adsAdapter.resumeListener())},sendAdPause:function(){null==this.adsAdapter||this.adPaused||(this.adPaused=!0,this.adsAdapter.pauseListener())},onChapterChanged:function(e,t){null!=this.plugin&&this.plugin.setOptions({"content.title":t})},setAdTitle:function(e){null!=this.plugin&&this.plugin.setOptions({"ad.title":e})},fatalErrorHandler:function(e,t){null!=this.plugin&&(this.plugin.fireError(t),null!=this.adsAdapter&&(this.adsAdapter.unregisterListeners(),this.plugin.removeAdapter(this.adsAdapter),this.adsAdapter=null),null!=this.adapter&&(this.adapter.unregisterListeners(),this.plugin.removeAdapter(this.adapter),this.adapter=null),this.plugin=null)},errorHandler:function(e,t){null!=this.plugin&&this.plugin.fireError(t)},setMediaProgress:function(e){this.mediaProgress=e},__class__:ue};var ce={__ename__:!0,__constructs__:["ON_CHAPTER_CHANGED"],ON_CHAPTER_CHANGED:["ON_CHAPTER_CHANGED",0]};ce.ON_CHAPTER_CHANGED.__enum__=ce;var ge=function(e){s.call(this),this.hasChapters=!1,this.set_currentChapter(0),this.chapterIndexMap=this.createChapterIndexMap(e)};ge.__name__=!0,ge.main=function(){},ge.getEventEnumValue=function(e){return ce.ON_CHAPTER_CHANGED},ge.__super__=s,ge.prototype=n(s.prototype,{createChapterIndexMap:function(e){if(null==e)return null;for(var t=new Oe,n=new RegExp(".*-","g".split("u").join("")),i=0,r=0;r<e.length;){var a=e[r];++r;for(var s=fe.parseInt(a.tc_start.replace(n,"")),o=fe.parseInt(a.tc_end.replace(n,"")),l=s;l<o;)t.h[l++]=i;++i}return this.hasChapters=1<i,t},set_currentChapter:function(e){return this.currentChapter=e,this.dispatchEvent(ce.ON_CHAPTER_CHANGED,this.currentChapter),this.currentChapter},setProgress:function(e){if(this.hasChapters){var t=this.chapterIndexMap.h[0|e];t!=this.currentChapter&&null!=t&&this.set_currentChapter(t)}},__class__:ge,__properties__:{set_currentChapter:"set_currentChapter"}});var me=function(e,t,n,i,r){if(null!=i&&(this.container="string"==typeof i?window.document.getElementById(i):i),!(null==this.container||null!=t&&""!=t||null!=n&&""!=n)){n=t="100%";var a=this.container.getAttribute("style");null==a&&(a=""),a+="width:"+t+";position:relative;background-color:#000000;",this.container.setAttribute("style",a)}if(this.width=t,this.height=n,this.mediaId=e,null==this.container){var s="border:none;width:"+this.formatSize(this.width)+";position:relative;background-color:#000000";this.container=window.document.createElement("div");var o=this.mediaId+"_",l=ye.randomString();this.container.id=o+l,this.container.innerHTML="",this.container.setAttribute("style",s),window.document.activeElement.appendChild(this.container)}if(Te.isMobileTab()){if(null==this.container.id||""==this.container.id){var u=this.mediaId+"_",c=ye.randomString();this.container.id=u+c}this.adsContainerID="fw_"+this.container.id}else{var d=this.mediaId+"_"+ye.randomString();null!=this.container.id&&""!=this.container.id||(this.container.id=d),this.adsContainerID="fw_"+d}this.styleInitiale=this.container.getAttribute("style"),Te.isMobileTab()&&this.container.classList.add("isMobileTab");var h=window.document.createElement("img");h.setAttribute("style","width:100%;height:auto;position:absolute;z-index:99999"),this.previewDiv=window.document.createElement("div"),this.previewDiv.classList.add("player_preview"),this.previewDiv.appendChild(h),this.previewDiv.hidden=!0,this.container.appendChild(this.previewDiv);var f=window.document.createElement("img");f.setAttribute("style","width:100%;vertical-align:middle;position:absolute;z-index:-99999"),f.src="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7";var p=window.document.createElement("div");if(p.classList.add("player_placeholder"),p.appendChild(f),p.hidden=!1,this.container.appendChild(p),!me.cssFlag&&null!=r&&""!=r){var _=window.document.createElement("link");_.rel="stylesheet",_.href=r,window.document.head.appendChild(_),me.cssFlag=!0}this.registerOrientation(),this.initVideoContainer(e)};me.__name__=!0,me.prototype={formatSize:function(e){return null==e?"auto":("number"==typeof e&&(0|e)===e&&(e=null==e?"null":""+e),-1!=e.indexOf("%")?e:-1!=e.indexOf("px")?e:e+"px")},clearContents:function(e){window.document.getElementById(e).innerHTML=""},addSubtitles:function(e,t){var n=window.document.createElement("track");n.kind="captions",n.label="English captions",n.src=t,n.srclang="en",n.default=!0,this.videoElement.appendChild(n)},generateErrorNoticeContainer:function(){this.errorNoticeContainer=window.document.createElement("div"),this.errorNoticeContainer.classList.add("error__notice"),this.errorNoticeContainer.appendChild(window.document.createElement("p")),this.container.insertBefore(this.errorNoticeContainer,window.document.getElementById("ads__timer"))},showSpinner:function(){null==this.spinnerDiv&&(this.spinnerDiv=this.container.getElementsByClassName("player__spinner")[0]),null!=this.spinnerDiv&&(this.spinnerDiv.hidden=!1)},hideSpinner:function(){null==this.spinnerDiv&&(this.spinnerDiv=this.container.getElementsByClassName("player__spinner")[0]),null!=this.spinnerDiv&&(this.spinnerDiv.hidden=!0)},showErrorNotice:function(e){null==this.errorNoticeContainer&&this.generateErrorNoticeContainer(),null!=this.errorNoticeContainer&&(this.errorNoticeContainer.firstElementChild.innerHTML=ye.removeDoubleBRTags(e),this.errorNoticeContainer.hidden=!1)},hideErrorNotice:function(){null!=this.errorNoticeContainer&&(this.errorNoticeContainer.hidden=!0)},showAdsNotice:function(){null==this.adsNoticeContainer&&(this.adsNoticeContainer=this.container.getElementsByClassName("ads__timer")[0]),null!=this.adsNoticeContainer&&(this.adsNoticeContainer.hidden=!1)},updateTimerAdsNotice:function(e){null==this.adsNoticeContainer&&(this.adsNoticeContainer=this.container.getElementsByClassName("ads__timer")[0]),this.adsNoticeContainer.hidden=!1,this.adsNoticeContainer.innerHTML="<p>PUB : Votre vidéo dans "+e+" "+("1"==e?"seconde":"secondes")+"</p>"},hideAdsNotice:function(){null==this.adsNoticeContainer&&(this.adsNoticeContainer=this.container.getElementsByClassName("ads__timer")[0]),null!=this.adsNoticeContainer&&(this.adsNoticeContainer.hidden=!0)},hideAdInsertPreview:function(){this.previewDiv.hidden=!0},showAdInsertPreview:function(e){null!=e&&(Le.__cast(this.previewDiv.firstElementChild,HTMLImageElement).src=e,this.previewDiv.hidden=!1)},registerOrientation:function(){window.onorientationchange=Ve(this,this.orientationHandler)},orientationHandler:function(){this.resize(this.currentIsFullscreen)},resize:function(e,t,n){this.currentIsFullscreen=e;var i=this.width,r=this.height;e&&(r=Te.isIPad()?(i=this.getCurrentWidth()+"",this.getCurrentHeight()+""):Te.isIPhone()?(i=fe.string(window.screen.availWidth),fe.string(window.screen.availHeight)):i="100%"),null!=t&&null!=n&&(i=t,r=n);var a="";null!=i&&(a+="width:"+this.formatSize(i)+";"),null!=r&&(a+="height:"+this.formatSize(r)+";"),e?(Te.isIPad()&&(a="top:0px;left:0px;right:0px;bottom:0px;width:100%;z-index:1000;overflow:hiddden;position:fixed;"),this.container.setAttribute("style",a)):this.container.setAttribute("style",this.styleInitiale)},getCurrentWidth:function(){return this.container.offsetWidth},getCurrentHeight:function(){return this.container.offsetHeight},cleanVideoElementStyle:function(){null!=this.videoElement&&null!=this.videoElement.getAttribute("style")&&this.videoElement.removeAttribute("style")},initVideoContainer:function(e){this.videoElement=window.document.createElement("video");var t=ye.randomString();this.videoElement.id="videoElement_"+t,this.videoElement.setAttribute("disableRemotePlayback",""),this.videoElement.setAttribute("x-webkit-airplay","deny"),this.videoElement.setAttribute("playsinline",""),this.videoElement.load();var n=window.document.createElement("div");if(n.classList.add("video__container"),n.appendChild(this.videoElement),Te.isIPhone()){var i=window.document.createElement("style");i.innerHTML=["::-webkit-media-controls-play-button,::-webkit-media-controls-start-playback-button {","\topacity: 0;","\tpointer-events: none;","\twidth: 5px","}","::-webkit-media-controls-panel {","\tdisplay:none !important","\tpointer-events: none;","}"].join(""),n.insertBefore(i,this.videoElement)}this.container.appendChild(n)},getUpdatedVideoContainerID:function(){var e=Le.__cast(this.container.getElementsByTagName("video")[0].parentElement,HTMLDivElement);return""!=e.id&&null!=e.id||(e.id="fw_"+ye.randomString()),e.id},setAdMode:function(e){e?(this.setControlBackground(!1),this.showAdsNotice()):(this.setControlBackground(!0),this.hideAdsNotice())},setControlBackground:function(e){e?this.container.classList.remove("nobg"):this.container.classList.add("nobg")},setNewSkin:function(e){e?this.container.classList.add("newSkin"):this.container.classList.remove("newSkin")},getContainer:function(){return this.container},__class__:me};var ve={__ename__:!0,__constructs__:["onReady","onStart","onSlotStart","onSlotStop","onAdPlay","onAdPause","onAdStop","onAdPrerollStop","onAdMidrollStop","onUserPlay","onUserPause","onMediaPlay","onMediaPause","onMediaStop","onSeeked","clearCompanion","onEnterFullscreen","onExitFullscreen","onMediaTitleChange","onMediaChange","saveDMP","onMediaInfoFetched"],onReady:["onReady",0]};(ve.onReady.__enum__=ve).onStart=["onStart",1],(ve.onStart.__enum__=ve).onSlotStart=["onSlotStart",2],(ve.onSlotStart.__enum__=ve).onSlotStop=["onSlotStop",3],(ve.onSlotStop.__enum__=ve).onAdPlay=["onAdPlay",4],(ve.onAdPlay.__enum__=ve).onAdPause=["onAdPause",5],(ve.onAdPause.__enum__=ve).onAdStop=["onAdStop",6],(ve.onAdStop.__enum__=ve).onAdPrerollStop=["onAdPrerollStop",7],(ve.onAdPrerollStop.__enum__=ve).onAdMidrollStop=["onAdMidrollStop",8],(ve.onAdMidrollStop.__enum__=ve).onUserPlay=["onUserPlay",9],(ve.onUserPlay.__enum__=ve).onUserPause=["onUserPause",10],(ve.onUserPause.__enum__=ve).onMediaPlay=["onMediaPlay",11],(ve.onMediaPlay.__enum__=ve).onMediaPause=["onMediaPause",12],(ve.onMediaPause.__enum__=ve).onMediaStop=["onMediaStop",13],(ve.onMediaStop.__enum__=ve).onSeeked=["onSeeked",14],(ve.onSeeked.__enum__=ve).clearCompanion=["clearCompanion",15],(ve.clearCompanion.__enum__=ve).onEnterFullscreen=["onEnterFullscreen",16],(ve.onEnterFullscreen.__enum__=ve).onExitFullscreen=["onExitFullscreen",17],(ve.onExitFullscreen.__enum__=ve).onMediaTitleChange=["onMediaTitleChange",18],(ve.onMediaTitleChange.__enum__=ve).onMediaChange=["onMediaChange",19],(ve.onMediaChange.__enum__=ve).saveDMP=["saveDMP",20],(ve.saveDMP.__enum__=ve).onMediaInfoFetched=["onMediaInfoFetched",21],ve.onMediaInfoFetched.__enum__=ve;var Ee=function(){};Ee.__name__=!0,Ee.registerPlayer=function(e){Ee.players.push(e)},Ee.sendTracker=function(e){null!=e&&document.write("<img src="+e+" />")},Ee.requestFile=function(e,t,n,i){0==(fe.string(window.location)+"").indexOf("file:")&&0==e.indexOf("//")&&(e="https:"+e);var r=new Re(e);Ee.httpArray.push({obj:r,onSuccess:t,onError:n}),r.onData=Ee.requestFileOnSuccess,r.onError=Ee.requestFileOnError,null!=i&&r.setPostData(i),r.request(null!=i)},Ee.requestFileOnSuccess=function(e){Ee.notifyAndCleanMemory("SUCCESS")},Ee.requestFileOnError=function(e){Ee.notifyAndCleanMemory(e)},Ee.notifyAndCleanMemory=function(e){for(var t=0,n=Ee.httpArray;t<n.length;){var i=n[t];++t,null!=i.obj.responseData&&("SUCCESS"==e?null!=i.onSuccess&&i.onSuccess(i.obj.responseData):null!=i.onError&&i.onError(e),l.remove(Ee.httpArray,i),i.obj.onData=null,i.obj.onError=null,i.obj=null)}},Ee.dispatchEvent=function(e,t,n){var i;if("string"==typeof t&&(t=window.document.getElementById(t)),null!=t&&Ee.remoteDispatchingSupported)try{i=new Event(e[0]),t.dispatchEvent(i,n)}catch(e){e instanceof Me&&(e=e.val),Ee.remoteDispatchingSupported=!1;var r="This browser doesn't allow remote dispatching";null!=e.message?r+=': "'+fe.string(e.message)+'"':r+=': "'+fe.string(e)+'"',be.trace(r,{fileName:"IOManager.hx",lineNumber:165,className:"fr.tf1.etf1.core.tool.IOManager",methodName:"dispatchEvent"})}for(var a=0,s=Ee.players;a<s.length;){var o=s[a];++a;var l=!1;try{l=o.htmlHelper.container.id==t.id}catch(e){}l&&o.dispatchEvent(e,n)}},Ee.prototype={__class__:Ee};var ye=function(){};ye.__name__=!0,ye.queryStringToObject=function(e){if(null==e)return new Ne;for(var t=decodeURIComponent(e.split("+").join(" ")).split("&"),n=new Ne,i=0;i<t.length;){var r=t[i];if(++i,0!=r.length){var a=new RegExp("=.*","".split("u").join("")),s=r.replace(a,""),o=new RegExp(".*=","".split("u").join("")),l=r.replace(o,"");null!=Xe[s]?n.setReserved(s,l):n.h[s]=l}}return n},ye.processKeyValuePairsBySerializedJson=function(e){if(null==e)return new Ne;for(var t=JSON.parse(e),n=new Ne,i=0,r=he.fields(t);i<r.length;){var a=r[i];++i;var s=he.field(t,a);null!=Xe[a]?n.setReserved(a,s):n.h[a]=s}return n},ye.randomString=function(e){return null==e&&(e=5),l.substr(fe.string(Math.random()),2,2+e)},ye.osToPlatform=function(e){if(null==e)return"null";if(""==e)return"empty";var t=new _("(win|microsoft|apple|mac|ios|google|android|chrome|linux)","g");if(t.match(e.toLowerCase()))switch(t.matched(0)){case"android":return"android";case"apple":return"mac";case"chrome":case"google":return"android";case"ios":return"ios";case"linux":return"linux";case"mac":return"mac";case"microsoft":case"win":return"windows"}var n=new RegExp("\\s.*","".split("u").join(""));return e.replace(n,"").toLowerCase()},ye.secondsToAdInsertFormat=function(e){var t=e%60;return 60<=e?Math.round((e-t)/60)+"m"+(t<10?"0":"")+t:null==t?"null":""+t},ye.secondsToLiveOffset=function(e){var t=Math.floor(e/3600),n=(e%=3600)%60,i=Math.round((e-n)/60),r=t<10?"0"+t:null==t?"null":""+t;r+=":";var a=i<10?"0"+i:null==i?"null":""+i;return 0==t&&(r=""),r+(a+=":")+(n<10?"0"+n:null==n?"null":""+n)},ye.secondsToHumanReadable=function(e){var t=e%60;return Math.round((e-t)/60)+"m"+t+"s"},ye.tcInToSeconds=function(e){fe.string(fe.parseInt(e))==e&&(e+="s");var t=new _("(?:(\\d+)h)?(?:(\\d+)m)?(?:(\\d+)s)?(\\.?\\d+)?",""),n=0,i=new Ne,r={regexIndex:1,multiplier:3600};null!=Xe.hours?i.setReserved("hours",r):i.h.hours=r;var a={regexIndex:2,multiplier:60};null!=Xe.minutes?i.setReserved("minutes",a):i.h.minutes=a;var s={regexIndex:3,multiplier:1};null!=Xe.seconds?i.setReserved("seconds",s):i.h.seconds=s;var o={regexIndex:4,multiplier:.001};if(null!=Xe.milliseconds?i.setReserved("milliseconds",o):i.h.milliseconds=o,t.match(e))for(var l=new De(i,i.arrayKeys());l.hasNext();){var u=l.next(),c=t.matched(u.regexIndex);null!=c&&(n+=fe.parseInt(c)*u.multiplier)}return n},ye.findAndReplace=function(e,t){for(var n=0,i=t.length;n<i;){var r=n++,a=new RegExp("\\{("+r+")}","gi".split("u").join(""));e=e.replace(a,t[r])}return e},ye.http2https=function(e){var t=new RegExp("^https?","i".split("u").join(""));return e.replace(t,"https")},ye.parseArguments=function(e,t){var n=new _("^[#?]","");t=t.replace(n.r,"");var i=(n=new _("&","g")).split(t);n=new _("=","");for(var r=0;r<i.length;){var a=i[r];if(++r,""!=a){var s=n.split(a);e[s[0]]=s[1]}}return e},ye.iso8601ToTimestamp=function(e){var t=new Date(Date.parse(e)).valueOf();return Math.round(t/1e3)},ye.timestampToIso8601=function(e){return isNaN(e)?"0001-01-01T00:00:00Z":(10==fe.string(Math.round(e)).length&&(e*=1e3),new Date(Math.round(e)).toISOString())},ye.removeDoubleBRTags=function(e){var t=new RegExp("<br[\\s+]?/><br[\\s+]?/>","g".split("u").join(""));return e.replace(t,"<br>")};var Te=function(){};Te.__name__=!0,Te.isIOS=function(){return-1!=window.navigator.userAgent.toLowerCase().indexOf("iphone")||-1!=window.navigator.userAgent.toLowerCase().indexOf("ipad")},Te.isIPhone=function(){return-1!=window.navigator.userAgent.toLowerCase().indexOf("iphone")},Te.isIPad=function(){return-1!=window.navigator.userAgent.toLowerCase().indexOf("ipad")},Te.isAndroid=function(){return-1!=window.navigator.userAgent.toLowerCase().indexOf("android")},Te.isMobileTab=function(){return!!Te.isAndroid()||Te.isIOS()},Te.isSafari=function(){var e=window.navigator.userAgent.toLowerCase();return-1!=e.indexOf("safari")&&-1!=e.indexOf("macintosh")&&-1==e.indexOf("chrome")},Te.isSamsungBrowser=function(){return!!Te.isAndroid()&&-1!=window.navigator.userAgent.toLowerCase().indexOf("samsungbrowser")},Te.isWindows=function(){return-1!=window.navigator.userAgent.toLowerCase().indexOf("windows")},Te.isMSIEandNoMSE=function(){var e=window.navigator.userAgent,t=0,n=e.indexOf("MSIE ");if(0<n&&(t=fe.parseInt(e.substring(n+5,e.indexOf(".",n)))),0<e.indexOf("Trident/")){var i=e.indexOf("rv:");t=fe.parseInt(e.substring(i+3,e.indexOf(".",i)))}return-1!=e.toLowerCase().indexOf("Windows")&&0<t},Te.getDevice=function(){return Ae.getDevice()},Te.getOS=function(){return Ae.getOS()};var Ae=function(){};Ae.__name__=!0,Ae.getParser=function(){return new UAParser},Ae.getDevice=function(){null==Ae.parser&&(Ae.parser=Ae.getParser());var e=Ae.parser.getDevice().type;return null==e?"desktop":e.toLowerCase()},Ae.getOS=function(){return null==Ae.parser&&(Ae.parser=Ae.getParser()),Ae.parser.getOS().name.toLowerCase()},Ae.prototype={__class__:Ae};var Se=function(){};Se.__name__=!0;var Re=function(e){this.url=e,this.headers=new i,this.params=new i,this.async=!0,this.withCredentials=!1};Re.__name__=!0,Re.prototype={setPostData:function(e){return this.postData=e,this},request:function(e){var i=this;i.responseData=null;var r=this.req=xe.createXMLHttpRequest(),t=function(e){if(4==r.readyState){var t;try{t=r.status}catch(e){t=null}if(null!=t&&"undefined"!=typeof window){var n=window.location.protocol.toLowerCase();new _("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(n)&&(t=null!=r.responseText?200:404)}if(null==t&&(t=null),null!=t&&i.onStatus(t),null!=t&&200<=t&&t<400)i.req=null,Ve(i,i.onData)(i.responseData=r.responseText);else if(null==t)i.req=null,i.onError("Failed to connect or resolve host");else switch(t){case 12007:i.req=null,i.onError("Unknown host");break;case 12029:i.req=null,i.onError("Failed to connect to host");break;default:i.req=null,i.responseData=r.responseText,Ve(i,i.onError)("Http Error #"+r.status)}}};this.async&&(r.onreadystatechange=t);var n=this.postData;if(null!=n)e=!0;else for(var a=this.params.h;null!=a;){var s=a.item;a=a.next;var o=s;null==n?n="":n+="&";var l=o.param,u=encodeURIComponent(l)+"=",c=o.value;n+=u+encodeURIComponent(c)}try{if(e)r.open("POST",this.url,this.async);else if(null!=n){var d=this.url.split("?").length<=1;r.open("GET",this.url+(d?"?":"&")+n,this.async),n=null}else r.open("GET",this.url,this.async)}catch(e){return e instanceof Me&&(e=e.val),i.req=null,void Ve(this,this.onError)(e.toString())}r.withCredentials=this.withCredentials,!g.exists(this.headers,function(e){return"Content-Type"==e.header})&&e&&null==this.postData&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var h=this.headers.h;null!=h;){var f=h.item;h=h.next;var p=f;r.setRequestHeader(p.header,p.value)}r.send(n),this.async||t()},onData:function(e){},onError:function(e){},onStatus:function(e){},__class__:Re};var be=function(){};be.__name__=!0,be.trace=function(e,t){Le.__trace(e,t)};var Ie=function(e){var t=this;this.id=setInterval(function(){t.run()},e)};Ie.__name__=!0,Ie.delay=function(e,t){var n=new Ie(t);return n.run=function(){n.stop(),e()},n},Ie.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Ie};var Ce=function(){};Ce.__name__=!0,Ce.prototype={set:function(e,t){this.root=this.setLoop(e,t,this.root)},get:function(e){for(var t=this.root;null!=t;){var n=this.compare(e,t.key);if(0==n)return t.value;t=n<0?t.left:t.right}return null},exists:function(e){for(var t=this.root;null!=t;){var n=this.compare(e,t.key);if(0==n)return!0;t=n<0?t.left:t.right}return!1},setLoop:function(e,t,n){if(null==n)return new Pe(null,e,t,null);var i=this.compare(e,n.key);if(0==i)return new Pe(n.left,e,t,n.right,null==n?0:n._height);if(i<0)return this.balance(this.setLoop(e,t,n.left),n.key,n.value,n.right);var r=this.setLoop(e,t,n.right);return this.balance(n.left,n.key,n.value,r)},balance:function(e,t,n,i){var r=null==e?0:e._height,a=null==i?0:i._height;if(a+2<r){var s=e.left,o=e.right;return(null==s?0:s._height)>=(null==o?0:o._height)?new Pe(e.left,e.key,e.value,new Pe(e.right,t,n,i)):new Pe(new Pe(e.left,e.key,e.value,e.right.left),e.right.key,e.right.value,new Pe(e.right.right,t,n,i))}if(r+2<a){var l=i.right,u=i.left;return(null==l?0:l._height)>(null==u?0:u._height)?new Pe(new Pe(e,t,n,i.left),i.key,i.value,i.right):new Pe(new Pe(e,t,n,i.left.left),i.left.key,i.left.value,new Pe(i.left.right,i.key,i.value,i.right))}return new Pe(e,t,n,i,(a<r?r:a)+1)},compare:function(e,t){return he.compare(e,t)},__class__:Ce};var Pe=function(e,t,n,i,r){if(null==r&&(r=-1),this.left=e,this.key=t,this.value=n,this.right=i,-1==r){var a,s=this.left,o=this.right;if((null==s?0:s._height)>(null==o?0:o._height)){var l=this.left;a=null==l?0:l._height}else{var u=this.right;a=null==u?0:u._height}this._height=a+1}else this._height=r};Pe.__name__=!0,Pe.prototype={__class__:Pe};var we=function(){Ce.call(this)};we.__name__=!0,we.__interfaces__=[Se],we.__super__=Ce,we.prototype=n(Ce.prototype,{compare:function(e,t){var n=e[1]-t[1];if(0!=n)return n;var i=e.slice(2),r=t.slice(2);return 0==i.length&&0==r.length?0:this.compareArgs(i,r)},compareArgs:function(e,t){var n=e.length-t.length;if(0!=n)return n;for(var i=0,r=e.length;i<r;){var a=i++,s=this.compareArg(e[a],t[a]);if(0!=s)return s}return 0},compareArg:function(e,t){return he.isEnumValue(e)&&he.isEnumValue(t)?this.compare(e,t):e instanceof Array&&null==e.__enum__&&t instanceof Array&&null==t.__enum__?this.compareArgs(e,t):he.compare(e,t)},__class__:we});var Oe=function(){this.h={}};Oe.__name__=!0,Oe.__interfaces__=[Se],Oe.prototype={remove:function(e){return!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return l.iter(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e]}}},__class__:Oe};var De=function(e,t){this.map=e,this.keys=t,this.index=0,this.count=t.length};De.__name__=!0,De.prototype={hasNext:function(){return this.index<this.count},next:function(){var e=this.map,t=this.keys[this.index++];return null!=Xe[t]?e.getReserved(t):e.h[t]},__class__:De};var Ne=function(){this.h={}};Ne.__name__=!0,Ne.__interfaces__=[Se],Ne.prototype={setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},existsReserved:function(e){return null!=this.rh&&this.rh.hasOwnProperty("$"+e)},remove:function(e){return null!=Xe[e]?(e="$"+e,!(null==this.rh||!this.rh.hasOwnProperty(e))&&(delete this.rh[e],!0)):!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},keys:function(){return l.iter(this.arrayKeys())},arrayKeys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(t);if(null!=this.rh)for(var t in this.rh)36==t.charCodeAt(0)&&e.push(t.substr(1));return e},iterator:function(){return new De(this,this.arrayKeys())},__class__:Ne};var Me=function(e){Error.call(this),this.val=e,this.message=String(e),Error.captureStackTrace&&Error.captureStackTrace(this,Me)};Me.__name__=!0,Me.wrap=function(e){return e instanceof Error?e:new Me(e)},Me.__super__=Error,Me.prototype=n(Error.prototype,{__class__:Me});var Le=function(){};Le.__name__=!0,Le.__unhtml=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},Le.__trace=function(e,t){var n,i=null!=t?t.fileName+":"+t.lineNumber+": ":"";if(i+=Le.__string_rec(e,""),null!=t&&null!=t.customParams)for(var r=0,a=t.customParams;r<a.length;){var s=a[r];++r,i+=","+Le.__string_rec(s,"")}"undefined"!=typeof document&&null!=(n=document.getElementById("haxe:trace"))?n.innerHTML+=Le.__unhtml(i)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(i)},Le.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;if(null!=t)return t;var n=Le.__nativeClassName(e);return null!=n?Le.__resolveNativeClass(n):null},Le.__string_rec=function(e,t){if(null==e)return"null";if(5<=t.length)return"<...>";var n=typeof e;switch("function"==n&&(e.__name__||e.__ename__)&&(n="object"),n){case"function":return"<function>";case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var i=e[0]+"(";t+="\t";for(var r=2,a=e.length;r<a;){var s=r++;i+=2!=s?","+Le.__string_rec(e[s],t):Le.__string_rec(e[s],t)}return i+")"}var o="[";t+="\t";for(var l=0,u=e.length;l<u;){var c=l++;o+=(0<c?",":"")+Le.__string_rec(e[c],t)}return o+="]"}var d;try{d=e.toString}catch(e){return"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d){var h=e.toString();if("[object Object]"!=h)return h}var f=null,p="{\n";t+="\t";var _=null!=e.hasOwnProperty;for(var f in e)_&&!e.hasOwnProperty(f)||"prototype"!=f&&"__class__"!=f&&"__super__"!=f&&"__interfaces__"!=f&&"__properties__"!=f&&(2!=p.length&&(p+=", \n"),p+=t+f+" : "+Le.__string_rec(e[f],t));return p+="\n"+(t=t.substring(1))+"}";case"string":return e;default:return String(e)}},Le.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var n=e.__interfaces__;if(null!=n)for(var i=0,r=n.length;i<r;){var a=n[i++];if(a==t||Le.__interfLoop(a,t))return!0}return Le.__interfLoop(e.__super__,t)},Le.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array&&null==e.__enum__;case Ye:return"boolean"==typeof e;case je:return!0;case He:return"number"==typeof e;case Be:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t)return!0;if(Le.__interfLoop(Le.getClass(e),t))return!0}else if("object"==typeof t&&Le.__isNativeObj(t)&&e instanceof t)return!0;return t==We&&null!=e.__name__||(t==ze&&null!=e.__ename__||e.__enum__==t)}},Le.__cast=function(e,t){if(Le.__instanceof(e,t))return e;throw new Me("Cannot cast "+fe.string(e)+" to "+fe.string(t))},Le.__nativeClassName=function(e){var t=Le.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},Le.__isNativeObj=function(e){return null!=Le.__nativeClassName(e)},Le.__resolveNativeClass=function(e){return t[e]};var xe=function(){};function ke(e){return e instanceof Array?function(){return l.iter(e)}:"function"==typeof e.iterator?Ve(e,e.iterator):e.iterator}xe.__name__=!0,xe.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw new Me("Unable to create XMLHttpRequest object.")};var Fe,Ue=0;function Ve(e,t){return null==t?null:(null==t.__id__&&(t.__id__=Ue++),null==e.hx__closures__?e.hx__closures__={}:n=e.hx__closures__[t.__id__],null==n&&((n=function(){return n.method.apply(n.scope,arguments)}).scope=e,n.method=t,e.hx__closures__[t.__id__]=n),n);var n}String.prototype.__class__=String,String.__name__=!0,Array.__name__=!0,Date.prototype.__class__=Date,Date.__name__=["Date"];var Be={__name__:["Int"]},je={__name__:["Dynamic"]},He=Number;He.__name__=["Float"];var Ye=Boolean;Ye.__ename__=["Bool"];var qe,Ke,Ge,We={__name__:["Class"]},ze={},Xe={};o.DAY_SHORT_NAMES=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o.DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o.MONTH_SHORT_NAMES=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],u.STREAM_LOST_MAX_RETRY_COUNT=3,b.VERSION="1.0.76",f.canplay="canplay",f.playing="playing",f.pause="pause",f.seeked="seeked",f.seeking="seeking",f.timeupdate="timeupdate",f.ended="ended",f.loadstart="loadstart",f.adaptation="adaptation",f.error="error",E.videoMaxRetry=5,E.videoCheckDelay=1e3,X.QOS_PATH="//logs-qos.tf1.fr/logs",ee.HOST_PROD="//www.wat.tv",ee.HOST_PREPROD="//preprod.wat.tv",ee.HOST_NEW="https://player.tf1.fr/mediainfocombo/",ee.PATH="/interface/contentv4/",ee.GEOLOCK_PATH="https://delivery.tf1.fr/restrictions.xml",ne.HOST_PROD="https://mytf1-middle.tf1.fr/mytf1_prod/live-poi/pois/",ne.HOST_VAL="https://val-mytf1-middle.etf1.tf1.fr/mytf1_val1/live-poi/pois/",ne.HOST_INT="https://int-middle-apps.etf1.tf1.fr/mytf1_int1/live-poi/pois/",ne.HOST_LOCAL="http://localhost:88/util/live_api/liveapi_active.json?active=1&",oe.oldControls=((qe=new we).set(se.BLANK,[]),qe.set(se.ERROR,[]),qe.set(se.WAITING_LIVE,["live","liveLogo","play-large","mute","volume","fullscreen"]),qe.set(se.WAITING_VOD,["play-large","play","progress","current-time","duration","share","mute","volume","fullscreen"]),qe.set(se.RESTART,["restart","progress","current-time","duration","share","mute","volume","fullscreen"]),qe.set(se.ADS,["ads","play","mute","volume","fullscreen"]),qe.set(se.AD_INSERT,["ads","mute","volume","fullscreen"]),qe.set(se.VOD,["play","progress","current-time","duration","share","mute","volume","fullscreen"]),qe.set(se.LIVE,["live","liveLogo","mute","volume","fullscreen"]),qe.set(se.DVR,["dvrSeekMinus","play","dvrSeekPlus","liveLogo","mute","volume","fullscreen","dvr"]),qe),oe.mobileTabControls=((Ke=new we).set(se.BLANK,[]),Ke.set(se.ERROR,[]),Ke.set(se.WAITING_LIVE,["play-large"]),Ke.set(se.WAITING_VOD,["play-large"]),Ke.set(se.RESTART,["restart-large","progress","duration","fullscreen"]),Ke.set(se.ADS,["ads","play","fullscreen"]),Ke.set(se.AD_INSERT,["ads","live","fullscreen"]),Ke.set(se.VOD,["play-large-mobile","dvrSeekMinus","dvrSeekPlus","progress","duration","fullscreen"]),Ke.set(se.LIVE,["live","fullscreen"]),Ke.set(se.DVR,["play-large-mobile","dvrSeekMinus","dvrSeekPlus","liveLogo","mute","volume","fullscreen","dvr"]),Ke),oe.desktopControls=((Ge=new we).set(se.BLANK,[]),Ge.set(se.ERROR,[]),Ge.set(se.WAITING_LIVE,["live","liveLogo","play-large","mute","volume","fullscreen"]),Ge.set(se.WAITING_VOD,["play-large","dvrSeekMinus","play","dvrSeekPlus","progress","current-time","duration","share","mute","volume","fullscreen"]),Ge.set(se.RESTART,["restart","progress","current-time","duration","share","mute","volume","fullscreen"]),Ge.set(se.ADS,["ads","play","mute","volume","fullscreen"]),Ge.set(se.AD_INSERT,["ads","mute","volume","fullscreen"]),Ge.set(se.VOD,["dvrSeekMinus","play","dvrSeekPlus","progress","current-time","duration","share","mute","volume","fullscreen"]),Ge.set(se.LIVE,["live","mute","volume","fullscreen"]),Ge.set(se.DVR,["play","liveLogo","mute","volume","fullscreen","dvr"]),Ge),ue.playerName="TF1PlayerHTML5",me.PREVIEW_BLANK_POSTER="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7",Ee.httpArray=[],Ee.players=[],Ee.remoteDispatchingSupported=!0,Le.__toStr={}.toString,c.main()}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);