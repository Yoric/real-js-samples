var FavoritesSignInUtils;(function(n){function u(n,t){while(n&&n.getAttribute){var i=n.getAttribute("class");if(i&&i.indexOf(t)>=0)return n;n=n.parentNode}return null}function f(n){if(!n)return null;var t=n.querySelectorAll(".upsellBalloon");return t&&t.length?t[0]:(t=n.querySelectorAll("#signIn"),t&&t.length)?t[0]:null}function e(n){var u,t;favresources.favnsi===!0?n&&n.childNodes.length>=3&&(t=pMMUtils.gfbc("upsellLink",n),t.onclick=r,u=pMMUtils.gfbc("signInLater",n),u.onclick=function(){i(n)},s()):n&&n.childNodes.length>0&&(t=n.childNodes[0],t.onclick=r)}function o(){typeof Identity!="undefined"&&Identity.wlProfile()&&typeof LoadFavLogic!="undefined"&&(LoadFavLogic(),FavLog.l(FavLog.Type.SignIn))}function s(){SmartEvent.bind(_w,"click",t);SmartEvent.bind(_w,"scroll",t);SmartEvent.bind(_w,"unload",t);SmartEvent.bindc("ajax.unload",t)}function i(n){n&&(pMMUtils.sdt(n,DisplayType.None),FavLog.l(FavLog.Type.Click,FavLog.Meta.HideBalloon))}function t(t){var r=null,f;t&&t.srcElement&&(r=t.srcElement,r&&(f=u(r,"collicon"),f&&(r=f)));n.dispalyedBaloon&&n.dispalyedBaloon.parentNode.firstChild!==r&&i(n.dispalyedBaloon)}function r(){typeof Identity!="undefined"&&(pMMUtils.sdt(n.dispalyedBaloon,DisplayType.None),Identity.popupAuthenticate("WindowsLiveId"),FavLog.l(FavLog.Type.Click,FavLog.Meta.SignIn))}n.dispalyedBaloon=null;n.getBalloon=f;n.initHandlers=e;n.onSignIn=o})(FavoritesSignInUtils||(FavoritesSignInUtils={}))