!function(){"use strict";function e(){this.middlewares=[],this.events={}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){throw new Error('"'+e+'" is read-only')}e.prototype.on=function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},e.prototype.emit=function(e,t){var n=this.events[e];if(!n||0===n.length)return!1;for(var r,i=0;r=n[i++];)r.call(this,t)},e.prototype.use=function(e){return this.middlewares.push(e),this},e.prototype.init=function(){var e="https:"==location.protocol?"https://":"http://",t=document.createElement("script"),n=localStorage.getItem("PTSID");t.type="text/javascript",t.async=!1,t.charset="UTF-8",t.src=e+"pteengagejs.ptengine.jp/c."+n+".js?ts="+(new Date).getTime(),document.getElementsByTagName("head")[0].appendChild(t),window.$$__pt_engage_$=this},e.prototype.run=function(e){if(!e)return!1;var t=this,n={window:window,setting:e,engager:t},r=0;!function i(){var e=t.middlewares[r++];e&&e(n,i)}()};var l=("https:"==location.protocol?"https://":"http://")+"collect.ptengine.jp/egg";function d(e){var t=e.method,n=e.data,r=e.url,i=e.callback;t=t||"GET";var a=new XMLHttpRequest;"withCredentials"in a?a.open(t,r,!0):"undefined"!=typeof XDomainRequest?(u("xhr"),(a=new XDomainRequest).open(t,r)):(u("xhr"),a=null),a&&(i&&(a.onreadystatechange=function(){a.readyState!==XMLHttpRequest.DONE||200!==a.status&&201!==a.status||i(a.responseText)}),a.send(n))}function g(e,t){try{var n=function c(e,t,n){if(1===arguments.length){var r,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(r=document.cookie.match(i))?unescape(r[2]):null}if(1<arguments.length){var a,o="";n.expires&&("number"==typeof n.expires||n.expires.toUTCString)&&("number"==typeof n.expires?(a=new Date).setTime(a.getTime()+24*n.expires*60*60*1e3):a=n.expires,o="; expires="+a.toUTCString()),document.cookie=e+"="+t+o+"; path=/;"}}("pt_"+e);return-1!=n.indexOf(t)?n.split(t+"=")[1].split("&")[0]:""}catch(r){console.log(r)}}function f(e){return 1==function t(e){return+g(e=e||localStorage.getItem("PTSID"),"vn")}(e=e||localStorage.getItem("PTSID"))}function p(){try{var e=navigator.userAgent;return e?function r(){var e=navigator.platform.toLowerCase();if(-1<e.indexOf("win"))return!0;for(var t=["mac68k","macppc","macintosh","macintel"],n=0;n<t.length;n++)if(e==t[n])return!0;return!1}()||function i(e){for(var t=["AIX","Amiga","BeOS","DragonFly","FreeBSD","GNU","Haiku","HP-UX","IRIX","Joli","Java","Macintosh","Minix","MorphOS","NetBSD","OpenBSD","PClinuxOS","QNX x86pc","SunOS","Ubuntu","Mint","Red Hat","Slackware","SUSE","PCLinuxOS","Debian","Fedora","CentOS","Vine","Arch Linux","Gentoo","Kanotix","Mandriva"],n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(e)?function a(e){for(var t=["Android","AROS","Bada","BlackBerry","Chromium","CrOS","Danger Hiptop","Inferno","iPhone","iPad","iPod","Nintendo DS","Nintendo Wii","Palm OS","PLAYSTATION","Syllable","SymbOS","Symbian","Tizen","webOS","WebTV","Windows CE","Windows Mobile","Windows Phone","Xbox"],n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(e)?3:e.match(/.*MSIE.*Windows NT 6\.2;.*Touch\).*/)?4:2:-1<e.indexOf("iPad")||1e3<=Math.min(function n(){try{var e=window.screen.width;return e?isNaN(parseInt(e,10))?0:parseInt(e,10):0}catch(t){return 0}}(),window.screen.height)?4:1:0}catch(t){return 0}}function v(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function R(e,t){if(e){var n=JSON.parse(localStorage.getItem("engager")||"{}");n[e]=t,localStorage.setItem("engager",JSON.stringify(n))}}function V(e){var t;if(e){var n=JSON.parse(localStorage.getItem("engager")||"{}");n.hasOwnProperty(e)&&(t=n[e])}return t}function B(e,t){"true"==(localStorage.getItem("enableLog")||"false")&&console.log(e||"",t||"")}var t=function(){function e(){i(this,e),this.timezone=""}return a(e,[{key:"setTimeZone",value:function(e){this.timezone=e}},{key:"getProfileTimeStamp",value:function(){var e=0;if(this.timezone.trim()){var t,n=60*(new Date).getTimezoneOffset()*1e3*-1,r=this.timezone.replace(":"," ").split(" ");2==r.length&&(t=60*Number(r[0].slice(1))*60*1e3+60*Number(r[1])*1e3,t=Number(r[0].slice(0,1)+t));var i=n-t;e=Date.now()-i}return e}}]),e}(),h=new(function(){function e(){i(this,e),this.cache={}}return a(e,[{key:"get",value:function(e){return this.cache[e]}},{key:"set",value:function(e,t){this.cache[e]=t}}]),e}()),j=new t,m=function(){function e(){i(this,e)}return a(e,[{key:"validate",value:function(){throw{name:"ImplementError",message:"validate method should be implement by "+this.constructor.name}}}]),e}(),y=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(e,t){switch(t){case"Match":return e}return!1}}]),t}(),w=function(e){function t(){var e;return i(this,t),(e=s(this,c(t).call(this))).currentTerminalType=p(),e}return o(t,m),a(t,[{key:"validate",value:function(e,t){switch(t){case"==":return this.currentTerminalType==e;case"!=":return this.currentTerminalType!=e}return!1}}]),t}(),b=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(e,t){var n=f()?"NV":"RV";switch(t){case"==":return n==e;case"!=":return n!=e}return!1}}]),t}(),x=function(e){function n(e){var t;return i(this,n),(t=s(this,c(n).call(this))).type=e,t}return o(n,m),a(n,[{key:"validate",value:function(e,t){var n=function r(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?decodeURIComponent(n[2]):null}(this.type);switch(t){case"==":return n==e;case"!=":return n!=e;case"Rex":return new RegExp(e).test(n);case"[()]":return-1!=n.indexOf(e);case"[(":return new RegExp("^"+e).test(n);case")]":return new RegExp(e+"$").test(n)}return!1}}]),n}(),k=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(e,t){var n,r=document.referrer;switch(t){case"==":n=r==e;break;case"Rex":n=new RegExp(e).test(r);break;case"[()]":n=-1!=r.indexOf(e);break;case"[(":n=new RegExp("^"+r).test(e);break;case")]":n=new RegExp(r+"$").test(e);break;default:n=!1}return n}}]),t}(),T=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(e,t){var n,r=location.href;switch(t){case"==":n=r==e||r.slice(0,-1)==e;break;case"Rex":n=new RegExp(e).test(r);break;case"[()]":n=-1!=r.indexOf(e);break;case"[(":n=new RegExp("^"+e).test(r);break;case")]":n=new RegExp(e+"$").test(r);break;default:n=!1}return n}}]),t}(),S=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(e,t){var n=!1;try{var r=location.href;Array.isArray(t)||(t=JSON.parse(t));for(var i=0,a=t.length;i<a;i++){var o=t[i];switch(o.pattern){case 2:n=new RegExp(o.url).test(r);break;case 3:n=new RegExp("^"+o.url).test(r);break;case 4:n=new RegExp(o.url+"$").test(r);break;case 5:n=o.url==r;break;case 8:n=-1<r.indexOf(o.url)}}}catch(c){}return n}}]),t}(),E=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(e,t){var n=e.context,r=n.engager,i=e.current;e=e.value;var a=!1;"=="==t&&e&&v(document,"mousemove",function(e){e.clientY<50&&!a&&(r.emit("next",{context:n,current:i}),a=!0)})}}]),t}(),O=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(e,t){var n=e.context,r=n.engager,i=e.current;switch(t){case"==":setTimeout(function(){r.emit("next",{context:n,current:i})},1e3*+e.value);break;case">=":setTimeout(function(){r.emit("next",{context:n,current:i})},1e3*(+e.value+1))}}}]),t}(),I=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(i,e){var a=i.context,o=a.current,c=a.engager,s=(i=+i.value.replace("%",""),!1);v(document,"scroll",function(){setTimeout(function(){var e=parseInt(document.body.scrollHeight,10),t=document.documentElement.scrollTop||window.pageYOffset;isNaN(t)&&(screenTop=0);var n=parseFloat(t),r=parseInt(document.documentElement.clientHeight,10);i<=(n+r)/e*100&&!s&&(s=!0,c.emit("next",{context:a,current:o}))},50)})}}]),t}(),C=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(e,t){var n=e.value,r=e.context.current;switch(t){case">":+JSON.parse(V(r.exp_id)||"{}").seenTimes>=n?r.goNext=!1:r.goNext=!0}}}]),t}(),N=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(e,t){var n=e.context,r=e.value,i=n.current,a=JSON.parse(V(i.exp_id)||"{}");switch(t){case"==":!!a.hasClicked==r?i.goNext=!1:i.goNext=!0;break;case"!=":!!a.hasClicked!=r?i.goNext=!0:i.goNext=!1}}}]),t}(),_=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(e,t){var n,r=j.getProfileTimeStamp(),i=r||Date.now();if(i=String(i).slice(0,-3),Array.isArray(e)||(e=[e]),0<e.length){var a=e[0]&&i-e[0],o=e[1]&&e[1]-i;n=o?0<=o&&0<=a:a&&0<=a}else n=!0;return n}}]),t}(),A=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(e,t){var n=j.getProfileTimeStamp(),r=(n?new Date(n):new Date).getDay();return Array.isArray(e)||(e=[e]),0==e.length||7==e.length||-1<e.indexOf(r)}}]),t}(),D=function(e){function t(){return i(this,t),s(this,c(t).call(this))}return o(t,m),a(t,[{key:"validate",value:function(e,t){var n=j.getProfileTimeStamp(),r=n?new Date(n):new Date,i=r.getHours(),a=(i=i<10?"0"+i:i)+":"+r.getMinutes();Array.isArray(e)||(e=[e]);var o=!1;if(0<e.length){var c=e[0],s=e[1];c<=a&&a<=s&&(o=!0)}else o=!0;return o}}]),t}();function L(e){var t=h.get(e);if(!t){switch(e){case"TerminalType":t=new w;break;case"VisitType":t=new b;break;case"utmCampaign":case"utmSource":case"utmMedium":case"utmContent":case"utmTerm":t=new x(e);break;case"EntryPage":t=new k;break;case"URL":t=new T;break;case"PageGroup":t=new S;break;case"UserBlur":t=new E;break;case"UserStay":t=new O;break;case"ScrollMatch":t=new I;break;case"UtmParameter":t=new x;break;case"ClickButton":t=new N;break;case"SeenTimes":t=new C;break;case"Dater":t=new _;break;case"Week":t=new A;break;case"Time":t=new D;break;case"AsyncUserProps":t=new y}h.set(e,t)}return t}var P=function(){function r(e,t,n){i(this,r),this.value=e,this.condition=t,this.validator=n}return a(r,[{key:"setValue",value:function(e){this.value=e}},{key:"setCondition",value:function(e){this.condition=e}},{key:"setValidator",value:function(e){this.validator=e}},{key:"run",value:function(){var e;try{return this.validator.validate(this.value,this.condition)}catch(t){B(t.name,t.message),e=!1}return e}}]),r}();function M(e,t,n){return new P(e,t,n)}var J="LOCALVERSION",U=function U(e,t){if(B("the value of configs is:",t),t&&Array.isArray(t))for(var n=M(),r=0,i=t.length;r<i;r++){var a=t[r],o=a.trigger;if(o.displayFor&&0<o.displayFor.length){var c=o.displayFor;B("ready to validate the trigger condition:",c);for(var s=!0,u=0,l=c.length;u<l;u++){var d=c[u];if(n.setValue(d.value),n.setCondition(d.condition),n.setValidator(L(d.type)),B("start to validate the trigger condition",n),B("the result of validation is:",n.run()),!n.run()){B("not satisfied with trigger condition"),s=!1;break}}if(!s)continue}var g=a.experiments,f=g.rate,p=-1;if(V("EXPRATE_"+a.engageId)==Array.prototype.join.call(f,",")&&(p=+V(J+"_"+a.engageId)),B("local version",p),-1==p){var v=0,h=[];for(r=0,u=f.length;r<u;r++)h.push({min:v,max:v+f[r]}),v+=f[r];var m=Math.random();for(r=0,u=h.length;r<u;r++)if(m>=h[r].min&&m<h[r].max){p=r,R(J+"_"+a.engageId,p),R("EXPRATE_"+a.engageId,Array.prototype.join.call(f,","));break}B(h),B("random number is"+m,"whione = "),B("level"+r,"the min of range:",h[p].min,h[p].max)}var y=g.experiment[p];y&&(e.current=y,e.current.engagerId=a.engageId);var w=e.current,b=w.displayAt;if(n.setValue(b.value),n.setCondition(b.condition),n.setValidator(L(b.type)),B("current context ",e.current),B("validate value",n),B("the result of validation",n.run()),n.run()){if(B("ready to validate the stopToDisplay condition",w),w.stopToDisplay&&0<w.stopToDisplay.length)for(var x=w.stopToDisplay,k=0,T=x.length;k<T;k++){var S=x[k];if(n.setValue({value:S.value,current:e.current,context:e}),n.setCondition(S.condition),n.setValidator(L(S.type)),n.run(),!e.current.goNext){B("satisfied with stopToDisplay condition,stop to render engage");break}}else e.current.goNext=!0;B("validate displayTime condition",w);var E=!0;if(w.displayTime&&0<w.displayTime.length){var O=w.displayTime,I=w.timezone||{};j.setTimeZone(""),!I.useVisitor&&j.setTimeZone(I.profile||""),Array.isArray(O)||(O=[O]);for(var C=0;C<O.length;C++){var N=O[C];if(n.setValue(N.value),n.setValidator(L(N.type)),B("the result of dispalyTime validation",n.run()),!n.run()){E=!1,B("not satisfied with dispalyTime condition",n);break}}}if(B("validate startToDisplay condition",w),E&&e.current.goNext)if(w.startToDisplay&&0<w.startToDisplay.length){var _=w.startToDisplay;Array.isArray(_)||(_=[_]);for(var A=0,D=_.length;A<D;A++){var P=_[A];n.setValue({value:P.value,current:e.current,context:e}),n.setCondition(P.condition),n.setValidator(L(P.type)),n.run(),B("delay to enter the render staged...")}}else B("enter the render staged immediate..."),e.engager.emit("next",e)}}},X=function X(t,e){var n=Array.prototype.filter.call(e,function(e){return e.engage.engageId==t});return n&&0<n.length?n[0]:null},q=function q(e,t){for(var n=0,r=t.length;n<r;n++){var i=e[n];if(!i)break;var a=X(i.engageId,t);if(B("result = ",a),a){var o=a.displayFor;if(o.AND||o.OR){var c=o.AND,s=o.OR,u=!0,l=M();if(c){if(Array.isArray(c)&&0<c.length)for(var d=0,g=c.length;d<g;d++)if("boolean"==typeof c[d]){if(!c[d]){u=!1;break}u=u&&c[d]}else{var f=c[d];l.setCondition(f.condition),l.setValue(f.value),l.setValidator(L(f.type));var p=l.run();if(B("and ret =",p),!p){u=!1;break}u=u&&p}}else if(s&&(u=!1,Array.isArray(s)&&0<s.length))for(var v=0,h=s.length;v<h;v++)if("boolean"==typeof s[v]){if(s[v]){u=!0;break}u=u||s[v]}else{var m=s[v];l.setCondition(m.condition),l.setValue(m.value),l.setValidator(L(m.type));var y=l.run();if(B("or ret=",y),y){u=!0;break}u=u||y}e[n].trigger.displayFor=[{type:"AsyncUserProps",condition:"Match",value:u}],B("async config ",i)}}}return B("async configs",e),e},F=function F(e,i,a){var t=e.setting.sid,n="https:"==location.protocol?"https://":"http://";if(t){var r=function o(e){return g(e=e||localStorage.getItem("PTSID"),"uid")}(t);d({url:"".concat(n,"engagematch.ptengine.jp/match"),method:"POST",data:JSON.stringify({uid:r,sid:t}),callback:function(e){try{var t=JSON.parse(e);if(t.status&&"Success"==t.status){var n=q(i,t.result);a&&a(n)}}catch(r){B(r)}}})}};var H="position",$="pos-center",W="ptEngage",z="",G="",Y=p(),Z=1;function K(e,t){var n=e.current,r=(document.body,n.nodes[Y]||n.nodes[2]),i="engage-promotion-wrap_"+G;r.props.id&&(r.props.id=i);var a=function c(){var e=document.getElementById(W);e||((e=document.createElement("div")).setAttribute("id",W),document.body.appendChild(e));return e}(),o=Q(r);a.appendChild(o),Z=1,function d(o,c){var s=o.defaultOptions,e=document.body,t=document.querySelector(".engage-layer");if(s&&s.position==$&&!t){var n=document.createElement("div");n.setAttribute("class","engage-layer"),document.getElementsByTagName("html")[0].classList.add("engage-layer-open"),e.classList.add("engage-layer-open"),e.appendChild(n)}var r="engage-promotion-wrap_"+G,i=document.getElementById(r);s.img&&s.img.isBackground&&s.img.link&&v(i,"click",function(){if(s.img.isOpenNewWindow)try{window.open(s.img.link)}catch(a){B("not support to use window.open",a)}else window.location.href=s.img.link;var e=c.setting.sid,t=o.engagerId,n=o.exp_id,r=o.variant,i=o.triggerCondition;c.send("click",{sid:e,engagerId:t,engagerVerId:n,variant:r,triggerCondition:i})});var a=document.querySelector("#"+r+" .js-engage-a-img");a&&v(a,"load",function(){a.style.opacity="1",a.style.visibility="visible"});var u=document.querySelector("#"+r+" .engage-promotion-title");u&&(u.innerHTML=u.innerText);var l=document.querySelector("#"+r+" .engage-promotion-btn");l&&l.setAttribute("id",z)}(n,e),t&&"function"==typeof t&&t()}function Q(e){if("string"==typeof e||"number"==typeof e)return document.createTextNode(e);var t,n;1==Z?(t=document.createElement("div"),(n=e.props).hasOwnProperty("href")&&delete n.href):(t=document.createElement(e.tag),n=e.props),Z++,function i(e,t){for(var n in t)e.setAttribute(n,t[n])}(t,n);var r=e.children;return r&&r.map(Q).forEach(t.appendChild.bind(t)),t}function ee(e){B("running render dom...");var c=e.context||e;c.current=e.current,h.get(c.current.exp_id)||(z=c.current.exp_id,G=c.current.engagerId,K(c,function(){h.set(c.current.exp_id,c.current.exp_id);var e=c.setting.sid,t=c.current.engagerId,n=c.current.exp_id,r=c.current.variant,i=c.current.triggerCondition;c.send("view",{sid:e,engagerId:t,engagerVerId:n,variant:r,triggerCondition:i});var a=V(c.current.exp_id);if(null==a)a={seenTimes:1,hasClicked:0};else{var o=(a=JSON.parse(a)).seenTimes;a.seenTimes=Number(o)+1}R(c.current.exp_id,JSON.stringify(a))}),function n(a){var r=a.current.exp_id,e=document.getElementById(r),o=a.current.defaultOptions.position,c=a.setting.sid,s=a.current.engagerId,u=a.current.exp_id,l=a.current.variant,d=a.current.triggerCondition;e&&v(e,"click",function(e){a.send("click",{sid:c,engagerId:s,engagerVerId:u,variant:l,triggerCondition:d});var t=V(r);if(null==t)t={seenTimes:0,hasClicked:1};else{var n=(t=JSON.parse(t)).hasClicked;t.hasClicked=Number(n)+1}R(a.current.exp_id,JSON.stringify(t)),e.stopPropagation()});var t=document.querySelector("#engage-promotion-wrap_"+s+" .js-engage-promotion-close");t&&v(t,"click",function(e){a.send("close",{sid:c,engagerId:s,engagerVerId:u,variant:l,triggerCondition:d}),function i(e){var t=document.getElementById(W);t&&t.removeChild(document.getElementById(e))}("engage-promotion-wrap_"+s);var t=h.get(H),n=t.filter(function(e){return e!=o});if(h.set(H,n),o==$){var r=document.querySelectorAll(".engage-layer");0<r.length&&document.body.removeChild(r[0]),document.getElementsByTagName("html")[0].classList.remove("engage-layer-open"),document.body.classList.remove("engage-layer-open")}e.stopPropagation(),e.preventDefault()})}(c))}var te=function(e){!function t(){var e=document.getElementById(W);e&&document.body.removeChild(e)}(),e.on("next",function(e){B("call render..."),function i(e){B("running render module"),B(e),B("render finished,all over");var t=e.current.defaultOptions;if(function r(e){var t,n=h.get(H)||[];t=1==Y?!n.length:!(-1<n.indexOf(e));return t}(t.position)){var n=h.get(H)||[];n[n.length]=t.position,h.set(H,n),ee(e)}}(e)})};var ne="__pt__engager__common__style",re=function(e){e.on("next",function(){if(!document.getElementById(ne)){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.id=ne,e.href=("https:"==location.protocol?"https://":"http://")+"pteengagecss.ptengine.jp/styles/engager.css",document.getElementsByTagName("head")[0].appendChild(e)}!function t(){var e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(".engage-promotion-wrap{display:none}")),document.getElementsByTagName("head")[0].appendChild(e)}()})};function ie(e,t){window.CustomEvent=window.CustomEvent||function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return e.prototype=window.Event.prototype,e}();try{return new window.CustomEvent(e,t)}catch(n){return null}}var ae=new e;ae.use(function oe(e,t){try{var n=new ie("ptEngageReady",{bubbles:!1,cancelable:!1,detail:{}});n&&(document.dispatchEvent&&"function"==typeof document.dispatchEvent?document.dispatchEvent(n):document.fireEvent&&"function"==typeof document.fireEvent&&document.fireEvent(n),window.ptEngage=e.engage)}catch(r){console.log("catch phase invoke !")}t()}).use(function ce(e,t){B("running sender module"),B("mounted the send to context，send to collect package"),e.send=function(e,t){var n=t.sid,r=t.engagerId,i=t.engagerVerId,a=t.variant||{},o=t.triggerCondition;"click"==e&&(o="click");var c=localStorage.getItem("PT_ID_"+n);if(c){var s=c.split(".");!function u(e){return d({method:"POST",data:encodeURIComponent(JSON.stringify(e)),url:l})}({sid:n=s[0],uid:s[1],vid:s[2],pid:s[3],peid:s[4],ts:(new Date).getTime(),engagerId:r,engagerVerId:i,triggerCondition:o,engagerType:e,variant:a})}},B("init sender finished,ready to enter trigger staged..."),t()}).use(function se(t){if(window.localStorage){B("ready to enter triger staged",t),localStorage.setItem("PTSID",t.setting.sid);for(var e=(t.setting||{}).configs||[],n=[],r=[],i=0,a=e.length;i<a;i++){var o=e[i];o.async?n.push(o):r.push(o)}U(t,r),0<n.length&&F(t,n,function(e){return U(t,e)})}else B("not support to use localstorage")}),re(ae),te(ae),ae.init()}();
//# sourceMappingURL=http://localhost:8080/bundle.js.map