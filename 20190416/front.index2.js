function AddrSuggest(e,t){if(W(e).length==0)return null;t=t||{},this.obj=W(e),this.curObj=null,this.data=null,this.suglist=null,this.defsug=null,this.showNum=t.showNum||10,this.onSelect=t.onSelect||null,this.requireCity=t.requireCity||function(){return""},this.noDefSug=t.noDefSug||!1,this.zIndex=t.zIndex||999,this._cacheData={};var n,r=this;this.init=function(){var e=this;if(!AMap||!AMap.Map)return setTimeout(function(){e.init()},300),!1;var t="aMapContainer"+Math.ceil(Math.random()*1e4);W('<div id="'+t+'"></div>').appendTo(W("body")).hide(),n=new AMap.Map(t),this.createDropList(),this.createDefSug(),this.showDefaultTxt(),this.bindEvent()},this.bindEvent=function(){var e=this.obj;e.on("focus",function(){var e=W(this),t=e.attr("data-default")||"";r.setCurObj(e),r.resetSugListPos(r.suglist),r.resetSugListPos(r.defsug),t==e.val()?(e.val(""),r.noDefSug||r.defsug.show().css({"z-index":tcb.zIndex()})):e.val().length>0&&(r.fetchSug(e.val()),r.defsug.hide()),e.removeClass("default")}),e.on("blur",function(){var e=W(this),t=e.val(),n=e.attr("data-default")||"";t==""&&n&&(e.val(n),t=n),setTimeout(function(){r.suglist.hide()},160),t==n&&e.addClass("default"),r.defsug.hide()}),e.on("keyup",function(e){var t=W(this),n=t.attr("data-default")||"";r.setCurObj(t);if(e.keyCode==38)r.selectItem(-1);else if(e.keyCode==40)r.selectItem(1);else if(e.keyCode==13){var i=r.suglist.one(".on");i.length>0&&i.fire("click")}else t.val()!=""&&t.val()!=n?(r.fetchSug(t.val()),r.defsug.hide()):(r.suglist.hide(),r.noDefSug||r.defsug.show().css({"z-index":tcb.zIndex()}))}),e.on("input",function(e){var t=W(this),n=t.attr("data-default")||"";r.setCurObj(t);if(e.keyCode==38)r.selectItem(-1);else if(e.keyCode==40)r.selectItem(1);else if(e.keyCode==13){var i=r.suglist.one(".on");i.length>0&&i.fire("click")}else t.val()!=""&&t.val()!=n?(r.fetchSug(t.val()),r.defsug.hide()):(r.suglist.hide(),r.noDefSug||r.defsug.show().css({"z-index":tcb.zIndex()}))}),e.on("keypress",function(e){if(e.keyCode==13){var t=r.suglist.one(".on");t.length>0&&e.preventDefault()}}),r.suglist.delegate(".ui-addrsug-sugitem","click",function(e){var t=W(this).attr("data-name"),n=W(this).attr("data-whole"),i=r.getCurObj();i.val(n),r.suglist&&r.suglist.css("display")!="none"&&r.suglist.hide(),r.onSelect&&r.onSelect(n)})},this.showDefaultTxt=function(){var e=this.obj;e&&e.length>0&&e.forEach(function(e,t){var n=W(e),r=n.attr("data-default")||"";n.val()==""&&r&&n.val(r),n.addClass("default")})},this.getCurObj=function(){return this.curObj||this.obj},this.setCurObj=function(e){return this.curObj=e||this.obj,this.curObj},this.fetchSug=function(e){try{var t=r._cacheData[encodeURIComponent(r.requireCity()+"-"+e)];t?r.gotData(t):n.plugin(["AMap.Autocomplete"],function(){var t={city:r.requireCity()},n=new AMap.Autocomplete(t);AMap.event.addListener(n,"complete",function(t){r._cacheData[encodeURIComponent(r.requireCity()+"-"+e)]=t,r.gotData(t)}),n.search(e)})}catch(i){}},this.gotData=function(e){e&&e.tips?r.render(e.tips):r.suglist.hide()},this.createDropList=function(){var e=W('<div class="ui-addrsug-suglist">').appendTo(W("body")).hide();this.suglist=e,this.resetSugListPos(e)},this.resetSugListPos=function(e){var t=r.getCurObj(),n=t.getRect(),i=t.attr("data-sugwidth")-0;e.css({position:"absolute","z-index":tcb.zIndex(),width:i||n.width,left:n.left,top:n.top+n.height+2})},this.render=function(e){if(e.length>0){var t="";for(var n=0,r=Math.min(e.length,this.showNum);n<r;n++){var i=e[n];t+='<div class="ui-addrsug-sugitem" data-name="'+i.name+'" data-whole="'+i.district+i.name+'"><b>'+i.name+"</b><span>"+i.district+"</span></div>"}this.suglist.show().html(t).css({"z-index":tcb.zIndex()})}else this.suglist.hide()},this.selectItem=function(e){var t=this.suglist.one(".on");if(!e||e==1)if(t.length==0)this.suglist.query(".ui-addrsug-sugitem:first-child").addClass("on");else{t.removeClass("on");var n=t.nextSibling(".ui-addrsug-sugitem");n.length>0?n.addClass("on"):this.suglist.query(".ui-addrsug-sugitem:first-child").addClass("on")}else if(t.length==0)this.suglist.query(".ui-addrsug-sugitem:last-child").addClass("on");else{t.removeClass("on");var r=t.previousSibling(".ui-addrsug-sugitem");r.length>0?r.addClass("on"):this.suglist.query(".ui-addrsug-sugitem:last-child").addClass("on")}},this.createDefSug=function(){var e="\u53ef\u4ee5\u641c\u7d22\u60a8\u6240\u5728\u7684\u5c0f\u533a\u3001\u5199\u5b57\u697c\u6216\u6807\u5fd7\u6027\u5efa\u7b51",t=W('<div class="ui-addrsug-defsug">').appendTo(W("body")).hide();W('<div class="ui-addrsug-defitem"></div>').html(e).appendTo(t),this.defsug=t,this.resetSugListPos(t)},this.init()}(function(){function e(t){var n={wrap:"#citySelector",data:{cityid:"",citycode:"",cityname:"",areacode:"",areaname:"",quancode:"",quanname:""},hasarea:!0,hasquan:!0,autoinit:!0,urlhost:"",onInit:function(){},onCitySelect:function(e){},onAreaSelect:function(e){},onQuanSelect:function(e){}};t=t||{},t=QW.ObjectH.mix(n,t,!0),t.urlhost=t.urlhost||"http://"+location.host+"/";var r=this;r.options=t,r.data={};var i=e.prototype;typeof i.eventBind=="undefined"&&(i.setData=function(e,t,n){var r=this;if(QW.ObjectH.isObject(e))n=t,t=null;else{if(!QW.ObjectH.isString(e))return;e={key:t}}n?r.data=e:r.data=QW.ObjectH.mix(r.data,e,!0)},i.getData=function(){var e=this;return e.data},i.deleteData=function(e){var t=this,n=t.data;QW.ObjectH.isArray(e)&&QW.ObjectH.map(e,function(e){typeof n[e]!="undefined"&&delete n[e]}),QW.ObjectH.isString(e)&&typeof n[e]!="undefined"&&delete n[e]},i.getArea=function(e){var t=this,n=t.options.urlhost+"aj/get_area/?citycode="+e;t._removeAreaTrigger(),t._removeQuanTrigger(),setTimeout(function(){QW.loadJsonp(n,function(e){var n=e.result,r="";QW.ObjectH.isObject(n)&&QW.ObjectH.map(n,function(e,t){r+='<a href="javascript:;" code="'+t+'">'+e+"</a>"});if(r){r='<a href="javascript:;">\u5168\u90e8\u533a\u53bf</a>'+r;var i=t._getAreaTrigger();i.show(),i.query(".select-list").html(r)}})},160)},i.getQuan=function(e,t){var n=this,r=n.options.urlhost+"aj/get_areaquan/?citycode="+e+"&areacode="+t;n._removeQuanTrigger(),setTimeout(function(){QW.loadJsonp(r,function(e){var t=e.result,r="";QW.ObjectH.isObject(t)&&QW.ObjectH.map(t,function(e,t){r+='<a href="javascript:;" code="'+t+'">'+e+"</a>"});if(r){r='<a href="javascript:;">\u5168\u90e8\u5546\u5708</a>'+r;var i=n._getQuanTrigger();i.show(),i.query(".select-list").html(r)}})},160)},i.getWrap=function(){var e=this;if(e.wWrap)return e.wWrap;var t=QW.ObjectH.isObject(e.options.wrap)?e.options.wrap:W(e.options.wrap);return e.wWrap=t},i._getCityTrigger=function(){var e=this;if(e.wCityTrigger)return e.wCityTrigger;var t=e.getWrap(),n=t.query(".sel-city");return e.wCityTrigger=n},i._setCityData=function(e,t,n){var r=this,i=r._getCityTrigger();i.attr("code",t),i.one(".sel-txt").html(n),r.setData({cityid:e,citycode:t,cityname:n},!0)},i._getAreaTrigger=function(){var e=this;if(e.wAreaTrigger)return e.wAreaTrigger;var t=e.getWrap(),n=t.query(".sel-quxian");if(!n.length){var r='<div class="area-sel sel-quxian mr-10" style="display:none;"><span class="sel-txt">\u9009\u62e9\u533a\u53bf</span><span class="icon icon-arrow pngfix"></span><div class="sel-quxian-pannel select-pannel" style="display:none;"><h3>\u533a\u53bf\u5217\u8868<span class="close city_close" title="\u5173\u95ed"></span></h3><div class="select-list"></div></div></div>';n=W(r),e.getWrap().appendChild(n)}return e.wAreaTrigger=n},i._setAreaData=function(e,t){var n=this,r=n._getAreaTrigger();r.attr("code",e),r.query(".sel-txt").html(t),n.setData({areacode:e,areaname:t})},i._removeAreaTrigger=function(){var e=this,t=e._getAreaTrigger();t.removeNode(),delete e.wAreaTrigger},i._getQuanTrigger=function(){var e=this;if(e.wQuanTrigger)return e.wQuanTrigger;var t=e.getWrap(),n=t.query(".sel-shangquan");if(!n.length){var r='<div class="area-sel sel-shangquan mr-10" style="display:none;"><span class="sel-txt">\u9009\u62e9\u5546\u5708</span><span class="icon icon-arrow pngfix"></span><div class="sel-shangquan-pannel select-pannel" style="display:none;"><h3>\u5546\u5708\u5217\u8868<span class="close city_close" title="\u5173\u95ed"></span></h3><div class="select-list"></div></div></div>';n=W(r),e.getWrap().appendChild(n)}return e.wQuanTrigger=n},i._setQuanData=function(e,t){var n=this,r=n._getQuanTrigger();r.attr("code",e),r.query(".sel-txt").html(t),n.setData({quancode:e,quanname:t})},i._removeQuanTrigger=function(){var e=this,t=e._getQuanTrigger();t.removeNode(),delete e.wQuanTrigger},i._selectCity=function(){var e=this,t=e._getCityTrigger(),n=new CityPanel(t);n.on("selectCity",function(t){var n=t.city.trim(),r=t.name.trim(),i=t.cityid.trim();e._setCityData(i,n,r),e.options.hasarea&&e.getArea(n);var s=e.data;typeof e.options.onCitySelect=="function"&&e.options.onCitySelect(s)})},i.eventBind=function(){var e=this,t=e.getWrap();e._selectCity(),t.on("click",function(t){var n=W(this),r=t.target,i=W(r),s=e._getAreaTrigger(),o=e._getQuanTrigger();if(s.contains(r)||s[0]===r){var u=s.query(".select-pannel");u.fadeIn(100),i.hasClass("close")&&u.hide();if(i[0].nodeName.toLowerCase()==="a"){var a=i.attr("code"),f=i.html();a?e._setAreaData(a,f):(s.attr("code",""),s.query(".sel-txt").html("\u9009\u62e9\u533a\u53bf"),e.deleteData(["areacode","areaname"])),u.hide(),e.deleteData(["quancode","quanname"]);var l=e.data;e.options.hasquan&&e.getQuan(l.citycode,a),typeof e.options.onAreaSelect=="function"&&e.options.onAreaSelect(l)}}else if(o.contains(r)||o[0]===r){var u=o.query(".select-pannel");u.fadeIn(100),i.hasClass("close")&&u.hide();if(i[0].nodeName.toLowerCase()==="a"){var a=i.attr("code"),f=i.html();a?e._setQuanData(a,f):(o.attr("code",""),o.query(".sel-txt").html("\u9009\u62e9\u5546\u5708"),e.deleteData(["quancode","quanname"])),u.hide();var l=e.data;typeof e.options.onQuanSelect=="function"&&e.options.onQuanSelect(l)}}}),W(document.body).on("click",function(t){var n=t.target,r=W(n),i=e._getAreaTrigger();!i.contains(n)&&i[0]!==n&&i.query(".select-pannel").hide();var s=e._getQuanTrigger();!s.contains(n)&&s[0]!==n&&s.query(".select-pannel").hide()})},i.init=function(){var e=this;e.eventBind();var t=e.options.data,n=e._getCityTrigger(),r=t.citycode?t.citycode:n.attr("code"),i=t.cityname?t.cityname:n.query(".sel-txt").html();e.setData({citycode:r,cityname:i}),e.options.hasarea&&e.getArea(r),t.areacode&&t.areaname&&(e._setAreaData(t.areacode,t.areaname),e.options.hasquan&&e.getQuan(r,t.areacode)),t.quancode&&t.quanname&&e._setQuanData(t.quancode,t.quanname),typeof e.options.onInit=="function"&&e.options.onInit(e.getData())}),r.options.autoinit&&r.init()}window.bang=window.bang||{},bang.AreaSelect=e})(),function(){function e(){this.init.apply(this,arguments)}e.prototype=function(){var e=function(e,t){e=Math.min(99,e),t=parseInt(t,10)||0,t++,t=Math.min(Math.max(1,t),e);var n=[];t>5&&e>10&&n.push('<a data-pn="0" href="#" class="first">\u9996\u9875</a>&nbsp;'),t>1&&n.push('<a data-pn="',t-2,'" href="#" class="pre">&#171;\u4e0a\u4e00\u9875</span></a>&nbsp;');var r,i;t>5?(r=t-4,t>e-5&&(r=e-9)):r=1,i=r+9,r=Math.max(r,1),i=Math.min(i,e);for(var s=r;s<=i;s++)s==t?n.push("<span>",s,"</span>&nbsp;"):n.push('<a data-pn="',s-1,'" href="#">',s,"</a>&nbsp;");return t<e&&n.push('<a data-pn="',t,'" href="#" class="next">\u4e0b\u4e00\u9875&#187;</a>&nbsp;'),t<e-5&&t>10&&n.push('<a data-pn="',e-1,'" href="#" class="last">\u5c3e\u9875</a>'),n.join("")};return{init:function(t,n,r){var i=this;CustEvent.createEvents(this),W(t).undelegate("a","click"),W(t).html(e(n,r)).delegate("a","click",function(r){r.preventDefault();var s=this.getAttribute("data-pn")||0;setTimeout(function(){W(t).html(e(n,s))},50),i.fire("pageChange",{pn:s-0})})}}}(),QW.provide({Pager:e})}(),function(){function e(){this.init.apply(this,arguments)}e.prototype=function(){return{init:function(e){var t=this;CustEvent.createEvents(this);var n="";this.element=W(e);if(t.element&&!("placeholder"in document.createElement("input"))&&(n=t.element.attr("placeholder"))){var r=W('<label for="'+this.element.attr("id")+'"></label>').addClass("ele4phtips")[0];t.element.parentNode().insertBefore(r,t.element[0]);var i=function(e,t){e.style.opacity?e.style.opacity=t/100:e.style.filter="Alpha(opacity="+t+")"},s=function(){t.element.val()?r.innerHTML="":(i(r,0),r.innerHTML=n)};t.element.on("keyup",function(){s()}).on("focus",function(){s()}).on("blur",function(){t.element.val()||(i(r,100),r.innerHTML=n)}),t.element.val()||(r.innerHTML=n)}}}}(),QW.provide({PlaceHolder:e})}(),function(){function t(e){var t=this,n=t.getFilterParams(),r=Object.encodeURIJson(n),i=t._Cache[r];if(i)typeof e=="function"&&e(i);else{var s="/at/shop?"+r;QW.Ajax.get(s,function(n){n=n.evalExp(),!parseInt(n.errno,10)&&n.shop_data&&n.shop_data.length&&(n.shop_data.forEach(function(e){e["shop_ico"].indexOf("pinpailogo")==-1&&(e.shop_ico=tcb.imgThumbUrl(e.shop_ico,140,140))}),i=n,t.setCache(r,i)),typeof e=="function"&&e(i)})}}function n(e){var t=this;e&&t.setFilterParams("pn",0);var n="";t.getShopListData(function(e){e?n=o(e,t.options.tpl.shop_list):n='<div class="no-data-merrepair">\u62b1\u6b49\uff0c\u6682\u65f6\u6ca1\u6709\u627e\u5230\u7b26\u5408\u60a8\u8981\u6c42\u7684\u5e97\u94fa</div>';if(n===null)return;t.wList.html(n),typeof t.options["onAfter"]=="function"&&t.options.onAfter(t),t.renderShopListPager(function(e){t.setFilterParams("pn",e),t.renderShopList()})})}function r(e,t,n){var r=this;typeof e=="function"&&(t=e,e=null),e=e||r.wPageNav;if(!e.length)return;var i=r.getFilterParams(),s=parseInt(i.pn,10);if(!n&&s)return;var o=Object.encodeURIJson(i),u=r.getCache(o);if(!u)return;var a=Math.ceil(u.page_count/i.pagesize),f=e.query(".pages");if(a==1){f.hide().html("");return}f.show();var l=new Pager(f,a,s);l.on("pageChange",function(e){t=t||h,typeof t=="function"&&t(e.pn)})}function i(e,t){var n=this;e&&(n._Cache[e]=t)}function s(e){var t=this;return e?t._Cache[e]:t._Cache}function o(e,t){var n=null,r=e;r.shop_data.forEach(function(e){e["shop_ico"].indexOf("pinpailogo")==-1&&(e.shop_ico=tcb.imgThumbUrl(e.shop_ico,140,140))});var i=W(t||"");if(i&&i.length){var s=i.html().trim().tmpl();n=s(r)}return n}function u(e){var t=this,n=t.FilterParams||{};return e?n[e]:n}function a(e,t){var n=this;n.FilterParams=n.FilterParams||{},n.FilterParams[e]=t}function f(e){var t=this,n="panel-modeMapindex",r=t.createBigMap(n,e);t.getShopListData(function(e){if(!e)return;var i=e.shop_data||[];i.forEach(function(e,t){if(!e.map_longitude||!e.map_latitude)return!1;var n=new AMap.Marker({id:"MapMarker"+t,position:new AMap.LngLat(e.map_longitude,e.map_latitude),icon:{stc:"https://p.ssl.qhimg.com/t01647448c59c844934.png"}.stc,offset:{x:-13,y:-36}});n.setMap(r);var i=new AMap.InfoWindow({isCustom:!0,autoMove:!0,offset:new AMap.Pixel(72,-245),content:W("#JsShopListMapModeShopCardTpl").html().tmpl({shop_name:e.shop_name,addr:e.addr_detail,service_tags:e.main.subByte(40,"..."),qid:e.qid,shop_addr:e.shop_addr,online_txt:e.is_online=="on"?"\u7acb\u5373\u54a8\u8be2":"\u79bb\u7ebf\u7559\u8a00"}),size:new AMap.Size(349,166)});AMap.event.addListener(n,"click",function(){i.open(r,n.getPosition())}),t==0&&r.setCenter(new AMap.LngLat(e.map_longitude,e.map_latitude))}),t.renderShopListPager(W("#"+n),function(e){t.setFilterParams("pn",e),t.showMap(!0)},!0)})}function l(e,t){var n=this;e=e||"panel-modeMapindex";if(t)return n.Map&&n.Map.clearMap&&n.Map.clearMap(),n.Map;var r={className:"panel panel-tom01 map-container-wrap",btn_name:"\u5173\u95ed",wrapId:e},i=n.getFilterParams("pn"),s=W("#JsShopListMapModeTpl").html().trim().tmpl()(),o=tcb.alert("\u5730\u56fe\u6a21\u5f0f",s,r,function(){return n.Map&&n.Map.destroy&&n.Map.destroy(),n.Map=null,n.MapPanel=null,n.setFilterParams("pn",i),!0});n.Map=new AMap.Map("mode_map_container",{view:new AMap.View2D({zoom:11,rotation:0})}),n.Map.plugin(["AMap.ToolBar","AMap.OverView","AMap.Scale"],function(){var e=new AMap.OverView;n.Map.addControl(e);var t=new AMap.ToolBar(-100,0);t.autoPosition=!1,n.Map.addControl(t);var r=new AMap.Scale;n.Map.addControl(r)});var u=W("#"+e);return tcb.bindEvent(u,{".close":function(e){try{e.preventDefault(),n.Map.clearInfoWindow(),n.Map.destroy(),n.Map=null}catch(e){}},".shop-card-close":function(e){e.preventDefault();try{n.Map.clearInfoWindow()}catch(t){}},".qim-go-talk":function(e){try{o.hide(),n.Map.clearInfoWindow(),n.Map.destroy(),n.Map=null}catch(t){}}}),n.Map}function c(){var e=this;tcb.bindEvent(e.wWrap[0],{".sort-type li a":function(t){t.preventDefault();var n=W(this);n.ancestorNode("li").addClass("active").siblings(".active").removeClass("active"),e.setFilterParams("type_id",n.attr("data-type")),e.renderShopList(!0)},".filter-check .chkbox":function(t){var n=W(this),r=n.attr("name");n.attr("checked")?r==="is_bzj"?e.setFilterParams(r,"1"):e.setFilterParams(r,"on"):r==="is_bzj"?e.setFilterParams(r,"0"):e.setFilterParams(r,"off"),e.renderShopList(!0)},".btn-mode-map":function(t){t.preventDefault(),e.showMap()}})}function h(){}var e=window.Bang=window.Bang||{};e.ShopList=function(o){function m(){var e=d.wWrap=W(d.options.selector.wrap);d.wList=e.query(d.options.selector.list||".shop-list"),d.wSort=e.query(".sort-type a"),d.wFilter=e.query('.filter-check [type="checkbox"]'),d.wMapMode=e.query(".btn-mode-map"),d.Map=null,d.wPageNav=e.query(".shop-list-pagination"),d.wFilterExtend=W(d.options.selector.extend_filter_wrap),d.eventBind()}var p={selector:{wrap:".shop-list-wrap",extend_filter_wrap:""},tpl:{shop_list:"#JsShopListTpl"},data:{},onBefore:h,onAfter:h};o=o||{},o=QW.ObjectH.mix(p,o,!0);var d=this;d.FilterParams={city_id:o.data.city_id||"",area_id:o.data.area_id||"",quan_id:o.data.quan_id||"",service_id:o.data.service_id||"",type_id:o.data.type_id||"",online:o.data.online||"on",cuxiao:o.data.cuxiao||"off",is_bzj:o.data.is_bzj||"0",tag:o.data.tag||"",pagesize:o.data.pagesize||15,pn:o.data.pn||0,lng:o.data.lng||"",lat:o.data.lat||""},d._Cache={},d.options=o,d.data={};var v=e.ShopList.prototype;typeof v.eventBind=="undefined"&&(v.eventBind=c,v.getShopListData=t,v.renderShopList=n,v.renderShopListPager=r,v.getFilterParams=u,v.setFilterParams=a,v.showMap=f,v.createBigMap=l,v.setCache=i,v.getCache=s),m()}}(),Dom.ready(function(){function t(){QW.Ajax.get("/huishou/doGetHotHsList",{num:5},function(e){e=JSON.parse(e);if(!e.errno){var t=e.result,n=W("#JsIndexHuishouProductTpl").html().trim().tmpl()({product_list:t});W("#JsHotHsList").html(n)}})}function n(){QW.Ajax.get("/youpin/dogethotlist",{num:5},function(e){e=JSON.parse(e);if(!e.errno){var t=e.result,n=W("#JsIndexLiangpinProductTpl").html().trim().tmpl()({product_list:t});W("#JsHotLpList").html(n)}})}var e=W(".page-index");if(!e||!e.length)return;tcb.bindEvent(e[0],{".top-banner-cate .has-sub-select .item":{mouseenter:function(e){var t=W(this),n=t.ancestorNode(".has-sub-select");n.addClass("hover")},mouseleave:function(e){var t=W(this),n=t.ancestorNode(".has-sub-select");n.removeClass("hover")}},".shop-list .list-item":{mouseenter:function(e){var t=W(this);t.addClass("list-item-hover")},mouseleave:function(e){var t=W(this);t.removeClass("list-item-hover")}}}),function(){function o(e,t,n){var r=!1,i=n.getRect(),s=i.left,o=i.top,u=i.height,a=e[0],f=e[1],l=t[0],c=t[1],h=s-a;return a<=l&&(f<c?(l-a)/(c-f)<h/(o+u-f)||(r=!0):f>c?(l-a)/(f-c)<h/(f-o)||(r=!0):r=!0),r}function u(e,t,n){var r=0;t.forEach(function(t,n){t===W(e)[0]&&(r=n)});var i=n.query(".sub-item"),s=i.item(r);if(s.isVisible())return;i.hide();if(s&&s.length){s.show(),n.show();var o=e.getRect().height,u=n.query(".arrow-left"),a=u.getRect().height;u.css({top:o*r+o/2-a/2+"px"});var f=t.ancestorNode(".cate-list-main").getRect(),l=f.height-2,c=s.getRect(),h=c.width,p=c.height;p=p<l?l:p,n.css({width:h+"px",height:p+"px"})}}function a(){QW.Ajax.get("/shangmen/aj_get_fault_group",{group_type:1},function(e){e=JSON.parse(e);if(!e.errno){var t=e.result,n=W("#JsIndexXsjCate2Tpl").html().trim().tmpl()({list:t});W("#ForCitemXSJ").html(n)}}),QW.Ajax.get("/shangmen/doGetPcFaultList",function(e){e=JSON.parse(e);if(!e.errno){var t=e.result,n=W("#JsIndexXdnCateTpl").html().trim().tmpl()({hot:t.hot,other:t.other});W("#ForCitemXDN").html(n)}}),QW.Ajax.get("/huishou/dogetpinpailist",function(e){e=JSON.parse(e);if(!e.errno){var t=e.result,n=W("#JsIndexHsCateTpl").html().trim().tmpl()({brand:t});W("#ForCitemHS").html(n)}}),QW.Ajax.get("/youpin/dogetpinpailist",function(e){e=JSON.parse(e);if(!e.errno){var t=e.result,n=[];t&&!QW.ObjectH.isArray(t)&&(QW.ObjectH.map(t,function(e,t){n.push({id:t,name:e})}),t=n);var r=W("#JsIndexLpCateTpl").html().trim().tmpl()({brand:t});W("#ForCitemLP").html(r)}})}var e={xsj:{},xdn:{},hs:[],lp:[]},t=[0,0],n=[0,0],r=0,i,s=W(".cate-list");s.on("mousemove",function(e){t=[e.pageX,e.pageY];var r=W(this),i=e.target,s=W(i),a=s.parentNode(".cate-list-main");if(a.length){var f=a.nextSibling(".cate-list-sub"),l=a.query(".item"),c=o(n,t,f);if(!c){var h=s.hasClass("item")?s:s.parentNode("li");u(h,l,f,a,r)}}}),s.on("mouseover",function(e){n=[e.pageX,e.pageY];var t=W(this),r=e.target,s=W(r),o=s.ancestorNode(".cate-list-main");clearTimeout(i);if(o.length){var a=o.nextSibling(".cate-list-sub"),f=o.query(".item");i=setTimeout(function(){var e=s.hasClass("item")?s:s.parentNode("li");u(e,f,a,o,t)},300)}}),s.on("mouseleave",function(e){var t=W(this),n=t.query(".cate-list-sub");clearTimeout(i),n.animate({width:"0px"},200,function(){n.hide()},QW.Easing.easeInStrong)}),setTimeout(function(){a()},600)}(),function(){function e(e,t){this.meBox=W(e);if(!this.meBox.length)return;this.config=t||{},this.btnPrev=this.meBox.query(".slide-go-left"),this.btnNext=this.meBox.query(".slide-go-right"),this.innerBox=this.meBox.query(".slide-inner"),this.items=this.meBox.query(".slide-item"),this.listBox=this.meBox.query(".slide-list"),this.itemNum=this.meBox.query(".slide-item").length,this.itemWidth=this.items.getRect().width+parseInt(this.items.css("margin-left"))+parseInt(this.items.css("margin-right")),this.ctrlBox=this.meBox.query(".slide-ctrl"),this.innerBoxWidth=this.innerBox.getRect().width,this.autoRunTimer=null,this.init=function(){this.listBox.css({width:this.itemWidth*this.items.length}),this.config.showCtrl&&this.creatCtrl(),this.config.autoRun&&this.autoRun(),this.bindEvent()},this.bindEvent=function(){var e=this,t=this.config;e.btnPrev.on("click",function(n){n.preventDefault(),e.innerBox.animate({scrollLeft:e.innerBox[0].scrollLeft-e.innerBoxWidth},t.animTime||300,function(){},QW.Easing.easeOut)}),e.btnNext.on("click",function(n){n.preventDefault(),e.innerBox.animate({scrollLeft:e.innerBox[0].scrollLeft+e.innerBoxWidth},t.animTime||300,function(){},QW.Easing.easeOut)}),e.meBox.delegate(".ctrl-item","click",function(t){t.preventDefault(),W(this).addClass("ctrl-curr").siblings(".ctrl-curr").removeClass("ctrl-curr");var n=W(this).attr("data-sn")||0;e.go(n)}),e.meBox.on("mouseenter",function(t){clearInterval(e.autoRunTimer)}),e.meBox.on("mouseleave",function(n){t.autoRun&&e.autoRun()})},this.go=function(e){var t=this.config;e=e||0,this.innerBox.animate({scrollLeft:0+this.innerBoxWidth*e},t.animTime||300,function(){},QW.Easing.easeOut)},this.autoRun=function(){var e=this,t=this.config;e.autoRunTimer=setInterval(function(){var t=e.meBox.query(".ctrl-curr").attr("data-sn")||0;nextSn=t-0+1,nextSn>e.itemNum-1&&(nextSn=0),e.meBox.query('.ctrl-item[data-sn="'+nextSn+'"]').addClass("ctrl-curr").siblings(".ctrl-curr").removeClass("ctrl-curr"),e.go(nextSn)},typeof t.autoRun=="number"?t.autoRun:5e3)},this.creatCtrl=function(e){if(this.ctrlBox.query(".ctrl-item").length||this.items.length<2)return;str="";for(var t=0,n=this.items.length;t<n;t++)str+='<span class="ctrl-item '+(t==0?"ctrl-curr":"")+'" data-sn="'+t+'"></span>';this.ctrlBox.html(str)},this.init()}new e(".js-top-cate-slide-inner",{showCtrl:!0,autoRun:5e3,animTime:500})}(),t(),n(),function(){function t(){var t={selector:{wrap:".shop-list-wrap",extend_filter_wrap:""},tpl:{shop_list:"#JsShopList2Tpl"},data:{city_id:"bei_jing",area_id:0,quan_id:0,service_id:"",type_id:"",online:"off",cuxiao:"off",is_bzj:0,tag:"",pagesize:5,pn:0,lng:"",lat:""},onBefore:function(){},onAfter:function(t){if(!e){var n=W(".index-shop-list .tit h2").getRect().top;tcb.gotoTop.goPlace(n-3)}e=!1}};return new window.Bang.ShopList(t)}function i(){function i(e){e==null?W(".addr-search-err").show():(W(".addr-search-err").hide(),n.setFilterParams("lng",e.lng),n.setFilterParams("lat",e.lat),n.setFilterParams("area_id",""),r._setAreaData("","\u9009\u62e9\u533a\u53bf"),n.renderShopList(!0))}function s(e,t){W('<div id="geoMapBox"></div>').appendTo(W("body")).hide();var n=new AMap.Map("geoMapBox");n.plugin(["AMap.Geocoder"],function(){MGeocoder=new AMap.Geocoder({city:W("#JsAreaSelectWrap .sel-city .sel-txt").html()||"",radius:1e3,extensions:"all"}),AMap.event.addListener(MGeocoder,"complete",function(e){var n=null;e&&e.resultNum>0&&(n={lng:e.geocodes[0].location.lng,lat:e.geocodes[0].location.lat}),t(n)}),MGeocoder.getLocation(e)})}var e=W("#addrSearchForm"),t=e.one('[name="addr"]');e.bind("submit",function(e){e.preventDefault();var n=t.val();n==""||n==t.attr("data-default")?(t.focus(),QW.NodeW&&QW.NodeW.shine4Error&&QW.NodeW.shine4Error(t)):s(n,i)}),t.on("focus",function(){W(".addr-search-err").hide()}),window.aaaaa=new AddrSuggest(t,{showNum:6,onSelect:function(e){s(e,i)},requireCity:function(){return W("#JsAreaSelectWrap .sel-city .sel-txt").html()||""}})}var e=!0,n=t(),r=new bang.AreaSelect({wrap:"#JsAreaSelectWrap",hasquan:!1,autoinit:!0,urlhost:"http://"+location.host+"/",onInit:function(e){n.setFilterParams("city_id",e.citycode),n.setFilterParams("area_id",e.areacode),n.setFilterParams("quan_id",e.quancode),n.setFilterParams("lng",""),n.setFilterParams("lat","");var t=W('#addrSearchForm [name="addr"]');t.val(t.attr("data-default")).addClass("default"),n.renderShopList(!0)},onCitySelect:function(e){n.setFilterParams("city_id",e.citycode),n.setFilterParams("area_id",""),n.setFilterParams("quan_id",""),n.setFilterParams("lng",""),n.setFilterParams("lat","");var t=W('#addrSearchForm [name="addr"]');t.val(t.attr("data-default")).addClass("default"),n.renderShopList(!0)},onAreaSelect:function(e){n.setFilterParams("city_id",e.citycode),n.setFilterParams("area_id",e.areacode),n.setFilterParams("quan_id",""),n.setFilterParams("lng",""),n.setFilterParams("lat","");var t=W('#addrSearchForm [name="addr"]');t.val(t.attr("data-default")).addClass("default"),n.renderShopList(!0)},onQuanSelect:function(e){n.setFilterParams("city_id",e.citycode),n.setFilterParams("area_id",e.areacode),n.setFilterParams("quan_id",e.quancode),n.setFilterParams("lng",""),n.setFilterParams("lat","");var t=W('#addrSearchForm [name="addr"]');t.val(t.attr("data-default")).addClass("default"),n.renderShopList(!0)}});i()}(),function(){function e(){var e=$(".media-report-more-list"),t=e.find(".media-report-more-list-inner"),n=t.find(".more-item").eq(0).height();setTimeout(function(){var e=arguments;t.animate({top:-n},800,function(){t.find(".more-item").eq(0).appendTo(t),t.css({top:0}),setTimeout(e.callee,3500)})},3500)}function t(e){var t=e||$(".trigger-play-video");t&&t.length&&t.on("click",function(e){e.preventDefault();var t=$.tmpl($.trim($("#JsAboutUsVideoPlayerPanelTpl").html())),n=t();tcb.showDialog(n,{className:"video-player-panel",withClose:!0,middle:!0})})}e(),t($(".trigger-play-video"))}()});