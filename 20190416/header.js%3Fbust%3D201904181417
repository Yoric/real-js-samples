define([],function(){"use strict";function e(){this.init()}"undefined"==typeof HTMLCollection.prototype.forEach&&(HTMLCollection.prototype.forEach=Array.prototype.forEach),Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(e,t){var n=this[e],i=n,s=function(){return i},o=function(s){return n=i,i=t.call(this,e,n,s)};delete this[e]&&Object.defineProperty(this,e,{get:s,set:o,enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(e){var t=this[e];delete this[e],this[e]=t}});var t="hdr-vertical-blk",n="hdr-vertical-main-nav",i=".hdr-vertical-main-nav-blk",s="hdr-vertical-secondary-nav",o=".hdr-vertical-secondary-nav-blk",a="hdr-vertical-secondary-nav-blk__menu",r='<li class="hdr-vertical-secondary-nav-blk__menu-item"><a class="hdr-vertical-secondary-nav-blk__menu-item-lnk" href="{link}">{label}</a></li>',l=function(e,t,n){var i;return function(){var s=this,o=function(){i=null,n||e.apply(s)},a=n&&!i;clearTimeout(i),i=setTimeout(o,t),a&&e.apply(s)}},h=function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0};return e.prototype.featureIsVisible=function(){var e=[].slice.call(this.mainNavElementItems).slice(-1)[0],t=e.getBoundingClientRect(),n=this.mainNavElement.getBoundingClientRect();return t.right<n.right?(this.secondaryNavElement.classList.add(o.slice(1)+"--hidden"),!1):(this.secondaryNavElement.classList.remove(o.slice(1)+"--hidden"),!0)},e.prototype.setMenuPosition=function(){var e=this.secondaryNavMenuElement.getBoundingClientRect();e.right<window.innerWidth?(this.secondaryNavMenuElement.classList.add(a+"--on-the-right"),this.secondaryNavMenuElement.classList.remove(a+"--on-the-left")):(this.secondaryNavMenuElement.classList.remove(a+"--on-the-right"),this.secondaryNavMenuElement.classList.add(a+"--on-the-left"))},e.prototype.applyNavItemVisibility=function(e,t){var n=e.getBoundingClientRect();n.right>this.mainNavElementBoundRect.right?(e.classList.add(i.slice(1)+"__item--hidden"),this.secondaryMenuItems[t].classList.remove(a+"-item--hidden")):(e.classList.remove(i.slice(1)+"__item--hidden"),this.secondaryMenuItems[t].classList.add(a+"-item--hidden"))},e.prototype.onResize=function(){this.featureIsVisible()&&(this.mainNavElementBoundRect=this.mainNavElement.getBoundingClientRect(),this.mainNavElementItems.forEach(this.applyNavItemVisibilityBinding),this.setMenuPosition())},e.prototype.onMenuOpenChange=function(e,t,n){return n===!0?(this.secondaryNavMenuElement.classList.add(a+"--show"),this.secondaryNavMenuElement.classList.remove(a+"--hidden")):this.lastScrollPos<this.fixBurgerTick&&(this.secondaryNavMenuElement.classList.add(a+"--hidden"),this.secondaryNavMenuElement.classList.remove(a+"--show")),n},e.prototype.onMenuToggle=function(e){e.stopImmediatePropagation(),(this.menuOpen||"mouseleave"!==e.type&&"BODY"!==e.currentTarget.tagName)&&((this.menuOpen&&"mousedown"===e.type||"A"===e.target.tagName)&&e.target.click(),this.menuOpen=!this.menuOpen)},e.prototype.storeSecondaryMenuItemReferences=function(){this.secondaryMenuItems=this.secondaryNavMenuElement.querySelectorAll("."+a+"-item")},e.prototype.addMenuItem=function(e){this.secondaryNavMenuElement.insertAdjacentHTML("beforeend",r.replace("{link}",this.links[e].href).replace("{label}",this.links[e].label))},e.prototype.buildMenu=function(){var e,t=this.links.length;for(e=0;e<t;e++)this.addMenuItem(e);this.storeSecondaryMenuItemReferences()},e.prototype.getLinks=function(){var e=this;this.header.querySelectorAll(i+"__item-lnk").forEach(function(t){e.links.push({label:t.textContent||t.innerText,href:t.href})})},e.prototype.makePropsReactive=function(){this.watch("menuOpen",e.prototype.onMenuOpenChange)},e.prototype.removeMenuElement=function(){this.secondaryNavElement.parentNode.removeChild(this.secondaryNavElement)},e.prototype.addMenuBehavior=function(){this.onResizeBinding=this.onResize.bind(this),this.onMenuToggleBinding=this.onMenuToggle.bind(this),this.applyNavItemVisibilityBinding=this.applyNavItemVisibility.bind(this),this.downEvent=h()?"touchstart":"mousedown",this.menuOpen=!1,this.mainNavElement=document.getElementById(n),this.mainNavElementItems=this.mainNavElement.querySelectorAll(i+"__item"),this.secondaryNavMenuElement=document.getElementById(a),window.addEventListener("resize",l(this.onResizeBinding,this.refreshRate)),window.document.body.addEventListener(this.downEvent,this.onMenuToggleBinding),this.secondaryNavElement.addEventListener(this.downEvent,this.onMenuToggleBinding),this.secondaryNavElement.addEventListener("mouseleave",this.onMenuToggleBinding),this.makePropsReactive(),this.getLinks(),this.buildMenu(),this.onResize()},e.prototype.toggleExpand=function(){this.lastScrollPos>=this.fixBurgerTick?this.header.classList.add(t+"--collapsed"):this.lastScrollPos<this.fixBurgerTick&&this.header.classList.remove(t+"--collapsed")},e.prototype.onRequestAnimationFrame=function(){this.toggleExpand(),this.ticking=!1},e.prototype.onScroll=function(){this.lastScrollPos=window.scrollY,this.ticking||window.requestAnimationFrame(this.onRequestAnimationFrameBound),this.ticking=!0},e.prototype.addScrollBehavior=function(){this.onRequestAnimationFrameBound=this.onRequestAnimationFrame.bind(this),this.onScrollBinding=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollBinding),this.onScroll()},e.prototype.init=function(){this.fixBurgerTick=130,this.header=document.getElementById("hdr-vertical"),this.burger=document.getElementById("slide-menu-toggle-btn"),this.lastScrollPos=0,this.ticking=!1,this.isHome=0!==document.getElementsByClassName("home-page").length,this.refreshRate=100,this.links=[],this.secondaryNavElement=document.getElementById(s),this.hasNav=this.header.querySelectorAll(i+"__item").length>0&&null!==this.secondaryNavElement,this.isHome&&this.addScrollBehavior(),this.hasNav?this.addMenuBehavior():this.removeMenuElement()},e});