!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=4)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f}),n.d(t,"g",function(){return g}),n.d(t,"b",function(){return C}),n.d(t,"d",function(){return getEmbeddedContent}),n.d(t,"e",function(){return x}),n.d(t,"f",function(){return T}),n.d(t,"c",function(){return M});window.encodeURIComponent;function getDomain(e){let t=e.domain;return t?t.split(".").slice(-2).join("."):""}const i=".show-more-less-state",r="show-more-less-state__label",o=".show-more-less-state__label-more",s=".show-more-less-state__label-less",a=".dropdown__list",l="dropdown__link";class c{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=arguments[2];if(!e)throw Error("An element must be provided to Dropdown");this.el=e,this.stateCheckbox=this.el.querySelector(i),this.listEl=this.el.querySelector(a),this.stateLabels={showMore:this.el.querySelector(o),showLess:this.el.querySelector(s)},this.currentItemEl,n&&(this.currentItemEl=this.listEl.querySelector(n)),this.linkItemClass=t,this._attachEventListeners()}_attachEventListeners(){this.el.addEventListener("keydown",this._handleKeydownNavEvents.bind(this)),document.addEventListener("click",this._handleBodyClick.bind(this)),this.stateCheckbox.addEventListener("change",this._handleCheckboxStateChange.bind(this))}_handleCheckboxStateChange(){this.listEl.setAttribute("aria-expanded",this.stateCheckbox.checked)}_handleKeydownNavEvents(e){switch(e.keyCode){case 13:case 32:e.target.classList.contains(r)&&(e.preventDefault(),this.stateCheckbox.checked=!this.stateCheckbox.checked,this.stateCheckbox.checked&&this.currentItemEl?this.currentItemEl.focus():this.stateLabels.showMore.focus());break;case 27:this.stateCheckbox.checked=!1,this.stateLabels.showMore.focus();break;case 38:this.stateCheckbox.checked=!0,this.currentItemEl&&this.currentItemEl.focus();break;case 40:this.stateCheckbox.checked=!1,this.stateLabels.showMore.focus();break;case 37:if(this.stateCheckbox.checked&&e.target.classList.contains(this.linkItemClass)){let t=e.target.parentNode.previousSibling;t&&t.firstChild.focus()}break;case 39:if(this.stateCheckbox.checked&&e.target.classList.contains(this.linkItemClass)){let t=e.target.parentNode.nextSibling;t&&t.firstChild.focus()}}}_handleBodyClick(e){e.target===this.el||this.el.contains(e.target)||(this.stateCheckbox.checked=!1)}}const u="language-selector__link",d=".language-selector__link--selected",h="data-locale",p=31536e6;class f extends c{constructor(e){if(!e)throw Error("An element must be provided to LanguageSelector");super(e,u,d),this._attachCustomEventListeners()}_attachCustomEventListeners(){this.listEl.addEventListener("click",this._handleLocaleButtonClick.bind(this))}_handleLocaleButtonClick(e){const t=e.target.getAttribute(h);if(t){const e=this.getLangCookieString(t);null!==e&&(document.cookie=e),location.reload()}}getLangCookieString(e){let t=null;if(null!==e){const n=e.toLocaleLowerCase().replace("_","-"),i=getDomain(document);let r=new Date;r.setTime(r.getTime()+p),t=`lang="v=2&lang=${n}";path=/;domain=${i};expires=${r.toUTCString()}`}return t}}var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function closest(e,t){if(!e)return null;let n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;for(;e&&!n.call(e,t);)e=e.parentElement;return e}function onload(e){"complete"===document.readyState?e():window.addEventListener("load",()=>{setTimeout(e)})}function makeArray(e){return null==e||"object"!=typeof e?[]:Array.prototype.slice.call(e)}function elementInViewport(e){const t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth,r=t.top<=n&&t.top+t.height>=0,o=t.left<=i&&t.left+t.width>=0;return r&&o}function getQueryParam(e,t,n){const i=new RegExp(`([\\?&])${n?t:encodeURIComponent(t)}=([^&#]*)`).exec(e);return i&&(n?i[2]:decodeURIComponent(i[2]))}function getCookie(e){const t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t&&t[2]}function dispatchCustomEvent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=document.createEvent("CustomEvent");i.initCustomEvent(t,!0,!0,n),e.dispatchEvent(i)}var g=Object.freeze({closest:closest,onload:onload,makeArray:makeArray,outerWidth:function(e){let t=e.offsetWidth,n=getComputedStyle(e);return t+=(parseInt(n.marginLeft,10)||0)+(parseInt(n.marginRight,10)||0)},elementInViewport:elementInViewport,getQueryParam:getQueryParam,addQueryParam:function(e,t,n,i){if(!e||!t)throw new Error(`Required param of addQueryParam missing: url = ${e},  key = ${t}`);t=encodeURIComponent(t),n=encodeURIComponent(n);const r=getQueryParam(e,t,!0);if(r)return i?e.replace(r,n):e;{const i=e.indexOf("?");var o=e.split("#"),s=v(o,2);let r=s[0],a=s[1],l="&";return i<0?l="?":i===e.length-1&&(l=""),a&&(a=`#${a}`),`${r}${l}${t}=${n}${a||""}`}},debounce:function(e,t,n){var i=this;if("function"!=typeof e)throw new TypeError("Expected a function.");let r;return function(){for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];const l=n&&!r;clearTimeout(r),r=setTimeout(()=>{r=null,n||e.apply(i,s)},t),l&&e.apply(i,s)}},getCookie:getCookie,dispatchCustomEvent:dispatchCustomEvent});"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;const y=".social-share__state",b="data-share-message",E="social-share--embed",w="social-share__embed-overlay-dismiss",S="embed-overlay__copy-text-input",_="social-share__item",k={COPY:"copy",LINKEDIN:"linkedin",TWITTER:"twitter",FACEBOOK:"facebook"},A=Object.keys(k).map(e=>k[e]);class C{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.globalNavigator;let i=void 0===n?navigator:n;var r=t.globalWindow;let o=void 0===r?window:r;if(!e)throw new Error("No element passed in");this.navigator=i,this.window=o,this.el=e,this._encodedShareMessage=this.window.encodeURIComponent(this.el.getAttribute(b))||"",this.stateCheckboxEl=this.el.querySelector(y),this.isEmbed=this.el.classList.contains(E),this.closeButton=this.el.querySelector(`.${w}`),this.showString=this.stateCheckboxEl.getAttribute("data-show-dialog-string"),this.hideString=this.stateCheckboxEl.getAttribute("data-hide-dialog-string"),this.onBodyClick=this._handleBodyClick.bind(this),this.onEmbedOverlayCloseClick=(()=>{this.stateCheckboxEl.checked=!1,this.onClose()}),this.init()}init(){this.stateCheckboxEl.addEventListener("click",this.handleStateChange.bind(this)),this.el.querySelector(".social-share__options").addEventListener("click",e=>{let t=e.target;(t.classList.contains(_)||closest(t,`.${_}`))&&this.share(t.dataset.shareService)}),this.isEmbed&&!this.navigator.hasOwnProperty("clipboard")&&this.el.querySelector(".embed-overlay__copy-btn").remove()}_handleBodyClick(e){e.target===this.el||this.el.contains(e.target)||(this.stateCheckboxEl.checked=!1,this.onClose())}handleStateChange(e){e.target.checked?this.onOpen():this.onClose()}onOpen(){this.isEmbed?this.closeButton.addEventListener("click",this.onEmbedOverlayCloseClick):document.addEventListener("click",this.onBodyClick),this.stateCheckboxEl.setAttribute("aria-label",this.hideString)}onClose(){this.isEmbed?this.closeButton.removeEventListener("click",this.onEmbedOverlayCloseClick):document.removeEventListener("click",this.onBodyClick),this.stateCheckboxEl.setAttribute("aria-label",this.showString)}_copyText(){let e=this.el.querySelector(`.${S}`).value;e&&this.navigator.clipboard.writeText(e)}_getServiceUrl(e,t){const n=this.window.encodeURIComponent(t);return{linkedin:`https://www.linkedin.com/shareArticle?mini=true&url=${n}&title=${this._encodedShareMessage}`,twitter:`https://twitter.com/intent/tweet?url=${n}&text=${this._encodedShareMessage}`,facebook:`https://www.facebook.com/sharer/sharer.php&u=${n}`}[e]||""}share(e){if(e===k.COPY)this._copyText();else if(A.includes(e)){const t=this.window.location.href,n=this._getServiceUrl(e,t);this.window.open(n,e,"height=600,width=1000")}}}const L={};function getEmbeddedContent(e){if(void 0!==L[e])return L[e];const t=document.getElementById(e);if(!t)return console.warn(`Element with id: ${e} not found`),L[e]=null,L[e];try{L[e]=JSON.parse(t.firstChild.nodeValue)}catch(t){console.warn(`Error fetching embedded content with id: ${e}`),L[e]=null}return t.parentNode.removeChild(t),L[e]}var x=Object.freeze({init:function(e){e.forEach(e=>{e.addEventListener("load",()=>{const t=JSON.parse(e.getAttribute("data-player-document-config")),n=JSON.parse(e.getAttribute("data-a11y")),i=JSON.parse(e.getAttribute("data-i18n"));t.title=e.getAttribute("data-player-title"),t.subtitle=e.getAttribute("data-player-subtitle"),t.isScanAvailable="playerScanAvailable"in e.dataset,t.scanUnavailableOnDownloadTitle=e.getAttribute("data-player-scan-unavailable-on-download-title"),t.scanUnavailableOnAccessibilityModeTitle=e.getAttribute("data-player-scan-unavailable-on-accessibility-mode-title"),t.scanUnavailableRedirectUrl=e.getAttribute("data-player-scan-unavailable-redirect-url"),t.enableBottombar="playerCompactLayout"in e.dataset,t.authorTitle=e.getAttribute("data-player-author-title"),t.authorSubtitle=e.getAttribute("data-player-author-subtitle"),t.authorTitleUrl=e.getAttribute("data-player-author-title-url"),t.inbugUrl=e.getAttribute("data-player-inbug-url");const r={context:"native-document",action:"init",doc:t,a11y:n,i18n:i};e.contentWindow.postMessage(JSON.stringify(r),"*")})})}});var T=Object.freeze({init:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach(e=>{e.addEventListener("load",()=>{const n=JSON.parse(e.getAttribute("data-sources")),i=e.getAttribute("data-poster");let r=!0;"true"===e.getAttribute("data-enable-video-context-menu")&&(r=!1);const o=e.getAttribute("data-captions-url"),s={context:"native-video",disableVideoContextMenu:r,render:!0,playerOptions:t,video:{sources:n,poster:i,caption:o}};e.contentWindow.postMessage(s,"*")})})}});const N=function(e){const t=new RegExp("<(?!/?(?:"+e.allowedTags+")(?:[ \t\r\n]*/?>|[ \t\r\n]+(?:(?:(?:"+e.allowedAttributes+")(?:=([\"'])[^'\"<>]*\\1)?|(?:"+e.allowedURLAttributes+")=([\"'])(?:(?:"+e.allowedURLSchemes+")(?::|&#(?:58|x3a);)|[/.#?]|&#(?:35|4[67]|63|x(?:2[3ef]|3f));)[^'\"<>]*\\2)[ \t\r\n]*)+/?>))","i");return function(e){return!t.test(e)}}({allowedTags:"a|abbr|address|area|article|aside|audio|b|bdi|bdo|big|blockquote|br|button|center|cite|code|datalist|dd|del|details|dfn|div|dl|dt|em|fieldset|figcaption|figure|font|footer|h[1-6]|header|hgroup|hr|i|img|ins|kbd|label|legend|li|map|mark|marquee|nav|nobr|ol|p|pre|q|rp|rt|ruby|s|samp|section|small|source|span|strike|strong|sub|sup|table|tbody|td|tfoot|th|thead|time|tr|u|ul|var|video|wbr",allowedAttributes:"alt|aria-[a-z0-9_\\-]+|border|caption|checked|class|colgroup|color|cols|colspan|controls|coords|data-[a-z0-9_\\-]+|dir|disabled|height|hidden|hreflang|id|label|loop|marginheight|marginwidth|maxlength|method|multiple|name|preload|readonly|rel|required|reversed|role|rows|rowspan|spellcheck|tabindex|target|title|type|usemap|width|clear|headers|ismap|lang|start|datetime|accept|max|min|placeholder|size|step",allowedURLAttributes:"href|src",allowedURLSchemes:"https?|ftp|mailto"});const O="toast--hidden";class M{constructor(){let e=document.getElementById("toasts");if(!e)throw new Error("No toasts element");this._el=e,this._position=e.getAttribute("type")}trigger(e,t){if(!e||"notify"!==e&&"success"!==e&&"error"!==e)throw new Error("Valid type not specified: type must be success, error, or notify");if(!t)throw new Error("No message specified");let n=this._createToastEl(e,t);return this._addToast(n)}clearAllToasts(){this._el.childNodes.forEach(e=>{this._removeToast(e)})}_createToastEl(e,t){let n,i,r,o,s,a=this;return n=this._createElement({type:"div",classes:"toast toast--"+e+" toast--"+this._position+" "+O,attrs:[["role","alert"],["type",e]]}),i=this._createElement({type:"div",classes:"toast__inner"}),r=this._createElement({type:"li-icon",classes:"toast__icon",attrs:[["aria-hidden","true"],["type",e+"-pebble-icon"]],svg:e}),o=this._createElement({type:"p",classes:"toast__message",innerHTML:t}),(s=this._createElement({type:"button",classes:"toast__dismiss",svg:"dismiss"})).addEventListener("click",function(){a._removeToast(n)}),i.appendChild(r),i.appendChild(o),n.appendChild(i),n.appendChild(s),n}_createSvg(e){return"dismiss"===e?this._createDismissSvg():this._createTypeSvg(e)}_createTypeSvg(e){let t,n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttributeNS(null,"x","0px"),n.setAttributeNS(null,"y","0px"),n.setAttributeNS(null,"viewBox","0 0 24 24"),n.setAttributeNS(null,"style","enable-background:new 0 0 24 24;"),(t=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttributeNS(null,"style","fill: currentColor"),this._addGChildren(t,e),n.appendChild(t),n}_addGChildren(e,t){if("success"===t){let t,n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttributeNS(null,"r","9.1"),n.setAttributeNS(null,"stroke","currentColor"),n.setAttributeNS(null,"stroke-width","1.8"),n.setAttributeNS(null,"cx","12"),n.setAttributeNS(null,"cy","12"),n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"transform","rotate(-90 12 12)"),(t=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttributeNS(null,"d","M15.667,8L17,9.042l-5.316,7.36c-0.297,0.395-0.739,0.594-1.184,0.599c-0.455,0.005-0.911-0.195-1.215-0.599l-2.441-3.456l1.416-1.028l2.227,3.167L15.667,8z"),t.setAttributeNS(null,"fill","currentColor"),e.appendChild(n),e.appendChild(t)}if("error"===t){let t,n,i=document.createElementNS("http://www.w3.org/2000/svg","circle");i.setAttributeNS(null,"r","9.1"),i.setAttributeNS(null,"stroke","currentColor"),i.setAttributeNS(null,"stroke-width","1.8"),i.setAttributeNS(null,"cx","12"),i.setAttributeNS(null,"cy","12"),i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"transform","rotate(-90 12 12)"),(t=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttributeNS(null,"d","M13.238,12l3.463,3.463L15.463,16.7L12,13.237L8.538,16.7L7.3,15.463L10.763,12L7.3,8.537L8.538,7.3L12,10.763 l3.452-3.452l1.238,1.237L13.238,12z"),(n=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttributeNS(null,"style","fill:none"),n.setAttributeNS(null,"width","24"),n.setAttributeNS(null,"height","24"),e.appendChild(i),e.appendChild(t),e.appendChild(n)}if("notify"===t){let t,n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttributeNS(null,"d","M12,2C6.477,2,2,6.477,2,12c0,5.523,4.477,10,10,10c5.523,0,10-4.477,10-10C22,6.477,17.523,2,12,2z M12,20.23 c-4.538,0-8.23-3.692-8.23-8.23S7.462,3.77,12,3.77s8.23,3.692,8.23,8.23S16.538,20.23,12,20.23z M11,10h2v8h-2V10z M11,6h2v2h-2 V6z"),(t=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttributeNS(null,"style","fill:none;"),t.setAttributeNS(null,"width","24"),t.setAttributeNS(null,"height","24"),e.appendChild(n),e.appendChild(t)}}_createDismissSvg(){let e,t,n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"viewBox","0 0 24 24"),n.setAttributeNS(null,"width","24px"),n.setAttributeNS(null,"height","24px"),n.setAttributeNS(null,"class","toast__dismiss-icon"),(e=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttributeNS(null,"style","fill-opacity: 1"),(t=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttributeNS(null,"d","M13,4.32L9.31,8,13,11.69,11.69,13,8,9.31,4.31,13,3,11.69,6.69,8,3,4.31,4.31,3,8,6.69,11.68,3Z"),n.appendChild(e),n.appendChild(t),n}_addToast(e){return this._el.appendChild(e),setTimeout(function(){e.classList.remove(O)},500),e}_removeToast(e){let t=this._el;e.classList.add(O),setTimeout(function(){t.removeChild(e)},500)}_createElement(e){var t=m({},e);let n,i=t.type,r=t.classes,o=t.attrs,s=t.innerHTML,a=t.svg;if(n=document.createElement(i),r&&(n.className=r),a){let e=this._createSvg(a);n.appendChild(e)}var l;if(s&&(n.innerHTML=N(l=s)?l:l.replace(/<[^>]*>|[<>'"&\\]/g,"")),o){var c=!0,u=!1,d=void 0;try{for(var h,p=o[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){let e=h.value;n.setAttribute(e[0],e[1])}}catch(e){u=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(u)throw d}}}return n}}}).call(t,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(5),o=n.n(r);const s=document.referrer.split("/").slice(0,3).join("/"),a=document.querySelector(".post-wrapper--compact"),l=document.querySelector(".social-share");l&&new i.b(l);const c=document.querySelector(".main--embed");if(c&&-1!==["https://www.linkedin.com","https://pemberly.www.linkedin.com:4443","https://www.linkedin-ei.com","https://pemberly.www.linkedin-ei.com:4443"].indexOf(s)&&window.parent.postMessage({context:"public-post",height:Math.ceil(c.offsetHeight)},s),a){const e=document.querySelector(".share-native-video__iframe");e&&e.addEventListener("load",()=>{const t=new o.a.Player(e);t.on("ready",function(){const e=document.querySelector(".share-native-video-overlay__preview");e&&e.addEventListener("click",function(){a.classList.add("video-entity--loaded"),t.play()}),t.on("play",function(){a.classList.remove("video-entity--ended"),a.classList.remove("video-entity--pause"),a.classList.add("video-entity--play")}),t.on("pause",function(){a.classList.remove("video-entity--play"),a.classList.add("video-entity--pause")}),t.on("ended",function(){a.classList.add("video-entity--ended"),a.classList.remove("video-entity--play")})})})}i.e.init(i.g.makeArray(document.querySelectorAll(".share-native-document__iframe"))),i.f.init(i.g.makeArray(document.querySelectorAll(".share-native-video__iframe")))},function(e,t,n){!function(t){var n={};function createPrototypeFunction(e){return function(){var t={method:e},i=Array.prototype.slice.call(arguments);/^get/.test(e)?(n.assert(i.length>0,"Get methods require a callback."),i.unshift(t)):(/^set/.test(e)&&(n.assert(0!==i.length,"Set methods require a value."),t.value=i[0]),i=[t]),this.send.apply(this,i)}}n.DEBUG=!1,n.VERSION="0.0.12",n.CONTEXT="player.js",n.POST_MESSAGE=!!t.postMessage,n.origin=function(e){return"//"===e.substr(0,2)&&(e=t.location.protocol+e),e.split("/").slice(0,3).join("/")},n.addEvent=function(e,t,n){e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on "+t]=n)},n.removeEvent=function(e,t,n){e&&(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null)},n.log=function(){n.log.history=n.log.history||[],n.log.history.push(arguments),t.console&&n.DEBUG&&t.console.log(Array.prototype.slice.call(arguments))},n.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},n.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.isNone=function(e){return null==e},n.has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.indexOf=function(e,t){if(null==e)return-1;var n=0,i=e.length;if(Array.prototype.IndexOf&&e.indexOf===Array.prototype.IndexOf)return e.indexOf(t);for(;n<i;n++)if(e[n]===t)return n;return-1},n.assert=function(e,t){if(!e)throw t||"Player.js Assert Failed"},n.Keeper=function(){this.init()},n.Keeper.prototype.init=function(){this.data={}},n.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},n.Keeper.prototype.has=function(e,t){if(!this.data.hasOwnProperty(e))return!1;if(n.isNone(t))return!0;for(var i=this.data[e],r=0;r<i.length;r++)if(i[r].id===t)return!0;return!1},n.Keeper.prototype.add=function(e,t,n,i,r){var o={id:e,event:t,cb:n,ctx:i,one:r};this.has(t)?this.data[t].push(o):this.data[t]=[o]},n.Keeper.prototype.execute=function(e,t,i,r){if(!this.has(e,t))return!1;for(var o=[],s=[],a=0;a<this.data[e].length;a++){var l=this.data[e][a];n.isNone(t)||!n.isNone(t)&&l.id===t?(s.push({cb:l.cb,ctx:l.ctx?l.ctx:r,data:i}),!1===l.one&&o.push(l)):o.push(l)}0===o.length?delete this.data[e]:this.data[e]=o;for(var c=0;c<s.length;c++){var u=s[c];u.cb.call(u.ctx,u.data)}},n.Keeper.prototype.on=function(e,t,n,i){this.add(e,t,n,i,!1)},n.Keeper.prototype.one=function(e,t,n,i){this.add(e,t,n,i,!0)},n.Keeper.prototype.off=function(e,t){var i=[];if(!this.data.hasOwnProperty(e))return i;for(var r=[],o=0;o<this.data[e].length;o++){var s=this.data[e][o];n.isNone(t)||s.cb===t?n.isNone(s.id)||i.push(s.id):r.push(s)}return 0===r.length?delete this.data[e]:this.data[e]=r,i},n.Player=function(e,t){if(!(this instanceof n.Player))return new n.Player(e,t);this.init(e,t)},n.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},n.EVENTS.all=function(){var e=[];for(var t in n.EVENTS)n.has(n.EVENTS,t)&&n.isString(n.EVENTS[t])&&e.push(n.EVENTS[t]);return e},n.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"},n.METHODS.all=function(){var e=[];for(var t in n.METHODS)n.has(n.METHODS,t)&&n.isString(n.METHODS[t])&&e.push(n.METHODS[t]);return e},n.READIED=[],n.Player.prototype.init=function(e,i){var r=this;n.isString(e)&&(e=document.getElementById(e)),this.elem=e,this.origin=n.origin(e.src),this.keeper=new n.Keeper,this.isReady=!1,this.queue=[],this.events=n.EVENTS.all(),this.methods=n.METHODS.all(),this._boundReceive=function(e){this.receive(e)}.bind(this),n.POST_MESSAGE?n.addEvent(t,"message",this._boundReceive):n.log("Post Message is not Available."),n.indexOf(n.READIED,e.src)>-1?r.loaded=!0:this.elem.onload=function(){r.loaded=!0}},n.Player.prototype.send=function(e,t,i){if(e.context=n.CONTEXT,e.version=n.VERSION,t){if(!this.keeper)return!1;var r=this.keeper.getUUID();e.listener=r,this.keeper.one(r,e.method,t,i)}return this.isReady||"ready"===e.value?(n.log("Player.send",e,this.origin),!0===this.loaded&&this.elem.contentWindow&&this.elem.contentWindow.postMessage(JSON.stringify(e),this.origin),!0):(n.log("Player.queue",e),this.queue.push(e),!1)},n.Player.prototype.receive=function(e){if(n.log("Player.receive",e),e.origin!==this.origin)return!1;var t;try{t=JSON.parse(e.data)}catch(e){return!1}if(t.context!==n.CONTEXT)return!1;"ready"===t.event&&t.value&&t.value.src===this.elem.src&&this.ready(t),this.keeper&&this.keeper.has(t.event,t.listener)&&this.keeper.execute(t.event,t.listener,t.value,this)},n.Player.prototype.ready=function(e){if(!0===this.isReady)return!1;e.value.events&&(this.events=e.value.events),e.value.methods&&(this.methods=e.value.methods),this.isReady=!0,this.loaded=!0;for(var t=0;t<this.queue.length;t++){var i=this.queue[t];n.log("Player.dequeue",i),"ready"===e.event&&this.keeper.execute(i.event,i.listener,!0,this),this.send(i)}this.queue=[]},n.Player.prototype.on=function(e,t,n){if(!this.keeper)return!1;var i=this.keeper.getUUID();return"ready"===e?this.keeper.one(i,e,t,n):this.keeper.on(i,e,t,n),this.send({method:"addEventListener",value:e,listener:i}),!0},n.Player.prototype.off=function(e,t){if(!this.keeper)return!1;var i=this.keeper.off(e,t);if(n.log("Player.off",i),i.length>0)for(var r in i)return this.send({method:"removeEventListener",value:e,listener:i[r]}),!0;return!1},n.Player.prototype.supports=function(e,t){n.assert(n.indexOf(["method","event"],e)>-1,'evtOrMethod needs to be either "event" or "method" got '+e),t=n.isArray(t)?t:[t];for(var i="event"===e?this.events:this.methods,r=0;r<t.length;r++)if(-1===n.indexOf(i,t[r]))return!1;return!0},n.Player.prototype.destroy=function(){n.removeEvent(t,"message",this._boundReceive);try{delete this.origin,delete this.keeper,delete this.isReady,delete this.queue,delete this.events,delete this.methods}catch(e){n.log("Error deleting Player properties",e)}};for(var i=0,r=n.METHODS.all().length;i<r;i++){var o=n.METHODS.all()[i];n.Player.prototype.hasOwnProperty(o)||(n.Player.prototype[o]=createPrototypeFunction(o))}n.addEvent(t,"message",function(e){var t;try{t=JSON.parse(e.data)}catch(e){return!1}if(t.context!==n.CONTEXT)return!1;"ready"===t.event&&t.value&&t.value.src&&n.READIED.push(t.value.src)}),n.Receiver=function(e,t){this.init(e,t)},n.Receiver.prototype.init=function(e,i){var r=this;this.isReady=!1,this.cachedError=!1,this.origin=n.origin(document.referrer),this.methods={},this.supported={events:e||n.EVENTS.all(),methods:i||n.METHODS.all()},this.eventListeners={},this.reject=!(t.self!==t.top&&n.POST_MESSAGE),this.reject||n.addEvent(t,"message",function(e){r.receive(e)})},n.Receiver.prototype.receive=function(e){if(e.origin!==this.origin)return!1;var i={};if(n.isObject(e.data))i=e.data;else try{i=t.JSON.parse(e.data)}catch(e){n.log("JSON Parse Error",e)}if(n.log("Receiver.receive",e,i),!i.method)return!1;if(i.context!==n.CONTEXT)return!1;if(-1===n.indexOf(n.METHODS.all(),i.method))return this.emit("error",{code:2,msg:'Invalid Method "'+i.method+'"'}),!1;var r=n.isNone(i.listener)?null:i.listener;if("addEventListener"===i.method)this.eventListeners.hasOwnProperty(i.value)?-1===n.indexOf(this.eventListeners[i.value],r)&&this.eventListeners[i.value].push(r):this.eventListeners[i.value]=[r],"ready"===i.value&&this.isReady?this.ready():"error"===i.value&&this.cachedError&&this.error();else if("removeEventListener"===i.method){if(this.eventListeners.hasOwnProperty(i.value)){var o=n.indexOf(this.eventListeners[i.value],r);o>-1&&this.eventListeners[i.value].splice(o,1),0===this.eventListeners[i.value].length&&delete this.eventListeners[i.value]}}else this.get(i.method,i.value,r)},n.Receiver.prototype.get=function(e,t,n){var i=this;if(!this.methods.hasOwnProperty(e))return this.emit("error",{code:3,msg:'Method Not Supported"'+e+'"'}),!1;var r=this.methods[e];if("get"===e.substr(0,3)){r.call(this,function(t){i.send(e,t,n)})}else r.call(this,t)},n.Receiver.prototype.on=function(e,t){this.methods[e]=t},n.Receiver.prototype.send=function(e,i,r){if(n.log("Receiver.send",e,i,r),this.reject)return n.log("Receiver.send.reject",e,i,r),!1;var o={context:n.CONTEXT,version:n.VERSION,event:e};n.isNone(i)||(o.value=i),n.isNone(r)||(o.listener=r);var s=JSON.stringify(o);t.parent.postMessage(s,""===this.origin?"*":this.origin)},n.Receiver.prototype.emit=function(e,t){if(!this.eventListeners.hasOwnProperty(e))return"error"===e&&(this.cachedError=t||!0),!1;n.log("Instance.emit",e,t,this.eventListeners[e]);for(var i=0;i<this.eventListeners[e].length;i++){var r=this.eventListeners[e][i];this.send(e,t,r)}return!0},n.Receiver.prototype.ready=function(){n.log("Receiver.ready"),this.isReady=!0;var e={src:t.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",e)||this.send("ready",e)},n.Receiver.prototype.error=function(){n.log("Receiver.error");var e=this.cachedError;this.emit("error",e)||this.send("error",e),this.cachedError=!1},n.HTML5Adapter=function(e){if(!(this instanceof n.HTML5Adapter))return new n.HTML5Adapter(e);this.init(e)},n.HTML5Adapter.prototype.init=function(e){n.assert(e,"playerjs.VideoJSReceiver requires a video element");var t=this.receiver=new n.Receiver;e.addEventListener("playing",function(){t.emit("play")}),e.addEventListener("pause",function(){t.emit("pause")}),e.addEventListener("ended",function(){t.emit("ended")}),e.addEventListener("timeupdate",function(){t.emit("timeupdate",{seconds:e.currentTime,duration:e.duration})}),e.addEventListener("progress",function(){t.emit("buffered",{percent:e.buffered.length})}),t.on("play",function(){e.play()}),t.on("pause",function(){e.pause()}),t.on("getPaused",function(t){t(e.paused)}),t.on("getCurrentTime",function(t){t(e.currentTime)}),t.on("setCurrentTime",function(t){e.currentTime=t}),t.on("getDuration",function(t){t(e.duration)}),t.on("getVolume",function(t){t(100*e.volume)}),t.on("setVolume",function(t){e.volume=t/100}),t.on("mute",function(){e.muted=!0}),t.on("unmute",function(){e.muted=!1}),t.on("getMuted",function(t){t(e.muted)}),t.on("getLoop",function(t){t(e.loop)}),t.on("setLoop",function(t){e.loop=t})},n.HTML5Adapter.prototype.ready=function(){this.receiver.ready()},n.JWPlayerAdapter=function(e){if(!(this instanceof n.JWPlayerAdapter))return new n.JWPlayerAdapter(e);this.init(e)},n.JWPlayerAdapter.prototype.init=function(e){n.assert(e,"playerjs.JWPlayerAdapter requires a player object");var t=this.receiver=new n.Receiver;this.looped=!1,e.onPause(function(){t.emit("pause")}),e.onPlay(function(){t.emit("play")}),e.onTime(function(e){var n=e.position,i=e.duration;if(!n||!i)return!1;var r={seconds:n,duration:i};t.emit("timeupdate",r)});var i=this;e.onComplete(function(){!0===i.looped?e.seek(0):t.emit("ended")}),e.onError(function(){t.emit("error")}),t.on("play",function(){e.play(!0)}),t.on("pause",function(){e.pause(!0)}),t.on("getPaused",function(t){t(e.getState().toLowerCase()!=="PLAYING".toLowerCase())}),t.on("getCurrentTime",function(t){t(e.getPosition())}),t.on("setCurrentTime",function(t){e.seek(t)}),t.on("getDuration",function(t){t(e.getDuration())}),t.on("getVolume",function(t){t(e.getVolume())}),t.on("setVolume",function(t){e.setVolume(t)}),t.on("mute",function(){e.setMute(!0)}),t.on("unmute",function(){e.setMute(!1)}),t.on("getMuted",function(t){t(!0===e.getMute())}),t.on("getLoop",function(e){e(this.looped)},this),t.on("setLoop",function(e){this.looped=e},this)},n.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()},n.MockAdapter=function(){if(!(this instanceof n.MockAdapter))return new n.MockAdapter;this.init()},n.MockAdapter.prototype.init=function(){var e={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){e.interval=setInterval(function(){e.currentTime+=.25,e.timeupdate({seconds:e.currentTime,duration:e.duration})},250),e.playing=!0},pause:function(){clearInterval(e.interval),e.playing=!1}},t=this.receiver=new n.Receiver;t.on("play",function(){var t=this;e.play(),this.emit("play"),e.timeupdate=function(e){t.emit("timeupdate",e)}}),t.on("pause",function(){e.pause(),this.emit("pause")}),t.on("getPaused",function(t){t(!e.playing)}),t.on("getCurrentTime",function(t){t(e.currentTime)}),t.on("setCurrentTime",function(t){e.currentTime=t}),t.on("getDuration",function(t){t(e.duration)}),t.on("getVolume",function(t){t(e.volume)}),t.on("setVolume",function(t){e.volume=t}),t.on("mute",function(){e.mute=!0}),t.on("unmute",function(){e.mute=!1}),t.on("getMuted",function(t){t(e.mute)}),t.on("getLoop",function(t){t(e.loop)}),t.on("setLoop",function(t){e.loop=t})},n.MockAdapter.prototype.ready=function(){this.receiver.ready()},n.VideoJSAdapter=function(e){if(!(this instanceof n.VideoJSAdapter))return new n.VideoJSAdapter(e);this.init(e)},n.VideoJSAdapter.prototype.init=function(e){n.assert(e,"playerjs.VideoJSReceiver requires a player object");var t=this.receiver=new n.Receiver;e.on("pause",function(){t.emit("pause")}),e.on("play",function(){t.emit("play")}),e.on("timeupdate",function(n){var i=e.currentTime(),r=e.duration();if(!i||!r)return!1;var o={seconds:i,duration:r};t.emit("timeupdate",o)}),e.on("ended",function(){t.emit("ended")}),e.on("error",function(){t.emit("error")}),t.on("play",function(){e.play()}),t.on("pause",function(){e.pause()}),t.on("getPaused",function(t){t(e.paused())}),t.on("getCurrentTime",function(t){t(e.currentTime())}),t.on("setCurrentTime",function(t){e.currentTime(t)}),t.on("getDuration",function(t){t(e.duration())}),t.on("getVolume",function(t){t(100*e.volume())}),t.on("setVolume",function(t){e.volume(t/100)}),t.on("mute",function(){e.volume(0)}),t.on("unmute",function(){e.volume(1)}),t.on("getMuted",function(t){t(0===e.volume())}),t.on("getLoop",function(t){t(e.loop())}),t.on("setLoop",function(t){e.loop(t)})},n.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()},e.exports=n}(window)}]);