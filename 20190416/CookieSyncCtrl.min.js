Object.keys||(Object.keys=function(){var f=Object.prototype.hasOwnProperty,d=!{toString:null}.propertyIsEnumerable("toString"),a="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),b=a.length;return function(c){if("object"!==typeof c&&("function"!==typeof c||null===c))throw new TypeError("Object.keys called on non-object");var e=[],g;for(g in c)f.call(c,g)&&e.push(g);if(d)for(g=0;g<b;g++)f.call(c,a[g])&&e.push(a[g]);return e}}());
Array.prototype.indexOf||(Array.prototype.indexOf=function(f,d){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var a=this.length>>>0;d=+d||0;Infinity===Math.abs(d)&&(d=0);0>d&&(d+=a,0>d&&(d=0));for(;d<a;d++)if(this[d]===f)return d;return-1});
var sas_csync_DEBUG=!1,sasCookieSyncCtrl=sasCookieSyncCtrl||function(f,d){sas_csync_DEBUG&&console.log("sasCookieSyncCtrl is created");return{protocol:(f.location.protocol||"").replace(":",""),qs:[],optoutNw:[],optoutDc:[],smartCookieName:"pid",csyncFreqCookieName:"csfq",csyncCnameFreqCookieName:"cnfq",cookieTtlHrs:6,cookieGraceHrs:6,contains:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1},parseQueryString:function(a){a=a.split("&");if(""!=a){for(var b={},c=0;c<a.length;++c){var e=
a[c].split("=");2==e.length&&(b[e[0]]=decodeURIComponent(e[1].replace(/\+/g," ")))}this.qs=b}},getIntFromParsedQueryString:function(a,b){var c=a[b];return"undefined"==typeof c||isNaN(parseInt(c,10))||0>parseInt(c,10)?0:parseInt(c,10)},getBoolFromParsedQueryString:function(a,b){return"true"===a[b]},parseValues:function(a,b,c){var e={};a=a.split(b);for(b=0;b<a.length;b++){var g=a[b],d=g.indexOf(c),f=g.substring(0,d),g=g.substring(d+1);e[f]=decodeURIComponent(g)}return e},getNwId:function(){return this.getIntFromParsedQueryString(this.qs,
"nwid")},getDcId:function(){return this.getIntFromParsedQueryString(this.qs,"dcid")},hasRtb:function(){return this.getBoolFromParsedQueryString(this.qs,"hasrtb")},isCname:function(){return this.getBoolFromParsedQueryString(this.qs,"iscname")},getFullDoaminName:function(){return this.qs.cname},tryGetPidDateComponent:function(a){a=a%549755813888/8192;var b=new Date(2E3,0,1);b.setMinutes(b.getMinutes()+a);return b},shouldRenderCsync:function(a){if(this.contains(this.optoutNw,this.getNwId())||this.contains(this.optoutDc,
this.getDcId())||!a||!this.hasRtb())return!1;a=this.parseValues(a,"; ","=");if(!a||!a[this.smartCookieName]||null==a[this.smartCookieName])return!1;sas_csync_DEBUG&&console.log("sasCookieSyncCtrl started",this.getNwId(),this.getDcId(),this.hasRtb(),this.isCname());var b=a[this.smartCookieName],c=this.tryGetPidDateComponent(b),e=new Date,d=e.getTime()-36E5*this.cookieGraceHrs,f=(new Date(e.getFullYear()+1,e.getMonth(),e.getDate())).getTime(),e=(new Date(e.getFullYear()-1,e.getMonth(),e.getDate())).getTime();
sas_csync_DEBUG&&console.log("sasCookieSyncCtrl pid",b,c,d,c.getTime());if(e<c.getTime()&&c.getTime()>f&&d<c.getTime())return!1;sas_csync_DEBUG&&console.log("sasCookieSyncCtrl cookiez",a);return null!=a[this.csyncFreqCookieName]||null!=a[this.csyncCnameFreqCookieName]?!1:!0},tryRenderCsync:function(){sas_csync_DEBUG&&console.log("sasCookieSyncCtrl is trying to render");if(navigator&&navigator.platform){var a=!1;if("iP"===navigator.platform.substr(0,2)){var b=/constructor/i.test(f.HTMLElement),c=f.navigator,
e=c.userAgent,d=!!f.indexedDB;if(-1!==e.indexOf("Safari")&&-1!==e.indexOf("Version")&&!c.standalone)a=!1;else if(!d&&b||!f.statusbar.visible)a=!0;else if(f.webkit&&f.webkit.messageHandlers||!b||d)a=!0}a?sas_csync_DEBUG&&console.log("sasCookieSyncCtrl UiWebView detected won't execute."):(a=this.getCsyncSrc(),null!=a&&this.createScript(a))}},onLoad:function(){sas_csync_DEBUG&&console.log("sasCookieSyncCtrl onLoad executed");this.setCookie(this.csyncFreqCookieName,1,this.cookieTtlHrs);if(this.isCname()&&
navigator&&navigator.platform){var a=!1;if("iP"===navigator.platform.substr(0,2)){var b=/constructor/i.test(f.HTMLElement),c=f.navigator,d=c.userAgent,g=!!f.indexedDB;if(-1!==d.indexOf("Safari")&&-1!==d.indexOf("Version")&&!c.standalone)a=!1;else if(!g&&b||!f.statusbar.visible)a=!0;else if(f.webkit&&f.webkit.messageHandlers||!b||g)a=!0}a||(a=this.getCnameUrl(),null!=a&&(a=a.replace("CNAME_URL",this.getFullDoaminName())+"&ts="+(new Date).getTime(),sas_csync_DEBUG&&console.log("sasCookieSyncCtrl cnameUrl",
a),(new Image).src=a,this.setCookie(this.csyncCnameFreqCookieName,1,this.cookieTtlHrs)))}},createScript:function(a){var b=d.createElement("SCRIPT");b.src=a;b.type="text/javascript";b.async=!0;null!=d.body&&(d.body.appendChild(b),sas_csync_DEBUG&&console.log("sasCookieSyncCtrl in script"));return b},setCookie:function(a,b,c){var e=new Date;e.setTime(e.getTime()+36E5*c);c="expires="+e.toUTCString();d.cookie=a+"="+b+";"+c+";path=/"},getCsyncSrc:function(){for(var a=d.getElementsByTagName("SCRIPT"),b=
0,c=a.length;b<c;b++)if(null!=a[b].getAttribute("data-sas-csync-src"))return a[b].getAttribute("data-sas-csync-src");return null},getCnameUrl:function(){for(var a=d.getElementsByTagName("SCRIPT"),b=0,c=a.length;b<c;b++)if(null!=a[b].getAttribute("data-sas-cname-url"))return a[b].getAttribute("data-sas-cname-url");return null}}}(window,document);sasCookieSyncCtrl.parseQueryString(window.location.search.substr(1));
sasCookieSyncCtrl.shouldRenderCsync(document.cookie)&&(window.addEventListener("load",sasCookieSyncCtrl.onLoad.bind(sasCookieSyncCtrl),!1),sasCookieSyncCtrl.tryRenderCsync());
