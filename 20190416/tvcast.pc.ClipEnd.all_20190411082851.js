!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){if(Element&&!Element.prototype.matches){var proto=Element.prototype;proto.matches=proto.matchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector||proto.webkitMatchesSelector}module.exports=function(element,selector){for(;element&&element!==document;){if(element.matches(selector))return element;element=element.parentNode}}},{}],2:[function(require,module,exports){var closest=require("./closest");module.exports=function(element,selector,type,callback,useCapture){var listenerFn=function(element,selector,type,callback){return function(e){e.delegateTarget=closest(e.target,selector),e.delegateTarget&&callback.call(element,e)}}.apply(this,arguments);return element.addEventListener(type,listenerFn,useCapture),{destroy:function(){element.removeEventListener(type,listenerFn,useCapture)}}}},{"./closest":1}],3:[function(require,module,exports){exports.node=function(value){return void 0!==value&&value instanceof HTMLElement&&1===value.nodeType},exports.nodeList=function(value){var type=Object.prototype.toString.call(value);return void 0!==value&&("[object NodeList]"===type||"[object HTMLCollection]"===type)&&"length"in value&&(0===value.length||exports.node(value[0]))},exports.string=function(value){return"string"==typeof value||value instanceof String},exports.fn=function(value){return"[object Function]"===Object.prototype.toString.call(value)}},{}],4:[function(require,module,exports){var is=require("./is"),delegate=require("delegate");module.exports=function(target,type,callback){if(!target&&!type&&!callback)throw new Error("Missing required arguments");if(!is.string(type))throw new TypeError("Second argument must be a String");if(!is.fn(callback))throw new TypeError("Third argument must be a Function");if(is.node(target))return function(node,type,callback){return node.addEventListener(type,callback),{destroy:function(){node.removeEventListener(type,callback)}}}(target,type,callback);if(is.nodeList(target))return function(nodeList,type,callback){return Array.prototype.forEach.call(nodeList,function(node){node.addEventListener(type,callback)}),{destroy:function(){Array.prototype.forEach.call(nodeList,function(node){node.removeEventListener(type,callback)})}}}(target,type,callback);if(is.string(target))return function(selector,type,callback){return delegate(document.body,selector,type,callback)}(target,type,callback);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},{"./is":3,delegate:2}],5:[function(require,module,exports){module.exports=function(element){var selectedText;if("SELECT"===element.nodeName)element.focus(),selectedText=element.value;else if("INPUT"===element.nodeName||"TEXTAREA"===element.nodeName)element.focus(),element.setSelectionRange(0,element.value.length),selectedText=element.value;else{element.hasAttribute("contenteditable")&&element.focus();var selection=window.getSelection(),range=document.createRange();range.selectNodeContents(element),selection.removeAllRanges(),selection.addRange(range),selectedText=selection.toString()}return selectedText}},{}],6:[function(require,module,exports){function E(){}E.prototype={on:function(name,callback,ctx){var e=this.e||(this.e={});return(e[name]||(e[name]=[])).push({fn:callback,ctx:ctx}),this},once:function(name,callback,ctx){var self=this;function listener(){self.off(name,listener),callback.apply(ctx,arguments)}return listener._=callback,this.on(name,listener,ctx)},emit:function(name){for(var data=[].slice.call(arguments,1),evtArr=((this.e||(this.e={}))[name]||[]).slice(),i=0,len=evtArr.length;i<len;i++)evtArr[i].fn.apply(evtArr[i].ctx,data);return this},off:function(name,callback){var e=this.e||(this.e={}),evts=e[name],liveEvents=[];if(evts&&callback)for(var i=0,len=evts.length;i<len;i++)evts[i].fn!==callback&&evts[i].fn._!==callback&&liveEvents.push(evts[i]);return liveEvents.length?e[name]=liveEvents:delete e[name],this}},module.exports=E},{}],7:[function(require,module,exports){!function(global,factory){if(void 0!==exports)factory(module,require("select"));else{var mod={exports:{}};factory(mod,global.select),global.clipboardAction=mod.exports}}(this,function(module,_select){"use strict";var obj,_select2=(obj=_select)&&obj.__esModule?obj:{default:obj};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ClipboardAction=function(){function ClipboardAction(options){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ClipboardAction),this.resolveOptions(options),this.initSelection()}return _createClass(ClipboardAction,[{key:"resolveOptions",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=options.action,this.emitter=options.emitter,this.target=options.target,this.text=options.text,this.trigger=options.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var _this=this,isRTL="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return _this.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[isRTL?"right":"left"]="-9999px";var yPosition=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,yPosition)),this.fakeElem.style.top=yPosition+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,_select2.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,_select2.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var succeeded=void 0;try{succeeded=document.execCommand(this.action)}catch(err){succeeded=!1}this.handleResult(succeeded)}},{key:"handleResult",value:function(succeeded){this.emitter.emit(succeeded?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var action=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=action,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(target){if(void 0!==target){if(!target||"object"!==(void 0===target?"undefined":_typeof(target))||1!==target.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&target.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(target.hasAttribute("readonly")||target.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=target}},get:function(){return this._target}}]),ClipboardAction}();module.exports=ClipboardAction})},{select:5}],8:[function(require,module,exports){!function(global,factory){if(void 0!==exports)factory(module,require("./clipboard-action"),require("tiny-emitter"),require("good-listener"));else{var mod={exports:{}};factory(mod,global.clipboardAction,global.tinyEmitter,global.goodListener),global.clipboard=mod.exports}}(this,function(module,_clipboardAction,_tinyEmitter,_goodListener){"use strict";var _clipboardAction2=_interopRequireDefault(_clipboardAction),_tinyEmitter2=_interopRequireDefault(_tinyEmitter),_goodListener2=_interopRequireDefault(_goodListener);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var Clipboard=function(_Emitter){function Clipboard(trigger,options){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Clipboard);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Clipboard.__proto__||Object.getPrototypeOf(Clipboard)).call(this));return _this.resolveOptions(options),_this.listenClick(trigger),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Clipboard,_tinyEmitter2["default"]),_createClass(Clipboard,[{key:"resolveOptions",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof options.action?options.action:this.defaultAction,this.target="function"==typeof options.target?options.target:this.defaultTarget,this.text="function"==typeof options.text?options.text:this.defaultText}},{key:"listenClick",value:function(trigger){var _this2=this;this.listener=(0,_goodListener2.default)(trigger,"click",function(e){return _this2.onClick(e)})}},{key:"onClick",value:function(e){var trigger=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new _clipboardAction2.default({action:this.action(trigger),target:this.target(trigger),text:this.text(trigger),trigger:trigger,emitter:this})}},{key:"defaultAction",value:function(trigger){return getAttributeValue("action",trigger)}},{key:"defaultTarget",value:function(trigger){var selector=getAttributeValue("target",trigger);if(selector)return document.querySelector(selector)}},{key:"defaultText",value:function(trigger){return getAttributeValue("text",trigger)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}]),Clipboard}();function getAttributeValue(suffix,element){var attribute="data-clipboard-"+suffix;if(element.hasAttribute(attribute))return element.getAttribute(attribute)}module.exports=Clipboard})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)});var ImageUtil=jindo.$Class({$static:{setImgSrc:function(welBase){var awelImg=jindo.$ElementList(jindo.$$("img",welBase));if(awelImg&&0<awelImg.length())for(var i=0;i<awelImg.length();i++){var welImg=awelImg.get(i),sSrc=welImg.data("src");sSrc&&welImg.attr("src",sSrc)}}}}),LikeIt=jindo.$Class({_htEnv:null,$init:function(htEnv){this._htEnv=htEnv,this._loadLikeIt()},_loadLikeIt:function(){var sDate=this._getDate(),sLikeItUrl=this._htEnv.sLikeItDomain+"/static/js/likeIt.list.js?v="+sDate;jindo.LazyLoading.load(sLikeItUrl,jindo.$Fn(this._initLikeIt,this).bind())},_getDate:function(){return Date.now=Date.now||function(){return+new Date},new jindo.$Date(Date.now()).format("Ymd")},_initLikeIt:function(){try{var htLikeItOption={sId:"TVCAST",sDomain:this._htEnv.sLikeItDomain,bMobile:!1,sTemplate:'<span class="u_ico"></span><em class="u_txt">좋아요</em><em class="u_cnt _cnt"></em>',bZeroText:!0,sCountCallbackYn:"Y",bUseStorage:!1};nhn.LikeIt.list.util.init(htLikeItOption)}catch(e){}},update:function(){nhn.LikeIt&&nhn.LikeIt.list&&nhn.LikeIt.list.instance&&nhn.LikeIt.list.instance.update()}});tvcast.pc.SocialPlugin=jindo.$Class({$static:{_htOption:null,init:function(htOption){this._htOption=htOption||{};var sUrl="https://ssl.pstatic.net/spi/js/release/ko_KR/splugin.js?"+tvcast.pc.Util.getTodayDate();this._load(sUrl)},_load:function(sUrl){jindo.LazyLoading.load(sUrl,jindo.$Fn(this._initSocialPlugin,this).bind())},_initSocialPlugin:function(){if(window.__splugin=window.SocialPlugIn_Core({evKey:"tvcast",serviceName:"네이버TV",source:"",sourceName:this._htOption.sChannelName||"",onClick:this._htOption.wfClickHandler||new Function,onShow:this._htOption.wfShowHandler||new Function,onHide:this._htOption.wfHideHandler||new Function}),this._htOption.bFireEvent){if(!jindo.$Element("spiButton"))return;jindo.$Element("spiButton").fireEvent("click")}}}});var WideMode=jindo.$Class({_WIDE_MODE_WIDTH:1500,_bIsWideMode:null,$init:function(){this.getCurrentWidth()>=this._WIDE_MODE_WIDTH?this.setIsWideMode(!0):this.setIsWideMode(!1)},isChangeToWideMode:function(){return this.getCurrentWidth()>=this._WIDE_MODE_WIDTH&&!this.getIsWideMode()},isChangeToNormalMode:function(){return!!(this.getCurrentWidth()<this._WIDE_MODE_WIDTH&&this.getIsWideMode())},setIsWideMode:function(bIsWideMode){this._bIsWideMode=bIsWideMode},getIsWideMode:function(){return this._bIsWideMode},getCurrentWidth:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}),Patron=jindo.$Class({_htEnv:null,_sPatronResourceDomain:"",_htPatronOption:null,$init:function(htEnv){this._assignVar(htEnv),this._loadScript()},_assignVar:function(htEnv){this._sPatronResourceDomain=htEnv.sPatronResourceDomain,this._htPatronOption={serviceCode:htEnv.sPatronServiceId,categoryId:"c",productId:htEnv.sPatronProductId,useServiceCss:!0,uiType:"typeA",wrapper:document.getElementById("patronButton"),defaultLocale:"en_US",serviceLocale:"ko_KR",buttonLabel:"후원",patronButtonReady:function(){console.log("patron button loading complete")}}},_loadScript:function(){var timestamp=Math.floor(Date.now());jindo.$Element("patronButton")&&jindo.LazyLoading.load(this._sPatronResourceDomain+"/dist/patron.init.js?v="+timestamp,jindo.$Fn(function(){patron.init(this._htPatronOption)},this).bind())},update:function(htEnv){this._assignVar(htEnv),this._loadScript()}});tvcast.pc.Util=jindo.$Class({$static:{sendClickCode:function(elSource,sClickCode,oEvent){try{window.clickcr(elSource,sClickCode,"","",oEvent)}catch(e){}},getTodayDate:function(){return Date.now=Date.now||function(){return+new Date},new jindo.$Date(Date.now()).format("Ymd")},ajax:function(sUrl,wfLoadHandler,oData,bAsync){var oAjax=new jindo.$Ajax(sUrl,{type:"xhr",method:"get",onload:wfLoadHandler,onerror:function(){},async:bAsync||!0});oAjax.request(oData),oAjax=null},getIeVersion:function(){var _navigator=navigator,nVersion=-1,sPattern="Microsoft Internet Explorer"===_navigator.appName?"MSIE ([0-9]{1,}[.0-9]{0,})":"Trident/.*rv:([0-9]{1,}[.0-9]{0,})";return null!=new RegExp(sPattern).exec(_navigator.userAgent)&&(nVersion=parseFloat(RegExp.$1)),nVersion}}});var ClipEndInfo=jindo.$Class({_htEnv:null,_welClipInfoArea:null,_nClipInfoHeight:null,_nInLinkHeight:null,_bIsClipInfoOpen:null,$init:function(htEnv){this._htEnv=htEnv,this.init()},init:function(){this._assignVar()},_assignVar:function(){this._welClipInfoArea=jindo.$Element("clipInfoArea"),this._welClipPPLArea=jindo.$Element("clipPPLArea"),this._welClipPPLIframe=jindo.$Element("spAd"),this._initInLinkHeight(),this._welClipPPLArea&&this._welClipPPLIframe&&(this._pplDisplayHandler&&this._welClipPPLIframe.detach("load",this._pplDisplayHandler),this._pplDisplayHandler=jindo.$Fn(this._initPPLDisplay,this).bind(),this._welClipPPLIframe.attach("load",this._pplDisplayHandler),this._welClipPPLIframe.attr("src",this._welClipPPLIframe.data("src")))},_initInLinkHeight:function(){var welInLink=this._welClipInfoArea.query("._inLink");welInLink&&this.setInLinkHeight(welInLink.height())},_initPPLDisplay:function(){var iframeEl=this._welClipPPLIframe&&this._welClipPPLIframe.$value();if(iframeEl){try{var content=iframeEl.contentWindow&&iframeEl.contentWindow.document&&iframeEl.contentWindow.document.body||iframeEl.contentDocument&&iframeEl.contentDocument.body;this._welClipPPLArea.css("visibility","hidden"),this._welClipPPLArea.show(),!content||content.scrollHeight<=0?this._welClipPPLArea.hide():this._welClipPPLArea.css("visibility","")}catch(e){this._welClipPPLArea.hide()}tvcast.pc.ClipEnd&&tvcast.pc.ClipEnd.getClipEndPlaylist()&&tvcast.pc.ClipEnd.getClipEndPlaylist().resetScrollBox()}},showClipInfo:function(welClipInfoButton){var welInfoBox=this._welClipInfoArea.query("._infoBox");this._welClipInfoArea.toggleClass("open",""),this.setIsClipInfoOpen(this._welClipInfoArea.hasClass("open")),this._bIsClipInfoOpen&&this.setClipInfoHeight(welInfoBox.height()),this.toggleButtonTitle(welClipInfoButton)},toggleButtonTitle:function(welClipInfoButton){var sTitle=this._bIsClipInfoOpen?"접기":"펼침";welClipInfoButton&&(welClipInfoButton.attr("title",sTitle),welClipInfoButton.query(".blind").text(sTitle))},sendClickCode:function(fClickcr,elSource,oEvent){this._bIsClipInfoOpen?fClickcr(elSource,"inf.open","","",oEvent):fClickcr(elSource,"inf.close","","",oEvent)},setClipInfoHeight:function(nHeight){this._nClipInfoHeight=nHeight},getClipInfoHeight:function(){return this._welClipInfoArea.query("._infoBox").height()},setInLinkHeight:function(nHeight){this._nInLinkHeight=nHeight},getInLinkHeight:function(){return this._nInLinkHeight},setIsClipInfoOpen:function(bIsClipInfoOpen){this._bIsClipInfoOpen=bIsClipInfoOpen},getIsClipInfoOpen:function(){return this._bIsClipInfoOpen}});tvcast.pc.ClipEndSocialPlugin=jindo.$Class({$static:{_htEnv:null,_welShareButton:null,_aSharePlayerTag:null,_oClipBoard:null,_IFRAME_AJAX_URL:"/api/clipShareHtml",_OBJECT_AJAX_URL:"/api/clipShareObjectTag",_CLIPBOARD_SWF_URL:"/resources/swf/clipboard.swf",init:function(htEnv,welSource){void 0===window.__splugin&&(this._htEnv=htEnv,this._welShareButton=welSource,this._initSharePlayer())},_initSharePlayer:function(){var sUrl=this._IFRAME_AJAX_URL,wfLoadHandler=jindo.$Fn(this._sharePlayerLoadHandler,this).bind(),oData={videoId:this._htEnv.sVideoId,autoPlay:!0};tvcast.pc.Util.ajax(sUrl,wfLoadHandler,oData)},_sharePlayerLoadHandler:function(res){this._aSharePlayerTag=res.json(),this._initSocialPlugin()},_initSocialPlugin:function(){this._setSocialPluginContents();var htOption=this._htEnv;htOption.wfClickHandler=jindo.$Fn(this._socialPluginClickHandler,this).bind(),htOption.wfShowHandler=jindo.$Fn(this._socialPluginShowHandler,this).bind(),htOption.wfHideHandler=jindo.$Fn(this._socialPluginHideHandler,this).bind(),htOption.bFireEvent=!0,tvcast.pc.SocialPlugin.init(htOption)},_socialPluginClickHandler:function(target){(new Image).src="/api/open/log/share/"+this._htEnv.nClipNo+"?target="+target},_setSocialPluginContents:function(){var sExtraHtml=jindo.$Template("extraSocialPluginTpl").process({sharePlayerTag:this._aSharePlayerTag[0]}),bIsNeedEncode=10<=tvcast.pc.Util.getIeVersion(),sBlogSharePlayerTag=bIsNeedEncode?encodeURIComponent(this._aSharePlayerTag[0]):this._aSharePlayerTag[0],sCafeSharePlayerTag=bIsNeedEncode?encodeURIComponent(this._aSharePlayerTag[1]):this._aSharePlayerTag[1];this._welShareButton.attr("data-extra-html",sExtraHtml),this._welShareButton.attr("data-blog-source-contents",sBlogSharePlayerTag),this._welShareButton.attr("data-cafe-source-contents",sCafeSharePlayerTag)},_socialPluginShowHandler:function(){this._initClipboard(),this._initEvent(),tvcast.pc.Util.sendClickCode(this._welShareButton.$value(),"inf.sopen",null)},_socialPluginHideHandler:function(){tvcast.pc.Util.sendClickCode(this._welShareButton.$value(),"inf.sclose",null)},_initClipboard:function(){function fnSuccess(el,event){alert("HTML 소스가 복사되었습니다.\n붙여넣기 할 곳으로 이동하여 (Ctrl+v) 하세요."),tvcast.pc.Util.sendClickCode(el,"inf.codecopy","","",event&&event)}function fnFailur(){alert("클립보드에 저장하지 못했습니다!")}var agentNavigator=jindo.$Agent().navigator(),welButton=jindo.$Element("sharePlayerTagCopyButton");if(agentNavigator.ie&&agentNavigator.version<=8){var sData=this._aSharePlayerTag[0];this._oClipBoard=new jindo.Clipboard(this._CLIPBOARD_SWF_URL).attach({load:function(){this.setData(welButton,sData)},copy:function(oEvent){"clipShareHtml"===jindo.$Element(oEvent.element).data("type")&&fnSuccess(oEvent.element,oEvent)},failure:function(){fnFailur()}})}else this._oClipBoardTp=new Clipboard(welButton.$value()),this._oClipBoardTp.on("success",function(e){fnSuccess(e.trigger),e.clearSelection()}),this._oClipBoardTp.on("error",function(e){fnFailur()})},_initEvent:function(){jindo.$Element("sharePlayer").attach("click@._click",jindo.$Fn(this._clickHandler,this).bind());var bookmark=jindo.$Element(window).query("._spi_bookmark");null!=bookmark&&bookmark.attach("click",jindo.$Fn(function(){this._socialPluginClickHandler("bookmark")},this).bind())},_clickHandler:function(oEvent){var elSource=oEvent.element,welSource=jindo.$Element(elSource),sEventName=welSource.data("event");"showPlayerSizeSelectBox"===sEventName&&this._showPlayerSizeSelectBox(),"setPlayerSize"===sEventName&&this._setPlayerSize(welSource,oEvent),"setAutoPlay"===sEventName?this._setAutoPlay(elSource,oEvent):"helpLink"==sEventName&&window.open(welSource.attr("href"),"helpLink"),jindo.$Event(oEvent).stop()},_showPlayerSizeSelectBox:function(){var welSelectBox=jindo.$Element("resolution");welSelectBox&&welSelectBox.toggleClass("open")},_setPlayerSize:function(welElement,oEvent){var welCurrentPlayerSize=welElement.parent(),sText=welElement.html(),nWidth=1*welElement.data("width");this._setPlayerSizeList(welCurrentPlayerSize),this._setPlayerSizeSelectBox(sText,nWidth),this._resetSharePlayerTag(),this._showPlayerSizeSelectBox(),this._sendPlayerSizeClickCode(nWidth,welElement,oEvent)},_setPlayerSizeList:function(welCurrentPlayerSize){jindo.$ElementList("._playerSizeList li").removeClass("on"),welCurrentPlayerSize.addClass("on")},_setPlayerSizeSelectBox:function(sText,nWidth){var welPlayerSizeSelectBox=jindo.$Element("playerSizeSelectBox");welPlayerSizeSelectBox.html(sText),welPlayerSizeSelectBox.data("width",nWidth)},_resetSharePlayerTag:function(){var sUrl=this._IFRAME_AJAX_URL,wfLoadHandler=jindo.$Fn(this._resetSharePlayerTagLoadEventHandler,this).bind(),oData=this._getClipShareOption();tvcast.pc.Util.ajax(sUrl,wfLoadHandler,oData,!1)},_resetSharePlayerTagLoadEventHandler:function(res){var sSharePlayerTag=res.json()[0];jindo.$Element("sharePlayerTagInput").attr("value",sSharePlayerTag),this._oClipBoard?this._oClipBoard.setData(jindo.$Element("sharePlayerTagCopyButton"),sSharePlayerTag):this._oClipBoardTp&&jindo.$Element("sharePlayerTagCopyButton").attr("data-clipboard-text",sSharePlayerTag)},_getClipShareOption:function(){return{videoId:this._htEnv.sVideoId,width:jindo.$Element("playerSizeSelectBox").data("width"),autoPlay:jindo.$Element("sharePlayerAutoPlay").hasClass("chk_on")}},_sendPlayerSizeClickCode:function(nWidth,welElement,oEvent){var sClickCode;544===nWidth&&(sClickCode="inf.sizea"),740===nWidth&&(sClickCode="inf.sizeb"),936===nWidth&&(sClickCode="inf.sizec"),1280===nWidth&&(sClickCode="inf.sized"),tvcast.pc.Util.sendClickCode(welElement.$value(),sClickCode,oEvent)},_setAutoPlay:function(elSource,oEvent){var welSharePlayerAutoPlay=jindo.$Element("sharePlayerAutoPlay");welSharePlayerAutoPlay.toggleClass("chk_on");var sClickCode=welSharePlayerAutoPlay.hasClass("chk_on")?"inf.autoplay":"inf.autoplayoff";tvcast.pc.Util.sendClickCode(elSource,sClickCode,oEvent),this._resetSharePlayerTag()},_isIframeTag:function(){return!jindo.$Element("objectTagCheckbox").hasClass("chk_on")}}});var ClipEndPlaylist=jindo.$Class({_htEnv:null,_htScrollBoxOption:null,_welPlaylistArea:null,_welPlayer:null,_welExpandChannelInfo:null,_nClipTitleHeight:null,_oPlaylistClipScrollBox:null,_oPlaylistGroupScrollBox:null,_oRollingPlaylist:null,_ClipEndInfo:null,_WideMode:null,_PlaybackOrderController:null,_PLAYLIST_CLIP_WIDE_WIDTH:332,_PLAYLIST_CLIP_NORMAL_WIDTH:314,_PLAYLIST_GROUP_WIDE_WIDTH:332,_PLAYLIST_GROUP_NORMAL_WIDTH:314,_CHANNEL_INFO_HEIGHT:57,_PLAYLIST_TITLE_HEIGHT:46,_PLAYLIST_GROUP_MARGIN_TOP_HEIGHT:0,_PLAYLIST_MARGIN_BOTTOM_HEIGHT:22,_PLAYLIST_CLIP_HEIGHT:83,_PLAYLIST_CLIP_PER_PAGE:3,$init:function(htEnv,ClipEndInfo,WideMode){this._htEnv=htEnv,this._htScrollBoxOption={sClassPrefix:"scrollbar-",bAdjustThumbSize:!0,sOverflowX:"hidden",sOverflowY:"auto",nDelta:50},this._ClipEndInfo=ClipEndInfo,this._WideMode=WideMode,this._playlistGroupSortType="true",this.commonInit()},commonInit:function(htEnv){this._assignVar(),this._initItemCnt(),this._initPlaylistClipScrollBox(),this._initRollingPlaylist(),this._eventBind(),this._PlaybackOrderController=new PlaybackOrderController(this._htEnv.nPlaylistNo,this._htEnv.sCurrentClipUrl,this._htEnv.sNextClipUrl)},_assignVar:function(){this._welPlaylistArea=jindo.$Element("playlistArea"),this._welExpandChannelInfo=jindo.$Element("expandChannelInfo"),this._welPlayer=jindo.$Element(jindo.$$.getSingle("._player")),this._nClipTitleHeight=jindo.$Element(jindo.$$.getSingle("._clipTitle")).height(),this._playlistGroupSort=jindo.$Element("playlistGroupSort")},_initItemCnt:function(){1725<=this._WideMode.getCurrentWidth()?this.setRollingItemPerPage(6):this.setRollingItemPerPage(5)},_initPlaylistClipScrollBox:function(){var welPlaylistClipScrollBox=jindo.$Element("playlistClipScrollBox");welPlaylistClipScrollBox&&(this._oPlaylistClipScrollBox=new jindo.ScrollBox(welPlaylistClipScrollBox,this._htScrollBoxOption),this._showScrollBar(this._oPlaylistClipScrollBox)),this.resetScrollBox()},_eventBind:function(){var childList=this._playlistGroupSort.child(),toggleLayer=childList[1]||null,toggleBtn=childList[0]||null;toggleLayer&&(this._bodyClickEvt=jindo.$Fn(this._onBodyClick,this).bind(toggleLayer,toggleBtn),jindo.$Element(document.body).attach("click",this._bodyClickEvt))},_onBodyClick:function(toggleLayer,toggleBtn,e){var target=jindo.$Element(e.srcElement);target.hasOwnProperty("data")&&"btn"!=target.data("type")&&toggleLayer.visible()&&(toggleLayer.hide(),toggleBtn.removeClass("on"))},_getPlaylistGroup:function(page,order){var sUrl="/api/html/playlists/"+this._htEnv.sChannelId,htData={page:page||1,byRecent:void 0===order?this._playlistGroupSortType:order};this._wfLoadHandler||(this._wfLoadHandler=jindo.$Fn(this._loadPlaylistGroupHandler,this).bind()),new jindo.$Ajax(sUrl,{type:"xhr",method:"get",onload:this._wfLoadHandler}).request(htData)},_loadPlaylistGroupHandler:function(res){this._attachPlaylistGroupHtml(res),this._initPlaylistGroupScrollBox(),this.resetScrollBox()},_attachPlaylistGroupHtml:function(res){var sHtml=jindo.$S(res.text()).trim().$value();jindo.$Element("playlistGroupScrollBox").query("._append_content").html(sHtml)},_initPlaylistGroupScrollBox:function(){var welPlaylistGroupScrollBox=jindo.$Element("playlistGroupScrollBox");welPlaylistGroupScrollBox&&!this._oPlaylistGroupScrollBox&&(this._oPlaylistGroupScrollBox=new jindo.ScrollBox(welPlaylistGroupScrollBox,this._htScrollBoxOption),this._playlistGroupSort.attach("click",jindo.$Fn(this._onPlaylistGroupSort,this).bind()),welPlaylistGroupScrollBox.attach("click",jindo.$Fn(this._onPageNavigation,this).bind()))},_onPlaylistGroupSort:function(e){var target=jindo.$Element(e.srcElement),childList=this._playlistGroupSort.child(),toggleLayer=childList[1],toggleBtn=childList[0],type=target.data("type");switch(type){case"btn":e.stopDefault(),toggleBtn.toggleClass("on"),toggleLayer[target.hasClass("on")?"show":"hide"]();break;case"latest":case"date":e.stopDefault(),this._playlistGroupSortType="latest"==type?"true":"false",toggleLayer.hide(),toggleBtn.removeClass("on"),jindo.$ElementList("li",toggleLayer).removeClass("on"),target.parent().addClass("on"),toggleBtn.html(target.text()+'<em class="ic"></em>'),this._getPlaylistGroup()}},_onPageNavigation:function(e){var target,act=(target="span"==(target=jindo.$Element(e.srcElement)).tag?target.parent():target).data("act"),page=target.data("page");switch(act){case"next":case"prev":case"num":this._getPlaylistGroup(page)}},_showScrollBar:function(oScrollBox){var welScrollBar=jindo.$Element(oScrollBox.getScrollBarVertical().elScrollBar);oScrollBox.isNeededScrollBarVertical()?(oScrollBox.activate(),welScrollBar.css("visibility","visible")):(oScrollBox.deactivate(),welScrollBar.css("visibility","hidden"))},showPlaylistGroup:function(welElement){this.showPlaylistGroupButton(welElement),this.showPlaylistGroupArea(),this._oPlaylistGroupScrollBox?this.resetScrollBox():this._getPlaylistGroup()},showPlaylistGroupButton:function(welElement){welElement.toggleClass("open");var toggleTxt="회차목록보기";welElement.hasClass("open")&&(toggleTxt="회차목록닫기"),welElement.attr("title",toggleTxt),welElement.html(toggleTxt)},showPlaylistGroupArea:function(){this._welPlaylistArea.query("._playlistGroupArea").toggle(),this._PlaybackOrderController.hideTooltip()},sendPlaylistGroupClickCode:function(fClickcr,welSource,oEvent){welSource.hasClass("open")?fClickcr(welSource.$value(),"plt.listopen","","",oEvent):fClickcr(welSource.$value(),"plt.listclose","","",oEvent)},setPlaylistClip:function(welElement){var nPlaylistNo=welElement.data("playlistno");nPlaylistNo&&this._loadPlaylistClip(nPlaylistNo)},_loadPlaylistClip:function(nPlaylistNo){var htData={clipNo:this._htEnv.nClipNo,playlistNo:nPlaylistNo},wfLoadHandler=jindo.$Fn(this._loadPlaylistClipHandler,this).bind();new jindo.$Ajax("/fragment/clipEnd/playlistClip",{type:"xhr",method:"get",onload:wfLoadHandler}).request(htData)},_loadPlaylistClipHandler:function(res){var welShowPlaylistGroupButton=this._welPlaylistArea.query("._showPlaylistGroupButton");this.showPlaylistGroup(welShowPlaylistGroupButton),this._setPlaylistClipHtml(res),this._setPlaylistInfoHtml(),this._resetScrollBox(this._oPlaylistClipScrollBox)},_setPlaylistClipHtml:function(res){var sHtml=jindo.$S(res.text()).trim().$value();jindo.$Element("playlistClip").html(sHtml)},_setPlaylistInfoHtml:function(){var welPlaylistInfo=jindo.$Element("playlistInfo");if(welPlaylistInfo){var sPlaylistTitle=welPlaylistInfo.data("title"),nPlaylistClipCount=welPlaylistInfo.data("count"),welPlaylistTitle=jindo.$Element(jindo.$$.getSingle("._playlistTitle"));welPlaylistTitle.html(sPlaylistTitle),welPlaylistTitle.attr("title",sPlaylistTitle+" ("+nPlaylistClipCount+")")}},_resetScrollBox:function(oScrollBox){oScrollBox.reset(),this._showScrollBar(oScrollBox)},_initRollingPlaylist:function(){var welRollingPlaylist=jindo.$Element("rollingPlaylist"),RollingPlaylistUl=jindo.$Element("rollingPlaylist").query("ul"),rollingPlaylists=welRollingPlaylist.queryAll("ul > li");if(!(rollingPlaylists.length<6)&&(welRollingPlaylist&&(this._oRollingPlaylist||(this._oRollingPlaylist=new jindo.CircularRolling(welRollingPlaylist,{nDuration:300,sDirection:"horizontal",fEffect:jindo.Effect.easeOut})),this.moveRollingPlaylistTo(window.continuousPlayList.playIndex)),(rollingPlaylists=welRollingPlaylist.queryAll("ul > li")).length)){var firstEl=rollingPlaylists[0];RollingPlaylistUl.width((parseInt(firstEl.width(),10)+parseInt(firstEl.css("marginRight"),10))*(2*rollingPlaylists.length)+300)}},_scrollToCurrentClip:function(){var awelPlaylistClipList=jindo.$Element("playlistClip").child(),nPage=this._countCurrentPlaylistClipPage(awelPlaylistClipList),nScrollHeight=this._PLAYLIST_CLIP_HEIGHT*this._PLAYLIST_CLIP_PER_PAGE*nPage;this._oPlaylistClipScrollBox.setScrollTopBy(nScrollHeight)},_countCurrentPlaylistClipPage:function(awelPlaylistClipList){for(var nCurrentIndex=0,i=0;i<awelPlaylistClipList.length;i++)if(awelPlaylistClipList[i].hasClass("on")){nCurrentIndex=i;break}return Math.floor(nCurrentIndex/this._PLAYLIST_CLIP_PER_PAGE)},moveRollingPlaylistBy:function(bIsLeft){this._oRollingPlaylist&&(bIsLeft?this._oRollingPlaylist.moveBy(-1*this._rollingItemCnt):this._oRollingPlaylist.moveBy(1*this._rollingItemCnt))},moveRollingPlaylistTo:function(nIndex){this._oRollingPlaylist&&(void 0===nIndex&&(nIndex=this._rollingIndex),this._oRollingPlaylist.option("nDuration",0),this._oRollingPlaylist.moveTo(this._rollingItemCnt*parseInt(nIndex/this._rollingItemCnt,10)),this._oRollingPlaylist.option("nDuration",300))},resetScrollBox:function(){this._oPlaylistGroupScrollBox&&(this.setPlaylistGroupScrollBoxSize(),this.showScrollBar(this._oPlaylistGroupScrollBox)),this._oPlaylistClipScrollBox&&(this.setPlaylistClipScrollBoxSize(),this.showScrollBar(this._oPlaylistClipScrollBox),this._scrollToCurrentClip())},setPlaylistGroupScrollBoxSize:function(){var nWidth=0;nWidth=this._WideMode.getIsWideMode()?this._PLAYLIST_GROUP_WIDE_WIDTH:this._PLAYLIST_GROUP_NORMAL_WIDTH;var nHeight=this._welPlayer.height()-this._CHANNEL_INFO_HEIGHT-this._PLAYLIST_TITLE_HEIGHT-this._PLAYLIST_MARGIN_BOTTOM_HEIGHT;this._oPlaylistGroupScrollBox.setSize(nWidth,nHeight)},setPlaylistClipScrollBoxSize:function(){var nWidth=0;nWidth=this._WideMode.getIsWideMode()?this._PLAYLIST_CLIP_WIDE_WIDTH:this._PLAYLIST_CLIP_NORMAL_WIDTH;var nHeight=this._welPlayer.height()-this._CHANNEL_INFO_HEIGHT-this._PLAYLIST_TITLE_HEIGHT-this._PLAYLIST_MARGIN_BOTTOM_HEIGHT;this._oPlaylistClipScrollBox.setSize(nWidth,nHeight)},showScrollBar:function(oScrollBox){var welScrollBar=jindo.$Element(oScrollBox.getScrollBarVertical().elScrollBar);oScrollBox.isNeededScrollBarVertical()?(oScrollBox.activate(),welScrollBar.css("visibility","visible")):(oScrollBox.deactivate(),welScrollBar.css("visibility","hidden"))},getPlaybackOrderController:function(){return this._PlaybackOrderController},setRollingItemPerPage:function(cnt){this._rollingItemCnt=cnt||5},setRollingItemIndex:function(nIndex){this._rollingIndex=nIndex||0},destroy:function(){this._oPlaylistClipScrollBox.deactivate(),this._oRollingPlaylist=null,this._wfLoadHandler=null,this._oPlaylistGroupScrollBox=null,jindo.$Element(document.body).detach("click",this._bodyClickEvt),this._PlaybackOrderController.destroy()}}),PlaybackOrderController=jindo.$Class({$autoBind:!0,TYPE:{REPEAT_PLAYLIST:{sCssClass:"repeat_playlist",sCookie:"",sClickCode:"plt.repeat",sTitle:"연속재생"},REPEAT_CLIP:{sCssClass:"repeat_clip",sCookie:"clip",sClickCode:"plt.repeat1",sTitle:"1개반복"},DEFAULT:{sCssClass:"default",sCookie:"defalut",sClickCode:"plt.repeatoff",sTitle:"연속재생"}},ORDER_COOKIE_KEY:"NTC_ContPL",ORDER_EXPIRE_DAY:7,TOOLTIP_COOKIE_KEY:"NTC_CPT",TOOLTIP_SHOW_TIME:1e4,PLAY_COUNT_COOKIE_KEY:"NTC_CPC",PLAY_COUNT_ZERO:"0",PLAY_COUNT_ONE:"1",nPlaylistNo:null,sCurrentClipUrl:null,sNextClipUrl:null,oCurrentType:null,awelButton:null,awelTooltip:null,$init:function(nPlaylistNo,sCurrentClipUrl,sNextClipUrl){this.nPlaylistNo=nPlaylistNo,this.sCurrentClipUrl=sCurrentClipUrl,this.sNextClipUrl=sNextClipUrl,this.oCurrentType=this.getCurrentType(),this.awelButton=jindo.$ElementList("._playbackOrderBtn"),this.awelTooltip=jindo.$ElementList("._playbackOrderTooltip"),this.toggleButton(),this.toggleTooltip(),this.setPlayCountCookie(),this.initEvent()},getCurrentType:function(){var sCookie=this.getCookie(this.ORDER_COOKIE_KEY);return this.nPlaylistNo?sCookie?sCookie===this.TYPE.REPEAT_CLIP.sCookie?this.TYPE.REPEAT_CLIP:this.TYPE.DEFAULT:this.TYPE.REPEAT_PLAYLIST:this.TYPE.DEFAULT},isRepeat:function(){var currentType=this.getCurrentType();return currentType===this.TYPE.REPEAT_PLAYLIST||currentType===this.TYPE.REPEAT_CLIP},toggleButton:function(){this.awelButton.removeClass(this.TYPE.REPEAT_PLAYLIST.sCssClass),this.awelButton.removeClass(this.TYPE.REPEAT_CLIP.sCssClass),this.awelButton.removeClass(this.TYPE.DEFAULT.sCssClass),this.awelButton.addClass(this.oCurrentType.sCssClass),this.awelButton.attr("title",this.oCurrentType.sTitle+("default"==this.oCurrentType.sCssClass?"꺼짐":"켬")),this.awelButton.html('<em class="ic"></em>'+this.oCurrentType.sTitle)},toggleTooltip:function(){this.oCurrentType===this.TYPE.DEFAULT?this.awelTooltip.hide():this.isShowTooltip()?this.showTooltip():this.hideTooltip()},isShowTooltip:function(){return!this.getCookie(this.TOOLTIP_COOKIE_KEY)},showTooltip:function(){this.awelTooltip.show(),setTimeout(jindo.$Fn(this.hideTooltip,this).bind(),this.TOOLTIP_SHOW_TIME)},hideTooltip:function(){this.awelTooltip.hide()},setPlayCountCookie:function(){this.oCurrentType!==this.TYPE.DEFAULT&&(this.isMoveToAnotherClip()?this.initPlayCountCookie():this.increasePlayCountCookie())},isMoveToAnotherClip:function(){return-1===location.href.indexOf("/list/")},initEvent:function(){jindo.$Element(document).attach("click@._click",this._clickHandler)},_clickHandler:function(oEvent){var elSource=oEvent.element,sEventName=jindo.$Element(elSource).data("event");"changePlaybackOrder"===sEventName&&(this.setNextOrder(),this.toggleButton(),this.toggleTooltip(),this.sendClickCode(elSource,this.oCurrentType.sClickCode,oEvent)),"closeTooltip"===sEventName&&(this.setCookie(this.TOOLTIP_COOKIE_KEY,"OFF",7),this.toggleTooltip(),this.sendClickCode(elSource,"plt.infoclose",oEvent)),"moveAnotherClipByUser"===sEventName&&(this.removeCookie("AUTOCNT"),this.removeCookie(this.PLAY_COUNT_COOKIE_KEY),this.sendClickCode(elSource,"plt.list",oEvent))},setNextOrder:function(){switch(this.getCookie(this.ORDER_COOKIE_KEY)&&this.removeCookie(this.ORDER_COOKIE_KEY),this.oCurrentType){case this.TYPE.REPEAT_PLAYLIST:this.oCurrentType=this.TYPE.REPEAT_CLIP;break;case this.TYPE.REPEAT_CLIP:this.oCurrentType=this.TYPE.DEFAULT;break;case this.TYPE.DEFAULT:this.oCurrentType=this.TYPE.REPEAT_PLAYLIST}this.setCookie(this.ORDER_COOKIE_KEY,this.oCurrentType.sCookie,this.ORDER_EXPIRE_DAY)},movePage:function(){switch(this.oCurrentType){case this.TYPE.REPEAT_PLAYLIST:this.moveNextPage();break;case this.TYPE.REPEAT_CLIP:this.moveCurrentPage()}},moveNextPage:function(){this.sendClickCode(this,"plt.move",this.nPlaylistNo,"",window.event),this.cnt=parseInt(this.getCookie("AUTOCNT")||0,10)+1,this.setCookie("AUTOCNT",this.cnt,0),this.setCookie("ISAUTO","TRUE",0),"undefined"!=typeof WrapPlayer?WrapPlayer.moveNextClip():document.location=this.sNextClipUrl},moveCurrentPage:function(){this.cnt=parseInt(this.getCookie("AUTOCNT")||0,10)+1,this.setCookie("AUTOCNT",this.cnt,0),this.setCookie("ISAUTO","TRUE",0),tvcast.pc.ClipEnd&&"undefined"!=typeof WrapPlayer?tvcast.pc.ClipEnd.moveCurrentClip():document.location=this.sCurrentClipUrl},getCookie:function(sKey){return jindo.$Cookie().get(sKey)},removeCookie:function(sKey){return jindo.$Cookie().remove(sKey)},setCookie:function(sKey,sValue,nExpireDay){jindo.$Cookie().set(sKey,sValue,nExpireDay)},sendClickCode:function(elSource,sClickCode,oEvent){try{window.clickcr(elSource,sClickCode,"","",oEvent,1)}catch(e){}},initPlayCountCookie:function(){this.setCookie(this.PLAY_COUNT_COOKIE_KEY,this.PLAY_COUNT_ONE,1)},increasePlayCountCookie:function(){var sPlayCount=this.getCookie(this.PLAY_COUNT_COOKIE_KEY)||this.PLAY_COUNT_ZERO,nPlayCount=Number(sPlayCount)+1;this.setCookie(this.PLAY_COUNT_COOKIE_KEY,String(nPlayCount),1)},destroy:function(){jindo.$Element(document).detach("click@._click",this._clickHandler)}}),ClipEndExpand=jindo.$Class({_ImageUtil:null,_cookie:null,_sExpandCookieKey:null,_ClipEndPlaylist:null,_htEnv:null,$init:function(htEnv,ClipEndPlaylist){this._ImageUtil=ImageUtil,this._cookie=jindo.$Cookie(),this._sExpandCookieKey="NTC_Expand",this._ClipEndPlaylist=ClipEndPlaylist,this._htEnv=htEnv},_setExpandAreaSize:function(){var RollingPlaylistUl=jindo.$Element("rollingPlaylist").query("ul"),rollingPlaylists=RollingPlaylistUl.queryAll("> li");if(rollingPlaylists.length){var firstEl=rollingPlaylists[0];RollingPlaylistUl.width((parseInt(firstEl.width(),10)+parseInt(firstEl.css("marginRight"),10))*rollingPlaylists.length+300)}},setExpand:function(bIsExpand){var welBody=jindo.$Element(document.body),welChannelInfo=jindo.$Element("channelInfo"),welExpandChannelInfo=jindo.$Element("expandChannelInfo"),welTopChannelInfo=jindo.$Element("topChannelInfo");if(this._ImageUtil.setImgSrc(welExpandChannelInfo),bIsExpand){welBody.addClass("end_cinema"),welChannelInfo.hide(),welExpandChannelInfo.show(),this._setExpandAreaSize(),this._ClipEndPlaylist.moveRollingPlaylistTo(),welTopChannelInfo.hide(),this.setCookie();try{tvcast.pc.Gnb.toggleMenu(!1)}catch(e){}this.toggleTopAd(!1)}else{welBody.removeClass("end_cinema"),welChannelInfo.show(),welExpandChannelInfo.hide(),welTopChannelInfo.show(),this.removeCookie(),this._ClipEndPlaylist.resetScrollBox();try{tvcast.pc.Gnb.respondMenu()}catch(e){}this.toggleTopAd(!0)}},setCookie:function(){this._cookie.set(this._sExpandCookieKey,"ON",7)},getCookie:function(){return this._cookie.get(this._sExpandCookieKey)},removeCookie:function(){this.getCookie()&&this._cookie.remove(this._sExpandCookieKey)},toggleTopAd:function(bIsShow){if(this._htEnv.bSpecialDA){var welDaTop=jindo.$Element("da_top");bIsShow?welDaTop.show():welDaTop.hide()}}});tvcast.VisibilityTracker=function(){var oTrackingElements={},_visibles=[],_trackingIntervalId=null;function _initVisibilityTracking(oParams){var sClassName=oParams.sClassName,fnInit=oParams.fnInit,nDelay=oParams.nDelay,nInterval=oParams.nInterval||1,fnImpression=oParams.fnImpression,fnStateChange=oParams.fnStateChange,fVisibilityPortion=oParams.fVisibilityPortion||.5;oTrackingElements[sClassName]._nDelay=nDelay,oTrackingElements[sClassName]._nInterval=nInterval,oTrackingElements[sClassName]._fnImpression=fnImpression,oTrackingElements[sClassName]._fnStateChange=fnStateChange,oTrackingElements[sClassName]._fVisibilityPortion=fVisibilityPortion,$Element($Document().query("body")).queryAll("."+sClassName).forEach(function(e,index,array){var trackingId=_getData($Element(e),"visibility-tracking");null===trackingId&&(function(e,key,value){$Element(e).data(key,value)}(e,"visibility-tracking",trackingId=function(index){return""+index+(localDate=new Date,localDate.getTime()+6e4*localDate.getTimezoneOffset()+324e5)+Math.floor(1e4*Math.random());var localDate}(index)),_initVisibilityTrackingElement(sClassName,trackingId,e),fnInit&&fnInit(e,index,array,trackingId,oTrackingElements[sClassName]))})}function _initVisibilityTrackingElement(sClassName,trackingId,e){var oTarget=oTrackingElements[sClassName][trackingId];null==oTarget&&((oTarget={}).e=e,oTarget.elapsed=-1),oTrackingElements[sClassName][trackingId]=oTarget}function _initGlobalTrackingEvent(nInterval){null!==_trackingIntervalId&&clearInterval(_trackingIntervalId),_trackingIntervalId=setInterval(jindo.$Fn(function(evt){if(null!==oTrackingElements&&null!==_visibles){for(var i=0;i<_visibles.length;i++)_visibles[i].check();var bStateChanged=!1;for(var sClassName in oTrackingElements){var oTrackingElement=oTrackingElements[sClassName];if(null!=oTrackingElement){var nDelay=oTrackingElement._nDelay,fnStateChange=oTrackingElement._fnStateChange,fVisibilityPortion=oTrackingElement._fVisibilityPortion;for(var trackingId in oTrackingElement){var vEl=oTrackingElement[trackingId];null!=vEl&&(vEl._visible&&(_getExposuredAreaPortion(vEl.e)>fVisibilityPortion?vEl._impression?(vEl.elapsed<0&&(vEl.elapsed=0),vEl.elapsed+=nInterval/1e3,bStateChanged=!0):function(oTargetElement){var t=setTimeout(function(){oTargetElement._impression=!0,clearTimeout(t)},nDelay)}(vEl):vEl._impression=!1))}bStateChanged&&fnStateChange&&fnStateChange(_getVisibilityTrackingResult(sClassName))}}}},this).bind(),nInterval)}function _addVisibilityTrackingEvent(oParams){var sClassName=oParams.sClassName,fnVisible=oParams.fnVisible,fnInvisible=oParams.fnInvisible,visible=function(sClassName){var visible=null;jindo.Visible?visible=new jindo.Visible(document,{sClassName:sClassName}):jindo.m.Visible&&(visible=new jindo.m.Visible(document,{sClassName:sClassName}));return visible}(sClassName);null!==visible&&(_visibles.push(visible),visible.attach({visible:function(e){var trackingId=_getData(e.elTarget,"visibility-tracking");if(null!==trackingId){_initVisibilityTrackingElement(oParams.sClassName,trackingId,e.elTarget);var oTrackingElement=oTrackingElements[sClassName][trackingId];oTrackingElement._visible=!0,oTrackingElement._impression=!1}fnVisible&&fnVisible(e)},invisible:function(e){var trackingId=_getData(e.elTarget,"visibility-tracking");null!==trackingId&&oTrackingElements&&oTrackingElements[sClassName]&&oTrackingElements[sClassName][trackingId]&&(oTrackingElements[sClassName][trackingId]._visible=!1,oTrackingElements[sClassName][trackingId]._impression=!1),fnInvisible&&fnInvisible(e)}}))}function _getExposuredAreaPortion(e){var vEl=$Element(e),documentSize_width=document.body.clientWidth,documentSize_height=document.body.clientHeight,scroll=$Document().scrollPosition(),vElOffset=vEl.offset(),vElWidth=vEl.width(),vElHeight=vEl.height(),viewBoxSize={width:(0<vElOffset.left-scroll.left?0:vElOffset.left-scroll.left)+vElWidth,height:(0<vElOffset.top-scroll.top?0:vElOffset.top-scroll.top)+vElHeight},lastSize_width=vElOffset.left+vElWidth>scroll.left+documentSize_width?vElWidth-(vElOffset.left+vElWidth-(scroll.left+documentSize_width)):viewBoxSize.width,lastSize_height=vElOffset.top+vElHeight>scroll.top+documentSize_height?vElHeight-(vElOffset.top+vElHeight-(scroll.top+documentSize_height)):viewBoxSize.height,exposuredPortion=0;return 0<vElWidth*vElHeight&&(exposuredPortion=lastSize_width*lastSize_height/(vElWidth*vElHeight)),exposuredPortion}function _getData(e,key){return $Element(e).data(key)}function _getVisibilityTrackingResult(sClassName){return oTrackingElements[sClassName]}return{addVisibilityTrackingEvent:function(oParams){if(null!==oParams){var sClassName=oParams.sClassName;sClassName&&(oTrackingElements[sClassName]={},_initGlobalTrackingEvent(oParams.nInterval),_initVisibilityTracking(oParams),_addVisibilityTrackingEvent(oParams))}},getVisibilityTrackingResult:function(sClassName){return _getVisibilityTrackingResult(sClassName)},clearAllTracking:function(){oTrackingElements={},_visibles=[]},__print:function(){console.log(oTrackingElements)}}}(),tvcast.RecommendVisibilityLogger=function(){var STORAGE_ID="tvcast.RecommendVisibilityLogger",_apiDomain="",_isFirstSent=!0;function _callAjax(visibilityLog){if(null!=(log=visibilityLog)&&void 0!==log.aExposureList&&null!==log.aExposureList&&void 0!==log.aElapsedTime&&null!==log.aElapsedTime&&void 0!==log.aTypeList&&null!==log.aTypeList&&0!==log.aExposureList.length&&0!==log.aElapsedTime.length&&0!==log.aTypeList.length&&log.aExposureList.length===log.aElapsedTime.length&&log.aExposureList.length===log.aTypeList.length&&void 0!==log.area&&void 0!==log.clipNo&&void 0!==log.device&&void 0!==log.page&&void 0!==log.timestamp){var log,ajaxUrl=_apiDomain+"/api/open/stats/rcvt/"+visibilityLog.clipNo+"/"+visibilityLog.device+"?area="+visibilityLog.area+"&page="+visibilityLog.page+"&exp="+visibilityLog.aExposureList.toString()+"&tl="+visibilityLog.aTypeList.toString()+"&etl="+visibilityLog.aElapsedTime.toString()+"&ts="+visibilityLog.timestamp;$Ajax(ajaxUrl,{type:"jsonp",callbackname:"callback",onload:function(res){},onerror:function(res){}}).request()}}function _saveLog(sClassName,value){if(null!=value){var o=_getLog();o[sClassName]=value;var sValue=$Json(o).toString();window.localStorage.setItem(STORAGE_ID,sValue)}}function _getLog(){var sValue=window.localStorage.getItem(STORAGE_ID);return sValue?$Json(sValue).toObject():{}}function _deleteLog(){window.localStorage.removeItem(STORAGE_ID)}function _sendSavedLog(){var oSavedLogs=_getLog();for(var sClassName in oSavedLogs){var oSavedLog=oSavedLogs[sClassName];for(var timestamp in oSavedLog){var oTarget=oSavedLog[timestamp];oTarget.timestamp=timestamp,1<oTarget.page||_callAjax(oTarget)}}}function _modifyVisibilityStateToSavedForm(oVisibilityState,oOptions){var oState={};if(void 0===oOptions)return oState;var nPage=1;for(var key in oVisibilityState)if(void 0!==oVisibilityState[key]){var e=$Element(oVisibilityState[key].e);if(null!==e){var timestamp=e.data("timestamp"),targetClipNo=e.data("clipno"),elapsed=oVisibilityState[key].elapsed,type=e.data("stats-type");void 0!==timestamp&&void 0!==targetClipNo&&void 0!==elapsed&&(void 0===oState[timestamp]&&(oState[timestamp]={},oState[timestamp].clipNo=oOptions.clipNo,oState[timestamp].device=oOptions.device,oState[timestamp].area=oOptions.area,oState[timestamp].page=nPage,oState[timestamp].aExposureList=[],oState[timestamp].aElapsedTime=[],oState[timestamp].aTypeList=[],nPage++),oState[timestamp].aExposureList&&oState[timestamp].aExposureList.push(targetClipNo),oState[timestamp].aElapsedTime&&oState[timestamp].aElapsedTime.push(elapsed),oState[timestamp].aTypeList&&oState[timestamp].aTypeList.push(type))}}return oState}return{addVisibilityLog:function(oOptions){if(void 0!==oOptions&&(function(oOptions){oOptions&&(_apiDomain=oOptions.apiDomain)}(oOptions),void 0!==window&&void 0!==window.localStorage)){oOptions.device&&("MO"===oOptions.device?(_deleteLog(),tvcast.VisibilityTracker.clearAllTracking()):_isFirstSent&&(_sendSavedLog(),_deleteLog(),_isFirstSent=!1,tvcast.VisibilityTracker.clearAllTracking()));var sClassName=oOptions.sClassName;void 0!==sClassName&&(tvcast.VisibilityTracker.addVisibilityTrackingEvent({sClassName:sClassName,nDelay:1e3,nInterval:2e3,fnStateChange:function(oVisibilityState){var oSaved=_modifyVisibilityStateToSavedForm(oVisibilityState,oOptions);_saveLog(sClassName,oSaved)}}),function(sClassName,oOptions){_saveLog(sClassName,_modifyVisibilityStateToSavedForm(tvcast.VisibilityTracker.getVisibilityTrackingResult(sClassName),oOptions))}(sClassName,oOptions))}},resetDefaultVal:function(){_isFirstSent=!0}}}(),tvcast.RecommendStats=jindo.$Class({_apiDomain:"",_clipNo:"",_device:"",_brandId:"",_targetClipNo:"",_targetIndex:"",_type:{center:{sType:"center",sClass:"_rec_center"},side:{sType:"side",sClass:"_rec_side"},playlist:{sType:"playlist",sClass:"_rec_playlist"}},_dataName:{timestamp:"timestamp",statsType:"stats-type",clipNo:"clipno",clickCode:"click-code"},_isSentImpressionLog:{},_timestamp:"",_welRecommendCenterWrap:null,_welRecommendSideWrap:null,$init:function(htOptions){this._apiDomain=htOptions.apiDomain,this._clipNo=htOptions.clipNo,this._device=htOptions.device,this._brandId=htOptions.brandId,this._timestamp=(new Date).getTime(),this._isSentImpressionLog={center:!1,personal:!1},$Element(window).attach("scroll",$Fn(this.sendImpressionLog,this).bind())},updateTimestamp:function(rts){this._timestamp=rts},_callAjax:function(ajaxUrl){$Ajax(ajaxUrl,{type:"jsonp",callbackname:"callback",onload:function(res){},onerror:function(res){}}).request()},_addClickLog:function(targetClipNo,targetIndex,area,type,timestamp){if(void 0!==area){this._addSession(timestamp);var ajaxUrl=this._apiDomain+"/api/open/stats/rc/"+this._clipNo+"/"+this._device+"/"+targetClipNo+"/"+targetIndex+"?area="+area+"&type="+type+"&timestamp="+timestamp+"&brandId="+this._brandId;(new Image).src=ajaxUrl}},_addSession:function(timestamp){void 0!==window.Storage&&void 0!==window.sessionStorage&&window.sessionStorage.setItem("rc",timestamp)},_addExposureLog:function(area,exposures,types,timestamp,pagecount){if(void 0!==area&&void 0!==exposures&&void 0!==types){var ajaxUrl=this._apiDomain+"/api/open/stats/rcexposure/"+this._clipNo+"/"+this._device+"?area="+area+"&exposures="+exposures+"&types="+types+"&timestamp="+timestamp+"&page="+pagecount+"&brandId="+this._brandId;this._callAjax(ajaxUrl)}},_addnClicksEvent:function(aElTarget){$A(aElTarget).forEach($Fn(function(value,index,array){var clickCode=value.data(this._dataName.clickCode);null!=clickCode&&("MO"==this._device&&void 0!==nclk?value.attach("click",$Fn(function(event){nclk(value.$value(),clickCode,"","",1)},this).bind()):"PC"==this._device&&void 0!==clickcr&&value.attach("click",$Fn(function(event){clickcr(value.$value(),clickCode,"","",event.$value(),1)},this).bind()))},this).bind())},_addClickEvent:function(sArea,wElRecommend,iTargetIndex,timestamp){var fClickHandler=$Fn(this._addClickLog,this).bind(wElRecommend.data(this._dataName.clipNo),iTargetIndex,sArea,wElRecommend.data(this._dataName.statsType),timestamp);wElRecommend.delegate("click","a",fClickHandler),this._addnClicksEvent(wElRecommend.queryAll("a"))},updateInfo:function(info){info.clipNo&&(this._clipNo=info.clipNo),info.brandId&&(this._brandId=info.brandId),this._timestamp=(new Date).getTime(),this._isSentImpressionLog={center:!1,personal:!1},this._welRecommendCenterWrap=null,this._welRecommendSideWrap=null},addRecommendExposureLog:function(sType){var oType=null;if(sType==this._type.center.sType)oType=this._type.center;else if(sType==this._type.side.sType)oType=this._type.side;else{if(sType!=this._type.playlist.sType)return;oType=this._type.playlist}var lTimeStamp=this._timestamp,aelRecommendList=$A($$("."+oType.sClass)),aExposureList=$A(),aExposureTypeList=$A(),hTimestamp=$H();aelRecommendList.forEach($Fn(function(value,index,array){var wElRecommend=$Element(value),sTimestamp=wElRecommend.data(this._dataName.timestamp);null!=sTimestamp?hTimestamp.add(sTimestamp,!0):wElRecommend.visible()&&(this._addClickEvent(oType.sType,wElRecommend,index+1,lTimeStamp),wElRecommend.data(this._dataName.timestamp,lTimeStamp),aExposureList.push(wElRecommend.data(this._dataName.clipNo)),aExposureTypeList.push(wElRecommend.data(this._dataName.statsType)))},this).bind()),0<aExposureList.length()&&0<aExposureTypeList.length()&&this._addExposureLog(oType.sType,aExposureList.toString(),aExposureTypeList.toString(),lTimeStamp,hTimestamp.length()+1)},addRecommendVisibilityLog:function(sClassName,area){try{tvcast.RecommendVisibilityLogger.addVisibilityLog({apiDomain:this._apiDomain,device:this._device,clipNo:this._clipNo,area:area,sClassName:sClassName})}catch(e){}},sendImpressionLog:function(){!this._isSentImpressionLog.center&&this._getWelRecommendCenterWrap()&&window.innerHeight+(window.pageYOffset||document.documentElement.scrollTop)>this._getWelRecommendCenterWrap().offset().top&&(this._addImpressionLog("center",this._timestamp,1,$Element($$.getSingle("#rec_center_wrap > ul > li"))),this._isSentImpressionLog.center=!0),!this._isSentImpressionLog.side&&this._getWelRecommendSideWrap()&&window.innerHeight+(window.pageYOffset||document.documentElement.scrollTop)>this._getWelRecommendSideWrap().offset().top&&(this._addImpressionLog("side",this._timestamp,1,$Element($$.getSingle("#rec_side_wrap > ul > li"))),this._isSentImpressionLog.side=!0)},_addImpressionLog:function(area,timestamp,exposureIndex,wEl){if(area&&timeStamp&&exposureIndex&&wEl){var ajaxUrl=this._apiDomain+"/api/open/stats/rcimp/"+this._device+"/"+this._clipNo+"/"+area+"/"+wEl.attr("data-clipno")+"/"+exposureIndex+"?timestamp="+timestamp+"&type="+wEl.attr("data-stats-type");this._callAjax(ajaxUrl)}},_getWelRecommendCenterWrap:function(){return this._welRecommendCenterWrap||(this._welRecommendCenterWrap=$Element("rec_center_wrap")),this._welRecommendCenterWrap},_getWelRecommendSideWrap:function(){return this._welRecommendSideWrap||(this._welRecommendSideWrap=$Element("rec_side_wrap")),this._welRecommendSideWrap}});var sps,ClipEndRecommend=jindo.$Class({_welContent:null,_welEmpty:null,_oWideMode:null,_htEnv:null,_iPage:1,_nSidePage:1,$init:function(htEnv,oWideMode){this._welContent=jindo.$Element("content"),this._welEmpty=jindo.$Element("empty"),this.setInfo(htEnv,oWideMode),this.loadRecommend()},setInfo:function(htEnv,oWideMode){this._oWideMode=oWideMode,this._htEnv=htEnv,this._initSearchKeyword(htEnv.sSearchKeyword)},loadRecommend:function(){this._loadRecommend({clipNo:this._htEnv.nClipNo,searchKeyword:this._htEnv.sSearchKeyword,channelId:this._htEnv.sChannelId,categoryCodeAsString:this._htEnv.sCategoryCodeAsString,playlistNo:this._htEnv.nPlaylistNo,isSmr:this._htEnv.bIsSmr,playlistClipNos:this._toPlaylistClipNos(this._htEnv.oCurrentPlaylist)})},_initSearchKeyword:function(sSearchKeyword){""!=sSearchKeyword?$Cookie().set("NTC_SK",sSearchKeyword,0,".tv.naver.com"):$Cookie().remove("NTC_SK",".tv.naver.com")},_loadRecommend:function(oData){new jindo.$Ajax("/fragment/clipEnd/recommend",{type:"xhr",method:"get",onload:jindo.$Fn(this._loadHandler,this).bind(),onerror:function(){}}).request(oData)},_loadHandler:function(res){this._attachHtml(res),this._initEvent();var rts=jindo.$Element(jindo.$("rec_center_wrap")).data("rts");tvcast.pc.RecommendStats.updateTimestamp(rts),tvcast.pc.RecommendStats.addRecommendExposureLog("center"),tvcast.pc.RecommendStats.addRecommendVisibilityLog("_visibility-tracking","center"),tvcast.pc.RecommendStats.addRecommendExposureLog("side"),tvcast.pc.RecommendStats.addRecommendVisibilityLog("_visibility-tracking-side","side"),tvcast.pc.RecommendStats.addRecommendExposureLog("playlist"),tvcast.pc.RecommendStats.sendImpressionLog(),this._htEnv.bIsComment2?window.tvcast.Comment.init(this._htEnv.htComment2Option):new Comment,setTimeout(tvcast.pc.Comment._scrollToComment,500),this._oClipEndBanner&&(this._oClipEndBanner=null),this._oClipEndBanner=new ClipEndBanner(this._htEnv)},_attachHtml:function(res){var sHtml=jindo.$S(res.text()).trim().$value();this._welContent&&(this._welContent.html(sHtml),this._welEmpty.hide(),this._setImgSrc(this._welContent))},_setImgSrc:function(welBase){var awelImg=jindo.$ElementList(jindo.$$("img",welBase));if(awelImg&&0<awelImg.length())for(var i=0;i<awelImg.length();i++){var welImg=awelImg.get(i),sSrc=welImg.data("src");sSrc&&welImg.attr("src",sSrc)}},_initEvent:function(){var wfClickHandler=jindo.$Fn(this._clickHandler,this).bind();this._welContent.attach("click@._click",wfClickHandler)},_clickHandler:function(oEvent){var elSource=oEvent.element,welSource=jindo.$Element(elSource),sEventName=welSource.data("event");"showRecommendClip"===sEventName?(this._showRecommendClip(welSource),tvcast.pc.RecommendStats.addRecommendExposureLog("side")):"moreRecommendClip"===sEventName&&(this._showNextRecommendClip(welSource),tvcast.pc.RecommendStats.addRecommendExposureLog("side"),this.sendClickCode(elSource,"rev.more",oEvent))},_showNextRecommendClip:function(welElement){var welEndList=jindo.$Element(jindo.$$.getSingle("._recommendClips",this._welContent)),welRecommendClips=jindo.$ElementList(jindo.$$("li",welEndList));null!=welRecommendClips&&welRecommendClips.removeClass("list_hidden"),welElement.hide()},_showRecommendClip:function(welElement){var welRecommendClipArea=welElement.parent().parent().query("._recommendClipArea"),welListHidden=jindo.$ElementList(jindo.$$("li",welRecommendClipArea)).get(5);null!=welListHidden&&welListHidden.removeClass("list_hidden"),welElement.hide()},_attachRecommendClipHtml:function(res){var sHtml=jindo.$S(res.text()).trim().$value(),welEndList=jindo.$Element(jindo.$$.getSingle("._recommendClips",this._welContent));welEndList&&welEndList.html(sHtml)},_toPlaylistClipNos:function(continuousPlayList){var playlistClipNos="";if(continuousPlayList&&continuousPlayList.list)for(var i=0;i<continuousPlayList.list.length;i++)playlistClipNos=0==i?continuousPlayList.list[i].clipNo:playlistClipNos+":"+continuousPlayList.list[i].clipNo;return playlistClipNos},sendClickCode:function(elSource,sClickCode,oEvent){try{window.clickcr(elSource,sClickCode,"","",oEvent)}catch(e){}}}),ClipEndWatchLater=jindo.$Class({_htEnv:null,_nClipNo:null,_bIsCurrentClip:null,_welButton:null,$init:function(htEnv){this._htEnv=htEnv,this._bIsCurrentClip=!1},setWatchLater:function(welElement){var bIsCurrentClip,nClipNo=welElement.data("clipno");bIsCurrentClip="current"===welElement.data("type"),this.setClipNo(nClipNo),this.setIsCurrentClip(bIsCurrentClip),this.setWelButton(welElement),this._addWatchLater()},setClipNo:function(nClipNo){this._nClipNo=nClipNo},setIsCurrentClip:function(bIsCurrentClip){this._bIsCurrentClip=bIsCurrentClip},setWelButton:function(welElement){this._welButton=welElement},_addWatchLater:function(){if(this._nClipNo){this._htEnv.bIsLogin||confirm("로그인이 필요한 서비스 입니다.\n로그인 하시겠습니까?")&&(window.location.href="https://nid.naver.com/nidlogin.login?url="+encodeURIComponent(location.href));var htData={type:"watch_later",clipNo:this._nClipNo},wfLoadHandler=jindo.$Fn(this._LoadHandler,this).bind();new jindo.$Ajax("/my/playlist/add",{type:"xhr",method:"post",onload:wfLoadHandler}).request(htData)}},_LoadHandler:function(res){"success"===res.text()&&(this._bIsCurrentClip?this._showCurrentWatchLaterToast():this._showWatchLaterChecked())},_showCurrentWatchLaterToast:function(){var welCurrentWatchLaterToast=jindo.$Element("clipInfoArea").query("._currentWatchLaterToast");welCurrentWatchLaterToast.css("display","block"),jindo.$Fn(function(){welCurrentWatchLaterToast.css("display","none")}).delay(1)},_showWatchLaterChecked:function(){this._welButton.addClass("check")},sendWatchLaterClickCode:function(fClickcr,elSource,oEvent){this._bIsCurrentClip&&fClickcr(elSource,"inf.add","","",oEvent)}}),ClipEndBanner=jindo.$Class({_htEnv:null,_welDiscussion:null,_welBanner:null,_welRecommendClips:null,$init:function(htEnv){this._htEnv=htEnv,this._welDiscussion=jindo.$Element(jindo.$$.getSingle("._discussion")),this._isValidate()&&(this._welBanner=this._welDiscussion.query("._banner"),this._welRecommendClips=this._welDiscussion.query("._recommendClips"),this._initBanner())},_isValidate:function(){return!!this._welDiscussion},_initBanner:function(){this._htEnv.sChannelId&&this._htEnv.sClipNo&&this._loadBanner()},_loadBanner:function(){new jindo.$Ajax("/fragment/clipEnd/banner",{type:"xhr",method:"get",onload:jindo.$Fn(this._loadBannerHandler,this).bind(),onerror:function(){}}).request({partnerNo:this._htEnv.sPartnerNo,stationNo:this._htEnv.sStationNo,channelId:this._htEnv.sChannelId,categoryCode:this._htEnv.sCategoryCodeAsString,clipNo:this._htEnv.sClipNo})},_loadBannerHandler:function(res){var sHtml=jindo.$S(res.text()).trim().$value();this._attachHtml(sHtml),this._setCommentArea(sHtml)},_attachHtml:function(sHtml){this._welBanner&&this._welBanner.html(sHtml)},_setCommentArea:function(sHtml){""===sHtml&&(this._welBanner.hide(),this._welRecommendClips.css("margin-top","8px"))}}),ClipEnd=jindo.$Class({htEnv:null,_welContainer:null,_ClipEndPlaylist:null,_ClipInfo:null,_ClipEndRecommend:null,_ClipEndShare:null,_ClipEndWatchLater:null,_ClipEndBanner:null,_ClipEndExpand:null,_fClickcr:null,$init:function(){this._htEnv=window.ghtEnv,this._welContainer=jindo.$Element("container"),this._fClickcr=window.clickcr,this._WideMode=new WideMode,this._ClipEndInfo=new ClipEndInfo(this._htEnv),this._ClipEndRecommend=new ClipEndRecommend(this._htEnv,this._WideMode),this._ClipEndWatchLater=new ClipEndWatchLater(this._htEnv),this._clipInfoData={currentClipNo:this._htEnv.nClipNo,playlistNo:this._htEnv.nPlaylistNo},this._cacheEl=[],this.isPageshow=!1,this._initPlaylist(),this._initEvent(),this._loadSpecialDA()},_initEvent:function(){this._initClickEvent(),this._initResizeEvent(),this._initSpecialEvent(),this._initFreeMovieNotice()},_initPlaylist:function(){var playlistClips=jindo.$Element("playlistClip"),playlistChoiceClip=playlistClips.query("li.on"),choiceClipIndex=0;playlistChoiceClip&&(choiceClipIndex=playlistClips.indexOf(playlistChoiceClip)),this._ClipEndPlaylist=new ClipEndPlaylist(this._htEnv,this._ClipEndInfo,this._WideMode),this._ClipEndPlaylist.setRollingItemIndex(choiceClipIndex),this._ClipEndExpand=new ClipEndExpand(this._htEnv,this._ClipEndPlaylist)},_initFreeMovieNotice:function(){var NFM_cookie=jindo.$Cookie().get("NFM_TV");this._elMovieNotice=jindo.$Element("free_movie_notice"),!this._htEnv.nstoreFreeMovie||"true"!=this._htEnv.nstoreFreeMovie||!this._elMovieNotice||NFM_cookie&&"true"==NFM_cookie||(this._welLayerDimd=$Element("layerDimd"),this._welLayerDimd&&this._welLayerDimd.show(),this._elMovieNotice.show(),this._fnFreeMoveNoticeClick=jindo.$Fn(this._onClickFreeMovieNotice,this).bind(),this._elMovieNotice.attach("click@._click",this._fnFreeMoveNoticeClick))},_onClickFreeMovieNotice:function(e){e.stopDefault();var elNoticeCheck=jindo.$Element("notice_check");elNoticeCheck&&elNoticeCheck.$value().checked&&(this._elMovieNotice.hide(),this._welLayerDimd&&this._welLayerDimd.hide(),null!=typeof WrapPlayer&&WrapPlayer.getRmcPlayer()&&WrapPlayer.getRmcPlayer().play(),jindo.$Cookie().set("NFM_TV","true",365),this._elMovieNotice.detach("click@._click",this._fnFreeMoveNoticeClick))},_initClickEvent:function(){var wfClickHandler=jindo.$Fn(this._clickHandler,this).bind(),wfClipClickHandler=jindo.$Fn(this._onClickClipHandler,this).bind();this._welContainer.attach({"click@._click":wfClickHandler,"click@a[data-moveclipno]":wfClipClickHandler})},_clickHandler:function(oEvent){var elSource=oEvent.element,welSource=jindo.$Element(elSource);switch(welSource.data("event")){case"showClipInfo":this._ClipEndInfo.showClipInfo(welSource),this._ClipEndInfo.sendClickCode(this._fClickcr,elSource,oEvent),this._ClipEndPlaylist.resetScrollBox();break;case"share":tvcast.pc.ClipEndSocialPlugin.init(this._htEnv,welSource);break;case"setWatchLater":this._ClipEndWatchLater.setWatchLater(welSource),this._ClipEndWatchLater.sendWatchLaterClickCode(this._fClickcr,elSource,oEvent),oEvent.stop();break;case"showPlaylistGroup":this._ClipEndPlaylist.showPlaylistGroup(welSource),this._ClipEndPlaylist.sendPlaylistGroupClickCode(this._fClickcr,welSource,oEvent);break;case"pplCommerce":oEvent.stopDefault(),this._togglePPLArea(welSource),this._ClipEndPlaylist.resetScrollBox();break;case"setPlaylistClip":this._ClipEndPlaylist.setPlaylistClip(welSource);break;case"moveLeft":this._ClipEndPlaylist.moveRollingPlaylistBy(!0),oEvent.stop($Event.CANCEL_DEFAULT);break;case"moveRight":this._ClipEndPlaylist.moveRollingPlaylistBy(!1),oEvent.stop($Event.CANCEL_DEFAULT);break;case"setFrameTypeToObject":this._ClipEndShare.setFrameTypeToObject();break;case"multilikedInfo":this._toggleMultilikedInfo();break;case"report":oEvent.stop($Event.CANCEL_DEFAULT),tvcast.Report.init(this._htEnv,welSource,!1,this._getCurrentPlayTime())}},_getCurrentPlayTime:function(){return window.WrapPlayer&&"content"==WrapPlayer.getRmcPlayer().getPlayingVideoType()?WrapPlayer.getRmcPlayer().getCurrentTime():0},_onClickClipHandler:function(oEvent){var elSource=oEvent.element,welSrcElement=jindo.$Element(oEvent.srcElement),welSource=jindo.$Element(elSource),nClipNo=welSource.data("moveclipno"),nPlaylistNo=welSource.data("playlistno"),plClips=welSource.data("plclips"),query=welSource.data("query"),clickCode=welSource.data("click-code");if(nClipNo&&"undefined"!=typeof WrapPlayer&&(elSource==welSrcElement.$value()||!welSrcElement.hasClass("_click"))){oEvent.stopDefault();var ajaxParam={};plClips&&query?ajaxParam={plClips:plClips,query:query}:(ghtEnv.sPlaylistType="",ghtEnv.sPlClips="",ghtEnv.sQuery=""),ajaxParam.timeStamp=window.timeStamp,ajaxParam.prevClipNo=this._clipInfoData.currentClipNo,ajaxParam.clickCode=clickCode,this.moveToOtherClip({clipNo:nClipNo,playlistNo:nPlaylistNo,ajaxParam:ajaxParam})}},moveToOtherClip:function(info){if(info&&info.clipNo){var htState={};htState.clipno=info.clipNo,0<info.playlistNo&&(htState.playlistno=info.playlistNo);var stateUrl=["/v/"+info.clipNo];if(info.ajaxParamString||info.ajaxParam&&info.ajaxParam.plClips&&info.ajaxParam.query){var param=info.ajaxParamString||"?plClips="+info.ajaxParam.plClips+"&query="+info.ajaxParam.query;htState.ajaxParamString=param,htState.plClips=info.ajaxParam.plClips,htState.query=decodeURIComponent(info.ajaxParam.query).replace(/\+/g," "),stateUrl.push(param)}else 0<info.playlistNo&&stateUrl.push("/list/"+info.playlistNo);window.history.pushState(htState,"",stateUrl.join("")),this.getEndContents({clipNo:info.clipNo,playlistNo:info.playlistNo},info.ajaxParam||{})}},getEndContents:function(clipinfo,ajaxParam){if(this.isPageshow=!1,window.scrollTo(0,1),clipinfo.clipNo){ajaxParam||ajaxParam.plClips||ajaxParam.query||(ajaxParam={}),ajaxParam.query&&(ajaxParam.query=decodeURIComponent(ajaxParam.query).replace(/\+/g," "));var ajaxUrl=["/api/contents/json/v/"];clipinfo.clipNo&&ajaxUrl.push(clipinfo.clipNo),0<clipinfo.playlistNo&&ajaxUrl.push("/list/"+clipinfo.playlistNo),this.setClickTime(),new jindo.$Ajax(ajaxUrl.join(""),{type:"xhr",method:"get",timeout:5,onload:jindo.$Fn(this._onLoadEndContents,this).bind(),onerror:function(){location.href=location.href}}).request(ajaxParam)}},_onLoadEndContents:function(response){var res=response.json();if(void 0!==res.commentOption&&(window.ghtEnv.htComment2Option=JSON.parse(res.commentOption)),"undefined"!=typeof WrapPlayer&&"flash"==WrapPlayer.getRmcPlayer().playerType||!res.playerJson?location.reload():res.playerJson.multiTrack?location.reload():res.playerJson.vr360&&jindo.$Agent().navigator().ie&&11==jindo.$Agent().navigator().version&&location.reload(),this.sendAnalytics(res.channelInfoJson),res.playerJson&&res.playerJson.smrPlaylistCount){var smrPlaylistCount=res.playerJson.smrPlaylistCount;jindo.$Cookie().set(smrPlaylistCount.smrCountCookieKey,smrPlaylistCount.smrPlayCount,smrPlaylistCount.smrCookieKeyExpire),smrPlaylistCount.smrBrandCode&&jindo.$Cookie().set(smrPlaylistCount.smrBrandCookieKey,smrPlaylistCount.smrBrandCode,smrPlaylistCount.smrCookieKeyExpire)}this._welContainer.query("._clipInfoButton")&&this._ClipEndInfo.getIsClipInfoOpen()&&this._ClipEndInfo.showClipInfo(this._welContainer.query("._clipInfoButton")),jindo.$Element("clipEndTop").replace(jindo.$Element(res.clipEndTopHtml)),jindo.$Element("clipEndPlaylist").replace(jindo.$Element(res.playlistHtml)),window.expandPlayer("ON"==this.getClipEndExpand().getCookie()?"true":"false");var itemIndex=jindo.$Element("playlistClip").indexOf(jindo.$Element("playlistClip").query("> li.on"));this._ClipEndPlaylist.setRollingItemIndex(itemIndex<1?0:itemIndex),this._clipInfoData={currentClipNo:res.playerJson.clipNo,playlistNo:res.currentPlaylistJson.playlistNo},window.ghtEnv&&(window.ghtEnv.nClipNo=this._clipInfoData.currentClipNo),window.continuousPlayList||(window.continuousPlayList={list:"",playIndex:0});var continuousClipList=[];res.currentPlaylistJson&&res.currentPlaylistJson.clipList&&(continuousClipList=res.currentPlaylistJson.clipList||[]),res.currentPlaylistJson&&res.currentPlaylistJson.playlistClipNos?(window.ghtEnv.sPlClips=res.currentPlaylistJson.playlistClipNos,window.ghtEnv.sQuery=res.currentPlaylistJson.playlistTitle):(window.ghtEnv.sPlClips="",window.ghtEnv.sQuery=""),window.ghtEnv.sPlaylistType=res.currentPlaylistJson.playlistType,window.continuousPlayList.list=[];for(var i=0,nLen=continuousClipList.length;i<nLen;i++)window.continuousPlayList.list[i]={clipNo:continuousClipList[i].clipNo,isAdult:continuousClipList[i].adultVideoYn},res.playerJson.clipNo==continuousClipList[i].clipNo&&(window.continuousPlayList.playIndex=i);this._setContinuousPlayListNextClip(),jindo.$Element("clipEndInfo").replace(jindo.$Element(res.clipInfoHtml)),this._ClipEndInfo.init(),ghtEnv.htComment2Option.likeItId=window.ghtEnv.nClipNo,ghtEnv.htComment2Option.objectId=window.ghtEnv.nClipNo,ghtEnv.htComment2Option.groupId=res.channelInfoJson.channelId;var tmpEnv={};for(var l in tmpEnv.sSearchKeyword=window.ghtEnv.sQuery?window.ghtEnv.sQuery:"",tmpEnv.sChannelId=res.channelInfoJson.channelId,tmpEnv.sCategoryCodeAsString=res.channelInfoJson.categoryCodeAsString,tmpEnv.nPlaylistNo=res.currentPlaylistJson.playlistNo,tmpEnv.bIsSmr="Y"==res.channelInfoJson.smrYn?"true":"false",tmpEnv.sPartnerNo=res.channelInfoJson.partnerNo,tmpEnv.sStationNo=res.channelInfoJson.stationNo,tmpEnv.sClipNo=window.ghtEnv.nClipNo,tmpEnv.nNextPlaylistNo=res.currentPlaylistJson.playlistNo,tmpEnv.specialDAYn=res.channelInfoJson.specialDAYn,tmpEnv.sVideoId=res.playerJson.videoId,tmpEnv.sChannelName=res.channelInfoJson.channelName,tmpEnv.sDisplayChannelId=res.channelInfoJson.displayChannelId,tmpEnv.isPlayableAuth=res.playerJson.playerMode.auth,tmpEnv.bIsDescriptionAvailable=res.currentClipJson.descriptionAvailable,tmpEnv.bIsDescriptionOpened="Y"==res.channelInfoJson.clipDetailOpenYn,tmpEnv.bCommentOpen=!1,tmpEnv.nstoreFreeMovie=res.currentClipJson.nstoreFreeMovie,tmpEnv)window.ghtEnv[l]=tmpEnv[l];this._htEnv=window.ghtEnv,void 0!==window.__splugin&&window.__splugin.hide(),window.__splugin=void 0,this._clearADEventListener(),WrapPlayer&&(this._resetBannerArea(),WrapPlayer.updateProperties(res.playerJson),WrapPlayer._procCloseMiniPlayer()),tvcast.pc.Subscription.setSubscriptionBtns(),this._ClipEndPlaylist.destroy(),this._ClipEndPlaylist.commonInit(this._htEnv),tvcast.pc.LikeIt&&tvcast.pc.LikeIt.update(),this._initSpecialEvent(),this._initFreeMovieNotice(),this._sendPlayLogger(),tvcast.pc.RecommendStats.updateInfo({clipNo:this._htEnv.nClipNo,brandId:res.playerJson&&res.playerJson.smrPlaylistCount&&res.playerJson.smrPlaylistCount.smrBrandCode||""}),this._ClipEndRecommend.setInfo(this._htEnv,this._WideMode),this._ClipEndRecommend.loadRecommend(),tvcast.RecommendVisibilityLogger.resetDefaultVal(),tvcast.pc.Patron.update(this._htEnv),this._loadSpecialDA()},_resetBannerArea:function(){jindo.$Element("banner")&&jindo.$Element("banner").empty()},_sendPlayLogger:function(){tvcast.PlayLogger.reset(window.ghtEnv.nClipNo,window.ghtEnv.nPlaylistNo,jindo.$Cookie().get("NTC_BEFORE_CLIP"))},otherClipPlayInfo:function(clipNo){clipNo||(clipNo=(0<this._clipInfoData.currentClipNo?this._clipInfoData.currentClipNo:window.ghtEnv&&window.ghtEnv.currentClipNo)||null),window.scrollTo(0,1),this.setClickTime();var playList=0<this._clipInfoData.playlistNo?this._clipInfoData.playlistNo:window.ghtEnv&&window.ghtEnv.nPlaylistNo||-1,self=this,oPlaybackOrderController=this.getClipEndPlaylist().getPlaybackOrderController();if(clipNo){var url="/api/clipPlayInfo/"+clipNo+"/list/"+playList;new jindo.$Ajax(url,{type:"xhr",method:"get",timeout:2,onload:function(e){var retData=e.json(),nowPlayClipNo=retData.clipNo;ghtEnv.nClipNo=retData.clipNo;try{tvcast.PlayLogger.reset(nowPlayClipNo,playList,jindo.$Cookie().get("NTC_BEFORE_CLIP"))}catch(e){}jindo.$Cookie().remove("NTC_BEFORE_CLIP");var rmcPlayer="undefined"!=typeof WrapPlayer&&WrapPlayer.getRmcPlayer()||null;if(rmcPlayer){if(window.continuousPlayList&&window.continuousPlayList.list&&window.continuousPlayList.list.length)for(var i=0,nLen=window.continuousPlayList.list.length;i<nLen;i++)nowPlayClipNo==window.continuousPlayList.list[i].clipNo&&(window.continuousPlayList.playIndex=i),self._setContinuousPlayListNextClip();retData.smrTrackingData?rmcPlayer.properties.externalTrackingData=jindo.$Json(retData.smrTrackingData).toObject():rmcPlayer.properties.externalTrackingData=null;var cnt=parseInt(jindo.$Cookie().get("AUTOCNT")||0,10);"Y"==retData.isSMR&&(jindo.$Cookie().set("AUTOCNT",0,0),cnt=0);var advertiseValue={advertiseInfo:retData.advertiseInfo,advertiseUrl:retData.advertiseUrl?retData.advertiseUrl:""};cnt%2!=0&&advertiseValue.advertiseUrl&&(advertiseValue.advertiseUrl=encodeURIComponent(decodeURIComponent(advertiseValue.advertiseUrl).replace(/(pre\",\"exposure\":)true/,"$1false"))),advertiseValue.advertiseUrl||(retData.advertiseInfo="",retData.advertiseUrl=""),"undefined"!=typeof WrapPlayer&&(self.sendAnalytics(),WrapPlayer.updateProperties(retData),WrapPlayer._procCloseMiniPlayer())}},onerror:function(){oPlaybackOrderController&&oPlaybackOrderController.movePage()}}).request()}else oPlaybackOrderController&&oPlaybackOrderController.movePage()},sendAnalytics:function(htClipEnd){htClipEnd&&(window.ghtEnv.sDisplayChannelId=htClipEnd.displayChannelId);var BMRData={s:this._clickTime?this._clickTime:(new Date).getTime(),r:document.URL.replace(/#.*/,"")||"",r2:this._refererURL?this._refererURL:document.referrer.replace(/#.*/,"")};BMR&&BMR.v&&BMR.eU&&((new Image).src="https://sp.naver.com/sp?v="+BMR.v+"&t="+((new Date).getTime()-parseInt(BMRData.s,10))+"&u="+BMR.eU(BMRData.r)+"&r="+BMR.eU(BMRData.r2)),tvcast.pc.Gnb&&(tvcast.pc.Gnb._initWcs(),tvcast.pc.Gnb._initLcs(),tvcast.pc.Gnb._initGnbTemplate()),this._refererURL=document.URL.replace(/#.*/,"")},setClickTime:function(){this._clickTime=(new Date).getTime()},_setContinuousPlayListPlayIndex:function(){window.continuousPlayList&&(window.continuousPlayList.playIndex++,window.continuousPlayList.list.length<=window.continuousPlayList.playIndex&&(window.continuousPlayList.playIndex=0))},_setContinuousPlayListNextClip:function(){if(window.continuousPlayList){var nextIndex=window.continuousPlayList.playIndex+1;window.continuousPlayList.list.length<=nextIndex&&(nextIndex=0),window.continuousPlayList.list.length&&window.continuousPlayList.list[nextIndex]&&(ghtEnv.nNextClipNo=window.continuousPlayList.list[nextIndex].clipNo)}},moveNextClip:function(){if(window.continuousPlayList)if(window.ghtEnv.beginFullscreen)this.otherClipPlayInfo(ghtEnv.nNextClipNo);else{var moveToClipParam={clipNo:ghtEnv.nNextClipNo,playlistNo:ghtEnv.nPlaylistNo};ghtEnv.sPlClips&&ghtEnv.sQuery&&(moveToClipParam.ajaxParam={plClips:ghtEnv.sPlClips,query:ghtEnv.sQuery}),this.moveToOtherClip(moveToClipParam)}},moveCurrentClip:function(){this.otherClipPlayInfo()},_toggleMultilikedInfo:function(){jindo.$Element("multiliked_info").toggle()},_togglePPLArea:function(wel){this._cacheEl.pplArea||(this._cacheEl.pplArea=jindo.$Element(jindo.$$.getSingle("._ppl_commerce"))),this._cacheEl.pplArea.toggle(),this._clickCode(wel.$value(),"inf.cart",{}),wel.toggleClass("on")},_clickCode:function(sourceElement,sClickCode,oEvent){this._fClickcr&&this._fClickcr(sourceElement,sClickCode,"","",oEvent)},_initResizeEvent:function(){var wfResizeEventHandler=jindo.$Fn(this._resizeEventHandler,this).bind();jindo.$Element(window).attach("resize",wfResizeEventHandler)},_resizeEventHandler:function(){window.ghtEnv&&window.ghtEnv.beginFullscreen||(this._WideMode.isChangeToWideMode()&&(this._WideMode.setIsWideMode(!0),this._ClipEndPlaylist.resetScrollBox()),this._WideMode.isChangeToNormalMode()&&(this._WideMode.setIsWideMode(!1),this._ClipEndPlaylist.resetScrollBox()),this._ClipEndPlaylist._oRollingPlaylist&&this._ClipEndPlaylist._oRollingPlaylist.moveTo(this._ClipEndPlaylist._oRollingPlaylist.getIndex()),1725<=this._WideMode.getCurrentWidth()?this._ClipEndPlaylist.setRollingItemPerPage(6):this._ClipEndPlaylist.setRollingItemPerPage(5),this._ClipEndPlaylist.resetScrollBox())},_initSpecialEvent:function(){if(this._htEnv.bIsDescriptionAvailable&&this._htEnv.bIsDescriptionOpened){var welClipInfoButton=this._welContainer.query("._clipInfoButton"),welInfoBox=this._welContainer.query("._infoBox");this._ClipEndInfo.setIsClipInfoOpen(welClipInfoButton.hasClass("open")),this._ClipEndInfo.setClipInfoHeight(welInfoBox.height()),this._ClipEndInfo.toggleButtonTitle(welClipInfoButton),this._ClipEndPlaylist.resetScrollBox()}},_clearADEventListener:function(){var adEl=jindo.$Element("banner").query("#ad");if(adEl){var iframeWindow=adEl.$value().contentWindow;iframeWindow&&iframeWindow.callbackForSPA&&iframeWindow.callbackForSPA.hasOwnProperty("removeADEventListener")&&iframeWindow.callbackForSPA.removeADEventListener()}},_loadSpecialDA:function(){var welSpecialDA=jindo.$Element("da_top");if(welSpecialDA){var vetaScript=welSpecialDA.data("vetaScriptSrc"),bannerScript=welSpecialDA.data("bannerScriptSrc");jindo.LazyLoading.load(vetaScript,function(){jindo.LazyLoading.load(bannerScript)})}},getClipEndPlaylist:function(){return this._ClipEndPlaylist},getClipEndExpand:function(){return this._ClipEndExpand},showTimestampNoticeLayer:function(sMsg){$Element("timestamp_alert").html(sMsg);var toast=$Element("toastTimestamp");toast.css("display","block"),$Fn(function(){toast.css("display","none")}).delay(1)}});jindo.$Element(window).attach("pageshow",function(){tvcast.pc.ClipEnd.isPageshow=!0}),window.onpopstate||(window.onpopstate=function(event){if(event&&event.type&&event.target.location.href.indexOf("#")<0)if(event.state&&event.state.clipno){var ajaxParam={};event.state.plClips&&event.state.query&&(ghtEnv.sPlaylistType="SEARCHED_CLIPS",ajaxParam.plClips=event.state.plClips,ajaxParam.query=event.state.query),tvcast.pc.ClipEnd.getEndContents({clipNo:event.state.clipno,playlistNo:event.state.playlistno},ajaxParam)}else tvcast.pc.ClipEnd.isPageshow||(window.location.href=event.target.location.href)}),document.domain="naver.com",void 0===sps?sps={CommentBox:{},config:{}}:void 0===sps.CommentBox&&(sps.CommentBox={}),sps.CommentBox.NAME="sps.CommentBox",sps.CommentBox.VERSION="1.0.1.7785",sps.CommentBox.Config=commentJ.$Class({name:"unknown",version:"unknown",message:{},$init:function(htOptions){this.name=sps.CommentBox.Config.NAME,this.version=sps.CommentBox.Config.VERSION,this.instance={},this._initDefaultConfiguration(),this._initConvertConvention(),"object"==typeof htOptions&&this.option(htOptions);var serviceAddress=document.location.protocol+"//";serviceAddress+=document.location.host+"/",serviceAddress+=this.option("servicePath")+"/",this.option("serviceAddress",serviceAddress);var booleans=this.option("booleans");booleans.isMine=!0,booleans.isAdmin=!0,booleans.isReply=!0,booleans.isDeleted=!0,booleans.isVisible=!0,booleans.isAuthor=!0,booleans.isAuthorComment=!0,booleans.isUserRecommend=!0,booleans.isAuthorRecommend=!0,booleans.isRecommendArea=!0,booleans.isMobile=!0;var comment=this.option("comment");comment.push("parentCommentNo"),comment.push("commentNo"),comment.push("writerNickName"),comment.push("writerId"),comment.push("writerIp"),comment.push("isMine"),comment.push("isAdmin"),comment.push("contents"),comment.push("registeredDate"),comment.push("modifiedDate"),comment.push("replyLevel"),comment.push("isReply"),comment.push("isDeleted"),comment.push("isVisible"),comment.push("writerProfileUrl"),comment.push("writerProfileType"),comment.push("upCount"),comment.push("downCount"),comment.push("isUserRecommend"),comment.push("isAuthorRecommend"),comment.push("isRecommendArea"),comment.push("isAuthor"),comment.push("isAuthorComment"),comment.push("replyCount"),comment.push("objectScore"),comment.push("status"),comment.push("isMobile"),comment.push("personacon"),comment.push("isFacebook"),comment.push("isTwitter"),comment.push("isSocialLinkOpen"),comment.push("isSocialReplyActive"),comment.push("ticket"),comment.push("categoryId")},_initConvertConvention:function(){var convention=this.option("convention");convention={parentCommentNo:"parent_comment_no",commentNo:"comment_no",groupNo:"group_no",writerNickName:"writer_nickname",writerId:"writer_id",encodedWriterId:"enc_writer_id",writerIp:"writer_ip",registeredDate:"registered_ymdt",modifiedDate:"modified_ymdt",replyLevel:"reply_level",typeCode:"comment_type_code",isMine:"is_mine",isAdmin:"is_admin",isReply:"is_reply",isDeleted:"deleted_yn",isVisible:"visible_yn",ticket:"ticket",objectId:"object_id",objectUrl:"object_url",replyCount:"reply_count",writerProfileUrl:"writer_profile_url",writerProfileType:"writer_profile_type",upCount:"up_count",downCount:"down_count",isUserRecommend:"user_recommend_yn",isAuthorRecommend:"author_recommend_yn",isRecommendArea:"is_recommend_area",isAuthor:"is_author",isAuthorComment:"is_author_comment",replyCount:"reply_count",objectScore:"object_score",status:"status",isMobile:"mobile_yn",personacon:"personacon",isFacebook:"is_facebook",isTwitter:"is_twitter",categoryId:"category_id"},this.option("convention",convention)},_initDefaultConfiguration:function(){this.option("useCategory",!1),this.option("categoryId","default"),this.option("viewCategoryId",void 0),this.option("useProfile",!1),this.option("useScore",!1),this.option("useSpan",!1),this.option("useMemorial",!1),this.option("useDummyThumb",!1),this.option("useCountUnderBar",!1),this.option("useRecommendArea",!1),this.option("useRecommendResult",!1),this.option("useReplyArea",!1),this.option("useSocialComment",!1),this.option("nidManageSocialAuthUrl","https://nid.naver.com/user2/help/externalAuth.nhn?menu=security&lang=ko_KR"),this.option("socialAuthUrl","https://nid.naver.com/oauth/idLink.nhn?"),this.option("method","post"),this.option("pageSize",10),this.option("replyPageSize",10),this.option("isLogin",!1),this.option("objectUrl",""+document.location),this.option("servicePath","comments"),this.option("dateFormat","Y-m-d H:i"),this.option("centerPaginate",!1),this.option("paginateSize",10),this.option("commands",["reply","report","delete"]),this.option("allowCommandsAtReplyArea",["report","delete"]),this.option("nobarInCommandGroup",["reply","delete","report"]),this.option("formation",["count","list","page","write"]),this.option("layers",["profile","naverHelp","bestInfo","sortOldInfo"]),this.option("descs",["policy"]),this.option("maxDepth",2),this.option("maxReplyAreaDepth",1),this.option("maxScoreDepth",1),this.option("maxScore",10),this.option("enableMultiLine",!1),this.option("enableSpotLight",!0),this.option("maximumCommentLength",500),this.option("useBlockCopyAndPaste",!1),this.option("defaultProfileUrl","https://ssl.pstatic.net/static/common/comment/img_default_profile.gif"),this.option("memorialDefaultImageUrl","https://ssl.pstatic.net/static/common/comment/ico_cherish.gif"),this.option("pwBlockUrl","not_available.nhn"),this.option("pwReportUrl","report.nhn"),this.option("profileHome","redirect.nhn"),this.option("browser",commentJ.$Agent().navigator().getName()),this.option("onTextboxBackground","#FFFFFF"),this.option("onTextboxFontColor","#666666"),this.option("offTextboxBackground","#FFFFFF"),this.option("offTextboxFontColor","#666666"),this.option("replaceErrorFontFamily","돋움, Dotum"),this.option("thumbSizeInComment","medium"),this.option("replyThumbSizeInWritebox","medium"),this.option("isDescInOnlyRoot",!1),this.option("isReplyWriteBoxPositionOnBottom",!0),this.option("useSpareButtonInReplyWriteBox",!1),this.option("useProfileThumbLink",!0),this.option("useNameLink",!0),this.option("useWriteDummyThumb",!1),this.option("useLineBreaking8203",!0),this.option("useEscapeHtml",!0),this.option("useProfileNameLink",!0),this.option("useMobile",!1),this.option("usePersonacon",!1),this.option("useLoginPopup",!1),this.option("loginCallbackUrl","http://commentbox.naver.com/loginSuccess.nhn"),this.option("snsAuthStatus",{}),this.option("urlList",{}),this.option("currentSortOption",void 0),this.option("sortOptionList",["newest","oldest"]),this.option("useSortArea",!1),this.option("useInfoArea",!1),this.option("useInnerSvcList",!1),this.option("innerSvcListSize",3),this.option("useInnerSvcShowReply",!1),this.option("useFocus",!0),this.option("landingCommentNo",null),this.option("social",{active:!1,link_open:!1,reply_active:!1}),this.option("comment",[]),this.option("convention",{}),this.option("initialized",!1),this.option("booleans",{}),this.option({elements:{list:".cbox_list_comment",countArea:".cbox_list_info",writeboxRoot:".writebox_root_area",writebox:".cbox_write",textarea:"textarea",userArea:".cbox_user_area",mainPartInWritebox:".cbox_txt_area",writeButton:'input[type="image"]',closeButton:".cbox_close",layer:".cbox_layer_popup",commentNameArea:".cbox_section",commands:".cbox_section2",descs:".cbox_desc_area",paginate:".cbox_paginate",body:"#cbox_module",focusTarget:"comment_focus",helpButton:".cbox_help",commentBody:".cbox_comment_area",firstOfCommentBody:".cbox_info_area",secondOfCommentBody:".cbox_info_area2",commentText:".cbox_desc",recommendCount:"span",profileButtonArea:".cbox_btn_area2",profileRadio:"input[name=rdo_profile][checked]",scoreArea:".cbox_select_area",scoreDiv:".selectbox-noscript",scoreSelector:".selectbox-source",starGrade:".cbox_star_grade",replyNum:".reply_num",replyAreaPageLeft:".cbox_best_pre",replyAreaPageRight:".cbox_best_next",recommend:".cbox_activate_up",discommend:".cbox_activate_down",mobileIcon:".ico_mobile",mobileLayer:".ly_mobile",personacon:".personacon",personaconButtonArea:".cbox_btn_area2",personaconThumbImg:".cbox_personacon_thumb",snsCheckboxArea:".cbox_sns",cboxSnsShare:".cbox_sns_share"}}),this.option({css:{firstCommand:"cbox_first",spotLight:"cbox_focus",basicWriteBoxType:"cbox_write_default",profileWriteBoxType:"cbox_profile",personaconWriteBoxType:"cbox_profile",thumbOn:"cbox_thumb_on",thumbOff:"cbox_thumb_off",closeButtonOver:"cbox_over",countUnderBar:"cbox_h_type2",noBarOnCommend:"cbox_nobar",recommendCountOn:"on",cboxOn:"cbox_on",thumbs:"cbox_thumbs",thumb:"cbox_thumb",writeboxProfile:"cbox_profile",writeboxPersonacon:"cbox_profile",writeboxProfileArea:"cbox_profile_area",writeboxPersonaconArea:"cbox_profile_area",nickName:"cbox_nick_name",userId:"cbox_user_id",noProfileThumbArea:"cbox_li_type",bodySpan:"cbox_fluid",spanThumbs:"cbox_thumbs_box",scoreList:"cbox_list_comment_vari",replyCountOn:"on",replyAreaUnfold:"unfold",cboxPagination:"cbox_pagination"}}),this.option({templates:{comment:'<li class="cbox_thumb_off comment_no_{=commentNo}" >{if replyLevel > 1} <span class="cbox_bu_subnode">ㄴ</span> {/if}<div class="cbox_comment_area"><div class="cbox_info_area"><div class="cbox_section">{if config.option(\'usePersonacon\') && personacon}<img class="cbox_personacon sticker" src="{=personacon}"/>{/if}{if writerNickName != null}<span class="cbox_nick_name">{=writerNickName}</span> {/if}<span class="cbox_user_id">({=writerId})</span> <span class="cbox_date">{=registeredDate}</span> {if config.option(\'useSocialComment\') && isMine && (isFacebook || isTwitter)}{if !(replyLevel > 1 && !isSocialReplyActive)}<span class="cbox_sns_share">{if \'true\'== isFacebook}<a href="{js commentJ.$S((=config.option(\'urlList\').social.redirectSns)).format((=ticket),(=commentNo),\'FACEBOOK\')}" {if !isSocialLinkOpen}onclick="return false;"{/if} class="facebook N=a:CML.fb" target="_blank">페이스북</a>{/if}{if \'true\'== isTwitter}<a href="{js commentJ.$S((=config.option(\'urlList\').social.redirectSns)).format((=ticket),(=commentNo),\'TWITTER\')}" {if !isSocialLinkOpen}onclick="return false;"{/if} class="twitter N=a:CML.tw" target="_blank">트위터</a>{/if}</span>{/if}{/if}</div><div class="cbox_section2"></div></div><div class="cbox_desc_comment"><p class="cbox_desc" style="word-break:break-all;line-break: all;word-wrap:break-word;">{=contents}</p></div></div><ul></ul></li>',deleteComment:'<li class="cbox_thumb_off comment_no_{=commentNo}" >{if replyLevel > 1} <span class="cbox_bu_subnode">ㄴ</span> {/if}<div class="cbox_comment_area"><div class="cbox_info_area"></div><div class="cbox_desc_comment"><p class="cbox_desc" style="word-break:break-all;line-break: all;word-wrap:break-word;">댓글이 삭제되었습니다.</p></div></div><ul></ul></li>',blockComment:'<li class="cbox_thumb_off comment_no_{=commentNo}" >{if replyLevel > 1} <span class="cbox_bu_subnode">ㄴ</span> {/if}<div class="cbox_comment_area"><div class="cbox_info_area"><div class="cbox_section2"></div></div><div class="cbox_desc_comment"><p class="cbox_desc" style="word-break:break-all;line-break: all;word-wrap:break-word;">{if status == 7 }본 게시물은 저작권법 제103조에 의거하여 저작권자의 요청으로 임시 게시중단 되었습니다.{elseif status == 8 || status == 9}본 게시물은 정보통신망이용촉진및정보보호등에 관한 법률 제44조의2를 준수하기 위해 다른 이용자의 요청으로 임시 게시중단 되었습니다.{/if}</p></div></div><ul></ul></li>',countArea:'<div class="cbox_list_info"></div>',countSimple:'<h5 class="cbox_h_type">댓글 <span>(<strong>{=count}</strong>)</span></h5>',countDetail:'<h5 class="cbox_h_type">사용자평 <span>(<strong>{=score.count}</strong>)</span></h5>',rootWriteBoxArea:'<div class="writebox_root_area"></div>',sortArea:'<div class="cbox_sort_area"></div>',sortList:'<span class="cbox_list_sort"></span>',sortButton:'<a href="#" id="{=sortId}">{=sortName}</a>',sortButtonBlind:'<span class="cbox_blind"> 선택됨</span>',bestInfo:'<span class="cbox_best_info" style="display:none" id="bestInfo">BEST 댓글 운영 기준 안내 <a href="#none"><img src="https://ssl.pstatic.net/static/common/comment/btn_tip.gif" width="14" height="14" title="BEST 댓글 운영 안내 보기" alt="BEST 댓글 운영 안내 보기" border="0"></a></span>',bestInfoLayer:'<div class="cbox_layer_popup best_info_layer" tier="2" style="top:32px;right:0;display:none"><strong class="cbox_blind">BEST 댓글 운영 기준 안내 레이어</strong><button type="button" class="cbox_close" title="BEST 댓글 운영 기준 안내 레이어 닫기"><span><em>닫기</em></span></button><p>댓글에 대한 답글은 베스트 댓글 선정에서<br> 제외 됩니다.</p><p>타인에게 불쾌감을 주거나 저자의 요청을 받은<br> 경우도 베스트 댓글에서 제외될 수 있습니다.</p></div>',sortOldInfo:'<span class="cbox_best_info" style="display:none" id="oldInfo">등록순 정렬 도움말 <a href="#none"><img src="https://ssl.pstatic.net/static/common/comment/btn_tip.gif" width="14" height="14" title="등록순 정렬 도움말 보기" alt="등록순 정렬 도움말 보기" border="0"></a></span>',sortOldInfoLayer:'<div class="cbox_layer_popup best_info_layer" tier="2" style="display:none;top:32px;right:0"><strong class="cbox_blind">등록순 정렬 도움말 레이어</strong><button type="button" class="cbox_close" title="등록순 정렬 도움말 레이어 닫기"><span><em>닫기</em></span></button><p>댓글 등록일이 가장 늦은순으로 정렬 됩니다.</p><p>댓글을 중심으로 정렬되며, 댓글의 답글은<br> 영향받지 않습니다.</p></div>',list:'<div class="cbox_list_comment"><ul></ul></div>',writeBox:'<div class="cbox_write"><div class="cbox_write_box"><div class="cbox_write_box2"><form action="#" method="post"><fieldset><legend>댓글 등록 폼</legend><div class="cbox_user_area"><div class="cbox_txt_area">\x3c!-- 유동형 덧글 입력상자 --\x3e<div class="cbox_section"><textarea class="cbox_txt_focus_area" name="" title="댓글 입력창"></textarea><div class="cbox_btn_area N=a:CMW.ok"><input type="image" src="https://ssl.pstatic.net/static/common/comment/btn_registry.gif" alt="등록"onMouseDown="this.src=\'https://ssl.pstatic.net/static/common/comment/btn_registry_down.gif\'" onMouseOut="this.src=\'https://ssl.pstatic.net/static/common/comment/btn_registry.gif\'"></div></div><div class="cbox_desc_area"></div>\x3c!-- //유동형 덧글 입력상자 --\x3e</div></div></fieldset></form></div></div></div>',spareWriteButton:'<input type="image" src="https://ssl.pstatic.net/static/common/comment/btn_registry.gif" alt="등록"onMouseDown="this.src=\'https://ssl.pstatic.net/static/common/comment/btn_registry_down.gif\'" onMouseOut="this.src=\'https://ssl.pstatic.net/static/common/comment/btn_registry.gif\'">',subNode:'<span class="cbox_bu_subnode">ㄴ</span>',recommendImgArea:'<span class="cbox_desc_img"></span> ',extra1:"<div></div>",extra2:"<div></div>",extra3:"<div></div>",extra4:"<div></div>",extra5:"<div></div>",deleteCommand:'{if isMine}<span><a href="#" class="N=a:CML.del">삭제</a></span>{/if}',reportCommand:'{if !isMine}<span><a href="#" class="N=a:CML.report" title="새 창">신고</a></span>{/if}',replyCommand:'<span><a href="#" class="N=a:CML.reply">답글</a></span>',replyCancelCommand:'<span><a href="#" class="N=a:CML.rpcancel">답글취소</a></span>',recommendCommand:'<span class="cbox_activate_up"><a href="#" title="이 댓글을 공감합니다" class="N=a:CML.like"><em>공감</em>: </a><span>0</span></span>',discommendCommand:'<span class="cbox_activate_down"><a href="#" title="이 댓글을 비공감합니다" class="N=a:CML.dlike"><em>비공감</em>: </a><span>0</span></span>',authorCommand:'{if isAuthor}<span class="cbox_activate_up"><a href="#" title="좋은 댓글로 공감하시면, 이 댓글이 공감 댓글 목록에 추가됩니다."><em>필자공감</em></a></span>{/if}',authorCancelCommand:'{if isAuthor}<span class="cbox_activate_cancel"><a href="#" title="공감을 취소하시면, 이 댓글은 공감 댓글 목록에서 지워지고 원래의 위치에 나타납니다."><em>공감취소</em></a></span>{/if}',pageArea:'<div class="cbox_paginate"></div>',pageInfoText:'<strong class="cbox_htitle">페이지 이동하기</strong>',page:'<a href="#" class="N=a:CML.page,r:{=page}">{=page}</a>',currentPage:"<strong>{=page}<span> 현재 선택된 페이지</span></strong>",firstPage:'<a class="cbox_pre_end" href="#">맨앞</a>',prevPage:'<a class="cbox_pre N=a:CML.prev" href="#">이전<span> 페이지 목록으로 이동하기</span></a>',nextPage:'<a class="cbox_next N=a:CML.next" href="#">다음<span> 페이지 목록으로 이동하기</span></a>',lastPage:'<a class="cbox_next_end" href="#">맨뒤</a>',arthorRecommendImgTag:'<img src="https://ssl.pstatic.net/static/common/comment/ico_writer_recommend.gif" width="33" height="15" title="필자가 좋은 댓글로 공감한 글입니다." alt="필자가 좋은 댓글로 공감한 글입니다." class="recommend">',userRecommendImgTag:'<img src="https://ssl.pstatic.net/static/common/comment/ico_best_comment.png" width="33" height="15" title="네이버 이용자들이 공감한 댓글입니다." alt="네이버 이용자들이 공감한 댓글입니다." class="recommend2">',recommendReply:'<div class="cbox_info_area2"><span>0</span>개의 답글이 있습니다. <a href="#" class="N=a:CML.best">답글 작성하러 가기</a></div>',socialCommentDesc:'<div class="cbox_sns"><input type="checkbox" class="_facebook N=a:CMW.fb" id="facebook_{=level}"><label for="facebook_{=level}" class="facebook {if !isFacebook}off{/if}">페이스북</label><input type="checkbox" class="_twitter N=a:CMW.tw" id="twitter_{=level}"><label for="twitter_{=level}" class="twitter {if !isTwitter}off{/if}">트위터</label><span>에 함께 등록 <a href="#" class="set N=a:CMW.snsset">설정</a></span></div>',policyDesc:'<div class="cbox_desc2"><p><span>주제와 무관한 댓글, 악플은 삭제될 수 있습니다.</span><a href="#" target="_blank">댓글 운영정책</a></p></div>',textCountDesc:'<div class="cbox_desc2"><em class="cbox_text_length">현재 입력한 글자수 </em><span class="cbox_present_text_length">0</span>/ <em class="cbox_text_length">전체 입력 가능한 글자수 </em><span class="cbox_total_text_length">0</span> </div>',profileLayer:'<div class="cbox_layer_popup" tier="1" style="width:298px; left:54px; top:-12px;"><form action="#" method="post"><button type="button" class="cbox_close N=a:CMW.close"><span><em>닫기</em></span></button><dl class="cbox_list_profile"><dt>프로필 선택</dt><dd>내 댓글 작성자명에 해당 블로그 링크가 걸립니다.</dd></dl><ul></ul><div class="cbox_btn_area2"><input type="image" class="N=a:CMW.ok"src="https://ssl.pstatic.net/static/common/comment/btn_confirm.gif" alt="확인" onMouseOver="this.src=\'https://ssl.pstatic.net/static/common/comment/btn_confirm_over.gif\'" onMouseOut="this.src=\'https://ssl.pstatic.net/static/common/comment/btn_confirm.gif\'"><a href="#" class="N=a:CMW.cancel"><img src="https://ssl.pstatic.net/static/common/comment/btn_cancel.gif" width="45" height="25" alt="취소" onMouseOver="this.src=\'https://ssl.pstatic.net/static/common/comment/btn_cancel_over.gif\'" onMouseOut="this.src=\'https://ssl.pstatic.net/static/common/comment/btn_cancel.gif\'" ></a></div></form></div>',personaconLayer:'<div class="cbox_layer_popup" tier="1" style="width:298px; left:54px; top:-12px;"><button type="button" class="cbox_close"><span><em>닫기</em></span></button><ul></ul><div class="cbox_btn_area2"><a href="#"><img src="https://ssl.pstatic.net/static/common/comment/btn_cancel.gif" width="45" height="25" alt="취소" onMouseOver="this.src=\'https://ssl.pstatic.net/static/common/comment/btn_cancel_over.gif\'" onMouseOut="this.src=\'https://ssl.pstatic.net/static/common/comment/btn_cancel.gif\'" ></a></div></div>',naverHelpLayer:'<span class="cbox_layer_popup" tier="2" style="width:278px; left:0; top:0;"><a href="#" class="cbox_close"><span><em>닫기</em></span></a><span class="cbox_desc6">네이버 회원정보에 등록한 별명을 사용합니다.</span></span>',thumbMediumProfileImg:'<img alt="썸네일" class="cbox_user_thumb" width="40" height="40" >',thumbSmallProfileImg:'<img alt="썸네일" class="cbox_user_thumb" width="22" height="22" >',thumbProfileBorder:'<span class="cbox_tmp_border"></span>',profileButton:'<button type="button" class="N=a:CMW.prof"><span>변경</span></button>',thumbPersonaconImg:'<img alt="썸네일" class="cbox_personacon_thumb" width="50" height="50" >',personaconButton:'<button type="button"><span>스티커</span></button>',profileRadio:'<input type="radio" name="rdo_profile" class="cbox_input_rdo">',blogLabel:"<label>네이버 블로그 프로필</label>",naverLabel:"<label>네이버 별명</label>",baseball9Label:"<label>야구9단 프로필</label>",aBlank:'<a href="#" target="_blank"></a>',helpButton:'<span class="cbox_btn_area4"><button type="button" class="cbox_help"><span>도움말</span></button></a>',decertifyButton:'<a href="#" class="cbox_option" target="_blank"><span>인증해제</span></a>',certifyButton:'<a href="#" class="cbox_option" >가져오기</a>',authorImg:'<img width="40" height="12" class="cbox_admin" alt="" src="https://ssl.pstatic.net/static/common/comment/blank.gif">',authorText:"<span>필자</span>",spanWriteBox:'<div class="cbox_txt_area"><table cellspacing="0" class="cbox_section"><caption>덧글 입력박스</caption><tbody><tr><td></td><td><textarea class="cbox_txt_focus_area" cols="80" rows="20" name="" title="댓글 입력창"></textarea></td><td class="cbox_btn_area N=a:CMW.ok"><input type="image" src="https://ssl.pstatic.net/static/common/comment/btn_registry.gif" alt="등록" onMouseDown="this.src=\'https://ssl.pstatic.net/static/common/comment/btn_registry_down.gif\'" onMouseOut="this.src=\'https://ssl.pstatic.net/static/common/comment/btn_registry.gif\'"></td></tr><tr><td></td><td><div class="cbox_desc_area"></div></td><td></td></tr></tbody></table></div>',scoreArea:'<div class="cbox_select_area"><div id="s2" class="selectbox-noscript"><label for="select_grade">평점 선택 옵션</label><select id="select_grade" name="" class="selectbox-source N=a:CMW.star"><option class="selectbox-default">평점선택</option><option value="10">10점</option><option value="9">9점</option><option value="8">8점</option><option value="7">7점</option><option value="6">6점</option><option value="5">5점</option><option value="4">4점</option><option value="3">3점</option><option value="2">2점</option><option value="1">1점</option></select><div class="selectbox-box"><div class="selectbox-label">평점선택</div></div><div class="selectbox-layer"><div class="selectbox-list"></div></div></div></div>',scoreItem:'<separator/><span class="cbox_star_grade"><span style="width:100%;"><em>10점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:90%;"><em>9점</em></span></span<separator/><span class="cbox_star_grade"><span style="width:80%;"><em>8점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:70%;"><em>7점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:60%;"><em>6점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:50%;"><em>5점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:40%;"><em>4점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:30%;"><em>3점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:20%;"><em>2점</em></span></span><separator/><span class="cbox_star_grade"><span style="width:10%;"><em>1점</em></span></span>',thirdOfCommentBody:'<div class="cbox_info_area3"></div>',fourthOfCommentBody:'<div class="cbox_info_area2"><a href="#"><strong>답글</strong> <span class="reply_num"></span></a></div>',scoreBoard:'<div class="cbox_section"><span class="cbox_star_grade"></span></div>',replyAreaPage:'<li class="cbox_thumb_off cbox_pagination"><p class="cbox_best_paginate"><a href="#" class="cbox_best_pre">이전 답글</a><span class="cbox_best_page"><em><span class="cbox_blind">현재 선택된 페이지 </span> {=curPage}</em>/<em><span class="cbox_blind">전체 페이지 수 </span>{=totalPage}</em></span><a href="#" class="cbox_best_next">다음 답글</a></p></li>',mobileIcon:'<img src="https://ssl.pstatic.net/static/common/comment/ico_mobile.gif" width="9" height="12" alt="모바일" class="ico_mobile"> ',mobileLayer:'<div style="top:26px; left:159px; z-index:30" class="ly_mobile">모바일에서 작성한 댓글입니다.<em></em></div>'}})},element:function(oName,sElement){var elements=this.option("elements");if(void 0!==elements&&null!=elements||(elements={},this.option("elements",elements)),"object"==typeof oName)for(var i=0;i<oName.length;i++)elements[i]=oName[i];else{if("string"!=typeof oName)return null;if("string"!=typeof sElement)return elements[oName];elements[oName]=sElement}},template:function(oName,sTemplate){var templates=this.option("templates");if(void 0!==templates&&null!=templates||(templates={},this.option("templates",templates)),"object"==typeof oName)for(var i=0;i<oName.length;i++)templates[i]=oName[i];else{if("string"!=typeof oName)return null;if("string"!=typeof sTemplate)return commentJ.$Template(templates[oName]);templates[oName]=sTemplate}},css:function(oName,sStyle){var styles=this.option("css");if(void 0!==styles&&null!=styles||(styles={},this.option("css",styles)),"object"==typeof oName)for(var i=0;i<oName.length;i++)styles[i]=oName[i];else{if("string"!=typeof oName)return null;if("string"!=typeof sStyle)return styles[oName];styles[oName]=sStyle}}}).extend(commentJ.Component),sps.CommentBox.Config.prototype.message.UNAVAILABLE_OPERATION="요청한 동작을 수행할 수 없습니다.",sps.CommentBox.Config.prototype.message.ALREADY_REPORT="이미 신고된 글입니다.",sps.CommentBox.Config.prototype.message.NO_CONTENTS="댓글 내용을 입력해주세요.",sps.CommentBox.Config.prototype.message.NOT_LOGIN="로그인을 하신 후 이용해 주시기 바랍니다.",sps.CommentBox.Config.prototype.message.NEED_LOGIN="로그인이 필요한 기능입니다.",sps.CommentBox.Config.prototype.message.EXCEED_MAX_LENGTH="{=max}자까지 입력할 수 있습니다.",sps.CommentBox.Config.prototype.message.BLOCK_COPY="복사 기능은 사용하실 수 없습니다.",sps.CommentBox.Config.prototype.message.BLOCK_PASTE="붙여넣기 기능은 사용하실 수 없습니다.",sps.CommentBox.Config.prototype.message.REPORT_COMPLETE="신고 완료 처리 되었습니다.",sps.CommentBox.Config.prototype.message.DELETE_CONFIRM="정말 삭제하시겠습니까?",sps.CommentBox.Config.prototype.message.RECOMMEND_COMPLETE="공감했습니다.",sps.CommentBox.Config.prototype.message.RECOMMEND_CANCEL="공감을 취소 했습니다.",sps.CommentBox.Config.prototype.message.DISCOMMEND_COMPLETE="비공감했습니다.",sps.CommentBox.Config.prototype.message.DISCOMMEND_CANCEL="비공감을 취소 했습니다.",sps.CommentBox.Config.prototype.message.AUTHOR_RECOMMEND_COMPLETE="필자공감 했습니다.",sps.CommentBox.Config.prototype.message.AUTHOR_DISCOMMEND_COMPLETE="필자공감이 취소되었습니다.",sps.CommentBox.Config.prototype.message.REQUIRE_SCORE="평점을 선택해야 댓글을 작성할 수 있습니다.",sps.CommentBox.Config.prototype.message.CREATE_ERROR_PWORD_BLOCK="작성하신 내용에 금칙어가 포함되어 있습니다. [{=pwords}]",sps.CommentBox.Config.prototype.message.CREATE_ERROR_PWORD_ABUSING="작성하신 내용에 사용이 제한된 문구가 포함되어 일시적으로 등록이 제한됩니다.",sps.CommentBox.Config.prototype.message.DEFAULT_TEXT="",sps.CommentBox.Config.NAME="sps.CommentBox.Config",sps.CommentBox.Config.VERSION="1.0.0",sps.config=new sps.CommentBox.Config,document.domain="naver.com",void 0===sps?sps={CommentBox:{},disableForm:function(oEvent){return commentJ.$Event(oEvent).stopDefault(),!1},core:{}}:void 0===sps.CommentBox&&(sps.CommentBox={}),void 0===sps.disableForm&&(sps.disableForm=function(oEvent){return commentJ.$Event(oEvent).stopDefault(),!1}),sps.CommentBox.Core=commentJ.$Class({name:"unknown",version:"unknown",message:{},$init:function(){this.name=sps.CommentBox.Core.NAME,this.version=sps.CommentBox.Core.VERSION,this.indexInstance=sps.CommentBox.Core.getInstance().length-1,this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},initialize:function(){this.initializeOnly(),this.list("page",1)},initializeOnly:function(){this.saveInstanceInConfig(),this.config.option("initialized",!0),this.config.instance.util.getUrlList(),this.config.instance.util.getTicketConfig();var elBody=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body")));this.config.option("useSpan")&&elBody.addClass(this.config.css("bodySpan"));var jsonFormation={};jsonFormation.count=this.config.instance.ui.makeCountArea(),jsonFormation.page=this.config.instance.ui.makePaginationArea(),jsonFormation.write=this.config.instance.ui.makeRootWriteBoxArea(),jsonFormation.list=this.config.instance.ui.makeListArea(),jsonFormation.extra1=this.config.instance.ui.makeExtraArea("extra1"),jsonFormation.extra2=this.config.instance.ui.makeExtraArea("extra2"),jsonFormation.extra3=this.config.instance.ui.makeExtraArea("extra3"),jsonFormation.extra4=this.config.instance.ui.makeExtraArea("extra4"),jsonFormation.extra5=this.config.instance.ui.makeExtraArea("extra5");for(var formation=this.config.option("formation"),i=0;i<formation.length;i++){var part=formation[i];elBody.append(jsonFormation[part])}"object"==typeof this.config.instance.layer&&this.config.instance.layer.make(),this.config.option("iframeId")&&this.config.instance.util.initIframe()},list:function(type,no,async){var params=this.commonParam();params.page_size=this.config.option("pageSize"),"page"==type&&"number"==typeof no&&(params.page_no=no),"comment"==type&&"number"==typeof no&&(params.comment_no=no,params.up_to_date_yn="Y"),null!=this.config.option("landingCommentNo")&&(params.comment_no=this.config.option("landingCommentNo"),params.up_to_date_yn="Y",this.config.option("landingCommentNo",null)),"user"==type&&(params.user_comment="number"==typeof no?no:1,params.up_to_date_yn="Y"),void 0!==this.config.option("viewCategoryId")&&(params.view_category_id=this.config.option("viewCategoryId")),void 0!==this.config.option("currentSortOption")&&(params.sort=this.config.option("currentSortOption")),1==this.config.option("useInnerSvcList")&&0==this.config.option("useInnerSvcShowReply")&&(params.depth=1);var listAsync=!1;"boolean"==typeof async?listAsync=async:"boolean"==typeof this.config.option("listAsync")&&(listAsync=this.config.option("listAsync")),this.config.instance.ajax.call({operation:"list",async:listAsync,onSuccess:commentJ.$Fn(this.config.instance.ui.list,this.config.instance.ui).bind(),param:params})},commonParam:function(){var params={};return params.ticket=this.config.option("ticket"),params.object_id=this.config.option("objectId"),params._ts=(new Date).getTime(),void 0!==this.config.option("lkey")&&(params.lkey=this.config.option("lkey")),params},saveInstanceInConfig:function(){this.config.instance.core=sps.CommentBox.Core.getInstance()[this.indexInstance],this.config.instance.ajax=sps.CommentBox.Ajax.getInstance()[this.indexInstance],this.config.instance.ui=sps.CommentBox.UI.getInstance()[this.indexInstance],this.config.instance.layer=sps.CommentBox.Layer.getInstance()[this.indexInstance],this.config.instance.writebox=sps.CommentBox.WriteBox.getInstance()[this.indexInstance],this.config.instance.util=sps.CommentBox.Util.getInstance()[this.indexInstance],"object"==typeof sps.profile&&(this.config.instance.profile=sps.CommentBox.profile.getInstance()[this.indexInstance]),"object"==typeof sps.score&&(this.config.instance.score=sps.CommentBox.score.getInstance()[this.indexInstance]),"object"==typeof sps.personacon&&(this.config.instance.personacon=sps.CommentBox.personacon.getInstance()[this.indexInstance])}}).extend(commentJ.Component),sps.CommentBox.Core.NAME="sps.CommentBox.Core",sps.CommentBox.Core.VERSION="1.0.0",sps.core=new sps.CommentBox.Core,void 0===sps?sps={CommentBox:{},ajax:{}}:void 0===sps.CommentBox&&(sps.CommentBox={}),sps.CommentBox.Ajax=commentJ.$Class({name:"unknown",version:"unknown",message:{},defaultError:{},error:{create:{}},$init:function(){this.name=sps.CommentBox.Ajax.NAME,this.version=sps.CommentBox.Ajax.VERSION,this.option("handlers",{}),this.option("list","list_comment.nhn"),this.option("create","set_comment.nhn"),this.option("delete","delete_comment.nhn"),this.option("isReport","isreported_comment.nhn"),this.option("report","report_comment.nhn"),this.option("checkEnableSetComment","check_comment_settable.nhn"),this.option("profile","get_profile.nhn"),this.option("profileList","get_profile_list.nhn"),this.option("setProfileType","set_profile_type.nhn"),this.option("isLogin","is_logged_in.nhn"),this.option("vote","vote_comment.nhn"),this.option("authorRecommend","recommend_comment.nhn"),this.option("replyList","list_reply_comment.nhn"),this.option("snsAuthStatus","get_sns_auth_status.nhn"),this.option("ticketConfig","get_ticket_config.nhn"),this.option("urlList","get_url_list.nhn"),this.indexInstance=sps.CommentBox.Ajax.getInstance().length-1,this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},call:function(options){var handler=this.option("handlers");delete handler[options.operation],handler[options.operation]=options.onSuccess;var url=this.config.option("serviceAddress")+this.option(options.operation);commentJ.$Ajax(url,{method:this.config.option("method")||"post",async:!!options.async&&options.async,onload:commentJ.$Fn(this.onSuccess,this).bind(options.operation),onerror:commentJ.$Fn(this.onError,this).bind(options.errorMessage)}).request(options.param||{})},onSuccess:function(type,result){var message=result.json();0==this.errorHandler(message,this.error[type])&&(0,this.option("handlers")[type])(message)},onError:function(message,result){message&&alert(message)},callSync:function(operation,params){var url=this.config.option("serviceAddress")+this.option(operation),context={success:void 0,response:void 0};if((commentJ.$Ajax(url,{method:this.config.option("method")||"post",async:!1,onload:commentJ.$Fn(this.onSuccessSync,this).bind(context),onerror:commentJ.$Fn(this.onErrorSync,this).bind(context)}).request(params),context.success)&&0==this.errorHandler(context.response,this.error[operation]))return context.response},onSuccessSync:function(context,response){context.success=!0,context.response=response.json()},onErrorSync:function(context,response){context.success=!1},errorHandler:function(message,errorhandler){if(!message.error)return-1;var error=message.error;error.no&&"0"!=error.no&&("-1"==error.no?alert(this.config.message.UNAVAILABLE_OPERATION):errorhandler&&errorhandler[error.no]?commentJ.$Fn(errorhandler[error.no],this).bind()(message):this.defaultError&&this.defaultError[error.no]?commentJ.$Fn(this.defaultError[error.no],this).bind(message)():alert(error.message));return Number(error.no)}}).extend(commentJ.Component),sps.CommentBox.Ajax.prototype.error.create[409019]=function(message){for(var words=[],prohibit_words=message.error.arguments[0],i=0;i<prohibit_words.length;i++)words[i]=encodeURIComponent(prohibit_words[i].word);var pw_word=words.join(","),type="1";"검색어뷰징/도배"==prohibit_words[0].reason&&(type="2");var params=new commentJ.$H({type:type,pw_word:pw_word}).toQueryString(),url=this.config.option("pwBlockUrl")+"?"+params;if(!this.config.instance.util.popUp(url,"abuseError",410,342)){for(i=0;i<prohibit_words.length;i++)words[i]=prohibit_words[i].word;pw_words=words.join(","),"1"==type?alert(commentJ.$Template(this.config.message.CREATE_ERROR_PWORD_BLOCK).process({pwords:pw_words})):alert(commentJ.$Template(this.config.message.CREATE_ERROR_PWORD_ABUSING).process({pwords:pw_words}))}},sps.CommentBox.Ajax.prototype.defaultError[403101]=function(message){alert(message.error.message),this.config.option("isLogin",!1),this.config.instance.ui.resetPage()},sps.CommentBox.Ajax.NAME="sps.CommentBox.Ajax",sps.CommentBox.Ajax.VERSION="1.0",sps.ajax=new sps.CommentBox.Ajax,void 0===sps?sps={CommentBox:{}}:void 0===sps.CommentBox&&(sps.CommentBox={}),sps.CommentBox.Comment=commentJ.$Class({name:"unknown",version:"unknown",message:{},$init:function(htOptions){this.name=sps.CommentBox.Comment.NAME,this.version=sps.CommentBox.Comment.VERSION,this.indexInstance=htOptions.indexInstance,this.config=sps.CommentBox.Config.getInstance()[this.indexInstance];for(var values=this.config.option("comment"),convention=this.config.option("convention"),booleans=this.config.option("booleans"),i=0;i<values.length;i++){var key=convention[values[i]];void 0===key&&(key=values[i]);var value=htOptions[key];booleans[values[i]]&&(value="Y"==value),this.option(values[i],value)}this.option("config",this.config)},deleteCommand:function(){if(!confirm(this.config.message.DELETE_CONFIRM))return!1;var params={};params.ticket=this.config.option("ticket"),params.object_id=this.config.option("objectId"),params.comment_no=this.option("commentNo"),null==this.config.instance.ui.option("currentPageNo")?params.page_no=1:params.page_no=this.config.instance.ui.option("currentPageNo"),params.page_size=this.config.option("pageSize"),void 0!==this.config.option("currentSortOption")&&(params.sort=this.config.option("currentSortOption")),void 0!==this.config.option("viewCategoryId")&&(params.view_category_id=this.config.option("viewCategoryId")),this.config.instance.ajax.call({operation:"delete",onSuccess:commentJ.$Fn(this.config.instance.ui.list,this.config.instance.ui).bind(),param:params})},reportCommand:function(){var params={};params.ticket=this.config.option("ticket"),params.object_id=this.config.option("objectId"),params.comment_no=this.option("commentNo");var response=this.config.instance.ajax.callSync("isReport",params);if(response)if(0===response.reported_yn){var url=this.config.option("pwReportUrl");0<(params=commentJ.$H(params)).length()&&(url+="?"+params.toQueryString()),this.config.instance.util.popUp(url,"report",531,533)}else alert(this.config.message.ALREADY_REPORT)},replyCommand:function(e){var objList=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))).query(this.config.element("list")+" ul"),elList=commentJ.$Element(objList),objReplyPosition=elList.query(".comment_no_"+this.option("commentNo")+" ul"),elReplyPosition=commentJ.$Element(objReplyPosition),elWriteBox=this.config.instance.writebox.createReplyWrite(elReplyPosition,this.option("commentNo"),null),objReplyCommand=elList.query(".comment_no_"+this.option("commentNo")+" .reply"),elReplyCommand=commentJ.$Element(objReplyCommand),sReplyCancelCommand=this.config.template("replyCancelCommand").process(this.option()),elReplyCancelCommand=commentJ.$Element(sReplyCancelCommand);elReplyCancelCommand.addClass("reply_cancel"),commentJ.$Fn(function(oEvent){var event=commentJ.$Event(oEvent);return elWriteBox.leave(),this.replyCancelCommand(oEvent),event.stopDefault(),!1},this).attach(elReplyCancelCommand,"click"),elReplyCommand.before(elReplyCancelCommand),elReplyCommand.leave(),commentJ.$Element(elReplyCancelCommand.query("a")).$value().focus()},replyCancelCommand:function(e){var objList=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))).query(this.config.element("list")+" ul"),sReplyCancelCommand=commentJ.$Element(objList).query(".comment_no_"+this.option("commentNo")+" .reply_cancel"),elReplyCancelCommand=commentJ.$Element(sReplyCancelCommand),objReplyCommand=this.config.template("replyCommand").process(this.option()),elReplyCommand=commentJ.$Element(objReplyCommand);elReplyCommand.addClass("reply"),commentJ.$Fn(function(oEvent){var event=commentJ.$Event(oEvent);return this.replyCommand(oEvent),event.stopDefault(),!1},this).attach(elReplyCommand,"click"),elReplyCancelCommand.before(elReplyCommand),elReplyCancelCommand.leave(),commentJ.$Element(elReplyCommand.query("a")).$value().focus()},recommendCommand:function(){this.vote("recommend")},discommendCommand:function(){this.vote("discommend")},vote:function(operation){var params={};params.ticket=this.config.option("ticket"),params.object_id=this.config.option("objectId"),params.comment_no=this.option("commentNo"),params.use_recommend_cancelable_api=!0,params.useRecommendResult=this.config.option("useRecommendResult"),params.recommend_up_yn="recommend"==operation?"Y":"N",this.config.instance.ajax.call({operation:"vote",onSuccess:commentJ.$Fn(this.processVote,this).bind(operation),param:params})},processVote:function(operation,result){"N"==result.recommend_new_yn?this._voteCancelSuccess(operation,result.comment_no):this._voteSuccess(operation,result.comment_no)},_voteSuccess:function(operation,commentNo){sClassName="recommend"==operation?(alert(this.config.message.RECOMMEND_COMPLETE),this.config.element("recommend")):(alert(this.config.message.DISCOMMEND_COMPLETE),this.config.element("discommend"));var el=commentJ.$$.getSingle("li.comment_no_"+commentNo+" span"+sClassName+" > span"),elBest=commentJ.$$.getSingle("li.recommend_comment_no_"+commentNo+" span"+sClassName+" > span");this._updateVoteCount(el,1),this._updateVoteCount(elBest,1)},_voteCancelSuccess:function(operation,commentNo){var sClassName;sClassName="recommend"==operation?(alert(this.config.message.RECOMMEND_CANCEL),this.config.element("recommend")):(alert(this.config.message.DISCOMMEND_CANCEL),this.config.element("discommend"));var el=commentJ.$$.getSingle("li.comment_no_"+commentNo+" span"+sClassName+" > span"),elBest=commentJ.$$.getSingle("li.recommend_comment_no_"+commentNo+" span"+sClassName+" > span");this._updateVoteCount(el,-1),this._updateVoteCount(elBest,-1)},_updateVoteCount:function(el,countOffset){if(null!=el){var wel=commentJ.$Element(el),nCount=parseInt(wel.text())+countOffset;wel.addClass("on").text(nCount)}},authorCommand:function(){this.authorRecommend("recommend")},authorCancelCommand:function(){this.authorRecommend("discommend")},authorRecommend:function(operation){var params={};params.ticket=this.config.option("ticket"),params.object_id=this.config.option("objectId"),params.comment_no=this.option("commentNo"),params.recommend_yn="recommend"==operation?"Y":"N",this.config.instance.ajax.call({operation:"authorRecommend",onSuccess:commentJ.$Fn(this.processAuthorRecommend,this).bind(operation),param:params})},processAuthorRecommend:function(operation,result){this.config.instance.core.list("page",this.config.instance.ui.option("currentPageNo")),"recommend"==operation?alert(this.config.message.AUTHOR_RECOMMEND_COMPLETE):alert(this.config.message.AUTHOR_DISCOMMEND_COMPLETE)},_command:function(){for(var commands=this.config.option("commands"),maxDepth=this.config.option("maxDepth"),replyLevel=this.option("replyLevel"),elRoot=commentJ.$Element("<div></div>"),expressedCommendCount=0,expressedCommend="",i=0;i<commands.length;i++){var operation=commands[i];if(!this.config.option("isDeleted")&&!(7<=this.option("status")&&this.option("status")<=9&&"delete"!=operation)){if(this.config.option("useReplyArea")&&replyLevel>this.config.option("maxReplyAreaDepth"))if(!commentJ.$A(this.config.option("allowCommandsAtReplyArea")).has(operation))continue;if("reply"==operation){if(maxDepth<=replyLevel)continue;if(this.option("isRecommendArea"))continue}"author"==operation&&this.option("isAuthorRecommend")&&(operation="authorCancel");var text=this.config.template(operation+"Command").process(this.option());if(""!=text){var elCommand=commentJ.$Element(text);if(0==expressedCommendCount)elCommand.addClass(this.config.css("firstCommand"));else if(0<expressedCommendCount){commentJ.$A(this.config.option("nobarInCommandGroup")).has(expressedCommend)&&elCommand.removeClass(this.config.css("noBarOnCommend"))}if("recommend"==operation&&0<this.option("upCount")||"discommend"==operation&&0<this.option("downCount")){var objRecommendCount=elCommand.query(this.config.element("recommendCount")),elRecommendCount=commentJ.$Element(objRecommendCount);elRecommendCount.addClass(this.config.css("recommendCountOn")),"recommend"==operation?elRecommendCount.text(this.option("upCount")):"discommend"==operation&&elRecommendCount.text(this.option("downCount"))}if(elCommand.addClass(operation),"function"==typeof this[operation+"Command"]){var oFn=commentJ.$Fn(function(op,oEvent){var event=commentJ.$Event(oEvent);event.element;return this.config.instance.util.redirectLogin(oEvent)&&this[op+"Command"](oEvent),event.stopDefault(),!1},this).bind(operation);commentJ.$Fn(oFn).attach(elCommand,"click")}null!=elCommand&&(elRoot.append(elCommand),expressedCommend=operation,expressedCommendCount++)}}}return elRoot.child()},build:function(){var tplComment="",isStopCommentMaking=!1;this.option("isDeleted")?(tplComment=this.config.template("deleteComment"),isStopCommentMaking=!0):7<=this.option("status")&&this.option("status")<=9?(tplComment=this.config.template("blockComment"),isStopCommentMaking=!0):tplComment=this.config.template("comment");var sComment=tplComment.process(this.option()),elComment=commentJ.$Element(sComment),objCommentText=elComment.query(this.config.element("commentText")),elCommentText=commentJ.$Element(objCommentText);"safari"==this.config.option("browser")&&elCommentText.css("font-family",this.config.option("replaceErrorFontFamily"));var elCommands=elComment.query(this.config.element("commands")),commands=this._command();if(null!=elCommands){elCommands=commentJ.$Element(elCommands);for(var i=0;i<commands.length;i++)elCommands.append(commands[i])}return isStopCommentMaking||(this.config.option("useScore")?elComment=this.config.instance.score.addScoreToComment(elComment,this.option()):this.config.option("useProfile")&&(elComment=this.config.instance.profile.addProfileToComment(elComment,this.option())),(this.option("isUserRecommend")||this.option("isAuthorRecommend"))&&(elComment=this.config.instance.ui.addRecommendTag(elComment,this.option())),this.option("isRecommendArea")&&(elComment=this.config.instance.ui.deckRecommendArea(elComment,this.option())),this.config.option("useMobile")&&this.option("isMobile")&&(elComment=this.config.instance.ui.addMobileIcon(elComment,this.option()))),elComment}}).extend(commentJ.Component),sps.CommentBox.Comment.NAME="sps.CommentBox.Comment",sps.CommentBox.Comment.VERSION="1.0.0",void 0===sps?sps={CommentBox:{}}:void 0===sps.CommentBox&&(sps.CommentBox={}),sps.CommentBox.Layer=commentJ.$Class({name:"unknwon",version:"unknown",$init:function(){this.name=sps.CommentBox.Layer.NAME,this.version=sps.CommentBox.Layer.VERSION,this.indexInstance=sps.CommentBox.Layer.getInstance().length-1,this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},make:function(){var elBody=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body")));this.create();var elProfileLayer=commentJ.$Element(elBody.query(".profileLayer")),elBestInfoLayer=commentJ.$Element(elBody.query(".bestInfoLayer")),elSortOldInfoLayer=commentJ.$Element(elBody.query(".sortOldInfoLayer"));commentJ.$Fn(function(e){null!=elProfileLayer&&1==elProfileLayer.visible()&&this.hideLayer(1),(null!=elBestInfoLayer&&1==elBestInfoLayer.visible()||null!=elSortOldInfoLayer&&1==elSortOldInfoLayer.visible())&&this.hideLayer(1)},this).attach(elBody,"click")},create:function(){for(var elBody=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))),arrLayers=this.config.option("layers"),i=0;i<arrLayers.length;i++){var sLayer=arrLayers[i],text=this.config.template(sLayer+"Layer").process();if(""!=text){var elLayer=commentJ.$Element(text);elLayer.addClass(sLayer+"Layer"),elLayer.hide(),elLayer=this.operate(elLayer);var handler=this[sLayer+"Layer"];if("function"==typeof handler)elLayer=commentJ.$Fn(handler,this).bind()(elLayer);elBody.append(elLayer)}}},operate:function(elLayer){var elButton=commentJ.$Element(elLayer.query(this.config.element("closeButton")));return null==elButton||(commentJ.$Fn(function(e){commentJ.$Event(e).stop(commentJ.$Event.CANCEL_BUBBLE)}).attach(elLayer,"click"),commentJ.$Fn(function(){this.hideLayer(elLayer.attr("tier"))},this).attach(elButton,"click"),commentJ.$Fn(sps.disableForm).attach(elButton,"click"),commentJ.$Fn(function(){elButton.addClass(this.config.css("closeButtonOver"))},this).attach(elButton,"mouseenter"),commentJ.$Fn(function(){elButton.removeClass(this.config.css("closeButtonOver"))},this).attach(elButton,"mouseleave")),elLayer},hideLayer:function(sLayerTier){for(var elBody=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))),elLayerList=commentJ.$ElementList(elBody.queryAll(this.config.element("layer"))),i=0;i<elLayerList.length();i++){var elTempLayer=elLayerList.get(i);sLayerTier<=elTempLayer.attr("tier")&&elTempLayer.hide()}"1"==sLayerTier&&null!=this.config.option("lastEvent")&&this.config.option("lastEvent").focus()},getLayer:function(layerName){var elBody=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))),elLayer=commentJ.$Element(elBody.query("."+layerName+"Layer"));return null==elLayer?null:(this.hideLayer(elLayer.attr("tier")),elLayer)},adjustPosition:function(elSource,elLayer,sAnchorHorizon,sAnchorVertical){if(null==elLayer)return elLayer;var iAnchorHorizon=0,iAnchorVertical=0;return elLayer.show(),"left"==sAnchorHorizon?iAnchorHorizon=elSource.offset().left:"right"==sAnchorHorizon&&(iAnchorHorizon=elSource.offset().left-elLayer.width()+elSource.width()),"top"==sAnchorVertical?iAnchorVertical=elSource.offset().top:"bottom"==sAnchorVertical&&(iAnchorVertical=elSource.offset().top-elLayer.height()+elSource.height()),elLayer.offset(iAnchorVertical,iAnchorHorizon),elLayer},profileLayer:function(elLayer){return 1==this.config.option("isLogin")&&this.config.option("useProfile")&&"object"==typeof this.config.instance.profile&&(elLayer=this.config.instance.profile.makeProfileLayer(elLayer)),elLayer},personaconLayer:function(elLayer){return this.config.option("usePersonacon")&&"object"==typeof this.config.instance.personacon&&(elLayer=this.config.instance.personacon.makePersonaconLayer(elLayer)),elLayer},resetLayer:function(){var elBody=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body")));commentJ.$ElementList(elBody.queryAll(this.config.element("layer"))).leave(),this.make()}}).extend(commentJ.Component),sps.CommentBox.Layer.NAME="sps.CommentBox.Layer",sps.CommentBox.Layer.VERSION="1.0.0",sps.layer=new sps.CommentBox.Layer,void 0===sps?sps={CommentBox:{}}:void 0===sps.CommentBox&&(sps.CommentBox={}),sps.CommentBox.WriteBox=commentJ.$Class({name:"unknwon",version:"unknown",message:{},$init:function(htOptions){this.name=sps.CommentBox.WriteBox.NAME,this.version=sps.CommentBox.WriteBox.VERSION,this.option("isKeyDownLoop",!1),this.option("isTrackingTextCount",!1),this.option("previousText",""),this.indexInstance=sps.CommentBox.WriteBox.getInstance().length-1,this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},create:function(obj){if(!this.config.instance.util.redirectLogin(obj))return!1;var elForm=commentJ.$Element(obj.element.form),welParentCommentNo=commentJ.$Element(elForm.query("input.parentCommentNo")),welBestYn=commentJ.$Element(elForm.query("input.bestYn")),sBestYn="";null!=welBestYn&&(sBestYn=welBestYn.$value().value);var sParentCommentNo=null==welParentCommentNo?this.config.option("parentCommentNo"):welParentCommentNo.$value().value,welTextarea=commentJ.$Element(elForm.query(this.config.element("textarea"))),sText=this.config.instance.util.cancelLineBreaking(welTextarea.$value().value);if(0==(sText=commentJ.$S(sText).trim().$value()).length||this.config.instance.util.compareTextWithoutRetuneChar(sText,this.config.message.DEFAULT_TEXT))return alert(this.config.message.NO_CONTENTS),setTimeout(function(){commentJ.$$.getSingle(".cbox_txt_focus_area").focus()},0),!1;if(void 0===sParentCommentNo&&(sParentCommentNo=0),!this.fireEvent("validate",params))return!1;var params={};if(params.ticket=this.config.option("ticket"),params.object_id=this.config.option("objectId"),params.page_size=this.config.option("pageSize"),params.object_url=this.config.option("objectUrl"),params.contents=sText,params.parent_comment_no=sParentCommentNo,void 0!==this.config.option("lkey")&&(params.lkey=this.config.option("lkey")),this.config.option("useCategory")&&(params.category_id=this.config.option("categoryId"),void 0!==this.config.option("viewCategoryId")&&(params.view_category_id=this.config.option("viewCategoryId"))),this.config.option("useSocialComment")){var welCheckboxArea=commentJ.$Element(elForm.query(this.config.element("snsCheckboxArea")));welCheckboxArea&&(welCheckboxArea.query("input._facebook")&&(params.add_post_facebook=welCheckboxArea.query("input._facebook")._element.checked?"Y":"N"),welCheckboxArea.query("input._twitter")&&(params.add_post_twitter=welCheckboxArea.query("input._twitter")._element.checked?"Y":"N"))}if(this.config.option("useScore")){var objSelect=commentJ.$Element(elForm.query("select"));if(null!=objSelect){if(objSelect=objSelect.$value(),isNaN(objSelect.value))return alert(this.config.message.REQUIRE_SCORE),!1;params.object_score=objSelect.value}}if(this.config.option("useReplyArea")&&(params.reply_page_size=this.config.option("replyPageSize")),this.config.option("usePersonacon")){var objPersonacon=commentJ.$Element(elForm.query(this.config.element("personaconThumbImg")));objPersonacon&&(objPersonacon=objPersonacon.$value(),params.personacon=objPersonacon.src)}this.config.fireEvent("beforeCreate",{text:params.contents,params:params})&&this.config.instance.ajax.call({operation:"create",async:!1,onSuccess:commentJ.$Fn("Y"==sBestYn?this.onCreateBest:this.onCreate,this).bind(),errorMessage:this.config.message.UNAVAILABLE_OPERATION,param:params})},onCreate:function(result){this.resetRootWriteBox(),this.config.instance.layer.resetLayer(),this.config.option("currentSortOption","newest"),this.config.instance.ui.list(result),this.config.fireEvent("afterCreate",{text:result})},onCreateBest:function(result){this.resetRootWriteBox(),this.config.instance.layer.resetLayer(),this.config.instance.score.replyListBest(0,null),this.config.fireEvent("afterCreate",{text:result})},createWriteBox:function(elWriteBoxArea,isRoot){var sWriteBox=this.config.template("writeBox").process({isLogin:this.config.option("isLogin")}),elWriteBox=commentJ.$Element(sWriteBox);if(!isRoot){var sSubNode=this.config.template("subNode").process();elWriteBox.prepend(sSubNode)}if(this.config.option("useSpan")){var objUserArea=elWriteBox.query(this.config.element("userArea")),elUserArea=commentJ.$Element(objUserArea),sSpanWriteBox=this.config.template("spanWriteBox").process(),elSpanWriteBox=commentJ.$Element(sSpanWriteBox);elUserArea.empty(),elUserArea.append(elSpanWriteBox)}elWriteBox.addClass(this.config.css("basicWriteBoxType")),this.config.option("useProfile")&&"object"==typeof this.config.instance.profile&&(elWriteBox=this.config.instance.profile.makeProfileWriteBox(elWriteBox,isRoot)),this.config.option("useScore")&&"object"==typeof this.config.instance.score&&(elWriteBox=this.config.instance.score.addSelectboxInWritebox(elWriteBox)),this.config.option("usePersonacon")&&"object"==typeof this.config.instance.personacon&&(elWriteBox=this.config.instance.personacon.makePersonaconWriteBox(elWriteBox,isRoot));var objTextBox=elWriteBox.query(this.config.element("textarea")),elTextBox=commentJ.$Element(objTextBox);this.addActionToTextArea(elTextBox),"safari"==this.config.option("browser")&&elTextBox.css("font-family",this.config.option("replaceErrorFontFamily")),elTextBox.css("background",this.config.option("offTextboxBackground")),elTextBox.css("color",this.config.option("offTextboxFontColor")),elTextBox.text(this.config.message.DEFAULT_TEXT),elWriteBox=this.createDesc(elWriteBox,isRoot),elWriteBoxArea.append(elWriteBox);var objWriteButton=elWriteBoxArea.query(this.config.element("writeButton")),elWriteButton=commentJ.$Element(objWriteButton);if(!isRoot&&this.config.option("useSpareButtonInReplyWriteBox")){var elParentWriteButton=elWriteButton.parent(),objSpareWriteButton=this.config.template("spareWriteButton").process();elWriteButton.leave(),elWriteButton=commentJ.$Element(objSpareWriteButton),elParentWriteButton.append(elWriteButton)}commentJ.$Fn(this.create,this).attach(elWriteButton,"click");var objWriteForm=commentJ.$Element(elWriteBoxArea.query("form"));return null!=objWriteForm&&(objWriteForm=objWriteForm.$value()),commentJ.$Fn(sps.disableForm).attach(objWriteForm,"submit"),elWriteBoxArea},addActionToTextArea:function(elTextBox){commentJ.$Fn(this.onKeyDownWriteArea,this).attach(elTextBox,"keydown"),commentJ.$Fn(this.onFocusWriteArea,this).attach(elTextBox,"focus"),commentJ.$Fn(this.onMouseDownWriteArea,this).attach(elTextBox,"mousedown"),commentJ.$Fn(this.onBlurWriteArea,this).attach(elTextBox,"blur"),commentJ.$Fn(this.blockContextAction,this).attach(elTextBox,"paste"),commentJ.$Fn(this.blockContextAction,this).attach(elTextBox,"copy")},onKeyDownWriteArea:function(oEvent){if(!this.config.option("isLogin"))return!1;this.option("isKeyDownLoop",!0),this.detectOverMaxLength(oEvent),this.blockCopyAndPasteKey(oEvent)},onMouseDownWriteArea:function(oEvent){if(!this.config.option("isLogin"))return!1},onFocusWriteArea:function(oEvent){this.config.option("isLogin")?this.defaultText(oEvent):this.config.instance.util.redirectLogin(oEvent)},onBlurWriteArea:function(oEvent){this.config.option("isLogin")&&this.defaultText(oEvent),this.option("isKeyDownLoop",!1)},defaultText:function(oEvent){var objTextarea=oEvent.element,elTextarea=commentJ.$Element(objTextarea),text=this.config.instance.util.cancelLineBreaking(elTextarea.text());switch(oEvent.type){case"focus":this.config.instance.util.compareTextWithoutRetuneChar(text,this.config.message.DEFAULT_TEXT)&&(elTextarea.css("background",this.config.option("onTextboxBackground")),elTextarea.css("color",this.config.option("onTextboxFontColor")),elTextarea.text(""));break;case"blur":""==commentJ.$S(text).trim().$value()&&(elTextarea.css("background",this.config.option("offTextboxBackground")),elTextarea.css("color",this.config.option("offTextboxFontColor")),elTextarea.text(this.config.message.DEFAULT_TEXT))}},blockCopyAndPasteKey:function(oEvent){if(this.config.option("useBlockCopyAndPaste")){var woEvent=commentJ.$Event(oEvent),KEYCODE_COPY=67,KEYCODE_PASTE=86;woEvent&&woEvent.key&&(key=woEvent.key())&&key.ctrl&&(KEYCODE_COPY==key.keyCode&&(woEvent.stop(commentJ.$Event.CANCEL_ALL),alert(this.config.message.BLOCK_COPY)),KEYCODE_PASTE==key.keyCode&&(woEvent.stop(commentJ.$Event.CANCEL_ALL),alert(this.config.message.BLOCK_PASTE)))}},blockContextAction:function(oEvent){if(this.config.option("useBlockCopyAndPaste")){var woEvent=commentJ.$Event(oEvent);woEvent&&woEvent.stop&&(woEvent.stop(commentJ.$Event.CANCEL_ALL),"copy"==woEvent.type?alert(this.config.message.BLOCK_COPY):"paste"==woEvent.type&&alert(this.config.message.BLOCK_PASTE))}},detectOverMaxLength:function(oEvent){if(!this.option("isKeyDownLoop"))return!1;var woEvent=commentJ.$Event(oEvent),objTextarea=woEvent.element,elTextarea=commentJ.$Element(objTextarea),text=this.config.instance.util.cancelLineBreaking(elTextarea.text());if(this.config.instance.util.validation(text,1,this.config.option("maximumCommentLength"),!1,!1,this.config.message.EXCEED_MAX_LENGTH)){if(this.option("previousText",elTextarea.text()),this.option("isTrackingTextCount")){var objPresentTextLength=commentJ.$Element(woEvent.element.form).query(".cbox_present_text_length");if(null!=objPresentTextLength)commentJ.$Element(objPresentTextLength).text(text.length)}}else elTextarea.text(this.option("previousText"));setTimeout(commentJ.$Fn(this.detectOverMaxLength,this).bind(oEvent),100)},createSubNode:function(){var elLi=commentJ.$Element("<li>");return elLi.addClass(this.config.css("thumbOff")),elLi},createDesc:function(elWriteBox,isRoot){var sDescs=this.config.element("descs");if(void 0===sDescs)return elWriteBox;var elDescs=commentJ.$Element(elWriteBox.query(sDescs));if(!isRoot&&this.config.option("isDescInOnlyRoot"))return elDescs.leave(),elWriteBox;for(var arrDescs=this.config.option("descs"),i=0;i<arrDescs.length;i++){var sDesc=arrDescs[i],htSocialComment={};if("socialComment"==sDesc){if(!this.config.option("useSocialComment"))continue;htSocialComment=this.config.instance.util.getSnsAuthStatus();var htSocialConfig=this.config.option("social");if(this.config.option("useSocialComment",htSocialConfig.active),0==htSocialConfig.active)continue;if(0==isRoot&&0==htSocialConfig.reply_active)continue;htSocialComment.level=isRoot?1:2}var text=this.config.template(sDesc+"Desc").process(htSocialComment);if(""!=text){var elDesc=commentJ.$Element(text),handler=this[sDesc+"Desc"];if("function"==typeof handler)elDesc=commentJ.$Fn(handler,this).bind()(elDesc);elDescs.append(elDesc)}}return 0==elDescs.child().length&&elDescs.leave(),elWriteBox},policyDesc:function(elDesc){var objPolicy=elDesc.query("a"),elPolicy=commentJ.$Element(objPolicy);return commentJ.$Fn(function(){}).attach(elPolicy,"click"),commentJ.$Fn(sps.disableForm).attach(elPolicy,"click"),elDesc},socialCommentDesc:function(welDesc){var aSnsCheckbox=welDesc.queryAll("input");return commentJ.$Fn(function(oCustomEvent){if(!this.config.option("isLogin"))return this.config.instance.util.redirectLogin(oCustomEvent),void oCustomEvent.stop();var wel=commentJ.$Element(oCustomEvent.element);if("input"==wel.tag.toLowerCase()&&(wel=commentJ.$Element(wel.next())),wel.hasClass("off")){var sSnsName=wel.attr("for").match(/(\w+)_\d+/)[1],sSvcUrl=this.config.option("urlList").social.afterSocialAuth.replace(/{SOCIAL_PROVIDER}/,sSnsName),whtParams=commentJ.$H({servicekey:"COMMON_COMMENT",type:sSnsName,viewtype:1,svcurl:sSvcUrl}),sPopupUrl=this.config.option("socialAuthUrl")+whtParams.toQueryString();this.config.instance.util.popUp(sPopupUrl,"socialComment",400,350),oCustomEvent.stopDefault()}},this).attach(aSnsCheckbox,"click"),commentJ.$Fn(function(oCustomEvent){oCustomEvent.element.href=this.config.option("nidManageSocialAuthUrl"),oCustomEvent.element.target="_blank"},this).attach(welDesc.query("a.set"),"click"),this.config.attach("afterSocialAuth",commentJ.$Fn(this._changeSnsCheckBoxIcon,this).bind()),welDesc},_changeSnsCheckBoxIcon:function(oOption){var sSnsName=oOption.sns,elCheckbox=commentJ.$$.getSingle(".cbox_sns > input._"+sSnsName),elLabel=commentJ.$Element(elCheckbox).next();elCheckbox.checked=!0,commentJ.$Element(elLabel).removeClass("off")},textCountDesc:function(elDesc){this.option("isTrackingTextCount",!0);var objTotalTextLength=elDesc.query(".cbox_total_text_length");return commentJ.$Element(objTotalTextLength).text(this.config.option("maximumCommentLength")),elDesc},resetRootWriteBox:function(){var objRootSelecter=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))).query(this.config.element("writeboxRoot")),elRootSelecter=commentJ.$Element(objRootSelecter);return elRootSelecter.empty(),this.createWriteBox(elRootSelecter,!0),elRootSelecter},createReplyWrite:function(elParent,parentCommentNo,bestYn){var elLi=this.createSubNode();elLi.addClass(this.config.css("thumbOff"));var elWriteBox=this.createWriteBox(elLi,!1);this.config.option("isReplyWriteBoxPositionOnBottom")?elParent.append(elWriteBox):elParent.prepend(elWriteBox),this.config.option("useProfile")&&"object"==typeof this.config.instance.profile&&this.config.instance.profile.adjustZindex(),this.config.option("usePersonacon")&&"object"==typeof this.config.instance.personacon&&this.config.instance.personacon.adjustZindex();var elWriteForm=commentJ.$Element(elWriteBox.query("form")),elParentCommentNo=commentJ.$Element("<input>");elParentCommentNo.attr("type","hidden"),elParentCommentNo.addClass("parentCommentNo"),elParentCommentNo.text(parentCommentNo),elWriteForm.append(elParentCommentNo),bestYn||(bestYn="");var elBestYn=commentJ.$Element("<input>");return elBestYn.attr("type","hidden"),elBestYn.addClass("bestYn"),elBestYn.text(bestYn),elWriteForm.append(elBestYn),elWriteBox}}).extend(commentJ.Component),sps.CommentBox.WriteBox.NAME="sps.CommentBox.WriteBox",sps.CommentBox.WriteBox.VERSION="1.0.0",sps.writebox=new sps.CommentBox.WriteBox,void 0===sps?sps={CommentBox:{}}:void 0===sps.CommentBox&&(sps.CommentBox={}),sps.CommentBox.Util=commentJ.$Class({name:"unknwon",version:"unknown",$init:function(){this.name=sps.CommentBox.Util.NAME,this.version=sps.CommentBox.Util.VERSION,this.indexInstance=sps.CommentBox.Util.getInstance().length-1,this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},popUp:function(url,name,width,height){var popup=window.open(url,name,"width="+width+",height="+height+",status=no,left=0,top=0");if(popup)return popup.focus(),popup},parseQueryString:function(rawString){var result={},string=decodeURI(rawString);if(string)for(var values=string.split(/&/),i=0;i<values.length;i++){var pair=values[i].split(/\=/);result[pair[0]]=pair[1]}return result},multiLine:function(text){return text=text.split(/\r/).join(""),text=this.config.option("enableMultiLine")?text.split(/\n/).join("<br/>"):text.split(/\n/).join(" ")},validation:function(contents,min,max,emptyError,minError,maxError){return contents=commentJ.$S(contents).trim().$value(),contents=this.cancelLineBreaking(contents),emptyError&&0===contents.length?(alert(emptyError),!1):minError&&contents.length<min?(alert(commentJ.$Template(minError).process({min:escape(min.toString())})),!1):!(maxError&&contents.length>max)||(alert(commentJ.$Template(maxError).process({max:escape(max.toString())})),!1)},lineBreaking:function(text){if(void 0!==document.body.style.wordWrap)return text;if(!this.config.option("useLineBreaking8203"))return text;var result=this.cancelLineBreaking(text);return result=(result=result.replace(/(\s)+/g,"$1")).split("").join(String.fromCharCode(8203))},cancelLineBreaking:function(text){var result=text;return result=result.split(String.fromCharCode(8203)).join("")},redirectLogin:function(oEvent){if(this.config.option("isLogin"))return!0;if(this.isLogin(!1))return this.config.instance.ui.resetPage(),!0;null!=oEvent&&commentJ.$Event(oEvent).element.blur();if(confirm(this.config.message.NOT_LOGIN))if(this.config.option("useLoginPopup")){var url="https://nid.naver.com/nidlogin.login?svctype=64&url="+encodeURIComponent(this.config.option("loginCallbackUrl")),left=Math.ceil((window.screen.width-400)/2),top=Math.ceil((window.screen.height-348)/2);window.open(url,"naver_login","toolbar=0,menubar=0,resizable=yes,scrollbars=no,width=400,height=348,left="+left+",top="+top)}else window.top.location="https://nid.naver.com/nidlogin.login?mode=form&url="+encodeURIComponent(this.config.option("objectUrl"));else setTimeout(function(){null!=commentJ.$$.getSingle(".cbox_btn_area")&&commentJ.$$.getSingle(".cbox_btn_area").focus()},0);return!1},isLogin:function(isPopMessage){var params={};return params.ticket=this.config.option("ticket"),this.config.instance.ajax.call({operation:"isLogin",async:!1,onSuccess:commentJ.$Fn(function(result){"Y"==result.is_logged_in?this.config.option("isLogin",!0):(this.config.option("isLogin",!1),isPopMessage&&alert(this.config.message.NEED_LOGIN))},this).bind(),param:params}),this.config.option("isLogin")},profilePopUp:function(commentNo,profileType){var params={};if(params.ticket=this.config.option("ticket"),""==!commentNo)params.comment_no=commentNo;else if(""==!profileType){if(!this.isLogin(!0))return this.config.instance.ui.resetPage(),!1;params.profile_type=profileType}var url=this.config.option("profileHome")+"?"+commentJ.$H(params).toQueryString();window.open(url,"_blank")},compareTextWithoutRetuneChar:function(paramText1,paramText2){var sText1=paramText1,sText2=paramText2;return(sText1=(sText1=sText1.replace(/\r/g,"")).replace(/\n/g,""))==(sText2=(sText2=sText2.replace(/\r/g,"")).replace(/\n/g,""))},initIframe:function(){this.resizeIframe();var fnResize=commentJ.$Fn(this.resizeIframe,this).bind();this.config.attach("afterList",fnResize)},resizeIframe:function(){if(this.config.option("iframeId")){var iframe=parent.document.getElementById(this.config.option("iframeId"));if(iframe){var elBody=commentJ.$Element(commentJ.$$.getSingle("body"));0<elBody.height()&&(iframe.style.height=elBody.height()+"px")}}},getSnsAuthStatus:function(){if(!this.config.option("isLogin"))return{};if(0==commentJ.$H(this.config.option("snsAuthStatus")).length()){var params={};params.ticket=this.config.option("ticket"),this.config.instance.ajax.call({operation:"snsAuthStatus",async:!1,onSuccess:commentJ.$Fn(function(result){result.sns_auth_status&&this.config.option("snsAuthStatus",result.sns_auth_status)},this).bind(),param:params})}return this.config.option("snsAuthStatus")},getTicketConfig:function(){var params={};params.ticket=this.config.option("ticket"),this.config.instance.ajax.call({operation:"ticketConfig",async:!1,onSuccess:commentJ.$Fn(function(result){this.config.option("social",result.social)},this).bind(),param:params})},getUrlList:function(){return 0==commentJ.$H(this.config.option("urlList")).length()&&this.config.instance.ajax.call({operation:"urlList",async:!1,onSuccess:commentJ.$Fn(function(result){this.config.option("urlList",result.url_list)},this).bind()}),this.config.option("urlList")}}).extend(commentJ.Component),sps.CommentBox.Util.NAME="sps.CommentBox.Util",sps.CommentBox.Util.VERSION="1.0.0",sps.util=new sps.CommentBox.Util,void 0===sps?sps={CommentBox:{},ui:{}}:void 0===sps.CommentBox&&(sps.CommentBox={}),sps.CommentBox.UI=commentJ.$Class({name:"unknown",version:"unknown",$init:function(){this.name=sps.CommentBox.UI.NAME,this.version=sps.CommentBox.UI.VERSION,this.rowMessage,this._htSortTypeNameList=commentJ.$H({newest:"최신순",oldest:"등록순",recommend:"공감순"}),this.option("list",{}),this.option("oMessage",{}),this.indexInstance=sps.CommentBox.UI.getInstance().length-1,this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},list:function(oMessage){this.resetSortArea(oMessage.total_count),this.option("oMessage",oMessage);var commentList=oMessage.comment_list,recommendList=oMessage.recommended_list,replyMessage=oMessage.reply_lists[0];this.config.fireEvent("beforeList",{text:oMessage});var elBody=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body")));if(this.config.option("useScore")){var objRawList=elBody.query(this.config.element("list"));commentJ.$Element(objRawList).addClass(this.config.css("scoreList"))}var objList=elBody.query(this.config.element("list")+" ul"),elList=commentJ.$Element(objList);if(1!=this.config.option("useSortArea")&&1==this.config.option("useFocus")&&elList.attr("id",this.config.element("focusTarget")),elList.empty(),this.config.option("useRecommendArea")&&1==oMessage.page_no)for(var nRecommendIndex=0;nRecommendIndex<recommendList.length;nRecommendIndex++){var oRawRecommend=this.preprocessing(recommendList[nRecommendIndex]);oRawRecommend.parent_comment_no=0,oRawRecommend.reply_level=1,oRawRecommend.is_author=oMessage.author_yn,oRawRecommend.is_recommend_area="Y",oRawRecommend.indexInstance=this.indexInstance;var elRecommend=new sps.CommentBox.Comment(oRawRecommend).build();elRecommend.addClass("cbox_best_comment"),elList.append(elRecommend)}if(1==this.config.option("useInnerSvcList")){for(var moreCount=Number(this.config.option("innerSvcListSize"))-oMessage.recommended_list.length,moreCountTemp=0,nCommentIndex=0;nCommentIndex<commentList.length&&!(moreCount<=moreCountTemp);nCommentIndex++)if(this._notExistBestComment(commentList[nCommentIndex].comment_no,commentList[nCommentIndex].parent_comment_no,oMessage.recommended_list)){(oRawComment=this.preprocessing(commentList[nCommentIndex])).is_author=oMessage.author_yn,oRawComment.isSocialLinkOpen=this.config.option("social").link_open,oRawComment.isSocialReplyActive=this.config.option("social").reply_active,oRawComment.indexInstance=this.indexInstance;var elComment=new sps.CommentBox.Comment(oRawComment).build();this.seekParentElement(oRawComment).append(elComment),moreCountTemp++}}else for(nCommentIndex=0;nCommentIndex<commentList.length;nCommentIndex++){var oRawComment;(oRawComment=this.preprocessing(commentList[nCommentIndex])).is_author=oMessage.author_yn,oRawComment.isSocialLinkOpen=this.config.option("social").link_open,oRawComment.isSocialReplyActive=this.config.option("social").reply_active,oRawComment.indexInstance=this.indexInstance;elComment=new sps.CommentBox.Comment(oRawComment).build();this.seekParentElement(oRawComment).append(elComment)}"object"==typeof replyMessage&&"object"==typeof this.config.instance.score&&this.config.option("useReplyArea")&&0<replyMessage.parent_comment_no&&this.config.instance.score.displayReplyList(oMessage),this.updateCount(oMessage),this.spotLight(oMessage.comment_no),this.paginate(oMessage),this.config.fireEvent("afterList",{text:oMessage})},setFocusList:function(){if(1==this.config.option("useFocus")){var thisTop=0;parent!==self&&null!=this.config.option("iframeId")&&(thisTop=commentJ.$Element(parent.document.getElementById(this.config.option("iframeId"))).offset().top),parent.scrollTo(0,thisTop+commentJ.$Element(this.config.element("focusTarget")).offset().top)}},_notExistBestComment:function(sCommentNo,sParentCommentNo,sRecommendedList){var rtrnVal=!0;for(var idx in sRecommendedList)if(sCommentNo==sRecommendedList[idx].comment_no||sParentCommentNo==sRecommendedList[idx].comment_no){rtrnVal=!1;break}return rtrnVal},updateCount:function(oMessage){var totalCount=oMessage.total_count,score=oMessage.score,objCountArea=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))).query(this.config.element("countArea")),elCountArea=commentJ.$Element(objCountArea);if(elCountArea.empty(),void 0!==score.average&&void 0!==score.sum&&void 0!==score.count){var objCountDetail=this.config.template("countDetail").process({score:oMessage.score}),elCountDetail=commentJ.$Element(objCountDetail);elCountArea.append(elCountDetail)}else{var objCountSimple=this.config.template("countSimple").process({count:totalCount}),elCountSimple=commentJ.$Element(objCountSimple);elCountArea.append(elCountSimple)}if(this.config.option("useCountUnderBar")){var objCountBar=elCountArea.query("h5");if(null!=objCountBar)commentJ.$Element(objCountBar).addClass(this.config.css("countUnderBar"))}},seekParentElement:function(oOption){var objList=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))).query(this.config.element("list")+" ul"),elList=commentJ.$Element(objList),nReplyLevel=Number(oOption.reply_level),nParentCommentNo=Number(oOption.parent_comment_no),returnElement=elList;if(0<nParentCommentNo&&1<nReplyLevel){var objReplyPosition=elList.query(".comment_no_"+nParentCommentNo+" ul"),elReplyPosition=commentJ.$Element(objReplyPosition);if(null==elReplyPosition){var elDummyReplyPosition=elList.query(".dummy_comment_no_"+(nReplyLevel-1)+" ul");if(null==(elDummyReplyPosition=commentJ.$Element(elDummyReplyPosition))){for(var elDummy,elTarget,i=1;i<nReplyLevel;i++){var elLi=commentJ.$Element("<li>");elLi.addClass(this.config.css("thumbOff")),elLi.addClass("dummy_comment_no_"+(nReplyLevel-i));var elUl=commentJ.$Element("<ul>");1==i?elTarget=elUl:elUl.append(elDummy),elLi.append(elUl),elDummy=elLi}elList.append(elDummy),returnElement=elTarget}else returnElement=elDummyReplyPosition}else returnElement=elReplyPosition}return returnElement},paginate:function(oMessage){var objPaginate=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))).query(this.config.element("paginate"));if(null==objPaginate)return!1;var elPaginate=commentJ.$Element(objPaginate);elPaginate.html(""),this.option("currentPageNo",oMessage.page_no);var nCurrent=this.option("currentPageNo"),nStart=0,nEnd=0,nLast=Math.ceil(oMessage.total_count/this.config.option("pageSize")),nPageCount=this.config.option("paginateSize");if(this.config.option("centerPaginate")){var nLeadSize=Math.floor(nPageCount/2);nEnd=(nStart=Math.max(nCurrent-nLeadSize,1))+nPageCount-1}else{var nPrevious=nCurrent-(nCurrent%nPageCount==0?nPageCount:nCurrent%nPageCount);nStart=nPrevious+1,nEnd=nPrevious+nPageCount}if(nEnd=Math.max(nStart,nEnd),nEnd=Math.min(nEnd,nLast),elPaginate.append(commentJ.$Element(this.config.template("pageInfoText").process())),1<nStart){var elFirstPage=this._buildPage(1,"firstPage"),elPrevPage=this._buildPage(nStart-1,"prevPage");null!=elFirstPage&&(elPaginate.append(elFirstPage),elPaginate.append(document.createTextNode("\n"))),null!=elPrevPage&&(elPaginate.append(elPrevPage),elPaginate.append(document.createTextNode("\n")))}for(var nPage=nStart;nPage<=nEnd;nPage++){var elPage;null!=(elPage=nPage==nCurrent?this._buildPage(nPage,"currentPage"):this._buildPage(nPage,"page"))&&(elPaginate.append(elPage),elPaginate.append(document.createTextNode("\n")))}if(nEnd<nLast){var elNextPage=this._buildPage(nEnd+1,"nextPage");null!=elNextPage&&(elPaginate.append(elNextPage),elPaginate.append(document.createTextNode("\n")));var elLastPage=this._buildPage(nLast,"lastPage");elPaginate.append(elLastPage)}},_buildPage:function(nPage,sTplName){var sPage=this.config.template(sTplName).process({page:nPage}),elPage=commentJ.$Element(sPage);return commentJ.$Fn(commentJ.$Fn(this.config.instance.core.list,this.config.instance.core).bind("page",nPage,null)).attach(elPage,"click"),commentJ.$Fn(sps.disableForm).attach(elPage,"click"),this.config.option("useFocus")&&commentJ.$Fn(commentJ.$Fn(this.setFocusList,this)).attach(elPage,"click"),elPage},preprocessing:function(oComment){return oComment.done_preprocessing||(oComment.registered_ymdt=this.dateFormat(oComment.registered_ymdt),oComment.modified_ymdt=this.dateFormat(oComment.modified_ymdt),"firefox"!=this.config.option("browser")&&"opera"!=this.config.option("browser")||(oComment.contents=this.config.instance.util.lineBreaking(oComment.contents)),this.config.option("useEscapeHtml")&&(oComment.contents=oComment.contents.replace("\x3c!-- Not Allowed Tag Filtered --\x3e",""),oComment.contents=commentJ.$S(oComment.contents).unescapeHTML().escapeHTML().$value()),oComment.contents=this.config.instance.util.multiLine(oComment.contents),oComment.done_preprocessing=!0),oComment},dateFormat:function(date){var datetime=date.split(/\+/);if(1<(datetime=datetime[0].split(/T/)).length){var ymd=datetime[0].split(/-/),his=datetime[1].split(/:/),year=ymd[0],month=ymd[1],dayOfMonth=ymd[2],time=his[0],minute=his[1],second=his[2].split(/\./),milli=second[1];second=second[0],year=Number(year),month=Number(month)-1;var day=Number(dayOfMonth);return time=Number(time),minute=Number(minute),second=Number(second),commentJ.$Date(year,month,day,time,minute,second,milli).format(this.config.option("dateFormat"))}return datetime[0]},resetList:function(){var oMessage=this.option("oMessage"),commentNo=oMessage.comment_no,pageNo=oMessage.page_no;0<commentNo?commentJ.$Fn(this.config.instance.core.list,this.config.instance.core).bind("comment",commentNo,!1)():commentJ.$Fn(this.config.instance.core.list,this.config.instance.core).bind("page",pageNo,!1)(),this.config.instance.layer.resetLayer()},resetPage:function(){this.config.instance.writebox.resetRootWriteBox(),this.resetList()},spotLight:function(commentNo){if(0!=commentNo&&null!=commentNo&&0!=this.config.option("enableSpotLight")){var objComment=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))).query(".comment_no_"+commentNo+" "+this.config.element("commentBody"));if(null!=objComment){var elComment=commentJ.$Element(objComment),sCssSpotLight=this.config.css("spotLight");elComment.addClass(sCssSpotLight),(new commentJ.Transition).fps(30).attach({end:function(){elComment.removeClass(sCssSpotLight),elComment.$value().style.backgroundColor=""}}).start(1500,elComment.$value(),{"@backgroundColor":commentJ.Effect.linear(elComment.css("backgroundColor"),"rgb(255,255,255)")})}}},addRecommendTag:function(elComment,oOption){var objNameArea=elComment.query(this.config.element("commentNameArea")),elNameArea=commentJ.$Element(objNameArea),objRecommendImgArea=this.config.template("recommendImgArea").process(),elRecommendImgArea=commentJ.$Element(objRecommendImgArea);if(oOption.isAuthorRecommend){var objAuthorRecommendImgTag=this.config.template("arthorRecommendImgTag").process(),elAuthorRecommendImgTag=commentJ.$Element(objAuthorRecommendImgTag);elRecommendImgArea.append(elAuthorRecommendImgTag),elRecommendImgArea.append(document.createTextNode("\n"))}if(oOption.isUserRecommend){var objUserRecommendImgTag=this.config.template("userRecommendImgTag").process(),elUserRecommendImgTag=commentJ.$Element(objUserRecommendImgTag);elRecommendImgArea.append(elUserRecommendImgTag)}return elNameArea.prepend(elRecommendImgArea),elComment},addMobileIcon:function(elComment,oOption){var objNameArea=elComment.query(this.config.element("commentNameArea")),elNameArea=commentJ.$Element(objNameArea),objMobileIcon=this.config.template("mobileIcon").process(),elMobileIcon=commentJ.$Element(objMobileIcon),elMobileLayer=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body")+" "+this.config.element("mobileLayer")));if(!elMobileLayer){var objMobileLayer=this.config.template("mobileLayer").process();(elMobileLayer=commentJ.$Element(objMobileLayer)).hide(),commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))).append(elMobileLayer)}commentJ.$Fn(function(e){var offset=elMobileIcon.offset(),top=offset.top+elMobileIcon.height()+5,left=offset.left-18;elMobileLayer.show(),elMobileLayer.offset(top,left)},this).attach(elMobileIcon,"mouseenter"),commentJ.$Fn(function(e){elMobileLayer.hide()},this).attach(elMobileIcon,"mouseleave");var objSnsArea=elComment.query(this.config.element("cboxSnsShare")),elSnsArea=commentJ.$Element(objSnsArea);return null==objSnsArea?elNameArea.append(elMobileIcon):(elSnsArea.before(elMobileIcon),elMobileIcon.after("<span> </span>")),elComment},deckRecommendArea:function(elComment,oOption){if(elComment.toggleClass("comment_no_"+oOption.commentNo,"recommend_comment_no_"+oOption.commentNo),this.config.option("useReplyArea"))return elComment;var objCommentBody=elComment.query(this.config.element("commentBody")),elCommentBody=commentJ.$Element(objCommentBody),sFourthOfCommentBody=this.config.template("fourthOfCommentBody").process(),elFourthOfCommentBody=commentJ.$Element(sFourthOfCommentBody),sReplyOpenButton=elFourthOfCommentBody.query("a"),elReplyOpenButton=commentJ.$Element(sReplyOpenButton);if(1==this.config.option("maxDepth"))return elComment;var sReplyNum=elFourthOfCommentBody.query(this.config.element("replyNum")),elReplyNum=commentJ.$Element(sReplyNum),elStrong=commentJ.$Element("<strong>");return void 0===oOption.replyCount?elStrong.text("0"):elStrong.text(oOption.replyCount),elReplyNum.append(document.createTextNode("(")),elReplyNum.append(elStrong),elReplyNum.append(document.createTextNode(")")),"object"==typeof this.config.instance.score&&(commentJ.$Fn(function(oEvent){if(this.config.instance.score.option("parentCommentOption",oOption),elReplyOpenButton.hasClass(this.config.css("replyAreaUnfold"))){var sReplyArea=elComment.query("ul");commentJ.$Element(sReplyArea).empty(),elReplyNum.removeClass(this.config.css("replyCountOn")),void 0===oOption.replyCount&&(commentJ.$Element(elReplyNum.parent().query("strong")).text("답글"),null!=commentJ.$Element(elReplyNum.query("strong"))&&"0"!=commentJ.$Element(elReplyNum.query("strong")).text()||(elReplyNum.append(document.createTextNode("(")),elReplyNum.append(elStrong),elReplyNum.append(document.createTextNode(")"))))}else this.config.instance.score.replyListBest(1,null);elReplyOpenButton.toggleClass(this.config.css("replyAreaUnfold"))},this).attach(elReplyOpenButton,"click"),commentJ.$Fn(sps.disableForm).attach(elReplyOpenButton,"click")),elCommentBody.append(elFourthOfCommentBody),elComment},makeCountArea:function(){var objCount=this.config.template("countArea").process();return commentJ.$Element(objCount)},makePaginationArea:function(){var objPaginationArea=this.config.template("pageArea").process();return commentJ.$Element(objPaginationArea)},makeListArea:function(){var objListArea=this.config.template("list").process(),elListArea=commentJ.$Element(objListArea);return this.config.option("useSortArea")&&this.makeSortArea(elListArea),elListArea},makeSortArea:function(elListArea){var elSortArea=commentJ.$Element(this.config.template("sortArea").process()),elSortList=commentJ.$Element(this.config.template("sortList").process());1==this.config.option("useFocus")&&elSortArea.attr("id",this.config.element("focusTarget"));for(var sortOptionList=this.config.option("sortOptionList"),i=0;i<sortOptionList.length;++i){var elSortButotn=commentJ.$Element(this.config.template("sortButton").process({sortId:sortOptionList[i],sortName:this._htSortTypeNameList.$(sortOptionList[i])}));void 0!==this.config.option("currentSortOption")?this.config.option("currentSortOption")==sortOptionList[i]&&(elSortButotn.addClass("on"),elSortButotn.append(this.config.template("sortButtonBlind").process())):"newest"==sortOptionList[i]&&(elSortButotn.addClass("on"),elSortButotn.append(this.config.template("sortButtonBlind").process())),commentJ.$Fn(this.sortList,this).attach(elSortButotn,"click"),elSortList.append(elSortButotn)}elSortArea.append(elSortList),this.config.option("useInfoArea")&&this.makeInfoArea(elSortArea),elListArea.prepend(elSortArea)},makeInfoArea:function(elSortArea){var elBestInfo=commentJ.$Element(this.config.template("bestInfo").process()),elSortOldInfo=commentJ.$Element(this.config.template("sortOldInfo").process());void 0!==this.config.option("currentSortOption")||"newest"==this.config.option("currentSortOption")?(elBestInfo.show("block"),elSortOldInfo.hide()):"oldest"==this.config.option("currentSortOption")?(elBestInfo.hide(),elSortOldInfo.show("block")):(elBestInfo.hide(),elSortOldInfo.hide()),elSortArea.append(elBestInfo),elSortArea.append(elSortOldInfo);var elBody=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body")));commentJ.$Fn(function(e){var elBestInfoLayer=commentJ.$Element(elBody.query(".bestInfoLayer"));null!=elBestInfoLayer&&(elBestInfoLayer.toggle(),commentJ.$Event(e).stop(commentJ.$Event.CANCEL_BUBBLE),elSortArea.append(elBestInfoLayer))},this).attach(commentJ.$Element(elBestInfo.query("a")),"click"),commentJ.$Fn(function(e){var elSortOldInfoLayer=commentJ.$Element(elBody.query(".sortOldInfoLayer"));null!=elSortOldInfoLayer&&(elSortOldInfoLayer.toggle(),commentJ.$Event(e).stop(commentJ.$Event.CANCEL_BUBBLE),elSortArea.append(elSortOldInfoLayer))},this).attach(commentJ.$Element(elSortOldInfo.query("a")),"click")},sortList:function(oEvent){this.config.instance.layer.hideLayer(2),oEvent.stop();var elButton=commentJ.$Element(oEvent.element),elButtons=elButton.parent().child();for(var idx in elButtons)"object"==typeof elButtons[idx]&&(elButton.isEqual(elButtons[idx])?(elButtons[idx].addClass("on"),null==elButtons[idx].query("span")&&elButtons[idx].append(this.config.template("sortButtonBlind").process())):(elButtons[idx].removeClass("on"),null!=elButtons[idx].query("span")&&elButtons[idx].isParentOf(elButtons[idx].child()[0])&&elButtons[idx].child()[0].leave()));var sortId=elButton.attr("id");if(this.config.option("currentSortOption",sortId),this.config.instance.core.list("page",1),this.config.option("useInfoArea")){var elSortItems=elButton.parent().parent().child(),elBestInfo=null,elOldInfo=null;for(var idx in elSortItems)"object"==typeof elSortItems[idx]&&("bestInfo"==elSortItems[idx].attr("id")?elBestInfo=elSortItems[idx]:"oldInfo"==elSortItems[idx].attr("id")&&(elOldInfo=elSortItems[idx]));"newest"==sortId?(elBestInfo.show("block"),elOldInfo.hide()):"oldest"==sortId?(elBestInfo.hide(),elOldInfo.show("block")):(elBestInfo.hide(),elOldInfo.hide())}},resetSortArea:function(commentCount){var elBody=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body")));if(this.config.option("useSortArea")){var elSortArea=commentJ.$ElementList(elBody.queryAll(".cbox_sort_area"));if(0==commentCount)return void elSortArea.hide();elSortArea.show()}for(var elSortList=commentJ.$ElementList(elBody.queryAll(".cbox_list_sort > a")),i=0;i<elSortList.length();i++){var elSort=elSortList.get(i),sortId=elSort.attr("id");void 0!==this.config.option("currentSortOption")?this.config.option("currentSortOption")==sortId?(elSort.addClass("on"),null==elSort.query("span")&&elSort.append(this.config.template("sortButtonBlind").process())):(elSort.removeClass("on"),null!=elSort.query("span")&&commentJ.$Element(elSort.query("span")).leave()):"newest"==sortId?(elSort.addClass("on"),null==elSort.query("span")&&elSort.append(this.config.template("sortButtonBlind").process())):(elSort.removeClass("on"),null!=elSort.query("span")&&commentJ.$Element(elSort.query("span")).leave())}},makeExtraArea:function(templateName){var params={config:this.config},objDiv=this.config.template(templateName).process(params);return commentJ.$Element(objDiv)},makeRootWriteBoxArea:function(){var objRootWriteBoxArea=this.config.template("rootWriteBoxArea").process(),elRootWriteBoxArea=commentJ.$Element(objRootWriteBoxArea);return this.config.instance.writebox.createWriteBox(elRootWriteBoxArea,!0),elRootWriteBoxArea},updateReplyNum:function(oMessage){var parent_comment_no=oMessage.parent_comment_no,replyCount=oMessage.reply_count,sReplyNum=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))).query(".recommend_comment_no_"+parent_comment_no+" "+this.config.element("commentBody")+" "+this.config.element("secondOfCommentBody")+" "+this.config.element("replyNum")),elReplyNum=commentJ.$Element(sReplyNum);elReplyNum.empty();var elStrong=commentJ.$Element("<strong>");0==replyCount?commentJ.$Element(elReplyNum.parent().query("strong")).text("답글취소"):(elStrong.text(replyCount),elReplyNum.append(document.createTextNode("(")),elReplyNum.append(elStrong),elReplyNum.append(document.createTextNode(")"))),elReplyNum.addClass(this.config.css("replyCountOn"))}}).extend(commentJ.Component),sps.CommentBox.UI.NAME="sps.CommentBox.UI",sps.CommentBox.UI.VERSION="1.0",sps.ui=new sps.CommentBox.UI,sps.CommentBox.Control=commentJ.$Class({options:null,templates:null,elements:null,eventList:null,$init:function(){this.options={},this.templates={},this.elements={},this.eventList={}},setOptions:function(option,value){if("object"==typeof option)for(var key in option)this.options[key]=option[key];else"string"==typeof option&&value&&(this.options[option]=value)},setTemplates:function(template,value){if("object"==typeof template)for(var key in template)this.templates[key]=template[key];else"string"==typeof template&&value&&(this.templates[template]=value)},setElements:function(element,value){if("object"==typeof element)for(var key in element)this.elements[key]=element[key];else"string"==typeof element&&value&&(this.elements[element]=value)},validate:function(core){var instances;instances=core&&"sps.CommentBox.Core"==core.name?[core]:sps.CommentBox.Core.getInstance();for(var i=0;i<instances.length;i++){var instance=instances[i];for(var key in this.options)instance.config.option(key,this.options[key]);for(var key in this.templates)instance.config.template(key,this.templates[key]);for(var key in this.elements)instance.config.element(key,this.elements[key]);for(var key in this.eventList)instance.config.attach(key,this.eventList[key])}},create:function(target,ticket,objectId,categoryId){var core=this.createOnly(target,ticket,objectId,categoryId);return core.list("page",1),core},createOnly:function(target,ticket,objectId,categoryId){var targetObject;if(!target||!(targetObject=commentJ.$$.getSingle(target)))throw TypeError("Invalid target argument.");if(!ticket)throw TypeError("Invalid ticket argument.");if(!objectId)throw TypeError("Invalid objectId argument.");var instances=sps.CommentBox.Core.getInstance(),core=instances[instances.length-1];core.initialized&&(new sps.CommentBox.Config,new sps.CommentBox.Core,new sps.CommentBox.Ajax,new sps.CommentBox.UI,new sps.CommentBox.Layer,new sps.CommentBox.WriteBox,new sps.CommentBox.Util,sps.CommentBox.profile&&new sps.CommentBox.profile,sps.CommentBox.score&&new sps.CommentBox.score,core=instances[instances.length-1]),this.validate(core),core.config.option("ticket",ticket),core.config.option("objectId",objectId),categoryId&&(core.config.option("categoryId",categoryId),core.config.option("viewCategoryId",categoryId)),core.config.element("body",target);var targetElement=commentJ.$Element(targetObject);return targetElement.hasClass("cbox")||targetElement.addClass("cbox"),core.initializeOnly(),core.initialized=!0,core},addHandler:function(eventName,handler){this.eventList[eventName]=handler}}),void 0===sps.Fix&&(sps.Fix={}),sps.CommentBox.WriteBox.prototype.onFocusWriteArea=function(oEvent){this.config.option("isLogin")?this.config.option("isAuth")?this.defaultText(oEvent):this.config.instance.util.redirectAuth(oEvent)&&this.defaultText(oEvent):this.config.instance.util.redirectLogin(oEvent)},sps.Fix.create=sps.CommentBox.WriteBox.prototype.create,sps.CommentBox.WriteBox.prototype.create=function(e){return!!this.config.instance.util.redirectLogin(e)&&(!!this.config.instance.util.redirectAuth(e)&&(!!commentJ.$Fn(sps.Fix.create,this).bind()(e)&&void 0))},sps.Fix.replyCommand=sps.CommentBox.Comment.prototype.replyCommand,sps.CommentBox.Comment.prototype.replyCommand=function(e){if(!this.config.instance.util.redirectAuth(e))return!1;commentJ.$Fn(sps.Fix.replyCommand,this).bind()(e)},sps.CommentBox.Util.prototype.redirectAuth=function(oEvent){if(this.config.option("isAuth"))return!0;if(this.checkAuth())return!0;null!=oEvent&&commentJ.$Event(oEvent).element.blur();if(confirm(this.config.message.NOT_AUTHENTICATED)){var certUrl=this.config.option("certUrl")||"https://nid.naver.com/user/cert.nhn?todo=cert_start",rurl=this.config.option("certRurl")||this.config.option("objectUrl"),surl=this.config.option("certSrul")||this.config.option("objectUrl"),svc=this.config.option("certSvc")||"";top.location=certUrl+"&rurl="+encodeURIComponent(rurl)+"&surl="+encodeURIComponent(surl)+"&svc="+svc}return!1},sps.CommentBox.Util.prototype.checkAuth=function(){return this.config.instance.ajax.call({operation:"checkAuth",async:!1,onSuccess:commentJ.$Fn(this.onCheckAuth,this).bind(),param:{ticket:this.config.option("ticket")}}),this.config.option("isAuth")},sps.CommentBox.Util.prototype.onCheckAuth=function(message){this.config.option("isAuth","Y"==message.is_authenticated_name)},sps.CommentBox.Config.prototype.message.NOT_AUTHENTICATED="정보통신망법에 따라 게시판에 글 작성 시 실명확인이 필요합니다. 실명확인을 하시겠습니까?",sps.Fix.ajax={},sps.Fix.ajax.$init=sps.CommentBox.Ajax.prototype.$init,sps.CommentBox.Ajax.prototype.$init=function(){commentJ.$Fn(sps.Fix.ajax.$init,this).bind()(),this.option("checkAuth","is_authenticated_name.nhn")},sps.ajax.option("checkAuth","is_authenticated_name.nhn"),void 0===sps?sps={CommentBox:{}}:void 0===sps.CommentBox&&(sps.CommentBox={}),sps.CommentBox.profile=commentJ.$Class({name:"unknwon",version:"unknown",$init:function(){this.name=sps.CommentBox.profile.NAME,this.version=sps.CommentBox.profile.VERSION,this.indexInstance=sps.CommentBox.profile.getInstance().length-1,this.config=sps.CommentBox.Config.getInstance()[this.indexInstance],this.option("activeProfile",!1),this.option("activeProfileList",!1),this.option("profile",{}),this.option("profileList",{})},getProfile:function(){this.option("activeProfile")||this.config.instance.ajax.call({operation:"profile",async:!1,onSuccess:commentJ.$Fn(function(result){this.option("activeProfile",!0),this.option("profile",result)},this).bind(),param:{ticket:this.config.option("ticket")}})},getProfileList:function(){this.option("activeProfileList")||this.config.instance.ajax.call({operation:"profileList",async:!1,onSuccess:commentJ.$Fn(function(result){this.option("activeProfileList",!0),this.option("profileList",result)},this).bind(),param:{ticket:this.config.option("ticket")}})},addProfileToComment:function(elComment,oOption){if(!oOption.writerProfileUrl&&!this.config.option("useDummyThumb"))return elComment;elComment.removeClass(this.config.css("thumbOff")),elComment.addClass(this.config.css("thumbOn"));var elThumbProfile=this.assembleThumb(!1,this.config.option("thumbSizeInComment"));if(elThumbProfile.addClass(this.config.css("thumb")),oOption.isAuthorComment){var sAuthorImg=this.config.template("authorImg").process(),elAuthorImg=commentJ.$Element(sAuthorImg),sAuthorText=this.config.template("authorText").process(),elAuthorText=commentJ.$Element(sAuthorText);elThumbProfile.append(elAuthorImg),elThumbProfile.append(elAuthorText)}return this.changeImage(elThumbProfile,oOption.writerProfileUrl,oOption.commentNo,oOption.writerProfileType),(elComment=this.changeNamePlate(elComment,oOption)).prepend(elThumbProfile),elComment},changeNamePlate:function(elComment,oOption){if("naver"==oOption.writerProfileType)return elComment;var objNickNameArea=elComment.query("."+this.config.css("nickName")),elNickNameArea=commentJ.$Element(objNickNameArea),objUserIdArea=elComment.query("."+this.config.css("userId")),elUserIdArea=commentJ.$Element(objUserIdArea),elNickNameA=this.addLink(oOption.writerNickName,oOption.commentNo,oOption.writerProfileType),elUserIdA=this.addLink(oOption.writerId,oOption.commentNo,oOption.writerProfileType);return null!=elNickNameArea&&(elNickNameArea.empty(),elNickNameArea.append(elNickNameA)),null!=elUserIdArea&&(elUserIdArea.empty(),elUserIdArea.append(document.createTextNode("(")),elUserIdArea.append(elUserIdA),elUserIdArea.append(document.createTextNode(")"))),elComment},addLink:function(text,commentNo,profileType){if(text=text||"",!this.config.option("useProfileNameLink")){var elBlank=commentJ.$Element("<span>");return elBlank.text(text),elBlank}var sABlank=this.config.template("aBlank").process(),elABlank=commentJ.$Element(sABlank);return elABlank.text(text),commentJ.$Fn(function(e){this.config.instance.util.profilePopUp(commentNo,profileType)},this).attach(elABlank,"click"),commentJ.$Fn(sps.disableForm).attach(elABlank,"click"),elABlank},assembleThumb:function(useInWritebox,sizeType){var sThumbProfileImg,elThumbProfileImg;"medium"==sizeType?(sThumbProfileImg=this.config.template("thumbMediumProfileImg").process(),elThumbProfileImg=commentJ.$Element(sThumbProfileImg)):"small"==sizeType&&(sThumbProfileImg=this.config.template("thumbSmallProfileImg").process(),elThumbProfileImg=commentJ.$Element(sThumbProfileImg));var sThumbProfileBorder=this.config.template("thumbProfileBorder").process(),elThumbProfileBorder=commentJ.$Element(sThumbProfileBorder),elDiv=commentJ.$Element("<div>");if(this.config.option("useProfileThumbLink")){var elA=commentJ.$Element("<a>");elA.append(elThumbProfileImg),elA.append(elThumbProfileBorder),elDiv.append(elA)}else elDiv.append(elThumbProfileImg),elDiv.append(elThumbProfileBorder);if(this.config.option("useSpan")&&useInWritebox){elDiv.addClass(this.config.css("spanThumbs"));var elSpanDiv=commentJ.$Element("<div>");return elSpanDiv.append(elDiv),elSpanDiv}return elDiv},makeProfileWriteBox:function(elWriteBox,isRoot){if(!this.config.option("isLogin")&&!this.config.option("useWriteDummyThumb"))return elWriteBox;if(this.getProfile(),!this.option("activeProfile"))return elWriteBox;elWriteBox.toggleClass(this.config.css("basicWriteBoxType"),this.config.css("profileWriteBoxType"));var elProfile,objUserArea=elWriteBox.query(this.config.element("userArea")),elUserArea=commentJ.$Element(objUserArea);if(this.config.option("useSpan")){var objTd=elUserArea.query("tbody tr td");elProfile=commentJ.$Element(objTd)}else elProfile=commentJ.$Element("<div>"),elUserArea.prepend(elProfile);elProfile.addClass(this.config.css("writeboxProfile"));var elThumbProfile,elDivProfileArea=commentJ.$Element("<div>");if(elDivProfileArea.addClass(this.config.css("writeboxProfileArea")),elProfile.append(elDivProfileArea),(elThumbProfile=isRoot?this.assembleThumb(!0,"medium"):this.assembleThumb(!0,this.config.option("replyThumbSizeInWritebox"))).addClass(this.config.css("thumbs")),elDivProfileArea.append(elThumbProfile),this.config.option("isLogin")?this.changeImage(elThumbProfile,this.option("profile").profile_url,"",this.option("profile").profile_type):this.changeImage(elThumbProfile,"","","none"),this.config.option("isLogin")){var sProfileButton=this.config.template("profileButton").process(),elProfileButton=commentJ.$Element(sProfileButton);elDivProfileArea.append(elProfileButton),commentJ.$Fn(function(e){if(this.config.instance.util.isLogin(!0)){var elProfileLayer=this.config.instance.layer.getLayer("profile");if(null!=elProfileLayer){var offset=elProfileButton.offset(),top=offset.top-52,left=offset.left+46;elProfileLayer.show(),elProfileLayer.offset(top,left),commentJ.$Element(elProfileLayer.query(this.config.element("closeButton"))).$value().focus()}}commentJ.$Event(e).stop(commentJ.$Event.CANCEL_BUBBLE),this.config.option("lastEvent",e.element)},this).attach(elProfileButton,"click")}return elWriteBox},adjustZindex:function(){var objList=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))).query(this.config.element("list")+" ul"),objReplyWriteBox=commentJ.$Element(objList).query(this.config.element("writebox"));commentJ.$Element(objReplyWriteBox).parent(commentJ.$Fn(function(p){return"li"==p.tag&&(p.addClass(this.config.css("cboxOn")),!0)},this).bind())},changeImage:function(elThumbProfile,imgUrl,commentNo,profileType){var elImg=commentJ.$Element(elThumbProfile.query("img"));void 0!==imgUrl&&""!=imgUrl||(imgUrl=this.config.option("defaultProfileUrl")),this.config.option("useMemorial")&&(imgUrl=this.config.option("memorialDefaultImageUrl")),elImg.attr("src",imgUrl),commentJ.$Fn(function(e){elImg.attr("src",this.config.option("defaultProfileUrl"))},this).attach(elImg,"error");var objA=elThumbProfile.query("a");if(null!=objA){var elA=commentJ.$Element(objA);elA.attr("href","#");var elSpan=commentJ.$Element(elThumbProfile.query("a span"));"none"==profileType||"naver"==profileType||this.config.option("useMemorial")?(elSpan.css("cursor","default"),elA.css("cursor","default")):commentJ.$Fn(function(e){this.config.instance.util.profilePopUp(commentNo,profileType)},this).attach(elA,"click"),commentJ.$Fn(sps.disableForm).attach(elA,"click")}},makeProfileLayer:function(elLayer){if(this.getProfileList(),!this.option("activeProfileList"))return elLayer;commentJ.$Fn(function(e){this.config.instance.layer.hideLayer(2)},this).attach(elLayer,"click");for(var objProfileListArea=elLayer.query("ul"),elProfileListArea=commentJ.$Element(objProfileListArea),objProfileButtonArea=elLayer.query(this.config.element("profileButtonArea")),elProfileButtonArea=commentJ.$Element(objProfileButtonArea),profileList=this.option("profileList"),selectedProfileType=profileList.selected_profile_type,sortProfileList=new Array(10),j=0;j<profileList.profile_list.length;j++){var jsonProfile=profileList.profile_list[j],elLi=commentJ.$Element("<li>"),sRadio=this.config.template("profileRadio").process(),elRadio=commentJ.$Element(sRadio);elRadio.attr("id",jsonProfile.profile_type);var elDl=commentJ.$Element("<dl>"),elDt=commentJ.$Element("<dt>"),elDd=commentJ.$Element("<dd>"),elNickNameSpan=commentJ.$Element("<span>");elNickNameSpan.addClass(this.config.css("nickName"));var elUserIdSpan=commentJ.$Element("<span>");elUserIdSpan.addClass(this.config.css("userId"));var elThumbProfile=this.assembleThumb(!1,"medium");elThumbProfile.addClass(this.config.css("thumb"));var elNickNameA=this.addLink(jsonProfile.nickname,"",jsonProfile.profile_type),elUserIdA=this.addLink(jsonProfile.user_id,"",jsonProfile.profile_type);if(elLi.append(elRadio),elLi.append(elDl),elDl.append(elDt),elDl.append(elDd),elDd.append(elNickNameSpan),elDd.append(document.createTextNode(" ")),elDd.append(elUserIdSpan),selectedProfileType==jsonProfile.profile_type&&elRadio.attr("checked","true"),"naver_blog"==jsonProfile.profile_type){var sBlogLabel=this.config.template("blogLabel").process(),elBlogLabel=commentJ.$Element(sBlogLabel);elBlogLabel.attr("for",jsonProfile.profile_type),elDt.append(elBlogLabel),elNickNameSpan.append(elNickNameA),elUserIdSpan.append(document.createTextNode("(")),elUserIdSpan.append(elUserIdA),elUserIdSpan.append(document.createTextNode(")")),this.changeImage(elThumbProfile,jsonProfile.profile_url,"","naver_blog"),elRadio.after(elThumbProfile),sortProfileList[0]=elLi}else if("naver"==jsonProfile.profile_type){elLi.addClass(this.config.css("noProfileThumbArea"));var sNaverLabel=this.config.template("naverLabel").process(),elNaverLabel=commentJ.$Element(sNaverLabel);elNaverLabel.attr("for",jsonProfile.profile_type),elDt.append(elNaverLabel);var sNaverHelpButton=this.config.template("helpButton").process(),elNaverHelpButton=commentJ.$Element(sNaverHelpButton);commentJ.$Fn(function(e){var elNaverHelpLayer=this.config.instance.layer.getLayer("naverHelp");elNaverHelpLayer=this.config.instance.layer.adjustPosition(elNaverHelpButton,elNaverHelpLayer,"left","top"),commentJ.$Event(e).stop(commentJ.$Event.CANCEL_BUBBLE)},this).attach(elNaverHelpButton,"click"),elDt.append(elNaverHelpButton),elNickNameSpan.text(jsonProfile.nickname),elUserIdSpan.text("("+jsonProfile.user_id+")"),sortProfileList[2]=elLi}else if("baseball9"==jsonProfile.profile_type){var sBaseBall9Label=this.config.template("baseball9Label").process(),elBaseBall9Label=commentJ.$Element(sBaseBall9Label);elBaseBall9Label.attr("for",jsonProfile.profile_type),elDt.append(elBaseBall9Label),elNickNameSpan.text(jsonProfile.nickname),elUserIdSpan.text("("+jsonProfile.user_id+")"),this.changeImage(elThumbProfile,jsonProfile.profile_url,"","none"),elRadio.after(elThumbProfile),sortProfileList[3]=elLi}}for(var i=0;i<sortProfileList.length;i++)void 0!==sortProfileList[i]&&elProfileListArea.append(sortProfileList[i]);var objConfirmButton=elProfileButtonArea.query("input"),elConfirmButton=commentJ.$Element(objConfirmButton),objCancelButton=elProfileButtonArea.query("a"),elCancelButton=commentJ.$Element(objCancelButton),objForm=commentJ.$Element(elLayer.query("form"));return null!=objForm&&(objForm=objForm.$value()),commentJ.$Fn(sps.disableForm).attach(objForm,"submit"),commentJ.$Fn(function(e){var objSelectedRadio=commentJ.$Element(e.element.form).query(this.config.element("profileRadio")),elSelectedRadio=commentJ.$Element(objSelectedRadio);this.setProfile(elSelectedRadio.attr("id"))},this).attach(elConfirmButton,"click"),commentJ.$Fn(function(e){this.config.instance.layer.hideLayer(elLayer.attr("tier"))},this).attach(elCancelButton,"click"),commentJ.$Fn(sps.disableForm).attach(elCancelButton,"click"),elLayer},setProfile:function(type){var params={};params.ticket=this.config.option("ticket"),params.profile_type=type,this.config.instance.ajax.call({operation:"setProfileType",async:!1,onSuccess:commentJ.$Fn(this.modifyProfileType,this).bind(),param:params})},modifyProfileType:function(result){this.option("activeProfile",!1),this.option("activeProfileList",!1);for(var elBody=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))),elThumbProfileList=commentJ.$ElementList(elBody.queryAll("."+this.config.css("thumbs"))),i=0;i<elThumbProfileList.length();i++){var elThumbProfile=elThumbProfileList.get(i),elTempThumbProfile=this.assembleThumb(!0,"medium");elThumbProfile.html(elTempThumbProfile.html()),this.changeImage(elThumbProfile,result.profile_url,"",result.profile_type)}this.config.instance.layer.hideLayer(1)}}).extend(commentJ.Component),sps.CommentBox.profile.NAME="sps.CommentBox.profile",sps.CommentBox.profile.VERSION="1.0.0",sps.profile=new sps.CommentBox.profile,void 0===sps?sps={CommentBox:{}}:void 0===sps.CommentBox&&(sps.CommentBox={}),sps.CommentBox.score=commentJ.$Class({name:"unknwon",version:"unknown",$init:function(){this.name=sps.CommentBox.score.NAME,this.version=sps.CommentBox.score.VERSION,this.option("parentCommentOption",{}),this.indexInstance=sps.CommentBox.score.getInstance().length-1,this.config=sps.CommentBox.Config.getInstance()[this.indexInstance]},addSelectboxInWritebox:function(elWritebox){var sMainPartInWritebox=elWritebox.query(this.config.element("mainPartInWritebox")),elMainPartInWritebox=commentJ.$Element(sMainPartInWritebox),sScoreArea=this.config.template("scoreArea").process(),elScoreArea=commentJ.$Element(sScoreArea),sSelectDiv=commentJ.$Element(elScoreArea.query(this.config.element("scoreDiv")));null!=sSelectDiv&&(sSelectDiv=sSelectDiv.$value());var arrScoreItem=this.config.template("scoreItem").process().split("<separator/>"),oSelectBox2=new commentJ.SelectBox(sSelectDiv,{bUseLayerPosition:!1,aOptionHTML:arrScoreItem}),oScore=this;return oSelectBox2.attach({open:function(oCustomEvent){if(!oScore.config.option("isLogin")){var fnRedirectLogin=commentJ.$Fn(oScore.config.instance.util.redirectLogin,oScore.config.instance.util).bind();fnRedirectLogin(null),fnRedirectLogin=null,oCustomEvent.stop()}}}),elMainPartInWritebox.prepend(elScoreArea),elWritebox},detachSelectboxInWritebox:function(elWritebox){if(!this.config.option("isLogin"))return!1;var sScoreArea=elWritebox.query(this.config.element("scoreArea")),elScoreArea=commentJ.$Element(sScoreArea);null!=sScoreArea&&elScoreArea.leave()},addScoreToComment:function(elComment,oOption){var sCommentBody=elComment.query(this.config.element("commentBody")),elCommentBody=commentJ.$Element(sCommentBody),sFirstOfCommentBody=elComment.query(this.config.element("firstOfCommentBody")),elFirstOfCommentBody=commentJ.$Element(sFirstOfCommentBody),sThirdOfCommentBody=this.config.template("thirdOfCommentBody").process(),elThirdOfCommentBody=commentJ.$Element(sThirdOfCommentBody);if(commentJ.$A(elFirstOfCommentBody.child()).forEach(function(o,i,w){elThirdOfCommentBody.append(o)}),this.config.instance.profile.changeNamePlate(elThirdOfCommentBody,oOption),"naver"!=oOption.writerProfileType||this.config.option("useDummyThumb")){var elThumbProfile=this.config.instance.profile.assembleThumb(!1,"small");elThumbProfile.addClass(this.config.css("thumb")),this.config.instance.profile.changeImage(elThumbProfile,oOption.writerProfileUrl,oOption.commentNo,oOption.writerProfileType),elThirdOfCommentBody.prepend(elThumbProfile)}elCommentBody.append(elThirdOfCommentBody);var sScoreBoard=this.config.template("scoreBoard").process(oOption),elScoreBoard=commentJ.$Element(sScoreBoard),sStarGrade=elScoreBoard.query(this.config.element("starGrade")),elStarGrade=commentJ.$Element(sStarGrade);if(oOption.objectScore)if(0<oOption.objectScore){var scorePercent=oOption.objectScore/this.config.option("maxScore")*100,elSpan=commentJ.$Element("<span style='width:"+scorePercent+"%'>");elStarGrade.append(elSpan)}else elStarGrade.leave();else elStarGrade.leave();if(elFirstOfCommentBody.append(elScoreBoard),oOption.replyLevel>this.config.option("maxReplyAreaDepth")&&elFirstOfCommentBody.leave(),oOption.replyLevel>this.config.option("maxReplyAreaDepth"))return elComment;if(1==this.config.option("maxDepth"))return elComment;var sFourthOfCommentBody=this.config.template("fourthOfCommentBody").process(),elFourthOfCommentBody=commentJ.$Element(sFourthOfCommentBody),sReplyOpenButton=elFourthOfCommentBody.query("a"),elReplyOpenButton=commentJ.$Element(sReplyOpenButton),sReplyNum=elFourthOfCommentBody.query(this.config.element("replyNum")),elReplyNum=commentJ.$Element(sReplyNum),elStrong=commentJ.$Element("<strong>");return void 0===oOption.replyCount?elStrong.text("0"):elStrong.text(oOption.replyCount),elReplyNum.append(document.createTextNode("(")),elReplyNum.append(elStrong),elReplyNum.append(document.createTextNode(")")),0<oOption.replyCount&&elReplyNum.addClass(this.config.css("replyCountOn")),commentJ.$Fn(function(oEvent){if(this.option("parentCommentOption",oOption),elReplyOpenButton.hasClass(this.config.css("replyAreaUnfold"))){var sReplyArea=elComment.query("ul");commentJ.$Element(sReplyArea).empty()}else this.replyList(0,null);elReplyOpenButton.toggleClass(this.config.css("replyAreaUnfold"))},this).attach(elReplyOpenButton,"click"),commentJ.$Fn(sps.disableForm).attach(elReplyOpenButton,"click"),elCommentBody.append(elFourthOfCommentBody),elComment},replyList:function(pageNo,parentCommentNo){var parentCommentOption=this.option("parentCommentOption"),params=this.config.instance.core.commonParam();params.page_size=this.config.option("replyPageSize"),params.parent_comment_no=parentCommentOption.commentNo,0<pageNo&&(params.page_no=pageNo,params.parent_comment_no=parentCommentNo),this.config.instance.ajax.call({operation:"replyList",onSuccess:commentJ.$Fn(this.displayReplyList,this).bind(),param:params})},replyListBest:function(pageNo,parentCommentNo){var parentCommentOption=this.option("parentCommentOption"),params=this.config.instance.core.commonParam();params.page_size=this.config.option("replyPageSize"),params.parent_comment_no=parentCommentOption.commentNo,params.best_yn="Y",0<pageNo&&(params.page_no=pageNo,null!=parentCommentNo&&(params.parent_comment_no=parentCommentNo)),this.config.instance.ajax.call({operation:"replyList",onSuccess:commentJ.$Fn(this.displayReplyList,this).bind(),param:params})},displayReplyList:function(oMessage){var parentCommentOption=this.option("parentCommentOption"),oReplyMessage=oMessage.reply_lists[0],replyList=oReplyMessage.reply_list,parentCommentNo=oReplyMessage.parent_comment_no,elBody=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body"))),sRecommend=".";parentCommentOption.isRecommendArea&&(sRecommend=".recommend_");var sParent=elBody.query(sRecommend+"comment_no_"+parentCommentNo+" ul"),elParent=commentJ.$Element(sParent);elParent.empty();for(var i=0;i<replyList.length;i++){var oRawReply=this.config.instance.ui.preprocessing(replyList[i]);oRawReply.indexInstance=this.indexInstance;var elComment=new sps.CommentBox.Comment(oRawReply).build();if(elParent.append(elComment),0==i){var elLi=commentJ.$Element(elParent.query("li"));elLi.attr("tabindex","-1"),elLi.$value().focus()}}if(0<replyList.length){var elReplyAreaPage=this.replyPaginate(oReplyMessage);elParent.append(elReplyAreaPage)}var elWriteBox=this.config.instance.writebox.createReplyWrite(elParent,parentCommentNo,oReplyMessage.best_yn);this.config.option("maxScoreDepth")>=parentCommentOption.replyLevel&&this.detachSelectboxInWritebox(elWriteBox),"Y"==oReplyMessage.best_yn&&this.config.instance.ui.updateReplyNum(oReplyMessage)},replyPaginate:function(oReplyMessage){var totalPage=Math.ceil(Number(oReplyMessage.reply_count)/Number(oReplyMessage.page_size)),curPage=oReplyMessage.page_no,sReplyAreaPage=this.config.template("replyAreaPage").process({curPage:curPage,totalPage:totalPage}),elReplyAreaPage=commentJ.$Element(sReplyAreaPage),sReplyAreaPageLeft=elReplyAreaPage.query(this.config.element("replyAreaPageLeft")),elReplyAreaPageLeft=commentJ.$Element(sReplyAreaPageLeft),sReplyAreaPageRight=elReplyAreaPage.query(this.config.element("replyAreaPageRight")),elReplyAreaPageRight=commentJ.$Element(sReplyAreaPageRight);return"Y"==oReplyMessage.is_have_prev_page?(elReplyAreaPageLeft.removeClass("cbox_dim"),commentJ.$Fn(function(oEvent){"Y"==oReplyMessage.best_yn?this.replyListBest(Number(oReplyMessage.page_no)-1,oReplyMessage.parent_comment_no):this.replyList(Number(oReplyMessage.page_no)-1,oReplyMessage.parent_comment_no)},this).attach(elReplyAreaPageLeft,"click")):elReplyAreaPageLeft.addClass("cbox_dim"),commentJ.$Fn(sps.disableForm).attach(elReplyAreaPageLeft,"click"),"Y"==oReplyMessage.is_have_next_page?(elReplyAreaPageRight.removeClass("cbox_dim"),commentJ.$Fn(function(oEvent){"Y"==oReplyMessage.best_yn?this.replyListBest(Number(oReplyMessage.page_no)+1,oReplyMessage.parent_comment_no):this.replyList(Number(oReplyMessage.page_no)+1,oReplyMessage.parent_comment_no)},this).attach(elReplyAreaPageRight,"click")):elReplyAreaPageRight.addClass("cbox_dim"),commentJ.$Fn(sps.disableForm).attach(elReplyAreaPageRight,"click"),elReplyAreaPage}}).extend(commentJ.Component),sps.CommentBox.score.NAME="sps.CommentBox.score",sps.CommentBox.score.VERSION="1.0.0",sps.score=new sps.CommentBox.score;var Comment=jindo.$Class({_htCommentOptions:ghtCommentOptions,$init:function(){if(void 0!==sps){sps.CommentBox.UI.prototype.makeInfoArea=function(elSortArea){var elBestInfo=commentJ.$Element(this.config.template("bestInfo").process()),elBody=commentJ.$Element(commentJ.$$.getSingle(this.config.element("body")));commentJ.$Fn(function(e){var elBestInfoLayer=commentJ.$Element(elBody.query(".bestInfoLayer"));null!=elBestInfoLayer&&(elBestInfoLayer.toggle(),commentJ.$Event(e).stop(commentJ.$Event.CANCEL_BUBBLE),elSortArea.append(elBestInfoLayer))},this).attach(commentJ.$Element(elBestInfo.query("a")),"click"),elSortArea.append(elBestInfo)},sps.CommentBox.UI.prototype.sortList=function(oEvent){this.config.instance.layer.hideLayer(2),oEvent.stop();var elButton=commentJ.$Element(oEvent.element),elButtons=elButton.parent().child();for(var idx in elButtons)"object"==typeof elButtons[idx]&&(elButton.isEqual(elButtons[idx])?(elButtons[idx].addClass("on"),null==elButtons[idx].query("span")&&elButtons[idx].append(this.config.template("sortButtonBlind").process())):(elButtons[idx].removeClass("on"),null!=elButtons[idx].query("span")&&elButtons[idx].isParentOf(elButtons[idx].child()[0])&&elButtons[idx].child()[0].leave()));var sortId=elButton.attr("id");if(this.config.option("currentSortOption",sortId),this.config.instance.core.list("page",1),this.config.option("useInfoArea")){var elSortItems=elButton.parent().parent().child();for(var idx in elSortItems)"object"==typeof elSortItems[idx]&&("bestInfo"==elSortItems[idx].attr("id")?elSortItems[idx]:"oldInfo"==elSortItems[idx].attr("id")&&elSortItems[idx])}},sps.CommentBox.UI.prototype.setFocusList=function(){var welDiscussion=commentJ.$Element("end_discussion");welDiscussion&&window.scrollTo(0,welDiscussion.offset().top)},sps.CommentBox.WriteBox.prototype.createSubNode=function(){var elLi=commentJ.$Element("<li>");return elLi.addClass("cbox_comment"),elLi.addClass(this.config.css("thumbOff")),elLi};try{var cbox=new sps.CommentBox.Control;cbox.setOptions(this._htCommentOptions.cbox),this._htCommentOptions.cbox_template&&cbox.setTemplates(this._htCommentOptions.cbox_template),cbox.create(this._htCommentOptions.cbox_create[0],this._htCommentOptions.cbox_create[1],this._htCommentOptions.cbox_create[2])}catch(e){}sps.config.attach("afterList",this._scrollToComment())}},_scrollToComment:function(){if(void 0!==window.ghtEnv&&void 0!==window.ghtEnv.bCommentOpen){var welEndDiscussion=jindo.$Element("end_discussion");if(welEndDiscussion){var nEndDiscussionTop=welEndDiscussion.offset().top,nGnbHeight=jindo.$Element("header").height();window.ghtEnv.bCommentOpen&&window.scrollTo(0,nEndDiscussionTop-nGnbHeight)}}}});tvcast="undefined"!=typeof tvcast?tvcast:{},tvcast.Comment=function(){var _htOption={},isTimestampAvailable=function(htOption){return"channel01"===htOption.ticket&&"clipEnd"===window.ghtEnv.sPageName||"tvcastlive"===htOption.ticket&&"channel"===htOption.templateId},addElectionCommentOption=function(_htOption){return void 0===_htOption.sTemplateId||_htOption.sTemplateId.indexOf("election")<0||(_htOption.sHelp=!1,_htOption.htErrorHandler={3014:function(){alert("본인 인증 후 사용이 가능합니다.​\n네이버 회원정보에서 본인 인증이 가능합니다.​")},5091:function(){alert("본인 인증 후 사용이 가능합니다.​\n네이버 회원정보에서 본인 인증이 가능합니다.​")}}),_htOption},initTimestampFlags=function(){this._isClickedTimestamp=!1,this._timestamp=0},setClickedTimestamp=function(timestamp){this._isClickedTimestamp=!0,this._timestamp=timestamp},_getRmcPlayer=function(){return"undefined"!=typeof WrapPlayer?WrapPlayer.getRmcPlayer():"undefined"!=typeof rmcPlayer?rmcPlayer:null},updateMobileFlickPanel=function(){if(null!=window.ghtEnv&&null!=window.ghtEnv.commentControllInfo){var currentPanelName="";currentPanelName=tvcast.m.SlideFlicking?window.ghtEnv.aPanelName[tvcast.m.SlideFlicking.getCurrentIndex()]:window.ghtEnv.sCurrentPanelName,window.ghtEnv.commentControllInfo.isNeedPanelUpdateAfterCommentLoad&&"clipcomments"==currentPanelName&&null!=jindo.$Element("channel_comment")&&setTimeout(function(){var nPanelHeight=jindo.$Element("channel_comment").height();jindo.$Element("cds_flick").height(nPanelHeight)},1e3),window.ghtEnv.commentControllInfo.isNeedPanelUpdateAfterTalkLoad&&"talks"==currentPanelName&&null!=jindo.$Element("channel_talk")&&setTimeout(function(){var nPanelHeight=jindo.$Element("channel_talk").height();jindo.$Element("cds_flick").height(nPanelHeight)},1e3)}},updateCount=function(nCount){var awelTarget=jindo.$ElementList("._commentCount");awelTarget.length()&&(0<nCount?999999<nCount?awelTarget.text("999,999+"):awelTarget.text(nCount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")):awelTarget.text("0"))},updateCountForChannel=function(){if(null!=window.ghtEnv&&null!=window.ghtEnv.sId){var commentTarget=jindo.$ElementList("._channelCommentCount"),talkTarget=jindo.$ElementList("._channelTalkCount");null==commentTarget&&null==talkTarget||jindo.$Ajax("/api/json/channel/"+window.ghtEnv.sId+"/statistics",{method:"get",onload:function(res){var ret=res.json();null!=commentTarget&&null!=ret[3]&&commentTarget.text(_applyCountTemplate(ret[3])),null!=talkTarget&&null!=ret[4]&&talkTarget.text(_applyCountTemplate(ret[4]))},onerror:function(){}}).request()}},_applyCountTemplate=function(num){return null==num||num<=0?"":num<1e4?num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):1e4<=num&&num<1e7?Math.floor(num/1e4)+"만":1e7<=num?"999만+":void 0};return{init:function(htOption){!function(htOption){_htOption.sDomain=htOption.domain,_htOption.bLogin=htOption.login,_htOption.sLanguage=htOption.language,_htOption.sCountry=htOption.country,_htOption.nReplyPageSize=htOption.replyPageSize,_htOption.nIndexSize=htOption.indexSize,_htOption.sCssId=htOption.cssId,_htOption.sCssUrl=htOption.cssUrl,_htOption.bManager=htOption.manager,_htOption.htEventHandler={loadList:function(oEvent){oEvent.oJson.success&&updateCount(oEvent.oJson.result.count.total),updateMobileFlickPanel(),updateCountForChannel()},afterCreate:function(oEvent){oEvent.oJson.success&&updateCount(oEvent.oJson.result.count.total),updateMobileFlickPanel(),updateCountForChannel()},afterReplyList:function(oEvent){updateMobileFlickPanel(),updateCountForChannel()}},_htOption.vHashtagHandler=function(tag){window.clickcr("","cmt.tag","","",""),window.location.href="/search/clip?isTag=true&query="+encodeURIComponent(tag)},htOption.options?(_htOption.aOptions=htOption.options,_htOption.aOptions.forEach(function(elem,index){_htOption.aOptions[index]=addElectionCommentOption(elem)})):(_htOption.sApiDomain=htOption.apiDomain,_htOption.sGroupId=htOption.groupId,_htOption.sTicket=htOption.ticket,_htOption.sObjectId=htOption.objectId,_htOption.sListType=htOption.listType,_htOption.sTemplateId=htOption.templateId,_htOption.sId=htOption.id,_htOption.sHelp=htOption.help,_htOption.nPageSize=htOption.pageSize,_htOption.sLikeItId=htOption.likeItId,_htOption.sPageType=htOption.pageType,_htOption.htMessage={stats:{title:"누가 댓글을 썼을까요?",view:"통계보기",fold:"접기"},template:{editor:"CH"}}),htOption.message&&(_htOption.htMessage=htOption.message),htOption.formation&&(_htOption.aFormation=htOption.formation),isTimestampAvailable(htOption)&&(_htOption.vTimestampHandler=function(timestamp){window.clickcr("","cmt.timestamp","","",""),initTimestampFlags();var player=_getRmcPlayer();null!==player.getPlayingVideoType()?("content"===player.getPlayingVideoType()?player.currentTime(timestamp):(setClickedTimestamp(timestamp),tvcast.pc.ClipEnd.showTimestampNoticeLayer("광고 종료 후 이동합니다.")),!player.isPlaying()&&player.play()):tvcast.pc.ClipEnd.showTimestampNoticeLayer("본 영상 재생 중에만 사용할 수 있습니다.")}),_htOption=addElectionCommentOption(_htOption)}(htOption),function(){window.__htCboxOption=_htOption;var s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.src=_htOption.sDomain+"/js/cbox.core.js?v="+Math.floor((new Date).getTime()/12e5),(document.head||document.getElementsByTagName("head")[0]).appendChild(s)}()},updateCount:function(nCount){updateCount(nCount)},initTimestampFlags:function(){initTimestampFlags()},setClickedTimestamp:function(timestamp){setClickedTimestamp(timestamp)},isClickedTimestamp:function(){return function(){return this._isClickedTimestamp}()},getTimestamp:function(){return function(){return this._timestamp}()}}}();var Subscription=jindo.$Class({_bIsSubscribing:!1,TOOLTIP_BEFORE_COOKIE_KEY:"NTC_CSB",TOOLTIP_AFTER_COOKIE_KEY:"NTC_CSA",TOOLTIP_SHOW_TIME:5e3,$init:function(){this._initSubscriptionBtns(),this._initEvent()},setSubscriptionBtns:function(){this._initSubscriptionBtns()},_initSubscriptionBtns:function(){var awelSubscriptionBtn=this._getAllSubscriptionBtns();this._setAllSubscriptionBtns(awelSubscriptionBtn)},_getAllSubscriptionBtns:function(){var awelBtn=new Array;return $Element($Document().query("body")).queryAll('[data-subscription-count="-1"]').forEach(function(el,i){var welBtn=$Element(el);""!==welBtn.data("channel-id")&&awelBtn.push(welBtn)}),awelBtn},_setAllSubscriptionBtns:function(awelBtn){for(var self=this,aChannelId=[],i=0;i<awelBtn.length;i++)aChannelId.push(awelBtn[i].data("channel-id"));if(0!=aChannelId.length){$Ajax("/api/subscription/channel/contents",{type:"jsonp",method:"get",onload:function(res){"success"!==res.json().header.code||self._updateAllSubscriptionBtns(res.json().body.contents,awelBtn)},onerror:function(){},timeout:3,ontimeout:function(){}}).request({channelIds:$Json(aChannelId).toString()})}},_updateAllSubscriptionBtns:function(aContents,awelBtn){for(var i=0;i<aContents.length;i++)this._updateSubscriptionBtn(aContents[i],awelBtn)},_updateSubscriptionBtn:function(oContent,awelBtn){for(var i=0;i<awelBtn.length;i++)if(awelBtn[i].data("channel-id")===oContent.channelId){var welBtn=awelBtn[i],welCnt=welBtn.query(".cnt");if(welCnt&&welCnt.html(this._getFormatCount(oContent.subscriptionCount)),welBtn.data("subscription-count",oContent.subscriptionCount),"Y"===oContent.subscriptionYn&&(welBtn.addClass("on"),welBtn.query(".txt").html('<em class="ic"></em>구독중')),welBtn.css({display:"inline-block"}),welBtn.hasClass("_holder")&&("Y"!==oContent.subscriptionYn||this._getCookie(this.TOOLTIP_AFTER_COOKIE_KEY)?"N"!==oContent.subscriptionYn||this._getCookie(this.TOOLTIP_BEFORE_COOKIE_KEY)||this._showTooltip("before"):this._showTooltip("after")),"undefined"!=typeof ghtEnv&&"clipEnd"!==ghtEnv.sPageName)break}},_initEvent:function(){var welBody=$Element($Document().query("body"));welBody&&(welBody.delegate("click","._subscribe",$Fn(this._clickSubscribeEventHandler,this).bind()),welBody.delegate("click","._sub_close",$Fn(this._clickSubscribeCloseEventHandler,this).bind()))},_clickSubscribeCloseEventHandler:function(oEvent){var wel=$Element(oEvent.element),sHolderId=wel.data("holder-id");if(sHolderId&&$Element(sHolderId)&&$Element(sHolderId).data("channel-id")){var welTooltip=wel.parent();welTooltip.hasClass("_tooltip_before")&&!this._getCookie(this.TOOLTIP_BEFORE_COOKIE_KEY)?(this._setCookie(this.TOOLTIP_BEFORE_COOKIE_KEY,"ON",30),this._hideTooltip("before")):welTooltip.hasClass("_tooltip_after")&&!this._getCookie(this.TOOLTIP_AFTER_COOKIE_KEY)&&(this._setCookie(this.TOOLTIP_AFTER_COOKIE_KEY,"ON",30),this._hideTooltip("after"))}},_clickSubscribeEventHandler:function(oEvent){var welBtn=$Element(oEvent.element),sChannelId=welBtn.data("channel-id"),sAreaCode=welBtn.data("area-code");sChannelId&&(welBtn.hasClass("on")?(sAreaCode&&clickcr(this,sAreaCode+".unsub","","",oEvent),this._unsubscribe(sChannelId)):(sAreaCode&&clickcr(this,sAreaCode+".sub","","",oEvent),this._subscribe(sChannelId)))},_subscribe:function(sChannelId){var self=this;this._requestSubscriptionAjax("/api/subscription/channel/subscribe",sChannelId,function(res){var nCount=res.json().body.subscriptionCount;self._toggleAllSubscriptionBtns(sChannelId,nCount,!0),$Element($Document().query("body")).query('[data-channel-id="'+sChannelId+'"]').hasClass("_holder")&&(self._hideTooltip("before"),self._getCookie(self.TOOLTIP_AFTER_COOKIE_KEY)||self._showTooltip("after"))})},_unsubscribe:function(sChannelId){var self=this;this._requestSubscriptionAjax("/api/subscription/channel/unsubscribe",sChannelId,function(res){var nCount=res.json().body.subscriptionCount;self._toggleAllSubscriptionBtns(sChannelId,nCount,!1),$Element($Document().query("body")).query('[data-channel-id="'+sChannelId+'"]').hasClass("_holder")&&(self._hideTooltip("after"),self._getCookie(self.TOOLTIP_BEFORE_COOKIE_KEY)||self._showTooltip("before"))})},_toggleAllSubscriptionBtns:function(sChannelId,nCount,bIsOn){for(var awelSubscriptionBtn=this._getAllSubscriptionBtnsBy(sChannelId),i=0;i<awelSubscriptionBtn.length;i++){var welBtn=awelSubscriptionBtn[i],welCnt=welBtn.query(".cnt"),nCurrentCount=welBtn.data("subscription-count");welCnt&&(bIsOn?nCurrentCount++:nCurrentCount--,welCnt.html(this._getFormatCount(nCurrentCount))),welBtn.data("subscription-count",nCurrentCount),bIsOn?(welBtn.addClass("on"),welBtn.query(".txt").html('<em class="ic"></em>구독중')):(welBtn.removeClass("on"),welBtn.query(".txt").html('<em class="ic"></em>구독'))}},_getAllSubscriptionBtnsBy:function(sChannelId){return $Element($Document().query("body")).queryAll('[data-channel-id="'+sChannelId+'"]')},_requestSubscriptionAjax:function(sUrl,channelId,fCallback){var self=this;self._bIsSubscribing||(self._bIsSubscribing=!0,$Ajax(sUrl,{type:"jsonp",method:"get",onload:function(res){"success"!==res.json().header.code?(self._bIsSubscribing=!1,self._onFailure(res.json().header.text)):(fCallback(res),self._bIsSubscribing=!1)},onerror:function(){self._bIsSubscribing=!1,self._retry(sUrl,channelId,fCallback,"네트워크에 접속할 수 없습니다.\n네트워크 연결상태를 확인해 주세요.")},timeout:3,ontimeout:function(){self._bIsSubscribing=!1,self._retry(sUrl,channelId,fCallback,"네트워크에 접속할 수 없습니다.\n네트워크 연결상태를 확인해 주세요.")}}).request({channelId:channelId}))},_retry:function(sUrl,channelId,fCallback,sMgs){confirm(sMgs)&&this._requestSubscriptionAjax(sUrl,channelId,fCallback)},_onFailure:function(sText){"NOT LOGIN"===sText&&this._guideLogin()},_getFormatCount:function(nCount){return nCount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},_guideLogin:function(){confirm("로그인이 필요한 서비스 입니다.\n로그인 하시겠습니까?")&&(window.location.href="https://nid.naver.com/nidlogin.login?url="+encodeURIComponent(location.href))},_showTooltip:function(sState){$Element($$.getSingle("._tooltip_"+sState)).show(),setTimeout(jindo.$Fn(this._hideTooltip,this).bind(sState),this.TOOLTIP_SHOW_TIME)},_hideTooltip:function(sState){$Element($$.getSingle("._tooltip_"+sState)).hide()},_getCookie:function(sKey){return $Cookie().get(sKey)},_setCookie:function(sKey,sValue,nExpireDay){$Cookie().set(sKey,sValue,nExpireDay)}}),CreatorSubscription=jindo.$Class({_bIsSubscribing:!1,TOOLTIP_BEFORE_COOKIE_KEY:"NTC_CRSB",TOOLTIP_AFTER_COOKIE_KEY:"NTC_CRSA",TOOLTIP_SHOW_TIME:5e3,$init:function(){this._initSubscriptionBtns(),this._initEvent()},setSubscriptionBtns:function(){this._initSubscriptionBtns()},_initSubscriptionBtns:function(){var awelSubscriptionBtn=this._getAllSubscriptionBtns();this._setAllSubscriptionBtns(awelSubscriptionBtn)},_getAllSubscriptionBtns:function(){var awelBtn=new Array;return $Element($Document().query("body")).queryAll('[data-subscription-count="-1"]').forEach(function(el,i){var welBtn=$Element(el);""!==welBtn.data("creator-id")&&awelBtn.push(welBtn)}),awelBtn},_setAllSubscriptionBtns:function(awelBtn){for(var self=this,aCreatorId=[],i=0;i<awelBtn.length;i++)aCreatorId.push(awelBtn[i].data("creator-id"));$Ajax("/api/subscription/creator/contents",{type:"jsonp",method:"get",onload:function(res){"success"!==res.json().header.code||self._updateAllSubscriptionBtns(res.json().body.contents,awelBtn)},onerror:function(){},timeout:3,ontimeout:function(){}}).request({creatorIds:$Json(aCreatorId).toString()})},_updateAllSubscriptionBtns:function(aContents,awelBtn){for(var i=0;i<aContents.length;i++)this._updateSubscriptionBtn(aContents[i],awelBtn)},_updateSubscriptionBtn:function(oContent,awelBtn){for(var i=0;i<awelBtn.length;i++)if(awelBtn[i].data("creator-id")===oContent.creatorId){var welBtn=awelBtn[i],welCnt=welBtn.query(".cnt");welCnt&&welCnt.html(this._getFormatCount(oContent.subscriptionCount)),welBtn.data("subscription-count",oContent.subscriptionCount),"Y"===oContent.subscriptionYn&&(welBtn.addClass("on"),welBtn.query(".txt").html('<em class="ic"></em>구독')),welBtn.css({display:"inline-block"}),welBtn.hasClass("_holder")&&("Y"!==oContent.subscriptionYn||this._getCookie(this.TOOLTIP_AFTER_COOKIE_KEY)?"N"!==oContent.subscriptionYn||this._getCookie(this.TOOLTIP_BEFORE_COOKIE_KEY)||this._showTooltip("before"):this._showTooltip("after"));break}},_initEvent:function(){var welBody=$Element($Document().query("body"));welBody&&(welBody.delegate("click","._subscribe",$Fn(this._clickSubscribeEventHandler,this).bind()),welBody.delegate("click","._sub_close",$Fn(this._clickSubscribeCloseEventHandler,this).bind()))},_clickSubscribeCloseEventHandler:function(oEvent){var wel=$Element(oEvent.element),sHolderId=wel.data("holder-id");if(sHolderId&&$Element(sHolderId)&&$Element(sHolderId).data("creator-id")){var welTooltip=wel.parent();welTooltip.hasClass("_tooltip_before")&&!this._getCookie(this.TOOLTIP_BEFORE_COOKIE_KEY)?(this._setCookie(this.TOOLTIP_BEFORE_COOKIE_KEY,"ON",30),this._hideTooltip("before")):welTooltip.hasClass("_tooltip_after")&&!this._getCookie(this.TOOLTIP_AFTER_COOKIE_KEY)&&(this._setCookie(this.TOOLTIP_AFTER_COOKIE_KEY,"ON",30),this._hideTooltip("after"))}},_clickSubscribeEventHandler:function(oEvent){var welBtn=$Element(oEvent.element),sCreatorId=welBtn.data("creator-id"),sAreaCode=welBtn.data("area-code");sCreatorId&&(welBtn.hasClass("on")?(sAreaCode&&clickcr(this,sAreaCode+".unsub","","",oEvent),this._unsubscribe(sCreatorId)):(sAreaCode&&clickcr(this,sAreaCode+".sub","","",oEvent),this._subscribe(sCreatorId)))},_subscribe:function(sCreatorId){var self=this;this._requestSubscriptionAjax("/api/subscription/creator/subscribe",sCreatorId,function(res){var nCount=res.json().body.subscriptionCount;self._toggleAllSubscriptionBtns(sCreatorId,nCount,!0),$Element($Document().query("body")).query('[data-creator-id="'+sCreatorId+'"]').hasClass("_holder")&&(self._hideTooltip("before"),self._getCookie(self.TOOLTIP_AFTER_COOKIE_KEY)||self._showTooltip("after"))})},_unsubscribe:function(sCreatorId){var self=this;this._requestSubscriptionAjax("/api/subscription/creator/unsubscribe",sCreatorId,function(res){var nCount=res.json().body.subscriptionCount;self._toggleAllSubscriptionBtns(sCreatorId,nCount,!1),$Element($Document().query("body")).query('[data-creator-id="'+sCreatorId+'"]').hasClass("_holder")&&(self._hideTooltip("after"),self._getCookie(self.TOOLTIP_BEFORE_COOKIE_KEY)||self._showTooltip("before"))})},_toggleAllSubscriptionBtns:function(sCreatorId,nCount,bIsOn){for(var awelSubscriptionBtn=this._getAllSubscriptionBtnsBy(sCreatorId),i=0;i<awelSubscriptionBtn.length;i++){var welBtn=awelSubscriptionBtn[i],welCnt=welBtn.query(".cnt"),nCurrentCount=welBtn.data("subscription-count");welCnt&&(bIsOn?nCurrentCount++:nCurrentCount--,welCnt.html(this._getFormatCount(nCurrentCount))),welBtn.data("subscription-count",nCurrentCount),bIsOn?welBtn.addClass("on"):welBtn.removeClass("on");var welBtnText=welBtn.query(".txt");welBtnText&&welBtnText.html('<em class="ic"></em>구독')}},_getAllSubscriptionBtnsBy:function(sCreatorId){return $Element($Document().query("body")).queryAll('[data-creator-id="'+sCreatorId+'"]')},_requestSubscriptionAjax:function(sUrl,creatorId,fCallback){var self=this;self._bIsSubscribing||(self._bIsSubscribing=!0,$Ajax(sUrl,{type:"jsonp",method:"get",onload:function(res){"success"!==res.json().header.code?(self._bIsSubscribing=!1,self._onFailure(res.json())):(fCallback(res),self._bIsSubscribing=!1)},onerror:function(){self._bIsSubscribing=!1,self._retry(sUrl,creatorId,fCallback,"네트워크에 접속할 수 없습니다.\n네트워크 연결상태를 확인해 주세요.")},timeout:3,ontimeout:function(){self._bIsSubscribing=!1,self._retry(sUrl,creatorId,fCallback,"네트워크에 접속할 수 없습니다.\n네트워크 연결상태를 확인해 주세요.")}}).request({creatorId:creatorId}))},_retry:function(sUrl,creatorId,fCallback,sMgs){confirm(sMgs)&&this._requestSubscriptionAjax(sUrl,creatorId,fCallback)},_onFailure:function(oRes){"success"!==oRes.header.code&&("NOT LOGIN"===oRes.header.text?this._guideLogin():alert(oRes.body))},_getFormatCount:function(nCount){return nCount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},_guideLogin:function(){confirm("로그인이 필요한 서비스 입니다.\n로그인 하시겠습니까?")&&(window.location.href="https://nid.naver.com/nidlogin.login?url="+encodeURIComponent(location.href))},_showTooltip:function(sState){$Element($$.getSingle("._tooltip_"+sState)).show(),setTimeout(jindo.$Fn(this._hideTooltip,this).bind(sState),this.TOOLTIP_SHOW_TIME)},_hideTooltip:function(sState){$Element($$.getSingle("._tooltip_"+sState)).hide()},_getCookie:function(sKey){return $Cookie().get(sKey)},_setCookie:function(sKey,sValue,nExpireDay){$Cookie().set(sKey,sValue,nExpireDay)}});tvcast="undefined"!=typeof tvcast?tvcast:{},tvcast.Report={init:function(htEnv,wel,isMobile,playTime){!function(htEnv,wel,isMobile,playTime){this._htEnv=htEnv,this._welButton=wel,this._isMobile=isMobile,this._nContentsNo=wel.attr("data-contentsNo"),this._nContentsType=wel.attr("data-contentsType"),this._nPlayTime=playTime}(htEnv,wel,isMobile,playTime),function(){if(this._nContentsNo&&this._nContentsType)if(this._htEnv.bIsLogin)if(this._nPlayTime=Math.round(this._nPlayTime),isNaN(this._nPlayTime)&&(this._nPlayTime=0),this._isMobile)window.location.href="/report/form/"+this._nContentsType+"/"+this._nContentsNo+"?playTime="+this._nPlayTime;else{var popupHeight="VOD"==this._nContentsType?730:640;window.open("/report/form/"+this._nContentsType+"/"+this._nContentsNo+"?playTime="+this._nPlayTime,"report","width=570,height="+popupHeight)}else confirm("로그인이 필요한 서비스 입니다.\n로그인 하시겠습니까?")&&(this._isMobile?window.location.href="https://nid.naver.com/nidlogin.login?svctype=262144&url="+encodeURIComponent(location.href):window.location.href="https://nid.naver.com/nidlogin.login?url="+encodeURIComponent(location.href))}()}},tvcast.pc.AnimateThumb={init:function(options){this._initVar(options),this._attachEvent()},_initVar:function(options){this._hasOverImg=!1,this._aniImgLoadTimeout=0,this._aniImgLoadResetTimeout=0,this._oImg={},this._baseEl="container",options&&options.baseEl&&(this._baseEl=options.baseEl),this._htEvent=[],this._htEvent.mouseover=jindo.$Fn(this._onMouseOver,this).bind(),this._htEvent.mouseout=jindo.$Fn(this._onMouseOut,this).bind()},_attachEvent:function(){jindo.$Element(this._baseEl).attach({"mouseover@a[data-anisrc]":this._htEvent.mouseover,"focusin@a[data-anisrc]":this._htEvent.mouseover,"mouseout@a[data-anisrc]":this._htEvent.mouseout,"focusout@a[data-anisrc]":this._htEvent.mouseout})},_onMouseOver:function(e){var el=jindo.$Element(e.srcElement);el.hasClass("_top_ani_area")&&(el=el.parent());var aniUrl=el.attr("data-anisrc");if(aniUrl){var self=this;this._hasOverImg=!0,this._oImg=new Image,this._oImg.onload=function(){clearTimeout(self._aniImgLoadResetTimeout),clearTimeout(self._aniImgLoadTimeout),self._aniImgLoadTimeout=setTimeout(function(){if(!self._hasOverImg)return!1;clearTimeout(self._aniImgLoadResetTimeout);var aniImg=el.query("img._ani_img");aniImg.$value().src=aniUrl,aniImg.css({"transition-property":"opacity","transition-duration":"200ms","transition-timing-function":"linear",opacity:1}),self._oImg=null,self._aniImgLoadResetTimeout=setTimeout(function(){aniImg.css({"transition-property":"opacity","transition-duration":"100ms","transition-timing-function":"linear",opacity:0})},2200)},300)},this._oImg.onerror=function(){self._oImg=null},this._oImg.src=aniUrl}},_onMouseOut:function(e){var el=jindo.$Element(e.delegatedElement),imgEl=el.query("img");this._oImg&&(this._oImg.onload=function(){}),this._oImg=null,this._hasOverImg=!1,clearTimeout(this._aniImgLoadTimeout),clearTimeout(this._aniImgLoadResetTimeout);var aniImgEl=el.query("img._ani_img");aniImgEl&&aniImgEl.css({"transition-duration":"0ms",opacity:0}),imgEl.$value().src=imgEl.attr("data-src")}};