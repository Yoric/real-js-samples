function playVideo(a){if(!window.$SINAPlayer.util.urlDetection()){var b=window.$SINAPLAYEROBJ=window.$SINAPlayer.playerInit(a);return b.player}window.$SINAPlayer.playerInitNewH5Player(a);console.log("域名和浏览器均支持新版本H5播放器 - 20190311.1")}if(window.$SINAPlayer==undefined){window.$SINAPlayer={};window.$SINAPlayer.players=[];window.$SINAPlayer.configs=[];window.$SINAPlayer.util={};window.$SINAPlayer.time={};window.$SINAPlayer.videoFileInfo={};window.$SINAPlayer.time.firstOpenTime=(new Date).getTime();window.$SINAPlayer.player={init:!1,type:1,load:!1};window.$SINAPLAYEROBJ=null;window.$SINAFLASHURL="//p.you.video.sina.com.cn/swf/opPlayer20180521_V5_1_1_64.swf"};
window.$SINAPlayer.cacheFuns=function(){var a=[],b={};b.add=function(b,c){a.push({name:b,args:c||[]})};b.forExec=function(b){for(i in a){var c=a[i];b(c.name,c.args)}};b.clear=function(){a=[]};return b}();
window.$SINAPlayer.playersControl=function(){var a={};return{add:function(b,c){a[b]={dom:document.getElementById(b),obj:c}},getplayer:function(b){return a[b]?a[b]:null}}}();
window.$SINAPlayer.getPlayer=function(){var a=window.$SINAPlayer.playersControl;return{getPlayer:function(b){return a.getplayer(b)}}}();
window.$SINAPlayer.playerCallJs=function(){var a={},b=window.$SINAPlayer.cacheFuns,c=window.$SINAPlayer.getPlayer,d=!1,e=function(){if(arguments.length==0)throw new Error("播放器回调js方法必须传入播放器id");var a=Array.prototype.slice.call(arguments,0);a.push((new Date).getTime());return a},f=function(a){$PlayerCallJs[a]=function(){var f=e.apply(null,arguments);b.add(a,f);if(a=="flashInitCompleted"){window.$SINAPlayer.player.load=!0;var g=setInterval(function(){if(!!$SCOPE&&typeof $SCOPE=="object"&&typeof $SCOPE.video=="object"){var a=c.getPlayer(f[f.length-2]),b=a.obj;if(!d){d=!0;b.callback.fire("flashInitCompleted",a.obj.playerid)}$SCOPE.video.videoId&&($SCOPE.video.video_id=$SCOPE.video.videoId);var e=setInterval(function(){if(b.playVideo){clearInterval(e);b.playVideo($SCOPE.video)}},20);clearInterval(g)}},20)}if(a=="playComplete"){var h=c.getPlayer(f[f.length-2]);h&&h.obj.callback.fire("playCompleted",h.obj.playerid)}if(a=="h5RecordeValue"){var i=f[f.length-3],h=c.getPlayer(f[f.length-2]);h.obj.callback.fire("h5RecordeValue",i,h.obj.playerid)}}},g=function(a,b){$PlayerCallJs[a]=function(){var a=e.apply(null,arguments);b.apply(null,a)}};if(typeof window.$PlayerCallJs=="undefined"){window.$PlayerCallJs={};window.$PlayerCallNameArr=["flashInitCompleted","playComplete","playOutside","playStart","videoError","toWide","toNarrow","setLight","recordValue","h5RecordeValue","adComplete"]}for(var h=0,i=$PlayerCallNameArr.length;h<i;h++){var j=$PlayerCallNameArr[h];f(j)}a.addDelay=function(a){if(a!=""){window.$PlayerCallNameArr.push(a);f(a)}};a.addNow=function(a,b){a!=""&&typeof b=="function"&&g(a,b)};return a};
window.$SINAPlayer.util.mobileos=function(){function a(a){var b={},c={},d=a.match(/WebKit\/([\d.]+)/),e=a.match(/(Android)\s+([\d.]+)/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),h=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=h&&a.match(/TouchPad/),j=a.match(/Kindle\/([\d.]+)/),k=a.match(/Silk\/([\d._]+)/),l=a.match(/(BlackBerry).*Version\/([\d.]+)/),m=a.match(/(BB10).*Version\/([\d.]+)/),n=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),o=a.match(/PlayBook/),p=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),q=a.match(/Firefox\/([\d.]+)/);if(c.webkit=!!d)c.version=d[1];e&&(b.android=!0,b.version=e[2]);g&&(b.ios=b.iphone=!0,b.version=g[2].replace(/_/g,"."));f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,"."));h&&(b.webos=!0,b.version=h[2]);i&&(b.touchpad=!0);l&&(b.blackberry=!0,b.version=l[2]);m&&(b.bb10=!0,b.version=m[2]);n&&(b.rimtabletos=!0,b.version=n[2]);o&&(c.playbook=!0);j&&(b.kindle=!0,b.version=j[1]);k&&(c.silk=!0,c.version=k[1]);!k&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0);p&&(c.chrome=!0,c.version=p[1]);q&&(c.firefox=!0,c.version=q[1]);b.tablet=!!(f||o||e&&!a.match(/Mobile/)||q&&a.match(/Tablet/));b.phone=!b.tablet&&!!(e||g||h||l||m||p&&a.match(/Android/)||p&&a.match(/CriOS\/([\d.]+)/)||q&&a.match(/Mobile/));return{os:b,browser:c}}return a(navigator.userAgent)}();
window.$SINAPlayer.util.extend=function(a,b){var c=function(a){return typeof a=="undefined"||a==null?!1:a.constructor==Object?!0:!1};for(i in b)c(b[i])&&c(a[i])?window.$SINAPlayer.util.extend(a[i],b[i]):a[i]=b[i];return a};
window.$SINAPlayer.util.platform=function(){var a=navigator.userAgent.toLowerCase(),b=window.$SINAPlayer.util.mobileos,c=window.$SINAPlayer.util.extend,d={os:{win:/windows/i.test(a),mac:/mac/i.test(a)},browser:{uc:/ucweb/i.test(a)||/ucbrowser/i.test(a)}};c(d.os,b.os);c(d.browser,b.browser);d.ismobile=function(){var a=d.os;return"createTouch"in document||"onorientationchange"in window?!0:a.phone||a.tablet?!0:!1}();if(d.ismobile){d.appDevice="phone";d.os.android?d.os="android":d.os.ios?d.os="ios":d.os="winphone"}else{d.appDevice="";d.os.win?d.os="windows":d.os.linux?d.os="linux":d.os.mac&&(d.os="macos")}return d}();
window.$SINAPlayer.util.buildH5=function(a){var b={autoplay:!1,controls:!0,loop:!1,poster:"",preload:"auto"};a.h5attr!==""&&a.h5attr.autoPlay!==""&&(a.h5attr.autoplay=a.h5attr.autoPlay);window.$SINAPlayer.util.extend(b,a.h5attr||{});return['<video id="'+a.id+'" name="'+a.id+'" src="" ',typeof a.width!="undefined"?'width="'+a.width+'" ':"",typeof a.height!="undefined"?'height="'+a.height+'" ':"",b.autoplay?"autoplay ":"",b.controls?"controls ":"",b.loop?"loop ":"",'preload="'+b.preload+'" ','poster="'+b.poster+'">',"</video>"].join("")};
window.$SINAPlayer.util.jsonp=function(a,b){var c=(new Date).getTime(),d=document.getElementsByTagName("head")[0]||document.documentElement,e=document.createElement("script"),f="HTML5_"+c;e.src=a+"&jsonp="+f;e.charset="utf-8";window[f]=function(a){if(b||typeof b=="function"){b(a);delete window[b];d.removeChild(e)}};d.appendChild(e)};
window.$SINAPlayer.util.callback=function(){var a={};this.add=function(b,c){a[b]||(a[b]=[]);a[b].push(c)};this.fire=function(b,c){var d=Array.prototype.slice.call(arguments,0);d.shift();var e=a[b];if(e){var f=e.length;for(var g=0;g<f;g++)try{e[g].apply(null,d)}catch(h){}}}};
window.$SINAPlayer.player=function(){function a(a,b){if(!a||!a.container)throw new Error("未传入播放器容器id");if(typeof b!="function")throw new Error("未传入构建播放器dom的方法");var c=document.getElementById(a.container);if(!c)throw new Error("播放器容器无效");this.container=c;this.playerid=a.id;this.callback=new window.$SINAPlayer.util.callback;this.buildDom=function(){this.container.innerHTML=b(a);this.player=document.getElementById(a.id);a.classname&&(this.player.className=a.classname)}}a.prototype.init=function(a){window.$SCOPE=window.$SCOPE||{};$SCOPE.video=$SCOPE.video||a};a.prototype.setSize=function(a){if(!a)return;a.width&&this.player.setAttribute("width",a.width);a.height&&this.player.setAttribute("height",a.height)};a.prototype.playVideo=function(){};a.prototype.pause=function(){};a.prototype.play=function(){};return a}();
window.$SINAPlayer.util.extendClass=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.superclass=b.prototype;b.prototype.constructor==Object.prototype.constructor&&(b.prototype.constructor=b)};
window.$SINAPlayer.sinaH5Player=function(){function b(a){a.h5attr=a.h5attr||{};b.superclass.constructor.call(this,a,window.$SINAPlayer.util.buildH5);var c=this.buildDom;this.buildDom=function(a){c.call(this);this.callback.fire("playerInitCompleted",this.playerid);typeof a!="boolean"&&(a=!0);a&&this.bindEvt()}}var a=window.$SINAPlayer.util.jsonp;window.$SINAPlayer.util.extendClass(b,window.$SINAPlayer.player);b.prototype.playVideo=function(b){if(b==undefined||b==null||b==-1)return;var c=this;this.callback.fire("playStart",this.playerid);if(typeof b=="string"&&b!=""){this.player.src=b;return}var d=function(a){typeof a=="object"&&a.streamAddress&&(c.player.src=a.streamAddress)};if(typeof b=="object"&&b.videoid&&b.inter&&b.inter.url){b.inter.idkeyname=b.inter.idkeyname||"videoid";a(b.inter.url+"?"+b.inter.idkeyname+"="+b.videoid,function(a){a&&a.code=="A0001"?typeof b.inter.callback=="function"?b.inter.callback(c.player,a):d(a.data):this.callback.fire("videoError",this.playerid)})}else this.callback.fire("videoError",this.playerid)};b.prototype.bindEvt=function(){var a=this,b={ended:function(){a.callback.fire("playComplete",a.playerid)}};a.player.addEventListener("ended",b.ended)};b.prototype.pause=function(){this.player.pause()};b.prototype.play=function(){this.player.play()};b.prototype.on=function(a,b){this.callback.add(a,b)};return b}();
window.$SINAPlayer.util.buildFlash=function(a,b){var c={},d="undefined",e=a.navagator,d="undefined",f="object",g="Shockwave Flash",h="ShockwaveFlash.ShockwaveFlash",j="application/x-shockwave-flash",k="SWFObjectExprInst",l="onreadystatechange",e=navigator,m=!1,n=function(){var c=typeof b.getElementById!=d&&typeof b.getElementsByTagName!=d&&typeof b.createElement!=d,i=e.userAgent.toLowerCase(),k=e.platform.toLowerCase(),l=k?/win/.test(k):/win/.test(i),n=k?/mac/.test(k):/mac/.test(i),o=/webkit/.test(i)?parseFloat(i.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof e.plugins!=d&&typeof e.plugins[g]==f){r=e.plugins[g].description;if(r&&(typeof e.mimeTypes==d||!e.mimeTypes[j]||!!e.mimeTypes[j].enabledPlugin)){m=!0;p=!1;r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1");q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10);q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10);q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof a.ActiveXObject!=d)try{var s=new ActiveXObject(h);if(s){r=s.GetVariable("$version");if(r){p=!0;r=r.split(" ")[1].split(",");q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]}}}catch(t){}return{w3:c,pv:q,wk:o,ie:p,win:l,mac:n}}(),o=function(a,b){if(n.ie&&n.win){var c="",b=b||{};for(var d in a)a[d]!=Object.prototype[d]&&(d.toLowerCase()=="data"?b.movie=a[d]:d.toLowerCase()=="styleclass"?c+=' class="'+a[d]+'"':d.toLowerCase()!="classid"&&(c+=" "+d+'="'+a[d]+'"'));var e="";for(var f in b)b[f]!=Object.prototype[f]&&(e+='<param name="'+f+'" value="'+b[f]+'" />');return'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+c+">"+e+"</object>"}var g='<embed pluginspage="//www.macromedia.com/go/getflashplayer" type="'+j+'" ';for(var d in a)a[d]!=Object.prototype[d]&&(d.toLowerCase()=="data"?g+='src="'+a[d]+'" ':d.toLowerCase()=="styleclass"?g+=' class="'+a[d]+'" ':d.toLowerCase()!="classid"&&(g+=" "+d+'="'+a[d]+'" '));for(var h in b)g+=h+'="'+b[h]+'" ';g+="/>";return g},p=function(a,b){for(i in b)typeof b[i]=="object"&&typeof a[i]=="object"?window.$SINAPlayer.util.extend(a[i],b[i]):a[i]=b[i];return a};c.getFlashHTML=function(a){var b={url:"",id:"vPlayer",flashvars:{},params:{allowNetworking:"all",allowScriptAccess:"always",wmode:"transparent",allowFullScreen:"true",quality:"high",bgcolor:"#000000"},attributes:{}};p(b,a);var c={},d={};c.data=b.url;typeof b.width!="undefined"&&(c.width=b.width+"");typeof b.height!="undefined"&&(c.height=b.height+"");c.id=b.id;c.name=b.id;for(var e in b.attributes)c[e]=b.attributes[e];for(var e in b.params)d[e]=b.params[e];d.flashvars="";for(var e in b.flashvars)d.flashvars?d.flashvars+="&"+e+"="+b.flashvars[e]:d.flashvars=e+"="+b.flashvars[e];return o(c,d)};c.isSupport=function(){};c.isSupportVersion=function(a){};return c}(window,document);
window.$SINAPlayer.util.cookie={get:function(a){a=a.replace(/([\.\[\]\$])/g,"\\$1");var b=new RegExp(a+"=([^;]*)?;","i"),c=document.cookie+";",d=c.match(b);return d?d[1]||"":""},set:function(a,b,c){var d=[],e,f,g=window.$LivePlayer.util.extend({expire:null,path:"/",domain:null,secure:null,encode:!0},c);g.encode==1&&(b=escape(b));d.push(a+"="+b);g.path!=null&&d.push("path="+g.path);g.domain!=null&&d.push("domain="+g.domain);g.secure!=null&&d.push(g.secure);if(g.expire!=null){e=new Date;f=e.getTime()+g.expire*36e5;e.setTime(f);d.push("expires="+e.toGMTString())}document.cookie=d.join(";")}};
window.$SINAPlayer.getUser=function(){var a=window.sinaSSOController,b=window.$SINAPlayer.util.cookie,c={};if(a&&a.getSinaCookie())c=a.getSinaCookie();else{c.gusr=!0;b?c.gusrId=b.get("SINAGLOBAL"):c.gusrId="unLogined"}return c};
window.$SINAPlayer.sinaFlashPlayer=function(){function a(b){a.superclass.constructor.call(this,b,window.$SINAPlayer.util.buildFlash.getFlashHTML)}window.$SINAPlayer.util.extendClass(a,window.$SINAPlayer.player);a.prototype.playVideo=function(a){if(a==-1)this.player.playVideo(-1);else if(typeof a=="object"&&a.video_id){var b={pid:a.pid,channel_id:a.channel_id,videoTitle:a.title,videoURL:a.url||location.href,tokenURL:a.swfOutsideUrl||""},c=window.$SINAPlayer.getUser();c&&c.uid&&(b.uid=c.uid);var d=this,e=setInterval(function(){if(d.player&&d.player.playVideo){d.player.playVideo(a.video_id,b);clearInterval(e)}},50)}};a.prototype.pause=function(){try{this.player.jsPause()}catch(a){}};a.prototype.play=function(){try{this.player.jsPlay()}catch(a){}};a.prototype.on=function(a,b){this.callback.add(a,b)};return a}();
window.$SINAPlayer.util.checkFlashPlugins=function(){function b(a){var b={max:-1,min:-1};a=a.replace(/,/g,".");var c=a.match(/\d+.\d+/);if(c){c=c[0];var d=c.split(".");b.max=parseInt(d[0]||0);b.min=parseInt(d[1]||0)}return b}function c(){try{if(navigator.plugins&&navigator.plugins["Shockwave Flash"]){a.flash=!0;var c=navigator.plugins["Shockwave Flash"],d=b(c.description);a.maxversion=d.max;a.minversion=d.min}else if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){a.flash=!0;var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),d=b(e.GetVariable("$version"));a.maxversion=d.max;a.minversion=d.min}}catch(f){}}var a={};a.maxversion=0;a.minversion=0;a.flash=!1;c();a.support=function(b,c){if(!a.flash)return!1;if(a.maxversion>b)return!0;if(a.maxversion!=b)return!1;if(c!=undefined)return a.minversion>=c?!0:!1};return a}();
window.$SINAPlayer.util.browserType=function(){var a=navigator.userAgent,b=a.indexOf("Opera")>-1,c=a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b,d=a.indexOf("Windows NT 6.1; Trident/7.0;")>-1&&!c,e=a.indexOf("Firefox")>-1,f=a.indexOf("Safari")>-1&&a.indexOf("Chrome")==-1,g=a.indexOf("Chrome")>-1&&a.indexOf("Safari")>-1;if(c){var h=new RegExp("MSIE (\\d+\\.\\d+);");h.test(a);var i=parseFloat(RegExp.$1);return i==7?"IE7":i==8?"IE8":i==9?"IE9":i==10?"IE10":i==11?"IE11":"0"}if(e)return"FF";if(b)return"Opera";if(f)return"Safari";if(g)return"Chrome";if(d)return"Edge"};
window.$SINAPlayer.checkFlash=function(a){var b=window.$SINAPlayer.util.checkFlashPlugins,c=window.$SINAPlayer.util.browserType(),d=function(b,c){b?a.innerHTML='<div style="text-align: center;">亲，您没有安装flash插件不能播放哦~  请 <a href="'+b+'" target="_blank">立即安装'+"</a>"+c+"</div>":a.innerHTML='<div style="text-align: center;">'+c+"</div>"};if(b.flash){if(!b.support(11,0)){d("//www.adobe.com/go/getflashplayer","升级您的Flash Player版本，最低版本要求：11.0");return!1}return!0}"Safari"==c?window.location.href="//www.adobe.com/go/getflashplayer":"FF"==c?confirm("因本页面视频需要flash插件支持，请确定您的浏览器已安装flash插件并允许开启")&&(window.location.href="//support.mozilla.org/zh-CN/kb/flash-blocklists"):d("//www.adobe.com/go/getflashplayer","")};
window.$SINAPlayer.util.snvdLog=function(a){function i(a){var b=a.toString().split(".");return parseFloat(b.join(""))}function j(a){return parseFloat(a/1e3)}var b=window.$SINAPlayer.getUser(),c=window.$SINAPlayer.util.browserType(),d=window.$SINAPlayer.util.platform,e=window.$SINAPlayer.videoFileInfo,f=window.location.hostname,g=f.substring(0,f.indexOf(".")),h={sid:"",app:"sinaplayerH5",logv:"0.0.1",uid:"",gusr:"",did:"",ape:"H5_browser",os:d.os,tpxi:"brws:"+c+",brwsV:"+d.browser.version,dv:d.appDevice,lov:"vod",vot:"",lt:"",vd:j(e.duration)||j(i(a.duration)),vwd:e.width||a.width,vht:e.height||a.height,purl:a.currentSrc,atq:1,vpid:e.video_id||"",fcid:e.fcid||"",vtl:e.title||document.title||"",pctx:e.pctx||"",psrc:e.psrc,vsrc:e.vsrc};if(b.gusr){h.uid="";h.gusr=b.gusrId;h.did=b.gusrId;h.sid=b.gusrId}else{h.uid=b.uid;h.gusr="";h.did=b.uid;h.sid=b.uid}return h};
window.$SINAPlayer.playerInit=function(opt){function argsinit(){var a=opt.flashvars;for(var b in a)a[b]=encodeURIComponent(a[b]);$extend(config,opt||{});config.url||(config.url=window.$SINAFLASHURL);config.flashvars.playerId=config.id;config.flashvars.jsNamespace="window.$PlayerCallJs";container=document.getElementById(config.container)}function buildPlayer(){$control.add(that.player.playerid,that.player)}function chechFlashInit(){if(window.$SINAPlayer.checkFlash(container)){that.player=new window.$SINAPlayer.sinaFlashPlayer(config);window.$SINAPlayer.player.type=1;window.$SINAPlayer.player.init=!0;that.player.buildDom();buildPlayer()}else initH5Player()}function initH5Player(){var snvdLog,sidTime,videoSoureIsVideo_id=!0;window.$SINAPlayer.sinaH5Player.prototype.playVideo=function(a){if(!a||a==-1)return;var b=this;a.poster&&(this.player.poster=a.poster);var c=document.getElementById(config.container),d=function(c){if(typeof c=="object"&&c.file_id){var d=c.file_id;b.player.src=c.dispatch_result.durl.url;window.$SINAPlayer.videoFileInfo.width=c.width;window.$SINAPlayer.videoFileInfo.height=c.height;window.$SINAPlayer.videoFileInfo.duration=c.length;window.$SINAPlayer.videoFileInfo.fcid=c.file_id;window.$SINAPlayer.videoFileInfo.vsrc="vms";window.$SINAPlayer.videoFileInfo.pctx="videosource:vms";$jsonp("//count.video.sina.com.cn/videoView?video_id="+a.video_id+"&vid="+d+"&r="+window.location.href)}else{b.player.src=c;if(opt.flashvars.videosource){window.$SINAPlayer.videoFileInfo.vsrc=opt.flashvars.videosource;window.$SINAPlayer.videoFileInfo.pctx="videosource:"+opt.flashvars.videosource}else e(c);window.$SINAPlayer.videoFileInfo.fcid=opt.flashvars.pageid||""}window.$SINAPlayer.videoFileInfo.psrc=opt.flashvars.feedRefer||"";$PlayerCallJs.h5RecordeValue(c,b.playerid)},e=function(a){if(a)if(a.indexOf("miaopai")>0){window.$SINAPlayer.videoFileInfo.vsrc="miaopai";window.$SINAPlayer.videoFileInfo.pctx="videosource:miaopai"}else if(a.indexOf("kandian")>0){window.$SINAPlayer.videoFileInfo.vsrc="kandian";window.$SINAPlayer.videoFileInfo.pctx="videosource:kandian"}else if(a.indexOf("weibo")>0){window.$SINAPlayer.videoFileInfo.vsrc="weibo";window.$SINAPlayer.videoFileInfo.pctx="videosource:weibo"}else if(a.indexOf("ad")>0){window.$SINAPlayer.videoFileInfo.vsrc="ad";window.$SINAPlayer.videoFileInfo.pctx="videosource:ad"}else if(a.indexOf("kuaishou")>0){window.$SINAPlayer.videoFileInfo.vsrc="kuaishou";window.$SINAPlayer.videoFileInfo.pctx="videosource:kuaishou"}else if(a.indexOf("acfun")>0){window.$SINAPlayer.videoFileInfo.vsrc="acfun";window.$SINAPlayer.videoFileInfo.pctx="videosource:acfun"}else if(a.indexOf("bilibili")>0){window.$SINAPlayer.videoFileInfo.vsrc="bilibili";window.$SINAPlayer.videoFileInfo.pctx="videosource:bilibili"}else{window.$SINAPlayer.videoFileInfo.vsrc="";window.$SINAPlayer.videoFileInfo.pctx="videosource:"}};if(a.video_id){var f="appver=1.1&appname=h5VideoLog&applt=mobile&tags=video&player=all&video_id=";$jsonp("//hpi.video.sina.com.cn/public/video/play?"+f+a.video_id+"&pageUrl="+encodeURIComponent(window.location.href),function(e){if(e&&e.code=="1"){window.$SINAPlayer.videoFileInfo.title=e.data.title||a.title;window.$SINAPlayer.videoFileInfo.video_id=e.data.video_id;var f=e.data.videos,g=!1;for(var h=0,i=f.length;h<i;h++)if(f[h].type=="mp4")if(f[h].definition=="ffd"){g=!0;d(f[h])}else if(f[h].definition=="hd"){g=!0;d(f[h])}else if(f[h].definition=="sd"){g=!0;d(f[h])}}else{videoError=!0;c.innerHTML='<div style="text-align: center;">'+b.player.error.message+"</div>";b.callback.fire("videoError",b.playerid)}})}else if(opt.flashvars.streamurl){videoSoureIsVideo_id=!1;d(decodeURIComponent(opt.flashvars.streamurl));b.callback.fire("streamurl",b.playerid)}else{videoError=!0;c.innerHTML='<div style="text-align: center;">'+b.player.error.message+"</div>";b.callback.fire("videoError",b.playerid)}};window.$SINAPlayer.sinaH5Player.prototype.bindEvt=function(){var a=this,b=!0,c=!1,d=!1,e={h5canplay:function(){},h5play:function(){if(videoError)return;var c=(new Date).getTime();if(b){sidTime=(new Date).getTime();snvdLog=window.$SINAPlayer.util.snvdLog(a.player);snvdLog.sid=snvdLog.sid+"_"+snvdLog.os+"_"+c;H5playCfg.sno=1;H5playCfg.shno=1;H5playCfg.startTime=0;H5playCfg.isPlayStart=!1;H5playCfg.isFirstFrame=!1;H5playCfg.playDur=[];H5playCfg.pause.count=0;H5playCfg.pause.isPaused=!1;H5playCfg.pause.pauseStartTime=0;H5playCfg.pause.pauseEndTime=0;H5playCfg.pause.pauseDurTime=[];_firstPlay(a.player,c);b=!1;a.callback.fire("playStart",a.playerid)}else{_playFromPause(a.player,c);a.callback.fire("unpauseNotify",a.playerid)}},h5timeupdate:function(){if(a.player&&H5playCfg.isFirstFrame){if(!snvdLog.vd){var b=a.player.duration.toString().split(".");b=parseFloat(b.join(""));snvdLog.vd=parseFloat(b/1e3)}_firstFrame(a.player);a.callback.fire("onFirstframe",a.playerid)}},h5pause:function(){if(videoError)return;_pause(a.player);a.callback.fire("pauseNotify",a.playerid)},h5stop:function(){_earlyStop(a.player)},h5ended:function(){b=!0;_playEnded(a.player);a.callback.fire("playComplete",a.playerid)},h5volumechange:function(){if(a.player.muted){a.callback.fire("volumeOff",a.playerid);c=!0}else if(c){a.callback.fire("volumeOn",a.playerid);c=!1}},h5requestFullScreen:function(){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen&&a.webkitRequestFullScreen()},h5exitFullscreen:function(){var a=document;a.exitFullscreen?a.exitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitCancelFullScreen&&a.webkitCancelFullScreen()}};a.player.addEventListener("canplay",e.h5canplay);a.player.addEventListener("play",e.h5play);a.player.addEventListener("pause",e.h5pause);a.player.addEventListener("timeupdate",e.h5timeupdate,!1);a.player.addEventListener("ended",e.h5ended);a.player.addEventListener("volumechange",e.h5volumechange);window.addEventListener("beforeunload",e.h5stop,!1);a.player.addEventListener("click",function(){if(d){e.h5exitFullscreen();d=!1;a.callback.fire("toNomalScreen",a.playerid)}else{e.h5requestFullScreen();d=!0;a.callback.fire("toFullScreen",a.playerid)}},!1)};that.player=new window.$SINAPlayer.sinaH5Player(config);window.$SINAPlayer.player.type=2;window.$SINAPlayer.player.init=!0;var earr=[{playerInitCompleted:"flashInitCompleted"},{playStart:"playStart"},{videoError:"videoError"},{playComplete:"playComplete"},{onFirstframe:"onFirstframe"},{pauseNotify:"pauseNotify"},{unpauseNotify:"unpauseNotify"},{volumeOn:"volumeOn"},{volumeOff:"volumeOff"},{toFullScreen:"toFullScreen"},{toNomalScreen:"toNomalScreen"}];for(var i=0,len=earr.length;i<len;i++)(function(){var a=earr[i];for(var b in a)that.player.callback.add(b,function(){try{$PlayerCallJs[a[b]].apply(null,arguments)}catch(c){}})})();that.player.buildDom(!0);buildPlayer();var H5playCfg={sno:1,shno:1,startTime:0,isPlayStart:!1,isFirstFrame:!1,playDur:[],pause:{count:0,isPaused:!1,pauseStartTime:0,pauseEndTime:0,pauseDurTime:[]},heartBeats:0},_firstPlay=function(a,b){H5playCfg.startTime=b;H5playCfg.isPlayStart=!0;H5playCfg.isFirstFrame=!0;var c={le:2,sno:H5playCfg.sno++,sts:(b-sidTime)/1e3,ts:(b/1e3).toFixed(0),ppos:parseInt(a.currentTime)};sendSvndLog(c);setTimeout(function(){_onlineStatus(a)},3e3)},_pause=function(a){var b=(new Date).getTime(),c;H5playCfg.pause.pauseStartTime=b;H5playCfg.pause.isPaused=!0;H5playCfg.pause.pauseEndTime?c=b-H5playCfg.pause.pauseEndTime:c=b-H5playCfg.startTime;c=Math.floor(c/1e3);H5playCfg.playDur.push(c);var d={le:7,sno:H5playCfg.sno++,sts:(b-sidTime)/1e3,ts:(b/1e3).toFixed(0),pse:0,ppos:parseInt(a.currentTime)};sendSvndLog(d)},_playFromPause=function(a,b){H5playCfg.pause.pauseEndTime=b;var c=parseInt(b-H5playCfg.pause.pauseStartTime);H5playCfg.pause.pauseDurTime.push(c);H5playCfg.pause.count=H5playCfg.pause.count+1;H5playCfg.pause.isPaused=!1;var d={le:7,sno:H5playCfg.sno++,sts:(b-sidTime)/1e3,ts:(b/1e3).toFixed(0),pse:1,psms:c,ppos:parseInt(a.currentTime)};sendSvndLog(d);H5playCfg.heartBeats>19&&(H5playCfg.onlineTag=setInterval(function(){_onlineStatus(a)},3e4));H5playCfg.heartBeats=0},_playEnded=function(a){var b=(new Date).getTime(),c=timeSort(H5playCfg.playDur),d=timeSort(H5playCfg.pause.pauseDurTime),e={le:4,sno:H5playCfg.sno++,sts:(b-sidTime)/1e3,ts:(b/1e3).toFixed(0),endt:"playfinish",pds:c,pus:d,puc:H5playCfg.pause.count,ppos:parseInt(a.currentTime)};sendSvndLog(e);clearInterval(H5playCfg.onlineTag)},_earlyStop=function(a){var b={};if(H5playCfg.startTime||b.endt=="playfinish")return;var c=timeSort(H5playCfg.playDur),d=timeSort(H5playCfg.pause.pauseDurTime),e=(new Date).getTime();b={le:4,sno:H5playCfg.sno++,sts:(e-sidTime)/1e3,ts:(e/1e3).toFixed(0),endt:"byclose",pds:c,pus:d,puc:H5playCfg.pause.count,ppos:parseInt(a.currentTime)};sendSvndLog(b);clearInterval(H5playCfg.onlineTag);setTimeout(function(){},1e3)},_firstFrame=function(a){var b=(new Date).getTime();H5playCfg.isFirstFrame=!1;var c={le:3,sno:H5playCfg.sno++,sts:(b-sidTime)/1e3,ts:(b/1e3).toFixed(0),ppos:parseInt(a.currentTime)};sendSvndLog(c);H5playCfg.onlineTag=setInterval(function(){_onlineStatus(a)},3e4)},_onlineStatus=function(a){var b=(new Date).getTime(),c=timeSort(H5playCfg.playDur),d=timeSort(H5playCfg.pause.pauseDurTime);H5playCfg.pause.isPaused&&H5playCfg.heartBeats++;H5playCfg.pause.isPaused&&H5playCfg.heartBeats>19&&clearInterval(H5playCfg.onlineTag);var e={le:5,sno:H5playCfg.sno++,shno:H5playCfg.shno++,sts:(b-H5playCfg.startTime)/1e3,ts:(b/1e3).toFixed(0),pds:c,pus:d,puc:H5playCfg.pause.count,ppos:parseInt(a.currentTime)};sendSvndLog(e)},sendSvndLog=function(a){var b="//beacon.sina.com.cn/l.gif?snvd&";for(var c in a)b+=c+"="+a[c]+"&";for(var c in snvdLog)b+=c+"="+snvdLog[c]+"&";b=b.substring(0,b.length-1);var d=new Image;d.src=b},timeSort=function(arr){var timeArr=[],maxTime=0,minTime=0,sumTime=0;if(arr.length){maxTime=Math.max.apply(null,arr);minTime=Math.min.apply(null,arr);sumTime=eval(arr.join("+"))}else{maxTime=0;minTime=0;sumTime=0}timeArr.push(sumTime);timeArr.push(minTime);timeArr.push(maxTime);return timeArr}}function playerInit(){window.$SINAPlayer.time.initPlayerStart=(new Date).getTime();window.$SINAPlayer.player.init=!1;/phone|pad|android/i.test(navigator.userAgent)?initH5Player():chechFlashInit()}function init(){argsinit();$playerCallJs();playerInit()}function singlePlay(){var a=players.length;if(typeof configs[0].isSingle=="undefined")return!1;var b=configs[0].isSingle;if(a!==1){for(var c=1;c<a;c++)b=b||configs[c].isSingle;if(!b)return!1;for(var c=0;c<a;c++){var d=players[c].player;(function(b){b.on("playStart",function(){for(var c=0;c<a;c++){if(b==players[c].player)continue;players[c].player.pause()}})})(d);(function(b){b.on("unpauseNotify",function(){for(var c=0;c<a;c++){if(b==players[c].player)continue;players[c].player.pause()}})})(d)}}}var $playerCallJs=window.$SINAPlayer.playerCallJs,$extend=window.$SINAPlayer.util.extend,$platform=window.$SINAPlayer.util.platform,$control=window.$SINAPlayer.playersControl,$jsonp=window.$SINAPlayer.util.jsonp,videoError=!1,config={url:window.$SINAFLASHURL,id:"sinaPlayer",container:"sinaPlayerContainer",classname:"",isSingle:!1,params:{allowNetworking:"all",allowScriptAccess:"always",wmode:"opaque",allowFullScreen:"true",quality:"high"},attributes:{},flashvars:{brg:"0",brgon:"0",brginput:"0",tj:1},h5attr:{autoPlay:!1,controls:!0,loop:!1,poster:"",preload:"auto"}},that={},container=null;init();var players=window.$SINAPlayer.players,configs=window.$SINAPlayer.configs;if(players&&configs){configs.push(opt);players.push(that);players[0].player&&singlePlay()}return that};
window.$SINAPlayer.util.urlDetection=function(){function d(){var a=11,b=navigator.userAgent.toLowerCase(),c=b.indexOf("msie")>-1,d;c&&(d=b.match(/msie ([\d.]+)/)[1]);return c&&d<=a||b.indexOf("trident")>-1?!1:!0}var a=window.location.href,b=["//video.sina.com.cn/p/"];for(var c=b.length-1;c>=0;c--){if(String(a).indexOf(b[c])>=0)return d()&&$SCOPE.video.video_id%100<5?!0:!1;if(c===0)return!1}};
window.$SINAPlayer.playerInitNewH5Player=function(a){function b(a,b){var c=document.createElement("script");c.type="text/javascript";c.readyState?c.onreadystatechange=function(){if(c.readyState=="loaded"||c.readyState=="complete"){c.onreadystatechange=null;b&&b()}}:c.onload=function(){b&&b()};c.src=a;document.getElementsByTagName("head")[0].appendChild(c)}function c(a){var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=a;document.getElementsByTagName("head")[0].appendChild(b)}c("//sjs2.sinajs.cn/video/sina_player/static/css/video-js.css");c("//sjs2.sinajs.cn/video/sina_player/static/css/video.css");b("//sjs2.sinajs.cn/video/sina_player/sina.video.main.js",function(){window.sinavideo(a)})};

