/*!
* comment
* v 3.0.0
* svn ../ui/project/comment3/
* 2015-07-15 03:41
* [1,87,562] published at 2015-07-15 15:33:31
*/
!function(a){var b=navigator.userAgent.toLowerCase(),c=/msie 6/.test(b),d=function(a,b){for(var c in b)a[c]=b[c];return a},e=function(a,b){for(var c in b)a.style[c]=b[c]},f=function(a){for(var b=0,c=0;null!=a&&a!=document.body;)c+=a.offsetLeft,b+=a.offsetTop,a=a.offsetParent;return{top:b,left:c}},g=function(a,b){return a?a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)")):!1},h=function(a,b){g(a,b)||(a.className=a.className.replace(/(^\s*)|(\s*$)/g,"")+" "+b)},i=function(a,b){if(g(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}},j=function(a,b,c,d){return"undefined"==typeof d&&(d=!1),a.addEventListener?(a.addEventListener(b,c,d),!0):a.attachEvent?(a.attachEvent("on"+b,c),!0):void(a["on"+b]=c)},k=function(a,b){var g={fixedClz:"fixed",getTop:function(){return 0},getHeight:function(a){return a.offsetHeight},fixed:function(a,b,c,d){return b>c-d},onFix:function(){},onUnFix:function(){}};if(b=d(g,b),a){var k=a.parentNode,l=document.createElement("div");if(k.insertBefore(l,a),c){var m=k.style.position;"absolute"!==m&&"relative"!==m&&e(k,{position:"relative"})}var n=b.fixedClz,o=function(c){var d="1px",f="-1px";c&&(d=b.getHeight(a)+"px",f=0),e(l,{height:d,marginTop:f,overflow:"hidden"})},p=function(){var d=f(l).top,g=document.documentElement.scrollTop||document.body.scrollTop,j=b.getTop(a)||0;b.fixed(a,g,d,j)?(o(!0),h(a,n),c&&(j=j+g-f(k).top),e(a,{top:j+"px"}),b.onFix(a)):(o(!1),i(a,n),b.onUnFix(a))},q=null;j(window,"scroll",function(){q?(clearTimeout(q),setTimeout(function(){p()},100)):(p(),q=!0)}),p()}};window.ScrollFix=k;var l=a.___sinacMNT___,m=function(a){var b=window.location.search.match(new RegExp("(\\?|&)"+a+"=([^&]*)(&|$)"));return null!=b?decodeURIComponent(b[2]):null},n=function(){var a={};return a.getCookie=function(a){for(var b=document.cookie,c=b.split(";"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}return""},a.setCookie=function(a,b,c,d,e,f){var g=[];if(g.push(a+"="+window.escape(b)),c){var h=new Date,i=h.getTime()+36e5*c;h.setTime(i),g.push("expires="+h.toGMTString())}d&&g.push("path="+d),e&&g.push("domain="+e),f&&g.push(f),document.cookie=g.join(";")},a.deleteCookie=function(a){document.cookie=a+"=;expires=Fri, 31 Dec 1999 23:59:59 GMT;"},a}(),o=function(){if(B.useTip&&B.useTipClose){var a="USE_TIP_CLICK_TIMES",b=n.getCookie(a),c=function(){B.useTip.style.display="",l.addClass(B.useTip.parentNode,"use-tip-show")},d=function(){B.useTip.style.display="none",l.removeClass(B.useTip.parentNode,"use-tip-show")};b=parseInt(b,10),isNaN(b)&&(b=0),b>0||(c(),b+=1,n.setCookie(a,b,43800),j(B.useTipClose,"click",function(a){d(),l.stopPropagation(a)}),j(B.useTip,"click",function(){window.open(B.useTip.getAttribute("lhref"))}),setTimeout(function(){d()},3e4))}},p=function(){new window.ScrollFix(B.sideDa1,{getTop:function(a){var b=l.getPosition(B.footer).top,c=document.body.scrollTop||document.documentElement.scrollTop,d=a.offsetHeight;return Math.min(b-c-d,0)},fixed:function(a,b,c,d){var e=B.sideDa3,g=f(e).top,h=e.offsetHeight;return b>g+h-d},fixedClz:"top-list-fixed"})},q=function(a,b,c){var d="//comment.sina.com.cn/hotnews/info",e="day",f=1==b||2==b?"all":c,g={format:"js",channel:f,hotid:f+"_"+e},h=function(a,b){var c=b.hotnews;if(c&&0!==c.length){var d=[],e=function(a){d.push(a)},f=function(a){a+="";for(var b=/(-?\d+)(\d{3})/;b.test(a);)a=a.replace(b,"$1,$2");return a},g=c.sort(function(a,b){var c;return c=a.total_count!=b.total_count?b.total_count-a.total_count:a.position-b.position}),h="http://comment5.news.sina.com.cn/comment/skin/default.html?";e('<div class="hd"> <h2>\u70ED\u8BC4\u6392\u884C</h2> </div> <ul class="bd">');for(var i=0;10>i;i++){var j=g[i];e('<li class="list clearfix"> <div class="num"><a href="'+h+"channel="+j.channel+"&newsid="+j.newsid+'">'+f(parseInt(j.total_count))+'</a></div> <div class="txt"><a href="'+j.url+'" target="_blank">'+j.title+"</a></div> </li>")}e("</ul>"),a.topList&&(a.topList.innerHTML=d.join(""))}};new l.cmnt.DataLoader({url:d,param:g,loaded:function(a){h(B,a.data)}})},r=function(){var a=l.login.getInfo(),b=function(b){var c="";return b.sina?c=a.sina.uid:b.weibo&&(c=a.weibo.id),c}(a);if(b){var c=l.cmnt.config.encoding||"gbk",d="//comment.sina.com.cn/user/cmnt",e={uid:b,format:"json",ie:c,oe:c},f=function(a,b){var c=b.usercount,d=[],e=function(a){d.push(a)},f=function(a){a+="";for(var b=/(-?\d+)(\d{3})/;b.test(a);)a=a.replace(b,"$1,$2");return a};e('<div class="comment count">'),e('<a target="_blank" href="http://my.sina.com.cn/profile/logined#location=cmnt&cmnt=cmnt-list"><span>\u8BC4\u8BBA\u6570</span><em>'+f(c.l_count)+"</em></a>"),e("</div>"),e('<span class="line"></span>'),e('<div class="reply count">'),e('<a target="_blank" href="http://my.sina.com.cn/profile/logined#location=cmnt&cmnt=reply-list"><span>\u56DE\u590D\u6570</span><em>'+f(c.l_reply)+"</em></a>"),e("</div>"),a.commentCount&&(a.commentCount.innerHTML=d.join(""))};new l.cmnt.DataLoader({url:d,param:e,loaded:function(a){f(B,a.data)}})}},s=function(){var a=l.custEvent,b=function(){B.name.innerHTML=l.login.getName(),B.head.innerHTML=l.login.getFace()};a.add(l,"ce_login",function(){b(),r()}),a.add(l,"ce_preLogin",function(){b(),r()}),a.add(l,"ce_logout",function(){b()}),a.add(l,"ce_weiboLogin",function(){b()}),a.add(l,"ce_weiboLogout",function(){b()})},t="//comment.sina.com.cn/page/info",u=20,v=m("info_type"),w=m("group")||m("style")||0,x=m("user_uid")||"",y=m("channel")||"ty",z=m("newsid")||"6-12-7081102",A=l.builder(l.byId("SI_Wrap"),"bbs-node-type"),B=A.ids,C=window.SINA_OUTLOGIN_LAYER.getSinaCookie();2==v&&(!C||C&&x&&x!==C.uid)&&(location.href=location.href.replace("info_type=2","info_type=1")),C&&(x=x||C.uid),1==v?(t="//comment.sina.com.cn/user/cmnt?uid="+x,u=20):2==v&&(t="//comment.sina.com.cn/user/reply?uid="+x,u=20);var D=function(a){var b=" action-data=",c=" action-type=",d=" class=",e=" comment-type=",f=l.cmnt.tpls;"1"===a||"2"===a?(f.set("formList",'</div><div class="sina-comment-list" comment-type="list"></div>'),f.set("list",["<div"+d+'"latest-wrap"'+e+'"latestWrap">',"<div"+d+'"latest-loading loading"><a href="javascript:;"></a></div>',"<div"+d+'"list"'+e+'"latestList"></div>',"<div"+d+'"more"'+c+'"getMore"'+b+'"type=latest" '+e+'"latestMore"><a href="javascript:;">\u70B9\u51FB\u52A0\u8F7D\u66F4\u591A</a></div>',"</div>","<div"+d+'"all-loading loading"><a href="javascript:;"></a></div>'].join(""))):f.set("formList",'<div class="sina-comment-form sina-comment-form-top"'+e+'"form"> </div> <div class="sina-comment-list"'+e+'"list"></div><div class="sina-comment-form sina-comment-form-bottom"'+e+'"form"> ');var g=f.get("comment"),h='<a href="http://news.sina.com.cn/comment/gongyue.html" style="float:right;padding:0 0 0 20px;color:#c00 !important" target="_blank" title="\u81EA\u5F8B\u516C\u7EA6">\u81EA\u5F8B\u516C\u7EA6</a>';f.set("comment",g.replace("<!-- \u53D1\u5E03 end -->",h+"<!-- \u53D1\u5E03 end -->"))},E=function(a,b,c){var d=l.byId(a),e=b.news,f="",g=0,h="",i=0,j=0;d&&(1==c||2==c?(g=b.usercount,h=g.screen_name,i=0,1==c?(i=g.l_count,f=h+"\u7684\u8BC4\u8BBA\uFF08\u5171"+i+"\u6761\uFF09"):2==c&&(i=b.usercount.l_reply,f="\u56DE\u590D"+h+"\u7684\u8BC4\u8BBA\uFF08\u5171"+i+"\u6761\uFF09"),d.innerHTML=f,b.myMessage&&b.myMessage.reply_cmnt&&(j=b.myMessage.reply_cmnt.length,j>0&&(f="("+j+"\u6761\u65B0\u56DE\u590D)"+f)),document.title=f):(f='<a href="'+e.url+'">'+e.title+"</a>",d.innerHTML=f,document.title="\u65B0\u95FB\u8BBA\u575B_"+e.title+"_\u65B0\u6D6A\u7F51"))};D(v),window.FormList1=new l.cmnt.FormList(B.comment,{channel:y,newsid:z,parent:"",encoding:"gbk"},{url:t,channel:y,newsid:z,group:w,encoding:"gbk",page:1,pageSize:u,pageNum:20,firstPageNum:20,hotPageNum:10,maxFloor:1,isBBS:1,showReply:0,loaded:function(a){E(B.title,a.data,v)}},{isBBS:1}),q(B.topList,v,y),r(),s(),p(),o()}(window);