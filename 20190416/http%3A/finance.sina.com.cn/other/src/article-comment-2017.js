!function(exports,undefined){var C={U:"undefined"},doc=document,byId=function(e){return"string"==typeof e?doc.getElementById(e):e},byTag=function(e){return"string"==typeof e?doc.getElementsByTagName(e):e},byAttr=function(e,t,a){"string"==typeof e&&(e=byId(e));for(var n,i=[],s=e.childNodes,o=Array.prototype.slice.call(arguments),r=2===o.length,c=0,l=s.length;c<l;c++)1===(n=s[c]).nodeType&&((r?null!=n.getAttribute(t):n.getAttribute(t)===a)&&i.push(n),n.childNodes.length>0&&(i=i.concat(byAttr.apply(null,[n].concat(o.slice(1))))));return i},hasClass=function(e,t){return!!e&&e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass=function(e,t){hasClass(e,t)||(e.className=e.className.replace(/(^\s*)|(\s*$)/g,"")+" "+t)},removeClass=function(e,t){if(hasClass(e,t)){var a=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(a," ")}},toggleClass=function(e,t){hasClass(e,t)?removeClass(e,t):addClass(e,t)},preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation=function(e){return e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0,!1},contains=function(e,t){try{return e.contains?e!=t&&e.contains(t):!!(16&e.compareDocumentPosition(t))}catch(e){}},create=function(e){return"TEXT"==(e=e.toUpperCase())?doc.createTextNode(""):"BUFFER"==e?doc.createDocumentFragment():doc.createElement(e)},insertAfter=function(e,t){var a=t.parentNode;a.lastChild==t?a.appendChild(e):a.insertBefore(e,t.nextSibling)},ua=(a63=navigator.userAgent.toLowerCase(),a64={},a64.isIE=/msie/.test(a63),a64.isOPERA=/opera/.test(a63),a64.isMOZ=/gecko/.test(a63),a64.isIE6=/msie 6/.test(a63),a64.isIE7=/msie 7/.test(a63),a64.isSAFARI=/safari/.test(a63),a64.iswinXP=/windows nt 5.1/.test(a63),a64.iswinVista=/windows nt 6.0/.test(a63),a64.isFF=/firefox/.test(a63),a64.isIOS=/\((iPhone|iPad|iPod)/i.test(a63),a64),a63,a64,domReady=(a67=[],a68=0,a69=0,a72=function(e){if(!a69){if(a69=1,a67)for(;a67.length;)a67.shift()();a67=null}},function(e){a68||(a68=1,"complete"===doc.readyState?a72():doc.addEventListener?(doc.addEventListener("DOMContentLoaded",function(){doc.removeEventListener("DOMContentLoaded",arguments.callee,!1),a72()},!1),window.addEventListener("load",function(){window.removeEventListener("load",arguments.callee,!1),a72()},!1)):(doc.attachEvent("onreadystatechange",function(){"complete"==doc.readyState&&(doc.detachEvent("onreadystatechange",arguments.callee),a72())}),function(){if(!a69){var e=new Image;try{e.doScroll(),e=null}catch(e){return void setTimeout(arguments.callee,64)}a72()}}())),"complete"===doc.readyState||a69?e.call():a67.push(e)}),a67,a68,a69,a72,timeoutHandle=(a87=[],a88={success:function(e){var t=a87[e];t&&(t.isSuccess=!0,clearTimeout(t.timer))},timeout:function(e,t){var a=a87[e];a&&(a.timer=setTimeout(function(){a.isSuccess||"function"==typeof t&&t.call(this)},a.time))}},function(e,t,a){if(a87[e])throw new Error(e+"已经被占用");a87[e]={},a87[e].time=a||5e3,a87[e].isSuccess=!1,"function"==typeof t&&t.call(this,a88)}),a87,a88,cssSupports=(a103=document.createElement("div"),a104="Khtml O Moz Webkit".split(" "),a105=a104.length,function(e){if(e in a103.style)return!0;if("-ms-"+e in a103.style)return!0;for(e=e.replace(/^[a-z]/,function(e){return e.toUpperCase()});a105--;)if(a104[a105]+e in a103.style)return!0;return!1}),a103,a104,a105,getXY=(a112=function(e){if((null==e.parentNode||null==e.offsetParent||"none"==getStyle(e,"display"))&&e!=doc.body)return[0,0];var t;t=e.getBoundingClientRect();var a=getScrollPos(e.ownerDocument);return[t.left+a[1],t.top+a[0]]},ua.isIE||(a112=function(e){if((null==e.parentNode||null==e.offsetParent||"none"==getStyle(e,"display"))&&e!=doc.body)return!1;var t=null,a=[],n=ua.isSAFARI;a=[e.offsetLeft,e.offsetTop],t=e.offsetParent;var i="absolute"==getStyle(e,"position");if(t!=e)for(;t;)a[0]+=t.offsetLeft+parseInt($.getStyle(t,"borderLeftWidth"),10),a[1]+=t.offsetTop+parseInt($.getStyle(t,"borderTopWidth"),10),n&&!i&&"absolute"==getStyle(t,"position")&&(i=!0),t=t.offsetParent;for(n&&i&&(a[0]-=e.ownerDocument.body.offsetLeft,a[1]-=e.ownerDocument.body.offsetTop),t=e.parentNode;t.tagName&&!/^body|html$/i.test(t.tagName);)getStyle(t,"display").search(/^inline|table-row.*$/i)&&(a[0]-=t.scrollLeft,a[1]-=t.scrollTop),t=t.parentNode;return a}),a112),a112,getScrollPos=function(){var e=doc.documentElement,t=doc.body;return[Math.max(e.scrollTop,t.scrollTop),Math.max(e.scrollLeft,t.scrollLeft),Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.scrollHeight,t.scrollHeight)]},getPosition=function(e){if(!e)return{left:0,top:0};var t=0,a=0;if("getBoundingClientRect"in document.documentElement){var n=e.getBoundingClientRect(),i=e.ownerDocument,s=i.body,o=i.documentElement,r=o.clientTop||s.clientTop||0,c=o.clientLeft||s.clientLeft||0;t=n.top+(exports.pageYOffset||o&&o.scrollTop||s.scrollTop)-r,a=n.left+(exports.pageXOffset||o&&o.scrollLeft||s.scrollLeft)-c}else do{t+=e.offsetTop||0,a+=e.offsetLeft||0,e=e.offsetParent}while(e);return{left:a,top:t}},getStyle=function(e,t){if("getComputedStyle"in window)return getComputedStyle(e,null)[t];t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});var a=e.currentStyle[t];if(!("auto"!==a&&"100%"!=a||"width"!==t&&"height"!==t)){var n=e.getBoundingClientRect();return"width"===t?n.right-n.left+"px":n.bottom-n.top+"px"}return a},getOuterStyle=function(e,t){var a=function(e,t){var a=getStyle(e,t),n={thin:["1","2"],medium:["3","4"],thick:["5","6"]};return/^(border).+(Width)$/.test(t)&&n[a]&&(a=window.XDomainRequest?n[a][0]:n[a][1]),parseInt(a.replace("px",""),10)};return"width"===t?a(e,t)+a(e,"paddingLeft")+a(e,"paddingRight")+a(e,"borderLeftWidth")+a(e,"borderRightWidth"):a(e,t)+a(e,"paddingTop")+a(e,"paddingBottom")+a(e,"borderTopWidth")+a(e,"borderBottomWidth")},setStyle=function(e,t){if(e)for(var a in t)e.style[a]=t[a]},trim=function(e){return e.replace(/(^\s+)|(\s+$)/g,"")},encodeHTML=function(e){return"string"!=typeof e?e:0===e.length?"":e.replace(/&/g,"&gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"'").replace(/\"/g,"&quot;").replace(/\n/g,"<br>")},decodeHTML=function(e){return"string"!=typeof e?e:0===e.length?"":e.replace(/&gt;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/'/g,"'").replace(/&quot;/g,'"').replace(/<br>/g,"\n")},encodeDoubleByte=function(e){return"string"!=typeof e?e:encodeURIComponent(e)},byteLength=function(e){if(typeof e==C.U)return 0;var t=e.match(/[^\x00-\x80]/g);return e.length+(t?t.length:0)},strLeft=function(e,t){var a=e.slice(0,t),n=a.replace(/[^\x00-\xff]/g,"**").length,i=e.length,s=a.length;if(n<t)return a;if(n==t)return t==i||s==i?a:e.slice(0,t-2)+"...";switch(n-=a.length){case 0:return a;case t:return t==i?e.slice(0,(t>>1)-1)+"...":e.slice(0,t>>1);default:var o=t-n,r=e.slice(o,t);return(i=r.replace(/[\x00-\xff]/g,"").length)?e.slice(0,o)+arguments.callee(r,i):e.slice(0,o)}},indexOf=function(e,t){if(t.indexOf)return t.indexOf(e);for(var a=0,n=t.length;a<n;){if(t[a]===e)return a;a++}return-1},inArray=function(e,t){return indexOf(e,t)>-1},isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},isEmptyObj=function(e){var t=!0;for(var a in e)if(e.hasOwnProperty(a)){t=!1;break}return t},isFn=function(e){return"function"==typeof e},extend=function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e},jsonToQuery=(a220=function(e,t){return e=trim((e=null==e?"":e).toString()),t?encodeURIComponent(e):e},function(e,t){var a=[];if("object"==typeof e)for(var n in e)if(e[n]instanceof Array)for(var i=0,s=e[n].length;i<s;i++)a.push(n+"="+a220(e[n][i],t));else"function"!=typeof e[n]&&a.push(n+"="+a220(e[n],t));return a.length?a.join("&"):""}),a220,queryToJson=function(e,t){for(var a,n,i,s=trim(e).split("&"),o={},r=function(e){return t?decodeURIComponent(e):e},c=0,l=s.length;c<l;c++)s[c]&&(i=(a=s[c].split("="))[0],n=a[1],a.length<2&&(n=i,i="$nullName"),o[i]?(!0!==isArray(o[i])&&(o[i]=[o[i]]),o[i].push(r(n))):o[i]=r(n));return o},addEvent=function(e,t,a,n){var i=byId(e);if(null==i)throw new Error("addEvent 找不到对象："+e);return typeof n==C.U&&(n=!1),typeof t==C.U&&(t="click"),i.addEventListener?(i.addEventListener(t,a,n),!0):i.attachEvent?(i.attachEvent("on"+t,a),!0):void(i["on"+t]=a)},removeEvent=function(e,t,a){var n=byId(e);if(null==n)throw"removeEvent 找不到对象："+e;"function"==typeof a&&(typeof t==C.U&&(t="click"),n.addEventListener?n.removeEventListener(t,a,!1):n.attachEvent&&n.detachEvent("on"+t,a),a[t]=null)},fixEvent=function(e){return typeof e==C.U&&(e=window.event),e.target||(e.target=e.srcElement,e.pageX=e.x,e.pageY=e.y),typeof e.layerX==C.U&&(e.layerX=e.offsetX),typeof e.layerY==C.U&&(e.layerY=e.offsetY),e},byClass="function"==typeof document.getElementsByClassName?function(e,t){return t?t.getElementsByClassName(e):document.getElementsByClassName(e)}:function(e,t){for(var a=-1,n=[],i=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)"),s=t&&t.getElementsByTagName&&t.getElementsByTagName("*")||document.all||document.getElementsByTagName("*"),o=s.length;++a<o;i.test(s[a].className)&&n.push(s[a]));return s=null,n},builder=function(e,t){for(var a,n,i=byAttr(e,t),s={},o={},r=0,c=i.length;r<c;r++)null!=(n=(a=i[r]).getAttribute(t))&&(s[n]===undefined&&(s[n]=[]),s[n].push(a),o[n]===undefined&&(o[n]=a));return o.wrap=e,{box:e,list:s,ids:o}},custEvent=(a288="__custEventKey__",a289=1,a290={},a291=function(e,t){var a="number"==typeof e?e:e[a288];return a&&a290[a]&&{obj:"string"==typeof t?a290[a][t]:a290[a],key:a}},{define:function(e,t){if(e&&t){var a="number"==typeof e?e:e[a288]||(e[a288]=a289++),n=a290[a]||(a290[a]={});t=[].concat(t);for(var i=0;i<t.length;i++)n[t[i]]||(n[t[i]]=[]);return a}},undefine:function(e,t){if(e){var a="number"==typeof e?e:e[a288];a&&a290[a]&&("string"==typeof t?t in a290[a]&&delete a290[a][t]:delete a290[a])}},add:function(e,t,a,n){if(e&&"string"==typeof t&&a){var i=a291(e,t);if(!i||!i.obj)throw"custEvent ("+t+") is undefined !";return i.obj.push({fn:a,data:n}),i.key}},remove:function(e,t,a){if(e){var n,i,s=a291(e,t);if(s&&(n=s.obj)){if(isArray(n))if(a)for(i=0;i<n.length;i++)n[i].fn===a&&n.splice(i,1);else n.splice(0);else for(i in n)n[i]=[];return s.key}}},fire:function(e,t,a){if(e&&"string"==typeof t){var n,i=a291(e,t);if(i&&(n=i.obj)){isArray(a)||(a=a!==undefined?[a]:[]);for(var s=0;s<n.length;s++){var o=n[s].fn;o&&o.apply&&o.apply($,[{type:t,data:n[s].data}].concat(a))}return i.key}}},destroy:function(){a290={},a289=1}}),a288,a289,a290,a291,delegatedEvent=function(e,t,a){t||(t=[]),isArray(t)&&(t=[t]);var n={};a=a||"action-type";var i=function(i){var s=i||window.event,o=s.target||s.srcElement,r=i.type;if(function(e,t){for(var a=0,n=e.length;a<n;a+=1)if(contains(e[a],t))return!0;return!1}(t,o))return!1;if(!contains(e,o))return!1;for(var c=null;o&&o!==e&&o.getAttribute&&(c=o.getAttribute(a),!1!==(!n[r]||!n[r][c]||n[r][c]({evt:s,el:o,e:i,data:queryToJson(o.getAttribute("action-data")||"")})));)o=o.parentNode},s={};return s.add=function(t,a,s){n[a]||(n[a]={},addEvent(e,a,i)),n[a][t]=s},s.remove=function(t,a){n[a]&&(delete n[a][t],function(e){for(var t in e)return!1;return!0}(n[a])&&(delete n[a],removeEvent(e,a,i)))},s.pushExcept=function(e){t.push(e)},s.removeExcept=function(e){if(e)for(var a=0,n=t.length;a<n;a+=1)t[a]===e&&t.splice(a,1);else t=[]},s.clearExcept=function(e){t=[]},s.destroy=function(){for(var t in n){for(var a in n[t])delete n[t][a];delete n[t],removeEvent(e,i,t)}},s},bind2=(Function.prototype.bind2=function(e){var t=this;return function(){return t.apply(e,arguments)}},function(e,t){var a=e;return function(){return a.apply(t,arguments)}}),parseParam=function(e,t){var a;try{if(typeof t!=C.U)for(a in e)null!=t[a]&&(e[a]=t[a])}finally{return a=null,e}},Url=((Url=function(e){e=e||"",this.url=e,this.query={},this.parse()}).prototype={parse:function(e){e&&(this.url=e),this.parseAnchor(),this.parseParam()},parseAnchor:function(){var e=this.url.match(/\#(.*)/);e=e?e[1]:null,this._anchor=e,null!=e&&(this.anchor=this.getNameValuePair(e),this.url=this.url.replace(/\#.*/,""))},parseParam:function(){var e=this.url.match(/\?([^\?]*)/);null!=(e=e?e[1]:null)&&(this.url=this.url.replace(/\?([^\?]*)/,""),this.query=this.getNameValuePair(e))},getNameValuePair:function(e){var t={};return e.replace(/([^&=]*)(?:\=([^&]*))?/gim,function(e,a,n){""!==a&&(t[a]=n||"")}),t},getParam:function(e){return this.query[e]||""},clearParam:function(){this.query={}},setParam:function(e,t){if(null==e||""===e||"string"!=typeof e)throw new Error("no param name set");this.query=this.query||{},this.query[e]=t},setParams:function(e){this.query=e},serialize:function(e){var t=[];for(var a in e)null==e[a]||""===e[a]?t.push(a+"="):t.push(a+"="+e[a]);return t.join("&")},toString:function(){var e=this.serialize(this.query);return this.url+(e.length>0?"?"+e:"")+(this.anchor?"#"+this.serialize(this.anchor):"")},getHashStr:function(e){return this.anchor?"#"+this.serialize(this.anchor):e?"#":""}},Url),placeholder=(a427="placeholder"in create("input"),function(e){function t(e){if(!a427&&"1"!==(e.getAttribute("hasPlaceholder")||0)){var t=function(){""===e.value&&(addClass(e,"gray"),e.value=a),e.onfocus=function(){""!==e.value&&e.value!==a||(this.value="",removeClass(e,"gray"))},e.onblur=function(){""===e.value&&(this.value=a,addClass(e,"gray"))}},a=e.getAttribute("placeholder");a||e.attributes&&e.attributes.placeholder&&(a=e.attributes.placeholder.value);var n,i=e.tagName;if("INPUT"==i){var s=e.type;"password"==s&&a?((n=create("input")).type="text",n.className="pwd_placeholder gray "+e.className,n.value=a,n.autocomplete="off",e.style.display="none",e.parentNode.appendChild(n),n.onfocus=function(){n.style.display="none",e.style.display="",e.focus()},e.onblur=function(){""===e.value&&(n.style.display="",e.style.display="none")}):"text"==s&&a&&t()}else"TEXTAREA"==i&&t();e.setAttribute("hasPlaceholder","1")}}for(var a=e.length-1;a>=0;a--)t(e[a])}),a427,Timer=function(){this.list={},this.refNum=0,this.clock=null,this.allpause=!1,this.delay=25,this.add=function(e){if("function"!=typeof e)throw"The timer needs add a function as a parameters";var t=""+(new Date).getTime()+Math.random()*Math.pow(10,17);return this.list[t]={fun:e,pause:!1},this.refNum<=0&&this.start(),this.refNum++,t},this.remove=function(e){this.list[e]&&(delete this.list[e],this.refNum--),this.refNum<=0&&this.stop()},this.pause=function(e){this.list[e]&&(this.list[e].pause=!0)},this.play=function(e){this.list[e]&&(this.list[e].pause=!1)},this.stop=function(){clearInterval(this.clock),this.clock=null},this.start=function(){var e=this;this.clock=setInterval(function(){e.loop.apply(e)},this.delay)},this.loop=function(){for(var e in this.list)this.list[e].pause||this.list[e].fun()}},throttle=function(e,t){clearTimeout(e.__tId__),e.__tId__=setTimeout(function(){e.call(t)},100)};function _throttle(e,t,a){var n=!1;return function(){n||(n=!0,e.apply(a,arguments),setTimeout(function(){null,n=!1},t))}}function _debounce(e,t,a){var n;return function(){var i=arguments;n&&clearTimeout(n),n=setTimeout(function(){e.apply(a,i)},t)}}var reachBottom=(a490=doc.documentElement,a491=doc.body,a492=Math.min,a493=Math.max,function(){var e=0;try{return a490&&a490.scrollTop?e=a490.scrollTop:a491&&(e=a491.scrollTop),e+(a491.clientHeight&&a490.clientHeight?a492(a491.clientHeight,a490.clientHeight):a493(a491.clientHeight,a490.clientHeight))>a493(a491.scrollHeight,a490.scrollHeight)-150}catch(e){return!1}}),a490,a491,a492,a493,shine=(a502=new Timer,function(e,t){var a,n,i=parseParam({start:"#fff",color:"#fbb",times:2,step:5,length:4},t),s=i.start.split(""),o=i.color.split(""),r=[];for(a=0;a<i.step;a+=1){for(var c=s[0],l=1;l<i.length;l+=1){var m=parseInt(s[l],16),u=parseInt(o[l],16);c+=Math.floor(parseInt(m+(u-m)*a/i.step,10)).toString(16)}r.push(c)}for(a=0;a<i.times;a+=1)r=(n=r).slice(0,n.length-1).concat(n.concat([]).reverse());var d=!1,p=a502.add(function(){if(r.length){if(d)return void(d=!1);d=!0,e.style.backgroundColor=r.pop()}else a502.remove(p)})}),a502,createClass=function(e){var t="instance_private";function a(){this.init.apply(this,arguments)}if(e){function n(){}n.prototype=e.prototype,a.prototype=new n}return a.prototype.init=function(){},a.prototype.set=function(e,a){this[t]||(this[t]={});for(var n,i=0,s=this[t],o=e.split("."),r=o.length,c=r-1;i<r;)n=o[i],i==c&&(s[n]=a),s[n]===undefined&&(s[n]={}),s=s[n],i++},a.prototype.get=function(e){this[t]||(this[t]={});for(var a,n=0,i=this[t],s=e.split("."),o=s.length,r=o-1;n<o;){if(a=s[n],n==r)return i[a];i[a]===undefined&&(i[a]={}),i=i[a],n++}},a.extend=function(e){var t=e.extended;for(var n in e)e.hasOwnProperty(n)&&(a[n]=e[n]);t&&t(a)},a.include=function(e){var t=e.included;for(var n in e)e.hasOwnProperty(n)&&(a.prototype[n]=e[n]);t&&t(a)},a},animate=function(){var Tween={Linear:function(e,t,a,n){return a*e/n+t},Quad:{easeIn:function(e,t,a,n){return a*(e/=n)*e+t},easeOut:function(e,t,a,n){return-a*(e/=n)*(e-2)+t},easeInOut:function(e,t,a,n){return(e/=n/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t}},Cubic:{easeIn:function(e,t,a,n){return a*(e/=n)*e*e+t},easeOut:function(e,t,a,n){return a*((e=e/n-1)*e*e+1)+t},easeInOut:function(e,t,a,n){return(e/=n/2)<1?a/2*e*e*e+t:a/2*((e-=2)*e*e+2)+t}},Quart:{easeIn:function(e,t,a,n){return a*(e/=n)*e*e*e+t},easeOut:function(e,t,a,n){return-a*((e=e/n-1)*e*e*e-1)+t},easeInOut:function(e,t,a,n){return(e/=n/2)<1?a/2*e*e*e*e+t:-a/2*((e-=2)*e*e*e-2)+t}},Quint:{easeIn:function(e,t,a,n){return a*(e/=n)*e*e*e*e+t},easeOut:function(e,t,a,n){return a*((e=e/n-1)*e*e*e*e+1)+t},easeInOut:function(e,t,a,n){return(e/=n/2)<1?a/2*e*e*e*e*e+t:a/2*((e-=2)*e*e*e*e+2)+t}},Sine:{easeIn:function(e,t,a,n){return-a*Math.cos(e/n*(Math.PI/2))+a+t},easeOut:function(e,t,a,n){return a*Math.sin(e/n*(Math.PI/2))+t},easeInOut:function(e,t,a,n){return-a/2*(Math.cos(Math.PI*e/n)-1)+t}},Expo:{easeIn:function(e,t,a,n){return 0===e?t:a*Math.pow(2,10*(e/n-1))+t},easeOut:function(e,t,a,n){return e==n?t+a:a*(1-Math.pow(2,-10*e/n))+t},easeInOut:function(e,t,a,n){return 0===e?t:e==n?t+a:(e/=n/2)<1?a/2*Math.pow(2,10*(e-1))+t:a/2*(2-Math.pow(2,-10*--e))+t}},Circ:{easeIn:function(e,t,a,n){return-a*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOut:function(e,t,a,n){return a*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOut:function(e,t,a,n){return(e/=n/2)<1?-a/2*(Math.sqrt(1-e*e)-1)+t:a/2*(Math.sqrt(1-(e-=2)*e)+1)+t}},Elastic:{easeIn:function(e,t,a,n,i,s){return 0===e?t:1==(e/=n)?t+a:(s||(s=.3*n),!i||i<Math.abs(a)?(i=a,o=s/4):o=s/(2*Math.PI)*Math.asin(a/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/s)+t);var o},easeOut:function(e,t,a,n,i,s){return 0===e?t:1==(e/=n)?t+a:(s||(s=.3*n),!i||i<Math.abs(a)?(i=a,o=s/4):o=s/(2*Math.PI)*Math.asin(a/i),i*Math.pow(2,-10*e)*Math.sin((e*n-o)*(2*Math.PI)/s)+a+t);var o},easeInOut:function(e,t,a,n,i,s){return 0===e?t:2==(e/=n/2)?t+a:(s||(s=n*(.3*1.5)),!i||i<Math.abs(a)?(i=a,o=s/4):o=s/(2*Math.PI)*Math.asin(a/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/s)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/s)*.5+a+t);var o}},Back:{easeIn:function(e,t,a,n,i){return i===undefined&&(i=1.70158),a*(e/=n)*e*((i+1)*e-i)+t},easeOut:function(e,t,a,n,i){return i===undefined&&(i=1.70158),a*((e=e/n-1)*e*((i+1)*e+i)+1)+t},easeInOut:function(e,t,a,n,i){return i===undefined&&(i=1.70158),(e/=n/2)<1?a/2*(e*e*((1+(i*=1.525))*e-i))+t:a/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t}},Bounce:{easeIn:function(e,t,a,n){return a-Tween.Bounce.easeOut(n-e,0,a,n)+t},easeOut:function(e,t,a,n){return(e/=n)<1/2.75?a*(7.5625*e*e)+t:e<2/2.75?a*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?a*(7.5625*(e-=2.25/2.75)*e+.9375)+t:a*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOut:function(e,t,a,n){return e<n/2?.5*Tween.Bounce.easeIn(2*e,0,a,n)+t:.5*Tween.Bounce.easeOut(2*e-n,0,a,n)+.5*a+t}}},color={sub:function(e,t,a){return a?e.substring(t,t+a):e.substring(t)},hex:function(e){if(e<0)return"00";if(e>255)return"ff";var t="0"+e.toString(16);return t.substring(t.length-2)},GetColors:function(e){var t,a,n;return(e=e.replace("#","")).length>3?(t=color.sub(e,0,2),a=color.sub(e,2,2),n=color.sub(e,4,2)):(t=color.sub(e,0,1),a=color.sub(e,1,1),n=color.sub(e,2,1),t+=t,a+=a,n+=n),[parseInt(t,16),parseInt(a,16),parseInt(n,16)]}},fn={getElement:function(e){return"string"==typeof e?doc.getElementById(e):e},objType:function(e){switch(Object.prototype.toString.call(e)){case"[object Object]":return"Object";case"[object Number]":return"Number";case"[object Array]":return"Array"}},getStyle:function(e,t){var a;if(doc.defaultView){var n=doc.defaultView.getComputedStyle(e,null);"borderWidth"==t&&(t="borderLeftWidth"),"auto"==(a=t in n?n[t]:n.getPropertyValue(t))&&(a="0px")}return e.style[t]||e.currentStyle&&("auto"==e.currentStyle[t]?"0px":e.currentStyle[t])||a},getOriCss:function(e,t){var a=[];for(var n in t)if(t.hasOwnProperty(n))if("transparent"==fn.getStyle(e,n)||/^#|rgb\(/.test(fn.getStyle(e,n))){if("transparent"==fn.getStyle(e,n)&&a.push([255,255,255]),/^#/.test(fn.getStyle(e,n))&&a.push(color.GetColors(fn.getStyle(e,n))),/^rgb\(/.test(fn.getStyle(e,n))){var i=fn.getStyle(e,n).replace(/^rgb\(([0-9]{0,3}),\s([0-9]{0,3}),\s([0-9]{0,3})\)/g,"$1 $2 $3").split(" ");a.push([parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}}else"opacity"==n?a.push(100*fn.getStyle(e,n)):a.push(parseInt(fn.getStyle(e,n),10));return a},getEndCss:function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&("opacity"==a?t.push(100*e[a]):/^#/.test(e[a])?t.push(color.GetColors(e[a])):t.push(parseInt(e[a],10)));return t}};function Anim(){this.init.apply(this,arguments[0])}return Anim.prototype={init:function(){var e;if(this.elem=fn.getElement(arguments[0]),this.cssObj=arguments[1],this.cssOri=fn.getOriCss(this.elem,arguments[1]),this.cssEnd=fn.getEndCss(arguments[1]),this.durtime=arguments[2],this.animType="Tween.Linear",this.funObj=null,this.start=!1,this.complete=!1,this.onPause=!1,this.onRestart=!1,arguments.length<3)throw new Error("至少要传入3个参数");if(4==arguments.length){if("Object"==fn.objType(arguments[3])){this.funObj=arguments[3];for(e in this.funObj)"start"==e.toString()&&(this.start=!0),"complete"==e.toString()&&(this.complete=!0)}"string"==typeof arguments[3]&&(this.animType=arguments[3])}else if(5==arguments.length&&(this.animType=arguments[3],"Object"==fn.objType(arguments[4]))){this.funObj=arguments[4];for(e in this.funObj)"start"==e.toString()&&(this.start=!0),"complete"==e.toString()&&(this.complete=!0)}this.startAnim()},startAnim:function(){this.start&&this.funObj.start.call(this,this.elem);var that=this,t=0,props=[];for(var pro in this.cssObj)this.cssObj.hasOwnProperty(pro)&&props.push(pro);clearInterval(this.timer),this.timer=setInterval(function(){var d,c1,c2,c3,b1,b2,b3,r,g,b,i;if(that.onPause)clearInterval(that.timer);else if(t<that.durtime/10)for(t++,i=0;i<props.length;i++){var c;"Array"!=fn.objType(that.cssOri[i])&&(b=that.cssOri[i]),"Array"!=fn.objType(that.cssEnd[i])&&(c=that.cssEnd[i]-that.cssOri[i]),d=that.durtime/10,"Array"==fn.objType(that.cssOri[i])&&"Array"==fn.objType(that.cssEnd[i])?(b1=that.cssOri[i][0],b2=that.cssOri[i][1],b3=that.cssOri[i][2],c1=that.cssEnd[i][0]-that.cssOri[i][0],c2=that.cssEnd[i][1]-that.cssOri[i][1],c3=that.cssEnd[i][2]-that.cssOri[i][2],r=color.hex(Math.ceil(eval(that.animType)(t,b1,c1,d))),g=color.hex(Math.ceil(eval(that.animType)(t,b2,c2,d))),b=color.hex(Math.ceil(eval(that.animType)(t,b3,c3,d))),that.elem.style[props[i]]="#"+r+g+b):"opacity"==props[i].toString()?that.elem.style[props[i]]=Math.ceil(eval(that.animType)(t,b,c,d))/100:that.elem.style[props[i]]=Math.ceil(eval(that.animType)(t,b,c,d))+"px"}else{for(i=0;i<props.length;i++)"Array"==fn.objType(that.cssOri[i])&&"Array"==fn.objType(that.cssEnd[i])?(c1=that.cssEnd[i][0],c2=that.cssEnd[i][1],c3=that.cssEnd[i][2],r=color.hex(Math.ceil(eval(that.animType)(t,b1,c1,d))),g=color.hex(Math.ceil(eval(that.animType)(t,b2,c2,d))),b=color.hex(Math.ceil(eval(that.animType)(t,b3,c3,d))),that.elem.style[props[i]]="#"+r+g+b):"opacity"==props[i].toString()?that.elem.style[props[i]]=that.cssEnd[i]/100:that.elem.style[props[i]]=that.cssEnd[i]+"px";clearInterval(that.timer),that.complete&&that.funObj.complete.call(that,that.elem)}},10)},pause:function(){this.onPause=!0}},function(){return new Anim(arguments)}}(),getGuid=function(){return Math.abs((new Date).getTime())+"_"+Math.round(1e8*Math.random())};function template(e,t,a){var n,i=Object.prototype.toString.call(t),s=0;if("[object Array]"===i){for(n=[],s=0;s<t.length;s++)n.push(o(t[s],s));n=n.join("")}else"[object Object]"===i&&(n=o(t,s++));return n;function o(t,n){var i=a?a(t,n):t;return e.replace(/@@(\w+)@@/g,function(e,t){var a=i[t];return void 0===a?e:a})}}function xhr(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&200===t.status&&console.log(t.responseText)},t.send()}function getJsonp(e,t){var a,n=Date.now(),i=document.getElementsByTagName("body")[0],s=document.createElement("script"),o=t.data,r="?",c=t.jsonpCallback||"jsonp_"+n,l=t.jsonp||"callback",m=function(){s.onreadystatechange=s.onload=null,window[c]=null,i.removeChild(s)};if(s.charset=t.charset||"utf-8",s.type="text/javascript",window[c]=t.success,o)for(a in o)o.hasOwnProperty(a)&&(r+=a+"="+o[a]+"&");"onreadystatechange"in s?s.onreadystatechange=function(){"loaded"===s.readyState.toLowerCase()&&m()}:s.onload=function(){m()},s.src=e+r+l+"="+c+(t.cache?"":"&_="+n),i.appendChild(s)}function getScript(e,t){var a=document.createElement("script");a.charset="utf-8",a.type="text/javascript",a.src=e,document.getElementsByTagName("body")[0].appendChild(a),"onreadystatechange"in a?a.onreadystatechange=function(){"loaded"===a.readyState.toLowerCase()&&t&&t()}:a.onload=function(){t&&t()}}var jsonp=function(url,cb){var head=byTag("head")[0],ojs=byId(url);ojs&&head.removeChild(ojs),-1==url.indexOf("&")?url+="?":url+="&",url=url+"_t"+getGuid();var fun=exports.fun="jsonp_"+getGuid();"function"==typeof cb&&eval(fun+"=function(res){cb(res)}"),url=url+"&callback="+fun;var js=create("script");js.src=url,js.id=url,js.type="text/javascript",js.language="javascript",head.appendChild(js)},jsLoad=function(e,t){var a=byTag("head")[0],n=create("script"),i=!1;n.onload=n.onreadystatechange=function(){i||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(i=!0,n.onload=n.onreadystatechange=null,"function"==typeof t&&t())},n.src=e;try{a.appendChild(n)}catch(e){}},ijax={arrTaskLists:[],createLoadingIframe:function(){if(null!=this.loadFrames)return!1;var e="loadingIframe_thread"+Math.ceil(1e4*Math.random()),t="loadingIframe_thread"+Math.ceil(1e4*(Math.random()+1));this.loadFrames=[e,t];var a="";ua.isIE6&&(a='javascript:void((function(){document.open();document.domain="sina.com.cn";document.close()})())');var n='<iframe id="'+e+'" name="'+e+'" class="invisible" scrolling="no" src="" allowTransparency="true" style="display:none;" frameborder="0" ></iframe><iframe id="'+t+'" name="'+t+'" class="invisible" scrolling="no" src="'+a+'" allowTransparency="true" style="display:none;" frameborder="0" ></iframe>',i=create("div");i.id="ijax_iframes",i.innerHTML=n,doc.body.appendChild(i);var s=setInterval(bind2(function(){null!=byId(this.loadFrames[0])&&null!=byId(this.loadFrames[1])&&(clearInterval(s),s=null,this.loadingIframe={thread1:{container:byId(this.loadFrames[0]),isBusy:!1},thread2:{container:byId(this.loadFrames[1]),isBusy:!1}},this.loadByList())},this),10)},isIjaxReady:function(){if(typeof this.loadingIframe==C.U)return!1;for(var e in this.loadingIframe)if(!this.loadingIframe[e].isBusy)return this.loadingIframe[e].isBusy=!0,this.loadingIframe[e];return!1},request:function(e,t){var a={};a.url=e,a.option=t||{},this.arrTaskLists.push(a),null==this.loadFrames?this.createLoadingIframe():this.loadByList()},loadByList:function(){if(0===this.arrTaskLists.length)return!1;var e=this.isIjaxReady();if(!e)return!1;var t=this.arrTaskLists[0];this.loadData(t.url,t.option,e),this.arrTaskLists.shift()},loadData:function(e,t,a){var n=new Url(e);if(t.GET)for(var i in t.GET)n.setParam(i,encodeDoubleByte(t.GET[i]));n=n.toString();var s=a.container;if(s.listener=bind2(function(){if(t.onComplete||t.onException)try{var e,i=s.contentWindow.document,o=byTag("textarea")[0];e=typeof o!=C.U?o.value:i.body.innerHTML,t.onComplete?t.onComplete(e):t.onException()}catch(e){t.onException&&t.onException(e.message,n.toString())}a.isBusy=!1,removeEvent(s,"load",s.listener),this.loadByList()},this),addEvent(s,"load",s.listener),t.POST){var o=create("form");o.id="IjaxForm",o.action=n,o.method="post",o.target=s.id;for(var r in t.POST){var c=create("input");c.type="hidden",c.name=r,c.value=t.POST[r],o.appendChild(c)}doc.body.appendChild(o);try{o.submit()}catch(e){}}else try{window.frames(s.id).location.href=n}catch(e){s.src=n}}},html5Ijax=(a886=function(){},a888=/^http\s?\:\/\/[a-z\d\-\.]+/i,a889="ijax-html5-iframe-",a890=function(e){e=e||{},this.init(e)},a890.prototype={ready:!1,init:function(e){if(!this.ready){var t,a,n,i,s,o=this,r=e.proxyUrl;if(o.onsuccess=e.onsuccess||a886,o.onfailure=e.onfailure||a886,r){s=function(e){if(o.ready&&e.origin===o.target){var t=e.data;t&&"failure"!==t?(o.onsuccess&&o.onsuccess(e.data),o.destroy()):(o.destroy(),o.onfailure&&o.onfailure())}else o.destroy()},addEvent(window,"message",s),a='<iframe id="'+(t=a889+Date.parse(new Date))+'" name="'+t+'" src="'+r+'" frameborder="0" style="width:0;height:0;display:none;"></iframe>';var c=create("div");c.id=a889+"iframes",c.innerHTML=a,n=c.childNodes[0],addEvent(n,"load",i=function(){o.ready=!0;var e=n.src.match(a888);o.target=e&&e[0]||"*"}),doc.body.insertBefore(n,doc.body.firstChild),o._iframe=n,o._iframeLoaded=i,o._receiver=s}}},send:function(e){var t=this,a=(e=e||{}).url,n=e.data,i=e.onsuccess,s=e.onfailure;a&&"string"==typeof a&&(i&&(t.onsuccess=i),s&&(t.onfailure=s),t.ready?(n?n+="&_url="+window.encodeURIComponent(a):n="_url="+window.encodeURIComponent(a),t._iframe.contentWindow.postMessage(n,t.target)):setTimeout(function(){t.send(e)},50))},destroy:function(){var e=this._iframe;removeEvent(e,"load",this._iframeLoaded),e.parentNode.removeChild(e),removeEvent(window,"message",this._receiver),this._iframe=null,this._iframeLoaded=null,this._receiver=null}},a890),a886,a888,a889,a890,MessageStorage=function(){if(window.localStorage)return{set:function(e,t){localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)},remove:function(e){localStorage.removeItem(e)},clear:function(){localStorage.clear}}}(),$={C:C,doc:doc,byId:byId,byTag:byTag,byAttr:byAttr,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,preventDefault:preventDefault,stopPropagation:stopPropagation,contains:contains,create:create,insertAfter:insertAfter,ua:ua,domReady:domReady,timeoutHandle:timeoutHandle,cssSupports:cssSupports,getXY:getXY,getScrollPos:getScrollPos,getPosition:getPosition,getStyle:getStyle,getOuterStyle:getOuterStyle,setStyle:setStyle,trim:trim,encodeHTML:encodeHTML,decodeHTML:decodeHTML,encodeDoubleByte:encodeDoubleByte,byteLength:byteLength,strLeft:strLeft,indexOf:indexOf,inArray:inArray,isArray:isArray,isEmptyObj:isEmptyObj,isFn:isFn,extend:extend,jsonToQuery:jsonToQuery,queryToJson:queryToJson,addEvent:addEvent,removeEvent:removeEvent,fixEvent:fixEvent,byClass:byClass,builder:builder,custEvent:custEvent,delegatedEvent:delegatedEvent,bind2:bind2,parseParam:parseParam,Url:Url,placeholder:placeholder,Timer:Timer,throttle:throttle,_throttle:_throttle,_debounce:_debounce,reachBottom:reachBottom,shine:shine,createClass:createClass,animate:animate,getGuid:getGuid,jsonp:jsonp,jsLoad:jsLoad,ijax:ijax,html5Ijax:html5Ijax,getScript:getScript,getJsonp:getJsonp,xhr:xhr,template:template,messageStorage:MessageStorage};$.register=function(e,t){for(var a,n=0,i=$,s=e.split("."),o=s.length,r=o-1;n<o;){if(a=s[n],n==r){if(i[a]!==undefined)throw s+":: has registered";i[a]=t($)}i[a]===undefined&&(i[a]={}),i=i[a],n++}};var EXPORTS_NAME="sinacMNT",UGLIFY_NAME="___"+EXPORTS_NAME+"___";exports[EXPORTS_NAME]=exports[UGLIFY_NAME]=$}(window),window.___sinacMNT___.register("msg",function(){var e={I001:"评论成功",I002:"并已转发微博",I003:"请输入评论",I004:"请输入密码",I005:"请先登录再提交评论",I006:"已到最后一页",I007:"发布",I008:"赞",I008d:"已赞",I008e:"您已赞过该评论",I009:"回复",I010:"微博账号/博客/邮箱",I011:"下次自动登录",I012:"注册",I013:"忘记密码？",I014:"点击加载更多",I015:"最热评论",I016:"最新评论",I017:"刷新",I018:"分享到微博",I019:"分享",I020:"分享到新浪微博",I021:"分享到腾讯微博",I022:"月",I023:"日",I024:"今天",I025:"秒前",I026:"分钟前",I027:"更多精彩评论&gt;&gt;",I028:"还有<em><% this.num %></em>条评论",I029:"登录",I030:"退出",I031:"<em><% this.comment %></em>条评论",I032:"<em><% this.person %></em>人参与",I033:"<em><% this.post %></em>条相关帖子",I034:"查看对话",I035:"收起对话",I036:"回复<% this.userLnk %>：",I037:"：",I038:"网友评论",I039:'<span class="reply-form-tip"><em>点赞成功！</em>再对TA说点什么吧~</span>',I040:"查看剩余<em><% this.replyNum %></em>条回复",I041:"加载中，请稍候...",I042:"评论超时，请稍候再试",I043:"举报",I045:'根据<a href="http://www.cac.gov.cn/2017-08/25/c_1121541842.htm" target="_blank">《互联网跟帖评论服务管理规定》</a><br>发布评论前请绑定手机号，谢谢！',I046:"绑定手机号",I047:"关闭",I048:"查看全部<em><% this.totalNum %></em>条评论 &gt;"};return{set:function(t,a){"all"!==t?e[t]=a:e=a},get:function(t){return void 0===t?e:e[t]}}}),function(e,t){var a=location.protocol,n=e.___sinacMNT___;if(n.custEvent.define(n,["ce_login","ce_weiboLogin","ce_weiboLogout","ce_loginError","ce_logout","ce_preLogin","ce_layerHide","ce_layerShow","ce_cmnt_new","ce_cmnt_close"]),!e.SINA_OUTLOGIN_LAYER)throw new Error(a+"//i.sso.sina.com.cn/js/outlogin_layer.js not loaded");var i=e.SINA_OUTLOGIN_LAYER,s="http://comment5.news.sina.com.cn/comment/skin/default.html?info_type=1&style=1&user_uid=";n.register("login",function(){var t=n.createClass(),o=function(e,t){var a=["login","pre_login","weibo_login","logout","weibo_login_security"];t=t||0;var i=n.byTag("body")[0];if(i){n.addClass(i,"sinacMNT_"+e);for(var s=0,o=a.length;s<o;s++){var r=a[s];r==e||t||n.removeClass(i,"sinacMNT_"+r)}}},r=function(e){n.jsonp(a+"//comment5.news.sina.com.cn/user/security",function(t){t&&t.result&&t.result.data&&((t.result.data.is_security||!1)&&"function"==typeof e&&e())})},c=null,l="";return t.include({init:function(e){this._setOpt(e),this._setLogin()},_setOpt:function(e){this.set("opt",n.extend({loginSuccess:function(){},logoutSuccess:function(){},error:function(e){}},e,!0))},_setLogin:function(){var e=this;i.STK.Ready(function(){i.register("login_success",function(){e.lInSuccess()}).register("logout_success",function(){e.lOutSuccess()}).register("login_error",function(t){e.lInError(t)}).register("layer_hide",function(){n.custEvent.fire(n,"ce_layerHide")}).register("layer_show",function(){n.custEvent.fire(n,"ce_layerShow")}).register("pre_login_state",function(){i.isPreLoginState&&(o("pre_login"),e.getPreLoginWeiboInfo(function(e){e.data?((c=e.data).name=c.name||c.screen_name,n.custEvent.fire(n,"ce_preLogin")):c=null},function(){}))}),i.init(),e.isLogin()||o("logout")})},lOutSuccess:function(){var e=this.get("opt");l="",n.custEvent.fire(n,"ce_logout"),e.logoutSuccess(),o("logout")},lInSuccess:function(e){var t=this.get("opt");l=i.getSinaCookie().uid||"",this.getWeiboInfo(function(t){o("weibo_login"),t.result&&t.result.data?(c=t.result.data,n.custEvent.fire(n,"ce_weiboLogin"),r(function(){o("weibo_login_security",1)})):(c=null,n.custEvent.fire(n,"ce_weiboLogout")),n.custEvent.fire(n,"ce_login"),n.isFn(e)},function(){o("login"),n.isFn(e)}),t.loginSuccess()},lInError:function(e){var t=this.get("opt");l="";var a=!n.inArray(e.errno,["5024","5025","4049","2070"]);if(!e.result)return n.custEvent.fire(n,"ce_loginError",{validated:a,info:e}),t.error(),!1},isLogin:function(){return i.isLogin()},getWeiboInfo:function(t,i){var s=e.sinaSSOController.getSinaCookie(),o=a+"//api.sina.com.cn/weibo/2/users/show.json?uid="+s.uid+"&source=2835469272",r=n.getGuid();n.timeoutHandle(r,function(e){e.timeout(r,function(){i()}),n.jsonp(o,function(a){t(a),e.success(r)})},3e3)},getPreLoginWeiboInfo:function(e,t){r(function(){o("weibo_login_security",1)}),i.getPreLoginWeiboData({timeout:3e4,onSuccess:function(t){e(t)},onFailure:function(e){t(e)}})},lOut:function(){i.logout()},lIn:function(e,t,a){if(window.SINA_USER_PANEL){var n=window.SINA_USER_PANEL;try{n.setOutLoginMiddle(!0)}catch(e){}n.getOutLogin().show()}else i.show()},getName:function(){var e="",t=i.getSinaCookie();return c?e='<a href="http://weibo.com/u/'+c.id+'/" target="_blank" data-sudaclick="comment_nickname_p">'+(c.screen_name||c.name)+"</a>":t&&(e='<a href="'+s+t.uid+'" target="_blank" data-sudaclick="comment_nickname_p">'+(t.nick||t.name)+"</a>"),e},getFace:function(){var e="",t="//img.t.sinajs.cn/t5/style/images/face/male_180.png",n=i.getSinaCookie(),o=a+"//weibo.com/";return c?(o=a+"//weibo.com/u/"+c.id+"/",e=c.screen_name||c.name,t=c.profile_image_url.replace("/50/","/180/").replace(/^http[s]?\:(?=\/\/)/,"")):n&&(t="//portrait5.sinaimg.cn/"+n.uid+"/blog/50",e=n.nick||n.name,o=s+n.uid),'<a href="'+o+'" target="_blank" title="'+e+'" data-sudaclick="comment_avatar_p"><img src="'+t+'" alt="" /></a>'},getInfo:function(){return{sina:i.getSinaCookie(),weibo:c}},getCommentConfig:function(){var e=this.getInfo(),t="";if(e.weibo){var a=e.weibo;t="&wb_verified="+a.verified+"&wb_screen_name="+a.screen_name+"&wb_user_id="+a.idstr+"&wb_time=&wb_profile_img="+a.profile_image_url}return t},isUidChanged:function(){var e=i.getSinaCookie().uid;return l!==e}}),new t})}(window),function(exports,undefined){var $=exports.___sinacMNT___,doc=$.doc;$.register("app",function(){var app={},a1078,a1079,a1164;return app.sima={conf:{action:"tydata_fail",data:{},pk:"187522",uk:"ty"},source:location.protocol+"//news.sina.com.cn/js/pctianyi/sima.js",track:function(e){var t=this;e&&(t.conf.data=e),window.SIMA?window.SIMA(t.conf):$.getScript(this.source,function(){window.SIMA(t.conf)})}},app.track=function(e,t){try{exports._S_uaTrack(e,t)}catch(e){}},app.textareaUtils=(a1078={},a1079=doc.selection,a1078.selectionStart=function(e){if(!a1079)return e.selectionStart;var t=a1079.createRange(),a=0,n=doc.body.createTextRange();for(n.moveToElementText(e);n.compareEndPoints("StartToStart",t)<0;a++)n.moveStart("character",1);return a},a1078.selectionBefore=function(e){return e.value.slice(0,a1078.selectionStart(e))},a1078.selectText=function(e,t,a){if(e.focus(),a1079){var n=e.createTextRange();n.collapse(1),n.moveStart("character",t),n.moveEnd("character",a-t),n.select()}else e.setSelectionRange(t,a)},a1078.insertText=function(e,t,a,n){if(e.focus(),n=n||0,!a1079){var i=e.value,s=a-n,o=s+t.length;return e.value=i.slice(0,s)+t+i.slice(a,i.length),void a1078.selectText(e,o,o)}var r=a1079.createRange();r.moveStart("character",-n),r.text=t},a1078.getCursorPos=function(e){var t=0;if($.ua.isIE){e.focus();var a=null,n=(a=a1079.createRange()).duplicate();n.moveToElementText(e),n.setEndPoint("EndToEnd",a),e.selectionStart=n.text.length-a.text.length,e.selectionEnd=e.selectionStart+a.text.length,t=e.selectionStart}else(e.selectionStart||"0"===e.selectionStart)&&(t=e.selectionStart);return t},a1078.getSelectedText=function(e){var t;return window.getSelection?(t=e).selectionStart!==undefined&&t.selectionEnd!==undefined?t.value.substring(t.selectionStart,t.selectionEnd):"":a1079.createRange().text},a1078.setCursor=function(e,t,a){if(t=null===t?e.value.length:t,a=null===a?0:a,e.focus(),e.createTextRange){var n=e.createTextRange();n.move("character",t),n.moveEnd("character",a),n.select()}else e.setSelectionRange(t,t+a)},a1078.unCoverInsertText=function(e,t,a){(a=null===a?{}:a).rcs=null===a.rcs?e.value.length:1*a.rcs,a.rccl=null===a.rccl?0:1*a.rccl;var n=e.value,i=n.slice(0,a.rcs),s=n.slice(a.rcs+a.rccl,""===n?0:n.length);e.value=i+t+s,this.setCursor(e,a.rcs+(null===t?0:t.length))},a1078),app.splitNum=function(e){e+="";for(var t=/(-?\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e},app.template=function(e,t){function a(e,t){for(var a,n=/<%([^%>]+)?%>/g,i=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,s="var r=[];\n",o=0,r=function(e,t){return s+=t?e.match(i)?e+"\n":"r.push("+e+");\n":e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",r};a=n.exec(e);)r(e.slice(o,a.index))(a[1],!0),o=n.lastIndex;return r(e.substr(o,e.length-o)),s+='return r.join("");',new Function(s.replace(/[\r\t\n]/g,"")).call(t)}var n;return void 0!==(n=e)&&n.nodeName&&n.nodeType?a(/^(textarea|input)$/i.test(e.nodeName)?e.value:e.innerHTML,t):a(e,t)},app.simCheckbox=function(e){var t="sina-comment-chkbox-selected";$.hasClass(e,t)?($.removeClass(e,t),e.setAttribute("checked",0)):($.addClass(e,t),e.setAttribute("checked",1))},app.textareaAutoGrow=(a1164=function(e,t){var a={clzPrefix:"autogrow-textarea-",minHeight:"auto",maxHeight:1/0,context:e.parentNode,styles:{},realTime:!0,speed:200};"auto"===(t=$.extend(a,t)).minHeight&&(t.minHeight=$.getStyle(e,"height").replace("px","")),e&&(this.stop=!1,this.config=t,this.textarea=e,this._bindEvent(),this.setCloneStyle(),this.grow())},a1164.prototype={constructor:a1164,_bindEvent:function(){var e=this,t=e.textarea;$.addEvent(t,"keyup",function(t){e.throttleGrow()}),$.addEvent(t,"focus",function(t){e.throttleGrow()}),$.addEvent(window,"resize",function(t){e.throttleGrow()})},setCloneStyle:function(){var e=this.config,t=this.textarea;this.clone||(this.clone=document.createElement("div"),this.clone.className=e.clzPrefix+"clone",e.context.appendChild(this.clone));var a=this.clone,n={position:"absolute",wordWrap:"break-word",top:0,left:"-9999px"},i={};i=$.isEmptyObj(e.styles)?$.extend(n,{width:$.getStyle(t,"width"),fontSize:$.getStyle(t,"fontSize"),fontFamily:$.getStyle(t,"fontFamily"),lineHeight:$.getStyle(t,"lineHeight")}):$.extend(n,e.styles),$.setStyle(a,i)},throttleGrow:function(){this.stop||$.throttle(this.grow,this,this.config.speed)},grow:function(){var e=this.config;e.realTime&&this.setCloneStyle(),this.clone.innerHTML=this.textarea.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(e){return function(e,t){for(var a=0,n="";a<t;a++)n+=e;return n}("&nbsp;",e.length-1)+" "});var t=$.getStyle(this.clone,"height").replace("px",""),a="hidden";(t=Math.max(t,e.minHeight))>e.maxHeight&&(t=e.maxHeight,a="auto"),t=Math.min(t,e.maxHeight),$.setStyle(this.textarea,{height:t+"px",overflow:a})},revive:function(){this.stop=!1},destroy:function(){this.stop=!0}},a1164),app.getWinSize=function(e){var t,a,n;return"CSS1Compat"===(n=e?e.document:document).compatMode?(t=n.documentElement.clientWidth,a=n.documentElement.clientHeight):window.innerHeight?(t=(n=e?e.self:window).innerWidth,a=n.innerHeight):n.documentElement&&n.documentElement.clientHeight?(t=n.documentElement.clientWidth,a=n.documentElement.clientHeight):n.body&&(t=n.body.clientWidth,a=n.body.clientHeight),navigator.userAgent.match(/iPad;.*CPU.*OS 7_\d/i)&&!window.navigator.standalone&&t>a&&(a=672),{width:t,height:a}},app.post=function(url,param,cb,timeoutCb,time){var cbName="iJax_"+Date.now();try{doc.domain="sina.com.cn"}catch(e){}param.callback=cbName;var TIMEOUT_NAME="TD_"+(new Date).getTime();$.timeoutHandle(TIMEOUT_NAME,function(handle){if(handle.timeout(TIMEOUT_NAME,function(){"function"==typeof timeoutCb&&timeoutCb()}),window[cbName]=function(m){"string"==typeof m&&(m=eval("("+m+")")),"function"==typeof cb&&cb(m),handle.success(TIMEOUT_NAME)},!$.ua.isFF||param.iframe&&1===param.iframe)$.ijax.request(url,{POST:param});else{param.callback=undefined,param=$.jsonToQuery(param);var Sender=new $.html5Ijax({proxyUrl:location.protocol+"//comment5.news.sina.com.cn/comment/postmsg.html"});Sender.send({url:url,data:param,onsuccess:window[cbName],onfailure:function(){}})}},time||5e3)},app.cmntEncodeHtml=function(e){return $.encodeHTML($.decodeHTML(e))},app})}(window),function(exports,undefined){var $=exports.___sinacMNT___,doc=$.doc,uaTrack=$.app.track,UNDEFINED=$.C.U,app=$.app,getMsg=$.msg.get,appTemplate=$.app.template;if(!$.cssSupports("borderRadius")){var docEle=document.documentElement;$.addClass(docEle,"sinacMNT-no-border-radius")}var getPar=function(e,t){var a=e.parentNode;return a&&a.getAttribute&&a.getAttribute("comment-type")===t?a:"body"===a.tagName.toLowerCase()?a:getPar(a,t)};$.register("cmnt",function(){var cmnt={},a1239,a1240,a1241,a1371,a1372,a1373,a1387,a1391,a1395,a1407,a1412,a1420,a1427,a1600,a1625,a1634,a1635,a1636,a1637,a1638,a1641,a1642,a1650,a1651,a1750,a1751,a1752,a1777,a1778,a1808,a1809,a1810,a1811,a1870,a1929,a1951,a1972,a1973,a2176,a2177,a2178,a2179,a2180,a2183,a2187,a2291,a2292,a2342;return cmnt.config={encoding:"utf-8",fixFace:!1,comment:{}},cmnt.data=(a1239={},a1240=$.isArray,a1241=$.extend,{set:function(e,t,a){var n,i,s;if(void 0===a1239[e]&&(a1239[e]={}),void 0===a1239[e][t]&&(a1239[e][t]={}),n=a1239[e][t],a1240(a))for(var o=0,r=a.length;o<r;o++)(s=(i=a[o]).mid||i.newsid)&&(n[s]=i);else a1241(n,a)},get:function(e,t,a){return e?t?a?a1239[e][t][a]:a1239[e][t]:a1239[e]:a1239}}),cmnt.face=function(){var e,t="",a="",n=null;u(function(e){n=e,d(e)});var i,s="//www.sinaimg.cn/dy/deco/2012/1217/face/",o="//img.t.sinajs.cn/t35/style/images/common/face/ext/normal/",r={"哈哈":"haha","偷笑":"tx","泪":"lei","嘻嘻":"xixi","爱你":"aini","挖鼻屎":"wbs","心":"xin"},c={"国旗":"dc/flag_thumb","走你":"ed/zouni_thumb","笑哈哈":"32/lxhwahaha_thumb","江南style":"67/gangnamstyle_thumb","吐血":"8c/lxhtuxue_thumb","好激动":"ae/lxhjidong_thumb","lt切克闹":"73/ltqiekenao_thumb","moc转发":"cb/moczhuanfa_thumb","ala蹦":"b7/alabeng_thumb","gst耐你":"1b/gstnaini_thumb","xb压力":"e0/xbyali_thumb","din推撞":"dd/dintuizhuang_thumb","草泥马":"7a/shenshou_thumb","神马":"60/horse2_thumb","浮云":"bc/fuyun_thumb","给力":"c9/geili_thumb","围观":"f2/wg_thumb","威武":"70/vw_thumb","熊猫":"6e/panda_thumb","兔子":"81/rabbit_thumb","奥特曼":"bc/otm_thumb","囧":"15/j_thumb","互粉":"89/hufen_thumb","礼物":"c4/liwu_thumb","呵呵":"ac/smilea_thumb","嘻嘻":"0b/tootha_thumb","哈哈":"6a/laugh","可爱":"14/tza_thumb","可怜":"af/kl_thumb","挖鼻屎":"a0/kbsa_thumb","吃惊":"f4/cj_thumb","害羞":"6e/shamea_thumb","挤眼":"c3/zy_thumb","闭嘴":"29/bz_thumb","鄙视":"71/bs2_thumb","爱你":"6d/lovea_thumb","泪":"9d/sada_thumb","偷笑":"19/heia_thumb","亲亲":"8f/qq_thumb","生病":"b6/sb_thumb","太开心":"58/mb_thumb","懒得理你":"17/ldln_thumb","右哼哼":"98/yhh_thumb","左哼哼":"6d/zhh_thumb","嘘":"a6/x_thumb","衰":"af/cry","委屈":"73/wq_thumb","吐":"9e/t_thumb","打哈欠":"f3/k_thumb","抱抱":"27/bba_thumb","怒":"7c/angrya_thumb","疑问":"5c/yw_thumb","馋嘴":"a5/cza_thumb","拜拜":"70/88_thumb","思考":"e9/sk_thumb","汗":"24/sweata_thumb","困":"7f/sleepya_thumb","睡觉":"6b/sleepa_thumb","钱":"90/money_thumb","失望":"0c/sw_thumb","酷":"40/cool_thumb","花心":"8c/hsa_thumb","哼":"49/hatea_thumb","鼓掌":"36/gza_thumb","晕":"d9/dizzya_thumb","悲伤":"1a/bs_thumb","抓狂":"62/crazya_thumb","黑线":"91/h_thumb","阴险":"6d/yx_thumb","怒骂":"89/nm_thumb","心":"40/hearta_thumb","伤心":"ea/unheart","猪头":"58/pig",ok:"d6/ok_thumb","耶":"d9/ye_thumb",good:"d8/good_thumb","不要":"c7/no_thumb","赞":"d0/z2_thumb","来":"40/come_thumb","弱":"d8/sad_thumb","蜡烛":"91/lazu_thumb","蛋糕":"6a/cake","钟":"d3/clock_thumb","话筒":"1b/m_thumb"},l={iniTarget:null,srcInput:null,iconLayer:null,iconText:"",isShow:!1,callback:function(){}};function m(e){if(l.isShow&&e){var t=e.target||e.srcElement;t===l.iniTarget||$.contains(l.iconLayer,t)||l.hide()}}function u(e){e([{url:"https://comment.sinaimg.cn/emoji/default/face_sina_1.png",phrase:"[→_→]",file_name:"face_sina_1",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_2.png",phrase:"[呵呵]",file_name:"face_sina_2",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_3.png",phrase:"[嘻嘻]",file_name:"face_sina_3",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_4.png",phrase:"[哈哈]",file_name:"face_sina_4",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_5.png",phrase:"[爱你]",file_name:"face_sina_5",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_6.png",phrase:"[挖鼻屎]",file_name:"face_sina_6",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_7.png",phrase:"[吃惊]",file_name:"face_sina_7",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_8.png",phrase:"[晕]",file_name:"face_sina_8",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_9.png",phrase:"[泪]",file_name:"face_sina_9",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_10.png",phrase:"[馋嘴]",file_name:"face_sina_10",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_11.png",phrase:"[抓狂]",file_name:"face_sina_11",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_12.png",phrase:"[哼]",file_name:"face_sina_12",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_13.png",phrase:"[可爱]",file_name:"face_sina_13",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_14.png",phrase:"[怒]",file_name:"face_sina_14",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_15.png",phrase:"[汗]",file_name:"face_sina_15",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_16.png",phrase:"[害羞]",file_name:"face_sina_16",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_17.png",phrase:"[睡觉]",file_name:"face_sina_17",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_18.png",phrase:"[钱]",file_name:"face_sina_18",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_19.png",phrase:"[偷笑]",file_name:"face_sina_19",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_20.png",phrase:"[笑cry]",file_name:"face_sina_20",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_21.png",phrase:"[doge]",file_name:"face_sina_21",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_22.png",phrase:"[喵喵]",file_name:"face_sina_22",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_23.png",phrase:"[酷]",file_name:"face_sina_23",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_24.png",phrase:"[衰]",file_name:"face_sina_24",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_25.png",phrase:"[闭嘴]",file_name:"face_sina_25",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_26.png",phrase:"[鄙视]",file_name:"face_sina_26",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_27.png",phrase:"[花心]",file_name:"face_sina_27",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_28.png",phrase:"[鼓掌]",file_name:"face_sina_28",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_29.png",phrase:"[悲伤]",file_name:"face_sina_29",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_30.png",phrase:"[思考]",file_name:"face_sina_30",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_31.png",phrase:"[生病]",file_name:"face_sina_31",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_32.png",phrase:"[亲亲]",file_name:"face_sina_32",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_33.png",phrase:"[怒骂]",file_name:"face_sina_33",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_34.png",phrase:"[太开心]",file_name:"face_sina_34",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_35.png",phrase:"[懒得理你]",file_name:"face_sina_35",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_36.png",phrase:"[右哼哼]",file_name:"face_sina_36",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_37.png",phrase:"[左哼哼]",file_name:"face_sina_37",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_38.png",phrase:"[嘘]",file_name:"face_sina_38",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_39.png",phrase:"[委屈]",file_name:"face_sina_39",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_40.png",phrase:"[吐]",file_name:"face_sina_40",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_41.png",phrase:"[可怜]",file_name:"face_sina_41",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_42.png",phrase:"[打哈气]",file_name:"face_sina_42",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_43.png",phrase:"[挤眼]",file_name:"face_sina_43",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_44.png",phrase:"[失望]",file_name:"face_sina_44",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_45.png",phrase:"[顶]",file_name:"face_sina_45",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_46.png",phrase:"[疑问]",file_name:"face_sina_46",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_47.png",phrase:"[困]",file_name:"face_sina_47",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_48.png",phrase:"[感冒]",file_name:"face_sina_48",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_49.png",phrase:"[拜拜]",file_name:"face_sina_49",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_50.png",phrase:"[黑线]",file_name:"face_sina_50",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_51.png",phrase:"[阴险]",file_name:"face_sina_51",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_52.png",phrase:"[互粉]",file_name:"face_sina_52",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_53.png",phrase:"[心]",file_name:"face_sina_53",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_54.png",phrase:"[伤心]",file_name:"face_sina_54",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_55.png",phrase:"[猪头]",file_name:"face_sina_55",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_56.png",phrase:"[熊猫]",file_name:"face_sina_56",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_57.png",phrase:"[兔子]",file_name:"face_sina_57",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_58.png",phrase:"[握手]",file_name:"face_sina_58",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_59.png",phrase:"[作揖]",file_name:"face_sina_59",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_60.png",phrase:"[赞]",file_name:"face_sina_60",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_61.png",phrase:"[耶]",file_name:"face_sina_61",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_62.png",phrase:"[good]",file_name:"face_sina_62",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_63.png",phrase:"[弱]",file_name:"face_sina_63",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_64.png",phrase:"[不要]",file_name:"face_sina_64",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_65.png",phrase:"[ok]",file_name:"face_sina_65",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_66.png",phrase:"[haha]",file_name:"face_sina_66",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_67.png",phrase:"[来]",file_name:"face_sina_67",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_68.png",phrase:"[威武]",file_name:"face_sina_68",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_69.png",phrase:"[鲜花]",file_name:"face_sina_69",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_70.png",phrase:"[钟]",file_name:"face_sina_70",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_71.png",phrase:"[浮云]",file_name:"face_sina_71",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_72.png",phrase:"[飞机]",file_name:"face_sina_72",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_73.png",phrase:"[月亮]",file_name:"face_sina_73",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_74.png",phrase:"[太阳]",file_name:"face_sina_74",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_75.png",phrase:"[微风]",file_name:"face_sina_75",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_76.png",phrase:"[下雨]",file_name:"face_sina_76",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_77.png",phrase:"[给力]",file_name:"face_sina_77",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_78.png",phrase:"[神马]",file_name:"face_sina_78",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_79.png",phrase:"[围观]",file_name:"face_sina_79",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_80.png",phrase:"[话筒]",file_name:"face_sina_80",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_81.png",phrase:"[奥特曼]",file_name:"face_sina_81",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_82.png",phrase:"[草泥马]",file_name:"face_sina_82",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_83.png",phrase:"[萌]",file_name:"face_sina_83",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_84.png",phrase:"[囧]",file_name:"face_sina_84",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_85.png",phrase:"[织]",file_name:"face_sina_85",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_86.png",phrase:"[礼物]",file_name:"face_sina_86",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_87.png",phrase:"[喜]",file_name:"face_sina_87",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_88.png",phrase:"[围脖]",file_name:"face_sina_88",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_89.png",phrase:"[音乐]",file_name:"face_sina_89",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_90.png",phrase:"[绿丝带]",file_name:"face_sina_90",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_91.png",phrase:"[蛋糕]",file_name:"face_sina_91",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_92.png",phrase:"[蜡烛]",file_name:"face_sina_92",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_93.png",phrase:"[干杯]",file_name:"face_sina_93",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_94.png",phrase:"[男孩儿]",file_name:"face_sina_94",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_95.png",phrase:"[女孩儿]",file_name:"face_sina_95",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_96.png",phrase:"[肥皂]",file_name:"face_sina_96",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_97.png",phrase:"[照相机]",file_name:"face_sina_97",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_98.png",phrase:"[浪]",file_name:"face_sina_98",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_99.png",phrase:"[沙尘暴]",file_name:"face_sina_99",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_100.png",phrase:"[二哈]",file_name:"face_sina_100",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_101.png",phrase:"[抱抱]",file_name:"face_sina_101",online:1},{url:"https://comment.sinaimg.cn/emoji/default/face_sina_102.png",phrase:"[摊手]",file_name:"face_sina_102",online:1}])}function d(e){for(var n,i="",s=[],o=0;o<e.length;o++)i+=o+"="+(n=e[o]).phrase+";",s.push($.template('<li action-type="face-insert" data-text="@@phrase@@" title="@@phrase@@"><img action-type="emoji-img" data-src="@@url@@" alt="@@phrase@@"></li>',n));t=i,a=s.join("")}return i=function(e){n=e,d(e)},$.getJsonp("https://comment.sina.com.cn/meme",{success:function(e){try{!e.result.status.code&&e.result.data.default.meme.length?i(e.result.data.default.meme):(console.log(e.result.status.msg),u(i))}catch(e){console.log(e),u(i)}}}),l.show=function(e,t,a,n,i,s){var r,u=l.iconLayer;return u&&m(),l.wrap=l.wrap||null,cmnt.config.fixFace&&(a=getPar(e,"form")),u&&l.wrap===a||(u=function(e,t,a,n){t=t||"360px",a=a||{};var i=[];for(var s in a)i.push('<li><a href="javascript:void(0)" action-type="face-insert"action-data="text=['+s+']" title="'+s+'"><img src="'+n+a[s]+'.gif" alt="'+s+'" /></a></li>');var o=[];o.push('<table class="sina-comment-layer">'),o.push('<tbody><tr> <td class="a-l-top-l"></td> <td class="a-l-top-c"></td> <td class="a-l-top-r"></td> </tr> <tr> <td class="a-l-m-l"></td> <td class="a-l-m-c"><div class="a-l-box">'),o.push('<div class="a-l-box-con" style="'+t+'">'),o.push('<div class="sina-comment-face-list clearfix">'),o.push('<div class="a-l-arrow"></div>'),o.push('<div class="a-l-close-wrap">'),o.push('<a action-type="face-close" class="a-l-close" href="javascript:;" title="关闭"></a>'),o.push("</div>"),o.push('<div class="face-list-items">'),o.push("<ul>"),o.push(i.join("")),o.push("</ul>"),o.push("</div>"),o.push("</div>"),o.push("</div>"),o.push('</div></td><td class="a-l-m-r"></td></tr><tr><td class="a-l-btm-l"></td> <td class="a-l-btm-c"></td><td class="a-l-btm-r"></td></tr></tbody></table>');var r=$.create("div");return r.innerHTML=o.join(""),r.style.display="none",(e||document.body).appendChild(r),r}(a,s,c,o),l.wrap=a),a&&a!==document.body?r={top:e.offsetTop+e.offsetHeight,left:e.offsetLeft}:(r=$.getPosition(e)).top+=e.offsetHeight,$.ua.isIE&&(r.left+=-10),isNaN(n)||(r.left+=n),isNaN(i)||(r.top+=+i),u.style.cssText="left:"+r.left+"px;top:"+r.top+'px;position:absolute;z-index:1700;display:"";zoom:1;',u.className="sina-comment-layer-wrap",l.iconLayer=u,l.iniTarget=e,l.srcInput=t,l.iconText=null,l.isShow=!0,$.addClass(e,"trigger-active"),$.addEvent(document.body,"click",m,!1),l.iconLayer},l.show_menu=function(t){if(!$.hasClass(t,"trigger-active")){var n=l.iconLayer;return n||(n=l.iconLayer=function(){var e=document.createElement("ul");e.className="emoji-list clearfix",e.setAttribute("action-type","emoji-list"),e.innerHTML=a.replace(/data-src/g,"src");var t=document.createElement("a");t.className="emoji-panel-close",t.href="javascript:;",t.setAttribute("action-type","face-close");var n=document.createElement("div");return n.className="emoji-panel",n.setAttribute("action-type","emoji-panel"),n.setAttribute("data-sudaclick","comment_emoticons_i"),n.appendChild(t),n.appendChild(e),n}(),$.addEvent(document.body,"click",function(e){var t=e.target.getAttribute("action-type");t?t.match(/(?:emoji-panel)|(?:emoji-list)|(?:face-insert)|(?:emoji-img)|(?:face-toggle)/g)||l.hide_menu():l.hide_menu()})),t!==e&&(e&&(e.parentNode.removeChild(n),$.removeClass(e,"trigger-active")),t.parentNode.appendChild(n),e=t),$.addClass(t,"trigger-active"),n.style.display="block",l.iniTarget=t,l.srcInput=function e(t){var a=t.parentNode;return a&&"form"===a.getAttribute("comment-type")?a.getElementsByTagName("textarea")[0]:e(a)}(t),l.iconText=null,l.isShow=!0,l.iconLayer}},l.hide_menu=function(){if(e){if(!$.hasClass(e,"trigger-active"))return;$.removeClass(e,"trigger-active")}var t=l.iconLayer;return t&&(t.style.display="none"),t},l.hide=function(){var e=l.iconLayer;return e&&(e.style.display="none"),l.iniTarget&&$.removeClass(l.iniTarget,"trigger-active"),$.removeEvent(document.body,"click",m),l.isShow=!1,e},l.getFace=function(){return l.iconText},l.insert=function(e,t){var a=l.srcInput;e&&a&&(a.focus(),setTimeout(function(){var n=a.getAttribute("range");if(null==n)!function(e,t){if($.ua.isIE){var a=e.createTextRange();if(a.collapse(!0),e.caretPos){var n=e.caretPos;n.text=" "==n.text.charAt(n.text.length-1)?t+" ":t,a.moveStart("character",e.value.indexOf(t)+1),a.moveEnd("character",t.length-2)}else{var i=doc.selection.createRange();doc.selection.empty(),i.text=t}}else if(e.setSelectionRange){var s=e.selectionStart,o=e.selectionEnd,r=e.value.substring(0,s),c=e.value.substring(o),l=r+t,m=l.length;e.value=l+c,e.setSelectionRange(m,m)}else e.value+=t}(a,e);else{var i=n.split("&");$.app.textareaUtils.unCoverInsertText(a,e,{rcs:i[0],rccl:i[1]});var s=$.app.textareaUtils.getCursorPos(a,e);a.setAttribute("range",s+"&0")}t&&t()},10))},l.set=function(e,t,a){"all"===e?(o=t,c=a):(s=t,r=a)},l.get=function(e){return"all"===e?{faces:c,base:o}:{faces:r,base:s}},l.filter=function(e){return e=(e=e||"").replace(/\[[^\[\]]+\]/g,function(e){var a=function(e){e=e.replace("[","\\[").replace("]","\\]");var a=new RegExp("(\\d+)="+e+";","g").exec(t);return a?n[a[1]].url:null}(e),i=e;return a&&(i='<img class="txt-emoji" title="'+e+'" alt="'+e+'" src="'+a+'" />'),i})},l}(),cmnt.commentTip=(a1371=document.body,a1372={timeout:null,transition:null},a1373=function(){var e=$.create("div");return e.className="sina-comment-tip",a1371.appendChild(e),e},a1372.show=function(e,t,a,n){n=n||0,a1372.dom=a1372.dom||a1373(),a1372.dom.style.display="block",a1372.timeout&&clearTimeout(a1372.timeout),a1372.dom.innerHTML='<div class="inner '+t+'"><i></i><div class="txt">'+a+"</div></div>",a1372.dom.style.marginLeft=-a1372.dom.offsetWidth/2+"px",n&&(a1372.timeout=setTimeout(function(){a1372.hide()},n)),$.addClass(a1372.dom,"show")},a1372.hide=function(){a1372.dom=a1372.dom||a1373(),a1372.timeout&&clearTimeout(a1372.timeout),$.removeClass(a1372.dom,"show"),a1372.transition?(clearTimeout(a1372.transition),a1372.dom.style.display="none"):a1372.transition=setTimeout(function(){a1372.dom.style.display="none"},300)},a1372),cmnt.truncate=(a1387=!1,a1391=function(e,t){return 3===e.nodeType?a1407(e,t):a1395(e,t)},a1395=function(e,t){var a,n=e.cloneNode(!0);n.setAttribute("comment-type",""),n.className+=" truncated",n.innerHTML&&(n.innerHTML=""),document.createDocumentFragment().innerHTML="";for(var i=e.childNodes,s=0,o=i.length;s<o;s++){var r=i[s],c=t-a1412(n).length;if(0===c)return n;(a=a1391(r,c))&&("string"==typeof a&&(a=document.createTextNode(a)),n.appendChild(a))}return n},a1407=function(e,t){var a=a1427(e.data);return a1387&&(a=a.replace(/^ /,"")),a1387=!!a.match(/ $/),a=a.slice(0,t),String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},a1412=function(e){if(e.innerText)return e.innerText;var t="";e=e.childNodes||e;for(var a=0;a<e.length;a++)t+=1!==e[a].nodeType?e[a].nodeValue:a1412(e[a].childNodes);return t},a1420=function(e,t,a,n){var i=document.createElement("a");i.href="javascript:;",i.className=a,i.setAttribute("action-type","txt-toggle"),i.setAttribute("action-data","type="+n),i.innerHTML=t,e.appendChild(i)},a1427=function(e){return e.replace(/\s+/g," ")},{handle:function(e,t){var a;if(!((a=a1427(a1412(e)),a.replace(/(^[\s\u3000]*)|([\s\u3000]*$)/g,"")).length<=t||e.__truncated__)){e.__truncated__=!0;var n=t-5;n=Math.max(n,0);var i=a1391(e,n);$.addClass(e,"txt-fullText"),e.style.display="none",$.insertAfter(i,e),a1420(e,"收起全部","txt-less txt-toggle","less"),a1420(i,"...展开全部","txt-more txt-toggle","more")}},toggle:function(e,t){var a=$.byClass("txt",e.parentNode.parentNode);"more"===t?(a[1].style.display="none",a[0].style.display=""):(a[1].style.display="",a[0].style.display="none")}}),cmnt.vote=function(e){var t=$.extend({channel:"",newsid:"",parent:"",vote:1,callback:function(e){},domain:"sina.com.cn"},e);$.ijax.request("//comment.sina.com.cn/cmnt/vote",{POST:t})},cmnt.voteTip=function(){var e={};e.timeout=null,e.animate=null;var t=function(){var e=$.create("div");return e.className="sina-comment-vote-tip",e.style.display="none",e.style.position="absolute",$.byTag("body")[0].appendChild(e),e},a=function(e,t,a){var n=$.getOuterStyle(e,"width"),i=$.getOuterStyle(e,"height");return n=parseFloat(n),n=isNaN(n)?t:n,i=parseFloat(i),{width:n,height:i=isNaN(i)?a:i}};return e.show=function(n,i){e.dom||(e.dom=t()),clearTimeout(e.timeout),e.animate&&e.animate.pause();var s=$.getPosition(n),o=a(e.dom,100,30),r=a(n,100,40);$.setStyle(e.dom,{top:s.top+"px",left:s.left+r.width/2-o.width/2+"px",opacity:0,display:"block"}),(i=i||0)&&(e.timeout=setTimeout(function(){e.hide()},i)),$.animate(e.dom,{top:s.top-35+"px",opacity:1},200,"Tween.Quad.easeIn",{start:function(e){},complete:function(e){}})},e.hide=function(){e.dom||(e.dom=t()),clearTimeout(e.timeout),e.animate&&e.animate.pause(),$.animate(e.dom,{opacity:0},200,"Tween.Quad.easeOut",{start:function(e){},complete:function(t){$.setStyle(e.dom,{left:"-9999px",opacity:0,display:"none"})}})},e}(),cmnt.shareTip=function(){var encode=encodeURIComponent,getShareName=function(e){var t=function(e){if(typeof e.config==UNDEFINED)return"";var t=e.config.match(/wb_screen_name=([^&]*)/i);return t?t[1]:""}(e),a="",n=e.nick,i=e.usertype;return t?a="@"+t:"wap"==i?(a="新浪手机用户","手机用户"!=n&&(a+=n)):(a="新浪网友",n&&(a+=n)),a},getShareContent=function(e,t,a){var n={title:e=e.replace(/<.*?>/gi,""),name:t,content:a},i=$.cmnt.tpls.get("share");return e=appTemplate(i,n),encode(e)},getUrlData=function(data,newWin){var site=data.site,mid=data.mid,sinaAppkey=data.sinaAppkey||"",tencentAppkey=data.tencentAppkey||"",curCmntlist=cmnt.data.get(data.allNewsid,"cmntlist",mid),content=curCmntlist.content,newsid=curCmntlist.newsid,channel=curCmntlist.channel,img="",setWinUrl=function(){var e,t=location.href,a=getShareName(curCmntlist),n=typeof(e=cmnt.data.get(data.allNewsid,"newsdict",newsid))==UNDEFINED&&curCmntlist.news_info?curCmntlist.news_info:e;t=n.url||t;var i=getShareContent(n.title||"",a,content),s={sina:{base:"//v.t.sina.com.cn/share/share.php?",param:["url=",encode(t),"&title=",i,"&source=",encode("新浪新闻评论"),"&sourceUrl=",encode("http://news.sina.com.cn/hotnews/"),"&content=","gb2312","&pic=",encode(img),"&appkey=",sinaAppkey||"445563689"].join("")},tencent:{base:"//share.v.t.qq.com/index.php?",param:["c=","share","&a=","index","&url=",encode(t),"&title=",i,"&content=","gb2312","&pic=",encode(img),"&appkey=",tencentAppkey||"dcba10cb2d574a48a16f24c9b6af610c","&assname=","${RALATEUID}"].join("")}};newWin&&(newWin.location.href=[s[site].base,s[site].param].join(""))},getImgSrc=function(o){var cbName="iJax"+Date.parse(new Date),url="//comment.sina.com.cn/image";try{doc.domain="sina.com.cn"}catch(e){}window[cbName]=function(m){"string"==typeof m&&(m=eval("("+m+")"));var cmntImg=m.result.image||"";img=img?img+"||"+cmntImg:cmntImg,/Firefox/.test(navigator.userAgent)?setTimeout(function(){setWinUrl()},30):setWinUrl()};var param="";if($.ua.isFF){param="channel="+channel+"&newsid="+newsid+"&mid="+mid+"&version=1";var Sender=new $.html5Ijax({proxyUrl:"//comment5.news.sina.com.cn/comment/postmsg.html"});Sender.send({url:url,data:param,onsuccess:window[cbName],onfailure:function(){}})}else param={channel:channel,newsid:newsid,mid:mid,version:"1",format:"js",callback:cbName},$.ijax.request(url,{POST:param})},maxCmntLen=80;data.hasReply||$.byteLength(content)>2*maxCmntLen?(content=$.strLeft(content,2*maxCmntLen),getImgSrc()):setWinUrl()},Tip={};Tip.timeout=null,Tip.animate=null,Tip.trigger=null;var getTip=function(e){var t=$.jsonToQuery(e);Tip.dom||(Tip.dom=$.create("div"),Tip.dom.className="sina-comment-share",Tip.dom.style.display="none",Tip.dom.style.position="absolute",$.byTag("body")[0].appendChild(Tip.dom),$.addEvent(Tip.dom,"mouseover",function(){clearTimeout(Tip.timeout)}),$.addEvent(Tip.dom,"mouseout",function(){Tip.hide(2e3)}),$.delegatedEvent(Tip.dom).add("share","click",function(e){var t=e.data,a=window.open("","mb",["toolbar=0,status=0,resizable=1,width=440,height=430,left=",(screen.width-440)/2,",top=",(screen.height-430)/2].join(""));getUrlData(t,a)}));Tip.dom.innerHTML='<a title="'+getMsg("I020")+'" class="sina-comment-share-sina" href="javascript:;" action-type="share" action-data="'+t+'&site=sina">新浪</a><a title="'+getMsg("I021")+'" class="sina-comment-share-qq" href="javascript:;" action-type="share" action-data="'+t+'&site=tencent">腾讯</a>'},hide=function(e){clearTimeout(Tip.timeout),Tip.animate&&Tip.animate.pause(),(e=e||0)&&(Tip.timeout=setTimeout(function(){$.animate(Tip.dom,{opacity:0},200,"Tween.Quad.easeOut",{start:function(e){},complete:function(e){$.setStyle(Tip.dom,{left:"-9999px",opacity:0,display:"none"}),$.removeClass(Tip.trigger,"share-active"),Tip.trigger=null}})},e))},getWH=function(e,t,a){var n=$.getOuterStyle(e,"width"),i=$.getOuterStyle(e,"height");return n=parseFloat(n),n=isNaN(n)?t:n,i=parseFloat(i),{width:n,height:i=isNaN(i)?a:i}},show=function(e,t,a){if(Tip.trigger!=e){getTip(t),clearTimeout(Tip.timeout),Tip.animate&&Tip.animate.pause();var n=$.getPosition(e),i=getWH(Tip.dom,100,30),s=getWH(e,100,40);$.removeClass(Tip.trigger,"share-active"),Tip.trigger=e,$.setStyle(Tip.dom,{top:n.top+"px",left:n.left+s.width/2-i.width/2+"px",opacity:0,display:"block"}),Tip.hide(a),$.animate(Tip.dom,{top:n.top-37+"px",opacity:1},200,"Tween.Quad.easeIn",{start:function(e){$.addClass(Tip.trigger,"share-active")},complete:function(e){}})}};return Tip.show=show,Tip.hide=hide,Tip}(),cmnt.comment=function(e,t,a){var n=cmnt.config.comment,i=$.extend({channel:"",newsid:"",parent:"",content:"",format:"json",ie:cmnt.config.encoding||"utf-8",oe:cmnt.config.encoding||"utf-8",ispost:0,share_url:location.href.split("#")[0],video_url:"",img_url:"",iframe:1},e);$.extend(i,n),"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:10.0.3) Gecko/20100101 Firefox/10.0.3"!=navigator.userAgent?$.app.post("//comment.sina.com.cn/cmnt/submit",i,function(e){t(e)},function(){a()}):uaTrack("cmntWarning","abnormal_FF1003")},cmnt.formateTime=function(e,t){var a=getMsg("I022"),n=getMsg("I023"),i=getMsg("I024"),s=getMsg("I025"),o=getMsg("I026"),r=e.getFullYear(),c=t.getFullYear(),l=e.getMonth()+1,m=t.getMonth()+1,u=e.getDate(),d=t.getDate(),p=e.getHours(),f=t.getHours();f<10&&(f="0"+f);var h=t.getMinutes();h<10&&(h="0"+h);var g=e-t;return g=g>0?g:0,g/=1e3,r!=c?c+"-"+m+"-"+d+" "+f+":"+h:l!=m||u!=d?m+a+d+n+f+":"+h:p!=f&&g>3600?i+f+":"+h:g<51?(g=g<1?1:g,Math.floor((g-1)/10)+1+"0"+s):Math.floor(g/60+1)+o},cmnt.updateTime=(a1600=cmnt.formateTime,function(e){var t,a=function(n){clearTimeout(t),t=setTimeout(function(){!function(e){var t,a=$.byAttr(e,"comment-type","time"),n=new Date;n.setTime(n.getTime()-0);for(var i=0;i<a.length;i++){var s=a[i],o=s.getAttribute("date");if(/^\s*\d+\s*$/.test(o)){var r=new Date;r.setTime(parseInt(o,10)),s.innerHTML=a1600(n,r),t===undefined&&(t=n.getTime()-r.getTime()<6e4)}}return t}(e)?a(6e4):a(1e3)},n)};a(1e3);var n={destroy:function(){clearTimeout(t),n=e=t=a=null}};return n}),cmnt.getTimeStr=(a1625=cmnt.formateTime,function(e,t){t=t||"time";var a="刚刚",n="";if(e){var i=new Date;e=e.replace(/-/g,"/"),n=Date.parse(e),i.setTime(parseInt(n,10));var s=new Date;s.setTime(s.getTime()),a=a1625(s,i)}else n=Date.parse(new Date);return'<span class="'+t+'" comment-type="time" date="'+n+'">'+a+"</span>"}),cmnt.tpls=(a1634=" action-data=",a1635=" action-type=",a1636=" class=",a1637=" comment-type=",a1638=function(e){return"<% this."+e+" %>"},a1641=null,a1642=function(){return{formList:'<div class="sina-comment-form sina-comment-top"'+a1637+'"form"></div><div class="sina-comment-list"'+a1637+'"list"></div>',list:['<div class="hot-wrap"'+a1637+'"hotWrap">','<div class="title"><span class="name">'+getMsg("I015")+"</span> <a"+a1635+'"reflash"'+a1634+'"type=hot"'+a1636+'"reflash" href="javascript:;"'+a1637+'"hotReflash" data-sudaclick="comment_refresh_i" style="display:none;">'+getMsg("I017")+"</a> </div>",'<div class="hot-loading loading"><a href="javascript:;"></a></div>','<div class="list"'+a1637+'"hotList"></div>',"</div>",'<div class="latest-wrap"'+a1637+'"latestWrap">','<div class="title"><span class="name">'+getMsg("I016")+"</span> <a"+a1635+'"reflash"'+a1634+'"type=latest"'+a1636+'"reflash" href="javascript:;"'+a1637+'"latestReflash" data-sudaclick="comment_refresh_i" style="display:none;">'+getMsg("I017")+"</a> </div>",'<div class="latest-loading loading"><a href="javascript:;"></a></div>','<div class="list"'+a1637+'"latestList"></div>',"<div"+a1635+'"getMore"'+a1634+'"type=latest" '+a1637+'"latestMore" class="list-ft"><a href="javascript:;" class="more" data-sudaclick="comment_allcomment_p">'+getMsg("I014")+"</a></div>","</div>",'<div class="all-loading loading"><a href="javascript:;" data-sudaclick="comment_allcomment_p"></a></div>'].join(""),cont:["\x3c!-- 头像 start --\x3e",'<div class="head">'+a1638("userFace")+"</div>","\x3c!-- 头像 end --\x3e","\x3c!-- 内容 start --\x3e",'<div class="cont"'+a1637+'"itemCont">','<div class="info">','<span class="name '+a1638("userIco")+'">',a1638("userLnk"),"</span>",'<span class="area">'+a1638("area")+"</span>",a1638("newsLnk"),"</div>",'<div class="txt" comment-type="itemTxt">',a1638("contWithReply"),"</div>",'<div class="action">',a1638("time"),"<% if(this.mid) {%>",'<a class="report" href="http://comment5.news.sina.com.cn/comment/skin/feedback_jb.html?mid='+a1638("mid")+'" target="_blank" data-sudaclick="comment_report_i">'+getMsg("I043")+"</a>",'<span class="btns">',"<% if(this.hasReply) {%>",'<a class="show"'+a1635+'"dialogShow"'+a1634+'"channel='+a1638("channel")+"&allNewsid="+a1638("allNewsid")+"&newsid="+a1638("newsid")+"&mid="+a1638("mid")+"&uid="+a1638("uid")+"&nick="+a1638("nick")+"&parent="+a1638("parent")+"&thread="+a1638("thread")+"&userLnk="+a1638("oUserLnk")+"&cont="+a1638("oCont")+'" href="javascript:;" hidefocus >'+getMsg("I034")+"</a>","<% }%>","<% if(this.isAgreed) {%>",'<a class="vote vote-active" title="'+getMsg("I008d")+'"'+a1635+'"vote"'+a1634+'"channel='+a1638("channel")+"&newsid="+a1638("newsid")+"&mid="+a1638("mid")+'" href="javascript:;" data-sudaclick="comment_like_i" voted="true"><span>'+getMsg("I008d"),"<% }else{ %>",'<a class="vote" title="'+getMsg("I008")+'"'+a1635+'"vote"'+a1634+'"channel='+a1638("channel")+"&newsid="+a1638("newsid")+"&mid="+a1638("mid")+'" href="javascript:;" data-sudaclick="comment_like_i"><span>'+getMsg("I008"),"<%}%>","<% if(parseInt(this.agree)) {%>","<em "+a1637+'"voteNum">'+a1638("agree")+"</em>","<% }else{ %>","<em "+a1637+'"voteNum"></em>',"<%}%>","</span>","</a>",'<a class="reply"'+a1635+'"reply"'+a1634+'"channel='+a1638("channel")+"&allNewsid="+a1638("allNewsid")+"&newsid="+a1638("newsid")+"&mid="+a1638("mid")+"&uid="+a1638("uid")+"&nick="+a1638("nick")+"&parent="+a1638("parent")+"&thread="+a1638("thread")+"&userLnk="+a1638("oUserLnk")+"&cont="+a1638("oCont")+'" href="javascript:;" hidefocus data-sudaclick="comment_reply_i">'+getMsg("I009")+"</a>","</span>","<%}%>","</div>","</div>","\x3c!-- 内容 end --\x3e"].join(""),contWithUserFrom:["\x3c!-- 头像 start --\x3e",'<div class="head">'+a1638("userFace")+"</div>","\x3c!-- 头像 end --\x3e","\x3c!-- 内容 start --\x3e",'<div class="cont"'+a1637+'"itemCont">','<div class="info">','<span class="name '+a1638("userIco")+'">',a1638("userLnk"),"</span>",'<span class="area">'+a1638("area")+"</span>",a1638("userFrom"),a1638("newsLnk"),"</div>",'<div class="txt" comment-type="itemTxt">',a1638("contWithReply"),"</div>",'<div class="action">',a1638("time"),"<% if(this.mid) {%>",'<a class="report" href="http://comment5.news.sina.com.cn/comment/skin/feedback_jb.html?mid='+a1638("mid")+'" target="_blank" data-sudaclick="comment_report_i">'+getMsg("I043")+"</a>",'<span class="btns">',"<% if(this.hasReply) {%>",'<a class="show"'+a1635+'"dialogShow"'+a1634+'"channel='+a1638("channel")+"&allNewsid="+a1638("allNewsid")+"&newsid="+a1638("newsid")+"&mid="+a1638("mid")+"&uid="+a1638("uid")+"&nick="+a1638("nick")+"&parent="+a1638("parent")+"&thread="+a1638("thread")+"&userLnk="+a1638("oUserLnk")+"&cont="+a1638("oCont")+'" href="javascript:;" hidefocus >'+getMsg("I034")+"</a>","<% }%>","<% if(this.isAgreed) {%>",'<a class="vote vote-active" title="'+getMsg("I008d")+'"'+a1635+'"vote"'+a1634+'"channel='+a1638("channel")+"&newsid="+a1638("newsid")+"&mid="+a1638("mid")+'" href="javascript:;" data-sudaclick="comment_like_i" voted="true"><span>'+getMsg("I008d"),"<% }else{ %>",'<a class="vote" title="'+getMsg("I008")+'"'+a1635+'"vote"'+a1634+'"channel='+a1638("channel")+"&newsid="+a1638("newsid")+"&mid="+a1638("mid")+'" href="javascript:;" data-sudaclick="comment_like_i"><span>'+getMsg("I008"),"<%}%>","<% if(parseInt(this.agree)) {%>","<em "+a1637+'"voteNum">'+a1638("agree")+"</em>","<% }else{ %>","<em "+a1637+'"voteNum"></em>',"<%}%>","</span>","</a>",'<a class="reply"'+a1635+'"reply"'+a1634+'"channel='+a1638("channel")+"&allNewsid="+a1638("allNewsid")+"&newsid="+a1638("newsid")+"&mid="+a1638("mid")+"&uid="+a1638("uid")+"&nick="+a1638("nick")+"&parent="+a1638("parent")+"&thread="+a1638("thread")+"&userLnk="+a1638("oUserLnk")+"&cont="+a1638("oCont")+'" href="javascript:;" hidefocus data-sudaclick="comment_reply_i">'+getMsg("I009")+"</a>","</span>","<%}%>","</div>","</div>","\x3c!-- 内容 end --\x3e"].join(""),floor:["\x3c!-- 头像 start --\x3e",'<div class="head">'+a1638("userFace")+"</div>","\x3c!-- 头像 end --\x3e","\x3c!-- 内容 start --\x3e",'<div class="cont"'+a1637+'"itemCont">','<div class="info">','<span class="num">'+a1638("floor")+"</span>",'<span class="name '+a1638("icoClz")+'">'+a1638("userLnk")+"</span>",'<span class="area">'+a1638("area")+"</span>","</div>",'<div class="txt">'+a1638("cont")+"</div>",'<div class="action">'+a1638("time")+"<span"+a1636+'"btns">','<a class="vote" title="'+getMsg("I008")+'"'+a1635+'"vote"'+a1634+'"channel='+a1638("channel")+"&newsid="+a1638("newsid")+"&mid="+a1638("mid")+'" href="javascript:;">',"<span>",getMsg("I008"),"<% if(parseInt(this.agree)) {%>","<em "+a1637+'"voteNum">'+a1638("agree")+"</em>","<% }else{ %>","<em "+a1637+'"voteNum"></em>',"<%}%>","</span>","</a>",'<a class="reply"'+a1635+'"reply"'+a1634+'"channel='+a1638("channel")+"&allNewsid="+a1638("allNewsid")+"&newsid="+a1638("newsid")+"&mid="+a1638("mid")+'" href="javascript:;" hidefocus>回复</a>',"</span>","</div>","</div>"].join(""),dialogItem:["\x3c!-- 内容 start --\x3e",'<div class="cont"'+a1637+'"itemCont">','<div class="txt"><span class="name '+a1638("icoClz")+'">'+a1638("userLnk")+"</span>"+a1638("lastUserLnk")+a1638("cont")+"</div>",'<div class="action">'+a1638("time"),"<% if(this.mid) {%>",'<a class="report" href="http://comment5.news.sina.com.cn/comment/skin/feedback_jb.html?mid='+a1638("mid")+'" target="_blank" data-sudaclick="comment_report_i">'+getMsg("I043")+"</a>",'<span class="btns">',"<% if(this.isAgreed) {%>",'<a class="vote vote-active" title="'+getMsg("I008d")+'"'+a1635+'"vote"'+a1634+'"channel='+a1638("channel")+"&newsid="+a1638("newsid")+"&nick="+a1638("nick")+"&uid="+a1638("uid")+"&mid="+a1638("mid")+"&parent="+a1638("parent")+"&thread="+a1638("thread")+"&floor="+a1638("floor")+'" href="javascript:;" data-sudaclick="comment_like_i" voted="true"><span>'+getMsg("I008d"),"<% }else{ %>",'<a class="vote" title="'+getMsg("I008")+'"'+a1635+'"vote"'+a1634+'"channel='+a1638("channel")+"&newsid="+a1638("newsid")+"&nick="+a1638("nick")+"&uid="+a1638("uid")+"&mid="+a1638("mid")+"&parent="+a1638("parent")+"&thread="+a1638("thread")+"&floor="+a1638("floor")+'" href="javascript:;" data-sudaclick="comment_like_i"><span>'+getMsg("I008"),"<%}%>","<% if(parseInt(this.agree)) {%>","<em "+a1637+'"voteNum">'+a1638("agree")+"</em>","<% }else{ %>","<em "+a1637+'"voteNum"></em>',"<%}%>","</span>","</a>",'<a class="reply"'+a1635+'"reply"'+a1634+'"channel='+a1638("channel")+"&allNewsid="+a1638("allNewsid")+"&newsid="+a1638("newsid")+"&mid="+a1638("mid")+"&uid="+a1638("uid")+"&nick="+a1638("nick")+"&parent="+a1638("parent")+"&thread="+a1638("thread")+"&pos=dialog&floor="+a1638("floor")+'" href="javascript:;" hidefocus data-sudaclick="comment_reply_i">回复</a>',"</span>","<%}%>","</div>","</div>"].join(""),comment:['<div  class="hd clearfix">',"<span"+a1637+'"count" href="#url"'+a1636+'"count"></span>','<span class="wrap-title">'+getMsg("I038")+"</span>","</div>",'<div class="bd">','<div class="editor">','<div class="inner">',"<textarea"+a1637+'"cont"'+a1636+'"box"  autocomplete="off" placeholder="'+a1638("postTip")+'" value="'+a1638("content")+'" action-type="cmnt-box">'+a1638("content")+"</textarea>","</div>","</div>","\x3c!-- 用户头像 start --\x3e",'<div class="head user-head" comment-type="head">',a1638("face"),"</div>",'<div class="head user-head-default">','<a href="https://weibo.com/" target="_blank"><img src="//img.t.sinajs.cn/t5/style/images/face/male_180.png"></a>',"</div>","\x3c!-- 用户头像 end --\x3e","</div>",'<div class="ft clearfix">','<div class="face">','<a href="javascript:;" class="trigger"'+a1635+'"face-toggle" data-sudaclick="comment_emoticons_i">表情</a>',"</div>",'<div class="right-actions clearfix">',"\x3c!-- 登录与注册 start --\x3e",'<div class="login">',"<a"+a1635+'"login"'+a1636+'"login-lnk" href="javascript:;" title="'+getMsg("I029")+'" data-sudaclick="comment_login_i">'+getMsg("I029")+'</a><span class="sep">|</span><a'+a1636+'"register-lnk" target="_blank" href="https://login.sina.com.cn/signup/signup.php" data-sudaclick="comment_registered_i">'+getMsg("I012")+"</a>","</div>","\x3c!-- 登录与注册前 end --\x3e",'<div class="login-info clearfix">','<span class="name"'+a1637+'"name">',a1638("name"),"</span>",'<span class="sep">|</span>',"<a"+a1637+'"logout"'+a1636+'"logout" href="javascript:;" data-sudaclick="comment_signout_i" title="'+getMsg("I030")+'">'+getMsg("I030")+"</a>","</div>","<div"+a1637+'"weibo"'+a1636+'"weibo sina-comment-chkbox"'+a1635+'"checkbox-toggle"> <i></i>',"<span>"+getMsg("I018")+"</span>","</div>","\x3c!-- 发布 start --\x3e","<a"+a1637+'"submit" '+a1635+'"tip-toggle"'+a1636+'"comment btn  btn-disabled" href="javascript:;" target="_self" data-sudaclick="comment_submit_i">'+getMsg("I007")+"</a>","\x3c!-- 发布 end --\x3e","</div>","</div>"].join(""),reply:['<div class="sina-comment-form reply-form"'+a1637+'"form">','<div class="hd"'+a1637+'"hd"></div>','<div class="bd">','<div class="editor">','<div class="inner">',"<textarea"+a1637+'"cont"'+a1636+'"box"  autocomplete="off" placeholder="'+a1638("postTip")+'" value="'+a1638("content")+'" action-type="cmnt-box">'+a1638("content")+"</textarea>",'<span class="arrow"></span>',"</div>","</div>","</div>",'<div class="ft clearfix">','<div class="face">','<a href="javascript:;" class="trigger"'+a1635+'"face-toggle" data-sudaclick="comment_emoticons_i">表情</a>',"</div>",'<div class="right-actions clearfix">',"\x3c!-- 登录与注册 start --\x3e",'<div class="login">',"<a"+a1635+'"login"'+a1636+'"login-lnk" href="javascript:;" data-sudaclick="comment_login_i" title="'+getMsg("I029")+'">'+getMsg("I029")+'</a><span class="sep">|</span><a'+a1636+'"register-lnk" target="_blank" href="https://login.sina.com.cn/signup/signup.php" data-sudaclick="comment_registered_i">'+getMsg("I012")+"</a>","</div>","\x3c!-- 登录与注册 end --\x3e","<div"+a1637+'"weibo"'+a1636+'"weibo sina-comment-chkbox"'+a1635+'"checkbox-toggle"> <i></i>',"<span>"+getMsg("I018")+"</span>","</div>","<a"+a1637+'"submit" '+a1635+'"tip-toggle"'+a1636+'"comment btn  btn-disabled" href="javascript:;" target="_self" data-sudaclick="comment_submit_i">'+getMsg("I007")+"</a>","</div>","</div>","</div>"].join(""),share:"#精彩评论#【"+a1638("title")+"】"+a1638("name")+"："+a1638("content"),popup:['<div class="sina-comment-popup sina-comment-popup-'+a1638("skin")+'" style="display:none;">',"<% if(this.head) {%>",'<div class="popup-hd">'+a1638("head")+"</div>","<%}%>",'<div class="popup-bd">'+a1638("body")+"</div>",'<div class="popup-ft">','<% if(this.type === "confirm") {%>','<span class="popup-btn btn-action" popup-type="action">'+a1638("actionText")+"</span>","<%}%>",'<span class="popup-btn btn-cancel" popup-type="cancel">'+a1638("cancelText")+"</span>","</div></div>"].join("")}},{set:function(e,t){(a1641=a1641||a1642())[e]=t},get:function(e){return a1641=a1641||a1642(),typeof e==UNDEFINED?a1641:a1641[e]}}),cmnt.popup=(a1650=cmnt.tpls.get("popup"),a1651=document.getElementsByTagName("body")[0],function(e){var t,a=$.extend({skin:"error",type:"confirm",head:null,body:"",actionText:"确定",cancelText:"取消",parentNode:a1651,onAction:function(){},onCancel:function(){}},e),n=function(){var e,n,i,s;(t=document.createElement("div")).innerHTML=appTemplate(a1650,a),t=t.firstElementChild,a.parentNode.appendChild(t),e=t,n=a.onAction,i=a.onCancel,s=function(t){var a=((t=t||window.event).target||t.srcElement).getAttribute("popup-type");if(a)switch(e.style.display="none",e.parentNode.removeChild(e),a){case"action":"function"==typeof n&&n();break;case"cancel":"function"==typeof i&&i()}},"addEventListener"in e?e.addEventListener("click",s,!1):"attachEvent"in e&&e.attachEvent("onclick",s)};return{show:function(){var e,i,s;t||n(),t.style.display="block",e=t,i=a.parentNode,"absolute"!==(s=$.getStyle(i,"position"))&&"relative"!==s&&(i.style.position="relative"),e.style.marginLeft=-e.offsetWidth/2+"px",t.style.opacity="1"},hide:function(){t&&(t.style.opacity="0",t.style.display="none")}}}),cmnt.getWBName=function(e){if(typeof e.config==UNDEFINED)return"";var t=e.config.match(/wb_screen_name=([^&]*)/i);return t?t[1]:""},cmnt.getWBV=function(e){if(typeof e.config==UNDEFINED)return"";var t="",a=$.queryToJson(e.config),n=a.wb_verified,i=a.wb_verified_type;return typeof n!=UNDEFINED&&"1"==n&&(t="0"==i?"y":"b"),t},cmnt.getUserLnk=function(e,t,a){t=t||"",a=a||"";var n="",i=cmnt.getWBV(e),s="新浪个人认证";i&&("b"===i&&(s="新浪机构认证"),n='<img src="//www.sinaimg.cn/dy/deco/2013/0608/v'+i+'.png" title="'+s+'" style="vertical-align: middle;" />');var o=cmnt.getWBName(e);return'<span class="sina-comment-user-lnk-wrap">'+(o?'<a target="_blank" href="https://weibo.com/u/'+e.uid+'" title="'+o+'" data-sudaclick="comment_usernickname_p">'+t+o+n+a+"</a>":e.uid&&e.uid+""!="0"?'<a target="_blank" href="http://comment5.news.sina.com.cn/comment/skin/default.html?info_type=1&style=1&user_uid='+e.uid+'" title="'+e.nick+'" data-sudaclick="comment_usernickname_p">'+t+e.nick+a+"</a>":t+e.nick+a)+"</span>"},cmnt.getUserFace=function(e){var t=e.config||"",a=$.queryToJson(t,!0).wb_profile_img||"//www.sinaimg.cn/dy/deco/2012/1018/sina_comment_defaultface.png";a=a.replace(/^http[s]?\:(?=\/\/)/,"");var n=cmnt.getWBName(e);return n?'<a href="https://weibo.com/u/'+e.uid+'" title="'+n+'" target="_blank" data-sudaclick="comment_useravatar_p"><img src="'+a+'"/></a>':e.uid&&"0"!=e.uid?(a="//portrait5.sinaimg.cn/"+e.uid+"/blog/50",'<a target="_blank" href="http://comment5.news.sina.com.cn/comment/skin/default.html?info_type=1&style=1&user_uid='+e.uid+'" title="'+e.nick+'" data-sudaclick="comment_useravatar_p"><img src="'+a+'"/></a>'):'<img src="'+a+'"/>'},cmnt.getUserIco=function(e){var t={wap:"name-mobile",wb:"name-weibo"},a=t[e.usertype];(a=a||"")||(a=cmnt.getWBName(e)?t.wb:"");return a},cmnt.getUserFromType=function(e){var t="",a={financeapp:{txt:"新浪财经APP",url:"//finance.sina.com.cn/mobile/comfinanceweb.shtml"}}[e.usertype];return a&&(t='<span class="user-from"><a class="user-from-link" href="'+a.url+'" target="_blank" data-sudaclick="sf_cjapp_userid_p">来自'+a.txt+"</a></span>"),t},cmnt.getUserAgreed=function(e){var t="",a=$.login.getInfo(),n=a.sina?a.sina.uid:"unlogin_user",i=$.messageStorage.get(n)?$.messageStorage.get(n):"";return("1"==e.is_agree||i.indexOf(e.mid)>-1)&&(t=!0),t},cmnt.setVotedMid=function(e,t){var a=$.messageStorage.get(e);if(a){var n=a.split(",");n.length<100?(n.push(t),$.messageStorage.set(e,n.join(","))):(n.pop(),n.push(t),$.messageStorage.set(e,n.join(",")))}else $.messageStorage.set(e,t)},cmnt.getVotedMid=function(e){$.messageStorage.get(e)},cmnt.getReplyNameTmpl=function(e){var t,a,n=e.thread,i=e.parent,s=e.uid,o=e.parent_uid,r=e.nick,c=e.parent_nick,l='<span class="sina-comment-user-lnk-wrap">@@userLink@@</span>';return t=s?'<a href="https://weibo.com/u/'+s+'" title="'+r+'" target="_blank" data-sudaclick="comment_usernickname_p">'+r+"：</a>":r+"：",a=i===n?"":o?'<a href="https://weibo.com/u/'+o+'" title="'+c+'" target="_blank" data-sudaclick="comment_usernickname_p">@'+c+"：</a>":"@"+c+"：",{user:t?l.replace("@@userLink@@",t):"",lastUser:a?"回复"+l.replace("@@userLink@@",a):""}},cmnt.insertList=function(e,t,a){var n,i=0;e.firstChild&&"sina-comment-page"===e.firstChild.className?e.firstChild.insertBefore(t,e.firstChild.firstChild):e.appendChild(t),a&&setTimeout(function(){n=$.getPosition(e),i=n.top-80;try{doc.documentElement.scrollTop=i,document.body.scrollTop=i}catch(e){}},1e3)},cmnt.replyListRender=(a1750=cmnt.getTimeStr,a1751=$.app.splitNum,a1752=cmnt.data,function(e,t,a,n,i){n&&a1752.set(e,"cmntlist",a);var s="";if(a&&a.length>0)for(var o=0,r=a.length;o<r;o++){var c=a[o],l=c.area?c.area:"&nbsp;",m="";0!==o&&(m=1);var u="",d=cmnt.getUserLnk(c,i?"":"@"),p=$.cmnt.face.filter(app.cmntEncodeHtml(c.content));if(i){var f={allNewsid:e,channel:c.channel,newsid:c.newsid,mid:c.mid,floor:o+1,userIco:cmnt.getUserIco(c),userLnk:d,area:l,cont:p,time:a1750(c.time,"time"),agree:a1751(c.agree),hasReply:m};u=$.cmnt.tpls.get("floor"),s=s+'<div comment-type="floor" class="floor floor-out clearfix">'+appTemplate(u,f)+"</div>"}}return""!==s&&(s='<div class="floor-wrap flat-floor-wrap">'+s+"</div>"),s}),cmnt.getNewsLink=function(e,t){var a="",n="";t.newsdict&&(typeof(a=t.newsdict[e])!=UNDEFINED&&(n='<p class="lnk"><a target="_blank" href="'+a.url+'" title="'+a.title+'">《'+a.title+"》</a></p>"));return n},cmnt.itemInnerRender=(a1777=cmnt.getTimeStr,a1778=$.app.splitNum,function(e,t,a,n,i){if(typeof t.mid==UNDEFINED)return"";var s,o=t.newsid,r=t.mid,c=t.area?t.area:"&nbsp;";a.threaddict&&(s=a.threaddict[r]);var l,m=!!(n=n||s&&s.list),u=$.cmnt.face.filter(app.cmntEncodeHtml(t.content)),d=u+"",p={channel:t.channel,allNewsid:e,newsid:o,nick:t.nick,uid:t.uid,mid:t.mid,parent:t.parent,thread:t.thread,userFace:cmnt.getUserFace(t),newsLnk:cmnt.getNewsLink(o,a),userIco:cmnt.getUserIco(t),userLnk:cmnt.getUserLnk(t),oUserLnk:(l=cmnt.getUserLnk(t),l.replace(/<(?:.|\s)*?>/g,"")),area:c,reply:"",cont:u,contWithReply:d,oCont:$.encodeHTML(t.content),time:a1777(t.time,"time"),agree:a1778(t.agree),hasReply:m,userFrom:cmnt.getUserFromType(t),isAgreed:cmnt.getUserAgreed(t)},f="";return f=i&&i.showUserFrom?$.cmnt.tpls.get("contWithUserFrom"):$.cmnt.tpls.get("cont"),appTemplate(f,p)}),cmnt.itemRender=function(e,t,a,n){return'<div class="item clearfix" comment-type="item">'+cmnt.itemInnerRender(e,t,a,null,n)+"</div>"},cmnt.dialogInsertList=function(e,t){e.appendChild(t)},cmnt.dialogItemInnerRender=(a1808=cmnt.getTimeStr,a1809=$.app.splitNum,a1810=getMsg("I036"),a1811=getMsg("I037"),function(e,t,a,n){var i=t.area?t.area:"&nbsp;",s="";0!==a&&(s=1);var o,r=cmnt.getUserLnk(t,"",a1811),c=$.cmnt.face.filter(app.cmntEncodeHtml(t.content)),l={allNewsid:e,channel:t.channel,newsid:t.newsid,nick:t.nick,uid:t.uid,mid:t.mid,parent:t.parent,thread:t.thread,userFace:cmnt.getUserFace(t),floor:a+1,userIco:cmnt.getUserIco(t),userLnk:r,lastUserLnk:n?appTemplate(a1810,{userLnk:n}):"",area:i,cont:c,time:a1808(t.time,"time"),agree:a1809(t.agree),hasReply:s,pos:"dialog"};return o=$.cmnt.tpls.get("dialogItem"),appTemplate(o,l)}),cmnt.dialogItemRender=function(e,t,a,n,i){return'<div class="item clearfix '+(i?"item-hide":"")+'" comment-type="item">'+cmnt.dialogItemInnerRender(e,t,a,n)+"</div>"},cmnt.getDialog=function(e){var t=e.mid;if(!t)return"";var a=e.allNewsid,n=cmnt.data.get(a),i=cmnt.data.get(a,"cmntlist",t);return cmnt.dialogListRender(a,i,n)},cmnt.layer=function(){var e={};e.timeout=null,e.animate=null;var t=function(){var e=$.create("div");return e.className="sina-comment-list-layer",e.style.visibility="hidden",$.byTag("body")[0].appendChild(e),e};return e.show=function(a,n,i){e.dom||(e.dom=t()),clearTimeout(e.timeout),e.animate&&e.animate.pause(),e.dom.innerHTML='<div class="sina-comment-list-layer-hd"><h2>查看对话</h2><a action-type="layerHide" href="javascript:;" class="close"></a></div><div class="sina-comment-list-layer-bd">'+(n||"")+"</div>";var s,o,r,c,l,m=$.app.getWinSize(),u=(s=e.dom,o=648,r=380,c=$.getStyle(s,"width"),l=$.getStyle(s,"height"),c=parseFloat(c),c=isNaN(c)?o:c,l=parseFloat(l),{width:c,height:l=isNaN(l)?r:l}),d=document.body.scrollTop||document.documentElement.scrollTop;$.setStyle(e.dom,{top:d+(m.height-u.height)/2+"px",left:"50%",marginLeft:-u.width/2+"px",opacity:0,visibility:"visible"}),(i=i||0)&&(e.timeout=setTimeout(function(){e.hide()},i)),$.animate(e.dom,{opacity:1},200,"Tween.Quad.easeIn",{start:function(e){},complete:function(e){}})},e.hide=function(){e.dom||(e.dom=t()),clearTimeout(e.timeout),e.animate&&e.animate.pause(),$.animate(e.dom,{opacity:0},200,"Tween.Quad.easeOut",{start:function(e){},complete:function(t){$.setStyle(e.dom,{left:"-9999px",opacity:0})}})},e}(),cmnt.Dialog=(a1870=$.createClass(),a1870.include({init:function(e){this.listOpt=e.listOpt,this.set("cfg",e),this.commentItem=getPar(e.trigger,"item"),this.actionData=e.actionData,this.allNewsId=this.actionData.allNewsid,this.commentData=e.commentData,this.commentMid=this.commentData.mid,this.replyData=e.replyData,this.showNum=this.listOpt.replyShowNum,this.maxNum=this.replyData.count,this.showedNum=0,this.page=0,this.totalPage=Math.ceil((this.maxNum-this.showNum)/this.listOpt.replyPageNum)+1,this.maxPage=this.listOpt.replyClickMoreTimes,this.wrap=document.createElement("div"),this.wrap.className="dialog-list-wrap",this.wrap.setAttribute("comment-type","dialogWrap"),this.listWrap=document.createElement("div"),this.listWrap.className="dialog-list",this.listWrap.setAttribute("comment-type","dialogList"),this.wrap.appendChild(this.listWrap),$.insertAfter(this.wrap,this.commentItem),this.dialogItemTmpl=$.cmnt.tpls.get("dialogItem"),this.load()},load:function(){this.page+=1,1===this.page?(this.pageNum=this.listOpt.replyShowNum,this.replyList=this.replyData.list,this.onLoaded()):(this.pageNum=this.listOpt.replyPageNum,this.request())},onLoaded:function(){var e;this.render(),this.page<this.totalPage?this.showClickMore():this.hideClickMore(),e=cmnt.data.get(this.allNewsId,"replydict",this.commentMid),cmnt.data.set(this.allNewsid,"cmntlist",this.replyList),1!==this.page&&"concat"in e.list&&e.list.concat(this.replyList)},request:function(e){var t=this;if(!t.loading){t.loading=!0;var a=t.commentData,n=t.listOpt,i=a.mid;$.getJsonp("//comment.sina.com.cn/cmnt/info",{data:{channel:a.channel,newsid:t.allNewsId,mid:i,ie:n.encoding,oe:n.encoding,format:"json",page_size:n.replyPageNum,page:1,order:0,thread:1,last_mid:t.lastMid},success:function(e){var a=e.result;t.loading=!1,0!==a.status.code||a.error||(t.replyList=a.threaddict[i].list,t.onLoaded.call(t))}})}},showClickMore:function(){var e=this.listOpt;if(!this.clickMore){var t=document.createDocumentFragment(),a=document.createElement("div"),n=document.createElement("a");a.style.display="none",a.className="dialog-list-ft",n.className="more",n.setAttribute("data-sudaclick","comment_morereply_i"),a.appendChild(n),t.appendChild(a),this.clickMoreA=n,this.clickMore=a,this.bindClickMore(),this.wrap.appendChild(a)}this.page>this.maxPage?(this.clickMoreA.href="http://comment5.news.sina.com.cn/comment/skin/default.html?channel="+e.channel+"&newsid="+e.newsid+"&group="+e.group,this.clickMoreA.target="_blank"):(this.clickMoreA.href="javascript:;",this.clickMoreA.removeAttribute("target")),this.clickMoreA.innerHTML="查看剩余<em>X</em>条回复".replace("X",this.maxNum-this.showedNum),this.clickMore.style.display="block"},bindClickMore:function(){var e=this;$.addEvent(e.clickMoreA,"click",function(t){e.page<=e.maxPage&&e.load()})},hideClickMore:function(){this.clickMore&&(this.clickMore.style.display="none")},render:function(){var e=this.replyList,t=e.length,a=document.createDocumentFragment();if(t>0){for(var n=0;n<t;n++)a.appendChild(this.itemRender(e[n]));this.lastMid=e[n-1].mid}this.listWrap.appendChild(a)},itemRender:function(e){var t,a,n;return this.commentData,n=this.getUserNameTmpl(e),t={allNewsid:e.newsid,channel:e.channel,newsid:e.newsid,nick:e.nick,uid:e.uid,mid:e.mid,parent:e.parent,thread:e.thread,floor:++this.showedNum,userIco:"name-weibo",userLnk:n.user,lastUserLnk:n.lastUser,area:e.area||"&nbsp;",cont:cmnt.face.filter(app.cmntEncodeHtml(e.content)),time:cmnt.getTimeStr(e.time,"time"),agree:e.agree?$.app.splitNum(e.agree):0,hasReply:0,pos:"dialog",isAgreed:cmnt.getUserAgreed(e)},(a=document.createElement("div")).className="item clearfix",a.setAttribute("comment-type","item"),a.innerHTML=appTemplate(this.dialogItemTmpl,t),a},getUserNameTmpl:function(e){var t,a,n=e.parent,i=e.uid,s=e.parent_uid,o=e.nick,r=e.parent_nick,c='<span class="sina-comment-user-lnk-wrap">@@userLink@@</span>';return t=i?'<a href="https://weibo.com/u/'+i+'" title="'+o+'" target="_blank" data-sudaclick="comment_usernickname_p">'+o+"：</a>":o+"：",a=n===this.commentMid?"":s?'<a href="https://weibo.com/u/'+s+'" title="'+r+'" target="_blank" data-sudaclick="comment_usernickname_p">@'+r+"：</a>":"@"+r+"：",{user:t?c.replace("@@userLink@@",t):"",lastUser:a?"回复"+c.replace("@@userLink@@",a):""}},getUserFaceTmpl:function(e){var t=e.uid;return t?'<a href="https://weibo.com/u/'+t+'" title="'+e.nick+'" target="_blank" data-sudaclick="comment_useravatar_p"><img src="'+e.profile_img+'"/></a>':'<img src="'+e.profile_img+'"/>'}}),a1870),cmnt.DataLoader=(a1929=$.createClass(),a1929.include({init:function(e){this._setOpt(e),this.data=null,this.loading=!1,this.getData()},_setOpt:function(e){this.set("opt",$.extend({url:"",param:{},beforeLoad:function(){},loaded:function(e){},error:function(e,t){}},e))},getData:function(e){var t=this,a=t.get("opt"),n=a.url,i=a.param;t.loading=!0,a.beforeLoad(),$.getJsonp(n,{data:i,success:function(n){var i=n.result;0!==i.status.code||i.error?(a.error(i.status.msg,i.status.code),console.log("该评论状态异常! code:"+i.status.code+"; msg:"+i.status.msg),$.app.sima.track({error_type:"timeout error"})):(t.data=i,a.loaded(t)),t.loading=!1,e&&"function"==typeof e&&e(i.status.msg,i.status.code)}})}}),a1929),cmnt.List=(a1951=function(e,t,a){if(!$.isArray(t))return"";if(!t.length)return"";var n,i,s=a.pageNum||a.latestPageNum,o=a.hotPageNum,r=[],c=a.type,l=a.data,m=0,u=0,d=0,p=0;if("latest"===c){for(d=0,n=t.length;d<n;d++){p++;var f=m<s;i=t[d],1===p&&(r.push('<div class="sina-comment-page">'),u++),r.push(cmnt.itemRender(e,i,l,a)),p===f&&(r.push("</div>"),u++,p=0),m++}u%2&&r.push("</div>")}else if("hot"===c)for(d=0,n=t.length;d<n;d++)i=t[d],m<o&&(r.push(cmnt.itemRender(e,i,l,a)),m++);else for(d=0,n=t.length;d<n;d++)i=t[d],r.push(cmnt.itemRender(e,i,l,a)),(m+1)/o==1&&(r.push("</div>"),u++);return r.join("")},a1972=$.createClass(cmnt.DataLoader),a1973=null,a1972.include({init:function(e,t,a){var n=this;n.currentDialog=null,n.listWrapper=$.byId(e);var i=$.extend({hideList:0,url:"",channel:"",newsid:"",showReply:0,group:0,hotPageNum:3,latestPageNum:3,replyShowNum:3,replyPageNum:15,replyClickMoreTimes:3,maxWordCount:200,showUserFrom:!1,loaded:function(e){},beforeLoad:function(){},error:function(e,t){}},a);i.clickMoreTimes=0,n.set("clickMoreTimes",0),n.set("countShowed",0);var s=a.encoding||cmnt.config.encoding||"utf-8",o=$.login.getInfo(),r={url:t||"//comment.sina.com.cn/page/info",config:i,param:{version:1,format:"json",channel:i.channel,newsid:i.newsid,group:i.group||i.style,compress:0,ie:s,oe:s,page:1,page_size:i.latestPageNum,t_size:i.replyShowNum,h_size:i.hotPageNum,thread:1,uid:o.sina?o.sina.uid:"unlogin_user"},listType:"all",beforeLoad:function(){n.beforeLoad(),"function"==typeof i.beforeLoad&&i.beforeLoad()},loaded:function(e){e.render(e),e.loaded(e),"function"==typeof i.loaded&&i.loaded(e)},error:function(e,t){n.error.apply(n,arguments),"function"==typeof i.error&&i.error.apply(n,arguments)}};n.firstRender=!0,n._setOpt(r),n.loading=!1,n._setDom(),n.getData()},_setDom:function(){var e=this.listWrapper,t=$.cmnt.tpls.get("list");e.innerHTML=appTemplate(t,{});var a=$.builder(e,"comment-type");this.set("dom",a.ids)},beforeLoad:function(){var e=this.get("dom"),t=this.get("opt"),a=t.config,n=t.listType;$.addClass(e.wrap,"sina-comment-list-"+n+"-loading"),a.hideList&&(e.wrap.style.display="none")},loaded:function(){var e,t,a,n=this.get("dom"),i=this.get("opt"),s=this.data,o=i.listType;if(s.news&&"N_CLOSE"===s.news.status)return this.listWrapper.style.display="none",void("body"!==(e=this.listWrapper.parentNode).tagName.toLowerCase()&&(e.style.display="none"));if(0===s.cmntlist.length&&(i.config.isBBS?this.setMore(getMsg("I006")):this.setMoreLink(getMsg("I027"))),this.firstRender&&(this.bindEvent(),cmnt.updateTime(n.wrap)),this.firstRender=!1,$.removeClass(n.wrap,"sina-comment-list-"+o+"-loading"),t="all"===o?n.wrap:n[o+"Wrap"],(a=$.byAttr(t,"action-type","dialogShow")).length)for(var r=0;r<a.length;r++)this.showDialog(a[r])},error:function(e,t){this.get("dom");var a,n=this.get("opt");this.data,n.listType,this.listWrapper.style.display="none","body"!==(a=this.listWrapper.parentNode).tagName.toLowerCase()&&(a.style.display="none")},render:function(){var e=this.data,t=this.get("dom"),a=this.get("opt"),n=a.config;if(!n.hideList){var i=n.pageNum||n.latestPageNum,s=n.hotPageNum,o=a.param,r=o.newsid,c=a.listType;this.setNewsData(r,e),e.count?this.totalNum=e.count.show:this.totalNum=0;var l=e.cmntlist,m=e.hot_list;if(!l.length)return this;var u="",d="",p={data:e,pageNum:i,hotPageNum:s,showUserFrom:n.showUserFrom};if("all"===c)p.type="hot",d=a1951(r,m,p),p.type="latest",u=a1951(r,l,p),t.hotList&&(t.hotList.innerHTML=d),t.latestList.innerHTML=u,this.set("countShowed",this.get("countShowed")+l.length),this.checkClickTimes(this.get("clickMoreTimes"));else if("latest"===c){if(p.type="latest",u=a1951(r,l,p),1===o.page)t.latestList.innerHTML=u;else{var f=$.create("div");f.innerHTML=u,t.latestList.appendChild(f)}this.set("countShowed",this.get("countShowed")+l.length),this.checkClickTimes(this.get("clickMoreTimes"))}else p.type="hot",d=a1951(r,m,p),t.hotList&&(t.hotList.innerHTML=d);return this.setDataClz(c,d,u),this.loading=!1,this}this.loading=!1},showDialog:function(e){var t=$.queryToJson(e.getAttribute("action-data")),a=t.mid,n=t.newsid,i=this.get("opt").config,s=cmnt.data.get(n,"replydict",a),o=cmnt.data.get(n,"cmntlist",a);return this.Dialogs=this.Dialogs||{},this.Dialogs[a]=new cmnt.Dialog({trigger:e,listOpt:i,actionData:t,commentData:o,replyData:s})},setMoreLink:function(e,t){var a=this.get("opt"),n=a.param.group||"0",i=(t||"")+'<a class="more" target="_blank" href="http://comment5.news.sina.com.cn/comment/skin/default.html?channel='+a.param.channel+"&newsid="+a.param.newsid+"&group="+n+'" data-sudaclick="comment_allcomment_p">'+e+"</a>";this.setMore(i)},setMore:function(e){var t=this.get("dom");t.latestMore&&(t.latestMore.__innerHTML__||(t.latestMore.__innerHTML__=t.latestMore.innerHTML),t.latestMore.setAttribute("action-type",""),t.latestMore.innerHTML=e)},reSetMoreLink:function(e){var t=this.get("dom");t.latestMore&&t.latestMore.__innerHTML__&&(t.latestMore.innerHTML=t.latestMore.__innerHTML__),e&&(t.latestMore.innerHTML=e),t.latestMore.setAttribute("action-type","getMore")},showFirstHidePage:function(){var e=this.get("dom"),t="sina-comment-page-hide",a=$.byClass(t,e.latestList);if(a&&a.length>0){var n=a[0],i=this.get("countShowed");if(this.set("countShowed",0),n){var s=$.byClass("item",n);this.set("countShowed",i+s.length),n.style.display="",$.removeClass(n,t),$.addClass(n,"sina-comment-page-show")}return!0}return!1},getLestNum:function(){return this.totalNum-this.get("countShowed")},getMoreLatest:function(){var e=this,t=e.get("clickMoreTimes");if(!e.showFirstHidePage()){var a=e.get("opt.param.page");e.setMore('<a href="javascript:;" class="more">'+getMsg("I041")+"</a>"),e.getLestNum()>0&&e.setType("latest").setPage(a+1).getData(function(){e.data&&e.data.cmntlist&&e.data.cmntlist.length>0&&e.reSetMoreLink()})}e.set("clickMoreTimes",t+1),e.checkClickTimes(t+1)},checkClickTimes:function(e){var t=this.get("opt").config,a=this.getLestNum();e<t.clickMoreTimes?this.reSetMoreLink('<a href="javascript:;" class="more">'+appTemplate(getMsg("I028"),{num:a})+"</a>"):this.setMoreLink(appTemplate(getMsg("I048"),{totalNum:this.totalNum})),a<=0&&(t.isBBS?this.setMore(getMsg("I006")):this.setMoreLink(appTemplate(getMsg("I048"),{totalNum:this.totalNum})))},bindEvent:function(){var e=this,t=e.get("dom"),a=e.get("opt");if(e.firstRender){var n=$.delegatedEvent(t.wrap);n.add("txt-toggle","click",function(e){$.cmnt.truncate.toggle(e.el,e.data.type)}),n.add("vote","click",function(e){var n=e.el,i=e.data;if("true"!==n.getAttribute("voted")){if(!n.getAttribute("posting")){n.setAttribute("posting","true"),o=n.parentNode,r=$.byAttr(o,"action-type","reply")[0],c=r.getAttribute("action-data"),$.queryToJson(c),$.cmnt.commentTip.hide();var s="onVoteSuccess";$.cmnt.vote({channel:i.channel,newsid:i.newsid,parent:i.mid,iframe:"1",callback:s})}var o,r,c;window[s]=function(e){if(e&&e.result&&e.result.status&&0==e.result.status.code){$.cmnt.voteTip.show(n,1e3),$.addClass(n,"vote-active");var s=n.title,o=getMsg("I008d"),r=0,c=$.byAttr(n,"comment-type","voteNum")[0];c&&c.innerHTML?(r=parseInt(c.innerHTML.replace(/[^\d]/g,""),10),isNaN(r)&&(r=0)):c.innerHTML=r;var l=n.innerHTML,m=r+1;n.innerHTML=l.replace($.app.splitNum(r),$.app.splitNum(m)).replace(s,o),n.title=o,n.setAttribute("voted","true"),cmnt.setVotedMid(a.param.uid,i.mid),n.setAttribute("posting","false")}else e&&e.result&&e.result.status&&106==e.result.status.code?(cmnt.commentTip.show(t.cont,"error",getMsg("I008e"),2e3),$.addClass(n,"vote-active"),o="已"+(s=n.title),l=n.innerHTML,n.innerHTML=l.replace(s,o),n.title=o,n.setAttribute("voted","true"),n.setAttribute("posting","false")):n.setAttribute("posting","false")}}}),n.add("reply","click",function(t){e.toggleReply(t),$.cmnt.commentTip.hide()}),n.add("reflash","click",function(t){var a=t.data.type;e.setType(a).getData(),e.reSetMoreLink(),e.set("clickMoreTimes",0),e.set("countShowed",0)}),n.add("getMore","click",function(t){e.getMoreLatest()}),n.add("shareHover","mouseover",function(e){var t=e.el,a=e.data;setTimeout(function(){$.cmnt.shareTip.show(t,a)},100)}),n.add("shareHover","mouseout",function(e){$.cmnt.shareTip.hide(1e3)})}},toggleReply:function(e){var t,a=e.data.mid;a1973&&(e.el.innerHTML="回复",t=a1973.get("opt").parent,a1973.destroy(),a1973=null,t===a)||this.showReply(e)},showReply:function(e){var t=this,a=e.el,n=e.data,i=t.get("opt").config;a1973&&(a.innerHTML="回复",a1973.destroy(),a1973=null),a.innerHTML="收起";var s=(a1973=new cmnt.ReplyForm(a,{allNewsid:n.allNewsid,channel:n.channel,newsid:n.newsid,parent:n.mid,thread:n.thread,nick:n.nick,uid:n.uid,commented:function(e,s,o){if(!i.hideList){t.get("dom").latestList;var r,c=cmnt.data.get(n.newsid,"replydict"),l=n.thread||n.mid;c[l]=c[l]||{count:1,list:[]},c[l].list.push(o),t.Dialogs=t.Dialogs||{},(r=t.Dialogs[l])?r.listWrap.insertBefore(r.itemRender(o),r.listWrap.firstChild):(r=t.Dialogs[l]=t.showDialog(a)).page=0,"function"==typeof i.commented&&i.commented()}},autoGrow:void 0===i.autoGrow||i.autoGrow,postTip:"回复"+n.nick,floor:n.floor,pos:n.pos})).get("dom").cont;$.app.textareaUtils.insertText(s,"",0,0)},setNewsData:function(e,t){var a=cmnt.data;return a.set(e,"all",t),t.news&&a.set(e,"newsdict",[t.news]),t.newsdict&&!$.isEmptyObj(t.newsdict)&&a.set(e,"newsdict",t.newsdict),t.cmntlist&&a.set(e,"cmntlist",t.cmntlist),t.hot_list&&a.set(e,"cmntlist",t.hot_list),t.threaddict&&a.set(e,"replydict",t.threaddict),this},setDataClz:function(e,t,a){var n=this.get("dom").wrap,i="sina-comment-list-has-";t&&($.addClass(n,i+e),"all"===e&&$.addClass(n,i+"hot")),a&&($.addClass(n,i+e),"all"===e&&$.addClass(n,i+"latest"));var s=this.get("opt.config.maxWordCount");if(s!==1/0||s<=0)for(var o=$.byAttr(n,"comment-type","itemTxt"),r=0,c=o.length;r<c;r++){var l=o[r];$.cmnt.truncate.handle(l,s)}},setPage:function(e){return e<1?this:(this.set("opt.param.page",e),this)},setType:function(e){return e&&e.match(/^(all|hot|latest)$/)&&(this.get("opt").listType=e),this}}),a1972),cmnt.Form=(a2176=cmnt.commentTip,a2177=$.addEvent,a2178=$.custEvent,a2179=!1,a2180=function(e){return e.getAttribute("placeholder")||e.placeholder||""},a2183=function(e){var t=e.data;"loginWithComment"===t.action&&"function"==typeof t.callback&&t.callback()},a2187=$.createClass(),a2187.include({init:function(e,t){this.commenting=!1,this.commentType="normal",this._setOpt(t),this._setDom(e),this.bindEvent()},_setOpt:function(e){e.allNewsid=e.allNewsid||e.newsid,this.set("opt",$.extend({allNewsid:"",channel:"",newsid:"",parent:"",share_url:location.href.split("#")[0],video_url:"",img_url:"",encoding:cmnt.config.encoding||"utf-8",postTip:getMsg("I003"),autoGrow:!1,content:"",commented:function(){}},e))},_setDom:function(e){var t=this.get("opt");e=$.byId(e);var a=cmnt.face.get("common"),n={content:t.content,postTip:t.postTip,name:$.login.getName(),face:$.login.getFace(),commonFaces:a.faces,commonFacesBase:a.base},i=$.cmnt.tpls.get("comment");e.innerHTML=appTemplate(i,n);var s=$.builder(e,"comment-type");this.set("dom",s.ids)},bindEvent:function(){var e,t,a=this,n=a.get("dom"),i=a.get("opt"),s=n.cont,o=$._throttle(function(){var e=$.trim(s.value),t=a2180(s);if(""===e||e===t)return s.focus(),void a2176.show(s,"error",getMsg("I003"),3e3);if($.byteLength(e)>6e3)return s.focus(),void a2176.show(s,"error","您的评论字数超出了上限3000字,请修改后再提交！",3e3);if($.login.isLogin()){if(a.commenting)return;$.login.isUidChanged()?$.login.lInSuccess(function(){a.comment()}):a.comment()}else cmnt.loginWithComment=!0,a2178.remove($,"ce_login",a2183),a2178.add($,"ce_login",a2183,{action:"loginWithComment",callback:function(){a2178.remove($,"ce_login",a2183),!a.commenting&&cmnt.loginWithComment&&(a.comment(),cmnt.loginWithComment=!1)}}),a.login()},300,a),r=$._debounce(a.toggleSubmitBtn,300,a);n.logout&&a2177(n.logout,"click",function(e){$.login.lOut()}),a2177(n.submit,"click",function(e){$.hasClass(e.target,"btn-disabled")||o()}),a2177(s,"keyup",function(e){r(),13===e.keyCode&&e.ctrlKey&&($.cmnt.face.hide_menu(),o())}),a2177(s,"focus",r),e=s,t=r,window.ActiveXObject?e.onpropertychange=t:e.addEventListener("input",t,!1),i.autoGrow&&(a.textareaAugoGrow=new $.app.textareaAutoGrow(s,{maxHeight:72}));var c=[s];if($.placeholder(c),!a2179){var l=$.cmnt.face,m=$.delegatedEvent($.byTag("body")[0]);m.add("login","click",function(e){cmnt.commentTip.hide(),$.login.lIn()}),m.add("face-toggle","click",function(e){var t=e.el;$.hasClass(t,"trigger-active")?l.hide_menu():l.show_menu(t)}),m.add("face-insert","click",function(e){var t=e.el.getAttribute("data-text");l.insert(t)}),m.add("face-close","click",function(e){l.hide_menu()}),m.add("checkbox-toggle","click",function(e){var t=e.el;$.app.simCheckbox(t)}),a2179=!0}return a2178.add($,"ce_login",function(){a.setName()}),a2178.add($,"ce_preLogin",function(){a.setName()}),a2178.add($,"ce_logout",function(){a.setName()}),a2178.add($,"ce_weiboLogin",function(){a.setName()}),a2178.add($,"ce_weiboLogout",function(){a.setName()}),a},setName:function(){var e=this.get("dom");e.name&&(e.name.innerHTML=$.login.getName()),e.head&&(e.head.innerHTML=$.login.getFace())},toggleSubmitBtn:function(){var e=this.get("dom"),t=e.cont,a=e.submit,n=$.trim(t.value),i=a2180(t);""===n||n===i?$.addClass(a,"btn-disabled"):$.removeClass(a,"btn-disabled")},comment:function(){var e=this;if(!e.commenting){e.commenting=!0;var t=e.get("dom"),a=e.get("opt"),n=$.trim(t.cont.value).replace(/\s/g," ");cmnt.comment({channel:a.channel,newsid:a.newsid,parent:a.parent,content:n,ie:a.encoding,oe:a.encoding,ispost:0,usertype:"pc",share_url:a.share_url,video_url:a.video_url,img_url:a.img_url},function(a){var i,s=a.result,o=Number(s.filter_code);o>=4e3||o>=1103&&o<=1106||o>=2e3&&o<=2100?(i=getMsg("I001"),cmnt.commentTip.show(t.cont,"succ",i,2e3),t.cont.value="",e.commented(n),e.commenting=!1):1005===o?cmnt.popup({skin:"error",type:"confirm",head:null,body:getMsg("I045"),actionText:getMsg("I046"),cancelText:getMsg("I047"),parentNode:t.wrap,onAction:function(){e.commenting=!1,location.href="https://security.weibo.com/mobile/index?entry=sina_shiming&r="+encodeURIComponent(location.href.split("#")[0])},onCancel:function(){e.commenting=!1}}).show():e.commenting=!1},function(){cmnt.commentTip.show(t.cont,"error",getMsg("I042"),3e3),e.commenting=!1})}},commented:function(e){var t=this.get("opt"),a=t.allNewsid,n=$.login.getInfo(),i={newsid:a,mid:"",parent:t.parent,thread:t.thread,parent_nick:t.nick,parent_uid:t.uid,content:e,time:"",agree:0,config:$.login.getCommentConfig(),nick:n.sina.nick,uid:n.sina.uid,usertype:"pc",area:"",pos:t.pos},s=$.create("div");s.className="item item-hack clearfix",s.setAttribute("comment-type","item"),s.innerHTML=cmnt.itemInnerRender(a,i,{},[]),t.commented(e,s,i)},login:function(){$.login.isLogin()||$.login.lIn()},destroy:function(){var e=this,t=e.get("dom"),a=t.wrap;t.cont&&t.cont.blur(),a&&a.parentNode&&a.parentNode.removeChild(a),e.set("opt.parent",""),e=null}}),a2187),cmnt.ReplyForm=(a2291=cmnt.data,a2292=$.createClass(cmnt.Form),a2292.include({init:function(e,t){this.commenting=!1,this._setOpt(t),this._setDom(e),this.bindEvent()},_setDom:function(e){var t=this.get("opt"),a=(e=$.byId(e),document.createElement("div"));a.className="reply-form-wrap",a.innerHTML=appTemplate($.cmnt.tpls.get("reply"),{content:t.content,postTip:t.postTip});var n=getPar(e,"itemCont"),i=n.parentNode;"item"==i.getAttribute("comment-type")?(this.commentType="out",i.appendChild(a)):(this.commentType="in",$.insertAfter(a,n));var s=$.builder(a,"comment-type");s.ids.trigger=e,s.ids.itemCont=n,s.ids.itemWrap=i,this.set("dom",s.ids)},setArrowPos:function(){var e=this.get("dom");if(e.replyArrow&&e.trigger){var t=$.getXY(e.trigger),a=$.getXY(e.wrap),n=$.getOuterStyle(e.replyArrow,"width"),i=$.getOuterStyle(e.trigger,"width"),s=$.getOuterStyle(e.wrap,"width"),o=a[0]+s-t[0]-i/2-n/2+"px";e.replyArrow.style.right=o}},showHdTip:function(e){var t=this.get("dom").hd;t.innerHTML=e,t.style.display="",t.style.height="auto"},hideHdTip:function(){var e=this.get("dom").hd;e.style.display="none",e.style.height="0"},commented:function(e){var t=this,a=t.get("opt"),n=a.allNewsid,i=a.parent,s=(a.thread,$.login.getInfo()),o=(a2291.get(n,"cmntlist",i),a2291.get(n,"replydict",i));$.isArray(o)||(o=[]);var r,c={newsid:n,mid:"",parent:a.parent,thread:a.thread,parent_nick:a.nick,parent_uid:a.uid,content:e,time:"",agree:0,config:$.login.getCommentConfig(),nick:s.sina.nick,uid:s.sina.uid,usertype:"pc",area:""},l=$.create("div");if(l.className="item item-hack clearfix",l.setAttribute("comment-type","item"),l.innerHTML=cmnt.itemInnerRender(n,c,{},o),"dialog"===a.pos){var m=o[a.floor-1],u="";typeof m!==$.C.U&&(u=cmnt.getUserLnk(m,"@")),(r=$.create("div")).className="item item-hack clearfix",r.setAttribute("comment-type","item"),r.innerHTML=cmnt.dialogItemInnerRender(n,c,"new",u)}a.commented(e,l,c),setTimeout(function(){t.destroy(),t.commenting=!1},2e3)}}),a2292),cmnt.FormList=(a2342=$.createClass(),a2342.include({init:function(e,t,a,n){this._setOpt(t,a,n),this._setDom(e),this.render()},_setOpt:function(e,t,a){var n=this;n.formOpt=$.extend({},e),n.listOpt=$.extend({},t),n.opt=$.extend({isBBS:0,hideList:0,hideComment:!1},a),n.formOpt.commented=function(t,a){n.commented(t,a),"function"==typeof e.commented&&e.commented(t,a)},n.listOpt.loaded=function(e){n.loaded(e),"function"==typeof t.loaded&&t.loaded(e)}},_setDom:function(e){e=$.byId(e),$.addClass(e,"sina-comment-wrap");var t=$.cmnt.tpls.get("formList");e.innerHTML=appTemplate(t,{});var a=$.builder(e,"comment-type");this.set("domList",a.list),this.set("dom",a.ids)},render:function(){var e=this.get("domList"),t=this.get("dom"),a=e.form;if(this.commentForms=[],this.commentList=null,this.opt.hideList||(this.commentList=new cmnt.List(t.list,this.listOpt.url,this.listOpt)),this.opt.hideComment){var n=$.byClass("page-tools");n.length>0&&($.byAttr(n[0],"node-type","comment")[0].style.display="none");for(var i=a.length-1;i>=0;i--)a[i].style.display="none"}if(a&&!this.opt.hideComment)for(i=a.length-1;i>=0;i--)this.commentForms.push(new cmnt.Form(a[i],this.formOpt))},setCount:function(){var e=cmnt.data.get(this.formOpt.allNewsid||this.formOpt.newsid,"all"),t=e.news,a="http://comment5.news.sina.com.cn/comment/skin/default.html",n='<span class="sep">|</span>',i={comment:"",person:"",post:""},s=getMsg("I031")+n+getMsg("I032");if(e&&e.count&&(i.comment=$.app.splitNum(e.count.show),i.person=$.app.splitNum(e.count.total)),this.opt.isBBS){if(!this.listOpt.group&&e.grouplist&&0!==e.grouplist.length){var o=e.grouplist[0];s+=n+getMsg("I033"),i.post='<a href="'+a+"?channel="+o.news.channel+"&newsid="+o.news.newsid+'&group=1">'+$.app.splitNum(o.count.total)+"</a>"}}else{var r=a+"?channel="+t.channel+"&newsid="+t.newsid;1===this.listOpt.group&&(r+="&style=1"),i.comment='<a href="'+r+'" data-sudaclick="comment_sum_p" target="_blank">'+i.comment+"</a>",i.person='<a href="'+r+'" data-sudaclick="comment_participatesum_p" target="_blank">'+i.person+"</a>"}for(var c,l=appTemplate(s,i),m=this.commentForms,u=m.length-1;u>=0;u--)(c=m[u].get("dom")).count&&(c.count.innerHTML=l)},loaded:function(e){this.setCount()},commented:function(e,t){var a=this.opt;if(this.commentList&&!a.hideList){var n=this.commentList,i=n.get("dom.latestList"),s=n.get("opt.config.hideList"),o=!0;void 0!==a.scrollToLatest&&(o=a.scrollToLatest),typeof s!==UNDEFINED&&1!==s&&(cmnt.insertList(i,t,o),n.setDataClz("all",n.data.hot_list&&n.data.hot_list.length>1,1))}}}),a2342),cmnt})}(window);