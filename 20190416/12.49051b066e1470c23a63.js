(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1103:function(t,e,n){"use strict";var r=n(569);n.n(r).a},1105:function(t,e,n){"use strict";var r=n(570);n.n(r).a},1107:function(t,e,n){"use strict";var r=n(571);n.n(r).a},1109:function(t,e,n){"use strict";var r=n(572);n.n(r).a},1621:function(t,e,n){"use strict";n.r(e);var r=n(14),o=n.n(r),a=n(42),i=n.n(a),s=n(123),u=n.n(s),c=n(368),l=n.n(c),d=n(367),p=n.n(d),f=n(8),h=n.n(f),v=n(83),w=n.n(v),x=n(122),g=n.n(x),m=n(370),b=n.n(m),y=n(121),k=n(371),I=n(376),B=n(177),C=n(125),R=n.n(C),T=n(124),_=n.n(T),O=n(374),S=function(t,e,n,r){return new(n||(n=h.a))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},j=function(){function t(){i()(this,t)}return t.getCaptcha=function(){return S(this,void 0,void 0,o.a.mark(function t(){var e,n,r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e="/lottery/v1/SilverBox/getCaptcha",t.next=4,_.a.get(e,{params:{ts:Date.now()}});case 4:if(n=t.sent,r=n.data,0===parseInt(r.code)){t.next=10;break}return t.abrupt("return",{error:new Error(r.msg||e+" 获取验证码失败"),errorType:"caution",errorMsg:r.msg,code:r.code,data:null});case 10:return a=r.data.img,t.abrupt("return",{data:a,error:null});case 12:t.next=17;break;case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",{error:t.t0,errorType:"error",errorMsg:"网络错误或服务器宕机",data:null});case 17:case"end":return t.stop()}},t,this,[[0,14]])}))},t.getAward=function(t,e,n){return S(this,void 0,void 0,o.a.mark(function r(){var a,i,s;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_.a.get("/lottery/v1/SilverBox/getAward",{params:{time_start:t,end_time:e,captcha:n}});case 2:a=r.sent,i=a.serverResponse,r.t0=i.code,r.next=0===r.t0?7:null===r.t0?11:12;break;case 7:if(s=i.data,1!==Object(B.toNumber)(s.isEnd)){r.next=10;break}return r.abrupt("return",{code:0,data:{newTreasureBox:!1},error:null});case 10:return r.abrupt("return",{code:0,error:null,data:{newTreasureBox:!0,awardSilver:Object(B.toNumber)(s.awardSilver),silver:Object(B.toNumber)(s.silver)}});case 11:return r.abrupt("return",R()({},i,{code:null,data:null,errorMsg:"宝箱奖励领取失败, 请您再次尝试领取, 真的非常抱歉 "+O.randomEmoji.sad()}));case 12:return r.abrupt("return",R()({},i,{code:i.code,data:null,errorMsg:i.errorMsg}));case 13:case"end":return r.stop()}},r,this)}))},t.checkTreasureBox=function(){return S(this,void 0,void 0,o.a.mark(function t(){var e,n,r,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.a.get("/lottery/v1/SilverBox/getCurrentTask");case 2:e=t.sent,n=e.serverResponse,t.t0=n.code,t.next=0===t.t0?7:-10017===t.t0?10:null===t.t0?11:12;break;case 7:return r=n.data.time_start,a=n.data.time_end,t.abrupt("return",{data:{newTreasureBox:!0,startTime:r,endTime:a,award:n.data.silver,minute:n.data.minute,currentRound:n.data.times,totalRound:n.data.max_times},error:null});case 10:return t.abrupt("return",{data:{newTreasureBox:!1,totalRound:n.data.max_times},error:null});case 11:return t.abrupt("return",R()({},n,{data:null,errorMsg:"宝箱状态获取异常，可能是您的网络暂时中断或服务器宕机，请之后再次尝试刷新页面."}));case 12:return t.abrupt("return",R()({},n,{data:null,errorMsg:"宝箱信息读取失败: "+n.errorMsg}));case 13:case"end":return t.stop()}},t,this)}))},t}(),P=function(){function t(){i()(this,t),this.isOpen=!1,this.countDownTimer=null,this.finished=!1,this.taskInfo={startTime:0,endTime:0,award:0,minute:3,countDown:0,currentRound:1,totalRound:3},this.eventCallbacks={newTask:[],countDown:[],open:[],close:[],finished:[]}}return t.prototype.triggerEvent=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.eventCallbacks[t].forEach(function(t){"function"==typeof t&&t.apply(void 0,n)})},t.prototype.openTreasureBox=function(){this.isOpen=!0,this.triggerEvent("open")},t.prototype.closeTreasureBox=function(){this.isOpen=!1,this.triggerEvent("close")},t}(),D=n(377),E=function(t,e,n,r){return new(n||(n=h.a))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},A=function(t){function e(){return i()(this,e),l()(this,t.apply(this,arguments))}return p()(e,t),e.prototype.startNewTreasureBox=function(t,e,n,r,o,a){var i=1e3*(e-t);this.taskInfo.startTime=t,this.taskInfo.endTime=e,this.taskInfo.award=n,this.taskInfo.countDown=i,this.taskInfo.minute=r,this.taskInfo.totalRound=a,this.taskInfo.currentRound=o,this.triggerEvent("newTask",{award:n,minute:r,currentRound:o,totalRound:a}),this.startCountDown()},e.prototype.startCountDown=function(){var t=this;this.isOpen||(this.countDownTimer=setInterval(function(){if(t.taskInfo.countDown-=1e3,t.taskInfo.countDown<=0)return t.stopCountDown(),t.openTreasureBox();t.triggerEvent("countDown",t.taskInfo.countDown)},1e3))},e.prototype.stopCountDown=function(){clearInterval(this.countDownTimer),this.taskInfo.countDown=0,this.triggerEvent("countDown",this.taskInfo.countDown)},e.prototype.noMoreTreasureBoxToday=function(t){this.finished=!0,I.cookie.setItem("F_S_T_"+D.b.getUid(),1),this.triggerEvent("finished",t)},e.prototype.checkNewTreasureBox=function(){return E(this,void 0,void 0,o.a.mark(function t(){var e,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.checkTreasureBox();case 2:if(!(e=t.sent).error){t.next=5;break}throw e.error;case 5:if((n=e.data).newTreasureBox){t.next=8;break}return t.abrupt("return",this.noMoreTreasureBoxToday({totalRound:n.totalRound}));case 8:this.startNewTreasureBox(n.startTime,n.endTime,n.award,n.minute,n.currentRound,n.totalRound);case 9:case"end":return t.stop()}},t,this)}))},e.prototype.getAward=function(t){return E(this,void 0,void 0,o.a.mark(function e(){var n,r,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.taskInfo.startTime,r=this.taskInfo.endTime,e.next=4,j.getAward(n,r,t);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}))},e.prototype.getCaptchaImgUrl=function(){return E(this,void 0,void 0,o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.getCaptcha();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))},e.prototype.on=function(t,e){this.eventCallbacks[t]&&this.eventCallbacks[t].indexOf(e)<0&&"function"==typeof e&&this.eventCallbacks[t].push(e)},e}(P),N=n(31),M=function(t,e,n,r){return new(n||(n=h.a))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},$=function(t){function e(){return i()(this,e),l()(this,t.apply(this,arguments))}return p()(e,t),e.prototype.newTask=function(){return M(this,void 0,void 0,o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.closeTreasureBox(),t.next=4,this.checkNewTreasureBox();case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),Object(N.b)("class: TreasureBox")("宝箱状态获取失败",t.t0);case 10:case"end":return t.stop()}},t,this,[[0,6]])}))},e}(A),F=function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=b()(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&w()(e,n,i),i},L=function(t){function e(){return i()(this,e),l()(this,t.apply(this,arguments))}return p()(e,t),e}(y.default);F([Object(k.Prop)({type:Number,default:3})],L.prototype,"minute",void 0),F([Object(k.Prop)({type:Boolean,default:!1})],L.prototype,"inCountdown",void 0),F([Object(k.Prop)({type:Boolean,default:!1})],L.prototype,"boxOpen",void 0),F([Object(k.Prop)({type:Boolean,default:!1})],L.prototype,"expired",void 0);var W=L=F([k.Component],L),q=(n(1109),n(369)),U=Object(q.a)(W,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box-slide-item dp-i-block v-middle t-center",class:{"in-countdown":this.inCountdown,"box-open":this.boxOpen,expired:this.expired}},[e("div",{staticClass:"box-img bg-cover"}),e("div",{staticClass:"minute-label"},[e("span",[this._v(this._s(this.minute)+" 分钟")])])])},[],!1,null,"9658a938",null).exports,J=n(375),V=n(378),z=n(779),G=function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=b()(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&w()(e,n,i),i},H=function(t,e,n,r){return new(n||(n=h.a))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},K=function(t){function e(){i()(this,e);var n=l()(this,t.apply(this,arguments));return n.userInput={captcha:""},n.captchaImgSrc="",n.inRequesting=!1,n}return p()(e,t),e.prototype.onSubmit=function(){return H(this,void 0,void 0,o.a.mark(function t(){var e,n,r,a,i=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$refs.captchaInput.$el,""!==this.userInput.captcha){t.next=5;break}return this.userInput.captcha="",e.focus(),t.abrupt("return",this.linkMsg(e,"请输入合法的验证码喔 "+O.randomEmoji.helpless()));case 5:return this.inRequesting=!0,t.next=8,this.treasureBox.getAward(parseInt(this.userInput.captcha));case 8:n=t.sent,this.inRequesting=!1,t.t0=n.code,t.next=-800===t.t0?13:-903===t.t0?16:18;break;case 13:return t.next=15,this.refreshCaptcha();case 15:return t.abrupt("return",Object(z.a)("领取宝箱"));case 16:return this.linkMsg(e,"您已领取此轮宝箱，帮您自动开启下一轮倒计时 "+O.randomEmoji.happy(),"info"),t.abrupt("return",this.treasureBox.newTask());case 18:if(!n.error){t.next=22;break}return t.next=21,this.refreshCaptcha();case 21:return t.abrupt("return",this.linkMsg(e,n.errorMsg,n.errorType));case 22:return r=isNaN(n.data.awardSilver)?this.treasureBoxInfo.award:n.data.awardSilver,a=isNaN(n.data.silver)?this.$store.getters.baseInfoUser.silverSeed+r:n.data.silver,this.linkMsg(e,"领取成功 "+r+" 银瓜子 "+O.randomEmoji.happy(),"success"),setTimeout(function(){return i.closePanel()},1e3),this.$store.dispatch("baseInfoUser",{silverSeed:a}).catch(B.noop),t.next=29,this.treasureBox.newTask();case 29:case"end":return t.stop()}},t,this)}))},e.prototype.refreshCaptcha=function(){return H(this,void 0,void 0,o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.treasureBox.getCaptchaImgUrl();case 2:(e=t.sent).error||(this.captchaImgSrc=e.data);case 4:case"end":return t.stop()}},t,this)}))},e.prototype.closePanel=function(){try{this.$parent.$parent.$emit("closeAwardingPanel")}catch(t){}},e.prototype.created=function(){this.refreshCaptcha().then(B.noop).catch(B.noop)},u()(e,[{key:"happyEmoji",get:function(){return O.randomEmoji.happy()}}]),e}(y.default);G([Object(k.Inject)("treasureBox")],K.prototype,"treasureBox",void 0),G([Object(k.Inject)("treasureBoxInfo")],K.prototype,"treasureBoxInfo",void 0);var Q=K=G([Object(k.Component)({components:{LinkBtn:J.default,LinkInput:V.default}})],K),X=(n(1107),Object(q.a)(Q,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"captcha-widget"},[n("div",{staticClass:"status-text t-no-wrap"},[t._v("宝箱时间到，输入验证码领取奖励 "+t._s(t.happyEmoji))]),n("form",{attrs:{name:"treasure-box-captcha-form"},on:{submit:function(e){e.preventDefault(),t.onSubmit(e)}}},[n("div",{staticClass:"input-ctnr"},[n("link-input",{ref:"captchaInput",staticClass:"dp-i-block v-middle",attrs:{width:120,placeholder:"幼儿算数"},model:{value:t.userInput.captcha,callback:function(e){t.userInput.captcha=e},expression:"userInput.captcha"}}),n("img",{staticClass:"captcha-img dp-i-block v-middle",attrs:{src:t.captchaImgSrc}}),n("button",{staticClass:"refresh-captcha dp-i-block v-middle pointer",attrs:{type:"button",title:"点击刷新验证码","aria-label":"点击刷新验证码",disabled:t.inRequesting},on:{click:t.refreshCaptcha}},[n("i",{staticClass:"icon icon-font icon-replace"})])],1),n("div",{staticClass:"submit-btn t-center"},[n("link-btn",{attrs:{disabled:t.inRequesting}},[t._v("领取")])],1)])])},[],!1,null,"38a1d6ce",null).exports),Y=function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=b()(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&w()(e,n,i),i},Z=Object(N.d)("treasure-box/awarding-panel"),tt=function(t){function e(){i()(this,e);var n=l()(this,t.apply(this,arguments));return n.allTreasureBoxMinuteType=[3,6,9],n.showingSlide=0,n}return p()(e,t),e.prototype.onWatchCurrentRound=function(t){if(isNaN(t)||t<1)return Z("宝箱当前轮数数据错误，错误数据：",t),void(this.showingSlide=-99);this.showingSlide=t-1},e.prototype.closePanel=function(){this.$parent.$emit("closeAwardingPanel")},e.prototype.switchSlide=function(t){this.showingSlide="left"===t?this.showingSlide<=0?0:this.showingSlide-1:this.showingSlide>=this.totalRound-1?this.showingSlide:this.showingSlide+1},u()(e,[{key:"currentMinute",get:function(){return this.treasureBoxInfo.minute}},{key:"currentRound",get:function(){return this.treasureBoxInfo.currentRound}},{key:"totalRound",get:function(){return isNaN(this.treasureBoxInfo.totalRound)||this.treasureBoxInfo.totalRound<0?(Z("宝箱总轮数数据错误，错误数据：",this.treasureBoxInfo.totalRound),-99):this.treasureBoxInfo.totalRound}},{key:"isOpen",get:function(){return this.treasureBoxInfo.isOpen}},{key:"award",get:function(){return this.treasureBoxInfo.award}},{key:"happyEmoji",get:function(){return O.randomEmoji.happy()}}]),e}(y.default);Y([Object(k.Inject)("treasureBoxInfo")],tt.prototype,"treasureBoxInfo",void 0),Y([Object(k.Watch)("currentRound")],tt.prototype,"onWatchCurrentRound",null),Y([Object(k.Prop)({type:String,default:"00:00"})],tt.prototype,"countDownText",void 0);var et=tt=Y([Object(k.Component)({components:{BoxSlideItem:U,VerifyingWidget:X}})],tt),nt=(n(1105),Object(q.a)(et,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"awarding-panel border-box a-scale-in-ease"},[n("h2",{staticClass:"title"},[t._v("宝箱")]),n("div",{staticClass:"info-section p-relative"},[n("div",{staticClass:"round-count t-center"},[-99===t.showingSlide||-99===t.totalRound?n("span",[t._v("轮数数据错误，请帮我们"),n("a",{staticClass:"bili-link",attrs:{href:"//www.bilibili.com/html/contact.html",target:"_blank"}},[t._v("反馈")]),t._v(" (´；ω；`)")]):n("span",[t._v("第 "+t._s(t.showingSlide+1)+" / "+t._s(t.totalRound)+" 轮")])]),-99!==t.showingSlide&&-99!==t.totalRound?n("div",{staticClass:"box-slide m-auto over-hidden"},t._l(t.totalRound,function(e){return n("div",{staticClass:"round-ctnr dp-i-block v-middle ts-dot-4",style:{transform:"translate("+(-184*t.showingSlide-16*t.showingSlide)+"px, 0px)"}},t._l(t.allTreasureBoxMinuteType,function(r){return n("box-slide-item",{key:r,attrs:{minute:r,"in-countdown":!t.treasureBoxInfo.isFinished&&e===t.currentRound&&r===t.currentMinute,"box-open":t.isOpen&&r===t.currentMinute&&t.currentRound===e,expired:t.treasureBoxInfo.isFinished||t.currentRound>=e&&t.currentMinute>r||t.currentRound>e}})}))})):t._e(),-99!==t.showingSlide&&-99!==t.totalRound?[n("button",{directives:[{name:"show",rawName:"v-show",value:t.showingSlide>0,expression:"showingSlide > 0"}],staticClass:"slide-btn p-absolute left pointer ts-dot-2",on:{click:function(e){t.switchSlide("left")}}},[n("i",{staticClass:"icon-font icon-arrow-left"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.showingSlide<t.totalRound-1,expression:"showingSlide < totalRound - 1"}],staticClass:"slide-btn p-absolute right pointer ts-dot-2",on:{click:function(e){t.switchSlide("right")}}},[n("i",{staticClass:"icon-font icon-arrow-right"})])]:t._e()],2),t.treasureBoxInfo.isFinished?[n("transition",{attrs:{"enter-to-class":"a-move-in-left"}},[n("div",{staticClass:"status-text"},[n("div",[t._v("今天已经木有宝箱惹 "+t._s(t.happyEmoji))])])])]:[n("transition",{attrs:{"enter-to-class":"a-move-in-left"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isOpen,expression:"!isOpen"}],staticClass:"status-text"},[n("div",[t._v("宝箱倒计时 "+t._s(t.happyEmoji))]),n("div",{staticClass:"countdown-text"},[n("span",[t._v("本次宝箱剩余")]),n("span",{staticClass:"with-color"},[t._v(t._s(" "+t.countDownText+" ")+"，")]),n("span",[t._v("将收益")]),n("span",{staticClass:"with-color"},[t._v(t._s(" "+t.award+" "))]),n("span",[t._v("银瓜子.")])])])]),n("transition",{attrs:{"enter-to-class":"a-move-in-left"}},[t.isOpen?n("verifying-widget",{ref:"verifyingWidget"}):t._e()],1)],n("button",{staticClass:"close-btn p-absolute pointer ts-dot-4",on:{click:t.closePanel}},[n("i",{staticClass:"icon-font icon-close"})])],2)},[],!1,null,"7e6fabd1",null).exports),rt=function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=b()(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&w()(e,n,i),i},ot=function(t,e,n,r){return new(n||(n=h.a))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},at=function(t){function e(){i()(this,e);var n=l()(this,t.apply(this,arguments));return n.loginStatus=B.loginStatus,n.showAwardingPanel=!1,n.treasureBoxInfo={countDown:0,isOpen:!1,isFinished:!1,award:0,minute:3,currentRound:1,totalRound:3},n.treasureBox=new $,n}return p()(e,t),e.prototype.onWatchShowAwardingPanel=function(t){var e=this;this.treasureBoxInfo.isOpen&&t&&this.refreshCaptcha(),Object(B.nextJob)(function(){t?window.addEventListener("click",e.closeAwardingPanel):window.removeEventListener("click",e.closeAwardingPanel)})},e.prototype.toggleAwardingPanel=function(){return ot(this,void 0,void 0,o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(I.quickLogin)();case 2:this.showAwardingPanel=!this.showAwardingPanel;case 3:case"end":return t.stop()}},t,this)}))},e.prototype.closeAwardingPanel=function(){this.showAwardingPanel=!1},e.prototype.preventClose=function(t){this.showAwardingPanel&&t.stopPropagation()},e.prototype.initTreasureBox=function(){return ot(this,void 0,void 0,o.a.mark(function t(){var e,n=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.treasureBox).on("newTask",function(t){n.treasureBoxInfo.isOpen=!1,n.treasureBoxInfo.award=t.award,n.treasureBoxInfo.minute=t.minute,n.treasureBoxInfo.currentRound=t.currentRound,n.treasureBoxInfo.totalRound=t.totalRound}),e.on("countDown",function(t){n.treasureBoxInfo.countDown=t}),e.on("open",function(){n.treasureBoxInfo.isOpen=!0}),e.on("close",function(){n.treasureBoxInfo.isOpen=!1}),e.on("finished",function(t){n.treasureBoxInfo.isFinished=!0,n.treasureBoxInfo.totalRound=t.totalRound}),t.next=8,e.newTask();case 8:case"end":return t.stop()}},t,this)}))},e.prototype.refreshCaptcha=function(){var t=this.$refs.awardingPanel.$refs.verifyingWidget;t&&"function"==typeof t.refreshCaptcha&&t.refreshCaptcha()},e.prototype.created=function(){var t=this;this.$on("closeAwardingPanel",function(){return t.closeAwardingPanel()})},e.prototype.mounted=function(){return ot(this,void 0,void 0,o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(B.waitLogin)();case 2:return t.next=4,this.initTreasureBox();case 4:case"end":return t.stop()}},t,this)}))},u()(e,[{key:"isLogin",get:function(){return this.loginStatus.isLogin}},{key:"countDownSecond",get:function(){return this.isLogin?this.treasureBoxInfo.countDown/1e3:0}}]),e}(y.default);rt([Object(k.Watch)("showAwardingPanel")],at.prototype,"onWatchShowAwardingPanel",null),rt([Object(k.Provide)("treasureBoxInfo")],at.prototype,"treasureBoxInfo",void 0),rt([Object(k.Provide)("treasureBox")],at.prototype,"treasureBox",void 0);var it=at=rt([Object(k.Component)({components:{AwardingPanel:nt}})],at),st=(n(1103),Object(q.a)(it,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"treasure-box p-relative"},[n("div",{directives:[{name:"click-report",rawName:"v-click-report",value:{eventName:"box"},expression:"{eventName: 'box'}"}],staticClass:"box-icon bg-cover bg-no-repeat",class:{pointer:!t.treasureBoxInfo.isFinished,open:t.treasureBoxInfo.isOpen},on:{click:t.toggleAwardingPanel}}),n("div",{staticClass:"count-down m-auto t-center b-box none-select"},[t._v(t._s(t._f("secondFormatter")(t.countDownSecond)))]),n("transition",{attrs:{"leave-active-class":"a-scale-out-ease"}},[n("awarding-panel",{directives:[{name:"show",rawName:"v-show",value:t.showAwardingPanel,expression:"showAwardingPanel"}],ref:"awardingPanel",staticClass:"p-absolute",attrs:{"count-down-text":t._f("secondFormatter")(t.countDownSecond)},nativeOn:{click:function(e){t.preventClose(e)}}})],1)],1)},[],!1,null,"2dcd0ee0",null));e.default=st.exports},569:function(t,e,n){},570:function(t,e,n){},571:function(t,e,n){},572:function(t,e,n){}}]);